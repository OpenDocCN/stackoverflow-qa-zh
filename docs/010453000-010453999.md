# StackOverflow 问答 10453000-10453999

# sql-server-2008 - 如何获取更新 SQL 触发器中的原始值

> ID：10453001
> 
> 赞同：3
> 
> 时间：2012-05-04T16:53:10.440
> 
> 标签：sql-server-2008, triggers

我对触发器不是很熟悉，所以感谢您的耐心等待。

我有一个数据库表，其中有四列用于用户文本输入，只有四个日期列显示用户文本输入上次更改的时间。我希望触发器做的是比较用户文本输入列的原始值和新值，如果它们不同，则使用 getdate() 更新日期列。我不知道该怎么做。我写的代码无法获取该字段的更新前值，因此无法将其与更新后值进行比较。有谁知道该怎么做？

（通常我会在存储过程中执行此操作。但是，此数据库表也可以由 Access 数据库直接编辑，我们无法将这些更改转换为使用存储过程。这只让我们使用触发器。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:00:37.123

在 sql server 中，触发器中有两个特殊的表可用，称为插入和删除。与实现触发器的表相同的结构。插入了新版本，删除了旧版本。

# javascript - 茉莉花单元测试 window.onerror

> ID：10453006
> 
> 赞同：4
> 
> 时间：2012-05-04T16:53:27.533
> 
> 标签：javascript, error-handling, jasmine

我对 javascript 相当陌生，并且正在尝试使用 jasmine 对一些错误处理代码进行单元测试。

特别是，我正在尝试编写一些测试来验证替换 window.onerror() 的自定义代码（称为 windowHandleError）是否被调用，并且正在执行我们想要的操作。

我已经尝试了一些类似的东西：

```
 it("testing window.onerror", function() {
        spyOn(globalerror, 'windowHandleError');
        globalerror.install();

        var someFunction = function() {
            undefinedFunction();
        };
        expect(function() {someFunction();}).toThrow();
        expect(globalerror.windowHandleError).toHaveBeenCalled();
    }); 
```

但它不会触发onerror。我看过一些相关的问题，但它们似乎询问特定的浏览器，或者如何/在哪里使用 onerror 而不是如何测试它。
[window.onerror 在 Firefox 中未触发](https://stackoverflow.com/questions/1008692/window-onerror-not-firing-in-firefox)
[在 Selenium 中捕获 JavaScript 错误](https://stackoverflow.com/questions/4189312/capturing-javascript-error-in-selenium)
[window.onerror 不起作用](https://stackoverflow.com/questions/1915812/window-onerror-does-not-work)
[如何在 Internet Explorer 中触发 script.onerror？](https://stackoverflow.com/questions/2027849/how-to-trigger-script-onerror-in-internet-explorer)

根据其中一些人的说法，我认为在调试器中运行规范测试会强制触发 onerror，但不会触发骰子。有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T17:23:41.397

我最近基于类似于 Jasmine的[Buster.JS开发了带有单元测试的小型](http://busterjs.org)[JavaScript 错误处理程序。](https://github.com/lucho-yankov/window.onerror)

[执行 window.onerror 的测试](https://github.com/lucho-yankov/window.onerror/blob/master/test/onerror-test.js)如下所示：

```
 "error within the system": function (done) {

    setTimeout(function() {
      // throw some real-life exception
      not_defined.not_defined();
    }, 10);

    setTimeout(function() {
      assert.isTrue($.post.called);
      done();
    }, 100);
  } 
```

它会在 setTimeout 回调中抛出一个现实生活中的错误，该回调不会停止测试执行，并会在另一个 setTimeout 中检查 100 毫秒后是否调用了间谍，然后调用`done()`这是您使用 Buster.JS 测试异步功能的方式。通过在异步测试中使用[Jasmine 可以使用相同的方法。](http://www.htmlgoodies.com/html5/javascript/using-the-done-method-in-your-jasmine-driven-asynchronous-javascript-tests.html#fbid=JUe1b7Owqsq)`done()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T13:16:58.757

没有茉莉花的知识。

所有单元测试都在 try/catch 块内运行，因此如果一个测试终止，下一个测试可以运行（至少对于 QUnit 来说是真的）。而且由于 window.onerror 不会捕获已经在 try/catch 中捕获的异常，因此在单元测试中测试它时它不会运行。

尝试根据异常手动调用 onerror 函数。

```
try {
    //Code that should fail here.
    someUndefinedFunction();
} catch (e) {
    window.onerror.call(window, e.toString(), document.location.toString(), 2);
}

expect(globalerror.windowHandleError).toHaveBeenCalled(); 
```

这远非完美，因为 document.location 与 url 参数不同，您需要手动设置行号。更好的方法是解析 e.stack 以获得正确的文件和行号。

在单元测试中调用这样的函数时，最好简单地测试您的函数是否已设置以及在使用所有伪造参数调用时它是否正常运行。

# ios - 用相机录制时播放 mp4/youtube 电影

> ID：10453007
> 
> 赞同：2
> 
> 时间：2012-05-04T16:53:29.080
> 
> 标签：ios, video-capture

我正在开发我的第一个 iOS 应用程序，我需要在播放嵌入在 UIWebView 中的 youtube 视频时用相机录制视频。问题是，当我开始捕获时，视频停止播放。

有什么解决方法吗？我想在openGL纹理中播放视频，然后同时播放音频，但我不知道该怎么做。我不需要播放器有控制按钮等。我尝试使用[RosyWriter](http://developer.apple.com/library/ios/samplecode/RosyWriter/RosyWriter.zip)示例代码并更改输入源。

如何才能做到这一点？

[编辑] 我最终以另一种方式解决了我的问题。我不再使用 RosyWriter，而是使用 AVCamRecorder，对于播放视频，我使用 PSYoutubeExtractor 获取 .mp4 文件的 url [，](https://github.com/steipete/PSYouTubeExtractor)然后通过 MPMoviePlayer 播放它。我必须设置 [[AVAudioSession sharedInstance] setCategory:AVAudioSessionSetCategoryPlayAndRecord error:nil]

希望这会对某人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:05:51.180

I don't uderstand what you are trying to do. PSYoutubeExtractor doen't record anything, it's only designed to give you the direct MP4 url. To record a tune/movie, you should use an AVAsset, then export it to mp3/mp4.

I'm really sorry, but this project was for my internship in a company, and I havn't keep any piece of code anymore. But if you have a precise problem I already faced, I can try to help you.

Good luck.

# html - Soundcloud 嵌入式 HTML theme_color 选项不起作用

> ID：10453008
> 
> 赞同：1
> 
> 时间：2012-05-04T16:53:45.950
> 
> 标签：html, embed, soundcloud

我在网页中嵌入 Soundcloud HTML 代码以显示音频播放器。在 Mac 上的 Safari 5.1.4 中预览并在我的 iPhone 应用程序的 web 视图中运行（其行为应与 Safari 相同）嵌入参数“theme_color”不起作用。

例如

```
<iframe width="100%" height="166" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/44200324&auto_play=true&color=915f33&theme_color=00FF00"></iframe> 
```

任何人都知道为什么或解决方法？我希望能够将播放器的主要外观从灰色“着色”为另一种颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:25:20.463

您可以使用 flash 对象自定义颜色：

```
<object height="81" width="100%"> 
    <param name="movie" value="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F32678080&amp;show_comments=true&amp;auto_play=false&amp;color=00cc00&amp;theme_color=111111"></param> 
    <param name="allowscriptaccess" value="always"></param> 
    <embed allowscriptaccess="always" height="81" src="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F32678080&amp;show_comments=true&amp;auto_play=false&amp;color=00cc00&amp;theme_color=111111" type="application/x-shockwave-flash" width="100%"></embed> 
</object> 
```

有关可用参数的列表，请查看：http: [//developers.soundcloud.com/docs/widget](http://developers.soundcloud.com/docs/widget)

# c++ - 如何重新加载隐式链接的dll

> ID：10453012
> 
> 赞同：2
> 
> 时间：2012-05-04T16:54:02.267
> 
> 标签：c++, windows, winapi

我面临一个隐式链接 dll 的问题。我有一个用 C++ 编写的应用程序，它隐式链接到 dll。经过特定次数的迭代后，dll 函数无法按预期工作。我想重新加载这个 dll，以便新加载的 dll 正常工作。问题是由于 dll 隐式链接到应用程序，我无法在运行时重新加载 dll。有什么办法可以让隐式链接的 dll 重新加载？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:55:30.220

您不能强制重新加载隐式链接的 DLL。您将需要使用显式链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:42:58.520

我面临同样的问题。我所做的是我创建了一个接口类。实现接口的类在其构造函数 (LoadLibrary) 中加载 dll，并在析构函数 (FreeLibrary) 上卸载它。

快速说明：这种方法适用于 Visual Studio 2008，但由于某种原因，它不适用于 Visual Studio 98

# android - Android XML.parse() 找不到内容：编码标签

> ID：10453015
> 
> 赞同：1
> 
> 时间：2012-05-04T16:54:31.657
> 
> 标签：android, xml, rss

我正在使用 Android 的 XML 解析助手 ( `android.util.Xml.parse(InputStream, Encoding, ContentHandler`) 来解析这个 RSS 提要：[http](http://www.rssweather.com/wx/nz/christchurch/rss.php) ://www.rssweather.com/wx/nz/christchurch/rss.php 。它似乎无法识别`content:encoded`包含我要检索的数据的标签。下面是 XML 的结构：

```
<rss>
    <channel>
        <item>
            <title>...</title>
            <pubDate>...</pubDate>
            // Other tags
            <content:encoded>
                <![CDATA[
                    (.... this is what I want to retrieve ...)
                ]]>
            </content:encoded>
        </item>
    </channel>
</rsss> 
```

这是我的代码：

```
void parse(){
    RootElement root = new RootElement("rss");
    Element channel = root.getChild("channel");
    Element item = channel.getChild("item");
    Element contentEncoded = item.getChild("content", "encoded");
    // Have also tried these two:
    Element encoded = item.getChild("encoded");
    Element content = item.getChild("content");

    contentEncoded.setEndTextElementListener(new EndTextElementListener() {
        public void end(String body) {
            Log.d("Test", "Content found: " + body);
        }
    });

    try {
        Xml.parse(feedUrl.openConnection().getInputStream(),
                Xml.Encoding.UTF_8, root.getContentHandler());
    } catch (Exception e){
        throw new RuntimeException(e);
    }
} 
```

我哪里出错了？:) 我可以轻松地从`<item>`元素中检索其他数据，例如标题或 pubDate；只有内容：编码让我无法理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:48:00.437

你可以坚持使用你的 Android Sax Parser。我遇到了同样的问题以及使用内容命名空间和“编码”作为元素的解决方案。

您将在 rss 元素中找到内容命名空间：

```
<rss version="2.0"
    xmlns:content="http://purl.org/rss/1.0/modules/content/" ... > 
```

所以获取元素看起来像这样：

```
item.getChild("http://purl.org/rss/1.0/modules/content/", "encoded"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:18:26.387

...我认为“内容：编码”不是元素的有效名称。如果“内容”是一个命名空间并且“编码”了这个命名空间的一个元素，这将是有效的。

# ruby-on-rails - 只用太阳黑子重新索引一个特定的记录

> ID：10453022
> 
> 赞同：5
> 
> 时间：2012-05-04T16:54:43.640
> 
> 标签：ruby-on-rails, search, solr, sunspot

我有两个模型

```
class User < ActiveRecord::Base
  has_many :posts

  searchable do
    text :post_titles
  end

  def post_titles
    posts.map &:title
  end
end

class Post < ActiveRecord::Base
  belongs_to :user
end 
```

问题是，当我更新 Post sunspot 的标题时，不会更新相关用户的索引，并且无法通过新数据搜索。如果我这样做`User.index`可以解决问题，但需要太多时间。有没有更好的解决方案来更新子记录更改的父记录索引（例如重新索引父记录而不是所有用户）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T17:11:33.113

Sunspot 提供了一个实例`index()`方法，用于索引一条记录。

我所做的是

```
 class Post 

   belongs_to :user
   after_save :update_user_index

 private

   def update_user_index
     user.index
   end
end 
```

如果您在控制台中运行它，并想立即查看结果，请致电`Sunspot.commit`

# c# - 如何 <%# Eval() %> 和更改日期

> ID：10453023
> 
> 赞同：0
> 
> 时间：2012-05-04T16:54:46.667
> 
> 标签：c#, asp.net

仅当从数据库中检索到某些内容时，我才尝试添加带有参数的链接。

这是我的代码：

```
protected void GetOrderLines (string OrderID)
{
    string query;
    query = "SELECT ol.ItemId, ol.Amount, ol.Quantity, i.description, ol.RetailPrice, o.OrderDate";
    query += " FROM Distributor d";
    query += " INNER JOIN Orders o";
    query += " ON o.DistID = d.DistID";
    query += " INNER JOIN Orderlines ol";
    query += " ON ol.OrderID = o.OrderID";
    query += " INNER JOIN Items i";
    query += " ON i.InventoryID = ol.ItemID";
    query += " WHERE ol.OrderID = " + OrderID;
    query += " AND ol.GroupItem = 0";
    query += " AND d.DistID = " + Session[ "Distid" ];

    DataTable data = GeneralFunctions.GetData( query );

    RepeaterOrderlineInfo.DataSource = data;
    RepeaterOrderlineInfo.DataBind();
} 
```

这是它给我的数据：

```
ItemId  Amount  Quantity    description RetailPrice OrderDate
6015    660 1   Item 1  660 5/1/2012
6021    199.2   332 Item 2  0.6 5/1/2012
6018    150 6   Item 3  25  5/1/2012
9000    85  4   Technical Support   21.25   5/1/2012
8000    125 4   Custom Programming and Misc. Fees   31.25   5/1/2012 
```

这是页面上的评估代码：

```
<asp:Repeater ID="RepeaterOrderlineInfo" runat="server">
    <ItemTemplate>
        <tr>
            <td>
                <%# Eval("Itemid") %>
            </td>
            <td>
                <%# Eval("description") %>
            </td>
            <td align="right">
                <%# Eval("RetailPrice", "{0:C}") %>
            </td>
            <td align="right">
                <%# Eval("Quantity") %>
            </td>
            <td align="right">
                <%# Eval( "Amount", "{0:C}" )%>
            </td>
        </tr>
    </ItemTemplate>
</asp:Repeater> 
```

我正在尝试为`<%# Eval("Description") %>`

```
<a href="SupportSummary.aspx?sd="<%# Eval("OrderDate") %>&ed=<%# Eval("OrderDate") //- 1 month %>"><%# Eval("Description") %> 
```

如果`description = "Technical Support"`. 使用中继器时可以这样做吗？

所以我在这里寻求的主要内容是：

如何评估 OrderDaye 并减去一个月。仅当它=“技术支持”时如何对描述进行条件处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:00:47.143

您确实需要`OnItemCreated`使用中继器切换到对输出标记的大量控制。这很容易做到，就像这样：

```
<asp:Repeater ID="RepeaterOrderlineInfo" runat="server">
    <ItemTemplate>
        <asp:Label ID="labelDate" runat="server" />
    </ItemTemplate>
</asp:Repeater>

RepeaterOrderlineInfo.ItemCreated += Repeater_ItemCreated;

protected void Repeater_ItemCreated(object sender, RepeatrItemCreatedEventArgs e)
{
    DataRow dataItem = e.Item.DataItem as DataRow;

    if(dataItem != null)
    {
        Label labelDate = e.Item.FindControl("labelDate") as Label;

        if(labelDate != null && row["Description"] != "TechnicalSupport")
           labelDate.Text = // whatever you want to do
    }
} 
```

这为您制作桌子提供了极大的灵活性。老实说，我会尽量避免`Eval(<string>)`在您的标记中使用，而是在您的代码中处理大部分内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:04:37.230

如果你在你的代码隐藏中添加一个方法，你可以在你的转发器中这样调用它：

```
<%# MyMethod(Eval("Description"),Eval("OrderDate")) %> 
```

该方法将是这样的：

```
protected string MyMethod(object description, object orderDate)
{ 
    string link = String.Empty;

    // conditions, assign link if needed

    return link;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T17:16:05.017

Tejs 和 mafue 的答案是正确的，但您也可以这样做 >>

```
<%# Eval("Description").ToString().Equals("Technical Support", StringComparison.OrdinalIgnoreCase) ? link : String.Empty %> 
```

# android - 使用opengl es获取像素/单位关系

> ID：10453031
> 
> 赞同：0
> 
> 时间：2012-05-04T16:55:26.697
> 
> 标签：android, opengl-es, view, pixels, units-of-measurement

我在 Opengl ES 上介绍我，我可以用顶点绘制纹理并将其移动到屏幕上。

但我无法得到像素和单位之间的关系。例如：

我想画一个 64x64 的纹理，在屏幕的所有宽度上重复，如果屏幕宽度是 640，意味着纹理会重复 10 次，我该怎么做呢？

我真的在网上搜索过，但我找不到任何东西，这可以帮助我。

使用这个：

```
GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f,100.0f); 
```

我可以“控制”（我认为）纹理的大小，将第二个参数更改为 45.0f，但我不知道在此函数中执行哪个操作以获得宽度的值screen 设置屏幕的单位数，并在以后正确使用它们。

```
 gl.glTranslatef(0.0f, 0.0f,-0.0f); 
```

这用于获得纹理的正确视图，嗯，这就是我所理解的。

我真的不知道我是否走对了路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:44:30.893

您需要阅读一些内容才能了解 openGL 世界。你可以试试 [http://iphonedevelopment.blogspot.com/2009/05/opengl-es-from-ground-up-table-of.html](http://iphonedevelopment.blogspot.com/2009/05/opengl-es-from-ground-up-table-of.html)

或任何其他。任何 iPhone 教程也适用。您应该尝试使用正交投影（或单位矩阵投影）来制作您想要的东西，但是尝试在 openGL 中使用屏幕像素作为单位是非常难看的。

# java - Google App Engine HRD 在 Eclipse 开发环境中不起作用

> ID：10453035
> 
> 赞同：2
> 
> 时间：2012-05-04T16:55:41.353
> 
> 标签：java, eclipse, google-app-engine

我花了最后一天半的时间在网上搜索答案，任何帮助都会很棒。

问题是我们如何让谷歌应用引擎高复制数据存储（HRD）在我们的本地环境中工作，以便我们使用/测试跨组事务？

我们正在开发一个新的 Java 应用程序以在 GAE 上运行。我们从使用 Eclipse 的 1.6.0 版本的 Google sdk 开始。我们选择 High Replication Datastore 设置。我们不使用 1.6.5。我们正在使用 Objectify。

我最近注意到，Google 和 Objectify 都完全支持跨组 (XG) 事务，但有限制。

我修改了我们的一部分代码，以确保它对我们有用，但遇到了问题。当我运行 junit 测试或将我们的应用程序作为 Web 应用程序运行时，它会给出错误：

警告：java.lang.IllegalArgumentException：不能在单个事务中对多个实体组进行操作。

当我运行此代码时：

DatastoreService ds = DatastoreServiceFactory.getDatastoreService();

System.out.println(ds.getDatastoreAttributes().getDatastoreType());

我得到 MASTER_SLAVE。

我还没有尝试部署应用程序以查看它是否在那里工作。在我可以让它在本地环境中工作之前，这可能不是一个好主意。

# 这里有一些设置

参数，VM 参数：

-javaagent:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.6.5/appengine-java-sdk-1.6.5/lib/agent/appengine-agent.jar -Ddatastore.default_high_rep_job_policy_unapplied_job_pct=50 -Xmx512m -XstartOnFirstThread - Xbootclasspath/p:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.6.5/appengine-java-sdk-1.6.5/lib/override/appengine-dev-jdk-overrides.jar

应用引擎：

选中使用 Google App Eninge

选择使用默认 SDK (appengine-java-sdk-1.6.5 - 1.6.5)

启用本地 HRD 支持已选中

使用 Datanucleus JDO/JPA 访问选中的数据存储

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:15:38.403

看起来您没有正确使用跨组 (XG) 事务。查看事务文档并查看“使用跨组事务”部分下的代码示例。有一个很好的工作代码示例可以帮助您入门。

[https://developers.google.com/appengine/docs/java/datastore/transactions#Uses_​​for_Transactions](https://developers.google.com/appengine/docs/java/datastore/transactions#Uses_for_Transactions)

# currency - 货币的字符串格式（用大括号格式化的负值）

> ID：10453037
> 
> 赞同：1
> 
> 时间：2012-05-04T16:55:45.650
> 
> 标签：currency, string.format

当我们像`String.Format("{0:C}", 126.45)`它一样转换时返回 126.45 美元

但如果我们像 `String.Format("{0:C}", -126.45)`它一样转换返回 ($126.45)

为什么负转换返回大括号？如果我们不想要这个牙套怎么办？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T17:08:15.620

你为什么不尝试类似的东西：

```
String.Format("{0:$#,##0.00}", -126.45) 
```

根据此处[的文档](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencynegativepattern.aspx)，“{0:C1}”或“{0:C2}”的格式应该可以工作，但由于某些奇怪的原因它不是..

另一种方法可能是设置 CultureInfo：

```
CultureInfo culture = (CultureInfo)CultureInfo.CurrentCulture.Clone();
culture.NumberFormat.CurrencyNegativePattern = 1;
string s = string.Format(culture, "{0:c}", -126.45); 
```

参考[这里](http://channel9.msdn.com/forums/TechOff/257565-Formatting-Currecny-to-use-instead-of--for-negatives-c/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-14T13:53:48.767

**Swift 5**如果你得到这种值（-300），这是最好的解决方案

```
extension Double {
static let twoFractionDigits: NumberFormatter = {
    let formatter = NumberFormatter()
    formatter.numberStyle = .decimal
    formatter.minimumFractionDigits = 2
    formatter.maximumFractionDigits = 2
    formatter.currencySymbol = "$"
    formatter.currencyCode = "USD"
    formatter.numberStyle = .currency
    formatter.usesGroupingSeparator = true

    return formatter
}()
var formatted: String {
    return Double.twoFractionDigits.string(for: self) ?? ""
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:11:03.347

在 en-US 语言环境中，括号用于表示负值。目视扫描一长列数字，许多人发现更容易看到负数。通常最受关注的是负值（哎呀！我的支票账户余额透支了）。

要获得不同的格式化行为，您可以更改您的语言环境，或者您可以将[格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)更改为 F 之类的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T17:11:11.093

它有括号，因为这是`CultureInfo`你使用的任何东西的标准。

我自己从来没有做过，但格式的构成是由当前`NumberFormatInfo`实例控制的。

如果你弄明白了，回答你自己的问题，我会加你的

# css - 如何使用 jquery 在 ajax 响应上应用完整的 css

> ID：10453038
> 
> 赞同：0
> 
> 时间：2012-05-04T16:55:47.323
> 
> 标签：css, jquery, jquery-mobile

我们正在使用 jQuery Mobile 框架构建一个单页应用程序。我们的情况是我们不想使用默认行为，即劫持 href 链接并将其呈现为 ajax 响应，因为实际上，页面更改会导致屏幕闪烁一点，我们不希望这种情况发生。因此，为避免这种情况，我们将编写自己的 ajax 调用到服务器以获取特定数据并使用来自服务器的响应更新页面上的内容。但是，这样做时，任何需要绑定在响应上的 javascript 和响应 HTML 上的 Css 样式都会完全丢失。

有人可以建议为通过 Ajax 接收的 html 重新绑定/刷新 JS 和 CSS 的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:02:59.873

[阅读JQM 文档](http://jquerymobile.com/test/docs/pages/page-scripting.html)中的“增强新标记” 。该`trigger('create')`事件应该解决这个问题：

```
$( ...new markup that contains widgets... ).appendTo( ".ui-page" ).trigger( "create" ); 
```

# antlr - 如何将多个父母表示为重写规则？

> ID：10453041
> 
> 赞同：1
> 
> 时间：2012-05-04T16:55:49.910
> 
> 标签：antlr

假设我有以下 ANTLR 规则：

```
ROOT: 'r' ('0'..'9')*;
CHILD: 'c' ('0'..'9')*;
expression: ROOT ('.'^ CHILD)*; 
```

对于诸如 的输入`r.c1.c2.c3`，ANTLR 将生成以下树：

```
.(.(.(r c1) c2) c3) 
```

如何在`'.'`没有`^`运算符的情况下直接表示父属性，即在重写规则中？

```
expression: ROOT ('.' CHILD)* -> ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:02:46.140

诀窍是`expression`在重写规则中递归调用规则（`$expression`下面的部分）：

```
expression : (ROOT -> ROOT) ('.' CHILD -> ^('.' $expression CHILD))*; 
```

这相当于：

```
expression: ROOT ('.'^ CHILD)*; 
```

是的，我知道，它并不漂亮，没有像您（可能）希望的那样简单的语法：

```
expression: ROOT ('.' CHILD)* -> ^(...); 
```

请参阅：Parr 的[权威 ANTLR 参考](http://pragprog.com/book/tpantlr/the-definitive-antlr-reference)，第 7 章，段落*“在重写规则中引用先前的规则 AST”*，第 174 页。

# jquery - jquery 和 RadioButton 改变事件

> ID：10453048
> 
> 赞同：1
> 
> 时间：2012-05-04T16:56:10.313
> 
> 标签：jquery, html, jquery-ui

我有一组同名的单选按钮。我使用选择器按`.changed`名称将事件附加到单选按钮组。事件触发，但`.val()`单选按钮组的值是更改前组的值，而不是更改后的值。更改后如何获得价值，一定是我做错了什么。

```
$('[name="Messages"]').click(function () { 
    someFunction('Messages', $('[name="Messages"]').val()) 
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:58:50.080

You probably want the value for the particular radio button that was clicked on. You can use `$(this).val()` to get it. Otherwise you need to clarify, there's no such thing as a "group value". Each individual radio button should have it's own value.

```
$('[name="Messages"]').click(function () { 
    someFunction('Messages', $(this).val());  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:01:51.427

您没有过滤掉未选中的单选按钮，因此您的点击将始终带回 DOM 中第一个单选按钮的值。尝试过滤掉`:checked`：

```
$('[name="Messages"]').click(function () { 
    someFunction('Messages',$('[name="Messages"]:checked').val());
}); 
```

小提琴：http: [//jsfiddle.net/T7Q8T/](http://jsfiddle.net/T7Q8T/)

# javascript - 是否可以从谷歌地图获取建筑数据？

> ID：10453050
> 
> 赞同：1
> 
> 时间：2012-05-04T16:56:14.900
> 
> 标签：javascript, google-maps, google-maps-api-3

`landscape.man_made`是否可以为 Google 地图操作或复制建筑数据 ( )？我一直在谷歌搜索有关构建数据的信息，但并没有真正找到任何东西。我希望能够增强现有地图以添加实时阴影（例如）。在此先感谢，奥比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:38:00.803

不幸的是，无法访问 Maps API 背后的原始数据。

# apache - SSLVerifyClient 不要求证书

> ID：10453052
> 
> 赞同：1
> 
> 时间：2012-05-04T16:56:26.397
> 
> 标签：apache, ssl-certificate, virtualhost

当我提出指令时：

```
SSLVerifyClient require
SSLVerifyDepth  2
SSLCertificateFile cert/path/cert.crt 
```

在虚拟主机指令中，然后转到网站，弹出框不要求我的证书。但是，当我在虚拟主机之前放置相同的指令时，它会。

为什么它会这样？

文档实际上说列出的 SSL 指令应该在虚拟主机内定义。

# algorithm - 图 - 具有顶点权重的最短路径

> ID：10453053
> 
> 赞同：21
> 
> 时间：2012-05-04T16:56:48.113
> 
> 标签：algorithm, data-structures, graph, shortest-path, dijkstra

这是一个消费税：

> 在某些图问题中，顶点可以有权重来代替或除了边的权重之外。令 Cv 为顶点 v 的成本，C(x,y) 为边 (x,y) 的成本。这个问题涉及在图 G 中找到顶点 a 和 b 之间的最便宜的路径。路径的成本是路径上遇到的边和顶点的成本之和。
> 
> (a) 假设图中每条边的权重为零（而非边的成本为∞）。假设所有顶点的Cv =1 1≤v≤n（即所有顶点的成本相同） . 给出一个有效的算法来找到从 a 到 b 的最便宜的路径及其时间复杂度。
> 
> (b) 现在假设顶点成本不是恒定的（但都是正的）并且边成本保持如上。给出一个有效的算法来找到从 a 到 b 的最便宜的路径及其时间复杂度。
> 
> (c) 现在假设边和顶点成本都不是常数（但都是正的）。给出一个有效的算法来找到从 a 到 b 的最便宜的路径及其时间复杂度。

* * *

这是我的答案：

(a) 使用正常的 BFS；

(b) 使用dijkstra算法，但是用顶点权重代替权重；

（C）

也使用dijkstra的算法

如果只考虑边权重，那么对于dijkstra算法的关键部分，我们有：

```
if (distance[y] > distance[v]+weight) {
    distance[y] = distance[v]+weight; // weight is between v and y
} 
```

现在，通过考虑顶点权重，我们有：

```
if (distance[y] > distance[v] + weight + vertexWeight[y]) {
   distance[y] = distance[v] + weight + vertexWeight[y]; // weight is between v and y
} 
```

* * *

我对吗？

我想我对 (c) 的回答太简单了，是吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-04T17:06:23.800

您走在正确的轨道上，解决方案非常简单。

在 B、C 中，将问题简化为正常的 dijkstra，它假定顶点上没有权重。
为此，您需要`w':E->R`为边定义一个新的权重函数。

```
w'(u,v) = w(u,v) + vertex_weight(v) 
```

在 (b) `w(u,v) = 0`(或 const) 中，并且该解决方案对于拟合 (c) 也是稳健的！

其背后的想法是使用边缘会消耗边缘的权重以及到达目标顶点的成本。源的成本已经支付，所以你忽略它¹。

减少问题，而不是更改算法，通常更易于使用、证明和分析！

* * *

`s`(1) 在此解决方案中，您“错过”了源的权重，因此从to的最短路径`t`将是：`dijkstra(s,t,w') + vertex_weight(s)_`[where `dijkstra(s,t,w')`is the distance from `s`to `t`using out`w'`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T17:13:07.620

可以通过将两个顶点 a1 和 a2 中的每个顶点 a 以 a1 到 a2 的边以 a 的权重切片来去除顶点权重。

我认为你适合dijkstra算法的改编。

# eclipse - 我可以让 git gui 和 git bash 和 eclipse git 插件同时查看同一个 repo 吗？

> ID：10453059
> 
> 赞同：2
> 
> 时间：2012-05-04T16:57:11.207
> 
> 标签：eclipse, git, eclipse-plugin, git-gui

我正在使用 Eclipse 在 Windows 7 机器上处理 Android java 项目。我正在使用 Git 进行版本跟踪、备份和共享。

我有 git gui、git bash 和 eclipse git 插件。我的问题真的归结为：

如果我将工具（gui、bash、eclipse）全部打开并同时查看同一个 git repo 是否安全和/或是否可以正常工作？

我问这个是因为我有几次 eclipse 未能进行检查，有一次在 git gui 中当它呕吐时我变得勇敢/愚蠢并点击了“解锁 git index”选项。自从我解锁后，我的 git 客户都没有抱怨过。但是有一个锁并且我“手动”解锁它的建议让我害怕我在我的 git repos 中打开了非线程安全崩溃的大门。

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:01:15.410

是的，它是安全的。索引锁通常只打算在操作正在进行时（例如，在创建提交或正在处理合并时）持有。

如果您必须手动解锁索引，这可能意味着您的一个 Git 客户端在执行其中一项操作时崩溃/出错，因此意外将其锁定。

# php - php if 语句在链接中转义的正确语法是什么

> ID：10453064
> 
> 赞同：0
> 
> 时间：2012-05-04T16:57:30.567
> 
> 标签：php, syntax, escaping

我想根据值是否与某个值匹配来更改链接地址。但我返回一个语法错误。我需要改变什么？我得到的错误是语法错误，意外的 T_IF

```
echo "<a href='".if($type=='group'){echo'link_a';}else{echo 'link_b';}."'>".$usaname."</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:00:11.393

尝试这个

```
$link = ($type=='group') ? 'link_a' : 'link_b';

echo "<a href='".$link."'>".$usaname."</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:01:43.587

您不能在超链接或您正在打印的任何文本中使用 if 语句。相反，您应该拥有这样的代码，将条件（和其他）函数保留在打印 html 的位置之外。

```
if ($type == "group"){ $link = "link_a"; } else { $link = "link_b"; }
echo "<a href='$link'>$usaname</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T17:01:26.900

```
echo "<a href='". $type=='group' ? 'link_a' : 'link_b';."'>".$usaname."</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T17:08:08.780

使用三元运算符

```
echo "<a href='". ($type == 'group' ? 'link_a' : 'link_b') ."'>" . $username ."</a>"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T17:01:59.253

在这种情况下，三元运算符很方便。

```
echo "<a href='" . ($type == 'group' ? 'link_a' : 'link_b') . "'>" . $usaname . "</a>"; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T17:02:09.430

你应该这样做：

```
echo "<a href=\"" . ($type == "group") ? "link_a" : "link_b" . "\"></a> 
```

这可能是我能找到的最短和最干净的方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T17:00:54.053

试试三元...

```
echo '<a href="', htmlspecialchars(($type==='group') ? 'link_a' : 'link_b'), '">', htmlspecialchars($usaname), '</a>'; 
```

这应该会简化一些事情。此外，最好使用它，`htmlspecialchars()`以便您拥有有效的 HTML。

# javascript - 嵌套 iframe 可以工作吗？

> ID：10453072
> 
> 赞同：1
> 
> 时间：2012-05-04T16:58:20.237
> 
> 标签：javascript, samsung-smart-tv

我正在尝试在 maple 浏览器中在三星智能电视 2010 和 2011 上运行 jquery testswarm (http://swarm.jquery.org/) 运行程序，以测试我的应用程序。

我构建了一个小部件，它是 jquery testswarm runner。这工作很好。

Jquery testswarm runner 使用 iframe 来执行测试。一个 iframe 工作正常。

然后我尝试运行一些 AngularJS 测试（http://angular.github.com/angular-phonecat/step-8/test/e2e/runner.html），这需要另一个 iframe。

总而言之 - 我有一个使用 iframe 的小部件，里面有一个 iframe。

Any idea how to make that work?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T22:16:05.237

iframes are not fully supported on any samsung smart tvs. Check out the [Samsung Forum](http://www.samsungdforum.com/SamsungDForum/ForumView/df3455b529adf7c4?forumID=3193140890a213d3)

# qt - 为什么我无法在 Visual Studio 2008 中使用 Qt？

> ID：10453080
> 
> 赞同：1
> 
> 时间：2012-05-04T16:58:55.943
> 
> 标签：qt, visual-studio-2008

我已经[为 Windows](http://releases.qt-project.org/qt4/source/qt-win-opensource-4.8.1-vs2008.exe) 4.8.1 下载了 Qt for Visual Studio 2008。

我已经`configure.exe`从命令提示符运行。

但是我在我的“C:\QT\4.8.1”目录中的任何地方都找不到nmake.exe 或make.exe。

因此，我无法将 Qt 与 Visual Studio 2008 一起使用。

现在做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:02:34.323

`nmake`是 Visual Studio 附带的品牌。

您应该已经从 Visual Studio 命令行提示符运行您遵循的任何指令，其中包含所有正确的 PATH 设置，以便在命令行中使用`nmake`和使用。`cl`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T12:33:25.653

好的。最后，我找到了我的解决方案。

第1步）。下载并安装[QT for Visual Studio 2008 4.8.1](http://qt.nokia.com/downloads/windows-cpp-vs2008)。

第2步）。下载并安装[QT Visual Studio 插件 1.1.10](http://qt.nokia.com/downloads/visual-studio-add-in)。

根本不需要其他任何东西。

现在我可以直接创建、编译和运行我的“Hello World”- QT 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:30:09.100

您可以使用 QT Creator 作为您的 IDE。我发现启动和运行它是完全没有问题的。

# android - 一段时间后，Android 应用程序停止接收 c2dm 消息

> ID：10453087
> 
> 赞同：0
> 
> 时间：2012-05-04T16:59:14.660
> 
> 标签：android, android-c2dm

我们一直在尝试开发一个使用 Google 的 c2dm 服务的 android 应用程序。当我们在清除所有数据后启动应用程序时，应用程序接收到 c2dm 消息就好了，但过了一段时间（可能是 2 分钟），消息拒绝到达。

我们也检查了从服务器推送c2dm消息后收到的code，code成功（code number 200无错误）。

在 Stack Overflow 上搜索相关帖子后，我们看到了这样一个帖子： [为什么 Android C2DM 推送消息不总是到达？](https://stackoverflow.com/questions/7243244/why-do-android-c2dm-push-messages-not-always-arrive) 但是我们验证了我们不会在每次应用程序启动时注册到 c2dm 服务。

在我们的案例中似乎有什么问题？

我们使用 android 2.2 API 8 版本。

在此先感谢，马克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:31:33.333

您应该始终牢记，Google 的 C2DM 允许每天发送一定数量的消息。我认为在 2-3 分钟内发送大量消息（客户聊天或类似的东西）可能是您问题的根源。

另外，请记住，无法保证消息一定会到达。根据 Google 的 C2DM 介绍：*C2DM 不保证消息的传递或顺序。*但您可能已经知道这一点。

我在想，如果你的平均 2-3 分钟是一个规则，那么可能是消息的限制可能是原因。尝试发送更少的消息，看看间隔是否不会变大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:10:01.623

“也许 2 分钟” - 你应该首先确认这一点。你必须澄清：

*   这个问题与这台设备有关吗？
*   它是否始终如一地发生？如果不是，是什么触发了它？
*   它发生过一次，还是每次都发生？

请记住，不能保证 C2DM 消息。有些不会到达。

另请注意，有时 Android 设备会“脱落”c2dm 并且在一段时间内收不到消息。您会在某些网络上看到类似的效果（例如，根据我的经验，一些 C2DM 消息不是通过 wifi 网络传递的，所以也尝试 3G）。

# html - 使用html5画布画一个圆圈但只显示它的一部分

> ID：10453091
> 
> 赞同：2
> 
> 时间：2012-05-04T16:59:28.727
> 
> 标签：html, html5-canvas, geometry

我的页面上有一个画布

```
<canvas id="oneCanvas"  width="250px" heigth="250px"></canvas>​ 
```

然后我想在上面画一个圆圈

```
function drawCircle(theCanvas){
            var context=theCanvas.getContext('2d');
            context.beginPath();
            context.strokeStyle="#000000";
            context.lineWidth=50;
            context.arc(125,125,70,(Math.PI/180)*0,(Math.PI/180)*270,false);
            context.stroke();
            context.closePath();
        }
        $(function(){
            var theCanvas=document.getElementById('oneCanvas');
            drawCircle(theCanvas);
        });​ 
```

这段代码有问题：

圆圈只显示一部分，画布的高度似乎小于 250px

这是[示例](http://jsfiddle.net/JLNY3/2/)

那么为什么会发生这种情况？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:38:57.460

在您的代码中，**`heigth`**拼写错误。尾随`h`和`t`必须交换：**`height`**.

```
<canvas id="oneCanvas" width="250" height="250"></canvas>​ 
```

至于“圆只显示一部分”的问题：如果要画一个完整的圆，从零度到360度画。270 度只是一个圆的四分之三。

```
 // *270 changed to *360
    context.arc(125, 125, 70, (Math.PI/180)*0, (Math.PI/180)*360, false);
    //                        ^^^^^^^^^^^^^^^ This is zero, by the way 
```

**  [http://jsfiddle.net/JLNY3/3/](http://jsfiddle.net/JLNY3/3/)**

# c# - 组合框新选择的项目事件无法正常运行 C#

> ID：10453093
> 
> 赞同：0
> 
> 时间：2012-05-04T16:59:43.087
> 
> 标签：c#, combobox, bindingsource

我有一个由绑定源填充的组合框。我正在尝试让我的程序完成以下操作，当更改选择时，它会执行以下命令：

```
dataSetInstance.tbl2.Clear();
oleDbDataAdapter1.SelectCommand.Parameters[0].Value = label2.Text;
oleDbDataAdapter1.Fill(dataSetInstance.tbl2); 
```

作为一个按钮，上面的代码可以工作，我得到了我想要的结果，但是使用`comboBox1_SelectionChangeCommitted`具有相同代码的方法，似乎我必须在组合框中选择项目两次才能获得与我的代码相同的结果上面已经在按钮单击中使用过。

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:13:57.950

而不是`SelectionChangeCommited`，尝试使用`SelectedIndexChnaged`.

在 MSDN 上查看此示例：

*   [ComboBox.SelectedIndexChanged 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindexchanged.aspx)

# .net - RenderTransform 与 PushTransform

> ID：10453095
> 
> 赞同：4
> 
> 时间：2012-05-04T16:59:59.540
> 
> 标签：.net, wpf, rendering, transformation

我有一个形状（下面的红色路径），我必须在这个路径上应用一个[TranslateTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.translatetransform.aspx)和一个[ScaleTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.scaletransform.aspx)转换。但是如果我以这种方式使用[Shape](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.aspx) [RenderTransform](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransform(v=vs.90).aspx)属性：

```
Path MyPath = new Path { Fill = new SolidColorBrush(Colors.Red) };
MyPath.Data = MyPathGeometry;
TransformGroup transf = new TransformGroup();
transf.Children.Add(new TranslateTransform(50, 50));
transf.Children.Add(new ScaleTransform(2, 2));
MyPath.RenderTransform = transf; 
```

我得到了这种类型的图纸：

![在此处输入图像描述](../Images/e6614e728cba2830712e447d82e1d7b2.png)

相反，如果我以这种方式使用[DrawingContext](http://msdn.microsoft.com/en-us/library/ms653182(v=vs.90).aspx) [PushTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.pushtransform(v=vs.90).aspx)方法：

```
DrawingVisual MyPath = new DrawingVisual();

using (DrawingContext context = MyPath.RenderOpen()) {
   context.PushTransform(new TranslateTransform(50, 50));
   context.PushTransform(new ScaleTransform(2, 2));
   context.DrawGeometry(Brushes.Red, null, MyPathGeometry);
} 
```

我得到了这种类型的图纸：

![在此处输入图像描述](../Images/cfccbd300aae0d026b1800c3ca48daa0.png)

为什么两条路径以不同的方式放置？使用 PushTransform 和 RenderTransform 有什么区别？我怎么能在这两种情况下得到相同的结果？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T18:34:59.580

区别只是应用转换的顺序。

在第一种情况下 (TransformGroup)，您首先平移 (50, 50)，然后按 (2, 2) 缩放。在第二种情况下（PushTransform），您首先缩放，然后平移。

TransformGroup 中的转换按顺序、先进先出的顺序执行，而推送的转换按堆栈式或后进先出的顺序执行。

# php - PHP：流式 PDF（使 PDF 只能从网页访问）

> ID：10453099
> 
> 赞同：0
> 
> 时间：2012-05-04T17:00:16.390
> 
> 标签：php, pdf, streaming

我有一个用 PHP 构建的站点，我们有一些 PHP 页面需要登录，这些页面会生成指向 PDF 的链接。问题是那些 PDF（已复制到 Amazon Cloudfront）已编入索引并可用于搜索。

将现有 PDF 流式传输到浏览器的最简单方法是什么，使用户必须登录才能查看文档？我希望有一些简单的标头代码或者我可以说“将此文件加载到网络上无法访问的服务器上并将其输出为 PDF”的内容。

有什么想法/建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:08:31.353

您可以阻止对文件的访问（如另一个答案中所述），或者（更聪明的是，恕我直言）您可以在 PHP 中检查凭据（或执行几乎任何操作）后将文件传递给浏览器。这里有代码示例和讨论：http: [//bytes.com/topic/php/answers/159354-pass-through-any-file](http://bytes.com/topic/php/answers/159354-pass-through-any-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:04:03.147

您可以使用 htaccess（或类似工具）将任何对 .pdf 文档的请求重定向到 PHP 脚本，并传递请求的文件名。然后脚本可以验证登录凭据，如果用户登录，它可以发送 PDF 标题、获取 PDF 文档 ( `file_get_contents`) 并输出代码。

# delphi - “Known IDE Packages”详细说明安全删除未使用的包

> ID：10453100
> 
> 赞同：7
> 
> 时间：2012-05-04T17:00:17.647
> 
> 标签：delphi, delphi-xe2, packages

我正在我的 Delphi XE2 IDE 中进行一些清理，以最小化加载的包，并且由于 IDE 中的内容较少，因此尝试使其更加稳定（伙计，它是如何崩溃的）。

这样做的主要原因是重构快捷方式与我使用的其他工具发生冲突，通常当我错误地点击重构快捷方式时，IDE 会加载很多东西并因一些 .NET 错误而崩溃，所以我摆脱了Delphi 默认重构函数。

为了摆脱它，我刚刚从注册表中删除了“refactoride160.bpl - 核心重构包”，它确实有效。

但是我注意到注册表中有很多其他没有描述的包，我认为知道这些包是什么以便了解可以安全删除的内容很有趣。

我知道删除软件包有一些影响，可以指出，但这个问题的主要目标是更好地了解 IDE 上加载的内容，以便我可以调整它以适应我的使用。

这是注册表中的条目，请注意有很多未命名的包，我在哪里可以找到有关这些的信息？哪些可以安全移除？

```
[HKEY_CURRENT_USER\Software\Embarcadero\BDS\9.0\Known IDE Packages]
"C:\\Users\\Public\\Documents\\RAD Studio\\9.0\\Experts\\IDEFixPackStartup.bpl"="IDE Fix Pack Startup"
"C:\\Program Files (x86)\\SmartBear\\AQtime 7\\Bin\\AQtime7BDS9.bpl"="AQtime 7 IDE Package"
"$(BDS)\\Bin\\asmview160.bpl"="Assembly Browser Package"
"$(BDS)\\bin\\comptoolbar160.bpl"="Component Toolbar Package"
"$(BDS)\\Bin\\dbkdebugide160.bpl"="(Untitled)"
"$(BDS)\\Bin\\delphiwin32160.bpl"="Delphi Win32 Platform"
"$(BDS)\\Bin\\dotnetcoreide160.bpl"=".NET Core IDE Package"
"$(BDS)\\bin\\exceptiondiag160.bpl"="(Untitled)"
"$(BDS)\\bin\\fileexplorer160.bpl"="(Untitled)"
"$(BDS)\\bin\\historyide160.bpl"="(Untitled)"
"$(BDS)\\Bin\\htmlhelp2160.bpl"="HtmlHelp Viewer"
"$(BDS)\\bin\\idefilefilters160.bpl"="IDE File filters"
"$(BDS)\\bin\\plugview160.bpl"="Pluggable Tree View Package"
"$(BDS)\\Bin\\projecttargets160.bpl"="(Untitled)"
"$(BDS)\\Bin\\projpageide160.bpl"="Value Data: Project and template library package"
"$(BDS)\\Bin\\startpageide160.bpl"="Start Page IDE Package"
"$(BDS)\\Bin\\tlbview160.bpl"="TypeLibrary Browser Package"
"$(BDS)\\Bin\\codetemplates160.bpl"="(Untitled)"
"$(BDS)\\bin\\coreproide160.bpl"="Core IDE Pro Package"
"$(BDS)\\bin\\dbkdebugproide160.bpl"="(Untitled)"
"$(BDS)\\Bin\\profiledeployide160.bpl"="(Untitled)"
"$(BDS)\\Bin\\profilemgride160.bpl"="(Untitled)"
"$(BDS)\\bin\\refactoride160.bpl"="Core Refactoring Package"
"$(BDS)\\bin\\todoide160.bpl"="ToDo"
"$(BDS)\\Bin\\delphidotnetcore160.bpl"="(Untitled)"
"$(BDS)\\Bin\\DataExplorer160.bpl"="(Untitled)"
"$(BDS)\\Bin\\iteidew32160.bpl"="(Untitled)"
"$(BDS)\\bin\\htmlide160.bpl"="(Untitled)"
"$(BDS)\\Bin\\unittestide160.bpl"="(Untitled)"

[HKEY_CURRENT_USER\Software\Embarcadero\BDS\9.0\Known IDE Packages\Delphi]
"$(BDS)\\Bin\\delphicompro160.bpl"="(Untitled)"
"$(BDS)\\Bin\\delphide160.bpl"="Delphi Win32 IDE Personality"
"$(BDS)\\Bin\\delphipro160.bpl"="(Untitled)"
"$(BDS)\\Bin\\comcore160.bpl"="(Untitled)"
"$(BDS)\\Bin\\delphivclide160.bpl"="Delphi VCL Designer IDE Package"
"$(BDS)\\Bin\\vclmenudesigner160.bpl"="(Untitled)"
"$(BDS)\\Bin\\win32debugide160.bpl"="(Untitled)"
"$(BDS)\\Bin\\win32debugproide160.bpl"="(Untitled)"
"$(BDS)\\Bin\\delphicoment160.bpl"="(Untitled)"
"$(BDS)\\Bin\\delphierrorinsite160.bpl"="Delphi Error Insite Package"
"$(BDS)\\Bin\\delphicoreproide160.bpl"="(Untitled)"
"$(BDS)\\Bin\\delphiwin64160.bpl"="Delphi Win64 Platform"
"$(BDS)\\Bin\\win64debugide160.bpl"="(Untitled)"
"$(BDS)\\Bin\\TGIDE160.bpl"="Modeling IDE Integration" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T17:51:59.543

据我所知，不存在包含 Delphi IDE bpl 描述的完整列表，但作为起点（并遵循[Sertac](https://stackoverflow.com/users/243614/sertac-akyuz)建议），您可以使用版本信息结构提取每个 bpl 文件的描述。使用此信息将为您提供一些线索，每个 bpl 的主要功能是什么。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  IOUtils,
  Classes,
  Windows,
  SysUtils;

type
  TLangAndCP = record
    wLanguage : word;
    wCodePage : word;
    end;
  PLangAndCP = ^TLangAndCP;

Function GetFileDescription(const FileName : string) : string;
var
  dwLen     : integer;
  ZValue    : Cardinal;
  lpData    : PChar;
  Lang      : PLangAndCP;
  LangLen   : cardinal;
  SubBlock  : string;
  Value     : PChar;
  Len       : cardinal;
begin
  Result:='';
  dwLen:=GetFileVersionInfoSize(PChar(FileName),ZValue);
  if dwLen>0 then
  begin
    lpData:=AllocMem(dwLen);
    GetFileVersionInfo(PChar(FileName),0,dwLen,lpData);
    VerQueryValue(lpData,PChar('\\VarFileInfo\\Translation'),Pointer(Lang),LangLen);
    SubBlock:=Format('\\StringFileInfo\\%.4x%.4x\\%s',[Lang^.wLanguage,Lang^.wCodePage,'FileDescription']);
    VerQueryValue(lpData,PChar(SubBlock),Pointer(Value),Len);
    Result:=Value;
    FreeMem(lpData,dwLen);
  end;
end;

Var
  LFileName  : string;
  List       : TStrings;
begin
  try
   List:=TStringList.Create;
   try
     for LFileName  in TDirectory.GetFiles('C:\Program Files (x86)\Embarcadero\RAD Studio\9.0\bin', '*.bpl') do
     List.Add(Format('%-30s %s',[ExtractFileName(LFileName), GetFileDescription(LFileName)]));
     List.SaveToFile('BplDesc.txt');
   finally
     List.Free;
   end;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

这是带有描述的 bpl 列表。

```
adortl160.bpl                  Embarcadero ADO DB Component Package
applet160.bpl                  Embarcadero Control Panel Wizard
asmview160.bpl                 Assembly Viewer
AzureCloud160.bpl              DataSnap Azure Package
bcbcoment160.bpl               Embarcadero COM Enterprise Package for C++
bcbcompro160.bpl               Embarcadero COM Professional Package for C++
bcbcorba160.bpl                ACE/TAO CORBA IDE Package
bcbent160.bpl                  C++Builder Enterprise Integrated Development Environment
bcbfmxide160.bpl               Core BCB FMX IDE Package
bcbide160.bpl                  Core C++Builder Integrated Development Environment
bcbie160.bpl                   Embarcadero C++Builder Internet Explorer 6.0 Package
bcboffice2k160.bpl             Embarcadero C++Builder Office 2000 Components
bcbofficexp160.bpl             Embarcadero C++Builder Office XP Servers Package
bcbosx32160.bpl                C++Builder OSX32 Platform
bcbpro160.bpl                  C++Builder Professional Integrated Development Environment
bcbsmp160.bpl                  C++Builder Sample Components Package
bcbvclide160.bpl               Core BCB VCL IDE Package
bcbwin32160.bpl                C++Builder Win32 Platform
bdertl160.bpl                  Embarcadero BDE DB Component Package
bindcomp160.bpl                Embarcadero Component Package
bindcompfmx162.bpl             Embarcadero Component Package
bindcompvcl160.bpl             Embarcadero Component Package
bindengine160.bpl              Embarcadero Component Package
bindgraph160.bpl               Embarcadero Component Package
CloudService160.bpl            Cloud Service Package
codeguardide160.bpl            CodeGuard IDE Package
codetemplates160.bpl           Embarcadero Code Templates Manager
comcore160.bpl                 Embarcadero Core COM Professional Package
comentcore160.bpl              Embarcadero COM Core Enterprise Package
comptoolbar160.bpl             Embarcadero Component Toolbar
coreide160.bpl                 Core Integrated Development Environment
coreproide160.bpl              Core Professional Integrated Development Environment
CustomIPTransport160.bpl       Internet Protocol Custom Transport Package
DataExplorer160.bpl            Embarcadero Data Explorer Control Wrapper
DataSnapClient160.bpl          DataSnap Client Package
DataSnapCommon160.bpl          DataSnap Common Package
DataSnapConnectors160.bpl      DataSnap Connectors Package
DataSnapConnectorsFreePascal160.bpl DataSnap Mobile Connectors FreePascal Package
DataSnapIndy10ServerTransport160.bpl DataSnap Server Transport Package
DataSnapProviderClient160.bpl  DBX DataSnap Client Package
DataSnapServer160.bpl          DataSnap Server Package
dbexpress160.bpl               Embarcadero DBExpress Component Package
dbkdebugide160.bpl             DBK Debugger IDE Package
dbkdebugproide160.bpl          DBK Debugger Professional IDE Package
dbrtl160.bpl                   Embarcadero Database Component Package
dbtest.bpl                     DbTest Package
dbx160.bpl                     Embarcadero Database Explorer UI & engine package
dbxcds160.bpl                  Embarcadero Local DBX Client DataSet Component Package
DBXClientDriver160.bpl         DBXClientDriver Package
DbxCommonDriver160.bpl         DBXCommonDriver Package
DBXDb2Driver160.bpl            DBXDb2Driver Package
DBXFirebirdDriver160.bpl       DBXFirebirdDriver Package
DBXInformixDriver160.bpl       DBXInformixDriver Package
DBXInterBaseDriver160.bpl      DBXInterBaseDriver Package
DBXMSSQLDriver160.bpl          DBXMSSQLDriver Package
DBXMySqlDriver160.bpl          DBXMySQLDriver Package
DBXOdbcDriver160.bpl           DBXOdbcDriver Package
DBXOracleDriver160.bpl         DBXOracleDriver Package
DBXSybaseASADriver160.bpl      DBXSybaseASADriver Package
DBXSybaseASEDriver160.bpl      DBXSybaseASEDriver Package
dcl31w160.bpl                  Embarcadero Windows 3.1 Components
dclact160.bpl                  Embarcadero ActionBar Components
dclado160.bpl                  Embarcadero ADO DB Components
dclbcbsmp160.bpl               C++Builder Design Time Sample Components Package
dclbde160.bpl                  Embarcadero BDE DB Components
dclbindcomp160.bpl             Embarcadero LiveBindings Components
dclbindcompfmx160.bpl          Embarcadero LiveBindings Components FireMonkey
dclbindcompvcl160.bpl          Embarcadero LiveBindings Components VCL
dclCloudService160.bpl         Cloud Service Design Package
dclDataSnapClient160.bpl       DataSnap Client Design Package
dclDataSnapCommon160.bpl       DataSnap Common Design Package
dclDataSnapConnectors160.bpl   DataSnap Connectors Design Package
dclDataSnapIndy10ServerTransport160.bpl DataSnap Server Transport Design Package
dclDataSnapProviderClient160.bpl DataSnap Provider Client Design Package
dclDataSnapServer160.bpl       DataSnap Server Design Package
dcldb160.bpl                   Embarcadero Database Components
dcldbx160.bpl                  Embarcadero DBExpress Components
dcldbxcds160.bpl               Embarcadero Local DBX ClientDataSet Components
dclDBXDrivers160.bpl           dbExpress Drivers Design Package
dclDBXDriversEnt160.bpl        dbExpress Enterprise Drivers Design Package
dclDBXDriversInt160.bpl        dbExpress Drivers Int Design Package
dclemacsedit160.bpl            Embarcadero EMACS Keybindings Example Package
dclExpertsCreators160.bpl      Embarcadero Experts Creators Design Package
dclExpertsUI160.bpl            Embarcadero Experts UI Design Package
dclfmistd160.bpl               Embarcadero FMI Standard Components
dclfmxstd160.bpl               Embarcadero FMX Standard Components
dclib160.bpl                   Interbase Express Design Package
dclIBXLegacy160.bpl            Legacy Interbase Express Design Package
dclie160.bpl                   Delphi-32 Development Environment
dclIndyCore160.bpl             Internet Direct (Indy) 10.5.7 Core Design-Time Package for Delphi
dclIndyProtocols160.bpl        Internet Direct (Indy) 10.5.7 Protocols Design-Time Package for Delphi
dclIPIndyImpl160.bpl           Embarcadero IP Indy Abstraction Implementation
dclmcn160.bpl                  Embarcadero Midas Components
dclmid160.bpl                  Embarcadero Local Provider Components
dclmlwiz160.bpl                IDE Wizards for Markup Languages
dclnet160.bpl                  Embarcadero Internet Components
dcloffice2010160.bpl           Embarcadero Sample ActiveX Server Components
dcloffice2K160.bpl             Embarcadero Sample ActiveX Server Components
dclofficexp160.bpl             Embarcadero Sample ActiveX Server Components
dclribbon160.bpl               Embarcadero ActionBar Components
dclsmp160.bpl                  Delphi Sample Components
dclsmpedit160.bpl              Embarcadero Sample Editor Enhancments Package
dclsoap160.bpl                 Embarcadero Soap Components
dclsockets160.bpl              Embarcadero Socket Component
dclstd160.bpl                  Embarcadero Standard Components
dcltouch160.bpl                Embarcadero Touch Components
dclwbm160.bpl                  Embarcadero Web Midas Components Designers
dclwebsnap160.bpl              Embarcadero WebSnap Design Package
dclWindowsAzureManagement160.bpl Windows Azure Management Design Package
delphicoment160.bpl            Embarcadero COM Enterprise Package for Delphi
delphicompro160.bpl            Embarcadero COM Professional Package for Delphi
delphicoreide160.bpl           Delphi Core Integrated Development Environment
delphicoreproide160.bpl        Delphi Core Professional Integrated Development Environment
delphide160.bpl                Core Delphi Integrated Development Environment
delphidotnetcore160.bpl        Delphi for .NET IDE Core Package
delphierrorinsite160.bpl       Delphi Error Insite Package
delphifmiide160.bpl            Core Delphi FMI IDE Package
delphifmxide160.bpl            Core Delphi FMX IDE Package
delphiosx32160.bpl             Delphi OSX32 Platform
delphipro160.bpl               Delphi Professional Integrated Development Environment
delphivclide160.bpl            Core Delphi VCL IDE Package
delphiwin32160.bpl             Delphi Win32 Platform
delphiwin64160.bpl             Delphi Win64 Platform
designide160.bpl               Embarcadero IDE Designer Package
dfm160.bpl                     Embarcadero Integrated Translation Environment
DotnetCoreAssemblies160.bpl    Contains the DOTNET Core Assemblies Package
dotnetcoreide160.bpl           Core .NET Integrated Development Environment
dsnap160.bpl                   Embarcadero Local Provider Component Package
dsnapcon160.bpl                Embarcadero MIDAS Component Package
EMUVCLHelper160.bpl            Embarcadero EMUVCL Helper Runtime Support
exceptiondiag160.bpl           Exception Diagnostics for Integrated Development Environment
ExpertsCreators160.bpl         Experts Creators Package
ExpertsUI160.bpl               Embarcadero Experts UI Package
fileexplorer160.bpl            Embarcadero IDE File Explorer
fmi162.bpl                     Embarcadero Component Package
fmidesigner160.bpl             Embarcadero IDE FMX Designer Package
fmx162.bpl                     Embarcadero Component Package
fmxase162.bpl                  Embarcadero Component Package
fmxdae162.bpl                  Embarcadero Component Package
fmxdesigner160.bpl             Embarcadero IDE FMX Designer Package
fmxobj162.bpl                  Embarcadero Component Package
historyide160.bpl              Embarcadero IDE File History Manager
htmide160.bpl                  HTML Designer
htmldlgs160.bpl                HTML Designer Dialogs
htmlhelp2160.bpl               HtmlHelp2
htmlide160.bpl                 HTML Integrated Development Environment Package
ibevnt160.bpl                  Delphi Interbase Component Package
ibxpress160.bpl                Interbase Express Run-time Package
idefilefilters160.bpl          IDE File Filters
IndyCore160.bpl                Internet Direct (Indy) 10.5.7 Core Run-Time Package for Delphi
IndyProtocols160.bpl           Internet Direct (Indy) 10.5.7 Protocols Run-Time Package for Delphi
IndySystem160.bpl              Internet Direct (Indy) 10.5.7 - System Run-Time Package for Delphi
inet160.bpl                    Embarcadero Internet Component Package
inetdb160.bpl                  Embarcadero Internet DB Component Package
inetdbbde160.bpl               Embarcadero Internet DB BDE Component Package
inetdbxpress160.bpl            Embarcadero Internet DBxpress Component Package
IPIndyImpl160.bpl              IP Indy Implementation Package
itecore160.bpl                 Embarcadero Integrated Translation Environment
iteide160.bpl                  Embarcadero Integrated Translation Environment
iteidebcb160.bpl               Embarcadero Integrated Translation Environment for Win32
iteidew32160.bpl               Embarcadero Integrated Translation Environment for Win32
macosxdebugide160.bpl          Mac OSX Debugger IDE Package
mlcc160.bpl                    Markup Code Completion
Office2010rt160.bpl            Embarcadero Sample ActiveX Server Components
Office2K160.bpl                Embarcadero Sample ActiveX Server Components
officeXPrt160.bpl              Embarcadero Sample ActiveX Server Components
optpchwizard160.bpl            CodeGear Precompiled Header Wizard Package
paclientcore160.bpl            Platform Assistant Client Core Package
plugview160.bpl                Pluggable Tree View
profiledeployide160.bpl        Profile Deployment IDE Package
profilemgride160.bpl           Profile Manager IDE Package
projecttargets160.bpl          Embarcadero MSBuild Targets File Handler
projpageide160.bpl             Project Page Options
rc160.bpl                      Embarcadero Integrated Translation Environment
refactoride160.bpl             Refactoring IDE Package
rtl160.bpl                     Embarcadero Component Package
samplevisualizers160.bpl       CodeGear Sample Debug Visualizers
soaprtl160.bpl                 Embarcadero SOAP Runtime Support
startpageide160.bpl            Embarcadero Start Page IDE Package
stride160.bpl                  String Resource Editor IDE Package
svn160.bpl                     Embarcadero Subverion integration
svnide160.bpl                  Embarcadero Subverion IDE Integration
svnui160.bpl                   Embarcadero Subverion UI Integration
tgide160.bpl                   UML Modeling Integration
tlbview160.bpl                 Type Library Viewer
tlib160.bpl                    Embarcadero Type Library Engine Package
todoide160.bpl                 Embarcadero IDE TODO Manager
vcl160.bpl                     Embarcadero Component Package
vclactnband160.bpl             Embarcadero Component Package
vcldb160.bpl                   Embarcadero Database Component Package
vcldbx160.bpl                  Embarcadero Extended DB Component Package
vcldesigner160.bpl             Embarcadero IDE VCL Designer Package
vcldsnap160.bpl                Embarcadero VCL DataSnap Component Package
vclhie160.bpl                  Browser Hosting Support
vclib160.bpl                   Interbase Express VCL Run-time Package
vclide160.bpl                  Integrated Development Environment Specific Components
vclie160.bpl                   WebBrowser Components
vclimg160.bpl                  Embarcadero Imaging Package
vclmenudesigner160.bpl         Embarcadero IDE Designer Package
vclribbon160.bpl               Embarcadero Component Package
vclshlctrls160.bpl             CodeGear Win32 Shell Controls
vclsmp160.bpl                  Delphi Sample Component Package
vcltouch160.bpl                Embarcadero Component Package
vclx160.bpl                    Embarcadero Extended Component Package
webdsnap160.bpl                Embarcadero Web Midas Components
websnap160.bpl                 Embarcadero WebSnap Component Package
win32debugide160.bpl           Win32 Native Code Debugger IDE Package
win32debugproide160.bpl        Win32 Native Code Debugger IDE Professional Package
win64debugide160.bpl           Win64 Native Code Debugger IDE Package
xmlrtl160.bpl                  Embarcadero XML Component Package 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T17:57:52.067

***安全***取决于您使用或不使用什么...

这是列表......使用Delphi快速生成（我按照Sertac在第一条评论中解释的描述......）

```
'adortl160': Embarcadero ADO DB Component Package
'applet160': Embarcadero Control Panel Wizard
'asmview160': Assembly Viewer
'AzureCloud160': DataSnap Azure Package
'bdertl160': Embarcadero BDE DB Component Package
'bindcomp160': Embarcadero Component Package
'bindcompfmx162': Embarcadero Component Package
'bindcompvcl160': Embarcadero Component Package
'bindengine160': Embarcadero Component Package
'bindgraph160': Embarcadero Component Package
'CloudService160': Cloud Service Package
'codetemplates160': Embarcadero Code Templates Manager
'comcore160': Embarcadero Core COM Professional Package
'comentcore160': Embarcadero COM Core Enterprise Package
'comptoolbar160': Embarcadero Component Toolbar
'coreide160': Core Integrated Development Environment
'coreproide160': Core Professional Integrated Development Environment
'CustomIPTransport160': Internet Protocol Custom Transport Package
'DataExplorer160': Embarcadero Data Explorer Control Wrapper
'DataSnapClient160': DataSnap Client Package
'DataSnapCommon160': DataSnap Common Package
'DataSnapConnectors160': DataSnap Connectors Package
'DataSnapConnectorsFreePascal160': DataSnap Mobile Connectors FreePascal Package
'DataSnapIndy10ServerTransport160': DataSnap Server Transport Package
'DataSnapProviderClient160': DBX DataSnap Client Package
'DataSnapServer160': DataSnap Server Package
'dbexpress160': Embarcadero DBExpress Component Package
'dbkdebugide160': DBK Debugger IDE Package
'dbkdebugproide160': DBK Debugger Professional IDE Package
'dbrtl160': Embarcadero Database Component Package
'dbtest': DbTest Package
'dbx160': Embarcadero Database Explorer UI & engine package
'dbxcds160': Embarcadero Local DBX Client DataSet Component Package
'DBXClientDriver160': DBXClientDriver Package
'DbxCommonDriver160': DBXCommonDriver Package
'DBXDb2Driver160': DBXDb2Driver Package
'DBXFirebirdDriver160': DBXFirebirdDriver Package
'DBXInformixDriver160': DBXInformixDriver Package
'DBXInterBaseDriver160': DBXInterBaseDriver Package
'DBXMSSQLDriver160': DBXMSSQLDriver Package
'DBXMySqlDriver160': DBXMySQLDriver Package
'DBXOdbcDriver160': DBXOdbcDriver Package
'DBXOracleDriver160': DBXOracleDriver Package
'DBXSybaseASADriver160': DBXSybaseASADriver Package
'DBXSybaseASEDriver160': DBXSybaseASEDriver Package
'dcl31w160': Embarcadero Windows 3.1 Components
'dclact160': Embarcadero ActionBar Components
'dclado160': Embarcadero ADO DB Components
'dclbde160': Embarcadero BDE DB Components
'dclbindcomp160': Embarcadero LiveBindings Components
'dclbindcompfmx160': Embarcadero LiveBindings Components FireMonkey
'dclbindcompvcl160': Embarcadero LiveBindings Components VCL
'dclCloudService160': Cloud Service Design Package
'dclDataSnapClient160': DataSnap Client Design Package
'dclDataSnapCommon160': DataSnap Common Design Package
'dclDataSnapConnectors160': DataSnap Connectors Design Package
'dclDataSnapIndy10ServerTransport160': DataSnap Server Transport Design Package
'dclDataSnapProviderClient160': DataSnap Provider Client Design Package
'dclDataSnapServer160': DataSnap Server Design Package
'dcldb160': Embarcadero Database Components
'dcldbx160': Embarcadero DBExpress Components
'dcldbxcds160': Embarcadero Local DBX ClientDataSet Components
'dclDBXDrivers160': dbExpress Drivers Design Package
'dclDBXDriversEnt160': dbExpress Enterprise Drivers Design Package
'dclDBXDriversInt160': dbExpress Drivers Int Design Package
'dclemacsedit160': Embarcadero EMACS Keybindings Example Package
'dclExpertsCreators160': Embarcadero Experts Creators Design Package
'dclExpertsUI160': Embarcadero Experts UI Design Package
'dclfmistd160': Embarcadero FMI Standard Components
'dclfmxstd160': Embarcadero FMX Standard Components
'dclFMXtee9160': TeeChart for FMX
'dclib160': Interbase Express Design Package
'dclIBXLegacy160': Legacy Interbase Express Design Package
'dclie160': Delphi-32 Development Environment
'dclIndyCore160': Internet Direct (Indy) 10.5.7 Core Design-Time Package for Delphi
'dclIndyProtocols160': Internet Direct (Indy) 10.5.7 Protocols Design-Time Package for Delphi
'dclIntraweb_120_160': IntraWeb Components for Delphi
'dclIPIndyImpl160': Embarcadero IP Indy Abstraction Implementation
'dclmcn160': Embarcadero Midas Components
'dclmid160': Embarcadero Local Provider Components
'dclmlwiz160': IDE Wizards for Markup Languages
'dclnet160': Embarcadero Internet Components
'dcloffice2010160': Embarcadero Sample ActiveX Server Components
'dcloffice2K160': Embarcadero Sample ActiveX Server Components
'dclofficexp160': Embarcadero Sample ActiveX Server Components
'dclribbon160': Embarcadero ActionBar Components
'dclsmp160': Delphi Sample Components
'dclsmpedit160': Embarcadero Sample Editor Enhancments Package
'dclsoap160': Embarcadero Soap Components
'dclsockets160': Embarcadero Socket Component
'dclstd160': Embarcadero Standard Components
'dcltee9160': TeeChart Pro Designtime Package
'dcltouch160': Embarcadero Touch Components
'dclwbm160': Embarcadero Web Midas Components Designers
'dclwebsnap160': Embarcadero WebSnap Design Package
'dclWindowsAzureManagement160': Windows Azure Management Design Package
'delphicoment160': Embarcadero COM Enterprise Package for Delphi
'delphicompro160': Embarcadero COM Professional Package for Delphi
'delphicoreide160': Delphi Core Integrated Development Environment
'delphicoreproide160': Delphi Core Professional Integrated Development Environment
'delphide160': Core Delphi Integrated Development Environment
'delphidotnetcore160': Delphi for .NET IDE Core Package
'delphierrorinsite160': Delphi Error Insite Package
'delphifmiide160': Core Delphi FMI IDE Package
'delphifmxide160': Core Delphi FMX IDE Package
'delphiosx32160': Delphi OSX32 Platform
'delphipro160': Delphi Professional Integrated Development Environment
'delphivclide160': Core Delphi VCL IDE Package
'delphiwin32160': Delphi Win32 Platform
'delphiwin64160': Delphi Win64 Platform
'designide160': Embarcadero IDE Designer Package
'dfm160': Embarcadero Integrated Translation Environment
'DotnetCoreAssemblies160': Contains the DOTNET Core Assemblies Package
'dotnetcoreide160': Core .NET Integrated Development Environment
'dsnap160': Embarcadero Local Provider Component Package
'dsnapcon160': Embarcadero MIDAS Component Package
'dunitrtl160': DUnit Runtime Support
'EMUVCLHelper160': Embarcadero EMUVCL Helper Runtime Support
'exceptiondiag160': Exception Diagnostics for Integrated Development Environment
'ExpertsCreators160': Experts Creators Package
'ExpertsUI160': Embarcadero Experts UI Package
'fileexplorer160': Embarcadero IDE File Explorer
'fmi162': Embarcadero Component Package
'fmidesigner160': Embarcadero IDE FMX Designer Package
'fmx162': Embarcadero Component Package
'fmxase162': Embarcadero Component Package
'fmxdae162': Embarcadero Component Package
'fmxdesigner160': Embarcadero IDE FMX Designer Package
'fmxobj162': Embarcadero Component Package
'FMXtee9160': TeeChart 9
'FMXteeui9160': TeeChart 9
'historyide160': Embarcadero IDE File History Manager
'htmide160': HTML Designer
'htmldlgs160': HTML Designer Dialogs
'htmlhelp2160': HtmlHelp2
'htmlide160': HTML Integrated Development Environment Package
'ibevnt160': Delphi Interbase Component Package
'ibxpress160': Interbase Express Run-time Package
'idefilefilters160': IDE File Filters
'IndyCore160': Internet Direct (Indy) 10.5.7 Core Run-Time Package for Delphi
'IndyProtocols160': Internet Direct (Indy) 10.5.7 Protocols Run-Time Package for Delphi
'IndySystem160': Internet Direct (Indy) 10.5.7 - System Run-Time Package for Delphi
'inet160': Embarcadero Internet Component Package
'inetdb160': Embarcadero Internet DB Component Package
'inetdbbde160': Embarcadero Internet DB BDE Component Package
'inetdbxpress160': Embarcadero Internet DBxpress Component Package
'Intraweb_120_160': IntraWeb for Delphi
'IntrawebDB_120_160': IntraWeb DB components for Delphi
'IPIndyImpl160': IP Indy Implementation Package
'itecore160': Embarcadero Integrated Translation Environment
'iteide160': Embarcadero Integrated Translation Environment
'iteidew32160': Embarcadero Integrated Translation Environment for Win32
'macosxdebugide160': Mac OSX Debugger IDE Package
'mlcc160': Markup Code Completion
'Office2010rt160': Embarcadero Sample ActiveX Server Components
'Office2K160': Embarcadero Sample ActiveX Server Components
'officeXPrt160': Embarcadero Sample ActiveX Server Components
'paclientcore160': Platform Assistant Client Core Package
'plugview160': Pluggable Tree View
'profiledeployide160': Profile Deployment IDE Package
'profilemgride160': Profile Manager IDE Package
'projecttargets160': Embarcadero MSBuild Targets File Handler
'projpageide160': Project Page Options
'rc160': Embarcadero Integrated Translation Environment
'refactoride160': Refactoring IDE Package
'rtl160': Embarcadero Component Package
'samplevisualizers160': CodeGear Sample Debug Visualizers
'soaprtl160': Embarcadero SOAP Runtime Support
'startpageide160': Embarcadero Start Page IDE Package
'stride160': String Resource Editor IDE Package
'svn160': Embarcadero Subverion integration
'svnide160': Embarcadero Subverion IDE Integration
'svnui160': Embarcadero Subverion UI Integration
'tee9160': TeeChart 9
'teedb9160': TeeChart 9
'teeui9160': TeeChart 9
'tgide160': UML Modeling Integration
'tlbview160': Type Library Viewer
'tlib160': Embarcadero Type Library Engine Package
'todoide160': Embarcadero IDE TODO Manager
'unittestide160': Unit Testing IDE Package
'vcl160': Embarcadero Component Package
'vclactnband160': Embarcadero Component Package
'vcldb160': Embarcadero Database Component Package
'vcldbx160': Embarcadero Extended DB Component Package
'vcldesigner160': Embarcadero IDE VCL Designer Package
'vcldsnap160': Embarcadero VCL DataSnap Component Package
'vclhie160': Browser Hosting Support
'vclib160': Interbase Express VCL Run-time Package
'vclide160': Integrated Development Environment Specific Components
'vclie160': WebBrowser Components
'vclimg160': Embarcadero Imaging Package
'vclmenudesigner160': Embarcadero IDE Designer Package
'vclribbon160': Embarcadero Component Package
'vclshlctrls160': CodeGear Win32 Shell Controls
'vclsmp160': Delphi Sample Component Package
'vcltouch160': Embarcadero Component Package
'vclx160': Embarcadero Extended Component Package
'webdsnap160': Embarcadero Web Midas Components
'websnap160': Embarcadero WebSnap Component Package
'win32debugide160': Win32 Native Code Debugger IDE Package
'win32debugproide160': Win32 Native Code Debugger IDE Professional Package
'win64debugide160': Win64 Native Code Debugger IDE Package
'xmlrtl160': Embarcadero XML Component Package 
```

如果你需要它......我的源代码：

```
unit main;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ComCtrls, System.IOUtils, System.Types, Vcl.Clipbrd;

type
  TfrmMain = class(TForm)
    lvBPLs: TListView;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmMain: TfrmMain;

implementation

{$R *.dfm}

uses uWxPlatform;

procedure TfrmMain.FormCreate(Sender: TObject);
var
//  dir   : TDirectory;
  files: TStringDynArray;
  bpl  : string;
  fvi  : TFileVersionInfo;
  sl   : TStringList;
begin
  sl := TStringList.Create;
  try
    files := TDirectory.GetFiles('C:\Program Files (x86)\RAD Studio\9.0\bin', '*.bpl');
    for bpl in files do
    begin
      with lvBPLs.Items.Add do
      begin
        Caption := ChangeFileExt(ExtractFileName(bpl), '');
        TMisc.GetAppVersionInfo(bpl, fvi);
        SubItems.Add(fvi.fFileDescription);
        sl.Add('''' + Caption + ''': ' + fvi.fFileDescription);
      end;
    end;
    sl.Sort;
    Clipboard.AsText := sl.Text;
  finally
    sl.Free;
  end;
end;

end. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-10T19:01:06.377

以防万一有人感兴趣：我编写了一个工具，通过将条目移动到不同的注册表项来禁用已知 IDE 包，这样如果出现问题，可以再次启用它们。此工具还从包（使用 SysUtils.GetPackageDescription 和 SysUtils.GetPackageInfo）以及版本信息中读取描述和附加信息。

[![在此处输入图像描述](../Images/29919b8bfc43cc8333bf6393dfad2fd7.png)](https://i.stack.imgur.com/BQpCB.png)

它适用于 Delphi 6 到 10.4，如果需要，它可能很容易适应旧版本。

可从[OSDN 获得](https://osdn.net/projects/knownidepackagesmanager/)

# python - 启动 lettuce 测试套件时控制环境的方法

> ID：10453103
> 
> 赞同：1
> 
> 时间：2012-05-04T17:00:31.893
> 
> 标签：python, hudson, lettuce

我正在构建一个测试框架，它将具有由 Python/Lettuce 支持的顶级 Gherkin 接口。我们希望将其构建到我们的持续集成基础架构（Hudson）中，并让相同的测试可以在任何环境（dev-int、qa-int、stage 等）上轻松运行。由于您无法在命令行上将参数传递给测试，因此我一直在考虑的方法是：

> 哈德逊工作
> 
> 1.  在机器上动态构建配置文件的子作业，该文件将根据所需的测试环境运行测试
> 2.  子作业在跑步机上启动生菜，然后地形文件从动态配置中获取值以针对正确的环境运行测试
> 3.  子作业删除配置文件

虽然这会起作用，但对我来说这似乎是一个 hacky 解决方法。我一直在谷歌搜索，但似乎即使是写生菜的人也认为配置不应该是必要的，如果你想要的话，你应该在测试之外设置环境变量，然后从内部地形读取它们。没有重新设计生菜来传递命令行参数，谁能想到其他方法来实现这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T19:04:37.090

不知道当时的生菜是什么样的，但有`world`物体[（在此处概述）](http://lettuce.it/reference/terrain.html#world)。作者承认这有点不像 Python，但你可以这样做：

```
from lettuce import Runner, world

runner = Runner('path/to/tests', verbosity=4)
world.VAR_NAME = VALUE
result = runner.run() 
```

在您的`terrain.py`文件中，您可以像这样访问世界值：

```
from lettuce import step, world

@step('step definition')
def function my_step(step):
    print world.VAR_NAME 
```

这些世界变量在此测试套件期间可用，因此请注意您放入世界的信息量

# asp.net - ASP.net MVC3 保存用户返回站点时查看的最后一页以显示

> ID：10453108
> 
> 赞同：0
> 
> 时间：2012-05-04T17:00:44.583
> 
> 标签：asp.net, asp.net-mvc-3, session, redirect, cookies

我的站点使用 Windows Live 对用户进行身份验证。这样做的问题是他们被重定向离开站点以登录，然后返回到我自己的登录操作，该操作将用户注册/登录到我的站点。然后默认情况下，我将登录操作重定向到用户的个人资料页面。

但我想要的是让 SignIn 操作返回他们查看的最后一页。这似乎应该很简单。

我的第一个想法是在我的重要操作中添加以下内容以保存用户的当前位置：

```
Session["LastPage"] = RedirectToAction("Index", "Home"); 
```

然后在我的登录操作结束时，我尝试包括：

```
if (Session["LastPage"] != null)
    return (ActionResult)Session["LastPage"];
else
    return RedirectToAction("MyPage", "User"); 
```

但这实际上不起作用，因为显然每次用户离开和返回该站点时，我的会话都会重新启动。

我是否以正确的方式处理这个问题？如果是这样，我如何防止会话被擦除？如果我以完全错误的方式进行此操作，那么有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:06:53.630

您应该设置 WindowsLiveLogin 对象的 ReturnUrl 属性（假设您使用的是一个）。

[http://msdn.microsoft.com/en-us/library/cc287661.aspx](http://msdn.microsoft.com/en-us/library/cc287661.aspx)

# spring-mvc - 简单的 Web 应用程序过滤器不过滤请求

> ID：10453109
> 
> 赞同：3
> 
> 时间：2012-05-04T17:00:47.373
> 
> 标签：spring-mvc, servlet-filters

我从 STS 开始，并创建了一个新的基本“Hello World”Spring MVC 项目。我想向我的应用程序添加一个过滤器，所以我使用以下 doFilter 方法创建了一个过滤器（HelloWorldFilter.java）：

```
public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        System.out.println("Entering Filter");
        request.setAttribute("hello", "Hello World from HelloWorldFilter!");
        chain.doFilter(request, response);
        System.out.println("Exiting HelloWorldFilter");
    } 
```

根据我读到的内容（我的过滤器）也应该在应用程序上下文中定义为一个 spring bean（Spring 将它委托给我的过滤器 - 来自[本手册](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/security-filter-chain.html)）

所以在我的应用程序上下文中，我有：

```
<bean id="helloWorldFilter" class="com.yl.mvc.filters.HelloWorldFilter"> </bean> 
```

我的 web.xml 包含以下内容：

```
<filter>
    <display-name>HelloWorldFilter</display-name>
    <filter-name>HelloWorldFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>HelloWorldFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

在我的 .jsp 文件中，我添加了：

```
<P><%=request.getAttribute("hello")%></P> 
```

但是我在我的网页中看到的所有内容都是空的（我期望 HelloWorldFilter 中的 Hello World！）。过滤器甚至没有被调用..

我在这里错过了什么吗？

在此先感谢，瑜伽士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:43:00.277

好的，解决了。

过滤器（它是一个 Spring bean）在 bean 定义（在应用程序上下文中）中必须与 filter-name 元素（在 web.xml 中）中的名称相同。

在我的情况下，我在我的应用程序上下文中：

```
<bean id="helloWorldFilter"... 
```

在我的 web.xml 中：

```
<filter-name>HelloWorldFilter</filter-name> 
```

因此，一旦它是大写的 H 和一个小 h - 这导致了问题。为了解决这个问题，我只是将应用程序上下文中的 bean id 更改为 HelloWorldFilter。

# mysql - SQL 语句工作流

> ID：10453114
> 
> 赞同：0
> 
> 时间：2012-05-04T17:01:02.743
> 
> 标签：mysql, sql

每个月我们都需要根据 CSV 文件创建一个报表。这是一个例子：

```
SELECT Name, OrderID, Product, Price
From Orders
Where OrderID = (here is where I am stuck); 
```

所以基本上每个月我们都会得到一组新的 CSV 格式的大约 50 到 60 个 OrderID 值。如何为这些 OrderID 创建一个输出 Name、OrderID、Product、Price 的语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:03:57.333

我想你正在寻找这样的东西。

```
SELECT Name, OrderID, Product, Price
From Orders
Where OrderID In ('row1', 'row2', 'row3', ...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:06:51.777

假设您可以将 ID 放在逗号分隔的列表中，您将使用 IN 子句：

```
SELECT Name, OrderID, Product, Price 
From Orders 
Where OrderID IN (23,567,78); 
```

# c# - How to handle exception that has been thrown from DoWork handler of BackgroundWorker?

> ID：10453121
> 
> 赞同：2
> 
> 时间：2012-05-04T17:01:26.627
> 
> 标签：c#, exception, backgroundworker

I want to handle exceptions that happen inside of `DoWork` handler in my `RunWorkerCompleted` handler but while code is running under debugger I'm getting another exception first "Exeption was unhandled by user code".

Here short example of code I'm using:

```
BackgroundWorker _worker;
public void Test()
{
    _worker = new BackgroundWorker();
    _worker.WorkerReportsProgress = false;
    _worker.WorkerSupportsCancellation = false;

    _worker.DoWork += new DoWorkEventHandler(bw_DoWork);
    _worker.RunWorkerCompleted += new
        RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
    _worker.RunWorkerAsync();
}

private void bw_DoWork(object sender, DoWorkEventArgs e)
{
    e.Result = ActuallWorkHere();
}

private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    var t = e.Error;
}

private IEnumerable<string> ActuallWorkHere()
{
    throw new Exception("test");
    // "Exeption was unhandled by user code" if called
    string[] res = { "test" };
    return res;
} 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:17:25.530

You're not really doing anything wrong, this is what Visual Studio does with unhandled errors when running code in the debugger:

From [BackgroundWorker.DoWork Event](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.dowork.aspx) on MSDN:

> If you are running under the Visual Studio debugger, the debugger will break at the point in the DoWork event handler where the unhandled exception was raised.

Try running your compiled program and you won't see this.

Note that you can handle this exception in your DoWork and the [RunWorkerCompletedEventArgs.Error](http://msdn.microsoft.com/en-us/library/system.componentmodel.asynccompletedeventargs.error.aspx) property in your RunWorkerCompleted handler will still store details of your error.

# java - Java.util.ArrayList.sort() 排序算法

> ID：10453122
> 
> 赞同：14
> 
> 时间：2012-05-04T17:01:26.800
> 
> 标签：java, algorithm, math

我正在查看grepcode上[java.util.ArrayList的](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)[sort()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Arrays.java#Arrays.sort1%28long%5b%5d%2Cint%2Cint%29)方法的源代码。他们似乎对小数组（大小 < 7）使用插入排序，对大数组使用合并排序。我只是想知道这是否会产生很大的不同，因为它们仅对大小 < 7 的数组使用插入排序。在现代机器上几乎不会注意到运行时间的差异。

我在科门读过这个：

> 尽管合并排序在 O(n*logn) 最坏情况下运行，而插入排序在 O(n*n) 最坏情况下运行，插入排序中的常数因子可以使其在实践中更快地处理许多机器上的小问题. 因此，当子问题变得足够小时，通过在合并排序中使用插入排序来粗化递归的叶子是有意义的。

如果我会为我需要的某些组件设计排序算法，那么我会考虑在运行时间的差异（与合并排序相比）变得明显之前使用插入排序来获得更大的大小（可能高达大小 < 100）。

我的问题是达到尺寸 < 7 的分析是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T17:08:18.230

> 在现代机器上，运行时间的差异几乎不会被注意到。

当您意识到整体排序算法是递归的并且小数组排序实际上是该递归的基本情况时，对小数组进行排序需要多长时间变得非常重要。

我没有任何关于七号是如何被选中的内幕消息。但是，如果没有在小型阵列上对竞争算法进行基准测试，并据此选择最佳算法和阈值，我会感到非常惊讶。

PS 值得指出的是，Java7 默认使用[Timsort](http://en.wikipedia.org/wiki/Timsort)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:44:05.817

我为将来访问此线程并记录我自己的研究的人发布此信息。在寻找选择 7 之谜的答案时，我偶然发现了这个极好的链接：

[Tim Peters 对算法的描述](http://svn.python.org/projects/python/trunk/Objects/listsort.txt)

您应该阅读标题为“计算 minrun”的部分。

给出一个要点， minrun 是算法应该开始使用插入排序的数组的截断大小。因此，我们将始终拥有大小为“minrun”的排序数组，我们需要在其上运行合并操作来对整个数组进行排序。

在 java.util.ArrayList.sort() 中，“minrun”被选择为 7，但就我对上述文档的理解而言，它打破了这个神话并表明它应该接近 2 的幂且小于 256以及超过 8 个。从文件中引用：

> 在 256 处，二进制插入排序中的数据移动成本明显受到影响，而在 8 处，函数调用次数的增加明显受到损害。选择2*的*幂在这里很重要，这样合并最终会完美平衡（请参阅下一节）。

我要说的一点是，“minrun”可以是小于 64 的 2 的任何幂（或接近 2 的幂），而不会影响 TimSort 的性能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T18:33:21.147

[http://en.wikipedia.org/wiki/Timsort](http://en.wikipedia.org/wiki/Timsort)

“Timsort 是一种混合排序算法，源自归并排序和插入排序，旨在在多种现实世界数据上表现良好......该算法找到已经排序的数据子集，并使用子集对数据更有效。这是通过将已识别的子集（称为运行）与现有运行合并来完成的，直到满足某些标准。

关于7号：

“...此外，可以看出，只有当初始元素不是另一次运行的前七个元素之一时，疾驰才是有益的。这也导致 MIN_GALLOP 设置为 7。为了避免疾驰模式的缺点，合并函数调整min-gallop的值，如果元素来自当前考虑的数组（即连续返回元素一段时间的数组），则min-gallop的值减1，否则, 值加 1, 因此不鼓励返回到驰骋模式. 当这样做时, 在随机数据的情况下, min-gallop 的值变得如此之大, 以至于返回到驰骋模式永远不会发生.

在使用merge-hi的情况下（即从右到左进行合并），驰骋需要从数据的右端开始，也就是最后一个元素。从头开始驰骋也给出了所需的结果，但进行了比所需更多的比较。因此，驰骋的算法包括使用一个变量，该变量给出了驰骋应该开始的索引。因此，该算法可以在任何索引处进入疾驰模式并继续如上所述，如在下一个索引处检查，该索引偏移了 1, 3, 7,...., (2k - 1).. 和依此类推，从当前索引开始。在 merge-hi 的情况下，索引的偏移量将是 -1、-3、-7、...."

# c# - 如何在 C# 中将 JSON 对象序列化或反序列化到一定深度？

> ID：10453127
> 
> 赞同：27
> 
> 时间：2012-05-04T17:01:49.013
> 
> 标签：c#, .net, json, serialization

我只想要一个对象的第一个深度级别（我不想要任何孩子）。我愿意使用任何可用的库。大多数库只会在达到递归深度时抛出异常，而不是忽略。如果这是不可能的，有没有办法忽略给定数据类型的某些成员的序列化？

编辑：假设我有一个像这样的对象：

```
class MyObject
{
    String name = "Dan";
    int age = 88;
    List<Children> myChildren = ...(lots of children with lots of grandchildren);
} 
```

我想删除任何孩子（甚至复杂类型）以返回这样的对象：

```
class MyObject
{
    String name = "Dan";
    int age = 88;
    List<Children> myChildren = null;
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-04T18:16:28.103

这在[Json.NET](http://json.codeplex.com/)[`JsonWriter`](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_JsonWriter.htm)中使用和序列化程序之间的一些协调是可能的[`ContractResolver`](http://james.newtonking.com/projects/json/help/ContractResolver.html)。

自定义`JsonWriter`在对象启动时递增计数器，然后在结束时再次递减。

```
public class CustomJsonTextWriter : JsonTextWriter
{
    public CustomJsonTextWriter(TextWriter textWriter) : base(textWriter) {}

    public int CurrentDepth { get; private set; }

    public override void WriteStartObject()
    {
        CurrentDepth++;
        base.WriteStartObject();
    }

    public override void WriteEndObject()
    {
        CurrentDepth--;
        base.WriteEndObject();
    }
} 
```

自定义对将用于验证当前深度的所有属性`ContractResolver`应用特殊谓词。[`ShouldSerialize`](http://james.newtonking.com/projects/json/help/html/P_Newtonsoft_Json_Serialization_JsonProperty_ShouldSerialize.htm)

```
public class CustomContractResolver : DefaultContractResolver
{
    private readonly Func<bool> _includeProperty;

    public CustomContractResolver(Func<bool> includeProperty)
    {
        _includeProperty = includeProperty;
    }

    protected override JsonProperty CreateProperty(
        MemberInfo member, MemberSerialization memberSerialization)
    {
        var property = base.CreateProperty(member, memberSerialization);
        var shouldSerialize = property.ShouldSerialize;
        property.ShouldSerialize = obj => _includeProperty() &&
                                          (shouldSerialize == null ||
                                           shouldSerialize(obj));
        return property;
    }
} 
```

以下方法显示了这两个自定义类如何协同工作。

```
public static string SerializeObject(object obj, int maxDepth)
{
    using (var strWriter = new StringWriter())
    {
        using (var jsonWriter = new CustomJsonTextWriter(strWriter))
        {
            Func<bool> include = () => jsonWriter.CurrentDepth <= maxDepth;
            var resolver = new CustomContractResolver(include);
            var serializer = new JsonSerializer {ContractResolver = resolver};
            serializer.Serialize(jsonWriter, obj);
        }
        return strWriter.ToString();
    }
} 
```

下面的测试代码演示了将最大深度分别限制为 1 级和 2 级。

```
var obj = new Node {
    Name = "one",
    Child = new Node {
        Name = "two",
        Child = new Node {
            Name = "three"
        }
    }
};
var txt1 = SerializeObject(obj, 1);
var txt2 = SerializeObject(obj, 2);

public class Node
{
    public string Name { get; set; }
    public Node Child { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-12T18:08:07.323

首先，我想说所有功劳都应该归功于 Nathan Baulch。这是他的答案与在设置中使用 MaxDepth 相结合的改编。感谢您的帮助内森！

```
using Newtonsoft.Json;
using Newtonsoft.Json.Serialization;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Web;
using System.Web.Mvc;

namespace Helpers
{
    public class JsonNetResult : JsonResult
    {
        public JsonNetResult()
        {
            Settings = new JsonSerializerSettings
            {
                ReferenceLoopHandling = ReferenceLoopHandling.Error
            };
        }

        public JsonSerializerSettings Settings { get; private set; }

        public override void ExecuteResult(ControllerContext context)
        {
            if (context == null)
                throw new ArgumentNullException("context");
            if (this.JsonRequestBehavior == JsonRequestBehavior.DenyGet && string.Equals(context.HttpContext.Request.HttpMethod, "GET", StringComparison.OrdinalIgnoreCase))
                throw new InvalidOperationException("JSON GET is not allowed");

            HttpResponseBase response = context.HttpContext.Response;
            response.ContentType = string.IsNullOrEmpty(this.ContentType) ? "application/json" : this.ContentType;

            if (this.ContentEncoding != null)
                response.ContentEncoding = this.ContentEncoding;
            if (this.Data == null)
                return;

            var scriptSerializer = JsonSerializer.Create(this.Settings);

            using (var sw = new StringWriter())
            {
                if (Settings.MaxDepth != null)
                {
                    using (var jsonWriter = new JsonNetTextWriter(sw))
                    {
                        Func<bool> include = () => jsonWriter.CurrentDepth <= Settings.MaxDepth;
                        var resolver = new JsonNetContractResolver(include);
                        this.Settings.ContractResolver = resolver;
                        var serializer = JsonSerializer.Create(this.Settings);
                        serializer.Serialize(jsonWriter, Data);
                    }
                    response.Write(sw.ToString());
                }
                else
                {
                    scriptSerializer.Serialize(sw, this.Data);
                    response.Write(sw.ToString());
                }
            }
        }
    }

    public class JsonNetTextWriter : JsonTextWriter
    {
        public JsonNetTextWriter(TextWriter textWriter) : base(textWriter) { }

        public int CurrentDepth { get; private set; }

        public override void WriteStartObject()
        {
            CurrentDepth++;
            base.WriteStartObject();
        }

        public override void WriteEndObject()
        {
            CurrentDepth--;
            base.WriteEndObject();
        }
    }

    public class JsonNetContractResolver : DefaultContractResolver
    {
        private readonly Func<bool> _includeProperty;

        public JsonNetContractResolver(Func<bool> includeProperty)
        {
            _includeProperty = includeProperty;
        }

        protected override JsonProperty CreateProperty(
            MemberInfo member, MemberSerialization memberSerialization)
        {
            var property = base.CreateProperty(member, memberSerialization);
            var shouldSerialize = property.ShouldSerialize;
            property.ShouldSerialize = obj => _includeProperty() &&
                                              (shouldSerialize == null ||
                                               shouldSerialize(obj));
            return property;
        }
    }
} 
```

采用：

```
// instantiating JsonNetResult to handle circular reference issue.
var result = new JsonNetResult
{
    Data = <<The results to be returned>>,
    JsonRequestBehavior = JsonRequestBehavior.AllowGet,
    Settings =
        {
            ReferenceLoopHandling = ReferenceLoopHandling.Ignore,
            MaxDepth = 1
        }
};

return result; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T19:39:13.377

您可以使用反射来检查对象并根据需要制作一个更改每个属性值的副本。巧合的是，我刚刚公开了一个新库，它使这种事情变得非常容易。你可以在这里得到它：[https ://github.com/jamietre/IQObjectMapper](https://github.com/jamietre/IQObjectMapper)

这是您将使用的代码示例

```
var newInstance = ObjectMapper.Map(obj,(value,del) => {
    return value !=null && value.GetType().IsClass ?
        null :
        value;
    }); 
```

“Map”方法遍历对象的每个属性，并`Func<object,IDelegateInfo>`为每个属性调用一个（IDelegateInfo 具有反射信息，例如属性名称、类型等）。该函数返回每个属性的新值。所以在这个例子中，我只是测试每个属性的值，看它是否是一个类，如果是，则返回null；如果不是，则返回原始值。

另一种更具表现力的方式：

```
var obj = new MyObject();

// map the object to a new dictionary        

var dict = ObjectMapper.ToDictionary(obj);

// iterate through each item in the dictionary, a key/value pair
// representing each property 

foreach (KeyValuePair<string,object> kvp in dict) {
    if (kvp.Value!=null && kvp.Value.GetType().IsClass) {
        dict[kvp.Key]=null;
    }
}

// map back to an instance

var newObject = ObjectMapper.ToNew<MyObject>(dict); 
```

在任何一种情况下，`newInstance.myChildren`（以及任何其他非值类型的属性）的值都将为空。您可以轻松更改此映射中发生的规则。

希望这可以帮助。顺便说一句-从您的评论看来，JSON 并不是您真正的目标，而只是您认为可以帮助您实现目标的东西。如果你想以 json 结尾，只需序列化它的输出，例如

```
string json = JavaScriptSerializer.Serialize(newObject); 
```

但如果这只是达到目的的一种手段，我不会涉及 json；如果您想留在 CLR 对象中，则无需使用 JSON 作为中介。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-17T14:39:24.880

如果你想在 ASP.NET Core 项目中使用它，你可能无法实现自己的 JsonTextWriter。但是您可以自定义 DefaultContractResolver 和 IValueProvider

```
using Newtonsoft.Json;
using Newtonsoft.Json.Serialization;
using System;
using System.Collections.Generic;
using System.Reflection;
using System.Linq;

namespace customserialization
{
    /// <summary>
    /// IValueProvider personalizado  para manejar max depth level
    /// </summary>
    public class CustomDynamicValueProvider : DynamicValueProvider, IValueProvider
    {
        MemberInfo _memberInfo;
        MaxDepthHandler _levelHandler;

        public CustomDynamicValueProvider(MemberInfo memberInfo, MaxDepthHandler levelHandler) : base(memberInfo)
        {
            _memberInfo = memberInfo;
            _levelHandler = levelHandler;
        }

        public new object GetValue(object target)
        {
            //Si el valor a serializar es un objeto se incrementa el nivel de profundidad. En el caso de las listas el nivel se incrementa en el evento OnSerializing
            if (((PropertyInfo)_memberInfo).PropertyType.IsClass) this._levelHandler.IncrementLevel();

            var rv = base.GetValue(target);

            //Al finalizar la obtención del valor se decrementa. En el caso de las listas el nivel se decrementa en el evento OnSerialized
            if (((PropertyInfo)_memberInfo).PropertyType.IsClass) this._levelHandler.DecrementLevel();

            return rv;
        }
    }

    /// <summary>
    /// Maneja los niveles de serialización
    /// </summary>
    public class MaxDepthHandler
    {
        int _maxDepth;
        int _currentDepthLevel;

        /// <summary>
        /// Nivel actual
        /// </summary>
        public int CurrentDepthLevel { get { return _currentDepthLevel; } }

        public MaxDepthHandler(int maxDepth)
        {
            this._currentDepthLevel = 1;
            this._maxDepth = maxDepth;
        }

        /// <summary>
        /// Incrementa el nivel actual
        /// </summary>
        public void IncrementLevel()
        {
            this._currentDepthLevel++;
        }

        /// <summary>
        /// Decrementa el nivel actual
        /// </summary>
        public void DecrementLevel()
        {
            this._currentDepthLevel--;
        }

        /// <summary>
        /// Determina si se alcanzó el nivel actual
        /// </summary>
        /// <returns></returns>
        public bool IsMaxDepthLevel()
        {
            return !(this._currentDepthLevel < this._maxDepth);
        }
    }

    public class ShouldSerializeContractResolver : DefaultContractResolver
    {

        MaxDepthHandler _levelHandler;

        public ShouldSerializeContractResolver(int maxDepth)
        {
            this._levelHandler = new MaxDepthHandler(maxDepth);
        }

        void OnSerializing(object o, System.Runtime.Serialization.StreamingContext context)
        {
            //Antes de serializar una lista se incrementa el nivel. En el caso de los objetos el nivel se incrementa en el método GetValue del IValueProvider
            if (o.GetType().IsGenericList())
                _levelHandler.IncrementLevel();
        }

        void OnSerialized(object o, System.Runtime.Serialization.StreamingContext context)
        {
            //Despues de serializar una lista se decrementa el nivel. En el caso de los objetos el nivel se decrementa en el método GetValue del IValueProvider
            if (o.GetType().IsGenericList())
                _levelHandler.DecrementLevel();
        }

        protected override JsonContract CreateContract(Type objectType)
        {
            var contract = base.CreateContract(objectType);
            contract.OnSerializingCallbacks.Add(new SerializationCallback(OnSerializing));
            contract.OnSerializedCallbacks.Add(new SerializationCallback(OnSerialized));

            return contract;
        }

        protected override IValueProvider CreateMemberValueProvider(MemberInfo member)
        {
            var rv = base.CreateMemberValueProvider(member);

            if (rv is DynamicValueProvider) //DynamicValueProvider es el valueProvider usado en general
            {
                //Utilizo mi propio ValueProvider, que utilizar el levelHandler
                rv = new CustomDynamicValueProvider(member, this._levelHandler);
            }

            return rv;
        }

        protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
        {
            JsonProperty property = base.CreateProperty(member, memberSerialization);

            var isObjectOrList = ((PropertyInfo)member).PropertyType.IsGenericList() || ((PropertyInfo)member).PropertyType.IsClass;

            property.ShouldSerialize =
                    instance =>
                    {
                        var shouldSerialize = true;
                        //Si se alcanzo el nivel maximo y la propiedad (member) actual a serializar es un objeto o lista no se serializa (shouldSerialize = false)
                        if (_levelHandler.IsMaxDepthLevel() && isObjectOrList)
                            shouldSerialize = false;                        

                        return shouldSerialize;
                    };

            return property;
        }

    }

    public static class Util
    {
        public static bool IsGenericList(this Type type)
        {
            foreach (Type @interface in type.GetInterfaces())
            {
                if (@interface.IsGenericType)
                {
                    if (@interface.GetGenericTypeDefinition() == typeof(ICollection<>))
                    {
                        // if needed, you can also return the type used as generic argument
                        return true;
                    }
                }
            }
            return false;
        }
    }
} 
```

并在您的控制器中使用它

```
 [HttpGet]
        public IActionResult TestJSON()
        {
            var obj = new Thing
            {
                id = 1,
                reference = new Thing
                {
                    id = 2,
                    reference = new Thing
                    {
                        id = 3,
                        reference = new Thing
                        {
                            id = 4
                        }
                    }
                }
            };
            var settings = new JsonSerializerSettings()
            {
                ContractResolver = new ShouldSerializeContractResolver(2),
            };

            return new JsonResult(obj, settings);

        } 
```

# c# - 想知道如何最好地将检查 IPv4 地址是否在给定范围内的逻辑扩展到 IPv6？

> ID：10453133
> 
> 赞同：1
> 
> 时间：2012-05-04T17:01:57.957
> 
> 标签：c#, ipv6, ipv4, bitconverter

我目前有这种方法来自其他几个 SO 帖子：

```
public bool IsIPAddressInRange(IPAddress ipAddress)
{
    int startIntAddress = BitConverter.ToInt32(StartingIPAddress.GetAddressBytes(), 0);
    int endIntAddress = BitConverter.ToInt32(EndingIPAddress.GetAddressBytes(), 0);

    int intIpAddress = BitConverter.ToInt32(ipAddress.GetAddressBytes(), 0);

    return startIntAddress <= intIpAddress && intIpAddress <= endIntAddress;
} 
```

尝试扩展此逻辑以支持 IPv6 显然存在一些缺陷。即：

*   我是否需要使用 BigInt 而不是 Int32 来支持更长的字段长度？
*   IPv6 地址的表示似乎不容易转换为字节？

只是想知道是否有人对如何解决这个问题有任何建议。

# ruby-on-rails - 如何连接对 mongoid 嵌入式资源的验证

> ID：10453138
> 
> 赞同：1
> 
> 时间：2012-05-04T17:02:15.830
> 
> 标签：ruby-on-rails, mongoid

我在帖子模型中嵌入了一个评论模型：

```
class Post
  include Mongoid::Document
  field :name, :type => String
  field :content, :type => String
  embeds_many :comments
end

class Comment
  include Mongoid::Document
  field :content, :type => String
  validates_presence_of :content
  embedded_in :post, :inverse_of => :comments 
end 
```

正如预期的那样，评论表包含在帖子/节目中：

```
p#notice = notice

h2= @post.name
p= @post.content

a.btn href=edit_post_path(@post) Edit

h3 New comment
= simple_form_for [@post, Comment.new] do |f|
  = f.error_notification
  = f.input :content, :as => :text
  = f.button :submit 
```

在我的评论控制器中：

```
def create
  @post = Post.find(params[:post_id])  
  @comment = @post.comments.build(params[:comment])

  respond_to do |format|
    if @comment.save
      format.html { redirect_to @post, notice: 'Comment created.' }
    else
      format.html { render :template => "posts/show" }
    end
  end
end 
```

这似乎适用于有效评论，但对于空白评论有两个问题。首先，没有显示验证消息。其次，空白评论在 post/show 模板中呈现，因为它在调用`@comment = @post.comments.build(params[:comment])`.

关于这个主题的 railscast 使用`@post.comments.create!(params[:comment])`而不是 build，但这会导致我认为不合适的任何验证失败的异常。

我可以通过重新获取帖子来解决第二个问题，但这似乎很笨拙：

```
def create
  @post = Post.find(params[:post_id])  
  @comment = @post.comments.build(params[:comment])

  respond_to do |format|
    if @comment.save
      format.html { redirect_to @post, notice: 'Comment created.' }
    else
      @post = Post.find(params[:post_id])  
      format.html { render :template => "posts/show" }
    end
  end
end 
```

即便如此，验证仍然缺失。

有人对如何做得更好有建议吗？

# python - 难以维持恒定的更新率

> ID：10453139
> 
> 赞同：0
> 
> 时间：2012-05-04T17:02:16.263
> 
> 标签：python, updates

开发一个应该以一致的时间间隔读取数据的过程。读取数据的时间段因网络而异。我认为这应该很简单，但我永远无法获得一致的时间安排。寻找一个更一致和稳定的系统，可以很好地响应网络速度的变化。

目前我正在使用以下模型

```
|<--read data-->|<--post process-->|<--sleep x seconds to maintain period-->|
|<------------------------------known data rate---------------------------->| 
```

我的代码做了类似的事情

```
data_rate = 5   # Hz
while 1:
    # read in data
    rd_start = time.time()
    data = getdata()
    rd_stop = time.time()

    # Post processing
    pp_start = time.time()
    rate = 1.0/(rd_start - oldstart) if oldstart else data_rate
    old_start = rd_start
    print rate
    post_process(data)
    pp_stop = time.time()

    sleep_time = 1.0/data_rate - ((rd_stop-rd_start) + (pp_stop-pp_start))
    sleep_time = sleep_time if sleep_time>0 else 0

    time.sleep(sleep_time) 
```

如果网络无法满足该速度（睡眠时间始终为负数）但工作正常，我还有一些逻辑可以更改更新速率（data_rate）。

出于某种原因，我的数据速率从来都不是一致的（当它稳定时以大约 4.92 Hz 的速度运行）。这种方法也很不稳定。这样做的更好方法是什么？想到 Threading.Timers()？

频率的一致偏移是否是由 time.sleep() 的错误引起的？ [python的time.sleep()有多准确？](https://stackoverflow.com/questions/1133857/how-accurate-is-pythons-time-sleep)

# asp.net-mvc - 没有成员资格的 asp.net mvc 表单身份验证

> ID：10453149
> 
> 赞同：0
> 
> 时间：2012-05-04T17:02:53.487
> 
> 标签：asp.net-mvc, forms-authentication

我有以下情况：用户使用 google 帐户登录，然后我调用`FormsAuthentication.SetAuthCookie(name, true);`. 在我的 web.config 我有

```
<authentication mode="Forms">
<forms cookieless="UseCookies"  name=".someName" slidingExpiration="true" timeout="10080"/
</authentication> 
```

就是这样，没有会员提供者，没有`dbo.aspnet_*`桌子。这会很好，除非有时（我不知道为什么）即使用户没有关闭浏览器并定期发送请求，他也会再次变得未经身份验证。谁能解释为什么？我应该怎么做才能使身份验证持久化？如果解决方案不涉及sql server，那就太好了，因为没有。

# java - 没有 Maven 的 Eclipse JUnit Arquillian

> ID：10453150
> 
> 赞同：1
> 
> 时间：2012-05-04T17:02:55.873
> 
> 标签：java, eclipse, junit, jboss-arquillian

在我的项目中，我有一个用户库，其中包含运行 arquillian junit 测试所需的所有库，并且它在 IDE 中完美运行。现在的问题是，测试类将与我的主应用程序一起打包，导致 ClassNotFoundException，因为 arquillian 库不可用。我可以以某种方式从包装中排除我的测试类，还是必须将我的测试移动到不属于我的主应用程序的另一个项目中？

# c# - 可以将索引器与 DefaultMemberAttribute 结合起来吗？MSDN 有一个损坏的样本

> ID：10453151
> 
> 赞同：1
> 
> 时间：2012-05-04T17:03:29.010
> 
> 标签：c#, attributes, ienumerable, msdn

以下[MSDN 文档](http://msdn.microsoft.com/en-us/library/microsoft.exchange.data.transport.readonlyenveloperecipientcollection%28v=exchg.140%29.aspx)显示了在组合此标头时对编译器无效的内容

```
[DefaultMemberAttribute("Item")] 
public abstract class ReadOnlyEnvelopeRecipientCollection : IEnumerable<EnvelopeRecipient>, IEnumerable 
```

有了[这个属性](http://msdn.microsoft.com/en-us/library/microsoft.exchange.data.transport.readonlyenveloperecipientcollection.item%28v=exchg.140%29.aspx)

```
public abstract EnvelopeRecipient [int index] { get; } 
```

编译器抛出此错误

> “无法在包含索引器的类型上指定 DefaultMember 属性”

文档不正确还是有更好的方法来实现？

# php - 根据语言重定向用户

> ID：10453152
> 
> 赞同：2
> 
> 时间：2012-05-04T17:03:29.097
> 
> 标签：php, redirect

我有以下代码：

```
<?php
// List of available localized versions as 'lang code' => 'url' map
$sites = array(
    "da" => "http://www.mysite.com/",
);

// Get 2 char lang code
$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);

// Set default language if a `$lang` version of site is not available
if (!in_array($lang, array_keys($sites)))
    $lang = 'en';

// Finally redirect to desired location
header('Location: ' . $sites[$lang]);
?> 
```

如果它是丹麦网站客户端，这会将用户重定向到该站点的丹麦 (da) 版本，这是主站点。这是极好的。

但是，我想，如果用户不是丹麦语，而是波兰语、德语等，它会将他们重定向到位于子域的网站的英文版本

```
http://en.mysite.com/
```

如何在现有代码中实现它？提前致谢！——弗雷德里克·安徒生

**编辑**

像这样的解决方案；

```
$sites = array(
    "da" => "http://www.mysite.com/",
    "en" => "http://en.mysite.com/"
); 
```

不起作用，因为它在重定向时会产生循环错误 - 至少在 Google Chrome 中是这样。

**编辑 2**

```
session_start();
if (isset( $_SESSION['redirect']))
{
   // do nothing / continue with rest of page
}
else
{
   $_SESSION['redirect'] = true;

// List of available localized versions as 'lang code' => 'url' map
$sites = array(
    "da" => "http://www.mysite.com/",
    "en" => "http://en.mysite.com/"
);

// Get 2 char lang code
$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);

// Set default language if a `$lang` version of site is not available
if (!in_array($lang, array_keys($sites)))
    $lang = 'en';

// Finally redirect to desired location
header('Location: ' . $sites[$lang]);

   exit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:05:17.897

您需要将默认选项添加到您的数组：

```
$sites = array(
    "da" => "http://www.mysite.com/",
    "en" => "http://en.mysite.com/"
); 
```

**编辑：**如果您`"http://en.mysite.com/"`再次调用相同的代码，它将创建一个循环。显而易见的解决方案是不在那里调用此代码，但另一种解决方案是设置一个会话变量以指示语言选择已经发生。

要添加该会话变量，您可以执行以下操作：

```
session_start();
if (isset( $_SESSION['redirect']))
{
   // do nothing / continue with rest of page
}
else
{
   $_SESSION['redirect'] = true;
   // your language selection code with header call
   exit();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:06:08.753

```
$sites = array(
    "da" => "http://www.mysite.com/",
    "en" => "http://en.mysite.com/"
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:19:18.713

这个怎么样

```
 $lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);

    $sub_domain = ($lang == "da") ? "www" : "en";

    $link = "http://".$sub_domain.".mysite.com/";

    header('Location: ' . $link); 
```

# c++ - 在虚拟盒子上保存 VIM 的设置

> ID：10453154
> 
> 赞同：0
> 
> 时间：2012-05-04T17:03:46.050
> 
> 标签：c++, vim

我正在通过 SSH 将 VIM 运行到学校的虚拟盒子中，但我想在每次使用它时保存我的设置。

每次都输入这个并不太痛苦，但如果可能的话，我想自动化它/保存它：

```
:set number
:set mouse=a
:set cindent 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:06:21.997

您可以编辑 vim 本地配置文件`~/.vimrc`以插入以下行：

```
set number
set mouse=a
set cindent 
```

# c# - 在ravenDB中按到期日期批量删除文档

> ID：10453156
> 
> 赞同：3
> 
> 时间：2012-05-04T17:03:56.573
> 
> 标签：c#, ravendb

我正在尝试删除早于 ravenDB 中某个时间点的文档。我仍然不熟悉 Lucene，并且很难构建这个查询。

```
 _Session.Advanced.DatabaseCommands.DeleteByIndex(
            typeof(AssetsByExpirationDate).Name,
            new IndexQuery()
            {
                Query = string.Format("ExpirationDate:[\"{0:MM/dd/yyyy}\" TO \"{1:MM/dd/yyyy}\"]", DateTime.MinValue, new DateTime(2012,6,1))
            }); 
```

查询在某个日期之前删除项目的正确语法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T17:55:59.850

您可以在 DatabaseCommands IndexQuery 之外构建查询并使用 Query.ToString() 填充 IndexQuery 查询字符串，如下所示：

```
 var query = session.Advanced.LuceneQuery<Asset, AssetsByExpirationDate>()
            .WhereBetween("ExpirationDate",DateTime.MinValue,new DateTime(2012, 6, 1));

        var queryString = query.ToString();

        session.Advanced.DatabaseCommands.DeleteByIndex(typeof(AssetsByExpirationDate).Name, new IndexQuery
        {
            Query = queryString
        }); 
```

使用这种方式，如果您对 lucene 查询语法不是很熟悉，RavenDb 查询 API 会如前所示通过调用 .ToString() 为您构建它，并获得以下 Lucene 格式的查询字符串。

```
ExpirationDate:{00010101000000000 TO 20120601000000000} 
```

请注意，使用 DatabaseCommands 删除不适用于过时的索引。所以要小心或使用标准的 lucene 查询来检索要删除的文档，然后对要删除的每个文档执行简单的**Session.Delete(asset)**。

```
 var query = session.Advanced.LuceneQuery<Asset, AssetsByExpirationDate>()
            .WhereBetween("ExpirationDate",DateTime.MinValue,new DateTime(2012, 6, 1));
        var assets = query.ToList();

        foreach(var asset in assets)
        {
            session.Delete<Asset>(asset);
        }

        session.SaveChanges(); 
```

注意分页，因为**Ravendb****默认只返回 128 个结果**。

# java - 如何获取计算机上的所有媒体文件

> ID：10453163
> 
> 赞同：1
> 
> 时间：2012-05-04T17:04:31.657
> 
> 标签：java, file, java-io

是否有一种内置方法可以在 java 中获取计算机上的所有媒体文件（电影、音乐）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T17:06:25.660

不，不是内置的。但是，您可以创建一个爬虫来扫描您的整个硬盘驱动器以查找具有某些扩展名（甚至更好，MIME 类型）的文件。

查看此答案以获得遍历目录的简单方法：[https ://stackoverflow.com/a/3154523/691606](https://stackoverflow.com/a/3154523/691606)

另请参阅[从文件中获取 Mime 类型](http://www.rgagnon.com/javadetails/java-0487.html)。基于其中显示的第 2 个（共 3 个）技术，是这样的：

```
import javax.activation.MimetypesFileTypeMap;
import java.io.File;

class MimeForMedia {

    public static void main(String[] args) {
        String[] types = {
            "png", "jpg", "gif", "tif", "bmp",  // image
            "snd", "wav", "mp3", "ogg", "au",   // sound
            "mov", "avi", "mpg", "flv"  // video
            };
        MimetypesFileTypeMap typeMap = new MimetypesFileTypeMap();
        for (String type : types) {
            String name = "a." + type;
            String bestType = typeMap.getContentType(name);
            if (bestType.equals("application/octet-stream")) {
                System.out.print( "Using URLConnection:  " );
                try {
                    bestType = (new File(name)).toURI().toURL()
                        .openConnection().getContentType();
                } catch(Exception e) {
                    System.out.println( e.getMessage() );
                }
            }
            System.out.println (type + "  " + bestType);
        }
    }
} 
```

这是在 Windows 7 PC 上的结果。

```
Using URLConnection:  png  image/png
jpg  image/jpeg
gif  image/gif
tif  image/tiff
Using URLConnection:  bmp  content/unknown
Using URLConnection:  snd  audio/basic
wav  audio/x-wav
Using URLConnection:  mp3  content/unknown
Using URLConnection:  ogg  content/unknown
au  audio/basic
mov  video/quicktime
avi  video/x-msvideo
mpg  video/mpeg
Using URLConnection:  flv  content/unknown
Press any key to continue . . . 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T17:06:10.980

遍历文件系统的所有文件夹并查找具有所需扩展名的文件（如果有时间）。

# javascript - css 转换确定新的赋值

> ID：10453164
> 
> 赞同：0
> 
> 时间：2012-05-04T17:04:34.127
> 
> 标签：javascript, jquery, css

```
div {
    transition-property: opacity;
    transition-duration: 2s;
  } 
```

上面的例子定义了 'opacity' 属性的一个转换，当一个新的值被分配给它时，将在两秒的时间内导致旧值和新值之间的平滑变化。(с) w3c [http://www.w3.org/TR/css3-transitions/](http://www.w3.org/TR/css3-transitions/)
如何用 jQuery/javascript 确定这个新值？仅通过解析样式表还是有更方便的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:18:20.680

您可以使用 jQuery 的 css 函数获取不透明度的值，请参见此小提琴：

[http://jsfiddle.net/RTd3c/](http://jsfiddle.net/RTd3c/)（在警报框上快速单击确定！）。

这就是你所追求的吗？

# shell - 是否可以更改在 shell 中写入 STDOUT 的行？

> ID：10453166
> 
> 赞同：0
> 
> 时间：2012-05-04T17:04:43.370
> 
> 标签：shell, stdout

是否可以在 shell 中更改写入 STDOUT 的行，类似于*scp*等许多程序的方式？

重点是让我基本上拥有一个自动收报机或某种监视器，而不会在整个屏幕上滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:17:16.577

您可以使用控制字符和[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)来操作终端。例如`\b`将光标返回一个位置，并将`\r`其返回到行首。这可以用来制作一个简单的股票代码：

```
for i in $(seq 10)
do
    echo -en "Progress... $i\r"    # -e is needed to interpret escape codes
    sleep 1
done
echo -e "\nDone." 
```

使用[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)，您可以做更多事情，例如清除屏幕的一部分、跳转到您想要的任何位置以及更改输出颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:18:04.877

`\r`您可以通过打印字符来覆盖最后打印的行。

例如这个：

```
for i in `seq 1 10`; do
   echo -n $i;
   sleep 1;
   echo -n -e "\r" ;
done 
```

将打印`1`然后更新它，`2`依此类推，直到 10。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:10:34.033

您可以使用管道中的另一个程序修改标准输出的输出。当您运行您使用的程序时 | 将输入通过管道传输到下一个程序。下一个程序可以对输出做任何事情。用于修改程序输出的通用程序是 sed，或者您可以自己编写一些东西来修改先前程序中的数据。

shell 程序类似于：

```
while read line; do
    # do something with $line and output the results
done 
```

所以你可以：

```
 the_original_program | the_above_program 
```

# html - 使 html 文本无法选择

> ID：10453167
> 
> 赞同：8
> 
> 时间：2012-05-04T17:04:54.493
> 
> 标签：html

首先，我一直在这里[How to make HTML Text unselectable](https://stackoverflow.com/questions/2310734/how-to-make-html-text-unselectable)
但这并不能解决我的问题，（JavaScript 版本运行良好，但我需要使用 HTML 和 CSS，**我不能使用 JavaScript**）我使用了推荐的 CSS，但是看看我的[DEMO](http://jsfiddle.net/7rXQc/3/)将鼠标从 [drag from here] 拖动到 [to here] 你会看到文本仍然是可选择的。
有什么办法让它**真的**无法选择？
谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T17:13:59.840

您可以像这样使用 CSS：

**CSS**

```
.unselectable {
  -webkit-user-select: none;  /* Chrome all / Safari all */
  -moz-user-select: none;     /* Firefox all */
  -ms-user-select: none;      /* IE 10+ */

  /* No support for these yet, use at own risk */
  -o-user-select: none;
  user-select: none;
} 
```

对于较旧的 IE 版本，该问题通常更难处理，但您可以使用以下行为：

**CSS**

```
.unselectable {
   behavior: url(ieUserSelectFix.htc);
} 
```

**和行为文件“ieUserSelectFix.htc”：**

```
<public:component lightweight="true">

    <public:attach event="ondocumentready" onevent="stopSelection()" />

    <script type="text/javascript">
    <!--
        function stopSelection() {
            element.onselectstart = function() { return(false); };
            element.setAttribute('unselectable', 'on', 0);
        }
    //-->
    </script>
</public:component> 
```

**使用 Javascript，您可以：**

```
yourElement.onselectstart = function() { return(false); }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T03:02:36.727

在查看了这个问题之后，想到了另一种方法来防止用户在查看页面时选择文本，基本上是在目标文本上设置一个掩码：

你的小提琴[在这里](http://jsfiddle.net/zuul/7rXQc/4/)更新了！

*例子：*

* * *

**CSS**

```
.wrapTxt {
  position: relative;
}
.wrapTxt .mask {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
} 
```

**HTML**

```
<p class="wrapTxt">
  This is my text! My text is mine and no one Else's!
  <span class="mask"></span>
</p> 
```

这里的原理很简单[（小提琴）](http://jsfiddle.net/zuul/RB4rj/)，在文本上方有一个块元素，占据它的所有包装空间。

如果您需要一条线可选择而下一条线不可选，那么失败是一个艰难的实现。此外，“不可选择”文本上的链接将不可用。

**最后说明：**

用户可以通过查看源代码或从网页的顶部到底部拖动鼠标来解决此问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T19:40:47.127

尝试这样的事情

```
 <!DOCTYPE html>
                <html xmlns="http://www.w3.org/1999/xhtml">
                <head>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                <title>Disable /Prevent Text Selection jQuery-JavaScript</title>
                <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
                <script type="text/javascript">
                // Begin:
                // Jquery Function to Disable Text Selection
                (function($){if($.browser.mozilla){$.fn.disableTextSelect=function(){return this.each(function(){$(this).css({"MozUserSelect":"none"})})};$.fn.enableTextSelect=function(){return this.each(function(){$(this).css({"MozUserSelect":""})})}}else{if($.browser.msie){$.fn.disableTextSelect=function(){return this.each(function(){$(this).bind("selectstart.disableTextSelect",function(){return false})})};$.fn.enableTextSelect=function(){return this.each(function(){$(this).unbind("selectstart.disableTextSelect")})}}else{$.fn.disableTextSelect=function(){return this.each(function(){$(this).bind("mousedown.disableTextSelect",function(){return false})})};$.fn.enableTextSelect=function(){return this.each(function(){$(this).unbind("mousedown.disableTextSelect")})}}}})(jQuery)
                // EO Jquery Function

                // Usage
                // Load Jquery min .js ignore if already done so
                // $("element to disable text").disableTextSelect();
                // $("element to Enable text").enableTextSelect();
                //

                jQuery(function($) {
                $("body").disableTextSelect();

                $("#code").mouseover(function(){
                 $("body").enableTextSelect();
                });

                $("#code").mouseout(function(){  

                // Code for Deselect Text When Mouseout the Code Area
                if (window.getSelection) {
                  if (window.getSelection().empty) {  // Chrome
                    window.getSelection().empty();
                  } else if (window.getSelection().removeAllRanges) {  // Firefox
                    window.getSelection().removeAllRanges();
                  }
                } else if (document.selection) {  // IE?
                  document.selection.empty();
                }

                 $("body").disableTextSelect();
                });
                });
                </script>

                <style type="text/css">
                <!--
                body {
                 margin-left: 10px;
                 margin-top: 10px;
                }

                #code
                {
                 padding:20px;
                 border:2px dashed #CCC;
                 font-family:"Courier New", Courier, monospace;
                 font-size:15px;
                 background-color:#EEE;
                }
                -->
                </style>
                </head>

                <body>
                <h2>Disable /Prevent Text Selection jQuery-JavaScript</h2>
                <p>Below this Code Area User can Allow to Select a Text in other Area text selection was disabled</p>
                <p id="code">
                $(".elementsToDisableSelectFor").disableTextSelect();</p>
                <p>When you are leaving above code box selection was deselected! If selected !</p>
                </body>
                </html> 
```

**检查 jsfiddle 输出：**

[http://jsfiddle.net/bHafB/](http://jsfiddle.net/bHafB/)

编辑：这是一种跨浏览器方法，用于防止使用 unselectable="on" 元素属性进行文本选择。

```
 <!DOCTYPE html>
        <html>
          <head>
            <title>Unselectable Text</title>
            <style type="text/css">
            [unselectable=on] { -moz-user-select: none; -khtml-user-select: none; user-select: none; }
            </style>
          </head>
          <body id="doc">
        <p unselectable="on">For example, the text in this paragraph
        cannot be selected.
        For example, the text in this paragraph
        cannot be selected
        For example, the text in this paragraph
        cannot be selected</p>
          </body>
           </html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-20T22:38:42.573

覆盖全透明文本：

```
 <div style="position:absolute;left: 1;top:1;z-index:1;font-size: 10pt;color: rgb(0, 0, 0);">highline me</div><br/><div style="position:absolute;left: 0;top:0;;z-index:2;font-size: 20pt;color: rgba(0, 0, 0, 0);">*********</div> 
```

# sql - 代码内部的事务

> ID：10453169
> 
> 赞同：3
> 
> 时间：2012-05-04T17:04:58.050
> 
> 标签：sql, vb.net, winforms, transactions

我遇到了一个问题，我不确定如何解决这个问题，我想知道为了完成这项任务我应该考虑的最佳方法是什么。

我们正在开发一个应用程序 VB.net 2.0 和 SQL 2005。允许用户根据可能包含许多已接收商品的购买取消接收。但是，在取消的过程中，会向用户提出一些问题，例如“您要取消 Good #1”。如果是，请删除。然后，“你想取消Good#2”，不，不要删除，再问一个问题（如果收到的项目发出，必须由用户手动进行一个过程）。而且，最后，如果所有货物都**成功**取消，我们必须取消接收本身。但是有时候，如果在这个过程中曾经向用户询问过错误或某些情况发生，我们希望取消从一开始所做的任何动作，并使其恢复到原来的状态。于是我想了想`Transaction`。

1.  我知道有可以使用[的 SQL 事务，](http://msdn.microsoft.com/fr-fr/library/ms188929.aspx)并且我知道如何使用它，但我不能真正使用它，因为用户必须执行可能取消此事务的操作。

2.  我还记得.NET 2.X 中的[TransactionScope](http://msdn.microsoft.com/fr-fr/library/system.transactions.transactionscope%28v=vs.80%29.aspx)，它可以实现类似的功能，我也知道如何使用它。问题来自 TransactionScope 和 MSDTC。使用它时，我们仍然收到错误消息：

> 分布式事务管理器 (MSDTC) 的网络访问已被禁用。请使用组件服务管理工具在 MSDTC 的安全配置中启用 DTC 以进行网络访问。

我已经尝试过[在另一个堆栈帖子](https://stackoverflow.com/q/794364/144701)中描述的内容并且效果很好......直到用户重新启动他们的计算机。每次用户重新启动计算机时，他们都必须恢复价值。另外，默认情况下，没有计算机将此值设置为“开”。至少有 10 个计算机基地没有被激活。大约有 300 台计算机安装了这个程序，所以这肯定不是好事。

所以有人知道我如何实现这一目标吗？还有什么其他东西可以通过我可以使用的代码进行交易吗？

**NOTE1**：我知道有人会说，首先向用户询问条件并在内存中维护值。完成后，如果一切顺利，请使用删除。但是，如果在删除商品 #4 时发生错误怎么办？以及如何为存储程序提供要删除的商品的动态列表？

**注2**：对不起我的英语，我通常说法语。

**注 3**：C# 中的任何示例也可以提供，因为我知道 VB 和 C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:45:50.947

假设您已经有类似的存储过程来管理取消：

```
create proc CancelGood (@goodID int)
as
   SET NOCOUNT ON
   SET XACT_ABORT ON

   begin transaction

   update table1 set canceled = 1
    where GoodID = @GoodID

   update table2 set on_stock = on_stock + 1
    where GoodID = @GoodID

   commit transaction 
```

`canceledGoods`如果用户选择“Oui” ，VB 代码会在某个列表中添加一个字符串。我不熟悉 VB.Net；在 c# 中它看起来像：

```
canceledGoods.Add (string.Format("exec dbo.CancelGood {0}", goodID)); 
```

然后，如果 cancelledGoods 中至少有一个字符串，则构建并执行批处理：

```
batch = "BEGIN TRANSACTION" +
        " BEGIN TRY " +
        string.Join (Environment.NewLine, canceledGoods.ToArray()) + 
        " END TRY" +
        " BEGIN CATCH " +
        " -- CODE TO CALL IF THERE WAS AN ERROR" +
        "    ROLLBACK TRANSACTION" +
        "    RETURN" +
        " END CATCH" +
        " -- CODE TO CALL AFTER SUCCESSFULL CANCELATION OF ALL GOODS" +
        " COMMIT TRANSACTION"

conn.ExecuteNonQuery (batch); 
```

# objective-c - UISegmentedControl 设置背景图片时不设置段宽

> ID：10453172
> 
> 赞同：3
> 
> 时间：2012-05-04T17:05:10.270
> 
> 标签：objective-c, ios, cocoa-touch, ios5, uisegmentedcontrol

我有一个分段控件，我希望第一个和最后一个项目具有指定的宽度（例如，比其他项目更宽）。当我`setWidth:forSegmentAtIndex:`为标准样式的segmentedControl（即`[[UISegmantedControl appearence] setBackgroundImage:forState:barMetrics:]`未设置）时，事情会表现得像他们应该的那样。但是当我设置背景图像时，段宽度不会改变。

这是我的代码：

```
[[UISegmentedControl appearance] setBackgroundImage:[[UIImage imageNamed:@"btn_normal.png"] stretchableImageWithLeftCapWidth:25 topCapHeight:0] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setBackgroundImage:[[UIImage imageNamed:@"btn_selected.png"]  stretchableImageWithLeftCapWidth:25 topCapHeight:0] forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setDividerImage:[UIImage imageNamed:@"nn.png"] forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setDividerImage:[UIImage imageNamed:@"sn.png"] forLeftSegmentState:UIControlStateSelected rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setDividerImage:[UIImage imageNamed:@"ns.png"] forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
[self.segmentedControl setContentMode:UIViewContentModeScaleToFill];
[self.segmentedControl setWidth:100.0 forSegmentAtIndex:0];
[self.segmentedControl setWidth:100.0 forSegmentAtIndex:4]; 
```

有了这个，我所有的片段都会自动显示为相同的宽度。
当我在上面注释掉所有内容时

```
[self.segmentedControl setContentMode:UIViewContentModeScaleToFill];
[self.segmentedControl setWidth:100.0 forSegmentAtIndex:0];
[self.segmentedControl setWidth:100.0 forSegmentAtIndex:4]; 
```

尺寸设置正确。
这是我的问题：如何为带有背景图像的片段设置大小？
我是 cocoa-touch 和 objective-c 的新手，所以我可能会遗漏一些东西......
你能帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T21:54:51.637

我认为当您使用**[UISegmentedControl 外观]**代理时，它会覆盖**“setWidth:forSegmentAtIndex:”**方法值。所以可能的解决方案：

1)

```
[[UISegmentedControl appearance] setContentMode:UIViewContentModeScaleToFill];
[[UISegmentedControl appearance] setWidth:100.0 forSegmentAtIndex:0];
[[UISegmentedControl appearance] setWidth:100.0 forSegmentAtIndex:4]; 
```

我不建议使用它，因为它会为应用程序中的每个分段控件设置 0 和 4 段的自定义宽度。

2)

```
[self.segmentedControl setBackgroundImage:[[UIImage imageNamed:@"btn_normal.png"] stretchableImageWithLeftCapWidth:25 topCapHeight:0] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[self.segmentedControl setBackgroundImage:[[UIImage imageNamed:@"btn_selected.png"]  stretchableImageWithLeftCapWidth:25 topCapHeight:0] forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
[self.segmentedControl setDividerImage:[UIImage imageNamed:@"nn.png"] forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[self.segmentedControl setDividerImage:[UIImage imageNamed:@"sn.png"] forLeftSegmentState:UIControlStateSelected rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[self.segmentedControl setDividerImage:[UIImage imageNamed:@"ns.png"] forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateSelected barMetrics:UIBarMetricsDefault]; 
```

如果您需要应用程序中的所有分段控件都应具有自定义背景，那么我建议您编写自己的代理方法。像这样的东西：

```
- (UISegmentedControl *) customSegmentedControl {
    UISegmentedControl *segmentedControl = [ [ [UISegmentedControl alloc] init] autorelease];

    [segmentedControl setBackgroundImage: [ [UIImage imageNamed: @"btn_normal.png"] stretchableImageWithLeftCapWidth: 25 topCapHeight: 0] forState: UIControlStateNormal barMetrics: UIBarMetricsDefault];
    [segmentedControl setBackgroundImage: [ [UIImage imageNamed: @"btn_selected.png"] stretchableImageWithLeftCapWidth: 25 topCapHeight: 0] forState: UIControlStateSelected barMetrics: UIBarMetricsDefault];
    [segmentedControl setDividerImage: [UIImage imageNamed: @"nn.png"] forLeftSegmentState: UIControlStateNormal rightSegmentState: UIControlStateNormal barMetrics: UIBarMetricsDefault];
    [segmentedControl setDividerImage: [UIImage imageNamed: @"sn.png"] forLeftSegmentState: UIControlStateSelected rightSegmentState: UIControlStateNormal barMetrics: UIBarMetricsDefault];
    [segmentedControl setDividerImage: [UIImage imageNamed: @"ns.png"] forLeftSegmentState: UIControlStateNormal rightSegmentState: UIControlStateSelected barMetrics: UIBarMetricsDefault];

    return segmentedControl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T12:45:19.763

我通过编写自定义控件解决了这个问题，基于这个[http://idevrecipes.com/2010/12/11/custom-segmented-controls/](http://idevrecipes.com/2010/12/11/custom-segmented-controls/)

# python - 如何将“命名元组”更改为 Python 中的类？

> ID：10453173
> 
> 赞同：2
> 
> 时间：2012-05-04T17:05:15.093
> 
> 标签：python

谁能举个例子？

在类和命名元组中使用变量有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T04:13:33.533

的返回值`namedtuple` ***是***一个类。没有黑魔法。您不需要将命名元组返回“转换”为类；它完全返回了那个。

`namedtuple`创建一个继承自 的新类`__builtin__.tuple`。当你调用 时`namedtuple('Point', 'x y')(1, 0)`，你得到的是`(1, 0)`具有以下语法糖的元组对象：

*   一个`__dict__`映射，其中`{'x': 1, 'y', 0}`
*   两个属性`x`和分别`y`调用`__getitem__(0)`和`__getitem__(1)`。
*   `__repr__`返回的方法`'Point(x=1, y=0)'`

除此之外，它只是一个元组对象。它的属性和属性数量是不可变的。

但是，我怀疑你的意思是你想要`nametuple('Point', 'x, y')`取而代之的是：

```
class Point:
    def __init__(x, y):
        self.x = x
        self.y = y 
```

在这种情况下，您正在滥用`nametuple`，而应该使用`type`：

```
def init(self, x, y):
    self.x, self.y = x, y
Point = type('Point', (object,), {'__init__': init}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T06:40:11.847

很模糊的问题。

我想你的意思是像这样的结构

```
myPoint1 = namedtuple('myPoint1','x y') 
```

和

```
class myPoint2(object):
    __slots__ = ['x','y']
    def __init__(self, x, y)
        self.x = x
        self.y = y 
```

`myPoint1`通过索引访问速度更快`my_point1[0]`，`my_point1[1]`（其中`0`代表`x`，`1`代表`y`）。但是 attr 访问速度较慢`my_point1.x`，`my_point1.y`因为双重查找和附加功能执行（参见源代码 - 它有很好的文档说明如何`namedtuple`工作）

`myPoint2`只能由 attr 访问`my_point2.x`，`my_point2.y`. 通过 attr 访问`myPoint2`比通过 attr 访问更快`myPoint1`。

此外，如果您不使用`__slots__`，每个实例都会消耗更多内存，因为为每个实例创建了属性/方法的**字典**（用于动态调整它们 - 添加或删除属性、字段、方法等），无论**插槽**是否只为类创建一次。

很快，`namedtuple`返回`tuple subclass`通常用作`tuple`，但指定的属性也可以访问哪些数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-07T02:21:20.083

我认为 OP 想要解释当前是命名元组的数据结构的类定义。 `namedtuple([...], verbose=True)`可能是您正在寻找的：

```
>>> from collections import namedtuple
>>> Pooper = namedtuple('Pooper', ('poop_length','poop_width'))
>>> Pooper(7.5, 1.5)
Pooper(poop_length=7.5, poop_width=1.5)
>>> Pooper = namedtuple('Pooper', ('poop_length','poop_width'), verbose=True)
class Pooper(tuple):
    'Pooper(poop_length, poop_width)'
    __slots__ = ()
    _fields = ('poop_length', 'poop_width')

    def __new__(_cls, poop_length, poop_width):
        'Create new instance of Pooper(poop_length, poop_width)'
        return _tuple.__new__(_cls, (poop_length, poop_width))

    @classmethod
    def _make(cls, iterable, new=tuple.__new__, len=len):
        'Make a new Pooper object from a sequence or iterable'
        result = new(cls, iterable)
        if len(result) != 2:
            raise TypeError('Expected 2 arguments, got %d' % len(result))
        return result

    def __repr__(self):
        'Return a nicely formatted representation string'
        return 'Pooper(poop_length=%r, poop_width=%r)' % self

    def _asdict(self):
        'Return a new OrderedDict which maps field names to their values'
        return OrderedDict(zip(self._fields, self))

    def _replace(_self, **kwds):
        'Return a new Pooper object replacing specified fields with new values'
        result = _self._make(map(kwds.pop, ('poop_length', 'poop_width'), _self))
        if kwds:
            raise ValueError('Got unexpected field names: %r' % kwds.keys())
        return result

    def __getnewargs__(self):
        'Return self as a plain tuple.  Used by copy and pickle.'
        return tuple(self)

    __dict__ = _property(_asdict)

    def __getstate__(self):
        'Exclude the OrderedDict from pickling'
        pass

    poop_length = _property(_itemgetter(0), doc='Alias for field number 0')

    poop_width = _property(_itemgetter(1), doc='Alias for field number 1') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-08T17:36:27.683

从集合导入 namedtuple 作为 nt

```
human_nt = nt('Human_nt', 'name, age')
peter_nt = human_nt('Peter', 20)

class Human_cls (human_nt):
     def some_methods(self):
          pass

peter_cls = Human_cls(**peter_nt._asdict()) 
```

# python - O(1) Python 中整数的可索引双端队列

> ID：10453176
> 
> 赞同：5
> 
> 时间：2012-05-04T17:05:35.053
> 
> 标签：python, collections

我有什么选择？我需要调用很多`append`s（到右端）和`popleft`s（从左端，自然），还需要从存储的中间读取，这将根据算法的性质稳步增长。我想把所有这些操作都放在`O(1)`.

我可以在循环寻址数组（这个词是什么？）上很容易地在 C 中实现它，它会在它满时自动增长；但是 Python 呢？指向其他语言的指针也很受欢迎（我意识到“集合”标签更面向 Java 等，并且希望进行比较，但作为次要目标）。

我来自 Lisp 背景，惊讶地发现在 Python 中从列表中删除头部元素是一个`O(n)`操作。A`deque`可能是一个答案，除了文档说访问`O(n)`在中间。还有什么，预建的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T17:19:50.740

您可以通过使用两个 python 列表来获得一个摊销的 O(1) 数据结构，一个保存 deque 的左半部分，另一个保存右半部分。前半部分被反转存储，因此双端队列的左端位于列表的后面。像这样的东西：

```
class mydeque(object):

  def __init__(self):
    self.left = []
    self.right = []

  def pushleft(self, v):
    self.left.append(v)

  def pushright(self, v):
    self.right.append(v)

  def popleft(self):
    if not self.left:
      self.__fill_left()
    return self.left.pop()

  def popright(self):
    if not self.right:
      self.__fill_right()
    return self.right.pop()

  def __len__(self):
    return len(self.left) + len(self.right)

  def __getitem__(self, i):
    if i >= len(self.left):
      return self.right[i-len(self.left)]
    else:
      return self.left[-(i+1)]

  def __fill_right(self):
    x = len(self.left)//2
    self.right.extend(self.left[0:x])
    self.right.reverse()
    del self.left[0:x]

  def __fill_left(self):
    x = len(self.right)//2
    self.left.extend(self.right[0:x])
    self.left.reverse()
    del self.right[0:x] 
```

我不能 100% 确定这段代码与 python 列表的摊销性能之间的交互是否实际上导致每个操作的 O(1)，但我的直觉是这样说的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:13:04.753

访问 lisp 列表的中间部分也是 O(n)。

Python`list`是数组列表，这就是为什么弹出头部很昂贵（弹出尾部是恒定时间）。

您正在寻找的是一个在头部具有（摊销）恒定时间删除的数组；这基本上意味着您将不得不在`list`使用延迟删除的基础上构建一个数据结构，并且能够在队列为空时回收延迟删除的插槽。

或者，使用哈希表和几个整数来跟踪当前连续的键范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:13:22.490

[Python 的队列模块](http://docs.python.org/library/queue.html#module-Queue)可能会对您有所帮助，尽管我不确定访问是否为`O(1)`.

# c# - 正则表达式返回字符串中所有大写短语的列表

> ID：10453177
> 
> 赞同：2
> 
> 时间：2012-05-04T17:05:35.903
> 
> 标签：c#, regex

嗨，我一直在胡闹一段时间，认为是时候寻求帮助了......

我正在尝试从古怪的字符串中返回所有长于 5 个字符的大写字符（非数字或特殊字符短语）序列。

因此对于：

```
02/02/12-02:45 PM(CKI)-DISC RSPNS SRVD 01/31/12-PRINTED DISCOVERY:spina.bp.doc(DGB)   
01/27/12-ON CAL-FILED NOTICE OF TRIAL(JCX) 01/24/12-SENT OUR DEMANDS(Auto-Gen) 01/23/12-
02:31  PM-File pulled and given to KG for responses.(JLS) 01/20/12(PC)-rcd df jmt af 
```

我想返回一个列表

光盘 RSPNS SRVD

印刷发现

提交的审判通知

发送我们的需求

我一直在玩弄以下变体：

```
[A-Z][A-Z\d]+ 
[A-Z][A-Z\d]+ [A-Z][A-Z\d]+" 
```

然而，这有点超出了我对 Regex 的了解范围。

## 编辑

我正在努力

```
string[] capWords = Regex.Split(d.caption, @"[A-Z\s]{5,}");
foreach (var u in capWords) { Console.WriteLine(u); } 
```

输出：

02/02/12-02:45 PM(CKI)- 01/31/12-

## :spina.bp.doc(DGB) 01/27/12-

(JCX) 2012 年 1 月 24 日- (Auto-Gen) 01/23/12-02:31 PM-文件被拉出并交给 KG 以供回复。(JLS) 2012 年 1 月 20 日(PC)-rcd df jmt af

肯德尔的建议输出：

02/02/12-02:45 PM(CKI)- 01/31/12-

## :spina.bp.doc(DGB) 01/27/12-

(JCX) 2012 年 1 月 24 日- (Auto-Gen) 01/23/12-02:31 PM-文件被拉出并交给 KG 以供回复。(JLS) 2012 年 1 月 20 日(PC)-rcd df jmt af

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:11:03.410

干得好：

[AZ\s]{5,}

测试并仅返回您列出的项目。

解释：

`[A-Z\s]`- 仅匹配大写字母和空格

`{5,}`- 匹配必须至少为 5 个字符，字符数没有上限

代码：

```
MatchCollection matches = Regex.Matches(d.caption, @"[A-Z\s]{5,}");
foreach (Match match in matches)
{
    Console.WriteLine(match.Value);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:18:23.460

尝试这个。我假设您希望去掉前导/尾随空格。

```
[A-Z][A-Z ]{4,}[A-Z] 
```

另外，我认为您不需要 Regex.Split。

```
var matches = Regex.Matches(d.caption, @"[A-Z][A-Z ]{4,}[A-Z]");
foreach (var match in matches)
{
    Console.WriteLine(match.Value);
} 
```

你也可以这样做：

```
var matches = Regex.Matches(d.caption, @"[A-Z][A-Z ]{4,}[A-Z]")
                   .OfType<Match>()
                   .Select(m => m.Value);
foreach (string match in matches)
{
    Console.WriteLine(match);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:54:24.543

您曾要求使用单一的正则表达式解决方案，但使用给定的标准和示例，我无法获得单个正则表达式来计算字符串并忽略某种字符类型（空格）。失败发生在像 ON CAL 这样的字符组上，它应该作为匹配失败，但由于总字符数而通过。

因此，为了确保只有 5 个大写字符的字符组存在，我不得不使用两个正则表达式。这有点麻烦，我可以使用字符串方法更快、更简单地做到这一点。

如果您可以列出有关源文本格式的一些确定性，这可能适用于单个正则表达式。例如，如果我们知道您要查找的字符组总是以破折号开头并以非破折号的标点符号结尾，或者以数字结尾。

5 PM( --- 失败（前面没有破折号）

(CKI) --- 失败（前面没有破折号）

-DISC RSPNS SRVD 0 --- 通过

-打印发现：---通过

-ON CAL- --- FAIL（以破折号结束）

-提交的试验通知（---通过

-发送我们的需求（---通过

除此之外，我已经包含了可以通过以下两种方式之一为您提供结果的代码。我更喜欢第二种。

```
 String source1 = "02/02/12-02:45 PM(CKI)-DISC RSPNS SRVD 01/31/12-PRINTED
 DISCOVERY:spina.bp.doc(DGB) 01/27/12-ON CAL-FILED NOTICE OF TRIAL(JCX) 01/24/12-SENT
 OUR DEMANDS(Auto-Gen) 01/23/12- 02:31 PM-File pulled and given to KG for responses.(JLS) 01/20/12(PC)-rcd df jmt af ";

    String assembledString;

    public void bumbleBeeTunaTest()
    {
        String strippedString = source1.Replace(" ", "");

        String regString1 = ""; 
        String regString2 = @"([A-Z]{6,})";
        String matchHold1,matchHold1First,matchHold1Last,matchHold1Middle;
        Int32 matchHold1Len;

        Regex regExTwo = new Regex(regString2);

        MatchCollection regMatch2 = regExTwo.Matches(strippedString);

        foreach (Match match2 in regMatch2)
        {
            matchHold1 = match2.Groups[1].Value;
            matchHold1Len = matchHold1.Length;
            matchHold1First = matchHold1.Substring(0,1);
            matchHold1Last = matchHold1.Substring(matchHold1Len - 1,1);
            matchHold1Middle = matchHold1.Substring(1, matchHold1Len - 2);

            Debug.Print("Stripped String Matches - " + matchHold1);

            regString1 = @"(" + matchHold1First + "[" + matchHold1Middle+  " ]{" + (matchHold1Len -1) + ",}" + matchHold1Last + ")";

            Regex regExOne = new Regex(regString1);

            MatchCollection regMatch1 = regExOne.Matches(source1);

            regMatch1 = regExOne.Matches(source1);

            foreach (Match match1 in regMatch1)
            {

                Debug.Print("Re-Assembled Matches :" + match1.Groups[1].Value.ToString());
            }

        }

        // Does the same thing as the above.  Just a little simpler.
        for (int i = 0; i < source1.Length; i++)
        {
            if (char.IsUpper(source1[i]) | char.IsWhiteSpace(source1[i]))
            {
                assembledString += source1[i];
            }
            else
            {
                if (!string.IsNullOrEmpty(assembledString))
                {
                    if (assembledString.Count(char.IsUpper) > 5)
                    {
                        Debug.Print("Non Reg Ex Version "  + assembledString);
                    }
                    assembledString = "";
                }
            }
        }
    } 
```

输出看起来像这样。

```
Stripped String Matches - DISCRSPNSSRVD
Re-Assembled Matches :DISC RSPNS SRVD
Stripped String Matches - PRINTEDDISCOVERY
Re-Assembled Matches :PRINTED DISCOVERY
Stripped String Matches - FILEDNOTICEOFTRIAL
Re-Assembled Matches :FILED NOTICE OF TRIAL
Stripped String Matches - SENTOURDEMANDS
Re-Assembled Matches :SENT OUR DEMANDS
Non Reg Ex Version DISC RSPNS SRVD 
Non Reg Ex Version PRINTED DISCOVERY
Non Reg Ex Version FILED NOTICE OF TRIAL
Non Reg Ex Version SENT OUR DEMANDS 
```

# json - 如何 JSON 序列化一个 fx:Model

> ID：10453178
> 
> 赞同：0
> 
> 时间：2012-05-04T17:05:40.027
> 
> 标签：json, apache-flex, actionscript, flex4

我正在使用`fx:Model`s 进行测试，但是将其序列化为 JSON 并没有按预期工作。在下面的示例中，我没有在 JSON 中获取模型的数据，我得到的只是 uuid。如何干净地将模型序列化为 JSON？

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" creationComplete="application1_creationCompleteHandler(event)">
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.events.FlexEvent;

        protected function application1_creationCompleteHandler(event:FlexEvent):void
        {
            mod1.part = "Initial value";
        }

    ]]>
</fx:Script>
<fx:Declarations>
    <fx:Model id="mod1">
        <data>
            <part>{ti.text}</part>
        </data>
    </fx:Model>

</fx:Declarations>
<s:TextInput id="ti" x="98" y="155" text="{mod1.part}">
</s:TextInput>
<s:Button x="120" y="193" label="Read from model" click="Alert.show(mod1.part, 'Model Data')"/>
<s:Button x="120" y="220" label="Model as JSON" click="Alert.show(JSON.stringify(mod1), 'Model as JSON')"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:23:22.223

`stringify`通过将您的调用更改为... ，我能够将数据序列化为 JSON 。

```
JSON.stringify(mod1.valueOf()) 
```

# javascript - 如何使用javascript获取无序列表中单选按钮的选定索引和值

> ID：10453179
> 
> 赞同：0
> 
> 时间：2012-05-04T17:05:43.283
> 
> 标签：javascript, select, radio-button

我有一个带有单选按钮的无序列表。我想获取选中的单选按钮的 ID。

这是HTML：

```
<ul class="class1">
 <li>
  <label id="id1">
   <input id="id1A" type="radio" value="2" name="name1" onchange="say(); return false;">
   <span class="className1">Some Text1</span>
  </label>
 </li>
 <li>
  <label id="id2">
   <input id="id2A" type="radio" value="1" name="name1" onchange="say(); return false;">
   <span class="className1">Some Text2</span>
  </label>
 </li>
</ul>

<ul class="class2">
 <li>
  <label id="id21">
   <input id="id21A" type="radio" value="2" name="name2" onchange="say(); return false;">
   <span class="className21">Some Text21</span>
  </label>
 </li>
 <li>
  <label id="id2">
   <input id="id22A" type="radio" value="1" name="name2" onchange="say(); return false;">
   <span class="className21">Some Text22</span>
  </label>
 </li>
</ul> 
```

这是Javascript：

```
<script type="text/javascript">
function say() {
    var firstChild = document.getElementsByClassName('class1');
        firstChild = Array.prototype.slice.call(firstChild);
        for(var j =0; j < parent.length; j++){  
            var firstChildElem = firstChild;
            for (var x = 0; x < secondChild.length; x ++) {
                if (secondChild[x].checked) {
                    alert("You checked " + secondChild[w]);             
                }
            }
        }
</script> 
```

但是这个脚本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:27:58.010

我建议使用[jQuery](http://jquery.com/)来做这种事情。jQuery 的解决方案就像这样简单：

```
$("input:radio[name=name1]:checked").val(); 
```

哪里`name1`可以代替`name2`。不知道你的意思`SelectedIndex`。下拉列表已选择索引，但单选按钮已选中或未选中...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T17:36:27.753

最简单的方法：

1.更改`onchange="say();`为`onchange="say('CURRID');`
2.新的Javascript：

```
<script type="text/javascript">
function say(currID){
alert("You checked: " + currID);
}
</script> 
```

然后，如果您不再需要标签的`id="id1A"`部分`input`，您可以删除这些部分。

# ios - 在 iOS 中创建格式化文本以渲染到图像的最佳方法

> ID：10453180
> 
> 赞同：0
> 
> 时间：2012-05-04T17:05:46.983
> 
> 标签：ios, cocoa-touch, uiwebview, core-text

我试图找出一种在 ios 中显示简单格式化文本的好方法（最好的？），最终目标是将其呈现为图像。我需要关心的唯一参数是字体（只有一个）、大小（变量）和手动换行符。

我通过阅读有关如何创建[SlabType 算法](http://erikloyer.com/index.php/blog/the_slabtype_algorithm_part_1_background/)并看到它[在 JS 中实现](https://github.com/freqDec/slabText/)并想看看我是否可以弄清楚如何使这项工作成为一个有趣的学习练习来获得这个想法。

我知道如何为 UIWebView 进行所有格式化，但我不确定这是否真的是最好的方法——短文本字符串的开销很大。当然，另一种选择是 CoreText，我通常不熟悉它，但似乎有能力。

有什么想法吗？

# javascript - 是否有 JavaScript API 可以将日志发送到云日志记录服务（如 papertrail）？

> ID：10453186
> 
> 赞同：2
> 
> 时间：2012-05-04T17:06:16.827
> 
> 标签：javascript, jquery, logging, papertrail-app

我有一些在客户端捕获的关键事件，我想轻松地聚合它们。除了将它们发送到我的服务器并推送到[Papertrail 之外](http://papertrailapp.com)，是否有任何服务具有 RESTful API 来发送日志？（或 Papertrail 的 JQuery 插件？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T19:52:41.007

以下是他们网站上 Google Analytics 事件记录的简要介绍：

[https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

基本上它分解为类别、动作[、标签、值]。所以对于一个错误：

```
_gaq.push("_trackEvent", "error", "login", "bad password", 1); 
```

对于按钮，例如幻灯片：

```
_gaq.push("_trackEvent", "slideshow", "next"); 
```

确保阅读文档，它比我做得更好。您还可以将 try..catch 事件连接到 Google Analytics 并发送错误代码。

# python - 变量值

> ID：10453187
> 
> 赞同：-1
> 
> 时间：2012-05-04T17:06:18.217
> 
> 标签：python

```
from sys import exit
haskey = 0

# start function
def start():
print "You wake up in an empty room, feels like you've been here for days. You can't         remember anything from your past. All there is in the room is a digital clock. It says 3:26am, May 5, 2012\. Get out of the room?"

next = raw_input("> ").lower()
if "yes" in next:
    lobby()
elif "no" in next:
    print "We insist"
else:
    print "Try again."

def lobby():
while True:
    print "You arrived at a lobby, all you can see are four doors. Which door   to enter? (first, second, third, fourth)?"

    next = raw_input("> ").lower()
    if "first" in next:
        firstdoor()
    elif "second" in next:
        seconddoor()
    elif "third" in next:
        thirddoor()
    elif "fourth" in next:
        fourthdoor()
    else:
        print "Are you dumb and you can't even follow instructions?"

def firstdoor():
print "You arrive at another empty room, examine further or exit?"
choice = raw_input("> ").lower()
if "examine" in choice:
    print "A trap door opened, you fell in it and died."
    exit()
elif "exit" in choice:
    lobby()
else:
    print "Are you dumb and you can't even follow instructions?"

def seconddoor():
print "You arrive at the study room, examine room or exit?"
choice = raw_input("> ").lower()
if "examine" in choice:
    print "There is a note on the table, read it?"
    secondchoice = raw_input("> ").lower()
    if "yes" in secondchoice:
        note()
    elif "no" in secondchoice:
        print "Returning to lobby."
        lobby()

def note():
print """Security Log (040412): A man from the city travelling along the highway loses control of his vehicle and fell to the cliff. He was able to jump and grab a hold to the bushes growing at the side of the cliff. We were able to rescue him, but as soon as we secured him to the ground he violently reacted to our help and fainted. A few minutes later he was out of control, like he was possessed by a demon. We had no choice but to sedate him and keep him locked in our prison until authorities from the city arrive and examine him. The key to his cell is in the vault in the vault room. The keycode changes depending on the current date.
"""
print "Returning to lobby."
lobby()

def thirddoor():
if haskey == 0:
    print "Door is locked, you need a key to continue."
    print "%d" % haskey
    lobby()
elif haskey == 1:
    exit()

def exit():
print "You are now free!"
print "To be continued.."

def fourthdoor():
print "There is a vault inside the room. Use vault?"
usevault = raw_input("> ")
if "yes" in usevault:
    vault()
else:
    print "Returning to lobby.."
    lobby()

def vault():
while True:
    print "There is a security code for this door. Enter code:"
    code = raw_input("> ")
    if "05042012" in code:
        print "Correct!"
        print "Returning to lobby.."
        haskey = int(1)
        print "%d" % haskey
        lobby()
    else:
        print "Code Error! Try again?"

start() 
```

我有这个关于 python 的教程的迷你文本游戏，我正在使用第四道门/保险库功能来询问玩家代码，如果输入正确，它会更改一个变量的值，用作打开第三道门的钥匙. 问题是即使在正确给出保险库代码的情况下更改了变量的值，我仍然无法打开门。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:32:32.323

当 python 遇到`haskey = int(1)`inside of 时`vault`，它会创建一个新的局部变量`haskey`，叫做你只能在里面看到`vault`。您需要告诉 python，当它`haskey`在该函数中看到时，您的意思是`haskey`您在文件顶部声明的全局。您可以通过添加`global haskey`到开头来做到这一点`vault`。IE：

```
def vault():
    global haskey
    while True:
        print "There is a security code for this door. Enter code:"
        code = raw_input("> ")
        ... 
```

# jquery - 页面刷新时表单的数据消失

> ID：10453188
> 
> 赞同：1
> 
> 时间：2012-05-04T17:06:18.677
> 
> 标签：jquery, html

在这段代码中，我没有找到如何让 table1 带有数据的解决方案。当刷新table1的数据后显示table2消失了！！我怎样才能解决这个问题 ？

```
 <?php
$menucompare="";
if (isset($_POST["menucompare"]))
{
 $menucompare= $_POST['menucompare'];
 $table1 = '
                        <table id= "Table1" width="100%" border="1" cellspacing="0" cellpadding="0">
                                        <!--SW - You need a tr tag around these headers-->
                                        <th >Weeks</th>
                                        <th ><p></p></th>
                                        <th > More Details</th>

                                        <tr id="tr">

                                                <tr id= "tr " >
                                                   <td  >gggg</td>
                                                   <td >kkkkk</td>
                                                   <td >
                                                                        <form name ="dets" method="POST" action="">
                                                                                <input class = "showt" name ="wnumber" id ="wnumber" type="submit" value= "More Details" />
                                                                                <input type="hidden" name="data" value="wnumber" />

                                                                                   <noscript>
                                                                                <input type="submit" value="Submit"/>
                                                                                   </noscript>
                                                                        </form>
                                                                </td>
                                                </tr>
                                        </tr>
                                </table> ';
}
else if (isset($_POST["data"]))
{
        // put whatever db process you need somwhere in this if statement

         $table1 = '
                        <table id= "Table1" width="100%" border="1" cellspacing="0" cellpadding="0">
                                    <!--SW - You need a tr tag around these headers-->
                                    <th >Weeks</th>
                                    <th ><p></p></th>
                                    <th > More Details</th>

                                    <tr id="tr">

                                            <tr id= "tr " >
                                               <td  >gggg</td>
                                               <td >kkkkk</td>
                                               <td >
                                                                    <form name ="dets" method="POST" action="">
                                                                            <input class = "showt" name ="wnumber" id ="wnumber" type="submit" value= "More Details" />
                                                                            <input type="hidden" name="row_id" value="value of row id" />
                                                                            <input type="hidden" name="data" value="wnumber" />

                                                                               <noscript>
                                                                            <input type="submit" value="Submit"/>
                                                                               </noscript>
                                                                    </form>
                                                            </td>
                                            </tr>
                                    </tr>
                            </table> ';

        $table2 = '
                          <div id="Table2">
                                  <table width="100%" border="1"  cellspacing="0" cellpadding="0">
                                          <tr>
                                                  <th id="wekkNum"> wnumber</th>
                                                  <th>Your place</th>
                                                  <th>Your arr</th>
                                          </tr>

                                          <tr >
                                                  <td>hhhh</td>
                                                  <td>kkkk</td>
                                                  <td>jjjj</td>
                                          </tr>

                                  </table>
                          </div>             
                  ';                   
}
?>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
        /*Start Functions*/
        function displayVals() {
                var singleValues = $("select option:selected").text();
                $("#hiddenselect").val(singleValues);
                $("p").html("Procent of : &nbsp &nbsp" + singleValues);
        }
        /*End functions*/

        /*Start Ready*/
        $(document).ready(function(){
                $("select").change(function() {
                        displayVals();
                });
        displayVals();

                $("select#menucompare").change(function() {
                        $("#aform").submit();  
                });
    });
        /*End Ready*/
</script>
<form id="aform" method="post">
        <select id="menucompare" name ="menucompare" size="1" onchange="submitaform()">
                <option selected='selected'>Select one</option>
                <option value="value1" <?php    if ($menucompare == "value1") { echo " selected='selected'"; } ?> >Text 1</option>
                <option value="value2" <?php   if ($menucompare == "value2") { echo " selected='selected'"; } ?> >Text 2</option>
                <option value="value3" <?php   if ($menucompare == "value3") { echo " selected='selected'"; } ?> >Text 3</option>
                <option value="value4" <?php    if ($menucompare == "value4") { echo " selected='selected'"; } ?> >Text 4</option>

        </select>
        <input type="hidden" name="hiddenselect" value="<?php echo $menucompare ;  ?>" />      
</form>
<?php
if (isset($table1))
{
        print $table1;
}
if (isset($table2))
{
        print $table2;
}
?> 
```

这是我的全部代码。希望有解决这个问题，我看过所有帖子，但没有类似的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:40:20.920

```
/*Start Ready*/
$(document).ready(function(){
    $("select").change(function() { 
        displayVals(); 
    });
    displayVals(); 
```

此代码片段中的第二个`displayVals();`在页面加载后立即触发，我预计这是您的错误的原因，因为在页面加载时尚未选择任何内容。

您的 table2 不会在页面加载或页面刷新（这只是强制页面加载）时显示，因为您有 inline style `<div id="Table2" style="display:none;">`。与您期望选择选项被保留的类似问题......如果页面刷新，它将被重置为其默认状态，因此没有选定的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:31:23.167

$_POST 值仅在表单提交后的页面上可用。

通过多个页面保持用户输入的一种简单方法是将其作为隐藏的表单字段传递。

因此，您将在“dets”表单中添加一个隐藏的表单字段：

```
<input type="hidden" name="menucompare" value="'. $menucompare.'" /> 
```

此外，您必须去掉第 37 行的“else”

```
else if (isset($_POST["data"])) 
```

至

```
if (isset($_POST["data"])) 
```

[尝试这个](http://pastebin.com/PT7G0h67)

# iphone - 主线程中的 MBProgressHUD 问题。

> ID：10453189
> 
> 赞同：2
> 
> 时间：2012-05-04T17:06:20.773
> 
> 标签：iphone, objective-c, ios, xcode, mbprogresshud

我想使用`MBProgressHUD`以下方式：在我的方法中，我调用多个服务器和其他需要显示**HUD**的操作。我想知道在完成这些特定操作之前“保持”主线程的最佳方式是什么。

例如：

```
method {

MBProgressHUD (action 1) //don't move on until this is done

//some other code...

MBProgressHUD (action 2)

//some other code...

} 
```

我对 iOS 很陌生，如果这太简单了，我很抱歉。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:26:00.217

我认为`you use graphical change in MBProgressHUD.`

例子 ：-

```
[HUD showWhileExecuting:@selector(fetchNewData) onTarget:self withObject:nil animated:YES]; 
```

fetchNewData 将在辅助线程上调用。所以`no use graphical change`在 MBProgressHUD 中。

如果你想图形改变使用`hudWasHidden delegete`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:51:24.607

You may take a look at [this](https://stackoverflow.com/a/5834571/623784) answer, or ask the developer over at [Github](https://github.com/matej/MBProgressHUD). Also, it is never a good idea to block the main-thread. Call it in a different thread. Go for Grand Central Dispatch.

# process - 在 windows mobile 中启动进程

> ID：10453195
> 
> 赞同：0
> 
> 时间：2012-05-04T17:06:35.227
> 
> 标签：process, windows-mobile

我想从另一个应用程序启动一个应用程序；编码

```
`public static void RunProcess(string AppProcessName)
        {
            string[] Files = Directory.GetFiles(AppProcessName);
            foreach (string file in Files)
            {
                if (System.IO.Path.GetExtension(file).Equals(".exe"))
                {
                    System.Diagnostics.Process AppProcess = new System.Diagnostics.Process();
                    System.Diagnostics.ProcessStartInfo Info = new System.Diagnostics.ProcessStartInfo();
                    Info.FileName = file.Replace('/', '\\');
                    AppProcess.StartInfo = Info;
                    AppProcess.Start();
                    break;
                }
            }
        }` 
```

但我得到一个例外 win32Exception

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:39:52.293

`.exe`您尝试运行的文件不是 Windows Mobile 应用程序。仅仅因为您可以将其复制到 Windows Mobile 设备并不意味着它可以在 Windows Mobile 上运行。

# c++ - 二叉树 findHeight

> ID：10453197
> 
> 赞同：0
> 
> 时间：2012-05-04T17:06:44.503
> 
> 标签：c++, tree, binary-tree, binary-search-tree

所以我试图在我的教授二叉树类中添加一个 findHeight 方法，但我遇到了一些麻烦。

```
 BTNode<T> findParent(BTNode<T> Root, BTNode<T> child)
  {
    if(!root)  
    {
        return Null;
    }

    if(Root.left* == child || Root.right* == child)
    {
        return Root;
    }
    else
    {
        //recursively checks left tree to see if child node is pointed to
        findParent(Root.left, child);

        //recursively checks right tree to see if child node is pointed to
        findParent(Root.right, child);
    }

  int findHeight(BTNode<T> thisNode)
  {
      if (Count.findParent(.root, thisNode) == null)    
      {
            return 0;
      }

      return findHeight(thisNode.findParent) + 1;
  } 
```

我的问题是在findHeight方法中，它调用了findParent()方法，我要引用参数thisNode来自的二叉树的根，因为这只是类的一部分，我不知道我应该如何引用根。BT（二叉树）类有一个返回树根的函数，但是由于我没有二叉树可以引用，我不知道该怎么做。请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:12:42.393

通常，该`findHeight`函数不会“担心”找到树的根——它只是在它传递的任何节点下方找到树的高度。它通常看起来像这样：

```
int findHeight(BTNode <T> *thiNode) { 
    if (thisNode == NULL)
        return 0;
    int left_height = findHeight(thisNode->left);
    int right_height = findHeight(thisNode->right);
    return 1 + max(left_height, right_height);
} 
```

然后由用户传入他们想要的高度的树的根。

# dojo - liveSplitters 设置为 false 但仍显示在 BorderContainer 中

> ID：10453201
> 
> 赞同：2
> 
> 时间：2012-05-04T17:06:58.700
> 
> 标签：dojo, dijit.layout, border-container

我是一个道场新手，所以我可能在某个地方犯了一个简单的错误。我正在尝试在没有 liveSplitters 的情况下设置borderContainer，但即使我将其设置为false，拆分器仍然存在。gutters:false 属性正确反映请帮助我弄清楚我做错了什么。

谢谢

```
<body class="claro">
<div id="appLayout"
    data-dojo-type="dijit.layout.BorderContainer"
    data-dojo-props="design: 'headline', gutters: false, liveSplitters: false ">
    <div class="centerPanel" data-dojo-type="dijit.layout.ContentPane"
        data-dojo-props="region: 'center'">
        <div>
            <h4>Group 1 Content</h4>
            <p>para 1</p>
        </div>
        <div>
            <h4>h4 para 2</h4>
        </div>
        <div>
            <h4>h4 para 3</h4>
        </div>
    </div>
    <div class="edgePanel" data-dojo-type="dijit.layout.ContentPane"
        data-dojo-props="region: 'top'">Header content (top)</div>
    <div id="leftCol" class="edgePanel"
        data-dojo-type="dijit.layout.ContentPane"
        data-dojo-props="region: 'left', splitter: true">Sidebar
        content (left)</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:35:25.260

从内容窗格中删除拆分器属性。

```
<div id="leftCol" class="edgePanel"
    data-dojo-type="dijit.layout.ContentPane"
    data-dojo-props="region: 'left'>Sidebar
    content (left)</div> 
```

liveSplitters 属性描述了分离器的行为，而不是它们是否存在。

```
// liveSplitters: [const] Boolean
//      Specifies whether splitters resize as you drag (true) 
//          or only upon mouseup (false)
liveSplitters: true, 
```

# c++ - 如何根据 Valgrind 输出进一步调试

> ID：10453203
> 
> 赞同：2
> 
> 时间：2012-05-04T17:07:06.343
> 
> 标签：c++, c, heap-memory, valgrind, memory-corruption

我有 C/C++ 代码，它给出了段错误。它是在 RH Linux Enterprise 服务器上使用 gcc/g++ 编译的。我在可执行文件上使用了 Valgrind 内存检查器：

```
valgrind --tool=memcheck --leak-check=full --show-reachable=yes 
```

我将此作为 Valgrind 的输出消息之一：

```
==7053== Invalid read of size 1
==7053==    at 0xDBC96C: func1 (file1:4742)
==7053==    by 0xDB8769: func2 (file1.c:3478)
==7053==    by 0xDB167E: func3 (file1.c:2032)
==7053==    by 0xDB0378: func4 (file1.c:1542)
==7053==    by 0xDB97D8: func5 (file1.c:3697)
==7053==    by 0xDB17A7: func6 (file1.c:2120)
==7053==    by 0xDBD55E: func7 (file2.c:271) 

==7053==  Address 0x1bcaf2f0 is not stack'd, malloc'd or (recently) free'd 
```

我读到这意味着我的代码访问了不允许的无效内存位置。

我的问题：

1.  我如何找出哪些缓冲区内存访问无效，以及上面的哪些函数已经做到了。

2.  我如何使用地址*0x1bcaf2f0*，valgrind 说这个地址是无效的。如何在该地址找到符号（本质上是缓冲区名称）？内存映射文件，任何其他方式。

3.  任何其他通用指针、valgrind 选项或其他用于使用 Valgrind 检测内存（堆/堆栈损坏）错误的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:21:46.993

广告 1：在您的示例中，这将是 file1:4742 (1) 行中的 func1。以下函数是堆栈跟踪。分析该行应该会导致您访问无效的内存。

广告 2：尝试将其拆分为多个更简单的行，以防它太复杂且不明显哪个确切的调用导致了警告。

广告 3：memcheck 是用于检测堆内存错误的典型 valgrind 工具。不过，这对堆栈损坏无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:32:58.147

如果你有 Valgrind 3.7.0，你可以使用嵌入式 gdbserver 来调试在 Valgrind 下运行的应用程序。

请参阅[http://www.valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver](http://www.valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver)

# regex - 在wingrep中重复n到m次之间的前一项

> ID：10453204
> 
> 赞同：0
> 
> 时间：2012-05-04T17:07:12.030
> 
> 标签：regex

我在wingrep 2.3中尝试了以下正则表达式：

```
[A-Za-z0-9]{1,5}cd77 
```

但是搜索返回空，即使我正在搜索的 txt 文件中有以下字符串***testcd77 。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:33:52.777

The Regular Expression Lookup tab on the Search Criteria dialog for my copy of Windows Grep doesn't offer {} as a supported feature. So I think you're stuck with unrolling the search string to

```
[A-Za-z0-9]([A-Za-z0-9]([A-Za-z0-9]([A-Za-z0-9]([A-Za-z0-9])?)?)?)?cd77 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:26:41.343

[wingrep 文档](http://www.wingrep.com/Help/html/search-regexp.htm)中没有任何内容表明它们支持这种区间表达式。你可能根本做不到。

一些支持这些表达式的正则表达式引擎需要转义大括号，所以你可以试试这个`[A-Za-z0-9]\{1,5\}cd77`：但如果这不起作用，那么我怀疑你不走运。

# jquery - JQuery：fadeIn 无法正常工作。内容仅在短时间内可见

> ID：10453206
> 
> 赞同：-4
> 
> 时间：2012-05-04T17:07:23.767
> 
> 标签：jquery

我使用 JQuery 来淡入我的内容，如下所示：

```
.content {
display:none;
}

$('.content').fadeIn(500); 
```

但是 .content 只在短时间内可见，它只是“闪烁”一秒钟。似乎 css 推翻了 JQuery 命令。

有谁知道，我该如何解决？

编辑：我只使用上面的代码。唯一的区别是，我有一个 div .container_inside 并且 div .content 使用 $.load() 加载到 .container_inside 中。加载后我执行 $('.content').fadeIn(500)。会不会是，内容 div 已加载，而 JQuery 命令在它无法“找到”.content 之后？我没有回调函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:14:35.157

您可以使用`delay` [**演示**](http://jsfiddle.net/ncqgf/3/)

*脚本*

```
$(document).ready(function(){
    $('.content').delay(500).fadeIn(1500);
}); 
```

*​CSS*

 *```
.content {
    display:none;
}​ 
```

*HTML*

```
<div class="content">
    Some text blah blah blah...
</div>​ 
```*

# iis - 从 IIS 中的 AXIS2-Webservice 调用导致错误 (500) - 内部服务器错误

> ID：10453207
> 
> 赞同：1
> 
> 时间：2012-05-04T17:07:26.207
> 
> 标签：iis, tomcat, axis2

我想在 IIS-WebService (C#) 中调用 Axis2-Webservice（标准示例：version-1.6.2.aar）。不幸的是，它返回（500）内部服务器错误。

我的配置：
IIS 版本 7.5
Tomcat 6.35
Axis2 1.6.2

一切都在WIN7上运行。从 SOAPUI 或直接从浏览器调用都可以正常工作。从 IIS-WebService 调用会导致错误：

在 c# 中调用：

```
HttpWebRequest GetResponse() Method = "POST" 
```

# javascript - 使用 HTML 表单--> 选择结果作为选项来创建表格视图

> ID：10453209
> 
> 赞同：1
> 
> 时间：2012-05-04T17:07:40.120
> 
> 标签：javascript, html, google-visualization

我的目标是创建一个表，当用户更改表单中的选择选项时，该表将更改其视图。我正在使用 Google Visualizations，所以在加载表格后：

```
var geoData = response.getDataTable(); 
```

我创建了一个有效的视图：

```
var geoView = new google.visualization.DataView(geoData);
geoView.setColumns([0,3,1]); 
```

当用户以下列形式更改选择时，我希望最后一行更改：

```
<td><select id='query1'onclick="tableCoords(this.value), Remapear()">
    <option value='[0,1]'>Todas</option>
    <option value='[0,3,1]'>P2 - Existenacia de normativas 
        PROVINCIALES que regulan el uso del suelo</option>
    <option value='[0,4,1]'>P3 - Año de la ultima 
        modificacion o promulgacion de la Normativa</option>
    <option value='[0,6,1]'>P4 - Existenacia de 
        Codigo de Uso de Suelo MUNICIPAL</option>
<option value='[0,7,1]'>P5 - Año de la ultima modificacion o 
        promulgacion del Codigo de Uso de Suelo</option>
<option value='[0,3,1]'>P6 - Se encuentra la normativa en 
       el sitio web municipal</option>
<option value='[0,3,1]'>P7 - En el Municipio hay 
        normativa de ZONIFICACION, determinando el uso del suelo</option>
</select></td> 
```

我还没有创建函数 Remapear()，但我的猜测是必须首先创建脚本才能执行此任务？社区可以帮助我吗？

# ajax - jQuery：真正简单的自制无限滚动

> ID：10453210
> 
> 赞同：4
> 
> 时间：2012-05-04T17:07:42.727
> 
> 标签：ajax, jquery, scroll, infinite-scroll

我知道那里有多个插件，但是我想知道如何使自己的东西按我想要的方式工作。

首先，当滚动到页面底部时，我想触发一个调用的函数，该函数`ajaxLoadActivity`现在由“显示更多”按钮触发。

```
$(window).scroll(function() {

            if ( $(window).scrollTop() >= ( $(document).height() - $(window).height() ) )

                if ( $('ol.astream > .loadCount:last > li').attr('id') == "noMoreActivities" )
                    return false;

                ajaxLoadActivity('bottom', true);
                console.log('fired');

        }); 
```

我有可能每个人在尝试自己做这件事时都会遇到的问题。问题是该函数被多次触发。该函数`ajaxLoadActivity`执行所有 ajax工作并将`<li>`项目附加到现有的`<ol>`. 仅将其与“显示更多”按钮一起使用时，该功能就可以完美运行。

但是我想知道如何在简单地滚动到页面底部时触发相同的功能。但我只想调用它一次——然后等到加载的东西——然后只有在再次到达底部时才允许再次触发该函数。

而且我在上面的示例代码中已经有一个异常……如果我的最后一个元素的 id 为`noMoreActivities`我不希望再次触发该函数，因为这样就没有更多的活动了。

有什么想法可以让我只触发一次函数并等到请求发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:13:12.587

假设你正在使用`$.post`你可以在你的函数中返回它`ajaxLoadActivity`然后检查它是否正在运行

```
var ajax;

$(window).scroll(function() {

    if ( $(window).scrollTop() >= ( $(document).height() - $(window).height() ) )

        if ( $('ol.astream > .loadCount:last > li').attr('id') == "noMoreActivities" )
            return false;

        if (ajax) {

            return false; // don't make another request, let the current one complete, or
            // ajax.abort(); // stop the current request, let it run again
        }

        ajax = ajaxLoadActivity('bottom', true);
        console.log('fired');

});

function ajaxLoadActivity(one, two) {

    return $.post(/* stuff */);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T11:37:46.627

$(window).scrollTop() **==** ( $(document).height() - $(window).height() ) 将使它只执行一次调用。尝试一下。

# excel - 从一列复制数据，粘贴到第一个空列

> ID：10453211
> 
> 赞同：0
> 
> 时间：2012-05-04T17:07:51.693
> 
> 标签：excel, copy-paste, vba

我在 COLUMN H2 中有数据。. 我想将它们复制到同一个电子表格的其他地方。但是在我复制的地方，它会一次更改一列，因为下面的每一列都被宏填充。

我现有的宏已成功搜索到这一列数据并将其粘贴到下面的空列中，例如 B31。当我有 10 条新数据时，下次我运行宏时，我希望它把它粘贴到 C31 的 C 列（下一个空行）下一次，D31.......等等。 . 我的宏反复抓取 H2:H11 中的数据并将其粘贴到 B31 中，但每次我再次运行宏时都会覆盖该列。通过之前运行宏，它不是“看到” B 列已经有数据......代码有什么问题？

```
Range("H2:H11").Select Selection.Copy
Range("A31").Select
Range("A31:M31").End(xlToLeft).Offset(0, 1).Select
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False
ActiveCell.Rows("1:10").EntireRow.Select
Application.CutCopyMode = False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:41:06.983

```
Range("A31:M31").End(xlToLeft).Offset(0, 1).Select 
```

应该

```
Range("M31").End(xlToLeft).Offset(0, 1).Select 
```

下面是替代解决方案（我没有测试过，因为我不在我的 MS PC 上，抱歉）

```
dim lRow as Long  'Output Row
lRow = 31         'Start at row 31

    For i = 2 to 13 'Column B to Column M

         'Count if there is any values in the columns 
         '(if there is a header then change the 0 to 1)

        If Application.WorksheetFunction.CountA(ActiveSheet.Columns(i)) = 0 Then

            For Each c in Range("H2:H11")  'Cycle through output values

            ActiveSheet.Cells(lRow, i).value = c.Value  'Assign values

            lRow = lRow + 1   'Increment row number

            next c

        exit for   'exit column loop

        end if

    next i 
```

# php - 用 PHP 实现 ROT13

> ID：10453212
> 
> 赞同：3
> 
> 时间：2012-05-04T17:08:00.073
> 
> 标签：php, encryption, rot13

在阅读了关于 Jon Skeet 的有趣内容后，我发现了一个字符串，我猜它是在 ROT13 中。在检查我的猜测之前，我想我会尝试用 PHP 解密它。这是我所拥有的：

```
$string = "Vs lbh nfxrq Oehpr Fpuarvre gb qrpelcg guvf, ur'q pehfu lbhe fxhyy jvgu uvf ynhtu.";
$tokens = str_split($string);
for ($i = 1; $i <= sizeof($tokens); $i++) {
    $char = $tokens[$i-1];
    for ($c = 1; $c <= 13; $c++) {
        $char++;
    }
    echo $char;
} 
```

我的字符串回来了`AIaf you aasakaead ABruacae Sacahnaeaiaer to adaeacrypt tahais, ahae'ad acrusah your sakualal waitah ahais alaauagah.`

我的逻辑似乎很接近，但显然是错误的。你能帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T17:10:18.823

试试`str_rot13`。

[http://us.php.net/manual/en/function.str-rot13.php](http://us.php.net/manual/en/function.str-rot13.php)

无需自己制作，它是内置的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:31:12.167

这是一个工作实现，不使用嵌套循环。您也不需要将字符串拆分为数组，因为您可以像 PHP 中的字符串数组一样对单个字符进行索引。

您需要知道 ASCII 大写字符的范围是 65 - 99，小写字符的范围是 97 - 122。如果当前字符在其中一个范围内，请将 13 添加到其 ASCII 值。然后，您检查是否应该滚动到字母表的开头。如果你应该翻转，减去 26。

```
$string = "Vs lbh nfxrq Oehpr Fpuarvre gb qrpelcg guvf, ur'q pehfu lbhe fxhyy jvgu uvf ynhtu.";

for ($i = 0, $j = strlen( $string); $i < $j; $i++) 
{
    // Get the ASCII character for the current character
    $char = ord( $string[$i]); 

    // If that character is in the range A-Z or a-z, add 13 to its ASCII value
    if( ($char >= 65  && $char <= 90) || ($char >= 97 && $char <= 122)) 
    {
        $char += 13; 

        // If we should have wrapped around the alphabet, subtract 26
        if( $char > 122 || ( $char > 90 && ord( $string[$i]) <= 90)) 
        {
            $char -= 26;
        }
    }
    echo chr( $char);
} 
```

这会产生：

> 如果你让布鲁斯施奈尔解密这个，他会用他的笑来粉碎你的头骨。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T17:32:58.407

这不起作用，因为 z++ 是 aa

```
$letter = "z";
$letter++;
echo($letter); 
```

返回 aa 不是 a

编辑：不使用内置的可能替代解决方案是

```
$string = "Vs lbh nfxrq Oehpr Fpuarvre gb qrpelcg guvf, ur'q pehfu lbhe fxhyy jvgu uvf ynhtu.";
$tokens = str_split($string);

foreach($tokens as $char)
{
    $ord = ord($char);
    if (($ord >=65 && $ord <=90 ) || ($ord >= 97 && $ord <= 122))
    $ord = $ord+13;
    if (($ord > 90 && $ord < 110) || $ord > 122)
        $ord = $ord - 26;
    echo (chr($ord));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T17:18:16.907

如果您想自己执行此操作，而不是使用现有的解决方案，您需要检查每个字母是在字母表的前半部分还是后半部分。您不能天真地为每个字符添加 13（另外，您为什么要使用循环来添加 13？！）。您必须将 13 加到 AM 并从 NZ 中减去 13。您还必须不更改任何其他字符，例如空格。

更改您的代码以在更改之前检查每个字符的内容，以便您知道是否以及如何更改它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-20T02:16:59.380

派对晚了几年，但我想我会给你另一个选择

```
function rot13($string) {
    // split into array of ASCII values
    $string = array_map('ord', str_split($string));

    foreach ($string as $index => $char) {
        if (ctype_lower($char)) {
            // for lowercase subtract 97 to get character pos in alphabet
            $dec = ord('a');
        } elseif (ctype_upper($char)) {
            // for uppercase subtract 65 to get character pos in alphabet
            $dec = ord('A');
        } else {
            // preserve non-alphabetic chars
            $string[$index] = $char;
            continue;
        }
        // add 13 (mod 26) to the character
        $string[$index] = (($char - $dec + 13) % 26) + $dec;
    }

    // convert back to characters and glue back together
    return implode(array_map('chr', $string));
} 
```

# matplotlib - Matplotlib 在 Latex 中使用损坏的 pdfmarks

> ID：10453213
> 
> 赞同：1
> 
> 时间：2012-05-04T17:08:00.930
> 
> 标签：matplotlib, pdflatex, xelatex

我有一个非常奇怪的问题：

```
plt.xlabel("$t$[ms]")    
plt.ylabel("$\dot{q}$[deg]")  
plt.axvline(x=span2Stop,lw='0.3',c='0.5')
plt.axvspan(spanStart, spanStop, facecolor='0.9', alpha=1,edgecolor='0.9',lw=0)
plt.annotate('11ms',fontsize='9', xy=(11, -500),xytext=(2, -500),verticalalignment='center',arrowprops=myarrow)
plt.annotate('13ms',fontsize='9', xy=(13, 1000),xytext=(2, 1000),verticalalignment='center',arrowprops=myarrow)
plt.annotate('17ms',fontsize='9', xy=(17, -500),xytext=(20, -500),verticalalignment='center',arrowprops=myarrow)
plt.tight_layout()
plt.savefig(imagePath + "snapAHVjoints.pdf")
plt.savefig(imagePath + "snapAHVjoints.svg")
plt.show() 
```

生成漂亮的图片。但是`plt.axvline(x=span2Stop,lw='0.3',c='0.5')`，如果将乳胶作为 pdf 包含在导出的 pdf 中，则会导致 pdfmark 损坏。我花了很长时间才找到它。

用 xelatex 编译成 pdf。这个问题似乎与加载的包无关（老实说，我并没有尝试禁用 hyperref，而是测试了我发现的几乎所有选项）。

知道这有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:13:29.073

`lw='0.3'`应该是`lw=0.3`然而，不应导出损坏的 pdf。如果您将其导出为 eps matplotlib 抱怨，那么我就是这样认出来的

这是一个错误还是我再次弄错了一些pythonic的东西？

# c# - 从xml解析日期

> ID：10453223
> 
> 赞同：0
> 
> 时间：2012-05-04T17:08:35.093
> 
> 标签：c#, windows-phone-7

我有一个保存在 xml 中的日期，我正在尝试解析该日期，然后从 DateTime.Now 中获取差异，但是当我尝试从 xml 中解析 DateTime 时，我不断收到格式错误，我的格式是否正确？

这是我的xml

```
<Item>
<Name>John</Name>
<Date>5/4/2012</Date> 
```

和我的代码

```
public void showItems()
    {
        using (var file = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (var stream = file.OpenFile("Item.xml", FileMode.Open))
            {

                XElement xml = XElement.Load(stream);

                listBoxItem.ItemsSource = from item in xml.Descendants("Item")
                                            select new Ages
                                            {
                                                Name = item.Element("Name").Value,
                                                DOB = item.Element("Date").Value,
                                                DIFF = DateTime.ParseExact(item.Element("Date").Value, "m d yyyy", CultureInfo.InvariantCulture)

                                              };

            }
        }} 
```

和我的班级

```
public class Ages
{
    public string Name { get; set; }
    public string DOB { get; set; }
    public DateTime DIFF { get; set; }

} 
```

如果您能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:15:14.533

**编辑：**使用此代码来正确解析日期：

```
DateTime.ParseExact(item.Element("Date").Value, "M/d/yyyy", CultureInfo.InvariantCulture) 
```

# .net - Python 对象与 .NET 对象的比较

> ID：10453224
> 
> 赞同：1
> 
> 时间：2012-05-04T17:08:36.280
> 
> 标签：.net, python

我对 .NET 对象及其用于引用与值类型的框架非常满意。python 对象与 .NET 对象相比如何？具体来说，我想知道相等性`obj1 == obj2`、散列能力（即能够放入字典）和复制。

例如，在 .NET 中默认情况下，所有对象都是引用类型，它们的相等性和哈希码由它们在内存中的地址确定。此外，将变量分配给现有对象只会使其指向内存中的该地址，因此不会发生昂贵的复制。似乎这对于python来说是一样的，但我并不完全确定。

编辑：

*   平等
    *   [`is`检查引用相等，`==`检查值相等](https://stackoverflow.com/a/133024/116891)（但是值相等对对象意味着什么？）

[我可以从 2000 年写的 effbot](http://effbot.org/zone/python-objects.htm)中找到一些有用的信息：

> # 对象
> 
> 所有 Python 对象都有这个：
> 
> *   唯一标识（一个整数，由 返回`id(x)`）
> *   一个类型（由 返回`type(x)`）
> *   某些内容您无法更改身份。
> 
> 您无法更改类型。
> 
> 某些对象允许您更改它们的内容（即不更改标识或类型）。
> 
> 某些对象不允许您更改其内容（更多内容见下文）。
> 
> 该类型由一个类型对象表示，它更了解这种类型的对象（它们通常占用多少字节的内存，它们有哪些方法等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:19:53.113

### [平等](http://docs.python.org/reference/datamodel.html#object.__eq__)

: -~~如果您尝试比较~~`__cmp__`未定义或`__eq__`定义方法的对象，它将从该对象继承其比较结果。这意味着做相当于做。~~`object``a > b``id(a) > id(b)`

该`is`关键字还用于查看两个变量是否指向同一个对象。`==`另一方面，运算符调用它正在比较的对象的or`__cmp__`方法`__eq__`。

### [哈希性](http://docs.python.org/reference/datamodel.html#object.__hash__)

: - 如果有为`__hash__`它定义的方法，则该对象是可散列的。所有基本数据类型（包括字符串和元组）都为它们定义了散列函数。如果没有`__hash__`为类定义方法，则该类将从 object 继承它的 hash `object`。

### [复印](http://docs.python.org/library/copy.html)

: - `copy`, `copy.deepcopy`, 以及它们各自的类方法`__copy__`和`__deepcopy__`. 用于`copy`复制单个对象，复制对象`deepcopy`的层次结构。`deepcopy`

在 agf 的建议下进行的编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:33:19.003

在python中，您可以定义`__eq__`处理`==`运算符的方法。

`is`操作员检查一个对象**是否**与另一个相同。（或者更具体地说，两个变量引用一个或两个对象）

```
>>> a = [1, 2, 3]
>>> b = [1, 2, 3]
>>> a == b
True
>>> a is b
False
>>> c = a
>>> c is a
True 
```

现在，此示例使用`list`类型，您可以将其视为一个类，该类定义了一个`__eq__`比较其所有项目的相等性的方法。

与哈希相同，您`__hash__`在类中定义一个方法，该方法返回一个可以识别您的对象的整数。这在支持散列的基本类型中也可用。见`hash`功能。~~

# c# - 查看准备好的声明

> ID：10453230
> 
> 赞同：1
> 
> 时间：2012-05-04T17:09:06.093
> 
> 标签：c#, sql

我正在使用以下情况：

```
cmd.CommandText = "insert into city (id, code, name, uf) values ??(@ id, @ code, @ name, @ uf);" 
```

我想知道在提供给参数的格式字符串之后会带给我什么命令

情况：

`insert into city (id, code, name, uf) values ??(5, 5, 'BIG COUNTRY', 'MS');`- 例如

在参数输入后，我得到这个“字符串”已经输入并移动到字符串？

我的想法是创建日志，所以需要获取已经填写的参数来生成系统日志！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:14:00.833

查询被发送到带有`@`参数占位符的数据库。参数单独发送到查询...即客户端不组装完整的 SQL 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:28:28.297

如果您使用的是 SQL Server，您是否考虑过改用[SQL Server Profiler](http://msdn.microsoft.com/en-us/library/ms181091.aspx)？如果你不使用 SQL Server，其他 RBDMS 系统应该有类似的工具......

与将这种类型的日志记录添加到您的应用程序相比，它可能会更省力，而且它还可以保证您看到实际发送到数据库的内容，并且您的日志记录代码没有意外地误解和错误地记录查询。

如果您不喜欢分析，如果我们谈论的是无法处理分析开销的生产数据库，那将是合理的，您可以使用类似于以下内容的内容组装您的日志：

```
var query = cmd.CommandText;

foreach (var p in cmd.Parameters)
{
    query = query.Replace(p.ParameterName, p.Value.ToString());
} 
```

# java - 关于简单java类中的依赖注入原理

> ID：10453242
> 
> 赞同：0
> 
> 时间：2012-05-04T17:10:23.603
> 
> 标签：java

请通过简单的java类给我看一个依赖注入原理的小例子虽然我已经看过spring，但是如果我需要用简单的java类术语来解释它，那么请你通过一个简单的例子给我看。提前谢谢.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:33:58.020

When using dependency injection, you rely on the container to inject your objects dependencies instead of creating them yourself during execution. For example:

Without using dependency injection I would have to write something like this:

```
public class ATMTransferService {

    private AccountDAO accountDAO;

    public void transfer(Account from, Account to){
    AccountDAO accountDAO = new AccountDAO();
    ...Code that transfers money from one account to another and saves it...
    accountDAO.store();
} 
```

Notice that I had to instantiate accountDAO myself, and the responsibility of getting my dependancies was handled by myself.

By using spring or some other framework that allows for DI, I would transfer that responsibility tothe container, by writing something like:

```
<bean id="ATMTransfer" class="com.example.ATMTransferService" >
    <property name="accountDAO" ref="AccDAO" />
</bean>

<bean id="AccDAO" class="com.model.AccountDAO">
    <property name="sessionFactory" ref="sessFac"
</bean>

<bean id="sessFac" class="..."
     //Dependencies required for the cration fo session factory.
</bean> 
```

Now my class would like like this: public class ATMTransferService { private AccountDAO accountDAO;

```
public void transfer(Account from, Account to){
    ...Code that transfers money from one account to another and saves it...
    accountDAO.store();
} 
```

In this case, I've ommited the AccountDAO class, but it would have a dependency on a SessionFactory. You could also use a pre-defined constructor instead of using the default constructor by specifying it on the xml configuration.

I hope i haven't simplified it too much, once the benefits of dependency injection are greater than this, you could swap implementation classes by just modifying an xml configuration for starters. You also get a much cleaner code once you remove dependency creation code from your business classes. It is really a great manner to promote interface oriented programming.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:14:05.577

这篇文章有一个非常好的使用注解的基本 Java 示例

[http://simplespringtutorial.com/annotations.html](http://simplespringtutorial.com/annotations.html)

这里通过简单的 Java 示例非常清楚地介绍了 DI 的基础知识

[http://simplespringtutorial.com/di.html](http://simplespringtutorial.com/di.html)

# ios - 在地图上标记位置的更好方法

> ID：10453243
> 
> 赞同：1
> 
> 时间：2012-05-04T17:10:25.363
> 
> 标签：ios, user-interface, mapkit, mkannotation, mkannotationview

我正在制作一个 iOS 应用程序，我希望用户在地图上定期标记位置。在 iOS 中标记位置的默认方法是在地图中心或用户触摸的位置放置一个图钉（使用手势识别器）。

**然后为了准确**地将引脚标记到所需位置，用户握住引脚并可以再次放下它。如果您在 iOS 地图应用程序上执行此操作，您会知道很难以这种方式**准确**地标记位置。它看起来很酷，但在我看来需要一些试验和错误。

如果我能帮上忙，我想让这个过程更顺畅，更明显的是我的应用程序。 **那么有没有其他方法让用户在地图上标记一个位置，而不用做默认的 pin 拖放？欢迎任何建议:-)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:13:44.240

只是一个想法......您可以用手指移动地图，而不是移动图钉，并将图钉始终保持在 mapView 的中间（可能标有十字准线或其他东西）。然后就可以使用mapView的“center”方法获取Pin的坐标了。这样你就不会用手指盖住大头针/十字准线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:37:53.550

我建议您再次查看地图应用程序。当您将手指放在掉落的大头针上时，请注意地图上大头针底部的位置。在快速反弹之后，大头针实际上落在了这个确切的位置。该图钉也位于用户手指上方约 20 处。

虽然这不是最明显的，但在我看来它非常准确。足以在 Geocoder API 中查询地址，或者只是获取坐标。请记住，GPS 的精度最多为 5-10 米。放大将使用户走得更准确。

但是如果这个解决方案不是你想要的，我会在地图中心覆盖一个点，并确保它不会响应触摸，从而可以在该点下方的地图上移动。当触摸结束时，然后在该点所在的地图中间放置一个大头针。如果再次开始触摸，请从地图中弹出图钉。我不认为在地图独立移动时已经在地图上的图钉留在原地看起来不错。

# php - 如何在没有上下文路径的情况下获取 php 请求 URI？

> ID：10453248
> 
> 赞同：3
> 
> 时间：2012-05-04T17:10:50.867
> 
> 标签：php

`$_SERVER['REQUEST_URI']`返回带有上下文路径的 URI。

例如，如果一个网站的基本 URL 是`http://localhost:8080/sitename/`（即上下文路径是站点名称），并且我使用`$_SERVER['REQUEST_URI']`for `http://localhost:8080/sitename/portfolio/design`，它将返回`/sitename/portfolio/design`.

然后我将结果分解以解释我的干净 URL：

```
$page=$_SERVER['REQUEST_URI'];
$segments=explode('/',trim($page,'/'));

$sitePage = $segments[1];//portfolio 
```

这适用于我的本地测试环境，但在生产服务器上，`$segments[1]`必须成为`$segments[0]`

为了在开发和生产中使用相同的代码，有没有办法只获取这部分`/portfolio/design`，即没有上下文路径的URI？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T17:13:43.540

您可以使用虚拟主机，以便您的测试站点位于：

```
http://sitename.localhost:8080/ 
```

这样，测试服务器和生产服务器上的绝对路径（相对于 web-root）将是相同的。

操作方法取决于您使用的测试服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T23:30:11.003

我通过比较解决了这个`SCRIPT_NAME`问题`REQUEST_URI`：

```
// /sitename/index.php
$path = explode('/', trim($_SERVER['SCRIPT_NAME'], '/'));

// /sitename/portfolio/design
$uri  = explode('/', trim($_SERVER['REQUEST_URI'], '/'));

foreach ($path as $key => $val) {
    if ($val == $uri[$key]) {
        unset($uri[$key]);
    } else {
        break;
    }
}

// portfolio/design
$uri = implode('/', $uri); 
```

我猜你有 .htaccess 路由到 index.php

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:21:46.620

我会说这是做你想做的事的方法 - 获取 URI 的某些部分。

我建议您设置一个基于名称或地址的虚拟主机（假设您使用的是 Apache）。然后你可以有类似[http://127.0.0.42/portfolio/design的东西，或者在你的系统上对](http://127.0.0.42/portfolio/design)*主机*文件进行一些编辑，甚至是[http://sitename/portfolio/design](http://sitename/portfolio/design)。然后您的开发环境将类似于生产环境。

希望有帮助。

# ruby - 查看 Gem 的源代码

> ID：10453249
> 
> 赞同：52
> 
> 时间：2012-05-04T17:10:54.753
> 
> 标签：ruby, rubygems

不熟悉生态系统的 Ruby 涉猎者/新手在这里，如果这是那些超级无聊的问题之一，我们深表歉意。

有没有办法查看gem 安装的**所有**文件和/或源代码？也就是说，我只是跑了

```
$ gem install sass 
```

sass gem 现在是我本地系统的一部分

```
$ gem list --local
...
sass (3.1.16, 3.1.2)
... 
```

我想知道`gem install`命令放在我的系统上的内容。有没有可以运行的命令来查看gem 安装的 **所有文件？**

经过一番谷歌搜索，`man gem`and `gem help commands`，我发现了这个`contents`命令。

$ gem 内容 sass

**但是**，当我使用上述 sass gem 运行此命令时，我得到以下结果

```
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/engine_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/functions_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/extend_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/logger_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/css2sass_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/conversion_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/script_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/util/subset_map_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/util/multibyte_string_scanner_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/callbacks_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/importer_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/scss/css_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/scss/scss_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/scss/rx_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/util_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/script_conversion_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/less_conversion_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/cache_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/test/sass/plugin_test.rb
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/bin/sass
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/bin/sass-convert
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.16/bin/scss 
```

但是，此列表似乎不完整，因为我知道其中有文件

```
.../.rvm/gems/ruby-1.9.2-p180/gems/sass-3.1.2/lib/ 
```

为什么不`contents`显示来自的文件`lib`？

安装程序是否可以`gem`在 gems 文件夹之外安装文件？

是否有一个命令可以显示gem 安装的**所有内容？**

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-04T17:34:14.717

gem has an unpack command: [http://guides.rubygems.org/command-reference/#gem-unpack](http://guides.rubygems.org/command-reference/#gem-unpack)

```
gem unpack rake
ls rake-0.4.3/ 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-04T17:34:37.180

There are two really good ways to do this. There is another gem which allows you to open the gem and edit. This gem is call [gem-open](https://github.com/fnando/gem-open)

```
gem install gem-open 
```

then

```
gem open sass 
```

Another way is to generate your own rdocs.

```
gem rdoc sass 
```

You can then look at your rdocs by

```
gem server 
```

Also if you are using rvm, you can type `rvm info` and it will show `GEM_HOME` location. This will be where all your gems source code is.

```
cd $GEM_HOME
cd gems/sass-3.1.2/ 
```

Update:

This is the way I mostly do this now, when using bundler.

```
cd $(bundle show sass) 
```

This will be the version of sass in your Gemfile.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-04-21T11:26:28.653

我通常通过从控​​制台运行此命令来打开 gem

```
EDITOR=<your editor> bundle open <name of gem> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-05T17:08:16.297

您提到的 lib/ 目录适用于 gem 的 3.1.2 版本；`gem contents`without`--version`只会列出一个版本（*它似乎选择了最新版本，但我无法验证这总是正确的*）。你得到什么输出`gem contents --version 3.1.2 sass`？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-11T03:03:58.313

您也可以使用将 .gem 文件重命名为 .tar 并提取为 posix 存档。源代码在`lib`文件夹中。有关更多详细信息，请参阅[https://blog.srcclr.com/extracting-ruby-source-code-from-gem-packages/](https://blog.srcclr.com/extracting-ruby-source-code-from-gem-packages/)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-06T20:13:45.923

此外`gem contents`，您可能会发现另一个有用的命令是`gem environment`. 如果您的 gem 安装有多个路径，它们都将列在“GEM PATHS”标签下。

# math - 快速查找两组数字之间的交集，一组由按位条件定义，另一组由算术条件定义

> ID：10453256
> 
> 赞同：6
> 
> 时间：2012-05-04T17:11:17.903
> 
> 标签：math, computer-science, bit-manipulation

这可能覆盖得很好，但我对这个主题一无所知，所以我将使用业余术语。假设我在搞乱一些条件，每个条件都在 int 中定义一组非零数字，让我们说 8 位 int。所以对于一个位，我可能有这个：

```
11XX00XX 
```

说我想要所有有 1 的字节有 1，有 0 的有 0，而不关心 X。所以 11110000 或 11000010 满足了这一点，但 01110000 没有。很容易，对吧？对于算术条件，我只能想象有一些使用 ==、!=、>=、>、<= 或 < 与常数比较。所以我可以说：

```
X > 16 
```

所以任何大于 16 的数字（00010000）。如果我想查找上述两个示例集中的所有数字怎么办？我可以通过查看它来判断任何以 100XX 结尾的数字都符合要求，因此相交的按位部分包括 11X100XX。然后我必须包括区域 111X00XX 以填充其上方的其余范围。对？虽然我认为对于其他情况，结果不会那么整齐，对吗？无论如何，对于任何这些算术条件与任何可能的按位条件，这背后的算法是什么。肯定有一般情况！

假设有一个，而且可能很明显，如果事情变得更复杂怎么办？如果我的按位要求变为：

```
11AA00XX 
```

标有 A 的任何内容都必须相同。所以 110000XX 或 111100XX，但不是 111000XX。对于任意数量和任意位置的任意数量的相同位“类型”（A、B、C 等），通过算术比较解决交集的最佳方法是什么？有吗？

我认为这些按位运算是一种单一的比较运算/分支，就像算法的设置方式一样。所以也许一个是所有常量，当某个字节 B 01110000 与它们进行“与”运算时，结果为 00110000。所以那个常量区域，也就是我的“按位条件”，将是 X011XXXX，因为 X011XXXX AND 01110000 = 00110000 . 我所有的“按位条件”都是由 AND、OR 和 XOR 等运算的反转形成的。不确定是否会包含 NAND 之类的东西。这可能会限制实际可能的条件，也许？如果是这样，那么我不在乎那些类型的条件。

很抱歉解释的曲折尝试。我在做什么有名字吗？看起来它在 CS 中很受欢迎，所以一个名字可以让我读到一些关于这个主题的好书。但我主要是在寻找一个好的算法来解决这个问题。我最终将在交叉路口使用超过 2 个东西（可能有几十个或更多），所以解决它的方法可以很好地扩展将是一个巨大的优势。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T19:10:14.060

## 按位

好的，所以我们看一下按位运算，因为这是做你想做的最有效的方法。为清楚起见（和参考），转换为十进制的按位值是

```
00000001 =   1
00000010 =   2
00000100 =   4
00001000 =   8
00010000 =  16
00100000 =  32
01000000 =  64
10000000 = 128 
```

现在，给定`11XX00XX`变量的位模式，`x`我们将执行以下检查：

```
x AND 128 == true
x AND 64  == true
x AND 8   == false
x AND 4   == false 
```

如果所有这些条件都为真，则该值与模式匹配。本质上，您正在检查以下条件：

```
1XXXXXXX AND 10000000 == true
X1XXXXXX AND 01000000 == true
XXXX0XXX AND 00001000 == false
XXXXX0XX AND 00000100 == false 
```

用编程语言的说法把它放在一起（我将使用 C#），你会寻找

```
if ((x && 128) && (x && 64) && !(x && 8) && !(x && 4))  
{
    // We have a match
} 
```

对于更复杂的 11AA00XX 位模式，您将添加以下条件：

```
NOT ((x AND 32) XOR (x AND 16)) == true 
```

这样做是首先检查`x AND 32`，根据 in 中该位的值返回 0 或 1 `x`。然后，它对另一位进行相同的检查，`x AND 16`. 该`XOR`操作检查位的差异，如果位不同则返回 1，如果位相同则返回 0。从那里开始，因为如果它们相同，我们想返回 1，我们`NOT`整个子句。如果位相同，这将返回 1。

* * *

## 算术

在算术方面，您会考虑使用除法和模运算的组合来隔离有问题的位。要使用除法，您首先要找到数字可以被除以的最大可能的 2 次方。换句话说，如果有`x=65`，则 2 的最高幂是 64。

一旦你完成了除法，你就可以使用模数来取除法后的余数。如上例所示，给定`x=65`, `x MOD 64 == 1`。使用该数字，您重复之前的操作，找到 2 的最高幂，然后继续直到模数返回 0。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T10:44:23.273

扩展一下saluce的答案：

**位测试**

您可以构建测试模式，因此您不需要单独检查每一位（测试整数比测试一位更快，尤其是一次测试整数就像好）：

```
testOnes = 128 & 64 // the bits we want to be 1
testZeros = ~(8 & 4) // the bits we want to be 0, inverted 
```

然后以这种方式执行测试：

```
if (!(~(x & testOnes) & testOnes) &&
    !(~(~x | testZeros))) {
  /* match! */
} 
```

*逻辑解释*：

首先，在两者中`testOnes`，`testZeros`您都将感兴趣的位设置为 1，其余设置为 0。

```
testOnes testZeros
11000000 11110011 
```

然后`x & testOnes`将我们不想测试的所有位清零（注意和之间的区别`&`：`&&`按位`&`执行逻辑`AND`运算，而`&&`对`AND`整数执行逻辑运算）。

```
testOnes
11000000
x        x & testOnes
11110000 11000000
11000010 11000000
01010100 01000000 
```

现在我们测试为 1 的位最多可以是 1，但我们不知道它们是否都是 1：通过反转结果 ( `~(x & testOnes)`)，我们得到所有我们不关心的数字是 1 和位我们要测试的是 0（如果它们是 1）或 1（如果它们是 0）。

```
testOnes
11000000
x        ~(x & testOnes)
11110000 00111111
11000010 00111111
01010100 10111111 
```

通过`AND`对它进行按位运算，`testOnes`如果感兴趣的位在 中全为 1，则我们得到 0 `x`，否则为非零。

```
testOnes
11000000
x        ~(x & testOnes) & testOnes
11110000 00000000
11000010 00000000
01010100 10000000 
```

在这一点上，我们有： 0 如果我们想要测试 1 的所有位实际上都是 1，否则为非 0，因此我们执行一个逻辑`NOT`来将 0 变为`true`，将非 0 变为`false`。

```
x        !(~(x & testOnes) & testOnes)
11110000 true
11000010 true
01010100 false 
```

零位的测试类似，但我们需要使用按位- `OR`( `|`)，而不是按位- `AND`( `&`)。首先，我们翻转`x`，因此应该为 0 的位变为应该为 1，然后`OR`-ing 将所有不感兴趣的位变为 1，同时保留其余位；所以在这一点上，如果应该是 0 的位`x`确实为 0，则我们有全 1，否则，我们将结果再次翻转以在第一种情况下得到 0，在第二种情况下得到非 0 . 然后我们应用逻辑`NOT`（`!`）将结果转换为`true`（第一种情况）或`false`（第二种情况）。

```
testZeros
11110011
x        ~x       ~x | testZeros ~(~x | testZeros) !(~(~x | testZeros))
11110000 00001111 11111111       00000000          true
11000010 00111101 11111111       00000000          true
01010100 10101011 11111011       00000100          false 
```

注意：您需要意识到我们为每个测试执行了 4 次操作，所以总共 8 次。根据您要测试的位数，这可能仍然少于单独检查每个位。

**算术测试**

测试相等/差异很容易：`XOR`测试的数字 - 如果所有位都相等（因此数字相等），则为 0，如果至少有一位不同（因此数字不同），则为非 0。（应用`NOT`将相等的测试结果`true`，差异变为`false`。）

然而，为了测试不等式，你大部分时间都不走运，至少它适用于逻辑运算。您是正确的，可以通过逻辑运算（按位`AND`并测试 0）来检查 2 的幂（例如，您的问题中的 16），但是对于不是 2 的幂的数字，情况并非如此简单的。举个例子，让我们测试一下`x>5`：pattern 是 00000101，那么如何测试呢？如果它的前 5 个最高有效位为 1，则该数字更大，但 6 (00000110) 也更大，前 5 个位均为 0。

您可以做的最好的事情是测试该数字是否至少是该数字中最高 2 的幂的两倍（在上面的示例中为 5 的 4）。如果是，那么它比原来的大；否则，它必须至少与数字中的最高 2 次方一样多，然后对不太重要的位执行相同的测试。如您所见，操作数是根据测试数中 1 位的数量动态变化的。

**链接位**

这`XOR`是你的朋友：`XOR`如果两个位相同，则为 0，否则为 1。

我不知道执行测试的简单方法，但以下算法应该会有所帮助：

假设您需要 bits `b1`, ...,`bn`相同（全 1 或全 0），然后将所有其他位清零（参见`AND`上面的逻辑-），然后隔离测试模式中的每个位，然后将它们排列在相同的位置（为方便起见，我们将其设为最低有效位）。然后`XOR`-ing其中两个然后`XOR`-ing第三个结果等。将在每个奇数步产生一个偶数，如果原始数字中的位相同，则在每个偶数步产生奇数。您需要在每一步都进行测试，因为对于大量要测试的链接位，仅测试最终结果可能是不正确的。

```
testLinks
00110000
x        x & testLinks
11110000 00110000
11000010 00000000
01010100 00010000

x        x's bits isolated isolated bits shifted
11110000 00100000          00000001
         00010000          00000001
11000010 00000000          00000000
         00000000          00000000
01010100 00000000          00000000
         00010000          00000001

x        x's bits XOR'd result
11110000 00000000       true (1st round, even result)
11000010 00000000       true (1st round, even result)
01010100 00000001       false (1st round, odd result) 
```

注意：在类 C 语言中，`XOR`运算符是`^`.

注意：如何将位对齐到相同的位置？位移。Shift-left ( `<<`) 将所有位向左移动，“丢失”最高有效位并将 0“引入”最低有效位，实质上是将数字乘以 2；右移`>>`（ .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:13:18.423

TLDR saluce 的回答：

按位检查分别考虑单个位，而算术检查将所有位一起考虑。确实，它们符合 2 的幂，但不符合任何任意数字。

因此，如果两者都有，则需要实施两组检查。

32 位 int 的所有可能值的存储空间有点大，因此您必须每次都检查它们。只需确保您使用短路来消除重复检查，例如 x > 5 || x > 3。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T01:13:03.027

您已经定义了一个体面的 DSL 来指定掩码。我会编写一个解析器来读取该掩码并执行特定于每个唯一字符的操作。

AABBB110 = 面罩

步骤 1：将所有唯一字符提取到数组 [01AB] 中。您可以省略“X”，因为不需要任何操作。

第 2 步：遍历该数组，将您的文本掩码处理为单独的位掩码，每个唯一字符一个位掩码，将该字符位置的位替换为 1，所有其他位替换为 0。

```
Mask_0 = 00000001 = 0x01
Mask_1 = 00000110 = 0x06
Mask_A = 11000000 = 0xC0
Mask_B = 00111000 = 0x38 
```

第 3 步：将每个掩码传递给下面定义的相应函数。

```
boolean mask_zero(byte data, byte mask) {
  return (data & mask) == 0;
}

boolean mask_one(byte data, byte mask) {
  return (data & mask) == mask;
}

boolean mask_same(byte data, byte mask) {
  byte masked=data & mask;
  return (masked==0) || (masked==mask);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-13T15:07:20.587

您希望结果集采用什么格式？算术集（我们称之为 A）和按位集（我们称之为 B）都具有可快速测试的优点和易于迭代的优点。但是这些定义中的每一个都可以定义另一个不能定义的东西，所以它们的交集需要完全是另外的东西。

我要做的是分别处理测试和迭代。通过简单地使用逻辑“与”将两个集合转换为任意数学表达式（按位集合可以转换为一些按位运算，正如其他海报所描述的），可以轻松创建易于测试的定义。这很容易推广到任何类型的集合 - 只需存储对两个父集合的引用，当被问到两个集合中是否有一个数字时，只需检查两个父集合。

然而，一个任意的数学表达式根本不容易迭代。对于迭代，最简单的方法是对集合 B 进行迭代（可以通过仅更改不受集合约束的位来完成），并允许集合 A 约束结果。如果 A 使用 > 或 >=，则向下迭代（从最大数开始）并在 false 时停止以获得最大效率；如果 A 使用 < 或 <=，则向上迭代（从最小数字开始）并在 false 时停止。如果 A 使用 ==，那么只有一个数字需要检查，如果 A 使用 !=，那么任何一个方向都可以（但你不能在 false 时停止）。

请注意，按位集的行为类似于可索引的数字数组 - 例如，由 11XX00XX 定义的按位集可以视为索引范围从 0000 到 1111 的数组，索引的位适合相应的槽。这使得在集合上向上或向下迭代变得容易。集合 A 可以以类似的方式被索引，但是因为它很容易成为一个无限集合（除非受您机器的 int 值的限制，尽管它不一定是，即 BigInteger），所以迭代不是最安全的事情超过。

# javascript - 如何在不使用 jquery 发出 http 请求的情况下加载 html 文件？

> ID：10453258
> 
> 赞同：1
> 
> 时间：2012-05-04T17:11:23.603
> 
> 标签：javascript, jquery, ant, rhino

我将尽我所能总结我需要什么以及阻碍我这样做的原因。

**我需要的**

我需要将脚本标签附加到 html 文件的头部，但是在我的“构建”过程中。我正在使用 ant 作为自动化构建工具，我想避免在我的 HTML 文件中放置标记然后用 ant 替换它，或者我也想避免使用正则表达式匹配的任何中间解决方案。Waht 我真正想使用的是通过 rhino javascript 解释器运行的普通 javascript，并从 ant 任务中轻松执行它，最后动态添加脚本标签。

**是什么阻碍了我？**

无论如何，我真的不知道我可以在不发出 GET 或 POST HTTP 方法的情况下加载 html 文件。因为我正在从源代码构建我的代码，我没有它在 HTTP 服务器下，所以我希望我能找到某种方式将 HTML DOM 加载到 javascript 变量中，然后用我需要的新脚本标记编写它。

**我需要所有 DOM 操作功能，而无需呈现 HTML 文件的浏览器。**

最好的！德米安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:23:58.457

据我了解，您希望从 HTML 文件中获得一个有效的 DOM 对象，就好像您在浏览器中运行一样，但它是“离线”的吗？例如，能够在 DOM 上做一个 jQuery 选择器并对其进行编辑吗？

*   您总是可以从查看嵌入式开源浏览器 ( [http://www.chromium.org/](http://www.chromium.org/) ) 开始？
*   但我会研究 node.js，看到这个问题[Can I use jQuery with Node.js?](https://stackoverflow.com/questions/1801160/can-i-use-jquery-with-node-js)

据我了解，这将允许您在没有浏览器的情况下进行 DOM 遍历和修改

# ios - 如何像 HBO GO iPad App 一样创建多向无限/圆形滚动视图

> ID：10453259
> 
> 赞同：0
> 
> 时间：2012-05-04T17:11:29.110
> 
> 标签：ios, uiscrollview, uikit, custom-controls

我的问题本质上是它在标题中所说的——我想创建一个类似于出现在 HBO GO iPad 应用程序的“主页”选项卡下的滚动视图。

我研究了圆形/无限 UIScrollViews，但它们只讨论一个方向（水平或垂直）的无限内容，并且当滚动速度太高时会出现许多问题。所以我的问题是双重的：

A) 他们可以通过继承 UIScrollView 创建这个滚动视图吗？如果是这样，请让我知道如何？

*B）如果没有，是否有人对他们如何*创建它的起点有想法？即使在快速加速的情况下，它也运行得非常非常平稳，我正试图弄清楚他们是如何创造这个的。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:03:17.900

重新发布以获得答案;-)

该示例名为[StreetScroller](http://developer.apple.com/library/ios/samplecode/StreetScroller/Introduction/Intro.html)。

参考视频在[这里](https://developer.apple.com/videos/wwdc/2011/includes/advanced-scrollview-techniques.html#advanced-scrollview-techniques)。

我相信成功的技术将是在 2x2 或 3x3 网格中应用视频中的技术并处理双向滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-06T19:31:26.683

我已经建立了一个库，可以在各个方向提供无限滚动的视图。它使您可以非常轻松地实现您正在寻找的效果等等。当用户滚动时，框架会布置图块并让代理知道，以便它可以设置图块的演示文稿。这确实是通过子类化 UIScrollView 来完成的，就性能而言，该框架不会引入任何延迟：无论您滚动多快，都能达到 60 fps。

带有在无限滚动墙上显示 Flickr 图像的示例应用程序的框架在这​​里：[https](https://github.com/vovagalchenko/scroll-for-days) ://github.com/vovagalchenko/scroll-for-days 。此外，这里是示例应用程序的视频：[https ://cloud.box.com/s/d6bgvlot175au5a3jeh5](https://cloud.box.com/s/d6bgvlot175au5a3jeh5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:20:04.113

我不认为有一个简单的方法可以通过子类 UIScrollView

我用 UIView 和自定义手势识别器做了类似的事情，移动视图很好，它们从屏幕的一侧消失了。

我希望这可以帮助你。

# objective-c - 在 ARC 下，直接分配给 ivar 时会自动复制块吗？

> ID：10453261
> 
> 赞同：20
> 
> 时间：2012-05-04T17:11:36.253
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks, ivar

假设ARC下的代码如下，

```
typedef void (^MyResponseHandler) (NSError *error);
@interface MyClass : NSObject
{
    MyResponseHandler _ivarResponseHandler;
}

- (void)myMethod:(MyResponseHandler)responseHandler
{
    _ivarResponseHandler = responseHandler;
    ...
} 
```

问题：分配给 ivar 时，block 是否会自动复制到堆中？

[我之前的问题](https://stackoverflow.com/questions/10417851/under-arc-are-blocks-automatically-copied-when-assigned-to-an-ivar-via-the-prop)暗示它在通过`@property`. 但是，今天我使用了上面的代码并收到了一个`EXC_BAD_ACCESS`通过更改为

`_ivarResponseHandler = [responseHandler copy]`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T01:14:42.527

编辑：我之前的回答可能是错误的。

[ARC 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)中的一些节选说：

**3\. 可保留对象指针**

可保留对象指针（或可保留指针）是可保留对象指针类型（可保留类型）的值。可保留对象指针类型共有三种：

*   块指针（通过将插入符号 (^) 声明符符号应用于函数类型而形成）

**4.2\. 语义**

在评估赋值运算符时会发生赋值。语义因限定而异：

*   对于 __strong 对象，首先保留新的指针；其次，左值加载了原始语义；第三，新的指针对象以原始语义存储到左值中；最后，旧指针被释放。这不是原子执行的；面对并发加载和存储，必须使用外部同步来确保安全。

**4.4.1。对象**

如果一个对象声明为具有可保留对象所有者类型，但没有显式所有权限定符，则其类型被隐式调整为具有 __strong 限定符。

**7.5。块**

除了作为初始化 __strong 参数变量或读取 __weak 变量的一部分完成的保留之外，每当这些语义要求保留块指针类型的值时，它都具有 Block_copy 的效果。当优化器发现结果仅用作调用的参数时，它可能会删除此类副本。

所以我认为答案是*可能*的，取决于优化器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T17:23:23.407

您的问题和解决方案表明我对您其他问题的回答可能是错误的。我基于[clang Objective-C Automatic Reference Counting 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#misc.blocks)第 7.5 节的最后一段：

> 除了作为初始化`__strong`参数变量或读取`__weak`变量的一部分完成的保留之外，每当这些语义要求保留块指针类型的值时，它具有 a 的效果`Block_copy`。当优化器发现结果仅用作调用的参数时，它可能会删除此类副本。

我认为“这些语义”是指整个文档，但如果“这些语义”仅指第 7.5 节，那么 ARC 只`Block_copy`为被块捕获的块插入 a。

# java - Java中的TrueType字体渲染？

> ID：10453263
> 
> 赞同：2
> 
> 时间：2012-05-04T17:11:48.423
> 
> 标签：java, opengl, fonts, rendering

我制作了一个包含多个组件的 GUI，现在我需要用文本填充这些组件。

我的规格：

*   最好使用 LWJGL (OpenGL)
*   不是特别复杂
*   不使用任何其他外部库（LWJGL 库除外）
*   必须进行相当优化，它将在 fps 密集型 GUI 上大量使用
*   有抗锯齿的可能吗？
*   可能能够在大多数主要操作系统上运行

我怎么能在java中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:36:02.383

我会考虑使用 SVG，尤其是[Batik](http://xmlgraphics.apache.org/batik/)来管理字体。我自己在这方面做了很多工作，这有点像学习曲线。在担心性能之前，我会准备好简单地开始并找出您需要的特定功能。但在你给出更清晰的想法之前，我不确定我们能提供更多帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:42:39.103

您有三个选项：位图字体、纹理字体和矢量字体。

仅当您只想为 2D GUI 渲染文本时，[位图字体才有用。](http://nehe.gamedev.net/tutorial/bitmap_fonts/17002/)但是，如果您使用位图字体，则无法进行抗锯齿。另一方面，它们非常易于使用并且可以快速渲染。

纹理字体允许抗锯齿，但同样它们最适合 2D GUI。如果您想在世界空间中渲染文本，由于正在发生纹理缩放，您会得到很多伪像。要使用纹理字体，您必须创建一个纹理图集，其中包含您要使用的特定字体的每个字符的图像（通常您需要将字符集限制为 ASCII，否则您的纹理会太大） . 您可以使用 AWT 创建一个矩形图像，其中包含您需要的所有字符。然后，您可以通过为该角色渲染具有适当纹理坐标的四边形来渲染该角色。建议使用亮度 alpha 纹理，以便您可以将其与您希望文本所在的颜色混合。

如果您想在世界空间中渲染文本，矢量字体可为您提供最佳效果。他们会给你完美的字体渲染，包括。字距调整，但渲染成本更高。我通常的方法是为我要渲染的每个字符串创建一个路径（使用 AWT），展平该路径，然后使用 GLU tesselator 对其进行跟踪。这将为您提供一堆三角形、三角形条和三角形风扇，您可以将它们放入 VBO 以获得最佳性能。然后，您可以通过为 VBO 发出适当的渲染命令来渲染该字符串。您可以通过为每个字符串使用显示列表来进一步优化它。这样，您只需为每个字符串发送一个命令，但当然这仍然比其他方法更昂贵。

# android - 模拟 d-pad 中心键到 android 手机的触摸板

> ID：10453281
> 
> 赞同：1
> 
> 时间：2012-05-04T17:13:27.017
> 
> 标签：android, touchpad

你如何用触摸板模拟“d-pad中心键”？我正在使用三星 Galaxy Y / GTS5360

# java - 如何将我自己的连接池的初始化放在 struts-config.xml 中？

> ID：10453285
> 
> 赞同：0
> 
> 时间：2012-05-04T17:13:53.237
> 
> 标签：java, servlets, struts, connection-pooling, struts-config

我有自己的连接池类

```
public class ConnectionPool {

private static final Logger log = Logger.getLogger(ConnectionPool.class);

public final static String PROPERTIES_FILENAME = "config";
public static final int DEFAULT_POOL_SIZE = 10;

//single instance
private static ConnectionPool instatance;
//queue of free connections
private BlockingQueue<Connection> connectionQueue;

public ConnectionPool(String driver, String url, String user,
        String password, int poolSize)
        throws ClassNotFoundException, DAOException{
    try{
        Class.forName(driver);
        connectionQueue = new ArrayBlockingQueue<Connection>(poolSize);
        for(int i = 0; i < poolSize ;i++){
            Connection connection = DriverManager.getConnection(url, user, password);
            connectionQueue.offer(connection);
        }
    }
    catch (SQLException e) {
        log.error(e);
        throw new DAOException(e.getMessage());
    }
}

public static void init() throws DAOException{
    try {
    if(instatance == null){

        String driver  =  ConfigurationManager.
        getInstance().getProperty("DATABASE_DRIVER_NAME");
        String url = ConfigurationManager.
        getInstance().getProperty("DATABASE_URL");
        String user = ConfigurationManager.
        getInstance().getProperty("DATABASE_USER");
        String password = ConfigurationManager.
        getInstance().getProperty("DATABASE_PASSWORD");
        String poolSizeStr = ConfigurationManager.
        getInstance().getProperty("DATABASE_POOLSIZE");
        int poolSize = (poolSizeStr != null) ?
                Integer.parseInt(poolSizeStr) : DEFAULT_POOL_SIZE;

        log.info("Trying to create pool of connections...");

        instatance = new ConnectionPool(driver,url,user,password,poolSize);

        log.info("Connection pool initialized");
    }
    }catch (ClassNotFoundException e) {
        log.error(e);
    } catch (SQLException e) {
        log.error(e);
        throw new DAOException(e.getMessage());
    }
}

public static void dispose() throws DAOException {
    try {
        if(instatance != null){
            instatance.clearConnectionQueue();
            instatance = null;
            log.info("Connection queue is disposed");
        }
    } catch (DAOException e) {
        log.info(e.getMessage());
        throw new DAOException(e.getMessage());
    }
}

public static ConnectionPool getInstance(){
    return instatance;
}

public Connection takeConnection() {
    Connection connection = null;
    try{
        connection = connectionQueue.take();
    }catch (InterruptedException e) {
        log.info("Free connection waiting interrupted.Returned null connection");
        log.error(e);
    }
    return connection;
}

public void releaseConnection(Connection connection) throws DAOException {
    try {

        if(!connection.isClosed()){
            if(!connectionQueue.offer(connection)){
                log.info("Connections is not added.");
            }
        }
        else{
            log.info("Trying to release closed connection.");
        }
    } catch (SQLException e) {
        log.info("SQLException at connection isClosed(). Connection is not added");
        throw new DAOException(e.getMessage());
    }
}

private void clearConnectionQueue() throws DAOException{
    try {
        Connection connection;
        while((connection = connectionQueue.poll()) != null){

            if(!connection.getAutoCommit()){
                connection.commit();
                connection.close();
            }
    }
    } catch (SQLException e) {
        log.info(e.getMessage());
        throw new DAOException(e.getMessage());
    }
} 
```

并且需要在struts servlet 的生命周期开始时对其进行初始化。如果它是常规的 servlet，我会使用`init()`不思考的方法，并且我已经做到了：

```
public class LinkAction extends DispatchAction {
private static final String PARAM_NAME_LANGUAGE = "language";

/**
 * This is the Struts action method called on
 * http://.../actionPath?method=myAction1,
 * where "method" is the value specified in <action> element : 
 * ( <action parameter="method" .../> )
 */
private static ConnectionPool connectionPool =
    ConnectionPool.getInstance();

public void init(){
    try {
        if(connectionPool == null){

            ConnectionPool.init();
            connectionPool = ConnectionPool.getInstance();
        }

    } catch (DAOException e) {
        log.error(e);
    }
}

public ActionForward newsList(ActionMapping mapping, ActionForm  form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    return mapping.findForward("newsList");
}

public ActionForward addNews(ActionMapping mapping, ActionForm  form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    return mapping.findForward("addNews");
}

public ActionForward changeLocale(ActionMapping mapping, ActionForm  form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {
    String localeValue = request.getParameter("localeValue");
    request.getSession().setAttribute(PARAM_NAME_LANGUAGE, localeValue);
    return mapping.findForward("newsList");
}

} 
```

但这不适用于 Struts Action，所以我决定可以在`struts-config.xml`or中完成`web.xml`。但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:38:44.680

我认为你应该使用 ServletContextListener：

[http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)

即使使用另一个框架，它也是放置数据源初始化代码的好地方。每次您的应用程序启动并运行时都会调用此侦听器，以便您可以将数据源放入上下文属性并在必要时恢复它。

# meteor - 如何在模板创建的元素上触发 JQuery .draggable()？

> ID：10453291
> 
> 赞同：7
> 
> 时间：2012-05-04T17:14:10.913
> 
> 标签：meteor

我在 Html 文件中有一个标准模板，例如：

```
<template name="cards">
  {{#each all_cards}}
    {{> card_item}}
  {{/each}}
</template>
<template name="card_item">
  <div class="card" style="left:{{position.x}}px; top:{{position.y}}px">
    {{title}}
  </div>
</template> 
```

我想让卡片（css选择器.card）变得可以用JQuery拖动。现在，由于 Meteor 使用模板自动更新 DOM，我何时以及如何知道在哪里调用 .draggable() ？

编辑：到目前为止，这是我的解决方案，它通过摆动动画（使用 CSS3）使其他客户端上的待处理动作可见：

```
Template.card_item.events = {
'mouseover .card': function (e) {
    var $target = $(e.target);
    var $cardContainer = $target.hasClass('card') ? $target : $target.parents('.card');     
    $cardContainer.draggable({containment: "parent", distance: 3});
},
'dragstart .card': function (e) {
    Session.set("dragging_id", e.target.id);
    $(e.target).addClass("drag");
    pos = $(e.target).position();
    Events.insert({type: "dragstart", id:e.target.id, left: pos.left, top: pos.top});       
},
'dragstop .card': function (e) {
    pos = $(e.target).position();
    Events.insert({type: "dragstop", id:e.target.id, left: pos.left, top: pos.top});        
    Cards.update(e.target.id, {$set: {left:pos.left, top:pos.top}});
    Session.set("dragging_id", null);
}
}

Events.find().observe({
added: function(event) {
    if (event.type == "dragstart" && !Session.equals("dragging_id", event.id)) {
        $("#"+event.id).draggable({disabled: true});
        $("#"+event.id).addClass("wobble");             
    }
    if (event.type == "dragstop" && !Session.equals("dragging_id", event.id)) {
        $("#"+event.id).animate({left: event.left, top: event.top}, 250);           
        Events.remove({id:this.id});  
        $("#"+event.id).draggable({disabled: false});
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T03:11:26.117

**编辑：这种方法似乎不适用于最新版本的 Meteor，例如 v0.5.0。请参阅下面的[评论](https://stackoverflow.com/questions/10453291/how-to-trigger-jquery-draggable-on-elements-created-by-templates/10509361#comment17553949_10509361)。**

看起来我们正在做类似的事情！我有[一个简单的 Magic: The Gathering 应用程序的工作概念证明](https://github.com/emmettnicholas/MeteorTheGathering)。这是我目前拖动实现的方式：

在`<head>`您的一个 html 文件的一个部分中，包含 jQuery UI 脚本：

```
<script src="jquery-ui-1.8.20.custom.min.js"></script> 
```

然后，在一个 js 文件中，确保元素在鼠标悬停时变为可拖动的（*注意：这在触摸屏上是次优的，因为它需要两次触摸才能拖动......我正在寻找更好的触摸屏解决方案*）：

```
Template.card_item.events['mouseover .card, touchstart .card'] = function (e) {
    var $target = $(e.target);
    if (!$target.data('isDraggable')) {
      $target.data('isDraggable', true).draggable();
    }
}; 
```

最后，处理[`drag`和`dragstop`事件](http://jqueryui.com/demos/draggable/#events)：

```
var prevDraggedTime = 0

Template.card_item.events['drag .card'] = function (e) {
    // get the cardId from e
    var now = new Date().getTime();
    var position;

    if (now - prevDraggedTime > 250) {
        position = $(e.target).position();
        Cards.update(cardId, {$set: {x: position.top, y: position.left}});
        prevDraggedTime = now;
    }
}

Template.card_item.events['dragstop .card'] = function (e) {
    // get the cardId from e
    var position = $(e.target).position();
    Cards.update(cardId, {$set: {x: position.top, y: position.left}});
} 
```

# c# - 迭代绑定变量？

> ID：10453297
> 
> 赞同：0
> 
> 时间：2012-05-04T17:14:36.250
> 
> 标签：c#, language-agnostic, iteration

这是非特定语言的，但我将使用`C#`. 我经常面临这样一个问题，即我需要在至少一个参数的任何给定迭代中添加一个`parameter`，`object`并且我总是想出一个*蹩脚*的临时性`list`或`array`某种伴随着保持它正确相关的问题.

因此，请耐心等待以下示例：

*   有没有更简单更好的方法可以在升 C 中做到这一点？

    ```
    List<String> storeStr;

    void AssignStringListWithNewUniqueStr (List<String> aList) {
        foreach (String str in aList) {
            storeStr.add(str);
            str = AProcedureToGenerateNewUniqueStr();
        }
    }

    void PrintStringListWithNewUniqueStr (List<String> aList) {
        int i = 0;
        foreach (String str in aList) {
            print(str + storeStr[i]);
            i++;
        }
    } 
    ```

请注意，仅因为我正在迭代未更改*的*`aList`. 当询问“更简单和更好的方法”时，我的意思是它还应该确保`storeStr`始终与它的等价物*相关联*`aList`，同时保持它尽可能简短和简单。`List`也可以是任何类型的`array`or `object`。

* * *

*   是否有任何语言可以实现这样的*事情*？它必须给出与上述相同的结果。

    ```
    IterationBound<String> storeStr;

    void AssignStringListWithNewUniqueStr (List<String> aList) {
        foreach (String str in aList) {
            storeStr = str;
            str = AProcedureToGenerateNewUniqueStr();
        }
    }

    void PrintStringListWithNewUniqueStr (List<String> aList) {
        foreach (String str in aList) {
            print(str + storeStr);
        }
    } 
    ```

在这种情况下，虚构的“ `IterationBound`”种类将保证列表和新参数之间的*相关性*（在某种程度上，就像垃圾收集器保证分配一样）。它会以某种方式注意到它是在迭代中创建的，并将其自身与该特定索引相关联（当然，无论那里的语法是否会更丑陋）。然后，当它在另一个迭代中再次回调并且它已经创建或存储在该特定索引中时，它将检索该迭代的这个特定值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:19:01.020

为什么不简单地将您的可枚举项投射到新的形式中呢？

```
var combination = aList
      .Select(x => new { Initial = x, Addition = AProcedureToGenerateNewUniqueStr() })
      .ToList()
      .ForEach(x =>
           { 
               print(x.Initial + x.Addition);
           }); 
```

这样，您就可以使每个元素与新数据相关联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:20:58.183

```
aList.ForEach(x => print(x + AProcedureToGeneratorNewUniqueString())); 
```

# windows - 64位资源管理器插件注册问题

> ID：10453298
> 
> 赞同：0
> 
> 时间：2012-05-04T17:14:38.200
> 
> 标签：windows, com, 64-bit, regsvr32

我为资源管理器编写了一个 COM Dll，它扩展了 Windows 上下文菜单，通过 regsvr32 注册在 32 位 Windows 上可以正常工作，但在 64 位上它在没有任何线索的情况下无法工作。regsvr32 报告注册成功，尽管 Dll 不工作。我试图从 SysWow64 目录以及从 system32 调用 regsvr32，据我所知，这不是原因。检查注册表 - 当然，所有内容都写入注册表到 wow3264Node（因为安装是在 64 位操作系统上）。仍然没有任何反应。目前很难提供任何具体信息。任何人都可以建议或指出此类行为的其他可能原因。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:28:51.763

您需要为 64 位编译 DLL。注册码写入的事实`Wow6432Node`表明您的 DLL 是 32 位的。在 64 位操作系统上，资源管理器是 64 位进程，因此只能加载 64 位 shell 扩展。

不要忘记在 64 位机器上注册 32 位和 64 位版本的 shell 扩展，以便任何 32 位程序都可以看到您的 shell 扩展。你这样做使用`C:\Windows\SysWOW64\regsvr32`

# windows-7 - 在 Windows 7 中为特定程序停用 UAC

> ID：10453299
> 
> 赞同：0
> 
> 时间：2012-05-04T17:15:00.620
> 
> 标签：windows-7, scheduled-tasks, uac

我有一个应该每晚运行的程序。每次启动时都会启动另一个。

两个程序都会触发 UAC-Window。至少对于每晚安排的程序，这是非常糟糕的，因为我的电脑整晚都在等待我对 UAC 对话的确认。目前我能够确认它，该程序导致速度大大降低，我还是取消了它。

那么有没有一种方法，Windows 将启动这 2 个程序，而不会每次都提示我，而通常不会停用 UAC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:30:15.290

查看以下文章，它也适用于 Windows 7：

[为您信任的 Vista 应用程序选择性地禁用 UAC](http://www.techrepublic.com/blog/window-on-windows/selectively-disable-uac-for-your-trusted-vista-applications/635)。

# javascript - jQuery，我如何通过选中复选框来调用 url

> ID：10453300
> 
> 赞同：2
> 
> 时间：2012-05-04T17:15:05.783
> 
> 标签：javascript, jquery

我有这个：

```
<span id="social">
    Facebook:
    <input id="id_connected_to_facebook" type="checkbox" name="connected_to_facebook">
    <br>
    Twitter:
    <input id="id_connected_to_twitter" type="checkbox" name="connected_to_twitter">
    <br>
</span> 
```

并且使用 jQuery，我想为所有 4 种可能的操作调用不同的 URL（1：检查 facebook，2：取消选中 facebook，3：检查 twitter，4：取消选中 twitter）。

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T17:20:55.447

我不确定你要做什么。如果您想在单击复选框时重定向到页面，您可以执行此操作

使用 data 属性指定要在复选框元素中调用的 url

```
<input type="checkbox" data-target="http://www.facebook.com" /> 
```

脚本是

```
$(function(){
  $("input[type='checkbox']").change(function(){
  var item=$(this);    
  if(item.is(":checked"))
  {
    window.location.href= item.data("target")
  }    
 });
}); 
```

示例 JsFiddle：http: [//jsfiddle.net/45aZ8/2/](http://jsfiddle.net/45aZ8/2/)

**编辑**：如果要在新窗口中打开它，请使用`window.open`方法而不是更新当前 url

代替

```
window.location.href= item.data("target") 
```

和

```
window.open(item.data("target") 
```

[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

**编辑 3**：**基于评论**：如果您想在 Checked 状态下加载一个 url 并在 uncheck 状态下加载另一个 url，您可以这样做

为每个复选框提供 2 个数据属性。一个用于选中状态，一个用于未选中

```
Facebook<input type="checkbox" data-target="http://www.facebook.com" data-target-off="http://www.google.com"  /> <br/>
Twitter<input type="checkbox" data-target="http://www.twitter.com" data-target-off="http://www.asp.net"  /> <br/> 
```

脚本是

```
$(function(){
  $("input[type='checkbox']").change(function(){
  var item=$(this);    
  if(item.is(":checked"))
  {
       window.open(item.data("target"))   
  }
  else
  {
      window.open(item.data("target-off"))   
  }        
 });
}) 
```

工作样本：http: [//jsfiddle.net/45aZ8/5/](http://jsfiddle.net/45aZ8/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:16:51.417

```
$('input[type="checkbox"]').change(function() {
  if($(this).is(':checked')) {
     if($(this).attr('id') == 'connected_to_facebook') {
        // possibility: 1
     } else {
       // possibility: 3
     }
  } else {
    if($(this).attr('id') == 'connected_to_facebook') {
       // possibility: 2
     } else {
       // possibility: 4
     }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:21:43.617

```
$('#id_connected_to_facebook, #id_connected_to_twitter').click(function(){
   $.post('http://target.url', {this.id:this.checked});
}); 
```

现在您将进入 $_POST id_connected_to_facebook 或 id_connected_to_twitter 并且作为值它将是 1 或 0

# eclipse - 调试 perl CGI

> ID：10453302
> 
> 赞同：2
> 
> 时间：2012-05-04T17:15:15.380
> 
> 标签：eclipse, perl, debugging, cgi, xampp

我正在使用我创建的 Web 表单作为查询 MySQL 数据库的接口。我编写了一些 perl CGI 脚本来处理查询。但是我没有得到想要的输出，所以我需要调试脚本。我怎么做？我主要使用 Eclipse 来调试 perl，但现在我将 Web 表单参数（复选框、列表框）作为脚本的输入。有什么方法可以从网页传入输入，然后在 Eclipse 中调试脚本？或者在这种情况下还有其他调试方法吗？希望我已经说清楚了。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T18:15:40.827

我使用[这个 Perl 模块](https://github.com/DeeNewcum/individual_scripts/blob/master/perl_modules/capture_CGI_input.pm)进行 CGI 调试。它允许您在从普通浏览器运行时捕获发送到 CGI 脚本的所有数据。然后，它允许您使用捕获的数据从任何地方（命令行、调试器内）“重播”脚本。

[CGI::Inspect](https://metacpan.org/module/CGI%3a%3aInspect)看起来很有希望，尽管我自己还没有尝试过。

在正常的 CGI 会话期间使用[Devel::DumpTrace](https://metacpan.org/module/Devel%3a%3aDumpTrace)（通过 DUMPTRACE_FH 将数据记录到文件中）是一种进行深入调试的方法，而无需使用实际的调试器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T18:53:31.313

是的，当然你可以使用 Apache 的错误日志来做调试；这是一种非常懒惰但高效的工作方式。

您提到您使用 Eclipse，所以我假设您也使用 EPIC 插件进行 Perl 开发。查看本章，了解如何配置 Eclipse/EPIC 以调试 CGI：

[http://www.epic-ide.org/guide/ch06s02.php](http://www.epic-ide.org/guide/ch06s02.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T17:29:46.473

目前尚不清楚您究竟要调试什么，但有一些提示：

*   在 Apache 下运行时，警告会转到`error.log`，因此您可以在那里跟踪您的变量。
*   CGI.pm 模块允许您[从命令行（带参数）运行 CGI 脚本](http://p3rl.org/CGI#DEBUGGING)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T17:30:31.297

我希望 Eclipse 有一种模拟 CGI 的方法。

我使用 ActiveState 的 Komodo IDE，它可以模拟 CGI（包括输入参数），所以我可以推荐它作为用于此目的的好工具。不过，IDE 不是免费的，但如果您要经常这样做，请考虑这是一项投资。（我不隶属于 ActiveState - 只是一个快乐的客户。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T03:46:30.087

如果你有一个假设的用 perl 编写的 CGI 程序，名为 webawesome.pl，并且你想向它传递两个参数：名称和年龄，你可以使用这样的 shell 命令：

```
prompt> perl -d webawesome.pl name=sifl age=21 
```

现在您在 perl 调试器中，您可以单步执行程序，命令行中的键/值对将作为表单参数由 CGI.pm 加载

在 Eclipse 中设置这些命令行开关作为练习留给读者，因为我是一个毫不掩饰的 vi 用户，并且两三年没有使用 eclipse。我知道有设置运行/调试选项的对话框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T17:21:54.433

您可以使用 Firebug 或 Fiddler 来查看您从表单发出的请求，以确保您发送的正是您认为的内容。您还可以打开一个文件`open(fh,">>debug.txt")`并打印出您对日志文件进行的 sql 调用。我还建议学习 Data::Dumper 它将漂亮地打印出对象，以便您可以看到它们的结构。

# php - 从 CSV 中提取数据并生成 http_build_query 的脚本

> ID：10453304
> 
> 赞同：0
> 
> 时间：2012-05-04T17:15:22.647
> 
> 标签：php, csv

我正在尝试从 CSV 文件中提取数据并生成 http_build_query 以作为 http 帖子提交

我的数据如下所示：

```
First,Last,Address,City,St,Zip,email,phone,dob,optindate,ipaddress,url
Abbey,Johnson,4004 S. Parker Dr. 206,Sioux Falls,SD,55106,abbey@email.com,6053451657,06/18/1924,4/19/2008 11:58:34,12.174.252.216,http://www.ecoupons.com/ 
```

我的代码如下所示：

```
<?PHP

$file_handle = fopen("test.2", "r");

while (!feof($file_handle) ) {

$line_of_text = fgetcsv($file_handle, 1024);

$data = array('firstname' => "$line_of_text[0]",
            'lastname' => "$line_of_text[1]",
            'address' => "$line_of_text[2]",);

echo http_build_query($data) . "\n";

}

fclose($file_handle);

?> 
```

我的结果是：

```
firstname=Abbey&lastname=Johnson&address=4004+S.+Louise+Ave.+206
firstname=&lastname=&address= 
```

我不确定为什么创建没有数据的第二行以及如何在数组数据中保留空格？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:32:25.193

您的 CSV 似乎确实有效或可读（看不到新行），所以我使用了我的一个简单的

您的地址包含`,`影响`fgetcsv`读取文件的方式

尝试

```
$fp= fopen("log.txt", "r");

while (!feof($fp) ) {
    list($firstname,$lastname,$address) = fgetcsv($fp);
    $data = array('firstname' => $firstname,
                'lastname' => $lastname,
                'address' => $address);
    echo http_build_query($data) . PHP_EOL;

} 
```

输出

```
 firstname=Abbey&lastname=Johnso&address=4004+S.+Louise+Ave.+206 
```

# web-scraping - 如何保护我的网站免受 HTTrack 或其他软件的翻录？

> ID：10453306
> 
> 赞同：13
> 
> 时间：2012-05-04T17:15:38.820
> 
> 标签：web-scraping, web, ripping

我最近获得了[Themeforest](http://themeforest.net)上批准的网站模板。我在我的网站上获得了太多流量，并注意到我在 Themeforest 上的演示被 HTTrack 等一些软件破坏了。如果它继续，该项目的销售最终可能会减少。

**那么，有什么办法可以阻止那些用户翻录演示吗？**

仅供参考，我没有使用任何类型的 VPS 或个人服务器。我只是将我的文件托管在共享主机上。

如果有人帮助我解决这个问题，我会很高兴。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-02-09T10:42:01.600

至少，您可以尝试其中的任何一种，尽管用户代理可能会被欺骗。

(1) 在 .htaccess 中

```
RewriteCond %{HTTP_USER_AGENT} ^HTTrack [OR]
RewriteCond %{HTTP_USER_AGENT} ^SiteSucker [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebZip [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebCopier [OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus
RewriteRule ^.*$ no_download.html [L] 
```

通过添加 `RewriteCond %{HTTP_USER_AGENT} ^Other_Spam_bot`后添加额外的 Spam_bot`[OR]`

(2) 在 robots.txt

```
User-agent: AhrefsBot
User-agent: Baiduspider
User-agent: EasouSpider
User-agent: Ezooms
User-agent: YandexBot
User-agent: MJ12bot
User-agent: SiteSucker
User-agent: HTTrack
Disallow: / 
```

通过添加`User-agent: Other_Spam_bot`之前添加额外的 Spam_bot`Disallow: /`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T17:17:44.357

不，您对此无能为力。如果您有需要保护的演示，请为其添加水印。但是，水印是可以去除的，有人可能会认为水印在实际产品中。

我会使用[TinEye.com 之](http://www.tineye.com)类的网站，并每月查找未经许可使用您的图像的情况。你可以追捕窃取你作品的人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-05T11:33:03.480

将此代码放入您的 .htaccess 文件中。它可以保护您的网站免受所有克隆软件的侵害。

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_USER_AGENT} almaden [OR]
RewriteCond %{HTTP_USER_AGENT} ^Anarchie [OR]
RewriteCond %{HTTP_USER_AGENT} ^ASPSeek [OR]
RewriteCond %{HTTP_USER_AGENT} ^attach [OR]
RewriteCond %{HTTP_USER_AGENT} ^autoemailspider [OR]
RewriteCond %{HTTP_USER_AGENT} ^BackWeb [OR]
RewriteCond %{HTTP_USER_AGENT} ^Bandit [OR]
RewriteCond %{HTTP_USER_AGENT} ^BatchFTP [OR]
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [OR]
RewriteCond %{HTTP_USER_AGENT} ^Bot\ mailto:craftbot@yahoo.com [OR]
RewriteCond %{HTTP_USER_AGENT} ^Buddy [OR]
RewriteCond %{HTTP_USER_AGENT} ^bumblebee [OR]
RewriteCond %{HTTP_USER_AGENT} ^CherryPicker [OR]
RewriteCond %{HTTP_USER_AGENT} ^ChinaClaw [OR]
RewriteCond %{HTTP_USER_AGENT} ^CICC [OR]
RewriteCond %{HTTP_USER_AGENT} ^Collector [OR]
RewriteCond %{HTTP_USER_AGENT} ^Copier [OR]
RewriteCond %{HTTP_USER_AGENT} ^Crescent [OR]
RewriteCond %{HTTP_USER_AGENT} ^Custo [OR]
RewriteCond %{HTTP_USER_AGENT} ^DA [OR]
RewriteCond %{HTTP_USER_AGENT} ^DIIbot [OR]
RewriteCond %{HTTP_USER_AGENT} ^DISCo [OR]
RewriteCond %{HTTP_USER_AGENT} ^DISCo\ Pump [OR]
RewriteCond %{HTTP_USER_AGENT} ^Download\ Demon [OR]
RewriteCond %{HTTP_USER_AGENT} ^Download\ Wonder [OR]
RewriteCond %{HTTP_USER_AGENT} ^Downloader [OR]
RewriteCond %{HTTP_USER_AGENT} ^Drip [OR]
RewriteCond %{HTTP_USER_AGENT} ^DSurf15a [OR]
RewriteCond %{HTTP_USER_AGENT} ^eCatch [OR]
RewriteCond %{HTTP_USER_AGENT} ^EasyDL/2.99 [OR]
RewriteCond %{HTTP_USER_AGENT} ^EirGrabber [OR]
RewriteCond %{HTTP_USER_AGENT} email [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailCollector [OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailSiphon [OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailWolf [OR]
RewriteCond %{HTTP_USER_AGENT} ^Express\ WebPictures [OR]
RewriteCond %{HTTP_USER_AGENT} ^ExtractorPro [OR]
RewriteCond %{HTTP_USER_AGENT} ^EyeNetIE [OR]
RewriteCond %{HTTP_USER_AGENT} ^FileHound [OR]
RewriteCond %{HTTP_USER_AGENT} ^FlashGet [OR]
RewriteCond %{HTTP_USER_AGENT} FrontPage [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^GetRight [OR]
RewriteCond %{HTTP_USER_AGENT} ^GetSmart [OR]
RewriteCond %{HTTP_USER_AGENT} ^GetWeb! [OR]
RewriteCond %{HTTP_USER_AGENT} ^gigabaz [OR]
RewriteCond %{HTTP_USER_AGENT} ^Go\!Zilla [OR]
RewriteCond %{HTTP_USER_AGENT} ^Go!Zilla [OR]
RewriteCond %{HTTP_USER_AGENT} ^Go-Ahead-Got-It [OR]
RewriteCond %{HTTP_USER_AGENT} ^gotit [OR]
RewriteCond %{HTTP_USER_AGENT} ^Grabber [OR]
RewriteCond %{HTTP_USER_AGENT} ^GrabNet [OR]
RewriteCond %{HTTP_USER_AGENT} ^Grafula [OR]
RewriteCond %{HTTP_USER_AGENT} ^grub-client [OR]
RewriteCond %{HTTP_USER_AGENT} ^HMView [OR]
RewriteCond %{HTTP_USER_AGENT} ^HTTrack [OR]
RewriteCond %{HTTP_USER_AGENT} ^httpdown [OR]
RewriteCond %{HTTP_USER_AGENT} .*httrack.* [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^ia_archiver [OR]
RewriteCond %{HTTP_USER_AGENT} ^Image\ Stripper [OR]
RewriteCond %{HTTP_USER_AGENT} ^Image\ Sucker [OR]
RewriteCond %{HTTP_USER_AGENT} ^Indy*Library [OR]
RewriteCond %{HTTP_USER_AGENT} Indy\ Library [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^InterGET [OR]
RewriteCond %{HTTP_USER_AGENT} ^InternetLinkagent [OR]
RewriteCond %{HTTP_USER_AGENT} ^Internet\ Ninja [OR]
RewriteCond %{HTTP_USER_AGENT} ^InternetSeer.com [OR]
RewriteCond %{HTTP_USER_AGENT} ^Iria [OR]
RewriteCond %{HTTP_USER_AGENT} ^JBH*agent [OR]
RewriteCond %{HTTP_USER_AGENT} ^JetCar [OR]
RewriteCond %{HTTP_USER_AGENT} ^JOC\ Web\ Spider [OR]
RewriteCond %{HTTP_USER_AGENT} ^JustView [OR]
RewriteCond %{HTTP_USER_AGENT} ^larbin [OR]
RewriteCond %{HTTP_USER_AGENT} ^LeechFTP [OR]
RewriteCond %{HTTP_USER_AGENT} ^LexiBot [OR]
RewriteCond %{HTTP_USER_AGENT} ^lftp [OR]
RewriteCond %{HTTP_USER_AGENT} ^Link*Sleuth [OR]
RewriteCond %{HTTP_USER_AGENT} ^likse [OR]
RewriteCond %{HTTP_USER_AGENT} ^Link [OR]
RewriteCond %{HTTP_USER_AGENT} ^LinkWalker [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mag-Net [OR]
RewriteCond %{HTTP_USER_AGENT} ^Magnet [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mass\ Downloader [OR]
RewriteCond %{HTTP_USER_AGENT} ^Memo [OR]
RewriteCond %{HTTP_USER_AGENT} ^Microsoft.URL [OR]
RewriteCond %{HTTP_USER_AGENT} ^MIDown\ tool [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mirror [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mister\ PiX [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla.*Indy [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla.*NEWT [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla*MSIECrawler [OR]
RewriteCond %{HTTP_USER_AGENT} ^MS\ FrontPage* [OR]
RewriteCond %{HTTP_USER_AGENT} ^MSFrontPage [OR]
RewriteCond %{HTTP_USER_AGENT} ^MSIECrawler [OR]
RewriteCond %{HTTP_USER_AGENT} ^MSProxy [OR]
RewriteCond %{HTTP_USER_AGENT} ^Navroad [OR]
RewriteCond %{HTTP_USER_AGENT} ^NearSite [OR]
RewriteCond %{HTTP_USER_AGENT} ^NetAnts [OR]
RewriteCond %{HTTP_USER_AGENT} ^NetMechanic [OR]
RewriteCond %{HTTP_USER_AGENT} ^NetSpider [OR]
RewriteCond %{HTTP_USER_AGENT} ^Net\ Vampire [OR]
RewriteCond %{HTTP_USER_AGENT} ^NetZIP [OR]
RewriteCond %{HTTP_USER_AGENT} ^NICErsPRO [OR]
RewriteCond %{HTTP_USER_AGENT} ^Ninja [OR]
RewriteCond %{HTTP_USER_AGENT} ^Octopus [OR]
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Explorer [OR]
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Navigator [OR]
RewriteCond %{HTTP_USER_AGENT} ^Openfind [OR]
RewriteCond %{HTTP_USER_AGENT} ^PageGrabber [OR]
RewriteCond %{HTTP_USER_AGENT} ^Papa\ Foto [OR]
RewriteCond %{HTTP_USER_AGENT} ^pavuk [OR]
RewriteCond %{HTTP_USER_AGENT} ^pcBrowser [OR]
RewriteCond %{HTTP_USER_AGENT} ^Ping [OR]
RewriteCond %{HTTP_USER_AGENT} ^PingALink [OR]
RewriteCond %{HTTP_USER_AGENT} ^Pockey [OR]
RewriteCond %{HTTP_USER_AGENT} ^psbot [OR]
RewriteCond %{HTTP_USER_AGENT} ^Pump [OR]
RewriteCond %{HTTP_USER_AGENT} ^QRVA [OR]
RewriteCond %{HTTP_USER_AGENT} ^RealDownload [OR]
RewriteCond %{HTTP_USER_AGENT} ^Reaper [OR]
RewriteCond %{HTTP_USER_AGENT} ^Recorder [OR]
RewriteCond %{HTTP_USER_AGENT} ^ReGet [OR]
RewriteCond %{HTTP_USER_AGENT} ^Scooter [OR]
RewriteCond %{HTTP_USER_AGENT} ^Seeker [OR]
RewriteCond %{HTTP_USER_AGENT} ^Siphon [OR]
RewriteCond %{HTTP_USER_AGENT} ^sitecheck.internetseer.com [OR]
RewriteCond %{HTTP_USER_AGENT} ^SiteSnagger [OR]
RewriteCond %{HTTP_USER_AGENT} ^SlySearch [OR]
RewriteCond %{HTTP_USER_AGENT} ^SmartDownload [OR]
RewriteCond %{HTTP_USER_AGENT} ^Snake [OR]
RewriteCond %{HTTP_USER_AGENT} ^SpaceBison [OR]
RewriteCond %{HTTP_USER_AGENT} ^sproose [OR]
RewriteCond %{HTTP_USER_AGENT} ^Stripper [OR]
RewriteCond %{HTTP_USER_AGENT} ^Sucker [OR]
RewriteCond %{HTTP_USER_AGENT} ^SuperBot [OR]
RewriteCond %{HTTP_USER_AGENT} ^SuperHTTP [OR]
RewriteCond %{HTTP_USER_AGENT} ^Surfbot [OR]
RewriteCond %{HTTP_USER_AGENT} ^Szukacz [OR]
RewriteCond %{HTTP_USER_AGENT} ^tAkeOut [OR]
RewriteCond %{HTTP_USER_AGENT} ^Teleport\ Pro [OR]
RewriteCond %{HTTP_USER_AGENT} ^URLSpiderPro [OR]
RewriteCond %{HTTP_USER_AGENT} ^Vacuum [OR]
RewriteCond %{HTTP_USER_AGENT} ^VoidEYE [OR]
RewriteCond %{HTTP_USER_AGENT} ^Web\ Image\ Collector [OR]
RewriteCond %{HTTP_USER_AGENT} ^Web\ Sucker [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebAuto [OR]
RewriteCond %{HTTP_USER_AGENT} ^[Ww]eb[Bb]andit [OR]
RewriteCond %{HTTP_USER_AGENT} ^webcollage [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebCopier [OR]
RewriteCond %{HTTP_USER_AGENT} ^Web\ Downloader [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebEMailExtrac.* [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebFetch [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebGo\ IS [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebHook [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebLeacher [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebMiner [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebMirror [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebReaper [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebSauger [OR]
RewriteCond %{HTTP_USER_AGENT} ^Website [OR]
RewriteCond %{HTTP_USER_AGENT} ^Website\ eXtractor [OR]
RewriteCond %{HTTP_USER_AGENT} ^Website\ Quester [OR]
RewriteCond %{HTTP_USER_AGENT} ^Webster [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebStripper [OR]
RewriteCond %{HTTP_USER_AGENT} WebWhacker [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebZIP [OR]
RewriteCond %{HTTP_USER_AGENT} ^Wget [OR]
RewriteCond %{HTTP_USER_AGENT} ^Whacker [OR]
RewriteCond %{HTTP_USER_AGENT} ^Widow [OR]
RewriteCond %{HTTP_USER_AGENT} ^WWWOFFLE [OR]
RewriteCond %{HTTP_USER_AGENT} ^x-Tractor [OR]
RewriteCond %{HTTP_USER_AGENT} ^Xaldon\ WebSpider [OR]
RewriteCond %{HTTP_USER_AGENT} ^Xenu [OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus.*Webster [OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus
RewriteRule ^.* – [F,L] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T17:19:19.663

由于每个人都可以通过浏览器阅读您的 html 源代码，因此您无能为力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T17:25:39.410

可悲的是你无能为力。但是，您可以通过 style.css 使用 @import url('here') 导入样式的源代码来中途停止脚本小猫。他们仍然可以查看您的 .css 样式，但您必须输入完整的 url 才能获得它。这可以阻止一些，但不是全部。

其他方法是将 Javascript 代码复杂化为许多数字，从而使您的代码混乱且不可读。就 HTML 文件而言，这些文件是可读的，因为浏览器必须读取它。

我在我的网站上混淆了一些代码，但我没有遇到任何问题。这是最后一种安全解决方法。

您可以解决的其他方法是将php文件相互嵌入。

除此之外，你真的无能为力。

# c# - 编码不是枚举吗？

> ID：10453309
> 
> 赞同：5
> 
> 时间：2012-05-04T17:16:12.133
> 
> 标签：c#, encoding, enums

我试图找出一种方法将文件的编码存储在数据库中，然后能够将其检索回原始类型（System.Text.Encoding）。但我收到一个我不明白的错误。

作为测试，我创建了这个小程序来重现错误：

```
using System;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            object o = Encoding.Unicode;
            Encoding enc = (Encoding) Enum.Parse(typeof(Encoding), o.ToString());
        }
    }
} 
```

我在 Parse 行中遇到的异常说：

```
Type provided must be an Enum.
Parameter name: enumType 
```

那么，据我所知，基本上是告诉我`typeof(Encoding)`不返回 Enum 类型？提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T17:19:48.600

不，它不是枚举。它是一个具有静态属性的类。像这样的东西：

```
public class Encoding
{
    public static Encoding ASCII
    {
         get
         {
             //This is purely illustrative. It is not actually implemented like this
             return new ASCIIEncoding();
         }
    }
} 
```

如果要将编码存储在数据库中，请存储代码页：

```
int codePage = SomeEncoding.CodePage; 
```

并用于`Encoding.GetEncoding(theCodePage)`获取编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:20:28.117

这是正确的。右键，go to definition 显示Encoding是这样定义的：

```
public abstract class Encoding : ICloneable 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T17:21:30.823

`Encoding.Unicode`并且`Encoding.ASCII`是类的静态只读属性`Encoding`。他们不是`enum`成员。

您可以改为将`CodePage`编码存储在数据库中，并使用以下方法检索它[`Encoding.GetEncoding`](http://msdn.microsoft.com/en-us/library/wzsz3bk3.aspx)：

```
// store the encoding
WriteToDatabase(myEncoding.CodePage);

// retrieve the encoding used
Encoding encoding = Encoding.GetEncoding(/* value from the database */); 
```

[*对于存储不同编码的数据，这可能不是一个合理的策略……但是，我不知道您在大局中要完成的工作。*]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T17:20:37.993

`Encoding`是一个类而不是枚举。呼叫`Encoding.Unicode`是呼叫公共财产。这一行是错误的：

```
Encoding enc = (Encoding) Enum.Parse(typeof(Encoding), o.ToString()); 
```

如果您查看[Enum.Parse](http://msdn.microsoft.com/en-us/library/essfb559.aspx)您将看到第一个参数应该是 enumType 并且您传递的是完全不同的对象。

# cocoa-touch - 如何向 UIImageView 添加阴影，该阴影适合图像内容的形状但具有一些旋转和移位效果

> ID：10453316
> 
> 赞同：3
> 
> 时间：2012-05-04T17:16:49.477
> 
> 标签：cocoa-touch, uikit, core-graphics

我一直在网上寻找解决方案很长时间。大多数教程都非常简单地向 UIView 添加阴影。我还注意到，如果我们向 UIImageView 添加阴影。如果图像本身具有 alpha 通道，则阴影形状可以完美地适合内容图像的形状。例如，如果图像是具有透明背景的动物，则阴影形状也与该动物相同（不是与 UIImageView 框架相同的矩形阴影）。

但这些还不够。我需要做的是对阴影添加一些更改，使其可能具有一些旋转角度和压缩（挤压或移位）效果，以便看起来阳光来自某个点。

为了演示我需要什么，我上传了下面 2 张图片，这些图片是从 Apple 创建的 Google Map App 中捕获的。你可以想象 Annotation Pin 是一个有 Pin 形状的图像，所以阴影也是“pin 形”的，但它不是简单地用 CGSize“偏移”，你可以看到阴影的顶部向右移动了大约 35度并略微挤压高度。

当我们点击并按住并固定时，阴影也被动画远离针脚，所以我相信这样的阴影可以可编程地制作。

到目前为止我能找到的最好的阴影教程是[http://nachbaur.com/blog/fun-shadow-effects-using-custom-calayer-shadowpaths](http://nachbaur.com/blog/fun-shadow-effects-using-custom-calayer-shadowpaths)但不幸的是，这不能产生这种效果。

如果有人知道答案或知道要搜索的更好的词，请告诉我。谢谢你。

（请注意，图像的形状在 App 中是动态的，因此不能使用 Photoshop 等任何工具预渲染阴影。）

![注释针阴影](../Images/14f25b9474b0b9022c96fc7c8a5c0f0f.png)

![点击和放下时的注释针阴影](../Images/050cb46c131654172b75ba625580047d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:05:41.317

为了创建这样的动态效果，您必须使用 Core Graphics。一旦你知道如何使用它，它就会非常强大。基本上你需要在上下文上设置一个倾斜变换，设置一个阴影并绘制图像。您可能还必须使用透明层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:37:47.910

听起来您不能使用 CALayer 阴影，因为那是为了解决特定的用例。Apple 在地图上使用大头标记的方法是提前创建两个单独的图像（例如在 Photoshop 中），然后将它们相对于参考点定位在地图内。

如果您确实需要在运行时执行此操作，则应该仍然可以使用 Core Graphics 或 ImageKit。要获得模糊的阴影外观，您可以使用 kCICategoryBlur CIFilter。然后，您可以将图像转换为灰度。要获得压缩的外观，您只需要调整图像大小和倾斜图像。

一旦你有两个独立的图像，你可以为阴影图像获取 CGImageRef 并将其设置为另一个子层的内容，或者你可以将它添加为一个单独的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:22:27.250

如果你知道所有的形状是什么，你可以在 Photoshop 中渲染一个阴影图像或其他东西。

# javascript - 如何在 iframe src 更改后立即更改 iframe 组件的值？

> ID：10453323
> 
> 赞同：2
> 
> 时间：2012-05-04T17:17:45.480
> 
> 标签：javascript, html, iframe

最初 iframe src 是 3.html 并且它没有 id 为“p”的元素，我想将 iframe src 更改为 2.html 并将“p”元素值更改为 11。但它没有工作. 谁能给出一些解决方案？

我想做的事情很简单：

1）更改iframe src。

2）更改 iframe 的元素值。

1.html

```
<script type="text/javascript">
function testIframe()
{
test1();
test2();

}
function test1()
{
document.frames('myFrame').src='2.html';
}
function test2()
{
document.frames('myFrame').document.getElementById('p').innerHTML='11';
}
</script>
<body>
<input type="submit" id="button" onClick="testIframe()" value="ok">
<iframe name="myIFrame" id="myFrame" src="3.html">
</body> 
```

2.html

```
<body>
<p id="p">33</p>
</body> 
```

3.html

```
<body>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:53:13.560

在 iframe 上连接一个 ONLOAD 事件。您需要这样做，因为您只能在页面加载后更改该值。在事件处理程序中，查看 SRC，如果它是正确的页面，则运行您的代码。

# magento - Magento - Credit Memo“返回库存”不更新库存可用性

> ID：10453324
> 
> 赞同：4
> 
> 时间：2012-05-04T17:17:48.903
> 
> 标签：magento, magento-1.5

因此，当您在 Magento 中创建贷项通知单时，它会将库存设置回正确的水平，但不会将“缺货”更改回“有货”（如果适用）。我看到了 Wright Creatives 的这篇文章 (http://wrightcreativelabs.com/blog/55-credit-memo-in-stock.html)，它解决了这个问题。但是，方法太慢了！每个产品大约需要 30 秒。

我最终不得不将其作为解决方案删除（因为“速度”），现在我的老板希望重新实现该功能。

我知道`is_in_stock`数据控制着这一点，我想知道是否已经有一个模块、一篇文章/教程，或者可以帮助我开始“更好/更快”的解决方案的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T12:13:26.723

我知道它已经过时了，但是因为即使在 1.7.0.1 中也没有解决这个问题，所以我想出了一个更好的解决方案。

在 1.5.1 及更高版本上测试：

**\app\code\core\Mage\CatalogInventory\Model\Observer.php**

在

**公共函数refundOrderInventory($observer)**

后

```
Mage::getSingleton('cataloginventory/stock')->revertProductsSale($items);

    //add this
    foreach ($creditmemo->getAllItems() as $item) {
        $productId = $item->getProductId();
        $product = Mage::getModel('catalog/product')->load($productId);

        if(!$product->isConfigurable()){

            $stockItem = $product->getStockItem();

            //$stockItem->setQty($item->getQty());
            $stockItem->setIsInStock(1);
            $stockItem->save();

            $product->setStockItem($stockItem);
            $product->save();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:01:13.593

编写一个模块来观察贷项通知单的事件，并在产品保存之前在产品库存项目对象上设置 in_stock 标志。我不能告诉你你想观察的事件，但我很肯定你能找到它:)

如果没有，更丑陋的方法是在保存前观察产品。更多的逻辑来实现它，但是如果你总是希望产品有库存，如果它们有数量而不考虑其他任何东西，那么这不是一个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-09T02:19:27.557

商店>>配置>>库存>>滚动到底部

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-03T09:06:03.117

转到`System`-> `Configuration`-> `Inventory (under Catalog)`-> `Product Stock Options`-> Automatically Return Credit Memo Item to Stock 并确保它设置为`Yes`。或者只是转到您的数据库并在路径为“cataloginventory/item_options/auto_return”的 core_config_data 中确保值列设置为“1”；

# html - HTML 5 / File API - 过滤表单文件选择对话框的文件类型

> ID：10453325
> 
> 赞同：1
> 
> 时间：2012-05-04T17:17:56.370
> 
> 标签：html, upload, filter

他们是否添加了对 HTML5 或文件 API 中过滤文件类型的支持？我只需要能够过滤图像和文档，例如 JPG GIF TIFF DOC PDF DOCX 并且没有可执行文件或其他文件类型。根据[此](http://www.w3.org/TR/html5/number-state.html#file-upload-state)HTML 5 与 HTML 4 相同，只能过滤音频/视频/图像/其他所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:44:12.690

您可以像这样使用“接受”属性

```
<input type="file" name="ufile" accept="audio/*" /> 
```

# mysql - MYSQL/PHP 两个字段的最大值：需要两个查询？

> ID：10453332
> 
> 赞同：1
> 
> 时间：2012-05-04T17:18:24.637
> 
> 标签：mysql, sql

我需要从一个表中获取两条信息：一个字段的最大值和最近的条目。我真的不关心所有其他项目。有问题的两个字段是 score 和 when added。有没有办法避免做两个单独的查询？

```
"SELECT score FROM scores ORDER BY score DESC limit 1" gives highest score. 
"SELECT whenadded FROM scores ORDER BY whenadded DESC limit 1" gives most recent. 
```

但是，有没有办法进行一次查询并获取这两条信息？对于这么小的事情，两个查询似乎过分了。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T17:20:51.223

```
SELECT MAX(score), MAX(whenadded) FROM scores 
```

这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:21:08.890

您可以找到得分的最大值和添加时的最大值

```
SELECT Max(score), Max(whenadded) FROM scores 
```

# c# - 传递给操作方法的列表没有元素

> ID：10453333
> 
> 赞同：1
> 
> 时间：2012-05-04T17:18:28.873
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, actionmethod

我通过操作链接将对象的通用列表从视图页面传递给操作方法。操作链接如下所示

```
@Html.ActionLink("Click here", "Foo", new { a = Model.A }) 
```

动作方法签名是

```
public ActionResult Foo(List<foo> a) 
```

问题是当我在调试器中运行这段代码时，我可以清楚地看到视图中的这个 List 中有两个元素，但是当执行到 action 方法时，列表中没有任何元素。为什么会这样？

有人建议我“发布到 ActionResult”。这是什么意思？如果这是解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:53:36.183

你可以试试这个，它将元素传递为 ?a[0]=foo&a[1]=bar&a[2]=hello

```
@{
    var dict = new RouteValueDictionary();
    for (int i = 0; i < Model.A.Count; i++)
    {
        dict.Add("a[" + i + "]", Model.A[i]);
    }
}
@Html.ActionLink("Click here", "Foo", dict); 
```

# many-to-many - 如何处理存在于“实体之间”的属性（在这种情况下是多对多关系）？

> ID：10453337
> 
> 赞同：2
> 
> 时间：2012-05-04T17:18:59.943
> 
> 标签：many-to-many, domain-driven-design, ddd-repositories, domain-model

我发现了一些关于建模多对多关系的问题，但没有任何东西可以帮助我解决当前的问题。

### 设想

我正在建模一个具有`User`s 和`Challenge`s 的域。挑战有很多用户，用户属于很多挑战。挑战存在，即使他们没有任何用户。

![在此处输入图像描述](../Images/4556550e7654310981619373e3ada2c9.png)

很简单。我的问题变得有点复杂，因为用户可以在挑战中*排名。*我可以将这些信息存储在挑战中，作为一组用户和他们的排名——同样不是太难。

### 问题

如果我想查询用户在挑战中的个人排名（不获取挑战中所有用户的排名），我应该使用什么方案？在这个阶段，我不在乎*如何*调用数据访问，我只是不想在只需要一个时返回数百个排名数据点。

我也想知道*在哪里*存储排名信息；感觉就像它取决于用户和挑战。这是我考虑过的：

1.  显而易见：实例化 a 时`Challenge`，只获取所有排名信息；较慢但有效。

2.  制作一个复合`UserChallenge`实体，但这感觉像是违背了领域（我们不会到处谈论“用户挑战”）。

    ![在此处输入图像描述](../Images/a0727c50d3524cef225c38ceb2d31436.png)

3.  第三个选项？

我想选择第二个，但我没有足够的信心知道这是否真的是 DDD 方法。

### 更新

我想我可以称之为`UserChallenge`更合适的领域，比如`Rank`，`UserRank`或者什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:57:06.877

这里的 DDD 方法是根据领域进行推理，并与您的领域专家/业务分析师/任何人讨论这个特定点以改进模型。不要忘记您的实体名称是通用语言的一部分，需要非技术人员理解和使用，因此“UserChallenge”可能不是他最合适的术语。

我首先要做的是尝试确定该“中间实体”是否值得在域模型和无处不在的语言中占有一席之地。例如，如果您正在构建一个网站并且有一个专门的排名页面，用户可以在其中看到所有挑战的列表以及相关排名，那么排名很可能是应用程序中的关键问题，**排名**实体将是代表这一点的好选择。您可以与您的领域专家交谈，看看排名是否适合它，或者换个名字。

另一方面，如果没有证据表明需要这样的实体，我会坚持选项 1。如果您担心性能问题，有一些方法可以减少关系的多重性。埃里克·埃文斯（Eric Evans）称其为协会的*资格*（DDD，第 83-84 页）。从技术上讲，这可能意味着挑战有一个地图 - 或以用户为键的排名字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:24:37.960

我会选择选项 2。你不必“到处谈论用户挑战”，但你必须四处抓住所有用户以应对给定的挑战并按排名对它们进行排序，这个模型为你提供了一个很好的办法！

# c# - 为什么此代码中的锁定不起作用？

> ID：10453339
> 
> 赞同：5
> 
> 时间：2012-05-04T17:19:04.483
> 
> 标签：c#, locking

使用此代码用于非常基本的记录器：

```
lock (string.Concat("LogWritter_", this.FileName))
{
    using (var fileStream = File.Open(this.FileName, FileMode.Append, FileAccess.Write, FileShare.Read))
    {
        using (var w = new StreamWriter(fileStream))
        {
            w.Write(message);
        }
    }
} 
```

当我同时从几个线程尝试它时，我很快就得到了错误：

```
The process can't access the file because its being used by another file. 
```

为什么锁不能阻止线程同时访问文件？

线程调用同一个实例或不同实例到同一个文件并不重要。另外我认为这可能是因为在 Windows 中写入文件时出现了一些延迟，但在 Linux 上发生了同样的事情。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T17:20:06.903

您正在锁定一个临时字符串。您必须引入一个静态对象来锁定。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T17:21:27.117

创建一个`Dictionary<string,object>`并将您的锁定对象存储在那里，文件路径作为键。

不久前，我提出了同样的问题：

[通过字符串锁定。这是安全/理智的吗？](https://stackoverflow.com/questions/4224888/locking-by-string-is-this-safe-sane)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-04T17:24:00.123

[C# lock 语句](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)将锁放在对象上，而不是字符串的唯一性。所以，因为你是动态连接两个字符串，你本质上每次都创建一个新对象，所以每个锁都是唯一的。即使您每次都访问同一个文件，“A”+“B”也会产生一些新的不可变字符串；"A" + "B" 再次产生另一个新对象。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-04T17:22:40.553

您只是锁定了一个动态创建的字符串 ( `"LogWritter_" + this.FileName`)！每个线程将创建另一个线程。改为创建一个通用的锁定对象

```
public static readonly object fileLock = new object();

...

lock (fileLock) {
    ...
} 
```

* * *

如果要为不同的文件创建不同的锁，则必须将它们存储在一个集合中，供所有线程使用。

如果您使用的是 .NET Framework 4.0，则可以使用`ConcurrentDictionary<TKey, TValue>`. 否则，您将不得不锁定对正常的访问`Dictionary<TKey, TValue>`

```
public static readonly ConcurrentDictionary<string,object> fileLocks =
    new ConcurrentDictionary<string,object>();

...

object lockObject = fileLocks.GetOrAdd(filename, k => new object());
lock (lockObject) {
    ...
} 
```

* * *

**更新**

如果要比较两个字符串的引用，则必须使用

```
Object.ReferenceEquals(s1, s2) 
```

在哪里

```
string s1 = "Hello";
string s2 = "Hello";
Console.WriteLine(Object.ReferenceEquals(s1, s2)); // ===> true

string s3 = s1 + " World!";
string s4 = s2 + " World!";
Console.WriteLine(s3 == s4); // ===> true
Console.WriteLine(Object.ReferenceEquals(s3, s4)); // ===> false 
```

在编译时创建的字符串是 interned，即为相等的字符串创建一个字符串常量。但是，在运行时创建的字符串将被创建为单独且不同的对象！

字符串的哈希码是根据字符串的字符计算的，而不是根据它们的引用计算的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T17:51:59.163

试试这个代码。当第一个线程进来并计算 string.Concat("LogWritter_", this.FileName) 的值时，它会锁定这个字符串。第二个线程也将计算相同的字符串值，但字符串会有所不同。如果您将使用 ==,Equals() 或 GetHashCode() 比较字符串，您将看到两个字符串相同，因为 == 和 Equals() 对字符串类进行了重载。但是如果你检查 ReferenceEquals() 那么你返回 false。这意味着两个字符串都有不同的引用。这就是为什么第一个线程锁定一个字符串对象，第二个线程锁定第二个字符串对象，你会得到错误。

```
class Program
{
    public static void Main(string[] args)
    {
        string locker = "str", temp = "temp";
        string locker1 = locker + temp;
        string locker2 = locker + temp;

        Console.WriteLine("HashCode{0} {1}", locker1.GetHashCode(), locker2.GetHashCode());
        Console.WriteLine("Equals {0}", locker1.Equals(locker2));
        Console.WriteLine("== {0}", locker1 == locker2);
        Console.WriteLine("ReferenceEquals {0}", ReferenceEquals(locker1, locker2));
        app.Program p = new Program();
        Action<string> threadCall = p.Run;
        threadCall.BeginInvoke(locker1, null, null);
        threadCall.BeginInvoke(locker2, null, null);
        Console.Read();
    }

    public void Run(string str)
    {
        lock (str)
        {
            Console.WriteLine("im in");
            Thread.Sleep(4000);
            Console.WriteLine("print from thread id {0}", Thread.CurrentThread.ManagedThreadId);
        }
    }

} 
```

# c# - 如果 ComboBox.DropDownStyle == 简单，则“跨线程操作无效”

> ID：10453340
> 
> 赞同：0
> 
> 时间：2012-05-04T17:19:12.990
> 
> 标签：c#, .net, windows, combobox, thread-safety

我有一个表单，它显示在通过 Invoke 调用的方法中，因为该方法是从不同的线程调用的。在我需要打开的表单中，我有一个带有 ComboBox 的 UserControl。如果`ComboBox.DropDownStyle`是`Simple`form.Show爆炸投掷

> InvalidOperationException：跨线程操作无效：控件“comboBox1”从创建它的线程以外的线程访问。

如果我将 ComoBox.DropDownStyle 设置为默认值 (DropDown) 我没有问题。

我现在这有点难以理解（甚至相信）所以这里有一个简化的例子来重现它：

1.  创建一个新的 winforms 项目。
2.  创建两个窗体和一个用户控件。
3.  在用户控件中创建一个 ComboBox。
4.  在 Form2 中放置一个用户控件的实例。
5.  在 Form1 代码中输入：

```
private Form form;
private delegate void ShowDelegate();
private ShowDelegate showDelegate;

private void Form1_Load(object sender, EventArgs e)
{
    showDelegate = Show;
    new Thread(Run).Start();
}

private void Run()
{
    form = new Form2();
    Invoke(showDelegate);
}

private void Show()
{
    form.Show();
} 
```

请记住将事件设置为`Form1_Load`.

1.  运行它并查看它是否正常工作。
2.  更改`ComboBox.DropDownStyle`为`Simple`并查看它不起作用！

请问这个问题有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:33:29.267

By simply moving

```
form = new Form2(); 
```

To your Show() method, it will work then.

The Form gets initialized on the thread you start, it works then. But you might want to check the behavior in the long term ...

# qt - 用文件中的 QString 填充一些 QTableWidgetItems

> ID：10453343
> 
> 赞同：0
> 
> 时间：2012-05-04T17:19:36.310
> 
> 标签：qt, qtablewidget, settext, qtablewidgetitem

我正在尝试从我的程序导出的文件中填充 QTableWidget，但是当我尝试将文本设置为表格单元格时，他们只是忽略了我，没有任何反应。

```
void MainWindow::on_actionOpen_Project_triggered()
{
    QString line, fileName;
    fileName = QFileDialog::getOpenFileName(this,tr("Open Project"), "", tr("Project Files (*.project)"));

    if(!fileName.isEmpty()){

        QFile file(fileName);
        if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) return;
        QTextStream in(&file);

        for(int i=0;i<ui->code->rowCount();i++){ // goes through table rows
            for(int j=0;j<ui->code->columnCount();j++){ // through table columns

                ui->code->setCurrentCell(i,j);
                QTableWidgetItem *cell = ui->code->currentItem();
                in >> line;

                if(!line.isEmpty()){
                    cell = new QTableWidgetItem(line); // relates the pointer to a new object, because the table is empty.
                    ui->errorlog->append(line); // just for checking if the string is correct visually.
                }
            }
        }
        file.close();
    }
} 
```

错误日志对象在屏幕上显示从文件中打开的正确值，但表格未填满。有没有发现什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:36:27.927

这一行：

```
cell = new QTableWidgetItem(line); 
```

不做你认为它做的事。赋值`cell`不会改变表中的任何内容——`cell`只是一个局部变量，覆盖它在其他地方没有任何影响。

您（可能）想要做这样的事情：

```
cell->setText(line); 
```

或者（如果您真的不需要更改当前项目）：

```
ui->code->item(i,j)->setText(line); 
```

如果这些给你一个段错误，那是你还没有设置表格的小部件项目。在这种情况下，您应该执行以下操作：

```
QTableWidgetItem *cell = ui->code->item(i,j);
if (!cell) {
  cell = new QTableWidgetItem;
  ui->code->setItem(i,j,cell);
}

if (!line.isEmpty()) {
  cell->setText(line);
} 
```

`QTableWidgetItem`这将在第一次调用此函数时用 s 填充所有单元格，并随后重用它们。

# ruby-on-rails - 为什么 Rails 不保存连接器模型？正常行为还是错误？

> ID：10453346
> 
> 赞同：1
> 
> 时间：2012-05-04T17:19:49.200
> 
> 标签：ruby-on-rails, activerecord, has-many-through

当我尝试这个时，连接器模型没有被保存（假设`Account has_many :users, through: :roles`反之亦然）：

```
def new
  @account = current_user.accounts.build
end
def create
  @account = current_user.accounts.build(params[:account])
  @account.save # does not save the joiner model
end 
```

这应该创建@account，以及角色记录 where`user_id=current_user.id`和`account_id: @account.id`. 只有@account 被保存。角色模型中没有记录。使用控制台的结果是一致的。

在操作中替换`current_user.accounts.build`为，加入者（角色记录）模型被保存。出于这个原因，我不认为这是一个验证问题。我正在使用 Rails 3.2.3。`current_user.accounts.create``create`

### 楷模：

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :accounts, through: :roles
end
class Account < ActiveRecord::Base
  has_many :roles
  has_many :users, through: :roles
  accepts_nested_attributes_for :users
end
class Role < ActiveRecord::Base
  attr_accessible
  belongs_to :users
  belongs_to :accounts
end 
```

### 看法

```
<%= simple_form_for(@account) do |f| %>      
  <%= render 'account_fields', f: f %>
  <%= f.submit %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:02:28.163

尝试使用

**更新：**

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :accounts, through: :roles, :autosave => true
end 
```

[您可以在此处找到有关自动保存的更多信息](http://api.rubyonrails.org/classes/ActiveRecord/AutosaveAssociation.html)。

`User`或在模型中使用回调

```
after_save :save_accounts, :if => lambda { |u| u.accounts } 

def save_accounts 
  self.accounts.save
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:53:16.157

这是一个错误：[https ://github.com/rails/rails/issues/6161#issuecomment-5631018](https://github.com/rails/rails/issues/6161#issuecomment-5631018)

# html - Underlining a span element

> ID：10453362
> 
> 赞同：1
> 
> 时间：2012-05-04T17:20:52.953
> 
> 标签：html, css

When I apply 'border-bottom' to a 'span' element to underline it and if that the 'span' has 'image' in it with 'vertical-align: middle', the border cuts across the image! Is there anyway to maintain 'vertical-align: middle' and still run the border below the 'span'?

```
<html>
    <head>
        <style type="text/css">
            span.underline {
                font-size: 20px;
                border-bottom: 3px solid grey;
            }
            img.embeddedImage {
                vertical-align: middle;
            }
        </style>
    </head>

    <body>
        <span class="underline"> (a) <img class="embeddedImage" src="logo.gif"></span>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T17:25:08.603

Add `display:block;` to your span or turn the span into a div.

**[jsFiddle example](http://jsfiddle.net/j08691/ehjFX/)**.

**Or**...use display:inline-block;

**[jsFiddle example](http://jsfiddle.net/j08691/ehjFX/1/)**.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:23:52.363

```
span.underline {
                font-size: 20px;
                text-decoration: underline;
            } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T17:26:44.853

```
span { border-bottom: 1px solid; }​ 
```

[Fiddle up](http://jsfiddle.net/FBRtE/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T17:26:21.333

If just underlining the text isn't enough... `{text-decoration:underline;}`

If you set the image to have a higher z-index higher than the span, does it do what you need?

```
 <style type="text/css">
        span.underline {
            font-size: 20px;
            border-bottom: 3px solid grey;
            z-index: 1;
        }
        img.embeddedImage {
            vertical-align: middle;
            z-index: 2;
        }
    </style> 
```

# javascript - 关于 knockout.js 和范围的菜鸟问题

> ID：10453364
> 
> 赞同：0
> 
> 时间：2012-05-04T17:20:56.870
> 
> 标签：javascript, knockout.js

按照文档，尝试了我自己的并遇到了一些问题。

```
initializeViewModel = function(){

    var listing_model = {
        sale_rent: ko.observable( jQuery('#id_sale_rent')),
        property_type: ko.observable( jQuery('#id_property_type').val()),
        address: ko.observable( jQuery('#id_address')),
        is_condo: ko.computed(function(){
            return this.property_type() == 'condominium';
        }, this)
    };

    listing_model.district = ko.computed(function(){

        return this.district() || this.property_type();
    }, listing_model);

    return listing_model;
} 
```

该语句`return this.property_type() == 'condominium';`导致异常`object <object> has no method property_type()`。我认为这可能是一个范围界定问题，但`this`似乎在这里指的是正确的实例。有人可以指出我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:48:39.617

The cleanest solution is to use an anonymous function (to create a closure) rather than a plain object:

```
initializeViewModel = function(){
    var listing_model = new function() {
        // Close-in a reference to this object
        var self = this;

        self.sale_rent = ko.observable( jQuery('#id_sale_rent') );
        self.property_type = ko.observable( jQuery('#id_property_type').val() );
        self.address = ko.observable( jQuery('#id_address') );

        self.is_condo = ko.computed(function() {
            return (self.property_type() == 'condominium');
        });
    }();

    // ... 
```

Otherwise, "this" inside the function (that defines the computed) refers to whatever you're passing as the second parameter to ko.computed() - the value of the "this" there is the current context that "initializeViewModel" is executed in, so if you're calling that function as usual (i.e. `initializeViewModel()`), "this" will just be a reference to the global object and not to "listing_model" (as expected/intended).

The example in the manual differs from you're code: you're creating a plain object right away while in the manual everything is wrapped in a function. Calling that function with the "new" keyword creates a new object and sets the context ("this") to this object. That's why their code works.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:32:07.227

好吧，`this`指的是匿名函数范围，其次`this.property_type()`是函数调用，您不能为其分配变量。

# iphone - 为什么在 iOS 上的 jQuery Mobile PhoneGap 应用程序中转换后页面会闪烁/闪烁？

> ID：10453368
> 
> 赞同：6
> 
> 时间：2012-05-04T17:21:13.233
> 
> 标签：iphone, ios, jquery-mobile, cordova

我有一个使用PhoneGap 转换为iOS 应用程序的jQuery Mobile 应用程序。我正在使用 jQM 1.1.0 版。

我在页面之间使用“淡入淡出”过渡（因为我读到它们要求不高）。

最初在 iPhone 模拟器中运行应用程序的 PhoneGap 版本时，我在每次页面转换后都会出现闪烁/闪烁 - 好像页面正在显示、清除然后重新显示 - 所有这些都只用了几分之一秒。当我在设备上运行它时发生了一些事情。

我将 Sarah-Jane 对[类似问题](https://stackoverflow.com/questions/5953753/flickering-when-navigating-between-pages)的回答中的建议应用了。

这解决了模拟器中的问题，但没有解决实际设备上的问题。

有没有人遇到过这个问题，并找到了解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T15:56:23.780

这个人解决了这个问题 - 它对我有用：

[http://outof.me/fixing-flickers-jumps-of-jquery-mobile-transitions-in-phonegap-apps/](http://outof.me/fixing-flickers-jumps-of-jquery-mobile-transitions-in-phonegap-apps/)

CSS：

```
body {
    /* Setting body margins to 0 to have proper positioning of #container div */
    margin: 0;
}

/* #container div with absolute position and 100% width and height so it takes up whole window */
#container {
    position: absolute;
    width: 100%;
    height: 100%;
} 
```

JS：

```
$(document).one("mobileinit", function () {

    // Setting #container div as a jqm pageContainer
    $.mobile.pageContainer = $('#container');

    // Setting default page transition to slide
    $.mobile.defaultPageTransition = 'slide';

}); 
```

并将所有 jQM 页面包装在一个单一的`<div id="container">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:52:27.317

淡入淡出过渡闪烁主要是您应该将其更改为滑动或其他一些过渡模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T10:41:30.983

这可能会有所帮助

```
<meta name="viewport" content="width=device-width, user-scalable=no" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-10T15:31:57.660

使用以下代码

```
$(document).ready(function() 
{ 

    $.mobile.defaultPageTransition = "none"
    $.mobile.defaultDialogTransition = 'none';
    $.mobile.useFastClick = true; 
    $.mobile.touchOverflowEnabled = true;

}); 
```

# sql - 向 Oracle 添加存储过程时出现文件结束错误

> ID：10453372
> 
> 赞同：-5
> 
> 时间：2012-05-04T17:21:33.033
> 
> 标签：sql, oracle

我正在编写一个存储过程并遇到以下错误：

> 第 11 行的错误：PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：
> 
> 开始案例声明结束异常退出 goto if loop mod null pragma raise return select update while with close current delete fetch lock insert open rollback savepoint set sql execute commit forall merge pipe

我正在使用的代码：

```
create or replace PROCEDURE search_car244ikYKOETEO
IS
long TAXICAR.LONGITUDE%type;
lat TAXICAR.LATITUDE%type;
BEGIN

select LONGITUDE,LATITUDE
into long,lat
from taxiCar,driver
where driver.STATEOFDRIVER='free' and taxiCar.name='taxiRiyadh'
END; 
```

一旦我在最后更正了丢失的分号，我就会得到一个不同的错误

```
ERROR at line 8: PL/SQL: ORA-00936: missing expression 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:28:10.577

您的`SELECT`语句末尾缺少分号。 `LONG`也是保留字，因此您需要选择不同的变量名称。我强烈建议对局部变量采用标准前缀，以将它们与列名区分开来。

```
create or replace PROCEDURE search_car244ikYKOETEO
IS
  l_long TAXICAR.LONGITUDE%type; -- <-- LONG is a reserved word
  l_lat  TAXICAR.LATITUDE%type;
BEGIN
  select LONGITUDE,
         LATITUDE
    into l_long,
         l_lat
    from taxiCar,driver
   where driver.STATEOFDRIVER='free' 
     and taxiCar.name='taxiRiyadh'; -- <-- A semicolon terminates a SQL statement
END; 
```

`taxiCar`假设和表之间存在某种关系`driver`，我会假设您也缺少连接条件（例如`and taxiCar.carID = driver.carID`，如果有一个外键`driver`引用 的主键`taxiCar`）。

`SELECT`一旦您的过程编译，如果语句返回除 1 行以外的任何内容，它将引发错误。似乎有可能有 0 个免费驱动程序或超过 1 个免费驱动程序，因此您似乎不太可能在`SELECT ... INTO`这里想要一个。也许您想使用游标遍历行。也许你想把`BULK COLLECT`数据变成一个集合。也许您想创建一个视图而不是存储过程。

如果您想使用游标遍历行并打印出经度

```
create or replace PROCEDURE search_car244ikYKOETEO
IS
BEGIN
  FOR x IN (select LONGITUDE,
                   LATITUDE
              from taxiCar,
                   driver
             where driver.STATEOFDRIVER='free' 
               and taxiCar.name='taxiRiyadh')
  LOOP
    dbms_output.put_line( x.longitude );
  END LOOP;
END; 
```

# c# - 我的 Windows 服务项目中是否需要 Service1.cs？

> ID：10453373
> 
> 赞同：-3
> 
> 时间：2012-05-04T17:21:33.630
> 
> 标签：c#, windows, visual-studio, service

或者我可以称它为我想要的任何名称，例如 Main.cs 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:23:43.083

不，你没有。它只是一个默认名称。随意将其重命名为您想要的任何名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:29:05.773

作为常规的 C# 应用程序，类的名称并不重要。重要的是必须有一个静态 Main() 方法。

# php - php解析html表和计数具体类似于另一个

> ID：10453380
> 
> 赞同：0
> 
> 时间：2012-05-04T17:22:23.877
> 
> 标签：php, html-table, html-parsing

这个问题紧随其后，刚刚[在这里](https://stackoverflow.com/questions/10439354/php-parse-html-dom-and-count-specific-rows/10439475#comment13483870_10439475)
解决了 现在我想做一个不同的计数，更难弄清楚。

在我解析的 HTML 表中，每一行都包含两个非常相似的结果，'td'（**数字 4 和 5**）：

```
 <tr>
(1) <td class="tdClass" ....</td>
(2) <td class="tdClass" ....</td>
(3) <td class="tdClass" ....</td>
(4) <td class="tdClass" align="center" nowrap="">No</td>
(5) <td class="tdClass" align="center" nowrap="">No</td>
    </tr> 
```

第一个'td'中的字符串可以是“No”，第二个'td'中的字符串可以是“Yes”，反之亦然，两者都是“Yes”或两者都是“No”。

**我想计算 5 种中有多少 'td' 包含“否”**

到现在，我通过循环计算其他 'td'-s（请参阅顶部链接的上一个问题的选定答案）并仅选择匹配目标字符串的。
可以这样做是因为**这些目标字符串在每一行中只出现一次**。

**在这种情况下**，相反，**目标字符串**("No")**对于每一行不是唯一的**，因为如上例所示，在同一个 'tr' 中可能存在两次（在 'td' 4 和 5 中）。

那样的话，我真的不知道如何只为每一行选择第二个 (5) 'td'，它与目标字符串 "No" 匹配，并排除 (4) 'td'

显然，这两个 'td'-s 在不同的列标题下，但这对区分它们没有用处。

我想到的唯一解决方案是从左边数“td”位置，并只选择第 5 个，但我不知道这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:34:47.237

Taking the code from your previous question, you should already have this:

```
$targetString = 'TARGET STRING';
$rows = $table->find('.trClass');

$count = 0;
foreach($rows as $row) {
    foreach($row->find('td') as $td) {
        if ($td->innertext === $targetString) {
            $count++;
            break;
        }
    }
} 
```

Since you're already going through the td's, it would be quite simple to do what you said - "count the 'td' position from left, and to select only the 5th". As long as you know that it is definitely the fifth td you can do:

```
foreach($rows as $row) {
    $tdcount = 0;
    foreach($row->find('td') as $td) {
        //...

        //Bear in mind the first td will have tdcount=0, second tdcount=1 etc. so fifth:
        if($tdcount === 4 && ( 'Yes'===$td->innertext || 'No'===$td->innertext) ) {
            //do whatever you want with this td
        }

        $tdcount++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:41:23.383

您确实必须更新某些部分。首先，您需要第 4 个和第 5 个元素，因此您必须检查它（保留一个计数器或使用 for 循环）。其次，在这种情况下您不需要中断，因为它会停止循环。

代码：

```
<?php

$targetString = 'No';
$rows = $table->find('.trClass');

$count = 0;
foreach($rows as $row) {
    $tds = $row->find('td');
    for (i = 0; i < count($tds); $i++) {
        // Check for the 4th and 5th element
        if (($i === 3 || $i === 4) && $tds[$i]->innertext === $targetString) {
            $count++;
        }
    }
} 
```

在这里，我使用 for 循环而不是 foreach 循环，因为我不想手动保留计数器。我可以`$i`很容易地使用它，也可以将它用作索引。

# c# - SendMessage 模拟操作仅在移动鼠标时起作用。有没有办法解决这个问题？

> ID：10453382
> 
> 赞同：0
> 
> 时间：2012-05-04T17:22:32.050
> 
> 标签：c#, sendmessage

我正在游戏窗口中进行“拖动”操作。我想 mouse_down 在一个地方，然后 mouse_up 另一个地方。

这是c#代码：

```
uint Iparm = makeDWord((ushort)x, (ushort)y);
IntPtr xd = new IntPtr(Iparm);
uint Iparm2 = makeDWord((ushort)x2, (ushort)y2);
IntPtr xd2 = new IntPtr(Iparm2);

SendMessage(p, (uint)0x201, (IntPtr)0x1, xd); // down button (start x,y)
SendMessage(p, (uint)0x202, (IntPtr)0x0, xd2); // up button (final x,y) 
```

我已经将该代码与 ac# 形式的按钮（比如说名为 START 的按钮）连接起来。当我按下 START 并继续移动鼠标时，它可以完美运行。但是当我只是按下 START 并等待操作（不移动屏幕上的光标）时，什么也没有发生。在我的表单中按下按钮时，我已经使用 spy++ 检查了游戏窗口，并且按下该按钮的两种方式（移动/不移动光标）之间没有区别。

我忘了补充一点，在移动光标时，即使窗口最小化也会发生动作（这很酷）

是什么导致我的问题？：P

**编辑：**

```
WM_MOUSEDOWN = 0x201;
WM_MOUSEUP = 0x202; 
```

该代码放置在一个函数中，p 是窗口句柄，按钮 START 执行该函数。

正如我之前所说，当我移动光标时，代码工作得很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:56:47.123

尝试在向下和向上之间发送`SendMessage`一条`WM_MOUSEMOVE`消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:07:29.393

改为使用[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310.aspx)。

# php - PHP - Pear：无法打开流

> ID：10453383
> 
> 赞同：1
> 
> 时间：2012-05-04T17:22:33.863
> 
> 标签：php, phpunit, package, pear, include-path

我对 PHP 有点陌生，所以我现在开始使用 Pear，我想在其中使用 PHPUnit 和其他东西。

我遇到了一些错误，我一直在通过互联网寻找解决它，我发现很多人都有同样的问题，但有不同的解决方案来解决它。我想通过 PHP 发送一条消息并获取结果以查看它是否已成功发送，我一直在查看教程：[http ://www.youtube.com/watch?v=UH90nGNXab0](http://www.youtube.com/watch?v=UH90nGNXab0)

这是代码：

```
 <?php
require_once "Mail.php";
$from = "picnicrus.ahmadhammad@gmail.com";
$to = "ahmadnassr@gmail.com";
$subject = "Hi!";
$body = "Hi,\n\nHow are you?";

$host = "ssl://smtp.gmail.com";//"smtp.gmail.com";
$port = "465";//"587";
$username = "picnicrus.ahmadhammad";
$password = "1234432112344321";
$headers = array ('From' => $from,
'To' => $to,
'Subject' => $subject);
$smtp =@ Mail::factory('smtp',
array ('host' => $host,
'port' => $port,
'auth' => true,
'username' => $username,
'password' => $password));
$mail = @$smtp->send($to, $headers, $body);

if (@PEAR::isError($mail)) {
echo("<p>" . $mail->getMessage() . "</p>");
} else {
echo("<p>Message successfully sent!</p>");
}
?> 
```

我不断收到此警告：require_once(Mail.php) [function.require-once]: failed to open stream: No such file or directory in C:\wamp\www\MailSender\MailSender.php on line 2

紧随其后的是这个致命错误：require_once() [function.require]: Failed opening required 'Mail.php' (include_path='.;C:\wamp\bin\php\php5.3.10\pear') in C:\wamp \www\MailSender\MailSender.php 在第 2 行

所以，我的结论是：

1）我的php.ini中的包含路径不正确（include_path =“.;C:\wamp\bin\php\php5.3.10\pear”）我在apache中的php.ini中的include_path也是（include_path =“ .;C:\wamp\bin\php\php5.3.10\pear") 所以我想知道它是否可能是错误的？

2) 或者安装的包不正确，我下载了“Mail”，包含以下文件：mail.php、mime.php、mimePart.php、mock.php、null.php、RFC822.php、sendmail.php、smtp。 php，smtpmx.php。

该目录位于“C:\wamp\bin\php\php5.3.10\pear”中。

问候阿列克谢因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:26:32.990

您是否安装了邮件包？听起来您手动下载了文件。如果您尚未安装该软件包，请从命令提示符运行以下命令：

```
pear install Mail 
```

这应该将 Mail 包放入正确的 pear 库文件夹中，该文件夹应该已经在您的 include_path 中。

# android - 图像放置在 Android 中的图像上 节省内存

> ID：10453384
> 
> 赞同：0
> 
> 时间：2012-05-04T17:22:39.213
> 
> 标签：android, png, imageview

我将 ImageView 放在 RelativeLayout 中。我使用 LayoutParams 设置它们并使用 setMargins() 设置每张图片的位置。将放置在第一个图像之上的最大图像数量将仅达到 8 个。它们是 5 个不同的图像和屏幕上可以放置的 8 个位置。我想在按下相应按钮时创建图像，并能够将该图像设置为 RelativeLayout 并显示更改。我想要一种方法来清除屏幕上除主/背景 ImageView 之外的所有图像。我不喜欢填充 8 X 5 = 40 图像，然后将它们全部隐藏，然后在需要显示它们时将它们的视图更改为可见。我需要一些可以根据需要填充但能够在我清除它时破坏或删除的东西。

谢谢，塞尔达

```
aButton.setOnClickListener(new OnClickListener(){
        public void onClick(View v)
        {
            noteNumber++;
            if(noteNumber <= 8){
                note n = new note(getBaseContext());
                n.setNoteNumber(noteNumber);
                n.setHeight(85);
                images.add(n);  //ArrayList()
            }
            populate();
        }
    });
}
public void populate(){
    //if(noteNumber < 9){
    for(note a : images){   
        //note a = images.get(noteNumber-1); //images is of type ArrayList<ImageView>()
        if(a != null && a.getMasterImage() != null){
        int number = a.getNoteNumber();
        imageParams.setMargins(25+45*number, a.getHeight(), 20, 360);
        frame.addView(a.getMasterImage(),imageParams);
        }
    }
} 
```

}

```
public class note {
private int noteNumber;
private int height;
private ImageView masterImage;
public note(Context c){
    masterImage = new ImageView(c);
    masterImage.setImageResource(R.raw.zelda);
    this.noteNumber = 1;
    height = 0;
}
/**
 * @return the masterImage
 */
public ImageView getMasterImage() {
    return masterImage;
}
/**
 * @param masterImage the masterImage to set
 */
public void setMasterImage(ImageView masterImage) {
    this.masterImage = masterImage;
}
/**
 * @return the noteNumber
 */
public int getNoteNumber() {
    return noteNumber;
}
/**
 * @param noteNumber the noteNumber to set
 */
public void setNoteNumber(int noteNumber) {
    this.noteNumber = noteNumber;
}
/**
 * @return the height
 */
public int getHeight() {
    return height;
}
/**
 * @param height the height to set
 */
public void setHeight(int height) {
    this.height = height;
} 
```

}

# sms - SMS Draft Content Provider 的 URI 是什么？

> ID：10453385
> 
> 赞同：5
> 
> 时间：2012-05-04T17:22:39.573
> 
> 标签：sms, android-contentprovider

SMS 草稿的本机内容 URI 是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T13:19:01.477

您可以通过打开不同的方式打开每个短信部分。

1.  收件箱 =`"content://sms/inbox"`
2.  失败=`"content://sms/failed"`
3.  排队=`"content://sms/queued"`
4.  已发送 =`"content://sms/sent"`
5.  草稿 =`"content://sms/draft"`
6.  发件箱 =`"content://sms/outbox"`
7.  未送达 =`"content://sms/undelivered"`
8.  全部 =`"content://sms/all"`
9.  对话 = `"content://sms/conversations"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T18:01:28.757

SMS 的内容提供程序 URI 通常是

```
 content://sms/... 
```

对于 SMS 草稿，它是

```
 content://sms/drafts/ 
```

# c++ - 使用基类虚方法

> ID：10453390
> 
> 赞同：1
> 
> 时间：2012-05-04T17:23:13.343
> 
> 标签：c++

从这段代码开始：

```
class Base{
public:
    virtual void foo(){....}
};
class Derived{
public:
    void foo(){....}
}; 
```

如果`d`是一个`Derived`对象，我可以以某种方式调用基类中为该对象定义的 foo 方法吗？

*编辑：*我的意思是从外部，这样`d.foo()`绑定到 Base::foo()

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T17:26:42.703

在调用中明确指定它。

```
#include <iostream>

class Base{
public:
    virtual void foo(){
      std::cout << "Base" << std::endl;
    }
};
class Derived : public Base{
public:
    void foo(){
      std::cout << "Derived" << std::endl;

    }
};

int main()
{
  Derived d;
  d.Base::foo();
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T17:29:14.883

只需限定调用（假设`Derived`实际上继承自`Base`，在您的代码中它没有）：

```
Derived d;
d.Base::foo(); 
```

现在，虽然这是可行的，但也很值得怀疑。如果该方法是虚拟的，则意味着要被覆盖，并且用户不应调用特定的覆盖，而是调用*final-overrider*，否则他们冒着破坏类不变量的风险。

考虑到实现`Derived::foo`需要做一些额外的工作来保持一些不变量，如果用户调用`Base::foo`这些额外的工作将不会完成并且不变量被破坏，从而使对象处于无效状态。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T17:28:40.500

要从外部代码调用它，您仍然可以在调用中明确限定名称：

```
#include <iostream>
#include <vector>

struct base { 
    virtual void do_something() { std::cout << "Base::do_something();\n"; }
};

struct derived : public base { 
    virtual void do_something() { std::cout << "derived::do_something();\n"; }
};

int main() {

    derived d;

    d.base::do_something();
    return 0;
} 
```

如果您使用指向对象的指针，则将其更改为`d->base::do_something();`.

# c# - 线程之间以及托管和非托管代码之间的绑定

> ID：10453391
> 
> 赞同：0
> 
> 时间：2012-05-04T17:23:13.363
> 
> 标签：c#, c++, function-pointers, shared-memory

我有一个在第 3 方程序中使用的 C++ dll（特别是 directshow 过滤器）。我通过共享内存使用 C# 程序来控制它（所以在 C# 端使用 MemoryMappedFile，在 C++ 端使用 CreateFileMapping）。

**所以要清楚：没有1个程序。它是同时运行 2 个不同的程序，我希望非托管代码 (C++) 程序调用托管代码程序 (C#) 中的方法**

内存共享工作正常。我可以使用 C# 程序来更改和检查值，因为第 3 方程序使用 dll。

问题是我想有效地将​​我的 C# 程序的某些方面数据绑定到 C++ dll 中的值。也就是说，当第 3 方程序使用的 dll 中的值发生更改时，我希望它在 C# 程序中自动更新。

现在我当然可以在我的 C# 程序的另一个线程中每秒轮询一次值。但我想要的是让我的 dll 在 C# 中调用 PropertyChangedEventHandler。或者至少调用一个调用它的方法。

我的第一种方法是通过共享内存通过 IntPtr 传递 C# 方法的委托。

所以 C++ 查看共享内存，它看到了一个像这样的结构

```
struct MyStruct
{
    //...some ints, etc
    int (*ptr2Func)(int); //not sure if I need to change this to a void pointer, but then how do I cast it to a function pointer in my C++?
    //...etc
} 
```

我的 C# 代码查看共享内存并看到

```
struct MyStruct
{
    //...the same ints as in the C++
    public IntPtr ptr2Func;
    //etc..
} 
```

正如我所说，共享内存结构中的所有其他值都可以正常工作，我可以手动检查以查看或修改值。

当 C++ dll 的主进程初始化时，它将 ptr2Func 设置为 NULL。然后在尝试执行它之前确保它不为 NULL。

然后 C# 将其设置为本地方法：

```
unsafe public delegate int mydelegate(int input);
public myDelegate tempDele;
public int funcToBeCalled(int input)
{
        return (2);
}

// this code is inside a button click method right after it connects the C# program to the shared memory:
tempDele = this.funcToBeCalled;
sharedInstanceOfMyStruct->pt2Func = Marshal.GetFunctionPointerForDelegate(tempDele); 
```

在结构中的函数指针从 NULL 更改并且 DLL 中的代码尝试调用它之前，第 3 方程序很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:30:52.017

我不认为你可以做到这一点，基本上。这两个进程在不同的地址空间中运行。您存储在共享内存中的地址确实指向 C# 进程中的函数，但它不指向调用进程的代码。它只会崩溃。

您可以使用 WCF、命名管道或套接字将触发消息发送到其他应用程序。

# javascript - 如何使用jquery打开选择输入

> ID：10453393
> 
> 赞同：11
> 
> 时间：2012-05-04T17:23:19.413
> 
> 标签：javascript, jquery, select

所以我可以看到选择元素的选项，但我需要点击它。如果我想使用一个函数怎么办？当发生某些事情时，应该选择这个选择元素，这意味着列表是打开的，我可以看到选项。我不希望用户点击选择元素，我想要别的东西来打开它。

**我试过的**

```
$("select").select();
$("select").click();
$("select").focus(); 
```

有一个选择元素，通常如果你想打开它（下拉列表），你点击它。如果我单击 a`DIV`或其他任何内容，我想要打开它。我希望打开此下拉列表，而无需用户单击选择元素。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T18:01:56.743

这应该有效：

```
var element = $("select")[0], worked = false;
if (document.createEvent) { // all browsers
    var e = document.createEvent("MouseEvents");
    e.initMouseEvent("mousedown", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    worked = element.dispatchEvent(e);
} else if (element.fireEvent) { // ie
    worked = element.fireEvent("onmousedown");
}
if (!worked) { // unknown browser / error
    alert("It didn't worked in your browser.");
} 
```

[例子](http://jsfiddle.net/FVZkX/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-10T20:23:51.983

这里只是一个更新，因为接受的答案是正确的但已经过时并且`initMouseEvent`很快就会被弃用。[参见：[https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/initMouseEvent]](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/initMouseEvent])

请改用以下内容：`new MouseEvent`[参见：[https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent]](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent])

示例代码：

```
var el = $('select'); // grab the input (jQuery)
var event = new MouseEvent('mousedown'); // create the event listener
el.dispatchEvent(event); // attach the event listener to the element 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T17:26:19.470

我认为您不能强制选择框`drop down`使用任何代码。但您仍然可以使用代码更改所选选项。请看这个

[http://www.mredkj.com/tutorials/tutorial003.html](http://www.mredkj.com/tutorials/tutorial003.html)

# c++ - c++中的奇怪断点，Visual Studio在它周围画花

> ID：10453397
> 
> 赞同：1
> 
> 时间：2012-05-04T17:23:25.567
> 
> 标签：c++, visual-c++, visual-studio-2005, breakpoints

我不知道我在问什么，我试图用谷歌搜索这个问题，但我什么也没找到，因为我不知道要确切搜索什么。

我在 c++ 中有一些类，它没有做任何特别的事情，而我在运行时我试图在它的一个函数中放置一个断点，它执行以下操作：

1.  Visual Studio 2005 占用 100% cpu
2.  光标（不是鼠标，而是您在键入时看到的闪烁的东西）的闪烁速度比平时快 100 倍。
3.  在断点周围，视觉工作室以慢动作绘制 4 个小半圈，每个角落各有一个，使其看起来像是在画一朵花。
4.  当他画完花时，一切都恢复正常（光标和cpu）

我收集到的关于这些现象的线索和信息：

1.  类中有几个函数可以做到这一点，而几个没有。
2.  我没有发现他（vs2005）决定做和不做的任何模式。
3.  我在另一台计算机上用相同的代码检查了它，他也这样做了
4.  当我不在运行时并且程序停止时，这不会发生并且断点正常出现

不幸的是，我无法在此处复制代码，因为我在工作中无法访问互联网，但该课程并没有做任何特别的事情。

有没有人见过这种现象？

# java - 如何在 Java 中创建自定义列表模型

> ID：10453403
> 
> 赞同：0
> 
> 时间：2012-05-04T17:23:58.660
> 
> 标签：java, swing, jlist

我正在尝试创建显示联系人的列表，每个列表项在一行上显示姓名，在第二行上显示电话号码，也许还有图像或图标。我正在考虑为此使用两个标签，但我可以弄清楚如何使用自定义列表模型来实现这一点。

我的第一次尝试是在列表中添加一个包含我想要的信息的 Panel 对象，然后将其添加到默认列表模型的实例中，但这只会显示列表中的类名。

```
 DefaultListModel Clistmodel = new DefaultListModel();//
    Clistmodel.addElement(Contact);//Contact is an JPanel object
    GroupList.setModel(Clistmodel);//GroupList is the List object 
```

这根本不起作用然后我了解到默认列表模型只知道如何呈现我认为的字符串，所以我必须创建一个自定义列表模型或自定义 ListCellRenderer，我真的不知道哪个会解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T17:34:32.773

Your question asks how to create a custom list model, however, that's not what you need (I don't think) as a DefaultListModel will work nicely for you. Rather you will need to work on the renderer. You need to create a non-GUI class to hold your information that each item will display, probably your Contact class, and then create a JList that holds this in its DefaultListModel.

The key for you will be to then create a custom list cell renderer to display the information on multiple lines -- perhaps a JTextArea, or a JPanel that holds two JLabels in a GridLayout. Please understand that the renderer does not display the actual underlying components, but something more akin to a stamped image of whatever components you're trying to display, so it will not have the full behaviors available to it as the actual component would. It will take work, but the [writing a renderer section of the tutorial linked to by user714965](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer) will show you how to do this.

Please give it a try, and then if you still are stuck, come on back with your code, your errors, and your questions, and we'll be better able to give you specific help.

# .net - 在 iOS 应用程序中使用 .Net 的内置身份验证

> ID：10453405
> 
> 赞同：1
> 
> 时间：2012-05-04T17:23:59.160
> 
> 标签：.net, ios

我编写了一个 Web 应用程序，它使用连接到 SQL 服务器的 Microsoft 内置成员身份验证。我想知道使用同一个数据库对来自 iOS 应用程序的用户进行身份验证的最佳方式是什么？最终，我想创建一个应用程序打开的登录面板，它将根据我已经拥有的成员资格数据库验证用户名/密码。

这是可能的，还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:27:36.710

您应该编写一个 ASP.NET 或 WCF Web 服务来抽象出使用相同成员资格提供程序配置的数据库调用。

# ios - 找不到数据库... iOS/SQLite

> ID：10453407
> 
> 赞同：0
> 
> 时间：2012-05-04T17:24:07.603
> 
> 标签：ios, sqlite

我正在开发一个应用程序，该应用程序从文本字段中获取输入并将其放入字符串中。我有一个表，其中有一个字段，我想根据数据库中字段中的值检查输入中的字符串值。我是 iOS 新手，对 SQLite 还很陌生。

代码：

```
-(IBAction)setInput:(id)sender
{
NSString *strStoreNumber;
NSString *strRegNumber;

strStoreNumber = StoreNumber.text;
strRegNumber = RegNumber.text;
lblStoreNumber.text = strStoreNumber;
lblRegNumber.text = strRegNumber;

NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString* documentsDirectory = [paths lastObject];
//    NSString* databasePath = [documentsDirectory stringByAppendingPathComponent:@"tblStore.sqlite"];
NSString* databasePath = [[NSBundle mainBundle] pathForResource:@"tblStore" ofType:@"sqlite"];

if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) 
{

    NSLog(@"Opened sqlite database at %@", databasePath);

    //...stuff
} 
else 
{
    NSLog(@"Failed to open database at %@ with error %s", databasePath, sqlite3_errmsg(database));
    sqlite3_close (database);
}

NSString *querystring;

// create your statement
querystring = [NSString stringWithFormat:@"SELECT strStore FROM tblStore WHERE strStore = %@;", strStoreNumber];  

const char *sql = [querystring UTF8String];

NSString *szStore = nil;
NSString *szReg = nil;

if (sqlite3_prepare_v2(database, sql, -1, &databasePath, NULL)!=SQLITE_OK) //queryString = Statement
{
    NSLog(@"sql problem occured with: %s", sql);
    NSLog(@"%s", sqlite3_errmsg(database));
}
else
{
    // you could handle multiple rows here

    while (sqlite3_step(databasePath) == SQLITE_ROW) // queryString = statement
    {            
        szStore = [NSString stringWithUTF8String:(char*)sqlite3_column_text(databasePath, 0)];
        szReg = [NSString stringWithUTF8String:(char*)sqlite3_column_text(databasePath, 1)];
    } // while        

}

sqlite3_finalize(databasePath);

// Do something with data...  
} 
```

它到达“NSLog(@"Opened sqlite database at %@", databasePath);”行，所以它看起来好像可以访问数据库。但是，当我运行该应用程序时，我得到“NSLog(@"sql 问题发生在：%s", sql);” 错误，我可以在控制台中看到。此外，在控制台中，它显示“没有这样的表：tblStore”。

我使用 Firefox 附加组件 SQLite 管理器创建了表。我将 sqlite3 库添加到项目中。我将在 SQLite 管理器中创建的数据库表拖放到我的项目中，在我的两个 AppDelegate 文件和两个 ViewController 文件上方。

任何帮助或输入将不胜感激。谢谢！

编辑：我已将文件正确添加到项目中，看起来好像现在找到了表。不过，现在我有一些奇怪的警告：

“将'const char *'传递给'sqlite3_stmt *'类型参数的不兼容指针类型（又名'struct sqlite3_stmt *'）”

此警告出现在以下代码行中：

```
if (sqlite3_prepare_v2(database, sql, -1, &databasePath, NULL)!=SQLITE_OK)

while (sqlite3_step(sql) == SQLITE_ROW)

szStore = [NSString stringWithUTF8String:(char*)sqlite3_column_text(sql, 0)];

szReg = [NSString stringWithUTF8String:(char*)sqlite3_column_text(sql, 1)];

sqlite3_finalize(sql); 
```

它与“sql”有关，但我不确定是什么。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:53:52.613

Your code seems ok - did you copy the db to the ressource folder of your project?

**EDIT**

Make sure you access your db file with something like that:

```
 - (void) initializeDB {

        // Get the database from the application bundle
        NSString* path = [[NSBundle mainBundle] pathForResource:@"tblStore" ofType:@"sqlite"];

        if (sqlite3_open([path UTF8String], &database) == SQLITE_OK) 
        {
            NSLog(@"Opening Database"); 
        }
        else
        {
            // Call close to properly clean up
            sqlite3_close(database);

            NSAssert1(0, @"Error: failed to open database: '%s'.", 
                      sqlite3_errmsg(database));
        }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:56:19.240

添加到项目中的数据库文件将嵌入到主文件中`NSBundle`（请参阅 参考资料`[NSBundle mainBundle]`）。

为了做您想做的事，您需要先将数据库从主包复制到文档文件夹，然后再尝试访问它。否则，正如您所遇到的，您将无法在文档文件夹中找到 SQLite DB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T07:26:45.170

您可以复制您的数据库，单击查找器并在查找器中写入此地址（/Users/administrator/Library/Application Support/iPhone Simulator/6.1/Applications/）单击确定。你会得到跟单路径。打开您的项目文档文件并粘贴您的数据库....

# javascript - 这种方法有什么问题？

> ID：10453411
> 
> 赞同：2
> 
> 时间：2012-05-04T17:24:34.933
> 
> 标签：javascript, jquery, html, ajax, http-get

我正在执行这个函数，我不知道我缺少什么但是当 HELLO 充满 HTML 时 var BYE 是空的，这怎么会发生？

```
$.get(path+'productor/masnotas.jsp', function(data){
                    var hello = data; 
                    var bye = $(data).find("#columna1");
                            $("#columnauno").append($(data).find("#columna1"));
                                    },'html'); 
```

有人可以帮助我吗？

编辑：对不起，我赶时间，这是数据内容的一部分，然后它带有更多的 HTML，并由 #columna1 之外的另一个名为 #columna2 的 div 组成。当我更新页面时，我想使用一个 HTML/JSP 选择并将每个内容放在网络的每一列中：

```
<html>
<!-- Primera Columna --> 
<div class="span-12 first" id="columna1">
<br>
   <div class="caja">
    <b>Cambios en las denuncias por Self</b>
    <p style="text-align: justify;">
       Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet
       <a href="${self.monitor.basePath}siniestro/ayudaDenuncia.jsp" target="_blank">Leer más</a>
     </p>
    </div>
    <br>
    <div class="caja">
    <img border="0" align="left" src="${self.monitor.basePath}images/aapas.jpg"/>
    <b>Lorem ipsum dolor sit amet</b>
    <p style="text-align: justify;"> 
     Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis condimentum purus vel diam dictum non pharetra dolor vulputate. Aenean sed sapien leo, sed laoreet risus. Duis dictum volutpat imperdiet. Donec eros nibh, accumsan condimentum euismod laoreet, auctor vel lacus. Pellentesque felis tortor, laoreet eget varius eget, iaculis vitae turpis. Cras lobortis malesuada erat, nec sodales tellus porttitor eu. Vestibulum porttitor, neque vel aliquet porttitor, est tortor commodo magna, id faucibus orci massa at velit. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse arcu quam, volutpat ut ullamcorper in, laoreet eget diam. Pellentesque in massa nec massa dapibus vehicula. Sed nec lectus nisi, sed pharetra est. Ut leo metus, sagittis non blandit ac, adipiscing eu leo. <a href="#" target="_blank">ver nota completa</a>
     </p>
    </div>
    <br> 
```

**path 是系统路径，basepath = ${self.monitor.basePath}** **创建的 VARS 用于测试目的**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:28:39.300

不幸的是 find 在这种情况下不起作用，因为我怀疑`#columna1`不是后代。请尝试以下操作。

```
var bye = $('<div/>').html( data ).find('#columna1'); 
```

# bash - 源代码变量搜索替换（bash？）

> ID：10453420
> 
> 赞同：2
> 
> 时间：2012-05-04T17:25:19.650
> 
> 标签：bash, shell, replace

我正在对一个项目进行一些重构，并且我想自动替换许多（大部分）一次性本地常量。使用 IDE，我可以搜索替换，但它需要大量点击，并且有很多文件有很多变量（都在并且仅在某个文件夹下，所以我可以将它应用于文件夹中的每个文件）。以下半生不熟的正则表达式进行所需的替换：

```
Search string: (constant variable string )([a-zA-Z_]+)( = )("[A-Za-z\.]+")(;.*)(\2)(?![a-zA-Z_])
Replacement:   $1$2$3$4$5$4 
```

它丑陋且不实用，它只显示所需的行为：找到声明，并将下一次出现的变量替换为其值。我需要对每个常量应用不止一次，因为有些不是一次性使用。最后，我需要另一个搜索来删除声明本身。

我使用 Ubuntu，所以我想 bash 会是一个很好的工具，但我是 Linux 新手，我找不到此类任务的脚本。我也可以用语言本身对此进行编码，但肯定会花费更长的时间。

有人可以告诉我这样做的方法吗？我可以适应这种情况的一些例子也很棒。

* * *

编辑：以艰难的方式完成 PHP 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:37:48.753

sed 是你的朋友

```
sed -i -e 's/original/replacement/g' files 
```

其中文件可以是 glob 模式，例如 *.c 等。

如果您需要更多功能并遇到特殊字符问题，您可能还想研究一下 perl，因为后者有更多的工具来做这样的事情。

# mysql - 使用另一个表更新时更新 MySQL 行

> ID：10453426
> 
> 赞同：0
> 
> 时间：2012-05-04T17:26:15.997
> 
> 标签：mysql, triggers, sql-update

我正在尝试在更新行时使用触发器来更新数据库中的列。

这是触发器

```
CREATE
DEFINER=`root`@`localhost`
TRIGGER `mysql_development`.`update_translated_position`
BEFORE UPDATE ON `mysql_development`.`players_to_teams`
FOR EACH ROW
BEGIN
    UPDATE players_to_teams
    INNER JOIN position_translator
    ON NEW.position = position_translator.RawPosition
    SET NEW.translated_position = position_translator.NCAAposAbbrev1;
END$$ 
```

我需要`translated_position`从原始`position`输入“计算”（以防有人给我一个非标准的位置）。

我认为这是锁定行，因为我收到 1096，没有使用表错误。

我需要`players_to_teams`使用外部`position_translator`表更新正在更新的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:53:52.443

Use `SET` directly rather than `UPDATE` (and therefore avoid the join altogether):

```
SET NEW.translated_position := (
  SELECT NCAAposAbbrev1 FROM position_translator WHERE RawPosition = NEW.position
); 
```

# java - findbugs 性能检测器

> ID：10453431
> 
> 赞同：2
> 
> 时间：2012-05-04T17:26:33.480
> 
> 标签：java, performance, findbugs

是否有任何开源 findbugs 检测器扩展，尤其是针对性能错误和低延迟？除了准系统 findbugs impl，我没有找到任何有意义的扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:37:48.143

我使用 IntelliJ 中的代码分析它有很多检测和自动修复。

我还没有看到任何低延迟的东西。通常这意味着显着更改代码以最小化锁的使用或丢弃对象。

使用商业分析器是最好的开始。为您的特定用例创建一些微基准。关键路径的代码审查很有用，我会添加可以在生产中记录的纳秒时间戳，看看每个阶段实际花费了多长时间。尤其是如果你想要少于 100 微秒的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:43:23.007

检查[CodePro Analytix](https://developers.google.com/java-dev-tools/codepro/doc/)是否提供这样的功能。好吧，这不是一个 findbugs 插件。

# c# - wp7 - 恢复被隔离存储工具删除的文件

> ID：10453438
> 
> 赞同：1
> 
> 时间：2012-05-04T17:27:23.860
> 
> 标签：c#, windows-phone-7

好的，我有大量数据保存在我的应用程序中，并通过独立存储工具下载。然后我更新了我的应用程序并将保存的数据上传回手机，当我不小心点击了擦除保存数据的下载按钮时:-(

所以我想好吧，我会运行一些软件来恢复我电脑上已删除的文件，因为它刚刚发生......不，他们的文件没有找到。（注意我将软件安装到不同的驱动器，所以它不会覆盖已删除的文件）

我电脑上的那些文件真的消失了吗？即从独立存储工具下载是否真的永久删除了我拥有的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:36:01.380

如果您没有将文件存储在`IsoStore`应用程序本身或本地某处，则无法恢复文件。

# android - 如何在两个不同的活动中共享进度条的进度

> ID：10453439
> 
> 赞同：0
> 
> 时间：2012-05-04T17:27:27.503
> 
> 标签：android, progress-bar, android-asynctask

*   在一项活动中，AI 将多个文件从服务器下载到我的设备。
*   进度条显示当前下载的进度。

*   我可以一次进行多个下载，并且我希望活动 B 显示我所有下载的列表，每次下载都带有进度条。

-问题是当我通过菜单启动它时，我真的不知道如何将每次下载的进度分享到活动 B。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:31:08.393

设置下载`Service`，而不是仅使用 an`AsyncTask`来获取您的文件。然后，任何`Activity`对所述下载进度感兴趣的人都可以绑定`Service`并注册一个侦听器以获取进度更新，然后将其反映在适合相应`Activity`s 的任何 UI 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:33:06.057

我正在做类似的事情，并且使用本地广播取得了成功。我将所有上传逻辑都包含在一个服务中，该服务又使用一个异步任务，当我需要更新进度时，我会发送广播。在我的活动的 onResume 中，我注册以接收通知，而我在 onPause 中取消注册。这样当前的活动可以更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:53:11.460

1）在Application Object（扩展Application Supper类的类）中声明进度条。现在整个应用程序都可以访问进度条。

2)更新Activity A中的进度条。

3)通过调用getApplication()获取Activity B中ProgressBar的实例；

# jaxb - MOXy 如何处理空数组

> ID：10453441
> 
> 赞同：2
> 
> 时间：2012-05-04T17:27:33.353
> 
> 标签：jaxb, jersey, moxy

在我的 Jersey 项目中，我使用 MOXy 编组到 JSON 或从 JSON 编组。我要编组的一个类是一个可能为空的字符串数组。

```
class Data
{
   @XmlElement(nillable = true) public String[] array;
} 
```

在数组为空的情况下，我希望输出为：

```
{ 
   "array" : []
} 
```

但是看起来 MOXy 正在从输出中过滤掉空数组。如何让它在输出中包含空数组？

我正在考虑将 JSONConfiguration.mapped().array("array").build() 添加到 MOXy 提供程序构造函数，但这似乎没有什么不同（我什至不确定它是否是正确的解决方案）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:33:58.740

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB 2 (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**原始答案**

已输入以下增强请求。您可以使用下面的链接来跟踪我们在此问题上的进展。

*   [http://bugs.eclipse.org/378894](http://bugs.eclipse.org/378894)

* * *

**更新**

从 2012 年 5 月 19 日 EclipseLink 2.4.0 标签开始，您可以设置以下属性来获取您正在寻找的行为。

```
marshaller.setProperty(MarshallerProperties.JSON_MARSHAL_EMPTY_COLLECTIONS, true); 
```

您可以从以下位置下载每晚的 EclipseLink 标签：

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

**根**

在下面的类中，我们有三个`List`属性。两个`List`对象是空的，一个是空的。请注意，该`emptyChoiceList`字段是用 映射的`@XmlElements`。`@XmlElements`注释指出可能的节点名称是`foo`和`bar`。

```
package forum10453441;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlType(propOrder={"nullList", "emptyList", "emptyChoiceList"})
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    private List<String> nullList = null;

    private List<String> emptyList = new ArrayList<String>();

    @XmlElements({
        @XmlElement(name="foo", type=String.class),
        @XmlElement(name="bar", type=String.class)
    })
    private List<String> emptyChoiceList = new ArrayList<String>();

} 
```

**演示**

以下代码演示了如何指定`MarshallerProperties.JSON_MARSHAL_EMPTY_COLLECTIONS`属性。

```
package forum10453441;

import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.MarshallerProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty(MarshallerProperties.MEDIA_TYPE, "application/json");
        marshaller.setProperty(MarshallerProperties.JSON_MARSHAL_EMPTY_COLLECTIONS, true);

        Root root = new Root();
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

现在在输出中，空列表被编组为空数组。对于与`@XmlElememts`指定的节点名称映射的字段，在 JSON 表示中使用。

```
{
   "emptyList" : [ ],
   "foo" : [ ]
} 
```

# android - 通过保持纵横比在 Android 中裁剪图片

> ID：10453446
> 
> 赞同：4
> 
> 时间：2012-05-04T17:27:56.317
> 
> 标签：android, image, crop

我使用此代码开始裁剪活动，并将裁剪后的图片作为 onActivityResult 中的数据返回。所以这很好用。

```
 Intent intent = new Intent("com.android.camera.action.CROP");
    intent.setType("image/*");

    List<ResolveInfo> list = getPackageManager().queryIntentActivities(
            intent, 0);

    int size = list.size();

    if (size == 0) {
        Toast.makeText(this, "Can not find image crop app",
                Toast.LENGTH_SHORT).show();
        return;
    } else {
        intent.setData(mImageCaptureUri);

        intent.putExtra("outputX", 200);
        intent.putExtra("outputY", 200);
        intent.putExtra("scale", true);
        intent.putExtra("return-data", true);

        Intent i = new Intent(intent);
        ResolveInfo res = list.get(0);

        i.setComponent(new ComponentName(res.activityInfo.packageName,
                res.activityInfo.name));

        startActivityForResult(i, CROP_FROM_CAMERA); 
```

这是将图像裁剪为 200x200 大小的代码，与我在裁剪活动中选择的纵横比无关。我担心的是，我想要在活动中使用矩形选择的纵横比，而不是通过放置数字 200 和 200 来固定。

但是当我注释掉这两行时，我的程序将强制关闭....

是否有任何解决方案可以精确地裁剪到我在裁剪活动中选择的图片部分，同时保持我放置在图片上的矩形的纵横比？我必须添加哪些数据作为额外数据？需要帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:34:05.963

> [How to crop a rectangle from an image in android](https://stackoverflow.com/questions/9282828/how-to-crop-a-rectangle-from-an-image-in-android)
> 
> Cropping to anything other than a square shape is not possible using the built-in Android cropping handling (com.android.camera.action.CROP).

Look at the OP's reply in the next thread - and you might have a solution.

This thread also has some good suggestions:

*   [How to select and crop an image in android?](https://stackoverflow.com/questions/2085003/how-to-select-and-crop-an-image-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:09:25.110

只需为纵横比添加以下代码行`0.75`

```
intent.putExtra("aspectX", 3);
intent.putExtra("aspectY", 4); 
```

并将比例设置为`true`。

这应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:12:16.093

考虑到其他人可能会带着同样的问题来到这个帖子，现在回答可能有点晚了。

```
cropIntent.putExtra("aspectX", 1);
cropIntent.putExtra("aspectY", 1); 
```

将确保你总是得到一个矩形。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T01:27:51.353

从图库中选择图像并裁剪以保持所需的纵横比。在这种情况下，比率为 BANNER_WIDTH_PX:BANNER_HEIGHT_PX。

```
protected static final int REQ_CODE_PICK_BANNER = 2; //identificador del inten
private static final int BANNER_WIDTH_PX = 640;
private static final int BANNER_HEIGHT_PX =244;

   protected void startSelectorBanner(){
        Intent photoPickerIntent = new Intent(Intent.ACTION_PICK,
            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            photoPickerIntent.setType("image/*");
            photoPickerIntent.putExtra("crop", "true");
             photoPickerIntent.putExtra("aspectX",BANNER_WIDTH_PX);  
             photoPickerIntent.putExtra("aspectY",BANNER_HEIGHT_PX);  
             photoPickerIntent.putExtra("outputX",BANNER_WIDTH_PX);  
             photoPickerIntent.putExtra("outputY",BANNER_HEIGHT_PX);  
            photoPickerIntent.putExtra("return-data", true);
            photoPickerIntent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
            startActivityForResult(photoPickerIntent, REQ_CODE_PICK_BANNER);        
  }

public void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) {

            getMainActivity().removeOnActivityResultsListeners(EditQcardFragment.this); 

            switch (requestCode) {
               case REQ_CODE_PICK_BANNER:
                    if (resultCode == Activity.RESULT_OK) {  
                        if (imageReturnedIntent!=null) {
                            Bundle extras = imageReturnedIntent.getExtras();          
                            Bitmap selectedBitmap = extras.getParcelable("data");
                            int[] screenSize = Screen.getSize(getActivity()); 
                            int bannerX = screenSize[0]; 
                            int bannerY = (int) (screenSize[0]/BANNER_RATIO);  

                            Bitmap resizedBitmap = processPicture(selectedBitmap,"banner.png",bannerX,bannerY);
                            mBytesBanner = getPictureBytes("banner.png", resizedBitmap); 
                            log.debug("Get png width: " + mBytesBanner.length);
                            if(mBytesBanner!=null){
                                  mBanner.setImageBitmap(resizedBitmap);
                            }

                        }
                    }break; 
            }       
    } 
```

# iphone - NSInvalidArgumentException'，原因：'谓词的未知谓词类型：BLOCKPREDICATE（0x70ad750）'错误

> ID：10453448
> 
> 赞同：11
> 
> 时间：2012-05-04T17:28:02.153
> 
> 标签：iphone, objective-c, core-data, predicate, nsfetchrequest

我有一个核心数据数据库，我正在尝试使用块谓词创建一个提取请求，但我收到一个未知谓词错误：

> **注意：** employeeToHouse 是一个 House 类型的属性，它是在我继承 NSManagedObject 时为我创建的

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Place"];
request.predicate       = [NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
    Place *sortPlace            = (Place *)evaluatedObject;
    CLLocation *placeLocation   = [[CLLocation alloc] initWithLatitude:sortPlace.latitude.doubleValue 
                                                             longitude:sortPlace.longitude.doubleValue];
    CLLocationDistance distance = [placeLocation distanceFromLocation:self.userLocation];
    sortPlace.distanceToUser    = [NSNumber numberWithDouble:distance];
    if(distance<3000)
    {
        return YES;
    }
    return NO;
}];
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@ "distanceToUser" 
                                                                                 ascending:YES 
                                                                                  selector:@selector(localizedCaseInsensitiveCompare:)]];

[self.loadingView removeSpinner];
[self setupFetchedResultsControllerWithFetchRequest:request]; 
```

然后我得到这个错误：

> NSInvalidArgumentException'，原因：'谓词的未知谓词类型：BLOCKPREDICATE（0x70ad750）'

难道我做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T07:37:38.023

AFAIK 您不能将块谓词与 CoreData 一起使用。

在此处查看投票最多的答案：[NSFetchRequest 和 predicateWithBlock](https://stackoverflow.com/questions/3543208/nsfetchrequest-and-predicatewithblock)

原因是 CoreData 无法将块中包含的 C 代码转换为 SQL 查询。

# android - viewpager 中的不同布局

> ID：10453456
> 
> 赞同：2
> 
> 时间：2012-05-04T17:28:41.130
> 
> 标签：android, android-fragments, android-viewpager, android-adapter, swipe-gesture

我正在尝试做一些类似 android 市场的事情来展示不同类别的产品。我已经用[这个](https://github.com/astuetz/ViewPagerExtensions)库实现了这种行为，而且一切都运行良好。

我现在要做的是在类别页面中有一个列表视图，在其他每个类别中都有一个网格视图。当然，他们每个人都有不同的数据来源。

我怎样才能做到这一点？跟适配器有关系吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T17:46:35.780

我找到了一个很好的例子，你可以在这个网站上找到

[https://github.com/astuetz/ViewPagerExtensions](https://github.com/astuetz/ViewPagerExtensions)

否则希望此代码对您有所帮助。

```
@Override
public Object instantiateItem(View collection, int position) {
    View v = new View(PatientView.this.getApplicationContext());
    final LayoutInflater inflater = (LayoutInflater) PatientView.this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    switch (position) {
    case 0:
        v = inflater.inflate(R.layout.patientp1,
                (ViewGroup) null, false);
        ((Button) v.findViewById(R.id.pp1btnbck)).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                finish();
            }
        });

        break;
    case 1:
        v = inflater.inflate(R.layout.patientp2, null, false
                );
        break;
    default:

        TextView tv = new TextView(PatientView.this.context);
        tv.setText("Page " + position);
        tv.setTextColor(Color.WHITE);
        tv.setTextSize(30);
        v = tv;
        break;
    }
    ((ViewPager) collection).addView(v, 0);

    return v;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:35:17.193

我认为您希望根据 ViewPager 中的索引/位置扩展[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)、覆盖`getItem`并返回正确的 Fragment 对象（或 ListFragment）。

在您的 Activity 的布局 xml 中，您应该包含一个`ViewPager`( `<android.support.v4.view.ViewPager>`)，并在您的 Activity 中`onCreate`使用 的`setAdapter`方法`ViewPager`来分配您的`FragmentPagerAdapter`.

# linq - 用于转换 CSV 数据的 LINQ 查询

> ID：10453457
> 
> 赞同：0
> 
> 时间：2012-05-04T17:28:44.307
> 
> 标签：linq, csv, linq-to-objects

我是 LINQ 的新手，希望有人可以帮助我编写这个查询来转换一些数据。我有一个`Dictionary<DateTime, string>`包含这样的数据....

```
<01/07/12 00:00, "23,5,654,12,55,45,12,46,673,325,377,234,867,43,1,123,53,12,23,667,23,45,456,87">

<02/07/12 00:00, "22,63,567,13,64,6,4,64,7,2,5,234,667,787,326,234,64,24,5,76,23,556,77,34">

<03/07/12 00:00, "3,746,34,623,5,76,23,6,23,2,78,4,234,76,4,6,8,7,4,3,7645,23,34,6"> 
```

ETC...

这本字典有一个键，它是一个日期和一个值，它是一个包含 24 个数字的 CSV 字符串（从 00:00 开始，一天中的每个小时一个）。我想把它转换成字典

```
<01/07/12 00:00, 23>

<01/07/12 01:00, 5>

<01/07/12 02:00, 654> 
```

ETC...

我一直在尝试一段时间，认为答案在于使用 SelectMany，但无法让任何工作。我知道我可以使用一些循环来做到这一点，但我真的很想看到一个 LINQ 实现。

如果你能帮助我，非常感谢。科林。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:16:18.260

这个怎么样：

```
var dict = new Dictionary<DateTime, string>
{
    { new DateTime(2012, 7, 1), 
        "23,5,654,12,55,45,12,46,673,325,377,234,867,43,1,123,53,12,23,667,23,45,456,87" 
    },
    { new DateTime(2012, 7, 2), 
        "22,63,567,13,64,6,4,64,7,2,5,234,667,787,326,234,64,24,5,76,23,556,77,34" 
    }
};

dict.Select (d => d.Value.Split(new []{','})
    .Select ((v,i) => new {
        DateTime=d.Key.AddHours(i), Value=v}))
    .SelectMany (d => d)
    .ToDictionary (d => d.DateTime, d => int.Parse(d.Value)); 
```

# visual-studio-2010 - 使用 Visual Studio 2010 进行最佳 XAML 编辑

> ID：10453459
> 
> 赞同：0
> 
> 时间：2012-05-04T17:28:56.707
> 
> 标签：visual-studio-2010, silverlight, xaml, ide, editor

我最近开始在 Visual Studio 中开发 Silverlight 应用程序，并注意到那里的 XAML 编辑器不是最佳的。意思是，我可以在具有漂亮颜色的文本编辑器中看到 XAML，但除此之外，它并没有给我带来太多生产力，比如 C# 代码，所有方法和参数列表都在下拉列表和其他有用的视图和窗口中。VS2010 中是否真的没有太多支持来更轻松地编辑 XAML 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:16:19.140

你可以尝试使用像[ReSharper这样的东西](http://www.jetbrains.com/resharper/)

# php - 如何显示准确的类别帖子计数？

> ID：10453460
> 
> 赞同：0
> 
> 时间：2012-05-04T17:28:57.273
> 
> 标签：php, wordpress, categories

我的博客侧边栏中有一些代码，旨在显示特定类别中的帖子数量。它有效，有点。它只会显示到数字 5，然后停止更新帖子计数。关于如何解决的任何想法？

这是其中一个类别的代码：

```
<?php 
   $count_posts = get_posts('post_type=post&category_name=Software') 
?>
   <li id="nav1">
   <a class="<?php if ($current_cat == get_cat_ID('Software')) echo "software-active active"; ?>" href="<?php echo get_category_link(get_cat_ID('Software')) ?>" title="Software">Software (<?php echo count($count_posts) ?>)</a> 
```

这是[博客的链接](http://iqnavigator.com/blog/)。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:33:08.270

改变：

```
get_posts('post_type=post&category_name=Software') 
```

至：

```
get_posts('post_type=post&category_name=Software&numberposts=-1'); 
```

# jquery - 用jquery设置选择字段的样式？

> ID：10453462
> 
> 赞同：0
> 
> 时间：2012-05-04T17:29:14.040
> 
> 标签：jquery, css, select

我知道有一些插件允许您使用 jquery 在表单中设置选择字段的样式。然而，他们已经完成了我所需要的。我只需要加粗某些选项以及缩进选项的能力。除此之外，只希望选择字段看起来像一个普通的选择字段。我可以使用 css 来设置样式，但在 IE 等浏览器中不起作用。我基本上希望它看起来像下图，可以通过 jquery 实现吗？我尝试了 optgroup，但您无法选择 optgroup 选项：

![在此处输入图像描述](../Images/ea7101362ceba2ac52c6f3e1478454dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:38:07.250

你的问题真的没有意义。您说您不想将 jquery 插件用于自定义选择，但您询问是否可以使用 jquery 设置选择样式。

你对 IE 是正确的。使用 CSS 可以获得的最佳效果是设置 optgroup 的样式，但就像您说的那样，您不能选择那些。这篇[文章](http://www.electrictoolbox.com/style-optgroup-option-css-ie/) 很好地解释了你能做什么和不能做什么。

检查选择[框](http://labs.abeautifulsite.net/jquery-selectBox/)。我以前用过它，我发现应用自己的风格非常轻松。另一个好处是下拉列表在所有浏览器中看起来都一样，而本机选择元素会有所不同。

# jquery - jQuery - 反序列化一个序列化的字符串

> ID：10453464
> 
> 赞同：8
> 
> 时间：2012-05-04T17:29:16.257
> 
> 标签：jquery, serialization

在 jQuery 中，有一种方法可以获取由 jQuery 序列化的序列化字符串，并取消序列化字符串并将值放入正确位置的表单中（即，将文本插入输入字段和文本字段检查正确的复选框和单选）按钮并选择正确的选择选项）。还是我需要制作一个脚本来直接插入字段的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T22:22:11.457

我最终找到了一个可以解决问题的 jQuery 插件：

[https://github.com/kflorence/jquery-deserialize](https://github.com/kflorence/jquery-deserialize)

我所要做的就是包含文件并调用函数，剩下的就交给它了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:38:15.647

您可能想要使用 MVVM 类型的框架。我目前正在为此使用 Kendo UI。它相对较新，但效果很好：

[http://demos.kendoui.c​​om/web/mvvm/index.html](http://demos.kendoui.com/web/mvvm/index.html)

您可以在此处绑定数据，然后将特定属性映射到字段。

还有其他框架，例如淘汰赛 js [http://knockoutjs.com/](http://knockoutjs.com/)，但我们在公司使用 Kendo UI。

希望这可以帮助！

谢谢

# sql - 使用 sp_executesql 在不执行查询的情况下计算查询结果

> ID：10453467
> 
> 赞同：2
> 
> 时间：2012-05-04T17:29:32.250
> 
> 标签：sql, tsql

是否可以在不执行查询的情况下使用 sp_executesql 计算查询返回的结果数？我的意思是说：

我有一个以字符串形式获取 sql 查询的过程。例子：

```
SELECT KolumnaA FROM Users WHERE KolumnaA > 5 
```

我想指定此查询将返回多少结果的计数，并将其存储在变量中，但我不想实际执行查询。

我不能使用这个解决方案：

```
EXECUTE sp_executesql @sql          
SET @allCount = @@rowcount 
```

因为它除了获取返回的行数之外，还返回查询结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T17:32:14.850

你能不能像这样从上面的查询中生成另一个查询

SELECT count(*) FROM Uzytkownicy WHERE KolumnaA > 5

然后执行？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:44:37.843

一般情况下...

```
SELECT COUNT(*) FROM ( <your query> ) 
```

...在您的情况下可以简化为：

```
SELECT COUNT(*) FROM Users WHERE KolumnaA > 5 
```

它不能做得更便宜的原因是在 DBMS 管理的数据中没有隐藏的“计数器”。DBMS 甚至不知道表中的总行数，更不用说满足事先不知道的条件（例如`KolumnaA > 5`）的行数。

因此，计数需要实际找到数据，因此需要“真实”查询。幸运的是，所有这一切都发生在服务器上，只有少量数据传输到客户端（计数本身），因此假设您的数据被正确索引，它应该非常快。

但是要注意一致性：仅仅因为计数查询返回了一定的计数，并不意味着“真正的”查询将返回相同数量的行（在多个客户端可能同时修改数据的环境中）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T17:42:27.820

我认为这个问题有两个部分，我将解决。

问题的第一部分是如何返回行数而不是查询结果。这是使用 Count(item) 完成的。使用 Count(1) 而不是 Count(KolumnaA) 可能会稍微快一些，因为它只计算要返回的行数，而不是检索特定列。

```
SELECT Count(1) FROM Users WHERE KolumnaA > 5 
```

第二部分是将其分配给变量。如果需要使用 sp_executesql，可以如下操作：

```
Declare @sql varchar(4000)
Declare @allCount int
Set @sql = 'SELECT 1 FROM Users WHERE KolumnaA > 5'
sp_executesql(@sql)
SET @allCount = @@rowcount 
```

或者，您可以尝试使用 sp_executesql 输出功能：

```
DECLARE @allCount int

EXEC sp_executesql
   N'@allCount = SELECT Count(1) FROM Users WHERE KolumnaA > 5',
   '@allCount int OUTPUT',
   @allCount OUTPUT 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T17:32:39.940

利用：

```
SELECT COUNT(1) FROM Uzytkownicy WHERE KolumnaA > 5 
```

是的，它确实执行了一个查询。但它不返回除行数以外的结果。

否则，我看不出如何避免返回结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T17:41:58.427

它将执行查询，但只会返回计数而不是实际结果。

```
SELECT count(*) FROM Uzytkownicy WHERE KolumnaA > 5 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-16T20:13:17.517

这是我发现的结果：

[在 sp_executesql 中获取行数](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/ad7de55f-7dfa-4b80-bae5-c3a42fa9feeb/getting-rowcount-for-spgetrowcount-and-returning-the-results-back-to-another-stored-procedure)

基本上，重写您的查询如下：

```
DECLARE @SQL NVARCHAR(1000)
DECLARE @Count INT
SET @SQL = 'SELECT KolumnaA FROM Users WHERE KolumnaA > 5; SELECT @Count = @@ROWCOUNT;'
DECLARE @Params NVARCHAR(100)
SET @Params = '@Count INT OUTPUT'

EXEC sp_executesql @SQL, @Params, @Count = @Count OUTPUT
PRINT @Count  --should return the number of rows 
```

干杯。

# java - f：带条件的参数

> ID：10453468
> 
> 赞同：2
> 
> 时间：2012-05-04T17:29:33.280
> 
> 标签：java, jsf

我`f:param`喜欢下面...

```
<f:param name="NDCID" value="#{selectedMedicationInfoBean.NDCID}"></f:param>
<f:param name="insuranceID" value="#{selectedMedicationInfoBean.insurance.id}"></f:param> 
```

在少数情况下

```
#{selectedMedicationInfoBean.insurance.id} 
```

为空。我们能阻止它吗？我不能在 JSF 表达式中使用车削运算符。

```
<f:param name="insuranceID" value="#{selectedMedicationInfoBean.insurance.id=null?'':selectedMedicationInfoBean.insurance.id}"> 
```

还有其他方法吗？

* * *

功能需求：在page1上有一个链接`detail`。这将在 page2 上显示详细信息。作为参数需要传递大约 6 个参数。在这些参数的基础上，详细页面将生成信息。

问题在于这 6 个参数 2 可以为空，并且出现以下错误的原因`page1`。

```
java.lang.NullPointerException
com.sun.faces.renderkit.RenderKitUtils.getCommandLinkOnClickScript(RenderKitUtils.java:934)
com.sun.faces.renderkit.html_basic.CommandLinkRenderer.getOnClickScript(CommandLinkRenderer.java:295)
com.sun.faces.renderkit.html_basic.CommandLinkRenderer.renderAsActive(CommandLinkRenderer.java:357)
com.sun.faces.renderkit.html_basic.CommandLinkRenderer.encodeBegin(CommandLinkRenderer.java:165)
javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:788)
org.apache.myfaces.shared_tomahawk.renderkit.RendererUtils.renderChild(RendererUtils.java:433)
org.apache.myfaces.shared_tomahawk.renderkit.RendererUtils.renderChildren(RendererUtils.java:419)
org.apache.myfaces.shared_tomahawk.renderkit.RendererUtils.renderChild(RendererUtils.java:440) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:51:42.393

该异常是由一个旧的 Mojarra 1.2 错误引起的，当`<f:param>`值为`null`. 它已在 Mojarra 1.2_05 中修复（或者可能是之前或之后的一个版本，不确定了，已经超过 6 年了）。只需升级到目前已经在[1.2_15](http://javaserverfaces.java.net/)的最新 Mojarra 1.2 。

另一种方法是将它包装在 a 中，但这很丑陋，并且如果被声明为某个父组件的 the`<c:if>`也将不起作用。`selectedMedicationInfoBean``var``UIData`

```
<c:if test="${not empty selectedMedicationInfoBean.insurance.id}">
    <f:param name="insuranceID" value="#{selectedMedicationInfoBean.insurance.id}" />
</c:if> 
```

另一种选择是指定默认值`0`or`-1`并在控制器中进行相应处理。

```
<f:param name="insuranceID" value="#{not empty selectedMedicationInfoBean.insurance.id ? selectedMedicationInfoBean.insurance.id : -1}" /> 
```

升级是最好的选择。你不想和史前图书馆坐在一起。

# ruby-on-rails-3 - Rails 3 - Object.try 语法

> ID：10453474
> 
> 赞同：0
> 
> 时间：2012-05-04T17:29:59.670
> 
> 标签：ruby-on-rails-3

我将如何避免使用 Object.try 对以下内容进行 nil 检查？

```
<%= image_tag(PeriodState.where("sla_id = ?", sla.id).last.state.image_file) %> 
```

我尝试了很多不同的方法，但仍然收到错误，所以我的语法是关闭的。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:38:50.593

`try`不太适合这个：无论结果`image_tag`如何，总是会被调用 - 所以你最终可能会用 nil 调用它。您需要先检查图像是否存在，然后才在这种情况下创建图像标签。所以我会在你的控制器中得到 PeriodState 并`if`在你的视图中有一个简单的：

```
# in controller
@period_state = PeriodState.where("sla_id = ?", sla.id).last

# in view 
<%= image_tag(@period_state.state.image_file) if @period_state %> 
```

当然，如果其中之一`state`或`image_file`也可能为零，这将不起作用。

# ruby-on-rails - 登台数据库总是从 rake 任务中挑选出来的

> ID：10453476
> 
> 赞同：0
> 
> 时间：2012-05-04T17:30:08.460
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在 /lib/tasks 文件夹下以这种方式编写的应用程序中有一个 rake 任务

```
task :import_feed => :environment do
  url = "url"
  decode json here
  post=Post.new
  post.attributes
  post.save
end 
```

每次我运行此任务时，我都会收到未配置暂存数据库的错误消息。不管我是做 RAILS_ENV=production 还是 RAILS_ENV=development。这可能是什么原因？

# jquery - Bootstrap Tabbable Nav 将 Tab-Section2 高度设置为 Tab-Section1

> ID：10453477
> 
> 赞同：0
> 
> 时间：2012-05-04T17:30:13.400
> 
> 标签：jquery, css, twitter-bootstrap

我有一个带有 2 个选项卡窗格的选项卡导航。两个选项卡内容都是动态的，但第一个选项卡内容的行数总是多于第二个选项卡内容。当我单击第二个选项卡窗格时，我不希望第二个选项卡内容折叠。我想让第二个标签的内容高度与第一个相同。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:49:06.607

You could override the CSS for `.tab-pane` and set the `height` attribute if you want all tabs to be the same height:

```
.tab-pane {
    height: 400px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T10:55:17.180

按照 Serkan 的建议使用 Jquery 并在一行中做到这一点。唯一的选择器是限制 .tab-pane 选择

```
$(document).ready(function(){
    // Fix the height of the inner tabs
    $('#unique_selector .tab-pane').css('height', $('#unique_selector .tab-pane').css('height') );
}); 
```

# c# - 获取 AGPA 的 SQL 语法

> ID：10453481
> 
> 赞同：1
> 
> 时间：2012-05-04T17:30:21.420
> 
> 标签：c#, asp.net, sql

嗨，我有以下三个表

![在此处输入图像描述](../Images/f070316ece121a460af0ef5f799b0d88.png)

我想获得用户通过的课程的 AGPA

![在此处输入图像描述](../Images/aaa90a30dcf187dec5c4d7c334a89022.png)

我使用了这个 SQL 语法

```
string queryString = 
     "select R.mark, c.NumberOfCredits 
      from Courses c, RegisteredIn R 
      where R.CourseId=c.id and R.StudentId=StudentId and 
            R.mark > 60 R.mark themark,c.NumberOfCredits credit 
            select (sum(themark*credit)/sum(credit))*0.04 AGPA    "; 
```

我这样做是为了打印出结果

```
using (SqlConnection connection = new SqlConnection(connectionString)){
        SqlCommand command = new SqlCommand(queryString, connection);

        connection.Open();
        System.Data.SqlClient.SqlDataReader reader = command.ExecuteReader();
        reader.Read();

        result = string.Empty;

        _AGPA = reader[3].ToString();

        result += string.Format("Your GPA : {0} </br>  ",_AGPA);

       Response.Write(result);
       reader.Close();
 } 
```

我很确定 SQL 语法是错误的 我收到这个错误

![在此处输入图像描述](../Images/420961c19ebc04eafe2c71c169c384e2.png)

请告知如何解决它以及我在哪里做错了。

谢谢

* * *

更新 ：

数据类型如下和我使用 SQL Server 数据库 ![在此处输入图像描述](../Images/bad94ad9bb9f193b6abdab4fd159dc8d.png)

* * *

更新 2：

StudentId 通过页面的 URL 传递，如下所示

```
http://localhost:3401/MobileWebWIthConnection/showagpa.aspx?StudentId=20111 
```

在我读的代码中

```
string StudentId = Request.Params["StudentId"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:38:36.380

试试这个查询，它返回 AGPA for StudentId

```
select (sum(cast(R.mark as numeric) * cast(c.NumberOfCredits as numeric)) / sum(cast(c.NumberOfCredits as numeric)))*0.04 AGPA
from Courses c join RegisteredIn R 
on R.CourseId = c.id 
where R.StudentId = @studentId and R.mark > 60 
```

在你的线路之后

```
SqlCommand command = new SqlCommand(queryString, connection); 
```

添加

```
command.Parameters.AddWithValue("studentId", YOUR_VARIABLE_FROM_URL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:34:57.157

The problem is here: "and R.mark > 60 R.mark themark" are you missing an operator or something?

My guess is that you just need to remove the "R.mark the mark" after > 60

# file - 列表中的文件

> ID：10453492
> 
> 赞同：1
> 
> 时间：2012-05-04T17:31:16.540
> 
> 标签：file, list, python-2.7

在 python 中，如果我想从多个文件中读取，我可以执行以下操作吗？

```
files = [input1.txt, input2.txt, input3.txt]

for i in files:
    f = open('i', 'r')
    f.readlines()
    f.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:33:14.510

是的...但是您应该处理`readlines()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T18:14:44.593

为了正确执行此操作，您应该执行以下操作：

```
files=['input1.txt','input2.txt','input3.txt']

for i in files:
    f=open(str(i),'r')
    f.readlines()
    f.close() 
```

这是因为您这样做的方式使 python 尝试打开而不是for 循环`'i'`中的值。`i`

然而，这种方式并不是最优的，但却是最简单的解决方案。

# javascript - JavaScript/jQuery - 数组列表不会跨越整个板子

> ID：10453494
> 
> 赞同：0
> 
> 时间：2012-05-04T17:31:23.400
> 
> 标签：javascript, jquery, html

所以，我正在与`A* Pathfinding`. 我得到了它的工作，但它并没有一路工作。它一直有效，直到`4`右边的最后一列。奇怪的。

它一直有效，直到 X 小于或等于 10。这很奇怪，因为`Y`' 的最大值是`10`。也许是在一起了？我不知道。但我的地图是`15 columns`由`10 rows`. 这是一个在线示例： http: [//mystikrpg.com/html5/](http://mystikrpg.com/html5/)

我得到的一个有趣的错误是`Uncaught TypeError: Cannot read property '8' of undefined`.

`8`是`Y`您单击的位置。如果您单击右侧的第一个灰色块（因为第 0 行被隔离了）。那就`8`这么说吧`1`。

这是它布置节点的部分。

```
// Creates a Graph class used in the astar search algorithm.
function Graph(grid) {
    var nodes = [];

    var row, rowLength, len = grid.length;

            for (x = 0; x <= 10; x++) {
             row = grid[x];
             nodes[x] = new Array(15);
                for (y = 0; y <= 15; y++) {
                   nodes[x][y] = new GraphNode(x, y, row[y]); 
                }
            }

    this.input = grid;
    this.nodes = nodes;
} 
```

但是，你可以离线下载它并把它放在本地主机上，如果你喜欢这里[http://mystikrpg.com/html5/Ethios.rar](http://mystikrpg.com/html5/Ethios.rar)

无论如何......我发现的其他东西：

我的函数返回一个元素`loadMap()`数组。`11`

例如，当`x_block`是`13`（单击`X`地图轴）时，`graph.nodes[x_block][y_block]`返回未定义。

这是我的`loadMap()`功能：

```
 function loadMap(map) {
        if (map == 1) {
            return [[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
[1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
[1, 13, 1, 13, 13, 13, 13, 13, 1, 1, 1, 1, 1, 13, 13, 1], 
[1, 13, 1, 1, 13, 1, 1, 13, 1, 13, 13, 1, 13, 13, 13, 1], 
[1, 13, 13, 1, 1, 1, 13, 13, 1, 13, 13, 1, 1, 1, 13, 1], 
[1, 13, 13, 1, 13, 1, 13, 13, 13, 13, 13, 1, 13, 13, 13, 1], 
[1, 13, 13, 13, 13, 1, 13, 13, 13, 13, 13, 1, 13, 13, 13, 1], 
[1, 13, 1, 13, 13, 13, 13, 13, 1, 1, 1, 1, 13, 13, 13, 1], 
[1, 13, 1, 1, 1, 1, 13, 13, 13, 13, 1, 13, 13, 13, 13, 1], 
[1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]];
        }
    } 
```

如您所见，它有 15 列和 10 行。

我究竟做错了什么？

**更新新**

```
for (y = 0; y <= 10; y++) {

    row = grid[y];
    nodes[y] = new Array(15);

    for (x = 0; x <= 15; x++) {

        console.log("X: " + x + " Y: " + y);
        //console.log("Row: " + row[x]);
        nodes[x][y] = new GraphNode(x, y, row[x]);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:33:48.390

你有你的`x`和`y`命名错误的方式。

`x`轴应该是表格中的第二*个*维度，例如`nodes[y][x]`：

```
for (y = 0; y <= 10; x++) {
    row = grid[y];
    nodes[y] = [];
    for (x = 0; x <= 15; x++) {
        nodes[y][x] = new GraphNode(x, y, row[y]); 
    }
} 
```

# javascript - 一个可以处理多个元素的函数

> ID：10453495
> 
> 赞同：0
> 
> 时间：2012-05-04T17:31:32.500
> 
> 标签：javascript, asp.net, function, radiobuttonlist

我在一个表单上有大约 50 个 RadioButtonList，旁边有一个复选框。当您选中复选框时，radioButtonList 将启用。我有代码使它适用于一个，但我正在寻找一种方法来编写一个适用于所有 50 个 RadioButtonList 的函数，而不是编写 50 个不同的函数。复选框和 RadioButtonLists 在一个表中。提前致谢

```
 <script type="text/javascript">
        function dis() {
            var controlObject = document.getElementById('MainContent_RadioButtonList1');
            controlObject.removeAttribute('disabled')
            RecursiveDisable(controlObject);
            return false;
        }
        function RecursiveDisable(control) {
            var children = control.childNodes;
            try { control.removeAttribute('disabled') }
            catch (ex) { }
            for (var j = 0; j < children.length; j++) {
                RecursiveDisable(children[j]);
                //control.attributes['disabled'].value = '';     

            }
        }
        function able() {
            var controlObject = document.getElementById('MainContent_RadioButtonList1');
            controlObject.setAttribute('disabled')
            RecursiveDisable2(controlObject);
            return false;
        }
        function RecursiveDisable2(control) {
            var children = control.childNodes;
            try { control.setAttribute('disabled') }
            catch (ex) { }
            for (var j = 0; j < children.length; j++) {
                RecursiveDisable2(children[j]);
                //control.attributes['disabled'].value = '';     

            }
        }

        function disable() {
        var checkbox = document.getElementById('MainContent_CheckBox1');
            if (
            checkbox.checked == true)
                dis();
            else
            able();
            }
    </script>

    <table>
    <tr>
    <td><asp:CheckBox ID="CheckBox1" runat="server" OnClick="return disable();" /></td>
    <td>
    <asp:RadioButtonList ID="RadioButtonList1" runat="server" Enabled="false">
    <asp:ListItem value="1">ListItem 1</asp:ListItem>
    <asp:ListItem value="2">ListItem 2</asp:ListItem>
    <asp:ListItem value="3">ListItem 3</asp:ListItem>
    </asp:RadioButtonList>
    </td>
    </tr>
    <tr>
    <td><asp:CheckBox ID="CheckBox2" runat="server" OnClick="return disable();" /></td></td>
    <td>
    <asp:RadioButtonList ID="RadioButtonList2" runat="server" Enabled="false">
    <asp:ListItem value="1">ListItem 1</asp:ListItem>
    <asp:ListItem value="2">ListItem 2</asp:ListItem>
    <asp:ListItem value="3">ListItem 3</asp:ListItem>
    </asp:RadioButtonList>
    </td>
    </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:34:54.620

```
<asp:CheckBox ID="CheckBox1" runat="server" OnClick="return disable(this);" />

function disable(c) {
   return c.checked ? dis() : able();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:47:18.377

**改写**

我相信您要执行的操作是切换与给定单选按钮匹配的下拉列表的启用/禁用状态。单选按钮和下拉列表存储在表格中。如果单选按钮被“选中”，您希望启用下拉列表。否则，您希望将其禁用。

在将复选框绑定到其目标下拉列表的标记中创建自定义属性。例如，像这样修改标记：

```
<asp:CheckBox ID="CheckBox1" 
              runat="server" 
              target="DropDownList1" /> 
```

然后，使用一段 JavaScript 遍历表单上的所有复选框，并为它们设置一个事件处理程序。

（我在下面选择了 target 作为我的属性名称，你可以使用任何你喜欢的方式来保存击键，只要它不与已建立的 DOM 属性冲突。）

```
function setCheckBoxHandlers()
{
    var boxes = document.getElementsByTagName("input");
    for (box in boxes)
    {
        // Only bind those that have a target attribute; leave all 
        // others alone.
        if (box.getAttribute("type").toLowerCase() == "checkbox" &&
            box.getAttribute("target") != null)
        {
            // Set up the onclick handler.
            box.onclick = toggleCheckBox;
        }
   }
}

function toggleCheckBox(e)
{
    // Mozilla browsers pass the event source as argument zero. Microsoft
    //  doesn't; get it from the window.
    e = e || window.event.source;
    var target = document.getElementById(e.getAttribute("toggleTarget"));
    if (e.checked)
    {
        target.removeAttribute("disabled");
    } 
    else
    {
        target.setAttribute("enabled");
    }
} 
```

由于这是一个下拉列表，我认为无需启用/禁用其中的单个 ListItems。

您的 HTML 看起来可能实际上是生成的（如果没有，它可能是它的候选者），所以*如果我正确理解了问题，这应该可以很好地工作。*

**更新**

我有它的工作，但你是对的：ASP.NET 的时髦的基于表格的布局严重破坏了你想要做的事情。好消息是，它可以做到。:)

您可以在[http://jsfiddle.net/tyrantmikey/RxY5s/](http://jsfiddle.net/tyrantmikey/RxY5s/)找到有效的解决方案。请注意以下事项：

*   在文档加载期间，您需要调用 setCheckBoxHandlers。
*   我不得不将功能分成两部分。一个用于单击处理程序，另一个用于树遍历。
*   该复选框应包含一个指向其匹配单选按钮列表的 TARGET 属性。（它的值应该是单选按钮列表的 ID。）
*   您不需要在标签中设置 onclick 处理程序；这将在您调用 setCheckBoxHandlers 时自动发生。这是一个很好的解决方案，因为它使以后向表中添加新行变得更加容易。

希望这对你有用！

# asp.net - 如何使用 WebClient 访问 ASMX Web 服务？

> ID：10453497
> 
> 赞同：4
> 
> 时间：2012-05-04T17:31:42.683
> 
> 标签：asp.net, web-services, soap, webclient

我正在尝试在使用 WebClient 访问 Web 服务上的 WebMethod 的类中创建一个方法，并且遇到了问题。在 Windows 上使用 VS2010。

首先，是的，我知道我可以在类库中创建对 Web 服务的 Web 引用，当然这是设计时绑定。但是，我需要能够使用仅在运行时可用的信息来访问 Web 服务。这有一个商业原因，我不会在这里讨论，请随它去吧。

这似乎可以使用 System.Net 命名空间中的 WebClient 类。事实上，我能够访问有问题的服务，但我发送给它的数据似乎格式不正确，尽管我可以说它是一个格式正确的 SOAP 消息。

WebException 包含以下消息：“远程服务器返回错误：(415) 不支持的媒体类型。”

这是代码：

```
public string DoingBusiness()
{
    WebClient client = new WebClient();
    string destUri = "http://localhost/Service/Service.asmx?op=CommunicationsCheck";

    StreamReader reader = new StreamReader(@"CommCheck.xml");
    string data = String.Format(reader.ReadToEnd(), "The End is Near!");
    reader.Close();

    string response = client.UploadString(destUri, data);

    return response;
} 
```

撇开敏感的实际 xmlns，上面的 StreamReader 读取的数据如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <CommunicationsCheck xmlns="http://.../">
      <communication>{0}</communication>
    </CommunicationsCheck>
  </soap:Body>
</soap:Envelope> 
```

这看起来像一个完美的 SOAP 消息。当然，“{0}”会用有效负载字符串填充。如果 WebMethod "CommunicationsCheck(string communication) 成功运行，它将返回：

```
<?xml version="1.0" encoding="utf-8" ?> 
<string xmlns="http://[service url]/">You sent 'The End is Near!'</string> 
```

如果我通过浏览器或通过设计时 Web 参考访问服务，它会执行此操作。

所以，问题是，我在这里做错了什么，我得到了“（415）不支持的媒体类型”

WebClient 上是否有需要设置的属性？我是否可能需要提供包含 UserAgent 的 Header？或者是其他东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T17:55:30.113

该死。我想我应该让别人回答这个问题，但回答自己的问题是可以接受的，如果你自己找到的话。

无论如何，对这个问题的一些进一步研究似乎表明我的一个猜测，即我可能需要设置一些 Header 属性，是一种可能的解决方案。研究表明，该属性将是“内容类型”，需要设置为“文本/xml”。所以我添加了这一行：

```
client.Headers.Add("content-type", "text/xml"); 
```

就在 UploadString 方法调用之前。

答对了！

出现了预期的响应。

有没有人注意到，一旦提出问题，对令人困惑的问题的答案有时会变得不言而喻，但不是在此之前？有趣的现象。

# ios - NSCoding 和保存/加载默认值问题

> ID：10453498
> 
> 赞同：5
> 
> 时间：2012-05-04T17:31:45.060
> 
> 标签：ios, cocos2d-iphone, nscoding, initwithcoder

我正在为 iPhone 应用程序编写一些代码，但在正确加载默认数据时遇到问题。我的代码基于 Ray Wenderlich 的“Learning Cocos2d”一书中的一些示例。

似乎即使当我彻底删除应用程序并尝试从新数据开始时，应用程序也不一致地不尝试加载数据，或者错误地认为有数据并加载 null。

我正在使用 containsValueForKey 检查值是否存在，然后加载它或加载一些默认值，但即使在全新安装时， containsValueForKey 也会找到数据并且不加载默认值。在 xcode 的管理器中，我检查了我设备的文件结构和我指定保存的 Documents 文件夹，它看起来不包含任何文件，所以我不确定它在抓取什么。

我的猜测是问题与 initWithCoder 函数有关。它有时似乎神秘地通过了该功能，但并非一直如此。另一个奇怪的事情是，`[[GameManager sharedGameManager] save]`当玩家获得高分时我会调用（此处未显示，但代码与此objectiveList 完全相同，只是一个int）并且它似乎正确保存了它。

现在代码：

GC数据库.h

```
#import <Foundation/Foundation.h>
id loadData(NSString * filename);
void saveData(id theData, NSString *filename); 
```

GC数据库.m

```
#import "GCDatabase.h"
NSString * pathForFile(NSString *filename) {
// 1
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
// 2
NSString *documentsDirectory = [paths objectAtIndex:0];
// 3
return [documentsDirectory stringByAppendingPathComponent:filename];
}

id loadData(NSString * filename) {

NSString *filePath = pathForFile(filename);
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {

    NSData *data = [[[NSData alloc] initWithContentsOfFile:filePath] autorelease];
    NSKeyedUnarchiver *unarchiver = [[[NSKeyedUnarchiver alloc] initForReadingWithData:data] autorelease];
    id retval = [unarchiver decodeObjectForKey:@"Data"];
    [unarchiver finishDecoding];
    return retval;
}
return nil;
}

void saveData(id theData, NSString *filename) {

NSMutableData *data = [[[NSMutableData alloc] init] autorelease];
NSKeyedArchiver *archiver = [[[NSKeyedArchiver alloc] initForWritingWithMutableData:data] autorelease];
[archiver encodeObject:theData forKey:@"Data"];
[archiver finishEncoding];
[data writeToFile:pathForFile(filename) atomically:YES];
} 
```

游戏管理器.h

```
@interface GameManager : NSObject <NSCoding>{
NSMutableArray *objectiveDescriptions;
}
@property (nonatomic, retain) NSMutableArray * objectiveDescriptions;
+(GameManager*)sharedGameManager;
-(void)save;
-(void)load;
-(void)encodeWithCoder:(NSCoder *)encoder;
-(id)initWithCoder:(NSCoder *)decoder;

@end 
```

GameManager.m（我添加了加载功能，试图强制它加载，但它似乎不起作用）

```
+(GameManager*)sharedGameManager {
@synchronized([GameManager class])
{
    if(!sharedGameManager) {
        sharedGameManager = [loadData(@"GameManager") retain];
        if (!sharedGameManager) {
            [[self alloc] init];
        }
    }
    return sharedGameManager;
}
return nil; 
}

+(id)alloc {
@synchronized([GameManager class]){
    NSAssert(sharedGameManager == nil, @"Attempted to allocate a second instance of the Game Manager singleton");
    sharedGameManager = [super alloc];
    return sharedGameManager;
}
return nil;
}

- (void)dealloc {
[objectiveList release];
[super dealloc];
}

- (void)save {
saveData(self, @"GameManager");
}

-(void)load {
loadData(@"GameManager");
}

- (void)encodeWithCoder:(NSCoder *)encoder {
[encoder encodeObject:objectiveList forKey:@"objectiveList"];
}

- (id)initWithCoder:(NSCoder *)decoder  {
self = [super init];
if (self != nil) {
if ([decoder containsValueForKey:@"objectiveList"]) {
        objectiveList = [decoder decodeObjectForKey:@"objectiveList"];
    } else {
        [objectiveList addObjectsFromArray:[NSArray arrayWithObjects:@"1",@"2",@"3",@"4",@"5", nil]];
    }
}

return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:27:05.003

我还没有阅读您的完整代码..但是我发现代码中有问题....

您还没有为`objectiveList`数组分配内存。除非并且直到您为数组分配内存，否则不会添加对象...

我想去

```
 objectiveList = [[NSMutableArray alloc] initWithArray:[NSArray arrayWithObjects:@"1",@"2",@"3",@"4",@"5", nil]]; 
```

代替

```
 [objectiveList addObjectsFromArray:[NSArray arrayWithObjects:@"1",@"2",@"3",@"4",@"5", nil]]; 
```

检查语法..希望这可能会有所帮助，因为它在过去也困扰着我，我忘记为数组分配内存..并继续添加导致 null 的对象... :) 如果它不能解决您的问题问题，我稍后会完全寻找代码.. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:13:10.113

我似乎看到了问题。第一次调用构造函数时，甚至没有创建objectiveList，因为从未调用过“initWithCoder”。您还必须重写 init 方法才能构造objectiveList 数组。基本上，调用 init 方法的代码在这里：

```
+(GameManager*)sharedGameManager {
@synchronized([GameManager class])
{
    if(!sharedGameManager) {
        sharedGameManager = [loadData(@"GameManager") retain];
        if (!sharedGameManager) {
            [[self alloc] init]; // GOES INTO INIT METHOD, NOT INITWITHCODER!
        }
    }
    return sharedGameManager;
}
return nil; 
} 
```

另一方面，单例实现让我很头疼。只是说。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T08:30:01.267

（据我从您提供的代码中可以看出）您的代码存在逻辑缺陷。考虑如果`decoder`不包含`objectiveList`密钥会发生什么；该`else`子句将执行，但您从未分配过`objectiveList`，因此`addObjectsFromArray:`调用将静默失败。

要测试这个理论，请按如下所示更改您的代码，然后重新运行。如果断言触发了，那么上面的理论是正确的，如果不是，你需要多寻找一点！

```
 - (id)initWithCoder:(NSCoder *)decoder

{
    self = [super init];
    if (self != nil) 
    {
        if ([decoder containsValueForKey:@"objectiveList"]) 
        {
            objectiveList = [decoder decodeObjectForKey:@"objectiveList"];
        } 
    else 
        {
            NSAssert(objectiveList, @"objectiveList must be non-nil to add objects.");
            [objectiveList addObjectsFromArray[NSArrayarrayWithObjects:@"1",@"2",@"3",@"4",@"5", nil]];
        }
    }
    return self;
} 
```

顺便说一句，`objectiveList`从未将其声明为 ivar ......我有点假设`objectiveList`并且`objectiveDescriptions`是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:23:26.400

GameManager.m 中的方法应如下所示：

```
- (id)initWithCoder:(NSCoder *)decoder  {
self = [super init];
if (self != nil) {
if ([decoder containsValueForKey:@"objectiveList"]) {
        objectiveList = [[decoder decodeObjectForKey:@"objectiveList"] retain];
    } else {
        objectiveList = [[NSMutableArray alloc] initWithObjects:@"1",@"2",@"3",@"4",@"5", nil];
    }
} 
```

您有两种情况：要么`objectiveList`存在，在这种情况下您之前保存了一些数据，要么不存在，您需要创建默认数据（1、2、3、4、5）。在上面的代码中，我更改了第一种情况以保留由 返回的数组`decodeObjectForKey`，因为 Apple 的文档声明此方法返回一个`autorelease`对象。您需要在此处保留它，以防止内存被稍后在您的应用程序中创建的其他一些对象重用。通过不保留`objectiveList`，稍后访问它时，您可能访问的是垃圾结果（即随机内存），而不是您刚刚解码的内容。

在类似的说明中，在不存在的第二种情况下`objectiveList`- 即对于没有保存数据的应用程序的新安装 - 您`objectiveList`在尝试向其添加对象之前没有分配。我已将此行更改为实际`alloc`的对象（因此需要的内存），然后`init`使用您想要的默认值。由于您之前尝试将项目添加到尚未创建的数组中，因此在尝试从中访问值时会再次获得垃圾数据。请注意，我假设您在`NSMutableArray`这里使用的是 an，但您也可能使用的是`NSMutableSet`.

# mysql - 数据库上下文更改

> ID：10453503
> 
> 赞同：1
> 
> 时间：2012-05-04T17:32:14.647
> 
> 标签：mysql

请原谅我的菜鸟问题，但想知道如何更改 mysql 中的数据库上下文？我知道在 SQL Server 中，它是：

```
USE [DBName]; 
```

那么mysql中有没有等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:34:08.533

In MySQL, if you want to change databases, you will also use `use`:

```
mysql> use DNNAME; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:34:29.053

Same thing: `use [database];` (the `;` is optional here)

[MySQL 5.0 Reference Manual :: 13.8.4 USE Syntax](http://dev.mysql.com/doc/refman/5.0/en/use.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:39:48.380

该`use`命令在 MySQL 中切换数据库。以下行

```
`use [database];` 
```

将在数据库之间切换，您可以将数据库的实际名称替换为`[database]`，例如`use db1;`.

# c# - Visual Studio 工具用于监控 .net 应用程序中的运行时功能

> ID：10453507
> 
> 赞同：0
> 
> 时间：2012-05-04T17:32:26.020
> 
> 标签：c#, .net, silverlight

现在我正在尝试自定义第三方 .dll。因此，我认为如果我知道一个工具能够在运行时查看我的 .net 应用程序（我现在正在使用的 Silverlight）的 Stack 调用跟踪，那就太好了。这个工具将是我有效学习 .net 语言的一个很好的技能访问

我检查了网络，只看到 Runtime Flow tool 。下载试用版，它似乎不适用于我的 silverlight 应用程序。而且也要花钱

有什么建议吗？

谢谢

# javascript - 将 fn() 放在外部文件中时 Ajax 不工作

> ID：10453511
> 
> 赞同：1
> 
> 时间：2012-05-04T17:32:50.360
> 
> 标签：javascript, ajax

我在使用 Ajax 时遇到问题，因为只要将函数放在外部文件中，代码就不会运行，但如果我将`<script>`标签放在文件中，它就可以毫无问题地运行。这是功能：

```
function show_version(str) {
    var xmlhttp;    
    if (window.XMLHttpRequest) {xmlhttp=new XMLHttpRequest();}
    else {xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}

    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {document.getElementById("sver").innerHTML=xmlhttp.responseText;}
    }   

    xmlhttp.open("GET","version.php?sname="+str,true);
    xmlhttp.send();
} 
```

我已经测试过`version.php`并且工作得很好。这就是我用来调用文件的内容： `<script type="text/javascript" src="/test/search/jsSearch.js"></script>` 快速回顾：如果我`<script>`在文件中使用标签，该函数可以完美运行，但如果我尝试从外部链接该文件，它什么也不做。

我已经尝试在 w3schools.com 上查看 Ajax 教程，但我找不到有关此问题的任何信息。你知道我还应该去哪里看看吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:22:36.380

您是否在您的外部脚本页面上运行带有文档就绪功能的 jQuery？

尝试在我的页面上运行 ajax 时遇到了同样的问题。当 ajax 脚本内联添加到我的页面时工作正常，但是当我将其移动到外部脚本页面时它不再工作。

在查看了我的代码后，我意识到我不小心将那个 ajax 函数放在了我的文档就绪函数中，我正在使用它来进行其他一些 jQuery 编码。在我将它移出文档就绪功能后，一切都再次完美。简单的修复，但可能是你的问题

# ruby-on-rails - Rails 计算状态的方法是什么？

> ID：10453513
> 
> 赞同：0
> 
> 时间：2012-05-04T17:32:54.410
> 
> 标签：ruby-on-rails, database-design

当我的对象只有两种状态时，例如员工的“活动”和“退休”，我会在表用户中有一个布尔字段来说明用户的状态。

但是，如果我有一个具有三个或更多状态的对象，我该怎么办？任务可能是“新的”、“进行中的”、“完成的”和“关闭的”，而计算机可能是“订购的”、“在商店中”、“在使用中”、“在维修中”，最后是“废弃”。

我可以看到几个选项：

1) 附加表“状态”。状态属于任务，任务有一个状态。它对我来说看起来不错，但它需要额外的桌子。

2）不知何故在“用户”表中有一个状态列表。不知道有没有可能。我正在使用 PostgreSQL。

3) 确定 1 表示“新”，2 -“进行中”，3 -“完成”，并将这些数字用作状态。

4) 使用状态名称作为状态。将字段“状态”设为字符串。

什么是最好的 Rails 方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:40:17.840

我个人更喜欢[state_machine](https://github.com/pluginaweek/state_machine)或[aasm](https://github.com/rubyist/aasm)这样的 gem ，我必须为当前状态创建字符串列。所以我认为那是正确的方式，因为它立即为我提供了有关状态的信息。

# git - .gitmodules 和在 .git/config 中指定子模块的区别？

> ID：10453520
> 
> 赞同：36
> 
> 时间：2012-05-04T17:33:20.233
> 
> 标签：git

可能是非常愚蠢的问题，但到目前为止我一直在 .gitmodules 文件中指定子模块。最近让我感到震惊的是，出于同样的原因，也许可以只使用 .git/config ，这样我就不必在工作目录中保留无关的文件？

.git/config ：

```
[submodule "path/to/repo"]
    url = git@github.com:username/repo.git 
```

.gitmodules

```
[submodule "path/to/repo"]
    path = path/to/repo
    url = git@github.com:username/repo.git 
```

这些基本上是一样的吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-04T17:47:12.050

`.git/info/exclude`与和相同的答案`.gitignore`。

该`.gitmodules`文件可以包含在存储库中并与所有人共享（也就是说，它可以像任何常规文件一样添加和提交），而`.git`(like `.git/config`) 中的任何内容都是私有的（您不能将其添加到存储库中）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-04T18:03:42.123

它将使用`git submodule sync`.gitmodules 文件中的详细信息更新您的配置文件，因此后者应被视为“主” - 如@Artefact2 所述，它在存储库之间传递。

> 当子模块 URL 更改上游并且您需要相应地更新本地存储库时，这很有用。

# php - 如何从 foreach func 限制页面上的结果显示并将其分成几页

> ID：10453528
> 
> 赞同：0
> 
> 时间：2012-05-04T17:33:43.493
> 
> 标签：php

我有一个使用 foreach 函数获取和显示结果的代码，但问题是它返回了很多结果，所以页面加载非常慢！有没有办法将这些结果分成 1、2、3、4 等页面，并且每页只显示 10 个结果？

我的代码是

```
foreach ($results[1] as $url)
{
    echo "<a href='$url'>$url</a> <br>";

    $i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:37:04.427

这个**PHP 类**可能会有所帮助：[http ://www.phpsnaps.com/snaps/view/simple-php-pagination-class/](http://www.phpsnaps.com/snaps/view/simple-php-pagination-class/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:39:34.383

如果数据来自数据库，则应使用`LIMIT`子句对其进行限制。

如果您无法控制数据源，则可以使用[`array_slice()`](http://php.net/manual/en/function.array-slice.php)on`$results[1]`根据页码和要显示的项目数获取所需的部分：

```
$partial_results = array_slice($results[1], ($page_number - 1) * $items_to_show, $items_to_show); 
```

# matlab - Matlab som 访问生成的数据和参数

> ID：10453532
> 
> 赞同：0
> 
> 时间：2012-05-04T17:33:53.683
> 
> 标签：matlab, som

我对 Matlab 完全陌生，我需要一些帮助。我正在使用神经网络工具箱运行自组织地图。

一切正常，我用

```
net = selforgmap([x y]);
net = train(net,mydata); 
```

然后我可以访问漂亮的地块。但是我对 som 生成的实际数字感兴趣。1）如何访问下面的所有数据（有没有办法显示 som 包生成的所有向量？例如：2）如何访问节点权重？3)我如何访问案例列表及其分配的最佳匹配单元？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:55:05.660

不幸的是，我没有 R2012，（因此，我没有'selforgmap'），所以这个答案可能太笼统了。

也就是说，我怀疑变量“net”是一个神经网络对象，如果你在命令行窗口中输入

```
net 
```

然后您将显示该对象中的属性（这是我得到的缩短版本）

```
net =

    Neural Network object:

    architecture:

         numInputs: 1
         numLayers: 2
       biasConnect: [1; 1]
      inputConnect: [1; 0]
      layerConnect: [0 0; 1 0]
     outputConnect: [0 1]

        numOutputs: 1  (read-only)
    numInputDelays: 0  (read-only)
    numLayerDelays: 0  (read-only) 
```

然后你可以像这样访问这些属性：

```
net.numInputs 
```

如果您想查看该变量可用的方法，您可以执行

```
methods(net) 
```

# javascript - 对同一 AJAX 函数的串行调用仅返回上次调用的数据

> ID：10453539
> 
> 赞同：0
> 
> 时间：2012-05-04T17:34:19.533
> 
> 标签：javascript, ajax, callback

我有三个 div 元素，我想用自己的内容填充每个元素。我每次都调用相同的 AJAX（非常通用）函数，将 div id 的名称作为参数发送：

```
//left-right rectangle content
var rl = getContent("rightLeft");   

//bottom content
var br = getContent("bottomRectangle");

//top content
var rtr = getContent("rightTopRectangle"); 
```

如果我在 AJAX 函数中执行警报（http.responseText），我会从远程页面获得正确的 html 内容。（事实上​​，如果我添加一个警报，它似乎会“减慢”该功能，以便每次调用它时都能正确返回我的内容，但是谁想要在他们的网页上发出警报？）。

但是，如果没有警报，上述调用只会正确处理最后一次调用。因此，在上述调用序列中，只有最后一个 div，其中 id="rightTopRectangle" 将填充从 AJAX 调用检索到的 html。前两个调用不会使用 AJAX 检索到的 html 填充它们的 div。如果我改变调用的顺序，它将始终是最后一个有效的 AJAX 调用。

我觉得这个问题与异步部分有关，在一次又一次地请求 AJAX 函数之前，之前的调用没有足够的时间来处理请求。

这是 AJAX 函数：

```
function getContent(element){
    var url = "ajax/getcontent.php?cid="+element; //alert(url);
    http.onreadystatechange=function(){
        if (http.readyState==4 && http.status==200){ //alert(http.responseText);
            var response = http.responseXML.documentElement;
            callback(element,http.responseText);
        }
    }
    http.open("GET",url,true);
    http.send();        
} 
```

名为“回调”的函数（它工作正常）如下所示：

```
function callback(e,c){
    document.getElementById(e).innerHTML = "<div style=\"line-height:"+ document.getElementById(e).offsetHeight +"px;margin:0px auto 0px auto;text-align:center;\" >" + unescape(c) + "</div>";
} 
```

更新：这现在有效。我在 getContent 函数中添加了一行：

```
function getContent(element){
    var http = createRequestObject(); /*After Tej's answer, I took this line out 
    of the root of my script and placed it here, within the function, in order to 
    instantiate a new http object each time I call this function, so that they all 
    operate independently of one another*/
    var url = "ajax/getcontent.php?cid="+element; //alert(url);
    http.onreadystatechange=function(){
        if (http.readyState==4 && http.status==200){
            var response = http.responseXML.documentElement;
            callback(element,http.responseText);
        }
    }
    http.open("GET",url,true);
    http.send();        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:01:41.513

您正在`XmlHttpRequest`为所有 ajax 请求重复使用相同的内容；这导致最后一个请求总是获胜，因为其他请求已被覆盖。相反，您应该为每个调用创建一个新的 ajax 请求。

```
 http = CreateAjaxRequest();
 http.onreadystatechange = function() { ... }
 // etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:43:39.560

你应该将`element`参数传递给你的 onreadystatechange 函数，试试这个，

```
req.onreadystatechange = function (el) {
    return function() {
      if (http.readyState==4 && http.status==200){ //alert(http.responseText);
          var response = http.responseXML.documentElement;
          callback(el,http.responseText);
      }
    };
}(element); 
```

# c++ - c++ how to create a function, that prints on terminal as well as file

> ID：10453542
> 
> 赞同：1
> 
> 时间：2012-05-04T17:34:32.153
> 
> 标签：c++, function, parameter-passing

I want to create a function, that prints output according to its parameter.
Like if I pass a ofstream pointer it should print the output to the respective file, whereas if i pass cout or something, that makes it print to the terminal.

Thanks :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:37:02.403

```
void display(std::ostream& stream)
{
    stream << "Hello, World!";
}

...

display(cout);

std::ofstream fout("test.txt");
display(fout); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:36:22.103

```
template<typename CharT, typename TraitsT>
void print(std::basic_ostream<CharT, TraitsT>& os)
{
    // write to os
} 
```

这将允许写入任何流（窄或宽，允许自定义特征）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T17:35:54.867

这应该这样做：

```
template<class T>
std::ostream &output_something(std::ostream &out_stream, const T &value) {
    return out_stream << value;
} 
```

然后你会像这样使用它：

```
ofstream out_file("some_file");
output_something(out_file, "bleh");  // prints to "some_file"
output_something(std::cout, "bleh"); // prints to stdout 
```

# c++ - lua function from c++

> ID：10453549
> 
> 赞同：0
> 
> 时间：2012-05-04T17:34:56.913
> 
> 标签：c++, lua

Let we have a code in "luafunc.lua":

```
function foo(a, b)
   return a + b
end

a = io.read('*n')
b = io.read('*n')
print (foo(a, b)) 
```

Let's try to use function foo from C++ file:

```
#include <iostream>

using namespace std;

extern "C"{
    #include <lua.h>
    #include <lualib.h>
    #include <lauxlib.h>
};

int main()
{
    lua_State *lvm = lua_open();
    luaL_openlibs(lvm);
    luaL_loadfile(lvm, "luafunc.lua");

    int a, b;
    cin >> a >> b;
    lua_pcall(lvm, 0, LUA_MULTRET, 0);
    lua_getglobal(lvm, "foo");
    lua_pushnumber(lvm, a);
    lua_pushnumber(lvm, b);
    if (lua_pcall(lvm, 2, 1, 0))
    {
        cout << "Error: " << lua_tostring(lvm, -1) << endl;
        return 0;
    }

    cout << "The result is: " << lua_tonumber(lvm, -1) << endl;

    lua_close(lvm);
    return 0;
} 
```

So, the problem is that this C++ code executes the whole luafunc.lua. Naturally I can remove reading part from lua-file and then from C++ only foo is executed. But can I use function foo from C++ even if there's other stuff in lua-file?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:42:32.810

如果您需要能够在不运行该代码的情况下使用该函数，请将代码和函数分成两个单独的脚本，一个包含其中的脚本`foo`和一个加载该脚本和测试的脚本`foo`。

*在执行*包含它的脚本之前，不会定义一个函数。执行该脚本将定义`foo`并运行其他 3 行。

当您使用[loaL_loadfile](http://pgl.yoyo.org/luai/i/luaL_loadfile)（或任何其他加载调用）加载文件时，整个脚本将变成一个函数；要执行它，您必须使用[lua_pcall](http://pgl.yoyo.org/luai/i/lua_pcall)或其他方法调用该函数。在那之前，定义 foo 的脚本只是堆栈上未命名、未执行的代码块。

没有函数可以只执行脚本的一部分，或者只执行函数定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T19:56:35.957

> 即使 lua 文件中有其他东西，我可以使用 C++ 中的函数 foo 吗？

是的。

您可以在不执行该文件的其他部分的情况下使用它吗？不。

Lua 函数是在运行时定义的。仅加载和编译该脚本是不够的，您必须运行生成的块`foo`才能在您的 Lua 状态中定义。

# ios - UItableView with multiple images and setting onclick on each one of them

> ID：10453551
> 
> 赞同：0
> 
> 时间：2012-05-04T17:35:08.847
> 
> 标签：ios, uitableview

I have a scenario where I want to keep "thumbnails" of images on the row of the tableview. I decide on runtime the numbers of images that goes in a row.

Secondly, On click of any of the image I want to launch a viewcontroller with elaborated image of it with some description.

How can I achieve this?

```
|________________|
| 1 2 3  4  5  6 |
|________________|
| 7 8 9 10 11 12 |
|________________|
| 12 14 15       |
|________________| 
```

Imagine the numbers above as thumbnails. Onclick of any of the number I want to launch a new view controller which gives details about the image.

code snippet:

```
-(void) populateTableView
{

    NSMutableArray* srcArray = [[NSMutableArray alloc] initWithArray:[[ImageDataSource sharedImageDataSource] getThumbnailsSrcArray]];

    int noOfImages = srcArray.count;

    float rowc = (noOfImages / ROW_ELEM_COUNT) + 0.5;

    int rowCount = roundf(rowc);

    titleData = [[NSMutableArray alloc]init];

    int j=0;
    for (int i=0; i<rowCount; i++) {

        NSMutableArray* rowArray = [[NSMutableArray alloc] init];

        for (int k=0; k < ROW_ELEM_COUNT; k++) {

            if (j < noOfImages) {
                NSString* imgPath = [srcArray objectAtIndex:j];
                UIImage* img = [[UIImage alloc] initWithContentsOfFile:imgPath];
                [rowArray addObject:img];
                [img release];
                imgPath=nil;
            }
            j++;
        }
        [titleData addObject:rowArray]; 
    }

    titleView = [[UITableView alloc] initWithFrame:CGRectMake(90.0,156.0,590.0,630.0) 
                                             style:UITableViewStyleGrouped];
    titleView.delegate = self;

    [self.view addSubview:titleView];
    [titleView release];

} 
```

So basically I have array of array as my DS. index of each array will be row of table view and the array inside will have images. But I am not sure how to populate the tableview. Any clue anybody?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:42:38.287

你有两个选择。

• 添加带有 UIImage 的 UIButton 并将每个按钮添加为您的 tableview 单元格上的子视图。

或者

• 找出用户在单元格上点击的位置，并从这里计算他们点击的图像以及要采取的操作：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch* touch = [touches anyObject];
    // do your stuff
    //..
} 
```

# c# - 使用 Visual Studio 2010 SDK 在 XML 文档上添加 CTRL-Click

> ID：10453553
> 
> 赞同：1
> 
> 时间：2012-05-04T17:35:18.377
> 
> 标签：c#, xml, visual-studio-2010, sdk

我有一个以下格式的 XML 文件：

```
<Document>
  <Bars>
    <Bar id="1">
      <Name>test</Name>
    </Bar>
    <Bar id="2">
      <Name>test</Name>
    </Bar>
  </Bars>

  <Foo>
    <Bar>1</Bar>
    <Bar>2</Bar>
  </Foo>
</Document> 
```

现在我想做的是在例如“1”上添加一个 CTRL+Click 功能，它将光标移动到正确的“Bar”标签。有人知道如何使用 Visual Studio SDK 在 xml 标签上添加 CTRL + Click 功能来触发事件吗？

[http://msdn.microsoft.com/en-us/library/bb166217.aspx](http://msdn.microsoft.com/en-us/library/bb166217.aspx)

需要哪些课程，我从哪里开始？

# xml - 如何将某种类型的括号（整个文档）中的所有数字替换为它们值的一小部分？

> ID：10453555
> 
> 赞同：2
> 
> 时间：2012-05-04T17:35:35.097
> 
> 标签：xml, notepad++, xml-editor

我的问题是经过几天徒劳的搜索后我无法解决的问题。我对 XML 或任何其他类型的编程都很陌生，所以请原谅我解释的任何错误！

本质上，正如标题中所说，我需要替换括号内的所有数字

> < Scale_Factor > </Scale_Factor >

是其原始价值的三分之一。在 notepad++、XML 编辑器或您可能熟悉的任何其他程序中，我如何做到这一点？真的有办法吗？非常感谢所有帮助！数字的示例是 3.0。我想将其更改为 1.0。整个文档中的数字各不相同。XML 版本 1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:51:20.943

匹配数字并不难。您只需要使用正则表达式搜索并执行以下操作：

```
\<Scale_Factor\>([A-Za-z\.\s]*)([d]+)([A-Za-z\.\s]*)\<\/Scale_Factor\> 
```

如果您将其替换为以下内容，则匹配此正则表达式将允许您替换所有数字：\1（替换数字的东西）\3

但是，您不能在替换语句中进行数学运算，因此您在这里不走运。你最好的选择是用迭代替换命令替换数字或编写一个自定义 exe 来为你做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T23:31:27.617

这是一个简单的问题，但如果您不知道如何编码，则很难做到。这是针对您的问题的最简单的解决方案。

创建一个名为 divide.xsl 的文件并将以下数据放入其中：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" />
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>
  <xsl:template match="Scale_Factor">
    <xsl:copy>
      <xsl:value-of select="text() div 3" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

使用 Notepad++，安装了[xmltools](http://sourceforge.net/projects/npp-plugins/files/XML%20Tools/)插件。打开您的 xml 文件，转到`Plugins >> XML Tools >> XSL Transformation`并打开您刚刚创建的 divide.xsl。多田！

这个问题有很多解决方案。该解决方案是通过 XSLT 和 XPath 完成的。查看[此](http://www.xml.com/pub/a/2001/05/07/xsltmath.html)和[此](http://www.w3schools.com/xsl/)以获取更多信息。

# sql - 如何将客户详细信息插入订单表

> ID：10453557
> 
> 赞同：0
> 
> 时间：2012-05-04T17:35:46.987
> 
> 标签：sql, vb.net, e-commerce

我的任务是建立一个基本的数据库驱动的电子商务网站。我有一个主页、一个产品页面、一个订单页面、一个订单确认页面、一个购物车页面和一个查看当前订单页面。该站点使用具有三个表的 Access 数据库。

> 包含所有客户详细信息的客户表（FirstName、LastName、EmailAdd、CardNo、CardEx、SortCode、DeliveryAdd、Postcode）
> 
> Products 表，包含所有产品信息（ProductID、ProductName、Price、ProductType、Images、ProductDescription）。
> 
> 还有一个包含 CustomerID 和 ProductID 的 Orders 表。

我正在尝试在订单页面上创建一个 INSERT 语句，以便当客户插入他们的详细信息并按下提交按钮时，客户表将插入一条新记录。我还希望它在订单表中创建一个条目，并将客户端重定向到订单确认页面，该页面将显示订单的详细信息。

这是我在订单上单击提交按钮时运行的代码。

编辑我已经修复了缺少撇号的错误。尝试使用两个 sql 命令插入，因为我被告知 access 数据库不能同时处理两个。虽然仍然出现错误。

```
 Protected Sub btnAddRecord_Click(ByVal sender As Object, ByVal e As System.EventArgs)

    Dim strFirstName As String
    Dim strLastName As String
    Dim strEmailAdd As String
    Dim intCardNo As String
    Dim strCardEx As String
    Dim intSortCode As String
    Dim strDeliveryAdd As String
    Dim strPostCode As String
    Dim intProductID As Integer
    strFirstName = tbxFirstName.Text
    strLastName = tbxLastName.Text
    strEmailAdd = tbxEmailAdd.Text
    intCardNo = tbxCardNo.Text
    strCardEx = tbxCardEx.Text
    intSortCode = tbxSortCode.Text
    strDeliveryAdd = tbxDeliveryAdd.Text
    strPostCode = tbxPostcode.Text
    intProductID = ddlProduct.SelectedValue

    Dim strDatabaseNameAndLocation As String
    strDatabaseNameAndLocation = Server.MapPath("KingToots.mdb")
    Dim strSQLCommand As String
    strSQLCommand = "INSERT INTO Customer(FirstName, LastName, EmailAdd, CardNo, CardEx, SortCode, DeliveryAdd, Postcode) " & _
        "Values ('" & strFirstName & "', '" & strLastName & "', '" & strEmailAdd & "', '" & intCardNo & "', '" & strCardEx & "', '" & intSortCode & "', '" & strDeliveryAdd & "', '" & strPostCode & "');"
    Dim objOleDbConnection As System.Data.OleDb.OleDbConnection
    objOleDbConnection = New System.Data.OleDb.OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0; Data Source=" & strDatabaseNameAndLocation)
    objOleDbConnection.Open()
    Dim objOleDbCommand As System.Data.OleDb.OleDbCommand
    objOleDbCommand = New System.Data.OleDb.OleDbCommand(strSQLCommand, objOleDbConnection)
    objOleDbCommand.ExecuteNonQuery()
    objOleDbConnection.Close()
    strSQLCommand = "INSERT INTO Orders(ProductID) " & "Values ('" & intProductID & "');"
    objOleDbConnection = New System.Data.OleDb.OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0; Data Source=" & strDatabaseNameAndLocation)
    objOleDbConnection.Open()
    objOleDbCommand = New System.Data.OleDb.OleDbCommand(strSQLCommand, objOleDbConnection)
    objOleDbCommand.ExecuteNonQuery()
    objOleDbConnection.Close()
    strSQLCommand = "SELECT Customer.* FROM Customer ORDER BY Customer.CustomerID DESC;"
    objOleDbConnection = New System.Data.OleDb.OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0; Data Source=" & strDatabaseNameAndLocation)
    objOleDbConnection.Open()
    objOleDbCommand = New System.Data.OleDb.OleDbCommand(strSQLCommand, objOleDbConnection)
    Dim objOleDbDataReader As System.Data.OleDb.OleDbDataReader
    objOleDbDataReader = objOleDbCommand.ExecuteReader()
    Dim datDataTable As System.Data.DataTable
    datDataTable = New System.Data.DataTable()
    datDataTable.Load(objOleDbDataReader)
    objOleDbConnection.Close()
    tbxFirstName.Text = ""
    tbxLastName.Text = ""
    tbxEmailAdd.Text = ""    
    tbxCardNo.Text = ""
    tbxCardEx.Text = ""
    tbxSortCode.Text = ""
    tbxDeliveryAdd.Text = ""
    tbxPostcode.Text = ""

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:40:54.487

您缺少此行末尾的右引号：

```
strSQLCommand = "INSERT INTO Customer(FirstName, LastName, EmailAdd, CardNo, CardEx, SortCode, DeliveryAdd, Postcode) " & _
    "Values ('" & strFirstName & "', '" & strLastName & "', '" & strEmailAdd & "', '" & intCardNo & "', '" & strCardEx & "', '" & intSortCode & "', '" & strDeliveryAdd & "', '" & strPostCode & ");" 
```

关于明显的 SQL 注入问题，切换到参数将是最好的方法（如果这样做，您将永远不会遇到原始问题，参数不使用引号），但至少在您的要替换的字符串`'`，`''`因此如果您有一个叫 O'Neil 的客户，您的程序就不会死掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:46:56.497

He is correct, you don't want to do this you will get sql injection. But here is the solution to your problem anyway.

The problem is not in the last sql statement but in the previous one.

'" & strPostCode & " is missing the last single quote.

it should read:

'" & strPostCode & "');

# haskell - 代数解释多态性

> ID：10453558
> 
> 赞同：55
> 
> 时间：2012-05-04T17:35:49.550
> 
> 标签：haskell, types

所以我理解类型的基本代数解释：

```
Either a b ~ a + b
(a, b) ~ a * b
a -> b ~ b^a
()   ~ 1
Void ~ 0 -- from Data.Void 
```

...并且这些关系对于具体类型是正确的，例如`Bool`，而不是多态类型，例如`a`. 我还知道如何通过根据以下同构翻译 Church 编码，将具有多态类型的类型签名转换为具体的类型表示：

```
(forall r . (a -> r) -> r) ~ a 
```

所以如果我有：

```
id :: forall a . a -> a 
```

我知道这并不意味着`id ~ a^a`，但它实际上意味着：

```
id :: forall a . (() -> a) -> a
id ~ ()
   ~ 1 
```

相似地：

```
pair :: forall r . (a -> b -> r) -> r
pair ~ ((a, b) -> r) - > r
     ~ (a, b)
     ~ a * b 
```

这让我想到了我的问题。这条规则的“代数”解释是什么：

```
(forall r . (a -> r) -> r) ~ a 
```

对于每个具体的类型同构，我可以指出一个等效的代数规则，例如：

```
(a, (b, c)) ~ ((a, b), c)
a * (b * c) = (a * b) * c

a -> (b -> c) ~ (a, b) -> c
(c^b)^a = c^(b * a) 
```

但我不理解类似于以下的代数等式：

```
(forall r . (a -> r) -> r) ~ a 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-05T00:42:42.937

这就是恒等函子的著名[**米田引理**](http://en.wikipedia.org/wiki/Yoneda_lemma)。

查看[这篇](http://blog.sigfpe.com/2006/11/yoneda-lemma.html)文章以获得可读的介绍，以及任何类别理论教科书以获取更多信息。

简而言之，假设`f :: forall r. (a -> r) -> r`您可以申请`f id`获得`a`，反之，假设`x :: a`您可以`($x)`申请获得`forall r. (a -> r) -> r`。

这些操作是互逆的。证明：

显然`($x) id == x`。我会证明

`($(f id)) == f`,

由于函数在所有参数上都相等时是相等的，所以让我们来`x :: a -> r`证明

`($(f id)) x == f x`IE

`x (f id) == f x`.

由于`f`是多态的，它作为一种自然变换工作；这是自然图`f`：

```
 f_A
     Hom(A, A)  →  A
(x.)      ↓        ↓ x
     Hom(A, R)  →  R
               f_R 
```

所以`x . f == f . (x.)`。

堵塞身份，`(x . f) id == f x`。量子点

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-04T22:35:59.517

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-07T22:38:13.260

为了（尝试）回答实际问题（这比对所提出的更广泛问题的答案不那么有趣），由于“类型错误”，该问题形成不正确

```
Either ~ (+) 
(,)    ~ (*)
(->) b ~ flip (^)
()   ~ 1
Void ~ 0 
```

这些都将类型映射到整数，并将类型构造函数映射到自然函数。从某种意义上说，你有一个从类型范畴到自然范畴的函子。在另一个方向上，您“忘记”了东西，因为类型保留了代数结构，而自然则将其丢弃。即给定`Either () ()`您可以获得独特的自然，但鉴于自然，您可以获得*多种*类型。

但这是不同的：

```
(forall r . (a -> r) -> r) ~ a 
```

它将一种类型映射到另一种类型！它不是上述函子的一部分。它只是类型类别中*的同构。*所以让我们给它一个不同的符号，`<=>`

现在我们有

```
(forall r . (a -> r) -> r) <=> a 
```

现在您注意到我们不仅可以将类型发送到 nat 并将箭头发送到箭头，还可以将一些同构发送到其他同构：

```
(a, (b, c)) <=> ((a, b), c) ~ a * (b * c) = (a * b) * c 
```

但是这里正在发生一些微妙的事情。在某种意义上，后一种对的同构是真的*，因为*代数恒等式是真的。这就是说后者中的“同构”仅仅意味着这两种类型在我们的函子的形象下与 nats 是等价的。

我们需要直接证明的前一个同构，这是我们开始解决潜在问题的地方——将我们的函子赋予 nats，`forall r.`映射到什么？但答案是`forall r.`它既不是类型，也不是类型之间的有意义的箭头。

通过引入 forall，我们摆脱了第一订单类型。没有理由期望 forall*应该*适合我们上面的 Functor，事实上，它不适合。

所以我们可以像上面其他人一样探索为什么同构成立（这本身很有趣）——但这样做我们已经放弃了问题的代数核心。我认为一个可以回答的问题是，考虑到高阶类型和构造函数的类别作为它们之间的箭头，那么*有*什么有意义的 Functor 呢？

**编辑**：所以现在我有另一种方法来说明为什么添加多态性会使事情变得疯狂。我们首先问一个更简单的问题——给定的多态类型是否有零个或多于零个居民？这是[类型居住问题](https://en.wikipedia.org/wiki/Type_inhabitation)，并且通过 Curry-Howard 最终成为[修改后的可实现性](https://en.wikipedia.org/wiki/Realizability)问题，因为这与询问某些逻辑中的公式是否可以在适当的计算模型中实现是一样的。现在正如该页面所解释的，这可以在简单类型的 lambda 演算中确定，但它是 PSPACE 完整的。但是一旦我们转向更复杂的东西，例如通过添加多态性并进入系统 F，那么它就会变得不可判定！

所以，如果我们无法确定一个任意类型是否有人居住，那么我们*显然*无法确定它有*多少*居民！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-06T14:29:44.493

[nLab](http://ncatlab.org/nlab/show/HomePage)的一些链接：

*   [全称量词](http://nlab.mathforge.org/nlab/show/universal+quantifier)，对应[依赖积](http://nlab.mathforge.org/nlab/show/dependent+product)。

*   [存在量词](http://nlab.mathforge.org/nlab/show/existential+quantifier)，对应于依存和（依存联积）。

* * *

因此，在范畴论的设置中：

```
Type               | Modeled¹ as               | In category
-------------------+---------------------------+-------------
Unit               | Terminal object           | CCC
Bottom             | Initial object            |
Record             | Product                   |
Union              | Sum (coproduct)           |
Function           | Exponential               |
-------------------+---------------------------+-------------
Dependent product² | Right adjoint to pullback | LCCC
Dependent sum      | Left adjoint to pullback  | 
```

¹) 在适当的类别中——CCC[代表](http://en.wikipedia.org/wiki/Cartesian_closed_category)Haskell 的全部和非多态子集（[链接](http://www.cs.nott.ac.uk/~nad/publications/danielsson-popl2006-tr.pdf)），CPO 代表 Haskell 的非全部特征（[链接](http://www.cs.gunma-u.ac.jp/~hamana/Papers/cpo.pdf)），[LCCC](http://ncatlab.org/nlab/show/locally+cartesian+closed+category)代表依赖类型语言。

²)`forall`量化是依赖积的一个特例：

```
∀(x :: *). y[x] ~ ∏(x : Set)y[x] 
```

所有小类型`Set`的[宇宙](http://en.wikipedia.org/wiki/Intuitionistic_type_theory#Universes)在哪里。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-04T18:27:28.323

这是一个有趣的问题。我没有完整的答案，但这对于评论来说太长了。

类型签名`(forall r. (a -> r) -> r)`可以表达为我说

> > 对于你想命名的任何类型`r`，如果你给我一个接受`a`并产生一个的函数`r`，那么我会给你一个`r`.

现在，这必须适用于*任何*类型`r`，但它可以是*特定*类型`a`。因此，我使用这个巧妙技巧的方法是`a`坐在某个地方，我将其提供给函数（它`r`为我生成一个），然后我把它`r`交给你。

但如果我`a`有空坐，我可以给你：

> > 如果你给我一个1，我会给你一个`a`。

它对应于类型签名`1 -> a`或简单地说`a`。通过这个非正式的论证，我们有

> > `(forall r. (a -> r) -> r) ~ a`

下一步将是生成相应的代数表达式，但我不清楚代数量如何与全称量化相互作用。我们可能需要等待专家！

# persistence - Hazelcast 文件持久化（MapStore 实现）

> ID：10453559
> 
> 赞同：2
> 
> 时间：2012-05-04T17:35:51.327
> 
> 标签：persistence, hazelcast

我正在使用 Hazelcast 进行集群数据分发。我使用 MapStore 和 MapLoader 接口阅读了有关数据持久性的文档。我需要实现这些接口并将类名写入 hazelcast.xml 文件。

是否有任何使用 hazelcast 实现文件持久性接口的示例？有谁知道我可以下载和使用的任何源代码或 jar 文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:26:18.200

您可以只使用 ObjectOutputStream 和 ObjectInputStream 来实现自己的。

您可以使用地图名称创建目录。store(key, value) 操作创建一个名为 key.dat 的文件，其内容为序列化值。load(key) 方法将“key.dat”文件读入对象并返回。

这里 ObjectOutputStream 和 ObjectInputStream 的使用示例

[http://www.mkyong.com/java/how-to-write-an-object-to-file-in-java/](http://www.mkyong.com/java/how-to-write-an-object-to-file-in-java/)

[http://www.mkyong.com/java/how-to-read-an-object-from-file-in-java/](http://www.mkyong.com/java/how-to-read-an-object-from-file-in-java/)

然后你应该把这个实现类添加到你的类路径中，并在你的 hazelcast.xml 中设置它

# python - 根据键值过滤python中的嵌套字典

> ID：10453560
> 
> 赞同：3
> 
> 时间：2012-05-04T17:35:53.987
> 
> 标签：python, dictionary

如何根据键值过滤python中的嵌套字典：

```
d = {'data': {'country': 'US', 'city': 'New York', 'state': None},
     'tags': ['US', 'New York'],
     'type': 'country_info',
     'growth_rate': None
     } 
```

我想过滤这个字典以消除 NoneType 值，所以结果字典应该是：

```
d = {'data': {'country': 'US', 'city': 'New York'},
     'tags': ['US', 'New York'],
     'type': 'country_info',
     } 
```

此外，dict 可以有多个嵌套级别。我想从字典中删除所有 NoneType 值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T17:40:14.807

[您可以使用dict comprehension](https://www.youtube.com/watch?v=t85uBptTDYY)轻松地递归定义它。

```
def remove_keys_with_none_values(item):
    if not hasattr(item, 'items'):
        return item
    else:
        return {key: remove_keys_with_none_values(value) for key, value in item.items() if value is not None} 
```

递归在 Python 中并没有太优化，但考虑到可能的嵌套数量相对较少，我不会担心。

在我们跳跃之前看起来不是太 Pythonic，我认为它是比捕获异常更好的选择 - 因为该值可能不会是`dict`大多数时间（很可能我们的叶子比分支更多）。

另请注意，在 Python 2.x 中，您可能想要`iteritems()`换成`items()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T00:04:12.323

我非常感谢@Lattyware 的回答。它帮助我过滤掉嵌套对象并删除空值，无论类型是`dict`、`list`还是`str`。

这是我想出的：

## remove-keys-with-empty-values.py

```
# remove-keys-with-empty-values.py
from pprint import pprint

def remove_keys_with_empty_values(item):
  if hasattr(item, 'items'):
    return {key: remove_keys_with_empty_values(value) for key, value in item.items() if value==0 or value}
  elif isinstance(item, list):
    return [remove_keys_with_empty_values(value) for value in item if value==0 or value]
  else:
    return item

d = {
     'string': 'value',
     'integer': 10,
     'float': 0.5,
     'zero': 0,
     'empty_list': [],
     'empty_dict': {},
     'empty_string': '',
     'none': None,
    }

d['nested_dict'] = d.copy()
l = d.values()
d['nested_list'] = l

pprint({
  "DICT FILTERED": remove_keys_with_empty_values(d),
  "DICT ORIGINAL": d,
  "LIST FILTERED": remove_keys_with_empty_values(l),
  "LIST ORIGINAL": l,
}) 
```

## 执行

```
python remove-keys-with-empty-values.py
    {'DICT FILTERED': {'float': 0.5,
                       'integer': 10,
                       'nested_dict': {'float': 0.5,
                                       'integer': 10,
                                       'string': 'value',
                                       'zero': 0},
                       'nested_list': [0,
                                       'value',
                                       10,
                                       0.5,
                                       {'float': 0.5,
                                        'integer': 10,
                                        'string': 'value',
                                        'zero': 0}],
                       'string': 'value',
                       'zero': 0},
     'DICT ORIGINAL': {'empty_dict': {},
                       'empty_list': [],
                       'empty_string': '',
                       'float': 0.5,
                       'integer': 10,
                       'nested_dict': {'empty_dict': {},
                                       'empty_list': [],
                                       'empty_string': '',
                                       'float': 0.5,
                                       'integer': 10,
                                       'none': None,
                                       'string': 'value',
                                       'zero': 0},
                       'nested_list': [{},
                                       0,
                                       'value',
                                       None,
                                       [],
                                       10,
                                       0.5,
                                       '',
                                       {'empty_dict': {},
                                        'empty_list': [],
                                        'empty_string': '',
                                        'float': 0.5,
                                        'integer': 10,
                                        'none': None,
                                        'string': 'value',
                                        'zero': 0}],
                       'none': None,
                       'string': 'value',
                       'zero': 0},
     'LIST FILTERED': [0,
                       'value',
                       10,
                       0.5,
                       {'float': 0.5,
                        'integer': 10,
                        'string': 'value',
                        'zero': 0}],
     'LIST ORIGINAL': [{},
                       0,
                       'value',
                       None,
                       [],
                       10,
                       0.5,
                       '',
                       {'empty_dict': {},
                        'empty_list': [],
                        'empty_string': '',
                        'float': 0.5,
                        'integer': 10,
                        'none': None,
                        'string': 'value',
                        'zero': 0}]} 
```

# azure - 如何使用 SharedAccessSignature 访问 blob

> ID：10453563
> 
> 赞同：7
> 
> 时间：2012-05-04T17:35:57.140
> 
> 标签：azure, azure-blob-storage, blobstorage

我正在尝试访问存储在 Windows Azure 中的私有容器中的 blob。容器有一个共享访问签名，但是当我尝试访问 blob 时，我得到一个 StorgeClientException “服务器无法对请求进行身份验证。确保授权标头的格式正确，包括签名”。

创建容器并上传 blob 的代码如下所示：

```
// create the container, set a Shared Access Signature, and share it 

// first this to do is to create the connnection to the storage account
// this should be in app.config but as this isa test it will just be implemented
// here: 
// add a reference to Microsoft.WindowsAzure.StorageClient 
// and Microsoft.WindowsAzure.StorageClient set up the objects
//storageAccount = CloudStorageAccount.DevelopmentStorageAccount;

storageAccount = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["ConnectionString"]);
blobClient = storageAccount.CreateCloudBlobClient();

// get a reference tot he container for the shared access signature
container = blobClient.GetContainerReference("blobcontainer");
container.CreateIfNotExist();

// now create the permissions policy to use and a public access setting
var permissions = container.GetPermissions();
permissions.SharedAccessPolicies.Remove("accesspolicy");
permissions.SharedAccessPolicies.Add("accesspolicy", new SharedAccessPolicy
                                                               {
                                                                   // this policy is live immediately
                                                                   // if the policy should be delatyed then use:
                                                                   //SharedAccessStartTime = DateTime.Now.Add(T); where T is some timespan
                                                                   SharedAccessExpiryTime =
                                                                       DateTime.UtcNow.AddYears(2),
                                                                   Permissions =
                                                                       SharedAccessPermissions.Read | SharedAccessPermissions.Write
                                                               });

// turn off public access
permissions.PublicAccess = BlobContainerPublicAccessType.Off;

// set the permission on the ocntianer
container.SetPermissions(permissions);

 var sas = container.GetSharedAccessSignature(new SharedAccessPolicy(), "accesspolicy");

StorageCredentialsSharedAccessSignature credentials = new StorageCredentialsSharedAccessSignature(sas);
CloudBlobClient client = new CloudBlobClient(storageAccount.BlobEndpoint,
                                             new StorageCredentialsSharedAccessSignature(sas));

CloudBlob sasblob = client.GetBlobReference("blobcontainer/someblob.txt");
sasblob.UploadText("I want to read this text via a rest call");

// write the SAS to file so I can use it later in other apps
using (var writer = new StreamWriter(@"C:\policy.txt"))
{
    writer.WriteLine(container.GetSharedAccessSignature(new SharedAccessPolicy(), "securedblobpolicy"));
} 
```

我一直试图用来读取 blob 的代码如下所示：

```
// the storace credentials shared access signature is copied directly from the text file "c:\policy.txt"
CloudBlobClient client = new CloudBlobClient("https://my.azurestorage.windows.net/", new StorageCredentialsSharedAccessSignature("?sr=c&si=accesspolicy&sig=0PMoXpht2TF1Jr0uYPfUQnLaPMiXrqegmjYzeg69%2FCI%3D"));

CloudBlob blob = client.GetBlobReference("blobcontainer/someblob.txt");

Console.WriteLine(blob.DownloadText());
Console.ReadLine(); 
```

我可以通过添加帐户凭据来完成上述工作，但这正是我想要避免的。我不想要像我的帐户凭据那样敏感的东西只是坐在那里，而且我不知道如何在没有帐户凭据的情况下将签名导入客户端应用程序。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T07:14:42.690

为什么这个？

```
writer.WriteLine(container.GetSharedAccessSignature(new SharedAccessPolicy(), "securedblobpolicy")); 
```

而不是写`sas`你已经创建的字符串？

已经很晚了，我很容易遗漏一些东西，但似乎您可能没有保存与最初用于写入文件的访问签名相同的访问签名。

在这里也可能不相关，但我相信您可以拥有的容器范围策略的数量是有限的。您是否使用此代码将多个文件上传到同一个容器并每次都创建一个新的容器 sas？

一般来说，我认为最好在需要时为单个 blob 请求 sas，并且到期时间很短。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:50:01.923

“my.azurestorage.windows.net”只是一个错字吗？我希望那里有像“https://account.blob.core.windows.net”这样的*东西*。

否则，代码看起来与[http://blog.smarx.com/posts/shared-access-signatures-are-easy-these-days](http://blog.smarx.com/posts/shared-access-signatures-are-easy-these-days)中的代码非常相似，它可以工作。

# ruby - 在 Rails 中从 object_id 转换为有用的东西（姓名、电子邮件等）

> ID：10453566
> 
> 赞同：0
> 
> 时间：2012-05-04T17:36:03.317
> 
> 标签：ruby, ruby-on-rails-3

我在我的第一个 Ruby on Rails 项目中，我试图在选择框中显示用户列表。我想显示所有用户（当前登录的用户除外）。

我现在有这部分，在我的模型、视图和控制器中使用此代码：

请求控制器：

```
def new
  @request = Request.new
  @users = User.without_user(current_user)
end 
```

新请求视图：

```
<div class="field">
  <%= f.label :user_id, 'Select user' %>
  <br />
  <%= select_tag(:user_id, options_for_select(@users)) %>
</div> 
```

用户模型：

```
scope :without_user,
      lambda{|user| user ? {:conditions =>[":id != ?", user.id]} : {} } 
```

这一切都很好，但我的选择框填充了用户的 object_id。例如，如何将该 object_id 转换为名字/姓氏组合？我尝试做类似的事情：

```
<%= select_tag(:user_id, options_for_select(@users.first_name)) %> 
```

但这给了我一个“未定义的方法错误”。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:44:58.060

在您的视图的 select_tag 中，您可以拥有：

```
<%= select_tag(:user_id, options_from_collection_for_select(@users, :id, :first_name)) %> 
```

这将显示 first_name 并且当用户选择其中一个选项时，将`user id`填充到`value`select 标记的属性中。

如果你想显示全名，你可以在你的用户模型中有一个方法：

```
def full_name
  return first_name + " " + last_name
end 
```

而且，在您看来：

```
<%= select_tag(:user_id, options_from_collection_for_select(@users, :id, :full_name)) %> 
```

[您可以在此处](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select)找到更多信息`options_from_collection_for_select`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:47:17.487

你需要的是`options_from_collection_for_select`.

在您的情况下，它将是：

`<%= select_tag(:user_id, options_from_collection_for_select(@users, :id, :first_name)) %>`

[您可以在此处](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select)阅读有关它和其他助手的更多信息

# .net - SQL Azure 数据同步 - 如何访问 API 以进行数据同步？

> ID：10453567
> 
> 赞同：2
> 
> 时间：2012-05-04T17:36:09.063
> 
> 标签：.net, sql-server-2008, azure, synchronization, azure-sql-database

我是 Azure 数据同步的新手。

我想从代码触发***同步。***基本上，我希望***Sync Now***用于应用程序中的特定同步组。

是否有任何类似于博客、队列的 Azure 数据同步 API？我找不到示例代码或示例。

我读了几篇关于 SqlAzureSyncProvider 的文章。我是正确的吗？

预先感谢！![在此处输入图像描述](../Images/6f5c848878b79ccba7a4070fb5bd9f88.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:55:11.173

截至当前版本，SQL Azure 数据同步服务没有公开可用的 API。所以你现在不能以编程方式调用同步。但它在计划中，请参阅：[SQL Azure 数据同步功能投票](http://www.mygreatwindowsazureidea.com/forums/44459-sql-azure-data-sync-feature-voting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:45:03.857

没有JuneT提到的api。如果您愿意，可以使用 Microsoft 同步框架创建自定义解决方案：http: [//msdn.microsoft.com/en-us/sync/bb736753](http://msdn.microsoft.com/en-us/sync/bb736753)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:45:26.387

这是微软提供的示例代码。 [http://code.msdn.microsoft.com/Windows-Azure-Sync-Service-60293622](http://code.msdn.microsoft.com/Windows-Azure-Sync-Service-60293622) http://social.technet.microsoft.com/wiki/contents/articles/1568.walkthrough-of-windows-azure-sync -service-sample.aspx#Your_Scenario

但是您需要实现自己的代码以进行同步

# java - 为什么字符流读取整数？

> ID：10453568
> 
> 赞同：1
> 
> 时间：2012-05-04T17:36:14.293
> 
> 标签：java

在[Oracle Java 教程](http://docs.oracle.com/javase/tutorial/essential/io/charstreams.html)中给出的示例中，他们试图将字符读取为整数...。

*为什么以及如何工作？*

```
try {
        inputStream = new FileReader("xanadu.txt");
        outputStream = new FileWriter("characteroutput.txt");

      int c;
      while ((c = inputStream.read()) != -1) {
            outputStream.write(c);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:39:02.760

如果您阅读 char，则没有可用于文件结尾的值。

通过使用更大的类型`int`，它可以拥有每个可能的字符和另一个表示文件结尾的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:45:46.577

Behind the scenes in java, a `char` is just a 16-bit unsigned value. An `int` is a 32-bit unsigned value.

`chars` are a subset of `ints` whose values have meaning on the ASCII tables.

Because of this relationship, it is a convenience for syntax to allow the two types to easily converted to the other.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:58:23.953

好吧，如果您阅读`Reader`/的文档，`Writer`您可以看到以下说明：

**Writer 类 - 写入方法**

> 写入单个字符。要写入的字符包含在给定整数值的低 16 位中；16 个高位被忽略。

代码只是这样做：

```
public void write(int c) throws IOException {
    synchronized (lock) {
        if (writeBuffer == null){
            writeBuffer = new char[writeBufferSize];
        }
        writeBuffer[0] = (char) c;
        write(writeBuffer, 0, 1);
    }
} 
```

因此，在 的情况下`Writer`，据我所知，这可以通过`char`数据类型完成。

`Reader`另一方面， int 它的方法`read`负责返回一个字符或流指示符的结尾。

文档说：

**Reader 类读取方法**

> 读取的字符，为 0 到 65535 范围内的整数，如果已到达流的末尾，则为 -1。

因此，需要比 char 更大的数据类型，在这种情况下使用 int。

它的实现如下：

```
public int read() throws IOException {
    char cb[] = new char[1];
    if (read(cb, 0, 1) == -1)
        return -1;
    else
        return cb[0];
} 
```

因此，第二种情况证明了使用更大的数据类型是合理的。

他们在两个类中都使用 int 的原因可能只是一致性问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T17:38:41.577

这是因为字符是整数。每个字符都有一个等效的 unicode。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T17:39:20.903

基本上 a`char`是一个`int`. 尝试以下操作：

```
char c = 'c';
int i = c; 
```

这不会导致编译错误。

# java - 我应该如何将 JSP 文件添加到我的应用程序中？

> ID：10453581
> 
> 赞同：1
> 
> 时间：2012-05-04T17:37:28.127
> 
> 标签：java, jsp, tomcat, vaadin

我创建了一个名为loggedOut.jsp 的新JSP 文件，在我的应用程序中单击注销后，我希望被定向到它。虽然我被带到登录页面，但没有转到loggedOut.jsp 文件，但url 显示为转到loggedOut.jsp。

我正在使用tomcat 7和vaadin。

如何让我的应用程序将我带到loggedOut.jsp？

我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>Messages</display-name>
<context-param>
    <description>
    Vaadin production mode</description>
    <param-name>productionMode</p+aram-name>
    <param-value>false</param-value>
</context-param>
<servlet>
    <servlet-name>MessagesApplication</servlet-name>
    <servlet-class>org.vaadin.artur.icepush.ICEPushServlet</servlet-class>
    <init-param>
        <description>
        Vaadin application class to start</description>
        <param-name>application</param-name>
        <param-value>com.entropix.msgapp.main.MsgApplication</param-value>
    </init-param>
    <init-param>
        <description>
        Application widgetset</description>
        <param-name>widgetset</param-name>
        <param-value>com.entropix.msgapp.main.widgetset.MessagesWidgetset</param-value>
    </init-param>
</servlet>
<session-config>
    <session-timeout>30</session-timeout>
</session-config>
<servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>/login.jsp</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>/loginFailed.jsp</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>/loggedOut.jsp</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>MessagesApplication</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list>
<security-constraint>
    <display-name>LoginConstraint</display-name>
    <web-resource-collection>
        <web-resource-name>MessagesUser</web-resource-name>
        <description>Messages Application Authenticated User</description>
        <url-pattern>/*</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
        <role-name>messages-user</role-name>
    </auth-constraint>
    <user-data-constraint>
        <!-- transport-guarantee can be CONFIDENTIAL, INTEGRAL, or NONE -->
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint>
<security-role>
    <description>Messages User</description>
    <role-name>messages-user</role-name>
</security-role>
<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login.jsp</form-login-page>
        <form-error-page>/loginFailed.jsp</form-error-page>
        </form-login-config>
</login-config> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:46:28.767

如果用户未通过身份验证，您可能将 webapp（或 webapp 中的过滤器）配置为重定向到所有（或大量）“受保护”URL 的登录页面。

确保loggedOut.jsp 不是那些需要经过身份验证才能访问的“受保护”URL（或URL 模式）的一部分。这通常在 web.xml 文件中进行配置，但只有您知道您的应用程序是如何工作的。

编辑：现在你已经向我们展示了 web.xml 文件，看看里面。您正在使用 url 模式`/*`（这意味着 webapp 的每个 URL）定义一个资源集合，它需要处于`messages-user`要访问的角色中。这意味着要访问 webapp 的每个 URL，您必须经过身份验证并通过此身份验证获得 messages-user 角色。因此，一旦您注销，您就将用户重定向到 logedOut.jsp。但是由于需要对 URL 进行身份验证才能访问，所以会显示登录页面。

这是给你的教程：http: [//docs.oracle.com/javaee/5/tutorial/doc/bncas.html](http://docs.oracle.com/javaee/5/tutorial/doc/bncas.html)

# php - 如何组织函数内数据库连接的处理？

> ID：10453584
> 
> 赞同：3
> 
> 时间：2012-05-04T17:37:47.600
> 
> 标签：php, mysql, c, database

当我使用 PDO 和 MySQL 编写 PHP 代码时，我总是会在需要它们的函数中创建连接，如下所示：

```
result pseudo_function() {
  create and open connection
  do stuff
  close connection
  return result
} 
```

现在，我开始用 C 编程，我发现指针是一种将整个连接作为参数传递给函数的有趣方式。我想知道在服务整个用户请求之前传递函数之间的连接是否会更好。

澄清一下：对于一个用户请求，可能会调用 1-5 次函数，然后打开数据库、获取数据、执行某些操作、关闭并返回。

如果您保持连接打开，它是否会在性能方面有所不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:42:53.393

最好保持连接打开并对该连接执行 5 次操作，而不是每次都打开一个新连接。

您还可以使用单例存储库模式延迟加载数据库；存储库只打开一次连接，在下次调用时它将返回一个缓存的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:43:33.183

我见过的大多数 PHP 代码的“标准习惯用法”似乎是“打开连接，并保持打开状态”。

php.net 目前似乎已关闭，但这两个链接可能很有趣：

*   [http://php.net/manual/en/function.mysql-pconnect.php](http://php.net/manual/en/function.mysql-pconnect.php)

*   [http://php.net/manual/en/mysqlnd-ms.pooling.php](http://php.net/manual/en/mysqlnd-ms.pooling.php)

如果您正在运行 Apache，也许 mod_dbd 可能是一个很好的解决方案：

*   [http://httpd.apache.org/docs/2.2/mod/mod_dbd.html](http://httpd.apache.org/docs/2.2/mod/mod_dbd.html)

这是关于不关闭连接的含义的很好的讨论：

*   [通过页面打开mysql连接是完全鲁莽的吗？](https://stackoverflow.com/questions/1925825/is-it-totally-reckless-to-leave-mysql-connection-open-through-a-page)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T17:42:58.247

如果您使用 PHP 开发 Web 应用程序，通常（我认为是最有效的方式）打开数据库连接一次并在脚本终止时关闭它。在其他事情完成时保持连接打开并不会真正产生任何开销或根本不需要任何操作，但每次都重新连接。

# ruby-on-rails - 运行 JRuby 线程的依赖问题

> ID：10453588
> 
> 赞同：0
> 
> 时间：2012-05-04T17:37:50.587
> 
> 标签：ruby-on-rails, ruby, multithreading, jruby, jruby-rack

我在带有 Rails 3.0.2 的 JRuby 1.6.7 上运行。我有一些调用 REST 服务的方法。

最好同时执行它们，而不是每个需要 2 秒才能返回总共 6 秒。我会在大约 2 秒内取回数据。

我不能使用 Fibers，因为以下调用使用阻塞 io 并且无法修改，因此我无法将它们编码为“合作”工作。我正在尝试使用抢先线程。

我在线程中有一个简单的调用，如下所示。

```
Thread.new do
  callrest1() 
end 
```

虽然当此代码在线程内执行时出现以下错误。我猜它找不到正确的文件/类，因为它在一个新线程中？有任何想法吗？

预期 /home/joe/ruby/analysis/app/models/dashboard/reports.rb 来定义 Dashboard::Reports Rails.root: /home/joe/ruby/analysis

```
Application Trace | Framework Trace | Full Trace
activesupport (3.0.5) lib/active_support/dependencies.rb:492:in `load_missing_constant'
activesupport (3.0.5) lib/active_support/dependencies.rb:183:in `const_missing'
                      org/jruby/RubyArray.java:1615:in `each'
activesupport (3.0.5) lib/active_support/dependencies.rb:181:in `const_missing'
activesupport (3.0.5) lib/active_support/dependencies.rb:503:in `load_missing_constant'
activesupport (3.0.5) lib/active_support/dependencies.rb:183:in `const_missing'
                      org/jruby/RubyArray.java:1615:in `each'
activesupport (3.0.5) lib/active_support/dependencies.rb:181:in `const_missing'
                      app/controllers/dashboard/index_controller.rb:297:in `generateReport'
                      app/controllers/dashboard/index_controller.rb:223:in `index' 
```

# django - 芹菜工人无法访问数据库

> ID：10453589
> 
> 赞同：1
> 
> 时间：2012-05-04T17:37:52.200
> 
> 标签：django, celery, django-orm, django-celery

我正在运行 Celery 和 django-celery 的最新稳定版本。我已经定义了一个任务，它传递一个主键，获取与该键关联的对象，然后处理它。当我直接调用该函数时，这一切都很好，但是当我将消息放入队列（MongoDB）时，工作人员在访问数据库时失败（带有附加的堆栈跟踪）。有没有其他人遇到过这个问题？

```
[2012-05-04 12:01:23,673: INFO/MainProcess] Got task from broker: app.tasks.process_model[71934fab-b3a2-4847-bb3e-00484d77c6c7]
[2012-05-04 12:01:25,202: INFO/PoolWorker-4] child process calling self.run()
[2012-05-04 12:01:35,618: ERROR/MainProcess] Task coupons.tasks.queue_print_image[71934fab-b3a2-4847-bb3e-00484d77c6c7] raised exception: WorkerLostError('Worker exited prematurely.',)
Traceback (most recent call last):
  File "/Users/<user>/Envs/cf/lib/python2.7/site-packages/celery/concurrency/processes/pool.py", line 634, in _join_exited_workers
    raise WorkerLostError("Worker exited prematurely.")
WorkerLostError: Worker exited prematurely. 
```

# remoting - 使用 Akka 启动多个远程服务器

> ID：10453592
> 
> 赞同：3
> 
> 时间：2012-05-04T17:38:05.727
> 
> 标签：remoting, akka

我在使用 Akka 远程处理来实现一个小型搜索应用程序时遇到了一些部署问题。

我想将我的 ActorSystem 部署在一组本地集群机器上以将它们用作工作人员，但我对在我的 application.conf 中放入什么来实现这一点有点困惑。例如，我可以使用：

```
akka.remote {
  transport = "akka.remote.netty.NettyRemoteTransport"
  netty {
    hostname = "0.0.0.0"
    port = 2552
  }
} 
```

每个工人只是在启动时运行 ActorSystem 。

这允许我的工作机器在启动时绑定到他们的地址，但随后他们拒绝收听消息：

`beaker-24: [ERROR] ... dropping message DaemonMsgWatch for non-local recipient akka://SearchService@beaker-24:2552/remote at akka://SearchService@0.0.0.0:2552`

到目前为止，我为此找到的文档只讨论了在我的本地主机上的部署，这不是很有用:)。我希望有一种方法可以做到这一点，而无需为每个主机生成单独的配置。

* * *

更新：

使用空字符串作为主机名允许通过普通 IP 地址联系主机。目前无法使用主机名本身进行寻址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:22:15.580

将“0.0.0.0”设置为主机名目前基本上会禁用远程处理，因为这不是发送到的合法 IP。背景：参与者引用在离开本地系统时将配置的 IP（或主机名）插入其地址部分，这正是其他系统发回消息的“指针回家”。

Scott 已经做出了一项努力，使系统能够[在此处](https://github.com/akka/akka/pull/396)接收对不同地址的回复，但这还没有包括在内——我们很可能选择了不同的解决方案来解决这个问题。

# azure - 云服务支付

> ID：10453600
> 
> 赞同：0
> 
> 时间：2012-05-04T17:38:48.493
> 
> 标签：azure, amazon-web-services, payment

以小时为单位描述的所有云支付。

让我们看一下服务器花费 0.75s 生成页面并且本月只有一次的情况（因为没有人请求网站）。

这是来自 AWS 和 Azure 网站的文本

> “只为您使用的东西付费。没有最低费用。使用 AWS 简单月度计算器估算您的月度账单。”
> 
> “Windows Azure 定价无前期成本。只为你使用的东西付费”

这是否意味着我将只支付 0.75 秒或整个月的费用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:42:23.210

您必须支付一小时的费用：

[AWS](http://aws.amazon.com/ec2/#pricing)：

> 定价是每个实例消耗的每个实例小时，从实例启动到终止。**消耗的每个部分实例小时将按整小时计费**。

[天蓝色](http://www.windowsazure.com/en-us/pricing/details/)：

> 计算小时数的计费依据为部署服务的时钟小时数乘以部署中包含的等效小型计算实例数。**部分计算实例小时数（转换前）按部署实例的每个时钟小时的完整计算小时数计费**。

# python - 使用 PIL 加载 RGBA 位图

> ID：10453604
> 
> 赞同：7
> 
> 时间：2012-05-04T17:39:06.237
> 
> 标签：python, png, python-imaging-library, bmp, rgba

我尝试使用 PIL 将 32 位位图转换为 32 位 PNG。

```
from PIL import Image
im = Image.open('example.bmp')
print im.mode
# it prints 'RGB', but expected was 'RGBA'
im.save('output.png', format='PNG') 
```

预期的图像模式是“RGBA”，但实际上我得到的是“RGB”。

我也尝试了以下代码，但它不起作用。

```
from PIL import Image
im = Image.open('example.bmp')
im = im.convert('RGBA')
im.save('output.png', format='PNG') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T20:58:22.043

好的，这是开始的事情。由于我不知道具体哪种格式是您的 BMP 文件，所以我只处理了我碰巧拥有的具有完整 Alpha 通道的 BMP 的特定情况。我在这里处理的 BMP 类型可以通过使用 ImageMagick 将带有 alpha 的 PNG 转换为 BMP 来获得。这将创建所谓的“BITMAPV5”。根据您的描述，您没有 BitmapV5（因为 PIL 甚至无法打开它），因此我们需要进行迭代讨论以解决您的具体情况。

因此，您要么需要一个新的文件解码器，要么需要一个打补丁的`BmpImagePlugin.py`. 如何做前者在 PIL 的手册中有描述。对于后者，您显然需要发送一个补丁并希望将其纳入下一个 PIL 版本。我的重点是创建一个新的解码器：

```
from PIL import ImageFile, BmpImagePlugin

_i16, _i32 = BmpImagePlugin.i16, BmpImagePlugin.i32

class BmpAlphaImageFile(ImageFile.ImageFile):
    format = "BMP+Alpha"
    format_description = "BMP with full alpha channel"

    def _open(self):
        s = self.fp.read(14)
        if s[:2] != 'BM':
            raise SyntaxError("Not a BMP file")
        offset = _i32(s[10:])

        self._read_bitmap(offset)

    def _read_bitmap(self, offset):

        s = self.fp.read(4)
        s += ImageFile._safe_read(self.fp, _i32(s) - 4)

        if len(s) not in (40, 108, 124):
            # Only accept BMP v3, v4, and v5.
            raise IOError("Unsupported BMP header type (%d)" % len(s))

        bpp = _i16(s[14:])
        if bpp != 32:
            # Only accept BMP with alpha.
            raise IOError("Unsupported BMP pixel depth (%d)" % bpp)

        compression = _i32(s[16:])
        if compression == 3:
            # BI_BITFIELDS compression
            mask = (_i32(self.fp.read(4)), _i32(self.fp.read(4)),
                    _i32(self.fp.read(4)), _i32(self.fp.read(4)))
            # XXX Handle mask.
        elif compression != 0:
            # Only accept uncompressed BMP.
            raise IOError("Unsupported BMP compression (%d)" % compression)

        self.mode, rawmode = 'RGBA', 'BGRA'

        self.size = (_i32(s[4:]), _i32(s[8:]))
        direction = -1
        if s[11] == '\xff':
            # upside-down storage
            self.size = self.size[0], 2**32 - self.size[1]
            direction = 0

        self.info["compression"] = compression

        # data descriptor
        self.tile = [("raw", (0, 0) + self.size, offset,
            (rawmode, 0, direction))] 
```

为了正确使用它，规范的方式应该执行：

```
from PIL import Image
Image.register_open(BmpAlphaImageFile.format, BmpAlphaImageFile)
# XXX register_save

Image.register_extension(BmpAlphaImageFile.format, ".bmp") 
```

问题是已经有一个处理“.bmp”的插件，我没有费心去寻找如何在这个新扩展之前添加它，以便在使用 BmpImagePlugin 之前使用它（我也不知道它是否是可以在 PIL 中做这样的事情）。说了这么多，其实我是直接用代码的，如：

```
from BmpAlphaImagePlugin import BmpAlphaImageFile

x = BmpAlphaImageFile('gearscolor.bmp')
print x.mode
x.save('abc1.png') 
```

其中 gearscolor.bmp 是一个具有完整 Alpha 通道的示例位图，如前所述。生成的 png 与 alpha 数据一起保存。如果你检查`BmpImagePlugin.py`'s 的代码，你会注意到我重用了它的大部分代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:14:56.373

PIL 有问题，不能与透明 BMP 文件一起正常工作。

如果我没记错的话，wxPython 似乎可以正常使用它们。大约一年前，我在两者之间写了一个小包装，前提是我能找到代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-17T14:28:52.053

@mmgp 的代码非常适合使用 Alpha 加载 BMP 文件，但在 Python 3 上需要两个小改动：

```
if s[:2] != 'BM': 
```

变成：

```
if s[:2] != b'BM': 
```

而self.size需要改变使用的地方，所以代码的结尾变成了：

```
self._size = (_i32(s[4:]), _i32(s[8:]))
direction = -1
if s[11] == '\xff':
    # upside-down storage
    self._size = self._size[0], 2**32 - self._size[1]
    direction = 0

self.info["compression"] = compression

# data descriptor
self.tile = [("raw", (0, 0) + self._size, offset,
    (rawmode, 0, direction))] 
```

此外，有时它会失败 - 因为某些 BMP 格式不正确。您可以预选：

```
if typename != "alpha":
    img = Image.open(filename)
else:
    img = BmpAlphaImageFile(filename) 
```

或者使用 try/catch 块作为后备：

```
try:
    img = BmpAlphaImageFile(filename)
except IOError:
    img = Image.open(filename) 
```

# jquery - W3 Total Cache 在缓存 javascripts 之前未加载 CDN jquery

> ID：10453605
> 
> 赞同：0
> 
> 时间：2012-05-04T17:39:10.030
> 
> 标签：jquery, wordpress, caching

我看到关于这个插件没有太多帮助，但无论如何都可以。

我相信其他人之前已经遇到过这个问题。

我有 WP 3.3.2 并运行 W3 Total Cache 0.9.2.4

这些是 W3 Total Cache 的设置 — [http://www.diigo.com/item/image/2no8j/qgct](http://www.diigo.com/item/image/2no8j/qgct)

我正在通过一个钩子加载我的 javascript，如图所示：

```
 add_action( 'wp_enqueue_scripts' , 'woodworks_load_scripts', 11 ); 

  function woodworks_load_scripts() {

  global $post, $Post_UI_Tabs;

  $js_dir = STYLESHEET_DIR . 'js/';
  $admin_dir = STYLESHEET_DIR . 'admin/';
  $jquery_ui = JQUERY_UI;

  wp_deregister_script('thickbox');
  wp_deregister_script('swfobject');
  wp_deregister_script('jquery');

  wp_register_script('jquery', 'http://code.jquery.com/jquery-latest.min.js', false, '1.7.2', true);

  wp_enqueue_script('jquery');

  if( woodworks_has_tabbed_content( $post ) ){
     wp_enqueue_script('jquery.ui', "{$jquery_ui}", array('jquery'), 1, true);
     $Post_UI_Tabs->has_tabs = true;
  }

  if( 'award' != get_post_type( $post->ID ) ) {
     wp_enqueue_script('main', "{$js_dir}main.js", array('jquery'), 1, true);
     wp_enqueue_script('supersize', "{$js_dir}supersized.3.1.3.min.js", array('jquery'), 1, true);
  }

  if( 'award' == get_post_type( $post->ID ) ){
     wp_enqueue_script('jquery.cycle.all', "{$js_dir}jquery.cycle.all.js", array('jquery'), 1, false);
  }

  if( is_front_page() ){
     wp_enqueue_style( 'home', STYLESHEET_DIR . 'stylesheets/home.css', array(), 1, 'all' );
     wp_enqueue_script('jquery.cycle.all', "{$js_dir}jquery.cycle.all.js", array('jquery'), 1, true);
  } 
```

}

您可以比较[woodworks.signalsinteractive.com](http://woodoworks.signalsinteractive.com)（具有缓存）与[woodworks.org](http://woodworks.org)（未缓存）并查看源差异。

问题是缓存的 jQuery 在缓存版本之后被调用。所以它会导致一个 jQuery 未定义的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:58:59.967

为了让我解决这个问题，我不得不将 jquery 缩小到你的`concatenated/minified js`文件中。我是这样做的：

1.  在常规设置中，将缩小模式设置为手动。
2.  转到缩小选项卡，在 JS 文件管理下，将 jquery URI 添加到文件 URI（例如：[http](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js) ://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js ）。设置为“所有模板”和“嵌入”。

这为我修复了它，但是您不再使用 Google CDNed jquery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-05T09:19:12.713

对我来说，解决方案是添加 jquery 主文件

```
https://www.example.com/wp-includes/js/jquery/jquery.js?ver=1.12.4-wp 
```

在缩小列表的顶部。

# asp.net - 在 Asp.net 4.0 中找不到文件错误

> ID：10453606
> 
> 赞同：0
> 
> 时间：2012-05-04T17:39:18.417
> 
> 标签：asp.net

在本地主机上，我的解决方案工作正常，但在服务器上，当我部署时，它给出了找不到文件的错误。错误信息是这样的。`http://localhost:27375/favicon.ico` 我的应用程序中没有任何此类文件。我尝试在根文件夹中创建，但没有运气。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:50:17.680

如果您可以直接在浏览器中看到该文件，请首先检查 Web 服务器：

[http://productionwebsite/favico.ico](http://productionwebsite/favico.ico)

如果文件在那里，现在您需要检查代码是否使用相对路径。这很可能是使用绝对路径编码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:54:22.237

您的 favicon.ico 文件应该位于网站的根目录中。

看起来您的应用程序仍在尝试连接到 localhost 以显示图标。您是否将您的 URL 硬编码到带有`http://localhost:27275/favico.ico`地址的网站图标？

要建立在 Internet 工程师所说的基础上，使用 ASP.NET，您可以使用以`~`或开头的相对路径`/`。因此，您可以使用`~/favico.ico`or`/favico.ico`来引用您的图标文件。

# java - webdriver firefoxprofile 用户代理未按预期工作

> ID：10453610
> 
> 赞同：0
> 
> 时间：2012-05-04T17:39:38.113
> 
> 标签：java, selenium, webdriver, user-agent, selenium-firefoxdriver

我已经使用 WebDriver 和 FireFox 驱动程序设置了一个用户代理。我有几个用于不同 iPhone 和 android 移动设备的用户代理，这些设备预计将重定向到移动站点。

代码：

```
FirefoxProfile profile = new FirefoxProfile();
profile.setPreference(userAgentOverride, userAgent);
WebDriver driver = new FirefoxDriver(profile); 
```

以下代码行是我用来导航到每个 url 的语法（包装在 for 循环中，循环遍历 url 列表）

```
driver.navigate().to(url); 
```

我遍历了一个大部分会重定向到移动站点 (m.somesite.com) 的 url 列表，但也有一些应该重定向到主站点。例如。www.somesite.com/full-site 重定向到移动设备上的主站点。

我的问题是一旦导航到重定向到主站点的 URL 之一，列表中的其余 URL 不再重定向到他们的移动链接。我尝试删除重定向到主页的 url，然后我的所有 url 按预期重定向。

这是一个错误还是预期的？我认为它将允许在用户代理上测试任何重定向并继续工作，即使在将其发送到主站点的重定向之后也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:24:04.977

想到的第一个嫌疑人是cookies。该站点尝试变得智能，存储一个带有您的设置的 cookie（您有移动设备，但想查看完整的站点），并且在您第二次访问该页面时，它只是从该 cookie 中获取设置并且不会麻烦再检查一次。

导航到页面后尝试[driver.manage().deleteAllCookies() ，这应该会删除所有存储的 cookie。](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Options.html#deleteAllCookies%28%29)

# c# - ASP GridView 在按钮单击时获取行值

> ID：10453613
> 
> 赞同：4
> 
> 时间：2012-05-04T17:40:05.833
> 
> 标签：c#, asp.net, gridview

我在做什么-在单击图像按钮时重置用户密码。

到目前为止完成 - 添加了 GridViewCommandEventHandler - 它正在正确触发。使用来自[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewcommandeventhandler.aspx)的代码。我的 e.CommandArgument 得到一个空字符串 ("")，它在运行时抛出错误（无法将 "" 解析为 int）。

我可以在调试器中看到在 e 的其他地方存储了一个“rowIndex”属性（正确地用于我的点击），我可以访问它吗？我认为 MSDN 的代码会起作用 - 我是否已经做了其他事情来使这个错误发生或用其他方法来解决它？谢谢。

```
void resetpassword(Object sender, GridViewCommandEventArgs e)
{
    // If multiple ButtonField columns are used, use the
    // CommandName property to determine which button was clicked.
    if (e.CommandName == "resetpass")
    {
        // Convert the row index stored in the CommandArgument
        // property to an Integer.
        int index = Convert.ToInt32(e.CommandArgument);

        // Retrieve the row that contains the button clicked
        // by the user from the Rows collection. Use the
        // CommandSource property to access the GridView control.
        GridView GridView1 = (GridView)e.CommandSource;
        GridViewRow row = GridView1.Rows[index];

        String usrname = row.FindControl("username").ToString(); 
```

aspx 页面代码：

```
<asp:TemplateField HeaderText="Reset Password">
                <ItemTemplate>
                    <asp:ImageButton ID="ibtnReset" runat="server" CausesValidation="false" 
                        CommandName="resetpass" ImageUrl="~/Images/glyphicons_044_keys.png" Text="Button" />
                </ItemTemplate>
                <HeaderStyle Width="70px" />
                <ItemStyle HorizontalAlign="Center" />
            </asp:TemplateField> 
```

事件添加代码：

```
 protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
    {
        GridView1.RowCommand += new GridViewCommandEventHandler(this.resetpassword);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:50:00.537

我想你不见了`CommandArgument='<%# Container.DataItemIndex %>'`

为您的代码。

```
<asp:ImageButton ID="ibtnReset" runat="server" CausesValidation="false" 
        CommandArgument='<%# Container.DataItemIndex %>'
        CommandName="resetpass" ImageUrl="~/Images/glyphicons_044_keys.png" 
Text="Button" /> 
```

这是关于 SO [ASP.NET GridView RowIndex As CommandArgument](https://stackoverflow.com/questions/389403/asp-net-gridview-rowindex-as-commandargument)的问题，供进一步阅读。

> ButtonField 类自动使用适当的索引值填充 CommandArgument 属性。

[这是MSDN源](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.buttonfield.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T17:53:11.930

要么通过`CommandArgument`（假设您要传递名为的主键字段`PK`）：

```
 <asp:TemplateField>
    <ItemTemplate>                
      <asp:ImageButton runat="server" ID="ibtnReset"
        Text="reset password"
        CommandName="resetpass"
        CommandArgument='<%# Eval("Pk") %>'
    </ItemTemplate>
  </asp:TemplateField> 
```

或`GridViewRow`通过`NamingContainer`您的`ImageButton`：

```
WebControl wc = e.CommandSource as WebControl;
GridViewRow row = wc.NamingContainer as GridViewRow;
String usrname = ((TextBox)row.FindControl("username")).Text; 
```

您还可以将 RowIndex 作为 CommandArgument 传递：

```
CommandArgument='<%# Container.DataItemIndex %>' 
```

该类自动使用适当的索引值`ButtonField`填充属性。`CommandArgument`对于其他命令按钮，您必须手动设置`CommandArgument`命令按钮的属性。

# java - 如何在 Eclipse 中获取选定的代码？

> ID：10453617
> 
> 赞同：6
> 
> 时间：2012-05-04T17:40:20.220
> 
> 标签：java, eclipse, eclipse-plugin

对于我的插件，我正在尝试访问 CompilationUnitEditor 中的选定代码。因此，我向上下文菜单添加了一个贡献并使用以下代码：

```
public class ContextMenuHandler implements IEditorActionDelegate {

    private IEditorPart editorPart;

    @Override
    public void setActiveEditor(IAction action, IEditorPart editorPart) {
        this.editorPart = editorPart;
    }

    @Override
    public void run(IAction action) {
        JavaUI.getEditorInputJavaElement(editorPart.getEditorInput());
    }

    @Override
    public void selectionChanged(IAction action, ISelection selection) {
        if (selection instanceof TextSelection) {
            TextSelection text = (TextSelection) selection;
            System.out.println("Text: " + text.getText());
        } else {
            System.out.println(selection);
        }
    }

} 
```

现在的问题是方法 selectionChanged(...) 仅在我真正选择某些内容时才被调用，以便我可以复制/粘贴它。但我想访问像这样突出显示的代码元素（这里我想获得“IEditorPart”）

![在此处输入图像描述](../Images/7e8dc6b1b92bfd93ad392f781b1f080b.png)

不幸的是，我不知道我应该寻找什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T20:12:03.543

你应该做这个：

```
 ((CompilationUnitEditor) editorPart).getViewer().getSelectedRange(); 
```

该类`ISourceViewer`有很多关于源位置和编辑器的有用和有趣的方法。你可能还想看看`JavaSourceViewer`。

* * *

编辑

看来我没有完全回答你的问题。问题是 selectionChanged 事件仅在选择的长度大于 0 时才被调用。我不知道为什么会这样，但动作委托一直是这样工作的。

如果您想在插入符号更改时收到通知，您应该向编辑器的查看器注册一个选择更改侦听器。做这样的事情：

```
((CompilationUnitEditor) editorPart).getViewer()
  .addSelectionChangedListener(mySelectionListener); 
```

`mySelectionListener`是类型`org.eclipse.jface.viewers.ISelectionChangedListener`。以这种方式注册，应该会给你所有你正​​在寻找的事件。请注意在编辑器关闭时取消注册。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T19:31:18.043

检测插入符号当前位置会不会更容易。拥有该位置可以让您轻松检测插入符号是否位于单词上（根据需要定义单词，例如空格分隔、java 标识符或使用正则表达式）。

我不能在这里运行 eclipse，但我会使用[CaretListener](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/custom/CaretListener.html)类来检测插入符号的移动，从而提取它下面的单词。`CaretEvent`给定的方法参数将`caretMoved`包含偏移量。

`CaretListener`可以附加到`Adapter`您的组件`StyledText`，您可以从您的组件中获取`EditorPart`（暂时没有更多信息，因为我没有在这里运行 eclipse）。

希望能帮助到你。

编辑：一些代码。

```
final StyledText text = (StyledText)editorPart.getAdapter(Control.class);
text.addCaretListener(new CaretListener() {
        public void caretMoved(CaretEvent event) {
            int offset = event.caretOffset;
            String word = findWord(offset, text);
            if (word.length() > 0) {
                System.out.println("Word under caret: " + word);
            }
        }
});

private String findWord(int offset, StyledText text) {
    int lineIndex = text.getLineAtOffset(offset);
    int offsetInLine = offset - text.getOffsetAtLine(lineIndex);
    String line = text.getLine(lineIndex);
    StringBuilder word = new StringBuilder();
    if (offsetInLine > 0 && offsetInLine < line.length()) {
        for (int i = offsetInLine; i >= 0; --i) {
            if (!Character.isSpaceChar(line.charAt(i))) {
                word.append(line.charAt(i));
            } else {
                break;
            }
        }
        word = word.reverse();
    }
    if (offsetInLine < line.length()) {
        for (int i = offsetInLine; i < line.length(); ++i) {
            if (i == offsetInLine)
                continue; // duplicate
            if (!Character.isSpaceChar(line.charAt(i))) {
                word.append(line.charAt(i));
            } else {
                break;
            }
        }
    }
    return word.toString();
} 
```

这是根据周围的空格字符获取光标下单词的简单实现。应该使用更健壮的实现来检测有效的 Java 标识符等。例如为此使用`Character.isJavaIdentifierStart`和`Character.isJavaIdentifierPart`或使用库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T21:02:33.373

使用其他答案的输入，我最终得到了以下解决方案：

```
@Override
public void setActiveEditor(IAction action, IEditorPart editorPart) {
    ((CompilationUnitEditor) editorPart).getViewer().addTextListener(new ITextListener() {

        @Override
        public void textChanged(TextEvent event) {
            selectedText = event.getText();
        }
    });

} 
```

# .net - 多人运行存储在同一网络目录下的 .net 应用程序可以吗？

> ID：10453619
> 
> 赞同：3
> 
> 时间：2012-05-04T17:40:28.110
> 
> 标签：.net, vb.net

有一个 .Net 可执行文件（带有一组 DLL 等），最多 100 人将在一天中模拟使用。让所有用户都拥有此可执行文件的网络路径的快捷方式是否仍然可以接受/良好做法？或者将 .exe、.dll 等本地复制到每个用户机器会更好吗？每种方法的优缺点是什么，是否有标准的方法来做这种事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:47:15.097

让多人通过网络共享运行同一个应用程序并不是一个好主意。当然，为 100 个用户部署一个独立的应用程序是一场维护噩梦。想象一下，您需要部署一个新功能。您（或其他一些可怜的傻瓜）将不得不前往每台 PC 并对其进行更新。

我建议为应用程序制作一个[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.100%29.aspx)安装程序。这样，您可以为最终用户提供安装程序的链接，并且应用程序可以根据需要自动更新自身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:50:53.420

我同意 DBM，[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.100%29.aspx)是这种情况的最佳实践。

直接从网络驱动器运行时，您可能会遇到安全问题，因为 .Net 运行时将自动不完全信任从网络位置加载的可执行文件。此外，（这是在 .Net 之前，但我认为同样适用），我们曾经在网络共享上有一个 .exe 文件，我们不得不要求每个人退出程序，然后它才能允许您更新文件。发布更新时这是一个很大的痛苦。

# asp.net-mvc - 在运行时替换控制器动作

> ID：10453622
> 
> 赞同：6
> 
> 时间：2012-05-04T17:40:45.587
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我们部署了一个 ASP.NET MVC 3 应用程序，并在其中一个控制器操作中发现了一个错误。出于政治原因，我们不允许在没有需要数周时间的大流程的情况下替换任何现有代码。即我们不能重建 MVC 应用程序。

我们被允许部署一个新的程序集，其中包含一个只有一个固定动作的新控制器。

有没有办法添加或编辑 MVC 应用程序的路由以映射新的控制器操作？

* * *

我正在考虑在修补程序 DLL 中子类化我的 MVC 应用程序并更新 global.asax 以引用子类化的应用程序。

```
public class HotfixApplication : RealApplication
{
    public override void Init()
    {
        base.Init();
        var badRoute =  RouteTable.Routes.Where(...);
        var badRoute.FixIt();
    }
} 
```

它会路由到修补程序 DLL 中的控制器操作。

这听起来合理吗？安全的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:54:04.933

尝试基于ControllerFactory，HttpModule的这种方法：

**脚步：**

1# 创建一个新的“类库”项目。添加对您的 asp.net mvc Web 应用程序项目的引用。还添加对“System.Web”、“System.Web.Mvc”、“Microsoft.Web.Infrastructure.dll”程序集的引用。

2#新建一个继承自有bug的控制器（TargetController）的Controller类：

```
public class FixedContorller : TargetController
{

    [FixedActionSelector]
    [ActionName("Index")]
    public ActionResult FixedIndex()
    {
        ViewBag.Title = "I'm Fixed...";
        return View();
    }
} 
```

[FixedActionSelectorAttribute] 是 ActionSelector 属性，用于解析动作名称。

```
 public class FixedActionSelector : ActionMethodSelectorAttribute
    {
    public override bool IsValidForRequest(ControllerContext controllerContext, System.Reflection.MethodInfo methodInfo)
    {
        return true;
    }
} 
```

3#定义一个自定义ControllerFactory，它将创建固定控制器而不是目标控制器：

```
public class MyControllerFactory : DefaultControllerFactory
{
    private static string targetControllerName = "Target";
    private static string targetActionName = "Index";

    protected override Type GetControllerType(System.Web.Routing.RequestContext requestContext, string controllerName)
    {
        var action = requestContext.RouteData.Values["action"].ToString();

        if (targetControllerName.Equals(controllerName, StringComparison.InvariantCultureIgnoreCase) &&
            targetActionName.Equals(action, StringComparison.InvariantCultureIgnoreCase))
        {
            return typeof(FixedContorller);
        }

        return base.GetControllerType(requestContext, controllerName);
    }
} 
```

4# 现在定义一个 HttpModule，它将在应用程序初始化时设置上述控制器工厂。httpModule 将以编程方式注册自身，无需在 web.config 中注册。

```
using System;
using System.Web;
using System.Web.Mvc;

[assembly: PreApplicationStartMethod(typeof(YourApp.Patch.FixerModule), "Register")]
namespace YourApp.Patch
{
    public class FixerModule : IHttpModule
    {
        private static bool isStarted = false;
        private static object locker = new object();

        public void Dispose()
        {
        }

        public void Init(HttpApplication context)
        {
            if (!isStarted)
            {
                lock (locker)
                {
                    if (!isStarted)
                    {
                        ControllerBuilder.Current.SetControllerFactory(typeof(MyControllerFactory));
                        isStarted = true;
                    }
                }
            }
        }

        public static void Register()
        {
            Microsoft.Web.Infrastructure.DynamicModuleHelper.DynamicModuleUtility.RegisterModule(typeof(FixerModule));
        }
    }
} 
```

编译项目并将 .dll 复制到 Web 应用程序的 bin 文件夹中。

希望这会有所帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:45:05.593

如果我错了，请有人纠正我，但我很确定，除非您的项目旨在动态加载程序集，否则您将无法在没有某种部署的情况下修改您的运行时。

话虽如此，您可以利用 ISS Redirects 或添加到 Web.config 文件中的 HttpModule 将请求指向有问题的控制器的请求指向您选择的新位置。

# colors - 如何防止列表框中的选定项目更改其颜色？

> ID：10453623
> 
> 赞同：0
> 
> 时间：2012-05-04T17:40:53.737
> 
> 标签：colors, listbox, windows-phone, selecteditem

我试图阻止列表框中的选定项目（网格中的文本块）更改其颜色。

我在 wpf 和 silverlight 中找到了一些具有类似问题的问题/答案，但他们使用“HighlightTextBrush”的解决方案似乎不适用于 WP7。

那么你能告诉我怎么做吗？

谢谢我提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:11:01.547

更改“HighlightTextBrush”是自找麻烦，不要这样做。

正确的方法是为`ListBoxItem`.

您需要一种实际上没有选定状态的样式：

```
<Style x:Key="ListBoxItemStyle1" TargetType="ListBoxItem">
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="Padding" Value="0"/>
    <Setter Property="HorizontalContentAlignment" Value="Left"/>
    <Setter Property="VerticalContentAlignment" Value="Top"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListBoxItem">
                <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver"/>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="LayoutRoot">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource TransparentBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ContentContainer"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="SelectionStates">
                            <VisualState x:Name="Unselected"/>
                            <VisualState x:Name="Selected">
                                <!--This is the storyboard to remove-->
                                <!--<Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneAccentBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>-->
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这是 Blend 的原始样式（我认为是 OS 7.0），唯一的变化是在`Selected`状态下注释情节提要。

# xcode4 - xcode 4 界面生成器名称对象

> ID：10453625
> 
> 赞同：5
> 
> 时间：2012-05-04T17:41:06.777
> 
> 标签：xcode4, interface-builder

使用 xcode 3 的界面生成器，我可以通过在大纲视图中单击其名称来重命名对象。有没有办法在 xcode 4 的界面生成器中重命名对象？因为这样的大纲：

```
View
    View
    View
    View
         View
         View
    View 
```

可能会提供更多信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T19:31:00.673

有两种方法可以重命名对象。首先，选择一个对象并打开身份检查器。在身份部分有一个标签文本字段。在文本字段中输入名称。

其次，您可以将沿编辑器左侧运行的对象列表从图标视图更改为分层视图。分层视图显示文档大纲，类似于以下屏幕截图：

![在此处输入图像描述](../Images/8136e24706ff95e74de08ac84c90a526.png)

从对象列表中选择一个对象，然后按 Return 键重命名该对象。如何更改为分层视图取决于您使用的 Xcode 4 版本。较新的版本在画布的左下角有一个按钮，用于切换图标和分层视图。旧版本在对象列表的底部有一个小按钮。

# ios - 遵循路径概率的算法

> ID：10453632
> 
> 赞同：0
> 
> 时间：2012-05-04T17:41:41.837
> 
> 标签：ios, algorithm

我正在开发一个需要确定用户遵循给定路径的概率的 iOS 应用程序。

如果他们没有遵循路径，我想给他们重新计算的选项。

这应该是一个相对简单的算法，对于输入，我有一个位置 (x,y) 和 n 条路径（两个 x,y 点）。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:01:24.483

您可能会查看[**Dijkstra 的算法**](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)来找到两点之间的最短距离？我认为您应该始终提供车辆的当前位置，因为如果转弯错误，它将显示重新计算的值并在图表中显示。希望能帮助到你。

# ios - NEON 程序集无法在 Xcode 4.3.2 中为 iOS 构建

> ID：10453636
> 
> 赞同：1
> 
> 时间：2012-05-04T17:42:10.783
> 
> 标签：ios, xcode, neon

我有一个代码库，可以在所有其他 NEON 编译器、ndk-build、RVDS 等中正常编译，但在 Xcode 下，我调用的每条 NEON 指令都会出现错误“错误指令”。基本上似乎没有检测到NEON。

我正在尝试构建一个静态库，我去了新项目，选择了 Cocoa Touch 静态库，然后添加了我现有的文件。

我正在阅读的所有内容都表明应该已经启用了 NEON。我删除了对 armv6 的所有引用，并以 iOS 5.1 为目标

此外，所讨论的代码都包含在“.s”文件中定义的例程中——纯汇编。我没有使用内在方法调用。

似乎编译器正在对整个文件进行呕吐......

```
Unknown pseudo-op: .cpu 
```

它列出了所有其他设置，例如 .fpu 等

这是我当前的设置：

[![基本编译器](../Images/fb257367f4a212367470466b1bbf48eb.png)](https://i.stack.imgur.com/8512e.png)
[（来源：[wasteonline.net](http://yano.wasteonline.net/stackoverflow/xcode_neon/basic_compiler.png)）]

[![LLVM 代码生成](../Images/0e75801b3f9adab65b1b59191a455e7b.png)](https://i.stack.imgur.com/TReI0.png)
[（来源：[wasteonline.net](http://yano.wasteonline.net/stackoverflow/xcode_neon/llvm_code_gen.png)）]

[![LLVM 语言](../Images/e9e2f7c2c1ba0d5dc2be8185c68b2d3b.png)](https://i.stack.imgur.com/KOcbj.png)
[（来源：[wasteonline.net](http://yano.wasteonline.net/stackoverflow/xcode_neon/llvm_language.png)）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T22:12:55.243

在我在上一个答案中提到的 as 工具结果证明我的语法也令人窒息之后，我意识到肯定还有其他事情发生。

我遵循了这篇文章底部的指南[http://www.shervinemami.info/armAssembly.html#template](http://www.shervinemami.info/armAssembly.html#template)

我需要做的改变是：

1.  将我的指令转换为全部小写
2.  使用命名指令与 mach-o 兼容（解决了链接器问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:33:08.330

尝试使用 GCC4.2。我解决了一个非常相似的问题，切换到旧的、好的 GCC。

在 Build Settings -> Compiler for C/C++/Objective-C 中，选择 GCC

实际上，如果您检查 LLVM ARM 状态页面，您会发现它还不能解析 .S 文件。

# r - 从R中的正态分布样本生成多个置信区间

> ID：10453641
> 
> 赞同：2
> 
> 时间：2012-05-04T17:42:21.487
> 
> 标签：r, confidence-interval

我是一名统计学专业的学生和 R 初学者（轻描淡写），试图为随机生成的正态分布样本生成多个置信区间作为作业的一部分。

我使用了这个功能

```
data <- replicate(25, rnorm(20, 50, 6)) 
```

从 N(50, 6^2) 分布（在双矩阵中）生成 25 个大小为 n=20 的样本。

我的问题是，我如何找到这个分布的每个样本的 95% 置信区间？我知道我可以使用 colMeans(data) 和 sd(data) 来查找每个样本的样本均值和样本标准差，但是我脑子里放屁，试图想出一个可以为所有列生成置信区间的函数在双矩阵（数据）中。

截至目前，我的（非常粗略的）解决方案包括创建函数

```
left <- function (x,y){x-(qnorm(0.975)*y/sqrt(20))}
right <- function (x,y){x+(qnorm(0.975)*y/sqrt(20))}

left(colMeans(data), sd(data)
right(colMeans(data), sd(data) 
```

生成左右边界的 2 个向量。请让我知道是否有更好的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:24:40.380

我想你可以使用这个`t.test()`功能。它返回给定数字向量的平均值和 95% 置信区间。

```
# Create your data
data <- replicate(25, rnorm(20, 50, 6))
data <- as.data.frame(data) 
```

制作数据后，您可以使用该函数将该`t.test()`函数应用于所有列`lapply()`。

```
# Apply the t.test function and save the results
results <- lapply(data, t.test) 
```

如果您只想查看返回的置信区间或均值，可以使用美元符号运算符调用它们。例如，对于原始数据框的第一列，您可以键入以下内容：

```
# Check 95% CI for sample one
results[[1]]$conf.int[1:2] 
```

您可以想出一种更有说服力的方法将这些数据保存到结果数据框中。请记住，您始终可以使用该`str()`命令查看可以从对象中提取的单个信息位。例如：

```
# Example
example <- t.test(data[,1])
str(example) 
```

希望这可以帮助。尝试此链接以获取更多信息：[使用 R 查找置信区间](http://www.stat.wisc.edu/~yandell/st571/R/append7.pdf)

# jquery - 动态更改 Jquery UI 可排序助手？

> ID：10453643
> 
> 赞同：1
> 
> 时间：2012-05-04T17:42:24.263
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-droppable

我试图根据拖动时鼠标所在的区域动态设置 Jquery UI 可排序助手。为了做到这一点，我正在使用 Jquery UI sortable setter。它肯定会改变它，但它不是实时的（不在当前事件中）。任何想法我怎样才能使这项工作？

我已经建立了一个例子 - [http://jsfiddle.net/aJEfp/1/](http://jsfiddle.net/aJEfp/1/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:45:27.083

问题是您在事件处理程序中使用而不是引发事件`$('.content1')`的当前可排序。`$(this)`

这是您的 jsFiddle 的固定版本。

[http://jsfiddle.net/rkc7e/2/](http://jsfiddle.net/rkc7e/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:27:22.167

我怀疑 Sortable 的设计目的是允许在拖动过程中更改辅助元素。

我建议将帮助程序设置为`'clone'`自定义 DOM 元素，然后在拖动中修改该元素，例如通过`ui.helper`在 Sortable 事件处理程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T01:19:05.050

您可以定位 .ui-sortable-helper，因为这是在拖动时应用的类。

```
#sortable .ui-sortable-helper {
    border-color: #FECA40;
    border-width: thick;
} 
```

# android - 批处理项目的问题

> ID：10453644
> 
> 赞同：0
> 
> 时间：2012-05-04T17:42:24.370
> 
> 标签：android, image, batch-file, icons, emulation

我正在尝试为我们的 Android 应用程序创建一个图标。png 已创建并被放入我项目的正确文件夹中，因此可以使用批处理文件对其进行批处理。到目前为止，一切都很好，但是我做了一个我想在模拟器上测试的新图像，但是现在，虽然图像位于适当的文件夹中并且我的批处理文件配置正确（它适用于我们的其他 2 个相同的项目），它不会获取新图像，并且我测试的前一个图像尽管已被删除（使用前一个图像生成的 .apk 和密钥也被删除），但我测试的前一个图像仍被批处理，并且该应用程序也已从模拟器中删除。有什么想法可能导致这种情况吗？同样由于一些奇怪的原因（我已经有一个多星期没有接触项目的代码了），我最终得到了这个错误“LanguageURL 无法解析或不是一个字段”，我设法通过从同一个项目中复制同一行来修复它。这和它有什么关系吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:49:53.833

Happened to me before... Are you sure the icon fits the specs?

Look here: [http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)

# sencha-touch - 如何从 app.js 调用另一个视图

> ID：10453646
> 
> 赞同：0
> 
> 时间：2012-05-04T17:42:27.613
> 
> 标签：sencha-touch, extjs, sencha-touch-2

当应用程序加载时，它会调用 app.js（这在 index.html 中调用）。我想要做的是当应用程序调用 app.js 时，我需要 app.js 来初始化 Main.js 视图。

简而言之，当 app.js 被调用时，它应该调用 Main.js 视图。

我怎样才能以编程方式做到这一点；

**应用程序.js**

```
 //<debug>
Ext.Loader.setPath({
                   'Ext': 'lib/touch/src'
                   });
    //</debug>

Ext.application({
                name: 'My',

                requires: [
                           'Ext.MessageBox'
                           ],

                views: ['Main'],

                icon: {

                phoneStartupScreen: 'resources/loading/Homescreen.jpg',
                tabletStartupScreen: 'resources/loading/Homescreen~ipad.jpg',

                launch: function() {
                // Destroy the #appLoadingIndicator element
                Ext.fly('appLoadingIndicator').destroy();

                // Initialize the main view
                Ext.Viewport.add(Ext.create('My.view.Main'));
                },

                onUpdated: function() {

                }
                }); 
```

**主.js**

```
Ext.define("My.view.Main", {
    extend: 'Ext.tab.Panel',
    requires: ['Ext.TitleBar'],

    config: {
        tabBarPosition: 'bottom',

        items: [
            {
                title: 'Welcome',
                iconCls: 'home',

                styleHtmlContent: true,
                scrollable: true,

                items: {
                    docked: 'top',
                    xtype: 'titlebar',
                    title: 'Welcome to Sencha Touch 2'
                },

                html: [
                    "You've just generated a new Sencha Touch 2 project. What you're looking at right now is the ",
                    "contents of <a target='_blank' href=\"app/view/Main.js\">app/view/Main.js</a> - edit that file ",
                    "and refresh to change what's rendered here."
                ].join("")
            },
            {
                title: 'Get Started',
                iconCls: 'action',

                items: [
                    {
                        docked: 'top',
                        xtype: 'titlebar',
                        title: 'Getting Started'
                    },
                    {
                        xtype: 'video',
                        url: 'http://av.vimeo.com/64284/137/87347327.mp4?token=1330978144_f9b698fea38cd408d52a2393240c896c',
                        posterUrl: 'http://b.vimeocdn.com/ts/261/062/261062119_640.jpg'
                    }
                ]
            }
        ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:34:17.280

做这个，

```
// Initialize the main view
Ext.Viewport.add({
     xclass:'My.view.Main'
}); 
```

# gcc - 将 C 程序与 C++ 库链接 (GCC 4.5+)

> ID：10453649
> 
> 赞同：0
> 
> 时间：2012-05-04T17:42:36.283
> 
> 标签：gcc, g++, shared

我使用 gcc/g++ 4.4 来构建我的项目，现在我正在尝试切换到 gcc 4.5，但是在将 C 程序与 C++ 库链接时出现奇怪的“未定义引用”错误。这是我的测试用例：

*   来源.c

    ```
    #ifdef LIBRARY
    extern "C" int one() {
        return 1;
    }
    #else
    #include <stdio.h>
    int one();
    int main() {
        printf ("%i\n", one());
        return 0;
    }
    #endif 
    ```

*   生成文件

    ```
    all: clean program
    program: source.c library.so
        $(CC) -L. -lrary -o $@ $<
    library.so: source.c
        $(CXX) -shared -DLIBRARY -fPIC -o $@ $<
    .PHONY: clean
    clean:
        rm -f program library.so 
    ```

使用 GCC 4.4 时一切正常：

```
$ CXX=g++-4.4 CC=gcc-4.4 make
rm -f program library.so
g++-4.4 -shared -DLIBRARY -fPIC -o library.so source.c
gcc-4.4 -L. -lrary -o program source.c 
```

但在使用 GCC 4.5 时不起作用：

```
$ CXX=g++-4.5 CC=gcc-4.5 make
rm -f program library.so
g++-4.5 -shared -DLIBRARY -fPIC -o library.so source.c
gcc-4.5 -L. -lrary -o program source.c
/tmp/ccC4kNHP.o: In function `main':
source.c:(.text+0xa): undefined reference to `one'
collect2: ld returned 1 exit status
make: *** [program] Error 1 
```

或 GCC 4.6：

```
$ CXX=g++-4.6 CC=gcc-4.6 make
rm -f program library.so
g++-4.6 -shared -DLIBRARY -fPIC -o library.so source.c
gcc-4.6 -L. -lrary -o program source.c
/tmp/ccxNRNSS.o: In function `main':
source.c:(.text+0xa): undefined reference to `one'
collect2: ld returned 1 exit status
make: *** [program] Error 1 
```

任何人都可以阐明这个问题吗？

PS：这个是使用 4.6 构建的：

```
$ nm -D library.so
                 w _Jv_RegisterClasses
0000000000201010 A __bss_start
                 w __cxa_finalize
                 w __gmon_start__
0000000000201010 A _edata
0000000000201020 A _end
00000000000005a8 T _fini
0000000000000458 T _init
000000000000055c T one 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T19:44:45.597

这是因为[`--as-needed`](http://www.gentoo.org/proj/en/qa/asneeded.xml)使用了链接器的选项，即直到在作为库的一部分的源代码中实际找到符号时才链接库。您应该在编译命令中链接之前移动源文件。您可以尝试将您的`Makefile`规则`program`从更改`$(CC) -L. -lrary -o $@ $<`为`$(CC) $< -L. -lrary -o $@`。或者，您可以传递`--no-as-needed`给链接器，即`$(CC) -Wl,--no-as-needed -L. -lrary -o $@ $<`. 第一种方法更适合使用。
希望这可以帮助！

# c# - 如何从域外的.Net Project Test 测试 sql server 连接 windows 身份验证

> ID：10453652
> 
> 赞同：2
> 
> 时间：2012-05-04T17:42:55.827
> 
> 标签：c#, .net, sql-server, ado.net

这是场景：

我在 Active Directory 上创建了一个名为**Test**的帐户。

此帐户有权**读取**数据库实例。

我可以通过带有 Windows 身份验证的 SQL Server Visual Management Studio 访问域内的数据。

现在的问题：

我如何在外部> 域将使用 .NET 项目测试访问这些数据？

我把它放在我的 app.config 中：

```
<connectionStrings>
   <add name="CRM" connectionString="Data Source=server; Initial Catalog=catalog; Integrated Security=SSPI; providerName="System.Data.SqlClient"/>
</connectionStrings>
<system.web>
   <identity impersonate="true" userName="domain\user" password="pass"/>
</system.web> 
```

但我仍然收到此错误：

> 用户“x”登录失败。用户未与受信任的 SQL Server 连接关联。

最后同样重要的是，是的，我确实启用了 SQL 和 Windows 身份验证模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:49:44.643

If SQL server is outside the domain then you have to provide the IP and port of server like this

Change in connectionstring

From

```
<add name="CRM" connectionString="Data Source=server; Initial Catalog=catalog; Integrated Security=SSPI; providerName="System.Data.SqlClient"/> 
```

To

```
<add name="CRM" connectionString="Data Source=212.22.231.11,1433; Initial Catalog=catalog; Integrated Security=SSPI; providerName="System.Data.SqlClient"/> 
```

In the above statement 212.22.231.11 server which has Database hosted in SQL Server. and 1433 is port exposed by SQL Server

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:57:26.887

当我在我的 AD 域之外时，我使用以下代码段：

```
using System.DirectoryServices;
using System.Diagnostics;
using System.Management;
using System.DirectoryServices.AccountManagement;

public bool IsAuthenticated(String domain, String username, String pwd)
{
    // this is a query of the students credentials
    try
    {
        //Bind to the native AdsObject to force authentication.                 
        String domainAndUsername = domain + "\\" + username;
        DirectoryEntry entry = new DirectoryEntry(_path, domainAndUsername, pwd);
        Object obj = entry.NativeObject;
        DirectorySearcher search = new DirectorySearcher(entry);
        search.Filter = "(SAMAccountName=" + username + ")";
        search.PropertiesToLoad.Add("cn");
        SearchResult result = search.FindOne();
        if (null == result)
        {
            return false;
        }
        //Update the new path to the user in the directory.
        _path = result.Path;
        _filterAttribute = (String)result.Properties["cn"][0];
    }
    catch (Exception ex){}
    return true;
} 
```

然后我像这样使用它：

```
var adAuth = new LdapAuthentication(@"LDAP://snip.edu");            
bool auth = adAuth.IsAuthenticated("snip", "username","password"
if (auth)
{
    // do something}
} 
```

# javascript - 如何将表达式引擎内的javascript变量值作为嵌入标签传递？

> ID：10453656
> 
> 赞同：0
> 
> 时间：2012-05-04T17:43:27.893
> 
> 标签：javascript, expressionengine

```
 var stext=someresult;

 {embed="reports/contact_form"  email_me= "{stext}"} 
```

如何在上面的表达式引擎嵌入标签中传递 javascript 变量或函数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:10:34.907

你不能。

原因和你不能用 PHP 做的原因是一样的。如果您需要服务器端 (PHP) 和客户端 (JavaScript) 之间的数据功能，则必须使用 AJAX。

# drupal - 带 CMS 的网页设计

> ID：10453663
> 
> 赞同：0
> 
> 时间：2012-05-04T17:44:02.683
> 
> 标签：drupal, joomla, content-management-system, adobe

我最近“继承”了一家 IT 公司，该公司拥有做网站的创意部门。生意很好，但我们的吞吐量似乎很低。对于基本网站（没有电子商务等），每个网站需要 3-6 个月。据我所知，过程是这样的：

*   设计师使用 Adob​​e 产品设计网站
*   一旦这些模型看起来不错，我们就会将要“切片”的文件外包
*   一旦我们从“切片器”取回工件，网络编码人员将信息插入 Joomla 站点
*   该网站上线

我的问题：这是正确的方法吗？我对 CMS 了解得不够多，无法知道我们是否以它们预期的方式使用它们。如果有你知道的更好的过程，或者更好的 CMS 更容易插入切片结果，我很想听听。

感谢您提供的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:11:31.057

呃。我讨厌你描述的过程。不太了解 HTML 的设计师进行设计，然后这个“切片”过程涉及将从未设计为 HTML 的东西塞进 HTML 中。

不幸的是，在我的机构，我们发现很难找到从一开始就使用 HTML/CSS 进行设计的人。

但是对于您关于时间的问题，请考虑这一点。我是为代理机构工作的唯一 Web 开发人员。我们花了 4 个月的时间重建我们自己的网站（一个非常简单的网站）。但其中 3 个月的时间都花在了设计师的修改上。

直到发布前一个月，我才开始在该网站上工作。从那时起，我所拥有的只是 Photoshop 文件。我在 Drupal 模板中重新创建了这些文件的外观，并在短短一个月内完成了所有其他开发（包括一些中等复杂度的 javascript）。

在那一个月里，40% 的网站设计发生了巨大变化。如果不是这样，我会在两周内完成。

而我只是一个人。而且我根本不认为自己是一个快速的编码器。你的人花的时间太长了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:48:09.833

The web programmers should be able to slice the files, at the end of the day, they are the ones programming it so they should know what they want/need more than anyone else, it will save money and time theoretically.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:12:44.810

好的，如果“业务非常好”并且您花费“每个站点 3-6 个月”，那么唯一的结论是这些是非常高的设计网站，利润率很高。因此，您听起来不像是在进行每月 14.95 美元的网站业务。

鉴于我们建立的网站通常有一个主要利益相关者，该利益相关者受制于公司设计指南和营销标准，然后是产品定位标准，我们花费 3 个月的时间完成设计工作并不罕见。我们可以进行 3 次设计迭代（所有这些都是客户付费的）。

与您的情况唯一不同的是，我们的设计师是“网页设计师”，要么了解如何构建要“切片”的 Photoshop 文件，要么与将进行切片的人员一起工作。

所以，我唯一觉得奇怪的是你把要切片的作品寄出去了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T20:42:29.690

哇，您描述的工作流程需要 3-6 个月，这听起来很痛苦。这是一个更适合包含高级自定义数据处理功能的站点的时间线。然而，除了你描述的过程和它所花费的时间之间相当大的不匹配之外，这个问题的范围对于 stackoverflow 来说似乎相当广泛。

我将首先编辑您的问题，以表明通常在每个步骤上花费的时间。仅根据您列出的内容，我无法想象需要 3 个月，更不用说 6 个月了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T16:37:59.730

过程没有问题，但资源安排似乎不正确。如果它是一家设计公司，我希望你应该有自己的设计师来切割这些图像，而不是外包。这将提高您的效率和速度。

至于 CMS，Joomla 是一个非常复杂的 CMS，适用于需要大量 CMS 功能的大型网站。对于普通的企业网站，我建议使用 WordPress。它非常轻巧，易于使用，易于皮肤和易于设置。

# unix - 当您在 unix 的两个屏幕上运行相同的命令时会发生什么？

> ID：10453664
> 
> 赞同：0
> 
> 时间：2012-05-04T17:44:03.997
> 
> 标签：unix

我需要从目录中删除相当数量的大文件。我使用“rm *”删除文件并转到另一个屏幕处理其他内容。过了一会儿，我在同一个目录上使用了'rm *'，忘记了我已经这样做了。

我收到一条错误消息，提示“rm: cannot remove `filename': No such file or directory。” 然后我去了第一个窗口，出现了类似的错误。

屏幕是否在竞相看哪个先完成 rm？或者服务器是否以某种方式线程化进程？当服务器在同一目录上执行相同的命令时，它们的屏幕如何相互协作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:54:21.367

在每种情况下，`rm`ing 只是取消链接每个文件的目录条目。这两个进程相互竞争，但很可能只有通过从一个进程到另一个进程的上下文切换才能“线程化”在一起。如果一个人准备取消链接一个文件，然后切换上下文，它的竞争对手很可能有机会取消链接同一个文件。然后当第一个返回时，文件不再存在，所以他移动到那里的下一个条目。

正如heximal所说，在这种情况下（`rm *`），星号已经扩展为文件列表，这意味着您应该在两个进程之间获得一个完整列表，说明您要删除的每个文件都已经消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:53:44.187

问题不是它执行相同的命令。实际上，没有发生任何犯罪行为。`rm`如果未找到指定的文件，则命令以错误结束。当您指定文件掩码 (*) 时，rm 开始删除与该掩码匹配的目录中的所有文件。首先，该进程获取目录中的文件列表，然后获取此列表并单独执行每个文件的删除。您启动的第二个 rm 进程完全相同。它检索文件列表并开始一一删除它们。并且可能存在第一个进程删除第二个进程列表中的文件的情况。当第二个进程 fetch 尝试删除该文件（已被删除）“没有这样的文件或目录”错误发生并且 rm 完成。

# winforms - 删除带有图像的按钮周围的所有额外空间？

> ID：10453667
> 
> 赞同：7
> 
> 时间：2012-05-04T17:44:16.700
> 
> 标签：winforms, button, custom-controls

好吧，尽我所能，我一辈子都无法摆脱按钮周围的这个小边框。

**编辑：我应该提一下，如果我没有说清楚，这些是带有图像的按钮，设置为平面，按钮大小与图像一致。**

下图：

![在此处输入图像描述](../Images/ac83da715116a551e7cb31dd5b0bbaa6.png) 第一，我这辈子都无法让这些边界消失。我已经检查了我能想到的一切。他们是：

*   平坦的
*   边框 0
*   没有边距
*   没有填充
*   手动调整为图像大小（75px）
*   在所有列的表格布局中：
    *   手动调整为图像宽度（75px）
    *   无边界

似乎没有什么能真正“起作用”来摆脱这些。如果我将列的大小缩小为 74px 而不是 75px，它们中的大多数会消失，但仍有一些。我已经对图像进行了三次和四次检查，但它们没有任何我可以拾取的东西应该导致这种情况......边界周围没有透明度，绝对没有看起来像那样的边界。

这导致我遇到第二个问题：

![在此处输入图像描述](../Images/3fe3f4aa29cca4ea211188cf883ad0da.png)

对话框较小时的设置按钮...

![在此处输入图像描述](../Images/ede0d49e63cee32e638b3e89b66966da.png) 对话框展开时的设置按钮。

设置按钮也在同一个表格布局面板中。

我也检查了表格布局面板上的所有设置。我找不到任何填充或边距或任何表明应该发生这种情况的设置。

有人对这个有经验么？我错过了什么..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T04:10:09.083

简单的解决方案：直接使用**PictureBox**，就好像它是一个按钮一样。您可以在鼠标悬停或单击鼠标时更改图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T18:21:08.333

Did you check if the image has transparent pixels around the graphic pixels you want?

May be a simple crop solution.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:38:43.813

编写一个winforms控件有它的挑战（这里讲经验）。我同意这是需要的。根据您的项目，您可能会考虑使用 XAML 和 WPF。它提供了您似乎在您的应用程序中寻找的精细细节。

有多种方法可以在 winform 应用程序中托管 XAML 控件，但如果您采用这种方式，最好创建一个本机 WPF 应用程序。反之亦然（WPF 应用程序中的 winform 控件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T17:17:19.420

虽然不能解决间距问题，但作为一种解决方法，您可以将当前“选项卡”和控制面板图像“后面”的灰色渐变设置`BackgroundImage`为. 虽然没有解决间距问题，但它会使其不明显。`TableLayoutPanel``BackgroundImageLayout``Stretch`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T22:08:53.680

您是否尝试过工具栏/条带/这些天所谓的任何东西？可能不会有帮助，因为我相信它代表你，但值得一试。

最后，您可以将按钮扔进垃圾桶并编写自己的控件。管理 N 个按钮的单个控件在这里可以很好地工作。

我不明白你的第二个问题。有什么问题？如果您无论如何滚动自己的控件，它将被修复。

# ios - 在重复项目上使用源代码

> ID：10453668
> 
> 赞同：1
> 
> 时间：2012-05-04T17:44:23.200
> 
> 标签：ios, xcode, xcode4

我有一个项目，我想在另一个项目中使用 95%。我创建了一个新项目（不同的名称，不同的位置），并从我想要的旧项目中添加了 .h 和 .m 文件（保持相同的名称）。没有那些 .h 和 .m 文件都反映了基于原始源代码控制的 M、A 和 U。我想也许可以更改名称，但这在源代码管理中显示为 A。

关于如何在不影响原始项目 svn 的情况下禁用此项目的源代码控制的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:05:58.037

假设您仍然想使用 SCM，您可以分支或 fork 原始代码，然后在 Xcode 中打开新的分支/表单。

# salesforce - 使用整数列表删除记录

> ID：10453669
> 
> 赞同：0
> 
> 时间：2012-05-04T17:44:33.353
> 
> 标签：salesforce

我想循环遍历整数数组并想要删除 TLToProcess 列表中的项目，这些项目存储在整数数组中

这是我只想删除列表整数中选定的代码

iSize.add(TLToProcess.size());

```
 if(TLToProcess[i].Scan_In1__c==null)
        {   
            if(TLToProcess[i].typew__c=='Pending')
            {
            TLForMissingHHhh.add(TLToProcess[i]);
            }
        }
         else if ( c[i].Scan_In1__c!=null)
        {
            if (TLToProcess[i].typew__c=='Pending' )
            {
            TLToProcess[i].typew__c='Processed';

            }
        }
        } 
```

现在我想使用 remove() 从 TLToProcess 中逐个删除记录，任何人都可以告诉我该怎么做。

谢谢阿努

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:59:06.963

不确定我是否理解您的问题，但如果您要避免的是在循环内修改整数列表并收到此错误：{“集合已修改；枚举操作可能无法执行。”} 您可以创建一个副本您的 List(.ToList()) 并使用它进行迭代，这样您就可以安全地调用 Remove()。

```
 List<Int32> arr = new List<Int32>();
    for (int i = 0; i < 10; i++)
    {
        arr.Add(i);
    }
    foreach(var o in arr.ToList())
    {
        arr.Remove(o);
    } 
```

这是本意吗？

# facebook - 当用户点击“不喜欢”按钮时刷新会话？

> ID：10453675
> 
> 赞同：0
> 
> 时间：2012-05-04T17:45:06.453
> 
> 标签：facebook, facebook-php-sdk

我有一个应用程序，它在初始加载时将 signed_request 存储在会话中。原因是无需附加`?signed_request`到所有内部链接即可访问数据。

我需要根据用户是否有`liked`页面来区分视图。

无论如何我可以绑定一个动作，比如通过 ajax 刷新我的会话的事件处理程序？还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:54:13.253

我最终在我的首页添加了某些逻辑，

```
 13     if ( !isset( $_GET['fromnav'] ) ) {
 14         unset( $_SESSION['fb_data'] );
 15     }
 16 
 17     include 'includes/sess.php'; 
```

从任何导航/内部进入我的 index.php 的任何链接都需要附加 ?fromnav。这表明其内部而不是新鲜状态。如果是新鲜状态，我会清除会话 fb 数据并重新解析签名。到目前为止，这似乎有效。

# jsp - 忽略“jsp:include 无法识别！” Aptana HTML 编辑器中的错误

> ID：10453677
> 
> 赞同：1
> 
> 时间：2012-05-04T17:45:18.450
> 
> 标签：jsp, struts2, aptana, aptana3

我刚刚将 Aptana 插件安装到我的 Eclipse 中，我想用它来编辑一些 .jsp 文件。

但是，我经常在我的 JSP 文件中使用和 struts 标记，而 Aptana 抱怨无法识别它们中的任何一个并将它们标记为错误！

我怎样才能让它忽略这些标签：

```
<jsp:include>
<s:text>
<s:select>
<s:property>
<tiles:insertDefinition> 
```

..等等等等..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T23:12:00.723

转到 Eclipse Preferences ：取消选中 JSP Validations，然后 Aptana 将忽略 JSP 片段。

# php - 无法获取 Facebook Share 成功回调

> ID：10453679
> 
> 赞同：0
> 
> 时间：2012-05-04T17:45:42.493
> 
> 标签：php, facebook, facebook-graph-api

我制作了一个这样的网址来在 Facebook 上分享视频。

```
<a href="http://www.facebook.com/share.php?u=http://streetinvasion.com/test/&t=Faulkner+-+Smuggle+your+media" class="smgl_vid">share this</a> 
```

它的工作，但我需要获得成功回调来跟踪是否有人真的分享它。请给我解释或提供我完整的过程。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:50:47.310

The facebook share button (or the share url) is deprecated, you can read it in the docs:

> The Share button has been deprecated in favor of the Like button, and will no longer be supported. Please use the Like button whenever possible to drive maximum traffic to your apps.

(reference: [http://developers.facebook.com/docs/share/](http://developers.facebook.com/docs/share/))

> **What happened to the old Share button?**
> 
> We deprecated the Share Button when we launched the Like button, because the Like button improves clickthrough rates by allowing users to connect with one click, and by allowing them to see which of their friends have already connected.

(reference: [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/))

Use the like button instead of the share and then register to the *edge.create* event using [FB.Event.subscribe](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/), something like:

```
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
    }
); 
```

# ios - 以编程方式创建的自定义 UITextField 不会在点击时打开键盘

> ID：10453680
> 
> 赞同：1
> 
> 时间：2012-05-04T17:45:44.353
> 
> 标签：ios, uitextfield, custom-view, uitextfielddelegate

我有一个为 iphone 上的文本字段设计的自定义外观。我决定创建一个类

`MYTextField : UIView <UITextFieldDelegate>`

我有一个方法

```
- (id)initWithPlaceholder:(NSString*)placeholder position:(CGPoint) position 
```

创建具有所需视图和外观的 UITextField。

源代码如下：

```
- (id)initWithPlaceholder:(NSString*)placeholder position:(CGPoint) position {
    if (self = [super initWithFrame:CGRectMake(position.x, position.y, TEXTFIELD_WIDTH, TEXTFIELD_HEIGHT)]) {
        UITextField *textField = [[[UITextField alloc] initWithFrame:CGRectMake(10, 200, 300, 40)] autorelease];
        textField.borderStyle = UITextBorderStyleRoundedRect;
        textField.font = [UIFont systemFontOfSize:15];
        textField.placeholder = @"enter text";
        textField.autocorrectionType = UITextAutocorrectionTypeNo;
        textField.keyboardType = UIKeyboardTypeDefault;
        textField.returnKeyType = UIReturnKeyDone;
        textField.clearButtonMode = UITextFieldViewModeWhileEditing;
        textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
        [textField setUserInteractionEnabled:YES];
        textField.delegate = self;

        [self addSubview:textField];
    }
    return self;
} 
```

问题是，在调用该方法时， UITextField 是可见的，但是在点击文本字段时，键盘不显示。

有什么我想念的吗？

PS：我在 Stackoverflow 上发现了几个类似的问题，但似乎没有一个解决方案适合我。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:52:12.597

这里的问题可能是文本字段框架不在 UIView 的框架内。为什么对 self.frame 使用 TEXTFIELD_WIDTH 而对 textfield.frame 不使用？

另外，为什么子类 UIView 而不是 UITextField？

# c# - 如何在纯 C# 中获取字符串的宽度

> ID：10453682
> 
> 赞同：2
> 
> 时间：2012-05-04T17:45:46.663
> 
> 标签：c#, wpf, string, formatted-text

我有一个应用程序，我们在运行时用其他文本替换占位符文本。这样做时，如果字符串超出某个预定义的宽度，我必须添加字符省略号。

所以我没有可用的 DrawingContext，也没有可用的 Graphics.Measure。

我使用了 FormattedText，但无法提取省略号的文本。我永远找不到正确的方法来使用这样的格式化文本。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:47:22.780

对于 WinForms，您可以使用[TextRenderer.MeasureText](http://msdn.microsoft.com/en-us/library/system.windows.forms.textrenderer.measuretext.aspx)函数，

并感谢[vcjones](https://stackoverflow.com/users/492405/vcsjones)的评论，使用[http://smellegantcode.wordpress.com/2008/07/03/glyphrun-and-so-forth/](http://smellegantcode.wordpress.com/2008/07/03/glyphrun-and-so-forth/)中描述的方法用于 WPF。

# java - Cannot find button "Show Selected Element only" Eclipse Java EE

> ID：10453685
> 
> 赞同：5
> 
> 时间：2012-05-04T17:46:11.380
> 
> 标签：java, eclipse

I've looked over Eclipse many many times, and cannot find this button! I had to use this and deal with this problem for 2 weeks now; it's getting really really annoying having to re-open the file cause i wanted to find the declaration line.

Please please please help.

Here's a picture:

[![](../Images/4b0fc5069ec11b3425f1620d25b77df9.png)](https://i.stack.imgur.com/aBx7B.png)

([large version](http://oi45.tinypic.com/2jbabk1.jpg))

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T19:13:08.593

自定义透视：

1.  单击**窗口**»**自定义透视图...**
2.  展开**编辑器表示**
3.  单击**仅显示所选元素的来源**

![工具栏图标](../Images/dd717d595272cf66155929f77d9522dd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:30:50.347

[如果您完全禁用该功能并希望将其取回， Moritz Petersen](https://stackoverflow.com/users/1277252/moritz-petersen)的[回答](https://stackoverflow.com/a/10454814/453590)将很有帮助，但选项本身（如果可用）位于：

```
Window -> Preferences 
```

接着：

```
Java -> Editor -> [ ] Only show the selected Java element 
```

**个人提示：**我将此选项绑定到键盘快捷键，以便我可以按需启用和禁用它。专注于一项任务非常实用，但当您想回到全班视图时确实有点烦人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T10:18:07.750

也许Eclipse中有一个错误。当我从“自定义透视图...”菜单中取消选择“工具栏可见性”选项卡中的所有编辑器演示按钮时，我得到了“仅显示选定元素”按钮。--> OK 之后我再次选择了按钮。

# c++ - Oracle Solaris Studio 内存泄漏与 cout

> ID：10453686
> 
> 赞同：0
> 
> 时间：2012-05-04T17:46:13.340
> 
> 标签：c++

我正在使用 Oracle Solaris Studio 进行一些内存测试。我刚刚安装了它，并编写了传统的“Hello World”程序以确保一切正常运行。

但是，内存泄漏工具报告说 operator new 正在泄漏 40 个字节...

我读到这是带有 MFC（Microsoft 基础类）的旧版本 Visual Studio 中的一个常见问题，但现在我很困惑，因为这在 Oracle 产品中......对吗？

据我了解，可以忽略。但是每次都因为我打印了一些东西而看到它弹出很烦人。

可以做些什么吗？

谢谢。

这是代码：

```
#include <iostream>

int main(void)
{
 std::cout<<"Hello World\n";

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:52:04.490

我用 Sun Studio 12 编译并用 TotalView 检查：

确实存在 40 字节的堆分配，没有匹配的释放，由 制造`__rwstd::facet_imp* __rwstd::facet_maker<std::codecvt<char,char,__mbstate_t>>::maker_func( int, const char*, unsigned )`、调用由`__rwstd::facet_imp* std::locale::__make_explicit( const std::locale::id& ,bool, int, __rwstd::facet_imp*(*)(int,const char*,unsigned)) const`、由调用由`filebuf::overflow`调用由`filebuf::sync`调用`operator<<`。

请注意，除非您需要与基于其基于 roguewave 的 libCstd 构建的东西的二进制兼容性，否则[Oracle 建议使用编译。](http://developers.sun.com/solaris/articles/cmp_stlport_libCstd.html)`-library=stlport4`使用此选项编译时，根本没有进行堆分配`main()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:29:38.093

**来自IBM的Purify**可以检测内存泄漏，也许你可以试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:13:23.573

我尝试了 Solaris Studio 内存工具，发现它非常有用……而且准确，即使我认为我的代码比该工具更了解。也许那些迅速诋毁 Solaris Studio Memory Tool 的人愿意尝试一下，看看它比建议的替代品好多少。

# android - MediaPlayer 在调用 onStop() 时抛出 IllegalStateException

> ID：10453691
> 
> 赞同：10
> 
> 时间：2012-05-04T17:46:51.673
> 
> 标签：android, android-mediaplayer

我有一个`AlertDialog`，当我单击它时它会停止播放声音，但在某些设备上似乎调用`onStop()`会抛出一个`IllegalStateException`，但是为什么呢？

如果对话框打开，则表示声音正在播放，因此应该是音频未播放的情况。

我现在用 try catch 包围了它，但这是什么原因造成的呢？

```
alert.setPositiveButton("YES", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                try{
                mp.stop(); //error
                mp.reset();
                mp.release();
                }catch(Exception e){
                    Log.d("Nitif Activity", e.toString());
                }
                v.cancel();

                popupMessage();                 
                finish();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-04T18:35:09.873

检查`mp != null`可以防止`NullPointerException`但`IllegalStateException`不能由此引起。

The reason you get that error is that the player is in a state where it can't `stop()`. If you have a look at the state-diagram at the top of the [MediaPlayer documentation](http://developer.android.com/reference/android/media/MediaPlayer.html) you can see that stop can only be called after the player is in the `Prepared` state. The next possibility is that you have already called `release()` or `reset()` which will also result in that error.

You can call `stop()` only in `Prepared`, `Started`, `Paused`, `PlaybackComplete` or `Stopped` state. All other states produce that error.

So you either do `prepareAsync()` and the user hits the button before your player is prepared or you have code that releases or resets the player before you hit the button.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:53:38.200

我猜您可能在执行这些行之前将您的实例清空。当我收到此错误时，我首先检查 null。

```
if (mp != null) {
    try {
        mp.stop(); //error
        mp.reset();
        mp.release();
    } catch(Exception e){
        Log.d("Nitif Activity", e.toString());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:52:02.673

显然`mp`没有初始化，[开发资源](http://developer.android.com/reference/android/media/MediaPlayer.html#stop%28%29)；

尝试添加：

```
if(mp != null) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-23T10:07:03.953

检查 mp!=null 可以防止它何时为空，但您的媒体播放器永远不会为空。只需添加 mp=null; 你在哪里做 mp.stop();

# wpf - 选项卡式页面之间的 wpf 验证刷新

> ID：10453712
> 
> 赞同：3
> 
> 时间：2012-05-04T17:48:56.050
> 
> 标签：wpf, validation, tabbed-interface

我通过这个 WPF 验证、IDataErrorInfo、INotifyPropertyChange 的东西到达那里，但是刷新时出现了新问题。我有一个窗口，上面有一堆控件。我有一个选项卡式页面界面，为简单起见，有 2 个页面......每个页面上有 5 个控件。

我开始“添加”一条记录，所以所有字段都是空白的。例如：第一页上需要验证的 3 个字段被正确标记为红色边框，以表明它们是必需的……没问题。

现在，我点击第 2 页并立即返回第 1 页。红色边框全部消失。它们不会重新出现红色，除非我明确地通过它们重新聚焦它们，失去焦点并强制它通过 IDataErrorInfo 进行丢失焦点/属性更改验证。

首先，任何解释为什么 WPF 会丢失第一页的外观，只是因为它必须更改第 1 页的可见性以显示第 2 页，然后再返回第 1 页。

其次，关于如何强制控件正确刷新的建议，红色边框指示它们是必需的。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-04T20:15:50.940

只需将您验证的控件放入 AdornerDecorator 即可正常工作；）

```
 <TabItem>
  <AdornerDecorator>
    <Grid>
      <TextBox>
      </TextBox>
      ...
   </Grid>
  </AdornerDecorator>
</TabItem> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:11:43.843

如果我没记错的话，控件的默认错误验证标记只是覆盖在控件顶部的红色框，而不是控件本身的一部分，因此如果控件被隐藏，则该覆盖的可见性不会持续存在。您可以尝试更改控件模板以将红色边框/标签直接合并为控件的一部分，并且该问题可能会得到解决。

要强制刷新所有绑定（并因此刷新它们的验证），您只需为要重新验证的任何属性再次调用 RaisePropertyChanged。这有点浪费，但是您可以使用空字符串作为参数调用 RaisePropertyChanged，它会为视图模型中的所有属性引发。

# java - Finding the peaks of a spectrogram

> ID：10453714
> 
> 赞同：0
> 
> 时间：2012-05-04T17:49:26.543
> 
> 标签：java, fft, frequency, spectrogram

I am currently working on a project for my 2nd year. I am supposed to code in java a tuner. I have chosen to do a guitar tuner.

After looking around on the internet, I found a java code to do a FFT. I changed it a bit, understood it and have tested it. I know it works fine (i made a graph of it and looked at the different peaks using simple sines functions).

I am now trying to find the fundamental frequency. From what I understand, this frequency is given by the first peak.

I would thus like to create a method that finds for instance the first 5 peaks of my FFT and gives them to me with their indexes.

I first did a simple method where I compared two by two each point of my spectrogram and when the sign changed that's where I knew there was a peak. This method works great with ideal signals (without any noise). However it becomes completely useless if I add noise.

I am really bad in java (I actually started with this project and basically the simple function I described above is my master piece.... just so you get an idea of my level).

Can anyone help me? I would really appreciate it! :) Thanks in advance!

Have a great day!

fireangel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:03:47.713

我想说你最好的选择是将所有值作为一个数组读取，然后遍历它们并使用某种滚动平均值“平滑”它们。

之后，您将拥有更平滑的曲线。使用这条曲线找到你的峰值，然后回到你的原始数据并使用峰值索引来找到那里的实际峰值。

伪代码：

```
// Your raw data
int[] data = getData();

// This is an array to hold your 'smoothed' data
int[] newData = new int[data.length]; 

// Iterate over your data, smooth it, and read it into your smoothed array
for (i <  data.length) {
    newData[i] = (data[i-2] + data[i-1] + data[i] + data[i+1] + data[i+2]) / 5;
}

// Use your existing peak finding function on your smoothed data, and get 
// another array of the indexes your peaks occur.
int[] peakIndexes = yourPeakFindingFunction(newData);

// Create an array to hold your final values.
int[] peakValues = new int[peakIndexes.length];

// Iterate over your peak indexes and get the original data's value at that location.
for(i < peakIndexes.length) {
    peadValues[i] = data[peakIndexes[i]];
} 
```

非常基本且非常蛮力，但它应该让你走上正确的任务轨道。

您需要使用算法来平滑数据，使其具有代表性，并在平滑数据指示的位置找到实际峰值（因为它不准确）。

# java - KeyStroke 类作为 HashMap 中的键

> ID：10453715
> 
> 赞同：1
> 
> 时间：2012-05-04T17:49:32.230
> 
> 标签：java, hashmap, keystroke

关于覆盖 equals() 和 hashCode() 的几个答案描述了两者的需求以及在 Java 中将它们用作 HashMap 中的键的应用程序。我的问题是，Java KeyStroke 类可以安全地作为键放入 HashMap 中吗？此外，所以我不烦人并继续问这些问题，如何确定提供的类（我认为 KeyStroke 由 Swing 提供）在这种情况下是否可以安全使用......即覆盖 equals() 和 hashCode ()?

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:52:03.377

查看是否被覆盖的方法`equals`是`hashCode`查看[API](http://docs.oracle.com/javase/7/docs/api/javax/swing/KeyStroke.html)。`hashCode`并且`equals`没有被覆盖`KeyStroke`，但它们在`AWTKeyStroke`. 事实上，[`AWTKeyStroke#hashCode`](http://docs.oracle.com/javase/7/docs/api/java/awt/AWTKeyStroke.html#hashCode%28%29)声明：

> [this object] 作为哈希表中的索引值是一个不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:51:42.790

最好是 HashMap 键覆盖 equals 和 hashCode 并且是***不可变***的，并且如果您检查 API，KeyStroke 是。所以应该没问题。

# .net - 如何保护动态“创建凭据”语句免受注入？

> ID：10453716
> 
> 赞同：1
> 
> 时间：2012-05-04T17:49:38.683
> 
> 标签：.net, tsql, sql-injection

我需要使用从用户界面传入的凭据名称、身份和密码在 .NET 中创建 CREATE CREDENTIAL 语句。一个天真的实现看起来像这样（请原谅 VB）：

```
Dim cmd As SqlClient.SqlCommand = c.CreateCommand
cmd.CommandText = "CREATE CREDENTIAL [" & credentialName & "] WITH IDENTITY = N'" & identityName & "', SECRET = N'" & password & "'" 
```

它可以工作，但它容易受到 SQL 注入的攻击。我尝试使用这样的参数：

```
cmd.CommandText = "CREATE CREDENTIAL [@CREDENTIALNAME] WITH IDENTITY = @IDENTITYNAME, SECRET = @PASSWORD"
cmd.Parameters.AddWithValue("@CREDENTIALNAME", "myCred")
cmd.Parameters.AddWithValue("@IDENTITYNAME", "Tyler")
cmd.Parameters.AddWithValue("@PASSWORD", "SecretPassword") 
```

但我在*“@IDENTITYNAME”附近收到错误语法错误。*我尝试了不同的括号组合/没有括号，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:27:53.693

`CREATE CREDENTIAL`采用凭证名称，而不是字符串或表达式。

您可能想探索[Credential.Create](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.credential.create%28v=sql.105%29.aspx)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:23:17.830

我认为你不能轻易做到这一点。如果您打算创建动态脚本。
该`CREATE CREDENTIAL`方法旨在供受信任的管理员使用。

您动态创建它似乎很棘手，因为“制作存储过程”的典型答案在这里不适用。理想情况下，您应该在接受的答案中使用对象模型......但是，如果您出于某种原因无法使用该对象模型，则需要以某种方式清理参数。

限制参数的长度怎么样？这不是万无一失的，但应该让你大部分时间。另一种可能的方法是在参数字符串中搜索“查询词”之类`SELECT`的`UPDATE`等......这些词的存在可能会导致参数被拒绝。

一种更复杂的方法可能是尝试使用较低级别的帐户运行参数（`CREATE CREDENTIAL`在事务中没有优先权）。如果没有注入，那么您预计只会出现一次失败，如果有注入，您可以期待不同的结果......然后回滚交易。

不过，我的意见是，您不应该允许将此功能暴露给可能不受信任的用户。

# java - 广播服务器发现

> ID：10453721
> 
> 赞同：2
> 
> 时间：2012-05-04T17:50:13.967
> 
> 标签：java, sockets, udp, multicast, service-discovery

我正在用 Java 创建一个游戏，模拟经典的 5 张牌扑克，有 2 到 4 名玩家。大多数数据将由服务器处理，但由于我不能使用在线服务器，我的想法是允许用户通过创建本地游戏来托管游戏。

现在，我不想强​​制使用 IP 连接游戏，所以我在用户内创建了一个“发现”界面，可以看到所有可用的游戏。这是使用 UDP 协议和对一个公共组的广播研究来完成的：

（代码被简化为仅显示已执行的操作，可能无法像此处显示的那样工作）

**客户**

```
MulticastSocket socket = new MulticastSocket(6020);
InetAddress group = InetAddress.getByName("226.0.0.1");
socket.joinGroup(group);

DatagramPacket packet = new DatagramPacket(new byte[] {(byte) 0xF0}, 1, group, 6020);
socket.send(packet);

while(true) {
    buf = new byte[1];
    packet = new DatagramPacket(buf, buf.length);
    socket.receive(packet);

    if(packet.getData()[0] == 15) {
        Socket client = new Socket(packet.getAddress(), 6020);
    }
} 
```

**服务器**

```
MulticastSocket socket = new MulticastSocket(6020);
InetAddress group = InetAddress.getByName("226.0.0.1");
socket.joinGroup(group);

// new thread listening on port 6020 TCP
ServerSocket server = new ServerSocket(6020);
new Thread(new Runnable() {

            public void run() {
                while(true) {
                    // new thread communicating with client and back listening on port 6020
                    new ServerThread(server.accept());
                }
            }
}).start();

// listening on port 6020 UDP
byte[] buf;
DatagramPacket packet;
while(true) {
    buf = new byte[1];
    packet = new DatagramPacket(buf, buf.length);
    socket.receive(packet);

    if(packet.getData()[0] == -16) {
        DatagramPacket packet = new DatagramPacket(new byte[] {(byte) 0x0F}, 1, packet.getSocketAddress());
        socket.send(packet);
    }
} 
```

客户端在 6020 端口上发送一个 UDP 广播包。当服务器收到这个包，如果它是由一个字节 0xF0 组成的，他会向客户端发回一个字节 0x0F。每个客户端也在侦听端口 6020，当接收到由字节 0x0F 组成的数据包时，它会在端口 6020 上启动到服务器的新 TCP 连接。

我的问题：有没有更好的方法来实现这个“发现”系统？我知道这仅适用于本地网络，是否可以使用本地服务器将发现“扩展”到“外部”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:17:29.717

除非您想建立某种可以将玩家与服务器连接起来的已知代理（或给他们一个服务器列表），否则您可能不走运。正如您所发现的，大多数交换机通常不会将多播和广播发送到 WAN（并且绝对不能穿越 Internet）。

如果您设置已知服务器/代理的问题是您有家庭连接和动态 ip，我建议您查看动态 DNS。有许多提供商允许您在他们的系统上设置一个子域，当您的 IP 更改时，该子域会自动更改为指向您的 IP。

# javascript - Weird behavior with Javascript getter/setters

> ID：10453725
> 
> 赞同：2
> 
> 时间：2012-05-04T17:50:30.443
> 
> 标签：javascript, node.js, object, getter-setter

I am trying to create an object that defines getters/setters automatically for a new instance of an object. I want the setter to put the values in a separate object property called newValues. Why in the following code snippet does setting the value of prop1 actually set the value of newValues.prop2 instead of newValues.prop1?

Am I doing something silly here? It's totally possible as I am on only a few hours of sleep... :)

```
var Record = function(data) {
  this.fieldValues = {}
  this._data = data;
  var record = this;
  for(var key in data) {
    record.__defineGetter__(key, function() {
      return record._data[key];
    });
    record.__defineSetter__(key, function(val) {
      record.fieldValues[key] = val;
    });
  }
}

var myRecord = new Record({prop1: 'prop1test', prop2: 'prop2test'});

myRecord.prop1 = 'newvalue';

console.log(myRecord.fieldValues.prop1); // undefined
console.log(myRecord.fieldValues.prop2); // 'newvalue' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T17:53:25.527

Because when you eventually use the function that you've created for the getter/setter, `key` has its final value. You need to close over the value of `key` for each iteration of the loop. JavaScript has functional scope, not block scope.

```
var Record = function(data) {
    var key;
    this.fieldValues = {}
    this._data = data;
    for(key in data) {
        //closure maintains state of "key" variable
        //without being overwritten each iteration
        (function (record, key) {
            record.__defineGetter__(key, function() {
                return record._data[key];
            });
            record.__defineSetter__(key, function(val) {
                record.fieldValues[key] = val;
            });
        }(this, key));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:55:17.373

这是人们在 JS 中遇到的常见问题：循环中的闭包问题。

这很好地解释了它以及解决方案：[http ://www.mennovanslooten.nl/blog/post/62](http://www.mennovanslooten.nl/blog/post/62)

# nhibernate - 使用 Fluent NHibernate 有条件地将两列映射到一个字段

> ID：10453731
> 
> 赞同：1
> 
> 时间：2012-05-04T17:51:01.027
> 
> 标签：nhibernate, map, conditional, fluent

我有一个名为 Owner 的 NHibernate 实体，它在数据库中有一个 SSN 列和一个 TaxID 列，我想根据不同属性的值有条件地将这两个值之一映射到 Owner 实体上更通用的属性，结构类型。因此，如果 StructureType 为“I”，我想将 SSN 值映射到通用属性，如果它的“C”我想将 TaxID 值映射到通用属性。这可能使用 Fluent NHibernate（甚至常规 NHibernate）吗？Owner 实体是只读实体，不会将任何内容写回数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:14:06.303

我能够使用 Fluent NHibernate 中的公式解决这个问题：

```
Map(x => x.Identification)
.Formula("CASE WHEN StructureType = 'I' THEN SSN ELSE TaxID END"); 
```

（在我原来的帖子中，我说它介于“I”和“C”之间，但实际上只是介于“I”和其他所有类型之间）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:56:59.440

为什么不添加只读属性？

```
public string Identification
{
   get
   {
       string identification = string.Empty;
       if (StructureType.Equals("I"))
           identification = SSN;
       else if (StructureType.Equals("C"))
           identification = TaxID;
       return identification;
   }
} 
```

# objective-c - Obj-C View to PDF 只呈现第一页

> ID：10453733
> 
> 赞同：3
> 
> 时间：2012-05-04T17:51:10.723
> 
> 标签：objective-c, ios5, uiview, pdf-generation

我有一个名为 UIView+PDFView 的 UIView 扩展类，它采用当前视图，将其拆分为页面，并呈现 PDF 文档。我的问题在于渲染部分；我可以成功地为内容“创建”页面，但是第一个页面之后的所有页面都是空白的。我的最终目标是获取当前视图，“缩放”等于页面的宽度，并在 PDF 中对视图的其余部分进行分页。

问题不是：

*   将 PDF 附加到电子邮件
*   将 PDF 发送到打印机/打印模拟器
*   在实际正确生成 PDF 时只打印一页
*   正确调整视图大小[（SO Question 4919388）](https://stackoverflow.com/questions/4919388/generate-a-pdf-from-a-view-for-emailing)
    *   我在发送到方法之前执行此操作。通过使框架高 10 像素进行验证，仍然打印一个（并且只有一个）整页
*   正确翻译视图。通过翻译和比例进行验证；两者都正确更改了视图，但都没有在第一页上呈现。

我的代码如下：

```
@interface UIView (PDFView)
-(id)createPDFAndSaveToDocumentsWithFileName:(NSString*)aFilename andDocumentInfo:(NSDictionary *)documentInfo;
@end

@implementation UIView (PDFView)

-(id)createPDFAndSaveToDocumentsWithFileName:(NSString*)aFilename andDocumentInfo:(NSDictionary *)documentInfo {
    // http://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Reference/CGPDFContext/Reference/reference.html#//apple_ref/doc/constant_group/Auxiliary_Dictionary_Keys

    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    CGSize pageSize = CGSizeMake(self.bounds.size.width, 792);
    UIGraphicsBeginPDFContextToData(pdfData, CGRectZero, documentInfo);
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    NSInteger currentPage = 0;
    BOOL done = NO;

    do {
        CGRect currentPageRect = CGRectMake(0, (pageSize.height*currentPage), pageSize.width, pageSize.height);
        UIGraphicsBeginPDFPageWithInfo(currentPageRect, nil);

        // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData
        [self.layer renderInContext:pdfContext];

        // If we're at the end of the view, exit the loop.
        if ((pageSize.height*currentPage) > self.bounds.size.height) {
            done = YES;
        } else {
            currentPage++;
        }
    } while (!done);

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    if (aFilename == nil) {
        return pdfData;
    } else {
        // Retrieves the document directories from the iOS device
        NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

        NSString* documentDirectory = [documentDirectories objectAtIndex:0];
        NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

        // instructs the mutable data object to write its context to a file on disk
        [pdfData writeToFile:documentDirectoryFilename atomically:YES];
        NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
        return nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T18:11:12.990

我认为你的问题在于

```
CGRect currentPageRect = CGRectMake(0, (pageSize.height*currentPage), pageSize.width, pageSize.height); 
```

而不是尝试使用以下任一语句

```
UIGraphicsBeginPDFPageWithInfo(CGRectMake(0.0, 0.0, 612.0, 792.0), nil);
UIGraphicsBeginPDFPage(); 
```

每次您希望在上下文中添加新页面时，请使用上述语句，您就可以将页面添加到上下文中。

如果您希望使用页面的默认大小，即 612 X 792，您可以直接使用`UIGraphicsBeginPDFPage();`

对于自定义页面大小，您可以使用`UIGraphicsBeginPDFPageWithInfo(CGRectMake(0.0, 0.0, 612.0, 792.0), nil);`

我认为这应该可以解决您的问题。

# video - 试图在php中上传视频文件，但它太大了

> ID：10453735
> 
> 赞同：1
> 
> 时间：2012-05-04T17:51:16.073
> 
> 标签：video, file-upload, php, filesize

我正在尝试使用 html 文件输入标签将视频上传到在 wamp 2.2 服务器上运行的 php 5.3.10 脚本。我发现它不会上传，显然它太大了。

我已经进入 php.ini 并将以下内容更改为 100M：post_max_size、upload_max_filesize

并且 memory_limit 为 128 MB。我重新启动了 WAMP 并尝试上传文件，但它仍然没有上传。然后我清除了我的缓存和历史记录并重新启动了 wamp，它仍然没有工作。然后我清除了缓存，关闭了wamp，关闭了我的电脑，然后再次启动，启动了wamp，它仍然无法正常工作。

我要上传的视频约为 25 MB。

尽管我在 php.ini 中进行了更改，但每次我尝试上传此视频时，Apache 错误日志都会不断发布此错误：

[错误] [client 127.0.0.1] PHP Warning: POST Content-Length of 26246222 bytes 超出了 Unknown on line 0 中 8388608 bytes 的限制，referer: [http://localhost/uploadFile.html](http://localhost/uploadFile.html)

还有一个带有以下行的php脚本：

echo ini_get('upload_max_filesize'), ", ", ini_get('post_max_size'), ", ", ini_get('memory_limit'): 打印出：100M, 8M, 128M

所以似乎问题在于 post_max_size，尽管我在 php.ini 中设置为 100M

可能是什么问题呢？我该如何解决这个问题？...

这是我的 php.ini 文件内容的链接，该文件位于 C:\wamp\bin\php\php5.3.10 下：

[http://pastebin.com/RUVE093u](http://pastebin.com/RUVE093u)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T17:54:34.530

在 C:\wamp\bin\apache\apache2.2.x\bin\php.ini 中尝试这些设置

```
Find:
post_max_size = 8M
upload_max_filesize = 2M
max_execution_time = 30
max_input_time = 60
memory_limit = 8M

Change to:
post_max_size = 750M
upload_max_filesize = 750M
max_execution_time = 5000
max_input_time = 5000
memory_limit = 1000M 
```

然后重启wamp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T18:04:48.987

```
8,388,608 bytes = 8 megabytes 
```

在 php.ini 中搜索 post_max_size 的多次出现。最后一个是即将生效的。

然后检查您网站的/脚本文件夹的 .htaccess 文件，因为它们可以用自己的值覆盖 php.ini 设置。

# google-app-engine - CSS 未在 AppEngine 中部署的 Gwt 应用程序的 Chrome 上呈现

> ID：10453739
> 
> 赞同：1
> 
> 时间：2012-05-04T17:51:37.540
> 
> 标签：google-app-engine, gwt

我想知道为什么我在 Appengine (Appspot) 中部署的 GWT 应用程序在使用 Firefox 正确呈现时无法使用 Google Chrome 正确呈现。我在开发模式下尝试过Chrome和Firefox，这两种浏览器都没有问题。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:52:28.483

这是SDK 1.6.1 中[已知的 CSS 部署错误](https://groups.google.com/forum/?fromgroups#!topic/google-appengine-java/zqa5x7utULo)。解决方案是将您的 SDK 更新到最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:12:45.350

我在正在加载的 html / jsp 上添加了这个：

```
<link type="text/css" rel="stylesheet" href="..."> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:28:28.833

GWT 为两个不同的浏览器创建两个不同的缓存文件。这段代码在开发模式和产品模式上是不同的。

您可以在浏览器中检查使用开发人员工具加载的文件。

在一个浏览器中类似于 6AF04C348A1F695F02971B5F417097D4.cache.html 和在另一个浏览器中不同的 *.cache.html (zB AA66E93E26DE37E8FA7F748457739037.cache.html)。

您可以在 WAR/[modulename]/ 文件夹中看到所有已编译的缓存文件

如果你想分析这些文件，你应该在不混淆的情况下编译它：

GWT 编译输出样式为“详细”

# javascript - 直接从 Rails 视图发送 javascript 有什么问题吗？

> ID：10453742
> 
> 赞同：0
> 
> 时间：2012-05-04T17:51:43.600
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个 rails3.1 应用程序，我将在其中向客户端发送一些数据。一种方法是调用 jscon，然后在客户端使用 jquery 将 json 数据添加到页面。但我直接从视图发送一个javascript代码，即从视图添加css类和id，然后将带注释的数据发送到客户端。

js.erb 文件中的类似内容

$("#posts").append("");

$("#posts").data('totalPosts', <%= @postCounter %>);

我的问题是这种方法是否有任何潜在问题？任何安全风险或浏览器问题？

谢谢， 阿尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:43:26.900

它会起作用，但从可维护性/系统工程的角度来看并不是那么好：

*   您最终会得到分散在视图文件中的 jQuery javascript 片段。
*   您可能会在其他地方有额外的 jQuery 启动/引导代码。
*   您将动态网页（客户端）与服务器紧密耦合。松耦合更好。
*   您正在发送 jQuery Javascript + 数据以响应客户端用户的操作。更好（更紧凑）只发送数据。

建议：切换到一个api。将您的 Rails 应用程序变成提供 json 的服务。在客户端上编写 jQuery 和常规 Javascript 以与 Rails 应用程序提供的服务进行交互。

您还可以在浏览器上使用新的紧凑库，使这变得简单而有趣。例如，我喜欢[AngularJS](http://angularjs.org)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:29:37.233

至于问题 - 这是最相关的来源：[https](https://github.com/rails/jquery-ujs/issues) ://github.com/rails/jquery-ujs/issues 。如您所见，没有严重的问题。

根据我的意见和经验，您可以使用您认为必要的东西来解决某个问题。

# orchardcms - ORCHARD：显示错误/未找到和登录页面的特定小部件

> ID：10453743
> 
> 赞同：1
> 
> 时间：2012-05-04T17:51:46.493
> 
> 标签：orchardcms

我无法弄清楚如何获取特定于我已放入自定义主题的 error/notfound.cshtml 页面的小部件。

本身没有“url”，所以我不能为它创建一个层规则。有没有具体的方法来做到这一点。

另外，虽然我相信我可以创建一个 url 规则，例如 url("/LogOn")，但我的登录 url 附加了一个“?ReturnUrl=%2F”。这有关系，还是我应该只做 url("/LogOn*")？

我的“默认”层中的所有小部件在这些页面上都显示得很好。但是对于页面的某些部分，我不使用“Defualt”，因为每个小部件都有不同的版本。我想在这些空白区域中显示一些内容（因为它们不是“默认”小部件）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:58:50.953

根据 url 规则的代码构建您自己的规则。

# python - How do I run Django as a service?

> ID：10453744
> 
> 赞同：6
> 
> 时间：2012-05-04T17:51:51.993
> 
> 标签：python, django, ubuntu

I am having difficulty running Django on my Ubuntu server. I am able to run Django but I don't know how to run it as a service.

```
Distributor ID:    Ubuntu
Description:       Ubuntu 10.10
Release:           10.10
Codename:          maverick 
```

Here is what I am doing:

1.  I log onto my Ubuntu server
2.  Start my Django process: `sudo ./manage.py runserver 0.0.0.0:80 &`
3.  Test: Traffic passes and the app displays the right page.
4.  Now I close my terminal window and it all stops. I think I need to run it as a service somehow, but I can't figure out how to do that.

How do I keep my Django process running on port 80 even when I'm not logged in?

Also, I get that I should be linking it through Apache, but I'm not ready for that yet.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T18:07:05.303

**不要用于** `manage.py runserver` **在端口 80 上运行服务器。甚至用于开发。**如果您的开发环境需要它，最好通过 iptables 将流量从 8000 重定向到 80，而不是以 root 身份运行 django 应用程序。

在 django 文档（或本文的其他答案）中，您可以了解如何使用真实的网络服务器运行它。

如果出于任何*其他*原因您需要在关闭终端后继续在后台运行进程，则不能只运行该进程，`&`因为它将在后台运行，但会保留会话的*会话 id*，并且会在会话负责人（您的终端）已终止。

您可以通过该`setsid`实用程序运行该过程来规避此行为。有关更多详细信息，请参阅您的手册*页*以获取*setid*。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-04T18:18:49.763

无论如何，如果在阅读其他评论后，您仍想使用 manage.py 的进程，只需在命令行前添加“nohup”：

```
sudo nohup /home/ubuntu/django_projects/myproject/manage.py runserver 0.0.0.0:80 & 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T17:54:49.010

对于这种工作，既然你在 Ubuntu 上，你应该使用很棒的[**Ubuntu upstart**](http://upstart.ubuntu.com/)。

只需指定一个文件，例如`django-fcgi`，如果您要[使用 FastCGI 部署 Django](https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/)：

```
/etc/init/django-fcgi.conf 
```

并放置所需的暴发户语法说明。

然后你就可以`runserver`简单地启动和停止你的命令：

```
start runserver 
```

和

```
stop runserver 
```

使用 Upstart 管理 Django 进程部署的示例：[here](http://www.growse.com/news/comments/django-fastcgi-upstart-scripts/)和[here](https://serverfault.com/questions/210012/running-django-sites-through-upstart)。在我自己设置这个部署结构时，我发现这两个链接很有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T17:57:39.977

问题是`&`在后台运行程序但没有将其与生成过程分开。但是，另一个问题是您正在运行开发服务器，该服务器仅用于测试目的，不应用于生产环境。

使用`gunicorn`或 apache 与`mod_wsgi`. django 和这些项目的文档应该明确说明如何正确服务它。

如果您只是想要一种非常快速和肮脏的方式来在端口 80 上运行 django 开发服务器并将其留在那里——这不是我推荐的——你可能会在`screen`. `screen`将创建一个即使您关闭连接也不会关闭的终端。您甚至可以在屏幕终端的前台运行它并断开连接，让它一直运行直到重新启动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T08:19:33.177

如果你使用 virtualenv，sudo 命令将`manage.py runserver`在虚拟环境上下文之外执行命令，你会得到各种错误。

为了解决这个问题，我做了以下事情：

在处理虚拟环境类型时：

```
which python 
```

输出：`/home/oleg/.virtualenvs/openmuni/bin/python`

然后输入：

```
sudo !! 
```

输出：`/usr/bin/python`

然后剩下要做的就是在全局 python 和你当前使用的 virtualenv 上的 python 之间创建一个符号链接，并希望在 0.0.0.0:80 上运行

首先将全局 python 文件夹移动到备份位置：

```
mv /usr/bin/python /usr/bin/python.old 
```

/usr/bin/python

应该这样做：

```
ln -s /usr/bin/python /home/oleg/.virtualenvs/openmuni/bin/python 
```

而已！现在您可以`sudo python manage.py runserver 0.0.0.0:80`在 virtaulenv 上下文中运行了！

请记住，如果您在本地开发设置中使用 postgres DB，您可能需要一个 root 角色。

感谢@ydaniv

# svg - 地图：混合区域和标记

> ID：10453752
> 
> 赞同：1
> 
> 时间：2012-05-04T17:52:23.517
> 
> 标签：svg, google-visualization

我需要在美国地图上同时显示颜色编码的州和城市。

谷歌地理图表可以做到这一点吗？ [http://developers.google.com/chart/interactive/docs/gallery/geochart#Configuration_Options](http://developers.google.com/chart/interactive/docs/gallery/geochart#Configuration_Options)

基本上我正在寻找的是一种混合区域和标记显示模式的方法。

如果没有，是否有任何替代选项可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:40:31.677

[我也在这里](https://stackoverflow.com/questions/10644798/google-visualization-can-you-code-u-s-province-level-data-and-some-city-plots)回答了一个类似的问题，但这里又出现了：

区域和标记不会同时工作。因此，如果您想为状态的背景着色，使用标记模式，您可以使用 CSS 来完成。

我正在为我在这里开发的 Wordpress 插件记录一些示例：http: [//cmoreira.net/interactive-world-maps-demo/advanced-customization/](http://cmoreira.net/interactive-world-maps-demo/advanced-customization/)

检查最后一个例子。这并不容易，因为您必须找到要着色的子路径编号，然后才能做到。例子：

```
#visualization path:nth-child(5) {
fill:#cccccc;
} 
```

这是一个示例，来自另一个用户的 forkerd，上面的 CSS：http: [//jsfiddle.net/cmoreira/Jqkjg/](http://jsfiddle.net/cmoreira/Jqkjg/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:46:25.830

不，这对于 GeoCharts 是不可能的。我建议您为此尝试[jVectorMap](http://jvectormap.com)库。

# java - Swing: rotated stylized text?

> ID：10453753
> 
> 赞同：0
> 
> 时间：2012-05-04T17:52:26.073
> 
> 标签：java, swing, text

I have a renderer I've been using to draw a complex set of stuff onto a Graphics2D context, including rotated text using transforms and `Graphics2D.drawString()`.

Now I want to see what it would take to draw stylized text, and it looks like it would be a quagmire, except that the JLabel class handles this nicely by itself if you use HTML e.g.:

```
<html>a<sup>2</sup> + b<sup>2</sup> = c<sup>2</sup></html> 
```

Which of the following is a simpler approach, and how do I get started down that path?

1.  Use a JLabel to render text onto my Graphics2D context, emulating the way a JTable uses renderers by having a component like JLabel do the rendering. (which I tried doing, but I can't seem to get it to work; not sure what method to call -- paint() or paintComponents()? -- and not sure if it works with rotated graphics transforms)

2.  Parse HTML or some other simplified formatting language (like the subset of TeX used by MATLAB for graphs) and continue using drawString(), but handle the formatting myself.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:58:24.033

将此[示例](https://stackoverflow.com/a/6333584/230513)与您的 HTML 一起使用似乎有效：

![旋转面板](../Images/7e935090973dd2e229a1da0b316e9c35.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T18:00:39.050

在我看来，你最好的选择是做#1，使用你的 JLabel 作为渲染器。实际上我确实确认过一段时间你可以让标准挥杆组件旋转（显示它很容易 - 事件更棘手）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T18:52:49.773

我使用[Greg Hinkle 的 VerticalLabelUI](http://svn.tomjudge.com/jxnap/mc4j/src/org/mc4j/console/swing/ui/VerticalLabelUI.java)效果很好。

我创建了一个名为 VerticalLabel 的 JLabel 子类，它会自动获取同一个包中的 VerticalLabelUI。甚至可以以这种方式与 JFormDesigner GUI 构建器一起使用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T06:50:42.737

你可以试试这个[http://java-sl.com/vertical.html](http://java-sl.com/vertical.html)

# java - 在多个类中使用相同的功能

> ID：10453760
> 
> 赞同：3
> 
> 时间：2012-05-04T17:53:10.290
> 
> 标签：java, function

我有一些我想在多个类中使用的功能，这样做的正确方法是什么？

我想创建一个类并将我的函数设置为静态......或者可能实现需要这些函数的这个类？

你怎么看 ？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:57:06.013

如果此方法不使用任何对象的任何实例变量，它可以（并且可能应该）确实是静态的，这使得它在任何地方都可用（假设它也是公共的）。

这种无状态的、全局可用的方法的好例子是类中的方法[`java.lang.Math`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:57:13.170

通常在静态*实用程序*类中实现独立于类实例的共享功能，这与 Java 实现对[`java.utils.Collections`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html).

如果功能取决于实例，则可以通过将实现放在基类（通常是抽象基类）中来共享功能，并在需要相关功能的两个类中继承它。

最后，可以在包私有实用程序类中实现共享功能，将公共方法添加到调用该包私有实用程序类的两个类以进行实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T17:57:10.377

这取决于函数的行为。在某些情况下，将函数放入单独的类并使其成为静态就足够了。但是如果您需要修改它的行为，您应该考虑使其成为非静态的，以便允许在后代类中覆盖它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T18:03:32.017

这通常使用包含静态方法的实用程序类来实现：

```
class MyCompanyUtils
{
    public static encloseInQuotes(String s)
    {
      /* code to wrap s in quotes */
    }

    public static removeTrailingSlash(String s)
    {
      /* code to remove trailing slash from a string */
    }
} 
```

# windows - 如何遍历字典

> ID：10453764
> 
> 赞同：0
> 
> 时间：2012-05-04T17:53:25.640
> 
> 标签：windows

我正在使用 VS2010 构建窗口表单应用程序。在我的登录表单上，我收集用户 ID
和密码，然后单击登录按钮，如果验证成功，则将
用户引导到主表单。
我想使用字典来存储从数据库读取的用户名和密码。
然后关闭连接。然后，我比较从文本框中输入的值与值：
字典中的 userd 和 passward。成功直接到主窗体
这里是我的代码。请帮助`

```
string connectionstring =
   "Data Source =localhost;Initial Catalog=HSM;" +
   "User Id=sysad;Password=mypassword";

   SqlConnection connection = new SqlConnection(connectionstring);
   SqlCommand selectcmd = new SqlCommand("Select * from users");
   SqlDataReader reader ;
   Dictionary<string,string> logintest = new Dictionary<string,string>
   try
   {
      connection.Open();
      reader = selectcmd.ExecuteReader();
      while (reader.Read())
      {                
         Mainform main1 = new Mainform();
         this.Hide();
         main1.Show();
      }

      reader.Close();
       ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:58:00.537

简单的

```
foreach (KeyValuePair<string, int> pair in logintest)
{
  Console.WriteLine("{0}, {1}", pair.Key, pair.Value);
} 
```

# python - 使用 Matplotlib 在绘图上定义网格的大小

> ID：10453770
> 
> 赞同：25
> 
> 时间：2012-05-04T17:53:43.893
> 
> 标签：python, matplotlib

我在 Python 中使用 Matplotlib 进行绘图。我想用网格创建绘图，这是绘图教程中[的一个示例](http://www.scipy.org/Plotting_Tutorial)。在我的绘图范围内，如果 y 轴从 0 到 14，并且如果我使用`pylab.grid(True)`它，那么它会创建一个大小为 2 的正方形的网格，但我希望大小为 1。我该如何强制它？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-04T18:00:40.473

[按照此处](http://matplotlib.sourceforge.net/api/axis_api.html)的建议，尝试使用`ax.grid(True, which='both')`将网格线定位在主要和次要刻度上。

编辑：或者只是手动设置您的刻度，如下所示：

```
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot([1,2,3,14],'ro-')

# set your ticks manually
ax.xaxis.set_ticks([1.,2.,3.,10.])
ax.grid(True)

plt.show() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T18:28:26.913

如果您想遵循您引用的示例：

```
>>> import numpy
>>> import pylab
>>> t = numpy.arange(0.0, 1.0+0.1, 0.01)
>>> s = numpy.cos(2*2*numpy.pi*t)
>>> pylab.plot(t,s)
>>> pylab.grid(True)
>>> pylab.xticks([i/10.0 for i in range(0,12)])
>>> pylab.show() 
```

# actionscript-3 - Dynamic s:View title

> ID：10453773
> 
> 赞同：0
> 
> 时间：2012-05-04T17:53:47.887
> 
> 标签：actionscript-3, apache-flex, flash-builder

This seems like it should be super easy, but I can't figure it out. How do you dynamically change the title of a page based on some variable?

By title, I mean the title of my view like this:

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="DynamicTitle" creationComplete="init(event)"> 
```

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:04:16.043

您正在寻找的是弹性数据绑定。

为了绑定到 MXML 中的变量，请尝试以下语法。

```
<s:View ... title="{stringVar}" ... >

[Bindable] //metadata tag makes the variable bindable
public var stringVar:String = "StartingTitle"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:04:02.263

在 ActionScript 中的某个地方执行此操作：

```
this.title = 'New Value' 
```

因此，假设您有一个名为 myTitleText 的 TextInput，如下所示：

每当标题更改时，都会有一个事件处理程序。在事件处理程序中，更改文本：

```
protected function onChange():void{
 this.title = myTitleText.text;
} 
```

# iphone - How to make small changes to a UITableView header but basically keep the design

> ID：10453775
> 
> 赞同：0
> 
> 时间：2012-05-04T17:53:57.357
> 
> 标签：iphone, objective-c, uitableview

I have a plain UITableView in my project with sectioned data. For each section I have a header for every letter so it looks like the contacts app on the iPhone. The only thing I want to change, however, is the color of the header background. This code doesn't work but this is what I want to achive:

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *headerView = [[[UITableView alloc] init] tableHeaderView];
    [headerView setBackgroundcolor:[UIColor redColor]];
    return headerView;
} 
```

I could design my headerView from scratch by initing a UIView and building it to look like the header does now, but then I need to write much more code and have to guess the properties since I don't know what the code for a regular header is and since I just want to change the background color I thought there might be an easier way.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T10:55:04.993

I just wanted to add an answer to this question myself if anyone else come across this issue and want to know what to do. The short answer is that you can't simple just change the color of the header, but, you can write some more code to mimic the gradient and shadows to make it look like the headerView. The exact code for doing this can be found in this other question: [How can I access the standard viewForHeaderInSection for a tableView?](https://stackoverflow.com/questions/7392754/how-can-i-access-the-standard-viewforheaderinsection-for-a-tableview)

# c# - 如何从 C# 代码设置 GUID 字段

> ID：10453781
> 
> 赞同：0
> 
> 时间：2012-05-04T17:54:04.653
> 
> 标签：c#, asp.net, ado.net, guid, sqldatasource

InsertParameters 中有一个参数。当我尝试设置它时，我收到一个错误::

> 不允许从数据类型 sql_variant 到 uniqueidentifier 的隐式转换。使用 CONVERT 函数运行此查询

这是我在 C# 中的代码：

```
String complexID = Guid.NewGuid().ToString();
SqlDataSource1.InsertParameters["PKComplexID"].DefaultValue = complexID; 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:58:52.420

您需要更改`SqlDbType`on `Inserting`：

```
protected void SqlDataSource1_Inserting(object sender, 
  SqlDataSourceCommandEventArgs e) { 
    SqlParameter insertedKey = 
      e.Command.Parameters["@PKComplexID"] as SqlParameter; 
    insertedKey.SqlDbType = SqlDbType.UniqueIdentifier; 
} 
```

**参考**

[http://forums.asp.net/t/1712791.aspx/1](http://forums.asp.net/t/1712791.aspx/1)：

> 对象的唯一标识符字段类型不正确。但不幸的是，我们在 VisualStudio 设计器中没有唯一标识符。所以它给你类型对象。你也不能让它成为唯一标识符，这会引发异常。因此，您必须在 dataSource_Inserting 事件中更改文件后面的此参数类型表单代码。确保它的插入事件。在那里您可以获取任何参数并将 uniqueidentifier 字段类型设置为 uniqueidentifier。

[GUID 和数据源控件](http://weblogs.asp.net/dwahlin/archive/2006/10/10/GUIDs-and-DataSource-Controls.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T18:04:49.893

我还没有尝试过，但我的第一反应是：

```
Guid complexID = Guid.NewGuid();
SqlDataSource1.InsertParameters["PKComplexID"].DefaultValue = complexID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:33:34.677

我只是将参数类型从对象更改为字符串。解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T05:55:13.940

试试这个

```
 string fileName = Path.GetFileName(FileUpload1.PostedFile.FileName);
Guid id=Guid.NewGuid();
FileUpload1.SaveAs(Server>MapPath("Your Path"+id+fileName )); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T18:05:09.797

您不应该转换为字符串。像这样修复您的代码：

```
Guid complexID = Guid.NewGuid(); 
```

# php - 可捕获的致命错误：SimpleImage 类的对象无法转换为字符串

> ID：10453784
> 
> 赞同：0
> 
> 时间：2012-05-04T17:54:08.373
> 
> 标签：php, image-resizing, fatal-error

我收到一个我从未见过的错误...

```
Catchable fatal error: Object of class SimpleImage could not be converted to string in /home/content/44/8713044/html/admin/classes/SimpleImage.php on line 10 
```

我正在使用这个名为 SimpleImage 的插件

[http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

我不知道为什么我会收到这个错误，这个插件的作用是它需要和图像，调整它的大小并将它上传到服务器，有没有人知道我为什么会收到这个错误以及如何修复它？

谢谢，J

这是发生错误的地方......

```
 function load($filename) {

      $image_info = getimagesize($filename);
      $this->image_type = $image_info[2];
      if( $this->image_type == IMAGETYPE_JPEG ) {

         $this->image = imagecreatefromjpeg($filename);
      } elseif( $this->image_type == IMAGETYPE_GIF ) {

         $this->image = imagecreatefromgif($filename);
      } elseif( $this->image_type == IMAGETYPE_PNG ) {

         $this->image = imagecreatefrompng($filename);
      }
   } 
```

# neural-network - 使用Yan Cheng，Cheok的手写数字识别？

> ID：10453787
> 
> 赞同：1
> 
> 时间：2012-05-04T17:54:20.337
> 
> 标签：neural-network, ocr, number-recognition

我打算将（Yan Cheng, Cheok 的手写数字识别）用于我正在进行的项目，我应该使用他们的数据库进行数字识别，但文件不在他们的网站上，我应该使用一个名为“ LRTBHVtrainingdata.txtI=96H=200LR=0.9M=0.1C=2000.snet”正如他们在教程中所说，但我在他们的网站 (http://yann.lecun.com/exdb/mnist/) 上发现的是四个文件，我不知道如何使用它们？那么关于在哪里获取他们的数据库或在哪里或使用它们的文件有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:22:10.813

您正在查看的文件是正确的文件。它们是以 20x20 框为中心的归一化灰度图像（0-白色，255-黑色）。该页面解释了文件的结构（只需向下滚动到底部）。

这是我不久前用 Java 编写的一些代码，它读取 MNIST 图像和标签文件：

```
import net.vivin.digit.DigitImage;    
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.nio.ByteBuffer;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

/**
 * Created by IntelliJ IDEA.
 * User: vivin
 * Date: 11/11/11
 * Time: 10:07 AM
 */
public class DigitImageLoadingService {

    private String labelFileName;
    private String imageFileName;

    /** the following constants are defined as per the values described at http://yann.lecun.com/exdb/mnist/ **/

    private static final int MAGIC_OFFSET = 0;
    private static final int OFFSET_SIZE = 4; //in bytes

    private static final int LABEL_MAGIC = 2049;
    private static final int IMAGE_MAGIC = 2051;

    private static final int NUMBER_ITEMS_OFFSET = 4;
    private static final int ITEMS_SIZE = 4;

    private static final int NUMBER_OF_ROWS_OFFSET = 8;
    private static final int ROWS_SIZE = 4;
    public static final int ROWS = 28;

    private static final int NUMBER_OF_COLUMNS_OFFSET = 12;
    private static final int COLUMNS_SIZE = 4;
    public static final int COLUMNS = 28;

    private static final int IMAGE_OFFSET = 16;
    private static final int IMAGE_SIZE = ROWS * COLUMNS;

    public DigitImageLoadingService(String labelFileName, String imageFileName) {
        this.labelFileName = labelFileName;
        this.imageFileName = imageFileName;
    }

    public List<DigitImage> loadDigitImages() throws IOException {
        List<DigitImage> images = new ArrayList<DigitImage>();

        ByteArrayOutputStream labelBuffer = new ByteArrayOutputStream();
        ByteArrayOutputStream imageBuffer = new ByteArrayOutputStream();

        InputStream labelInputStream = this.getClass().getResourceAsStream(labelFileName);
        InputStream imageInputStream = this.getClass().getResourceAsStream(imageFileName);

        int read;
        byte[] buffer = new byte[16384];

        while((read = labelInputStream.read(buffer, 0, buffer.length)) != -1) {
           labelBuffer.write(buffer, 0, read);
        }

        labelBuffer.flush();

        while((read = imageInputStream.read(buffer, 0, buffer.length)) != -1) {
            imageBuffer.write(buffer, 0, read);
        }

        imageBuffer.flush();

        byte[] labelBytes = labelBuffer.toByteArray();
        byte[] imageBytes = imageBuffer.toByteArray();

        byte[] labelMagic = Arrays.copyOfRange(labelBytes, 0, OFFSET_SIZE);
        byte[] imageMagic = Arrays.copyOfRange(imageBytes, 0, OFFSET_SIZE);

        if(ByteBuffer.wrap(labelMagic).getInt() != LABEL_MAGIC)  {
            throw new IOException("Bad magic number in label file!");
        }

        if(ByteBuffer.wrap(imageMagic).getInt() != IMAGE_MAGIC) {
            throw new IOException("Bad magic number in image file!");
        }

        int numberOfLabels = ByteBuffer.wrap(Arrays.copyOfRange(labelBytes, NUMBER_ITEMS_OFFSET, NUMBER_ITEMS_OFFSET + ITEMS_SIZE)).getInt();
        int numberOfImages = ByteBuffer.wrap(Arrays.copyOfRange(imageBytes, NUMBER_ITEMS_OFFSET, NUMBER_ITEMS_OFFSET + ITEMS_SIZE)).getInt();

        if(numberOfImages != numberOfLabels) {
            throw new IOException("The number of labels and images do not match!");
        }

        int numRows = ByteBuffer.wrap(Arrays.copyOfRange(imageBytes, NUMBER_OF_ROWS_OFFSET, NUMBER_OF_ROWS_OFFSET + ROWS_SIZE)).getInt();
        int numCols = ByteBuffer.wrap(Arrays.copyOfRange(imageBytes, NUMBER_OF_COLUMNS_OFFSET, NUMBER_OF_COLUMNS_OFFSET + COLUMNS_SIZE)).getInt();

        if(numRows != ROWS && numRows != COLUMNS) {
            throw new IOException("Bad image. Rows and columns do not equal " + ROWS + "x" + COLUMNS);
        }

        for(int i = 0; i < numberOfLabels; i++) {
            int label = labelBytes[OFFSET_SIZE + ITEMS_SIZE + i];
            byte[] imageData = Arrays.copyOfRange(imageBytes, (i * IMAGE_SIZE) + IMAGE_OFFSET, (i * IMAGE_SIZE) + IMAGE_OFFSET + IMAGE_SIZE);

            images.add(new DigitImage(label, imageData));
        }

        return images;
    }
} 
```

# r - R中的MS残差函数

> ID：10453790
> 
> 赞同：-1
> 
> 时间：2012-05-04T17:54:22.303
> 
> 标签：r, statistics, stat

是否有预定义的函数可以在 R 编程语言中查找均方残差（MS Residual）？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:08:11.790

假设您正在谈论回归类型模型......我不知道一个功能，但如果您愿意使用两个，您可以创建一个新的（或只使用两个）。

```
msResid <- function(model) deviance(model)/df.residual(model) 
```

# php - PHP中通过变量将十进制度数转换为小时，分钟，秒

> ID：10453791
> 
> 赞同：0
> 
> 时间：2012-05-04T17:54:24.043
> 
> 标签：php, javascript, google-maps

我有一个 php/javascript 代码，它从 Iphone/网站应用程序（instamapper）获取 GPS 坐标并将其添加到我的网站页面。（到目前为止使用其他人的代码示例片段）我想将弹出窗口从显示小数坐标更改为正确的纬度/经度，但不能完全解决。你们可以提供的任何帮助或指示都会很棒。我的代码如下。

在这里找到[http://www.morvargh-sailing.co.uk/tracker/test2.php](http://www.morvargh-sailing.co.uk/tracker/test2.php)

```
<?php

$key = "16194603621692259587";

$fichier = "http://www.instamapper.com/api?action=getPositions&key=".$key."&num=1";
$fp=@fopen($fichier,"r");
$texte = "";

if($fp)
{
while(!feof($fp))
{
$texte .= fgets($fp,1024);
}

}
$donnees = explode(',',$texte);

/*

0 : first line plus device number
1 :  Device label
2\. Position timestamp in UTC (number of seconds since January 1, 1970)
3\. Latitude
4\. Longitude
5\. Altitude in meters
6\. Speed in meters / second
7\. Heading in degrees 

*/
date_default_timezone_set('GMT');
$name = $donnees[1];
$date = date('H:i:s d-m-Y e', $donnees[2]);
$lat = $donnees[3];
$longitude = $donnees[4];
$altitude = $donnees[5];
$speed = $donnees[6];
$heading = $donnees[7];

echo('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
    <head> 
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
        <title>Where am I</title> 
        <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAA_GqVjhr7wgurGjr_zR-wJxSbxjqNwl0XTkuBKGwUYonF3JCDWBRyXrxgjwLgrUjcet0gLjyGZOGwCA" type="text/javascript"></script>      
        <style type="text/css"> 
            v\:* {behavior:url(#default#VML);}
            html, body {width: 100%; height: 350px}
            body, form, p {margin: 0; padding: 0; text-align:center; font-family:"lucida grande","trebuchet ms",sans-serif; font-size:12px;}
            a:link, a:visited, a:hover {color: #369; background:transparent; text-decoration: none;}
            #instamapper {position:absolute; left:80px; bottom:10px;}
            #instamapper p {text-align:right;}
        </style> 
    </head> 
    <body onLoad="showAddress(\''.$lat.', '.$longitude.'\'); return false" onunload="GUnload()"> 

        <div id="map" style="width: 100%; height: 100%;"></div> 

        <div id="instamapper"> 
            <p> 
                GPS tracking powered by <a href="http://www.instamapper.com/">InstaMapper</a> 
            <p> 
        <div> 

        <script type="text/javascript"> 
        //<![CDATA[ 
            var momento = "'.$date.'"; 
            var altitud = "'.$altitude.'" + "m"; 
            var velocidad = "'.$speed.'" + " Km/h";
            var longitude = "'.$longitude.'";
            var latitude = "'.$lat.'";

            if (GBrowserIsCompatible()) { 
                var map = new GMap2(document.getElementById("map")); 
                var geocoder = new GClientGeocoder(); 

                map.addControl(new GLargeMapControl()); 
                map.addControl(new GMapTypeControl()); 

                function showAddress(address) { 
                    geocoder.getLatLng( 
                        address, 
                        function(point) { 
                            if (!point) { 
                                alert("\"" + address + "\" no encontrado"); 
                            } else { 
                                map.setCenter(point, 12); 
                                var marker = new GMarker(point); 
                                var info = "<b>Last known location:</b><p>Time: " + momento + "<br>Latitude: " + latitude + "<br>Longitude: " + longitude + "<br>Heading: " + '.$heading.' +"º";
                                  GEvent.addListener(marker, "click", function() {
                                    marker.openInfoWindowHtml(info);
                                  });                               
                                map.addOverlay(marker);
                                marker.openInfoWindowHtml(info);
                            }
                        }
                    );
                }               
            }
        //]]>
        </script> 
    </body> 
</html>');

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:01:47.180

试试这个功能：http: [//jsfiddle.net/eAUJr/1/](http://jsfiddle.net/eAUJr/1/)

```
function format(newLat, newLng) {
    if (newLat < 0) {
      newLat = myround(Math.abs(newLat)) + "S";
    } else {
      newLat = myround(newLat) + "N";
    }

    if (newLng < 0) {
      newLng = myround(Math.abs(newLng)) + "W";
    } else {
      newLng = myround(newLng) + "E";
    }

    return[newLat, newLng];
  }

  function myround(val) {
    deg = parseInt(val);
    val -= deg;
    val *= 60;
    min = parseInt(val);
    val -= min;
    val *= 60;
    sec = parseInt(val);
    remainder = val - sec;
    if(remainder >= 0.5) {
      sec += 1;
    }

    return deg + "°" + min + "'" + sec + '"';

  }

document.write(format(-0.000277778, 20.292))
// output: 0°0'1"S,20°17'31"E 
```

# android - EditText 用户输入到命令行（ echo "user input here" 等）

> ID：10453792
> 
> 赞同：0
> 
> 时间：2012-05-04T17:54:28.370
> 
> 标签：android, android-edittext, int, command

我需要从用户那里获取整数输入（来自 EditText 数字）以使其进入命令行，但是如果我将 cmd 行更改为（“echo 255 > ... ") 它可以工作，但是如果我尝试放置用户输入而不是 255 它不会。

这是代码。

```
public class main extends Activity  {

EditText value;
int uin;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    value = (EditText) findViewById(R.id.editText2);

    try {
        Process process = Runtime.getRuntime().exec("su");
    DataOutputStream os = new  DataOutputStream(process.getOutputStream());
     {
       os.writeBytes("mount -o rw,remount -t yaffs2  /dev/block/mtdblock03 /system\n" +
               "exit \n");
       os.flush();
    process.waitFor();
    }

    } catch (IOException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    //Button OK

    Button bOK = (Button) findViewById(R.id.bOK);
    bOK.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            uin = Integer.parseInt(value.getText().toString());

            Process process = null;
            try {
                process = Runtime.getRuntime().exec("su");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            DataOutputStream os = new 

      DataOutputStream(process.getOutputStream());
            try {
                os.writeBytes("chmod 644 sys/class/leds/button-backlight/brightness\n");
                os.writeBytes("echo" +uin+ "> sys/class/leds/button-backlight/brightness\n");
                os.writeBytes("chmod 444 sys/class/leds/button-backlight/brightness\n");
                os.writeBytes("exit\n");
                os.flush();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:06:23.853

我的第一个猜测是你的空间不足。

如果可行`echo 255 > ...`，那就太好了，但是使用 将`+`字符串连接在一起不会添加隐含空格，因此`echo255> sys/class...`如果 uin = 255，您的代码当前将生成。换句话说，请尝试：

```
os.writeBytes("echo " +uin+ " > sys/class/leds/button-backlight/brightness\n"); 
```

高温高压

# php - 运行 SQL 查询并按另一个表中的行数排序

> ID：10453794
> 
> 赞同：0
> 
> 时间：2012-05-04T17:54:35.603
> 
> 标签：php, sql, join

基本上，

我有两张表，一张有一些帖子，另一个用于评论，我想做的是创建一个包含**最受欢迎帖子**的页面，我将根据评论的数量呈现热门帖子。

这是我到目前为止的查询

```
mysql_query("SELECT * FROM posts JOIN comments ON posts.id = comments.content_id ORDER BY count('comments.id') LIMIT 10"); 
```

但是 count() 搞砸了，有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:00:25.063

如果你有一个聚合函数，比如`COUNT(*)`，你应该包含一个`GROUP BY`子句：

此外，由于您想要返回评论最多的帖子，因此您需要按降序（从高到低）对数量进行排序。

```
SELECT 
    posts.id, 
    COUNT(comments.content_id) as post_comments 
FROM 
    posts 
    LEFT JOIN comments 
        ON posts.id = comments.content_id 
GROUP BY posts.id
ORDER BY post_comments DESC
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:56:50.990

删除comments.id 周围的引号:) 我还添加了我认为缺少的组。

```
mysql_query("SELECT * FROM posts JOIN comments ON posts.id = comments.content_id GROUP BY posts.id ORDER BY count(comments.id) LIMIT 10"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:59:36.667

从 count 语句中删除引号并添加一个组：

```
SELECT * FROM posts 
JOIN comments ON posts.id = comments.content_id 
GROUP BY comments.content_id
ORDER BY count(comments.content_id) 
LIMIT 10 
```

# actionscript-3 - 有没有显示 ActionScript 类层次结构的工具？

> ID：10453797
> 
> 赞同：0
> 
> 时间：2012-05-04T17:54:59.057
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flash-builder

是否有任何工具可以为 ActionScript3 项目生成类层次结构图（如 UML）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:02:53.110

我没有使用这个应用程序的经验，但是一点 google-fu 发现**[了 UML4AS](http://www.uml4as.com/flower-platform/home-uml4as.html)**，它声称它会生成你正在寻找的类图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T18:37:43.810

我喜欢 Crocus Modeler ( [http://crocusmodeller.com/](http://crocusmodeller.com/) )。它仍然不是免费的（49 美元），但确实支持往返编码。我使用它从现有代码生成文档，或从图表生成存根。它特定于 MXML/AS3，因此所有功能都针对 flex 中的编码。

# python - Python：与 *nix 中正在运行的进程的 STDIN/OUT 交互

> ID：10453799
> 
> 赞同：4
> 
> 时间：2012-05-04T17:55:15.687
> 
> 标签：python, unix, stdout, stdin

有没有办法将控制台的 STDIN/STDOUT 附加到已经运行的进程？

**用例：**

我有一个 python 脚本，它使用`popen`.

比方说`foo.py`runs `popen`to run `python bar.py`。

然后`bar.py`阻塞输入。我可以得到`python bar.py`. 有什么方法可以将新控制台附加到正在运行的 python 实例以便能够与之交互工作？这特别有用，因为我想`pdb`在`bar.py`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T19:33:39.110

没门。**但是**你可以修改你开始的方式`bar.py`，以便准备接管标准输入和标准输出。

一个简单的方法是创建命名管道并在`Popen`调用中将它们作为标准输入/标准输出提供。然后，您可以从您的 shell ( `exec <pipe1 >pipe2`) 连接到这些管道并进行交互。这样做的缺点是您必须连接到管道才能查看进程在做什么。虽然您可以通过`tee`在日志文件上使用来解决这个问题，但根据终端能力需求，`bar.py`这种交互可能不是最大的乐趣。

更好的方法是将终端多路复用器（如[GNU screen](http://www.gnu.org/software/screen/)或[tmux](http://tmux.sourceforge.net/) ）合并到您的进程树中。这些工具可以创建运行应用程序的虚拟终端。然后，您可以随时将任何其他终端附加和分离到此终端缓冲区。在您的特定情况下，`foo.py`将运行`screen`or `tmux`，它将`python bar.py`在完整的（VT100）终端仿真中运行。也许这会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:29:43.473

您不能重定向`stdin`或`stdout`用于正在运行的进程。但是，您可以向调用者添加代码——从's`foo.py`读取并将其发送到's ，反之亦然。`foo.py``stdin``bar.py``stdout`

在这个模型中，`foo.py`将`bar.py`'s`stdin`和连接`stdout`到管道，并负责在这些管道和实际`stdin`/之间穿梭数据`stdout`。

# android - 无法在设备“037c6206441f83d7”上安装 MyApp.apk：不是目录

> ID：10453802
> 
> 赞同：1
> 
> 时间：2012-05-04T17:55:32.267
> 
> 标签：android, eclipse, adb

我正在尝试使用 Eclipse 在我的带有 ICS（Asus Transformer TF101 - rooted）的设备上运行/调试我的应用程序。但我收到以下错误：

```
 Uploading MyApp.apk onto device '037c6206441f83d7'
   Failed to install MyApp.apk on device '037c6206441f83d7': Not a directory
   com.android.ddmlib.SyncException: Not a directory
   Launch canceled! 
```

我尝试运行/调试其他应用程序，也包括示例应用程序，但仍然出现相同的错误，但一切都在模拟器上运行，当然我打开了 USB 调试。在更新之前，我能够正常运行一切，是否有可能我在刷 rom/root 时搞砸了一些东西？但另一方面，我认为我的设备工作正常......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:02:29.843

我已经解决了这个问题，看起来我在刷新的 rom/root 时真的搞砸了。目录有一些问题`/data/local/tmp`，我已经习惯了`ClockworkMod Recovery`，`wipe /data/ (factory reset)`现在它完美无缺。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:34:29.623

只需使用具有 root 权限的文件资源管理器转到此文件夹，删除文件 tmp 并创建一个具有相同名称的文件夹。此外，您可以使用 adb shell 来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-09T13:15:04.640

我只是`adb shell`在linux上运行然后运行`rm -rf /data/local/tmp/MY_APK_DIR`，问题就解决了。

# jquery - 使用 jQuery 增加/减少许多类似文本输入之一的值

> ID：10453803
> 
> 赞同：1
> 
> 时间：2012-05-04T17:55:38.007
> 
> 标签：jquery, html, function, textinput

休耕表有许多相同的文本输入...

```
<table>
  <tr>
    <td>
      <a href="#" id="plus"><img src="plus.png" width="12" height="12" /></a>
      <input type="text" value="0" />
      <a href="#" id="minus"><img src="minus.png" width="12" height="12" /></a>
    </td>
    .
    .

    <td>
      <a href="#" id="plus"><img src="plus.png" width="12" height="12" /></a>
      <input type="text" value="0" />
      <a href="#" id="minus"><img src="minus.png" width="12" height="12" /></a>
    </td>
  </tr>
</table> 
```

并且闲置的jQuery脚本应该增加/减少其壁橱文本输入的值......

```
 $("#plus").click(function(){
   var text = $(this).next(":text");
   text.val(parseInt(text.val(), 10) + 1);
 });

$("#minus").click(function(){
   var text = $(this).prev(":text");
   aux.val(parseInt(aux.val(), 10) - 1);
 }); 
```

问题是脚本只能在表格的第一对链接上正常工作，将其最接近的文本输入的值递增和递减一个，其余的链接对不会改变其最近的值文本输入，更糟糕的是，`home/jthernandez/Desktop/test.html#`当点击链接时，链接会传播到 url。

我不太确定这里发生了什么，但想法是每对 +，- 链接分别更改其 next()、prev() 文本输入的值。任何建议都会很棒。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:59:19.253

第一; 任何 HTML 元素都不应重复另一个元素的 ID。

其次，因为事件只针对一组特定的元素，特别是具有该 ID 的第一个元素。我会考虑采用不同的策略：

```
<input type="text" value="0" id="text1">

<a href="#" class="minusLink" data-target="text1">Minus</a> 
```

然后你可以像这样定位你的脚本：

```
$('.minusLink').click(function()
{
   var target = $('#' + $(this).data('target'));

   target.val(parseInt(target.val(), 10) - 1);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T18:08:18.203

你很亲密。正如其他人所提到的，您不能多次拥有相同的 ID。ID 是唯一的，用于*标识*单个元素。JavaScript 只会查找直到找到一个，然后停止。类用于对公共元素进行分组。使用一个类，您的代码应该可以正常工作（减去您的 javascript 中的错字）：

HTML：

```
<td>
    <a href="#" class="plus"><img src="plus.png" width="12" height="12" /></a>
    <input type="text" value="0" />
    <a href="#" class="minus"><img src="minus.png" width="12" height="12" /></a>
</td> 
```

JS（你在减号有错字，创建`text`，但使用`aux`）：

```
$(".plus").click(function(){
    var text = $(this).next(":text");
    text.val(parseInt(text.val(), 10) + 1);
});

$(".minus").click(function(){
    var text = $(this).prev(":text");
    text.val(parseInt(text.val(), 10) - 1);
}); 
```

演示：http: [//jsfiddle.net/jtbowden/bfM9Z/](http://jsfiddle.net/jtbowden/bfM9Z/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T17:59:35.980

您应该引用类而不是 id，因为您看到按 id 选择只会检索第一个匹配项

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T18:03:18.647

元素上的 ID 只能出现一次。相反，将 ID 更改为类。

# windows - 在 Windows 批处理文件中的 FOR 循环中，计数器不随 IF 语句递增

> ID：10453804
> 
> 赞同：3
> 
> 时间：2012-05-04T17:55:54.860
> 
> 标签：windows, scripting, batch-file

我正在创建的批处理文件中有一个简单的 FOR 循环，但它的工作方式与我期望的不太一样。FOR 循环遍历文本文件的行，在每次迭代中，我使用 IF 语句对当前行进行快速比较，如果结果为真，则做一些工作。这是代码：

```
SETLOCAL ENABLEDELAYEDEXPANSION
set /a sitecounts=1
set /a input=34
FOR /F "tokens=1,2 delims=^/" %%G IN (file.txt) DO (
IF %sitecounts% == %input% (set /a selectedsitepath=%logfilepath%W3SVC%%H)
set /a sitecounts=!sitecounts!+1
echo !sitecounts!
) 
```

我遇到了一个奇怪的问题，**sitecounts**变量（我的计数器）实际上随着每个循环正确递增（我通过用最后一条语句回显计数来证明这一点）——但在下一次迭代时**%sitecounts%**仍然显示它的值为“1”，这是初始值。

如果我将代码更改为：

```
IF !sitecounts! == ... 
```

...然后 IF 语句似乎将该值视为纯文本！我已将 ENABLEDELAYEDEXPANSION 设置为处理循环内的变量，但不确定下一步该做什么。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:06:42.983

这次我实际测试了一下......

换行

```
IF %sitecounts% == %input% (set /a selectedsitepath=%logfilepath%W3SVC%%H) 
```

进入

```
IF !sitecounts! == %input% (set selectedsitepath=%logfilepath%W3SVC%%H) 
```

*   `%sitecounts%`需要`!sitecounts!`为了被评估
*   `set /a selectedsitepath=%logfilepath%W3SVC%%H`不起作用，因为它不是数字表达式：

    > /A 开关指定等号右侧的字符串是计算的数值表达式。

    只需省略开关（`/p` 也不行，这是为了提示）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:39:23.703

可能错误在这一行

```
IF %sitecounts% == %input% (set /a selectedsitepath=%logfilepath%W3SVC%%H) 
```

您正在设置**字符串**而不是**数字表达式**（set /a），然后更改为

```
IF !sitecounts! == %input% (set   selectedsitepath=%logfilepath%W3SVC%%H)
   ^          ^                 ^ 
```

# javascript - 在 Microsoft Dynamics CRM 2011 中查找两个日期之间的工作日数

> ID：10453810
> 
> 赞同：1
> 
> 时间：2012-05-04T17:56:10.333
> 
> 标签：javascript, date, dynamics-crm, dynamics-crm-2011

所有，我正在尝试使用 javascript 根据开始和结束字段中的日期将整数设置为字段。我什至不确定使用 CRM javascript 查找星期几的正确语法是什么。到目前为止，这是我的代码。

```
function netbdays_change() {

    var startday = Xrm.Page.getAttribute("new_quotestart").getValue();
    var endday = Xrm.Page.getAttribute("new_quoteend").getValue();

    cycletime = endday - startday;

    Xrm.Page.getAttribute("new_setcycletime").setValue(cycletime);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:32:49.393

试试这个：

```
function netbdays_change() {

    var startday = Xrm.Page.getAttribute("new_quotestart").getValue().getDay();
    var endday = Xrm.Page.getAttribute("new_quoteend").getValue().getDay();

    cycletime = endday - startday;

    Xrm.Page.getAttribute("new_setcycletime").setValue(cycletime);

} 
```

getDay() 返回一个基于 0 的星期几的表示。 [http://www.w3schools.com/jsref/jsref_getday.asp](http://www.w3schools.com/jsref/jsref_getday.asp)

如果你想计算两个日期之间的天数，试试这个：

```
function netbdays_change() {

    var startday = Xrm.Page.getAttribute("new_quotestart").getValue();
    var endday = Xrm.Page.getAttribute("new_quoteend").getValue();

    cycletime = Math.abs(endday - startday)

    Xrm.Page.getAttribute("new_setcycletime").setValue(cycletime / 86400000);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:11:25.423

我终于想出了解决方案：随意使用每个人。:)

```
function netbdays_change() {
    var startdays = Xrm.Page.getAttribute("new_dateqaassigned").getValue();
    var enddays = Xrm.Page.getAttribute("new_quotecomplete").getValue();

    var cycletime = Math.abs(enddays - startdays) / 86400000; // This first part now works

    startday = Xrm.Page.getAttribute("new_dateqaassigned").getValue().getDay();
    endday = Xrm.Page.getAttribute("new_quotecomplete").getValue().getDay();

    var x = startday; // day of the week
    var y = 0; // number of business days for output
    var z = 0; // augment up to the total number of days

    while (x <= 7 && z <= cycletime) {
        if (x > 0 && x < 6) {
            y++;
        }
        x++;
        z++;
    }
    x = 0;
    while (x <= 7 && z <= cycletime) {
        if (x > 0 && x < 6) {
        y++;
    }
        x++;
        z++;
        if (x == 6) {
            x = 0;
        }
    }
    Xrm.Page.getAttribute("new_quotetotalcycletime").setValue(y);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T05:41:57.023

这是我的代码：

```
function GetBusinessDays(startDate, endDate)
{
    if (startDate != null && endDate != null)
    {
        var cycletime = (Math.abs(endDate - startDate) / 86400000) + 1;
        var startday = startDate.getDay();
        var x = startday; // day of the week
        var y = 0; // number of business days for output
        var z = 0; // augment up to the total number of days

        while (z < cycletime) {
            if (x > 0 && x < 6) 
            {
                y++;
            }
            x++;
            z++;
            if (x > 6)
            {
                x = 0;
            }
        }

        return y;
    }
    return null;
} 
```

# c++ - 设置 playbook 原生应用程序方向

> ID：10453813
> 
> 赞同：0
> 
> 时间：2012-05-04T17:56:39.190
> 
> 标签：c++, screen, orientation, native, blackberry-playbook

我一直在寻找很长一段时间，我似乎无法弄清楚如何使用本机 SDK 为 Playbook/BB10 设置应用程序的首选方向。

我的应用程序针对 playbook 和 BB10 手机。两个设备的应用程序都需要处于横向状态。我正在使用本机 SDK 版本 10.0.4。

我查看了 bps/orientation.h，它似乎只有检索这些信息的功能，而且屏幕内有很多区域似乎与方向有关，但我不确定。

还有其他人遇到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:13:03.513

看看这是否有帮助：

[剧本方向](http://supportforums.blackberry.com/t5/Adobe-AIR-Development/Playbook-Orientation/td-p/714531)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:16:51.263

方向由加速度计和操作系统“锁定方向”设置确定。

尽管建议您这样做，但您的应用程序不需要自行旋转以匹配方向。如果您不这样做，系统边框滑动将与您的应用程序使用的方向不匹配，可能会导致用户感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:15:13.603

我不确定您是否仍在寻找此信息，但要指定应用程序的初始方向，请在应用程序描述符文件（也称为**bar-description.xml**文件）中使用 initialWindow 标记。以下代码显示了要添加哪些标签以使您的应用程序的方向最初为横向 (aspectRatio)，并且不允许用户更改方向 (autoOrients)

```
<initialWindow>
    <aspectRatio>landscape</aspectRatio>
    <autoOrients>false</autoOrients>
</initialWindow> 
```

在官方黑莓网站上有更多关于 autoOrients 标签的信息：[https ://developer.blackberry.com/native/documentation/com.qnx.doc.native_sdk.devguide/com.qnx.doc.native_sdk.devguide/topic/ r_barfile_dtd_ref_autoorients.html](https://developer.blackberry.com/native/documentation/com.qnx.doc.native_sdk.devguide/com.qnx.doc.native_sdk.devguide/topic/r_barfile_dtd_ref_autoorients.html)

完整的 DTD 可以在这里找到：[developer.blackbery.come/native](https://developer.blackberry.com/native/documentation/com.qnx.doc.native_sdk.devguide/com.qnx.doc.native_sdk.devguide/topic/r_blackberry_tablet_dtd_intro.html)

# php - 从php中的日期格式中删除日期

> ID：10453818
> 
> 赞同：1
> 
> 时间：2012-05-04T17:56:54.620
> 
> 标签：php

有人可以帮我吗，我需要 PHP 中的函数或方法，以从给定日期排除日期，无论其格式如何。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T17:58:06.637

尝试这个

```
$newdate = date("m-Y",strtotime($date)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T08:11:21.633

我也遇到了这个问题，并进行了预匹配以检查 2 种带有年份符号 yyyy 的日期格式。不是我喜欢的解决方案，但它对我有用。缺点是您必须定义所有日期格式，这取决于 yyyy 表示法。

```
 // check form to be yyyy-mm-dd
    if (preg_match('/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/D', $date)){
        $date = date("Y-m", $date);
    }
    // check form to be mm-dd-yyyy
    elseif (preg_match('/^[0-9]{2}-[0-9]{2}-[0-9]{4}$/D', $date)){
        $date = date("m-Y", $date);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-30T11:11:17.710

我正在为遇到相同问题的人回答这个问题

```
if (!function_exists('remove_days_in_date')) {
    /**
     * This function allows you to delete some number of days in a date
     * @param \DateTime $date The date in which to delete the days
     * @param int $n_day The number of days to delete
     * @return string
     */
    function remove_days_in_date(\DateTime $date, int $n_day) {

        date_sub($date,date_interval_create_from_date_string("$n_day days"));
        date_format($date,"Y-m-d h:i:s");

        return date_format($date,"Y-m-d h:i:s");
    }
}
echo remove_days_in_date(new \DateTime, 12); 
```

# serial-port - RS232 引脚状态

> ID：10453819
> 
> 赞同：0
> 
> 时间：2012-05-04T17:56:56.217
> 
> 标签：serial-port, serial-communication

我有 RTS 和 DTR（串行 COM 端口的 MCR 寄存器）的 set()、reset() 例程和 DCD、RI、DSR、CTS（串行 COM 端口的 MSR 寄存器）的 get() 例程。

我们可以像 RTS 和 DTR 那样通过写入这些寄存器来设置和重置 DCD、RI、DSR 和 CTS 的引脚吗？

另外，我们能否像在 MSR 中一样获得 RTS 和 DTR 的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:33:19.623

这些信号是*输入*信号。设备控制他们，而不是你。

DTR 和 RTS 不是问题，它们是*输出*信号。

# security - 在 AppEngine 上保护 GWT 应用程序

> ID：10453822
> 
> 赞同：0
> 
> 时间：2012-05-04T17:57:09.880
> 
> 标签：security, google-app-engine, gwt

我在 AppEngine 上部署了 GWT 应用程序。我想限制对应用程序的访问仅限于管理员。

我想使用 web.xml 中的内置安全约束设置，但我不知道如何让我的应用在 /myapp/admin url 而不是 /myapp 中响应我正在使用 RequestFactory 与服务器通信，我希望 /gwtRequest 受到相同的约束。

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:38:29.557

我不知道我是否正确理解了你的问题。

如果您只想使用管理员访问，您可以配置您的应用程序，如下所示：

```
<security-constraint>
    <web-resource-collection>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint>

<security-constraint>
    <web-resource-collection>
        <url-pattern>/loginpage</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
</security-constraint> 
```

现在您对每个页面只有管理员访问权限，但您仍然需要对登录页面具有公共访问权限。（您必须将“loginpage”替换为您登录页面的 url）

如果您只想在管理员权限下设置 gwtRequest，请按如下方式设置：

```
<security-constraint>
    <web-resource-collection>
        <url-pattern>/gwtRequest/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint> 
```

对不起，我不确定它是 /gwtRequest/*还是 /gwtRequest*

# django - Django + uWSGI 通过 Ubuntu 11.10 上的 NGINX

> ID：10453828
> 
> 赞同：23
> 
> 时间：2012-05-04T17:57:40.833
> 
> 标签：django, nginx, ubuntu-11.10, uwsgi

我正在尝试部署一个 django 项目。我尝试了很多教程，但没有运气。我使用新的干净的 Ubuntu 11.10。我表演过

```
apt-get install nginx
apt-get install uwsgi
service nginx start 
```

我已经创建了文件夹`/deploy/project1`并放在那里`manage.py`和其他文件。

我的当前`/deploy/project1/project1/wsgi.py`包含：

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "project1.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

那么，你能告诉我如何`domain.com`正确部署我的 django 应用程序吗？

我还通过 pip 和 easy_install 安装了 Django

我应该添加什么`/etc/nginx/sites-enabled/default`。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-09T23:59:00.283

假设您已经安装了所有要求并且您正在使用 aptitude 包，那么您不需要 wsgi.py。所有配置都在 uwsgi ini/xml/yaml 文件中。（采用您喜欢的格式）。

这是`example.com`nginx 文件的最小示例（/etc/nginx/sites-available/examplecom for ubuntu 11.10）

```
server {
    listen      80;
    server_name example.com;
    access_log  /var/log/nginx/projectname.log;
    location /media {
        alias /vagrant/test/projectname/media/;
    }
    location /static {
        alias /vagrant/test/projectname/static/;
    }
    location / {
        uwsgi_pass unix:///run/uwsgi/projectname/socket;
        include uwsgi_params;
    }
} 
```

创建指向 /etc/nginx/sites-enabled 的符号链接

```
sudo ln -s /etc/nginx/sites-available/examplecom /etc/nginx/sites-enabled/examplecom 
```

或者

```
sudo /usr/sbin/nxensite examplecom 
```

你已经完成了 NGINX。

转到`/etc/uwsgi/apps-available`并创建您的 ini 文件

```
sudo vim /etc/uwsgi/apps-available/projectname.ini

[uwsgi]
virtualenv=/home/vagrant/.virtualenvs/projectenv
thread=3
master=1
env = DJANGO_SETTINGS_MODULE=projectname.settings
module = django.core.handlers.wsgi:WSGIHandler()
chdir = /path/to/my/django/project
socket = /run/uwsgi/projectname/socket
logto = /var/log/uwsgi/projectname.log 
```

将您的 ini 指向 /etc/uwsgi/apps-enabled/projectname.ini

```
sudo ln -s /etc/uwsgi/apps-available/projectname.ini /etc/uwsgi/apps-enabled/projectname.ini 
```

有关详细信息，请参阅系统上的任何这些文件：

```
/etc/uwsgi/apps-available/README
/etc/uwsgi/apps-enabled/README
/usr/share/doc/uwsgi/README.Debian.gz
/etc/default/uwsgi 
```

你完成了。您现在可以重新启动 nginx 和 uwsgi

```
sudo service nginx restart
sudo service uwsgi restart 
```

干杯!

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-27T11:24:55.673

不要忘记 Debian、Ubuntu 及其衍生产品的`uwsgi`软件包不需要安装其 Python 插件——`uwsgi-plugin-python`因为 uWSGI 不一定只使用 Python（有 Lua、Erlang 和其他语言的插件）。但是，Django 需要 Python 插件。安装它：

```
sudo apt install uwsgi-plugin-python 
```

`plugins = python`与 PIP 的安装不同，您应该通过添加一行（如果您使用 Python）明确提及应用程序配置中使用的 uwsgi 插件，如下所示：

```
[uwsgi]
plugins = python
uwsgi-socket = /var/sockets/django.sock
chmod-socket = 660
chdir = /home/v/django
module = project.wsgi 
```

除非您这样做，否则将没有可用的 Python 特定选项。而 Debian 的/Ubuntu 的 uWSGI 将对此保持沉默！

# xml - 是否有任何工具可以将 matroska (mkv) 转换为文本文件？

> ID：10453832
> 
> 赞同：5
> 
> 时间：2012-05-04T17:57:59.320
> 
> 标签：xml, text, converter, matroska

例如，能够将 mkv 文件转储到某些文本（如 in `mkvinfo -v`）、编辑它并重新构建回来，将二进制数据保留为十六进制转储，这将很有用。

就像是：

```
$ mkv2xml < test.mkv > test.xml
$ head test.xml
<EBML>
    <EBMLVersion>1</EBMLVersion>
    <MaxIdLen>4</<MaxIdLen>
    <MaxSizeLen>8</MaxSizeLen>
    <DocType>matroska</DocType>
    <DocTypeVersion>2</DocTypeVersion>
    <DocTypeReadVersion>2</DocTypeReadVersion>
    <Segment>
        <Tracks>
        <Track>
            <TrackNumber>1</TrackNumber>
            <CodecID>V_MJPEG</CodecID>
            <Video><PixelWidth>320</PixelWidth><PixelHeight>240</PixelHeight></Video>
        </Track>
        </Tracks>
        <Cluster>
            <Timecode>5.023</TimeCode>
            <SimpleBlock track="1" time="5.045">
                ffd8fffe001a80......
$ xml2mkv < test.xml | mplayer -cache 100 - 
```

这对于简化编写 [调试] 工具处理视频很有用，而无需真正弄乱复用/解复用细节，只需查看输出即可。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:21:13.250

在 Python 中实现自己：[https ://github.com/vi/mkvparse](https://github.com/vi/mkvparse)

可以转换为 xml，更改某些内容（例如使用[xml2/2xml](http://ofb.net/~egnor/xml2/)），转换回来并在一个管道中播放。

示例 XML 文件：http: [//vi-server.org/pub/xml2mkv_test.xml](http://vi-server.org/pub/xml2mkv_test.xml)

修剪（甚至更多）片段在这里：

```
<mkv2xml>
<EBML>
  <EBMLVersion>1</EBMLVersion>
  <DocType>matroska</DocType>
</EBML>
<Segment>
<Info>
  <TimecodeScale>1000000</TimecodeScale>
  <MuxingApp>libebml v1.0.0 + libmatroska v1.0.0</MuxingApp>
  <Duration>46665.0</Duration>
  <DateUTC>1282406803.0</DateUTC>
  <SegmentUID>9d516a0f927a12d286e1502d23d0fdb0</SegmentUID>
</Info>
<Tracks>
  <TrackEntry>
    <TrackNumber>1</TrackNumber>
    <TrackType>1</TrackType>
    <CodecID>V_MPEG4/ISO/AVC</CodecID>
    <CodecPrivate>
      014d401fffe10014274d401fa918080093600d418041adb0ad7bdf0101000428
      ce09c8
    </CodecPrivate>
    <Video>
      <PixelWidth>1024</PixelWidth>
      <PixelHeight>576</PixelHeight>
    </Video>
  </TrackEntry>
  <TrackEntry>
    <TrackNumber>2</TrackNumber>
    <TrackType>2</TrackType>
    <CodecID>A_AAC</CodecID>
    <Audio>
      <SamplingFrequency>48000.0</SamplingFrequency>
      <Channels>2</Channels>
    </Audio>
  </TrackEntry>
  <TrackEntry>
    <TrackNumber>3</TrackNumber>
    <CodecID>S_TEXT/UTF8</CodecID>
  </TrackEntry>
  ...
</Tracks>
<Cluster>
  <Timecode>0</Timecode>
  <SimpleBlock>
    <track>1</track>
    <timecode>0.0</timecode>
    <keyframe/>
    <data>
      00004e1925b82001ebd34d359f84a010001019b0f94a107609ec4dc0b6341175
      98899cbb3a0a9de562532111ed77f7876006014200856a5fc3c2ccdf6e10a385
      ...
    </data>
  </SimpleBlock>
  <SimpleBlock>
    <track>10</track>
    <timecode>0.009</timecode>
    <keyframe/>
    <data>
      01449ffe0b246a488f09c715768924b01aa2e9b2415aaa29e4696becea270d36
      a0d565bd24d5e6f09f3d4e000a8f192aa6aaa071f2ba14bd2fa14d633ad665ee
      72e92eadce23415fd6bb871941941b1bfd5b0e75ad6826755e61ef5483f93cd3
      82d61c779fa74b4acd62572b399ac3d9039900e94a5c542e4110dd29b65e2000
      220011a10c00000000b0a8540100880380
    </data>
    <data>
      0144d7902c180b04c28161a8482a160a048aa1209848423208cdeed6de7c6b7a
      .....
    </data>
    ...
  </SimpleBlock>
  <BlockGroup>
    <Block>
      <track>4</track>
      <timecode>0.042</timecode>
      <duration>3.375</duration>
      <data encoding="text"><![CDATA[A jobb oldaladon láthatod...
...tudod mit...]]></data>
    </Block>
    <BlockDuration>3375</BlockDuration>
  </BlockGroup>
  <BlockGroup>
    <Block>
      <track>5</track>
      <timecode>0.042</timecode>
      <duration>3.375</duration>
      <data encoding="text"><![CDATA[Auf der rechten Seite sieht man...|...rate mal...]]></data>
    </Block>
    <BlockDuration>3375</BlockDuration>
  </BlockGroup>
</Cluster>
</Segment>
</mkv2xml> 
```

# c++ - 通过 std in 和 std out 混合 python 和 C++

> ID：10453841
> 
> 赞同：0
> 
> 时间：2012-05-04T17:58:35.670
> 
> 标签：c++, python, stdout, stdin

我有一个问题，能够混合 python 代码和 C++ 代码对我来说是有益的，我认为这个任务很简单，可以通过简单地从 python 初始化 C++ 程序，然后拥有 C++ 程序来完成“等待”python通过std in给它一些输入，然后让python“等待”C++程序进行计算并通过std out等返回它。

我觉得这要么是微不足道的，要么是极其困难的。我的主要问题是每次我初始化 C++ 代码都需要很长时间，但如果我能实现这个想法，那只需要完成一次。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:11:16.350

听起来 SWIG 可能就是您正在寻找的东西。使用它为 Python 生成扩展模块，然后从 Python 脚本调用 C++ 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:13:07.077

查看子模块库。您可以使用 Submodule.popen() 从 python 创建一个进程，使用 stdin=PIPE 和 stdout=PIPE。然后，您可以从 C++ 程序的标准输出读取并写入其标准输入。

# android - Kindle Fire 中的谷歌驱动器/文档 API

> ID：10453843
> 
> 赞同：1
> 
> 时间：2012-05-04T17:59:05.980
> 
> 标签：android, google-docs, google-api-java-client, google-drive-api, kindle

在我的应用程序中，我的云服务由谷歌驱动器（以前的谷歌文档）提供以与谷歌文档交互我使用这个库：

[http://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)

它工作得很好，但要求设备上有 Google API 并设置了谷歌帐户

有没有其他方法可以在不使用这个库的情况下对谷歌文档进行身份验证？还是我必须将我的云提供商迁移到 Dropbox？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T00:38:34.640

您最好的选择是使用 OAuth 2.0，使用为（部分）为移动设备设计的[客户端流程。](https://developers.google.com/accounts/docs/OAuth2#clientside)

基本上，您需要做的是使用 Web 视图并将您的用户重定向到 OAuth 2.0 授权页面，然后在他们授予您访问其数据的权限后，您只需：

*   在 Web 视图中捕获身份验证代码
*   关闭网页视图
*   将身份验证代码交换为刷新和访问令牌
*   将刷新令牌保留在本地数据库中，因为它使您可以无限制地访问 API => 不再需要触发 Auth 流程。

就是这样！使用新获得的 OAuth 2.0 访问令牌和刷新令牌，您可以获得代表用户访问驱动器数据和使用 API 所需的一切。您已经绕过了 Android 帐户管理器。

甚至可能有一些适用于 Android 的 OAuth 2.0 / Web View 客户端库，这将有很大帮助。

PS：这种技术被广泛使用，例如在 iOS 上如果你使用 Facebook 库，它会首先检查是否安装了 Facebook 应用程序。如果未安装 Facebook 应用程序，它将自动使用 OAuth 2 和 Web View 技术。Google 的 Objective-C 客户端库也使用了这种技术（据我所知，从未使用过）。

# .net - 传递给 WCF Web 服务的日志记录凭据

> ID：10453848
> 
> 赞同：1
> 
> 时间：2012-05-04T17:59:36.243
> 
> 标签：.net, wcf, c#-4.0, wcf-client

我有一个配置了传输安全性和基本 clientCredentialType 的 Web 服务客户端。该服务正在使用 HTTPS 端点，我很难诊断错误。我试图向存储请求和响应消息以及传递的凭据（至少是用户名）的应用程序添加一个日志。
对于消息，我添加了带有 MessageInspector 的自定义行为。
我如何也可以记录凭据？WCF 中是否有任何扩展点可以做到这一点？还有什么建议吗？
谢谢

编辑：我得到的错误是这样的：

```
[NotSupportedException: This method is not supported by this class.]
System.Net.BasicClient.Lookup(HttpWebRequest httpWebRequest, ICredentials credentials) +2544984
System.Net.AuthenticationManager.Authenticate(String challenge, WebRequest request, ICredentials credentials) +304
System.Net.AuthenticationState.AttemptAuthenticate(HttpWebRequest httpWebRequest, ICredentials authInfo) +7949046
System.Net.HttpWebRequest.CheckResubmitForAuth() +269
System.Net.HttpWebRequest.CheckResubmit(Exception& e) +126
System.Net.HttpWebRequest.DoSubmitRequestProcessing(Exception& exception) +185
System.Net.HttpWebRequest.ProcessResponse() +75
System.Net.HttpWebRequest.SetResponse(CoreResponseData coreResponseData) +562

[WebException: The request was aborted: The request was canceled.]
System.Net.HttpWebRequest.GetResponse() +7865220
System.ServiceModel.Channels.HttpChannelRequest.WaitForReply(TimeSpan timeout) +99

[CommunicationException: An error (The request was aborted: The request was canceled.) occurred while transmitting data over the HTTP channel.]
System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +4729827
System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +1725
...Application code from here on... 
```

它是一个在 DEV 中正常工作但在 QA 中引发此错误的 Web 应用程序。代码相同，用户在两种环境中均有效。

绑定配置为：

```
<binding name="CommonBinding" maxReceivedMessageSize="10000000" useDefaultWebProxy="true" openTimeout="00:10:00" sendTimeout="00:10:00">
      <security mode="Transport">
        <transport clientCredentialType="Basic" proxyCredentialType="Basic"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
</binding> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:31:17.933

看一下这个：

[http://msdn.microsoft.com/en-us/magazine/cc948343.aspx](http://msdn.microsoft.com/en-us/magazine/cc948343.aspx)

我相信你可以在 IAuthorizationPolicy 中做到这一点

# vba - 字符串中的通配符

> ID：10453853
> 
> 赞同：2
> 
> 时间：2012-05-04T17:59:58.663
> 
> 标签：vba, excel

我有一个定期收到的电子表格，其中包含大量包含名称的单元格。一些单元格有一个全名，包括带句点的中间首字母。

例如：

> 斯普林格，杰里 A.

尽管我收到的表格时不时地会有以下内容：

> 斯普林格，杰瑞。

我需要摆脱那些中间的首字母，但还要检查以确保我只是删除了“。” 如果它在那里。

请原谅我缺乏正确的逻辑，但我有以下 ca-ca 子：

```
Sub DeleteMiddleI()
Dim nr1, nr2 As Range
Dim col As Integer

col = 1
Set nr1 = Cells(65536, col).End(xlUp)
Set nr2 = Cells(col, 1)

Do While nr2 <> nr1
    'Check to be sure the cell isn't empty
    If Len(nr2) <> 0 Then
         'Check to see if the last character is a "."
         If Right$(nr2, 1) = "." Then
            'Check and be sure there is a character before the "."
            If InStr(1, nr2.Text, "[A-Z].") > 0 Then '<<<<<<CODE BREAKAGE
                nr2 = Left$(nr2, Len(nr2) - 3)
            End If
         End If
    End If

    col = col + 1
    Set nr2 = Cells(col, 1)
Loop

End Sub 
```

它打破了

> 如果 InStr(1, nr2.Text, "[AZ].") > 0 那么

我觉得自己很愚蠢……但我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T18:07:16.800

这会有帮助吗？这将取代所有的“。” 一无所有。

```
Option Explicit

Sub Sample()
    Sheets("Sheet1").Cells.Replace What:=" .", Replacement:="", LookAt:=xlPart, _
    SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, ReplaceFormat:=False
End Sub 
```

**编辑**

删除首字母部分是什么意思？你的意思是`Springer, Jerry A.`改成`Springer, Jerry`还是`Springer, Jerry .`改成`Springer, Jerry`

如果是，那么这会有帮助吗？

```
Option Explicit

Sub Sample()
    Dim LastRow As Long
    Dim Pos As Long, i As Long

    With Sheets("Sheet1")
        LastRow = .Range("A" & Rows.Count).End(xlUp).Row

        For i = 1 To LastRow
            Pos = InStr(1, .Range("A" & i).Value, ", ") + 2
            If Pos > 2 Then
                Pos = InStr(Pos, .Range("A" & i).Value, " ")
                If Pos > 0 Then .Range("A" & i).Value = Mid(.Range("A" & i).Value, 1, Pos - 1)
            End If
        Next i
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:12:09.610

Could you change the if test from:

```
If Right$(nr2, 1) = "." Then 
```

to

```
If (Right$(nr2, 1) = "." AND Left$(nr2, 1) <> "." ) Then 
```

# zooming - Javafx 2 图表和手绘缩放

> ID：10453855
> 
> 赞同：7
> 
> 时间：2012-05-04T18:00:14.640
> 
> 标签：zooming, javafx-2

此代码绘制一个 XYChart 并结合使用鼠标右键单击和拖动执行自由手绘，同时使用鼠标左键单击并拖动在选定区域上执行放大。

我的问题是关于手绘缩放它总是被翻译。例如，尝试在拐角处绘制。

**我该如何解决这个问题？**

```
public class Zoom extends Application {

Path path;//Add path for freehand
BorderPane pane;
Rectangle rect;
SimpleDoubleProperty rectinitX = new SimpleDoubleProperty();
SimpleDoubleProperty rectinitY = new SimpleDoubleProperty();
SimpleDoubleProperty rectX = new SimpleDoubleProperty();
SimpleDoubleProperty rectY = new SimpleDoubleProperty();

double initXLowerBound = 0, initXUpperBound = 0, initYLowerBound = 0, initYUpperBound = 0;
@Override
public void start(Stage stage) {    
stage.setTitle("Lines plot");
final NumberAxis xAxis = new NumberAxis(1, 12, 1);
final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {

    @Override
    public String toString(Number object) {
        return String.format("%7.5f", object);
    }
});

 final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis);

lineChart.setCreateSymbols(false);
lineChart.setAlternativeRowFillVisible(false);
lineChart.setAnimated(true);

XYChart.Series series1 = new XYChart.Series();
series1.getData().add(new XYChart.Data(1, 0.53185));
series1.getData().add(new XYChart.Data(2, 0.532235));
series1.getData().add(new XYChart.Data(3, 0.53234));
series1.getData().add(new XYChart.Data(4, 0.538765));
series1.getData().add(new XYChart.Data(5, 0.53442));
series1.getData().add(new XYChart.Data(6, 0.534658));
series1.getData().add(new XYChart.Data(7, 0.53023));
series1.getData().add(new XYChart.Data(8, 0.53001));
series1.getData().add(new XYChart.Data(9, 0.53589));
series1.getData().add(new XYChart.Data(10, 0.53476));
series1.getData().add(new XYChart.Data(11, 0.530123));
series1.getData().add(new XYChart.Data(12, 0.53035));

pane = new BorderPane();
pane.setCenter(lineChart);
Scene scene = new Scene(pane, 800, 600);
lineChart.getData().addAll(series1);

initXLowerBound = ((NumberAxis) lineChart.getXAxis()).getLowerBound();
initXUpperBound = ((NumberAxis) lineChart.getXAxis()).getUpperBound();
initYLowerBound = ((NumberAxis) lineChart.getYAxis()).getLowerBound();
initYUpperBound = ((NumberAxis) lineChart.getYAxis()).getUpperBound();

stage.setScene(scene);        

path = new Path();
path.setStrokeWidth(1);
path.setStroke(Color.BLACK);

scene.setOnMouseClicked(mouseHandler);
scene.setOnMouseDragged(mouseHandler);
scene.setOnMouseEntered(mouseHandler);
scene.setOnMouseExited(mouseHandler);
scene.setOnMouseMoved(mouseHandler);
scene.setOnMousePressed(mouseHandler);
scene.setOnMouseReleased(mouseHandler);

pane.getChildren().add(path);

rect = new Rectangle();
rect.setFill(Color.web("blue", 0.1));
rect.setStroke(Color.BLUE);
rect.setStrokeDashOffset(50);

rect.widthProperty().bind(rectX.subtract(rectinitX));
rect.heightProperty().bind(rectY.subtract(rectinitY));
pane.getChildren().add(rect);

stage.show();
}
EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() {

@Override
public void handle(MouseEvent mouseEvent) {
    if (mouseEvent.getButton() == MouseButton.PRIMARY)
    {
            if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {
                rect.setX(mouseEvent.getX());
                rect.setY(mouseEvent.getY());
                rectinitX.set(mouseEvent.getX());
                rectinitY.set(mouseEvent.getY());
            } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED) {
                rectX.set(mouseEvent.getX());
                rectY.set(mouseEvent.getY());
            } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_RELEASED) {

                if ((rectinitX.get() >= rectX.get())&&(rectinitY.get() >= rectY.get()))
                {
                    LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter();

                    ((NumberAxis) lineChart.getXAxis()).setLowerBound(initXLowerBound);
                    ((NumberAxis) lineChart.getXAxis()).setUpperBound(initXUpperBound);

                    ((NumberAxis) lineChart.getYAxis()).setLowerBound(initYLowerBound);
                    ((NumberAxis) lineChart.getYAxis()).setUpperBound(initYUpperBound);

                    ZoomFreeHand(path, 1.0, 1.0, 0, 0);

                }
                else
                {
                    //Zoom In

                    double Tgap = 0;
                    double newLowerBound, newUpperBound, axisShift;
                    double xScaleFactor, yScaleFactor;
                    double xaxisShift, yaxisShift;

                    LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter();

                    // Zoom in Y-axis by changing bound range.            
                    NumberAxis yAxis = (NumberAxis) lineChart.getYAxis();
                    Tgap = yAxis.getHeight()/(yAxis.getUpperBound() - yAxis.getLowerBound());
                    axisShift = getSceneShiftY(yAxis);
                    yaxisShift = axisShift;

                    newUpperBound = yAxis.getUpperBound() - ((rectinitY.get() - axisShift) / Tgap);
                    newLowerBound = yAxis.getUpperBound() - (( rectY.get() - axisShift) / Tgap);

                    if (newUpperBound > yAxis.getUpperBound())
                        newUpperBound = yAxis.getUpperBound();

                    yScaleFactor = (yAxis.getUpperBound() - yAxis.getLowerBound())/(newUpperBound - newLowerBound);
                    yAxis.setLowerBound(newLowerBound);
                    yAxis.setUpperBound(newUpperBound);

                    NumberAxis xAxis = (NumberAxis) lineChart.getXAxis();

                    Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound());            
                    axisShift = getSceneShiftX(xAxis);                        
                    xaxisShift = axisShift;                                                                                
                    newLowerBound = ((rectinitX.get() - axisShift) / Tgap) + xAxis.getLowerBound();
                    newUpperBound = ((rectX.get() - axisShift) / Tgap) + xAxis.getLowerBound();                

                    if (newUpperBound > xAxis.getUpperBound())
                        newUpperBound = xAxis.getUpperBound();

                    xScaleFactor = (xAxis.getUpperBound() - xAxis.getLowerBound())/(newUpperBound - newLowerBound);
                    xAxis.setLowerBound( newLowerBound );
                    xAxis.setUpperBound( newUpperBound );                      

                    ZoomFreeHand(path, xScaleFactor, yScaleFactor, xaxisShift, yaxisShift);
                }
                // Hide the rectangle
                rectX.set(0);
                rectY.set(0);
            }
    }
    else if (mouseEvent.getButton() == MouseButton.SECONDARY) //free hand graphics
    {
        if(mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED){
            path.getElements().clear();
            path.getElements().add(new MoveTo(mouseEvent.getX(), mouseEvent.getY()));
        }
        else if(mouseEvent.getEventType()==MouseEvent.MOUSE_DRAGGED){
            path.getElements().add(new LineTo(mouseEvent.getX(), mouseEvent.getY()));
        }
    } 
  }
  };
private static double getSceneShiftX(Node node) {
double shift = 0;
do { 
    shift += node.getLayoutX(); 
    node = node.getParent();
} while (node != null);
return shift;
}
private static double getSceneShiftY(Node node) {
double shift = 0;
do { 
    shift += node.getLayoutY(); 
    node = node.getParent();
} while (node != null);
return shift;
}
private static void ZoomFreeHand(Path path, double xScaleFactor, double yScaleFactor, double xaxisShift, double yaxisShift) {

double layX, layY;

layX = path.getLayoutX();
layY = path.getLayoutY();
path.setScaleX(xScaleFactor);
path.setScaleY(yScaleFactor);
path.setTranslateX(xaxisShift);
path.setTranslateY(yaxisShift);
  }
  public static void main(String[] args) {
    launch(args);
   }        
  } 
```

我认为值得使用这样的东西：

```
 ObservableList<PathElement> mypathElements = path.getElements();
 for (int i = 0; i < mypathElements.size(); i++) {
   final PathElement element = mypathElements.get(i);
   if (element instanceof MoveTo) {
     final MoveTo move = (MoveTo)element;
     //change move coordinates     
   } else if (element instanceof LineTo) {
   final LineTo line = (LineTo)element;                                    
   //change line coordinates
   }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:32:03.940

与[Javafx 2 中使用手绘](https://stackoverflow.com/questions/10356561/javafx-2-chart-resize-with-freehand-draw/10803143)和相同答案调整图表大小的问题相同：

看来您的坐标是基于错误的锚点。您需要找到一个包含图形本身的节点，并且仅使用该节点的坐标，而不是轴或场景。

我什至建议将所有鼠标事件添加到该节点而不是场景，以避免过度的坐标转换。

另一个建议是使用[ScenicView](http://fxexperience.com/scenic-view/)工具来调查您的应用程序并查看哪些节点具有哪些坐标并验证您的数学。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:30:36.857

我建议更换那些：

```
private static double getSceneShiftX(Node node) {
double shift = 0;
do { 
    shift += node.getLayoutX(); 
    node = node.getParent();
} while (node != null);
return shift;
}
private static double getSceneShiftY(Node node) {
double shift = 0;
do { 
    shift += node.getLayoutY(); 
    node = node.getParent();
} while (node != null);
return shift;
} 
```

with `Node.localToScene`,`Node.sceneToLocal`以点或边界为参数的转换方法。

# python - Windows 上的 PIL 和 JPEG 库

> ID：10453858
> 
> 赞同：0
> 
> 时间：2012-05-04T18:00:30.283
> 
> 标签：python, windows, jpeg, python-imaging-library

我已经从源代码构建了 Python 的 PIL 库（由于从安装程序可执行文件安装的版本中存在错误），并且可以在构建计算机上从 jpg 文件创建 Image() 对象，但是当我使用 PyInstaller 打包这个 Python 应用程序时，应用程序是无法打开 JPEG 图像。我没有正确构建 PIL，如[PIL encoder jpeg not available](https://stackoverflow.com/questions/8479344/pil-encoder-jpeg-not-available)中所述，还是有其他问题？

更新：错误消息是“IOError：encoder jpeg not available”。

编辑：从安装程序可执行文件安装的版本的问题（对于版本 1.1.7 和 1.1.6，如果不是更早的版本，也是如此）是它链接到 VC90.DebugCRT 库/程序集，我没有意味着要分发并且 PyInstaller 在我的系统上找不到（尽管有一个版本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:23:42.890

您需要在安装中包含 jpeg 编码器/解码器 dll，否则它将无法在没有它的系统上运行。

我自己还没有尝试过，但是您也可以通过静态链接而不是通过使用 --enable-static 运行配置脚本来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T07:47:01.420

您有 2 个选择：

1.  [使用来自http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)的 PIL 预构建二进制文件

2.  从源代码构建（请注意，在获得 JPEG 支持之前，您必须设置 JPEG 库，这在 Windows 上并不容易）

参考资料（不是解决您的问题所必需的）：

*   Pillow（PIL 的一个分支）的“先决条件”：[https ://pypi.python.org/pypi/Pillow/1.7.8#build-instructions-all-platforms](https://pypi.python.org/pypi/Pillow/1.7.8#build-instructions-all-platforms)
*   参见奥斯卡的“注意”：http: [//django-oscar.readthedocs.org/en/latest/internals/getting_started.html](http://django-oscar.readthedocs.org/en/latest/internals/getting_started.html)

> 请确保安装了 Python 图像库 (PIL) 的分支枕头，支持 ​​JPEG。首次安装枕头时会打印支持的格式。有关如何获得 JPEG 支持的说明是高度特定于平台的，但 PIL 指南也适用于枕头。一般来说，**在安装过程中需要确保 libjpeg-dev 已安装并找到**。

# android - 将视图包装在 xml 中的框中

> ID：10453859
> 
> 赞同：1
> 
> 时间：2012-05-04T18:00:35.527
> 
> 标签：android, xml

如何将 XML 代码中的元素包装在类似视图的框内？这意味着我希望它们看起来像是被分组在带有边框的某个框中。

```
<Button
    android:id="@+id/carbgraph"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="230dp"
    android:layout_y="378dp"
    android:text="Button" />

<ProgressBar
    android:id="@+id/progressBarforcals"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="280dp"
    android:layout_height="wrap_content"
    android:layout_x="15dp"
    android:layout_y="346dp" />

<TextView
    android:id="@+id/calsinmenu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="16dp"
    android:layout_y="320dp"
    android:text="TextView" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T18:25:05.333

将您的小部件放入布局（例如 LinearLayout）并编辑此布局背景，如下所示：

```
<LinearLayout 
   ...
   android:background="@drawable/background"
</LinearLayout> 
```

然后在名为 background.xml 的可绘制文件夹中创建一个 XML 文件：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <stroke 
        android:width="3dp" 
        android:color="#838c7f">
    </stroke>

    <padding 
        android:left="3dp" 
        android:top="3dp"
    android:right="3dp" 
    android:bottom="3dp">
    </padding>

    <corners android:radius="4dp" />

    <gradient 
        android:startColor="@color/background_start" 
        android:endColor="@color/background_end"/>
</shape> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:25:14.223

```
You can set background of your layout 
```

创建一个看起来像带有名为 box.png 边框的框的图像 将此图像放入可绘制对象中

```
ex:

    <LinearLayout 
    .. ..  
        android:backgroud="@drawable/box.png">

<Button
    android:id="@+id/carbgraph"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="230dp"
    android:layout_y="378dp"
    android:text="Button" />

<ProgressBar
    android:id="@+id/progressBarforcals"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="280dp"
    android:layout_height="wrap_content"
    android:layout_x="15dp"
    android:layout_y="346dp" />

<TextView
    android:id="@+id/calsinmenu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="16dp"
    android:layout_y="320dp"
    android:text="TextView" />

    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-10T11:19:13.107

还有另一种方式...

您可以为外部视图添加背景颜色（例如黑色），然后为内部视图添加不同的背景颜色（例如白色），为内部视图添加边距，您就完成了！

# sqlite - 通过 Ant 将多个参数传递给 SQLite

> ID：10453863
> 
> 赞同：0
> 
> 时间：2012-05-04T18:00:57.020
> 
> 标签：sqlite, ant

从我的 Ant 脚本调用 SQLite 时，我需要同时使用 .separator 和 .import，但似乎无法正确使用语法。根据这里关于在 bash 脚本中执行相同操作的答案，我的最新尝试是这个。

```
<exec executable="sqlite3">
    <arg value="${sqlite.db}" />
    <arg value=".separator ';'\n.import ${data.dir}/DISTRICT_BOUNDARY.txt DISTRICT_BOUNDARY" />
</exec> 
```

不幸的是，这会导致以下错误消息。

错误：未知命令或无效参数：“分隔符”。输入“.help”获取帮助

我正在尝试做的正确语法是什么？

**最终解决方案：**

```
<exec executable="sqlite3" inputstring=".separator ';'&#10;.import ${data.dir}/METADATA_DESCRIPTION.txt METADATA_DESCRIPTION">
    <arg value="${sqlite.db}" />
</exec> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:05:48.583

看来您不能通过最后一个参数将元命令（即以 a 开头的命令`.`）传递给 sqlite3；只有实际的 SQL 语句似乎在那里工作[*]。有两种可能的修复方法；要么将元命令写入文件并使用`-file filename`选项（两个参数，在数据库名称之前）加载它们，要么在 sqlite3 的标准输入中传递整个多语句指令集。第二个选项应该更简单，您可以通过`inputstring`参数使用 ant 实现：

```
<exec executable="sqlite3" inputstring=".separator ';'
.import ${data.dir}/DISTRICT_BOUNDARY.txt DISTRICT_BOUNDARY">
    <arg value="${sqlite.db}" />
</exec> 
```

是的，里面有一个真正的换行符。与真正的 SQL 语句不同，您不能用分号分隔元命令。您可以根据需要对换行符进行编码`&#10;`。

* * *

[*] 实际上，一个元命令可以工作，但你不能放两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:09:48.473

我认为 Ant 将您的第二个 arg 值中的单引号解释为字符串分隔符。尝试转义单引号：

```
<arg value=".separator \';\'\n.import${data.dir}/DISTRICT_BOUNDARY.txt DISTRICT_BOUNDARY" /> 
```

我不熟悉 SQLite 语法，但 .import 参数可能还需要是一个单独的 arg 值。

# parallel-processing - 多次运行是否使其并行？

> ID：10453865
> 
> 赞同：3
> 
> 时间：2012-05-04T18:01:24.777
> 
> 标签：parallel-processing, operating-system, fastq

我编写了一个简短的 python 脚本来处理我的大型 fastq 文件，大小从 5Gb 到 35Gb。我在具有许多内核的 Linux 服务器中运行脚本。该脚本根本不是并行编写的，平均需要大约 10 分钟才能完成单个文件。

如果我在几个文件上运行相同的脚本，例如

```
$ python my_script.py file1 & 
$ python my_script.py file2 & 
$ python my_script.py file3 & 
```

使用 & 符号来推回该过程。

这些脚本是否并行运行，我会节省一些时间吗？

对我来说似乎不是，因为我正在使用 top 命令来检查处理器的使用情况，并且随着我添加新的运行，每个使用率都会下降，或者它不应该使用接近 100% 的地方吗？

因此，如果它们没有并行运行，有没有办法让操作系统并行运行它们？

感谢您的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:03:10.203

以这种方式执行的命令确实是并行运行的。它们没有使用 100% 的 CPU 时间的原因可能是因为它们受 I/O 限制，而不是 CPU 限制。脚本所做的事情的描述（“大小从 5Gb 到 35Gb 的大 fastq 文件”）表明可能就是这种情况。

但是，如果您查看由 给出的进程列表`ps`，您应该会在其中看到三个`python`进程 - 除非其中一个或多个在您运行时已经终止`ps`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T19:22:54.850

等待 I/O 操作所花费的时间被计为一种不同的 CPU 使用率，通常是`%wa`. 您可能只是在查看`%us`（用户 CPU 时间）。

# sql - 类别和子类别数据库

> ID：10453871
> 
> 赞同：4
> 
> 时间：2012-05-04T18:01:43.543
> 
> 标签：sql, join

我在检索列值时遇到问题，例如取决于其他列我尝试使用外部连接和嵌套选择来完成，但我想我无法在脑海中找到解决方案

```
Categories Table:
ID  Name                ParentID
--------------------------------
1   Software            NULL
2   Domains             NULL
3   Games               NULL
4   Accounts            NULL
5   Others              NULL
6   Security Software   1
7   Operating Systems   1
8   Browsers            1
9   Developer Tools     1
10  .com Domains        2
11  .net Domains        2
12  .org Domains        2
13  Online Games        3
14  PC Games            3
15  PS Games            3
16  RapidShare Accounts 4
17  4shared Account     4
18  Web Templates       5
19  Flash Intros        5
20  Firewall            6
21  Antivirus           6 
```

我想要做的是显示父类别名称而不是 parentID

像那样

```
ID  Name                ParentID
--------------------------------
1   Software            NULL
2   Domains             NULL
3   Games               NULL
4   Accounts            NULL
5   Others              NULL
6   Security Software   Software
7   Operating Systems   Software
8   Browsers            Software
9   Developer Tools     Software
10  .com Domains        Domains
11  .net Domains        Domains
12  .org Domains        Domains
13  Online Games        Games               
14  PC Games            Games               
15  PS Games            Games               
16  RapidShare Accounts Accounts            
17  4shared Account     Accounts            
18  Web Templates       Others              
19  Flash Intros        Others              
20  Firewall            Security Software
21  Antivirus           Security Software 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T18:05:38.237

你需要在桌子上加入两次

```
SELECT c1.Id, c1.Name as parentname , c2.name
FROM categories c1
JOIN categories c2
    ON c1.id = c2.parentid 
```

结果将是：

```
ID      ParentName            Name
1       software              security software
1       software              operating software
2       domains               .com domains
2       domains               .net domains
2       domains               .org domains
3       games                 pc games 
```

这将为您提供子类别或子类别的 parentID、parentName 和 Name。

如果需要，您还可以将其更改为包含子类别 ID。

根据您的编辑，您可以使用以下内容：

```
create table categories
(
    id int,
    name varchar(50),
    parentid int
)

insert into categories values(1, 'software', null)
insert into categories values(2, 'domains', null)
insert into categories values(3, 'games', null)
insert into categories values(6, 'security software', 1)
insert into categories values(7, 'operating systems', 1)
insert into categories values(8, 'browsers', 1)
insert into categories values(10, '.com domains', 2)
insert into categories values(11, '.net domains', 2)
insert into categories values(12, '.org domains', 2)
insert into categories values(13, 'online games', 3)
insert into categories values(14, 'pc games', 3)
insert into categories values(15, 'ps games', 3)

select c1.id
    , c1.name
    , (select name from categories where c1.parentid = categories.id) as ParentId
from categories c1 
```

这将导致：

![在此处输入图像描述](../Images/fe226247c6d90a8345627a51a702dd7b.png)

# jquery - 必须与 Twitter Bootstrap 同时使用 Datepicker？

> ID：10453875
> 
> 赞同：0
> 
> 时间：2012-05-04T18:01:57.710
> 
> 标签：jquery, css, twitter, xhtml, twitter-bootstrap

当我尝试使用 2 个日期选择器时，只会弹出第一个。另一个不是我把代码上传到 [http://jsfiddle.net/2ed8T/](http://jsfiddle.net/2ed8T/)

```
<link href="http://aymkdn.github.com/Datepicker-for-Bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="http://github-proxy.kodono.info/?q=https://raw.github.com/Aymkdn/Datepicker-for-Bootstrap/master/datepicker.css" rel="stylesheet">

<div class="input-append date" id="dp2" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
    <input class="span2"  name="date_to" size="16" type="text" value="12-02-2012" readonly>
    <span class="add-on"><i class="icon-th"></i></span>
</div>
<div class="input-append date" id="dp3" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
    <input class="span2"  name="date_to" size="16" type="text" value="12-02-2012" readonly>
    <span class="add-on"><i class="icon-th"></i></span>
</div>

<script src="http://aymkdn.github.com/Datepicker-for-Bootstrap/js/jquery-1.7.1.min.js"></script>
<script src="http://github-proxy.kodono.info/?q=https://raw.github.com/Aymkdn/Datepicker-for-Bootstrap/master/bootstrap-datepicker.js"></script>

<script>        
    $(function(){  
        $('#dp2').datepicker()({
            format: 'mm-dd-yyyy'
        });
        $('#dp3').datepicker()({
            format: 'mm-dd-yyyy'
        });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:07:27.017

您的`.datepicker()`调用中有一组额外的括号。

而不是`$('#dp2').datepicker()({...})`，它应该是`$('#dp2').datepicker({...})`

# java - 如何“取消”CountDownLatch？

> ID：10453876
> 
> 赞同：18
> 
> 时间：2012-05-04T18:01:59.570
> 
> 标签：java, concurrency, java.util.concurrent

我有多个消费者线程正在等待`CountDownLatch`大小为 1 的`await()`. 我有一个生产者线程，`countDown()`它在成功完成时调用。

当没有错误时，这很有效。

但是，如果生产者检测到错误，我希望它能够向消费者线程发出错误信号。理想情况下，我可以让生产者调用类似的东西，`abortCountDown()`并让所有消费者收到 InterruptedException 或其他一些异常。我不想调用`countDown()`，因为这需要我的所有消费者线程在调用`await()`. 我宁愿他们只收到一个他们已经知道如何处理的异常。

我知道中止设施在`CountDownLatch`. 是否有另一个同步原语可以轻松适应以有效创建`CountDownLatch`支持中止倒计时的同步原语？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T20:37:01.913

JB Nizet 给出了一个很好的答案。我拿了他的，稍微打磨了一下。结果是一个名为 AbortableCountDownLatch 的 CountDownLatch 的子类，它向该类添加了一个“abort()”方法，该方法将导致所有等待锁存器的线程接收 AbortException（InterruptedException 的子类）。

此外，与 JB 的类不同，AbortableCountDownLatch 将在中止时立即中止所有阻塞线程，而不是等待倒计时达到零（对于使用计数>1 的情况）。

```
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.TimeUnit;

public class AbortableCountDownLatch extends CountDownLatch {
    protected boolean aborted = false;

    public AbortableCountDownLatch(int count) {
        super(count);
    }

   /**
     * Unblocks all threads waiting on this latch and cause them to receive an
     * AbortedException.  If the latch has already counted all the way down,
     * this method does nothing.
     */
    public void abort() {
        if( getCount()==0 )
            return;

        this.aborted = true;
        while(getCount()>0)
            countDown();
    }

    @Override
    public boolean await(long timeout, TimeUnit unit) throws InterruptedException {
        final boolean rtrn = super.await(timeout,unit);
        if (aborted)
            throw new AbortedException();
        return rtrn;
    }

    @Override
    public void await() throws InterruptedException {
        super.await();
        if (aborted)
            throw new AbortedException();
    }

    public static class AbortedException extends InterruptedException {
        public AbortedException() {
        }

        public AbortedException(String detailMessage) {
            super(detailMessage);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-04T18:08:33.507

在内部使用 CountDownLatch 将此行为封装在特定的更高级别的类中：

```
public class MyLatch {
    private CountDownLatch latch;
    private boolean aborted;
    ...

    // called by consumers
    public void await() throws AbortedException {
        latch.await();
        if (aborted) {
            throw new AbortedException();
        }
    }

    // called by producer
    public void abort() {
        this.aborted = true;
        latch.countDown();
    }

    // called by producer
    public void succeed() {
        latch.countDown();
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T18:10:52.383

您可以创建一个包装器`CountDownLatch`，以提供取消服务员的能力。它将需要跟踪等待的线程并在它们超时时释放它们，并记住闩锁已被取消，因此未来的调用`await`将立即中断。

```
public class CancellableCountDownLatch
{
    final CountDownLatch latch;
    final List<Thread> waiters;
    boolean cancelled = false;

    public CancellableCountDownLatch(int count) {
        latch = new CountDownLatch(count);
        waiters = new ArrayList<Thread>();
    }

    public void await() throws InterruptedException {
        try {
            addWaiter();
            latch.await();
        }
        finally {
            removeWaiter();
        }
    }

    public boolean await(long timeout, TimeUnit unit) throws InterruptedException {
        try {
            addWaiter();
            return latch.await(timeout, unit);
        }
        finally {
            removeWaiter();
        }
    }

    private synchronized void addWaiter() throws InterruptedException {
        if (cancelled) {
            Thread.currentThread().interrupt();
            throw new InterruptedException("Latch has already been cancelled");
        }
        waiters.add(Thread.currentThread());
    }

    private synchronized void removeWaiter() {
        waiters.remove(Thread.currentThread());
    }

    public void countDown() {
        latch.countDown();
    }

    public synchronized void cancel() {
        if (!cancelled) {
            cancelled = true;
            for (Thread waiter : waiters) {
                waiter.interrupt();
            }
            waiters.clear();
        }
    }

    public long getCount() {
        return latch.getCount();
    }

    @Override
    public String toString() {
        return latch.toString();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T18:19:39.200

`CountDownLatch`您可以使用`ReentrantLock`允许访问其受保护方法的 a推出自己的[`getWaitingThreads`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#getWaitingThreads%28java.util.concurrent.locks.Condition%29)方法。

例子：

```
public class FailableCountDownLatch {
    private static class ConditionReentrantLock extends ReentrantLock {
        private static final long serialVersionUID = 2974195457854549498L;

        @Override
        public Collection<Thread> getWaitingThreads(Condition c) {
            return super.getWaitingThreads(c);
        }
    }

    private final ConditionReentrantLock lock = new ConditionReentrantLock();
    private final Condition countIsZero = lock.newCondition();
    private long count;

    public FailableCountDownLatch(long count) {
        this.count = count;
    }

    public void await() throws InterruptedException {
        lock.lock();
        try {
            if (getCount() > 0) {
                countIsZero.await();
            }
        } finally {
            lock.unlock();
        }
    }

    public boolean await(long time, TimeUnit unit) throws InterruptedException {
        lock.lock();
        try {
            if (getCount() > 0) {
                return countIsZero.await(time, unit);
            }
        } finally {
            lock.unlock();
        }
        return true;
    }

    public long getCount() {
        lock.lock();
        try {
            return count;
        } finally {
            lock.unlock();
        }
    }

    public void countDown() {
        lock.lock();
        try {
            if (count > 0) {
                count--;

                if (count == 0) {
                    countIsZero.signalAll();
                }
            }
        } finally {
            lock.unlock();
        }
    }

    public void abortCountDown() {
        lock.lock();
        try {
            for (Thread t : lock.getWaitingThreads(countIsZero)) {
                t.interrupt();
            }
        } finally {
            lock.unlock();
        }
    }
} 
```

您可能希望更改此类以在取消后引发`InterruptedException`新的调用。如果您需要该功能，`await`您甚至可以扩展此类。`CountDownLatch`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-22T10:26:25.720

从 Java 8 开始，您可以为此使用 CompletableFuture。一个或多个线程可以调用阻塞的 get() 方法：

```
CompletableFuture<Void> cf = new CompletableFuture<>();
try {
  cf.get();
} catch (ExecutionException e) {
  //act on error
} 
```

另一个线程可以成功地完成它，也可以`cf.complete(null)`异常地完成它`cf.completeExceptionally(new MyException())`

# css - CSS 布局 - 垂直源顺序

> ID：10453877
> 
> 赞同：1
> 
> 时间：2012-05-04T18:02:09.633
> 
> 标签：css, layout, responsive-design

是否有一种通用的 CSS 布局技术来控制页面的垂直源顺序？

例如，我可以改变这个...

```
<container>
    <header></header>
    <content></content>
    <footer></footer>
</container> 
```

……到这……

```
<container>
    <content></content>
    <header></header>
    <footer></footer>
</container> 
```

...虽然仍然`<header>`出现在页面顶部，在`<content>`?上方

换句话说，我想将用于控制水平源顺序的技术，如“ [One True Layout](http://positioniseverything.net/articles/onetruelayout/) ”和“ [Holy Grail](http://www.alistapart.com/articles/holygrail) ”，应用于页面的垂直源顺序。

这个[问题](https://stackoverflow.com/q/5379406/723007)问的问题基本相同，但响应者似乎没有得到所问的内容，并且提问者的解决方案似乎很麻烦。

我可能会因为微优化而受到批评，但[超级菜单](http://www.sitepoint.com/mega-drop-down-menus/)和响应式设计不断将我的页面内容推得越来越低。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T05:01:22.937

如果您知道要移动的块的高度，Littlefool 的答案很有效（如果您要交换两个块，则它们中的任何一个具有固定高度就足够了）。

但是，如果所有块都具有灵活的高度，则无济于事。在这种情况下，您可以尝试来自[http://tanalin.com/en/articles/css-block-order/](http://tanalin.com/en/articles/css-block-order/)的技术：

```
<div class="container">
    <div class="block-1">1st block</div>
    <div class="block-2">2nd block</div>
    <div class="block-3">3rd block</div>
</div>
<style>
    .container { display: table; width: 100%; }
    .block-1 { display: table-footer-group; } /* Will display at the bottom. */
    .block-2 { display: table-row-group;    } /* Will display in the middle. */
    .block-3 { display: table-header-group; } /* Will display at the top. */
</style> 
```

（见演示：http: [//jsbin.com/etujad/11/edit](http://jsbin.com/etujad/11/edit)）

**注意事项**：

1.  它最多只能用于 3 个块（您可以通过嵌套获得更多）。

2.  它在 IE6/7 中不起作用，[在 IE8 中有一些皱纹](http://tanalin.com/en/articles/css-block-order/)。

3.  许多浏览器（Firefox 除外？）不允许为替换元素（如图像）赋予这些显示值（[testcase](http://jsfiddle.net/simondell/Escn6/3/)），因此您必须将它们包装在 div 中并重新排序 div 。

您可以为旧 IE 使用 JavaScript 来补充它，或者根据设计，在旧 IE 中以错误的顺序保留块可能是可以接受的（请注意，很少有智能手机运行旧版本的 IE，甚至运行 Windows Phone 7.5 IE9，所以如果您只是在移动设备上交换源顺序，这是一个不错的选择）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T18:37:31.283

您不能使用 CSS 更改页面的来源。您可以在一定程度上改变 HTML 输出，但不能以这种方式。

HTML 文档中元素的顺序是有意义的。因此，通常情况下，您的来源在其相关内容之后有一个标题是没有意义的。在许多情况下，正是顺序定义了这种关系。

您可以做的是使用 CSS 技术以视觉方式布置这些元素，使它们看起来以不同的顺序排列。

但是它们在 HTML 中的垂直顺序在语义上应该是合乎逻辑的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T18:58:13.760

你应该知道，搜索“圣杯”是毫无用处的。虽然我能理解你为什么要把内容部分放在前面。通常搜索引擎索引内容上的页面，因为它们出现在 html 中。首先拥有一堆标题和其他东西不会有任何好处。

我还没有时间研究 HTML5 和 CSS3，但是很可能只用 css 来改变你的布局。我是一名开发人员，所以我的 css 和 html 技能不如真正的网络制作人，但你可以在 CSS 中使用 position 属性。

```
<div id="content">this is your content</div>
<div id="header">this is the header</div>
<div id="footer">this is your footer</div> 
```

此 html 仍然可以使用以下 css 在您的页面顶部显示标题标记。

```
 #header
    {
        height:100px;
        width:100%;
        background-color:Red;
        position:absolute;
        top:0;
    }
    #content
    {
        margin-top:100px;
        height:500px;
        background-color:Green;
    }
    #footer
    {
        height:100px;
        background-color:Blue;
    } 
```

我希望它能让你了解什么是可能的。（既然您提到了 HTML5，我想您不必担心旧版浏览器，只需担心最新版本）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-09T17:52:54.120

您可以使用老朋友 display:table 重新排序您的元素。

可以说这是您的来源。

```
<div id="container">
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer"></div>
</div> 
```

为了重新排序试试这个。

```
 #container{
      display: table;
   }

   #content{
     display: table-header-group;
   }

    #header{
     display: table-row-group;
   }

    #footer{
     display: table-footer-group;
   } 
```

班。你说对了。这是概念的证明。[http://jsfiddle.net/k0La8egp/1/](http://jsfiddle.net/k0La8egp/1/)

# egit - EGit 克隆不起作用

> ID：10453881
> 
> 赞同：4
> 
> 时间：2012-05-04T18:02:45.870
> 
> 标签：egit

我可以从命令行克隆，但不能通过 EGit (Eclipse)。广泛的谷歌搜索没有得到答案。这已经被问过很多次了，我几乎尝试了所有建议。我不断收到“无法打开 git-upload-pack”。是的，我可以从命令行克隆然后导入。然后通过 Eclipse 提交并从命令行推送。我已经这样做了一段时间了。除了拉和推之外的一切都有效。这个功能刚刚坏了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:52:43.027

*   如果您坐在代理后面，请检查您的 Eclipse 代理设置
*   Eclipse 错误日志中有任何错误吗？
*   EGit 1.3.0 可以明确地通过 https 进行克隆
*   你的 git 服务器想要什么样的 http 身份验证？JGit/EGit 目前只支持基本认证和摘要认证
*   您的服务器是否使用自签名 SSL 证书？然后你要么需要告诉 Java（在 EGit 端）它应该信任这个证书，要么使用 git 配置参数 https.verify=false 关闭 SSL 证书

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T13:51:29.140

如果 http.sslVerify=false，EGit/JGit 3.0.0 现在可以正确忽略主机名验证失败。这与本机 git 的行为相匹配。

以前的解决方法是为您希望服务的 IP 地址/主机名生成一个新的自签名 SSL 证书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T17:53:20.783

下面描述这个问题。没有解决办法。 [http://code.google.com/p/gitblit/issues/detail?id=4](http://code.google.com/p/gitblit/issues/detail?id=4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-16T15:04:28.267

我们遇到的另一个问题：如果您有一个 Fiddler 实例正在运行，那么它将（实际上）在您和外部世界之间放置一个代理。

杀死 Fiddler 或限制 Fiddler 解密的 HTTPS 流量，以使 GIT 正常工作。

![仅限制提琴手到浏览器](../Images/a640342cabf76a5dd7aaf9e32dde8ae4.png)

# ios - 在不使用情节提要的情况下调用另一个 ViewController

> ID：10453883
> 
> 赞同：0
> 
> 时间：2012-05-04T18:02:52.557
> 
> 标签：ios, xcode, uiviewcontroller

我将按钮从调用 Storyboard 中的另一个 ViewController 更改为使用 JSon 从网站下载一些东西。现在我需要在代码之后调用相同的 ViewController ......

可能这是一个简单的东西，但我不太明白

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:54:34.657

我不确定这就是你要找的东西，但是看看这个。

假设您有两个控制器，ViewController1 和 ViewController2。在 ViewController 1 中完成 JSON 解析后，假设从 [self finishedGetJSON]，您可以这样做；

```
- (void) finishedGetJSON(yourargument*) arg {
    ViewController1 * screen = [self.storyboard instantiateViewControllerWithIdentifier:@"yourIdentifier"];
    [self.navigationController pushViewController:screen animated:YES]; 
```

那是你要找的吗？

# c - 编译使用 C 中的 WordNet 库的程序时出错

> ID：10453888
> 
> 赞同：1
> 
> 时间：2012-05-04T18:03:12.920
> 
> 标签：c, wordnet

我已经成功安装了 WordNet 库。现在我正在尝试在程序中使用该库，但我无法构建示例程序。即使库搜索路径正确，我也会收到链接器错误（未定义的引用）。

这是错误：

```
gcc -g -I/usr/local/WordNet-3.0/include  -o wordnet_sample.o -c wordnet_sample.c
gcc -L/usr/local/WordNet-3.0/lib -lWN -o wordnet_sample wordnet_sample.o
wordnet_sample.o: In function `main':
/home/user/wordnet_sample/wordnet_sample.c:6: undefined reference to `wninit' 
```

这是 Makefile

```
WORDNET_INSTALL=/usr/local/WordNet-3.0
CFLAGS=-g -I$(WORDNET_INSTALL)/include
LDFLAGS=-L$(WORDNET_INSTALL)/lib -lWN

wordnet_sample: wordnet_sample.o
        gcc $(LDFLAGS) -o wordnet_sample wordnet_sample.o

wordnet_sample.o: wordnet_sample.c
        gcc $(CFLAGS) -o wordnet_sample.o -c wordnet_sample.c 
```

这是示例程序

```
#include <wn.h>
#include <stdlib.h>
int main(int argc, char **argv) {
    int isOpen = 0 == wninit();
    if (isOpen) {
            printf("wordnet opened!\n");
    }
    else {
            printf("Could not open WordNet dictionary!\n");
    }
    return 0;
} 
```

WordNet 库已安装

```
[user@local wordnet_sample]$ ls -l /usr/local/WordNet-3.0/lib/
total 180
-rw-r--r-- 1 root root 172344 May  3 15:34 libWN.a
drwxr-xr-x 2 root root   4096 May  3 15:34 wnres 
```

我怀疑我可能需要更多的链接器参数，但我真的不确定。有没有人遇到过这个？有谁知道为什么会发生未定义的引用错误，即使我有正确的库和库搜索路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:09:31.993

您需要添加`-c`到`CFLAGS`.

此外，第一个`gcc`命令需要在对象之后有库。你可以把 LDFLAGS 放在最后：

```
gcc -o wordnet_sample wordnet_sample.o $(LDFLAGS) 
```

更好的是，有单独的`LDFLAGS`（链接器*选项*）和`LIBS`（要链接​​的实际库）。所以：

```
LDFLAGS=-L$(WORDNET_INSTALL)/lib
LIBS=-lWN
....
gcc $(LDFLAGS) -o wordnet_sample wordnet_sample.o $(LIBS) 
```

# cocoa-touch - 在我设置它们后不会改变高位的字符编码

> ID：10453889
> 
> 赞同：0
> 
> 时间：2012-05-04T18:03:15.260
> 
> 标签：cocoa-touch, character-encoding, bits

我正在寻找一种字符编码，它允许我设置一个高于 127 的字节。`NSASCIICharacterEncoding`并`NSUTF8CharacterEncoding`替换那些更高的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:18:46.623

仅当您尝试将字节解释为字符时，字符编码才重要。如果这是您需要做的，并且如果您使用来自某些外部来源的数据，那么请使用外部来源使用的任何编码。

另一方面，如果您只是想管理字节集合（即不是字符），那么请考虑改用 NSData。NSData 不关心字符编码，不改变字节的顺序，并且很乐意跟踪你提供的尽可能多的数据。（如果您需要修改其中包含的数据，则有一个可变版本。）

# sql - 如何从表中获取下一个 4 位数字（包含 3,4、5 和 6 位长数字）

> ID：10453890
> 
> 赞同：1
> 
> 时间：2012-05-04T18:03:18.240
> 
> 标签：sql, vb.net, ms-access

我找到了获取下一个 4 位数字的好方法。 [如何找到下一个免费的唯一 4 位数号码](https://stackoverflow.com/questions/7827649/how-to-find-next-free-unique-4-digit-number)

但就我而言，我想获得下一个可用的 4 位或 5 位数字。这将根据用户的要求而改变。这些编号不是关键的 ID 列，但它们对于业务目的的标记结构是必不可少的。

目前我使用表适配器查询。但是我将如何编写查询。我想我可以对所有值进行长时间的迭代循环，直到看到 4 位数字。

但我正在尝试想一些更有效的方法。

```
Function GetNextAvailableNumber(NumofDigits) as Long
'SQL Code Here ----
'Query Number Table

Return Long

End Function 
```

这是我当前的 SQL：

```
'This Queries my View
SELECT MIN([Number]) AS Expr1
FROM  LineNumbersNotUsed

'This is my View SQL 
SELECT Numbers.Number
FROM Numbers
WHERE (((Exists (Select * From LineList Where LineList.LineNum =  Numbers.Number))=False))
ORDER BY Numbers.Number; 
```

Numbers 是从 0 到 99999 的所有可用数字的列表，基本上可以使用。

LineList 是我的最终主表，我在其中保存了长信息和所有相关的其他业务信息。

希望这是有道理的。

天哪，你们对新人太苛刻了。我不小心按了回车键，问题发布了，我立即得到 -3 票。

让新人休息一下好吗！请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:15:12.683

如果我忽略了您问题中的某些内容，我提前道歉。使用您的设计，这样的查询不会返回下一个未使用的 4 位数字吗？

```
SELECT MIN([Number]) AS next_number
FROM  LineNumbersNotUsed
WHERE
        [Number] > 999
    AND [Number] < 10000; 
```

这种方法不适用于多个并发用户，但您没有指出这对您来说是个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:23:10.653

您链接到的问题说明您需要的是一个包含 2 个字段的表：

```
Number     InUse
0000       No
0001       No
0002       Yes
0003       No
0005       Yes 
```

每当使用/释放数字时，必须更新表格以设置`InUse`为是/否。

也许我遗漏了一些东西，但是从您的解释以及您向我们展示的 SQL 代码来看，您似乎只有一个包含从 0 到 100000 的所有数字的单个字段的表。
如果是这种情况，我看不到那张桌子的用处。

如果我是你，如果我正确理解你的需求，你想要的是这样的：

1.  首先，创建如上表，包含从 0 到 100000 的所有运行数字，以及用于确认是否使用该数字的字段。

2.  使用表中已包含的所有数字初始化该`InUse`字段`LineList`，例如：

    ```
    UPDATE Numbers SET InUse = True
    WHERE  Numbers.Number IN (SELECT LineNum FROM LineList) 
    ```

3.  按照以下逻辑顺序编写一个函数`ReserveNumber(NumOfDigits as Integer) As Long`来查找和保留一个 4 位或 5 位空闲号码：

    *   根据`NumOfDigits`（4 或 5）获得查询之一的结果为 `LowestNumber`：

        ```
        SELECT Min(Number) FROM Numbers WHERE Number < 10000 AND NOT InUse
        SELECT Min(Number) FROM Numbers WHERE Number >= 10000 AND NOT InUse 
        ```

    *   保留该特定号码以确保不会再次使用它：

        ```
        UPDATE Numbers SET InUse = True WHERE Number = @LowestNumber 
        ```

    *   返回 `LowestNumber`

4.  每当

**注意**：上面的逻辑有点幼稚，因为它假设没有两个用户会同时尝试获得最小的数字。但是，有可能有一天会发生这种情况。
例如，要消除这种风险，您可以`TakenBy`在表中添加一列`Numbers`并将其设置为当前用户名。然后，在您保留号码后，再次读取以确保`TakenBy`当前客户端确实更新了号码。如果没有，请尝试增益。
有很多方法可以做到这一点。您也可以尝试摆弄桌子锁，但无论您的解决方案如何，请确保您对其进行测试。

# c# - 如何让 System.Net.Http.HttpClient 不遵循 302 重定向？

> ID：10453892
> 
> 赞同：29
> 
> 时间：2012-05-04T18:03:23.137
> 
> 标签：c#, dotnet-httpclient

使用[来自 NuGet 的 HttpClient](http://nuget.org/packages/HttpClient)。

该应用程序使用 client.PostAsync() 发送帖子。我希望它不遵循 302 重定向。

如何？

我想我可以按照[这个答案](https://stackoverflow.com/a/2603837/48082)`AllowAutoRedirect`中的描述进行设置。

但是如何`HttpWebRequest`在 PostAsync() 调用中使用？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-05T18:37:37.727

构造函数的重载之一`HttpClient`需要一个 `WebRequestHandler`参数。该类`HttpClient`使用它 `WebRequestHandler`来发送请求。

该类`WebRequestHandler`提供了一个调用`AllowAutoRedirect` 来配置重定向行为的属性。将此属性设置为 false 指示`HttpClient`不遵循重定向响应。

这是一个小代码示例：

```
WebRequestHandler webRequestHandler = new WebRequestHandler();

webRequestHandler.AllowAutoRedirect = false;

HttpClient httpClient = new HttpClient(webRequestHandler);

// Send a request using GetAsync or PostAsync

Task<HttpResponseMessage> response = httpClient.GetAsync("http://www.google.com"); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-06-20T19:20:10.760

添加到汉斯的答案：

> WebRequestHandler 派生自 HttpClientHandler，但添加了通常仅在完整 .NET 上可用的属性。WebRequestHandler 不包含在 System.Net.Http DLL 中，而是包含在 System.Net.Http.WebRequest DLL 中，因此您必须明确包含它作为参考才能看到它。否则不会出现。

如果您不想添加新的 DLL，您可以选择 HttpClientHandler：

```
 HttpClientHandler clientHandler = new HttpClientHandler();
    clientHandler.AllowAutoRedirect = false; 
```

参考：[https ://blogs.msdn.microsoft.com/henrikn/2012/08/07/httpclient-httpclienthandler-and-webrequesthandler-explained/](https://blogs.msdn.microsoft.com/henrikn/2012/08/07/httpclient-httpclienthandler-and-webrequesthandler-explained/)

# sql-server - SQL 重排序记录

> ID：10453896
> 
> 赞同：3
> 
> 时间：2012-05-04T18:03:37.127
> 
> 标签：sql-server

我有一个需要重新排序且没有间隙的项目列表。它开始于：

```
ID   Sequence
123    1
125    2
155    3
158    4
165    6
170    9 
```

我需要结束（请注意，序列 6 更改为 5，序列 9 更改为 6）

```
ID   Sequence
123    1
125    2
155    3
158    4
165    5
170    6 
```

我试过使用这个更新语句

```
UPDATE  tblA
SET     tblA.Sequence = temp.Sequence
FROM    ( SELECT    id ,
                    ROW_NUMBER() OVER ( ORDER BY Sequence, ID ) AS Sequence
          FROM      dbo.tblA
        ) AS temp 
```

但我最终...

```
ID   Sequence
123    1
125    1
155    1
158    6
165    6
170    6 
```

将 select 语句从更新中拉出会产生正确的结果。将其更改为类似

```
 UPDATE tblA
 SET    tblA.Sequence = temp.NewSequence
 FROM   ( SELECT    id ,
                    ROW_NUMBER() OVER ( PARTITION BY id ORDER BY Sequence, id ) 
                                                               AS NewSequence
          FROM      dbo.tblA
        ) AS temp 
```

产生结果

```
ID   Sequence
123    1
125    1
155    1
158    1
165    1
170    1 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T18:06:51.460

您需要将重新编号的集合与原始集合中的 ID 相关联，否则您将使用临时集合中某些其他 ID 的序列号更新原始 ID：

```
UPDATE a
SET a.Sequence = temp.Sequence
FROM    
    tblA a JOIN
    (
        SELECT id, ROW_NUMBER() OVER (ORDER BY Sequence, ID) AS Sequence
        FROM dbo.tblA
    ) AS temp ON temp.ID = a.ID 
```

# javascript-events - 熔岩灯菜单网址

> ID：10453897
> 
> 赞同：0
> 
> 时间：2012-05-04T18:03:40.940
> 
> 标签：javascript-events

我正在使用来自以下站点的 javascript 插件： [http ://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/](http://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/)

它使用以下内容：`<a href="#">My Link</a>`

HTML 以便在 lavalamp 菜单中设置任意数量的文本按钮。文档头部包含以下代码：

```
<script type="text/javascript">
$(function() {
    $("#3").lavaLamp({
        fx:"backout", 
        speed:600,
        click: function(event, menuItem) {
            //my callback should go here
            return false;
        }
    }); 
});
</script> 
```

menuItem 必须标识被单击的菜单项，但我似乎无法弄清楚如何将外部 html 文档 url 附加到每个单独的 menuItem。任何人都可以理顺我，或者至少给我一个解释这个的教程链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:08:25.243

```
<a href="/url_here/test.html">My Link</a> 
```

`href`在锚点的属性中指定 url 。我猜回调是如果您想执行某些操作，或者可能通过 ajax 加载内容并阻止默认操作。但是，如果您不想要任何这些，那么在链接中指定 url 应该会在点击时将您带到页面。

# objective-c - 将 PickerView 的委托委托给另一个视图

> ID：10453903
> 
> 赞同：1
> 
> 时间：2012-05-04T18:04:22.937
> 
> 标签：objective-c, ios, uipickerview

首先，我想说我才刚刚开始“学习”objective-c。对不起，如果我犯了大错

我试图`-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component`从视图 2 委托给视图 1 ...

查看 1.h：

```
@interface ViewController : UIViewController <PopOverViewControllerDelegate> 
```

查看 1 米：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component{ //stuff here} 
```

查看 2.h：

```
@protocol PopOverViewControllerDelegate <NSObject, UIPickerViewDelegate>
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component;
@end

@interface PopOverViewController : UIViewController <UIPickerViewDataSource> 
```

查看 2 米：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component{

[self.delegate pickerView:categoryPicker didSelectRow:row inComponent:component];

} 
```

这没用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:12:16.330

1.  一个视图成为另一个视图的代表有点奇怪。视图实际上不应该对数据了解太多——控制器通常会做出委托所需的各种决策。

2.  与其让一个委托 (View1) 将选取器的委托消息传递给另一个委托 (View2)，不如让 View2 成为选取器的委托？看起来你让事情变得比他们需要的更复杂。

3.  请告诉我们更多关于这个问题的信息，而不是“它不起作用”。如果它奏效了，你一开始就不会问。告诉我们它是*如何*不起作用的。View2 中的方法是否被调用过？如果是，那么问题出在哪里？如果没有，为什么不呢？View1 中发生了什么导致它不调用 View2？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:13:59.967

要将 传递`delegate`给不同的`class`，您只需将委托设置`UIPickerView`为您的 another `class`。在您的类 2 中定义`delegate`您要处理的方法，并在 .h of `class`2 中确认`UIPicklerView` `delegate`。然后在`class`1 你只需要写这一行 -

```
[pickerView setDelegate:class2]; 
```

上一行`pickerView`是对的引用，`UIPickerView`并且`class2`是对实例的引用`class2`。

另请查看@Caleb 答案。我完全同意他的看法。通过做上述事情，你会让事情变得更复杂。

# c# - C# 覆盖和访问修饰符关键字首选顺序

> ID：10453904
> 
> 赞同：3
> 
> 时间：2012-05-04T18:04:23.447
> 
> 标签：c#, keyword

`override`关键字和方法的访问修饰符（`public`,`private`等）首选哪种顺序？以下两者似乎都可以编译并执行相同的操作：

```
 public override string ToString ()
    {
        return "access modifier first";
    } 
```

```
 override public string ToString ()
    {
        return "override keyword first";
    } 
```

~~在 Java 中，关键字的顺序通常是强制的，因此这种灵活性似乎令人吃惊。~~ 显然，这种灵活性也在 Java 中（`static public void main (String [] args)`工作......）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:07:18.390

ReSharper 是 VS 的一个插件，它提供了一些编码助手，比如扩展的自动完成，它首先放置了访问修饰符。这表明即使 C# 规范更加灵活，大多数人也希望以这种方式看待它。

这很奇怪，因为要对方法使用 ReSharper 的自动完成功能，您需要输入“覆盖”，然后 IntelliSense 会给出可覆盖方法的列表。然后，当您选择一个时，它会重组定义，因此访问修饰符是第一位的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:06:00.017

完全是偏好问题，但`public override string ToString()`更常见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T18:06:29.420

我什至不知道你可以先做`override`。考虑到 Visual Studio 会自动完成`public override`，我会说坚持下去。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T18:07:30.813

真的没什么区别。通常，访问修饰符被指定为函数定义中的第一个关键字。在 VS 中，它通常会为您重新排序关键字。

# ruby-on-rails - fields_for - 加载中的所有记录有很多关系？

> ID：10453906
> 
> 赞同：1
> 
> 时间：2012-05-04T18:04:48.640
> 
> 标签：ruby-on-rails

我想在我的项目中添加一些新任务。该项目目前有超过 1000 个任务。

当我使用 fields_for

```
=form_for @project do |f|
  =f.fields_for :tasks, @project.tasks.build do |task_fields|
    =task_fields.text_field :name 
```

即使表单仅用于一个新任务，它似乎也加载了所有关联的任务。这是 fields_for 的行为方式还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:38:56.617

代替：

```
 =f.fields_for :tasks, @project.tasks.build do |task_fields| 
```

和：

```
 =f.fields_for :tasks, [@project.tasks.build] do |task_fields| 
```

这是一对多的关系，因此您必须提供许多（即：数组）对象。`[obj]`为你做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:35:53.007

> 这是 fields_for 的行为方式还是我遗漏了什么？

如果您正在使用 fields_for 和 accept_nested_attributes_for 等，那么，是的，这就是它应该表现的方式。此范例主要用于同时添加/编辑（项目和任务对象）的情况。

如果您只想一次添加一项任务，我建议您只创建一个任务 MVC，然后将其嵌套在项目资源下。换句话说，通过嵌套它（即../projects/2/tasks/new），您将始终在上下文中拥有一个项目。这里唯一需要注意的是，您必须有一个现有项目才能添加任务（与上面的 fields_for 范例不同）。

如果您还不熟悉嵌套资源，这些[文档](http://guides.rubyonrails.org/routing.html#nested-resources)会有所帮助。

# exception - 英伟达 cuda 推力中止（）调用 find_if

> ID：10453910
> 
> 赞同：1
> 
> 时间：2012-05-04T18:05:08.220
> 
> 标签：exception, nvidia, thrust

我正在尝试执行 Thrust 快速入门指南中的一些示例代码。它贴在下面。让我丧命的是，当我运行它时，每当我点击 find_if 时都会抛出一个异常“R6010 -abort() 已被调用”。

我已经尝试过使用 4.1 和 4.2 运行时。我正在使用最新的 NSight 候选版本（2012 年 5 月 4 日下载）在 Visual Studio 2010 Ultimate 中构建它。我的显卡是 NVidia NVS 3100m。

我可以运行在一个新的 VS 项目（不使用 Thrust）中生成的向量添加示例，它工作正常。然而，添加推力给了我这种奇怪的感觉。

任何建议表示赞赏。

米

```
thrust::device_vector<int> input(4);

input[0] = 0;
input[1] = 5;
input[2] = 3;
input[3] = 7;

thrust::device_vector<int>::iterator iter;

iter = thrust::find_if(input.begin(), input.end(), greater_than_four()); 
iter = thrust::find_if(input.begin(), input.end(), greater_than_ten()); 
```

编辑1

又是一条信息。我正在深入研究这一点，发现在 cudaThreadSynchronize() 期间发现了一个错误。消息是“launch_closure_by_value”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:14:34.603

我想到了。和`__host__`标签`__device__`丢失。

```
struct greater_than_four
{
__host__ __device__
    bool operator()(int x)
    {
        return x > 4;
    }
}; 
```

# wpf - 使用 DataGrid 和 IDataErrorInfo 时出现 WPF 错误？

> ID：10453913
> 
> 赞同：2
> 
> 时间：2012-05-04T18:05:13.167
> 
> 标签：wpf, datagrid, idataerrorinfo

当 DataGrid 中的文本框包含无效数据并被禁用时，我想我偶然发现了 WPF 中的一个错误。

当文本框包含无效数据并被禁用时，我可以通过在包含无效数据的文本框上单击两次、单击行中的另一个元素，然后在包含无效数据的文本框上单击两次来使数据（和绑定？）神奇地消失。我做了一个重现问题的小例子。如果您在 121 上单击两次，在 55 上单击一次，然后在 121 上单击两次，则 121 应该会消失（并且绑定将停止工作？）。任何人都可以确认这是一个错误还是我在做一些愚蠢的事情？

WPF代码：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <DataGrid ItemsSource="{Binding Path=Tests}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Test header">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox IsEnabled="False" Text="{Binding Path=Text, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}">
                        </TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn Header="Test header 2">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox IsEnabled="False" Text="{Binding Path=Text2, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}">
                        </TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

C#代码：

```
using System;
using System.Windows;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public ObservableCollection<Test> Tests {get;set;}

        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = this;
            Tests = new ObservableCollection<Test>();
            Tests.Add(new Test());
        }
    }

    public class Test : INotifyPropertyChanged, IDataErrorInfo
    {
        public string Text { get; set; }
        public string Text2 { get; set; }
        public Test()
        {
            Text = "121";
            Text2 = "55";
        }

        public string Error
        {
            get { return null; }
        }

        public string this[string columnName]
        {
            get { return "WTF!!!"; }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
    }
} 
```

# ruby-on-rails - 使用唯一用户标识符的 Rails 路由

> ID：10453914
> 
> 赞同：0
> 
> 时间：2012-05-04T18:05:17.850
> 
> 标签：ruby-on-rails

当我在我的数据库中创建用户时，它还会创建一个唯一标识符字符串。

在我的路线中，我有：

```
match '/users/:unique_identifer', :to => 'users#show' 
```

这部分工作正常。当我转到 /users/xyz 时，它会将我带到适当用户的显示操作。

但是，当我尝试更新用户记录时，它会将我重定向回 /users/SOMENUMBER，其中 SOMENUMBER 是用户的 ID。这会导致错误，因为控制器中的 show 操作具有：

```
def show
    @user = User.find_by_unique_identifier(params[:unique_identifer])
end 
```

换句话说，show 操作现在只通过唯一标识符而不是用户 ID 来查找用户。

更新动作如下：

```
def update
    @user = User.find_by_unique_identifier(params[:unique_identifer])
    if @user == current_user && @user.update_attributes(params[:user])
      redirect_to @user
    else
      redirect_to @user
    end
 end 
```

如何获取更新操作以重定向到用户的显示操作，但使用适当的链接 (/users/unique_identifier) 而不是 /users/ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:16:05.077

你应该重新定义 to_param （和 from_param 让生活更轻松），它用于为对象生成链接，默认使用 id 字段

所以在你的情况下

```
class User < ActiveRecord::Base
  def to_param
    unique_identifer
  end
end 
```

现在 users_path(@user) 应该给你 /users/your-uniq-identifier

这是很好的示例描述： http: [//apidock.com/rails/v3.1.0/ActiveRecord/Base/to_param](http://apidock.com/rails/v3.1.0/ActiveRecord/Base/to_param)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:07:46.720

尝试这个

```
redirect_to user_path(@user.unique_identifer) 
```

或者

```
redirect_to :action => :show, :unique_identifer => @user.unique_identifer 
```

# android - 在代码中设置 android TextViews 和 Buttons

> ID：10453916
> 
> 赞同：1
> 
> 时间：2012-05-04T18:05:32.407
> 
> 标签：android, android-layout, textview, android-button

因此，我需要为两者添加layout_gravity`TextViews`的`Buttons并获取它们的唯一 ID。有没有办法从代码中添加一个 id？`to my code **inside** the code itself like, dynamically adding them inside a``loop. My problem is setting the``

 `**更新**

`TextViews`我需要and的 id`Buttons`才能进入`R.id`文件夹，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:38:09.440

不，不可能在运行时生成相对于 R.id 的其余部分仍然被认为是唯一的 id，抱歉。您可以使用该方法在 Java 代码中将视图的 ID 设置为您喜欢的任何值`setId()`，但是，这里有一些您可能会考虑的选项：

1.  将动态视图的 ID 设置为 0、1、2、3 甚至 100、101、102、103 等值。您可能已经注意到，R.id 生成的值总是以 0x7F 开头，因此非常您不太可能选择会发生冲突的值。
2.  使用视图的哈希码，例如`view.setId( view.hashCode() )`生成更唯一的 ID。这就是`RadioGroup`它的孩子没有 ID 时的情况。
3.  `res/values/ids.xml`您可以通过创建（[请参阅 SDK 文章](http://developer.android.com/guide/topics/resources/more-resources.html#Id)）提前生成未附加到视图的 R.id 值。然后可以`view.setId(R.id.xxx)`在运行时添加这些。

就您的`layout_gravity`问题而言，这可能是因为以`layout_`XML 为前缀的值`LayoutParams`是实际视图的属性，而不是实际视图的属性。您需要将该值添加到`LayoutParams`对象并在新视图上设置这些参数，例如：

```
Button button;
LinearLayout layout;
LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
lp.gravity = Gravity.CENTER;

//Option #1 to add
layout.addView(button, lp);

//Option #2 to add
button.setLayoutParams(lp);
layout.addView(button); 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T18:09:47.000

```
// sets button properties
    btn = new ImageButton(this);
    btn.setId(id);
    btn.setTag(Image_Name);

    btn.setBackgroundColor(Color.TRANSPARENT);
    btn.setAdjustViewBounds(true);

    btn.setImageBitmap(bmp);

    btn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

        // Implement Click Listener

        }
    }); 
```

你可以像这样的任何组件。`

# php - 如何使用 RESTclient Addon Firefox 为 RESTful api 身份验证设置标头

> ID：10453918
> 
> 赞同：3
> 
> 时间：2012-05-04T18:05:42.213
> 
> 标签：php, rest, yii, restful-authentication

我有这个来自 Yii 示例的代码

```
private function _checkAuth()
{
    // Check if we have the USERNAME and PASSWORD HTTP headers set?
    if(!(isset($_SERVER['HTTP_X_USERNAME']) and isset($_SERVER['HTTP_X_PASSWORD']))) {
        // Error: Unauthorized

        $this->_sendResponse(401);
    }
    $username = $_SERVER['HTTP_X_USERNAME'];
    $password = $_SERVER['HTTP_X_PASSWORD'];
    // Find the user
    $user=User::model()->find('LOWER(username)=?',array(strtolower($username)));
    $this->_sendResponse('200','$username');
    if($user===null) {
        // Error: Unauthorized
        $this->_sendResponse(401, 'Error: User Name is invalid');
    } 

    else if(!$user->validatePassword($password)) {
        // Error: Unauthorized
        $this->_sendResponse(401, 'Error: User Password is invalid');
    }
} 
```

如何设置用于身份验证的标头信息。如何在请求中设置 HTTP_X_USERNAME 和 HTTP_X_PASSWORD；

RESTClient 插件的名称、值和正文？感谢提前

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-14T12:31:58.593

嗨，我已经通过以下服务器端代码解决了这个问题，设置 HTTP 请求标头，就像您已经在客户端所做的那样。

```
private function _checkAuth()
    {
        // Check if we have the USERNAME and PASSWORD HTTP headers set?

        $headers = apache_request_headers();

        if(!(isset($headers['X_'.self::APPLICATION_ID.'_USERNAME']) and isset($headers['X_'.self::APPLICATION_ID.'_PASSWORD']))) {
            // Error: Unauthorized
            $this->_sendResponse(401);
        }

        $username = $headers['X_'.self::APPLICATION_ID.'_USERNAME'];
        $password = $headers['X_'.self::APPLICATION_ID.'_PASSWORD'];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T07:43:57.513

[我了解您的问题（与yii 论坛中的这篇文章](http://www.yiiframework.com/forum/index.php/topic/18412-new-yii-rest-tutorial/page__view__findpost__p__151819)相同）与 RESTClient 插件有关。要在 RESTClient 插件中设置标题：使用“标题”功能：

*   项目清单
*   菜单“标题”
*   '自定义标题'
*   “名称”：X_PASSWORD
*   “价值”：情绪

与 X_USERNAME 相同。

高温下，

JM。

# ruby-on-rails - 通过与 :dependent => :destroy Rails 3.2 的关系删除 has_many 中的对象

> ID：10453919
> 
> 赞同：1
> 
> 时间：2012-05-04T18:05:51.220
> 
> 标签：ruby-on-rails, ruby, database, activerecord

我正在开发一个 Rails 应用程序，用户可以在其中创建项目。有两种类型的用户`Admins`和`Collaborators`. Admins 和 Collaborators `has_many :accounts, through: :account_users`，其中 account_users 是一个连接表。当管理员删除他们的帐户时，我也想删除他们创建的帐户和它的项目，但我无法让它工作。我的模型目前看起来像这样：

```
class Collaborator < User
  [...]  
  has_many :account_users
  has_many :accounts, through: :account_users
  [...]
end

class Admin < User
  has_many :account_users
  has_many :accounts, through: :account_users, :dependent => :destroy
  [...]
end 

class Account < ActiveRecord::Base
  [...]
  belongs_to :admin
  has_many :account_users
  has_many :collaborators, through: :account_users
  [...]
end

class AccountUser < ActiveRecord::Base
  belongs_to :admin
  belongs_to :account
  belongs_to :collaborator
end 
```

当管理员用户删除其帐户时，仅删除联接表和用户表中的行，不会删除他们的项目。

请注意，我使用设计来处理身份验证。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T23:09:47.533

我没有看到项目关联，所以我认为您可以通过以下两种方式之一进行：

```
class Account < ActiveRecord::Base
   after_save :destroy_projects

   private
   def destroy_projects
      self.projects.delete_all if self.destroyed?
   end
end 
```

或者

```
class Account < ActiveRecord::Base
  [...]
  belongs_to :admin
  has_many :account_users
  has_many :collaborators, through: :account_users
  has_many :projects, :dependent => :destroy
  [...]
end 
```

# php - PHPMailer和附件的100K文件限制？

> ID：10453926
> 
> 赞同：1
> 
> 时间：2012-05-04T18:06:29.437
> 
> 标签：php, iis, phpmailer

我正在尝试将文件作为电子邮件附件发送，但由于某种原因，如果文件大于 100k，那么即使我收到电子邮件发送的消息，电子邮件也不会通过。
这也可能是 IIS smtp 设置中对附件的限制，但是当我取消选中限制会话大小和限制邮件大小选项时，它并没有改变任何东西。今晚我可能不得不重新启动服务器...

我不知道这是不是 php.ini 设置，还是什么。

```
<?
$path_of_attached_file = "Images/marsbow_pacholka_big.jpg";

require 'include/PHPMailer_5.2.1/class.phpmailer.php';
try {
    $mail = new PHPMailer(true); //New instance, with exceptions enabled

    $body = $message; //"<p><b>Test</b> another test 3.</p>";

    $mail->AddReplyTo("admin@example.com","Admin");

    $mail->From     = "admin@example.com";
    $mail->FromName = "Admin";

    $mail->AddAddress($to);
    $mail->Subject  = "First PHPMailer Message";
    $mail->AltBody  = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
    $mail->WordWrap = 80; // set word wrap

    $mail->MsgHTML($body);

    $mail->IsHTML(true); // send as HTML
    if($attach){
        $mail->AddAttachment($path_of_attached_file);
    }

    $mail->Send();
    echo 'Message has been sent.';
} catch (phpmailerException $e) {
    echo $e->errorMessage();
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:16:49.183

您的代码实际上并未检查消息是否已发送。您需要更改代码以检查发送方法的返回

```
if ($mail->Send())
  echo 'Message has been sent.';
else
  echo 'Sorry there was an error '.$mail->ErrorInfo; 
```

这应该会给你一个错误消息，说明如果它确实出错了怎么办。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:54:16.903

我可能错了，因为我不使用 IIS，但您提供的代码实际上会使用本机 MTA 而不是 SMTP。据我所知，您必须使用该`IsSMTP()`方法让 PHPMailer 知道您打算使用 SMTP。

像这样的东西：

```
<?
$path_of_attached_file = "Images/marsbow_pacholka_big.jpg";

require 'include/PHPMailer_5.2.1/class.phpmailer.php';
try {
    $mail = new PHPMailer(true); //New instance, with exceptions enabled

    $body = $message; //"<p><b>Test</b> another test 3.</p>";
    $mail->IsSMTP(); // telling the class to use SMTP
    $mail->Host       = "mail.yourdomain.com"; // SMTP server
    $mail->SMTPDebug  = 2;
    $mail->SMTPAuth   = true;                  // enable SMTP authentication
    $mail->Host       = "mail.yourdomain.com"; // sets the SMTP server
    $mail->Port       = 25;                    // set the SMTP port 
    $mail->Username   = "yourname@yourdomain"; // SMTP account username
    $mail->Password   = "yourpassword";        // SMTP account password 

    $mail->AddReplyTo("admin@example.com","Admin");

    $mail->From     = "admin@example.com";
    $mail->FromName = "Admin";

    $mail->AddAddress($to);
    $mail->Subject  = "First PHPMailer Message";
    $mail->AltBody  = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
    $mail->WordWrap = 80; // set word wrap

    $mail->MsgHTML($body);

    $mail->IsHTML(true); // send as HTML
    if($attach){
        $mail->AddAttachment($path_of_attached_file);
    }

    $mail->Send();
    echo 'Message has been sent.';
} catch (phpmailerException $e) {
    echo $e->errorMessage();
}
?> 
```

# php - PHP博客评论不起作用

> ID：10453927
> 
> 赞同：0
> 
> 时间：2012-05-04T18:06:31.833
> 
> 标签：php, mysql, forms, comments, blogs

首先，每当此页面加载时，当没有评论并且提交评论时，我会看到“1969 年 12 月 31 日下午 5:00 发表评论”，当我看到“列数与第 1 行的值计数不匹配”我的表评论看起来像这样

id int(11)
comment_date datetime
first_name varchar(50)
last_name varchar(50)
content varchar(500)
post_id int(11)

```
 <?php require_once('Connections/Main.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form")) {
  $insertSQL = sprintf("INSERT INTO blog_comments (first_name, last_name, content, post_id) VALUES (%s, now(), %s, %s, %s)",
                       GetSQLValueString($_POST['first_name'], "text"),
                       GetSQLValueString($_POST['last_name'], "text"),
                       GetSQLValueString($_POST['content'], "text"),
                       GetSQLValueString($_POST['post_id'], "int"));

  mysql_select_db($database_Main, $Main);
  $Result1 = mysql_query($insertSQL, $Main) or die(mysql_error());
}

$colname_getSinglePost = "-1";
if (isset($_GET['post_id'])) {
  $colname_getSinglePost = $_GET['post_id'];
}
mysql_select_db($database_Main, $Main);
$query_getSinglePost = sprintf("SELECT post_id, post_date, post_img, content, tags, post_title FROM blog_posts WHERE post_id = %s LIMIT 1", GetSQLValueString($colname_getSinglePost, "int"));
$getSinglePost = mysql_query($query_getSinglePost, $Main) or die(mysql_error());
$row_getSinglePost = mysql_fetch_assoc($getSinglePost);
$totalRows_getSinglePost = mysql_num_rows($getSinglePost);

$maxRows_getSingleComments = 20;
$pageNum_getSingleComments = 0;
if (isset($_GET['pageNum_getSingleComments'])) {
  $pageNum_getSingleComments = $_GET['pageNum_getSingleComments'];
}
$startRow_getSingleComments = $pageNum_getSingleComments * $maxRows_getSingleComments;

$colname_getSingleComments = "-1";
if (isset($_GET['post_id'])) {
  $colname_getSingleComments = $_GET['post_id'];
}
mysql_select_db($database_Main, $Main);
$query_getSingleComments = sprintf("SELECT id, first_name, comment_date, last_name, content, post_id FROM blog_comments WHERE post_id = %s", GetSQLValueString($colname_getSingleComments, "int"));
$query_limit_getSingleComments = sprintf("%s LIMIT %d, %d", $query_getSingleComments, $startRow_getSingleComments, $maxRows_getSingleComments);
$getSingleComments = mysql_query($query_limit_getSingleComments, $Main) or die(mysql_error());
$row_getSingleComments = mysql_fetch_assoc($getSingleComments);

if (isset($_GET['totalRows_getSingleComments'])) {
  $totalRows_getSingleComments = $_GET['totalRows_getSingleComments'];
} else {
  $all_getSingleComments = mysql_query($query_getSingleComments);
  $totalRows_getSingleComments = mysql_num_rows($all_getSingleComments);
}
$totalPages_getSingleComments = ceil($totalRows_getSingleComments/$maxRows_getSingleComments)-1;
?> 
```

//邮政编码...

//注释代码=

```
<?php do { ?>
            <div id="comments" style="border-bottom:1px solid #000; margin-bottom:3px;">
            <?php $row_getSingleComments = mysql_fetch_assoc($getSingleComments); ?>
            <div class="single"> 
<span class="author"><?php echo $row_getSingleComments['first_name']; ?> <?php echo $row_getSingleComments['last_name'];?> commented on <?php $phpdate = strtotime($row_getSingleComments['comment_date']);
$mysqldate = date('F j, Y',$phpdate); echo $mysqldate; ?> at <?php $mysqltime = date('g:i A',$phpdate);  echo $mysqltime; ?></span><br />
<?php echo $row_getSingleComments['content']; ?>
</div>
            <?php } while ($row_getSingleComments = mysql_fetch_assoc($getSingleComments)); ?>
          <p>Add a Comment</p>
          <form method="POST" action="<?php echo $editFormAction; ?>" name="form">
            <p> First Name
              <input type="text" name="first_name" />
              <br/>
              Last Name
              <input type="text" name="last_name" />
              <textarea name="content" cols="60" rows="15"></textarea>
            </p>
            <input type="hidden" value="<?php echo $colname_getSinglePost ?>" name="post_id" />
            <input type="submit" name="submit" id="submit" value="Submit" style="float:right;" />
            <input type="hidden" name="MM_insert" value="form" />
          </form>
        </div>
        </div>
        </div>
    </div><!-- end #content -->
<?php mysql_free_result($getSinglePost);

mysql_free_result($getSingleComments);?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:12:42.380

您的 SQL 字段与其输入不匹配。您没有在正确的字段中输入日期，请​​将其更改为：

```
INSERT INTO blog_comments (first_name, comment_date, last_name, content, post_id) VALUES (%s, now(), %s, %s, %s) 
```

# ruby-on-rails - Rails has_many 与其他模型的双重关系

> ID：10453928
> 
> 赞同：0
> 
> 时间：2012-05-04T18:06:33.227
> 
> 标签：ruby-on-rails, database, has-many, belongs-to

我试图从一个模型到另一个模型获得两个 has_many 关系。具体来说，我想要：

```
class Driver < Active:Record::Base
  has_many :reservations
  has_many :requested_reservations 
```

和

```
class Reservations < Active:Record::Base
  belongs_to :driver
  belongs_to :requester 
```

第一个是在预订模型上使用 driver_id 的正常 has_many/belongs_to 关系。

但是对于第二个，我希望能够调用`@driver.requested_reservations`and `@reservation.requester`，并让它使用 Reservations 类中的 requester_id 列。我需要在那些 has_many 和 belongs_to 行的末尾放什么才能让它正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:13:17.280

我相信你可以设置类和外键来获得想要的结果。

```
class Driver < Active:Record::Base
  has_many :reservations
  has_many :requested_reservations, class_name: 'Reservation', foreign_key: 'your_id'
  ...
end

class Reservations < Active:Record::Base
  belongs_to :driver
  belongs_to :requester, class_name: 'Driver', foreign_key: 'requester_id'
  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:15:58.513

以前也有人问过类似的问题。有关更多信息，请参阅以下链接：

[Rails 两个模型之间的多重关联](https://stackoverflow.com/questions/5554590/rails-multiple-associations-between-two-models)

[如何使用 ActiveRecord 关联指定 Rails 中模型之间的多个关系](https://stackoverflow.com/questions/1927986/how-to-specify-multiple-relationships-between-models-in-rails-using-activerecord)

# visual-c++ - 在 C++ 中检查条件时的相等运算符

> ID：10453937
> 
> 赞同：1
> 
> 时间：2012-05-04T18:07:15.177
> 
> 标签：visual-c++

这两种情况有区别吗：

`if (a==5)`和`if (5==a)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:09:11.180

不，根本没有区别。

人们过去常常写这个表达式`5==a`，而不是`a==5`这样可以捕获**C/C++**`a=5`上的错误，该表达式完全有效并且总是计算为. 这样，如果程序员（错误地）编写了表达式，那么它将得到编译器错误。**`true``5=a`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T18:12:14.037

两者通常是相同的。

有些人建议将常量放在首位 ( `if (5==a)`)，因为这样，如果您输入错误并遗漏了其中一个`=`to get: `if (5=a)`，编译器将给出错误消息，而`if (a=5)`将编译并执行，但可能不会执行您想要的操作。

一些编译器会对后者发出警告（例如，最近的 gnu 迭代），但其他编译器不会（Visual C++ 属于后者）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T18:12:47.437

如果 'a' 指向一个覆盖 == 的对象，那么理论上你可能会得到不同的结果。**

# php - 为什么 PHP 模板不能从 mySQL 数据库中检索正确的数据？

> ID：10453938
> 
> 赞同：1
> 
> 时间：2012-05-04T18:07:15.473
> 
> 标签：php, mysql

好的，所以我有三个页面：

1.  索引.php
2.  表单.php
3.  发布.php

它基本上是一个职位发布网站，用户通过表单 (form.php) 提交数据，表单数据被放入数据库，然后我将这些数据提取到主页 (index.php) 上的表格中。然后，如果您单击表中的某一行，您将被带到职位发布本身 (posting.php)。这很像一个留言板。你可以在这里看到现场版本：你可以在[http://onepotcooking.com/students/mattsellers/final_project/final_project.php](http://onepotcooking.com/students/mattsellers/final_project/final_project.php)看到现场版本。

所以我遇到的问题是表中的职位链接没有指向他们相应的职位发布。表中的每个职位链接都指向数据库中的同一行...即 id = 1 的行。您会看到，如果您单击职位，URL 是动态的...但是似乎它没有提取正确的数据。前几天我让它工作了，但由于某种原因它不再是......这真是太糟糕了。

我在职称链接周围的代码是：

```
<div class='job_title'>
    <span class='job_title_style'>
        <a href="posting.php?id=<?php echo $row['id']; ?>"><?php echo $row['job_title'];
        </a>
    </span>
</div> 
```

不应该这样做吗？您能给我的任何帮助将不胜感激。

谢谢！

-马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:13:58.817

马特，只是想。据我了解，在提交表单时，报价的链接也会放在 MySQL 中，因此您可以在此处将链接的 ID 部分定义为变量。

如果您在 MySQL 表中没有 URL 列，并且没有在 index.php 上运行查询，则仅发布代码`echo $row['id']`不会给您提供的 id。

# jquery - 处理文档加载后动态加载的 DOM 元素

> ID：10453941
> 
> 赞同：1
> 
> 时间：2012-05-04T18:07:19.010
> 
> 标签：jquery

我目前正在尝试在我的网站 (www.slatewerner.com) 上制作类似灯箱的自定义功能。到目前为止，我的方法是在单击时将图像包装在一个 div 中，然后将其绝对定位在内容流之外，并具有半不透明的灰色背景。我所有的图像，除了登陆图像/状态，都是通过 AJAX 加载的。我面临的问题是我无法使用“灯箱”功能访问新加载的图像。

我的尝试可以在这里找到：[http ://www.slatewerner.com/index_3.1](http://www.slatewerner.com/index_3.1)

我怎样才能让浏览器、jQuery 或任何需要的东西知道这些新图像在 DOM 中？或者我怎样才能重写我的函数，使其对新加载的内容有效？

我的 jQuery（仅灯箱部分）：

```
$(document).ready(function(){
$('#content img').click(function(){
    var img = this;
    var width = img.clientWidth;
    var height = img.clientHeight;
    var imgWidth = -width/2;
    var imgHeight = -height/2;
    $(this).wrap('<div class="box"></div>');
    $('.backdrop, .box').animate({'opacity':'.50'}, 300, 'linear');
    $('.box').animate({'opacity':'1.00'}, 300, 'linear');
    $('.backdrop, .box').css('display', 'block');
    $('.box').css('margin-left', imgWidth);
    $('.box').css('margin-top', imgHeight);
});

$('.close').click(function(){
    close_box();
});

$('.backdrop').click(function(){
    close_box();
});

});

function close_box()
{
$('.backdrop, .box').animate({'opacity':'0'}, 300, 'linear', function(){
    $('.backdrop, .box').css('display', 'none');
});
} 
```

我的 CSS（仅灯箱部分）：

```
.backdrop {
position:absolute;
top:0px;
left:0px;
width:100%;
height:100%;
background:#000;
opacity: .0;
filter:alpha(opacity=0);
z-index:50;
display:none;
}

.box {
position:absolute;
top:50%;
left:50%;
background:#ffffff;
z-index:51;
padding:10px;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
-moz-box-shadow:0px 0px 5px #444444;
-webkit-box-shadow:0px 0px 5px #444444;
box-shadow:0px 0px 5px #444444;
display:none;
}

.close {
float:right;
margin-right:6px;
cursor:pointer;
} 
```

谢谢，

-石板

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:11:59.327

[`.on`](http://api.jquery.com/on/)改为使用绑定您的点击事件处理程序。这将确保偶数被绑定到当前在 DOM 中的元素和稍后动态插入的元素。

```
$('#content').on('click', 'img', function(){
    var img = this;
    var width = img.clientWidth;
    var height = img.clientHeight;
    var imgWidth = -width/2;
    var imgHeight = -height/2;
    $(this).wrap('<div class="box"></div>');
    $('.backdrop, .box').animate({'opacity':'.50'}, 300, 'linear');
    $('.box').animate({'opacity':'1.00'}, 300, 'linear');
    $('.backdrop, .box').css('display', 'block');
    $('.box').css('margin-left', imgWidth);
    $('.box').css('margin-top', imgHeight);
}); 
```

# cross-compiling - 如何使用 iOS SDK 5.1 编译 expat？

> ID：10453946
> 
> 赞同：2
> 
> 时间：2012-05-04T18:07:41.777
> 
> 标签：cross-compiling, ios5.1, expat-parser

如何使用 iOS SDK 5.1 编译 expat？我尝试从所有较旧的脚本进行调整/升级，但没有任何效果......有人已经这样做了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:55:04.697

我找到了！

我使用了以下脚本： [https ://github.com/x2on/expat-ios](https://github.com/x2on/expat-ios)

问题是编译脚本中使用的命令“xcode-select -print-path”显示“/Developer”而不是正确的完整路径，包括“/Applications/Xcode.app/Contents/Developer”。我只是改变了它，然后它工作了！

最后一个 XCode [SDK 5.1] 将开发者工具和 SDK 的路径移到了 XCode 包内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T22:38:18.860

当尝试使用 XCode 4.6.3 随附的开发人员工具为 iOS6.1 编译时，https://github.com/x2on/expat-ios 上的脚本在[构建](https://github.com/x2on/expat-ios)iOSSimulator 库后停止。iOSDevice 版本未构建。似乎较新的开发人员工具不支持 armv6。

从中删除 armv6`ARCHS="i386 armv6 armv7"`将至少为 armv7 构建库。

# unix - 字典文本文件 UNIX

> ID：10453954
> 
> 赞同：3
> 
> 时间：2012-05-04T18:08:22.260
> 
> 标签：unix, text, dictionary, text-files

谁能告诉我字典文本文件在 UNIX 系统上的位置？或者我在哪里可以获得一个好的字典文本文件？我目前一直在使用来自 SUN 的文本文件，但它包含不带句点的缩写（否则我可以删除它们）。有人能指出我正确的方向吗？我似乎在 Mac 开发人员词典工具上也找不到任何有用的东西。我正在寻找只包含英文单词、没有缩写词和专有名词的东西。这是一个文字游戏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T18:13:30.137

试试`/usr/dict/words`,`/usr/share/dict/`或`/var/lib/dict/`.

或者谷歌“linux字典文本”或“linux单词”并找到：

[http://www.linuxquestions.org/questions/linux-newbie-8/dictionary-file-in-linux-652559/](http://www.linuxquestions.org/questions/linux-newbie-8/dictionary-file-in-linux-652559/)
[http://en.wikipedia.org/wiki/Words_(Unix](http://en.wikipedia.org/wiki/Words_(Unix) )
*等。*

# sharepoint - SharePoint 2007：在没有 Designer 的情况下创建或添加区域

> ID：10453956
> 
> 赞同：0
> 
> 时间：2012-05-04T18:08:24.957
> 
> 标签：sharepoint, sharepoint-2007

任何人都可以提供说明或 URL 以在没有 Designer 的情况下将新区域添加到 SharePoint 网站吗？

现在，我有一个只有左右区域的站点，我想在左右区域上方添加一个“顶部”区域。

我可以去站点设置中添加新区域吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:04:07.447

您实际上是在谈论一个页面，而不是一个站点。答案是不。您可以做的是基于适合您需要的模板创建一个 Web 部件页面。

# java - 访问 Tomcat 中的详细日志

> ID：10453960
> 
> 赞同：6
> 
> 时间：2012-05-04T18:08:40.497
> 
> 标签：java, eclipse, tomcat, logging

在 Eclipse 中执行一个小型应用程序时，我从通过 Eclipse 本身运行的 Tomcat 服务器收到 Http Status 500 错误...

```
HTTP Status 500 -   

--------------------------------------------------------------------------------  

type Exception report  

message   

description The server encountered an internal error () that prevented it from fulfilling this request.  

exception   

java.lang.NullPointerException  
    org.apache.struts2.impl.StrutsActionProxy.getErrorMessage   (StrutsActionProxy.java:69)  
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:185)  
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)  
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)  
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)  
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:500)  
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434)  

 note The full stack trace of the root cause is available in the Apache Tomcat/7.0.8 logs. 
```

来自服务器的这条消息说错误是由“NullPointerException”引起的。最后一行说“完整的堆栈跟踪在 Apache Tomcat/7.0.8 日志中可用。我检查了在我的工作区中创建的日志（ ${catalina.base} 设置为我的工作区中的一个文件夹）但日志没有' t 提供有关“NullPointerException”的任何详细信息。日志中唯一存在的是...

```
0:0:0:0:0:0:0:1 - - [03/May/2012:15:19:16 +0530] "GET /KurniawanChap02Struts/ HTTP/1.1" 500 1789 
```

我也尝试过提高“日志记录级别”，但即使这样也无济于事。我应该怎么做才能访问服务器的详细日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:24:41.283

当我使用不同版本的 Apache Commons 时，我遇到了一些类似的错误。为了获得有关这些错误的更多详细信息，我将 Tomcat 的默认 loggind 更改为[log4j](http://logging.apache.org/log4j/1.2/)。[您可以在Apache Tomcat 7 (7.0.27) - Logging in Tomcat](http://tomcat.apache.org/tomcat-7.0-doc/logging.html)中查看详细说明

这是我正在使用的 xml 示例`log4j`：

```
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
  <appender name="STDOUT" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d %-5p (%c.java:%L).%M - %m%n" />
    </layout>
  </appender>
  <!-- CATALINA -->
  <logger name="org.apache.catalina.session">
    <level value="INFO" />
  </logger>
  <!-- TOMCAT -->
  </logger>
  <logger name="org.apache.jasper.compiler">
     <level value="INFO" />
  </logger>
  <!-- COMMONS -->
  <logger name="org.apache.commons.digester">
     <level value="INFO" />
  </logger>
  <root>
    <priority value="TRACE" />
    <appender-ref ref="STDOUT" />
  </root>
</log4j:configuration> 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T11:44:07.600

我有同样的问题。我删除了**properties->Java Build Path->Projects**中引用的未使用项目。它表明 xyz(project Name) 丢失。我删除了xyz。

有时您可以检查**properties->Java Build Path->libraries**是否缺少任何 jar。如果是这样，您可以从类路径中添加该 jar。

# vb.net - 比较 Linq 到 Sql VB.NET 的 WHERE 子句中的可空类型

> ID：10453961
> 
> 赞同：0
> 
> 时间：2012-05-04T18:08:54.987
> 
> 标签：vb.net, linq-to-entities

我正在尝试查询该列为 NULL 的记录：

```
 Dim UnassignedSubSvc =
 (From c In CurrentContext.SubService
 Where c.Product.ProductSubServiceId  **is null**
 Select c).ToList() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:22:51.910

```
 Dim UnassignedSubSvc =
 (From c In CurrentContext.SubService
 Where Not c.ProductSubServiceId.HasValue
 Select c).ToList() 
```

可空类型用于`HasValue`指示它们包含非空值，因此只需否定就足够了。

# hbase - 异步基础教程？

> ID：10453965
> 
> 赞同：4
> 
> 时间：2012-05-04T18:09:15.880
> 
> 标签：hbase

StumbleUpon 有一个他们称之为[AsynchBase](https://github.com/stumbleupon/asynchbase)的 HBase 库——他们将它用于他们的[OpenTSDB](http://opentsdb.net/)项目。

作为 HBase 的库，它似乎真的很有用，但我似乎找不到任何关于 AsynchBase 的教程。有谁知道好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:26:16.040

我知道没有明确的教程。OpenTSDB 是如何使用该库的一个很好的例子。[Javadoc](http://tsunanet.net/~tsuna/asynchbase/)中有不错的细节。[在 asynchbase Google group](http://groups.google.com/group/asynchbase)上还可以找到一些正确使用的特定指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T18:39:46.830

我知道这不是你要找的，但这是我放在一起的一个 scala 示例，因为 Java 中的回调语法非常繁重：

*   [https://gist.github.com/2430613](https://gist.github.com/2430613)

# c# - System.net.mail 附件获得 .xml 文件扩展名

> ID：10453966
> 
> 赞同：1
> 
> 时间：2012-05-04T18:09:18.043
> 
> 标签：c#, asp.net, system.net.mail

我必须将几个文件邮寄到一个电子邮件地址。这些文件需要具有 .tcx 文件扩展名。这些实际上是 xml 文件（Garmin 自行车日志）。

显然，当收件人收到电子邮件时，附件被命名为 xxxxx.tcx.xml。如何强制邮件程序不更改附件文件名？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net.Mail;
using System.IO;

namespace stravamailer
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            var files = Directory.GetFiles("E:\\JurgenS\\Downloads\\allrides");

            for (int i = 0; i < files.Length; i++)
            {
                MailMessage oMail = new MailMessage();
                oMail.Body = "";
                oMail.From = new MailAddress("jurgen@ccccc.be","Jurgen Stillaert");
                oMail.Subject = "";
                oMail.To.Add(new MailAddress("jurgen@cccc.be"));
                Attachment att = new Attachment(files[i]);
                att.Name = Path.GetFileName(files[i]);
                oMail.Attachments.Add(att);

                SmtpClient oSmtp = new SmtpClient("uit.telenet.be");
                oSmtp.Send(oMail);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:21:19.100

> Attachment 类与 MailMessage 类一起使用。所有消息都包含一个 Body，其中包含消息的内容。除了正文之外，您可能还想发送其他文件。这些作为附件发送并表示为附件实例。要将附件添加到邮件中，请将其添加到 MailMessage.Attachments 集合中。
> 
> 附件内容可以是字符串、流或文件名。您可以使用任何附件构造函数来指定附件中的内容。
> 
> 附件的 MIME Con​​tent-Type 标头信息由 ContentType 属性表示。Content-Type 标头指定媒体类型和子类型以及任何相关参数。使用 ContentType 获取与附件关联的实例。
> 
> MIME Con​​tent-Disposition 标头由 ContentDisposition 属性表示。Content-Disposition 标头指定附件的表示和文件时间戳。仅当附件是文件时才发送 Content-Disposition 标头。使用 ContentDisposition 属性获取与附件关联的实例。
> 
> MIME Con​​tent-Transfer-Encoding 标头由 TransferEncoding 属性表示。

[这里是源](http://msdn.microsoft.com/en-us/library/system.net.mail.attachment.aspx)

您的解决方案在此 MSDN 链接中。你应该试试 MIME Con​​tent-Type。

# c# - 如何使用 XmlReader 将属性值作为 int 获取？

> ID：10453971
> 
> 赞同：1
> 
> 时间：2012-05-04T18:09:50.890
> 
> 标签：c#, xml, compiler-errors, xmlreader

我对 C# 编程很陌生，这是我的第一个问题。我想读取名为 ID 的窗口属性，然后将其解析为 int。

这是我的 XML 文档：

```
<window ID="0">
    <parentID>0</parentID>
    <windowType>0</windowType>
    <windowName>firstWindow</windowName>
    <windowText>My first window</windowText>
    <windowOptions>Option 1; Option 2;</windowOptions>
    <windowActions>Action 1; Action 2;</windowActions>
    <windowExit>Exit Action;</windowExit>
</window> 
```

这是我的 C# 代码，它应该从 XML 文件中读取信息，然后将它们解析为二维数组。

```
string[][] windowResults;
using (XmlReader reader = XmlReader.Create("GUI.xml"))
{
    int windowCount = 0;
    int nodeCount = 0;
    int windowID = 0;

    while (reader.Read())
    {
        if (reader.NodeType == XmlNodeType.Element &&
            reader.Name == "window")
        {
            nodeCount++;
        }
    }
    windowResults = new string[nodeCount][];
    while (reader.Read())
    {
        switch (reader.NodeType)
        {
            case XmlNodeType.Element:
                if (reader.Name == "window")
                {
                    while (reader.MoveToNextAttribute())
                    {
                        int.TryParse(reader.Value, out windowID);
                    }
                }
                break;

            case XmlNodeType.Text:
                switch (reader.Value)
                {
                    case "parentID":
                        windowResults[windowID][1] = reader.Value;
                        break;
                    case "windowType":
                        windowResults[windowID][2] = reader.Value;
                        break;
                    case "windowText":
                        windowResults[windowID][3] = reader.Value;
                        break;
                    case "windowOptions":
                        windowResults[windowID][4] = reader.Value;
                        break;
                    case "windowActions":
                        windowResults[windowID][5] = reader.Value;
                        break;
                    case "windowExit":
                        windowResults[windowID][6] = reader.Value;
                        break;
                }
                break;
            case XmlNodeType.EndElement:
                switch (reader.Name)
                {
                    case "window":
                        windowCount++;
                        break;
                }
                break;
        }
    }
} 
```

目前它给了我以下错误：

> “int”是一种“类型”，但用作“变量”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:21:37.533

同样使用 LINQ to XML：

```
using System.Collections.Generic;
using System.Linq;
using System.Xml.Linq;

private static IEnumerable<Window> ReadWindows(string path)
{
    XDocument doc = XDocument.Load(path);
    return from w in doc.Root.Elements("window")
           select new Window((int)w.Attribute("ID"))
           {
               ParentID = (int?)w.Element("parentID"),
               Type = (string)w.Element("windowType"),
               Name = (string)w.Element("windowName"),
               Text = (string)w.Element("windowText"),
               Options = (string)w.Element("windowOptions"),
               Actions = (string)w.Element("windowActions"),
               Exit = (string)w.Element("windowExit"),
           };
} 
```

将构造以下类的序列：

```
class Window
{
    public Window(int id) { this.ID = id; }

    public int ID { get; private set; }
    public int? ParentID { get; set; }
    public string Type { get; set; }
    public string Name { get; set; }
    public string Text { get; set; }
    public string Options { get; set; }
    public string Actions { get; set; }
    public string Exit { get; set; }
} 
```

# javascript - 灯箱图库问题

> ID：10453975
> 
> 赞同：-2
> 
> 时间：2012-05-04T18:10:09.230
> 
> 标签：javascript, html, gallery, image-gallery

我希望有人可以帮助我解决这个问题......

我希望这 6 张图片中的每一张都成为它自己的画廊，而对于我的生活来说，我会迷失！

这是JS代码：

```
$(function(){
    // lightbox image
    $(".lightbox-image").append("<span></span>");

    $(".lightbox-image").hover(function(){
        $(this).find("img").stop().animate({opacity:0.5}, "normal")
    }, function(){
        $(this).find("img").stop().animate({opacity:1}, "normal")
    });
}); 
```

这是HTML：

```
 <div class="pad_left1">
          <div class="wrapper pad_bot1">
            <div class="cols"> <a href="images/big_img1.jpg" class="lightbox-image" rel="prettyPhoto[group1]" title="Company Logos"><img src="images/page3_img1.png" alt=""></a>

              <p><strong class="font1">Company Logos</strong>???enter text here???<br><br>
</p>
            </div>
            <div class="cols pad_left1"> <a href="images/big_img2.jpg" class="lightbox-image" rel="prettyPhoto[group1]" title="Business Cards"><img src="images/page3_img2.png" alt=""></a>
              <p><strong class="font1">Business Cards</strong>???enter text here???<br>
</p>
            </div>
          </div>
          <div class="wrapper pad_bot1">
            <div class="cols"> <a href="images/big_img3.jpg" class="lightbox-image" rel="prettyPhoto[group1]" title="Photgraphy/Photo Edits"><img src="images/page3_img3.png" alt=""></a>
              <p><strong class="font1">Photography/Photo Edits</strong>???enter text here???<br><br>
</p>
            </div>
            <div class="cols pad_left1"> <a href="images/big_img4.jpg" class="lightbox-image" rel="prettyPhoto[group1]" title="Band Logos/Album Covers"><img src="images/page3_img4.png" alt=""></a>
              <p><strong class="font1">Band Logos/Album Covers</strong>???enter text here???<br>
</p>
            </div>
          </div>
          <div class="wrapper pad_bot1">
            <div class="cols"> <a href="images/big_img5.jpg" class="lightbox-image" rel="prettyPhoto[group1]" title="Random Designs"><img src="images/page3_img5.png" alt=""></a>
              <p><strong class="font1">Random Designs</strong>???enter text here???<br>
</p>
            </div>
            <div class="cols pad_left1"> <a href="images/big_img6.jpg" class="lightbox-image" rel="prettyPhoto[group1]" title="Websites"><img src="images/page3_img6.png" alt=""></a>
              <p><strong class="font1">Websites</strong>???enter text here???<br>
</p>
            </div>
          </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:21:14.193

如果您需要一组画廊，尝试这样做很简单

```
<div>
<a href="images/image-1.jpg" rel="prettyPhoto[group1]">image #1</a>
<a href="images/image-2.jpg" rel="prettyPhoto[group1]">image #2</a>
<a href="images/image-3.jpg" rel="prettyPhoto[group1]">image #3</a>
</div>

<div>
<a href="images/image-4.jpg" rel="prettyPhoto[group2]">image #4</a>
<a href="images/image-5.jpg" rel="prettyPhoto[group2]">image #5</a>
<a href="images/image-6.jpg" rel="prettyPhoto[group2]">image #6</a>
</div> 
```

# ruby-on-rails-3 - 从不同的控制器更新对象时显示表单错误

> ID：10453976
> 
> 赞同：0
> 
> 时间：2012-05-04T18:10:15.207
> 
> 标签：ruby-on-rails-3, forms

`account_settings`我在控制器中有一个表单，它`user`通过`users_controller`. 错误消息没有通过。下面看一下代码。

account_settings/account.html.haml

```
= form_for @user, :url => { :controller => "users", :action => "update", :id => @user.id } do |f|
  - if @user.errors.any?
    .alert.alert-error
      %h4
        Please address the following errors:
      %ul
        - @user.errors.full_messages.each do |msg|
          %li= msg
  form stuff... 
```

account_settings_controller

```
def account
  @user = current_user
end 
```

users_controller

```
def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user])
    flash[:notice] = "User was successfully updated."
  end
  redirect_to :back
end 
```

表单不会更新，但不会传回错误消息。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:16:58.383

发生这种情况是因为您正在返回重定向。该`@user`对象不会在重定向中持续存在。您应该执行以下操作：

```
def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user])
    flash[:notice] = "User was successfully updated."
    redirect_to :back
  else
    render :edit
  end
end 
```

在这里，我们在更新成功时重定向，但如果没有，我们渲染`edit`动作。因此我们可以访问`@user`，并且您的错误将出现在`@user.errors`

# php - 使用 PHP 和 SQL 创建多语句动态表

> ID：10453980
> 
> 赞同：0
> 
> 时间：2012-05-04T18:10:54.447
> 
> 标签：php, sql

我正在尝试使用 PHP 构建一个动态表，以将 MSSQL 数据库中的数据插入到我正在构建的站点的页面中。每个可见行代表一个单独的薪水。每行下方是与其相关的详细信息。这对税收来说很容易，因为每张支票的数据都保存在主表行中。现在我需要添加扣除，问题是，对于每个支票号码，我都会得到多行详细扣除。

我可以在 While 循环中切换 SQL 语句，然后在完成后切换回原始语句吗？

或者这是对某种其他类型的 SQL 巫术的令人困惑的外部连接的工作......

这是我现在拥有的代码示例。

```
 while ($row = mssql_fetch_array($rs))
  {
      $paychecknum =$row['check_no'];
      $paycheckdate=$row['check_date'];
      $netpay=$row['check_amount'];
      $grosspay=$row['gross_pay'];
      $tax=$row['taxes'];
      $deductions=$row['deductions'];
      $fit=$row['fit'];
      $lit=$row['lit'];
      $sit=$row['sit'];
      $fica=$row['fica'];
    echo('<div class="row">');
    echo('<div class="cell">Check Date:');
    echo $paycheckdate;
    echo('</div>');
    echo('<div class="cell">Check Number: ');
    echo $paychecknum;
    echo('</div>');
    echo('<div class="cell">Gross Pay: ');
    echo $grosspay;
    echo('</div>');
    echo('<div class="cell clickable"  onClick="showAmount('.$paychecknum.')"> Taxes: ');
    echo $tax;
    echo('</div>');
    echo('<div class="cell clickable" onClick="showAmount(1'.$paychecknum.')">Deductions: ');
    echo $deductions;
    echo('</div>');
    echo('<div class="cell">Net Pay: ');
    echo $netpay;
    echo('</div>');
    echo('</div>');
    echo('<div class="row hidden" id="'.$paychecknum.'">');
    echo('<div class="cell">Federal Income Tax: ');
    echo $fit;
    echo('</div>');
    echo('<div class="cell">Local Income Tax:  ');
    echo $lit;
    echo('</div>');
    echo('<div class="cell">State Income Tax:  ');
    echo $sit;
    echo('</div>');
    echo('<div class="cell">FICA:  ');
    echo $fica;
    echo('</div>');
    echo ('</div>');
    echo ('<div class="row hidden" id="1'.$paychecknum.'">');
####    echo('<div> Deductions go here');   ######Where I need my details###
    echo('</div>');
    echo ('</div>'); 
```

对于提到的部分，我需要不同查询的结果。是否可以？最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:20:56.127

您可以在`while`循环中执行第二个 SQL 查询来提取扣除项。

例子：

```
$sql1 = "select * from checks";
$result1 = mysql_query($sql1);
while($data1 = mysql_fetch_assoc($result1)){
    // output data

    $sql2 = "select * from deductions where check_id='" . $data1['check_id'] . "'";
    $result2 = mysql_query($sql2);
    while($data2 = mysql_fetch_assoc($result2)){
        //output deduction data
    }

    // output remaining info
} 
```

# objective-c - Objective C 类别和两个类

> ID：10453981
> 
> 赞同：1
> 
> 时间：2012-05-04T18:10:56.987
> 
> 标签：objective-c, objective-c-category

我有 2 节课：

*   `XCALayer`源自`CALayer`
*   `XCATextLayer`源自`CATextLayer`

我创建`XCALayer+FrameMucking.h`了允许我轻松调整`XCALayer`框架的类别。问题是我也想将它用于`XCATextLayer`，但不复制所有代码。是否可以将我的类别同时用于`XCALayer`和`XCATextLayer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:14:06.203

如果您只是更改 的框架，`XCALayer`并且`XCATextLayer`您应该能够将类别添加到，`CALayer`因为`frame`它是 的属性`CALayer`。

# android - 小部件似乎未注册点击

> ID：10453985
> 
> 赞同：0
> 
> 时间：2012-05-04T18:11:22.507
> 
> 标签：android, android-widget

我试图用图像按钮和文本视图构建一个小部件，当我的图像按钮被按下时，我希望它将文本更改为数组中的随机字符串。我有我认为可行的方法，但它不会更新我的文本，也不知道为什么。我的 imagebutton 称为 imagewidgeterica，我的 textview 称为 widget1label。

这是我的代码：

```
package kevin.erica.box;

import java.util.Arrays;
import java.util.Random;

import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ImageButton;
import android.widget.RemoteViews;
import android.widget.TextView;

public class Widget extends AppWidgetProvider {

private static final Random rgenerator = new Random();
private static final Random rgenerator2 = new Random();
private String[] myString1;

  public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
      Resources res = context.getResources();
        myString1 = res.getStringArray(R.array.myArray);

    final int N = appWidgetIds.length;
    Log.i("ExampleWidget",  "Updating widgets " + Arrays.asList(appWidgetIds));
    // Perform this loop procedure for each App Widget that belongs to this
    // provider
    for (int i = 0; i < N; i++) {
      int appWidgetId = appWidgetIds[i];
      // Create an Intent to launch ExampleActivity
      Intent intent = new Intent(context, Widget.class);
      PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
      // Get the layout for the App Widget and attach an on-click listener
      // to the button
      RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widgetlayout);
      views.setOnClickPendingIntent(R.id.imagewidgeterica, pendingIntent);
      // To update a label
      views.setTextViewText((R.id.widget1label, myString1[rgenerator.nextInt(myString1.length)]);
      // Tell the AppWidgetManager to perform an update on the current app
      // widget
      appWidgetManager.updateAppWidget(appWidgetId, views);
    }
  }
} 
```

显现：

```
<receiver android:name=".Widget" android:label="Erica's Box">
  <intent-filter>
    <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
  </intent-filter>
 <meta-data android:name="android.appwidget.provider" android:resource="@xml/erica_info" />
</receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:12:40.507

```
import java.util.Random;

import android.app.Activity;
import android.content.res.Resources;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class TestActivity extends Activity {
/** Called when the activity is first created. */

private String[] myString;
private static final Random rgenerator = new Random();

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

final String[] myString; 

Resources res = getResources();

myString = res.getStringArray(R.array.myArray); 

Button generate = (Button) findViewById(R.id.generate);

generate.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
   String q = myString[rgenerator.nextInt(myString.length)];
   TextView tv = (TextView) findViewById(R.id.textview);
    tv.setText(q);}});
}
} 
```

/res/values/array.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string-array name="myArray"> 
<item>string 1</item> 
<item>string 2</item> 
<item>string 3</item> 
<item>string 4</item> 
<item>string 5</item>
</string-array> 

</resources> 
```

# database - 通用数据库设计：故意创建非规范化表是否被认为“可以”？

> ID：10453995
> 
> 赞同：0
> 
> 时间：2012-05-04T18:12:06.703
> 
> 标签：database, database-design, lookup-tables, normalize

**编辑后：**哇，这个问题很长。请原谅=\

我正在创建一个包含 30 多列的新表。这些列主要由从下拉列表中进行的选择填充，并且它们的选项在很大程度上在逻辑上相关。例如，标记为 Review Period 的下拉菜单将包含每月、半年和每年等选项。我想出了一个可行的方法，通过创建一个原始查找表来将这些选项标准化为数字标​​识符，该表存储诸如每月、半年和每年等值。然后，我将这些原语的 ID 存储在记录表中，并使用视图将该表连接到我的查找表中。有了这个视图，记录表可以包含只有应用程序才能理解的原始数据，同时允许外部应用程序和管理员对视图运行 SQL 并返回转换为友好信息的数据。

只是变得复杂了。现在这些下拉列表将包含非逻辑相关的项目。例如，Review Period 下拉列表现在需要有 NA 和 Manual 选项。这将我的整个分组计划从水中吹了出来。

此应用程序中使用的类似结构已诉诸于跨多个记录存储重复的字符串值。这意味着您可以在表的 ReviewPeriod 列中存储数百条带有字符串“Monthly”的记录。自从我开始在这里工作以来，发生这种情况的想法让我感到畏缩，但现在我开始认为非标准化数据可能是这里的最佳选择。

我能想到的唯一另一种方法是使用我的初始方法，同时允许它是动态的，并支持随时向任何下拉列表不断添加新选项：将数据保存到数据库时，遍历每一个我的业务对象（在本例中为 .NET 类）的属性，并检查原始表中存在的任何字符串值。如果没有，则添加它并返回自动生成的唯一标识符以存储在记录表中。看起来很复杂，但这是为了规范化数据而要经历的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:15:50.547

一切皆有可能。没有人会把你拖进非规范化监狱并吊销你的 DBA 卡。我想说你应该知道规则以及违反规则意味着什么。一旦你掌握了这些，就由你和你的最佳判断来做你认为最好的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T23:30:33.047

> 我想出了一个可行的方法，通过创建一个原始查找表来将这些选项标准化为数字标​​识符，该表存储诸如每月、半年和每年等值。然后，我将这些原语的 ID 存储在记录表中，并使用视图将该表连接到我的查找表中。

用 ID 号替换文本与规范化完全无关。您正在描述替代键而不是自然键的选择。有时代理键是一个不错的选择，而有时代理键是一个糟糕的选择。（通常是一个比你想象的糟糕的选择。）

> 这意味着您可以在表的 ReviewPeriod 列中存储数百条带有字符串“Monthly”的记录。自从我开始在这里工作以来，发生这种情况的想法让我感到畏缩，但现在我开始认为非标准化数据可能是这里的最佳选择。

将字符串“Monthly”存储在多行中与规范化无关。（或使用非规范化。）这似乎与规范化意味着“用 id 号替换所有文本”的概念有关。在您的数据库中存储文本不应该让您畏缩。VARCHAR(n) 的存在是有原因的。

> 我能想到的唯一另一种方法是使用我的初始方法，同时允许它是动态的，并支持随时向任何下拉列表不断添加新选项：将数据保存到数据库时，遍历每一个我的业务对象（在本例中为 .NET 类）的属性，并检查原始表中存在的任何字符串值。如果没有，则添加它并返回自动生成的唯一标识符以存储在记录表中。

让我们非正式地考虑一下这个问题。

外键提供参照完整性。它们的目的是限制列中允许的值。非正式地，引用的表提供了一组有效值。不在该表中的值不允许出现在其他表的引用列中。

但无论用户输入什么，您都将其添加到该有效值表中。

如果您首先要接受用户输入的所有内容，为什么还要使用外键？

这里的主要问题是那些教你（错误地教给你）关系模型的人对你的服务很差。（而且，可能，教你 SQL 的人也同样糟糕。）我希望你能很快摆脱那些错误的观念，并很快取得真正的进步。

# c# - 模拟框架中的未来模拟概念

> ID：10453999
> 
> 赞同：2
> 
> 时间：2012-05-04T18:12:13.363
> 
> 标签：c#, .net, mocking

我正在研究来自 Telerik 的模拟框架 JustMock。看起来还不错。有一个对我们来说非常有趣的特殊功能就是他们所说的 Future Mocking。基本上，您可以模拟在要测试的方法中创建的实例（我知道的错误代码）。

例如 ：

```
public void foo()
{
    var service = new MyService();
    service.DoSomething();
} 
```

因此，此功能将允许模拟该 foo() 方法中使用的 MyService 实例。

我认为 TypeMock 有类似的功能。

我想知道是否有其他框架允许这样做？起订量？模拟？FakeItEasy？他们有这个功能吗？还有其他框架？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T18:20:54.367

您提到的传统框架（Moq、NMock、FakeItEasy）基于松散耦合的生产代码工作。在方法中创建依赖项（而不是通过参数或类构造函数传递它）使得注入假货（存根或模拟）的接缝是不可能的。

JustMock 和 TypeMock 使用分析器 API (IIRC) 来拦截和绕行代码来解决这个问题。执行此操作的另一个框架是[Miscosoft Moles](http://research.microsoft.com/en-us/projects/moles/)，很快将在 Visual Studio 11 中命名为 Fakes。

> ^(**注意：**但请记住，后一种框架更适合无法使用依赖注入的紧密耦合遗留代码。由于框架类似于分析器的性质，使用这些框架进行的测试可能会更慢。如果您可以使用依赖注入并希望单元测试尽可能快，则传统框架更适合。)