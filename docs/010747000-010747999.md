# StackOverflow 问答 10747000-10747999

# javascript - 当我在 iOS 上的网站上输入密码时，如何隐藏最后一位数字

> ID：10747002
> 
> 赞同：5
> 
> 时间：2012-05-25T00:20:50.753
> 
> 标签：javascript, iphone, html, ios, ipad

我的网站上有一个带有密码类型的输入标签。

```
<input type="password"> 
```

在 iPad 或 iPhone 上，当您输入密码时，它始终显示最后一个字母。

我的问题是我用 iPad 做了很多我的网站的演示。

我不希望 iPad 在我输入密码时显示最后一个字母。

我可以通过修改我网站上的内容来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:23:12.247

不，iOS 会显示默认输入的密码的最后一个字母，并且无法禁用它。

出于演示目的，您有几个我能想到的选项。如果使用投影仪或电视输出，请在输入密码时断开设备或关闭屏幕，或者您可以为要演示的任何内容设置“演示”帐户。

通过设置“演示”帐户*（这只是个人想法）*，您可以继续而不会跳过一个节拍*（与关闭屏幕等相比）*，并且如果您的演示文稿的观众看到“演示”帐户登录名/密码应该没什么关系吧？

此外，这不言而喻，如果使用模拟账户，显然要确保它的访问权限有限！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T01:19:08.083

iOS 密码控件可让您将密码粘贴到其中（甚至是 iTunes 商店密码弹出对话框）。

为什么不使用[pwSafe 之](http://app77.com/pwSafe/)类的密码应用程序来存储密码，然后将密码复制到剪贴板，甚至在演示之前将密码预复制到剪贴板中呢？这样您就不必重新发明密码控制，或弄乱模拟账户。

![在此处输入图像描述](../Images/f9361b9eedddd9c8505b84e730f26225.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T00:27:56.683

“最简单”的事情可能是创建一个自定义输入，它监听键并存储实际键值，同时仅在字段中显示 • 或 *。

只需附加一个关键侦听器并为您输入的每个字母显示一个 *，这样您就知道您实际上是在添加输入。

在左侧的字段中输入，我在右侧的字段中显示我正在收集的内容，而仅在您输入的位置显示星号。它需要一些工作来检测退格和大写字母等，但你明白了。小提琴示例：http: [//jsfiddle.net/d94P5/](http://jsfiddle.net/d94P5/)

## 例子

```
<input type="text" id="password">
<input type="text" id="hiddenValue">​ 
```

## Javascript

```
var field = document.getElementById("password")
var realValue = "";
field.onkeydown = function(evt){
    realValue += String.fromCharCode(evt.keyCode)      
    this.value = realValue.replace(/./g,"*");      
    document.getElementById("hiddenValue").value = realValue

    return false;   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T01:00:34.573

或许可以为一个具有严格限制访问权限的虚拟帐户创建一个临时密码，并将您的站点配置为自动禁用该帐户并在您的演示时间结束时使密码过期。

# c# - 将鼠标点击发送到另一个应用程序的 XY 坐标

> ID：10747004
> 
> 赞同：4
> 
> 时间：2012-05-25T00:21:07.473
> 
> 标签：c#, click, window, location, mouse

我正在尝试将模拟鼠标点击发送到另一个应用程序。我了解如何实际发送按键，这不是问题。我需要将鼠标点击发送到另一个应用程序的中心。我可以简单地测试一次并找出坐标并将点击发送到那个XY位置，但是有一个问题......当我移动窗口或调整这个窗口的大小时，XY坐标显然会不一样。

所以我需要找出如何获取窗口的大小及其位置，然后从中找到中心点。有人知道怎么做吗？非常感谢您的任何回复！

这是我发送鼠标点击的代码

```
public void SendLeftClick(int x, int y)
{
    int old_x, old_y;
    old_x = Cursor.Position.X;
    old_y = Cursor.Position.Y;

    SetCursorPos(x, y);
    mouse_event(MouseEventFlag.LeftDown, x, y, 0, UIntPtr.Zero);
    mouse_event(MouseEventFlag.LeftUp, x, y, 0, UIntPtr.Zero);
    SetCursorPos(old_x, old_y);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:39:33.983

您可以使用 GetWindowInfo API：

```
 [return: MarshalAs(UnmanagedType.Bool)]
    [DllImport("user32.dll", SetLastError = true)]
    private static extern bool GetWindowInfo(IntPtr hwnd, ref WINDOWINFO pwi);

    [StructLayout(LayoutKind.Sequential)]
    struct WINDOWINFO
    {
        public uint cbSize;
        public RECT rcWindow;
        public RECT rcClient;
        public uint dwStyle;
        public uint dwExStyle;
        public uint dwWindowStatus;
        public uint cxWindowBorders;
        public uint cyWindowBorders;
        public ushort atomWindowType;
        public ushort wCreatorVersion;

        public WINDOWINFO(Boolean? filler)
            : this()   // Allows automatic initialization of "cbSize" with "new WINDOWINFO(null/true/false)".
        {
            cbSize = (UInt32)(Marshal.SizeOf(typeof(WINDOWINFO)));
        }

    }
    [StructLayout(LayoutKind.Sequential)]
    struct RECT
    {
        public int left, top, right, bottom;
    }

    private void button1_Click_1(object sender, EventArgs e)
    {
        var p = System.Diagnostics.Process.GetProcessesByName("mspaint");

        if (p.Length == 0) return;

        WINDOWINFO wi = new WINDOWINFO(false);
        GetWindowInfo(p[0].MainWindowHandle, ref wi);

        SendLeftClick((wi.rcWindow.left + wi.rcWindow.right) / 2, (wi.rcWindow.top + wi.rcWindow.bottom) / 2);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T14:26:21.923

设置光标位置并在 mouse_event 例程中将 0,0 设置为 X 和 Y：

```
SetCursorPos(x, y);
mouse_event(MouseEventFlag.LeftDown, 0, 0, 0, UIntPtr.Zero);
mouse_event(MouseEventFlag.LeftUp, 0, 0, 0, UIntPtr.Zero); 
```

现在对我来说工作得很好。

# c - 为什么在这个 C 代码中会发生堆栈粉碎？

> ID：10747007
> 
> 赞同：4
> 
> 时间：2012-05-25T00:21:34.850
> 
> 标签：c, stack

对于我缺乏关于 C 中堆栈粉碎的知识，我提前道歉。我正在使用 Code::Blocks 进行 ubuntu 12.04 编辑。我编写了一个简单的 C 程序，它会导致堆栈粉碎，但互联网搜索几乎没有找到关于为什么会发生这种情况的有用建议。

示例 C 代码：

```
#include<stdio.h>

struct point3
    {float x, y, z;};

struct quadPolygon
    {struct point3 vert1, vert2, vert3, vert4;};

int writeLine(const char * objString)
    {FILE *file; file = fopen("aPlane.obj","a+"); fprintf(file,"%s",objString); fclose(file); return 0;};

int writeOBJ(struct quadPolygon myPoly)
    {
    char objString[] = "# plane def\n";  writeLine(objString);

    snprintf(objString, 128, "v %f %f %f \n", myPoly.vert1.x, myPoly.vert1.y, myPoly.vert1.z);  writeLine(objString);
    snprintf(objString, 128, "v %f %f %f \n", myPoly.vert2.x, myPoly.vert2.y, myPoly.vert2.z);  writeLine(objString);
    snprintf(objString, 128, "v %f %f %f \n", myPoly.vert3.x, myPoly.vert3.y, myPoly.vert3.z);  writeLine(objString);
    snprintf(objString, 128, "v %f %f %f \n", myPoly.vert4.x, myPoly.vert4.y, myPoly.vert4.z);  writeLine(objString);

    char objStringSmooth[] = "s off\n";  writeLine(objStringSmooth);
    char objStringFace[] = "f 1 2 3 4\n";  writeLine(objStringFace);
    return 0;
    };

int main()
{
    struct quadPolygon myPoly1 =
    {
    .vert1.x=1.0, .vert1.y=-1.0, .vert1.z=0.0,
    .vert2.x=1.0, .vert2.y=1.0, .vert2.z=0.0,
    .vert3.x=-1.0, .vert3.y=1.0, .vert3.z=0.0,
    .vert4.x=-1.0, .vert4.y=-1.0, .vert4.z=0.0
    };
    writeOBJ(myPoly1);
    return 0;
}; 
```

为什么堆栈粉碎，我该如何更改我的代码以避免这种情况？这与在上面的代码中错误地使用指针有关吗？正如您可能知道的那样，我对 C 有点陌生，但对其他语言有一些编程经验。

我读过“堆栈粉碎实际上是 gcc 用于检测缓冲区溢出攻击的一种保护机制”和“这意味着您以非法方式写入堆栈上的某些变量，很可能是缓冲区溢出的结果”。

感谢您的任何回复/回答。

**更新 -** 根据 Evan 的评论，这里是修改后的代码。也许这可能对其他人有所帮助。

```
#include<stdio.h>

struct point3
    {float x, y, z;};

struct quadPolygon
    {struct point3 vert1, vert2, vert3, vert4;};

int writeOBJ(struct quadPolygon myPoly)
    {
    FILE *file; file = fopen("aPlane.obj","a+");
    fprintf(file,"%s","# plane def\n");
    char objString[128];
    snprintf(objString, sizeof(objString), "v %f %f %f \n", myPoly.vert1.x, myPoly.vert1.y, myPoly.vert1.z);
        fprintf(file,"%s",objString);
    snprintf(objString, sizeof(objString), "v %f %f %f \n", myPoly.vert2.x, myPoly.vert2.y, myPoly.vert2.z);
        fprintf(file,"%s",objString);
    snprintf(objString, sizeof(objString), "v %f %f %f \n", myPoly.vert3.x, myPoly.vert3.y, myPoly.vert3.z);
        fprintf(file,"%s",objString);
    snprintf(objString, sizeof(objString), "v %f %f %f \n", myPoly.vert4.x, myPoly.vert4.y, myPoly.vert4.z);
        fprintf(file,"%s",objString);
    char objStringSmooth[] = "s off\n";
        fprintf(file,"%s",objStringSmooth);
    char objStringFace[] = "f 1 2 3 4\n";
        fprintf(file,"%s",objStringFace);
    fclose(file);
    return 0;
    };

int main()
    {
    struct quadPolygon myPoly1 =
        {
        .vert1.x=1.0, .vert1.y=-1.0, .vert1.z=0.0,
        .vert2.x=1.0, .vert2.y=1.0, .vert2.z=0.0,
        .vert3.x=-1.0, .vert3.y=1.0, .vert3.z=0.0,
        .vert4.x=-1.0, .vert4.y=-1.0, .vert4.z=0.0
        };

    writeOBJ(myPoly1);
    return 0;
    }; 
```

再次感谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T00:26:04.203

这是您的问题所在：

```
char objString[] = "# plane def\n";  writeLine(objString);

snprintf(objString, 128, "v %f %f %f \n", myPoly.vert1.x, myPoly.vert1.y, myPoly.vert1.z);  writeLine(objString);
snprintf(objString, 128, "v %f %f %f \n", myPoly.vert2.x, myPoly.vert2.y, myPoly.vert2.z);  writeLine(objString);
snprintf(objString, 128, "v %f %f %f \n", myPoly.vert3.x, myPoly.vert3.y, myPoly.vert3.z);  writeLine(objString);
snprintf(objString, 128, "v %f %f %f \n", myPoly.vert4.x, myPoly.vert4.y, myPoly.vert4.z);  writeLine(objString); 
```

`objString``strlen("# plane def\n") + 1`是一个包含空格字符的数组。然后你使用`snprintf`那​​个缓冲区传递`128`（它太大了）。

我会这样重写它：

```
writeLine("# plane def\n");

char objString[128]
snprintf(objString, sizeof(objString), "v %f %f %f \n", myPoly.vert1.x, myPoly.vert1.y, myPoly.vert1.z);  writeLine(objString);
snprintf(objString, sizeof(objString), "v %f %f %f \n", myPoly.vert2.x, myPoly.vert2.y, myPoly.vert2.z);  writeLine(objString);
snprintf(objString, sizeof(objString), "v %f %f %f \n", myPoly.vert3.x, myPoly.vert3.y, myPoly.vert3.z);  writeLine(objString);
snprintf(objString, sizeof(objString), "v %f %f %f \n", myPoly.vert4.x, myPoly.vert4.y, myPoly.vert4.z);  writeLine(objString); 
```

**侧点：**

你为什么要为**每一**行打开和关闭文件？真是太低效了……

最好在程序启动时打开文件一次，写下所有行，然后在完成后关闭它。这也将使代码更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:34:27.627

正如 Evan Teran 已经回答的那样。但我想提出几种检测此类问题的方法：

*   尝试编译 using`gcc -fno-stack-protector stack.c`并检查它是否仍然为您提供`stack smash detected`.
*   为 gnu 调试器使用`-g`标志。作为`gcc -g stack.c`然后`gdb a.out`-> `run`。它将在出现问题的地方停止执行。然后你可以输入`where`gdb 来查看哪一行代码是问题的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T00:30:02.463

`FILE*`您可以通过`fopen`.. 确认您获得了有效的

通过显式检查`NULL`指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T00:30:53.403

问题出在以下行：

```
char objString[] = "# plane def\n"; 
```

这只会为字符串“# plane def\n”分配足够的空间，然后，您将更长的字符串写入其中（使用 snprintf）。

既然您已经在使用常量值 128，那么如何：

```
char objString[128];
strcpy(objString, "# plane def\n");
writeLine(objString);
/* continue as before */ 
```

请注意， strcpy 也可以破坏堆栈，因此请确保目标有足够的空间用于您要复制的任何内容。

# jquery-mobile - 从 JQuery Mobile 到 PhoneGap / Cordova

> ID：10747010
> 
> 赞同：1
> 
> 时间：2012-05-25T00:22:34.017
> 
> 标签：jquery-mobile, cordova

我有一个 JQuery 移动应用程序。我现在想将它本地部署到 Android 和 iOS。为了解决这个问题，我想我会使用 PhoneGap。当我运行我的应用程序时，没有任何样式信息出现。控制台窗口中没有错误。我不确定我做错了什么。

有没有关于从 JQuery 移动到电话差距的指南？我看到的一切都是从 Phone Gap 开始并从那里构建的。我在做相反的事情吗？

谢谢大家的坚持。我真的很想把这个应用程序放到 Android 和 iOS 上。我觉得我很接近。但我不知道我做错了什么。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:04:41.153

这只是一个猜测，但你的代码中有这样的东西吗？

```
<link rel="stylesheet"  href="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" /> 
```

如果是这样，那是错误的，如果您希望它在 WebView 中本地运行，则需要将 css 本地存储在 assets 文件夹中。

否则，我建议您首先在电话间隙运行“hello world”，并通过外部本地样式表仅设置一个元素的样式（暂时不用担心 javascript）。这基本上是最困难的部分，知道将文件放在哪里以及如何引用它，因此当您学习该部分时，您不想将自己与当前项目的无关代码混淆。

一旦你弄清楚了那部分，你就可以对 jQuery Mobile 库（包括 css 库和 js 库）做同样的事情了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:32:56.537

您是否正确包含在内？

```
<link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.1.0.min.css" />
<script src="jquery.mobile/jquery-1.7.2.min"></script>
<script src="jquery.mobile/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script> 
```

将 .js 文件和 .css 文件放在 jquery.mobile 文件夹中。

但是如果您使用的是 eclipse，那么您可以直接创建 phonegap 应用程序。

我希望它对你有帮助。

![在此处输入图像描述](../Images/fa4db307084094b2afa46774f414525c.png)

# drupal - Drupal - 形式或内容类型和一般怎么做呢？

> ID：10747018
> 
> 赞同：0
> 
> 时间：2012-05-25T00:23:25.507
> 
> 标签：drupal

（我知道有一个模块，但我正在尝试自己学习）

我基本上想要某种表单或页面，我在其中为管理员创建表单。

因此，管理员可以填写问题并添加多个正确答案。有点像一个有多个答案的多项选择题。

用户将继续回答问题。

做，我创建一个内容类型？我是否使用表单 api 代替。目前不知道该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:04:22.067

据我所知，您可以创建一个自定义的 drupal 模块并使用表单 api 来创建多页表单，并在移动到下一页/表单之前务实地添加验证器以添加正确的结果。

写一个简单的。希望这对您有所帮助，如果您需要帮助，请联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:40:09.687

[测验](http://drupal.org/project/quiz)模块提供了通过 Drupal 创作和管理测验的工具。测验以一系列问题的形式给出，每页仅出现一个问题。然后将分数存储在数据库中。

# ruby-on-rails - Rails DRY 类似的控制器动作

> ID：10747022
> 
> 赞同：1
> 
> 时间：2012-05-25T00:24:53.997
> 
> 标签：ruby-on-rails, dry

我有两个独立的控制器，它们继承自`Admin::UserBaseController`，显示可搜索、可排序的用户表，并使用相同的局部视图。

*   `Admin::UsersController`- 在给定组织的上下文中显示用户。
*   `Admin::OrganizationsController`- 显示系统的所有用户。

下面是 Admin::UsersController 的索引方法：

```
 def index
    q = "%#{params[:search]}%"
    @users = User.where("first_name like ? or last_name like ? or username like ?", q, q, q).order(sort_column + ' ' + sort_direction).paginate(:page => params[:page])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @users }
    end
  end 
```

下面是 Admin::OrganizationsController 的编辑方法：

```
def edit
    @organization = Organization.find(params[:id])
    q = "%#{params[:search]}%"
    @users = @organization.users.where("first_name like ? or last_name like ? or username like ?", q, q, q).order(sort_column + ' ' + sort_direction).paginate(:page => params[:page])
end 
```

`@users`在分配变量的方式上，这两种方法有很多相似之处。`User`这是和的区别`@organization.users`，就是这样。我怎么把它弄干？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:31:05.007

所以这尖叫的是范围。这会将重复的查询删除到模型中的一个位置，并使您能够将范围链接到类和关联上。

```
class User < ActiveRecord::Base
  scope :search_identity, lambda { |identity| where("first_name like ? or last_name like ? or username like ?", identity, identity, identity) }
  scope :user_order, lambda { |column,direction| order("#{column} #{direction}") }
end 
```

然后在 Admin::UsersController

```
q = "%#{params[:search]}%"
@users = User.search_identity( q ).user_order( sort_column, sort_direction).paginate(:page => params[:page]) 
```

在 Admin::OrganizationsController 中：

```
q = "%#{params[:search]}%"
@users = @organization.users.search_identity( q ).user_order( sort_column, sort_direction).paginate(:page => params[:page]) 
```

让一切变得简洁明了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:42:27.543

移动

```
where("first_name like ? or last_name like ? or username like ?", q, q, q).order(sort_column + ' ' + sort_direction).paginate(:page => params[:page]) 
```

到用户中的方法

如：

```
def self.method_name(q,params)
  where("first_name like ? or last_name like ? or username like ?", q, q, q).order(sort_column + ' ' + sort_direction).paginate(:page => params[:page])
end 
```

然后只需使用该方法代替 where

# c# - 当 `x as Y` 工作正常时，为什么这个强制转换无效？

> ID：10747023
> 
> 赞同：5
> 
> 时间：2012-05-25T00:24:59.157
> 
> 标签：c#, casting

我昨天偶然发现了这个奇怪的情况，它`t as D`返回一个非空值，但`(D)t`会导致编译器错误。

由于我很着急，所以我只是使用并继续，但我很`t as D`好奇为什么演员表无效，因为. 谁能解释为什么编译器不喜欢演员表？`t``D`

```
class Program
{
    public class B<T> where T : B<T> { }

    public class D : B<D> { public void M() { Console.Out.WriteLine("D.M called."); } }

    static void Main() { M(new D()); }

    public static void M<T>(T t) where T : B<T>
    {
        // Works as expected: prints "D.M called."
        var d = t as D;
        if (d != null)
            d.M();

        // Compiler error: "Cannot cast expression of type 'T' to type 'D'."
        // even though t really is a D!
        if (t is D)
            ((D)t).M();
    }
} 
```

**编辑：**到处玩，我认为这是一个更清楚的例子。在这两种情况下`t`都被限制为 a`B`并且可能是 a `D`。但是泛型的情况不会编译。在确定强制转换是否合法时，C# 是否只是忽略了通用约束？即使它确实忽略它，`t`仍然可能是`D`; 那么为什么这是编译时错误而不是运行时异常呢？

```
class Program2
{
    public class B { }

    public class D : B { public void M() { } }

    static void Main()
    {
        M(new D());
    }

    public static void M(B t)
    {
        // Works fine!
        if (t is D)
            ((D)t).M();
    }

    public static void M<T>(T t) where T : B
    {
        // Compile error!
        if (t is D)
            ((D)t).M();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:32:28.757

在您的第二个示例中，您可以更改

```
((D)t).M(); 
```

到

```
((D)((B)t)).M(); 
```

您可以从`B`to投射`D`，但不一定从“something that is a `B`”投射到`D`。“Something that is a `B`” 可以是`A`，例如，如果`A : B`。

当您可能在层次结构中从一个子级跳转到另一个子级时，就会出现编译器错误。您可以向上和向下转换层次结构，但不能跨越它。

```
((D)t).M();       // potentially across, if t is an A
((D)((B)t)).M();  // first up the hierarchy, then back down 
```

另请注意，`((D)((B)t)).M();`如果`t`实际上不是`D`. （`is`不过，您的支票应该可以防止这种情况发生。）

（另请注意，在这两种情况下，编译器都不会考虑`if (t is D)`检查。）

最后一个例子：

```
class Base { }
class A : Base { }
class C : Base { }

...
A a = new A();
C c1 = (C)a;         // compiler error
C c2 = (C)((Base)a); // no compiler error, but a runtime error (and a resharper warning)

// the same is true for 'as'
C c3 = a as C;           // compiler error
C c4 = (a as Base) as C; // no compiler error, but always evaluates to null (and a resharper warning) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:35:10.487

将其更改为

```
public static void M<T>(T t) where T : D 
```

如果您想强制 T 必须是 D 类型，这是适当的限制。

如果您的限制将 T 定义为 T 的 D，它将不会编译。

例如：你不能施放`List<int> to int`，反之亦然

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T00:35:32.950

您的模板函数有一个约束，`T`需要`B<T>`.

因此，当您的编译器尝试将`t`类型对象转换`T`为它时，`D`它无法做到。因为`T`是有保证的`B<T>`，但不是`D`。

如果您将约束添加到 require that `T`is `D`，这将起作用。ie`where T: B<T>, D`或者简单地说，这也`where T: D` 保证了，因为继承链。`T``B<T>`

问题的第二部分：当你调用`t as D`它时，它会在运行时进行检查。并且，在运行时，使用多态性，验证`t`可以转换为`D`类型，并且没有错误。

注意：顺便说一句，这段代码太奇怪了。你确定你在做什么？

# javascript - Jquery 日历 MinDate

> ID：10747024
> 
> 赞同：1
> 
> 时间：2012-05-25T00:25:38.597
> 
> 标签：javascript, jquery

这是我的脚本：

```
 $(function () {
        var now = new Date();
        $("#dd").datepicker({ dateFormat: 'dd-mm-yy', minDate: now});
        $("#df").datepicker({ dateFormat: 'dd-mm-yy', minDate: "dd" });
    }); 
```

这里`dd`的 minDate 是当前日期，我还想`df`在字段中添加 minDate 将成为选定的日期`dd`，所以我尝试了薮猫，但在这里没有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:32:59.083

您需要处理第一个日期选择器的[`onSelect`](http://docs.jquery.com/UI/Datepicker#event-onSelect)事件，并相应地更新第二个日期选择器：

```
$("#dd").datepicker({ dateFormat: 'dd-mm-yy', minDate: now,
    onSelect:function(selectedDate) {
        $("#df").datepicker("option","minDate",selectedDate);
    }
}); 
```

[jsFiddle](http://jsfiddle.net/mgibsonbr/TVNGW/)的工作示例

# javascript - 为什么函数变量在 var 后面时未定义？

> ID：10747028
> 
> 赞同：2
> 
> 时间：2012-05-25T00:26:46.240
> 
> 标签：javascript, var

我读过一个好的做法是在每个函数的顶部放置一个定义所有局部变量的 var 语句。以下代码说明了为什么这是一个好主意，因为显然使用变量*后*的 var使其未定义。

**但是有人能告诉我*为什么*会这样吗？**

```
<html>
    <head>
        <script type="text/javascript">
            window.onload = function() {
                var a=1;
                function foo() {
                    //a = 2; //outputs 2,2 because this overwrites the external variable value
                    //var a = 2; //outputs 2,1 because the "var" keyword creates a second variable with local scope which doesn't affect the external variable 
                    console.log(a);
                    var a = 3; //ouputs "undefined,1" ???
                }
                foo();
                console.log(a);
            };
        </script>
    </head>
    <body>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T00:28:21.993

```
function foo() {
  console.log(a);
  var a = 3;
} 
```

相当于

```
function foo() {
  var a;
  console.log(a);
  a = 3;
} 
```

因为在 JavaScript 中变量*声明*被提升但*初始化*器没有。

您可以通过以下示例看到这确实是正确的：

```
e = 0;
function foo() {
  e = 1;
  try {
    throw 2;
  } catch (e) {
    var e = 3;
    alert("In catch " + e);
  }
  alert("Before end of function " + e);
}
foo();
alert("Outside function " + e); 
```

哪个警报

> 在 catch 3
> 函数结束之前 1 函数
> 外部 0

因为变量声明被提升了所以`e`函数外部不会被 改变`e = 1`，但是`e = 3`发生在内部`catch`所以`3`不会影响`e`函数末尾的 ，而是覆盖异常值。

# ruby-on-rails - 如何在没有外部依赖的情况下在 Ruby 中生成图像？

> ID：10747029
> 
> 赞同：10
> 
> 时间：2012-05-25T00:27:12.357
> 
> 标签：ruby-on-rails, ruby, image, maps, heatmap

我想在我的 Rails 应用程序之外使用我自己的数据在 Google 地图上实现热图。为此，我需要根据我的数据为每个地图坐标（平铺）生成叠加图像。

我找到了如何使用 ImageMagick 生成它，但我不想依赖它，因为我计划在多个地方分发我的应用程序，所以我想只使用 Ruby 语言来完成。

请注意，我只需要在一个小的透明正方形上绘制不同颜色的点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T00:43:08.500

我认为[chunky_png](https://github.com/wvanbergen/chunky_png)或[oily_png](https://github.com/wvanbergen/oily_png)将是你最好的选择。它对 ImageMagick 没有外部依赖，并以网络可用格式生成图像。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-05-06T18:18:18.593

这本身就是一个大问题，但却是一个已解决的问题，请参阅 Geoserver 或 Mapserver。

*   [http://docs.geoserver.org/stable/en/user/styling/sld-extensions/rendering-transform.html](http://docs.geoserver.org/stable/en/user/styling/sld-extensions/rendering-transform.html)
*   [http://mapserver.org/development/rfc/ms-rfc-108.html](http://mapserver.org/development/rfc/ms-rfc-108.html)

# vba - Excel VBA 代码仅在 Outlook 可见时有效

> ID：10747034
> 
> 赞同：2
> 
> 时间：2012-05-25T00:28:00.890
> 
> 标签：vba, outlook

```
Set OutApp = CreateObject("Outlook.Application")
MsgBox (OutApp Is Nothing)

On Error GoTo errorHandler
Set OutMail = OutApp.CreateItem(0)
        'OutMail.Parent.Display '****
        On Error Resume Next
        With OutMail
            .To = cell.Value
            .Subject = "Subject"
            .Body = "Body"
            .Se
        End With
        On Error GoTo errorHandler
        Set OutMail = Nothing 
```

如果我想发送电子邮件，我必须取消注释该`OutMail.Parent.Display`行。为什么我应该通过让 Outlook 可见来惹恼用户呢？这是安全设置还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:25:40.820

不，没有必要:) 另外我猜`.Se`是问题中提到的代码中的错字？

这对我有用。

```
Option Explicit

Sub Sample()
    Dim OutApp As Object, OutMail As Object

    On Error GoTo Whoa

    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)

    With OutMail
        .To = cell.Value
        .Subject = "Subject"
        .Body = "Body"

        .Send '<~~ .Display to display
    End With

LetsContinue:
    Set OutMail = Nothing
    Set OutApp = Nothing
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

# javascript - 验证日期格式（如 mm/yyyy.）的正则表达式是什么？

> ID：10747038
> 
> 赞同：1
> 
> 时间：2012-05-25T00:28:33.420
> 
> 标签：javascript, jquery, regex, jquery-validate

什么是用于验证日期格式（如 mm/yyyy）的正则表达式。我是正则表达式的新手

```
$.validator.addMethod(
"customDate",
function(value, element) {
    return value.match(?);
},
"Please enter a date in the format mm/yyyy"
); 
```

任何人都可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T00:54:46.213

扩展 RobG 的功能：

```
function validateDate(s) {
  return /^([1-9]|1[0-2])\/[12]\d{3}$/.test(s);
} 
```

`([1-9]|1[0-2])`检查它是`1`-`9`还是`10`- `12`。 `[12]\d{3}`确保年份是`1`或`2`后跟三个数字（因此在这种情况下有效范围为`1000`- `2999`；如果您需要更具体的值，请更新您的问题。

**编辑** 如果您想要 01-12 的月份值，请将正则表达式更改为：

`/^(0[1-9]|1[0-2])\/[12]\d{3}$/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T00:47:36.563

你对“有效”的标准是什么？是否`/^\d{2}/\d{4}$/`足够或您需要检查月份是否介于 1 和 12 之间？

此外，使用 test 更合适：

```
function validateDate(s) {
    return /^\d{2}\/\d{4}$/.test(s);
} 
```

或更高效的版本（只创建一次正则表达式）：

```
var validateString = (function() {
    var re = /^\d{2}\/\d{4}$/;
    return function(s) { return re.test(s);}
}()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T00:53:56.217

给你：

```
/^[01]?\d\/\d{4}$/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T00:43:47.237

试试这个正则表达式：

```
var regex = /^(\d{2})[\/](\d{4})$/.exec(date); 
```

之后，您可以检查正则表达式子组是否超出范围，例如从现在起 1000 年等。

# find - 最佳 GNU 查找替代品

> ID：10747039
> 
> 赞同：4
> 
> 时间：2012-05-25T00:28:51.263
> 
> 标签：find, command-line-interface, ack, ag, ripgrep

我正在寻找更好的发现。原因是 find 用户界面对我来说不直观（特别是 pruning / -print 样式）并且由于对参数顺序的严格要求而难以包装在函数中。locate / updatedb 不够灵活，无法使用。是否有人愿意分享他们的示例查找包装器或查找替代品（请仅命令行）？

这是我发现不直观的用法的示例：

```
find dir_a dir_b \( -path dir_a/.git -o -path dir_b/out \) -prune -o \( -type f -o -type l \) 
```

在选项之前指定目录对我来说很奇怪，并且很容易忘记修剪的语法。（有些程序使用 --exclude 选项代替。）我认识到这是一个挑剔的点。

这是我在不丢失太多功能的情况下指定一些默认值的最佳尝试：

```
f()
{
  # The trouble is that -regextype must appear after path but before expression.
  # HACK: "-D debugopts" unsupported and -[HLPO] options assumed to before dirs.
  local a=()
  while [[ -n "$1" ]] && ( [[ ! "${1:0:1}" =~ [-!(),] ]] || [[ "${1:0:2}" =~ -[HLPO] ]] )
  do
    a+=("$1")

    # Eliminate arg from @.
    shift
  done

  find -O3 "${a[@]}" -nowarn -regextype egrep "$@"
} 
```

要求对程序中的所有选项有一个完美的理解，以便能够用一些默认值来包装它并且不会失去与普通查找的功能/兼容性，这似乎很愚蠢。

我猜我不会像 GNU 发现的那样标准，但可能会有更好的东西，尽管鲜为人知。

**更新（2013-11-26）：**

*   在 Itay 的建议下，我使用了[ack](http://beyondgrep.com/)大约一年。它对我至少 95% 的搜索非常有效。
*   我最近发现了[Ag](https://github.com/ggreer/the_silver_searcher)，它是 ack 的快速版本。在过去的几周里，它一直运行良好。

**更新（2014-11-23）：**

我强烈推荐[Ag](https://github.com/ggreer/the_silver_searcher)。它工作得很好。仍然有很多次 Find 是必要的，为此我继续寻找一个不错的替代品。虽然毫无疑问很有用，但在我看来，Find 的界面非常过时并且不必要地困难。

**更新（2017-08-04）：**

我现在最强烈推荐[ripgrep](https://github.com/BurntSushi/ripgrep)作为不可或缺的 Ag 替代品。这是一个非常新的工具，但它对 .gitignore 文件的支持大大超过了 Ag 并且在所有其他方面它是等效的或更好的。我继续寻找 Find 替代品。

**更新（2021-11-28）：**

我继续使用并喜欢满足我大部分需求的[ripgrep 。](https://github.com/BurntSushi/ripgrep)对于其他一切，我混合使用 find 和[fd](https://github.com/sharkdp/fd)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:50:59.763

您应该尝试[Ack](http://betterthangrep.com/)，它可以替代`find`and `grep`，并针对使用源代码树进行了优化。

# asp.net-mvc-3 - 用于 Asp.Net MVC3 应用程序的 MongoDB 与 Sqlserver

> ID：10747040
> 
> 赞同：1
> 
> 时间：2012-05-25T00:28:53.587
> 
> 标签：asp.net-mvc-3, mongodb-.net-driver

我正在使用 Asp.Net MVC 3 和 C# 构建一个网站，我对 Sqlserver 非常满意，但考虑使用 MongoDB，因为我认为托管（免费？）该网站对我来说会更便宜。我的网站存储了大量带有标题和内容的用户记录以及登录用户的一些其他数据。我希望对内容进行全文搜索。我想知道 MongoDB 是否适合这个要求.

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:58:02.287

这取决于您的数据结构。MongoDB 是一个面向文档的数据库。对于“普通数据结构”，它比 MS Sql Server 更快。但它仍然存在“加入”功能的大问题。

如果你想为 .NET 项目尝试好的 No-SQL 数据库，RavenDB 也是一个不错的选择 - [http://ravendb.net/](http://ravendb.net/)它和 Mongo 一样快，而且文档数据库没有太多问题（例如，它有很好的方法来处理连接）。但！它不是免费的:)

如果你需要实现全文搜索，Solr [http://lucene.apache.org/solr/](http://lucene.apache.org/solr/)是非常有趣和有用的工具。我们在 Solr.NET 库的几个项目中使用了它[http://code.google.com/p/solrnet/](http://code.google.com/p/solrnet/)好的入门教程在这里 - [http://crazorsharp.blogspot.co.nz/2010/01/full-text -search-using-solr-lucene-and.html](http://crazorsharp.blogspot.co.nz/2010/01/full-text-search-using-solr-lucene-and.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T01:24:47.817

根据我使用 MongoDB 的经验，有一些事情需要考虑。

MongoDB 是一个基于文档的数据库，使用 10gen 的标准驱动程序，您可以直接序列化 POCO 类或将数据存储为无类型文档。

这确实带来了很大的灵活性，因为您可以存储有关用户存储的完整记录并检索它，而无需像使用 SQL Server 那样规范化数据。

话虽如此，与 SQL Server 相比，MongoDB 的全文功能非常有限，有关如何在 Mongo 中进行基本全文搜索的详细信息，请参阅下面的链接。

[http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)

MongoDB 在检索数据时真正发挥了自己的作用，因为它试图将数据库存储在内存中，这使得从中获取数据非常快。

10gen 还在驱动程序中直接实现了 Linq 支持，这使得在开始时查询 Mongo 变得更加容易。您也可以使用 FluentMongo (https://github.com/craiggwilson/fluent-mongo)，它位于 10gen 驱动程序之上，在 Linq 支持方面稍微先进一些。

我对 MongoDB 的体验非常积极，并打算在未来将其用于其他客户项目。

对于托管，我想您至少需要控制台访问权限，以便您可以启动数据库服务并管理任何备份。如果失败，您可以尝试[https://mongohq.com/home](https://mongohq.com/home)之类的东西，它似乎提供了 mongo db 的在线托管。

我希望其中一些有用

# mvvm - 使用 DataForm 和外部保存按钮

> ID：10747043
> 
> 赞同：1
> 
> 时间：2012-05-25T00:29:11.017
> 
> 标签：mvvm, silverlight-4.0, silverlight-5.0, delegatecommand

我有一个带有 AutoCommit = "False" 的 DataForm 和一个绑定到命令 SaveCommand 的外部保存按钮。

如果我希望在未对数据（我正在使用 ViewModel）进行任何更改时禁用 Save 命令，我何时必须执行 SaveCommand.RaiseECanExecuteChanges()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:10:39.367

我通常会覆盖 RaisePropertyChanged 并将我的 CanExecute 谓词设置为 ViewModel 是否脏。

```
class ViewModel : ViewModelBase
{
    public DelegateCommand SaveCommand { get; set; }
    private bool _isDirty;

    public ViewModel()
    {
        SaveCommand = new DelegateCommand(() => OnExecuteSave(), () => CanExecuteSave());
    }

    private void CanExecuteSave()
    {
        // do your saving
    }

    private bool CanExecuteSave()
    {
        return !_isDirty;
    }

    protected override void RaisePropertyChanged(string propertyName)
    {
        base.RaisePropertyChanged(propertyName);
        _isDirty == true;
        SaveCommand.RaiseCanExecuteChanged();
    }
} 
```

希望有帮助。

# java - Java Jlabel - 使用 setText 时不显示文本

> ID：10747046
> 
> 赞同：-1
> 
> 时间：2012-05-25T00:29:47.757
> 
> 标签：java, swing, jlabel

修改 lblError 时，我使用的是设置文本。它在我的 try catch 语句中工作得很好。但是当我运行 else 语句并进入 else 语句时...（我已经检查过）setText 不会使标签显示我想要的文本

它有效，此代码已实现：

```
try {
    Schedule newSched = ScheduleReader.read(text);
    for (int i = 0; i <= newSched.getLastFlightTime(); i++) {
        ArrayList<Flight> flightsAtTime = newSched.getFlights(i);

    for (Flight f : flightsAtTime) {
         s.add(f);
        }
    }
    flights= getArrayList(s);
    displaySchedule();
    lblError.setText("");

   } catch (IOException e1) {
    lblError.setText(IO_MESSAGE);
   } catch (FormatException e1) {
    lblError.setText(FORMAT_MESSAGE);
   } catch (DuplicateFlightException e1) {
    lblError.setText(DUPLICATE_FLIGHT_MESSAGE);
   }
} 
```

但是当我这样做时它不起作用：

```
 else{
        lblError.setText(FLIGHT_NOT_READY);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:36:03.097

然后要么 1）永远不会调用 else 语句，要么 2）您在与显示的 JLabel 对象不同的 JLabel 对象上调用该方法。

要测试第一个，请执行以下操作：

```
else{
   System.out.println("else block called");
   lblError.setText(FLIGHT_NOT_READY);
} 
```

要测试第二个，请检查以确保您没有创建包含 JLabel 的类的第二个实例。

否则，如果您仍然卡住，请考虑向我们提供更多信息和代码，因为我认为我们没有足够的能力完全自信地告诉您问题的原因是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:37:32.263

您不一定只调用`setText()`可见标签并使其立即生效 -*特别是*如果您不是从事件处理程序调用它。通常，如果您更改屏幕上显示的组件的外观，则必须调用`validate()`该组件以强制更新布局；在空标签获取新文本的情况下，这肯定是必需的。

编辑

@HovercraftFullOfEels 也对其他可能出错的事情提出了一些很好的建议。

# mysql - JOIN 子句中的 MySQL 逻辑评估是否延迟/短路？

> ID：10747047
> 
> 赞同：10
> 
> 时间：2012-05-25T00:29:57.940
> 
> 标签：mysql, logic, lazy-evaluation, boolean-logic

采用以下表达式：`FALSE AND (expression)`

MySQL 会评估表达式还是一看到就继续`FALSE`？

一些背景上下文——我想通过执行以下操作来加快查询速度：

`JOIN... ON (indexed_column1=indexed_column2 AND non_indexed_column_a=non_indexed_column_b)`

有关我为什么要进行此查询的背景，[请参阅此答案](https://stackoverflow.com/a/10746489/378622)

如果它总是会评估`non_indexed_column_a=non_indexed_column_b`，那么就不会节省任何时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:27:55.183

MySQL 查询优化器尽可能使用索引并使用最严格的索引以消除尽可能多的行。

因此，对于您的查询，它将始终根据第一个索引列过滤记录，然后从非索引列中过滤记录。

同样在查询执行之前，MySQL 消除了总是错误的代码（[死代码](http://dev.mysql.com/doc/internals/en/optimizer-eliminating-dead-code.html)）。

有关详细信息，请参阅：[http ://www.informit.com/articles/article.aspx?p=377652&seqNum=2](http://www.informit.com/articles/article.aspx?p=377652&seqNum=2)

# templates - Google Go 文本模板中范围的最后一个元素的特殊情况处理

> ID：10747054
> 
> 赞同：9
> 
> 时间：2012-05-25T00:30:34.567
> 
> 标签：templates, go

我正在尝试使用 go 的模板系统编写一个看起来像这样的字符串：(p1, p2, p3)，其中 p1, p2, ... 来自程序中的一个数组。我的问题是如何为最后一个（或第一个）元素正确放置逗号。

我输出 (p1, p2, p3, ) 的非工作版本如下所示：

```
package main

import "text/template"
import "os"
func main() { 
    ip := []string{"p1", "p2", "p3"}
    temp := template.New("myTemplate")
    temp,_ = temp.Parse(paramList)
    temp.Execute(os.Stdout, ip)

}

const paramList = 
`{{ $i := . }}({{ range $i }}{{ . }}, {{end}})` 
```

到目前为止，我最好的线索是在以下语句中的[http://golang.org/pkg/text/template/中找到：](http://golang.org/pkg/text/template/)

*如果一个“范围”动作初始化一个变量，该变量被设置为迭代的连续元素。此外，“范围”可以声明两个变量，用逗号分隔：*

```
$index, $element := pipeline 
```

*在这种情况下，$index 和 $element 分别设置为数组/切片索引或映射键和元素的连续值。请注意，如果只有一个变量，则为其分配元素；这与 Go range 子句中的约定相反。建议索引的地方*

这表明可以在迭代中获取索引，但我只是无法弄清楚声明两个变量的范围是什么意思，以及应该在模板中声明这些变量的位置。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T03:02:13.673

请参阅go-nuts 邮件列表中的[此示例](https://groups.google.com/d/msg/golang-nuts/XBScetK-guk/Bh7ZFz6R3wQJ)。这个技巧的一个关键是模板`if`不同于 Go 语言`if`。与需要布尔值的 Go 语言不同，模板可以测试零值。神奇的是`{{if $index}},{{end}}`$index 除了出现在赋值中之外不需要声明。

# javascript - 以下代码的简写或效率

> ID：10747058
> 
> 赞同：2
> 
> 时间：2012-05-25T00:31:13.983
> 
> 标签：javascript, jquery, case, shorthand, performance

这是我在 Stack Overflow 上的第一个问题。我通常通过搜索找到所有答案，但是在编写以下代码后我完全没有动力了。

有没有更有效的方法或速记来编写以下代码？

目前它完全符合我的要求。当您单击单选按钮时，会在该单选按钮旁边加载一个 div。如果您切换单选按钮，它会删除 div 并在该单选按钮旁边创建一个新的。

我对实际编写自己的 JavaScript/jQuery 还是很陌生。我知道 CASE，但我不完全确定这是否是一个好的情况。

任何建议将不胜感激。

```
 jQuery(document).ready(function($) {

var checkedItem = true;

$('form input').click(function(){

    if (checkedItem == true){
        $(this).siblings('div.next').remove('.checked');
        $(this).after('<div class="next">NEXT</div>');
        $(this).siblings('div.next').addClass('checked');

        checkedItem = false;

    }
    else {
        $(this).siblings('div.next').remove('.checked');
        $(this).after('<div class="next">NEXT</div>');
        $(this).siblings('div.next').addClass('checked');

        checkedItem = true;     
    }

});

 });

    <form id="input-form">
<input class="PAD" type="radio" name="Seasons" value="Spring-Fall" /> Spring-Fall<br />
<input class="PAD" type="radio" name="Seasons" value="Winter" /> Winter
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:41:05.053

您的“checkedItem”布尔值有什么用途？

似乎这样的函数可以完成同样的事情（参见[http://jsfiddle.net/ZGQf3/3](http://jsfiddle.net/ZGQf3/)）：

```
$('form input[type=radio]').click(function(){
    $('.next').remove('.checked')
    var $this = $(this);
    $this.after('<div class="next">NEXT</div>');
    $this.siblings('.next').addClass('checked');
}); 
```

你可以想象只调用 remove() 取决于你的 DOM 的其余部分是什么样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:43:59.213

如果您使用的是 jQuery 1.7+，您可以：

> HTML

```
<form id="input-form">
    <input class="PAD" type="radio" name="Seasons" value="Spring-Fall" /> 
    Spring-Fall<br />
    <input class="PAD" type="radio" name="Seasons" value="Winter" /> Winter
</form> 
```

> jQuery

```
$(function() {
    $("input[type=radio]").click(function() {
        if ($(this).is(":checked")) {
            $(this).siblings('.next').remove('.checked');
            $(this).after('<div class="next">NEXT</div>');
            $(this).siblings('.next').addClass('checked');
        }
        else { // fyi, this, or your var is kinda useless redundancy, but just for purpose of show, here ya go
            $(this).siblings('.next').remove('.checked');
            $(this).after('<div class="next">NEXT</div>');
            $(this).siblings('.next').addClass('checked');
        };
    });
}); 
```

尽管您可以通过以下方式轻松简化整个事情：

```
$(function() {
    $("input[type=radio]").click(function() {
        $(this).siblings('.next').remove();
        $(this).after($("<div />").addClass("next checked").text("NEXT"));
    });
}); 
```

# javascript - 如何在 PhoneGap 中显示长数据列表

> ID：10747062
> 
> 赞同：4
> 
> 时间：2012-05-25T00:32:43.503
> 
> 标签：javascript, cordova

我们正在开发一个 phonegap 应用程序，并且在显示大小约为 200 或更多的列表时遇到了限制。我们发现 iScroll 在这种尺寸下是一种非常糟糕的体验，并且可能希望在一个列表中显示数千个项目。有没有人知道在没有这种规模限制的情况下在 PhoneGap 中显示列表的任何方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:14:29.797

您可以使用其他滚动条（例如[Scrollview](https://github.com/jquery/jquery-mobile/tree/master/experiments/scrollview)）

或者，如果您的需要接受它，您可以将列表视图切换为可折叠集，以便一次显示更少的项目

# android - Ant 中属性文件中的变量

> ID：10747065
> 
> 赞同：1
> 
> 时间：2012-05-25T00:33:01.343
> 
> 标签：android, ant

我有一个需要为不同环境（例如，UAT、登台、生产等）构建的 Android 应用程序。每个环境都需要不同的属性（例如，URL、包等）。

我想将所有不同的参数放入一个属性文件中，并在每个参数前面加上它匹配的环境。

例如，属性文件将包含`dev.home-url = http://home_dev.com`开发环境和`prod.home-url = http://home.com`生产环境。

我使用以下内容创建一个属性，该属性指向带有前缀的属性文件`params`：

```
<property file="parameters.properties" prefix="params" /> 
```

要使用属性，我使用：

```
${params.home-url} 
```

当我需要将环境的前缀添加到参数时，问题就来了。它最终会看起来像这样，这显然是做不到的：

```
${params.${env-prefix}.home-url} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T01:06:46.737

关于 Ant 的一个常见问题是：

[我该怎么做`<property name="prop" value="${${anotherprop}}"/>`（双重扩展属性）？](http://ant.apache.org/faq.html#propertyvalue-as-name-for-property)

以下 Ant 构建文件的灵感来自该常见问题解答。

**参数.属性**

```
dev.home-url = http://home_dev.com
prod.home-url = http://home.com 
```

**构建.xml**

```
<project default="example">
    <property name="env-prefix" value="dev" />
    <property file="parameters.properties" prefix="params" />

    <macrodef name="propertycopy">
        <attribute name="name" />
        <attribute name="from" />
        <sequential>
            <property name="@{name}" value="${@{from}}" />
        </sequential>
    </macrodef>

    <target name="example">
        <propertycopy name="local.property" from="params.${env-prefix}.home-url" />
        <echo>${local.property}</echo>
    </target>
</project> 
```

执行`example`任务输出：

```
Buildfile: /workspace/build.xml
example:
     [echo] http://home_dev.com
BUILD SUCCESSFUL
Total time: 405 milliseconds 
```

# ruby-on-rails - 你如何通过 SSH 编辑 mongodb？

> ID：10747071
> 
> 赞同：0
> 
> 时间：2012-05-25T00:33:55.907
> 
> 标签：ruby-on-rails, ruby, mongodb

我正在尝试向连接到我最近安装的 Ruby 论坛脚本的 mongodb 中的“自定义域”表添加一个值。我对此完全陌生。我应该如何在 SSH 中进行此编辑？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T00:46:13.710

假设“SSH”是指从外壳...

MongoDB 带有一个名为的命令行程序`mongo`，它允许您在 MongoDB 数据库上连接和执行操作。从命令行只需运行`mongo`...

```
$ mongo
MongoDB shell version: 1.8.4
connecting to: test
> use mydb;
switched to db mydb
> db.mydb.find();
> doc = { "example" : "foo", "blah" : 1234 };
{ "example" : "foo", "blah" : 1234 }
> db.mydb.save(doc); 
```

ETC ...

这里有一个关于如何从 shell 使用 MongoDB 的有用教程：http: [//try.mongodb.org/](http://try.mongodb.org/)

以及更多信息：http: [//learnmongo.com/videos/administration/mongodb-shell/](http://learnmongo.com/videos/administration/mongodb-shell/)

此外，这里有一些关于如何使用它的直接文档，这很像使用 MySQL 的 shell 程序......

[http://www.mongodb.org/display/DOCS/Tutorial](http://www.mongodb.org/display/DOCS/Tutorial)

[http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell](http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell)

# ios - 如何使用 Git 进行图形和声音密集型 iOS 开发？

> ID：10747073
> 
> 赞同：0
> 
> 时间：2012-05-25T00:34:19.447
> 
> 标签：ios, xcode, git

例如，我有一个包含大约 800 个图像和大约 400 个声音片段的游戏。你会如何在这样的项目中使用 Git？

在进行一些研究时，我发现 SO 上的线程表明 Perforce 拥有 100% 的游戏世界，因为它经过精心设计以处理媒体。如果是这样，那又如何？

我遇到了这个但还没有尝试过：[https ://github.com/schacon/git-media](https://github.com/schacon/git-media)

我很高兴收到任何人的来信。

这是我了解 git-media 的文章：http: [//massivelyfun.com/git-for-game-development/](http://massivelyfun.com/git-for-game-development/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:48:40.397

请参阅 [使用 Git 管理大型二进制文件](https://stackoverflow.com/q/540535/1286639)。有诸如使用*子模块*或“ *git附件*”之类的选项

# php - 自定义 WordPress 功能在循环中不起作用

> ID：10747076
> 
> 赞同：0
> 
> 时间：2012-05-25T00:34:44.827
> 
> 标签：php, wordpress, function, metadata

我正在开发这个网站：baikumotor.com

我在里面插入了以下定制函数`functions.php`：

```
function colorStock(){
    function display_color($color)
    {
        echo "<div class=\"colorStockItem\" style=\"background: ". $color .";\"></div>";
    }   

    $postID = get_the_ID();
    $colorStock = get_post_meta($postID, 'colorStock', true); //Get Colours available

    if ($colorStock != ""){
        $myArray = explode(', ', $colorStock);
            //print_r($myArray); 
            //echo $myArray;

        foreach ($myArray as $item){ 

            $css_colors = array('naranja' => '#f58e08', 
                                    'rojo' => '#d40000',
                                    'azul' => '#3086d6',
                                    'blanco' => '#ffffff',
                                    'negro' => '#000000',
                                    'plata' => '#d0d0d0');

            foreach ( $css_colors as $colorname => $value) {
                if ($colorname == $item) {
                    display_color($value);
                } 
            }
        } 
    }

} 
```

它应该显示每辆自行车可用的颜色。通过从每个帖子的自定义 meta_field 中获取颜色的名称（如果可用）。

问题是，每当我将`colorStock();`函数放在产品循环中时，它都会在最新的自行车中正常加载，但是一旦它到达应该从下一个产品加载颜色的地步，它就会停止加载内容（ HTML) 并使页面不完整。

我想知道为什么它会破坏页面加载以及如何解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:40:25.723

我会以不同的方式组织一切。尝试像这样重写你的函数：

```
function colorStock($colors)
{
    $css_colors = array('naranja' => '#f58e08', 
                        'rojo' => '#d40000',
                        'azul' => '#3086d6',
                        'blanco' => '#ffffff',
                        'negro' => '#000000',
                        'plata' => '#d0d0d0');

    $colors = str_replace(' ', '', $colors); //Strip out the spaces first
    $myArray = explode(',', $colors);
    $output = '';

    foreach($css_colors as $colorname => $value){
        if(in_array($colorname, $myArray)
            $output .= '<div class="colorStockItem" style="background: '.$value.';"></div>';
    }
    return $output;
} 
```

然后像这样调用你的循环：

```
<?php
$postID = get_the_ID();
$colorstock = get_post_meta($postID, 'colorStock', true);
if(have_posts()) : while(have_posts()) : the_post();
?>
<!-- YOUR LOOP CONTENTS -->
<?php
//YOUR COLORS
echo $colorstock ? colorStock($colorstock) : 'No colors found';

endwhile;endif;
?> 
```

**附加建议：**为了使事情更有条理，您可能可以完全取消检查颜色数组，并坚持使用样式表中的类名来定义背景颜色：

```
function colorStock($colors)
{
    $colors = str_replace(' ', '', $colors); //Strip out the spaces first
    $myArray = explode(',', $colors);
    $output = '';

    foreach($myArray as $class)
        $output .= '<div class="'.$class.' colorStockItem"></div>';

    return $output;
} 
```

像这样调用：

```
<?php
$postID = get_the_ID();
$colorstock = get_post_meta($postID, 'colorStock', true);
if(have_posts()) : while(have_posts()) : the_post();
?>
<!-- YOUR LOOP CONTENTS -->
<?php
//YOUR COLORS
echo $colorstock ? colorStock($colorstock) : 'No colors found';

endwhile;endif;
?> 
```

然后在您的样式表中：

```
<style type="text/css">
.colorStockItem{background: #000;} /*DEFAULT*/
.naranja{background: #f58e08;}
.rojo{background: #d40000;}
.azul{background: #3086d6;}
.blanco{background: #FFF;}
.negro{background: #000;}
.plata{background: #d0d0d0;}
</style> 
```

但是你可能有你的理由把它分开，所以只做你认为最好的事情。

# c - 如何将C游戏移植到浏览器

> ID：10747077
> 
> 赞同：1
> 
> 时间：2012-05-25T00:34:47.140
> 
> 标签：c, browser, porting

这是我的目标 - 采用 ASCII roguelike Angband 并创建一个在线控制台，用户可以在其中玩游戏服务器端。从我的肤浅的角度来看，这似乎*应该*是可行的——因为有 REPL 控制台可以在线显示多种语言，所以解释语言应该不是问题，对吧？

理想情况下，它就像在服务器上运行游戏并将输出显示到客户端浏览器一样简单。这是可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T01:01:59.330

对于这类事情，最简单且最酷的解决方案可能是[Emscripten](https://github.com/kripken/emscripten)。它实际上是一个 LLVM -> JavaScript 翻译器。您可以使用 C 编译器（使用 llvm-gcc 或 Clang）生成 LLVM 字节码，因此这是从 C 到 JavaScript 的一条相当短的路径。

当然，您仍然需要一些 JavaScript“粘合剂”来​​创建 HTML UI。Emscripten 并没有*那么*神奇。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:27:14.140

作为 Angband 开发团队的一员，我当然有兴趣关注您的进展。您可能想要研究的几种不同方法包括

*   如果您想投入更少的工作并愿意忍受一些安全问题（或进行适当的锁定工作），[Shell in a Box](http://code.google.com/p/shellinabox/)是一个 AJAX 终端仿真器，您可以轻松地使用它来将浏览器连接到 shell。还有其他的。
*   konijn 开始为他的 Angband 变体 Hellband 开发[Javascript 界面。](http://code.google.com/p/hellband/source/browse/trunk/js/?r=946)我不相信它是完整的或稳定的，但它可以作为一个有用的模型。

# haskell - Repa 2 和 3 API 之间的主要区别是什么？

> ID：10747079
> 
> 赞同：11
> 
> 时间：2012-05-25T00:34:58.933
> 
> 标签：haskell, image-processing, parallel-processing, repa, data-parallel-haskell

更具体地说，我有以下看起来无害的小 Repa 3 程序：

```
{-# LANGUAGE QuasiQuotes #-}

import Prelude hiding (map, zipWith)
import System.Environment (getArgs)
import Data.Word (Word8)
import Data.Array.Repa
import Data.Array.Repa.IO.DevIL
import Data.Array.Repa.Stencil
import Data.Array.Repa.Stencil.Dim2

main = do
  [s] <- getArgs
  img <- runIL $ readImage s

  let out = output x where RGB x = img
  runIL . writeImage "out.bmp" . Grey =<< computeP out

output img = map cast . blur . blur $ blur grey
  where
    grey              = traverse img to2D luminance
    cast n            = floor n :: Word8
    to2D (Z:.i:.j:._) = Z:.i:.j

---------------------------------------------------------------

luminance f (Z:.i:.j)   = 0.21*r + 0.71*g + 0.07*b :: Float
  where
    (r,g,b) = rgb (fromIntegral . f) i j

blur = map (/ 9) . convolve kernel
  where
    kernel = [stencil2| 1 1 1
                        1 1 1
                        1 1 1 |]

convolve = mapStencil2 BoundClamp

rgb f i j = (r,g,b)
  where
    r = f $ Z:.i:.j:.0
    g = f $ Z:.i:.j:.1
    b = f $ Z:.i:.j:.2 
```

在我的 2Ghz core 2 duo 笔记本电脑上处理 640x420 图像需要这么多时间：

```
real    2m32.572s
user    4m57.324s
sys     0m1.870s 
```

我知道肯定有什么问题，因为我在使用 Repa 2 的更复杂的算法上获得了更好的性能。在该 API 下，我发现的重大改进来自于在每次数组转换之前添加对“强制”的调用（我理解表示每次调用映射、卷积、遍历等）。我不能完全弄清楚在 Repa 3 中要做的类似事情 - 事实上，我认为新的表现类型参数应该确保在何时需要强制数组时没有歧义？新的一元接口如何适应这个方案？我已阅读 Don S 的精彩教程，但 Repa 2 和 3 API 之间存在一些关键差距，在线 AFAIK 很少讨论。

更简单地说，是否有一种影响最小的方法来解决上述程序的效率问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T11:22:45.490

新的表示类型参数不会在需要时自动强制（这可能是一个很难做到的问题） - 您仍然必须手动强制。在 Repa 3 中，这是通过 computeP 函数完成的：

```
computeP
  :: (Monad m, Repr r2 e, Fill r1 r2 sh e)
  => Array r1 sh e -> m (Array r2 sh e) 
```

我个人真的不明白为什么它是 monadic，因为你也可以使用 Monad Identity：

```
import Control.Monad.Identity (runIdentity)
force
  :: (Repr r2 e, Fill r1 r2 sh e)
  => Array r1 sh e -> Array r2 sh e
force = runIdentity . computeP 
```

所以，现在你的`output`函数可以用适当的强制重写：

```
output img = map cast . f . blur . f . blur . f . blur . f $ grey
  where ... 
```

`f`使用辅助函数`u`来帮助类型推断的缩写：

```
u :: Array U sh e -> Array U sh e
u = id
f = u . force 
```

通过这些更改，加速非常显着——这是意料之中的，因为没有中间强制，每个输出像素最终评估的结果远远超出了必要的范围（中间值不共享）。

您的原始代码：

```
real    0m25.339s
user    1m35.354s
sys     0m1.760s 
```

强制：

```
real    0m0.130s
user    0m0.320s
sys     0m0.028s 
```

使用 600x400 png 进行测试，输出文件是相同的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-27T11:15:13.577

`computeP`是新的`force`。

在 Repa 3 中，您需要在 Repa 2 中使用的`computeP`任何地方使用`force`。

repa-examples 中的[拉普拉斯](http://code.ouroborus.net/repa/repa-head/repa-examples/examples/Laplace/src-repa/SolverStencil.hs)示例与您正在做的类似。您还应该在函数中使用`cmap`而不是plain 。下周初在我的主页上会有一篇论文解释原因。`map``blur`

# ruby-on-rails - 当用户选择外键值时验证嵌套模型 - rails

> ID：10747080
> 
> 赞同：1
> 
> 时间：2012-05-25T00:35:01.363
> 
> 标签：ruby-on-rails, validation

我有一个嵌套模型，Task 属于 Project 所以在我的模型中：

```
class Task < ActiveRecord::Base
  belongs_to :project
  validates :project_id, :presence => true 
```

在我的项目模型中，我有：

```
class Project < ActiveRecord::Base
  has_many :tasks, :dependent => :destroy 
```

现在，我有一个表单来创建一个新任务，用户可以在其中指定 project_id 即任务所属的项目。所以我的表格看起来像这样：

```
 <%= form_for [@project, @task], :remote => true do |f| %>
        <%= f.label :title, "Title" %>
        <%= f.text_field :title %>
        <%= label_tag("Project") %>
        <%= select(nil, :project_id, (get_active_projects).collect {|p| [p.title, p.id]  }, {:prompt => 'Select Project'}) %>

        <%= f.label :description %>
        <%= f.text_area :description %>

       <div class="actions">
       <%= f.submit 'Save' %>
       </div>
    <% end %> 
```

我在验证时遇到的问题是，如果用户没有在表单中选择项目（project_id），我会收到一条错误消息，说在任何验证之前找不到项目，对吗？我希望我的验证在尝试查找项目*之前*执行 project_id 的存在。

```
def create
    @project = Project.find(params[:project_id])

    @task = @project.tasks.new(params[:task])
    @task.update_attributes(:status_id => 2)
    @task.save! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:30:06.017

以您的方式尝试在您的方法中查找项目，如果 project_id 为 nil，它将给出该错误。由于它是 has_many 和 belongs_to 关系，因此足以将 project_id 保存在 Task 中，您不必通过项目创建任务。当您创建的任务不多时，您不需要 form_for 中的项目对象，您可以像这样进行

```
<%= form_for @task, :remote => true do |f| %>
    <%= error_messages_for(@task) %>
    <%= f.label :title, "Title" %>
    <%= f.text_field :title %>
    <%= f.label :project_id %>
    <%= f.select(nil, :project_id, (get_active_projects).collect {|p| [p.title, p.id]  }, {:prompt => 'Select Project'}) %>  (just check the select syntax if i did something wrong)

    <%= f.label :description %>
    <%= f.text_area :description %>

    <div class="actions">
        <%= f.submit 'Save' %>
    </div>
<% end %> 
```

那么在你的控制器方法中应该像这样简单

```
def create
    params[:task][:status_id] = 2
    @task = Task.new(params[:task])
    if @task.save!
       what you want to do if valid
    else
       go back to same page with errors
    end
end 
```

# python - Python（PyPy）的分析中出现的“get（）”函数是什么？

> ID：10747082
> 
> 赞同：1
> 
> 时间：2012-05-25T00:35:14.293
> 
> 标签：python, pypy

我在 PyPy 1.8 上通过“profile.py”来分析我的程序。

```
import profile
profile.run('run()', filename)
import pstats
p = pstats.Stats(filename)
p.sort_stats('time').print_stats(10) 
```

这是分析的输出：

```
Fri May 25 06:40:26 2012    profile.output

         225308 function calls (220308 primitive calls) in 1832700302271.964 seconds

   Ordered by: internal time
   List reduced from 49 to 10 due to restriction <10>

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    57000 15986440103363.266 280463861.463 15986440103363.266 280463861.463 :0(get)
     7000 5696817988322.265 813831141.189 5696817988322.265 813831141.189 :0(getattr)
     ..... 
```

这个结果表明'get（）'是程序的瓶颈。但我根本不知道'get（）'功能。

Python 上的“get()”函数是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:38:48.347

看起来在被分析的代码中某处使用了字典。

```
get(key[, default])

Return the value for key if key is in the dictionary, else default. 
If default is not given, it defaults to None, so that this method 
never raises a KeyError. 
```

请参阅[映射类型 - dict](http://docs.python.org/library/stdtypes.html#mapping-types-dict)和[Python 字典 get() 方法](http://www.tutorialspoint.com/python/dictionary_get.htm)。

# c# - 从另一个线程在 webbrowser 中加载大型 html 文件

> ID：10747083
> 
> 赞同：2
> 
> 时间：2012-05-25T00:35:19.083
> 
> 标签：c#, .net, winforms, browser, webbrowser-control

我正在设计一个小型应用程序，到目前为止，我很幸运能够保持我的线程简单高效，因此 ui 是响应式的。

现在我面临一个问题，我需要在选项卡式 Web 浏览器控件中加载大型本地 html 文件。这些页面的加载会冻结用户界面。我看到很多线程都在谈论生活在另一个线程中的网络浏览器，但所有这些似乎都将网络浏览器排除在主用户界面之外。

我似乎无法让它正常工作。我尝试将 html 文件作为内存流加载到另一个线程中，然后将其提供给 webbrowser，我尝试在另一个线程中创建 webbrowser，但由于经典的线程间异常而关闭，尝试 SupendLayout ...

现在，我知道线程规则指出您不能将在另一个线程中创建的控件添加到来自其他线程的控件...我的问题很简单，有没有办法加载一个大的 html 文件在显示的网络浏览器中这样做时不会冻结用户界面？

如果不需要解决我的问题，则无需成为与线程相关的答案，但这是我最后一次也是一种蹩脚的尝试：

```
 public void openHtml(string input, bool isHtml = true, string tabTitle = "")
    {
        if (!this.loading)
        {
            this.loading = true;

            ManualResetEvent resetEvent = new ManualResetEvent(false);
            Panel panel = new Panel();
            TabPage tab = new TabPage();
            WebBrowser browser = null;

            Thread t = new Thread(() =>
            {
                browser = new WebBrowser();
                browser.CreateControl();
                browser.SuspendLayout();

                resetEvent.Set();

                if (isHtml)
                    browser.DocumentText = input;
                else
                    browser.Navigate(input);

                Application.Run();
            });

            t.IsBackground = true;
            t.SetApartmentState(ApartmentState.STA);
            t.Start();

            resetEvent.WaitOne();

            panel.BorderStyle = System.Windows.Forms.BorderStyle.Fixed3D;
            panel.Controls.Add(browser);
            panel.Dock = DockStyle.Fill;

            browser.ObjectForScripting = new JsScriptInterface(this, browser);
            browser.Dock = DockStyle.Fill;

            tab.Controls.Add(panel);
            tab.Text = tabTitle;

            this.tabs.TabPages.Add(tab);
        }
    } 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:46:17.720

我过去也遇到过类似的问题，可以告诉你没有“真正的”解决方案。如您所知，问题在于 UI 代码必须使用相同的线程，而不太好的线程代码位于您无法控制的控件中（即 WebBrowser）。除非有人使用不会挂起 UI（不太可能）的适当线程编写更好的 WebBrowser 控件，否则我们不会有一个很棒的解决方案。

也就是说，有 2 个选项可能对您有用 - 我只玩过它们一点，还没有分配时间进入生产能力状态。所以也许认为这是一个部分解决方案：/

1.  [在您的控件（ a](http://www.codeproject.com/Articles/9123/Hosting-EXE-Applications-in-a-WinForm-project)，[b](http://do-the-right-things.blogspot.com/2009/07/cross-appdomain-winform-implementation.html)）中托管非 UI 线程控件。
2.  渲染离屏和交换

在选项 1 中，链接讨论了将外部应用程序或来自另一个 AppDomain 的 WinForms 代码托管到您的应用程序/AppDomain 中。虽然我无法为您提供执行此操作所需的（复杂的？）代码，但我确实看到您可以在不同的线程（甚至可能在不同的 AppDomain）上拥有一个 WebBrowser 控件，然后使用所描述的技术在这些链接中显示此控件，就好像它在您的控件上一样。WebBrowser 实际上不会在您的表单上，而是表单的一个区域会有一个覆盖层，它会随之调整大小/移动。我已经用它成功地在 WinForms 应用程序中托管了 Notepad++，调整大小有点笨拙但非常有用。您可以首先尝试在普通 IE (iexplore.exe) 中呈现您的 HTML 文件并将该应用程序托管在您的应用程序中，

选项 2 对我来说非常适合使用 RichTextBox，但我无法让 WebBrowser 以同样的成功响应。我所做的是使用 RichTextBox 生成一个隐藏的表单控件，加载我的数据并让它呈现。在我的主要可见表单上，我展示了另一个 RichTextBox，上面写着“正在加载...”或类似的内容。当 bg RichTextBox 完成后，我会将 Rtf 字段的内容移动到显示的控件中，并在眨眼之间呈现。可悲的是，WebBrowser 并没有公开对其内部数据（即 DOM）的相同级别的控制，但您可能能够在研究中比我能够更深入地使用 mshtml（[c](http://msdn.microsoft.com/en-us/library/aa290341%28v=vs.71%29.aspx)，[d](http://www.codeproject.com/Articles/5452/Microsoft-Web-Browser-Automation-using-C)）。

祝你好运！

# html - 图像在资源管理器上看起来都很乱

> ID：10747088
> 
> 赞同：0
> 
> 时间：2012-05-25T00:36:00.840
> 
> 标签：html, css, internet-explorer

如果您使用 chrome 或 firefox 访问 www.elevatetoronto.com，一切看起来都很好。并且在 Internet Explorer 上看起来一切都很好，但是，图像太薄了，没有人可以看到它们。这些图像使用与 limo 页面上相同的类，这在 ie 上显示得很好。

我不知道怎么了。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:49:41.243

似乎 IE 采用了一个空的图像宽度属性（`width`或`width=""`）并将其更改为`width="1"`
为什么你的图像标签中有一个空的 witdh 属性
删除它们可以解决问题。

# .net - 杀死 .NET 4 任务？

> ID：10747093
> 
> 赞同：5
> 
> 时间：2012-05-25T00:37:17.523
> 
> 标签：.net, multithreading, task-parallel-library

我可以使用[SO 线程](https://stackoverflow.com/questions/1051838/killing-a-thread-c)中讨论的旧且危险的[Thread.Abort()方法杀死](http://msdn.microsoft.com/en-us/library/ty8d3wta.aspx)[.NET 4.0 任务对象](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)吗（双关语并拯救小猫！）

肯尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:45:16.237

该类`Task`旨在使用 .NET 4 的新[协作取消模型](http://msdn.microsoft.com/en-us/library/dd997364.aspx)，而不是依赖于破坏性的“中止”取消样式。

没有直接的方法来取消 a `Task`（例如`Thread.Abort()`，尽管在任何情况下使用起来都*非常糟糕*），但是有一个完整的框架可以提供工具来[请求 Task 取消自身](http://msdn.microsoft.com/en-us/library/dd997396.aspx)。

# apache-camel - 如何在 Camel 的组播 EIP 中为指定的聚合策略提供相关表达式

> ID：10747096
> 
> 赞同：0
> 
> 时间：2012-05-25T00:38:11.717
> 
> 标签：apache-camel

我正在使用 Camel Multicast EIP，并且我的聚合策略指定如下 -

```
<multicast strategyRef="myAggregationStrategy" parallelProcessing="true">
     <to uri="direct1"/>
     <to uri="direct2"/>
</multicast> 
```

如何在 XML DSL 中为我的聚合策略指定correlationExpression、completionTimeout？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:20:39.767

多播不是聚合 EIP 模式。多播的聚合策略是用于聚合来自多播目的地的响应，所以这里有 2 个目的地，因此有 2 个预期的消息要聚合。

您可以指定一个超时选项，以防多播消息之一需要很长时间才能处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:16:24.277

您不需要相关标识符，因为在多播之后指定的聚合器是指多播端点产生的消息。我们可以说存在隐含的“多播”相关标识符。

关于多播超时 - 多播 DSL 允许您指定多播应等待多长时间，直到所有消息都发送到端点并得到处理：

```
from("direct:start")
.multicast(new MyAggregationStrategy())
  .parallelProcessing().timeout(500).to("direct:a", "direct:b", "direct:c")
.end()
.to("mock:result"); 
```

# iphone - 同步调用本机函数

> ID：10747099
> 
> 赞同：2
> 
> 时间：2012-05-25T00:39:55.403
> 
> 标签：iphone, ios, ios5, cordova, phonegap-plugins

我`Phonegap Plugins`用于从 Java Script 调用我的 Objective C 函数。

但从 svn 上看到的源代码看来，异步行为（回调函数）实际上是 iPhone 处理调用的本机方式。

有没有一种方法可以让我在 iOS-iPhone/iPad 应用程序中从我的 JS 进行同步调用？

我的 JS 应该做如下的事情

```
<script type="text/javascript">

function myfunc(){

    var ret = CallMyObjCFunction();

    alert(ret);

}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:43:07.150

一切都需要异步。您在 CDVPluginResult 中将函数的结果发送回 Javascript。

您的 javascript 可能看起来更像

```
function myfunc(){

    function success(result) {
        alert(result);
    }

    function fail() {
        alert("There was a problem");
    }

    cordova.exec(success, fail, "YourPlugin", "CallMyObjCFunction", [])
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:26:37.483

否。iOS 公共 API 中似乎不存在此类同步调用。

# excel - Excel：计算随时间增长百分比的任何公式

> ID：10747100
> 
> 赞同：1
> 
> 时间：2012-05-25T00:39:55.413
> 
> 标签：excel, math, excel-formula

我有 36 列代表尽可能多的月份，这些列中的值显示了我的工作场所中的一堆应用程序使用的 IT 资源单元的数量（每个应用程序是一行）。我想计算每个应用程序的百分比增长。

我意识到我可以简单地使用一个方程：

> (m36 - m1) / m1 * 100

但是，如果 m1 或 m36 代表一个非典型值，这将扭曲结果。相反，我想要一个更一致的平均值。excel中是否有一个公式可以做到这一点，或者有人知道更好的公式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T00:43:07.783

转换为对数域（这样你应该得到一条直线，尽管有异常值），然后应用[线性回归](http://en.wikipedia.org/wiki/Linear_regression)。

# terminal - 箭头键在 php CLI 脚本中不起作用 | 编辑：涉及标准输入

> ID：10747104
> 
> 赞同：3
> 
> 时间：2012-05-25T00:40:24.250
> 
> 标签：terminal, stdin, php

我最近进入了 PHP CLI 的迷人世界。

然后我在 ubuntu 终端上运行脚本，当我按下箭头键时，它没有移动光标，而是打印了转义码 ^[[A^[[B^[[C^[[D.

如果我使用普通终端，则不会出现问题。所以我猜想在我的脚本中有些东西会阻止正常行为。

有人有什么解决办法吗？

谢谢您的帮助！

编辑：

看起来它是标准输入，我用它来捕捉输入，问题！等待 STDIN 输入时，终端显示错误字符！！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:07:44.550

我建议将`fgets(STDIN)`调用替换[`readline()`](http://php.net/manual/en/function.readline.php)为至少在 Linux 环境中可用的函数。请注意，readline 库不包含在 OS X 中，尽管它可以单独安装。

```
// $input = fgets(STDIN);
$input = readline('Input: '); 
```

如果您需要行编辑的唯一原因是从拖放文件路径中删除多余的 ´ 字符，则您始终可以从脚本中的字符串中修剪任何多余的字符。

```
$input = readline('Input: ');
$input = trim($input, '´'); 
```

# ruby-on-rails - Rails ActiveRecord 如何在没有多个查询的情况下链接“where”子句？

> ID：10747106
> 
> 赞同：78
> 
> 时间：2012-05-25T00:40:43.777
> 
> 标签：ruby-on-rails, activerecord

我是一名 PHP 开发人员，正在学习 Ruby on Rails 的强大功能，我喜欢 ActiveRecord，我注意到一些非常有趣的东西，这就是 ActiveRecord 方法如何检测方法链的末尾以执行查询。

```
@person = Person.where(name: 'Jason').where(age: 26)

# In my humble imagination I'd think that each where() executes a database query
# But in reality, it doesn't until the last method in the chain 
```

这个法术是如何运作的？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-05-25T02:21:25.127

该`where`方法返回一个`ActiveRecord::Relation`对象，并且该对象本身不会发出数据库查询。重要的*是*你使用这个对象的地方。

在控制台中，您可能正在这样做：

```
@person = Person.where(name: "Jason") 
```

然后*blammo*它发出一个数据库查询并返回似乎是一个名为 Jason 的每个人的数组。耶，活动记录！

但是你做这样的事情：

```
@person = Person.where(name: "Jason").where(age: 26) 
```

然后发出另一个查询，但这个查询是针对 26 岁的叫 Jason 的人。但它只发出*一个*查询，那么另一个查询去哪儿了？

* * *

正如其他人所建议的那样，发生这种情况是因为该`where`方法返回了一个代理对象。它实际上并不执行查询并返回数据集，除非它被要求这样做。

当您在控制台中运行*任何内容*时，它将输出您运行的任何结果的检查版本。如果您`1`输入控制台并按回车键，您将`1`返回，因为`1.inspect`is `1`。魔法！也一样`"1"`。许多其他对象没有`inspect`定义方法，因此 Ruby 回退到`Object`返回*可怕*的东西的对象`<Object#23adbf42560>`。

每个`ActiveRecord::Relation`对象都`inspect`定义了方法，因此它会引发查询。当您在控制台中编写查询时，IRB 将调用`inspect`该查询的返回值并输出几乎人类可读的内容，例如您看到的数组。

* * *

`inspect`如果您只是在标准 Ruby 脚本中发出此命令，则在检查（通过）对象或通过 using 迭代`each`或`to_a`调用该方法之前不会执行任何查询。

在这三件事中的一件发生之前，您可以在其上链接任意数量的`where`语句，然后当您调用*时*`inspect`，`to_a`或者`each`在其上，它最终将执行该查询。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T00:49:54.707

有许多被称为“踢球者”的方法实际上会触发对数据库的查询。在此之前，他们只是创建 AST 节点，一旦启动，就会生成实际的 SQL（或编译成的语言）并运行查询。

有关如何完成此操作的更深入解释，请参阅[此博客文章](http://railstips.org/blog/archives/2010/10/24/the-chain-gang/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T00:48:41.377

您可以阅读代码，但这里的一个概念是代理模式。

@person 可能不是真正的对象，而是该对象的代理，当您需要一些属性时，活动记录最终会执行查询。Hibernate 也有同样的概念。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-11-28T15:39:26.723

也许为时已晚，但您可以使用哈希：

```
@person = Person.where({name: "Jason", age: 26}) 
```

结果查询：

```
SELECT "person".* FROM "person"  WHERE "person"."name" = 'Jason' AND "person"."age" = 26 
```

# c - C中的UDP广播

> ID：10747107
> 
> 赞同：3
> 
> 时间：2012-05-25T00:40:44.170
> 
> 标签：c, udp, broadcast

当我通过下面的代码广播消息时，主机上的服务器也收到了消息，如何防止主机接收到它发送的消息？

是否可以更改代码上的某些内容或者使用类似的内容会更好`if (strcmp(hostIP == IP_of_the_package) == 0) { <discard the msg>}`？主机从 DHCP 获取 IP，我该如何定义`hostIP as a variable`和如何提取`IP addr of the packet`？

```
void boardcast_msg(char *mess){
   int sock;                        
   struct sockaddr_in broadcastAddr; 
   char *broadcastIP;                
   unsigned short broadcastPort;     
   char *sendString;                 
   int broadcastPermission;         
   int sendStringLen;                

   broadcastIP = "255.255.255.255";  
   broadcastPort = 33333;

   sendString = mess;             /*  string to broadcast */

   if ((sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP)) < 0){
       fprintf(stderr, "socket error");
        exit(1);
   }

   broadcastPermission = 1;
   if (setsockopt(sock, SOL_SOCKET, SO_BROADCAST, (void *) &broadcastPermission,sizeof(broadcastPermission)) < 0){
       fprintf(stderr, "setsockopt error");
       exit(1);
   }

   /* Construct local address structure */
   memset(&broadcastAddr, 0, sizeof(broadcastAddr));   
   broadcastAddr.sin_family = AF_INET;                 
   broadcastAddr.sin_addr.s_addr = inet_addr(broadcastIP);
   broadcastAddr.sin_port = htons(broadcastPort);       

   sendStringLen = strlen(sendString);  

        /* Broadcast sendString in datagram to clients */
        if (sendto(sock, sendString, sendStringLen, 0, (struct sockaddr *)&broadcastAddr, sizeof(broadcastAddr)) != sendStringLen){
            fprintf(stderr, "sendto error");
            exit(1);
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T20:03:06.227

禁用环回，这样您就不会收到自己的数据报：

```
char loopch=0;

if (setsockopt(sd, IPPROTO_IP, IP_MULTICAST_LOOP,
               (char *)&loopch, sizeof(loopch)) < 0) {
  perror("setting IP_MULTICAST_LOOP:");
  close(sd);
  exit(1);
} 
```

来自： http: [//publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp ?topic=%2Frzab6%2Frzab6x1multicast.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=%2Frzab6%2Frzab6x1multicast.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:04:35.940

您走在正确的轨道上，您需要查看收到的包裹是否来自您自己，然后将其丢弃。

获取本地主机地址的最简单方法是使用`gethostname`和`gethostbyname`。但是，如果您的主机有多个主机名或 IP 地址，这些将无法正常工作。搜索 SO（或 Google）以了解如何获取所有可能的网络地址。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T00:51:49.900

您的程序的广播目标端口应该在您的机器上被阻止以避免接收自广播。

在您的`iptables`您可以丢弃（`TCP`或`UDP`根据需要）在该端口上接收到的数据包。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-25T05:21:06.430

`recvfrom`会给你一个地址。用那个。

至于要匹配的地址，在许多系统（可能是您关心的系统）上，您可以使用`getifaddrs`. 但是，这不在 POSIX 中。

# c# - 如何获取列表框中两列项目中第一列的字符串值

> ID：10747109
> 
> 赞同：0
> 
> 时间：2012-05-25T00:41:00.817
> 
> 标签：c#, wpf, listbox

我有一个列表框，它通过数据绑定填充到 ObservableCollection

```
<ListBox Height="198" HorizontalAlignment="Left" Margin="12,45,0,0" Name="listBox_users" VerticalAlignment="Top" Width="204" ItemsSource="{Binding}">
            <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding username}" Name="left" Width="50" />
                    <TextBlock Text="{Binding real_name}" Name="right" Width="100" />
                </StackPanel>
            </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

我想为选择的任何项目获取用户名的字符串值。通常在过去我使用复杂的索引系统完成此操作，但必须有一种方法可以从 listbox_users.Items 或 listbox_users.SelectedItem 执行此操作。我不知道如何在数据绑定的上下文中实现这一点，我对这个概念还是很陌生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:05:29.817

由于您正在使用数据绑定并设置`ItemTemplate`，`ListBox.SelectedItem`将返回该`DataContext`项目的 ，而不是模板化元素。我假设 ItemsSource 是某种视图模型的列表。这是 ItemsSource 类型为的示例`ObservableCollection<UserViewModel>`

```
UserViewModel selectedUser = listBox_user.SelectedItem as UserViewModel;
string username = selectedUser.username; 
```

# javascript - 向 Spotify 列表添加字段

> ID：10747114
> 
> 赞同：1
> 
> 时间：2012-05-25T00:42:01.607
> 
> 标签：javascript, list, spotify

我正在尝试向 Spotify API 提供的列表添加一个字段。

这是我创建列表的代码：

```
var playList_view = new views.List(playlist_test, function(track) {
                return new views.Track(track, views.Track.FIELD.NAME | 
                                            views.Track.FIELD.ARTIST | 
                                            views.Track.FIELD.ALBUM);
            });

$('#tracks').append(playList_view.node); 
```

我不知道如何通过函数将其添加到视图中，所以我在事后添加它。如果有更好的方法来做到这一点，请告诉我。

这是尝试（部分成功）：

```
$('.sp-list a').append("<span>Test</span>"); 
```

对于屏幕上显示的所有曲目，这会在其他列的右侧正确添加一列。当我在列表中向下滚动时出现问题。它似乎正在刷新并且html被重写。我认为这里的解决方案是在视图创建时将代码添加到函数中，或者观察某种更改/刷新事件。不幸的是，我不确定这些事件是什么或找到它们列表的好地方。

任何帮助表示赞赏！

谢谢，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:00:29.177

一种方法是在**滚动**事件上使用处理程序来检测列表已被滚动，然后重新添加该字段。但是，您需要注意它不会最终将其添加到已经添加它的行中，否则您最终会得到重复的字段。这似乎有效：

```
function addCustomField() {
    $('.sp-list a.sp-item').each(function() {
        if($(".custom-field",$(this)).length == 0) // check field doesn't already exist
        {
            $(this).append("<span class=\"custom-field\">Test</span>");
        }
    });
}

setTimeout(function() {
    addCustomField(); // Add the custom field to the visible tracks
    $('.sp-list').scroll(addCustomField); // Register the scroll handler
},10); 
```

# .net - 如何将空列表绑定到 ComboBox 并稍后添加项目？

> ID：10747115
> 
> 赞同：0
> 
> 时间：2012-05-25T00:42:03.360
> 
> 标签：.net, winforms, data-binding, combobox

我有一个绑定到列表数据源的组合框。该列表开始为空，稍后我想向其中添加项目。问题是当我添加第一项时，我得到 ArgumentOutOfRangeException: InvalidArgument=Value of '0' is not valid for 'SelectedIndex'。有人有工作吗？

此处描述了完全相同的问题，但我不确定它是否已解决。

[组合框--绑定源-可能的错误](http://www.windowsdevelop.com/windows-forms-data-controls-databinding/combobox--bindingsource-possible-bug-28329.shtml)

这是该帖子的代码：

```
BindingList<int> bl = new BindingList<int>();
BindingSource bs = new BindingSource();
ComboBox cb = new ComboBox();
this.Controls.Add(cb);
cb.DataSource = bs;
bs.DataSource = bl;
//bs.DataError += delegate { throw new Exception("DataError"); };
bl.Add(99); 
```

以及由此产生的堆栈跟踪：

```
System.Windows.Forms.dll!System.Windows.Forms.ComboBox.SelectedIndex.set(int value) + 0x1e8 bytes   
System.Windows.Forms.dll!System.Windows.Forms.ListControl.DataManager_PositionChanged(object sender, System.EventArgs e) + 0x36 bytes   
System.Windows.Forms.dll!System.Windows.Forms.CurrencyManager.OnPositionChanged(System.EventArgs e) + 0x39 bytes    
System.Windows.Forms.dll!System.Windows.Forms.CurrencyManager.ChangeRecordState(int newPosition, bool validating, bool endCurrentEdit, bool firePositionChange, bool pullData) + 0x16a bytes    
System.Windows.Forms.dll!System.Windows.Forms.CurrencyManager.List_ListChanged(object sender, System.ComponentModel.ListChangedEventArgs e) + 0x2f9 bytes   
System.Windows.Forms.dll!System.Windows.Forms.BindingSource.OnListChanged(System.ComponentModel.ListChangedEventArgs e) + 0x82 bytes    
System.Windows.Forms.dll!System.Windows.Forms.BindingSource.InnerList_ListChanged(object sender, System.ComponentModel.ListChangedEventArgs e) + 0x2e bytes 
System.dll!System.ComponentModel.BindingList<int>.OnListChanged(System.ComponentModel.ListChangedEventArgs e) + 0x17 bytes  
System.dll!System.ComponentModel.BindingList<int>.InsertItem(int index, int item) + 0x62 bytes  
mscorlib.dll!System.Collections.ObjectModel.Collection<int>.Add(int item) + 0x36 bytes  
WindowsFormsApplication1.exe!WindowsFormsApplication1.Form1.button1_Click(object sender, System.EventArgs e) Line 35 + 0x10 bytes   C# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:18:19.667

您可以像这样使用 ArraList.Adapter -

在 winforms 应用程序上拖动一个组合框控件并包含以下代码：

```
 var items = ArrayList.Adapter(comboBox1.Items);

    items.Add("TestSample1"); 
```

在这里，您稍后会添加项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:50:08.443

一旦 ComboBox 被绑定，它就不能添加任何不在数据源中的值。我建议您将新项目添加到数据源中并每次重新绑定 ComboBox。

# java - 如何使用带有冒号初始化的 JAVA 为 Xaml 添加“导航：页面”元素？

> ID：10747116
> 
> 赞同：0
> 
> 时间：2012-05-25T00:42:07.543
> 
> 标签：java, silverlight, xaml, intellij-idea, element

嗨，我正在使用 JAVA (IntelliJ) 生成 XAML，一切都很好，直到我想插入一个带有冒号 init 的元素？我怎样才能做到这一点？

我可以`<Page>`使用此代码生成

```
Element page;
page = new Element("Page", u.getDefaultNamespace() ); 
```

当我想得到这个元素时`<navigation:Page>`，我确实喜欢这个

```
Element page;
page = new Element("navigation:Page", u.getDefaultNamespace() ); 
```

但它不起作用，它在 IntelliJ 中给了我很多错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T00:03:12.617

好吧我找到了

```
Element page;
page = new Element("Page", u.getNavigationNamespace() ); 
```

你必须在你的代码中有这个功能

```
public Namespace getNavigationNamespace() { 

Namespace.getNamespace("navigation","clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation");

} 
```

# css - 如何在悬停而不是单击时制作 Twitter Bootstrap 的“拆分按钮下拉菜单”下拉菜单？

> ID：10747118
> 
> 赞同：3
> 
> 时间：2012-05-25T00:42:28.367
> 
> 标签：css, drop-down-menu, twitter-bootstrap

我正在使用[Twitter Bootstrap 拆分按钮下拉菜单](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)。当它悬停而不是单击箭头时，如何让它下拉？

这与上[一个问题](https://stackoverflow.com/questions/8878033/how-to-make-twitter-bootstrap-menu-dropdown-on-hover-rather-than-click)类似，但针对不同的 Twitter Bootstrap 元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T21:06:17.273

The solution to this is nearly the same as the question in your link. You need to add some CSS to the :hover pseudo selector that will display the dropdown. The hovered element must encompass both the button, and the dropdown list. In the example below, I added the `btn-hover` class to the button group to act as my hover selector.

```
 <div class="btn-group btn-hover">
          <button class="btn dropdown-toggle" data-toggle="dropdown" href="#">
            Action
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li><a href="#">Test</a></li><!-- dropdown menu links -->
            <li><a href="#">Test 2</a></li><!-- dropdown menu links -->
          </ul>
        </div> 
```

CSS:

```
div.btn-group:hover ul.dropdown-menu{
    display: block;    
}

div.btn-group ul.dropdown-menu{
    margin-top: 0px;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T10:01:02.130

将此代码用于更大的设备悬停效果和更小的设备点击效果：

```
$(document).ready(function(){

  $('.dropdown').append("<style type='text/css'>@media screen and (min-width: 768px) { .dropdown:hover .dropdown-menu {display: block;} }</style>"); 

}); 
```

# javascript - 如何在文本框的开头和结尾修剪空格？

> ID：10747119
> 
> 赞同：5
> 
> 时间：2012-05-25T00:42:53.317
> 
> 标签：javascript, html

我想修剪文本框开头的所有空格并修剪文本框末尾的所有空格。所以我在一个网站上找到了这段代码，该代码假设在开头、结尾和中间的多个空格处删除空格：

```
function trim(s) {
    s = s.replace(/(^\s*)|(\s*$)/gi,"");
    s = s.replace(/[ ]{2,}/gi," ");
    s = s.replace(/\n /,"\n");
    return s;
} 
```

我的问题是，首先，三行代码中的哪一行是它修剪中间空格的那一行，因为我不需要那个。但主要问题是如何让文本框访问此功能？

我尝试使用 onkeypress 但这没有用，下面是我尝试过的：

```
<p>Search: <input type="text" name="questioncontent" onkeypress="return trim(s)" /></p> 
```

所以我想要的是，例如，如果在文本框“我的名字是皮特”中输入了这个短语。然后它应该删除开头和结尾的空格，以便显示“我的名字是皮特”。但是我怎样才能让它工作呢？

更新：

发现 trim() 是 jQuery，那么有没有人可以手动编码以删除文本框开头和结尾的空格的 javascript 等价物？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T06:17:45.497

你需要改变你的 HTML ：

```
<p>Search: <input type="text" name="questioncontent" onchange="return trim(this)" /></p>​ 
```

将输入元素作为参数传递给修剪和使用 onchange 而不是 onkeypress。

然后修剪需要：

```
function trim (el) {
    el.value = el.value.
       replace (/(^\s*)|(\s*$)/gi, ""). // removes leading and trailing spaces
       replace (/[ ]{2,}/gi," ").       // replaces multiple spaces with one space 
       replace (/\n +/,"\n");           // Removes spaces after newlines
    return;
}​ 
```

这会修改输入元素的值，删除前导和尾随空格，用单个空格替换多个空格，并删除换行符后的所有空格。

JSfiddle：http: [//jsfiddle.net/jstoolsmith/ZNQQm](http://jsfiddle.net/jstoolsmith/ZNQQm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T12:47:35.867

```
function trim (el) {
    el.value = el.value.
       replace (/(^\s*)|(\s*$)/, ""). // removes leading and trailing spaces
       replace (/[ ]{2,}/gi," ").       // replaces multiple spaces with one space 
       replace (/\n +/,"\n");           // Removes spaces after newlines
    return;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T01:57:56.967

阅读评论..这实际上取决于该功能的使用方式。我试图在 上进行测试`onkeypress`，但这并没有达到您想要的效果。但是，我确实得到了与您想要的[类似](http://jsfiddle.net/Daedalus/TNTxL/1/)的东西，尽管我仍然不确定这是否是您想要的。

我不得不稍微修改该函数以使用您的代码，但基本上，在模糊时，它会执行该函数，并相应地更改输入文本。

# ruby-on-rails - 有一个用于 Rails 应用程序的 wordpress 数据库有意义吗？

> ID：10747124
> 
> 赞同：0
> 
> 时间：2012-05-25T00:43:23.827
> 
> 标签：ruby-on-rails, database, wordpress

我想知道为 Rails 应用程序提供与 wordpress 兼容的数据库是否有意义？我目前有一个 Rails 应用程序，它非常实用。我的一位老板建议删​​除我在 heroku 上的 rails 数据库，转而使用与 wordpress 兼容的数据库。他的理由是很容易将一堆不同的插件添加到系统中（因为 wordpress 有这么多）

我觉得有点反对，这不需要重写我所有的模型吗？更不用说，heroku 使用 postgres 而 wordpress 使用 mysql？还有许多其他兼容性问题？

这有意义吗？还是我应该坚持使用“原始”数据库 rails 使用？

我的网站主要是动态页面。我们希望最终拥有一个大型用户数据库，而且时间也是一个问题。

谢谢=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:52:34.957

根据提供的信息，如果您放弃 Rails/Ruby/Postgres 使用 Wordpress/PHP/MySQL，您将有效地从头开始。我不能为你做这个决定，obvs，但从我的角度来看，这似乎没有意义。

# php - 使用 javascript 将 php 变量发布到页面

> ID：10747125
> 
> 赞同：0
> 
> 时间：2012-05-25T00:43:35.430
> 
> 标签：php, javascript, jquery, ajax

我正在尝试设置一个确认框以在 php 页面上使用 javascript/jquery 删除消息。在 javascript 函数中正确设置了变量，但现在我无法让函数正确发布到页面。

我在头中包含以下内容

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

现在是代码。

```
//displays a list of messages w/ button to delete 
if(mysql_real_escape_string($_GET['msg'] == "msgDetail")){
            $msg->messageDetail($msgID);
            $action = "delete";
            $msgID = mysql_real_escape_string($_GET['msgID']);

            //display a delete button that sends variables to javascript function
            echo '<td>'.'<input type="button" value="Delete Message" name = "deleteMessage" onclick="deleteMessage(\'' . $msgID .'\', \'' .$action. '\',\'' .$userid. '\')" />'.'</td>';
        }
        ?>

        //javascript function for confirmation to delete message
        <script type="text/javascript">
        function deleteMessage(msgID, action, userid){
            //document.write(msgID + action + userid) values are correctly showing up here when uncommented
                if (!confirm("Are you sure?"))
                    return false;
                $.post('messages.php',"msgID=" + msgID + "&action=" + action + "&user=" + userid, function(response) {
                    //window.location.reload()
                });
        }
        </script>
    <?

      //check to see if the values have been posted
    if($_POST['action']) == "delete"){
        echo "success!";
             ....more code
    } 
```

如您所见，我正在尝试将变量发布到messages.php，但是当我检查是否发布了一个变量时，什么也没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:47:05.740

只看 javascript，`deleteMessage()`可以编写如下以避免混乱的字符串处理并在调试时为您提供更好的反馈：

```
function deleteMessage(msgID, userid) {
    if (!confirm("Are you sure?")) { return false; }
    var data = {
        'action': 'delete',
        'msgID': msgID,
        'user': userid
    };
    $.ajax({
        url:'messages.php',
        data: data,
        type: 'POST',
        success: function(response) {
            alert(response);//debug message
            //window.location.reload()
        },
        error: function((jqXHR, textStatus, errorThrown) {
            alert((typeof errorThrown == 'string') ? errorThrown : textStatus);//debug message
        }
    });
} 
```

您可以选择切换回`$.post()`调试所有内容的时间。

你会看到这`'action': 'delete'`是硬编码的。这是一个小问题，但传递“删除”是没有意义的，`deleteMessage`因为这样命名的函数不会做任何其他事情。需要在`<td><input...onclick="..."/></td>`构建 HTML 的位置进行相应的更改。

# algorithm - 顶点着色/分配以最小化“颜色交叉”的数量

> ID：10747126
> 
> 赞同：6
> 
> 时间：2012-05-25T00:43:46.783
> 
> 标签：algorithm, graph, graph-algorithm, mathematical-optimization, linear-programming

我不确定这是否真的是一个“着色”问题，就像它是一个分配/线性规划问题一样。我在这两个方面的专业知识都为零，所以请原谅可能出现的任何菜鸟。但我觉得这个问题之前几乎肯定已经解决/调查过，在查看[http://en.wikipedia.org/wiki/Category:Graph_algorithms](http://en.wikipedia.org/wiki/Category:Graph_algorithms)上的许多图形算法后，我找不到任何东西。我希望能在正确的方向上得到一些指示。

“问题陈述”有效地归结为：

1.  图中有两种类型的顶点：路由器和核心。

2.  核心仅连接到路由器。每个核心仅连接到单个路由器。每个都有用户输入/定义的“颜色”。（在我的具体问题中，颜色仅限于说 4/5 可能的颜色之一）。它们的颜色不能改变，它是一个输入参数。（核心是下图中的正方形）

3.  路由器连接到核心以及其他路由器。他们没有分配给他们的“颜色”。分配颜色是程序/算法目标的一部分。（路由器是下图中的圆形顶点。）

4.  该程序的目标是为图中的每个路由器分配颜色，以使不同颜色的顶点之间的“交叉”/边的数量最小化。

（另一种观点：本质上，您会得到一个图，其中一些顶点是彩色的，而另一些则不是。目标是对那些没有着色的顶点着色，以使不同颜色的顶点之间的边数最小化。）

我能够将这个（我确定很差）制定为一个整数线性程序，并使用 LP-Solve 设置了一个解决方案/方法。我也有自己的启发式方法。我很想知道解决这个问题的“正确”/已知/其他方法？！

非常感谢！

![演示的简单示例。](../Images/ff99443b021aee89f19534225654d9ee.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:10:36.723

让我们首先关注两种颜色的外壳。我们可以把它变成*st* [min cut](http://en.wikipedia.org/wiki/Minimum_cut)的一个实例。这个想法是我们在图中指定了一个*s*节点和一个*t*节点，并且我们希望将剩余节点划分为*s*组或*t*组，使得两组之间的边权重之和为最小化。对于您的版本，我们有一个主黄色节点*s*和一个主红色节点*t*，并且我们在每个核心及其对应的主颜色节点之间放置一个超过原始图中所有边数的高加权边，所有原始边都完好无损，每个边的权重为 1。高成本优势确保我们永远不会非法重新着色任何内核，因为移动所有路由器会更便宜。这个问题可以通过[Max flow-Min cut theorem使用](http://en.wikipedia.org/wiki/Max-flow_min-cut_theorem)[标准最大流量算法](http://en.wikipedia.org/wiki/Maximum_flow_problem)在多项式时间内解决。最佳选择取决于您的边和顶点数。

在多种颜色的情况下，您正在尝试解决“多端切割”问题。这与[最小*k*切](http://en.wikipedia.org/wiki/Minimum_k-cut)问题有关，但该问题的标准参考是论文[The Complexity of Multiterminal Cuts](http://akpublic.research.att.com/~dsj/papers/3way.pdf)（*k*切文章间接链接到该论文）。对于超过 2 种颜色，显然如果图形是平面的，问题仍然可以在多项式时间内解决；否则，它是[NP-hard](http://en.wikipedia.org/wiki/NP-hard)，因此您不妨使用整数规划求解器，因为这是另一个 NP-hard 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:19:02.740

如果颜色数量 <= 5 并且路由器 <=10，那么您可以使用蛮力。

选项远少于 5^10 个，特别是如果默认情况下您为每个路由器着色最常见的颜色，然后只需更改其中一些的颜色，必要时回溯。

编辑：还有一个不错的哈密顿路径算法，如果路由器少于 15 个，您也许可以适应您的需求。[在图中找到哈密顿圈的动态规划算法是什么？](https://stackoverflow.com/questions/1387725/what-is-dynamic-programming-algorithm-for-finding-a-hamiltonian-cycle)

# ruby - 我可以使用 HTTParty 返回子目录列表吗？

> ID：10747132
> 
> 赞同：1
> 
> 时间：2012-05-25T00:45:12.760
> 
> 标签：ruby, json, rest, httparty, reddit

我的问题是请求标头。

这是我编写的一个小脚本，它不起作用：

```
require 'httparty'
require 'highline/import'

#Login.new.post lets us log in. Everything works up to the subreddits method.

class Login
  include HTTParty
  base_uri 'www.reddit.com'
#So far, so good.

  def post(username, password)
    options = {:body => {:user => username, :passwd => password, :api_type => 'json'}}
    self.class.post("/api/login/#{username}", options)
  end

#I think this part is right, in and of itself. The problem is in how the headers
#are composed (which is why I keep bonking my head on the wall.)
  def subreddits(headers)
    self.class.get("/reddits/mine", headers)
  end

  def cli_user_login(user, password)
    a = Login.new.post(user, password);
    puts a;
    #We logged in and got some JSON with an empty errors array and, nestled deep, a cookie.
    reddit_session = a["json"]["data"]["cookie"]
    #Just putting the cookie in a variable. Print it to make sure it's there:
    puts reddit_session
    #reddit_session displays, no problem. We HAVE the cookie.
  b = Login.new.subreddits("headers" => {"reddit_session" => reddit_session})
  puts b
  #Then suddenly it spits out a mountain of html....... but not the subreddits! :(
  end

end

##The following is just for testing, because I'm whimsical or stupid or something
class IWouldLikeToPlayAGame
  def initialize
    puts "PLEASE ETNER YOUR REDDIT CRITERIALS"
    a = gets.chomp.strip
    b = ask("PLEASE BE ENTERING YOUR RREDDIT password"){ |q| q.echo = false }

    Login.new.cli_user_login(a, b)
  end
end

IWouldLikeToPlayAGame.new 
```

我认为我的错误在第 30 行左右。我的标题哈希如下所示：

```
{"headers" => {"reddit_session" => cookie}} 
```

`GET reddit.com/reddits/mine.xml`有了那个标题，我*应该*有 subreddit 列表，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:19:22.053

首先，您需要为要获取的数据指定格式扩展名，`xml`或者`json`：

```
/reddits/mine.extension 
```

其次，您需要发送`reddit_session`cookie 哈希，而不是标题：

```
:cookies => {'reddit_session' => reddit_session} 
```

ruby 中的分号是可选的，最好省略它们。

# mysql - 使用 if 语句创建外键

> ID：10747134
> 
> 赞同：0
> 
> 时间：2012-05-25T00:46:10.700
> 
> 标签：mysql

我有一个带有对象 id 列和类型列的表。

我希望能够让 ON DELETE CASCADE fk 根据类型引用不同的表。

这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:49:53.957

我认为您可以在要检查的数据的表上使用触发器来完成删除“ON CASCADE”并在那里进行删除，否则不可能`ON CASCADE`有条件。

# c# - 没有图标显示？

> ID：10747136
> 
> 赞同：0
> 
> 时间：2012-05-25T00:46:37.073
> 
> 标签：c#, icons, messagebox

在我的消息框中而不是感叹号图标中，它仅将图标显示为“警告”？我在这里缺少什么简单的东西，因为它让我无法弄清楚。

`MessageBox.Show ( MessageBoxIcon.Exclamation + "Delete" + " " + >(statesListBox.SelectedItem.ToString()) + " " + "Are you sure?", "Delete" + " " + >(statesListBox.SelectedItem.ToString()));`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:50:21.663

在[Msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.messageboxicon.aspx)上，它说要做：

> var 结果 = MessageBox.Show（消息，标题，MessageBoxButtons.YesNo，MessageBoxIcon.Question）；

在你的情况...

> MessageBox.Show("Delete" + " " + (statesListBox.SelectedItem.ToString()) + " " + "你确定吗？", "Delete" + " " + statesListBox.SelectedItem.ToString(), "Warning", MessageBoxButtons.YesNo, MessageBoxIcon.Warning);

您需要该方法的重载，否则它将简单地输出名称。如果您需要查看他们是否说是，您可以使用 DialogResult

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:51:07.590

[MessageBox.Show()](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.show.aspx)方法有很多重载。我认为您正在寻找的是这个：

```
MessageBox.Show("Delete", "Are you sure you want to delete " + statesListBox.SelectedItem.ToString() + "?", MessageBoxButtons.YesNo, MessageBoxIcon.Question); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T00:55:11.267

```
DialogResult dlgRes = MessageBox.Show("Delete", "Are you sure you want to delete?", MessageBoxButtons.YesNo, MessageBoxIcon.Question);

if (dlgRes == DialogResult.Yes)
{

} 
```

# c++-cli - C++/CLI 为什么对托管不可见

> ID：10747137
> 
> 赞同：1
> 
> 时间：2012-05-25T00:46:38.163
> 
> 标签：c++-cli

我有 c++ dll，我正在转换为 c++/cli。设置 /clr 编译器选项后，我的项目构建良好。但是，当我尝试通过引用 ac# 项目中的 dll 来引用本机方法时，c# 项目无法找到它。不设置 /clr 将所有源代码构建为 MSIL 应该从其他 .net 程序集中可见吗？为什么我必须创建一个 c++/cli 包装类来使本机代码对 c# 代码可见？

我不清楚 c++/cli 是如何工作的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T00:49:29.167

不会使您的本`/clr`机类对托管代码可见，也不会将所有内容编译为托管代码。它仅*允许*您将托管代码添加到您的 C++ 项目中。这是通过 C++/CLI 语言扩展完成的（即： make a`ref class`而不是 standard `class`）。

该`/clr:pure`标志*确实*将所有内容编译为托管代码（非本机代码），但需要对源代码进行重大更改才能进行编译。

# php - PHP：在 foreach 中删除多个值

> ID：10747140
> 
> 赞同：1
> 
> 时间：2012-05-25T00:47:05.893
> 
> 标签：php, if-statement, foreach

嘿，伙计们，这是我的 php：

```
$x = array("one", "two", "three");
foreach ($x as $value)
{
  if ($value != 'one' && $value != 'two')
  {
    echo $value . "<br />";
  }
} 
```

这个回声只有三个字。我必须使用 $value != 'one' && $value != 'two' 来实现这一点，我想知道是否可以将其合并为如下内容：

```
if ($value != 'one, two') 
```

这不起作用，所以我想知道你们是否可以提供一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T00:50:30.253

```
if (!in_array($value, array('one', 'two')))
  echo $value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T00:52:22.460

你可以创建一个 switch 语句让它看起来更漂亮，但这是你能做到的。

```
switch ($i) {
    case "one":
    case "two":
    case "three":
        echo $value . '<br/>';
        break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T00:55:36.417

如果在 value == 'three' 时需要打印或进行某些操作，则只需查找 value =='three'

```
 foreach ($x as $value) 
 {
      if($value === "three")
      echo $value;
 } 
```

你也可以看看使用 === 运算符来比较字符串。因为 == 使用类型杂耍，而 === 强制使用相同的类型（2 个字符串，2 个 int 无混合）链接： [http ://www.php.net/manual/en/language.operators.comparison.php](http://www.php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T01:30:06.777

完全跳过 foreach：

```
$x=array("one","two","three");
$exclude=array("one","two");

print_r(array_diff($x, $exclude)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T00:49:46.577

```
if ($value == 'three') 
```

也许这个？

# ios - ios - 以编程方式编码的 UIButton 未显示在我的视图中

> ID：10747142
> 
> 赞同：8
> 
> 时间：2012-05-25T00:47:43.210
> 
> 标签：ios, uibutton, viewdidload

.

你好，

我正在尝试以编程方式将 UIButton 和其他项目添加到我的 UIViewController 中，并且根据我在其他 SO 问题中阅读和看到的内容，我应该使用以下代码走上正确的轨道：

```
- (void)viewDidLoad
{
[super viewDidLoad];

UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];    
backButton = [[UIButton alloc] init];
backButton = [UIButton buttonWithType:UIButtonTypeCustom];
backButton.frame = CGRectMake(10, 25, 150, 75);
backButton.titleLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:15];
backButton.titleLabel.text = @"Back"; 
[self.view addSubview:backButton];

// Do any additional setup after loading the view.
} 
```

现在代码被放在 viewDidLoad 方法中并且它没有出现，这让我想到了一个问题——我做错了什么？

当我想更改背景颜色并放入 viewDidLoad 时，它可以正常工作。

干杯杰夫

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-25T00:59:03.430

我认为您可能正确插入了按钮，但只是看不到它，因为它没有背景并且没有显示文本。

尝试使用~~圆形矩形按钮~~系统按钮，看看它是否会显示出来。正确设置文本。我还将删除设置字体，以防万一字体有问题。

```
// backButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
backButton = [UIButton buttonWithType:UIButtonTypeSystem];
backButton.frame = CGRectMake(10, 25, 150, 75);
[backButton setTitle:@"Back" forState:UIControlStateNormal];
[self.view addSubview:backButton]; 
```

* * *

更新：`UIButtonTypeRoundedRect`已弃用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T00:56:22.600

您设置的按钮标题不正确。采用：

```
- (void)setTitle:(NSString *)title forState:(UIControlState)state 
```

也正如其他人所说，您不需要初始化按钮三次。删除第 2 行和第 3 行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-04T05:35:10.013

您已经使用静态方法 buttonWithType 创建了按钮，您再次为该按钮分配了内存。

```
UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
backButton.frame = CGRectMake(10, 25, 150, 75);
backButton.titleLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:15];
backButton.titleLabel.text = @"Back";
[self.view addSubview:backButton]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T00:58:33.240

除了评论中指出的问题

UIButtonTypeCustom，创建一个空白按钮。

当您想将图像用作按钮时使用此选项，但请记住使用 setImage: 覆盖按钮的标题。所以你需要设置一个BackgroundImage。

你的按钮实际上在那里它只是没有“出现”在那里

所以

使用`UIButtonTypeRoundRect`（可能略有不同）

或者如果你想要一个图像作为一个按钮。

使用`UIButtonTypeCustom` 呼叫`setBackgroundImage:`然后呼叫`setTitle:forState:`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-15T10:38:21.400

你必须使用按钮类型是 RoundedRect 然后我们可以看到背景颜色

```
[UIButton buttonWithType: UIButtonTypeRoundedRect]; 
```

希望它会有所帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-05T13:10:48.090

您可以使用 dispatch_after 稍后调用块。所以这里第一个视图被加载，它将在 0.1 秒内加载，然后所有按钮都在视图中可见。Xcode，开始输入 dispatch_after 并按 Enter 以自动完成以下内容：

试试这个：

```
 dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{

  UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];    
  backButton = [[UIButton alloc] init];
  backButton = [UIButton buttonWithType:UIButtonTypeCustom];
  backButton.frame = CGRectMake(10, 25, 150, 75);
  backButton.titleLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:15];
  backButton.titleLabel.text = @"Back"; 
  [self.view addSubview:backButton];

 }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-28T22:36:27.280

对我来说，问题是`UIButton's`文本和背景的默认颜色与我的应用程序的背景颜色的组合使它看起来好像按钮不存在一样；只是很难看到。将文本颜色设置为与应用背景形成鲜明对比的颜色可解决此问题。

# android - 缩略图和从 ICS 上的图库中挑选 picasa 图像

> ID：10747143
> 
> 赞同：1
> 
> 时间：2012-05-25T00:47:44.417
> 
> 标签：android, thumbnails, android-4.0-ice-cream-sandwich, picasa

我很难让 Thumbnails.getThumbnail 在运行 ICS 的 Nexus S 上处理 picasa 照片。其他一切似乎都可以工作，包括从 picasa 获取原始图像并显示它，但 getThumbnail 似乎不起作用。尝试使用它时出现以下错误：

```
E/MiniThumbFile( 1852): Got exception when reading magic, id = 5745625138093120418, disk full or mount read-only? class java.lang.IllegalArgumentException
W/MediaProvider(  540): original media doesn't exist or it's canceled. 
```

磁盘未满，可读写，app有外存写权限，picasa上确实存在图片（我可以通过android Gallery app查看）。

相同的代码在 Android 2.3 上运行良好，但路径略有不同，因为 2.3 似乎下载照片的副本并将实际的本地文件：// uri 交给新下载的图像，而不是交给你内容:// 乌里。

这是相关代码的主要内容：

```
 public void addImage(Uri uri, boolean local)
  {
     ContentResolver resolver = getContentResolver();
     Uri actualUri = uri;

     Log.d(TAG, "addImage: original uri: " + uri.toString());

     if(local) {
        try {
           List<String> uriPath = uri.getPathSegments();
           String contentUri = Media.insertImage(resolver, uri.getPath(), uriPath.get(uriPath.size()-1), new String());
           actualUri = Uri.parse(contentUri);
        }
        catch(java.io.FileNotFoundException ex) {
           Log.e(TAG, "FileNotFoundException: ");
           ex.printStackTrace();
        }
     }

     Log.d(TAG, "addImage: actual uri: " + actualUri.toString());

     List<String> uriPath = actualUri.getPathSegments();
     long imageId = Long.parseLong(uriPath.get(uriPath.size() -1));

     Bitmap thumb = Thumbnails.getThumbnail(resolver, imageId, Thumbnails.MINI_KIND, null);
     if(thumb == null) {
        Log.e(TAG, "Failed to get thumbnail for our image.");
        Toast toast = Toast.makeText(getApplicationContext(), "Failed to get thumbnail for image. Please try again.", Toast.LENGTH_SHORT);
        toast.show();
        return;
     }

     uris.add(uri);
     bmps.add(thumb);
     notifyDataSetChanged();
  } 
```

每当有一张新照片被添加到应用程序的照片“集合”中时，就会调用该方法。当它已知是本地图像时（即：如果照片是从应用程序内部拍摄的，或者 onActivityResult 的数据参数为空），本地参数设置为 true，我尝试从媒体内容提供者，因此我们可以获得有效的图像 ID 以传递给 Thumbnails.getThumbnail。该代码适用于从相机应用程序（通过 startActivityForResult）获取的图像，以及存储在设备本地的图库中的图像。

我有点难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:17:42.327

[https://developers.google.com/picasa-web/docs/2.0/reference#media_group](https://developers.google.com/picasa-web/docs/2.0/reference#media_group)

如果您在 android 中难以获取缩略图，请注意上面的链接和 api 以及 atom 提要中的 media:group/media:thumbnail 标记。[那是这篇文章中](https://stackoverflow.com/questions/10592633/php-picasa-api-show-large-image/10611532#10611532)提到的缩略图的父元素或容器

因此，为了在 android 中处理 thumbs，如果您可以构建代码以实际使用 api（picasa 提要/照片/媒体：组等），您可能会遇到更少的错误问题，例如目前的问题。

示例 google/android/picasa[代码](http://code.google.com/p/gdata-java-client/source/browse/tags/2.2.1-alpha/sample/picasa/picasa-atom-android-sample/src/com/google/api/data/sample/picasa/PicasaAtomAndroidSample.java)

[api 参考](http://code.google.com/p/google-api-java-client/)

[另一个 api 参考](http://code.google.com/p/gdata-java-client/downloads/list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:28:17.103

有同样的问题，这是一个导入/打包问题。

确保使用正确的缩略图类。那里有两个。一个用于视频，一个用于图像。

```
MediaStore.Images.Thumbnails
MediaStore.Video.Thumbnails 
```

# unicode - 让 IE 通过@font-face 在自定义字体中使用私有代码点

> ID：10747144
> 
> 赞同：1
> 
> 时间：2012-05-25T00:47:57.203
> 
> 标签：unicode, fonts, font-face

我正在尝试使用我们在 Glyphs 中创建的自定义字体。它在某些情况下运行良好，在其他情况下完全不起作用。

我使用 FontSquirrel 从 Glyphs 导出的 otf 创建非 otf 字体文件（除非我使用 TypeFront，它为我创建/托管它们）。我创建的字符在 unicode 私人使用区域，特别是在这个范围内：http: [//www.decodeunicode.org/en/private_use_area/5](http://www.decodeunicode.org/en/private_use_area/5)

这是有效的： * Firefox 和 Safari 中的字体 * Chrome 中的字体，如果我在 CSS 中包含 opentype 字体文件。

这是坏的：

*   如果我在 CSS 中不包含 opentype 字体文件，则字体在 Chrome 中呈现为空白。
*   在任何情况下，该字体都会在 IE8/9 中呈现空框。（没有检查旧版本。）

这是我尝试过但没有成功的方法：

*   在本地托管字体。将它们托管在 TypeFront 上。

*   最新最棒的防弹字体声明，由 FontSquirrel 和 TypeFront 提供。

前任：

```
@font-face {
    font-family: 'dojofore';
    src: url('ash/oah/css/dojofore-regular-webfont.eot');
    src: url('/ash/oah/css/dojofore-regular-webfont.eot?#iefix') format('embedded-opentype'),                  
         url('/ash/oah/css/dojofore-regular-webfont.ttf') format('truetype'),
         url('/ash/oah/css/dojofore-regular-webfont.woff') format('woff'),
         url('/ash/oah/css/dojofore-regular-webfont.svg#dojoforeRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

*   仅使用上面的第一个 src 声明。而且只有第二个。而且只有第二行的第一行。

*   更改 .htaccess 文件：

    ```
    AddType application/vnd.ms-fontobject .eot
    AddType font/ttf .ttf
    AddType font/otf .otf 
    ```

我觉得我必须错过一些关键步骤，这些步骤将使上述内容在每个浏览器中都能完美运行。其他人已经做到了（FontAwesome 的字体在私人使用区）。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:16:21.673

解决了。

FontSquirrel 允许您“子集”您的字体。这样做似乎使 unicode 的私有区域的行为更加可预测。在这种情况下，这意味着给它一个 E400-E500 的范围。

# php - 是什么导致一个 PHP 函数打印出错误文本简介，而不是另一个？

> ID：10747150
> 
> 赞同：1
> 
> 时间：2012-05-25T00:48:55.930
> 
> 标签：php, undefined-index

我正在使用 Netbeans 在 PHP 中整理一个注册/登录表单。为了实现这一点，我在 scripts.php 文件中提供了登录、注册和数据库连接功能，该文件通过 include 调用加载。

好吧，我的登录功能使用这个

```
$username = mysql_real_escape_string($_POST['username']);
$password = sha1(mysql_real_escape_string($_POST['password']));
$query = sprintf("SELECT * FROM users WHERE username='%s' AND password='%s'", $username, $password);

$link = connectDB();

$results = mysqli_query($link, $query); 
```

连接到数据库并获取结果。验证在稍后进行。

对于我的注册逻辑，我使用几乎相同的东西：

```
$username = mysql_real_escape_string($_POST['username']);
$password = mysql_real_escape_string($_POST['password']);

//check if user name and password match conditions
$link = connectDB();
$query = "SELECT * FROM users WHERE username = '" . $username . "'";
$results = mysqli_query($link, $query); 
```

注册页面加载正常，但登录页面有一个错误文本打印输出，说明登录函数中有一个未定义的索引“用户名”。这发生在页面加载时，并且没有调用任何函数。

但是，注册功能中的布局几乎相同，我没有收到错误消息。

为什么会出现这种情况？

**编辑**

我发现了这个问题。

我正在使用打开数据库连接`mysqli_connect`，但使用该`mysql-real_escape_string`功能。两者互不相容，相加`i`则截然不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:25:26.750

有几点可能与您的问题有关，也可能无关，但我不能忽视：

1.  SQL 转义字符串始终**是最后**发生的事情。不要 SQL 转义一个字符串，*然后* `sha1`它。请参阅[The Great Escapism](http://kunststube.net/escapism/)了解什么是逃避。
2.  使用时`mysql_real_escape_string`，在调用此函数之前需要先连接到数据库，因为它需要建立数据库连接才能完成其工作。
3.  您正在混合 mysql 和 mysqli 扩展。使用其中一个，而不是两者的功能。
4.  如果你正在使用 mysqli（你应该！），使用[准备好的语句](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)而不是手动 SQL 转义字符串和`sprintf`.

换句话说，目前你做的完全错误。首先解决这些问题，您的问题可能会随之消失。

# c - 使用 PIC18 微控制器创建文件

> ID：10747160
> 
> 赞同：2
> 
> 时间：2012-05-25T00:50:08.137
> 
> 标签：c, microcontroller, pic

我正在使用 PIC18 微控制器创建数据记录器，并且正在用 C 语言编写代码。

我想创建一个包含我记录的所有数据的文件。最初我想创建 2 种文件类型。其中一个是 .txt，另一个是 .pqd（PQDIF 格式）。

这一切的问题是我在任何地方都找不到 txt 文件的结构。我找到了一个用 VB 为 pqd 编写的 dll，可以翻译成 C 语言，但这很困难，所以我决定从更简单的开始。

有谁知道我在哪里可以找到txt的逻辑结构。如果是这样，您知道我如何查找其他文件类型的结构吗？

抱歉任何英语错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:21:41.500

没有结构。只需使用 Microchip 应用程序库即可：http: [//www.microchip.com/stellent/idcplg? IdcService=SS_GET_PAGE&nodeId=2680&dDocName=en547784](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2680&dDocName=en547784)

这是 MDD 部分： [http ://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2680&dDocName=en537999](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2680&dDocName=en537999)

更重要的是，他们有现有的演示应用程序，用于定期将来自模数转换器 (ADC) 的数据记录到文本文件中。您可以购买 50 美元的演示板立即启动并运行，或者您可以订购免费的 PIC18 芯片样品（芯片和运费免费），并在无焊面包板上构建您自己的系统。 [http://www.microchip.com/samples/](http://www.microchip.com/samples/)

我曾多次亲自将 SD 卡记录器写入 PIC18、PIC24F 和 PIC32mx 芯片的文本/CSV 文件。如果您在 Microchip.com 论坛上查找用户“Dogbertius”的帖子，您可以找到我的一些示例。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T03:11:18.647

文本文件仅在所使用的编码意义上具有格式（[ASCII](http://en.wikipedia.org/wiki/Ascii)、[UTF-8](http://en.wikipedia.org/wiki/Utf-8)、[EBCDIC](http://en.wikipedia.org/wiki/Ebcdic)等），当然在 ASCII 的情况下，[end-of-line 有特定于平台的约定](http://en.wikipedia.org/wiki/End_of_line)，可能不同的是 CR、CR+例如 LF 或 LF。

纯文本文件就是这样 - 例如，您为此应用程序编写的 C 源代码是纯文本，您可以将纯文本文件加载到您用来编辑代码的任何编辑器中。纯文本文件的呈现（字体、文本大小、换行符处理等）没有在文件中编码，它完全取决于呈现数据的应用程序（例如文本编辑器，甚至是 Windows/DOS”[键入](http://en.wikipedia.org/wiki/Type_%28command%29)“命令）。

有基于纯文本的结构化格式，例如[XML](http://en.wikipedia.org/wiki/Xml)、[RTF](http://en.wikipedia.org/wiki/Rich_Text_Format)和[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)。这些细节可以在[Wotsit.org](http://www.wotsit.org)找到。XML 适用于复杂的数据结构，RTF 适用于格式化文本和页面表示，CSV 适用于简单的固定格式数据记录——尤其是数字数据。例如，任何电子表格应用程序都将直接读取 CSV，将每个“值”放在单独的单元格中。还有其他基于文本的[标记格式](http://en.wikipedia.org/wiki/Markup_language)，例如[JSON](http://en.wikipedia.org/wiki/JSON)，甚至 Stackoverflow 使用的[Markdown](http://en.wikipedia.org/wiki/Markdown)格式。

PIC18 可能不适合构建复杂的格式，您最好以专有格式传递简单的原始数据，然后在 PC 上对其进行处理以将其转换为您需要的任何内容。

# java - Java 中二维数组的实际大小（二维数组的填充区域）

> ID：10747164
> 
> 赞同：1
> 
> 时间：2012-05-25T00:50:26.007
> 
> 标签：java, multidimensional-array

我的家庭作业有问题，希望能得到一些帮助。

我必须将文本文件读入 2D int 数组。二维数组的宽度固定为 5，永远不会改变。但是，数组的高度可能会根据文本文件的长度而改变。

我必须从 40x5 数组开始；任何超过 40 行的文件都是不可接受的，但少于 40 行就可以了。因此，我可能只填充了 X 行数组（X <= 40）。

我必须计算每列的平均值，所以我需要一列中有多少个元素；有没有办法得到它？或者在我知道 X 是什么之后，我可以将原始数组（包含所有数据）的大小更改为 Xx5 吗？

示例输入文件：

```
034 080 055 078 045
060 100 056 078 078
070 010 066 078 056
034 009 077 078 020
045 040 088 078 055

```

输出应该是：

```
48.6 47.8 68.4 78.0 50.8

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:08:46.240

我不建议对这样的动态扩展矩阵使用普通数组。我建议阅读[List & ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)文档以获得良好的实现。

来自 Java 文档： `[ArrayList is a] resizable-array implementation of the List interface.`

实际上，这是 Java 对 C 时代不断定义的数组限制的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:11:35.953

您需要做的是计算每个单独列的总和（简单；您不需要保留整个状态，只需保留每列的运行总数）加上行数。鉴于此，计算每列的平均值应该很容易。您可以一次只读取一行来完成所有这些操作，并且您的解决方案应该能够处理任何长度的文件。

# php - 只需在 Obj-C(Iphone/Xcode) 中加载 php

> ID：10747171
> 
> 赞同：0
> 
> 时间：2012-05-25T00:51:24.103
> 
> 标签：php, iphone, objective-c, xcode, load

我有一个应用程序，当您按下按钮时，它会加载一个 php 页面。我不需要从中获取任何字符串。我只需要在按下按钮时请求页面而不让用户看到它。我不想使用 uiwebview，因为它们占用了太多资源。

如何加载一个 php 页面而不在按下按钮时向用户显示？（可以插入到 IBAction 中的首选代码）。

附言。我已经用谷歌搜索了 1/2 小时左右，但我在这里找不到任何我要问的东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:16:55.687

你真的不需要来自网页的任何数据，你只需要加载一次就可以通知网络服务器用户做了什么？您可以简单地使用：

```
NSString* urlString = @"http://blaablaa.com/hello.php";
NSURL *theURL = [NSURL URLWithString:urlString];
NSURLRequest *req = [NSURLRequest requestWithURL:theURL];
NSURLConnection *connection = [NSURLConnection connectionWithRequest:req delegate:self]; 
```

如果您需要获取请求的结果（成功/失败），请实施

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    // your stuff here
} 
```

在你的课上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:18:09.263

只需使用`stringWithContentsOfURL:encoding:error:`

```
NSError *error;
NSURL *url = [NSURL URLWithString:@"http://server.com/file.php"];
NSString *html = [NSString stringWithContentsOfURL:[NSURL URLWithString:url] encoding:NSUTF8StringEncoding error:&error]; 
```

# java - 如何在 Java 中轻松地将 GridLayout 旋转 180 度？

> ID：10747173
> 
> 赞同：1
> 
> 时间：2012-05-25T00:51:34.003
> 
> 标签：java, swing, awt, layout-manager, grid-layout

在 Java 国际象棋应用程序中，我需要在不同的时间点“反转”代表棋盘的 GridLayout。（例如，在转白/黑之后，或者只是根据用户的要求获得不同的棋盘视图）。

有没有快速垂直反转 GridLayout 的方法？这将使我不必卸载和重新加载背景方块，这将使我的点击事件更容易处理，因为面板不会四处移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:25:26.827

不幸的是，没有内置的功能可以在摆动中翻转 GridLayout。相反，您可以尝试移除构成您的电路板的面板并以相反的顺序重新添加它们。这基本上会“翻转”董事会。

# php - PHP 停止评论使用 $_POST 保持发布

> ID：10747174
> 
> 赞同：2
> 
> 时间：2012-05-25T00:51:41.523
> 
> 标签：php, post, comments

所以，我正在编写一个评论脚本。当您发表评论时它工作正常，但我发现当您刷新页面时，即使文本字段为空，它仍然发布相同的评论。我知道这是因为我已经将变量发送到`$_POST`，它只是将该值插入到数据库中，但是我该如何避免这个问题呢？`$username`提前致谢，这是我的代码：（假设`$image`已经设置好了）

```
if (isset($_POST['text']) && !empty($_POST['text']))
        {
            $text = $_POST['text'];
            $timeStamp = time();

            mysql_query("INSERT INTO comments VALUES ('$image','$username','$text','$timeStamp')");
        } 
```

和 HTML：

```
 <form method = "post" action = "/view.php?image=$image" />

            <input type = "text" name = "text" maxlength = "100" />
            <input type = "submit" value = "Add Comment" />

        </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:59:34.577

避免这种情况的最简单方法是在成功的数据库操作后重定向：

```
...
mysql_query("INSERT INTO comments VALUES ('$image','$username','$text','$timeStamp')");
// error handling
header('Location: /some/where'); 
```

除此之外，您确实需要切换到 PDO /prepared statements 以避免 sql 注入问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:59:02.810

**简单的方法：**

保存到数据库后，重新加载您的页面：

```
header('Location: comment-form.php'); 
```

这将使浏览器“忘记”表单提交。

***正确*的方法：**

生成一个[nonce](http://en.wikipedia.org/wiki/Cryptographic_nonce)并将其添加为表单中的隐藏输入。提交表单时，请确保`$_POST['nonce']`与`$nonce`您的脚本匹配。

[如何创建和使用随机数](https://stackoverflow.com/questions/4145531/how-to-create-and-use-nonces)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T00:59:09.533

您是否发布到您正在查看评论的同一页面？如果是这样，您可能可以发布到 /a_page_where_i_submit_things.php 然后重定向回评论所在的页面。我相信这会奏效。

# node.js - 从javascript回调中获取数据的正确方法

> ID：10747175
> 
> 赞同：2
> 
> 时间：2012-05-25T00:51:48.293
> 
> 标签：node.js, express

我正在使用 express 框架将一个 api 服务器从一个普通的 nodejs 脚本转换为一个，以获得更好的稳定性。

我的问题之一是您无法从回调中返回值，因为原始代码仍在继续......

```
var _json = api.query(); 
```

不知何故，我们更希望 .query() 返回最终结果对象，因此我们可以将其字符串化为 JSON，然后将其传递给渲染引擎，如下所示：

```
// Render the display
res.render('posts-resp', {
    title: res.app.settings.app_title,
    _use_Callback: _use_Callback,
    json: _json
}); 
```

但是，db 查询使用回调来处理查询结果，因此不可能返回这样的值。在原始版本中，*db 脚本*处理渲染最终视图，但我不希望它们像那样捆绑在一起。

```
query: function(){

    db.query( this._buildQuery(), function(err, res){
        if(err){ throw err; }
        res.fetchAll(function(err, rows){
            if(err){ throw err; }
            db.query('SELECT FOUND_ROWS() as num, UNIX_TIMESTAMP() as query_timestamp;', function(err, cnt_res){
                if(err){ throw err; }
                cnt_res.fetchAll(function(err, cnt_rows){
                    var obj = {
                        results:rows,
                        total_results:cnt_rows[0].num,
                        current_offset:self.offset,
                        query_timestamp:cnt_rows[0].query_timestamp
                    };
                    // ... ?
                });
            });
        });
    });
} 
```

如何正确获取数据并将它们传递给渲染系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:02:57.317

JavaScript 是一种非常灵活的语言。您实际上并不需要*直接*将视图与 DB 代码联系起来，因为您可以使用函数作为包装器来抽象出视图代码并将其与 DB 逻辑分开。

当需要异步逻辑时，回调是一个非常强大的工具。我不确定这里是否需要它，但您仍然可以使用包装器函数将视图代码与 DB 代码分开来封装视图逻辑：

**视图代码的函数包装器：**

```
function delegateToView(data) {

    // process data here before sending to view

    // Render the display
    res.render('posts-resp', {
        title: res.app.settings.app_title,
        _use_Callback: _use_Callback,
        json: _json
    });
} 
```

**带有回调函数调用的数据库代码：**

```
 db.query('SELECT FOUND_ROWS() as num, UNIX_TIMESTAMP() as query_timestamp;', function(err, cnt_res){
                if(err){ throw err; }
                cnt_res.fetchAll(function(err, cnt_rows){
                    var obj = {
                        results:rows,
                        total_results:cnt_rows[0].num,
                        current_offset:self.offset,
                        query_timestamp:cnt_rows[0].query_timestamp
                    };
                    // ... ?

                    //call your delegator here and pass in any needed data.
                     // this keeps the actual view code separate.
                    delegateToView(obj);

                });
            }); 
```

现在，如果您的视图代码需要更改，您无需触及 DB 代码中的任何逻辑或回调函数中的任何逻辑。祝你好运！

# c# - c# 实例化自定义对象

> ID：10747184
> 
> 赞同：0
> 
> 时间：2012-05-25T00:53:17.333
> 
> 标签：c#

嘿，到目前为止，我的 for 循环中出现空指针错误，有人知道为什么吗？谢谢

这是错误消息

你调用的对象是空的。

```
 board = new BoardSquare[15][];

    String boardHtml = "";

     for (int i = 0; i < 15; i++) {
            for (int k = 0; k < 15; k++) {
                //if (board[i][k] == null)
                    board[i][k] = new BoardSquare(i, k);
                boardHtml += board[i][k].getHtml();//null pointer error here
            }
        }

     /**
     * A BoardSquare is a square on the FiveInARow Board
     */
    public class BoardSquare {
        private Boolean avail; //is this square open to a piece
        private String color;//the color of the square when taken
        private int x, y; //the position of the square on the board

        /**
         * creates a basic boardSquare
         */
        public BoardSquare(int x, int y) {
            avail = true;
            this.x = x;
            this.y = y;
            color = "red";//now added (thanks)
        }

        /**
         * returns the html form of this square
         */
        public String getHtml(){
            String html = "";

            html = "<div x='" + x + "' y='" + y + "' class='" + (avail ? "available" : color) + "'></div>";

            return html;
        }

        /**
         * if true, sets color to red
         * if false, sets color to green
         */
        public void takeSquare(Boolean red){
            if(red)
                color = "red";
            else 
                color = "green";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:56:53.657

字符串字段**Color**是否已实例化？看起来不像。

有你的空。

```
 html = "<div x='" + x + "' y='" + y + "' class='" + (avail ? "available" : color) + "'></div>"; 
```

构造函数应该是这样的：

```
public BoardSquare(int x, int y) {
            avail = true;
            this.x = x;
            this.y = y;
            Color = "white";
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:26:22.030

您正在创建一个[数组数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)（也称为锯齿数组），我认为这不是您想要的。您可能正在寻找一个[多维](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.71%29.aspx)数组：

```
BoardSquare[,] board = new BoardSquare[15,15]; 
```

然后当你分配给它时：

```
board[i,k] = new BoardSquare(i, k);
boardHtml += board[i,k].getHtml(); 
```

# c - 子进程挂在管道内

> ID：10747185
> 
> 赞同：0
> 
> 时间：2012-05-25T00:53:51.053
> 
> 标签：c, unix, process, fork, pipe

当我使用 执行此功能时`ls | head`，它会在打印出文件和目录后挂在第二个子进程中。有人能告诉我我在这里想念什么吗？提前致谢

```
int unipipe(char* lhs[], char* rhs[])
{
    int pfd[2];
    int status, cid;
    pid_t pid;
    char buf;
    if((lhs != NULL) && (rhs != NULL))
    {
      if(pipe(pfd) != 0)
      {
        perror("pipe");
        return -1;
      }
    if((pid = fork()) < 0)
    {
        perror("fork");
        return -1;  
    }
    else if(pid == 0)
   {
       close(1); //close the unused read end
      dup2(pfd[1], STDOUT_FILENO);
      //execute the left-hand side command
      close(pfd[0]);
      execvp(lhs[0], lhs);
       _exit(EXIT_SUCCESS);
    }

   if(setpgid(pid, 0) < 0)
   {
     perror("setpgid"); 
     return -1;
   };

  cid = waitpid(pid, &status, 0);
  if((pid = fork()) == 0)
    {
        close(0);
        dup2(pfd[0], STDIN_FILENO);
        close(pfd[1]);  //close the unused write end
        execvp(rhs[0], rhs);
        _exit(EXIT_SUCCESS);
    } 
    else
    {
           waitpid(pid, &status, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:24:39.057

您等待第一个进程退出，然后再启动第二个进程。每个管道都有一个缓冲区，一旦这个缓冲区已满，I/O 功能就会阻塞，等待从管道中读取几个字节，以便更多字节“流入”。您的第一个进程很可能在管道上阻塞，因此永远不会退出。

我会声明两个 pid_t 类型的变量，每个孩子一个，并且只有在两者都成功启动后才等待它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:38:29.883

为了让你的程序运行，你删除第一个：

```
cid = waitpid(pid, &status, 0); 
```

在：

```
else
{
       waitpid(pid, &status, 0);
} 
```

您将其替换为：

```
wait(); // for the fist child
wait(); // for the second child 
```

您的程序将运行。

# java - 世界/美国地图的 Java 库

> ID：10747186
> 
> 赞同：0
> 
> 时间：2012-05-25T00:53:52.693
> 
> 标签：java

## 语境

我正在用 Java 开发一个应用程序。我想要一张相当高分辨率的世界/美国地图/地球仪。这适用于涉及以下内容的应用程序：

```
* plotting where certain landmarks are
* plotting where certain earth quakes happened
* plotting where certain companies are headquartered
* overlaying a weather map 
```

## 问题

是否有为此的开源库？[可能没有考虑到地图数据很昂贵。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:03:23.873

OpenStreetMap 可能会有所帮助。我不知道它们是否提供了您真正需要的东西，并且它们的地图采用 XML 或 JSON 格式，因此您必须解析它们——但有一些库可以满足您的需求。不过可能值得一看……

# admob - Android：AdMob 未显示

> ID：10747187
> 
> 赞同：0
> 
> 时间：2012-05-25T00:53:55.173
> 
> 标签：admob

出于某种原因，在测试模式下运行 AdMob 时，我什么也没得到。任何人都可以看到明显的错误吗？

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    <com.google.ads.AdView android:id="@+id/ad"
                           android:layout_width="wrap_content"
                           android:layout_height="wrap_content"
                           ads:adSize="BANNER"
                           ads:adUnitId="AD_ID"
                           ads:testDevices="TEST_EMULATOR,TEST_EMULATOR, DEVICE_ID"
                           ads:loadAdOnCreate="true"/>        

        <ImageView
            android:id="@+id/image"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:src="@android:drawable/alert_light_frame" />

    </RelativeLayout> 
```

然后我的活动中没有任何内容，因为 loadAdOnCreate 是真的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:27:21.547

所以我弄清楚了问题所在！我在 2.3 手机上运行它，它低于 AdMob 所需的 Android 版本。当我在 4.0 VM 中运行它时，它运行良好！

我给那些试图找出他们的 AdMob 问题的人的建议：以直接的 XML 方式（代码上方）使用它，因为这会排除 Java 的任何问题。然后在虚拟机而不是物理设备中尝试，并阅读 LogCat 以查找任何问题。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T13:37:42.873

您需要指定您的

```
ads:adUnitId="AD_ID" 
```

您可以在您的 admob 帐户中获取它。应该看起来像

```
ads:adUnitId="a123456ff123456" 
```

没有您的 id，AdMob 将不会为您提供任何广告

# javascript - 保护客户端->数据库游戏

> ID：10747189
> 
> 赞同：1
> 
> 时间：2012-05-25T00:54:25.627
> 
> 标签：javascript, jquery, mysql, security, phpmyadmin

好的，我正在使用 JavaScript 和 HTML5 创建游戏。`map`, `x`, `y`, `level`,等变量`exp`存储在 JavaScript 中以进行跟踪。在我的客户端页面上，JavaScript 变量被存储以与游戏一起玩。每 5 秒，客户端页面向数据库发送一个`POST`AJAX 调用，`MySQL`并成功更新它。

然而，用户可以轻松地修改 JavaScript 变量并在游戏中作弊。然后，一旦他们编辑了 JavaScript 变量，`POST`即使他们不道德地编辑它，他们也会抓住并更新它。

那么，我该如何防止这种情况发生呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:09:22.693

不幸的是，没有办法防止客户端代码被恶意方操纵。但是，在许多情况下，某些行为可能表明可能存在滥用行为。

例如，如果我可以通过治疗药水恢复的最大生命值是 100 点，而用户突然增加了 1000 点，那么你就*知道*存在滥用行为。您的策略应该包括在您的代码中进行检查作为验证，以确保返回给您的应用程序的数据是有意义的。

这个概念很像业务应用程序开发人员可能会做的事情，以确保在 Web 表单中输入的数据得到验证。如果某些值是非法的或不应该提交的，服务器会以错误消息和需要填写哪些字段的说明进行响应。

在您的情况下，某人仍有可能以低于某些阈值的水平“玩弄系统”。从小处着手，当您分析数据时，您会发现更多可以对数据进行此类验证的区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T01:09:35.530

您必须在服务器端监视和分析数据——也许做一些健全性检查，例如确保值没有超出范围，或者它们只改变了一些合理的量。你的问题的问题是你不能阻止用户做他们想做的事，你只需要处理他们给你的东西。

# jquery-templates - 无法打印 jquery 模板数据

> ID：10747190
> 
> 赞同：0
> 
> 时间：2012-05-25T00:54:31.140
> 
> 标签：jquery-templates

我正在使用 json 来获取请求。我的响应对象格式是：

```
[
{"id":3,"name":"Zuned Ahmed"},
{"id":4,"name":"ZunedTWO"},
{"id":7,"name":"TORCH"}
] 
```

ajax调用是：

```
$.ajax( {
                type : 'GET',
                url : URL,
                async : false,
                dataType : "json",
                success : function(data) {
                    $("#product_data_div").html($("#product_template").tmpl(data));
                }

            }); 
```

模板代码是：

```
<div id="product_data_div">
                <script id="product_template" type="text/x-jquery-tmpl">
                    <input type="checkbox" id="product_${id}" name="" value="${id}" class="margin-top10">
                    <label for="product_${id}" class="margin-top10">${name}</label>
                    <div class="clear"></div>
                </script>
                </div> 
```

数据未显示，3 复选框显示但没有文本。

任何机构都可以帮我找到变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:24:27.753

问题是在使用 JSTL 标记库的 jsp 中编写的代码，对于 JSP，'$' 是特殊字符，它由 jstl 解释，并且在 jsp 页面上填充数据。

为了克服这个问题，我们有 2 个解决方案：

1.  以这种方式附加特殊字符 ${'$'}{id}
2.  我们也可以设置 <%@ page isELIgnored="true"%>

谢谢

# ios - 在 Xcode 中通过 Github 的第 3 方文件？

> ID：10747196
> 
> 赞同：0
> 
> 时间：2012-05-25T00:55:29.587
> 
> 标签：ios, xcode, github, repository

我知道有一种方法可以将 Github 和 Xcode 链接在一起以将您的项目推送到 Git，但我还没有听说过一种方法可以将它设置为在 Git 项目位于现有项目中的位置。

比如ShareKit：[https](https://github.com/ShareKit/ShareKit) ://github.com/ShareKit/ShareKit ...

有没有办法让我可以在我的项目中拥有来自该 repo 中特定分支的所有 ShareKit 文件，这样每当我构建我的项目时，它都会检查我是否有来自 Github 的最新版本的文件和如果没有，它会自动下载并在我的项目中使用它吗？

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:12:29.140

正常设置，文件 -> 源代码管理 -> 拉取或合并（取决于你想要的）

# java - Java中将一个巨大的txt变成数组的过程

> ID：10747200
> 
> 赞同：1
> 
> 时间：2012-05-25T00:56:58.680
> 
> 标签：java, android, arrays

我在一个 txt 文件中有数千个句子，我的第一个 Android 应用程序应该从那里取出一个并将其放在 textView 上。

我可以将 txt 文件作为资源，或者尝试获取所有句子并将其转换为数组。我不想将我的 txt 放入应用程序中，而是直接将句子放入数组中。我怎样才能自动将数千个句子“翻译”成类似数组的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:38:38.600

不要重新发明轮子......这是一个单行：

```
import org.apache.commons.io.IOUtils;

List<String> sentences = (List<String>)IOUtils.readLines(new FileInputStream("filename.txt")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:46:20.470

```
i guess this is what u dont want to do...
//InputStream is = getResources().openRawResource(R.raw.list); 
```

所以获取一个 InputStream 对象并使用以下代码

```
List<String> content=new ArrayList<String>();
InputStreamReader isr = new InputStreamReader(is);
linereader = new LineNumberReader(isr);
for (int i = 0; i < num; i++) {  // num is  total no of lines in file
    try {
            line = linereader.readLine();
            content.add(line);

         } 
         catch (IOException e) 
         {
        e.printStackTrace();
          }
     }// for ends 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T01:11:26.217

如果您知道每个项目只有一个期间，那么您就分开。如果您不能这样做但可以使用换行符，请使用它。

```
final String blob = "Quote 1\. Quote2\. Quote '3'.";
String[] quotes = blob.split('\\.');
> ["Quote 1", "Quote2", "Quote '3'"];

OR

final String blob = "Quote 1.\nQuote 2 longer.";
String[] quotes = blob.split("\n");
> ["Quote 1.", "Quote 2 longer."] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T01:17:21.313

听起来您想将文本文件放在资源文件夹中，然后使用 BufferedReader 读取它。

根据文本文件的内容，您可以逐行读取文本并将其添加到数组中，或者您可以将整个文件作为字符串读取并使用 .split()，这将返回一个数组字符串供您使用。

# ios - MBProgressHUD 禁用与 UITableViewController 的交互

> ID：10747202
> 
> 赞同：8
> 
> 时间：2012-05-25T00:57:16.450
> 
> 标签：ios, uitableview, mbprogresshud

我在 UITableViewController 中使用 MBProgressHUD。虽然我能够让 HUD 成功显示，但 HUD 会拦截屏幕的所有触摸通知并阻止在我的 UITableView 中滚动。

我知道 MBProgressHUD 的预期功能可能是锁定界面（例如，在阻塞操作期间），但我想知道如何将触摸事件转发到适当的位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T13:37:21.517

MBProgressHUD 是 UIView 的子类，因此您必须禁用与它的用户交互。所以：

youMBProgressHUDPointer.userInteractionEnabled=NO;

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T01:12:58.063

弄清楚了。MBProgressHUD的代码中需要添加以下代码：

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
// UIView will be "transparent" for touch events if we return NO
return (NO);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T05:59:11.163

[在这里](https://stackoverflow.com/questions/10590847/mbprogresshud-blocks-interactions-with-an-uiscrollview-when-shown/12948001#12948001)检查我的答案。MBProgressHUD 在应用程序级别阻止交互。您需要设计一种方法来通过放置一些自定义逻辑来解决这个问题。

# r - 在 ggplot2 v0.9.1 中，如何以 10 的幂表示法获得 scale_y_log10？

> ID：10747203
> 
> 赞同：1
> 
> 时间：2012-05-25T00:58:02.250
> 
> 标签：r, ggplot2, notation

我最近将我的 ggplot2 发行版从旧版本（不记得版本）更新到 v0.9.1。在更新之前，当我使用 scale_y_log10 时，所有值都是 10 的幂表示法，这非常好看，尤其是使用 LaTeX 标记时。现在我得到了科学计数法的所有内容，在看情节时我不能说我非常喜欢它。这只是一个细节，但有没有办法恢复到 10 的幂符号？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:48:33.250

只需复制粘贴上面评论中链接到[的指南](http://cloud.github.com/downloads/hadley/ggplot2/guide-col.pdf)Chase 第 33-34 页上的内容即可。

```
# install.packages(c("scales", "ggplot2"), dependencies = TRUE)
require(ggplot2)

DF <- data.frame(x = rlnorm(1000, m = 10, sd = 5)) 
```

10 次方符号

```
(q <- ggplot(DF, aes(x = log(x))) + geom_histogram()) 
```

![10 次方符号](../Images/923eb148a0711fffa30eab3c06f392f4.png) 10 次方符号

```
require(scales)
q + scale_x_continuous(labels = math_format(e^.x)) + xlab("x") 
```

![10 次方符号](../Images/366f688bddcf5160f6fb3894cddb8d40.png)

# sql - SQL 错误：“引用的表中没有主键或候选键...”

> ID：10747204
> 
> 赞同：2
> 
> 时间：2012-05-25T00:58:03.640
> 
> 标签：sql, sql-server, sql-server-2008, foreign-keys

我正在使用 SQL Server 2008。尝试创建表“Dossier_Financement”时出现错误：

```
create table Dossier_Financement 
(
    ID_Reunion integer foreign key references Reunion(ID_Reunion),
    ID_Dossier integer foreign key references Dossier(ID_Dossier),
    Decision varchar(20),
    Motif text,
    Montant_Retenu decimal(6,2),/* montant accorder */
    Duree_Retenu smallint,/*nb jours accorder */
    Nom_Giac varchar(50) foreign key references GIAC(Nom_Giac),
    primary key(ID_Dossier,Nom_Giac,ID_Reunion)
)
GO 
```

这是两张表：

```
create table Reunion 
(
    ID_Reunion integer ,
    Date_Reunion datetime,
    ID_Membre integer,/*jquery*/
    Type_Reunion varchar(20),
    Nom_Giac varchar(50),
    foreign key(ID_Membre,Nom_Giac) references Membre(ID_Membre,Nom_Giac),
    primary key(ID_Reunion,Nom_Giac)
)
GO

create table Dossier_Financement 
(
    ID_Reunion integer foreign key references Reunion(ID_Reunion),
    ID_Dossier integer foreign key references Dossier(ID_Dossier),
    Decision varchar(20),
    Motif text,
    Montant_Retenu decimal(6,2),/* montant accorder */
    Duree_Retenu smallint,/*nb jours accorder */
    Nom_Giac varchar(50) foreign key references GIAC(Nom_Giac),
    primary key(ID_Dossier,Nom_Giac,ID_Reunion)
)
GO 
```

'Reunion' 正常执行没有任何问题，但在尝试创建第二个表时出现此错误：

```
Msg 1776, Level 16, State 0, Line 1
There are no primary or candidate keys in the referenced table 'Reunion' that match the referencing column list in the foreign key 'FK__Dossier_F__ID_Re__5629CD9C'.
Msg 1750, Level 16, State 0, Line 1
Could not create constraint. See previous errors. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T01:23:46.833

根据实际模型需要/要求，一种解决方案是引用 Key，这需要*所有*部件（注意`Nom_Giac`添加到 FK 定义中）：

```
create table Dossier_Financement 
(
    ...
    foreign key(ID_Reunion,Nom_Giac) references Reunion(ID_Reunion,Nom_Giac),
) 
```

* * *

根据 Mark M 的回答，另一种解决方案是使 ID_Reunion 列成为键（注意`Nom_Giac`已从 PK 定义中删除）：

```
create table Reunion 
(
    ...
    primary key(ID_Reunion)
) 
```

这将使 ID_Reunion 成为一个键（实际上是主键），然后可以使用`foreign key references Reunion(ID_Reunion)`.

快乐编码！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T01:02:43.027

您只能使用所引用表的完整主键来创建外键。您的第二个表尝试仅使用 Reunion 表的一半主键来创建外键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T16:05:30.170

在要在其上创建索引的列上创建唯一索引：

```
CREATE UNIQUE NONCLUSTERED INDEX [UX_Index] ON dbo.[Table]([Column1],[Column2]) 
```

# ios - ios - 想要清理我的 viewDidLoad 方法

> ID：10747206
> 
> 赞同：0
> 
> 时间：2012-05-25T00:58:08.027
> 
> 标签：ios, uicolor, viewdidload

.

你好，

我想清理我的 viewDidLoad 方法，因为它的代码行数越来越多，而且越来越混乱。

现在我的 UI 是以编程方式构建的，因为我想学习这种做事方式。

所以我在这个[SO Post](https://stackoverflow.com/a/2365632/892628)上读到，我可以在单独的 -9void) 方法中设置 UI 项，然后使用链接到该 void`[self method]`

现在，当我使用这种方式时，它似乎对我不起作用。

就像，如果我想设置背景颜色，这将起作用：

```
- (void)viewDidLoad
 {
[super viewDidLoad];

self.view.backgroundColor = [UIColor colorWithRed:0.0 green:0.2 blue:0.38 alpha:1.0];
} 
```

但这不会：

```
- (void)viewDidLoad
{
[super viewDidLoad];

[self backgroundColor];

// Do any additional setup after loading the view.
}

-(void)backgroundColor
{
UIView *backgroundView = [[UIView alloc] init]; 

backgroundView.backgroundColor = [UIColor colorWithRed:0.0 green:0.2 blue:0.38  alpha:1.0];
} 
```

这是我误会了吗？？

提前致谢：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:03:59.090

我认为您误解了视图/视图控制器的性质。

在这一行：

```
self.view.backgroundColor = [UIColor colorWithRed:0.0 green:0.2 blue:0.38 alpha:1.0]; 
```

self 指的是您正在加载的视图控制器，而 view 指的是该视图控制器拥有的视图。因此，当您设置 self.view.backgroundColor 时，您正在设置将由您正在显示的视图控制器呈现的视图的背景颜色。因此这行得通。

另一方面，您的另一种方法不会这样做：

```
UIView *backgroundView = [[UIView alloc] init]; 
```

该行创建了一个全新的 UIView 实例，并设置了它的背景颜色。这是一个全新的视图，与之前 self.view 引用的视图不同。

如果你真的想要一个单独的函数来改变你的背景颜色，这样写：

```
-(void) setBackgroundColor
{
   self.view.backgroundColor = [UIColor colorWithRed:0.0 green:0.2 blue:0.38 alpha:1.0];
} 
```

然后您实际上正在修改属于视图控制器的视图，并且更改应该实际显示。

* * *

我还建议这个功能不是很有用；你正在创建一个函数，它封装了一行永远不会改变的代码。为此创建一个功能真的没有多大意义。一个更有用的实现可能是：

```
-(void) setBackgroundColor:(UIColor)newColor
{
   self.view.backgroundColor = newColor;
} 
```

要使用此方法，您将在 viewDidLoad 方法中编写以下行：

```
[self setBackgroundColor:[UIColor colorWithRed:0.0 green:0.2 blue:0.38 alpha:1.0]]; 
```

然后您可以随时再次调用 setBackgroundColor ，将背景颜色更改为不同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:03:38.217

您`backgroundColor`在第二个实例中的方法只是在`UIView`创建然后泄漏的某些不同对象上设置背景颜色。（方法名称也不是很好——它暗示了一个属性获取器，但实际上并没有获取属性或返回任何东西。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T01:05:59.543

这里的问题是您的方法 backgroundColour 在使用之前未声明。所以有3种方法可以解决这个问题

1.  将您的 backgroundColor 方法移到 viewDidLoad 上方
2.  在@interface 中将 backgroundColour 声明为公共方法
3.  创建一个私有接口并声明 backgroundColour

No.3 示例：

@interace MyViewController (private) - (void)backgroundColor; @结尾

请注意，如果您的接口是从任何东西继承的，仍然像上面那样编写私有接口。

也不要创建一个新的视图只是执行`[self.view setBackgroundColor:[UIColor redColor]];`

# javascript - 获取 div 高度

> ID：10747209
> 
> 赞同：11
> 
> 时间：2012-05-25T00:58:47.557
> 
> 标签：javascript, html

Firebug 告诉我计算的样式`my_div`：

宽度 300 像素

高度 453.167px

然而，当我执行时`console.log(mydiv.style.height)`，它给了我一个空字符串，即使`console.log(mydiv)`记录了正确的元素。我确定在调用此日志记录代码时页面已加载。我很欣赏不使用 jQuery 的解决方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-25T01:00:10.000

根据选择的浏览器，其中之一将执行以下操作：

```
mydiv.offsetHeight
mydiv.clientHeight 
```

[获取剪辑的 DIV 的全高](https://stackoverflow.com/questions/4612992/get-height-of-a-div)

[获取div的高度](https://stackoverflow.com/questions/6101230/getting-the-height-of-a-div)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-25T01:03:29.740

更新：

自从我最初的回答以来，许多浏览器不一致的问题已经得到修复。现在`clientHeight`DOM 元素的属性是可靠的。

`var height = element.clientHeight;`

> 对于没有 CSS 或内联布局框的元素，Element.clientHeight 只读属性为零，否则它是元素的内部高度（以像素为单位），包括填充，但不包括水平滚动条高度、边框或边距。
> 
> clientHeight 可以计算为 CSS 高度 + CSS 填充 - 水平滚动条的高度（如果存在）。
> 
> 注意：此属性会将值四舍五入为整数。如果需要小数值，请使用 element.getBoundingClientRect()。

来源：[https ://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight)

原答案：

如果你使用 jQuery JS 库，你可以这样做：

```
var computed_height = $('#my_div').height(); 
```

如果你使用 Prototype JS 库，它是类似的：

```
var computed_height = $('my_div').getHeight(); 
```

使用库通常是做某事最简单和最跨浏览器的方式。使用 vanilla js 获取计算样式是不可靠的，因为不同浏览器的属性不同。

# android - 每个android进程获得多少内存？

> ID：10747211
> 
> 赞同：11
> 
> 时间：2012-05-25T00:58:58.117
> 
> 标签：android, memory

我们是否可以依靠我们的 Android 应用程序获得一定数量的内存，或者它是否因手机型号或操作系统版本而异？

例如，我有一个内存缓存，我将其限制设置为 5 MB。如果在一台设备上，我的应用程序只能使用 8 MB 内存，而在另一台设备上，24 MB，我想调整内存缓存的上限以利用更多或更少的内存。

有什么办法可以解决这个问题，金额甚至会有所不同吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-25T01:03:21.487

是的，最大堆大小因设备而异。您可以通过调用来检查设备的每个应用程序的大致内存类[`getMemoryClass()`](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass())。

> 返回当前设备的每个应用程序的近似内存类。这让您了解应该对应用程序施加多大的内存限制才能让整个系统发挥最佳作用。返回值以兆字节为单位；基准 Android 内存类是 16（恰好是这些设备的 Java 堆限制）；某些具有更多内存的设备可能会返回 24 甚至更高的数字。

更改应用程序堆大小的唯一内置方法是`android:largeHeap="true"`在`AndroidManifest.xml`. 这通常会将堆大小从 48 增加到 128。请记住，这种方法仅适用于 3.x 平板电脑。否则，您将需要一个有根设备，这显然不是您作为开发人员想要依赖的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T12:45:06.563

它可以帮助你

16 MB 是任何给定 android 应用程序的最大内存限制。一些第二代手机将为每个进程返回 24 MB 甚至更多的内存。

[android中每个进程或应用程序的最大内存限制是多少？](http://skillgun.com/question/480/android/basics/what-is-the-maximum-memory-limit-given-for-each-process-or-application-in-android)

# .net - TFS 构建 Resx 文件正在使用更高的 .NET Framework 版本

> ID：10747216
> 
> 赞同：0
> 
> 时间：2012-05-25T00:59:20.193
> 
> 标签：.net, msbuild, tfsbuild

我编译了一个使用 v.2.0 的类库，`System.Drawing`它用于 ASP.NET v3.5 网站。

当我使用 Visual Studio 2010 编译类库时，我可以在我的站点中使用 DLL 而不会出错。

当我使用 TFS2010 远程编译类库时，发生调用`System.Drawing`时出现异常。

**例外**

```
Could not load file or assembly 'System.Drawing, Version=4.0.0.0 ... 
```

我认为问题在于我正在使用的资源。我使用了添加资源文件（resx）并添加了图像。我的代码正在通过为我生成的资源类提取图像。生成的代码将资源转换为`System.Drawing.Bitmap`

有人见过这个吗？任何人都知道如何让它停止使用 .NET 4？在对 System.Drawing 的所有引用中，我将属性“SpecificVersion”设置为 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:34:16.993

构建服务器上是否安装了 .net 3.5？

如果您使用的是 Windows Server 2008R2 机器，则默认情况下它没有这些功能。您必须通过管理工具-> 服务器管理器-> 功能添加“功能”。

# php - Dom Document - 提取文档 ID 并保存

> ID：10747220
> 
> 赞同：0
> 
> 时间：2012-05-25T00:59:55.560
> 
> 标签：php, oop, dom, domdocument

我正在尝试使用 dom 文档提取特定的 HTML 块。

我的代码如下：

```
 $domd = new DOMDocument('1.0', 'utf-8');
    $domd->loadHTML($string);
    $this->hook = 'content';
    if($this->hook !== '') {
        $main = $domd->getElementById($this->hook);
        $newstr = "";
        foreach($main->childNodes as $node) {
            $newstr .= $domd->saveXML($node, LIBXML_NOEMPTYTAG);
        }
        $domd->loadHTML($newstr);
    }
    //MORE PARSING USING THE DOMD OBJECT 
```

它工作得很好，但是 foreach 很慢，我想知道是否有更智能的方法来做到这一点。我正在将 HTML 重新加载到 $domd 中，以便继续编辑。在我的脑海里，我觉得我应该保存一个片段，而不是将保存的 $newstr 重新加载到对象中。

这可以变得更优雅或更快吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:43:25.913

我假设您想改变现有`$domd`文档，将其完全替换为您从该内容节点获取的那些子节点：

**更新：**刚刚意识到，由于您使用 重新加载`loadHTML`，您可能希望保留它创建的`html`/节点。`body`下面的代码已被调整为空`body`并在此处附加片段：

```
$domd = new DOMDocument('1.0', 'utf-8');
$domd->loadHTML($string);
$this->hook = 'content';
if($this->hook !== '') {
    $main = $domd->getElementById($this->hook);
    $fragment = $domd->createDocumentFragment();
    while($main->hasChildNodes()) {
        $fragment->appendChild($main->firstChild);
    }
    $body = $domd->getElementsByTagName("body")->item(0);
    while($body->hasChildNodes()) {
        $body->removeChild($body->firstChild);
    }
    $body->appendChild($fragment);
}
//MORE PARSING USING THE DOMD OBJECT 
```

# sql - Microsoft SQL，外键未引用表，看不到是什么原因造成的

> ID：10747229
> 
> 赞同：-1
> 
> 时间：2012-05-25T01:01:34.273
> 
> 标签：sql, sql-server, sql-server-2008, smss

我花了一段时间试图解决它，但我看不到任何会导致此错误的东西。我在想可能与“独特”声明有关。

> 消息 1767，第 16 级，状态 0，第 40 行
> 
> 外键“FK_ *Loan* _ItemNo__0AD2A005”引用了无效表“Item”。

如果有人想用它来复制问题，这是代码：

```
CREATE DATABASE LibrarySystem10
GO
USE LibrarySystem10
GO

CREATE TABLE MemberType(
    MemberTypeNo int NOT NULL,
    Name varchar(50) NOT NULL,
    Description varchar(250) NOT NULL,
    MaxNumberLoans int NOT NULL,
    MaxLoanDuration int NOT NULL
    PRIMARY KEY (MemberTypeNo)
)
insert into MemberType values ('0','UnderGraduate','A student at a college or university who has not yet earned a bachelor''s or equivalent degree.','5','10')
insert into MemberType values ('1','PostGraduate','A student undertaking study after completing a first degree.','10','10')
insert into MemberType values ('2','Staff','Staff at the university','15','15')

CREATE TABLE Member(
    MemberNo int NOT NULL,
    MemberTypeNo int NOT NULL,
    FirstName varchar(150) NOT NULL,
    LastName varchar(150) NULL,
    DateOfBirth varchar (200) NULL,
    HouseNo int NOT NULL,
    Street varchar(50) NOT NULL,
    Suburb varchar(100) NOT NULL,
    PostCode int NOT NULL,
    EmailAddress varchar(250) NULL,
    HomePhoneNo varchar(250) NULL,
    MobileNo varchar(250) NULL,
    MembershipStartDate varchar (200) NOT NULL,
    MembershipEndDate varchar (200) NOT NULL,
    MembershipStatus varchar(100) NOT NULL,
    PinNo int NOT NULL
    PRIMARY KEY (MemberNo)
    FOREIGN KEY (MemberTypeNo)REFERENCES MemberType ON UPDATE CASCADE
) 
insert into member values ('0','0','Shane','Lindsay','15-11-1992','90','fake st','FauxTon','2250','shane@hotmai.com','0243296356','0415657164','15-11-2010','15-11-2020','current','0105')
insert into member values ('1','0','Shaune','Lincoln','18-12-1992','92','faken st','FauxTone','2350','shaune27@hotmai.com','0243253357','041565757','14-12-2010','14-12-2020','deferred','0123')
insert into member values ('2','0','Sarah','richards','08-08-1990','45','Small st','Hornsby','2279','Sarah67@hotmai.com','02432567154','0416451845','01-01-2012','01-01-2022','current','0123')

CREATE TABLE Loan(
    MemberNo int NOT NULL FOREIGN KEY(MemberNo) REFERENCES Member ON UPDATE CASCADE,
    ItemNo int NOT NULL FOREIGN KEY(ItemNo) REFERENCES Item ON UPDATE CASCADE,
    DateLoaned varchar (50) NOT NULL,
    DueDate varchar (50) NOT NULL,
    Status varchar(50) NOT NULL,
    FinesImposed bit NOT NULL DEFAULT '0' CHECK (finesImposed IN ('0','1')) ,
    Renewed bit NOT NULL DEFAULT '0' CHECK (Renewed IN ('0','1')),
    UNIQUE(MemberNo,ItemNo,DateLoaned)
) 
insert into Loan values ('0','0','10-10-2012','15-10-2012','loaned','0','0')
insert into Loan values ('1','0','12-10-2012','15-10-2012','loaned','0','1')

CREATE TABLE Item(
    ItemNo int NOT NULL,
    Title varchar(50) NOT NULL,
    Subject varchar(100) NULL,
    ISBN int NULL,
    PhysicalDescription varchar(150) NULL,
    Author varchar(75) NULL,
    PRIMARY KEY (ItemNo)
)
insert into Item values ('0','Book1','IT','0501425252','Big,42pages','John Doe')
insert into Item values ('1','Book2','IT','0501425253','Big,42pages','John Doe')

CREATE TABLE ItemCopy(
    ItemNo int NOT NULL,
    CallNumber varchar(50) NOT NULL,
    Condition varchar(50) NULL,
    UNIQUE(ItemNo,CallNumber),
    PRIMARY KEY (CallNumber)
) 
insert into ItemCopy values ('0','0','good')

CREATE TABLE Hold(
    HoldNo int NOT NULL,
    MemberNo int NOT NULL FOREIGN KEY(MemberNo) REFERENCES Member ON UPDATE CASCADE,
    ItemNo int NOT NULL FOREIGN KEY(ItemNo) REFERENCES Item ON UPDATE CASCADE,
    DateTimeHeld datetime NOT NULL,
    comments varchar(200) NULL,
    Status varchar(50) NOT NULL
    PRIMARY KEY (HoldNo)

)

CREATE TABLE Fine(
    FineNo int NOT NULL,
    MemberNo int NOT NULL FOREIGN KEY(MemberNo) REFERENCES Member ON UPDATE CASCADE,
    Description varchar(50) NULL,
    Amount int NOT NULL, 
    PRIMARY KEY (FineNo)
)

CREATE TABLE AudioRecording(
    Length varchar(50) NULL,
    BitRate varchar(50) NULL,
    Size varchar(50) NULL
)

CREATE TABLE ItemCollection(
    ItemNo int NULL,
    CollectionName varchar(75) NULL
    UNIQUE (ItemNo,CollectionName)
)

CREATE TABLE Collection(
    CollectionName varchar(75)NOT NULL
    PRIMARY KEY (CollectionName)
)

CREATE TABLE Book(
    PublisherInfo varchar(150) NULL,
    Edition int NULL,
    Notes varchar(250) NULL,
    Status varchar(50) NULL
)

CREATE TABLE Journal(
    Series int NULL,
    Notes varchar(250) NULL,
    OtherTitles varchar(150) NULL,
    PriorTitles varchar(250) NULL
)

SELECT m.FirstName, l.Status, l.DueDate
    FROM Member m, Loan l
    WHERE  m.MemberNo = '0' AND  l.MemberNo = m.MemberNo 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T01:05:15.790

Loan 引用 Item，但您在创建 Item 之前创建 Loan。首先创建项目表。

# android - HelloTabWidget 教程中不推荐使用 getTabHost()

> ID：10747230
> 
> 赞同：1
> 
> 时间：2012-05-25T01:01:53.047
> 
> 标签：android

我正在做 HelloTabWidget 教程 [http://developer.android.com/resources/tutorials/views/hello-tabwidget.html](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html) 并在*“TabHost tabHost = getTabHost();”上遇到错误* 陈述。我翻阅了 stackOverflow 笔记，似乎有些人遇到了同样的问题，并且一些人收到了**类似“注意：Tabactivity 在最新版本中已弃用，考虑学习 Fragments”**的回复，并发现我可以使用**... v4支持库，它提供了与 DONUT 兼容的 Fragment API 版本。**虽然我还没有安静地想出如何做到这一点。

我的问题是 - 如果该功能已被弃用，并导致新手出现问题，那么教程不应该更新以使用新功能吗？他们是礼貌/政治正确的方式让负责教程的人知道可能需要更新吗？或者也许存在新的教程，而我只是在看一个旧的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:26:19.707

> 教程不应该是使用新功能的更新吗

你到底在问谁？我们？为什么我们会知道为什么谷歌没有更新他们的文档/教程。

> 他们是让负责教程的人知道可能需要更新的礼貌/政治正确的方式吗？

我很确定他们知道。他们可能有更重要的事情要做。互联网上有大量的教程。他们不需要更新所有教程。

> 或者也许存在新的教程，而我只是在看一个旧的 URL？

谷歌搜索。有很多博客会给你很多例子。包括这里的堆栈溢出。

# java - 将 Qt 对象导入 Java - 如何？

> ID：10747232
> 
> 赞同：0
> 
> 时间：2012-05-25T01:02:08.163
> 
> 标签：java, qt-jambi

我希望在我的 java 程序中使用 Qt GUI 框架。
我已经下载并安装了 QJambi 可执行文件，它在 C:\qtjambi-4.7.1 中创建了一个可爱的目录。

我一辈子都无法弄清楚如何将 Qt API 实际导入我的 java 程序中。
Qt Jambi 上的 Qt Jambi wikipedia page [wikipedia page](http://en.wikipedia.org/wiki/Qt_Jambi "Qt占碑维基百科页面")给出了一个简短的示例，带有 import 语句`import com.trolltech.qt.gui.*;`，它在我的程序中不起作用。

这显然是因为我的程序找不到合适的文件；我也不行！
我假设我的程序目录中必须有来自 Qt Jambi API 的某些文件，但我不确定是哪个！

那么我应该把哪些文件放在哪里才能使用 Qt Jambi API？
（我希望在部署时将我的程序包装为可执行文件）

谢谢！

（抱歉这样的菜鸟问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:06:00.620

你在用日食吗？您必须在类路径中设置 jar 文件（可能在 qtjambi 目录中的某处有一个库 jar 文件）。

# joomla - joomla 2.5 保存多个选择列表？

> ID：10747235
> 
> 赞同：3
> 
> 时间：2012-05-25T01:02:54.293
> 
> 标签：joomla, selectlist, multiple-select

我正在尝试向我的后端组件添加一个多选列表，但我似乎无法让它工作。我已经尝试搜索 joomla 论坛并尝试了他们的建议，但它仍然不起作用。

这是我所做的：

/models/fields/categories.php

```
foreach ($result as $item) {
    $options[] = JHtml::_('select.option', $item->id, $item->title);
};
$drawField  = '';
$drawField .= '<select name="'.$this->name.'" id="'.$this->name.'" class="inputbox" size="10" multiple="multiple">';
$drawField .= JHtml::_('select.options', $options, 'value', 'text', $strVal, true);
$drawField .= '</select>';
return $drawField; 
```

/models/forms/edit.xml

```
<field name="catid" type="categories" multiple="true" size="40" class="inputbox" label="COM_PRODUCTS_FORM_LBL_EDIT_CATID" description="COM_PRODUCTS_FORM_DESC_EDIT_CATID" required="true" filter="safehtml" /> 
```

/models/edit.php

```
protected function loadFormData()
{
    $data = JFactory::getApplication()->getUserState('com_products.edit.edit.data', array());
    if (empty($data)) {
        $data = $this->getItem();
        $data->catid = explode(',',$data->catid);
    }
return $data;
} 
```

/tables/edit.php

```
public function check() {
    if (property_exists($this, 'ordering') && $this->id == 0) {
        $this->ordering = self::getNextOrder();
    }
    $this->catid = implode(',',$this->catid);   
return parent::check();
} 
```

它在后端将字段 catid 保存为“Array”。然而，当我手动输入 143,148 作为字段值时，它并没有突出显示这些字段，所以显然我的内爆/爆炸不起作用..任何帮助将不胜感激！

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T01:37:14.247

好的，想通了..问题是这样的：xml文件中的filter =“safehtml”如果其他人有同样的问题......现在一切都很好:)

# css - 如何让 flexbox 尊重已删除的元素？

> ID：10747236
> 
> 赞同：3
> 
> 时间：2012-05-25T01:02:54.263
> 
> 标签：css, webkit, flexbox

我正在使用[Flexbox](http://dev.w3.org/csswg/css3-flexbox/)在 WebKit 浏览器中实现等高列。

我正在使用这个 CSS ......

```
ol {
   display: -webkit-box;   
}

ol li {
   width: 100px;
   background: #ccc;
   margin: 5px;
   padding: 5px;    
} 
```

...和这个 HTML ...

```
<ol>
   <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, dolor sit amet, consectetuer.</li>
   <li>Aliquam tincidunt mauris eu risus.</li>
   <li>Vestibulum auctor dapibus neque.</li>
</ol>
​ 
```

...产生...

![例子](../Images/bbc16f6fd0f0614432a65b1e341a9518.png)

[js小提琴](http://jsfiddle.net/DqU2E/)。

如您所见，这三个元素是它们最高兄弟（第一个`li`）的高度。

如果我删除了最高元素，我希望会有一个回流，其中其他元素成为下一个最高元素的高度。

我所期待的...

![:)](../Images/c284cd405917cdf77a59c75d0df888a6.png)

究竟发生了什么...

![:(](../Images/d792df874c7fbf831184e76527c84757.png)

有趣的是，当您开始在 Web Inspector 中检查元素时，问题会自行纠正。也许我可以通过显式触发浏览器重绘来重现这种*自我纠正*，但我宁愿不必为应该在 CSS 中 100% 处理的内容引入 JavaScript。

当兄弟元素被移除时，有没有办法告诉 Flexbox 收缩/重新计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:04:45.607

我想出了这个...

将这两个属性添加到`li`元素...

```
-webkit-box-flex: 1;
min-height: 0; 
```

[js小提琴](http://jsfiddle.net/Z8XQJ/)。

现在，当您删除第一个元素时，其他元素会缩小以适应。

# grails - Grails：为什么这个服务类是空的？

> ID：10747240
> 
> 赞同：1
> 
> 时间：2012-05-25T01:03:12.430
> 
> 标签：grails, groovy

鉴于设置的这种非常简化的再现：

```
package net.myexample.plugin

class MyExampleService {  
  Map doMunge(Map m) {
    // do stuff to 'm'
    return m
  }
}

/****************************** BREAK: NEXT FILE ******************************/

package net.myexample.plugin

class MyTagLib {
  static namespace = 'p'

  def myExampleService

  def tag = { attrs, body ->
    def m = doMungeAndFilter(attrs.remove('m'))

    out << g.render(template: '/template', plugin: 'my-example-plugin', model: m)
  }

  Map doMungeAndFilter(def m) {
    def mm = myExampleService.doMunge(m)
    // do stuff to 'm'
    return mm
  }
}

/****************************** BREAK: NEXT FILE ******************************/

package net.myexample.app

import net.myexample.plugin.MyExampleService

class MyExampleService extends net.myexample.plugin.MyExampleService {
  def doMunge(def m) {
    def mm = super.doMunge(m)
    // do more stuff to 'mm'
    return mm
  }
}

/****************************** BREAK: NEXT FILE ******************************/

package net.myexample.app

import net.myexample.plugin.MyTagLib

class MyTagLib extends net.myexample.plugin.MyTagLib {
  static namespace = 'a'

  def myExampleService

  def tag = { attrs, body ->
    def m = doMungeAndFilter(attrs.remove('m'))

    out << g.render(template: '/template', plugin: 'my-example-plugin', model: m)
  }

  Map doMungeAndFilter(def m) {
    def mm = super.doMungeAndFilter(m)
   // do more stuff to 'mm'
    return mm
  } 
}

/**
 * But we get an exception that cites that it cannot call 'doMunge' on a null
 * object -- which could only be 'myExampleService'
 */ 
```

`null`当应用程序的标记库上的方法调用其超类（插件上的标记库）时，为什么服务会出现，而后者又调用服务上的方法？

我能想到的最好的理论是该服务实际上并没有在应用程序的 taglib 类中实例化，因为除了`def`. 我认为是这种情况，因为如果我将所有逻辑从服务类的方法移到 taglib 的方法中，它就会按预期工作。

（为了画全图：`MyExampleService.doMunge`在其他地方调用，而后面的过滤（in `MyTagLib.doMungeAndFilter`）只有taglib需要。）

*或者：*如果我`doMungeAndFilter`进入另一个服务类，在插件中创建基本版本并在应用程序中扩展它，那效果很好。我认为这是一个可以接受的结论，尽管创建另一个服务类只是为了支持这样的 taglib 感觉有点臃肿。

想法？尖端？明显的错误或遗漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:46:08.413

这只是一个简单的猜测，但您是位于 /grails-app/taglib 下的 taglib 类文件，还是位于 /src 目录的某个位置？我注意到我无法将服务注入（至少是自动地）到位于 /grails-app 文件夹之外的类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:57:18.887

`def myExampleService`从子类 taglib 中删除。Groovy 中的类似属性编译为私有字段以及公共 getter 和 setter，因此在超类 taglib 中隐含

```
private Object myExampleService;

public void setMyExampleService(Object svc) {
  this.myExampleService = svc;
}
// getter similar 
```

当您`myExampleService`在子类中再次声明时，子类将获得*自己的*私有字段（具有相同名称），并且设置器被覆盖以将提供的值存储在此子类字段中，而不是超类字段中。Spring调用setter注入服务，所以最终结果是超类private`myExampleService`永远不会被设置，因此在尝试调用`myExampleService.doMunge`超类时会出现空指针异常。

子类可以通过继承的 getter 和 setter 访问超类属性，因此不需要重新声明它。

# struts2 - 在 Struts2 中输入日期

> ID：10747244
> 
> 赞同：2
> 
> 时间：2012-05-25T01:03:25.317
> 
> 标签：struts2

如何更改struts 2 中java.util.Date 对象的格式。我测试过，Struts 2 接受m/d/yy。是否可以更改格式？

以及如何更改默认消息“字段日期的字段值无效”？

struts2 中的日期标签只能用于输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:44:01.543

您可以将格式传递给`s:date`标签

```
<s:date name="myDate" format="yyyy-MM-dd" /> 
```

要更改默认错误消息，`validation.xml`您可以添加 message 参数

```
 <field name="myDate">
        <field-validator type="date">
            <message key="errors.myDateRequired" />
        </field-validator>
    </field> 
```

然后在您的`ApplicationResources.properties`文件中，您将为`errors.myDateRequired`

更新：根据评论

`s:date`只是一个只读标签，这意味着不能用于接受用户的输入。

为了使 textField 接受不同格式的日期，有几种方法：

1.  使用 struts2-jQuery 插件，它有一个非常不错的日期选择器，支持不同的日期时间格式、[showcase](http://www.weinfreund.de/struts2-jquery-showcase/index.action)、[DatePickerTag](http://code.google.com/p/struts2-jquery/wiki/DatePickerTag)。
2.  自定义 javascript 代码来格式化用户输入。
3.  使用 jQuery（如果允许）并使用 jQuery datepicker

您可以使用自定义转换器将文本字段用于日期，[例如](https://stackoverflow.com/questions/10750991/nosuchmethodexception-in-struts2/10751705#10751705)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:58:35.707

The date format Struts accepts depends on the user's locale. So for different locales you can have different date formats. This way you won't be able to support multiple date formats for the same locale but I don't see why you would need this anyway, it's only going to confuse your users. The only way to support different date formats for the same locale without javascript would be with a custom date converter as @mprabhat notes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T16:05:39.720

您可以查看有关此的官方文档：

定义资源包中每种语言的格式。例如，适当的 en_US 格式定义扩展可能如下所示：

```
format.date = {0,date,MM/dd/yy} 
```

同时，您可以将以下内容添加到您的 de_DE 包中：

```
format.date = {0,date,dd.MM.yyyy} 
```

[http://struts.apache.org/2.1.6/docs/formatting-dates-and-numbers.html](http://struts.apache.org/2.1.6/docs/formatting-dates-and-numbers.html)

# rest - 在 Sitecore 中创建 REST 服务

> ID：10747246
> 
> 赞同：1
> 
> 时间：2012-05-25T01:03:36.463
> 
> 标签：rest, sitecore, sitecore6

我正在尝试在 Sitecore 根目录中构建 REST 服务。我的应用程序开始如下所示：

```
void Application_Start(object sender, EventArgs e) 
{
    RouteTable.Routes.MapHttpRoute(
        name: "DefaultApi", routeTemplate: "api/{controller}/{id}", defaults: new { id = System.Web.Http.RouteParameter.Optional });
} 
```

我的网址如下所示：

http://{mydomain}/api/books

我有正确的控制器和所有这些。

但 Sitecore 不断将我重定向到 404 页面。我在 web.config 中添加了 IgnoreUrlPrefixes 节点的路径，但无济于事。如果我不得不猜测，我会认为 Sitecore 的处理程序在我的代码有机会执行之前重定向，但我真的不知道。

有人知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:57:57.423

你的评估是正确的。您需要`httpRequestBegin`管道中的处理器来中止 Sitecore 的处理。请参阅`SystemWebRoutingResolver`此答案： [Sitecore 和 ASP.net MVC](https://stackoverflow.com/questions/1308226/sitecore-and-asp-net-mvc)

本文也对此进行了描述： [http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/10/Sitecore-MVC-Crash-Course.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/10/Sitecore-MVC-Crash-Course.aspx)

但我也会在此处包含代码。:)

```
public class SystemWebRoutingResolver : Sitecore.Pipelines.HttpRequest.HttpRequestProcessor
{
    public override void Process(Sitecore.Pipelines.HttpRequest.HttpRequestArgs args)
    {
        RouteData routeData = RouteTable.Routes.GetRouteData(new HttpContextWrapper(args.Context));
        if (routeData != null)
        {
            args.AbortPipeline();
        }
    }
} 
```

然后在您的`httpRequestBegin`配置中：

```
<processor type="My.SystemWebRoutingResolver, My.Classes" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T13:05:55.793

您可能想看看[Sitecore Web Api](http://sdn.sitecore.net/Products/Sitecore%20Item%20Web%20API.aspx)

这与您正在构建的几乎相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T13:52:07.757

另一种效果很好的选择是使用内容树、“星”项和专用于此目的的子布局/布局组合：

```
[siteroot]/API/*/*/*/*/*/*/*/*/* 
```

上述路径允许您拥有 1 到 9 个段之间的任何位置 - 如果您需要更多，您可能需要重新考虑您的流程，IMO。这也保留了所有 Sitecore 上下文。Sitecore 在无法在文件夹中找到项目时，会尝试查找包罗万象的明星项目，如果存在，它会呈现该项目而不是返回 404。

有几种方法可以执行 restful 方法和子布局（或子布局，如果您想按深度分离它们以简化解析）。

您可以选择遵循通用“标准”并使用 GET、PUT 和 POST 调用与这些项目进行交互，但是如果没有自定义后端缓存代码，您将无法使用 Sitecore Caching）。或者，您可以将 API 拆分为三个不同的树：

```
[siteroot]/API/GET/*/*/*/*/*/*/*/*/*
[siteroot]/API/PUT/*/*/*/*/*/*/*/*/*
[siteroot]/API/POST/*/*/*/*/*/*/*/*/* 
```

这允许缓存 GET 请求（因为 GET 请求应该只检索数据，而不是更新它）。确保使用正确的缓存方案，如果您打算在任何这些上下文中使用它，则基本上这应该基于数据、用户等的每个排列进行缓存。

如果要创建多个子布局，我建议创建一个处理 GET、PUT 和 POST 的通用方法的基类，然后将这些类用作子布局的基础。

在您的子布局中，您只需获取 Request 对象、获取路径（如果您正在使用查询，则查询）、拆分它并执行您的 switch case 逻辑，就像您使用标准路由一样。对于 PUT，使用 Response.ReadBinary()。对于 POST 使用 Request.Form 对象来获取所有表单元素并遍历它们以处理提供的信息（将所有表单数据放入单个 JSON 对象中，封装为字符串可能是最简单的（所以 .NET将其视为一个字符串，因此只有一个属性），然后您在帖子中只有一个元素可以根据用户指定的 POST 路径进行反序列化。

复杂？是的。作品？是的。受到推崇的？好吧...如果您处于共享环境（多个站点）中，并且您不希望管道处理器中的每个站点都进行此处理，那么此解决方案有效。如果您可以将 MVC 与 Sitecore 一起使用，或者在更改管道处理器时没有问题，那么这可能会更有效。

基于内容的方法的一个好处是上下文生命周期与标准 Sitecore 页面（登录等）完全相同，因此您拥有与生命周期中任何其他项目在该点提供的所有相同控件。不利的是，您必须在加载到您的代码之前处理整个页面生命周期加载......管道处理器可以跳过很多 Sitecore 的进程，直接获取您需要的数据，使其更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-29T08:35:04.113

你需要有一个用于路由的管道初始化器：它会像：

公共类初始化器

```
{
        public void Process(PipelineArgs args)
        {
        RouteCollection route = RouteTable.Routes;
        route.MapHttpRoute("DefaultApi", "api/{controller}/{action}/{id}",
        new { id = RouteParameter.Optional });
        }
} 
```

在配置文件中，您将拥有：

```
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <pipelines>
      <initialize>
    <processor type="_YourNameSpace.Initializer,_YourAssembly" />
      </initialize>
     </pipelines>
  </sitecore>       
</configuration> 
```

快乐编码

# php - 在 cakephp 中显示另一个表的属性

> ID：10747250
> 
> 赞同：0
> 
> 时间：2012-05-25T01:04:24.007
> 
> 标签：php, cakephp

我有两个表 Shift 和 ShiftSession。这种关系就像 shift 有很多 shiftsessions 而 shiftsession 属于 shift。

我像这样在 shiftsession 模型上定义关系。

```
var $name = 'ShiftSession';                    
var $belongsTo = array(        
      'Shift' => array(            
         'className'    => 'Shift',            
         'foreignKey'    => 'ShiftID'
       )    
    ); 
```

问题是我想在 shiftsession 表中显示班次的名称，而不是 shiftID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:41:55.653

你得试试：

```
$this->ShiftSession->find('all'); 
```

这将从`Shift`表中返回您相应的数据。

# c# - 有问题的属性设置

> ID：10747253
> 
> 赞同：0
> 
> 时间：2012-05-25T01:04:48.563
> 
> 标签：c#, winforms, properties, runtime, startup

我正在使用 WindowsFormsApplication 库构建一个项目，一切进展顺利，直到我注意到不再在运行时设置类属性。第一个例子发生在我设置 menustrip 热键时：设计器中的设置，它的代码在那里，我确保没有其他东西会在运行时通过使用方法而不是“属性”格式偷偷改变值。然后，不知何故，我设法通过调用一个专门为在初始化方法之后设置菜单条热键而创建的方法来解决这个问题。

现在，停靠属性将不会设置，或者换句话说：我将控件的停靠样式设置为 dockstyle.fill 并且当我最大化窗口时，就好像从未设置停靠样式一样，但是这样说的代码是还在那里！码头填充属性仅在片刻前成功运行...

我已经搜索了与我相似的问题，但只找到[了一个结果](http://bytes.com/topic/c-sharp/answers/878558-datagridview-properties-not-being-set-when-called-form-load)，但在我看来，提问者没有得到很好的答案。我没有太多时间，所以任何帮助将不胜感激！

同时，我会将所有控件移植到一个新表单中。这似乎对过去项目的另外两个事件起到了作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:16:51.350

我对 Visual Studio 产生了奇怪的结果，有时会失去理智。退出并重新启动似乎可以解决它。你用的是什么版本？

# c# - 智能检测html内容变化

> ID：10747254
> 
> 赞同：0
> 
> 时间：2012-05-25T01:04:53.803
> 
> 标签：c#, html, web-scraping

我正在寻找可以智能地检测 html 页面内容变化的算法/库（最好在 c# 中）。

例如，如果页面是 techcrunch.com，它只会在有新帖子或页面发生重大变化时匹配。它会忽略 html 评论、javascript、评论数量等次要更新……

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:31:19.200

对于我的假设，您使用 C# 程序请求页面。

实际上，有数百种方法可以做到这一点。

我给你一个：

第一，最简单和虚拟的算法..是

```
while(true) {
    checkModifyDate();

    if(date is newer) {
        do anything you want...
    }
    do it again in next 10 mins()
} 
```

该 checkModifyDate() 函数将**“仅”**检查 HTTP 标头的更改。
然后你以后可以做任何事情。

您可以将其添加到每 xxx 分钟运行一次的计时器对象或线程中，并将其设置为自动为您完成工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:17:41.170

您可以使用 JavaScript 来计算页面或页面的特定部分上有多少元素。有数千种方法可以实现 JS 来检测变化。

# blogger - 使用标准帖子 URL 检索 Atom 格式的博客帖子

> ID：10747258
> 
> 赞同：2
> 
> 时间：2012-05-25T01:05:45.017
> 
> 标签：blogger, atom-feed

假设我有一篇博文的网址，myblog.blogspot.com/2012/05/myblogs-latest-post.html

仅使用此信息，是否有任何合理直接的方法来检索 Atom（或 RSS）格式的单个博客文章？

背景：我正在使用其 Atom 提要为 Blogger 博客创建一个移动应用程序界面。当博客文章链接到它自己的另一篇文章时，我想以与源页面相同的方式显示链接页面，因此我需要 Atom 提要格式。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T10:21:58.543

在寻找类似功能时，我从 Blogger API 中发现了这一点。可以从特定帖子访问数据。在 Google Developers 上查看[此链接。](https://developers.google.com/blogger/docs/3.0/using#RetrievingASpecificPost)

我不确定您是否可以获取 ATOM 格式的数据，但我认为您可以获取 JSON 格式的响应。

更新：我也能够获得此信息。应该是您正在寻找的 -[来源](https://support.google.com/blogger/answer/97933?hl=en)

`Atom 1.0: http://blogname.blogspot.com/feeds/postId/comments/default`

**注意**：您可以从 Posting | 中找到单个帖子的 postId。编辑帖子选项卡。只需将鼠标悬停在特定帖子旁边的“编辑”链接上，该 postId 就会显示在浏览器的状态栏中。

# c# - 使用 RestSharp 将 GET 参数添加到 POST 请求

> ID：10747261
> 
> 赞同：22
> 
> 时间：2012-05-25T01:06:12.613
> 
> 标签：c#, .net, web-services, webservice-client, restsharp

我想向这样的 URL 发出 POST 请求：

```
http://localhost/resource?auth_token=1234 
```

我想在正文中发送 JSON。我的代码看起来像这样：

```
var client = new RestClient("http://localhost");
var request = new RestRequest("resource", Method.POST);
request.AddParameter("auth_token", "1234");    
request.AddBody(json);
var response = client.Execute(request); 
```

如何将`auth_token`参数设置为 GET 参数并将请求设为 POST？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-03-23T10:24:39.090

当前版本的 RestSharp 有一个使用模板的简短方法：

```
var request = new RestRequest("resource?auth_token={token}", Method.POST);
request.AddUrlSegment("token", "1234"); 
```

或者，您可以添加不带模板的参数：

```
var request = new RestRequest("resource", Method.POST);
request.AddQueryParameter("auth_token", "1234); 
```

或者

```
var request = new RestRequest("resource", Method.POST);
request.AddParameter("auth_token", "1234", ParameterType.QueryString); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-08T00:48:52.587

如果您 1) 将令牌添加到资源 url 并且 2) 像这样指定 ParameterType.UrlSegment，这应该可以工作：

```
var client = new RestClient("http://localhost");
var request = new RestRequest("resource?auth_token={authToken}", Method.POST);
request.AddParameter("auth_token", "1234", ParameterType.UrlSegment);    
request.AddBody(json);
var response = client.Execute(request); 
```

这远非理想 - 但我发现的最简单的方法......仍然希望找到更好的方法。

# php - TCPDF：使用 writeHTML 逐个写入多个图像会将图像呈现为“楼梯”形状而不是直线

> ID：10747262
> 
> 赞同：1
> 
> 时间：2012-05-25T01:06:20.667
> 
> 标签：php, html, tcpdf

我正在使用 PHP 类 TCPDF 的 writeHTML 方法来创建 PDF 文档。它工作得很好，似乎涵盖了我需要的东西，但是当我尝试使用 HTML 元素按顺序创建多个图像时，图像不会以我期望的直线呈现。相反，每个连续图像的位置在 y 轴上增加（或在某些情况下减少）几个像素，因此使图像序列看起来像“楼梯”：

我所期望的（每个 x 都是一张图片）：

```
x x x 
```

我得到什么：

```
x
 x
  x 
```

有时我会反过来理解：

```
 x
 x
x 
```

HTML 标记如下所示：

```
<img src="x.png"><img src="x.png"><img src="x.png"><img src="x.png"> 
```

HTML 通常不会以这种方式运行，我没有通过谷歌搜索找到任何解决方案。任何帮助，将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:42:04.350

你有没有考虑过把它放在桌子上？

```
<table>
  <tr>
   <td>
     <img src="x.png">
   </td>
   <td>
     <img src="x.png">
   </td>
   <td>
     <img src="x.png">
   </td>
   <td>
     <img src="x.png">
   </td>
 </tr>
</table> 
```

# c++ - 在 C++ 中通过迭代更新字符串

> ID：10747266
> 
> 赞同：1
> 
> 时间：2012-05-25T01:06:54.887
> 
> 标签：c++, windows

好的，所以我正在尝试制作一个字符串，以便更新字符串。有点像你有一个字符串“hello”，我希望它更新自己有点像“h”“he”“hel”“hell”“hello”

所以我有：

```
#include <iostream>
#include <string>
#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>

using namespace std;

int main()
{
    system("title game");
    system("color 0a");
    string sentence = "super string ";

    for(int i=1; i<sentence.size(); i++){
        cout << sentence.substr(0, i) <<endl;
    }
    return 0;
} 
```

代码返回如下：

"s "su" "sup" "supe" "超级"

显然在不同的行上，但是当我删除结尾行时，句子生成器就会发疯。它显示类似“spupsppuepr sttrrrtrsubstringsubstring”的内容

无论如何我可以更新同一行上的字符串吗？（并没有完全摧毁它）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:13:19.257

您可以在每次迭代时打印一个回车符`'\r'`，将光标返回到行首：

```
for(int i=1; i<sentence.size(); i++){
    cout << '\r' << sentence.substr(0, i);
} 
```

或者只是按顺序输出每个字符：

```
for(int i=0; i<sentence.size(); i++){
    cout << sentence[i];
} 
```

您可能还想为每个循环迭代插入一个短暂的延迟以实现打字机效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:13:19.500

运行您的代码会产生以下结果：

./a.out
ssusupsupesupersuper super ssuper stsuper strsuper strisuper strinsuper string

这正是你告诉它要做的事情。它与 endl 相同，但没有换行符。如果您不希望它重复所有字母，则需要遍历字符串本身，而不是遍历子字符串。

```
using namespace std;

int main()
{
    system("title game");
    system("color 0a");
    string sentence = "super string ";

    for(int i=0; i<sentence.size(); i++){
        cout << sentence[i];
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T02:30:29.017

我的建议：使用`While loop`.

```
#include <stdio.h>
#include <iostream>

int main() {
    system("title game");
    system("color 0a");
    char* sentence = "super string";

    while( *sentence ) std::cout <<  *sentence++;
    return 0;
} 
```

# css - Twitter Bootstrap 横向插入符号

> ID：10747267
> 
> 赞同：38
> 
> 时间：2012-05-25T01:07:13.293
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap 和一些自定义 css（在[此处](https://stackoverflow.com/a/10143018/351614)找到）在鼠标悬停时打开下拉菜单。

我在根菜单项上使用“插入符号”来向用户显示有更多可用选项，我想为子菜单使用它的横向版本，在那个例子中他们使用 -> 图像但是我不要认为它真的适合 UI 的其余部分。

我也试过推特的播放图标，但也不完全匹配。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-25T01:27:00.607

只需切换边界（[见小提琴](http://jsfiddle.net/r6zuY/)）：

**HTML**

```
<b class="caret-right"></b> 
```

**CSS**

```
.caret-right {
    border-bottom: 4px solid transparent;
    border-top: 4px solid transparent;
    border-left: 4px solid;
    display: inline-block;
    height: 0;
    opacity: 0.3;
    vertical-align: top;
    width: 0;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-27T16:29:19.823

我通过添加一个简单地修改边框样式以将插入符号指向右侧的类来做到这一点。这样，您可以通过添加/删除修改类来向右/向下切换插入符号。

HTML：

```
<span class='caret caret-right'></span> 
```

CSS：

```
.caret-right {
    border-left: 4px solid;
    border-bottom: 4px solid transparent;
    border-top: 4px solid transparent;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-20T13:45:20.933

使用引导程序 (3.0) Glyphicons

```
<span class="glyphicon glyphicon-chevron-up"></span> <!-- UP -->
<span class="glyphicon glyphicon-chevron-down"></span> <!-- DOWN--> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-26T01:09:24.320

我使用这些样式来做到这一点（它也可以在没有引导程序的情况下工作）

**HTML：**

```
<span class="caret up"></span>
<span class="caret right"></span>
<span class="caret down"></span>
<span class="caret left"></span> 
```

**CSS：**

```
.caret {
    border: 5px solid transparent;
    display: inline-block;
    width: 0;
    height: 0;
    opacity: 0.5;
    vertical-align: top;
}
.caret.up {
    border-bottom: 5px solid;
}
.caret.right {
    border-left: 5px solid;
}
.caret.down {
    border-top: 5px solid;
}
.caret.left {
    border-right: 5px solid;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-01-20T13:02:31.127

正如 user2661940 所说，您可以将 glyphicons 用于 Bootstrap 3，或者您也可以为每一面制作自己的类。例如

```
.caret-right {
  display: inline-block;
  width: 0;
  height: 0;
  margin-left: 2px;
  vertical-align: middle;
  border-left: 4px solid;
  border-bottom: 4px solid transparent;
  border-top: 4px solid transparent;
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-08-10T02:17:21.107

任何使用 font awesome 的人的另一个选择：

```
<i class="fa fa-caret-right" aria-hidden="true"></i> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-10-04T23:59:51.527

我向跨度添加了一个旋转类

HTML：

```
<span class="rotate270 caret"></span> 
```

CSS：

```
.rotate270 {
    -webkit-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -o-transform: rotate(-90deg);
    -ms-transform: rotate(-90deg);
    transform: rotate(-90deg);
} 
```

您显然可以根据需要创建其他角度类。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-01-07T14:39:24.523

你可以使用简单的代码：

**HTML**

```
<span class="caret"></span> 
```

**CSS：**

```
.caret{
border-color:#ffffff transparent transparent transparent;
border-width:4px;
border-style:solid;
content: ""
display:inline-block;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-25T19:05:30.183

只需添加 css 即可在鼠标悬停时旋转插入符号

```
.navbar-nav>li>.dropdown-menu{
    display:block;
    visibility:hidden;

}
.navbar-nav>li:hover>.dropdown-menu{
    visibility:visible;
}
.navbar-default .navbar-nav>li:hover>a .caret{
    transform:rotate(-90deg);
    transition:all 0.3s ease-in-out;
} 
```

# android - 是否可以让活动在设置方法中运行到最后？

> ID：10747269
> 
> 赞同：0
> 
> 时间：2012-05-25T01:07:21.873
> 
> 标签：android, junit, tdd

目前，我正在尝试使用 android stock junit 框架做一些 TDD。

我想点击一个按钮，让活动在`setUp`方法中从远程服务器获取文件，然后在下面的测试方法中，我可以检查是否生成了这个文件。但是我在调`performClick`​​用后发现`setUp`，活动完成了，没有执行生成文件代码。所以我正在寻找一种方法让活动运行所有代码，然后执行测试方法。也许`Thread.sleep(2000)`可以解决这个问题，但我怀疑有没有更好的方法。

这是代码：

```
@UiThreadTest
protected void setUp() throws Exception {
    try {
        runTestOnUiThread(new Runnable() {
            @Override
            public void run() {
                ((EditText)mActivity.findViewById(R.id.edit_server)).setText("http://192.168.120.248/hz/temp/phonebook.xml");
                click(R.id.ok);
            }
        });
    } catch (Throwable e) {
    }
}

public void testFileExist() throws Exception  {
    assertTrue(isFileExist());
}

private boolean isFileExist() {
    File file = new File("/tmp/phonebook.xml");
    boolean exists = file.exists();
    if (exists) {
        file.delete();
    }

    return exists;
} 
```

# php - 正确的 PHP 编码风格

> ID：10747270
> 
> 赞同：4
> 
> 时间：2012-05-25T01:07:30.377
> 
> 标签：php, standards

我正在开发一个新项目，该项目将大量使用对 PHP 的不同 AJAX 调用。创建一个包含所有不同函数的文件并使用 case 语句来选择正确的文件是否合适，或者我应该创建一个 php 文件夹并将每个函数放在自己的文件中？

我正试图让我的技能回到现代网页设计标准和实践的轨道上，而在过去，为了简单起见，一个文件来统治它们是一种方法；但是，发生了很大的变化，以至于在我将 10,000 行代码放入这个项目之前，我想问一下。

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:14:49.117

这个问题会引起很多个人意见。

案例和观点，我的观点：

代码可重用性是任何编程语言的关键。将类似的函数一起存储在一个包含文件中，将类型（或者您组织的函数）包含在您需要这些函数的主模块中。您不应该在每个文件中放置一个函数，而是同时放置一个巨大的函数包含 400 个函数的文件将是一场噩梦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T01:20:54.460

只需使用现代框架和它将强加于您的编码的风格。
并使用 Opcode，这将使您能够编写更清晰的代码而不会影响性能。
一些现代框架名称将是 Zend、Yii、Codeigniter 等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T02:25:06.970

与其考虑实现问题，为什么不考虑接口呢？这就是我的意思，你可以将真正的工作分开在某个地方的类中完成，然后让 ajax 调用另一个单独的类/函数。然后通过ajax调用的函数可以查询不同的类/对象来完成工作并将响应发送回ajax。它可能听起来像 MVC 模式。这样做的好处显然是代码的可重用性、改进的解耦和更容易的代码维护。例子：

```
class Cook{

    function friedEgg(){/**/}
    function currySoup(){/**/}
    function sandwich(){/**/}
} 
```

通过ajax调用的函数可以是

```
function ajaxBreakfast(){
    $cook = new Cook;
    $result = $cook->friedEgg();
    $result .= $cook->sandwich();
    echo $result;
}

function ajaxLunch(){
    $cook = new Cook;
    $result = $cook->currySoup();
    echo $result;
} 
```

希望你明白我的意思！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T01:14:30.030

如果我理解，将所有功能放在同一个文件中是完全可以的（如果您正在制作一个非常大的网站，您可能应该将它们分开；就像本节的函数，该节的函数）。

我不确定您为什么要使用 switch 语句来选择它们；有时它很有用，但通常你不会直接调用函数吗？就像包含“库”文件，并在用户注册时调用“getNewId()”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T01:16:49.977

海事组织这取决于。

如果您的 Ajax 脚本有 10,000 行，并且您每秒处理数十或数百个 Ajax 请求，并且您*没有*为 PHP 使用操作码缓存，那么您将浪费大量时间和资源将如此大的脚本加载到内存中，解析它，并从中执行几行。

如果你有 2,000 行，每分钟有几十个 ajax 调用，那么这没什么大不了的。

每个函数一个文件也可能有点矫枉过正，也许有一些函数可以组合在一起，然后在调用与该文件相关的任何函数时包含该文件。

# jquery - jQuery Slider - 下一个图像在后面分成两半

> ID：10747271
> 
> 赞同：0
> 
> 时间：2012-05-25T01:07:37.953
> 
> 标签：jquery, jquery-plugins, slider, jquery-ui-slider

我想创建一个 jQuery 滑块，显示当前图片后面的下一张图片，只是它被分成两半。它会向外呈金字塔状。就像是：

[3[2[1]2]3]

然后，随着当前图片的消失，我需要每隔 X 秒将两半聚集在一起......

我觉得它应该很简单，但我无法理解这个概念！打算休息一下再试一次，但目前如果有人有任何建议，我会非常感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:19:34.343

想要跟进并说我从来没有真正找到一种方法来做到这一点。很快就决定反对这个想法，并没有做太多其他研究。对不起

# java - TCP 套接字关闭并重新绑定

> ID：10747272
> 
> 赞同：0
> 
> 时间：2012-05-25T01:07:57.890
> 
> 标签：java, sockets, bind

我在 JAVA 中有一个项目，在其中我将 tcp 套接字绑定到特定端口。

当我为端口 X 上的套接字绑定调用 close() 方法时，我无法在端口 X 上绑定新套接字几秒钟，尽管我已经调用了 close() 方法。但是几秒钟后就可以绑定了。

发生这种情况正常吗？还是我应该再次检查我的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:14:28.337

> 我在特定端口绑定 tcp 套接字

这就是那里的问题，解决方案是不这样做。让系统选择。

绑定到特定的本地端口不是任何事情的解决方案，至少不是任何理智的事情。有时，过分热情的网络管理员会错误地认为（a）它增加了安全性并且（b）它很容易实现，从而指定出站端口范围。两者都不正确。

TIME_WAIT 状态不是“操作系统 [需要] 一段时间才能收到通知”，它是 TCP 的一项基本安全功能。关闭的套接字会持续几分钟。除非您绑定到特定的本地出站端口，否则这是一项功能，而不是错误。

# javascript - 比较 Highcharts 组合图中工具提示内的两个数据点

> ID：10747277
> 
> 赞同：2
> 
> 时间：2012-05-25T01:10:12.013
> 
> 标签：javascript, highcharts

我有一个组合条形图，共享一个 Y 轴。

条形图和折线图的数据点始终共享相同的 Y 值。我希望能够计算工具提示中两个 X 值之间的差异。

这是我正在使用的图表：

[组合图](http://jsfiddle.net/7RQU4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:39:18.047

让它工作。诀窍在于工具提示的共享和格式化程序属性：

```
 tooltip: {

            shared: true,

            formatter: function() {

                var s= this.points[1].y - this.points[0].y;

                return s;

            }

        }, 
```

# javascript - 如何使用 Javascript 将 cookie 存储在本地存储中？

> ID：10747280
> 
> 赞同：4
> 
> 时间：2012-05-25T01:10:35.180
> 
> 标签：javascript, cookies, local-storage

我有一个基于 Javacript 的 Android 应用程序（希望以后是 iPhone），并使用 Phonegap/Applaud 制作成一个应用程序。

不幸的是，设置和获取 cookie 不适用于 Android，这可能是特定于 Android 环境的。有人建议我使用“本地存储”可能更可靠。

然而，直到今天早上我才对本地存储一无所知，所以我很难去熟悉。据我所知，它基本上只是另一个用不同语法保存数据的地方。就我的情况而言，除了 Android 强迫我使用它之外，我认为它没有给我任何优于 cookie 的优势。因此，我希望我仍然可以利用我现有的代码来设置和获取 cookie，而不必采用全新的方法。

当然，我可以在我的 Javascript 中做一个测试，看看是否有本地存储，如果有，就在那里存储和检索我的 cookie 数据，如果没有，那么就照常使用 cookie？

***注意 1：***我在 Stack Overflow 上搜索了类似的问题，有[一个乍一看似乎正是我在说的](https://stackoverflow.com/questions/8347200/local-storage-android-and-phonegap)，但它太简洁了，所以我无法解析它以了解我应该如何处理它。另外，我认为它假设存在我认为我没有的库和代码。我也看过[这个问题](https://stackoverflow.com/questions/6130480/write-local-storage-data-into-cookie-via-javascript)，但我认为它与我所追求的相反。

***注意 2：***这是我当前用于获取和设置 cookie 的代码（从网络上的某个地方获取。直到 Android 问题出现之前，它是坚如磐石的可靠）：

```
function getCookie(c_name)
{
    var c_start = document.cookie.indexOf(c_name + "=");

    if (document.cookie.length > 0)
    {
        if (c_start !== -1)
        {
            return getCookieSubstring(c_start, c_name);
        }
    }
    return "";
}

function setCookie(c_name, value, expiredays)
{
        var exdate = new Date();
        exdate.setDate(exdate.getDate() + expiredays);
        document.cookie = c_name + "=" + escape(value) +
        ((expiredays === null) ? "" : ";expires=" + exdate.toUTCString());
        alert("this is document.cookie: " + document.cookie);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T01:22:16.137

看看[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)。历史可能一点也不有趣，但它至少提供了一个很好的链接列表，可以链接到[延伸阅读部分](http://diveintohtml5.info/storage.html#further-reading)中的其他教程。

所以，现在到你的代码。首先要提到的是`localStorage`没有过期 - 它是持久的（直到用户手动清理所有内容）。如果您想使用更短的存储空间，您也可以使用`sessionStorage`，它具有相同的界面，但仅持续到浏览器关闭。

改写你的代码很简单：

```
function getCookie(c_name) {
    return localStorage.getItem(c_name);
}

function setCookie(c_name, value, expiredays) {
    return localStorage.setItem(c_name, value);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T01:51:57.407

我在其他答案中使用了这些信息，所以这不是一个不同的答案，但我只是认为查看我最终得到的完整代码对其他人会有所帮助。这几乎可以作为使用 cookie 的替代品（就像我一样）。它测试本地存储，如果存在则使用它，如果不存在则使用 cookie。

*请注意，您可能希望在实施时删除警报。*

```
function getCookie(c_name)
{
    if(typeof localStorage != "undefined")
    {
        return localStorage.getItem(c_name);
    }
    else
    {
        var c_start = document.cookie.indexOf(c_name + "=");
        if (document.cookie.length > 0)
        {
            if (c_start !== -1)
            {
                return getCookieSubstring(c_start, c_name);
            }
        }
        return "";
    }
}

function setCookie(c_name, value, expiredays)
{
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + expiredays);
    if(typeof localStorage != "undefined")
    {
        alert("This place has local storage!");
        localStorage.setItem(c_name, value);
    }
    else
    {
        alert("No local storage here");
        document.cookie = c_name + "=" + escape(value) +
        ((expiredays === null) ? "" : ";expires=" + exdate.toUTCString());
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T01:15:42.527

`localStorage`行为与常规对象完全相同。

```
localStorage.somekey = "My data"; // set
alert(localStorage.somekey); // get
delete localStorage.somekey; // unset 
```

与任何其他对象之间唯一真正的区别`localStorage`是它是持久的。来自同一来源的任何页面都可以访问对象中的值，并且即使浏览器关闭，它们也可以继续存在。

它们在数据存储方面在各个方面都优于 cookie，因为它们不会在每个请求中都被发送到服务器（尽管这并不是说 cookie 没有用 - 两者都有其优点）。

这真的很简单；）

# iphone - 下载文件时 UIWebView 锁定/冻结/挂起应用程序？

> ID：10747286
> 
> 赞同：0
> 
> 时间：2012-05-25T01:11:27.830
> 
> 标签：iphone, objective-c, xcode, ios5, uiwebview

当用户单击下载链接时，我的应用程序使用 UIWebView 加载网站并下载文件，应用程序冻结直到文件完成下载，然后应用程序恢复正常，它不会崩溃，它只是冻结.. 我该如何解决这？

我使用此代码下载

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
{

if(navigationType == UIWebViewNavigationTypeLinkClicked) 
{
    NSURL *requestedURL = [request URL];

    // ...Check if the URL points to a file you're looking for...
    // Then load the file
    NSData *fileData = [[[NSData alloc] initWithContentsOfURL:requestedURL] autorelease];

    // Get the path to the App's Documents directory
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
    [fileData writeToFile:[NSString stringWithFormat:@"%@/%@", documentsDirectory, [requestedURL lastPathComponent]] atomically:YES];
} 
return YES;
}

- (NSString *)documentsDirectoryPath {
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [paths objectAtIndex:0];
return documentsDirectoryPath;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:14:19.073

请参阅 Apple iOS 5.1 文档中的“URL 加载系统编程指南”。您需要设置一个异步请求。URL 加载系统有许多代码示例。

# javascript - JQuery：任何浏览 div 插件

> ID：10747290
> 
> 赞同：2
> 
> 时间：2012-05-25T01:13:04.540
> 
> 标签：javascript, jquery

想象一下，我有一个 5x5 div 的网格，第一个是用 class="selected" 选择的

是否有任何插件准备好，所以我可以使用我的键盘箭头在该网格中向左/向右导航？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:32:03.683

我还没有看到任何提供此功能的插件，但这是一个相对简单有趣的问题，所以我试了一下。

对于 HTML，您的网格结构如下：

```
<div class="container">
  <div class="boxrow">
    <div class="box selected"></div>
    <div class="box"></div>
    <div class="box"></div>
  </div>
  <div class="boxrow">
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
  </div>
  <div class="boxrow">
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
  </div>
</div> 
```

对于样式，这里有一些简单的东西可以帮助您入门：

```
.box {
  height: 5px;
  width:5px;
  border: 1px solid #c0c0c0;
  margin: 1px;
  float: left;
}

.selected {
  background-color: blue;
}

.boxrow {
  clear: both;
}​ 
```

最后，这里是 Javascript。如果你想扩展功能，你可以把它变成一个插件。

```
$(document).keydown(function(event) {

    var selected = $('.selected');
    var row = selected.parent('.boxrow');
    var index = row.children('.box').index(selected);

    switch (event.keyCode) {
      case 37: // left
        if (selected.prev('.box').length != 0)
          selected.removeClass('selected').prev('.box').addClass('selected');
        break;
      case 38: // up
        var prevRow = row.prev('.boxrow');
        if (prevRow.length != 0) {
          selected.removeClass('selected');
          prevRow.children('.box').eq(index).addClass('selected');
        }
        break;
      case 39: // right
        if (selected.next('.box').length != 0) 
          selected.removeClass('selected').next('.box').addClass('selected');
        break;
      case 40: // down
        var nextRow = row.next('.boxrow');
        if (nextRow.length != 0) {
          selected.removeClass('selected');
          nextRow.children('.box').eq(index).addClass('selected');
        }
        break;
    }

});​ 
```

玩得开心，希望你觉得这很有用。

**这是一个 [jsfiddle 演示](http://jsfiddle.net/gizmovation/x4f99/)。**

# android - Android 上的新闻提要

> ID：10747294
> 
> 赞同：1
> 
> 时间：2012-05-25T01:13:41.357
> 
> 标签：android, facebook, feed

我想创建一些类似于 facebook 新闻源的样式。

我明白这不应该是简单的。所以我只想知道如何开发它。

这就是我想要创建的：

[https://lh4.ggpht.com/HG8XNTrr_sS5FXhd_zFKAoAB9KDPzmD9LEopuDj3kxJdEO8gUvv2IyFNJUd50XMhO-w](https://lh4.ggpht.com/HG8XNTrr_sS5FXhd_zFKAoAB9KDPzmD9LEopuDj3kxJdEO8gUvv2IyFNJUd50XMhO-w)

我相信 Facebook 应该提出请求并拥有一个 xml/json。收到响应后，应用程序应根据从 API 收到的信息设置内容样式。

你有一个教程/想法我怎么能做类似的事情？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:14:50.970

这是一个非常好的 ListViews 教程。本质上，Newsfeed 中的每个“帖子”都是 ListView 中的一个项目。您必须将数据绑定到 ListView 并为每个帖子提供视图。

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# html - 无法让 CSS 样式传播到 IE9 中的表格单元格中

> ID：10747296
> 
> 赞同：0
> 
> 时间：2012-05-25T01:13:53.817
> 
> 标签：html, css, internet-explorer-9

下面的示例适用于 chrome 和 fire fox。两者都将文本呈现为红色。为什么IE9会失败？

这是一个例子：

```
<style>
.tableX td
{
  color:red;
}
</style>

<table class='tableX'>
 <tr>
  <td>
    My Text
  </td>
 </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:36:10.200

出于某种奇怪的原因，我的浏览器进入了一种奇怪的模式。必须测试了太多新的 HTML5 功能：-{ 无论如何，它在重新启动浏览器后工作。谢天谢地，我没有花三个多小时在上面。哎呀。是我最初的想法。但是问题与缓存有关。

为了防止 IE 缓存 AJAX 请求，我在查询字符串中添加了一个包含随机数的变量，如下所示：

queryString + "?comonIE=" + MATH.random().toString().slice(2)

# android - ViewPagerIndicator 不显示标题文本

> ID：10747297
> 
> 赞同：6
> 
> 时间：2012-05-25T01:13:56.287
> 
> 标签：android, actionbarsherlock, android-actionbar, viewpagerindicator

我使用 ActionBarSherlock 和 ViewPagerIndicator 库来实现滑动效果和操作栏。结果，我可以刷不同的Fragment，但是没有显示指标标题。

![截屏](../Images/315b38f4350add2eae3742e4a6d33fe7.png)

这是我的 FragmentActivity

```
public class eventActivity extends SherlockFragmentActivity {
    ViewPagerFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.event_layout);

    ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayUseLogoEnabled(true);

    mAdapter = new ViewPagerFragmentAdapter(getSupportFragmentManager());
    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);
    mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
    mIndicator.setCurrentItem(1);

}
   ...... 
```

这是我的适配器

```
 public static class ViewPagerFragmentAdapter extends FragmentPagerAdapter implements TitleProvider {

    ArrayList<Fragment> fragments = new ArrayList<Fragment>();
    ArrayList<String> titles = new ArrayList<String>();

    public ViewPagerFragmentAdapter(FragmentManager fm) {
        super(fm);
        fragments.add(new eventInvitedFragment());
        titles.add("Invited");
        fragments.add(new eventAllFragment());
        titles.add("all");
        fragments.add(new eventParticipatedFragment());
        titles.add("participated");
    }

    @Override
    public Fragment getItem(int position) {
        return fragments.get(position);
    }

    @Override
    public int getCount() {
        return fragments.size();
    }

    @Override
    public String getTitle(int position) {
        return titles.get(position);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T08:53:40.263

我通过在 ViewPagerFragmentAdapter 中将 getTitle(int position) 更改为 getPageTitle(int) 解决了这个问题。ViewPagerIndicator ChangLog 有如下描述：

> 标题指示器适配器回调现在使用 r6 版本的支持库中引入的标准 getPageTitle(int) 方法。

# java - iPhone 应用程序所需的服务器端后端的最佳语言是什么？

> ID：10747305
> 
> 赞同：-2
> 
> 时间：2012-05-25T01:14:53.483
> 
> 标签：java, iphone, ruby, scala

服务器每天将处理大量数据，需要快速。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:18:45.487

最好的语言是您和您的团队最了解的语言 - 使用您精通的语言编写服务器会比您刚学会的语言做得更好。

它还很大程度上取决于您的问题的细节。您提到了“大量数据”，但不是这意味着什么。那可能是每天 100MB、每天 1TB、每天 15PB？

这是大批量处理，还是大量的小交互操作？

在您标记的三种特定语言中，Java、Scala 和 Ruby，这三种语言都是真正的公司在市场上取得成功的合理选择。

JVM 托管语言通常会比传统的 MRI Ruby “更快”，而在原始 CPU 功能方面，Java 和 Scala 通常都比 JRuby “更快”。

在这三者中，Scala 可能为不熟悉它的开发人员提供了最不熟悉、最具挑战性的范例，但与其他选项相比，它在核心中提供了非常好的并行和并发编程工具。

最后，您的最终结果将受到您选择的生态系统的其他部分（网络或消息处理堆栈、数据存储引擎和其他问题）的实质性影响，甚至更多。他们或许应该更多地支配你的语言，而不是你的语言支配你的生态系统。

# r - 图例位置，ggplot，相对于绘图区域

> ID：10747307
> 
> 赞同：71
> 
> 时间：2012-05-25T01:15:20.647
> 
> 标签：r, ggplot2

我认为这里的问题有点明显。我希望将图例放置（锁定）在“绘图区域”的左上角。由于多种原因，使用 c(0.1,0.13) 等不是一种选择。

有没有办法改变坐标的参考点，使它们相对于绘图区域？

```
mtcars$cyl <- factor(mtcars$cyl, labels=c("four","six","eight"))
ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + 
opts(legend.position = c(0, 1), title="Legend placement makes me sad") 
```

![在此处输入图像描述](../Images/5d5c360ba6ee87e433276f080d2ccc25.png)

干杯

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-25T02:04:43.557

**更新：`opts`已被弃用。请`theme`改用，如[本答案中所述。](https://stackoverflow.com/a/35193668/4975218)**

只是为了扩展kohske的答案，所以下一个人偶然发现它会更全面。

```
mtcars$cyl <- factor(mtcars$cyl, labels=c("four","six","eight"))
library(gridExtra)

a <- ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + 
opts(legend.justification = c(0, 1), legend.position = c(0, 1), title="Legend is top left")
b <- ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + 
opts(legend.justification = c(1, 0), legend.position = c(1, 0), title="Legend is bottom right")
c <- ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + 
opts(legend.justification = c(0, 0), legend.position = c(0, 0), title="Legend is bottom left")
d <- ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + 
opts(legend.justification = c(1, 1), legend.position = c(1, 1), title="Legend is top right")

grid.arrange(a,b,c,d) 
```

![在此处输入图像描述](../Images/74b14e4cd05122f0e66794e4d633fd65.png)

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2016-02-04T06:06:07.423

我一直在寻找类似的答案。但发现该`opts`功能不再是 ggplot2 包的一部分。在搜索了一段时间后，我发现可以用`theme`它来做与 opts 类似的事情。因此编辑此线程，以尽量减少其他人的时间。

下面是**nzcoops**编写的类似代码。

```
mtcars$cyl <- factor(mtcars$cyl, labels=c("four","six","eight"))
library(gridExtra)

a <- ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + labs(title = "Legend is top left") + 
theme(legend.justification = c(0, 1), legend.position = c(0, 1))

b <- ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + labs(title = "Legend is bottom right") +
theme(legend.justification = c(1, 0), legend.position = c(1, 0))

c <- ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + labs(title = "Legend is bottom left") +
theme(legend.justification = c(0, 0), legend.position = c(0, 0))

d <- ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + labs(title = "Legend is top right") +
theme(legend.justification = c(1, 1), legend.position = c(1, 1))

grid.arrange(a,b,c,d) 
```

此代码将给出完全相同的情节。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2012-05-25T01:35:49.887

**更新：`opts`已被弃用。请`theme`改用，如[本答案中所述。](https://stackoverflow.com/a/35193668/4975218)**

默认情况下，指南的放置基于绘图区域（即灰色填充的区域），但对齐是居中的。所以你需要设置左上对齐：

```
ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + 
  opts(legend.position = c(0, 1), 
       legend.justification = c(0, 1), 
       legend.background = theme_rect(colour = NA, fill = "white"),
       title="Legend placement makes me happy") 
```

![在此处输入图像描述](../Images/bc8a731dfe2c64f7dc4bee774b087c59.png)

如果要将指南放置在整个设备区域，可以调整 gtable 输出：

```
p <- ggplot(mtcars, aes(x=wt, y=mpg, colour=cyl)) + geom_point(aes(colour=cyl)) + 
  opts(legend.position = c(0, 1), 
       legend.justification = c(0, 1), 
       legend.background = theme_rect(colour = "black"),
       title="Legend placement makes me happy")

gt <- ggplot_gtable(ggplot_build(p))
nr <- max(gt$layout$b)
nc <- max(gt$layout$r)
gb <- which(gt$layout$name == "guide-box")
gt$layout[gb, 1:4] <- c(1, 1, nr, nc)
grid.newpage()
grid.draw(gt) 
```

![在此处输入图像描述](../Images/c9ac1166a57a62f75671fc60450f3bb8.png)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-06-11T16:19:28.477

要扩展上面的优秀答案，如果要在图例和框外部之间添加填充，请使用`legend.box.margin`：

```
# Positions legend at the bottom right, with 50 padding
# between the legend and the outside of the graph.
theme(legend.justification = c(1, 0), 
    legend.position = c(1, 0),
    legend.box.margin=margin(c(50,50,50,50))) 
```

这适用于撰写本文时的最新版本`ggplot2`v2.2.1。

# android - 滚动视图没有响应

> ID：10747308
> 
> 赞同：0
> 
> 时间：2012-05-25T01:15:27.123
> 
> 标签：android, xml, scrollview

非常适合纵向模式。如果我进入横向模式，我会在屏幕中央绘制我的活动，这会在左侧和右侧留下空白屏幕。如果我通过将鼠标保持在视图（即中心）上进行拖动，则滚动生效。如果我在空的右侧拖动没有滚动？为什么 ？

![附加](../Images/4045373644e3c5cb5fe086ed8a56c716.png)图片

发布我的布局 xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/enter_pin_scroll"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scrollbarStyle="outsideOverlay" >

        <RelativeLayout
            android:id="@+id/enter_pin_header_layout"
            android:layout_width="@dimen/pin_inset_region_width"
            android:layout_height="@dimen/pin_inset_region_height"
            android:layout_centerHorizontal="true"
            android:layout_gravity="center_horizontal" >

            <LinearLayout 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:14:51.997

据推测，您的 ScrollView 的宽度设置为`wrap_content`，因此，拨号盘外的触摸事件没有任何效果。

您可以通过更改来解决此问题，

```
<ScrollView 
    android:layout_width="wrap_content" 
    ... /> 
```

至，

```
<ScrollView 
    android:layout_width="match_parent" 
    ... /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:20:34.790

如果每个视图都存储在 ScrollView 中，为什么不删除 RelativeLayout 呢？直接拥有：

```
<ScrollView
    android:id="@+id/enter_pin_scroll"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbarStyle="outsideOverlay" >

    <RelativeLayout
        android:id="@+id/enter_pin_header_layout"
        android:layout_width="@dimen/pin_inset_region_width"
        android:layout_height="@dimen/pin_inset_region_height"
        android:layout_centerHorizontal="true"
        android:layout_gravity="center_horizontal" > 
```

如果你想保留它：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" > 
```

将 layout_height 设置为 fill_parent。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T02:25:47.583

将滚动视图的宽度设置为**fillparent**不*换行内容*

```
android:layout_width="fill_parent" 
```

# python - 子进程 Python .. 将命令串在一起

> ID：10747329
> 
> 赞同：0
> 
> 时间：2012-05-25T01:18:27.610
> 
> 标签：python, linux, python-3.x, subprocess

我正在编写一个 Python 程序，该程序需要返回在我的一个漏洞扫描中扫描的活动主机。我在返回 XML 之前使用过这种方法，但是当我尝试处理这些额外的程序（例如 cut 和 grep）时，我遇到了问题。也许它不喜欢“管道” | 或者也许我在这里用逗号做了一些完全错误的事情，但我已经尝试了各种各样的事情，但似乎无法让它像我从命令行独立运行命令时那样返回结果。非常感谢您提供的任何帮助。

```
def activeHostsQuery():
    args = ['curl', '-s', '-k', '-H', 'X-Requested-With: curl demoapp', '-u','username:password', 'https://qualysapi.qualys.com/api/2.0/fo/scan/?action=fetch&scan_ref=scan/1111111.22222&mode=brief&output_format=csv', '|', 'cut', '-d', '-f1', '|', 'sort', '|', 'uniq', '|', 'grep', '-E', '"\"[[:digit:]]{1,3}\.[[:digit:]]{1,3}\.[[:digit:]]{1,3}\.[[:digit:]]{1,3}\""', '|', 'wc', '-l']

    activeHostsNumber = subprocess.Popen(args, stdout=subprocess.PIPE).communicate()[0]
    return activeHostsNumber 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T02:55:22.147

将命令串在一起的正确方法——如果你想把 shell 排除在外，你应该这样做——是创建多个 Popen 对象。

```
def activeHostsQuery():
    args1 = ['curl', '-s', '-k',
             '-H', 'X-Requested-With: curl demoapp',
             '-u','username:password',
             'https://qualysapi.qualys.com/api/2.0/fo/scan/?action=fetch&scan_ref=scan/1111111.22222&mode=brief&output_format=csv']
    args2 = ['cut', '-d', '-f1']
    args3 = ['sort', '-u']
    args4 = ['grep', '-E', '"\"[[:digit:]]{1,3}\.[[:digit:]]{1,3}\.[[:digit:]]{1,3}\.[[:digit:]]{1,3}\""']
    args5 = ['wc', '-l']

    p1 = subprocess.Popen(args1, stdout=subprocess.PIPE)
    p2 = subprocess.Popen(args2, stdin=p1.stdout, stdout=subprocess.PIPE); p1.stdout.close()
    p3 = subprocess.Popen(args3, stdin=p2.stdout, stdout=subprocess.PIPE); p2.stdout.close()
    p4 = subprocess.Popen(args4, stdin=p3.stdout, stdout=subprocess.PIPE); p3.stdout.close()
    p5 = subprocess.Popen(args5, stdin=p4.stdout, stdout=subprocess.PIPE); p4.stdout.close()
    activeHostsNumber = p5.communicate()[0]
    return activeHostsNumber 
```

这样做的好处是不涉及 shell - 您可以将任意变量替换到您的参数列表中，而不必担心它们会被字符串拆分、误解、导致重定向或其他任何事情，以及您在生成时使用的参数之间的区别你的名单将得到尊重。

现在，在*这种特殊*情况下，我将在本机 Python 中完成所有工作——当你拥有本机 HTTP 库时，甚至没有理由使用 curl——但是知道如何使用 subprocess.Popen 构建管道在任何情况下都是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:23:21.527

我会试试这个：

```
def activeHostsQuery():
    args = ['curl', '-s', '-k', '-H', 'X-Requested-With: curl demoapp', '-u','username:password', 'https://qualysapi.qualys.com/api/2.0/fo/scan/?action=fetch&scan_ref=scan/1111111.22222&mode=brief&output_format=csv', '|', 'cut', '-d', '-f1', '|', 'sort', '|', 'uniq', '|', 'grep', '-E', '"\"[[:digit:]]{1,3}\.[[:digit:]]{1,3}\.[[:digit:]]{1,3}\.[[:digit:]]{1,3}\""', '|', 'wc', '-l']

    activeHostsNumber = subprocess.Popen(" ".join("'%s'" % a for a in args), shell=True, stdout=subprocess.PIPE).communicate()[0]
    return activeHostsNumber 
```

**编辑：**在参数周围添加引号。

**另一个编辑：**好的，尝试使命令成为单个字符串：

```
def activeHostsQuery():
    cmd = 'curl -s -k -H \'X-Requested-With: curl demoapp\' -u username:password \'https://qualysapi.qualys.com/api/2.0/fo/scan/?action=fetch&scan_ref=scan/1111111.22222&mode=brief&output_format=csv\' | cut -d, -f1 | sort | uniq | grep -E \'"[[:digit:]]{1,3}\\.[[:digit:]]{1,3}\\.[[:digit:]]{1,3}\\.[[:digit:]]{1,3}"\' | wc -l'

    ctiveHostsNumber = subprocess.Popen(cmd, shell = True, stdout = subprocess.PIPE).communicate()[0]
    return activeHostsNumber 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T01:51:45.177

我知道这不能回答问题……但那是 shell 脚本。如果您希望 shell 脚本将参数传递给 sh -c （或 bash 之类的）

```
 args = ['sh', '-c', 'curl -s -k -H X-Requested-With: curl demoapp -u','username:password https://qualysapi.qualys.com/api/2.0/fo/scan/?action=fetch&scan_ref=scan/1111111.22222&mode=brief&output_format=csv | cut -d -f1 | sort | uniq | grep -E "\"[[:digit:]]{1,3}\.[[:digit:]]{1,3}\.[[:digit:]]{1,3}\.[[:digit:]]{1,3}\"" | wc -l'

   count = int(cubprcess.check_output(args)) 
```

或`shell=True`像其他人建议的那样使用。如果您关心这些事情，这绝对不会在 Windows 上运行。

真的你应该做类似的事情：

```
import requests
from csv
from StringIO import StringIO
import re

req=reqeusts.get(
    'https://qualysapi.qualys.com/api/2.0/fo/scan/?action=fetch&scan_ref=scan/1111111.22222&mode=brief&output_format=csv',
    auth=('username','passoword'),
    headers={'X-Requested-With': 'curl demoapp'})

reader = csv.reader(StringIO(req.text))
count = 0
for line in reader:
    if re.match(r'.*\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}.*',line[0]) is not None:
        count += 1

print count 
```

# css - 媒体语法的 CSS Validator

> ID：10747334
> 
> 赞同：1
> 
> 时间：2012-05-25T01:18:58.067
> 
> 标签：css, w3c-validation

嗨，我做了 css 验证器，我得到了这些：

> 只有 0 可以是长度。你必须在你的号码后面加上一个单位）{ *{ background:white url("../images/background1024768.png") no-repeat left top} }

这可能是因为@media 属性是怎么回事？我做错了吗？这是CSS：

```
@media(min-width:1280){
*{    background:white url("../images/background1280800.png") no-repeat left top;} 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T01:21:43.507

你少了一个单位。`min-width:1280px`

同样根据样式指南，避免在后台 URL 中使用引号。

`background:white url(../images/background1280800.png) top left no-repeat`

# java - 使用单选按钮和 jquery/Ajax 使用发布结果更新 div

> ID：10747336
> 
> 赞同：1
> 
> 时间：2012-05-25T01:19:06.070
> 
> 标签：java, javascript, jquery, forms

我正在与第三方合作，该第三方根据我的服务器（java servlet）的发布响应生成 div 内容。我遇到的一个问题是我们有一个单选按钮列表，表格中的单选按钮是水平的。

当我在该表单上点击提交时，我需要对我的服务器进行后期调用并在第三方站点中重新呈现该 div。我使用了不同的 jQuery 变体但无济于事。

我已经包含了最新的 jQuery（也尝试了 jQuery 的子 1.4 版本）。当我点击表单上的提交按钮时，我只是呈现相同的页面，而不是呈现对服务器的调用。

我该如何做到这一点，更新本地页面上的 div 以根据我编写的表单呈现我的帖子结果？以下是我目前拥有的：

形式：

```
 <form action='\' id=\"form1\">... radio buttons ... </form>
    <input hidden field name = value passed from Java method>
    <input hidden field id = value passed from Java method>
    <input hidden field the value of the selected checkbox> 
```

HTML：

```
 <script language='Javascript' type='text/javascript'>
    $(\"#form1\").submit(function(event) {
      event.preventDefault();

      var $form = $( this ),
        name2= $form.find( 'input[name=\"name\"]' ).val(),
        id2= $form.find( 'input[name=\"id\"]' ).val(),
        url = $form.attr( 'action' );
    $.post( url, { name2:name, id2:id },
      function( data ) {
         var content = $( data ).find( '#content' );
         $( \"#this_div\" ).empty().append( content );
      });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:46:38.517

**从第三方站点向您的服务器发送 AJAX 请求：**

由于浏览器安全要求，目前无法向第三方服务器发出跨域 AJAX 请求。这意味着 $.post 请求仅限于所谓的同域策略。

因此，如果您的服务器是 example.com 而第三方服务器是 domain.com，则 domain.com 无法向您的服务器发出 AJAX 请求。

但是，您可以使用一种技术来规避这种浏览器安全性。虽然 XMLHttpRequests 不可能跨域，但 JavaScript`<script>`标记块可以从任何域加载 JavaScript。

脚本标签远程处理或 JSONP 涉及使用脚本标签向您的服务器发送请求：

**脚本标签：**

```
// from domain.com to your server, example.com, make a request using a script tag
var urlWithParams = "http://example.com/getHTMLForm.do?id2=" + id2 + "&name2" + name2;
var script = document.createElement("script");
script.setAttribute("type","text/javascript");
script.setAttribute("src", urlWithParams);

// create a script tag, which invokes your servlet 
document.getElementsByTagName("head")[0].appendChild(script); 
```

getHTMLForm.do 是您当前用于发布数据并在响应中获取 HTML 的假设 servlet。您无需使用 POST 在请求正文中传递参数，而是将数据作为查询参数传递。

**服务器响应**：：

然后，服务器使用您在服务器上生成的 JSON 进行响应，但它被包装（或填充）在发出请求的网页上定义的 JavaScript 函数中。

```
// your response from your server
insertFormOnPage({"html":"<form action='#'><input name='name' /><input name='id' /></form>", "elem" : "#content"}); 
```

**第三方客户端代码：**

要使此技术起作用，第三方站点必须定义一个与您的服务器将返回的函数相匹配的函数：

```
function insertFormOnPage( data ) {

    alert( data.html ); // prints the HTML for debugging
    alert( data.elem ); // prints the selector you want to insert into

    // inject the HTML into the #content DIV
    $( data.elem ).html( data.html );
} 
```

**第三方网站上的 HTML：**

```
<!-- Let's just assume the third party site's DIV is empty for simplicity -->
<div id="#content"></div 
```

**解释：**

*   您的服务器将纯 JavaScript 作为 JavaScript 返回到客户端，作为立即执行的函数。

*   该函数接收以下项目作为 JavaScript 对象中的属性：HTML 和 div id。

*   该函数访问对象的 html 和 elem 属性以访问 html 字符串和选择器。

*   使用 jQuery，该函数将 HTML 注入到 DIV#content 元素中。

关于这项技术，你应该知道的最后一点也是最后一点是它只支持 GET 方法，因为这是从服务器获取 JavaScript 的方式。这意味着您需要确保您的服务器配置为接受对此数据的 GET 请求而不是 POST 请求。

**使用 jQuery 的 JSONP：**

虽然上述解决方案有助于描述幕后发生的事情的概念，但您可能还想查看[jQuery getJSON](http://api.jquery.com/jQuery.getJSON/)。具体来说，查看 JSONP 示例，这是在不重新加载页面的情况下发出跨域请求的唯一方法。

```
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
  {
    tags: "cat",
    tagmode: "any",
    format: "json"
  },
  function(data) {
    $.each(data.items, function(i,item){
      $("<img/>").attr("src", item.media.m).appendTo("#images");
      if ( i == 3 ) return false;
    });
  }); 
```

# javascript - 是否有一个 Jquery 函数可以从解析的 JSON 字符串中获取 #ref id 值并将我指向引用的对象？

> ID：10747341
> 
> 赞同：0
> 
> 时间：2012-05-25T01:19:45.390
> 
> 标签：javascript, jquery, json

我整个下午都在寻找这个问题的答案，但我似乎找不到完成我需要做的事情的最佳方法。

我的 JSON 字符串（从 Web 服务返回）中有循环引用（#ref），指向字符串中的 $id。现在我知道如果使用 jquery parseJSON 它会创建 javascript 对象，我可以访问属性 a la myObject.MyPropertyName。但是，当我到达#ref 时，我不确定如何获取 ID 指向的对象（我假设它已经作为反序列化的结果创建......

我应该遍历对象及其所有子对象直到找到它，还是有更简单的方法？

```
$.ajax({
        type: "POST",
        url: "/Task.asmx/GetTask",
        data: "{'id':'" + '27' + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            _Data = $.parseJSON(msg.d ? msg.d : msg);
            _this.Company = _Data[0].t_Program.t_Company;
            _this.Program = _Data[0].t_Program;
            _this.Task = _Data[0];
        },
        complete: function () {

        }
    }); 
```

有问题的区域是 _Data[0].t_Program 因为它不返回对象而是返回

```
_Data[0].t_Program
 {...}
   $ref: "12" 
```

我不完全知道使用 $id "12" 获取对象的最佳方法。根据下面的帖子，我似乎应该遍历现有对象，但我希望有一个 jquery 函数可以做到这一点......

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:40:20.653

不，jQuery 本身不能解析从 JSON 转换的对象中的循环引用。

我知道的唯一库是[Dojo 的`dojox.json.ref`module](http://www.sitepen.com/blog/2008/06/17/json-referencing-in-dojo/)。

但是，您的服务器应用程序会以某种方式序列化该 JSON。不要告诉我它使用的解决方案不提供反序列化算法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:41:35.977

正如我的朋友艾伦（Xerox Courier（网络上的 RPC）库的作者）曾经对我说的，“网络上没有指针”。

换句话说，数据结构的**JSON 表示**不可能是循环的。（但可以将圆形结构展平为非圆形 JSON 结构。）正如[JSON 网站](http://www.json.org/)所说：

> > JSON 建立在两种结构之上：
> > 
> > 名称/值对的集合。在各种语言中，这被实现为对象、记录、结构、字典、哈希表、键控列表或关联数组。
> > 
> > 值的有序列表。在大多数语言中，这被实现为数组、向量、列表或序列。

没有指针！

`jQuery parseJSON`所以在操作完成后，整个 JSON 将被转换为 Javascript 对象和/或数组。

如果原始结构的 ref_id 值被用作 JSON / Javascript 对象中的属性名称，那么它们都会在那里。

**真正的问题**是您需要了解您的服务器如何将其数据结构序列化为 JSON 数据结构。查看您的服务器端代码以确定这一点。

然后使用 Javascript 将 JSON 结构反序列化回最佳 Javascript 结构以满足您的需求。

**回复：我应该遍历对象及其所有子对象直到找到它，还是有更简单的方法？**

更简单的方法是遍历 Javascript 结构一次，并建立一个附加的“索引”对象，其属性是#ref_id，值是原始结构/值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:06:12.180

示例： var jsonCyclicReferenceFixed = JsonRecursive.parse(jsonWithRefAndId);

```
(function(){

function type(value){

    var t = typeof(value);

    if( t == "object" && value instanceof Array) {
        return "array";
    }

    if( t == "object" && value && "$id" in value && "$values" in value) {
        return "array";
    }

    return t;
}

function TypeConverterFactory(){

    var converters = {};

    var defaultConverter = {
        fromJson: function(value){ return value; },
        toJson: function(value){ return value; },
    };

    this.create = function(type){
        var converter = converters[type];
        if(!converter) return defaultConverter;
        return converter;
    };

    this.register = function(type, converter){
        converters[type] = converter;
        converter.valueConverter = this.valueConverter;
    };
}

function ObjectConverter(){

    this.fromJson = function(obj){

        if( obj == null ) return null;              

        if( "$ref" in obj ){
            var reference = this.dictionary[obj.$ref];
            return reference;
        }

        if("$id" in obj){
            this.dictionary[obj.$id] = obj;
            delete obj.$id;
        }

        for(var prop in obj){
            obj[prop] = this.valueConverter.convertFromJson(obj[prop]);
        }

        return obj;

    }

    this.toJson = function(obj){

        var id = 0;

        if(~(id = this.dictionary.indexOf(obj))){
            return { "$ref" : (id + 1).toString() };
        }

        var convertedObj = { "$id" : this.dictionary.push(obj).toString() };

        for(var prop in obj){
            convertedObj[prop] = this.valueConverter.convertToJson(obj[prop]);
        }

        return convertedObj;

    }

}   

function ArrayConverter(){

    var self = this;

    this.fromJson = function(arr){

        if( arr == null ) return null;              

        if("$id" in arr){

            var values = arr.$values.map(function(item){
                return self.valueConverter.convertFromJson(item);
            });

            this.dictionary[arr.$id] = values;

            delete arr.$id;

            return values;
        }

        return arr;

    }

    this.toJson = function(arr){

        var id = 0;

        if(~(id = this.dictionary.indexOf(arr))){
            return { "$ref" : (id + 1).toString() };
        }

        var convertedObj = { "$id" : this.dictionary.push(arr).toString() };

        convertedObj.$values = arr.map(function(arrItem){
            return self.valueConverter.convertToJson(arrItem);
        });

        return convertedObj;

    }

}   

function ValueConverter(){

    this.typeConverterFactory = new TypeConverterFactory();
    this.typeConverterFactory.valueConverter = this;
    this.typeConverterFactory.register("array", new ArrayConverter);
    this.typeConverterFactory.register("object", new ObjectConverter);

    this.dictionary = {};

    this.convertToJson = function(valor){

        var converter = this.typeConverterFactory.create(type(valor));
        converter.dictionary = this.dictionary;
        return converter.toJson(valor);         

    }

    this.convertFromJson = function(valor){

        var converter = this.typeConverterFactory.create(type(valor));
        converter.dictionary = this.dictionary;         
        return converter.fromJson(valor);

    }

}

function JsonRecursive(){

    this.valueConverter = new ValueConverter();

}

JsonRecursive.prototype.convert = function(obj){
    this.valueConverter.dictionary = [];
    var converted = this.valueConverter.convertToJson(obj);
    return converted;

}

JsonRecursive.prototype.parse = function(string){
    this.valueConverter.dictionary = {};
    var referenced = JSON.parse(string);
    return this.valueConverter.convertFromJson(referenced);

}

JsonRecursive.prototype.stringify = function(obj){

    var converted = this.convert(obj);
    var params = [].slice.call(arguments, 1);
    return JSON.stringify.apply(JSON, [converted].concat(params));

}

if(window){

    if( window.define ){
        //to AMD (require.js)
        window.define(function(){
            return new JsonRecursive();
        });

    }else{
        //basic exposition
        window.jsonRecursive = new JsonRecursive();
    }

    return;
}

if(global){
    // export to node.js
    module.exports = new JsonRecursive();   
}

}()); 
```

样本：

```
// a object recursive
// var parent = {};
// var child = {};
// parent.child = child;
// child.parent = parent;
//
//results in this recursive json

var json = '{"$id":"0","name":"Parent","child":{"$id":"1","name":"Child","parent":{"$ref":"0"}}}'

//Parsing a Recursive Json to Object with references
var obj = jsonRecursive.parse(json);

// to see results try console.log( obj );

alert(obj.name);
alert(obj.child.name); 
```

# wpf - 有没有办法在不显示导航按钮的情况下导航框架？

> ID：10747344
> 
> 赞同：0
> 
> 时间：2012-05-25T01:20:59.997
> 
> 标签：wpf, xaml, wpf-controls

我在 .NET 4 WPF 桌面应用程序中使用 XAML 框架来显示有关不同操作模式的信息。我不希望用户能够自由导航，代码控制框架中显示的内容。我已经能够通过在每次框架导航时删除最后一个返回条目来实现此限制：

```
 void FunctionalFrame_Navigated(object sender, NavigationEventArgs e)
    {
        FunctionalFrame.RemoveBackEntry();
    } 
```

尽管这样可行，但它在视觉上存在问题，因为在第一次导航之后，前进和后退按钮以及导航栏出现在禁用状态。如果用户根本没有看到导航控件，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:25:08.647

尝试设置[`NavigationUIVisibility`](http://msdn.microsoft.com/en-us/library/system.windows.controls.frame.navigationuivisibility)为`Hidden`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:57:08.277

在你需要设置 NavigationUIVisibility="Hidden" 的框架上

```
<Frame Source="PageSearch.xaml" NavigationUIVisibility="Hidden"/> 
```

# css - 表格单元格高度显示不同 IE8 vs IE7 vs Firefox

> ID：10747345
> 
> 赞同：0
> 
> 时间：2012-05-25T01:21:26.907
> 
> 标签：css, firefox, internet-explorer-8, html-table, internet-explorer-7

我在 IE8、IE7 和 Firefox 上显示不同的表格时遇到问题。我的 CSS 看起来像这样：

```
table.matrix_nested
{
     border-collapse:collapse;
}
table.matrix_nested th 
{
     border-color:White;
     background-color:white;
     text-align:center;
     vertical-align:middle;
     color:Gray;
     padding:10px;
}
table.matrix_nested td 
{
     border-width:1px;
     border-style:inset;
     border-color:gray;
     padding:10px;
     width:40px;
     height:40px;
     text-align:center;
     vertical-align:middle;
} 
```

我想要大小均匀的单元格，大小为 40 像素 x 40 像素。IE8 可以正确显示，但 IE7 和 Firefox 的高度较小。

有什么想法吗？

* * *

我应该为我的原始帖子提供更多信息。似乎问题可能不在于单元格高度，而在于填充。示例表如下所示：

```
 <table class="matrix_nested">
    <tr>
    <th>5</th>
    <td style='background-color: Yellow;' id='mp_21'>
    <span class="cell_hidden">21</span>
    </td>
    <td style='background-color: Red;' id='mp_22'>
    <span class="cell_hidden">22</span>
    </td>
    <td style='background-color: Red;' id='mp_23'>
    <span class="cell_hidden">23</span>
    </td>
    <td style='background-color: Red;' id='mp_24'>
    <span class="cell_hidden">24</span>
    </td>
    <td style='background-color: Red;' id='mp_25'>
    <span class="cell_hidden">25</span>
    </td>
    </tr><tr>
    <th>4</th>
    <td style='background-color: Green;' id='mp_16'>
    <span class="cell_hidden">16</span>
    </td>
    <td style='background-color: Yellow;' id='mp_17'>
    <span class="cell_hidden">17</span>
    </td>
    <td style='background-color: Yellow;' id='mp_18'>
    <span class="cell_hidden">18</span>
    </td>
    <td style='background-color: Red;' id='mp_19'>
    <span class="cell_hidden">19</span>
    </td>
    <td style='background-color: Red;' id='mp_20'>
    <span class="cell_hidden">20</span>
    </td>
    </tr><tr>
    <th>3</th>
    <td style='background-color: Green;' id='mp_11'>
    <span class="cell_hidden">11</span>
    </td>
    <td style='background-color: Yellow;' id='mp_12'>
    <span class="cell_hidden">12</span>
    </td>
    <td style='background-color: Yellow;' id='mp_13'>
    <span class="cell_hidden">13</span>
    </td>
    <td style='background-color: Red;' id='mp_14'>
    <span class="cell_hidden">14</span>
    </td>
    <td style='background-color: Red;' id='mp_15'>
    <span class="cell_hidden">15</span>
    </td>
    </tr><tr>
    <th>2</th>
    <td style='background-color: Green;' id='mp_6'>
    <span class="cell_hidden">6</span>
    </td>
    <td style='background-color: Green;' id='mp_7'>
    <span class="cell_hidden">7</span>
    </td>
    <td style='background-color: Green;' id='mp_8'>
    <span class="cell_hidden">8</span>
    </td>
    <td style='background-color: Yellow;' id='mp_9'>
    <span class="cell_hidden">9</span>
    </td>
    <td style='background-color: Red;' id='mp_10'>
    <span class="cell_hidden">10</span>
    </td>
    </tr><tr>
    <th>1</th>
    <td style='background-color: Green;' id='mp_1'>
    <span class="cell_hidden">1</span>
    </td>
    <td style='background-color: Green;' id='mp_2'>
    <span class="cell_hidden">2</span>
    </td>
    <td style='background-color: Green;' id='mp_3'>
    <span class="cell_hidden">3</span>
    </td>
    <td style='background-color: Green;' id='mp_4'>
    <span class="cell_hidden">4</span>
    </td>
    <td style='background-color: Yellow;' id='mp_5'>
    <span class="cell_hidden">5</span>
    </td>
    </tr><tr>
    </tr>
    <tr>
    <th></th>
    <th>1</th>
    <th>2</th>
    <th>3</th>
    <th>4</th>
    <th>5</th>
    </tr>
</table> 
```

我注意到，如果我将 TD 上的填充减少为 5px，则单元格排列得更均匀。所以看起来 Firefox/IE7 处理填充的方式与 IE8 不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:52:43.707

在玩了更多之后，我发现问题实际上是由于填充造成的。矩阵的每个单元格内部都有值，但隐藏（使用 CSS 显示：无）。我在单元格中添加了填充。似乎 IE8 将填充视为值不存在，因为隐藏。但是 IE7 和 FF 认为它的价值就在那里。

# c++ - 派生类的调用方法

> ID：10747346
> 
> 赞同：1
> 
> 时间：2012-05-25T01:21:30.113
> 
> 标签：c++, list, class

我正在做一个管理项目集合的程序。可以是书、杂志、CD 或 DVD。每一个都是继承类Item的类。要存储我使用列表模板的那些项目，如下所示：

```
list<Item> items; 
```

这个列表在类库的一个对象库中。

要浏览此列表，我正在这样做：

```
for(list<Item>::iterator i = lib.itens.begin(); i != lib.itens.end(); ++i) 
```

到此为止，一切都很好。当我尝试在此循环中调用派生类的方法时，问题就开始了。例子：

```
 for(list<Item>::iterator i = lib.itens.begin(); i != lib.itens.end(); ++i)
        (*i).lib.itens.show(); 
```

我怎样才能调用这些方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:24:54.267

这里至少有两个问题。首先，如果你这样做：

```
list<Item> items; 
```

那么这个列表真的只会包含`Item`对象；如果您尝试放入派生对象，则派生部分将被简单地[切掉](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)。

一种解决方案是改用指针列表（尽管您可能应该使用智能指针来避免内存管理问题）。

但即便如此，第二个问题是您不应该（通常）尝试通过指向基类的指针来调用特定于派生类的方法。多态性的全部意义在于，如果您乐于使用整个层次结构共有的功能，您应该只处理基类指针（请参阅[*Liskov 替换原则*](http://en.wikipedia.org/wiki/Liskov_substitution_principle)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:34:58.970

您可能应该`virtual void show() = 0;`在`class Item`. 这将使`show`调用合法，但同时会导致`list<Item>`.

基本错误是您不能拥有“只是” an 的东西`Item`，但`list<Item>`会尝试列出精确的列表。通过在 中声明`show`为纯虚函数`Item`，编译器明确地知道这一点。

# windows - Windows 上的 Node.js 和文件系统 - EBUSY 错误

> ID：10747347
> 
> 赞同：7
> 
> 时间：2012-05-25T01:21:30.190
> 
> 标签：windows, node.js, filesystems

我是 Node.js 的新手，我试图找出以下代码有什么问题。

```
var fs = require('fs');
var dir = "C:\\";
var files = fs.readdirSync(dir);
for (var i = 0; i < files.length; i++) {
    var name = fs.statSync(dir + files[i]).name;
} 
```

运行此代码时出现错误：

```
Error: EBUSY, resource busy or locked 'C:\hiberfil.sys'
    at Object.statSync (fs.js:424:18)
    at Object.<anonymous> (S:\start.js:7:19)
    at Module._compile (module.js:446:26)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T08:08:13.543

Hiberfil.sys 是一个将休眠数据保存在磁盘上的系统文件，您不能只通过普通权限读取它，它是超级机密的，因为它保存了磁盘上的所有内存信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-11T14:19:47.043

在没有找到足够答案的情况下遇到类似问题后：

我已经通过搜索循环依赖来修复它。

修复后，我能够正常运行一切。 [![在此处输入图像描述](../Images/4fcd5efd2c6a078b49836b3c062dbe61.png)](https://i.stack.imgur.com/HCNjg.png)

# user-interface - 在游戏中创建 gui 覆盖界面

> ID：10747348
> 
> 赞同：3
> 
> 时间：2012-05-25T01:21:36.490
> 
> 标签：user-interface, interface

我使用 c++ 和 SFML 创建了一个相对简单的塔防游戏。我对为其创建一个漂亮的 gui 覆盖非常感兴趣，即 hud、菜单等。我知道那里有很多 gui 库，但我想自己制作（用于学习目的。

我对使用图形非常熟悉，但我对 GUI 系统不太熟悉（我只是渲染我的框架，不担心小部件、标题栏等）。

那里有什么好的文章，或者有人对如何布局这样的界面提出建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:36:54.447

我知道有几种方法（至少对于 Java 而言）可以在游戏中获得漂亮的 HUD。一种方法是创建一个单独的 3D 世界，将 UI 元素直接放在相机前面，然后将该相机的视图覆盖在主视图上。有时这可能会出现问题，尤其是当您没有良好的滤色器时，或者当您要显示大量对象时。另一种方法是查看为此目的设计的 GUI 库（例如 NiftyGUI for Java）。

快速的 Google 搜索将我带到[Wikipedia 上的列表，其中列出了](https://en.wikipedia.org/wiki/List_of_platform-independent_GUI_libraries)您可以使用的许多开源 GUI 库。还有很多其他的，所以你应该自己做谷歌搜索，或者在[GitHub](https://github.com/)和[SourceForge 上](http://sourceforge.net/)四处看看。

# java - 是否有 webhdfs 的 Java 接口来从 hadoop 集群获取数据

> ID：10747349
> 
> 赞同：1
> 
> 时间：2012-05-25T01:21:36.927
> 
> 标签：java, hadoop, interface

我想在hadoop集群之外写一个项目，可以从集群中读取数据，但是office网站提供的文档只给出了“curl”的方法。Java有没有接口可以访问hadoop集群？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T00:55:45.940

如果您使用的是 1.0.0+ 版本的 hadoop，请查看该`org.apache.hadoop.hdfs.web.WebHdfsFileSystem`课程。

如果它尚未启用，您应该能够通过在 hdfs-core.xml 中设置以下配置属性来“启用”它：

*   `dfs.webhdfs.enabled`=`true`

进行此更改后，您需要重新启动名称节点，您应该在名称节点日志文件中看到以下内容：

> ```
> 2012-05-22 06:23:42,176 INFO org.apache.hadoop.http.HttpServer: dfs.webhdfs.enabled = true
> 2012-05-22 06:23:42,177 INFO org.apache.hadoop.http.HttpServer: Added filter 'SPNEGO' (class=org.apache.hadoop.hdfs.web.AuthFilter)
> 2012-05-22 06:23:42,179 INFO org.apache.hadoop.http.HttpServer: addJerseyResourcePackage: packageName=org.apache.hadoop.hdfs.server.namenode.web.resources;org.apache.hadoop.hdfs.web.resources, pathSpec=/webhdfs/v1/*
> 2012-05-22 06:23:42,191 INFO org.apache.hadoop.http.HttpServer: Port returned by webServer.getConnectors()[0].getLocalPort() before open() is -1\. Opening the listener on 50070
> 2012-05-22 06:23:42,192 INFO org.apache.hadoop.http.HttpServer: listener.getLocalPort() returned 50070 webServer.getConnectors()[0].getLocalPort() returned 50070
> 2012-05-22 06:23:42,192 INFO org.apache.hadoop.http.HttpServer: Jetty bound to port 50070 
> ```

现在您可以使用以下内容以编程方式使用 Web Hdfs：

```
Configuration conf = new Configuration();
FileSystem fs = FileSystem.get(new URI(), conf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:48:03.987

看看 cloudera 的 HOOP...提供对所有 HDFS 操作的访问，包括通过 HTTP 和 HTTPS 进行读/写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:04:08.523

是的。有 Web 界面可以与 Job tracker 节点进行通信，以了解作业的状态和所有客户端信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-08T12:33:17.787

可以使用以下 Java 库：

*   [hadoop-hdfs](http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-hdfs)
*   [webhdfs-java-客户端](https://github.com/longbozhan/webhdfs-java-client)

# android - 在andengine中使用精灵追逐相机

> ID：10747353
> 
> 赞同：3
> 
> 时间：2012-05-25T01:22:06.317
> 
> 标签：android, camera, sprite, andengine

我创建了一个赛车游戏，相机跟随汽车，代码如下。除了场景中有一个精灵，它在（100px，100px）中作为按钮。问题是：当相机移动时，按钮永远不会移动。按钮必须总是显示在屏幕上。但它不动。我该怎么办？

```
mCamera.setChaseEntity(sprite); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T12:29:43.773

使用 HUD。这是一个特殊的场景，当相机移动时不会移动，它正是为此目的而创建的。基本用法如下所示：

```
private HUD mHUD;
mHUD = new HUD();
camera.setHUD(mHUD);
mHUD.attachChild(button); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:21:48.977

移动相机时告诉按钮移动。（不推荐）或将按钮放在相机视图上方的图层上，因此它独立于相机移动。

# sql - Oracle 11g：取消透视多个列并包含列名

> ID：10747355
> 
> 赞同：14
> 
> 时间：2012-05-25T01:22:53.113
> 
> 标签：sql, oracle, oracle11g, unpivot

我正在尝试取消数据集中的多个列。这是我的数据的样子。

```
CREATE TABLE  T5 (idnum NUMBER,f1 NUMBER(10,5),f2 NUMBER(10,5),f3 NUMBER(10,5)
                 ,e1 NUMBER(10,5),e2 NUMBER(10,5)
                 ,h1 NUMBER(10,5),h2 NUMBER(10,5));

INSERT INTO T5 (IDNUM,F1,F2,F3,E1,E2,H1,H2) 
VALUES (1,'10.2004','5.009','7.330','9.008','8.003','.99383','1.43243');
INSERT INTO T5 (IDNUM,F1,F2,F3,E1,E2,H1,H2
VALUES (2,'4.2004','6.009','9.330','4.7008','4.60333','1.993','3.3243');
INSERT INTO T5 (IDNUM,F1,F2,F3,E1,E2,H1,H2)
VALUES (3,'10.2040','52.6009','67.330','9.5008','8.003','.99383','1.43243');
INSERT INTO T5 (IDNUM,F1,F2,F3,E1,E2,H1,H2)
VALUES (4,'9.20704','45.009','17.330','29.008','5.003','3.9583','1.243');

COMMIT;

select * from t5;

IDNUM    F1    F2     F3        E1      E2       H1     H2

1   10.2004 5.009   7.33    9.008   8.003   0.99383 1.43243
2   4.2004  6.009   9.33    4.7008  4.60333 1.993   3.3243
3   10.204  52.6009 67.33   9.5008  8.003   0.99383 1.43243
4   9.20704 45.009  17.33   29.008  5.003   3.9583  1.243 
```

我就是这样不转动...

```
select *
from (select IDNUM,F1,F2,F3,E1,E2,H1,H2,
      null as E3,null as H3
      from T5)
UnPivot((F,E,H) for sk in ((F1,E1,H1) as 1,
                              (F2,E2,H2) as 2,
                              (F3,E3,H3) as 3))
order by IDNUM,SK;

IDNUM  SK        F        E        H
-----  --  -------  -------  -------
    1   1  10.2004    9.008   .99383
    1   2    5.009    8.003  1.43243
    1   3     7.33     null     null
    2   1   4.2004   4.7008    1.993
    2   2    6.009  4.60333   3.3243
    2   3     9.33     null     null
    3   1   10.204   9.5008   .99383
    3   2  52.6009    8.003  1.43243
    3   3    67.33     null     null
    4   1  9.20704   29.008   3.9583
    4   2   45.009    5.003    1.243
    4   3    17.33     null     null 
```

但我真正需要的是如下......

```
IDNUM  SK        F        E        H  F_COL_NAME
-----  --  -------  -------  -------  ----------
    1   1  10.2004    9.008   .99383          F1
    1   2    5.009    8.003  1.43243          F2
    1   3     7.33     null     null          F3
    2   1   4.2004   4.7008    1.993          F1
    2   2    6.009  4.60333   3.3243          F2
    2   3     9.33     null     null          F3
    3   1   10.204   9.5008   .99383          F1
    3   2  52.6009    8.003  1.43243          F2
    3   3    67.33     null     null          F3
    4   1  9.20704   29.008   3.9583          F1
    4   2   45.009    5.003    1.243          F2
    4   3    17.33     null     null          F3 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-06T14:07:56.907

把你`UNPIVOT`改成这样

```
select *
from (
  select IDNUM,F1,F2,F3,E1,E2,H1,H2,
    null as E3,null as H3
  from T5
) A
UnPivot(
  (F,E,H) for sk in (
    (F1,E1,H1) as 'F1',
    (F2,E2,H2) as 'F2',
    (F3,E3,H3) as 'F3')
)
order by IDNUM,SK 
```

这应该可以解决问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T14:41:44.557

只是`select idnum, sk, f, e, h, 'F'||SK as col_name`...您需要指定所有列而不是星号。

像这样[http://sqlfiddle.com/#!4/12446/21](http://sqlfiddle.com/#!4/12446/21)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-10T16:49:12.710

如果您需要存储结果，`UNPIVOT`可以使用`INSERT ALL`：

```
CREATE TABLE T5_unpiv(IDNUM NUMBER,SK NUMBER,F NUMBER,E NUMBER,H NUMBER
                     ,F_COL_NAME VARCHAR2(100));

INSERT ALL 
  INTO T5_unpiv(IDNUM,SK,F,E,H,F_COL_NAME) VALUES(idnum,1,f1,e1,h1,'F1')
  INTO T5_unpiv(IDNUM,SK,F,E,H,F_COL_NAME) VALUES(idnum,2,f2,e2,h2,'F2')
  INTO T5_unpiv(IDNUM,SK,F,E,H,F_COL_NAME) VALUES(idnum,3,f3,NULL,NULL,'F3')
SELECT * FROM T5;

SELECT * FROM T5_unpiv; 
```

**[DBFiddle 演示](https://dbfiddle.uk/?rdbms=oracle_11.2&fiddle=a571103c2f819435d267c70b5f6d339a)**

输出：

```
┌───────┬────┬─────────┬─────────┬─────────┬────────────┐
│ IDNUM │ SK │    F    │    E    │    H    │ F_COL_NAME │
├───────┼────┼─────────┼─────────┼─────────┼────────────┤
│     1 │  1 │ 10.2004 │ 9.008   │ .99383  │ F1         │
│     1 │  2 │   5.009 │ 8.003   │ 1.43243 │ F2         │
│     1 │  3 │    7.33 │ null    │ null    │ F3         │
│     2 │  1 │  4.2004 │ 4.7008  │ 1.993   │ F1         │
│     2 │  2 │   6.009 │ 4.60333 │ 3.3243  │ F2         │
│     2 │  3 │    9.33 │ null    │ null    │ F3         │
│     3 │  1 │  10.204 │ 9.5008  │ .99383  │ F1         │
│     3 │  2 │ 52.6009 │ 8.003   │ 1.43243 │ F2         │
│     3 │  3 │   67.33 │ null    │ null    │ F3         │
│     4 │  1 │ 9.20704 │ 29.008  │ 3.9583  │ F1         │
│     4 │  2 │  45.009 │ 5.003   │ 1.243   │ F2         │
│     4 │  3 │   17.33 │ null    │ null    │ F3         │
└───────┴────┴─────────┴─────────┴─────────┴────────────┘ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-20T11:54:15.277

试试这个..

```
select * from (select IDNUM,F1,F2,F3,E1,E2,H1,H2, null as E3,null as H3 from  T5) UnPivot((F,E,H) for sk in ((F1,E1,H1) as 'F1',
                          (F2,E2,H2) as 'F2',
                          (F3,E3,H3) as 'F3')) order by IDNUM,SK; 
```

# c# - 为什么故事板动画时属性上的设置功能不更新

> ID：10747359
> 
> 赞同：1
> 
> 时间：2012-05-25T01:23:24.443
> 
> 标签：c#, wpf, animation, binding, inotifypropertychanged

**我有财产：**

```
 double _X;
    public double X
    {
        get {
            this.Title = _X.ToString();
            return _X; 
        }
        set { 
            _X = value;
            this.Title = _X.ToString(); // !!!! this line does not execute when property changes from storyboard
            RaisePropertyChanged("X"); }
    } 
```

**和控制：**

```
 <Button x:Name="button" Content="Button" HorizontalAlignment="Left" Height="99.2" Margin="37,14,0,0" VerticalAlignment="Top" Width="98.4" RenderTransformOrigin="0.5,0.5">
        <Button.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform X="{Binding X}" Y="{Binding Y}"/>
            </TransformGroup>
        </Button.RenderTransform>
    </Button> 
```

**故事板：**

```
<Storyboard x:Key="Storyboard1" AutoReverse="True" FillBehavior="HoldEnd">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="button">
            <EasingDoubleKeyFrame KeyTime="0:0:1.2" Value="100">
                <EasingDoubleKeyFrame.EasingFunction>
                    <CircleEase EasingMode="EaseOut"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames>

</Storyboard> 
```

**当我为属性设置动画时，如果我正在实现 INotifyPropertyChanged 接口，为什么 set 方法不会改变？**换句话说，为什么在`this.Title = _X.ToString();`动画故事板的同时不执行该行。每次故事板动画时如何更新 X 属性？

* * *

## 编辑

我忘了提到我需要这个功能的原因。我经常需要为不在 xaml 中的属性设置动画。例如，假设我想为主音量或鼠标位置设置动画。我知道我可以创建一个线程然后进行数学运算并创建自己的动画。但是如果 wpf 已经有几个缓动功能和动画，为什么还要重新发明轮子。如果我可以使用表达式混合创建一个情节提要，然后使用该情节提要在我的代码中为属性设置动画，那就太好了。

* * *

## 编辑2

根据[@clemens](https://stackoverflow.com/users/1136211/clemens)，我已经解决了这个问题（也许我做错了什么）：

**我有课：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Controls;
using System.ComponentModel;
using System.Windows;

namespace SomeNamespace
{
    public partial class MyUserControl : UserControl, INotifyPropertyChanged
    {

        public static readonly DependencyProperty SomeDoubleProperty =
    DependencyProperty.Register("SomeDouble", typeof(Double),
        typeof(MyUserControl), new PropertyMetadata(0.0));

        public double SomeDouble
        {
            get
            {
                return (double)GetValue(SomeDoubleProperty);

            }
            set
            {
                SetValue(SomeDoubleProperty, value);
                MessageBox.Show("this msg should appear meanwhile animating!");
                // code does not execute
                RaisePropertyChanged("SomeDouble");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        public void RaisePropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }

    }
} 
```

**我有观点**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

        xmlns:test="clr-namespace:SomeNamespace"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded">
    <Window.Resources>
        <Storyboard x:Key="Storyboard1"  >
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="SomeDouble" Storyboard.TargetName="m">
                <EasingDoubleKeyFrame KeyTime="0:0:5.4" Value="100">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>            
        </Storyboard>
    </Window.Resources>
    <Grid>
        <test:MyUserControl x:Name="m" SomeDouble="5"></test:MyUserControl>
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="311,50,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />

    </Grid>
</Window> 
```

后面的按钮代码启动故事板......

该属性在后面的代码中没有改变，同时对其进行动画处理......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T08:09:57.787

如果我理解正确，您将为`X`TranslateTransform 的属性设置动画，该属性也绑定到您的`X`属性（您没有提到定义它的类）。

即使您已经声明了双向绑定，您的方法也行不通。诸如样式设置器、触发器、动画、值继承、属性元数据中的默认值、本地值等等（其中数据绑定设置本地值）等各种提供者的依赖[属性的值。](http://msdn.microsoft.com/en-us/library/ms752914.aspx)`TranslateTransform.X`这些提供程序以特定顺序应用，即具有特定[优先级](http://msdn.microsoft.com/en-us/library/ms743230.aspx)。

在您的场景中，这意味着`RenderTransform.X`从数据绑定中获取其本地值。启动动画时，只要动画正在运行或保持该值，有效的属性值就来自该动画。同时属性的本地值没有改变，这意味着对绑定没有影响（即使是双向的）。

如果要为`X`属性设置动画，可以将其设为[自定义依赖属性](http://msdn.microsoft.com/en-us/library/ms753358.aspx)并直接对其进行动画处理。

# php - magento 管理错误：SQLSTATE [42S02]：未找到基表或视图：1146 表“sinergi_luki.captcha_log”不存在

> ID：10747362
> 
> 赞同：1
> 
> 时间：2012-05-25T01:24:24.907
> 
> 标签：php, magento-1.5, magento

我的管理页面有问题。在我登录到管理员后，突然它显示一条错误消息..

SQLSTATE [42S02]：未找到基表或视图：1146 表 'sinergi_luki.captcha_log' 不存在

是因为我将我的 magento 1.5.0.1 迁移到了新服务器，但是在新服务器中我安装了 magento 1.7.0.0 ..？或者为什么？给我一个解决方案伙计们。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T19:07:45.773

Mage_Captcha 是 Magento 1.7.0 提供的新核心模块，安装脚本似乎命名错误。

将 app/code/core/Mage/Captcha/sql/captcha_setup/install-1.7.0.0.0.php 重命名为 mysql4-install-1.7.0.0.0.php，然后从缓存管理中刷新缓存存储。

我不确定 Magento 开发人员是否正在为不需要“mysql4-”前缀的安装脚本实施新标准，但如果是这样，当我升级到 1.7.0.2 时它不起作用，所以重命名这个文件可以诡计。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T20:18:59.340

使用以下代码创建一个 sql 文件，并将其导入到您的数据库中。

```
-- Server version   5.5.9

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `captcha_log`
--

DROP TABLE IF EXISTS `captcha_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `captcha_log` (
  `type` varchar(32) NOT NULL COMMENT 'Type',
  `value` varchar(32) NOT NULL COMMENT 'Value',
  `count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'Count',
  `updated_at` timestamp NULL DEFAULT NULL COMMENT 'Update Time',
  PRIMARY KEY (`type`,`value`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Count Login Attempts';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `captcha_log`
--

LOCK TABLES `captcha_log` WRITE;
/*!40000 ALTER TABLE `captcha_log` DISABLE KEYS */;
/*!40000 ALTER TABLE `captcha_log` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2012-07-10 14:41:53 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:15:32.120

可悲的是，除了：下次正确迁移 Magento 之外，没有什么神奇的答案。

新服务器上的系统具有引用自定义数据库表的代码， `sinergi_luki`. 此表没有从旧服务器转移到您的新服务器。它也不是基本 magento 安装的一部分。根据谷歌的翻译，sinergi 这个词是印尼语的协同效应，而 Luki 似乎是一个印尼语名字，所以我猜以前的开发人员构建了一些自定义功能，但不包括数据库迁移。

您应该找到旧数据库，导出此表，然后将其拉回到您的新系统中。除此之外，你是SOL。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T02:25:32.557

`sinergi_luki`是对magento安装的根文件夹名称的引用，仅此而已。

我们从 1.4.2 升级到 1.5 再从 1.6 升级到 1.7.0.1（ssh 升级）除了登录时出现的错误之外没有任何问题：

> SQLSTATE [42S02]：未找到基表或视图：1146 表 'apezooc_magento.captcha_log' 不存在

再次点击`Enter`，错误应该消失，我们进入管理部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-20T09:52:09.667

由于验证码模块安装脚本未运行/执行而发生此问题。要解决此问题，只需`'captcha_setup'`从`'core_resource'`表中删除条目或

```
delete FROM core_resource where code='captcha_setup'; 
```

并刷新浏览器

# asp.net - 扩展 ASP.NET 成员资格

> ID：10747371
> 
> 赞同：2
> 
> 时间：2012-05-25T01:25:55.220
> 
> 标签：asp.net, asp.net-membership

扩展 ASP.NET 中提供的 ASP.NET 成员（添加/删除/编辑用户功能）的最佳和最简单的方法是什么。我希望在`aspnet_users`表格中添加 1-2 列。我必须做些什么才能做到这一点。编辑和添加应该编辑这 2 个额外的用户列。显示用户应该显示这 2 个额外的列。我是 ASP.NET Membership 的新手，不想编写大量代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T01:52:41.277

您不会扩展会员资格提供者本身：至少，不会以这种方式。您可以而且*应该*做的是仅依靠 Membership 进行身份验证，并使用来自您的提供者的相同用户 ID 作为单独的表/位置中的主键来存储有关每个用户的任何其他信息。

**在任何情况下，您都不应使用自己的身份验证系统。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:46:58.900

ASP.NET Membership 不容易以您描述的方式扩展 - 该系统对模式非常规范。

但是，Microsoft 确实添加了一个可能的解决方案：[ASP.NET Profiles](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)，它具有可用于存储配置文件数据的可扩展字段。这很有用，但是您不能对这些字段运行关系查询（因为它们存储在实际数据库的 blob 字段中）。

如果您真的想真正改变应用程序中的成员身份和身份验证（以及配置文件状态）的性质，那么我会放弃 ASP.NET Membership 并自己滚动所有内容。

# python - 对于数据错误检查：有没有办法避免使用字典作为列表

> ID：10747374
> 
> 赞同：0
> 
> 时间：2012-05-25T01:26:17.200
> 
> 标签：python, dictionary

我的数据如下所示：

```
Observation 1  
Type : 1  
Color: 2  

Observation 2  
Color: 2  

Resolution: 3 
```

最初我所做的是尝试创建一个如下所示的 csv：

```
1,2  
2,3  # Only problem here is that the data should look like this 1,2,\n ,2,3 # 
```

我执行了以下操作：

```
while linecache.getline(filename, curline):  
    for i in range(2):    
        data_manipulated = linecache.getline(filename, curline).rstrip()    
        datamanipulated2 = data_manipulated.split(":")  
        datamanipulated2.pop(0)  
        lines.append(':'.join(datamanipulated2)) 
```

这是一个相当大的数据集，我试图找到方法来验证上述问题不会发生，以便我可以适当地编译数据并进行检查。我遇到了字典，但是，性能对我来说是一个大问题，如果可能的话，我更喜欢列表（至少，我的理解是字典可能会慢得多？）。我只是想知道是否有人对最快、最可靠的方法有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:21:34.073

怎么样：

```
input_file = open('/path/to/input.file')
results = []
for row in file:
    m = re.match('Observation (\d+)', row)
    if m:
        observation = m.group(1)
        continue
    m = re.match('Color: (\d+)', row)
    if m:
        results.append((observation, m.group(1),))
        print "{0},{1}".format(*results[-1]) 
```

您可以使用预编译的正则表达式加速。

# c# - c#中基于模板批量上传数据

> ID：10747377
> 
> 赞同：1
> 
> 时间：2012-05-25T01:26:25.943
> 
> 标签：c#, asp.net

我们有一个 Web 应用程序，用户可以在其中从网页创建特定类型的记录。网络表单上有许多必填字段，用户需要填写所有字段才能保存数据。

现在我们需要为用户提供一个功能，以便他们可以下载 MS Excel 模板或其他模板，用户将根据提供的格式提供批量数据。

你们有没有做过这样的事情。任何想法都非常感谢。

我对上述方法的主要关注是我们需要验证用户在 Excel 工作表中提供的数据。是否有任何第三方工具/组件可以做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:36:55.573

Have the client upload the excel file. Open it as a data source, validate the data (DataTable object). If there are any errors, return a list of errors to the user. You can do this all in .NET

# c# - 数组与数组列表的显着差异？

> ID：10747384
> 
> 赞同：16
> 
> 时间：2012-05-25T01:27:26.103
> 
> 标签：c#, arrays, arraylist

> **可能重复：**
> [何时在 c# 中使用 ArrayList 而不是 array[]？](https://stackoverflow.com/questions/412813/when-to-use-arraylist-over-array-in-c)

从内存或处理器成本的角度来看，数组和 arrayList 对象之间是否存在显着差异？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T01:35:14.807

An array is a low-level data structure that essentially maps to a region in memory. An `ArrayList` is a variable length list implemented as an array of `object` that is re-allocated as the list grows.

`ArrayList` therefore has some overhead related to managing the size of the internal array, and more overhead related to casting objects to the correct type when you access the list.

Also, storing everything as `object` means that value types get boxed on write and unboxed on read, which is extremely detrimental to performance. Using `List<T>`, a similar but strongly-typed variable size list avoids this issue.

In fact, `ArrayList` is practically deprecated in favor of `List<T>` since .NET 2.0.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T01:36:04.997

An array is a contiguous block of memory of fixed size, whereas an ArrayList (though you should prefer List since .NET 2.0) wraps an array to provide dynamically-resizable storage.

The "difference" between them being that, as far as they're encapsulated, an ArrayList is resizable, an array isn't. As far as the implementation is concerned: because an ArrayList wraps (and reallocates) arrays it will require more slightly more memory than an array (as it has to know the current number of elements, as opposed to its capacity), furthermore an ArrayList also requires CPU time to reallocate and copy its internal array if it ever reaches its internal capacity.

However, instantiating an ArrayList is no more expensive than allocating an array. The only difference there being the handful of instructions needed to initialize the ArrayList's state. The difference is negligible and not worth worrying about.

You'll find that if you are reallocating an array by yourself as the means of creating a resizable collection then you're better off using ArrayList/List as it has been thoroughly tested.

# python - AttributeError：“模块”对象没有属性“open_openwork”

> ID：10747385
> 
> 赞同：1
> 
> 时间：2012-05-25T01:27:30.580
> 
> 标签：python, django, excel

我想导入一个EXCEL文件，但是代码有问题。求助！

```
import xlrd

fname = "D:/pdf-ex/exc.xls"
bk = xlrd.open_openwork("fname","rb")
shxrange = range(bk.nsheets)
sh = bk.sheet_by_name("Sheet1")
nrows = sh.nrows
ncols = sh.ncols
print "nrows %d, ncols %d" % (nrows,ncols)

cell_value = sh.cell_value(1,1)
print cell_value

row_list = []
for i in range(1,nrows):
    row_data = sh.row_values(i)
    row_list.append(row_data) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:32:48.803

The reason for that is because `xlrd` module does not have `open_openwork()` function in it.

The function you may be looking for is [`open_workbook()`](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html#__init__.open_workbook-function):

> `open_workbook(...)` - Open a spreadsheet file for data extraction.

Plus there is nothing about the mode in the docs - by providing second argument you set the log file (opened file object to which messages will be read).

So instead of:

```
bk = xlrd.open_openwork("fname","rb") 
```

do:

```
bk = xlrd.open_workbook("fname") 
```

# jquery - jQuery css() 意外行为

> ID：10747386
> 
> 赞同：0
> 
> 时间：2012-05-25T01:27:31.143
> 
> 标签：jquery, css, google-chrome

jsfiddle：http: [//jsfiddle.net/by7Ar/](http://jsfiddle.net/by7Ar/)

我正在调用`$('#divid').css('padding-left', '200px');`应该加长或缩短特定 div 的调用，因为它具有`{width: 100%}`作为样式规则。但是，在调整浏览器窗口大小或重绘元素（隐藏然后再次显示）之前，它不会这样做。

我在 Chrome 中看到了这种行为，但在 IE9 或 Firefox 中没有。这是 Chrome 错误吗？

（注释掉最后的 javascript 行。在 Chrome 中，您可以看到它的行为不正确。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:50:42.203

我不知道我是否理解了这个问题，但这是[你](http://jsfiddle.net/by7Ar/6/)想要实现的目标吗？

# sqlite - 具有多值属性的 SQLite 表

> ID：10747388
> 
> 赞同：0
> 
> 时间：2012-05-25T01:27:52.343
> 
> 标签：sqlite, multivalue

我想创建一个表，可以在第一列中存储某物的标题或名称，然后在下一列中关联人员或对象。问题是可能有多个人与相同的标题或名称相关联。如果第一列是我的主键，我不能为每一行重复。

```
Name1 | Jim
      | John
      | Jill

Name2 | Mike
      | Mary

Name3 | Jeff 
```

这是否需要使用中间表来完成，如果是这样，我对如何实际编码它们（在 sqlite 中）感到模糊。我是否只是使用引用主表中适当属性的外键创建它们？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:29:05.937

是的，在 SQLite（或任何关系数据库）中，您可以通过创建单独的表来对此进行建模。在关系模型中，将两条信息存储在一个列中是一种死罪。

很难对您的问题给出更准确的答案，因为您没有包含任何细节，但很可能您需要一张表来存储您感兴趣的“事物”，一张表来存储有关人员的信息（一行每个人），以及第三个“链接”表，用于将人与“事物”联系起来。

第三个表仅包含构成“事物”表主键的列和构成人员表主键的列。此表的主键由所有列组成（如果“事物”和人员分别由源表中的单个列标识，则可能是两列），并且包含两个外键，一个返回“事物”，一个返回“事物”对人民。

添加一行以将人与事物相关联，但可以添加额外的行以将更多人与指定事物相关联，并将更多事物与每个人相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T17:58:45.700

另一种选择是使用专门设计用于支持单个字段中的多个值的 DBMS。有多种可供选择，包括至少一种开源风格。查看 d3、rocket software (U2 DBMS)、Ladybridge (open qm) 并在 Google 中搜索多值 DBMS 以获取更多信息。

# php - 如何解密 PHP 页面中的三重 DES 字符串？

> ID：10747393
> 
> 赞同：-1
> 
> 时间：2012-05-25T01:28:52.577
> 
> 标签：php, encryption

我希望有人可以帮助非 PHP 开发人员提供一个示例，说明如何解密三重 DES URL 编码字符串（例如，在名为“q”的查询字符串变量中传递给页面）。

密钥为 24 位，初始化向量为 8 位。

在 C# 中，原始数据是：

1.  UTF-8 编码为字节数组
2.  用密钥和 IV 加密
3.  编码为 Base 64 字符串
4.  编码为字符串的 URL

...

```
byte[] rawData;
TripleDES tripleDESalg = TripleDES.Create();
rawData = UTF8Encoding.UTF8.GetBytes(message);
ICryptoTransform cTransform = tripleDESalg.CreateEncryptor(key, IV);
byte[] resultArray = cTransform.TransformFinalBlock(rawData, 0, rawData.Length);
tripleDESalg.Clear();
encryptedText = Convert.ToBase64String(resultArray); 
```

...

在 PHP 页面中，我真的找不到有关如何将这些步骤结合在一起的示例：

1.  解码查询字符串变量“q”中的 URL 编码字符串
2.  解码 Base 64 编码的字符串（例如 base64_decode）
3.  使用用于加密它的相同密钥和 iv 解密值（假设您控制加密和解密并且两个系统都知道密钥和 iv 是什么）
4.  打印/回显输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:35:50.690

**从查询字符串中获取值**

`$string = $_REQUEST['q'];`

**网址解码**

[`urldecode`](http://php.net/manual/en/function.urldecode.php)

**Base 64 解码**

[`base64_decode`](http://php.net/manual/en/function.base64-decode.php)

**解密**

使用[`mcrypt_decrypt`](http://php.net/manual/en/function.mcrypt-decrypt.php).

对于第一个参数，您传入密码（密码[列表](http://php.net/manual/en/mcrypt.ciphers.php)），在您的情况下，它将是`MCRYPT_DES`.

其余参数将是密文、密钥、iv 等。

*PHP 手册很详尽。用它。*

# sql - 使用“simple”和“english”时，tsvector 上的“to_tsquery”会产生不同的结果？

> ID：10747395
> 
> 赞同：19
> 
> 时间：2012-05-25T01:29:01.613
> 
> 标签：sql, postgresql, full-text-search, tsvector

我已经被征召来帮助一个项目，并且在几年没有使用 PostgreSQL 之后我又重新开始使用它。除了缺乏使用外，我以前从未使用过 tsvector 字段，现在发现自己面临基于它们的错误。我阅读了有关字段类型及其用途的文档，但我很难挖掘有关“简单”与“英语”作为 to_tsquery() 的第一个参数有何不同的文档

例子

```
> SELECT to_tsvector('mortgag') @@ to_tsquery('simple', 'mortgage')
?column? 
----------
 f
(1 row)

> SELECT to_tsvector('mortgag') @@ to_tsquery('english', 'mortgage')
?column? 
----------
 t
(1 row) 
```

我认为他们都应该返回 true，但显然第一个没有 - 为什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-25T02:00:03.583

FTS 使用[字典](http://www.postgresql.org/docs/current/static/textsearch-dictionaries.html)来规范化文本：

> **12.6。字典**
> 
> 字典用于消除不应在搜索中考虑的单词（*停用词*），并*规范化*单词，以便相同单词的不同派生形式匹配。成功规范化的词称为*词素*。

因此，字典被用来丢弃那些在搜索中太常见或无意义的东西（*停用词*），并规范化其他所有内容，例如*city*和*city*将匹配，即使它们是不同的词。

让我们看看一些输出[`ts_debug`](http://www.postgresql.org/docs/current/static/textsearch-debugging.html#TEXTSEARCH-CONFIGURATION-TESTING)，看看字典发生了什么：

```
=> select * from ts_debug('english', 'mortgage');
   alias   |   description   |  token   |  dictionaries  |  dictionary  |  lexemes  
-----------+-----------------+----------+----------------+--------------+-----------
 asciiword | Word, all ASCII | mortgage | {english_stem} | english_stem | {mortgag}

=> select * from ts_debug('simple', 'mortgage');
   alias   |   description   |  token   | dictionaries | dictionary |  lexemes   
-----------+-----------------+----------+--------------+------------+------------
 asciiword | Word, all ASCII | mortgage | {simple}     | simple     | {mortgage} 
```

请注意，`simple`使用`simple`字典而`english`使用`english_stem`字典。

[`simple`字典](http://www.postgresql.org/docs/current/static/textsearch-dictionaries.html#TEXTSEARCH-SIMPLE-DICTIONARY)：_

> 通过将输入标记转换为小写并根据停用词文件检查它来进行操作。如果在文件中找到它，则返回一个空数组，导致令牌被丢弃。如果不是，则返回单词的小写形式作为规范化的词素。

`simple`字典只是抛出停用词、小写字母，仅此而已。我们自己可以看到它的简单性：

```
=> select to_tsquery('simple', 'Mortgage'), to_tsquery('simple', 'Mortgages');
 to_tsquery | to_tsquery  
------------+-------------
 'mortgage' | 'mortgages' 
```

`simple`字典太简单了，甚至无法处理简单的复数。

那么这本`english_stem`词典到底是关于什么的呢？“词干”后缀是一个赠品：这本词典将词干算法应用于单词，以将（例如）*城市*和*城市*转换为相同的事物。来自[精美手册](http://www.postgresql.org/docs/current/static/textsearch-dictionaries.html#TEXTSEARCH-SNOWBALL-DICTIONARY)：

> **12.6.6。雪球词典**
> 
> Snowball 词典模板基于 Martin Porter 的一个项目，Martin Porter 是流行的 Porter 英语词干算法的发明者。[...] 每个算法都了解如何将常见的单词变体形式简化为其语言中的基本拼写或词干拼写。

就在下面，我们看到了`english_stem`字典：

> ```
> CREATE TEXT SEARCH DICTIONARY english_stem (
>     TEMPLATE = snowball,
>     Language = english,
>     StopWords = english
> ); 
> ```

所以`english_stem`字典中的词干，我们可以看到发生这种情况：

```
=> select to_tsquery('english', 'Mortgage'), to_tsquery('english', 'Mortgages');
 to_tsquery | to_tsquery 
------------+------------
 'mortgag'  | 'mortgag' 
```

* * *

**执行摘要**：`'simple'`意味着简单的文字匹配，`'english'`将词干应用于（希望）产生更好的匹配。阻止将*抵押贷款*变成*抵押*贷款，这为您提供了匹配。

# c# - Xml 序列化为具有属性的元素

> ID：10747400
> 
> 赞同：1
> 
> 时间：2012-05-25T01:30:19.477
> 
> 标签：c#, xml, serialization

我一般使用 DataSet.GetXml() 方法来序列化数据集，我遇到了一个问题：有没有一种简单的方法可以使用属性而不是元素来序列化数据集对象？例如，GetXml() 方法可能会从数据集中生成：

```
<foo>
<height>bleem</height>
<color>yurple</color>
</foo> 
```

但是，我想看到类似的东西：

```
<foo height="bleem" color="yurple" /> 
```

我意识到面向属性的方法存在限制，但我使用的是数据库数据，所以唯一性应该不是问题。我一直在挖掘 SO，但我找不到任何内容。那里有任何 XML 专家有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:22:10.540

我不是 XML 专家——我只是在电视上播放一个。

我会使用[DataColumn.ColumnMapping 属性](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.columnmapping%28v=vs.100%29.aspx)来确定你的列是如何映射的。对于要映射为 XML 属性的所有列，将它们设置`ColumnMapping`为`MappingType.Attribute`.

# php - PHP 到数组 - 故障排除

> ID：10747406
> 
> 赞同：0
> 
> 时间：2012-05-25T01:31:22.610
> 
> 标签：php, arrays

我知道我在这里犯了新手错误，并且我需要创建一个变量来传递——尽管我不确定如何处理这个错误，并且搜索在线 tutes 也无济于事。如果有人能引导我朝着正确的方向前进，我将不胜感激。

我想让结果回显到一个数组中。那是; 在 $rss 数组中显示“xml”表中的“xmlurl”行字段。我希望这是有道理的。

```
// Get URLs from Database
$result = mysql_query("SELECT * FROM xml");
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
printf("'%s',", $row["xmlurl"]);
}
mysql_free_result($result);

// Take the URLs (xmlurl) and place them in an array
$rss = array(
'http://www.xmlurl.com.au',
'http://www.xmlurl.com.au'
); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T01:33:56.743

```
$rss = array();
while (...) {
    $rss[] = $row['xmlurl'];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T01:33:45.700

试试这个：

```
$rss = array();

$result = mysql_query("SELECT * FROM xml");
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $rss[] = $row["xmlurl"];
}
mysql_free_result($result); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T01:34:06.417

```
// Get URLs from Database
$result = mysql_query("SELECT * FROM xml");
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $rss[] = $row["xmlurl"]);
}
mysql_free_result($result);

print_r($rss); // Outputs the $rss array, listing all of the xmlurls' 
```

# go - 在 Go 中使用大整数值？（ParseInt 最多只能转换为“2147483647”？）

> ID：10747411
> 
> 赞同：15
> 
> 时间：2012-05-25T01:32:23.203
> 
> 标签：go

如何在 Go 中将一长串数字（50 位）转换为整数？

我得到以下代码的输出：

```
number = 2147483647 
```

> err = strconv.ParseInt：解析“37107287533902102798797998220837590246510135740250”：值超出范围

它似乎只能将数字转换为 2147483647。

```
package main

import "fmt"
import "io/ioutil"
import "strings"
import "strconv"

var (
        number int64
)

func main() {
    fData,err := ioutil.ReadFile("one-hundred_50.txt")
    if err != nil {
            fmt.Println("Err is ",err)
        }   
    strbuffer := string(fData)
    lines := strings.Split(strbuffer, "\n")

    for i, line := range lines {
        fmt.Printf("%d: %s\n", i, line)
        number, err := strconv.Atoi(line)
        fmt.Println("number = ", number)
        fmt.Println("err = ", err)
    }   
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-25T01:41:36.733

您需要[math/big](http://golang.org/pkg/math/big)包，它提供任意精度整数支持。

```
import "math/big"

func main() {
    // ...
    for i, line := range lines {
        bi := big.NewInt(0)
        if _, ok := bi.SetString(line, 10); ok {
            fmt.Printf("number = %v\n", bi)
        } else {
            fmt.Printf("couldn't interpret line %#v\n", line)
        }
    }
} 
```

这是它工作的一个[简单示例](http://play.golang.org/p/izWUYl9WwY)。

# php - PHP Time Overlap check

> ID：10747412
> 
> 赞同：0
> 
> 时间：2012-05-25T01:32:48.053
> 
> 标签：php, time

I need to check if two time ranges overlap. For example,

time1: 13:20 - 13:40
time2: 14:00 - 14:30
time3: 13:30 - 13:50

time1 and time3 overlap. How do I check this?

time1 and time2 have a gap of 20 minutes, but if the gap is less than 30 minutes it also should be considered overlapping.

Anyone can help me with this, thanks very much.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:48:05.097

这个？

```
$_30mins = 60*30;  // 60 secs * 30 minutes
// make the times into seconds
$times = array();
$times[] = array("from"=>mktime(13,20,0,1,1,1970),"to"=>mktime(13,40,0,1,1,1970));
$times[] = array("from"=>mktime(14,00,0,1,1,1970),"to"=>mktime(14,30,0,1,1,1970));
$times[] = array("from"=>mktime(13,30,0,1,1,1970),"to"=>mktime(13,50,0,1,1,1970));

foreach($times as $key=>$val) {
   foreach($times as $key2=>$val2) {
      if ($key2!=$key && (($val["from"]>=$val2["from"] && $val["from"]<=$val2["to"]) || 
         (abs($val["to"]-$val2["from"])<$_30mins))) {
         echo "time $key overlaps with $key2<br>";
         break;
      }
   }
} 
```

# javascript - change div width based on content and browser width

> ID：10747415
> 
> 赞同：1
> 
> 时间：2012-05-25T01:33:26.807
> 
> 标签：javascript, jquery, html, css

Let's say I have something like below:

```
<div id="outer">
    <img src="my_first_image.gif" alt="My first image" />
    <div id="inner_div">Some text here...</div> <img src="my_second_image.gif" alt="My second image" />
</div> 
```

My `inner_div` contains some texts. How do I make it so that I not only display my first image, my inner div and my second image next to one another and also make sure that the total width of my `outer` div expand to take the full width of the browser window (with my elements still displayed one next to each other no matter how long the text in my inner div becomes). Is this possible with just straight css or am I gonna need some jQuery to do that?

**NOTE :** The elements must also be vertically centered with regards to each other and within the outer div

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:46:35.803

实际上，对于 web 标准，您不应该放在`<div>`next`<img>`或`<img>`next 旁边`<div>`。

您的问题的解决方案是将所有内容包装在 中`#outer`，例如将每个项目包装在标签中，然后将一些 CSS 应用于它们（如`float: left`）。
例如，

```
<div id="outer">
   <div class="inner"><img src=".."/></div>
   <div class="inner"><img src=".."/></div>
   <div class="inner">some very long text</div>
</div> 
```

哪个

```
<style type="text/css">
   .inner {
      float: left;
   }
</style> 
```

如果您还希望它垂直居中到外部，您的 css 将是这样的。

```
<style type="text/css">
   #outer {
      display: table;
   }
   .inner {
      display: table-cell;
      vertical-align: middle;
   }
</style> 
```

有更多方法可以解决这个问题，但我认为这是最简单的方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:53:26.330

我想这就是你想要的，如果我理解正确的话？

```
<style>
#outer #inner_div{float:left;}
#outer img{clear:left;}

</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:55:09.220

尝试这个

CSS

```
#outer{
  width:100%;
}
#outer div, #outer img{
  width:33%;
  display:inline-block;
  vertical-align:middle;
  text-align:center;
} 
```

HTML

```
<div id="outer">
  <img src="my_first_image.gif" alt="My first image" />
  <div id="inner_div">Some text here...</div>
  <img src="my_second_image.gif" alt="My second image" />
</div> 
```

需要一些跨旧浏览器的工作`inline-block`，但你明白了。

Presto [http://jsfiddle.net/EPpAn/](http://jsfiddle.net/EPpAn/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T06:52:12.973

我希望这是你想要的：http: [//jsfiddle.net/linmic/CCut8/](http://jsfiddle.net/linmic/CCut8/)

干杯

# php - db2_fetch_assoc() not returning the next row even when one exists

> ID：10747424
> 
> 赞同：0
> 
> 时间：2012-05-25T01:34:40.637
> 
> 标签：php, db2

db2_fetch_assoc() isn't finding the next row when called from certain places - even though there are more rows in the recordset.

goQueryDB2() connects to the database and runs a query. It is able to return the first row in the recordset using db2_fetch_assoc() and the second row in the recordset by calling the outside function getNextRowDB2() (which does the same thing).

The recordset resource is returned from that function ($result). However when getNextRowDB2() is then called again with $result supplied as a parameter, the third row in the recordset is NOT returned - in fact it can't find anything and throws a warning (Warning: db2_fetch_assoc() [function.db2-fetch-assoc]: Fetch Failure).

You can see from the output of "No results found in Resource id #12" the name of the resource has been effectively passed to the getNextRowDB2() function - but for some reason it no longer find any rows in that recordset.

Can anyone tell me what is going on? Or even confirm if you agree this code looks ok?

Is there something that makes the DB2 recordset resource inaccessible outside the function in which it was called?

**This worked ok in MySQL (I have to convert to DB2).**

So this code:

```
function goQueryDB2($sql)
{
  if($con = db2_connect("MASTER", "USER", "PASSWORD"))
  {
    echo "<li>Connected to master database</li>";   
  }

  if($result = db2_exec($con, $sql))
  {
    echo "<li>SQL Query ran successfully</li>"; 
  }

  //Just proving some data can be returned as this point
  $row = db2_fetch_assoc($result);

  if(sizeof($row) > 0)
  {
    echo "<li>db2_fetch_assoc returned a record in the resultset (Resource ID: " . $result . ") that has " . sizeof($row) . " fields</li>"; 
  }

  //Just proving some data can be returned as this point
  $row = getNextRowDB2($result);
  if(sizeof($row) > 0)
  {
    echo "<li>getNextRow() returned a record in the resultset (Resource ID: " . $result . ") the has " . sizeof($row) . " fields</li>"; 
  }

  return $result;
}

function getNextRowDB2($result)
{
    if($row = db2_fetch_assoc($result))
    {
        return $row;    
    }
    else
    {
        echo "<li>No results found in " . $result . "</li>";    
    }
}

echo "<h2>goQueryDB2()</h2>";
$result = goQueryDB2("SELECT * FROM users");

echo "<h2>getNextRowDB2()</h2>";
$row = getNextRowDB2($result); 
```

Produces this output:

```
goQueryDB2()
Connected to master database
SQL Query ran successfully
db2_fetch_assoc returned a record in the resultset (Resource ID: Resource id #12) that has 25 fields
getNextRow() returned a record in the resultset (Resource ID: Resource id #12) the has 25 fields
getNextRowDB2()

Warning: db2_fetch_assoc() [function.db2-fetch-assoc]: Fetch Failure in /home/portal/includes/functionsSecurity.php on line 262
No results found in Resource id #12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:11:31.383

我能够通过使用持久连接来解决：

```
$con = db2_pconnect("MASTER", "USER", "PASSWORD") 
```

我假设即使资源的名称（“Resource id #12”）是从函数传回的，DB2 连接和所有返回的资源在调用它们的函数结束时都会停止存在 - 除非持久连接用来。

这是 DB2 独有的，因为我发现在 MySQL 中实现这一点不需要持久连接。

# html - Can I create a separate stylesheet for IE?

> ID：10747425
> 
> 赞同：2
> 
> 时间：2012-05-25T01:34:41.083
> 
> 标签：html, css, internet-explorer

I created my website using a mac. As you know I can't test it out using Internet Explorer, I left it for the last but expecting layout disasters. The website looks perfect in Chrome, Firefox and Safari. As expected, IE shows it differently. How should I move on from here?

1.  Create a style sheet just for IE?
2.  Update my existing style sheet to display the website as expected in all the browsers I mentioned earlier?

To me, (1) seems to be the easiest choice so that I can tailor my CSS to display properly in IE without worrying about Chrome, Firefox and Safari. Do you think this is ok?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:42:39.643

您可以专门针对您`stylesheet`的 IE 浏览器。您需要将条件代码放在页面的标题部分。请参阅下面的示例。

对于所有 IE

```
<!--[if IE]>
For all IE
<![endif]--> 
```

如果您只想定位到特定版本的 IE，那么

```
<!--[if IE 7]>
For only IE 7
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T01:43:52.060

您可以做几件事。

*   [有条件的评论](http://www.quirksmode.org/css/condcom.html)

针对所有**IE版本的条件注释示例**

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]--> 
```

您可以找到更多有条件的评论[http://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

*   [验证您的 Css](http://jigsaw.w3.org/css-validator/)修复一些明显的降价错误可能会极大地改进您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T01:42:35.140

您的目标是哪个版本的 IE？大多数与 IE CSS2 错误有关的主要问题都在 IE6 中，在较小程度上是 IE7 - 但是 IE8 和 IE9 要好得多，而且我没有遇到任何需要它们具有单独样式表的错误。

如果你的目标是 IE6/7，那么你有我的同情，但我不明白你为什么要打扰，因为现在 IE6 的使用可以忽略不计。但是，如果必须，那么条件注释是管理问题的最不痛苦的方法。只需在 <head> 元素中执行此操作：

<!--[if IE 6]> <link rel="stylesheet" href="ie6patch.css" /> <![endif]-->

在这里阅读更多：[http ://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

另外，不要忘记将 <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 添加到您的页面强制 IE8 和 IE9 使用标准模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T02:29:36.630

将来您可以使用 css 重置来最小化浏览器之间的差异。我过去使用过这个：http: [//developer.yahoo.com/yui/reset/](http://developer.yahoo.com/yui/reset/)

还可以考虑使用[http://www.99lime.com](http://www.99lime.com)或类似的模板。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T01:36:35.850

Check out [conditional comments](http://www.quirksmode.org/css/condcom.html).

# java - 如何设置参数并将参数传递给由 BIRT 报告设计器通过 BIRT API 创建的 BIRT 报告？

> ID：10747427
> 
> 赞同：9
> 
> 时间：2012-05-25T01:34:50.637
> 
> 标签：java, jakarta-ee, report, birt

我创建了一个采用单个参数的简单报告。该参数在查询中使用，直接在报表设计器中执行时执行良好。顺便说一句，我没有为这份报告使用 javascript 或任何脚本。我看到有些人试图在这里使用脚本和/或 javascripts 传递参数以获得答案，但这不是我正在做的。我通过java传递我的所有参数。继续，在这份报告中，我列出了活动/非活动项目。我传入一个“N”来列出不活动的项目，传入一个“Y”来列出活动项目。当我尝试通过 API 传入参数时，无论我传入什么，我总是会得到一个活动项目列表。顺便说一下，“Y”是传入参数的默认值。（我正在覆盖默认值下面的代码）我的问题 我有的是报告似乎不想采用我设置的参数。是的，我传入的变量中的值发生了变化，但报告没有反映这种变化。我的代码如下。我已尝试遵循此链接的建议以及如何设置参数。

[http://www.eclipsezone.com/eclipse/forums/t67723.html](http://www.eclipsezone.com/eclipse/forums/t67723.html)

如果您转到链接，请转到 #4 并查看要执行的任务列表。这是我试图遵循的。我觉得我可能错过了什么。如果你能做到这一点，你能给我一些关于我所缺少的建议吗？非常感谢！

-戴尔

```
 public class ReportGenerator {
        public static void main(String args[]) throws Exception{
        ReportGenerator rg = new ReportGenerator();
        rg.executeReport("N");
        }

        @SuppressWarnings({ "unchecked", "deprecation" })
        public void executeReport(String activeIndicator) throws EngineException {

        IReportEngine engine=null;
        EngineConfig config = null;

        try{
            config = new EngineConfig( );            
            config.setBIRTHome("C:\\birt-rcp-report-designer-3_7_2\\ReportEngine");
            config.setLogConfig("c:/temp/test", Level.FINEST);
            Platform.startup( config );
            IReportEngineFactory factory = (IReportEngineFactory) Platform.createFactoryObject( IReportEngineFactory.EXTENSION_REPORT_ENGINE_FACTORY );
            engine = factory.createReportEngine( config );        

            IReportRunnable reportDesign = null;
            reportDesign = engine.openReportDesign("C:\\workspace\\SimpleReport\\ReportTemplates\\ItemListingReport.rptdesign"); 
            IRunAndRenderTask task = engine.createRunAndRenderTask(reportDesign);
            IGetParameterDefinitionTask parameterDefinitionTask = engine.createGetParameterDefinitionTask(reportDesign);
            parameterDefinitionTask.evaluateDefaults();
            HashMap<String, String> params = parameterDefinitionTask.getDefaultValues();
            params.put("aIndicator", activeIndicator);
            parameterDefinitionTask.setParameterValues(params);

            ConnectionHelper connectionHelper = new ConnectionHelper();
            task.getAppContext().put("OdaJDBCDriverPassInConnection", connectionHelper.getConnection());

            PDFRenderOption options = new PDFRenderOption();
            options.setOutputFormat("pdf");
            options.setOutputFileName("C:\\workspace\\SimpleReport\\output\\itemListingReport.pdf");

            task.setRenderOption(options);

            task.run();
            task.close();
            engine.destroy();
        } catch (Exception ex) {
            ex.printStackTrace();
        } finally {
            Platform.shutdown();
        }
        }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T08:18:38.560

您需要在 IRunAndRenderTask 上设置参数：

```
IRunAndRenderTask task =
    engine.createRunAndRenderTask(reportRunnable);
Map< String, Object > birtParams = ...;
task.setParameterValues( birtParams ); 
```

# eclipse - Perl EPIC on Eclipse: "\Perl\Directory is not a valid location for linked resources"

> ID：10747431
> 
> 赞同：2
> 
> 时间：2012-05-25T01:35:35.147
> 
> 标签：eclipse, perl, debugging, epic

I am trying to debug a Perl script under EPIC on Eclipse (on Windows 7). When stepping along in the debugger, when it reaches the place where is has to jump to another package (called "Utilities.pm") due to a subroutine call, it gives the following succession of Eclipse errors:

```
'E:\Perl' is not a valid location for linked resources.
EPIC cannot access files located in folders on the path to the workspace folder, nor within the workspace folder itself.
An unexpected exception occurred while creating a link to E:/Perl/Utilities.pm 
```

I am aware of this: [eclipse: Not a valid location for linked resources](https://stackoverflow.com/questions/1655770/eclipse-not-a-valid-location-for-linked-resources) and this: [Eclipse gives error "... is not a valid location for linked resources."](https://stackoverflow.com/questions/3298029/eclipse-gives-error-is-not-a-valid-location-for-linked-resources) But I can't deduce from them how to solve my case.

Running as Administrator doesn't help.

TIA

Helen

Eclipse version 3.7.1 build M20110909-1335, EPIC version 0.6.44, Active Perl 5.14.2 running on Windows 7.

Note: cross-posted on: [http://perlmonks.org/?node_id=972408](http://perlmonks.org/?node_id=972408)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:07:16.073

显然，工作区 - 项目 - 链接资源文件结构存在一些不一致。我已经删除了整个项目，从头开始重新启动，然后这个错误没有再次出现。

但是，该程序因另一个 Eclispe/EPIC 错误而挂起，我将很快单独发布。

这是以下问题：

[Perl 调试器：在运行时错误时，调试器会以神秘消息终止，而不是“捕获”错误](https://stackoverflow.com/questions/10775274/perl-epic-on-eclipse-on-a-run-time-error-the-debugger-terminates-with-a-crypti)

# mysql - 如何限制行通过查询从表中删除？

> ID：10747432
> 
> 赞同：1
> 
> 时间：2012-05-25T01:35:36.820
> 
> 标签：mysql, sql

那可能吗？我知道如何使用程序来完成它，但是在没有主键或外键支持的情况下是否有任何查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:38:01.413

在 MySQL 中，我认为这是不可能的。如果运行查询的 MySQL 用户具有 DELETE 权限，那么他们将能够删除任何行。

# json - 我们可以在立体主义上使用自定义 JSON 数据吗？

> ID：10747433
> 
> 赞同：5
> 
> 时间：2012-05-25T01:35:47.367
> 
> 标签：json, d3.js, cubism.js

我看到了立体主义图表，它们简直太棒了。我有一个包含 1000 个条目的大 JSON 文件，这些条目具有时间戳和值（整数）。立体主义能否绘制这些图？！我似乎找不到这方面的文档...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T06:05:31.417

Cubism 通常用于实时数据，但您可以实现一个简单地从 JSON 文件返回静态值的指标。通常，您通过使用[context.metric](https://github.com/square/cubism/wiki/Context#wiki-metric)来做到这一点。例如，请参阅[立体主义介绍演讲](http://bost.ocks.org/mike/cubism/intro/)中的[股票演示](http://bost.ocks.org/mike/cubism/intro/demo-stocks.html)。

# c++ - How do I unit test a C++ metro class library?

> ID：10747444
> 
> 赞同：0
> 
> 时间：2012-05-25T01:36:59.313
> 
> 标签：c++, unit-testing, windows-runtime, visual-studio-2012, c++-cx

I have created a dead simple C++ metro class library in the VS2011 beta, with a Vector3 class. I want to unit test some of the methods.

I added a C++ metro unit test project to the solution and, for the life of me, I can't figure out how to correctly reference the other project without compile errors in the tests.

I know that whatever the answer is it will be downright obvious in hindsight. I've tried following various tutorials ([example](http://msdn.microsoft.com/en-us/library/hh419385%28v=vs.110%29.aspx)), but none have had the intended result.

I've tried all the things I can think of. Every variation of include/using/linker-paths/library-paths against the project/.lib/.dll/.winmd/.h/.cpp files. Generally the errors come down to:

```
error LNK2019
unresolved external symbol
"class Vector3 __cdecl operator-(class Vector3 const &,class Vector3 const &)" (??G@YA?AVVector3@@ABV0@0@Z)
referenced in function "void __cdecl AssertApproximatelyEqual(class Vector3,class Vector3)" (?AssertApproximatelyEqual@@YAXVVector3@@0@Z) 
```

That is to say, I think I've managed to properly import the headers, but the object code they reference is not found.

# windows - 您如何将版本控制、测试和持续集成/部署等开发实践应用于系统管理？

> ID：10747449
> 
> 赞同：-1
> 
> 时间：2012-05-25T01:37:42.523
> 
> 标签：windows, linux, sysadmin, infrastructure, system-administration

想象一下，您要管理许多服务器，这些服务器具有许多人使用的许多不同服务。现在假设您要重新配置或替换其中一台服务器上的某些软件。显然，您不想在生产中的服务器上工作。

如果这是代码更改，作为开发人员，我会在本地开发机器上进行更改，在本地进行测试并将更改提交到版本控制系统。然后可以将更改部署在暂存环境中，进一步测试并最终部署在生产环境中。如有必要，我也很容易回滚。

一般来说，或者具体来说，您如何在系统管理中实现这一点？

（首先想到的是使用虚拟机并将虚拟机映像放入版本控制中，但我确信有很多我目前不知道的文献和聪明的解决方案。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:49:44.903

使用 chef 或 puppet 来强制执行机器配置，并将他们的食谱和食谱置于版本控制之下。是的，虚拟机会让事情变得更容易，但即使是物理服务器的配置也可以通过 kickstart 或 preseeed 来控制，这又可以是版本控制的。

# javascript - 缺少 XML 节点

> ID：10747452
> 
> 赞同：2
> 
> 时间：2012-05-25T01:38:01.797
> 
> 标签：javascript, html, xml

我有以下 XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!-- Edited by XMLSpy® -->
<note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>

    <body>Don't forget me this weekend!</body>
</note> 
```

并使用以下 Javascript/HTML：

```
<html>

    <body>
        <h1>W3Schools Internal Note</h1>
        <div>
            <b>To:</b>
            <span id="to"></span>
            <br />
            <b>From:</b>
            <span id="from"></span>
            <br />
            <b>Message:</b>
            <span id="message"></span>
        </div>
        <script type="text/javascript">
            if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            } else { // code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.open("GET", "note.xml", false);
            xmlhttp.send();
            xmlDoc = xmlhttp.responseXML;
            document.getElementById("to").innerHTML = xmlDoc.getElementsByTagName("to")[0].childNodes[0].nodeValue;
            document.getElementById("from").innerHTML = xmlDoc.getElementsByTagName("from")[0].childNodes[0].nodeValue;
            document.getElementById("message").innerHTML = xmlDoc.getElementsByTagName("body")[0].childNodes[0].nodeValue;
        </script>
    </body>

</html> 
```

这工作正常，但如果 XML 文件中的值之一没有值，`<from></from>`那么其余值将不会返回任何数据。

有什么想法可以检测到这一点并继续前进，即使节点中没有价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:45:20.993

如果`childNodes[0]`其中任何一个都不存在，则在尝试调用`nodeValue`它时会出错。先测试是否存在：

```
// Get and store the nodes from the xml first
var toNode = xmlDoc.getElementsByTagName("to")[0];
var fromNode = xmlDoc.getElementsByTagName("from")[0];
var messageNode = xmlDoc.getElementsByTagName("message")[0];

// And only assign them if they actually have childNodes. Otherwise use an empty string
document.getElementById("to").innerHTML = toNode.childNodes.length ? toNode.childNodes[0].nodeValue : "";
document.getElementById("from").innerHTML = fromNode.childNodes.length ? fromNode.childNodes[0].nodeValue : "";
document.getElementById("message").innerHTML = messageNode.childNodes.length ? messageNode.childNodes[0].nodeValue : ""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:45:54.237

这是因为当标签没有值时，它没有子节点，特别是文本节点。这使得`childNode`不包含任何内容，并且`childNode[0]`是`undefined`。如果您尝试获取 的属性`undefined`，它将遇到错误：

```
//gets the from
xmlDoc.getElementsByTagName("from")[0]

//this is undefined since there is no childNode
xmlDoc.getElementsByTagName("from")[0].childNodes[0]

//getting a property of undefined will cause an error and kill execution
xmlDoc.getElementsByTagName("from")[0].childNodes[0].nodeValue; 
```

这是一个使用空白[的示例](http://jsfiddle.net/uTHLk/)`<span>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T01:47:48.463

只需检测它：

```
var map = {to:"to", from:"from", message:"body"};
for (var id in map) {
    var node = xmlDoc.getElementsByTagName(map[id]])[0]; // worst case: accesses first node of empty NodeList
    if (node && node.childNodes.length) // >0
         document.getElementById(id).innerText = node.childNodes[0].nodeValue;
} 
```

# android - 如果您上传具有更严格过滤器的新应用修订版，使用旧手机的客户会发生什么情况？

> ID：10747455
> 
> 赞同：0
> 
> 时间：2012-05-25T01:38:17.377
> 
> 标签：android, opengl-es

我想更新我的应用程序以要求 OpenGL ES 2.0。但我希望我的手机只支持 ES 1.0 的客户可以继续下载旧版本。

如果我的应用程序的新版本有

```
<uses-feature android:glEsVersion="0x00020000" android:required="true" /> 
```

在其清单中，使用旧手机的客户在更新应用程序时会看到什么？他们是否能够下载旧版本，或者只是说他们的手机无法运行该应用程序并且他们不走运？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:55:25.690

我认为他们希望能够在 Market/Play 商店中看到该应用程序。您应该上传多个不同版本的 APK，以确保旧设备仍然可以看到（旧版本）您的应用。参考：http: [//developer.android.com/guide/market/publishing/multiple-apks.html](http://developer.android.com/guide/market/publishing/multiple-apks.html)

# asp.net-mvc-3 - MvcSiteMap 只有根节点

> ID：10747459
> 
> 赞同：1
> 
> 时间：2012-05-25T01:39:22.003
> 
> 标签：asp.net-mvc-3, asp.net-mvc-sitemap

我正在尝试使用 MvcSiteMapProvider，但要创建自己的自定义布局。我使用 nuget 将 MvcSiteMapProvider 版本 3.2.3.0 安装到我的项目中，并创建了这个文件用于开发。但是，当我尝试遍历根节点的子节点时，没有任何子节点。

```
<?xml version="1.0" encoding="utf-8" ?>
<mvcSiteMap xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0"
            xsi:schemaLocation="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0 MvcSiteMapSchema.xsd"
            enableLocalization="true">
  <mvcSiteMapNode title="Home" controller="Home" action="Index">
    <mvcSiteMapNode title="Reports" controller="Reports" action="Index"/>
    <mvcSiteMapNode title="Queries" controller="Queries" action="Index"/>
    <mvcSiteMapNode title="Tools" controller="Tools" action="Index">
      <mvcSiteMapNode title="Markets" controller="Markets" action="Index">
        <mvcSiteMapNode title="Boundary Files" controller="Markets" action="BoundaryFiles" />
        <mvcSiteMapNode title="Mass Update" controller="Markets" action="MassUpdate" />
        <mvcSiteMapNode title="SHOULD NOT BE HERE" controller="Home" action="Headings" />
      </mvcSiteMapNode>
      <mvcSiteMapNode title="Categories" controller="Categories" action="Index"/>
      <mvcSiteMapNode title="Blasts" controller="Blasts" action="Index">
        <mvcSiteMapNode title="Get Blast" controller="Blasts" action="Get" />
      </mvcSiteMapNode>
      <mvcSiteMapNode title="Alerts" controller="Alerts" action="Index"/>
      <mvcSiteMapNode title="Applications" controller="Applications" action="Index"/>
    </mvcSiteMapNode>
    <mvcSiteMapNode title="Subscribers" controller="Subscribers" action="Index" />
  </mvcSiteMapNode>
</mvcSiteMap> 
```

然而，根节点似乎没有任何子节点：

![在此处输入图像描述](../Images/2e7a1c335ec871825f2db12125ebaee9.png)

我不知道出了什么问题。我已经用正在执行的动作替换了根，并给了它一个类似的孩子，但这没有用：

```
<mvcSiteMapNode title="ASDFG" controller="Test" action="TestSiteMap">
  <mvcSiteMapNode title="ASDFGHJKL" controller="Test" action="TestSiteMap"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T10:51:45.170

很难说这里发生了什么。如果我不得不猜测，我会说这可能与子节点直接添加到 v3 中的节点这一事实有关，在这种情况下，站点地图无法跟踪它们。此选项已在[MvcSiteMapProvider v4](http://www.nuget.org/packages?q=mvcsitemapprovider&prerelease=&sortOrder=package-download-count)中删除，以确保所有节点都直接添加到站点地图并由其内部集合跟踪。

我建议升级以查看此行为在 v4 中是否可重现。

# wcf - 使用 IOC 容器的 WCF 属性注入

> ID：10747460
> 
> 赞同：0
> 
> 时间：2012-05-25T01:39:26.503
> 
> 标签：wcf, inversion-of-control, castle-windsor, custom-attributes, wcffacility

使用 ASP.NET MVC，我可以像这样替换 FilterProvider

```
 var oldProvider = FilterProviders.Providers.Single(f => f is FilterAttributeFilterProvider);
 FilterProviders.Providers.Remove(oldProvider);
 FilterProviders.Providers.Add(new CustomFilterProvider(_container)); 
```

使用我自己的自定义提供程序。它没有让我能够使用工厂模式来创建控制器过滤器属性，但我确实能够使用属性注入来设置属性可能需要使用容器的依赖项。

是否可以使用 WCF 做类似的事情，以便我可以将依赖项（属性注入很好）注入到我的用户定义的类中，这些类派生自我在服务方法上使用的[属性](http://msdn.microsoft.com/en-us/library/system.attribute.aspx)（服务是使用 IOC 创建的）？

我正在使用 CastleWindsors WcfFacility，但通用解决方案（适用于任何容器）可能是一个更好的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:24:19.007

一种方法是使用容器 OnCreate 方法或类似方法，并在注册时执行以下操作

```
 Container.Register(Component.For<IMyService>().ImplementedBy<MyService>().OnCreate(WireUpAttibutes).LifeStyle.Transient); 
```

然后有以下方法

```
 private static void WireUpAttibutes<T>(IKernel kernel, T instance) {
     var attributes = instance.GetType().GetCustomAttributes(typeof(MyAttribute), false);
     foreach (var attribute in attributes) {
        WireUp(kernel, attribute.GetType(), attribute);
     }
  }

  private static void WireUp(IKernel kernel, Type type, object instance) {
     var properties = type.GetProperties().Where(p => p.CanWrite && p.PropertyType.IsPublic);
     foreach (var propertyInfo in properties.Where(propertyInfo => kernel.HasComponent(propertyInfo.PropertyType))) {
        propertyInfo.SetValue(instance, kernel.Resolve(propertyInfo.PropertyType), null);
     }
  } 
```

# android - 从 Market 安装时应用程序崩溃，但如果手动安装 Apk 则不会。

> ID：10747473
> 
> 赞同：0
> 
> 时间：2012-05-25T01:41:33.003
> 
> 标签：android, google-play

如果我只是通过将 apk 移动到手机上并安装它来手动安装它，我的应用程序工作正常，但是当我将它放在市场上时，它在第一个 Activity 时崩溃，这就是 logcat。

```
E/AndroidRuntime(  999): FATAL EXCEPTION: main
E/AndroidRuntime(  999): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mbwasi.funapp/com.mbwasi.funapp.Splash}: java.lang.ClassNotFoundException: com.mbwasi.funapp.Splash in loader dalvik.system.PathClassLoader[/data/app/com.mbwasi.funapp-1.apk]
E/AndroidRuntime(  999):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
E/AndroidRuntime(  999):        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2721)
E/AndroidRuntime(  999):        at android.app.ActivityThread.access$2300(ActivityThread.java:132)
E/AndroidRuntime(  999):        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)
E/AndroidRuntime(  999):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  999):        at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(  999):        at android.app.ActivityThread.main(ActivityThread.java:4669)
E/AndroidRuntime(  999):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  999):        at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(  999):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
E/AndroidRuntime(  999):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
E/AndroidRuntime(  999):        at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  999): Caused by: java.lang.ClassNotFoundException: com.mbwasi.funapp.Splash in loader dalvik.system.PathClassLoader[/data/app/com.mbwasi.funapp-1.apk]
E/AndroidRuntime(  999):        at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
E/AndroidRuntime(  999):        at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
E/AndroidRuntime(  999):        at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
E/AndroidRuntime(  999):        at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
E/AndroidRuntime(  999):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2619)
E/AndroidRuntime(  999):        ... 11 more 
```

这里会发生什么？我还在日志中注意到 apk 名称的末尾也有 -1，

```
com.mbwasi.funapp-1.apk 
```

这是从哪里来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:53:43.460

这是在同一部手机上吗？您确定要上传完全相同的 APK 吗？`ClassNotFoundException`可能意味着您的 Splash 活动正在使用的某些类未找到，您可能缺少某些库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:48:40.470

好吧，我把它留了一夜，刷新了我的应用程序的市场页面，现在它不仅显示为与我的所有设备兼容，而且在安装时也可以工作。所以这是一个市场问题。另一个线程中有一个提示取消发布和发布，我这样做了，但不知道它是否真的做了任何事情。

# c++ - CreateProcess 和 ShellExecute 的区别

> ID：10747479
> 
> 赞同：11
> 
> 时间：2012-05-25T01:42:41.210
> 
> 标签：c++, windows, winapi, createprocess, shell-exec

两者的主要区别是什么？我愿意从我的 (C++) 应用程序中只运行另一个 EXE。在继承环境、安全特性等方面有什么不同吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T09:08:06.160

`CreateProcess`和之间的主要区别`ShellExecute`如下：`CreateProcess`更多地面向低级别和`ShellExec`高用户杠杆，在资源管理器中看到用户。

例如使用`CreateProcess`一个可以使用长度更多的命令行`MAX_PATH`。它有 32,768 个字符的限制。您还可以使用`CreateProcess`在另一个 Windows 桌面（如登录屏幕）上启动程序（如果您有足够的权限）。

另一个例子。例如，您可以使用`ShellExecute`启动控制面板或打开计算机上存在的任何程序来编辑 JPG 文件。因此，您可以`ShellExecute`在 Windows 资源管理器中使用接近相应的操作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-25T01:52:26.627

主要区别在于灵活性。`ShellExecute`更容易使用，但没有很大的灵活性。`CreateProcess`使用起来很痛苦，但可以让你做任何事情。

例如，使用`CreateProcess`，您可以指定句柄（管道或文件）以用于子项中的标准输入/输出/错误流。`ShellExecute`不给你想要的方式来做到这一点。

可能还值得注意的是，虽然`ShellExecute` *可以*用来直接启动可执行文件，但它的主要目的是“执行”文档文件——例如，告诉它“执行”一个“whatever.html”，它会启动你的默认值Web 浏览器并将指定的 HTML 文件加载到其中。您也可以使用它来执行此操作`CreateProcess`，但要执行此操作，您（通常）首先调用`FindExecutable`以查找与相关数据文件关联的程序，然后执行将您的数据文件作为参数传递的程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T10:42:20.240

`CreateProcess`返回已启动进程的句柄和 id，它是`PROCESS_INFORMATION`结构中的主线程

# java - 如何强制 sevlet 将字符串作为附件发送到浏览器？

> ID：10747482
> 
> 赞同：0
> 
> 时间：2012-05-25T01:43:11.327
> 
> 标签：java, servlets, content-disposition

我想向用户发送一个字符串实际上我没有任何文件。它只是一个标准的 java 字符串，我希望用户下载它而不是在浏览器上查看它。

互联网上的大多数示例都基于对我的情况没有用的静态文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:59:30.393

奥斯汀，我认为您需要设置响应标头，以下是代码：

```
getResponse().setHeader("Content-Disposition", "attachment;filename=filename");
getResponse().setDateHeader("Expires", 0);
getResponse().setHeader("Cache-Control" , "no-cache");
getResponse().setHeader("Pragma", "no-cache"); 
```

getResponse() 获取 httpServletResponse 的位置。

# ruby-on-rails - Rails - 仅在创建时验证

> ID：10747484
> 
> 赞同：53
> 
> 时间：2012-05-25T01:43:32.830
> 
> 标签：ruby-on-rails

我正在尝试让我的自定义验证工作`create`。但是当我执行`find`then时`save`，rails 将其视为`create`并运行自定义验证。如何使验证仅在创建新记录时才起作用，而不是在更新找到的记录时？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-05-25T03:09:04.577

在您的验证代码行上试试这个：

```
validate :custom_validation, on: :create 
```

这指定仅对`create`操作运行验证。

来源：

[ActiveModel/Validations/ClassMethods/validate@apidock.com](https://apidock.com/rails/v6.1.3.1/ActiveModel/Validations/ClassMethods/validate)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-09-02T22:11:35.567

### TL;博士; 完整示例：

```
class MyPerson < ActiveRecord::Base
  validate :age_requirement

  private

  def age_requirement
    unless self.age > 21 
      errors.add(:age, "must be at least 10 characters in length")
    end
  end

end 
```

要让验证器仅在创建新对象时运行，您可以将示例的第 2 行更改为：`validate :age_requirement, on: :create`

仅在更新时：`validate :age_requirement, on: :update`

希望对下一个人有帮助！

# llvm - 使用 clang 为函数创建参数

> ID：10747488
> 
> 赞同：6
> 
> 时间：2012-05-25T01:44:01.790
> 
> 标签：llvm, clang

我有看起来像这样的源代码，

```
void update();

void update()
{
} 
```

我正在尝试使用 clang 解析此代码并将代码修改为此。

```
typedef float v4sf attribute ((vector_size(16)));
void update(v4sf& v1, v4sf& v2);

void update(v4sf& v1, v4sf& v2)
{
} 
```

我查看了 Clang 的 Rewriter 类。在我编写的函数中，如下所示，

```
MyRecursiveASTVisitor::VisitFunctionDecl(FunctionDecl *f) 
```

FunctionDecl 有我可以使用的 setParams() 方法。我将不得不使用这种方法创建参数。

```
 static ParmVarDecl *Create(ASTContext &C, DeclContext *DC,
                             SourceLocation StartLoc,
                             SourceLocation IdLoc, IdentifierInfo *Id,
                             QualType T, TypeSourceInfo *TInfo,
                             StorageClass S, StorageClass SCAsWritten,
                             Expr *DefArg); 
```

create 函数的前四个参数可以从 FunctionDecl 获得。我不确定其余的必须是什么。

如何在 clang 中创建类型并为它们分配值？这些类型不需要内置，可以与转换后的源代码中添加的类型（v4sf）类似。

是这种方式（使用 clang 方法）进行转换还是我可以使用 Rewriter.InsertText() 添加参数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T05:29:43.567

Clang 并非旨在支持其 AST 的突变，也不支持将 AST 重新导出为源代码（保留注释、宏和预处理器指令）。手动添加 AST 节点可能会违反 AST 不变量，从而导致崩溃。您应该`Rewriter`根据从 AST 中提取的信息，使用 来执行源代码的重写。

如果您仍想执行 AST 修改，您应该通过重建您希望修改的 AST 部分来执行此操作，而不是就地更改它。重建步骤应该通过调用 on 方法来执行`Sema`，它知道在构建 AST 时如何提供适当的不变量。

# android - 如何在 Android 中向空的 GridLayout 添加文本？

> ID：10747489
> 
> 赞同：0
> 
> 时间：2012-05-25T01:44:08.263
> 
> 标签：android, grid-layout

TextView 有 setText(String)，但是在查看 Doc 时，我没有看到 GridLayout 的。是否有适配器或我需要使用的东西？如果有，是哪一个？提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:50:54.923

`GridLayout`是 a `ViewGroup`，您只能向其中添加视图；如果要制作日历，最好使用`GridView`.

对于`GridView`，创建一个扩展 的适配器`BaseAdapter`，并`TextView`用于网格的布局。[这](https://stackoverflow.com/questions/982386/android-simple-gridview-that-displays-text-in-the-grids)是一个例子。

# delphi - SOAP 服务器无法在某些代理/防火墙后面正常工作

> ID：10747496
> 
> 赞同：2
> 
> 时间：2012-05-25T01:45:25.767
> 
> 标签：delphi, soap, proxy, windows-7-x64

我有一个用 Delphi XE 编写的 SOAP 服务器/客户端应用程序可以正常工作一段时间，直到用户在公司代理/防火墙后面的 Windows 7 x64 上运行它。应用程序在请求中发送和接收 TSOAPAttachment 对象。

问题：

*   一旦收到并处理了来自该用户的第一个请求，服务器将无法处理此后成功发出的任何请求（来自任何用户）。
*   服务器仍然响应请求，但请求的 SOAPAttachment 在该用户的第一个请求之后似乎已损坏，这就是它无法成功处理请求的原因。
*   将可能的调试日志放到服务器后，我注意到请求参数中的 TSOAPAttachment.SourceStream 变得不可访问（或为空），并且 TSOAPAttachment.CacheFile 也为空。因此，无论何时尝试使用 SourceStream，都会返回 Access Violation 错误。
*   进一步排查发现第一个请求在temp文件夹中生成的BorlandSoapAttachment(n)文件仍然存在并被锁定（正常完成请求后应该删除），后面请求的BorlandSoapAttachment(n+1)文件在堆积向上。
*   重新启动 IIS 或回收应用程序池后，SOAP 服务器将再次工作。
*   可以确定是代理或用户网络造成的，因为当同一台机器在这个网络之外运行时，它会正常工作。
*   为了给问题增添更多神秘感，在同一代理后面的 WinXP 上运行应用程序完全没有问题！

任何帮助或建议都非常感谢，因为我们已经陷入这种情况一段时间了。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:58:30.713

如果您确实确定已调试处理附件的所有服务器逻辑以尝试发现任何可能在 Windows 7 上特别失败的代码，我建议：

1) 使用一些网络嗅探器[Wireshark 很适合这个任务](http://www.wireshark.org/)，用相同的数据/参数值发出两个后续请求，并比较 HTTP 内容。这种分析应该在客户端（查看数据是否总是以相同的内容离开客户端机器）和服务器中完成，以分析传入的数据；

2）我过去也遇到过类似的情况，我试图真正理解这个问题并没有成功。我确实解决了将文件作为 Base64 编码字符串参数发送的问题，而不是使用 SOAP 附件。使用 Base64 的副作用是要发送的数据大小增加了约 30%，如果您正在传输大文件，这可能会很重要。

请记住，SOAP 附件会在服务器中创建临时文件，并且 Windows 7 的文件访问规则与 Windows XP 不同。我不知道这是否可以解释第一个呼叫正在处理而其他呼叫不能解释，但也许有一些与文件访问有关的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:17:39.243

可能是Win 7下的UAC（用户访问控制）问题。尝试在win 7“以管理员身份”运行客户端，看看是否正常。

# php - PHP抵押贷款计算器加拿大

> ID：10747498
> 
> 赞同：1
> 
> 时间：2012-05-25T01:45:47.720
> 
> 标签：php, formula, calculator

我刚刚发现了一个抵押计算器功能：

```
function calculatePayment($price, $down, $term)
{
$loan = $price - $down;
$rate = (2.5/100) / 12;
$month = $term * 12;
$payment = floor(($loan*$rate/(1-pow(1+$rate,(-1*$month))))*100)/100;
return $payment;
} 
```

所以如果我这样做：

```
calculatePayment(200000,0,25) 
```

它还给我 897.23 美元。

问题是，如果我与 BMO 银行或 duproprio.com 计算器进行比较，我的功能似乎与其他 2 个网站上的功能不完全一样，结果是 895,93$。

有人可以帮我弄清楚为什么它没有返回好金额吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-23T15:02:14.193

[我已将http://www.secureapp.com/tools/mortgage.html](http://www.secureapp.com/tools/mortgage.html)的余额计算部分转换为 PHP 函数（还添加了首付变量）并给出了一个使用示例：

```
$principal = 684000; //Mortgage Amount 
$interest_rate = 2.89; //Interest Rate %
$down = $principal *0.10; //10% down payment
$years = 25;
$months = 0;
$compound = 2; //compound is always set to 2
$frequency = 12; //Number of months (Monthly (12), Semi-Monthly (24), Bi-Weekly(26) and Weekly(52) 

function calcPay($MORTGAGE, $AMORTYEARS, $AMORTMONTHS, $INRATE, $COMPOUND, $FREQ, $DOWN){
$MORTGAGE = $MORTGAGE - $DOWN;
$compound = $COMPOUND/12;
$monTime = ($AMORTYEARS * 12) + (1 * $AMORTMONTHS);
$RATE = ($INRATE*1.0)/100;
$yrRate = $RATE/$COMPOUND;
$rdefine = pow((1.0 + $yrRate),$compound)-1.0;
$PAYMENT = ($MORTGAGE*$rdefine * (pow((1.0 + $rdefine),$monTime))) / ((pow((1.0 + $rdefine),$monTime)) - 1.0);
if($FREQ==12){
    return $PAYMENT;}
if($FREQ==26){
    return $PAYMENT/2.0;}
if($FREQ==52){
    return $PAYMENT/4.0;}
if($FREQ==24){
    $compound2 = $COMPOUND/$FREQ;
    $monTime2 = ($AMORTYEARS * $FREQ) + ($AMORTMONTHS * 2);
    $rdefine2 = pow((1.0 + $yrRate),$compound2)-1.0;
    $PAYMENT2 = ($MORTGAGE*$rdefine2 * (pow((1.0 + $rdefine2),$monTime2)))/  ((pow((1.0 + $rdefine2),$monTime2)) - 1.0);
    return $PAYMENT2;
}
}

$payment = calcPay($principal, $years, $months, $interest_rate, $compound, $frequency, $down); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T23:03:04.520

不是每月复利，而是**每 6 个月复利一次抵押贷款。**

加拿大抵押贷款每 6 个月而不是每月复利一次。

> 除浮动利率抵押贷款外，所有抵押贷款均按法律规定每半年复利一次。因此，如果您的抵押贷款利率为 6%，则抵押贷款的实际有效年利率为 6.09%，基于每半年 3% 计算。但是，您每月支付利息，因此您的抵押贷款机构需要使用基于年利率低于 6% 的月利率。为什么？因为这个利率会每月复利。因此，我们需要找到每月复利的利率，导致有效年利率为 6.09%。从数学上讲，这将是：

(1+rM)12-1 = 0.0609

rM = (1.0609)1/12

rM = 0.493862…%

资料来源：[http ://www.yorku.ca/amarshal/mortgage.htm](http://www.yorku.ca/amarshal/mortgage.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T12:32:52.363

您的计算没问题 - 请参阅此抵押贷款计算器：[http ://aprc.eu/index.php?page=APR-loan-calculator](http://aprc.eu/index.php?page=APR-loan-calculator)

您的结果与引用的银行计算器的差异源于不同的假设。您使用的公式是**在月底**按月付款。如果**在月初**付款，那么 iterests 较低，因此付款也可能较低。

# android - 如果 minSdkVersion>10，为什么 WidgetTab 中的图像不显示？

> ID：10747507
> 
> 赞同：2
> 
> 时间：2012-05-25T01:47:36.950
> 
> 标签：android, android-3.0-honeycomb, android-tabhost

我一直在尝试`TabActivity`用 3 个选项卡创建一个简单的。*除非*我放入`android:minSdkVersion="11"`清单文件，否则所有工作都不会显示图标。如果我设置 `minSdkVersion="10"，一切都很好。

我从高处和低处看了看，但我无法确定哪里出了问题。
我已将相同的图像放在看似合适的资源目录中：

> res/drawable-hdpi-v5
> res/drawable-ldpi-v5
> res/drawable-mdpi-v5
> res/drawable-xhdpi-v5

代码很简单：

```
import android.app.TabActivity;
import android.content.res.Resources;
import android.os.Bundle;
import android.util.Log;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout;
import android.widget.TabHost;
import android.widget.TabWidget;

public class Review extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TabHost tabs = getTabHost();
        getLayoutInflater().inflate(R.layout.main, 
                                    tabs.getTabContentView(), true);
        Resources resources=getResources();
        Log.d("testing", String.format("icon: %d.%d",
                    resources.getDrawable(R.drawable.review).getIntrinsicWidth(), 
            resources.getDrawable(R.drawable.review).getIntrinsicHeight()));
        TabHost.TabSpec details = tabs.newTabSpec("review"). setContent(R.id.review). 
                setIndicator(getString(R.string.review), 
                        resources.getDrawable(R.drawable.review));        
        TabHost.TabSpec gallery=tabs.newTabSpec("gallery").setContent(R.id.photos)
                .setIndicator(getString(R.string.gallery), 
                        resources.getDrawable(R.drawable.photos));
        TabHost.TabSpec reservation=tabs.newTabSpec("reservation").
             setContent(R.id.reservation)
                .setIndicator(getString(R.string.reservation), 
                        resources.getDrawable(R.drawable.reservation));
        tabs.addTab(details);
        tabs.addTab(gallery);
        tabs.addTab(reservation);    
    }
} 
```

在深入研究这一点时，我可以在 android 2.0 和 3.0 内部看到的唯一区别是 Android在 2.0 实现中 使用 a`RelativeLayout`而不是 a 。`LinearLayout`

只是为了确定图标图像被找到，`Log.d`上面显示：

> *图标：*应该是 32.32。

为什么从 android 2.0 转移到 3.0 会这样？？？？我希望其他人也遇到过这种情况，这很明显。非常感谢您的帮助！

- 更新：

我今天发现，当我更仔细地查看为 android 3.0+ 构建此代码时实际发生的情况时，我了解到当为 each 调用时出现的`ImageView`'s实际上从未设置，实际上是( ) 和. `SetIndeicator(string, drawable)``TabSpec``NULL``ImageView.mDrawable==null``INVISBLE`

如果我强制设置这些可绘制对象，*然后*调用`ImageView.setVisiblity(View.VISIBLE)`它们就会出现。但是在 android 2.0 下，它们看起来与上面的图像和下面的文本堆叠在一起，如下所示：

`<image>`
`<text>`

在 android 3.0 下，它们并排出现（如上所示），如下所示：

`<image><text>`

因此，情况似乎发生了很大变化，我需要更仔细地研究 android 3.0 的变化。

请继续关注更多...

-- 最终更新：

最终，我放弃了这条途径，并决定改变这种做事风格，现在可能已经贬值了，还有其他更好的方法可以做到这一点，而且图标有点过时了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T07:48:45.640

奇怪，这解决了问题

> ```
>  //bmOptions.inSampleSize = 1;
>     //or better
>     bmOptions.inScaled = false; 
> ```

更多信息： [https ://stackoverflow.com/a/12088287/1320686](https://stackoverflow.com/a/12088287/1320686)

# javascript - 如何围绕轴旋转 Three.js Vector3？

> ID：10747510
> 
> 赞同：32
> 
> 时间：2012-05-25T01:47:59.460
> 
> 标签：javascript, vector, rotation, three.js

如何围绕轴将 Three.js [Vector3](http://threejs.org/docs/#Reference/Math/Vector3)旋转一定角度？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-05-25T02:26:40.570

```
var vector = new THREE.Vector3( 1, 0, 0 );

var axis = new THREE.Vector3( 0, 1, 0 );
var angle = Math.PI / 2;

vector.applyAxisAngle( axis, angle ); 
```

# objective-c - 循环浏览故事板上的同一场景

> ID：10747512
> 
> 赞同：1
> 
> 时间：2012-05-25T01:48:31.947
> 
> 标签：objective-c, xcode, cocoa-touch, storyboard

我有一个故事板场景，当用户浏览从数据库中获取的数据时，它将一遍又一遍地显示。当用户点击下一个按钮时，场景会自动切换并显示下一条记录。

代码可能不漂亮，但最终结果*看起来*不错，导航控制器处理动画。但是现在我已经让它工作了，我确定这不是正确的方法 - 我正在使用导航控制器一遍又一遍地弹出同一个场景，而弹出的场景没有理由保存在内存中（每次推送或弹出数据时都会检索数据）。

好奇是否有其他人做过类似的事情，并希望就最佳方法提供一些建议。我考虑过通过动画子视图来模拟弹出和推送场景的外观 - 是否有第三个更好的选择？谢谢。

* * *

更新

* * *

测试证明导航控制器可以很好地处理自己的内存管理。

我正在使用的视图在记忆方面并不那么苛刻。如果有类似查询的任何人的视图都存在并且担心超出内存限制 - 这将是一个很好的检查链接： [UINavigationController 的内存消耗](http://www.sevensteps.com/html/topic_EF478311-58F1-4A45-8FBF-2DE70D3A265C_11B92BE4-E9EB-4228-BA1D-EE30B61DD04F_5.htm)

# jenkins - 如何配置 Jenkins Cobertura 插件来监控特定的包？

> ID：10747514
> 
> 赞同：3
> 
> 时间：2012-05-25T01:48:56.140
> 
> 标签：jenkins, jenkins-plugins

我的项目有许多包（“模型”、“控制器”等）。我已经使用 Cobertura 插件设置了 Jenkins 以生成覆盖率报告，这很棒。如果覆盖率低于某个阈值，我想将构建标记为不稳定，但仅限于某些包（例如，“控制器”，而不是“模型”）。但是，我在配置 UI 中没有看到明显的方法来执行此操作——看起来阈值是全局的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:24:27.013

（在这里回答我自己的问题）

据我所知，这是不可能的——看了几天后我什么也没看到。我写了一个简单的脚本来做我想做的事——获取覆盖输出，解析它，如果特定包的覆盖不满足某些阈值，则构建失败。它很脏，可以清理/扩展，但基本思想就在这里。欢迎评论。

```
#!/usr/bin/env python

'''
Jenkins' Cobertura plugin doesn't allow marking a build as successful or
failed based on coverage of individual packages -- only the project as a
whole. This script will parse the coverage.xml file and fail if the coverage of
specified packages doesn't meet the thresholds given

'''

import sys

from lxml import etree

PACKAGES_XPATH = etree.XPath('/coverage/packages/package')

def main(argv):
    filename = argv[0]
    package_args = argv[1:] if len(argv) > 1 else []
    # format is package_name:coverage_threshold
    package_coverage = {package: int(coverage) for
        package, coverage in [x.split(':') for x in package_args]}

    xml = open(filename, 'r').read()
    root = etree.fromstring(xml)

    packages = PACKAGES_XPATH(root)

    failed = False
    for package in packages:
        name = package.get('name')
        if name in package_coverage:
            # We care about this one
            print 'Checking package {} -- need {}% coverage'.format(
                name, package_coverage[name])
            coverage = float(package.get('line-rate', '0.0')) * 100
            if coverage < package_coverage[name]:
                print ('FAILED - Coverage for package {} is {}% -- '
                       'minimum is {}%'.format(
                        name, coverage, package_coverage[name]))
                failed = True
            else:
                print "PASS"

    if failed:
        sys.exit(1)

if __name__ == '__main__':
    main(sys.argv[1:]) 
```

# android - Videoview 按手机上的主页/电源按钮后重新启动

> ID：10747516
> 
> 赞同：0
> 
> 时间：2012-05-25T01:49:20.270
> 
> 标签：android, gallery, android-videoview

以下是我的代码。每次按下主页/电源按钮时，我的视频视图都会重新启动。在按下主页/电源按钮之前，有什么方法可以让它继续播放我的视频。

编辑：我已经输入了 Bharat 提到的代码。但似乎我收到错误 vd notsolved。

```
 public class Video1 extends Activity {
    private MediaController mc;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.videomain);

    //AdView adView = (AdView)this.findViewById(R.id.adView);
    //adView.loadAd(new AdRequest());

    VideoView vd = (VideoView) findViewById(R.id.VideoView);

    Uri uri = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.opening);

    mc = new MediaController(this);
    vd.setMediaController(mc);

    vd.setVideoURI(uri);
    vd.start();

    vd.setOnCompletionListener(new MediaPlayer.OnCompletionListener() 
    {           
        public void onCompletion(MediaPlayer mp) 
        {
            Intent intent=new Intent(Video1.this,GalleryVideo.class);
            startActivity(intent);

        }           
    });   
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
    }
@Override
protected void onPause() {
    vd.pause(); /**ERROR - vd cannot be resolved**/
    super.onPause();
}

@Override
protected void onResume() {
    vd.resume(); /**ERROR - vd cannot be resolved**/
    super.onResume();
}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:06:35.983

在你的课堂上试试这个

```
@Override
protected void onPause() {
    vd.pause();
    super.onPause();
}

@Override
protected void onResume() {
    vd.resume();
    super.onResume();
} 
```

当您的活动将继续暂停时，它将暂停您的视频视图。当您的活动将恢复时，它将在恢复时恢复。

# css - 页面顶部的空白（特定于 Firefox）

> ID：10747517
> 
> 赞同：-5
> 
> 时间：2012-05-25T01:49:23.283
> 
> 标签：css, html, firefox

仅在 Firefox 中，我的页面顶部有一个很大的空白。我试图检查所有元素，但找不到任何问题。我还检查了未折叠的边距，但找不到。

我正在使用 HTML5、modernzr 和 jquery。

网址：[http ://devvanickcom.vanickurl.com/](http://devvanickcom.vanickurl.com/)

![页面截图](../Images/b692d95f31e262767b7541a1185834c2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T03:54:03.540

这似乎是一个 Firefox 错误（[#451791](https://bugzilla.mozilla.org/show_bug.cgi?id=451791)）。边距塌陷做错了。它通过 折叠`hr.clear`，因为它没有高度/填充/边框，导致上方 90px 的边距`hr.clear`，但它也在浮动元素下方应用了 90px 的正确边距。

通常可以防止保证金崩溃的任何修复都将阻止此行为。例如，设置`hr.clear { height: 1px }`会将所有内容向上推，但也会将内容向下移动一个像素，这是不可取的。一个有趣的解决方法是设置`header { padding-top: .001em }`. 这不会添加足够的填充来实际在视觉上改变事物，但它足以防止边距折叠超出`header`.

或者，您可以只重写代码以避免这种结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:25:59.710

只需更改CSS 类中的`position`属性，将其设置为：`#logo`

`position: relative`，该类将如下所示：

```
#logo {
    background: url("/Content/images/sprite.png") repeat-x scroll left top transparent;
    display: block;
    height: 85px;
    position: relative;
    text-indent: -9999px;
    top: -20px;
    width: 180px;
} 
```

之后您需要更改`header nav`类，（顶部的边距为 90px）

```
header nav {
    margin: 40px 0 5px;
    padding: 0;
    text-align: center;
} 
```

然后只需要完全按照您需要的方式进行调整，它在 Firefox 上将如下所示：

![在此处输入图像描述](../Images/b803a886209f275b56886072a67fe570.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T02:55:31.837

这很奇怪。我想最简单和最好的方法是，就像 animuson 说的那样，删除`<hr class="clear">`under `<div id="contact-toggler-wrapper">`。它在不影响布局的情况下成功了。

# sql-server - SQL Server Compact Edition 4.0 SDK？

> ID：10747518
> 
> 赞同：4
> 
> 时间：2012-05-25T01:49:39.117
> 
> 标签：sql-server, sql-server-ce

[SQL Server Compact Edition 4.0](http://blogs.msdn.com/b/sqlservercompact/archive/2011/01/12/microsoft-sql-server-compact-4-0-is-available-for-download.aspx) [SDK](http://msdn.microsoft.com/en-us/library/ms174516)在哪里？

* * *

## 奖金阅读

为了在*SQL Server Compact Edition*中创建数据库，您必须调用从以下`ME_CreateDatabase`位置导出的函数`sqlceme40.dll`：

![在此处输入图像描述](../Images/d9202120402db15a888e3f429543dbcc.png)

[MSDN 上没有记录](http://social.msdn.microsoft.com/search/en-us?query=ME_CreateDatabase&x=0&y=0)该函数，并且[头文件](http://msdn.microsoft.com/en-us/library/ms174516)不随[可再发行](http://www.microsoft.com/en-us/download/details.aspx?id=17876)文件一起提供（显然）。

MSDN 提到了 3 个*Compact Edition*头文件：

*   **`sqlce_err.h`**: 数据库使用的错误代码
*   **`sqlce_oledb.h`**：OLEDB标准编程接口
*   **`sqlce_sync.h`**

该页面还提到，[*如果我有 SDK*，头文件将位于](http://msdn.microsoft.com/en-us/library/ms174516)：

> SQL Server Compact 4.0 头文件安装在 %ProgramFiles%\Microsoft SQL Server Compact Edition\v4.0\Include 下。

但我没有，所以他们不是：

![在此处输入图像描述](../Images/c7085d62944b1e3e759857f4a59d3634.png)

那么*SQL Server Compact Edition 4.0 SDK*在***哪里***？

 ** * *

**奖金喋喋不休**

[来自 MSDN：](http://msdn.microsoft.com/en-us/library/ms174579.aspx)

> ## 构建 OLE DB 应用程序 (SQL Server Compact)
> 
> 构建启用 OLE DB 的应用程序的下一步是包含适当的头文件。在应用程序的主入口点中，为 SQL Server Compact OLE DB 提供程序和 SQL Server Compact 错误文件添加包含语句：
> 
> ```
> #include <sqlce_oledb.h>
> #include <sqlce_err.h  > 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-08T17:59:28.727

这些文件包含在包 SSCE 4.0 设计工具 (SSCEVSTools-ENU.msi) 中（[在此处记录](http://msdn.microsoft.com/en-us/library/aa983341(v=vs.110).aspx)）。此可执行文件可在 Visual Studio 2012 Premium Edition DVD 上找到。可能还有其他版本和版本，但这是我唯一的一个。

我自己需要这些文件，经过一个小时的挖掘，我在那里找到了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T16:00:56.817

正如 Nitramk 所发布的，我在 VS 2012 iso 的 packages\ssce40 中找到了 SSCEVSTools-ENU.msi。它也包含在 2012 Ultimate 试用版（可能还有 Pro）中。截至目前，MS 仍可提供这些试验。搜索“visual studio 2012 终极试用版”或“visual studio 2012 试用版”。

请注意，我在 VS 2013 或 2015 中看不到它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-24T10:39:01.197

您必须使用博客页面上的“Microsoft Web Platform Installer 3”链接并安装它。然后您将获得安装到 C:\Program Files (x86)\Microsoft SQL Server Compact Edition\v4.0 的头文件和示例*

# javascript - 使用 javascript onClick 设置当前选定单选按钮的样式

> ID：10747521
> 
> 赞同：0
> 
> 时间：2012-05-25T01:49:56.470
> 
> 标签：javascript, forms, radio-button

我正在尝试将“当前”类添加到当前选择的任何单选选项中。我可以用

```
onClick="document.getElementById('volunteering').class += 'current';" 
```

但是，这确实会添加类，但是当您选择另一个单选按钮时它会粘住（因为它在每个按钮上）。关于如何在所有单选按钮上实现它的任何想法？

这是我正在使用的代码：

```
<form> 
<ul>
    <input type="radio" name="category" id="volunteering" value="volunteering"><li class="conversation">
   <a href="#" onClick="document.getElementById('volunteering').checked = true;" >Volunteering</a>
 </li>
 <input type="radio" name="category" value="cityproblems" id="cityproblems"><li class="conversation">
   <a href="#" onClick="document.getElementById('cityproblems').checked = true;" >City Problems</a>
  </li>
 <input type="radio" name="category" value="safety" id="safety"><li class="conversation">
    <a href="#" onClick="document.getElementById('safety').checked = true;" class="">Safety</a>
 </li>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:55:49.453

您需要首先从所有单选按钮中删除该类，然后将其添加回单击的单选按钮。定义一个通过接收 id 作为参数来执行此操作的函数，并将其绑定到`onclick`.

```
function selectRadioClass(radioId) {
  // Note - there are more clever ways, like arrays and loops
  // for this, but if it's only 3, this is fine
  document.getElementById('volunteering').className = '';
  document.getElementById('cityproblems').className = '';
  document.getElementById('safety').className = '';

  // Then add it back to the node passed in by id
  document.getElementById(radioId).className = 'current';
  // And check the button
  document.getElementById(radioId).checked = true;
} 
```

然后绑定每个单选按钮的`onclick`使用：

```
<a href="#" onClick="selectRadioClass('safety');" class="">Safety</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:57:20.230

有2个解决方案：

**使用 CSS3`:checked`选择器**

```
 form input:checked {
   /* your style rules here. */
   /* No more scripting needed. */
 } 
```

[http://www.quirksmode.org/css/enabled.html](http://www.quirksmode.org/css/enabled.html)

**为此目的使用全局函数。**

// 检查迈克尔的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T02:01:05.093

使用 CSS 伪选择器并忘记 JavaScript。有一个用于`element:checked`.

[http://css-tricks.com/pseudo-class-selectors/](http://css-tricks.com/pseudo-class-selectors/)

# playframework - Playframework：“播放开始”的奇怪行为 - 缓存问题？

> ID：10747522
> 
> 赞同：3
> 
> 时间：2012-05-25T01:50:34.607
> 
> 标签：playframework, playframework-2.0

我目前正在使用 play framework 2 开发一个 web 应用程序。我在 /public 目录下创建了一个文件夹“files”。当我使用“play run”启动服务器时，该目录下的所有资源都可以访问。

部署到服务器后。我通过运行“play start”启动服务器，发现“files”下的资源再也找不到了。

我想知道“播放开始”和“播放运行”之间不一致的原因是什么

更新：经过几次试验。我发现是新上传的资源无法显示。场景如下：

```
1\. play start --> server starts.
2\. use application to upload a few images to the server.
3\. try to display the uploaded image --> nothing is shown. browser shows the resource is not accessible.
4\. kill the server process with task manager.
5\. rm RUNNING_PID
6\. run play start again 
7\. Try to display the uploaded image --> now the images are showing. 
```

所以，看起来像“播放开始”的“热更新”问题我可以做任何配置让服务器接受更改吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T14:35:16.043

你到底把图像存储在哪里？在编译时，静态资产从 复制`/public`到`/target/scala-2.9.1/classes/public`。该目录是类路径的一部分，并且从那里提供资产。因此，如果您在运行时将文件存储在那里，则应该可以找到它们。

旁注：这可能不是一个可持续的解决方案，因为您的用户加载的图像在下一次构建期间会被删除。也许您应该考虑在应用程序安装之外使用符号链接（注意！安全问题！）或将资产存储在其他地方，数据库或 S3 始终是不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T16:45:38.760

基于@Joerg Viola 的回答。我决定实施自己的行动来服务静态资源。事实证明这非常容易。从[`this link`](https://github.com/playframework/Play20/wiki/JavaStream)，我学会了在一行中实现一个文件服务器。

# qt4 - 当 itemWidget 关闭时获取 QListWidgetItem 被删除

> ID：10747525
> 
> 赞同：0
> 
> 时间：2012-05-25T01:50:46.157
> 
> 标签：qt4, qt4.8

当小部件（我使用）获取时，是否可以`QListWidget`删除 a ？`QListWidgetItem``setItemWidget()``closed()`

现在我传入行号并向主窗口发出信号，这将逐行删除项目，但这听起来很愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:33:17.010

你想删除 QListWidget.close() 上的所有项目吗？让我们试试这个

```
list = MyListWidget.items();
qDeleteAll(list.begin(), list.end());
list.clear(); 
```

在关闭事件（）中。必须从 QListWidget 创建您自己的小部件以重新实现|使用受保护的方法。

# asp.net-mvc-3 - 将 MVC3 数据库移至远程服务器。不能再删除。

> ID：10747526
> 
> 赞同：2
> 
> 时间：2012-05-25T01:51:01.767
> 
> 标签：asp.net-mvc-3

我创建了一个简单的 MVC3 项目，就像 Music Store 示例一样。一切正常。是时候将数据库移植到 GoDaddy 服务器了，现在我无法从数据库中删除项目。

这是错误：

> DELETE 语句与 REFERENCE 约束 \"Captions_Item_Captions\" 冲突。数据库 \"mattymattmofo\"、表 \"dbo.Captions\"、列 'Item_ItemId' 中发生冲突。\r\n语句已终止。

```
 //
    // POST: /NavigationManager/Delete/5

    [Authorize(Roles = "Administrator")]
    [HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {
        Item item = db.Items.Find(id);
        db.Items.Remove(item);
        db.SaveChanges();
        return RedirectToAction("Index");
    } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:20:32.183

你的外键有问题。问题出在数据库中。您不能删除与外键绑定的行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:07:42.433

在您的数据库中，Items（父表）通过外键与 Captions（子表）链接。这意味着当您从 Items 表中删除一行时，仍可能与 Captions 表中的该行存在连接。因此生成约束以保持数据库完整性。你可以做两件事来解决这个问题：

1.  删除约束 -**不推荐和不好的做法**
2.  使用删除规则更新约束。您有以下选择：*No Action*、*Cascade*、*Set Null*、*Set Default*。

现在您的约束删除规则可能设置为*无操作*，这就是您遇到此错误的原因。

您可以通过右键单击约束（在 Keys 文件夹中）-> 修改 -> 扩展插入和更新规范 -> 删除规则，在 Management Studio 中设置删除规则。

或者通过 T-SQL 脚本。有很多关于如何做到这一点的[例子。](https://stackoverflow.com/questions/2788575/tsql-script-to-add-delete-cascade-to-existing-tables)

# javascript - 如何以编程方式告诉要在数据表中编辑哪一行？

> ID：10747527
> 
> 赞同：1
> 
> 时间：2012-05-25T01:51:02.100
> 
> 标签：javascript, jquery, datatables, jeditable

我正在使用数据表：

```
 $('#purForm').dataTable({
        "bRetrieve": true,
        "bJQueryUI": true,
        "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
        "bPaginate": false,
        "bAutoWidth": false,
        "bFilter": false

    }); 
```

为了使其可编辑，我正在使用数据表可编辑插件：

[http://code.google.com/p/jquery-datatables-editable/wiki/EditCell](http://code.google.com/p/jquery-datatables-editable/wiki/EditCell)

只有当我单击行的单元格时它才起作用。我可以以编程方式告诉它要编辑哪一行，例如。基于表的某些行索引等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:56:32.540

我猜它应该像触发点击表格单元格一样简单。

例如：

```
//first, specify a table cell (as appropriate to your application)
var $row = $("#myTable tr").eq(2);//third row
var $cell = $row.find("td").eq(1);//second cell

//then trigger a click
$cell.trigger('click'); 
```

如果我是对的，那么单元格现在将处于编辑模式，准备好接受键盘输入。

# actionscript-3 - dropdowlist [对象对象]

> ID：10747528
> 
> 赞同：0
> 
> 时间：2012-05-25T01:51:36.463
> 
> 标签：actionscript-3, apache-flex, flash-builder

我发现下拉列表。

事实上，我通过查询将数据加载到 mysql 数据库。

但在 mysql 中，一条记录有空字段。

在这种情况下 flex 显示 [object object] 而不是 ' '。

```
[Bindable] private var DP_CLASSES:ArrayCollection;

<s:DropDownList id="dpClassTT" width="77" 
    dataProvider="{DP_CLASSES}"labelField="Nom"
    /> 
```

// 数据提供者示例

```
 <TypesTT>
   <TypeTT>
     <Nom> </Nom>
   </TypeTT>
   <TypeTT>
     <Nom>AppA</Nom>
   <TypeTT>
<TypesTT> 
```

即使名称为空（如记录一），[Objet object] 行也会出现在下拉列表中。

你知道怎么解决吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:04:25.893

从您在此处发布的有限信息中，我只能说您需要设置`labelField`下拉列表的。

您可以在 mxml 中执行此操作，例如

```
<s:DropDownList dataProvider="{myQuery}" labelField="colName" /> 
```

或者，你设置一个 labelFunction 像：

```
<s:Script>
    private function toLabel(item:Object):String {
        return item["colName"].toString();
    }
</s:Script>
<s:DropDownList dataProvider="{myQuery}" labelFunction="toLabel" /> 
```

**在你更新你的问题后编辑**，我相信最好使用 labelFunction。

您的 labelFunction 将是这样的：

```
function toLabel(item:Object):String {
    var str:String=item["Nom"] as String;
    if(str==null || str==undefined) {
        str="";
    }
    return str;
} 
```

我们需要这样做，因为空标签`Nom`在 AS3 中被视为 XMLList 对象，这就是为什么需要强制转换它的原因。

# java - 使用 PaintComponent() 重新绘制

> ID：10747532
> 
> 赞同：1
> 
> 时间：2012-05-25T01:52:21.937
> 
> 标签：java, swing, graphics, draw, repaint

```
class BiomeViewComponent extends JComponent {
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    int xpos=300;
    int ypos=300;
    g.setColor(Color.yellow);
    Random r = new Random();
    int spread = r.nextInt(2)+1;
    System.out.println(spread);
    if (spread==1){
        xpos=xpos+50;
        g.setColor(Color.yellow);
        g.fillRect(xpos,ypos,50,50);
    }
    else{
        ypos=ypos-50;
        g.setColor(Color.yellow);
        g.fillRect(xpos,ypos,50,50);
    }
}

} 
```

我像上面的代码一样使用了paintComponent脚本的公认答案，它可以工作，但现在的问题是我如何让它不止一次地绘制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:10:25.110

您应该在重写的 paintComponent 函数中编写绘画代码，例如：

```
class BiomeViewComponent extends JComponent {
    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        // your painting code goes here
    }
} 
```

然后将其添加到您的 JFrame 中，如下所示：

```
JFrame j = new JFrame();
BiomeViewComponent bv=new BiomeViewComponent();

Container c=j.getContentPane();
c.setLayout(new BorderLayout()); // whatever layout you want here.....
c.add(bv); 
```

BiomeViewComponent 将在需要时由 Swing 重新绘制（即它将`paintComponent(..)`为您调用该函数）

请注意，将您的绘画代码放在 JFrame 以外的组件中是一种很好的做法 - 这使您可以在构建 GUI 时灵活地根据需要使用 JFrame 重新定位查看组件。

# ios - iPad 中调用者此时不拥有的对象的引用计数的不正确递减

> ID：10747535
> 
> 赞同：1
> 
> 时间：2012-05-25T01:52:40.457
> 
> 标签：ios, memory-leaks

```
-(id)init
{
if (self = [super init]) 
{
    self.dmrPlaylists = [[[NSMutableArray alloc] initWithCapacity:0] autorelease];
     }
}
-(void)dealloc
{   
[self.dmrPlaylists release];
}
-(DMRPlaylist *)getDMRPlaylistByUUID:(NSString *)deviceUUID
{
if (deviceUUID == nil)
    return nil;

for(int i = 0; i < self.dmrPlaylists.count; i++)
{
    DMRPlaylist * dmrPlaylist = [self.dmrPlaylists objectAtIndex:i];
    if([dmrPlaylist.deviceUUID isEqualToString:deviceUUID])
    {
        return dmrPlaylist;
    }
}

return nil;
} 
```

Memory(Core Foundation/Object-C) 调用者此时不拥有的对象的引用计数不正确递减。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:57:21.963

1）不要`self.dmrPlaylists`在你的`init`和`dealloc`方法中使用。相反，与基础变量交互。

2) 打电话`[super dealloc]`

在不知道警告在哪一行的情况下，无法确定，但这些都是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:14:15.227

您还没有告诉我们上述代码的哪一部分导致了错误。使用调试器逐步检查它以隔离它发生的位置并返回给我们。

此外，您还没有给我们足够的代码来知道出了什么问题。例如：

```
self.dmrPlaylists = [[[NSMutableArray alloc] initWithCapacity:0] autorelease]; 
```

最终可能会`-setDmrPlaylists:`使用自动释放的可变数组进行调用。在哪里`-setDmrPlaylists:`定义？它是由`@property`声明和`@synthesize`编辑声明的吗？如果是这样，它是否被声明为`retain`财产？如果不是，那么 setter 将永远不会调用`retain`可变数组。当在`autorelease`事件循环结束时减少可变数组的保留计数时，它可能会被释放，让您指向垃圾内存。

# jquery - .each jQuery 问题

> ID：10747538
> 
> 赞同：0
> 
> 时间：2012-05-25T01:52:58.293
> 
> 标签：jquery, each

在我的 jquery 函数中，我尝试拆分一个长字符串。我认为拆分时，结果是一个数组。所以我使用 .each 来获取拆分字符串的值。但是，它没有显示任何内容。我在此语法中的错误在哪里：

```
 function DisplayList(data) {
    $.each(data.split('|'), function (index, value) {
        $(".listDisplay").html('<p>' + value + '</p>');
    });
 }; 
```

当我将索引放入 .html() 而不是值时，我会看到数组中的元素数。它应该显示类似 [0]、[1]、[2]... 对吗？

我真正想要的是以段落的形式显示我的拆分字符串的内容...（.listDisplay 是一个 div）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:57:09.987

该行：

```
$(".listDisplay").html('<p>' + value + '</p>'); 
```

用当前 .listDisplay 覆盖“.listDisplay”的内容`value`。因此，每次迭代都会`$.each()`覆盖先前的值，然后在`$.each()`完成时“.listDisplay”将保留`value`最终迭代中的任何内容。

尝试将其更改为：

```
$(".listDisplay").append('<p>' + value + '</p>'); 
```

这将在“.listDisplay”的末尾添加一个新段落，而不是覆盖现有内容。所以`.each()`将为返回的数组中的每个项目添加一个新段落`data.split('|')`。

（您可能想要添加`$(".listDisplay").empty()`或`$(".listDisplay").html("")`在`$.each()`清除 div 中的任何现有内容之前添加。）

另一种方法是在没有以下的情况下在一行中执行此操作`$.each()`：

```
function DisplayList(data) {
   $(".listDisplay").html('<p>' + data.replace(/\|/g, '</p><p>') + '</p>');
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:57:16.643

那只会显示最后一个值。

```
function DisplayList(data) {
    var html = '';
    $.each(data.split('|'), function (index, value) {
        html += '<p>' + value + '</p>';
    });

    $(".listDisplay").html(html);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T01:58:50.937

只需使用带有 append 方法的常规 for 循环...

```
var dataArr = data.split('|'),
    list = $(".listDisplay");

list.empty(); // This will clear the list first.
for (var i = 0, len = dataArr.length; i < len; i++) {
    list.append('<p>' + dataArr[i] + '</p>');
} 
```

# css - CSS 类自动将宽度调整为 100%，我不希望它这样做

> ID：10747546
> 
> 赞同：1
> 
> 时间：2012-05-25T01:54:04.670
> 
> 标签：css

为标题中的奇怪用语道歉。

我正在设计的网站有问题。我正在使用 WordPress，但我认为这不是问题所在。

问题是，我有一个“模块”类，它应该包装到它的内容中。但是，默认情况下，它不会环绕，而是拉伸到其父级宽度的 100%。当我手动输入适当的宽度时，右边距仍然延伸到其容器的右侧边缘。当我手动调整边距时，没有任何变化。

这是模块类，只是因为：

```
.module
{
margin:0px;
padding:5px;
background:#356;
border:#38a solid 1px;
} 
```

这很简单。但是，我希望它被包装到它的内容中。相反，它会自动调整自身大小以拉伸到其父级的 100%。

我已经搜索了我的样式表和 Chrome 的元素检查器，但我一生都无法弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:58:32.177

您可能正在将该类添加到[块级](http://www.w3.org/TR/css3-box/#block-level0)元素，例如 div 或段落。默认情况下，块级元素具有`display: block`，因此它们会拉伸到宽度或其父级。

您可以使用`display: inline-block;`来更改该行为：

```
.module {
    display: inline-block;
    margin: 0;
    padding: 5px;
    background: #356;
    border: 1px solid #38a;
} 
```

# apache - apache可以处理的Web服务器最大用户数？

> ID：10747548
> 
> 赞同：17
> 
> 时间：2012-05-25T01:54:17.723
> 
> 标签：apache, webserver

我的问题是 Apache webserver 2.2.2 可以处理的最大用户数是多少，我有一个网站有时会获得超过 300 多个并发用户，但是 apache 默认配置设置为最大 150，我知道我可以增加这个值，但是，如果我这样做，我担心我可能会超出 Apache 可以处理的容量，我的服务器非常强大，配备 8 个四核 AMD 处理器和 16 个 GM 内存

1.  我如何确定apache可以处理多少个请求，

2.  一般来说，针对服务器负载进行最佳优化的选项/配置是什么。即禁用保持活动..等

3.  当我增加最大用户大小时，MySql 会消耗大部分处理器能力，有时会超过 150% 的 CPU .... 不知道为什么..

有专家吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T13:59:49.130

Apache 带有最多 40-100 个线程。可以增加它以允许同时处理更多线程。

在对其进行任何更改之前，应监控应用程序。根据响应，尝试相应地更改“ThreadsPerChild”和“AcceptThreads”。

默认的“最大”线程数通常就足够了；但是，在某些情况下，这个数字可能必须增加。可以监控线程使用情况。要进行监控，请启动管理实例，选择有问题的 HTTP 服务器，然后选择左下角的实时服务器统计信息。

如果 Idle Threads 接近或为零，这是一个问题。只要 Idle Threads 为零，就不能建立新的客户端连接。新客户端将进入等待状态，直到线程可用。我们对这种情况的建议是增加指令 ThreadsPerChild 的值，如果它在 40 到 100 的范围内，则大约是当前值的两倍，如果大于 100，则增加 50。所需的最小值（对于最大值参数）只能通过反复试验找到。如果增加值后，服务器运行平稳，停止测试。

（[来源](http://www-912.ibm.com/s_dir/SLKBase.nsf/1ac66549a21402188625680b0002037e/7e27dfd157d89f5b862577430075c554?OpenDocument)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T22:56:46.477

建议

请使用 Keep Alive，因为它会提高服务器的性能。仅当 Web 或应用程序之间存在防火墙时才禁用保持活动设置。或者您面临包裹丢失问题/连接重置消息。

*   您可以增加最大客户端限制，但该限制将完全取决于您的服务器配置。平均而言，每个 apache 线程将占用 25MB，然后在这种情况下，您将最大客户端值保持为 (MAX*load on each thread)/(RAM assigned*threads)。始终将此比率保持在 1/2。
*   通过增加系统的最大客户端和服务器限制，您可以将用户增加到上述任意数量。
*   始终定义 min-maxspare 或 min-maxthread 限制。
*   如果您无法增加最大客户端限制，则非常重要的一点，只需增加侦听积压限制，它将占用队列中的额外请求，从而防止连接断开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T14:34:23.810

您必须编辑 httpd.h 文件以允许更大的 maxclients 超过 256 硬编码限制，然后重新编译 httpd 程序。这是在 httpd 的配置文件中建议的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T14:02:34.537

有关概述，请参阅本指南：http: [//www.devside.net/articles/apache-performance-tuning](http://www.devside.net/articles/apache-performance-tuning)

这主要是关于您选择的 Apache MPM（基于线程或基于进程）及其设置。

然后您需要将其与 KeepAlive 设置相匹配（我使用基于线程的 MPM，因此将 KeepAlives 设置为 On 并持续 3 秒）。

你是在 Linux 还是 Windows 下使用 Apache？哪个MPM？

# objective-c - 在 iOS 中为文本字段创建标签？

> ID：10747549
> 
> 赞同：4
> 
> 时间：2012-05-25T01:55:16.423
> 
> 标签：objective-c, ios, xcode

有没有办法在 xcode/obj-c 中创建标签（就像你发布问题时在 stackoverflow 上一样）？

我想有一个文本字段，用户可以在其中添加一些预定的标签来对某些东西进行分类。

由于我还没有开始写这个，phonegap 也是一种选择——也许在 html 中使用这样的标签更容易？

任何人都有有关如何执行此操作的链接或教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T02:21:31.073

此控件的 Mac 版本称为`NSTokenField`. 这里有一个关于这个控件的 iOS 版本的对话：[是否有一个 iPhone 相当于 NSTokenField 控件？](https://stackoverflow.com/questions/1307553/is-there-an-iphone-equivalent-to-the-nstokenfield-control)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-13T10:23:17.220

**SWIFT 5\. 替代解决方案**

1.将字符串转换为标签

2.自定义标签

3.将标签转换为图像

4.将图像转换为属性文本

5.创建TextView

6.将属性文本设置为TextView

你可以在这里找到**实现**：

[https://github.com/vivatum/WordsAsTagLabels-Example](https://github.com/vivatum/WordsAsTagLabels-Example)

[![最终标签](../Images/01500536113dab85a0b1ba00057fa6ff.png)](https://i.stack.imgur.com/cQFsA.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-04T11:06:04.740

支持 iOS13+ 的 SwiftUI 标签文本字段。

[https://github.com/lijin88121/TagTextField](https://github.com/lijin88121/TagTextField)

[![在此处输入图像描述](../Images/5b192ba4ffbda5b2ae2abf726318ad75.png)](https://i.stack.imgur.com/Sg79U.png)

# maven - 决定 M2E 生命周期配置

> ID：10747550
> 
> 赞同：4
> 
> 时间：2012-05-25T01:55:17.193
> 
> 标签：maven, m2e

将 Maven 项目导入 Eclipse 时出现错误：

```
Plugin execution not covered by lifecycle configuration: 
org.codehaus.mojo:gwt-maven-plugin:2.1.0:resources (execution: default, phase: process-resources) 
```

我不是 Maven 专家，但似乎这是一个问题，[M2E 需要明确说明如何处理绑定到某些事件的插件](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)。

Eclipse 提供了一个快速修复来简单地忽略这些插件，但您也可以选择执行插件，或安装/创建[项目配置](http://wiki.eclipse.org/M2E_Extension_Development)器。

鉴于大多数人（包括我自己）不会倾向于创建 M2E 扩展，您应该遵循哪些一般规则来确定是否应该忽略或执行插件？在我看来，包含这些插件是有原因的，所以它们应该默认执行吗？或者是否有某些原因为什么执行默认是一个坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:12:50.850

如果启用了“自动构建”，则 Eclipse 构建生命周期会在幕后重复触发。

因此，我们不希望 Maven Eclipse 插件执行消耗 IO/CPU 的重量级任务。例如，复制依赖项或构建包文件。

最好从命令行手动触发这些。

# java - 对照数据库交叉检查信息

> ID：10747553
> 
> 赞同：-1
> 
> 时间：2012-05-25T01:55:41.550
> 
> 标签：java, database

我正在尝试制作一个登录程序，我需要将 GUI 中的用户名/密码交叉引用到数据库中，我目前有代码，但它只是对相同数量的人说“用户名/密码不正确！”在数据库中。真正使它工作的任何帮助都会很棒。我的代码如下。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

import java.sql.*;

public class Login extends JFrame {

  JTextField _username = new JTextField(10);
  JPasswordField _password = new JPasswordField(10);

  JButton _login = new JButton("Login");
  JButton _exit = new JButton("Exit");

  Toolkit kit = Toolkit.getDefaultToolkit();
  Dimension screenSize = kit.getScreenSize();
  int screenHeight = (int)screenSize.getHeight();
  int screenWidth = (int)screenSize.getWidth();

  public Login() {
    super("Login to panel");
    setLayout(new GridLayout(3,2,1,1));

    add(new JLabel("Username:"));
    add(_username);

    add(new JLabel("Password:"));
    add(_password);

    add(_login);
      _login.addActionListener(new LoginListener());
    add(_exit);
      _exit.addActionListener(new ExitListener());

    setSize(250, 100);
    //setLocation(screenWidth/3, screenHeight/3);
    setLocation(500, 400);
    setResizable(false);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setVisible(true);
  }

  public static void main(String[] args) {
    new Login();
  }

  public class LoginListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
      Connection con;
      Statement stmt;
      ResultSet rs;

      try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        con = DriverManager.getConnection("jdbc:odbc:collegesys","root","0blivi0n");

        stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY);
        rs = stmt.executeQuery("SELECT * FROM main");
        PreparedStatement loginTime = con.prepareStatement("UPDATE `main` WHERE ID = ?");

        while(rs.next()) {
          if(_username.getText() == rs.getObject("username") && _password.getText() == rs.getObject("password")) {
            dispose();
            new Panel();
          } else {
            JOptionPane.showMessageDialog(null, "Incorrect Username/Password!");
          }
        }

      } catch(SQLException sqle) {
        sqle.printStackTrace();
      } catch(ClassNotFoundException cnfe) {
        cnfe.printStackTrace();
      }
    }
  }

  public class ExitListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
      dispose();
      System.exit(0);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:03:29.747

不要`==`用来比较字符串；使用`.equals`：Java 101。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:09:30.223

根据您对问题的描述，您从数据库中获取记录，因此我进行了两项更改

首先不要将字符串与函数`==`进行比较`equals`

第二次比较这个字符串忽略大小写，将两个字符串降低或升高，如下所示

```
 if(_username.getText().toLowerCase().equals(rs.getObject("username").toLowerCase()) && _password.getText().toLowerCase().equals(rs.getObject("password").toLowerCase()) 
```

第三，正如我所说，我真的不明白您要实现什么，但是为什么您只是尝试使用参数创建查询而不是带上所有记录并循环遍历它们？

# iphone - BOOL 在 ViewControllers 之间从 YES 变为 NO？

> ID：10747555
> 
> 赞同：0
> 
> 时间：2012-05-25T01:56:04.783
> 
> 标签：iphone, ios, ios5, xcode4

我只是不明白..这种情况到处发生，但我找不到任何理由或理由。我已经搜索了一段时间没有运气..也许你们可以告诉我我做错了什么？

我在 ViewController_B 的 ViewController_A 中设置了一个 BOOL。单步执行代码，我看到 BOOL 变为 YES，但是当我被发送回 VC_A 时，它又变为 NO

更新：这一切都在主线程上。

这是我的代码。

ViewController_A.h

```
BOOL shouldLogin;

@property(nonatomic,assign)BOOL shouldLogin; 
```

ViewController_A.m

```
@synthesize shouldLogin;

//in viewWillAppear of ViewController_A
if (shouldLogin == YES) {
//do something - im trying to get in here but I cant because the BOOL is NO when I come back to this view

} 
```

这是我在 ViewController_B 中设置 BOOL 的方法

```
 ViewController_A * vc = [[ViewController_A alloc]init];
    vc.shouldLogin = YES; 
   //stepping through the code and looking at the value, shouldLogin shows YES 
    [self dismissModalViewControllerAnimated:YES]; // this drops down VC_B which will show VC_A

//now VC_A just came into view and the BOOL is now NO which makes the compiler skip over my IF statement 
```

**更新：删除了我的发布调用，但仍然是同样的问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:01:37.547

看起来您的代码`ViewController_B`正在创建一个全新`ViewController_A`的 ，设置`shouldLogin`标志，然后立即销毁`ViewController_A`. 我怀疑这是你打算做的。

我假设您想`shouldLogin`在先前实例化的`ViewController_A`. 您将需要传递一个指向`ViewController_A`您的指针`ViewController_B`，然后使用此指针在`ViewController_B`. 您可以使用自定义`init`方法来执行此操作，该方法`ViewController_B`需要一个指针`ViewController_A`并将其存储以供`ViewController_B`.

或者，您可以只在其上创建一个属性，`ViewController_B`该属性可以存储指向`ViewController_A`并在创建`ViewController_A`后设置此属性`ViewController_B`。就像是：

```
@interface ViewController_B : UIViewController

@property (nonatomic,retain) ViewController_A *originalViewController;

@end

@implementation ViewController_B

@synthesize originalViewController;

- (void)someMethod {
    originalViewController.shouldLogin = YES; 
    [self dismissModalViewControllerAnimated:YES];
}

@end

@implementation ViewController_A 

-(void)someOtherMethod {
     ViewController_B *vcB = [[ViewControllerB alloc] init];
     vcB.originalViewController = self;

     // do something with vcB
}

@end 
```

原谅任何错别字/错误，我实际上并没有尝试运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:01:46.613

我假设您的视图控制器 A 在您推送视图控制器 B 之前已经存在。在这种情况下，您需要引用回原始视图控制器，而不仅仅是创建一个新视图控制器。您没有在此代码中的任何地方触摸原始视图控制器，因此它不会改变是完全合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T02:10:45.883

ViewController_A 是一个类，而不是一个对象。shouldLogin 只能由 ViewController_A 类的对象访问。

您之前显示的 ViewController_A 的对象（或实例）与您的 ViewController_B 代码中的实例不同。您显示的代码创建了一个全新的 ViewController_A 对象，将该对象的布尔值设置为 YES，然后立即销毁该对象。它从未改变您在呈现 ViewController_B 实例之前拥有的 ViewController_A 实例中的任何内容，因此当您返回显示原始 ViewController_A 时，它与原来的完全一样——将 shouldLogin 设置为 NO。

由于 shouldLogin 似乎是多个视图控制器需要访问的变量，因此我会将其完全设置在另一个类中（两个视图控制器都可以访问）。对于诸如此类的变量，我倾向于创建一个 Singleton 类并在需要的区域周围共享对该对象的访问。当然，还有其他方法可以做到这一点，但我发现这是最简单的。

# javascript - 使用 jQuery 函数作为事件

> ID：10747556
> 
> 赞同：4
> 
> 时间：2012-05-25T01:56:11.867
> 
> 标签：javascript, jquery, jquery-callback

我想知道是否可以将回调附加到 jQuery 以进行 dom 操作：

*   附加
*   前置
*   添加类
*   切换类
*   移除类
*   值
*   文本
*   css
*   属性
*   html
*   隐藏
*   ETC

像新事件一样起作用的东西。

例子：

```
$('#mydiv').bind('hide', function(){
    console.debug('someone call hide function')
});

//then in other js file, other function, anywhere.
$('#mydiv').hide();
//hide and output 'someone call hide function' 
```

我查看了[.queue](http://api.jquery.com/queue/)和[jQuery.Callback](http://api.jquery.com/category/callbacks-object/)，但只有当我为这个函数制作自己的包装器时它才会起作用？

也许是 jQuery 插件？

这可以在不改变我所有的js调用这个插件的情况下完成吗？不是这样的东西：

```
$('#mydiv').myPluginsHide(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:06:57.753

我不知道有什么内置功能可以做到这一点，但是您可以通过迭代自己来完成`jQuery.fn`（即，您将按照 Felix Kling 的建议覆盖这些功能）：

```
var callbacks = {};
var excluded = ['constructor','init','jquery'];
for ( var key in $.fn ) {
    var orig = $.fn[key];
    if ( !orig instanceof Function || excluded.indexOf(key) != -1 )
        continue;
    (function(key,orig) {
        callbacks[key] = []; // This is the list of callbacks for this function
        $.fn[key] = function() {
            var ret = orig.apply(this,arguments); // Applies the function normally
            var elements = this, args = arguments;
            callbacks[key].forEach(function(f) { f(elements, args); }); // Calls each callback
            return ret;
        };
    })(key,orig);
} 
```

然后，您只需向`callbacks`对象中的相应条目添加/删除回调。

**更新：**不知道我在这里缺少什么，但无法使[示例](http://jsfiddle.net/mgibsonbr/cvNCp/1/)正常工作。（*编辑：*啊，忘记将变量包装在闭包中的经典错误......它现在应该可以工作了。还添加了一个`excluded`列表，用于**不得**覆盖的函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:08:40.197

您也许可以查看 jQuery.Deferred ...我认为它是这样的...

```
$(function(){
    $.when($('#one').hide('slow'))
        .then(function () { 
            $('#two').hide('slow') 
        })
        .then(function () { 
            $('#three').hide('slow')
        });
}); 
```

[http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

# google-search-console - Schema.org 和网站管理员工具 丰富的代码片段工具

> ID：10747558
> 
> 赞同：4
> 
> 时间：2012-05-25T01:56:23.083
> 
> 标签：google-search-console, microdata, schema.org

我不知道要使用哪种 schema.org 类型。任何人都可以提出任何建议吗？具体问题在这篇文章的底部并且很明显。我的网站已经上线四年了，有成千上万的个人评论。该网站是发生某种活动的地方的目录。这些地方可以是教堂、城市公园、集市、零售店、餐馆、国家森林、加油站，应有尽有！我的网站提供了与活动相关的位置和设施的记录。该活动可能与该位置的假定功能相关，也可能不相关（即，我的用户不在餐厅用餐）。执行该活动的用户来到我的网站并留下关于该地点的评论。用户也可以对位置进行评分，但评分并不是用户评论本身的一部分。

如果我使用 hreview-aggregates，富文本和星号会显示在 google 测试工具中。如果我只使用来自 schema.org 的以下内容，则该工具不会在其中显示代码段，但会识别格式：

```
<div itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
  <span itemprop="name">The Hubcap Place</span>
  <span itemprop="itemreviewed">Hubcap City</span>
  <span itemprop="ratingValue">4</span> stars -
  <span itemprop="reviewCount">3077</span> reviews
</div> 
```

如果我将其更改为，一切看起来都很棒

```
<title>My Site</title>
<div class="entry" itemtype="http://schema.org/localBusiness" itemscope="">
  <span itemprop="name">The Hubcap Place</span>
  <span itemprop="itemreviewed">Hubcap City</span>
  <span itemprop="author">Ellie</span>
  <span itemtype="http://schema.org/AggregateRating" itemscope="" itemprop="aggregateRating">
    <meta content="3.2" itemprop="ratingvalue">
    <meta content="18" itemprop="ratingcount">
  </span>
</div> 
```

我认为本地业务不合适。有些位置只是田野中间的一个空地。此外，schema.org/localBusiness 让我觉得我应该拥有它。schema.org/Place 似乎最合适，但未在工具中显示富文本片段。与 schema.org/Review 相同。如果我将其用作主要包装器，则不会显示该片段。其他有效的主要包装是 Product 和 Restaurant。我会很感激你能给的任何建议。

*   Place 是否因为我的标记而失败？
*   包装器的好类型是什么？包装器是必需的吗？
*   即使它不完全适合所有东西，我是否应该只选择一个主包装器？
*   我可以同时使用 hreview-aggragate(microformat) 和 schema.org 吗？这就是我现在正在做的事情，它在测试工具中显示得很好，但我听说你不应该这样做。这仍然是当前的建议吗？

还应该注意的是，当我使用具有正确语法的 data-vocabulary.org/Review 时，工具中的所有内容也都显示正常......我只是在使用 schema.org 时遇到了问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T08:58:09.597

您可以对已审阅的项目使用 schema.org 标记，对审阅项目使用 data-vocabulary 标记。另请注意，如果您使用 reviewCount，您还需要在此页面上提供标记的评论。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T13:45:30.353

如果我正确地遵循了您的问题，我认为这是帮助澄清的答案的一部分

```
<div class="entry" itemtype="http://schema.org/localBusiness" itemscope="">
 <span itemprop="name">My Site</span>
</div> 
```

LocalBusiness 用于描述您和您的姓名地址和电话（您的联系方式）

据我所知，应该与其他可以单独调用的“itemtypes”分开，并且页面可以嵌套“itemtypes”。

```
<div itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
 <span itemprop="name">The Hubcap Place</span> "If this is the place being reviewed"
 <span itemprop="itemreviewed">Hubcap City</span> "Would not need this as it repeats"
 <span itemprop="ratingValue">4</span> stars -
 <span itemprop="reviewCount">3077</span> reviews 
```

这些将指示正在审查的项目/地点、谁审查了该地点、他们的评级、所有贡献者的汇总评级以及该地点有多少评论。即一个单独的 itemtype 调用来描述页面那部分的信息。

我认为您的错误或误解是一个“项目类型”将涵盖所有内容。

希望这会有所帮助，我上周才自己看这个。

# paypal - Paypal Pro（Payflow 版）API 问题

> ID：10747564
> 
> 赞同：3
> 
> 时间：2012-05-25T01:57:56.130
> 
> 标签：paypal, payflowpro

我正在研究贝宝 API（上帝有很多！）

我的问题是：网站支付专业版似乎有两个版本（直接版和支付流版）。有关两个指南，请参见下面的链接： [https ://www.x.com/developers/paypal/development-integration-guides#wpp](https://www.x.com/developers/paypal/development-integration-guides#wpp)

在与贝宝交谈后，他们似乎最近切换并正在将新的专业账户创建到支付流版，而旧账户仍然是直接支付版。新的 payflow 版本 API 有一个新的身份验证方案。

1）有人知道这两个API是否完全不同吗？他们都被称为网站支付专业人士，但我不知道 API 本身。

2）如果它们不同，它们是否都允许透明重定向。

3）对于快速结帐，如果我直接使用快速结帐 API，与使用专业版（直接或支付流版本），API 调用是否不同。

感谢您减轻我的困惑。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:18:58.247

1)Payments Pro-PayFlow 版本与 Payments Pro Standard 相同，但多了一项功能：定期计费。

2) Paypal 标准没有，pro 有。

3) 快速结帐仅适用于贝宝帐户，并且是最容易实施的。然而，它要求买家有一个贝宝账户。

贝宝标准将用户从您的网站重定向到贝宝。用户无需拥有贝宝帐户即可购买东西。用户可以选择通过登录他们的贝宝账户或信用卡/借记卡进行支付。

Payments pro，让您的用户在整个付款处理期间都停留在您的网站上。

检查[此](http://www.zen-cart.com/content.php?70-whats-the-difference-between-paypal-standard-express-and-pro)以获取所有这些 API 的详细说明。

# javascript - javascript 需要从一组复选框中选中一个复选框

> ID：10747568
> 
> 赞同：0
> 
> 时间：2012-05-25T01:58:09.940
> 
> 标签：javascript, checkbox

我目前有一些 javascript/jquery 代码，如果没有选中任何框，则会显示错误消息。但是，当我选中一个框并提交表单时，仍然会显示错误消息。

任何帮助都会很棒！

**javascript代码**：

```
 var hobbies = $('#hobbies').val();
    if ($('#hobbies :checkbox:checked').length === 0){
    $("#multichk").after('<span class="error">Please choose at least one.</span>');
    hasError = true;
    } 
```

**html代码：**

```
 <input type='checkbox' id='hobbies' name='hobbies[0]' value='1'/><label for='hobbies0'>football</label><br />

 <input type='checkbox' id='hobbies' name='hobbies[1]' value='2'/><label for='hobbies1'>soccer</label><br />

 <input type='checkbox' id='hobbies' name='hobbies[2]' value='3'/><label for='hobbies2'>baseball</label><br />

 <input type='checkbox' id='hobbies' name='hobbies[3]' value='4'/><label for='hobbies3'>tennis</label><br />

 <input type='hidden' id='multichk' /> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:00:08.880

您命名和识别复选框的方式，它们不会属于同一组，也不会被正确识别。

页面上的每个元素在被识别时都必须具有唯一的 ID，并且对于一组复选框或单选按钮，要作为一个组进行验证和交付，该组的每个成员必须具有相同的名称。

`for`鉴于这些规则，标签标签的属性引用元素的`id`属性而不是其属性也就不足为奇了`name`。

现在，我猜您正在使用 PHP 作为服务器端语言（基于复选框名称中的括号），在这种情况下，复选框应该声明如下：

```
<input type='checkbox' id='hobbies0' name='hobbies[]' value='1'/>
<label for='hobbies0'>football</label><br />

<input type='checkbox' id='hobbies1' name='hobbies[]' value='2'/>
<label for='hobbies1'>soccer</label><br />

<input type='checkbox' id='hobbies2' name='hobbies[]' value='3'/>
<label for='hobbies2'>baseball</label><br />

<input type='checkbox' id='hobbies3' name='hobbies[]' value='4'/>
<label for='hobbies3'>tennis</label><br /> 
```

*[注意：标签仅移动到下一行以删除代码框中的水平滚动]*

理顺 HTML 后，jQuery 将如下所示：

```
if($('input:checkbox[name="hobbies[]"]:checked').length === 0){
    $("#multichk").after('<span class="error">Please choose at least one.</span>');
    hasError = true;
} 
```

[选择器格式参考](http://api.jquery.com/checkbox-selector/#comment-117748360)

如果该选择器仍然给您带来麻烦，那么您可能需要在方括号前加上双反斜杠，如下所示：

```
if($('input:checkbox[name="hobbies\\[\\]"]:checked').length === 0){ 
```

[双反斜杠的参考](https://stackoverflow.com/a/2228401/418613)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:50:45.897

从技术上讲，您的 HTML 无效；具有相同 id 的多个元素是非法的。您应该使用类选择器而不是 id 选择器...

无论如何，最简单的方法是将跨度放在那里并在有人选中复选框时将其清除。

```
<input type='checkbox' id='hobbies' name='hobbies[0]' value='1'/><label for='hobbies0'>football</label><br />

 <input type='checkbox' id='hobbies' name='hobbies[1]' value='2'/><label for='hobbies1'>soccer</label><br />

 <input type='checkbox' id='hobbies' name='hobbies[2]' value='3'/><label for='hobbies2'>baseball</label><br />

 <input type='checkbox' id='hobbies' name='hobbies[3]' value='4'/><label for='hobbies3'>tennis</label><br />

 <input type='hidden' id='multichk' />

 <span id="error_message" class="error"></span> 
```

然后你的js：

```
var hobbies = $('#hobbies').val();
if ($('#hobbies:checked').length === 0) {
    $('#error_message').innerHTML('Please choose at least one.');
    hasError = true;
} else {
    $('#error_message').innerHTML('');
    hasError = false;
} 
```

您可以通过设置处理程序在他们单击复选框时重置它：

```
function changed(checkbox) {
  return function() { 
    if (checkbox.checked) {
      $('#error_message').innerHTML('');
      hasError = false;
    }
  }
}

var checkboxes = document.querySelector('#hobbies')
for (var i=0; i<checkboxes.length; ++i) {
  checkboxes[i].onchange = changed(checkboxes[i]); 
```

以上是想法；[这个小提琴](http://jsfiddle.net/JaKz6/61/)中的工作代码。

# javascript - Javascript字符串匹配

> ID：10747570
> 
> 赞同：1
> 
> 时间：2012-05-25T01:58:40.447
> 
> 标签：javascript, regex, string-matching

这是我到目前为止所得到的：

```
var source = '>R$11111</b>';
var price = source.match(/[^R$]\d+/); 
```

* * *

'source' 有点像 innerHTML 插入，但我已经把它记下来了。

问题是“价格”必须介于`'R$'`和之间`'</b>'`，无论它们之间是什么，从 1 到无穷大。我在那里得到的东西会起作用，但是当我从中取出`'R$'`或`'</b>'`从中取出时，它仍然会找到价值和额外的字符。

所以基本上我只需要帮助来制作它，所以它只会在两者都存在时`'R$'`和两者之间获取价值。`'</b>'`

***OR 从 R$ 到字符串的末尾。但 R$ 和价格之间没有空格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T02:04:14.697

好吧，`[^R$]`匹配“恰好一个既不是 an`R`也不是 a 的字符`$`”，所以这可能不是你想要的。

```
var price = source.match(/R\$(\d+)/)[1]; 
```

或者，如果价格可能不是全数字：

```
var price = source.match(/R\$(.*?)<\/b>/)[1]; 
```

重要的是您关心的部分周围的括号，这会导致与括号之间的内容匹配的任何文本都包含在匹配的返回值中，作为数组的第二个元素（第一个是文本的一部分）匹配整个正则表达式）。

如果字符串可能与正则表达式不匹配，那么最好分两步进行：

```
var match = source.match(/whichever/);
if (match) {
    price = match[1]; 
} else {
    console.log("no price found.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:02:34.000

```
var source = '>R$11111</b>';
var price = source.match(/R\$(\d+)<\/b>/);

if (price)
    console.log(price[1]); // 11111 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:31:07.837

Here is a non-regex solution in case someone is interested:

```
function getPrice(str, start, end){
    var first = str.indexOf(start),
        last = str.lastIndexOf(end);

    return ~first ?
                str.slice(first + start.length, (~last ? last : str.length))
                    .replace(/^\s+/, "")
            :
                str;
}

var source = "...R$  21112</b>...";

console.log(getPrice(source, "R$", "</b>")); //"21112"
console.log(getPrice(source, "R$", "nomatch")); //"21112</b>..."
console.log(getPrice(source, "nomatch", "</b>")); //"...R$  21112</b>..." 
```

**[Demo](http://jsfiddle.net/xv8mE/1/)**

# android - 如何进行从台式电脑到安卓设备的蓝牙连接测试

> ID：10747573
> 
> 赞同：0
> 
> 时间：2012-05-25T01:58:50.633
> 
> 标签：android, bluetooth, l2cap

我正在使用带有蓝牙加密狗的 Ubuntu 11.10 台式电脑和使用带有蓝牙的 Android 2.2 的 Android 平板电脑。（两台设备的蓝牙都应该是2.0或2.1版本）

我已经检查过台式电脑和 Android 平板电脑都使用 Bluez Stack。我能够配对 2 台设备，并且可以使用以下命令从我的桌面 ping（使用 l2cap 协议）Android 平板电脑：

```
$ sudo l2ping 00:10:18:23:34:81
Ping: 00:10:18:23:34:81 from AE:2D:22:00:FF:00 (data size 44) ...
44 bytes from 00:10:18:23:34:81 id 0 time 26.93ms
44 bytes from 00:10:18:23:34:81 id 1 time 24.88ms
44 bytes from 00:10:18:23:34:81 id 2 time 33.92ms
44 bytes from 00:10:18:23:34:81 id 3 time 25.91ms 
```

但是，当我尝试使用以下命令通过 rfcomm 将桌面连接到 Android 平板电脑时，出现错误：

```
$ sudo rfcomm connect hci0 00:10:18:23:34:81
Can't connect RFCOMM socket: Connection refused 
```

我认为台式电脑上的蓝牙应该同时支持 l2cap 和 rfcomm，而安卓平板电脑上的蓝牙应该至少支持 l2cap。

我想知道l2ping命令运行成功是否说明台式机和安卓平板通过蓝牙有效通信？如何建立连接（使用 l2cap 或 rfcomm）来测试两个设备之间的蓝牙通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:38:23.250

您可以在桌面和 Android 设备之间建立 RFCOMM 连接。如果您的设备充当服务器，您需要为您的应用程序创建 UUID，然后您就可以连接到它。

# php - MySQL中动态表选择的替代方案

> ID：10747576
> 
> 赞同：0
> 
> 时间：2012-05-25T01:59:07.500
> 
> 标签：php, sql, mysqli

有人告诉我，在 MySQL 查询中动态选择表是不好的做法，除了将所有内容放入一个表中之外，我找不到当前代码的替代方法。如果这没有意义，也许我当前的代码会更有意义。

```
$where = $_GET['section'];
$mysqli = mysqli_connect("localhost", "root", "", "test");

if ($stmt = mysqli_prepare($mysqli, "SELECT title, img, active, price FROM ? ORDER by ID limit 5 ")) {
    mysqli_stmt_bind_param($stmt, 's', $where);

    while ($row = mysqli_fetch_assoc($stmt)) {
        if ($row['active'] == "yes") {
            echo' 
```

我现在知道你不能使用准备好的语句来选择一个表，但我现在不知道如何解决这个问题。

会像：

```
$where = $_GET['section'];
$mysqli = mysqli_connect("localhost", "root", "", "test");
if ($where == "sets") {
    $query = "SELECT title, img, active, price FROM sets;"
}

if ($stmt = mysqli_prepare($mysqli, $query)) {
    while ($row = mysqli_fetch_assoc($stmt)) {
        if ($row['active'] == "yes") {
            echo'do stuff here';
        } 
```

但我敢肯定这也是不好的做法。感谢任何我应该采取的方向的指示，我为这篇长文道歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T02:02:51.617

*如果*您使用可接受值的白名单验证其有效性，则可以动态选择表名。正如您所发现的那样，由于您不能将准备好的语句占位符用于表名，因此这是最安全的替代方法。

```
// Build an array of table names you will permit in this query
$valid_tables = array('sets', 'othertable', 'othertable2');

// Verfiy that $_GET['section'] is one of your permitted table strings
// by using in_array()
if (in_array($_GET['section'], $valid_tables)) {
  // Build and execute your query
  $where = $_GET['section']
  $query = "SELECT title, img, active, price FROM $where;";
  // etc...
}
else {
  // Invalid table name submitted.  Don't query!!!
} 
```

# xamarin.ios - 使用带有子类 UIViewController 的 MonoTouch 未按预期绑定

> ID：10747577
> 
> 赞同：1
> 
> 时间：2012-05-25T01:59:23.463
> 
> 标签：xamarin.ios, monodevelop, xamarin

我已经通过几种不同的方法进行了尝试，但这并没有按预期工作。这是一个混合 iOS 应用程序，大约一半的屏幕 UIViewControllers 带有一个主 UIWebView。处理 UIWebView 事件有很多类似的逻辑，尤其是在错误处理方面。子类稍微更专门处理正在呈现的屏幕。所以，类图大致是：

```
UIViewController
  +- BaseWebController   <-- this class should bind to UIWebView
      +-- ScreenAController
      +-- ScreenBController
      +-- ... 
```

BaseWebController.designer.cs 是非常基础的。事实上，一旦连接起来，它看起来像：

```
[Register ("BaseWebController")]
partial class BaseWebController
{
    [Outlet]
    MonoTouch.UIKit.UIWebView WebView { get; set; }

    void ReleaseDesignerOutlets ()
    {
        if (WebView != null) {
            WebView.Dispose ();
            WebView = null;
        }
    }
} 
```

问题是：我得到了各种异常，因为 UIWebView 没有正确绑定到 WebView 实例。我收到各种消息，例如*'Failed to find selector setWebView: on ScreenAController'*，但归结为（我认为）它试图绑定父类（ScreenAController）并失败。

**问题：我是否错过了这个绑定应该如何工作的东西？本质上，我试图保持这个非常干燥并将所有重复的代码推送到基类。否则，我最终会为每个屏幕重复相同的 100 行连线代码和错误检查。**

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:58:17.763

我猜你对继承和绑定不太正确。

您是否可以通过添加以下内容来妥协：

```
[outlet]
new UIWebView WebView
{
    get { return base.WebView; }
    set { base.WebView = value;}
} 
```

到每个 ScreenController 类。

不是完全 DRY，但比在所有类中复制所有内容要好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T22:56:00.093

这看起来像这个错误： [https ://bugzilla.xamarin.com/show_bug.cgi?id=1449#c7](https://bugzilla.xamarin.com/show_bug.cgi?id=1449#c7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T01:06:57.173

@斯图尔特：

对。我最终到达了与您提到的非常相似的地方。我决定让每个父类（ScreenAController、ScreenBController）绑定到同一个视图并实现由基定义的抽象属性：

```
 protected abstract UIWebView ActiveWebView { get; } 
```

该基类在其构造函数中设置 xib 文件。ScreenAController, ScreenBController, ...，实现实际上只是对该插座的引用的属性。它尽可能干燥。这几乎就是你所说的。

```
 /// <summary>
    /// Provides access to the base class to handle most error handling.
    /// </summary>
    protected override UIWebView ActiveWebView { get { return this.WebView; } } 
```

@mhutch，我会仔细看看那个错误。我现在可以解决这个问题。

谢谢！

# mongodb - 100% CPU 的 MongoDB 服务

> ID：10747580
> 
> 赞同：3
> 
> 时间：2012-05-25T01:59:59.703
> 
> 标签：mongodb, windows-services, cpu-usage

我开始学习使用 MongoDB 并试图让本地服务器运行，但是当我运行命令来安装服务时：

> mongod --install --serviceName MongoDB --serviceDisplayName MongoDB --logfile C:\MongoDB\log.log

并启动服务，它使用 100% 的 CPU，因此我的工作站听起来像是起飞了。

我什至还没有做任何事情，它以 100% 的 CPU 运行。这是在具有 Core 2 Duo 3.16GHz 和 4GB 内存的 32 位 Windows 7 上。

我试过搜索谷歌，但没有一个高 CPU 使用率结果导致任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:21:09.320

有时，如果数据文件夹中的锁定文件没有完全关闭，MongoDB 会出现问题。在尝试启动服务之前，请确保锁定文件不存在。

如果这是问题所在，您通常可以通过在任务管理器中观察进程并观察 PID 处于不断变化的状态来观察行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:29:13.287

看着你的安装命令，我认为你的开关不正确

`--logfile`似乎不是一个有效的开关。

尝试使用以下命令安装服务，我使用以下命令来设置服务的快速安装。需要针对生产环境进行调整。

```
mongod.exe -v --logpath C:\MongoDB\log.log --logappend --dbpath $mongoDBLocation --install 
```

我们目前使用的是 2.0.4 版，因此希望它对您有用。

# c# - ASP.NET 中的文本多搜索

> ID：10747583
> 
> 赞同：4
> 
> 时间：2012-05-25T02:00:24.797
> 
> 标签：c#, asp.net, .net

我需要做一个文本 ASP.NET (C#) 多搜索文本框（即允许选择和输入 3 个值，即：“一、二、三”）自动完成，并在我的数据库中使用谷歌搜索等建议，同时输入值在文本中，数据网格将显示我们数据库中存在的数据......您有什么建议或想法让它正确吗？

非常感谢您的关注

干杯

编辑：

我正在尝试使用 c# 而不是 jquery 按要求而不是 jquery 来做到这一点。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T02:07:13.103

您可以使用 Jquery UI 的自动完成功能：

[http://jqueryui.com/demos/autocomplete/#multiple](http://jqueryui.com/demos/autocomplete/#multiple)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:16:23.413

您可以使用[AjaxToolKit AutoComplete 扩展程序](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)。

你肯定会得到你的问题的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:52:47.510

文本框、ajax 工具包 AutoComp xtender 将为您完成。为此：

1.  创建 WebMethod 或 Page 方法。
2.  以该方法调用您的选择查询。
3.  通过 ToolkitScriptmanager 在您的 Ajax 工具包 Autocomplete Extender 中调用它。

以上只是给你一个出路，你可以通过谷歌搜索得到休息。 [http://www.aspdotnet-suresh.com/2011/05/ajax-autocompleteextender-sample.html](http://www.aspdotnet-suresh.com/2011/05/ajax-autocompleteextender-sample.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T03:14:52.557

对于自动完成部分，您将需要`AJAX Control Toolkit AutoCompleteExtender`：[http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

对于搜索部分，您将需要`SQL Server Full Text Search`：http: [//blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index/](http://blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T23:44:44.810

由于您不想使用 jQuery，我会推荐 AJAX 自动完成扩展器。非常有用，您可以使用 Web 方法在 C# 中执行所有查询代码。在这里查看[文章](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T04:41:49.843

您可以使用 AjaxToolKit AutoComplete 扩展器。

检查以下链接。以下链接中的所有资源。 [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

这是代码项目示例链接

[http://www.codeproject.com/Articles/201099/AutoComplete-With-DataBase-and-AjaxControlToolkit](http://www.codeproject.com/Articles/201099/AutoComplete-With-DataBase-and-AjaxControlToolkit)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-04T06:59:35.423

听起来像是 JQuery 自动完成和 JqGrid 显示匹配数据的工作。

您永远无法进行重定向，因为您想留在同一页面上并且只想动态更新页面的某些部分。

如果您有机会使用 MVC 4 尤其是 WEB API，那将是非常棒的，如果不是接受并返回 json 数据的 webmethod 会很好。

[http://www.asp.net/web-api](http://www.asp.net/web-api)

我个人不会为此使用 ajaxtoolkit，你的代码越接近 HTML，你就越好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-04T05:03:03.740

非常快 - 您需要在键/值对之间使用“&”，因此更改为：

```
Response.Redirect("~SearchResults.aspx?Weight=" + txtWeight.Text + "&Height=" + txtHeight.Text + "&Age=" + txtAge1.Text + txtAge2.Text + "&Country=" + ddlCountry.SelectedValue); 
```

至于您的 SearchResult.aspx，您需要使用 QueryString 检索值，例如：

```
string Weight = Request.QueryString["Weight"];
string Height = Request.QueryString["Height"];

...and so on. You use the key from the redirect and the value is returned (setting your string variables). 
```

至于您的查询，您的表格是什么，您到底在寻找什么结果？我知道您有这些标准，但您是否正在寻找与这些标准完全相同的东西？还是接近？我希望这有帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-30T10:03:06.750

您可以查看支持逗号分隔搜索的[http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/autocomplete/autocomplete.aspx 。](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/autocomplete/autocomplete.aspx)

加载列表需要时间，但确实会加载列表。

您甚至可以尝试[http://pholpar.wordpress.com/2010/02/25/multivalue-autocomplete-winforms-textbox-for-tagging/](http://pholpar.wordpress.com/2010/02/25/multivalue-autocomplete-winforms-textbox-for-tagging/)示例用于 Winform 必须转换为 Webform。

快乐编码！！！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-31T19:23:59.533

使用带有数据库搜索结果的 web 方法实现的自动完成文本框搜索。

```
 $(document).ready(function() {
        SearchText();
    });
    function SearchText() {
        $(".autosuggest").autocomplete({
            source: function(request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Default.aspx/GetAutoCompleteData",
                    data: "{'username':'" + document.getElementById('txtSearch').value + "'}",
                    dataType: "json",
                    success: function(data) {
                        response(data.d);
                    },
                    error: function(result) {
                        alert("Error");
                    }
                });
            }
        });
    }

[WebMethod]
public static List<string> GetAutoCompleteData(string username)
{
    List<string> result = new List<string>();

    using (SqlConnection con = new SqlConnection("Data Source=yourserver;Integrated Security=true;Initial Catalog=yourdatabase;User Id=youruserid;Password=yourpassword"))
    {
        using (SqlCommand cmd = new SqlCommand("select DISTINCT Name from Company where Name LIKE '%'+@SearchText+'%'", con))
        {
            con.Open();
            cmd.Parameters.AddWithValue("@SearchText", username);
            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                result.Add(dr["Name"].ToString());
            }
            return result;
        }
    }
} 
```

更多详情[http://www.infinetsoft.com/Post/How-to-create-autocomplete-textbox-with-database-in-asp-net-c/1254](http://www.infinetsoft.com/Post/How-to-create-autocomplete-textbox-with-database-in-asp-net-c/1254)

# git - 我是否需要 GIT 服务器进行集中/镜像才能使 GIT 正常工作？

> ID：10747588
> 
> 赞同：0
> 
> 时间：2012-05-25T02:01:14.483
> 
> 标签：git

我已经使用 VisualSVN 和 TortoiseSVN 与 SVN 合作了几年，它适用于我的 10 人部门。

今天Git很火，正在考虑要不要从SVN转到Git。

我在 StackOverflow 上阅读了很多帖子，并且我对 git 有一个概念

Git 是去中心化和分布式的 VCS。无论网络连接是否可用，用户都可以在其本地存储库中提交他们的修订。

来自这篇文章的参考： [我需要一个服务器来使用 git 吗？](https://stackoverflow.com/questions/1173101/do-i-need-a-server-to-use-git)

为了让它为多个用户工作，我仍然需要一个带有**裸**存储库的中央 Git 服务器，仅用于同步并让多个用户同步文件（如 SVN -`update`命令）或新用户拥有文件（如 SVN -`checkout`命令）。

但我的问题是：

1.  我真的需要一个服务器/网络空间作为一般 Git 工作流程的同步/镜像的裸仓库吗？
2.  GIT 服务器的系统要求是什么？（像SVN必须使用Apache）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:04:46.130

Git 服务器用于在许多人之间共享存储库。在你的情况下，你有一个 10 人的团队，所以你需要设置一个来分享。当团队成员认为他们准备好分享时，他们可能会推动他们的工作。

您可以在 httpd.conf 中使用 apache，添加

```
SetEnv GIT_PROJECT_ROOT /path-to-git-repo-root
SetEnv GIT_HTTP_EXPORT_ALL
ScriptAlias /url-path-to-git/ /usr/lib/git-core/git-http-backend/ 
```

你的网址：

```
git clone http://server/url-path-to-git/xxx.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:08:41.670

1.  不，也没有*通用的 git 工作流*。阅读[本文](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows)以获取分布式工作流的示例。
2.  你只需要一台接受连接的计算机`ssh`，`git`当然

一个有用的管理工具是[gitolite](https://github.com/sitaramc/gitolite)。

# css - css :last-child 不太正确

> ID：10747593
> 
> 赞同：1
> 
> 时间：2012-05-25T02:02:10.610
> 
> 标签：css

试图将最后一个图像的边距重置为零，但最后一个孩子正在将它们全部重置。没有正确使用这个...

[http://jsfiddle.net/telagraphic/MAgpU/](http://jsfiddle.net/telagraphic/MAgpU/)

应该是吗？

```
div#social:last-child{
    margin-right: 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T02:06:11.857

源中的每一个`img`都是其父级的最后一个子级，一个`a`标签。您可以改用它来解决问题：

```
div#social a:last-child img{
    margin-right: 0;
} 
```

当您使用它时，请`div`从您的所有 ID 选择器中删除限定符。（`div#social`变成`#social`）。这通常是多余的，因为页面上只有一个具有该 ID 的元素，并且可能会降低选择器的性能。

# android - 你如何在android中使用setId？

> ID：10747599
> 
> 赞同：3
> 
> 时间：2012-05-25T02:03:30.703
> 
> 标签：android, textview

我设置了这个循环，它工作正常，但我希望能够单独更改每个 textView，所以我需要设置 textView.setId(whateveryouputinhere); 有人可以向我解释如何设置 id 以及括号内的内容吗？谢谢！

```
while (counter < 5) {
            view = LayoutInflater.from(getBaseContext()).inflate(R.layout.newplayerlayout, null);
            parent.addView(view); 
            TextView textView = (TextView) view.findViewById(R.id.textView2);
            textView.setText("Player "+counter);
            textView.setId(counter);
            counter++;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:04:50.067

根据[`View`](http://developer.android.com/reference/android/view/View.html#setId%28int%29)文件，

> 标识符在此视图的层次结构中不必是唯一的。标识符应该是一个正数。

在这种情况下，可能会有一些具有等效 ID 的视图。如果您想在层次结构中搜索某些视图，`setTag`使用某些关键对象调用可能会很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:22:56.187

> 我设置了这个循环，它工作正常，但我希望能够单独更改每个 textView

行

> 所以我需要设置 textView.setId(whateveryouputinhere);

不，你没有，有更好的方法来实现你想要做的事情。

一个例子可能是这样的：

```
LayoutInflator mInflator; //You are creating 5 of these with your code, you don't need to.
mInflator = LayoutInflater.from(this); //Your activity is a context. So you pass it in, instead 
                                       //calling getBaseContext(). Which you should try avoid generally.
TextView[] mTxts = new TextView[5](this);
while (counter < 5) {
    mTxts[counter] = (TextView)mInflator.inflate(R.layout.newplayerlayout, null);
    parent.addView(view); 
    //TextView textView = (TextView) view.findViewById(R.id.textView2);
    //You don't need this any more.

    mTxts[counter].setText("Player "+counter);
    //textView.setId(counter);
    //don't need this either.
    counter++;
}
//Now that your array is loaded you can set the text like this:
mTxts[0].setText("plums");
mTxts[2].setText("grapes"); 
```

请注意，我没有编译它，但它应该很接近。如果您在“this”上收到错误，请将它们更改为“YourActivity.this”，并使用您的活动类的名称。

有一些好处，通过保留 LayoutInflater 参考，您可以节省创建 4 个以上的参考。膨胀视图对象后，无需再通过 Id 找到它，您已经得到它。如果你愿意，你可以将它作为 TextView 直接从充气机中投射出来。通过将它们保存在一个数组中，您可以随时引用它们中的每一个，而不必再次调用 findViewById()，这种方法相当昂贵，您应该尽量避免过度调用它。

# python - 从列表的笛卡尔积中排序的元组

> ID：10747600
> 
> 赞同：4
> 
> 时间：2012-05-25T02:03:33.753
> 
> 标签：python, combinatorics, dynamic-programming

我有列表字典，如下所示：

```
D = {'x': [15, 20],
     'y': [11, 12, 14, 16, 19],
     'z': [7, 9, 17, 18]} 
```

我想一次取 3 个键（我将使用`itertools.permutations`），然后计算我可以从每个列表中取一个元素并对结果进行排序的所有方式。

对于上面显示的三个键，我会得到 2：

```
(15, 16, 17)
(15, 16, 18) 
```

显然，我可以做字典值的笛卡尔积，然后计算排序的那些：

```
answer = 0
for v_x, v_y, v_z in product(D['x'], D['y'], D['z']):
    if v_x < v_y < v_z:
        answer += 1 
```

不过，我能做得更好吗？此解决方案不适用于键的数量和作为值的列表的长度。我尝试了几行毫无结果的查询，但我怀疑我可能不得不利用键映射到列表值的方式。但是，我认为值得看看是否有一个我可以使用的解决方案，而无需重新执行程序的其余部分。

ETA：这是一个更大的例子。

```
D = {'a': [15, 20],
     'b': [8],
     'c': [11, 12, 14, 16, 19],
     'd': [7, 9, 17, 18],
     'e': [3, 4, 5, 6, 10, 13],
     'f': [2],
     'g': [1]} 
```

有 14 个有效答案：

```
(8, 9, 10)  (8, 9, 13) (8, 11, 13) (8, 12, 13) (8, 11, 17) (8, 11, 18) (8, 12, 17) (8, 12, 18) (8, 14, 17) (8, 14, 18) (8, 16, 17) (8, 16, 18) (15, 16, 17) (15, 16, 18) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:38:14.783

您可以以一种聪明的方式做到这一点 - 对于每个现有列表，将其中的每个数字映射到下一个大于它的数字列表中的计数。一旦你有了这些计数，明智的产品总和应该会让你得到你需要的计数。

这是一个如何获得计数的示例：

```
D = {'x': [15, 20],
     'y': [11, 12, 14, 16, 19],
     'z': [7, 9, 17, 18]}

order = ['x', 'y', 'z']
pairs = zip(order[:-1], order[1:])

counts = dict()
for pair in pairs:
    counts[pair[0]] = dict()
    for num in D[pair[0]]:
        counts[pair[0]][num] = len([el for el in D[pair[1]] if el >= num]) 
```

**在OP对问题的编辑**之后进行编辑以获得更清晰的问题：

你需要为这个问题构建一个动态编程解决方案（我假设你有一些[DP 算法](http://en.wikipedia.org/wiki/Dynamic_programming)的背景；如果没有，请看一些）。假设您的原始字典有`n`键。然后，您需要三个长度`n`各不相同的字典，例如`M1`、`M2`和`M3`。对于每个键和数字，`M3[key][number]`将存储`number`可以成为元组第三个元素的方式的数量（这将是相同的 1）。`M2[key][number]`将是`number`可以成为元组的第二个元素的方式的数量（这将必须从 动态向后构造`M3`），并且`M1[key][number]`将是`number`可以成为元组的第一个元素的方式的数量。`M1`必须由`M2`. 您的最终解决方案将是`M1`. 我将把 , 和 的更新规则和初始化`M1`留给`M2`你`M3`。

例如，要填写`M1[key][number]`假设中的条目`downkeys`是后面的键集`key`。对于每个`downkey`，您将查看条目`M2[downkey]`并总结`M2[downkey][num2]`where`num2`大于的值`number`。为所有 s 添加所有此类数字`downkey`将为您提供 的条目`M1[key][number]`。因此，这会提示您必须更新 和 的行的`M1`顺序`M2`。

如果你认为这需要做很多工作——嗯，确实如此，但它仍然是多项式的，而不是像笛卡尔积那样的指数。即使是笛卡尔乘积方式 - 您必须首先找到 3 个`n`列表的所有可能组合，然后取乘积，然后过滤它们。那是*极其*昂贵的。动态规划解决方案重用每一步的信息，而不是每次都重新计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:04:21.407

在示例中，您给出的所有字典列表都是预先排序的，因此您可以在调用 itertools.product 之前自己进行一些排序以减少枚举数：

```
def count_sorted(x,y,z):
    from itertools import ifilter, product, imap

    _x = ifilter(lambda k: k<z[-1],x)
    _y = ifilter(lambda k: x[0]<k<z[-1],y)
    _z = ifilter(lambda k: k > x[0],z)

    return sum(imap(lambda t: t[0]<t[1]<t[2], product(_x,_y,_z)))

D = {'a': [15, 20],
     'b': [8],
     'c': [11, 12, 14, 16, 19],
     'd': [7, 9, 17, 18],
     'e': [3, 4, 5, 6, 10, 13],
     'f': [2],
     'g': [1]}

for key1,key2,key3 in itertools.permutations(D.keys(),3):
    print '[%s, %s, %s] has %i sorted combinations'%(key1,key2,key3,count_sorted(D[key1],D[key2],D[key3])) 
```

结果：

```
[a, c, b] has 0 sorted combinations
[a, c, e] has 0 sorted combinations
[a, c, d] has 2 sorted combinations
[a, c, g] has 0 sorted combinations
[a, c, f] has 0 sorted combinations
[a, b, c] has 0 sorted combinations
[a, b, e] has 0 sorted combinations
[a, b, d] has 0 sorted combinations
[a, b, g] has 0 sorted combinations
[a, b, f] has 0 sorted combinations
[a, e, c] has 0 sorted combinations
[a, e, b] has 0 sorted combinations
[a, e, d] has 0 sorted combinations
[a, e, g] has 0 sorted combinations
[a, e, f] has 0 sorted combinations
[a, d, c] has 2 sorted combinations
[a, d, b] has 0 sorted combinations
[a, d, e] has 0 sorted combinations
[a, d, g] has 0 sorted combinations
[a, d, f] has 0 sorted combinations
[a, g, c] has 0 sorted combinations
[a, g, b] has 0 sorted combinations
[a, g, e] has 0 sorted combinations
[a, g, d] has 0 sorted combinations
[a, g, f] has 0 sorted combinations
[a, f, c] has 0 sorted combinations
[a, f, b] has 0 sorted combinations
[a, f, e] has 0 sorted combinations
[a, f, d] has 0 sorted combinations
[a, f, g] has 0 sorted combinations
[c, a, b] has 0 sorted combinations
[c, a, e] has 0 sorted combinations
[c, a, d] has 6 sorted combinations
[c, a, g] has 0 sorted combinations
[c, a, f] has 0 sorted combinations
[c, b, a] has 0 sorted combinations
[c, b, e] has 0 sorted combinations
[c, b, d] has 0 sorted combinations
[c, b, g] has 0 sorted combinations
[c, b, f] has 0 sorted combinations
[c, e, a] has 4 sorted combinations
[c, e, b] has 0 sorted combinations
[c, e, d] has 4 sorted combinations
[c, e, g] has 0 sorted combinations
[c, e, f] has 0 sorted combinations
[c, d, a] has 8 sorted combinations
[c, d, b] has 0 sorted combinations
[c, d, e] has 0 sorted combinations
[c, d, g] has 0 sorted combinations
[c, d, f] has 0 sorted combinations
[c, g, a] has 0 sorted combinations
[c, g, b] has 0 sorted combinations
[c, g, e] has 0 sorted combinations
[c, g, d] has 0 sorted combinations
[c, g, f] has 0 sorted combinations
[c, f, a] has 0 sorted combinations
[c, f, b] has 0 sorted combinations
[c, f, e] has 0 sorted combinations
[c, f, d] has 0 sorted combinations
[c, f, g] has 0 sorted combinations
[b, a, c] has 2 sorted combinations
[b, a, e] has 0 sorted combinations
[b, a, d] has 2 sorted combinations
[b, a, g] has 0 sorted combinations
[b, a, f] has 0 sorted combinations
[b, c, a] has 8 sorted combinations
[b, c, e] has 2 sorted combinations
[b, c, d] has 8 sorted combinations
[b, c, g] has 0 sorted combinations
[b, c, f] has 0 sorted combinations
[b, e, a] has 4 sorted combinations
[b, e, c] has 8 sorted combinations
[b, e, d] has 4 sorted combinations
[b, e, g] has 0 sorted combinations
[b, e, f] has 0 sorted combinations
[b, d, a] has 4 sorted combinations
[b, d, c] has 7 sorted combinations
[b, d, e] has 2 sorted combinations
[b, d, g] has 0 sorted combinations
[b, d, f] has 0 sorted combinations
[b, g, a] has 0 sorted combinations
[b, g, c] has 0 sorted combinations
[b, g, e] has 0 sorted combinations
[b, g, d] has 0 sorted combinations
[b, g, f] has 0 sorted combinations
[b, f, a] has 0 sorted combinations
[b, f, c] has 0 sorted combinations
[b, f, e] has 0 sorted combinations
[b, f, d] has 0 sorted combinations
[b, f, g] has 0 sorted combinations
[e, a, c] has 12 sorted combinations
[e, a, b] has 0 sorted combinations
[e, a, d] has 12 sorted combinations
[e, a, g] has 0 sorted combinations
[e, a, f] has 0 sorted combinations
[e, c, a] has 44 sorted combinations
[e, c, b] has 0 sorted combinations
[e, c, d] has 44 sorted combinations
[e, c, g] has 0 sorted combinations
[e, c, f] has 0 sorted combinations
[e, b, a] has 8 sorted combinations
[e, b, c] has 20 sorted combinations
[e, b, d] has 12 sorted combinations
[e, b, g] has 0 sorted combinations
[e, b, f] has 0 sorted combinations
[e, d, a] has 28 sorted combinations
[e, d, c] has 52 sorted combinations
[e, d, b] has 4 sorted combinations
[e, d, g] has 0 sorted combinations
[e, d, f] has 0 sorted combinations
[e, g, a] has 0 sorted combinations
[e, g, c] has 0 sorted combinations
[e, g, b] has 0 sorted combinations
[e, g, d] has 0 sorted combinations
[e, g, f] has 0 sorted combinations
[e, f, a] has 0 sorted combinations
[e, f, c] has 0 sorted combinations
[e, f, b] has 0 sorted combinations
[e, f, d] has 0 sorted combinations
[e, f, g] has 0 sorted combinations
[d, a, c] has 4 sorted combinations
[d, a, b] has 0 sorted combinations
[d, a, e] has 0 sorted combinations
[d, a, g] has 0 sorted combinations
[d, a, f] has 0 sorted combinations
[d, c, a] has 18 sorted combinations
[d, c, b] has 0 sorted combinations
[d, c, e] has 4 sorted combinations
[d, c, g] has 0 sorted combinations
[d, c, f] has 0 sorted combinations
[d, b, a] has 2 sorted combinations
[d, b, c] has 5 sorted combinations
[d, b, e] has 2 sorted combinations
[d, b, g] has 0 sorted combinations
[d, b, f] has 0 sorted combinations
[d, e, a] has 8 sorted combinations
[d, e, c] has 16 sorted combinations
[d, e, b] has 0 sorted combinations
[d, e, g] has 0 sorted combinations
[d, e, f] has 0 sorted combinations
[d, g, a] has 0 sorted combinations
[d, g, c] has 0 sorted combinations
[d, g, b] has 0 sorted combinations
[d, g, e] has 0 sorted combinations
[d, g, f] has 0 sorted combinations
[d, f, a] has 0 sorted combinations
[d, f, c] has 0 sorted combinations
[d, f, b] has 0 sorted combinations
[d, f, e] has 0 sorted combinations
[d, f, g] has 0 sorted combinations
[g, a, c] has 2 sorted combinations
[g, a, b] has 0 sorted combinations
[g, a, e] has 0 sorted combinations
[g, a, d] has 2 sorted combinations
[g, a, f] has 0 sorted combinations
[g, c, a] has 8 sorted combinations
[g, c, b] has 0 sorted combinations
[g, c, e] has 2 sorted combinations
[g, c, d] has 8 sorted combinations
[g, c, f] has 0 sorted combinations
[g, b, a] has 2 sorted combinations
[g, b, c] has 5 sorted combinations
[g, b, e] has 2 sorted combinations
[g, b, d] has 3 sorted combinations
[g, b, f] has 0 sorted combinations
[g, e, a] has 12 sorted combinations
[g, e, c] has 28 sorted combinations
[g, e, b] has 4 sorted combinations
[g, e, d] has 20 sorted combinations
[g, e, f] has 0 sorted combinations
[g, d, a] has 6 sorted combinations
[g, d, c] has 12 sorted combinations
[g, d, b] has 1 sorted combinations
[g, d, e] has 4 sorted combinations
[g, d, f] has 0 sorted combinations
[g, f, a] has 2 sorted combinations
[g, f, c] has 5 sorted combinations
[g, f, b] has 1 sorted combinations
[g, f, e] has 6 sorted combinations
[g, f, d] has 4 sorted combinations
[f, a, c] has 2 sorted combinations
[f, a, b] has 0 sorted combinations
[f, a, e] has 0 sorted combinations
[f, a, d] has 2 sorted combinations
[f, a, g] has 0 sorted combinations
[f, c, a] has 8 sorted combinations
[f, c, b] has 0 sorted combinations
[f, c, e] has 2 sorted combinations
[f, c, d] has 8 sorted combinations
[f, c, g] has 0 sorted combinations
[f, b, a] has 2 sorted combinations
[f, b, c] has 5 sorted combinations
[f, b, e] has 2 sorted combinations
[f, b, d] has 3 sorted combinations
[f, b, g] has 0 sorted combinations
[f, e, a] has 12 sorted combinations
[f, e, c] has 28 sorted combinations
[f, e, b] has 4 sorted combinations
[f, e, d] has 20 sorted combinations
[f, e, g] has 0 sorted combinations
[f, d, a] has 6 sorted combinations
[f, d, c] has 12 sorted combinations
[f, d, b] has 1 sorted combinations
[f, d, e] has 4 sorted combinations
[f, d, g] has 0 sorted combinations
[f, g, a] has 0 sorted combinations
[f, g, c] has 0 sorted combinations
[f, g, b] has 0 sorted combinations
[f, g, e] has 0 sorted combinations
[f, g, d] has 0 sorted combinations 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:32:30.360

递归解决方案：

```
In [9]: f??
Definition: f(lists, triple)
Source:
def f(lists, triple):
    out = set()
    for i in range(len(lists)):
        for x in lists[i]:
            if len(triple) == 2 and triple[1] < x:
                out.add(triple + (x,))
            elif len(triple) == 0 or triple[0] < x:
                for j in range(i+1, len(lists)):
                    out.update(f(lists[j:], triple + (x,)))
    return out 
```

输入：

```
In [10]: lists
Out[10]: 
[[15, 20],
 [8],
 [11, 12, 14, 16, 19],
 [7, 9, 17, 18],
 [3, 4, 5, 6, 10, 13],
 [2],
 [1]] 
```

输出：

```
In [11]: out = f(lists, ())

In [12]: len(out)
Out[12]: 14

In [13]: out
Out[13]: 
set([(8, 9, 10),
     (8, 12, 18),
     (8, 11, 13),
     (8, 16, 17),
     (15, 16, 17),
     (8, 12, 17),
     (8, 14, 18),
     (15, 16, 18),
     (8, 11, 17),
     (8, 9, 13),
     (8, 14, 17),
     (8, 11, 18),
     (8, 12, 13),
     (8, 16, 18)]) 
```

# solr - 如何在 solr 分片中请求术语组件？

> ID：10747601
> 
> 赞同：3
> 
> 时间：2012-05-25T02:03:44.157
> 
> 标签：solr, lucene

如何在 solr shard 中请求条款组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:10:09.680

检查 SOLR wiki 以获取分布式搜索支持，它从 Solr 3.1 开始可用： [http ://wiki.apache.org/solr/TermsComponent](http://wiki.apache.org/solr/TermsComponent)

# android - 为什么从我的自定义对话框中获取 EditText 内容时会出现错误？

> ID：10747602
> 
> 赞同：0
> 
> 时间：2012-05-25T02:04:08.330
> 
> 标签：android, android-edittext

我有一个自定义对话框，其中包含 EditText 和 Button。在我的对话框中性按钮的 onClick 方法中，我想从输入到 EditText 中的内容创建一个新字符串。

我正在做的是在按下菜单按钮时膨胀菜单。菜单按钮显示带有 2 个选项的 AlertDialogs。当在 AlertDialog 中选择一个选项时，会创建另一个选项，其中包含一个 EditText 询问名称。当我尝试“String name = nameOfEditText.getText().toString();”时出现空指针错误

这是代码

```
 // creation of the dialog
    Builder mBuilder = new AlertDialog.Builder(this);
LayoutInflater inflater = (LayoutInflater)                 this.getSystemService(LAYOUT_INFLATER_SERVICE);
View layout= inflater.inflate(R.layout.custom_dialog, (ViewGroup) findViewById(R.id.RelativeLayout1));

mBuilder.setNeutralButton("Add", new AddOnClickListener());
mBuilder.setView(layout);
Dialog mDialog = mBuilder.create();
mDialog.show();

    nameOfLocalEditText = (EditText) findViewById(R.id.name);

    Button dialogButton = (Button) mDialog.findViewById(R.id.button1);
dialogButton.setOnClickListener(new OnClickListener() {
        @Override
    public void onClick(View v) {
            Intent imp = new Intent();
            imp.setType("file/*");
        imp.setAction(Intent.ACTION_GET_CONTENT);
        imp.addCategory(Intent.CATEGORY_OPENABLE);
        startActivityForResult(imp, 0);
            }
}); 
```

现在这里是 AddOnClickListener() 方法。nameOfLocalEditText 是包含这些方法的类的本地 EditText。

```
 private final class AddOnClickListener implements DialogInterface.OnClickListener {
    public void onClick(DialogInterface dialog, int which) {
        String s = nameOfLocalEditText.getText().toString();
    }
} 
```

谁能告诉我为什么我的应用程序强制在制作 String 时关闭？

这是 custom_dialog 的 xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/RelativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="16dp"
            android:text="Get File" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/button1"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="18dp"
            android:ems="10" >

        <requestFocus />
        </EditText>
    </RelativeLayout> 
```

这是 logcat 错误消息

```
 05-24 23:27:27.166: E/AndroidRuntime(595): FATAL EXCEPTION: main
   05-24 23:27:27.166: E/AndroidRuntime(595): java.lang.NullPointerException
   05-24 23:27:27.166: E/AndroidRuntime(595): at         com.akonwi.listSyllabi.ListSyllabiActivity$AddOnClickListener.onClick(ListSyllabiActivity.ja va:145)
   05-24 23:27:27.166: E/AndroidRuntime(595):   at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
   05-24 23:27:27.166: E/AndroidRuntime(595):   at android.os.Handler.dispatchMessage(Handler.java:99)
   05-24 23:27:27.166: E/AndroidRuntime(595):   at android.os.Looper.loop(Looper.java:137)
   05-24 23:27:27.166: E/AndroidRuntime(595):   at android.app.ActivityThread.main(ActivityThread.java:4424)
   05-24 23:27:27.166: E/AndroidRuntime(595):   at java.lang.reflect.Method.invokeNative(Native Method)
   05-24 23:27:27.166: E/AndroidRuntime(595):   at java.lang.reflect.Method.invoke(Method.java:511)
   05-24 23:27:27.166: E/AndroidRuntime(595):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
   05-24 23:27:27.166: E/AndroidRuntime(595):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
   05-24 23:27:27.166: E/AndroidRuntime(595):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:27:25.397

`mDialog.show();`在您的声明之后定义 EditText 。并使用您的 Dialog 对象查找您的 EditText id，如下所示：

```
mBuilder.setView(layout);
Dialog mDialog = mBuilder.create();
mDialog.show();

nameOfLocalEditText = (EditText) mDialog.findViewById(R.id.name); 
```

现在您应该可以使用 EditText。

**您可以使用我在项目中使用的此代码，而不是警报对话框**：

```
 Dialog myDialog;
myDialog = new Dialog(Activity_ShoppingList.this);
            myDialog.requestWindowFeature(Window.FEATURE_LEFT_ICON);
            myDialog.setContentView(R.layout.custom_dialog);
            myDialog.setTitle("Endre/Slett ingrediens");
            myDialog.setCancelable(true);
            myDialog.setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.edit);
            myDialog.show();

            edtName = (EditText)myDialog.findViewById(R.id.edtname);
            edtqty = (EditText)myDialog.findViewById(R.id.edtqty);
            edtType = (EditText)myDialog.findViewById(R.id.edtType);

            edtName.setText(rName);
            edtqty.setText(rAmm);
            edtType.setText(rType);

             btnNew = (Button) myDialog.findViewById(R.id.btnDelete);
            btnNew.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                        // TODO Auto-generated method stub

                        myDbHelper.DeleteSelDataBase(rName);
                        new AsyncButtonClk().execute(); 
                        myDialog.dismiss();
                    //Toast.makeText(getApplicationContext(), "Row Id : " + Global.shopping_name.get(ARG2) , Toast.LENGTH_SHORT).show();
                    }

            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:20:28.843

同样的[这个问题][1]

试试这个

```
 nameOfLocalEditText = (EditText)layout.findViewById(R.id.name);
  layout.addView(nameOfLocalEditText); 
```

更新：参考[这个链接][2]你可以试试

```
 final Dialog dialog = new Dialog(context);
  dialog.setContentView(R.layout.custom); 
```

使用 dialog.setContentView 而不是膨胀布局应该可以工作。

> 现在我的偏好是使用 AlertDialog，这样我就可以使用中性按钮。我的自定义对话框中已经有一个按钮来发送用户查找文件。我希望中性按钮从 AlertDialog 组件中获取数据

这段代码对我有用：

```
 // creation of the dialog
    Builder mBuilder = new AlertDialog.Builder(this);
    LayoutInflater inflater = (LayoutInflater) this.getSystemService(LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.custom_dialog,
            (ViewGroup) findViewById(R.id.RelativeLayout1));

    mBuilder.setNeutralButton("Add", new AddOnClickListener());
    mBuilder.setView(layout);
    Dialog mDialog = mBuilder.create();
    mDialog.show();

    nameOfLocalEditText = (EditText) layout.findViewById(R.id.editText1);

    Button dialogButton = (Button) layout.findViewById(R.id.button1);
    dialogButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent imp = new Intent();
            imp.setType("file/*");
            imp.setAction(Intent.ACTION_GET_CONTENT);
            imp.addCategory(Intent.CATEGORY_OPENABLE);
            startActivityForResult(imp, 0);
        }
    });

   private final class AddOnClickListener implements DialogInterface.OnClickListener {
    public void onClick(DialogInterface dialog, int which) {
        String s = nameOfLocalEditText.getText().toString();
        Log.d(TAG, s);
    }
} 
```

# javascript - CSS z-index/javascript 在三大浏览器中的工作方式不同

> ID：10747603
> 
> 赞同：1
> 
> 时间：2012-05-25T02:04:12.463
> 
> 标签：javascript, html, css

在这里它是托管的，所以你可以看到行为。（只有前两个键，最左边的白键和旁边的黑键）

```
http://23.23.184.26/miller/cssz/main.html 
```

在chrome (19.-) 中*完美*工作 在 Firefox (12.0) 中产生蓝色光环 (选择？) 框在 IE9中*根本*不起作用

有什么建议吗？

```
<html>

    <head>
        <style type="text/css">
            #main {
                position:absolute;
                left:0px;
                top:0px;
                z-index:100
            }
            #key1 {
                position:absolute;
                left:0px;
                top:0px;
                z-index:98
            }
            #key2 {
                position:absolute;
                left:0px;
                top:0px;
                z-index:98
            }
            #key1zone {
                position:absolute;
                width:50px;
                height:75px;
                top:175px;
                left:55px;
                z-index:200
            }
            #key2zone {
                position:absolute;
                width:50px;
                height:75px;
                top:100px;
                left:85px;
                z-index:200
            }
            /*uncomment this to show button zones*/
            #key1zone:hover, #key2zone:hover {
                border:1px solid red;
            }
        </style>
        <script type="text/javascript">
            function keyDown(key) {
                document.getElementById(key).style.zIndex = "102";
            }
        </script>
        <script type="text/javascript">
            function keyUp(key) {
                document.getElementById(key).style.zIndex = "98";
            }
        </script>
    </head>

    <body>
        <div id="key1zone" onMouseDown="keyDown('key1')" onMouseUp="keyUp('key1')"
        onMouseOut="keyUp('key1')"></div>
        <div id="key2zone" onMouseDown="keyDown('key2')" onMouseUp="keyUp('key2')"
        onMouseOut="keyUp('key2')"></div>
        <img id="main" src="0.gif" width="506" height="319">
        <img id="key1" src="1.gif" width="506" height="319">
        <img id="key2" src="2.gif" width="506" height="319">
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:04:14.263

将指向不存在图像的背景图像添加到 div：-

```
#key1zone {
    background-image:url('nosuchimage.jpg');
    Z-INDEX: 200; POSITION: absolute; WIDTH: 50px; HEIGHT: 75px; TOP: 175px; LEFT: 55px
} 
```

这解决了关键问题。IE8 测试通过。

要解决 Firefox 中的光环问题，请将所有 IMG 替换为 DIV：-

```
#main {
    background-image:url('0.gif');
    Z-INDEX: 100; POSITION: absolute; TOP: 0px; LEFT: 0px;
    width:506px;height:319px;
}
#key1 {
    background-image:url('1.gif');
    Z-INDEX: 98; POSITION: absolute; TOP: 0px; LEFT: 0px;
    width:506px;height:319px;
}
#key2 {
    background-image:url('2.gif');
    Z-INDEX: 98; POSITION: absolute; TOP: 0px; LEFT: 0px;
    width:506px;height:319px;
}
<div id="main"></div>
<div id="key1"></div>
<div id="key2"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:17:52.410

我会提出以下建议。它使用更短的 CSS、一些内联样式、[JavaScript 预加载图像](https://stackoverflow.com/questions/3646036/)，并且没有事件处理程序属性，而是通过脚本设置它们。另外，我给了`#image`一个[背景图片](http://ajaxian.com/archives/tip-using-a-background-image-on-an-image)，应该避免任何闪烁。你也可以使用透明的keydown-images。

```
<html>
    <head>
        <style type="text/css">
            #main {
                position:relative;
            }
            .keyzone {
                position:absolute;
                z-index:1; /* one above is enough */
                width:50px; height:75px; /* all keys sharing their dimensions? */
            }
            .keyzone:hover {
                background: red;
                opacity: 0.3; /* or use rgba() for modern browsers */
            }
            #image {
                background: url('0.gif'); /* avoid flicker */
            }
        </style>
        <script type="text/javascript">
            function load(path) {
                 var img = new Image();
                 img.src = path;
                 return img;
            }
            var images = {
                // element id := Image to show
                key1: load("0.gif"),
                key2: load("1.gif")
            }; /* use a loop when everything is the same - but you
                  can also use more descriptive names with this map solution */
        </script>
    </head>

    <body>
        <div id="main">
            <img id="image" src="0.gif" width="506" height="319">
            <div id="key1" class="keyzone" style="top:175px; left:55px; /*width:50px; height:75px;*/"></div>
            <div id="key2" class="keyzone" style="top:100px; left:85px; /*width:50px; height:75px;*/"></div>
        </div>
        <script type="text/javascript">
            // I'm too lazy to use a onDOMready listener, so I just put the script after the elements
            var img = document.getElementById("image");
            function keyUp() {
                img.src = "0.gif";
            }
            function prevent(e) {
                e.preventDefault();
                return false;
            }
            function makeKeyHandler(keyEl, src) {
                keyEl.onmousedown = function keyDown() {
                   img.src = src;
                };
                keyEl.onmouseup = keyEl.onmouseout = keyUp; // resetter
                keyEl.onclick = prevent; // no selection on doubleclick etc.
            }
            for (var id in images) // see object declaration above
                makeKeyHandler(document.getElementById(id), images[id].src);
        </script>
    </body>
</html> 
```

有关工作变体，请参见[http://jsfiddle.net/LSgF4/](http://jsfiddle.net/LSgF4/)

# asp.net - Application_start 函数和 IIS7 进程模型空闲超时设置

> ID：10747606
> 
> 赞同：1
> 
> 时间：2012-05-25T02:04:32.543
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, iis-7, application-pool

我有一个 asp.net 应用程序，并且在应用程序启动函数中调用了一些任务。这些任务`while(true)` 在计算完成后运行并休眠 x 时间。然而，在部署应用程序后，我检查了这些任务生成的日志文件，发现它们运行得比它们应该运行的要多。

事实上，每当有人在一段时间不活动后访问该站点时，它们都会运行。

我正在查看应用程序池设置，发现进程模型空闲超时设置为 20 分钟。

这会导致问题吗？即应用程序是否会在 20 分钟后重新启动，从而导致再次调用 application_start 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:07:22.337

> 这会导致问题吗？

对，就是这样。此设置意味着如果在给定时间内您的站点上没有任何活动（没有 HTTP 请求），IIS 将简单地从内存中卸载应用程序域。然后进入的下一个请求将启动一个新的应用程序实例，Application_Start 将再次被命中。

请记住，这不是 IIS 可能会卸载您的应用程序的唯一条件。例如，如果进程达到特定的 CPU 或内存使用阈值，也会发生这种情况。这些也是可配置的。

`bin`如果文件夹中的某些文件被修改或`web.config`或`Global.asax`也被修改，它也会重新启动。但这一次不是 IIS 将卸载应用程序，而是 ASP.NET 运行时侦听这些文件中的更改。但在所有情况下，它都会导致`Application_Start`在下一个请求时被触发。

# android - SQLiteDatabase 跳过？

> ID：10747613
> 
> 赞同：0
> 
> 时间：2012-05-25T02:05:17.330
> 
> 标签：android

在我的活动的 onCreate 中给出以下代码：

```
 super.onCreate(savedInstanceState);

        setContentView(R.layout.logmenu);

        //DEBUG CODE
        new DBAdaptor(this).dropDatabase();

        if (!DBAdaptor.checkDataBase() ) {
            showDialog(DIALOG_NO_DB);
        }

        seasonSpinner = (Spinner) findViewById(R.id.seasonspinner);

        List<String> seasons = new ArrayList<String>(); 
        SQLiteDatabase db = new DBAdaptor(this).getReadableDatabase();

       /* //Select _key FROM seasons;
        Cursor results = db.query("seasons", new String[] {"_key"}, null, null, null, null, null);
        results.moveToFirst();
        do {
            String season = results.getString(results.getColumnIndex("_key"));
            seasons.add(season);
        } while (results.moveToNext());*/ 
```

如果我按所示运行它，并且将填充微调器的部分注释掉，则会发生以下情况：

1.  视图呈现。无形中，上次运行的数据库被删除，因此下一次检查将失败
2.  弹出一个对话框，询问我是否要初始化数据库。我点击是。
3.  数据库初始化运行（涉及与远程服务器的通信）
4.  数据库现在已填充并可以使用
5.  控制返回到这个视图，空荡荡的旋转器很孤独。

但是，如果我取消注释该块，这些步骤都不会运行。相反，我得到一个 SQLiteException: "no such table: seasons: , while compile: SELECT _key FROM seasons"

为什么不执行步骤 1-5？为什么它会在我准备好之前跳转并尝试编译该查询？以及如何防止这种情况并强制它按顺序执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:13:56.950

我认为您的问题是您创建的对话框不会阻止该方法的其余部分，因此您仍在尝试在用户告诉应用程序（通过对话框）创建数据库之前填充微调器。

# linux - 编写脚本删除服务器上 7 天前的文件

> ID：10747620
> 
> 赞同：0
> 
> 时间：2012-05-25T02:06:47.073
> 
> 标签：linux, shell, unix

我正在 Linux 服务器上上传一个文件，我希望这些文件在一周后被删除。基本上我想编写一个每天运行的脚本并删除 7 天前的文件。我还能在这里做什么？如果有人能指导我写剧本。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:41:10.463

运行`crontab -e`，转到最后一行并添加如下一行：

```
0 9 * * *  find /absolute/path/ -type f -name \*.ext -ctime +7 -print0 | xargs -0 rm 
```

`.ext`文件扩展名在哪里。这将在每天上午 9 点运行该命令。查看同一文件中的注释以获取更多示例。

但请先阅读`find`,`xargs`和`rm`手册页。

```
man find 
man xargs
man rm
man crontab 
```

我希望你知道，在一周内你会发现你有零个文件（如果没有复制新文件）。**不要用它来清理备份。**

# c - 预期的声明错误（c错误）

> ID：10747621
> 
> 赞同：2
> 
> 时间：2012-05-25T02:06:51.237
> 
> 标签：c

这是我的代码

```
#include<stdio.h>

int main( int argc ,char *argv[] )
{
    FILE *fp;
    void filecopy( FILE * a, FILE *b )

    if (argc == 1)
    {
        filecopy(stdin,stdout);
    }

    else 
    {
        while(--argc > 0)
        {
            if ((fp = fopen(*++argv,"r")) == NULL)
            {   
                printf("no open".*argv);
            }
            else
            {
                filecopy(fp,stdout);
                fclose(fp);
            }
        }
    }
    return 0;
}

void filecopy ( FILE *ifp ,FILE *ofp )
{
    int c;
    while ( (c = getc(ifp)) != EOF)
    {
        putc(c , ofp);
    }
} 
```

这些是我的错误：

```
con.c: In function 'filecopy':
con.c:8: error: expected declaration specifiers before 'if'
con.c:13: error: expected declaration specifiers before 'else'
con.c:29: error: expected declaration specifiers before 'return'
con.c:30: error: expected declaration specifiers before '}' token
con.c:33: error: expected '=', ',', ';', 'asm' or '__attribute__' before '{' token
con.c:39: error: expected '{' at end of input
con.c: In function 'main':
con.c:39: error: expected declaration or statement at end of input 
```

为什么我收到这些错误请告诉我？谢谢苏丹舒

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T02:10:11.470

您在这一行的末尾缺少一个分号：

```
void filecopy( FILE * a, FILE *b ) 
```

这应该是

```
void filecopy( FILE * a, FILE *b ); 
```

因为这是一个函数原型。

此外，此行不合法 C：

```
printf("no open".*argv); 
```

这可能应该是这样的

```
printf("no open"); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T02:11:11.840

声明需要以分号结尾

```
void filecopy( FILE * a, FILE *b ); 
```

（这是主函数内部的声明，而不是后面的函数定义。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T02:19:32.377

**您缺少一个分号。**

```
void filecopy( FILE * a, FILE *b );  /* Put semi-colon on the end! */ 
```

* * *

这一行：

```
printf("no open".*argv); 
```

没有意义。你是什​​么意思？

# jquery - 对于这个 dom 元素，Jquery toggleClass 运行多次而不是一次

> ID：10747624
> 
> 赞同：1
> 
> 时间：2012-05-25T02:07:35.757
> 
> 标签：jquery, jquery-ui

我有一个输出一堆 div 的 mvc 视图。都有一类userproject。那是 div 上唯一的类。但是，当我调用 toggleClass 时，它应该将 div 从一个小 div 动画到一个大 div 以便查看所有文本。动画在同一 div 上的页面上为每个 div 运行一次。

jQuery

```
$(document).ready(function () {

    $(".userproject").click(function (e) {
        $(this).toggleClass("userprojectclicked", "slow");
    });

}); 
```

css

```
.userproject
{
    float: left;
    border:2px solid;
    border-radius:5px;
    width: 270px;
    padding: 15px;
    margin: 5px;
    position: relative;
    background-color: green;
    overflow:hidden;
}

.userprojectclicked
{
    width: 900px;
    background-color: white;
    border-color: green;
} 
```

在循环中查看下面的 div 输出。

```
<div class="userproject">

<p>@Html.LabelFor(m => @Model.Name) : @Html.DisplayFor(m => Model.Name)</p>
<p>@Html.LabelFor(m => @Model.Description) : @Html.DisplayFor(m => Model.Description)</p>
<p>@Html.LabelFor(m => @Model.UserId) : @Html.DisplayFor(m => Model.UserId)</p>
<p>@Html.LabelFor(m => @Model.CategoryId) : @Html.DisplayFor(m => Model.CategoryId)</p>

</div> 
```

问题是动画为页面上的每个 div 发生一次......但它发生在同一个 div 上，所以它变大然后变小......大然后小......等等。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T16:01:19.107

jquery 位于一个局部视图中，该视图在循环内的常规视图中呈现。这意味着在原始视图中放置了许多 jquery 代码副本。因此，jquery 的每个副本只运行一次，但由于页面的结构，我渲染了许多函数。将来我可能不会在我的部分视图中包含 jquery / javascript。

# silverlight - 在应用程序 wp7 中共享照片

> ID：10747625
> 
> 赞同：0
> 
> 时间：2012-05-25T02:07:41.267
> 
> 标签：silverlight, windows-phone-7, share, photo

从“图片”应用程序共享照片是如此简单，有没有办法为另一个应用程序使用相同的共享结构。基本上我正在制作一个可以让你操作图片的应用程序，我希望我的用户能够分享到 facebook、twitter 等。例如，当你转到你的图片并按下“分享...”时菜单项，有没有办法为我的应用程序使用这个共享任务？那不是通过所有这些sdk。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:11:09.173

不幸的是，当前 (7.1) SDK 中没有提供图像共享的 API。如果您不想复制共享功能（我建议您不要），我会说您有两个选择；

1.  在您处理完照片后，允许用户将其保存回他们的`MediaLibrary`（参见：[编码 JPEG 文件并将其添加到图片库](http://msdn.microsoft.com/en-us/library/ff769549%28v=VS.92%29.aspx "编码 JPEG 文件并将其添加到图片库") 作为示例）。然后，用户可以从这里共享图像。
2.  在您的应用程序中将图像上传到图像共享站点，检索已上传图像的链接，然后提示用户与该图像共享链接`ShareLinkTask`（请参阅MSDN 上的[ShareLinkTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.sharelinktask%28v=vs.92%29.aspx "分享链接任务")）

# php - 如何防止 curl_multi_select 挂在 osx 上？

> ID：10747626
> 
> 赞同：3
> 
> 时间：2012-05-25T02:07:58.970
> 
> 标签：php, macos, curl

我的应用程序正在使用 curl_multi_select 来等待 curl 调用完成。curl_multi_select 中的默认超时设置为 1 秒。对于给定的 url，此调用在 Linux 上立即返回，但在 OSX 上等待完整的 1 秒超时。

不幸的是，在我的情况下，更改代码中的超时并不是一个真正的选择——我需要一种方法来更改机器配置或使用不同的 php 模块/exes。

linux 和 osx 机器都运行 PHP 5.3.8。OSX 处理套接字和 select() 调用本身的方式似乎与 Linux 不同。

这是 curl 调用的作用：

```
'url' => string 'HTTP://172.19.105.171:8070  <SNIPPED> '... (length=1439)
...
'namelookup_time' => float 1.001309 
```

下面是使用 dtruss 的 select 调用的样子：

```
sudo dtruss -a -n httpd > dtruss.txt.2 2>&1
  PID/THRD  RELATIVE  ELAPSD    CPU SYSCALL(args)      = return
...
21524/0x17136:     14369      37     31 connect_nocancel(0xA, 0x7FFF649DB9F8, 0x6A)    = 0 0
21524/0x17136:     14383      15     10 sendto_nocancel(0xA, 0x7FAA786E4AD0, 0x1C)     = 28 0
20285/0x8d8d:    755608 1001045     16 select(0x0, 0x0, 0x0, 0x0, 0x7FFF64353A70)    = 0 0 
```

请注意，选择调用需要 1001045 微秒，即 1 秒。

那么 - 这与 OSX 处理套接字的方式有关吗？我可以用 PHP/Curl 中的不同构建选项来改变它吗？或者我可以改变我的网络配置以使 select() 调用更快地返回？

这是我在缩小到当前问题之前遇到的原始问题：
[PHP/curl: namelookup_time/dns slowing requests](https://stackoverflow.com/questions/10731877/php-curl-namelookup-time-dns-slowing-requests)

其他研究： http:
[//www.somacon.com/p537.php](http://www.somacon.com/p537.php)
[http://svn.php.net/viewvc/php/php-src/trunk/ext/curl/multi.c?view=markup](http://svn.php.net/viewvc/php/php-src/trunk/ext/curl/multi.c?view=markup) (curl_multi_select source代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:34:50.137

你可以试试

```
usleep(30000); // 0.03s 
```

代替

```
curl_multi_select($mh); 
```

你可能需要玩一些微秒，但我认为 0.03s 足以满足基本使用。

您还必须自己实施超时。可以通过写入`microtime(true)`变量并将其与每次循环调用的当前时间进行比较来完成。

# winforms - C# WinForms 动态添加 ToolStripMenuItem。为什么这不起作用？

> ID：10747627
> 
> 赞同：1
> 
> 时间：2012-05-25T02:08:34.833
> 
> 标签：winforms, c#-4.0

我创建了一个 ToolStripMenuItem 的实例，并希望将其作为子菜单添加到我的表单上的两个不同菜单（添加到上下文菜单和菜单条）。我知道如何让它工作，但我想知道为什么这不起作用。

```
 private static string[] parameters = { "itemOne", "itemTwo", "itemThree"};

    private void MainForm_Load(object sender, EventArgs e)
    {
        foreach (string s in parameters)
        {
            ToolStripMenuItem addThis = new ToolStripMenuItem(s);
            existingToolStripMenuItem.DropDownItems.Add(addThis);
            existingMenuItem.DropDownItems.Add(addThis);
        }
    } 
```

我注意到如果我注释掉其中一个 DropDownItems.Add() 语句或者如果我创建两个单独的实例，它工作正常。为什么这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:20:26.427

如果您了解 的实现`ToolStripItemCollection.Add`，您会发现第二个调用从`existingMenuItem.DropDownItems.Add(addThis);`中删除。`addThis``existingToolStripMenuItem.DropDownItems`

因此，学习如何使用 ILSpy 等反编译器对于 .NET 开发人员来说至关重要，

[http://wiki.sharpdevelop.net/ilspy.ashx](http://wiki.sharpdevelop.net/ilspy.ashx)

如您所见，一种可能的解决方法是创建两个单独的实例。如果打算将两个实例连接在一起，可以使用 ActionList，

[http://www.lextm.com/2012/04/packaging-crads-actionlist-for-net-via-nuget/](http://www.lextm.com/2012/04/packaging-crads-actionlist-for-net-via-nuget/)

# php - 标记的所有插件在哪里？

> ID：10747630
> 
> 赞同：2
> 
> 时间：2012-05-25T02:09:01.017
> 
> 标签：php, cakephp, plugins, cakephp-2.1

经过数十次令人沮丧的尝试在 CakePHP 2.1 版中制作标记系统后，我开始寻找一个插件或一些示例行为来获得我想要的效果，但我能找到的每一个都是用旧版本（1.2 或 1.3 ）。我已经在网上搜索了大约一个星期，但在这方面没有任何进展。

这是我想要的：问题 HABTM 标签。在问题添加表单中，其中一个字段是以逗号分隔的所需标签列表。它拆分标签，已经存在的标签仅在 questions_tags 表中引用，并成为问题的子问题，同时创建无法识别的标签。

任何与 CakePHP 2.1 一起工作的完整示例或插件将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:37:04.150

[https://github.com/cakedc/tags](https://github.com/cakedc/tags)查看 2.0 分支

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:19:30.343

我也尝试了很长时间，这就是我最终要做的：

1.  使用常规的 HABTM 关系，就像您一样，例如 Question HABTM Tag
2.  使用 cake bake 生成表单/字段和 UI。
3.  使用[Chosen jQuery 库](http://harvesthq.github.com/chosen/)使我的所有 HABTM 关系看起来与您在 Facebook 等网站上看到的“标记”功能完全一样。

这个 SO 答案也可能对您有所帮助：[https ://stackoverflow.com/a/7231879/1203129](https://stackoverflow.com/a/7231879/1203129)

简而言之：我只是使用带有 jQ​​uery UI 的 CakePHP HABTM 关系来进行标记工作。

# google-apps-script - Google Docs 脚本错误 - 未终止的字符串文字。（第 4 行）

> ID：10747631
> 
> 赞同：0
> 
> 时间：2012-05-25T02:09:25.900
> 
> 标签：google-apps-script, google-sheets

正在使用我已经使用了一段时间的公式来查找地址之间的距离作为函数来绕过谷歌电子表格中的 50 个导入 xml 限制。- 导入 xml 字符串作为谷歌文档中的公式工作得很好，但是我在调​​试时不断收到“未终止的字符串文字。（第 4 行）”错误，我发现清除它的唯一方法是删除之间的所有内容内部 () 。任何帮助或想法将不胜感激。

```
function findkm(c) { 
  var y = 0;

  y = INDEX(SORT(ImportXML("http://maps.google.com/maps/api/directions/xmlorigin="&c&"&destination="&d&"&sensor=false&units=metric";"//distance");1;FALSE);1;2);
  return y;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:12:35.037

假设`c`and`d`是变量并且这整个事情是一个函数调用，尝试`&`用`+`和`;`替换`,`。像这样的东西：

```
y = INDEX(SORT(ImportXML("http://maps.google.com/maps/api/directions/xmlorigin="+c+"&destination="+d+"&sensor=false&units=metric","distance"),1,FALSE),1,2); 
```

# java - Spring security如何允许匿名访问大多数限制某些操作的站点

> ID：10747633
> 
> 赞同：3
> 
> 时间：2012-05-25T02:09:31.440
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-security

我希望有与 Stack Overflow 类似的行为，您可以在其中匿名查看大部分站点，并且只需要用户角色/身份验证即可执行某些操作。基本上是匿名读取，写入受限。我希望我能做的是指定匿名访问我的 security-config.xml 并注释需要适当用户角色的各种方法。配置：

```
<global-method-security secured-annotations="enabled" />

<http auto-config='true'>
    <intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <http-basic />
</http> 
```

方法声明

```
 @Secured("ROLE_USER")
    @RequestMapping(value = "/{estabID}", method = RequestMethod.GET)
    public ModelAndView getEstablishmentPage(@PathVariable String estabID) { .... } 
```

但是，没有提示我使用此配置提供基本身份验证凭据。如果我将配置中的访问属性更改为 ROLE_USER 一切都按预期工作，我将面临身份验证挑战。

默认情况下，通过经过身份验证的用户对某些操作进行匿名访问的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:53:09.870

正如卢克泰勒在他的评论中提到的，这个问题是通过遵循[这个常见问题解决的](http://static.springsource.org/spring-security/site/faq/faq.html#faq-method-security-in-web-context)

# python - 代码错误：“返回”外部函数

> ID：10747635
> 
> 赞同：1
> 
> 时间：2012-05-25T02:09:37.753
> 
> 标签：python, excel

我不知道为什么。我只想将 Excel 文件读入 Python 代码。这些代码有什么问题？我需要帮助。谢谢！
#test2.py

```
import xlrd

fname = "sample.xls"
bk = xlrd.open_workbook(fname)
shxrange = range(bk.nsheets)
try:
    sh = bk.sheet_by_name("Sheet1")
except:
    print "no sheet in %s named Sheet1" % fname
    return None

nrows = sh.nrows
ncols = sh.ncols
print "nrows %d, ncols %d" % (nrows,ncols)

cell_value = sh.cell_value(1,1)
print cell_value

row_list = []
for i in range(1,nrows):
    row_data = sh.row_values(i)
    row_list.append(row_data) 
```

错误是：

```
'return' outside function (D:/pdf-ex/test2.py,line 10) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T02:13:56.913

您正在使用`return`第 10 行中的语句 ..`return`应该在函数*内部*使用，您的代码不在函数内部。

添加

```
import sys 
```

在程序的最开始和第 10行*替换*为`return None`

```
sys.exit(-1) 
```

有关[return](http://docs.python.org/reference/simple_stmts.html#the-return-statement)和[sys.exit()的更多信息](http://docs.python.org/library/sys.html?highlight=exit#sys.exit)

# jpa - 使用 GenerationType.Identity 的 EclipseLink 顺序编号 ID

> ID：10747642
> 
> 赞同：0
> 
> 时间：2012-05-25T02:11:10.010
> 
> 标签：jpa, primary-key, eclipselink, generator

扩展这个问题[为什么 eclipselink 每次重新启动时都会消耗整个 allocationSize？](https://stackoverflow.com/questions/4037669/why-does-eclipselink-consume-the-whole-allocationsize-each-time-its-rebooted) 我想知道这个问题的正确解决方案是什么，该帖子中的唯一答案建议切换到`IDENTITY`我已经完成但我看不到变化的策略。50 的分配大小仍然有效。有没有人有关于如何基于每个实体（表）而不是所有表都可以访问的单个序列来生成顺序标识符（1、2、3）的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:22:13.083

为此，您有 TableGenerator 注释。

```
@Entity
public class Employee {

    @Id
    @TableGenerator(name="TABLE_GEN", table="SEQUENCE_TABLE", pkColumnName="SEQ_NAME",
        valueColumnName="SEQ_COUNT", pkColumnValue="EMP_SEQ", allocationSize = 500, initialValue = 1)
    @GeneratedValue(strategy=GenerationType.TABLE, generator="TABLE_GEN")
    private long id;
    ...
}

@Entity
    public class PaySlip {

        @Id
        @TableGenerator(name="SECOND_TABLE_GEN", table="SECOND_SEQUENCE_TABLE", pkColumnName="SEQ_NAME",
            valueColumnName="SEQ_COUNT", pkColumnValue="SECOND_EMP_SEQ", allocationSize = 500, initialValue = 1)
        @GeneratedValue(strategy=GenerationType.TABLE, generator="SECOND_TABLE_GEN")
        private long id;
        ...
    } 
```

确保所有*名称*/*table* 和*pkColumnValue*字段值都是唯一的。

**参考**

*   [序列策略](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Sequence_Strategies)

# php - 文件夹和文件需要 775、664 权限，而被 755 和 644 卡住

> ID：10747646
> 
> 赞同：1
> 
> 时间：2012-05-25T02:11:49.347
> 
> 标签：php, apache, centos, centos6

> **可能重复：**
> [mkdir() 未将 chmod 设置为 0777](https://stackoverflow.com/questions/8053341/mkdir-is-not-setting-chmod-to-0777)

我正在运行 LAMP 服务器并不断遇到文件权限问题。我需要能够以编程方式创建权限为 775 的目录和权限为 664 的文件。我创建了一个`www-pub`组并设置了`/var/www/html`to`root:www-pub`和我的所有权`chmod 2775 /var/www`（根据[这个问题](https://serverfault.com/questions/6895/whats-the-best-way-of-handling-permissions-for-apache2s-user-www-data-in-var)的接受答案。）但是，当我使用 PHP 创建目录和文件（以 user 身份运行`apache`，我添加到 group `www-pub`），目录的权限为 755，文件的权限为 644。

我的 PHP 代码明确地将权限设置为 775（例如：`mkdir($someDir, 0775)`但这似乎没有什么区别。

但是，当我通过 SFTP 连接时（作为与 不同的用户`apache`，但仍然是 的成员`www-group`），我可以将目录创建为 775，将文件创建为 664。

如何确保创建的目录和文件具有适当的权限？

注意：我正在运行 CentOS 6

# function - 如何在 MATLAB 中将函数作为输出值返回？

> ID：10747655
> 
> 赞同：11
> 
> 时间：2012-05-25T02:13:37.537
> 
> 标签：function, matlab, return

我正在写一个函数`makeFunction(data)`。我希望它返回一个函数，而不是矩阵、向量或标量。我该怎么做呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T02:21:57.870

使用函数句柄。

```
function f = functionReturner(u)
% creates the function x.^u to return as an example
f = @(x) x.^u; 
```

如果我保存这个函数，然后调用functionReturner，参数本身就是一个函数。

```
f = functionReturner(3);
f(2.5)
ans =
       15.625 
```

您可以很容易地验证 15.625 确实是 2.5^3。

# spring - 带有前端控制器的 Spring MVC

> ID：10747658
> 
> 赞同：0
> 
> 时间：2012-05-25T02:14:20.010
> 
> 标签：spring, model-view-controller, front-controller

我正在使用带有 multiActionController 的 MVC 开发 Web 服务器。但是，现在我想用前端控制器处理任何请求（ **/* ）。**之后，这个 Front Controller 会将这个请求转发给 ModelAndView 中的 View。但是，用谷歌搜索了很多次后，我仍然不知道如何实现它。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:43:09.337

在这种情况下，您需要使用注释定义一个控制器类**@RequestMapping("/")** 和一个函数，该函数将捕获相同映射的 GET 请求，并且您可以从该函数返回您想要返回的任何模型和视图。

希望这对您有所帮助。

干杯。

# php - 如果未找到结果，则显示（消息）

> ID：10747661
> 
> 赞同：1
> 
> 时间：2012-05-25T02:14:38.393
> 
> 标签：php, sql, error-handling, pear

如果在搜索查询中未找到任何结果，则尝试显示消息。

这是我的代码的一个简短示例。

```
$sql = "SELECT * FROM details WHERE ID =1"

$res =& $db->query($sql);
if (PEAR::isError($res)) {
    die($res->getMessage());
}

while($row = $res->fetchRow())
{
     echo 'results'
    { 
```

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T02:19:26.133

`DB_result`有一个名为 的方法`numRows()`，因此您可以检查

`if($res->numRows() == 0)`

[http://pear.php.net/package/DB/docs/latest/DB/DB_result.html#methodnumRows](http://pear.php.net/package/DB/docs/latest/DB/DB_result.html#methodnumRows)

> 获取结果集中的行数
> 
> 返回：行数。失败时的 DB_Error 对象。

而且您不必担心，`DB_Error`因为它已经在

`PEAR::isError($res)`

# jquery - 使用 JSON 的彩盒库

> ID：10747665
> 
> 赞同：0
> 
> 时间：2012-05-25T02:15:36.190
> 
> 标签：jquery, json, colorbox

一直玩这个

尝试使用 Colorbox 加载通过 JSON 调用加载 URL 的图像库，而不在主页上显示图像

[在http://www.jacklmoore.com/demo/flickr.html](http://www.jacklmoore.com/demo/flickr.html)上浏览了 flickr 的示例

尝试了许多路线后，我的代码已半使用

```
var links = $()
    ,link
    ,img
;

$.getJSON('http://URL/json.json', function(data) {

    $.each(data, function(index, photo) {
        link = $('<a/>', {
            href: photo.url
            ,title: photo.name
        });

        img = $('<img/>').attr({
            src: photo.url
            ,alt: photo.name
        }).appendTo(link);

        links = links.add(link);
    });

    $('#gallery-holder').html(links);
});

$.colorbox({
    rel: 'gallery'
    ,inline: true
    ,href: '#gallery-holder'
});

/*
$.colorbox({
    html:links
    ,rel: 'gallery'
    ,inline: true
});
*/ 
```

JSON看起来像

```
[
   {
      "url":"http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-1_large.jpg",
      "name":"1420 Magnolia (1)"
   },
   {
      "url":"http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-10_large.jpg",
      "name":"1420 Magnolia (10)"
   },
   {
      "url":"http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-11_large.jpg",
      "name":"1420 Magnolia (11)"
   }
] 
```

构建隐藏的 div

进入

```
<div style="display: none;" id="gallery-holder">
    <a href="http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-1_large.jpg" title="1420 Magnolia (1)">
        <img src="http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-1_large.jpg" alt="1420 Magnolia (1)">
    </a>
    <a href="http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-10_large.jpg" title="1420 Magnolia (10)">
        <img src="http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-10_large.jpg" alt="1420 Magnolia (10)">
    </a>
    <a href="http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-11_large.jpg" title="1420 Magnolia (11)">
        <img src="http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-11_large.jpg" alt="1420 Magnolia (11)">
    </a>
</div> 
```

但是，当我在控制台中运行代码时，它会显示一个颜色框，当我尝试将对象作为内联 HTML 传递时，它会将容器 div 作为隐藏元素保存，它什么也不显示

好奇是否有人知道如何将隐藏 div 的内部 HTML 传递到颜色框以解析为画廊？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:54:14.103

您不希望隐藏 div 中的链接。您希望显示链接，然后颜色框将显示 href 值（图像）。

如果您仔细查看示例，您会发现正在发生的事情是链接添加了缩略图，然后将这些链接添加到数组中。然后对数组进行颜色框处理。Colorbox 拦截链接点击，而不是加载图像（在 href 中），图像显示在 colorbox 中。

有几种方法可以解决这个问题，但图片链接是最简单的。为了实现你想要的，代码应该是这样的：

```
var links = $(), link;

$.getJSON('http://URL/json.json', function(data) {

    $.each(data, function(index, photo) {
        link = $('<a/>', {
            href: photo.url,
            title: photo.name,
            text: photo.name
        });

        links = links.add(link);
    });
});

links.colorbox({rel:'gallery', speed:0});

$('#gallery-holder a').append(links); 
```

HTML 应如下所示：

```
​&lt;div id="gallery-holder"></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

结果应该是这样的：

```
<div id="gallery-holder">
    <a href="http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-1_large.jpg" title="1420 Magnolia (1)" class="cboxElement">1420 Magnolia (1)</a>
    <a href="http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-10_large.jpg" title="1420 Magnolia (10)" class="cboxElement">1420 Magnolia (10)</a>
    <a href="http://s3.amazonaws.com/ACCOUNT/media/photos/1420-magnolia-11_large.jpg" title="1420 Magnolia (11)" class="cboxElement">1420 Magnolia (11)</a>
</div> 
```

如果您有缩略图，则可以使用这些缩略图而不是文本。

只是为了向您展示它是如何工作的，我创建了一个[jsfiddle](http://jsfiddle.net/xhPEX/2/)。您包含的图像路径是假的（我相信您知道）所以我只是使用了随机图像，但是如果您将小提琴替换为真实的图像路径，您可以看到它的实际效果。

# python - 在 Python 中导入 JSON 并删除标头

> ID：10747668
> 
> 赞同：0
> 
> 时间：2012-05-25T02:16:37.270
> 
> 标签：python, json, csv

我正在尝试在 Python 中为 Kiva 编写一个简单的 JSON 到 CSV 转换器。我正在使用的 JSON 文件如下所示：

```
{"header":{"total":412045,"page":1,"date":"2012-04-11T06:16:43Z","page_size":500},"loans":[{"id":84,"name":"Justine","description":{"languages":["en"], REST OF DATA 
```

问题是，当我使用 json.load 时，我只得到数据中的字符串“header”和“loans”，但没有得到 id、name、description 等实际信息。我怎样才能跳过所有内容，直到 [ ? 我有很多文件要处理，所以我不能手动删除每个文件的开头。我目前的代码是：

```
import csv
import json

fp = csv.writer(open("test.csv","wb+"))

f = open("loans/1.json")
data = json.load(f)
f.close()

for item in data:
    fp.writerow([item["name"]] + [item["posted_date"]] + OTHER STUFF) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T02:31:40.353

代替

```
for item in data: 
```

利用

```
for item in data['loans']: 
```

标头存储在`data['header']`其中，`data`本身就是一个字典，因此您必须键入它才能访问数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:31:27.987

`data`是一个字典，所以`for item in data`迭代*键*。

你可能想要`for loan in data['loans']:`

# grails - Grails 安全插件

> ID：10747670
> 
> 赞同：0
> 
> 时间：2012-05-25T02:16:43.340
> 
> 标签：grails, spring-security

嗨，我已经安装了 grails secuirty 插件。
但是我无法登录我已经在 Bootstrap 中设置了这个用户名和密码。

```
import dashboard.Role
import dashboard.Username
import dashboard.UsernameRole

class BootStrap {

    def init = { servletContext ->

        def adminRole = new Role(authority: 'ROLE_ADMIN').save(flush: true)
        def usernameRole = new Role(authority: 'ROLE_USER').save(flush: true)

        def Username = new Username(username: 'me', enabled: true, password: 'password')
             Username.save(flush: true)

        UsernameRole.create Username, adminRole, true

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:40:58.513

首先，不要使用类名作为变量名，这既错误又模棱两可。至少小写它，比如`def username`.

其次，您没有保存/创建 ROLE_USER 一个，只有管理员一个。

第三，您得到什么错误，未找到用户名？调试要做的事情：

*   查看数据库以查看那里是否有任何用户。
*   在控制器中执行一个操作，`render Username.findAll()`以查看是否有任何输出

# extjs - EXTJS4--为什么我的关联商店不加载子数据？

> ID：10747674
> 
> 赞同：4
> 
> 时间：2012-05-25T02:17:27.790
> 
> 标签：extjs, extjs4, extjs-mvc

所以我有一个父子商店，如下所示：

**父模型**

```
Ext.define('APP.model.Client', {
    extend: 'Ext.data.Model',
    requires: [
        'APP.model.Website', 'Ext.data.association.HasMany', 'Ext.data.association.BelongsTo'],
    fields: [{
        name: 'id',
        type: 'string'
    }, {
        name: 'name',
        type: 'string'
    }, {
        name: 'slug',
        type: 'string'
    }, {
        name: 'active',
        type: 'boolean'
    }, {
        name: 'current',
        type: 'boolean'
    }],
    hasMany: {
        model: 'APP.model.Website',
        name: 'websites'
    }
}); 
```

**儿童模型**

```
Ext.define('APP.model.Website', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'id',
        type: 'string'
    }, {
        name: 'client_id',
        type: 'string'
    }, {
        name: 'sub_domain',
        type: 'string'
    }, {
        name: 'active',
        type: 'boolean'
    }],
    belongsTo: 'APP.model.Client'
}); 
```

通过服务器使用 AJAX 调用，我正在加载`Clients`商店，并且加载正常。但是`Websites`商店没有填充，当我在`Clients`商店 on.load 函数上断点时，为了查看它填充了什么，`Client`商店只填充了客户端数据，但在该`raw`商店的属性中，我可以看到所有`websites`数据。所以它被正确返回，但我的 extjs 不正确。这里是商店：

**客户商店**

```
Ext.define('APP.store.Clients', {
    extend: 'Ext.data.Store',
    autoLoad: false,
    model: 'APP.model.Client',
    proxy: {
        type: 'ajax',
        url: '/client/list',
        reader: {
            type: 'json',
            root: 'items'
        }
    },
    sorters: [{
        property: 'name',
        direction: 'ASC'
    }]
}); 
```

**网站商店**

```
Ext.define('APP.store.Websites', {
    extend: 'Ext.data.Store',
    requires: ['Ext.ux.Msg'],
    autoLoad: false,
    model: 'APP.model.Website',
    proxy: {
        type: 'ajax',
        url: '/client/list',
        reader: {
            type: 'json',
            root: 'items'
        },
        writer: {
            type: 'json'
        }
    },
    sorters: [{
        property: 'sub_domain',
        direction: 'ASC'
    }]
}); 
```

我的最终结果是......我想填充两个商店，以便我可以单击一个元素，当它从父商店加载某些内容时，我可以访问子商店（当我弄清楚时会有更多这个问题）在选项卡中填充几个网格。

就我的设置而言，我缺少什么？几天前我刚刚下载了extjs4，所以我在4.1上。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T18:22:57.537

将您的*代理*放入您的*模型*中，除非您有充分的理由不 [1]

确保您`require`的相关模型在同一个文件中，或者在应用程序的早期

如果`foreignKey`您想随意加载相关数据（即稍后的网络请求），请使用此选项。

如果`associationKey`相关数据加载到相同（嵌套）响应中，则使用

或者只使用两者

始终是`name`您的关系（否则，如果使用命名空间，名称会很奇怪）。

始终在关系中为属性使用*完全限定的模型名称*`model`

工作代码：

`model/Contact.js`：

```
Ext.define('Assoc.model.Contact', {
    extend:'Ext.data.Model',

    requires:[
    'Assoc.model.PhoneNumber' 
    ],

    fields:[
    'name' /* automatically has an 'id' field */
    ],

    hasMany:[
    {
        model:'Assoc.model.PhoneNumber', /*use the fully-qualified name here*/
        name:'phoneNumbers', 
        foreignKey:'contact_id',
        associationKey:'phoneNumbers'
    }
    ],

    proxy:{
    type:'ajax',
    url:'assoc/data/contacts.json',
    reader:{
        type:'json',
        root:'data'
    }
    }
}); 
```

`model/PhoneNumber.js`：

```
Ext.define('Assoc.model.PhoneNumber', {
    extend:'Ext.data.Model',

    fields:[
    'number',
    'contact_id'
    ],

    proxy:{
    type:'ajax',
    url:'assoc/data/phone-numbers.json',
    reader:{
        type:'json',
        root:'data'
    }
    }
}); 
```

数据/contacts.json：

```
{
    "data":[
    {
    "id":1,
    "name":"neil",
    "phoneNumbers":[
    {
        "id":999,
        "contact_id":1,
        "number":"9005551234"
    }
    ]
    }
    ]

} 
```

数据/电话号码.json

```
{
    "data":[
    {
    "id":7,
    "contact_id":1,
    "number":"6045551212"
    },
    {
    "id":88,
    "contact_id":1,
    "number":"8009996541"
    },
    ]

} 
```

`app.js`：

```
Ext.Loader.setConfig({
    enabled:true
});

Ext.application({

    requires:[
    'Assoc.model.Contact'
    ],

    name:'Assoc',
    appFolder:'Assoc',

    launch:function(){

    /* load child models that are in the response (uses associationKey): */
    Assoc.model.Contact.load(1, {
        success: function(record){
        console.log(record.phoneNumbers());
        }
    });

    /* load child models at will (uses foreignKey). this overwrites child model that are in the first load response */
    Assoc.model.Contact.load(1, {
        success: function(record){
        record.phoneNumbers().load({
            callback:function(){
            console.log(arguments);
            }
        });
        }
    });

    }
}); 
```

[1] 商店将使用其模型的代理。如果需要，您可以随时覆盖商店的代理。如果模型没有代理，您将无法使用 Model.load()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:45:25.887

你的假设是错误的。您希望网站商店自行加载，但这不是它的工作方式。您可以执行以下操作（未经测试，但我在所有项目中都是这样做的）：

在您的客户端网格中，为 itemclick 事件添加一个侦听器以调用以下方法 (showWebSites)。它将接收包含所选 APP.model.Client 实例的所选客户端记录。然后，假设每个客户端都有一组网站，该方法将加载 APP.store.Websites 商店，并且客户端的网站将显示在您的视图中。

```
showWebSites: function (sender, selectedClient) {
    Ext.StoreManager.lookup('APP.store.Websites')
       .loadData(selectedClient.data.WebSites);
} 
```

这就是方法。希望对你有帮助。

# mongodb - mongodb中是否有类似于MySQL的“设置名称”的命令？

> ID：10747677
> 
> 赞同：0
> 
> 时间：2012-05-25T02:18:18.463
> 
> 标签：mongodb, mongodb-query

Mongodb在内部使用utf-8，如何设置输出字符集？有没有类似于 MySQL 的“设置名称”的命令？我使用 c++ mongoclient。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:22:54.257

MongoDB 专门处理 UTF-8。您不能更改输入或输出字符集和字符编码。您需要在您的应用程序中执行此操作，您还需要确保发送到 MongoDB 的每个字符串实际上都是 UTF-8。目前没有任何驱动程序支持其他任何东西。他们也不太可能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:46:22.927

我不确定 c++ 驱动程序的行为是否不同，但据我所知，你总是会得到一个 UTF-8 编码的结果。因此，如果您希望将这些数据转换为另一个字符集，您需要自己执行它（不知道您使用 c++ 有什么方法）。

# javascript - SWF 中的字体在 IE 8 中不起作用

> ID：10747678
> 
> 赞同：1
> 
> 时间：2012-05-25T02:18:35.490
> 
> 标签：javascript, flash, internet-explorer-8, svg, font-face

我在 HTML 页面中有一个 SVG。像 IE 8 这样的旧浏览器不支持 SVG，因此我加载了 Google 的[SVG Web](http://code.google.com/p/svgweb)库以作为 Flash 后备。如果浏览器是旧版浏览器，SVG Web 会将 SVG 转换为幻像对象并在 SWF 中复制其功能。

如果 SVG 有一个带有 font-family 属性的文本元素，则此方法有效，但在 IE 8 中除外。IE 8 忽略 SWF 中的字体系列。

[例子](http://svgweb.s3.amazonaws.com/ie8-fonts.html)

我在样式表中加载@font-face：

```
@font-face {
    font-family: 'MyriadPro-BoldIt';
    src: url('myriadpro-boldit-webfont.eot');
    src: url('myriadpro-boldit-webfont.woff') format('woff'), 
         url('myriadpro-boldit-webfont.ttf') format('truetype'), 
         url('myriadpro-boldit-webfont.svg#webfontyYDLSfQE') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

并将该字体系列应用于 SVG 中的文本元素：

```
<script type="image/svg+xml">
    <svg xmlns="http://www.w3.org/2000/svg" width="720" height="120" version="1.1">
        <text x="190" y="80" id="font-test" font-size="44.06" fill="#94dfe3"
        font-family="MyriadPro-BoldIt">MyriadPro-BoldIt</text>
    </svg>
</script> 
```

无论我使用什么客户端查看页面，文本看起来都很棒。*IE 8 除外*，它以默认的 IE 8 字体呈现。

当我指示 SVG Web在现代浏览器上*强制使用 Flash时，文本看起来也很完美。*

建议？

# html - 客户在 Windows Azure 中的频道注册

> ID：10747685
> 
> 赞同：0
> 
> 时间：2012-05-25T02:19:44.357
> 
> 标签：html, azure, visual-studio-2012, winjs

我正在尝试自己创建此示例：http: [//channel9.msdn.com/Events/windowsazure/learn/Windows-8-Push-Notifications-with-Windows-Azure](http://channel9.msdn.com/Events/windowsazure/learn/Windows-8-Push-Notifications-with-Windows-Azure)

我创建了推送通知注册云服务（我使用 vs2010 创建的项目），它似乎运行正常。然后我在 vs 11（带有 JS 和 HTML5 的 Metro 风格应用程序）上创建了客户端项目，运行它并尝试注册一个频道。它不起作用，并在屏幕上写了“不接受注册”而不是频道的 uri。

我应该怎么办？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:20:57.843

> > 它不起作用，并在屏幕上写了“不接受注册”而不是频道的 uri。

我想建议您使用适用于 Windows 8 的 Windows Azure 工具包：[http](http://watwindows8.codeplex.com/) ://watwindows8.codeplex.com/ 。然后，尝试将您的代码与示例代码进行比较，以找出问题所在。

此致，

明旭。

# mysql - MySQL查询根据记录中设置的日期范围之间的今天日期选择记录

> ID：10747690
> 
> 赞同：0
> 
> 时间：2012-05-25T02:20:58.180
> 
> 标签：mysql, sql

我有一个`exhibitions`有 2 列`startDate`和`endDate`. 我想根据今天的日期选择记录。因此，如果今天是“2012-05-24”，我希望记录`startDate`是“2012-05-01”和`endDate`“2012-05-31”。

我反向使用了查询，查找“2012-05-01”和“2012-05-31”之间的记录，但不是基于今天的日期。任何方向都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:31:40.703

```
SELECT *
FROM exhibitions
WHERE startDate > DATE_FORMAT(CONCAT(SUBSTR(NOW(),1,8),'01'),'%a')
AND endDate < DATE_FORMAT(LAST_DAY(NOW()),'%a') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:23:23.803

尝试这个：

```
Select *
FROM exhibitions 
WHERE startDate < CURRENT_DATE() and endDate > CURRENT_DATE() 
```

**更新：**

您需要找到该月的第一天和该月的最后一天。有一个 LAST_DAY() 函数，但没有 FIRST_DAY() 函数。

要根据今天的日期查找该月的**第一天，您可以使用：**

```
DATE_ADD(LAST_DAY(DATE_SUB(CURRENT_DATE(), INTERVAL 1 MONTH)), INTERVAL 1 DAY) 
```

要根据今天的日期查找该月的**最后一天，您可以使用：**

```
 LAST_DAY(CURRENT_DATE()) 
```

最终查询将是这样的：

```
Select *
FROM exhibitions 
WHERE Startdate = LAST_DAY(CURRENT_DATE())
AND
endDate = DATE_ADD(LAST_DAY(DATE_SUB(CURRENT_DATE(), INTERVAL 1 MONTH)), INTERVAL 1 DAY) 
```

# android - 如何使用安装在 android 设备中的 adobe reader 读取存储在 sdcard 中的 pdf 文件？

> ID：10747693
> 
> 赞同：0
> 
> 时间：2012-05-25T02:21:28.653
> 
> 标签：android, pdf

*我是 android 应用程序开发新手。我正在尝试打开存储在 sd 卡中的 pdf 文件。我使用了这个代码片段，但这会打开设备中的查看器，但不会打开路径中给出的文件。任何帮助表示赞赏。*

```
 Intent intent = new  Intent(Intent.ACTION_VIEW,Uri.parse("Environment.getExternalStorageDirectory().getPath()+/sample.pdf"));
    intent.setType("application/pdf");
    intent.setPackage("com.adobe.reader"); selects the adobe reader directly 
    PackageManager pm = getPackageManager();
    List<ResolveInfo> activities = pm.queryIntentActivities(intent,0);
    if (activities.size() >= 0) 
            {
    startActivity(intent);

    } else {
    Toast.makeText(this, "No Application Available to View PDF",

        Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:48:27.207

您可以通过提供路径从 sdcard 读取 pdf 文件并尝试以下操作。

```
File pdfFile = new File(path); 
if(pdfFile.exists()) 
{

    Uri path = Uri.fromFile(pdfFile); 
    Intent pdfIntent = new Intent(Intent.ACTION_VIEW);
    pdfIntent.setDataAndType(path, "application/pdf");
    pdfIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    try
    {
        startActivity(pdfIntent);
    }
    catch(ActivityNotFoundException e)
    {
        Toast.makeText(uractivity.this, resource.getString(R.string.noapplicationpdf), Toast.LENGTH_LONG).show(); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:25:43.573

你可以尝试类似的东西

```
Intent intent = new Intent(Intent.ACTION_VIEW);
File file = new File(filename);
intent.setDataAndType( Uri.fromFile( file ), "application/pdf" );
startActivity(intent); 
```

或者

```
Intent intent = new Intent();
intent.setPackage("com.adobe.reader");
intent.setDataAndType(Uri.fromFile(file), "application/pdf");
startActivity(intent); 
```

# sql - 在开始日期和结束日期之间选择每个月

> ID：10747695
> 
> 赞同：2
> 
> 时间：2012-05-25T02:21:41.260
> 
> 标签：sql, arrays, postgresql, date, select

说我有一个`startdate = '2010/04/01'`和一个`enddate = '2011/02/01'`。

我将如何设置一个查询，以便我检索下表作为响应：

```
month
2010/04/01
2010/05/01
2010/06/01
2010/07/01
2010/08/01
2010/09/01
2010/10/01
2010/11/01
2010/12/01
2011/01/01
2011/02/01 
```

请注意，我对格式并不太在意，任何可行的都可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T02:41:06.363

PostgreSQL 必须[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)使这成为一项简单的任务：

```
SELECT generate_series('2010-04-01', '2011-02-01', interval '1 month')::date 
```

# haskell - 没有类型的 Haskell

> ID：10747703
> 
> 赞同：12
> 
> 时间：2012-05-25T02:22:34.693
> 
> 标签：haskell, dynamic, types

是否可以禁用或解决 Haskell 中的类型系统？在某些情况下，如 Forth 和 BCPL 中的所有内容都没有类型化或 Mathematica 中的单类型化很方便。我正在考虑将所有内容声明为相同类型或完全禁用类型检查。

**编辑：**根据 SO 原则，这是一个狭窄的技术问题，而不是要求讨论不同编程方法的相对优点。换个说法，“Haskell 的使用方式可以避免类型冲突完全是程序员的责任吗？”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T02:41:30.807

另请查看[`Data.Dynamic`](https://hackage.haskell.org/package/base-4.15.0.0/docs/Data-Dynamic.html)哪些允许您在部分代码中具有动态类型的值，而不会在整个过程中禁用类型检查。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-25T02:29:52.687

GHC 7.6（尚未发布）具有类似的功能`-fdefer-type-errors`：

[http://hackage.haskell.org/trac/ghc/wiki/DeferErrorsToRuntime](http://hackage.haskell.org/trac/ghc/wiki/DeferErrorsToRuntime)

它将所有类型错误推迟到运行时。它并不是真正的无类型，但它允许几乎同样多的自由。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-25T05:39:20.213

即使有`fdefer-type-errors`一个也不会避免类型系统。它也确实不允许类型独立。该标志的要点是允许编译具有类型错误的代码，只要`Main`函数不调用错误。特别是，任何带有类型错误的代码，当被 Haskell 解释器实际调用时，仍然会失败。

虽然 Haskell 中无类型函数的前景可能很诱人，但值得注意的是，类型系统确实是该语言的核心。代码在编译中证明了自己的功能，类型系统的刚性防止了大量的错误。

或许如果你给出了你遇到的问题的一个具体例子，社区可以解决它。数字类型之间的相互转换是我之前问过的问题，并且有很多很好的技巧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-31T10:14:01.333

也许`fdefer-type-errors` 结合[https://hackage.haskell.org/package/base-4.14.1.0/docs/Unsafe-Coerce.html](https://hackage.haskell.org/package/base-4.14.1.0/docs/Unsafe-Coerce.html)可以满足您的需求。

# doxygen - doxygen @tableofcontents 不起作用

> ID：10747704
> 
> 赞同：6
> 
> 时间：2012-05-25T02:22:49.007
> 
> 标签：doxygen, tableofcontents

我正在尝试使用 doxygen 生成用户帮助，当我在主页中使用命令 \tableofcontents 时，html 输出中没有显示任何内容。我只是不知道为什么，有人知道如何使用 tableofcontents 命令吗？一些例子会更好，谢谢！注意浏览器没问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-07T11:37:14.337

解决方案的关键是在标题中**添加标签**：

```
This is a level 1 header {#labelid_H1}
========================

This is a level 2 header {#labelid_H2}
------------------------

# This is a level 1 header # {#labelidH1}

## This is level 2 header ## {#labelidH2} 
```

然后是目录 [TOC]

```
[TOC] 
```

以及标题链接

```
[Link to first headline](@ref labelid_H1) 
[Link to second headline](#labelid_H2) 
```

在工作中。

另一点要提的是，Doxygen 占用了用作主页的文件中的第一行（在以下位置查找“吃我的短裤，Doxygen！”：[使用 README.md 文件作为 Doxygen 的主页](https://stackoverflow.com/questions/13368350/use-the-readme-md-file-as-main-page-in-doxygen)）

# c++ - 链接到同一个二进制文件时，不同库中的相同符号不会重新定义？

> ID：10747708
> 
> 赞同：1
> 
> 时间：2012-05-25T02:22:56.127
> 
> 标签：c++, linux, gcc

### Lib1.a：

```
#include<stdio.h>
#include<stdlib.h>
class Lib
{
public:
inline static const void Test()
{
printf("this is lib1\n");
};
void Lib1Test()
{
Lib::Test();
}
}; 
```

### Lib2.a：

```
#include<stdio.h>
#include<stdlib.h>
class Lib
{
public:
inline static const int Test()
{
printf("this is lib2\n");
};
void Lib2Test()
{
Lib::Test(); // this will call the Test in Lib1,amazing!
}
}; 
```

lib1.a 和 lib2.a 将链接在一起进行测试。

什么原因？Lib::Test 没有重新定义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:46:17.750

这违反了单一定义规则，这会使您的程序无效，但不需要实现来诊断它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T03:18:52.697

> 没有 Lib::Test 重新定义

正如 dribeas 已经回答的那样，您的程序格式错误（违反了单一定义规则）。

要了解为什么它不会链接失败，请在[此处](http://www.airs.com/blog/archives/52)`COMDAT`阅读有关部分。

# android - 在android地图中移动标记

> ID：10747713
> 
> 赞同：1
> 
> 时间：2012-05-25T02:24:01.120
> 
> 标签：android, android-mapview, android-maps

我想在地图视图中移动标记。起初，我是这样的：

```
public void moveMarker(Marker marker, int lng, int lat) {       
    if (marker == null) {
        return;
    }
    String key = marker.getKey();
    OverlayItem item = (OverlayItem) markers.get(key);
    GeoPoint point = new GeoPoint(lat, lng);
    GeoPoint oldPoint = item.getPoint();
    if (oldPoint.getLatitudeE6() == point.getLatitudeE6()
            && oldPoint.getLongitudeE6() == point.getLongitudeE6()) {
        return;
    }
    overlay.removeOverlay(item);
    OverlayItem newItem = new OverlayItem(point, marker.getTitle(), marker
            .getSnippet());
    newItem.setMarker(marker.getIcon());
    overlay.addOverlay(newItem);
    mapView.postInvalidate();
    markers.put(key, newItem);

} 
```

是的，这行得通。但是当一个标记移动时，其他标记会刷新。所以我修改如下代码：

```
public void moveMarker(Marker marker, int lng, int lat) {
    if (marker == null) {
        return;
    }
    String key = marker.getKey();
    MarkerOverlay overlay = markers.get(key);
    OverlayItem item = overlay.getItem(0);
    GeoPoint point = new GeoPoint(lat, lng);
    GeoPoint oldPoint = item.getPoint();
    if (oldPoint.getLatitudeE6() == point.getLatitudeE6()
            && oldPoint.getLongitudeE6() == point.getLongitudeE6()) {
        return;
    }
    mapOverlays.remove(overlay);
    MarkerOverlay overlayN = null;
    if (marker instanceof CarMarker) {
        CarMarker cm = (CarMarker) marker;
        overlayN = new CarMarkerOverlay(null, mapView, cm.getCarId());
    } else if (marker instanceof Marker) {
        overlayN = new MarkerOverlay(null);
    }
    OverlayItem newItem = new OverlayItem(point, marker.getTitle(),
            marker.getSnippet());
    newItem.setMarker(marker.getIcon());
    overlayN.addOverlay(newItem);
    mapOverlays.add(overlayN);
    markers.put(key, overlayN);
    mapView.postInvalidate();
} 
```

这可以按我的意愿工作。但是有一个问题，每次marker移动的时候，都会去掉MarkerOverlay，重新创建，是不是效率低下？提前致谢！变量命名标记和 mapOverlays 定义：

```
private Map<String, MarkerOverlay> markers = new ConcurrentHashMap<String, MarkerOverlay>();
private List<Overlay> mapOverlays = null;
mapOverlays = mapView.getOverlays(); 
```

一些类定义：

```
public class MarkerOverlay extends ItemizedOverlay<OverlayItem>{}
public class CarMarkerOverlay extends MarkerOverlay {} 
```

# asp.net - 何时使用 HttpApplicationState 而不是 Web.Caching.Cache？

> ID：10747714
> 
> 赞同：5
> 
> 时间：2012-05-25T02:24:10.063
> 
> 标签：asp.net, caching

当我需要在我的应用程序中缓存某些内容时，我曾经选择 Web.Caching.Cache。但是我遇到了一些使用 HttpApplicationState 的遗留代码。

由于 Web.Caching.Cache 更强大、更灵活（似乎更多），有没有更好使用 HttpApplicationState 的情况？

如果你能给我看一些例子，我将不胜感激:-)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T03:31:00.183

两者均可用于存储可在整个 ASP.Net 应用程序中全局访问的信息`HttpApplicationState`。`Web.Caching.Cache`但是，它们有非常不同的用途。

`HttpApplicationState`用于存储通常不会更改的应用程序数据。它通常在应用程序启动时填充`Application_Start`到*Global.asax中。*我个人并没有太多使用它，但我相信它通常用于存储对应用程序的所有用户都是全局的小块应用程序配置，这些配置要么不会更改，要么很少更改。进入应用程序状态的东西将无限期地保留在那里，直到应用程序回收。但是当它再次回收并重新启动时，`Application_Start`将再次执行并重新填充它。

重要的是要注意这`HttpApplicationState`是一个单例并且不是线程安全的。因此，当您对其进行更改时，您必须通过调用 和 来锁定和解锁 Application`Application.Lock()`对象`Application.UnLock()`。[阅读更多](https://docs.microsoft.com/en-us/previous-versions/dotnet/netframework-3.0/ms178594%28v%3Dvs.85%29#application-state-considerations)

实际上，您可以通过三种不同的方式缓存 ASP.Net 内容：页面级、部分页面和数据。我将谈论数据缓存，因为我认为这与您的问题最相关。ASP.Net 缓存用于存储大量应用程序数据，每次请求从数据存储中检索这些数据的成本很高。和 Cache之间的主要区别`HttpApplicationState`是 1) 缓存数据旨在通过各种触发器或条件（时间、其他缓存依赖项等）过期并从内存中清除，而`HttpApplicationState`在应用程序回收之前将永远存在，以及 2)如果服务器遇到严重的内存压力，可以从内存中清除缓存数据，因此您永远不能指望它存在，必须始终测试它是否存在，而`HttpApplicationState`它将始终存在。

缓存用于将数据存储在更靠近应用程序的位置，不需要在每次请求时从数据库中提取数据。缓存旨在存储大量数据，智能缓存架构可以对性能产生巨大的积极影响。

# javascript - 返回 JSON 和 Google Maps v3 的范围问题

> ID：10747715
> 
> 赞同：0
> 
> 时间：2012-05-25T02:24:33.503
> 
> 标签：javascript, json, google-maps-api-3

我有一些数据我想用 json 在地图上吐出。标记被绘制出来，所以我知道它的范围在那里，这就是为什么我正在努力解决这个问题。数据相互覆盖。

infowindow.setContent（位置[i][0]，位置[i][6]）；

这只会显示位置[i][6]的变量；覆盖位置[i][0]。

我很确定这是一个范围问题，但我可能会离开。我把它扔在这里：http: [//jsfiddle.net/jalbertbowdenii/pGBZD/](http://jsfiddle.net/jalbertbowdenii/pGBZD/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:38:46.000

[该`setContent`方法只接受一个参数](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)。

> 设置内容（内容：字符串|节点）

任何其他参数都将被忽略。如果你想在弹出气泡中包含两个位置索引，你可以试试这个：

```
infowindow.setContent(locations[i][0] + '<br>' + locations[i][6]); 
```

# java - 如何使用 HashMap 为位图分配键？

> ID：10747716
> 
> 赞同：0
> 
> 时间：2012-05-25T02:25:02.920
> 
> 标签：java, hashmap, keyvaluepair

在全局定义中，我已经声明：`private HashMap<String, Bitmap> map = new HashMap<String, Bitmap>();`

在我的代码的其他部分，我连接到服务器并获取所需的信息。其中两个是图像地址（url）和图像ID。之后我下载图像，我想为它分配自己的 ID。这是我的代码：

```
private LinkedList<Bitmap> getFlagImages() {
    InputStream is= null;
    LinkedList<Bitmap> llBitmap = new LinkedList<Bitmap>();

    for(int i = 0; i < flag.getTeamLogo44x44().size(); i++) {
        String urlstr = flag.getTeamLogo44x44().get(i);

        try {
            HttpGet httpRequest   = new HttpGet(urlstr);
            HttpClient httpclient = new DefaultHttpClient();
            HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);

            HttpEntity entity = response.getEntity();
            BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
            is = bufHttpEntity.getContent();
            Bitmap bm = BitmapFactory.decodeStream(is);

            llBitmap.add(bm);
            map.put(flag.getTeamId().get(i), bm);  // *Crash happens here

        }catch ( MalformedURLException e ){
            Log.d( "RemoteImageHandler", "Invalid URL passed" + urlstr );
        }catch ( IOException e ){
            Log.d( "RemoteImageHandler", "fetchImage IO exception: " + e );
        }finally{
            if(is != null) {
                try{
                    is.close();
                } catch(IOException e) {}
            }
        }
    }

    return llBitmap;        
} 
```

当我运行时，应用程序崩溃并且 logcat 显示空指针异常并指向行`map.put(flag.getTeamId().get(i), bm);`

任何建议将不胜感激。

//**更新**，我也用过`map.put(flag.getTeamId().get(i), Bitmap.createBitmap(bm));`，但结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:02:34.517

看起来`flag.getTeamId()`是空的，或者，就像checheen所说的那样，`flag.getTeamId.get(i)`是空的

您可以尝试使用断言，如 assert (flag.getTeamId() != null) assert (flag.getTeamId().get(i) != null)

现在使用 -ea 标志（启用断言的缩写）运行您的 jvm

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:04:49.803

我变了

```
map.put(flag.getTeamId().get(i), bm); 
```

至

```
map.put(flag.getTeamId().get(i), Bitmap.createBitmap(bm, 0, 0, bm.getWidth(), bm.getHeight())); 
```

现在可以了。但我不知道为什么第一个不起作用！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:07:22.717

看起来你找到了答案。但是，您可能会考虑将您的地图`WeakReference<Bitmap>`作为一个值。那是，

```
Map<Integer, WeakReference<Bitmap>> 
```

通过保持弱引用，您可以确保垃圾收集稍后将按预期工作。

# android - Android 应用启动地点

> ID：10747718
> 
> 赞同：4
> 
> 时间：2012-05-25T02:25:10.167
> 
> 标签：android, launch

是否可以在 Android 上跟踪某人启动应用程序的位置（即从抽屉、最近的应用程序菜单或桌面快捷方式等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:27:35.663

如果您构建自己的主屏幕，它可以为您提供一些信息。

但是在具有任何可用主屏幕的库存设备上，可能没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:31:23.710

抱歉，但这是不可能的。

即使是这样，也要考虑**恶意软件**滥用此类功能的难易程度。您可以收听指向您的意图以及广播的意图，但应用程序启动不应是广播事件。

您可以做的是[更换启动器](http://groups.google.com/group/android-developers/browse_thread/thread/bc1bfa440da23e22)。如果用户同意。

您还可以通过阅读 logcat 日志来解决问题。例如，授予您的应用程序`android.permission.READ_LOGS`权限并解析日志以确定启动它的应用程序。然而，这只是一个想法……这听起来像是你不想依赖的东西。

# c# - “删除”基地成员？

> ID：10747719
> 
> 赞同：2
> 
> 时间：2012-05-25T02:25:27.153
> 
> 标签：c#, inheritance, polymorphism, shadow, member-access

有没有办法隐藏基类的成员？

```
class A
{
  public int MyProperty { get; set; }
}

class B : A
{
  private new int MyProperty { get; set; }
}

class C : B
{
  public C()
  {
    //this should be an error
    this.MyProperty = 5;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:39:38.820

在 C# 语言中没有隐藏成员的方法。您可以获得的最接近的方法是使用[`EditorBrowsableAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute.aspx).

```
public class B : A
{
    [EditorBrowsable(EditorBrowsableState.Never)]
    new public int MyProperty {
        get;
        set;
    }
} 
```

我敢说，除了 Visual Studio 之外，不能保证这适用于其他编辑器，所以最好在它上面抛出一个异常。

```
public class B : A
{
    [EditorBrowsable(EditorBrowsableState.Never)]
    public new int MyProperty {
        get {
            throw new System.NotSupportedException();
        }
        set {
            throw new System.NotSupportedException();
        }
    }
} 
```

# c# - 根据条件将日期时间转换为字符串 (C#)

> ID：10747722
> 
> 赞同：0
> 
> 时间：2012-05-25T02:25:47.010
> 
> 标签：c#, datetime

我有一个从 XML 文件（closeDate）中获取的 Datetime 对象。

我想向用户动态显示所有关闭日期。但是，并非 XML 文件中的所有对象都必须包含日期对象。

我该怎么做（伪代码）：

```
DateTime closingDate = DateTime.Parse(xmlFile.selectSingleNode("Closing_Date")).toString(); 
```

然后，我正在写出一个 HTML 文件：

```
 String fileListHTML += "<li><a href='#'>The file name gets put here</a> (Closed:
"+closingDate+")</li>"; 
```

现在，只要有日期时间，就没有问题。但是，如果没有 datetime 对象（即：null），则会出现错误。

我可以以某种方式做一个 if 语句来说（再次，伪）：

```
if (closingDate =="")
{
   closingDate = "To be determined";
} 
```

当然，我在将日期时间转换为字符串时遇到错误。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:30:47.770

请改用 DateTime.TryParse，这是一个示例代码，展示了它的工作原理：

```
DateTime res;
if ( DateTime.TryParse(str,out res))
{
   // Res contain the parsed date and you can do whatever you want with
}
else
{
  // str is not a valid date
} 
```

[http://msdn.microsoft.com/fr-fr/library/ch92fbc1.aspx](http://msdn.microsoft.com/fr-fr/library/ch92fbc1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:47:49.953

除非有必要，否则我不喜欢将`DateTime`s 转为s。`string`

您可以使用可为空的日期时间。使用 null 表示它未设置或不可解析。或者从可空方法开始，并使用诸如此类的哨兵`DateTime.MinValue`。

这是未经测试的，但应该明白这一点：

```
DateTime? closingDate;

if (!string.IsNullOrEmpty(myClosingDateString))
{
    closingDate = DateTime.Parse(myClosingDateString);
}

// do whatever else you need

// when it comes time to appending ...

if (!closingDate.HasValue) // or check if it's `DateTime.MinValue`
{
    fileListHtml += "No closing date";
}
else
{
    fileListHtml += closingDate.Value.ToString();
} 
```

我提醒您在转换`DateTime`为字符串时要小心，而不考虑时区和国际化（例如，`DateTime.Parse()`可以根据区域设置和/或您传入的文化对日期进行非常不同的解释）。

为简单起见，如果您可以控制字符串的格式，我建议使用 UTC 和 ISO 8601 格式。

# php - “编辑图像”和“添加特色图像”上的 Wordpress 错误：显示“-1”而不是图像

> ID：10747727
> 
> 赞同：0
> 
> 时间：2012-05-25T02:26:35.873
> 
> 标签：php, wordpress, file-permissions

我正在使用 WP 3.3.2 和论文模板 1.8。

最近，我的服务器管理员对未记录的详细信息进行了一些更新。

从那时起，WP 在“编辑图像”和“添加特色图像”中出现错误，其中当单击这些功能时，不会显示图像，而是显示“-1”。

我想知道这里是否有人知道这些函数的内部工作原理，以便我可以调试此问题，并可能跟踪对服务器所做的潜在更改导致此 WP 错误。

请注意，这些函数始终正常工作，我的 PHP 代码没有被触及。PHP 错误日志在执行此错误时不显示任何内容。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T01:00:59.347

问题出在我的 php.ini 中。

以下几行是这样的：

```
variables_order = "GPCS"
request_order = "" 
```

它说可以`request_order`为空，因为在这种情况下，使用`variables_order`指令。但情况似乎并非如此。

```
variables_order = "GPCS"
request_order = "GP" (GP is the default) 
```

使我的服务器运行正常，因此 WP 现在可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:49:49.863

有时要找到这样的问题有点棘手，但是，我会在 functions.php 中试一试

确保

`<?php function(){ ... } ?>`

`<?php function(){ ... } ?>`

好像

```
<?php function(){ ... } ?>
<?php function(){ ... } ?> 
```

它们之间没有间距。

# c# - 想用google搜索

> ID：10747736
> 
> 赞同：0
> 
> 时间：2012-05-25T02:28:42.287
> 
> 标签：c#, windows-phone-7

在 windows phone7 的网络浏览器应用程序中，如果用户在 UrlTExtBox 中仅**键入“bing.com”**，UrlTextBox 会自动填充**“http://www”。**以下代码显示了这一点。同时，如果用户键入没有**“.com”**的简单单词（如技术或项目玻璃），UrlTextBox 再次自动填充**“http://”**。但我需要，如果只有单词，那么它应该在 Google 或 Bing 中搜索。任何人都可以帮助我吗？提前感谢您的辛勤工作！

```
 private void UrlTextBox_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            Uri url;
            if (Uri.TryCreate(UrlTextBox.Text, UriKind.Absolute, out url))
            {
                this.urls[this.currentIndex] = UrlTextBox.Text;
                this.browsers[this.currentIndex].Navigate(url);
                navigationcancelled = false;
                this.browsers[this.currentIndex].Focus();
            }
            else
            {
                Navigate(UrlTextBox.Text);
            }
        }
    }

 private void Navigate(String address)
    {
        if (String.IsNullOrEmpty(address)) return;
        if (address.Equals("about:blank")) return;
        if (!address.StartsWith("http://") &&
            !address.StartsWith("https://"))
        {
            address = "http://" + address;
        }
        try
        {
            browsers[this.currentIndex].Navigate(new Uri(address));
        }
        catch (System.UriFormatException)
        {
            return;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:01:20.727

你不能把它分开`.`，然后如果数组计数是一个，你知道它是一个单词，应该添加.com，否则你应该把它当作一个正确的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:26:36.433

在您的导航功能中检查它是否是框中的一个单词，如果是，请检查它是否以 .com 或 .net 等结尾。如果是，请添加 http 并将其发送，如果没有将其附加到 google 搜索 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:08:35.603

这是一个简单的**控制台**应用程序，它演示了您应该寻找的逻辑：

```
namespace SO10747736
{
    using System;

    internal enum TestResult
    {
        TryCreatePass,
        ValidWithPrefix,
        Search,
        DoNothing,
        Unknown
    }

    public class Program
    {
        public static void Main(string[] args)
        {
            Test("http://example.com", TestResult.TryCreatePass);
            Test("https://example.com", TestResult.TryCreatePass);
            Test("https://example", TestResult.TryCreatePass);
            Test("example.com", TestResult.ValidWithPrefix);
            Test("example", TestResult.Search);
            Test("another example", TestResult.Search);
            Test(null, TestResult.DoNothing);
            Test(string.Empty, TestResult.DoNothing);
            Test("  ", TestResult.DoNothing);
            Test("about:blank", TestResult.DoNothing);

            Console.ReadKey(true);
        }

        private static void Test(string toTest, TestResult expectedResult)
        {
            var result = SimulateEnterkeyPressed(toTest);

            if (result == expectedResult)
            {
                Console.WriteLine("{0} was parsed correctly", toTest);
            }
            else
            {
                Console.WriteLine("*** {0} was NOT parsed correctly and returned {1} ***", toTest, result);
            }
        }

        private static TestResult SimulateEnterkeyPressed(string toTest)
        {
            if (string.IsNullOrWhiteSpace(toTest))
            {
                return TestResult.DoNothing;
            }

            // Uri.TryCreate will treat this as valid
            if (toTest.Equals("about:blank"))
            {
                return TestResult.DoNothing;
            }

            Uri url;
            if (Uri.TryCreate(toTest, UriKind.Absolute, out url))
            {
                return TestResult.TryCreatePass;
            }
            else
            {
                return TryParse(toTest);
            }
        }

        private static TestResult TryParse(string toTest)
        {
            if (!toTest.Contains("."))
            {
                return TestResult.Search;
            }

            if (!toTest.StartsWith("http://") ||
                !toTest.StartsWith("https://"))
            {
                return TestResult.ValidWithPrefix;
            }

            return TestResult.Unknown;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T12:51:40.530

终于对马特莱西的答案有了一个想法。只需在 Navigate 中再添加一个 if 语句。

```
 if (!address.Contains("."))
        {
            address = " ";
            browsers[this.currentIndex].Navigate(new Uri("http://www.google.com/search?q=" + UrlTextBox.Text, UriKind.Absolute));
        } 
```

关键是，如果我没有添加**address = " ";** 然后 UrlTextBox 自动填充**http://**。

# app-store - 应用元数据被拒绝，而他们希望我提交新版本

> ID：10747739
> 
> 赞同：2
> 
> 时间：2012-05-25T02:29:12.927
> 
> 标签：app-store, app-store-connect, appstore-approval

我有一个“**元数据被拒绝**”的应用程序。经过几轮通信后，他们说我应该提交一个新版本（以解决他们的问题）。但是他们没有将状态更改为“**二进制被拒绝**”，因此我无法上传新版本！！

我在调解中心提醒他们，但好几天没有答复。我用完了解决方案并再次重新提交了元数据，只是希望能引起他们的注意。从那时起已经过去了3天。还没有答案。

那我还能做什么？有人也遇到这个问题吗？

* * *

顺便说一句，在此之前我遇到了另一种情况，我认为这里值得一提。所以我有另一个应用程序被拒绝，但在解决中心他们说“虽然您的 iTunes Connect 应用程序状态仍将显示为被拒绝，但我们不需要新的二进制文件来解决此类问题......修改适当的元数据值或设置，然后单击“**提交新元数据**”。

但我根本找不到“提交新元数据”按钮！我花了一段时间才意识到这是因为他们错误地将应用程序状态设置为“拒绝”而不是“元拒绝”。我在解决中心提醒他们。也好几天没有回复，所以除了提交新版本，我不知道我还能做什么。这让我再过一周（至少）让我的应用程序获得批准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:27:42.343

等了整整一个星期后，我终于找到了解决它的方法。所以我提交了一个新的元数据，将应用状态更改为“**审查**中”。然后我可以自己拒绝该应用并上传新版本！

# xhtml - 条件注释仅在文件扩展名为 html 时有效

> ID：10747740
> 
> 赞同：2
> 
> 时间：2012-05-25T02:29:21.260
> 
> 标签：xhtml, conditional-comments

我遇到的问题正是这个问题的标题所说的，我页面上的条件评论只有在扩展名是 html 时才有效。

如果将其保存为 xhtml 文件，则条件注释不起作用，并且无论浏览器如何，页面都会显示“不是 Internet Explorer”。但是，当文件重命名为 html 时，一切正常。这不是问题，除非页面需要是 xhtml 文件。

这是重现问题的最少量代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Title</title>
</head>
<body>
        <!--[if IE]>Internet explorer<![endif]-->
        <!--[if !IE]>-->Not internet explorer<!--<![endif]-->
</body>
</html> 
```

通过在谷歌和这个网站上测试和搜索几个小时，我唯一能找到的是第二行，不幸的是它没有做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:03:46.393

你是用IE9测试的吧？

只有在本地测试文件时才会发生这种情况。如果您通过 Web 服务器测试页面，您会发现条件注释可以正常工作，无论文件扩展名如何。

原因是在 IE9（或其他浏览器品牌，但不是 IE8 或更早版本）中使用 .xhtml 扩展名在本地访问文件等同于使用`application/xhtml+xml`内容类型为页面提供服务。

也就是说，IE9 将文件作为“真正的”XHTML 处理。通常，XHTML 文件以`text/html`内容类型提供服务，因此作为 HTML 而不是 XHTML 处理。

真正的 XHTML 要求使用 XML 解析器解析标记。XML 解析规则非常严格，不允许像条件注释这样令人讨厌的 hack，因此 IE9`application/xhtml+xml`模式不支持它们，实际上也不支持它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T01:33:54.580

```
You can use this code after including jquery library and in this way your xhtml will work in the same way than html page.

    <script type="text/javascript">//<![CDATA[

        var div = document.createElement("div");
        div.innerHTML = "<!--[if IE 8]><i></i><![endif]-->";
        var isIE8 = (div.getElementsByTagName("i").length == 1);

        div.innerHTML = "<!--[if IE 9]><i></i><![endif]-->";
        var isIE9 = (div.getElementsByTagName("i").length == 1);

        if (isIE8) {
           $('html').addClass('ie').addClass('ie8');
        } else
        if (isIE9) {
           $('html').addClass('ie').addClass('ie9');
        }
     //]]>
    </script> 
```

# php - 由于 htaccess 文件而禁止传递变量

> ID：10747742
> 
> 赞同：4
> 
> 时间：2012-05-25T02:29:22.623
> 
> 标签：php, html, .htaccess

这是我的第二篇文章，因为我也找不到解决方案，所以我期待您的帮助。我公司的网站是由一名离职员工创建的。他使用 htaccess 文件来交换网站中的所有链接。现在，当我想通过地址栏将变量从一页传递到第二页时，由于htaccess的影响，第二页无法获取变量。当我对 htaccess 文件的经验很少时，任何人都可以帮助我找到修改 htaccess 的解决方案。这是 htacess 文件。

```
RewriteEngine On
Options All -Indexes
DirectoryIndex index.php
RewriteRule ^index\.html$ index.php
RewriteRule ^B2C/(.*)/(.*)/(.*).html$ index.php?lang=$1&p=$2&id=$3
RewriteRule ^B2C/(.*)/(.*).html$ index.php?lang=$1&p=$2
RewriteRule ^B2C/(.*)/$ index.php?lang=$1
RewriteRule ^postoffice.html$ more/PO.php
RewriteRule ^hospital-clinic.html$ more/HO.php
ErrorDocument 401 /errors/401.html
ErrorDocument 403 /errors/403.html
ErrorDocument 404 /errors/404.html
ErrorDocument 500 /errors/500.html

AddOutputFilterByType DEFLATE text/html text/plain text/xml application/xml application/xhtml+xml text/javascript text/css application/x-javascript
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4.0[678] no-gzip
BrowserMatch bMSIE !no-gzip !gzip-only-text/html 
```

这是我在标签中的代码，它想在页面“1”中传递变量 $main_po_num

```
echo "<td><a href='B2C/$lang/Contact_detail.html?abc=$main_po_num'>$main_po_num</a></td>"; 
```

这是我在“2”页中转储的代码，它返回 NULL（意味着无法获取传递变量）

```
var_dump ($_GET["abc"]); 
```

连地址栏也能显示变量

> .64.4:1234/B2C/vi/Customer_Contact?abc=S110023845.html

那么如何修改 htacess 然后我可以通过并获取 2 页之间的变量。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T02:39:05.747

在所有重写规则的末尾添加[[qsa]](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa)。

这将添加 get 变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T02:39:20.023

```
RewriteRule ^B2C/(.*)/$ index.php?lang=$1 [QSA] 
```

该`[QSA]`标志将查询字符串（在您的情况下为`abc`）附加到此规则。目前，您的规则会忽略传递的查询字符串并仅使用`lang`等变量。要将此应用于您的所有规则，每个规则最后都需要此标志。

从[mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)：

> 修改查询字符串
> 
> 默认情况下，查询字符串会原封不动地传递。但是，您可以在包含查询字符串部分的替换字符串中创建 URL。只需在替换字符串中使用问号来指示应将以下文本重新注入到查询字符串中。当您想删除现有的查询字符串时，只用问号结束替换字符串。**要组合新旧查询字符串，请使用 [QSA] 标志。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T02:45:45.937

我有一段时间没有使用 htaccess 了，所以这只是一个相当有根据的猜测，但你可以试一试。

这一行：

```
RewriteRule ^B2C/(.*)/(.*).html$ index.php?lang=$1&p=$2 
```

正在研究您的示例：

```
<a href='B2C/$lang/Contact_detail.html?abc=$main_po_num'>$main_po_num</a>; 
```

基本上发生的事情是第一个 (. *) 被重写以插入到 $1 中，第二个 (.* ) 被替换到 $2 中。

所以，我又不是 100% 这是正确的语法，所以你可能需要查看它，但你应该能够执行以下操作：

```
RewriteRule ^B2C/(.*)/(.*).html/?(.*)$ index.php?lang=$1&p=$2&$3 
```

# python - 如何检查两片 numpy 数组是否相同（或重叠）？

> ID：10747748
> 
> 赞同：10
> 
> 时间：2012-05-25T02:30:25.650
> 
> 标签：python, numpy

我想检查两个 ndarray 是否是相同底层 ndarray 的重叠视图。

要检查两个切片是否完全相同，我可以执行以下操作：

```
a.base is b.base and a.shape == b.shape and a.data == b.data 
```

缓冲区的比较似乎在一种简单的情况下有效——谁能告诉我它是否普遍有效？

不幸的是，这不适用于重叠切片，而且我还没有弄清楚如何从缓冲区中准确提取其在基础数据中的偏移量——也许有人可以帮助我解决这个问题？

另外，说`a`and`b`是 的切片`x`，并且`c`是 的切片`b`。由于基础数据相同，我还想检测 和 之间的`c`重叠`a`。似乎我应该能够只比较缓冲区和形状......如果有人能告诉我确切的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T10:17:09.393

[`numpy.may_share_memory()`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.may_share_memory.html)是我们目前拥有的最好的启发式方法。它是保守的启发式的；它可能会给您带来误报，但不会给您带来误报。我认为可能有办法将启发式方法改进为 100% 正确。如果他们成功了，他们将被折叠到那个功能中，所以这是最好的前进方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:48:01.140

可以使用[`ctypes`](http://www.scipy.org/Cookbook/Ctypes#head-4ee0c35d45f89ef959a7d77b94c1c973101a562f)数组的属性来比较索引在内存中的位置。这可能需要一些工作，所以您可能想退后一步，看看是否有不同的方法来解决您的问题。

# python - 除非返回，否则如何将惰性变量传递给函数参数而不对其进行评估

> ID：10747751
> 
> 赞同：2
> 
> 时间：2012-05-25T02:30:35.407
> 
> 标签：python, language-agnostic, lazy-evaluation

这个问题是针对python的，虽然我不介意用户分享其他语言的经验。

基本上我的问题是试图将惰性变量传递给函数。（在我的情况下，我可能无法控制该功能，因此无法将其更改为将生成器作为输入）。

示例（请注意 dict.get 是函数的示例，但也可能是 foo）

```
def calc():
    sleep(10**100)
    return 42

def my_args():
    yield 'meaning'
    yield calc()

#Instead of

meaning_of_life = dict_.get('meaning', calc())

#I would rather

meaning_of_life = dict_.get(my_args) 
```

我不认为有任何一种优雅的解决方案吗？可能需要复杂的猴子补丁？（如果是这样，我不值得尝试）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-02T22:35:43.813

您可以使用特殊对象来推迟计算，直到第一次使用该对象。看起来[懒惰的代理](https://pypi.python.org/pypi/objproxies#lazy-proxies)会做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:40:22.007

```
meaning_of_life = dict_.get('meaning') or calc() 
```

# qt - 如何设置 QListWidgetItem 的最小高度？

> ID：10747752
> 
> 赞同：9
> 
> 时间：2012-05-25T02:30:41.147
> 
> 标签：qt, qlistwidget, qlistview

如何设置 a 的最小高度`QListWidgetItem`？我正在使用`QListWidget::setItemWidget()`自定义小部件，尽管我明确声明了自定义小部件的最小高度，但这些`QListWidgetItem`s 仍然具有相当低的高度属性。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T06:11:38.747

要设置每个人的最小高度，`QListWidgetItem`您可以使用`sizeHint()`函数。例如，以下代码将所有的最小高度设置`QListWidgetItem`为 30px..

```
int count = ui->listWidget->count();
for(int i = 0; i < count; i++)
{
  QListWidgetItem *item = ui->listWidget->item(i);
  item->setSizeHint(QSize(item->sizeHint().width(), 30));
} 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-25T06:14:13.503

`setSizeHint`在物品上使用。

```
void QListWidgetItem::setSizeHint ( const QSize & size ) 
```

这是告诉代理它必须为项目保留多少屏幕的正确方法。

看看[http://qt-project.org/doc/qt-4.8/qlistwidgetitem.html#setSizeHint](http://qt-project.org/doc/qt-4.8/qlistwidgetitem.html#setSizeHint)

# ios - PanoramaGL如何停止旋转

> ID：10747757
> 
> 赞同：2
> 
> 时间：2012-05-25T02:31:24.413
> 
> 标签：ios, image, 360-degrees

我正在使用 PanoramaGL 制作 360 度旋转图像，问题是如何让它自动停止旋转？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T03:10:48.787

在研究这个案例的解决方案时，我设法让它工作。

在 iOS 上您需要做的就是在 PLViewBase.m 上的 drawViewInternally 方法中插入一行。

后：

```
[camera rotateWithStartPoint:startPoint endPoint:endPoint]; 
```

插入：

```
startPoint = endPoint; 
```

这将欺骗 PanoramaGL 将“第一个触摸位置”假定为最后一个，因此拖动点之间的“距离”总是足够小以进行一致且平滑的滚动。

然后你只需要调整灵敏度。10.0f 对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:26:51.003

尝试这个

```
plView.isScrollingEnabled = NO 
```

# django - 添加表单返回 None 作为记录 id，导致 URL 出错

> ID：10747761
> 
> 赞同：0
> 
> 时间：2012-05-25T02:31:41.017
> 
> 标签：django, django-views

我正在使用[此处](https://stackoverflow.com/questions/1854237/django-edit-form-based-on-add-form)找到的代码(SO.com) 使用相同的模板来添加和编辑记录，但是当我添加新记录并单击提交时，我在 URL 上得到一个 404 `http://192.168.1.3:5678/app/student/edit/None/`，而我不是完全确定为什么。

这是我的相关部分`urls.py`：

```
 url(r'^app/lesson/new/$', 'edit_lesson', {}, 'lesson_new'),
url(r'^app/lesson/edit/(?P<id>\d+)/$', 'edit_lesson', {}, 'lesson_edit'), 
```

这是我的相关部分`views.py`：

```
def edit_lesson(request, id=None, template_name='lesson_edit_template.html'):
if id:
    t = "Edit"
    lesson = get_object_or_404(Lesson, pk=id)
    stu = get_object_or_404(Student, pk=sid)
    if stu.teacher != request.user:
        raise HttpResponseForbidden()
else:
    t = "Add"
    lesson = Lesson()

    if request.POST:
        form = LessonForm(request.POST, instance=lesson)
        if form.is_valid():
            form.save()

            # If the save was successful, redirect to another page
            return view_lessons(request)

    else:
        form = LessonForm(instance=lesson)

    return render_to_response(template_name, {
        'form': form,
        't': t,
        'lesson': lesson,
            }, context_instance=RequestContext(request)) 
```

最后，这是我的模板：

```
<h1>{{ t }} Lesson</h1>
<form action="/app/lesson/edit/{{ lesson.id }}/" method="post"> {% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Submit" />
</form> 
```

我确定我错过了一些非常简单的东西，但我似乎无法找到它。如果这有什么不同，我正在使用 Django 1.3.1。

谢谢，MC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:42:23.033

无需在表单的`action`属性中指定任何 URL。做就是了

```
<form action="" method="post"> 
```

它会 POST 回您最初用来访问它的 URL，这就是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:43:09.430

在添加情况下`{{ lesson.id }}`是无，因为`lesson`是未保存的`Lesson()`实例，没有 pk，所以您的表单被触发到不存在的 URL。

我建议分离创建和编辑视图并以不同的方式处理它们（甚至继承通用视图 - 使用新的基于类的通用视图很容易和愉快）。

此外，`{% url %}`在任何地方都使用模板标签，而不是硬编码的 url。

# ruby-on-rails - 查找嵌套或非嵌套资源的路径

> ID：10747762
> 
> 赞同：1
> 
> 时间：2012-05-25T02:31:51.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, routes

在 Rails 3.2 中工作，我是一个多态订阅模型，它的订阅类型可能是也可能不是嵌套资源。我正在尝试在电子邮件视图中显示完整的 URL 链接，但不知道该资源是否嵌套。

当我尝试`url_for @model`嵌套资源时，它失败了，期待`url_for [@parent, @model]`. 不幸的是，我不知道如何发现 Routes 表中定义的父级。

有没有办法识别嵌套资源的路由路径？如果我可以将模型与路线匹配，我可以填写必要的 ID。

截至目前，我已经在我的模型中定义了一个`parent_resource :model`可以遍历的方法，但我希望有更好的方法。

在我的`routes.draw`：

```
 resources :projects do
    resources :topics do
      resources :comments
    end
  end

  resources :subscriptions 
```

（我意识到我不应该嵌套那么深）

**编辑：附加信息**

我的订阅模型是我用来管理通知的资源。可订阅类型提供了一个链接，该链接可在该 subscribable_type / subscribable_id 上切换该用户的订阅打开或关闭。

然后，我通过一个`Notifier < ActionMailer::Base`提供订阅实例的服务，然后向用户发送邮件。

通过该设置，我试图获取`subscription.subscribable`可能是主题或项目的完整网址。

我意识到我可以通过辅助方法来确定这个小案例中的条件，但我很想知道如果有几十个嵌套模型对如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:33:06.403

您提到订阅，但您的路线完全不同。我猜你给出的路线只是一个例子。我将首先尝试摆脱您创建的自定义 parent_resource 方法。您可以通过添加 belongs_to 来做同样的事情，如果您也需要，也可以添加条件：

```
belongs_to :projects, :through => :topics, :conditions => ['whatever your conditions are'] 
```

对于每个父类型，我都会有一个，所以我可以执行以下操作：

```
object.project.present? 
```

从那里我可以很容易地知道它是否嵌套，并通过让 rails 进行父遍历来简化事情。这应该足以将事情简化到您至少可以很容易地弄清楚您拥有哪种类型的订阅。接下来，我可能会添加一些匹配的路由或尝试将 :as => 'somename' 塞进我的路由中，这样我就可以在确定嵌套部分后直接调用它们。一种选择是这样的：

```
match "projects/subscription/:id" => "projects#subscription", :as => :project_subscription
match "other/subscription/:id" => "other#subscription", :as => :other_subscription 
```

因此很明显，您可以通过以下方式指定您现在想要的网址：

```
if @object.project.present? 
  project_subscription_path(@object)
else
  other_subscription_path(@object)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T23:48:40.750

这可能不是完成我正在做的事情的最佳方式，但这对我现在有用。

这会从最短的有效路由助手构建一个嵌套资源数组并生成一个 URL：

（测试于`rails console`）

```
resource = Comment.first
resource_name = resource.class.to_s.downcase 

helper = Rails.application.routes.named_routes.helpers.grep(/.*#{resource_name}_path$/).first.to_s.split('_')
built = helper.slice!(-2,2) # Shortest possible valid helper, "comment_path"

while !(app.respond_to?(built.join("_").to_sym)) 
  built.unshift helper.pop
end

built.pop # Get rid of "path"
resources = built.reverse.reduce([]) { |memo, name| 
  if name == resource_name
    memo << resource
  else
    memo <<  memo.last.send(name.to_sym) # comment.topic, or topic.project (depends on belongs_to)
  end
}
resources.reverse!

app.polymorphic_url(resources) # "http://www.example.com/projects/1/topics/1/comments/1" 
```

# javascript - iPhone Safari HTML 表单“未定义”不是对象

> ID：10747765
> 
> 赞同：0
> 
> 时间：2012-05-25T02:32:17.273
> 
> 标签：javascript, forms

尝试更改隐藏字段值时出现两个错误： 1\. Javascript: Error undefined TypeError: 'undefined' is not an object

1.  Javascript：错误未定义：“null”不是对象

有什么线索吗？

```
<input type="hidden" name="submit" value=""/>
<input type="Button" name="button" value="Add draft" onclick="this.form['submit'].value=this.value;"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:37:28.307

假设这些控件实际上是在一个表单中，表单的提交方法会屏蔽名为“submit”的控件。给控件一些其他名称。大多数浏览器会采用另一种方式，设置`form.submit`引用控件并屏蔽提交方法。

除非您真的使用 XML 或 XHTML，否则不要使用 XML 样式标签。

# spring - 春天的服务

> ID：10747768
> 
> 赞同：0
> 
> 时间：2012-05-25T02:33:37.707
> 
> 标签：spring

我正在尝试使用 Spring 注释来定义控制器、服务和 dao，但失败了。

错误信息是

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.abs.absbase.ABSService] is defined: Unsatisfied dependency of type [interface com.abs.absbase.ABSService]: expected at least 1 matching bean 
```

但我确实定义了服务。

另一个问题是，如何定义一个 sessionfactory 来覆盖 ABSDaoImpl 中的 HibernateDaoSupport ？

谢谢

源代码是

```
@Controller
@RequestMapping("/abs.do")
public class ABSController {    
    @Autowired
    @Qualifier("ABSService")
    ABSService service; 
    ...
}

@Service(value="ABSService") 
public class ABSServiceImpl implements ABSService {
    @Autowired
    @Qualifier("ABSDao")
    ABSDao dao;
}

@Repository(value="ABSDao") 
public class ABSDaoImpl extends HibernateDaoSupport implements ABSDao {
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:31:48.157

根据我的说法，您只需要删除您在控制器中的 ABSService 对象声明之上定义的**@Qualifier注释。**并从服务的@Service 注释中删除**(value="ABSService") 。**

希望这对您有所帮助。

干杯。

# html - 如何防止我的网站布局在加载时发生变化？

> ID：10747770
> 
> 赞同：3
> 
> 时间：2012-05-25T02:34:46.870
> 
> 标签：html, css

## 问题：

当我加载我设计的网站时，页面加载时布局会出现短暂的不稳定，然后会卡入正确的位置。这种行为至少发生在 Safari 和 Chrome 中。

如何在页面加载时将所有内容保存在正确的最终位置？

## 代码：

键盘上有问题的 HTML（出于隐私原因更改了详细信息）：[http ://codepad.org/GSGHYF0N](http://codepad.org/GSGHYF0N)

样式表：[http ://codepad.org/Yr4ULwi0](http://codepad.org/Yr4ULwi0)

## 附加信息：

*   最明显的不合适的地方是 `<h2>Location</h2>`.
*   图像都是 HTML 和 CSS 中指示的大小。
*   这**不是**因为出现滚动条而导致整个布局转变为一个的问题。

## 资源

Google Developers 上的信息很有用，但没有说明如何解决我的特定问题。但是，由于防止垃圾邮件，StackOverflow 不允许我发布这些链接。

[http://jsfiddle.net/QHeG8/](http://jsfiddle.net/QHeG8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T17:06:42.057

我无法复制这个问题，但它可能是由 webfonts 加载和渲染引起的。

这可以解释为什么`<h2>Location</h2>`会移动 - 因为它的位置取决于`<h3>Tagline</h3>`

您可以尝试使用标准系统字体来查看是否可以解决问题。

此外，如果您打开了开发工具，这会减慢页面渲染速度并禁用缓存（如果您勾选了该选项）

# javascript - 将脚本插入现有函数？

> ID：10747774
> 
> 赞同：3
> 
> 时间：2012-05-25T02:35:32.380
> 
> 标签：javascript, jquery

此功能内置在页面中，我无法修改原始 .js 文件：

```
cool.lol = function () {

    // contents here

} 
```

有没有办法让我用我自己的一些脚本附加这个函数？

像这样：

```
cool.lol = function () {

    // contents here

    // i would like to add my own stuff here!!!
} 
```

或者有没有办法让我检测到该函数已被执行，以便我可以在它之后运行一些东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T02:39:25.937

[下面是一个演示](http://jsfiddle.net/FGeUu/4/)。更新为使用闭包并消除对临时变量的需要。

```
//your cool with lol
var cool = {
    lol: function() {
        alert('lol');
    }
}

//let's have a closure that carries the original cool.lol
//and returns our new function with additional stuff

cool.lol = (function(temp) { //cool.lol is now the local temp
    return function(){       //return our new function carrying the old cool.lol
        temp.call(cool);     //execute the old cool.lol
        alert('bar');        //additional stuff
    }
}(cool.lol));                //pass in our original cool.lol

cool.lol();
cool.lol();​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:40:13.553

[http://jsfiddle.net/Pcxn5/1/](http://jsfiddle.net/Pcxn5/1/)

```
// original definition which you can't touch
var cool = {
    lol: function() {
        alert("test");
    }
}
//

// your script
var ori = cool.lol;
cool.lol = function() {
    ori();
    alert('my test');
}

cool.lol();​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T02:41:13.370

您可以覆盖该功能：

```
// The file you can't touch has something like this
var cool = {};
cool.lol = function () {
    console.log("original");
}

// Keep a copy of the original function.
// Override the original and execute the copy inside
var original = cool.lol;
cool.lol = function () {
    original();
    console.log("modified");
}

// Call
cool.lol();​ // logs "original", then "modified". 
```

[http://jsfiddle.net/K8SLH/](http://jsfiddle.net/K8SLH/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T02:48:31.443

在不创建污染公共范围的变量的情况下：

```
 //let's have your cool namespace
var cool = {
    lol: function() {
        alert('lol');
    }
}

//temporarily store
cool.lol_original = cool.lol;

//overwrite
cool.lol = function() {
    this.lol_original(); //call the original function
    alert('bar');    //do some additional stuff
}

cool.lol();​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T02:53:08.590

JavaScript 允许你

*   以字符串形式获取函数的代码
*   通过提供带有代码的字符串来创建新函数

每个对象都有一个`toString()`方法。对于函数，它返回它们的代码（除非被覆盖）。

```
cool.lol.toString(); 
```

返回`function() { // contents here }`。

让我们从这个字符串中提取函数的主体。它紧随其后`{`，包括除最后一个之外的所有内容`}`。

```
var code = cool.lol.toString();
var body = code.substring(code.indexOf('{') + 1, code.length - 1); 
```

然后我们添加更多的东西

```
var newBody = body + '// i would like to add my own stuff here!!!'; 
```

`Function`并使用构造函数创建一个新函数。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function)

```
cool.lol = new Function(newBody); 
```

当然，如果新函数还必须保留参数（您必须从函数代码中解析出它们，然后将它们作为参数提供给`Function`构造函数），则还有更多工作要做。为简单起见，在这种情况下，我假设该函数没有参数。

一个示例实现：

[http://jsfiddle.net/QA9Zx/](http://jsfiddle.net/QA9Zx/)

# php - PHP 尝试捕获缓冲区

> ID：10747775
> 
> 赞同：0
> 
> 时间：2012-05-25T02:35:42.520
> 
> 标签：php, linode

我正在写这[本书](https://rads.stackoverflow.com/amzn/click/com/1430232498)，我发现了一个意想不到的情况。

这本书说，在处理 PHP/HTML 混合文件时，如果我在没有 ob 缓冲区的情况下使用 PHP try/catch，并且如果文件中间某处出现错误，***则 PHP 引擎将无法访问catch{} 行，因为一些输出已经发送到浏览器***。然后书上说这种情况可以通过使用***ob_start()、ob_end_clean() 和 ob_end_flush() 来解决***

然而，当我使用本书的示例代码时，try/catch 工作得很好***，没有***ob 缓冲区的东西。说得很好，我的意思是如果出现异常，可以毫无问题地到达并执行 catch{} 行。

我用一个 Linode VPS 进行测试，PHP 版本是 5.3.2。我用一些普通的 Linode 脚本设置了 VPS。

这是为什么？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:27:03.750

这种说法是无稽之谈。`try..catch`无论输出是否已经发送到浏览器，PHP 的工作方式都如您所愿。

看到即使[那本书的勘误表也](http://foundationphp.com/phpsolutions/updates.php)包含错误，我会说它根本不是一本很好的书，并且对它包含错误的陈述一点也不感到惊讶。只需快速浏览一下即可发现：

> 在步骤 4 中，第三行代码应如下所示：
> 
> ```
> if ($_POST && isset($missing) && !empty($missing)) { 
> ```

不，它实际上应该是：

```
if ($_POST && !empty($missing)) { 
```

或者

```
if ($_POST && $missing) { 
```

作者显然不明白[如何使用`empty`](http://kunststube.net/isset/).

更远：

> 步骤 2 中代码的第 4 行末尾缺少一个左大括号。它应该是：
> 
> ```
> if (!@include('includes/connection.inc.php')) { 
> ```

这充满了不良做法，应该重写为：

```
if (!file_exists('includes/connection.inc.php')) { 
```

或者：

```
require_once 'includes/connection.inc.php'; 
```

我敢肯定还有更多... :)

# mysql - MySQL 查询以匹配不相关的术语

> ID：10747776
> 
> 赞同：0
> 
> 时间：2012-05-25T02:35:49.180
> 
> 标签：mysql, select, subquery

我正在尝试构建一个让我发疯的查询。我不知道从哪里开始解决它，但是在搜索了一下之后，我开始使用子查询。现在，我不确定这是否会解决我的问题，或者如果可以，如何创建一个可以满足我需求的解决方案。

这是我当前表的一个非常简单的视图（称为 tbl_1）：

```
---------------------------------
|  row |  name  |  other_names  |
|-------------------------------|
|   1  |   A    |    B, C       |
|   2  |   B    |    C          |
|   3  |   A    |    C          |
|   4  |   D    |    E          |
|   5  |   C    |    A, B       |
--------------------------------- 
```

我正在使用的一些项目有多个名称（品牌名称、其他国家/地区的名称、代号等），但最终所有这些不同的名称都指的是同一个项目。我最初是按照以下方式运行搜索查询：

```
SELECT * FROM tbl_1
WHERE name LIKE '%A%'
OR other_names LIKE '%A%'; 
```

哪个会返回第 1 行和第 3 行。但是，我很快意识到我的查询也应该返回第 2 行，因为 A = B = C。我将如何去做这样的事情？我对花哨查询之外的替代建议持开放态度，例如构建另一个表，以某种方式将所有名称组合到一行中，但我认为这样的事情容易出错或效率低下。

此外，我正在使用 InnoDB 运行 MySQL 5.5.23，并使用 PHP 和 Python 编写的其他代码。

谢谢！

**2012 年 5 月 26 日更新：**
我回到了使用子查询的最初想法，但是当我认为我到达某个地方时，我遇到了一个记录在案的 MySQL 问题，其中查询是从外向内评估的，我的子查询将被评估对于每一行，并且不会在实际的时间内完成。这是我试图做的事情：

```
SELECT * FROM tbl_1
WHERE name = ANY
    (SELECT name FROM tbl_1 WHERE other_names LIKE '%A%' or name LIKE '%A%')
OR other_names = ANY 
    (SELECT name FROM tbl_1 WHERE other_names LIKE '%A%' or name LIKE '%A%') 
```

它使用示例表返回我想要的内容，但前面提到的 MySQL 问题/错误导致子查询被视为依赖查询而不是独立查询。结果，我无法在我的真实表（约 250,000 行）上测试查询，因为它最终超时。

我已经读到该问题的主要解决方法是使用联接而不是子查询，但我不确定如何将其应用于我正在尝试做的事情。我想得越多，使用 PHP/Python 独立运行子查询并使用结果数组来制作我想要的主查询可能会更好。但是，我仍然认为可能会遗漏一些结果，因为列中的术语不如我的示例好（有些术语是多个单词，有些有括号，其他名称不一定是逗号-分开等）。

或者，我正在考虑构建一个单独的表来构建必要的链接，例如：

```
| 1 | A | B, C|
| 2 | B | C, A|
| 3 | C | A, B| 
```

但考虑到我正在使用的数据及其存在的非标准化格式，我认为说起来容易做起来难。

我当时强烈考虑的路线是建立一个单独的表，其中包含易于构建的链接（即名称：other_names 的比例为 1:1），因此我不必处理存在于other_names 列。我还可以消除/限制 LIKE 的使用，并要求用户至少知道一个确切的名称，以简化结果并可能提高整体性能。

总之，我讨厌使用我无法控制的输入数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:08:30.730

偶然发现了这个问题，所以我不知道我的建议是否相关，但这对于“联合查找”之类的东西来说似乎很好用。

SELECT 将非常容易和快速。但是插入和更新相对复杂，您可能需要一个代码内循环（更新行> 0）......和几个数据库调用

表格示例：

```
---------------------------
|  row |  name  |  group  |
|-------------------------|
|   1  |   A    |    1    |
|   2  |   B    |    1    |
|   4  |   C    |    1    |
|   5  |   D    |    2    |
|   6  |   X    |    1    |
|   7  |   Z    |    2    |
--------------------------- 
```

选择： SELECT name FROM `tbl`WHERE `group`= (SELECT `group`FROM `tbl`WHERE `name`LIKE '%A%')

* * *

插入关系 K = T: (psedu codeish..)

SELECT `group`as gk WHERE name = K; SELECT `group`as gt WHERE name = T;

if (gk empty result) 和 (gt empty result) 都插入新组

```
---------------------------
|  row |  name  |  group  |
|-------------------------|
|   1  |   A    |    1    |
|   2  |   B    |    1    |
|   4  |   C    |    1    |
|   5  |   D    |    2    |
|   6  |   X    |    1    |
|   7  |   Z    |    2    |
|   8  |   K    |    3    |
|   9  |   T    |    3    |
--------------------------- 
```

if (gk empty result) and (gt NOT empty result) insert t with group = gx.group

```
---------------------------
|  row |  name  |  group  |
|-------------------------|
|   1  |   A    |    1    |
|   2  |   B    |    1    |
|   4  |   C    |    1    |
|   5  |   D    |    2    |
|   6  |   X    |    1    |
|   7  |   Z    |    2    |
|   8  |   K    |    2    |
|   9  |   T    |    2    |
--------------------------- 
```

（其他情况相同）

当两者都不为空时，将一组更新为另一组

UPDATE `tbl1`SET 组 = gt WHERE 组 = gk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:19:58.943

我想不出一个支持无限深度名称身份的查询。但是，如果您可以使用有限数量的“递归”，您可能会考虑使用与此类似的查询，从您提供的查询开始，您检索所有具有名称标识的行：

```
SELECT a.* FROM tbl_1 a
WHERE a.name='A'
OR a.other_names LIKE '%A%'
UNION
SELECT b.* FROM tbl_1 a
JOIN tbl_1 b ON a.other_names LIKE '%' || b.name || '%' OR b.other_names LIKE '%' || a.name || '%'
WHERE a.name='A'
OR a.other_names LIKE '%A%'; 
```

此查询将返回第 2 行，但在您的示例中它不会返回任何具有“B”作为“other_name”的其他行。所以你必须联合另一个查询：

```
SELECT a.* FROM tbl_1 a
WHERE a.name='A'
OR a.other_names LIKE '%A%'
UNION
SELECT b.* FROM tbl_1 a
JOIN tbl_1 b ON a.other_names LIKE '%' || b.name || '%' OR b.other_names LIKE '%' || a.name || '%'
WHERE a.name='A'
OR a.other_names LIKE '%A%';
UNION
SELECT c.* FROM tbl_1 a
JOIN tbl_1 b ON (a.other_names LIKE '%' || b.name || '%' OR b.other_names LIKE '%' || a.name || '%')
JOIN tbl_1 c ON (b.other_names LIKE '%' || c.name || '%' OR c.other_names LIKE '%' || b.name || '%')
WHERE a.name='A'
OR a.other_names LIKE '%A%'; 
```

如您所见，查询会随着深度的增加而迅速增长和加速，而且它也不是我所说的美丽。但它可能适合您的需求。我在使用 MySQL 函数方面不是很有经验，但我想你可以创建一个更优雅的解决方案，也可以使用这些函数无限深度地工作。您也可以考虑使用 Python 以编程方式解决问题。

# r - 检测最近的存储库

> ID：10747778
> 
> 赞同：1
> 
> 时间：2012-05-25T02:36:09.993
> 
> 标签：r

有没有办法检测最近的 R 存储库？这不一定是完美的，只是相当接近。

我将讨论全局，因为可能有更好的方法来处理我正在做的事情。我正在编写一个使用`available.packages()`.

当我检查包裹时，这会引发一个错误：

```
Error in contrib.url(getOption("repos"), type):
  trying to use CRAN without setting a mirror.
Calls: p_cran -> available.packages -> contrib.url
Execution is halted 
```

我的想法是使用以下方法临时设置镜像：

```
x <- getOption("repos")
#SOME HOW TEST IF x IS NOT SET BUT NOT SURE HOW
if (is.not.set(x)){
    y <- get.local.mirror.function()
    options(repos=structure(c(CRAN=y)))
    on.exit(options(repos=structure(c(CRAN=x))))
} 
```

所以我想如果这条路线是合理的，我有两个问题需要克服：

1.  判断是否`repos`已设置
2.  找到最接近或一些默认值作为存储库

提前感谢您帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:09:16.507

这个问题的棘手部分是没有获取 R 存储库的位置 - 保持一个常量来记录主要存储库的位置应该很容易。棘手的部分是*找到用户自己的位置*。

我的建议是检查时区设置。您可以`Sys.timezone()`直接阅读并应用于查找表，但这是一个字符串，可能会很痛苦。相反，我会尝试找到 UTC 偏移量，例如

```
tmp = as.POSIXlt(Sys.time())
offset =  as.numeric(as.POSIXct(format(tmp))) 
         - as.numeric(as.POSIXct(format(tmp, tz = "UTC"))) 
```

然后您可以根据某种表查找偏移量，并将每个波段与某个存储库匹配。请务必考虑存储库已关闭或其他情况的情况......

公平地说，您可能只需选择一个随机存储库即可获得相当合理的结果。（也许不包括一些在茫茫荒野中的人......）

确定是否已设置 repos 是一个简单的查找`options("repos")`或`getOption("repos")`. 来自`?options`：

```
‘repos’: URLs of the repositories for use by ‘update.packages’.
      Defaults to ‘c(CRAN="@CRAN@")’, a value that causes some
      utilities to prompt for a CRAN mirror. 
```

所以`(getOption("repos")[1] == "@CRAN@")`应该工作。

# java - 如何解析json嵌套数组

> ID：10747780
> 
> 赞同：-2
> 
> 时间：2012-05-25T02:36:32.853
> 
> 标签：java, json, gson

我想使用 java gson 库从 json 数组中获取数据，下面是要解析的 json 字符串

```
{
    'result': 'success',
    'value': {
        'count': 201671,
        'data': [
            {
                'id': '14906999986115',
                'address': '848E3rdSt',
                'zipcode': '90001',
                'name': 'montreras',
                'state': 'CA',
                'city': 'LosAngeles'
            },
            {
                'id': '14906999999454',
                'address': '92E75thSt',
                'zipcode': '90001',
                'name': 'AD.Graves',
                'state': 'CA',
                'city': 'LosAngeles'
            },
            {
                'id': '14906999997706',
                'address': '1320E83rdSt',
                'zipcode': '90001',
                'name': 'A.Irvin',
                'state': 'CA',
                'city': 'LcopAngeles'
            },
            {
                'id': '14906999982106',
                'address': '14081/2E82ndSt',
                'zipcode': '90001',
                'name': 'AdmoniaHurt',
                'state': 'CA',
                'city': 'LosAngeles'
            },
            {
                'id': '14906999996091',
                'address': '20E77thSt',
                'zipcode': '90001',
                'name': 'AdolphA.,
                'state': 'CA',
                'city': 'LosAngeles'
            }
        ]
    }
} 
```

如何从上述字符串中的数据数组中获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:59:38.867

鉴于您的 json 是有效的并且具有类似的结构，请尝试这样的事情

```
jsonStr = "your json string here";

Result result = gson.fromJson(jsonStr, Result.class)

class Result{
 public String result;
 public Value value;
}

class Value{
 public int count
 public ArrayList<Data> data;
}

class Data{
 public String id;
 public String address;
 public String zipcode;
 public String name;
 public String state;
 public String city;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:56:53.427

通常您知道期望哪些数据结构，例如在上面的示例中具有某些属性的“值”对象。阅读有关反序列化的 gson 文档，您就完成了：[https ://sites.google.com/site/gson/gson-user-guide#TOC-Primitives-Examples](https://sites.google.com/site/gson/gson-user-guide#TOC-Primitives-Examples)

# c# - 如何在 Linq 谓词中查询日期时间文字和空值？

> ID：10747782
> 
> 赞同：0
> 
> 时间：2012-05-25T02:36:36.930
> 
> 标签：c#, linq, predicate, literals

在我当前的查询中，我遇到了这样的错误：

```
The datetime literal value '2012-05-24' is not valid. 
```

对于常规 linq 查询，它看起来像这样：

```
_listHistory = (from item in dbase.histories
                where item.UserID == details.UserID && item.FriendID.HasValue == true && item.LogDate < today
                select item).OrderByDescending(x => x.LogDate).Take(take).Skip(skip).ToList(); 
```

我将处理表“ `Columns`”的数量，所以我必须使用 linq 谓词：

```
string predicate = string.Format("it.UserID=={0} && CAST(it.{1} as Edm.Int64) != null  && it.LogDate <= DATETIME'{2}'",
            details.UserID, columnname, string.Format("{0:yyyy-MM-dd}", today));

_listHistory = dbase.histories.Where(predicate)
                .OrderByDescending(x => x.LogDate).Take(take).Skip(skip).ToList(); 
```

但是这个查询导致了上面的错误。谁能帮我构建我的 linq 查询？
这是我第一次处理 Linq 谓词和文字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:17:09.220

您可能会改用[动态 LINQ 支持](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)，但假设这是实体查询语言，您似乎可以通过调用 CreateDateTime 来构造日期时间：

[http://msdn.microsoft.com/en-us/library/bb738563.aspx](http://msdn.microsoft.com/en-us/library/bb738563.aspx)

```
CreateDateTime( year, month, day, hour, minute, second) 
```

# java - Java 堆栈溢出错误 - 图形算法

> ID：10747785
> 
> 赞同：4
> 
> 时间：2012-05-25T02:36:48.693
> 
> 标签：java, graph, hashmap, stack-overflow

我使用 HashMap - HashMap 作为数据结构来表示图形（一个用于本地，一个在本地内部以表示目的地），我已经插入了 20 000 个本地。现在我需要创建一个函数来知道两个 Localities 之间是否存在路径，这个函数是递归的，它需要我做很多我的 hashMap 的 get 对象来使用它们。对于每个要制作的目的地，我总是要在我的 api 中执行 get 方法，给我一份带有目的地的 hashMap 副本每次我运行我的程序时，我都会收到 Stackoverflow 错误。为什么这总是发生？这是由于高递归调用？还是因为不断调用 get 方法来获得本地目的地的 hashMap 副本？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:40:11.340

堆栈溢出是由递归深度超过某个固定限制引起的。`HashMap`这可能与复制;无关。这会导致`OutOfMemoryError`. 如果您正在递归地进行图形搜索，则错误可能是由以下任一原因引起的

1.  深度优先搜索过深，或
2.  递归逻辑中的错误。

没有更多数据，我不能说它是哪个。但是请注意，可以使用显式堆栈迭代地编写 DFS 来存储要探索的节点。发布更多代码将有助于我们做出更好的诊断。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:40:44.877

这是递归调用。每个级别的递归调用都会消耗堆栈空间，因此如果您收到大量此类调用，您将耗尽堆栈空间。将您的算法更改为非递归的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T16:15:32.440

感谢您的帮助，问题已经解决了。我决定忘记递归调用，并选择 DFS 变体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T02:52:55.673

较小的图表也会发生同样的事情吗？如果是这样，您的递归中有一些错误可能会导致无限递归。如果较小的图没有发生这种情况，那么这就是让您失望的算法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T02:49:41.433

您使用哪种算法来寻找最短路径？它可以包含圆圈或负边权重吗？根据这一点，使用 Dijktra、Prim、Floyd-Warshall 或其他任何东西。Steven Skiena 的“算法设计手册”，p。206ff 对各种最短路径图算法给出了一些很好的详细解释。我敢肯定，其中许多是迭代的而不是递归的。

# image - 为图片中的孔插入 RGB 值

> ID：10747791
> 
> 赞同：1
> 
> 时间：2012-05-25T02:37:40.923
> 
> 标签：image, algorithm

我们正在做一个名为“Face Replacement System”的图像处理项目，我们指的是[http://thesai.org/Downloads/Volume1No6/Paper_22_A_Face_Replacement_System_Based_on_Face_Pose_Estimation.pdf](http://thesai.org/Downloads/Volume1No6/Paper_22_A_Face_Replacement_System_Based_on_Face_Pose_Estimation.pdf)。

我们实现了“图像变形”，其中源图像（人脸）（用于替换目标图像）被移位、旋转和缩放以匹配目标图像（人脸）的姿势。图像变形后得到的结果是有洞的，即不是目标图像的所有像素都映射到源图像。该论文没有提到任何解决方案。

我们尝试了一个简单的解决方案：对每个洞的 8 个相连邻居的像素取平均值。我们也尝试了其他算法。但结果很差。

在这种情况下实现的最佳算法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:53:35.383

您正在使用仿射变换（“移位、旋转和缩放”），因此可以计算反向变换，并进行“反向映射” -**为每个目标像素找到相应的源像素**。所以孔的出现完全消除了。

编辑：用于评论讨论的双线性插值

```
foreach pixel in newimage do
   (px, py) = Transform(pixel.x, pixel.y) //float
    x = Floor(px), y = Floor(py)  //integer base coordinates in old image, rounded to -Infinity
    tx = px - x, ty = py - y   //float parametric coordinates in old image cell
    Coeff00 = (1 - tx) * (1 - ty)
    Coeff01 = tx * (1 - ty) 
    Coeff10 = (1 - tx) * ty
    Coeff11 = tx * ty
    NewRedValue = OldRedValue[x, y] * Coeff00 + 
                  OldRedValue[x + 1, y] * Coeff01 + 
                  OldRedValue[x, y + 1] * Coeff10 + 
                  OldRedValue[x + 1, y + 1] * Coeff11
    the same for blue, green 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:48:56.707

听起来您所描述的中值滤波器（8 个连接的邻居）可能是最好的。您可以进行更具体的过滤，但可能不需要专业化......特别是如果“洞”不是很大。

# ektron - 在 Ektron 上发布问题的最佳在线网站是什么？

> ID：10747792
> 
> 赞同：3
> 
> 时间：2012-05-25T02:37:52.613
> 
> 标签：ektron

我正在尝试使用 Dotnet 在 Ektron 中做一个新项目。我看到在 stackoverflow 中发布的问题和对它们的响应要少得多。在使用 Ektron 进行开发时，消除我的疑虑的最佳网站是什么。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T14:22:11.397

（同意 zkent，但有额外的建议）发布到 Ektron 开发中心 (dev.ektron.com) 或 stackoverflow，然后将链接发送到 Twitter，包括标签 #ektron。一条推文可能类似于“我刚刚向 SO/DevCenter [link] #ektron 发布了一个关于 [foo] 的问题”。有很多有用的 ektron 开发人员正在观看 twitter 流，因此这是一种很好的联系方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T06:04:32.857

在 stackoverflow 和[https://developer.ektron.com/Forums/](https://developer.ektron.com/Forums/)是我找到的最好的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T00:22:54.883

Ektron 开发中心现在位于[http://developer.ektron.com](http://developer.ektron.com)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-12T23:34:58.757

还有 Ektron 的客户门户网站，其中包含已知问题的知识库。

[https://portal.ektron.com/knowledgebase](https://portal.ektron.com/knowledgebase)

# drupal - Flex/PHP Web 应用程序与 Drupal 站点的集成？

> ID：10747793
> 
> 赞同：0
> 
> 时间：2012-05-25T02:38:01.533
> 
> 标签：drupal

我们正在计划我们在 Flex/PHP/Zend/MySQL 中的新业务应用程序。我们的公司网站目前也有一些静态页面。我们想要实现的是将静态站点转换为 Drupal 站点，并将我们的业务应用程序集成到 Drupal 站点中。

基本上，我们希望在整个 drupal 站点和业务应用程序中拥有单一用户身份验证/授权，换句话说，我们希望在我们的业务应用程序中利用 Drupal 的用户管理。此外，业务应用程序的入口点将是 drupal 站点中的页面之一。

由于我是 Drupal 的新手，我们仍在评估这项技术，如果能提供一些简短的步骤来说明如何实现这一点，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T01:51:55.843

我们所做的是编写一个自定义模块来呈现 flex 应用程序使用的 json 或 xml。基本上，您将学习如何在 drupal 模块中实现挂钩菜单......不需要太多的 drupal 代码。在 drupal.org 联系表格上找到我，我很乐意发送示例代码。Metzlerd 是我的 Drupal 名称。

熟悉 dbtng，drupal 的数据库 api 也很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:53:04.960

你正在尝试的正是我现在正在做的事情。

您必须使用drupal 作为您的flex 应用程序的后端，并且由于drupal 是php/mysql，它与连接flex 应用程序的php 应用程序相同。

除了 Drupal 用户管理之外，您甚至可以利用 drupal 的模块和内容管理功能。您可以创建自定义的 drupal 模块，甚至将它们公开给 flex。

您将需要服务和 AmfPHP 模块才能在您的 drupal 站点中启用。服务模块将向您的 Flex 应用程序公开您的 drupal 服务（内容读写、编辑、用户等）。

Amfphp 将直接以 AMF 格式处理您的 flex 应用程序数据通信，因此无需担心太多 XML。您可以像创建 flex php 应用程序一样创建一个 flex 应用程序。

希望这可以帮助。

# iphone - 是否可以重新定位和调整标准 UITableViewCell 的 UIImageView 大小

> ID：10747797
> 
> 赞同：0
> 
> 时间：2012-05-25T02:38:30.727
> 
> 标签：iphone, objective-c, ios, ipad

现在我知道 UITableViewCell 默认有一个 imageView 但是我尝试调整它的大小和原点，但它不会这样做。我是否必须子类化 UITableViewCell 才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:26:45.123

如果你想改变表格视图单元格的默认样式，你最好继承一个，你可以通过`layoutSubviews`方法很容易地改变它的图像视图框架，就像这样：

```
@implementation CustomTableViewCell

//...

- (void)layoutSubviews {
  [super layoutSubviews];

  // ...
  CGRect imageViewFrame = CGRectMake(...);
  [self.imageView setFrame:imageViewFrame];

  // you can also modify the frame or position for textLabel, detailTextLabel, etc.
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:40:04.773

您最好的选择是创建一个自定义`UITableViewCell`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T02:41:51.857

最简单的方法是`UIImageView`在`cell.contentview`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T03:33:21.397

```
UIImageView *myImageview = [[UIImageView alloc] initWithFrame:CGRectMake(100, 5, 30, 30)];
myImageview.image = [UIImage imageNamed:@"image.png"];
[cell.contentView  addSubview:myImageview];
[myImageview release]; 
```

# django - 在 django 中找不到模板

> ID：10747798
> 
> 赞同：1
> 
> 时间：2012-05-25T02:38:40.257
> 
> 标签：django, django-templates

我正在使用 django 1.4

Django 尝试按以下顺序加载这些模板：

```
Using loader django.template.loaders.filesystem.Loader:
    /home/user/mysite/template/<WSGIRequest path:/polls/what/, GET:<QueryDict: {}>, POST:<QueryDict: {}>, 
```

使用`pwd`我看到这个：

```
/home/user/mysite/template 
```

在`template I have`民意调查中`

这是我放入的`settings.py`

```
TEMPLATE_DIRS = (
    '/home/user/mysite/template', 
```

现在在我看来：

```
return render_to_response(request, 'polls/index.html', 
```

为什么还在抱怨？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T02:59:30.070

这可能不是您唯一的问题，但[render_to_response](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render-to-response)首先采用模板名称，然后是上下文和上下文实例。

尝试这个

```
from django.template import RequestContext

def view_name(request):
    # view code 
    return render_to_response('polls/index.html',
                               context_instance=RequestContext(request)) 
```

或者，正如评论中所建议的，您打算使用[`render`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)快捷方式：

```
from django.shortcuts import render

def view_name(request):
    # view code 
    return render(request, 'polls/index.html') 
```

但还要确保您在模板中的投票中有一个名为 index.html 的模板

```
myapp/
    myapp/
        ...
        settings.py
        template/
            polls/
                index.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:53:38.363

添加斜线

```
return render_to_response(request, '/polls/index.html', 
```

# c# - WPF Linq 将 join-qry 绑定到 DataGrid

> ID：10747800
> 
> 赞同：0
> 
> 时间：2012-05-25T02:39:03.443
> 
> 标签：c#, wpf, linq, binding, datagrid

我有以下查询：

```
var qry = from itemA in db.TableA 
          join itemB in db.TableB on itemA.ID equals itemB.ID  
          join itemC in db.ItemC on itemA.ID equals itemC.ID  
          select new { itemC, itemA, itemB}; 
```

如果我现在将查询绑定到 Datagrid，如下所示：

```
dgTest.ItemsSource = qry; 
```

并像这样配置 Datagrid 的 TextColumn：

```
<DataGrid x:Name="dgTest" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Test" Binding="{Binding TableA.Name}"/>
    </DataGrid.Columns>
</DataGrid> 
```

该列是空的......
谁能告诉我我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:00:34.907

您不能为数据绑定使用隐式类型变量。

让我们假设你的 object ，`TableA`看起来像这样：`TableB``TableC`

```
public class TableA
{
    public int ID { get; set; }
    public string Name { get; set; }
}

public class TableB
{
    public int ID { get; set; }
}

public class TableC
{
    public int ID { get; set; }
} 
```

现在您需要创建一个具体的类，而不是像在`select new {`语句中那样使用隐式类型。

例如：

```
public class MyConcreteClass
{
    public TableA TableA { get; set; }
    public TableB TableB { get; set; }
    public TableC TableC { get; set; }
} 
```

最后，您有 LINQ 查询的类应如下所示：

```
public class MyDataSource : INotifyPropertyChanged
{
    private Database db;

    public MyDataSource()
    {
        db = new Database()
        {
            TableA = new List<TableA> 
            {
                new TableA { ID = 1, Name = "Hello world!" }
            },
            TableB = new List<TableB>
            {
                new TableB { ID = 1 }
            },
            TableC = new List<TableC>
            {
                new TableC { ID = 1 },
                new TableC { ID = 2 }
            }
        };
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public IEnumerable<MyConcreteClass> MyConcreteClass
    {
        get { return this.MyQuery(); }
    }

    private IEnumerable<MyConcreteClass> MyQuery()
    {
        var qry = from itemA in db.TableA
                  join itemB in db.TableB on itemA.ID equals itemB.ID
                  join itemC in db.TableC on itemA.ID equals itemC.ID
                  select new MyConcreteClass
                  {
                      TableA = itemA,
                      TableB = itemB,
                      TableC = itemC
                  };

        return qry.AsEnumerable();
    }
} 
```

随着`Database`班级寻找类似的东西：

```
public class Database
{
    public IEnumerable<TableA> TableA { get; set; }
    public IEnumerable<TableB> TableB { get; set;  }
    public IEnumerable<TableC> TableC { get; set;  }
} 
```

并将`ItemsSource`您的属性设置`DataGrid`为`{Binding MyConcreteClass}`.

最重要的几点是：

*   您只能绑定到一个属性。您不能将数据绑定到字段或方法。
*   您不能绑定到隐式类型。

如果需要，不要忘记实现您的视图模型`INotifyPropertyChanged`，并在需要时使用`ObservableCollection`s 。

# html - 在 wordpress 帖子中嵌入来自 github 的脚本

> ID：10747802
> 
> 赞同：0
> 
> 时间：2012-05-25T02:39:07.467
> 
> 标签：html, wordpress

我使用 github 来备份和分享我的脚本。我希望能够在我的博客上发布其中的一些内容。是否可以在我的 wordpress 博客中嵌入脚本（如果可能的话，语法高亮）？ [这](https://github.com/Gen2ly/scripts/blob/master/.scripts/pspvidconv)只是我想做的其中之一。任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:20:50.573

像[https://gist.github.com/](https://gist.github.com/)之类的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:25:30.450

查看： [http](http://wordpress.org/extend/plugins/embed-github-gist/) ://wordpress.org/extend/plugins/embed-github-gist/ 和 [http://wordpress.org/extend/plugins/syntaxhighlighter/screenshots/](http://wordpress.org/extend/plugins/syntaxhighlighter/screenshots/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:09:55.237

自己找到了一种方法来做到这一点。指出 GitHub Gist 看起来是最好的解决方案。由于要点是存储库，我了解到我可以更新它们，因此我博客上的脚本将被更新。我为它写了一个脚本并将它贴在[这里](http://linuxtidbits.wordpress.com/2012/06/07/embedded-scripts-in-wordpress-with-github-gist-and-update-script/)。感谢您的帮助/评论。

# php - Facebook 应用程序在 Facebook 应用程序内加载

> ID：10747804
> 
> 赞同：0
> 
> 时间：2012-05-25T02:39:18.813
> 
> 标签：php, facebook, api, facebook-page

我的应用程序正在 facebook 中加载嵌套版本的 facebook。只有当您单击应用书签或发送给用户的邀请时，它才会这样做。

请看链接，你会立即看到（看标题）

[http://apps.facebook.com/passparcelapp/?fb_source=bookmark_apps&ref=bookmarks&count=0&fb_bmpos=1_0](http://apps.facebook.com/passparcelapp/?fb_source=bookmark_apps&ref=bookmarks&count=0&fb_bmpos=1_0)

我绞尽脑汁想弄清楚为什么会这样。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:34:58.743

您的代码有两个“fb-root” div（会搞砸）和两个 fb.init()，也会搞砸。

但主要问题可能是因为您还尝试加载 jQuery（与其他库一样）两次 - 一次靠近正文底部，一次在标题中 - 这会导致 JavaScript 错误，从而导致您的重定向。加载的时间会影响行为，这就是为什么你会在本地和现场得到差异 - 而且它可能会再次随机变化。

你也有不应该在那里的东西。

您需要首先认真整理代码 - 然后希望它能够正常工作。但是现在，一切都结束了！

# sql - ORA-01446: 无法从具有 DISTINCT、GROUP BY 等的视图中选择 ROWID 或采样

> ID：10747807
> 
> 赞同：1
> 
> 时间：2012-05-25T02:39:30.140
> 
> 标签：sql, oracle, oracle10g, ora-01446

只是试图在客户表中插入一个未包含在错误表中的行。

- 看法

```
Create View A3_SRC_CUST_VIEW As
Select SRC_CUST_A.*, rowid as row_id From SRC_CUST_A
Union All
Select SRC_CUST_B.*, rowid as row_id From SRC_CUST_B; 
```

-- 插入语句

```
Insert Customer (DW_CUST_ID, CUSTID, CUSTNAME, CUSTEMAIL, CUSTLOC)
Select  Dw_Cust_Id.Nextval,  v.CID,  v.NAME, v.Email, v.LOC
From CustView v
Where v.rowid Not In
    (Select Source_RowId From A3_Error_Event  Where Filter_Id = 4 ); 
```

我得到的错误是*ORA-01446: cannot select ROWID from, or sample, a view with DISTINCT, GROUP BY, etc. 01446\. 00000 - “cannot select ROWID from, or sample, a view with DISTINCT, GROUP BY等。”*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:43:55.440

您正在从视图中选择 rowid 而不是 row_id。这会导致错误。

# c++ - C ++ 11中的'typedef'和'using'有什么区别？

> ID：10747810
> 
> 赞同：1095
> 
> 时间：2012-05-25T02:39:51.960
> 
> 标签：c++, c++11, typedef, using-declaration

我知道在 C++11 中我们现在可以`using`用来写类型别名，比如`typedef`s：

```
typedef int MyInt; 
```

据我了解，相当于：

```
using MyInt = int; 
```

新语法源于努力表达“模板类型定义”：

```
template< class T > using MyType = AnotherType< T, MyAllocatorType >; 
```

但是，对于前两个非模板示例，标准中是否还有其他细微差别？例如，`typedef`s 以“弱”的方式进行混叠。也就是说，它不会创建新类型，而只会创建一个新名称（这些名称之间的转换是隐含的）。

它是相同的`using`还是生成一个新的类型？有什么不同吗？

* * *

## 回答 #1

> 赞同：632
> 
> 时间：2012-05-25T03:16:42.650

它们是等效的，来自标准（强调我的）（7.1.3.2）：

> typedef-name 也可以由别名声明引入。using 关键字之后的标识符成为 typedef-name，标识符之后的可选属性说明符序列属于该 typedef-name。**它具有与由 typedef 说明符引入的语义相同的语义。**特别是，它没有定义新的类型，并且它不应出现在 type-id 中。

* * *

## 回答 #2

> 赞同：311
> 
> 时间：2015-10-05T22:58:29.870

它们基本相同，除了：

> 别名声明与模板兼容，而 C 风格的 typedef 则不兼容。

* * *

## 回答 #3

> 赞同：218
> 
> 时间：2014-04-21T11:39:59.273

**using**语法在模板中使用时具有优势。如果需要类型抽象，还需要保留模板参数以便以后可以指定。你应该写这样的东西。

```
template <typename T> struct whatever {};

template <typename T> struct rebind
{
  typedef whatever<T> type; // to make it possible to substitue the whatever in future.
};

rebind<int>::type variable;

template <typename U> struct bar { typename rebind<U>::type _var_member; } 
```

但是**使用**语法简化了这个用例。

```
template <typename T> using my_type = whatever<T>;

my_type<int> variable;
template <typename U> struct baz { my_type<U> _var_member; } 
```

* * *

## 回答 #4

> 赞同：115
> 
> 时间：2020-06-04T13:50:18.650

[*以下所有标准参考均指[N4659：2017 年 3 月 Kona 后工作草案/C++17 DIS](https://timsong-cpp.github.io/cppwp/n4659/)。*]

* * *

## Typedef 声明可以用作初始化语句，而别名声明不能^((+))用作初始化语句

> 但是，对于前两个非模板示例，标准中是否还有其他细微差别？

*   **语义**差异：无。
*   **允许的上下文中的**差异：一些^((++))。

^((+) [P2360R0](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2360r0.html) ( *Extend init-statement to allow alias-declaration* )[已被 CWG 批准，](https://github.com/cplusplus/papers/issues/1034)从 C++23 开始，typedef 声明和别名声明之间的这种不一致将被删除。)
^((++) 除了*别名模板*的例子，在原帖中已经提到过。)

### 相同的语义

由[[dcl.typedef]/2](https://timsong-cpp.github.io/cppwp/n4659/dcl.typedef#2) [摘录，**强调**我的]管理

> **[dcl.typedef]/2** typedef [*-name*](https://timsong-cpp.github.io/cppwp/n4659/dcl.typedef#nt:typedef-name) 也可以通过 [*alias-declaration*](https://timsong-cpp.github.io/cppwp/n4659/dcl.dcl#nt:alias-declaration)引入。关键字后面的标识符*成为*`using`typedef *-name* ，标识符后面的可选*属性说明**符*序列属于该*typedef-name*。**这样的 *typedef-name*具有相同的语义，就好像它是由说明`typedef`符引入的一样。**[...]

由*别名声明*引入的*typedef-name*与由声明引入的语义**相同**。***`typedef`***

 ***### 允许的上下文中的细微差别

然而，这并不**意味着**这两种变体对于它们可能被使用**的上下文具有相同的限制。**事实上，尽管是一个极端情况，[*typedef 声明*](https://timsong-cpp.github.io/cppwp/n4659/dcl.typedef#1)是一个[*init 语句*](https://timsong-cpp.github.io/cppwp/n4659/gram.stmt)，因此可以在允许初始化语句的上下文中使用

```
// C++11 (C++03) (init. statement in for loop iteration statements).
for (typedef int Foo; Foo{} != 0;)
//   ^^^^^^^^^^^^^^^ init-statement
{
}

// C++17 (if and switch initialization statements).
if (typedef int Foo; true)
//  ^^^^^^^^^^^^^^^ init-statement
{
    (void)Foo{};
}

switch (typedef int Foo; 0)
//      ^^^^^^^^^^^^^^^ init-statement
{
    case 0: (void)Foo{};
}

// C++20 (range-based for loop initialization statements).
std::vector<int> v{1, 2, 3};
for (typedef int Foo; Foo f : v)
//   ^^^^^^^^^^^^^^^ init-statement
{
    (void)f;
}

for (typedef struct { int x; int y;} P; auto [x, y] : {P{1, 1}, {1, 2}, {3, 5}})
//   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ init-statement
{
    (void)x;
    (void)y;
} 
```

而[*别名声明*](https://timsong-cpp.github.io/cppwp/n4659/dcl.dcl#nt:alias-declaration)不是*init-statement*，因此**不能**在允许初始化语句的上下文中**使用**

 ***```
// C++ 11.
for (using Foo = int; Foo{} != 0;) {}
//   ^^^^^^^^^^^^^^^ error: expected expression

// C++17 (initialization expressions in switch and if statements).
if (using Foo = int; true) { (void)Foo{}; }
//  ^^^^^^^^^^^^^^^ error: expected expression

switch (using Foo = int; 0) { case 0: (void)Foo{}; }
//      ^^^^^^^^^^^^^^^ error: expected expression

// C++20 (range-based for loop initialization statements).
std::vector<int> v{1, 2, 3};
for (using Foo = int; Foo f : v) { (void)f; }
//   ^^^^^^^^^^^^^^^ error: expected expression 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2018-03-31T08:20:30.557

它们本质上是相同的，但`using`提供了`alias templates`非常有用的功能。我能找到的一个很好的例子如下：

```
namespace std {
 template<typename T> using add_const_t = typename add_const<T>::type;
} 
```

所以，我们可以使用`std::add_const_t<T>`而不是`typename std::add_const<T>::type`

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2019-06-12T02:59:59.027

我知道原始海报有一个很好的答案，但是对于像我这样在这个线程上绊倒的人来说[，提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2003/n1489.pdf)`typedef`中有一个重要的注释，我认为它为这里的讨论增加了一些价值，特别是关于关键字是否是评论中的担忧将来将被标记为已弃用，或因冗余/旧而被删除：

> 有人建议（重新）使用关键字 typedef ... 来引入模板别名：
> 
> ```
> template<class T>
>   typedef std::vector<T, MyAllocator<T> > Vec; 
> ```
> 
> 该表示法的优点是使用已知的关键字来引入类型别名。但是，它也显示了几个缺点 [原文如此]，其中在别名不是指定类型而是模板的上下文中使用已知的关键字为类型名称引入别名会造成混淆；`Vec`不是类型的别名，**不应**作为 typedef-name。名称`Vec`是家族的名称`std::vector<•, MyAllocator<•&gt; >`——其中项目符号是类型名称的占位符。因此，我们不建议使用“typedef”语法。另一方面，句子
> 
> ```
> template<class T>
>   using Vec = std::vector<T, MyAllocator<T> >; 
> ```
> 
> 可以阅读/解释为：*从现在开始，我将`Vec<T>`用作`std::vector<T, MyAllocator<T> >`*. 通过这种阅读，别名的新语法似乎是合乎逻辑的。

对我来说，这意味着继续支持`typedef`C++ 中的关键字，因为它仍然可以使代码更具*可读性和可理解性*。

更新`using`关键字是专门针对模板的，并且（正如在接受的答案中指出的那样）当您使用非模板`using`并且`typedef`机械相同时，因此基于可读性和意图交流的选择完全取决于程序员.

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2019-12-02T22:23:42.367

这两个关键字是等效的，但有一些注意事项。一是声明函数指针 with`using T = int (*)(int, int);`比 with 更清晰`typedef int (*T)(int, int);`。其次是模板别名形式是不可能的`typedef`。第三是公开 C API 需要`typedef`在公共标头中。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2022-01-27T09:52:14.023

截至目前，C++23 将越来越`typedef`紧密`using`：[P2360](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2360r0.html)建议`using`构成一个*init 语句*，例如[@dfrib](https://stackoverflow.com/users/4573247/)的答案中列出的那些`error: expected expression`.

但是，即使使用 P2360，a`typedef`也不能是模板。

总的来说，`using`严格来说比 更强大`typedef`，而且 IMO 也更具可读性。******

# sql - sql 触发器 - 想要将现有行值与插入的值进行比较

> ID：10747811
> 
> 赞同：0
> 
> 时间：2012-05-25T02:39:54.470
> 
> 标签：sql, triggers, insert

我正在创建一个触发器，它应该将插入的值与表中已经存在的值进行比较。旧的引用器在这里不起作用，因为我正在插入，但是我怎样才能引用已经存在的东西呢？这是我的表格和触发器：

```
 create table events(eid char(2) primary key, cid char(2));

    create table activities(mid char(2), eid char(2),
    primary key (mid, eid),
    constraint activities_fk foreign key (eid) references events(eid));

    create or replace trigger check_valid
    before insert or update on activities
    for each row when (old.mid=new.mid)
    declare
v_eid char(2);
v_cid char(2);
n_cid char(2);

    begin
select eid into v_eid from activities 
where mid=:new.mid;

select cid into v_cid from events
where eid=v_eid;

select cid into n_cid from events
where eid=:new.eid; 

if v_cid=n_cid then
    raise_application_error(-20000, 'Error');
end if;
    end check_valid;
    /
    show errors; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:37:43.077

您通常无法从要插入到触发器中的表中进行选择。这就是变异表问题，或者我经常称之为“该死的变异表问题”。

基本上，不要这样做。这是个坏主意。如果您同时在桌面上运行两个会话会发生什么？触发器触发并且两个会话都没有看到另一个会话在提交之前所做的事情，这是在触发器之后。然后，您的数据库中有意外的数据。

[Tom Kyte 说](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:9579487119866)，“当我遇到变异表错误时，我的逻辑出现了严重的致命缺陷。”

# windows - 如何快速收集包含路径和大小信息的文件列表？

> ID：10747812
> 
> 赞同：1
> 
> 时间：2012-05-25T02:39:56.130
> 
> 标签：windows, api, findfirst

FindFirst/FindNext 很慢。我看到像 Def​​raggler 这样的程序可以快速收集这个列表。他们使用什么 Windows API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T03:29:29.147

你说“FindFirst/FindNext”很慢。我认为在执行方面，_findfirst(), _findnext(), _findclose() #include <io.h> 是尽可能快的。

如果您需要很长的路径名，则需要使用 Windows API 版本。

Windows API 是 FindFirstFile()、FindNextFile() 和 FindClose()，头文件是 #include <windows.h>。

Windows API 的文档告诉您如何在目录字符串前面加上“\?\”并获得最大可能的路径长度。

如果您需要比 C 库函数提供的更多信息，则需要使用 Windows API FindFirstFileEx()、FindNextFileEx()、FindClose()。

我必须向您推荐文档以获取详细信息。

最简单，C 库，_findfirst()：[https ://msdn.microsoft.com/en-us/library/zyzxfzac.aspx](https://msdn.microsoft.com/en-us/library/zyzxfzac.aspx)

返回更多信息，最大路径长度，Windows API FindFirstFile()：[https ://msdn.microsoft.com/en-us/library/windows/desktop/aa364418(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364418(v=vs.85).aspx)

返回的最大信息、最大路径长度、Windows API FindFirstFileEx()： [https ://msdn.microsoft.com/en-us/library/windows/desktop/aa364419(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364419(v=vs.85).aspx)

如果链接不再有效，您可能可以搜索“C 语言 _findfirst()”等内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-25T02:59:28.497

不确定碎片整理程序；但是你可以使用 powershell

如果您使用的是 windows xp 系统，则必须下载并安装它

使用 powershell，您可以执行简单的查询

例如：

```
$foo = Get-childItem -Path "c:\windows" 
```

在 powershell 中，这会将 windows 目录中的所有文件名放入一个名为 $foo 的数组中

然后，您可以更进一步，获取数组并将其通过管道传输到文件中

```
$foo >> c:\temp\test.txt 
```

示例输出：

```
    模式 LastWrite 时间 长度 名称                                       
---- ------------- ------ ----      
d---- 2009 年 7 月 14 日凌晨 1:32 网络                                        
d---- 2012 年 5 月 9 日凌晨 3:20                                     
-a--- 2012 年 2 月 3 日下午 1:01 16896 AsTaskSched.dll                            
-a--- 2011 年 4 月 6 日上午 12:46 32200 atiogl.xml                                 
-a--- 2/3/2012 12:35 PM 0 ativpsrm.bin                               
-a--- 2010 年 11 月 20 日晚上 10:24 71168 bfsvc.exe                                  
-a--s 2012 年 5 月 24 日晚上 10:17 67584 bootstat.dat                               
-a--- 2012 年 3 月 21 日晚上 11:58 1908 diagerr.xml                                
-a--- 2012 年 3 月 21 日晚上 11:58 1908 diagwrn.xml                                
-a--- 2012 年 5 月 4 日下午 6:19 28406 DirectX.log    

```

有关 powershell 结帐的更多信息

[http://technet.microsoft.com/en-us/library/bb978526.aspx](http://technet.microsoft.com/en-us/library/bb978526.aspx)

# actionscript-3 - 在 AS3 中更改默认值后重置鼠标光标行为

> ID：10747824
> 
> 赞同：0
> 
> 时间：2012-05-25T02:41:24.240
> 
> 标签：actionscript-3, flash

`我有一个影片剪辑，我想在鼠标悬停和鼠标移出时充当按钮，因此我添加了一个侦听器以将光标更改为按钮和箭头以滚动和滚动：

```
Object(this).my_mc.addEventListener(MouseEvent.ROLL_OVER,overButton);
Object(this).my_mc.addEventListener(MouseEvent.ROLL_OUT,outButton);

function overButton(e:MouseEvent):void {
    Mouse.cursor="button";
}

function outButton(e:MouseEvent):void {
    Mouse.cursor="arrow";
} 
```

问题是在将鼠标移出`my_mc`并执行此代码后，即使在其他按钮符号上滚动时，鼠标光标也将始终为箭头。就像它只会根据函数的最后一条指令`outButton`运行。

如何重置鼠标光标行为，以便它可以正常使用可选择的文本区域和按钮？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:06:19.477

您可能应该将该`Mouse.cursor`属性恢复为“自动”。

```
Mouse.cursor="auto" 
```

将其设置为`MouseCursor="arrow"`展开意味着它将始终显示箭头。

但是，我建议删除这些事件侦听器，并将[buttonMode](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html#buttonMode)属性设置`MovieClip`为`true`.

它有点干净，我假设执行更好的 b/c Flash Player 无需任何额外代码即可管理它。

# http - HTTP 管道和错误处理

> ID：10747828
> 
> 赞同：2
> 
> 时间：2012-05-25T02:41:52.683
> 
> 标签：http, sockets

让我们想象一个 Web 服务器处理一系列请求，其中一个由于某种原因而失败。在什么情况下服务器可以保持连接，在什么情况下应该关闭它？显然，403和404这样的错误可以在不关闭连接的情况下处理。如果响应的一部分已经发送，则错误很可能会导致连接关闭。

但是“正常”的 5xx 错误呢？流行的 Web 服务器实现是倾向于保留管道还是关闭它们？

非常感谢所有信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:56:19.870

我认为通常连接不会因 5xx 错误而关闭，因为它们特定于请求，而不是连接，因此同一连接上的不同请求可能针对另一个资源。

只有在存在无法保持打开状态的原因（例如 NTLM 身份验证失败 (401)，这取决于连接）时，才应关闭连接。由于几乎所有其他原因，连接应该保持打开状态，因为请求是独立的，并且 HTTP 确实没有连接语义。

但是，我不知道流行的 Web 服务器实现是做什么的。如果你能解释更多你试图解决的问题（你为什么关心连接是否关闭），那么也许我们可以提供更多信息。

# iphone - 对于副本 NSString，我是否需要明确保留副本

> ID：10747834
> 
> 赞同：2
> 
> 时间：2012-05-25T02:44:21.140
> 
> 标签：iphone, objective-c, memory-management

> **可能重复：**
> [NSString @property，使用复制而不是保留](https://stackoverflow.com/questions/587414/nsstring-property-using-copy-instead-of-retain)

我有一个基本的内存管理问题如下：

```
NSString *someName = [NSString stringWithFormat:@"Chris"];
Person *p = [[Person alloc] init];
p.name = someName; 
```

如果“name”设置为“retain”，我知道“someName”将自动释放一次并保留一次，因此“p.name”将保留 NSString 与一个 retainCount。

但是如果“名称”设置为复制呢？虽然“someName”给“p.name”一个自己的副本，但副本仍然会自动释放，对吧？那么，我是否需要明确保留“someName”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:49:09.437

不，副本在返回副本之前不会自动释放副本（或者，换句话说，它返回您拥有的对象）。如果这样做，复制属性将毫无价值，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:49:20.600

在这两种情况下都不需要释放`someName`：复制成为一个独立的对象；它的创建不会增加原始的引用计数。

`someName`保留将精确地增加您在帖子中描述的方式的引用计数。

# objective-c - Xcode 中的 pushViewController

> ID：10747836
> 
> 赞同：1
> 
> 时间：2012-05-25T02:45:01.230
> 
> 标签：objective-c, ios, xcode, xcode4.2

我正在尝试将视图从表格单元格推送到另一个视图，我知道那里有很多教程，我已经尝试了很多，已经尝试了 2 天但仍然无法正常工作，这是我的代码..

AppDelegate.h

```
#import <UIKit/UIKit.h>

@class RootViewController;
@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) RootViewController *rootViewController;
@end 
```

AppDelegate.m

```
#import "AppDelegate.h"

#import "RootViewController.h"
@implementation AppDelegate

@synthesize window = _window;
@synthesize rootViewController;
- (void)dealloc
{
    [_window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.rootViewController = [[[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.rootViewController;
    [self.window makeKeyAndVisible];
    return YES;
}

@end 
```

RootViewController.h

```
#import <UIKit/UIKit.h>

@interface RootViewController : UITableViewController{

    NSMutableArray* array;

}
@property(nonatomic, retain)NSMutableArray* array;
@end 
```

根视图控制器.m

```
#import "RootViewController.h"
#import "SubLevelViewController.h"
@implementation RootViewController
@synthesize array;
- (void)viewDidLoad {
    [super viewDidLoad];

    array = [[NSMutableArray alloc] init];

    [array addObject:@"One"];
    [array addObject:@"Two"];
    [array addObject:@"Three"];

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release anything that can be recreated in viewDidLoad or on demand.
    // e.g. self.myOutlet = nil;
}

#pragma mark Table view methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [array count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSString *cellValue = [array objectAtIndex:indexPath.row];

    cell.textLabel.text = cellValue;

    // Configure the cell.

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    SubLevelViewController *sub = [[SubLevelViewController alloc] initWithNibName:@"SubLevelViewController" bundle:nil];

    sub.title = @"My First View";

    [self.navigationController pushViewController:sub animated:YES];

}

- (void)dealloc {
    [array release];
    [super dealloc];
}

@end 
```

和 main.m

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:08:57.053

实际上，您的问题很简单，您参考`self.navigationController`，但视图控制器在 AppDelegate 中没有设置导航控制器！您正在向 nil 发送一条消息，该消息产生 nil （因此，没有任何反应）。在 appDelegate 中试试这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.rootViewController = [[[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease];
    UINavigationController * controller = [[[UINavigationController alloc]initWithRootViewController:self.rootViewController]autorelease];
    self.window.rootViewController = controller;
    [self.window makeKeyAndVisible];
    return YES:
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:17:09.300

同意 CodaFi，如果您想保留推送/弹出堆栈，您需要创建一个 UINavigationController 并记住它来推送和弹出任何 UIViewController。不要使用 self.navigationController。

# opengl - 在 CUDA 中，如何在内核函数中将屏幕空间坐标转换为世界空间坐标

> ID：10747838
> 
> 赞同：0
> 
> 时间：2012-05-25T02:45:16.130
> 
> 标签：opengl, cuda, coordinate-transformation, raycasting

在这里，我尝试将光线投射添加到真实的 3D 场景中。众所周知，在光线投射中，为了投射光线，我们需要获取光线的方向。射线中的第一个点是射线的起点，我可以从 glLookAt 获得。射线中的第二个点是屏幕中的每个点。在原始的CUDA ray-casting SDK中，它通过以下代码在Kernel Function中获取屏幕点：

```
uint x = blockIdx.x*blockDim.x + threadIdx.x;
uint y = blockIdx.y*blockDim.y + threadIdx.y; 
```

(x,y) 是屏幕空间坐标吗？所以现在我需要将 (x, y) 翻译成世界空间坐标。一个好人告诉我使用 gluUnProject 来完成这项工作。好想法！但是我不能在 CUDA 内核中调用 OpenGL 函数。

也许我可以使用可逆矩阵进行翻译。但我不确定正确的方法。有没有人可以给我一个关于如何在 CUDA 内核函数中将屏幕坐标转换为世界坐标的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:54:23.760

我的解决方案是这样的：在CUDA内核中，它以这种方式获取屏幕坐标：

```
uint x = blockIdx.x*blockDim.x + threadIdx.x;
uint y = blockIdx.y*blockDim.y + threadIdx.y; 
```

实际上它代表屏幕垂直于Z轴的另一个坐标空间。从 gluPerspective 中，我们也可以得到屏幕到视图位置的距离。因此，当我们知道视图位置时，我们可以计算屏幕的 Z 坐标。所以屏幕中每个点的坐标在这个特定的坐标空间下都是(x,y,z)。

在这个特定的坐标空间中，视图方向平行于 Z 轴。此外，我们知道世界空间中的视图方向。所以我们只需要计算将 Z 轴对齐的视图方向（特别是上面的坐标空间）转换为真实视图方向（在世界空间中）的转换矩阵。

然后我们使用这个矩阵将屏幕中的每个点 (x,y,z) 转换为一个世界空间。这就是世界空间坐标。

我现在正在尝试实现这个，我认为这个想法还可以，实现后我会接受这个答案。

# delphi - 调用不存在的方法后，Delphi SOAP 服务器无法处理 SOAPAttachemnt

> ID：10747839
> 
> 赞同：1
> 
> 时间：2012-05-25T02:45:32.133
> 
> 标签：delphi, soap

我在解决另一个 SOAP 问题时发现了这个问题，并在此处发布以查看是否有人遇到过它或有任何建议。

**问题：**

*   调用不存在的方法后，SOAP 服务器将不会处理接收 TSOAPAttachment 对象的方法。
*   在调用不存在的方法后，TSOAPAttachment.SourceStream 变得不可访问并且 TSOAPAttachment.CachFile 为空
*   BorlandSoapAttachment(n) 临时文件被锁定并在问题发生时堆积起来。
*   重启IIS或回收App Pool后恢复正常

**创建此问题的步骤：**

*   最初使用 3 个方法创建一个简单的 Soap 客户端/服务器应用程序，其中一个应该接收并返回一个 TSOAPAttachment，另外两个可以是任何东西，int 或 string。
*   我其实是按照这篇文章[http://blogs.embarcadero.com/pawelglowacki/2008/12/18/38624](http://blogs.embarcadero.com/pawelglowacki/2008/12/18/38624)创建了简单的soap应用程序，只是添加了一个接收和返回TSOAPAttachment的方法。所以我的界面是这样的：

代码

```
 TSimpleCalculator = class(TInvokableClass, ISoapCalculator)
  private
  public
    function add(a, b: Integer) : Integer; stdcall;
    function subtract(a, b: Integer): Integer; stdcall;
    function TestRequest(const Request: TSOAPAttachment): TSOAPAttachment; stdcall;
  end; 
```

*   创建此 Soap 服务器的客户端以调用所有三个方法。
*   在这一点上，一切都应该愉快地工作，即。客户端可以调用所有 3 种方法，服务器可以成功响应所有这些方法。

**现在，我删除了服务器中的 Subtract 函数，但仍然使用原始客户端。**

*   调用 Add 和 TestRequest 仍然成功完成。
*   但是，在我调用不存在的 Subtract 函数后，TestRequest 将不再起作用，但 Add 函数仍然起作用。
*   TestRequest 将有我上面描述的所有问题，即。服务器仍然响应它，但它无法访问 TSOAPAttachment 对象。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:06:57.683

我以前用过soap，但来自Java，而不是Delphi。但是因为 SOAP 无处不在，没关系，它必须遵循 SOAP 规范。SOAP 服务器应返回 SOAP 错误作为来自 SOAP 请求的回复，该请求不会与已发布的方法发生冲突。您的 Delphi SOAP 服务器应该生成 SOAP 错误，并且您的 Delphi SOAP 客户端应该正确处理该错误。您可以使用 TCP 流量监视器并分配过滤器，使其仅显示 SOAP 流量或使用 SOAP 流量监视器。使用监视器，您可以看到发送到服务器的请求（包括消息）以及回复。您可以查看有关 SOAP 规范的 W3C 在线文档。毕竟，您的 SOAP 应用程序必须遵循规范。

# c - C Error Open O_RDWR on Read-Only Flash NAND MTD0

> ID：10747841
> 
> 赞同：1
> 
> 时间：2012-05-25T02:45:49.773
> 
> 标签：c, file-io, readonly, flash-memory

我制作了一个从闪存 Nand 读取数据的代码（没有文件系统）。

```
fd = open("/dev/mtd0", O_RDONLY) 
```

它有效，然后我想尝试读写它..所以我将代码更改为：

```
fd = open("/dev/mtd0", O_RDWR) 
```

但它返回`-1`，意味着无法打开。但对于其他 MTD，它有效。

然后我看到`cat /proc/mtd`说MTD0是`RO`，另一个是`RW`（我认为它是只读和读写）

我试着用`MEMUNLOCK`

```
ioctl(fd, MEMUNLOCK, &mtdLockInfo) 
```

因为它需要`fd`，需要`open`所以我`O_RDONLY`不使用`O_RDWR`（返回`-1`）。

但它返回错误`Bad file description`。一定是因为`O_RDONLY`,, 不得不使用`O_WRONLY`or `O_RDWR`。

有什么办法可以解锁这个 MTD0，或者在不解锁的情况下在上面写字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:26:08.040

您的设备的内核驱动程序可能禁止该操作。您的设备很可能实际上是只读的或被驱动程序标记为只读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:22:22.787

我试图在设备树源（DTS）中更改我的 NAND 闪存的分区。

有一个只读选项。但是，我只改变了它们的大小。

完成了。我的 NAND 闪存可以访问了。

# iphone - 在 iOS 上，我们可以很容易地通过代码创建一个 Outlet——Actions 呢？

> ID：10747848
> 
> 赞同：2
> 
> 时间：2012-05-25T02:46:31.777
> 
> 标签：iphone, ios, uiviewcontroller, ibaction

在 iOS 上，如果我们使用 Interface Builder，我们可以轻松地创建 Outlet 和 Action。

如果我们使用 Objective-C 代码而不是 Interface Builder，我们也可以很容易地创建出口，看起来，只需

```
datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(200, 200, 200, 200)];
[self.view addSubview:datePicker]; 
```

并且我们在`.h`文件中定义了一个实例变量。

```
UIDatePicker *datePicker; 
```

我认为这就像一个奥特莱斯？

对于 Actions 怎么样——我们如何纯粹使用 Objective-C 代码（不使用 Interface Builder）为不同类型的用户交互创建 Actions？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:15:01.967

像这样：

```
- (void)someMethod {
  //...
  [button_ addTarget:self
              action:@selector(buttonAction:)
    forControlEvents:UIControlEventTouchUpInside];
  //...
}

//...

// Either |IBAction| or |void| is okay,
//   the former one is just used to be shown in Interface Builder
- (void)buttonAction:(id)sender {
  // your action code here
} 
```

注意：`IBOutlet`&`IBAction`仅用于 IB（Interface Builder 的缩写）。如果您不想使用 Interface Builder 来管理您的视图和操作，您可以忘记它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:48:18.493

使用`IBAction`宏：

```
 // in .h
 -(IBAction) myAction:(id) sender; 
```

# ios - iOS：我应该在 dealloc 函数中释放对象吗？

> ID：10747850
> 
> 赞同：2
> 
> 时间：2012-05-25T02:46:54.973
> 
> 标签：ios, release

我对内存管理很困惑。

在 .h 文件中声明变量 allNoticeArray：

```
@interface NoticeViewController : UITableViewController
{   
    NSMutableArray *allNoticeArray;    
}
@property (nonatomic, retain) NSMutableArray *allNoticeArray;
@end 
```

分配并初始化 .m 文件中的变量：

```
@implementation NoticeViewController
@synthesize allNoticeArray;
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.allNoticeArray = [[[NSMutableArray alloc] init] autorelease];
}
- (void)dealloc
{
    [super dealloc];
    /*
        ***should I release allNoticeArray here or not?***
    */
    //[allNoticeArray release];
} 
```

我应该在 dealloc 函数中释放 allNoticeArray 吗？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T02:54:31.507

看起来您是在手动管理内存而不是使用 ARC。

如果您使用的是 IOS5，[将项目转换为 ARC](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)可能会更容易，那么在这种情况下您不必担心 dealloc。

如果你不想使用 ARC，你需要在这个上下文中释放它，因为你在 viewDidLoad 中分配了它。您可能还对[这篇](http://iphonedevelopment.blogspot.co.nz/2010/09/dealloc.html)关于 dealloc 的文章感兴趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T03:30:38.900

是的，您必须释放该对象。您可以在您的 dealloc 方法中执行以下操作，这将释放您的对象。

```
self.allNoticeArray = nil; 
```

**原因：** 虽然您已自动释放数组，但您已将您的属性声明为保留。所以对象将被保留和使用。因此，要从内存中完全删除对象，您应该再次调用 release 。您可以在此处了解有关内存管理的所有信息[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T03:16:09.533

pre-ARC 内存管理的规则是：如果你分配、保留或复制一个对象，你必须稍后释放它，否则它会泄漏。您的属性设置为保留，因此它将保留其持有的任何值。您必须平衡它与 dealloc 中的释放。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T03:36:04.033

当不使用 ARC 时，您应该在 dealloc 中使用 release。您说得对，您在 .h 文件中的保留将保留计数增加一。Alloc/Init 创建一个保留计数为 1 的对象。自动释放将抵消该保留，但是您的 dealloc 释放将计算 .h 中的保留。

设置 self.allNoticeArray=nil; 与发布不同，但来自 sElan 的链接是一个很好的链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T02:57:06.370

简短的回答是否定的，但您正在做一些不推荐的事情。在您的代码中，您在一行中保留了两次数组。在下面的代码中，它只保留一次。

你应该像这样初始化数组 -

```
NSMutableArray *array = [[NSMutableArray alloc] init] autorelease];
self.allNoticeArray = array; 
```

我建议您考虑使用 ARC，它使内存管理在 IOS 5 中成为非问题。

# android - 移动应用程序中的虚拟信用/硬币

> ID：10747853
> 
> 赞同：-2
> 
> 时间：2012-05-25T02:47:09.780
> 
> 标签：android, iphone, mobile

在移动应用程序中是否有任何现有的用于虚拟币购买的好的 API？实际上，我想做一个跨平台的应用程序。我在 facebook 上进行了研究，有一个 facebook API 可供购买。但它仅适用于 facebook 应用程序/游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:55:34.300

通常，每个应用商店/市场都希望您使用它们来处理付款，以便他们可以从您的利润中分一杯羹（通常是 30%）。使用条款等通常禁止使用第三方支付提供商。因此，您不太可能找到跨平台的解决方案。PayPal 应该适用于大多数平台，但您必须确保它不违反使用条款。对于 Android，您可以使用应用内计费的非托管项目，iPhone 应该有类似的东西。您可能可以在自己的服务器上管理您的硬币，并通过所需的支付提供商在每个平台上购买它们，但这是一项相当多的工作。

# jquery - 在 var jQuery 中搜索 JSON

> ID：10747855
> 
> 赞同：0
> 
> 时间：2012-05-25T02:47:17.750
> 
> 标签：jquery, json, search

所以我在一个变量中存储了一个 JSON，但是我如何搜索它，基本上是当用户单击我要加载的企业名称并向他们显示商店地址、电话号码和其他详细信息时。

这是变量

```
var myMarkers = {
    "markers": [
    {
        "id": 1,
        "name": "Belconnen",
        "url_name": "belconnen",
        "address": "Shop 176, 3rd Floor, Westfield Shopping Centre, Benjamin Way",
        "suburb": "Belconnen",
        "state": "act",
        "postcode": 2618,
        "country": "Australia",
        "phone": "(02) 6251 1838",
        "fax": "",
        "photo": "dcddfcb5c806b2255c611bd2d108cead.JPG",
        "text": "",
        "display": 1,
        "lat": -35.238428606,
        "lng": 149.065917134,
        "email": "tc.belconnen@telechoice.com.au",
        "dealer_code": 63014,
        "region_id": 3,
        "type": 4
    }
] 
```

我已经轻松删除了大部分 JS。

这是我第一次尝试搜索和存储 JS，通常我会使用 PHP 来完成，但我认为获取 JS 更容易、更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:51:26.793

您可以使用`object.property`or`object['property']`语法访问对象的属性（两者是同义词，第二个允许您使用表达式）。

所以在你的情况下，你会得到这样的地址：

```
var address = myMarkers.markers[0].address; 
```

使用类似的代码来获取您想要的其他信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:03:21.853

要搜索任何特定条目，您可以执行以下操作：

```
var target = 'Belconnen'; // value of target will change depending on click

$.each(myMarkers.markers, function() {
  if(this.name.toLowerCase() == target.toLowerCase()) {
    console.log(this.address);
    console.log(this.state); // and more
  }
}); 
```

# javascript - jquery .animate 完成后开始播放 swf

> ID：10747858
> 
> 赞同：0
> 
> 时间：2012-05-25T02:47:23.267
> 
> 标签：javascript, jquery, flash, jquery-ui

我在隐藏的 div 中有一个 swf。它在第 1 帧停止，我希望它在 jquery 脚本完成后开始播放。这是我的代码：

```
 function doFlash() {
    $("#first_menu").hide("clip", { direction: "vertical" }, 500, function() {
    $('#flash_container').animate({top: 0}, 1500, function(){
    getElementById('FlashID').Play()});});
    }; 
```

但它根本不工作，它做动画但不开始播放 swf。提前致谢。

更新： wmode:transparent 问题现已修复，但 swf 仍未在 FF 和 Chrome 中播放。我按照 Fabrício Matté 的建议使用了 swfobject，但由于某种原因，它只是在 IE 中工作。我认为这可能与 oject 的 id 有关，但我不确定。这是示例的链接：http: [//molcajete.com.mx/natura/videos_fito/](http://molcajete.com.mx/natura/videos_fito/)感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:53:18.433

这个 API：[http](http://api.jquery.com/stop/) ://api.jquery.com/stop/或者`.is('animate')`可能有助于检查动画是否完成。

此外，如果您愿意，您可以设置在动画完成时调用的回调：http: [//docs.jquery.com/Effects/animate](http://docs.jquery.com/Effects/animate)

**示例代码**

```
if( $("#fooDov").is(":animated") ){
  alert("HULK!");
} 
```

**你的代码**

```
 function doFlash() {
    $("#first_menu").hide("clip", { direction: "vertical" }, 500, function() {
    $('#flash_container').animate({top: 0}, 1500, function(){
       if( $(this).is(":animated") )
            getElementById('FlashID').Play()});});
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:23:57.190

看来我只需要在对象上写下“名称”。

# matlab - 带有数据光标 Matlab 的 4D 绘图显示变量

> ID：10747860
> 
> 赞同：1
> 
> 时间：2012-05-25T02:47:34.537
> 
> 标签：matlab, graph, 4d

我无法弄清楚如何在我的图中显示 4 个变量。

我想改变自变量 X，V，以产生因变量 Y 和 Z。Y 是 X AND V 的函数。Z 是 Y AND X 的函数。

这可能更容易看到依赖关系：X、V、Y(X,V)、Z(X,Y(X,V))。

我使用了 surf 函数来绘制 X、Y、Z，但我也想知道 V 的值，我目前无法确定。

下面是一些测试数据来说明：

```
X = linspace(1,5,5)
V = linspace(1,5,5)
Capture = []
for j = 1:length(V)
Y = X.*V(j)
Capture = [Capture;Y]
end
[X,V] = meshgrid(X,V);
Z = Capture.*X
surf(X,Y,Z) 
```

如果我使用数据游标，我可以看到 X、Y、Z 的值，但我也想知道 V 的值。我知道我设置它的方式是正确的，因为如果我制作两个图，比如说：

```
surf(X,Y,Z)
surf(X,V,Z) 
```

然后使用数据光标在两个图形的 X 和 Z 的同一点上进行，V 和 Y 的值就是该点 (X,Z) 的值。

无论如何都可以显示 X、Y、V 和 Z 的值而不必生成两个单独的图表？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:29:49.553

使用颜色作为你的第四维度是可能的（它对你来说是否好看是一个品味问题）。

```
surf(X,Y,Z,V); #% 4th arg (V) is mapped onto the current colormap 
```

您可以[更改颜色图](http://www.mathworks.com/help/techdoc/ref/colormap.html)以适合您的口味。

```
colorbar #% displays a colorbar legend showing the value-color mapping 
```

编辑：发问者希望准确查看未显示数组中的数据，而不仅仅是颜色。这是自定义数据游标功能的工作。下面我使用纯匿名函数实现了这一点；在函数文件中执行此操作会稍微简单一些。

```
#% Step 0: create a function to index into an array...
#% returned by 'get' all in one step  
#% The find(ismember... bit is so it returns an empty matrix...
#% if the index is out of bounds (if/else statements don't work...
#% in anonymous functions)
getel = @(x,i) x(find(ismember(1:numel(x),i)));

#% Step 1: create a custom data cursor function that takes...
#% the additional matrix as a parameter
myfunc = @(obj,event_obj,data) {...
['X: ' num2str(getel(get(event_obj,'position'),1))],...
['Y: ' num2str(getel(get(event_obj,'position'),2))],...
['Z: ' num2str(getel(get(event_obj,'position'),3))],...
['V: ' num2str(getel(data,get(event_obj,'dataindex')))] };

#% Step 2: get a handle to the datacursormode object for the figure
dcm_obj = datacursormode(gcf);

#% Step 3: enable the object
set(dcm_obj,'enable','on')

#% Step 4: set the custom function as the updatefcn, and give it the extra...
#% data to be displayed
set(dcm_obj,'UpdateFcn',{myfunc,V}) 
```

现在工具提示应该显示额外的数据。请注意，如果您更改绘图中的数据，则需要重复`Step 4`将新数据传递给函数。

# c# - 如何在 azure 上以编程方式托管 wcf 服务

> ID：10747863
> 
> 赞同：7
> 
> 时间：2012-05-25T02:47:59.727
> 
> 标签：c#, wcf, azure

我想在 Azure 上托管一个 wcf 服务，但是这个实例化必须是动态的，所以我想根据需要实例化新服务......

`new ServiceHost(new Service(),<<What the heck is the base URI!?>>)`

什么应该是基础 Uri（方案、服务器名和端口）：

1.  工人角色
2.  网络角色
    *   外部端点
    *   内部端点。（出于性能原因，一些服务需要在负载均衡器*后面相互通信，但如何？）*

这些也是可能的：

1.  每个 Web 角色有多个服务主机。
2.  不同的端点绑定，即。我想要一个服务主机在 Http 上，另一个 Net.tcp 如果需要，我需要在部署时在 csdef 文件中声明这两个协议，还是我可以根据需要以编程方式添加它们（又名后期绑定）？

由于 $$$ 原因，我正在寻找不涉及 ServiceBus 的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T03:07:32.967

无论是在 Web 角色还是工作角色实例上，方法都是相同的，因为它们本质上都是 Windows 2008 Server（只是 Web 角色运行 IIS，这也消耗了一些端口）。无论您想在哪个端口上挂起 wcf 服务，只需将它们定义为输入端点（每个端口一个端点），并决定哪个角色处理该端点。

只要您有可用的端口，您就可以拥有多个 ServiceHost。当前每个部署的输入端点总数为 25 个，内部端点总数为 25 个，因此这是您的绝对限制。当然，如果启用 RDP，可用端口数会下降。哦：关于协议：如果你想要 http 和 tcp，你需要定义两个端点，因为协议是用 Endpoint 定义定义的。

内部端点 WCF 服务几乎相同，但您可以取消安全性并使用 net.tcp 进行快速传输。负载平衡的一个区别是：

*   挂在输入端点上的 WCF 服务将在角色的所有实例之间进行负载平衡
*   挂在内部终结点上的 WCF 服务将*不会*进行负载平衡。

对于后一种情况：假设您的 Web 角色需要与内部端点上的 Worker 角色的 WCF 服务通信。您需要枚举所有实例，获取每个实例的 IP+端口，然后随机选择一个（或循环，或您选择的任何方法）。这是一个示例方法，它从给定角色和给定端点名称返回一个随机端点实例（代码来自 Michael Washam 的[博客](http://michaelwasham.com/2011/05/15/deploying-a-com-servicedcomponent-to-windows-azure/)）：

```
private String GetRandomServiceIP(String roleName, String endPointName)
{
    var endpoints = RoleEnvironment.Roles[roleName].Instances.Select(i => i.InstanceEndpoints[endPointName]).ToArray();
    var r = new Random(DateTime.Now.Millisecond);
    int ipIndex = r.Next(endpoints.Count());
    return endpoints[ipIndex].IPEndpoint.Address.ToString();
} 
```

至于设置 WCF 服务和相关的 URI，我强烈建议使用最新的[Windows Azure 培训工具包](http://www.microsoft.com/en-us/download/details.aspx?id=8396)并通过**Worker Role Communication**动手实验室，其中详细介绍了如何设置 ServiceHost，两者都有输入端点和内部端点。

# python - 将 ast 节点转换为 python 对象

> ID：10747873
> 
> 赞同：5
> 
> 时间：2012-05-25T02:49:12.837
> 
> 标签：python, abstract-syntax-tree

给定一个可以自行评估的节点，但对于例如列表理解`ast`来说不够字面意思`ast.literal_eval`

```
src = '[i**2 for i in range(10)]'
a = ast.parse(src) 
```

现在`a.body[0]`是一个`ast.Expr`和`a.body[0].value`一个`ast.ListComp`。我想获得`eval(src)`将产生的列表，但只给出`ast.Expr`节点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T02:52:58.000

也许您正在寻找[`compile()`](http://docs.python.org/library/functions.html#compile)？调用`compile()`AST 对象的结果是可以传递给`eval()`.

* * *

```
>>> src = '[i**2 for i in range(10)]'
>>> b = ast.parse(src, mode='eval')
>>> eval(compile(b, '', 'eval'))
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

# php - 对包含数字和字母的数组进行排序

> ID：10747878
> 
> 赞同：2
> 
> 时间：2012-05-25T02:49:54.283
> 
> 标签：php, arrays, sorting

当用字母和数字对数组进行排序时，如下所示：
$a = array(0, 1, 'a', 'A'); 排序（$a）；print_r($a);

结果让我很困惑：

```
Array ( [0] => a [1] => 0 [2] => A [3] => 1 ) 
```

为什么'a'和'A'之间的'0'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:54:13.783

~~当您这样做时，数字将转换为字符串。数字字符 ASCII 值介于两种情况之间。~~

字符串被转换为数字。它以任意数字字符开头并丢弃其他所有字符进行比较，除非它找到可用于浮点转换的 '.'、'E' 或 'e'。如果它没有找到数字字符，它的计算结果为零。

# c# - 在 wp7 上将背景图像更改为默认值

> ID：10747880
> 
> 赞同：0
> 
> 时间：2012-05-25T02:50:14.970
> 
> 标签：c#, windows-phone-7

在我的 windows phone 7 应用程序中，我创建了一个按钮来更改默认背景图像，用户可以在应用程序上拥有自己的自定义皮肤。它工作得很好。但是当用户退出应用程序并重新启动它时，应用程序的背景图像将更改为默认值。但我需要的是，应用程序应该有用户选择的最后一个图像，即使没有启动。次。谁能帮我这个？提前感谢您的辛勤工作！

```
private void BackgroundBrowserIcon_MouseEnter(object sender, MouseEventArgs e)
    {
        var PhotoChooser = new PhotoChooserTask();
        PhotoChooser.Completed += new EventHandler<PhotoResult>(PhotoChooser_Completed);
        PhotoChooser.Show();
    }

    void PhotoChooser_Completed(object sender, PhotoResult e)
    {
        {
            if (e.TaskResult == TaskResult.OK)
            {
                System.Windows.Media.Imaging.BitmapImage bmp = new System.Windows.Media.Imaging.BitmapImage();
                bmp.SetSource(e.ChosenPhoto);
                var app = Application.Current as App;

                if (app == null)
                    return;
                var imageBrush = new ImageBrush { ImageSource = bmp, Opacity = 1.0d };
                this.LayoutRoot.Background = imageBrush;
                app.backchanged = true;
                app.appbrush = imageBrush;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:32:29.323

您是否使用 IsolatedStorageSettings 来存储最后选择的照片，然后在应用启动时加载它？

**更新：** 查看这篇文章，因为它解释了如何准确编写您想要完成的代码：http: [//www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save -捕获的图像](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-Captured-Image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:25:39.783

查看这篇[文章](http://mobile.dzone.com/articles/working-isolated-storage%E2%80%99s)以了解如何存储 IsolatedStorageSettings。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.IO.IsolatedStorage;

namespace F5debugWp7IsolatedStorage
{
   public partial class MainPage : PhoneApplicationPage
   {
    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    private void button3_Click(object sender, RoutedEventArgs e)
    {
        IsolatedStorageSettings ISSetting = IsolatedStorageSettings.ApplicationSettings;

       if (!ISSetting.Contains("DataKey"))
        {
            ISSetting.Add("DataKey", txtSaveData.Text);
        }
        else
        {
            ISSetting["DataKey"] = txtSaveData.Text;
        }
        ISSetting.Save();
    }
} 
```

}

# ruby-on-rails - 使用 Rail 3.2.3 预编译资产后的冗余 application.js 和 css

> ID：10747882
> 
> 赞同：1
> 
> 时间：2012-05-25T02:50:34.253
> 
> 标签：ruby-on-rails, asset-pipeline

我在部署到生产之前预编译资产。生产模式运行良好，但 application.js 和 application.css 在开发中是多余的。我尝试`rake assets:clean`删除所有公共资产仍然无效。

# 发展观

冗余的 applicaiton.css 和 application.js

```
<link href="/assets/application.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/css/custom-theme/jquery-ui-custom-lastest.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/animate.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery_loadmask/jquery_loadmask.css?body=1" media="screen" rel="stylesheet" type="text/css" />
...
<script src="/assets/tags.js?body=1" type="text/javascript"></script>
<script src="/assets/wedapp.js?body=1" type="text/javascript"></script>
<script src="/assets/works.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

# 发展.rb

```
config.assets.compress = false
config.assets.debug = true 
```

# 生产.rb

```
config.serve_static_assets = false
config.assets.compress = true
config.assets.compile = true  
config.assets.initialize_on_precompile = false  
config.assets.digest = true
config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx 
```

现在，我需要在 development.rb 的 config.assets.debug 中设置 false，但我无法在预编译之前调试资产。这真的很困扰我。

有什么建议么？谢谢。

# 解决方案

尝试更改 application.js 文件任何内容，我删除了一个空白行`rake assets:clean RAILS_ENV=development`，现在它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:43:54.893

如果您在本地预编译，并且想要保留所有正常的开发模式功能，那么您可以调整您的设置以允许两者。

在 development.rb 中放置以下行：

```
config.assets.prefix = "/dev-assets" 
```

这会覆盖 application.rb 中设置的任何内容（通常是“/assets”）。

您还需要在 application.rb 中使用它：

```
config.assets.initialize_on_precompile = false 
```

然后，您可以将编译的资产提交到源代码管理并部署它们，而不必担心事后清理它们。

（请参阅我关于该主题的[完整博客文章）](http://richardhulse.blogspot.co.nz/2012/03/rails-how-to-compile-and-commit-assets.html)

# php - PHP关联数组索引未定义

> ID：10747883
> 
> 赞同：1
> 
> 时间：2012-05-25T02:50:43.193
> 
> 标签：php, arrays, indexing, key

如果不循环通过 array_keys($array) 获取的一组数组键，我怎么能选择一个数组的键，使得 $array["key"] 其中 "key" 关联到第二个后续数组 - PHP 否则会输出注意声明“key”未定义。

真诚感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:52:21.333

[`isset()`](http://php.net/isset)例如，我认为您正在寻找`if( isset($array['key'])) ...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T20:40:10.087

isset() 适用于变量，但您可能得到的错误是未定义的键/索引。您需要在尝试使用密钥之前尝试**array_key_exists()**（并根据结果，使用或创建密钥）。

[http://www.php.net/manual/en/function.array-key-exists.php](http://www.php.net/manual/en/function.array-key-exists.php)

# php - 不能在任何其他文件中使用 php

> ID：10747886
> 
> 赞同：2
> 
> 时间：2012-05-25T02:51:01.600
> 
> 标签：php

所以我有两个php类，一个是类，一个用另一个，我的类是：

（菜单.php）

```
 <?php
public class Menu
{
        $home = '<li><a href="index.html"><span>Home</span></a></li>';
        $home_selected = '<li class="navhome"><a href="index.html"><span>Home</span></li>';

        $projects = '<li><a href=""><span>Projects</span></a></li>';
        $projects_selected = '<li class="navhome"><a href=""><span>Projects</span></a></li>';

        $contact = '<li><a href=""><span>Contact Us</span></a></li>';
        $contact_selected = '<li class="navhome"><a href=""><span>Contact Us</span></a></li>';

        public function getMyMenu($value)
        {
                switch($value) {
                        case "home":
                                return (string) $home_selected . $projects . $contact;
                                break;
                        case "projects":
                                return $home . $projects_selected . $contact;
                                break;
                        case "contact":
                                return $home . $projects . $contact_selected;
                                break;
                }
        }

}
?> 
```

但是，在 index.php 中，无论何时

```
<?php include("menu.php"); 
      $menu = new Menu();
      echo($menu->getMyMenu("home")); ?> 
```

或者放置任何变体，然后网页就不会加载，例如，如果它放在页面中间，页面的末尾甚至不会发送到浏览器。

我对 php 很陌生，我希望这是一个“duh”的答案，如果您需要更多，请询问；谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T02:55:49.493

你的字符串没有被引用。您需要使用`'string'`不包含变量的字符串，并且`"string $var"`如果您想将变量值添加到您的字符串。

此外，在脚本的开头写下非常有帮助：

```
error_reporting(E_ALL); 
```

这启用了完整的错误跟踪，因此 PHP 会告诉您他看到哪个字符串上的哪些问题 - 非常有帮助！

另外，看看你的字符串：

```
return "hello world"; 
```

如果函数将在此字符串上停止，该指令下方的开关将如何工作？如果你希望这个返回作为默认值，你应该把它放在你的开关之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T02:52:56.577

你应该引用（`'`或`"`）字符串

```
$home = '<li><a href="index.html"><span>Home</span></a></li>'; 
```

完整代码：

```
class Menu
{
    private $home = '<li><a href="index.html"><span>Home</span></a></li>';
    private $home_selected = '<li class="navhome"><a href="index.html"><span>Home</span></li>';

    private $projects = '<li><a href=""><span>Projects</span></a></li>';
    private $projects_selected = '<li class="navhome"><a href=""><span>Projects</span></a></li>';

    private $contact = '<li><a href=""><span>Contact Us</span></a></li>';
    private $contact_selected = '<li class="navhome"><a href=""><span>Contact Us</span></a></li>';

    public function getMyMenu($value)
    {
        switch($value) {
            case "home":
                return $this->home_selected . $this->projects . $this->contact;
                break;
            case "projects":
                return $this->home . $this->projects_selected . $this->contact;
                break;
            case "contact":
                return $this->home . $this->projects . $this->contact_selected;
                break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T02:54:52.317

您需要指定类属性的可见性，例如：

```
class Menu {
    public $home = ...;
} 
```

另请注意，您不应该`public`在关键字之前有`class`. 此外，您的所有字符串属性值都缺少引号。基本上一切都是错误的，你很可能已经`show_errors`禁用。

# ruby-on-rails - 如何检查rails控制器中是否存在参数？

> ID：10747893
> 
> 赞同：0
> 
> 时间：2012-05-25T02:52:01.977
> 
> 标签：ruby-on-rails, ruby, pagination

这有效，但感觉很笨拙。是否有更多的 rails-y 方法来限制基于参数的集合？我正在使用活动模型序列化程序 gem，并且需要通过参数限制 json 响应。

```
def index    
 if params.has_key?(:limit)
   limit = params[:limit].to_i
   @pages = Page.all.take(limit)
 else
   @pages = Page.all
 end
end 
```

如果我使用以下内容，我会在将字符串传递给限制参数时收到错误消息或什么也不传递。

```
def index
 @pages = Page.limit(params[:limit])

 respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @pages }
 end 
```

结尾

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T02:59:58.133

你不应该做任何事情。直接传入 params[:limit] 即可。

```
def index
  @page = Page.limit(params[:limit])
end 
```

如果 params[:limit] 没有定义（nil），它只会返回所有的记录。您甚至不需要将其转换为整数。Rails 为您做到！

**更新**

如果您真的想检查是否没有传入非数字，您可以在 Page 类中创建自己的限制类方法（未经测试，但应该可以）：

```
class Page << ActiveRecord::Base

  def self.limit(num = nil)
    num = num.to_i > 0 ? num : nil
    super(num)
  end

end 
```

# dojo - Dojo (Dijit) 边界容器未正确显示（以编程方式）

> ID：10747896
> 
> 赞同：1
> 
> 时间：2012-05-25T02:52:40.180
> 
> 标签：dojo

我尝试在 dojo (1.7.2) 中使用 dijit 进行布局，但结果看起来不像我想要的那样。

我的第一次尝试是尝试一些示例（此处为[http://pastebin.com/Uy0pFmn3](http://pastebin.com/Uy0pFmn3)）的声明式样式，效果很好。然后我尝试将其转换为程序样式（此处为[http://pastebin.com/qRWUQsQN](http://pastebin.com/qRWUQsQN)），但它只显示了最后创建的布局。

我是否误解了 dijit 的布局是如何工作的，或者只是在这里忽略了一些小问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:34:03.140

您必须添加 CSS 样式：

```
html, body {
    height: 100%;
    width: 100%;
} 
```

对于 BorderContainer：

```
style="height:100%; width:100%" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:15:29.983

编辑：好的，我明白了。我想我不能使用`new ContentPane`，而是，`new dijit.layout.ContentPane`（所以这里是最终版本[http://pastebin.com/eYfeQUd8](http://pastebin.com/eYfeQUd8)）。奇怪的，“只显示最后一个布局”是由我奇怪的 CSS 东西引起的。

让我感到困惑的一件事是为什么 new`ContentPane`不起作用？据我记得，一些例子确实是这样的

```
require(["dijit/layout/BorderContainer", "dijit/layout/TabContainer",
        "dijit/layout/ContentPane"], function(BorderContainer) {new BorderContainer //STUFF//} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:07:39.743

我在这里看到了问题。在您缺少的 pastebin 代码中，请声明函数参数，如下例所示...

您修改后的代码：

require(["dijit/layout/BorderContainer", "dijit/layout/TabContainer", "dijit/layout/ContentPane"], function( **`BorderContainer`**, **`TabContainer`**, **`ContentPane`**) {
var appLayout = new BorderContainer({"design": "headline"}, '应用布局');

此外，需要参数的顺序也应该在函数参数内匹配..

瓦西姆·艾哈迈德五世

# android - 初始屏幕中的图像视图大小

> ID：10747902
> 
> 赞同：1
> 
> 时间：2012-05-25T02:53:29.430
> 
> 标签：android, splash-screen

我正在为我的应用程序创建一个启动画面，但我遇到了一个问题：我将图像放入 drawable 中并没有占据智能手机的整个屏幕。怎么解决？

这是我的xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical" android:layout_width="fill_parent"
     android:layout_height="fill_parent">

     <RelativeLayout android:id="@+id/RelativeLayout01"
      android:layout_height="fill_parent"
      android:layout_width="fill_parent"
      android:gravity="fill"
      android:layout_gravity="center">

           <ImageView android:id="@+id/ImageView01"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/fundo" />

     </RelativeLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:02:15.967

添加`android:scaleType="fitXY"`到`ImageView`

# java - 线程 CMP OpenEJB4 JUnit Hibernate 上没有 tx

> ID：10747903
> 
> 赞同：0
> 
> 时间：2012-05-25T02:53:29.993
> 
> 标签：java, hibernate, junit, openejb

我不断收到以下异常，

```
java.lang.IllegalStateException: No tx on thread at  org.apache.geronimo.transaction.manager.TransactionManagerImpl.getActiveTransactionImpl(TransactionManagerImpl.java:201)
    at org.apache.geronimo.transaction.manager.TransactionManagerImpl.getResource(TransactionManagerImpl.java:194)
    at org.apache.openejb.core.transaction.JtaTransactionPolicy.getResource(JtaTransactionPolicy.java:111)
    at org.apache.openejb.core.transaction.EjbTransactionUtil.afterInvoke(EjbTransactionUtil.java:76)
    at org.apache.openejb.core.stateless.StatelessContainer._invoke(StatelessContainer.java:246)
    at org.apache.openejb.core.stateless.StatelessContainer.invoke(StatelessContainer.java:178)
    at org.apache.openejb.core.ivm.EjbObjectProxyHandler.synchronizedBusinessMethod(EjbObjectProxyHandler.java:260)
    at org.apache.openejb.core.ivm.EjbObjectProxyHandler.businessMethod(EjbObjectProxyHandler.java:240)
    at org.apache.openejb.core.ivm.EjbObjectProxyHandler._invoke(EjbObjectProxyHandler.java:91)
    at org.apache.openejb.core.ivm.BaseEjbProxyHandler.invoke(BaseEjbProxyHandler.java:284)
    at $Proxy70.call(Unknown Source)
    at com.xyz.cms.epgmgmt.entitymanager.ProviderManagerTest.testWithTransaction(ProviderManagerTest.java:66)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at junit.framework.TestCase.runTest(TestCase.java:168)
    at junit.framework.TestCase.runBare(TestCase.java:134)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at junit.framework.TestSuite.runTest(TestSuite.java:243)
    at junit.framework.TestSuite.run(TestSuite.java:238)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我正在使用 OpenEJB4 进行 JUnit 测试。

EJB 本身是无状态的，没有事务注释（这使得需要事务）。我在这个论坛上找到了一篇较旧的帖子，并尝试了相同的修复方法，但没有奏效。我的类路径上没有休眠验证。我正在使用休眠 3。

我的测试如下，

```
public class ProviderManagerTest extends TestCase {

Context context;

    /**
 * Bootstrap the Embedded EJB Container
 *
 * @throws Exception
 */
protected void setUp() throws Exception {

Properties p = new Properties();
p.put(Context.INITIAL_CONTEXT_FACTORY, "org.apache.openejb.core.LocalInitialContextFactory");
p.put("log4j.category.OpenEJB.options ", " debug");

p.put("RcsDB", "new://Resource?type=DataSource");
p.put("RcsDB.JdbcDriver", "oracle.jdbc.driver.OracleDriver");
p.put("RcsDB.JdbcUrl", "jdbc:oracle:thin:@dbserver:1521:ttv");
p.put("RcsDB.JtaManaged", "true");
p.put("RcsDB.JtaManaged", "true");
p.put("RcsDB.username", "username");
p.put("RcsDB.password", "password");

context = EJBContainer.createEJBContainer(p).getContext();
context.bind("inject", this);

}

@Test
public void testWithTransaction() throws Exception {
Caller transactionalCaller = (Caller) context.lookup("java:global/cms_epgmgmt/TransactionBean");
transactionalCaller.call(new Callable() {
        public Object call() throws Exception {
        Provider testProvider = new Provider();
    testProvider.setName("test");
    IProviderManager providerManager = null;
    providerManager = (IProviderManager) context.lookup("java:global/cms_epgmgmt/ProviderManager");
    providerManager.create(testProvider);
            return null;
        }
    });
}

    /*private void testProviderCreation()
    {
            Provider testProvider = new Provider();
            testProvider.setName("test");
            providerManager.create(testProvider);
    }
    */

     public static interface Caller {
            public <V> V call(Callable<V> callable) throws Exception;
        }
     /**
 * This little bit of magic allows our test code to execute in
 * the scope of a container controlled transaction.
 */
@Stateless
@TransactionAttribute(REQUIRES_NEW)
public static class TransactionBean implements Caller {

    public <V> V call(Callable<V> callable) throws Exception {
        return callable.call();
    }
} 
```

其中提供者管理器如下，@Local(IProviderManager.class) @Stateless 公共类 ProviderManager 实现 IProviderManager{

```
 @PersistenceContext(unitName = "epgmanagerjpaunit")
    private EntityManager entityManager;

    public void create(Provider provider)
    {
            entityManager.persist(provider);
    }
} 
```

在此先感谢，-v-

# java - JPA 的 EntityManager 应该是 RequestScoped 吗？

> ID：10747904
> 
> 赞同：4
> 
> 时间：2012-05-25T02:53:54.583
> 
> 标签：java, hibernate, jpa-2.0, java-ee-6

我正在使用 JBoss7 开发基于 JavaEE6 的 Web 应用程序。在我的应用程序中，我将 EntityManager 注入到我的 EJB 中：

```
class ForumServiceEJB
{
    @PersistenceContext(type=EXTENDED)
    private EntityManager em;

}

class TopicServiceEJB
{
    @PersistenceContext(type=EXTENDED)
    private EntityManager em;

} 
```

当我使用 ForumServiceEJB 的 EntityManager 更新一些数据时出现问题，然后对 DB 进行了更改，但 TopicServiceEJB 的 EntityManager 无法看到这些更改，并且始终从缓存中获取结果。

我使用 ExtendedPerssisteenceContext 因为我的实体包含延迟加载类型的子实体集合。

如何使用/注入 ExtendedPersistenceContext 类型的 EntityManager 并使一个 EJB 中的不同 EntityManager 仍然可以看到其他不同 EJB EntityManager 所做的更改？

我在某处读到 EntityManagers 应该是 RequestScoped 对象。

```
public class MyEntityManagerProducers {
 @Produces @RequestScoped 
 public EntityManager createDbEm() {
   return Persistence.createEntityManagerFactory("forumDb").
          createEntityManager();
 }

 public void disposeUdEm(@Disposes EntityManager em) {
   em.close();
 } 
```

这是要走的路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:30:31.270

> I am using ExtendedPerssisteenceContext as My Entities contain child Entity Collections of Lazy Loading type.

This is not a good reason to use `EXTENDED`. I would suggest you to make it `default`, which is `TRANSACTION`. And it's good to make your `EntityManager` request-scoped, or method-scoped, in non-enterprise environment or when using application-managed persistence, as this is not a very heavy object to create. Moreover, neither using application-scoped EntityManager is a good idea, as it is not threadsafe.

Having said that, as you are using JBoss, you should let the container handle the lifecycle of `EntityManager`, in case you are using JTA. Hence, just inject that with everything `default`

**Note:**

Only stateful session beans can have a container-managed, extended entity manager.

**Links:**

*   [http://javanotepad.blogspot.com/2007/08/managing-jpa-entitymanager-lifecycle.html](http://javanotepad.blogspot.com/2007/08/managing-jpa-entitymanager-lifecycle.html)
*   [https://blogs.oracle.com/enterprisetechtips/entry/extended_persistence_context_in_stateful](https://blogs.oracle.com/enterprisetechtips/entry/extended_persistence_context_in_stateful)

**Suggestions:**

Your business method should know whether to load the children or not. But that's the ideal case. A number of times we can't say that and completely depends on the user input -- we can't predict that well. Therefore, there are two solutions available,

1.  make a separate AJAX call to load children
2.  Use the filter called open-session-in-view. I would prefer the former.

**Links:**

*   [https://community.jboss.org/wiki/OpenSessionInView](https://community.jboss.org/wiki/OpenSessionInView)
*   [http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)
*   [Why is Hibernate Open Session in View considered a bad practice?](https://stackoverflow.com/questions/1103363/why-is-hibernate-open-session-in-view-considered-a-bad-practice)

# r - 具有两个不等式约束的最小二乘

> ID：10747906
> 
> 赞同：2
> 
> 时间：2012-05-25T02:54:14.130
> 
> 标签：r, minimize, least-squares

我有两个不同的不等式问题的最小二乘问题。我不能使用 NNLS，因为它只是解决具有等式和不等式问题的最小二乘问题，或者只是一个不等式约束。我可以使用 NNLS 或任何其他算法或 R 包来解决这个最小二乘问题吗？

```
 min|| Ax-b||^2    x = c(c, d, f) is a vector
    x >= 0 
    c + d * x + f * x >= 0 
```

# asp.net - 在未安装 SharePoint 的服务器上使用 Sharepoint GridViews

> ID：10747907
> 
> 赞同：1
> 
> 时间：2012-05-25T02:54:18.470
> 
> 标签：asp.net, sharepoint, spgridview

我有一个 Web 应用程序需要从 Sharepoint 列表中提取数据并以与 Sharepoint 列表相同的“外观”显示它，但在不同的网站上。

[http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.spgridview.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.spgridview.aspx)

Web 应用程序*未*安装在具有 SharePoint 基础的服务器上。sharepoint DLL 自然丢失了，但我已从安装 SP 的服务器复制它们并将它们添加到我的项目中。该页面现在可以编译，但它会抛出一个异常，每当我插入 SPGridView ASP 元素时就会出现该异常。

例外情况是：System.ArgumentException：需要绝对路径信息。

堆栈跟踪：

```
[ArgumentException: Absolute path information is required.]
   System.Security.Util.StringExpressionSet.CreateListFromExpressions(String[] str, Boolean needFullPath) +12658807
   System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess access, AccessControlActions control, String[] pathListOrig, Boolean checkForDuplicates, Boolean needFullPath, Boolean copyPathList) +112
   Microsoft.SharePoint.Utilities.SPUtility.ComputeFileHash(String filePath) +470
   Microsoft.SharePoint.Utilities.SPUtility.MakeBrowserCacheSafeLayoutsUrl(String name, Boolean localizable) +487
   Microsoft.SharePoint.WebControls.ScriptLinkInfo.ToScriptUrl(Page page) +488
   Microsoft.SharePoint.WebControls.ScriptLinkInfo.ToScriptBlock(Page page) +24
   Microsoft.SharePoint.WebControls.ScriptLink.RegisterForControl(Control ctrl, Page page, String name, Boolean localizable, Boolean defer, Boolean loadAfterUI, String language) +1195
   Microsoft.SharePoint.WebControls.ScriptLink.Register(Page page, String name, Boolean localizable, Boolean defer, String language, String uiVersion) +38
   Microsoft.SharePoint.WebControls.ScriptLink.Register(String uiVersion, Page page, String name, Boolean localizable, Boolean defer) +59
   Microsoft.SharePoint.WebControls.ScriptLink.Register(Page page, String name, Boolean localizable) +30
   Microsoft.SharePoint.WebControls.SPGridView.OnLoad(EventArgs args) +86
   System.Web.UI.Control.LoadRecursive() +71
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064 
```

如果我删除 SPGridView ASP 元素，页面就会运行。有谁知道如何让它工作？我知道我可以使用客户端对象模型，但是 AFAIK 它没有提供任何东西来显示具有与 Sharepoint 中相同的外观和功能的列表。

# jasper-reports - 如何在文本字段中为某些单词加粗？

> ID：10747909
> 
> 赞同：19
> 
> 时间：2012-05-25T02:54:34.097
> 
> 标签：jasper-reports, ireport

我有在报告中写论文。我只想在我的诗句中加粗一些文字。我`<b></b>`在文本中添加了标签，但它不起作用。

我想要的一个例子是“我的名字是**杰森**，我的姓是**迈克尔**”。有人知道这件事吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T03:04:26.093

尝试用 HTML（粗体）标签包围您要突出显示的单词`<b></b>`，并将字段内容类型更改为 HTML

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-04T10:10:35.320

这项工作很好：

```
"<style isBold='true' pdfFontName='Helvetica-Bold'>" + $F{data} + "</style>" 
```

对于来自数据源的输入数据，或

```
<style isBold="true" pdfFontName="Helvetica-Bold">Bolt text</style> 
```

仅适用于一些静态文本。

对于文本字段集属性**标记**= 样式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-25T03:11:26.100

我刚刚更改了属性 → 标记 → HTML。有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-07T15:40:07.960

`<b> </b>`标签不再适用于文本字段。确保为文本字段启用了“样式化文本”并将其放入字段表达式中。

`<style isBold="true" pdfFontName="Helvetica-Bold">Text to be bold...</style>`

pdfFontName 可以是任何你喜欢的。

如果您要使字符串中已经存在的文本变为粗体，请务必使用反斜杠转义上述引号或使用单引号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-14T16:48:22.970

例如，我的一种表达方式：{

```
"<b>"+$F{bezeichnung}+"</b>"+" ("+$F{anzahlStimmen}+" "+$R{stimmenI18N}+")" 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-11T14:16:49.083

例如 - 单词的第一个字符是**RED**

```
 <textField pattern="">
            <reportElement x="23" y="35" width="189" height="18" forecolor="#000000" uuid="dd8bc5b3-1dc9-4348-84c8-ff7993746830"/>
            <textElement textAlignment="Center" verticalAlignment="Middle" markup="styled">
                <font fontName="Apolonia" size="17" isBold="true"/>
            </textElement>
            <textFieldExpression><![CDATA["<style forecolor=\"red\">"+$F{L1_word}.substring(0,1)+"</style>"+$F{L1_word}.substring(1)]]></textFieldExpression>
        </textField> 
```

[![结果](../Images/8218b3e188bffb8b7e89534495bda714.png)](https://i.stack.imgur.com/2DFQN.png)

# php - Mysql错误问题

> ID：10747914
> 
> 赞同：0
> 
> 时间：2012-05-25T02:55:24.207
> 
> 标签：php, mysql

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'like = '0 +1' WHERE wall_id = '20'' 附近使用正确的语法

```
$sql = mysql_query("UPDATE wall SET like = '$nelike'  WHERE wall_id = '$id' " );   

if($sql)
    echo "Success;
else
    echo "something wrong<br/>" . mysql_error(); 
```

为什么我收到此错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:56:31.260

您的列`like`需要封装在反引号中，因为`like` [它也是 MySQL 关键字。](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

```
$sql = mysql_query("UPDATE wall SET `like` = '$nelike'  WHERE wall_id = '$id' " ); 
```

您还希望将反引号应用于名称中包含空格的列。

此外，[逃避](http://php.net/manual/en/function.mysql-real-escape-string.php)您的数据也不是一个坏主意（如果您不知道）

```
$sql = mysql_query("UPDATE wall 
SET `like` = '" . mysql_real_escape_string($nelike) . "'  
WHERE wall_id = '" . mysql_real_escape_string($id) . "'" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:56:42.240

`LIKE`是一个 SQL 关键字。如果要将其用作字段名称，则需要将其放在反引号中：

```
UPDATE wall SET `like` = '$nelike'  WHERE wall_id = '$id' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:09:34.700

错误是您在 mysql 中使用了**[保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)**并且您没有使用反引号对其进行转义。

```
$sql = mysql_query("UPDATE wall SET like = '$nelike'  WHERE wall_id = '$id' " ); 
```

应该写成

```
$sql = mysql_query("UPDATE wall SET `like` = '$nelike'  WHERE wall_id = '$id' "); 
```

# c# - 从方法参数设置泛型类型参数

> ID：10747918
> 
> 赞同：2
> 
> 时间：2012-05-25T02:55:45.127
> 
> 标签：c#, generics

有没有办法做这样的事情？

```
void SomeMethod(Type generic)
{
    SomeGenericMethod<generic>();
} 
```

我需要将类型作为“普通”参数而不是泛型类型参数传递。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T03:03:52.440

您可以通过反射来做到这一点：

```
public class foo
{
    public void SomeMethod(Type type)
    {
        var methodInfo = this.GetType().GetMethod("SomeGenericMethod");
        var method = methodInfo.MakeGenericMethod(new[] { type });
        method.Invoke(this, null);
    }

    public void SomeGenericMethod<T>()
    {
        Debug.WriteLine(typeof(T).FullName);
    }
}

class Program
{
    static void Main(string[] args)
    {
        var foo = new foo();
        foo.SomeMethod(typeof(string));
        foo.SomeMethod(typeof(foo));
    }
} 
```

也就是说，以这种方式使用反射意味着您首先失去了使用泛型的一些好处，因此您可能希望查看其他设计替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T03:05:14.263

假设您的方法是在一个名为 MyClass 的类中定义的，应该这样做：

```
var MyObject = new MyClass();
typeof(MyClass).GetMethod("SomeGenericMethod").MakeGenericMethod(generic).Invoke(myObject, null); 
```

Type.GetMethod() 获取一个对象，该对象描述了在调用它的 Type 中定义的方法。该方法是泛型的，所以我们需要调用 MakeGenericMethod，并传递它的一个泛型参数。

然后我们调用该方法，传递我们想要调用该方法的对象和它所需要的任何参数。因为它不需要参数，所以我们只传递 null。

# authentication - Facebook OAUTH 服务器端身份验证失败

> ID：10747921
> 
> 赞同：0
> 
> 时间：2012-05-25T02:56:25.720
> 
> 标签：authentication, facebook-graph-api

遵循此处定义的服务器端身份验证程序：[https](https://developers.facebook.com/docs/authentication/server-side/) ://developers.facebook.com/docs/authentication/server-side/ 。

运行这个命令：

[https://www.facebook.com/dialog/oauth?client_id=xxxxxx&state=you&redirect_uri=http://lovers.net&scope=ads_management,offline_access](https://www.facebook.com/dialog/oauth?client_id=xxxxxx&state=you&redirect_uri=http://lovers.net&scope=ads_management,offline_access)

结果是：

=">http://lovers.net/?state=you&code=AQA7c30iVuCyDJzlKP8-9z_Rv7JhpnHEEfsiT5doge1TL--WSXdK9NjCl7q7_Ldovrc9SrlaOZe9VzS1pvelthA2hD72Q5aTVjFlviNPuQJ1U3LP16e7zY7lI5avSlcL1wZoOYYi5JeoOsPwe9HaeQvtfBQSYVX2WQCbo2tVFYboSq1_FNSHOpAKsaW86-1IJM# *=*

我变成了这个：

=">https://graph.facebook.com/oauth/access_token?client_id=xxxx&redirect_uri=http://lovers.net&client_secret=xxxxx&code=AQA7c30iVuCyDJzlKP8-9z_Rv7JhpnHEEfsiT5doge1TL--WSXdK9NjCl7q7_Ldovrc9SrlaOZe9VzS1pvelthA2hD72Q5aTVjFlviNPuQJ1U3LP16e7zY7lI5avSlcL1wZoOYYi5JeoOsPwe9HaeQvtfBQSYVX2WQCbo2tVFYboSq1_FNSHOpAKsaW86-1IJM# *=*

结果是：

{ "error": { "message": "验证验证码错误。", "type": "OAuthException", "code": 100 } }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:19:24.950

您很可能`redirect_uri`在调用中`/oauth/access_token`为参数指定了不同的值您的代码中的案例。

# python - Django GeoIP 错误；无效的路径类型

> ID：10747922
> 
> 赞同：4
> 
> 时间：2012-05-25T02:56:30.277
> 
> 标签：python, django, geolocation

在努力为 Django 项目正确安装 GeoIp 之后，我终于似乎已经通过带有 brew 的通用 geoip 正确安装了它。

不幸的是，在 shell 中尝试它时，我收到以下错误：

```
>>> from django.contrib.gis.utils.geoip import GeoIP
>>> g = GeoIP()
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/gis/utils/geoip.py", line 193, in __init__
raise TypeError('Invalid path type: %s' % type(path).__name__) 
```

TypeError：无效的路径类型：元组

我一直在尝试正确安装 GeoIP 大约七个小时，因此非常感谢您对这个最新错误的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T03:27:03.503

If you really have a comma in there, then you are setting GEOIP_PATH to a tuple and not a string, which would explain the error. If this is the case, simply remove the comma:

```
# settings.py

import os

BASE_DIR = os.path.abspath(os.path.dirname(__file__))
GEOIP_PATH = os.path.join(BASE_DIR, 'geoip') 
```

# c++ - 我应该将 const 用于局部变量以进行更好的代码优化吗？

> ID：10747927
> 
> 赞同：38
> 
> 时间：2012-05-25T02:56:54.453
> 
> 标签：c++, performance, optimization, constants, compiler-optimization

我经常`const`用于未修改的局部变量，如下所示：

```
const float height = person.getHeight(); 
```

我认为它可以使编译的代码可能更快，允许编译器进行更多优化。还是我错了，编译器可以自己弄清楚局部变量永远不会被修改？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-25T02:59:44.267

> **还是我错了，编译器可以自己弄清楚局部变量永远不会被修改？**

大多数编译器都很聪明，可以自己解决这个问题。
您应该使用`const`确保***const 正确性***而不是微优化。
***const 正确性***让编译器可以帮助您防止犯诚实的错误，因此您应该`const`尽可能使用，但出于***可维护性的原因***并***防止自己犯下愚蠢的错误***。

了解我们编写的代码对性能的影响是很好的，但应该避免过度的微优化。关于性能，一个应该遵循的，

## **80-20 规则：**

> 通过对***代表性数据集******进行分析***，确定使用资源`20%`的代码，然后才尝试优化这些瓶颈。`80%`

 *** * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-25T02:59:59.480

这种性能差异几乎可以肯定可以忽略不计，但是出于代码文档的原因，您应该尽可能使用 const。通常，编译器无论如何都可以为您解决这个问题并自动进行优化。`const`实际上更多的是关于代码的可读性和清晰度而不是性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-05T17:23:37.573

我认为默认情况下将包括函数参数在内的局部变量设为常量并不是一个好习惯。

主要原因是简洁。良好的编码实践可以让你的代码变短，而这个不行。

非常相似，您可以`void foo(void)`在函数声明中编写，并且可以通过提高清晰度、明确不打算将参数传递给函数等来证明它的合理性，但这本质上是浪费空间，最终差点退出采用。`const`我认为到处使用的趋势也会发生同样的事情。

对于大多数使用您创建的代码的协作者来说，使用 const 限定符标记局部变量并不是很有用。与类成员、全局变量或指针指向的数据不同，局部变量没有任何外部影响，没有人会受到局部变量限定符的限制或从中学到任何有用的东西（除非他将更改局部变量所在的特定函数）。

如果他需要更改您的功能，该任务通常不应该要求他尝试从那里的变量的常量限定符中推断出有价值的信息。函数不应太大或难以理解；如果是这样，您的设计可能有更严重的问题，请考虑重构。一个例外是实现一些核心数学计算的函数，但对于那些你需要在评论中添加一些细节或论文链接。

您可能会问*，如果不花费您太多精力，为什么不仍然放置 const 限定符*。不幸的是，确实如此。如果我必须放置所有 const 限定符，我很可能必须在完成后检查我的函数并将限定符放置到位 - 浪费时间。这样做的原因是您不必仔细计划局部变量的使用，这与指针指向的成员或数据不同。

它们主要是一种便利工具，从技术上讲，可以通过将它们分解为表达式或重用变量来避免它们中的大多数。因此，由于它们是一种方便的工具，特定局部变量的存在只是一个品味问题。

特别是，我可以写：

*   `int d = foo(b) + c;`
*   `const int a = foo(b); int d = a + c;`
*   `int a = foo(b); a += c`

每个变体在各个方面都是相同的，除了变量`a`是恒定的还是非恒定的，或者根本不存在。很难尽早做出某些选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-05T13:10:59.770

如果左侧有一个***值类型，您可以放心地假设它的影响可以忽略不计，或者根本没有影响。***它不会影响重载决议，实际上`const`可以很容易地从范围中推断出来。

* * *

***引用类型***完全不同：

```
std::vector<int> v(1);
const auto& a = v[0];
auto& b = v[0]; 
```

这两个赋值解析为两个完全不同的运算符，并且在 STL 之外的许多库中也可以找到类似的重载对。即使在这个简单的例子中，依赖于`v`范围不变的优化`b`已经不再是微不足道的并且不太可能被发现。

尽管如此，STL 在这些方面仍然相当温和，至少行为不会因选择`const_reference`重载而改变。对于大多数 STL，`const_reference`重载仅与对象`const`本身相关联。

其他一些库（例如 Qt）大量使用了写时复制语义。在这些 const-correctness 中，引用不再是可选的，而是必要的：

```
QVector<int> v1(1);
auto v2 = v1; // Backing storage of v2 and v1 is still linked
const auto& a = v1[0]; // Still linked
const auto& b = v2[0]; // Still linked
auto& c = v2[0]; // Deep copy from v1 to v2 is happening now :(
// Even worse, &b != &c 
```

写时复制语义是大型矩阵或图像处理库中常见的东西，需要注意。

这也是编译器不再能够拯救你的地方，重载解决方案是 C++ 标准规定的，并且没有消除代价高昂的副作用的余地。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2020-08-05T06:03:18.823

局部常量值存在一个主要问题——如下面的代码所示：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

// const uint32_t const_dummy = 0;

void func1(const uint32_t *ptr);

int main(void) {
    const uint32_t const_dummy = 0;
    func1(&const_dummy);
    printf("0x%x\n", const_dummy);
    return EXIT_SUCCESS;
}

void func1(const uint32_t *ptr) {
    uint32_t *tmp = (uint32_t *)ptr;
    *tmp = 1;
} 
```

此代码是在 Ubuntu 18.04 上编译的。

如您所见，`const_dummy`在这种情况下可以修改 ' 的值！但是，如果您修改代码并将`const_dummy`范围设置为全局 - 通过注释掉本地定义并从全局定义中删除注释 - 您将收到异常并且您的程序将崩溃 - 这很好，因为您可以调试它并发现问题。

是什么原因？全局`const`值位于程序的 ro（只读）部分。操作系统 - 使用 MMU 保护该区域。使用堆栈中定义的常量是不可能的。

对于不使用 MMU 的系统，您甚至不会“感觉”有问题。**

# c# - ASP.NET 应用程序中的测试方法

> ID：10747928
> 
> 赞同：1
> 
> 时间：2012-05-25T02:56:54.613
> 
> 标签：c#, performance, testing

我正在使用 C# 中使用 ASP.NET 开发的应用程序。

我想对页面加载、服务器资源使用情况和其他统计数据进行压力测试。

我试过使用 System.Diagnostics 类 StopWatch，它返回加载程序所用的时间。

测试页面性能的任何其他建议或方法？例如，假设有超过一千个用户访问该页面，该页面是否会遇到性能问题。

谢谢你。

# entity-framework - SaveChanges 后发送电子邮件

> ID：10747934
> 
> 赞同：0
> 
> 时间：2012-05-25T02:57:27.687
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

我试图使用实体框架作为 dao 将我的应用程序封装成三层。但我认为这是不可能的！因此，我开始在控制器中使用我的 DbSet 并执行以下操作：

```
var product = new Product();
product.Name = "product name";
db.Product.Add(product);
db.SaveChanges(); 
```

但是现在我没有 BL 层，那么，如何设置观察者在 SaveChanges() 之后发送电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:32:12.253

你可以覆盖`saveChanegs`你的 DBContext

```
 public class YourDbContext:DBContext
    {

       public override int SaveChanges(){
         foreach(var entry in ChangeTracker.Entries())
         {
           var entity = entry.Entity;
           if (entity is Entity1 or entity is Entity2)
           {
             //send email
           }
         }
         base.SaveChanges();
      }

   } 
```

但是在 DBContext 中这样做并不是一个好主意，因为这不是 DbContext 应该做的。发送电子邮件涉及一些业务逻辑，如果您可以将其放在业务层而不是数据访问逻辑中，那就更好了。

# python - python 是否能够进行 MATLAB 等效矩阵运算？

> ID：10747935
> 
> 赞同：2
> 
> 时间：2012-05-25T02:57:33.600
> 
> 标签：python, matlab, matrix, file-processing

我在 MATLAB 中实现了对 216x216 矩阵进行操作的代码，这些矩阵包含数字数据和有时是字符串。我对这些矩阵所做的操作大多类似于过滤某个阈值以上的矩阵，找到所有高于某个值的矩阵索引，找到一个高于 X 的值列表，然后找到它们之间的连续差异，一些字符串替换操作。做矩阵点积等。我需要访问数千个文件来生成这些矩阵（我在 MATLAB 中使用的 dlmread）。

现在我需要用通常与操作系统捆绑在一起的任何其他语言来实现上述项目，比如 Perl、c 或 python 或开源语言。

我做了一个简短的搜索，发现 python 是一个很好的研究工具。python 是否有一些用于矩阵运算的 MATLAB 等价物（例如将文件直接读入数组、查找、dlmwrite 等）

因为我的代码已经有很多没有这些 MATLAB 函数的循环，所以代码会变得更加混乱且难以维护。

或者你能指出任何其他的选择。我熟悉小 Perl，但不熟悉 python 或 R。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T03:12:50.407

从这个页面开始[比较 NumPy 和 Matlab](http://www.scipy.org/NumPy_for_Matlab_Users)。

以下是有关您的帖子的一些示例：

```
In [5]: import scipy

In [6]: X = scipy.randn(3,3)

In [7]: X
Out[7]: 
array([[-1.16525755,  0.04875437, -0.91006082],
       [ 0.00703527,  0.21585977,  0.75102583],
       [ 1.12739755,  1.12907917, -2.02611163]])

In [8]: X>0
Out[8]: 
array([[False,  True, False],
       [ True,  True,  True],
       [ True,  True, False]], dtype=bool)

In [9]: scipy.where(X>0)
Out[9]: (array([0, 1, 1, 1, 2, 2]), array([1, 0, 1, 2, 0, 1]))

In [10]: X[X>0] = 99

In [11]: X
Out[11]: 
array([[ -1.16525755,  99\.        ,  -0.91006082],
       [ 99\.        ,  99\.        ,  99\.        ],
       [ 99\.        ,  99\.        ,  -2.02611163]])

In [12]: Y = scipy.randn(3,2)

In [13]: scipy.dot(X, Y)
Out[13]: 
array([[-124.41803568,  118.42995937],
       [-368.08354405,  199.67131528],
       [-190.13730231,  161.54715769]]) 
```

（无耻插件：[我曾经在 Python 和 Matlab 之间做的比较。](http://stevetjoa.com/305)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T02:59:35.857

你可能想看看[NumPy](http://numpy.scipy.org/) / [SciPy](http://www.scipy.org/)，它们可能会帮助你做你想做的事。此外，还有大量用户，这将使在需要时更容易获得帮助。两个库的一般介绍在[这里](http://www.scipy.org/more_about_SciPy)

# ruby-on-rails - 通过回形针从 sendgrid API 发送的附件将图像上传到 s3

> ID：10747938
> 
> 赞同：1
> 
> 时间：2012-05-25T02:58:47.920
> 
> 标签：ruby-on-rails, amazon-s3, paperclip, sendgrid

我正在创建一个 Rails 应用程序，人们可以在其中将照片发送到我的服务。Sendgrid API 将信息发布到我的控制器。

其中一个参数是附加的图像。我想创建一个新帖子（@post = Post.new），帖子附有照片（回形针）。我想拍摄附加的图像并将其用作帖子的图像。我只能找到人们使用表单创建模型并且表单传递图像的示例。他们会做类似@post = Post.new(params[:post]) 的事情。这对我不起作用，因为我需要将 Sendgrid 中的信息与我的模型相匹配。

@post = Post.new Post.photo = params[:attachment] 不起作用

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:37:39.913

`:attachment`实际上不应该包含图像。它应该是格式`:attachmentX`。

请参阅我们的解析 API 文档以供参考：[http ://docs.sendgrid.com/documentation/api/parse-api-2/](http://docs.sendgrid.com/documentation/api/parse-api-2/)

# c# - 分配给 IList< > 或 List< >？

> ID：10747939
> 
> 赞同：1
> 
> 时间：2012-05-25T02:59:19.123
> 
> 标签：c#

> **可能重复：**
> [为什么要使用 IList 或 List？](https://stackoverflow.com/questions/8717582/why-use-ilist-or-list)

我有以下内容：

```
public class CityViewModel
{
    public CityViewModel() {     
        Details = Enumerable.Range(1,10).Select(x => new City.Detail()).ToList(); 
    }
    public string Topic { get; set; }
    public City City { get; set; }
    public IList<City.Detail> Details { get; set; }
} 
```

向我提供了作为创建详细信息的一种方式的建议。我不确定的是为什么以下行被声明为 IList：

```
public IList<City.Detail> Details { get; set; } 
```

将其声明为：

```
public List<City.Detail> Details { get; set; } 
```

有人可以向我解释其中的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:05:05.700

`IList<T>`是一个接口。`List<T>`是具体类型。

如果您想少告诉用户您的内部实现（通常这是您想要避免的），那么您应该使用`IList<T>`- 因为您可以自由切换到实现该接口的任何东西......这可能是某种适配器或包装器 - 或用于测试的模拟。

我还会考虑您是否真的需要返回列表样式对象，或者 using 是否`IEnumerable<T>`更适合您的需求（如果您只是遍历该列表）。如果您需要长度和直接索引，我认为您只需要该列表 - 即使这样从 an 创建列表`IEnumerable<T>`也很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T03:14:14.930

```
 public IEnumerable<City.Detail> Details { get; private set; } 
```

这可能是您想要从作为类的接口开始的内容。公开最低限度的必要功能，并且不允许外部类修改成员或集合。

仅在需要时公开附加功能（IList），仅在绝对需要时公开设置器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T03:04:12.713

我对此的看法是，返回 IList 使您的方法的调用者能够不知道底层实现。这意味着如果您将方法中的实现更改为也实现 IList 的另一个集合，则无需更新任何调用者。然而，如果您返回一个具体的列表，则如果您对基础集合类型进行更改，则必须更新所有调用者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T03:12:31.170

出于信息隐藏和可测试性的原因，使用接口而不是类绝对是正确的方法。我什至会走得更远，如果可以的话，建议使用`ICollection<T>`而不是`IList<T>`：就选择替代实现而言，这将为您提供更大的灵活性，同时让您的用户执行几乎相同的操作。

此外，我可能不会为它使用自动可分配属性：我会返回一个只读版本，并提供单独的方法来操作我自己的类上的列表。

这是我要做的：

```
public class CityViewModel {
    private readonly List<City.Detail> details;
    public CityViewModel() {
        // Here you assign a List to details
    }
    public ICollection<City.Detail> Details {
        get {
            return details.AsReadOnly();
        }
    }
} 
```

这对用户隐藏了列表的实现，不允许他们在你背后修改列表，甚至不会告诉他们你正在使用`List`. 例如，如果您决定在`HashSet`以后使用 a，您可以将其换掉，而不必担心破坏使用您的类的代码中的某些内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T03:15:03.173

`IList`和之间的基本区别在于`List`IList 是一个接口，其中 List 是类。因此，如果您使用 List，您将获得更多内置功能来进行搜索或数据操作。

[列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

[列表](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)

# jquery - 为什么 jQuery animate 不适用于 cssHooks？

> ID：10747940
> 
> 赞同：2
> 
> 时间：2012-05-25T02:59:22.703
> 
> 标签：jquery, jquery-animate

```
$.cssHooks.test = {
    get: function(elem) {
        return $(elem).height();
    },
    set: function(elem, value) {
        $(elem).height(value);
    }
};

$('#test').css('test', '30px');

$('#test').click(function() {
    $(this).animate({
        width: 100,
        test: 100
    }, 'slow');
});​ 
```

[http://jsfiddle.net/CzkQ8/2/](http://jsfiddle.net/CzkQ8/2/)

点击后，宽度变成了100px，但是高度还是30px，为什么？

**编辑**

仔细阅读文档后，我知道如何让 cssHooks 与 animate 一起工作。

```
$.fx.step.test = function(fx) {
    $.cssHooks.test.set(fx.elem, fx.now + fx.unit);
}; 
```

[http://jsfiddle.net/CzkQ8/12/](http://jsfiddle.net/CzkQ8/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:49:32.197

这是我认为您真正需要的，每次设置宽度时都更改高度。`$.cssHooks`旨在为现有属性工作。[http://jsfiddle.net/CzkQ8/11/](http://jsfiddle.net/CzkQ8/11/)

```
$.cssHooks.width = {
    set: function(elem, value) {
        elem.style.width = elem.style.height = value;
    }
};

$('#test').click(function() {
    $(this).animate({
        width: 100
    }, 'slow');
});​ 
```

您的示例不起作用的原因是因为 animate 没有`$.css('test', value)`重复调用，而是在调用`$.css('height', value)`

`$.cssHooks`每次调用时都会被调用`$.css(propName, value)`但是，animate 从不调用`$.css('test', value)`，这就是当你调用`$.css('test', 1000)`自己时它起作用的原因；

**@clyfish** 您对问题的更新不是做您正在做的事情的正确方法。你试图

> 添加对自定义属性动画的支持`test`并添加一个每次调用时`$.css('test')`都会调用的钩子

这是你真正应该拥有的[http://jsfiddle.net/CzkQ8/14/](http://jsfiddle.net/CzkQ8/14/)

```
$.cssHooks.test = {       
    get: function(elem) {
        return $(elem).height();
    },
    set: function(elem, value) {
        $(elem).height(value);
    }
};

$.fx.step.test = function(fx) {
    // No need to call the hook itself. A step function is supposed to call 
    // $.css() and that will in turn call the hook
    $(fx.elem).css('test', fx.now + fx.unit);
};

$('#test').click(function() {
    $(this).animate({
        width: 100,
        test: 100
    }, 'slow');
});​ 
```

希望你明白我想向你展示的东西。

# jsf - JSF h:inputText 在 a4j:commandButton 提交后保留旧数据

> ID：10747941
> 
> 赞同：0
> 
> 时间：2012-05-25T02:59:23.627
> 
> 标签：jsf, ajax4jsf

好的，我有这样的事情：

```
<a4j:form ignoreDupResponses="true">
    <rich:tabPanel switchType="ajax" immediate="true" id="panelId">
        <rich:tab label="Name" name="NAME" action="#{bean.clearData()}">
            <h:inputText value="#{bean.value1}" required="true"/>
            <h:inputText value="#{bean.value2}" required="true"/>
            <rich:messages/>
            <a4j:commandButton action="#{bean.someAction()}" value="OK"
                reRender="panelId" />
        </rich:tab>
        <rich:tab label="Name2" name="NAME2">
            <!-- Some content -->
        </rich:tab>
    </rich:tabPanel>
</a4j:form> 
```

`bean.someAction()`是一个保存在我的数据库`value1`和`value2`. 是一个通过 bean 清除和从 bean`bean.clearData()`清除的函数，或者如果它已经保存在 DB 中则加载它。`value1``value2`

这是我的问题......当我输入`value1`一些值，然后我`value2`留空时，我会得到一些打印在`<rich:messages/>`.
然后我切换到选项卡“Name2”，然后返回选项卡“Name1”，网页将显示 any 的旧值`<h:inputText/>`，因为我执行`bean.clearData()`的值在我的 bean 中是空的，而且它们甚至不在对话。

编辑：我的表单保留数据并且不清除它，即使它不再在 bean 中。

我能想到的只是浏览器缓存数据，并且我想避免在数据未保存在我的数据库中时加载数据。有谁知道如何解决这个问题？我在 h:inputText 中尝试了 autocomplete="off" ，但没有结果。

PS：使用火狐12.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:37:55.243

你`reRender="panelId"`在你的里面试过`<a4j:form>`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:02:34.977

在浏览器设置中给出清晰的历史记录、cookies、缓存等`automatically`。
我认为它会起作用。

# jquery - 如何将列表/菜单值作为类传递给元素？

> ID：10747946
> 
> 赞同：0
> 
> 时间：2012-05-25T02:59:35.907
> 
> 标签：jquery, forms, list, parameter-passing

我有一个下拉列表/菜单，每个选项都有一个值。我希望将该值传递给一个元素以确定所需的样式。这是我的原始 html，希望 jquery 能够做到这一点。它也需要传递的元素称为

```
 <div class="user-text"> 
```

所以我希望它可以为每个值添加一个这样的类。

```
 <div class="user-text curveMeTop"> 
```

这是我的价值观清单

```
 <div class="top15">
  <div class="label">Text Warp</div>
  <select name="warp-list">
    <option value="curveMeTop">Curve Top</option>
    <option value="curveMeBottom">Curve Bottom</option>
    <option value="wave">Wave</option>
    <option value="buldge">Buldge</option>
    <option value="skew">Skew</option>
  </select>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:05:40.037

干得好：

```
$(function(){
    $('#warp-list').on('change', function() {
        $('div.user-text').attr('class', 'user-text ' + $(this).find('option:selected').val());
    });
}); 
```

例如，参见[JSFiddle](http://jsfiddle.net/kpSh2/)。

我通过[`attr`](http://api.jquery.com/attr/)而不是 addClass 设置类的原因是，每次更改下拉选择时，您都会不断添加其他类。另一种方法是首先尝试删除每个类选项，或者将类重置为空，然后添加“用户文本”类以及您要添加的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:06:03.283

你可以使用`addClass`方法::

```
$('select').change(function(){
  var cls = $(this).val();
  $('.user-text').addClass(cls);
}) 
```

# java - 发现异常或服务器正在运行时自动停止“tail -f catalina.out”

> ID：10747953
> 
> 赞同：2
> 
> 时间：2012-05-25T03:00:24.937
> 
> 标签：java, python, shell, tail

我已经为我的 Web 应用程序设置了一个自动部署脚本（在 shell 脚本中）。

它使用 java、tomcat、maven 和 postgres 数据库。

部署脚本执行以下操作：

1.  从源存储库构建可部署的应用程序
2.  停止Tomcat
3.  应用数据库迁移补丁
4.  在tomcat中部署war文件
5.  启动 tomcat（通过调用 $TOMCAT_HOME/bin/startup.sh）
6.  退出并显示成功消息

一切正常，而且非常整洁 - 但需要一点改进。您会看到，即使它退出并显示成功消息，有时部署也不会成功，因为 Web 应用程序没有正确启动。

我想重构步骤 5 和 6，以便在启动 tomcat 服务器后，部署脚本将在 catalina.out 文件中“tail -f”，查找“服务器已成功启动”消息或异常堆栈跟踪。

到那时为止的 tail -f 输出应该是部署脚本输出的一部分，并且步骤 6 将相应地“退出 0”或“退出 1”。

我知道这应该是可能的，如果不是在 shell 脚本中，也许是 python。问题是我是一名 Java 专家——所谓专家，我的意思是我对其他一切都很糟糕 :-)

请帮忙？:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:41:28.740

也许是这样的？

```
tmp=$(mktemp -t catalina.XXXXXXX) || exit 136
trap 'rm "$tmp"' 0
trap 'exit 255' 2 15
tail -n 200 catalina.out >"$tmp"
if grep -q error "$tmp"; then
    cat "$tmp"
    exit 1
fi
exit 0 
```

另一方面，如果`startup.sh`编码得当，你可以

```
if startup.sh; then
    tail -f catalina.out
else
    exit $?
fi 
```

可以缩短为

```
startup.sh || exit $?
tail -f catalina.out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:56:15.910

作为替代方案，您可能想看看[Apache Tomcat Manager](http://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html)应用程序。除其他外，它还支持：

*   从本地路径远程部署应用程序
*   列出当前部署的应用程序
*   重新加载现有应用程序
*   启动现有应用程序
*   停止现有应用程序
*   取消部署现有应用程序

管理器提供了一个可以通过 调用的 Web 界面，`curl`它返回简单的、可解析的消息以指示调用命令的状态。也可以通过 JMX 或 Ant 脚本调用管理功能。总而言之，一个非常方便的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:41:40.330

正如@snies 所建议的那样，我最终使用 Python 的 subprocess.Popen 实现了一个解决方案。

这是它的样子：

**等待它.py**

```
#! /usr/bin/env python
import subprocess
import sys

def main(argv):
    filename = argv[1]
    match=argv[2]
    p = subprocess.Popen(['tail', '-n', '0', '-f', filename], stdout=subprocess.PIPE)
    while True :
        line = p.stdout.readline()
        print line ,
        if match in line :
            break
    p.terminate()

if __name__ == "__main__":
    main(sys.argv) 
```

**tailUntil.sh**

```
#!/bin/bash
set -e

filename=$1
match=$2

thisdir=$(dirname $0)
python $thisdir/waitForIt.py "$filename" "$match" 
```

进而

**启动Tomcat.sh**

```
${TOMCAT_HOME}/bin/startup.sh
logDeploy.sh "Agora vamos dar um tail no catalina.out..."
util_tailUntil.sh "$TOMCAT_HOME/logs/catalina.out" 'INFO: Server startup in ' 
```

它没有做我最初想要的（即使有堆栈跟踪，它仍然以返回码 0 退出 - 但这可以通过更多的 Python 魔法来改变），但是所有 tomcat 的初始化日志都是自动化的一部分部署（并且在 Jenkins 的部署工作中很容易查看）——这就足够了。

# asp.net - Web 应用程序在本地工作 - 远程 504 错误

> ID：10747962
> 
> 赞同：1
> 
> 时间：2012-05-25T03:02:41.247
> 
> 标签：asp.net, .net, iis, firewall, http-status-code-504

我有一个托管在 IIS7 上的网站（ASP.NET WebForms）。我有一个静态IP。我的路由器指向我网络上正确的计算机 IP。当我访问服务器的内部 IP 时，该站点在服务器和同一网络上的计算机上都可以正常工作。但是，当我尝试通过静态 IP 或域名远程访问该站点时，出现 504 超时错误。

我完全不知道从哪里开始，因为 504 错误没有让我知道问题出在哪里。端口 80，这是打开的端口，对入站防火墙规则开放......它不是用于出站，但我打开它来测试它，它仍然不起作用。

除此之外，我没有想法。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:39:43.003

这意味着您已经在家中部署了您的网络。当您尝试使用域名或静态 IP 地址在 Intranet 上调用时，您可以这样做，但是当您尝试在 Internet 上访问时，您不能。我可以看到的解决方案是因为在 Internet 上，它无法识别您需要传递 ISP 的动态 IP 的静态 IP 地址。

转到[此处，](http://whatismyipaddress.com/)这将告诉您的 IP 信息，例如：**202.147.18.194**，而不是传递您的静态机器 IP，而是在您尝试通过 Internet 访问时传递此 IP。您的网站的 URL 将是这样的：

“http://202.147.18.194/MyWeb/index.asp”

# sql - 为什么我不能对包含聚合的表达式执行聚合函数，但我可以通过围绕它创建一个新的 select 语句来执行此操作？

> ID：10747963
> 
> 赞同：27
> 
> 时间：2012-05-25T03:03:00.100
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

为什么在 SQL Server 中我不能这样做：

```
select  sum(count(id)) as 'count'
from    table 
```

但我可以

```
select sum(x.count)
from
(
    select  count(id) as 'count'
    from    table   
) x 
```

它们本质上不是一回事吗？为了理解为什么不允许第一个代码块，我应该如何考虑这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T06:25:40.503

您的示例中的 SUM() 是无操作的 - COUNT() 的 SUM() 与 COUNT() 的含义相同。因此，您的示例查询似乎都没有做任何有用的事情。

在我看来，嵌套聚合只有在你想应用两个不同的聚合时才有意义——这意味着 GROUP BY 在不同的列集上。要指定两个不同的聚合，您需要使用 GROUPING SETS 功能或 SUM() OVER 功能。也许如果你解释你想要达到的目标，有人可以告诉你如何。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T08:29:34.487

问题的要点是没有应用于关系的聚合的聚合这样的概念，请参阅[Aggregation](http://en.wikipedia.org/wiki/Relational_algebra#Aggregation)。有这样的概念会在定义中留下太多的漏洞，使 GROUP BY 子句无法表达：它需要同时定义内部聚合 GROUP BY 子句*和*外部聚合！这也适用于其他聚合属性，例如 HAVING 子句。

但是，应用于关系的聚合的结果是另一个关系，而这个结果关系又可以支持新的聚合运算符。这解释了为什么您可以将结果聚合到外部 SELECT 中。这在定义中没有歧义，每个 SELECT 都有自己不同的 GROUP BY/HAVING 子句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T04:19:07.660

它使用[SQLFiddle](http://sqlfiddle.com/#!3/07231/1)为我工作，不知道为什么它不适合你。但我确实解释了为什么它可能对你不起作用以及为什么替代方案会起作用......

您的示例使用关键字作为列名，这可能并不总是有效。但是，当列仅在子表达式中时，查询引擎可以自由地丢弃名称（实际上它可能会这样做），因此它可能与关键字潜在冲突的事实可能会被忽略。

编辑：回应您的编辑/评论。不，两者不相等。RESULT 将是等效的，但获得该结果的过程完全不同。对于第一个工作，解析器做了一些对它来说根本没有意义的工作（将聚合应用于单个值，无论是逐行还是作为），在第二种情况下，聚合应用于表。该表是临时虚拟表这一事实对于聚合函数来说并不重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T09:29:38.793

简单来说，聚合函数对列进行操作并生成标量值，因此它们不能应用于其结果。当您在标量值上创建选择语句时，会将其*转换*为人工列，这就是聚合函数可以再次使用它的原因。

请注意，在大多数情况下，将聚合函数应用于另一个聚合函数的结果是没有意义的：在您的 sample 中`sum(count(id)) == count(id)`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T10:57:35.753

我想知道你在这个 sql 中的预期结果

```
select  sum(count(id)) as 'count'
from    table 
```

使用该`count`函数时，只会返回 1 个结果（总数）。所以，我可以问你为什么要总结唯一的 1 个结果。

您肯定会遇到错误，因为聚合函数无法对包含聚合或子查询的表达式执行。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-02-28T16:10:07.623

我认为您可以编写 sql 查询，它会为所需的输出生成“计数”行。函数不采用聚合函数，如“sum”或聚合子查询。我的问题是通过使用简单的 sql 查询来解决的。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2012-05-26T10:49:20.163

> **Microsoft SQL Server 不支持它。**

您可以通过使用`Derived`表格来解决此问题：

```
select sum(x.count)
from
(
    select  count(id) as 'count'
    from    table   
) x 
```

* * *

另一方面，使用下面的代码会给你一条错误消息。

```
select  sum(count(id)) as 'count'
from    table 
```

> **无法对包含聚合或子查询的表达式执行聚合函数**

# python - 对字符串进行编码或强制字符串需要在此文件中进行编码的调用在哪里？

> ID：10747964
> 
> 赞同：1
> 
> 时间：2012-05-25T03:03:13.873
> 
> 标签：python, string, encoding, file-io, pyqt

我知道这可能看起来很粗鲁、刻薄或不礼貌，但我需要一些帮助来弄清楚为什么我不能`window.loadPvmFile("f:\games@DD.ATC3.Root\common\models\a300\amu\dummy.pvm")`像字符串那样调用它。它没有这样做，而是给了我一个回溯错误：

```
Traceback (most recent call last):
    File "F:\Python Apps\pvmViewer_v1_1.py", line 415, in <module>
        window.loadPvmFile("f:\games\@DD.ATC3.Root\common\models\a300\amu\dummy.pvm")
    File "F:\Python Apps\pvmViewer_v1_1.py", line 392, in loadPvmFile
        file1 = open(path, "rb")
IOError: [Errno 22] invalid mode ('rb') or filename:
'f:\\games\\@DD.ATC3.Root\\common\\models\x07300\x07mu\\dummy.pvm' 
```

另请注意，在回溯错误中，文件路径不同。当我尝试一个除了驱动器号和文件名之外没有字母的路径时，它会引发此错误：

```
 Traceback (most recent call last):
File "F:\Python Apps\pvmViewer_v1_1.py", line 416, in <module>
    loadPvmFile('f:\0\0\dummy.pvm')
File "F:\Python Apps\pvmViewer_v1_1.py", line 393, in loadPvmFile
    file1 = open(path, "r")
TypeError: file() argument 1 must be encoded string without NULL bytes, not str 
```

我已经搜索了调用编码函数的位置或参数被编码的位置并且找不到它。完全出乎意料，我没有想法，沮丧，我无处可去。源代码可以在这里找到：[PVM VIEWER](http://codeviewer.org/view/code:2660)

另请注意，您将无法运行此代码并加载 pvm 文件，并且我使用的是可移植的 python 2.7.3！感谢大家的时间和精力！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:06:36.683

`\a`并且`\0`是转义序列。在字符串周围使用`r''`（或`R''`）将其标记为[原始字符串](http://docs.python.org/reference/lexical_analysis.html#string-literals)。

`window.loadPvmFile(r"f:\games@DD.ATC3.Root\common\models\a300\amu\dummy.pvm")`

# javascript - 为什么我的正则表达式输出中有 / ？

> ID：10747970
> 
> 赞同：0
> 
> 时间：2012-05-25T03:04:27.277
> 
> 标签：javascript, jquery, regex

我未修改的 HTML 如下所示：

```
<body class="home bc-hide-1bc-hide-2"> 
```

我的 JS 看起来像这样：

```
var c = $("body").attr("class").replace(/(bc-hide-\d)/,/$& /);
$("body").attr("class", c); 
```

目标是让我的 HTML 看起来像这样（注意 bc-hide-1 和 bc-hide-2 之间的空格）：

```
<body class="home bc-hide-1 bc-hide-2"> 
```

使用上面的 JS，我的输出实际上在 bc-hide-# 的每个实例前面都有一个 / （见下文）：

```
<body class="home /bc-hide-1 /bc-hide-2"> 
```

我不必对正则表达式做太多事情，我一直在浏览文档，但我只是没有找到阻止 / 输出所需的内容。任何帮助是极大的赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T03:10:46.493

要回答实际问题：

> 为什么我的正则表达式输出中有 / ？

因为您在替换中有两个斜杠：`/$& /`.

替换应该是字符串，而不是正则表达式，并且`/$& /.toString()`（表达式的字符串表示形式）是`"/$& /"`.

只需使用`'$& '`.

* * *

但我同意 Evan 的观点，你应该修复生成 HTML 的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T03:10:51.283

```
var c = $("body").attr("class").replace(/(bc-hide-\d)/,'$& '); 
```

替换是一个字符串，而不是正则表达式。JS 将您传入的正则表达式转换为字符串，包括斜杠。

# python - 如何检查当前时间是否在python的范围内？

> ID：10747974
> 
> 赞同：37
> 
> 时间：2012-05-25T03:05:02.707
> 
> 标签：python, datetime, range

我需要检查当前时间是否在时间范围内。最简单的情况time_end > time_start：

```
if time(6,0) <= now.time() <= time(12,00): print '1' 
```

但是当用户进入结束时间小于开始时间的时间范围时，麻烦就开始了，例如“23:00 - 06:00”。像“00:00”这样的时间将在此范围内。大约 5 年前，我编写了这个 PHP 函数：

```
function checkInterval($start, $end)
  {    
    $dt = date("H:i:s");    

    $tstart = explode(":", $start);
    $tend =   explode(":", $end);
    $tnow =   explode(":", $dt);

    if (!$tstart[2])
      $tstart[2] = 0;

    if (!$tend[2])
      $tend[2] = 0;  

    $tstart = $tstart[0]*60*60 + $tstart[1]*60 + $tstart[2];
    $tend   = $tend[0]*60*60   + $tend[1]*60   + $tend[2];
    $tnow   = $tnow[0]*60*60   + $tnow[1]*60   + $tnow[2];

    if ($tend < $tstart)
      {
        if ($tend - $tnow > 0 && $tnow > $tstart)
          return true;
        else if ($tnow - $tstart > 0 && $tnow > $tend)
          return true;
        else if ($tend > $tnow && $tend < $tstart && $tstart > $tnow)
          return true;
        else return false;
      } else
      {
        if ($tstart < $tnow && $tend > $tnow)
          return true;
        else
          return false;
      } 
```

现在我需要做同样的事情，但我想让它好看。那么，我应该使用什么算法来确定当前时间“00:00”是否在*反向*范围内，例如`['23:00', '01:00']`？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-25T03:12:35.107

Python 解决方案将变得非常非常短。

```
def time_in_range(start, end, x):
    """Return true if x is in the range [start, end]"""
    if start <= end:
        return start <= x <= end
    else:
        return start <= x or x <= end 
```

使用、和的`datetime.time`类。`start``end``x`

```
>>> import datetime
>>> start = datetime.time(23, 0, 0)
>>> end = datetime.time(1, 0, 0)
>>> time_in_range(start, end, datetime.time(23, 30, 0))
True
>>> time_in_range(start, end, datetime.time(12, 30, 0))
False 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-25T03:13:12.090

# 日期/时间比你想象的要复杂

涉及日期/时间的计算可能非常棘手，因为您必须考虑时区、闰年、夏令时和许多极端情况。[Taavi Burns 在 PyCon2012 的演讲中](http://pyvideo.org/video/946/what-you-need-to-know-about-datetimes)有一段启发性的视频，题为“你需要了解的关于日期时间的知识”：

> [**您需要了解的关于 datetimes**](http://pyvideo.org/video/946/what-you-need-to-know-about-datetimes) :
> `time`,`datetime`和`calendar`标准库的内容有点混乱。找出：在哪里使用什么以及如何使用（特别是当您有许多时区的用户时），以及您可能想要研究哪些额外的模块。
> 
> **事件**：PyCon US 2012 /**演讲者**：Taavi Burns /**录制**时间：2012 年 3 月 10 日

# 使用时区感知日期时间进行计算

明天的概念`datetime.time`是无效的，因为`datetime.time`缺少任何日期信息。在比较之前，您可能希望将所有内容都转换为时区感知`datetime.datetime`：

```
def time_in_range(start, end, x):
    today = timezone.localtime().date()
    start = timezone.make_aware(datetime.datetime.combine(today, start))
    end = timezone.make_aware(datetime.datetime.combine(today, end))
    x = timezone.make_aware(datetime.datetime.combine(today, x))
    if end <= start:
        end += datetime.timedelta(days=1) # tomorrow!
    if x <= start
        x += datetime.timedelta(days=1) # tomorrow!
    return start <= x <= end 
```

# python - 使用 Py2EXE 和 IDLE-X 编译 WxPython

> ID：10747980
> 
> 赞同：0
> 
> 时间：2012-05-25T03:05:33.327
> 
> 标签：python, wxpython, py2exe

目前我正在学习python，并且一直在尝试编译python代码。

我遇到的问题是，一旦脚本被编译，它就没有响应。

我了解到一个 IDLE-X 扩展可以帮助解决这个问题，但是编译后会出现同样的错误。我正在运行 Windows 7 Ultimate 64Bit、wxPython 2.7、python 2.7 和 py2exe for 2.7。->

```
import wx

class aero(wx.Frame):

def __init__(self,parent,id):
    wx.Frame.__init__(self,parent,id,'Aero v1.0b', size=(500,500))
    panel=wx.Panel(self)

    status=self.CreateStatusBar()
    menubar=wx.MenuBar()
    first=wx.Menu()
    second=wx.Menu()
    first.Append(wx.NewId(),"New Window","This is a new window" )
    first.Append(wx.NewId(),"Open...","This will open a new window" )
    menubar.Append(first,"File")
    menubar.Append(second,"Edit")
    self.SetMenuBar(menubar)

if __name__=='__main__':
app=wx.PySimpleApp()
frame=aero(parent=None,id=-1)
frame.Show()
app.MainLoop 
```

我从这个线程中得到了一些帮助：[pythonw.exe 没有响应](https://stackoverflow.com/questions/9987419/pythonw-exe-is-not-responding)

我想知道为什么会这样。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:05:51.690

由于 py2exe 不再更新，我建议尝试使用 PyInstaller 或 cx_freeze。

# jquery - jQuery Mobile 中的历史是如何工作的？（特别是在涉及后退按钮时）

> ID：10747982
> 
> 赞同：1
> 
> 时间：2012-05-25T03:05:43.900
> 
> 标签：jquery, jquery-mobile, history, back, jsrender

jqm 上的这个历史事件让我发疯......每次我认为我有解决方案时，它都会从我的掌握中滑落。

事情是这样的：我正在开发一个动态生成的内容应用程序。这些页面是从 JSON 文件生成并使用 jsRender 呈现的。它们在第一个请求时被加载到 DOM 中（我为此使用了 jqm 多页模板），然后，在下面，它们被简单地使用指向该 #id 的 changePage 调用（我从中获得灵感的模型是这个： http: [//jquerymobile.com/test/docs/pages/page-dynamic.html](http://jquerymobile.com/test/docs/pages/page-dynamic.html)）。一切正常，但一段时间后 DOM 变得过于拥挤并减慢了我的系统（尤其是我加载应用程序的智能手机）。解决方案是在用户离开页面后立即取消页面，就像在这个项目中一样： [http ://roughlybrilliant.com/jsrender_json_apis_and_jquery_mobile](http://roughlybrilliant.com/jsrender_json_apis_and_jquery_mobile)

它使用

```
$.mobile._bindPageRemove 
```

操作说明。无论如何，我第一次尝试是使用 jQuery 提供的 .remove() 指令，而不是使用它：

```
$("#" + entity.name + "-" + entityId).bind('pagehide', 
     function() {
         $(this).remove();
     }); 
```

因此，无论何时隐藏页面，它都会从 DOM 中删除。因此，假设我们在我的页面中点击了一个链接以转到另一个，起始页面被删除并加载新页面。这里我有一个后退按钮，所以当我点击它时，它会让我回到刚刚删除的页面上一步。现在在我的代码中，我有一个函数可以再次构建页面并显示它。只是为了大致了解我的应用程序是如何工作的。

现在假设我可以在我的链接树中更深一层：假设我在 lvl 2 并转到 lvl 3 然后回到 2。在这种情况下，lvl 2 页面没有后退按钮，即使在代码中我将其设置为存在。

这是 jsRender 中的模板：

```
<script id="header-buttons" type="text/x-jquery-tmpl">
    <div data-role="header" data-position="inline" data-backbtn="true">
    <h1>{{:name}}</h1>
    <a href="#root" class="ui-btn-right" data-icon="home">Home</a>
    </div>
</script> 
```

我认为这是因为删除指令（或 $.mobile._bindPageRemove）也在从历史记录中删除页面。所以我更改并使用 empty() 指令来清空 div，然后用什么重新填充它我需要...没有成功。如果我在访问后删除页面，我只能返回树中的 1 级。

我的目标是绕过我的应用程序动态加载页面，一旦我离开它们，我只想在不改变历史记录的情况下将它们从 DOM 中删除，所以当我返回并重新加载页面时，我总是可以使用后退按钮这页纸。

所以我的问题是：历史在 jqm 中是如何运作的？当 jqm 用它的代码增强页面时，它是否会为它应该指向哪个页面的后退按钮添加任何指示？如何强制页面显示后退按钮并指向历史记录中的上一个元素？是否有可能如果我从 DOM 中删除某些内容，它也不会从历史记录中删除？

感谢您的帮助，希望我的担忧足够清楚...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:12:15.073

在页面所需的单独 js 文件中设置以下命令。

```
$.mobile.page.prototype.options.domCache = false; 
```

这样做基本上不会将旧页面缓存到 DOM 中。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:42:42.000

好的，我已经以类似于乔纳森建议我的方式解决了这个问题。

我创建了一个单独的堆栈，用于跟踪我访问过的页面及其 URL。然后，通过一个辅助函数，我检查这个堆栈并创建一个向后指向的按钮。因此，如果堆栈的最后一个条目是活动页面，则倒数第二个将是我用后退按钮指向的那个。

希望有帮助！

# c# - C# 不安全的指针字段

> ID：10747983
> 
> 赞同：2
> 
> 时间：2012-05-25T03:05:51.620
> 
> 标签：c#, field, unsafe

这是要破了吗？它编译得很好，但根据读数，我不确定它是否保证 _ptRef 将始终指向构造函数中引用的结构。

我猜“break”是指……GC会移动指针（_ptRef）指向的结构吗？

```
public unsafe class CPointType0
{
    private PointType0* _ptRef = null;

    public CPointType0(ref PointType0 spt)
    {
        fixed (PointType0 * pt = &spt)
        {
            _ptRef = pt;
        }
    }

...a bunch of property accessors to fields of _ptRef (accessed as return _ptRef->Thing) } 
```

场景是

-PointType0 是一个结构。

- 数百万个 PointType0 在内存中的数据结构中。这些曾经是引用类型，但内存开销太大。

- 只有当搜索操作找到相关的PointType0时才返回一个List，并且这个List被传来传去，被操作了很多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T03:08:17.460

这不安全。

代码离开`fixed`块后，垃圾收集器可以自由地再次移动东西。你想在这里完成什么？您是否可能想使用列表中项目的索引而不是指针？

# multithreading - SBCL 线程中的死锁

> ID：10747987
> 
> 赞同：1
> 
> 时间：2012-05-25T03:06:14.773
> 
> 标签：multithreading, common-lisp, sbcl

我正在使用 SBCL 为一个研究项目编写脚本，这是我第一次尝试 SB-TREAHD。每个线程将多次调用外部 shell 命令，为此使用 sb-ext:run-program。

问题是，每当出现 ext:run-program 时，程序就会陷入死锁（我没有明确使用 mutex 之类的东西）。我尝试了一段时间，找不到任何解决方案。仍然可以使死锁发生的代码的简化版本如下：

```
(use-package :sb-thread)

;;; Global Settings
(defparameter *path-num* 4)
(defparameter *testing* nil)
(defparameter *training* nil)
(defparameter *shared-folder* "shared")
(defparameter *template* "template.conf")
(defparameter *pwd* (namestring (truename ".")))

;;; Utilities
(defmacro compose-file-name (&rest parts)
  "compose a filename under current *pwd*"
  `(concatenate 'string *pwd* 
        ,@(mapcar (lambda (x) `(format nil "/~a" ,x))
              parts)))

(defun run-command (command &optional args)
  "run a shell comamnd and reflect the stdout on screen."
  (let* ((process (sb-ext:run-program command args
                                     :output :stream
                                     :wait nil))
         (output (sb-ext:process-output process)))
    (loop for line = (read-line output nil)
       while line do (format t "~a~%" line))))

(setf *testing* '("1" "2" "3" "4"))
(setf *training* '("5" "6" "7" "8"))

(defun gen-conf (path-id target labeled)
  "Prepare the configuration file"
  (format t "[~a]: ~a~%" path-id target)
  (let ((current-dir (compose-file-name path-id)))
    (run-command "/bin/cp" (list "-f" (compose-file-name *shared-folder* *template*)
                                 (format nil "~a/Prediction.conf" current-dir)))
    (with-open-file (*standard-output* (format nil "~a/Prediction.conf" current-dir)
                           :direction :output
                           :if-exists :append)
      (format t "--estimate ~a~%" path-id))))

(defun first-iteration ()
  (loop for i below 20
       do (gen-conf (thread-name *current-thread*) (format nil "~a" i) (list "123" "456"))))

;;; main
(defun main ()
  (let ((child-threads (loop for i below *path-num*
                          collect (make-thread 
                   (lambda () (first-iteration))
                   :name (format nil "~a" i)))))
    (loop for th in child-threads
       do (join-thread th))))

(main) 
```

在（main）中创建了4个线程，每个线程都将运行（第一次迭代），并且在（第一次迭代）中它调用（gen-conf）几次，这涉及到（sb-ext：run-program）和文件 I/O。

我认为死锁可能是由于错误地使用了 sb-thread，但仅通过查看 SBCL 手册我无法找到正确的方法。任何建议都会有所帮助。

顺便说一句，要运行程序，请获取[http://pages.cs.wisc.edu/~breakds/thread.tar.gz](http://pages.cs.wisc.edu/~breakds/thread.tar.gz)，其中创建了所有必需的目录/文件。

谢谢！

# qt - 捕捉 Qt 修饰键释放

> ID：10747991
> 
> 赞同：4
> 
> 时间：2012-05-25T03:07:12.683
> 
> 标签：qt, keyboard, keyboard-events

我是 Qt 的新手，但我正在尝试在 Qt 应用程序中实现基本上相当于视频游戏式输入循环的东西（我知道这很疯狂，但看看你能不能帮忙）。我需要准确的、一对一的按键*和*按键释放事件处理，包括修饰符在内的所有按键，无论您多么奇怪地敲击键盘。

当然，您对关键事件的主要访问是通过`QKeyEvent`. 但是，假设发生以下情况：

*   用户按住`Ctrl`
*   用户按住`Up`
*   用户发布`Ctrl`并`Up`同时

据我所知，我从 Qt 得到的是：

*   QKeyEvent 用于单独按下`Ctrl`, ( `Qt::Key_Ctrl`)
*   QKeyEvent 用于单独按下`Up`, ( `Qt::Key_Up`)
*   QKeyEvent 用于释放`Ctrl+Up`, with`key() == Qt::Key_Up`和 Ctrl 位反映在修饰符的变化中。

这可能并不完全准确，但这是我对问题调试过多的最佳猜测。无论如何，涉及修饰符时的按键*释放*事件是*非常*不可靠的。

最后的 Ctrl+Up 序列是问题所在。现在，我知道我得到了修饰符状态`e->modifiers()`，并且我得到了按键`e->key()`。我可以做一些复杂的修改，尝试在内部记住修改器状态，以检测用户何时释放修改器。但是随后，Qt 文档告诉我，说到`e->modifiers()`：

> 这个函数不能总是被信任。例如，用户可以通过同时按下两个 Shift 键并释放其中一个来混淆它。

这正是我试图*避免的情况。*

有没有可靠的方法来跟踪 Qt 中的普通键和修饰键的一对一按键按下和释放？如果不是，你能得到的最接近的是什么？

**编辑：**我可以稍微改进一下。似乎如果您`Cmd`在 Mac 上按住，按几个键（比如字母键），释放它们，然后 release `Cmd`，您*不会收到字母键释放的释放事件。* 我将尝试隔离一个小例子，看看这是否真的是一个 Qt 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:50:34.860

我认为如果您对键盘非常具体，您将离开 Qt 并获得特定于操作系统的东西，或者您需要在任何过滤发生之前处理 Qt 事件。

## 在过滤之前处理 Qt 事件

Qt 中的加速器查找并等待 Alt+__ 组合，您可以设置 Ctrl+__ 组合以供 QAction 监听。

QApplication 和一般 GUI 环境中内置的这两种类型的对象可能会中断您收到的消息，并且给您的消息比您期望的要少。

[Qt 文档：事件系统](http://qt-project.org/doc/qt-4.8/eventsandfilters.html) ...这部分有指向此的链接...

[QCoreApplication::notify()](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#notify) ... 它告诉最高级别可以编写 Qt 应用程序以使用 Qt API 处理输入：

> 在 上安装事件过滤器`QCoreApplication::instance()`。这样的事件过滤器能够处理所有小部件的所有事件，因此它与重新实现 notify() 一样强大；此外，可以有多个应用程序全局事件过滤器。全局事件过滤器甚至可以看到禁用小部件的鼠标事件。请注意，应用程序事件过滤器仅对存在于主线程中的对象调用。

## 操作系统特定的键盘处理替代方案

如果从安装在上述级别的 Qt 事件过滤器查看调试语句产生的结果与您在问题中提到的结果相同，那么您将需要转到特定于操作系统的键盘输入内容。例如，在 Windows 中，您需要扫描键盘或查看整个键盘的 VK 状态并对其进行处理（使用类似 的东西[`GetKeyboardState()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646299%28v=vs.85%29.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T10:57:17.067

我知道现在回答这个问题有点晚了。仍然......我对 Mac 密钥发布事件有同样的问题，并且存在一个未解决的错误 QTBUG-36839。在 Windows 上，您可以实现键盘挂钩来捕获每个按键/释放。但即使这样在某些情况下也不可靠。例如，如果您在解锁后键入锁屏快捷方式，您将看不到任何按键释放。我想Mac上一定有类似钩子的东西。如果记住用户究竟按下了什么物理键对您很重要——我认为这是最好的方法之一。同时，根据我的经验，做一些低级的事情会花费很多时间，并且可能会在你无法想象的情况下带来奇怪的错误。所以问题是：你确定你不能用像 QAction 这样的东西来做你需要的东西吗？或者，也许您可​​以在快捷方式中使用 Control 而不是 Command :)

# sql-server - 如何在需要使用通配符的列中搜索多个值？

> ID：10747996
> 
> 赞同：6
> 
> 时间：2012-05-25T03:07:55.910
> 
> 标签：sql-server, select

在 SQL Server 中，我需要在一列中搜索多个值，但我没有确切的值，因此我还需要使用通配符。

我当前的查询如下所示：

```
SELECT * 
FROM table 
WHERE fieldname in ( '%abc1234%',
                     '%cde456%',
                     '%efg8976%') 
```

这不会返回任何结果，但如果我搜索任何一个单独的值，我会找到它，所以我知道它们在那里。没有做多个 OR，这对于数百个值来说有点笨拙，有没有办法做到这一点？

我也很想知道为什么这个查询不起作用，因为没有 % 的同一个查询工作得很好（除了只捕获几个完全匹配的小问题）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T03:13:01.547

看看使用[全文索引](http://www.simple-talk.com/sql/learn-sql-server/understanding-full-text-indexing-in-sql-server/)。这应该对您的搜索做得更好，并使您的“OR”问题*更好*地启动：

```
SELECT * 
FROM table 
WHERE CONTAINS(fieldname, '"abc1234" OR "cde456" OR "efg8976"') 
```

也可以看看：

> [http://www.simple-talk.com/sql/learn-sql-server/full-text-indexing-workbench/](http://www.simple-talk.com/sql/learn-sql-server/full-text-indexing-workbench/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T03:13:35.430

查询不起作用的原因是它`fieldname`在括号中的值列表中寻找完全匹配的值。它不会`LIKE`在考虑通配符的情况下进行比较。

所以你的查询相当于：

```
SELECT *  from table  
where  fieldname  = '%abc1234%' OR
       fieldname  = '%cde456%' OR        
       fieldname  = '%efg8976%' 
```

显然不是你想要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T03:24:05.830

```
select table.* from (
    table join
    ( select * from values (
        ( '%abc1234%' ), ( '%cde456%' ), ( '%efg8976%' )
    ) ) as search( exp ) on 0 = 0
) where fieldname like exp 
```

也许

```
select table.* from
    table join
    ( select * from values (
        ( '%abc1234%' ), ( '%cde456%' ), ( '%efg8976%' )
    ) ) as search( exp )
 on fieldname like exp 
```

模一些语法我敢肯定。

关键是这接近于允许值列表成为唯一的参数。

# ruby-on-rails - 如何在rails迁移中将默认为null的文本列更改为默认为''

> ID：10747997
> 
> 赞同：0
> 
> 时间：2012-05-25T03:08:16.693
> 
> 标签：ruby-on-rails, activerecord, migration

我正在尝试编写一个迁移来处理 null -> '' 转换，但它似乎不起作用。我有：

```
def up
  change_column :items, :detail, :text, :default => ''
end 
```

这是正确的语法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T04:31:18.053

这看起来是对的。

但是，您应该知道，如果您使用的是 MySQL，[则不能将默认值设置](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)为 TEXT 或 BLOB 字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:59:16.350

使用应该使用`change_column_default(table_name, column_name, dafault_value)` 这个问题已经在这里问过： [Rails migrations: Undo default setting for a column](https://stackoverflow.com/questions/887246/rails-migrations-undo-default-setting-for-a-column)