# StackOverflow 问答 11878000-11878999

# java - 如何更改 PDF 的 DataExport 中的列大小（具有相同宽度的列）

> ID：11878008
> 
> 赞同：0
> 
> 时间：2012-08-09T06:38:15.953
> 
> 标签：java, jsf, primefaces, export, itext

如何更改 DataExport for PDF 中的列大小

我已经使用以下代码创建了 DataTable

```
 <p:dataTable id="tb1" var="user" value="#{userManagedBean.searchUsersResults}"
        selection="#{userManagedBean.selectedUser}" selectionMode="single"
        dynamic="true"
        onRowSelectUpdate="userUpdateForm"
        onRowUnselectUpdate="userUpdateForm"
        rowSelectListener="#{userManagedBean.onUserSelect}"
        rowUnselectListener="#{userManagedBean.onUserUnselect}"
        paginator="true" rows="5" style="width: 700" >
        <p:column sortBy="#{user.userId}" filterBy="#{user.userId}" >
            <f:facet name="header">
            <h:outputText value="Id" />
            </f:facet>
            <h:outputText value="#{user.userId}" />
        </p:column>
        <p:column sortBy="#{user.username}" filterBy="#{user.username}" >
            <f:facet name="header">
            <h:outputText value="Name" />
            </f:facet>
            <h:outputText value="#{user.username}" />
        </p:column>
        <p:column sortBy="#{user.emailId}" filterBy="#{user.emailId}">
            <f:facet name="header">
            <h:outputText value="Email" />
            </f:facet>
            <h:outputText value="#{user.emailId}" />
        </p:column>
        <p:column parser="date" sortBy="#{user.dob}" filterBy="#{user.dob}">
            <f:facet name="header">
            <h:outputText value="DOB" />
            </f:facet>
            <h:outputText value="#{user.dob}" >
                <f:convertDateTime pattern="MM/dd/yyyy" />
            </h:outputText>
       </p:column>

    </p:dataTable> 
```

用于导出 pdf

```
 <h:commandLink>  
        <p:graphicImage value="/images/pdf.png" />  
        <p:dataExporter type="pdf" target="j_idt6:tb1" fileName="cars"/>  
    </h:commandLink> 
```

在 pdf 中，它显示所有具有相同宽度的列，但我需要按照我的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-21T18:24:56.810

首先，您必须在生成 pdf 后调用 pdf.setWidths(new float[]{1,1,1,2) 在导出方法中为 Pdfs 设置自定义 PdfExporter，这将为每个前 3 列和 60% 到最后一列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:01:21.187

您可以使用标签`preProcessor`中的`postProcessor`属性来自`p:dataExporter`定义您的文档。

在[PrimeFaces 展示](http://www.primefaces.org/showcase/ui/exporterProcessor.jsf)中，您可以查看示例。

# c# - 在 asp.net Membership 中实现细粒度的运行时权限？

> ID：11878013
> 
> 赞同：0
> 
> 时间：2012-08-09T06:38:43.293
> 
> 标签：c#, asp.net-mvc-3, asp.net-membership, user-permissions

是否有一种可以在运行时修改的细粒度访问的首选方法？

ASP.net 成员似乎不支持这一点。我想创建恒定的不可见子角色，以便有一组隐藏角色，如“_CanEditContent”和“_CanDeleteOthersContent”。检查将`[Authorize(Roles = SubRoles.CanEditUser)]`检查用户是否处于具有 _CanEditUser 角色的角色中。问题在于如何将角色分配给其他角色，以便当我们创建像“UserAdmin”这样的新角色时，我们如何将“_CanEditUser”角色分配给该新角色？这似乎是不可能的。

我需要做的是能够在运行时创建角色并为新角色或现有角色添加自定义权限，我将使用类似于`[Authorize]`AJAX 方法的自定义检查来进行检查。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:46:30.387

事实上，asp.net 会员不支持这一点。您必须使用自己的授权属性推出自己的机制，这将使用有关用户（或角色）权限的信息。

您可以使用 asp.net 成员资格进行角色管理，然后以任何您想要的方式为角色分配权限，例如数据库。

# windows - 在 XP 上运行单个应用程序

> ID：11878016
> 
> 赞同：0
> 
> 时间：2012-08-09T06:38:47.870
> 
> 标签：windows

是否可以将 Windows xp 配置为运行dotnet**的单个应用程序？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:55:24.167

不，这是不可能的。操作系统本身运行许多不同的应用程序只是为了执行其基本功能。

如果您正在谈论阻止用户与所有其他应用程序交互，那么您可以使用组策略进行配置。这是 Windows 中内置的基础结构功能，允许系统管理员对单个用户帐户的能力进行精确控制。

您可以轻松配置策略以防止用户启动您明确允许的应用程序以外的应用程序。但是，这不是您可以自己编写代码来完成的事情。

可以从系统管理员或[Server Fault](https://serverfault.com/)的好心人那里获得有关配置组策略的帮助。但是，如果您决定在那里提出问题，则需要提供*更多*详细信息，说明您正在尝试配置的具体内容、正在运行的操作系统以及任何其他可能重要的要求。

# email - 为什么 SMTP 邮件正文的末尾有一个“=”？

> ID：11878017
> 
> 赞同：1
> 
> 时间：2012-08-09T06:38:49.240
> 
> 标签：email, smtp

我通过套接字接收电子邮件，并看到消息正文中的长行被打断，由以下表达式分隔

```
'=\r\n' 
```

我找不到任何有关此行为的文档，想知道是否有人恰好知道我在哪里可以找到有关此行为的信息。

另外，请仅反馈我的问题，不要对电子邮件和套接字发表评论！

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:42:43.320

来自维基百科，关于[Quoted-printable](http://en.wikipedia.org/wiki/Quoted-printable)：

> 带引号的可打印编码数据行不得超过 76 个字符。为了在不改变编码文本的情况下满足这一要求，可以根据需要添加软换行符。软换行符由编码行末尾的“=”组成，在解码文本中不显示为换行符。

这`\r\n`很可能来自生成电子邮件内容或正文的任何​​内容，并且也是换行符。根据用于查看消息的客户端，它可能会或可能不会呈现为实际的换行符。

# mono - 在单声道应用程序中显示网页

> ID：11878019
> 
> 赞同：2
> 
> 时间：2012-08-09T06:38:54.940
> 
> 标签：mono, browser

有没有办法在使用单声道框架完成的应用程序中显示网页。这是一个跨平台的应用程序，所以如果解决方案是单声道的，那就太好了。它不需要是通用浏览器，我只需要显示我自己服务器上的网页。页数太多而且会经常更新，所以不能包含在应用程序本身中。

任何帮助都会非常棒。顺便说一句，该应用程序将适用于大多数移动平台，例如 android 和 iPhone。

# java - 如何使用 java 从 oracle 数据库中获取毫秒的日期/时间？

> ID：11878030
> 
> 赞同：1
> 
> 时间：2012-08-09T06:39:30.510
> 
> 标签：java, oracle, timestamp

我在 oracle 数据库中有以下 TIMESTAMP 值。

```
26-JUL-12 11.01.40.000000000 AM 
```

当我从表中获取此值时，它显示没有毫秒值，例如，

```
26-JUL-12 11.01.40 AM 
```

但是，我想像这种格式一样获得这个值，

```
26-JUL-12 11.01.40.000 AM 
```

有没有可能以这种格式获取时间戳值？

请帮我。

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-21T12:00:13.790

```
select to_char(systimestamp,'dd-mon-rrrr hh:mi:ss:ff3am') from dual; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T06:43:30.450

[这篇文章指出：](https://stackoverflow.com/questions/187474/oracle-date)

> Oracle DATE 将日期和时间存储到秒。Oracle TIMESTAMP 将日期和时间存储到最多 9 位亚秒级精度，具体取决于可用的硬件。
> 
> 两者都是通过以打包二进制格式存储日期和时间的各种组件来实现的。来自关于日期的 Oracle 概念指南部分
> 
> Oracle 使用自己的内部格式来存储日期。日期数据存储在每个七个字节的固定长度字段中，对应于世纪、年、月、日、小时、分钟和秒。
> 
> 您可以使用 DUMP() 函数来查看任何特定日期（或任何其他值）的内部表示，但这可能比您需要（或想要）知道的要多。

# java - 如何使用java复制mysql中的模式

> ID：11878034
> 
> 赞同：1
> 
> 时间：2012-08-09T06:39:56.030
> 
> 标签：java, mysql, jdbc

在我的应用程序中，我需要将模式及其表和存储过程从基本模式复制到新模式。

我正在寻找一种方法来实现这一点。我研究了使用 cmd 来严格执行 mysqldump，但这不是一个好的解决方案，因为我有一个客户端应用程序，这需要在客户端安装服务器。另一种选择是我自己使用显示查询植入。这里的问题是我不需要从头开始实现它，必须有问题的部分是我需要根据那里的外键安排表的顺序（因为如果表中有外键，表 i我指的是需要先创建）。

我还想过创建一个存储过程来执行此操作，但我的 SQL 中的存储过程无法访问磁盘。

也许有人知道如何以另一种方式实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:27:26.780

您可以尝试使用[Apache ddlutils](http://db.apache.org/ddlutils)。有一种方法可以将 ddls 从数据库导出到 xml 文件并重新导入。

[api 使用](http://db.apache.org/ddlutils/api-usage.html#Reading+the+model+from+a+live+database)页面有关于如何将模式导出到 xml 文件、从 xml 文件读取并将其应用到新数据库的示例。我已经在下面复制了这些功能以及关于如何使用它来完成您所要求的小片段。您可以以此为起点并进一步优化它。

```
DataSource sourceDb;
DataSource targetDb;

writeDatabaseToXML(readDatabase(sourceDb), "database-dump.xml");
changeDatabase(targetDb,readDatabaseFromXML("database-dump.xml"));

public Database readDatabase(DataSource dataSource)
{
   Platform platform = PlatformFactory.createNewPlatformInstance(dataSource);
   return platform.readModelFromDatabase("model");
}

public void writeDatabaseToXML(Database db, String fileName)
{
    new DatabaseIO().write(db, fileName);
}

public Database readDatabaseFromXML(String fileName)
{
    return new DatabaseIO().read(fileName);
}

public void changeDatabase(DataSource dataSource,
                           Database   targetModel)
{
    Platform platform = PlatformFactory.createNewPlatformInstance(dataSource);
    platform.createTables(targetModel, true, false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:48:13.007

您可以使用它`information_schema`来获取外键信息并构建依赖关系树。这是一个[例子](https://stackoverflow.com/questions/201621/how-do-i-see-all-foreign-keys-to-a-table-or-column)。

但是我认为您正在尝试解决以前已经解决过很多次的问题。我不熟悉 Java，但有一些 ORM 工具（至少对于 Python）可以检查您当前的数据库并在 Java（或 Python）中创建补充模型。然后您可以将该模型部署到另一个数据库中。

# postgresql - Postgresql 9.1 在将表创建为 .. 时内存不足

> ID：11878035
> 
> 赞同：1
> 
> 时间：2012-08-09T06:40:03.013
> 
> 标签：postgresql

我在 Ubuntu Linux 11 和 Postgresql 9.1 上。我在 dblink 上使用 CREATE TABLE .. SELECT，并且我得到了一个大约 200 万行的表

```
ERROR:  out of memory
DETAIL:  Failed on request of size 432. 
```

所以我从一个数据库中获取整个表的内容，并在另一个数据库中插入（或创建它们）（在同一台机器上）。我正在使用 Postgresql 的默认值，但是我也尝试了 pgtune 中的值，但无济于事。在插入过程中，我确实看到内存使用量上升，但是在达到我的机器限制之前发生了错误。ulimit -a 说

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 30865
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 30865
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

如果我确实在同一个数据库中创建表... select，那么它可以正常工作。有任何想法吗？

编辑：我尝试调整 postgresql.conf 中的各种内存设置，但没有帮助。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:05:21.540

我的猜测是，中间集仅被分配给内存，本身无法实现。您最好的选择是找到解决方法或与 dblink 人员一起解决此问题。一些潜在的解决方法是：

1.  使用 COPY 创建一个 csv 文件并将其插入到您的数据库中。

2.  将查询分块说，一次 100k 行。

为了清楚起见，我的猜测是 dblink 通过分配结果集、分配所需内存并将数据交给 Postgresql 来处理事情。当请求可能没有完全分配在 dblink 模块本身的内存中时，这可能会以一种允许快速代理（并通过网络连接传输）的方式完成。

但是，`INSERT ... SELECT`它可能首先将整个结果集分配到内存中，然后尝试对其进行处理并将其立即插入表中。

然而，如果没有详细审查代码，这是一种直觉（我确实打开了 dblink.c 并快速扫描了它）。您必须在这里记住，PostgreSQL 同时充当另一台服务器的数据库客户端和数据库服务器本身，因此 libpq 和后端的内存陷阱将结合在一起。

编辑：经过多一点审查，这看起来大部分是正确的。dblink 在内部使用游标。我的猜测是在插入之前从游标中获取所有内容，因此它可以立即进行。

# android - 开发您自己的 ePub 阅读器 Android 应用程序需要什么？

> ID：11878044
> 
> 赞同：1
> 
> 时间：2012-08-09T06:40:35.327
> 
> 标签：android, pdf, epub

为 android 开发 ePub 阅读器的先决条件是什么？开发的基础是什么，框架，库等。最好的方法是什么？

Mods：如果这不适合这里，那就给我指路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:03:45.757

您必须解析 epub 文件中的信息，然后对数据进行适当的表示。epub 非常接近 XML/HTML，所以也许你可以使用一些 xml/html 解析器。

还有一个 EpubParser 但我不知道它有多成熟：http: [//tika.apache.org/0.8/api/org/apache/tika/parser/epub/EpubParser.html](http://tika.apache.org/0.8/api/org/apache/tika/parser/epub/EpubParser.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:46:30.333

FBReader 完成所有这些（以及更多）并且是开源的（GPL）：[https ://github.com/geometer/FBReaderJ](https://github.com/geometer/FBReaderJ)

# regex - 摆脱链接中的正斜杠

> ID：11878061
> 
> 赞同：0
> 
> 时间：2012-08-09T06:42:26.127
> 
> 标签：regex, hyperlink

我正在解析远程站点。它们包含被替换为正确值的关键字。当我想解析链接时出现了我的问题，如下所示：

```
<a href="{_SOMEKEYWORD_}">somestupidtext</a> 
```

SOMEKEYWORD 包含一个 url（即[http://www.stackoverflow.com](http://www.stackoverflow.com)），但总会出现一个正斜杠，如下所示：

```
<a href="/{_SOMEKEYWORD_}">somestupidtext</a> 
```

这显然会破坏所有链接。我想到了一个正则表达式，但对更好的（？）解决方案非常开放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:47:54.143

如果斜线是您想要删除的唯一内容并且它总是在以下之后立即发生，您也可以通过简单的字符串替换来摆脱`href`：

C＃：

```
string url = "<a href=\"/{_SOMEKEYWORD_}\">somestupidtext</a>";
url = String.Replace("href=\"/", "href=\""); 
```

# gxt - GXT 自定义事件处理程序代码执行多次

> ID：11878062
> 
> 赞同：0
> 
> 时间：2012-08-09T06:42:32.647
> 
> 标签：gxt

我在我的 GXT 项目中实现了 MVP 模式。该系统将客户注册为其功能的一部分。系统用户也可以搜索提供 id 的注册用户。

我在“搜索客户”按钮中添加了一个 OnClick 事件。

```
/* On click search button */
        view.getBtnSearch().addListener(Events.OnClick, new Listener<BaseEvent>() {
            @Override
            public void handleEvent(BaseEvent be) {
                eventBus.fireEvent(new CustomerRegistrationTabSelectionEvent(0, false));
                eventBus.fireEvent(new CustomerFetchEvent(view.getValueCustSearchParameter(), view.getValueCustSearchValue(), true));
            }
        }); 
```

CustomerRegistrationTabSelectionEvent 会选择相关选项卡并启用其他选项卡。这就是它所做的一切。

这是自定义事件 CustomerFetchEvent 的处理程序。

```
eventBus.addHandler(CustomerFetchEvent.TYPE, new CustomerFetchEventHandler() {
            @Override
            public void fetchCustomer(CustomerFetchEvent event) {
                searchCustomer(event.getParameter(), event.getParameterValue(), event.isOpenFirstTab()); 
            }
        }); 
```

问题是多次执行搜索客户方法，如果搜索无效，错误消息对话框会显示多个弹出窗口。在 searchCustomer 方法中，我调用服务来获取客户数据或在搜索无效时显示弹出错误消息。

我使用 GXT 2.2.5 和 JRE 1.6。

谁能帮我找出为什么代码被多次执行？

稍后添加：当我第一次运行应用程序时，代码只执行一次，因此只有 1 个弹出窗口。然后我注销系统并再次登录（导航到存在“搜索客户”按钮的同一页面。）并且代码执行了两次。同样等于我创建/导航到特定页面的次数，代码执行。每次我重新创建页面时，它实际上是否添加了事件处理程序代码而不删除最后一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:29:27.480

是的，似乎“addHandler”多次添加处理程序，但存储了以前的上下文。您的代码应该只在初始化阶段添加一次处理程序。您可以使用“getHandlerCount”方法检查处理程序的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:30:48.447

是的。我修好了！这是解 [绑 GWT 中必需的演示者的解决方案](https://stackoverflow.com/questions/2626742/unbinding-presenters-necessary-in-gwt.)

你可以在这里阅读更多。[http://draconianoverlord.com/2010/11/23/gwt-handlers.html](http://draconianoverlord.com/2010/11/23/gwt-handlers.html)

实际发生的是，我向 HandlerManager 注册以接收事件的演示者对象没有被垃圾收集。因为尽管我删除了对演示者的引用，但 HandlerManager 仍然持有对这些对象的引用。所以每次我都在同一个班级的老演讲者之上不断地创造新的演讲者。所以一个事件被同一个类的多个对象监听。所以你需要通过删除 HandlerManager 中注册的处理程序来确保未使用的演示者被垃圾收集。

# javascript - Web 服务方法名称无效

> ID：11878064
> 
> 赞同：12
> 
> 时间：2012-08-09T06:42:41.913
> 
> 标签：javascript, asp.net, jquery

当我尝试从 javascript 调用 webmethod 时，出现以下错误“Web 服务方法名称无效”

> System.InvalidOperationException：SaveBOAT Web 服务方法名称无效。在 System.Web.Services.Protocols.HttpServerProtocol.Initialize() 在 System.Web.Services.Protocols.ServerProtocol.SetContext（类型类型，HttpContext 上下文，HttpRequest 请求，HttpResponse 响应）在 System.Web.Services.Protocols.ServerProtocolFactory。创建（类型类型、HttpContext 上下文、HttpRequest 请求、HttpResponse 响应、Boolean& abortProcessing）

**HTML 代码：**

```
<asp:LinkButton runat="server" ID="lnkAddBoat" OnClientClick="javascript:AddMyBoat(); return false;"></asp:LinkButton> 
```

**JS代码：**

```
function AddMyBoat() {
            var b = document.getElementById('HdnControlId').value;

            jQuery.ajax({
                type: "GET",
                url: "/AllService.asmx/SaveBOAT",
                data: { Pid: b },
                contentType: "application/text",
                dataType: "text",
                success: function(dd) {
                    alert('Success' + dd);
                },
                error: function(dd) {
                    alert('There is error' + dd.responseText);
                }
            });
} 
```

**C# 代码（AllService.asmx 文件中的 Web 方法）**

```
[WebMethod]
public static string SaveBOAT(int Pid)
{
    // My Code is here
    //I can put anythng here
    SessionManager.MemberID = Pid;
    return "";
} 
```

我尝试了在 Stack Overflow 和 ASP.NET 站点上找到的所有解决方案。但没有一个对我有用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T08:26:35.303

这是一个愚蠢的错误。

从方法声明中删除`Static`关键字。

```
[WebMethod]
public string SaveBOAT(string Pid)
{        
     SessionManager.MemberID = Pid;
     return "";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-25T07:50:45.547

在我的情况下，我复制了另一个 asmx 文件，但没有将类属性更改为 asmx 文件本身中新类的名称（右键单击 asmx 文件->查看标记）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-27T13:23:49.320

在我的情况下，错误是 Web 服务方法被声明为“私有”而不是“公共”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T07:15:44.703

尝试使用这个，我认为数据类型应该是 JSON

```
 jQuery.ajax({
            type: "POST",  // or GET
            url: "/AllService.asmx/SaveBOAT",
            data: { Pid: b },
            contentType: "application/json; charset=utf-8",
            dataType: "json"
            success: function(dd) {
                alert('Success' + dd);
            },
            error: function(dd) {
                alert('There is error' + dd.responseText);
            }
        }); 
```

并在 C# 代码中将 Pid 更改为字符串

```
 [WebMethod]
     public static string SaveBOAT(string Pid)
     {        
      SessionManager.MemberID = Pid;
      return "";
     } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-09T22:11:04.320

我也面临类似的问题。该解决方案包括检查与确保所有名称、参数正确传递相关的所有内容，因为许多人已做出响应。确保我们在 UI 页面中调用的 Web 方法名称拼写正确，数据、数据类型正确等等。就我而言，我在 ajax 调用中拼错了 Web 方法名称。一旦我找到并正确更正了名称，它就可以正常工作。
例如：在 .asmx 类文件中，这是方法名称“IsLeaseMentorExistWithTheSameName”，但是当我从 UI 调用时，我是这样调用的：

```
var varURL = <%=Page.ResolveUrl("~/Main/BuildCriteria.asmx") %> + '/IsLeaseMentorExistWithSameName'; 
```

请注意，缺少“The”一词。那是一个错误，我纠正了，所以效果很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-20T11:17:00.707

正如 Sundar Rajan 所说，检查参数是否正确。我的这个错误实例是因为我未能传递任何参数（作为 POST 请求中的主体）并且 asmx web 方法需要一个命名参数，因此绑定逻辑无法将请求与方法名称匹配，即使名称本身实际上是正确的。

```
[WebMethod]
        public object MyWebMethod(object parameter) 
```

如果请求正文中没有`parameter`，那么您将收到此错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T07:12:53.190

你添加了`ServiceReference`类吗？检查[一次](http://msdn.microsoft.com/en-us/library/system.web.ui.servicereference.aspx)。根据您的评论，我可以告诉您该怎么做

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-19T15:36:07.010

我遇到了这个问题，因为我的肥皂方法有一个`List<string>`参数。想不出办法让它与数组参数一起工作；所以只需将参数转换为`&`-delimited 字符串（例如`val1&val2&val3`）并将参数转换为服务方法中的数组。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-29T14:23:25.623

在我的例子中，WebService 接收参数之一被调用`aId`。当我从 javascript 调用它时，我发送了正确的 Id 值，但是发送的变量的名称被错误地调用了`bId`。所以我只需要重命名 WebService 调用，像以前一样保持正确的值，然后更改变量名。

# ruby-on-rails - ruby on rails 中的 after_update 回调

> ID：11878067
> 
> 赞同：2
> 
> 时间：2012-08-09T06:43:01.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, model

我正在尝试通过使用客户账单的属性来创建一个任务，下面给出的是

```
class Supplier < ActiveRecord::Base
has_many :tasks, :dependent => :destroy
 after_update :updating_daily_job_task

def updating_daily_job_task
  if self.amount.present? && self.date.present?
  Task.create(:name => self.supplier_id.to_s, :due => self.date)
end
end
end 
```

任务模型

```
class Task < ActiveRecord::Base
  attr_accessible :name, :due, :complete, :user_id, :supplier_bill_id
  belongs_to :supplier_bill, :foreign_key => "supplier_bill_id"

  validates_presence_of :name, :due
end 
```

我收到以下错误

> Rake::Task:Class 的未定义方法“create”

谁能告诉我我做错了什么？？？提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T06:47:53.857

您应该更改模型的类名`Task`。将其更改为`SupplierTask`或任何更相关的内容。任务在 Rails 内部的某个地方使用，这导致了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T06:48:41.283

我不是 100% 确定这一点，但看起来当您引用 Task 类时，您选择了错误的类（您从 Rake 模块中获得了一个）。您可以尝试更改任务模型的名称，看看是否消除了冲突

# javascript - Javascript版本的extract环绕方法

> ID：11878070
> 
> 赞同：2
> 
> 时间：2012-08-09T06:43:13.477
> 
> 标签：javascript, ruby, refactoring

我一直在阅读 Ruby Refactoring 书（Fields、Harvie、Fowler）。他们提到了提取环绕方法操作，如果您有中间部分彼此不同的方法，可以使用该操作来避免重复。

```
def number_of_descendants_named(name)
  count_descendants_matchin { |descendant| descendant.name == name }
end

def number_of_living_descendants
  count_descendants_matching { |descendant| descendant.alive? }
end

def count_descendants_mathing(&block)
  children.inject(0) do |count, child|
    count += 1 if yield child
    count + child.count_descendants_matching(&block)
  end
end 
```

我相信你明白了。你会如何用 Javascript 做类似的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T06:51:40.420

Javascript 也有闭包，所以非常简单，只需将块转换为匿名函数，代码几乎相同：

```
var number_of_descendants_named = function(name) {
  return count_descendants_matching(function(descendant) {
    return descendant.name == name;
  });
};

var number_of_living_descendants = function(descendant) {
  return count_descendants_matching(function(descendant) {
    return descendant.alive();
  });
};

var count_descendants_mathing = function(cb) {
  // reduce: use underscore or any other functional library
  return somelib.reduce(children, 0, function(count, child) {
    return count + (cb(child) ? 1 : 0) + child.count_descendants_matching(cb)
  });
}; 
```

这种一切都是要返回的表达式的函数式风格在纯 Javascript 中非常冗长，但一些 altJS 语言（例如 Coffeescript）简化了很多。

# facebook - 与脸书页面合并

> ID：11878071
> 
> 赞同：0
> 
> 时间：2012-08-09T06:43:28.823
> 
> 标签：facebook, facebook-like

我有一个 Facebook 幽灵页面。这意味着 - facebook 中除了我之外没有人可以看到的页面，它是在打开图元标记页面上单击“Like”后自动创建的。仅用于跟踪我的喜欢的人。

问题是——当用户访问这个幽灵页面的地址时——他们将被重定向到该网站。

但是，我希望它成为一个 Facebook 页面，人们可以在其中阅读有关 Facebook 网站的信息。

所以我打开了另一个 Facebook 页面。但是现在我在“网站”上点了赞，在“页面”上点了赞。对我来说听起来不太好。

我的问题是：我想将两者合并。1 页。目前ghost-page有更多的like。如果我将单击幽灵页面中“资源”下的“合并”。会发生什么？它会删除我的 Facebook 页面吗？每次有人试图访问这个 Facebook 页面时，它都会将他重定向到该网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:29:51.017

您能否将“幽灵页面”的地址更改为您在网站上控制的 URL，然后让该 URL 简单地将用户重定向到[http://facebook.com/](http://facebook.com/whatever)您希望他们最终到达的任何地址？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:49:47.267

合并工具将删除其中一个页面并将粉丝移动到另一页面。这意味着您可以将粉丝从一页移动到另一页。但是，删除页面中的所有帖子都将丢失。

# php - 如何在 symfony2 中使用 DQL 获得单个结果

> ID：11878075
> 
> 赞同：13
> 
> 时间：2012-08-09T06:43:33.867
> 
> 标签：php, symfony, doctrine

我想获得最后一个用户配置文件。但我无法在 DQL 中做到这一点。我有这个代码

```
$em = $this->getEntityManager();

$dql = "SELECT p  FROM AcmeBundle:UserProfile p 
        WHERE p.user_id = :user_id 
        ORDER BY p.createdAt DESC ";

$allProfiles = $em->createQuery($dql)
                  ->setParameter('user_id', $user_id)
                  ->setMaxResults(5)
                  ->getResult();

return $allProfiles; 
```

它返回所有配置文件。

如果我使用 getSingleResult() 那么它说结果不是唯一的

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-08-19T13:32:48.473

正确的方法是：

```
$singleProfile = $em->createQuery($dql)
                    ->setParameter('user_id',$user_id)
                    ->getSingleResult(); 
```

为防止出现错误，然后没有结果，请尝试以下操作：

```
$singleProfile = $em->createQuery($dql)
                    ->setParameter('user_id',$user_id)
                    ->getOneOrNullResult(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-09T08:13:13.520

```
 $allProfiles = $em->createQuery($dql)
                                ->setParameter('user_id',$user_id)
                                ->setMaxResults(1)
                                ->getResult();
                return $allProfiles[0]; 
```

# html - css 反映问题 - 反映图像的错误部分

> ID：11878076
> 
> 赞同：0
> 
> 时间：2012-08-09T06:43:36.767
> 
> 标签：html, css, reflection, image

我有一张图片，我想在 Chrome 中使用 CSS 将其反映在图片底部下方。图像在 div 内，我限制了图像的最大高度和最大宽度。

反射图像显示图像的顶部而不是图像的底部。

这是一个工作示例的链接：[go](http://jsfiddle.net/TYfh9/)

这是代码：

```
<!DOCTYPE HTML>
<html>
 <head>
  <style>
    img{   
      -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(50%, transparent), to(rgba(255,255,255,0.2)));
      max-height:315px;max-width: 220px;
    }
    div{overflow:hidden;height:275px;border:1px solid green}</style>
 </head>

 <body>
  <div>
     <img src="http://www.oracledigital.com.au/wp-content/uploads/2012/05/google-penguin-update.png" />
  </div>
  </body>
</html> 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:01:49.310

`<div>`反射图像去向的约束。以`height`像素为单位，`overflow:hidden`它无处可去，因此反射图像向上移动以适应。`<div>`暂时删除 HTML 标记以了解我的意思。（或删除`overflow:hidden`）。

这是你想要的更多吗？

[http://jsfiddle.net/8a8NU/](http://jsfiddle.net/8a8NU/)

我只是将其删除`overflow:hidden`并更改`color-stop`为 80%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:37:54.193

您必须减小图像的大小。

[看演示](http://codebins.com/bin/4ldqp8o/1/image%20reflection%20in%20chrome)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:21:31.253

[http://jsfiddle.net/TYfh9/3/](http://jsfiddle.net/TYfh9/3/)

[演示](http://jsfiddle.net/TYfh9/3/)

```
<div> 
  <img src="http://www.oracledigital.com.au/wp-content/uploads/2012/05/google-penguin-update.png" class="reflectBelow" />
</div>​ 
```

**CSS**

```
.reflectBelow  { 
  -webkit-box-reflect: below 0
    -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(0.5, transparent), to(white)); 
} 
```

# ssrs-2008 - 当数据集没有返回记录时显示空表

> ID：11878081
> 
> 赞同：2
> 
> 时间：2012-08-09T06:44:08.857
> 
> 标签：ssrs-2008

我有一个包含表的子报表 x，当该表的数据集没有返回任何记录时，子报表 x 消失，我需要在主报表中显示该表的架构和空记录

提前致谢

# java - Java中的点运算符和静态关键字

> ID：11878084
> 
> 赞同：0
> 
> 时间：2012-08-09T06:44:20.793
> 
> 标签：java, arraylist, static, operator-keyword

各位程序员好。我对在 Java 中使用此示例的静态和点运算符有疑问。

所以我在我的 Inventory 类中有一个 ArrayList 的类变量声明。

```
static List<Multimedia> list = new ArrayList<Multimedia>(); 
```

如果我选择在方法中使用ArrayList的add方法，我应该这样写方法调用：`Inventory.list.add(Object o)`还是应该使用`list.add(Object o)`. 他们的意思是一样的吗？如果不是，我应该使用哪个方法调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T06:46:34.670

从课堂上两者都是一样的，

采用

```
Inventory.list.add(Object o ) 
```

它会不断告诉你它是代码中的静态字段

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T06:51:20.887

您无法访问`list`其他包中的，因此最好创建私有*列表*并通过公共*包装*方法公开它。

```
private static List<Multimedia> list = new ArrayList<Multimedia>();

public static void addMultimedia(Multimedia media){
   list.add(media);
}
public static List<Multimedia> getList(){
  return list;
} 
```

添加`Multimedia`对象：

```
Inventory.addMultimedia(new Multimedia());
//or
Inventory.getList().add(new Multimedia()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T06:47:48.660

在类外，您必须通过类名访问它（但这取决于访问修饰符，即**私有**不能在类外访问），在类内您可以使用它们中的任何一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T06:49:53.413

您绝对应该使用`Inventory.list.add(Object o )`静态字段，因为静态字段在类级别，即在该类的对象之间共享。

# css - Firefox 无法识别字体

> ID：11878088
> 
> 赞同：12
> 
> 时间：2012-08-09T06:45:05.060
> 
> 标签：css, firefox, fonts, font-face, font-family

我`pre`通过 CSS 设置 HTML 元素的样式，如下所示：

```
pre {
    font-family : "Franklin Gothic Medium","Arial Narrow Bold","Arial",sans-serif;
} 
```

它适用于 Chrome/Chromium、Opera、Safari 和 IE（意味着该字体确实安装在计算机中），但不适用于 Firefox。Firefox 只识别`Arial`.

而且我尝试过使用其他自定义字体（如`Century Gothic`）并且它可以工作，因此它能够识别自定义字体。

底线，Firefox 没有识别`Franklin Gothic Medium`，`Arial Narrow Bold`即使

*   它们安装在计算机中
*   它能够识别其他自定义字体

这里可能发生了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-29T18:22:27.563

解决方案并不简单。字体外观因浏览器、操作系统以及客户端系统上可用的字体而异。在没有根据您的目标受众进行进一步测试的情况下，不要从表面上看这个答案。

在 Windows 上，从 Firefox 4 和 IE9 开始，字体是使用 DirectWrite 而不是 GDI 呈现的。自此更改以来，“Arial Narrow”和“Arial Black”等字体被视为 Arial 系列的一部分，而不是独立的系列。因此，在 Firefox 中，您可以通过带有一些修饰符的常规 Arial 声明来访问 Arial Narrow。IE9 以类似的方式工作，但似乎嵌入了一些实用的技巧，使其以开发人员习惯的方式工作。

## 富兰克林哥特式中号

```
font-family: "Franklin Gothic Medium", "Franklin Gothic", sans-serif; 
```

除 Firefox 之外的所有浏览器都理解“Franklin Gothic Medium”。Firefox 没有并继续选择下一个选项“Franklin Gothic”，您可能甚至认为自己没有，但这就是“Franklin Gothic Medium”在 DirectWrite 世界中的存在。*在没有任何其他修饰符*（斜体、粗体、拉伸）的情况下，当指定“Franklin Gothic”时，我的 Firefox 会抓取“Franklin Gothic Medium”。

## Arial 窄粗体

```
font-family: "Arial Narrow Bold", "Arial Narrow", "Arial", sans-serif;
font-stretch: condensed;
font-weight: 700; 
```

某些浏览器，如 Chrome 和 IE7-8 识别“Arial Narrow Bold”。但是 IE9 和 Firefox 没有。IE9 确实识别“Arial Narrow”。Firefox 落入 Arial。*据我所知*`font-stretch: condensed`，告诉 Firefox 使用 Arial 的“Arial Narrow”版本，并`font-weight: 700;`告诉 IE9 和 Firefox 使用“Arial Narrow Bold”版本。600、700、800 和 900 的字体粗细对我来说触发了粗体。

 *## 带有 Arial Narrow Bold 后备的 Franklin Gothic Medium

现在你有一个 Catch-22。

```
font-family: "Franklin Gothic Medium", "Franklin Gothic", "Arial Narrow Bold", "Arial Narrow", "Arial", sans-serif; 
```

如果 Firefox 可以找到“Franklin Gothic”，那你很好，但如果它不能，那么它将回退到“Arial”。如果你用它`font-stretch: condensed; font-weight: 700;`来把它变成“Arial Narrow Bold”，你会在不使用 Arial 后备时影响富兰克林的外观。如果富兰克林可用，每个浏览器都会将`font-weight`规则应用于富兰克林——这根本不是你想要的。如果您使用`font-stretch: condensed`并且 Firefox 可以访问 Franklin，它会尽职尽责地压缩它。（我在任何其他浏览器中都没有看到。）在您的特定情况下，我会指望 Firefox 获得 Franklin 并接受将常规 Arial 用作后备。但是添加“Franklin Gothic”（对于 FF）和“Arial Narrow”（对于 IE9）会有很大帮助。

（在撰写本文时，Chrome 版本为 21，Firefox 版本为 14。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T06:52:20.157

如果找不到解决方案，请走 CSS3 字体路线。[http://www.w3schools.com/css/css3_fonts.asp](http://www.w3schools.com/css/css3_fonts.asp)*

# jquery - 切换类并隐藏 div

> ID：11878090
> 
> 赞同：0
> 
> 时间：2012-08-09T06:45:35.160
> 
> 标签：jquery, show-hide, addclass

我有一个联系表格，我正在尝试显示/隐藏 div 和一个“打开”到单击的选项卡的类。这是非常基本的，用户将点击“业务请求”或“有问题？”。

首次查看联系表单时，默认情况下“业务请求”显示为“打开”。单击“有问题”将隐藏页面中的一些 div。

```
<div class="contact_tab_container">
<div class="contact_tab business_request open">
  <p>Business request</p>
  <span>
  <p>Let’s work together!</p>
  </span> </div>
<div class="contact_tab have_a_question">
  <p>Have a question?</p>
  <span>
  <p>Ask us anything or just say Hi</p>
  </span> </div> 
```

我想在单击任何一个时添加“打开”类，并在单击“have_a_question”div 时隐藏以下 div：.contact_additional、.contact_budget、.attach_files

当单击“business_request” div 时，这些 div 会再次显示。

关于如何做到这一点的任何想法？

```
$(window).load(function() {
$('.have_a_question').toggle(function() {
$(this).addClass('open');
$('.business_request').removeClass('open');
return false;
},
function() {
$('.have_a_question').toggle(function() {
$(this).addClass('open');
$('.business_request').removeClass('open');
return false;
});
}); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T06:58:41.537

我认为[这](http://jsfiddle.net/arunpjohny/ChvER/)将解决您的问题。

```
$('.contact_tab_container').on('click', '.contact_tab', function(e){
    var target = $(e.currentTarget).addClass('open');
    target.siblings('.contact_tab').removeClass('open');

    if(target.is('.business_request ')){
        $('.contact_additional').show();
        $('.contact_budget').show();
        $('.attach_files').show();
    }else{
        $('.contact_additional').hide();
        $('.contact_budget').hide();
        $('.attach_files').hide();
    }
}); 
```

# c++ - 使用 boost::deadline_timer 的延迟操作

> ID：11878091
> 
> 赞同：2
> 
> 时间：2012-08-09T06:45:37.477
> 
> 标签：c++, boost, timer, boost-asio

我想在最后一个异步事件发生后延迟 n 秒后执行一次特定操作。因此，如果连续事件出现在少于 n 秒的时间内，特定的动作就会被延迟（deadline_timer 重新启动）。

[我从boost deadline_timer 问题](https://stackoverflow.com/questions/11700566/boost-deadline-timer-issue)改编了计时器类，为简单起见，事件是同步生成的。运行代码，我期待类似的东西：

```
1 second(s)
2 second(s)
3 second(s)
4 second(s)
5 second(s)
action       <--- it should appear after 10 seconds after the last event 
```

但我明白了

```
1 second(s)
2 second(s)
action
3 second(s)
action
4 second(s)
action
5 second(s)
action
action 
```

为什么会这样？如何解决这个问题？

```
#include <boost/asio.hpp>
#include <boost/thread.hpp>
#include <iostream>

class DelayedAction
{
public:
    DelayedAction():        
        work( service),
        thread( boost::bind( &DelayedAction::run, this)),
        timer( service)
    {}

    ~DelayedAction()
    {
        thread.join();
    }

    void startAfter( const size_t delay)
    {
        timer.cancel();
        timer.expires_from_now( boost::posix_time::seconds( delay));
        timer.async_wait( boost::bind( &DelayedAction::action, this));
    }

private:
    void run()
    {
        service.run();
    }

    void action() 
    {
        std::cout << "action" << std::endl;
    }

    boost::asio::io_service         service;
    boost::asio::io_service::work   work;
    boost::thread                   thread;
    boost::asio::deadline_timer     timer;
};

int main()
{
    DelayedAction d;
    for( int i = 1; i < 6; ++i)
    {
        Sleep( 1000);
        std::cout << i << " second(s)\n";
        d.startAfter( 10);
    }
} 
```

PS 写这篇文章，我认为真正的问题是 boost::deadline_timer 启动后如何重新启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:44:58.787

当您调用`expires_from_now()`它时，它会重置计时器，并立即使用错误代码调用处理程序`boost::asio::error::operation_aborted`。

如果您在处理程序中处理错误代码情况，那么您可以按预期工作。

```
void startAfter( const size_t delay)
{
    // no need to explicitly cancel
    // timer.cancel();
    timer.expires_from_now( boost::posix_time::seconds( delay));
    timer.async_wait( boost::bind( &DelayedAction::action, this, boost::asio::placeholders::error));
}

// ...

void action(const boost::system::error_code& e) 
{
    if(e != boost::asio::error::operation_aborted)
        std::cout << "action" << std::endl;
} 
```

这在文档中进行了讨论：http: [//www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/reference/deadline_timer.html](http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/reference/deadline_timer.html)

具体参见标题为：更改活动截止日期计时器的到期时间的部分

# javascript - 跟踪 Jquery 和 CSS 标识符的最佳方法是什么？

> ID：11878092
> 
> 赞同：5
> 
> 时间：2012-08-09T06:45:50.580
> 
> 标签：javascript, jquery

这更多是关于 Jquery 的组织问题。

使用以下简单示例：

```
<a href="#" class="click">click me</a>

<script>
$(document).ready(function(){
    $('.click').on('click',function(){
          alert('Clicked!');
    });
});
</script> 
```

现在在你的网站上乘以 1000，它很快就会变得混乱。您还可以忘记您为 Jquery 或您的 CSS 分配了哪些类。我通常尽量避免将两者混合，所以我为 CSS 添加我的类，为 Jquery 添加其他类，以防我更改布局或在其他地方使用该部分，......我可以更改 CSS。但是你怎么记得哪一个是用于 CSS 或 Jquery 的呢？您是否将您的课程命名为“JSclassName”或类似的名称？

如果我不清楚，请告诉我，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:02:01.590

*   在大小写和含义方面为您的“部分”提供一致的命名方案
*   保持 CSS 和 JS 的 id 和类名相同以避免混淆。
*   关于语义代码，您也应该为类/id 名称赋予含义。这可以帮助您记住要添加代码的目的。不要使用“ `centeredContainer`”或“ `thisIsClickable`”之类的东西。

例子：

```
<section class="weatherWidget">
    <ul class="forecast">
        <li class="vicinity">
           ...
    <ul class="news">
        <li class="region">
           ... 
```

我还命名了我的 CSS 和 JS 以避免冲突。以下代码确保代码仅引用天气小部件内容：

```
//this click event is only for weatherWidget vicinity
$('.weatherWidget .vicinity').on('click',function{...});

//this CSS is only for weatherWidget regions
.weatherWidget .region{...} 
```

此外，虽然我并不真正使用它们，也不赞同使用它们，但 LESS 和 SASS 框架也可以通过使用变量来帮助避免冗余 CSS 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:04:00.480

首先，给你的标识符起更有意义的名字。在我看来，`click`不是一个理想的。按钮是可点击的，锚点也是可点击的，甚至是`div`元素也是如此。

其次，如果您确实有数百个标识符，请尝试使用*命名空间*来区分 CSS/JavaScript 标识符。但我认为这不是必需的，在你的 JavaScript 中使用 CSS 标识符是很自然的，一个有意义的名字放在第一位。

```
<style>
    .ui-cart-button{ };
</style>
<a href="#" class="js-add-to-cart ui-cart-button">Buy</a> 
```

命名空间是让你的代码更干净、更易读的好方法，我建议你看看 jQueryUI 的源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T07:42:17.717

这是我的建议；

*   始终使用唯一 ID。ID 应该是唯一的，只给特定的元素或选择器，而类可以给多个选择器。
*   无需为 JavaScript 和 CSS 使用相同的类，因为可以将多个类分配给一个选择器，例如`<div class="class1 class2">`
*   对出现在多个页面中的常见项目使用样式表附件，以限制嵌入式和内联样式。

下面的链接将为您提供一些指导。

**[给初学者的 30 个 CSS 最佳实践](http://net.tutsplus.com/tutorials/html-css-techniques/30-css-best-practices-for-beginners/)**
**[15 个让你的生活更轻松的](http://www.onextrapixel.com/2012/06/05/15-best-css-practices-to-make-your-life-easier/)**
**[最佳 CSS 实践 10 个改进你的代码的最佳 CSS 实践](http://www.webdesignerdepot.com/2009/05/10-best-css-practices-to-improve-your-code/)**

以上给出的所有信息都是为​​了让您了解使用 CSS。从所有这些信息中，您可以制定出最适合您需求的最佳选择。

# c - 字节寻址存储器和字寻址

> ID：11878093
> 
> 赞同：1
> 
> 时间：2012-08-09T06:45:55.467
> 
> 标签：c, memory

字寻址存储器和字节寻址存储器是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:26:40.810

这通常用于底层硬件的上下文中。现在大多数系统都有字节寻址存储器。也就是说，内存中的每个字节都可以单独寻址和获取。

一些系统具有字寻址存储器，并且指针寄存器包含各个字的地址。此外，每当提取内存时，都会提取整个单词。如果您需要特定字节，编译器将获取一个字，然后安排从中获取所需的字节。

请注意，在这样的系统上，在指针上使用 reinterpret_cast 是非常危险的，因为实现可能（为了提高效率）将指向字对齐事物的指针保留为字指针，并将指向字节对齐事物的指针保留为字节指针。所以如果你的记忆看起来有点像这样：

```
 word X  : aa ab ac ed
 word X+1: ba bb bc bd 
```

指向字 X 的指针将包含 X，但指向 aa 的字节指针将包含 X*4

`reinterpret_cast<word *>(&aa)`会给你一个 X*4 的字指针，这将是令人尴尬的错误。

在字节寻址的机器上，字指针和字节指针都将包含 X*4，因此在两者之间 reinterpret_cast 是“安全的”（即未定义的行为和令人困惑的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:26:50.037

同意汤姆...在字访问内存中，当访问内存时，您可以拥有整个 4 个字节（如在 AHB 总线中）对于这种类型的内存，如果您尝试访问字节，您将得到未定义的行为

# php - 当 SEF ON 时，高清 FLV 播放器工具栏显示未定义

> ID：11878095
> 
> 赞同：0
> 
> 时间：2012-08-09T06:45:57.447
> 
> 标签：php, joomla1.5, flash

我在我的 joomla 1.5 站点上的 hdflv 播放器出现问题。我搜索了很多关于这个问题的东西，但没有人仍然面临我现在面临的这种情况。我正在使用 hd flv 播放器的组件它工作正常并运行所有视频，但每当我打开 SEF（搜索引擎友好）组件时，它的控制工具显示未定义。在播放器视图中，我发现了以下代码：

```
$app = JFactory::getApplication();
$router = $app->getRouter();
$sefURL = $router->getMode();
if ($sefURL == 1) {
    $language = JRequest::getVar('lang');
    if ($language != '') {
        $languages = '&slang=' . JRequest::getVar('lang');
    }
} 
```

在上面的代码中，getApplication() 方法从需要在播放器工具上显示的语言 xml 文件中获取所有参数，如（播放、暂停、缩放等），而 getRouter() 方法发现 SEF 是否打开。如果打开然后我在这段代码中找到的条件是：

```
 playlistid = document.getElementById("playlistid").value;
                            if(playlistid != 'select') if(itemid !='0')
                            {
<?php if ($sefURL == 1) { ?>
                                            window.open(baseURL+'/index.php?option=com_hdflvplayer&Itemid='+itemid+'&compid='+playlistid,'_self',false);
<?php
} else {
?>
                                        window.open('index.php?option=com_hdflvplayer&Itemid='+itemid+'&compid='+playlistid+'<?php echo $language; ?>','_self',false);
<?php } ?>

                            }
                            else
                            {

<?php if ($sefURL == 1) { ?>
                                        window.open(baseURL+"/index.php?option=com_hdflvplayer&compid="+playlistid+"",'_self');
<?php
} else {
?>
                                    window.open("index.php?option=com_hdflvplayer&compid="+playlistid+'<?php echo $language; ?>','_self');
<?php } ?>

                        }
                    } 
```

因此，当 $sefURl==1 比此条件不适用于显示工具名称时，我知道工具名称来自 $languages 并且当我在上述条件（$sef==1）中使用它时，它仍然不起作用并且不也给播放列表。

我也在 hd flv 播放器论坛上发布了我的这个问题，但还没有得到任何回复，我在这个论坛上发现了类似的问题，但我的问题有点不同。请看一下，问我是否有任何困惑。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:41:30.317

这是 Hd flv Player 的问题，现在从他们的最新更新中得到解决。

# ios - 放置在同一位置的表格视图单元格中的 UILabel 和 UITextView 重复？

> ID：11878097
> 
> 赞同：0
> 
> 时间：2012-08-09T06:46:13.917
> 
> 标签：ios, uitableview

我有一种情况，我已将其放置在同一位置`UILabel`的`UITextView`表格视图单元格中，它将交替放置。问题是当我滚动表格视图时，标签和文本视图不匹配（重叠）。下面是`cellForRowAtIndexPath`代码。

```
static NSString *CellIdentifier = @"CellIdentifier";
    // Dequeue or create a cell of the appropriate type.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        //cell.accessoryView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"arrow.png"]];
        tableView.separatorColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"line_left_table.png"]];

        availableTtimeSlotLbl=[[UILabel alloc] initWithFrame:CGRectMake(10,10,200,40)];
        availableTtimeSlotLbl.backgroundColor=[UIColor clearColor];
        availableTtimeSlotLbl.textColor=[UIColor colorWithRed:17/255.0 green:61/255.0 blue:83/255.0 alpha:1];
        availableTtimeSlotLbl.font=[UIFont boldSystemFontOfSize:18];
        availableTtimeSlotLbl.tag=1;
        [cell.contentView addSubview:availableTtimeSlotLbl];

        durationLbl=[[UILabel alloc] initWithFrame:CGRectMake(230,10, 250,45)];
        durationLbl.backgroundColor=[UIColor clearColor];
        durationLbl.textColor=[UIColor colorWithRed:17/255.0 green:61/255.0 blue:83/255.0 alpha:1];
        durationLbl.tag=2;
        durationLbl.font=[UIFont systemFontOfSize:18];
        [cell.contentView addSubview:durationLbl];

        statusLbl=[[UILabel alloc] initWithFrame:CGRectMake(500,10,250,40)];
        statusLbl.backgroundColor=[UIColor clearColor];
        statusLbl.textColor=[UIColor colorWithRed:17/255.0 green:61/255.0 blue:83/255.0 alpha:1];
        statusLbl.tag=3;
        statusLbl.font=[UIFont boldSystemFontOfSize:18];
        [cell.contentView addSubview:statusLbl];

        statusTxtVw=[[UITextView alloc] initWithFrame:CGRectMake(500,10,250,40)];
        statusTxtVw.backgroundColor=[UIColor clearColor];
        statusTxtVw.textColor=[UIColor colorWithRed:17/255.0 green:61/255.0 blue:83/255.0 alpha:1];
        statusTxtVw.tag=4;
        statusTxtVw.font=[UIFont boldSystemFontOfSize:18];
        [cell.contentView addSubview:statusTxtVw];

        }

    UILabel *slot=(UILabel *)[cell.contentView viewWithTag:1];
    NSString *slotStr= [[scheduleAppointmentAry objectAtIndex:indexPath.row]valueForKey:@"SlotTime"];
    slot.text=slotStr; 

    UILabel *duration=(UILabel *)[cell.contentView viewWithTag:2];
    NSString *durationStr= [[scheduleAppointmentAry objectAtIndex:indexPath.row]valueForKey:@"Station"];
    duration.text=durationStr;

    NSString *statusStr= [[scheduleAppointmentAry objectAtIndex:indexPath.row]valueForKey:@"Status"];
    UILabel *status=(UILabel *)[cell.contentView viewWithTag:3];
    UITextView *statusTxtView = (UITextView *) [cell.contentView viewWithTag:4];

    if ([statusStr isEqualToString:@"Schedule"]) {

        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        cell.selectionStyle = UITableViewCellSelectionStyleGray;
        statusTxtView.text = statusStr;

    }
    else if([statusStr isEqualToString:@"Unavailable"]) {
        cell.accessoryType = UITableViewCellAccessoryNone;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        status.text=statusStr;
    }

    return cell; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:11:15.640

行的内容正在重复，因为单元格正在被重复使用。您需要适当地重置它们。

```
if ([statusStr isEqualToString:@"Schedule"]) {

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    cell.selectionStyle = UITableViewCellSelectionStyleGray;
    statusTxtView.text = statusStr;
    // ADDED: Reset status label
    status.text = nil;
}
else if([statusStr isEqualToString:@"Unavailable"]) {

    cell.accessoryType = UITableViewCellAccessoryNone;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    status.text=statusStr;
    // ADDED: Reset status text view
    statusTxtView.text = nil;
} 
```

# objective-c - 按钮突然响应外部修饰，而不是内部修饰

> ID：11878098
> 
> 赞同：0
> 
> 时间：2012-08-09T06:46:17.277
> 
> 标签：objective-c, ios, xcode, interface-builder

我的 iPhone 应用程序突然改变了行为，我不知道为什么。我有一个小按钮，它现在只在外部修饰而不是内部修饰时触发。我不知道我所做的任何更改可能会导致此问题。

从下图中可以看出，它已正确连接到 onAdd 选择器内部的修饰。

![在此处输入图像描述](../Images/1ed377f24dd103d8601413cc5026149b.png)

关于什么可能导致这种行为的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:03:02.857

在此视图中检查 GestureRecognizers 和其他 IBAction。尝试将事件与 touchUpOutside 链接并检查它是否工作正常，然后恢复到内部并检查行为。使用 NSLog in 方法查看点击时触发的内容。没有示例代码，我不能说更多。

# php - jQuery ajax 返回 null

> ID：11878101
> 
> 赞同：1
> 
> 时间：2012-08-09T06:46:38.443
> 
> 标签：php, javascript, ajax, jquery

我正在使用 Jquery 函数，

```
function ajax_fun(id,val)
{
$.ajax({
    type: "GET",
    url: "data.php",
    dataType: "json",
    data: { pid: 1, cart_id: id, val: val },
    success: function (returndata){
       console.log(returndata);
    }  
});
} 
```

**称呼**

```
ajax_fun(1,100); 
```

**数据.php**

```
<?php
if(isset($_GET['pid']) && $_GET['pid']==1)
{

  $cart_id = $_GET['cart_id'];
  $val  = $_GET['val']+0.06;
  $arr = array('cart_id'=> $cart_id, 'total' => $val);
  json_encode($arr);
}
?> 
```

控制台返回**'null'**。它没有返回 cart_id 和 total。

任何人都可以帮忙吗？

.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T06:48:14.750

```
json_encode($arr); 
```

应该是

```
echo json_encode($arr); 
```

你忘记`echo`了结果。

***完整代码：***

```
<?php
if(isset($_GET['pid']) && $_GET['pid']==1) {
  $cart_id = $_GET['cart_id'];
  $val  = $_GET['val']+0.06;
  $arr = array('cart_id'=> $cart_id, 'total' => $val);
  echo json_encode($arr); // write echo before json_encode($arr)
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T06:49:59.940

将此行重写为...

```
echo json_encode($arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T06:50:56.733

您需要在返回数据的 json_encode 之前添加“echo”

```
<?php
if(isset($_GET['pid']) && $_GET['pid']==1)
{

  $cart_id = $_GET['cart_id'];
  $val  = $_GET['val']+0.06;
  $arr = array('cart_id'=> $cart_id, 'total' => $val);
  echo json_encode($arr);
}
?> 
```

# c# - 我将哪个参数传递给 CGimage 的高度 n 宽度

> ID：11878102
> 
> 赞同：0
> 
> 时间：2012-08-09T06:46:38.560
> 
> 标签：c#, ios, ipad, xamarin.ios, monodevelop

我有一个关于 UIImageView 和 UIImage 的问题我对一件事感到困惑，即我的**“UIImageView 高度 = 759 和宽度 = 748”**，我正在从服务器下载高度和宽度如此之大的图像，例如**“图像高度 = 2048 和宽度 = 2500"**

所以我在 UIImageView 上渲染图像时有点困惑，我将参数传递给 CGImage

我将参数传递给 CGImage 如下

```
CGImage _bitmap = new CGImage (2048 , 2500 , 8 , 32 , 2048 * 4 , _colorSpace , CGBitmapFlag.ByteOrderDefault , null, true , CGColorRenderingIntent.Default); 
```

我在 CGImage() 中传递的参数类型意味着我将 Image 参数或 UIImageView 参数传递给 CGImage 以便我的 Image 将正确呈现到 UIImaeView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:21:20.630

我认为您根本不应该打扰使用`CGImage`（除非您特别有内存问题）。

只需这样做：

```
UIImage yourImage;
//Download from your server here (I can fill it in if needed)
UIImageView imageView = new UIImageView(new Frame(0, 0, 748, 759)); //This can also be setup in a XIB file
imageView.ContentMode = UIViewContentMode.ScaleAspectFit;
imageView.Image = yourImage; 
```

使用内容模式设置来获得您所需要的。

[这](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html)是内容模式的链接。

# javascript - 输入类型月份的设置值

> ID：11878105
> 
> 赞同：1
> 
> 时间：2012-08-09T06:47:02.533
> 
> 标签：javascript, jquery, html

我正在处理信用卡刷卡并检索数据并将其显示在我的输入字段中。我其实有三个。卡上的卡号、有效期和姓名。

我可以使用这个来显示卡号和姓名的数据

```
$("#cardnumber").val( result.cardnumber );
$("#name").val( result.name ); 
```

我的问题是我将如何在类型设置为月份的输入字段上执行此操作？

我试过了，但不起作用`$("#expdate").val( result.date )`到期日期的数据格式为`YY/MM or 12/08`

**更新：**

抱歉，我收到的日期的数据是这种格式 1208 而不是 12/08

HTML

```
<input type="month" id="expDate" value="" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:51:37.760

从你的帖子看来

```
$("#expdate") 
```

应该

```
$("#expDate") 
```

它是一个错字。

### 根据编辑

*如果您的日期始终采用格式，`ddmm`则以下内容将起作用：*

```
var x = result.date;
$("#expDate").val( x.substr(0,2) + '/' + x.substr(2) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:51:29.143

在年/月分隔符上拆分它并仅使用操作的第二部分。

```
$("#expDate").val( result.date.split('/')[1] ) 
```

鉴于您的编辑，您可能希望使用`substring`跳过前两个字符：

```
$("#expDate").val( result.date.substring(2) ) 
```

# objective-c - 永久保存 CoreData

> ID：11878107
> 
> 赞同：0
> 
> 时间：2012-08-09T06:47:02.930
> 
> 标签：objective-c, ios, xcode

我整个下午都在努力让我的应用程序的 CoreData 部分正常工作，并且几乎让它正常工作。问题是当应用程序终止（从多任务菜单中删除）时，CoreData 没有保存适当的值。剩下的值是我放入实体的初始值（在我的例子中为 0，定义为 NSString），而不是用户输入的新值。所以问题是在应用程序关闭后永久保存新值，并且在加载应用程序时不再显示初始值

实体名称：`Gameinfo`

属性：`score`

我不确定我做错了什么。如果有人可以帮助我，将不胜感激。谢谢！

```
-(IBAction)saveTheory1
{
AppDelegate *appDelegate= [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *context = 
[appDelegate managedObjectContext];
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Gameinfo"];
NSError *error = nil;
NSArray *someArray = [context executeFetchRequest:request error:&error];   
[[someArray objectAtIndex:0] setValue:[self showKey] forKey:@"score"]; // showKey gets the text from UITextField
}

-(IBAction)showTheory1;

{
AppDelegate *appDelegate= [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *context = 
[appDelegate managedObjectContext];
NSEntityDescription *entityDesc = 
[NSEntityDescription entityForName:@"Gameinfo" 
            inManagedObjectContext:context];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDesc];
NSManagedObject *matches = nil;
NSError *error;
NSArray *objects = [context executeFetchRequest:request 
                                          error:&error];
matches = [objects objectAtIndex:0];
NSLog (@"show us the current value: %@", [matches valueForKey:@"score"]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T06:53:17.927

您根本没有节省价值。您只是将其分配给`Gameinfo`对象。要实际保存它，请`save:`在托管对象上下文中调用方法：

```
 ...
    [[someArray objectAtIndex:0] setValue:[self showKey] forKey:@"score"];
    NSError *saveError = nil;
    [[appDelegate managedObjectContext] save:&saveError];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:55:17.573

看起来你没有在`[context save:error]`任何地方打电话。这就是将您的更改转移到永久存储中的原因。

# algorithm - 在计算分数时消除偏差

> ID：11878108
> 
> 赞同：0
> 
> 时间：2012-08-09T06:47:04.740
> 
> 标签：algorithm

我有一个相对简单的算法问题，我向用户推荐问题

1.  我有一组带有答案的问题（例如，每个答案的评论）
2.  我想打分每个问题的吸引力。

当前实施：

```
(total comments + likes for all answers for a question) / sqrt (number of answers) 
```

问题：

1.  有时，一个有大量活动的答案会扭曲问题的分数，即使其他 20 个答案产生的兴趣很小
2.  对于答案很少的问题，应该进行一些缩减。

希望对这两个问题的任何建议都可以否定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:18:05.223

通常，当我们想避免让一个样本过于强大时，标准的方法是通过以下方法之一：

1.  使用`log(N)`代替`N`，使每个观察的效果不那么强大¹
2.  留下“奇怪”的观察结果：只取中间的 X%，并使用它们，例如：只取这个问题的最大值的 1/4 - 3/4 喜欢的观察结果，并留下倾斜的例子。

对于第二个问题 - 我能想到的一件事是给出一个可变因素：而不是使用`sqrt(number of answers)`- 你可以尝试在你的数据集中每个问题的最大答案数量 `(number_of_answers)^(log(number_of_answers+1)/log(max_answers+1))`在哪里。这将导致问题的答案很少，我认为这就是你所追求的。`max_answers`

* * *

**(1)** : 我们通常取`log(N+1)`- 所以它也会被定义为`N==0`。

# php - 从mysql中随机获取php中的记录

> ID：11878111
> 
> 赞同：0
> 
> 时间：2012-08-09T06:47:17.000
> 
> 标签：php, mysql

我想从 mysql 表中随机获取记录。我知道我们可以通过 rand() 使用 order 来获取，但对于大字段来说，这似乎是一个缓慢的过程。我们可以用其他方法来获取 rand 记录吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T06:50:05.027

如果您有一些主键`Id`，您可以在 和 之间选择一个随机数`MIN(Id)`并`MAX(Id)`获取该项目。`Id`如果该项目不存在，只需再试一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T06:52:34.400

你可以先得到一个兰特抵消

```
SELECT FLOOR(RAND() * COUNT(*)) AS rnd FROM your_table 
```

然后使用偏移量选择一条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T06:52:03.620

```
SELECT name
FROM random JOIN
     (SELECT CEIL(RAND() *
             (SELECT MAX(id)
              FROM random)) AS id
     ) AS r2
     USING (id); 
```

您的问题已经在这里得到解答：

[如何优化 MySQL 的 ORDER BY RAND() 函数？](https://stackoverflow.com/questions/1244555/how-can-i-optimize-mysqls-order-by-rand-function)

[http://jan.kneschke.de/projects/mysql/order-by-rand/](http://jan.kneschke.de/projects/mysql/order-by-rand/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T06:52:04.227

你可以试试这个：

```
SELECT * FROM  table 
join 
  (select round(rand()*(select max(id) from table)) as val from table) as rnd
on rnd.val=table.id; 
```

# php - SphinxQL - MATCH 查询中的逗号是什么意思

> ID：11878120
> 
> 赞同：0
> 
> 时间：2012-08-09T06:48:12.727
> 
> 标签：php, sphinx, sphinxql

我的问题是：

查询的以下匹配部分（SphinxQL）的挖掘是什么：

```
1\. MATCH('php, programmer')

2\. MATCH('php,programmer')

3\. MATCH('php programmer') 
```

使用 PHP SphinxAPI 时，此查询的含义有什么不同。

感谢我在文档中没有找到任何有用的建议 - 也许我一直在寻找错误的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:23:46.510

影响这一点的主要因素是字符集表

[http://sphinxsearch.com/docs/current.html#conf-charset-table](http://sphinxsearch.com/docs/current.html#conf-charset-table)

这将决定逗号是分隔符还是单词字符。

# java - 创建具有平移和缩放以及用户交互支持的图像查看画布

> ID：11878126
> 
> 赞同：2
> 
> 时间：2012-08-09T06:48:25.153
> 
> 标签：java, image, zooming, affinetransform, panning

我正在创建一个类似于 Adob​​e Illustrator 的程序，但要简单得多，并且生成代码而不是图像。

我遇到的问题是 AffineTransform 无法正常工作。很可能是因为误用。是的，我知道有很多 AffineTransform 线程，但它们不能回答我的问题。

目前我正在尝试使用三个变量（scale、centerX、centerY）来控制图像的查看。centerX 和 centerY 是相对于图像的，而不是屏幕坐标。它们的目的是使放大和缩小从 JPanel 的中心而不是左上角。

我已经进行了几次不同的尝试以非常接近，但对于我正在做的事情还不够准确。完成此操作后，我不知道如何处理用户交互，因为 AfflineTransform.createInverse() 会引发 NoninvertibleTransformException。这方面的建议也很好。

我已经尝试了很多没有配置，但没有运气。这是我最后的方法，也许可以让您了解我正在尝试做的事情。

```
 private BufferedImage image;
private boolean loadingImage;
private double scale = 1;
private double centerX = 0;
private double centerY = 0;
private boolean disableDrag = false;
private boolean disableZoom = false;
private AffineTransform affineTransform;

private AffineTransform createAffineTransfomation() {
    affineTransform = new AffineTransform();
    affineTransform.translate(
            (centerX - (image.getWidth() / 2)) * scale,
            (centerY  - (image.getHeight() / 2)) * scale
            );
    affineTransform.scale(scale, scale);
    return affineTransform;
} 
```

我希望我能很好地解释自己。这个 AffineTransform 的东西让我很困惑，我几乎无法解释我正在尝试做什么。

# jboss - 在 JBoss EAP 6 中部署 OSGi 包

> ID：11878128
> 
> 赞同：0
> 
> 时间：2012-08-09T06:48:30.177
> 
> 标签：jboss, osgi, jboss7.x

我已经使用 JAX-WS 开发了 OSGi 包，并尝试将其部署到 jboss eap 6 中，但出现以下错误。

```
11:39:09,798 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service jboss.deployment.unit."web-service.war".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit."web-service.war".STRUCTURE: JBAS018733: Failed to process phase STRUCTURE of deployment "web-service.war"
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:123) [jboss-as-server-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_17]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_17]
at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_17]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS018741: Failed to get manifest for deployment "/D:/jboss-eap-6.0/bin/content/web-service.war"
at org.jboss.as.server.deployment.module.ManifestAttachmentProcessor.deploy(ManifestAttachmentProcessor.java:74) [jboss-as-server-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:116) [jboss-as-server-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
... 5 more
Caused by: java.io.IOException: invalid header field
at java.util.jar.Attributes.read(Attributes.java:389) [rt.jar:1.6.0_17]
at java.util.jar.Manifest.read(Manifest.java:182) [rt.jar:1.6.0_17]
at java.util.jar.Manifest.<init>(Manifest.java:52) [rt.jar:1.6.0_17]
at org.jboss.vfs.VFSUtils.readManifest(VFSUtils.java:216)
at org.jboss.vfs.VFSUtils.getManifest(VFSUtils.java:199)
at org.jboss.as.server.deployment.module.ManifestAttachmentProcessor.deploy(ManifestAttachmentProcessor.java:70) [jboss-as-server-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
... 6 more 
```

MANIFEST.MF 文件的代码是。

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: 1.6.0_16 (Sun Microsystems Inc.)
Built-By: langfr
Build-Jdk: 1.6.0_16
Bundle-ClassPath: WEB-INF/classes/
Private-Package: sahoo.hybridapp.jaxws1.webservice;version="1.0-SNAPSHOT"
Bundle-Version: 1.0.0.SNAPSHOT
Tool: Bnd-0.0.311
Bundle-Name: Web Service module of our application
Bnd-LastModified: 1270710909852
Bundle-ManifestVersion: 2
Bundle-SymbolicName: sahoo.hybridapp.jaxws1.web-service
Web-ContextPath: /hybridapp.jaxws1.web-service
Import-Package: javax.jws;version="2.0",
org.osgi.framework;version="1.5",
sahoo.hybridapp.jaxws1.service;version="1.0",
org.apache.axis2.client,
org.jboss.spec.javax.servlet.jboss-servlet-api_2.5_spec;version="1.0.1.Final-redhat-1",
org.apache.felix.log;version="1.0.0.redhat-1",
org.apache.felix.configadmin;version="1.2.8.redhat-1",
jboss-osgi-logging;version="1.0.0.redhat-1" 
```

请任何人帮助我的 MANIFEST.MF 文件出了什么问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:10:03.003

据我所知，OSGi 捆绑包具有 .war 扩展名。尝试将其重命名为 web-service.jar

# asp.net - ASP Classic 到 VB.NET - 包括 RecordSets 的递归函数

> ID：11878129
> 
> 赞同：0
> 
> 时间：2012-08-09T06:48:36.633
> 
> 标签：asp.net, vb.net, asp-classic, tail-recursion

我希望有人能帮我想出这个问题，因为我被困住了。

我们正在慢慢地将 ASP Classic 网站迁移到 .NET Web 应用程序。我偶然发现了以下功能。该函数将返回一个由 hml a-tags 组成的字符串数组。

```
Private Function getFullPathLinks(lNodeId, sPath, sDocTemplate)
    Dim sql, recordSet, rsTmp
    Dim arrPath, sResult
    Dim lDocId

    lDocId  = getDocumentId(lNodeId)

    sql = "SELECT parent_id, label FROM wt_node WHERE (node_id = " & lNodeId & ")"
    Set recordSet = execSqlCache(oConn,sql,Array(),Array("wt_node"))

    If Not (recordSet.Bof And recordSet.Eof) Then

        If sDocTemplate <> "" Then
            sPath = sPath & "|" & "<a href='" & sDocTemplate & "?nodeid=" & lNodeId & "&documentid=" & lDocId & "'>" & recordSet("label") & "</a>"
        Else
            sPath = sPath & "|" & recordSet("label")
        End If

        getFullPathLinks recordSet("parent_id"), sPath
    End If
    recordSet.Close
    Set recordSet = Nothing

    arrPath = arrReverse(Split(sPath,"|"))
    sResult = Join(arrPath,sPathDelimiter)
    If Right(sResult,Len(sPathDelimiter)) = sPathDelimiter Then sResult = Left(sResult,Len(sResult)-Len(sPathDelimiter))

    getFullPathLinks    = sResult

End Function 
```

该函数在最后调用自身，这在我使用 DataReaders 与 SQL 数据库对话的 .NET 实现中无法正常工作。

我可以遵循与上述相同的结构，而是使用 DataReader 以外的其他东西来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:23:48.643

我不确定您使用的是什么 SQL Server 版本，但您是否看过 SQL 中的递归查询？它旨在在单个数据库调用中检索分层数据。看一看：

[http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx)

# ruby-on-rails - 在 Rails 2.3 中构建多个条件的更好方法

> ID：11878133
> 
> 赞同：3
> 
> 时间：2012-08-09T06:49:05.187
> 
> 标签：ruby-on-rails

我正在使用 Rails 2.3.8 开发并寻找更好的方法来构建查找条件。

在搜索页面上，就像用户搜索一样，用户设置搜索条件，查找条件取决于用户选择的条件，例如年龄、国家、邮政编码。

我在下面编写了代码来设置多个查找条件。

```
# Add condition if params post.
conditions_array = []
conditions_array << ['age > ?', params[:age_over]] if params[:age_over].present?
conditions_array << ['country = ?', params[:country]] if params[:country].present?
conditions_array << ['zip_code = ?', params[:zip_code]] if params[:zip_code].present?

# Build condition
i = 0
conditions = Array.new
columns = ''
conditions_array.each do |key, val|
  key = " AND #{key}" if i > 0
  columns += key
  item_master_conditions[i] = val
  i += 1
end
conditions.unshift(columns)
# condiitons => ['age > ? AND country = ? AND zip_code = ?', params[:age], params[country], prams[:zip_code]]

@users = User.find(:all, 
  :conditions => conditions
) 
```

这段代码运行良好，但丑陋且不聪明。有没有更好的方法来建立查找条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T22:49:47.130

命名范围可以使它更具可读性，尽管体积更大，同时仍然可以防止 SQL 注入。

```
named_scope :age_over, lambda { |age|
  if !age.blank?
    { :conditions => ['age > ?', age] }
  else
    {}
  end
}

named_scope :country, lambda { |country|
  if !country.blank?
    { :conditions => ['country = ?', age] }
  else
    {}
  end
}

named_scope :zip_code, lambda { |zip_code|
  if !zip_code.blank?
    { :conditions => ['zip_code = ?', age] }
  else
    {}
  end
} 
```

然后当你进行搜索时，你可以简单地将它们链接在一起：

```
@user = User.age_over(params[:age_over]).country(params[:country]).zip_code(params[:zip_code]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T07:39:02.917

我不小心碰到了你的问题，即使它是旧的，这里是答案：

定义条件后，您可以像这样使用它：

```
# Add condition if params post.
conditions_array = []
conditions_array << ["age > #{params[:age_over]}"] if params[:age_over].present?
conditions_array << ["country = #{params[:country]}"] if params[:country].present?
conditions_array << ["zip_code = #{params[:zip_code]}"] if params[:zip_code].present?

conditions = conditions_array.join(" AND ")
@users = User.find(:all, :conditions => conditions) #Rails 2.3.8
@users = User.where(conditions) #Rails 3+ 
```

# php - 如何在php中找到另一个日期之前的日期

> ID：11878135
> 
> 赞同：1
> 
> 时间：2012-08-09T06:49:19.660
> 
> 标签：php

我需要找到`date x`它`n working days`在`date y`.

我可以使用类似的东西`date("Y-m-d",$def_date." -5 days");`，但在这种情况下，它不会考虑周末或过时。假设我的工作日是周一到周六，知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:04:45.300

试试这个

```
<?php
function businessdays($begin, $end) {
    $rbegin = is_string($begin) ? strtotime(strval($begin)) : $begin;
    $rend = is_string($end) ? strtotime(strval($end)) : $end;
    if ($rbegin < 0 || $rend < 0)
        return 0;

    $begin = workday($rbegin, TRUE);
    $end = workday($rend, FALSE);

    if ($end < $begin) {
        $end = $begin;
        $begin = $end;
    }

    $difftime = $end - $begin;
    $diffdays = floor($difftime / (24 * 60 * 60)) + 1;

    if ($diffdays < 7) {
        $abegin = getdate($rbegin);
        $aend = getdate($rend);
        if ($diffdays == 1 && ($astart['wday'] == 0 || $astart['wday'] == 6) && ($aend['wday'] == 0 || $aend['wday'] == 6))
            return 0;
        $abegin = getdate($begin);
        $aend = getdate($end);
        $weekends = ($aend['wday'] < $abegin['wday']) ? 1 : 0;
    } else
        $weekends = floor($diffdays / 7);
    return $diffdays - ($weekends * 2);
}

function workday($date, $begindate = TRUE) {
    $adate = getdate($date);
    $day = 24 * 60 * 60;
    if ($adate['wday'] == 0) // Sunday
        $date += $begindate ? $day : -($day * 2);
    return $date;
}

$def_date="";//define your date here
$preDay='5 days';//no of previous days  
date_sub($date, date_interval_create_from_date_string($preDay));
echo businessdays($date, $def_date); //date prior to another date 
?> 
```

从[PHP.net修改](http://www.php.net/manual/en/ref.datetime.php#57207)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:45:48.153

感谢大家的帮助，但为了解决这个特殊问题，我写了一个简单的代码：

```
 $sh_padding = 5; //No of working days to count backwards 
    $temp_sh_padding = 1; //A temporary holder
    $end_stamp = strtotime(date("Y-m-d", strtotime($date_format)) . " -1 day"); //The date(timestamp) from which to count backwards
    $start_stamp = $end_stamp; //start from same as end day
    while($temp_sh_padding<$sh_padding)
    {
        $sh_day = date('w',$start_stamp);
        if($sh_day==0){ //Skip if sunday
        }
        else
        {
            $temp_sh_padding++;
        }
        $start_stamp = strtotime(date("Y-m-d",$start_stamp)." -1 day");
    }
    $sh_st_dte = date("Y-m-d",$start_stamp); //The required start day 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:20:34.917

用谷歌搜索一下就到了[这个页面](http://tech.ldg.me/2011/06/php-date-function-for-calculating-workdays-in-a-date-range)，其中包括一个计算两个日期之间的工作日数的函数。

调整该概念以满足您的需求应该是相当简单的。

但是，您的问题是周一至周五的“工作日”概念并不普遍。如果您的软件只在内部使用，那么做一些假设是可以的，但如果它是供第三方使用的，那么您不能假设他们的工作周与您相同。

此外，公共假期将通过从全年不同的工作周中删除任意日期来投入工作。

如果您想满足这些需求，那么唯一明智的做法是将一年中的日期存储在日历中（即一个大数组），并将它们分别标记为工作日或非工作日。如果你打算这样做，那么你也可以在周末使用相同的机制。

当然，不利的一面是这需要保持最新状态。但至少对于周末来说，这将是微不足道的（提前遍历日历并标记周末在哪里`date('w')==0 or date('w')==6`）。

# .net - 服务层设计。将事物放入服务层的原因

> ID：11878137
> 
> 赞同：3
> 
> 时间：2012-08-09T06:49:30.097
> 
> 标签：.net, asp.net-mvc, domain-driven-design, service-layer

我有几个与设计相关的问题：

*   应该`service layer interfaces`住在一个`domain layer`？例如`user service`？
*   将代码部分移动到单独的层的主要原因是什么？
*   应该`service layer`住在`same assembly as the application layer`？

谢谢！

**编辑**

我使用 a`RavenDB`并且有非常瘦的控制器动作，但有两个动作作为`[NonAction]`动作出现：

```
[NonAction]
public IEnumerable<Article> GetAllArticles() { 
    return this.session.Query<Article>()
        .Customize((x => x.WaitForNonStaleResults()))
        .AsQueryable()
        .OrderBy(d => d.CreatedOn);
}

[NonAction]
public IEnumerable<String> GetAllCategories() {
    return this.session.Query<Article>()
        .Select(x => x.Category)
        .Distinct().ToList()
        .OrderBy(x => x);
} 
```

..因为我不使用存储库模式。将其放在服务中是否合理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:04:04.240

> 服务层接口应该驻留在领域层吗？例如用户服务？

在 DDD 中，您必须区分两种类型的服务：域服务和应用程序服务（不包括基础设施服务）。

*   域服务位于域层并包含不属于任何实体或跨越多个实体的域逻辑。

*   应用程序服务位于应用程序层并定义特定于应用程序的操作，这些操作协调对域层的调用并可能返回结果。它们可能对应于用例或用例的子部分。应用程序服务由客户端直接调用，而域服务不能。

应用程序服务接口不需要在域层，因为它们不是特定于域的而是特定于应用程序的，并且域不使用它们。应用程序层引用域层，但不是相反。

> 将代码部分移动到单独的层的主要原因是什么？

想到的第一个好处是可重用性（在其他地方重用您的域，而不携带所有特定于应用程序的东西）和可维护性（将变化的东西组合在一起）。

请参阅[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)、[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)、[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)。

> 服务层应该与应用层位于同一个程序集中吗？

在 DDD 中，没有服务层。不过，应用层通常等同于其他方法所称的*服务层*。

> 因为我不使用存储库模式。将其放在服务中是否合理？

“按书本” DDD 需要一个用于此类操作的存储库。即使您没有密切关注 DDD，我也不喜欢将所有东西命名为“服务”，因为有大量更准确的名称可以给它们：数据访问对象、数据网关等。这里要意识到的是，包含这些方法的对象应该放在低级数据特定层（DAL，基础设施层），因为它显式地处理一个持久数据存储（Raven DB）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:01:40.770

> 将代码部分移动到单独的层的主要原因是什么？

这很容易。将代码移动到您看不到的地方的主要原因是管理复杂性。当你在某个接口后面隐藏代码时，你必须只考虑那个接口，而不是它的实现。

当同样的推理涉及层时，您还有一点：层为您提供了通信限制。你有公共表面，你必须管理它，你有你实现的所有内部代码路径，你只能访问下一层（通过定义的接口集）。这有助于编写更清晰的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T23:05:17.523

如果您使用的是 .net 客户端，那就是您的存储库模式。DocumentStore 和 DocumentSession，或者它们的接口 IDocumentStore 和 IDocumentSession

# c# - 谷歌天气 API 403 错误

> ID：11878143
> 
> 赞同：9
> 
> 时间：2012-08-09T06:50:01.417
> 
> 标签：c#, asp.net, xml, google-api

我决定从 Google 的 Weather API 中提取信息——我在下面使用的代码运行良好。

```
 XmlDocument widge = new XmlDocument();
            widge.Load("https://www.google.com/ig/api?weather=Brisbane/dET7zIp38kGFSFJeOpWUZS3-");
            var weathlist = widge.GetElementsByTagName("current_conditions");
            foreach (XmlNode node in weathlist)
            {

                City.Text = ("Brisbane");
                CurCond.Text = (node.SelectSingleNode("condition").Attributes["data"].Value);
                Wimage.ImageUrl = ("http://www.google.com/" + node.SelectSingleNode("icon").Attributes["data"].Value);
                Temp.Text = (node.SelectSingleNode("temp_c").Attributes["data"].Value + "°C");
        }
     } 
```

正如我所说，我能够从 XML 文件中提取所需的数据并显示它，但是如果页面被刷新或当前会话仍然处于活动状态，我会收到以下错误：

> 用户代码未处理 WebException - 远程服务器返回错误：403 Forbidden Exception。

我想知道这是否与对该特定 XML 文件的访问权限的某种访问限制有关？

# 进一步研究和调整建议

如下所述，这绝不是最佳实践，但我已经包含了我现在用于异常的 catch。我在 Page_Load 上运行此代码，所以我只是回发到页面。从那以后我没有注意到任何问题。性能方面我并不过分担心 - 我没有注意到加载时间有任何增加，而且这个解决方案是暂时的，因为这都是为了测试目的。我仍在使用 Yahoo 的 Weather API。

```
 try
        {
            XmlDocument widge = new XmlDocument();
            widge.Load("https://www.google.com/ig/api?weather=Brisbane/dET7zIp38kGFSFJeOpWUZS3-");
            var list2 = widge.GetElementsByTagName("current_conditions");
            foreach (XmlNode node in list2)
            {

                City.Text = ("Brisbane");
                CurCond.Text = (node.SelectSingleNode("condition").Attributes["data"].Value);
                Wimage.ImageUrl = ("http://www.google.com/" + node.SelectSingleNode("icon").Attributes["data"].Value);
                Temp.Text = (node.SelectSingleNode("temp_c").Attributes["data"].Value + "°C");

            }
        }
        catch (WebException exp)
        {
            if (exp.Status == WebExceptionStatus.ProtocolError &&
                exp.Response != null)
            {
                var webres = (HttpWebResponse)exp.Response;
                if (webres.StatusCode == HttpStatusCode.Forbidden)
                {
                    Response.Redirect(ithwidgedev.aspx);
                }

            }
        } 
```

# 说明 API 错误处理的 Google 文章

[Google API 处理错误](https://developers.google.com/drive/handle-errors)

# 谢谢：

[https://stackoverflow.com/a/12011819/1302173](https://stackoverflow.com/a/12011819/1302173)（捕获 403 并召回）

[https://stackoverflow.com/a/11883388/1302173](https://stackoverflow.com/a/11883388/1302173)（错误处理和一般 Google API 信息）

[https://stackoverflow.com/a/12000806/1302173](https://stackoverflow.com/a/12000806/1302173)（响应处理/json缓存-未来计划）

# 选择

我最近发现了这个很棒的开源替代品

[OpenWeatherMap - 免费的天气数据和预报 API](http://openweathermap.org/API#weather)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T12:23:56.577

这与服务的更改/中断有关。请参阅：[http ://status-dashboard.com/32226/47728](http://status-dashboard.com/32226/47728)

![在此处输入图像描述](../Images/fa6244889e83232a664495b27c98320f.png)

一年多来，我一直在使用 Google 的 Weather API 来提供电话服务器，以便 PolyCom 电话接收天气页面。它已经运行了一年多没有错误。截至 2012 年 8 月 7 日，经常出现间歇性 403 错误。

我每小时使用一次服务（一直如此），所以我认为请求的频率不是问题。403 的间歇性更可能与 Google 部分推出配置更改或 CDN 更改有关。

Google Weather API 并不是真正的已发布 API。这是一项显然是为在 iGoogle 上使用而设计的内部服务，因此支持程度尚不确定。我昨天在 googleapis 上发了推文，但没有收到任何回复。

切换到升级的天气 API 可能会更好，例如： [WUnderground Weather](http://www.wunderground.com/weather/api)或 [Yahoo Weather](http://developer.yahoo.com/weather/)。

我昨天自己添加了以下“除非定义”错误处理 perl 代码来解决这个问题，但如果问题仍然存在，我将切换到更全面支持的服务：

```
my $url = "http://www.google.com/ig/api?weather=" . $ZipCode ;

my $tpp = XML::TreePP->new();
my $tree = $tpp->parsehttp( GET => $url );

my $city = $tree->{xml_api_reply}->{weather}->{forecast_information}->{city}->{"-data"};

unless (defined($city)) {
    print "The weather service is currently unavailable. \n";
    open (MYFILE, '>/home/swarmp/public_html/status/polyweather.xhtml');
    print MYFILE qq(<?xml version="1.0" encoding="utf-8"?>\n);
    print MYFILE qq(<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "xhtml11.dtd">\n);
    print MYFILE qq(<html xmlns="http://www.w3.org/1999/xhtml">\n);
    print MYFILE qq(<head><title>Weather is Unavailable!</title></head>\n);
    print MYFILE qq(<body>\n);
    print MYFILE qq(<p>\n);
    print MYFILE qq(The weather service is currently unavailable from the data vendor.\n);
    print MYFILE qq(</p>\n);
    print MYFILE qq(</body>\n);
    print MYFILE qq(</html>\n);
    close MYFILE;
    exit(0);
}... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:30:36.193

这和我们发现的一样。

比较错误请求和工作请求中的请求标头。工作请求包括 cookie。但他们来自哪里？

从谷歌删除所有浏览器 cookie。天气 api 调用将不再在您的浏览器中运行。浏览至 google.com，然后浏览至天气 api，它将再次运行。

Google 检查 cookie 以阻止多个 api 调用。在处理所有天气 api 请求之前获取一次 cookie 将解决问题。Cookie 将在一年后过期。我假设您将更频繁地重新启动您的应用程序，而不是每年一次。这样你就会得到一个新的。为每个请求获取 cookie 将导致相同的问题：太多不同的请求。

一个提示：天气不经常变化，所以缓存 json 信息（可能一个小时）。这将减少作为请求的耗时操作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:11:29.687

这绝不是最佳实践，但我在一些 WP7 和 Metro 应用程序中大量使用此 API。我通过捕获异常（大多数情况下是 403）并简单地在 catch 内重新调用服务来处理这个问题，如果 Google 端出现错误，它通常是短暂的，只会导致 1 或 2 次额外调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:00:28.063

我发现如果您在干净的浏览器中尝试请求（例如 chrome 上的新窗口隐身模式），则谷歌天气服务可以工作。cookie 的可能问题？

# php - 意外的 T_USE，期待 '{'

> ID：11878144
> 
> 赞同：6
> 
> 时间：2012-08-09T06:50:02.217
> 
> 标签：php, syntax

```
<?php

$wordFrequencyArray = array();

function countWords($file) use($wordFrequencyArray) {  //error here
    /* get content of $filename in $content */
    $content = strtolower(file_get_contents($filename)); 
```

这是我正在使用的代码片段。

我在第 3 行遇到错误。我有所有匹配的大括号。可能出了什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T06:54:30.203

它应该是：

```
$countWords = function($file) use($wordFrequencyArray) {
  //...
}; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T06:55:00.730

只有[匿名函数](http://www.php.net/manual/en/functions.anonymous.php)可能声明了一个`use`语句，因此错误消息警告您需要一个左括号而不是`use`语句。

要绕过没有`use`语句，您可以添加更多参数并将其传递给函数，或者在某些情况下将变量称为[global](http://php.net/manual/en/language.variables.scope.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T10:16:44.887

不是解决方案，而是增加讨论。

我在命名空间声明和使用命令中苦苦挣扎。最后我发现问题只是我试图在要使用该项目的函数中进行声明。这导致我的脚本因上述错误消息而失败。将声明移动到 php 脚本的开头

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-09T06:55:18.250

尝试

```
<?php

$wordFrequencyArray = array();

function countWords($file) {  
global $wordFrequencyArray;
 /* get content of $filename in $content */
 $content = strtolower(file_get_contents($filename));
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-09T06:56:31.507

使它类似于：

```
$wordFrequencyArray = array();

function countWords($file,$wordFrequencyArray)  {
    /* get content of $filename in $content */
    $content = strtolower(file_get_contents($filename));
} 
```

# objective-c - AutoRotation 并支持横向和纵向

> ID：11878148
> 
> 赞同：0
> 
> 时间：2012-08-09T06:50:12.077
> 
> 标签：objective-c, xcode, rotation

嗨，我正在尝试让我的 Iphone 应用程序允许所有方向，目前我正在使用 TableViewController，我编辑了代码

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return YES;
//(interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

当我旋转它时，我的应用程序根本没有改变，它只是横向显示一个表格？如何让它随设备旋转？谢谢

另外，我在开始时使用导航控制器，并且有多个转到其他视图的 segue

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:57:17.003

检查您的项目 .plist 文件并确保关键“支持的界面方向”有 4 个元素

如下： 支持的界面方向：

```
<array>
<string>UIInterfaceOrientationLandscapeLeft</string>
<string>UIInterfaceOrientationLandscapeRight</string>
<string>UIInterfaceOrientationPortrait</string>
<string>UIInterfaceOrientationPortraitUpsideDown</string>
</array> 
```

如果不是所有这些，请通过选择设备图标从 .plist 文件或 xcode 编辑器中添加它们

# php - Joomla：在 AJAX 成功时提取 javascript documentReady 回调函数

> ID：11878150
> 
> 赞同：0
> 
> 时间：2012-08-09T06:50:23.170
> 
> 标签：php, jquery, joomla2.5, history.js

我正在为 Joomla 构建一个 ajaxizes 前端的插件。我一直在使用来自 balupton 的[balupton 的历史 js 页面](https://gist.github.com/854622)的脚本，它工作正常，除了使用该函数的任何 javascript`.ready()`都不会执行，因为 DOM 已经加载。

我想做的是以某种方式搜索被请求的脚本，然后去掉使用的函数，`ready()`然后执行它们。

在脚本中，我们已经获取了每个 html 文件中引用的所有脚本，并且我们可以访问每个 js 文件中的文本：

```
// Add the scripts
                    $scripts.each(function(){
                        var $script = $(this), scriptText = $script.text(), scriptNode = document.createElement('script');
                        scriptNode.appendChild(document.createTextNode(scriptText));
                        contentNode.appendChild(scriptNode);
                    }); 
```

我正在考虑做一个简单的字符串替换，但话又说回来，我不确定是否有更好的方法来做这件事，因为它当然需要正则表达式，因为可能会有不同的回调函数。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:38:55.533

我不认为改变JS是正确的方法。您是否尝试过手动触发就绪功能？

```
jQuery.ready(); 
```

# android - 如何切换“使用物理键盘”。

> ID：11878153
> 
> 赞同：3
> 
> 时间：2012-08-09T06:50:38.920
> 
> 标签：android, toggle, rfid, virtual-keyboard

我正在开发一个有 RFID 阅读器（模拟键盘）的应用程序。在某些活动中，我还需要一个虚拟键盘。我发现我需要的只是切换“使用物理键盘”。效果很好，但是当我重新启动平板电脑时，此功能设置为默认值？

如果我可以在代码中的某处插入切换，是否有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:30:59.687

我可以使用以下代码切换屏幕键盘：

```
InputMethodManager inputMgr = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
inputMgr.toggleSoftInput(0, 0); 
```

* * *

在参考中，使用[EditText](http://developer.android.com/reference/android/widget/EditText.html)。

“EditText 是对 TextView 的薄薄的一层，将自身配置为可编辑。”

要显示屏幕键盘，他们需要做的就是触摸文本框。如果该框被命名为“搜索”或类似名称，我相信它对用户来说会比按钮更有用。

# ios - 如何在 init 方法中从 NIB 加载 IBOutlets？

> ID：11878156
> 
> 赞同：0
> 
> 时间：2012-08-09T06:50:48.380
> 
> 标签：ios, uiviewcontroller, nib, iboutlet

我需要在我的 UIViewController 的 initWithNibName 方法中访问 IBOutlets，但它们都是 nil，因为它们还没有被实例化。有没有办法实例化它们？我读过调用 -loadView 是不安全的，因为它会导致内存泄漏。所以请告诉我是否有任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:06:30.733

一般来说，这是不可能的，您尝试访问此刻甚至不存在的东西。为什么不在这个控制器中使用 viewWillAppear() 方法？我想这就是你所需要的。给我们代码示例或更多工作。

# tomcat - tomcat 自己重启

> ID：11878157
> 
> 赞同：2
> 
> 时间：2012-08-09T06:50:50.177
> 
> 标签：tomcat, restart

我在linux上写了一个脚本，可以成功执行命令'sudo /etc/ini.d/tomcat restart'，当我通过部署在tomcat中的Web应用程序执行此命令时，tomcat会成功关闭但它不能可以开始了，为什么？

# android - 为安卓创建库

> ID：11878168
> 
> 赞同：1
> 
> 时间：2012-08-09T06:51:49.853
> 
> 标签：android, android-library

我正在创建一个用于图像加载和缓存的库。我希望用户程序员选择 .png 和 .jpeg 之间的文件扩展名，希望它只能从这 2 中选择，如果程序员键入另一个扩展名，那么它必须显示错误。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:28:21.607

如果我对您的问题的理解正确，您想创建一个库来处理图像，并且当使用您的库的程序员想要实例化您的图像处理类/类时，您希望他/她在 jpg 和 png 之间进行选择？

如果是这样，您最好的选择是创建一个枚举：

```
public enum ImageType
{
    TYPE_JPG, TYPE_PNG;
} 
```

在您实际的图像处理类中：

```
public class MyImageHandler
{
    public MyImageHandler(ImageType type)
    {
        //You still need a nullcheck
        if(type == null) 
            throw new NullPointerException("null is not accepted!");

        if(type == ImageType.TYPE_JPG)
        {
            //JPG chosen
        }
        else if(type == ImageType.TYPE_PNG)
        {
            //PNG chosen
        }
    }
} 
```

当用户程序员使用它时：

```
MyImageHandler handler = new MyImageHandler(ImageType.PNG); //correct
MyImageHandler handler = new MyImageHandler(ImageType.JPG); //correct
MyImageHandler handler = new MyImageHandler(null); //runtime error 
```

# cocoa - 如何将背景颜色设置为 IKImageBrowserView

> ID：11878178
> 
> 赞同：1
> 
> 时间：2012-08-09T06:52:43.180
> 
> 标签：cocoa, osx-snow-leopard, ikimagebrowserview

我是可可新手。我正在创建一个彩色窗口。所以我需要将背景颜色设置为`IKImageBrowserView`. 我认为子类`IKImageBrowserView`化是设置背景颜色的方法，但对我来说太难了.. 还有其他方法可以在没有子类化的情况下设置背景颜色吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T16:58:02.803

`setValue:forKey`您可以通过使用这样的选项键来实现您想要的`IKImageBrowserBackgroundColorKey`：

```
[imageBrowserViewOutlet setValue:[NSColor redColor] forKey:IKImageBrowserBackgroundColorKey]; 
```

**注意：** *imageBrowserViewOutlet*是`IKImageBrowserView`插座。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:33:04.413

您可以使用以下方法做到这一点：

```
[thumbnailBrowser setValue:[NSColor colorWithDeviceRed:0.125f green:0.145f blue:0.145f alpha:1.0f]   forKey:IKImageBrowserBackgroundColorKey]; 
```

根据需要更改 RGB。thumbnailBrowser 是 IKImageBrowserView。祝你好运！

# android - 安卓opencv照片抓拍

> ID：11878179
> 
> 赞同：1
> 
> 时间：2012-08-09T06:52:52.963
> 
> 标签：android, opencv, camera, android-camera

我是安卓新手。在 Android 中使用 opencv 创建图像捕获应用程序。所以我下载了 opencv 2.4.2 sdk 并使用了示例**“OpenCV Sample - face-detection”**。现在相机打开并检测良好。现在我将使用现有的人脸检测来实现照片捕捉。如何在 opencv 相机上添加捕获按钮。谁能帮我做到这一点。

谢谢， 卡尔蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:25:46.607

OpenCV 原生相机（又名 VideoCapture 类）不支持拍照模式。[查看使用 Android Java 摄像头的教程 1 示例，并在http://developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html)上阅读它

# javascript - 如何使用 Java Script 和 Twitter Bootstrap 创建切换选项卡的“下一步”按钮

> ID：11878180
> 
> 赞同：13
> 
> 时间：2012-08-09T06:52:59.280
> 
> 标签：javascript, html, button, twitter-bootstrap

我有以下代码：http: [//jsfiddle.net/h6rQ2/2/](http://jsfiddle.net/h6rQ2/2/)

我正在使用 html 创建一个基本表单。这个表单有两个部分——每个部分都包含在一个选项卡中（使用 Twitter Bootstrap 创建的选项卡）。

如何创建从第一个选项卡切换到第二个选项卡的“下一步”按钮？当我现在尝试这样做时，它只提交表单。Twitter Bootstrap 是否已经提供了让您通过外部按钮切换选项卡的功能？如果是这样，你如何使用它？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-09T10:06:42.833

鉴于这些按钮：

```
<div class="btn-group">
    <button class="btn" id="prevtab" type="button">Prev</button>
    <button class="btn" id="nexttab" type="button">Next</button>
</div> 
```

你需要这个 JS ：

```
var $tabs = $('.tabbable li');

$('#prevtab').on('click', function() {
    $tabs.filter('.active').prev('li').find('a[data-toggle="tab"]').tab('show');
});

$('#nexttab').on('click', function() {
    $tabs.filter('.active').next('li').find('a[data-toggle="tab"]').tab('show');
}); 
```

[工作演示（jsfiddle）](http://jsfiddle.net/Sherbrow/h6rQ2/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T11:16:49.060

为了使其循环（最后一个选项卡到第一个，第一个选项卡到最后一个），这是我的代码：

```
function previousVin(){
    var previousElement = $('#myTab li').filter('.active').prev('li').find('a[data-toggle="tab"]');
    if(previousElement.html()===undefined){
        $('#myTab a:last').tab('show');
    }else{
        previousElement.tab('show');
    }
}
function nextVin(){
    var nextElement = $('#myTab li').filter('.active').next('li').find('a[data-toggle="tab"]');
    if(nextElement.html()===undefined){
        $('#myTab a:first').tab('show');
    }else{
        nextElement.tab('show');
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-03T15:03:44.220

对于引导程序 3

```
$('a[data-toggle^="tab"]').click(function(){
    var data = $(this).attr("href");
    $('a[data-toggle^="tab"]').parent("li").removeClass("active");
    $('li a[href^="'+data+'"]').parent("li").addClass("active");
    $('.tab-pane').removeClass("active");
    $(data).addClass("active");
}) 
```

您可以在任何地方添加这样的链接

```
<a href="#tabname2" data-toggle="tab">Next</a>
<a href="#tabname1" data-toggle="tab">Previous</a> 
```

# sql - Postgresql CASE 语法的问题

> ID：11878185
> 
> 赞同：2
> 
> 时间：2012-08-09T06:53:19.220
> 
> 标签：sql, postgresql, datetime, aggregate-functions, case

这是我的 SQL 查询：

```
 SELECT (CASE (elapsed_time_from_first_login IS NULL) 
                        WHEN true THEN 0 
                        ELSE elapsed_time_from_first_login END) 
FROM (
   SELECT (now()::ABSTIME::INT4 - min(AcctStartTime)::ABSTIME::INT4) 
   FROM radacct
   WHERE UserName = 'test156') AS elapsed_time_from_first_login; 
```

当我执行上述查询时，我收到此错误：

> 错误：CASE 类型记录和整数无法匹配

从错误消息中，我了解到`PostgreSQL`将第二个选择分别`elapsed_time_from_first_login`作为一行，即使它始终是单个值（因为 min() 函数）。

**问题：**您对如何处理此查询有一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:52:51.763

我想，你实际上想要做的应该是这样的：

```
SELECT COALESCE((
    SELECT now() - min(AcctStartTime)
    FROM   radacct
    WHERE  userName = 'test156'), interval '0s') 
```

~~如果子选择（带有别名`elapsed_time_from_first_login`）没有找到行，它将返回一个 NULL 值，但**没有行**。~~

~~要抓住这一点，您可以将其包装`whole sub-select`在一个[`COALESCE`](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL)语句中 - 这比`CASE`目的更简单。~~

`min()`起初我忽略了将“无行”转换为`NULL`. 因此，只要您在子选择中有一个聚合函数，下面的简单表单也可以解决问题。这是一个[关于 sqlfiddle 的快速演示，以显示效果](http://sqlfiddle.com/#!1/918ec/3)。

已经指出了您查询的其他问题。但这是更简单的解决方案。它返回一个`interval`而不是一个`integer`。

* * *

### 转换为整数

^(在@artaxerxe 评论后简化。)
简单的表格可以在不检查“无行”的情况下完成这项工作：

```
SELECT COALESCE(EXTRACT(epoch FROM now() - min(AcctStartTime))::int, 0)
FROM   radacct
WHERE  userName = 'test156'; 
```

`EXTRACT(epoch FROM INTERVAL)` [手册中有关的](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)详细信息。

### 聚合函数和 NULL

还有一点：如果你使用了聚合函数`count()`——而不是`sum()`你最初在问题中使用的函数——结果会有所不同。`count()`是标准聚合函数中的一个特例，它从不返回`NULL`. 如果没有找到值（或行），则返回`0`。

聚合函数手册的[摘录](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)似乎涵盖了很多内容：

> 需要注意的是，除了count之外，这些函数在没有选择行时返回一个空值。特别是，没有行的总和返回 null，而不是预期的零，并且当没有输入行时，array_agg 返回 null 而不是空数组。必要时，可使用 coalesce 函数将零或空数组替换为 null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T07:06:38.053

`0`Postgres抱怨这`elapsed_time_from_first_login`不是同一类型。

试试这个（也简化你的选择）：

```
select
    coalesce(elapsed_time_from_first_login::INT4, 0)
from ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T07:12:56.793

这是我格式化的方式`SQL`，现在正在工作：

```
选择合并（结果，0）
     FROM (SELECT (now()::ABSTIME::INT4 - min(AcctStartTime)::ABSTIME::INT4) 结果
                FROM radacct WHERE UserName = 'test156') as elapsed_time_from_first_login;

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T07:38:28.140

第二个`SELECT`是返回一个表，以`elapsed_time_from_first_login`一列一行命名。您必须为该列起别名并在`CASE`子句中使用它。您不能将整个表（即使它是一列，仅一行）放在预期值的位置。

```
SELECT (CASE (elapsed_time IS NULL) 
                        WHEN true THEN 0 
                        ELSE elapsed_time end) 
   FROM (SELECT (now()::ABSTIME::INT4 - min(AcctStartTime)::ABSTIME::INT4) 
                AS elapsed_time                -- column alias
         FROM radacct 
         WHERE UserName = 'test156'
        ) as elapsed_time_from_first_login;    -- table alias 
```

`CASE`并且您可以通过使用该函数来缩短`COALESCE()`（并且可以选择为该列添加一个别名以显示在结果中）：

```
SELECT COALESCE(elapsed_time, 0) 
         AS elapsed_time 
   FROM (SELECT (now()::ABSTIME::INT4 - min(AcctStartTime)::ABSTIME::INT4) 
                AS elapsed_time            
         FROM radacct 
         WHERE UserName = 'test156'
        ) as elapsed_time_from_first_login;    -- table alias 
```

# android - 如何在 android 中发布或知道 http 客户端是否免费？

> ID：11878186
> 
> 赞同：1
> 
> 时间：2012-08-09T06:53:23.273
> 
> 标签：android, httpclient

当我的应用程序用户尝试使用已经在后台执行其他一些工作的客户端从 Web 服务器获取数据时，我会收到此异常。

我在整个应用程序中使用相同的客户端来维护会话。

例外情况表明：

```
Make sure to release the connection before allocating another one. 
```

如何释放它？或者如果我可以检查它是否免费会更好。这样我就可以等到它免费或发布

谢谢你

# jstl - 这在 jstl 中是什么意思？

> ID：11878188
> 
> 赞同：4
> 
> 时间：2012-08-09T06:53:33.310
> 
> 标签：jstl

以下代码有一个条件，`lt`我在网上搜索但无法真正理解它的`lt`含义。请解释。我确信这个问题会引起我的反对，但除了在这里发布之外我别无选择。

```
<c:if test="${currentPage lt noOfPages}">
            <td><a href="employee.do?page=${currentPage + 1}">Next</a></td>
        </c:if> 
```

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T06:55:09.173

lt 是`less than`or的简写`<`。这么短，我可以理解它很难搜索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T06:55:18.733

lt 是一个`EL`运算符（[保留字](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)） - 小于`<`

# java - Intellij 自动构建 - 不存在

> ID：11878189
> 
> 赞同：4
> 
> 时间：2012-08-09T06:53:33.827
> 
> 标签：java, intellij-idea

如果我删除了一个方法，则在我手动构建项目之前，不会显示错误（由于不存在方法而在代码中的其他位置）。没有办法让它在保存/更改时自动构建？

有没有我在某处遗漏的选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:44:18.010

你可以试试[IDEA 12 EAP](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)，它支持后台编译。有关更多详细信息，请参阅[http://blogs.jetbrains.com/idea/2012/06/brand-new-compiler-mode-in-intellij-idea-12-leda/](http://blogs.jetbrains.com/idea/2012/06/brand-new-compiler-mode-in-intellij-idea-12-leda/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:04:02.103

是的，[Eclipse 模式插件](http://plugins.intellij.net/plugin/?id=3822)。它可以让您始终在后台编译，就像 Eclipse 一样。奇迹般有效。

除此之外：在 IntelliJ 中，不要只是手动删除方法，使用`Refactor > Safe Delete ...`. 它将引导您浏览代码中使用该方法的所有位置。这就是 IntelliJ 的做法。

# iphone - 在导航栏上放置自定义视图

> ID：11878190
> 
> 赞同：0
> 
> 时间：2012-08-09T06:53:37.013
> 
> 标签：iphone, ios, uinavigationbar

我想显示图像、标题名称和两个左右按钮。我已经成功地做到了。这是代码：

```
 UIView *view = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 200, 100)];

    UIButton *leftButton = [[UIButton alloc]init];
    [leftButton setImage:[UIImage imageNamed:@"previous-arrow.png"] forState:UIControlStateNormal];
    [leftButton addTarget:self action:@selector(goPrevious:) forControlEvents:UIControlEventTouchUpInside];
    [leftButton setFrame:CGRectMake(20, 50, 14, 13)];

    UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Title.png"]];
    [imageView setFrame:CGRectMake(leftButton.frame.origin.x+leftButton.frame.size.width+4, 20, 50, 50)];

    UILabel *nameLabel = [[UILabel alloc]initWithFrame:CGRectMake(imageView.frame.origin.x+imageView.frame.size.width+4, 30, 100, 40)];
    NSString *cName = [NSString stringWithFormat:@"%@",[NameArray objectAtIndex:indexPath.section]];

    [nameLabel setTextColor:[UIColor whiteColor]];
    [nameLabel setBackgroundColor:[UIColor clearColor]];
    [nameLabel setContentMode:UIViewContentModeScaleAspectFill];
    [nameLabel setTextAlignment:UITextAlignmentLeft];
     CGSize expectedLabelSize = [cName sizeWithFont:nameLabel.font 
                                        constrainedToSize:CGSizeMake(100, 40) 
                                            lineBreakMode:nameLabel.lineBreakMode]; 
    [nameLabel setFrame:CGRectMake(imageView.frame.origin.x+imageView.frame.size.width+4, 35, expectedLabelSize.width, expectedLabelSize.height)];
    nameLabel.text=cName;

    UIButton *rightButton = [[UIButton alloc]init];
    [rightButton setImage:[UIImage imageNamed:@"next-arrow.png"] forState:UIControlStateNormal];
    [rightButton setFrame:CGRectMake(nameLabel.frame.origin.x+nameLabel.frame.size.width+4, 50, 14, 13)];
    [rightButton addTarget:self action:@selector(next:) forControlEvents:UIControlEventTouchUpInside];

    [view addSubview:nameLabel];
    [view addSubview:imageView];
    [view addSubview:leftButton];
    [view addSubview:rightButton];

    self.navigationItem.titleView = view; 
```

这段代码写在 cellForRowAtIndexPath 中。该视图在导航栏上正确显示，但在滚动 tableview 之后。最初它显示在错误的坐标上。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T06:56:39.253

将此代码放入`viewWillAppear`or中`viewDidAppear`。它并不意味着在 tableView 协议中！

# php - 无法将 + 符号传递给 php 页面进行处理

> ID：11878191
> 
> 赞同：1
> 
> 时间：2012-08-09T06:53:45.103
> 
> 标签：php, html, get, url-parameters

我有一个下拉列表，如下所示，

```
<select name="pid" onchange="getReport(this.value)">
<option>Select a PID:</option>
<option value="SFP-GE-S">SFP-GE-S</option>
<option value="SFP-OC12-MM">SFP-OC12-MM</option>
<option value="SFP-OC3-MM">SFP-OC3-MM</option>
<option value="XENPAK-10GB-LR+">XENPAK-10GB-LR+</option>
<option value="XENPAK-10GB-SR">XENPAK-10GB-SR</option>
</select> 
```

m 通过 ajax 调用通过 GET 将选定的值传递给我的 send.php，即即时调用 send.php?pid=value 。但是当我选择“XENPAK-10GB-LR+”选项时，它只作为“XENPAK-10GB-LR”传递，并且 + 符号不存在，因为我的数据库查询出错了。有人可以帮忙解决这个问题吗...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T06:55:53.777

`+`URL 中的一个特殊字符表示一个空格。在将值连接到 URL 之前，您需要对值进行[URL 编码](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T06:56:54.057

当您将`escape`javascript 中的参数使用函数传递给 url 编码时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T06:56:35.650

您的参数需要进行 urlencoded，+ 是 URL 中的空格符号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T07:05:53.370

使用以下代码对 URL 进行编码

```
var myURL = encodeURIComponent(yourURL); 
```

# php - SQL 错误：语法错误，意外 '' (T_ENCAPSED_AND_WHITESPACE)

> ID：11878194
> 
> 赞同：0
> 
> 时间：2012-08-09T06:54:08.357
> 
> 标签：php, sql, database

请看一下下面提到的SQL：

```
$sql ="INSERT INTO
    demo_participant
    (name, meeting_id_id, password, user_view__url, key, contact_no, email)
    VALUES
    ('$part_name', (SELECT id FROM demo_meeting WHERE meetingID = '$mtngid'),
    '$attendee_password', '$join_url', $getit_part['data'], '$pr_mobile',
    '$pr_email')"; 
```

我的问题是上述语句在没有键及其相关值的情况下工作正常`$getit_part['data']`

但是每当我尝试存储键值时，我都会收到错误消息，即：

> **解析错误：语法错误，意外'' (T_ENCAPSED_AND_WHITESPACE)，在第****86**行的**/opt/lampp/htdocs/UI/user/joinmeeting.php**中需要标识符 (T_STRING) 或变量 (T_VARIABLE) 或数字 (T_NUM_STRING)

 **当我将 的值存储`$getit_part['data']`在另一个变量中`$key` 时，我得到：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'key,contact_no,email) VALUES('Rohitn',(SELECT id FROM demo_meeting WHERE '附近使用正确的语法

我知道我在做一些语法错误但无法调试它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T06:57:53.947

`key`是 MySQL 中的保留字。用反引号逃脱它

```
`key` 
```

而且你不能结合`select`and `values`。尝试

```
INSERT INTO demo_participant(name, 
                             meeting_id_id, 
                             password, 
                             user_view__url, 
                             `key`, 
                             contact_no,
                             email)
SELECT '$part_name', 
       id, 
       '$attendee_password',
       '$join_url',
       '$getit_part['data']',
       '$pr_mobile',
       '$pr_email'
FROM demo_meeting
WHERE meetingID = '$mtngid' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:57:50.797

用花括号封装你的数组：

```
$sql ="INSERT INTO
    demo_participant
    (name, meeting_id_id, password, user_view__url, key, contact_no, email)
    VALUES
    ('$part_name', (SELECT id FROM demo_meeting WHERE meetingID = '$mtngid'),
    '$attendee_password', '$join_url', {$getit_part['data']}, '$pr_mobile',
    '$pr_email')"; 
```

请参阅[PHP 数组文档](http://php.net/manual/en/function.array.php)中的示例 #4 ：

> 与在 Perl 中一样，您可以从双引号内的数组中访问一个值。但是，使用 PHP，您需要将数组括在大括号之间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:07:46.420

第一个错误：您只能将简单的变量`$key`放入 SQL 代码中。像数组引用 ( `$getit_part['data']`) 这样的所有表达式都需要包含在`{}`PHP 中，以评估结果并将结果作为变量替换到 SQL 中。

第二个错误：SQL 语法不允许将子查询放入`VALUES`语句的子句中`INSERT`。尝试使用`INSERT ... SELECT ...`语法，例如：

```
INSERT INTO dest (col1, col2)
SELECT val1, (SELECT val2 FROM table2 WHERE ...) 
```

请注意，没有`FROM`子句。您不必添加它。它总是以这种方式选择单行。**

# matlab - 在 Matlab 中拟合分布函数

> ID：11878199
> 
> 赞同：0
> 
> 时间：2012-08-09T06:54:38.253
> 
> 标签：matlab, statistics, probability

我正在尝试使用统计工具箱来拟合分布函数。就我而言，我已经有了 PMF（概率质量函数，存储在一个数组中）并且想要拟合它。但显然，工具箱只能获取样本向量，从中创建直方图。

有没有办法将它传递给 PMF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:38:40.543

统计工具箱中有[许多函数](http://www.mathworks.com/help/toolbox/stats/bq_w_hm.html#bq_w_ie-12)可以将一堆数据拟合到一个分布中。假设您想使数据（在数组中）适合正态分布，您可以这样使用`normfit`（示例取自[normfit doc](http://www.mathworks.com/help/toolbox/stats/normfit.html)）

```
data = normrnd(10,2,100,2);
[mu,sigma,muci,sigmaci] = normfit(data) 
```

如果以上内容不能回答您的问题，您能否附上一段代码，简洁地描述您正在尝试做的事情？

# c# - WCF：WS-Dual 绑定或 basichttp 绑定到块中的流文件

> ID：11878201
> 
> 赞同：0
> 
> 时间：2012-08-09T06:54:48.957
> 
> 标签：c#, wcf, chunked, wcf-callbacks

我目前正在开发服务，其中客户端通过发送带有消息的 xml 文件与服务器进行通信。为了提高消息传递的可靠性（客户端将使用低质量的有限带宽切换移动互联网），我将这些消息分成 64 或 128 Kb 大小的较小部分，并在 BasicHttp 绑定中使用 transfer="streamed" 发送它们。

现在，我有一个问题：服务器应该向客户端报告，如果他成功接收到一个块，那么在 fe 5 个块传输失败后，传输过程将被取消并推迟到稍后尝试，并跟踪哪个收到了块，哪些没有。

我正在考虑使用回调机制与客户端通信，因此服务器将调用回调方法 ChunkReceived 在它的 [OperationContract] 中，当它将块保存到服务器端的文件中，但是，如果我错了，请纠正我，但是回调仅适用于 WS Dual http 绑定，在 basichttp 绑定中不受支持。但 WS Dual 绑定不支持流式传输。

那么我可以切换到 WS Dual 绑定并使用 transfer="buffered" （考虑到块大小相对较小） - 这不会损害传输的可靠性吗？或者也许我可以通过基本的http绑定以某种方式与客户端通信，也许通过返回某种响应消息，即

```
 [OperationContract]
    ServerResponse SendChunk (Chunk chunk); 
```

ServerResponse 将保存一些枚举或布尔标志来告诉客户端 SendChunk 操作是否正常。但是我将不得不在客户端和服务器端都保留某种数组来跟踪所有块的状态。我只是不确定在那里使用的最佳模式是什么。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:37:52.277

我们在我们的应用程序中遇到了类似的问题 - 低带宽和许多断开/超时。我们有较小的消息，因此我们没有拆分它们，但该解决方案也应该适用于块。我们已经在客户端创建了中继器。这被证明是可靠的解决方案 - 它适用于连接速度慢、连接不良的客户端（如 GPRS - 经常在移动中断开连接）。如果服务器由于高负载而变慢，客户端也不会出现超时错误。这是修改后的版本，带有块

客户：

> ```
> 1\. Client sends Chunk#1, with pretty short timeout time
> 
> 2\. Is there OK response:
> 
>    2A. Yes - proceed to next chunk
> 
>        3\. Was that last chunk?
> 
>           3A. Yes - process reponse
> 
>           3B. No - send next chunk
> 
>    2B. No - repeat current chunk 
> ```

服务器：

> 1.  接受请求
>     
>     
> 2.  块是否重复
>     
>     
>     
>     2A。是的：
>     
>     
>     1.  是最终块：
>         
>         
>         
>         3A。是 - 检查响应是否准备好，否则等待（这可能会让客户重复）
>         
>         
>         
>         3B。否 - 发送 Ok 回复
>         
>         
>     
>     2B。不：
>     
>     
>     1.  将请求保存在某处（列表、字典等）
>         
>         
>     2.  这是最后一块：
>         
>         
>         
>         5A。是 - 处理消息，保存响应，并将其发送给客户端
>         
>         
>         
>         5B。否 - 发送确定消息

# iphone - 如何检查我是否在 tabbaritem 中该视图控制器的根视图中？

> ID：11878214
> 
> 赞同：0
> 
> 时间：2012-08-09T06:55:25.630
> 
> 标签：iphone, ios, ipad

我有一个 iPhone 应用程序，我正在其中进行测试`applicationDidBecomeActive:`，如果选定的视图控制器的根视图在那里，那么我想调用一个 web 服务，否则当我从后台到前台时，我正在获取堆栈并检查它。但是现在即使我在 rootview 中，也不会调用 web 服务。有人可以帮我吗？

这是我的代码片段：

```
- (void)applicationDidBecomeActive:(UIApplication *)application{
    NSLog(@"applicationWilssnd");
    if(tabBarController.selectedIndex==0)
    {

        NSArray *mycontrollers = self.tabBarController.viewControllers;
        NSLog(@"%@",mycontrollers);
        ///if([mycontrollers objectAtIndex:0]!=)
        ///[[mycontrollers objectAtIndex:0] popToRootViewControllerAnimated:NO];
        PinBoardViewController *pinvc=(PinBoardViewController*)[[mycontrollers objectAtIndex:0]topViewController] ;
        if([mycontrollers objectAtIndex:0]!=pinvc)
        {

        }
        else
        {
        [pinvc merchantnews];
        }
        mycontrollers = nil; 

      tabBarController.selectedIndex = 0;  

    }

} 
```

`这里没有调用merchantnews。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:15:03.500

```
 PinBoardViewController *pinvc=(PinBoardViewController*)[[mycontrollers objectAtIndex:0]topViewController] ;
    if([mycontrollers objectAtIndex:0]!=pinvc) 
```

而不是这个，试试这个

```
 PinBoardViewController *pinvc=(PinBoardViewController*)[[mycontrollers objectAtIndex:0]topViewController] ;
   if(pinvc isKindOfClass:[PinBoardViewController class]){
    // Do ur stuff
   } 
```

# matrix - numpy - 从矩阵索引计算值

> ID：11878216
> 
> 赞同：1
> 
> 时间：2012-08-09T06:55:38.800
> 
> 标签：matrix, numpy

我需要从矩阵（例如 named ）创建一个新`(n*m) x 4`矩阵（例如named ），但出于速度原因我不想使用嵌套循环。在这里我将如何使用嵌套循环：`b``n x m``a`

```
for j in xrange(1,m+1):
    for i in xrange(1,n+1):
        index = (j-1)*n+i
        b[index,1] = a[i,j]
        b[index,2] = index
        b[index,3] = s1*i+s2*j+s3
        b[index,4] = s4*i+s5*j+s6 
```

因此，问题是如何创建一个新矩阵，其值源自原始矩阵索引？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:23:35.837

如果你可以使用 numpy，你可以试试

```
import numpy as np
# Create an empty array
b = np.empty((np.multiply(*a.shape), 4), dtype=a.dtype)
# Get two (nxm) of indices
(irows, icols) = np.indices(a)
# Fill the b array
b[...,0] = a.flat
b[...,1] = np.arange(a.size)
b[...,2] = (s1*irows + s2*icols + s3).flat
b[...,3] = (s4*irows + s5*icols + s6).flat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:30:07.420

对于那些有类似问题的人，一些小的更正（不能作为评论发布：/）：

```
import numpy as np
# Create an empty array
b = np.empty((a.size, 4), dtype=a.dtype)
# Get two (nxm) of indices (starting from 1)
(irows, icols) = np.indices(a.shape) + 1
# Fill the b array
b[...,0] = a.flat
b[...,1] = np.arange(a.size) + 1 
b[...,2] = (s1*irows + s2*icols + s3).flat
b[...,3] = (s4*irows + s5*icols + s6).flat 
```

# c# - 将项目添加到 WPF 中的组合框

> ID：11878217
> 
> 赞同：39
> 
> 时间：2012-08-09T06:55:46.793
> 
> 标签：c#, wpf

当我在 WPF 窗口中添加了一个组合框后，如何向组合框添加项目？Int 设计或 NameOfWindow.xaml.cs 文件中的 XAML 代码？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-09T07:55:54.320

**案例 1 - 您没有数据源：**

您可以`ComboBox`按如下方式填充静态值 -

1.  来自 XAML：

```
<ComboBox Height="23" Name="comboBox1" Width="120">
    <ComboBoxItem Content="Alice"/>
    <ComboBoxItem Content="Bob"/>
    <ComboBoxItem Content="Charlie"/>
</ComboBox> 
```

2.  来自 CodeBehind - 1：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    comboBox1.Items.Add("Alice");
    comboBox1.Items.Add("Bob");
    comboBox1.Items.Add("Charlie");
} 
```

3.  来自 CodeBehind - 2：

```
// insert item at specified index of populated ComboBox
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    comboBox1.Items.Insert(2, "Alice");
    comboBox1.Items.Insert(5, "Bob");
    comboBox1.Items.Insert(8, "Charlie");
} 
```

**案例 2 - 您有一个数据源，并且项目永远不会更改：**

您可以使用数据源来填充`ComboBox`. *任何* `IEnumerable`类型都可以用作数据源。你可以 -

1.  `ItemsSource`将属性绑定`XAML`到数据源，例如 -

```
<!-- MyDataSource is an IEnumerable type property in ViewModel -->
<ComboBox Height="23" Width="120" ItemsSource="{Binding MyDataSource}" /> 
```

2.  将数据源分配给`ItemsSource`代码隐藏中的属性，例如 -

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    comboBox1.ItemsSource = new List<string> { "Alice", "Bob", "Charlie" };
} 
```

**案例 3 - 您有一个数据源，并且项目可能会更改**

1.  您***应该***使用 an`ObservableCollection<T>`作为数据源
2.  您***应该***`ItemsSource`将属性绑定`XAML`到数据源（如上所示）
3.  您***可以***在代码隐藏中将数据源分配给`ItemsSource`属性（如上所示）

使用 an`ObservableCollection<T>`可确保无论何时将项目添加到数据源或从数据源中删除，更改都会立即反映在 UI 上。如何填充`ObservableCollection<T>`.

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-08-09T07:07:44.120

最好构建[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)并利用它

```
public ObservableCollection<string> list = new ObservableCollection<string>();
list.Add("a");
list.Add("b");
list.Add("c");
this.cbx.ItemsSource = list; 
```

cbx 是组合框名称

另请阅读：[List、ObservableCollection 和 INotifyPropertyChanged 之间的区别](http://social.msdn.microsoft.com/Forums/en/wpf/thread/8e9ef79d-e6cd-4cca-9934-24410dea522e)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-09T06:57:56.987

用这个

```
string[] str = new string[] {"Foo", "Bar"};

myComboBox.ItemsSource = str;
myComboBox.SelectedIndex = 0; 
```

或者

```
foreach (string s in str)
    myComboBox.Items.Add(s);

myComboBox.SelectedIndex = 0; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-09T06:59:01.730

您可以从 XAML 或 .cs 填充它。用数据填充控件的方法很少。您最好阅读有关 WPF 技术的更多信息，它允许根据您的需要以多种方式做很多事情。根据您的项目需求选择方法更为重要。你可以从[这里](http://www.c-sharpcorner.com/uploadfile/mahesh/wpf-combobox/)开始。这是一篇关于创建组合框并用一些数据填充它的简单文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-19T04:14:57.980

有很多方法可以执行此任务。这是一个简单的：

```
<Window x:Class="WPF_Demo1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     x:Name="TestWindow"
    Title="MainWindow" Height="500" Width="773">

<DockPanel LastChildFill="False">
    <StackPanel DockPanel.Dock="Top" Background="Red" Margin="2">
        <StackPanel Orientation="Horizontal" x:Name="spTopNav">
            <ComboBox x:Name="cboBox1" MinWidth="120"> <!-- Notice we have used x:Name to identify the object that we want to operate upon.-->
            <!--
                <ComboBoxItem Content="X"/>
                <ComboBoxItem Content="Y"/>
                <ComboBoxItem Content="Z"/>
            -->
            </ComboBox>
        </StackPanel>
    </StackPanel>
    <StackPanel DockPanel.Dock="Bottom" Background="Orange" Margin="2">
        <StackPanel Orientation="Horizontal" x:Name="spBottomNav">
        </StackPanel>
        <TextBlock Height="30" Foreground="White">Left Docked StackPanel 2</TextBlock>
    </StackPanel>
    <StackPanel MinWidth="200" DockPanel.Dock="Left" Background="Teal" Margin="2" x:Name="StackPanelLeft">
        <TextBlock  Foreground="White">Bottom Docked StackPanel Left</TextBlock>

    </StackPanel>
    <StackPanel DockPanel.Dock="Right" Background="Yellow" MinWidth="150" Margin="2" x:Name="StackPanelRight"></StackPanel>
    <Button Content="Button" Height="410" VerticalAlignment="Top" Width="75" x:Name="myButton" Click="myButton_Click"/>

</DockPanel>

</Window> 
```

接下来，我们有 C# 代码：

```
 private void myButton_Click(object sender, RoutedEventArgs e)
    {
        ComboBoxItem cboBoxItem = new ComboBoxItem(); // Create example instance of our desired type.
        Type type1 = cboBoxItem.GetType();
        object cboBoxItemInstance = Activator.CreateInstance(type1); // Construct an instance of that type.
        for (int i = 0; i < 12; i++)
        {
            string newName = "stringExample" + i.ToString();
           // Generate the objects from our list of strings.
            ComboBoxItem item = this.CreateComboBoxItem((ComboBoxItem)cboBoxItemInstance, "nameExample_" + newName, newName);
            cboBox1.Items.Add(item); // Add each newly constructed item to our NAMED combobox.
        }
    }
    private ComboBoxItem CreateComboBoxItem(ComboBoxItem myCbo, string content, string name)
    {
        Type type1 = myCbo.GetType();
        ComboBoxItem instance = (ComboBoxItem)Activator.CreateInstance(type1);
        // Here, we're using reflection to get and set the properties of the type.
        PropertyInfo Content = instance.GetType().GetProperty("Content", BindingFlags.Public | BindingFlags.Instance);
        PropertyInfo Name = instance.GetType().GetProperty("Name", BindingFlags.Public | BindingFlags.Instance);
        this.SetProperty<ComboBoxItem, String>(Content, instance, content);
        this.SetProperty<ComboBoxItem, String>(Name, instance, name);

        return instance;
        //PropertyInfo prop = type.GetProperties(rb1);
    } 
```

注意：这是使用反射。如果您想了解更多关于反射的基础知识以及为什么要使用它，这是一篇很棒的介绍性文章：

*   [.NET 中的反射简介](https://www.codeproject.com/Articles/206412/Reflection-An-Introduction-to-Reflection-in-NE)

如果您想详细了解*如何*将反射与 WPF 结合使用，请参阅以下资源：

*   [WPF Rockstars 的反思](https://loosexaml.wordpress.com/reflection-for-wpf-rockstars/)
*   [使用反射的力量来创建和操作托管对象](https://blogs.msdn.microsoft.com/calvin_hsia/2015/12/30/use-the-power-of-reflection-to-create-and-manipulate-managed-objects/)

如果你想*大幅*提升反射的性能，最好使用 IL 来做到这一点，如下所示：

*   [使用 IL 的 ActivatorCreateInstance 方法的快速版本](http://mironabramson.com/blog/post/2008/08/Fast-version-of-the-ActivatorCreateInstance-method-using-IL.aspx)

*   [快速动态属性和字段访问器](https://www.codeproject.com/Articles/14560/Fast-Dynamic-Property-Field-Accessors)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-13T04:19:46.263

我认为`comboBox1.Items.Add("X");`会添加`string`到 ComboBox，而不是`ComboBoxItem`.

正确的解决方案是

```
ComboBoxItem item = new ComboBoxItem();
item.Content = "A";
comboBox1.Items.Add(item); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-08-18T08:20:38.220

使用 OleDBConnection -> 连接到 Oracle

```
OleDbConnection con = new OleDbConnection();
            con.ConnectionString = "Provider=MSDAORA;Data Source=oracle;Persist Security Info=True;User ID=system;Password=**********;Unicode=True";

            OleDbCommand comd1 = new OleDbCommand("select name from table", con);
            OleDbDataReader DR = comd1.ExecuteReader();
            while (DR.Read())
            {
                comboBox_delete.Items.Add(DR[0]);
            }
            con.Close(); 
```

就这样 ：）

# jquery-ui - 如何在手风琴内部使用回调函数？

> ID：11878222
> 
> 赞同：0
> 
> 时间：2012-08-09T06:56:06.000
> 
> 标签：jquery-ui, jquery

需要更多说明::

1.  我在手风琴顶部有一个表格数据..

2.  一旦我将其展开，我想在其本身中显示表格内容

3.  折叠时我想隐藏表格内容

想在手风琴内部使用回调函数。你能修改一下并给我解决方案吗

```
$("#accordion").accordion({ 
    collapsible: true                   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:03:00.773

您可以使用该方法的[`change`](http://jqueryui.com/demos/accordion/#event-change)事件`accordion`：

```
$("#accordion").accordion({
   collapsible: true,              
   change: function(event, ui) { 
      // do something here
  }
}); 
```

或者：

```
$("#accordion").bind("accordionchange", function(event, ui) {
      // do something here
}); 
```

# php - Ajax+PHP 表单需要点击 2 次才能提交

> ID：11878225
> 
> 赞同：0
> 
> 时间：2012-08-09T06:56:21.420
> 
> 标签：php, javascript, ajax, forms, submit

这是我的代码：

```
<script type="text/javascript">
            jQuery(document).ready(function(){
                // binds form submission and fields to the validation engine
                jQuery("#formIDRegister").validationEngine(); //--> this is the jQuery Validation Engine. The code below has no relation with it.
            });

function func(){
    $(document).ready(function() {
        $(document).ajaxStop($.unblockUI); 
    $("#formIDRegister").submit(function() {
    $("input[type=submit]").attr("disabled", "disabled");
    $.blockUI({message: '<h1><img src="./images/misc/ajax-loader.gif" /> Espere um momento...</h1>'}); 
    var trueName = $("#trueName").val();
    var trueSurname = $("#trueSurname").val();
    var phoneHomeCountryId = $("#phoneHomeCountryId").val();
    var phoneHomeCityId = $("#phoneHomeCityId").val();
    var phoneHome = $("#phoneHome").val();
    var phoneCellCountryId = $("#phoneCellCountryId").val();
    var phoneCellCityId = $("#phoneCellCityId").val();
    var phoneCell = $("#phoneCell").val();
    var userCpf = $("#userCpf").val();
    var userBirth = $("#userBirth").val();
    var userAddressCountry = $("#userAddressCountry").val();
    var userAddressState = $("#userAddressState").val();
    var userAddressCity = $("#userAddressCity").val();
    var userAddressStreet = $("#userAddressStreet").val();
    var userAddressNumber = $("#userAddressNumber").val();
    var userAddressCompl = $("#userAddressCompl").val();
    var userAddressDistrict = $("#userAddressDistrict").val();
    $.post('./cadastro/processa/identificacao', {trueName:trueName, trueSurname:trueSurname, phoneHome:phoneHome, phoneHomeCountryId:phoneHomeCountryId, phoneHomeCityId:phoneHomeCityId, phoneCell:phoneCell,phoneCellCountryId:phoneCellCountryId, phoneCellCityId:phoneCellCityId, userCpf:userCpf, userBirth:userBirth, userAddressCountry:userAddressCountry, userAddressState:userAddressState, userAddressCity:userAddressCity, userAddressStreet:userAddressStreet, userAddressNumber:userAddressNumber, userAddressCompl:userAddressCompl, userAddressDistrict:userAddressDistrict,  }, 
    function(resposta) {
        $("#ErrorBarContent1").hide();
        $("#ErrorBarContent2").hide();
        $("#ErrorBarContent3").hide();
        $("input[type=submit]").removeAttr("disabled");
            if (resposta != false) {
                if(resposta == "11"){
                $("#ErrorBarContent1").show();
                }
                if(resposta == "12"){
                $("#ErrorBarContent2").show();
                }
                if(resposta == "1"){
                $("#ErrorBarContent3").show();
                }
            } else {
            location.href ="cadastro/caracteristicas-gerais/";
            }
        });
        return false;
    });
});
}
    </script> 
```

这是HTML

```
<form id="formIDRegister" class="" method="post" action="javascript:func()" accept-charset="UTF-8">
                                <div id="ErrorBarContent1" onclick="$(this).fadeOut('slow');" style="display:none;"><div class="yellowErrorBar">Todos os campos devem ser preenchidos</div></div>
                                <div id="ErrorBarContent2" onclick="$(this).fadeOut('slow');" style="display:none;"><div class="yellowErrorBar">Cpf já está sendo utilizado por outro usuário.</div></div>
                                <div id="ErrorBarContent3" onclick="$(this).fadeOut('slow');" style="display:none;"><div class="redErrorBar">Opps, ocorreu um erro ao atualizar seu cadastro, nossa equipe já foi avisada. Por favor, tente novamente mais tarde.</div></div>
                    <!-- name -->
                    <div class="rowOff" id="name">

                        <p><i>1.</i> Identificação</p>

                            <label>
                                <span class="trueName">Seu(s) nome(s)</span><br />
                                <input value="" class="validate[required] text-input" type="text" name="trueName" id="trueName" />
                            </label>    

                            <label>
                                <span class="trueSurname">e seu(s) sobrenome(s)</span><br />                
                                <input value="" class="validate[required] text-input" type="text" name="trueSurname" id="trueSurname" />
                            </label>

                    </div>

                    <!-- phone -->
                    <div class="rowOn" id="phone"> 

                        <p><i>2.</i> Telefones para contato</p>

                            <div class="phone1">
                                <span class="phoneHome">Telefone de contato 1</span><br />
                                <input onmouseover="tooltip.show('Insira o código de seu país');" onmouseout="tooltip.hide();" value="" class="validate[required,custom[onlyNumberSp]] text-input" type="text" name="phoneHomeCountryId" id="phoneHomeCountryId" maxlength="3" /> 
                                <input onmouseover="tooltip.show('Insira o código de área');" onmouseout="tooltip.hide();" value="" class="validate[required,custom[onlyNumberSp]] text-input" type="text" name="phoneHomeCityId" id="phoneHomeCityId" maxlength="2" /> 
                                <input value="" class="validate[required,custom[onlyNumberSp]] text-input" type="text" name="phoneHome" id="phoneHome" /> 
                            </div>

                            <br />
                            <br />
                            <br />

                            <div class="phone2">
                                <span class="phoneCell">Telefone de contato 2</span><br />              
                                <input onmouseover="tooltip.show('Insira o código de seu país');" onmouseout="tooltip.hide();" value="" class="validate[required,custom[onlyNumberSp]] text-input" type="text" name="phoneCellCountryId" id="phoneCellCountryId" maxlength="3" /> 
                                <input onmouseover="tooltip.show('Insira o código de área');" onmouseout="tooltip.hide();" value="" class="validate[required,custom[onlyNumberSp]] text-input" type="text" name="phoneCellCityId" id="phoneCellCityId" maxlength="2" /> 
                                <input value="" class="validate[required,custom[onlyNumberSp]] text-input" type="text" name="phoneCell" id="phoneCell" /> 
                            </div>

                        <div id="divPhoneInfo">Seu número de telefone não será divulgado. Garantimos o sigilo.</div>

                    </div>

                    <!-- cpf -->
                    <div class="rowOff" id="cpf">

                        <p><i>3.</i> CPF</p>

                            <label>
                                <span class="userCpf">Insira seu CPF </span><br />
                                <input value="" class="validate[required] text-input" type="text" name="userCpf" id="userCpf" /> <span class="hotspot" onmouseover="tooltip.show('Insira o número de seu CPF de 11 dígitos');" onmouseout="tooltip.hide();"><img src="./images/userInterface/info.png" /></span>
                            </label>

                        <div id="divCpfInfo">Insira um número de CPF válido. O uso de números falsos implica no descumprimento dos <a href="">Termos de Utilização</a>, e estará sujeito às penas da Lei.</div>

                    </div>

                    <!-- birth -->
                    <div class="rowOn" id="birth">

                        <p><i>4.</i> Data de nascimento</p>

                            <label>
                                <span class="userBirth">Insira sua data de nascimento </span><br />
                                <input value="" class="validate[required] text-input" type="text" name="userBirth" id="userBirth" /> <span class="hotspot" onmouseover="tooltip.show('Você PRECISA ser maior de 18 anos para se cadastrar! O formato é dd/mm/aaaa');" onmouseout="tooltip.hide();"><img src="./images/userInterface/info.png" /></span>
                            </label>                                    

                    </div>

                    <!-- address -->
                    <div class="rowOff" id="adress">
                        <p><i>5.</i> Endereço</p>
                            <label id="pais">
                                <span class="userAddressCountry">País</span><br />
                                <select name="userAddressCountry" id="userAddressCountry" class="validate[required]" onchange="buscaEstados(this.value)" /></select>    
                            </label >   

                            <label id="estado" style="display: none">
                                <span class="userAddressState">Estado</span><br />
                                <select value="" class="validate[required] text-input" type="text" name="userAddressState" id="userAddressState" onchange="buscaCidades(this.value)"/><option value="">Primeiramente, selecione o pais</option></select>
                            </label>                    

                            <label id="cidade" style="display: none">
                                <span class="userAddressCity">Cidade</span><br />
                                <select value="" class="validate[required] text-input" type="text" name="userAddressCity" id="userAddressCity" readonly="readonly" /><option value="">Primeiramente, selecione o pais</option></select>
                            </label>
                        <br />
                        <br />
                        <br />
                        <div id="endereco" style="display: none">
                            <label>
                                <span class="userAddressStreet">Escreva seu Endereço</span><br />
                                <input value="" class="validate[required] text-input" type="text" name="userAddressStreet" id="userAddressStreet" />
                            </label>
                            <label>
                                <span class="userAddressNumber">Número</span><br />
                                <input value="" class="validate[required] text-input" type="text" name="userAddressNumber" id="userAddressNumber" />
                            </label>
                            <label>
                                <span class="userAddressCompl">Complemento</span><br />
                                <input value="" class="" type="text" name="userAddressCompl" id="userAddressCompl" /> 
                            </label>
                            <label>
                                <span class="userAddressDistrict">Bairro</span><br />
                                <input value="" class="validate[required] text-input" type="text" name="userAddressDistrict" id="userAddressDistrict" /> 
                            </label>
                        </div>
                    </div>
                    <div id="divAddressInfo">Assim como os números de contato e o CPF, seu endereço estará sob total sigilo. Em seu perfil aparecerão apenas <b>País</b>, <b>Estado</b> e <b>Cidade</b></div>
                    <!-- submit -->
                    <div class="rowOn" style="margin-top: 40px; padding-top: 40px;">

                        <label style="margin-left: 170px;">
                            <input class="submit" type="submit" value="Enviar e Prosseguir" id="sendButtonRegister" />
                        </label>                            

                    </div>

                <!-- /formID4 -->
                </form> 
```

当我点击提交时，在第一次点击中，什么都没有发生（实际上，屏幕的位置到了它的中间）。表单仅在第二次单击时提交。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:03:09.660

您不应该将 $(document).ready(function() 用于函数 func()

最好使用下一个代码

```
$('#formIDRegister').submit(function(e){ 
    e.preventDefault(); 
    func();//your function 
}); 
```

您可以将此代码放入 $(document).ready 函数中，或者在您的表单之后也从表单标签中删除 action="javascript:func()" 属性

# asp.net-mvc - 无法使用重音符号对表单数据进行编码

> ID：11878226
> 
> 赞同：0
> 
> 时间：2012-08-09T06:56:23.853
> 
> 标签：asp.net-mvc, jquery-tokeninput

我有一个基本表单，要求用户在常规 html 输入控件中输入一些文本，并且我还使用 jquery-tokeninput 来允许用户从预填充列表中选择标签。

预填充列表中的一个标签恰好是单词 cafe，我从服务器获取并通过调用 mytaglist.push({id: ' `caf&#233;`', name: ' `caf&#233;`'}); 填充标签列表；

问题是当他们尝试输入像“café”这样的词作为标签时，asp.net mvc 拒绝输入说：

从客户端 (articleTags="café") 检测到具有潜在危险的 Request.Form 值。

使用萤火虫检查显示我的帖子数据类似于： UserName=neo&category=&Title= `caf%C3%A9`&Text=sometext&articleTags= `caf%26%23233%3B`&IsAgreedTerms=true

如您所见，Title 的值为 caf%C3%A9 是正确的，但 articleTags 的值为 caf%26%23233%3B，这是我没想到的。

我绝对需要确保咖啡厅（而不是一些编码值）出现在屏幕上。

如何确保我发送正确的帖子数据并且每次仍然显示咖啡？我应该改变我的服务器发送文本的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:58:30.080

通过 Html.Raw 发送数据解决了这个问题..

# c# - 用于确定其健康状况的笔记本电脑/平板电脑 BatteryCycleCount

> ID：11878230
> 
> 赞同：-1
> 
> 时间：2012-08-09T06:56:40.810
> 
> 标签：c#

请帮我获取笔记本电脑/平板电脑的“BatteryCycleCount”值。根据这个属性，我们将确定更换电池。以下是我在谷歌搜索中找到的一些 API：

```
[DllImport("setupapi.dll", SetLastError = true)]
protected static extern IntPtr SetupDiGetClassDevs(ref Guid gClass, [MarshalAs(UnmanagedType.LPStr)] string strEnumerator, IntPtr hParent, uint nFlags);

[DllImport("setupapi.dll", SetLastError = true)]
protected static extern bool SetupDiEnumDeviceInterfaces(IntPtr lpDeviceInfoSet, uint nDeviceInfoData, ref Guid gClass, uint nIndex, ref SP_DEVICE_INTERFACE_DATA oInterfaceData);

[DllImport("setupapi.dll", SetLastError = true)]
protected static extern bool SetupDiGetDeviceInterfaceDetail(IntPtr lpDeviceInfoSet, ref SP_DEVICE_INTERFACE_DATA oInterfaceData, ref SP_DEVICE_INTERFACE_DETAIL_DATA oDetailData, uint nDeviceInterfaceDetailDataSize, ref uint nRequiredSize, IntPtr lpDeviceInfoData);

[DllImport("kernel32.dll", SetLastError = true)]
protected static extern IntPtr CreateFile([MarshalAs(UnmanagedType.LPStr)] string strName, uint nAccess, uint nShareMode, IntPtr lpSecurity, uint nCreationFlags, uint nAttributes, IntPtr lpTemplate);

[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
public static extern bool DeviceIoControl([In] SafeHandle hDevice, [In] int dwIoControlCode, [In] IntPtr lpInBuffer, [In] int nInBufferSize, [Out] IntPtr lpOutBuffer, [In] int nOutBufferSize, out int lpBytesReturned, [In] IntPtr lpOverlapped); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:38:27.063

您可以请求“电池状态”类别中的性能计数器，而不是直接使用 Windows API。

编辑 ：

“电池状态”类别中的计数器是多实例：每个电池一个。在我的笔记本电脑上，我可以编写以下 C# 代码：

```
var counter = new PerformanceCounter("BatteryStatus", "RemainingCapacity", "ACPI\PNP0C0A\0_0", true);
var remainingCapacity = counter.NextValue(); 
```

您可以使用性能监视器（“perfmon”命令）查看“电池状态”类别中的所有可用计数器。

# c++ - C ++迭代一个大小未知的整数数组？

> ID：11878231
> 
> 赞同：-1
> 
> 时间：2012-08-09T06:56:43.990
> 
> 标签：c++

我有以下数组：

```
int* myArray = new int[45]; 
```

如果我想在不知道数组实际大小的情况下迭代每个元素，我需要使用`for_each`?

如果是这样，那你会怎么写`for_each`？我正在查看以下站点并阅读 for_each 但无法弄清楚如何将它们组合在一起。

[http://www.cplusplus.com/reference/algorithm/for_each/](http://www.cplusplus.com/reference/algorithm/for_each/)

* * *

**更新：**在这种情况下， A`for_each`不是一个好的选择，因为必须知道数组的大小。向量是完成此类任务的正确方法。在这种情况下，我使用数组的原因是出于学习目的。如果这是一个严肃的项目，我会转向诸如列表/向量之类的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:00:21.263

**请注意**，当问题首次发布时，有问题的数组被声明为

```
int myArray[45]; 
```

该答案针对该特定情况。

如果您有 C++11 支持，则可以使用基于范围的循环：

```
for (int& i : myArray) {
  std::cout << i << "\n";
} 
```

C++11 还提供了[std::begin](http://en.cppreference.com/w/cpp/iterator/begin)和[std::end](http://en.cppreference.com/w/cpp/iterator/end)，您可以将它们与固定大小的数组一起使用来获取迭代器：

```
std::for_each(std::begin(myArray), std::end(myArray), <func>); 
```

另一个适用于 C++03 并且您正在处理固定大小数组的选项是定义一个函数模板：

```
// taken a fixed size array by reference and loop over it
template <typename T, unsigned int N>
void array_for_each( T (&a)[N]) {

  for (unsigned int i = 0; i < N; ++i) {
    // do something with array elements
    std::cout << a[i] << " ";
  }

}

int main() {
  int a[5];
  array_for_each(a);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T07:27:59.953

如果您使用 MSVC，则可以使用“for each”。

```
for each(int i in arr) {
    cout << i << ' ';
} 
```

注意：这仅适用于声明数组的代码块。

如果没有，您还可以使用 C++11 标准中新的基于范围的 for 循环。

```
for(int i : arr) {
    cout << i << ' ';
} 
```

如果您打算使用 std::for_each：

```
for_each(arr,arr + 10,[] (int i) {
        cout << i << ' ';
}); 
```

注意：这需要知道数组的大小（在本例中为 10）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T06:59:30.483

您已经描述了一个 int 数组，而不是实现 a 的类`InputIterator`，这是 for_each 的设计目的，即使您可以使用它来迭代数组，但您需要知道数组的大小来迭代它。

如果要使用 for_each ，则需要使用`vector`,`list`或实现一个跟踪它包含的元素数量的类。IMO 更容易使用`vector`

如果您只想迭代当前数组，假设它是 0 终止：

```
for(int *value = myArray; *value != 0; ++value)
  printf("%d\n", *value); 
```

或者，您可以使用索引：

```
for(int index = 0; myArray[index] != 0; ++index)
  printf("%d\n", myArray[index]); 
```

IMO 指针方法更干净。

不过，这段代码仍然很危险，您应该跟踪单独变量中的记录数，或者使用向量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T07:06:55.227

你可以使用一个`for_each`. 在这种情况下，您已经为数组中的 45 个元素分配了空间，但由于它是 NULL，如果您尝试执行任何操作，您可能会遇到段错误。您要么需要保存数组的值，要么使用类似的东西`sizeof(myArray)/sizeof(myArray[0])`（它有自己的问题）。

无论如何，在`for_each`这里，如果我们实际上有 45 个元素：

```
 std::for_each(myArray, myArray + 45, <func>); 
```

无论如何，这是使用向量的部分原因：`.begin()`并`.end()`通过使用不正确的索引来减少错误。

# entity-framework - 如何在 EF 4.1\. 中限制本地实体集合的增长？

> ID：11878240
> 
> 赞同：0
> 
> 时间：2012-08-09T06:57:31.067
> 
> 标签：entity-framework, entity-framework-4.1, entity

* * *

嗨，我编写了一个解析器，它使用 EF 4.1 解析代码文件并将语言构造（属性、方法、事件、函数、子例程）保存到 db。在整个解析过程中只有一个 DBContext 实例。

解析期间的每个文件都会创建各种实体对象，并在解析该文件后保存 dbcontext。但是，现在即使在保存之后，如果我们检查任何实体的本地集合，它仍然会显示内存中的对象，例如：DbContext.EntityName.Local

因此，在解析了几个文件之后，内存中的本地实体集合不断增长，消耗了大量的内存，导致整个过程挂起。

有没有办法在不调用 dispose() 的情况下清除本地实体集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:56:43.933

由于这个原因，上下文应该是短暂的。

`Detach`保存实体后，您始终可以使用它。

# node.js - 将密码保护的私钥与 crypto.createSign 一起使用

> ID：11878243
> 
> 赞同：9
> 
> 时间：2012-08-09T06:57:42.637
> 
> 标签：node.js, cryptography, openssl

我正在尝试使用 node.js 加密 API 和受密码保护的私钥来签名和验证消息，这让我得到了这个：

```
> var sig = crypto.createSign('RSA-SHA256').update('psst').sign(pk,'hex');
Enter PEM pass phrase: 
```

并且节点此时刚刚锁定。我似乎找不到以编程方式传递密码的选项。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-03T08:56:29.580

## 更新：我在核心中修复了这个

我对此的修复刚刚[登陆 core](https://github.com/joyent/node/commit/f755ecf)，~~它还没有正式发布，但是当它发布时，~~你可以像这样使用它：

```
var sig = crypto.createSign('RSA-SHA256').update('psst').sign({
  key: pk,
  passphrase: 'password'
}, 'hex'); 
```

~~将在此版本发布后更新。~~登陆 v0.11.8 版本。

## 原答案：

这是一个可行的解决方案，您可以在应用启动时解密私钥，然后正常使用它，例如：

```
var  childProcess = require('child_process'),
  crypto = require('crypto');

var pk;

var sign = function () {
  var sig = crypto.createSign('RSA-SHA256').update('psst').sign(pk,'hex');
  console.log(sig);
};

childProcess.exec('openssl rsa -in /path/to/private_key -passin pass:your_password', {},
    function (err, stdout, stderr) {
  if (err) throw err;
  pk = stdout; // Save in memory for later use
  sign();
}); 
```

# c# - StreamSocket 在地铁中读取两次

> ID：11878252
> 
> 赞同：0
> 
> 时间：2012-08-09T06:57:58.893
> 
> 标签：c#, microsoft-metro, datareader

我正在连接邮件服务器。但我只得到 TCP 连接成功响应。我以为发送数据完成了。如何获得响应？

这是我的代码：

```
private async void Connect(string hostName,string port)
{
  StreamSocket ImapSer = new StreamSocket();
  await ImapSer.ConnectAsync(new HostName(hostName),port);

  string str="A001 login xxx ***";
  // Byte[] flag = new Byte[1024]; 
  // flag=System.Text.Encoding.Unicode.GetBytes(str);

  DataReader sr = new DataReader(ImapSer.InputStream);

  sr.InputStreamOptions = InputStreamOptions.Partial;

  await sr.LoadAsync(1024);
  string data = sr.ReadString(sr.UnconsumedBufferLength);
  txtblk1.Text = data;

  DataWriter writer = new DataWriter(ImapSer.OutputStream);
  writer.WriteString(str);
  await writer.StoreAsync();

  // writer.WriteString(str);
  // await writer.StoreAsync();

  DataReader sr2 = new DataReader(ImapSer.InputStream);
  sr2.InputStreamOptions = InputStreamOptions.Partial;

  await sr2.LoadAsync(1024);
  string data2 = sr2.ReadString(sr2.UnconsumedBufferLength);
  txtblk2.Text = data2;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:16:09.637

只使用一个`DataReader`：

```
DataReader sr = new DataReader(ImapSer.InputStream);
sr.InputStreamOptions = InputStreamOptions.Partial;

await sr.LoadAsync(1024);
string data = sr.ReadString(sr.UnconsumedBufferLength);
txtblk1.Text = data;

DataWriter writer = new DataWriter(ImapSer.OutputStream);
writer.WriteString(str);
await writer.StoreAsync();

await sr.LoadAsync(1024);
string data2 = sr.ReadString(sr.UnconsumedBufferLength);
txtblk2.Text = data2; 
```

# java - 在 Android 屏幕的上半部分用图像显示当前位置

> ID：11878256
> 
> 赞同：2
> 
> 时间：2012-08-09T06:58:13.103
> 
> 标签：java, android, google-maps, android-mapview, locationmanager

在 Android 屏幕的上半部分，我正在显示 Google 地图，在 Android 屏幕的下半部分，我正在显示 TextBox。

问题陈述-

由于目前我在. `top half of the Android Screen`_ 所以这里的问题是——`Top Half of the Android Screen``Current Location``current_user.png``drawable folder`

1.  在 Android 屏幕的上半部分显示`Current Location`图片。`current_user.png`

下面是我用来在 Android 屏幕上半部分显示当前位置的 Java 代码。但这给了我例外，我的应用程序每次都被强制关闭。我在这里做错了什么吗？

```
public class MainActivity extends MapActivity {    
public static final String TAG = "GoogleMapsActivity";
private MapView mapView;
private LocationManager locationManager;
Geocoder geocoder;
Location location;
LocationListener locationListener;
CountDownTimer locationtimer;
MapController mapController;
MapOverlay mapOverlay = new MapOverlay();

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_main);
    initComponents();
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(true);
    mapController = mapView.getController();
    mapController.setZoom(16);
    locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    if (locationManager == null) {
        Toast.makeText(getApplicationContext(),
                "Location Manager Not Available", Toast.LENGTH_SHORT)
                .show();
        return;
    }
    location = locationManager
    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
    if (location == null)
        location = locationManager
        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
    if (location != null) {
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        Toast.makeText(getApplicationContext(),
                "Location Are" + lat + ":" + lng, Toast.LENGTH_SHORT)
                .show();
        GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
        mapController.animateTo(point, new Message());
        mapOverlay.setPointToDraw(point);
        List<Overlay> listOfOverlays = mapView.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);
    }
    locationListener = new LocationListener() {
        @Override
        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        }

        @Override
        public void onProviderEnabled(String arg0) {
        }

        @Override
        public void onProviderDisabled(String arg0) {
        }

        @Override
        public void onLocationChanged(Location l) {
            location = l;
            locationManager.removeUpdates(this);
            if (l.getLatitude() == 0 || l.getLongitude() == 0) {
            } else {
                double lat = l.getLatitude();
                double lng = l.getLongitude();
                Toast.makeText(getApplicationContext(),
                        "Location Are" + lat + ":" + lng,
                        Toast.LENGTH_SHORT).show();
            }
        }
    };
    if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 1000, 10f, locationListener);
    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 1000, 10f, locationListener);
    locationtimer = new CountDownTimer(30000, 5000) {
        @Override
        public void onTick(long millisUntilFinished) {
            if (location != null)
                locationtimer.cancel();
        }

        @Override
        public void onFinish() {
            if (location == null) {
            }
        }
    };
    locationtimer.start();
}

public MapView getMapView() {
    return this.mapView;
}

private void initComponents() {
    mapView = (MapView) findViewById(R.id.mapView);
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

class MapOverlay extends Overlay {
    private GeoPoint pointToDraw;

    public void setPointToDraw(GeoPoint point) {
        pointToDraw = point;
    }

    public GeoPoint getPointToDraw() {
        return pointToDraw;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        super.draw(canvas, mapView, shadow);

        Point screenPts = new Point();
        mapView.getProjection().toPixels(pointToDraw, screenPts);

        Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                R.drawable.current_user);
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 24, null);
        return true;
    }
} 
```

}

下面是我的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:orientation="vertical" > 

    <com.google.android.maps.MapView 
        android:id="@+id/mapView" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:layout_weight="1" 
        android:apiKey="0vAX8Xe9xjo5gkFNEEIH7KdHkNZNJWNnsjUPKkQ" 
        android:clickable="true" 
        android:enabled="true" /> 

    <TextView 
        android:id="@+id/textView" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:layout_weight="1" 
        android:text="TextView" /> 

</LinearLayout> 
```

我得到的例外 -

```
java.lang.RuntimeException: Unable to start activity 
ComponentInfo{com.example.circlemapandroid/com.example.circlemapandroid.MainActivity}: 
java.lang.IllegalArgumentException: requested provider network doesn't exisit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:13:01.980

您必须检查是否启用了网络提供商，就像您使用 GPS 提供商所做的那样：

```
if (locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){
    locationManager.requestLocationUpdates(
        LocationManager.NETWORK_PROVIDER, 1000, 10f, locationListener);
} 
```

您的清单中还必须存在以下权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

# svn - 如何在 shell 中获取 SVN 头部版本号？

> ID：11878258
> 
> 赞同：5
> 
> 时间：2012-08-09T06:58:32.327
> 
> 标签：svn

我在命令行中使用 svn。如何在命令行中获取头部版本号。我需要号码，不仅是为了查看信息。我想用这个数字自动构建我的项目。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T07:21:15.063

这是适合您的简单 shell 脚本。执行：`svn info -rHEAD | grep Revision | cut -d' ' -f2`

看看它的实际效果：

```
main$ svn info -rHEAD
Path: main
URL: svn://url/trunk/main
Repository Root: svn://url
Repository UUID: xxxxx-xxxx-xxxx-xxxx-xxxxxxxx
Revision: 17042
Node Kind: directory
Last Changed Author: Nishant
Last Changed Rev: 17040
Last Changed Date: 2012-08-09 11:29:05 +0530 (Thu, 09 Aug 2012)

main$ svn info -rHEAD | grep Revision | cut -d' ' -f2
17042 
```

**Edit1：**更新以获取 head rev。

# iphone - 如何将 iPhone 中保存的文件放入应用程序中的 UITableView 中？

> ID：11878260
> 
> 赞同：1
> 
> 时间：2012-08-09T06:58:39.767
> 
> 标签：iphone, ios, xcode, uitableview

我对如何获取存储在 iPhone 中的文件（照片、视频、pdf、ppt 等）以及如何`UITableView`在 iPhone 应用程序中列出它们完全一无所知。在这里，我想列出存储在 iPhone 设备中的文件。如果有人对此有解决方案，请帮助我。我用谷歌搜索并找不到任何解决方案。

# php - 如何监控 oracle DB 更新？

> ID：11878262
> 
> 赞同：0
> 
> 时间：2012-08-09T06:58:56.207
> 
> 标签：php, oracle, architecture, process-monitoring

我想通知网站访问者有关当前时间的 Oracle 表更新。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:55:07.530

让数据库完成它的工作（即保存和管理数据）并让处理传入呼叫的​​应用程序完成通知。

# php - 创建数据库安装脚本，如 DRUPAL

> ID：11878264
> 
> 赞同：0
> 
> 时间：2012-08-09T06:59:12.710
> 
> 标签：php, mysql, postgresql

我有两种方法可以在数据库中创建表结构

1.  使用 UI 或 shell 在数据库中导入 sql 文件。
2.  创建一个 php 数据库安装程序脚本，如 drupal。

我想知道哪种方法是创建数据库结构的好方法，或者除了上面还有其他方法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:09:55.713

好吧，这取决于您将如何使用它，但是如果您正在创建一个*drupal*类型的 CMS，那么创建一个自动表结构很可能是最好的方法。

# objective-c - 通知所有加载的 ViewController 某个事件

> ID：11878265
> 
> 赞同：2
> 
> 时间：2012-08-09T06:59:24.023
> 
> 标签：objective-c, ios, viewcontroller

我有一个类，每隔一段时间在后台同步数据。用户可以在应用程序导航树中的任何位置，无论用户在哪里，我都需要能够使用我刚刚同步的任何新数据来更新视图控制器。

我把负责后台线程同步的对象作为 SharedAppDelegate 的一个属性。

在某种程度上，我需要实现类似于观察者模式的东西，并且每次实例化视图控制器时都将其设置为侦听后台同步对象上的某些事件，以便在每次同步后我可以在正在侦听的视图控制器中执行一个方法。

**我不确定在 Objective-C 中执行此操作的正确方法是什么，或者是否有更好或推荐的方法。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:54:58.390

使用`NSNotification`with [`NSNotificationCenter`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/postNotificationName%3aobject%3auserInfo%3a)，这完全符合您的目的：

*   在您的 AppDelegate 中，当同步结束时，调用

    ```
    [[NSNotificationCenter defaultCenter] postNotificationName:@"SyncEnded" object:mySyncObject] 
    ```

*   在您显示的每个视图控制器中，调用

    ```
    _myObserver = [[NSNotificationCenter defaultCenter] addObserverForName:@"SyncEnded" object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note){ ...your UI refresh code... } 
    ```

*   也不要忘记在不再需要观察者时将其移除（视图控制器已释放/卸载/不可见，取决于您），否则`NSNotificationCenter`最终会崩溃：

    ```
    [[NSNotificationCenter defaultCenter] removeObserver:_myObserver]; 
    ```

几点注意事项：

此示例使用基于块的 API 在主操作队列（隐含在主线程）上执行 UI 刷新工作，因为您不得在主线程以外的任何其他线程上执行 UIKit 操作。这可能是您的后台同步将在其他线程上发送通知，因此切换到主线程是必要的。如果您想使用基于选择器的 API，请务必在主线程上发送通知。

您可以根据需要在通知上注册任意数量的观察者，因此这完全符合您的模式（`NSNotifications`通常是通知不同应用程序组件有关应用程序范围事件（如同步结束）的最佳方式）。

发布通知时传递的`object`参数允许您在需要时访问观察者块中的同步对象`note.object`。

# java - 通过 openssl 在本机代码中使用来自 java 的私钥

> ID：11878271
> 
> 赞同：1
> 
> 时间：2012-08-09T06:59:43.490
> 
> 标签：java, c, openssl

我使用 java 生成了一个公钥/私钥对。因为我想将密钥添加到我的代码（而不是文件）中，所以我使用了

```
byte[] priv = private_key.getEncoded() 
```

将其作为字节数组获取。从我使用的字节数组中取回私钥

```
PKCS8EncodedKeySpec privateKeySpec = new PKCS8EncodedKeySpec(priv); 
```

解密按预期工作。但现在我想使用 openssl 在 ac 应用程序中使用该密钥。所以我将字节数组从java复制到c作为char []。但我无法将此 char[] 转换为私钥以通过 RSA_public_decrypt(...) 将其用于解密我试过

```
RSA *r = d2i_RSAPrivateKey(NULL,&priv, len); 
```

但这总是返回一个 NULL 指针

谁能给我一个关于如何用c语言做到这一点的提示？

编辑：同时我检查了openssl的错误代码，它说

> 错误：0D0680A8:lib(13):func(104):reason(168)

但我不知道如何处理这些错误代码。在网上搜索还没有帮助。

提前谢谢了。问候，-克里斯-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:14:11.107

您是在复制编码的二进制数据还是只是从文件中读取的二进制数据？请参阅[如何使用 OpenSSL C 库将 RSA 密钥从二进制数据加载到 RSA 结构？](https://stackoverflow.com/questions/2477570/how-to-load-an-rsa-key-from-binary-data-to-an-rsa-structure-using-the-openssl-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:53:47.820

感谢 srikanth yaradla 的提示，我找到了正确的方向。我是这样做的：

```
const unsigned char private_key[] = {0x30,...};
size_t private_key_len = sizeof(private_key);
char* buf = (char*)malloc(private_key_len);
memcpy(buf, private_key, private_key_len);
BIO* mem=BIO_new_mem_buf(buf, private_key_len);
PKCS8_PRIV_KEY_INFO* p8inf = d2i_PKCS8_PRIV_KEY_INFO_bio(mem, NULL);
EVP_PKEY* pkey = EVP_PKCS82PKEY(p8inf);
RSA* r = EVP_PKEY_get1_RSA(pkey); 
```

这样做之后，我现在可以轻松地解密从 java 部分获得的数据。

# python - 如何在 cmd 以外的地方运行 Python 脚本？

> ID：11878272
> 
> 赞同：1
> 
> 时间：2012-08-09T06:59:45.147
> 
> 标签：python, windows, user-interface, window

我写了一个程序。我不知道它的编写方式是否重要，但您可以在这里找到它：http: [//pastebin.com/Z3ZvVPV8](http://pastebin.com/Z3ZvVPV8)基本上，它要求您为变量赋值，并根据您选择的变量执行计算，并打印答案。

我想知道如何使程序在 cmd 以外的窗口中运行（我使用的是 Windows Vista 32 位）。就 GUI 而言，我根本不需要太多，只需要一个对用户更友好/更易于查看的窗口，当他们使用该程序时。

编辑：对于那些建议使用 IDLE 的人，虽然这对我有用，但如果其他人想使用该程序，他们将不得不下载它，所以我希望有一种方法不会发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:06:12.093

Python 带有一种默认的 GUI 包[TkInter](http://wiki.python.org/moin/TkInter)，你可以使用它。还有[很多其他可用的 GUI 包](http://wiki.python.org/moin/GuiProgramming)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:11:06.460

Python 标准库提供了许多方法来实现简单（但也相当复杂）的 GUI。我想向您指出 TK（图形界面工具包）[http://docs.python.org/library/tk.html](http://docs.python.org/library/tk.html)的文档，您还可以在其中找到一些有用的使用示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:17:59.830

1.  如果您真的不需要 gui，[Py2Exe是一个可行的选择。](http://www.py2exe.org/ "Py2Exe.org")这将使它运行并看起来像一个命令提示符，但它将是一个 .exe 文件。这是他们页面的快速引用：“py2exe 是 Python Distutils 扩展，可将 Python 脚本转换为可执行的 Windows 程序，无需安装 Python 即可运行。”

2.  另一种选择是获取[Portable Python](http://www.portablepython.com/ "Python 的可移植版本")。以下是他们网页上的引述：“便携式 Python 是一种 Python® 编程语言，预配置为直接从任何 USB 存储设备运行，使您能够随时拥有便携式编程环境。只需下载它，提取到您的便携式存储设备或硬盘驱动器，10 分钟后您就可以创建下一个 Python® 应用程序了。” 打包可移植 python 和您的 .py 或 .pyc 文件后，然后创建一个 .bat 文件，该文件使用正确的命令行参数运行可移植 python“Python-Portable.exe”以加载脚本。确保在批处理文件中使用相对路径，以防它们从闪存驱动器或与您不同的位置运行它。

注意：这确实不是一个好方法，因为他们的下载页面指出：“安装大小：基于选定的包，在 49MB 和 480MB 之间”。还请务必阅读当前的 Python 软件基础许可证，因为这是发布可移植 Python 的内容，并且将其打包在封闭源代码项目中可能合法也可能不合法。我自己还没有真正看过许可证才能告诉你。如果您将它作为开源发布，那么不会有问题。作为一个快速的旁注，如果您需要将该 .bat 文件作为 .exe 文件，那么您可以使用 .bat 到 .exe 转换器 battoexe.com 就是其中之一。这对于做整个事情来说确实有很长的路要走，但它是一种选择。

* * *

资料来源：

使用 Python 已经 7 年了，其中很多是在闪存驱动器上使用便携式版本，并且处理批处理文件的时间也更长。

# java - 不要保留活动选项导致我的应用程序崩溃

> ID：11878274
> 
> 赞同：1
> 
> 时间：2012-08-09T06:59:54.603
> 
> 标签：java, android, android-4.0-ice-cream-sandwich

用户报告说，当子活动启动（按按钮启动）时，我的应用程序重新启动（主要活动）。我意识到激活以下选项会强制执行此操作：settings->{}developer options->'Do not keep activities'。

我怎样才能防止这种情况？我编码错了吗？

在 Go-Launcher 中打开设置选项时，Go-Launcher 有同样的问题。Go-Launcher 会弹出一条消息，其中包含停用此设置的建议。

有谁知道如何阅读此设置？我无法找到类设置的正确变量。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T06:54:21.403

我从 stackoverflow 用户 'yorkw' 那里得到了解决方案。非常感谢yorkw！

我检查该选项是否已激活。如果是这样，我会显示一个对话框来警告用户。

```
int value = Settings.System.getInt(getContentResolver(), Settings.System.ALWAYS_FINISH_ACTIVITIES, 0); 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:06:28.477

“不保持活动”，用于模拟系统不保持活动时的硬条件，

大多数情况下，这种情况很少见，但您应该并且需要处理这种情况，

我建议您检查问题的根源并正确处理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T02:24:08.253

我用一个干净的简单榜样测试了这个问题：事实是，当检查选项'不保持活动'时，将丧生活动。例如：一个 Mainactivity 调用一个 subactivity。主要活动被杀死。按下子活动会导致重新启动 Mainactivity。这可能是一个问题，当 mainactivity 正在执行诸如加载内容之类的长时间运行的事情时。

我对此的结论。“不保留活动”选项是开发人员选项，不应在正常用户条件下设置。

# iphone - 向标签栏添加两个 UINavigationController 时崩溃

> ID：11878275
> 
> 赞同：0
> 
> 时间：2012-08-09T06:59:54.963
> 
> 标签：iphone, objective-c, ios, xcode

我有一个视图，它有两个子视图，在标签栏中添加这两个子视图时，它在主视图中崩溃。以下是代码..

```
 block_list = [[ofi_vc_blocked_list alloc] init];
        ab_blk_navig_controller = [[UINavigationController alloc] initWithRootViewController:block_list];
        ab_navig_controller = [[UINavigationController alloc] initWithRootViewController:ab_window];
        ab_tab_bar = [[UITabBarController alloc] init]; // ab_tab_bar is tab bar controller
        ab_tab_bar.viewControllers = [NSArray arrayWithObjects:ab_navig_controller, ab_blk_navig_controller, nil]; 
```

这样做时，它会崩溃并出现以下错误：

```
Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency', reason: 'child view controller:<ofi_vc_address_book: 0x6868710> should have parent view controller:<ofi_vc_main_page_controller: 0x6c4b830> but actual parent is:<UITabBarController: 0x6869830>' 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:21:50.553

我已经举了一个例子，为第一个和第二个 tabBar2 添加以下语句。

```
UITabBarItem *tabBar1 = [[UITabBarItem alloc] initWithTitle:@"" image:[UIImage      imageNamed:@""] tag:0];
navigation1.tabBarItem = tabBar1;

 UITabBarItem *tabBar2 = [[UITabBarItem alloc] initWithTitle:@"" image:[UIImage      imageNamed:@""] tag:1];
navigation2.tabBarItem = tabBar2;

tabBarCon.viewControllers = [NSArray arrayWithObjects:navigation1,navigation2, nil];
self.window.rootViewController = tabBarCon; 
```

# javascript - 是什么导致 preventDefault 让原始事件通过

> ID：11878276
> 
> 赞同：0
> 
> 时间：2012-08-09T07:00:06.517
> 
> 标签：javascript, javascript-events

我手头没有示例，但在某些情况下，调用`event.preventDefault()`让原始事件通过（导航到页面、提交表单等）但返回 false 帮助。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:18:01.337

你手头没有例子吗？好吧，让我发明一个可能是也可能不是你所想的任何东西。

请记住，`return false;`这相当于同时调用`event.preventDefault();`and [`event.stopPropagation()`](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)。**编辑：这适用于 jQuery**，它明确地实现了这种行为，并且规范化`event.preventDefault()`并`event.stopPropagation()`在所有浏览器中使用。它在所有带有“普通” JS 的浏览器中都不是这样工作的，事实上旧的 IE 版本根本不支持`event.preventDefault()`，它们有自己的等价物`event.returnValue = false;`

如果您有嵌套元素并且您在多个级别处理相同的事件，那么调用`event.preventDefault()`不会停止外部元素的事件处理程序运行，但`return false`会因为它停止事件的传播。

一个演示它的例子：http: [//jsfiddle.net/nnnnnn/KjLv3/](http://jsfiddle.net/nnnnnn/KjLv3/)

```
<a href="#"><span>Click me to see an alert</span></a>

// using jQuery for simplicity in the example:

$("a span").click(function(e){
    e.preventDefault();
});

$("a").click(function() {
    alert("Hello");
}); 
```

将显示警报。如果您将“a span”处理程序更改为返回 false，则不会显示警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:19:27.290

**event.preventDefault()**防止浏览器执行默认操作（如果事件是可取消的）而不停止事件的进一步传播，而 **return false**防止事件传播（或“冒泡”）DOM，同时防止默认动作。

所以，

```
function() {
  return false;
} 
```

// 等于

```
function(e) {
  e.preventDefault();
  e.stopPropagation();
} 
```

# javascript - Javascript/AJAX 自动在文本文件中显示文本

> ID：11878279
> 
> 赞同：0
> 
> 时间：2012-08-09T07:00:23.057
> 
> 标签：javascript, text

我正在尝试制作一个简单的 AJAX 程序，它始终显示文件中的最新文本。它应该从文件中检索它，等待 2 秒钟，如果有什么变化，把它写出来。我已经尝试过了，但代码似乎不起作用。

```
<html>
<head>
    <script type="text/javascript">
        function sleep()
        {
            var dt = new Date();
            dt.setTime(dt.getTime() + 2000);
            while (new Date().getTime() < dt.getTime());
        }
        function loadXMLDoc()
        {
        var xmlhttp;
        if (window.XMLHttpRequest)
          {
          xmlhttp=new XMLHttpRequest();
          }
        xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
            }
          }
        xmlhttp.open("GET","ajaxtest.txt",true);
        xmlhttp.send();
        }
    </script>
</head>
<body>
    <script>
    while (0=0)
     {
        loadXMLDoc();

    </script>
        <div id="myDiv"><h2>Status</h2></div>
        <script type="text/javascript">
        setTimeout(loadXMLDoc(),1000)
    }
    </script>

</body>
</html> 
```

如何让它自动检查和更新文本？

谢谢！

**编辑：**

这是任何有兴趣的人的最终代码：

```
<html>
<head>
    <script type="text/javascript">
        function loadXMLDoc()
        {
        var xmlhttp;
        if (window.XMLHttpRequest)
          {
          xmlhttp=new XMLHttpRequest();
          }
        xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
            }
          }
        xmlhttp.open("GET","status.txt",true);
        xmlhttp.send();
        }
    </script>
</head>
<body>
    <script type="text/javascript">
        loadXMLDoc();
    </script>
    <div id="myDiv">Current Status</div>
    <script type="text/javascript">
        setInterval("loadXMLDoc()", 2000);
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:18:56.940

我不确定它是拼写错误还是来自其他语言的东西。（如 PHP）

在 HTML 中，您不能拥有跨越多个脚本标签的 javascript 代码。

此外，您的 while 循环只有一个 = 符号，需要两个进行比较。

但话虽如此，您确实需要 setTimeout 或 setInterval，因为非多线程 javascript 只会锁定，多线程 JavaScript 也会浪费处理时间，但不会完全锁定。

就像是

```
setInterval("loadXMLDoc()", 2000); 
```

setTimeout 在第二个参数毫秒后执行第一个参数作为javascript。

setInterval 执行类似的 setTimeout，除了每 X 毫秒。

setTimeout 和 setInterval 都返回一个值，该值可用于阻止 javascript 再次执行。

该值用于`clearTimeout(value)`或`clearInterval(value)`

您的页面正文如下所示：

```
<body>
    <div id="myDiv"><h2>Status</h2></div>
    <script type="text/javascript">
        setInterval("loadXMLDoc()", 2000);
    </script>
</body> 
```

# opencv - 使用拉普拉斯滤波器进行图像锐化

> ID：11878281
> 
> 赞同：10
> 
> 时间：2012-08-09T07:00:30.873
> 
> 标签：opencv

我试图对 Gonzalez 书中的一些标准图像进行锐化。以下是我尝试过的一些代码，但它并没有接近锐化图像的结果。

```
cvSmooth(grayImg, grayImg, CV_GAUSSIAN, 3, 0, 0, 0);

IplImage* laplaceImg = cvCreateImage(cvGetSize(oriImg), IPL_DEPTH_16S, 1);

IplImage* abs_laplaceImg = cvCreateImage(cvGetSize(oriImg), IPL_DEPTH_8U, 1);

cvLaplace(grayImg, laplaceImg, 3);

cvConvertScaleAbs(laplaceImg, abs_laplaceImg, 1, 0);

IplImage* dstImg = cvCreateImage(cvGetSize(oriImg), IPL_DEPTH_8U, 1);
cvAdd(abs_laplaceImg, grayImg, dstImg, NULL); 
```

![锐化前](../Images/6c5330f6092be4033201072c11a4be8c.png)锐化前

![我的锐化结果](../Images/ecc826c3bb2e81c45f0356ec166cc71f.png)我的锐化结果

![期望的结果](../Images/e5fcc75f38f7e29ccd473883a8b8e9bf.png)期望的结果

![绝对拉普拉斯](../Images/28cbe12e1946b556e931679a7e5faec2.png)绝对拉普拉斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T21:22:04.857

我认为问题在于您在进行二阶导数之前模糊了图像。

这是使用 C++ API 的工作代码（我使用的是 Opencv 2.4.3）。我也尝试了 MATLAB，结果是一样的。

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

#include <iostream>

using namespace cv;
using namespace std;

int main(int /*argc*/, char** /*argv*/) {

    Mat img, imgLaplacian, imgResult;

    //------------------------------------------------------------------------------------------- test, first of all
    // now do it by hand
    img = (Mat_<uchar>(4,4) << 0,1,2,3,4,5,6,7,8,9,0,11,12,13,14,15); 

    // first, the good result
    Laplacian(img, imgLaplacian, CV_8UC1);
    cout << "let opencv do it" << endl;
    cout << imgLaplacian << endl;

    Mat kernel = (Mat_<float>(3,3) << 
        0,  1, 0,
        1, -4, 1,
        0,  1, 0); 
    int window_size = 3;

    // now, reaaallly by hand
    // note that, for avoiding padding, the result image will be smaller than the original one.
    Mat frame, frame32;
    Rect roi;
    imgLaplacian = Mat::zeros(img.size(), CV_32F);
    for(int y=0; y<img.rows-window_size/2-1; y++) {
        for(int x=0; x<img.cols-window_size/2-1; x++) {
            roi = Rect(x,y, window_size, window_size);
            frame = img(roi);
            frame.convertTo(frame, CV_32F);
            frame = frame.mul(kernel);
            float v = sum(frame)[0];
            imgLaplacian.at<float>(y,x) = v;
        }
    }
    imgLaplacian.convertTo(imgLaplacian, CV_8U);
    cout << "dudee" << imgLaplacian << endl;

    // a little bit less "by hand"..
    // using cv::filter2D
    filter2D(img, imgLaplacian, -1, kernel);
    cout << imgLaplacian << endl;

    //------------------------------------------------------------------------------------------- real stuffs now
    img = imread("moon.jpg", 0); // load grayscale image

    // ok, now try different kernel
    kernel = (Mat_<float>(3,3) << 
        1,  1, 1,
        1, -8, 1,
        1,  1, 1); // another approximation of second derivate, more stronger

    // do the laplacian filtering as it is
    // well, we need to convert everything in something more deeper then CV_8U
    // because the kernel has some negative values, 
    // and we can expect in general to have a Laplacian image with negative values
    // BUT a 8bits unsigned int (the one we are working with) can contain values from 0 to 255
    // so the possible negative number will be truncated
    filter2D(img, imgLaplacian, CV_32F, kernel);
    img.convertTo(img, CV_32F);
    imgResult = img - imgLaplacian;

    // convert back to 8bits gray scale
    imgResult.convertTo(imgResult, CV_8U);
    imgLaplacian.convertTo(imgLaplacian, CV_8U);

    namedWindow("laplacian", CV_WINDOW_AUTOSIZE);
    imshow( "laplacian", imgLaplacian );

    namedWindow("result", CV_WINDOW_AUTOSIZE);
    imshow( "result", imgResult );

    while( true ) {
        char c = (char)waitKey(10);
        if( c == 27 ) { break; }
    }

    return 0;
} 
```

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T13:37:42.413

我认为主要问题在于你做 img + laplace 的事实，而 img - laplace 会给出更好的结果。我记得 img - 2*laplace 是最好的，但我找不到我在哪里读到的，可能是在我在大学读过的一本书中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T14:19:53.000

你需要做`img - laplace`而不是`img + laplace`.

```
laplace: f(x,y) = f(x-1,y+1) + f(x-1,y-1) + f(x,y+1) + f(x+1,y) - 4*f(x,y) 
```

因此，如果您从原始图像中看到减去拉普拉斯，您会看到 4*f(x,y) 前面的减号被否定，并且该项变为正。

您还可以使用内核`-5 in the center pixel instead of -4`来使拉普拉斯算子成为一步过程，而不是获得拉普拉斯算子并执行`img - laplace`为什么？尝试自己推导出来。

这将是最终的内核。

垫内核 = (Mat_(3,3) << -1, 0, -1, 0, -5, 0, -1, 0, -1);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-24T03:18:10.207

这确实是图像处理中众所周知的结果，如果从图像中减去其拉普拉斯算子，图像边缘会被放大，从而获得更清晰的图像。

> 拉普拉斯滤波器内核算法：sharpened_pixel = 5 * current – left – right – up – down

[在此处输入图像描述](http://i.stack.imgur.com/8jhdg.jpg)

所以代码看起来像这样：

```
void sharpen(const Mat& img, Mat& result)
{    
    result.create(img.size(), img.type());
    //Processing the inner edge of the pixel point, the image of the outer edge of the pixel should be additional processing
    for (int row = 1; row < img.rows-1; row++)
    {
        //Front row pixel
        const uchar* previous = img.ptr<const uchar>(row-1);
        //Current line to be processed
        const uchar* current = img.ptr<const uchar>(row);
        //new row
        const uchar* next = img.ptr<const uchar>(row+1);
        uchar *output = result.ptr<uchar>(row);
        int ch = img.channels();
        int starts = ch;
        int ends = (img.cols - 1) * ch;
        for (int col = starts; col < ends; col++)
        {
            //The traversing pointer of the output image is synchronized with the current row, and each channel value of each pixel in each row is given a increment, because the channel number of the image is to be taken into account.
            *output++ = saturate_cast<uchar>(5 * current[col] - current[col-ch] - current[col+ch] - previous[col] - next[col]);
        }
    } //end loop
    //Processing boundary, the peripheral pixel is set to 0
    result.row(0).setTo(Scalar::all(0));
    result.row(result.rows-1).setTo(Scalar::all(0));
    result.col(0).setTo(Scalar::all(0));
    result.col(result.cols-1).setTo(Scalar::all(0));
}

int main()
{    
    Mat lena = imread("lena.jpg");
    Mat sharpenedLena;
    ggicci::sharpen(lena, sharpenedLena);

    imshow("lena", lena);
    imshow("sharpened lena", sharpenedLena);
    cvWaitKey();
    return 0;
} 
```

如果你是个懒人。享受以下乐趣。

```
 int main()
 {    
     Mat lena = imread("lena.jpg");
     Mat sharpenedLena;
     Mat kernel = (Mat_<float>(3, 3) << 0, -1, 0, -1, 4, -1, 0, -1, 0);
     cv::filter2D(lena, sharpenedLena, lena.depth(), kernel);

     imshow("lena", lena);
     imshow("sharpened lena", sharpenedLena);
    cvWaitKey();
    return 0;
} 
```

结果像这样。[在此处输入图像描述](http://i.stack.imgur.com/tNkxa.jpg)

# qt - Q_OBJECT, SLOT 函数指针

> ID：11878288
> 
> 赞同：1
> 
> 时间：2012-08-09T07:01:40.367
> 
> 标签：qt, function-pointers, signals-slots

我不能声明具有*SLOT**函数指针的**Q_OBJECT*，因为 MOC 无法编译它。你能给我正确的实施吗？

```
public slots:
    void (*refMoveMethod) (Compound_object& object);
...

QObject::connect(someTimer, SIGNAL(timout()), this, SLOT(refMoveMethos)); 
```

# django - 如何在 Django 中上传图片

> ID：11878291
> 
> 赞同：1
> 
> 时间：2012-08-09T07:01:56.597
> 
> 标签：django, django-models

我正在 django 环境中创建一个新应用程序。我想在他/她在我的应用程序中注册时上传用户的图像，并且当他/她在我的应用程序中发表任何评论时我想使用相同的图像。那么如何将图像上传代码集成到我的应用程序代码中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:06:28.333

您应该使用`UserProfile`此处已回答的[Django 用户配置文件](https://stackoverflow.com/questions/6085025/django-user-profile)，并在其中包含 ImageField。

然后为 UserProfile 创建一个`ModelForm`并将其呈现在您希望用户设置其个人资料并添加用户图像的任何位置。Model 表单会将 ImageField 呈现为文件上传字段并为其提供默认句柄。确保您已`MEDIA_URL`在`settings.py`. 您还需要`PIL`在路径中安装图像上传才能正常工作。

您可以在模板中访问该`UserProfile`实例，也可以在其他地方作为可调用对象访问该实例。`user``user.get_profile`

# java - 查找 android 应用程序源代码中使用的 API 总数？

> ID：11878292
> 
> 赞同：4
> 
> 时间：2012-08-09T07:01:57.177
> 
> 标签：java, android, eclipse, api

我想找出我的 android 应用程序源代码中使用的 android API（类和方法）的总数。但我想以编程方式进行。有人可以建议我怎么做吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:16:42.417

您可以使用[Reflections API](http://code.google.com/p/reflections/)来做到这一点。

您可以使用以下代码获取类列表：

```
Reflections ref = new Reflections("package_name");
Set<Class<?>> classes = ref.getSubTypesOf(Object.class); 
```

然后通过使用[Class.getDeclaredMethods()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredMethods%28%29)或[Class.getMethods()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getMethods%28%29)您可以获得方法列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:09:24.947

eclipse 指标插件看起来很有前途。它不是专门为 android 设计的，但它有可能为您提供（大部分）您需要的信息。

**参考**

*   [sourceforge 上的项目](http://metrics2.sourceforge.net/)

# jquery - 上传的图片不显示在fancybox弹出窗口中

> ID：11878294
> 
> 赞同：2
> 
> 时间：2012-08-09T07:02:06.097
> 
> 标签：jquery, jsp, popup, fancybox

我正在使用 jQuery fancybox 作为弹出窗口来在我的应用程序中显示上传的图像。我上传图片的代码如下：更改照片

```
 <div class="change-photo" style="min-height:250px;">
       <div class="current-photo">
       <span>Current Photo</span>
       <img src="getProfilePic.html?userid=${sessionScope.user.userId}" height="100px" width="100px" border="0" class="img" /></div>
       <div class="upload-photo">
          <p><span>Upload Photo</span></p>
          <p>You can upload a JPG or PNG file (File size limit is 4 MB).</p>
          <p><input type="file" NAME="file" onchange="checkSize(this);" /></p>
          <p > <font style="color:red;">${message}</font></p>
          <p class="dot-line">&nbsp;</p>
          <input type="submit" value="" class="upload-photo-but" />&nbsp;&nbsp;&nbsp; or 

          <a class="cropImage {width:1024,height:675}" href="uploadPhoto.html"></a>

          <a href="javascript:history.back();"><b>Cancel</b></a>
       </div>
    </div>

    </div>

 </div>    I am using a form submission to a controller which is used to display the uploaded image for cropping.    <FORM ENCTYPE="multipart/form-data" METHOD="POST"> 
```

我的fancybox脚本如下

```
 $("#cropImage").fancybox({                   
                'transitionIn'      : 'none',
                'transitionOut'     : 'none',
                'overlayColor'      : '#333',
                'hideOnOverlayClick' : false,
                'type'              : 'iframe',
                'hideOnContentClick' : true,
                   'onClosed': function() { parent.location.reload(true); },
                   'onComplete' : function() {
                     $('#fancybox-frame').load(function() { // wait for frame to load and then gets it's height
                       $('#fancybox-content').height($(this).contents().find('body').height()+30);
                     });                
                   }
            }); 
```

我无法在弹出窗口中获取上传的图像。在对代码进行一些小的更改后，我会弹出异常或弹出相同的 jsp 以上传图像。

提前致谢

# python - 序列化和反序列化 lambda

> ID：11878300
> 
> 赞同：17
> 
> 时间：2012-08-09T07:02:44.883
> 
> 标签：python, lambda, pickle

我想在机器 A 上序列化并在机器 B 上反序列化一个 python lambda。这样做有几个明显的问题：

*   pickle 模块不会序列化或反序列化代码。它只序列化类/方法/函数的名称
*   我在 google 上找到的一些答案建议使用低级 marshal 模块来序列化 lambda 的 func_code 属性，但它们未能描述如何从反序列化的代码对象中重建函数对象
*   marhshal(l.func_code) 不会序列化与 lambda 关联的闭包，这会导致检测给定 lambda 何时真正需要闭包并警告用户他正在尝试序列化使用闭包的 lambda 的问题

因此，我的问题：

*   如何从反序列化（去编组）代码对象重建一个函数？
*   如果没有相关的闭包，如何检测到给定的 lambda 将无法正常工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-09T07:12:51.687

令人惊讶的是，检查 lambda 在没有相关闭包的情况下是否可以工作实际上相当容易。根据[数据模型文档](http://docs.python.org/release/2.6.2/reference/datamodel.html)，您只需检查`func_closure`属性：

```
>>> def get_lambdas():
... 酒吧 = 42
...返回（lambda：1，lambda：bar）
...
>>> no_vars, vars = get_lambdas()
>>> 打印 no_vars.func_closure
没有任何
>>> 打印 vars.func_closure
（<0x1020d3d70 处的单元格：0x7fc150413708 处的 int 对象>，）
>>> 打印 vars.func_closure[0].cell_contents
42
>>>

```

然后序列化 + 加载 lambda 是相当直接的：

```
>>> 导入元帅，类型
>>> 旧 = λ: 42
>>> old_code_serialized = marshal.dumps(old.func_code)
>>> new_code = marshal.loads(old_code_serialized)
>>> new = types.FunctionType(new_code, globals())
>>> 新的（）
42

```

值得一看的文档`FunctionType`：

```
函数（代码，全局变量 [，名称 [，argdefs [，闭包]]]）

从代码对象和字典创建函数对象。
可选的名称字符串覆盖代码对象中的名称。
可选的 argdefs 元组指定默认参数值。
可选的闭包元组为自由变量提供绑定。

```

请注意，您还可以提供一个闭包……这意味着您甚至可以序列化旧函数的闭包，然后在另一端加载它:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-13T21:39:34.753

我不确定你到底想做什么，但你可以试试[dill](https://github.com/uqfoundation/dill)。Dill 可以序列化和反序列化 lambda，我相信它也适用于闭包内的 lambda。pickle API 是其 API 的一个子集。要使用它，只需“将莳萝作为泡菜进口”并开始您的业务腌制。

```
>>> import dill
>>> testme = lambda x: lambda y:x
>>> _testme = dill.loads(dill.dumps(testme))
>>> testme
<function <lambda> at 0x1d92530>
>>> _testme
<function <lambda> at 0x1d924f0>
>>> 
>>> def complicated(a,b):
...   def nested(x):
...     return testme(x)(a) * b
...   return nested
... 
>>> _complicated = dill.loads(dill.dumps(complicated))
>>> complicated 
<function complicated at 0x1d925b0>
>>> _complicated
<function complicated at 0x1d92570> 
```

Dill 将它的类型注册到`pickle`注册表中，因此如果您有一些使用的黑盒代码`pickle`并且您无法真正编辑它，那么只需导入 dill 就可以神奇地使其工作而无需猴子修补第 3 方代码。或者，如果您希望通过网络将整个解释器会话作为“python 图像”发送，dill 也可以这样做。

```
>>> # continuing from above
>>> dill.dump_session('foobar.pkl')
>>>
>>> ^D
dude@sakurai>$ python
Python 2.7.5 (default, Sep 30 2013, 20:15:49) 
[GCC 4.2.1 (Apple Inc. build 5566)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import dill
>>> dill.load_session('foobar.pkl')
>>> testme(4)
<function <lambda> at 0x1d924b0>
>>> testme(4)(5)
4
>>> dill.source.getsource(testme)
'testme = lambda x: lambda y:x\n' 
```

您可以轻松地通过 ssh 将图像发送到另一台计算机，然后从您离开的地方开始，只要存在 pickle 的版本兼容性以及有关 python 更改和正在安装的东西的常见警告。如图所示，您还可以提取在前一个会话中定义的 lambda 的源。

Dill 还提供[了一些很好的工具](https://github.com/uqfoundation/dill/blob/master/dill/detect.py)，可以帮助您了解在代码失败时导致酸洗失败的原因。

# git - git push -u origin master 无应答

> ID：11878301
> 
> 赞同：0
> 
> 时间：2012-08-09T07:02:54.513
> 
> 标签：git, github, repository, git-push

我正在尝试将两个文件从本地机器推送到 gihub 以进行测试，我在 github 上有一个名为 test 的空存储库，在我的机器上有一个本地存储库测试。`git push -u origin master`但是在我在命令窗口中所做的之后没有得到任何答案：

```
C:\Users\TJIA\Documents\GitHub\test [master]> git remote add origin https://gith
ub.com/Svampyr/test.git
fatal: remote origin already exists.
C:\Users\TJIA\Documents\GitHub\test [master]> git remote rm origin
C:\Users\TJIA\Documents\GitHub\test [master]> git remote add origin https://gith
ub.com/Svampyr/test.git
C:\Users\TJIA\Documents\GitHub\test [master]> git push -u origin master 
```

我是github的新手，任何人都可以纠正我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:06:39.217

创建一个新的本地文件夹并尝试这样做：这对您有用吗？您可以将文件添加到这个新文件夹并尝试使用它们；）

```
touch README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/Svampyr/test.git
git push -u origin master 
```

也许您的存储库中*没有*提交？如果您不知道，请输入“git log”并检查是否有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:44:57.890

要查看发生了什么，请尝试运行：

```
GIT_TRACE=2 git push -u origin master 
```

您是否也尝试过推送到 SSH 网址而不是 https 网址？

# javascript - div 中心的层 div

> ID：11878305
> 
> 赞同：0
> 
> 时间：2012-08-09T07:03:08.130
> 
> 标签：javascript, jquery, html

我需要像图像中那样实现，并且除了加载器部分之外我已经完成了所有工作。当我单击左侧的复选框时，我想`div(loade+text "updating results)`位于搜索结果 div 的中心。

笔记：

1.  即使滚动条在那里，仍然`div(loade+text "updating results)`在中心。

2.  `div(loade+text "updating results)`没有出现在页面中心，而是出现在搜索结果的中心（排除左侧复选框）。

请帮助将此加载程序置于搜索结果的中心

** 我所附的图像是需要的，我还没有实现它。

![我需要实现](../Images/8952fd85b19562295f215246dabde9ba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:10:31.607

你确定你知道你想要什么？

> 我希望 div(loade+text "updating results) 出现在搜索结果的中心
> 
> 没有出现在页面中心，而是出现在搜索结果的中心

我假设您想要屏幕中央的“更新结果”div。

您需要将其位置设置为固定以使其远离文档流，然后将位置设置为顶部和左侧的 50%，最后将边距调整为元素大小的一半以考虑元素。

```
#updating_results_divs_id {
    position: fixed;
    height: 200px;
    width: 400px;
    top: 50%;
    left: 50%;
    margin-top: -100px;
    margin-left: -200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:53:19.533

我想这可能对将来的某人有所帮助：

```
function setToCenterOfParent( obj, parentObj ) {
    var height = $( obj ).height();
    var width = $( obj ).width();
    if ( parentObj == window ) {
        $( obj ).css( 'top', ( $( parentObj ).height() / 2 ) - ( height / 2 ) );
        $( obj ).css( 'left', ( $( parentObj ).width() / 2 ) - ( width / 2 ) );
    }
    else {
        $( obj ).css( 'top', ( $( parentObj ).height() / 2 ) - ( height / 2 ) + $( parentObj ).position().top );
        $( obj ).css( 'left', ( $( parentObj ).width() / 2 ) - ( width / 2 ) + $( parentObj ).position().left );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:20:43.783

我认为加载`div`应该是定位`absolute`的，如果你让它嵌套在搜索结果`div`中，尝试添加这种样式：

```
{
    left: 50%; 
    top:50%
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T07:21:39.793

你可以使用 jQuery **[BlockUI](http://www.malsup.com/jquery/block/)**插件。**[这里](http://www.malsup.com/jquery/block/#demos)**有一些演示。您也可以浏览那里使用的 CSS。

另外，你可以看看**[死亡中心](http://www.wpdfd.com/editorial/thebox/deadcentre4.html)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T17:33:34.570

```
 leftPos = $('.searchResultsDiv').offset().left +($('.searchResultsDiv').width() - $('.layerDiv').width())/2;
    topPos = $('.searchResultsDiv').offset().top + ($(window).height()-$('.layerDiv').height())/5;
    $('.layerDiv')
        .css('position','fixed')
        .css('left',leftPos)
        .css('top',topPos); 
```

# mysql - 在 MySQL 中的选择查询期间将整数转换为文本

> ID：11878307
> 
> 赞同：0
> 
> 时间：2012-08-09T07:03:16.253
> 
> 标签：mysql

我正在尝试选择一个整数字段作为文本，但我不知道该怎么做。

`1`代表`low`、`2`代表`medium`和`3`代表`hi`。_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:05:24.053

你可以这样做`CASE WHEN`

```
SELECT (CASE WHEN column = 1 THEN "low"
             WHEN column = 2 THEN "medium"
             WHEN column = 3 THEN "high"
        END) AS value
FROM table_name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T07:06:05.947

```
SELECT CASE intfield
        WHEN 1 THEN 'low'
        WHEN 2 THEN 'medium'
        WHEN 3 THEN 'hi'       
    END AS inttext
FROM table 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T07:06:19.440

```
Select 
CASE WHEN field = 1 then 'low' 
WHEN field = 2 then 'medium'
WHEN field = 3 then 'hi'
END as Col
from yourtable; 
```

# javascript - 文件上传 | 没有页面刷新| struts2 | 没有闪光 |

> ID：11878312
> 
> 赞同：2
> 
> 时间：2012-08-09T07:03:36.953
> 
> 标签：javascript, jquery, ajax, file-upload, struts2

问题描述：我想使用JSP创建一个文件上传屏幕。屏幕将允许用户在屏幕上选择多个文件，但所有文件都只有一个上传按钮。单击上传按钮后，应在 Action 类中获取所有文件对象。

但重要的是页面在提交后不应该被刷新。在文件上传过程中，将在同一屏幕上显示其他不应更改的信息。

我的尝试：我使用了简单的 struts2 文件上传功能，效果很好。但它正在刷新提交页面。我使用 AJAX (JQuery) 来解决这个问题。AJAX 面临的问题是它没有将 File 对象设置为 Action 类的文件属性。因此，我无法在 Action 类中获取文件对象并进一步处理。

谁能帮我解决这个问题。

我附上了迄今为止我尝试过的任何代码。

**JSP**：

```
<s:form action="fileUpload" method="post" enctype="multipart/form-data" >
<s:file id="file" name="userImage" cssClass="fileUpload" cssStyle="fileUpload" />
<button id="px-submit">Upload</button>      
</s:form>

<script type="text/javascript">
jQuery(function($){
$('.fileUpload').fileUploader();
});
</script> 
```

**JQuery 插件**： [这是我用过的 jquery 插件。](http://pixelcone.com/fileuploader/)

**动作类**：

```
public class FileUploadAction extends ActionSupport{

private File userImage;

public File getUserImage() {
    return userImage;
}

public void setUserImage(File userImage) {
    this.userImage = userImage;
}

public String execute()
{
    try
    {
        System.out.println("file name: " + userImage.toString());

    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

    return SUCCESS;
} 
```

编辑：这是我的 struts 配置文件。

**Struts.xml**

```
<action name="commonDataImportAction_*" class="xxx.Action">
<result name="SUCCESS" type="stream">
            <param name="contentType">text/html</param>
             <param name="inputName">inputStream</param>
        </result> 
```

我在这里得到一个空指针，因为文件对象没有被设置。

请帮忙。

提前致谢。高拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:02:37.330

我正在使用相同的插件，它对我来说工作正常。我在您的代码中看到的第一个问题是您没有设置要提交的上传按钮的类型。

```
<button id="px-submit" type="submit">Upload</button> 
```

希望这应该解决空指针异常。此外，正如该插件的文档中所述，您需要返回一个 json 字符串

```
<div id='message'>success message</div> 
```

成功上传。所以你需要改变你的 struts.xml 映射。试试这个，如果您遇到任何进一步的问题，请回复我。编辑：好的，这是您要求的我的代码

**JSP**

```
<form action="uploadImage" method="post" enctype="multipart/form-data">
   <input type="file" name="image" class="fileUpload" multiple/>
   <button id="px-submit" type="submit">Save all images</button>
   <button id="px-clear" type="reset">Clear all</button>
</form>

$('.fileUpload').fileUploader({
          autoUpload: false,
          buttonUpload: '#px-submit',
          buttonClear: '#px-clear',
}); 
```

**动作类**

您需要返回流结果。我正在使用一个插件（[struts2 jquery 插件](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)），它可以很好地处理它，但你不必仅仅因为这个要求而使用它，而是**我**给你一个代码来返回流结果而不使用任何插件。（采取从[这里](http://struts.apache.org/2.1.6/docs/ajax.html)）

```
public class UploadImageAction extends ActionSupport{
        private File image;
        private String imageContentType;
        private String imageFileName;
        //getter/setter for these
        public String execute() {
         String status="";         
        try{
              //save file code here    
         status="<div id='message'>successfully uploaded</div>"; //on success
         inputStream = new StringBufferInputStream(status);
        }catch(WhateverException e){
         status="<div id='status'>fail</div><div id='message'>Your fail message</div>"; //on error
         inputStream = new StringBufferInputStream(status);
         //other code
        }

        return SUCCESS;
    }
    private InputStream inputStream;

    public InputStream getInputStream() {
       return inputStream;
    }
} 
```

**struts.xml**

```
<action name="fileUpload" class="com.xxx.action.UploadImageAction">  
    <result type="stream">
      <param name="contentType">text/html</param>
      <param name="inputName">inputStream</param>
    </result>
  </action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:43:58.190

向您的表单添加一个`target`属性，并拥有一个同名的 iframe。不使用任何插件直接将多部分表单提交给操作，响应将加载到 iframe 中。这将解决您的页面刷新问题。如果您需要使用插件，那么我建议您使用[http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)这将为现代浏览器使用 XHR/Ajax，并在旧浏览器中优雅地降级为 iframe 上传。

# java - NamedParameterJdbcDaoSupport 与搜索表单 OR 条件实现

> ID：11878316
> 
> 赞同：1
> 
> 时间：2012-08-09T07:03:53.117
> 
> 标签：java, spring, hibernate

我正在使用 getNamedParameterJdbcTemplate() 来查询数据库。

有没有更好的方法可以在查询中映射表单字段，如果在表单字段中输入的值应该包含在 where 条件中，否则不包含条件？

目前使用类似：

**getNamedParameterJdbcTemplate().query(QUERY_TEST, namedParams, valueObjectMapper);**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:42:45.760

我不知道这对您是否可行，但`NamedParameterJdbcTemplate`您可以使用 the`HibernateTemplate`来代替。然后你可以使用[Example Queries](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-examples)。

因此，基本上您将根据在表单字段中输入的值创建您正在搜索的对象的实例。（默认情况下，Hibernate 只为 where 子句考虑那些设置了值的字段）

那么您的代码大致如下所示：

```
getHibernateTemplate().execute(new HibernateCallback<YourClass>() {

        @Override
        public List<YourClass> doInHibernate(Session session) throws HibernateException, SQLException {

            Criteria yourClassCriteria = session.createCriteria(YourClass.class);
            Example exampleCriteria = Example.create(yourClassInstance); 
            yourClassCriteria.add(exampleCriteria);

            return yourClassCriteria.list();
        }
    }); 
```

显然，您需要替换`YourClass`为您实际搜索的类型，并且`yourClassInstance`是根据表单中的值创建的实例。

希望有帮助。

# javascript - 在 Windows 8 html5 javascript 应用程序中向左滑动的事件名称是什么？

> ID：11878325
> 
> 赞同：2
> 
> 时间：2012-08-09T07:04:26.590
> 
> 标签：javascript, html, touch, windows-8, microsoft-metro

我想捕捉用户在图像上从左到右或从右到左滑动时的事件。还有垂直 swpie 事件，例如从上到下滑动和从下到上滑动。是否有任何事件名称。

我将以下语句用于触摸/点击事件。向左滑动或向右滑动是否有类似的事件？

```
 WinJS.utilities.id("imgHomePage").listen("MSPointerUp",funcTapHandler,false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:22:32.923

可以使用`MSGestureStart`（或`MSGestureEnd`）事件检测对象上的平移事件。

当您点击并按住一个`MsGestureHold`将被触发，然后`MSGestureStart`当您开始拖动时其他人将[在 MSDN 上查看此页面](http://msdn.microsoft.com/en-us/library/ie/hh968249%28v=vs.85%29.aspx)以查看可用于检查这些消息的示例（在快速摘录下方）：

> 当用户触摸表面并将手指保持在那里时，它会触发**onmsgesturehold**事件。当用户滑动手指时，会**触发 onmsgesturestart**、**onmsgesturechange**和**onmsgestureend**事件。如果用户快速滑动，则会触发**onmsinertiastart**事件。onmsinertiastart事件之后是一系列**onmsgesturechange**事件，具体取决于滑动的速度，然后**触发****onmsgestureend**事件。**onmsinertiastart** _**event 可以帮助您的代码区分慢速移动和快速轻弹，并做出相应的反应，例如即使与表面的接触中断，物体仍继续移动。**

# html - 如何隐藏我的网页是 iframe 的事实？

> ID：11878326
> 
> 赞同：0
> 
> 时间：2012-08-09T07:04:26.920
> 
> 标签：html, css, iframe

当我创建一个包含 iframe 的网页时，标签会显示在源代码中。

如何隐藏标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:07:20.517

您不能真正“隐藏”标签，但您可以在 Javascript 中生成 iframe 标签。iframe 标签内有很多内容吗？

如果没有，您可以执行例如 HTML：

```
<div id="innocentcontainer"></div> 
```

然后，在 JS 中：

```
document.getElementById("innocentcontainer").innerHTML="<iframe something></iframe>"; 
```

然后你可以从外部加载 javascript，它被很好地隐藏了，虽然如果用户使用 Firefox 或 Chrome，因为他们有一个实时 DOM 查看器:)，你永远无法欺骗他们 =D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:06:12.763

你不能。浏览器需要该标签，您不能向用户隐藏源，但不能向浏览器隐藏。

# android - Android SDK Visualizer getWaveForm 方法

> ID：11878332
> 
> 赞同：2
> 
> 时间：2012-08-09T07:05:08.130
> 
> 标签：android, wave

当我调用 Visualizer 类的 getWaveForm 方法时，我使用这个 [http://vprbbc.streamguys.net/vprbbc24.mp3](http://vprbbc.streamguys.net/vprbbc24.mp3)音频完美地获取数据。但是当我尝试使用 4/5 秒长度的音频时，有时它会在我的字节数组中返回全部 -128，有时它会返回不同的值。但是不同的值是正确的，所有的-128 值都不正确。

这不可能是一个解决方案，我需要一个稳定的解决方案。我需要 getWaveForm 方法将返回不同的值（不是全部 -128）。

任何想法？

-Arefin

# ruby-on-rails - 如何在 Rails 中获取特定时区的特定时间

> ID：11878335
> 
> 赞同：3
> 
> 时间：2012-08-09T07:05:23.193
> 
> 标签：ruby-on-rails, timezone

假设我需要获取柏林时区凌晨 3 点的时间对象。我无法弄清楚这一点。

如果我做，

```
Time.parse("03:00am").in_time_zone('Berlin') 
```

我将当前时区的凌晨 3 点转换为柏林时区。但我需要柏林时区的凌晨 3 点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T07:36:38.627

尝试使用 Time.use_zone 临时设置时区

```
> Time.use_zone("Berlin") do 
>     t = Time.zone.parse("3:00am")
> end
=> Thu, 09 Aug 2012 03:00:00 CEST +02:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:29:23.483

我遇到了同样的问题并且不想更改 Time.zone 因为它在多个请求中仍然存在。

诀窍（也是更安全的方法，因为它不会更改像 Time.zone 这样的任何系统设置）是将时间（AND 区域）放入 Time.parse 可用的格式。这是美国太平洋时间的示例 - 改为插入所需的 TZ 格式时区字符串：

Time.parse("2012-10-1 8:00:00 太平洋时间（美国和加拿大）")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:17:17.707

尝试这个，

```
Time.zone = "Berlin"
Time.zone.parse("03:00am") 
```

# android - 删除 sdcard 中的图像副本

> ID：11878336
> 
> 赞同：1
> 
> 时间：2012-08-09T07:05:25.283
> 
> 标签：android, image, android-sdcard

你好朋友我在我的项目中使用以下代码。

权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CAMERA"/> 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:text="Camera Test" />
    <ImageView android:id="@+id/camera_image"
        android:layout_width="wrap_content" android:layout_height="wrap_content" />
</LinearLayout> 
```

代码（Java 文件）：

```
public class ImageInfo extends Activity {
        private static final int CAMERA_PIC_REQUEST = 1111;
    private ImageView mImage;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mImage = (ImageView) findViewById(R.id.camera_image);
        //1
        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(intent, CAMERA_PIC_REQUEST);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(resultCode != RESULT_CANCELED)   {
            if(requestCode == CAMERA_PIC_REQUEST){
                //2
                System.out.println("Request"+requestCode+"result"+resultCode);
                Bitmap thumbnail = (Bitmap) data.getExtras().get("data");
                //  mImage.setImageBitmap(thumbnail);
                //3
                ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                thumbnail.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
                //4
                File file = new File(Environment.getExternalStorageDirectory()+"/saved_images/image.jpeg");
                try {
                    file.createNewFile();
                    FileOutputStream fo = new FileOutputStream(file);
                    //5
                    fo.write(bytes.toByteArray());
                    fo.close();
                    Intent intent=new Intent( this,Info.class);
                    startActivity(intent);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }
    }
} 
```

我能够成功操作相机并拍摄图像，但正在通过 name_date.jpg 在 android 的 DCIM 目录（默认目录）中创建额外的图像副本，请帮助删除所有这些文件。感谢和问候.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:22:01.487

这是您从 dcim 文件夹中删除文件问题的完整解决方案。

```
just copy and paste this method. And call it whenever necessary.
private void deleteLatest() {
        // TODO Auto-generated method stub
        File f = new File(Environment.getExternalStorageDirectory() + "/DCIM/Camera" );

        //Log.i("Log", "file name in delete folder :  "+f.toString());
        File [] files = f.listFiles();

        //Log.i("Log", "List of files is: " +files.toString());
        Arrays.sort( files, new Comparator<Object>()
                {
            public int compare(Object o1, Object o2) {

                if (((File)o1).lastModified() > ((File)o2).lastModified()) {
                    //         Log.i("Log", "Going -1");
                    return -1;
                } else if (((File)o1).lastModified() < ((File)o2).lastModified()) {
                    //     Log.i("Log", "Going +1");
                    return 1;
                } else {
                    //     Log.i("Log", "Going 0");
                    return 0;
                }
            }

                });

        //Log.i("Log", "Count of the FILES AFTER DELETING ::"+files[0].length());
        files[0].delete();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:19:32.090

与@vipsy 链接的线程一样，您可以指定文件路径URI

```
File fileDir = new File(Environment.getExternalStorageDirectory() +
    "/saved_images");
fileDir.mkdirs();

File file = new File(fileDir, "image.jpg");

Uri outputFileUri = Uri.fromFile(file);
intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri); 
```

这样相机会将图像保存到指定路径而不是 DCIM 文件夹。您不必手动复制它，也不必删除任何内容。

**编辑：**您必须事先在 sdcard 上创建文件夹，也许这就是问题所在。否则，这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:33:48.040

```
 File fileOrDirectory= new File(Environment.getExternalStorageDirectory() +
    "/saved_images");

here fileOrDirectory is a path where you are saving images captured by camera .
you can call this method passing file directory when u need;

 void DeleteRecursive(File fileOrDirectory) {
        if (fileOrDirectory.isDirectory())
            for (File child : fileOrDirectory.listFiles())
                DeleteRecursive(child);

        fileOrDirectory.delete();
    } 
```

# jquery-ui - jquery-ui-autocomplete - 覆盖 _renderMenu 和 _renderItem

> ID：11878339
> 
> 赞同：5
> 
> 时间：2012-08-09T07:05:52.967
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我已经使用 jquery-ui 实​​现了一个自动完成功能。我想将显示的项目数限制为 10，并且每个项目都自定义格式。这是代码

```
$("#text1").autocomplete({
  minLength: 2,
  source: function (request, response) {
  var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i")
  , results = [];
  $.each(source, function (i, value) {
    if (matcher.test(value.value) && $.inArray(value.label, results) < 0) {
    results.push(value.label);
    }
   });

  response(results);
  }
 }).data("autocomplete")
      ._renderMenu = function(ul, items) {
        var self = this;
        $.each(items, function (index, item) {
            if (index < 10) {
              $.ui.autocomplete.prototype._renderItem = function(ul, item) {
                var re = new RegExp("^" + this.term, "i");
                var t = item.label.replace(re, "<span style='font-weight:bold;color: Blue;'>" + "$&" + "</span>");
                var listItem = $("<li></li>")
                               .data("item.autocomplete", item)
                               .append("<a>" + t + "</a>")
                               .appendTo(ul);
                return listItem;

              }
            }
            });
      }; 
```

这似乎不起作用，因为它没有抛出任何结果。对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T09:27:24.250

我想到了。似乎我必须同时覆盖 _renderMenu 和 _renderItem。现在可以了。

# plone - 在 Dexterity 中使用 z3c.relationfield 反向引用

> ID：11878341
> 
> 赞同：2
> 
> 时间：2012-08-09T07:06:02.150
> 
> 标签：plone, dexterity

使用 z3c.relationfield.schema.RelationList 或 RelationChoice 可以维护与其他 Dexterity 内容对象的关系。在 Archetypes 中，我们有一个功能上下文。getBRefs() 以检索引用当前“上下文”对象的对象列表。z3c.relationfield 或 Dexterity 中是否有类似的东西？在 Dexterity 中获取“反向引用”的规范方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T07:18:58.740

以下代码取自

[http://code.google.com/p/dexterity/issues/detail?id=234](http://code.google.com/p/dexterity/issues/detail?id=234)

正在工作中：

```
from Acquisition import aq_inner
from zope.component import getUtility
from zope.intid.interfaces import IIntIds
from zope.security import checkPermission
from zc.relation.interfaces import ICatalog

def back_references(source_object, attribute_name):
    """ Return back references from source object on specified attribute_name """
    catalog = getUtility(ICatalog)
    intids = getUtility(IIntIds)
    result = []
    for rel in catalog.findRelations(
                            dict(to_id=intids.getId(aq_inner(source_object)),
                                 from_attribute=attribute_name)
                            ):
        obj = intids.queryObject(rel.from_id)
        if obj is not None and checkPermission('zope2.View', obj):
            result.append(obj)
    return result 
```

# c# - 多租户应用程序的数据库供应

> ID：11878353
> 
> 赞同：0
> 
> 时间：2012-08-09T07:06:37.513
> 
> 标签：c#, sql-server-2008, multi-tenant

我正在开发一个多租户应用程序，其中将自动执行配置过程。

供应过程将创建一个带有表、过程、函数的新 SQL Server 数据库，并将默认数据插入数据库。

我的问题是执行此过程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:23:30.427

我的感受是：

```
1.Create multiple sets of SQL scripts like DBScripts,TableScripts,ProcScripts ect.
2.In DBScripts,just add create database code and here you can hardcode the db name also.
3.And whenver there are any changes in these scripts you can edit and release the new build for the client.

4.Client just has to click some button on front end to create DB,Tables,Sprocs etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:49:06.290

在尝试从 C# 执行数据库脚本感到头疼之后，我决定使用以下脚本以编程方式恢复数据库。

```
RESTORE FILELISTONLY
FROM DISK = 'C:\BaackUpFile.bak'

RESTORE DATABASE DbName
FROM DISK = 'C:\BaackUpFile.bak'
WITH MOVE 'YourMDFLogicalName' TO 'C:\DataYourMDFFile.mdf',
MOVE 'YourLDFLogicalName' TO 'C:\DataYourLDFFile.ldf' 
```

# php - 从数据库加载更多项目 ~ 无限滚动

> ID：11878365
> 
> 赞同：2
> 
> 时间：2012-08-09T07:07:22.293
> 
> 标签：php, jquery, mysql, ajax, infinite-scroll

我是 ajax/php 的新手，所以我想找出最好的方法。

我有一个 sql 数据库填充 1500 个项目，我正在加载到我的页面中。我想将 30 个项目加载到页面中，然后当用户到达网页底部时，我希望它再加载另外 30 个项目。

到目前为止，我的网页上显示了 30 个项目，并带有一个过滤这些项目的下拉菜单。我还有一个在用户到达页面底部时触发的函数。

任何人都可以帮助我使用 PHP 脚本来完成这项工作并加载更多项目吗？我正在使用的代码如下。

谢谢

**HTML**

```
<section id="filters">
    <select name="entries"  onchange="filterEntries()">
        <option value="*">show all</option>
        <option value=".item323">323</option>
        <option value=".item266">266</option>
        <option value=".item277">277</option>
        <option value=".item289">289</option>
    </select>
</section> <!-- #filters -->

<div id="entries" class="clearfix">
    <div class="ajaxloader"><img src="<?php bloginfo('template_url'); ?>/ajax_load.gif" alt="loading..." /></div><!--ajaxloader-->
</div><!--entries-->
<div class="ajaxloader"><img src="<?php bloginfo('template_url'); ?>/ajax_load.gif" alt="loading..." /></div><!--ajaxloader--> 
```

**jQuery**

```
$(document).ready(function () {
    loadData();
    //Hide Loader for Infinite Scroll
    $('div.ajaxloader').hide();

});

function loadData () {
//Show Loader for main content
    $('#entries .ajaxloader').show();
//Pull in data from database
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        "use strict";
        xmlhttp=new XMLHttpRequest(); 
    }
    else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState===4 && xmlhttp.status===200) {    
        document.getElementById("entries").innerHTML=xmlhttp.responseText;
        //Fire filter function once data loaded
            filterEntries();
            //Hide Loader for main content once loaded
            $('#entries .ajaxloader').hide();
    }
    }
    xmlhttp.open("POST","<?php bloginfo('template_url'); ?>/getentries.php?$number",true);
    xmlhttp.send();
};

//Isotope filter
function filterEntries () {
    var $container = $('#entries');
       $select = $('#filters select');

    $container.isotope({
        itemSelector : '.item'
    });

    $select.change(function() {
    var filters = $(this).val();

    $container.isotope({
            filter: filters
    });
});
};

$(window).scroll(function () {
    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
    $('div.ajaxloader').show('slow');

        //alert("Function to load more entries");

    }
}); 
```

**PHP**

```
<?php
    //Connect to Database
    $con = mysql_connect("localhost", "root", "root");
    if (!$con) {
        die('Could not connect: ' . mysql_error());
    }
    mysql_select_db("awards", $con);

    $sql="SELECT * FROM entry WHERE  status = 'registered' ORDER BY `entry_id` LIMIT 0, 30";

    $result = mysql_query($sql);

    while($row = mysql_fetch_array($result)) {
        //Get award cat ids
        $awardcat =  $row['awards_subcategory_id']  ;

        print "<div class='item item$awardcat clearfix'>";//add award cat id to each div
        print '<img class="image" src="http://localhost:8888/awardsite/wp-content/themes/award/placeholder.jpg" />';
        print "<p > Studio: " . $row['studio'] . "</p>";
        print "<p class='client'> Client: " . $row['client'] . "</p>";
        print "<p class='description'> Description: " . $row['description'] . "</p>";
        print "<p class='solutionprocess'> Solution Process: " . $row['solution_process'] . "</p>";
        print "</div>";

    }

    mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T09:22:16.900

这是一个相当复杂的问题。在尝试从头开始编写您自己的变体之前，我建议您看一下[Infinite Scroll jQuery Plugin](http://www.infinite-scroll.com/)。如果这不能解决它，这是一个可能的解决方案：

**Javascript**

```
$(document).ready(function () {
    loadData( 0 );
    //Hide Loader for Infinite Scroll
    $('div.ajaxloader').hide();

});

function loadData ( last_id ) {
    var $entries = $('#entries'),
        $loader = $('.ajaxloader', $entries).show();
    $.get( '/getentries.php', { last_id : last_id }, function( data ) {
        $entries.append( data ).append( $loader.hide() );
        filterEntries();
    });
};

//Isotope filter - no changes to this code so I didn't include it

$(window).scroll(function () {
    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
        $('div.ajaxloader').show('slow');
        loadData( $( '#entries item:last' ).data('id') )
    }
}); 
```

**PHP**

```
<?php
//Connect to Database
$con = new mysqli( 'localhost', 'root', 'root', 'awards' );
if( $con->connect_errno ) {
    die( 'Could not connect:' . $con->connect_error );
}

$last_id = isset( $_GET['last_id'] ) ? (int)$_GET['last_id'] : 0; 
$stmt = $con->prepare( 'SELECT * FROM entry WHERE status = "registered" AND entry_id > (?) ORDER BY entry_id LIMIT 0, 30' );
$stmt->bind_param( 'i', $last_id );
$stmt->execute();

$result = $stmt->get_result();    
while( $row = $result->fetch_assoc() ) {
    //Get award cat ids
    $awardcat = $row['awards_subcategory_id'];

    print "<div class='item item$awardcat clearfix' data-id='" . $row['entry_id'] . "'>";//add award cat id to each div
    print '<img class="image" src="http://localhost:8888/awardsite/wp-content/themes/award/placeholder.jpg" />';
    print "<p > Studio: " . $row['studio'] . "</p>";
    print "<p class='client'> Client: " . $row['client'] . "</p>";
    print "<p class='description'> Description: " . $row['description'] . "</p>";
    print "<p class='solutionprocess'> Solution Process: " . $row['solution_process'] . "</p>";
    print "</div>";

}
$con->close(); 
```

Javascript 代码向 php 脚本发送一个 AJAX GET 请求，其中包含列表中显示的最后一个条目的 id。然后，PHP 脚本会返回该 id 之后的 30 个条目。原始的 Javascript 文件中有一些 PHP 代码。我删除了它，因为我不知道它的目的是什么（你可能是从 PHP 脚本输出 JS 吗？）。此外，整个`XMLHttpRequest`代码可以缩短为`$.get()`函数。无论如何，您都在使用 jQuery，因此您无需重新发明轮子。我使用该`data-id`属性来传输条目 ID。这是一个 HTML5 特定的属性。如果您不想使用它，只需使用它`id`，但请记住 id 不能以数字开头 - 您应该在其前面加上一个字母。

在 PHP 脚本中，我使用了函数`mysqli`来代替。`mysql_*`从现在开始，您应该使用`mysqli`or `PDO`，因为它们比 (now deprecated) 更可靠和安全`mysql_*`。您的 PHP 安装很可能已经包含这些扩展。请注意，我没有处理数据库查询错误。您可以自己编写该代码。如果您遇到其他类型的错误，请在此处发布，我会尝试修复它们。

# sql - 日期差异（年）包括。年分数

> ID：11878367
> 
> 赞同：6
> 
> 时间：2012-08-09T07:07:36.633
> 
> 标签：sql, sql-server-2008, tsql

有没有一种简单的方法来计算两个日期之间的差异：

1.  表示为年数，包括。年份分数；和
2.  考虑闰年？

例如，2011 年 3 月 1 日和 2012 年 3 月 1 日之间的差值为 1 年。但是，如果我使用 DATEDIFF(day,..,..) 并除以 365，由于闰年，我会得到 1.00274 的（不受欢迎的）答案。

需要明确的是，我也需要任何年份的分数（即不仅仅是年数）。例如，2011 年 3 月 1 日和 2012 年 3 月 3 日之间的差异是 1.005479（1 年 + 2/365 年）。2011 年 3 月 1 日和 2012 年 2 月 29 日之间的差异是 0.997268（0 年 + 365/366 年）

因此，总而言之，上述两个示例的输出（在 DECIMAL(7,6) 中）将是：

1.000000 1.005479 0.997268

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:55:11.857

这是一个查询。但是您的示例中有一个逻辑错误。我认为“2011 年 3 月 1 日和 2012 年 3 月 3 日之间的差异是 1.005479（1 年 + 2/365 年）”应该是（1 年 + 2/366 年），因为 2011 年 3 月 3 日和 2012 年 3 月 3 日之间的 29.02.2012 所以在去年366天。

```
 Declare @BDate datetime
    Declare @EDate datetime
    SET @BDate='2011-03-01'
    SET @EDate='2012-02-29'

    select 

    datediff(year,@BDate,@Edate)- 
    case when dateadd(year,datediff(year,@BDate,@Edate),@BDate)>@Edate then 1 else 0 end 
    +cast(datediff(day,dateadd(year,datediff(year,@BDate,@Edate)-
    case when dateadd(year,datediff(year,@BDate,@Edate),@BDate)>@Edate then 1 else 0 end   ,@BDate),@Edate) as float)/
cast(datediff(day,dateadd(year,-1,@Edate),@Edate) as float) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T08:33:06.623

我认为这可行（我希望选择了您可以遵循的名称）：

```
declare @StartTime datetime
declare @EndTime datetime

select @StartTime = '20110301',@EndTime = '20120303'

select YearsDiffNorm + ((DaysIntoYear * 1.0) / (DaysIntoYear + DaysRemainingInYear))
from (
select
    YearsDiffNorm,
    DATEDIFF(day,DATEADD(YEAR,YearsDiffNorm,@StartTime),@EndTime) as DaysIntoYear,
    DATEDIFF(day,@EndTime,DATEADD(YEAR,YearsDiffNorm+1,@StartTime)) as DaysRemainingInYear
from (
select CASE WHEN DATEADD(year,YearsDiff,@StartTime) > @EndTime then YearsDiff - 1 else YearsDiff END as YearsDiffNorm
from (
    select DATEDIFF(year,@StartTime,@EndTime) as YearsDiff
) t
) t2
) t3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:09:33.113

尝试这个：

```
 DECLARE @stdate datetime,@eddate datetime
    SET @stdate='2007-02-01'
    SET @eddate='2012-03-03'

    ;WITH CTE as (
    select DATEDIFF(yy,@stdate,convert(datetime,cast(DATEPART(year,@eddate) as varchar)+'-'+cast(DATEPART(month,@stdate) as varchar)+'-'+cast(DATEPART(dd,@stdate) as varchar))) yrs,
    DATEDIFF(dd,convert(datetime,cast(DATEPART(year,@eddate) as varchar)+'-'+cast(DATEPART(month,@stdate) as varchar)+'-'+cast(DATEPART(dd,@stdate) as varchar)),@eddate) as dayss,
    CAST(CASE WHEN DATEPART(dd,DATEADD(mm,datediff(mm,-1,(convert(datetime,cast(DATEPART(year,@eddate) as varchar)+'-'+cast(DATEPART(month,@stdate) as varchar)+'-'+cast(DATEPART(dd,@stdate) as varchar)))),-1)) = 29 then 366 else 365 end as float) as ydays
    )
    select yrs+dayss/cast(ydays as float) from CTE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T07:17:03.603

尝试这个，

```
SELECT Cast(DateDiff(yyyy, '2011-03-01', '2012-03-01') As VARCHAR) + 'Yer : '
+ Cast(DateDiff(mm, '2011-03-01', '2012-03-01') As VARCHAR) + 'Mon : '
+ Cast(DateDiff(dd, '2011-03-01', '2012-03-01') As VARCHAR) + 'Dte' 
```

希望这对你有帮助，谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-28T20:47:55.807

```
DECLARE @FromDate DATETIME = '2019-02-28', @ToDate DATETIME = '2020-02-26',
@diff_year_temp int, @diff_year int,@diff_year_frac float,@ToDateDays float,@FromDateDays float,@y_to int,@y_from int,@diff float,
@FromDec float,@JanTo float,@JanToFrac float,@FromDecFrac float,@ToDateplusone datetime,@FromplusToyear datetime

set @diff_year_temp=datediff(year,@FromDate,@ToDate)
set @FromplusToyear=case when DATEPART(day,@FromDate)=29 and datepart(month,@FromDate)=2 then dateadd(day,1,dateadd(year,@diff_year_temp,@FromDate)) else  dateadd(year,@diff_year_temp,@FromDate) end
set @ToDateplusone=dateadd(day,1,@ToDate)
set @y_to = datepart(year,@ToDate)
set @y_from=datepart(year,@FromDate)
set @FromDec=datediff(day,@FromDate,cast(CONCAT(@y_from,'-12-31') as date))+1
set @JanTo=datediff(day,cast(CONCAT(@y_to,'-01-01') as date),@ToDate)+1
set @ToDateDays = DATEDIFF(day,  cast(@y_to as char(4)),  cast(@y_to+1 as char(4))) 
set @FromDateDays = DATEDIFF(day,  cast(@y_from as char(4)),  cast(@y_from+1 as char(4)))

set @FromDecFrac=@FromDec/@FromDateDays
set @JanToFrac=@JanTo/@ToDateDays
set @diff_year=case when @ToDateplusone >= @FromplusToyear  then @diff_year_temp else @diff_year_temp-1 end
set @diff_year_frac=case when @ToDateplusone >= @FromplusToyear then datediff(day,@FromplusToyear,@ToDateplusone)/@ToDateDays  else  @JanToFrac+@FromDecFrac end
set @diff=@diff_year+@diff_year_frac

select @diff 
```

# asp.net-mvc-3 - mvc3中的复选框验证？

> ID：11878368
> 
> 赞同：0
> 
> 时间：2012-08-09T07:07:40.313
> 
> 标签：asp.net-mvc-3, validation, checkbox

我有一个复选框组控件，我想要求用户至少检查一个框，无论他们检查每一个，还是 3 个，甚至只检查一个都没有关系。

```
View code
 ---------
 <% foreach (var item in Model)
             { %>  

                  <%:Html.CheckBox("EmployeId", new { value = item.EmployeeID,@class="required"})%>
                   <span class="field-validation-valid" id="Span1"></span>

                  <%:Html.LabelForModel(item.EmployeeName)%>
                  </div>
                 <%-- <%= Html.CheckBox("Accept", new { @class = "required" })%> 
                  <span class="field-validation-valid" id="Accept_validationMessage"></span>--%> 
          <%} %>                

    </fieldset> 
    <div class="assign_button"> 
```

谁能给我一些帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:46:17.267

你想要客户验证我是对的吗？如果你使用 jQuery，断言这个集合

```
 $('input[type="checkbox"].required:checked'); 
```

大于零。

我的意思是这样的：

```
function validateCheckbox(){
    var count = 0;
    $('input[type="checkbox"].required:checked').each(function() { ++count; } );
    return count > 0;
} 
```

你有按钮`<div class="assign_button">`。在这种情况下，您可以编写：

```
$(function(){
    $('div.assign_button').click(function(){
            if (!validateCheckbox()) {
                alert('Please, check something!');
            }
            else {
                alert('You are wonderful!');
            }
        });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:49:22.497

请在您想要验证它的任何地方调用以下方法。根据您的实现更改 Checkbox 类名称和 div 名称。

```
function ValidateCheckBoxCheckedOrNot()
    {
        var selectedCheckBoxesValue = '';

        $('#DIVID').find("input:checkbox.CheckBoxClassName:checked").each(function (i, selected) {
                                                            if (selectedCheckBoxesValue.length == 0) {
                                                                selectedCheckBoxesValue += $(selected).val();
                                                            }
                                                            else {
                                                                selectedCheckBoxesValue += ',' + $(selected).val();
                                                            }});
            // Here you also get all the comma separated values if you want else use below method for it
        if(selectedCheckBoxesValue.length == 0)
        {
            alert("Select atleast one checkbox");
        }
    } 
```

或者您也可以使用以下方式进行操作

```
function ValidateCheckBoxCheckedOrNot()
    {
        var selectedCheckBoxes = $('#DIVID').find("input:checkbox.CheckBoxClassName:checked").length;

        if(selectedCheckBoxes==0)
        {
            alert("Select atleast one checkbox");
        }
    } 
```

**编辑后的帖子**

```
<div id="CheckBoxDiv">
<% foreach (var item in Model)
             { %>  

                  <%:Html.CheckBox("EmployeId", new { value = item.EmployeeID,@class="employeeCheckBox"})%>
                   <span class="field-validation-valid" id="Span1"></span>

                  <%:Html.LabelForModel(item.EmployeeName)%>
                  </div>
                 <%-- <%= Html.CheckBox("Accept", new { @class = "required" })%> 
                  <span class="field-validation-valid" id="Accept_validationMessage"></span>--%> 
          <%} %> 
</div>   

<script type="text/javascript">
    //Call following method on your button click event.
    function ValidateCheckBoxCheckedOrNot()
            {
                var selectedCheckBoxes = $('#CheckBoxDiv').find("input:checkbox.employeeCheckBox:checked").length;

                if(selectedCheckBoxes==0)
                {
                    alert("Select atleast one checkbox");
                }
            }
</script> 
```

# javascript - 如何直接附加 Json 对象？

> ID：11878373
> 
> 赞同：1
> 
> 时间：2012-08-09T07:07:59.423
> 
> 标签：javascript, arrays, json, html, jsonp

我的 json 对象是

```
var myjson={ "elements" :[{},{},.....]}; 
```

现在我想在不干扰现有元素的情况下添加更多元素。

而且我不想使用旧元素。我的意思是不喜欢这种方法

```
var elements=myjson.elements;
elements=elements.concat(newelementslist); 
```

有没有其他方法像

```
myjson.elements.append(newelementlist); 
```

请给我一个简单的解决方案。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-09T08:35:35.110

尝试这个

```
myjson.elements.push({newelement:"newelement"}); 
```

# xcode - xcode 图像库一个接一个地加载图像

> ID：11878377
> 
> 赞同：0
> 
> 时间：2012-08-09T07:08:16.907
> 
> 标签：xcode, image, load, uisegmentedcontrol, viewdidload

我目前正在开发一个带有四个视图的 iPad 应用程序，可以使用分段控件进行查看。其中一个视图是我使用 UIScrollView 创建的图片库。问题是所有图像都在 viewDidLoad 方法中加载到视图中，因此当我在分段控件中按下“图像”时，大约需要一秒钟，直到控件突出显示“图像”并显示非常不方便的视图。I'd like to achieve that when "images" is chosen the segmented control switches immediately and the view is being loaded and then the images should be loaded and put into the scroll view one after another.

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:17:50.683

您可以从 viewDidLoad 发布代码吗？

您是从远程位置加载图像吗？

如果您要远程加载图像，您可能需要查看： [https ://github.com/nicklockwood/AsyncImageView](https://github.com/nicklockwood/AsyncImageView)

它是一个异步图像查看器，在加载图像时还提供图像占位符。

此外，您可能希望在 viewDidAppear 中加载图像，这样视图就会出现，然后它开始加载图像......

# tridion - Tridion 安装后面临的问题

> ID：11878378
> 
> 赞同：10
> 
> 时间：2012-08-09T07:08:21.907
> 
> 标签：tridion, tridion-2011

![在此处输入图像描述](../Images/133560dcce1b1c95db1ce0b293ec7c53.png)我需要一些有关 SDL Tridion 安装的帮助。

我们按照安装指南中提供的说明完成了 SDL Tridion 的安装。

我们可以使用 Content Manager 管理员（安装所有者）启动该站点。但是，当我们单击 UI 中的“管理”部分时，没有得到管理员可以执行的任何选项，即无法创建用户、目标类型、组等……我什至找不到存在于系统。

当我单击显示用户时出现错误。

请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T11:09:28.093

我尝试在修复模式下再次安装 Tridion Content Manager。完成后，我对 IIS 的绑定设置进行了一些更改，现在我正在执行所有管理操作。

我的问题现在解决了。感谢所有回复并尝试帮助您的人。

-阿斯旺

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:55:00.040

您提到您可以访问 UI 的管理部分，这表明您的用户确实具有正确的（管理）权限。

您还提到用户列表是空的，这也是正确的，您刚刚安装所以没有可见的用户。在安装过程中创建的管理员用户和 MTSUser 帐户都被隐藏，因为它们是受保护的用户。

至于添加新用户，您首先需要获取用户列表（即使它是空的），然后才能将新用户添加到该列表中。因此，从“用户”菜单中，选择“显示用户”，这应该会启用“新用户”选项，然后您可以选择该选项。目标类型、发布目标、协议模式和功能区工具栏中的大多数其他选项也是如此。

![显示用户命令](../Images/b6f217f7119cad667f79761aee1fe818.png)

# windows - 值未在 For 循环中设置为变量

> ID：11878379
> 
> 赞同：0
> 
> 时间：2012-08-09T07:08:23.077
> 
> 标签：windows, batch-file, dos

当我执行以下循环时，%%a 中的值未正确设置为 Result1。我应该怎么做才能纠正这个？

```
for /r %%i in (*.dll) do (

    echo %%i
    set Result1=        
    for /F "delims=" %%a in ('corflags "%%i" ^| findstr "PE32"') do set Result1=%%a
    echo %Result1%  
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:34:38.907

问题在于批处理解释脚本的方式。您应该启用并使用**延迟扩展**：

*   [http://www.robvanderwoude.com/variableexpansion.php](http://www.robvanderwoude.com/variableexpansion.php)
*   [http://batcheero.blogspot.ch/2007/06/how-to-enabledelayedexpansion.html](http://batcheero.blogspot.ch/2007/06/how-to-enabledelayedexpansion.html)

# ruby-on-rails - 无法将表格导出到 Excel

> ID：11878380
> 
> 赞同：0
> 
> 时间：2012-08-09T07:08:22.933
> 
> 标签：ruby-on-rails, export-to-excel

我正在观看[http://railscasts.com/episodes/362-exporting-csv-and-excel?view=asciicast](http://railscasts.com/episodes/362-exporting-csv-and-excel?view=asciicast)关于导出表格并遵循所有步骤。

我在我的 aplication.rb 中有：

```
 require 'csv' 
```

在 mime_types.rb 中添加了 MimeType：

```
 Mime::Type.register "application/xls", :xls 
```

我的控制器：

```
def index

if params[:report] && params[:report][:start_date] && params[:report][:end_date]
 start_date = params[:report][:start_date]
 end_date = params[:report][:end_date]
 @financial_reports = current_user.financial_reports.where(:created_at => start_date.to_date..end_date.to_date)

 respond_to do |format|
  format.html # index.html.erb
  format.csv { send_data @financial_reports.to_csv }
  format.xls
  format.json { render json: @financial_reports }
 end
end 
```

结尾

在我的模型中：

```
def self.to_csv(options = {})
  CSV.generate(options) do |csv|
  csv << column_names
  all.each do |product|
    csv << product.attributes.values_at(*column_names)
  end
end 
```

结尾

最后 - 视图中的链接：

```
<%if @financial_reports%>  
 Download:
 <%= link_to "CSV", financial_reports_path(format: "csv") %> |
<%= link_to "Excel", financial_reports_path(format: "xls") %>
 ...
 <%end%> 
```

当我单击 Excel 链接时出现错误：

```
 undefined method `each' for nil:NilClass 
```

但我确实在表（html）中看到了数据！

另外，当我单击 CSV 时：

```
 Template is missing 
```

在配置文件中添加某些内容时，我重新启动了我的应用程序。

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:10:43.780

您的代码中几乎没有错误

```
@financial_reports = current_user.financial_reports.where(:created_at => start_date.to_date..end_date.to_date) 
```

您正在根据开始日期和结束日期过滤财务报告。它将返回您的财务报告集合。所以你不能直接调用@financial_reports.to_csv。另一种方法可以将其作为方法的参数发送，例如

```
 format.csv { send_data FinancialReport.to_csv(@financial_reports) } 
```

并且在模型中

```
def self.to_csv(reports,options = {})
  CSV.generate(options) do |csv|
  csv << column_names
  reports.each do |product|
    csv << product.attributes.values_at(*column_names)
  end
end 
```

模板丢失 - 当您没有相应的视图文件时会发生错误

检查您是否具有参考[http://railscasts.com/episodes/362-exporting-csv-and-excel?view=asciicast中指定的 /app/views/products/index.xls.erb 文件](http://railscasts.com/episodes/362-exporting-csv-and-excel?view=asciicast)

# zend-framework - Zend Framework：视图究竟是如何工作的？

> ID：11878381
> 
> 赞同：0
> 
> 时间：2012-08-09T07:08:22.443
> 
> 标签：zend-framework

我的 PurchaseController 中有这个功能。

```
 public function viewAction()
    {
    $detail = new Application_Model_Dbtable_Purchasedetails();
    $purchaseid = $this->getRequest()->getParam('purchaseid');
    $select = $detail->select()
    ->from(array('c' => 'purchasedetails'))
    ->join(array('p' => 'product'), 'p.productid = c.productid')
    ->where('purchaseid = ?', $purchaseid)
    ->setIntegrityCheck(false);
    $fetch = $detail->fetchAll($select);
    $this->view->purchase = $fetch;
    } 
```

我的 view.phtml 中有这段代码

```
foreach($this->view as $fetch) :?>
<tr>
<td><?php echo $this->escape($detail['productid']);?></td>
<td><?php echo $this->escape($detail['name']);?></td>
<td><?php echo $this->escape($detail['quantity']);?></td>
<td><?php echo $this->escape($detail['price']);?></td>
<td><?php echo $this->escape($detail['price']*$detail['quantity']);?> </td>
</tr> 
```

但是，我收到此错误消息。

```
Warning: Invalid argument supplied for foreach() in 
```

这个错误的原因和解决方法是什么？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:38:08.710

foreach 中的参数必须是 $this->purchase 而不是 $this->view。

```
foreach($this->purchase as $fetch) {
    // Your code here
} 
```

Zend_Controller_Action 使用类变量 $this->view 将任何变量加载到您的视图中，它的值将被给出，而不是变量本身。这就是为什么没有设置 $this->view 的原因。

因此，只需在视图中省略 ->view，例如 $this->view->variableName 总是在您的视图脚本中变为 $this->variableName。

# ocaml - 使 ocamlbuild 忽略目录

> ID：11878385
> 
> 赞同：2
> 
> 时间：2012-08-09T07:08:49.570
> 
> 标签：ocaml, ocamlbuild

有没有办法告诉 ocamlbuild 不要进入某些目录？

我有 _tags 里面有以下内容：

```
<dir1> or <dir2>: include 
```

但是 ocamlbuild 表示其中有一些 .dll `dir3`（在我清理它们之前拒绝构建），不应使用该`_tags`配置进行扫描。手册里什么都查不到。

我在 Debian Linux 上，不要对 .dll 有误解。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T07:55:28.987

```
<dir3>: -traverse 
```

ocamlbuild 默认递归遍历所有目录（更准确地说：当 _tags 或 myocamlbuild.ml 存在时）。

# c# - c# 通过服务引用使用 SSL Web 服务

> ID：11878389
> 
> 赞同：0
> 
> 时间：2012-08-09T07:09:18.290
> 
> 标签：c#, web-services, visual-studio-2008, webservice-client

我必须在安全服务器中使用 Web 服务，在 https 中，带有证书和登录名。

所以我在 VS2008 中做了一个服务参考。

```
 static void Main(string[] args)
    {
        Console.WriteLine("Value of code TR3A ?\n");
        String codeTR = Console.ReadLine();

        string responseFromServer ="";
        System.Net.ServicePointManager.CertificatePolicy = new MyPolicy();

        serviceTrains.TrainServiceClient myTrainService = new serviceTrains.TrainServiceClient();

        responseFromServer = myTrainService.GetListTrainsAtGare(codeTR).ToString();

        console.WriteLine(responseFromServer);
    } 
```

在我的控制台应用程序中，我想编写我检索到的 json，但我有一个错误：

InvalidOperationException：ChannelFactory.Endpoint 上的 Address 属性为空。ChannelFactory 的端点必须指定一个有效的地址。

但如果我去[https://blabla.com/TrainService.svc/GetListTrainsAtGare/COE](https://blabla.com/TrainService.svc/GetListTrainsAtGare/COE)它可以工作......

另一个问题：我不能做`myTrainService.Credentials`，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:19:39.287

该错误告诉您没有指定端点。通常，Web 服务引用将存储您从 app.config 中获取 wsdl 的端点，但您可能以不同的方式生成代码并且没有提供默认值。

在您的代码中，如果服务具有 Url 属性，您可以尝试以下操作。

```
myTrainService.Url = "https://blabla.com/TrainService.svc/GetListTrainsAtGare/COE"; 
```

将端点放在配置中并通过引用条目也是一个好主意`System.Configuration.ConfigurationManager`

要解决您的第二个问题，可能更适合另一个 SO 问题：您必须提供有关连接类型和安全性的更多上下文，才能获得准确的答案。

# c# - 如何从 wf4-wcf-server 异步通知客户端？

> ID：11878391
> 
> 赞同：1
> 
> 时间：2012-08-09T07:09:31.867
> 
> 标签：c#, wcf, asynchronous, workflow-foundation-4, wcf-client

在过去的几天里，我花了很多时间寻找如何将简单消息从工作流（WF4）服务器发送到客户端（在我的情况下为 WPF）的解决方案。

存在一些如何回复请求（通过回调）的示例，但我找不到任何如何异步联系客户端的示例。

我希望能够进行这样的交流：

*   [上午 8:00] 客户：“您好服务器，这是我的请求。请使用此配方开始您的工作流程 'MakeCoffee'。”。
*   [上午 8 点 01 分] WF-Server：“您好，客户端，我在上面。”
*   [8:05 am] WF-Server：“我找不到咖啡。我会买一些。”
*   [8:10 am] WF-Server：“我在烧水。”
*   [上午 8 点 15 分] WF-Server：“你想要糖吗？”
*   （上午 8 点 17 分）客户：“是的。”
*   [上午 8 点 18 分] WF-Server：“我完成了。”

到目前为止，我找到了以下解决方案：

## 1\. WCF - 带有回调通道的服务

[这个例子](https://stackoverflow.com/questions/5739501/how-can-a-wcf-service-raise-events-to-its-clients)看起来很酷，但我不知道如何将它与我的 Workflow-Service 一起使用——因为没有“实现服务”类。一切都是可视的，所以我不能应用“SubscribeClient”方法（或者至少我不知道在哪里放置服务实现）。

## 2\. 带有通知事件的工作流

[这个例子](http://code.msdn.microsoft.com/windowsdesktop/Windows-Workflow-eaa24bdb#content)是一个很好的解决方案——但是（据我的理解）这不适用于单独的工作流服务器——它似乎要求工作流服务器和客户端是相同的。

## 3\. 访问 OperationContext

[此示例](http://msdn.microsoft.com/en-us/library/ee834517.aspx)在客户端创建了一个 WorkflowServiceHost，但它不是很容易处理，我无法根据我的要求对其进行调整。

**有谁知道如何将消息从（单独的）工作流服务器发送到客户端的方便解决方案/模式？**客户端不知道服务器何时可以向他发送消息以及消息数量。

我是 WF4 的新手，非常感谢每一个提示/建议/想法。

提前致谢，

蒂莫

# 更新

根据莫里斯的评论，我尝试在我的客户中使用一个简单的服务，但不幸的是，我的客户没有收到并显示任何消息。

这是我的客户代码：

```
public partial class MainWindow : Window  
{  
    private ServiceHost _serviceHost;  
    private void Window_Loaded(object sender, RoutedEventArgs e)  
    { 
        ApplicationInterface._app = this;  
        //prepare the serviceHost  
        string clientAddress = "http://localhost:8000/ClientService";  
        System.ServiceModel.Channels.Binding bBinding = new BasicHttpBinding();  
        _serviceHost.AddServiceEndpoint(typeof(IClientService), bBinding, clientAddress);  
        _serviceHost.Open();  
    }

    public ListBox GetEventListBox()
    {
        return this.lstEvents;
    }
} 
```

这是我的 IClientService 接口：

```
[ServiceContract]  
public interface IClientService  
{  
    [OperationContract(IsOneWay=true)]  
    void MeldeStatus(String statusText);  
} 
```

这是 IClientService-Interface 的实现：

```
public class ClientService : IClientService  
{  
    public void MeldeStatus(string statusText)  
    {  
        ApplicationInterface.AddEvent(statusText);  
    }  
} 
```

这是静态应用程序接口：

```
public static class ApplicationInterface  
{  
    public static MainWindow _app { get; set; }  

    public static void AddEvent(String eventText)  
    {  
        if (_app != null)  
        {  
            new ListBoxTextWriter(_app.GetEventListBox()).WriteLine(eventText);  
        }  
    }  
} 
```

这是 ListBoxTextWriter 类，它应该将消息添加到给定的 ListBox：

```
public class ListBoxTextWriter : TextWriter
{
    const string textClosed = "This TextWriter must be opened before use";

    private Encoding _encoding;
    private bool _isOpen = false;
    private ListBox _listBox;

    public ListBoxTextWriter()
    {
        // Get the static list box
        _listBox = ApplicationInterface._app.GetEventListBox();
        if (_listBox != null)
            _isOpen = true;
    }

    public ListBoxTextWriter(ListBox listBox)
    {
        this._listBox = listBox;
        this._isOpen = true;
    }

    public override Encoding Encoding
    {
        get
        {
            if (_encoding == null)
            {
                _encoding = new UnicodeEncoding(false, false);
            }
            return _encoding;
        }
    }

    public override void Close()
    {
        this.Dispose(true);
    }

    protected override void Dispose(bool disposing)
    {
        this._isOpen = false;
        base.Dispose(disposing);
    }

    public override string ToString()
    {
        return "";
    }

    public override void Write(char value)
    {
        if (!this._isOpen)
            throw new ApplicationException(textClosed); ;

        this._listBox.Dispatcher.BeginInvoke
            (new Action(() => this._listBox.Items.Add(value.ToString())));
    }

    public override void Write(string value)
    {
        if (!this._isOpen)
            throw new ApplicationException(textClosed); ;

        if (value != null)
            this._listBox.Dispatcher.BeginInvoke
                (new Action(() => this._listBox.Items.Add(value)));
    }

    public override void Write(char[] buffer, int index, int count)
    {
        String toAdd = "";

        if (!this._isOpen)
            throw new ApplicationException(textClosed); ;

        if (buffer == null || index < 0 || count < 0)
            throw new ArgumentOutOfRangeException("buffer");

        if ((buffer.Length - index) < count)
            throw new ArgumentException("The buffer is too small");

        for (int i = 0; i < count; i++)
            toAdd += buffer[i];

        this._listBox.Dispatcher.BeginInvoke
            (new Action(() => this._listBox.Items.Add(toAdd)));
    }
} 
```

我的 WF-Server 使用这个发送活动：

```
<Send Action="MeldeStatus" EndpointConfigurationName="BasicHttpBinding_Client" sap:VirtualizedContainerService.HintSize="255,90" OperationName="MeldeStatus" ProtectionLevel="None" ServiceContractName="p:IClientService">
  <SendParametersContent>
    <p1:InArgument x:TypeArguments="x:String" x:Key="statusText">Yes, it works.</p1:InArgument>
  </SendParametersContent>
</Send> 
```

这是我在 WF 服务器上的端点的配置：

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>        
      <binding name="DefaultHTTPBinding" allowCookies="true" />
    </basicHttpBinding>
  </bindings>    
  <behaviors>
    <serviceBehaviors>
      <behavior>
        <serviceMetadata httpGetEnabled="true"/>          
        <serviceDebug includeExceptionDetailInFaults="true"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>    
  <services>
    <service name="WFServer.ReklamationErfassen">
      <endpoint address="http://localhost:7812/ReklamationErfassen.xamlx"
                binding="basicHttpBinding"
                bindingConfiguration="DefaultHTTPBinding"
                contract="IReklamationService" />
    </service>
  </services>
  <client>      
      <endpoint address="http://localhost:8000/ClientService" binding="basicHttpBinding"
          bindingConfiguration="DefaultHTTPBinding" contract="IClientService"
          name="BasicHttpBinding_Client" />
  </client>
</system.serviceModel>
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

我没有收到任何消息、错误或警告 - 有人可以快速检查给定的代码吗？

再次感
谢蒂莫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:32:36.540

有很多方法可以做到这一点，但最简单的两种方法是：

*   使用 Send 活动将 SOAP 消息发送到托管客户端应用程序的 WCF 终结点。如果客户端需要响应，只需添加一个接收活动来等待答案。
*   使用数据库表将消息写入其中。客户端应用程序轮询消息并将这些消息显示给用户。如果需要回复，您可以使用回复恢复自定义活动的书签。

第一个取决于 WCF 和在 WorkflowServiceHost 中托管的响应。第二种方法更通用，不依赖于 WCF，但需要更多代码和自定义活动。

# string - 使用 JavaCC 解析字符串

> ID：11878392
> 
> 赞同：5
> 
> 时间：2012-08-09T07:09:34.393
> 
> 标签：string, parsing, token, javacc

我试图想出一种使用 JavaCC 解析字符串而不会错误地将其与另一个令牌匹配的好方法。这些字符串应该能够包含空格、字母和数字。

我的标识符和数字令牌如下：

```
<IDENTIFIER: (["a"-"z", "A"-"Z"])+>
<NUMBER: (["0"-"9"])+> 
```

我当前的字符串标记是：

```
<STRING: "\"" (<IDENTIFIER> | <NUMBERS> | " ")+ "\""> 
```

理想情况下，我只想保存引号内的内容。我有一个单独的文件，我在其中实际保存变量和值。我应该删除那里的引号吗？

我最初在解析器文件中有一个方法，如下所示：

```
variable=<INDENTIFIER> <ASSIGN> <QUOTE> message=<IDENTIFIER> <QUOTE>
{File.saveVariable(variable.image, message.image);} 
```

但是，正如您可能猜到的那样，这不允许空格或数字。对于变量名等标识符，我只想允许字母。

因此，我只想就如何捕获字符串文字获得一些建议。特别是，我想制作如下字符串：

```
" hello", "hello ", " hello " and "\nhello", "hello\n", "\nhello\n" 
```

在我的语法中有效。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T18:35:15.997

通过第一个解析器时，`"`您的解析器希望进入 STRING STATE 并将其留在下一个 (Bonus: unquoted) `"`。

像：

```
TOKEN:
{
  <QUOTE:"\""> : STRING_STATE
}

<STRING_STATE> MORE:
{
  "\\" : ESC_STATE
}

<STRING_STATE> TOKEN:
{
  <ENDQUOTE:<QUOTE>> : DEFAULT
| <CHAR:~["\"","\\"]>
}

<ESC_STATE> TOKEN:
{
  <CNTRL_ESC:["\"","\\","/","b","f","n","r","t"]> : STRING_STATE
} 
```

您可以像这样使用它：

```
/**
 * Match a quoted string.
 */
String string() :
{
  StringBuilder builder = new StringBuilder();
}
{
  <QUOTE> ( getChar(builder) )* <ENDQUOTE>
  {
    return builder.toString();
  }
}

/**
 * Match char inside quoted string.
 */
void getChar(StringBuilder builder):
{
  Token t;
}
{
  ( t = <CHAR> | t = <CNTRL_ESC> )
  {
    if (t.image.length() < 2)
    {
      // CHAR
      builder.append(t.image.charAt(0));
    }
    else if (t.image.length() < 6)
    {
      // ESC
      char c = t.image.charAt(1);
      switch (c)
      {
        case 'b': builder.append((char) 8); break;
        case 'f': builder.append((char) 12); break;
        case 'n': builder.append((char) 10); break;
        case 'r': builder.append((char) 13); break;
        case 't': builder.append((char) 9); break;
        default: builder.append(c);
      }
    }
  }
} 
```

HTH。

# html - 文件上传在 Firefox 3.6 上没有成功，而在 Firefox 2.0 上成功

> ID：11878396
> 
> 赞同：2
> 
> 时间：2012-08-09T07:09:53.747
> 
> 标签：html, character-encoding, multipartform-data

我在 Firefox 3.6 上的应用程序上的文件上传功能遇到了一些问题。文件上传功能在 firefox 2.0 上是成功的，但最近我们的客户升级到 firefox 3.6 并且该功能停止工作。

我访问了许多表格，但找不到此问题的实际原因。“multipart/form-data”的代码是我们使用 CONTENT TYPE 标头和 enctype 作为 multipart/form-data。

CONTENT=\"text/html; charset=utf-8\ enctype="multipart/form-data"

utf-8 和“multipart/form-data”的组合对 Firefox 3.6 版本有问题吗？？？

使用的Tomcat版本也是5.0

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:15:17.177

Firefox 3.x 已经过时了。Mozilla 不再支持它。所以如果你在 firefox 3.x 上遇到问题，你至少应该升级到 4.x。您是否在其他几代 FF 上尝试过您的应用功能？

# objective-c - 如何使用 GCD 或线程

> ID：11878398
> 
> 赞同：0
> 
> 时间：2012-08-09T07:09:55.430
> 
> 标签：objective-c

在当前应用程序中，数据的上传和下载是使用 json webservice 完成的。例如：对于上传，我将 json 字符串发送到 webservice，webservice 将该数据上传到我的 sql server 数据库。

当我触发一些事件时，所有这些事情都会完成。

1.对于json字符串的转换，我使用了SBJson。2.对于 HTTP 请求，我使用了 NSURLConnection。

我的要求：

目前，设备和服务器之间的所有通信都是由主线程完成的。我的要求是不要给主线程带来负载。相反，它使用后台线程发生。这个后台线程应该负责发送请求并接收响应。

问题：

我需要使用后台线程或使用 GCD 发送数据，以便在后台上传时应用程序 UI 不会阻塞。但是当我在我的应用程序中实现它时，它没有按预期工作。我的线程正在退出并且不等待响应并阻塞 UI。让我指导我需要处理哪些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:16:29.950

试一试之前的帖子（也许具有更高代表的人也可以解决为 dup ）：

[iOS：如何执行 HTTP POST 请求？](https://stackoverflow.com/questions/5537297/ios-how-to-perform-a-http-post-request)

为了快速取胜（即使官方不支持它），你可以试试这个库：http: [//allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

# redgate - 如何使用 SmartAssembly 手动控制依赖关系？

> ID：11878400
> 
> 赞同：3
> 
> 时间：2012-08-09T07:10:01.950
> 
> 标签：redgate, smartassembly

我有几个想要使用 RedGate 的 SmartAssembly 混淆和嵌入的库。然而，SmartAssembly 的 UI 很奇怪，因为它只允许我嵌入它识别的依赖项。在我的场景中，我有一些没有直接链接的依赖项，因此 SmartAssembly 忽略了它们。

有没有办法让 SmartAssembly 包含我想要的任何程序集，而不仅仅是其扫描识别的程序集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:22:14.687

SmartAssembly 只允许您嵌入它可以检测到的程序集，即在您正在保护的程序集的元数据中直接引用的程序集，或者它的依赖项之一。对于后期绑定的程序集，您唯一的选择是将程序集单独包含在您的分发中。

# c# - 验证 XML 中的重复值

> ID：11878401
> 
> 赞同：0
> 
> 时间：2012-08-09T07:10:05.693
> 
> 标签：c#, xml, winforms

下面的代码是`customerRecord`在 XML 文件中追加 a 的函数。我这里有两个问题：

1.追加记录时，如何检查xml中是否已经存在`id`and的值？？2.如何按或按 客户搜索并显示？？`Mobile`
`id``Mobile``textboxes`

```
private const string FileName = @"C:\test\Person.xml";

private void button1_Click(object sender, EventArgs e)
{    
    var xmlDoc = new XmlDocument();

    xmlDoc.Load(FileName);

    var subRoot = xmlDoc.CreateElement("Customer");
    subRoot.SetAttribute("id", textBox6.Text.Trim());

    var firstName = xmlDoc.CreateElement("FirstName");
    var xmlTextUserName = xmlDoc.CreateTextNode(textBox1.Text.Trim());
    firstName.AppendChild(xmlTextUserName);
    subRoot.AppendChild(firstName);
    if (xmlDoc.DocumentElement != null) 
        xmlDoc.DocumentElement.AppendChild(subRoot);

    var email = xmlDoc.CreateElement("LastName");
    var xmlTextEmail = xmlDoc.CreateTextNode(textBox2.Text.Trim());
    email.AppendChild(xmlTextEmail);
    subRoot.AppendChild(email);
    if (xmlDoc.DocumentElement != null) 
        xmlDoc.DocumentElement.AppendChild(subRoot);

    var mobile = xmlDoc.CreateElement("Mobile");
    var xmlTextMobile = xmlDoc.CreateTextNode(textBox3.Text.Trim());
    mobile.AppendChild(xmlTextMobile);
    subRoot.AppendChild(mobile);
    if (xmlDoc.DocumentElement != null)
        xmlDoc.DocumentElement.AppendChild(subRoot);

    var address = xmlDoc.CreateElement("Address");
    var xmlTextAddress = xmlDoc.CreateTextNode(textBox4.Text.Trim());
    address.AppendChild(xmlTextAddress);
    subRoot.AppendChild(address);
    if (xmlDoc.DocumentElement != null) 
        xmlDoc.DocumentElement.AppendChild(subRoot);

    var country= xmlDoc.CreateElement("Country");
    var xmlTextCountry = xmlDoc.CreateTextNode(textBox5.Text.Trim());
    country.AppendChild(xmlTextCountry);
    subRoot.AppendChild(country);
    if (xmlDoc.DocumentElement != null)
        xmlDoc.DocumentElement.AppendChild(subRoot);

    xmlDoc.Save(FileName);
    if (File.Exists(FileName)) 
        return;

    var textWritter = new XmlTextWriter(FileName, null);
    textWritter.WriteStartDocument();
    textWritter.WriteStartElement("CustomerRecord");
    textWritter.WriteEndElement();
    textWritter.Close();
}
//Search by id or by Mobile
private void button3_Click(object sender, EventArgs e)
{

} 
```

示例 XML：

```
<CustomerRecord>
  <Customer id="6786">
    <FirstName>khkjh</FirstName>
    <LastName>jkhjkh</LastName>
    <Mobile>887897</Mobile>
    <Address>jk</Address>
    <Country>fdgfdg</Country>
  </Customer>
</CustomerRecord> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:14:33.263

有多种方法（DataSet/DataTable、DOM、XmlSerialization）来解析（读取/搜索/操作）XML 文档，但我想建议`LINQ-XML`。

```
XDocument doc = XDocument.Load(file);

string id="21";
XElement element = doc.Descendants("Customer")
                   .Where(p => p.Attribute("id").Value == id).FirstOrDefault();
if (element != null)
 {
  //found
   string firstName = (string)element.Element("FirstName");
   string mobile = (string)element.Element("Mobile");
 }
else
 {
  //Not found
  //To add a customer
   var ele = new XElement("Customer");
   ele.SetAttributeValue("id", id);
   ele.Add(new XElement("FirstName", firstName));
   ele.Add(new XElement("Mobile",mobile));
   doc.Root.Add(ele);
   doc.Save(file);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:35:13.407

您可以创建一个类似于 XML 模式本身的对象，然后将该对象用于其他操作。

从 xml 模式创建对象 -[如何将 XML 映射到 C# 对象](https://stackoverflow.com/questions/87621/how-do-i-map-xml-to-c-sharp-objects)

例如，从底部开始；

```
// Create a Customer class.
public class Customer
{
    public string FirstName {get; set;}
    public string LastName {get; set;}
    public string Mobile {get; set;}
    public string Address {get; set;}
    public string Country {get; set;}
}

// Create a CustomerRecord class.
public class CustomerRecord
{
    public Customer customer {get; set;}
    public int Id {get; set;}
}

// Create a collection of CustomerRecords
public List<CustomerRecord> custRecords {get; set;} 
```

接下来需要做的是，遍历 XML 并将每个值添加到对象中。将 xml 作为一个对象保存在手中总是更好，因为您永远不知道将来需要进行什么样的操作。

如果你现在需要做一些验证或搜索操作，你可以很容易地在 List 对象本身上做。

# android - android 4.0.3 ImageSpan重叠

> ID：11878403
> 
> 赞同：1
> 
> 时间：2012-08-09T07:10:11.820
> 
> 标签：android

XML 布局：

```
<EditText
    android:id="@+id/EditText01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</EditText> 
```

插入两个 ImageSpan：

```
 EditText et = (EditText) findViewById(R.id.EditText01);
    et.setText("E\n Toooooooooooooo");

    SpannableString ss = new SpannableString(et.getText());

    ImageSpan span1 = new ImageSpan(this, R.drawable.pintu_joint,
            ImageSpan.ALIGN_BASELINE);
    ss.setSpan(span1, 0, 1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

    ImageSpan span2 = new ImageSpan(this, R.drawable.pintu_freedom,
            ImageSpan.ALIGN_BASELINE);
    ss.setSpan(span2, 3, 4, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

    et.setText(ss); 
```

两张图片重叠（对不起，我不允许发布图片）。

在 android 2.3 中可以，但在 4.0+ 中不行。

提前致谢。

# xcode - 如何在 OS X 上配置滚动？

> ID：11878406
> 
> 赞同：1
> 
> 时间：2012-08-09T07:10:19.380
> 
> 标签：xcode, macos, profiling, instruments

我想在我的应用程序中分析滚动性能。我知道这在 iOS 上是可能的，但我在 OS X 上找不到。有什么办法吗？

# java - NetBeans - 每次我必须调试时都必须清理构建

> ID：11878407
> 
> 赞同：2
> 
> 时间：2012-08-09T07:10:29.207
> 
> 标签：java, netbeans, netbeans-7

我有三台运行 Netbeans 的 PC。

在两个这个问题没有出现。即更改代码并点击调试按钮，更改的代码在调试中受到影响。

而在第三台 PC 中，我必须重建整个项目（大约需要 1 分 30 秒）才能在应用的调试中看到更改的代码。我究竟做错了什么？如何解决这个问题？

保存时编译在所有相关项目上均已启用。

NetBeans 7.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:43:14.707

`C:\Users\{user}\.netbeans\7.1.1\var\cache`尝试在 Windows 7 下删除缓存

# javascript - 此 javascript 代码无法正常工作（if-else 语句）

> ID：11878409
> 
> 赞同：0
> 
> 时间：2012-08-09T07:10:34.417
> 
> 标签：javascript, if-statement

这个 javascript 代码不能正常工作（if-else 语句）。它有输出，但是当我输入 term=35 时，总是显示 term=36 的计算。有人可以帮我解决这个问题吗？谢谢！我只是编程的新手。

```
<script language="javascript" type="text/javascript">
function calc1(form) {

    var principal = form.principal.value;
    var term = form.term.value;
    var paidup = form.paidup.value;
    var unearn = form.unearn.value;
    form.paidup.value = form.principal.value * 0.01;

    if (principal >= 50000, term = 36) {
        form.unearn.value = principal * .27750;
    }

    else if (principal >= 50000, term = 35) {
        form.unearn.value = principal * .27000;
    }

}
</script>
<FORM>
<table>
<tr>
<td>Enter Principal Amount:</td>
<td><INPUT TYPE ="text" NAME="principal" SIZE=15 ></td>
</tr>
<tr>
<td>Enter Number of Term:</td>
<td><INPUT TYPE ="text" NAME="term" SIZE=15 ></td>
</tr>
<tr> <td><INPUT TYPE ="button" VALUE="Calculate" ONCLICK="calc1(this.form)"></td><td></td> </tr>

</tr> <tr> <td>Paid-Up Share Capital:</td> <td><INPUT TYPE="text" NAME="paidup" SIZE=4 ></td> </tr> <tr> <td>Unearned Income:</td> <td><INPUT TYPE="text" NAME="unearn" SIZE=4 ></td> </tr>

</table>
</form>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:37:43.490

您的所有代码几乎没有问题，我将解决所有问题，因为您说您是新手，所以我希望这会有所帮助:)

1.  你总是得到 36 的原因是因为在你的 if 语句中你有 term = 36(one equal) 所以你将 term 设置为 36。

2.  在 if 语句中使用 principal>=50000, term=36 是毫无意义的，因为第一个表达式被忽略了，我认为你想要做的是

    如果（本金>=50000 && 期限 === 36）{

3.  请注意，我使用 === 而不是 == 以获取更多信息，请看这里：[JavaScript 比较中应该使用哪个等号运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

4.  不要使用内联处理程序（在 html onclick="some function" 内部）请阅读[http://www.quirksmode.org/js/introevents.html](http://www.quirksmode.org/js/introevents.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:28:07.130

您已经在`if`. 这设置`term`为 36。

```
if (principal>=50000, term=36) 
```

我不确定您要达到什么目标，但也许这样效果更好：

```
var term = parseInt(form.term.value, 10),
    principal = parseInt(form.principal.value, 10);

if (principal >= 50000 && term == 36) {...} // (if principal is greater than or equal to 5000 and term equals to 36) 
```

# asynchronous - 绝对不能虚拟化的服务器环境？

> ID：11878410
> 
> 赞同：1
> 
> 时间：2012-08-09T07:10:41.503
> 
> 标签：asynchronous, virtualization

我最近加入了一个开发团队，并在团队会议上注意到团队总是在服务器上运行不足，并因冗长的采购过程而延迟。我们拿任何我们能找到的盒子，即我们只需要更多的*盒子*，不一定是最快的盒子。在一次会议上，我问为什么我们不进行虚拟化。有人告诉我以前是如何尝试虚拟化的，但它不适用于异步连接之类的东西。为什么虚拟化不能与任何“异步”一起工作对我来说似乎含糊不清，但我认为现在最好不要提出这个问题（特别是因为我是新来的）。我在应用程序级别了解异步网络连接和请求的想法，但我不清楚为什么虚拟化绝对**不能**在某些服务器环境中工作。

也就是说，我的意思不是“不是最好的解决方案”，而是在什么情况下服务器虚拟化实际上*是不可能*的？

（关于服务器环境的一些可能相关的信息：我们主要运行数据库服务器、Web 服务器，进行大量消息传递、排队和获取网络流量高峰时间）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:04:43.973

实时系统的虚拟化几乎是我唯一归为“不可能”类别的东西（至少就现有的虚拟化解决方案而言），但即便如此，技术本身也没有什么使这成为不可能的——只是实现.

实时系统通常需要非常靠近硬件，以确保一切都在需要的时候准确发生。由于操作不一致，在虚拟化环境中确保一切“按时”运行将非常困难/不可能。因此，将实时系统置于非实时管理程序中几乎肯定会导致问题。

就服务器环境而言，DPI/SPI 防火墙和相关系统等需要极高吞吐量并且必须在给定时间范围内完成其请求的东西可能是最好的“真实”示例。

# asp.net-mvc-3 - 在 MVC3 中，getHtml giviing Column 不存在

> ID：11878419
> 
> 赞同：0
> 
> 时间：2012-08-09T07:11:22.170
> 
> 标签：asp.net-mvc-3

我正在尝试用对象列表填充 webgrid。我的 HomeController 是

```
namespace WebGridExample.Controllers
{
    public class HomeController : Controller
    {
        private readonly List<Student> list;
        public HomeController() {
            list = new List<Student>()
            {
                new Student(){ID="111",Name="Tanu",Age="24"},
                new Student(){ID="122",Name="Danu",Age="20"},
                new Student(){ID="11",Name="Taniya",Age="18"},
                new Student(){ID="888",Name="Vidushi",Age="25"},
            };

        }

        public ActionResult Index()
        {
            return View(list.ToList());
        }

    }
} 
```

我的学生模型是：

```
namespace WebGridExample.Models
{
    public class Student
    {
        public string Name;
        public string ID;
        public string Age;

        public Student() { 

        }
        public Student(string Name,string ID,string Age) {

            this.Name = Name;
            this.Age = Age;
            this.ID = ID;
        }
    }
} 
```

我的索引视图是

```
@model List<WebGridExample.Models.Student>
<!DOCTYPE html>
<html>
<head>
<title>Index</title>
<style type="text/css">
.webGrid{margin:4px;border-collapse:collapse;width:300px;}
.header{background-color:#E8E8E8;font-weight:bold;color:#FFF}
.alt{background-color: #E8E8E8;color:#000}
</style>
</head>
<body>
@{

    var grid = new WebGrid(source:Model, canPage: true, rowsPerPage: 10);
    grid.Pager(WebGridPagerModes.NextPrevious);

}  
<p>Web Grid</p> 
<div id="webgrid">
@grid.GetHtml(tableStyle: ".webGrid", headerStyle: ".header", alternatingRowStyle: ".alt", columns: grid.Columns(grid.Column("Name"), grid.Column("ID"), grid.Column("Age")));

</div>

</body>
</html> 
```

在这我在这一行得到一个错误

```
@grid.GetHtml(tableStyle: ".webGrid", headerStyle: ".header", alternatingRowStyle: ".alt", columns: grid.Columns(grid.Column("Name"), grid.Column("ID"), grid.Column("Age"))); 
```

说 Name 列不存在，以及如果我只给出 @grid.getHtml() 那么它不会显示任何内容。请有人告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:37:40.037

将您的学生模型更新为，这应该可以正常工作

命名空间 WebGridExample.Models { public class Student { public string Name {set;get;} public string ID{set;get;} public string Age{set;get;}

```
 public Student() { 

    }
    public Student(string Name,string ID,string Age) {

        this.Name = Name;
        this.Age = Age;
        this.ID = ID;
    }
} 
```

}

谢谢，pavan [pavanarya.wordpress.com](http://pavanarya.wordpress.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:43:41.827

我得到了同样的错误。

我修改了 Student 类以删除构造函数并定义 getter/setter，它工作正常：

```
public class Student
{
    public string Name { get; set; }
    public string ID { get; set; }
    public string Age { get; set; }
} 
```

# javascript - 如何使用 firefox addon sdk 从用户系统上传文件？

> ID：11878420
> 
> 赞同：0
> 
> 时间：2012-08-09T07:11:28.137
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我是 Javascript 和 Firefox 插件编程的新手。

我正在使用附加 SDK 制作一个附加组件，该附加组件记录有关用户浏览活动的一些信息。我使用带有一些硬编码文件名的[`file`API 。](https://addons.mozilla.org/en-US/developers/docs/sdk/1.8/packages/api-utils/file.html)

现在我想在服务器端分析这些日志文件，但我不希望用户经历查找文件并手动上传它们的过程。我想为用户提供一个按钮；单击这些文件将自动上传到服务器。

这种自动上传功能对于整个项目来说非常重要，因为它是一个面向学习的项目，如果用户必须手动上传数据，将很难从用户那里获取数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:04:21.937

实际文件上传（通过`multipart/form-data`）实现起来相当复杂，但是由于您正在控制服务器端 - 为什么不接受文件数据位于表单字段之一中的常规 POST 请求呢？因此，您向服务器发送数据的代码可能如下所示：

```
var file = require("sdk/io/file");
var {Request} = require("sdk/request");

var params = {};
params.log = file.read("c:\\foo\\bar.log", "b");
params.additional = "some additional form field";

Request({
  url: "https://example.com/uploadlog",
  content: params,
  onComplete: function(response)
  {
    console.log("Request sent");
  }
}).post(); 
```

您可以在任何会触发此代码的地方放置一个按钮。

# css - 在 mvc 3 razor 中将整数值显示到 img 标签中

> ID：11878421
> 
> 赞同：0
> 
> 时间：2012-08-09T07:11:38.853
> 
> 标签：css, asp.net-mvc, razor

我想在 img 标签中显示一个整数，这是我的代码：

```
 <img src="@Url.Content("~/Content/Images/icons/Circle_White.png")" alt="Alternate Text"       style="position:absolute;" />
    @Html.ActionLink("ViewCommand", "ViewCommand", "Work") 
```

![在此处输入图像描述](../Images/58a8e6aade9f7f02c2b268bf9cdecf68.png)

现在我想在圆圈中显示我的整数，有人可以帮我吗？？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:27:58.877

为此创建一个div，

*   在 div 内显示整数值
*   将背景设置为您拥有的图像`~/Content/Images/icons/Circle_White.png`

这是我知道的一种方式

# php - PHP日期：评估-1天

> ID：11878424
> 
> 赞同：1
> 
> 时间：2012-08-09T07:11:59.080
> 
> 标签：php, codeigniter, date

我的项目中有一个事件，其开始日期存储在数据库中。我想在活动开始前一天和活动进行期间宣传活动：

所以我做了

```
<?php $today = date('Y-m-d');
   $event_start_date = $event->event_start_date;
   $event_valid_advertise_date = strtotime ( '-1 day' , strtotime ( $event_start_date ) ) ;
   $event_valid_advertise_date = date ( 'Y-m-d' , $event_valid_advertise_date );
 ?> 
```

我现在被困住了；我正在使用`codeigniter`并且数据库部分还可以，但我只想知道如何减去**$today**和**$event_start_date**以确定广告的有效期。

PHP函数`date_diff($today,$event_valid_date)`给我一个错误说：

`arg 1 should be of type date , string provided`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:03:48.080

**这将解决您上面的问题：**

```
$now = strtotime("now");
$event_advertise_date = strtotime('-1 day', strtotime($event->event_start_date));
if ($now > $event_advertise_date)
{
    echo "show event";
}
else
{
    echo "too early for this event";
} 
```

**阅读您的问题-您还可以使用此改进的代码在事件完成后停止显示事件（我做了一些假设-但您明白了）：**

```
$now = strtotime("now");
$event_advertise_date = strtotime('-1 day', strtotime($event->event_start_date));
$event_end_date = strtotime($event->event_end_date);
if (($now > $event_advertise_date) && ($now < $event_end_date))
{
    echo "show event";
}
else
{
    echo "too early or late for this event";
} 
```

# silverlight - 在 jquery ui 对话框中添加小部件

> ID：11878426
> 
> 赞同：0
> 
> 时间：2012-08-09T07:12:09.783
> 
> 标签：silverlight, jquery-ui, jquery-ui-dialog, plupload

我已经阅读了关于在 jquery ui 对话框中加载 plupload 小部件的相同问题的所有类似线程，但没有让它在 IE9 中工作（FF 和 Safari 都可以正常工作）。

问题是在 IE9 中加载了 Silverlight 版本的 plupload，因为 IE9 不支持 html5 文件处理。不知何故，“添加文件”按钮不可按下，但“开始上传”按钮却是。从我目前所阅读的内容来看，这是由于 UI 对话框在我打开它之前被隐藏造成的。有几个人建议使用调用来刷新上传器小部件，但这并没有什么不同。

相关的 Javascript 代码如下所示： $("#upload-widget-container").dialog({ autoOpen: false, show: "blind", hide: "fold", modal: false, width: 660, height: 400 , 可调整大小: false });

```
$("#upload-widget").pluploadQueue({
        runtimes : 'html5,silverlight,flash,browserplus',
        container: 'upload-widget-container',
        url : 'upload.php',
        max_file_size : '100mb',
        chunk_size : '1mb',
        unique_names : true,
        filters : [
            {title : "Image files", extensions : "jpg,gif,png"},
            {title : "Zip files", extensions : "zip"},
            {title : "Bin files", extensions : "bin"}
        ],
        flash_swf_url : '/js/plupload/plupload.flash.swf',
        silverlight_xap_url : '/js/plupload/plupload.silverlight.xap'
    });

    $('.upload-button').live('click', function(e)
        {
            $('#upload-widget-container').dialog("open");
            var uploader = $('#upload-widget').pluploadQueue();

            uploader.bind('StateChanged', function() {
                if (uploader.files.length === (uploader.total.uploaded + uploader.total.failed)) {
                    // Done uploading
                    for (var i=0; i < uploader.files.length; i++)
                    {
                        if (uploader.files[i].status == plupload.DONE)
                        {
                            alert(uploader.files[i].id + ' ' + uploader.files[i].name);
                        }
                    }
                }
            });
        }
    ); 
```

标记如下所示：

```
<div id="upload-widget-container">
    <div id="upload-widget"></div>
</div>

<a class="upload-button green-button-148" href="#" rel="1234">Upload</a> 
```

关于如何在 IE9/Silverlight 中使用它的任何想法？如上面代码所示，刷新 plupload 对象和设置 .plupload div 的 z-index 并没有什么区别。

**更新：**它实际上看起来像一个 IE9 问题，因为如果我在 FF 和 Safari 中使用 plupload 的 silverlight 运行时它工作正常。所以它是 plupload、jquery ui 对话框、silverlight 和 IE9 的组合。

**更新 2：**所以我制作了一个没有其他标记、css 或 js 的普通测试页面。这消除了其他脚本或标记或样式干扰其工作的可能性。但是它在 IE 9（版本：9.0.8112.16421）中仍然不起作用。

**但是，如果我删除包含 jQuery UI 主题 CSS 的行，它确实可以工作并且“添加文件”按钮是可点击的。** 这些新信息有什么新想法吗？我猜它与 UI 主题 CSS 中的显示属性或类似的东西有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:41:14.563

告诉我一些事情，按钮是否设置了“plupload_disabled”样式，或者实际上没有附加点击事件？您是否尝试过加载对话框，然后在 chrome 或 firebug 的控制台中执行以下操作：

```
$('a[id*="browse"]').attr('class','').addClass('plupload_button plupload_start ui-button ui-    widget ui-state-default ui-corner-all ui-button-text-icon-primary'); 
```

我正在使用 jquery pluploadqueue 版本的 html4 版本，但尝试在控制台中运行它以将按钮更改回启用并尝试添加文件。只需将上面的类名与您使用的类名匹配即可。

**更新**

试试这个：

```
$('.upload-button').live('click', function(e)
{
    $('#upload-widget-container').dialog("open");
    initUploader($('#upload-widget'));
    var uploader = $('#upload-widget').pluploadQueue();

    uploader.bind('StateChanged', function() {
        if (uploader.files.length === (uploader.total.uploaded + uploader.total.failed)) {
            // Done uploading
            for (var i=0; i < uploader.files.length; i++)
            {
                if (uploader.files[i].status == plupload.DONE)
                {
                    alert(uploader.files[i].id + ' ' + uploader.files[i].name);
                }
            }
        }
    });
    $('<div>').delay(1000).queue(function()
    {
        $('div.plupload_buttons').find('a').each(function()
        {
            if($(this).hasClass('plupload_disabled'))
            {
                $(this).attr('class','').addClass('plupload_button plupload_start');

            }
        });
        $(this).dequeue();
    });
    }
 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:30:36.963

也许您可以尝试延迟上传器初始化，直到 UI 可见。

这可以通过将初始化代码放入单独的函数中来完成（关闭对话框时不要忘记销毁上传器，或者跟踪已经初始化的上传器）

```
var initUploader = function(uploadWidget)
        {
            $(uploadWidget).pluploadQueue({
            runtimes : 'html5,silverlight,flash,browserplus',
            container: 'upload-widget-container',
            url : 'upload.php',
            max_file_size : '100mb',
            chunk_size : '1mb',
            unique_names : true,
            filters : [
                {title : "Image files", extensions : "jpg,gif,png"},
                {title : "Zip files", extensions : "zip"},
                {title : "Bin files", extensions : "bin"}
            ],
            flash_swf_url : '/js/plupload/plupload.flash.swf',
            silverlight_xap_url : '/js/plupload/plupload.silverlight.xap'
            });
        }

$('.upload-button').live('click', function(e)
    {
        $('#upload-widget-container').dialog("open");
        initUploader($('#upload-widget'));
        var uploader = $('#upload-widget').pluploadQueue();

        uploader.bind('StateChanged', function() {
            if (uploader.files.length === (uploader.total.uploaded + uploader.total.failed)) {
                // Done uploading
                for (var i=0; i < uploader.files.length; i++)
                {
                    if (uploader.files[i].status == plupload.DONE)
                    {
                        alert(uploader.files[i].id + ' ' + uploader.files[i].name);
                    }
                }
            }
        });
    }
); 
```

希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T21:43:15.527

所以我在摆弄了jQuery UI CSS之后终于找到了它。我将 .ui-dialog 类的溢出属性从隐藏更改为可见，这似乎可以解决问题：

更改了这一行：/. *ui-dialog { position: absolute; 填充：.2em；宽度：300px；溢出：隐藏；}* /

进入这个：.ui-dialog {位置：绝对；填充：.2em；宽度：300px；溢出：**粗体**可见；}

坦率地说，我不确定为什么对话框的溢出属性会导致在 IE 中发生这种情况，但我现在只使用这个 hack 来让它至少工作。感谢 IE 又带走了我生命中的几个小时。特别感谢你们帮助我，我会给你们一些荣誉。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-27T15:27:12.427

通过在对话框的“打开”回调中编码对象，我已经成功地在 jQuery UI 对话框中实现了一个**pluploadQueue小部件：**

```
$("#plupload-dialog").dialog({
   autoOpen: false,
   modal: false,  // change this to true for modal, but haven't tested yet
   open: function(event, ui) {
       $("pluploader").pluploadQueue({
           runtimes: '', // add your runtimes here
           url: '',  // add your URL here
           flash_swf_url: '', // path to shockwave component
           silverlight_xap_url: '', // path to silverlight component
           max_file_size: '', // file size option
           filters: [], // filter options
           preinit: {  // preinit callbacks - note do not include separate init for pluploadQueue
               Init: function(up, info) {
               },
               UploadFile: function(up, file) {
               },
               FilesAdded: function(up, files) {
                   // do some stuff

                   // hide browse button
                   $(up.settings.browse_button).hide();

               }
               FilesRemoved: function(up, files) {
                   // do some stuff

                   // show browse button
                   $(up.settings.browse_button).show();

                   // refresh the object
                   $("#pluploader").pluploadQueue().refresh();

               }
               Error: function(up, args) {
               }
           } 
       });
   }
}); 
```

不确定这是您要查找的内容，但可能会在某些方面有所帮助。

# android - 实施 Google Cloud Messaging 时 Web 服务器上的异常

> ID：11878428
> 
> 赞同：1
> 
> 时间：2012-08-09T07:12:24.290
> 
> 标签：android, android-notifications

我已经在服务器端和客户端成功地部署了 GCM 示例应用程序。我能够成功注册设备。但是当我尝试向设备发送消息时，服务器日志上显示以下异常：

```
Exception in thread "pool-1-thread-1" java.lang.IllegalArgumentException: argume
nt cannot be null
        at com.google.android.gcm.server.Sender.nonNull(Sender.java:553)
        at com.google.android.gcm.server.Sender.getString(Sender.java:534)
        at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:365)
        at com.google.android.gcm.server.Sender.send(Sender.java:261)
        at com.google.android.gcm.demo.server.SendAllMessagesServlet$1.run(SendA
llMessagesServlet.java:119)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
utor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:908)
        at java.lang.Thread.run(Thread.java:662)
Exception in thread "pool-1-thread-2" java.lang.IllegalArgumentException: argume
nt cannot be null
        at com.google.android.gcm.server.Sender.nonNull(Sender.java:553)
        at com.google.android.gcm.server.Sender.getString(Sender.java:534)
        at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:365)
        at com.google.android.gcm.server.Sender.send(Sender.java:261)
        at com.google.android.gcm.demo.server.SendAllMessagesServlet$1.run(SendA
llMessagesServlet.java:119)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
utor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

在浏览器上，

显示以下消息，但由于异常，设备没有收到任何消息。

异步发送 1 个多播消息到 2 个设备

任何提示/建议都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:45:37.270

我得到了完全相同的错误。查看 Sender.java 的源代码，这似乎发生在 Sender 试图通过 HttpURLConnection.getErrorStream() 找出错误的性质时。

```
if (status != 200) {
  // Exception on the line below due to getErrorStream() returning null
  responseBody = getString(conn.getErrorStream()); 
  logger.finest("JSON error response: " + responseBody);
  throw new InvalidRequestException(status, responseBody);
} 
```

在我的情况下，由于 gcm 服务器返回 401 而触发了错误（我忘记了我是通过 VPN 工作的，并且没有在我的 Google API 帐户上将该 IP 列入白名单）。

您可能会从服务器获得非 200 状态。尝试通过以下方式查看问题所在：

```
$ curl -D headers.txt --header "Authorization: key=$api_key" --header Content-Type:"application/json" https://android.googleapis.com/gcm/send  -d "{\"registration_ids\":[\"$registrationID\"]}" && cat headers.txt 
```

其中 $api_key 是您的 apiKey，$registrationID 是目标注册 ID。

发件人没有正确处理这个事实是一个不同的问题，但我不确定它是否与 gcm 库尝试读取错误的方式有关，或者它是否与 jdk 有问题..（此处为 1.6 ）。鉴于 GCM 文档明确[提到了这种情况](http://developer.android.com/guide/google/gcm/gcm.html#auth_error)，这很奇怪。

根据文档，[getErrorStream()](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html#getErrorStream%28%29)将返回 null：

> 如果没有错误，则连接未连接或服务器未发送有用数据。

*   我们知道有一个错误（状态代码！= 200 已检查）
*   我们知道有一个连接（在我的情况下返回了 401）
*   我们知道服务器发送有用的数据：

来自未经授权的 ip：

```
[carlos@bad-box ~]$ curl -D headers.txt --header "Authorization: key=$api_key" --header Content-Type:"application/json" https://android.googleapis.com/gcm/send  -d "{\"registration_ids\":[\"$registrationID\"]}" && cat headers.txt

<HTML>
<HEAD>
<TITLE>Unauthorized</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Unauthorized</H1>
<H2>Error 401</H2>
</BODY>
</HTML>
HTTP/1.1 401 Unauthorized
Content-Type: text/html; charset=UTF-8
Date: Tue, 14 Aug 2012 00:30:47 GMT
Expires: Tue, 14 Aug 2012 00:30:47 GMT
Cache-Control: private, max-age=0
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Server: GSE
Transfer-Encoding: chunked 
```

**编辑：** 这现在已作为 GCM 项目的问题输入：[http ://code.google.com/p/gcm/issues/detail?id=7](http://code.google.com/p/gcm/issues/detail?id=7)

**编辑：** 该问题已得到修复，应该可以在 gcm.jar 助手类的下一个版本中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:10:12.297

发件人的参数不能为空。如果您将 null 作为参数传递给发件人，请检查日志。例如，如果您有类似的东西：

```
Sender sender = new Sender(businessLayer.Helper.getAndroidAPIkey()); 
```

如果由于某种原因`businessLayer.Helper.getAndroidAPIkey()`为 null，您将收到此异常。

# ios - 尝试与已配对的蓝牙设备重新连接

> ID：11878429
> 
> 赞同：1
> 
> 时间：2012-08-09T07:12:43.573
> 
> 标签：ios, bluetooth

我正在尝试在 CBCentralManager 的帮助下使用以下方法配对蓝牙设备。

```
- (void)connectPeripheral:(CBPeripheral *)peripheral options:(NSDictionary *)options; 
```

我`CBConnectPeripheralOptionNotifyOnDisconnectionKey`在选项字典中传递给 true 。

它第一次工作并弹出要求确认配对并连接设备。当我使用断开此设备时如何

```
- (void)cancelPeripheralConnection:(CBPeripheral *)peripheral; 
```

或设备超出范围，然后当我尝试使用相同的`"connectPeripheral: options:"`方法连接同一设备时，它没有连接。我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:20:55.743

检查您的委托函数**didDisconnectPeripheral**，您可能错过了设置或重置标志。

CoreBluetooth的示例代码[：心率监视器](http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Introduction/Intro.html)。

```
/*
 Invoked whenever an existing connection with the peripheral is torn down. 
 Reset local variables
 */
- (void)centralManager:(CBCentralManager *)central didDisconnectPeripheral:(CBPeripheral *)aPeripheral error:(NSError *)error
{
    self.connected = @"Not connected";
    [connectButton setTitle:@"Connect"];
    self.manufacturer = @"";

    if( peripheral )
    {
        [peripheral setDelegate:nil];
        [peripheral release];
        peripheral = nil;
    }
} 
```

# ipad - ipad横向模式下的Helvetica字体变化

> ID：11878431
> 
> 赞同：0
> 
> 时间：2012-08-09T07:12:51.327
> 
> 标签：ipad, css, fonts

我为 iPad 应用程序使用了 helvetica 字体，但它在纵向模式和横向模式下显示不同的视觉外观。在纵向模式下，文本是完美的粗体，但在横向模式下，它显示的比平时更粗。

任何想法？？

```
body {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; 
     -webkit-text-size-adjust: none;
}

@font-face {
            font-family: "Helvetica Neue";
            src: url('helvetican.ttf');
        }
    .myclass
    { 
        color: #ffffff;
        font:bold 12px "Helvetica Neue", Helvetica, Arial, sans-serif;
        line-height: 16px;
        width:100%; 
        height:30px;
        overflow: hidden; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:39:07.640

如果你*真的*需要它是一样的，除了正常的重量之外，还要对字体的粗体进行编码，并为粗体指定它。

这样，您就依赖于设备对字体的渲染，而不是设备对字体的渲染，它自己解释了如何将其加厚以使其粗体。

在您当前的设置中，仅提供一个重量，iPad 被迫猜测粗体应该是什么样子，我认为这就是导致您的问题的原因。

# soapui - 如何在soapui中将xml文件作为参数传递

> ID：11878435
> 
> 赞同：5
> 
> 时间：2012-08-09T07:13:07.067
> 
> 标签：soapui

我需要在 SoapUI 中将 xml 文件（完整的 xml 内容）作为参数传递，但我找不到如何发送它。我试过这个

```
<arg0>
<!--Optional:-->
<parameter1>&lt;test>like this&lt;/test></parameter1>
<!--Optional:-->
<parameter2><![CDATA[<test>or like this</test>]]></parameter2> 
```

但我不想这样。我想从 SoapUI 发送/上传完整的 xml 文件。如何在 SoapUI 中附加 xml 文件作为输入参数？或任何其他解决方案？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:36:48.690

看看这个[链接](http://www.soapui.org/SOAP-and-WSDL/adding-headers-and-attachments.html)。

> soapUI 支持以下处理文件和附件的技术：
> 
> *   MTOM - 在 SOAP 消息中优化二进制数据传输的技术
> *   SOAP with Attachments 按照 Attachments Profile - SOAP/HTTP 绑定的基于 MIME 的附件机制
> *   二进制内容的内联文件 - 用于简化二进制消息内容处理的 soapUI 特定功能

# javascript - 触发事件并获取按钮 Titanium 的标题

> ID：11878436
> 
> 赞同：0
> 
> 时间：2012-08-09T07:13:09.020
> 
> 标签：javascript, dom-events, titanium, titanium-mobile

我创建了一个包含 4 个按钮的数组，每个按钮都有一个标题。现在，当单击时，我想在警报栏中显示单击按钮的标题：

> 您点击了“标题”按钮

我需要帮助才能在 Titanium 中添加此类事件。

这是我的代码：

```
var buttons = new Array();
      for (var i = 0; i < 4; i++) {
          buttons[i] = Titanium.UI.createButton({
            title:titleArray[i],
            width : 250,
            height : 250,
            right : (280 * (1 + i)),
            top:90,
        });
        window1.add(buttons[i]);

}

Ti.App.addEventListener('click', function(e) {  
            alert(e.buttons.title);  
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:58:33.493

将侦听器代码放入 for 循环中：

```
var buttons = new Array();
      for (var i = 0; i < 4; i++) {
          buttons[i] = Titanium.UI.createButton({
            title:titleArray[i],
            width : 250,
            height : 250,
            right : (280 * (1 + i)),
            top:90,
        });
        window1.add(buttons[i]);

        buttons[i].addEventListener('click', function(e) {

           alert(e.source.title);
       })

} 
```

# ajax - 发送 AJAX 请求失败，数据量大

> ID：11878438
> 
> 赞同：0
> 
> 时间：2012-08-09T07:13:10.607
> 
> 标签：ajax

我正在使用 AJAX 向 doPost 方法发送请求。

当我向请求中添加大量数据时，无法在 Servlet 类中获取请求。该页面只是挂起而不会导致错误。

如果我使用 AJAX 请求发送的数据较少，它工作正常。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:33:09.417

发生这种情况可能有很多原因。我建议您（如果可以的话）查看您使用 ajax 发布请求指向的服务器端应用程序。该应用程序无法管理您尝试执行的如此大的请求，而只是静默地放弃它。

此外，大部分网络服务器，允许管理员配置请求的最大大小，这样如果您的请求超过这个数量，它将被丢弃。

如果您没有找到自己的方式，您可能还会发现使用 Firebug [http://getfirebug.com](http://getfirebug.com) for Firefox 或 Opera DragonFly 或 Safari Web 开发工具等工具了解“幕后”真正发生的事情很有用。 .

在某些极端情况下，使用 tcpdump 或 Wireshark 之类的嗅探器可以帮助您提高对实际情况的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:56:08.797

看起来这可以通过更改 Apache 配置中的请求限制来解决（如果您使用 Apache）：

```
LimitXMLRequestBody 0 
```

在上面的示例中，0 表示无限制。但是您可以设置一个大于默认值的适合您的数字。

更多信息：[http ://httpd.apache.org/docs/2.2/mod/core.html#limitxmlrequestbody](http://httpd.apache.org/docs/2.2/mod/core.html#limitxmlrequestbody)

# javascript - 如何将 zend_db_table_rowset 对象转换为 javascript 数组

> ID：11878440
> 
> 赞同：0
> 
> 时间：2012-08-09T07:13:26.977
> 
> 标签：javascript, zend-framework

如何将 zend_db_table_rowset 对象转换为 javascript 数组

```
$db=new Application_Model_DbTable_Books();
        $result=$db->showBooks(); 
```

展示书籍：

```
class Application_Model_DbTable_Books extends Zend_Db_Table_Abstract
{

    protected $_name = 'books';
    protected $_primary = 'id';
    public function showBooks(){
            return $this->fetchAll();

} 
```

我想将结果集转换为类似这样的东西：

```
 var aDataSet = [
                ['Trident','Internet Explorer 4.0','Win 95+','4','X'],
                ['Trident','Internet Explorer 5.0','Win 95+','5','C'],
                ['Trident','Internet Explorer 5.5','Win 95+','5.5','A'],
                ['Trident','Internet Explorer 6','Win 98+','6','A']]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:10:57.273

JSON 更适合此类操作

内部控制器

```
$db=new Application_Model_DbTable_Books();
$result=$db->showBooks();    
$this->view->booksJson = Zend_Json::encode($result); 
```

内部视图脚本

```
var aDataSet = JSON.parse(<?php echo $this->booksJson;?>); 
```

# asp.net - 上传速度会不会太快？

> ID：11878441
> 
> 赞同：2
> 
> 时间：2012-08-09T07:13:30.093
> 
> 标签：asp.net, uploading, broadband

我不确定这是否是问这个问题的正确地方，但无论如何我都会这样做。

我为 Umbraco CMS 开发了一个上传器，它可以让人们一次性上传一系列文件。这使用了一些简单的 Flash 应用程序，它只调用一个 .NET ashx 来一次上传一个文件。一个完成后，下一个开始。

最近我有一个用户遇到了一个问题，即 1 或 2 次上传会正常，但其余的都失败了。这发生在他自己和他的客户身上。经过一些调试，他认为他找到了问题，但这似乎很奇怪，所以想知道是否有其他人遇到过这个问题？

他和他的客户都使用光纤宽带连接，因此上传速度非常快。当它在较低速度的宽带连接上进行测试时，所有文件上传都没有问题。根据他的一位开发人员朋友的说法，显然他们之前遇到过它，并且不得不稍微延迟上传脚本以使其正常工作。

这听起来可能吗？有没有其他人遇到过这个问题？是否有已知的解决方法来防止上传失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T03:32:51.407

我在使用 Flash 上传器和 Firefox 的 MVC2 网站上遇到了类似的问题。服务器使用 Big-IP 负载平衡器进行负载平衡。我们在调试过程中发现，Firefox 中的 Flash 没有在继续请求中发送会话 ID，负载平衡器会将继续请求发送到另一台服务器。因为用户在新服务器上没有会话，所以请求失败。

如果一个文件可以以一个块的形式发送，它会很好地上传。如果它需要第二个块，它就失败了。因此，在上传不确定数量的文件后，上传将失败。

为了解决这个问题，我写了一个 Silverlight 上传器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:39:45.353

我之前没有碰到过这个精确的问题，但是我之前做过很多DSL的诊断和宽带故障排除，所以会尽力回答这个问题。

这种特殊症状有两个可能的原因，通常都在您的网络控制之外（我会想到）。

1) 数据包丢失 当然，如果某些链路接收到非常大的流量，那么他们可以选择只转储大量数据（例如，所有超过该链路最大设置大小的数据），但 TCP/IP 应该控制它，并且还期望这种事情会不时下降，所以这似乎不太可能。

2) 接收服务器可能对该服务器有一些 HTTP 瓶颈，甚至接收服务器 CPU / RAM 等可能已满负荷。

从故障排除的角度来看，即使这些症状（理论上）不应该存在，但它们确实存在，并且您有特定的

如果您真的需要了解它是如何工作的，接下来的步骤可能是获取某种数据包嗅探器（如 WireShark），以尝试在数据包级别找出到底发生了什么。

此外，套接字编程通常可以直接对 TCP/IP 套接字进行编程，因此您将在较低的网络层进行处理，并查看响应和超时等。

此外，如果您控制接收服务器，那么您可以从那一端执行相同的操作，或者至少查看错误日志以查看引发的问题。

如果可能的话，一个非常基本的方法可能是向接收服务器发送路径，这可能会突出显示获取服务器的缓慢节点，或者本地计算机和终端服务器之间的数据包丢失。

结果呢？在上传代码中加入一个减速功能，这至少应该使代码工作。

如果您需要对 WireShark 进行任何分析，请与我们联系。

# drupal - 通过虚拟主机访问本地 Drupal 安装

> ID：11878444
> 
> 赞同：0
> 
> 时间：2012-08-09T07:13:57.340
> 
> 标签：drupal, apache2, staging, virtual-hosts, dev-to-production

我试图在我公司的代码生产过程中引入一个暂存步骤。我们目前有大约 10 个工程师客户，他们分别提交代码、更新本地代码库 - 在本地调试/检查，然后我们将代码部署到生产环境并让其他员工进行 QA。显然，我们希望有一个更好的生产前测试流程，以帮助在错误向公众发布之前捕获它们。

我的第一次尝试是在一个额外的 ubuntu 机器上创建一个暂存环境，其中包含来自 eng 客户端的最新提交代码。然后我可以让产品经理检查这个站点并发现错误、测试功能、暴露瓶颈等。

我所拥有的：ubuntu 机器（本地服务器）当前配置为普通的 eng 客户端。它有一个本地的drupal安装，数据库的完整备份，所有这些都可以在本地访问。让我们一起去 mysite.com = 官方网站；以及我在 ubuntu box = ms.com 上使用的本地暂存域。这个本地 ms.com 工作得很好，所以本质上，我只需要允许公司的其他人导航到某个 URL，它的行为方式与 ms.com 当前的行为方式完全相同。我有指向 ubuntu 框的 DNS 服务器，它正在 /www 文件夹之外运行一些辅助项目。

为了保持辅助项目的运行，我认为我的解决方案是创建一个基于名称的虚拟主机，该主机指向本地drupal 安装的目录。这是实现我的目标的正确做法吗？有没有更简单的方法可以向员工开放这个本地配置。

在尝试设置虚拟主机时，我执行了以下操作：

我将本地服务器的静态 IP 地址添加到 /etc/hosts 我使用 DocumentRoot dir/DrupalInstallation 添加了一个virutalHost 到 /etc/apache2/sites-available 我添加了 a2ensite 然后重新启动了 apache。

成功一半。我可以进入主页，但没有加载任何模块，我尝试加载更多主机/变体，开始将所有本地主机引用更改为外部，但我真的不知道根本问题是什么，我也不知道如何诊断它。有趣的一点是，如果您单击某些链接，它会将您踢回 www 文件夹的索引页面 - 我认为站点别名不会 100% 坚持请求。

让我知道是否有任何类型的日志或报告可以共享以帮助诊断/调试。非常感谢任何和所有帮助 - 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:56:06.770

听起来您访问主页以外的页面的特定错误与未启用/配置 mod_rewrite 有关。

**另一种方法：**

在更大的范围内，在我看来，当出现问题时，您可能不具备管理登台服务器所需的能力。如果您不熟悉 linux 服务器管理员，请避免头疼并使用预配置的虚拟设备（例如 Quickstart、AegirDev 或 Walid）而不是专用设备。如果您的暂存盒不足以处理托管虚拟机，那么只需在基本 uBuntu 构建上运行 QuickStart 安装脚本。

现在您知道您的登台服务器正在工作并成功运行导入的 Drupal 站点，安装 git，创建一个共享存储库，并确保您和您的开发人员已设置为在他们的 IDE 中使用 git 作为他们的源代码控制。

# c++ - 取消 pthread_cond_wait() 与 PRIO_INHERIT 互斥锁一起挂起

> ID：11878445
> 
> 赞同：4
> 
> 时间：2012-08-09T07:13:59.893
> 
> 标签：c++, c, pthreads, mutex, embedded-linux

*2012 年 4 月 10 日更新：* [由 libc 补丁修复](http://sourceware.org/git/?p=glibc.git;a=commitdiff;h=55a051c985c3e7965a2f5dd5f762ac2737adae01)

* * *

我在取消线程时遇到问题，这些线程使用带有属性集`pthread_cond_wait`的互斥锁。`PTHREAD_PRIO_INHERIT`不过，这只发生在某些平台上。

以下最小示例演示了这一点：（编译`g++ <filename>.cpp -lpthread`）

```
#include <pthread.h>
#include <iostream>

pthread_mutex_t mutex;
pthread_cond_t cond;

void clean(void *arg) {
    std::cout << "clean: Unlocking mutex..." << std::endl;
    pthread_mutex_unlock((pthread_mutex_t*)arg);
    std::cout << "clean: Mutex unlocked..." << std::endl;
}

void *threadFunc(void *arg) {
    int ret = 0;
    pthread_mutexattr_t mutexAttr;
    ret = pthread_mutexattr_init(&mutexAttr); std::cout << "ret = " << ret << std::endl;

    //Comment out the following line, and everything works
    ret = pthread_mutexattr_setprotocol(&mutexAttr, PTHREAD_PRIO_INHERIT); std::cout << "ret = " << ret << std::endl;

    ret = pthread_mutex_init(&mutex, &mutexAttr); std::cout << "ret = " << ret << std::endl;
    ret = pthread_cond_init(&cond, 0); std::cout << "ret = " << ret << std::endl;

    std::cout << "threadFunc: Init done, entering wait..." << std::endl;

    pthread_cleanup_push(clean, (void *) &mutex);
    ret = pthread_mutex_lock(&mutex); std::cout << "ret = " << ret << std::endl;
    while(1) {
        ret = pthread_cond_wait(&cond, &mutex); std::cout << "ret = " << ret << std::endl;
    }
    pthread_cleanup_pop(1);

    return 0;
}

int main() {
    pthread_t thread;
    int ret = 0;
    ret = pthread_create(&thread, 0, threadFunc, 0); std::cout << "ret = " << ret << std::endl;

    std::cout << "main: Thread created, waiting a bit..." << std::endl;
    sleep(2);

    std::cout << "main: Cancelling threadFunc..." << std::endl;
    ret = pthread_cancel(thread); std::cout << "ret = " << ret << std::endl;

    std::cout << "main: Joining threadFunc..." << std::endl;
    ret = pthread_join(thread, NULL); std::cout << "ret = " << ret << std::endl;

    std::cout << "main: Joined threadFunc, done!" << std::endl;
    return 0;
} 
```

每次我运行它时，都会`main()`挂起`pthread_join()`。gdb 回溯显示以下内容：

```
Thread 2 (Thread 0xb7d15b70 (LWP 257)):
#0  0xb7fde430 in __kernel_vsyscall ()
#1  0xb7fcf362 in __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/i386/i686/../i486/lowlevellock.S:142
#2  0xb7fcc9f9 in __condvar_w_cleanup () at ../nptl/sysdeps/unix/sysv/linux/i386/i686/../i486/pthread_cond_wait.S:434
#3  0x08048fbe in threadFunc (arg=0x0) at /home/pthread_cond_wait.cpp:22
#4  0xb7fc8ca0 in start_thread (arg=0xb7d15b70) at pthread_create.c:301
#5  0xb7de73ae in clone () at ../sysdeps/unix/sysv/linux/i386/clone.S:130

Thread 1 (Thread 0xb7d166d0 (LWP 254)):
#0  0xb7fde430 in __kernel_vsyscall ()
#1  0xb7fc9d64 in pthread_join (threadid=3083950960, thread_return=0x0) at pthread_join.c:89
#2  0x0804914a in main () at /home/pthread_cond_wait.cpp:41 
```

如果`PTHREAD_PRIO_INHERIT`未在互斥锁上设置，则一切正常，并且程序干净地退出。

有问题的平台：

*   嵌入式 AMD Fusion 板，运行基于[PTXDist](http://www.ptxdist.org/software/ptxdist/index_en.html)的 32 位 Linux 3.2.9-rt16（带有[RTpatch](https://rt.wiki.kernel.org/index.php/Main_Page) 16）。我们正在使用最新的[OSELAS](http://www.ptxdist.de/oselas/toolchain/index_en.html) i686 交叉工具链 (2011.11.1)，使用 gcc 4.6.2、glibc 2.14.1、binutils 2.21.1a、内核 2.6.39。
*   与 2011.03.1 工具链相同的板（gcc 4.5.2 / glibc 2.13 / binutils 2.18 / kernel 2.6.36）。

没有问题的平台：

*   我们自己的 ARM 板，也运行 PTXDist Linux（32 位 2.6.29.6-rt23），使用 OSELAS arm-v4t 交叉工具链（1.99.3）和 gcc 4.3.2 / glibc 2.8 / binutils 2.18 / kernel 2.6.27 .
*   我的笔记本电脑（英特尔酷睿 i7），运行 64 位 Ubuntu 11.04（虚拟化/内核 2.6.38.15-generic），gcc 4.5.2 / eglibc 2.13-0ubuntu13.1 / binutils 2.21.0.20110327。

我一直在网上寻找解决方案，并且遇到了一些我尝试过的补丁，但没有任何效果：

*   [使条件变量具有优先级继承意识。](http://sourceware.org/bugzilla/show_bug.cgi?id=11588)
*   [处理来自 FUTEX_WAIT_REQUEUE_PI 的 EAGAIN](http://sourceware.org/git/?p=glibc.git;a=commit;h=c5a0802a682dba23f92d47f0f99775aebfbe2539)

我们是在代码中做错了什么，恰好在某些平台上工作，还是这是底层系统中的错误？如果有人知道去哪里看，或者知道任何补丁或类似的尝试，我很乐意听到。

谢谢！

*更新：*

*   [libc-help 邮件列表讨论](http://sourceware.org/ml/libc-help/2012-08/msg00003.html)
*   [glibc 错误报告](http://sourceware.org/bugzilla/show_bug.cgi?id=14477)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:38:30.530

这已由[libc 补丁修复](http://sourceware.org/git/?p=glibc.git;a=commitdiff;h=55a051c985c3e7965a2f5dd5f762ac2737adae01)。我已经确认它可以在我自己的有问题的平台（我们的定制 AMD Fusion 板）上工作，补丁到 glibc-2.14.1。

感谢 Siddhesh Poyarekar 的修复！

# windows-phone-7 - 如何拦截和处理Windows phone 应用程序的所有异常？

> ID：11878446
> 
> 赞同：0
> 
> 时间：2012-08-09T07:14:02.347
> 
> 标签：windows-phone-7, exception

我们的产品开发没有任何测试团队支持。所以。我们需要拦截并处理所有异常以改善用户体验。windows phone 应用程序有什么解决方案吗？

作为 app.xaml.cs 文件中的流。我们找到 ：

```
 // Code to execute on Unhandled Exceptions
    private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
    {
        if (e.ExceptionObject is QuitException)
            return;

        if (System.Diagnostics.Debugger.IsAttached)
           {
              // An unhandled exception has occurred; break into the debugger
              System.Diagnostics.Debugger.Break();
           }

        if (System.Diagnostics.Debugger.IsAttached)
        {
            // An unhandled exception has occurred; break into the debugger
            System.Diagnostics.Debugger.Break();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:24:24.870

是的，这应该会捕获您在应用程序中遗漏的所有异常。考虑到您显然没有在其他地方捕获很多异常并且正在寻找一个简单的解决方案，这个事件处理程序可能会工作，但我真的不推荐它。

此事件处理程序捕获异常，然后应该崩溃/退出您的应用程序。如果你只在这里处理你的异常，这将导致大量的崩溃。有时会发生异常，但应用程序可以继续正常工作。这就是为什么我建议您在它们发生在您的代码中时处理它们，而不是在这里。这样您就可以完全控制您的应用程序如何继续以及它是否继续，并减少“未处理的异常”和应用程序崩溃的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T07:35:41.317

将您的代码放入 Try-Catch 块中。我也遇到过这样的问题，但后来被异常处理方法处理了。

```
 try
  {
   // your code
  }

 catch (Exception ex)
  {

    throw (ex);
  } 
```

# actionscript-3 - Flex4 List itemRenderer isItemSelected() 方法

> ID：11878449
> 
> 赞同：0
> 
> 时间：2012-08-09T07:14:09.780
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.6

在 flex3 中，List 有 isItemSelected() 方法，但是我在 flex4 中没有找到。我的场景是判断当前ItemRenderer是否被选中，然后根据选中的值，对ItemRenderer中的特定组件做一些逻辑（假设ItemRenderer有Image组件和Label组件，我只想对ItemRenderer做一些逻辑图片）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:28:58.497

在 Flex 4 中，项目渲染器功能可以更好地利用状态。这意味着它们具有默认状态，我们可以使用它们来实现特定于状态的逻辑：

```
normal
hovered
selected
up 
```

如果您想在项目被选中时做某事，您可以为该`stateChangedComplete`事件添加一个侦听器，并在该处理程序中实现您的逻辑（当然，您必须测试当前状态是否为“已选择”）。代码可能如下所示：

```
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
                xmlns:s="library://ns.adobe.com/flex/spark"
                xmlns:mx="library://ns.adobe.com/flex/mx"
                stateChangeComplete="stateChangedHandler()"
                autoDrawBackground="false">

    <fx:Script>
        <![CDATA[
            protected function stateChangedHandler():void
            {
                if(currentState == "selected")
                {
                    // implement your logic here
                }
            }
        ]]>
    </fx:Script>

    <!-- Your original MXML code here -->

</s:ItemRenderer> 
```

如果您需要完成一些重要的逻辑，这将是要走的路。但是，如果您只需要更改图像上的某些属性，当项目渲染器被选中时，您可以只在元素上指定一个特定于状态的属性/值对，就像这样（假设图像默认褪色，当项目被选中时，为了解释起见，您希望将它们淡入）：

```
<s:Image alpha="0.5" alpha.selected="1" /> 
```

这样，不需要侦听器/处理程序。

希望这可以帮助。祝你有美好的一天。

# xcode - cocos2d 2.0中如何暂停图层

> ID：11878450
> 
> 赞同：0
> 
> 时间：2012-08-09T07:14:09.317
> 
> 标签：xcode, cocos2d-iphone

我有一个包含 GamePlay 层的场景和一个包含我的暂停菜单的 HUDLayer。我想知道是否无论如何要暂停场景中的一个图层，以便我可以暂停 GamePlay 图层，但仍然可以访问并单击我的 HUDLayer 中的暂停菜单。我尝试使用

```
[[CCDirector sharedDirector] pause]; 
```

但这会暂停一切，并且不接受我的暂停菜单中的触摸。如果无法暂停单层，那么将暂停菜单合并到游戏中的最佳方式是什么？谢谢。

PS 我使用的是 cocos2d 的最新版本，即 cocos2d 2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:42:23.670

[本](http://timroadley.com/2011/11/21/game-template-part-9-adding-pause-resume-exit/)教程应该有所帮助。但基本上你想要做的是取消安排你的场景，然后在恢复时重新安排它。这是我在 HUD 层中所做的。

```
-(void)pause:(id)sender
{
    if(paused)
    {
        [gamescene scheduleUpdate];
    }
    else {
        [gamescene unscheduleUpdate];
    }
    paused =!paused;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T15:47:36.180

除非我遗漏了什么，否则您不需要“暂停”所需的图层。为什么不能在暂停图层显示时禁用除暂停图层之外的所有内容的触摸？看来这就是你想要的最终结果？

# jquery - 在我的 GSP 页面中添加 jquery 库文件

> ID：11878452
> 
> 赞同：3
> 
> 时间：2012-08-09T07:14:11.870
> 
> 标签：jquery, grails, fullcalendar

如何在 GSP 页面中导入插件 css 和 JS 文件？我有 plugins.jquery=1.7.1 plugins.jquery-ui=1.8.1 并希望将其链接到我的 FullCalendar GSP 页面，以便我可以将 Jquery 日历链接到 FullCalendar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:02:55.677

您必须为 jQuery 插件添加行：

```
<g:javascript library="jquery" plugin="jquery"/> 
```

到[这里](http://grails.org/plugin/jquery)提到的**布局**和 jQuery UI 的布局：

```
<r:require module="jquery-ui"/> 
```

如果您需要添加自定义js，请添加它

```
<script src="${resource(dir: 'js/misc', file: 'filename.js')}" /> 
```

在您的 gsp 页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T05:18:29.773

这也可以通过以下方式完成。将您的 jquery 文件（filename.js）放入 web-app/js 目录中，并在您的 gsp 主页中写入命令，如下所示：

```
<g:javascript src="filename.js"/> 
```

希望这会有所帮助，鲁贝尔。

# python - 除了“默认”之外，如何让 Django 使用不同的数据库？

> ID：11878454
> 
> 赞同：0
> 
> 时间：2012-08-09T07:14:14.903
> 
> 标签：python, database, django, configuration

我对 Django 比较陌生，我一直在想的一件事是更改运行项目时将使用的数据库。

默认情况下，DATABASES 'default' 用于运行我的测试项目。但在未来，我希望能够定义一个“生产”数据库配置并让它使用它。

在生产环境中，我将无法“manage.py runserver”，因此无法真正设置设置。

我读了一些关于“路由”数据库以使用另一个数据库的内容，但是有没有一种更简单的方法，这样我就不需要在每次有另一个我想使用的数据库时创建一个新的路由器（例如，我可以进行测试数据库、生产数据库和开发数据库）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:21:23.763

您可以在生产环境中使用不同的 settings.py。

或者 - 更简洁一些 - 您可能希望在 settings.py 旁边创建一个文件 settings_local.py ，您可以在其中定义一些特定于当前机器的设置（如 DEBUG、DATABASES、MEDIA_ROOT 等）并执行`from settings_local import *`在您的通用 settings.py 文件的开头。当然 settings.py 不能覆盖这些导入的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:22:45.870

为什么需要测试数据库？Django 在运行 unittest 之前自动创建测试数据库。而且，数据库路由不适合您的目的，它用于将您的读/写请求路由到不同的数据库。如果您想使用开发数据库，​​请在 中设置一个新`DATABASE`配置`local_settings.py`，然后在最后`settings.py`输入

```
try:
    from local_settings import *
except ImportError:
    pass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:37:35.127

您无法直接在设置中指定任何内容。我使用的做法是为不同的环境添加额外的设置文件，其中只包含我想要更改的覆盖设置，例如数据库设置或缓存设置。例如，我的项目根应用程序将在开发环境中包含以下文件（注意前导下划线）：

```
...
settings.py
settings_dev.py
_settings_test.py
_settings_prod.py
... 
```

然后在 settings.py 中，我会在开头添加以下代码行：

```
try:
    from settings_prod import *
except ImportError:
    try:
        from settings_test import *
    except ImportError:
        from settings_dev import * 
```

由于我在开发环境中，它只会导入我的 settings_dev 文件，因为其他文件有一个前导下划线。

当我部署到生产或测试环境时，我会重命名相关文件。对于生产：`_settings_prod.py`-> `settings_prod.py`，对于测试：`_settings_test.py`-> `settings_test.py`。`settings_dev.py`基本上可以保持原样，因为只有在其他两个失败时才会导入。最后一步，您可以简单地通过结构或其他工具进行自动化部署。织物的一个例子就像`run('mv _settings_prod.py settings_prod.py')`重命名一样。

# ios - 如何用自定义单元格重新排列 UITableView？

> ID：11878455
> 
> 赞同：0
> 
> 时间：2012-08-09T07:14:15.967
> 
> 标签：ios, objective-c, uitableview

我有一个带有自定义单元格的表格视图。单元格中充满了我的数据。现在我想让用户重新排列行。我已经实现了这些方法，但是在拖动以重新排序单元格时，我可以看到它显示为它正在尝试执行但无法移动到任何地方。它像 10 像素一样移动，好像它会重新排列但又回到它的位置。如何使用自定义单元格重新排序行？

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if (editingStyle == UITableViewCellEditingStyleDelete)  
    {
       [self.dataSource removeObjectAtIndex:indexPath.row];
       [tableView reloadData];
    }
}

-(UITableViewCellEditingStyle)tableView:(UITableView*)tableView editingStyleForRowAtIndexPath:(NSIndexPath*)indexPath 
{
    if (self.mytableView.editing) 
    {
            return UITableViewCellEditingStyleDelete;
    }
    return UITableViewCellEditingStyleNone;
}

-(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath 
{
    return YES;
}

-(BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath 
{
    return YES;  
}

-(void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath 
{
    id stringToMove = [self.dataSource objectAtIndex:sourceIndexPath.row];

    [self.dataSource removeObjectAtIndex:sourceIndexPath.row];

    [self.dataSource insertObject:stringToMove atIndex:destinationIndexPath.row];
}

-(NSIndexPath *)tableView:(UITableView *)tableView targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath toProposedIndexPath:(NSIndexPath *)proposedDestinationIndexPath 
{
    if (proposedDestinationIndexPath.section != sourceIndexPath.section) 
    {
            return sourceIndexPath;
    }
    return proposedDestinationIndexPath;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T22:22:01.720

我知道这是旧的，但我仍然会回答它。这里的问题在于您的`tableView: targetIndexPathForMoveFromRowAtIndexPath: toProposedIndexPath:`方法（您的最后一种方法）

您的逻辑正在阻止任何移动的发生。您的 if 语句：

```
if (proposedDestinationIndexPath.section != sourceIndexPath.section) 
```

是说**如果想要**的位置（用户想要带单元格的位置）**不是我当前的位置，那么返回我当前的位置**（所以不要移动单元格）。否则，**如果我想要的位置**（我想去的新位置）**是我当前的位置，则返回想要的位置（实际上是我的当前位置）**。

我希望这是有道理的，所以基本上你是说无论如何，确保每个单元格始终保持在其当前位置。要解决此问题，请删除此方法（除非存在非法移动，否则不需要此方法）或切换您的两个 return 语句，因此：

```
-(NSIndexPath *)tableView:(UITableView *)tableView 
targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath 
      toProposedIndexPath:(NSIndexPath *)proposedDestinationIndexPath {

    if (proposedDestinationIndexPath.section != sourceIndexPath.section) {
        return proposedDestinationIndexPath;
    }
    return sourceIndexPath;
} 
```

实际上，允许重新排列所需的唯一方法是：`tableView: moveRowAtIndexPath: toIndexPath:`. 再说一次，除非您希望从其他方法中获得特定行为，否则您可以保存一些代码并删除其中的大部分（特别是因为在这种情况下您主要只是实现默认值）。

# c# - HttpContext.Current.Request.ServerVariables["HTTP_REFERER"] null

> ID：11878458
> 
> 赞同：4
> 
> 时间：2012-08-09T07:14:43.180
> 
> 标签：c#, asp.net

我正在尝试使用以下代码在 global.asax session_start 中获取引用 url：

```
HttpContext.Current.Request.ServerVariables["HTTP_REFERER"] 
```

我尝试使用`Request.UrlReferrer.AbsoluteUri but UrlReferrer`也是空的。

但我越来越空了。你能告诉我什么是错的或替代的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T07:20:10.013

并非所有的用户代理都会*发送*推荐人，一些代理/中介会*剥离*推荐人，而且通常根本**没有**推荐人。

只需检查是否`Request.UrlReferrer == null`在某个时候；如果是，请不要尝试查看`Request.UrlReferrer.AbsoluteUri`.

这里没有什么“错误”，你也无能为力。如果您不知道它们来自哪里，那么您将不得不忍受它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-04T02:58:06.520

我知道这个答案大约晚了 2 1/2 年，但我找不到关于该`UrlReferrer`物业的详尽文章，所以我想我会在此处添加此信息。@MarcGravell 的回答在很大程度上是正确的，但它错过了另一种可能性。HTTP 标头中指定的引用者值也可能是无效的 uri。

因此，在使用 上的`UrlReferrer`属性时应该小心`HttpRequest`。如果您查看`UrlReferrer`使用 ILSpy 之类的调用时执行的代码，您会看到它尝试解析请求标头中的值。如果该标头中的值不是有效的 uri，您将获得一个`System.UriFormatException`.

这意味着如果引用者不是有效的 uri，则`UrlReferrer`在尝试访问之前简单地检查 null可能会给您留下未处理的异常。`AbsoluteUri`如果您想要一个有效的`Uri`or `null`，则必须使用`Request.ServerVariables["HTTP_REFERER"]`and then `Uri.TryParse`，否则您必须将`Request.UriReferrer == null`支票包装在`try-catch`.

我整理了一个快速演示来展示该`UrlReferrer`属性的行为。以以下页面为例：

```
<%@ Page Language="C#" AutoEventWireup="true" %>
<html><body>
        <table border="1">
            <tr><td>Referrer</td><td><%= GetUrlReferrer() %></td></tr>
        </table>
</body></html>
<script runat="server">
public string GetUrlReferrer()
{
    try
    {
        return Request.UrlReferrer == null ? "(None)" : Request.UrlReferrer.ToString();
    }
    catch (Exception ex)
    {
        return Request.ServerVariables["HTTP_REFERER"] + " (from Server Variable)";
    }
}    
</script> 
```

将此页面设置为在 下运行`http://localhost/urlreferrertest.aspx`，然后尝试从 Powershell 使用无效 Uri 调用它：

```
> $client = new-object System.Net.WebClient
> $client.Headers.Add("Referer", "http://www%2etest%2e.com/test.html")
> $client.DownloadString("http://localhost/urlreferrertest.aspx") 
```

如果您单步执行代码，您将看到对 的调用`Request.UrlReferrer`引发异常，并且`http://www%2etest%2e.com/test.html`通过访问`ServerVariable`.

# javascript - 使用javascript获取脚本所在的对象

> ID：11878461
> 
> 赞同：1
> 
> 时间：2012-08-09T07:14:59.857
> 
> 标签：javascript, jquery

有没有办法获取一个对象或它在脚本中的 id 在于使用 jQuery 或其他东西？

例如：

```
<div id="div1">
  <script type="text/javascript">
     var obj = ?? // this should be the "div1" div
  </script>
</div> 
```

在此示例中，obj 应等于“div1”（或对象本身）。

另一个：

```
<p id="paragraph_7">
  <script type="text/javascript">
     var obj = ?? // this should be the "paragraph_7" p
  </script>
</p> 
```

在此示例中，obj 应等于“paragraph_7”（或对象本身）。

如果我给脚本标签一个“id”然后让它的父级应该可以工作，但是还有其他方法吗？并非总是我能够知道`<script>`身份证。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:20:25.480

由于脚本是按顺序执行的，因此当前执行的脚本标签始终是页面上的最后一个脚本标签。因此，要获取脚本标签，您可以执行以下操作：

```
var scripts = document.getElementsByTagName( 'script' );
var thisScriptTag = scripts[ scripts.length - 1 ]; 
```

然后你可以使用这个：

```
var obj = thisScriptTag.parentNode; 
```

* * *

其中一部分来自[https://stackoverflow.com/a/3326554/1188942](https://stackoverflow.com/a/3326554/1188942)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:21:28.880

插入[此代码](http://jsfiddle.net/rwjGR/)，它将起作用。基本上，当您查询脚本时，您当前运行的脚本是`<scripts>`当前在 DOM 中的列表中的最后一个。

```
<script>
    //protect from the global scope using an immediate function
    (function() {

        //just being verbose
        var scripts, scriptIndex, thisScript, parent;

        scripts = document.getElementsByTagName('script');
        scriptIndex = scripts.length - 1;
        thisScript = scripts[scriptIndex];
        parent = thisScript.parentNode.id;

        //proof that we got the parent is to print the id
        document.write(parent);

    }());​

</script> 
```

# vb6 - 如何在 mmc 中调试 snapin、属性页？

> ID：11878463
> 
> 赞同：3
> 
> 时间：2012-08-09T07:15:03.283
> 
> 标签：vb6, mmc, snap-in

我是管理单元和属性页面的新手。

我有一个在 snapin(userControl) 的 Visual basic 6.0 中开发的源代码，以及在 snapin 中引用的属性页。这些将在 mmc 中运行。现在我如何通过添加 mmc 来调试这个管理单元和属性页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-03T14:53:55.620

这篇文章很旧，但如果它可以帮助某人。

要调试管理单元，在 VB6 编辑器中，转到`Project > Property of ...`

然后，在调试选项卡中，选择第三个选项“启动程序”并输入`mmc`或完整路径`mmc.exe`（对我来说是`C:\Windows\System32\mmc.exe`）。

当您尝试运行您的项目时，将显示一个 MMC 窗口，您可以转到`File > Add Component ...`并选择您的管理单元项目。请注意，可以存在与您的项目相对应的 2 个组件。您必须在代码中使用断点尝试两者，才能知道女巫是调试的。

[资源](https://msdn.microsoft.com/en-us/library/ms692762%28v=vs.85%29.aspx)

如果有人知道如何在运行项目时在 mmc 中自动加载项目管理单元，那应该是完美的！

# ruby-on-rails - 使用 uid 或 token 来存储 facebook 会话

> ID：11878464
> 
> 赞同：0
> 
> 时间：2012-08-09T07:15:03.540
> 
> 标签：ruby-on-rails, facebook, authentication, omniauth

嘿，我在 omniauth 上观看以下 railscast，想知道使用 是否`uid`是存储会话的正确方法。存储凭证令牌不是更安全吗？

[http://railscasts.com/episodes/241-simple-omniauth](http://railscasts.com/episodes/241-simple-omniauth)

我有以下架构，并希望能够从 facebook 创建新用户。关于如何正确执行此操作的任何想法？

```
 Column         |            Type             |                     Modifiers                      
------------------------+-----------------------------+----------------------------------------------------
 id                     | integer                     | not null default nextval('users_id_seq'::regclass)
 first_name             | character varying(255)      | 
 last_name              | character varying(255)      | 
 email                  | character varying(255)      | 
 created_at             | timestamp without time zone | not null
 updated_at             | timestamp without time zone | not null
 password_digest        | character varying(255)      | 
 remember_token         | character varying(255)      | 
 admin                  | boolean                     | default false
 password_reset_token   | character varying(255)      | 
 password_reset_sent_at | timestamp without time zone | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:17:11.997

实际上，您将需要两者。令牌会随着时间而改变，您可能需要一种方法来存储/创建您自己的用户数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:23:29.027

facebook 提供的唯一标识符可以是动态的和开/关的，如猪肉所述。

我现在已经在几个项目中使用社交登录，我必须说，将社交登录与设计结合使用从未让我失望。

为了确保当 uid 因任何原因发生更改或不再存在时不会创建新记录，只需检查返回的 auth_info 而不使用 uid。

祝你好运

# php - Doctrine 2 实体关联没有为外键设置值

> ID：11878466
> 
> 赞同：2
> 
> 时间：2012-08-09T07:15:15.943
> 
> 标签：php, doctrine-orm, associations, entity

我遇到了 Doctrine 2 实体关联的问题。我有一个用户实体和一个代理实体。一个机构可以雇用多个用户（实体被简化以仅显示我的问题）

**用户实体**

```
/**
 * @Entity
 * @Table(name="users")
 **/
class User
{
    /**
     * @Id
     * @Column(type="integer")
     * @GeneratedValue
     * @var integer
     **/
    protected $id;

    /**
     * @ManyToOne(targetEntity="Agency", inversedBy="users"})
     * @JoinColumn(name="agency_id", referencedColumnName="id")
     * @var Agency
     */
    protected $agency;
} 
```

**代理实体**

```
/**
 * @Entity
 * @Table(name="agencies")
 **/
class Agency
{
    /**
     * @Id
     * @Column(type="integer")
     * @GeneratedValue
     * @var integer
     **/
    protected $id;

    /**
     * @OneToMany(targetEntity="User", mappedBy="agency", cascade={"all"})
     * @JoinColumn(name="id", referencedColumnName="agency_id")
     * @var User[]
     */
    protected $users;

    /**
     * Add a user to the agency
     *
     * @param User $user
     * @return void
     */
    public function addUser(User $user) {

        $this->users[] = $user;
    }
} 
```

当我现在使用以下代码与用户一起创建代理时，Doctrine 没有为用户设置代理 ID，这导致用户的代理 ID 不能为空的 mysql 约束错误。

```
// $em is the Doctrine EntityManager
$agency = new Agency;
$user = new User;
$agency->addUser($user);
$em->persist($agency);
$em->flush(); 
```

到目前为止，我发现让 Doctrine 为用户设置代理 ID 的唯一方法是将代理分配给用户，另外将用户添加到代理。在我对 ORM 的理解中，当用户在代理机构的用户集合中并且它正在被保存时，它应该已经设置了机构 ID。

```
$user->agency = $agency;
$agency->addUser($user); 
```

我的注释/元数据有什么问题或遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:39:15.540

我在 Doctrine 2 文档中找到了一些东西：

> 仅对关联的反面所做的更改将被忽略。确保更新双向关联的双方（或至少从 Doctrine 的角度来看拥有方）

在我的情况下，拥有方是我必须更新它的用户。学说 1 能够自动管理它……太糟糕了。

# java - 将 SQL-INSERT 拆分为 Map columnames > values

> ID：11878469
> 
> 赞同：0
> 
> 时间：2012-08-09T07:15:41.747
> 
> 标签：java

你知道一个分割 INSERT 语句的 java 函数吗

```
INSERT INTO mytable (col1, col2, col3) VALUES ('val1', 'val2,andmore', 123) 
```

进入地图：

```
col1 => "val1"
col2 => "val2,andmore"
col3 => 123 
```

（我暂时不需要Oracle的ESCAPE子句）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:48:02.063

我没有找到解决方案，但建立了我自己的功能

```
/**
 * The Unicode Char for "object replacement character"
 */
private final static char REPLACEMENT_CHAR = '\uFFFC';

/**
 * Split an SQL INSERT or UPDATE Statement to return the map of (column_name, values)
 * @param sql  the statement
 * @return the map with the column names as key and the sql values as values
 */
public static final SortedMap<String, String> getValuesFromSqlStatement (String sql)
{
    // check the argument
    if (sql==null || sql.trim().length() == 0)
        throw new IllegalArgumentException("The sql string cannot be empty");
    sql = sql.trim();

    final String ucSql = sql.toUpperCase();
    if (!ucSql.startsWith("INSERT") && !ucSql.startsWith("UPDATE"))
        throw new IllegalArgumentException("The sql string is neither an insert nor an update");

    // extract the column names
    Pattern pattern;
    pattern = Pattern.compile("[^(]*\\(([^)]*)\\).*");
    final Matcher m = pattern.matcher(sql);
    m.matches();
    final String columList = m.group(1);
    final String[] columns = columList.trim().split("\\s*,\\s*");

    // replace the , chars inside of strings by the REPLACEMENT_CHAR
    final char[] rest = sql.substring(sql.indexOf("VALUES")).toCharArray();
    boolean inString = false;
    int start = -1;
    int end   = -1;
    for (int i = 0; i<rest.length; i++)
    {
        final char c = rest[i];
        if ( inString && c == ',')
        {
            rest[i] = REPLACEMENT_CHAR;
        }
        else if ( c=='\'')
        {
            inString = !inString;
        }
        else if (!inString && c == '(')
        {
            if (start != -1)
                throw new AssertionError("Start brace found twice!");

            start = i+1;
        }
        else if (!inString && c == ')')
        {
            end = i-1;
            break;
        }
    }

    if (start == -1 || end == -1)
        throw new AssertionError("Start or end of the values part not found!");

    // split the result for having the values
    final String[] values = new String(rest, start, end-start+1).split("\\s*,\\s*");
    if (values.length != columns.length)
        throw new AssertionError("The number of values differs of the number of columns");

    // reset the , char in the values containing REPLACEMENT_CHAR and collect the results
    final TreeMap<String, String> map = new TreeMap<String, String>();
    for (int i=0; i<values.length; i++)
    {
        if (values[i].indexOf(REPLACEMENT_CHAR) != -1)
        {
            values[i] = values[i].replace(REPLACEMENT_CHAR, ',');
        }

        map.put(columns[i], values[i]);
    }

    return map;
} 
```

# linux - 暂停在后台运行的 bash 脚本

> ID：11878474
> 
> 赞同：2
> 
> 时间：2012-08-09T07:16:12.720
> 
> 标签：linux, bash, shell

我有一个在后台运行的 bash 脚本，它每 5 秒循环执行一次。这会影响在 shell 本身上执行的命令。

有没有办法，我可以暂停脚本执行，直到 shell 不执行其他命令。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:28:59.080

停止你可以使用的 scipt

```
kill -s STOP $PID 
```

其中 $PID 包含脚本的进程 ID。要重新启动它，请使用

```
kill -s CONT $PID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:20:28.917

Renice 应该在这种情况下提供帮助。使用 renice，您可以降低/提高进程的优先级。查看手册页以获得更详细的帮助。

# mysql - Rails 计数记录而不再次查询

> ID：11878475
> 
> 赞同：1
> 
> 时间：2012-08-09T07:16:20.997
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord, count

说我查询表

```
rawStats = Stats::TrackProcessed.select("token") 
```

并收到表中所有令牌的数量。

看起来像这样：

```
3e79a387c29bda1069271e06ad03d82b8296242e
059681f46ab1c1fa8cf8443a82f0898172e0b646
eacd846ea4e91b49f92f416f61e0f2d075b9dae7
eacd846ea4e91b49f92f416f61e0f2d075b9dae7
811705019a970929801adbf3db0ede31ed01816c 
```

我需要返回一个看起来像这样的哈希列表

```
{
   '3e79a387c29bda1069271e06ad03d82b8296242e' => 1,
   '059681f46ab1c1fa8cf8443a82f0898172e0b646' => 1
   'eacd846ea4e91b49f92f416f61e0f2d075b9dae7' => 2
   '811705019a970929801adbf3db0ede31ed01816c' => 1
} 
```

其中第一个值是一个标记，第二个值是该标记在表中的出现次数。然后我需要从所有记录中得到这个平均值。

到目前为止，我已经得到了查询表

```
rawStats = Stats::TrackProcessed.select("distinct token") 
```

通过检索唯一令牌

然后虽然每个循环计算每个令牌的出现次数

```
rawArr = []
rawStats.each do |r|
  token = {
    :token => r.token,
    :count => rawStats.where("token = ?",r.token).count('token')
  }

  rawArr << token
end 
```

但这过程为

```
(0.7ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = '196e595b573f71fc2af04693c73809303bebd62d'
(0.7ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = 'db67ab44e94ca338d90e902a36c37b4998a47ff0'
(0.7ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = 'a8a78cffc0935b07f90b5f3008dcad27e8ac71c7'
(0.8ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = '91b8ae5ffa12ece30d8548b488fab8aff7614f2b'
(0.7ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = '649e7aa59cc8af6c59cec1cf637ffed1ce6b3be7'
(0.7ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = '441dae6f22776687b57daaaeef2c63c31902b987'
(0.7ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = '6b8937a13012f22c8a4cdd4ed4caad0ad8761d3b'
(0.6ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = 'beaba154f38d5c9b64e4fb2d851ec785bd6bc4ec'
(0.6ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = 'efa9f3a71c4ff33abcae4af788ef6d0be599f76a'
(0.7ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = '053a7727885f3c4099a9b31a2eccc77b99df50ee'
(0.7ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = '32dc984c9f85ff91242533144cd179a9b4529bed'
(0.7ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = 'a58804ae38490f08a1645c8271e88df3757fe771f'
(0.7ms)  SELECT COUNT(`stats_track_processed`.`token`) FROM `stats_track_processed` WHERE `stats_track_processed`.`token` = 'a58804a2e38490f08a1645c8271e88df3757fe771f' 
```

通过在处理大量数据时分别查询每个令牌，这看起来确实是一个非常糟糕的主意。

我已经通过 SQL 查询完成了这个，看起来像这样

```
SELECT AVG(viewsAverage) as total 
FROM 
 (SELECT COUNT(token) AS viewsAverage 
  FROM stats_track_processed 
  WHERE admedia_id = #{params[:admedia_id]} 
    AND #{params[:banner_id]} 
    AND (access_time BETWEEN '#{params[:begin]}' 
    AND DATE_ADD('#{params[:end]}', INTERVAL 1 DAY)) 
  GROUP BY token) 
stats_track_processed 
```

但这看起来确实是一个糟糕的解决方案，我目前正在重构代码并将所有逻辑移至控制器。

任何帮助都感激不尽。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:44:52.520

试试这个

```
 Stats::TrackProcessed.select(:token).count(group: :token) 
```

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:20:08.943

您可以在单个查询中实现此目的：

```
SELECT SUM(IF(token = '196e595b573f71fc2af04693c73809303bebd62d', 1, 0)) AS token_1,
       SUM(IF(token = 'db67ab44e94ca338d90e902a36c37b4998a47ff0', 1, 0)) AS token_2,
       ...
FROM `stats_track_processed`
WHERE `stats_track_processed`.`token` IN('196e595b573f71fc2af04693c73809303bebd62d',
                                         'db67ab44e94ca338d90e902a36c37b4998a47ff0', ...); 
```

或者

```
SELECT token, 
       COUNT(token) AS token_count
FROM stats_track_processed
GROUP BY token; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T07:28:54.087

遍历完整列表并维护计数的散列。

```
result = Stats::TrackProcessed.select("token")
counts = Hash.new{|h,k| h[k] = 0 }
result.each{|el| counts[el] +=1} 
```

然后为了得到一个平均值，你可以做类似的事情

```
 average = counts.values.inject(0){|sum, el| sum + el} / counts.length 
```

# jsf - 基于模板的 facelet 标签库

> ID：11878476
> 
> 赞同：1
> 
> 时间：2012-08-09T07:16:22.847
> 
> 标签：jsf, facelets, icefaces

我想创建一个由模板支持的 facelet 组件。

像这样的东西：

```
<h:panelGroup rendered="#{myBean.isStepActive('step0')}">
  <composition template="wizard-step.jspx">
    <ui:define name="title">Step One</ui:define>
    <ui:define name="text"><p>This describes the step</p></ui:define>
  </composition>
</h:panelGroup>
<h:panelGroup rendered="#{myBean.isStepActive('step1')}">
  <composition template="wizard-step">
    <ui:define name="title">Step Two</ui:define>
(...) 
```

似乎不起作用，因为无论呈现返回什么，wizard-step.jspx 的内容都会放在任何页面上（似乎 ui: 标签在所有其他标签之前进行评估。

有没有办法完成我想要的？在我的情况下，普通的自定义标签不够强大，因为它只支持 xml 属性但不支持子元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:59:58.910

好的，我找到了解决方案，这很容易。

只需使用普通的 taglib 并像这样使用 <ui:insert> 和 <ui:define> ：

```
<my:wizardStep>
<ui:insert name="title"><h2>The header comes here</h2>/ui:insert>
</<my:wizardStep> 
```

在标签定义中：

```
<ui:composition>
<ui:insert name="title" />
(...) 
```

# c#-4.0 - 使用 Monotouch 在 UITableViewCell 中绘制网格

> ID：11878479
> 
> 赞同：2
> 
> 时间：2012-08-09T07:16:30.927
> 
> 标签：c#-4.0, uitableview, xamarin.ios, monotouch.dialog

嗨，我刚刚使用 Monotouch 一周大，我手头的任务是在 ipad 上显示一个多行多列的表格，即具有许多单元格的网格状结构，每个单元格包含一些以后可以编辑的数据也。我的应用程序应该看起来有点像下图，除了它必须在 ipad 上运行。

![我的应用程序应该看起来像这样，除了它是在 ipad 上工作](../Images/03a94c876a37c3ad74b518f8a07ebf80.png)

我发现的唯一有用的链接是[这个](http://usxue.is-programmer.com/posts/14176.html)，但是这篇文章讨论了如何使用 Objective C 来做到这一点（现在因为我使用的是 Monotouch & c#，所以我对 Objective C 不满意，所以我无法理解这个解决方案）。

所以我的问题是如何使用 Monotouch 来实现相同的（即具有许多列和行的表格 - 一个网格）。

请帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:01:49.277

阿吉特，

如果你想使用 UITableView 来呈现你的数据，你应该有效地做到这一点，以便每个“行”都可以按照你需要的方式呈现列。

您需要做的是创建一个 UIView 子类，它可以呈现列中的元素。有多种方法可以做到这一点，您可以：

*   创建您自己的 UIView，它实现了绘制方法并按需绘制。
*   创建一个复合的 UIView，只有一些子视图

获得视图后，您可以将其添加到 UITableViewCell

您可以按照我的一些建议在此处创建这些 UITableViewCell：

[http://tirania.org/monomac/archive/2011/Jan-18.html](http://tirania.org/monomac/archive/2011/Jan-18.html)

但是使用一维设计的二维浏览并不是最佳的。您可能只想在网格中呈现各种项目，因此您不妨直接使用 UIScrollView 并在其中添加所有子 UIView。

唯一的区别是 UITableView 旨在回收/重用一些昂贵的对象（每行），而将所有内容存储在视图上的基本设计不会有任何这些好处。

更高级的选项是让您创建/销毁在用户滚动时显示/隐藏的视图。

# bash - vim终端OS X Mountain Lion中的光标颜色

> ID：11878484
> 
> 赞同：10
> 
> 时间：2012-08-09T07:16:51.177
> 
> 标签：bash, vim, terminal, macvim

我想让光标和选定的文本在 vim 中更容易阅读（白色背景，黑色前景），所以我已经完成了

```
hi Visual guibg=white guifg=black gui=NONE ctermfg=black ctermbg=white cterm=reverse
hi Cursor guibg=white guifg=black gui=NONE ctermfg=black ctermbg=white cterm=reverse 
```

这正是我在 MacVim 上想要的。然而，在 vim 终端上，它默认为终端首选项，这很难阅读和找到……我怎样才能覆盖终端默认值？

**编辑：**说`hi Visual`类似的作品完美无缺。那`hi Cursor`不是。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-01-18T16:00:02.687

您不能以编程方式更改光标颜色（即仅对 vim 进行更改），但您可以在 Terminal>Preferences>Profiles>Text>Cursor 中更改它（见图），这可能会解决您的问题。

我发现明亮的绿色光标对可见度有很大影响！

***编辑：**评论中提到了这一点，但我第一次错过了，所以我认为它应该得到自己的答案。*

[![终端设置](../Images/263911858ed643386e8171e7ee897305.png)](https://i.stack.imgur.com/Vu81s.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T08:32:30.297

我不是 Mac 用户，但我不相信这是可能的。控制台 Vim 中的光标颜色继承自终端应用程序，无法修改。* 您可以尝试在终端首选项中更改光标颜色。

*免责声明：Windows 命令提示符当然是这样，我在工作中被迫使用它。如果其他类 Unix shell 更灵活，我不会感到惊讶。

# ruby-on-rails - gem numbers_and_words 不适用于十进制值

> ID：11878486
> 
> 赞同：0
> 
> 时间：2012-08-09T07:16:53.243
> 
> 标签：ruby-on-rails

我使用了 gem numbers_and_words 但它不适用于十进制值。然后我尝试了另一种宝石货币，但它也不起作用。我应该使用什么宝石来转换文字金额？或者有什么方法吗？number_to_human 对我也没用。请建议我，以便我得到这些输出：43545.347 四万三千五百四十五和三百四十七派斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:29:11.503

我认为您没有花足够的时间查看[https://github.com/bcarrere/currency-in-words](https://github.com/bcarrere/currency-in-words) gem，因为在描述中它提供了关于如何使用 gem 的非常清晰的视图。

还要确保捆绑安装并重新启动服务器。

编辑：还要确保您使用美国符号进行数字分隔，点 (.) 而不是逗号 (,)

# javascript - 使用 javascript 更改 div 大小

> ID：11878487
> 
> 赞同：0
> 
> 时间：2012-08-09T07:16:55.950
> 
> 标签：javascript, html, size

我做过类似的事情；

```
 <div id="bloc2" onDblClick="document.getElementById('bloc2').style.height = 200px" style="width: 350px; height: 150px; overflow: auto; border: 1px solid #000;background-color:#F2F2F2">
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

但它不起作用 div 是使用 php 生成的，这是我的代码：

```
<?php 
$sql = "SELECT * FROM commentaire where n_doss='".mysql_real_escape_string($_GET['n_doss'])."' ORDER BY date DESC LIMIT 0,5";
$result = mysql_query($sql) or die(__LINE__.mysql_error().$sql); 
?>
    <?php
     $r=0;
     while($donnees2 = mysql_fetch_assoc($result)) {
      ?>
      <table cellspacing="10" cellpadding="10">
        <tr>
           <td width="128px">
           <?php if ($donnees2['etat']=="VR") {?>
                <img src="images/wallet.png" />
           <?php } else {?>
                <img src="images/newsletter.png" width="128" height="128" />
           <?php } ?>
           </td>
           <td>
             <div id="bloc<?php echo ++$r ;?>"                  
                  onDblClick="document.getElementById('bloc<?php echo $r ;?>').style.height = 200px" 
                  style="width: 350px; height: 150px; overflow: auto; border: 1px solid #000;background-color:#F2F2F2">
                <?php echo mb_strtoupper(html_entity_decode($donnees2['commentaire'])) ; ?>
            </div> 
```

但没有任何效果，除了控制台中的错误。

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:21:37.300

在行

```
<div id="bloc2" onDblClick="document.getElementById('bloc2').style.height = 200px" style="width: 350px; height: 150px; overflow: auto; border: 1px solid #000;background-color:#F2F2F2"> 
```

你有 Javascript 错误：

```
document.getElementById('bloc2').style.height = 200px 
```

200px 应该是一个字符串，你必须添加引号所以使用这一行代替：

```
document.getElementById('bloc2').style.height = '200px' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:22:47.760

您可以使用`this`关键字并`200px`用引号括起来

```
<div id="bloc2" onDblClick="this.style.height = '200px'" style="width: 350px; height: 150px; overflow: auto; border: 1px solid #000;background-color:#F2F2F2"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:21:58.460

尝试这个

```
<div id="bloc2" 
     onDblClick="this.style.height = '200px'" 
     style="width: 350px; height: 150px; overflow: 
     auto; border: 1px solid #000;background-color:#F2F2F2">

Uncaught SyntaxError: Unexpected token ILLEGAL

</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T07:20:10.677

你忘了用 200px 添加字符串 ""

```
<div id="bloc2" onDblClick="document.getElementById('bloc2').style.height = '200px'" style="width: 350px; height: 150px; overflow: auto; border: 1px solid #000;background-color:#F2F2F2"> 
```

[演示](http://jsfiddle.net/rMbYP/)

# blackberry - 请等待登录按钮后出现的屏幕

> ID：11878492
> 
> 赞同：0
> 
> 时间：2012-08-09T07:17:23.463
> 
> 标签：blackberry, popup, progress, pleasewait

我正在尝试在我的 BlackBerry 应用程序中实现“等待屏幕”。当用户单击“登录”时会出现该屏幕，并在成功登录后消失。我在“登录”侦听器中调用屏幕，然后调用方法从网络服务获取数据。获取数据并显示新屏幕后，“等待屏幕”应该会消失。但是，单击登录`Uncaught - RuntimeException`后，我会在新屏幕上显示“等待屏幕”。有人可以帮我吗？

```
public class MessageScreen extends PopupScreen
{
    private String message;

    public MessageScreen (String message)
    {
        super( new HorizontalFieldManager(), Field.NON_FOCUSABLE);
        this.message = message;
        final BitmapField logo = new BitmapField(Bitmap.getBitmapResource( "cycle.gif"));
        logo.setSpace( 5, 5 );
        add(logo);

        RichTextField rtf = new RichTextField(message, Field.FIELD_VCENTER | Field.NON_FOCUSABLE | Field.FIELD_HCENTER);
        rtf.setEditable( false );

        add(rtf);
    }
} 
```

我在“登录”单击事件中调用它 - 按钮侦听器。

```
public void fieldChanged(Field field, int context)
{
    // Push appropriate screen depending on which button was clicked
    String uname = username.getText();
    String pwd = passwd.getText();
    if (uname.length() == 0 || pwd.length()==0) {
        Dialog.alert("One of the textfield is empty!");
    } else {
        C0NNECTION_EXTENSION=checkInternetConnection();
        if(C0NNECTION_EXTENSION==null)
        {
            Dialog.alert("Check internet connection and try again");
        }
        else
        {
            UiApplication.getUiApplication().invokeLater( new Runnable()
            {
                public void run ()
                {
                    UiApplication.getUiApplication().pushScreen( new MessageScreen("Signing in...") );
                }
            } );
            doLogin(uname, pwd);
        }
    }
}

private String doLogin(String user_id, String password)
{
    String URL ="";
    String METHOD_NAME = "ValidateCredentials";
    String NAMESPACE = "http://tempuri.org/";
    String SOAP_ACTION = NAMESPACE+METHOD_NAME;
    SoapObject resultRequestSOAP = null;
    HttpConnection httpConn = null;
    HttpTransport httpt;
    SoapPrimitive response = null;
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("username", user_id);
    request.addProperty("password", password);
    System.out.println("The request is=======" + request.toString());
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    httpt = new HttpTransport(URL+C0NNECTION_EXTENSION);
    httpt.debug = true;
    try
    {
        httpt.call(SOAP_ACTION, envelope);
        response = (SoapPrimitive) envelope.getResponse();
        String result =  response.toString();
        resultRequestSOAP = (SoapObject) envelope.bodyIn;
        String[] listResult = split(result, sep);
        strResult = listResult[0].toString();
        strsessionFirstName = listResult[1].toString();
        strsessionLastName = listResult[2].toString();
        strsessionPictureUrl = MAINURL + listResult[3].substring(2);
        strsessionStatusId = listResult[4].toString();
        strsessionStatusMessage = listResult[5].toString();
        strsessionLastUpdateTst = listResult[6].toString();

        if(strResult.equals("credentialaccepted"))
        {
            if(checkBox1.getChecked() == true)
            {
                persistentHashtable.put("username", user_id);
                persistentHashtable.put("password", password);
            }
            Bitmap bitmap = getLiveImage(strsessionPictureUrl, 140, 140);
            StatusActivity nextScreen = new StatusActivity();
            nextScreen.getUsername(user_id);
            nextScreen.getPassword(password);
            nextScreen.setPictureUrl(bitmap);
            nextScreen.setImage(strsessionPictureUrl);
            nextScreen.setFirstName(strsessionFirstName, strsessionLastName, strsessionLastUpdateTst, strsessionStatusMessage);
            UiApplication.getUiApplication().pushScreen(nextScreen);
            UiApplication.getUiApplication().invokeLater( new Runnable()
            {
                public void run ()
                {
                    UiApplication.getUiApplication().pushScreen( UiApplication.getUiApplication().getActiveScreen() );
                }
            } );
        }
        if(strResult.equals("credentialdenied"))
        {
            Dialog.alert("Invalid login details.");
            UiApplication.getUiApplication().pushScreen(new LoginTestScreen() );
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        System.out.println("The exception is IO==" + e.getMessage());
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        System.out.println("The exception xml parser example==="
        + e.getMessage());
    }

    System.out.println( resultRequestSOAP);
    //UiApplication.getUiApplication().pushScreen( UiApplication.getUiApplication().getActiveScreen() );
    return response + "";

    //UiApplication.getUiApplication().pushScreen(new InfoScreen());
    //Open a new Screen
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:55:32.453

到目前为止，我只看到一个问题 - UI 线程中的网络。请将您所有的网络操作放到另一个`Thread.run()`.

您还可以通过以下方式获得更详细的错误描述：1) 导航到主屏幕 2) 按住 alt 按钮并按键盘上的 LGLG 3) 探索显示特定错误的事件日志

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:23:50.737

就像 Eugen 说的，你应该`doLogin()`在后台运行`Thread`：

```
final String uname = username.getText();
final String pwd = passwd.getText();

Thread backgroundWorker = new Thread(new Runnable() {
    public void run() {
        doLogin(uname, pwd);
    }
});

backgroundWorker.start(); 
```

如果这样做，您将需要使用`UiApplication.invokeLater()`（或其他类似技术）来显示您的屏幕（返回主/UI 线程）。您不能`doLogin()`完全按照原来的方式保留该方法，因为它会调用更改 UI。例如，您有几个直接调用 use `pushScreen()`，不应该（直接）从后台调用。

这不好（从后台）：

```
 UiApplication.getUiApplication().pushScreen(nextScreen); 
```

但是，这是：

```
 UiApplication.getUiApplication().invokeLater( new Runnable()
        {
            public void run ()
            {
                UiApplication.getUiApplication().pushScreen(nextScreen);
            }
        } ); 
```

但是，同样，这段代码应该做什么？：

```
 UiApplication.getUiApplication().pushScreen(nextScreen);
        UiApplication.getUiApplication().invokeLater( new Runnable()
        {
            public void run ()
            {
                UiApplication.getUiApplication().pushScreen( UiApplication.getUiApplication().getActiveScreen() );
            }
        } ); 
```

这对我来说没有意义。你想用这些代码行做什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:23:30.283

试试这个 -

```
public void fieldChanged(Field field, int context)
{
// Push appropriate screen depending on which button was clicked
String uname = username.getText();
String pwd = passwd.getText();
if (uname.length() == 0 || pwd.length()==0) {
    Dialog.alert("One of the textfield is empty!");
} else {
    C0NNECTION_EXTENSION=checkInternetConnection();
    if(C0NNECTION_EXTENSION==null)
    {
        Dialog.alert("Check internet connection and try again");
    }
    else
    {

    Dialog busyDialog = new Dialog("Signing in...", null, null, 0, Bitmap.getPredefinedBitmap(Bitmap.HOURGLASS));
    busyDialog.setEscapeEnabled(false);
    synchronized (Application.getEventLock()) {
    busyDialog.show();
    }
    doLogin(uname, pwd);
    }
}
} 
```

# regex - 增加字符串 perl 中所有数字的出现次数

> ID：11878494
> 
> 赞同：2
> 
> 时间：2012-08-09T07:17:49.610
> 
> 标签：regex, perl

我想增加字符串 perl 中所有数字的出现，例如。如果我的字符串为 $str = "转到第 34 页并阅读第 3 行"，则应将其更改为 $str = "转到第 35 页并阅读第 4 行"。

我尝试使用

```
$str =~ s/[\d]/$&+1/g 
```

但它以字符串形式输出，即“转到第 34+1 页并阅读第 3+1 行”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T07:24:44.440

这个怎么样：

```
$ echo "foo 1 bar 2" | perl -pE 's/(\d+)/$1+1/ge'
foo 2 bar 3 
```

关键是`e`将替换部分视为表达式的正则表达式选项。

# javascript - 更改画布中圆圈的起点？

> ID：11878495
> 
> 赞同：0
> 
> 时间：2012-08-09T07:17:57.640
> 
> 标签：javascript, css, html, canvas

我发现这段代码可以在 Canvas 元素中的弧上键入。我已经将它基本修改为我需要的，但我不确定如何更改它的“起点”？

我在[**这里有一个演示**](http://jsfiddle.net/demchak_alex/Vwd6n/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:47:39.547

```
circle = {
    x: cnv.width / 2,  // x coordinate of center
    y: cnv.height / 2, // y coordinate of center
    r: 150,
    lw: 75
}; 
```

例如，如下给出的将在画布的原点绘制它

```
circle = {
    x: 0,  // x coordinate of center
    y: 0, // y coordinate of center
    r: 150,
    lw: 75
}; 
```

# clojure - 如何使'（）为零？

> ID：11878501
> 
> 赞同：3
> 
> 时间：2012-08-09T07:18:08.843
> 
> 标签：clojure

如何使clojure`'()`算作`nil`？

例如：如何制作类似的东西

```
(if '() :true :false) 

;to be 

:false

;Or easier 

(my-fun/macro/namespace/... (if '() :true :false))

:false 
```

而不仅仅是如果。各方面。

```
(= nil '()) or (my-something (= nil '()))

true 
```

并且每个代码都被 (= '() nil) 保存。

```
(something (+ 1 (if (= nil '()) 1 2)))

2 
```

我在想某种正则表达式。它将查看代码并替换`'()`为`nil`，但有一些类似的东西`(rest '(1))`和许多其他的东西`'()`，我不知道如何处理它。

有人告诉我，宏允许您构建自己的语言。我想通过更改clojure来尝试它。所以这主要是关于“clojure 如何工作以及如何改变它？” 而不是“我的工作真的需要它”。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T07:35:42.340

`'()`只是不是一回事`nil`——你为什么想要它呢？

您可能正在寻找的是该`seq`函数，如果给定一个空集合，它将返回 nil：

```
(seq [1 2 3])
=> (1 2 3)

(seq [])
=> nil

(seq '())
=> nil 
```

`seq`因此通常用于测试“空虚”，成语如下：

```
(if (seq coll)
  (do-something-with coll)
  (get-empty-result)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:13:38.193

您说您想使用宏更改 Clojure。目前，据我所知，这不是你可以用“常规”宏系统做的事情（术语修复任何人？）。你真正需要的（我*认为*）是一个阅读器宏。我在网上看到的东西（例如[这里](http://www.infoq.com/interviews/hickey-clojure-reader)）似乎说在 Clojure 1.4 中存在*类似*阅读器宏之类的东西——但我对此并不熟悉，因为我真的很喜欢使用[clooj](https://github.com/arthuredelstein/clooj)作为我的 IDE，而且它目前没有使用 Clojure 1.4\. 也许其他人对这种“可扩展阅读器”魔术有更好的信息。

无论如何，我不太喜欢以这种方式更改语言的想法，而且我认为有一个潜在的非常好的替代方案：即 Clojure 函数[`not-empty`](http://clojuredocs.org/clojure_core/clojure.core/not-empty)。

此函数接受任何集合并按原样返回该集合，或者`nil`如果该集合为空则返回。这意味着在任何你想`()`返回的地方`nil`，你都应该把它包装起来`not-empty`。这个答案与上面 mikera 的答案非常相似，只是您不必*将*集合转换为序列（这可能很好）。

在您拥有“手写”集合的情况下，两者都使用`seq`并且非常愚蠢。`not-empty`毕竟，如果您是手写（或者更确切地说是手动输入），那么您将确定它是否为空。这很有用的情况是当您有一个返回集合的表达式或符号，并且您不知道返回的集合是否为空时。

例子：

```
=> (if-let [c (not-empty (take (rand-int 5) [:a :b :c :d]))]
     (println c)
     (println "Twas empty"))
;//80% of the time, this will print some non-empty sub-list of [:a :b :c :d]
;//The other 20% of the time, this will return...
Twas empty
=> nil 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:42:21.970

怎么样`empty?`？这是最有表现力的。

```
(if (empty? '())
  :true
  :false) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T16:40:39.707

您可以覆盖宏和函数。例如：

```
(defn classic-lisp [arg]
  (if (seq? arg) (seq arg) arg))

(defn = [& args]
  (apply clojure.core/= (map classic-lisp args)))

(defmacro when [cond & args] 
  `(when (classic-lisp ~cond) ~@args)) 
```

不幸的是，您不能覆盖 if，因为它是一种特殊形式而不是宏。您将不得不用另一个宏包装您的代码。

让我们将 if* 宏设为具有 common-lisp 行为的 if：

```
(defmacro if* [cond & args]
    `(if (classic-lisp ~cond) ~@args) 
```

有了这个，我们可以用 if*s 替换所有的 if：

```
(use 'clojure.walk)
(defn replace-ifs [code]
  (postwalk-replace '{if if*} (macroexpand-all code)))
(defmacro clojure-the-old-way [& body]
  `(do ~@(map replace-ifs body))) 
```

现在：

```
=> (clojure-the-old-way (if '() :true :false) )
:false 
```

您也应该能够加载文件并替换其中的 ifs：

```
(defn read-clj-file [filename]
  ;; loads list of clojure expressions from file *filename*
  (read-string (str "(" (slurp filename)  ")"))) 

(defn load-clj-file-the-old-way [filename]
  (doseq [line (replace-ifs (read-clj-file filename))] (eval line)) 
```

请注意，我没有测试加载文件的代码，它可能与 leiningen 或命名空间不兼容。我相信它应该与 overriden = 一起使用。

# java - 如何将 facelet 包裹在 元素

> ID：11878506
> 
> 赞同：0
> 
> 时间：2012-08-09T07:18:50.810
> 
> 标签：java, jsf, jsf-2, primefaces, facelets

我有`<p:dataTable>`一个小脸。facelet 包含在页面中。选择表格行应触发对周围页面元素的更新。

当我`<p:ajax event="rowSelect" update=":open:separate" />`将表格包括在内时，一切正常。但是我在多个页面上使用该表，并且不能保证更新元素的 Id 不变。

我尝试`<p:ajax>`从表格中删除并将包含的表格包装在其中，如下所示：

```
<p:ajax event="rowSelect" update=":open:separate">
    <ui:include src="/open/components/submittersTable.xhtml"/>
</p:ajax> 
```

我收到此错误（根本原因已删减）：

```
javax.servlet.ServletException: /open/index.xhtml @30,59 <p:ajax> Event:rowSelect is not supported.
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
    org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)

root cause

javax.faces.view.facelets.TagException: /open/index.xhtml @30,59 <p:ajax> Event:rowSelect is not supported.
    org.primefaces.component.behavior.ajax.AjaxBehaviorHandler.applyAttachedObject(AjaxBehaviorHandler.java:148)
    org.primefaces.component.behavior.ajax.AjaxBehaviorHandler.apply(AjaxBehaviorHandler.java:126) 
```

我对可能发生的事情有错误的想法`<p:ajax>`吗？我是否必须将其包含在表格中并尝试​​强制周围页面上的 id 适合？或者是否可以包装`include`而`ajax` 我只是做错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:49:55.727

不，你不能因为**event="rowSelect"**。**event="rowSelect"**的一些解释意味着“选择了数据表中的一行”。所以你不能在 p:dataTable 之外使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:58:54.007

我为此找到了一种不同的方法 - 为 facelet 设置 ui 参数肯定比使用 facelet 为所有视图强制执行 Id 更好。

可以安全地将`<p:ajax>`标签留在 facelet 表中，只需在包含站点上定义一个参数：

```
<ui:include src="/open/components/submittersTable.xhtml">
    <ui:param name="updateParam" value=":open:content" />
</ui:include> 
```

并更改`updated`属性以使用此参数：

```
<p:ajax event="rowSelect" update="#{updateParam}" /> 
```

# html - 在javascript中将SVG代码转换为png

> ID：11878512
> 
> 赞同：0
> 
> 时间：2012-08-09T07:19:25.637
> 
> 标签：html, canvas, svg

我有 javascript 代码： var win = ("data:image/svg xml;base64," Utils.encode64(svg)); 在 HTML5 中。我想把它转换成数据：image/png;base64,.....

我试过 win= win.replace('data:image/png;base64,',''); 但是将xml替换为png，但它不能正确显示图像并给出错误消息。

请帮忙。。

# c# - 将按钮事件返回到 objectListView 表单并正常退出

> ID：11878521
> 
> 赞同：0
> 
> 时间：2012-08-09T07:19:51.800
> 
> 标签：c#, button, event-handling, click, objectlistview

还在学习c#。我正在创建一个 ObjectListView，其中包括捕获按钮点击。

```
 public partial class MainForm : Form
    {
    private FormSpecParser parser;
    private static ObjectListviewForm form;

    public MainForm()
    {
        InitializeComponent();
        createMainForm();
    }

    private void createMainForm()
    {
        form = new ObjectListviewForm();
        form.Populate(parser.ParsedSpec);
        form.Show(this);
        }
    }

public partial class ObjectListviewForm : Form
{
    ...
        void b_Click(object sender, EventArgs e)
        {
            Button b = sender as Button;
            if (b == null) return;
            var button = GetFormSpecButton(b.Name);

            MessageBox.Show(button.ClickMessageBoxStub);
        }
} 
```

我有两个问题：1）我如何让 ObjectListView 告诉 MainForm 一个按钮被点击了，请处理它。

2）我希望 ObjectListView 表单是用户看到的第一个表单，当 ObjectListView 表单关闭时，程序关闭。现在 ObjectListView 表单确实出现了，但它的“后面”是一个空白表单，当 ObjectListView 表单关闭时，控制似乎会传回这个空白表单而不是退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:59:19.993

1) 您将 MainForm 作为所有者传递给 Show 方法 - form.Show(this)。这意味着在 ObjectListviewForm 中，您可以像这样从 MainForm 调用方法：

```
(this.Owner as MainForm).MethodInMainform(); 
```

2）在 Program.cs 文件中你应该有这样的行：

```
 Application.Run(new MainForm()); 
```

将其更改为：

```
Application.Run(new ObjectListviewForm ()); 
```

# php - php上动态内容的日程表形式

> ID：11878522
> 
> 赞同：0
> 
> 时间：2012-08-09T07:20:04.210
> 
> 标签：php, jquery, ajax

帮助解决问题。
有一个表格，上面有四个 radiobatona，1 周，2 周，3 和 4。
我们选择了标记出现了一个表（或表）的一周。该表由天组成。每天针对两个输入（从和到），输入可以是多个。员工 vyberaem 本人。有添加和删除的 INPUT 按钮。即，例如：
周一 10:00 至 14:00
15:00 至 18:00
20:00 至 21:00
周二 10:00 至 17:00
等。
任何一天他都可能错过。
问题是我如何将所有这些数据发送到服务器并处理它们。
一周后，输入，我们得到动态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:30:24.400

虽然我没有让你清楚，但你必须将输入设置为数组。示例：假设选中了星期一按钮。

```
<input type="checkbox" name="time[]" value="10:00 to 14:00" />
<input type="checkbox" name="time[]" value="15:00 to 18:00" />
<input type="checkbox" name="time[]" value="20:00 to 21:00" />

print_r($_POST['time']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:54:15.620

关于：“问题是我如何将所有这些数据发送到服务器并处理它们。”

```
var formData = $("#myForm").serialize();
$.ajax(...
   type: "POST",
   data: formData, 
```

更多的;

jQuery -> [http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

PHP 数组 -> [http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

# c# - CheckBox.CheckedChanged 未在 winform 上触发

> ID：11878527
> 
> 赞同：4
> 
> 时间：2012-08-09T07:20:19.807
> 
> 标签：c#, winforms, checkbox

```
 public Form1()
    {
        InitializeComponent();
    }

    private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        textBox1.Enabled = checkBox1.Checked;
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        checkBox1.Checked = false;
    } 
```

我在加载事件处理程序中设置了检查状态，为什么在这种情况下，CheckedChanged 没有被触发？如果我单击复选框，则会触发 CheckedChanged。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T07:28:54.733

如果您的选中状态最初为`false`，则将其`false`再次设置为不会触发`CheckedChanged`事件。
发生这种情况是因为检查状态实际上并没有*改变*

这是尝试设置 `CheckBox1.Checked`属性时使用的内部代码

```
public void set_Checked(bool value)
{
    if (value != this.Checked)
    {
        this.CheckState = value ? CheckState.Checked : CheckState.Unchecked;
    }
} 
```

# android - 为什么 getListView().getChildAt() 方法在填充的 ListView 中返回 null？

> ID：11878537
> 
> 赞同：2
> 
> 时间：2012-08-09T07:20:49.997
> 
> 标签：android, android-listview, listviewitem

我有包含 5000 个项目的列表视图。我想在某个位置获取列表视图项并对其进行处理，我调用 getListView().getChildAt(1) 方法并返回 null。

```
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_items);

cur = ItemDao.getItemsCursor();
column_names = new String[] { ItemDao.NAME, ItemDao.MEASUREUNIT, ItemDao.REM };
columns = new int[] { R.id.item_name, R.id.item_measureunit, R.id.item_rem };

scadap = new SimpleCursorAdapter(this, R.layout.list_items, cur, column_names, columns, 0);
ListView list = getListView();

list.setDivider(getResources().getDrawable(android.R.drawable.divider_horizontal_bright));
list.setDividerHeight(10);

setListAdapter(scadap);
list.invalidateViews();
  (getListView().getChildAt(getListView().getFirstVisiblePosition())).setVisibility(View.INVISIBLE);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:28:59.273

问题可能是由于尝试检索列表视图的子项，`onCreate()`因为列表尚未呈现，因此任何与视图相关的方法都将返回 null（或空）。

一种解决方案可能是获取您的列表视图并在`onPostCreate()`方法中设置适配器和侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:28:38.627

尝试`OnItemClickListener()`用于获取所选项目

```
listView.setOnItemClickListener(new OnItemClickListener() {

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    String  getSelectedItemOfList = yourList.get(pos); // here you can get selected item.
        }
}); 
```

希望这可以帮助。

# java - java Safe 对象线程安全的快照

> ID：11878539
> 
> 赞同：1
> 
> 时间：2012-08-09T07:20:57.933
> 
> 标签：java, multithreading, backup

我有一个服务器存储来自客户端的数据。每个客户都在自己的线程中工作，并且拥有一个数据对象。
这个 Data-Object 是一个自定义类，让我们调用 Data.java 包含不特定的数据，这可能是一些字节，但通常在 100kb < Data < 2mb 左右。
现在我有一个备份线程，遍历客户端列表，使用 Xstream 将它们的数据对象解析为 xml 并将其存储在数据库中。
但这安全吗？
如果客户端在备份数据时正在执行更改数据的操作（假设客户端大约每 0.1 秒发送一次请求，并且某些请求可能会持续几秒钟左右更改数据），则此数据可能已损坏。
什么是这样做的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:29:45.453

每当您更改或读取对象时，您都可以使用`synchronized`或锁定对象。`Lock`我还将使用一个`boolean dirty;`标志，该标志`true`在您更改它时设置为。这样，您的*后台*线程只需要保存已更改的对象。

由于客户端可能会在很长一段时间内更改数据，我会考虑使用`lock.tryLock()`which 允许您尝试在不阻塞的情况下获取锁，以便线程仍然可以“备份”未锁定的对象。您可以随时重试下一个周期。

一个例子

```
class Data{ 
    final Lock lock = new ReentrantLock();
    boolean dirty = false;

    public void setSomething(String a) {
        lock.lock();
        try {
            // modify the Data
            dirty = true;
        } finally {
            lock.unlock();
        }
    }

    public void backupData(Backup backup) {
       if (!lock.tryLock()) return;
       try {
           if (!dirty) return;

           backup.for(this);

           dirty = false;
       } finally {
           lock.unlock();
       }
    } 
```

# jquery - 如何使 RequireJS 可靠？

> ID：11878542
> 
> 赞同：0
> 
> 时间：2012-08-09T07:21:09.200
> 
> 标签：jquery, asp.net-mvc, requirejs

RequireJS 大约有一半时间为我工作。如果我刷新页面，它会随机出现加载问题。

我正在调整一个小型 MVC 项目以使用它，并执行以下操作：[RequireJS 如何处理多个页面和部分视图？](https://stackoverflow.com/questions/10815454/how-does-requirejs-work-with-multiple-pages-and-partial-views)

我有一个常见的 main.js，它从我的主 _layout.cshtml 加载。以及使用上述技术的小部件和其他地方的其他部分视图。下面的示例来自我的登录页面：

```
<script type="text/javascript">
    require(["jquery", "kendo", "domReady!"], function ($, kendo) {        

        $("#signInForm").kendoWindow({
            draggable: false,
            width: "500px",
            modal: true,
            title: "Sign In",
            resizable: false
         });        
    }); 
</script> 
```

似乎 Chrome 有时会在 main.js 之前加载和处理内联脚本（其中定义了路径映射和其他配置）。要求“domReady”没有区别。

如何强制此脚本等到 require.js 和 main.js 运行？

一个不太理想的后备方法是将 jQuery 返回到它的全局范围并使用某种自定义事件。你有更好的主意吗？或者是否有一种内置到 RequireJS 中的方法？

**更新：**这是我现在在 _layout.cshtml 中使用的解决方法

```
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    function requireIt(requirements, callback) {
        if ($(document).data("requireReady") === true) {
            require(requirements, callback);
        } else {
            $(document).bind("requireReady", null, function () {
                $(document).data("requireReady", true); 
                require(requirements, callback);
            });
        }
    }
</script> 
<script data-main="/scripts/main" src="@Url.Content("~/Scripts/require.js")" type="text/javascript"></script> 
```

jQuery 恢复为全局夹具，我的部分视图及其内联脚本使用这个 requireIt 包装器。并且 main.js 触发 requireReady。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:37:53.393

在 require.js 网站上找到了这个：

> 理想情况下，您加载的脚本将是通过调用 define() 定义的模块。但是，您可能需要使用一些不通过 define() 表达其依赖关系的传统/遗留“浏览器全局”脚本。对于这些，您可以使用 shim 配置。正确表达它们的依赖关系。

[链接](http://requirejs.org/docs/api.html#config-shim)到 shim 配置文档

如果你不表达依赖关系，你可能会遇到加载错误，因为 RequireJS 异步加载脚本并且速度不正常。

您可以在 require.js[文档](http://requirejs.org/docs/api.html)中阅读更多相关信息，第 1 点：加载 javascript 文件。

今晚我会尝试一下，因为我现在没有时间。但我可以想象它会解​​决我的问题，所以也可能是你的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:47:34.073

继乔纳斯的回答之后，搞砸了几天，我发现从 _Layout.cshtml 执行此操作的唯一方法如下（脚本标记在标题中）。我还在各种教程中看到了正文中的脚本标记，这似乎不起作用。

```
<script type="text/javascript" src="~/js/lib/require.js"></script>
        <script type="text/javascript">
            require.config({
                baseUrl: 'js/lib',
                paths: {
                    jquery: 'jquery-1.8.2',
                    kendo: 'kendo.all-2012.2.913.min',
                    underscore: 'underscore.min',
                    backbone: 'backbone.min',
                    app: '../app'
                },
                shim: {
                    underscore: {
                        exports:'_'
                    },
                    Backbone: {
                        deps: ['jquery', 'underscore'],
                        exports: "Backbone"
                    }
                }
            });            
        </script> 
```

我不明白为什么对 main.js 的引用不起作用（所以我从 _Layout.cshtml 中删除了它）

```
<script data-main="js/main.js" src="~/js/lib/require.js" type="text/javascript"></script> 
```

我还根据 dox 简化了 js 文件夹的布局：

```
website
.....js
.....js/lib
.....js/lib/jquery-1.8.2.js
.....js/lib/underscore.js
.....etc
.....js/app
.....js/app/myscript.js
.....etc 
```

希望这可以帮助

杰里米

# javascript - 使用 javascript 数组添加节点

> ID：11878544
> 
> 赞同：0
> 
> 时间：2012-08-09T07:21:11.853
> 
> 标签：javascript, jquery

我有两个数组`var nodes = new Array("alpha","beta","omega"); var childnodes = new Array("one","two","three");`。我想要的是从节点数组创建三个 div 元素，然后再向每个节点的数组 div 标签添加三个 div 元素，使其看起来像这样。

```
<div class="alpha">
    <div class="one"></div>
    <div class="two"></div>
    <div class="three"></div>
</div>
<div class="beta">
    <div class="one"></div>
    <div class="two"></div>
    <div class="three"></div>
</div>
<div class="omega">
    <div class="one"></div>
    <div class="two"></div>
    <div class="three"></div>
</div> 
```

如何在 jquery 中实现这一点？我当前的代码确实添加了父节点，但它没有将子节点添加到父节点。如何使以下代码工作？

这是我的代码

```
var nodes = new Array("alpha","beta","omega");
var childnodes = new Array("one","two","three");

for (var i = 0; i < nodes.length; i++) {
    var parentNodes = "<div class='" + nodes[i] + "'></div>";
    console.log(parentNodes);
    for (var j = 0; j < childnodes.length; j++) {
        var childNodes  = "<div class='" + childnodes[j] + "'></div>";
        var p = $(parentNodes).attr('class');
        console.log($('.' + p).append(childNodes));
        $('.' + p).append(childNodes);
        console.log(childNodes);
    }
    $('body').append(parentNodes);
} 
```

这是[jsfiddle](http://jsfiddle.net/FYpDm/)代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:28:24.760

```
var nodes = ["alpha","beta","omega"];
var childnodes = ["one","two","three"];

$.each(nodes, function(i, node) {
    var div = $('<div>').addClass(node);
    $.each(childnodes, function(i, node) {
       $('<div>').addClass(node).appendTo(div);
    });
    div.appendTo('body');
})​ 
```

***[这是演示](http://jsfiddle.net/kSTCh/)***。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:33:22.030

迟到但另一个可能的例子：

```
var nodes = new Array("alpha","beta","omega");
var childnodes = new Array("one","two","three");

    for (var i in nodes) {
        var $nodes = $('<div>'+nodes[i]+'</div>');
        for(var k in childnodes){
            var $child = $('<div>'+childnodes[k]+'</div>');
            $child.appendTo($nodes);
        }
        $nodes.appendTo('#container');           
    } 
```

# c# - 如何使用 jquery 更改包含 Parent 标签的图像 src

> ID：11878546
> 
> 赞同：0
> 
> 时间：2012-08-09T07:21:18.150
> 
> 标签：c#, jquery, asp.net, regex

如何使用 jquery 更改包含 Parent 标签的图像 src？

您能告诉我如何使用 c# 检索相同的内容吗？

C#代码：

```
 string s;

    s= "<span id=\"span1\"><table><tr><td><img src=\"/image/img01.jpg\"></td></tr>";
    I have formatted above code to string and assigned to one label 

    label1.text=s.tostring(); 
```

现在我想使用 jquery 更改 img src。

我是 jquery 的新手，请任何人帮我解决这个问题。* 注意：我不想为 img 标签使用 id 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:24:35.863

前提是您在跨度内只有一个图像（如您的示例）：

```
$('#span1 img').attr('src','img02.jpg'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:27:26.263

```
$('#span1 img').attr('src', '/path/to/new/img.jpg'); 
```

那应该对你有用。

编辑 - 被击败了 2 分钟！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:28:19.300

有两个简单的选项，首先使用“andy”给出的代码

```
$('#span1 img').attr('src','img02.jpg'); 
```

或者

```
<img src=\"/image/img01.jpg\" id="exampleimg">

$('#exampleimg').attr('src','img02.jpg'); 
```

# windows-phone-7 - 边缘动画？

> ID：11878548
> 
> 赞同：0
> 
> 时间：2012-08-09T07:21:28.477
> 
> 标签：windows-phone-7

如果我想创建一个改变控制边距的动画，并且我需要编写 C# 代码而不是使用混合，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:53:13.737

为什么要更改边距？你关注什么样的动画？但是，您可以使用`DoubleAnimation`和`StoryBoard`来创建您的动画。请参考下面的链接开始。

`http://windowsphonegeek.com/articles/WP7-Animations-in-depthndash-Overview-and-Getting-Started`

# c# - 将 Excel 读取到数据表，而不会丢失货币类型的精度

> ID：11878553
> 
> 赞同：2
> 
> 时间：2012-08-09T07:21:32.390
> 
> 标签：c#, asp.net, .net, vb.net

我正在尝试将 Excel 工作表数据读取到数据表以绑定到 GridView。我的 Excel 表包含如下数据，

```
ID    Value1                    Value2
-------------------------------------------------
1     $312976.97530297          $30790.0614862584
etc 
```

我正在使用以下代码将值读取到数据表中。

```
DataTable table = new DataTable();
string filePath = @"D:\Book1.xlsx";
string strConn = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 12.0 Xml;HDR=YES;IMEX=1;TypeGuessRows=0;ImportMixedTypes=Text\"", filePath);
using (OleDbConnection dbConnection = new OleDbConnection(strConn)) 
{
using (OleDbDataAdapter dbAdapter = new OleDbDataAdapter("SELECT ID, value1,value2  FROM [Sheet1$]", dbConnection))
dbAdapter.Fill(table);
} 
```

问题：由于 value1 和 value2 包含 $ 符号，dataAdaptor 检索两个值都没有完全精度，即。而不是 312976.97530297，它只返回 312976.9753。

```
Note: 
1\. I cannot change the input Excel sheet since the enduser will upload it to the web site.
2\. If i remove the $ symbol in the excel sheet, it will return the full precision, but $ also present in the input sheet.
3\. I tried using Microsoft.Office.Interop.Excel and its working, but the performance is very low.

Or I can format all the excel cell as Text/General type before filling to the datatable, Anyone knows how to do that? 
```

请建议一种使用 OleDbDataAdapter 的方法。

在此先感谢，威尔逊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:02:06.327

也许你应该试试[http://epplus.codeplex.com/releases/view/79802](http://epplus.codeplex.com/releases/view/79802)。它可以非常快速地读取数据，至少与互操作相比。此外，互操作对于 Web 服务来说不够可靠。

对于您的问题：也许有一种方法可以逃避“$”

Microsoft 建议在货币的情况下使用 double 或 float 数据类型。你使用什么格式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:14:00.607

@All，
最后我以一种复杂的方式完成了它:)，
1.在使用互操作上传后将所有 excel 列格式化为通用类型
2.使用 oledbadaptor 将 excel 读取到数据表中。（现在我得到了完整的精度tatatable，因为单元格类型是通用的）
3\. 现在我将数据表行类型转换为字符串，因为我需要使用 UDT 将数据表值插入 SQL 表（不转换我们也会在这里丢失精度）

无论如何，它现在工作正常（总是欢迎另一种方法:)）威尔兹......

# python - 是否存在可以帮助程序员避免 Python NameError 的工具？

> ID：11878554
> 
> 赞同：1
> 
> 时间：2012-08-09T07:21:31.777
> 
> 标签：python, nameerror

我不是以英语为母语的人。当我使用 Python 编码时，我经常会犯拼写错误并出现`'NameError'`异常。单元测试可以解决一些问题，但不是全部。因为很难构建涵盖所有逻辑的测试用例。所以我认为检测此类错误的工具会对我有很大帮助，但我搜索了谷歌并找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:26:05.240

我相信通过静态分析器（例如[pylint](http://www.logilab.org/857/)）测试您的代码会有很大帮助。

另一个提示：您可以使用具有智能自动完成功能的精美 IDE，这将减少此类错误的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:00:06.387

我更喜欢`eclipse`集成`pydev`开发`python`项目。

它将解决您的目的，并在您运行程序之前向您显示 RED 中的错误。但它要求您的项目在 Eclipse 下正确配置，如下所示：

*   PyDev与eclipse集成后配置Python解释器
*   创建/导入您的项目并设置为 python pydev 项目
*   配置您的源文件夹（在整个项目树下向 Eclipse 提供哪些文件夹包含 python 源代码的信息）

您现在已经完成并设置了常规 python 编程设置。

此外，您还可以将您的 Eclipse/Pydev 项目与`pylint`如前所述的那样`BasicWolf`在您编码时随时检查您的代码质量和错误。

参考：

[在 Eclise](http://pydev.org/manual_101_install.html)
[Eclipse 下安装 PyDev PyDev 集成](http://code.google.com/p/soc/wiki/SetUpPylint)
[疑难解答 PyDev/PyLint 集成](https://stackoverflow.com/questions/2538244/im-having-trouble-setting-up-pylint-with-pydev)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:27:20.220

pylint 可以在这里提供帮助。它将这些位置报告为

```
E: 2,6: Undefined variable "foo" 
```

例如。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T07:30:17.767

您可以获得一个有助于自动完成名称的 IDE，但并非在所有情况下都如此。PyDev 就是这样一种具有自动完成功能的 IDE；PyCharm 是另一个（不是免费的）。

从长远来看，使用自动完成功能可能是您解决问题的最佳选择。即使您找到了一个试图纠正此类拼写错误的工具，它也不能解决最初的问题，并且可能只会导致新的问题。

# java - 使用跨域更改 src iframe

> ID：11878559
> 
> 赞同：2
> 
> 时间：2012-08-09T07:21:41.617
> 
> 标签：java, javascript, gwt

我正在尝试使用 GWT 制作一个将在一个 iframe 中运行的应用程序。直到这里一切正常，问题是我在我的实际网络中有一个表单，它将请求发送到 iframe。当我按下“发送表单”按钮时，使用 java 脚本更改 iframe 的 src 并稍后刷新它：

```
document.getElementById('iframeSpecialOffers').src = container.url;

document.getElementById('iframeSpecialOffers').contentWindow.location.reload(); 
```

网络在 www.example.com:81 中运行，我的 iframe 的新 src 在 www.example.com:8082 中运行，我收到此错误

```
 Unsafe JavaScript attempt to access frame with URL http://example:8082/Home.html#!TilePage;searchQuery=*;searchMode=1;amount=1;
position='47.3686498,8.539182500000038';leftBottomPosition='47.32023,8.448059899999976';
    rightTopPosition='47.43468,8.625370100000055';availabilityEndDate=datetime'2012-08-012T18:00:00';$culture=en
     from frame with URL http://example:81/. Domains, protocols and ports must match. 
```

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:41:24.143

为了保护人们免受 XSS 攻击（跨站点脚本），浏览器不允许您访问 iFrame 或窗口中不来自同一域的任何内容。

但是，您可以设置某种标题，告诉浏览器允许跨域内容。

[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

我不确定那是你应该走的路线，但最好避免这种事情。

如果您的目标是严格刷新页面，您可以通过再次设置 src 来做到这一点，我相信只需执行以下操作即可刷新：

`document.getElementById('iframeSpecialOffers').src = document.getElementById('iframeSpecialOffers').src;`

但如果这不起作用，您可以附加一个无用的 queryString 参数以使其不同。

# java - 如何使此代码更加并发？

> ID：11878563
> 
> 赞同：1
> 
> 时间：2012-08-09T07:21:52.803
> 
> 标签：java, multithreading, concurrency, threadpool, java.util.concurrent

我有一段类似于以下的代码：

```
final int THREADS = 11;  
BlockingQueue<Future<Long>> futureQueue = new ArrayBlockingQueue<Future<Long>>(THREADS);  
for (int i = 0; i < end; i++, count++) {  
    futureQueue.put(executor.submit(MyRunnable));  
}   
//Use queued results 
```

我如何重构它以使其**更加并发**？我在这里监督有什么微妙之处吗？

**更新：**
每个 Runnable 都应该向服务器发送大量 HTTP 请求以进行压力测试。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:25:10.027

我会用

```
static final int THREADS = Runnable.getRuntime().availableProcesses();  

ExecutorService service = Executors.newFixedThreadPool(THREADS);

List<Future<Long>> futureQueue = new ArrayList<Future<Long>>(end);  
for (int i = 0; i < end; i++)
    futureQueue.add(executor.submit(new MyRunnable())); 
```

您正在使用有界队列，如果`end > THREADS`它会停止。

> 每个 Runnable 都应该向服务器发送大量 HTTP 请求以进行压力测试。我在正确的轨道上吗？

在这种情况下，我会使用以下代码，因为您的代码是 IO 而不是 CPU 绑定。

```
ExecutorService service = Executors.newCachedThreadPool(); 
```

如果你有超过 1000 个线程，你可能会从使用 NIO 中受益，但这只会让你的负载测试器更有效率，但它会使代码更加复杂。（如果你觉得这很难，那么编写高效且正确的 Selector 代码就*更难了*）

在多台机器上运行测试仪会产生更大的差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T07:33:19.890

在您的情况下，使用线程效果不佳。当你有一个 CPU 密集型工作时，线程池工作得很好。在您的情况下，您有一个 IO 密集型工作 - 它不受您拥有的 CPU 数量的限制，而是受您可以发送的网络数据包数量的限制。

在这种情况下，NIO 中的类是你的朋友。创建数百个连接并使用[NIO 选择器](http://tutorials.jenkov.com/java-nio/selectors.html)查看哪个已准备好接收更多数据。

使用这种方法，您根本不需要线程；一个 CPU 内核足以填充 GBit 以太网连接 (~100MB/s)。

**[编辑]**当然，您可以创建数百个线程来尝试填充 IO 通道。但这有一些缺点：

1.  线程由操作系统（或小型帮助程序库）管理。它们需要内存，每次切换线程时，CPU 都必须保存其状态并刷新其缓存。
2.  如果一个线程只做少量的工作，线程切换可能比做工作更昂贵。
3.  当您使用线程时，您会遇到所有常见的线程同步问题。
4.  没有简单的方法可以确保您拥有正确数量的线程。如果线程太少，IO 通道将无法得到最佳使用。如果线程太多，通道将不会被最佳使用，因为线程会争夺访问权限。在这两种情况下，您都不能在开始测试后更改它。系统无法适应需求。

对于这样的任务，像[Akka](http://akka.io/)这样的框架更适合，因为它避免了所有这些问题，并且比线程更易于使用。

# java - 将数组分解为子数组

> ID：11878569
> 
> 赞同：3
> 
> 时间：2012-08-09T07:22:02.740
> 
> 标签：java, arrays

我有一个数组，例如：

```
{ "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12" } 
```

我想把它分解成子数组。当我测试它时，它显示错误：

```
java.lang.ArrayStoreException at line: String[] strarray = splitted.toArray(new String[0]); 
```

代码：

```
public static String[] splittedArray(String[] srcArray) {
        List<String[]> splitted = new ArrayList<String[]>();
        int lengthToSplit = 3;
        int arrayLength = srcArray.length;

        for (int i = 0; i < arrayLength; i = i + lengthToSplit) {
            String[] destArray = new String[lengthToSplit];
            if (arrayLength < i + lengthToSplit) {
                lengthToSplit = arrayLength - i;
            }
            System.arraycopy(srcArray, i, destArray, 0, lengthToSplit);
            splitted.add(destArray);
        }
        String[] strarray = splitted.toArray(new String[0]);
        return strarray;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:29:22.203

改变

```
String[] strarray = splitted.toArray(new String[0]); 
```

到

```
String[][] split = new String[splitted.size()][lengthToSplit];
for (int index = 0; index < splitted.size(); index++) {
    split[index] = splitted.get(index);
} 
```

您需要将返回类型更改为`String[][]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T07:32:01.583

从`java.lang.ArrayStoreException` [文档](http://docs.oracle.com/javase/7/docs/api/java/lang/ArrayStoreException.html)中：

```
Thrown to indicate that an attempt has been made to store the wrong type of object into an array of objects. 
```

您正在尝试将 String[][] 存储到 String[] 中。修复只是在返回类型和传递给`toArray`方法的类型。

```
String[][] strarray = splitted.toArray(new String[0][0]); 
```

# c# - 比较 openxml 文件

> ID：11878570
> 
> 赞同：1
> 
> 时间：2012-08-09T07:22:08.960
> 
> 标签：c#, web, compare, openxml

我正在开发一个工具来管理一些带有版本控制的文档。我有一个 Windows 客户端，他正在比较 2 个文档（以前版本与当前版本）以查看两个文档之间的差异。这工作正常（我正在使用微软的互操作 dll）。

我也有一个网络客户端，我想做同样的事情，但我不想在服务器上安装办公室。在我的 Web 客户端中，我只允许使用 openxml 文件（docx、xlsx），因为我可以在没有安装 Office 的情况下读取和更新文档中的版本日期。是否有一些工具可以让我比较 2 个 openxml 文件并在新文档中显示差异？（我已经对其进行了搜索，并且有一些工具 openxmldiff，但我得到的结果是一些 xml 文件，不知道如何将它们组合到一个新文档中。有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:43:54.217

您可能想看看 OpenXml Powertools： [http ://powertools.codeplex.com/](http://powertools.codeplex.com/)

它有一个 DocumentComparer 类。至少这可能是一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:37:20.673

[Open XML SDK 2.0 Productivity 工具](http://www.microsoft.com/en-us/download/details.aspx?id=5124)有一个比较文件选项，它将比较两个打开的 xml 文件并显示差异。

# objective-c - 如何将集合视图项设置为委托？

> ID：11878571
> 
> 赞同：1
> 
> 时间：2012-08-09T07:22:08.420
> 
> 标签：objective-c, macos, cocoa

我有一个歌曲播放应用程序。歌曲被加载到 NSCollectionView 中。有两个控制器：

*   窗口控制器
*   SongViewController（CollectionViewItem 视图的控制器）

窗口和每个单独的歌曲视图都有一个播放按钮。因此，当我从窗口按下播放时，歌曲视图的播放按钮需要更新以显示暂停/播放状态，反之亦然。

当我在 SongView 中按播放时，没问题，我可以设置`_delegate = [[NSApp mainWindow] windowController]`

但这是我的问题：反过来呢？如何将 SongViewController 设置为 WindowController 的委托。大约有 20 个 CollectionViewItem，因此有 20 个 SongViewController。我如何找到并设置正确的。

另外，我对Objective-C还是很陌生，如果我以一种奇怪的方式处理这个问题，请告诉我。

:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:00:14.493

NSCollectionView 有一种方法`(NSCollectionViewItem *)itemAtIndex:(NSUInteger)index`可以在特定索引处访问 NSCollectionViewItem。NSCollectionViewItem 继承自 NSViewController，因此您可以访问它控制的视图来设置委托。

虽然这是技术答案，但我已经使用通知中心和绑定解决了这个问题，我发现它更简单、更有效。

# jquery - jQuery验证输入类型号

> ID：11878572
> 
> 赞同：1
> 
> 时间：2012-08-09T07:22:09.197
> 
> 标签：jquery, input, numbers

我正在尝试使用 jQuery 设置函数 onFocusOut 事件，例如：

```
$(':number').keypress(function (evt){
    //validating cone
} 
```

但它无法选择引发错误的数字类型

> 错误：语法错误，无法识别的表达式：数字

文本类型的相同代码工作正常。

jQuery 不知道数字数据类型吗？如何让它发挥作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T07:23:59.227

您是否尝试使用as选择`<input>`元素？尝试这个：`number``type`

```
$('input[type="number"]').keypress(function (evt){

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:10:53.280

作为记录，您可以扩展 jQuery 以添加自定义`:number`选择器。

```
$.expr[':']​​​​.number = function(elem){
  return $(elem).is("input[type='number']");
}​; 
```

或纯javascript。

```
$.expr[':']​​​​.number = function(elem){
  return (elem.tagName === "INPUT") &&
         elem.getAttribute("type") &&
         (elem.getAttribute("type").toUpperCase() === "NUMBER");
}​; 
```

# linux - Linux 中的 I/O 性能

> ID：11878573
> 
> 赞同：4
> 
> 时间：2012-08-09T07:22:11.727
> 
> 标签：linux, file, io

文件 A 在一个有 10000 个文件的目录中，文件 B 在一个有 10 个文件的目录中，读/写文件 A 会比文件 B 慢吗？它会受到不同的日志文件系统的影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T07:25:16.963

不。

浏览目录和*打开*文件会更慢（在实践中是否明显取决于文件系统）。文件上的输入/输出完全相同。

**编辑：**
为了澄清，目录中的“文件”并不是*真正*的文件，而是一个*链接*（“硬链接”，与符号链接相反），它只是一种带有一些元数据的名称，但与什么无关你会考虑“文件”。`unlink`这也是为什么通过系统调用而不是通过假设调用来删除文件的历史原因`deletefile`。`unlink`删除链接，如果那是最后一个链接（但只有那时！），文件。

一个文件在不同的目录中有一百个链接是完全合法的，打开一个文件然后将其移动到不同的位置甚至取消链接（当它保持打开时！）也是完全合法的。它不会影响您以任何方式读取/写入文件描述符的能力，即使文件（据您所知）甚至不再存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:24:39.753

通常，一旦打开了一个文件并且您有了它的句柄，无论同一目录中有多少其他文件，访问该文件的性能都是相同的。您*可能*能够检测到打开文件所需时间的微小差异，因为操作系统必须在目录中搜索文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:31:05.380

日志旨在减少文件系统崩溃的恢复时间，恕我直言，它不会影响文件的读/写速度。[日记分机2](http://e2fsprogs.sourceforge.net/journal-design.pdf)

# eclipse - 在 Eclipse 中调试 Errai 应用程序时出错

> ID：11878574
> 
> 赞同：0
> 
> 时间：2012-08-09T07:22:16.097
> 
> 标签：eclipse, errai

当我尝试在 Eclipse 中调试 Errai 应用程序时，我收到以下错误：

```
 [WARN] Failed startup of context org.jboss.errai.cdi.server.gwt.JettyLauncher$WebAppContextWithReload@a9acff{/,/home/matthew/git/PressGangCCMSUI/src/main/webapp}
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:00:59.040

具体原因我不知道，但是在清理项目的时候，在Eclipse中无法以debug模式运行。为了解决这个问题，我运行项目

```
mvn gwt:run 
```

一旦启动器启动，我就可以再次在 Eclipse 中调试项目。

# magento - Magento 中订单的折扣信息

> ID：11878579
> 
> 赞同：0
> 
> 时间：2012-08-09T07:23:26.160
> 
> 标签：magento, discount, orders

我需要哪些促销/优惠券按顺序更改了哪些商品以及该商品在折扣前的价格和该商品的最终价格是多少。我知道，这很复杂，所以这里有一个例子：

```
<order>
<items>
<item> <!-- This item have discount in order -->
<sku>1234</sku>
<promotion>
<promo_id>456</promo_id>
<discount_value>10</discount_value><!-- In % or $ -->
</promotion>
<final_price>25</final_price>
</item>
<item><!-- This item don't have discount in order -->
<sku>1234</sku>
<promotion/>
<final_price>35</final_price>
</item>
</items>
</order> 
```

我希望这是可以理解的解释。感谢所有帮助。

编辑：我忘记了一件事。我只有来自销售/订单模型的信息。这是一个接口，所以我无法访问会话数据，我从数据库中获得经过验证的订单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T09:13:47.493

您可以轻松地从订单项目模型中检索应用的购物车规则 ID。

1.  您需要遍历订单项目以收集所有应用的规则 ID 到项目：

    ```
    $collectedRuleIds = array();
    $itemRules = array();
    foreach ($order->getAllVisibleItems() as $orderItem) {
        if ($orderItem->getAppliedRuleIds()) {
            $itemRules[$orderItem->getId()] = explode(',', $orderItem->getAppliedRuleIds());
            $collectedRuleIds = array_merge($collectedRuleIds, $itemRules[$orderItem->getId()]);
        }
    } 
    ```

2.  然后加载规则集合，检索规则信息并将其分配给订单项。

    ```
    $rules = false;
    if ($collectedRuleIds) {
        $rules = Mage::getModel('salesrule/rule')->getCollection()->addFieldToFilter('rule_id', array('in' => $collectedRuleIds));
    }

    if ($rules) {
        foreach ($itemRules as $itemId => $ruleIds) {
            $orderItem = $order->getItemById($itemId);
            $appliedRules = array();
            foreach ($ruleIds as $ruleId) {
                if ($rules->getItemById($ruleId)) {
                    $appliedRules[] = $rules->getItemById($ruleId);
                }
            }
            $orderItem->setAppliedRules($appliedRules);
        }
    } 
    ```

3.  在导出数据期间，只需检查订单项的 getAppliedRules 属性即可获取有关促销类型的信息，以构建正确的导出文件。

# drupal-6 - 在drupal中仅显示lightbox2中页面的内容

> ID：11878587
> 
> 赞同：1
> 
> 时间：2012-08-09T07:24:36.057
> 
> 标签：drupal-6, lightbox2

我正在使用 drupal。我必须在 lightbox2 中显示页面的内容。（只有内容不是页眉、页脚、菜单栏、侧边栏等）。该内容节点的 url 是[http://mysite.com/node/1](http://mysite.com/node/1) . 我已经包含了 lightbox2 模块并使用了下面的代码

```
<li><a href="node/1/lightbox2" rel="lightframe[group|width:400px;][caption]">click here to see node content</a></li> 
```

但灯箱不仅显示内容，还显示整个页面。我只需要文本内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:44:28.453

另一种选择是您可以在内容的 get 方法中传递参数`lightbox2`。

根据参数添加条件`page.tpl.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T17:02:48.797

我同意 Vaibhav Jain 的观点，您可以为页面创建一个没有页眉、左右、页脚的主题。只有内容并在灯箱内调用该页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:21:49.420

不是最好的解决方案，但可以实现。

为 node/1 创建一个新的 page.tpl 并在其中仅打印 $content。这样，您将确保您只获得内容而没有其他内容

# ruby-on-rails - 使用 Capistrano 从本地计算机部署到 VPS

> ID：11878590
> 
> 赞同：1
> 
> 时间：2012-08-09T07:24:40.587
> 
> 标签：ruby-on-rails, repository, capistrano, vps, rvm-capistrano

我正在尝试通过 Capistrano 将 Rails 应用程序从本地计算机部署到 VPS。我已经通过将 Capistrano 包含在 Gemfile 中并运行“捆绑包”来安装它。然后我跑了'capify'。并将ff添加到Capfile。

```
$:.unshift(File.expand_path('./lib', ENV['rvm_path']))
require "rvm/capistrano"
set :rvm_ruby_string, 'ruby-1.9.2-p136@foobar' 
```

现在，我被 deploy.rb 卡住了，我不确定我应该在文件中输入什么值。如果我不在 Github 或其他在线存储库中托管我的代码，我应该在 set :repository 选项中放置什么？究竟设置了什么：域？我应该在这里使用我的 VPS 机器的 IP 地址吗？顺便说一句，我正在学习[http://infinite-sushi.com/2011/01/deploying-a-rails-app-to-a-linode-box/](http://infinite-sushi.com/2011/01/deploying-a-rails-app-to-a-linode-box/)的教程，这里是示例 deploy.rb。

```
set :user, 'deploy'
set :domain, 'foo.bar.us'
set :application, "my_web_app"

set :repository, "git@github.com:foo/repo.git"  # Your clone URL
set :scm, "git"
set :branch, "master"
set :scm_verbose, true
set :deploy_via, :remote_cache
set :scm_passphrase, "password"  # The deploy user's password
set :deploy_to, "/home/#{user}/#{domain}"
set :use_sudo, false

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

role :web, domain                         # Your HTTP server, Apache/etc
role :app, domain                          # This may be the same as your `Web` server
role :db,  domain, :primary => true # This is where Rails migrations will run

namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:53:43.307

```
set :scm, :none
set :deploy_via, :rsync_with_remote_cache 
```

你也可以试试`:deploy_via, :copy`。至于`:domain`选项，您遵循的示例将其用于命名和访问服务器。我建议现在只用服务器硬编码 IP 地址。我知道它不是 DRY，但如果你的集群规模扩大，你会想要改变这些值（或者现在只是将 ip 设置为一个变量——这并不重要）：

```
set :deploy_to, "/home/#{user}/#{application}"
role :web, "1.2.3.4"
role :app, ["1.2.3.5", "1.2.3.6"] 
```

# android - Android：编辑器不包含主要类型

> ID：11878595
> 
> 赞同：2
> 
> 时间：2012-08-09T07:25:04.917
> 
> 标签：android, eclipse

我目前正在使用 Mac OSx 上的 Eclipse 开发 Android 应用程序。我尝试将 Gorilla-Logic monkey talk SDK 集成到我的应用程序中进行测试，因为我这样做了，所以应用程序不想正确调试。每次我单击“运行”或“调试”按钮时，IDE 都会声称我没有主类型。

从我在网络上的各种 Internet 讨论和 SO 上读到的内容，我看到这通常是在用 Scala 编写并且在包之外有代码时引起的，但是由于我运行的不是 Scala 而是一个 Android 项目，所以我不'在包之外没有任何java代码。

那为什么这会发生在我身上？！

将项目导出为 .apk 文件没有问题，但需要很长时间，而且我不想每次运行项目时都重复这一点。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:44:49.117

这个问题主要是由于我在同一个 Eclipse 工作区中运行 android 项目和简单的 java 项目引起的（这应该可以完成，但我认为发生了一些未知的故障，这就是导致我这个问题的原因）。

我最终修复它的方法是进入首选项 - >运行/调试，然后“启动”。在“启动操作”下，我选中了“始终启动以前启动的应用程序”。从那以后，我只需要单击一次绿色播放按钮旁边的下拉箭头，之后每次运行我的项目时，我都可以点击绿色播放按钮。

此外，您可能知道，运行应用程序的默认按键是 Ctrl+F11，如果您厌倦了按那个绿色按钮（至少在 Windows 中是这种情况，在其他操作系统上可能会有所不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:53:49.270

最终删除了运行配置并重新启动了应用程序。

像魅力一样工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T10:13:06.147

对我来说同样的问题。我可以通过单击 Eclipse 中运行按钮旁边的向下箭头并添加运行配置来修复它。但是每次我运行我的应用程序时，我都需要单击向下箭头和配置，而不仅仅是单击运行按钮。这是一个额外的步骤。我也在 OS X 上。这在我的电脑上运行良好。

我认为这是一种可接受的解决方法，但不是修复方法。

# android - Android Spinner 上的多个 AsyncTasks 问题

> ID：11878599
> 
> 赞同：4
> 
> 时间：2012-08-09T07:25:43.683
> 
> 标签：android, multithreading, android-asynctask, android-spinner, android-handler

我遇到了一些错误。我知道问题出在哪里，但我不知道如何解决。

我有 4 个微调器。每个微调器都关联一个异步任务。简而言之，当我在 spinner1 上选择一个项目时，执行填充 spinner2 的第二个 asynctask（所选项目作为参数添加到第二个 asynctask）以这种方式继续。

但是在第一个异步任务结束之前，spinner2 无法填充。在这种情况下，我遇到了错误。如何解决？如何让第一个任务完成，第二个任务工作？

这是代码；

第一项任务

```
public class ilceDoldur extends AsyncTask<String[],String[],String[]>{

        @Override
        protected String[] doInBackground(String[]... params) {
            SoapObject request = new SoapObject(NAMESPACE, "ILCEGetir");
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;     
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.debug = true;

           try {

           androidHttpTransport.call("http://tempuri.org/ILCEGetir", envelope);
           SoapObject response = (SoapObject) envelope.getResponse();
           ilceList = new String[response.getPropertyCount()];

          for(int i=0;i<response.getPropertyCount();i++){          
                   ilceList[i] = response.getPropertyAsString(i).toString().trim();    
          }      
    } 
            catch (Exception e) {           
                e.printStackTrace();
           }    
            return ilceList;
        }

        protected void onPostExecute(String[] ilceList){
            ilceSpinner = (Spinner) findViewById(R.id.spinner1);
            ArrayAdapter<String> ilce_adapter = new ArrayAdapter<String>(NormalAnasayfa.this,android.R.layout.simple_spinner_item, ilceList);
            ilce_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ilceSpinner.setAdapter(ilce_adapter);
            kontrol=true;
        }
    } 
```

第二个任务

```
public class semtDoldur extends AsyncTask<String,String[],String[]>{

        @Override
        protected String[] doInBackground(String... ParamIlce) {
            PropertyInfo ilce = new PropertyInfo();
            ilce.name= "ilce";
            ilce.setValue(ParamIlce);
            ilce.type = PropertyInfo.STRING_CLASS;

            SoapObject request = new SoapObject(NAMESPACE, "SEMTGetir");
            request.addProperty(ilce);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.bodyOut=request;
            envelope.dotNet = true; 
            envelope.setOutputSoapObject(request);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.debug = true;

           try {

           androidHttpTransport.call("http://tempuri.org/SEMTGetir", envelope);
           SoapObject response = (SoapObject) envelope.getResponse();
           semtList = new String[response.getPropertyCount()];

          for(int i=0;i<response.getPropertyCount();i++){          
                   semtList[i] = response.getPropertyAsString(i).toString().trim();    
          }      
    } 
            catch (Exception e) {           
                e.printStackTrace();
           }
            return semtList;
        }

        protected void onPostExecute(String[] semtList){
            semtSpinner = (Spinner) findViewById(R.id.spinner2);
            ArrayAdapter<String> semt_adapter = new ArrayAdapter<String>(NormalAnasayfa.this, android.R.layout.simple_spinner_item, semtList);
            semt_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            semtSpinner.setAdapter(semt_adapter);
            kontrol=true;
        }
    } 
```

onCreate()

```
new ilceDoldur().execute();

        if(kontrol==true){
            kontrol=false;
            ilceSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

                public void onItemSelected(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    secilenIlce = ilceSpinner.getSelectedItem().toString().trim();
                    new semtDoldur().execute(secilenIlce);
                }
                public void onNothingSelected(AdapterView<?> arg0) {}
            });
        } 
```

**编辑：我从我的网络服务获取数据并填充 spinner1。我将在哪里获得数据（spinner1 所选项目）？我在哪里填充 spinner2 执行第二个任务？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T10:31:03.070

只需更改 onPostExecute

```
 protected void onPostExecute(String[] ilceList){
        ilceSpinner = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<String> ilce_adapter = new ArrayAdapter<String>(NormalAnasayfa.this,android.R.layout.simple_spinner_item, ilceList);
        ilce_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        ilceSpinner.setAdapter(ilce_adapter);
        ilceSecildi();
        }    
    } 
```

至

```
 protected void onPostExecute(String[] ilceList){
        ilceSpinner = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<String> ilce_adapter = new ArrayAdapter<String>(getApplicationContext(),android.R.layout.simple_spinner_item, ilceList);
        ilce_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        ilceSpinner.setAdapter(ilce_adapter);
        ilceSecildi();
        }    
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:56:39.687

我找到解决方案！

从网络服务获取数据：

```
private void ilceDoldur(){
        SoapObject request = new SoapObject(NAMESPACE, "ILCEGetir");
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;     
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

       try {

       androidHttpTransport.call("http://tempuri.org/ILCEGetir", envelope);
       SoapObject response = (SoapObject) envelope.getResponse();
       ilceList = new String[response.getPropertyCount()];

      for(int i=0;i<response.getPropertyCount();i++){          
               ilceList[i] = response.getPropertyAsString(i).toString().trim();    
      }      
} 
        catch (Exception e) {           
            e.printStackTrace();
       }    
    } 
```

我的异步任务：

```
public class ilceDoldur extends AsyncTask<String,String[],String[]>{

        @Override
        protected String[] doInBackground(String... params) {
            ilceDoldur();
            return ilceList;
        }

        protected void onPostExecute(String[] ilceList){
            ilceSpinner = (Spinner) findViewById(R.id.spinner1);
            ArrayAdapter<String> ilce_adapter = new ArrayAdapter<String>(NormalAnasayfa.this,android.R.layout.simple_spinner_item, ilceList);
            ilce_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ilceSpinner.setAdapter(ilce_adapter);
            ilceSecildi();
            }    
        } 
```

获取 spinner1 选定的项目并启动第二个异步任务：

```
public String ilceSecildi(){
        ilceSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                secilenIlce = ilceSpinner.getSelectedItem().toString().trim();
                new semtDoldurAsync(secilenIlce).execute();
            }
            public void onNothingSelected(AdapterView<?> arg0) {}
        });
        return secilenIlce;
    } 
```

在 onCreate 中执行第一个任务：

```
new ilceDoldur().execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T21:42:23.660

根据我对问题的理解，您说您有多个 AsyncTasks 来控制多个 Spinner 的内容。您执行了一些导致 Spinner1 被填充的交互，并立即执行另一个应该导致 Spinner2 被填充的交互，但观察到的行为是 Spinner2 在 Spinner1 完成填充之前不会填充。

这是因为 AsyncTasks 的默认行为是让它们在一个进程中串行执行。如果您希望 AsyncTasks 并行运行，请使用 AsyncTask.executeOnExecutor() 并指定线程池执行程序。不过，请仔细阅读 AsyncTask 的文档，默认的并行行为已经随着时间而改变。

# android - 从主要活动到次要活动的操作栏

> ID：11878604
> 
> 赞同：0
> 
> 时间：2012-08-09T07:26:14.370
> 
> 标签：android, android-layout

我的操作栏有问题。我在主要活动中有一个在 onCreateOptionsMenu（菜单菜单）中创建的操作栏。我也在此方法中添加的项目。现在，当我在第二个活动中单击我的项目时，我想要的是相同的操作栏。我希望当我将此方法中的代码复制并粘贴到第二个活动中的方法时它可以工作，但我不想复制此代码，因为我添加了很多项目。这可以在第二个活动中使用第一个活动的操作栏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:41:33.880

是的，有可能。我有三种可能的解决方案：

1.  通过 xml [http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems添加操作项](http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems)
2.  您的第二个活动可以扩展您的 MainActivity（或者更好的是，为两者创建一个抽象的基本活动，它只创建菜单）。
3.  在帮助类中提取菜单创建并从每个活动中调用相同的方法。

这三种方式都是可能的，但我更喜欢第一种。

# ruby-on-rails - 在 CentOS 上安装 ROR

> ID：11878605
> 
> 赞同：1
> 
> 时间：2012-08-09T07:26:20.477
> 
> 标签：ruby-on-rails, installation, centos

我是 ruby​​ on rails 的新手。我尝试使用以下命令安装 ruby​​、rails 和 rvm：

```
curl -L get.rvm.io | bash -s stable --rails 
```

它工作得很好，但是现在我正在尝试检查它说的 ruby​​ & rails ( `ruby -v`, ) 的版本。`rails -v``command not found`

这就是它所显示的（我只粘贴了最后几行......）：

```
Installing RDoc documentation for json-1.7.4...
Installing RDoc documentation for rdoc-3.12...
Installing RDoc documentation for railties-3.2.7...
Installing RDoc documentation for rails-3.2.7...

 * To start using RVM you need to run `source /home/betteruse/.rvm/scripts/rvm`
    in all your open shell windows, in rare cases you need to reopen all shell windows.

  * To start using rails you need to run `rails new <project_dir>`.

[betteruse@BL-58 ~]$ ruby -v
bash: ruby: command not found
[betteruse@BL-58 ~]$ rails -v
bash: rails: command not found 
```

谁能帮忙？？？谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:58:51.193

尝试 rvm 重新加载

如果仍然无法正常工作，则将以下行插入到您的 .bashrc 或 .bash_profile 文件中

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

还要确保你已经`curl -L get.rvm.io | bash -s stable --rails`从主目录运行

# android - 是否可以从移动应用程序中实时抓取？

> ID：11878609
> 
> 赞同：2
> 
> 时间：2012-08-09T07:26:55.447
> 
> 标签：android, iphone, mobile, screen-scraping, web-scraping

我希望能够从基于我的位置实时生成结果的移动应用程序中抓取数据。例如，我希望能够实时提取离我最近的出租车在哪里的数据，并将其显示为不同移动应用程序的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:36:47.227

据我所知，如果该应用程序没有实现它，则不可能从另一个应用程序获取内容......如果您的设备已植根并且您的应用程序具有 root 访问权限，那么可能会有一种方法来实现这一点......

大多数为用户提供信息的应用程序也有一个（移动）网站，因此抓取这些信息比抓取其他应用程序更容易......

编辑：大多数应用程序将其信息存储在数据库或其他方式中，您始终可以尝试访问此数据（根）并在您的应用程序中解释它或嗅探，以便您可以查看应用程序连接到的网络服务并在您的应用程序中使用此网络服务...

重要提示：确保您已获得提供数据的人的许可，以便在您自己的应用程序中使用它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T03:56:24.533

您可以对应用程序发出的网络调用进行反向工程，以便您自己直接调用它们。假设这是针对 Android 应用程序：

1.  安装 Chrome 扩展[ARC Welder](https://chrome.google.com/webstore/detail/arc-welder/emfinbmielocnlhgmfkkmkngdoccbadn)，以便您可以在计算机上运行 Android 应用程序
2.  下载应用程序的 APK 并将其加载到 ARC Welder
3.  与应用程序交互并使用诸如 Wireshark 或 Fiddler 之类的工具来监控应用程序如何从其后端服务器加载您所追求的数据
4.  然后复制此网络调用以直接在您自己的解决方案中抓取数据

有关更多详细信息，请参阅[此博客文章](http://webscraping.com/blog/How-to-scrape-Android-Apps/)，但您是否可以在自己的应用程序中合法地重用数据将取决于他们的服务条款。

# php - 将php mysql结果转换为数组

> ID：11878616
> 
> 赞同：0
> 
> 时间：2012-08-09T07:27:26.217
> 
> 标签：php

我有这个功能：

```
 public function get_all_sites($niche){
    $query="SELECT * 
           FROM sites AS site
           INNER JOIN niche AS n ON n.niche_id=site.niche_id
           INNER JOIN review AS r ON r.site_id=site.site_id
           WHERE n.niche_id=".$niche;
    $results=mysql_query($query) or die(mysql_error());

  while($rows[] = mysql_fetch_assoc($results));

    return $rows;
} 
```

我想要做的是一次性将所有行转换为关联数组并返回它。由于返回的值很多，我不想使用任何推送函数或编写类似 $new_array['id']=$row['id']; 这样的代码。更短的代码更好。

好的，连接错误消失了。如何在不从循环内部获取结果的情况下将所有行作为数组从 mysql_fetch_assoc 中输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:29:35.390

错误：

```
Warning: mysqli_fetch_assoc() expects parameter 1 to be mysqli_result, 
resource given in C:\Program Files (x86)\Zend\Apache2\htdocs\bestMatch
\sandbox\models\SitesDB.php on line 19 
```

表示您的 SQL 有问题或服务器无法执行它。我建议您将其回显并确保查询可以提供结果。

在这种情况下，您似乎正在混合使用 mysql_ 和 mysqli_ 函数？您是否在进行 mysqli_ 连接以便能够返回关联的数组？

编辑：

基于此评论“嗯，我急于完成这个网站..所以我会坚持使用 mysql”，尝试添加到您的函数的连接？查看[示例 1](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)并确保您已涵盖这些步骤。

# iphone - 获取 iPhone 的 GPS Data 数据

> ID：11878618
> 
> 赞同：-1
> 
> 时间：2012-08-09T07:27:43.357
> 
> 标签：iphone, ios, gps

我只是想知道通过 iPhone 获取用户当前位置的好方法是什么。我知道您可以从图片中获取 GPS 数据，但是当用户使用我的应用程序时，如何主动获取 GPS 数据。任何为我指明正确方向以帮助我入门的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:30:43.900

像[这样](http://www.switchonthecode.com/tutorials/getting-your-location-in-an-iphone-application)的教程应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:32:38.890

您正在寻找的框架是核心位置。尝试有关核心位置的教程，您应该朝着正确的方向前进。

这是一个看起来不错的： [http ://www.vellios.com/2010/08/16/core-location-gps-tutorial/](http://www.vellios.com/2010/08/16/core-location-gps-tutorial/)

# php - 在 CodeIgniter 中将参数从视图传递到控制器

> ID：11878619
> 
> 赞同：0
> 
> 时间：2012-08-09T07:27:51.317
> 
> 标签：php, html, url

我有这个基本问题

这是 ：

```
<a href="userconsole/indivstore/<?php echo $obj->store_id; ?>/">
<?php echo $obj->title; ?></a> 
```

与此不同：

```
<a href="/userconsole/indivstore/<?php echo $obj->store_id; ?>/">
<?php echo $obj->title; ?></a> 
```

还是没有区别？

（我目前正在使用 CodeIgniter）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:31:24.533

除非我遗漏了什么，否则唯一的区别（并且至少有一个区别）在于 HTML，而不是 PHP 本身。

第二个有一个以 a 开头的链接，`/`这意味着它指向链接

```
http://yoursite.tld/userconsole/etc 
```

`/userconsole/etc`第一个从你叫它的地方指向相对的。因此，如果您在 dir`/yourpath`中，它将指向您`http://yoursite.tld/yourpath/userconsole/etc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:35:26.837

让我们在 www.somesite.com/url/ 上说你

和

```
<a href="userconsole/indivstore/<?php echo $obj->store_id; ?>/">
<?php echo $obj->title; ?></a> 
```

你要去`www.somesite.com/url/userconsole/indivstore/`

和

```
<a href="/userconsole/indivstore/<?php echo $obj->store_id; ?>/">
<?php echo $obj->title; ?></a> 
```

这里是`/`重要的！你回到你的根路径，这意味着`www.somesite.com`。结果：`www.somesite.com/userconsole/indivstore/`

所以它的真实路径与绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:33:06.410

第一个链接具有您正在访问的实际页面的相对路径，但第二个页面具有绝对路径，因此：

如果您在：`http://example.com/something/other-thing`

在第一种情况下，下一个 url 将是：`http://example.com/something/other-thing/userconsole..etc` 在第二种情况下，下一个 url 将是：`http://example.com/userconsole..etc`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T07:36:48.963

`<a href="userconsole/indivstore/<?php echo $obj->store_id; ?>/">`是相对 URL，所以如果你在`http://host/site/current-page`它上面会指出`http://host/site/current-page/userconsole/indivstore/<?php echo $obj->store_id; ?>`哪个是错误的

`<a href="/userconsole/indivstore/<?php echo $obj->store_id; ?>/">`是绝对 URL，因此如果您在它上面，如果您的站点位于子文件夹下`http://host/site/current-page`，它将指出哪个是错误的。`http://host/userconsole/indivstore/<?php echo $obj->store_id; ?>`

使用 codeigniter 生成 URL 的正确方法是使用 site_url() 助手请检查[http://codeigniter.com/user_guide/helpers/url_helper.html](http://codeigniter.com/user_guide/helpers/url_helper.html)

# php - 点击拨打 MiTel 和 SIP

> ID：11878621
> 
> 赞同：1
> 
> 时间：2012-08-09T07:27:55.140
> 
> 标签：php, sip

我们正在寻找一种点击通话系统，只需一键让您的手机拨打屏幕上的号码。

在我们公司，我们有很多 MiTel 5320/5330 IP 电话也具有 SIP 功能，因为有一个名为*MiTel Unified Communicator Express*的工具，您可以使用它来开始呼叫、断开连接、重定向等。我认为 PHP 也必须有一种方法可以做到这一点（可能使用套接字等）

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:21:54.163

点击通话是使用第 3 方通话控制 (3PCC) 实现的。查看[RFC3725](https://www.rfc-editor.org/rfc/rfc3725)了解更多技术细节。一般来说，它是独立于供应商的，应该得到 Mitel 的支持。

有几种方法可以做到：

1.  如果 Mitel 为其 UC Express 提供 API，您可以使用 PHP 脚本将点击呼叫委托给 Mitel。
2.  使用星号作为点击呼叫服务器。[此页面](http://www.voip-info.org/wiki/view/Asterisk+click+to+call)有更多详细信息。简而言之，只要点击通话链接被激活，您的 web 应用程序就会将 AMI 推荐发送到星号，`ORIGINTATE`以调用您的用户行为。
3.  你的 webapp 实现了 SIP B2BUA。单击链接时，webapp 使用 RFC 中推荐的 3 种方法之一向调用者和被调用者发起 INVITE。这是一项相当多的工作，尤其是在 PHP 中没有大量稳定的 SIP 堆栈实现。您还需要更深入地了解 SIP 呼叫处理。如果您是 Java，请查看[mobicents SIP Servlet 堆栈](http://code.google.com/p/sipservlets/wiki/Welcome?tm=6)。他们有一个很好的点击通话演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-03T13:48:55.520

点击通话现在是几个标准 Mitel 附加组件的一部分：

[https://oneview.mitel.com/s/article/Application-Integration-Solutions](https://oneview.mitel.com/s/article/Application-Integration-Solutions)

# ios - 如何在 iOS 中使用 Core Plot 为条形图中的条形图设置动画

> ID：11878626
> 
> 赞同：2
> 
> 时间：2012-08-09T07:28:10.913
> 
> 标签：ios, object, core-plot

当我尝试为垂直条形图制作动画时，例如：

1.  起初我们只能在图表上看到一个图，下一个图是半可见的（我用 barOffset 完成了这个，并将 x.axis 的范围设置为 2。

2.  当我在图表上左滑时，第二个图应该同样出现在第一个和第三到第二个位置。

    *   为此，我在图表顶部拍摄了一个透明视图，并通过使用计时器将范围值增加了 0.2 ... 0.2 ... 0.2 ... 处理了滑动并应用了像动画一样的绘图，直到下一个绘图范围，所以它看起来像变换动画。

    *   这里的问题是当我向左滑动时，第一个图向左移动，第二个图出现在屏幕上。我的需要是第一个情节应该留在那里，直到第二个情节占据它的位置。

伙计们，由于我是 Coreplot 的新手，请帮助我提出您的想法。

谢谢，莫尼什

# oracle - Oracle RAC 环境中的 Expdp

> ID：11878631
> 
> 赞同：1
> 
> 时间：2012-08-09T07:28:26.030
> 
> 标签：oracle

在其中一个 RAC 实例上运行以下命令

```
expdp system/password@orcl DIRECTORY=Test DUMPFILE=user1.dmp owner=user1 LOGFILE=log1.log 
```

我面临以下错误：

```
ORA-39002: invalid operation
ORA-39070: Unable to open the log file.
ORA-29283: invalid file operation
ORA-06512: at "SYS.UTL_FILE", line 536
ORA-29283: invalid file operation 
```

我在同一个 RAC 实例上使用以下 SQL 命令创建了“测试”目录：

```
CREATE DIRECTORY Test AS '/usr/apps/datafiles'; 
```

你能帮我成功导出数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:37:55.203

您可以将日志文件更改为任何其他默认目录，例如 DATA_PUMP_DIR，这样即使它也可以在任何其他节点上执行，因为默认目录将在所有节点上可用。

```
logfile=DATA_PUMP_DIR:impdp.log 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T10:13:08.660

你得到的错误是`ORA-29283`：

```
> oerr ora 29283
29283\. 00000 -  "invalid file operation"
*Cause:    An attempt was made to read from a file or directory that does
           not exist, or file or directory access was denied by the
           operating system.
*Action:   Verify file and directory access privileges on the file system,
           and if reading, verify that the file exists. 
```

所以要么`/usr/apps/datafiles`目录不存在，要么Oracle进程所有者（例如`oracle`帐户）不可写；或者可能（但不太可能）您指定的日志文件已经存在并且不能被覆盖。

既然您说它存在，请查看目录的完整权限（例如`ls -ld /usr/apps/datafiles`，检查 Oracle 进程所有者的所有者和组（例如`id -a`）以比较该目录及其父目录的权限。如果一切正常，则以 Oracle 进程所有者身份登录，检查是否可以在目录下创建文件，例如：

```
touch /usr/apps/datafiles/test_file
ls -l /usr/apps/datafiles/test_file
rm -f /usr/apps/datafiles/test_file 
```

* * *

如果所有这些都有效，并且我猜您的评论可能确实如此，那么由于您使用的是 RAC，您可能需要参考支持说明 1305166.1。

首先要尝试的是`expdp`不使用`@orcl`，因为看起来 (a) 当侦听器和数据库在不同帐户下运行时出现问题（例如`grid`和`oracle`，并且`grid`用户无法访问 OS 目录 -`touch`以该用户身份重复测试看看是不是这样）；或者 (b) 如果别名是负载平衡的并且它最终在没有目录的不同节点上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T19:37:00.607

获取 ORA-39002；运行 expdp 时出现 ORA-39070 和 ORA-39087。

例如：

```
$ expdp dbschema/dbpassw DIRECTORY=DATA_PUMP_DIR DUMPFILE=Test1.dmp logfile=Test1.log SCHEMAS=dbschema

Export: Release xx.x.x.x.x – xxbit Production on Tuesday, xx xxxxxxxx, xxxx xx:xx:xx

Copyright (c) 2003, 2007, Oracle. All rights reserved.

Connected to: Oracle Database 11g Enterprise Edition Release xx.x.x.x.x – xxbit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
ORA-39002: invalid operation
ORA-39070: Unable to open the log file.
ORA-39087: directory name DATA_PUMP_DIR is invalid 
```

解决方案：

```
grant read, write on directory DATA_PUMP_DIR to system, dbschema; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T07:18:55.373

The users might not have permission to use the directory. You need to login as sysdba and provide the necessary permissions

grant read, write on directory to PUBLIC;

Then try the export using data pump, this should solve your issue.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-21T03:26:54.357

如果您正在为以下练习进行此练习：Oracle Database 11gR2 Jumpstart Guide Chapter 9 page 87 (I'm on Windows 10) ..after doing

> 创建或替换目录 exp_dir AS 'c:\oraclexe\exp_dumps'; --我还看到一个链接说要在这个路径的末尾添加一个 \ --so 'c:\oraclexe\exp_dumps\' --我不确定这是否也解决了我的问题所以我包括这个

和

> GRANT READ，WRITE ON DIRECTORY exp_dir TO hr;

--我也只是在这里使用了系统

接下来只需转到该父目录并手动创建“exp_dumps”目录

然后它对我有用

# c++ - 如何枚举我班上的朋友

> ID：11878633
> 
> 赞同：4
> 
> 时间：2012-08-09T07:28:49.900
> 
> 标签：c++, oop, enums, encapsulation, friend

我有以下两个课程：

```
class A{
enum ee{a = 1, b = 2 , c = 3};
};

class B{
 /*

 */

}; 
```

现在我想在 B 类中使用 enum ee 我如何与 A 类中的 enum ee 交朋友？\

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:43:52.947

您可以使用这种方法更有选择性地限制访问：

```
class B;

class A {
    class inner {
        enum ee {a = 1, b = 2 , c = 3};
        friend class B;
    };
public:
    typedef inner exposed;
};

class B {
    void f() {
        const A::exposed::ee e(A::exposed::a);
    }
}; 
```

这在其他选项之上引入了限制，在您想要/需要更具体的 wrt 访问的时候。

具体来说，`A`不需要与`B`使用这种方法成为朋友，并且`A::inner`您指定的声明受到限制。`A::inner`然后可以将其声明保密，并允许通过友谊访问。客户端可以声明一个`inner`（通过 访问`A::exposed`），但如果枚举类型和常量是私有的，它对客户端没有实际用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:33:04.830

如果将枚举放在 的公共部分`A`，则可以将其称为`A::ee`，并将值称为`A::a`、`A::b`和`A::c.`

```
class A
{
public:
   enum ee {a = 1, b = 2 , c = 3};
};

class B
{  
    A::ee an_enum;
    /*    */
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T07:33:53.953

您不能“加好友”枚举，因为枚举成员在其范围内是公开的。“交友”涉及公开某事的私人成员。所以，在这种情况下，你需要成为朋友`class A`。

换句话说：

```
class A {
    enum ee {a = 1, b = 2, c = 3};

    friend class B;
}; 
```

将使私有`enum A::ee`可从`class B`.

然后，例如：

```
class B {
    void somefunc() {
        enum A::ee v = A::a;
    }
} 
```

# javascript - 使用 Javascript 检测对社交插件的评论

> ID：11878640
> 
> 赞同：0
> 
> 时间：2012-08-09T07:29:05.917
> 
> 标签：javascript, facebook, facebook-social-plugins

Facebook 允许您包含一个评论框，您网站的访问者可以在该评论框上发表评论。它以 iframe 的形式存在，允许用户以自己的身份发表评论，而无需向您（网站所有者）透露他们的身份。

[http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

我希望能够检测到有人何时使用它发表评论——我不想知道他们是谁、他们的评论是什么或任何其他细节（只是他们留下了评论）。

我似乎无法找到一种方法来做到这一点，但这是我尝试过或想做的事情：

1.  Facebook 似乎没有公开任何 Javascript 事件，但也许我错过了它们？
2.  已列出的评论添加在评论字段下方——我想也许我可以检测到该字段何时增长或更改。看来我不能（iframe 不会改变高度），这可能是因为其他人与您同时发表了评论。
3.  点击劫持好吗？我想也许我可以在“评论”按钮上方放置一个不可见的 DIV，然后当有人点击时将其删除并传递点击事件。看来我也不能这样做（可能有充分的理由）。

有什么想法可以在发表评论时检测到吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:51:12.883

Facebook 确实针对这种情况公开了事件：

```
FB.Event.subscribe("comment.create", function (response) {
    console.log('create', response);
});

FB.Event.subscribe("comment.remove", function (response) {
    console.log('remove', response);
}); 
```

更多信息：[FB.Event.subscribe - Facebook 开发者](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CF0QFjAB&url=http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/&ei=TmsjUKSKNYTl4QTvlIHYBA&usg=AFQjCNHXJbrf2KZDfqtvVa2hQzhpkSirbg&sig2=V1I5IcP92p93b3p_OOUihg)。

# file - 从powershell中的文本文件中选择部分行

> ID：11878641
> 
> 赞同：0
> 
> 时间：2012-08-09T07:29:09.790
> 
> 标签：file, select, powershell, text

我试图从文本文件中选择部分行

我曾经`select-string -pattern "IM1"`过滤掉，但结果是这样的：

> **19.la1:288:IM1=144_-_1.3.jpg；**

我只希望结果是从**=**到**;** 所以只会出现 144_-_1.3.jpg

jpg 文件会有不同的名称和长度

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:01:51.980

您可以拆分等号上的行，获取最后一个元素 (-1)，并修剪分号：

```
PS> $line.Split('=')[-1].Trim(';')
144_-_1.3.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:00:44.843

您可以使用正则表达式：

```
$line='19.la1:288:IM1=144_-_1.3.jpg'
$regex = [regex]'={1}(.*\.jpg)'
$regex.Match($line).Groups[1].Value 
```

# android - 如何从android在服务器上创建页面

> ID：11878648
> 
> 赞同：1
> 
> 时间：2012-08-09T07:29:40.173
> 
> 标签：android, drupal

在这里，我想`post idea`从. 为此，我没有确切的想法，但到目前为止我已经尝试过。`drupal``android`

我尝试了帖子`title`和`body`。我正在将标题和正文转换为`json`格式并传递给服务器。我尝试发布`individual title and body` 或`combine title & body`

添加**个人标题和正文**时：

```
 List<NameValuePair> params = new ArrayList<NameValuePair>();

          params.add(new BasicNameValuePair("type","page"));
          params.add(new BasicNameValuePair("title",title));
          params.add(new BasicNameValuePair("body",jsonnode.toString()));

                         // jsonnode value is {"und":[{"value":"body value"}]}

         System.out.println("value of the params =============> "+params); 
```

给我吗`status code 401`

```
I/System.out(  524): @@@@@@2    jsonnode=======>{"und":[{"value":"body value"}]}
I/System.out(  524): value of the combine node=======>{"type":"article","body":{"und":[{"value":"body value"}]},"title":"title"}
I/System.out(  524): value of the params =============> [type=page, title=title, body={"und":[{"value":"body value"}]}]
W/DefaultRequestDirector(  524): Authentication error: Unable to respond to any of these challenges: {}
I/System.out(  524): =========> statusCode post idea=====> 401 
```

**结合标题和正文：**

```
 List<NameValuePair> params = new ArrayList<NameValuePair>();

          params.add(new BasicNameValuePair("node",json.toString()));   
                        //  json value is  {"type":"article","body":{"und":[{"value":"body"}]},"title":"title"}

            System.out.println("value of the params =============> "+params); 
```

给我吗`status code 406`

```
I/System.out(  571): @@@@@@2    jsonnode=======>{"und":[{"value":"body"}]}
I/System.out(  571): value of the combine node=======>{"type":"article","body":{"und":[{"value":"body"}]},"title":"title"}
I/System.out(  571): value of the params =============> [node={"type":"article","body":{"und":[{"value":"body"}]},"title":"title"}]
I/System.out(  571): =========> statusCode post idea=====> 406 
```

连接：

```
public static String makeWebForPostIdea(String url, String title,String body)
    {
        JSONStringer jsonobject = null;
        JSONObject json = null;
        JSONObject jsonnode = null;

        DefaultHttpClient client = new DefaultHttpClient();

        HttpPost post = new HttpPost(url);

        try {
            JSONObject jsonvalue = new JSONObject();
            jsonvalue.put("value", body.toString());

            JSONArray array = new JSONArray();
            array.put(jsonvalue);

            jsonnode = new JSONObject();
            jsonnode.put("und", array);

            System.out.println("@@@@@@2    jsonnode=======>"+jsonnode.toString());

        } catch (JSONException e3) {
            // TODO Auto-generated catch block
            e3.printStackTrace();
        }

        try {
               //jsonobject = new JSONStringer().object().key("und").array().object().key("value").value(body).endObject().endArray().endObject();

               json = new JSONObject();
               json.put("title",title);
               json.put("body", jsonnode);
               json.put("type","article");

            System.out.println("value of the combine node=======>"+json.toString());   
            //System.out.println("=============>"+jsonobject);

        } catch (JSONException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }

         List<NameValuePair> params = new ArrayList<NameValuePair>();

          params.add(new BasicNameValuePair("node",json.toString()));
           // params.add(new BasicNameValuePair("type","page"));
            //params.add(new BasicNameValuePair("title",title));
            //params.add(new BasicNameValuePair("body",jsonnode.toString()));

            System.out.println("value of the params =============> "+params);

        UrlEncodedFormEntity formEntity = null;
        try {
                formEntity = new UrlEncodedFormEntity(params);
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        post.setEntity(formEntity);

        try {

            HttpResponse response = client.execute(post);

            int statusCode = response.getStatusLine().getStatusCode();
            System.out.println("=========> statusCode post idea=====> "+statusCode);    
            if (statusCode == HttpStatus.SC_OK)
            {
                HttpEntity entity = response.getEntity();
                InputStream is = entity.getContent();
                return iStream_to_String(is);
            }
            else
            {
                return "Hello This is status ==> :"+String.valueOf(statusCode);
            }
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

     public static String iStream_to_String(InputStream is1) {
            BufferedReader rd = new BufferedReader(new InputStreamReader(is1), 4096);
            String line;
            StringBuilder sb = new StringBuilder();
            try {
                while ((line = rd.readLine()) != null) {
                    sb.append(line);
                }
                rd.close();

            } catch (IOException e) {
                // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String contentOfMyInputStream = sb.toString();
        return contentOfMyInputStream;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:49:36.277

我不知道您的 Drupal 站点上有什么样的自定义代码，但不可能发布到 Web 界面之外的标准 Drupal 站点——这是一种安全措施。

您的最佳选择是：

a：在 Drupal 站点上创建您自己的自定义 API 模块并发布到该模块（确保添加某种安全措施以确保只有您的应用可以发布到它）

b：使用 Android 的 WebView 对象直接显示 Drupal 页面 - 让用户发布到该页面。

# primefaces - 在 javascript 中操作 Primefaces 单选按钮

> ID：11878652
> 
> 赞同：2
> 
> 时间：2012-08-09T07:30:04.497
> 
> 标签：primefaces

我正在尝试通过 Javascript 操作 primefaces 单选按钮。

对于标准单选按钮，我可以简单地更改`checked`输入元素的属性：

```
jQuery(".myselector input")[0].checked = true
jQuery(".myselector input")[0].checked = false 
```

之后，按钮返回初始状态（未选择任何项目）。

使用 primefaces 单选按钮，更改选中的属性似乎没有效果。`click`我可以通过在相应标签上生成事件来选择特定的单选按钮：

```
jQuery(".mygroup-selector label").get(0).click() 
```

但是，我正在寻找一种恢复初始状态的方法，即取消选择所有项目。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:43:44.060

我发现执行此操作的最佳方法是操纵基础`checked`属性，然后手动触发`changed`事件。然后事件处理程序将自动更新 UI 类：

```
$(".myselector input").prop("checked", false)
$(".myselector input").change() 
```

但是，其他更改事件处理程序也将运行，这可能会根据情况产生副作用。

显然，Primefaces（或它使用的任何 js 组件）确实应该为此提供适当的客户端 API……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:19:19.120

尝试 ：

```
$(".myselector input").prop('checked', false);
// Note that the pre-jQuery 1.6 idiom was
// $(".myselector input").attr('checked', false);
OR
$(".myselector input").removeAttr("checked");
OR
$(".myselector input").val(""); 
```

# java - 如果页面在过去 24 小时内未更新，我无法通过 Google Sites API 获取页面条目

> ID：11878653
> 
> 赞同：1
> 
> 时间：2012-08-09T07:30:06.340
> 
> 标签：java, google-api, google-sites

我正在使用用于 java 的谷歌网站 api。我需要在我的站点中获取所有 ListItemEntries。我有以下代码：

```
ContentFeed contentFeed = service.getFeed(new URL(baseURL + domain + siteName), ContentFeed.class);
for (ListItemEntry entry : contentFeed.getEntries(ListItemEntry.class)) {
           for (Field field : entry.getFields()) {
                 System.out.println(field.getValue());
           }
} 
```

它工作完美。但是，如果 ListItemEntry 大约在过去 24 小时内没有更新，它不会找到任何 ListItemEntry。下一个块不返回任何内容。

```
 service.getFeed(new URL(baseURL + domain + siteName), ContentFeed.class); 
```

ListPageEntry 也有同样的问题，可能和其他 ContenEntry 一样，我只检查了 ListItemEntry 和 ListPageEntry。有谁知道如何解决这个问题？

# c# - WinRT - 在保持 UI 响应的同时加载数据

> ID：11878654
> 
> 赞同：6
> 
> 时间：2012-08-09T07:30:06.867
> 
> 标签：c#, .net, windows-8, microsoft-metro, windows-runtime

我正在开发一个 Windows Metro 应用程序，并且遇到了 UI 变得无响应的问题。据我所知，原因如下：

```
 <ListView
...
        SelectionChanged="ItemListView_SelectionChanged"            
... 
```

此事件在此处处理：

```
 async void ItemListView_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (this.UsingLogicalPageNavigation()) this.InvalidateVisualState();

        MyDataItem dataItem = e.AddedItems[0] as MyDataItem;
        await LoadMyPage(dataItem);
    }

    private async Task LoadMyPage(MyDataItem dataItem)
    {            
        SyndicationClient client = new SyndicationClient();
        SyndicationFeed feed = await client.RetrieveFeedAsync(new Uri(FEED_URI));                    

        string html = ConvertRSSToHtml(feed)
        myWebView.NavigateToString(html, true);            
    } 
```

`LoadMyPage`需要一段时间才能完成，因为它从 Web 服务获取数据并将其加载到屏幕上。然而，看起来 UI 正在等待它：我的猜测是直到上述事件完成。

所以我的问题是：我能做些什么呢？有没有更好的事件我可以挂钩，还是有另一种方法来处理这个？我想过启动一个后台任务，但这对我来说似乎有点过头了。

编辑：

只是为了澄清这个问题的规模，我说的是最多 3 - 4 秒无响应。这绝不是一项长期的工作。

编辑：

我已经尝试了下面的一些建议，但是，该`SelectionChanged`函数的整个调用堆栈都在使用 async/await。我已经追踪到这个声明：

```
myFeed = await client.RetrieveFeedAsync(uri); 
```

在完成之前似乎不会继续处理。

编辑：

我意识到这正在变成战争与和平，但下面是使用空白地铁应用程序和按钮复制问题：

XAML：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <StackPanel>
        <Button Click="Button_Click_1" Width="200" Height="200">test</Button>
        <TextBlock x:Name="test"/>
    </StackPanel>
</Grid> 
```

后面的代码：

```
 private async void Button_Click_1(object sender, RoutedEventArgs e)
    {
        SyndicationFeed feed = null;

        SyndicationClient client = new SyndicationClient();
        Uri feedUri = new Uri(myUri);

        try
        {
            feed = await client.RetrieveFeedAsync(feedUri);

            foreach (var item in feed.Items)
            {       
                test.Text += item.Summary.Text + Environment.NewLine;                    
            }
        }
        catch
        {
            test.Text += "Connection failed\n";
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T22:40:29.453

试试这个...

```
SyndicationFeed feed = null;

SyndicationClient client = new SyndicationClient();

var feedUri = new Uri(myUri);

try {
    var task = client.RetrieveFeedAsync(feedUri).AsTask();

    task.ContinueWith((x) => {
        var result = x.Result;

        Parallel.ForEach(result.Items, item => {
            Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal,
            () =>
            {
                test.Text += item.Title.Text;
            });
       });     
   });
}
catch (Exception ex) { } 
```

我通过使用 Grid 应用程序模板向应用程序添加一个按钮，在我的机器上进行了尝试。我可以在更新页面标题时来回滚动项目网格，而不会出现问题。虽然我没有很多项目，但它进展得非常快，所以很难 100% 积极。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T07:47:21.683

由于您`await`在前面使用，`LoadMyPage`我假设它可以编译并返回一个`Task`. 鉴于此，我创建了一个小例子。

让我们假设`LoadMyPage`(and `Sleep()`) 看起来像这样：

```
public Task<string> LoadMyPage()
{
    return Task<string>.Factory.StartNew(() =>
                                                {
                                                    Sleep(3000);
                                                    return "Hello world";
                                                });
}
static void Sleep(int ms)
{
    new ManualResetEvent(false).WaitOne(ms);
} 
```

看起来`XAML`像这样：

```
<StackPanel>
    <TextBlock x:Name="Result" />
    <ListView x:Name="MyList" SelectionChanged="ItemListView_SelectionChanged">
        <ListViewItem>Test</ListViewItem>
        <ListViewItem>Test2</ListViewItem>
    </ListView>
    <Button>Some Button</Button>
    <Button>Some Button2</Button>
</StackPanel> 
```

然后我们可以让`SelectionChanged`事件处理程序看起来像这样：

```
private async void ItemListView_SelectionChanged(object sender,
                                                 SelectionChangedEventArgs e)
{
    MyList.IsEnabled = false;
    var result = await LoadMyPage();

    Result.Text = result;

    MyList.IsEnabled = true;
} 
```

返回的`Task`将`LoadMyPage`并行运行，这意味着当该任务运行时，`UI`不应冻结。现在从`Task`您使用的`await`. 这将创建一个延续块。

因此，在此示例中，当您选择某些内容时，`ListView`在整个加载时间内禁用，然后在完成后重新启用`Task`。您可以通过按下按钮来验证 UI 没有冻结，以查看它是否仍然响应。

如果`LoadMyPage`与 UI 交互，您需要稍微重新安排它，让它返回 a`ViewModel`或您想要的结果，然后在 UI 线程上再次将所有内容放在一起。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T07:34:03.320

后台线程绝对*不是*矫枉过正。这正是您处理此类问题的方式。

不要在 UI 线程上执行冗长的任务，否则你会占用 UI 并导致它变得无响应。在后台线程上运行这些，然后让该线程在完成时引发一个可由主 UI 线程处理的事件。

在 UI 线程上显示某种进度指示器也很有用。用户喜欢知道*正在发生的事情*。这会让他们放心，应用程序没有损坏或冻结，他们愿意再等一会儿。这就是为什么所有的网络浏览器都有某种“悸动”或其他加载指示器的原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T10:26:59.427

最可能的问题是`LoadMyPage`同步做某事。请记住，`async`不要在后台线程上运行您的代码；默认情况下，它的所有实际*代码*都将在 UI 线程上运行（请参阅[async/await 常见问题解答](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)或我的[async/await 介绍](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)）。因此，如果您阻塞异步方法，它仍然会阻塞调用线程。

看看`LoadMyPage`。它是`await`用来调用网络服务的吗？是否在将数据放入 UI 之前对数据进行昂贵的处理？它是否会压倒 UI（许多 Windows 控件在处理数千个元素时存在可伸缩性问题）？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T16:00:07.747

查看您的简化代码示例，我相信您的问题是等待线*之外的所有内容。*

在以下代码块中：

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
    {
        SyndicationFeed feed = null;

        SyndicationClient client = new SyndicationClient();
        Uri feedUri = new Uri(myUri);

        try
        {
            feed = await client.RetrieveFeedAsync(feedUri);

            foreach (var item in feed.Items)
            {       
                test.Text += item.Summary.Text + Environment.NewLine;                    
            }
        }
        catch
        {
            test.Text += "Connection failed\n";
        }
    } 
```

在后台线程上执行的*唯一*行是行

```
feed = await client.RetrieveFeedAsync(feedUri); 
```

**该块中的所有**其他代码行都在 UI 线程上执行。

仅仅因为您的按钮单击处理程序被标记为异步并不意味着其中的代码不会在 UI 线程上运行。事实上，事件处理程序在 UI 线程上启动。因此，创建 SyndicationClient 和设置 Uri 发生在 UI 线程上。

许多开发人员没有意识到，await 之后的任何代码都*将自动在await**之前*使用的同一线程上恢复。这意味着代码

```
 foreach (var item in feed.Items)
            {       
                test.Text += item.Summary.Text + Environment.NewLine;                    
            } 
```

在 UI 线程上运行！

这很方便，因为您不必执行 Dispatcher.Invoke 来更新**test.Text**，但这也意味着您在循环遍历项目和连接字符串的整个过程中都在阻塞 UI 线程。

在您的（尽管是简化的）示例中，在后台线程上执行此工作的最简单方法是在 SyndicationClient 上使用另一种方法，称为**RetrieveFeedAsStringAsync**；然后 SyndicationClient 可以将字符串的下载、循环和连接都作为它自己任务的一部分。该任务完成后，将在 UI 线程上运行的唯一代码行是将文本分配给 TextBox。

# android - Android alertDialog渐变背景

> ID：11878656
> 
> 赞同：3
> 
> 时间：2012-08-09T07:30:10.200
> 
> 标签：android, background, border, android-alertdialog, gradient

我正在使用带有渐变背景的 AlertDialog，但我遇到了边框问题，正如您在图像上看到的那样，边框显示非常糟糕。有什么办法可以摆脱它们吗？

![在此处输入图像描述](../Images/378f16f33546d899fc4b5394e701d29e.png)

我的警报对话框

```
public class MyAlertDialog extends AlertDialog { 
public MyAlertDialog(Context context,int theme)
{  
    super(context,theme);
    getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
} 
```

}

在一个活动中：

```
MyAlertDialog myDialog = new MyAlertDialog(ActionShowActivity.this,R.style.Theme_CustomDialog);   
MyAlertDialog.setMessage("text");
MyAlertDialog.show(); 
```

Theme_CustomDialog 的整个样式文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <style name="Theme" parent="android:Theme.Dialog">
</style>
<style name="Theme.CustomDialog">

  <item name="android:layout_width">wrap_content</item>
  <item name="android:layout_height">wrap_content</item>
  <item name="android:windowIsFloating">true</item>
  <item name="android:adjustViewBounds">true</item>
  <item name="android:background">@drawable/gradient_blue</item>
  <item name="android:windowFrame">@null</item>
  <item name="android:windowContentOverlay">@null</item>
  <item name="android:windowBackground">@color/transparent</item>

</style>
</resources> 
```

我究竟做错了什么？为什么还有边界？

# java - 我的应用程序在使用 tomcat 时出现异常

> ID：11878659
> 
> 赞同：0
> 
> 时间：2012-08-09T07:30:23.593
> 
> 标签：java, jakarta-ee, tomcat7

我正在使用 tomcat 7 并且应用程序给出了以下异常请帮助，我已经使用 tomcat 6 它没有任何问题，我正在使用 eclipse indigo

```
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/RTM14]]
        at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
        at java.util.concurrent.FutureTask.get(Unknown Source)
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1142)
        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1595)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1585)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/RTM14]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        ... 7 more
    Caused by: java.lang.NoClassDefFoundError: CategoryItemRenderer
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getDeclaredMethods(Unknown Source)
        at org.apache.catalina.util.Introspection.getDeclaredMethods(Introspection.java:108)
        at org.apache.catalina.startup.WebAnnotationSet.loadMethodsAnnotation(WebAnnotationSet.java:279)
        at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:141)
        at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:67)
        at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:382)
        at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:858)
        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:346)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5172)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 7 more
    Caused by: java.lang.ClassNotFoundException: CategoryItemRenderer
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
        ... 21 more
    Aug 9, 2012 12:52:31 PM org.apache.catalina.core.ContainerBase startInternal
    SEVERE: A child container failed during start
    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
        at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
        at java.util.concurrent.FutureTask.get(Unknown Source)
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1142)
        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1595)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1585)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
    Caused by: org.apache.catalina.LifecycleException: A child container failed during start
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1150)
        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 7 more
    Aug 9, 2012 12:52:31 PM org.apache.catalina.startup.Catalina start
    SEVERE: Catalina.start: 
    org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 7 more
    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 9 more
    Caused by: org.apache.catalina.LifecycleException: A child container failed during start
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1150)
        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 11 more 
```

我准备提供有关申请的其他信息，但我不知道要提供什么提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:39:58.470

你有`java.lang.ClassNotFoundException`. 你似乎没有`jar`提供`CategoryItemRenderer`我猜想来自`jfreechart`你的类路径的东西。如果您使用`jfreechart`API，请确保您的类路径中有它。确保你的类路径`jar`中提供`CategoryItemRenderer`了 （你的`lib`目录在 下`WEB-INF`）。

# python - python：未定义符号：PyUnicodeUCS2_DecodeUTF8

> ID：11878666
> 
> 赞同：6
> 
> 时间：2012-08-09T07:31:09.773
> 
> 标签：python, linux, ubuntu, scipy

当我尝试在 python 中执行我的主文件时遇到问题（我在带有 python 2.7 的 Ubuntu 12.04 上）。我收到此错误：

```
michael@michael-laptop-ubuntu:~/rubyWorkSpace/pymcs$ python __main__.py Traceback (most recent call last):
  File "__main__.py", line 9, in <module>
    sys.exit(main())
  File "__main__.py", line 5, in main
    import launch
  File "/home/michael/rubyWorkSpace/pymcs/launch.py", line 2, in <module>
    import src.lib.utils as fn
  File "/home/michael/rubyWorkSpace/pymcs/src/lib/utils.py", line 4, in <module>
    import scipy.signal, numdisplay, sys
  File "/home/michael/.local/lib/python2.7/site-packages/scipy/signal/__init__.py", line 200, in <module>
    from bsplines import *
  File "/home/michael/.local/lib/python2.7/site-packages/scipy/signal/bsplines.py", line 2, in <module>
    import scipy.special
  File "/home/michael/.local/lib/python2.7/site-packages/scipy/special/__init__.py", line 527, in <module>
    from basic import *
  File "/home/michael/.local/lib/python2.7/site-packages/scipy/special/basic.py", line 12, in <module>
    import orthogonal
  File "/home/michael/.local/lib/python2.7/site-packages/scipy/special/orthogonal.py", line 697, in <module>
    from orthogonal_eval import \
ImportError: /home/michael/.local/lib/python2.7/site-packages/scipy/special/orthogonal_eval.so: undefined symbol: PyUnicodeUCS2_DecodeUTF8 
```

目前 scipy 与[Python 包管理器](http://code.activestate.com/pypm/)一起安装（请参阅我以前的帖子：[python：scipy install on ubuntu](https://stackoverflow.com/questions/11863775/python-scipy-install-on-ubuntu)。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T08:45:28.293

您正在使用与用于编译 scipy 的 Python 解释器不同的 Python 解释器来运行代码。这通常发生在使用 Unicode UCS2 支持编译的 Python 安装运行针对具有 Unicode UCS4 支持的 Python 安装编译的模块时（反之亦然）。您需要使用用于运行代码的 Python 解释器重新编译/重新安装 scipy 安装。

# php - 在 PHP 中使用多维数组值作为索引

> ID：11878671
> 
> 赞同：1
> 
> 时间：2012-08-09T07:31:41.503
> 
> 标签：php, arrays, multidimensional-array

除了执行遍历关联数组的实际工作，将一个值推入一个新数组并将其设置为等于剩余字段的数组之外，PHP 中是否有一个内置的数组函数可以做这样的事情？

如果有，那是什么？

我将更改以下内容：

```
array(
    [0] => array(
        [created] => 12512512,
        [name] => something
    )
) 
```

变成这样的东西：

```
array(
    [12512512] => array(
        [created] => 12512512,
        [name] => something
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:36:15.887

如果第一个数组是 $a

```
foreach ($a as $v){
    $newarray[$v['created']] = $v;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:36:17.290

我不知道你真正想做什么....也许这对你有帮助

```
<?php
   $new = array();
   foreach($oldArr as $arr) {
        $new[$arr['created']] = $arr;

   }
   print_r($new);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T07:42:47.043

翻转值并删除同一数组中的旧值...如果创建的值不会覆盖现有条目之一，这应该没问题，我非常怀疑，因为它`created`似乎是一个时间戳。

```
foreach($myArray as $index => $entry) {
    $myArray[$entry['created']] = $entry;
    unset($myArray[$index]);
} 
```

或者您可以保留两个副本并使用引用来保存在 ram 上。

```
foreach($myArray as &$entry)
    $myArray[$entry['created']] =& $entry; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T07:49:57.813

请尝试下面给出的代码

```
$arrs = array();
$arrs[0]['created'] = 1252;
$arrs[0]['name'] = 'A';

$narrs = array();
foreach($arrs AS $arr){
 $narrs[$arr['created']]['created'] = $arr['created'];
 $narrs[$arr['created']]['name'] = $arr['name'];
}

echo "<pre>";
print_r($narrs); echo "</pre>"; 
```

谢谢

# json - 使用 Rails3 在 Sinatra 上发布 JSON

> ID：11878675
> 
> 赞同：0
> 
> 时间：2012-08-09T07:31:55.897
> 
> 标签：json, api, post, sinatra

我正在研究 API，我使用 Sinatra 和 Rabl 为 Rails 应用程序开发 API。现在，当 iOS 开发人员以 JSON 格式发布数据时，我遇到了一个问题

url 是：'/users/2/contacts' 并且向这个 URL 发出了一个 post 请求

我可以通过 `JSON.parse env['rack.input'].read`或通过 `::MultiJson.decode(request.body)`

但是我无法从 URL 中获取用户 ID '2'，如果知道如何从 url 中获取参数，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:36:51.903

我假设这`/users/2/contacts`是 JSON 发布到的 URL。

如果路由设置正确，您应该能够从`params[:id]`控制器中获取用户 ID。

在 Rails 中，所有请求参数都被解析并在`params`哈希中可用，如果您的内容类型正确，包括解析的 JSON 数据。请参阅[涵盖此内容的 Ruby on Rails 指南主题](http://guides.rubyonrails.org/action_controller_overview.html#hash-and-array-parameters)。

# java - 我无法在我的 Java 程序 (swing) 中的面板/画布/窗口上绘制图形。有任何想法吗？

> ID：11878676
> 
> 赞同：2
> 
> 时间：2012-08-09T07:31:58.337
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

我无法在 Java 程序的面板/画布/窗口上绘制图形/文本（使用 swing）。

我什至尝试将它分成两个类，其中一个包含paintComponent（扩展JPanel）和另一个类中的其他内容（扩展JFrame）。

我试过一个有 Canvas 和没有 Canvas 的面板（结果相同）。

我无法在蓝色区域绘制任何东西。如果我没记错的话，当我在没有面板的情况下尝试它时，我确实看到了图形。我已经成功地用文本（无窗口）完成了这个程序，甚至是一个 Android 应用程序（我认为 android 应用程序很难，但与此相比，这很容易）。

我意识到我可以使用 JLabel 来做我需要的文本，或者可能是一个编辑框/编辑文本（无论摇摆等价物是什么），但我是一个面向图形的人，所以我想知道如何用 Java 做图形（对于任何未来的项目）。

这是我的代码（我只用 Java 编码了 4 天，所以请原谅任何不好的风格等。顺便说一句，我将一些变量更改为类似全局的并公开了一些东西以使其工作，所以也请原谅： -) 另外，我最初有单独的程序来创建按钮、菜单等，但后来我将它们全部放在一个程序中，以防出现问题，所以也请原谅。）

```
import java.util.Random;
import java.util.Date;
import java.io.*;
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;
import java.awt.event.*;

public class cookiewin extends JPanel
{

    static int randc = 1;
    static JButton b1, b2;
    JMenuBar menubar = null;
    static JFrame win = null;
    static JPanel panel = null, drawa = null;
    static Graphics2D g2n = null;
//static Graphics g2=null;

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.setColor(Color.BLACK);
        g2.drawString("This is a test", 20, 100);
        g2.drawLine(10, 10, 290, 290);
    }

    protected static ImageIcon createImageIcon(String path) {
        java.net.URL URL = TestPaint.class.getResource(path);
        if (URL != null) {
            return (new ImageIcon(URL));
        } else {
            System.err.println("Can't open '" + path + "'\n");
            return (null);
        }
    }

    public TestPaint() {
        Graphics g3;
        Container con;
        win = new JFrame("Fortune Cookie");
        win.setSize(640, 480);
        win.setLocation(100, 100);
        win.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        win.setDefaultLookAndFeelDecorated(true);
        menubar = new JMenuBar();
        JMenu menu = new JMenu("Options");
        menubar.add(menu);
        JMenuItem menuitem = new JMenuItem("Quit");
        menuitem.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                System.out.println("Menuitem1\n");
                win.dispose();
            }
        });
        menu.add(menuitem);
        menu.addSeparator();
        JMenuItem menuitem2 = new JMenuItem("About");
        menuitem2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                System.out.println("Menuitem2\n");
            }
        });
        menu.add(menuitem2);
        win.setJMenuBar(menubar);
        panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
        Color backcol = new Color(90, 0, 0);
        panel.setBackground(backcol);
        con = win.getContentPane();
        con.add(panel, BorderLayout.EAST);
        drawa = new JPanel();
        drawa.setPreferredSize(new Dimension(462, 0));
        drawa.setBorder(BorderFactory.createLineBorder(Color.yellow, 2));
        drawa.setBackground(Color.blue);
        win.setBackground(Color.magenta);
        JPanel panel2 = new JPanel();
        panel2.setBackground(backcol);
        panel2.setPreferredSize(new Dimension(400, 80));
        panel2.setLayout(new BoxLayout(panel2, BoxLayout.Y_AXIS));
        try {
            InputStream is = new FileInputStream("deng_th_.ttf");
            Font font = Font.createFont(Font.TRUETYPE_FONT, is);
            Color textcol = new Color(255, 255, 0);
            JLabel nulltext = new JLabel("    ");
            nulltext.setFont(font.deriveFont(38f));
            panel2.add(nulltext);
            JLabel titletext = new JLabel("        Fortune Cookie:");
            titletext.setFont(font.deriveFont(24f));
            titletext.setForeground(textcol);
            panel2.add(titletext);
        } catch (IOException ex) {
            System.out.println("Font File Error:");
        } catch (FontFormatException ex) {
            System.out.println("Font Error:");
        }
        con.add(panel2, BorderLayout.NORTH);
        JPanel panel3 = new JPanel();
        panel3.setBackground(backcol);
        panel3.setPreferredSize(new Dimension(400, 10));
        con.add(panel3, BorderLayout.SOUTH);
        JPanel panel4 = new JPanel();
        panel4.setBackground(backcol);
        panel4.setPreferredSize(new Dimension(10, 400));
        con.add(panel4, BorderLayout.WEST);
        b1 = new JButton("Another");
        b1.setToolTipText("Get another fortune cookie");
        b1.setPreferredSize(new Dimension(150, 48));
        b1.setMinimumSize(new Dimension(150, 48));
        b1.setMaximumSize(new Dimension(150, 48));
        b1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                System.out.println("Button1\n");
            }
        });
        ImageIcon b2i = createImageIcon("rand.jpg");
        b2 = new JButton("Non-Random", b2i);
        b2.setToolTipText("Toggle random selection");
        b2.setPreferredSize(new Dimension(150, 48));
        b2.setMinimumSize(new Dimension(150, 48));
        b2.setMaximumSize(new Dimension(150, 48));
        b2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                System.out.println("Button2\n");
                randc = 1 - randc;
                if (randc == 0) {
                    b2.setText("Random");
                } else {
                    b2.setText("Non-Random");
                }
            }
        });
        panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        panel.add(b1);
        panel.add(Box.createRigidArea(new Dimension(0, 10)));
        panel.add(b2);
        Canvas can = new Canvas();
        Color cancol = new Color(220, 220, 220);
        can.setBackground(cancol);
        drawa.add(can);
        con.add(drawa, BorderLayout.CENTER);
        win.setIconImage(new ImageIcon("rand.png").getImage());
        win.setVisible(true);
    }

    public static void main(String[] args) {
        int i, numcook = 0, x, y;
        int[] cookiepos = new int[500];
        Random ranGen2 = new Random();
        long seed;
        File fp = new File("cookie.idx");

        new TestPaint();

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T07:37:23.180

您基本上完全忽略了带有自定义油漆的组件。您无需向其中添加面板即可构建此 UI。

这意味着您的`paintComponent`方法永远不会被调用。

`cookiewin`将所有 UI 创建代码从窗格中取出并将其放置在其他位置，然后将面板添加到`cookiewin`某处...

**举个例子**

```
public class TestPaint {

    protected static ImageIcon createImageIcon(String path) {
        java.net.URL URL = TestPaint.class.getResource(path);
        if (URL != null) {
            return (new ImageIcon(URL));
        } else {
            System.err.println("Can't open '" + path + "'\n");
            return (null);
        }
    }
    private JFrame win;
    private JMenuBar menubar;
    private JPanel panel;
    private Container con;
    private JPanel drawa;
    private JButton b1;
    private JButton b2;

    public TestPaint() {

        win = new JFrame("Fortune Cookie");
        win.setSize(640, 480);
        win.setLocation(100, 100);
        win.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        win.setDefaultLookAndFeelDecorated(true);

        menubar = new JMenuBar();
        JMenu menu = new JMenu("Options");
        menubar.add(menu);
        JMenuItem menuitem = new JMenuItem("Quit");
        menuitem.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                System.out.println("Menuitem1\n");
                win.dispose();
            }
        });
        menu.add(menuitem);
        menu.addSeparator();
        JMenuItem menuitem2 = new JMenuItem("About");
        menuitem2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                System.out.println("Menuitem2\n");
            }
        });
        menu.add(menuitem2);
        win.setJMenuBar(menubar);
        panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
        Color backcol = new Color(90, 0, 0);
        panel.setBackground(backcol);
        con = win.getContentPane();
        con.add(panel, BorderLayout.EAST);
        drawa = new JPanel();
        drawa.setPreferredSize(new Dimension(462, 0));
        drawa.setBorder(BorderFactory.createLineBorder(Color.yellow, 2));
        drawa.setBackground(Color.blue);
        win.setBackground(Color.magenta);
        JPanel panel2 = new JPanel();
        panel2.setBackground(backcol);
        panel2.setPreferredSize(new Dimension(400, 80));
        panel2.setLayout(new BoxLayout(panel2, BoxLayout.Y_AXIS));
        try {
            InputStream is = new FileInputStream("deng_th_.ttf");
            Font font = Font.createFont(Font.TRUETYPE_FONT, is);
            Color textcol = new Color(255, 255, 0);
            JLabel nulltext = new JLabel("    ");
            nulltext.setFont(font.deriveFont(38f));
            panel2.add(nulltext);
            JLabel titletext = new JLabel("        Fortune Cookie:");
            titletext.setFont(font.deriveFont(24f));
            titletext.setForeground(textcol);
            panel2.add(titletext);
        } catch (IOException ex) {
            System.out.println("Font File Error:");
        } catch (FontFormatException ex) {
            System.out.println("Font Error:");
        }
        con.add(panel2, BorderLayout.NORTH);
        JPanel panel3 = new JPanel();
        panel3.setBackground(backcol);
        panel3.setPreferredSize(new Dimension(400, 10));
        con.add(panel3, BorderLayout.SOUTH);
        JPanel panel4 = new JPanel();
        panel4.setBackground(backcol);
        panel4.setPreferredSize(new Dimension(10, 400));
        con.add(panel4, BorderLayout.WEST);
        b1 = new JButton("Another");
        b1.setToolTipText("Get another fortune cookie");
        b1.setPreferredSize(new Dimension(150, 48));
        b1.setMinimumSize(new Dimension(150, 48));
        b1.setMaximumSize(new Dimension(150, 48));
        b1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                System.out.println("Button1\n");
            }
        });
        ImageIcon b2i = createImageIcon("rand.jpg");
        b2 = new JButton("Non-Random", b2i);
        b2.setToolTipText("Toggle random selection");
        b2.setPreferredSize(new Dimension(150, 48));
        b2.setMinimumSize(new Dimension(150, 48));
        b2.setMaximumSize(new Dimension(150, 48));
        b2.addActionListener(new ActionListener() {
            private int randc;
            public void actionPerformed(ActionEvent evt) {
                System.out.println("Button2\n");
                randc = 1 - randc;
                if (randc == 0) {
                    b2.setText("Random");
                } else {
                    b2.setText("Non-Random");
                }
            }
        });
        panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        panel.add(b1);
        panel.add(Box.createRigidArea(new Dimension(0, 10)));
        panel.add(b2);
//        Canvas can = new Canvas();
        Color cancol = new Color(220, 220, 220);
//        can.setBackground(cancol);
//        drawa.add(can);
        con.add(drawa, BorderLayout.CENTER);
        con.add(new CustomPaint(), BorderLayout.NORTH);
        win.setIconImage(new ImageIcon("rand.png").getImage());
        win.setVisible(true);
    }

    public static void main(String[] args) {
        int i, numcook = 0, x, y;
        int[] cookiepos = new int[500];
        Random ranGen2 = new Random();
        long seed;
        File fp = new File("cookie.idx");

        new TestPaint();

    }

    public class CustomPaint extends JPanel {

        @Override
        public Dimension getPreferredSize() {

            return new Dimension(100, 100);

        }

        @Override
        public Dimension getMinimumSize() {
            return getPreferredSize();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2 = (Graphics2D) g;
            g2.setColor(Color.BLUE);
            g2.fillRect(0, 0, getWidth(), getHeight());
            g2.setColor(Color.WHITE);

            FontMetrics fontMetrics = g2.getFontMetrics();

            g2.drawString("This is a test", 20, fontMetrics.getAscent());
            g2.drawLine(10, 10, 290, 290);
        }
    }
} 
```

# c# - 如何使用 XMLSerializer 对非泛型 IList 进行序列化

> ID：11878681
> 
> 赞同：2
> 
> 时间：2012-08-09T07:32:04.953
> 
> 标签：c#, xmlserializer

我正在尝试序列化一些包含`IList`带有子元素的对象。这`IList`是非通用的，我不能只用通用的。我得到了像“MyObjectChild 类型不是预期的......”这样的异常，它说明了有关 XMLInclude 的内容，但我认为这不是我正在搜索的内容。有谁知道如何`XMLSerialzer`序列化子元素？两个元素都是`[Serializable]`

```
XmlSerializer xmlSerializer = new XmlSerializer(typeof ObservableCollection<MyEntryViewItem>));
FileStream fileStream = new FileStream(exportPath, FileMode.Create);

xmlSerializer.Serialize(fileStream, _listEntries);

public IList ElementChildren { get { return _item.Children; } set { _item.Children = value; RaisePropertyChanged(() => ElementChildren); } }

[Serializable]
public sealed class ElementChild
{
    private int _id;
    private string _text;
    private string _path;
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:46:38.453

根据[Simon Hewitt](http://www.codeproject.com/Articles/8644/XmlSerializer-and-not-expected-Inherited-Types)的说法，您可以使用`XmlInclude`来指定列表的类型。可以在[roboxman.wordpress.com找到替代方案](http://robboxman.wordpress.com/2008/10/02/solving-the-%E2%80%9Cxmlserializer-and-not-expected-inherited-types%E2%80%9D-problem-without-implementing-ixmlserializable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:46:34.857

XmlSerializer 以特殊方式处理 IList（实际上是 ICollection 和 IEnumerable，但 IList 两者都是）。[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer%28v=vs.71%29.aspx) MSDN 页面上有注释：

> XmlSerializer 对实现 IEnumerable 或 ICollection 的类进行特殊处理。实现 IEnumerable 的类必须实现采用单个参数的公共 Add 方法。Add 方法的参数必须与从 GetEnumerator 返回的值的 Current 属性返回的类型相同，或者该类型的基数之一。除了 IEnumerable 之外，实现 ICollection 的类（例如 CollectionBase）必须具有采用整数的公共 Item 索引属性（C# 中的索引器），并且必须具有整数类型的公共 Count 属性。Add 方法的参数必须与从 Item 属性返回的类型相同，或者是该类型的基数之一。对于实现 ICollection 的类，要序列化的值将从索引的 Item 属性中检索，

# java - 带继承的静态和动态类型——Java 中的微妙之处？

> ID：11878683
> 
> 赞同：-3
> 
> 时间：2012-08-09T07:32:14.287
> 
> 标签：java, inheritance

所以我有这个相关的代码......

```
public class PokemonTrainer {
    private Pokemon p = new Squirtle();
    private String name;

    public PokemonTrainer(String name) {
        this.name = name;
    }

    public static void main(String[] args) {
        PokemonTrainer pt = new PokemonTrainer("Ash");
        try {pt.fightGary();}

        catch (Charmander c) {
            System.out.println("You were roasted by a Charmander.");
        }

        catch (Squirtle s) {
            System.out.println("You were drowned by a Squirtle.");
        }

        catch (Bulbasaur b) {
            System.out.println("You were strangled by a Bulbasaur.");
        }

        catch (Pokemon p) {
            System.out.println("You survived!");
        }
    }

    public void fightGary() throws Pokemon {
        throw p;
    }

public class Pokemon extends Exception {}
public class Bulbasaur extends Pokemon {}
public class Squirtle extends Pokemon {}
public class Charmander extends Pokemon {} 
```

为什么会打印“你被一只松鼠淹死了”？

在我的推理中，“catch”是一个方法，当一个对象被传递到一个方法中时，该方法会根据对象的 STATIC TYPE 进行评估——在这种情况下是“Pokemon”——这在下面进行了演示简短的例子：

```
public class PokemonTrainer {
    private Pokemon p = new Squirtle();
    private String name;

    public PokemonTrainer(String name) {
        this.name = name;
    }

    public static void main(String[] args) {
        PokemonTrainer pt = new PokemonTrainer("Ash");
        pt.fightGary(pt.p); // ------------ Prints "Pokemon!!!"
    }

    public void fightGary(Pokemon p) {
        System.out.println("Pokemon!!!");
    }

    public void fightGary(Squirtle s) {
        System.out.println("Squirtle!!!");
    }
} 
```

那么这两个例子有什么不同呢？为什么第一个示例打印它的作用？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T07:34:47.783

> 在我的推理中，“catch”是一种方法

这是第一个错误。`catch`不是一种方法，并试图将其视为会给您带来麻烦。

它是一种具有自己规则的语言结构。您应该阅读[语言规范第 14.20 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20)或[异常教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/)以获取更多信息。

简而言之，当您有一系列`catch`块时，将执行第一个与抛出异常的*执行时间类型匹配的块。*（编译器会阻止您在更具体的异常之前捕获更一般的异常。）

因此，如果您有：

```
try {
  doSomething();
} catch (FileNotFoundException e) {
  ...
} catch (IOException e) {
  ...
} 
```

然后如果`doSomething()`抛出 a`FileNotFoundException`它将执行第一个`catch`块（并且*只*执行那个） - 而如果它抛出任何其他类型的`IOException`，它将执行第二个`catch`块。任何其他异常都会向上传播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:35:40.357

好吧，`catch`它不是一种方法，而是 Java 语言的一部分。

但要回答你的问题，`p`是一个例子`Squirtle`：

```
Pokemon p = new Squirtle(); 
```

并且由于有一个`catch`子句可以捕获 a `Squirtle`，所以它就是这样做的。

```
catch (Squirtle s) 
```

如果这条线不存在，更一般的

```
catch (Pokemon p) 
```

将处理抛出的`Squirtle`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T07:36:35.503

虽然`Pokemon p`被声明为口袋妖怪，但它被实例化为带有`new Squirtle()`. 因为它在内部是一个 Squirtle，`getClass()`当调用它时，会返回 Squirtle.class，所以 try-catch 会在 Pokemon 捕获被检查之前捕获 Squirtle 捕获。

这称为[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。

关于您的推理，`catch`它不是一种方法，而是一个带有`try`块的语句，用于声明在抛出某些异常的情况下要做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T07:37:15.277

您将 的类型`reference`与 的类型混淆了`object`。

Catch 更像是一个`switch`对象`instanceof`。

考虑一个更简单的例子

```
String s = "hello";
Object o = s; 
```

在这种情况下，引用类型`o`是`Object`，但对象类型`String`对于两者都是 a `s`，`o`因为它们是同一个对象。

# wireless - 如何在使用 iptables/ebtables 重定向到任何端口之前将客户端的 MAC 地址存储在文件中

> ID：11878684
> 
> 赞同：0
> 
> 时间：2012-08-09T07:32:15.200
> 
> 标签：wireless, iptables, ebtables

我想在重定向到某个 IP 或端口之前将客户端的 MAC 地址存储到文件中。我正在使用 iptables 进行重定向。是否可以获取客户端的 MAC 并将其存储在文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:37:40.123

是的，可以获取客户端的 MAC 地址并将其存储在文件中。您需要更改网络驱动程序以在解析来自客户端的数据包时执行此操作。MAC 地址属于 OSI 网络模型的第 2 层，因此可以在将其传递给处理 IP 的第 3 层之前提取它。

# php - 创建一个 wordpress 激活菜单

> ID：11878686
> 
> 赞同：2
> 
> 时间：2012-08-09T07:32:19.007
> 
> 标签：php, wordpress

我可以为 wordpress 插件创建安装菜单吗？当我单击激活按钮时，需要出现一个菜单以输入默认设置。有什么钩子还是不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:48:56.420

您可以使用[http://codex.wordpress.org/Function_Reference/register_activation_hook](http://codex.wordpress.org/Function_Reference/register_activation_hook)在激活时重定向到设置页面。

如果您真的需要一个“向导”并且重定向到设置页面还不够好。然后在 'init' 钩子上，您可以检查设置 'my_plugin_wizard_complete' 是否存在，如果不存在，则将您的向导注册为 wordpress 管理页面并重定向到那里。您需要在向导完成后设置设置。

# php - 如何使用 << 在 Yii PHP 中加载面向对象的变量值 我想使用以下代码 $mail->Body = <<<htmldoc $this-="">model->firstname . $this->model->lastname, today is your lucky day ! your d 问问题 问问题 2012-08-09T07:32:29.217 259 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我想使用以下代码 $mail->Body = <<<htmldoc $this-="">model->firstname . $this->model->lastname, today is your lucky day ! your desired product has reached your desired price ! HTMLDOC; 但我得到这个错误：PHP致命错误：不在对象上下文中使用$this... $this->model->firstname 有一个值，我检查了 如何通过javascript文件进行解析？ 我想通过 javascript 解析并找到所有变量声明、属性和对特定库中函数的调用。 最好的方法是什么：正则表达式，词法分析器，使用已经完成的事情（它存在吗？）....？ 实际上我想要的是确保对象名称空间和方法不会被修改，并且通过静态分析来实现。 phpyii 4 1 回答 1 This answer is useful 1 您也可以尝试像这样编写 heredoc 文本： $mail->Body = <<<htmldoc {$this-="">model->firstname} {$this->model->lastname}, today is your lucky day ! your desired product has reached your desired price ! HTMLDOC; 或者您可以使用邮件视图（某些扩展允许这样做）。 于 2012-08-09T12:08:34.123 回答 Related 0 java - NetBeans 平台查找和 CardLayout 2 visual-studio-2010 - 如果所有项目都指向同一个输出文件夹，“复制本地”是否重要？ 1 php - PHP数组输出错误 1 java - 泽西路径正则表达式导致方法不允许用于 PUT 2 mysql - 插入/合并到 MySQL 视图 3 magento - 如何在 Magento 数据库中启用 exception.log 和 system.log？ 2 php - 两个循环的 JS 函数相互冲突 2 file - 如何循环文件，提取矩阵芯片，然后将所有芯片编译成一个新矩阵 2 haskell - 为什么yesod在这里需要授权？ 0 python - 使用 PyInstaller 构建 wxpython exe Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</htmldoc></htmldoc></htmldoc>

> ID：11878687
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, yii

我想使用以下代码

```
$mail->Body = <<<HTMLDOC
$this->model->firstname . $this->model->lastname,
today is your lucky day !
your desired product has reached your desired price !
HTMLDOC; 
```

但我得到这个错误：PHP致命错误：不在对象上下文中使用$this...

$this->model->firstname 有一个值，我检查了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:08:34.123

您也可以尝试像这样编写 heredoc 文本：

```
$mail->Body = <<<HTMLDOC
{$this->model->firstname} {$this->model->lastname},
today is your lucky day !
your desired product has reached your desired price !
HTMLDOC; 
```

或者您可以使用邮件视图（某些扩展允许这样做）。

# javascript - 如何通过javascript文件进行解析？

> ID：11878691
> 
> 赞同：0
> 
> 时间：2012-08-09T07:33:02.863
> 
> 标签：javascript, parsing, code-analysis, lexer

我想通过 javascript 解析并找到所有变量声明、属性和对特定库中函数的调用。

最好的方法是什么：正则表达式，词法分析器，使用已经完成的事情（它存在吗？）....？

实际上我想要的是确保对象名称空间和方法不会被修改，并且通过静态分析来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:11:02.583

您不能使用正则表达式来做到这一点，而且您可能也不想编写自己的[ecma-standard 262](http://www.ecma-international.org/publications/standards/Ecma-262.htm)实现（这完全是矫枉过正）。
至于我，我挖掘谷歌的 V8 javascript 引擎，更准确地说[是 PyV8](http://code.google.com/p/pyv8/)。我建议你可以使用它。

如果你有问题，那是我用来安装的代码（pip 安装对我的 x64 系统有错误，所以我使用了源代码）：

```
apt-get install subversion scons libboost-python-dev
svn checkout http://v8.googlecode.com/svn/trunk/ v8
svn checkout http://pyv8.googlecode.com/svn/trunk/ pyv8
cd v8
export PyV8=`pwd`
cd ../pyv8
sudo python setup.py build
sudo python setup.py install 
```

我记得这些命令对我没有错误。（我复制粘贴它但它工作）

**回答问题本身：**
更复杂的 hello wolrd 示例，列出全局对象的一些变量：

```
import PyV8

class Global(PyV8.JSClass):      # define a compatible javascript class
    def hello(self):               # define a method
        print "Hello World"

    def alert(self, message): # my own alert function
        print type(message), '  ', message

    @property
    def GObject(self): return self

    def __setattr__(self, key, value):
        super(Global, self).__setattr__(key, value)
        print key, '=', value

G = Global()
ctxt = PyV8.JSContext(G)
ctxt.enter()
ctxt.eval("var a=hello; GObject.b=1.0; a();")
list_all_cmd = '''for (myKey in GObject){
alert(GObject[myKey]);
}'''
ctxt.eval(list_all_cmd)
ctxt.leave() 
```

（在浏览器中，您应该称您为全局对象 - Window）
此代码将输出：

```
b = 1
Hello World
<class '__main__.Global'>    <__main__.Global object at 0x7f202c9159d0>
<class '_PyV8.JSFunction'>    function () { [native code] }
<type 'int'>    1
<class '_PyV8.JSFunction'>    function () { [native code] }
<class '_PyV8.JSFunction'>    function () { [native code] }
<class '_PyV8.JSFunction'>    function () { [native code] }
<class '_PyV8.JSFunction'>    function () { [native code] }
<class '_PyV8.JSFunction'>    function () { [native code] }
<class '_PyV8.JSFunction'>    function () { [native code] }
<class '_PyV8.JSFunction'>    function () { [native code] }
<class '_PyV8.JSFunction'>    function () { [native code] } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:48:23.260

您可以使用Mozilla 的[Rhino](https://developer.mozilla.org/en-US/docs/Rhino)。它是用 Java 编写的 Javascript 实现。1.7R3 以后的版本有一个新的 AST API。这些类在 org.mozilla.javascript.ast 中可用

如果您想在 Javascript 中执行此操作，请参阅此讨论[JavaScript parser in JavaScript](https://stackoverflow.com/questions/2554519/javascript-parser-in-javascript)

希望能帮助到你。

# css - 获取下拉菜单以显示焦点？

> ID：11878703
> 
> 赞同：0
> 
> 时间：2012-08-09T07:33:30.067
> 
> 标签：css, drop-down-menu

我制作了一个下拉菜单，按照惯例，当您将鼠标悬停在菜单项上时，您会获得一个下拉菜单选项。

我用来让它们在悬停时显示的代码是：

```
#header .navWrapper .nav li:hover > ul.sub {
    display: block;
} 
```

我想知道有没有让他们在没有Javascript的情况下显示onfocus？

我试过这个但它没有用..

```
#header .navWrapper .nav li:hover > ul.sub,
#header .navWrapper .nav li:focus > ul.sub
{
    display: block;
} 
```

HTML 代码：

```
 <div class="navWrapper">
        <div class="left"></div>
        <div class="nav">
            <ul>
                <li class="home"><a href="/">Home</a></li>
                <li class="spacer"></li>
                <li class="about">
                    <a href="about_us/">About Us</a>
                    <ul class="sub">
                        <li><a href="">option 1</a></li>
                    </ul>                        
                </li>
                <!-- About Ends -->
                <li class="spacer"></li>
                <li class="trademark"><a href="freetrademarksearch/">Free Trademark Search</a></li>
                <li class="spacer"></li>
                <li class="services">
                    <a href="services/">Services</a>
                    <ul class="sub">
                        <li><a href="">option 1</a></li>
                        <li><a href="">option 2</a></li>
                    </ul>
                    <!-- Sub Ends -->
                </li>
                <!-- Services Ends -->
                <li class="spacer"></li>
                <li class="testimonials"><a href="testimonials/">Testimonials</a></li>
                <li class="spacer"></li>
                <li class="more">
                    <a href="javascript:void(0);">More Information</a>
                    <ul class="sub">
                        <li><a href="">option 1</a></li>
                        <li><a href="">option 2</a></li>
                    </ul>
                    <!-- Sub Ends -->
                </li>
                <li class="spacer"></li>
                <li class="contact"><a href="contact-us/">Contact Us</a></li>                 
            </ul>
            <div class="contentClear"></div>
        </div>
        <!-- Nav Ends -->
        <div class="right"></div>
    </div>
    <!-- Nav Wrapper Ends --> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-09T08:05:51.800

尝试在您的 LI 元素上使用“tabindex”属性：

```
<li class="about" tabindex="1">
     <a href="about_us/">关于我们</a>
        <ul class="sub">
            <li><a href="">选项 1</a></li>
        </ul>
</li>

```

# ios - PopViewController 没有效果

> ID：11878711
> 
> 赞同：1
> 
> 时间：2012-08-09T07:34:21.207
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, pushviewcontroller, popviewcontroller

我是 iOS 编程的新手，我在本应相对容易实现的东西上花费了太多时间。当然这是一个初学者的问题，但我似乎无法找到答案。

我目前正在开发一个 iOS VoIP 应用程序。在这个阶段，只要建立呼叫，系统就会切换到“CallingViewController”。每当呼叫断开时，视图应该消失（弹出）。

我的层次结构：

*   窗户

    *   导航控制器：UINavigationController（window.rootViewController）
        *   AppController : UIViewController (navigationController.rootView)
            *   标签栏控制器：UITabBarController
                *   拨号器视图控制器：UIViewController
            *   登录视图控制器：UIViewController
            *   调用视图控制器：UIViewController

我想象 AppController 是一个类，它根据所有 VoIP 相关编码触发的状态和事件来加载和隐藏视图。

例如在我使用的 AppController 中 `[self.navigationController pushViewController:tabBarController animated:YES];` 。推动控制器似乎不会导致任何问题，一切都按预期运行。

按下 tabBarController 会导致 DialerView 获得焦点（它现在是选项卡中的唯一视图，稍后它将包含：拨号器、设置、联系人、通话记录）。用户输入一个号码并按下“VoIP 呼叫”。通过回调（voilibrary->OnCallStateChange -> 最终 AppController.OnCallStateChange），系统可以确定 Call (callId) 的状态已更改为“SET UP”并将推送（在 AppController 中） `[self.navigationController pushViewController:CallingViewController animated:YES];` 。

通过相同的回调函数，系统还将确定呼叫已经结束。然而，使用 popViewController 或任何变体，它都不起作用。ViewController 保持在顶部。我开始使用 NSLog 进行日志记录，它出现了 CallingView：loads、willappear、didappear 和 willdisappear。DidDisappear 但是不会被调用。系统也确实确定呼叫已终止，再次通过 NSLog 检查。所以我用来摆脱 CallingViewController 的任何代码都会被执行（看起来），但是视图不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:12:08.787

我不能说这是否是您的问题的原因，但根据文档

为了

```
pushViewController:animated: 
```

方法

> 此对象不能是选项卡栏控制器的实例，并且它不能已经在导航堆栈上。

# mpi - MPI 障碍的复杂性

> ID：11878712
> 
> 赞同：3
> 
> 时间：2012-08-09T07:34:22.107
> 
> 标签：mpi, time-complexity

MPI障碍的时间复杂度是多少？它们是否适用于大量内核（>> 10k）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T08:45:05.720

屏障复杂性是*高度特定于实现的*。它可能是线性的，可能是对数的，或者可能更好或更糟。一些架构为一些集体操作提供了专用网络，例如 IBM 的 Blue Gene 有一个专用的全局中断网络，它允许非常快速的`MPI_BARRIER`实现，具有几乎恒定的复杂性，但只有在执行时才能完成`MPI_COMM_WORLD`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:57:01.683

虽然 Hristo Iliev 是正确的，但您可以假设在这些尺度上使用的任何合理的 MPI 实现在集体操作上都具有**对数复杂性。**是的，这确实可以扩展 >> 10k 个内核。不同的现代实现之间仍然可能存在显着因素。同样在这个规模上，OS 噪声会对集体操作产生非常显着的影响（参见例如 [ [1](http://www.unixer.de/publications/index.php?pub=108) ]）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T01:50:13.400

复杂性应该不会比 O(log N) 差，因为可以将屏障实现为单个单词的 allreduce，并且 allreduce 的规模为 O(log N)。

# css - CSS：输入字段和导航菜单样式

> ID：11878713
> 
> 赞同：3
> 
> 时间：2012-08-09T07:34:29.297
> 
> 标签：css

我正在为网站设置导航菜单，但我在实现目标时遇到了困难。导航栏的左上角有一个输入字段。我应用的 css 规则未正确设置输入字段的位置。我不确定是位置还是html结构。有没有我可以在导航菜单上方排列输入字段，如下图所示？[例子](http://webprolearner2346.zxq.net/css-test2/#)

谢谢

**HTML 设置**

```
<div id="header">
  <div id="searchInput"></div>
       <h2>MAINT TITLE PAGE</h2>
  <div id="navigation">

  <ul class="button-list">
    <li><a href="#" class="buttonNav" >Content 1</a></li>
    <li><a href="#" class="buttonNav" >Content 2</a></li>
    <li><a href="#" class="buttonNav" >Content 3</a></li>
    <li><a href="#" class="buttonNav" >Content 4</a></li>
    <li><a href="#" class="buttonNav" >Content 5</a></li>   
   </ul> 

   <li class="search"><input type="text" class="search-input" name="search" value="Search" onclick="$(this).val('');" /><input type="submit" class="search-submit" /></li>
  </div>

 </div> 
```

**CSS**

```
<style>

#navigation {
    left: 440px;
    margin-top: 80px;
    position: relative;
}

#au_title {
    color: #FC821D;
    font-size: 120%;
    font-weight: bold;
    left: 515px;
    letter-spacing: 2px;
    position: relative;
    text-transform: uppercase;
    top: -105px;
}

#searchInput {
    left: 700px;
    position: relative;
    top: -180px;
}

#contentNav { color: #cfdae3; }

/* Dark Button CSS */
.buttonNav {
    outline: 0;
    padding: 5px 12px;
    display: block;
    color: #EBEBEB;
    font-weight: bold;
    text-shadow: 1px 1px #1f272b;
    border: 1px solid #1c252b;
    border-radius: 3px;

}
.buttonNav:hover {
    color: #fff;
    background: #4C5A64;

}
.buttonNav:active {
    background-position: 0 top;
    position: relative;
    top: 1px;
    color: #fff;
    padding: 6px 12px 4px;
    background: #20282D;

}

.button-list {
    list-style: none outside none;
    overflow: hidden;
}

.button-list li { float: left; margin: 0 5px 0 0; }
.button-list li.search { padding-left: 18px; margin-left: 10px; position: relative; list-style: none outside none;}

/* Search CSS: *

    .search-input {
        padding: 0 5px 0 22px;
        border: 2px solid #DADADA;
        height: 30px;
        font-size: 12px;
        line-height: 30px;
        border-radius: 25px;
        background: #FFF; 

    }

    .search-input li {
    list-style: none outside none;
    }

    .search-submit {
        width: 13px;
        height: 13px;
        border: none;
        background: url(images/mag-glass.png) no-repeat;
        display: block;
        position: absolute;
        left: 26px;
        top: 10px;
        text-indent: -9999em;
    }
    </style> 
```

**当前结果：**

![在此处输入图像描述](../Images/99c9d5ee26c197d95704601b7498b532.png)

**期望结果：*** ![在此处输入图像描述](../Images/4f5c23debf6ea4f7dd530798bd4d7f54.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:48:41.607

观看此链接[jsfiddle](http://jsfiddle.net/hp3ZY/17/)，希望对您有所帮助

```
#header{
width: 100%;
}

#navigation {
    float:right;
    margin-top: 80px;
}

#au_title {
    color: #FC821D;
    font-size: 120%;
    font-weight: bold;
    left: 515px;
    letter-spacing: 2px;
    position: relative;
    text-transform: uppercase;
    top: -105px;
}

.search{
float:right;
}
.clearFloat{
    clear:both;
}

#contentNav { color: #cfdae3; }

/* Dark Button CSS */
.buttonNav {
    outline: 0;
    padding: 5px 12px;
    display: block;
    color: #EBEBEB;
    font-weight: bold;
    text-shadow: 1px 1px #1f272b;
    border: 1px solid #1c252b;
    border-radius: 3px;

}
.buttonNav:hover {
    color: #fff;
    background: #4C5A64;

}
.buttonNav:active {
    background-position: 0 top;
    position: relative;
    top: 1px;
    color: #fff;
    padding: 6px 12px 4px;
    background: #20282D;

}

.button-list {
    list-style: none outside none;
    overflow: hidden;
}

.button-list li { float: left; margin: 0 5px 0 0; }
.button-list li.search { padding-left: 18px; margin-left: 10px; position: relative; list-style: none outside none;}

/* Search CSS: */

    .search-input {
        padding: 0 5px 0 22px;
        border: 2px solid #DADADA;
        height: 30px;
        font-size: 12px;
        line-height: 30px;
        border-radius: 25px;
        background: #FFF; 

    }

    .search-input li {
    list-style: none outside none;
    }

    .search-submit {
        width: 13px;
        height: 13px;
        border: none;
        background: url(images/mag-glass.png) no-repeat;
        display: block;
        position: absolute;
        left: 26px;
        top: 10px;
        text-indent: -9999em;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:52:42.330

您的 HTML 代码中有错误的标记。进行搜索`LI` `DIV`并将其放在第`header div`一个孩子中，您就完成了！

[**工作演示**](http://jsfiddle.net/jKj7s/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T07:43:08.153

您的“搜索”元素包装`<li>`不正确，将其更改为 a`<div>`并将其添加到导航上方和导航`<h2>`内部`<div>`，如下所示：

```
 <div id="header">
      <div class="search"><input type="text" class="search-input" name="search" value="Search" onclick="$(this).val('');" /><input type="submit" class="search-submit" /></div>
      <div id="navigation">
       <h2>MAINT TITLE PAGE</h2>
       <ul class="button-list">
        <li><a href="#" class="buttonNav" >Content 1</a></li>
        <li><a href="#" class="buttonNav" >Content 2</a></li>
        <li><a href="#" class="buttonNav" >Content 3</a></li>
        <li><a href="#" class="buttonNav" >Content 4</a></li>
        <li><a href="#" class="buttonNav" >Content 5</a></li>   
       </ul> 
      </div>
     </div> 
```

然后添加这个 CSS

```
.search{
   float:right;
   margin-right:10px;
} 
```

希望这有意义吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T07:55:13.067

CSS 样式

```
#search {
 margin-top: -40px;
 text-align:right;
 width: 480px;
 list-style: none;
}

.search { text-align:right; } 
```

将 div 导航替换为

```
<div id="navigation">
<ul id="search"><li class="search"><input type="text" class="search-input" name="search" value="Search" onclick="$(this).val('');" /><input type="submit" class="search-submit" /></li></ul>
  <ul class="button-list">
    <li><a href="#" class="buttonNav" >Content 1</a></li>
    <li><a href="#" class="buttonNav" >Content 2</a></li>
    <li><a href="#" class="buttonNav" >Content 3</a></li>
    <li><a href="#" class="buttonNav" >Content 4</a></li>
    <li><a href="#" class="buttonNav" >Content 5</a></li>   
  </ul> 
</div> 
```

希望这会有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T08:23:56.317

我希望你在看这个：- [http://tinkerbin.com/BTryMLES](http://tinkerbin.com/BTryMLES)

**HTML**

```
<div id="header">
  <div id="searchInput"></div>

  <div id="navigation">
  <div class="search"><input type="text" class="search-input" name="search" value="Search" onclick="$(this).val('');" /><input type="submit" class="search-submit" /></div>
  <ul class="button-list">
           <h2>MAINT TITLE PAGE</h2>
    <li><a href="#" class="buttonNav" >Content 1</a></li>
    <li><a href="#" class="buttonNav" >Content 2</a></li>
    <li><a href="#" class="buttonNav" >Content 3</a></li>
    <li><a href="#" class="buttonNav" >Content 4</a></li>
    <li><a href="#" class="buttonNav" >Content 5</a></li>   
   </ul> 

  </div>

 </div> 
```

**CSS**

```
body {
    background:#e6e6e6;
}

#navigation {
    left: 440px;
    margin-top: 80px;
    position: relative;

}

#au_title {
    color: #FC821D;
    font-size: 120%;
    font-weight: bold;
    left: 515px;
    letter-spacing: 2px;
    position: relative;
    text-transform: uppercase;
    top: -105px;
}

#searchInput {
    left: 700px;
    position: relative;
    top: -180px;
}

#contentNav { color: #cfdae3; }

.buttonNav {
    outline: 0;
    padding: 5px 12px;
    display: block;
    color: #EBEBEB;
    font-weight: bold;
    text-shadow: 1px 1px #1f272b;
    border: 1px solid #1c252b;
    border-radius: 3px;

}
.buttonNav:hover {
    color: #fff;
    background: #4C5A64;

}
.buttonNav:active {
    background-position: 0 top;
    position: relative;
    top: 1px;
    color: #fff;
    padding: 6px 12px 4px;
    background: #20282D;

}

.button-list {
    list-style: none outside none;

    clear:both;
}

.button-list li { float: left; margin: 0 5px 0 0; }
.button-list li.search { padding-left: 18px; margin-left: 10px; position: relative; list-style: none outside none;}

    .search-input {
        padding: 0 5px 0 22px;
        border: 2px solid #DADADA;
        height: 30px;
        font-size: 12px;
        line-height: 30px;
        border-radius: 25px;
        background: #FFF; 
    width:200px;
        float:right;
        margin-right:175px;
    }

    .search-input li {
    list-style: none outside none;
    }

    .search-submit {
        width: 13px;
        height: 13px;
        border: none;
        background: url(images/mag-glass.png) no-repeat;
        display: block;
        position: absolute;
        left: 26px;
        top: 10px;
        text-indent: -9999em;
    } 
```

# java - 调用 FileWriter 的单元测试方法

> ID：11878716
> 
> 赞同：3
> 
> 时间：2012-08-09T07:35:01.230
> 
> 标签：java, file, file-io, junit, mocking

我正在尝试为调用 FileWriter 的方法编写单元测试。我正在使用 JUnit 4.8、Powermock 和 Mockito。我正在测试的方法看起来像这样。

```
 public void methodToTest(String fileName, String text){

          File file = new File (someStaticString) //string is a static field of the class and the path is a dir

          if(!file.exist()){ //create dir}

          try{
               FileWriter fw = new FileWrite(file.getAbsolutePath() + "/" fileName, true);
               fw.write(text);
               fw.close();
          }
          catch(Exception e){
               e.printStackTrace 
          }
    } 
```

如果在方法之外声明了 file 和 fileWriter，我可以使用 mockito 和 powermock 来模拟它们，这样我就可以测试在我练习 BDD 时调用该方法时可能发生的情况。但是，我无法修改我正在测试的代码，因为其他开发人员创建了它们（尽管我认为创建单元测试是开发人员的责任）。

我想知道如何（如果可能的话）在文件和 fw 等方法下模拟对象。如果有在 if() 或 loop() 下创建的对象呢？他们也可以被嘲笑吗？

如果我的想法是不可能的，你有什么建议来测试这种方法？我还了解了 JUnit 的 TemporaryFolder。我可以用它代替文件来创建文件夹和文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:40:57.240

您可以将文件名更改为“ `user.name`.test-file”之类的名称，然后读取文件并在完成后将其删除。

能够更改静态路径会更有用，但如果这是问题，您可以使用“../../../../../../../tmp/user.name.file”作为文件名并有效地忽略静态路径。;)

顺便说一句：这`catch(Exception e)`是一个非常糟糕的主意。你最好删除它恕我直言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:42:46.870

我认为模拟一些在方法体内创建的对象是不正确的，并且在方法完成后将被取消引用。我认为测试已实现的接口而不是实现细节本身是一种很好的做法。在您的情况下，您可以模拟`someStaticString`，对我来说这似乎比模拟`File`或`FileWriter`.

# c++ - 什么是合成指针？

> ID：11878719
> 
> 赞同：28
> 
> 时间：2012-08-09T07:35:12.027
> 
> 标签：c++, pointers, gdb

我在 GDB 中调试了一些 C++ 代码，我发现一些调用正在使用所谓的“合成指针”。谷歌搜索没有产生任何有意义的结果。在 SO 上搜索，大多数标题中带有“合成”的问题都指的是一些 Java 功能（即使他们建议我在这种情况下“合成”可能意味着“由编译器人工生成的东西”）。

例如，看看这个回溯，取自一个操作，在 的构造函数中执行`MyClass`，在一个调用的类成员上`m`（此代码已用 编译`-O2`）：

```
#0  MyClass (arg=..., this=<synthetic pointer>) at somefile.h:144
144     m->lock();
gdb$ print this
$1 = (MyClass * const) <synthetic pointer>
gdb$ print *this
$2 = <optimized out> 
```

上面的堆栈跟踪清楚地表明这`this`是一个指向已优化对象的指针，但怎么可能调用了一个方法（即它的构造函数）呢？我的疯狂猜测是，即使封闭对象 ( `m`) 在代码中被积极使用，一些优化让编译器决定封闭对象 ( `this`) 并不是真正必要的。`m->lock()`由于无法优化的方法调用必须在某处发出，编译器创建一个“假”（合成？）对象，位于内存中的任何位置，只是为了 wrap `m`。

我没有很强的编译经验，所以我不知道这个结论是否真的有意义。有人可以对此有所了解吗？

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T07:38:58.420

编译器可以确定是否`this`实际取消引用（即使用特定的 CPU 细节，而不是一般的 C++ 规则）。如果方法实际上没有取消引用`this`，则无需提供可用的物理表示。

[编辑] 在评论中，jww 提到了另一个案例。单例只有一个副本，因此智能编译器可以将其成员视为全局变量。这意味着的地址`singleton->foo`只是常数`&singleton + offset(foo)`。由于这种优化，单例方法不需要实际取消引用`this`来访问单例成员，因此可以再次对其进行优化。

# php - 使用 TWIG 模板呈现干净整洁的 HTML

> ID：11878728
> 
> 赞同：7
> 
> 时间：2012-08-09T07:35:37.343
> 
> 标签：php, templates, twig

我一直在使用[`Twig`](http://twig.sensiolabs.org/)(version `1.9.1`) 作为`PHP`模板引擎，我对渲染并不完全满意，`HTML`因为添加了额外的不需要的换行符和空格，这使得结果非常不整洁。为了使我的模板更加灵活，我使用[`macros`](http://twig.sensiolabs.org/doc/tags/macro.html)了可以嵌套方式相互调用的模板，这本身可以正常工作，但似乎让事情变得更糟。例如，一个`<a>`元素呈现如下：

```
 <a href="http://google.com" alt="some alternative text">                    some text with <strong>some html</strong>

</a> 
```

我知道部分原因是我的`twig`模板格式化的方式，好像我删除了空行并从中缩进，渲染`HTML`看起来更整洁，但不完全：**下面的输出显示了一个渲染`<a>`之间仍然有 2 个换行符元素的开始和结束，尽管相应的模板不包含任何空行或空格！**：

```
<a href="http://google.com" alt="some alternative text">some text with <strong>some html</strong>

</a> 
```

尽管它有帮助，但从我的`twig`模板中删除格式（即空行和缩进）并不是一个真正的选择，因为它使我的模板非常难以阅读和维护。

**除了从模板中删除格式。有哪些方法可以呈现更干净/更整洁的 HTML `Twig`？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T13:53:07.710

此文档页面应帮助您控制标签中的空格[http://twig.sensiolabs.org/doc/templates.html#whitespace-control](http://twig.sensiolabs.org/doc/templates.html#whitespace-control)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T00:23:39.557

我也想要正确的输出缩进，所以我为此做了一个扩展。我提供了一个要点：[https ://gist.github.com/urraka/ccd1812570ca4b278b9f](https://gist.github.com/urraka/ccd1812570ca4b278b9f)

请参阅 gist 中的使用文件以获得一些解释。

基本上，这个模板：

```
{# Given variable = "line1\nline2\nline3" #}

<body>
    {% if true %}
        <stuff>{% if true %}only blocks that take the whole line have effect{% endif %}</stuff>
        {{ variable }}
    {% endif %}
</body> 
```

最终会是这样：

```
<body>
    <stuff>only blocks that take the whole line have effect</stuff>
    line1
    line2
    line3
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T08:02:50.133

尽管不再维护此捆绑包，但它可能是使用 tidy_parse_string() 编写整洁服务的开始。[KnpMarkupValidatorBundle](https://github.com/KnpLabs/KnpMarkupValidatorBundle)

# java - 以当前位置为圆心在谷歌地图上画四个圆

> ID：11878734
> 
> 赞同：1
> 
> 时间：2012-08-09T07:36:00.510
> 
> 标签：java, android, google-maps, android-mapview, android-canvas

![在此处输入图像描述](../Images/bcfb3d0d8756dcb46d57c0b95587bf3d.png)

在我的代码中，我在 Android 屏幕的上半部分用一张图片显示了我当前的位置。所以我需要以我当前的位置为圆心，在我当前的位置周围画一个像上图一样的圆圈。我需要绘制四个半径分别为 10m、20m、30m、40m 的圆。下面是我的代码，它显示了谷歌地图上的当前位置。

```
 @Override
    protected void onCreate(Bundle icicle) {
        try {       
            super.onCreate(icicle);
            setContentView(R.layout.activity_main);
            initComponents();
            mapView.setBuiltInZoomControls(true);
            mapView.setSatellite(false);
            mapController = mapView.getController();
            mapController.setZoom(16);
            locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
            if (locationManager == null) {
                Toast.makeText(getApplicationContext(),
                        "Location Manager Not Available", Toast.LENGTH_SHORT)
                        .show();
                return;
            }
            location = locationManager
            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if (location == null)
                location = locationManager
                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            if (location != null) {
                double lat = location.getLatitude();
                double lng = location.getLongitude();
                Toast.makeText(getApplicationContext(),
                        "Location Are" + lat + ":" + lng, Toast.LENGTH_SHORT)
                        .show();
                GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
                mapController.animateTo(point, new Message());
                mapOverlay.setPointToDraw(point);
                List<Overlay> listOfOverlays = mapView.getOverlays();
                listOfOverlays.clear();
                listOfOverlays.add(mapOverlay);
            }
            locationListener = new LocationListener() {
                @Override
                public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                }

                @Override
                public void onProviderEnabled(String arg0) {
                }

                @Override
                public void onProviderDisabled(String arg0) {
                }

                @Override
                public void onLocationChanged(Location l) {
                    location = l;
                    locationManager.removeUpdates(this);
                    if (l.getLatitude() == 0 || l.getLongitude() == 0) {
                    } else {
                        double lat = l.getLatitude();
                        double lng = l.getLongitude();
                        Toast.makeText(getApplicationContext(),
                                "Location Are" + lat + ":" + lng,
                                Toast.LENGTH_SHORT).show();
                    }
                }
            };
            if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
                locationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER, 1000, 10f, locationListener);
            if (locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){
                locationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER, 1000, 10f, locationListener);
            }
            locationtimer = new CountDownTimer(30000, 5000) {
                @Override
                public void onTick(long millisUntilFinished) {
                    if (location != null)
                        locationtimer.cancel();
                }

                @Override
                public void onFinish() {
                    if (location == null) {
                    }
                }
            };
            locationtimer.start();
        }
        catch(Exception e) {
            System.out.println(e);
        }
    }

    public MapView getMapView() {
        return this.mapView;
    }

    private void initComponents() {
        mapView = (MapView) findViewById(R.id.mapView);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    } 
```

下面的类是上面的延续。在下面的课程中，我在谷歌地图上显示了我当前的位置。所以我认为我需要在这个类中进行更改，只需要以当前位置为圆心来绘制四个圆。

```
 class MapOverlay extends Overlay {
        private GeoPoint pointToDraw;

        public void setPointToDraw(GeoPoint point) {
            pointToDraw = point;
        }

        public GeoPoint getPointToDraw() {
            return pointToDraw;
        }

        @Override
        public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
                long when) {
            super.draw(canvas, mapView, shadow);

            Point screenPts = new Point();
            mapView.getProjection().toPixels(pointToDraw, screenPts);

            Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                    R.drawable.current_user);
            canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 24, null);
            return true;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:40:06.640

在绘图时，您可以简单地使用`Canvas`来绘制您的圆圈，使用`canvas.drawCircle(screenPts.x,screenPts.y, radius, yourPaint);` 至于获得 10-20-30-40m 的圆圈，您可能需要使用距离公式来计算等于 10、20m 等的像素数。 `Location`提供了一个很好的使用方法来做到这一点`distanceBetween()`。请参阅[此处](https://stackoverflow.com/questions/6283028/distance-of-two-geo-point-android)查看相关帖子，[查看](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)官方 Android 文档。一旦你有一个距离起点 10m 的 GeoPoint `GeoPoint`，你就可以得到它的屏幕坐标`GeoPoint`并将其用作你的圆的半径。祝你好运，希望这会有帮助！

# pointers - Clang 和 gcc 编译器为我的代码提供不同的错误和警告消息/

> ID：11878739
> 
> 赞同：0
> 
> 时间：2012-08-09T07:36:19.700
> 
> 标签：pointers, gcc, clang

我尝试制作一个测试代码来获取指针返回值：

```
#include <stdio.h>

int main(void){

  char myStrcpy(char *str1,char *str2){
    while(*str2 != '\0'){
      *str1++ = *str2++;
    }
    *str1 = '\0';
    return str1;// return the final pointer that should point to the '\0'
  }

  char *reValue;
  char string1[] = "abcd";
  char string2[10];
  reValue = myStrcpy(string2,string1);
  reValue--;//now it should point to the last character which is `d`
  printf("this value of string 2 is %s\n",string2);
  printf("the return value the function is %c\n",*reValue);
  return 0;
} 
```

gcc 编译此代码时没有错误和警告，但 clang 给了我 4 个错误：

```
my_stcpy.c:4:40: error: expected ';' at end of declaration
        char*  myStrcpy(char *str1,char *str2){
                                              ^
                                              ;
my_stcpy.c:14:2: error: use of undeclared identifier 'reValue'
        reValue = myStrcpy(string2,string1);
        ^
my_stcpy.c:15:2: error: use of undeclared identifier 'reValue'
        reValue--;
        ^
my_stcpy.c:17:50: error: use of undeclared identifier 'reValue'
        printf("the return value the function is %c\n",*reValue);
                                                        ^
4 errors generated. 
```

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:53:02.803

GCC 支持嵌套函数，而[clang 不支持（也不急于这样做）](http://clang.llvm.org/docs/UsersManual.html#c_unimpl_gcc)。

看起来您的函数是偶然嵌套的；只需将其移出主要功能，它就会继续工作。

# iphone - iPad 和 iPhone 上的浏览 器宽度不是 100%，其余都可以

> ID：11878740
> 
> 赞同：2
> 
> 时间：2012-08-09T07:36:30.887
> 
> 标签：iphone, html, css, mobile, width

出于测试目的，我设置了这个页面：[http](http://www.fondationmartinmatte.com/test.html) ://www.fondationmartinmatte.com/test.html 它在 html 桌面浏览器中非常好，但在移动设备中总是有一个来自地狱的垂直灰色条。它来自哪里以及我应该告诉 html 代码用于移动设备的设置。首先是那个代码：`<meta name="viewport" content="width=device-width">`这使整个事情变得更糟。我只是删除它，这是灰色条。如何解决这个问题，提前谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T08:09:41.823

尝试使用这些：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black"/> 
```

此外，您可能希望获得比您当前拥有的更复杂的 CSS 重置（边距：0，填充：0）。在浏览器兼容性方面，这里有一些很棒的功能可以让您的生活更轻松：

[http://www.cssreset.com/](http://www.cssreset.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T22:53:12.390

这会将您的网站扩展到设备

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"> 
```

下面的两行用于用户将您的网站添加到其 iOS 设备的主页时。第一行是当他们单击添加的图标时，它不会在 safari 中打开，第二行定义当他们从主页打开您的网站时状态栏（带有电池指示器和时间的栏）颜色。

```
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black"> 
```

更多信息在这里：http: [//developer.apple.com/library/safari/documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html](http://developer.apple.com/library/safari/documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html)

# c - 传递“正常”二维数组以用作**

> ID：11878741
> 
> 赞同：0
> 
> 时间：2012-08-09T07:36:33.990
> 
> 标签：c, arrays, dynamic-allocation

我想这样做，但它不起作用。有可能这样做还是我必须将 A 声明为双指针浮点**？请注意，我需要一个适用于各种数组维度的通用函数，因此我无法更改函数参数。

```
void func(float** arr, int x, int y){
    //access to arr[0][0] for e.g. causes SEGFAULT
}
...
float A[2][2]={{1,0},{0,1}};
func(A, 2, 2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:49:51.220

要将二维数组传递给函数，您需要在编译时至少知道二维中的元素计数。

```
void func(float arr[][2], int n) 
```

如果您在编译时不知道数组的大小，那么您无能为力，除了：

```
void func(float *arr, int n, int m)
{
    // getting arr[i][j] with arr[i*m + j]
}

float A[2][2]={{1,0},{0,1}};
func(&A[0][0], 2, 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:41:34.630

将声明更改`func()`为：

```
void func(float arr[2][2], int x, int y)
{
} 
```

如需进一步阅读，请参阅此答案：[How to pass 2D array (matrix) in a function in C?](https://stackoverflow.com/questions/3911400/passing-2d-arrays)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T07:52:40.010

如果您关心一般性，则需要使其像这样工作：

```
 void func(int** arr, int x, int y)
{
}

int main()
{
  int rows, cols, i;
  int **arr;

  arr = (int**)malloc(rows * sizeof(int*));
  for (i=0; i<rows; i++)
  {
    arr[i] = (int*)malloc(cols * sizeof(int));
  }
  arr[0][0]=1;arr[1][0]=0;arr[0][1]=0;arr[0][1]=1;
  func(arr, rows, cols);

  for (i=0; i<rows; i++)
  {
    free(arr[i]);
  }
  free(arr);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T07:53:32.900

如果你有一个现代的 C 编译器，从 C99 开始，你可以简单地做

```
void func(size_t x, size_t y, float arr[x][y]) {
 // something using arr[i][j] naturally
} 
```

唯一的限制是大小必须在参数列表中使用*之前出现。*

然后，在调用端，您可以使用以下内容来避免将动态矩阵分配为`auto`变量：

```
float (*A)[x0] = malloc(sizeof(float[x0][y0]);
...
func(x0, y0, A);
...
free(A) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T07:43:52.180

二维数组不等于`**`. 作为一项规则，您可以剥离一个间接“层”，并将其替换为`[]`. 因此类似的东西`float *A[]`等价于`float **A`. 请注意，您也只能有一个未定义大小的数组维度；因此`float[2][]`可以，而`float[][]`不是。

您需要将 func 更改为类似`void func(float *arr[2], ...)`or的东西`void func(float arr[2][], ...)`。

# c# - 在 C# 中将 xml 转换为动态对象

> ID：11878749
> 
> 赞同：0
> 
> 时间：2012-08-09T07:36:57.627
> 
> 标签：c#, asp.net, xml

在我的网络应用程序中，当像这样在网络浏览器上显示时，我得到了 xml 的结果

```
<Responses>
<Response0>
    <Action>sendMessage</Action>
    <Data>
        <AcceptReport>
            <StatusCode>0</StatusCode>
            <StatusText>Message accepted for delivery</StatusText>
            <MessageID>89c8011c-e291-44c3-ac72-cd35c76cb29d</MessageID>
            <Recipient>+85568922903</Recipient>
        </AcceptReport>
    </Data>
</Response0>
</Responses> 
```

我希望上面的 XML 文件显示为如下文本：

```
Message accepted for delivery
Message ID: IEUHSHIL
Recipient: +441234567 
```

如何将 xml 文件转换为上面的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:37:59.527

**编辑**

*源代码*

```
XDocument doc = XDocument.Parse("<Responses> <Response0>     <Action>sendMessage</Action>     <Data>         <AcceptReport>             <StatusCode>0</StatusCode>             <StatusText>Message accepted for delivery</StatusText>             <MessageID>89c8011c-e291-44c3-ac72-cd35c76cb29d</MessageID>             <Recipient>+85568922903</Recipient>         </AcceptReport>     </Data> </Response0> </Responses> ");

var message = from item in doc.Descendants("AcceptReport")
               select new { 
                    StatusText = item.Element("StatusText").Value,
                    MessageID = item.Element("MessageID").Value,
                    Recipient = item.Element("Recipient").Value 
               };
foreach (var el in message)
{
    Console.WriteLine(el.MessageID + " " +el.Recipient + " " + el.StatusText);
} 
```

注意：`XDocument.Parse`如果您传递的是字符串而不是 xml 文件，请使用。

* * *

使用`Linq To XML`.

检查那里：[**使用 LINQ to XML 读取 XML 文档**](http://www.mssqltips.com/sqlservertip/1524/reading-xml-documents-using-linq-to-xml/)

不确定，但像这样

```
var message=  
              from item in XElement.Load("message.xml").Descendants("Data") 
                 select new
                 {
                      StatusText= item.Element("StatusText").Value,
                      MessageID= item.Element("MessageID").Value,
                      Recipient= item.Element("Recipient").Value
                  }; 
```

# php - 计算PHP中SQL结果集中值的出现次数

> ID：11878750
> 
> 赞同：0
> 
> 时间：2012-08-09T07:37:01.150
> 
> 标签：php, mysql, resultset

假设我有一张名字姓氏性别国籍等的人的表。

我想计算男性的数量和女性的数量。

我可以做两个 SQL：

```
SELECT COUNT(id) FROM people WHERE sex = 'male'
SELECT COUNT(id) FROM people WHERE sex = 'female' 
```

但是我可以做一个查询：

```
SELECT * FROM people 
```

然后计算“男性”和“女性”的出现次数？循环遍历整个结果集是唯一的方法吗？

编辑：我问这个的原因是因为性能。我将有多个 JOIN 并且表大小超过 2k 行。而且，我不会只统计性别，还会统计国籍、年龄、语言等很多栏目。

我只是想确保我选择了一种使用最少资源的方法。我不希望查询和 PHP 脚本需要很长时间才能运行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:40:02.063

您可以通过对`sex`列进行分组并使用该`COUNT( )`函数聚合其他列来做到这一点。

```
SELECT   sex, 
         COUNT(*) GenderCount
FROM     people
GROUP BY sex 
```

PS：请将您的专栏名称更改为`Gender`而不是`sex`..呵呵

聚合函数和**[这里](http://www.mysqltutorial.org/mysql-aggregate-functions.aspx)****[的一些附加信息](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:38:48.967

```
select SUM(sex='male') AS countmale, SUM(sex='female') AS countfemale from people 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:38:51.417

要在一行中获得输出，您可以尝试以下操作：

```
SELECT SUM(IF(sex = 'male', 1, 0)) AS male_count,
       SUM(IF(sex = 'female', 1, 0)) AS fe_male_count
FROM people; 
```

要获得多行输出，请尝试以下操作：

```
SELECT sex, COUNT(1) AS cnt
FROM people
GROUP BY sex; 
```

但是我认为`GROUP BY`查询会更快。

# php - CodeIgniter FTP 类创建远程文件

> ID：11878751
> 
> 赞同：0
> 
> 时间：2012-08-09T07:37:06.377
> 
> 标签：php, codeigniter

我们如何从 CodeIgniter FTP 类创建文件到远程 ftp。

我知道目录是如何创建的

$this->ftp->mkdir($path.$name, DIR_WRITE_MODE);

我正在寻找相同的创建文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:04:11.890

你没有。FTP 代表文件传输协议。最简单的解决方案是创建一个（临时）文件，上传它，然后删除本地文件。

# javascript - 为什么我们使用 Javascript 事件

> ID：11878754
> 
> 赞同：-4
> 
> 时间：2012-08-09T07:37:17.717
> 
> 标签：javascript, events

我有一个获取键盘键值的函数。我想知道为什么我们需要在参数中使用事件

```
<form>
Char: <input type="text" id="char" size="15" /> Keycode: <input type="text" id="keycode" size="15" />
</form>

<script type="text/javascript">

var charfield=document.getElementById("char")
charfield.onkeydown=function(event){
//var e=window.event || e
document.getElementById("keycode").value=event.keyCode
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:40:13.973

[不同的浏览器有不同的事件模型](http://www.quirksmode.org/js/events_access.html)。线

```
var e=window.event || e 
```

用于不带事件函数参数的 Internet Explorer。

有关更多信息，请参阅[本文。](http://www.quirksmode.org/js/introevents.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:44:13.423

```
charfield.onkeydown = function(event){ ... } 
```

在这里，**参数** `event`或有时用作的只是**Event 对象**的`e`一个**​​实例**。它是赋予该实例的变量名。**触发**事件时会自动传递给。**`event object``event handler`**

 ******事件对象为事件处理程序**提供了一些有用的属性和方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T10:24:07.680

JS 是*EVENT DRIVEN*，无法访问事件对象将与您的自行车在 F1 比赛：您可以看到比赛（汽车 === 事件）飞过，但您无法接近它们......（抱歉可怕的类比，但你明白了）。
要增加/启用更多的交互性，您必须知道客户端做了什么，以便做出相应的响应。例如，如果用户单击，您可能想知道他在页面上单击的位置。所有这些以及更多内容都可以在事件对象中找到。没有那个，就像去打仗，手无寸铁，双手被绑在背后，蒙着眼睛。

***想一想：在任何其他事件至关重要的编程语言（如 C++、C#、Java、ActionScript ......）中，你不会问同样的问题，任何直接从用户那里获得输入的东西，真的。***

好吧，两个答案（AlphaMale 和 chiborg）都告诉了您事件对象的用途。但是，该行`var e= window.event || e;`不适用于您的情况，因为您将默认运算符弄乱了。试试这个：

```
charfield.onkeydown = function (e)//call parameter e, rather then event
{
    e = e || window.event;//no var, as a parameter, it's already declared, won't set a global
    var key = e.keyCode || e.which;//another default operator here... thx to IE
    //and so on

    if (e.preventDefault)
    {
        e.preventDefault();
        e.stopPropagation();
        return false;
    }
    e.returnValue = false;
    e.cancelBubble = true;
}; 
```

因此，这里有一小部分您可以（并且经常会）在事件对象上使用的方法。

`e = e || window.event;`与`e = e !== undefined ? e : window.event;`由于 IE 不将事件对象传递给处理程序相同，因此您必须自己获取它（它是全局对象的属性，因此是`window.`）。为什么这对您不起作用是因为您为 JS 引擎提供了`window.event`（仅限 IE）和之间的选择`e`，您声明的是实际事件对象存储在`event`参数中。你应该写`event = event || window.event;`

第二行`var key = e.keyCode || e.which;`获取按下的键的键码，IE 和 W3C 再次同意不同意该属性的名称。事实上，他们一直都同意的只有 1 个属性：`type`。[这里还有一些属性](http://www.quirksmode.org/js/events_properties.html)

最后，我调用了一些方法来阻止/阻止事件。假设您要一个电话号码，而用户开始输入文本。使用任何`onkey*`你可以接受的事件，并使用`preventDefault`方法`stopPropagation`来阻止输入被*接受*。（除此之外还有更多内容，但我现在不打算讨论）。
大多数浏览器都有这些方法，但是 IE 有一个不同的事件模型，所有这些都[在这里详细阅读它](http://www.quirksmode.org/js/events_order.html)`returnValue`随之而来的是在 IE:和属性的轨道上停止事件的不同方式`cancelBubble`，后者特别烦人，因为如果您**不想要某些东西，则将其设置为true**发生......但这只是我的意见。

您可以使用 event 参数做更多事情，但简而言之 - 再次 - JS 是*EVENT* DRIVEN ，无法访问事件对象会让你瘫痪......****

# c - 堆溢出问题 - 可以覆盖块头，Corrupt Free()，但程序不会崩溃

> ID：11878755
> 
> 赞同：1
> 
> 时间：2012-08-09T07:37:19.357
> 
> 标签：c, ubuntu, security, heap-memory

我一直在研究计算机漏洞，并且已经在这个问题上工作了无数个小时。我似乎无法让堆正确溢出。尽管 glibc 检测到内存损坏，但在禁用 MALLOC_CHECK_ 后，我的程序会正确执行并退出，就好像覆盖块头无关紧要一样。我正在运行 Kubuntu 12.04。

该练习来自“The Shellcoder's Handbook, 2nd Edition”，也出现在 Heap Overflow 在线教程中。我已多次按照 T 的说明进行操作，并收到了相同的结果。

这是我的程序的代码：

```
/*basicheap*/
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(int argc, char ** argv){

    char *buf;
    char *buf2;

buf=(char*)malloc(1024);
buf2=(char*)malloc(1024);
printf("buf=%p buf2=%p\n", buf, buf2);
strcpy(buf,argv[1]);
free(buf2);
free(buf);
} 
```

当我使用 glibc 写入缓冲区时：

```
xxx@xxx-xxx:~/CProgs$ ./basicheap $(perl -e 'print "A"x1028')
buf=0x9356718 buf2=0x9356b20
*** glibc detected *** ./basicheap: double free or corruption (!prev): 0x09356b20 ***
======= Backtrace: =========
[0x804abff]
[0x8048f4a]
[0x80490d6]
[0x8048e29]
======= Memory map: ========
08048000-080ec000 r-xp 00000000 08:07 6816172    /home/xxx/CProgs/basicheap
080ec000-080ee000 rw-p 000a3000 08:07 6816172    /home/xxx/CProgs/basicheap
080ee000-080f0000 rw-p 00000000 00:00 0 
09355000-09377000 rw-p 00000000 00:00 0          [heap]
b772a000-b772c000 rw-p 00000000 00:00 0 
b772c000-b772d000 r-xp 00000000 00:00 0          [vdso]
bfc14000-bfc36000 rw-p 00000000 00:00 0          [stack]
Aborted (core dumped)
xxx@xxx-xxx:~/CProgs$ 
```

当我在关闭 glibc 的情况下写入缓冲区时：

```
xxx@xxx-xxx:~/CProgs$ MALLOC_CHECK_=0 ./basicheap $(perl -e 'print "A"x1028')
buf=0xa077718 buf2=0xa077b20
xxx@xxx-xxx:~/CProgs$ 
```

没有覆盖的 Chunk 标头的 GDB：

```
(gdb) run $(perl -e 'print "A"x1024')
Starting program: /home/xxx/CProgs/basicheap $(perl -e 'print "A"x1024')
buf=0x80f1718 buf2=0x80f1b20

Breakpoint 1, main (argc=2, argv=0xbfffedf4) at basicheap.c:16
16      free(buf2);
(gdb) x/x buf2-4
0x80f1b1c:      0x00000409
(gdb) x/x buf2-8
0x80f1b18:      0x00000000
(gdb) x/x buf2-12
0x80f1b14:      0x41414141
(gdb) 
```

带有覆盖的块头的 GDB：

```
(gdb) run $(perl -e 'print "A"x1032')
Starting program: /home/xxx/CProgs/basicheap $(perl -e 'print "A"x1032')
buf=0x80f1718 buf2=0x80f1b20

Breakpoint 1, main (argc=2, argv=0xbfffede4) at basicheap.c:16
16      free(buf2);
(gdb) x/x buf2-4
0x80f1b1c:      0x41414141
(gdb) x/x buf2-8
0x80f1b18:      0x41414141
(gdb) x/x buf2-12
0x80f1b14:      0x41414141
(gdb) 
```

两次程序都正常退出。我错过了什么？他们是否改变了堆在最新版本的 Ubuntu 上的工作方式？任何帮助将不胜感激！

更新：我在 gdb 中逐步完成了程序集，发现我的程序进入了函数 free_check() 和函数 mem2chunk_check()。

在 mem2chunk_check() 函数中，我覆盖的值在 ESI 寄存器中被拾取，EDI 寄存器指向该值的地址。我看到它对我在 ESI 中的值所做的唯一一件事就是减去 1，然后转储该值。

经过多次谷歌搜索后，我无法找到有关 mem2chunk_check() 函数的任何文档。

这些堆溢出在现代系统上是否已经过时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:11:49.870

在过去几年中，供应商默认使用任何内存操作功能的“强化”版本。例如，你得到'builtin_memset_chk'而不是memset，而不是strcpy，你得到'strcpy_chk'

为了使您的简单溢出程序正常工作，您必须使用以下内容构建程序：

```
-fno-stack-protector -D_FORTIFY_SOURCE=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:17:48.220

首先，现在，Linux 中的堆利用非常困难。好吧，如果它们溢出，很容易覆盖不同的缓冲区，但难的是执行任意代码。

如果你想知道堆利用的内部工作原理，你应该阅读我在这篇文章中提到的论文：[使用堆溢出来写入任意数据](https://stackoverflow.com/questions/9646608/use-a-heap-overflow-to-write-arbitrary-data)

一旦你理解了这些概念，我会警告你说 malloc malleficarum 中使用/解释的大多数方法都（默默地）修补了。我不知道这些中的任何一个今天是否仍然有效。

另一方面，如果你真的想提高你的知识，我建议你下载 ptmalloc 实现（来自[http://www.malloc.de/en/](http://www.malloc.de/en/)），它是基于 Linux 中分配器的一个，编译它（“make shared”，添加“-g”标志也很有用）并使用 LD_PRELOAD 加载它。这样，您将能够使用 gdb 一步一步地调试 malloc 代码。

祝你好运！

# php - While 循环使用单个 Div 包装值

> ID：11878759
> 
> 赞同：2
> 
> 时间：2012-08-09T07:37:35.567
> 
> 标签：php, while-loop

尝试使用 While 循环从数据库打印帖子，无法将所有帖子包装在单个 DIV 标记中。

代码：

```
 <?php 
   $sql="select posts from coder where 1=1 ";     
   $result= mysql_query($sql);
    while($row=mysql_fetch_array($result))
    { 
    ?>
<div> -------- Wrapper DIV Starts                               

<span><?php echo $row['1']; ?></span> ------ loop and print all post inside Wrapper DIV

</div> -------- Wrapper DIV Ends

<?php } ?> 
```

需要输出为：

```
<div>
posts
posts
posts
posts
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:39:11.230

```
<?php 
   $sql="select posts from coder where 1=1 ";     
   $result= mysql_query($sql);
?>
<div> -------- Wrapper DIV Starts  
<?php  while($row=mysql_fetch_array($result)) { ?>
           <span><?php echo $row['1']; ?></span> ------ loop and print all post inside Wrapper DIV
<?php  } ?>

</div> -------- Wrapper DIV Ends 
```

请试试这个

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:40:49.307

```
<?php  
   $sql="select posts from coder where 1=1 ";      
   $result= mysql_query($sql); 
   echo '<div>';
   while($row=mysql_fetch_array($result)) 
    {  
?> 

<span><?php echo $row['posts']; ?></span>

<?php 
    }
    echo '</div>';
?> 
```

# ios - 我怎样才能像这样格式化坐标？

> ID：11878760
> 
> 赞同：2
> 
> 时间：2012-08-09T07:37:35.330
> 
> 标签：ios, format, coordinates, degrees

我需要像这样格式化我的坐标：

```
N 61° 14.5919'
E 23° 28.1751' 
```

现在我的坐标如下所示：

```
61.145919
23.281751 
```

我的代码：

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
    latitudeLabel.text = [NSString stringWithFormat:@"%f", newLocation.coordinate.latitude];
    longitudeLabel.text = [NSString stringWithFormat:@"%f", newLocation.coordinate.longitude];   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:42:52.610

这个现有的问题似乎有关于如何最好地解决的建议，还有一个可以为你做的库： [将十进制坐标转换为度、分、秒、方向](https://stackoverflow.com/questions/8851816/convert-decimal-coordinate-into-degrees-minutes-seconds-direction)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:53:04.503

这并不容易。

在您的示例中，您有北纬 61 度和 14.5919 分钟，没有秒。（秒以分钟中的小数表示。）

您必须将分钟转换为厘度。

61 + 14.5919/60 将导致 61.31983 。

您将不得不考虑 S 对纬度产生负值，而 W 对经度产生负值。
您的示例恰好具有 N 和 E 坐标，这适用于正值。但你不能认为这是理所当然的。如果你想要一些通用的解决方案，至少不是这样。

所以对于纬度：如果值 >= 0，则为 N，否则为 S。您可以截断度数的后逗号值并添加°。然后取余数乘以 60 并将其用作分钟并添加 th '。

.145919 * 60 = 8.75514 - 这是此示例的分钟值。它应该导致 N 61° 8.75514'

由于您的问题与编程问题无关，而是与背后的数学有关，因此我会让您从那里开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-07T10:43:01.960

请参考以下代码

```
int degreesLat = marker.position.latitude;
double decimalLat = fabs(marker.position.latitude-degreesLat);
int minutesLat = decimalLat*60;
double secondsLat = decimalLat*3600 - minutesLat*60; 
```

# c# - 与 WindowsXP 中重叠 .Net 控件相关的问题

> ID：11878761
> 
> 赞同：0
> 
> 时间：2012-08-09T07:37:37.233
> 
> 标签：c#, .net, vb.net

我在 Windows 7 的 .Net2010 中开发了一个 Windows 应用程序，Windows 窗体和控件在 Windows 7 中看起来很完美，但在 WindowsXP 中，包含在 Textbox 中的文本隐藏了 Label 和 Textbox 之间的第一个字符重叠，如下图所示：

![在此处输入图像描述](../Images/575d3f984b7ce3b5e210e2a3acf1ca45.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:42:01.320

用于为每个 TextBox 和 ComboBox 控件提供标题的 Label 控件延伸到 TextBox 和 ComboBox 控件的顶部。它们的背景颜色与您的表单相同（棕灰色）。

一种可能的解决方案是更改控件的 Z 顺序，以便 Label 控件始终在后台。控件仍将重叠，但 TextBox 和 ComboBox 控件将与 Label 控件重叠，而不是相反。

只要标签控件上没有*文本*被掩盖，这将正常工作。这不太可能，你当然指望它。相反，您需要重新设计表单，以便控件之间有足够的额外空间。你不能把东西塞得那么近，否则就没有任何扩展的空间，他们别无选择，只能重叠。

移动控件并给他们一些喘息的空间。恰当命名的`Padding`属性对此非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:44:29.667

你可以用`TableLayoutPanel`一个好的方式来放置你的控件 [去这里阅读它](http://blogs.msdn.com/b/jpricket/archive/2006/04/05/winforms-autolayout-basics-tablelayoutpanel.aspx)。

有了这个，您可以使用这些控件`Docking`的`Anchoring`属性来随着空间的变化而扩大或缩小它们。

# android - ViewFlipper 动画

> ID：11878762
> 
> 赞同：0
> 
> 时间：2012-08-09T07:37:37.607
> 
> 标签：android

我有一个`ViewFlipper`包含两个布局。这两种布局各只有一个`ImageView`。当我在这两个布局之间滚动时有一个动画，但是在我抬起手指之前动画没有触发，这是因为：

```
 case MotionEvent.ACTION_UP:
   //do animation 
```

如何修改我的代码，以便在我握住手指并从左向右滑动时触发动画，反之亦然？

用于制作动画的代码片段：

```
 @Override
    public boolean onTouchEvent(MotionEvent touchevent) {
        switch (touchevent.getAction())
        {
            case MotionEvent.ACTION_DOWN:
            {
                oldTouchValue = touchevent.getX();
                break;
            }
            case MotionEvent.ACTION_UP:
            {
                //if(this.searchOk==false) return false;
                float currentX = touchevent.getX();
                if (oldTouchValue < currentX)
                {
                   vf.setInAnimation(inFromLeftAnimation());
                   vf.setOutAnimation(outToRightAnimation());
                    vf.showNext();
                }
                if (oldTouchValue > currentX)
                {
                    vf.setInAnimation(inFromRightAnimation());
                    vf.setOutAnimation(outToLeftAnimation());
                    vf.showPrevious();
                }
            break;
            }
        }
        return false;
    }

    //for the previous movement
    public static Animation inFromRightAnimation() {

        Animation inFromRight = new TranslateAnimation(
        Animation.RELATIVE_TO_PARENT,  +1.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
        Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
        );
        inFromRight.setDuration(250);
        inFromRight.setInterpolator(new AccelerateInterpolator());
        return inFromRight;
        }
    public static Animation outToLeftAnimation() {
        Animation outtoLeft = new TranslateAnimation(
         Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  -1.0f,
         Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
        );
        outtoLeft.setDuration(250);
        outtoLeft.setInterpolator(new AccelerateInterpolator());
        return outtoLeft;
        }    
    // for the next movement
    public static Animation inFromLeftAnimation() {
        Animation inFromLeft = new TranslateAnimation(
        Animation.RELATIVE_TO_PARENT,  -1.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
        Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
        );
        inFromLeft.setDuration(250);
        inFromLeft.setInterpolator(new AccelerateInterpolator());
        return inFromLeft;
        }
    public static Animation outToRightAnimation() {
        Animation outtoRight = new TranslateAnimation(
         Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  +1.0f,
         Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
        );
        outtoRight.setDuration(250);
        outtoRight.setInterpolator(new AccelerateInterpolator());
        return outtoRight;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:50:26.703

如果我没记错的话，你需要 ACTION_MOVE 事件。试试下面的代码。希望能帮助到你。

```
if(event.getAction() == MotionEvent.ACTION_DOWN)
{
     isDown = false;            
}
if(event.getAction() == MotionEvent.ACTION_UP)
{
     isDown = true;        
}
if(event.getAction() == MotionEvent.ACTION_MOVE && !isDown)
{
    // action you want to perform
} 
```

您可以使用的另一件事是 GestureDetector

设置手势事件：

```
final GestureDetector gestureDetector = new GestureDetector(new MyGestureDetector());

    View.OnTouchListener gestureListener = new View.OnTouchListener() 
    {
        public boolean onTouch(View v, MotionEvent event) 
        {
            if (gestureDetector.onTouchEvent(event)) 
            {
                return true;
            }
            return false;
        }
    }; 
```

手势监听类：

```
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;

class MyGestureDetector extends SimpleOnGestureListener 
{
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        try 
        {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;
            // right to left swipe
            if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) 
            {                   
                analogflipper.setInAnimation(slideLeftIn);
                analogflipper.setOutAnimation(slideLeftOut);                    

                analogflipper.showNext();

            }  
            else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) 
            {                       
                analogflipper.setInAnimation(slideRightIn);
                analogflipper.setOutAnimation(slideRightOut);

                analogflipper.showPrevious();

            }
        } 
        catch (Exception e) 
        {
            System.out.println("Exception...");
        }
        return false;
    }
} 
```

# image-processing - cvRemap 替换 cvWarpPerspective

> ID：11878766
> 
> 赞同：0
> 
> 时间：2012-08-09T07:37:58.647
> 
> 标签：image-processing, opencv, emgucv

下面的转换是我想要做的。

对于源图像中的每个瓦片，我知道每个角的坐标，并且我知道输出图像中每个对应角的坐标，所以我可以调用**cvWarpPerspective**对每个瓦片进行扭曲，然后将四边形连接在一起，得到最终的输出图像.

cvRemap可以在一次转换中做到这一点吗**？**如果是，我如何从我必须传递给 cvRemap 函数的坐标构造地图（mapx 和 mapy）？我搜索了 EmguCV 文档，但找不到 cvRemap 示例。

![源图像](../Images/35c61dc6e22f1efb289094b7160f4495.png)

![输出图像](../Images/d4adc721b67c706a32b22e7bd4ecfefc.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T08:39:13.823

我没有使用 emgu 的经验（实际上我对它的评价很低），但我可以解释一下 remap 和 warpPerspective。它可以帮助您在 emgu 中找到相应的功能。

remap 获取输入图片和坐标重定位图，并将其应用于输出。地图存储信息如下：获取像素 (1, 4) 并将其移动到 (3, 5)。地图中未定义的像素用 0 或其他值填充，具体取决于额外参数。请注意，它还使用一些插值来获得平滑的结果。

warpPerspective 采用几何透视变换，在内部计算变换的映射，然后调用 remap() 将其应用于输入。实际上，OpenCV 中的很多函数都使用了 remap，或者可以使用它。warpAffine、镜头校正和其他人构建他们的自定义贴图，然后调用 remap 来应用它们。

透视变换由 3.3 矩阵 H 定义。因此，输入图像中的每个坐标将根据 H 矩阵进行移位：

```
 [ h11 h12 h13 ]    [ x ]
[x' y' 1] = [ h21 h22 h23 ] *  [ y ]
            [ h31 h32 h33 ]    [ 1 ] 
```

warpPerspective 对目标图像中的每个点应用逆变换，以找出源图像中应该移动的像素的位置，并将该信息存储在地图中。

您可以使用该代码并在您的应用程序中创建自定义函数，但我不知道在 C# 中执行此操作有多容易。C++ 本来就是小菜一碟。

最后说明：我使用了术语*map*，尽管 remap() 函数中有两个 map 参数。更令人困惑的是，它们可以具有完全不同的含义。

*   第一个有效组合是 mapx 包含 x 坐标的坐标变换，在一个宽高的图像中，一个通道。mapy 是 y 维度的对应映射。坐标是浮点值，反映了从一幅图像到另一幅图像的坐标变换不完全映射到整数值这一事实。例如，像素 (2, 5) 可以映射到 (3.456, 7.293)

*   第二种可能性是将整数坐标存储在 mapx 中，用于两个通道中的 x 和 y，并在第二个参数 mapy 中保留插值权重表。生成第一种格式通常要容易得多，但第二种格式处理起来更快。要了解 sencod 格式，您应该阅读 OpenCV 源代码，因为它没有任何文档记录。

# c - 反转无界字符串而不检查空字符

> ID：11878768
> 
> 赞同：1
> 
> 时间：2012-08-09T07:38:00.257
> 
> 标签：c, string

最近在一次采访中，我被要求编写一个代码来反转无界字符串而不检查空字符。我不知道字符串的长度，也不能以任何形式使用任何库函数..

* * *

我编写了以下代码（由于多种原因，我知道这是不正确的，一个是我没有用 '\0' 终止字符串，而是用 CTRL+Z 或 CTRL+D 终止它）

* * *

```
while(scanf("%c",arr[i++])!=-1); 
```

* * *

```
for(i--;i>=0;i--)
     puts(arr[i]); 
```

* * *

可能的算法是什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:44:10.623

也许是这样的：

```
void
reverse_print(const char* string) {
    if (*string == 0) {
       return;
    }
    reverse_print(string + 1);
    putchar(*string);
} 
```

或者，从输入中读取字符串：

```
void
reverse_print() {
    char c;
    if (1 != scanf("%c", &c)) {
        return;
    }
    reverse_print();
    putchar(c);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:56:35.737

```
#include <stdio.h>

int main(void)
{
  char* string1 = "This is me the right guy!! understood !!!";
  char* string = string1;
  char *nonstring = "\x01\x05\x0a\x15";
  int len = 0;

  while ((*string ^ nonstring[0]) && (*string ^ nonstring[1])
      && (*string ^ nonstring[2]) && (*string ^ nonstring[3])
      && (*string ^ nonstring[4]))
  {
    len++;
    string++;
  }
  //printf("%d\n", len); 
  while(len)
  {
    printf("%c", string1[--len]);
  } 
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:56:57.530

您似乎正在从输入中读取字符串，并尝试打印它。

您可以只计算字符数，并将其视为普通数组，类似于：

```
int main() { 
int i = 0;
char arr[256];
while(scanf("%c",arr + (i++))!=-1);
for(i = i-1; i+1; i--) putchar(arr[i]);

return 0;
} 
```

如果数组是完全无界的，你必须确保你没有空间不足，如果你是 - 重新分配它。

完成后，您还可以手动添加 NULL 终止符。因为，它没有*检查*它，所以你应该对要求没问题。

# c# - 在启动时检索 wp7 上的自定义背景图像

> ID：11878770
> 
> 赞同：0
> 
> 时间：2012-08-09T07:38:08.547
> 
> 标签：c#, windows-phone-7

我添加了一个按钮（**BackgroundBrowser**）来随机更改我的应用程序的背景。但是当我退出并重新启动应用程序时，用户设置的最后一个图像与当前背景图像不同。我不知道如何检索在我的应用程序中设置的最后一张图片并将其设为当前背景图片。以下是我用来随机更改背景的代码。

```
private void BackgroundBrowser_Click(object sender, RoutedEventArgs e)
    {
        string imguri = "";

        click_count = click_count % 5;
        switch (click_count)
        {
            case 0: imguri = "Image/bg.jpg"; break;
            case 1: imguri = "Image/bg1.jpg"; break;
            case 2: imguri = "Image/bg3.jpg"; break;
            case 3: imguri = "Image/bg2.jpg"; break;
            case 4: imguri = ""; break;
        }
        click_count++;

        var app = Application.Current as App;
        app.appBmp = new BitmapImage(new Uri(imguri, UriKind.Relative));
        ImageBrush imageBrush = new ImageBrush();
        imageBrush.Stretch = Stretch.UniformToFill;
        imageBrush.Opacity = 0.7;
        imageBrush.ImageSource = app.appBmp;
        this.LayoutRoot.Background = imageBrush;
        app.appbrush = imageBrush;
        app.backchanged = true;
    } 
```

有人可以帮忙吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:07:14.350

只需将其保存在隔离存储中即可。例如，保存 uri 字符串（“Images/bg.jpg”），然后当您重新启动应用程序时，检查 IsolatedStorage 中是否有值，读取它，然后相应地设置背景。

[隔离存储](http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/)

# oracle - 在 Oracle 中批量插入大量静态数据

> ID：11878776
> 
> 赞同：0
> 
> 时间：2012-08-09T07:38:45.233
> 
> 标签：oracle, bulkinsert, bulk, bulk-load

我有一个简单的表格，其中有一列数字。我想在其中加载大约 3000 个数字。我想在内存中执行此操作，而不使用 SQL*Loader。我试过

```
INSERT ALL
   INTO t_table (code) VALUES (n1)
   INTO t_table (code) VALUES (n2)
   ...
   ...
   INTO t_table (code) VALUES (n3000)
SELECT * FROM dual 
```

但我在 1000 个值时失败了。我该怎么办 ？SQL*Loader 是唯一的方法吗？我可以`LOAD`只使用 SQL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:18:51.313

大概你有一个初始值`n`。如果是这样，此代码将填充以下`code`值：`n``n+2999`

```
insert into t_table (code)
select (&N + level ) - 1
from dual
connect by level <=3000 
```

此查询使用 SQL*Plus 替换变量来发布 的初始值`n`。其他客户端将需要以不同的方式传递值。

* * *

> “假设我在 c++ 中使用 stl::vector，我应该写什么查询？”

所以当你写`n3000`你真正的意思是`n(3000)`。在 SQL 中使用数组很容易。此示例使用 Oracle 的预定义集合之一，一个 NUMBER 类型的表：

```
declare 
    ids system.number_tbl_type; 
begin
    insert into t_table (code)
    select column_value
    from table ( select ids from dual )
    ; 
end; 
```

至于将 C++ 向量映射到 Oracle 类型，这是一个不同的问题（我无法回答）。

# apache - Apache httpd 重启失败

> ID：11878777
> 
> 赞同：1
> 
> 时间：2012-08-09T07:38:46.610
> 
> 标签：apache

我正在通过此命令“service httpd restart”重新启动我的 apache 服务器并收到以下消息：

> 停止 httpd：[失败] 启动 httpd：[确定]

在问题发生之前，我所做的只是用新的替换旧的数据库文件。该数据库文件将被另一个 php 文件使用。当我进行替换时，我没有停止 httpd。

重启apache服务器失败后，我上网寻找解决方法，尝试了以下方法。

1）试试这个“netstat -lnp | grep httpd”和“lsof -i:80”，看看是否有进程绑定80端口。结果是没有进程。

2）通过这个“rm -f /var/lock/subsys/httpd”删除锁定的subsys，再次重启httpd，结果和上面的消息一样：

```
Stopping httpd:                                            [FAILED]
Starting httpd:                                            [  OK  ] 
```

3）即使我重新启动服务器，它似乎也不起作用

如何解决这个问题？

error_log 显示以下消息：

`[Thu Aug 09 15:10:34 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) [Thu Aug 09 15:10:34 2012] [info] Init: Seeding PRNG with 256 bytes of entropy [Thu Aug 09 15:10:34 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits) [Thu Aug 09 15:10:34 2012] [info] Init: Generating temporary DH parameters (512/1024 bits) [Thu Aug 09 15:10:34 2012] [info] Init: Initializing (virtual) servers for SSL [Thu Aug 09 15:10:34 2012] [info] Server: Apache/2.2.3, Interface: mod_ssl/2.2.3, Library: OpenSSL/0.9.8e-fips-rhel5 [Thu Aug 09 15:10:34 2012] [notice] Digest: generating secret for digest authentication ... [Thu Aug 09 15:10:34 2012] [notice] Digest: done [Thu Aug 09 15:10:34 2012] [debug] util_ldap.c(2052): LDAP merging Shared Cache conf: shm=0x8541df0 rmm=0x8541e20 for VHOST: localhost.localdomain [Thu Aug 09 15:10:34 2012] [info] APR LDAP: Built with OpenLDAP LDAP SDK [Thu Aug 09 15:10:34 2012] [info] LDAP: SSL support available [Thu Aug 09 15:27:26 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) [Thu Aug 09 15:27:26 2012] [info] Init: Seeding PRNG with 256 bytes of entropy [Thu Aug 09 15:27:26 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits) [Thu Aug 09 15:27:26 2012] [info] Init: Generating temporary DH parameters (512/1024 bits) [Thu Aug 09 15:27:26 2012] [info] Init: Initializing (virtual) servers for SSL [Thu Aug 09 15:27:26 2012] [info] Server: Apache/2.2.3, Interface: mod_ssl/2.2.3, Library: OpenSSL/0.9.8e-fips-rhel5 [Thu Aug 09 15:27:26 2012] [notice] Digest: generating secret for digest authentication ... [Thu Aug 09 15:27:26 2012] [notice] Digest: done [Thu Aug 09 15:27:26 2012] [debug] util_ldap.c(2052): LDAP merging Shared Cache conf: shm=0x97f4df0 rmm=0x97f4e20 for VHOST: localhost.localdomain [Thu Aug 09 15:27:26 2012] [info] APR LDAP: Built with OpenLDAP LDAP SDK [Thu Aug 09 15:27:26 2012] [info] LDAP: SSL support available ssl_error_log: [Thu Aug 09 15:10:34 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) [Thu Aug 09 15:10:34 2012] [info] Init: Seeding PRNG with 256 bytes of entropy [Thu Aug 09 15:10:34 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits) [Thu Aug 09 15:10:34 2012] [info] Init: Generating temporary DH parameters (512/1024 bits) [Thu Aug 09 15:10:34 2012] [info] Init: Initializing (virtual) servers for SSL [Thu Aug 09 15:10:34 2012] [info] Server: Apache/2.2.3, Interface: mod_ssl/2.2.3, Library: OpenSSL/0.9.8e-fips-rhel5 [Thu Aug 09 15:10:34 2012] [notice] Digest: generating secret for digest authentication ... [Thu Aug 09 15:10:34 2012] [notice] Digest: done [Thu Aug 09 15:10:34 2012] [debug] util_ldap.c(2052): LDAP merging Shared Cache conf: shm=0x8541df0 rmm=0x8541e20 for VHOST: localhost.localdomain [Thu Aug 09 15:10:34 2012] [info] APR LDAP: Built with OpenLDAP LDAP SDK [Thu Aug 09 15:10:34 2012] [info] LDAP: SSL support available [Thu Aug 09 15:27:26 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) [Thu Aug 09 15:27:26 2012] [info] Init: Seeding PRNG with 256 bytes of entropy [Thu Aug 09 15:27:26 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits) [Thu Aug 09 15:27:26 2012] [info] Init: Generating temporary DH parameters (512/1024 bits) [Thu Aug 09 15:27:26 2012] [info] Init: Initializing (virtual) servers for SSL [Thu Aug 09 15:27:26 2012] [info] Server: Apache/2.2.3, Interface: mod_ssl/2.2.3, Library: OpenSSL/0.9.8e-fips-rhel5 [Thu Aug 09 15:27:26 2012] [notice] Digest: generating secret for digest authentication ... [Thu Aug 09 15:27:26 2012] [notice] Digest: done [Thu Aug 09 15:27:26 2012] [debug] util_ldap.c(2052): LDAP merging Shared Cache conf: shm=0x97f4df0 rmm=0x97f4e20 for VHOST: localhost.localdomain [Thu Aug 09 15:27:26 2012] [info] APR LDAP: Built with OpenLDAP LDAP SDK [Thu Aug 09 15:27:26 2012] [info] LDAP: SSL support available` 谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:45:09.063

您能否在 httpd.conf 文件中启用 LogLevel Debug 并尝试启动该服务。然后，您应该能够在错误日志中获得更多详细信息。顺便说一句，您似乎启用了 SSL，所以很可能不是 80，而是端口 443。如果这是 SSL 的问题 ..您可能可以禁用 SSL，只启用 http 并检查 apache 启动。另外，您的 apache 是否配置为与任何 LDAP 服务器进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T14:07:11.153

对我来说，这适用于 RH Linux：

首先启用超级用户模式：

```
sudo su - 
```

现在转到终端中的 Apache (httpd) 位置：`cd /usr/sbin`

```
To start Apache server:               httpd -k start
To stop Apache server:                httpd -k stop
Check if httpd service is running:    pgrep httpd 
```

希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T10:52:48.917

面临同样的问题，但

```
sudo /etc/init.d/apache2 reload 
```

对我来说很好用

# unix - 排除在 Unix find 命令中没有读取权限的目录

> ID：11878797
> 
> 赞同：0
> 
> 时间：2012-08-09T07:40:15.790
> 
> 标签：unix

我正在运行一个`find`命令来递归搜索文件。每当遇到用户没有读取权限的目录时，`find`就会引发访问错误，这会在脚本运行时导致问题。

有没有一种方法可以将其限制`find`为仅运行脚本的用户具有读取权限的目录？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:53:43.257

您可以使用该标志将运行的用户限制`find`为仅具有读取访问权限的目录，但这不会抑制错误消息，因为它必须调用它以确定目录/文件是否可读。您必须将它们输出或其他东西：`find``-readable``access()`

```
find / -readable 2> /dev/null 
```

# sql-server - SQL Server 中的案例

> ID：11878801
> 
> 赞同：2
> 
> 时间：2012-08-09T07:40:22.650
> 
> 标签：sql-server

```
 SET @Result = @KriteriumTekst + 
               CASE @Operator 
                  WHEN 'LT' THEN '<'
                  WHEN 'GT' THEN '>'
                  WHEN 'NE' THEN '<>'
                  WHEN 'EQ' THEN '='
               + @Verdi + 
               CASE @Tilstand 
                  WHEN 'OG' THEN 'AND'
                  WHEN 'ELLER' THEN 'OR' 
```

该语句未编译，可能是什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:46:59.817

您正在混淆`END`表达式`CASE`：

```
 SET @Result= @KriteriumTekst+CASE @Operator WHEN 'LT' THEN '<'
                                        WHEN 'GT' THEN '>'
                                        WHEN 'NE' THEN '<>'
                                        WHEN 'EQ' THEN '='
                              END

                    +@Verdi+ CASE @Tilstand WHEN 'OG' THEN 'AND'
                                            WHEN 'ELLER' THEN 'OR'
                             END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:48:06.590

正如评论中指出的那样，您的案件需要终止`END`

除此之外，如果`@Operator`是“LT”并且`@Tilstand`是“OG”，你会得到一个看起来像的结果

```
@KriteriumTekst + '<' + @Verdi + 'OG' 
```

给定值`@KriteriumTekst`and `@Verdi`，你可能会得到类似的东西

```
@Result = '1<5OG' 
```

很难看出你想用那个字符串做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:47:02.357

您需要终止 case 语句：

```
SET @Result= @KriteriumTekst+CASE @Operator WHEN 'LT' THEN '<'
                                        WHEN 'GT' THEN '>'
                                        WHEN 'NE' THEN '<>'
                                        WHEN 'EQ' THEN '='
                                        END
                    +@Verdi+ CASE @Tilstand WHEN 'OG' THEN 'AND'
                                            WHEN 'ELLER' THEN 'OR'
                                            END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T07:47:50.660

每个都`CASE`需要`END`关键字（[MSDN 参考](http://msdn.microsoft.com/it-it/library/ms181765.aspx)）：

```
declare @result nvarchar(256)
declare @KriteriumTekst nvarchar(256)
declare @Operator nvarchar(256)
declare @Verdi nvarchar(256)
declare @Tilstand nvarchar(256)

set @KriteriumTekst = 'Tekst '
set @Operator = 'LT'
set @Verdi = 'Verdi '
set @Tilstand = 'OG'
 SET @Result= @KriteriumTekst+CASE @Operator WHEN 'LT' THEN '<'
                                        WHEN 'GT' THEN '>'
                                        WHEN 'NE' THEN '<>'
                                        WHEN 'EQ' THEN '=' END
                    +@Verdi+ CASE @Tilstand WHEN 'OG' THEN 'AND'
                                            WHEN 'ELLER' THEN 'OR' END
select @result 
```

# java - eclipse 不编译项目

> ID：11878805
> 
> 赞同：18
> 
> 时间：2012-08-09T07:40:46.573
> 
> 标签：java, eclipse, build, noclassdeffounderror

我在 Eclipse 中打开了正在运行的项目。意外重新启动 Windows 后，现在当我打开 Eclipse 时，我看到我的项目标有一个小红叉。现在，当我运行 main 方法时，我得到一个`java.lang.NoClassDefFoundError`.

我已经尝试重新启动 eclipse，Project -> Clean，但它并没有解决问题。

当我检查项目目录时，在“目标”文件夹内没有编译的 .class 文件。我尝试构建项目，但无法获取已编译的类文件，这就是错误的原因。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-05-29T18:24:36.767

我在这里尝试了所有解决方案，但这对我有用。

1.  首先，从 Eclipse 中删除项目。

2.  然后，在您的项目文件夹中，删除 eclipse 创建的 2 个文件。它们是隐藏的，但它们被称为 .project 和 .classpath。

3.  最后，将项目重新添加到 eclipse 中，eclipse 将为您的项目重新创建这两个文件和一个新配置。

我的具体问题是它是一个缺少 Java Builder 的项目，因为它认为它是一个 scala 项目。我重置它的唯一方法是删除项目，删除 2 个文件，然后将其重新添加。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T09:36:48.660

也许 Eclipse 的工作区文件已损坏。重新启动 Eclipse 并选择一个新的工作区文件夹（或从菜单中选择切换工作区）。然后将项目文件导入新项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T07:43:48.367

尝试删除运行配置并重新制作。

如果这不起作用，请打开类，按 ctrl+f11 运行。这将迫使 Eclipse 更新其类路径并重建其主要索引。

要删除配置： - 菜单 -> 运行 -> 运行配置。- 选择您的配置 - 按删除或使用删除图标

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-30T17:21:16.487

如果您使用的是 maven，这可能会修复它：右键单击您的项目 -> Maven -> 更新项目..（或 alt + F5），选择您的项目，确保选中“从本地文件系统刷新工作空间资源”并单击行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-12T07:59:17.710

我的 Eclipse 项目有类似的问题，尽管错误看起来略有不同。我将第三方 java 项目导入 Eclipse，选中 Project > Build Automatically，执行 Project > Clean...，在输出 bin 文件夹中没有生成任何类。尝试了不同的选择，没有运气。

我注意到项目名称的左上角有一个红色感叹号。

[![在此处输入图像描述](../Images/6abdaba45cb65149ca5126f9908f2525.png)](https://i.stack.imgur.com/2IYmI.png)

右键单击项目名称，属性 > Java 构建路径，我看到“缺少构建路径条目：cci/src”。手动创建的src文件夹，红色感叹号不见了。做一个Project > clean...，项目编译成功

PS eclipse项目组织不妥，src文件夹下没有代码。我怀疑 src 文件夹在原作者签入时丢失了，因为那里没有代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-26T15:54:10.100

遇到了同样的问题，终于在[这里](https://stackoverflow.com/a/45633889/9064287)找到了光辉的暗示。在我的项目中，有一个 *.scala 文件，Eclipse Neon 与 Scala IDE 不兼容，因此没有 scala 构建器，整个项目也没有构建。

[![项目属性 --> 构建器](../Images/cd0fef023ce65d23525f6e161cfb35c7.png)](https://i.stack.imgur.com/CPklm.png)

从链接的库中删除 Scala 文件和 Scala 包后）项目属性 --> 构建路径 --> 库），然后重新添加 Java Builder（不知道为什么这个丢失了，但[这里有一个有用的帮助关于如何在缺少时添加 Java 构建器](https://solveme.wordpress.com/2009/01/06/eclipse-project-missing-default-java-builder/)），可以构建并再次运行该项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T23:28:03.147

尝试刷新然后清理项目。

# php - 从 XML 中检索 atom:id

> ID：11878809
> 
> 赞同：0
> 
> 时间：2012-08-09T07:41:09.823
> 
> 标签：php, xml

如何`atom:id`从 XML 文档中检索值？

```
<atom:entry xmlns:atom="http://www.w3.org/2005/Atom">
    <atom:id>http://www.google.com/m8/feeds/profiles/domain/mydomain.com/full/test</atom:id>
</atom:entry> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:49:27.533

您可以为此使用 SimpleXML 和 XPath：

```
$xml = <<<XML
<atom:entry xmlns:atom="http://www.w3.org/2005/Atom">
     <atom:id>http://www.google.com/m8/feeds/profiles/domain/mydomain.com/full/test</atom:id>
</atom:entry>
XML;

$xml = new SimpleXMLElement($xml);

$result = $xml->xpath('/atom:entry/atom:id');

foreach ($result as $curResult)
{
    echo __FILE__ . ':' . __LINE__ . '<pre>' . print_r($curResult, 1) . '</pre>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:50:14.583

您可以使用[simple_xml](http://php.net/simple_xml)和[xpath](http://php.net/manual/en/simplexmlelement.xpath.php)查询。像这样：

```
$xml = <<<EOF
<atom:entry xmlns:atom="http://www.w3.org/2005/Atom">
    <atom:id>http://www.google.com/m8/feeds/profiles/domain/mydomain.com/full/test</atom:id>
</atom:entry>
EOF;

$doc = simplexml_load_string($xml);

$el = $doc->xpath('//atom:id');

echo (string)$el[0]; 
```

（显然这没有错误检查和所有）

# activerecord - yii 活动记录连接模型

> ID：11878810
> 
> 赞同：3
> 
> 时间：2012-08-09T07:41:15.207
> 
> 标签：activerecord, join, yii

使用 Yii 框架。

我有 3 个模型。

文章 - 表文章（id，名称）

ArticlesToAuthors - 表articles_to_authors（id、article_id、author_id、类型）

Authors - 表作者（id、name）

我需要为特定的 article_id 获取作者。*，article_to_authors.type。

我试图在 ArticlesToAuthors 模型中建立这样的关系：

```
'authors'  => array(self::HAS_MANY, 'Authors', array('id' => 'author_id'), ), 
```

然后我进行了查询：

```
$authors = ArticlesToAuthors::model()->with('authors')->findAll(array('condition' => 'article_id=2217') );

foreach($authors as $a)
{
     //this is not working
     #var_dump($a->authors->name);
         #var_dump($a->name);

     //this works fine
     foreach($a->authors as $aa)
     {
            var_dump($aa->name);
     }
} 
```

1.  我可以将所有活动记录对象合二为一，而不是在 foreach 中执行 foreach 吗？我需要一个类似于 sql "SELECT atoa. *, a.* FROM `articles_to_authors`atoa LEFT JOIN authors a ON atoa.author_id=a.id WHERE atoa.article_id=:article_id"

2.  我做得对吗？

ps - 对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:33:37.067

看起来您需要以下关系：

在你的`ArticlesToAuthors`桌子上：

```
'author' => array(self::BELONGS_TO, 'Authors', 'author_id'),
'article' => array(self::BELONGS_TO, 'Articles', 'article_id'), 
```

并且，为了完整起见，在您的`Authors`表格中：

```
'articlesToAuthors'  => array(self::HAS_MANY, 'ArticlesToAuthors', array('id' => 'author_id'), ), 
```

这*应该*允许您访问`$a->author->name`. 未经测试，这只是我的想法。

# multithreading - 当我测试新的 32bit-ubuntu-12.04下使用g++4.7.0的c++11的特性

> ID：11878811
> 
> 赞同：2
> 
> 时间：2012-08-09T07:41:14.990
> 
> 标签：multithreading, c++11, ubuntu-12.04, gcc4, virtual-functions

## //test.cpp

```
#include<iostream>
#include<thread>
using namespace std;
void call()
{
    cout<<"hello world"<<endl;
}
int main()
{
    thread t(call);
    t.join();
    return 0;
} 
```

* * *

```
g++-4.7 -std=c++11 test.cpp -o test -pthread 
```

上面编译得很好，但是当我运行 ./test. 我只是收到一条错误消息，上面写着“调用纯虚拟方法，在没有活动异常的情况下终止调用”

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:27:57.217

It is a known bug. see [http://llvm.org/bugs/show_bug.cgi?id=12730](http://llvm.org/bugs/show_bug.cgi?id=12730).

Nobody tried to fix it, sadly.

# zend-framework - Zend_Auth hasIdentity() 带有更多选项

> ID：11878812
> 
> 赞同：0
> 
> 时间：2012-08-09T07:41:17.080
> 
> 标签：zend-framework, roles, identity, zend-auth, zend-acl

我需要你的帮助、知识和支持 :) 我知道，这很多......

在编写身份验证过程时，我发现了如下代码片段：

```
$role = Zend_Auth::getInstance()->hasIdentity() ? 'member' : 'guest'; 
```

hasIdentity() 部分很清楚，但这是什么`? 'member' : 'guest';`意思？

我认为这些是我的角色，这是关于角色之间的遗传，不是吗？

下一个问题是，如果我在 Zend_Acl 中的角色多于“guest”和“member”，例如“guest”、“member-std”、“member-prm”、“ ...“， “行政”？

提前一万谢谢，祝你有快乐的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:49:55.537

这只是用户的简单分类，以启用/禁用某些功能，如评论、评级等。

要将您的用户扩展到更多角色，您可以在用户表中创建一个类型字段或创建角色表并与您的用户表链接。

然后您可以在用户登录时在会话中设置用户角色

# android - 在android中创建一个xml文件，然后从该文件中读取

> ID：11878813
> 
> 赞同：0
> 
> 时间：2012-08-09T07:41:19.200
> 
> 标签：android

朋友我想在我的 android 应用程序中创建一个 xml 文件，我想在其中存储图像变量（稍后我将从资源中获取该图像）、日期、时间和数字。所有这些事情都会在运行时出现。所以我发现很难以 xml 文件的形式保存它们。我也希望再次从这个文件中读取信息。请帮助我。

我得到解决方案的朋友，`http://www.anddev.org/write_a_simple_xml_file_in_the_sd_card_using_xmlserializer-t8350.html`但现在我面临的问题是只有最新的值被最后的值覆盖（我已经使用日期功能对其进行了测试）请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:28:49.067

您可以使用`DOM`API`SAX`来创建和解析 XML 文档。

创建 XML 文档的 DOM 示例：

```
 DocumentBuilderFactory factory=null;
 DocumentBuilder builder=null;
 try {
    //1
    factory=DocumentBuilderFactory.newInstance();
    builder=factory.newDocumentBuilder();

    //2
    Document document=builder.newDocument();

    //3
    document.setXmlVersion("1.0");

    //4
    Node root=document.createElement("Students");

    Element student=document.createElement("Student");
    student.setAttribute("class", "1");
    Element roll=document.createElement("Roll");
    Element name=document.createElement("Name");

    roll.appendChild(document.createTextNode("10"));
    name.appendChild(document.createTextNode("Mr.X"));

    student.appendChild(roll);
    student.appendChild(name);

    root.appendChild(student);

    document.appendChild(root);

       //5
    TransformerFactory transFactory=TransformerFactory.newInstance();
    Transformer trans=transFactory.newTransformer();

    trans.setOutputProperty(OutputKeys.INDENT, "yes");
    trans.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "5");

    trans.transform(new DOMSource(document),new StreamResult("file.xml"));

    } catch (Exception e) {
      System.out.println(e);
    } 
```

读取/解析 XML 文档：

```
DocumentBuilderFactory factory=null;
   DocumentBuilder builder=null;
   Document doc=null;

   try {
    factory=DocumentBuilderFactory.newInstance();
    builder=factory.newDocumentBuilder();

    doc=builder.parse("file.xml");

    Element  root=doc.getDocumentElement(); //root

    NodeList list=root.getChildNodes();

    for(int i=0;i<list.getLength();i++){
    Node node=list.item(i);
    switch(node.getNodeType()){
        case Node.TEXT_NODE:
                  System.out.println("Text Node"); break;
        case Node.ELEMENT_NODE:
            case Node.ATTRIBUTE_NODE:
                  System.out.println("Element Node");
                  NodeList student=node.getChildNodes();
                  if(node.hasAttributes()){
                      System.out.println(node.getAttributes()
                                 .getNamedItem("class").getTextContent());
              }
             for(int j=0;j<student.getLength();j++){
                  Node nd=student.item(j);
                          if(nd.getNodeType()==Node.ELEMENT_NODE){
                            System.out.println(nd.getNodeName() + " " 
                                         + nd.getTextContent());
                            }
             }
             break;
        default:
              System.out.println("Other node");
              break;
           }
         }
    } catch (Exception e) {
         System.out.println(e);
      } 
```

# java - Android-Magento - 如何使用 XML-RPC 获取 Android 中多个产品的详细信息

> ID：11878817
> 
> 赞同：11
> 
> 时间：2012-08-09T07:41:32.630
> 
> 标签：java, android, magento, xml-rpc

如何*`Single Call`*使用 Magento 的 XMLRPC 在 Android 中获取多个产品的详细信息。我能够**`catalog_product.list`**使用 XMLRPC 的函数获取产品列表。

现在，我有了所有产品的**SKU** id。我可以使用该功能获取每个产品的媒体详细信息**`product_media.list`**。

如果假设我有 10 个产品，我必须**`product_media.list`**为每个产品调用 10 次方法，这需要很长时间。

那么，我该如何调用Android中的*`multiCall`*函数**`Magento`**。**`php`**发布了许多调用该函数的教程，*`multiCall`*但我无法在 Android 中模仿。

因此，如果您有类似的代码片段可以让我理解*`multiCall`*功能（**适用于 Android**），请帮助我，以便我可以进一步使用它。
谢谢。

* * *

**`Josua Marcel C`来自答案的PHP 代码示例**：

* * *

```
$session = $client->call('login', array('apiUser', 'apiKey'));
$client->call('call', array($session,'somestuff.method', array('arg1', 'arg2', 'arg3')));  
$client->call('call', array($session, 'somestuff.method', 'arg1'));   
$client->call('call', array($session, 'somestuff.method'));

$client->call('multiCall', 
               array($session,
                  array(
                      array('somestuff.method', 'arg1'),
                      array('somestuff.method', array('arg1', 'arg2')),
                      array('somestuff.method')
                   )
              )
            ); 
```

* * *

我想在Android中模仿上面调用`multiCall()`Magento函数的php代码。

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:52:53.030

经过长时间的研究，我得到了调用**该**方法的**中途解决方案**，但我仍然不知道如何获取变量中**的响应**并使用它。 **`multiCall()``Error`**`Server`****

 ****任何**了解**它的人都可以**编辑**我的**答案**，我将感谢他。

`Code`我使用的是 ：

```
Object[] skuid=new Object[product_list.size()];
Object calling[]=new Object[product_list.size()];

for(int m=0;m<product_list.size();m++)
{
    skuid[m]=new Object[]{product_list.get(m).getp_Sku()};
    calling[m]=new Object[]{"catalog_product_attribute_media.list",skuid[m]};   
}

try 
{
  client.callEx("multiCall",new Object[]{Utils.sessionId,calling});
}
catch (XMLRPCException e) 
{
    e.printStackTrace();
} 
```

# 致谢：

**我已经研究过由 发布的答案** [**`Iain`**](https://stackoverflow.com/questions/11878817/android-magento-how-to-get-the-details-of-multiple-products-in-android-using-xm/12034462#12034462)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T04:01:43.683

## 答案

***由于 android 是基于 java 应用程序，您可以使用它。***

```
package org.apache.xmlrpc;

import java.util.Hashtable;
import java.util.Vector;

public class MultiCall
implements ContextXmlRpcHandler
{
    public Object execute(String method, Vector params, XmlRpcContext context)
            throws Exception
    {
        if ("multicall".equals(method))
        {
            return multicall(params, context);
        }

        throw new NoSuchMethodException("No method '" + method + "' in " + this.getClass().getName());
    }

    public Vector multicall(Vector requests, XmlRpcContext context)
    {
        // The array of calls is passed as a single parameter of type array.
        requests=(Vector)requests.elementAt(0);
        Vector response = new Vector();
        XmlRpcServerRequest request;
        for (int i = 0; i < requests.size(); i++)
        {
            try
            {
                Hashtable call = (Hashtable) requests.elementAt(i);
                request = new XmlRpcRequest((String) call.get("methodName"),
                                            (Vector) call.get("params"));
                Object handler = context.getHandlerMapping().getHandler(request.getMethodName());
                Vector v = new Vector();
                v.addElement(XmlRpcWorker.invokeHandler(handler, request, context));
                response.addElement(v);
            }
            catch (Exception x)
            {
                String message = x.toString();
                int code = (x instanceof XmlRpcException ?
                            ((XmlRpcException) x).code : 0);
                Hashtable h = new Hashtable();
                h.put("faultString", message);
                h.put("faultCode", new Integer(code));
                response.addElement(h);
            }
        }
        return response;
    }
} 
```

[来源](http://www.docjar.org/html/api/org/apache/xmlrpc/MultiCall.java.html)

* * *

既然 Magento 支持 SOAP API，为什么不使用 SOAP API v1？因为 SOAP 很强大。试试看这里[XML-RPC 和 SOAP 有什么区别？](https://stackoverflow.com/questions/80112/whats-the-difference-between-xml-rpc-and-soap)

Soap 消息的解析不包含在 Android 运行时中，因此它并不是很简单。您应该使用外部库。我正在使用 ksoap2。

如果你在[StackOverflow](https://stackoverflow.com/questions/tagged/ksoap2)上搜索，你会看到很多关于如何使用它的示例。例如[这里](http://www.helloandroid.com/tutorials/using-ksoap2-android-and-parsing-output-data)

> 更多参考：[链接1](http://tldp.org/HOWTO/XML-RPC-HOWTO/xmlrpc-howto-interfaces.html) [链接2](http://www.jarfinder.com/index.php/java/info/org.apache.xmlrpc.MultiCall)

## 使用 PHP 的多重调用

```
$client = new Zend_XmlRpc_Client('http://magentohost/api/xmlrpc/');

// If somestuff requires api authentification,
// we should get session token
$session = $client->call('login', array('apiUser', 'apiKey'));

$client->call('call', array($session, 'somestuff.method', array('arg1', 'arg2', 'arg3')));
$client->call('call', array($session, 'somestuff.method', 'arg1'));
$client->call('call', array($session, 'somestuff.method'));
$client->call('multiCall', array($session,
     array(
        array('somestuff.method', 'arg1'),
        array('somestuff.method', array('arg1', 'arg2')),
        array('somestuff.method')
     )
));

// If you don't need the session anymore
$client->call('endSession', array($session)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T08:31:22.737

首先以调用catalog_product.list 的任何方式登录。确保`session`，`client`并`product_ids`拥有正确的价值观。如果您不需要登录这些操作，请设置`session = null`（如果这不起作用，请尝试根本不通过会话:)）。然后：

```
Object[][] calls = new Object[product_ids.length];
for (int i = 0; i < product_ids.length; i++) {
    calls[i] = new Object[] { "product_media.list", product_ids[i] };
}
product_media_ids = client.call("multiCall", new Object[] { session, calls }); 
```

`product_media_ids`那么应该是一个产品图像数组的数组——也就是说，每个元素都是`product_media_ids`来自`product_media.list`.

恐怕代码未经测试。****

# sencha-touch - 如何使用 Sencha Touch 在屏幕中央对齐

> ID：11878831
> 
> 赞同：0
> 
> 时间：2012-08-09T07:42:22.303
> 
> 标签：sencha-touch, extjs

我正在使用 Sencha Touch，目前我正在向视图中添加一些 HTML 代码并在按钮下方。我希望 HTML 代码的内容与按钮一起位于屏幕的中心。

你能建议我怎么做吗？谢谢你的时间

```
Ext.define('Project.view.SettingsSuccess', {
    extend: 'Ext.Panel',
    xtype: 'settingformsuccess',

    config: {
        title: 'Settings',
        iconCls: 'info',
        cls: 'settings-success',
        scrollable: true,
        styleHtmlContent: true,

        items: [
        {
            xtype: 'titlebar',
            docked: 'top',
            title: 'Settings',

            items: [                
            {
                xtype: 'spacer'
            }, 
            {
                text: 'Back',
                ui: 'back'
            }
            ]
        },

        {
            html: [
            '<p>You have successfully authorised.</p>'
            ].join("")
        },

        // Go to Dashboard Button
        {
            xtype:'button',
            text: 'Visit your Home Page',
            ui: 'normal'
        }  
        ]

    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:44:18.313

试试看：

将 Html 内容和按钮打包到一个容器中： http: [//docs.sencha.com/ext-js/4-0/#/api/Ext.container.Container](http://docs.sencha.com/ext-js/4-0/#/api/Ext.container.Container)

将Container放在你想要的地方，见setPosition(..)方法： [http ://docs.sencha.com/ext-js/4-0/source/Component3.html#Ext-Component-method-setPosition](http://docs.sencha.com/ext-js/4-0/source/Component3.html#Ext-Component-method-setPosition)

# javascript - 文本框的 CSS 文本选择覆盖

> ID：11878833
> 
> 赞同：0
> 
> 时间：2012-08-09T07:42:24.200
> 
> 标签：javascript, html, css

我的布局如下：

HTML

```
<div class="Non-Select">
  <div>Title</div>
  <div><input name="title" type="textbox" /></div>
</div> 
```

CSS：

```
Non-Select {
  user-select: none; 
  -khtml-user-select: none; 
  -moz-user-select: none;
} 
```

我希望能够覆盖 Non-Select 类，以便我可以在文本框中选择文本。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:11:47.160

要使文本无法选择，需要了解有*两种*方法。如果我们需要版本 10 之前的 Opera 和 Internet Explorer（在大多数情况下是肯定的））） - 我们需要使用`unselectable`值为`on`.

这里需要注意的是，如果我们将此属性设置*为父*包装器 -`.Non-Select`在这种情况下 - 仍然可以选择子元素的文本 - 在歌剧或 IE 中打开[这个小提琴](http://jsfiddle.net/jxnEb/4/)，最多 9 进行检查。因此，我们需要将此属性添加到**每个不应选择的元素**（如果有许多（或未知数量）可能的子元素，则可能通过 javascript 动态添加）。

要禁用其他浏览器的选择，我们可以使用 css3[`user-select`](http://www.w3.org/TR/2000/WD-css3-userint-20000216#user-select)属性。添加这个 css 的一个很酷的方法是通过`attribute selector`如下方式：

```
[unselectable="on"]{
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none
} 
```

因此 - 在大多数流行的浏览器中，无法选择具有此属性的任何元素上的文本。

第二种方式更短。如果我们不需要 IE 或 Opera - 您的代码必须进行一些小改动才能在 Firefox、Chrome 和 IE10 中运行。

```
.Non-Select {
    -webkit-user-select: none;
    -khtml-user-select: none; 
    -moz-user-select: -moz-none;
    -ms-user-select: none;
    user-select: none; 
}
.Non-Select input {
    -webkit-user-select: text;
    -khtml-user-select: text; 
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text; 
} 
```

注意`-moz-none`我添加的非标准值。如果我们仔细阅读[MDN 上的这个属性，](https://developer.mozilla.org/en-US/docs/CSS/user-select?redirectlocale=en-US&redirectslug=CSS/-moz-user-select)我们会看到 Mozilla 引入了这个非标准版本*来启用子元素的选择*。第二种方法的一个活生生的例子可以在这里看到： - [http://jsfiddle.net/jxnEb/5/](http://jsfiddle.net/jxnEb/5/)

**编辑：**关于 selection也有[类似的问题](https://stackoverflow.com/questions/4448671/making-things-unselectable-in-ie)。请注意接受的答案，其中作者编写了一个函数以`unselectable`递归方式将属性添加到所有子元素。（在你的情况下 -`input`当然应该被过滤）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:05:31.543

您可以覆盖非选择中输入的默认行为。

```
.Non-Select{
  user-select: none; 
  -khtml-user-select: none; 
  -moz-user-select: none;
}
.Non-Select input{
  user-select: text; 
  -khtml-user-select: text; 
  -moz-user-select: text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:46:02.003

使用这个 CSS

```
.Non-Select input {
  user-select: none; 
  -khtml-user-select: none; 
  -moz-user-select: none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:06:11.243

只需像这样修改您的CSS：

```
.Non-Select {
   -webkit-user-select: none;
    -khtml-user-select: none; 
      -moz-user-select: none;
        -o-user-select: none;
           user-select: none; 
} 
```

您忘记了班级名称前的一个点。

这足以达到预期的结果。

# asp.net-mvc-3 - 从网站创建目录

> ID：11878835
> 
> 赞同：0
> 
> 时间：2012-08-09T07:42:39.217
> 
> 标签：asp.net-mvc-3, file-upload, iis-7, permissions, file-permissions

我正在使用 .NET MVC3 创建网站。这将用于在服务器机器上进行一些文件操作。现在我正在开发过程中，所以我在 IIS 上没有它。我正在开发 Visual Studio 2010 的开发服务器。我在 App_Data 文件夹中创建目录时遇到问题。用户需要能够在 App_Data（或适当的地方）中创建文件夹并在这些文件夹中上传文件。所有用户都是我的朋友，所以不存在安全问题。但它说访问被拒绝：/ 我似乎无法找到授予相关权限。当我寻找它时，我发现授予具有读/写权限的“aspnet 机器”用户会这样做，但我的计算机上没有该用户我不知道为什么：/ 我应该将我的应用程序移动到 IIS 到做了？或者还有什么我不知道的 不知道？顺便说一句，我电脑中的所有文件都是只读的，我似乎也无法更改它们：/也许是因为这个。但无论如何，我需要一个解决这个问题的方法。

任何帮助表示赞赏。提前致谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:53:59.937

1.  场景：当你从VS调试你的asp.net应用程序时，你的项目运行在“ASP.NET开发服务器”工具下（这意味着该工具与Visual Studio具有相同的权限，你也可以在托盘中找到它）；
2.  场景：您可以使用 Sysinternals 的 FileMon 并查看文件系统活动；
3.  场景：部署到 IIS 并使用您自己的用户创建新的 AppPool（对 App_Data 目录的高级权限）。

此致。

# iphone - class init using ARC ...使用+便捷方法而不是-init时意外的数组释放

> ID：11878846
> 
> 赞同：0
> 
> 时间：2012-08-09T07:43:21.947
> 
> 标签：iphone, nsmutablearray, nsarray, automatic-ref-counting

这是一个愚蠢的问题，但它让我发疯！

我有一个简单的 ARC 类，它实现了 2 个 NSMutableSet 和 1 个 NSMutableArray。这 3 个变量是私有的，因此它们不会使用 @property 公开，但我知道，默认情况下，类的对象 var 定义为 __strong。

问题是，在未来的某个时间，类方法 -(id)drawObject 在内部访问 NSMutableArray 并且一旦方法访问 _outObjects var，它就会崩溃。因此调试在 init 中初始化的 NSMutableArray 的接缝消失了（我可以在 init 中读取它，它显然是空的，但我无法在 drawObject 中读取它，因为它已被释放。）

问题可以解决，将 init 行从

```
_outObjects = [NSMutableArray arrayWithCapacity:_objects.count]; 
```

至

```
_outObjects = [[NSMutableArray alloc] initWithCapacity:_objects.count]; 
```

但我希望使用 ARC 得到相同的结果！苹果说 + init 方法和 - init 方法在使用 ARC 时是一样的！它应该只改变预处理器完成类的方式。

声明 NSMutableArray *_outObjects; 作为 NSMutableArray __strong *_outObjects; 显然没用，因为它已经默认了。

这里是标题

```
@interface GTGameBag : NSObject {

@protected
    NSMutableSet *_objects; 

    NSMutableSet *_innerObjects;
    NSMutableArray *_outObjects;
}

- (id)initWithObjects:(NSSet*)objects;
- (id)drawObject; 
```

这里是实现

```
- (id)initWithObjects:(NSSet *)objects {
    self = [super init];
    if (self) {
        _objects = [objects mutableCopy];

        _outObjects = [NSMutableArray arrayWithCapacity:_objects.count];
        _innerObjects = [_objects mutableCopy];
    }
    return self;
}

- (id)drawObject {
    id obj = [_innerObjects anyObject];
    [_innerObjects removeObject:obj];
    [_outObjects addObject:obj];

    return obj;
} 
```

在使用 + 和 - 方法分配空数组时，如何使用 ARC 实现这种不同的行为？

先感谢您。加布里埃尔。

# objective-c - iOS，使用 RestKit 进行远程服务器搜索

> ID：11878847
> 
> 赞同：5
> 
> 时间：2012-08-09T07:43:34.073
> 
> 标签：objective-c, ios, search, core-data, restkit

我正在开发一个应用程序，我想在其中对服务器进行远程搜索。我希望 RestKit 将检索到的数据保存到数据库中。我首先执行本地搜索（当前有效），然后我想进行远程搜索，然后用新结果更新表格视图。

我有两个问题，1\. 我的映射应该是什么样子，2\. json 返回一个包含两种不同类型对象的数组。

URL 如下所示：

```
search.json?search=[search string] 
```

它返回的 JSON 如下所示：

```
[
  {
    "event": {
      "id": 2,
      [...]
  },
  {
    "news": {
      "id": 16,
      [...]
  } 
```

其中事件和新闻是两种对象。

在我的应用程序中，我有三个模型，Post（抽象实体和超类）NewsPost（Post 的子类）和 Event（Post 的子类）。

我的映射如下所示：

```
RKManagedObjectMapping* newsMapping = [RKManagedObjectMapping mappingForClass:[NewsPost class] inManagedObjectStore:objectManager.objectStore];   
newsMapping.primaryKeyAttribute = @"newsId";
newsMapping.rootKeyPath = @"news";
[newsMapping mapKeyPath:@"id" toAttribute:@"newsId"];

RKManagedObjectMapping *eventMapping = [RKManagedObjectMapping mappingForClass:[CalendarEvent class] inManagedObjectStore:objectManager.objectStore];
eventMapping.primaryKeyAttribute = @"calendarId";
eventMapping.rootKeyPath = @"calendars";
[eventMapping mapKeyPath:@"id" toAttribute:@"calendarId"];

// These two works. 
[objectManager.mappingProvider setObjectMapping:newsMapping forResourcePathPattern:@"/package_components/1/news"];
[objectManager.mappingProvider setObjectMapping:eventMapping forResourcePathPattern:@"/package_components/1/calendars"];

// I don't know how these should look/work. 
// Since the search word can change
[objectManager.mappingProvider setObjectMapping:eventMapping forResourcePathPattern:@"/package_components/1/search\\.json?search="];
[objectManager.mappingProvider setObjectMapping:newsMapping forResourcePathPattern:@"/package_components/1/search\\.json?search="]; 
```

我的搜索代码如下所示（本地搜索有效）：

```
- (void)setUpSearch
{
    if (self.searchField.text != nil) {

        [self.posts removeAllObjects];
        [self.events removeAllObjects];
        [self.news removeAllObjects];

        // Search predicates.
        // Performs local search.
        NSPredicate *contactNamePredicate = [NSPredicate predicateWithFormat:@"contactName contains[cd] %@", self.searchField.text];
        NSPredicate *contactDepartmentPredicate = [NSPredicate predicateWithFormat:@"contactDepartment contains[cd] %@", self.searchField.text];
        [...]

        NSArray *predicatesArray = [NSArray arrayWithObjects:contactNamePredicate, contactDepartmentPredicate, contactEmailPredicate, contactPhonePredicate, linkPredicate, titlePredicate, nil];

        NSPredicate *predicate = [NSCompoundPredicate orPredicateWithSubpredicates:predicatesArray];

        self.posts = [[Post findAllWithPredicate:predicate] mutableCopy];

        if (self.posts.count != 0) {
            self.noResultsLabel.hidden = YES;
            for (int i = 0; i < self.posts.count; i++) {
                Post * post = [self.posts objectAtIndex:i];
                if (post.calendarEvent == YES) {
                    [self.events addObject:post];
                } else {
                    [self.news addObject:post];
                }
            }
        } 

        // reload the table view
        [self.tableView reloadData];

        [self performRemoteSearch];
    }
}

- (void)search
{    
    [self setUpSearch];
    [self hideKeyboard];
    [self performRemoteSearch];
}

- (void)performRemoteSearch
{
    // Should load the objects from JSON    
    // Note that the searchPath can vary depending on search text. 
    NSString *searchPath = [NSString stringWithFormat:@"/package_components/1/search.json?search=%@", self.searchField.text];
    RKObjectManager *objectManager = [RKObjectManager sharedManager];
    [objectManager loadObjectsAtResourcePath:searchPath delegate:self];
}

- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects
{
    // This never gets called. 

    // Should update my arrays and then update the tableview, but it never gets called. 
    // Instead I get Error Domain=org.restkit.RestKit.ErrorDomain Code=1001 "Could not find an object mapping for keyPath: ''
} 
```

任何关于我应该或可以如何做的提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:04:05.640

我以前没有使用过托管对象，但这里要做的第一件事是通过对象映射和网络请求激活 restkit 日志，这样您就可以检查 restkit 从服务器获取什么以及映射是如何工作的。

```
//This can be added in your app delegate
RKLogConfigureByName("RestKit/Network", RKLogLevelDebug);
RKLogConfigureByName("RestKit/ObjectMapping", RKLogLevelTrace); 
```

其次，根据您的 JSON 和您的搜索路径发生变化，我认为最好使用映射作为键路径而不是资源路径模式。所以你应该尝试按键映射，就像在这个例子中一样：

```
RKObjectMapping* articleMapping = [RKObjectMapping mappingForClass:[Article class]];
[articleMapping mapKeyPath:@"title" toAttribute:@"title"];
[articleMapping mapKeyPath:@"body" toAttribute:@"body"];
[articleMapping mapKeyPath:@"author" toAttribute:@"author"];
[articleMapping mapKeyPath:@"publication_date" toAttribute:@"publicationDate"];

[[RKObjectManager sharedManager].mappingProvider setMapping:articleMapping forKeyPath:@"articles"]; 
```

然后加载您的数据，例如：

```
- (void)loadArticles {
    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/articles" delegate:self];
} 
```

另一种方法是按对象映射，因此 RestKit 检测对象的类型并执行映射，然后您向任何路径发出请求。

如果您有任何问题，请发表评论，我可以根据需要改进我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:40:17.623

我以前从未尝试过用赏金回答问题，让我尝试从最近的一些工作中给出有用的答案=）

**1\. 我的映射应该是什么样子**

从您的代码来看，一切看起来都很好。对象有嵌套吗？您是否需要序列化才能发回服务器？

**2\. json 返回一个包含两种不同对象的数组。**

您的属性是否相同（即事件有标题，事件有日期）没有意外？如果没有，您必须使用`dynamic nesting`.

如果资源路径（即您的搜索路径）接收到具有不同对象的集合（您的情况），则必须使用`dynamic object mapping`来加载对象。

由于您可以编辑 JSON 结构，因此利用 RestKit 可以使事情变得更简单。

**- 确保 JSON 具有两种不同类型对象的 root_key_path。**

从一个旧的实验和一些谷歌搜索来看，如果它们具有正确的 rootKeyPaths，RestKit 可以正确地将 json 输出映射到不同的对象。生成的 JSON 应该具有如下粗略的结构：

```
{
  "news" : [
    {
      "id" : 1,
      "title" : "Mohawk guy quits"
    },
    {
      "id" : 2,
      "title" : "Obama gets mohawk"
    }
  ],
  "events" : [
    {
      "id" : 1,
      "name" : "testing"
    },
    {
      "id" : 2,
      "name" : "testing again"
    }
  ]
} 
```

我不能确定以上 100% 是正确的。您可以通过让您的 API 仅返回新闻（如果有效）进行试验，然后将事件数据添加到组合中。

**- 从服务器加载对象**

```
// Make a NS dictionary and use stringByAppendingQueryParameters

NSDictionary *searchParams = [NSDictionary dictionaryWithKeysAndObjects:
                                @"query",@"myQuery", 
                                @"location",@"1.394168,103.895473",
                                nil];

[[RKObjectManager sharedManager] loadObjectsAtResourcePath:[@"/path/to/resource.json"  stringByAppendingQueryParameters:searchParams] delegate:objectLoaderDelegate]; 
```

**- 在您的 objectLoader Delegate 中处理“真实”搜索**

如果可行，则应将对象映射到您的 Coredata 实体。您可以使用上面发布的方法执行本地搜索`NSPredicate`。

我更喜欢 RestKit 用来`loadObjects...`从服务器获取数据并映射它的设计模式，其余的处理在本地完成。这种解耦使事情变得更像“应用程序”。您可以使用 NSPredicates 进行其他形式的操作。

```
- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects { 
  // Do some processing here on the array of returned objects or cede control to a method that 
  // you've built for the search, like the above method.
} 
```

例如，如果搜索用例是附近的餐馆，那么加载当前纬度/经度范围内的所有餐馆，然后使用 Coredata 按名称执行本地过滤可能是有意义的。你的服务器会让你心动。

让我知道，我会尝试进一步改进答案。

# ruby-on-rails - 需要帮助遍历嵌套哈希

> ID：11878851
> 
> 赞同：0
> 
> 时间：2012-08-09T07:43:50.410
> 
> 标签：ruby-on-rails, ruby, ancestry

请原谅我的无知，我是 Ruby 新手，但不是编程新手。我正在使用一个名为 Ancestry 的 gem 在我的应用程序中存储分层数据。他们有一个名为“descendants”的方法，它返回一个节点中所有下降的子节点、孙子节点等的嵌套哈希，但是我很难尝试遍历每个节点并输出所有子节点。

这是数据结构的样子

```
{
  #<Forum id: 16, name: "Parent 1", ancestry: "7", display_order: 1> =>{}, 
  #<Forum id: 17, name: "Parent 2", ancestry: "7", display_order: 2> =>{}, 
  #<Forum id: 13, name: "Parent 3", ancestry: "7", display_order: 3> =>
  {
    #<Forum id: 14, name: "Child 1", ancestry: "7/13", display_order: 1> =>{}, 
    #<Forum id: 15, name: "Child 2", ancestry: "7/13", display_order: 2> =>
    {
      #<Forum id: 18, name: "Grand Child", ancestry: "7/13/15", display_order: 1> =>{}, 
    }
  }
} 
```

当我使用下面的代码遍历该数据时，父节点是唯一最终呈现到屏幕上的节点。

```
<% forum.descendants.arrange(:order => :display_order).map do |forum,key| %>
  <%= render :partial => 'forum', :locals => {:forum => forum} %>
<% end %> 
```

我怎样才能渲染子节点呢？我知道它们可以通过“key”变量访问，但我不知道如何判断“key”变量何时具有我可以呈现的数据以及如何输出该数据。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:00:53.987

您可以通过执行检查密钥是否为哈希`key.is_a?(Hash)`。

在您的示例中，它将始终评估为 true，因为`{}`它是一个空哈希。您可以检查哈希是否为空`key.empty?`

要遍历嵌套哈希，您可以递归地执行类似这样的操作

```
def display hash
    hash.each do |key, val|
        # print key etc
        if val.is_a?(Hash)
            display val
        else
            # print value or whatever operation you want
        end
    end
end 
```

# iphone - 我有一个像素长度的彩色图像，我想根据新的长度值放大它。

> ID：11878854
> 
> 赞同：0
> 
> 时间：2012-08-09T07:43:53.243
> 
> 标签：iphone, objective-c, ios, uiimage

所以彩色图像长度会动态变化。我将在自定义图表上使用它。什么是最好的解决方案？现在我通过扩展 UIImage 来使用 Resize 类别。提前谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:25:52.873

对于此任务，您可以使用`UIImage` **stretchableImageWithLeftCapWidth:topCapHeight:**的实例方法。认为

```
[imgObj stretchableImageWithLeftCapWidth:4.0f topCapHeight:5.0f]; 
```

此方法调用将从图像的左右 4 像素和从顶部和底部的 5 像素显示，并将在中间重复其余图像。

但在您的情况下，这两个值都**为零**。

# c# - 我可以在没有 oracle 客户端的情况下进行 oracle C# 连接吗？

> ID：11878862
> 
> 赞同：0
> 
> 时间：2012-08-09T07:44:41.687
> 
> 标签：c#, oracle, oracleclient

我想用 C# 进行 oracle 连接，但我希望它没有 oracle 客户端。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:04:39.430

是的。oracle JDBC“THIN”客户端是一个独立的纯 Java 客户端，因此您不需要安装任何本机 Oracle 客户端（SQL*NET 等）。检查[http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html)以了解 Oracle 11，您需要 ojdbc5.jar 或 ojdbc6.jar，具体取决于您使用的是 Java5 还是 Java6 .

如果您使用的是其他版本的 oracle，只需在 Google 上搜索 Oracle 10 驱动程序的“oracle 10g jdbc thin”（搜索时首先点击）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:06:48.087

你只需要驱动程序（jar）。这是示例：

```
Class.forName ("oracle.jdbc.OracleDriver");
Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@//myserver:PORT/SID", "USER", "PASS");
connection = DriverManager.getConnection(url, username, password); 
```

# android - 增加 Android 设备上的 NFC 功率

> ID：11878864
> 
> 赞同：3
> 
> 时间：2012-08-09T07:44:51.577
> 
> 标签：android, nfc

Android 设备上的 NFC 领域相当薄弱。与专用的非接触式阅读器相比，您需要将另一个设备或标签放置在天线的确切位置，否则将无法读取。

有没有办法通过任何代码手段来增加 NFC 芯片的场或功率输出？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:06:31.360

不，没有办法增加射频功率。

# php - 创建时获取会话ID

> ID：11878867
> 
> 赞同：0
> 
> 时间：2012-08-09T07:44:55.473
> 
> 标签：php, session

我正在创建授权。在会话中我想保留用户 ID，但理论上我可以在我的电脑上打开会话文件并将这个 ID 和沙子更改为服务器。所以我想从会话 ID + 我在 md5 中的 ID 创建一些额外的安全密钥，但是当我尝试获取会话 ID 时，`$security_key = session_id($_SESSION['user_id']);`我得到：

> 警告：未知：会话 id 太长或包含非法字符，有效字符为 az、AZ、0-9 和第 0 行未知中的“-” 警告：未知：写入会话数据（文件）失败。请在第 0 行的 Unknown 中验证 session.save_path 的当前设置是否正确 (/Users/Sites/demo/sessions/)

**更新：非常感谢，但我自己解决了。正确的版本 session_id(user_id)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:55:57.327

如果您想创建会话令牌，只需使用以下内容：

```
$_SESSION['token'] = md5(session_id().$_SESSION['user_id'].$_SERVER['HTTP_USER_AGENT'].'randomlol'); 
```

如果您担心有人更改主机上的会话变量，您应该考虑使用会话处理程序将会话变量存储在数据库中。

# iphone - 使用 AVAudioPlayer 获取当前 MP3 文件名

> ID：11878870
> 
> 赞同：2
> 
> 时间：2012-08-09T07:44:58.857
> 
> 标签：iphone, objective-c, ios

我有 AVAudioPlayer 在后台播放一些 MP3。AVAudioPlayer 是跨应用程序共享的单例实例。是否可以一次检测当前正在播放的 MP3 文件名？我在委托中看不到任何方法，有*duration*、*currentTime*但也没有*filename*或类似的东西。

如果此方法失败，我考虑的另一件事是读取 MP3 标签并从中获取曲目名称 - AVAudioPlayer 是否可能？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T09:13:26.413

您可以像这样**在 AVAudioPlayer 中获取当前播放媒体的文件名**：

```
NSString *mediaFileName = [[youAVAudioPlayer.url absoluteString] lastPathComponent]; 
```

注意条件是：**如果音频播放器未使用 URL 初始化，则返回 nil**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:58:58.130

如果您使用 初始化 AVAudioPlayer `url`，则可以读取该属性。AVAudioPlayer 不会读取 MP3 文件中的标签，因此它不会对此有所帮助。

作为从 MP3 获取元数据的一种方式，您可能会发现[AVAsset很有趣。](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAsset_Class/Reference/Reference.html)[快速教程](http://www.arlt.eu/blog/tag/id3/)。

# python - 判断 N 是否为斐波那契数，如果不是，则找出小于 N 的最大斐波那契数

> ID：11878871
> 
> 赞同：-3
> 
> 时间：2012-08-09T07:44:59.283
> 
> 标签：python, math

如何确定给定数字`N`是否为斐波那契数，如果该数字不是斐波那契数，我如何*确定小于的最大斐波那契数`N`？

我通过使用 limit 生成一系列斐波那契数找到了解决方案`N`。

在 Python 中有没有更好的方法来做到这一点？

伙计们在投票时考虑，我已经接受了这里提供的解决方案。我认为这不值得，因为我已经发布了我需要的内容并从你们那里得到了解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:02:56.980

一个整数`N`是否是斐波那契数的简单测试如下：

```
N is a Fibonacci number iff either (5 * n^2 + 4) or (5 * n^2 - 4) is a square number. 
```

有关巧妙证明（第 417 页），请参见此处：[http ://www.fq.math.ca/Scanned/10-4/advanced10-4.pdf](http://www.fq.math.ca/Scanned/10-4/advanced10-4.pdf)

如果事实证明这`N`不是斐波那契数，那么最简单的方法就是不断尝试较小的数字，直到找到一个，尽管对于较大的`N`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:56:39.797

这是一个通用算法：天真的方法是用递归来解决它 - 但就运行时间复杂度而言，它根本没有用。创建一个新数组，我们称之为 FibArr 。将 1,1, 插入到数组中。那么，数组中第 i 个索引的值为 fibArr[i-1]+fibArr[i-2] (i>=3) 在每次迭代中检查是否有新值插入到 fibArr==N 中。如果为真，则返回。否则，检查插入的值是否大于 N。如果为 true ，假设现在 fibArr 有 k 个值，则返回 (k-1) 值。否则，继续迭代:)

*使用 python 更容易做到 - 但请注意，在 python 中没有数组，而是列表。使用 python 更容易，因为您不必像在 java 中那样设置列表长度。

# machine-learning - 从文本中找到的单词进行机器学习

> ID：11878872
> 
> 赞同：2
> 
> 时间：2012-08-09T07:45:05.537
> 
> 标签：machine-learning

我想使用监督机器学习算法根据句子中是否存在单词来预测一组句子的二进制函数（真或假）。

理想情况下，我希望避免对用于决定输出的单词集进行硬编码，以便算法自动学习哪些单词（一起？）最有可能触发特定输出。

[http://shop.oreilly.com/product/9780596529321.do](http://shop.oreilly.com/product/9780596529321.do)（编程集体智能）在第 4 章中有一个很好的部分，标题为“从点击中学习”，它描述了如何通过在神经网络中使用一层隐藏节点来做到这一点每个新的输入词组合都有一个新的隐藏节点。

同样，可以为训练数据集中的每个单词创建一个特征，并使用这些特征训练几乎任何经典的机器学习算法。添加新的训练数据会产生新的特征，这需要我从头开始重新训练算法。

这让我想到了我的问题：

*   如果在扩展训练数据集时我必须从头开始重新训练所有内容，这实际上是个问题吗？
*   什么样的算法会更有经验的机器学习用户推荐用于此类问题？
*   我应该使用什么标准来选择一个算法而不是另一个？（除了实际尝试所有这些，看看哪个在精度/召回指标上表现更好）
*   如果您曾研究过类似的问题，那么使用 2-gram 扩展功能怎么样（如果存在特定的 2-gram，则为 1，如果不存在，则为 0）？3 克 ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:09:49.953

如果您想找到通常一起找到的单词，您可以查看主题建模的一般领域。

最简单的方法是使用潜在语义分析（[http://en.wikipedia.org/wiki/Latent_semantic_analysis](http://en.wikipedia.org/wiki/Latent_semantic_analysis)），它只是将 SVD 应用于术语文档矩阵。然后，您需要进行一些额外的事后分​​析以适应您的特定结果。

一个更复杂、更复杂的方法是使用潜在狄利克雷分配（[http://en.wikipedia.org/wiki/Latent_Dirichlet_allocation](http://en.wikipedia.org/wiki/Latent_Dirichlet_allocation)）

只要您要重新训练，只需添加新功能（单词）就可以了。您还可以使用 TF/IDF 在表示矩阵时为该特定单词赋予一个值（而不仅仅是 1 或 0）。

我不知道您尝试使用哪种编程语言来执行此操作，但我知道 Java 和 Pythont 中有库可以完成上述所有操作。

# jquery - 如何去除黄色行高亮

> ID：11878874
> 
> 赞同：0
> 
> 时间：2012-08-09T07:45:11.677
> 
> 标签：jquery, css, jqgrid

我在应用程序中使用 jqGrid，我想使用我自己的样式。第一步是我想删除当我单击一行时 jqGrid css 具有的黄色突出显示。我试图找到它，但没有成功。如果有人知道如何关闭突出显示，请告诉我。另请提及我必须在哪个 css 文件中进行更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T08:45:29.330

最好的解决方案是将此代码添加到您的 jqGrid 参数中，而不是更改 css

```
beforeSelectRow: function(rowid, e) {
    return false;
}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T07:56:27.500

在加载您的覆盖样式**后**创建以下 CSS 语句：`jquery.ui.css`

```
.ui-state-highlight, .ui-widget-content .ui-state-highlight, .ui-widget-header .ui-state-highlight
{
    border: 1px solid red !important; // Desirable border color
    background: none !important; // Desirable background color
    color: black !important; // Desirable text color
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:51:23.883

您可以在 jquery-ui.css 文件中编辑此 css。这是`ui-state-highlight`您需要修改的类。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T18:21:19.177

假设我们有两个类，蓝色背景名称为“holdRow”，黄色背景名称为“HighlightHoldRow”，然后使用下面的代码“RowSelect”是在行选择期间调用的方法，

考虑以下代码

```
 .holdRow td {
font-weight : bold !important;
color: Blue !important;
  }

   .higLightholdRow td {
font-weight : bold !important;
color: Yellow !important; 
```

}

```
 var LastRowId = "";
    function RowSelect(id) {
if (Flag == "TRUE") {
    var grid = $('#gvName);
    if (LastRowId != "" && LastRowId != undefined && LastRowId != id) {
        tr = grid[0].rows.namedItem(LastRowId);
        $(tr).removeClass("higLightholdRow");
        $(tr).addClass("holdRow");
        LastRowId = "";
    }
    tr = grid[0].rows.namedItem(id);
    $(tr).removeClass("holdRow");
    $(tr).addClass("higLightholdRow");
    LastRowId = id;

} 
```

}

```
 ClientSideEvents-RowSelect="RowSelect" 
```

选择行时调用 RowSelect 方法，选中行背景为黄色，其余行背景为蓝色

# jquery - 让 JQuery 出现在图片前面

> ID：11878878
> 
> 赞同：1
> 
> 时间：2012-08-09T07:45:36.247
> 
> 标签：jquery, image, photoshop, hidden, slice

所以，我用 Photoshop 切片创建了一个页面，我注意到没有出现 JQuery 代码。我怀疑它隐藏在图像下方，所以我尝试了 z-index 无济于事。

有没有办法让 JQuery 项目出现在图像前面？如果我删除图像的切片，它们确实会出现。

编辑：对此感到抱歉：让我尽可能提供图像和代码示例。

我使用了这个网站的 JQuery 插件：http: [//gristmill.github.com/jquery-popbox/](http://gristmill.github.com/jquery-popbox/)

代码片段，基本上我试图在点击联系人时制作一个模拟弹出联系人框。然而它是这样出现的：http: [//i.stack.imgur.com/YUAhx.png](http://i.stack.imgur.com/YUAhx.png)

```
#tweetspage-07 {
    position:absolute;
    left:564px;
    top:1px;
    width:108px;
    height:59px;
    z-index:-1;

}

 <!--Contacts-->
    <div id="tweetspage-07">

<div class='popbox'>
    <a class='open' href='#'><img src="images/tweetspage_07.png" width="108" height="59" alt=""></a>

          <div class='collapse'>
            <div class='box'>
              <div class='arrow'></div>
              <div class='arrow-border'></div>

              Content in PopBox goes here :)
              <a href="#" class="close">close</a>
            </div>
          </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:43:05.140

给 z-index 一个比当前出现在上面的竞争更高的正值。使 JQuery 项目显示：-块；位置：绝对；

# php - 使用 js 和 php 从数据库中获取信息

> ID：11878881
> 
> 赞同：0
> 
> 时间：2012-08-09T07:45:40.923
> 
> 标签：php, javascript

我真的希望有人能指出我正确的方向，因为我对 js 还很陌生。

我有一个下拉导航菜单，内容如下所示。

```
var anylinkmenu1={divclass:'anylinkmenu', inlinestyle:'', linktarget:''} 
anylinkmenu1.items=[
["Page 2 Subpage 1", "http://kellys-webdesigns.com/mpanetwork/index.php? id=8"],
["Page 2 Subpage 2", "http://kellys-webdesigns.com/mpanetwork/index.php? id=9"],
["Page 2 Subpage 3", "http://kellys-webdesigns.com/mpanetwork/index.php? id=10"],
["Page 2 Subpage 4", "http://kellys-webdesigns.com/mpanetwork/index.php? id=11"],
["Page 2 Subpage 5", "http://kellys-webdesigns.com/mpanetwork/index.php? id=12"],
["Page 2 Subpage 6", "http://kellys-webdesigns.com/mpanetwork/index.php? id=13"],
["Page 2 Subpage 7", "http://kellys-webdesigns.com/mpanetwork/index.php? id=14"],
["Page 2 Subpage 8", "http://kellys-webdesigns.com/mpanetwork/index.php? id=15"] 
]
var anylinkmenu2={divclass:'anylinkmenu', inlinestyle:'', linktarget:''} 
anylinkmenu2.items=[
["Page 3 Subpage 1", "http://kellys-webdesigns.com/mpanetwork/index.php? id=16"],
["Page 3 Subpage 2", "http://kellys-webdesigns.com/mpanetwork/index.php? id=17"],
["Page 3 Subpage 3", "http://kellys-webdesigns.com/mpanetwork/index.php? id=18"],
["Page 3 Subpage 4", "http://kellys-webdesigns.com/mpanetwork/index.php? id=19"],
["Page 3 Subpage 5", "http://kellys-webdesigns.com/mpanetwork/index.php? id=20"],
["Page 3 Subpage 6", "http://kellys-webdesigns.com/mpanetwork/index.php? id=21"],
["Page 3 Subpage 7", "http://kellys-webdesigns.com/mpanetwork/index.php? id=22"],
["Page 3 Subpage 8", "http://kellys-webdesigns.com/mpanetwork/index.php? id=23"] 
] 
```

内容是数据库的一部分，而不是手动将这些值放入我希望它们从数据库中获取，这可能吗？我想我需要使用 php 来实现这一点，并且我的 php 代码没有问题，我只是不确定如何将 js 连接到 php。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:47:39.350

拨打`ajax`电话，获取数据并将其分配给`variables`.

使用`jquery` `library`或类似`library`的 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:57:18.513

PHP 可以编写 javascript 以及 HTML。

以下脚本假定 $menuItems 是数据库中的“title”和“url”数组，并且 $totalItems 是 $menuItems 中的项目数。

$totalItems 是必需的，否则 php 会在最后一个项目的末尾生成一个额外的“，”（逗号），这使得 IE 很适合。

```
<script type="text/javascript">
    var anylinkmenu1={divclass:'anylinkmenu', inlinestyle:'', linktarget:''} 
    anylinkmenu1.items=[
    <?php $index=0;
        foreach ($menuItems as $item): ?>
        ["<?php echo $item["title"]; ?>", "<?php echo $item["url"] ?>"] <?php if ($index-1 > $totalItems) { echo ","; } ?>
    <?php $index += 1; endforeach; ?>
    ]
</script> 
```

# java - Hibernate 抛出 StreamCorruptedException：无效的流标头

> ID：11878884
> 
> 赞同：5
> 
> 时间：2012-08-09T07:45:46.567
> 
> 标签：java, hibernate, serialization, deserialization

我有这样的课，

```
class SampleClass implements Serializable {
    String name;
    Serializable fieldName;
} 
```

另一个类，例如，

```
class AnotherClass implements Serializable {
    SampleClass sampleClass;
} 
```

这两个类都有自己的 getter 和 setter 方法。

在主类中，我`sampleClass`从 getter 函数中获取变量，并尝试使用这些`sampleClass`对象。但是当我使用它时，我遇到了类似的错误，`could not deserialize`.

如何访问成员`SampleClass`，或者我们应该有类型的字段成员`Serializable`？

谢谢。

* * *

编辑：我正在使用休眠，它使用 aemploye 和 aaddress 表之间的多对一关系。

我为上述两个表创建了 Hibernate 配置文件和 net beans 中的逆向工程文件。

然后我生成了 POJO 类。

类和xml是：

`Aaddress.hbm.xml`

```
<hibernate-mapping>
<class name="hibernatetutor.tablebeans.Aaddress" table="aaddress" schema="public">
    <id name="sno" type="int">
        <column name="sno" />
        <generator class="assigned" />
    </id>
    <property name="street" type="serializable">
        <column name="street" />
    </property>
    <set name="aemployes" inverse="true">
        <key>
            <column name="address" />
        </key>
        <one-to-many class="hibernatetutor.tablebeans.Aemploye" />
    </set>
</class> 
```

`Aemploye.hbm.xml`

```
<hibernate-mapping>
<class name="hibernatetutor.tablebeans.Aemploye" table="aemploye" schema="public">
    <id name="id" type="int">
        <column name="id" />
        <generator class="assigned" />
    </id>
    <many-to-one name="aaddress" class="hibernatetutor.tablebeans.Aaddress" fetch="select">
        <column name="address" />
    </many-to-one>
    <property name="name" type="string">
        <column name="name" />
    </property>
</class> 
```

`Aaddress.java`

```
public class Aaddress implements java.io.Serializable {

    private int sno;
    private Serializable street;
    private Set aemployes = new HashSet(0);

    public int getSno() {
        return this.sno;
    }

    public void setSno(int sno) {
        this.sno = sno;
    }

    public Serializable getStreet() {
        return this.street;
    }

    public void setStreet(Serializable street) {
        this.street = street;
    }

    public Set getAemployes() {
        return this.aemployes;
    }

    public void setAemployes(Set aemployes) {
        this.aemployes = aemployes;
    }
} 
```

`Aemploye.java`

```
public class Aemploye implements java.io.Serializable {

    private int id;
    private Aaddress aaddress;
    private String name;

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public Aaddress getAaddress() {
        return this.aaddress;
    }

    public void setAaddress(Aaddress aaddress) {
        this.aaddress = aaddress;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

`Main.java`

```
private void getData() {
    Session session = HibernateUtils.getInstance().openSession();
    Query query = session.createQuery("from Aemploye where id=:id");
    query.setParameter("id", 1);
    Aemploye a = (Aemploye) query.uniqueResult();
    Aaddress a1 = a.getAaddress();
    System.out.println(a1.getStreet());
} 
```

错误是：

```
org.hibernate.type.SerializationException: could not deserialize
    at org.hibernate.util.SerializationHelper.deserialize(SerializationHelper.java:217)
    at org.hibernate.util.SerializationHelper.deserialize(SerializationHelper.java:240)
    at org.hibernate.type.SerializableType.fromBytes(SerializableType.java:82)
    at org.hibernate.type.SerializableType.get(SerializableType.java:39)
    at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:163)
    at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:154)
    at org.hibernate.type.AbstractType.hydrate(AbstractType.java:81)
    at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2096)
    at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1380)
    at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1308)
    at org.hibernate.loader.Loader.getRow(Loader.java:1206)
    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:580)
    at org.hibernate.loader.Loader.doQuery(Loader.java:701)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    at org.hibernate.loader.Loader.loadEntity(Loader.java:1860)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:48)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:42)
    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3044)
    at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:395)
    at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:375)
    at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:139)
    at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:98)
    at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:878)
    at org.hibernate.impl.SessionImpl.immediateLoad(SessionImpl.java:836)
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:66)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:111)
    at org.hibernate.proxy.pojo.cglib.CGLIBLazyInitializer.invoke(CGLIBLazyInitializer.java:150)
    at hibernatetutor.tablebeans.Aaddress$$EnhancerByCGLIB$$44bec229.getStreet(<generated>)
    at hibernatetutor.Main.getData(Main.java:33)
    at hibernatetutor.Main.main(Main.java:24)
Caused by: java.io.StreamCorruptedException: invalid stream header
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:753)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:268)
    at org.hibernate.util.SerializationHelper$CustomObjectInputStream.<init>(SerializationHelper.java:252)
    at org.hibernate.util.SerializationHelper.deserialize(SerializationHelper.java:209)
    ... 29 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:20:16.590

根据问题和评论部分的一些信息，我相信您的麻烦是由以下原因引起的：

出于某种原因，您将 street 属性选择为可序列化类型。在您的表中，该列已定义为类型`TEXT`。Hibernate 可能设法将序列化的数据保存到列中，但数据库可能无法使它们保持不变。因此，在检索时，现在出现乱码的序列化无法反序列化。

*正如 Petr Pudlák 所指出*的，解决方案是让您的映射正确。如果您选择合适的二进制类型，例如`BYTEA`，那么您将能够原封不动地存储二进制数据。然后检索应该工作。

恕我直言，这不是正确的解决方案，首先是在您的 java 代码中选择合适的数据类型。将街道类型设为 Serializable 会让任何查看您的代码的人感到困惑。`String`可能更有意义，并且也非常适合 column type `TEXT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:57:33.690

除非您有一些非常不寻常的框架来执行此操作，否则使用 getter 不涉及序列化。

我建议您查看确切的堆栈跟踪（并将其发布在问题中）并查看异常实际发生的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:58:25.040

我试过你的课，它对我有用：

```
import java.io.*;

class SampleClass implements Serializable {
      String name;
      Serializable fieldName;
}

class AnotherClass implements Serializable {
      SampleClass sampleClass;
}

public class Ser {
    public static void main(String argv[])
        throws Exception
    {
        SampleClass s = new SampleClass();
        s.name = "name";
        s.fieldName = "fieldName";

        AnotherClass a = new AnotherClass();
        a.sampleClass = s;

        // serialize the classes to a byte array
        ByteArrayOutputStream os = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(os);
        oos.writeObject(a);
        oos.close();

        // deserialize the classes from the byte array
        ObjectInputStream is
            = new ObjectInputStream(
                    new ByteArrayInputStream( os.toByteArray() ));
        a = (AnotherClass)is.readObject();
        is.close();

        // print something
        System.out.println(a.sampleClass.name);
    }
} 
```

您可以发布导致问题的确切代码吗？

# iphone - 如何忽略正则表达式中的空格

> ID：11878885
> 
> 赞同：0
> 
> 时间：2012-08-09T07:45:48.697
> 
> 标签：iphone, ios

我是 iPhone 的新手。我对正则表达式有一点疑问，目前我在我的项目中使用正则表达式下面的一个是

```
NSRegularExpression *regularExpression = 
   [NSRegularExpression regularExpressionWithPattern:@"href=\"(.*).zip\"" 
                                             options:NSRegularExpressionCaseInsensitive 
                                               error:&error]; 
```

它搜索网站视图源并给出以下模式的结果

```
href="kjv/36_Zep.zip"
href="kjv/37_Hag.zip" 
```

但查看源中的链接之一如下所示

```
href="kjv/38_Zec.zip        " 
```

我想忽略 .zip 之后的空格，如果有人知道这怎么可能，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:49:23.507

一种方法是用空字符串替换所有空格，或者在该字符串上使用 strip 函数来删除所有尾随空格。参考[Objective-C 中的字符串替换](https://stackoverflow.com/questions/668228/string-replacement-in-objective-c)

如果您不想这样做，请在正则表达式中使用空格模式来匹配一个或多个空格。

`\s`包括`\n(ewline) \r(eturn) \t(tab) \v(ertical tab) \f(orm feed) and space`. 如果您只想使用`""`实际上是空白的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:49:32.250

您可以将您提供的示例与以下正则表达式相匹配...

```
@"href=\"(.+)\.zip\s*\"" 
```

我通过添加修改了您的正则表达式

1) +（匹配 1 个或多个前面的字符）捕获 .zip 之前的整个名称，2) \ 到 . 为了防止它匹配所有字符，3） \s* 匹配（在你的情况下跳过）零个或多个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:51:30.380

我通常使用组来收集我想要的项目。但是，您需要了解组的工作方式。

不幸的是，您无法命名它们。但是这样想。

组以遇到的 () 编号为索引。

0 是整场比赛。

1是第一组()

2 是第二组 () 以此类推。

如果你有一个这样的组。

```
NSString *matchString = @"(href)=\"((.*)[.]zip)\""; 
```

你会有4组。

第 0 组是整个字符串，第 1 组是“href”，第 2 组是整个文件名，第 3 组是不带扩展名的文件名。

希望有帮助。

```
NSRegularExpression *regularExpression = 
   [NSRegularExpression regularExpressionWithPattern:@"href=\"(.*[.]zip)[^\"]*\"" 
                                             options:NSRegularExpressionCaseInsensitive 
                                               error:&error];

NSMutableArray *foundMatches = [NSMutableArray array];

[regex enumerateMatchesInString:originalString 
                        options:0 
                          range:NSMakeRange(0, [originalString length]) 
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                         if (result.numberOfRanges == 2){
                             [foundMatches addObject:[originalString substringWithRange:[result rangeAtIndex:1]]];
                         }
                     }]; 
```

如果文件名中有一个不包含扩展名的 .zip，我在这里使用的匹配会搞砸。

例如 href="my.zip.file.zip" 会将匹配组 2 设为 "my.zip" 而不是 "my.zip.file.zip"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:17:28.447

假设给定一个 NSString *test = @"...href="/functions?q=KEYWORD\x26amp..." 并且您想使用 NSRegularExpression 对该字符串执行操作，您也可以像这样进行简单的方法调用

```
NSTextCheckingResult *result = [testRegex firstMatchInString:[test stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] options:0 range:NSMakeRange(0, [test length])]; 
```

并且不要更改 NSRegularExpression 中的任何内容。

# css - 使用子菜单时保持菜单按钮的悬停状态

> ID：11878887
> 
> 赞同：2
> 
> 时间：2012-08-09T07:46:04.117
> 
> 标签：css, drop-down-menu

我制作了一个 CSS 下拉菜单，当您将鼠标悬停在主菜单按钮上时，它会使用`hover`状态更改背景图像。

但是，如果该人导航到以下下拉选项，则他们当前所在的主菜单按钮自然会失去悬停状态。我过去曾使用`Javascript`过更改类，使其保持相同的背景图像，但想知道有没有办法在没有 Javascript 的情况下做到这一点？

HTML：

```
<div class="navWrapper">
        <div class="left"></div>
        <div class="nav">
            <ul>
                <li class="home"><a href="/">Home</a></li>
                <li class="spacer"></li>
                <li class="about">
                    <a href="about_us/">About Us</a>
                    <ul class="sub">
                        <li><a href="">option 1</a></li>
                    </ul>                        
                </li>
                <!-- About Ends -->
                <li class="spacer"></li>
                <li class="trademark"><a href="freetrademarksearch/">Free Trademark Search</a></li>
                <li class="spacer"></li>
                <li class="services">
                    <a href="services/">Services</a>
                    <ul class="sub">
                        <li><a href="">option 1</a></li>
                        <li><a href="">option 2</a></li>
                    </ul>
                    <!-- Sub Ends -->
                </li>
                <!-- Services Ends -->
                <li class="spacer"></li>
                <li class="testimonials"><a href="testimonials/">Testimonials</a></li>
                <li class="spacer"></li>
                <li class="more">
                    <a href="javascript:void(0);">More Information</a>
                    <ul class="sub">
                        <li><a href="">option 1</a></li>
                        <li><a href="">option 2</a></li>
                    </ul>
                    <!-- Sub Ends -->
                </li>
                <li class="spacer"></li>
                <li class="contact"><a href="contact-us/">Contact Us</a></li>                 
            </ul>
            <div class="contentClear"></div>
        </div>
        <!-- Nav Ends -->
        <div class="right"></div>
    </div>
    <!-- Nav Wrapper Ends --> 
```

CSS：

```
#header .navWrapper {
    width: 1004px;
}

#header .navWrapper .left {
    float: left;
    width: 4px;
    min-width: 4px;
    height: 47px;
    min-height: 47px;
    background: url('../images/nav-left-bg.png') left top no-repeat;
}

#header .navWrapper .nav {
    float: left;
    width: 994px;
    border-top: 1px solid #e0d0b4;
    border-left: 1px solid #e0d0b4;
    border-right: 1px solid #e0d0b4;
    border-bottom: 1px solid #e8dcc8;
    background: url('../images/nav-button-bg.png') left top repeat-x;
}

#header .navWrapper .nav ul {
    margin: 0 1px;
    display: block;
}

#header .navWrapper .nav li {
    float: left;
    position: relative;
    display: block;
    height: 45px;
    font-family: OpenSansBold, Arial;
    font-size: 16px;
    line-height: 2.9;
    text-align: center;
    color: #646464;
}

#header .navWrapper .nav li.spacer {
    width: 2px;
    min-width: 2px;
    height: 45px;
    min-height: 45px;
    background: url('../images/nav-button-spacer-bg.png') left top no-repeat;
}

#header .navWrapper .nav li a,
#header .navWrapper .nav li a:visited
{
    display: block;
    height: 45px;
    padding: 0 20px;
    color: #646464;
    text-decoration: none;
}

#header .navWrapper .nav li a:hover,
#header .navWrapper .nav li a:active,
#header .navWrapper .nav li a:focus
{
    color: #fff;
    background: url('../images/nav-button-bg.png') left bottom repeat-x;
}

#header .navWrapper .nav li.home {
    max-width: 86px;
    text-indent: -1px;
}

#header .navWrapper .nav li ul.sub {
    position: absolute;
    display: none;
    left: -1px;
    top: 45px;
}

#header .navWrapper .nav li:hover > ul.sub {
    display: block;
}

#header .navWrapper .nav li ul.sub li {
    float: none;
    display: block;
    font-family: OpenSansSemibold, Arial;
    font-size: 14px;
    line-height: 2.3;
    height: auto;
    text-align: center;
    background-color: #f4771d;
    color: #fff;
    white-space: nowrap;
    text-align: left;    
}

#header .navWrapper .nav li ul.sub li a,
#header .navWrapper .nav li ul.sub li a
{
    color: #fff;
    height: auto;
}

#header .navWrapper .nav li ul.sub li a:hover,
#header .navWrapper .nav li ul.sub li a:focus,
#header .navWrapper .nav li ul.sub li a:active
{
    background: #d66627;
}

#header .navWrapper .right {
    float: right;
    width: 4px;
    min-width: 4px;
    height: 47px;
    min-height: 47px;    
    background: url('../images/nav-right-bg.png') left top no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:08:10.073

代替

```
#header .navWrapper .nav li a:hover, 
```

和

```
#header .navWrapper .nav li:hover a, 
```

这是因为您的子菜单是`li`元素的子菜单，而不是`a`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:09:01.750

您应该在父列表项上设置悬停状态的背景图像，而不是链接本身。

```
/* instead of your */
#header .navWrapper .nav li a:hover

/* try */
#header .navWrapper .nav li:hover a 
```

# ruby-on-rails - Brew 与 ImageMagick 的链接

> ID：11878888
> 
> 赞同：6
> 
> 时间：2012-08-09T07:46:07.200
> 
> 标签：ruby-on-rails, macos, imagemagick, homebrew, rmagick

**安装：** ostaptan:~ ostap$ brew install imagemagick --disable-openmp --from-source

```
==> Downloading http://downloads.sf.net/project/machomebrew/mirror/ImageMagick-6.7.7-6.tar.bz2
Already downloaded: /Library/Caches/Homebrew/imagemagick-6.7.7-6.tar.bz2
==> Patching
patching file configure
Hunk #1 succeeded at 32371 (offset 447 lines).
==> ./configure --disable-osx-universal-binary --without-perl --prefix=/usr/local/Cellar/imagemagick/6.7.7-6 --enable-shared --disable-static
==> make install
Error: The linking step did not complete successfully
The formula built, but is not symlinked into /usr/local
You can try again using `brew link imagemagick'
==> Summary
/usr/local/Cellar/imagemagick/6.7.7-6: 1388 files, 32M, built in 61 seconds 
```

**安装中的错误链接后链接：**

ostaptan:wand ostap$ brew 链接 imagemagick

```
Linking /usr/local/Cellar/imagemagick/6.7.7-6...

Error: Could not symlink file: /usr/local/Cellar/imagemagick/6.7.7-6/include/ImageMagick/wand/wand-view.h

Target /usr/local/include/ImageMagick/wand/wand-view.h already exists. You may need to delete it.

To force the link and delete this file, do:
  brew link -f formula_name

To list all files that would be deleted:
  brew link -n formula_name 
```

怎么链接？？？该怎么办？？到处都找不到答案！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T09:27:22.020

正如 brew 链接输出中所建议的那样，尝试

```
brew link -f imagemagick 
```

这应该清理 中的旧链接`/usr/local/include/ImageMagick/`，然后链接完成安装所需的文件。

如果这不起作用，请检查您的用户是否有权写入`/usr/local/include/ImageMagick/*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T02:04:15.847

经过几个小时的尝试，唯一对我有用的是：

```
sudo brew link --overwrite imagemagick 
```

（也要求`/usr/local/bin/brew`是）`chowned``root`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-25T02:11:59.557

Homebrew 不再支持覆盖 sudo 命令。

```
sudo brew link --overwrite imagemagick 
```

错误：以 root 身份运行 Homebrew 非常危险，不再受支持。由于 Homebrew 不会放弃安装权限，因此您将授予所有构建脚本对系统的完全访问权限。

# google-maps - 如何为新形状生成 __gm_id

> ID：11878890
> 
> 赞同：0
> 
> 时间：2012-08-09T07:46:18.710
> 
> 标签：google-maps, google-maps-api-3

我在数据库中保存了一个矩形边界，并且能够在地图上显示矩形。

下面是在地图上显示矩形的代码。

```
rectangle = new google.maps.Rectangle({ 
bounds: bounds,
fillColor: "#FF0000",
strokeColor: "#FF0000",
clickable: true
});

rectangle.setMap(map); 
```

在使用绘图管理器创建新形状时，我能够为每个形状获得唯一的**__gm_id 。**

但是当创建一个没有绘图管理器的形状时，我没有得到这个唯一的 id。如何在不使用绘图管理器的情况下为已保存的形状生成唯一 ID？

# java - 身份验证错误：无法响应任何这些质询：{} Android - 401 Unauthorized

> ID：11878896
> 
> 赞同：12
> 
> 时间：2012-08-09T07:46:58.143
> 
> 标签：java, android, json, drupal, httprequest

身份验证错误：无法响应任何这些质询：{} Android - 401 Unauthorized

[在 Android 上将 HttpPost 与 DefaultHttpClient 一起使用时，](https://stackoverflow.com/questions/6114455/authentication-error-when-using-httppost-with-defaulthttpclient-on-android)我已参考此链接 身份验证错误

我正在开发支持 Drupal 的 android 应用程序。我正在将数据从 android 应用程序发送到 drupal 网站 - JSON 格式的 web 服务。现在我可以从 Drupal webservice 读取 JSON 数据并将其写入我的 android 应用程序。但是在从android上写drupal时遇到问题，它会生成带有状态码的响应

> 401未经授权

从 android 本机应用程序生成 401 ，而从 phonegap-from android 当我发起 AJAX 请求时，它可以完美运行并在 drupal 网站上写一篇文章或页面。所以这意味着网络服务可以完美地工作&

> 我的 phonegap android 应用程序完美运行 Android 原生 JAVA 应用程序有问题 我在 Android2.3.4 上运行我的 android 应用程序 -> 三星 Galaxy S Plus - 三星 GT-I9001

这是我的java android代码。

===============================

```
String url = "XXX";
strResponse1 = makeWebForPostIdea(url,title,body);

public static String makeWebForPostIdea(String url, String title,String body)
    {
        JSONStringer jsonobject = null;
        JSONObject json = null;
        JSONObject jsonnode = null;

        DefaultHttpClient client = new DefaultHttpClient();

Credentials creds = new UsernamePasswordCredentials("username", "password");
        client.getCredentialsProvider().setCredentials(new       AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT), creds);
 HttpPost post = new HttpPost(url);
System.out.println("value of the post =============> "+post);
 try {
            JSONObject jsonvalue = new JSONObject();
            jsonvalue.put("value", body.toString());

            JSONArray array = new JSONArray();
            array.put(jsonvalue);

            jsonnode = new JSONObject();
            jsonnode.put("und", array);

            System.out.println("@@@@@@2    jsonnode=======>"+jsonnode.toString());

        } catch (JSONException e3) {
            // TODO Auto-generated catch block
            e3.printStackTrace();
        }
 try {
 jsonobject = new JSONStringer().array().object().key("und").object().key("0").object().key("value").value(body).endObject().endObject().endObject().endArray();
    System.out.println("=============>"+jsonobject);

        } catch (JSONException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }

         List<NameValuePair> params = new ArrayList<NameValuePair>();

                 params.add(new BasicNameValuePair("type","page"));

            params.add(new BasicNameValuePair("title",title));
            params.add(new BasicNameValuePair("language","und"));
            params.add(new BasicNameValuePair("body",jsonobject.toString()));

            System.out.println("value of the params =============> "+params);

        UrlEncodedFormEntity formEntity = null;
        try {
                formEntity = new UrlEncodedFormEntity(params);
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        post.setEntity(formEntity);

        try {

            HttpResponse response = client.execute(post);

            int statusCode = response.getStatusLine().getStatusCode();
            System.out.println("=========> statusCode post idea=====> "+statusCode);    
            if (statusCode == HttpStatus.SC_OK)
            {
                HttpEntity entity = response.getEntity();
                InputStream is = entity.getContent();
                return iStream_to_String(is);
            }
            else
            {
                return "Hello This is status ==> :"+String.valueOf(statusCode);
            }
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

     public static String iStream_to_String(InputStream is1) {
            BufferedReader rd = new BufferedReader(new InputStreamReader(is1), 4096);
            String line;
            StringBuilder sb = new StringBuilder();
            try {
                while ((line = rd.readLine()) != null) {
                    sb.append(line);
                }
                rd.close();

            } catch (IOException e) {
                // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String contentOfMyInputStream = sb.toString();
        return contentOfMyInputStream;
            }

    }

   } 
```

这是我得到的logcat。

```
 08-09 12:41:29.063: I/System.out(336): value of the post =============>      org.apache.http.client.methods.HttpPost@4053c3c8
 08-09 12:41:29.093: I/System.out(336): @@@@@@2    jsonnode=======>{"und":  [{"value":"ddddddd"}]}
 08-09 12:41:29.093: I/System.out(336): =============>[{"und":{"0":{"value":"ddddddd"}}}]
 08-09 12:41:29.103: I/System.out(336): value of the params =============> [type=page, title=hhhh, language=und, body=[{"und":{"0":{"value":"ddddddd"}}}]]
 08-09 12:41:30.913: W/DefaultRequestDirector(336): Authentication error: Unable to respond to any of these challenges: {}
 08-09 12:41:30.913: I/System.out(336): =========> statusCode post idea=====> 401
 08-09 12:41:30.924: I/System.out(336): =========> Response from post  idea => Hello This is status ==> :401 
```

这是我的 PhoneGap Ajax 请求，它运行良好。

```
$('#page_node_create_submit').live('click',function(){

  var title = $('#page_node_title').val();
  //if (!title) { alert('Please enter a title.'); return false; }

  var body = $('#page_node_body').val();
  //if (!body) { alert('Please enter a body.'); return false; }

  // BEGIN: drupal services node create login (warning: don't use https if you don't     have ssl setup)
  $.ajax({
      url: "XXX",
      type: 'post',
      data: 'node[type]=page&node[title]=' + encodeURIComponent(title) +  '&node[language]=und&node[body][und][0][value]=' + encodeURIComponent(body),
      dataType: 'json',
      error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert('page_node_create_submit - failed to login');
        console.log(JSON.stringify(XMLHttpRequest));
        console.log(JSON.stringify(textStatus));
        console.log(JSON.stringify(errorThrown));
      },
      success: function (data) {
      $.mobile.changePage("index.html", "slideup");
     }
  });
  // END: drupal services node create

  return false;

}); 
```

==================================================== ================================

# 编辑 ：

我为我的错误尝试了 Apache httpclient 的各种方法。这段时间我做了一些研究并在谷歌上搜索并发现了一些有趣的东西。

**我发现 Android-Google 官方不推荐我在代码中使用的 Apache HttpClient 的**第一件事。**检查此链接。在来自 Dalvik 团队的 Jesse Wilson 的链接消息中。他们建议使用 HttpURLConnection 而不是 DefaultHttpClient 并且还写道 Android 团队将不再开发 Apache httpclient 。所以它是我正在使用的旧版本。**

 **> [http://android-developers.blogspot.in/2011/09/androids-http-clients.html](http://android-developers.blogspot.in/2011/09/androids-http-clients.html)

**我从这个链接中找到的第二**件事。这表明 **Android 附带了 Apache 的 HttpClient 4.0 Beta2，它在基本身份验证方面存在缺陷。** 我使用的身份验证方法是 HttpClient 3.x ，我从这个链接中找到了。检查链接。 [http://hc.apache.org/httpclient-3.x/authentication.html#Preemptive_Authentication](http://hc.apache.org/httpclient-3.x/authentication.html#Preemptive_Authentication)

所以版本问题。

> [http://dlinsin.blogspot.in/2009/08/http-basic-authentication-with-android.html](http://dlinsin.blogspot.in/2009/08/http-basic-authentication-with-android.html)

我还发现了一些可能解决此问题的链接。

> [http://ogrelab.ikratko.com/using-newer-version-of-httpclient-like-4-1-x/](http://ogrelab.ikratko.com/using-newer-version-of-httpclient-like-4-1-x/)
> 
> [Android 上的 Apache HttpClient 4.1](https://stackoverflow.com/questions/3577035/apache-httpclient-4-1-on-android)
> 
> [Android 1.6 中捆绑了哪个版本的 Apache HTTP 客户端？](https://stackoverflow.com/questions/2618573/what-version-of-apache-http-client-is-bundled-in-android-1-6)

从这些链接中，我得出一个结论，如果我们将 Apache HttpClient 升级到最新的稳定版本，那么这个问题就可以解决。

但这直接是不可能的，因为Android Team已经正式停止了对Apache httpclient的支持。

有了这个链接就可以解决了。我还没有尝试过，但我正在努力。

它是可以帮助升级 Android 中的 httpclient 版本的库。

> [http://code.google.com/p/httpclientandroidlib/](http://code.google.com/p/httpclientandroidlib/)

另一个解决方案可能是使用**HttpURLConnection**。我也在研究它。

但是，stackoverflow 和 Internet 上的大多数人似乎都将**DefaultHttpCLient**与 Android 一起使用。当然，它也在我的整个应用程序中与我一起工作，包括登录、注册、从服务器和会话读取以及其他功能。只是它不能直接将一些文章发布到我的服务器-Drupal 网站。在服务器上注册用户期间，它与 POST 请求完美配合。

所以朋友们，对此有什么建议吗？为什么它不适用于发布文章？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:03:21.447

它是如何从 PhoneGap 而不是 Java 的。PhoneGap 在 Web 容器中运行应用程序，因此已经过身份验证 - 您拥有所有正确的 cookie。AJAX 将共享相同的会话，并且一切都“正常工作”。

然而 HTTPClient 是完全不同的——您正在启动一个全新的 HTTP 会话，并且一切都必须正确。

关于 HTTP Auth 工作原理的一些评论：

有几种 HTTP 身份验证方法 - 选择哪种方法是 Web 服务器。在继续之前，请检查您的 Drupal 配置以确定它是否是：

*   基本身份验证（用户名和密码）。每个人和他们的狗都支持这一点，但它非常不安全。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)
*   摘要（使用 MD5 的用户名和挑战/响应哈希。这更安全但更复杂。请注意，现在 MD5 通常被认为是弱的。许多库都支持它，包括 Apache。请参阅[http://en.wikipedia.org/wiki/ Digest_access_authentication](http://en.wikipedia.org/wiki/Digest_access_authentication)了解更多详情
*   在 IIS 上实现的 NTLM（Kerberos/SPEGNO 的变体）。Java 通常不支持这一点，尽管 HTTPClient 确实声称 - 但使用不同的 Credentials 对象。请参阅[http://hc.apache.org/httpclient-3.x/authentication.html#NTLM](http://hc.apache.org/httpclient-3.x/authentication.html#NTLM)

（另请注意，Web 容器具有“智能”功能，能够根据服务器的请求尝试不同的身份验证方法，所有这些都在幕后进行）

还要检查 Drupal 网络日志。几点建议：

*   你有没有看到 HTTPClient连接*。*并且 URL 是否指向正确的资源。*从服务器的角度来看*总是值得检查...
*   它去了正确的服务器吗？可能出错的一个示例：您是否在 URL 中针对多宿主 Web 服务器使用 IP 地址，因此请求转到了错误的服务器？
*   检查客户端预先发送的身份验证是否是正确的类型（基本、摘要、NTLM）

让我知道这是否有帮助。如果没有，您可以根据这篇文章提供更多详细信息，我可以跟进更多建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:25:50.817

您可以尝试检查：[How to do http post using apache httpclient with web authentication?](https://stackoverflow.com/questions/7569866/how-to-do-http-post-using-apache-httpclient-with-web-authentication)

它`HttpInterceptor`在需要时使用 a 注入身份验证数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T17:12:15.480

[我在使用loopj android-async-http 库](http://loopj.com/android-async-http/)（强烈推荐）的 Drupal 服务中遇到了相同的“DefaultRequestDirector：身份验证错误：无法响应任何这些挑战：{}”问题。

对我来说，解决方案的关键在于 Jose L Ugia 在其中一个关于特别注意 Drupal 的 JSON 输出的答案中的评论。我试图捕获一个 JSONObject，但真正的消息是数组格式“[”错误的用户名或密码。“]”。切换到 JSONArray 正确地捕获了错误并允许我处理它。在您的情况下，我相信这是因为您没有像 drupal 服务所期望的那样发布登录凭据。

您应该记住，使用 Drupal 服务您应该执行系统/连接并获取会话，然后是用户/登录（以及作为参数传入的用户/密码）并获取会话，然后您的所有后续请求都应该工作。这就是我喜欢使用 loopj 库的原因，因为它使所有这些请求更易于管理。这是一个使用 loopj 连接到 drupal 的非常基本的示例。所有后续帖子都可以使用参数轻松完成。

```
public class Loopj {
  private static final String TAG = "loopj";

  private static AsyncHttpClient client = new AsyncHttpClient();
  private final PersistentCookieStore myCookieStore;

  public Loopj(Context context) {
    myCookieStore = new PersistentCookieStore(context);
    client.setCookieStore(myCookieStore);
    client.addHeader("Content-type", "application/json");
  }

  public void systemConnect(String uri) throws JSONException {
    client.post(uri + "/endpoint/system/connect", new JsonHttpResponseHandler() {
      @Override
      public void onSuccess(JSONObject json) {
        Log.i("TAG", "Connect success =" + json.toString());
      }

      @Override
      public void onFailure(Throwable e, String response) {
        Log.e("TAG", "Connect failure");
      }
    });
  }

  public void userLogin(String uri) throws JSONException {
    RequestParams params = new RequestParams();
    params.put("username", username);
    params.put("password", password);
    client.post(uri + "/endpoint/user/login", params, new JsonHttpResponseHandler() {
      @Override
      public void onSuccess(JSONArray response) {
        Log.i("TAG", "Login success =" + response.toString());
      }

      @Override
      public void onFailure(Throwable e, JSONArray json) {
        Log.e("TAG", "Login failure");
      }
    });
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T08:47:13.777

我建议先测试应用程序的 PHP 端。有几种方法可以进行自己的调用，包括标头和身份验证。从 curl 到 GraphicalHttpClient（http://itunes.apple.com/us/app/graphicalhttpclient/id433095876?mt=12，我个人使用它，它工作得很好）。还有一些其他选项，例如 REST 客户端调试器（https://addons.mozilla.org/en-US/firefox/addon/restclient/）

通过这种方式，您将能够以多种方式测试您的调用，这在客户端中直接进行是很痛苦的（有时它只是从 http 更改为 https 或在 Authorization 标头中添加您的令牌类型，这更容易制作n 飞）。

一旦一切按预期工作，在您的客户端中重现相同的调用、标头和正文，您就可以开始了。**

# c# - 如何在 Visual Studio 2008 中重命名现有解决方案和项目？

> ID：11878904
> 
> 赞同：13
> 
> 时间：2012-08-09T07:47:31.393
> 
> 标签：c#, visual-studio-2008, renaming

> **可能重复：**
> [如何在不终止解决方案的情况下重命名项目](https://stackoverflow.com/questions/3209002/how-to-rename-a-project-without-killing-solution)

我知道这个问题经常被问到，但没有人能帮助我克服因不当重命名我的解决方案而使我的应用程序无用的恐惧，

我正在 VS 2008 中开发 C# Windows 应用程序，因为在最初的步骤中，我不知道重命名在 VS 中是一个如此大的问题，我命名了该项目`"stock"`，但现在我的项目已接近完成，我的领导想要重命名命名空间，`BetRates_NS`因为这是部署设置项目的名称，

我什至在我的解决方案中有 Web 服务引用和其他具有命名空间名称的依赖项，根据我以前的经验，在 VS 中重命名并不是那么容易，

所以有人可以给我重命名我的解决方案的确切分步过程，以便应用程序现在可以顺利运行，并且可能不会因此在以后的时间点崩溃。

我完全希望在这里得到一些帮助.....thanxx提前......！！

这是我的解决方案资源管理器屏幕：

![在此处输入图像描述](../Images/2ec9d1c0943c947ffdccaae36ee69b42.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T08:06:40.630

试试这个

按 CTRL + H 然后输入要更改为新名称的旧名称

通过选项查看，您还可以选择当前项目或整个解决方案

![查找和替换](../Images/eb1390556ead52e5a6e34e6eadab3833.png)

您还可以在项目属性中更改命名空间

![更改命名空间或程序集名称](../Images/59572c1e62d9e7d2b2a9de54c776894a.png)

** 或者您可以创建一个新的解决方案，并将这些项目添加到您的新解决方案中并构建它

# android - 激活和停用首选项

> ID：11878906
> 
> 赞同：5
> 
> 时间：2012-08-09T07:47:39.373
> 
> 标签：android, android-preferences

我需要一个示例教程如何激活和停用偏好活动中的元素。

For example in the picture below when the Wi-Fi check box is unselected I can not touch the Network notification check box and it turns gray, when the Wi-Fi check box is selected then I can touch the other check box.

另外，当启用 whi-fi 复选框时，如何填充添加 Wi-Fi 网络选项卡？

![在此处输入图像描述](../Images/b184a53ca267f9503e84b9e861394380.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T08:00:35.140

我们需要在首选项中添加preferences.xml 文件，该首选项取决于另一个首选项android:dependency="" 代码。

例如 ：

```
 <CheckBoxPreference
            android:key="checkBox"
            android:summary="On/Off"
            android:title="Enable" />

        <ListPreference
            android:entries="@array/listOptions"
            android:entryValues="@array/listValues"
            android:key="listpref"
            android:summary="List preference example"
            android:title="List preference"
            android:dependency="checkBox" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T09:52:37.887

您的偏好活动应该实施`OnSharedPreferenceChangeListener`。请务必向侦听器注册和取消注册活动。

然后在`onResume()`和`onSharedPreferenceChanged`方法中评估控制偏好的状态以确定是否应该启用或禁用依赖偏好。

```
@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
        final String key) {
    if (key.equals(PREFERENCE_KEY)) {
        // handle setting enabled or disabled depending on value of preference
        if (sharedPreferences.getBoolean(key, false)) {
            // prefField.setenabled(true);
        } else {
            // prefField.setenabled(false);
        }

    }
} 
```

如果您还使用 PreferenceCategory，那么您可能还希望启用或禁用整个类别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:07:41.127

当偏好活动在 onResume 方法中开始时，检查 wifi 连接状态，或者任何你想要的并启用/禁用适当的偏好。

它可能看起来类似于这个简单的例子，只是为了给你一个大致的想法。

```
@Override
protected void onResume() {
   super.onResume();
   boolean isConnected = getConnectionStatus();

   if(isConnected) {
     connPreference.setEnabled(false);
   } else {
     connPreference.setEnabled(true);
   }
} 
```

# apache-pig - 猪储存条件

> ID：11878912
> 
> 赞同：3
> 
> 时间：2012-08-09T07:48:08.190
> 
> 标签：apache-pig

假设我有一个输入文件作为地图。

```
sample.txt
[1#"anything",2#"something",3#"anotherthing"]
[2#"kish"]
[3#"mad"]
[4#"sun"]
[1#"moon"]
[1#"world"] 
```

由于没有指定键的值，我不想将其保存到文件中。是否有任何条件语句可以与 Store 关联？请帮我解决这个问题，以下是猪脚本。

```
A = LOAD 'sample.txt';
B = FOREACH A GENERATE $0#'5' AS temp;
C = FILTER B BY temp is not null;
-- It actually generates an empty part-r-X file
-- Is there any conditional statements i can include where if C is empty, Do not store ?
STORE C INTO '/user/logs/output'; 
```

谢谢 我在某个地方出错了吗？如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:20:43.803

从编程猪的[第 9 章，](http://ofps.oreilly.com/titles/9781449302641/embedding.html)

> Pig Latin 是一种数据流语言。与通用编程语言不同，它不包括控制流结构，如`if`和`for`。

因此，仅使用 Pig 是不可能做到这一点的。

我倾向于说您可以使用 custom[`StoreFunc`](http://ofps.oreilly.com/titles/9781449302641/load_and_store_funcs.html)和 custom的组合来实现这一点`OutputFormat`，但这似乎会增加太多开销。

解决此问题的一种方法是在没有写入记录的情况下删除输出文件。[使用嵌入式 Pig](http://pig.apache.org/docs/r0.10.0/cont.html)并不太难。例如，使用 Python 嵌入：

```
from org.apache.pig.scripting import Pig

P = Pig.compile("""
A = load 'sample.txt';
B = foreach A generate $0#'5' AS temp;
C = filter B by temp is not null;
store C into 'output/foo/bar';
""")

bound = P.bind()
stats = bound.runSingle()

if not stats.isSuccessful():
    raise RuntimeError(stats.getErrorMessage())

result = stats.result('C')

if result.getNumberRecords() < 1:
    print 'Removing empty output directory'
    Pig.fs('rmr ' + result.getLocation()) 
```

# actionscript-3 - NetStream.Buffer.flush 防止表单搜索

> ID：11878914
> 
> 赞同：0
> 
> 时间：2012-08-09T07:48:16.293
> 
> 标签：actionscript-3, flash, apache-flex, flex4.5, rtmpd

我有一个 Flash 播放器，用于流式传输预先录制的 flv 声音。我有前进和后退按钮，可以在播放时向前/向后搜索声音。

我遇到的问题是，当我使用较短的声音（如 30 秒）时，当接近尾声 10 秒时，我从播放器**“NetStream.Buffer.flush”**收到此消息，而播放器“NetStream.Buffer.flush”依次执行**“数据已完成流式传输，剩余缓冲区已清空”**，所以我无法在文件末尾附近寻找。

我怎样才能解决这个问题？

我已经将**inBufferSeek**设置为 true 并将**bufferTime**设置为 5。

这是 Flash/As3 的问题还是服务器的问题？（我用crtmp开源服务器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:38:09.073

与关键帧的存在/不存在无关。它纯粹是闪存方面的。寻找应该工作得很好。这是一个演示 [http://pastebin.com/raw.php?i=LYTNy7xR]

# matlab - 为什么情节句柄总是无效的？

> ID：11878916
> 
> 赞同：1
> 
> 时间：2012-08-09T07:48:22.883
> 
> 标签：matlab, plot, handle

我想删除一个绘图及其颜色条（实际上我想删除绘图中的所有内容，但接缝几乎是不可能的，请参阅[使轴不可见或完全删除绘图](https://stackoverflow.com/questions/11865541/make-axes-invisible-or-delete-plot-completely)）

我这样做：

在剧情中

```
hplot = pcolor(xAxis, yAxis, Data2D); 
hcb = colorbar;
handles.image.hColorbar = hcb;
handles.image.hplot = hplot;
guidata(handles.output,handles); 
```

稍后在 gui 中：

```
if (isfield(handles,'image') && isfield(handles.image,'hplot'))
    if (handles.image.hplot~=0)
        delete(handles.image.hplot);
        delete(handles.image.hColorbar);
        handles.image.hplot = 0;
    end
end 
```

它适用于无效句柄`delete(handles.image.hplot)`但失败`handles.image.hColorbar`- 为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:25:18.093

这个片段在这里工作得很好......

通常，建议检查`ishandle()`两个对象，这样您就不必设置`handles.image.hplot = 0`. 由于已使句柄无效，因此在您重新为其分配新的有效句柄之前`delete`，它将永远不会通过检查。`ishandle`

如果代码没有通过`ishandle()`测试，则意味着它`deleted`已经通过了，因此无需`delete`再次测试。

# jquery - 如何在不使用本地存储的情况下移动到下一页时保留文本框的值？

> ID：11878917
> 
> 赞同：0
> 
> 时间：2012-08-09T07:48:23.623
> 
> 标签：jquery, textbox

海每个人我都有一个 2 个**文本框**和 1 个**按钮**。`page1.html`当单击按钮时，它会重定向到`page2.html`。在`page2.html`我按下后退按钮时，它会转到`page1.html`。当移动到第 1 页时，我需要获取文本框值我有什么进入。任何人都
请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:50:24.617

您需要使用某种形式的 Javascript，因为 HTML 不包含控制页面之间值的方法。这是客户端脚本、服务器端编码或浏览器功能。

要在 Javascript（没有 JQuery）中执行此操作，请查看类似[这样](http://www.quirksmode.org/js/cookies.html)的内容。我不确定你为什么不想做 jQuery，它会让一些事情变得更容易。如果您改变主意，可以使用大量[cookie](http://archive.plugins.jquery.com/project/Cookie)插件。

jQuery 方法在这里：[jQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T17:32:47.990

只要文本框没有隐藏并且是在加载事件之前创建的，它们就会保留值。

如果由于某种原因您不想将它们显示给用户，那么您可以欺骗具有绝对定位的文本框，但设置 left = -99999px。这会将它们从屏幕上隐藏起来。

# c# - 使用 Compact Framework 3.5 设置 ListView 控件的样式

> ID：11878920
> 
> 赞同：2
> 
> 时间：2012-08-09T07:49:05.410
> 
> 标签：c#, .net, compact-framework, windows-ce

我正在开发一个 WinCE 6.0 项目（Compact Framework 3.5）。现在我正在尝试更改`ListView`控件的样式（滚动条）。但我不能画出我自己的风格，因为没有`.OwnerDraw()`方法。`ListView`是否可以使用 CF 3.5自定义 a 的样式？（尤其是滚动条样式和所选项目背景颜色）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-02T14:44:14.217

此方法从继承的 ListView 中删除滚动条：

```
const int GWL_STYLE = -16;
//No ScrollBar
const int LVS_NOSCROLL = 0x2000;
private bool noScrollBar = false;
    public bool NoScrollBar
    {
        get { return noScrollBar; }
        set
        {
            noScrollBar = value;
            int style = (int)NativeMethods.GetWindowLong(Handle, GWL_STYLE);
            if (noScrollBar)
            {
                NativeMethods.SetWindowLong(Handle, GWL_STYLE, style | LVS_NOSCROLL);
            }
            else
            {
                NativeMethods.SetWindowLong(Handle, GWL_STYLE, style & ~LVS_NOSCROLL);
            }
        }
    } 
```

也许您可以根据需要对其进行编辑。

# javascript - 如何解决报告的攻击页面

> ID：11878922
> 
> 赞同：1
> 
> 时间：2012-08-09T07:49:09.537
> 
> 标签：javascript, asp.net, iis

当我打开我的网站时，我真的很震惊。因为我收到“报告的攻击页面！” 而不是我的网站。

我对此进行了很多研究。我已经下载了整个网站，并且检查了网站的每一页。没有任何恶意代码脚本。我检查了所有脚本文件、CSS 文件和 aspx 页面。

我得到了正好在下面的窗口。我需要有人帮助解决这个问题。

![在此处输入图像描述](../Images/e7566824e89c3ce99a934ae45cdfeef4.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:14:18.183

Firefox 使用 Google Safe Browisng 来查找恶意网站。此页面表明您的网站已被 google 标记为恶意软件/网络钓鱼。使用 google 网站管理员解决此问题：[http ://www.google.com/webmasters/](http://www.google.com/webmasters/)

有时，您所投放的广告可能包含恶意软件，在这种情况下，您可能需要与广告提供商联系。

# javascript - JavaScript 中仍然不推荐“新”吗？

> ID：11878924
> 
> 赞同：6
> 
> 时间：2012-08-09T07:49:13.633
> 
> 标签：javascript, new-operator

所以我看到很多 JavaScript 代码在创建构造函数时使用“new”。在阅读了部分 JavaScript the Good Parts 之后，似乎使用“新”不是猫的睡衣。那是4年前的事了……还是不推荐吗？目前的标准是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T07:57:17.450

从什么时候开始`new`不推荐了？D. Crockford 有一个有效的观点和强烈的观点，但`new`它是语言的一部分，并且在许多项目中都被大量使用。`new`是原型继承模型的一部分，必须用于通过构造函数创建新实例。Crockford 指出了一种`this`适当使用上下文的纯函数方法，并且`return this`能够在子对象之间继承属性和方法。这是对常见问题的不同解决方案，但这并不意味着`new`不应该使用它。事实上，有史以来复制/粘贴最多的 JS 片段之一是 Crockford 的`object.create`polyfill，它使用`new`：

```
if (typeof Object.create !== 'function') {
    Object.create = function (o) {
        function F() {}
        F.prototype = o;
        return new F();
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:21:57.693

自 2008 年以来，除了受 Crockford 影响`Object.create`进入 ECMAScript 5 之外，没有什么改变：`new`仍然具有 Douglas Crockford 强烈指出的相同行为和缺点。我个人的看法是，他夸大了问题，让开发人员反对一个有用的操作符，所以我继续使用它没有问题；我建议其他开发人员自己做决定，而不是盲目地内化和反刍（公认的令人钦佩的）Crockford。

# java - 不使用 Synchronized Key 的 Singleton 实现的延迟初始化

> ID：11878926
> 
> 赞同：2
> 
> 时间：2012-08-09T07:49:23.993
> 
> 标签：java, concurrency, singleton, synchronized

在一次采访中，我被要求建议一个单例模式的设计/实现，我必须延迟加载类并且不使用同步关键字。我被噎住了，什么都想不出来。然后我开始阅读 java 并发和 concurrentHaspMap。请检查以下实施并确认您是否发现双重检查锁定的任何问题或此实施的任何其他问题。

```
package Singleton;

import java.util.concurrent.ConcurrentHashMap;

public final class SingletonMap {

    static String key = "SingletonMap";
    static ConcurrentHashMap<String, SingletonMap> singletonMap = new ConcurrentHashMap<String, SingletonMap>();
    //private constructor
    private SingletonMap(){

    }
    static SingletonMap getInstance(){

        SingletonMap map = singletonMap.get(key);       
        if (map == null){
                //SingletonMap newValue=  new SingletonMap();
                map =   singletonMap.putIfAbsent(key,new SingletonMap());
                if(map == null){
                    map = singletonMap.get(key);    
                }
        }       
        return map;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:54:36.127

如果你知道怎么做就很简单

```
enum Singleton {
    INSTANCE;
} 
```

是延迟加载和线程安全的`INSTANCE`（并且不使用任何类型的显式锁定）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:07:02.390

另请参阅[Bill Pugh 的解决方案](http://en.wikipedia.org/wiki/Singleton_pattern#The_solution_of_Bill_Pugh)

```
public class Singleton {
    // Private constructor prevents instantiation from other classes
    private Singleton() {}

    /**
     * SingletonHolder is loaded on the first execution of
     * Singleton.getInstance() or the first access to
     * SingletonHolder.INSTANCE, not before.
     */
    private static class SingletonHolder {
        public static final Singleton INSTANCE = new Singleton();
    }

    public static Singleton getInstance() {
        return SingletonHolder.INSTANCE;
    }
} 
```

# java - 在 java 路径中找不到属性文件

> ID：11878931
> 
> 赞同：0
> 
> 时间：2012-08-09T07:49:33.507
> 
> 标签：java, properties, path

我的代码找不到存储登录信息的 .properties 文件。

我已将文件放在 src 文件夹中以确保它可以编译，并且可以正确编译。

下面是文件的当前位置以及我如何尝试访问它。

我尝试了各种不同的路径，但没有运气。

![在此处输入图像描述](../Images/995cbc333d759dc4c2b5060c1ef79d0f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:05:40.863

更改您的代码；

```
 ResourceBundle bundle = ResourceBundle.getBundle("Selenium/readme"); 
```

到

```
 ResourceBundle bundle = ResourceBundle.getBundle("readme"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:52:55.160

您不编译`.properties`文件，而是按原样使用它。

如果您使用 FileInputStream 它将使用在您的运行配置中设置的工作目录（很可能是顶层目录）

但是您将它作为资源加载，这意味着它必须在您的类路径中。最简单的做法是为您的配置创建一个子目录并将其添加到您的程序类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:54:47.770

读取属性文件，如：

```
ResourceBundle.getBundle("src/properties/readme.properties"); //Or simply "properties/readme.properties" 
```

将 readme.properties 放在`src/properties`目录下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T07:58:17.373

您可以使用`this.getClass().getResourceAsStream("readme.properties");`

欲了解更多信息，请阅读：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T08:00:23.090

我看到 .properties 文件不在 src 文件夹中。还要检查项目的构建路径。它会显示 src 文件夹和输出文件夹的位置。使用 eclipse 构建项目选项构建项目后，请确保您的属性文件现在在输出文件夹中可用。

# android - 如何获取在 SD 卡上添加音频的日期？

> ID：11878939
> 
> 赞同：0
> 
> 时间：2012-08-09T07:49:59.533
> 
> 标签：android, exception, date, audio, fetch

我正在录制音频并将其与日期一起存储在 SD 卡中。这是我
添加音频文件的日期和其他详细信息的代码。

```
 audioFileName=input.getText().toString();           
current = System.currentTimeMillis();
    String artist = "" + getResources().getText(R.string.artistName);
   ContentValues values = new ContentValues();
   values.put(MediaStore.MediaColumns.DATA, audiofile.getAbsolutePath());
   values.put(MediaStore.MediaColumns.TITLE, audioFileName);               
   values.put(MediaStore.Audio.Media.DATE_ADDED, (int) current );
callMessage();
    values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/3gpp");
values.put(MediaStore.Audio.Media.ARTIST, artist);
values.put(MediaStore.Audio.Media.DATA, audiofile.getAbsolutePath());
ContentResolver contentResolver = getContentResolver();

Uri base = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
Uri newUri1 = contentResolver.insert(base, values); 
```

这是我获取音频的所有详细信息的代码。

```
 try {
        mAdapter = new SimpleCursorAdapter(
                this,
                // Use a template that displays a text view
                R.layout.media_select_row,
                // Give the cursor to the list adatper
                createCursor(""),
                // Map from database columns...
                new String[] {
                   String.valueOf(MediaStore.Audio.Media.DATE_ADDED ),
                    MediaStore.Audio.Media.ALBUM,
                    MediaStore.Audio.Media.TITLE,
                    MediaStore.Audio.Media._ID,
                    MediaStore.Audio.Media._ID},
                    // To widget ids in the row layout...
                    new int[] {
                    R.id.row_date,
                    R.id.row_album,
                    R.id.row_title,
                    R.id.row_icon,
                    R.id.row_options_button});

        setListAdapter(mAdapter);

        getListView().setItemsCanFocus(true);

        // Normal click - open the editor
        getListView().setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent,
                    View view,
                    int position,
                    long id) {
                startRecordingEditor();
            }                         
        });

    } catch (SecurityException e) {
        // No permission to retrieve audio?
        Log.e("RecordingApp", e.toString());

        // todo error 1
    } catch (IllegalArgumentException e) {
        // No permission to retrieve audio?
        Log.e("RecordingApp", e.toString());

        // todo error 2
    }

    mAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
        public boolean setViewValue(View view,
                Cursor cursor,
                int columnIndex) {
            if (view.getId() == R.id.row_options_button){
                // Get the arrow image view and set the onClickListener to open the context menu.
                ImageView iv = (ImageView)view;
                iv.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        openContextMenu(v);
                    }
                });
                return true;
            } else if (view.getId() == R.id.row_icon) {
                setSoundIconFromCursor((ImageView) view, cursor);
                return true;
            }

            return false;
        }
    }); 
```

它显示了其他详细信息，但是当我想通过使用`DATE_ADDED`它来显示日期时，会显示
以下我无法理解的错误。

```
 08-09 13:15:52.519: E/AndroidRuntime(3265): FATAL EXCEPTION: main
    08-09 13:15:52.519: E/AndroidRuntime(3265): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.blitze.recordingapp/com.blitze.recordingapp.RecorderListActivity}: java.lang.NullPointerException
08-09 13:15:52.519: E/AndroidRuntime(3265):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-09 13:15:52.519: E/AndroidRuntime(3265):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1797)
08-09 13:15:52.519: E/AndroidRuntime(3265):     at android.view.View.performClick(View.java:3511)

08-09 13:15:52.519: E/AndroidRuntime(3265):     at java.lang.reflect.Method.invokeNative(Native Method)
08-09 13:15:52.519: E/AndroidRuntime(3265):     at java.lang.reflect.Method.invoke(Method.java:511)
08-09 13:15:52.519: E/AndroidRuntime(3265):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-09 13:15:52.519: E/AndroidRuntime(3265): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-09 13:15:52.519: E/AndroidRuntime(3265):     at dalvik.system.NativeStart.main(Native Method)
08-09 13:15:52.519: E/AndroidRuntime(3265): Caused by: java.lang.NullPointerException
08-09 13:15:52.519: E/AndroidRuntime(3265):     at com.blitze.recordingapp.RecorderListActivity.onCreate(RecorderListActivity.java:149)
08-09 13:15:52.519: E/AndroidRuntime(3265):     at android.app.Activity.performCreate(Activity.java:4465)
08-09 13:15:52.519: E/AndroidRuntime(3265):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-09 13:15:52.519: E/AndroidRuntime(3265):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

我正在尝试，但无法从 SD 卡获取日期。
请有人指导我正确的观点。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T05:32:35.090

好吧，我认为你应该稍微改变你的方法。这是我如何做到的代码。尽管它在您的活动中返回不正确的 date.first ，但请执行此操作。`

```
myCursor = null;
        SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yyyy");
String[] STAR = { "*" };
        String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";

try {
            myCursor = getActivity().getContentResolver().query(
                    MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, null, null,
                    null, null);
            count = myCursor.getCount();
            naming = new String[count];
            Log.d("TAG", "count" + count);
myCursor.moveToFirst();
            Log.d("TAG", "inside if after last called");
            do {

                music_column_index = myCursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
                name = myCursor.getString(music_column_index);

                String DATA = myCursor.getString(myCursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA));
                int duration = myCursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.DURATION);
                int s = myCursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE);
                // myCursor.moveToPosition(i);
                Long tm = myCursor
                        .getLong(myCursor
                                .getColumnIndexOrThrow(MediaStore.Audio.Media.DATE_MODIFIED));

                // String date = tm.toString();

                String dateString = DateFormat.format("MM/dd/yyyy",
                        new Date(tm)).toString();

                Log.d("TAG", "date:" + dateString);

                size = "" + s + "KB";
                // size = myCursor.getString(duration) + "KB"; //
                // String time = myCursor.getString(tm);
                Log.d("TAG", "size:" + size);
} while (myCursor.moveToNext());
            myCursor.close(); 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-01T03:48:16.273

崩溃：MediaStore.Audio.Media.DATE_ADDED 不存在。
MediaStore.Audio.Media.DATE_MODIFIED 时间是 1970/01/01 00:00:00。
改用`File.lastModified()`！

```
SimpleDateFormat SDF = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.item, cursor, new String[]{ MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.SIZE, MediaStore.Audio.Media.DATA, MediaStore.Audio.Media._ID }, new int[]{R.id.textView_path, R.id.textView_name, R.id.textView_size, R.id.textView_time, R.id.imageView_icon}, CursorAdapter.FLAG_AUTO_REQUERY);
adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
        if (view.getId() == R.id.textView_name) {
            String path = cursor.getString(columnIndex);
            ((TextView) view).setText(path.substring(path.lastIndexOf("/") + 1));
            return true;
        } else if (view.getId() == R.id.textView_size) {
            long filesize = cursor.getLong(columnIndex);
            ((TextView) view).setText(Formatter.formatFileSize(CategoryActivity.this, filesize));
            return true;
        } else if (view.getId() == R.id.textView_time) {
            path = cursor.getString(columnIndex);
            File file = new File(path);
            Date date = new Date(file.lastModified());
            ((TextView) view).setText(SDF.format(date));
            return true;
        } else if (view.getId() == R.id.imageView_icon) {    
            ((ImageView) view).setImageResource(R.mipmap.audiofile);
            return true;
        }
        return false;
    }
}); 
```

# javascript - 为什么一个 $(document).ready(function() { 会阻止另一个运行？

> ID：11878941
> 
> 赞同：1
> 
> 时间：2012-08-09T07:50:09.623
> 
> 标签：javascript, jquery

我知道我应该能够运行许多 $(document).ready(function() { 就像我喜欢的那样，但事实是，在我的页面上，我不能。虽然我很感谢人们让我知道我应该能够做到这一点，我真的希望有人能够告诉我为什么其中一个功能阻止另一个运行。

我在同一页面上运行两个单独的 $(document).ready(function() {。一个用于在选择搜索结果时更新下拉菜单。另一个用于在用户单击时调用日历函数在“日期”文本框中。除非我调用名称搜索函数，否则日期函数工作正常。如果我调用名称搜索函数，则日期函数根本不会运行。我是一个 php hack，真的知道几乎没有 javascript。

这两个功能包含在不同的“js”页面中。下面是两个函数：

```
<script language="JavaScript" src="<?php echo MAIN_BASE_PATH?>/includes/utils.js" type="text/javascript"></script>

<script type="text/javascript"> 

$(document).ready(function(){
jquery_date('date');
});
</script>

function jquery_date(name){
$("input[name='"+name+"']").datepicker({ dateFormat: 'mm-dd-yy'  });
} 
```

* * *

```
<link rel="stylesheet" type="text/css" href="../jquery.autocomplete.css" />
<script type="text/javascript" src="../jquery.js"></script>
<script type="text/javascript" src="../jquery.autocomplete.js"></script>
<script>
$(document).ready(function(){
    $("#student_search").autocomplete("autocomplete_student.php", {
           selectFirst: true
    });

     $("#student_search").result(function(event, data, formatted) {

        $("#student_menu_<?php echo $field_name;?>").val(data[1]);
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:55:19.923

您可以轻松地将两者合二为一（在调用时您的所有页面都已完全加载之后）。

多个绑定的问题是，如果其中一个因错误而失败，则链中的下一个绑定将不会执行，您的代码是否可能生成这样的错误？（根据 Alex 的评论更正了之前的帖子，10x 添加了 +）

见熟食店的帖子： [http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

# regex - 验证字符串包含“aaa”但不包含“bbb”

> ID：11878945
> 
> 赞同：3
> 
> 时间：2012-08-09T07:50:28.873
> 
> 标签：regex, validation

快速正则表达式问题。

我必须检查给定的字符串是否包含`aaa`但不包含`bbb`。我只能使用正则表达式（[http://www.regular-expressions.info/](http://www.regular-expressions.info/)）。

例子：

*   `aaa`- 行
*   `bbb`- 失败
*   `aaabb`- 行
*   `aaabbb`- 失败
*   `aaaTEXT`- 行
*   `aaaTEXTbbb`- 失败
*   `aaTEXTa`- 失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:54:24.440

使用这个正则表达式`(?=.*a{3})(?!.*b{3}).+`

`(?=.*a{3})`包含aaa

`(?!.*b{3}).+`不包含 bbb

`.+`选择所有满足条件的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:58:06.243

也许这有点快？

```
var string = "aaabbb";

if ( string.indexOf("aaa") !== -1 && string.indexOf("bbb") === -1 ) {
    // ...
} 
```

# javascript - 在 iframe 中自动登录远程站点内部

> ID：11878947
> 
> 赞同：21
> 
> 时间：2012-08-09T07:50:43.583
> 
> 标签：javascript, html, iframe, autologin

我有一个现有的远程站点，它可以访问身份验证，现在我想使用 iframe 将此站点合并到我自己的站点中。是否有任何解决方案可以帮助在加载 iframe 时自动登录远程站点？

```
<iframe src="http://remote.com/list"></iframe> 
```

如果想访问[http://remote.com/list](http://remote.com/list)，登录需要并且只发布用户名/密码有效。加载 iframe 时如何自动登录？

这里有一些限制

*   login 仅适用于 post 方法
*   iframe / javascript 有跨域问题
*   没有提供登录 API
*   在远程站点中无法进行其他修改

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-30T10:31:26.650

一切皆有可能。但是，由于泄露了对远程页面的访问详细信息，以下解决方案非常不安全。

```
<form id="login" target="frame" method="post" action="http://remote.com/login">
    <input type="hidden" name="username" value="login" />
    <input type="hidden" name="password" value="pass" />
</form>

<iframe id="frame" name="frame"></iframe>

<script type="text/javascript">
    // submit the form into iframe for login into remote site
    document.getElementById('login').submit();

    // once you're logged in, change the source url (if needed)
    var iframe = document.getElementById('frame');
    iframe.onload = function() {
        if (iframe.src != "http://remote.com/list") {
            iframe.src = "http://remote.com/list";
        }
    }
</script> 
```

`username`和输入的值`password`在客户端是可读的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-09T09:53:59.220

如果您拥有其他站点，则可以尝试通过某些令牌进行身份验证。

将授权令牌传递给 iframe 中的 url。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-06-20T10:18:35.127

这是我这样做的实现。但这并不能解决跨域问题。对于跨域问题，你可以尝试使用jQuery的[JSONP](http://en.wikipedia.org/wiki/JSONP)方法（我还没有尝试将jQuery与这个解决方案结合使用）。

```
<iframe id="MyIFrame" width="400" height="400"></iframe>
<script type="text/javascript">
    var iframeURL = 'http://mysite.com/path/applicationPage.aspx';
    var iframeID = 'MyIFrame';

    function loadIframe(){
        //pre-authenticate
        var req = new XMLHttpRequest();
        req.open("POST",this.iframeURL, false, "username", "password"); //use POST to safely send combination
        req.send(null); //here you can pass extra parameters through

        //setiFrame's SRC attribute
        var iFrameWin = document.getElementById(this.iframeID);
        iFrameWin.src = this.iframeURL + "?extraParameters=true";
    }

    //onload, call loadIframe() function
    loadIframe();   
</script> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-09T09:46:37.043

做不到。就那么简单。跨域限制非常明确地阻止您执行此类操作。

# c++ - C++/Win32 在 Windows 2000+ 上启动线程的最佳方式

> ID：11878950
> 
> 赞同：0
> 
> 时间：2012-08-09T07:50:51.777
> 
> 标签：c++, multithreading, winapi

我正在寻找在 Win 2000 或更高版本上启动线程的最轻量（就 .exe 大小增加而言）方法。线程将在主进程地址空间中运行。

希望我可以用一个 include 来做到这一点：#include windows.h 单独。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:52:34.807

使用 CreateThread API：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453(v=vs.85).aspx)

这里有一个很好的例子：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682516(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682516(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T07:52:55.853

是的，Win32 API 有一个[`CreateThread`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453.aspx)，你唯一需要包含的是`Windows.h`. 这会为进程创建一个新线程。它绝对适用于 Windows 2000，甚至更早。

MSDN 上提供了一个示例：[创建线程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682516.aspx)。谷歌搜索也发现了[这篇关于 Code Project](http://www.codeproject.com/Articles/13557/Creating-Threads-using-the-CreateThread-API)的文章。你可能会发现更多。

# java - apache和Java之间的“解密失败或坏记录mac”

> ID：11878952
> 
> 赞同：1
> 
> 时间：2012-08-09T07:51:01.937
> 
> 标签：java, apache, ssl, mod-ssl

我有一个使用 RSA SSL-J 实现 SSL 的 Java 程序（在 tomcat 容器中运行），以及一个使用 mod_ssl/openssl 为 SSL 配置的 apache 网络服务器

当 Java 程序尝试打开到 apache 服务器的 HttpsUrlConnection 时，出现错误`javax.net.ssl.SSLException: Fatal Alert received: Bad Record Mac`

（异常堆栈跟踪不是很有帮助，因为 sslj.jar 被混淆了）

问题不是间歇性的。它每次都会发生。

这是在我将 LogLevel 设置为 debug 后，来自 apache 上的 mod_ssl 日志：

```
[Mon Jul 30 22:00:25 2012] [debug] ssl_engine_kernel.c(1884): OpenSSL: Write: SSLv3 read certificate verify A
[Mon Jul 30 22:00:25 2012] [debug] ssl_engine_kernel.c(1903): OpenSSL: Exit: error in SSLv3 read certificate verify A`
[Mon Jul 30 22:00:25 2012] [debug] ssl_engine_kernel.c(1903): OpenSSL: Exit: error in SSLv3 read certificate verify A
[Mon Jul 30 22:00:25 2012] [info] [client 172.16.195.208] %%CryptoAuditEntry:: SSL library error 1 in handshake (server <HOSTNAME>:9005)
[Mon Jul 30 22:00:25 2012] [info] %%CryptoAuditEntry:: SSL Library Error: 336130329 error:1408F119:SSL routines:SSL3_GET_RECORD:decryption failed or bad record mac
[Mon Jul 30 22:00:25 2012] [info] [client <IPADDRESS>] %%CryptoAuditEntry:: Connection closed to child 4 with abortive shutdown (server <HOSTNAME>:9005) 
```

这是java端代码：

```
 SSLContext sc = SSLContext.getInstance("TLS");
                sc.init(null /*keyManagers*/, trustAllCerts,
                          new java.security.SecureRandom());
                HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
                HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();

                // Don't check the hostname against the certificate name
                conn.setHostnameVerifier(new HostnameVerifier() {
                        public boolean verify(String urlHostname,
                            SSLSession session) {
                            return true;
                        }
                    });
                conn.setDoInput(true);
                conn.setDoOutput(true);
                conn.setUseCaches(false);
                conn.setRequestProperty("METHOD", "POST");
                conn.setRequestProperty("Authorization", "Basic " +
                    credentials);
                conn.setRequestProperty("Content-Type", "application/pkcs10");
                conn.setReadTimeout(8000);
                conn.connect(); 
```

另一个有趣的事实是，我可以使用 openssl 使用此命令连接到服务器，没有任何问题。

```
openssl s_client -connect HOST:PORT 
```

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-21T21:17:49.390

我只从某些 java 客户端看到这个错误。调整 apache 的虚拟主机配置中的[SSLProtocol](http://httpd.apache.org/docs/2.4/mod/mod_ssl.html#sslprotocol)以仅允许 TLS 允许客户端连接。

# java - 像在 javascript 中一样在 java 中使用 json

> ID：11878955
> 
> 赞同：3
> 
> 时间：2012-08-09T07:51:16.220
> 
> 标签：java, json

我正在尝试在 java 中读取一个 json 文件来订购它。我知道 javascript 并且在 javascript 中读取 json 的方式很容易做我想做的事情，json 就像一个数组。有没有办法在java中做类似的事情？

我只是找到了 gjson、json-lib、flexjson 库，没有一个关于我所说的例子，所以我想这是不可能的。

我需要在 java 中做，因为它是用于一个安静的服务器并且它全部在 java 中。

我想我应该有一些类来在 json （在 java 中）中创建所有“事物”，并将它们全部放在一个数组中，在订购它们之后......但这让我有很多我没有的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:55:03.467

你读过 gson 用户指南吗？

[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:04:24.420

我强烈推荐杰克逊图书馆：[http ://wiki.fasterxml.com/JacksonHome](http://wiki.fasterxml.com/JacksonHome)

无论如何它不会变得更简单，你有节点对象等，它很容易使用。这是一个简短的指南：[Jackson in 5 minutes](http://wiki.fasterxml.com/JacksonInFiveMinutes)查看解析。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T07:55:31.803

我建议在 Java 中使用 JSon 框架，例如[这些示例](http://www.json.org/java/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T08:07:19.927

没有什么是不可能的 ：）。好的，首先阅读这些库的文档。那些具有直接序列化对象的能力。无需再次重新发明轮子。只有您需要做的是正确操作它们并完成您的工作。

我更喜欢[Jackson](http://jackson.codehaus.org/)，它有一些性能[优势](https://stackoverflow.com/questions/338586/a-better-java-json-library)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-09T09:00:52.377

Use [jackson](https://github.com/FasterXML/jackson)

```
String json = "{ \"k1\": {\"k2\": [{\"message\": \"foo bar\"}, {\"message\": \"Hello World\"} ] } }";
JsonNode obj = new ObjectMapper().readTree(json);
String innerValue = obj.get("k1").get("k2").get(1).get("message").asText();
System.out.println(innerValue); 
```

# extjs - 代理引擎无法从远程服务器获取数据

> ID：11878958
> 
> 赞同：0
> 
> 时间：2012-08-09T07:51:34.107
> 
> 标签：extjs, proxy, connection, extjs4.1

我在使用 ExtJS 时遇到了另一个奇怪的问题。我从我的文件夹 myapp/data/users.json 获取 JSON 数据，但是当我将其更改为指向远程服务器的 URL 地址（http://myserver/users.json 或 .../getusers.php）时，我没有得到任何 json 数据.

我的代码：

```
Ext.define('APP.store.Users', {
    extend : 'Ext.data.Store',
    model : 'APP.model.User',
    autoLoad : true,

    proxy : {
        type : 'ajax',
        url : 'http://myserver.com/users.json', 
        //api : {
        //    //read : 'data/users.json' // it works OK
        //},

        actionMethods: {
            read: 'GET'
        },
        extraParams: {
            action: 'someaction',
            name: 'user'
        },
        noCache: false,             
        reader : {
            type : 'json',
            root : 'users',
            successProperty : 'success',
            getResponseData : function(r) {
                console.log("RESPONSE in reader: ", r);
            }
        },
        afterRequest : function(request, success) {
            console.log(request, success); // success: either true or false
        }, 
```

……

我已经安装了 Apache 服务器来使用 ExtJS，并且可以使用 succ 为 localhost/users.json 加载数据。我认为这个问题可以使我的系统。但是我在关闭防火墙的情况下检查了 Windows XP 和 Windows 7。它没有帮助。

Firebug -> Network 显示远程地址的 Http 代码 200，但在响应选项卡中没有数据（在本例中为 json 结构）。

```
Request headers from Firebug:
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language pl,en-us;q=0.7,en;q=0.3
Access-Control-Request-He...    x-requested-with
Access-Control-Request-Me...    GET
Connection  keep-alive
Host    myserver.com // WAS CHANGED
Origin  http://localhost
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1 
```

我不知道有什么错。一切似乎都很好。

谢谢你的任何提示。

虚假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:00:12.567

文档中对此进行了介绍：

> AjaxProxy 不能用于从其他域检索数据。如果您的应用程序在[http://domainA.com](http://domainA.com)上运行，则它无法从 [http://domainB.com](http://domainB.com)加载数据，因为浏览器有一个内置的安全策略，该策略禁止域通过 AJAX 相互通信。
> 
> 如果您需要从另一个域读取数据并且无法设置代理服务器（某些软件在您自己域的 Web 服务器上运行并透明地将请求转发到[http://domainB.com](http://domainB.com)，使其看起来像它们实际上来自[http://domainA.com](http://domainA.com)），您可以使用 Ext.data.proxy.JsonP 和一种称为 JSON-P（带有 Padding 的 JSON）的技术，只要服务器在[http:// /domainB.com](http://domainB.com)设置为支持 JSON-P 响应。有关详细信息，请参阅 JsonPProxy 的介绍文档。

# logging - 在 zope 服务器中读取最近的日志条目

> ID：11878963
> 
> 赞同：0
> 
> 时间：2012-08-09T07:51:55.013
> 
> 标签：logging, error-handling, zope

如何在 zope 应用程序服务器中的 python 脚本上获取最近的日志条目（错误）。

我注意到一个[getLogEntries()](http://apidoc.zope.org/++apidoc++/Code/zope/error/error/ErrorReportingUtility/index.html)方法，但不知道如何使用它。请帮忙。

我尝试运行以下代码。

```
from zope.error.error import ErrorReportingUtility
logs = ErrorReportingUtility.getLogEntries() 
```

收到以下错误

```
Error Type: Unauthorized
Error Value: import of 'zope.error.error' is unauthorized 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:37:47.170

您可以使用采集：

```
for err in context.error_log.getLogEntries():
    print err 
```

# java - Websphere 7.X。通过 RMI 设置启用的 JMX 连接

> ID：11878964
> 
> 赞同：0
> 
> 时间：2012-08-09T07:52:10.573
> 
> 标签：java, websphere, rmi, jmx, websphere-7

如何在 Websphere 7.x 中通过 RMI 启用 JMX 连接？我有一个要求：

> 所以服务器必须通过 RMI 启用 JMX 连接。

服务器是否默认通过 RMI 启用 JMX 连接？或者我必须将`Application servers > server1 > Administration services`值**远程连接器**从*SOAPConnetor*更改为*RMIConnector*并将值**本地连接器** 从*IPC 连接器*更改为*RMIConnector*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:51:58.580

默认情况下启用 RMI 连接器（从某种意义上说，任何 WebSphere 实例都通过 RMI 接受 JMX 连接）。“管理服务”下的“本地连接器”和“远程连接器”设置的用途不同：它们决定了 WebSphere 实例之间使用的协议。

# javascript - 超链接单击以加载新页面并执行 javascript

> ID：11878965
> 
> 赞同：-3
> 
> 时间：2012-08-09T07:52:20.403
> 
> 标签：javascript, html

我有两页，`a.html`和`b.html`。

在 b.html 中有两个按钮`b1`，`b2`单击时分别以和`pop()`传递参数运行 javascript 函数。现在运行 pop 会根据单击的按钮更改 my 的内容。`b1``b2``b.html`

现在我有两个超链接`a1`，并且`a2`在`a.html`. 我想在这里实现的是，如果我点击`a1`我想`b.html`被加载并且要显示的内容就像点击之后一样`b1`。

所以基本上当我点击`a1`时`a.html`，我想`b.html`被加载，然后`pop()`使用`b1`as 参数执行并显示结果页面。可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:58:30.990

您可以通过 URL 参数来实现，例如 a.html?value=test。

上`a.html`，单击按钮将带您到`b.html?dopop=true`。

然后，您可以在页面加载时实现一些 Javascript（`$(document).load(function() {});`，并且有很多 jQuery 插件来处理参数）来检查是否指定了 dopop 或 true。如果是，请执行该功能。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-09T07:58:57.147

如果你使用 jQuery，你可以这样做：

```
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">
$(function(){
var content = $("div#content");

$("a#1").click(function(){
   content.load("a.html");
});

$("a#2").click(function(){
   content.load("b.html");
});

});
</script>

<a id="1" href="#">Click A</a>
<a id="2" href="#">Click B</a>

<div id="content"></div> 
```

更多关于 jQuery 加载的信息可以在这里找到：http: [//api.jquery.com/load/](http://api.jquery.com/load/)

# r - 如何在 R 中为绘图创建符号文本字符串

> ID：11878974
> 
> 赞同：1
> 
> 时间：2012-08-09T07:52:48.467
> 
> 标签：r, text, plot, expression, symbols

我有一个情节，想在情节区域添加一些回归统计数据（例如 F、R2、p）。我熟悉`text()`，但一直无法找到全面的信息来源，其中包含有关如何使用数学符号、子和上标等构建文本字符串的示例。非常感谢任何具有详细示例的来源。

例如，我有一个简单的线性回归，我想从中提取统计数据并将它们添加到我的绘图中。例如

```
reg1 <- lm(WW1 ~ PC1, data = WW_Data) 
```

我想要像`F1,69 = 14.38, p = < 0.001, R2adj = 0.16`“1,69”和“adj”是下标，而“p”是*斜体*的东西。

**编辑**：

感谢您`@Backlin`对我的问题的出色回答。我已经扩展了一点，如果你得到一个非常重要的 p 值，代码会替换为“< 0.001”并将所有统计数据四舍五入到小数点后 2 位，除了我四舍五入到 3 的 p 值。

```
WW_Data <- data.frame(WW1=rnorm(10), PC1=1:10)
reg1 <- lm(WW1~PC1, WW_Data)
sreg1 <- summary(reg1)
plot(0, 0)
text(0, .2, eval(substitute(
    expression(list(F[list(fn,fd)]==fv,italic(p)==pv,R[adj]^2==R2adj)),
        list(fv = round(sreg1$fstatistic[1],2), fn = sreg1$fstatistic[2],
             fd = sreg1$fstatistic[3], pv = ifelse(sreg1$coefficients["PC1",4] < 0.001, "< 0.001",round(sreg1$coefficients["PC1",4],3)),
             R2adj = round(sreg1$adj.r.squared,2))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:34:23.983

我自己也为此苦苦挣扎，但实际上都是`?plotmath`. 你的表达方式如下，

```
# Fixed expression
text(x, y, expression(list(F[list(1,69)]==14.38,italic(p)<0.001,R[adj]^2==0.16)))

# Using the values of your lm
sreg1 <- summary(reg1)
text(x, y, eval(substitute(
    expression(list(F[list(fn,fd)]==fv,italic(p)==pv,R[adj]^2==R2adj)),
        list(fv = sreg1$fstatistic[1], fn = sreg1$fstatistic[2],
             fd = sreg1$fstatistic[3], pv = sreg1$coefficients["PC1",4],
             R2adj = sreg1$adj.r.squared)))) 
```

这是一个看起来像的虚拟示例。

```
WW_Data <- data.frame(WW1=rnorm(10), PC1=1:10)
reg1 <- lm(WW1~PC1, WW_Data)
sreg1 <- summary(reg1)
plot(0, 0)
text(0, .2, eval(...)) # The expression above 
```

![在此处输入图像描述](../Images/f0b34a7420453a1671206df2066c5070.png)

# matlab - 来自文件中 xyz 数据的 3d 绘图

> ID：11878982
> 
> 赞同：1
> 
> 时间：2012-08-09T07:53:04.993
> 
> 标签：matlab, plot

有人可以告诉我如何在 matlab 中绘制 3d 图，如果我在一个文件中以三列格式保存数据，如下所示：

```
48.000000     0.017723     0.400000
48.500000     0.017467     0.400000
49.000000     0.017209     0.400000
49.500000     0.016943     0.400000
50.000000     0.016664     0.400000
50.500000     0.016361     0.400000
51.000000     0.016022     0.400000
51.500000     0.015628     0.400000
52.000000     0.015151     0.400000
52.500000     0.014539     0.400000
53.000000     0.013709     0.400000 
```

每列代表一个变量（3 个轴），所有 3 个都不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:34:54.093

使用[fscanf](http://www.mathworks.nl/help/techdoc/ref/fscanf.html)和[plot3](http://www.mathworks.nl/help/techdoc/ref/plot3.html)：

```
fid=fopen('data.txt');
XYZ=fscanf(fid,'%f %f %f',[3 Inf]);
fclose(fid);

plot3(XYZ(1,:), XYZ(2,:), XYZ(3,:)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T05:32:35.707

试试这段代码，

```
a=importdata('file.txt');%file_name.extension
plot3(a(:,1),a(:,2),a(:,3)); 
```

这很容易，也很好用。

# debugging - 使用日志代理/MitM 进行 NPAPI 调试

> ID：11878986
> 
> 赞同：1
> 
> 时间：2012-08-09T07:53:36.160
> 
> 标签：debugging, proxy, npapi, man-in-the-middle

我正在调试/破解一个 NPAPI 浏览器插件，我想记录/窃听浏览器和插件之间的通信，以确切了解插件在做什么。你知道是否有现成的工具吗？我没有找到。

我的动机是 a) 分析插件并 b) 评估它的安全性。

我认为它通常应该可以作为中间人，即窃听者，它将充当 a) 作为浏览器的插件和 b) 作为插件的浏览器，并且只传递所有命令（方法调用）。因此非常简单明了的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:27:28.453

我不知道现有的实用程序，但构建起来相对简单。
您基本上只需要注册您的插件而不是原始插件并实现和转发`NP_*`,`NPN_*`和`NPP_*`功能。

另一种方法是仅跟踪来自浏览器端的调用（通过[部分记录](https://mxr.mozilla.org/mozilla-central/source/dom/plugins/base/nsPluginLogging.h)或仅[通过符号服务器和调试器进行跟踪](https://developer.mozilla.org/en-US/docs/Using_the_Mozilla_symbol_server)），但是您可能不得不担心进程内代码路径的一些差异与进程外插件相比。

# asp.net-mvc-3 - 在 MVC3 的一个视图中使用不同的两个 ado.net 实体模型

> ID：11878993
> 
> 赞同：0
> 
> 时间：2012-08-09T07:53:56.963
> 
> 标签：asp.net-mvc-3

如何在 MVC3 的一个视图中使用两个不同的 ado.net 实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:01:58.473

您可以创建一个封装这两个实体的模型。

```
public class MyViewModel
{
    public AdoEntityA { get; set; }        
    public AdoEntityB { get; set; }
} 
```

或者，您可以创建一个仅包含两个实体所需的特定字段的视图模型。

Automapper 是域实体和视图模型之间非常有用的映射。

# c# - 如何使用 Word 12 版组件在 Word 97 中另存为？

> ID：11878999
> 
> 赞同：1
> 
> 时间：2012-08-09T07:54:45.183
> 
> 标签：c#, office-automation, office-pia

我在 C# 中使用 Word 2007 组件。

我想将 Word 文档另存为 Word97(-2003) 文档，因为不是每个人都使用 Word 2007/2010。

我认为使用以下命令很容易

```
document.SaveAs(AFullFileName, WdSaveFormat.wdFormatDocument97); 
```

但是随后会显示 SaveAs 对话框，并假设我想将其保存为 docx 文件。

![另存为对话框](../Images/7e28e26f9c9d23653a3285ce6ac74798.png)

我注意到 WdSaveFormat.wdFormatDocument-flag 与 WdSaveFormat.wdFormatDocument97-flag 具有相同的值。所以我认为我必须做的不仅仅是在 SaveAs 命令中使用这些参数。

有谁能够帮助我？我希望格式正确，而不是看到“另存为”对话框。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:48:04.337

正如评论中已经建议的那样，您很可能必须检查保存文件名（即`AFullFileName`参数）扩展名是否正确设置为`.doc`，而不是`.docx`. Word 出于安全原因强制执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:54:00.543

我通过将文档保存在另一个文件名下解决了这个问题。

我尝试使用 Word 2007 将文件另存为 doc-file。但似乎无法覆盖该文件。我试图更改另存为的类型。我多次选择Word97-doc。但是什么都没得救。并且每次类型返回为 docx 文档。

最后，当我更改文件名时，该文档保存为 Word97 文档。