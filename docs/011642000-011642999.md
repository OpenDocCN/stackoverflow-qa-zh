# StackOverflow 问答 11642000-11642999

# sql - 关系表上的 SQL 查询

> ID：11642001
> 
> 赞同：0
> 
> 时间：2012-07-25T02:49:46.430
> 
> 标签：sql

员工可以在多个部门工作，每个部门可以有多个员工。因此需要一个关系表

表：
EMP（eid、ename、eage、esalary）
作品（eid、did、pct_time）
部门（did、dname、预算、managerid）

查找所有从事软件和硬件工作的员工：

```
SELECT e.ename FROM EMP e, Works w, Dept d 
WHERE e.eid = w.eid AND w.did = d.did AND d.did = 
(SELECT did FROM dept WHERE dname = 'Hardware' OR 'Software') 
```

根据乔恩：

```
SELECT e.ename FROM EMP e OR Works w OR Dept d 
WHERE e.eid = w.eid AND w.did = d.did AND d.did = 
(SELECT did FROM dept WHERE dname = 'Hardware' OR 'Software') 
```

而且我只是不知道如何确保在同一 eid 下的硬件和软件在 Works 中有两个条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:32:29.423

Here's an alternative formulation of the query:

```
SELECT e.*
  FROM emp AS e
  JOIN (SELECT w.eid
          FROM works AS w JOIN dept AS d
            ON d.did = w.did AND d.dname = 'Software') AS s
    ON s.eid = e.eid
  JOIN (SELECT w.eid
          FROM works AS w JOIN dept AS d
            ON d.did = w.did AND d.dname = 'Hardware') AS h
    ON h.eid = e.eid 
```

This has two symmetric sub-queries, one generating the employee IDs for the Software department, one generating employee IDs for the Hardware department. The selected employees are those whose ID is listed in both departments (because they're all inner joins).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:06:24.017

```
select e.name
  from emp e, works h_w, dept h_d, works s_w, dept s_d
 where e.eid = h_w.eid
   and e.eid = s_w.eid
   and h_w.did = h_d.did
   and h_d.dname = 'Hardware'
   and s_w.did = s_d.did
   and s_d.dname = 'Software' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T03:08:05.680

以下是有关如何解决该问题的步骤：

*   `works`首先，获取部门为硬件或软件的表中***的***所有行
*   然后，对于任何员工，如果存在两行，则意味着他/她在两个部门都工作。
*   对于任何员工，如果存在少于两行，则意味着他/她只为两者之一工作，或者根本没有。
*   我们需要检索正好有两行的员工。

所以我们首先可以做的是从`works`表中选择，将它与表连接起来`dept`，并过滤掉任何非硬件或软件的部门：

```
SELECT a.*
FROM works a
INNER JOIN dept b ON a.did = b.did
WHERE b.dname IN ('Hardware','Software') 
```

然后我们要做的是按每个员工分组，这将使我们能够访问汇总信息，例如每个员工的行数，或 sum/max/min/avg/etc。的其他列。我们必须使用计数：

```
SELECT a.eid
FROM works a
INNER JOIN dept b ON a.did = b.did
WHERE b.dname IN ('Hardware','Software')
GROUP BY a.eid
HAVING COUNT(1) = 2 
```

这只给了我们`eid`恰好有两行的 s（即适用于软件和硬件部门）。

但`eids`还不够。我们想要有关员工的全部信息，因此我们必须包装整个查询并将其与员工表连接以获取其余信息：

```
SELECT a.*
FROM emp a
INNER JOIN 
(
    SELECT a.eid
    FROM works a
    INNER JOIN dept b ON a.did = b.did
    WHERE b.dname IN ('Hardware','Software')
    GROUP BY a.eid
    HAVING COUNT(1) = 2
) b ON a.eid = b.eid 
```

* * *

你有它：在软件和硬件部门工作的员工。您可以单独执行上述每个查询，以查看我们如何得出最终解决方案的中间步骤。

# html - 第一行图 片和第二行绿色单元格之间的空白

> ID：11642003
> 
> 赞同：1
> 
> 时间：2012-07-25T02:49:57.257
> 
> 标签：html, html-table, whitespace

我最近刚刚再次为时事通讯重新编码，并遇到了臭名昭著的空白问题。但是，我的基本代码中没有任何内容，如果您能帮助摆脱我的第一行横幅和绿色第二行之间的空白区域，我将不胜感激。

![带白色的快照 [bar](../Images/62058eac30c2042ff4376dbdddaef084.png)

代码如下：

```
<table style="vertical-align: bottom; background-color: rgb(0, 136, 64); width: 100%;">
    <tbody>
        <tr>
        <a href="www.whatever.com"><img style="border: 0; width: 800px;" alt="Logo.jpg"></a>
    </tr>   
    <tr>
        <td style="text-align: right; padding-right: 15px;">31 July 2012</td>
        </tr>
    </tbody>
</table> 
```

如何摆脱单元格之间的空白？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:56:31.647

您的第一个 TR 缺少 TD。这可能会解决它：

```
<table style="vertical-align: bottom; background-color: rgb(0, 136, 64); width: 100%;">
  <tbody>
        <tr><td style="margin: 0; padding: 0;"><a href="www.whatever.com" style="padding: 0; margin: 0;"><img style="border: 0; margin: 0; width: 800px;" alt="Logo.jpg"></a></td></tr>   
        <tr><td style="text-align: right; margin: 0; padding: 0; padding-right: 15px;">31 July 2012</td></tr>
  </tbody>
</table> 
```

# spring - 在同一个项目中同时使用 EL 1.2 和 2.2 语法 (el-api-2.2.)（与 1.2 一起工作的 JSP 和与 2.2 一起工作的 JSF 共存）

> ID：11642004
> 
> 赞同：2
> 
> 时间：2012-07-25T02:49:59.393
> 
> 标签：spring, jsf, jakarta-ee, maven, el

我有一个项目有一个特殊问题，我在一个项目中同时使用了两个版本的 el-impl jar；我使用 v1.2 来管理我的 jsp 和 2.2 来管理我的 JSF 文件，我想要一个解决方案来共存这两个版本，因为我需要我的 jsp 和我的 jsf 文件

问题是，当我添加 EL 2.2 相关 `param-context`时，jsp 不起作用，我得到这个异常，因为 jsp 文件不适用于 2.2 版本：

```
com.sun.faces.config.ConfigurationException: It appears the JSP version of the container is older than 2.1 and unable to locate the EL RI expression factory, com.sun.el.ExpressionFactoryImpl.  If not using JSP or the EL RI, make sure the context initialization parameter, com.sun.faces.expressionFactory, is properly set. 
```

当我删除相关的 EL 2.2 时 `param-context`，我指的是 web.xml 中的这一部分：

```
 <context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
  </context-param> 
```

如果删除，则不支持 el-impl2.2，因此当我访问 JSF 文件时，我会收到此异常（因为我不支持 2.2 版本）

```
 org.apache.el.parser.ParseException: Encountered " "(" "( "" at line 1, column 20.
    Was expecting one of:
        "}" ...
        "." ...
        "[" ...
        ">" ...
        "gt" ...
        "<" ...
        "lt" ...
        ">=" ...
        "ge" ...

    ...

Jul 25, 2012 5:39:24 PM com.sun.faces.lifecycle.ELResolverInitPhaseListener populateFacesELResolverForJsp
INFO: JSF1027: [null] The ELResolvers for JSF were not registered with the JSP container 
```

有人可以帮助我解决将两个 EL jar 都用于同一个项目的解决方案，以允许我通过使用 Maven 的方式与包含 JSP 和 JSF 文件的项目竞争，所以这是我的依赖项的一部分：

```
<dependency>
      <groupId>org.glassfish.web</groupId>
      <artifactId>el-impl</artifactId>
      <version>2.2</version>
        <scope>provided</scope>
     </dependency> 

      <dependency>
<groupId>javax.el</groupId>
<artifactId>el-api</artifactId>
<version>2.2</version>
<scope>provided</scope>
</dependency> 
<dependency>
          <groupId>com.sun.faces</groupId>
          <artifactId>jsf-api</artifactId>
          <version>2.1.6</version>
        </dependency>
      <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
          <groupId>com.sun.faces</groupId>
          <artifactId>jsf-impl</artifactId>
          <version>2.1.6</version>
        </dependency> 
```

我的 web.xml 的一部分：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app 
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        version="2.5">

        <filter>
                <filter-name>springSecurityFilterChain</filter-name>
                <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
        </filter>

        <filter-mapping>
                <filter-name>springSecurityFilterChain</filter-name>
                <url-pattern>/*</url-pattern>
        </filter-mapping>

        <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
            /WEB-INF/spring-security.xml
            /WEB-INF

    /applicationContext.xml
                </param-value>
            </context-param>

            <context-param>     
            <param-name>com.sun

.faces.expressionFactory</param-name>
        <param-value>org.jboss.el.ExpressionFactoryImpl</param-value>   
    </context-param>

        <!--  to enable Spring MVC we need to add in this web.xml: -->
        <servlet>
            <servlet-name>spring</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>2</load-on-startup>
        </servlet>

        <servlet>
            <servlet-name>Faces Servlet</servlet-name>
            <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
          </servlet>

        <servlet-mapping>
            <servlet-name>spring</servlet-name>
            <url-pattern>/me/*</url-pattern>
        </servlet-mapping>

        <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
        </listener>
            <listener>
            <listener-class>
                org.springframework.web.context.request.RequestContextListener
            </listener-class>
          </listener>

        <servlet-mapping>
            <servlet-name>Faces Servlet</servlet-name>
            <url-pattern>*.jsf</url-pattern>
          </servlet-mapping>
          <servlet-mapping>
            <servlet-name>Faces Servlet</servlet-name>
            <url-pattern>*.faces</url-pattern>
          </servlet-mapping>

        <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
     </servlet-mapping>
    </web-app> 
```

面孔-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

    <!-- JSF and Spring are integrated -->

    <application>
        <el-resolver>
            org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
    </application>

</faces-config> 
```

我也在使用瓷砖，如果这会导致任何问题，请告诉我，谢谢你帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:12:22.777

这是绝对不可能的。

但是，您可以在两个单独的项目中运行它们，但直接在项目中包含适当的 EL jar，并从 servlet 容器 lib 文件夹中删除 servlet 容器的预打包 EL jar。这至少允许两个应用程序在相同的 Web 容器、服务器、DNS 名称和端口号上运行。

# c - 将 C 程序分离为 void 函数

> ID：11642006
> 
> 赞同：0
> 
> 时间：2012-07-25T02:50:30.143
> 
> 标签：c, void

我是编程新手。我试图把这个程序分成更小的部分。首先，我正在查看的部分是项目 3.2：InitializeAccumulators。该程序正在运行，但数学一直在创建超长数字。其次，我正在查看第 3.7 部分：AddDetailToAccumulators。这个程序不会运行。工资率变量存在问题。有什么想法吗？太感谢了！

```
#include <stdio.h>
#include <stdlib.h>
#include "TAXRATES.h"
#include "EmployeeRecord.h"
#include "CalcTaxes.o"
#define ADDR(var) &var
#define REPORTCOLUMNHEADINGS1 "Employee           Pay    Reg Hrs  Gross    Fed     SSI     Net\n"
#define REPORTCOLUMNHEADINGS2 "Name               Rate   OVT Hrs  Pay      State   Defr    Pay\n"
#define BARS                  "========           =====  =======  =======  ======  ======  =======\n\n"  
#define REPORTCOLUMN1         "%s, %s\t%8.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n"
#define REPORTCOLUMN2         "%32.2f%18.2f%8.2f\n\n"

void PrintReportHeadings(FILE *ReportFile);//3.1
void InitializeAccumulators(float *totpr,float *totreg,float *totovt,float *totgp,float *totfed,
                        float *totstt,float *totsst,float *totdef,float *totnp,int *empCount);//3.2
extern void CalculateTaxes(float gross, float defr, float *ft, float *st, float *ssit);//3.5
void AddDetailToAccumulators(int *empCount,float *totpr,float *totfed,float *totreg,float *totovt,
                         float *totgp,float *totstt,float *totsst,float *totnp,float *totdef,float *r.payrate);//3.7

int main()
{
    EmployeeRecord r;

    float reghours,ovthours; 
    float ft,st,ssit;
    float totpr,totreg,totovt,totgp,totfed,totstt,totsst,totdef,totnp;
    float avgpr,avgreg,avgovt,avggp,avgfedt,avgstt,avgsst,avgdef,avgnp;
    char answer;
    int empCount;
    FILE *ReportFile;

    void PrintReportHeadings(FILE *ReportFile);//3.1            
    void InitializeAccumulators(float *totpr,float *totreg,float *totovt,float *totgp,float *totfed,
                        float *totstt,float *totsst,float *totdef,float *totnp,int *empCount);//3.2
    do
    {

      printf("Enter employee's name: ");  // input section
      scanf("%s%s",r.firstname,r.lastname);
      printf("Enter hourly pay rate: ");
      scanf("%f",ADDR(r.payrate));
      printf("Enter deferred amount: ");
      scanf("%f",ADDR(r.defr));
      printf("Enter hours worked this pay period: ");
      scanf("%f",ADDR(r.hours));
          if (r.hours > 40)
          {
               reghours = 40;
               ovthours = r.hours - 40;
          }
          else {
               reghours = r.hours;
               ovthours = 0;
          }      
      r.gross = (reghours * r.payrate)+(ovthours * r.payrate * 1.5);
      CalculateTaxes(r.gross,r.defr,&ft,&st,&ssit);//Call 3.5 CalculateTaxes 

      r.net = r.gross - ft - st - ssit;
      printf(REPORTCOLUMNHEADINGS1);
      printf(REPORTCOLUMNHEADINGS2);
      printf(BARS); 
      printf(REPORTCOLUMN1,r.lastname,r.firstname,r.payrate,reghours,r.gross,ft,ssit,r.net); 
      printf(REPORTCOLUMN2,ovthours,st,r.defr);   
          ReportFile = fopen("report.txt", "a");
          fprintf(ReportFile,REPORTCOLUMN1,r.lastname,r.firstname,r.payrate,reghours,r.gross,ft,ssit,r.net); 
          fprintf(ReportFile,REPORTCOLUMN2,ovthours,st,r.defr); 
          fclose(ReportFile);

void AddDetailToAccumulators(int *empCount,float *totpr,float *totfed,float *totreg,float *totovt,
                         float *totgp,float *totstt,float *totsst,float *totnp,float *totdef,float *r.payrate);//3.7

      avgpr = totpr / empCount;
      avgfedt = totfed / empCount;
      avgreg = totreg / empCount;
      avgovt = totovt / empCount;
      avggp = totgp / empCount;
      avgstt = totstt / empCount;
      avgsst = totsst / empCount;
      avgnp = totnp / empCount;
      avgdef = totdef / empCount;

          fflush(stdin);
          printf(" Repeat (Y/N)? : ");
          scanf("%c",ADDR(answer)); 
    } while (answer == 'Y' || answer == 'y');
        printf("\n"); // print one line for spacing 
   printf("\nTotals %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",totpr,totreg,totgp,totfed,totsst,totnp); 
   printf("%32.2f%18.2f%8.2f\n",totovt,totstt,totdef); 
   printf("\nAverages %15.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",avgpr,avgreg,avggp,avgfedt,avgstt,avgnp); 
   printf("%32.2f%18.2f%8.2f\n",avgovt,avgsst,avgdef);
          ReportFile = fopen("report.txt", "a");
          fprintf(ReportFile,"\nTotals %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",totpr,totreg,totgp,totfed,totsst,totnp); 
          fprintf(ReportFile,"%32.2f%18.2f%8.2f\n",totovt,totstt,totdef); 
          fprintf(ReportFile,"\nAverages %15.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",avgpr,avgreg,avggp,avgfedt,avgsst,avgnp); 
          fprintf(ReportFile,"%32.2f%18.2f%8.2f\n",avgovt,avgstt,avgdef);
          fclose(ReportFile);   
    fflush(stdin);
    getchar();
    return 0;
}

void PrintReportHeadings(FILE *ReportFile)//3.1
{    
 ReportFile = fopen("report.txt", "w");
 fprintf(ReportFile,REPORTCOLUMNHEADINGS1);
 fprintf(ReportFile,REPORTCOLUMNHEADINGS2);
 fprintf(ReportFile,BARS);
 fclose(ReportFile);
}
void InitializeAccumulators(float *totpr,float *totreg,float *totovt,float *totgp,float *totfed,
                        float *totstt,float *totsst,float *totdef,float *totnp,int *empCount)//3.2
{
 empCount = 0;  
 totpr = totreg = totovt = totgp = totfed = totstt = totdef = totsst = totnp = 0;
}
void AddDetailToAccumulators(int *empCount,float *totpr,float *totfed,float *totreg,float *totovt,
                         float *totgp,float *totstt,float *totsst,float *totnp,float *totdef,float *r.payrate)
{
 empCount = empCount + 1;
      totpr = totpr + payrate;
      totfed = totfed + ft;
        if (r.hours > 40)
          {
               reghours = 40;
               ovthours = r.hours - 40;
          }
          else {
               reghours = r.hours;
               ovthours = 0;
          }
      totreg = totreg + reghours;    
      totovt = totovt + ovthours;
      totgp = totgp + r.gross;
      totstt = totstt + st;
      totsst = totsst + ssit;
      totnp = totnp + r.net;
      totdef = totdef + r.defr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:57:10.230

您的变量是指针类型，但随后您将它们用作原语。

那可不好。

您还需要研究按引用传递和按值传递 InitializeAccumulators() 只是没有按照您的假设进行。

# python - VIM python 文件类型特定缩进在一个列表的 50 行后失败

> ID：11642019
> 
> 赞同：2
> 
> 时间：2012-07-25T02:51:52.370
> 
> 标签：python, list, vim, indentation, auto-indent

我目前正在重新格式化一个 python 项目以遵循 4 个空格缩进样式。该项目在 VIM 中使用以下插件完成：fugitive、snipmate、surround、git、supertab、minibufexpl、command-t。pyflakes-pathogen、ack、gundo、pydoc、pep8、py.test、makegreen、tasklist、nerdtree、ropevim。

我的 .vimrc 目前是：

```
set tabstop=4
set shiftwidth=4
set expandtab

let mapleader=","

filetype off

call pathogen#runtime_append_all_bundles()
call pathogen#helptags()

set foldmethod=indent
set foldlevel=99

map <leader>td <Plug>TaskList
map <leader>g :GundoToggle<CR>

syntax on
filetype on
filetype plugin indent on

let g:pyflakes_use_quickfix = 0

let g:pep8_map='<leader>8'

au FileType python set omnifunc=pythoncomplete#Complete
let g:SuperTabDefaultCompletionType = "context"

set completeopt=menuone,longest,preview 
```

该项目不是我的，我想保持代码在功能上与原始代码保持不变。

该代码由一些赋值操作组成。每个的左侧是变量名，右侧是一个非常非常长的列表，其中包含多个嵌套列表。

如果我尝试使用 VIM 的重新缩进功能 "gg=G" 甚至 "100==" 从分配开始，VIM 将正确缩进分配右侧的前 50 行。然而，在右侧第 50 行之后，VIM 开始将第二级缩进另外四个空格。

```
animations = [
        ["stand", 0, amf_client_prediction,
            #   [3.0, "myanim", 0, 50, arf_cyclic|arf_loop_pos_0_25],
            [3.0, "anim_human", 50, 52, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.25],
            [3.0, "anim_human", 60, 62, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.75],
            [3.0, "anim_human", 70, 72, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.25],
            [3.0, "anim_human", 80, 82, arf_use_stand_progress|arf_cyclic|arf_two_handed_blade, 0, (0, 0, 0), 0.5],
            ##   [35.0, "stand_woman", 0, 1059, arf_use_stand_progress|arf_cyclic|arf_two_handed_blade, 0, (0, 0, 0), 0.5],
            ##   [43.0, "stand_woman_public", 0, 1313, arf_use_stand_progress|arf_cyclic|arf_two_handed_blade, 0, (0, 0, 0), 0.5],
            #  [35.0, "tavern_stand", 0, 472, arf_cyclic|arf_loop_pos_0_25],
            ],
        ["stand_man", 0, amf_client_prediction,
            [11.0, "stand_man", 0, 315, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.25],
            ],
        ["stand_player_first_person", 0, amf_client_prediction,
            [3.5, "anim_human", 90, 100, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.25],
            [3.5, "anim_human", 110, 120, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.25],
            ],
        ["jump", acf_enforce_lowerbody, amf_priority_jump|amf_play|amf_client_prediction|amf_continue_to_next,
            ##   [1.09, "jump", 22, 48, arf_blend_in_1],
            [1.0, "jump", 22, 46, arf_blend_in_1],
            ##   [0.8, "anim_human", 270, 272, arf_blend_in_4],
            ],
        ["jump_loop", acf_enforce_lowerbody, amf_priority_jump|amf_play|amf_client_prediction,
            ##   [0.8, "jump_loop", 0, 30, arf_blend_in_2|arf_cyclic],
            [0.5, "jump_loop", 0, 14, arf_blend_in_3|arf_cyclic],
            ],
        ["jump_end", acf_enforce_lowerbody, amf_priority_jump_end|amf_play|amf_client_prediction,
            ##   [0.1, "jump", 48, 55, arf_blend_in_1],
            [0.3, "jump", 48, 55, arf_blend_in_2],
            ],
        ["jump_end_hard", acf_enforce_lowerbody, amf_priority_jump_end|amf_play|amf_client_prediction,
            ##   [0.8, "jump_end_hard", 29, 54, arf_blend_in_1],
            [0.6, "jump_end_hard", 36, 54, arf_blend_in_1],
            ],
        ["stand_unarmed", 0, amf_client_prediction,
            [8, "noweapon_cstance", 0, 100, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.25],
            ],
        ["stand_single", 0, amf_client_prediction,
            [9.0, "sword_loop01", 0, 200, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.25],
            ],
        ["stand_greatsword", 0, amf_client_prediction,
            [6.0, "greatsword_cstance", 0, 91, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.25],  
            ],
        ["stand_staff", 0, amf_client_prediction,
            [2.0, "staff_cstance", 0, 60, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.0],  
            ],
        ["stand_crossbow", 0, amf_client_prediction,
            [2.0, "staff_cstance", 0, 60, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.0],  
            ],
        ["turn_right", acf_enforce_lowerbody, amf_play|amf_client_prediction,
                [0.95, "stand_man", 0, 30, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.25], #TODO
                ],
        ["turn_left", acf_enforce_lowerbody, amf_play|amf_client_prediction,
                [0.95, "stand_man", 0, 30, arf_use_stand_progress|arf_cyclic, 0, (0, 0, 0), 0.25], #TODO
                ],
        ["turn_right_single", acf_enforce_lowerbody, amf_play|amf_client_prediction,
                [0.95, "turn_man_onehanded", 0, 23, arf_cyclic|blend_in_walk|arf_make_walk_sound,pack2f(0.4,0.9), (0, 0, 0), 0.0],
                ],
        ["turn_left_single", acf_enforce_lowerbody, amf_play|amf_client_prediction,
                [0.95, "turn_man_onehanded", 30, 53, arf_cyclic|blend_in_walk|arf_make_walk_sound,pack2f(0.4,0.9), (0, 0, 0), 0.0],
                ],
        ["turn_right_staff", acf_enforce_lowerbody, amf_play|amf_client_prediction,
                [0.95, "turn_man_staff", 0, 20, arf_cyclic|blend_in_walk|arf_make_walk_sound,pack2f(0.4,0.9), (0, 0, 0), 0.0],
                ],
        ["turn_left_staff", acf_enforce_lowerbody, amf_play|amf_client_prediction,
                [0.95, "turn_man_staff", 30, 50, arf_cyclic|blend_in_walk|arf_make_walk_sound,pack2f(0.4,0.9), (0, 0, 0), 0.0],
                ],
        ["turn_right_greatsword", acf_enforce_lowerbody, amf_play|amf_client_prediction,
                [0.95, "turn_man_greatsword", 0, 20, arf_cyclic|blend_in_walk|arf_make_walk_sound,pack2f(0.4,0.9), (0, 0, 0), 0.0],
                ],
        ["turn_left_greatsword", acf_enforce_lowerbody, amf_play|amf_client_prediction,
                [0.95, "turn_man_greatsword", 30, 50, arf_cyclic|blend_in_walk|arf_make_walk_sound,pack2f(0.4,0.9), (0, 0, 0), 0.0],
                ],
        ["prepare_kick_0", acf_enforce_lowerbody, amf_priority_kick|amf_play|amf_client_prediction|amf_continue_to_next,
                [0.05, "kick_rightleg", 10, 12, arf_blend_in_3],
                ], 
```

VIM 是否使用某种缓冲区来设置将跟踪缩进的最大行数？如果是这样，有没有办法增加这个缓冲区的大小？

否则，如果这仅仅是内置缩进逻辑的错误，是否存在更强大的第三方解决方案可以为这种特定情况提供缩进功能？

如果需要更多信息，我会更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T03:40:06.757

hmmm 在 $VIMRUNTIME/indent/python.vim 中它看起来像是在扫描过去的 50 行以获取上下文

```
let s:maxoff = 50        " maximum number of lines to look backwards for () 
```

您可以通过检查当前缓冲区的 indentexpr 来查看 VIM 用于缩进的内容

```
:set indentexpr? 
```

返回， `indentexpr=GetPythonIndent(v:lnum)`

`filetype plugin indent on`.vimrc 中的内容是加载 python 文件时加载它的内容

# mysql - Mysql 用一个模式重命名多个表

> ID：11642020
> 
> 赞同：0
> 
> 时间：2012-07-25T02:52:14.883
> 
> 标签：mysql, rename, multiple-tables

我知道怎么跑

```
RENAME TABLE onetable_test TO onetable; 
```

但是有没有一种方法可以用一种模式重命名许多表并且不要写很多代码

```
RENAME TABLE onetable_test TO onetable;
RENAME TABLE twotable_test TO twitable;
RENAME TABLE threetable_test TO threetable;    
... 
```

我正在使用mysql。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T06:27:43.597

使用下面的存储过程::

```
DELIMITER $$ 
```

创造

```
PROCEDURE `Rename_Tables`()

BEGIN
DECLARE done INT DEFAULT FALSE;
DECLARE tableName VARCHAR(50);
DECLARE newTableName VARCHAR(70);
DECLARE t_query VARCHAR(500);
DECLARE cur1 CURSOR FOR SELECT table_name FROM information_schema.tables WHERE table_name LIKE '%table_test' AND table_schema='test' ;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

OPEN cur1;

read_loop: LOOP
    FETCH cur1 INTO tableName;
    IF done THEN
        LEAVE read_loop;
    END IF;
    SET newTableName = SUBSTRING(tableName, 1,LOCATE('_',tableName)-1);
    SET t_query = CONCAT('RENAME TABLE ', tableName, ' TO ', newTableName);

    SET @myQuery = t_query;
    PREPARE stmt FROM @myQuery;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
END LOOP;

END$$ 
```

分隔符；

将 table_schema 替换为您的 table_schema 名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:17:08.167

例如：

```
select group_concat(v.name SEPARATOR ' ') 
from (
      select concat('rename table ', t.table_name, ' to ', substring(reverse(v.name), instr(reverse(v.name), '_') + 1, length(v.name)) name 
      from information_schema.tables t
      where 
          table_schema = 'put_your_table_schema'
          and table_name like '%_test'
     ) v; 
```

1.  运行此查询将返回应执行以重命名表的脚本。
2.  `substring(reverse.....)`而不是简单的`replace(v.name, '_test', '')`使用，因为我们需要确保只替换`_test`字符串末尾的出现。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-05T18:46:53.620

我想更新对我有用的东西，因为这篇文章很老了。我需要在表名之前和之后添加 ` 标记。并且不要忘记添加最后一个；因为这有时会引发语法错误。

```
SET group_concat_max_len=5000;
SELECT group_concat(v.name separator '; ')
FROM (
    SELECT concat('RENAME TABLE `', t.table_name, '` TO `', replace(t.table_name, 'wp_', 'wplocal_'), '`') name
    FROM information_schema.tables t
    WHERE table_name like 'wp_%'
) v; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-16T00:21:38.887

对@ravnur 的回答稍作修改：

```
SET group_concat_max_len=5000;
SELECT group_concat(v.name separator '; ')
FROM (
    SELECT concat('RENAME TABLE ', t.table_name, ' TO ', replace(t.table_name, 'wp_', 'blog_')) name
    FROM information_schema.tables t
    WHERE table_name like 'wp_%'
) v; 
```

当您想要将您的 Wordpress 表格从默认前缀重命名为`wp_`to `blog_`（例如）时很有用。将该命令的输出复制并粘贴到 mysql shell 或 phpMyAdmin 中。

# iphone - 是否可以在 UITableViewCell 的 cell.detailTextLabel 中有一个占位符

> ID：11642026
> 
> 赞同：0
> 
> 时间：2012-07-25T02:53:07.283
> 
> 标签：iphone, xcode, uitableview

占位符我的意思是如果你有一个文本字段你会得到什么......

```
 UITextField *myTextField;
 myTextField.placeholder = @"Enter your name"; 
```

我相信 detailTextLabel 作为 textLabel 没有占位符属性，所以我猜答案是否定的。我将不得不使用带有 UITextField 的自定义单元格。

感谢您的任何建议。

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:11:37.160

A`UITextField`的占位符是在字段为空且用户未对其进行编辑时显示的文本。

详细文本标签是`UILabel`. A`UILabel`不支持用户编辑，因此没有理由让它具有`placeholder`属性。如果您希望它看起来像占位符文本，您可以按照 Patrick S. 的建议将其文本颜色设置为灰色。

但是，如果您想要可编辑的详细文本，则需要将自己的文本添加`UITextField`到单元格`contentView`并使用该文本字段*而不是*`detailTextLabel`. 然后你可以设置你的文本字段的`placeholder`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:04:17.333

更改文本字段中的占位符文本字体

创建 UITextField 的子类并覆盖 drawPlaceholderInRect：

```
- (void) drawPlaceholderInRect:(CGRect)rect {
    [[self placeholder] drawInRect:rect withFont:[UIFont systemFontOfSize:16.0]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:07:19.037

我认为您最好的选择可能是：

```
if([UItextView.text length] == 0)
   {
       UItextView.text = @"placeholder";
       UItextView.textColor = [UIColor lightGrayColor];
       UItextView.tag = 0;
   } 
```

服务于相同的目的。

# rest - DNN 6.2 Azure Restful 服务

> ID：11642029
> 
> 赞同：0
> 
> 时间：2012-07-25T02:53:10.783
> 
> 标签：rest, azure, dotnetnuke

我目前有一个运行良好的 Azure Restful Webservice。我想在 Azure 中添加一个 DNN6.2 站点并包含我的 Web 服务，以使用 DNN6.2 站点和 Web 服务创建一个 Webrole。

使用 DotNetNuke Azure 加速器创建了一个新的 DNN6.2 Azure 站点，效果很好，这创建了一个服务配置和 def 文件，上传它们，创建了 webrole 并上传了一个带有站点的 vhd 文件。

我的问题是如何将我的服务添加到这个站点，有什么方法可以做到这一点，我应该下载 vhd 并对其进行修改吗？

感谢任何帮助，我有一个陡峭的学习曲线来启动和运行 Web 服务，现在正在尝试学习 DNN 以获得可行的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:30:39.413

实际网站位于 VHD 上，因此这确实是一个可行的选择：

1.  下载 VHD
2.  挂载 VHD
3.  应用修改
4.  重新上传 VHD

这种方法有一些问题，比如它更难自动部署（但仍然可能），总是需要下载和上传 VHD 可能需要一些时间（当前访问该站点的用户会发生什么情况），您需要卸载上传新的 VHD 后驱动器可能会导致一些停机时间，...

在我看来，这不是完美的解决方案。

我会建议 2 个其他选项：

1.  在同一个 WebRole 中托管一个[FTP 服务器并设置驱动器的路径。](http://khailiangtech.wordpress.com/2011/10/04/windows-azure-how-to-enable-ftp/)这将允许您从您的机器连接到驱动器并上传您感兴趣的更改，而无需使用 VHD。文章中描述的更改应应用在此文件中：**DNNAzureSMB\DNNAzure\WebRole.cs**（注意：最好考虑安全性并在 FTP 服务器上配置 IP 限制）。
2.  不要使用 WebRole。只需使用名为[虚拟机](http://www.windowsazure.com/en-us/home/features/virtual-machines/)(IaaS) 的新发布功能即可。这意味着您可以管理持久化的虚拟机，并且可以像安装在数据中心或本地的服务器上一样简单地安装 DNN。

# ios - 覆盖按钮不可点击/不可按下。

> ID：11642035
> 
> 赞同：0
> 
> 时间：2012-07-25T02:53:37.750
> 
> 标签：ios, overlay, uitoolbar

我在 UIToolBar 覆盖层上覆盖了一个完成按钮。完成按钮出现在我的工具栏上，但不可点击。事实上，当我触摸它时，它没有任何变化。显然 doneButton 没有接收到动作。我的问题是为什么以及如何纠正这个问题？我应该用什么替换我的错误代码？

这是我设置叠加层的地方。

```
- (UIView*)CommomOverlay  {
    //Main overlay(not pertinent in this question)
    UIView* view = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,420)];
    UIImageView *FrameImg = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,420)];
    [FrameImg setImage:[UIImage imageNamed:@"newGraphicOverlay.png"]];

    //Toolbar overlay
    UIToolbar *myToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 428, 320, 50)];
    [myToolBar setBarStyle:UIBarStyleBlack];

    //Done button overlay
    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] 
                                   initWithBarButtonSystemItem:UIBarButtonSystemItemDone
                                                        target:self
                                                        action:@selector(doneButtonPressed)];

    [myToolBar setItems:[NSArray arrayWithObjects: doneButton, nil] animated:YES];

    [FrameImg addSubview:myToolBar];
    [view addSubview:FrameImg];
    return view;
} 
```

这是我使用的 doneButton 按下方法。单击完成后，视图应该恢复到另一个屏幕，其中 .h/.m 位于 SecondViewController 的名称中。

```
-(void)doneButtonPressed {

    SecondViewController *screen = [[SecondViewController alloc] initWithNibName:nil
    bundle:nil];
    screen.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:screen animated:YES];
    [screen release];
} 
```

一切对我来说都是完美的，但不用说它不是。我知道这似乎是一个经常被问到的问题，但我没有搜索到关于按钮无法在*覆盖上运行的*问题。请不要只讨论更正部分，还要讨论*为什么*部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:18:46.587

您可以通过执行以下操作来检查这件事是否有效。

```
FrameImg.userInteractionEnabled = YES; 
```

我不确定这是否会有所帮助。

# php - 在 MVC/OOP 结构化 PHP 中加载配置文件数组的问题

> ID：11642045
> 
> 赞同：0
> 
> 时间：2012-07-25T02:55:40.900
> 
> 标签：php, oop, model-view-controller

我正在 PHP 中创建一个基本的 MVC 结构化 CMS，作为了解 MVC 工作原理的一种方式（因此我没有使用真正的预构建引擎）。我有一个基本版本，目前正在尝试将信息转移到配置文件中，如下所示：

**配置文件**

```
 <?php
    return array(
        //  MySQL database details
        'database' => array(
            'host' => 'localhost',
            'port' => '',
            'username' => '',
            'password' => '',
            'name' => '',
            'collation' => 'utf8_bin'
        ),

        // Application settings
        'application' => array(
            // url paths
            'default_controller' => 'index',
            'default_action' => 'index',
            'timezone' => 'UTC',
        ),

        // Session details
        'session' => array(
            'name' => '',
            'expire' => 3600,
            'path' => '/',
            'domain' => ''
        ),

        // Error handling
        'error' => array(
            'ignore' => array(E_NOTICE, E_USER_NOTICE, E_DEPRECATED, E_USER_DEPRECATED),
            'detail' => false,
            'log' => false
        )
    ); 
```

我将它包含在 index.php 文件中，如下所示：

**索引.php**

```
define ('__SITE_PATH', $site_path);
$config = include __SITE_PATH . '/config.php'; 
```

但是，当我稍后尝试将其加载到模板文件中进行测试时，或者与此相关的任何其他文件中，都不会返回任何内容。这是课程的问题吗？如果有人能对此事有所了解，我将不胜感激。

以下是完整的 index.php 以供参考：

```
<?php

    /*** error reporting on ***/
    error_reporting(E_ALL);

    /*** define the site path ***/
    $site_path = realpath(dirname(__FILE__));
    define ('__SITE_PATH', $site_path);

    $config = include __SITE_PATH . '/config.php';

    /*** include the controller class ***/
    include __SITE_PATH . '/application/' . 'controller_base.class.php';

    /*** include the registry class ***/
    include __SITE_PATH . '/application/' . 'registry.class.php';

    /*** include the router class ***/
    include __SITE_PATH . '/application/' . 'router.class.php';

    /*** include the template class ***/
    include __SITE_PATH . '/application/' . 'template.class.php';

    /*** auto load model classes ***/
    function __autoload($class_name) {
        $filename = strtolower($class_name) . '.class.php';
        $file = __SITE_PATH . '/model/' . $filename;
        if (file_exists($file) == false) {
            return false;
        }
        include ($file);
    }

    /*** a new registry object ***/
    $registry = new registry;

    /*** load the router ***/
    $registry->router = new router($registry);

    /*** set the controller path ***/
    $registry->router->setPath (__SITE_PATH . '/controller');

    /*** load up the template ***/
    $registry->template = new template($registry);

    /*** load the controller ***/
    $registry->router->loader(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T05:22:16.747

我认为你做这一切都是错的。

而不是创建复杂的配置，我发现在引导阶段初始化所有结构要容易得多，然后在需要的地方[注入依赖](http://www.youtube.com/watch?v=RlfLCWKxHJ0)项。

例如，为了代替数据库的连接配置，您创建了一个闭包，然后可以将其注入[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)工厂。

```
$dbhProvider = function()
{
    $instance = new \PDO('mysql:host=localhost;dbname=foobar;charset=UTF-8', 
                         'user', 
                         'password');
    $instance->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $instance->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    return $instance;
}; 
```

类似的原则可以应用于处理会话管理和路由机制。

这**到底是**什么？

> '忽略' => 数组（E_NOTICE，E_USER_NOTICE，E_DEPRECATED，E_USER_DEPRECATED），

为什么会忽略与代码质量相关的警告？那只是愚蠢的。

# php - Zend SMTP 默认设置

> ID：11642048
> 
> 赞同：1
> 
> 时间：2012-07-25T02:55:53.443
> 
> 标签：php, zend-framework, zend-db

如何初始化 Zend Mail SMTP 设置并使它们可用于整个应用程序。

是否已在 application.ini 配置文件中配置了设置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:58:21.507

在 Bootstrap.php 文件中添加此代码

```
 protected function _initMailConfig()
{
    $config = $this->getOptions();
    $host = $config['mail']['smtp']['host'];
    $fromEmail = $config['mail']['from']['email'];
    $fromName = $config['mail']['from']['name'];
    $transport = new Zend_Mail_Transport_Smtp($host);
    Zend_Mail::setDefaultTransport($transport);
    Zend_Mail::setDefaultFrom($fromEmail, $fromName);
} 
```

还要确保您在 application.ini 配置文件中有预定义的设置

```
 mail.smtp.host = "smtp-host ip"
   mail.from.email = "your@mail.com"
   mail.from.name = "example" 
```

希望这可以帮助你。

# php - 如何让 example.com/eat 加载 example.com/eat.php？

> ID：11642054
> 
> 赞同：1
> 
> 时间：2012-07-25T02:56:28.520
> 
> 标签：php, html, redirect

我知道它正在尝试加载 .html 版本，至少我很确定。我还认为它是 .htaccess 文件中的内容。我已经尝试了一些不同的东西来搜索谷歌并提出不足。基本上我希望它能够工作，这样如果输入的名称没有 .html 文件，它将转到 php 文件。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:07:28.083

尝试这个：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-s
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -s
RewriteRule ^.*$ %{REQUEST_URI}.php [L,QSA] 
```

上述规则说，如果请求的文件大小为 0，或者不作为文件、符号链接或目录存在并且`.php`存在具有扩展名的同名文件，则重写该`.php`文件。

这有效地重写`site.com/foo`了`site.com/foo.php`哪里`foo`可以是任何东西。

我不太清楚你想要什么。如果要将不存在的`.html`文件映射到`.php`扩展名，请尝试以下操作：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-s
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ $1.php [L,QSA] 
```

这只是说如果请求的文件不存在并且以 结尾`.html`，然后获取文件名（减去`.html`）并尝试重写`.php`扩展名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:06:56.913

在 htaccess

```
RewriteEngine on 
RewriteRule ^eat$ eat.php [L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T03:07:11.157

利用[`MultiViews`](http://httpd.apache.org/docs/2.2/mod/mod_negotiation.html#multiviews)

将此添加到 apache 配置中（在`httpd.conf`、`VirtualHost`config 或 in 中`.htaccess`）：

```
Options +MultiViews 
```

为此使用重写是一种过大的杀伤力，什么时候`content-negotiation`可以完成这项工作。

# php - 使用 codeigniter 继续开发事件管理系统的好方法

> ID：11642056
> 
> 赞同：-1
> 
> 时间：2012-07-25T02:56:31.803
> 
> 标签：php, codeigniter, database-design

我想知道如何开发一个事件管理系统。我想[通过 codeigniter 使用您的 RESTfull 服务](https://github.com/philsturgeon/codeigniter-restserver)。

我不知道如何继续。目前我计划遵循以下步骤。

1.  为应用程序设计和开发 UI
2.  设计 MySQL 数据库
3.  开始使用 codeigniter 对后端进行编码
4.  开发 API

这是一个好方法吗，我必须单独做。

以下应用程序的工作流程是什么

1.  可支持多事件的事件管理系统
2.  参会人员注册，包括选择酒店预订和展览以及最后付款的步骤。
3.  所有数据都将在后端应用程序中可用。
4.  活动网站的API接口，将显示注册表和演讲者等。数据将从邮件API中获取。

和更多...

请告诉我如何继续进行。

**您是否为此创建 UML 图。请写下步骤。如果你开发同样的东西需要多少时间。**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:16:01.460

我的方法是：

1.  在 Twitter Bootstrap 中设计 UI。
2.  绘制 UML 和数据库图以消除许多困惑。
3.  使用 CodeIgniter 对后端进行编码。3.1 花时间在系统的两端，即活动创建者和活动参加者。

虽然，我更喜欢 Rails 用于此类应用程序。我的两分钱建议。

# c# - 修改日期时间在数据网格中的显示方式？

> ID：11642057
> 
> 赞同：1
> 
> 时间：2012-07-25T02:56:40.027
> 
> 标签：c#, sql, datagrid, windows-mobile, compact-framework

我正在查询 SQL CE 数据库以绑定数据网格的数据源以显示一些信息。

SQL CE 数据库中的列之一是 DateTime 列。在数据网格中，它显示完整的日期和时间，我想做的是以这种格式显示日期：mm/dd/yyyy

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:21:16.770

如果您知道哪一列有日期，您可以修改列的单元格样式属性：

```
System.Windows.Forms.DataGridViewCellStyle dgvCellStyle1 = new System.Windows.Forms.DataGridViewCellStyle();
dgvCellStyle1.Format = "MM/dd/yyyy";
dgvCellStyle1.NullValue = null;
this.dataGridView1.Columns[0].DefaultCellStyle = dgvCellStyle1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:09:01.250

使用可以修改您的查询并使用转换功能以所需格式显示日期

```
convert(varchar(10), datetimefieldname, 103) 
```

可以采用另一种方法，尽管我不太喜欢它

```
cast(month(logindatetime) as varchar(2)) + '/' + cast(day(logindatetime) as varchar(2)) + '/' + cast(year(logindatetime) as varchar(4)) 
```

# c++ - 在同一类中创建类的对象时出现 C++ 错误？

> ID：11642058
> 
> 赞同：1
> 
> 时间：2012-07-25T02:56:44.713
> 
> 标签：c++

像 Java 和 C# 一样，我可以在同一个类中创建一个类的对象吗？

```
/* State.h */
class State{
  private:
    /*...*/
    State PrevState;
}; 
```

错误：

```
field 'PrevState' has incomplete type 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:00:14.813

您不能按照书面规定执行此操作。当您在类 ( ) 中直接将变量声明为某种类型时，`Type variablename`用于变量分配的内存将成为其父类型分配的一部分。知道了这一点，你为什么不能这样做就很清楚了：分配会递归地扩展——`PrevState`需要为其成员分配空间*，* `PrevState`等等。此外，即使可以通过这种方式分配无限量的内存，构造函数调用也会无限递归。

但是，您可以定义一个变量，它是包含类型的引用或指针，`State &`或者`State *`（或某些智能指针类型），因为这些类型的大小是固定的（引用通常是指针大小的，而指针将是4 或 8 个字节，具体取决于您的架构）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:11:17.297

> 那么为什么你可以在 C# 和 Java 中做到这一点，但你不能在 C++ 中做到这一点呢？

在 C++ 中，对象可以包含子对象。这意味着子对象的内存将成为包含它的对象的一部分。但是，在 C# 和 Java 中，对象不能有子对象，当您`State PrevState;`使用其中一种语言进行操作时，内存位于容器*之外*的其他位置，并且您仅持有对类中实际对象的“引用”。要在 C++ 中做到这一点，您将使用指向实际对象的指针或引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:05:14.217

你误会了`State PrevState`和`State* PrevState`。问题的原因是您假设 C++ 是*任何东西，*就像 Java 和 C# 一样。它不是。你需要花一些时间来复习你的 C++。

# c# - c#绘制图像序列？

> ID：11642062
> 
> 赞同：0
> 
> 时间：2012-07-25T02:57:10.703
> 
> 标签：c#, drawimage

我正在使用C#使用DrawImage绘制多个图像，我如何确定应该首先绘制哪个图像？我有一些相互堆叠的图像，所以我应该确定首先绘制哪一个，它就像另一个图像顶部的图像，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:43:05.863

如果您询问如何绘制图像以相互重叠，您可以使用[`Controls.SetChildIndex`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.setchildindex.aspx).

# ios - 有没有人能够在 Cordova 2.0.0 上成功安装 ChildBrowser？

> ID：11642064
> 
> 赞同：3
> 
> 时间：2012-07-25T02:57:36.680
> 
> 标签：ios, cordova, phonegap-plugins, cordova-2.0.0, childbrowser

几天前，我将 phonegap 升级到了 2.0 (Cordova-2.0.0)。我使用以下说明将 ChildBrowser 插件添加到 cordova： [https](https://github.com/alunny/ChildBrowser/blob/master/README.md) ://github.com/alunny/ChildBrowser/blob/master/README.md （使用 pluginstall 和 npm 运行自动化脚本来设置代码的本机部分）根据： [https ://github.com/alunny/pluginstall](https://github.com/alunny/pluginstall)

但是，自动化脚本似乎假定了较旧的 PhoneGap 代码而不是 Cordova，因此我必须在 ChildBrowser 插件的 .m 和 .h 文件中进行更改，以使用 CDV* 类而不是 PG* 类。此外，脚本搞砸了我的 xcode 项目，幸运的是我有一个备份。

所有这些都引出了一个问题——有没有关于如何使 ChildBrowser 插件在 Cordova 2.0.0 上工作的文档？我看到很多人抱怨 Cordova 1.9.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:33:21.047

我几乎让它工作了，但它仍然没有为我打开。但它似乎适用[于谷歌群组](https://groups.google.com/forum/?fromgroups#!searchin/phonegap/childbrowser%24202.0/phonegap/RwslH1ACLV0/oTu_itpkWFoJ)中的这个人。

删除任何 #ifdef CORDOVA_FRAMEWORK 语句，根据 Phonegap 文档，不再需要此语句。因此，例如在您的 ChildBrowserCommand.h 文件中更改此：

```
#ifdef CORDOVA_FRAMEWORK
#import <CORDOVA/CDVPlugin.h>
#else
#import "CORDOVA/CDVPlugin.h"
#endif
#import "ChildBrowserViewController.h" 
```

只是：

```
#import <CORDOVA/CDVPlugin.h>
#import "ChildBrowserViewController.h" 
```

和这个：

```
#ifdef CORDOVA_FRAMEWORK
    @interface ChildBrowserCommand : CDVPlugin <ChildBrowserDelegate>  {
#endif
    ChildBrowserViewController* childBrowser;
} 
```

进入：

```
@interface ChildBrowserCommand : CDVPlugin <ChildBrowserDelegate>  {
  ChildBrowserViewController* childBrowser;
} 
```

您可能也想检查[一下](https://github.com/apache/incubator-cordova-ios/blob/master/guides/Cordova%20Plugin%20Upgrade%20Guide.md)。让我知道这是否对您有用，或者您是否找到了可行的解决方案，以便我也可以尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:39:50.783

这里的所有解释都像魅力一样：[http ://blog.digitalbackcountry.com/2012/03/installing-the-childbrowser-plugin-for-ios-with-phonegapcordova-1-5/](http://blog.digitalbackcountry.com/2012/03/installing-the-childbrowser-plugin-for-ios-with-phonegapcordova-1-5/)

对于 Cordova 2.3.0，您应该修改 config.xml，因为 cordova.plist 不再存在。喜欢：

```
<plugins>
    <plugin name="ChildBrowser" value="ChildBrowser.js" />
    <plugin name="ChildBrowserCommand" value="ChildBrowserCommand" />
   …
</plugins> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T16:01:49.353

设法得到这个工作。确保您使用的是 phonegap GitHub 存储库中 iOS 分支中的 ChildBrowser 代码，而不是 iPhone 文件夹中的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:47:16.107

伙计们，我很抱歉我无法制作完整的教程或博客文章，但我知道下一个最好的事情

查看[这个 github](https://github.com/Shereef/ChildBrowserOnCordova200/commits/master) repo，你会找到实现目标的步骤和一个工作项目，我这样做只是为了帮助你们，但请注意我也是一个菜鸟，我刚开始使用 phonegap，所以如果你有任何意见或建议，请 pullrequest或评论

PS第一个提交标题Initial Commit只是默认的PhoneGap模板，无需查看，查看之后的每个提交。

谢谢

# c++ - minimax 函数中的板到底是什么，它是如何实现的？

> ID：11642068
> 
> 赞同：1
> 
> 时间：2012-07-25T02:58:40.797
> 
> 标签：c++, artificial-intelligence, minimax

所以我最近在研究零和游戏中使用的极小极大函数。我完全理解它，除了如何为实际功能实现板：

例如，我发现的这个示例实现有这个声明：

```
int miniMax(Board eval, int iterations) 
```

我唯一的问题是*到底是`Board`什么？*它是结构、类、数组还是其他结构？另外，我将如何为 mini-max 实现示例板，例如井字游戏板（例如）？在维基百科或谷歌上找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:08:27.113

棋盘只是当前的棋盘游戏。它可以是您用来代表游戏棋盘的任何结构。

当第一次调用时，minimax 函数将接收当前棋盘配置，由到目前为止所做的不同游戏（游戏的当前状态）达到。在 minimax 函数中，您所做的是修改棋盘，每个修改都应代表根据游戏规则的可能移动。每个修改过的板都应该作为参数传递给新的 minimax 调用。一旦达到一定的深度（即多次迭代），您就可以使用评估函数选择最佳移动，为每个修改过的棋盘打分，然后选择得分最高的棋盘。

您正在阅读的算法是通用的，适用于任何游戏。您可以根据方便来定义棋盘，即最适合您要表示的游戏的棋盘。

对于井字游戏，您可能希望用 3x3 数组表示棋盘，以便更改棋盘：

```
int miniMax(char board[3][3], int iterations) 
```

或者，您可能希望为每个正方形使用 2 位来表示您的电路板：

```
typedef struct {
    unsigned square1: 2;
    unsigned square2: 2;
    unsigned square3: 2;
    unsigned square4: 2;
    unsigned square5: 2;
    unsigned square6: 2;
    unsigned square7: 2;
    unsigned square8: 2;
    unsigned square9: 2;
} Board; 
```

不过，对于井字游戏，您不需要轻量级的棋盘表示，因为它的最大深度仅为 9。我只是给您提供示例，让您了解它可以是您用来表示棋盘游戏的任何结构。

如果您要处理极小极大函数并且游戏比井字游戏复杂得多，您应该认真考虑使用[alpha-beta 剪枝](http://en.wikipedia.org/wiki/Alpha-beta_pruning)，这是一个很大的改进。

**编辑**：我认为你不应该称你的董事会为“eval”，因为这可能与完全不同的评估函数混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T03:06:13.310

正如您所写的那样，*板*只是用于*极小极大值*和许多其他决策树算法的常见结构。

它旨在成为包含有关游戏特定状态的信息的结构。在算法本身中，从逻辑的角度来看，这个参数应该是不可修改的，因为您将在棋盘上进行移动并生成新的棋盘快照（因此旧的棋盘快照不会被修改），而您正在深入树您正在评估的动作以找到更好的策略。

事实上，在棋盘内部有两个元素是很有用的：一组规则（您可以通过移动来有效地修改其状态）和一个状态，它将在每次迭代中发生变化（即使棋盘本身仍然是相同），并且该对象将用于评估玩家的移动有多好（当达到最大深度时，您被迫仅通过状态来估计移动的好坏）。

所以它可以是任何东西，它只是一个概念参数。如果您真的想要更实用的东西，我会以类似于以下方式想象它：

```
class BoardSnapshot {
  Board b;

  float alpha;    
  State state;
  int evaluate();
}

class Board {
  List<Players> players;
  List<Rules> rules;

  State applyMove(State current, Player player, Rule rule, params ...);
} 
```

这样您就可以`BoardSnapshot`使用没有当前状态的状态对其进行初始化，然后应用规则并生成一个新状态，该状态将是当前选择的树枝的快照。

# objective-c - 防止 ARC 取消分配当前未使用但很快就会使用的东西？

> ID：11642073
> 
> 赞同：5
> 
> 时间：2012-07-25T02:59:18.493
> 
> 标签：objective-c, ios, automatic-ref-counting

我已经多次遇到这个问题，想知道正确的方法。

例如，假设我正在编写一个 iPhone 应用程序，并且我想要一个使用块的自定义警报视图类。

所以我写了这个类，然后在我的代码中我去：

```
MyAlertView *alert = [MyAlertView alertWithBlahBlahBlah...];
[alert addButton:@"button" withBlock:^{ ... }];
[alert show]; 
```

在警报视图类的某个地方，我们有

```
- (void)addButton:(NSString *)button withBlock:(void (^))block {
    [_blocks setObject:[block copy] forKey:button];
}

- (void)show {
    ... drawing stuff ...
    UIButton *button = ...
    [button addTarget:self selector:@selector(buttonPressed:) ...];
    ...
}

- (void)buttonPressed:(id)sender {
    ((void (^)())[_blocks objectForKey:[sender title]])();
} 
```

因此，警报视图现在显示得很好。问题是，如果我点击一个按钮，它会尝试将`buttonPressed:`选择器发送到`MyAlertView`显示的对象。但是，此时`MyAlertView`已将其从超级视图中删除。ARC 决定，因为警报视图不再由任何人拥有，它应该被解除分配，不知道按钮将来需要向它发送消息。当点击按钮时，这会导致崩溃。

将警报视图保留在内存中的正确方法是什么？我可以使该`MyAlertView`对象成为使用它的类的属性，但这有点愚蠢（如果我想一次显示两个警报怎么办？）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T03:46:45.867

如果一个对象保留在内存中，而您没有对它的引用，这称为内存泄漏。正如我在评论中所说，您需要保留对它的**某种**引用，以便 a）它不会被释放，b）您可以向它发送消息，并且 c）您可以在您的类被释放之前释放它。

最明显的方法是在你的类中使用一个属性。既然您说您不想这样做（也许您有**很多**），那么另一种可能的解决方案是保留您计划重用并最终解除分配的缓存对象数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T04:04:33.790

很简单，你违反了内存管理规则。ARC 不会改变规则，它只是将它们自动化。如果你需要一个对象来维持生命，它需要有一个所有者。应用程序对象图中的每个对象，一直到应用程序委托，都有一个所有者。所有者是什么可能并不明显（有时所有者可能是一个自动释放池），但确实有一个。

如果您希望此视图持续存在，则它需要由某物拥有，即使它不是“当前正在使用”。如果它在屏幕上，它应该是视图层次结构的一部分。如果不是，理想的所有者很可能是创建它的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T03:52:16.793

我认为您可以使用`performSelector:（SEL）aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay`在运行循环中保留警报视图。

实际上，我刚刚遇到了使用此技能的 UIAlertView 的包装器实现。

检查[UIAlertView 输入包装器](http://www.splinter.com.au/2012/07/24/uialertview-input-wrapper/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20splintersw%20%28Splinter%20Software%29)以获取更多详细信息。

# asp.net-mvc - ASP.NET MVC：类似 PreAuthorize 的事件，并发登录的良好节流点？

> ID：11642074
> 
> 赞同：0
> 
> 时间：2012-07-25T02:59:19.743
> 
> 标签：asp.net-mvc, authorization

我想在 ASP.NET MVC 中允许新的登录通过同一帐户“踢”先前的登录会话。

似乎很清楚，我将为每个浏览器提供一个代表会话 ID 的烹饪。我将在服务器端缓存中跟踪当前活动的会话 ID。如果一个已经处于活动状态的用户尝试登录，我将验证业务逻辑（用户名、密码、自上次活动以来至少 15 分钟），然后更新缓存在服务器上的活动会话 ID。

**现在我的问题是，*浏览器持有无效的会话 ID。对于这种情况，我注入拒绝或重定向到登录的最佳点是什么？***

我可以修改 AuthorizeAttribute，但似乎应该有一个更干净的地方来执行此操作，不需要我搜索和替换我的所有 Authorize 属性，例如通过 Global.asax 事件或控制器事件（I'我已经在我的项目中扩展了控制器）。

例如，如果 PreAuthorize 存在，我会在那里编写一些代码来测试请求的 cookie 是否存在有效的用户/会话 ID 对，如果它不存在，我可以简单地从请求中删除身份验证 cookie，这将导致标准的未经授权的重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:11:27.913

因此，经过一番研究，似乎自定义 AuthorizeAttribute 通常是正确的方法。但是，就我而言，由于我已经实现了自定义角色提供程序，因此只需一行代码即可。这也使我受益，因为我只希望单个角色的会话并发。副作用是任何使用 web.config 来控制角色对静态文件的访问也对会话并发有效。

# c# - 在使用 WP7 的网络浏览器控件时隐藏网页中的元素

> ID：11642078
> 
> 赞同：1
> 
> 时间：2012-07-25T02:59:57.710
> 
> 标签：c#, windows-phone-7, xaml, browser

我目前正在为我的大学开发一个适用于 WP7 的应用程序，并且需要一个临时解决方案来解决问题。现在这个解决方案是，我将使用 WP7 的 Web 浏览器控件加载网页。例如： http: [//m.iastate.edu/laundry/](http://m.iastate.edu/laundry/)

现在，正如您在网页上看到的那样，我想隐藏某些元素，例如后退按钮。现在，我为处理后退按钮所做的事情是这样的：

```
private void webBrowser1_Navigating(object sender, NavigatingEventArgs e)
{
    // Handle loading animations

    // Handle what happens when the "back" button is pressed
    Uri home = new Uri("http://m.iastate.edu/");

    // The the current loading address is home
    // Cancel the navigation, and go back to the 
    // apps home page.
    if (e.Uri.Equals(home))
    {
        e.Cancel = true;
        NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
    }

} 
```

现在效果很好，除了硬件上有一个后退按钮的部分。

**所以我的第二个选择是只**在该页面上完全隐藏后退按钮，而不是它的子页面。所以**不在**[http://m.iastate.edu/laundry/l/0](http://m.iastate.edu/laundry/l/0) _

我仍在争论是否只解析数据并以我自己的风格显示它，但我不确定这是否完全需要查看数据如何需要持续的互联网服务并且已经采用了良好的格式。另外，我觉得这样会浪费资源吗？对此也发表您的看法:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:15:26.873

您应该在页面中注入一个带有`InvokeScript`.

这是删除后退按钮所需的 Javascript 代码：

```
// get the first child element of the header
var backButton = document.getElementsByTagName("header")[0].firstChild;

// check if it looks like a back button
if(backButton && backButton.innerText == "Back") {
  // it looks like a back button, remove it
  document.getElementsByTagName("header")[0].removeChild[backButton];
} 
```

使用 InvokeScript 调用此脚本：

```
webBrowser1.InvokeScript("eval", "(function() { "+ script +"}()"); 
```

警告：`IsScriptEnabled`必须`true`在 web 控件上设置

如果后退按钮的删除取决于页面，只需在 C# 中测试导航 URI 并在需要时注入脚本。

# sql - 循环查询表的每一列 - Oracle 数据库

> ID：11642079
> 
> 赞同：2
> 
> 时间：2012-07-25T03:00:12.780
> 
> 标签：sql, oracle, loops

我正在使用 oracle 数据库，我基本上需要做的是计算某个表中每列的 NULL 字段数。

类似的东西：

```
DECLARE
    BlankCount number(20);
    i number(2) := 1;

BEGIN
    loop that would take each column individualy and exit after the last one
        SELECT COUNT(*) INTO BlankCount FROM name_of_my_table
        DBMS_OUTPUT.PUT_LINE('Column '||i||' has '||BlankCount||' empty cells');
        i := i + 1;
    END LOOP;
END; 
```

我只是找不到任何可以做循环部分的东西。如果我可以显示列名而不是仅对它们进行编号（使用 i），那也很好（但这不是很重要）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T03:37:26.620

像这样的东西：

```
declare 

  mytable varchar(32) := 'MY_TABLE';

  cursor s1 (mytable varchar2) is 
            select column_name 
            from user_tab_columns
            where table_name = mytable
            and nullable = 'Y';

  mycolumn varchar2(32);
  query_str varchar2(100);    
  mycount number;

begin

  open s1 (mytable);

  loop
     fetch s1 into mycolumn; 
         exit when s1%NOTFOUND;

     query_str := 'select count(*) from ' || mytable || ' where '  || mycolumn || ' is null';

     execute immediate query_str into mycount;

     dbms_output.put_line('Column ' || mycolumn || ' has ' || mycount || ' null values');

  end loop;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:35:35.350

Try using cursor approach and [Dynamic SQL](http://docs.oracle.com/cd/B10501_01/appdev.920/a97269/pc_13dyn.htm) as mentioned in this thread: [How to loop through columns in an oracle pl/sql cursor](https://stackoverflow.com/questions/2608475/how-to-loop-through-columns-in-an-oracle-pl-sql-cursor)

HTH.

# node.js - 类实例化

> ID：11642082
> 
> 赞同：0
> 
> 时间：2012-07-25T03:00:39.567
> 
> 标签：node.js, coffeescript

我遵循了这个例子：[Coffeescript 和 node.js 的混淆。需要实例化类？](https://stackoverflow.com/questions/10772102/coffeescript-and-node-js-confusion-require-instantiates-class)，但它似乎不起作用 - 错误是`TypeError: undefined is not a function`，所以我一定做错了什么。我有一个简单的咖啡脚本可执行文件。这是我的步骤：

创建文件夹结构：

appmq

*   我的可执行文件

*   my_class.coffee

*   包.json

文件内容：

`package.json`：

```
{
    "name": "appmq",
    "version": "0.0.1",
    "description": "xxxxxx",
    "repository": "",
    "author": "Frank LoVecchio",
    "dependencies": {
    },
    "bin": {"appmq": "./my_executable"}
} 
```

`my_executable`：

```
#!/usr/bin/env coffee
{CommandLineTools} = require './my_class'
cmdTools = new CommandLineTools()

cmdTools.debug() 
```

`my_class`：

```
class CommandLineTools

  debug: () ->
    console.log('Version: ' + process.version)
    console.log('Platform: ' + process.platform)
    console.log('Architecture: ' + process.arch)
    console.log('NODE_PATH: ' + process.env.NODE_PATH)

module.exports = CommandLineTools 
```

然后我通过以下方式安装应用程序：

`sudo npm install -g`

然后我运行应用程序（这会产生我上面提到的错误）：

`appmq`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:17:15.760

Chris 的回答是正确的，但这与您的类中是否有显式构造函数无关，而是与您要导出的内容无关。

如果你想像这样导出一个类：

```
module.exports = CommandLineTools 
```

然后，当 you 时`require`，返回的将是您在`module.exports`上面分配的内容，即：

```
CommandLineTools = require './my_class' 
```

这将起作用。您正在做的是以上述方式导出，但您使用的是 CoffeeScript 的[解构赋值](http://coffeescript.org/#destructuring)：

```
{CommandLineTools} = require './my_class' 
```

编译成js：

```
var CommandLineTools;
CommandLineTools = require('./my_class').CommandLineTools; 
```

失败了，因为`require`调用*不会*返回具有属性的对象`CommandLineTools`，而是返回`CommandLineTools`自身。现在，如果你想使用上面的解构分配，你必须`CommandLineTools`像这样导出：

```
exports.CommandLineTools = CommandLineTools 
```

我希望这会对此事有所启发。否则，请在评论中询问！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:49:18.427

~~你的类中没有构造函数。~~交换

```
{CommandLineTool} = require './my_class' 
```

和

```
CommandLineTool = require './my_class' 
```

~~或编写一个（空）构造函数。~~

# ios - 在 SKPSMTPMessage 中附加视频

> ID：11642087
> 
> 赞同：1
> 
> 时间：2012-07-25T03:01:30.253
> 
> 标签：ios, xcode, email, nsdocumentdirectory, skpsmtpmessage

我有一个 VideoClip.mp4 存储在我的应用程序的文档目录中。我可以使用 SKPSMTPMessage 成功发送电子邮件（电子邮件、主题、正文等），但我无法附加视频。我已经搜索了很多，但我会继续寻找。如果有人可以帮助我，那将不胜感激。谢谢！

这段代码（显然）附加了一个图像，但我无法弄清楚如何操纵它来附加一个视频：

```
NSString *image_path = [[NSBundle mainBundle] pathForResource:@\"Success\" ofType:@\"png\"];
NSData *image_data = [NSData dataWithContentsOfFile:image_path];
NSDictionary *image_part = [NSDictionary dictionaryWithObjectsAndKeys:
                            @\"inline;\r\n\tfilename=\\"Success.png\\"\",kSKPSMTPPartContentDispositionKey,
                            @\"base64\",kSKPSMTPPartContentTransferEncodingKey,
                            @\"image/png;\r\n\tname=Success.png;\r\n\tx-unix-mode=0666\",kSKPSMTPPartContentTypeKey,
                            [image_data encodeWrappedBase64ForData],kSKPSMTPPartMessageKey,
                            nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:06:32.790

这是一个迟到的答案，但希望它可以帮助某人。假设您知道文档目录 ( ) 中视频文件的路径，`videoPath`代码如下：

```
NSData *videoData = [NSData dataWithContentsOfFile: videoPath];

NSDictionary *videoPart = [NSDictionary dictionaryWithObjectsAndKeys:@"video/quicktime;\r\n\tx-unix-mode=0644;\r\n\tname=\"video.mov\"",kSKPSMTPPartContentTypeKey,
                                     @"attachment;\r\n\tfilename=\"video.mov\"",kSKPSMTPPartContentDispositionKey,[videoData encodeBase64ForData],kSKPSMTPPartMessageKey,@"base64",kSKPSMTPPartContentTransferEncodingKey,nil]; 
```

然后您可以将它附加到这样的`SKPSMTPMessage *testMsg`对象（假设您设置了其余`testMsg`必需的属性，例如凭据等）：

```
testMsg.parts = [NSArray arrayWithObjects: videoPart,nil]; 
```

# javascript - 在 django-tastypie 中使用 OAuthAuthentication 从 Javascript 代码中获取登录用户

> ID：11642088
> 
> 赞同：2
> 
> 时间：2012-07-25T03:01:39.333
> 
> 标签：javascript, django, oauth, django-authentication, tastypie

谁能详细解释如何在 django-tastypie 中使用 OAuthAuthentication 从 Javascript 代码中获取登录用户（登录我的 Django 支持的站点）？[这](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#oauthauthentication)一点都不清楚。先感谢您！

# node.js - express.js 有可变长度参数吗？

> ID：11642092
> 
> 赞同：1
> 
> 时间：2012-07-25T03:02:23.343
> 
> 标签：node.js, express

例如，我想要这样的路线：

```
/mock/:level1/:level2/(:params)* 
```

匹配

```
/mock/a/b
/mock/a/b/p1
/mock/a/b/p1/p2
/mock/a/b/p1/p2/p3 
```

并且第`params`4 行的值是`p1/p2/p3`，那么我可以做到`params.split("/")`。

编辑：

Flask.py 可以做到这一点，这正是我想要的。它存在于 express.js 中吗？

```
@app.route('/wcfmock/<level1>/<level2>/<level3>/<path:params>')
def catch_all(level1, level2, level3, params):
    return 'You want params: %s' % params 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:52:50.150

Express 处理这个问题。来自[http://expressjs.com/guide.html#routing](http://expressjs.com/guide.html#routing)：

```
 "/files/*"
 /files/jquery.js
 /files/javascripts/jquery.js 
```

所以，在你的例子中，（在 CoffeeScript 中）

```
util = require "util"

app.get '/a/b/c/*', (req, res) ->
  res.json util.inspect(req.params) 
```

假设一个应用程序结构去端口 8080...

```
http://localhost:8080/a/b/c/d/e/f 
```

将返回

```
"[ 'd/e/f' ]" 
```

# actionscript-3 - 根据 SQLite 的数据结果为列表动态选择嵌入图像

> ID：11642096
> 
> 赞同：0
> 
> 时间：2012-07-25T03:02:58.227
> 
> 标签：actionscript-3, apache-flex, flex4

我有一个 Spark 列表，需要根据来自 SQlite 查询的数据将不同的图像加载到其中。

在 SQLite 中，我有一个名为“IconId”的列，例如，它可能包含代表图标图像的值“1”、“2”、“3”等。

我的图标图像嵌入一个名为“ImageResources”的类中，如下所示：

```
[Bindable]
public class ImageResources
{

[Embed(source="../assets/caticons/icon1.jpg")]
    public static var Ic1Cla:Class;

[Embed(source="../assets/caticons/icon2.jpg")]
    public static var Ic2Cla:Class;
} 
```

然后我有我的 Spark 列表的 itemrenderer，它有一个位图，我用它来设置我想用于这样的列表项的图标。这是一个有效的静态示例：

```
<s:BitmapImage source="{ImageResources.Ic1Cla}"   
         x="5" y="2">

</s:BitmapImage> 
```

我的问题是..我能否以某种方式将 BitmapImage 源动态连接到将来自我的 SQLite 数据的数字（例如“1”）变成如下内容的东西：

```
<s:BitmapImage source="{ImageResources.Ic[data.IconId]Cla}"   
         x="5" y="2">

</s:BitmapImage> 
```

显然这不起作用，但我不确定这是否是一个简单的语法问题，或者是否可以以这种方式完成。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:14:23.127

您可以动态访问变量，例如：

```
<s:BitmapImage source="{ImageResources['Ic' + data.IconId + 'Cla']}" /> 
```

还有其他方法，例如使用状态系统。通过设置当前状态，`currentState = "image" + data.IconId;`可以将其实现为：

```
<s:states>
    <s:State name="image1" />
    <s:State name="image2" />
</s:states>

<s:BitmapImage source.image1="{ImageResources.Ic1Cla}"
               source.image2="{ImageResources.Ic2Cla}" /> 
```

# java - 有没有办法在 Spring WS 2 中公开静态 XSD？

> ID：11642100
> 
> 赞同：2
> 
> 时间：2012-07-25T03:04:00.083
> 
> 标签：java, spring, xsd, wsdl, spring-ws

如果，例如orders.wsdl导入Orders.xsd，如何使用static-wsdl进行配置

```
<sws:static-wsdl id="orders" location="/WEB-INF/wsdl/orders.wsdl"/> 
```

这样可以在浏览器中查看 Orders.xsd`http://host/context/Orders.xsd`

动态 wsdl 支持它。

```
<sws:dynamic-wsdl id="orders"
    portTypeName="Orders"
    locationUri="http://localhost:8080/ordersService/">
  <sws:xsd location="/WEB-INF/xsd/Orders.xsd"/>
</sws:dynamic-wsdl> 
```

但是 static-wsdl 没有 sws:xsd 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:03:38.463

没有 namspace 支持，但您可以这样做 -

```
<bean id="Orders" class="org.springframework.xml.xsd.SimpleXsdSchema">
    <property name="xsd" value="classpath:/Orders.xsd" />
</bean> 
```

这将解析 wsdl 文件中引用的 xsd -

```
<wsdl:types>
    <xsd:schema elementFormDefault="qualified">
        <xsd:import namespace="..." schemaLocation="Orders.xsd"></xsd:import>
    </xsd:schema>
</wsdl:types> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:04:05.687

或者你可以用那个

```
 <wsdl:types>

   <xs:schema targetNamespace="...."
          elementFormDefault="qualified">

                <xs:include schemaLocation="xsd/Order.xsd"/>

   </xs:schema> 
```

# javascript - JavaScript > onChange 输入和选择更新文本区域

> ID：11642101
> 
> 赞同：3
> 
> 时间：2012-07-25T03:04:07.630
> 
> 标签：javascript, onchange

我有一个用于编辑票证的表格，该表格需要“编辑原因”。我想做的是在任何输入字段或选择下拉列表更改时自动填写。我知道这可以通过 javascript 和 onChange 事件来完成，并让它修改（我相信）textarea 的 innerHTML。我擅长 PHP/MySQL，但 javascript 绝对是我的弱点。

我不知道并且一直没有成功搜索的是如何编码。作为我所拥有的示例，以下代码是：

```
<!-- Customers name -->
<input type='text' name='customer_name' onChange="updateReason('Updated Customer Name')" /><br><br>

<!-- Customer Email -->
<input type='text' name='customer_email' onChange="updateReason('Updated Customer Email')" /> 
```

如果这两个中的任何一个被更改，那么 textarea 的内容将被更新并以回车结束。

任何帮助（或什至推动正确的方向/指向指南的链接）都将受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:34:01.280

My implementation separates the business logic from the design. It also uses more advanced features of JavaScript (which are supported by practically every browser).

[http://jsfiddle.net/xrZk2/1/](http://jsfiddle.net/xrZk2/1/)

For the lazy, create a textarea like so:

```
<input type="text" name="customer_name" id="customer_name" /><br /><br />
<input type="text" name="customer_email" id="customer_email" /><br /><br />
<textarea name="customer_change_log" id="customer_change_log" readonly="readonly"></textarea>
​ 
```

And use the following JavaScript.

```
(function () {
    'use strict';

    var updateReason = function (reason) {
        document.getElementById('customer_change_log').innerHTML += reason + '\n';
    };

    document.getElementById('customer_name').onchange = function () {
        updateReason('Updated Customer Name');
    };
    document.getElementById('customer_email').onchange = function () {
        updateReason('Updated Customer Email');
    };
}());​ 
```

And a little CSS never hurt anyone.

```
#customer_change_log {
    height: 5em;
    resize: vertical;
    width: 15em;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:19:49.220

HTML：

```
<form name="frmTest" action="test.html">
    <textarea name="reason"></textarea>

    <!-- Customers name -->
    <input type='text' name='customer_name' onChange="updateReason('Updated Customer Name')" />

    <!-- Customer Email -->
    <input type='text' name='customer_email' onChange="updateReason('Updated Customer Email')" />
</form> 
```

本机 HTML 实现：

```
function updateReason(text) {
  document.frmTest.reason.value += text + '\r\n';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:23:21.040

需要更新的输入标签给它 id 或一个类，每个标签都有唯一的 id，所以最好给它这样的 id

```
<input type='text' id="id-name" /> 
```

您需要添加[jQuery 文件](http://code.jquery.com/jquery-1.7.2.js)并将 jQuery 文件附加到您的 html 页面。附件写在head标签中，如下图所示。

```
<head>
     <script src="jquery.min.js"></script>
</head> 
```

在下面的输入标签 wen 值是更改函数 updateReason 被调用。脚本标签中的代码编写在同一个 html 文件中，如果您想将 JavaScript 或 jQuery 代码与 html 分开，您可以将其写入没有脚本标签的 .js 文件中，然后将该文件附加到您的 html 页面中。

```
<input type='text' name='customer_name' onChange="updateReason('Updated Customer Name')" />

<script>
function updateReason(text)
{
    // # is used for id and . is used for referring class in jQuery
    $('#id-name').val(text);
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T03:53:10.363

一种有点不同的方法：

HTML：

```
<p><label>Customer Name: <input type='text' name='customer_name'/></label></p>
<p><label>Customer Email: <input type='text' name='customer_email'/></label></p>
<p><label>Edit Reason: <textarea id="edit_reason" rows="6" cols="60"></textarea></label></p>​ 
```

JS：

```
(function() {
    var reasons = {
        'customer_name': 'Updated Customer Name',
        'customer_email': 'Updated Customer Email'
    };
    var inputs = document.getElementsByTagName("INPUT"), len, i, input;
    var editReason = document.getElementById("edit_reason"), reasonText;

    for (i = 0, len = inputs.length; i < len; i++) {
        input = inputs[i];
        input.onchange = (function(name) {
            return function() {
                reasonText = editReason.value || "";
                if (reasons[name]) {
                    if (reasonText.indexOf(reasons[name]) < 0) {
                        editReason.value = reasonText + '\n' +  reasons[name];
                        editReason.value = editReason.value.replace(/^\n+/, '');
                    }
                }
            };
        }(input.name));
    };
}()); 
```

你可以在[这个 fiddle](http://jsfiddle.net/CrossEye/Yb2TH/)中看到它。最大的区别在于逻辑与标记的分离，使用这个：

```
 var reasons = {
        'customer_name': 'Updated Customer Name',
        'customer_email': 'Updated Customer Email'
    }; 
```

# apache - 从 URL 禁用 PHPSESSID

> ID：11642102
> 
> 赞同：0
> 
> 时间：2012-07-25T03:04:10.720
> 
> 标签：apache, .htaccess, symfony, apache2

> **可能重复：**
> [我的网络主机添加 ?PHPSESSID=fgh2h45... 到 URL 的末尾](https://stackoverflow.com/questions/3191235/my-web-host-is-adding-phpsessid-fgh2h45-to-the-end-of-the-url)
> [如何在 Symfony2 中删除 PHPSESSID](https://stackoverflow.com/questions/11623182/how-i-can-remove-phpsessid-in-symfony2)

我用 Symfony 2 开发了我的网站，所以我尝试从 URL 中删除 PHPSESSID，然后我将这段代码放入 /web/.htaccess 中：

```
 SetEnv SHORT_OPEN_TAGS 0
SetEnv REGISTER_GLOBALS 0
SetEnv MAGIC_QUOTES 0
SetEnv SESSION_AUTOSTART 0
SetEnv ZEND_OPTIMIZER 1
SetEnv PHP_VER 5_4
DirectoryIndex app.php
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule>
<IfModule mod_rewrite.c>
RewriteEngine On
#remove PHPSESSID 
RewriteCond %{QUERY_STRING} PHPSESSID=.*$ 
RewriteRule .* %{REQUEST_URI}? [R=301,L]
</IfModule> 
```

然后我注释上面的代码禁用了 PHPSESSID，但它会产生另一个问题，我的 app.php 出现在我网站的所有 URL 中：

```
www.mysite.com/app.php/..... 
```

所以我不知道我能做什么，我想我遇到了新问题，因为我使用了多个 RewriteRule。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T03:14:33.973

不要重写要删除的 URL，而是将`PHPSESSID`php 配置为使用 cookie 进行会话：

在`php.ini`：

```
session.use_cookies=1
session.use_only_cookies=1
session.use_trans_sid=1 
```

或在`.htaccess`：

```
php_flag session.use_cookies 1
php_flag session.use_only_cookies 1
php_flag session.use_trans_sid 1 
```

或 in `php`- 在所有页面中包含的某个文件中，之前`session_start()`：

```
<?php
ini_set("session.use_cookies", 1);
ini_set("session.use_only_cookies", 1);
ini_set("session.use_trans_sid", 1);
?> 
```

* * *

而且，最后但并非最不重要的一点是，`mod_rewrite`无论如何，让我们这样做：

```
<IfModule mod_rewrite.c>
RewriteEngine On

# first, remove PHPSESSID and redirect
RewriteCond %{QUERY_STRING} ^(.*)PHPSESSID=[^&]*(.*)$ 
RewriteRule .* %{REQUEST_URI}?%1%2 [R=301,L]

# then, silently rewrite everything to app.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

这样，只有`PHPSESSID=smth`参数被删除，其余的查询字符串被传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:14:21.357

在执行从查询字符串中删除 的重定向之前，**您** 正在重写 URI 。您想在此之前这样做，以免被重写。`app.php``PHPSESSID``%{REQUEST_URI}`

尝试用以下内容替换所有内容`DirectoryIndex app.php`：

```
<IfModule mod_rewrite.c>
RewriteEngine On

# remove PHPSESSID first
RewriteCond %{QUERY_STRING} PHPSESSID=.*$ 
RewriteRule .* %{REQUEST_URI}? [R=301,L]

# rewrite to app.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ app.php [QSA,L]

</IfModule> 
```

# python - 使用 Python 生成时间戳的最可靠方法

> ID：11642105
> 
> 赞同：0
> 
> 时间：2012-07-25T03:04:29.597
> 
> 标签：python, time

我想知道生成时间戳最可靠的方法是使用 Python。我希望将此值放入 M​​ySQL 数据库中，并让其他编程语言和程序能够解析并使用此信息。

我想它要么是日期时间，要么是时间模块，但我不知道在这种情况下我会使用哪个，也不知道方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:23:40.417

```
import datetime    
print datetime.datetime.now().strftime("%Y-%m-%d-%H%M") 
```

它应该返回一个具有您想要的格式的字符串。通过查看[strftime()](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)自定义字符串。例如，这是我用于日志文件名的文本格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:27:35.767

如果它只是一个简单的时间戳，需要多个程序读取，但它不需要在 sql 中“表示”任何东西，并且你不关心不同用户的不同时区或类似的东西，那么从unix epoch（1970 年开始）是一个简单的通用标准，由`time.time()`.

python 实际上返回一个浮点数（至少在 linux 上），但如果您只需要第二个精度，则将其存储为整数。

如果您想要在 sql 中更有意义的内容，请使用日期时间或时间戳等 sql 类型。这使您可以更轻松地进行更多“有意义”的查询（例如特定日期的查询）（您也可以从纪元开始几秒钟，但它需要搞乱转换），但它也因时区和转换而变得更加复杂不同语言的不同格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:07:51.293

对于数据库，最好的办法是以数据库原生格式存储它，假设它的精度符合您的需求。对于 SQL 数据库，该`DATETIME`类型是适当的。

编辑：或者`TIMESTAMP`。

# android - Bundle 类型中的 putDoublArray(String, double[]) 方法不适用于参数 (String, Double[])

> ID：11642109
> 
> 赞同：0
> 
> 时间：2012-07-25T03:04:51.207
> 
> 标签：android, bundle

如何解决这个故障。以及如何从 'for(Blog blog:blogList)' 获取数组数据。你能告诉我，我的代码中有哪个错误吗？//Bundle类型中的putDoubleArray(String, double[])方法不适用于参数(String, Double[])

```
final ArrayList<Blog> blogList = (ArrayList<Blog>) message
                .getResultList("Blog");
        for (Blog blog : blogList) {
            int i=0;
                latitude_Array[i] = Double.parseDouble(blog.getLatitude_zzs());
                longitude_Array[i]=Double.parseDouble(blog.getLongitude_zzs());
                i++;
        }
        btn = (Button) findViewById(R.id.main_top_map_list);
        btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(MainActivity.this,
                            MainActivity_MapList.class);
                    //The method putDoubleArray(String, double[]) in the type Bundle is not applicable for the arguments (String, Double[])
                    bundle.putDoubleArray("latitude_Array", latitude_Array);

                    // intent.putExtras(bundle);
                    finish();
                    startActivity(intent);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:08:04.297

这就是错误消息所说的。显然，您的`latitude_Array`变量被声明为`Double []`. 一种解决方法是声明您的`latitude_Array`（并且可能也声明`longitude_Array`为 type`double []`而不是`Double []`. （与往常一样，情况很重要。A`Double`是一个包含原始`double`值的对象。它的主要用途是用于不能包含原始值的集合。）

如果您绝对需要它们是 type `Double []`，那么您必须先将值复制到原始数组中，然后再将其填充到`Bundle`.

# winapi - 无法正常运行 explorer.exe

> ID：11642112
> 
> 赞同：1
> 
> 时间：2012-07-25T03:05:21.877
> 
> 标签：winapi, explorer, autohotkey

我玩一些需要结束进程的旧游戏`explorer.exe`。这很好，除了我想要一种`explorer.exe`在我玩完后重新开始的方法。我想用这个：

```
^#e::
    Run, explorer.exe
    Return 
```

奇怪的是，当我运行它时，它会在“库”中打开一个窗口。但是，当我打开任务管理器和`Start new process --> explorer.exe`时，一切都回来了（桌面、任务栏，所有这些）。

为什么自动热键`run, explorer.exe`不做同样的事情？我怎样才能让它启动 explorer.exe 以便我恢复一切，就像我在任务管理器中所做的那样？

更新：解决方案是把`%windir%\explorer.exe`. 这是我的最终代码，它可以正常工作。

```
#e::
    Run, %windir%\explorer.exe
    Return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:15:25.507

您是否尝试使用 运行它`start.exe`？IE`Run, start explorer.exe`

# uitableview - 在 iOS 的 UISearchResultsTableView 中显示自定义背景图片

> ID：11642121
> 
> 赞同：1
> 
> 时间：2012-07-25T03:06:39.440
> 
> 标签：uitableview, ios4, uisearchdisplaycontroller, ios5, uisearchresultscontroller

目前我有这段代码将 TableView 中的默认背景更改为自定义图片，但是当用户在 UISearchBar 中进行搜索时，搜索结果 TableView 是纯白色背景。我在哪里/如何将其更改为与我的常规非搜索 TableView 相同？

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Employee List", @"Employee List");
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
            self.clearsSelectionOnViewWillAppear = NO;
            self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
        }
        else {
            {
                UIImageView *tempImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Cloth.png"]];
                [tempImageView setFrame:self.tableView.frame]; 

                self.tableView.backgroundView = tempImageView;
            }
        }
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:59:02.567

您应该能够通过 searchDisplay 控制器访问 searchResults TableView：

```
...
UIImageView *tempImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Cloth.png"]];
[tempImageView setFrame:self.tableView.frame]; 

self.tableView.backgroundView = tempImageView;
self.searchDisplayController.searchResultsTableView.backgroundView = tempImageView;
... 
```

# android - Android AutoCompleteTextView

> ID：11642122
> 
> 赞同：0
> 
> 时间：2012-07-25T03:06:42.530
> 
> 标签：android

当我`a`在 EditText 上键入时，我想让`add`、<code>acer、...显示在下拉菜单中。我知道它可以通过**AutoCompleteTextView 完成**。但是我想让它也显示`bat`、<code>cat...，字符串`a`在一个单词中，而不是在前面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:56:40.710

[这](http://android.foxykeep.com/tag/autocompletetextview)与您正在寻找的东西相同..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:47:10.557

看起来您必须实现自己的[Filter](http://developer.android.com/reference/android/widget/Filter.html)类。然后你必须实现一个 ListAdapter （包装你的字符串列表），它也实现了[Filterable](http://developer.android.com/reference/android/widget/Filterable.html)接口；调用 getFilter 时，此子类应返回您的自定义过滤器。您通过 setAdapter() 方法将自定义 ListAdapter/Filterable 传递到 AutoCompleteTextView。（实现这一切的一个简单方法是继承 Android 的 ArrayAdapter。）

这是 ArrayAdapter 的[源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java)。找到 ArrayFilter 的定义（在底部）并根据您的需要进行修改。以下代码是您可能正在寻找的带有修改的 ArrayFilter。在应用到您自己的 Adapter 子类之前，您必须研究 、 和 的`mLock`效果`mObjects`。`mOriginalValues`

```
private class ArrayFilter extends Filter {
    @Override
    protected FilterResults performFiltering(CharSequence prefix) {
        FilterResults results = new FilterResults();

        if (mOriginalValues == null) {
            synchronized (mLock) {
                mOriginalValues = new ArrayList<T>(mObjects);
            }
        }

        if (prefix == null || prefix.length() == 0) {
            ArrayList<T> list;
            synchronized (mLock) {
                list = new ArrayList<T>(mOriginalValues);
            }
            results.values = list;
            results.count = list.size();
        } else {
            String prefixString = prefix.toString().toLowerCase();

            ArrayList<T> values;
            synchronized (mLock) {
                values = new ArrayList<T>(mOriginalValues);
            }

            final int count = values.size();
            final ArrayList<T> newValues = new ArrayList<T>();
            for (int i = 0; i < count; i++) {
                final T value = values.get(i);
                final String valueText = value.toString().toLowerCase();

                if (valueText.contains(prefixString)) {
                    newValues.add(value);
                }
            }

            results.values = newValues;
            results.count = newValues.size();
        }

        return results;
    }

    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {
        //noinspection unchecked
        mObjects = (List<T>) results.values;
        if (results.count > 0) {
            notifyDataSetChanged();
        } else {
            notifyDataSetInvalidated();
        }
    }
} 
```

# javascript - 使用 PHP 和 IE-9 的 Valums 上传器

> ID：11642124
> 
> 赞同：0
> 
> 时间：2012-07-25T03:06:43.217
> 
> 标签：javascript

我正在使用 valums 很棒的上传脚本。它适用于我测试的所有地方，除了 IE9，微调器永远挂起并且永不停止。我已经广泛搜索并找到了从更新的 JS 文件到简单地将内容类型 text/html 添加到 PHP 文件的答案，但没有任何效果。

有谁知道可以做什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:07:04.120

OMG - I fixed it!! Heres the answer:

In the qqUploadedFileXhr.php, there is a save($path) function. In it, there is another function called getName(). Replace it with the following:

```
function getName() {
if (isset($_GET['qqfile'])) {
    return $_GET['qqfile'];
} elseif (isset($_FILES['qqfile'])) {
    return $_FILES['qqfile']['name'];
}
} 
```

IE9 uses $_FILES when uploading, not $_GET, so we need to check for that. So if $_FILES is set, we return the name of the file. Simple, works. Took me forever to figure out, so hopefully this helps you!

# objective-c - NSMenu -- 循环遍历菜单中的项目时从菜单中删除项目

> ID：11642125
> 
> 赞同：0
> 
> 时间：2012-07-25T03:06:49.893
> 
> 标签：objective-c, for-loop, osx-lion, nsmenu

我可以编写如下代码吗？它似乎有效，但我想确保它是允许/安全的：

```
// menu is a NSMenu*
for (NSMenuItem *item in [menu itemArray]) {
    if (some condition) {
        [menu removeItem:item];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:13:32.493

如果它没有立即抛出异常（就像在枚举时直接修改数组一样），那么它可能没问题。`NSMenu`可能会为您提供其内部数组的副本（假设它将其项目保存在 中`NSArray`）。

但是，为了保证安全，您可能希望分两步执行此操作。创建另一个数组来保存要删除的项目，然后枚举*它*并进行删除：

```
NSMutableArray * itemsToRemove = [NSMutableArray array];
for( NSMenuItem *item in [menu itemArray] ){
    if( some condition ){
        [itemsToRemove addObject:item];
    }
}

for( NSMenuItem * item in itemsToRemove ){
    [menu removeItem:item];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T09:55:47.493

仅作记录：
如果您关心内存并且不想创建辅助数组，请使用：

```
for (int i = menu.itemArray.count - 1; i >= 0; --i)
{
    if( some condition for index i ){
        [menu removeItemAtIndex:i];
    }
} 
```

# javascript - 跨域域代理的优点/缺点？

> ID：11642126
> 
> 赞同：0
> 
> 时间：2012-07-25T03:06:56.397
> 
> 标签：javascript, ajax, jquery, jsonp

我目前正在为是否创建跨域请求代理的想法而苦苦挣扎。

我有一个与 API 交互的 jQuery 应用程序，在初始页面加载时至少向该服务器发出 4 个请求。两台服务器都完全在我的控制之下，但它们位于不同的子域上。出于这个原因，我一直在朝着使用 JSONP 绕过跨域请求策略的方法前进。

但是，我确实特别错过了一项功能：获取请求的 HTTP 状态代码。JSONP + jQuery 的工作方式，请求是否有效。如果没有，我为请求指定超时，如果达到超时，我假设失败（否则无法知道）。我真的很希望能够响应来自 API 服务器的 404 与 500 错误。

这使我认为本地代理可能会更好地工作 - 但它会占用服务器端资源（保存 jQuery 应用程序 + Sinatra 应用程序的服务器）而不是客户端资源（浏览器）。当每个页面加载是对 API 服务器的 4 个以上请求时，这当然可以加起来，即使它不会阻止应用程序加载。

我知道这不是一个真正的“问题”——所以如果不合适，请随时标记/关闭它。但是，我真的很想就这个问题发表一些意见。我通过在 Ruby 中开发本地代理来引入一些复杂性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:47:16.540

我会坚持 JSONP 和子域之间的直接通信。

此外，您可能想查看[使用 iframe 进行通信的（hacky）方法](http://www.nczonline.net/blog/2009/09/15/iframes-onload-and-documentdomain/)。iframe 不受子域间限制。只要两个子域都属于同一个顶级域，它们就可以通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:12:12.737

JSONP 有一些限制，并不是您唯一的选择。由于您控制了两个域，您是否考虑过使用 CORS？如果没有，请查看：[http ://www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

您可以在此处阅读有关 JSON-P 与 CORS 的信息：http: [//json-p.org/](http://json-p.org/)

# ruby - 模块内需要文件？

> ID：11642128
> 
> 赞同：10
> 
> 时间：2012-07-25T03:06:59.300
> 
> 标签：ruby

我在某人的存储库中看到了以下源代码：

```
module Twitter
  module Bootstrap
      module Rails
        require 'twitter/bootstrap/rails/engine' if defined?(Rails)
      end
   end
end

require 'less-rails'
require 'twitter/bootstrap/rails/bootstrap' if defined?(Rails) 
```

[资源](https://github.com/seyhunak/twitter-bootstrap-rails/blob/master/lib/twitter-bootstrap-rails.rb)

我想知道当我们放入`require`一个模块时有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T03:36:13.417

就其而言没有区别`require`，即`require`始终将文件加载到全局命名空间中。

应该注意的是，在这种情况下，inner`require`将*始终*运行，因为`Rails`此时引用它所在的模块，因此`if`那里的语句将始终评估为 true。

这意味着代码等同于可能不那么令人困惑的代码：

```
module Twitter
  module Bootstrap
    module Rails
    end
  end
end

require 'twitter/bootstrap/rails/engine'
require 'less-rails'
require 'twitter/bootstrap/rails/bootstrap' if defined?(Rails) 
```

# jsf - 如何过滤 t:dataTable 中的数据

> ID：11642133
> 
> 赞同：0
> 
> 时间：2012-07-25T03:07:22.077
> 
> 标签：jsf, jsf-1.2

我有 at:dataTable 标签如下：

```
<t:dataTable rows="20" styleClass="dataTable1" rowClasses="dt1_OddRow,dt1_EvenRow" id="channelBrowser" value="#{channelBrowser}" var="currChannel" binding="#{channelBrowser.table}" renderedIfEmpty="false"
                    sortColumn="#{channelBrowser.orderBy}" sortAscending="#{channelBrowser.ascending}">

//show data

</t:dataTable> 
```

现在，我想在 dataTable 显示结果之前过滤数据：

```
<t:dataTable rows="20" styleClass="dataTable1" rowClasses="dt1_OddRow,dt1_EvenRow" id="channelBrowser" value="#{channelBrowser}" var="currChannel" binding="#{channelBrowser.table}" renderedIfEmpty="false"
                    sortColumn="#{channelBrowser.orderBy}" sortAscending="#{channelBrowser.ascending}">

if data is satisfy a condition
   //show data

</t:dataTable> 
```

那么，有什么方法可以使用“if”语句或“if”标记或参数来过滤dataTable中的数据？太感谢了。

# python - 我可以在 64 位 python 中使用 32 位 dll 或 exe 吗？

> ID：11642134
> 
> 赞同：22
> 
> 时间：2012-07-25T03:07:23.107
> 
> 标签：python, dll, 32bit-64bit

当我使用 CDLL 在 32 位 python 中调用 32 位 dll 时，它运行良好。但不幸的是在我的64位win7操作系统中只安装了64位python，调用时轮流显示：它不是一个有效的win32应用程序！

我可以在 64 位 python 中使用 32 位 dll 或 exe 吗？或者我必须安装 32bit python 代替？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-25T03:13:05.177

64 位 EXE 无法加载 32 位 DLL。（反之亦然：32 位 EXE 无法加载 64 位 DLL。）毕竟，它们无法就指针的大小达成一致——如果 EXE 分配的内存超出 4GB 边界并想要传递它会发生什么情况指向 32 位 DLL 的指针？

您必须：

1.  制作 64 位版本的 DLL；
2.  使用 32 位版本的 Python；或者
3.  将 DLL 托管在单独的（32 位）EXE 中，并使用某种形式的进程间通信从您的 64 位 Python 进程与其通信。

# ios - UIButton 动画问题 - iOS

> ID：11642143
> 
> 赞同：0
> 
> 时间：2012-07-25T03:08:15.977
> 
> 标签：ios, xcode, uibutton

我正在尝试处理 UIButton 动画，其中按钮移动到一个点，然后将隐藏设置为 true。但是，当我尝试处理以下代码时，按钮甚至在动画完成之前就消失了。我做得对吗？有什么建议么？

```
[UIView animateWithDuration:0.8
                 animations:^{

                     selectedCurveIndex = 0;
                     [tradebutton moveTo:
                      CGPointMake(51,150) duration:0.8 
                                  option:curveValues[UIViewAnimationOptionCurveEaseInOut]];
                 }
                 completion:^(BOOL finished){ 

                     [tradeButton setHidden:TRUE];

                     UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
                     UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"ButtonView"];

                     self.modalPresentationStyle = UIModalPresentationCurrentContext;
                     [self presentModalViewController:vc animated:NO];

                 }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:13:19.640

在继续之前，您需要确保已**完成**设置为**YES 。**

您的按钮隐藏得很快，因为**0.8**是一个快速动画持续时间。您将需要找出另一个隐藏按钮的位置，或者您可以

试试这个：

```
[UIView animateWithDuration:0.8
                 animations:^{

                     selectedCurveIndex = 0;
                     [tradebutton moveTo:
                      CGPointMake(51,150) duration:0.8 
                                  option:curveValues[UIViewAnimationOptionCurveEaseInOut]];
                 }
                 completion:^(BOOL finished){ 

                     if ( finished ) 
                     {    
                         [tradeButton performSelector:@selector(setHidden:) withObject:@"YES" afterDelay:3.0];

                         UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
                         UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"ButtonView"];

                         self.modalPresentationStyle = UIModalPresentationCurrentContext;
                         [self presentModalViewController:vc animated:NO];
                     }
                 }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:52:43.927

问题是您在该`moveTo:duration:option:`方法中创建了第二个内部动画块，并在该内部块中设置了所有可动画属性。您没有在外部块中设置任何动画属性。

这意味着系统立即认为外部动画已经完成，并立即调用完成块。同时，内部动画块仍在进行中。

停止使用`moveTo:duration:option:`。它几乎没有为您节省任何费用，并最终给您带来这样的麻烦。把它扔掉并尝试这样的事情：

```
[UIView animateWithDuration:0.8 animations:^{
    tradeButton.frame = (CGRect){ CGPointMake(51, 150), tradeButton.bounds.size };
} completion:^(BOOL finished) {
    tradeButton.hidden = YES;
    // etc.
}]; 
```

请注意，这`UIViewAnimationOptionCurveEaseInEaseOut`是大多数动画的默认设置。

# java - Quartz Scheduler：触发器执行的时间不一致

> ID：11642144
> 
> 赞同：3
> 
> 时间：2012-07-25T03:08:33.667
> 
> 标签：java, spring, triggers, weblogic, quartz-scheduler

我有几个 Java 应用程序在带有 Spring 的 Weblogic 上使用 Quartz 1.6.6（一个使用 Spring v. 2.5.4；另一个使用 Spring v. 3.1.1）。我的架构在 Weblogic 集群中有两个应用服务器。

两个应用程序都设置了简单的触发器（使用和`org.springframework.scheduling.quartz.SchedulerFactoryBean`）。它们都设置为每 60 秒运行一次。`org.springframework.scheduling.quartz.SimpleTriggerBean``org.springframework.scheduling.quartz.JobDetailBean`

我已将日志记录添加到关联的`org.springframework.scheduling.quartz.QuartzJobBean`（在`executeInternal()`方法开始时），它会写入进程执行的时间。

我发现时间不一致 - 有时特定分钟的执行不会发生。例子：

应用程序 1 有一个触发进程，在以下时间执行：

```
14:26:26,098
14:28:26,089
14:31:26,096
14:33:26,093
14:35:26,095
14:36:26,098
14:38:26,103 
```

应用程序 2 有两个触发过程，分别在以下时间执行：

```
14:40:05,951 (trigger 1)
14:41:05,951 (trigger 2)
14:42:05,943 (trigger 1)
14:43:05,954 (trigger 2)
14:44:05,937 (trigger 1)
14:45:05,956 (trigger 2)
14:46:05,953 (trigger 2)
14:47:05,937 (trigger 1)
14:48:05,941 (trigger 1)
14:49:05,939 (trigger 1)
14:50:05,951 (trigger 2) 
```

如果我关闭一个 Weblogic 应用程序服务器，那么这两个应用程序每分钟都非常愉快地运行它们的所有作业。

我检查了所有作业的数据库表并且`QRTZ_SIMPLE_TRIGGERS.REPEAT_INTERVAL`是正确的（60,000 毫秒）。`QRTZ_TRIGGERS.PREV_FIRE_TIME`和之间的差值`QRTZ_TRIGGERS.NEXT_FIRE_TIME`也是60,000。

我`quartzProperties`在应用程序上下文文件中的定义具有以下条目：

```
<property name="quartzProperties">
    <props>
        <prop key="org.quartz.scheduler.instanceName">MyClusteredScheduler</prop>
        <prop key="org.quartz.scheduler.instanceId">AUTO</prop>
        <prop key="org.quartz.threadPool.class">org.quartz.simpl.SimpleThreadPool</prop>
        <prop key="org.quartz.threadPool.threadCount">5</prop>
        <prop key="org.quartz.jobStore.class">org.quartz.impl.jdbcjobstore.JobStoreTX</prop>
        <prop key="org.quartz.jobStore.driverDelegateClass">org.quartz.impl.jdbcjobstore.StdJDBCDelegate</prop>
        <prop key="org.quartz.jobStore.isClustered">true</prop>
        <prop key="org.quartz.jobStore.clusterCheckinInterval">5000</prop>
        <prop key="org.quartz.jobStore.dataSource">myDS</prop>
        <prop key="org.quartz.jobStore.tablePrefix">QRTZ_</prop>
        <prop key="org.quartz.dataSource.myDS.driver">oracle.jdbc.driver.OracleDriver</prop>
        <prop key="org.quartz.dataSource.myDS.URL">{db connection string}</prop>
        <prop key="org.quartz.dataSource.myDS.user">{username}</prop>
        <prop key="org.quartz.dataSource.myDS.password">{password}</prop>
        <prop key="org.quartz.dataSource.myDS.maxConnections">5</prop>
        <prop key="org.quartz.dataSource.myDS.validationQuery">select 0 from dual</prop>
    </props>
</property> 
```

关于为什么会这样的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:28:58.460

看似已修复：问题更多是依赖于不一致的日志消息来建议不一致的触发时间，而不是与 Quartz 有任何关系。

# html - 缩小 Iphone 上 gmail 应用程序的 html 模板

> ID：11642145
> 
> 赞同：0
> 
> 时间：2012-07-25T03:08:46.553
> 
> 标签：html, media-queries, html-email, email-client, email-templates

我正在为我的公司制作一个 html 电子邮件模板。我有一个缩小问题，它使 html 电子邮件模板的某些部分看起来比其他部分小。

我使用以下媒体查询

```
@media only screen and (max-device-width: 380px) {

    .mobileWidth {
      width: 290px !important; 
    }

    img { 
    max-width: 130px !important;
    max-height: 130px !important;
    }       

     .test {
       width: 290px !important;
       text-align: center !important;
     }

    .hideMobile {
      display: none;
    }           
  } 
```

电子邮件分为三部分： 1) 4-5 行的文本

```
 text
      text
      text
      text 
```

2) 图像 小图像和文本

```
 -------------
      |           |      text 1
      |           |      text 2
      |   img1    |      text 3
      |           |      text 4
      ------------- 
```

3）三个更大的图像：

```
 ---------------------
                     |                    |      
                     |                    |      
                     |                    |      
                     |                    |
                     |       img2         |
                     |                    |
                     |                    |
                     |                    |
                     |                    |
                      ---------------------      

                     ---------------------
                     |                    |      
                     |                    |      
                     |                    |      
                     |                    |
                     |       img3         |
                     |                    |
                     |                    |
                     |                    |
                     |                    |
                      ---------------------   

                      ---------------------
                     |                    |      
                     |                    |      
                     |                    |      
                     |                    |
                     |       img4         |
                     |                    |
                     |                    |
                     |                    |
                     |                    |
                      --------------------- 
```

我面临的问题是媒体查询适用于 iPhone 内置邮件帐户。

问题出在 iPhone 的 gmail 应用程序上。电子邮件的第 1 部分和第 2 部分被缩小到大约 60-65%，第 3 部分很好。

而且我正在使用最原始的 html 编码方式进行内联 CSS，因为大多数电子邮件客户端都剥离了外部 CSS 文件。

因为我有严格的保密协议，所以我不能在这里发布代码，但我认为这对于所有编写电子邮件模板的人来说一定是一个常见问题。任何提示或指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:03:01.320

Gmail 会剥离媒体查询，因此如果用户通过 Gmail 应用在移动设备上查看电子邮件，他们将收到桌面视图。

# ios5 - 找出用于 UIViewController 的 NSBundle

> ID：11642148
> 
> 赞同：0
> 
> 时间：2012-07-25T03:09:45.290
> 
> 标签：ios5, nsbundle

当 UIViewControllers 使用 实例化时`- (id)initWithNibName:bundle:`，你可以传入一个包。

有没有办法让实例化的视图控制器找出它的原始包是什么？

我有一个容器 UIViewController ，我想使用创建父级的相同包来实例化它的子级 UIViewController。除了将捆绑包保存为 ivar 之外，还有其他方法可以得到它吗？

```
ContainerViewController *pvc = [[ContainerViewController alloc] 
initWithNibName:nil bundle:[NSBundle mainBundle]];

// inside ContainerViewController:
ChildViewController *cvc = [[ChildViewController alloc] 
initWithNibName:nil bundle:parentBundle]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:28:03.440

`UIViewController`有一个名为的属性`nibBundle`，其中包含您要查找的内容：

[UIViewController 类参考：](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

> **nibBundle**
> 如果存在，则返回接收者的 nib 包的名称。（只读）
> 
> `@property(nonatomic, readonly, retain) NSBundle *nibBundle`
> 
> **可用性**
> 适用于 iOS 2.0 及更高版本。
> **另请参阅**
> `- initWithNibName:bundle:`
> `@property nibName`
> **在**
> UIViewController.h中声明

所以，你可以使用：

```
ChildViewController *cvc = [[ChildViewController alloc] initWithNibName:nil bundle:self.nibBundle]; 
```

# python - 在python中递归打印钻石

> ID：11642150
> 
> 赞同：1
> 
> 时间：2012-07-25T03:10:20.210
> 
> 标签：python, printing, recursion, python-3.x

任何人都可以在这里帮助我，我被困在将这段代码转换为递归函数的基本案例中......显然不能在递归函数中使用循环。

```
def diamond(a):

assert a > 0, "width must be greater than zero"

for i in range(0, a, 2):

    for c in range(0, a - i, 2):
        print(" ", end='')

    if a % 2 == 0:
        i += 1

    for m in range(0, i - 1):
        print("*", end='')

    print()

for i in range (0, a, 2):

    for c in range(0, i, 2):
        print(" ", end='')

    for m in range(0, a - i):
        print("*", end='')

    print() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:45:10.267

因为这一定是功课，所以我就不给你代码了，而是用文字解释一下怎么做：

您无需循环，而是创建一个调用自身的函数，并将您需要的变量作为参数传递。然后你在函数中有一个带有“if”的测试，当它为真时，停止循环并返回。那就是你将“掉”出循环。

因此，在这种情况下，您将传入`a`和`i`作为参数，`i`在函数中加一，当`i`大于时`a`，只是`return`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T19:12:42.997

尝试这个

```
def triangles(n):
     if not n & 1:
         raise ValueError('n must be odd')
    print_diamond(0, n, n >> 1)

def print_diamond(start, stop, midpoint):
    if start < stop:
        if start <= midpoint:
            print('  ' * (midpoint - start) + '* ' * ((start << 1) + 1))
        else:
            print('  ' * (start - midpoint) + '* ' * ((stop - start << 1) - 1))
        print_diamond(start + 1, stop, midpoint)

triangles(5) 
```

# java - 如何从列表中获取重复值的数量（计数）

> ID：11642151
> 
> 赞同：0
> 
> 时间：2012-07-25T03:10:23.843
> 
> 标签：java, list, collections, map

> **可能重复：**
> [如何计算列表中元素的出现次数](https://stackoverflow.com/questions/505928/how-to-count-occurrence-of-an-element-in-a-list)
> [ArrayList 中单词的出现次数](https://stackoverflow.com/questions/5211194/count-occurences-of-word-in-arraylist)

假设我有一个列出以下值

```
emp1, emp2, emp3, emp2, emp1, emp4, emp1 
```

我需要获取字符串重复的次数，如下所示

```
emp1 - 3 times  
emp2 - 2 times  
emp3 - 1 times  
emp4 - 1 times 
```

我正在尝试通过使用地图来实现这一点。这是正确的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:15:54.097

您有多个选项，您可以使用一个`Map<Item, Integer>`并使用映射值来存储频率，这将有利于时间复杂度，但不利于空间复杂度。

```
for (Item i : list)
{
  Integer f = map.get(i);

  if (f == null)
    map.put(i, 1);
  else
    map.put(i, ++f);
} 
```

否则，您可以使用一些设施方法，[`Collections.frequency(Collection<?> c, Object o)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#frequency%28java.util.Collection,%20java.lang.Object%29)但只有在您正在寻找单个元素的频率时才会这样做，否则您将需要一个集合来检查唯一性，因此第一种方法会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T08:31:05.917

您可以使用[`Multiset`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html?com/google/common/collect/Multiset.html)from [Guava](http://code.google.com/p/guava-libraries/)，它将计算每个值的出现次数。最简单的实现是[`HashMultiset`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html?com/google/common/collect/HashMultiset.html)，但您也可以使用不可变的实现，例如[`ImmutableMultiset`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html?com/google/common/collect/ImmutableMultiset.html)如果您需要保留它。

使用起来很简单：

```
Multiset<Item> items = HashMultiset.create(list);
System.out.println(items.count(someItem));
for (Multiset.Entry<Item> entry : items.entrySet()) {
    System.out.println(entry.getElement() + " - " + entry.getCount() + " times");
} 
```

# iphone - 检查 NSDictionary 值的 NSString 变量 [NSNull null]

> ID：11642156
> 
> 赞同：2
> 
> 时间：2012-07-25T03:11:38.247
> 
> 标签：iphone, ios, nsdictionary, xmlwriter

我正在使用 xmlWriter 创建一个 XML，我在一个具有多个键/值对的 NSDictionary 中有值，但是其中一些值是 [NSNull null]，我将每个值都传递到它自己的 NSString 中。

在我的 XMLWriter 方法中，我有一个 if 语句来检查这是否是对 db 的特定方法调用，如果是，那么我想仅为不相等的 NSString 变量创建 writeAttributes [NSNull null]。

我不确定如何动态检查每个变量。我想也许我可以做一个 if 语句，但那是行不通的，因为只要其中一个变量不等于 [NSNull null] 那么它就会跳出这个当 xml 可能需要更多变量时，它是 XMLWritter 的一部分。

这是我失败的想法，所以你明白我想要做什么

```
// Method Params --->
- (NSMutableData *) addMethodParams
{  
    //allocate serializer (this is using the xmlWriter class)
    id <XMLStreamWriter> xmlWriter = [[XMLWriter alloc] init];
    [xmlWriter writeStartElement:@"Eng"];
        [xmlWriter writeStartElement:@"Parameters"];
            [xmlWriter writeStartElement:@"Vars"];
    if ([methodName isEqualToString:@"SeriesSearch"]) // name of method currently being requested
    {
        if ((NSNull *) Series != [NSNull null]) { // if this is null then its jumped
            [xmlWriter writeAttribute:@"Code" value:Series];
        }
        else if ((NSNull *) IDSeries != [NSNull null]){ //if this is !null then it enters the if statement however it then will jump out and not check over any of the other if statments
            [xmlWriter writeAttribute:@"ManufacturerID" value:IDSeries]; 
        }
        //..

    }
            [xmlWriter writeEndElement];
        [xmlWriter writeEndElement];
    [xmlWriter writeEndElement]; 
```

所以问题是如何将具有值的变量添加到我的 xml 中以停止为空的变量？创建我猜是一种动态 xml 编写器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T03:22:08.070

通常，当您必须编写两次以上（甚至多次）相同的代码时，您应该考虑创建一个方法或函数。所以你可以写一个这样的方法：

```
- (void)writeAttribute:(NSString *)name ifNonNullValue:(id)value toWriter:(id<XMLStreamWriter>)writer {
    if (value != [NSNull null]) {
        [writer writeAttribute:name value:value];
    }
} 
```

并像这样使用它：

```
[self writeAttribute:@"Code" ifNonNullValue:Series toWriter:xmlWriter];
[self writeAttribute:@"ManufacturerID" ifNonNullValue:IDSeries toWriter:xmlWriter];
... 
```

您还可以考虑将类别添加到`XMLWriter`. 类别允许您将自己的方法添加到任何类。所以你可以添加一个这样的类别：

```
// XMLWriter+NonNull.h

#import "XMLWriter.h"

@interface XMLWriter (NonNull)

- (void)writeAttribute:(NSString *)name ifNonNullValue:(id)value;

@end

// XMLWriter+NonNull.m

@implementation XMLWriter (NonNull)

- (void)writeAttribute:(NSString *)name ifNonNullValue:(id)value {
    if (value != [NSNull null]) {
        [self writeAttribute:name value:value];
    }
}

@end 
```

并像这样使用它：

```
// At top of file
#import "XMLWriter+NonNull.h"

...
    [xmlWriter writeAttribute:@"Code" ifNonNullValue:Series];
    [xmlWriter writeAttribute:@"ManufacturerID" ifNonNullValue:IDSeries];
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:15:25.907

由于值来自字典，您可以设置一个循环来写入所有属性：

```
NSDictionary *keyToAttr = [NSDictionary dictionaryWithValuesAndKeys:
    @"Code", @"Series", @"ManufacturerID", @"IDSeries", nil];

for (key in keyToAttr) {
    NSString *data = [dataDict objectForKey:key];
    if (data && ((NSNull*)data != [NSNull null])) {
        NSString *attrName = [keyToAttr objectForKey:key];
        [xmlWriter writeAttribute:attrName data]; 
    }
} 
```

# php - Doctrine preUpdate Listener 未在数据库中设置字段值

> ID：11642157
> 
> 赞同：1
> 
> 时间：2012-07-25T03:11:50.360
> 
> 标签：php, symfony, doctrine-orm

我有这个代码

```
public function preUpdate(PreUpdateEventArgs $args)
{
    $entity = $args->getEntity();
    $em = $args->getEntityManager();
    $uow = $em->getUnitOfWork();
    $args->isActive = false;

    $meta = $em->getClassMetadata(get_class($entity));
    $uow->recomputeSingleEntityChangeSet($meta, $entity);
} 
```

我尝试了很多次，但它没有更新该字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:26:54.773

应该`$entity->isActive = false;` 代替 `$args->isActive = false;`.

# scala - 一个看似老化的电梯异常：消息：scala.MatchError：ScalaRunTime.scala:136 上的 null

> ID：11642158
> 
> 赞同：0
> 
> 时间：2012-07-25T03:12:04.277
> 
> 标签：scala, exception, version, lift

```
Message: scala.MatchError: null
    scala.runtime.ScalaRunTime$.boxArray(ScalaRunTime.scala:136)
    net.liftweb.http.Req$$anonfun$16.apply(Req.scala:374)
    net.liftweb.http.LiftMerge$class.fixAttrs$1(LiftMerge.scala:98)
    net.liftweb.http.LiftMerge$class.fixAttrs$1(LiftMerge.scala:99)
    net.liftweb.http.LiftMerge$class.fixAttrs$1(LiftMerge.scala:99)
    net.liftweb.http.LiftMerge$class.fixAttrs$1(LiftMerge.scala:99)
    net.liftweb.http.LiftMerge$class.fixAttrs$1(LiftMerge.scala:99)
    net.liftweb.http.LiftMerge$class.fixAttrs$1(LiftMerge.scala:99)
    net.liftweb.http.LiftMerge$$anonfun$_fixHtml$1$1.apply(LiftMerge.scala:151)
    net.liftweb.http.LiftMerge$$anonfun$_fixHtml$1$1.apply(LiftMerge.scala:105)
    scala.Seq$class.flatMap(Seq.scala:294)
    scala.xml.NodeSeq.flatMap(NodeSeq.scala:34)
    net.liftweb.http.LiftMerge$class._fixHtml$1(LiftMerge.scala:104)
    net.liftweb.http.LiftMerge$$anonfun$_fixHtml$1$1.apply(LiftMerge.scala:151)
    net.liftweb.http.LiftMerge$$anonfun$_fixHtml$1$1.apply(LiftMerge.scala:105)
    scala.Seq$class.flatMap(Seq.scala:294) 
```

我在这里找到了一个看起来像这样的线程： http://groups.google.com/group/liftweb/tree/browse_frm/month/2009-12/b5a053497a5977af?rnum=31&_done= [%2Fgroup%2Fliftweb%2Fbrowse_frm%2Fmonth%2F2009 -12%3F](http://groups.google.com/group/liftweb/tree/browse_frm/month/2009-12/b5a053497a5977af?rnum=31&_done=/group/liftweb/browse_frm/month/2009-12?)

但是我的版本已经比较新了。怎么还在发生？

这是我在 Maven 中的电梯设置：

```
<dependency>
    <groupId>net.liftweb</groupId>
    <artifactId>lift-mapper</artifactId>
    <version>2.0</version>
</dependency> 
```

我这里没有任何线索:(

# ruby-on-rails - 在开发和生产中配置 Rails 资产管道

> ID：11642159
> 
> 赞同：0
> 
> 时间：2012-07-25T03:12:04.617
> 
> 标签：ruby-on-rails, asset-pipeline

我仍然不太确定使用 Rails 资产管道的最佳实践。在 Rails 框架项目中，application.html.erb 包含以下代码：

```
<head>
  <title>My title</title>
  <%= stylesheet_link_tag "scaffolds" %>
  <%= stylesheet_link_tag "depot", media: "all"  %>
  <%= stylesheet_link_tag "application", media: "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head> 
```

现在正在开发中，所有的 js 和 css 都可以正常使用。但是在生产中，在预编译所有资产（js和css）之后，我只需要application.css和application.js，因为scaffolds.css和depot.css在application.css中是连接的。所以在生产中不再需要scaffolds.css 和depot.css。

我怎么能在开发和生产中拥有上述代码，让资产管道知道某些资产已在 application.css/js 中连接，然后在代码中删除那些资产链接标签？

如果这是不可能的，我应该如何避免加载冗余资源并保持产品部署的可管理性？（意味着不要在生产中手动删除链接标签）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:27:16.580

你不放

```
<%= stylesheet_link_tag "scaffolds" %>
<%= stylesheet_link_tag "depot", media: "all"  %>
<%= stylesheet_link_tag "application", media: "all" %> 
```

在您的布局文件中。你只放

```
<%= stylesheet_link_tag "application", media: "all" %> 
```

在`config/environment/development.rb`你确保你有

```
config.assets.debug = true 
```

当`config.assets.debug`设置为时，`true`它将在开发模式下为文件的 Sprockets 指令`<link ... />` 中所需的每个资产自动生成每个样式表的标签。`application.css`

默认情况下， in`config/environment/production.rb` `config.assets.debug`将`false`导致资产被连接到一个`application.css`文件中*（再次假设您的`//= require`行在 中是正确的`application.css`）*。这将导致 仅在生产中创建**1 个链接标签。**`application.css`

# search - DNN：使用 Enter 键提交搜索

> ID：11642160
> 
> 赞同：2
> 
> 时间：2012-07-25T03:12:44.493
> 
> 标签：search, dotnetnuke

在 DotNetNuke 中，如何让搜索输入框在用户敲回车时“搜索”？标记如下所示：

```
<div class="search">
     <input type="text" placeholder="Search..." value="" name="q">
     <a class="button" href="#">Search</a>
</div> 
```

有一个按钮，单击时它可以工作，但客户要求在键盘上按 Enter 键做同样的事情。搜索功能正常工作，我担心在尝试实现此功能时会破坏它。

我正在为一名未经通知辞职的员工回填。我是一名平面设计师，但对 ASP.NET MVC 有一定的了解。我对 DNN 的经验为零，尝试阅读他们网站上的文档，但它似乎是用另一种语言编写的。我希望有人可以用外行的英语向我解释这一点。

谢谢！

PS - 我检查了这个线程；没有帮助：[在 Enter 键上提交搜索？](https://stackoverflow.com/questions/7218143/submit-search-on-enter-key)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T21:53:56.413

我知道我参加聚会有点晚了，但是我偶然发现了这个问题，并且对此有一个特定的 DNN 答案。

```
 DotNetNuke.UI.Utilities.ClientAPI.RegisterKeyCapture(txtSearch, btnSearch, 13); 
```

将其放在 PageLoad 或 PreInit 等中。

这不是 MVC 答案，那些已经在这个线程中，并且控件必须是带有 runat="server" 等的标准 webforms 样式控件。

DNN 6.2 确实引入了服务框架，因此您可以针对它进行更多的 MVC/MVVM 样式编码，但如果您运行的版本低于此，则此代码将派上用场。

谢谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T03:23:49.713

[jsFiddle 链接](http://jsfiddle.net/8ttj5/1/)

基本上在 keydown 上，您想检查键码 13（即 Enter 按钮），然后提交您的表单/您必须搜索的任何逻辑！

```
$('.search').keydown(function (e) {

  var code = (e.keyCode ? e.keyCode : e.which);
  if (code === 13) { //Enter keycode
     //whatever logic you have for submitting the actual form
     alert('submit hit');
     $('.button').trigger('click');
  }

}); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T04:58:09.547

asp.net 提供了更好的方法来轻松地做到这一点：

```
<asp:panel id="pnlSearch" runat="server" cssclass="search" defaultbutton="btnSerach">
     <input type="text" placeholder="Search..." value="" name="q">
     <asp:linkbutton id="btnSerach" cssclass="button">Search</asp:linkbutton>
</div> 
```

注意`asp:panel`has`DefaultButton`属性可以解决问题。

# excel - 将数据从 excel 动态更新到现有的 powerpoint

> ID：11642161
> 
> 赞同：0
> 
> 时间：2012-07-25T03:12:44.083
> 
> 标签：excel, powerpoint

我仍在寻找解决此问题的正确方法。我尝试了很多方法，但它仍然不起作用，我什至尝试操作一些代码，但仍然不起作用

*   我已经有一堆来自 Excel 仪表板的数据
*   我已经有一个包含图表的 Powerpoint
*   我需要从 Excel 更新数据，Powerpoint 中的图表可以动态更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:43:14.003

我相信这可以在没有任何额外编码的情况下完成。如果您只是在 Excel 中创建聊天，请将其复制并粘贴到 PowerPoint 中，它将链接到原始源数据。请务必将其粘贴为`Microsoft Office Graphic Object`. 现在，在 Excel 中所做的任何更改都将反映在 PowerPoint 中。

您可以通过以下任一方式维护此链接

*   右键单击>重置以匹配样式
*   Office 按钮 > 准备 > 编辑文件链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T09:19:12.510

Fwiw 我在 excel 2010 中工作并选择粘贴选项“保持源格式和实时提要”就可以了

# sql - 从引用的表中删除一行

> ID：11642171
> 
> 赞同：0
> 
> 时间：2012-07-25T03:14:02.413
> 
> 标签：sql, join, delete-row

我有一个需要删除一行的应用程序。当我删除仍未分配***角色的用户时，它可以完美运行。***

以下是表格：

***用户：***

```
user_id | user_name | password
------------------------------
   1    |   some    |   some
   2    |   some2   |   some2
   3    |   some3   |   some3 
```

***角色：***

```
role_id | role_name 
-------------------
   1    | admin
   2    | member 
```

***用户角色：***

```
user_id | role_id
-----------------
   1    |   1
   2    |   2
   3    |   2 
```

问题是我无法使用删除它们

```
DELETE FROM users WHERE user_id = :id 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:19:35.280

如果允许在未为用户分配角色时从用户表中删除一行，但不能删除已分配角色的行，则几乎可以肯定问题是由于设置为 RESTRICT的*外键约束所致。*

信息在这里，在[维基百科](http://en.wikipedia.org/wiki/Foreign_key#Referential_Actions)。

设置数据库的人明确防止在用户具有分配的角色时删除用户。如果允许删除而不发生任何其他事情（NO ACTION），那么您将在`user_role`表中有一行引用不存在的用户，那会有什么乐趣？还有其他可能性，例如删除用户可能会删除所有相应的角色（CASCADE）。

如果这确实是您的问题（约束设置为 RESTRICT），那么您需要先从`user_role`表中物理删除给定用户*的*行，然后您应该能够删除该用户。

# python - cv2.calcOpticalFlowPyrLK 的输入图像的数据类型错误

> ID：11642178
> 
> 赞同：4
> 
> 时间：2012-07-25T03:14:47.277
> 
> 标签：python, opencv, opticalflow

我正在使用 python 绑定运行 opencv 2.4.1，并且难以计算光流。

特别是这部分代码：

```
#calculate the opticalflow
if prev_saturation_thresh_img==None:
    prev_saturation_thresh_img=saturation_img
if i >=0:
    prev_img=prev_saturation_thresh_img
    next_img=saturation_thresh_img
    p1,  st, err = cv2.calcOpticalFlowPyrLK(prev_img,next_img,tracks_np,**lk_params) 
```

返回错误：

```
<unknown> is not a numpy array 
```

然后我尝试将图像转换为 numpy 数组：

```
prev_img=prev_saturation_thresh_img
next_img=saturation_thresh_img 
```

现在我有一个新错误：

```
<unknown> data type = 17 is not supported 
```

在最后的努力中，我将图像转换为 cvmat（来自 iplimage），然后再将其转换为 numpy 数组，看看会发生什么

```
error: ..\..\..\OpenCV-2.4.1\modules\video\src\lkpyramid.cpp:607: error: (-215) nextPtsMat.checkVector(2, CV_32F, true) == npoints 
```

所以现在我被困住了。以下是完整的代码供参考

```
import cv
import cv2
import numpy as np

class Target:
    def __init__(self):
        self.capture = cv.CaptureFromFile("raw_gait_cropped.avi")

    def run(self):
        #initiate font
        font = cv.InitFont(cv.CV_FONT_HERSHEY_SIMPLEX, 1, 1, 0, 3, 8)

        #instantiate images
        img_size=cv.GetSize(cv.QueryFrame(self.capture))
        hsv_img=cv.CreateImage(img_size,8,3)
        saturation_img=cv.CreateImage(img_size,8,1)
        saturation_thresh_img=cv.CreateImage(img_size,8,1)
        prev_saturation_thresh_img=None

        #create params for GoodFeaturesToTrack and calcOpticalFlowPyrLK
        gftt_params = dict( cornerCount=11,
                            qualityLevel=0.2,
                            minDistance=5,
                            mask=None,
                            useHarris=True
                            )

        lk_params = dict(   winSize  = (15, 15), 
                            maxLevel = 2, 
                            criteria = (cv2.TERM_CRITERIA_EPS | cv2.TERM_CRITERIA_COUNT, 10, 0.03),
                            flags = cv2.OPTFLOW_USE_INITIAL_FLOW,
                            minEigThreshold=1
                            )    
        tracks=[]
        writer=cv.CreateVideoWriter("angle_tracking.avi",cv.CV_FOURCC('M','J','P','G'),30,cv.GetSize(hsv_img),1)

        i=0
        while True:
            #grab a frame from the video capture
            img=cv.QueryFrame(self.capture)

            #break the loop when the video is over
            if img == None:
                break

            #convert the image to HSV
            cv.CvtColor(img,hsv_img,cv.CV_BGR2HSV)

            #Get Saturation channel
            cv.MixChannels([hsv_img],[saturation_img],[(1,0)])

            #Apply threshold to saturation channel
            cv.InRangeS(saturation_img,145,255,saturation_thresh_img)

            #locate initial features to track
            if i==0:
                eig_image=temp_image = cv.CreateMat(img.height, img.width, cv.CV_32FC1)
                for (x,y) in cv.GoodFeaturesToTrack(saturation_thresh_img, eig_image, temp_image, **gftt_params):
                    tracks.append([(x,y)])
                    cv.Circle(saturation_thresh_img,(int(x),int(y)),5,(255,255,255),-1,cv.CV_AA,0)
                tracks_np=np.float32(tracks).reshape(-1,2)
                print tracks

            #calculate the opticalflow
            if prev_saturation_thresh_img==None:
                prev_saturation_thresh_img=saturation_img
            if i >=0:
            prev_img=prev_saturation_thresh_img
                next_img=saturation_thresh_img
                p1,  st, err = cv2.calcOpticalFlowPyrLK(prev_img,next_img,tracks_np,**lk_params)
                prev_saturation_thresh_img=saturation_img   
            i=i+1
            print i
            #display frames to users
            cv.ShowImage("Raw Video",img)
            cv.ShowImage("Saturation Channel",saturation_img)
            cv.ShowImage("Saturation Thresholded",saturation_thresh_img)

            # Listen for ESC or ENTER key
            c = cv.WaitKey(7) % 0x100
            if c == 27 or c == 10:
                break
        #close all windows once video is done
        cv.DestroyAllWindows()

if __name__=="__main__":
    t = Target()
    t.run() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T10:24:03.187

OpenCV 可能对它接受的数据格式非常挑剔。以下代码摘录对我有用：

```
prev = cv.LoadImage('images/'+file_list[0])
prev = np.asarray(prev[:,:])
prev_gs = cv2.cvtColor(prev, cv2.COLOR_BGR2GRAY)

current = cv.LoadImage('images/'+file)
current = np.asarray(current[:,:])
current_gs = cv2.cvtColor(current, cv2.COLOR_BGR2GRAY)

features, status, track_error = cv2.calcOpticalFlowPyrLK(prev_gs, current_gs, good_features, None,    
**lk_params) 
```

请注意 [:,:] 从图像转换为 numpy 数组时，我发现它们是必需的。

我希望这可以解决您的问题。

# django - django URL 注销

> ID：11642179
> 
> 赞同：2
> 
> 时间：2012-07-25T03:15:11.437
> 
> 标签：django, url

单击注销后，页面将指向 /logout/addwine/index.html 而不是 /addwine/index.html。

有没有办法解决这个问题？

```
urlpatterns += patterns('',
   url(r'^login/$', login, kwargs={'template_name':'addwine/login.html'}, name= 'addwine_login'),
   url(r'^logout/$', logout, kwargs={'next_page':'addwine/index.html'}, name= 'addwine_logout'),
) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:29:53.730

您使用的是“相对路径”，只需在 url 前放一个“/”，表示您想要一个绝对路径，如下所示：

```
kwargs={'next_page':'/addwine/index.html'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:13:35.590

我有类似的问题。我所做的是，您在模板中呈现注销网址：

```
<a href="{% url addwine_logout %}?next=/addwine/index.html">Logout</a> 
```

将下一个参数添加到其中。您可以通过从视图传递或通过 javascript 添加下一个参数，无论您喜欢哪种方式。

# sql - 左加入最大/顶部

> ID：11642184
> 
> 赞同：2
> 
> 时间：2012-07-25T03:15:52.213
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有两个表，我试图从中运行查询以返回每个人的最大（或最高）事务。我应该注意，我无法更改表结构。相反，我只能提取数据。

**人们**

```
+-----------+
| 编号 | 姓名 |
+-----------+
| 42 | 鲍勃 |
| 65 | 特德 |
| 99 | 斯图 |
+-----------+

```

**交易（没有主键）**

```
+----------------------------------+
| 人 | 金额 | 日期 |
+----------------------------------+
| 42 | 3 | 2030 年 9 月 14 日 |
| 42 | 4 | 2015 年 7 月 2 日 |
| 42 | *空* | 2020 年 2 月 4 日 |
| 65 | 7 | 2010 年 1 月 3 日 |
| 65 | 7 | 2020 年 5 月 20 日 |  
+----------------------------------+

```

最终，对于每个人，我想返回最高金额。如果这不起作用，那么我想查看日期并返回最近的日期。

所以，我希望我的查询返回：

```
+--------------------------------------------------------+
| 人名 | 姓名 | 金额 | 日期 |
+--------------------------------------------------------+
| 42 | 鲍勃 | 4 | 2015 年 7 月 2 日 | （<- 最高金额）
| 65 | 特德 | 7 | 2020 年 5 月 20 日 | （<- 最近的日期）
| 99 | 斯图 | *空* | *空* | （<- 事务表中没有记录）
+--------------------------------------------------------+

```

* * *

```
SELECT People.id, name, amount, date
FROM People
LEFT JOIN (
    SELECT TOP 1 person_id
    FROM Transactions
    WHERE person_id = People.id
    ORDER BY amount DESC, date ASC
)
ON People.id = person_id 
```

我不知道我做错了什么，但我知道这是错的。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T03:42:37.147

您快到了，但由于 Transaction 表中有重复的 Id，因此您需要使用 Row_number() 函数删除它们试试这个：

```
With cte as 
 (Select People,amount,date ,row_number() over (partition by People 
                                  order by amount desc, date desc) as row_num
  from Transac )
 Select * from People as a 
 left join cte as b
 on a.ID=b.People
 and b.row_num=1 
```

结果在[Sql Fiddle](http://sqlfiddle.com/#!3/bf66c/1)

编辑：来自 MSDN 的 Row_number()

```
Returns the sequential number of a row within a partition of a result set, 
starting at 1 for the first row in each partition. 
```

Partition 用于对结果集进行分组，并使用 Over by 子句

```
Determine the partitioning and ordering of the rowset before the
associated window function is applied. 
```

# php - 如果我想用 xpath 检查表格行

> ID：11642189
> 
> 赞同：2
> 
> 时间：2012-07-25T03:16:23.723
> 
> 标签：php, search, xpath

作为 cURL 操作的一部分，我需要进行一些解析。我想要的数据位于`../table/tr/td`，据说`td`是多个包含许多字符串的单元格，其中一个是`<b>34 PT</b>`，但是数字是随机的，我无法弄清楚如何简单地执行“通配符”或类似的操作。

我发现的建议：

```
/tr[contains(@td, 'PT')]" ); 
```

不返回任何结果，也不：

```
/tr/td[contains( @b, 'PT' ) ] 
```

我在最后删除了任何类型的搜索，它按预期返回所有单元格，所以我知道数据在那里。包含 PT 的表格单元格有一个`<a href>`我需要知道的。

这是整个 html 的示例：

```
<table>
<tr>
<td>
<tr>
<td width="120" valign="top" align="center">
<a href="submit.phtml?PT_id=86343434&xcn=b22c57866bfc2bac89b09527b05b7760&location_id=0">
<img height="80" width="80" border="1" alt="" src=".gif">
</a>
<b>3423 PT</b>
<td>
<td>
<tr>
<td> ...and so on 
```

xpath 查询是这样使用的：

```
@$dom = new DOMDocument();
    @$dom->loadHTML( $rawPage );
    @$xpath = new DOMXPath( $dom );
    @$queryResult = $xpath->query( " //html/body/div[3]/div[3]/table/tr/td[2]/table[2]/tr/td/div/div/table/tr[2]/td/table/tr/td[contains( b, 'PT' ) ]" ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:57:24.640

删除您的`@`符号，以便它检查元素值而不是其属性

IE`/tr/td[contains( b, 'PT' ) ]`

# tcl - 如何为自定义的 tcl 解释器制作类似二进制文件的 starpack？

> ID：11642190
> 
> 赞同：2
> 
> 时间：2012-07-25T03:16:38.603
> 
> 标签：tcl, starkit

我正在尝试制作一个类似于单个二进制文件的 starpack，其中包含一堆 tcl 脚本。我查看了来自 ActiveTcl 的[TclApp 文档](http://docs.activestate.com/tdk/5.3/TclApp.html)，看来您必须使用他们的[basekit](http://wiki.tcl.tk/15985)（例如 /usr/local/ActiveTcl/bin/base-tk8.5-thread-linux-ix86）。但是，我已将解释器构建到我自己的二进制文件中。如何使我的二进制文件成为 basekit？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:28:41.453

我首先要问是否真的有必要拥有自己的 Tcl 版本。如果您可以构造您的代码，以便您的自定义部分是可加载的扩展（与存根库正确链接），那么您可以将它与标准套件分发一起使用。

但是，如果您的代码确实需要构建为主可执行文件，那么您*可以*做您想做的事情。您可能想从[Kitgen](http://wiki.tcl.tk/18146)开始，它既维护又合理开放。您必须做一些工作才能正确组装；特别是，确保您的代码是使用静态链接构建的，针对它需要的任何外部库（C 库和其他可以合理假设存在于目标平台上的东西除外）作为套件的运行时链接环境基于 Tcl 的分布显然很奇怪。构建为存根扩展（您可以将其存储在套件包中）要正确*得多*。

# sql - 转义字符串时出现 SQLite3 错误

> ID：11642193
> 
> 赞同：0
> 
> 时间：2012-07-25T03:17:12.623
> 
> 标签：sql, macos, sqlite

我正在创建一个下载 XML 并将其值插入 SQLite3 数据库的应用程序。每当有 时它都会出错`'`，所以我创建了这个函数来转义字符串：

```
+(NSString *)escapeString:(NSString *)string {
  NSRange range = NSMakeRange(0, [string length]); 
  NSMutableString *str =
    [NSMutableString stringWithString:string];  
  [str replaceOccurrencesOfString:@"'" withString:@"\\\'" options:0 range:range];
  return str; 
} 
```

问题是数据库现在出现了错误`unrecognized token: "\"`。我究竟做错了什么？顺便说一句，我仍在使用 Tiger，这可能与拥有旧版本的 SQLite 有关吗？如果是，我该如何解决？请注意，我正在创建的应用程序也必须在 Tiger 上运行，最好在 Panther 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:00:28.303

SQL 不会使用斜杠字符进行转义。它使用单引号`'`在字符串中转义。

```
INSERT INTO xyz VALUES('5 O''clock'); 
```

[参考](http://www.sqlite.org/faq.html#q14)

所以我假设（我不知道你使用的是什么语言）这一行：

```
[str replaceOccurrencesOfString:@"'" withString:@"\\\'" options:0 range:range]; 
```

实际上应该是：

```
[str replaceOccurrencesOfString:@"'" withString:@"''" options:0 range:range]; 
```

您自己擦洗内容是违反最佳实践的。最好使用 sqlite 的绑定工具。

而不是自己进行字符串操作：

```
sql = "INSERT INTO xyz VALUES('"+ my_value +"');" 
```

你会使用这样的东西：

```
sql = "INSERT INTO xyz VALUES(?1);" 
```

然后使用绑定调用来分配`?1`.

# jquery - Jquery Accordion - 再次点击折叠

> ID：11642195
> 
> 赞同：0
> 
> 时间：2012-07-25T03:17:45.283
> 
> 标签：jquery, accordion

所以，我有以下代码：

```
$(".btn-slide-1").click(function(){
    $('div[id^="panel"]').slideUp("slow");
    $('ul#menu li a').removeClass("active");
    $("#panel-about").slideToggle("slow");
    $(this).toggleClass("active"); return false;
});

$(".btn-slide-2").click(function(){
    $('div[id^="panel"]').slideUp("slow");
    $('ul#menu li a').removeClass("active");
    $("#panel-products").slideToggle("slow");
    $(this).toggleClass("active"); return false;
});

$(".btn-slide-3").click(function(){
    $('div[id^="panel"]').slideUp("slow");
    $('ul#menu li a').removeClass("active");
    $("#panel-specs").slideToggle("slow");
    $(this).toggleClass("active"); return false;
}); 
```

本质上，我希望简化它，但它所做的只是当您单击一个类时，它会打开与此相关的 div。一切正常，但是如果我再次单击同一个项目，它就会崩溃，然后立即再次重新打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:25:10.580

您可以在条件检查中对其进行变形。

```
$(".btn-slide-1").click(function(){
    if (!$(this).hasClass("active")) {
        $('div[id^="panel"]').slideUp("slow");
        $('ul#menu li a').removeClass("active");
        $("#panel-about").slideToggle("slow");
        $(this).toggleClass("active"); return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:41:42.633

我认为你的 jquery 代码应该是这样的

```
i$(".btn-slide-1").click(function(){
    var currentActive = $(this).hasClass("active");
    $('div[id^="panel"]').slideUp("slow");
    $('ul#menu li a').removeClass("active");

    if(!currentActive){
       $("#panel-about").slideToggle("slow");
       $(this).toggleClass("active"); 
    }
    return false;
}); 
```

发生的情况是您向上滑动所有面板并删除“a”标签上的“活动”类，因此当这些行执行时，

```
$("#panel-about").slideToggle("slow");
$(this).toggleClass("active"); 
```

面板目前正在折叠，所以 slideToggle 将再次展开它

# sql - 基于视图创建表——最快的方法，使用多线程

> ID：11642196
> 
> 赞同：3
> 
> 时间：2012-07-25T03:17:51.867
> 
> 标签：sql, postgresql

我的观点可以收集大约 100 万条记录；创建临时表大约需要 15 分钟。尽管如此，我的 CPU 内核中只有 1 个显示负载，其他 7 个内核可用。我怎样才能在这个过程中使用所有核心？

```
create table feed_03_tmp as SELECT *  FROM feed_03; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:58:06.360

PostgreSQL 后端是单线程的，每个客户端有一个后端，因此单个客户端只能使用单个内核。但是对于这样一个简单的查询，我很确定你是 IO 绑定的。如果您受 IO 限制，则执行工作的一个核心将低于 100% 负载，如果它始终处于 100%，则您受 CPU 限制。

您可以通过打开多个连接来使用一个以上的核心，并让每个连接复制一组行，但正如我所说，它可能无济于事。请注意，每个连接都将在它自己的事务中。

为了提高 IO，您可能会受益于将临时表存储在单独的驱动器上。为此，请在第二个驱动器上创建一个表空间，并将 TABLESPACE 子句添加到您的 create table 语句中。

```
CREATE TABLE feed_03_tmp 
  TABLESPACE my_temp_tablespace
  AS SELECT *  FROM feed_03; 
```

顺便说一句：postgresql 开发人员正在尝试引入多线程，但它可能需要一段时间才能被广泛使用并发布。

# node.js - nodejs强大的改变uploadDir

> ID：11642201
> 
> 赞同：3
> 
> 时间：2012-07-25T03:20:07.013
> 
> 标签：node.js, express, formidable

我有一个我试图完成的项目我想上传图片我可以上传图片但不能在应该上传的目录中

好的，让代码：

```
 app.post('/register',function(req,res) 
    {
var form = new formidable.IncomingForm();
form.keepExtensions = true;
form.uploadDir ='./uploaded/';
form
    .on('error', function(err) {
        throw err;
    })

    .on('field', function(field, value) {
        //receive form fields here
    })

    /* this is where the renaming happens */
    .on ('fileBegin', function(name, file){
            //rename the incoming file to the file's name
            file.path = form.uploadDir + "/" + file.name;
    })

    .on('file', function(field, file) {
        //On file received
    })

    .on('progress', function(bytesReceived, bytesExpected) {
        //self.emit('progess', bytesReceived, bytesExpected)

        var percent = (bytesReceived / bytesExpected * 100) | 0;
        process.stdout.write('Uploading: %' + percent + '\r');
    })

    .on('end', function() {

    });

form.parse(req); 
```

问题是当我发布图像时......图像仍然保存在 process.env.TMP 我的 proyect 有这个 dir arq

```
proyect:
    node_modules
    uploaded
    public
    routes
    views
    app.js
    package.json 
```

编辑 2：问题是 BODYPARSER

好的，从最后一个代码...问题是 app.js 当我配置应用程序时，它有一个 bodyParser ，因此 bodyParser 方法使用来自快递的强大功能

最后一个代码是正确且功能性的，如果有人想使用该代码......只需评论 express.configure 中的行

```
app.use(express.bodyParser()); 
```

关闭 express bodyparser 但 express 使用也很强大，所以是同一件事......

还有一个问题

我像这样配置 express.bodyParser

```
 app.use(express.bodyParser(
    {
      uploadDir: './uploads',
      keepExtensions: true
    })); 
```

我像这样更改第一个代码

```
app.post('/register',function(req,res) 
{
  var oldDir=req.files.img.path;
  var newDir='./uploads/'+req.body.email+'/perfil/';

if(req.files)
{
  mkdirp(newDir,0777,function(err){
    if(err) throw err;
  })
}
if(req.files)
{
  fs.rename(oldDir,newDir+req.files.img.name,function(err){
    if(err) throw err;
  });

}
res.send('pow!'); 
```

它是功能性的，当此代码收到文件时，将文件放在上传文件夹中，然后使用电子邮件名称创建文件夹，最后将文件移动到电子邮件文件夹中，并将其重命名为带有扩展名的原始文件

这是完美的”！

不，没有完美……我想用这个方法

```
.on ('fileBegin', function(name, file){
            //rename the incoming file to the file's name
            file.path = form.uploadDir + "/" + file.name;
    })
    .on('progress', function(bytesReceived, bytesExpected) {
        //self.emit('progess', bytesReceived, bytesExpected)

        var percent = (bytesReceived / bytesExpected * 100) | 0;
        process.stdout.write('Uploading: %' + percent + '\r');
    }) 
```

因为从第一个代码我可以配置在第二个代码中从头开始放置文件的位置我在服务器收到文件后移动文件

我认为该方法是快递，因为快递使用像中间件一样强大

我该如何配置方法？

方法在哪里……？'？

我如何从第二个代码中知道 req.files 中包含的方法？（因为 req.files 使用 bodyParser() 与 form.file 在第一个代码中使用 formidable 相同）

全部

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T03:49:28.613

IncomingForm 构造函数接受一个选项对象。您可能还需要在路径中使用 __dirname 全局变量。

`var form = new formidable.IncomingForm({ uploadDir: __dirname + '/uploaded' });`

[您可以在强大的源代码](https://github.com/felixge/node-formidable/blob/master/lib/incoming_form.js)中看到该选项是如何应用的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-04T05:22:54.597

您可以在触发“end”时保留重命名代码，以便在文件完全上传后重命名。

# c++ - MySQL QUOTE() 与 mysql_real_escape_string()？

> ID：11642203
> 
> 赞同：5
> 
> 时间：2012-07-25T03:20:23.867
> 
> 标签：c++, mysql, c

`QUOTE()`在 MySQL 中，和之间有什么区别`mysql_real_escape_string()`？从 MySQL 文档中，我知道以下内容：

**引用（）**

*   写入SQL查询
*   转义反斜杠、单引号、NUL、CTRL+Z
*   返回一个单引号字符串
*   行为依赖于 MySQL 服务器的字符集

**mysql_real_escape_string()**

*   在执行查询之前用 C/C++ 编写，允许在提交之前读取/修改转义的字符串
*   相比起来使用起来非常不方便`QUOTE()`
*   转义反斜杠、单引号、NUL、CTRL+Z 和**双引号、\n 和 \r**
*   显然添加了更多引号以使字符在日志文件中易于阅读
*   行为依赖于 MySQL 服务器的字符集

忽略日志，转义`\n`和`\r`字符有用吗？有了这两个功能，客户端/服务器功能效率有区别吗？`mysql_real_escape_string()`如果开发人员希望在将转义字符串输入查询之前对其进行处理，这听起来很有用。但是，不`QUOTE()`提供最安全可靠的字符串转义方法吗？

我想知道我是否应该使用`QUOTE()`所有语言的所有查询并忘记使用特定于语言的函数转义字符串。

* * *

*   [引用（）](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_quote)
*   [mysql_real_escape_string()](http://dev.mysql.com/doc/refman/5.0/en/mysql-real-escape-string.html)
*   [字符串文字](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:38:02.647

这似乎`QUOTE()`是为了在构造其他 SQL 语句的 SQL 语句中使用。如果您不在 SQL 范围内，则应使用`mysql_real_escape_string()`.

> [...] 在 C 程序中，您可以使用`mysql_real_escape_string()`C API 函数来转义字符。[...] 在构造其他 SQL 语句的 SQL 语句中，您可以使用该`QUOTE()`函数。

[正如String Literals (MySQL Manual)](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)底部所解释的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:24:27.447

`QUOTE()`已经在查询中，所以它就像你没有放任何东西一样容易突破。`mysql_real_escape_string`对于使任意字符串可以安全地插入查询至关重要。

使用某种别名可以很容易地解决函数名称笨拙的问题。我不是 C/C++ 用户，但它没有宏，你可以用它来写你想要的任何东西，它会被长函数名替换吗？

# php - 有没有办法拥有多维配置数组？

> ID：11642204
> 
> 赞同：1
> 
> 时间：2012-07-25T03:20:24.913
> 
> 标签：php, arrays, codeigniter, config

我想在 Codeigniter 的应用程序部分创建自己的自定义配置数据，但想知道我们是否可以构建二维配置数组。

示例`application/config/myconfig.php`：

```
$myconfigarray = array('row1'=> array( 'col1'=>'col1val',
                                       'col2'=>'col2val',
                                       'col3'=>'col3val' ),
                       'row2'=> array( 'col1'=>'col1val',
                                       'col2'=>'col2val',
                                       'col3'=>'col3val' )); 
```

目前至少默认情况下，Codeigniter 似乎只支持一维配置数组。如何使用多维数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:34:17.370

您可以拥有任何大小形状或形式的配置数组。让它们工作完全取决于你想用它们做什么，你如何加载它们，以及你如何阅读它们。

我认为您的问题是您需要重命名`$myconfigarray`为`$config`：

> [http://codeigniter.com/user_guide/libraries/config.html](http://codeigniter.com/user_guide/libraries/config.html)
> 
> **注意**：如果您确实创建了自己的配置文件，则使用与主文件相同的格式，将您的项目存储在一个名为的数组中`$config`

因此，对于您的示例，假设文件名为`myconfig.php`：

```
$this->load->config('myconfig');
foreach (config_item('row1') as $k => $v)
{
    echo $k.' = '.$v;
} 
```

这将打印：

```
col1 = col1val
col2 = col2val
col3 = col3val 
```

如果您需要访问某个索引，则必须执行以下操作：

```
$item = config_item('row1');
echo $item['col1']; // col1val 
```

如果你碰巧运行的是 PHP 5.4，你可以像这样访问它：

```
echo config_item('row1')['col1']; 
```

# php - Zend 框架添加 AWS S3 功能？

> ID：11642206
> 
> 赞同：0
> 
> 时间：2012-07-25T03:20:37.243
> 
> 标签：php, zend-framework, amazon-web-services

我想知道如何使用 AWS S3 存储桶作为占位符来放置应用程序相关的图片，以便 zend 应用程序可以从 S3 获取图片？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:27:59.093

最简单的方法是在 applciation.ini 文件中定义一个配置。但首先，您需要注册 AWS 并获取 SECRETKEY 和 ACCESSKEYID。将密钥放在 application.ini 文件中，如下所示

```
AWSAccessKeyId= "ACCESSKEY"
AWSSecretKey= "SECRETKEY"
AWSS3BucketName = "bucketName"
AWSS3GetImageUrl = "http://Name-images.s3.amazonaws.com/target-folder/" 
```

一旦完成调用布局中的预定义。

```
 var AWSS3GetImageUrl = "<?php $config = Zend_Registry::get('config'); echo     
                                $config['AWSS3GetImageUrl']?>"; 
```

假设您想从 aws S3 获取图像

```
 $config = Zend_Registry::get('config');
          echo '<img src="'.$config['AWSS3GetImageUrl'].{image_path_layout}.'" alt="" />'; 
```

希望这对您有所帮助。谢谢

# math - 计算 n 字节对齐所需的填充

> ID：11642210
> 
> 赞同：14
> 
> 时间：2012-07-25T03:21:06.793
> 
> 标签：math

假设我有一个数据集合（例如：字符串），这些数据必须存储在一个二进制文件中，以便每个字符串都是 4 字节对齐的。

因此，如果我有一个长度为 11 的字符串，它将被填充为 12（带有空字节）。
如果我有一个长度为 24 的字符串，则不需要填充。
如果我的字符串长度为 6，它将被填充为 8 个字节。

如何计算单个表达式中所需的填充量？

我试过`4 - (string_length % 4)`了，但是当我的字符串长度是 4 的倍数时它失败了。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-25T03:23:18.410

这看起来很奇怪，但给出了正确的答案：

```
(4 - (string_length % 4)) % 4 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-18T17:32:59.783

如果对齐是 2 的幂 (2,4,8,...)，则有一种更快的方法来计算填充。以下运行是因为二进制 & 类似于 % 的 2 的幂：`%(2^x)`并且`&(2^x-1)`对正数执行相同的操作。注意： & 将删除符号位，因此总是返回正模结果。

所以`(4 - (string_length & 3)) & 3`会做同样的事情`(4 - (string_length % 4)) % 4`。使用正模属性，这可以简化为 `(-string_length) & 3`！

如果您想将该结果添加到大小，您甚至可以进行更多优化：

`padded_length = (string_length + 3) & ~3`从语义上讲，这会将数字“四舍五入”到填充大小 4。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-10-01T12:43:05.600

```
public static final int getByteAlignedIndex(final int pVariableDataIndex, final int pVariableDataLength, final int pByteAlignment) {
    return pVariableDataIndex + (pVariableDataLength & 0xFFFFFFFC) + ((((pVariableDataLength & 0b1)|((pVariableDataLength & 0b10) >> 1))) << 2);
} 
```

# c++ - ... 是什么意思内部函数参数 (const char *value, ...)

> ID：11642213
> 
> 赞同：0
> 
> 时间：2012-07-25T03:21:57.657
> 
> 标签：c++

> **可能重复：**
> [关于函数定义的问题（参数中的三个点..）](https://stackoverflow.com/questions/599744/question-about-a-function-definition-three-dots-in-parameters)

我是c ++的新手，方法或函数中的...（三点）是什么意思

样本

```
void strArr::set(const char *value, ...) {
     // some code here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:23:56.757

这是一种表达可变数量参数的方法，以前称为 va_args 或[可变参数](http://en.wikipedia.org/wiki/Variadic_function)函数。

看看[这里](http://www.cplusplus.com/reference/clibrary/cstdarg/va_arg/)以在 C++ 中了解它们，尽管它们确实存在于其他编程语言中，因为它只是一个通用概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:23:45.713

这是一个可变参数函数，它可以采用任意数量的参数（在这种情况下超过 1 个）。

与其他原则相同`printf`：

```
printf("%d", 1);
printf("%d%d%d", 1,1,1);
printf("%d%d%d%d%d%d", 1,1,1,1,1,1); 
```

这些不是重载，而是采用可变数量参数的同一个函数。

# php - 您如何获取 facebook 用户的信息并将其插入数据库？

> ID：11642214
> 
> 赞同：8
> 
> 时间：2012-07-25T03:22:01.027
> 
> 标签：php, facebook, authentication

我不知道如何问它，但我正在尝试自学如何创建一个使用图形 api 的程序。我看到的大多数教程都比较老，我不知道它们现在的相关性如何。从本质上讲，我试图获得某人点击我的应用程序的“东西”，它说，这个应用程序需要你的用户名等，然后允许或不允许。

我希望它获取信息，然后我可以将其插入数据库。我正在使用 php 并且有一个域。

我可以插入数据没有问题，如果我能得到数据。我不明白该怎么做。

对于一个模糊的问题，我很抱歉，我已经搜索过了。不要求您为我编写代码，只是为我指明正确的方向，也许是按照我的要求进行的现代教程。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T04:11:12.757

**1)**从这里创建一个 Facebook 应用程序：

[http://developers.facebook.com/apps](http://developers.facebook.com/apps)

并使用您的域进行配置。

这一步非常简单，将您想要的任何命名空间作为您的应用程序名称，然后检查您的应用程序是否将用作“应用程序和登录页面”（不是粉丝页面或相关内容），最后指定您所在的 URL将使用 Facebook API（将 Canvas URL 留空）。

提醒一下，我相信 Facebook API 需要 HTTPS URL，但我不知道为什么仍然允许 HTTP，所以现在不用担心。

**登录配置：**

设置网址：http: [//yourdomain.com/](http://yourdomain.com/)

**应用配置：**

[http://yourdomain.com/myfacebookapp/](http://yourdomain.com/myfacebookapp/)

因此，当用户访问时：

[http://apps.facebook.com/yourappName](http://apps.facebook.com/yourappName)

意味着用户确实在浏览第一个链接，并且在该页面（假设`index.php`）中，您需要从下方执行所有操作。

仅供参考，此时您还可以为您的应用程序设置徽标，管理管理员并获取您稍后将在 PHP 文件中使用的应用程序 ID 和密码。

*（如果你对这一步感到困惑，你可以谷歌搜索，这个配置很容易找到）*

**2）**我总是使用这些文件将我的 PHP 环境与 Facebook API 链接，这是我的 Dropbox 中的链接：[https ://www.dropbox.com/s/itw4pav1f7a9vez/files.rar](https://www.dropbox.com/s/itw4pav1f7a9vez/files.rar)

**3)**将这些文件放在一个名为`fb`.

**4）**我将向您展示从用户那里获取数据和图片的方法，但首先用户必须允许您的应用程序在登录您的应用程序时获取此信息。

因此，对于本示例，我将使用一个简单的按钮进行登录：

*（不要忘记替换您的应用程序 ID 和密码，注意 'xxx' 和 'yyy'）*

```
<?php

require 'fb/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxx',
  'secret' => 'yyy',
));

// Check if user is already logged
$user = $facebook->getUser();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// Get login or logout URL
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
}

?>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title>Facebook PHP SDK</title>
  </head>
  <body>
    <h1>Facebook PHP SDK</h1>

    <?php if ($user): ?>
      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
      <div>
        <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
      </div>
    <?php endif ?>

    <h3>PHP Session</h3>
    <pre><?php print_r($_SESSION); ?></pre>

    <?php if ($user): ?>
      <h3>Your picture</h3>
      <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

      <h3>Your info (/me)</h3>
      <pre><?php print_r($user_profile); ?></pre>
    <?php else: ?>
      <strong><em>You are not connected.</em></strong>
    <?php endif ?>
</html> 
```

**5)**上面的例子使用了没有 JavaScript 的 Facebook PHP SDK。因此，如果用户想要登录并授权您的应用程序以获取信息，那么整个页面将被重定向到您的应用程序的 Facebook 权限页面，然后它将返回您的 Facebook 应用程序的主页（在配置中指定）你的申请）。

**6）**下面的代码将与上面的代码相同，但使用 JavaScript 和自定义 Facebook 登录按钮，允许您按照您在问题中所写的方式设置特殊权限。另一个区别是会出现一个弹出窗口而不是重定向整个页面。

*（不要忘记替换您的应用程序 ID 和密码，注意 'xxx' 和 'yyy'）*

```
<?php

require 'fb/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxx',
  'secret' => 'yyy',
));

// Check if user is already logged
$user = $facebook->getUser();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
    $logoutUrl = $facebook->getLogoutUrl();
  } catch (FacebookApiException $e) {
    $user = null;
  }
} else {
    $loginUrl = $facebook->getLoginUrl();
}

?>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Facebook PHP SDK</title>
    </head>
    <body>
        <fb:login-button size="small" onlogin="after_login_button()" scope="email, user_about_me, user_birthday, user_status, publish_stream, user_photos, read_stream, friends_likes">Login with facebook</fb:login-button>
        <div id="fb-root"></div>
        <script>
            window.fbAsyncInit = function() {
            FB.init({
              appId: '<?php echo $facebook->getAppID() ?>',
              cookie: true,
              xfbml: true,
              oauth: true
            });

            // This is used by Facebook login button
            FB.Event.subscribe('auth.login', function(response) {
              if (response.authResponse) {
                 // Specify the login page where Facebook login button is located
                 window.location = 'main.php';
              }
            });
            FB.Event.subscribe('auth.logout', function(response) {
                window.location = 'logout.php';
            });
          };
          (function() {
            var e = document.createElement('script'); 

            e.async = true;
            e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';

            document.getElementById('fb-root').appendChild(e);
          }());

          function after_login_button(){
            FB.getLoginStatus(function(response) {
                if (response.status == 'connected') {
                    // If user is connected, redirect to below page
                    window.location = 'main.php';
                }
            }, true);
          }
        </script>
    </body>
</html> 
```

**7)**如您所见，Facebook 登录按钮中的范围属性决定了您的应用程序需要来自用户（例如电子邮件）的哪些特殊权限和信息（除非获得授权，否则始终是私有的）。

* * *

**8）**要添加一些东西，您可以使用以下方法仅从某人那里获取公共信息：

```
// For example: Your Facebook friend's profile is http://www.facebook.com/foobar
$myFriend = $facebook->api('/foobar');
// For example: Your Facebook friend's profile is http://www.facebook.com/users/1002020300010
$myFriend = $facebook->api('/1002020300010');
// Print the name
echo $myFriend['name'];
// Print all data
print_r($myFriend); 
```

而且，为了获取您 Facebook 朋友的照片，只需执行以下操作：

```
<img src="https://graph.facebook.com/foobar/picture"> 
```

或者：

```
<img src="https://graph.facebook.com/1002020300010/picture"> 
```

* * *

**最后，假设您拥有所需的所有用户信息，那么现在您可以将其全部保存到数据库中，而不会出现问题或限制。**

希望这有助于作为参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:46:08.420

您似乎正在寻求使用 Facebook 创建身份验证（登录）。

您可能希望查看[Opauth](http://opauth.org)，它会为您处理所有这些并以数组的形式返回您的用户信息，然后您可以轻松地将其插入数据库。

请参阅[http://opauth.org](http://opauth.org)以获得快速演示并下载包含示例代码的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:33:09.620

Considering that you are using the PHP SDK Classes provided by Facebook [here](https://developers.facebook.com/docs/reference/php/)

You can do something like this

```
$fb = new Facebook(array(
     'appId' => 'YOUR_APP_ID',
     'secret' => 'YOUR_APP_SECRET'
));

$userData = $fb->api('/me','GET');
$userData = serialize($userData);

//now userdata is a string, so, insert into the database. 
```

Remembering, in your app configurantion, you must specify the kind of information you want from user.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T03:35:07.763

You can use the php API and the query language that facebook provides (FQL). Here is a link that contains sample query's and tutorials [http://developers.facebook.com/docs/reference/fql/](http://developers.facebook.com/docs/reference/fql/)

# c# - 为事件设置计时器

> ID：11642217
> 
> 赞同：0
> 
> 时间：2012-07-25T03:23:12.170
> 
> 标签：c#, winforms

我打算在我的以下代码中放置一个计时器，以便在 5 秒后再次启用该按钮。如您所见，用户发送 5 条消息后，我的发送按钮将被禁用。我想在 5 秒后启用它。

欢迎任何建议。

```
public bool stopSpam(int counter)
    {
        int spam = counter;

        if (spam < 6)
        {
            return false;
        }
        else
        {
            return true;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        counter++;

        bool check = stopSpam(counter);
        if (check == false)
        {
            if (textBox2.Text != "")
            {
                if (textBox2.Text.ToLower().StartsWith("/"))
                {
                    onCommand(textBox2.Text);
                    string datetimestring = string.Format("{0:yyyy-MM-dd_hh-mm-ss-tt}.txt", DateTime.Now);
                    String exePath = string.Format(Application.StartupPath + "\\logs\\" + "msglogs {0}", datetimestring);
                    StreamWriter writer = File.CreateText(exePath);
                    writer.Write(textBox1.Text);
                    writer.Close();
                    textBox2.Text = "";
                }
                else
                {
                    m_ChildConnection.SendMessage("MSG :" + textBox2.Text);
                    string datetimestring = string.Format("{0:yyyy-MM-dd_hh-mm-ss-tt}.txt", DateTime.Now);
                    String exePath = string.Format(Application.StartupPath + "\\logs\\" + "msglogs {0}", datetimestring);
                    StreamWriter writer = File.CreateText(exePath);
                    writer.Write(textBox1.Text);
                    writer.Close();
                    textBox2.Text = "";
                }
            }
        }
        else
        {
            button1.Enabled = false;
        } 
```

提前感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:39:25.380

有一个计时器，将其间隔设置为 5 秒（5000）。默认情况下保持禁用。

按下按钮时启用计时器

```
private void button1_Click(object sender, EventArgs e)
{
    button1.Enabled = false;
    timer.Enabled = true;
} 
```

当 5 秒后出现滴答声时，启用按钮并再次禁用计时器。

```
private void timer_Tick(object sender, EventArgs e)
{
    button1.Enabled = true;
    timer.Enabled = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T04:02:44.303

很难弄清楚您要达到的目标，但您可以采取以下步骤在 5 秒后禁用启用按钮。

添加：

```
private Timer t; 
```

作为类变量。

然后在 InitializeComponent 之后添加：

```
t = new Timer(5000){Enabled = false, Tick += (myTick)}; 
```

然后添加这个方法：

```
private void myTick(object source, ElapsedEventArgs e)
{
    button1.Enabled = true;
} 
```

另外，请考虑更新此方法：

您的 stopSpam 方法：

```
public bool stopSpam(int counter)
{
   return counter >= 6;
} 
```

其实这个方法其实是不需要的：

简单地改变

```
if(check == false) 
```

至

```
if(counter > 5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:46:27.330

您可以简单地使用[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)类来放置计时器。

```
//Define the timer 
private System.Timers.Timer buttonTimer;

// Initialize the timer with a five second interval.
buttonTimer= new System.Timers.Timer(5000);

// Hook up the Elapsed event for the timer.
buttonTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

//Start the timer
buttonTimer.Start();

// Enable the button in timer elapsed event handler
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    button1.Enabled = true;
} 
```

# actionscript-3 - AS3/Flash：将复杂对象展平以获得透明度

> ID：11642221
> 
> 赞同：1
> 
> 时间：2012-07-25T03:23:27.313
> 
> 标签：actionscript-3, flash

我有一个复杂的movieclip对象（一个由其他movieclip组成的movieclip），我想淡入淡出，但我不希望重叠的对象在这个淡入淡出过程中变得可见，我想把整个事情当作淡入淡出期间的位图。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:41:23.370

将混合模式设置为“图层”：

![混合模式](../Images/623673c4b5a8dd2536dd0536be5dfa3f.png)

具有正常混合模式的图层：

![普通混合模式](../Images/071da8d834065494ca7fde0479d1e132.png)

具有图层混合模式的图层：

![图层混合模式](../Images/75e7444d5f06de54e8fe08804636780a.png)

参考：

*   [Flash Professional / 应用混合模式](http://help.adobe.com/en_US/flash/cs/using/WSd60f23110762d6b883b18f10cb1fe1af6-7d5ca.html)
*   [Adobe Flash 平台的 ActionScript 3.0 参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BlendMode.html)

# latex - 无法从 Javadoc 生成 LaTeX

> ID：11642223
> 
> 赞同：-1
> 
> 时间：2012-07-25T03:23:31.483
> 
> 标签：latex, javadoc

我一直收到这种错误

> javadoc: 错误 - 找不到 doclet 类 'org.stfm.textdoclet.TeXDoclet'

[我从http://doclet.github.com/](http://doclet.github.com/)下载了 TexDoclet.jar并按照说明进行操作

```
javadoc -doclet 'org.stfm.txtdoclet.TeXDoclet' -docletPath 'C:\Users\Kaede\Desktop\TeXDoclet.jar' 
```

但它不断抛出未找到的错误类。我检查了 jar 并且 TeXDoclet.class 在`org.stfm.textdoclet`.

导致此错误的问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:39:35.773

这是我尝试过`javadoc -docletpath TeXDoclet.jar -doclet org.stfm.texdoclet.TeXDoclet -sourcepath src -subpackages com:data:structures -noindex -tree -hyperref -output out.tex -title "My Title" -author "My Name"`的，它对我有用:)

# php - CSS边框在跨度上崩溃？

> ID：11642226
> 
> 赞同：0
> 
> 时间：2012-07-25T03:23:44.997
> 
> 标签：php, css, border

我正在对字符串进行搜索和替换。

如果我的示例字符串是

> 我的名字是马修·斯科特·海尔伍德

然后当函数运行时搜索`o`输出变为（为了便于阅读，拆分为多行）

```
My name is 
Matthew 
Sc<span class="highlight">o</span>tt 
Hailw<span class="highlight">o</span><span class="highlight">o</span>d 
```

那部分工作得很好。

我的css课然后有

```
.highlight{
    font-weight: bold;
    background-color: yellow;
    border: 1px dotted #a9a9a9;
} 
```

这也很完美。

但在双字母的情况下，例如`oo`姓氏中的中间边框厚两倍。

我要做的是：如果有两个边框，则将中间边框全部删除，或者更有可能的是使两个边框合并为一个边框。

我的php函数是

```
function highlight($haystack, $needle, 
                   $wrap_before = '<span class="text_highlight">', 
                   $wrap_after = "</span>"){
    if($needle == '')
        return $haystack;
    $needle = preg_quote($needle);
    return preg_replace("/({$needle})/i", $wrap_before."$1".$wrap_after, $haystack);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T03:35:24.497

如果您使用正则表达式，正则`/({$needle}+)/i`表达式将匹配 o 组和单个 o 组。因此，您修改后的代码如下所示：

```
function highlight($haystack, $needle, 
                   $wrap_before = '<span class="text_highlight">', 
                   $wrap_after = "</span>"){
    if($needle == '')
        return $haystack;
    $needle = preg_quote($needle);
    return preg_replace("/({$needle}+)/i", $wrap_before."$1".$wrap_after, $haystack);
} 
```

匹配一个或多个前`+`一个字符（或一组字符）。

# javascript - Javascript 对象/闭包

> ID：11642237
> 
> 赞同：2
> 
> 时间：2012-07-25T03:25:26.820
> 
> 标签：javascript, closures

那里的 JS 专家可以解释为什么会这样：

```
$$={}
(function(x){
    x.newModule = {
            func: function(){...}
    };
})($$);
$$.newModule.func() 
```

优于这个？

```
$$.newModule = {
    func: function() {...}
}
$$.newModule.func() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T03:29:16.880

extra 函数为您提供了您可能想要使用的额外本地范围（尽管它不在您的简短示例中）。

```
(function(x){
    var privateFunction = function() {};
    var privateCounter = 1;
    x.newModule = {
            func: function(){...}
    };
})($$); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:31:26.487

In the first pattern you can have private methods and variables which are not possible in the second pattern. That is the reason the first pattern is superior.

# c# - ASP.NET MVC 覆盖 POST 解析字段

> ID：11642240
> 
> 赞同：4
> 
> 时间：2012-07-25T03:25:40.140
> 
> 标签：c#, asp.net-mvc, multipartform-data

我编写了一个 MVC 操作来接收来自服务的帖子。我的问题是该服务正在发布编码错误的多部分数据。

让我举个例子：

*   该服务将为表单字段“文本”发布“á”。
*   我看到（使用 Wireshark），写在数据包上的字节是 225，这是 ISO-8859-1 中“á”的正确字节。
*   我`Request.Form["text"]`确实得到了一个奇怪的（不同的）字符。

我相信这是由于 .NET 在使用 utf-8 编码转换为字符串时尝试将值 225 转换为 unicode 字符，但不能，因为 225 对 utf-8 无效。

所以我的问题是：*有没有办法将这些字节的解析覆盖为字符串？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:35:02.300

您可以尝试添加一个 HttpModule 并尝试覆盖 Request 对象的 ContentEncoding 属性。虽然我不确定这会奏效。

可以在 Web.Config 的 GlobalizationSection 中设置默认编码。该设置称为 RequestEncoding，仅当您的服务的 HTTP 请求不包含 ContentType 标头时才会生效。请参阅[http://msdn.microsoft.com/en-us/library/system.web.configuration.globalizationsection.requestencoding.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.globalizationsection.requestencoding.aspx)

您可以进一步使用 Web.config 将上述设置仅设置为特定目录/MVC 控制器。

# jquery - 如何增加 jqGrid 工具栏/导航栏图标大小以实现视觉可访问性？

> ID：11642242
> 
> 赞同：1
> 
> 时间：2012-07-25T03:26:00.033
> 
> 标签：jquery, datagrid, jqgrid, struts2, accessibility

这是我们收到的一个要求，我们可以增加 Struts2-jQuery Grid /jQGrid 'Toolbar Icons' 的大小吗？像保存/删除/查找/添加等？

> 在这方面，我们的用户需要视觉可访问性。除了设置浏览器的缩放大小之外，还有什么解决方案吗？

更新（我们如何修复它）：

第 1 步：[下载](http://www.tnghardware.com/sandbox/jQueryIconTests/nameTable.html)32px 图标精灵网格
第 2 步：将此精灵网格图像放在 webapp\template\mytheme\images 文件夹
中 第 3 步：更新`jquery-ui.css`文件（从 ThemeRoller 为我们的自定义主题生成）
第 4 步：在图标中部分更新`.ui-state-default`类以指向新图像 第 5 步： 为同一类
添加属性 第 6 步：调整每个图像类中的位置 第 7 步：我们使用图像编辑工具压缩它的大小，以便我们可以将所有图标从 32px 变为24px 并改变颜色设置（色相/饱和度..等）以获得各种 UI 状态的不同颜色。`width: 16px; height: 16px;`

```
 example: 
Changed
.ui-icon-trash { background-position: -176px -96px; }

to 

.ui-icon-trash { background-position: -352px -192px; } 
```

这带来了新大小的图标。我们现在面临的唯一挑战是为各种状态（活动、默认、悬停和错误）找到合适的 32px css sprite 网格图标图像。

如果 ThemeRoller 有这个选项来生成各种大小的图标集，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:42:08.287

您将不得不下载一组 32 像素的新图标，这些图标与 jquery ui 自定义 css 一起提供。

检查此链接以获得更多帮助

[http://wiki.jqueryui.com/w/page/26308090/ThemeRoller-icon-set](http://wiki.jqueryui.com/w/page/26308090/ThemeRoller-icon-set)

# android - 在android中销毁Runnable

> ID：11642243
> 
> 赞同：1
> 
> 时间：2012-07-25T03:26:07.530
> 
> 标签：android, runnable, android-handler

我正在使用以下代码访问 url：

```
final Handler handler = new Handler();
Runnable runnable = new Runnable() 
{
   public void run() 
   {
       img.setImageBitmap(returnBitmap("fromurl")); 
       handler.postDelayed(this, 50);  
   }
};

handler.postDelayed(runnable, 2000); 
```

我观察到，如果服务器没有启动，如果我点击后退按钮，应用程序需要很长时间才能正确关闭。无论如何我可以加快退出程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:43:08.447

Runnables will exit automatically when finished with their `run()` method. If you are employing a loop to do some work, the solution that Jay Ho suggested will help exit from the loop cleanly. If you want to prevent the `Handler` from executing the runnable (before it posts) you can use `handler.removeCallbacksAndMessages(null)`[1](http://developer.android.com/reference/android/os/Handler.html#removeCallbacksAndMessages%28java.lang.Object%29) to clear the queue. Placing it in `onDestroy()` is your best bet. Otherwise, you're on your own. Once you've spawned a thread, you're at the mercy of the Android operating system to terminate it once its done.

Side note: I've run into problems like this before, and it's usually a call to a system service or the implementation of a Broadcast Listener or Alarm that mucks up the exit process.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:36:29.717

```
private Runnable runnable = new Runnable() {
    private boolean killMe=false;
    public void run() {
        //some work
        if(!killMe) {

            img.setImageBitmap(returnBitmap("fromurl"));
            handler.postDelayed(this, 50);
        }
    }
    public void kill(){
        killMe=true;
    }
};

ThreadPoolExecutor threadPoolExecutor = Executors.newSingleThreadExecutor();
Runnable longRunningTask = new Runnable();

// submit task to threadpool:
Future longRunningTaskFurure = threadPoolExecutor.submit(longRunningTask);

... ...
// At some point in the future, if you want to kill the task:
longRunningTaskFuture.cancel(true);
... ... 
```

# c# - 中点位移算法 - 奇怪的结果

> ID：11642248
> 
> 赞同：5
> 
> 时间：2012-07-25T03:27:12.023
> 
> 标签：c#, algorithm, fractals

我正在编写自己的中点位移算法以用于学习目的，我决定以自己的方式实现它，看看我是否 1）能够理解该算法，以及 2）看看我是否可以根据自己的喜好对其进行修改。

这是生成分形的代码：

```
 public void Generate(Double rg, int size)
    {
        Random rand = new Random();
        int min = -127;
        int max = 128;

        // Starting points of the rectangle
        MDP_Point s1 = new MDP_Point(0, 0, rand.Next(min, max));
        MDP_Point s2 = new MDP_Point(size, 0, rand.Next(min, max));
        MDP_Point s3 = new MDP_Point(size, size, rand.Next(min, max));
        MDP_Point s4 = new MDP_Point(0, size, rand.Next(min, max));

        // Lists containing the rectangles
        List<MDP_Rect> newRect = new List<MDP_Rect>();  // Newly created rectangles
        List<MDP_Rect> oldRect = new List<MDP_Rect>();  // Rectangles being divided

        // Starting rectangle is added to the list
        oldRect.Add(new MDP_Rect(s1, s2, s3, s4));

        // Distance between 2 points in a rectangle
        int h = size;

        while (h > 1)
        {
            foreach (MDP_Rect r in oldRect)
            {
                // Middle points of rectangle segments
                MDP_Point m1 = new MDP_Point();
                MDP_Point m2 = new MDP_Point();
                MDP_Point m3 = new MDP_Point();
                MDP_Point m4 = new MDP_Point();
                // Middle point of rectangle
                MDP_Point mm = new MDP_Point();

                m1.x = (r.C1.x + r.C2.x) / 2;
                m1.y = (r.C1.y + r.C2.y) / 2;
                m1.z = ((r.C1.z + r.C2.z) / 2) +(rand.Next(min, max) * rg);

                m2.x = (r.C2.x + r.C3.x) / 2;
                m2.y = (r.C2.y + r.C3.y) / 2;
                m2.z = ((r.C2.z + r.C3.z) / 2) +(rand.Next(min, max) * rg);

                m3.x = (r.C3.x + r.C4.x) / 2;
                m3.y = (r.C3.y + r.C4.y) / 2;
                m3.z = ((r.C3.z + r.C4.z) / 2) +(rand.Next(min, max) * rg);

                m4.x = (r.C1.x + r.C4.x) / 2;
                m4.y = (r.C1.y + r.C4.y) / 2;
                m4.z = ((r.C1.z + r.C4.z) / 2) + (rand.Next(min, max) * rg);

                mm.x = (r.C1.x + r.C2.x + r.C3.x + r.C4.x) / 4;
                mm.y = (r.C1.y + r.C2.y + r.C3.y + r.C4.y) / 4;
                mm.z = ((r.C1.z + r.C2.z + r.C3.z + r.C4.z) / 4) + (rand.Next(min, max) * rg);

                newRect.Add(new MDP_Rect(r.C1, m1, mm, m4));
                newRect.Add(new MDP_Rect(m1, r.C2, m2, mm));
                newRect.Add(new MDP_Rect(mm, m2, r.C3, m3));
                newRect.Add(new MDP_Rect(m4, mm, m3, r.C4));
            }

            oldRect.Clear();
            oldRect = new List<MDP_Rect>(newRect);
            newRect.Clear();
            h /= 2;
        }

        List<MDP_Rect> sorted = new List<MDP_Rect>();
        sorted = oldRect.OrderBy(y => y.C1.y).ThenBy(x => x.C1.x).ToList();

        List<MDP_Point> mapArray = new List<MDP_Point>();
        mapArray.AddRange(CreateArray(sorted));

        CreateImage(size, mapArray, rg);
    } 
```

MDP_Point 仅包含 x、y 和 z 值 MDP_Rectangle 包含 4 个点，创建一个矩形

CreateArray() 方法仅采用有序的矩形列表，并以正确的顺序输出和点列表来创建图像。

创建数组（）：

```
 private List<MDP_Point> CreateArray(List<MDP_Rect> lRect)
    {
        List<MDP_Point> p = new List<MDP_Point>();

        int size = (int)Math.Sqrt(lRect.Count);

        int i = 0;
        foreach (MDP_Rect r in lRect)
        {
            p.Add(new MDP_Point((int)r.C1.x, (int)r.C1.y, (int)r.C1.z));

            if (i > 0 && i % size == size - 1)
            {
                p.Add(new MDP_Point((int)r.C2.x, (int)r.C2.y, (int)r.C2.z));
            }

            i++;
        }

        for (int a = 0; a < size; a++)
        {
            p.Add(new MDP_Point((int)lRect[(size * size - size) + a].C4.x,
                (int)lRect[(size * size - size) + a].C4.y,
                (int)lRect[(size * size - size) + a].C4.z));

            if (a > 0 && a % size == size - 1)
            {
                p.Add(new MDP_Point((int)lRect[(size * size - size) + a].C3.x,
                    (int)lRect[(size * size - size) + a].C3.y,
                    (int)lRect[(size * size - size) + a].C3.z));
            }
        }

        return p;
    } 
```

这是创建图像的方法：

```
 private void CreateImage(int size, List<MDP_Point> arr, double roughness)
    {
        Bitmap map = new Bitmap(size, size);

        int ver = 0;
        for (int i = 0; i < map.Height; i++)
        {
            for (int n = 0; n < map.Width; n++ )
            {
                int h = (int)arr[ver].z + 127;
                if (h < 0)
                {
                    h = 0;
                }
                else if (h > 255)
                {
                    h = 255 ;
                }
                Color c = Color.FromArgb(h, h, h);

                //map.SetPixel(n, i, c);
                map.SetPixel(i, n, c);
                ver++;
            }
        }

        Bitmap m = new Bitmap(map);
        bool saved = true;
        int num = 0;

        while (saved)
        {
            if (File.Exists("map_S" + size + "_R" + roughness + "_" + num + ".png"))
            {
                num++;
            }
            else
            {
                m.Save("map_S" + size + "_R" + roughness + "_" + num + ".png", System.Drawing.Imaging.ImageFormat.Png);
                saved = false;
            }
        }

        map.Dispose();
        m.Dispose();
    } 
```

低于 0 的任何值都设置为 0，高于 255 的任何值都设置为 255 的事实可能是一个大问题......不知道该怎么做。

这是代码生成的图像：尺寸：1024 粗糙度：0.5

![在此处输入图像描述](../Images/152a2d1a1922bbbf1908779202a0662d.png)

最明显的问题是对角线“脊线”和平铺外观。

在这一点上，我不确定如何解决这个问题以使其看起来更自然。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:12:52.580

在这里，我认为部分问题是您`h`使用 255 和 0 破解了变量。我尝试使用以下代码：

```
int h = (int) arr[ver].z;
if (h < 0)
{
    h = Math.Abs(h);
}
while(h > 255)
{
    h -= 255;
} 
```

在我的电脑上，结果是： ![拿 1](../Images/a2681e3cef191ffab7d39af6ec12f009.png)

当我使用时：

```
int h = (int) arr[ver].z + 127; 
```

![拿 2](../Images/3a80a0a724e6d3acd528b71b39da51e4.png)

**请注意**，我只需要创建一个测试`MDP_Point`类并`MDP_Rect`对其进行测试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:13:41.170

为了避免这些伪影，您应该使用 Peitgen 等人提出的两阶段方法。在“分形图像的科学”中。他们还建议在每个细分步骤之后向所有顶点添加额外的随机位移。我在这里找到了扫描的摘录（第 45 页）：

[http://cs455.cs.byu.edu/lectureslides/FractalsPart2.pdf](http://cs455.cs.byu.edu/lectureslides/FractalsPart2.pdf)

# svn - 如何使用 svn 在远程服务器上安装 Zend 框架？

> ID：11642249
> 
> 赞同：2
> 
> 时间：2012-07-25T03:27:13.443
> 
> 标签：svn, zend-framework

我是svn的新手。我想在远程 ftp 服务器上运行以下命令：

```
svn checkout http://framework.zend.com/svn/framework/standard/trunk
# ZF Lab, see http://framework.zend.com/wiki/display/ZFPROP/Home
svn checkout http://framework.zend.com/svn/framework/laboratory/
# ZF Extras (ZendX components)
svn checkout http://framework.zend.com/svn/framework/extras/trunk 
```

我只想使用 svn 在远程服务器上安装 Zend 框架。我是绝对的初学者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T03:47:21.343

首先，如果您要以这种方式检出 ZF 源，您将需要远程 shell 访问服务器。如果您在共享主机环境中，这很可能是不可能的。

既然你有 FTP，只需使用它复制文件？

# actionscript-3 - 检查 Away3D 中两个边界框之间的碰撞？

> ID：11642251
> 
> 赞同：0
> 
> 时间：2012-07-25T03:27:22.807
> 
> 标签：actionscript-3, bounding-box, away3d, aabb

我需要在 Away3D 中做一些简单的碰撞检测。我找到了[away3d.bounds.AxisAlignedBoundingBox](http://www.away3d.com/livedocs/away3d/4.0/away3d/bounds/AxisAlignedBoundingBox.html)类，但似乎我只能检查边界框和向量之间的碰撞。

有没有办法检查两个边界框之间的碰撞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T16:38:45.000

如果您正在使用/可以升级到 4.4.x，请查看 Mesh.worldBounds，特别是 wordBounds.overlap(someOtherWorldBounds)。

示例（省略了 away3d 设置）：

```
// setup objects and materials
cubeMaterial:ColorMaterial;
cube:Mesh;

sphereMaterial:ColorMaterial;
sphere:Mesh;

collideMaterial:ColorMaterial;

cubeMaterial = new ColorMaterial(0x3333FF);
cube = new Mesh(new CubeGeometry(), cubeMaterial);
cube.x = -100;
cube.showBounds = true;

sphereMaterial = new ColorMaterial(0xFF3333);
sphere = new Mesh(new SphereGeometry(), sphereMaterial);
sphere.x = 100;
sphere.showBounds = true;

collideMaterial = new ColorMaterial(0x33FF33); 
```

在您的 enterFrame 处理程序中：

```
// process your object movement here
if (cube.worldBounds.overlaps(sphere.worldBounds) cube.material = collideMaterial;
else cube.material = cubeMaterial;
view.render(); 
```

# javascript - 为什么“会员不能有@private JsDoc”？

> ID：11642252
> 
> 赞同：3
> 
> 时间：2012-07-25T03:27:26.570
> 
> 标签：javascript, google-closure, google-closure-library, gjslint

我正在使用 Google Closure Tools 的 gjslint 工具清理我的代码。它报告以下错误：

```
Line 15, E:0222: Member "this._dictionary" must not have @private JsDoc 
```

这是代码：

```
/**
 * Stacker class.
 * @constructor
 * @param {frankenstein.app.Dictionary} dictionary input dictionary for stacking.
 */
frankenstein.app.Stacker = function(dictionary) {
  /** @private */ this._dictionary = dictionary;
}; 
```

有人可以解释为什么 this._dictionary 不能有@private JsDoc 吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T04:19:46.460

Closure Linter 旨在强制执行***[Google JavaScript 样式指南](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)***。JSDoc 标签`@private`记录如下：

> ***与方法或属性名称上的尾随下划线***一起使用，表示该成员是私有的。随着工具的更新以强制执行，尾随下划线最终可能会被弃用`@private`。

`@private`从 Closure Linter 版本 2.3.6 开始，只要在没有尾随下划线的情况下对成员进行注释，就会发出错误“成员 <name> 不得具有 @private JsDoc” 。

此代码不会发出任何错误或警告。

```
/**
 * Stacker class.
 * @constructor
 * @param {frankenstein.app.Dictionary} dictionary Input dictionary for 
 *     stacking.
 */
frankenstein.app.Stacker = function(dictionary) {
  /** @private */ this.dictionary_ = dictionary;
}; 
```

# java - 为什么 JAXB 不写出 SWT Widgets？

> ID：11642254
> 
> 赞同：1
> 
> 时间：2012-07-25T03:27:46.350
> 
> 标签：java, xml, jaxb

我有一个类来存储 SWT 小部件列表。

```
@XmlRootElement
class Test {
    private List<Widget> widgets;

    public List<Widget> getWidgets() {
        return widgets;
    }

    public void setWidgets(List<Widget> widgets) {
        this.widgets = widgets;
    }
} 
```

我使用 JAXB 将其编组为 XML。但是，这些小部件未编组。

```
Test t = new Test();
t.setWidgets(widgets);
JAXBContext context = JAXBContext.newInstance(Test.class);
Marshaller m = context.createMarshaller();
m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
m.marshal(t, System.out); 
```

这是输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<test>
    <widgets/>
    <widgets/>
    <widgets/>
</test> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:32:50.253

您的[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现无法确定`Widget`使用反射的子类，因此您需要在创建 JAXBContext 时包含它们。

```
JAXBContext context = JAXBContext.newInstance(Test.class, Button.class, Label.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:45:36.793

由于 SWT Widget 类没有 JAXB 注释，因此您需要在类中将其替换为您自己的小部件详细信息类（具有注释），或者`XmlJavaTypeAdapter`为该属性实现一个将 Widget 映射到您自己的详细信息类的属性。

您可能还想使用

```
 @XmlElement(name = "widget") 
```

所以你得到`<widget>`而不是`<widgets>`

# c++ - C++ Qt删除所有图形：是否有清除所有图形功能

> ID：11642260
> 
> 赞同：0
> 
> 时间：2012-07-25T03:28:47.433
> 
> 标签：c++, qt

> **可能重复：**
> [如何清除父小部件中的所有小部件？](https://stackoverflow.com/questions/3940409/how-to-clear-all-the-widgets-in-parent-widgets)

我有很多按钮和标签，我想一次将它们全部删除。是否有某种内置函数或者有一个我可以编写的函数。我是 C++ 和 Qt 的新手，所以请多多解释。提前致谢。

# css - IE奇怪的边框

> ID：11642262
> 
> 赞同：0
> 
> 时间：2012-07-25T03:28:50.303
> 
> 标签：css, internet-explorer, layout, internet-explorer-8, internet-explorer-9

我注意到有时我会在 IE 的布局周围看到一个灰色边框。

我的网站上也有一个，这有点烦人。

从 IE8 切换到 IE9 或其他方式有时会使此边框消失，但并非在所有站点上。

有没有人知道为什么会发生这种情况？

![在此处输入图像描述](../Images/125ffefa0ad3a50fe9b715093fc53ffa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:31:29.423

这几乎是您处于怪癖模式的明显迹象。按 F12，查看 Document Mode 列出的内容。

然后尝试修复它。确保您的文档中的第一件事是有效`<!DOCTYPE>`的，确保您的文档格式正确，并尝试发送`X-UA-Compatible: IE=edge`标题（或将其作为`<meta>`标签包含）。

# html - 如何使用 span 以两种不同的方式设置 asp.net mvc 按钮的样式？

> ID：11642267
> 
> 赞同：0
> 
> 时间：2012-07-25T03:29:22.917
> 
> 标签：html, css

我有这样的按钮：

```
<button type="submit" name="button1" value="1" style="text-decoration: none; cursor: pointer; font-size: 20px;">Line 1 <br /><span class="blue">line 2</span></button> 
```

和我的CSS：

```
.blue { color: blue;} 
```

但是它没有应用第二种css样式，任何想法，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:32:00.620

May be *typo*! The `CSS` class name is `"blue"` not a `"bluetext".`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:37:04.117

我想其他一些样式定义正在覆盖它。尝试使用 forcefull`!important` 使用此颜色而不是其他定义

```
.blue { color: blue !important;} 
```

# django - 向 Django 添加简单的自定义字段——如何编写 South Introspection 规则

> ID：11642268
> 
> 赞同：6
> 
> 时间：2012-07-25T03:29:24.840
> 
> 标签：django, django-admin, django-south

我正在尝试向使用[South](http://south.aeracode.org/)的 Django 项目添加自定义字段。因此，我正在尝试（第一次）[为 South 编写内省规则](http://south.aeracode.org/wiki/MyFieldsDontWork)。我相信我的案例是最简单的，因为我只是在扩展一个 CharField。具体来说：

```
class ColorField(models.CharField):
    def __init__(self, *args, **kwargs):
        kwargs['max_length'] = 10
        super(ColorField, self).__init__(*args, **kwargs)

    def formfield(self, **kwargs):
        kwargs['widget'] = ColorPickerWidget
        return super(ColorField, self).formfield(**kwargs) 
```

这来自一个名为[jQuery 颜色选择器模型字段](http://djangosnippets.org/snippets/1261/)的 Django 片段，供感兴趣的人使用。

由于我没有添加任何新属性，我相信我只需要添加这些代码行：

```
from south.modelsinspector import add_introspection_rules
add_introspection_rules([], ["^myproject\.myapp\.models\.ColorField"]) 
```

这可能很明显，但他们应该去哪里？另外，我的假设是我必须做的一切正确吗？

我已经回顾了这里发布的几个问题，但大多数都处理更复杂的内省。

根据[http://south.readthedocs.org/en/latest/customfields.html#where-to-put-the-code](http://south.readthedocs.org/en/latest/customfields.html#where-to-put-the-code)，我尝试将代码放在定义自定义字段的 models.py 文件顶部. 但这并没有奏效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T03:45:22.740

简单的回答：是的，代码应该放在定义字段的 models.py 文件中。正确的代码是：

```
from south.modelsinspector import add_introspection_rules
add_introspection_rules([], ["^myapp\.models\.ColorField"]) 
```

不知道为什么我把项目名称放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T20:26:42.847

您必须确保文件的路径正确。您提到的那个看起来与我正在使用的相似，但路径是：

```
add_introspection_rules([], ["^colors\.fields\.ColorField"]) 
```

# macos - 控件将 NSURL 显示为连续的小图标和名称

> ID：11642272
> 
> 赞同：0
> 
> 时间：2012-07-25T03:29:54.230
> 
> 标签：macos, cocoa

如何显示`file://localhost/Users/xxxx/Desktop/Pictures`如下图所示的 URL？

![在此处输入图像描述](../Images/af890a1034447431f87af27b59e92337.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:55:52.940

有一个[`NSPathControl`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSPathControl_class/Reference/Reference.html%23//apple_ref/occ/cl/NSPathControl).

# android - 为什么我在尝试播放循环警报声音时收到“无法创建媒体播放器”错误？

> ID：11642274
> 
> 赞同：0
> 
> 时间：2012-07-25T03:30:20.483
> 
> 标签：alarmmanager, android, android-emulator, android-mediaplayer, alarm

在 Android 中，我试图创建一个实例[`MediaPlayer`](http://developer.android.com/reference/android/media/MediaPlayer.html)来播放警报音。我意识到有一个[alarmmanager](/questions/tagged/alarmmanager "显示标记为“alarmmanager”的问题")，但此时我对创建服务的麻烦不感兴趣。现在我想获取用户默认的警报音加载，循环播放。不幸的是，我的以下代码导致错误（to to 不是错字）：

> 无法创建媒体播放器

在此错误之前，会立即记录以下调试语句：

> 无法在客户端打开文件，正在尝试服务器端

我已经记录了警报的路径，它被列为：`/system/alarm_alert`。到目前为止，此代码仅在针对 Android 2.2 API 级别 8 的模拟器中运行。以下代码有什么问题会导致此错误？

```
Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
if (alert == null) {
     // alert is null, using backup
     alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
     if (alert == null) {
         // I can't see this ever being null (as always have a default
         // notification) but just incase alert backup is null, using 2nd backup
         alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
     }
}

Log.d("alertPath", alert.getPath());

MediaPlayer mediaPlayer;
setVolumeControlStream(AudioManager.STREAM_ALARM);

try {
    mediaPlayer = new MediaPlayer();
    mediaPlayer.setDataSource(this, alert);
    mediaPlayer.prepare();
    mediaPlayer.setLooping(true);
    mediaPlayer.start();
} catch (IOException e) {

} catch (Exception e) {
    Log.d("mp", e.getMessage());
} 
```

# javascript - 对象原型在画布游戏中不起作用

> ID：11642277
> 
> 赞同：0
> 
> 时间：2012-07-25T03:30:40.760
> 
> 标签：javascript, canvas, prototype-programming

所以我正在写一个愚蠢的小画布游戏，主要是一个小行星的副本。无论如何，我设置了按钮侦听器，以便当用户按下空格键时，将`fire()`调用播放器对象的函数：

```
eGi.prototype.keyDownListener = function(event) {
    switch(event.keyCode) {
        case 32:
            player.fire();
            break; 
```

在 fire 函数中，我的脚本检查进程是否已经在运行，如果没有，则创建一个新的“bullet”对象，将其存储在临时变量中，并将其添加到绘图堆栈中。

```
fire:(function() {
    if (this.notFiring) {
        var blankObject = new bullet(this.x,this.y,this.rot,"bullet");
        objects.push(blankObject);
        timer2 = setTimeout((function() {
            objects.pop();
        }),1000);
        this.notFiring = false;
    }}), 
```

（顺便说一句，当用户释放空格键时，`this.notFiring`它被设置回 true。）

这是子弹对象构造函数及其必需的原型方法，`draw(context)`：

```
var bullet = function(x,y,rot,name) {
    this.x = x;
    this.y = y;
    this.sx = 0;
    this.sy = 0;
    this.speed = 1;
    this.maxSpeed = 10;
    this.rot = rot;
    this.life = 1;
    this.sprite = b_sprite;
    this.name = name;
}
bullet.prototype.draw = function(context) {
    this.sx += this.speed * Math.sin(toRadians(this.rot));
    this.sy += this.speed * Math.cos(toRadians(this.rot));
    this.x += this.sx;
    this.y -= this.sy;
    var cSpeed = Math.sqrt((this.sx*this.sx) + (this.sy * this.sy));
    if (cSpeed > this.maxSpeed) {
        this.sx *= this.maxSpeed/cSpeed;
        this.sy *= this.maxSpeed/cSpeed;    
    }
    context.drawImage(this.sprite,this.x,this.y);
} 
```

无论如何，当我运行我的游戏并按下空格键时，Chrome 开发者控制台给了我一个错误，上面写着：

```
Uncaught TypeError: Object function (x,y,rot,name) {
    this.x = x;
    this.y = y;
    this.sx = 0;
    this.sy = 0;
    this.speed = 1;
    this.maxSpeed = 10;
    this.rot = rot;
    this.life = 1;
    this.sprite = b_sprite;
    this.name = name;
} has no method 'draw' 
```

即使我做了原型。我究竟做错了什么？

编辑：

更改`var bullet = function`为`function bullet`并更改`bullet.prototype.draw`为后`bullet.draw`，我仍然收到错误消息。这一次，更神秘，说

```
Uncaught TypeError: type error
    bullet.draw
    (anonymous function)
    eGi.drawObjs
    eGi.cycle 
```

完整的代码在我的网站上，[在这里](http://somekidwithhtml.webs.com/games/asteroids/index.html)

另一个编辑：

Chrome 控制台说这种类型的错误发生在第 122 行，这恰好是代码片段：

```
context.drawImage(this.sprite,this.x,this.y); 
```

但是，我不确定那里怎么可能出现类型错误，精灵是一个图像，X 和 Y 值不是未定义的，它们是数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:54:29.467

你在哪里调用你的绘图函数？我打赌你是在打电话`bullet.draw();`而不是在实际的子弹实例上调用它。

有点像之间的区别

```
Cat.meow(); 
```

和

```
var mittens = new Cat();
mittens.meow(); 
```

# wordpress - 没有链接的 Wordpress 列表菜单项（作为没有链接的纯文本）

> ID：11642278
> 
> 赞同：0
> 
> 时间：2012-07-25T03:30:54.343
> 
> 标签：wordpress, menu, menuitem

我正在寻找一个选项来列出没有链接的特定菜单中的所有菜单项。我遇到了 wp_get_nav_menu_items()，但似乎无法找到菜单 slug

[http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items](http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items)

如果有人可以用菜单名称/菜单 ID 帮助我做到这一点，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:13:48.403

您可以在 header.php 或 functions.php 文件中找到“menu slug”（菜单名称）。

***方法1***：查看**header.php**文件

打开你的主题文件夹并找到 header.php 文件。在该文件中将有类似于此的一行：

```
<?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?> 
```

这`primary`是您的菜单名称。

***方法2：***查看**functions.php**文件。

如果您定义了多个菜单，那么您应该检查 functions.php 文件的内部。

在该文件中，您可能会找到与此类似的行：

```
register_nav_menu( 'primary', __( 'Primary Menu', 'twentyeleven' ) ); 
```

这`primary`是您的菜单名称。

希望这会帮助你。

# c# - 如何在带有按钮的asp中继器控件中使用复选框删除？

> ID：11642280
> 
> 赞同：1
> 
> 时间：2012-07-25T03:31:18.360
> 
> 标签：c#, asp.net

嗨，有人可以帮帮我吗？我的目标是允许用户删除数据库中称为“消息”的多行。

通过选中复选框，用户将能够在按下按钮后删除多行。

但是，当我使用下面的代码时，什么都没有发生。有人可以帮我看看我的代码是否有问题吗？谢谢 =)

源代码

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MainMasterPage.master" AutoEventWireup="true" CodeFile="Messages.aspx.cs" Inherits="Messages" %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace="System.Data.SqlClient" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

<SCRIPT runat="server">
private void Page_Load(object sender, System.EventArgs e)
{
    String userLog = Session["loginuser"].ToString();
    if (!IsPostBack)
    {
        LoadData();

    }
}
public void LoadData()
{
String userLog = Session["loginuser"].ToString();
SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM Messages WHERE receiver = '" + userLog + "'",
    "server=19-20\\sqlexpress;database=mpsip;Integrated Security=SSPI");
DataTable table = new DataTable();
adapter.Fill(table);
Repeater1.DataSource = table;
Repeater1.DataBind();

PagedDataSource pds = new PagedDataSource();
pds.DataSource = table.DefaultView;
pds.AllowPaging = true;
pds.PageSize = 10;

int currentPage;

if (Request.QueryString["page"] != null)
{
    currentPage = Int32.Parse(Request.QueryString["page"]);
}
else
{
    currentPage = 1;
}

pds.CurrentPageIndex = currentPage - 1;
Label1.Text = "Page " + currentPage + " of " + pds.PageCount;

if (!pds.IsFirstPage)
{
    linkPrev.NavigateUrl = Request.CurrentExecutionFilePath + "?page=" + (currentPage - 1);
}

if (!pds.IsLastPage)
{
    linkNext.NavigateUrl = Request.CurrentExecutionFilePath + "?page=" + (currentPage + 1);
}

Repeater1.DataSource = pds;
Repeater1.DataBind(); 
```

}

```
 &nbsp;<asp:Repeater ID="Repeater1" runat="server">

            <itemtemplate>
                <asp:CheckBox ID="CheckBox1" runat="server" />
          <b><%# DataBinder.Eval(Container.DataItem, "title") %></b>

          <br>From UserID: <%# DataBinder.Eval(Container.DataItem, 
                  "mlogin", "{0:d}") %>
              <br />
              Date: <%# DataBinder.Eval(Container.DataItem, 
                  "dateandtime", "{0:d}") %>
              <br />
              MessageID: <%# DataBinder.Eval(Container.DataItem, 
                  "messageID", "{0:d}") %>
                  <br />

       </itemtemplate>
       <separatortemplate>
          <hr>
       </separatortemplate>
        </asp:Repeater>

        <br />
        <asp:HyperLink ID="linkPrev" runat="server">Previous Page</asp:HyperLink>&nbsp;
        <asp:HyperLink ID="linkNext" runat="server">Next Page</asp:HyperLink>

    <br />
    <asp:Button ID="Button7" runat="server" onclick="Button7_Click" 
    Text="Button" />
    <br />
    <br />
    <br />

    <asp:Label ID="Label1" runat="server"></asp:Label>
    <br />
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
        Text="Compose Message" />
    <asp:Button ID="Button2" runat="server" onclick="Button2_Click" 
        Text="Sent Messages" />

</div> 
```

```
 protected void Button7_Click(object sender, EventArgs e)
{

    using (SqlConnection conn = new SqlConnection("Data Source=19-20\\sqlexpress;" + "Initial Catalog = mpsip; Integrated Security = SSPI"))
    {
        conn.Open();
        SqlCommand cmdDel = conn.CreateCommand();
        SqlTransaction transaction = conn.BeginTransaction("MyTransaction");
        cmdDel.Connection = conn;
        cmdDel.Transaction = transaction;
        try
        {
            for (int i = 0; i < Repeater1.Items.Count; i++)
            {
                //This assumes data type of messageID is integer, change (int) to the right type
                cmdDel.CommandText = "delete from messages where messageID = '" + ((String)((DataRow)Repeater1.Items[i].DataItem)["messageID"]) + "'";
                cmdDel.ExecuteNonQuery();

                // Continue your code here

            }
            transaction.Commit();
        }
        catch (Exception ex)
        {
            try
            {
                transaction.Rollback();
            }
            catch (Exception ex1)
            {
                //TODO: write log
            }
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:53:06.353

您的代码有问题，在这一行：

```
mysql = "delete from messages where messageID = '" + CheckBox1.Checked + "'"; 
```

它应该是：

```
mysql = "delete from messages where messageID = '" + ((YourClass)Repeater1.Items[i].DataItem).messageID + "'"; 
```

你应该使用[SqlParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)而不是连接字符串。

此外，SqlCommand 没有被执行，你应该添加这一行：

```
cmdDel.ExecuteNonQuery(); 
```

并且您必须在删除消息后重新加载数据。

此外，您应该在for循环之外初始化SqlConnection对象，并使用SqlTransaction来管理事务。

```
 using (SqlConnection conn = new SqlConnection("Data Source=19-20\\sqlexpress;" + "Initial Catalog = mpsip; Integrated Security = SSPI"))
 {     
    conn.Open();
    SqlCommand cmdDel = conn.CreateCommand();
    SqlTransaction transaction = conn.BeginTransaction("MyTransaction");
    cmdDel.Connection = conn;
    cmdDel.Transaction = transaction;
    try {
        for (int i = 0; i < Repeater1.Items.Count; i++)
        { 
         //This assumes data type of messageID is integer, change (int) to the right type
         cmdDel.CommandText = "delete from messages where messageID = '" + ((int)((DataRow)Repeater1.Items[i].DataItem)["messageID"]) + "'";
         cmdDel.ExecuteNonQuery();

         // Continue your code here

         }
         transaction.Commit();
         //TODO: reload data here and binding to Repeater
    }
    catch(Exception ex) {
        try {
            transaction.Rollback();
        }
        catch(Exception ex1) {
            //TODO: write log
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:02:17.937

```
protected void Button7_Click(object sender, EventArgs e)
{
    bool BindNeeded = false;

    SqlConnection connDelete = new SqlConnection("Data Source=19-20\\sqlexpress;" + "Initial Catalog = mpsip; Integrated Security = SSPI");
    connDelete.Open();
    String mySQL;

    try
    {

        for (int i = 0; i < Repeater1.Items.Count; i++)
        {
            CheckBox CheckBox1 = (CheckBox)
            Repeater1.Items[i].FindControl("CheckBox1");
            if (((CheckBox)Repeater1.Items[i].FindControl("CheckBox1")).Checked)
            {

                //This assumes data type of messageID is integer, change (int) to the right type
                CheckBox CheckBox = (CheckBox)Repeater1.Items[i].FindControl("CheckBox1");
                Literal litMessageId = (Literal)Repeater1.Items[i].FindControl("litMessageId");

                string messageId = litMessageId.Text;
                mySQL = string.Format("delete from messages where messageID = '{0}'", messageId);

                SqlCommand cmdDelete = new SqlCommand(mySQL, connDelete);
                cmdDelete.ExecuteNonQuery();

                // Continue your code here
            }
            else
            {

            }
        }
            if (BindNeeded)
            {
                Repeater1.DataBind();
            }
            else
            {
                Response.Redirect("Messages.aspx");
            }

    }
        catch
    {
        Response.Redirect("Messages.aspx");
    }

} 
```

# python - Python MySQLdb error - what is causing this

> ID：11642283
> 
> 赞同：1
> 
> 时间：2012-07-25T03:31:38.050
> 
> 标签：python, mysql, mysql-python

I am wondering why I am receiving this error:

```
cmd = "INSERT INTO resulttest (category, value, timestamp) VALUES (" + key + ", " + str(value) + ", " + str(timestamp) + ")"
c.execute(cmd)
db.commit()

    INSERT INTO resulttest (category, value, timestamp) VALUES (composed, 2, 1343186948.8)

Traceback (most recent call last):
  File "C:/Behavioral Technology/Google Drive/twitterthingv5test.py", line 94, in <module>
    moodParser()
  File "C:/Behavioral Technology/Google Drive/twitterthingv5test.py", line 92, in moodParser
    query()
  File "C:/Behavioral Technology/Google Drive/twitterthingv5test.py", line 37, in query
    main(columns)
  File "C:/Behavioral Technology/Google Drive/twitterthingv5test.py", line 81, in main
    c.execute(cmd)
  File "C:\Python27\lib\site-packages\MySQLdb\cursors.py", line 174, in execute
    self.errorhandler(self, exc, value)
  File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue 
```

I believe it has something to do with how I am passing my values to the SQL command.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T03:35:44.303

您创建查询的代码没有尝试引用字符串值：

```
cmd = "INSERT INTO resulttest (category, value, timestamp) VALUES (" + key + ", " + str(value) + ", " + str(timestamp) + ")" 
```

查看您打印的 SQL 语句：

```
INSERT INTO resulttest (category, value, timestamp) VALUES (composed, 2, 1343186948.8) 
```

不应该引用“类别”吗？

首先，您不应该使用字符串操作来编写 SQL 语句。这就是 SQL 注入漏洞发生的方式。相反，您应该使用占位符并让 MySQL 库处理它们：

```
c.execute(
    "INSERT INTO resulttest (category, value, timestamp) VALUES (?, ?, ?)", 
    (key, value, timestamp)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:58:44.233

如果 Ned Batchelder 的建议不起作用，这里有一个替代方案：

```
sql = "INSERT into resulttest (category, value, timestamp) VALUES (%s, %s, %s)"
c.execute(sql % (key, value, timestamp)) 
```

我遇到了一个问题，我的 SQL 命令没有被执行，遵循这种语法使它工作。

虽然你必须小心，因为使用`%`而不是`,`打开了 SQL 注入的可能性，但这是唯一对我有用的语法。可能是 Python-MySQL 版本和兼容性问题。

一个更好的主意是安装兼容版本并遵循正确的语法。

# multithreading - Delphi (Indy) 线程安全类

> ID：11642284
> 
> 赞同：1
> 
> 时间：2012-07-25T03:31:40.137
> 
> 标签：multithreading, delphi, indy

假设我有一些类 TMaster，它的 asa 字段包含一个 TIdTCPServer。TMaster 类的某些方法负责 TIdTCPServer 的 OnExecute 事件。

首先，这是线程安全且可接受的吗？其次，让我们假设我的类有许多其他私有字段（名称、日期、任何东西......） OnExecute 事件 - 这实际上是 TMaster 类内部的一个方法，安全地写入这些变量吗？

我想我的意思是问在这种情况下私有字段是否是线程安全的？

我对线程真的很陌生，任何帮助都将不胜感激！

谢谢，阿德里安！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T22:11:12.120

我处理此问题的方法不是让事件使用的字段属于`TidTCPServer` 所有者，而是定义一个自定义`TidContext`后代并将字段添加到该类。

然后，您只需将`ContextClass`服务器类上的属性设置为您的自定义上下文的类型。这样，每个连接/线程都将获得自己的自定义上下文，其中包含自己的私有字段，这样并发线程访问相同字段就不会出现问题。

如果您有一个需要由不同上下文访问的对象列表，您有两个选择。

1) 创建复制对象并将它们存储在每个上下文实例的私有字段中这可以在`OnConnect`事件中完成。

2) 使用同步器或信号量保护对象免受并发线程`TIdCriticalSection`访问`TMultiReadExclusiveWriteSynchronizer`，

您使用哪种方法取决于每种情况。

如果您需要操作任何 vcl 组件，请记住这不能安全地在主 vcl 线程之外完成，因此您应该`tidnotify`为此创建自己的后代。如果在 vclsynch 操作的中间停止，执行此类操作`tidsynch`可能会导致死锁。`tidtcpserver`

这只是我在使用 Indy 的几年中学到的一些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T03:57:49.200

`TIdTCPServer`是一个多线程组件。不管你用什么包装它，`OnExecute`事件总是在工作线程的上下文中触发，每个连接的客户端一个，所以你放在处理程序中的任何代码都必须是线程安全的。类的成员`TMaster`需要足够的保护以防止多个线程同时进行并发访问。

# android - Call Method From Activity to Fragments

> ID：11642287
> 
> 赞同：1
> 
> 时间：2012-07-25T03:32:09.860
> 
> 标签：android, android-fragments, font-size

i want to build app with viewpager and display image and text from DB, and i had a button to resize Text to Small,Medium,Big size, but my problem how to make that methode and call it? this is my code

Phrase.java

```
public void onCreate(Bundle savedInstanceState) {  
     setContentView(R.layout.phrase);  
     mViewPager = (ViewPager) findViewById(R.id.viewPager);  
     mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());  
     mViewPager.setAdapter(mMyFragmentPagerAdapter);

     text = (ImageView)findViewById(R.id.ibText);

     /* call db and store in arraylist */
     ....
}

private static class MyFragmentPagerAdapter extends FragmentPagerAdapter {  
    public MyFragmentPagerAdapter(FragmentManager fm) {  
         super(fm);  
    }  

    @Override  
    public Fragment getItem(int index) {  
         var = arrayphrase.get(index);
         phrase = var.phraseKey;
         title_phrase = var.titleKey;
         sound_id = var.indexkey;
         return PageFragment.newInstance(index,sound_id,phrase,title_phrase);
    }  

    @Override

    public void destroyItem(View container, int position, Object object) {
        // TODO Auto-generated method stub
        super.destroyItem(container, position, object);
    }

    @Override  
    public int getCount() {  

         return NUMBER_OF_PAGES;  
    }  
}  

CharSequence[] sizetext = {"Small", "Medium", "Big","Cancel"};
@Override
public void onClick(View v) {
      case R.id.ibText:
        AlertDialog.Builder listBuilder = new AlertDialog.Builder(Phrase.this);
        listBuilder.setItems(sizetext, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) 
            {

                   if(sizetext[item].equals("Big"))
                   {
                       sizeText=24;
                       onUpdateSize(sizeText);
                   }
                   else if(sizetext[item].equals("Medium"))
                   {
                       sizeText=20;
                       onUpdateSize(sizeText);
                   }
                   else if(sizetext[item].equals("Small"))
                   {
                       sizeText=16;
                       onUpdateSize(sizeText);
                   }
            }
        });
        AlertDialog alertList = listBuilder.create();
        alertList.show();
    break;
    } 
```

PageFragment.java

```
 public class PageFragment extends Fragment { 
    public static PageFragment newInstance(int index,String sound, String phrase, String title_phrase) {

    PageFragment pageFragment = new PageFragment();
    Bundle bundle = new Bundle();
    bundle.putString("title_phrase", title_phrase);
    bundle.putString("sound", sound);
    bundle.putString("phrase", phrase);
    bundle.putInt("index", index);
    pageFragment.setArguments(bundle);
    return pageFragment;
}

@Override  
public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
}  

@Override  
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  

    View view = inflater.inflate(R.layout.fragment, container, false);  
    ImageView imageView = (ImageView) view.findViewById(R.id.imageView1);  
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 2;
    options.inScaled = false;
    options.inPreferQualityOverSpeed=true;
    options.inJustDecodeBounds = false;
    options.inDither = false;
    Bitmap bitmap = BitmapFactory.decodeResource(this.getResources(), Imgid[(int)(Math.random()*Imgid.length)], options);
    //imageView.setScaleType(ScaleType.FIT_XY);
    imageView.setImageBitmap(bitmap);

    ScrollView sv = (ScrollView)view.findViewById(R.id.scrollView1);
    LinearLayout.LayoutParams lp2= new LinearLayout.LayoutParams((int)(TorasanApp.device_width*0.7), (int) (TorasanApp.device_height*0.65),Gravity.CENTER);
    sv.setLayoutParams(lp2);
    sv.setBackgroundColor(Color.argb(20, 65, 65, 65));

    TextView tvdata = (TextView)view.findViewById(R.id.tvDetailPhrase);
    tvdata.setText(getArguments().getString("phrase"));

    TextView tvtitle = (TextView)view.findViewById(R.id.tvTitlephrase);
    tvtitle.setText(getArguments().getString("title_phrase"));
    return view;  
}  
} 
```

you see in my Phrase when onclick i have onUpdateSize(sizeText) and i want call it to change TextView tvdata fontsize that was in PageFragment.java , so how to make that method and call it? because i try but still cant

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:12:21.430

在你`Fragment`的`onCreateView`，做

```
mButton.setOnClickListener(new View.OnClickListener() {
    AlertDialog.Builder listBuilder = new AlertDialog.Builder(Phrase.this);
    listBuilder.setItems(sizetext, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) 
        {

               if(sizetext[item].equals("Big"))
               {
                   sizeText=24;
                   onUpdateSize(sizeText);
               }
               else if(sizetext[item].equals("Medium"))
               {
                   sizeText=20;
                   onUpdateSize(sizeText);
               }
               else if(sizetext[item].equals("Small"))
               {
                   sizeText=16;
                   onUpdateSize(sizeText);
               }
        }
    });
    AlertDialog alertList = listBuilder.create();
    alertList.show();
}); 
```

然后在您的中创建访问器方法，`Activity`以便您`Fragment`可以检索所需的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:59:09.973

在你的问题中，

您可以有一个要更新 textview的`Fragment instance`in方法，然后您可以从那里调用该类的任何方法（您必须在 Fragment 类中创建这样的方法来更新 textview。）。`onClick`

如需更多了解，请参阅[此链接](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)。

在上面的链接第 10 步中包含方法调用（viewer.updateUrl(tutUrl);) 从 FragmentActivity 类片段类

并且在第 8 步中定义了在 Fragment 类中给出的 updateUrl 方法

# iphone - iphone opengl es 2.0, how to use objective-c class to store primitive data?

> ID：11642288
> 
> 赞同：0
> 
> 时间：2012-07-25T03:32:13.097
> 
> 标签：iphone, opengl-es, opengl-es-2.0, vbo

I am trying to use nsarray of objective-c class called Primitive which stores primitive data such as vertices, texture coordinates, vertexBuffer, indexBuffer and texture buffer.

But it is not drawing the rectangle with texture. When I tried c struct that contains same info, it drew fine.

I am not sure where I am missing Can anyone give me some hint?

```
//Here is my primitive class. 
//It also has Vertex class which has vertex positions and texture coordinates
// This represents one primitive, in this app, it is rectangle
@interface Primitive : NSObject
{
    @public
    GLuint vertexBuffer;
    GLuint indexBuffer;
    GLuint textureBuffer;
}
@property (nonatomic, copy) NSArray * vertices; //consist 4 vertices

- (id)initWithVertices:(NSArray *)vertices;

@end

@interface Vertex : NSObject

@property (nonatomic, copy) NSArray * position; //(x,y,z) per vertex
@property (nonatomic, copy) NSArray * textureCoordinate; //(s,t) per vertex

- (id)initWithPointX:(float)x Y:(float)y Z:(float)z;
- (void)printVal;
@end

@implementation Primitive

@synthesize vertices = m_vertices;

- (id)initWithVertices:(NSArray *)vertices
{
    self = [super init];
    if(self)
    {
        m_vertices = [[NSArray alloc] initWithArray:vertices];
    }

    return self;
}

@end

@implementation Vertex

@synthesize position = m_position;
@synthesize textureCoordinate = m_textureCoordinate;

- (id)initWithPointX:(float)x Y:(float)y Z:(float)z
{
    self = [super init];
    if(self)
    {
        m_position = [[NSArray alloc] initWithObjects:
                      [NSNumber numberWithFloat:x], 
                      [NSNumber numberWithFloat:y], 
                      [NSNumber numberWithFloat:z], nil];
    }

    return self;
}

// and here is how I generate vbo. it's in other file
- (void)setupVertexBufferObjects
{

    for(Primitive * primitive in m_primitives)
    {
        NSLog(@"setting vbo");

        glGenBuffers(1,  &primitive->vertexBuffer);
        glBindBuffer(GL_ARRAY_BUFFER, primitive->vertexBuffer);
        glBufferData(GL_ARRAY_BUFFER, sizeof(primitive.vertices), 
                     (__bridge void *)primitive.vertices, GL_STATIC_DRAW);

        glGenBuffers(1, &primitive->indexBuffer);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, primitive->indexBuffer);
        glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);
    }
}

// and this is how I render, this is also in other file than Primitive and above method
// this one worked fine when I had c struct to provide vertices and texture coordinate
glClearColor(0, 104.0/255, 55.0/255, 1.0);
glClear(GL_COLOR_BUFFER_BIT);

GLuint positionSlot = glGetAttribLocation(m_programHandle, "Position");

glEnableVertexAttribArray(positionSlot);

glVertexAttribPointer(positionSlot, 3, GL_FLOAT, GL_FALSE, 
                      [m_candleModel sizeOfVertex], 0);

GLuint texCoordSlot = glGetAttribLocation(m_programHandle, "TexCoordIn");
glEnableVertexAttribArray(texCoordSlot);
GLuint textureUniform = glGetUniformLocation(m_programHandle, "Texutre");

glVertexAttribPointer(texCoordSlot, 2, GL_FLOAT, GL_FALSE, 
                      [m_candleModel sizeOfVertex], (GLvoid *)(sizeof(float) * 3));

GLuint floorTexture = [m_candleModel getTexture];

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, floorTexture);
glUniform1i(textureUniform, 0);

glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]), GL_UNSIGNED_BYTE, 0);

glDisableVertexAttribArray(positionSlot);

[m_context presentRenderbuffer:GL_RENDERBUFFER]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:01:21.027

如果您只是想制作一个不会改变形状的刚性对象，我建议您获取位置、比例、旋转等信息，然后更改顶点以适应信息。这是我目前正在研究的一个类，它制作一个黑色正方形，可以进行旋转、不透明度、位置和大小。希望能帮助到你

```
typedef struct {
    float Position[3];
    float Color[4];
} Vertex;

@interface GameSprite : NSObject
{
    GLuint positionAttrib;
    GLuint colorAttrib;

    GLuint programHandle;
    GLuint modelviewUniform;

    CGSize spriteSize;

    CGPoint position;
    float rotation;
    float alpha;

    BOOL HasRotated;
}

-(id) init;
-(id) initWithSize:(CGSize)size AndPosition:(CGPoint)spritePosition;

-(void) render;

-(void) setPosition:(CGPoint)newPosition;
-(void) setRotation:(float)newRotation;
-(void) setAlpha:(float)newAlpha;

@property (readonly, nonatomic) CGPoint getPosition;
@property (readonly, nonatomic) float getRotation;
@property (readonly, nonatomic) float getAlpha;
@property (readonly, nonatomic) CGSize getSize;

@end 
```

执行...

```
#define kPI180   0.017453
#define k180PI  57.295780
#define degreesToRadians(x) (x * kPI180)
#define radiansToDegrees(x) (x * k180PI)

const Vertex GameSpriteVertices[] = {
    {{1, 1, 0}, {0, 0, 0, 1}},
    {{1, 2, 0}, {0, 0, 0, 1}},
    {{2, 1, 0}, {0, 0, 0, 1}},
    {{2, 2, 0}, {0, 0, 0, 1}}
};

const GLubyte GameSpriteIndices[] = {
    0, 1, 2,
    2, 3, 1
};

@implementation GameSprite
@synthesize getPosition, getRotation, getAlpha, getSize;

-(id) initWithSize:(CGSize)size AndPosition:(CGPoint)spritePosition
{
    if (self = [super init]) {

        position = spritePosition;
        getPosition = position;
        rotation = 0;
        getRotation = rotation;
        alpha = 1.0;
        getAlpha = alpha;

        spriteSize = size;
        getSize = spriteSize;

        GLuint VertexShader = [self compileShader:@"VertexShader" withType:GL_VERTEX_SHADER];
        GLuint FragmentShader = [self compileShader:@"FragmentShader" withType:GL_FRAGMENT_SHADER];

        programHandle = glCreateProgram();
        glAttachShader(programHandle, VertexShader);
        glAttachShader(programHandle, FragmentShader);
        glLinkProgram(programHandle);

        glUseProgram(programHandle);

        positionAttrib = glGetAttribLocation(programHandle, "Position");
        colorAttrib = glGetAttribLocation(programHandle, "SourceColor");
        glEnableVertexAttribArray(positionAttrib);
        glEnableVertexAttribArray(colorAttrib);

        modelviewUniform = glGetUniformLocation(programHandle, "Modelview");
    }

    return self;
}

-(id) init 
{
    if (self = [super init]) {
        GLuint VertexShader = [self compileShader:@"VertexShader" withType:GL_VERTEX_SHADER];
        GLuint FragmentShader = [self compileShader:@"FragmentShader" withType:GL_FRAGMENT_SHADER];

        programHandle = glCreateProgram();
        glAttachShader(programHandle, VertexShader);
        glAttachShader(programHandle, FragmentShader);
        glLinkProgram(programHandle);

        glUseProgram(programHandle);

        positionAttrib = glGetAttribLocation(programHandle, "Position");
        colorAttrib = glGetAttribLocation(programHandle, "SourceColor");
        glEnableVertexAttribArray(positionAttrib);
        glEnableVertexAttribArray(colorAttrib);

        GLuint vertexBuffer;
        glGenBuffers(1, &vertexBuffer);
        glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
        glBufferData(GL_ARRAY_BUFFER, sizeof(GameSpriteVertices), GameSpriteVertices, GL_STATIC_DRAW);

        GLuint indexBuffer;
        glGenBuffers(1, &indexBuffer);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
        glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(GameSpriteIndices), GameSpriteIndices, GL_STATIC_DRAW);

        modelviewUniform = glGetUniformLocation(programHandle, "Modelview");

    }
    return self;
}

-(void) render
{
    glEnable (GL_BLEND);
    glBlendFunc (GL_ONE, GL_ONE_MINUS_SRC_ALPHA);

    // Add the position to the square
    Vertex TempVertices[] = {
        {{position.x - spriteSize.width/2, position.y - spriteSize.height/2, 0}, {0, 0, 0, alpha}},
        {{position.x - spriteSize.width/2, position.y + spriteSize.height/2, 0}, {0, 0, 0, alpha}},
        {{position.x + spriteSize.width/2, position.y - spriteSize.height/2, 0}, {0, 0, 0, alpha}},
        {{position.x + spriteSize.width/2, position.y + spriteSize.height/2, 0}, {0, 0, 0, alpha}}
    };

    // Add the rotation to the square
    for (int i = 0; i < sizeof(TempVertices)/sizeof(TempVertices[0]); i++) { 
        CGPoint vertex = CGPointMake(TempVertices[i].Position[0], TempVertices[i].Position[1]);
        TempVertices[i].Position[0] = [self rotatePoint:vertex by:rotation around:position].x;
        TempVertices[i].Position[1] = [self rotatePoint:vertex by:rotation around:position].y;
    }

    const GLubyte TempIndices[] = {
        0, 1, 2,
        2, 3, 1
    };

    GLuint vertexBuffer;
    glGenBuffers(1, &vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(TempVertices), TempVertices, GL_STATIC_DRAW);

    GLuint indexBuffer;
    glGenBuffers(1, &indexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(TempIndices), TempIndices, GL_STATIC_DRAW);

    glVertexAttribPointer(positionAttrib, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), 0);
    glVertexAttribPointer(colorAttrib, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid*) (sizeof(float) * 3));

    glDrawElements(GL_TRIANGLES, sizeof(GameSpriteIndices)/sizeof(GameSpriteIndices[0]), GL_UNSIGNED_BYTE, 0);

    glDisable(GL_BLEND);
}

/*
 Porgrammer access methods
 */

-(void) setPosition:(CGPoint)newPosition
{
    position = newPosition;
    getPosition = position;
}

-(void) setRotation:(float)newRotation 
{
    rotation = newRotation;
    getRotation = rotation;
}

-(void) setAlpha:(float)newAlpha
{
    alpha = newAlpha;
    getAlpha = alpha;
}

/*
 Helper methods
 */
-(GLuint) compileShader:(NSString *)path withType:(GLenum)shaderType 
{
    NSString *shaderPath = [[NSBundle mainBundle] pathForResource:path ofType:@"glsl"];
    NSError *error;

    NSString *shaderString = [NSString stringWithContentsOfFile:shaderPath encoding:NSUTF8StringEncoding error:&error];

    GLuint shaderHandle = glCreateShader(shaderType);

    const char * shaderStringUTF8 = [shaderString UTF8String];    
    int shaderStringLength = [shaderString length];
    glShaderSource(shaderHandle, 1, &shaderStringUTF8, &shaderStringLength);

    glCompileShader(shaderHandle);

    return shaderHandle;
}

-(CGPoint) rotatePoint:(CGPoint)point by:(float)theta around:(CGPoint)origin
{
    theta = degreesToRadians(theta);
    CGPoint newPoint;

    newPoint.x = cosf(theta) * (point.x - origin.x) - sinf(theta) * (point.y - origin.y) + origin.x;
    newPoint.y = sinf(theta) * (point.x - origin.x) + cosf(theta) * (point.y - origin.y) + origin.y;

    return newPoint;
}

@end 
```

# php - zend validate user for a specific controller?

> ID：11642289
> 
> 赞同：0
> 
> 时间：2012-07-25T03:32:23.973
> 
> 标签：php, zend-framework

HI i would like to know how to validate a users for a specific controller, so that we can check that a specific users is authenticate before accessing resources of a controller?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:40:46.533

你应该看看 Zend_Auth 和 Zend_Acl 组件。

```
Zend_Auth is responsible for assigning and managing authentication of the user.

Zend_Acl is responsible for managing different permissions and roles for different resources. 
```

这是解释如何实现 Zend_Auth 的教程。

[http://akrabat.com/zend-auth-tutorial/](http://akrabat.com/zend-auth-tutorial/)

下面的教程解释了 Zend_Auth/Zend_Acl

[http://devzone.zend.com/844/zend_acl-zend_auth-example-scenario/](http://devzone.zend.com/844/zend_acl-zend_auth-example-scenario/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:39:33.547

让我们说对于控制器文件夹中的特定控制器，我们有 CashoutController。在用户访问此控制器之前，我们将使用自定义库对用户进行如下身份验证。

```
<?php
 class CashoutController extends Zc_Controller_Action_User
 {
  public function init()
  {
    /* Initialize action controller here */
    parent::init();
  }
    // rest code goes here
 } 
```

现在我们定义了新的库名 Zc

```
 <?php
   class Zc_Controller_Action_User extends Zc_Controller_Action
{ 
public function init()
{
    parent::init();
    $this->validateAccess();
}

private function validateAccess()
{
    $auth = Zend_Auth::getInstance();

    if (is_null($auth->getIdentity())) {
        $this->_helper->redirector('index', 'index');
    }
}
    } 
```

我们将控制器动作库定义为

```
<?php

class Birdtoldme_Controller_Action extends Zend_Controller_Action
{

 } 
```

希望这对您有所帮助。

# java - Is the returned proxy object of 'Proxy.newProxyInstance()' thread safe in java?

> ID：11642292
> 
> 赞同：2
> 
> 时间：2012-07-25T03:32:39.840
> 
> 标签：java, proxy, thread-safety, jedis

I'm created a proxy class for Jedis, then it can return resource to the pool and mark the broken resource automatically.

```
public class JedisProxy implements InvocationHandler {

    private final JedisPool jedisPool;

    public JedisProxy(JedisPool pool) {
        this.jedisPool = pool;
    }

    public Object invoke(Object proxy, Method m, Object[] args) throws Throwable {

        Object result;
        Jedis jedis = obtainJedis();
        try {
            result = m.invoke(jedis, args);
        } catch (InvocationTargetException e) {
            throw e.getTargetException();
        } catch (Exception e) {
            throw new JedisException("Unexpected proxy invocation exception: " + e.getMessage(), e);
        } finally {
            returnJedis(jedis);
        }
        return result;
    }

    private Jedis obtainJedis() {
        Jedis jedis;
        jedis = jedisPool.getResource();
        return jedis;
    }

    private void returnJedis(Jedis jedis) {
        try {
            if (jedis.isConnected()) {
                jedis.ping();
                jedisPool.returnResource(jedis);
            } else {
                jedisPool.returnBrokenResource(jedis);
            }
        } catch (JedisException e) {
            jedisPool.returnBrokenResource(jedis);
        }
    }
} 
```

then use:

```
JedisPool p = new JedisPool("10.32.16.19", 6379);
JedisCommands jc = (JedisCommands) Proxy.newProxyInstance(Jedis.class.getClassLoader(), Jedis.class.getInterfaces(), new JedisProxy(pool)); 
```

I know that the JedisPool is thread safe.

But is the "jc" object thread safe? Is the proxy object of Proxy.newProxyInstance() thread safe?

I have viewed the source code of Proxy, the proxy object was create by JVM, I'm not familiar with JVM.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:45:02.857

> Proxy.newProxyInstance() 线程的代理对象是否安全？

我不明白这个问题是如何出现的。除了 InvocationHandler 之外，它没有任何状态，并且它是不可变的。问题真的是，你的 InvocationHandler 线程安全吗？

# java - Memcached with Spring

> ID：11642296
> 
> 赞同：4
> 
> 时间：2012-07-25T03:33:28.300
> 
> 标签：java, spring, caching, memcached

I have a Spring based application that uses Spring core, Spring MVC and Spring Data (Mongo) on the server side, and designed as a typical 3-tier application.

I have a list of services, that are typical Spring services/beans that I wish you integrate with memcached to cache some of my service results.

Can someone guide me to the steps to integrate memcached with spring for such an application? A sample/tutorial/blog that gives a step by step process would be just great.

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T05:20:35.640

如果您使用 Spring 3.1，请查看[Spring Cache](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html)抽象。这是在 Spring 应用程序中集成缓存的最简单方法。不幸的是 Spring 不支持开箱即用的 memcached，只支持 ehcache。

据我所知，没有任何提供者可以通过 Spring Cache 将数据存储到 memcached 中。几天后，[Simple Spring Memcached](http://code.google.com/p/simple-spring-memcached/)的下一个版本 3.0.0 将在此支持下发布。同时，您可以尝试最新的快照之一或直接使用 Simple Spring Memcached 2.0.0，而无需 Spring Cache 抽象。

**更新**：带有 Spring Cache 集成的简单 Spring Memcached 3.0.0 已经可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T17:20:22.810

做起来很简单。您可以在**github上查看****3levelmemcache**项目作为示例，它是基于 Spring 的抽象。

# javascript - Javascript 延迟事件

> ID：11642300
> 
> 赞同：4
> 
> 时间：2012-07-25T03:33:48.180
> 
> 标签：javascript, debouncing

我有一个函数`handleScroll`，当窗口的滚动位置发生变化时需要调用它。这是代码

```
$(window).scroll(handleScroll); 
```

但问题是上述代码最终调用`handleScroll`过于频繁。如何修改上述代码，以便仅在用户停止滚动 200 毫秒后才调用 handleScroll？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:38:08.900

```
var timeoutHandle;

$(window).scroll(function(e) {
    if (timeoutHandle) {
        clearTimeout(timeoutHandle);
    }
    timeoutHandle = setTimeout(function() {
        handleScroll(e);
        timeoutHandle = null;
    }, 200);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:38:07.740

使用[underscorejs](http://underscorejs.org/#debounce)库，它可以很简单

```
var debounceid = _.debounce(handleScroll, 200);
$(window).resize(debounceid); 
```

# profiling - Profiling a Play framework application (2.0.2) through VisualVM

> ID：11642309
> 
> 赞同：6
> 
> 时间：2012-07-25T03:35:12.480
> 
> 标签：profiling, playframework-2.0, visualvm

I'm having some serious problems regarding my Play! Applications performance. I already tried to change the server and the data base, but the slowness persists.

Using Firebug to measure my http requests I found out that they are taking around 20 seconds just to start replying.

So my last hope is to use VisualVM to profile my application and find its bottle necks. But I don't know the proper way of passing some arguments like "-Dcom.sun.management.jmxremote" without messing with the global JAVA_OPTS variable.

Thanks again!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T03:24:39.970

看起来[Metrics](http://metrics.codahale.com/manual/core/#man-core-reporters-jmx)会自动处理这个问题。

将以下内容添加到您的 Build.scala 应用程序依赖项中：

```
"com.yammer.metrics" % "metrics-core" % "2.1.2" 
```

并开始检测您的代码。然后使用“play run”启动应用程序——VisualVM 应该显示你的 JVM 进程，你可以直接连接到它（假设你有 VisualVM-MBeans 插件）。检查您是否[至少有 1.3.4](http://visualvm.java.net/)。这是我启动时看到的：

![视觉虚拟机](../Images/1f2976d44125a3e02d1cbc1d073256c7.png)

xsbt.boot.Boot 进程是 Play。

更一般地说，这篇[文章](http://www.baselogic.com/blog/akka-actor-thread-utilization-and-optimization/)在调试 Play 等基于 Akka 的框架时确实很有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-04T10:56:26.670

如果有人需要分析 Play 2.3.x 应用程序：

1.  将您的 JAVA_OPTS 设置放入 ~/.activator/activatorconfig.txt （参见[https://typesafe.com/activator/docs](https://typesafe.com/activator/docs)）：

    ```
    -Dcom.sun.management.jmxremote.port=1234
    -Dcom.sun.management.jmxremote.rmi.port=1234
    -Dcom.sun.management.jmxremote.authenticate=false
    -Dcom.sun.management.jmxremote.ssl=false
    -Djava.rmi.server.hostname=127.0.0.1

    ```

2.  在 VisualVM 中，添加到 localhost:1234 的本地 JMX 连接

# c++ - 如何让项目共享中间 (.obj) 文件？

> ID：11642316
> 
> 赞同：3
> 
> 时间：2012-07-25T03:35:35.387
> 
> 标签：c++, visual-studio-2010, compiler-construction

我有一系列 C++ 解决方案。它们都包含一个通用代码目录。**不仅`#include`如此，它们还单独构建公共源文件。**这是目录结构的示例：

```
code/
    Common/
    ProjectA/
    ProjectB/ 
```

因此`ProjectA`，`ProjectB`两者都包含来自`Common`. 我已将两个项目的中间目录设置为`code/_build/Debug/Obj`.

我曾预计，如果我`ProjectA`先构建，则`ProjectB`不需要从`Common`源代码重建中间文件。这没有发生。`ProjectB`正在重建那些目标文件，如果我`ProjectA`再次构建，它也会重建它们。

如果目标文件不是由当前正在编译的项目构建的，就好像会触发条件重建。这是真的？

我知道我可以从公共代码中创建一个库，但这不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:38:16.560

> 如果目标文件不是由当前正在编译的项目构建的，就好像会触发条件重建。这是真的？

是的。每个项目都维护自己单独的构建文件列表。每个项目都将这些文件与其他对象分开构建，因为每个项目*还*维护自己的单独构建*选项*。每个项目都与所有其他项目分开，即使在同一个解决方案中也是如此。

你描述的问题以前也遇到过。其实很久以前。它的解决方案过去并且仍然非常简单：创建第三个项目，该项目创建一个公共代码的静态库，该库由其他两个项目链接。事实上，静态库*正是*出于这个原因而存在的。

如果情况禁止您使用旨在解决这个确切问题的解决方案，那么您有两种选择：

1.  更改这些情况，以便您可以使用该解决方案。
2.  接受您的情况导致的不必要的更长构建时间。

# c - 挂钩 mmap 系统提供实时类型转换？

> ID：11642318
> 
> 赞同：0
> 
> 时间：2012-07-25T03:35:58.017
> 
> 标签：c, linux, mmap

我正在处理一些我想记忆映射一些包含数字数据的大文件的东西。问题是数据可以是多种格式，包括实数字节/短/整数/长/浮点/双精度和复数字节/短/整数/长/浮点/双精度。自然而然地处理所有这些类型很快就会变得笨拙，所以我正在考虑实现一个内存映射接口，可以为用户进行实时类型转换。

我真的很喜欢映射文件的想法，这样你就可以在内存中得到一个指针，做你需要的任何事情，然后取消映射它。不需要缓冲学或其他任何东西。因此，读取数据并为我进行类型转换的函数将大大减少这一点。

我在想我可以内存映射正在操作的文件，然后同时映射一个匿名文件，并*以某种方式*捕获页面获取/存储并按需进行类型转换。我将在 64 位上工作，所以在这些情况下这会给你一个 63 位的地址空间，但是哦，好吧。

有谁知道这种 mmap 挂钩是否可行，如果可以，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:57:16.170

阅读部分对我来说听起来有些可行。我没有这方面的经验，但原则上让信号处理程序获取您的数据并在您访问用户呈现的缓冲区中尚不存在的页面时立即转换它应该是可能的。但可能这样的事情效率很低，你会在每个页面上都有一个上下文切换。

我猜反过来会更难。默认情况下，写入是异步的，因此很难捕获它们。

因此，您想要的“一半”可能是可能的：始终以用户想要的格式将数据写入新文件，但在读取此类文件时会即时自动翻译。

但我认为，对您来说更重要的是，您对不同的存储表示具有清晰的语义，并且正确地封装了数据项的读取或写入。如果您有这样的界面（例如“将元素存储在具有类型`E`的位置”），您可以轻松触发与目标格式相关的转换。`i``T`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:09:01.723

是的（-ish）。您可以创建不可访问`mmap`的区域。每当有人试图触摸一个时，`SIGSEGV`通过修复其权限、填充和恢复来处理引发的问题。

```
long *long_view =
   mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);
double *double_view =
   mmap(NULL, 4096, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);

static void on_segv(int signum, siginfo_t *info, void *data) {
    void *addr = info->si_addr;
    if ((uintptr_t)addr - (uintptr_t)long_view < 4096) {
        mprotect(long_view, 4096, PROT_READ|PROT_WRITE);
        /* translate from double_view to long_view */
        mprotect(double_view, 4096, PROT_NONE);
    } else if ((uintptr_t)addr - (uintptr_t)double_view < 4096) {
        mprotect(double_view, 4096, PROT_READ|PROT_WRITE);
        /* translate from long_view to long_view */
        mprotect(double_view, 4096, PROT_NONE);
    } else {
        abort();
    }
}

struct sigaction segv_action = {
    .sa_sigaction = on_segv,
    .sa_flags = SA_RESTART | SA_SIGINFO,
};
sigaction(SIGSEGV, &segv_action, NULL);

long_view[0] = 42;
/* hopefully, this will trigger the code to fixup double_view and resume */
printf("%g\n", double_view[0]); 
```

（未经测试，但这些方面的东西应该可以工作......）

如果您不想一次填满整个页面，我认为这仍然可行...第三个参数可以转换为 a `ucontext_t *`，您可以使用它来解码正在执行的指令并将其修复，就好像它已经执行了预期的操作，同时留下内存`PROT_NONE`以捕获进一步的访问......但它会慢很多，因为你要捕获每个访问，而不仅仅是第一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:55:17.393

您是否有理由不使用访问器功能？

有两种基本情况：结构化数据和纯数据。结构化数据具有混合数据类型，纯数据只有您列出的一种格式。如果您可以为每种使用的类型（列出的所有类型总共 28 或 30 个字节）存储一个原型值（具有不同的字节组件），您还可以支持透明的字节序校正——复杂类型只是对，并且具有相同的字节顺序作为基本组件）。我已经使用这种方法来存储和访问来自分子动力学模拟的原子数据，并且在实践中非常有效——这是我测试过的最快的便携式方法。

我会使用一个结构来描述“文件”（支持文件、内存映射、字节顺序和数据格式，如果是纯数据）：

```
struct file {
    int            descriptor;
    size_t         size;
    unsigned char *data;
    unsigned int   endian;   /* Relative to current architecture */
    unsigned int   format;   /* endian | format, for unstructured files */
};

#define  ENDIAN_I16_MASK  0x0001
#define  ENDIAN_I16_12    0x0000
#define  ENDIAN_I16_21    0x0001

#define  ENDIAN_I32_MASK  0x0006
#define  ENDIAN_I32_1234  0x0000
#define  ENDIAN_I32_4321  0x0002
#define  ENDIAN_I32_2143  0x0004
#define  ENDIAN_I32_3412  0x0006

#define  ENDIAN_I64_MASK  0x0018
#define  ENDIAN_I64_1234  0x0000
#define  ENDIAN_I64_4321  0x0008
#define  ENDIAN_I64_2143  0x0010
#define  ENDIAN_I64_3412  0x0018

#define  ENDIAN_F16_MASK  0x0020
#define  ENDIAN_F16_12    0x0000
#define  ENDIAN_F16_21    0x0020

#define  ENDIAN_F32_MASK  0x00C0
#define  ENDIAN_F32_1234  0x0000
#define  ENDIAN_F32_4321  0x0040
#define  ENDIAN_F32_2143  0x0080
#define  ENDIAN_F32_3412  0x00C0

#define  ENDIAN_F64_MASK  0x0300
#define  ENDIAN_F64_1234  0x0000
#define  ENDIAN_F64_4321  0x0100
#define  ENDIAN_F64_2143  0x0200
#define  ENDIAN_F64_3412  0x0300

#define  FORMAT_MASK      0xF000

#define  FORMAT_I8        0x1000
#define  FORMAT_I16       0x2000
#define  FORMAT_I32       0x3000
#define  FORMAT_I64       0x4000

#define  FORMAT_P8        0x5000   /* I8 pair ("complex I8") */
#define  FORMAT_P16       0x6000   /* I16 pair ("complex I16") */
#define  FORMAT_P32       0x7000   /* I32 pair ("complex I32") */
#define  FORMAT_P64       0x8000   /* I64 pair ("complex I64") */

#define  FORMAT_R16       0x9000   /* BINARY16 IEEE-754 floating-point */
#define  FORMAT_R32       0xA000   /* BINARY32 IEEE-754 floating-point */
#define  FORMAT_R64       0xB000   /* BINARY64 IEEE-754 floating-point */

#define  FORMAT_C16       0xC000   /* BINARY16 IEEE-754 complex */
#define  FORMAT_C32       0xD000   /* BINARY32 IEEE-754 complex */
#define  FORMAT_C64       0xE000   /* BINARY64 IEEE-754 complex */ 
```

访问器功能可以以各种方式实现。在 Linux 中，标记`static inline`的函数也与宏一样快。

由于该`double`类型不完全涵盖 64 位整数类型（因为尾数只有 52 位），我将定义一个数字结构，

```
#include <stdint.h>

struct number {
    int64_t   ireal;
    int64_t   iimag;
    double    freal;
    double    fimag;
}; 
```

并让访问器函数始终填写四个字段。使用 GCC，您还可以创建一个宏来使用自动类型检测定义结构编号：

```
#define  Number(x) \
    ( __builtin_types_compatible_p(__typeof__ (x), double)          ? number_double(x) : \
      __builtin_types_compatible_p(__typeof__ (x), _Complex double) ? number_complex_double(x) : \
      __builtin_types_compatible_p(__typeof__ (x), _Complex long)   ? number_complex_long(x) : \
                                                                      number_int64(x) )

static inline struct number number_int64(const int64_t  x)
{
    return (struct number){ .ireal = (int64_t)x,
                            .iimag = 0,
                            .freal = (double)x,
                            .fimag = 0.0 };
}

static inline struct number number_double(const double  x)
{
    return (struct number){ .ireal = (int64_t)x,
                            .iimag = 0,
                            .freal = x,
                            .fimag = 0.0 };
}

static inline struct number number_complex_long(const _Complex long  x)
{
    return (struct number){ .ireal = (int64_t)(__real__ (x)),
                            .iimag = (int64_t)(__imag__ (x)),
                            .freal = (double)(__real__ (x)),
                            .fimag = (double)(__imag__ (x)) };
}

static inline struct number number_complex_double(const _Complex double  x)
{
    return (struct number){ .ireal = (int64_t)(__real__ (x)),
                            .iimag = (int64_t)(__imag__ (x)),
                            .freal = __real__ (x),
                            .fimag = __imag__ (x) };
} 
```

这意味着只要是整数或浮点实数或复数类型，就可以`Number(value)`构造一个正确的类型。`struct number``value`

请注意整数和浮点组件如何设置为相同的值，只要类型转换允许。（对于数量级非常大的整数，浮点值将是一个近似值。`(int64_t)round(...)`在设置整数分量时，您还可以使用舍入而不是截断浮点参数。

您将需要四个访问器函数：两个用于结构化数据，两个用于非结构化数据。对于非结构化（纯）数据：

```
static inline struct number file_get_number(const struct file *const  file,
                                            const size_t              offset)
{
    ...
}

static inline void file_set_number(const struct file *const  file,
                                   const size_t              offset,
                                   const struct number       number)
{
    ...
} 
```

注意`offset`上面不是字节偏移，而是数字的索引。对于结构化文件，您需要使用字节偏移量，并添加一个指定文件中使用的数字格式的参数：

```
static inline struct number file_get(const struct file *const  file,
                                     const size_t              byteoffset,
                                     const unsigned int        format)
{
    ...
}

static inline void file_set(const struct file *const  file,
                            const size_t              byteoffset,
                            const unsigned int        format,
                            const struct number       number)
{
    ...
} 
```

我省略的函数体中所需的转换 (...) 非常简单。您也可以采取一些技巧进行优化。例如，我喜欢调整字节序常数，使低位始终是字节交换（ab -> ba，abcd -> badc，abcdefgh -> badcfehg），高位是短交换（abcd -> cdab , abcdefgh->cdabghef)。如果您想完全确定，您可能需要第三位来表示 64 位值（abcdefgh -> efghabcd）。

函数体中的 if 或 case 语句确实会导致很小的访问开销，但它应该足够小，可以在实践中忽略。避免它的所有方法都会导致更复杂的代码。（为了获得最大吞吐量，您需要对所有访问变体进行开放编码，并`__builtin_types_compatible_p()`在函数或宏中使用以确定要使用的正确方法。如果考虑字节序转换，这意味着很多函数。我相信非常小的访问开销——每次访问最多几个时钟——更可取。（无论如何，我所有的测试都是 I/O 绑定的，即使是 200 Mb/s，所以对我来说开销完全无关紧要。）

通常，对于使用原型值的自动字节顺序转换，您只需测试该类型的每个可能的转换。只要原型值的每个字节分量都是唯一的，那么只有一次转换会产生正确的预期值。在某些架构上，整数和浮点值具有不同的字节序；这就是为什么`ENDIAN_`常量分别用于每种类型和大小的原因。

假设您已经实现了上述所有内容，那么在您的应用程序代码中，数据访问将类似于

```
struct file    f;

/* Set first number to zero. */
file_set_number(&f, 0, Number(0));

/* Set second number according to variable v,
 * which can be just about any numeric type. */
file_set_number(&f, 1, Number(v)); 
```

希望这个对你有帮助。

# php - 使用 AJAX 提交表单不起作用

> ID：11642327
> 
> 赞同：0
> 
> 时间：2012-07-25T03:37:06.013
> 
> 标签：php, javascript, ajax, jquery

PHP/Ajax 新手在这里...我正在尝试通过 Ajax 将 textarea 的内容保存到 MySQL 中。虽然数据被正确保存，但 Ajax 并不能正常工作。基本上，与 Ajax 不同，页面在数据保存后会“重新加载/刷新”。你能告诉我我做错了什么吗？

索引.html：

```
<form action="save.php" method="post" id="source-form">
<span><input type="submit" value="Save" /></span>
<div>
<textarea id="editor" name="editor" >

</textarea>
</div>
</form> 
```

javascript:

```
 $(document).ready(function() {

    $("#source-form").submit(function(){
    $.ajax({
        url:"save.php",
        type:"post",
        data:$(this).serialize(),
        success: alert('saved');
    });
}); 
```

保存.php

```
<?php

// connect to the database
include('connect-db.php'); 

// get form data, making sure it is valid
$submit_date = date('Y-m-d H:i:s');
$content = mysql_real_escape_string(htmlspecialchars($_POST['editor']));

//build query
mysql_query("INSERT source SET submit_date='$submit_date',content='$content'")
or die(mysql_error());

header('Location: index.html');

?> 
```

对此的任何帮助表示赞赏。谢谢你。

**编辑：** 对于遇到相同问题或类似问题的人......这是一个很好的解决方案：http: [//jquery.malsup.com/form/#getting-started](http://jquery.malsup.com/form/#getting-started)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:57:49.650

改变你的`<form action="save.php" method="post" id="source-form">`

至`<form method="post" id="source-form">`

删除您已经在 ajax 中声明您的网址的操作

删除`header('Location: index.html');`，因为你不应该重定向，因为你正在使用 ajax。请记住，如果您使用的是 ajax，则不需要刷新页面，只需让它收到结果成功的确认

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:58:02.910

如果您只是将表单用于 ajax 提交，我建议您从 HTML 中完全删除表单并使用 click 事件。我已将 HTML 中的内容精简到最低限度：

**HTML**

```
<input id="save-text" type="submit" value="Save" />
<textarea id="editor" name="editor" ></textarea> 
```

**JavaScript**

```
$(document).ready(function() {

    $("#save-text").click(function(){
    $.ajax({
        url:"save.php",
        type:"post",
        data: $("#editor").serialize(),
        success: alert('saved');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:39:33.743

添加一个`return false;`到论坛提交，以便取消表单提交：

```
$("#source-form").submit(function(){
    $.ajax({
        url:"save.php",
        type:"post",
        data:$(this).serialize(),
        success: alert('saved');
    });

    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T03:40:22.980

您必须停止提交按钮的默认行为（表单发布）。否则将再次提交表单，您将再次看到页面加载。您使用该[`preventDefault`](http://api.jquery.com/event.preventDefault/)功能

```
$("#source-form").submit(function(e){
     e.preventDefault();
     $.ajax({
        url:"save.php",
        type:"post",
        data:$(this).serialize(),
        success: alert('saved');
     });
 }); 
```

# linux - Linux 内置驱动程序加载顺序是什么？

> ID：11642330
> 
> 赞同：27
> 
> 时间：2012-07-25T03:37:37.743
> 
> 标签：linux, linux-kernel, linux-device-driver

我们如何自定义内置驱动加载顺序（让一些内置驱动模块先加载，依赖模块后加载）？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-25T08:34:30.963

内置驱动程序不会被*加载*，因此是内置的。它们的初始化函数被调用，驱动程序在内核自行设置时被激活。这些 init 函数在`init/main.c::do_initcalls()`. 所有的 init 调用都按级别分类，定义在`initcall_levels`和`include/linux/init.h`

这些级别是链接描述文件 ( `arch/*/kernel/vmlinux.lds.*`) 中定义的实际符号。在内核编译时，链接器收集所有标记为`module_init()`or other的函数`*_initcall()`，按级别分类，将同一级别中的所有函数放在同一位置，并像函数指针数组一样创建。

do_initcall_level() 在运行时所做的是调用数组中指针指向的每个函数。do_initcall_level中除了levels之外没有调用策略，但是数组中的顺序是在链接时间决定的。

所以，现在你可以看到驱动的启动顺序在链接时间是固定的，但是你能做什么呢？

1.  将您的 init 函数置于更高级别，或
2.  将您的设备驱动程序放在更高的位置`Makefile`

如果您已阅读上述内容，则第一个很清楚。即）如果合适，请改用 early_initcall() 。

第二个需要更多解释。顺序的原因`Makefile`是当前内核构建系统如何工作以及链接器如何工作。长话短说，构建系统将所有目标文件放入`obj-y`并将它们链接在一起。它高度依赖于环境，但链接器很有可能将第一个目标文件放在`obj-y`较低的地址中，因此，更早地被调用。

如果您只是希望您的驱动程序比同一目录中的其他驱动程序更早被调用，这是最简单的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T06:42:20.893

`depmod`检查每个模块导出和需要的符号，并对它们进行拓扑排序，以便`modprobe`以后以正确的顺序加载模块。从您希望依赖的模块中获取符号就足以让它做正确的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:55:42.857

正确的模块顺序和依赖关系由[modprobe](http://en.wikipedia.org/wiki/Modprobe)处理，即使在[initrd](http://en.wikipedia.org/wiki/Initrd)中也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-25T06:05:06.550

最近我遇到了这个问题，我的充电器驱动程序依赖于 ADC 驱动程序，因此在加载 ADC 驱动程序之前，充电器驱动程序已加载并检查 DTS 文件中定义的 adc phandle，并且必须由 ADC 驱动程序初始化。它通过更改驱动程序/ Makefile 中的模块顺序得到解决

# hibernate - 如何使用 JPA 1 映射和持久化树

> ID：11642331
> 
> 赞同：2
> 
> 时间：2012-07-25T03:37:55.910
> 
> 标签：hibernate, jakarta-ee, jpa

我有一个类似于以下内容的数据库表：

```
Person 
ID | ParentID | Name 
```

每个人都有一个父母（只有 1 个）。每个人可能有 N 个孩子。

我的问题是如何使用 JPA 1 和 Hibernate 在实体中正确映射它。我的目标是只有 1 个 Java 对象（我的祖父母），其中的所有子对象都正确填充。当我坚持我的祖父母时，我希望所有孩子也能正确坚持。

我目前实现的是这样的：

```
 @ManyToOne()
 @JoinColumn(name="PARENTID")
 private Person parent;

 @OneToMany(mappedBy = "parent", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
 private List<Person> children; 
```

当我坚持我的祖父母时，每个人都被正确地添加到我的数据库中，但 PARENTID 列是 NULL，这是不正确的。

如何正确映射它以便 JPA/Hibernate 正确设置 PARENTID？

# java - 如何将maven jar引用到jsp

> ID：11642332
> 
> 赞同：0
> 
> 时间：2012-07-25T03:37:59.687
> 
> 标签：java, spring-mvc, maven-2, extjs4

我在 maven 依赖项下有一个 ExtJS4 jar 文件（即使用 pom 下载的 jar）。现在我需要在 jsp 页面中使用这个 extjs4 jar 文件。我该怎么做呢？我需要通过 web.xml 文件中的 servlet 映射这个 jar 吗？任何帮助，将不胜感激。如果可能的话，任何人都可以提供关于应该添加什么的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:11:17.000

从本地 maven 存储库（例如，在 C:\Documents and Settings\User.m2\repository 下）复制 extjs4 jar 并将其添加到您的项目中。

# python - Pycrypto：递增 AES 计数器模式

> ID：11642337
> 
> 赞同：1
> 
> 时间：2012-07-25T03:38:30.350
> 
> 标签：python, aes, pycrypto

我真的很困惑如何使用计数器模式在 pycrypto 中进行 AES 解密。据我了解这个过程，如果我从一个已知的 IV 开始解密第一个块，那么对于每个连续的块，我必须增加 IV。但我不知道如何做到这一点。

另外，我对 python 完全陌生，你会很容易看到。我的问题在于我如何实现我的课程以及我如何从解密器中调用它。

这是我迄今为止编写的代码：

```
class IVCounter(object):
    def incrIV(self):
        return self[:15] + chr(ord(self[15:]) + 1)

def decryptCTR(key, ciphertext):

    #convert the key into a 16 byte string
    key = array.array('B', key.decode("hex")).tostring()

    #convert the iv into a 16 byte string
    iv = array.array('B', iv.decode("hex")).tostring()

    print AES.new(key, mode, counter=IVCounter.incrIV(iv)).decrypt(ciphertext)
    return 
```

这是我得到的错误：

> TypeError：必须使用 IVCounter 实例作为第一个参数调用未绑定的方法 incrIV()（改为获取 str 实例）

无论我尝试什么，我都无法让它工作。有人可以帮我理顺吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:31:17.960

```
class IVCounter(object):
    @staticmethod
    def incrIV(arry):
        return arry[:15] + chr(ord(arry[15:]) + 1) 
```

它在抱怨，因为它希望第一个参数是一个实例。`staticmethod`用装饰器把它关掉。

# iphone - 如何检查 NSMutableArray 中包含的字符串？

> ID：11642339
> 
> 赞同：-2
> 
> 时间：2012-07-25T03:38:32.530
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

在我的应用程序中，我有一个 MutableArray 是这样的，

```
Idlist:(
1,
2,
3
) 
```

我有一个字符串 IdData。IdData 中的值为 2。

现在我想检查我的 MutableArray 中包含的 Itemid。

我试过这个，

```
 if ([Idlist containsObject:IdData])
 {
   NSLog(@"Item is in List"); 
 }
 else
 {
   NSLog(@"Item is not in List"); 
 } 
```

但每次我要去 else 循环。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:19:27.430

使用这样的代码来识别数组中的 NSString：

```
 NSMutableArray *arr = [[NSMutableArray alloc] init];
    [arr addObject:@"Best"];
    [arr addObject:@"Good"];
    [arr addObject:[NSNumber  numberWithInt:3]];

    for(NSString *str in arr)
    {
        if(str && [str isKindOfClass:[NSString class]])
        {
            NSLog(@"String: %@\n",str);    
        }
    } 
```

# java - 数组列表对象

> ID：11642341
> 
> 赞同：0
> 
> 时间：2012-07-25T03:39:13.013
> 
> 标签：java, arraylist

我正在使用 ArrayList 对象创建一个员工类型的员工对象...我实现了这个类，它似乎可以工作，但我的问题是，当我将员工插入 ArrayList 时，它会自动不插入它。这是为什么？

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author
 */

import java.util.*;

class Employee {

    private String fname;
    private String lname;

    public Employee (String fname, String lname){
        this.fname = fname;
        this.lname = lname;
    }

    public Employee (){
    }

    public String getLastName(){
            return this.lname;
    }

    public void setLastName(String lname){
            this.lname = lname;
    }

    public String getFirstName(){
        return this.fname;
    }

    public void setFirstName (String fname){
        this.fname = fname;
    }

    public String toString(){
        return this.getClass().getName() +" [ "
                + this.fname + " "
                + this.lname + " ]\n ";
    }

    public Object clone(){ //Object is used as a template
        Employee emp;
        emp = new Employee(this.fname, this.lname);

        return emp;
    }
}

//start of main 
 public class main
 {
    static Scanner input = new Scanner(System.in);

    public static final int MAX_EMPLOYEES = 10;

    public static void main(String[] args) {

        String fname, lname;
        int num;

        System.out.print("Enter the number of employees in your system: ");
        num = input.nextInt();

        ArrayList<Employee> emp = new ArrayList<Employee>(num);

        System.out.print("Enter the first name: ");
        fname = input.next();
        System.out.println();

        System.out.print("Enter the last name: ");
        lname = input.next();
        System.out.println();

        for (int x = 1; x < num; x++)
        {
            System.out.print("Enter the first name: ");
            fname = input.next();
            System.out.println();

            System.out.print("Enter the last name: ");
            lname = input.next();
            System.out.println();

            emp.add(new Employee(fname,lname));
        }

        num = emp.size();
        System.out.println(num);
        System.out.println(emp);

    }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T03:44:39.017

添加：

```
emp.add(new Employee(fname,lname)); 
```

就在`for`循环之前或将循环条件重写`for`为：

```
for (int x = 0; x < num; x++) 
```

并摆脱

```
System.out.print("Enter the first name: ");
fname = input.next();
System.out.println();

System.out.print("Enter the last name: ");
lname = input.next();
System.out.println(); 
```

在`for`循环之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:48:05.770

您的循环运行时间比所需时间少 1。

```
for(int i=0;i<num;i++){

```

这应该解决它。

# android - 删除操作栏图标但保留向上按钮

> ID：11642342
> 
> 赞同：2
> 
> 时间：2012-07-25T03:39:20.083
> 
> 标签：android, android-3.0-honeycomb, android-actionbar

我正在开发一个在蜂窝和冰淇淋三明治上运行的应用程序。我希望我的操作栏没有图标，但保留“向上/主页”按钮。

我用了：

```
getActionBar().setDisplayOptions(0, ActionBar.DISPLAY_SHOW_HOME); 
```

这将删除操作栏图标，但保留冰淇淋三明治上的“向上”按钮。但是在蜂窝上，它也删除了“向上”按钮。

蜂窝上有没有办法让我保留“向上”按钮但摆脱图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:38:50.250

此代码将删除菜单图标并将指示器保持在其附近：

```
<style name="MyTheme" parent="Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/MyActionBarStyle</item>
</style>    

<style name="MyActionBarStyle" parent="Widget.Sherlock.Light.ActionBar">
    <item name="android:icon">@android:color/transparent</item>
    <item name="icon">@android:color/transparent</item>
</style> 
```

# ruby-on-rails - Rails Hashie 输出

> ID：11642344
> 
> 赞同：0
> 
> 时间：2012-07-25T03:39:29.357
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是我的问题，我从请求中获取一个变量并将其存储在@response 中。

然后我调试响应，调试（@response），并得到这个输出：

```
--- !ruby/hash:Hashie::Mash
results:
- !ruby/hash:Hashie::Mash
  id: '33098557'
  firstName: john
  lastName: star
  relationship: self
  photo: https://foursquare.com/img/blank_boy.png
  tips: !ruby/hash:Hashie::Mash
    count: 0
  lists: !ruby/hash:Hashie::Mash
    groups:
    - !ruby/hash:Hashie::Mash
      type: created
      count: 1
      items: []
  gender: male
  homeCity: mexico
  bio: ''
  contact: !ruby/hash:Hashie::Mash
    email: jhon@hotmail.com
unmatched: !ruby/hash:Hashie::Mash
  email: [] 
```

我可以通过输入@response.results 来获得结果，并对此进行调试：

```
---
- !ruby/hash:Hashie::Mash
  id: '33098557'
  firstName: john
  lastName: star
  relationship: self
  photo: https://foursquare.com/img/blank_boy.png
  tips: !ruby/hash:Hashie::Mash
    count: 0
  lists: !ruby/hash:Hashie::Mash
    groups:
    - !ruby/hash:Hashie::Mash
      type: created
      count: 1
      items: []
  gender: male
  homeCity: mexico
  bio: ''
  contact: !ruby/hash:Hashie::Mash
    email: jhon@hotmail.com 
```

但我无法获得电子邮件或名字等内部属性，我如何访问这些属性？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T03:48:04.340

`@response`是 的一个实例`Hashie::Mash`，而`@response.results`是 的一个实例`Array`，因此您需要访问您希望接收结果的数组的索引。

```
@response.results[0].firstName
@response.results[0].contact.email 
```

将分别返回第一个结果的`firstName`值`email`。您*可以*使用

```
@response.results.each do |result|
  result.firstName
  result.contact.email
end 
```

如果总是只有一个`result`，您也可以使用 Ruby 的`.first`方法访问它

```
@response.results.first.email
# ... 
```

# java - 扩展 Selenium WebDriver WebElement？

> ID：11642348
> 
> 赞同：13
> 
> 时间：2012-07-25T03:39:55.863
> 
> 标签：java, selenium, webdriver

我正在遵循 Selenium 建议的页面对象模式，但我将如何为页面创建更专业的 WebElement。具体来说，我们的页面上有表格，我编写了一些辅助函数来获取表格的特定行、返回表格的内容等。

目前，这是我创建的具有表的页面对象的片段：

```
public class PermissionsPage  {

    @FindBy(id = "studyPermissionsTable")
    private WebElement permissionTable;

    @FindBy(id = "studyPermissionAddPermission")
    private WebElement addPermissionButton;

    ... 

} 
```

所以，我想做的是让permissionsTable 成为一个更加自定义的WebElement，它具有我之前提到的一些方法。

例如：

```
public class TableWebElement extends WebElement {
    WebElement table;
    // a WebDriver needs to come into play here too I think

    public List<Map<String, String>> getTableData() {
        // code to do this
    }

    public int getTableSize() {
        // code to do this
    }

    public WebElement getElementFromTable(String id) {
        // code to do this
    }
} 
```

我希望这是有道理的，我试图解释。我想我正在寻找的是一种让这个自定义 WebElement 执行一些特定于表的额外内容的方法。将此自定义元素添加到页面，并利用 Selenium 根据注释将 web 元素连接到页面的方式。

可能吗？如果是这样，有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-07T19:38:12.193

我创建了一个结合了所有 WebDriver 接口的接口：

```
public interface Element extends WebElement, WrapsElement, Locatable {} 
```

它只是用来包装 WebElements 在包装元素时可以做的所有事情。

然后是一个实现：

```
public class ElementImpl implements Element {

    private final WebElement element;

    public ElementImpl(final WebElement element) {
        this.element = element;
    }

    @Override
    public void click() {
        element.click();
    }

    @Override
    public void sendKeys(CharSequence... keysToSend) {
        element.sendKeys(keysToSend);
    }

    // And so on, delegates all the way down...

} 
```

然后，例如一个复选框：

```
public class CheckBox extends ElementImpl {

    public CheckBox(WebElement element) {
        super(element);
    }

    public void toggle() {
        getWrappedElement().click();
    }

    public void check() {
        if (!isChecked()) {
            toggle();
        }
    }

    public void uncheck() {
        if (isChecked()) {
            toggle();
        }
    }

    public boolean isChecked() {
        return getWrappedElement().isSelected();
    }
} 
```

在我的脚本中使用它时：

```
CheckBox cb = new CheckBox(element);
cb.uncheck(); 
```

我还想出了一种包装`Element`类的方法。您必须创建一些工厂来替换内置的`PageFactory`，但这是可行的，并且提供了很大的灵活性。

我已经在我的网站上记录了这个过程：

*   [包装 WebElement：第 1 部分](http://elisarver.com/2012/12/09/wrapping-webelement-1/)
*   [包装 WebElement：第 2 部分](http://elisarver.com/2012/12/10/wrapping-webelement-2/)

我还有一个名为 selophane 的项目，它的灵感来自这个问题和其他问题：[selophane](https://github.com/elisarver/selophane)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-04T18:35:48.140

您可以使用[WebDriver Extensions](https://github.com/webdriverextensions/webdriverextensions)框架创建自定义 WebElements，该框架提供了实现 WebElement 接口的 WebComponent 类

创建您的自定义 WebElement

```
public class Table extends WebComponent {
    @FindBy(tagName = "tr")
    List<Row> rows;

    public Row getRow(int row) {
        return rows.get(row - 1);
    }

    public int getTableSize() {
        return rows.size();
    }

    public static class Row extends WebComponent {
        @FindBy(tagName = "td")
        List<WebElement> columns;

        public WebElement getCell(int column) {
            return columns.get(column - 1);
        }
    }
} 
```

...然后使用 @FindBy 注释将其添加到您的 PageObject 中，并在调用 PageFactory.initElements 方法时使用 WebDriverExtensionFieldDecorator

```
public class PermissionPage {
    public PermissionPage(WebDriver driver) {
        PageFactory.initElements(new WebDriverExtensionFieldDecorator(driver), this);
    }

    @FindBy(id = "studyPermissionsTable")
    public Table permissionTable;

    @FindBy(id = "studyPermissionAddPermission")
    public WebElement addPermissionButton;
} 
```

...然后在您的测试中使用它

```
public class PermissionPageTest {
    @Test
    public void exampleTest() {
        WebDriver driver = new FirefoxDriver();
        PermissionPage permissionPage = new PermissionPage(driver);

        driver.get("http://www.url-to-permission-page.com");
        assertEquals(25, permissionPage.permissionTable.getTableSize());
        assertEquals("READ", permissionPage.permissionTable.getRow(2).getCell(1).getText());
        assertEquals("WRITE", permissionPage.permissionTable.getRow(2).getCell(2).getText());
        assertEquals("EXECUTE", permissionPage.permissionTable.getRow(2).getCell(3).getText());
    }
} 
```

甚至更好地使用[WebDriver Extensions](https://github.com/webdriverextensions/webdriverextensions) PageObject 实现

```
public class PermissionPage extends WebPage {
    @FindBy(id = "studyPermissionsTable")
    public Table permissionTable;

    @FindBy(id = "studyPermissionAddPermission")
    public WebElement addPermissionButton;

    @Override
    public void open(Object... arguments) {
        open("http://www.url-to-permission-page.com");
        assertIsOpen();
    }

    @Override
    public void assertIsOpen(Object... arguments) throws AssertionError {
        assertIsDisabled(permissionTable);
        assertIsDisabled(addPermissionButton);
    }
} 
```

和具有 WebElements 的静态断言方法的 JUnitRunner

```
import static com.github.webdriverextensions.Bot.*;

@RunWith(WebDriverRunner.class)
public class PermissionPageTest {

    PermissionPage permissionPage;

    @Test
    @Firefox
    public void exampleTest() {
        open(permissionPage);
        assertSizeEquals(25, permissionPage.permissionTable.rows);
        assertTextEquals("READ", permissionPage.permissionTable.getRow(2).getCell(1));
        assertTextEquals("WRITE", permissionPage.permissionTable.getRow(2).getCell(2));
        assertTextEquals("EXECUTE", permissionPage.permissionTable.getRow(2).getCell(3));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:03:47.480

作为对此的跟进，这就是我最终要做的事情（以防其他人遇到同样的问题）。下面是我作为 WebElement 的包装器创建的类的片段：

```
public class CustomTable {

private WebDriver driver;
private WebElement tableWebElement;

public CustomTable(WebElement table, WebDriver driver) {
    this.driver = driver;
    tableWebElement = table;
}

public WebElement getTableWebElement() {
    return tableWebElement;
}

public List<WebElement> getTableRows() {
    String id = tableWebElement.getAttribute("id");
    return driver.findElements(By.xpath("//*[@id='" + id + "']/tbody/tr"));
}

public List<WebElement> getTableHeader() {
    String id = tableWebElement.getAttribute("id");
    return tableWebElement.findElements(By.xpath("//*[@id='" + id + "']/thead/tr/th"));
}   
.... more utility functions here
} 
```

然后我在通过引用它创建的任何页面中使用它，如下所示：

```
public class TestPage {

@FindBy(id = "testTable")
private WebElement myTestTable;

/**
 * @return the myTestTable
 */
public CustomTable getBrowserTable() {
    return new CustomTable(myTestTable, getDriver());
} 
```

我唯一不喜欢的是，当页面想要获取表格时，它会创建一个“新”表格。我这样做是为了避免在更新表中的数据（即更新单元格、添加行、删除行）时发生 StaleReferenceExeptions。如果有人对我如何避免在每次请求时都创建新实例有任何建议，而是返回更新后的 WebElement，那就太好了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T09:26:58.373

旁注：`WebElement`不是类，它的**接口**意味着你的类看起来更像这样：

```
public class TableWebElement implements WebElement { 
```

但在这种情况下，您**必须**实现WebDriver 中的*所有*方法。而且有点矫枉过正。

这是我这样做的方法 - 我完全摆脱了 selenium 提出的 PageObjects 建议，并通过拥有自己的课程“重新发明了轮子”。我有整个应用程序的一个类：

```
public class WebUI{
  private WebDriver driver;    
  private WebElement permissionTable;   

   public WebUI(){
      driver = new firefoxDriver();
   }

  public WebDriver getDriver(){
     return driver;
  }

  public WebElement getPermissionTable(){
     return permissionTable;
  }

  public TableWebElement getTable(){
     permissionTable = driver.findElement(By.id("studyPermissionsTable"));
     return new TableWebElement(this);
  }
} 
```

然后我有我的助手类

```
public class TableWebElement{
  private WebUI webUI;

 public TableWebElement(WebUI wUI){
    this.webUI = wUI;
 }

 public int getTableSize() {
    // because I dont know exactly what are you trying to achieve just few hints
    // this is how you get to the WebDriver:
    WebElement element = webUI.getDriver().findElement(By.id("foo"));

    //this is how you get to already found table:
    WebElement myTable = webUI.getPermissionTable();

 }

} 
```

测试样本：

```
 @Test
 public void testTableSize(){
    WebUI web = new WebUI();
    TableWebElement myTable = web.getTable();
    Assert.assertEquals(myTable.getSize(), 25);
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-12T21:28:03.960

我还通过扩展 DefaultFieldDecorator 创建了自定义 WebElement 实现，它适用于 PageFactory 模式。但是我担心使用 PageFactory 本身。它似乎只适用于“静态”应用程序（用户交互不会改变应用程序的组件布局）。

但是，当您需要处理一些更复杂的事情时，例如如果您有一个带有表格的页面，其中包含用户列表和每个用户旁边的删除按钮，使用 PageFactory 就会出现问题。

这是一个例子来说明我在说什么：

```
public class UserList
 {
private UserListPage page;

UserList(WebDriver driver)
{
    page = new UserListPage(driver);
}

public void deleteFirstTwoUsers()
{
    if (page.userList.size() <2) throw new RuntimeException("Terrible bug!");  

    page.deleteUserButtons.get(0).click();
    page.deleteUserButtons.get(0).click();
}

class UserListPage {

@FindBy(xpath = "//span[@class='All_Users']")
List<BaseElement> userList;

@FindBy(xpath = "//span[@class='All_Users_Delete_Buttons']")
List<BaseElement> deleteUserButtons;

UserListPage(WebDriver driver)
 {
    PageFactory.initElements(new ExtendedFieldDecorator(driver), this);
 }
} 
```

因此，在上述场景中，当调用 deleteFirstTwoUsers() 方法时，尝试删除第二个用户时会失败，并显示“StaleElementReferenceException：过时的元素引用：元素未附加到页面文档”。发生这种情况是因为“页面”在构造函数中仅实例化了一次，而 PageFactory“无法知道”:) 用户数量减少了。

到目前为止，我发现的解决方法是以太：

1）不要将 Page Factory 完全用于这样的方法，而只是直接使用 WebDriver 和某种 while 循环：`driver.findElementsBy()...`。

2）或做这样的事情：

```
public void deleteFirstTwoUsers()
{
    if (page.userList.size() <2) throw new RuntimeException("Terrible bug!");  

    new UserListPage(driver).deleteUserButtons.get(0).click();
    new UserListPage(driver).deleteUserButtons.get(1).click();
} 
```

3）或者这个：

```
public class UserList {
  private WebDriver driver;

UserList(WebDriver driver)
{
    this.driver = driver;
}

UserListPage getPage { return new UserListPage(driver);})
public void deleteFirstTwoUsers()
{
    if (getPage.userList.size() <2) throw new RuntimeException("Terrible bug!");  

    getPage.deleteUserButtons.get(0).click();
    getPage.deleteUserButtons.get(0).click();
} 
```

但是在第一个示例中，您无法从使用包装的 BaseElement 中受益。在第二个和第三个中 - 您最终会为您在页面上执行的每个操作创建新的页面工厂实例。所以我想这一切都归结为两个问题：

1) 你认为真的值得将 PageFactory 用于任何事情吗？像这样动态创建每个元素会“便宜”得多：

```
class UserListPage
{
private WebDriver driver;

UserListPage(WebDriver driver)
{
    this.driver = driver;
}

List<BaseElement> getUserList() {
    return driver.findElements(By.xpath("//span[@class='All_Users']"));
} 
```

2) @Override driver.findElements 方法是否可以返回我包装的 BaseElement 对象而不是 WebElement 的实例？如果没有，是否有任何替代方案？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T04:15:00.293

为什么要扩展 WebElement？您是否正在尝试实际开发 Selenium 包？然后，如果您是，那么扩展该方法是没有意义的，除非您的添加可以适用于您使用的每个 Web 元素，而不仅仅是特定于您的表格的那些

为什么不这样做：

```
public class PermissionsPage extends TableWebElement{

...permissions stuff...

}

import WebElement

public class TableWebElement{

...custom web elements pertaining to my page...

} 
```

我不知道这是否回答了你的问题，但在我看来，这更像是一个类架构问题，而不是其他任何问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T07:33:16.893

我会创建一个我称之为“SubPageObject”的东西，它代表 PageObject 上的一个 PageObject ...

优点是您可以为其创建自定义方法，并且您可以在此 SubPageObject 中仅初始化您真正需要的 WebElement。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-03T19:38:23.810

为什么不制作 Web 元素包装器？像这样？

```
class WEBElment
{

public IWebElement Element;

public WEBElement(/*send whatever you decide, a webelement, a by element, a locator whatever*/)

{

Element = /*make the element from what you sent your self*/

}

public bool IsDisplayed()

{

return Element.Displayed;

}

} // end of class here 
```

但是你可以让你的课程比这更复杂。只是一个概念

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-20T09:42:31.577

步骤 1) 创建一个名为`Element`扩展`IWrapsElement`接口的基类

```
 public class Element : IWrapsElement
{
    public IWebElement WrappedElement { get; set; }
    public Element(IWebElement element)
    {
        this.WrappedElement = element;
    }
} 
```

步骤 2) 为每个自定义元素创建一个类并从`Element`该类继承

```
 public class Checkbox : Element
{
    public Checkbox(IWebElement element) : base(element) { }

    public void Check(bool expected)
    {
        if (this.IsChecked()!= expected)
        {
            this.WrappedElement.Click();
        }
    }

    public bool IsChecked()
    {
        return this.WrappedElement.GetAttribute("checked") == "true";
    }
} 
```

用法：

一个）

```
Checkbox x = new Checkbox(driver.FindElement(By.Id("xyz")));
x.Check(true) 
```

b)

```
 private IWebElement _chkMale{ get; set; }
 [FindsBy(How = How.Name, Using = "chkMale")]

 private Checkbox ChkMale
    {
        get { return new Checkbox (_chkMale); }
    }
ChkMale.Check(true); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-09T06:14:31.117

看看[htmlelements](https://github.com/yandex-qatools/htmlelements)框架，它看起来正是您所需要的。它具有预先实现的常用元素，例如复选框、单选框、表格、表单等，您可以轻松创建自己的元素并将一个元素插入其他元素，从而创建清晰的树形结构。

# javascript - 单击按钮时交换两个图像

> ID：11642352
> 
> 赞同：0
> 
> 时间：2012-07-25T03:40:32.167
> 
> 标签：javascript, html

我是 JavaScript 新手，我试图在用户单击按钮时更改两个不同的图像。我得到了第一个图像要更改，但现在我不知道如何同时更改下一个图像...

它的工作原理是这样的：两者都以蓝色开始。单击鼠标后，左图将显示以下顺序（ballblue、ballred、ballred...），右图在同一个按钮上单击将显示以下顺序（ballred、ballblue、ballred...）。

我得到了这个工作，但现在我如何以不同的顺序改变第二个图像（从ballblue.gif开始，然后在按钮上单击到ballred.gif，然后是ballblue.gif，最后是ballred.gif？

到目前为止，这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><title></title></head>
<script type="text/javascript">
imgsleft=Array("ballblue.gif","ballblue.gif","ballred.gif","ballred.gif");
var x=0;

function lampSwitch()
{
    document.getElementById("left").src=imgsleft[++x];    
    if (x==3) {
        x=-1;
    }
}
if (!imgs[x+1]) {
    x=-1;
}
</script>
<body>
    <img src="ballblue.gif" id="left" alt="alttext" height="12" width="12"/>
    <img src="ballblue.gif" id="right" alt="alttext" height="12" width="12"/>
    <form action="#">
        <p><input type="button" value="Switch" onclick="lampSwitch()" /></p>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:56:36.343

**交替颜色代码：**

```
<html>
<head><title>Lamp Switch</title></head>
<script type="text/javascript">
imgsleft=Array("ballblue.gif","ballred.gif");
var x=0;

function lampSwitch(){
    if(++x % 2){
        document.getElementById("left").src=imgsleft[0];
        document.getElementById("right").src=imgsleft[1];
    }else{
        document.getElementById("left").src=imgsleft[1];
        document.getElementById("right").src=imgsleft[0];   
    }
} 
</script>
<body>
<img src="ballblue.gif" id="left" alt="alttext" height="12" width="12"/>
<img src="ballblue.gif" id="right" alt="alttext" height="12" width="12"/>
<form action="#">
<p><input type="button" value="Switch" onclick="lampSwitch()" /></p>
</form>
</body>
</html> 
```

**您指定模式的代码：**
两者都以蓝色开头。
下面是左键点击后的图案
：蓝红红...蓝红红...蓝红红（并重复相同的图案）
右：蓝红蓝红蓝红蓝.....

```
<script type="text/javascript">
imgsleft = Array("ballblue.gif","ballred.gif");
pattern = Array("ballblue.gif","ballred.gif","ballred.gif");
var x=0;
var y=0;
function lampSwitch(){
    if(++x % 2){
        document.getElementById("right").src=imgsleft[1];
    }else{
        document.getElementById("right").src=imgsleft[0];   
    }

    y++;
    if(y == 3){
       y = 0;
    }
    document.getElementById("left").src=pattern[y];
} 
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:51:04.923

```
var currentIndex = 0;
var imgsleft = new Array("ballblue.gif","ballred.gif");

function lampSwitch()
 {
      document.getElementById("left").src=imgsleft[currentIndex%2];
      currentIndex++; 
 } 
```

:p

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:45:46.657

[http://www.rocket99.com/techref/javascript8668.html](http://www.rocket99.com/techref/javascript8668.html)此页面包含带有上一个和下一个按钮的图像查看器，我认为这会对您有所帮助。

# actionscript - 如何根据属性删除带有 e4x 的节点？

> ID：11642357
> 
> 赞同：0
> 
> 时间：2012-07-25T03:41:34.333
> 
> 标签：actionscript, e4x

我有一个简单的例子

```
var myXML:XML =
<root>
    <element type="a">I am a</element>
    <element type="b">I am b</element>
</root>
; 
```

我无法弄清楚如何以编程方式删除特定类型的元素

```
delete myXML.root.element.type['a'][0]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:09:52.753

要通过匹配该元素的属性来删除 XML 元素，我相信您正在寻找：

```
var index:int = myXML.element.(@type=="b").childIndex();
delete myXML.element[index]; 
```

基于您的 XML：

```
var myXML:XML =
    <root>
        <element type="a">I am a</element>
        <element type="b">I am b</element>
    </root>; 
```

调用此函数后，XML 将是：

```
<root>
  <element type="a">I am a</element>
</root> 
```

# .htaccess - 当主域指向另一个文件夹时，如何将子域重定向到文件夹？

> ID：11642359
> 
> 赞同：0
> 
> 时间：2012-07-25T03:41:40.750
> 
> 标签：.htaccess, mod-rewrite, redirect, subdomain

我非常亲爱的 Stackoverflow 社区，

我有以下重定向问题，经过几次不成功的尝试后，我来到这里寻求启蒙。我的问题如下。我有一个域，我们称它为“www.mydomain.com”，我的“public_html”目录有两个文件夹，如下所示：

public_html

public_html/my_app/

public_html/my_other_app/

首先，我希望在输入 URL 'www.mydomain.com' 时，我会被重定向到文件夹 'my_app' 的内容，同时保持相同的 URL。事实上这我已经完成了，所以每当我输入“www.mydomain.com”时，我都会被重定向到“www.mydomain.com/index.php”，它实际上对应于“public_html/myapp/index.php”脚本在“myapp”下。

现在我想要一个名为“other.mydomain.com”的子域，它必须重定向到“my_other_app”文件夹的内容，但我不知道如何让 .htaccess 为此工作，同时为第一种情况也。

所以这基本上是，主域重定向到一个文件夹，子域重定向到另一个文件夹，并且两个文件夹都位于 public_html 目录下

任何提示都非常受欢迎。

供您参考，我在我当前的 .htaccess 文件下面发布：

```
RewriteEngine On

# redirect to www prefix
RewriteCond %{HTTP_HOST} ^mydomain\.com$ [NC]
RewriteRule ^(.*)$ https://www.mydomain.com/$1 [R=301,L]
# if start with www and no https then redirect
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^www.mydomain\.com$ [NC]
RewriteRule ^(.*)$ https://www.mydomain.com/$1 [R=301,L]
# rewrite URL to trim folder
RewriteCond %{REQUEST_URI} !^/test/
RewriteRule ^$ /login [L,R=301]
RewriteRule ^(.*)$ test/$1 [L] 
```

这实际上适用于我的主域，它还将 URL 重写为 https。我需要在此处添加一些内容，以便单独处理“other.mydomain.com”并重定向到“/my_other_app/”子文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:52:02.750

您需要的是每个应用程序一个虚拟主机（虚拟主机）。在 vhost 中，您将定义 vhosts 根目录，该根目录将指向您的任一子目录。

有基于 IP 的虚拟主机（每个子域一个 IP 地址）或基于名称的虚拟主机（根据所有现代浏览器发送的 HTTP 主机标头选择虚拟主机）。但是关于vhosts有太多话要写在这里，只需阅读这里的apache文档：

[http://httpd.apache.org/docs/2.2/vhosts/](http://httpd.apache.org/docs/2.2/vhosts/)

我认为对于纯 .htaccess 文件，您不能这样做（我可能错了）。通常你会在主 apache 配置中添加虚拟主机。根据您的托管情况，这可能是不可能的。在这种情况下，请与您的托管服务提供商联系。

马克

# c# - 将 datetime c++ 结构（以字节接收）转换为 c# datetime 实例

> ID：11642369
> 
> 赞同：1
> 
> 时间：2012-07-25T03:42:47.333
> 
> 标签：c#, c++, bit-shift

所以我正在努力替换一个用 c++ 编写的遗留应用程序，并且在将网络通信中使用的结构映射到 c# 时遇到了一个小问题。基本上，tcp 连接的另一端使用以下结构来写入日期，我不知道如何将该结构序列化生成的字节转换为 ac# datetime。大部分都很容易，直到你到达分别由 10 位和 6 位组成的“毫秒”和“秒”，以便在它们之间共享 2 个字节。我假设您通过位移来解决这个问题，以读取和写入值到字节数组，但我没有这方面的经验。

```
typedef struct DATE_TIME
{
    USHORT  year;
    UCHAR   month;
    UCHAR   day;
    UCHAR   hour;
    UCHAR   minute;
    USHORT  millis : 10;
    USHORT  second : 6;
} 
```

当前尝试读取的代码

```
ushort Year = br.ReadUInt16();
byte Month = br.ReadByte();
byte Day = br.ReadByte();
byte Hour = br.ReadByte();
byte Minute = br.ReadByte();

ushort secAndMillSec = br.ReadUInt16();
ushort Milliseconds = (ushort)(secAndMillSec >> 6);
ushort Seconds = (ushort)((ushort)(secAndMillSec << 12)>>12); 
```

我第一次尝试写的代码

```
 bw.Write(Year);
 bw.Write(Month);
 bw.Write(Day);
 bw.Write(Hour);
 bw.Write(Minute);

 ushort secAndMillSec = (ushort)(Milliseconds << 6);
 secAndMillSec = (ushort)(secAndMillSec + Seconds);
 bw.Write(secAndMillSec); 
```

再次看起来正确吗？到目前为止，我可以运行它的所有测试数据都是空日期，所以我在测试自己时遇到了问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:28:52.883

位字段不能跨编译器移植，但我们可以假设这两个字段在两个后续字节中。

我假设您正在接收来自网络的流，并且您正在阅读日期时间。

```
BinaryReader reader = new BinaryReader(networkStream);
int year = reader.ReadUInt16();
int month = reader.ReadByte();
int day = reader.ReadByte();
int hour = reader.ReadByte();
int minute = reader.ReadByte();
int ms = reader.ReadUInt16();
int second = ms >> 10;
int millist = ms & 1023;
DateTime dt = new DateTime(year, month, day, hour, minute, second, millis); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:53:58.333

先知。我正在做一个类似的项目。我所做的是将日期时间转换为 Json 对象，然后将其作为字节发送到 c#，然后从 C# 我将字节作为 Json 读取。我更喜欢你使用 Json 在 c++ 和 C# 之间进行通信。

# php - foreach中的PHP嵌套开关

> ID：11642377
> 
> 赞同：0
> 
> 时间：2012-07-25T03:43:59.737
> 
> 标签：php, foreach, switch-statement

在网站上为我玩的游戏工作。在这个页面上，用户可以上传一段描述设备的文本，希望我可以通过它解析并创建一个对象并将其上传到 MySQL。这是一个示例块：

```
Item:         an ethereal bracelet
Key words:    geq grey_man man ethereal bracelet geq_Guxx
Type:         treasure
Level:        50
Extra flags:  rot-death no-transfer
Weight:       2
Value:        0
Affects:      spell-resistance by 5.
Affects:      dexterity by 1.
Affects:      strength by 1.
Affects:      intelligence by 1.
Affects:      wisdom by 1.
Affects:      hitroll by 5.
Affects:      constitution by 1.
Affects:      hp by 50.
Affects:      damroll by 10. 
```

这是我的设备类中的功能：

```
public function create_eq_from_text($text) {
        $text = trim($_POST['item']);
        $text = explode("\n", $text);
        foreach($text as $line) {
            switch($line) {
                case strstr($line, 'Item:'):
                    $this->name = trim(str_replace('Item:', '', $line));
                    break;
            case strstr($line, 'Key words:'):
                $line = trim(str_replace('Key words:', '', $line));
                $this->key_words = $line;
                break;
            case strstr($line, 'Type:'):
                $line = trim(str_replace('Type:', '', $line));
                $this->type = $line;
                break;
            case strstr($line, 'Level:'):
                $line = trim(str_replace('Level:', '', $line));
                $this->level = intval($line);
                break;
            case strstr($line, 'Extra flags:'):
                $line = trim(str_replace('Extra flags:', '', $line));
                $this->extra_flags = $line;
                break;
            case strstr($line, 'Weight:'):
                $line = trim(str_replace('Weight:', '', $line));
                $this->weight = intval($line);
                break;
            case strstr($line, 'Value:'):
                $line = trim(str_replace('Value:', '', $line));
                $this->value = intval($line);
                break;
            case strstr($line, 'physical attacks'):
                $this->p_ac = get_number($line);
                break;
            case strstr($line, 'magic attacks'):
                $this->m_ac = get_number($line);
                break;
            case strstr($line, 'spell-resistance'):
                $this->saves = get_number($line);
                break;
            case strstr($line, 'dexterity by'):
                $this->dex = get_number($line);
                break;
            case strstr($line, 'strength by'):
                $this->str = get_number($line);
                break;
            case strstr($line, 'intelligence by'):
                $this->intel = get_number($line);
                break;
            case strstr($line, 'wisdom by'):
                $this->wis = get_number($line);
                break;
            case strstr($line, 'constitution by'):
                $this->con = get_number($line);
                break;
            case strstr($line, 'damroll by'):
                $this->dam = get_number($line);
                break;
            case strstr($line, 'hitroll by'):
                $this->hit = get_number($line);
                break;
            case strstr($line, 'hp by'):
                $this->hp = get_number($line);
                break;
            case strstr($line, 'mana by'):
                $this->mana = get_number($line);
                break;
            case strstr($line, 'Damage is'):
                $line = trim(str_replace('Damage is', '', $line));
                $line = str_replace('.', '', $line);
                $this->weapon_damage = $line;
                break;
            }
        }
} 
```

这是表单的代码：

```
 if(isset($_POST['submit']) && !empty($_POST['item'])) {
    $item = new Equipment;
    $item->create_eq_from_text($item);
    print_r($item);
    } 
```

出于某种原因，该开关唯一捕获的是 strstr('Item:')。首先，我认为 switch 中的中断是从 foreach 中中断的，但我已经排除了这种可能性。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:07:01.420

对于这种情况，您不能使用 switch 语句，因为您正在 $line 中寻找子字符串。Switch 语句查找与给定变量的匹配项，而不是布尔值。

# ios - NSInvocation 是否应该将 self 作为 2d 索引参数传递？

> ID：11642378
> 
> 赞同：0
> 
> 时间：2012-07-25T03:44:17.937
> 
> 标签：ios, xcode, arguments, nsinvocation

我正在使用 cocos2d 进行开发。我试图包装一个自定义的按钮类。当试图让按钮响应我分配给它的选择器时，我使用了 NSInvocation。在其中，MyButton 是这样工作的。

```
if( target && sel ) {
            sig = [target methodSignatureForSelector:sel];
            invocation_ = nil;
            invocation_ = [NSInvocation invocationWithMethodSignature:sig];
            [invocation_ setTarget:target];
            [invocation_ setSelector:sel];
            [invocation_ setArgument:&self atIndex:2];
            [invocation_ retain];
        } 
```

我已经向 sel 传递了一个这样的函数：

```
- (void)onButtonClicked:(id)sender; 
```

我的问题是：是否有必要`[invocation_ setArgument:&self atIndex:2];`在 MyButton 的实现中添加这一行？

我有这个问题是因为根据这里的 ios 文档： [NSInvocation Class Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsinvocation_Class/Reference/Reference.html)

它指出：

> 索引 0 和 1 分别表示隐藏参数 self 和 _cmd；您应该直接使用 setTarget: 和 setSelector: 方法设置这些值。对通常在消息中传递的参数使用索引 2 和更大。

调用setTarget时好像传了self，是不是说setArgument方法中不需要传入&self参数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:02:31.253

文档只是告诉第一个参数（索引为 0）代表目标对象（所以是“自我”）。正如文档向您解释的那样，第一个参数是使用该`setTarget:`方法设置的。

您需要保留这行代码`[invocation_ setArgument:&self atIndex:2];`以将按钮的引用发送到目标-操作对。

# python - 用python四舍五入

> ID：11642387
> 
> 赞同：1
> 
> 时间：2012-07-25T03:45:34.370
> 
> 标签：python, django, rounding

我已阅读以下页面：

[python小数-四舍五入到最接近的整数（无美分）-使用ROUND_HALF_UP](https://stackoverflow.com/questions/3935661/python-decimals-rounding-to-nearest-whole-dollar-no-cents-with-round-half)

[http://docs.python.org/library/decimal.html](http://docs.python.org/library/decimal.html)

我有以下代码：

```
total_num = Decimal(str(total/10))
total_num.quantize(Decimal('1'), rounding=ROUND_UP) 
```

但它总是四舍五入？因此，如果我有 221，我希望它返回 23。现在我得到 22。我对此有什么误解吗？

**[编辑]**

我将其更改为以下内容：`total_num = int(math.ceil(float(total)/10))`

我需要一个`int`来继续`for`具有`range`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T03:51:05.533

你不能使用 math.ceil 吗？如果您使用浮点除法，它将做必要的事情。目前你正在做一个整数除法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T03:53:48.913

`total`是一个整数。因此，`/`正在做整数除法。要么除以`10.`（并希望精度限制不会在 *** 中咬你），要么在`Decimal`适当的上下文中进行数学计算。

# dojo - 如何将dojo1.2升级到dojo1.7

> ID：11642391
> 
> 赞同：0
> 
> 时间：2012-07-25T03:45:54.227
> 
> 标签：dojo

我有一个使用 dojo 1.2 运行的应用程序，仅支持 InternetExplorer8

所以我的问题是我想将 dojo 版本升级到 1.7 和 InternetExplorer9/otherborwsers 兼容，

那么我需要更改哪个 API？我正在使用所有三个 dojo、dijit、dojox。

有什么解决办法吗？

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:43:00.093

发生了如此多的变化，我什至不知道从哪里开始……您可能需要重写很多代码，但我想，要获得更好的东西，这是一种必要的痛苦。您可能想在一些纸上写下您的自定义小部件架构、它们使用的内容等，然后尝试在 AMD 中使用 dojo1.7 或 dojo 1.8 rc1 重写它们，我会建议完全重写（尽管不一定要完全重新思考）。Dojo 1.7+ 在性能、大小、可用的小部件、功能和灵活性方面都比 1.2 好得多，这是完全值得的。

# php - 如何在 sparql 中制作多个关键字？

> ID：11642401
> 
> 赞同：0
> 
> 时间：2012-07-25T03:46:48.300
> 
> 标签：php, rdf, sparql

我制作了一个包含两个类别和一个关键字的搜索系统。如何使用 SPARQL 为更具体的结果创建两个关键字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:56:01.930

您可以在 RDF 数据（和 SPARQL 查询）中添加更多关键字，基数不受限制。

# spring - Dojo Uploader 使用 ajax 插件 - 春季安全问题

> ID：11642402
> 
> 赞同：0
> 
> 时间：2012-07-25T03:46:54.320
> 
> 标签：spring, spring-security, dojo

我正在使用 Dojo 上传器。当涉及到 HTML5 插件时，它工作得很好。但如果我强制使用 Flash 插件，它会失败并显示下一条消息：

“服务器没有响应”

在服务器端 Spring security 抛出这个：

```
 Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
22:33:06,375 DEBUG ty.web.access.ExceptionTranslationFilter - Access is denied (user is anonymous); redirecting to authentication entry point
org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83)
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:205)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:114)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.traceNextValve(HttpRequestOperationCollectionValve.java:116)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:98)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

flash 插件是否缺少会话 ID？

这是我的js代码：

```
forma = new Form({
            method: 'post',
            enctype: 'multipart/form-data',
            'class': 'Uploader',
            action: dojo.config.app.urlBase + 'upload/cargaArchivos'
        }, 'cargaForm');

        btnCargar = new Button({
            type: 'submit',
            label: 'Cargar'
        }, 'submitCarga');  

        btnReset = new Button({
            type: 'reset',
            label: 'Limpiar',
            onClick: function(){
                // limpiamos el array de archivos agregados
                uploader.reset();
                console.log(uploader.getFileList());
            }
        }, 'resetForm');

        uploader = new dojox.form.Uploader({
            id: 'uploader',
            name: 'uploadedfile',
            showInput: 'before',
            isDebug: true,
            url: dojo.config.app.urlBase + 'upload/cargaArchivos',
            multiple: true,
            force: 'flash',
            onComplete: function(respuesta){
                // Aqui se puede hacer algo con el objeto de respuesta que se devuelve.
                console.log(respuesta);
            },
            onChange: function(archivos){
                // Aquí se podrían listar los archivos en alguna tabla. 
                console.log(archivos);
            }
        }, 'uploader');
        uploader.startup();     
    } 
```

## 注意：我正在创建像 'new dojox.form.Uploader' 这样的上传器，因为我正在避免一个已知错误，请参阅：[Programmatic Dojox Uploader - ajax upload not working](https://stackoverflow.com/questions/10343652/programmatic-dojox-uploader-ajax-upload-not-working)

更新，我没有使用 FileUploader 因为它说它已被弃用，但 Uploader.upload() 方法也接收一个 formData 对象。

首先我正在尝试读取cookie。检查另一个请求的标头：

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language es-mx,en-us;q=0.7,en;q=0.3
Connection  keep-alive
Content-Type    application/x-www-form-urlencoded
**Cookie    undefined=root; undefined=6%2C6%2F4; JSESSIONID=9F0E7745730639A3D0989C5D379A74FB**
Host    localhost:8080
Referer http://localhost:8080/sep-sajja-web/
User-Agent  Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1
X-Requested-With    XMLHttpRequest 
```

所以cookie名称是JSESSIONID。但是当我尝试

```
dojo.cookie('JSESSIONID'); 
```

它返回未定义...我会继续尝试。

纯javascript：

```
document.cookie.split(";") 
```

只给我一个 cookie：["undefined=6%2C6%2F4"]

也许权限很重要？

更新...是的，它看起来像那样->[我如何用 javascript 读取 JSESSIONID？](https://stackoverflow.com/questions/9486801/how-can-i-read-jsessionid-with-javascript)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:04:10.130

这是如何通过 Flash 插件将数据发送到服务器的示例

[http://livedocs.dojotoolkit.org/dojox/form/FileUploader#server-side](http://livedocs.dojotoolkit.org/dojox/form/FileUploader#server-side)

我无法找到有关是否通过帖子发送 cookie（从调用窗口继承）的信息 - 但应该有一个可能的解决方案来通过 GET 查询参数或自定义**POST 数据**发送 sessionid 。

```
new dojox.form.Uploader( {
    // ... your configurations
    postData: {
      sessionid: dojo.cookie('JSPCOOKIENAME_UNKNOWN_TO_ME')
}); 
```

您可能已经注意到，springframework 对我来说并不熟悉，但通过简要搜索如何基于令牌创建身份验证，我认为您正在寻找与以下内容的相似之处。至少会有一些类流行词可供搜索

```
 Authentication authentication = this.authenticationProvider.authenticate(token);
    SecurityContextHolder.getContext().setAuthentication(authentication); 
```

如果您启用了登录，我相信**令牌**可以通过

```
UsernamePasswordAuthenticationToken token = 
  new UsernamePasswordAuthenticationToken(username, password);
User details = new User(username);
token.setDetails(details); 
```

您将需要知道您的 servlet 正在使用哪个身份验证提供程序，并且可以在 webapp web.xml 下的 webapp web.xml 中找到信息`<filters>`

# ssis - 有没有办法从另一个构建到“任何 CPU”输出的项目中以 32 位运行时运行 SSIS 包？

> ID：11642410
> 
> 赞同：2
> 
> 时间：2012-07-25T03:47:30.623
> 
> 标签：ssis

我有一个 SSIS 包，我在其中从 csv 读取数据并将其转储到 excel 文件 (.xls)。起初，它不起作用，我不得不将 SSIS 项目的 64 位运行时属性更改为 false 以使其工作。

我需要从另一个构建为“任何 CPU”输出的 Windows 服务调用这个包。当我这样做时，我得到相同的 64 位运行时错误并且包失败。我无法将服务的运行时间更改为 x86/x64。是否有解决方案，以便我可以告诉包它需要在服务的 32 位运行时中执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:34:54.770

尝试将此属性设置为 false（它在解决方案的属性上）：

![在此处输入图像描述](../Images/4874d1c82452cd73a52f98c2f20c85b9.png)

此外，请记住 Dtexec、dtutil 和 SQL Server 导入和导出向导都有 64 位和 32 位应用程序。请务必注意，如果您在 32 位环境中开发包并希望在 64 位环境中运行该包，则连接管理器需要兼容 64 位。某些连接管理器（例如 Excel）只能在 32 位环境中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T20:45:51.567

可以通过 EXEC 命令强制执行 32 位：

```
 EXEC SSISDB.catalog.create_execution
 @folder_name = @p_yourFolder,
 @project_name = @p_yourProject,
 @package_name = @p_yourProcess,
 @reference_id = @v_yourReferenceId,
 @use32bitruntime = 1,  --To force 32 bit runtime
 @execution_id =  @r_SSISDB_ExecutionID OUTPUT; 
```

或者通过配置\高级属性中的 SQL 代理，您可以在其中有一个可用的«以 32 位模式运行»复选框。

# gwt - print capability in gwt

> ID：11642415
> 
> 赞同：-1
> 
> 时间：2012-07-25T03:48:13.320
> 
> 标签：gwt

we have admin dashboard build in gwt and deployed on google app engine for java. On the dashboard there is a feature called "my card" where a blood donor can see his blood donor registration card with us.

Currently, we are creating and storing this card on google storage and when someone goes to "My Card" we render the card using iFrame in our dashboard.

We want to give the ability to print this card. Please tell how to do it?

just to add on i tried Print.it jar but seems like it is obsolete and does not play nice with gwt anymore

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:34:34.913

Add this script to the iframe content page's tag

```
<script type="text/javascript">
function printPage() {focus();print(); }
</script> 
```

Add this native method to your GWT class

```
public native void printIframeContent(String id)/*-{
    var iframe = $doc.getElementById(id);
    var ifWin = iframe.contentWindow || iframe;
    iframe.focus();
    ifWin.printPage();
    return false;
}-*/; 
```

The action handler for print button's click event.

```
public void onClick(ClickEvent event) {
    printIframeContent("printiframe"); // Use the correct id for your iframe
} 
```

Code is derived from [this discussion](https://stackoverflow.com/questions/472951/how-do-i-print-an-iframe-from-javascript-in-safari-chrome)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T15:06:52.813

Here is a simple Printer class for GWT. It prints out the page.

```
import com.google.gwt.user.client.ui.UIObject; 
```

import com.google.gwt.user.client.Element;

public class Printer {

```
public static native void it(String html) /*-{
    var frame = $doc.getElementById('__printingFrame');
    if (!frame) {
        $wnd.alert("Error: Can't find printing frame.");
        return;
    }
    frame = frame.contentWindow;
    var doc = frame.document;
    doc.open();
    doc.write(html);
    doc.close();
    frame.focus();
    frame.print();
}-*/;
public static void it(UIObject obj) {
    it("", obj.getElement().toString());
}
public static void it(Element element) {
    it("", element.toString());
}
public static void it(String style, String it) {
    it("<it><header>"+style+"</header><body>"+it+"</body></it>");
}
public static void it(String style, UIObject obj) {
    it(style, obj.getElement().toString());
}
public static void it(String style, Element element) {
    it(style, element.toString());
} 
```

}

# jquery - 尝试将 Google Places API 与 JQuery 的 getJSON 函数一起使用

> ID：11642418
> 
> 赞同：6
> 
> 时间：2012-07-25T03:48:34.677
> 
> 标签：jquery, json, getjson, google-places-api

这可能是非常基本的，但我正在尝试测试 Google Places API。我正在浏览文档并使用他们提供的一些示例。我正在尝试使用 JQuery getJSON 函数，因为我已经能够成功地使用它来异步访问外部 JSON 文件，所以我认为这可能是获取 Google Places 查询的 JSON 结果的好方法。这是我正在尝试使用的代码：

```
<body>
<div id="message"></div>
<script type="text/javascript">

    var requestURL = 'https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key='my_google_places_key';
    $(document).ready(function () {
        $.getJSON(requestURL, function (data) {

            for (i = 0; i < data.results.length; i++) {
                myAddress[i] = data.results[i].formatted_address;
                document.getElementById("message").innerHTML += myAddress[i] + "<br>";
                console.log(myAddress[i]);
            }

        });
    });  

</script>

</body> 
```

根据文档，对查询的结果 JSON 响应应如下所示：

```
{
   "html_attributions" : [
      "Listings by \u003ca href=\"http://www.yellowpages.com.au/\"\u003eYellow Pages\u003c/a\u003e"
   ],
   "results" : [
      {
         "formatted_address" : "529 Kent Street, Sydney NSW, Australia",
         "geometry" : {
            "location" : {
               "lat" : -33.8750460,
               "lng" : 151.2052720
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
         "id" : "827f1ac561d72ec25897df088199315f7cbbc8ed",
         "name" : "Tetsuya's",
         "rating" : 4.30,
         "reference" : "CnRmAAAAmmm3dlSVT3E7rIvwQ0lHBA4sayvxWEc4nZaXSSjRtfKRGoYnfr3d5AvQGk4e0u3oOErXsIJwtd3Wck1Onyw6pCzr8swW4E7dZ6wP4dV6AsXPvodwdVyqHgyGE_K8DqSp5McW_nFcci_-1jXb5Phv-RIQTzv5BjIGS0ufgTslfC6dqBoU7tw8NKUDHg28bPJlL0vGVWVgbTg",
         "types" : [ "restaurant", "food", "establishment" ]
      },
      {
         "formatted_address" : "Upper Level, Overseas Passenger Terminal/5 Hickson Road, The Rocks NSW, Australia",
         "geometry" : {
            "location" : {
               "lat" : -33.8583790,
               "lng" : 151.2100270
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/cafe-71.png",
         "id" : "f181b872b9bc680c8966df3e5770ae9839115440",
         "name" : "Quay",
         "rating" : 4.10,
         "reference" : "CnRiAAAADmPDOkn3znv_fX78Ma6X5_t7caEGNdSWnpwMIdDNZkLpVKPnQJXP1ghlySO-ixqs28UtDmJaOlCHn18pxpj7UQjRzR4Kmye6Gijoqoox9bpkaCAJatbJGZEIIUwRbTNIE_L2jGo5BDqiosqU2F5QdBIQbXKrvfQuo6rmu8285j7bDBoUrGrN4r6XQ-PVm260PFt5kwc3EfY",
         "types" : [ "cafe", "bar", "restaurant", "food", "establishment" ]
      },
      {
         "formatted_address" : "107 George Street, The Rocks NSW, Australia",
         "geometry" : {
            "location" : {
               "lat" : -33.8597750,
               "lng" : 151.2085920
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
         "id" : "7beacea28938ae42bcac04faf79a607bf84409e6",
         "name" : "Rockpool",
         "rating" : 4.0,
         "reference" : "CnRlAAAAVK4Ek78r9yHV56I-zbaTxo9YiroCbTlel-ZRj2i6yGAkLwNMm_flMhCl3j8ZHN-jJyG1TvKqBBnKQS2z4Tceu-1kZupZ1HSo5JWRBKd7qt2vKgT8VauiEBQL-zJiKVzSy5rFfilKDLSiLusmdi88ThIQqqj6hKHn5awdj6C4f59ifRoUg67KlbpuGuuW7S1tAH_EyBl6KE4",
         "types" : [ "restaurant", "food", "establishment" ]
      },
      {
         "formatted_address" : "483 George Street, Sydney NSW, Australia",
         "events" : [
            {
              "event_id" : "7lH_gK1GphU",
              "summary" : "Google Maps Developer Meetup: Rockin' out with the Places API",
              "url" : "https://developers.google.com/places"
            }
          ],
         "geometry" : {
            "location" : {
               "lat" : -33.8731950,
               "lng" : 151.2063380
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/civic_building-71.png",
         "id" : "017049cb4e82412aaf0efbde890e82b7f2987c16",
         "name" : "Chinatown Sydney",
         "rating" : 4.0,
         "reference" : "CnRuAAAAsLNeRQtKD7TEUXWG6gYD7ByOVKjQE61GSyeGZrX-pOPVps2BaLBlH0zBHlrVU9DKhsuXra075loWmZUCbczKDPdCaP9FVJXB2NsZ1q7188pqRFik58S9Z1lcWjyVoVqvdUUt9bDMLqxVT4ENmolbgBIQ9Wy0sgDy0BgWyg5kfPMHCxoUOvmhfKC-lTefXGgnsRqEQwn8M0I",
         "types" : [
            "city_hall",
            "park",
            "restaurant",
            "doctor",
            "train_station",
            "local_government_office",
            "food",
            "health",
            "establishment"
         ]
      }
   ],
   "status" : "OK"
} 
```

如果我复制此 JSON 脚本并将其保存到文件中，我可以访问它并在浏览器上显示以下结果：

529 Kent Street, Sydney NSW, Australia Upper Level, Overseas Passenger Terminal/5 Hickson Road, The Rocks NSW, Australia 107 George Street, The Rocks NSW, Australia 483 George Street, Sydney NSW, Australia

这意味着它有效。getJSON 函数是否没有正确解析 JSON 脚本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T04:03:31.680

我建议使用[Google Maps JavaScript API v3](https://developers.google.com/maps/documentation/javascript/)的[Places Library](https://developers.google.com/maps/documentation/javascript/places)。

[您可以在此处](https://developers.google.com/maps/documentation/javascript/places)找到有关如何使用它的演示和文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T21:35:32.957

好吧，我或多或少想通了。我想出了你需要做什么才能让 getJSON 函数返回 JSON 解析的数据。您必须添加“回调=？” 到查询字符串。

```
'https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key="myKey"&callback=?'; 
```

但是，现在的问题是我现在在控制台中收到错误消息：

```
SyntaxError: invalid label
[Break On This Error]   

"html_attributions" : [

 json?l...0080533 (line 2, col 3) 
```

这很奇怪，因为我检查了 JSONLint 中的响应并且格式有效。此外，如果从本地文件中读取，同样的响应也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T10:57:49.493

请尝试以下代码

```
 <body>
     <div id="message"></div>
     <script type="text/javascript">
        $(document).ready(function () {
        $.ajax({
        type: 'GET',
        url: 'https://maps.googleapis.com/maps/api/place/searc/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key='my_google_places_key';',
        async: false,
        jsonpCallback: 'jsonCallback',
        contentType: "application/json",
        dataType: 'jsonp',
        success: function (data) {
             for (i = 0; i < data.results.length; i++) {
            myAddress[i] = data.results[i].formatted_address;
            document.getElementById("message").innerHTML += myAddress[i] + "<br>";
            console.log(myAddress[i]);
        };
        },
        error: function (e) {
            console.log(e.message);
        }
    });
});  
 </script>
 </body> 
```

您需要将其设置为 Json 回调，因为它是跨域调用

# c - 生成有限制的随机数

> ID：11642419
> 
> 赞同：0
> 
> 时间：2012-07-25T03:48:38.173
> 
> 标签：c, random

生成 5 个从 1 到 200 的随机数的最简单方法是什么

```
 randnum[0] < randnum[1] < randnum[2] < randnum[3] < randnum[4] 
```

我的代码看起来像这样，但它总是在 randnum[4] 处溢出

```
 limit_upper = 10; // generate random number up to 10 for randnum[0] 
 limit_lower = 0;

 srand((time(0));

 for (x = 0; x < 5; x++) {
         randnum[x] = 1 + limit_lower + (unsigned int) rand() % limit_upper;
         limit_lower = limit_lower + randnum[x];
         limit_upper = (limit_upper * 2) + (unsigned int) rand() % limit_upper;
 } 
```

要生成的随机数不应重复。

有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T04:03:42.810

生成从 1 到 200 的随机数，随意排序，丢弃重复项，直到有 5 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T04:07:56.687

正如阿兹瑞指出的那样，你把事情复杂化了。生成 0 到 200 之间的五个随机数，同时丢弃重复项并在完成后进行排序。除非您计划将代码扩展到超过五个数字或有一些疯狂的性能要求，否则这将很有效。稍后您会感谢自己的直接可读的无错误代码。此外，您将消除对随机性的任何人为限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T01:57:35.810

正如公认的答案所暗示的，这是解决方案：

```
 #include <stdio.h>
     #include <stdlib.h>

     void quicksort(int arr[], int left, int right) {
             int i = left, j = right;
             int tmp;
             int pivot = arr[(left + right) / 2];

             while (i <= j) {
                     while (arr[i] < pivot)
                             i++;
                     while (arr[j] > pivot)
                             j--;

                     if (i <= j) {
                             tmp = arr[i];
                             arr[i] = arr[j];
                             arr[j] = tmp;
                             i++;
                             j--;
                     }

             };

             if (left < j)

             quicksort(arr, left, j);

             if (i < right)

             quicksort(arr, i, right);

     }

     int main() {
             int i;
             int x;
             int random[5];

             srand(time(0));

             for (i = 0; i < 5; i++) {
                     random[i] = 0;
             }

             for (i = 0; i < 5; i++) {
                     random[i] = rand() % 201;
                     for (x = 1; x < i; x++) {
                             if (random[x] == random[i]) {
                                     i--;
                                     continue;
                             }
                     }
             }

             quicksort(random, 0, 4);

             for (i = 0; i < 5; i++) {
                     printf("random[%0d]: %0d \n", i, random[i]);
             }

             return 0;
     } 
```

也许有人会发现它很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T04:06:05.223

查看您的最后一行，limit_upper 在第 3 次迭代时可能变为 267。

最大增加是 limit_upper*2 + limit_upper-1（大约 3*limit_upper）。

每次播种随机生成器时都会遇到同样的问题吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T04:18:24.837

这是 Jon Bentley 在[Programming Perls](http://books.google.com/books?id=kse_7qbWbjsC&lpg=PA126&ots=DgvTvUwU7v&dq=selection%20without%20replacement%20algorithm%20bentley&pg=PA126#v=onepage&q=selection%20without%20replacement%20algorithm%20bentley&f=false)中从多个角度涵盖的经典问题。我强烈推荐这本书。

# caching - 为什么谷歌不缓存我网站上的一些图片

> ID：11642421
> 
> 赞同：0
> 
> 时间：2012-07-25T03:48:41.277
> 
> 标签：caching

当我检查我网站的 Google 缓存页面时，它不会缓存我的任何图像，包括我的网站徽标、产品图像和其他图像。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T03:52:22.210

您的 robots.txt 中可能没有 GoogleBot 图像缓存器。

[这里](http://support.google.com/merchants/bin/answer.py?hl=en&answer=160640)的众多解决方案之一。这是官方的 Google 支持部分：我的图像未显示。

编辑：
这些实际上似乎适用于 Google 产品，但它们应该涵盖相同的问题。

为了您的方便，这里是全文。

> **我的图片没有显示**
> 
> **您的图像可能无法显示的原因有很多**
> 
> **最近提交的项目**
> 
> 处理完您的商品后，我们的服务器会延迟一段时间才能获取您的图片。在此期间，我们会为您的商品显示“图片不可用”消息。
> 
> **图片的格式不受支持**
> 
> 请确保您的图像采用我们支持的格式之一（GIF、JPG、JPEG、PNG、BMP 或 TIF），并且它们的文件名包含适当的扩展名。此外，要成功处理图像，其关联的 URL 必须链接到图像文件而不是脚本。
> 
> **您的图片网址无法正常工作**
> 
> 如果您的图片 URL 不起作用，我们的列表中将不会显示您的产品的图片。请确保您的所有图片 URL 都正常工作。
> 
> **您已在图片 URL 中包含空格**
> 
> 请确保您的图片网址中没有空格。每个空格都应替换为字符“%20”（不带引号）。否则，我们将无法抓取您的图片，您的图片也不会出现在我们的搜索应用程序中。例如，而不是以下 URL：
> 
> [http://www.example.com/my](http://www.example.com/my) picture.jpg
> 
> 请使用：[http ://www.example.com/my%20picture.jpg](http://www.example.com/my%20picture.jpg)
> 
> **robots.txt 文件在您的服务器上**
> 
> 这会阻止我们抓取您网站上的图片。为了让我们访问这些图片，请修改您的 robots.txt 文件以允许用户代理“Googlebot”和“Googlebot-image”抓取您的网站。您可以通过在文件中添加以下两行来做到这一点：
> 
> 用户代理：Googlebot 不允许：
> 
> 用户代理：Googlebot-image 不允许：
> 
> 了解有关机器人排除协议的更多信息
> 
> **图片重定向**
> 
> 图像链接应直接链接到图像。如果您的数据馈送中的图片链接重定向到图片的另一个 URL，我们将无法获取您图片的副本以添加到搜索结果中。通过 ASP、PHP 或 Cold Fusion 脚本重定向的图像 URL 也将无法获取。
> 
> **图像具有 HTTP 标头**
> 
> 每次通过 Internet 传递信息时，它前面都会有一个简短的描述，通常称为标题。如果图像的标头信息不是预期的，则图像处理器无法缓存图像的副本。通常，标题可能只是动态生成的图像的问题。如果您不知道您的图像是否是动态生成的，那么这很可能不是问题所在。
> 
> 必须传递的两个标头字段是内容类型和内容长度。content-type 描述了您发送的文件类型。图像的两个常见值是“image/gif”和“image/jpeg”。内容长度让我们知道图像的文件大小。不应传递的标头字段是“缓存控制”。如果您选择添加标题字段，请确保它们适合图像。
> 
> **图片尺寸过大**
> 
> 最好包含 300x300 像素或更大的图像。此图像大小允许我们在搜索结果中包含不失真的图像，并通过请求更大的图像来减少您的服务器不堪重负的可能性。

# javascript - var name = new object() vs this.name = new object

> ID：11642422
> 
> 赞同：0
> 
> 时间：2012-07-25T03:48:42.957
> 
> 标签：javascript, oop

在这种情况下，我定义了一个名为 DropHandler 的对象

```
function DropHandler(){}
DropHandler.prototype={
    AllowDrop : AllowDrop,
    Drag : Drag,
    Drop : Drop
} 
```

并且想在 Admin 对象中创建一个 DropHandler 的实例。但是下面的代码有什么不同呢？代码（2）在这种情况下似乎不能使用，它会得到一个未定义的类型错误

```
var BackendAdmin = function(){
    this.DropHandler = new DropHandler();//(1);
    var DropHandler = new DropHandler();//(2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T03:50:34.987

不同之处在于，在 (1) 中，您将新`DropHandler`对象分配给实例的`DropHandler`属性`BackendAdmin`，而在 (2) 中，您将其分配给局部`DropHandler`变量。

您会收到错误，因为解释器`var`会自动将其移动到方法的顶部（称为*Hoisting*），并且您的代码实际上如下所示：

```
var BackendAdmin = function(){
    var DropHandler;
    this.DropHandler = new DropHandler();//(1);
    DropHandler = new DropHandler();//(2);
} 
```

因此，您尝试调用该函数，该函数实际上被一个空变量覆盖。

PS：找不到关于JS变量提升的真正好的解释，但这是来自谷歌的东西：http: [//blog.binarymist.net/2011/11/14/scoping-hoisting-in-javascript/](http://blog.binarymist.net/2011/11/14/scoping-hoisting-in-javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:51:38.687

您不能拥有两个具有相同名称的独立实体（一个局部变量和一个作用域内的函数），并且它们仍然是可单独访问的实体。

创建局部变量时，它会暂时覆盖/隐藏该范围内的同名函数，并且该函数名在该范围内不再可访问。更改其中任何一个的名称，它应该像这样工作：

```
var BackendAdmin = function(){
    this.DropHandler = new DropHandler();//(1);
    var myDropHandler = new DropHandler();//(2);
} 
```

`this.DropHandler`有效，因为在这种情况下`DropHandler`是另一个对象的属性，因此与函数分开`DropHandler()`。

# php - Code Igniter - 转换为 MVC 模型 - 在结果集循环中选择

> ID：11642423
> 
> 赞同：0
> 
> 时间：2012-07-25T03:48:44.290
> 
> 标签：php, model-view-controller, codeigniter-2

我仍在尝试了解 MVC 我有一个直接的 php/mysql 页面，该页面基本上通过获取 select * FROM table1 然后循环遍历结果集并在每个循环上运行 Join 以查找子项目信息来工作。

但我不知道如何将其拆分并在 MVC 中执行。

代码如下所示，任何帮助或正确方向的指针都会受到重视！

```
mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
$query="SELECT * FROM building";
$result=mysql_query($query);

$num=mysql_numrows($result);

$i=0;
while ($i < $num) {
    //for loop make a table
    //this is the heading info

    $b_id=mysql_result($result,$i,"id");
    $address=mysql_result($result,$i,"address");
    $description=mysql_result($result,$i,"description");

?>
    <table width="772px" border="0" align="center" cellpadding="5" cellspacing="0">
     <tr bgcolor="#4682B4" height="50">
      <td width="5%"></td>
      <td><font size="4" face="tahoma" color="white"><strong><? echo $address; ?><a href="http://localhost:8888/project-add.php?b_id=<? echo $b_id; ?>">Add Project</a></strong></font></td>
      <td bgcolor="#4682B4" align="center" width="50%"><input id="lnk<? echo $i; ?>" type="button" value="[+] Expand" onclick="toggle_visibility('tbl<? echo $i; ?>','lnk<? echo $i; ?>');"></td>
     </tr>
     <tr>
      <td colspan="3">
       <table width="103%" border="1" cellpadding="5" cellspacing="0" id="tbl<? echo $i; ?>" class="tbl">

        <?
        $query="SELECT project.id AS p_id, project.name AS p_name, project.description AS p_des, project.building_id as p_b_id, building.id AS b_id, building.address AS b_name
            FROM project JOIN building
            ON project.building_id = building.id
            WHERE building_id='$b_id'";
        $proj_result=mysql_query($query);
        $proj_num=mysql_numrows($proj_result);

        $j=0;
        while ($j < $proj_num) { //while 1

            $p_id=mysql_result($proj_result,$j,"p_id");
            $p_name=mysql_result($proj_result,$j,"p_name");
            $p_des=mysql_result($proj_result,$j,"p_des");
            $b_name=mysql_result($proj_result,$j,"b_name");

        ?>
        <tr>
         <td width="5%"></td>
         <td width="45%"><? echo $p_name; ?></td>
         <td width="50%" align="center">XXXXXXX</td>
        </tr>

        <?
            $j++;
        } //end while 1
        ?>
      </table>
      </td>
     </tr>
    </table>
    <?
    $i++;
}

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:12:38.033

在现有代码库之上添加框架绝不是一件好事。尤其是如果您使用的是像 CodeIgniter 这样从根本上破坏的东西。

相反，您应该研究 OOP 以及这种范式的原则和法律。像[SOLID](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))和[LoD](http://c2.com/cgi/wiki?LawOfDemeter)这样的东西。

您应该研究的另一件事是放弃古老的`mysql_*`API。它不再维护。社区甚至已经开始推动[deprecation](http://news.php.net/php.internals/53799) ，这在文档中的[红框中](http://php.net/manual/en/function.mysql-connect.php)非常明显。建议开始使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果您选择 PDO，[这里有很好的教程](http://goo.gl/vFWnC)。

接下来是：将 HTML 与应用程序逻辑分开。PHP 本身是一种很好的模板语言。好好利用它。[这篇文章](http://codeangel.org/articles/simple-php-template-engine.html)可能会有所帮助。

此外，关于 MVC 中的模型主题，您可能会发现[此评论](https://stackoverflow.com/a/5864000/727208)很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:29:04.410

好的，不知道人们是否会对我的解决方案大喊大叫，但这就是我最终这样做的方式：感谢所有回复

```
public function index()
{

    $data['building'] = $this->building_model->get_building();

    $this->load->view('templates/header', $data);

    foreach ($data['building'] as $building_item)
    {
            $data['address']  = $building_item['address'];
            $data['id']  = $building_item['id'];
            $this->load->view('building/tbl1', $data);
            $data['project'] = $this->building_model->get_project($building_item['id']);
            $this->load->view('building/tbl2', $data);
            $this->load->view('building/tbl3');             

    }

    $this->load->view('templates/footer');

} 
```

# matlab - matlab中的3D体素显示

> ID：11642426
> 
> 赞同：5
> 
> 时间：2012-07-25T03:49:08.740
> 
> 标签：matlab, voxel

我有一个网格，它是 3D 的，它存储一个数字。

这是我的网格的示例，如果它是 2*2*2：

```
(:, :, 1) -> [0, 0;
              0, 0]
(:, :, 2) -> [0, 0;
              0, 0] 
```

如果那里不存在体素，数字 0 通常是我想用 color 或 nan 表示的数字。我想做的是用matlab显示一个体素网格，如下图所示：

![在此处输入图像描述](../Images/f6a5c5c8c69670728ec31c56444998f7.png)

除了元音应该用单元格中的数字着色。

有谁知道如何做到这一点，如果有一个图书馆或某种方式自己写？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T04:30:08.173

所以我发现你可以这样做：

```
for x = 1:GridSize(1)
    for y = 1:GridSize(2)
        for z = 1:GridSize(3)

            if (~isnan(VoxelGrid(x, y, z)))

                cubeLength = VoxelGrid.resolution;

                plotcube(   [cubeLength cubeLength cubeLength], ...
                            [x, y, z], ...
                            0.9, ...
                            [colour, colour, colour])
             end
         end
     end
 end 
```

这将打印出像这样的灰度体素表示：

![在此处输入图像描述](../Images/d144374981985c684c5610783c2c6032.png)

现在我只需要一些帮助才能使颜色正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-19T11:48:01.003

下面给出了完整的源代码，以不同的颜色绘制立方体。请记住，为了获取颜色信息，我们必须在 <0,1> 之间设置浮点值。因此，输入体积被标准化以在此范围内移动强度值，然后 plotcube 脚本用于显示单个立方体。用于获取颜色的脚本是 @Use [matlab color scheme to convert float to RGB](https://stackoverflow.com/questions/11642826/use-matlab-colour-scheme-to-convert-float-to-rgb)。绘制单个立方体是 @ [http://www.mathworks.com/matlabcentral/fileexchange/15161-plotcube](http://www.mathworks.com/matlabcentral/fileexchange/15161-plotcube)

```
%PLOTCUBE(EDGES,ORIGIN,ALPHA,COLOR)

VoxelGrid(:,:,1)=[5 3;8 1];
VoxelGrid(:,:,2)=[9 2;7 1];

%VoxelGrid=round(20*rand(8,8,8)); %Uncomment this line to display dense volume

GridSize=size(VoxelGrid);
for x = 1:GridSize(1)
    for y = 1:GridSize(2)
        for z = 1:GridSize(3)
            if (~isnan(VoxelGrid(x, y, z)))
                cubeLength = 1;
                f = VoxelGrid(x,y,z)/max(max(max(VoxelGrid)));
                cm = colormap; % returns the current color map
                colorID = max(1, sum(f > [0:1/length(cm(:,1)):1])); 
                colour = cm(colorID, :); % returns your color
                plotcube([cubeLength cubeLength cubeLength],[x, y, z],0.9,[colour]);
             end
         end
     end
end 
```

# javascript - Google Places Autocomplete API 限制国家/地区停止工作

> ID：11642429
> 
> 赞同：0
> 
> 时间：2012-07-25T03:50:04.660
> 
> 标签：javascript, google-maps, autocomplete, restriction

我正在运行一个 google place 自动完成项目。

我限制了仅输出特定国家/地区的地址。使用 componentRestrictions: {country: 'fr'} 代码。

这工作得很好，直到 2012 年 7 月 25 日。国家限制失败，现在突然显示所有地址。

我已经回去测试谷歌地图网站上的示例代码 [https://developers.google.com/maps/documentation/javascript/places#places_autocomplete](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)

并将其加载到 [http://jsfiddle.net/csdk3/](http://jsfiddle.net/csdk3/)

而且我仍然可以在不受限制的国家/地区获得所有地址。

如果我能得到一些帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:18:33.793

有一个[**错误**](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4302)已被识别，随后由 Google 修复。

[**演示**](http://maps.forum.nu/v3/gm_autocomplete.html)现在正在运行。（仅限澳大利亚地区）

# fuelphp - 如何使用 FuelPHP 的 ORM 对相关子模型进行排序

> ID：11642430
> 
> 赞同：2
> 
> 时间：2012-07-25T03:50:09.680
> 
> 标签：fuelphp

我有一个 3 级模型结构：

*   Model_Race has_many Model_Class

*   Model_Class has_many Model_Driver

现在，想象一下 Model_Class 和 Model_Driver 有一个 order_index 属性来保持它们的顺序。

有没有一种干净的方法来获得比赛并正确分类班级和车手？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T04:10:07.940

[文档](http://docs.fuelphp.com/packages/orm/relations/intro.html#/usage_rel_conditions)清楚地表明了这一点，我不知何故错过了它：

## *查找*数组语法

```
$race = Model_Race::find($id, array(
        'related' => array(
            'class' => array(
                'order_by' => array('order_index' => 'asc'),
                'related' => array(
                    'driver' => array(
                        'order_by' => array('order_index' => 'asc'),
                    )
                )
            )
        )
    )
); 
```

## 使用*查询*方法链接语法

*（我首选的方法优于上面的数组语法）*

```
$race = Model_Race::query()
    ->related('race.class')
    ->related('race.class.driver)
    ->order_by('race.class.order_index', 'asc')
    ->order_by('race.class.driver.order_index', 'asc')
    ->get(); 
```

## 将其构建到模型中

您可以在模型中设置关系，以便默认情况下发生这种情况：

种族模型：

```
protected static $_has_many = [
    'classes' => [
        'conditions' => [
            'order_by' => [
                'order_index' => 'asc'
            ]
        ]
    ]
]; 
```

班级型号：

```
protected static $_has_many = [
    'drivers' => [
        'conditions' => [
            'order_by' => [
                'order_index' => 'asc'
            ]
        ]
    ]
]; 
```

# xcode - 简单的事情：如何将新的 .h 和 .m 连接到 Storyboard Xcode

> ID：11642438
> 
> 赞同：0
> 
> 时间：2012-07-25T03:51:18.717
> 
> 标签：xcode, linker, storyboard

我已经在一个新的 .m 文件中编写了代码，但我不知道如何将它链接到情节提要以使其运行代码。请问有什么帮助吗？一个新的.m

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:31:32.293

将一个新的 ViewController 拖到情节提要中。现在为这个新的 ViewController 选择 File's Owner。转到自定义类并将类设置为您创建为 MyViewController.m 的 MyViewController 现在您可以将这个新的 ViewController 用于 MyViewController。另外，[看看这个](http://kurrytran.blogspot.in/2011/07/simple-ios-5-tutorial-using-storyboard.html)

# speech-recognition - 我应该为语音识别应用程序使用什么语音数据库和录音软件？

> ID：11642440
> 
> 赞同：0
> 
> 时间：2012-07-25T03:51:26.523
> 
> 标签：speech-recognition, text-to-speech, speech

我想实现一个可以识别我们方言的应用程序。

1.  我知道首先，我需要一个语音数据库，这样我才能制作语音语料库。你会推荐什么语音数据库？
2.  Audacity 适合录音吗？如果没有，你有什么推荐的？

我已经有一本单词词典（35 个单词）和录音设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:56:14.093

我建议使用[MS Speech SDK](http://www.microsoft.com/en-us/download/details.aspx?id=10121)。这个对我有用。不幸的是，您没有提及您使用的是什么操作系统，这只是 Windows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:45:12.757

> 你能推荐什么语音数据库？

语音数据库通常是一个文本文件和一个转录文件

> 大胆的录音会好吗？如果没有，你有什么推荐的？

是的

> 我已经有了单词词典（35 个单词）和录音设备。

这应该足够了

> 如果您有任何时间，我想请您的联系人与您交谈，也许我会通过电子邮件获得任何帮助。

您可以尝试使用 CMUSphinx 工具包进行声学模型训练。请参阅相应的教程部分

[http://cmusphinx.sourceforge.net/wiki/tutorialam](http://cmusphinx.sourceforge.net/wiki/tutorialam)

肯定的，看

[http://cmusphinx.sourceforge.net/wiki/communicate](http://cmusphinx.sourceforge.net/wiki/communicate)

# php - 如何使用 javascript 将数据 POST 到远程服务器？

> ID：11642442
> 
> 赞同：3
> 
> 时间：2012-07-25T03:51:38.130
> 
> 标签：php, javascript, post

我在javascript上有这段代码，

```
var path = 'remote site action.php';
var form = document.createElement("form");
form.setAttribute("method", 'POST');
form.setAttribute("action", path);
var code = "some info";

        var hiddenField = document.createElement("input");
        hiddenField.setAttribute("type", "hidden");
        hiddenField.setAttribute("name", "data");
        hiddenField.setAttribute("value", code);

        form.appendChild(hiddenField);
        document.body.appendChild(form);

 form.submit(); 
```

不幸的是，我无法将其发布到远程服务器。代码完成了它的工作，但是当我执行它时，远程页面显示访问被拒绝。（您没有权限）（远程服务器/action.php）。我应该更改远程页面的权限参数吗？...有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:57:35.473

如果您收到 403 访问被拒绝，那么问题是服务器不希望任何人看到该页面。如果是您的服务器，请尝试更改该页面的权限设置。如果您提交 HTML 表单，跨域应该不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:59:15.307

听起来您的服务器可以打开身份验证。您是否启用了基本身份验证？您是否允许 POST 到您的服务器或只能使用 GET？你是跨域提交吗？有很多可能的情况可能导致这种情况，因此您需要确定最可能的原因并从那里开始。如果 javascript 发布到您的服务器，那么问题不在于 JS，而在于您的服务器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T04:11:28.187

1.在浏览器的地址栏上查看。此脚本的 URL 应以 http:// 开头 **，而不是**C:\ 或 file:// （如果您的脚本另存为 .html 并通过单击运行它，则总是会发生这种情况）

2.查看你的脚本域。它应该与你的服务器/action.php相同

# android - Android - 更改屏幕方向，方向将应用于整个系统

> ID：11642446
> 
> 赞同：3
> 
> 时间：2012-07-25T03:52:26.707
> 
> 标签：android, screen-orientation

setRequestedOrientation 可用于更改活动中的屏幕方向。该效果将仅应用于活动。退出活动后，屏幕方向将恢复。有什么方法可以改变屏幕方向并且效果会被应用到 Android 系统，这样启动器和其他 APK 就会以当前的屏幕方向呈现。（该设备没有任何传感器来向 Android sensorservice 提供方向信息。）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:25:02.790

不，没有办法做到这一点。您的应用程序无法更改系统`Launcher`应用程序或任何其他第三方应用程序的显示方式。给开发人员这样做的能力会破坏用户体验……有些应用程序甚至不支持两种方向模式，所以无论如何它都没有多大意义。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:25:53.117

对不起。没有可用的方法可以改变 Android 系统的方向。

如果你真的想要，你将不得不对 Android 源代码本身进行更改，你也必须更改内核。

您必须在框架中创建一个方法，该方法将更改您所需的方向值。此方法将更改方向值（我猜内核使用 sys 文件系统处理方向值）。一旦文件中的值发生更改，内核将自动更改该设备方向。

# php - 带有 KedoUI 的 zend 框架

> ID：11642451
> 
> 赞同：0
> 
> 时间：2012-07-25T03:53:00.850
> 
> 标签：php, zend-framework, kendo-ui

嗨，我对 kendoUi 网格解决方案印象深刻，有没有人用 kendoui 做过 Zend 来列出数据库中的所有数据？

```
public function indexAction()
{
    // action body
    $generalSettingsMapper = new Application_Model_Mapper_GeneralSettingsMapper();
    $data = $generalSettingsMapper->fetchAll();
    $this->view->settings = json_encode($data);
} 
```

从这里怎么走..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:58:10.677

嗨，为了完成您对 kendoui 的疑问，我有一个简单的示例来为您演示，基本上继承自您所做的事情。基本上使用 json 我会做类似的事情

```
<script type="text/javascript">
$(document).ready(function() {

    var generalSettings = <?= $this->settings?>;

    $("#general_grid").kendoGrid({
        dataSource: {
            data: generalSettings ,
            schema: {
                model: {
                    id : "key",
                    fields: {
                        key: { type: "string" , editable: false },
                        value: { type: "string", editable: false }
                    }
                }
            }
        },
        scrollable:false,
        columns: [{ field: "key", title: "Key" , width : 150},
                { field: "value", title: "Value" ,width: 350}],
        editable: true
    });

});

function saveGeneralSettings()
{
    $("#success_message").hide();
    var griddataSource = $("#general_grid").data("kendoGrid").dataSource.data();
    var generalSettings = [];

    for (var i=0; i<griddataSource.length; i++ )
    {
        var temp = {};
        temp.key = griddataSource[i].key;
        temp.value = griddataSource[i].value;
        generalSettings.push(temp);
    }

    $.ajax({
        url: "<?= $this->baseUrl('yourmodule/yourcontroller/saveall') ?>",
        data: {general_settings :  generalSettings},
        dataType: "json",
        type: "POST",
        success: function(data){
            if (data.success == 1)
            {
                $("#success_message").show();
                $("#user_grid").data("kendoGrid").dataSource.read();
                $("#user_grid").data("kendoGrid").refresh();
            }
        }
    });
} 
```

saveall 的控制器是这样的

```
public function saveallAction()
{
    $generalSettings = $this->_getParam("general_settings");  // Get the General Settings
    $generalSettingsMapper = new Application_Model_Mapper_GeneralSettingsMapper();

    $isUpdated = $generalSettingsMapper->saveAll($generalSettings);
    if ($isUpdated)
    {
        $this->_helper->json(array('success' => 1));
    }
    else
    {
        $this->_helper->json(array('success' => 0));
    }
} 
```

希望这对您有所帮助，谢谢。

# mysql - MYSQL 触发器更新复制整行

> ID：11642456
> 
> 赞同：6
> 
> 时间：2012-07-25T03:53:31.410
> 
> 标签：mysql, triggers

我正在尝试创建一个触发器以将整行复制到任何*UPDATE*上的审计表中。

我有 2 张桌子

`Frequencies`和`Frequencies_Audit`

这是我的触发器。

```
create trigger auditlog 
before update on frequencies
for each row insert into
frequencies_audit select frequencies.*; 
```

当我更新记录时，我得到 Unknown Table `frequencies`。

如果可能，我不想单独输入每个字段名称，因为我们不断在数据库中添加列。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T05:51:12.260

而不是`BEFORE UPDATE`，您可以编写`AFTER UPDATE`触发器如下::

```
DELIMITER //
CREATE TRIGGER auditlog AFTER UPDATE ON frequencies
FOR EACH ROW BEGIN  
    INSERT INTO frequencies_audit select * from frequencies where freqId = NEW.freqId;
END;//
DELIMITER ; 
```

freqId 只是 Id 列的名称。将其替换为频率表中 Id 列的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:14:30.003

你可以试试这个

```
create trigger auditlog 
AFTER UPDATE on frequencies
for each row insert into
frequencies_audit select * from frequencies; 
```

因为在 MYSQL 中如果你写了`select TableName.*`那么它总是返回一个错误`Unknown table TableName`。

可能对你有帮助。

# ruby - 这些 rvm ruby 版本是什么意思

> ID：11642465
> 
> 赞同：20
> 
> 时间：2012-07-25T03:54:38.477
> 
> 标签：ruby, rvm

如果我运行这个命令

```
rvm list known 
```

我得到以下信息（仅显示一些条目）-

```
[ruby-]1.9.3[-p194]
[ruby-]1.9.3-head
ruby-head 
```

我想安装 ruby​​ 1.9.3。在网上的博客条目中，我看到人们刚刚提到

```
rvm install 1.9.3 
```

它实际上安装了 -p194 版本。

那么 ruby​​-head 与 1.9.3-head 与 1.9.3-p194 有何不同？并且应该安装其中一个而不是-p194？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-25T04:03:14.343

在版本控制中，您通常有一个主要的开发分支以及某些版本化的分支。主分支是未来，版本分支有一些围绕它们的策略。

因此，例如，ruby-head 是新功能的狂野游乐场，而 ruby​​-1.9.1 或 ruby​​-1.9.2 或 ruby​​-1.9.3 具有某些功能或语法锁定。

在功能分支中，还有更多正在进行的错误和安全修复。Ruby 1.9.3-p194 比 Ruby 1.9.3-p125 更新。无论出于何种原因，这两个版本之间的 68 个签入都没有公开发布。也许更改会引入更多错误。也许更改并没有完全解决它试图解决的问题。Ruby 1.9.3-head 是这个开发分支的负责人，具有绝对最新的变化（以及可能伴随的风险）。

通常，您要选择特定版本。当您询问“1.9.3 的某个版本”并说“我会给您该分支中最新批准的版本”时，这就是 RVM 正在为您做的事情。这些有福的版本已经过软件维护人员的审查和批准。选择一个`-head`分支是在发展的最前沿冲浪。这可能会有所帮助——也许有人昨天刚刚检查了你遇到的某个问题的修复；也许解释器的速度快 2% 或内存效率更高——但它更有可能给你带来麻烦。

# magento - Magento 来自 live - 本地服务器显示 404 错误消息

> ID：11642468
> 
> 赞同：0
> 
> 时间：2012-07-25T03:55:12.360
> 
> 标签：magento, url-rewriting

我将 100% 工作的 magento 站点从实时服务器移动到我的本地主机。

搬家成功了。

但是有一个问题是主页会正确显示。

但是当我点击其他导航菜单时，它会显示 404 not found 错误消息。

例如这是我的网站链接：

```
http://localhost/bc/ 
```

现在该网站已完美加载，但是当我单击菜单时，网址为：

```
http://localhost/bc/fresh-fruit.html 
```

它显示 404 not found 错误。

如果我将 index.php 包含在它们之间，则该页面正确加载，即：

```
http://localhost/bc/index.php/fresh-fruit.html 
```

上面的链接正确加载了点击的页面。

那么我该如何解决这个问题呢？

真正的问题是什么？

这是显示的错误消息：

```
Not Found

The requested URL /bc/fresh-fruit.html was not found on this server. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T04:41:09.657

It looks like URL rewriting is not working on your localhost. Assuming you're using Apache on your localhost, here's some things to check:

1.  Check that the .htaccess file exists in your /bc folder. .htaccess is a hidden file so it's easy to not copy it across when you copied the rest of the site (especially if using graphical tools)
2.  Check that mod_rewrite is enabled on your server.
3.  Check that .htaccess files are enabled for the /bc folder.
4.  Check that file permissions allow the apache user to read the .htaccess file (note: Apache runs as a different user to your normal login, so the fact that you might be able to read it doesn't necessarily mean Apache can.

# php - Android HTTPPost 列表 发布到 php？

> ID：11642470
> 
> 赞同：0
> 
> 时间：2012-07-25T03:55:17.617
> 
> 标签：php, android, http-post, http-get

我一直在寻找几个小时，但我仍然不清楚`HTTPPost`方法。我有这样的代码......

```
httpclient = new DefaultHttpClient();
httppost = new HttpPost(url);
// Add your data
Log.i("ACTIVITY","PostInfo");
List<NameValuePair> pairs = new ArrayList<NameValuePair>();
pairs.add(new BasicNameValuePair("email", stringeditemail));
httppost.setEntity(new UrlEncodedFormEntity(pairs)); 
```

这是否应该将信息从指定站点发布到给定的 php？如果是这样，我做错了什么没有发布？

这是我的 PHP

```
<?php

require('include/config.php');
 require('include/function.php');
require('classes/captcha.class.php');
require('language/' .$_SESSION['language']. '/signup.lang.php');

if ( $config['user_registrations'] == 0 ) {
$msg = $lang['signup.registration_disabled'];
session_write_close();
header('Location: index.php?msg=' .$msg);
die();
}

$email      = NULL;
if ( isset($_REQUEST['action_signup']) && $_REQUEST['action_signup'] != '' ) 
{
$email      = $filterObj->process(trim($_POST['email']));

if( $email == '' )
    $err = $lang['signup.email_empty'];
elseif ( !check_email($email) )
    $err = $lang['signup.email_invalid'];
elseif ( check_field_exists($email, 'email', 'signup') == 1 )
    $err = $lang['signup.email_exists'];

$_REQUEST['pack_id'] == '' )
    $err = $lang['signup.select_package'];

    if ( $err == '' ) {
    $email      = mysql_real_escape_string($email);

    $sql        = "insert into signup set email='" .$email. "';
    $conn->execute($sql);

    if( $config['enable_package'] == 'yes' ) {
        $pack_id = mysql_real_escape_string($_REQUEST['pack_id']);
        $sql = "select * from package where pack_id='" .$pack_id. "'";
        $rs  = $conn->execute($sql);

        } else {
            $sql = "update signup set acount_status='Inactive' where        UID='" .$userid. "' limit 1";
            $conn->execute($sql);
            session_write_close();
            header("Location: pack_ops.php?pack=$_REQUEST[pack_id]&uid=".base64_encode($userid));
            die();
        }
    }

    $sql = "INSERT INTO users_online (UID, online) VALUES (" .$userid. ", " .time(). ")";
    $conn->execute($sql);

            $_SESSION['EMAIL']      = $_REQUEST['email'];

    $ran=time().rand(1,99999999);
    $sql="update verify as v, signup as s set v.vcode='" .$ran. "', s.emailverified='no' WHERE v.UID=s.UID and v.UID='" .$userid. "'";
    $conn->execute($sql);
    STemplate::assign('vcode',$ran);

    $to         = $_SESSION['EMAIL'];
    $name       = $config['site_name'];
    $from       = $config['admin_email'];
    $rs         = $conn->execute("select * from emailinfo where email_id='verify_email'");
    $subj       = $rs->fields['email_subject'];
    $email_path     = $rs->fields['email_path'];
    $mailbody   = STemplate::fetch($email_path);
    mailing($to,$name,$from,$subj,$mailbody);

    $_SESSION['verification_sent'] = $lang['signup.verification_sent'];

    $redirect = ( isset($_SESSION['redirect']) && $_SESSION['redirect'] != '' ) ? $_SESSION['redirect'] : $config['BASE_URL'];
    $_SESSION['redirect'] = NULL;

    session_write_close();
    header('Location: ' .$redirect);
    die();
}
  }

if ( $config['enable_package'] == 'yes' ) {
    $sql = "select * from package where status = 'Active' order by price desc";
    $rs = $conn->execute($sql);
    STemplate::assign('package', $rs->getrows());
}

STemplate::assign('err',$err);
STemplate::assign('msg',$msg);
STemplate::assign('head_bottom',"homelinks.tpl");
STemplate::assign('username', $username);
STemplate::assign('email', $email);
STemplate::display('head1.tpl');
STemplate::display('err_msg.tpl');
STemplate::display('signup.tpl');
STemplate::display('footer.tpl');
STemplate::gzip_encode();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:34:33.343

像这样尝试，您可以使用：`HttpClient.exeucute(httpPost)`并获取 HttpResponse

这对我来说很完美。

```
DefaultHttpClient client = new DefaultHttpClient();

    HttpPost post = new HttpPost(url);

    List<NameValuePair> params = new ArrayList<NameValuePair>();

    pairs.add(new BasicNameValuePair("email", stringeditemail));

    UrlEncodedFormEntity formEntity = null;
    try {
        formEntity = new UrlEncodedFormEntity(params);

    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    post.setEntity(formEntity);

    try {

        HttpResponse response = client.execute(post);
        int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode == HttpStatus.SC_OK) {
            HttpEntity entity = response.getEntity();
            InputStream is = entity.getContent();
            return iStream_to_String(is);
        } else {
            return "Hello This is status ==> :"
                    + String.valueOf(statusCode);
        }
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return null;

} 
```

并创建将 stringbuilder 转换为 string 的方法

```
 public static String iStream_to_String(InputStream is1) {
    BufferedReader rd = new BufferedReader(new InputStreamReader(is1), 4096);
    String line;
    StringBuilder sb = new StringBuilder();
    try {
        while ((line = rd.readLine()) != null) {
            sb.append(line);
        }
        rd.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String contentOfMyInputStream = sb.toString();
    return contentOfMyInputStream;
} 
```

# mercurial - 如何在 mercurial 中重写历史以修改作者的姓名？

> ID：11642471
> 
> 赞同：0
> 
> 时间：2012-07-25T03:55:51.493
> 
> 标签：mercurial, eclipse-plugin, google-code, mercurialeclipse

我在谷歌代码上有一个 mercurial (hg) 存储库，看起来像[这样](http://code.google.com/p/sage/source/browse/)。

由于拼写错误，我要做的是编辑作者的名字（在这种情况下为“彼得安德鲁斯”）。存储库已被放弃，除了尝试更改名称之外，不会有进一步的提交。

我怎么能做那样的事情？

谢谢。

PS。我正在使用 MercurialEclipse

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:34:11.967

我知道的唯一可能的方法是将您的存储库转换为新的 Mercurial 存储库，使用带有[选项的 Mercurial](http://mercurial.selenic.com/wiki/ConvertExtension#A--authors)[转换扩展](http://mercurial.selenic.com/wiki/ConvertExtension)。 在转换过程中，您可以通过提供带有“映射”的文本文件来更改作者的姓名。[`--authors`](http://mercurial.selenic.com/wiki/ConvertExtension#A--authors)

引用第二个链接：

> `--authors`如果提供了选项，Convert 还可以在转换期间重新映射作者姓名 。参数应该是一个简单的文本文件，将每个源提交作者映射到目标提交作者。对于使用 UNIX 登录来识别作者（例如：CVS）的源 SCM 来说，这很方便。例子：
> 
> ```
> john=John Smith <John.Smith@someplace.net>
> tom=Tom Johnson <Tom.Johnson@bigcity.com> 
> ```

**缺点：**
您必须删除 Google Code 上的存储库并将其替换为转换后的存储库，这意味着克隆旧存储库的每个人都需要删除其本地副本并再次拉取。
删除和替换服务器上的 repo 可能会感觉有点笨拙，但是 AFAIK 之后没有其他方法可以更改作者姓名。

# wordpress - WordPress wp_nav_menu 打破了我的循环

> ID：11642479
> 
> 赞同：0
> 
> 时间：2012-07-25T03:56:19.117
> 
> 标签：wordpress, loops

当我尝试更新一直使用 wp_list_pages 的旧主题以使用 wp_nav_menu 时，显示我的帖子和页面的循环会中断。我尝试了不同的实现，包括：

[http://thinkvitamin.com/code/getting-started-with-wordpress-custom-menus/](http://thinkvitamin.com/code/getting-started-with-wordpress-custom-menus/)

[http://wpfirstaid.com/2010/07/upgrade-wp_list_pages-to-wp_nav_menu/](http://wpfirstaid.com/2010/07/upgrade-wp_list_pages-to-wp_nav_menu/)

以及来自 WordPress codex 的基本实现。

对 functions.php 进行更改对循环没有影响，但是当我将任何版本的 wp_nav_menu 添加到我的模板中时，它会阻止调用帖子或页面的循环工作。我的循环是：

```
<?php if (have_posts()) : while (have_posts()) : the_post(); ?> 
```

如果我使用 query_posts，则内容将显示，但有关循环的某些内容不适用于 wp_nav_menu。出现的是一个 ID 错误的空帖子（并且 post_class 也无法正常工作）：

```
<div class="post--42 post type-post status-publish format-standard hentry" id="post--42">
        <h2></h2> 
```

代码是：

```
<div <?php post_class() ?> id="post-<?php the_ID(); ?>">
        <h2><?php the_title(); ?></h2> 
```

就在故障回路的下方。每个帖子或页面都会显示此特定 ID。

有任何想法吗？

编辑添加：

现在在functions.php中我有：

```
add_action('init', 'register_custom_menu');

function register_custom_menu() {
register_nav_menu('header', 'Header Menu');
} 
```

在我的 header.php 中，我有：

```
<?php wp_nav_menu(array('menu' => 'Header Menu')); ?> 
```

我创建的菜单是在 GUI 中选择的。菜单显示完美，但页面上的内容不见了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:08:18.750

根据您提供的信息，我认为您需要添加 endwhile，如下所示。让我知道是否是这种情况:)

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

and ends here:

<?php endwhile; else: ?>
<p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
<?php endif; ?> 
```

请务必在主题模板的顶部包含对标题模板的调用。如果您在自己的设计中使用循环（并且您自己的设计不是模板），请将 WP_USE_THEMES 设置为 false。

```
<?php define('WP_USE_THEMES', false); get_header(); ?> 
```

**参考链接**- [http://codex.wordpress.org/The_Loop](http://codex.wordpress.org/The_Loop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:04:15.103

问题出在 Shopp 插件上。显然这是 Shopp 的一个已知问题：[https ://shopp.lighthouseapp.com/projects/47561/tickets/1905-shopp-products-in-theme-menu-causes-blank-pages](https://shopp.lighthouseapp.com/projects/47561/tickets/1905-shopp-products-in-theme-menu-causes-blank-pages)

解决方法是创建自定义菜单项，而不是将产品放入菜单中。

# c# - 如何获得不依赖于操作系统的唯一机器 GUID？

> ID：11642484
> 
> 赞同：1
> 
> 时间：2012-07-25T03:56:50.677
> 
> 标签：c#, .net, guid

我正在尝试为我在 C# 中制作的 Windows Web 应用程序生成一个唯一的 GUID。有人对我如何做到这一点有建议吗？我需要一个不依赖于系统操作系统（Mac、Windows、Linux）的唯一机器 GUID。我从哪里开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T04:25:09.257

根据定义，GUID 是唯一的。您可以使用以下内容生成新的 GUID：

```
var guid = Guid.NewGuid(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:35:46.260

我正在使用系统的网络 ID，这就是我所做的：

```
Guid macAddressGuid;
NetworkInterface[] networkInterface = NetworkInterface.GetAllNetworkInterfaces();
string id = networkInterface.FirstOrDefault().Id;

Guid.TryParse(id, out macAddressGuid);

return macAddressGuid; 
```

你们中的一些人可能会说*这可以被欺骗并且它可以*，但是在我正在构建的应用程序类型中，由于应用程序的性质，这不是一个大的安全问题。如果用户希望获得更好的安全性，他们可以注册。

谢谢大家的投入，我真的很感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T04:03:20.570

有一个由 Windows 安装程序创建并存储在 Windows 注册表中的 GUID。但你不能相信这是独一无二的。对于其他平台，可能有也可能没有类似的东西，具体取决于操作系统。您最终将自己为系统创建和管理 GUID。

# android - RestService 没有给出预期的结果

> ID：11642485
> 
> 赞同：0
> 
> 时间：2012-07-25T03:57:05.450
> 
> 标签：android, rest, salesforce, apex-code

嗨，我在 salesforce.com 平台上的 apex 中编写了一个基本的 Web 服务，这是 apex 代码

```
@RestResource(urlMapping='/gggg')

global with sharing class HelloWorld{

@HttpPost
global static String doPut(){
RestRequest req=RestContext.request;
RestResponse res=RestContext.response;
String body1=req.requestBody.toString();

  return body1;

}

} 
```

我正在尝试使用 android 向该服务发送一个发布请求，首先我对其进行授权，然后获取访问令牌和刷新令牌，然后我再次获得 access_token，因此访问令牌没有问题。这里是 android 客户端的代码

```
 URL url1=new URL("https://ap1.salesforce.com/services/apexrest/gggg");
                                    HttpURLConnection connection=(HttpURLConnection) url1.openConnection();
                                    connection.addRequestProperty("Authorization", "OAuth "+str);
                                    connection.setRequestMethod("POST");
                                connection.setDoOutput(true);

                                String jsonbody="[{type:QwikScore_Question_Answer__c ,id:a03900000034MfA ,field:{id:Answer_Text__c,value:1.0}}]";
                                OutputStream st=connection.getOutputStream();
                                st.write(jsonbody.getBytes());
                                st.close();
                                    connection.connect();
                                    BufferedReader reader=new BufferedReader(new InputStreamReader(connection.getInputStream()));
                                    String ss="";
                                    String ss1="";
                                    while((ss=reader.readLine())!=null){
                                        ss1+=ss;
                                    }
                                    Log.i("Hello world",ss1); 
```

在 Logcat for Hello World 的输出响应中，我得到“”作为输出，请指出为什么我没有得到正确的输出。我期待 [{type:QwikScore_Question_Answer__c,id:a03900000034MfA,field:{id:Answer_Text__c,value:1.0} }] 作为输出，因为我发送 st.write(jsonbody.getBytes()); jsonbody 作为请求的主体。请帮助我如何获得正确的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:11:00.470

在您的请求中，您从未设置内容类型标头，因此服务器不知道如何解析有效负载。

# sql-server-2008 - 怎么写sql语句呢？

> ID：11642486
> 
> 赞同：0
> 
> 时间：2012-07-25T03:57:07.453
> 
> 标签：sql-server-2008

> **可能重复：**
> [sql语句怎么写？](https://stackoverflow.com/questions/11642323/how-to-write-the-sql-statement)

```
IncidentReportid                  Interviewers                 MainInterviewer 
18 :Name/nric/Desg/iunit/remark: NAME2/inric/iDesg/iunit/iremark:                nric
19 :irank/inric/iDesg/iunit/iremark:irank1/inric1/iDesg1/iunit1/iremark1:        inric  
20 :irank4/inric4/iDesg4/iunit4/iremark4:irank5/inric5/iDesg5/iunit5/iremark5:   inric5
21 :irank7/inric7/iDesg7/iunit7/iremark7:irank8/inric8/iDesg8/iunit8/iremark8:   inric7
23 :irank9/inric9/iDesg9/iunit9/iremark9:irank6/inric6/iDesg6/iunit6/iremark6:   inric9
24 :RankOfAddison/aNRIC/aInstructor/aUnit/aRemark:RankOfNang/nNRIC/nInstructor/nUnit/nRemark:  aNRIC 
```

例如。我有上面的表格，我想得到如下数据。谢谢。:)

```
IncidentReportid                Interviewers       MainInterviewer             
18                                Name             nric
19                                irank            inric                 
20                                irank5           inric5               
21                                irank7           inric7                 
23                                irank9           inric9                
24                                RankOfAddison    aNRIC 
```

主要是我想获得“面试官”的名字取决于主要面试官的身份证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:03:30.877

```
select IncidentReportid,
       SUBSTRING(Interviewers,2,CHARINDEX('/',Interviewers)-2) as Interviewers,
       MainInterviewer
from Table 
```

# git-svn - 从 git 自动更新 svn

> ID：11642487
> 
> 赞同：1
> 
> 时间：2012-07-25T03:57:10.630
> 
> 标签：git-svn

这就是我想做的。可能吗

*   在 git 中有项目。很多人推，拉，合并等。正常的工作流程
*   在它的主分支中只有一个 git repo 的推送更改到 svn。

没有其他人会提交 svn repo。这只是一个方向。从 git 到 svn。它只会对 git 上的 master 进行更改并将它们添加到 svn。svn 基本上是 master 分支的 svn 版本。

我以为我能做到

```
git svn dcommit 
```

一遍又一遍

```
..edit, push and or pull files..
git commit -a -m "foo1"
git svn dcommit
..edit, push and or pull files..
git commit -a -m "foo1"
git svn dcommit
..edit, push and or pull files..
git commit -a -m "foo1"
git svn dcommit 
```

但这似乎不起作用。我不断收到冲突和消息，例如

```
$ git svn dcommit
Committing to https://my.svn.repo/svn/ ...
        M       README.md
Committed r18619
        M       README.md
r18619 = 8f00073a3f1987e97a0f0f194798b6e02e9b0345 (refs/remotes/git-svn)
No changes between current HEAD and refs/remotes/git-svn
Resetting to the latest refs/remotes/git-svn
Unstaged changes after reset:
M       README.md
        M       README.md
Committed r18620
        M       README.md
r18620 = 47313477c1e38959fadd43d0001ff55210637669 (refs/remotes/git-svn)
No changes between current HEAD and refs/remotes/git-svn
Resetting to the latest refs/remotes/git-svn 
```

这似乎很可疑。git status 给了我

```
# On branch master
# Your branch and 'origin/master' have diverged,
# and have 2 and 2 different commits each, respectively.
# 
```

我觉得我从根本上错过了一些东西。就像我根本不应该使用 git-svn 一样。事实上，如果我所做的只是这个

```
cd ~/git-folder
..edit files..
git commit -a -m "foo"
cd ~/svn-folder
cp -r ~/git-folder .
svn commit -m "foo" 
```

它实际上会起作用，我只会丢失所有提交消息和个人提交。

有人可以指出我错过了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:08:43.013

一切都好。'origin/master' 和使用 refs/remotes/git-svn 来反映 SVN 状态的 git-svn 之间没有关系。'master' 和 'origin/master' 出现分歧，因为 git-svn 没有触及 'origin/master' 而是将 'master' 中的提交替换为具有（通常）相同内容但具有“git-svn-id”签名的提交提交消息（因此 sha-1 哈希以这种方式更改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:05:03.417

对我来说，输出`git svn dcommit`看起来不错，它只是在 SVN 存储库中重新创建 Git 提交。如果您`svn co`是 SVN 存储库，您会看到相同的提交。

我怀疑您已经从其他地方克隆了 Git 存储库，或者已经推送了存储库，正如您有一个`origin/master`分支这一事实所表明的那样；git-svn 分支不会添加到`origin`遥控器下。

换句话说，我在这里看不到任何引起警报的东西。一切似乎都按预期工作。

# mysql - 共享 auto_increment `id` 和表关系

> ID：11642490
> 
> 赞同：1
> 
> 时间：2012-07-25T03:57:48.937
> 
> 标签：mysql, sql

我有三张桌子：

```
`brands`        (`id`, `name`)
`categories`    (`id`, `name`)
`products`      (`id`, `name`, `brand_id`, `category_id`) 
```

还有更多列，尽管这些是唯一与该问题相关的列。

我希望所有三个表共享相同的`auto_increment` `id`（即，使`id`三个表的唯一交叉）。后者可以通过使用引用适当表的公共表轻松解决：

```
`entries` (`id`, `name`, `type_id`) 
```

问题是在原始场景中，所有表都有外部约束：

*   如果类别被删除，设置 NULL products.category_id
*   如果品牌被删除，级联 products.brand_id
*   如果产品被删除，级联所有评论

有哪些替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:01:07.053

在 MySQL 中执行此操作的唯一方法是创建一个具有单列的`AUTO_INCREMENT`表，插入到该表中，获取最后插入的 ID（具体执行方式取决于您使用的 MySQL 客户端库），然后使用它将行插入其他表之一时的 ID。

（遗憾的是 PostgreSQL 并不比 MySQL 更受欢迎，因为它开箱即用地支持这个特性：你只需要在表之间共享一个序列对象。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:00:09.467

看来您想要一个跨项目的唯一标识符，但密度或单调性似乎不是要求...... UUID () 就足够了吗？

# xml - 使用 powershell 使用 XML Web 服务

> ID：11642493
> 
> 赞同：1
> 
> 时间：2012-07-25T03:57:58.477
> 
> 标签：xml, web-services, powershell

我有一些内部 Web 服务需要定期检查，我正在尝试为它们编写一个 powershell 脚本。我在 powershell 2.0 上，所以我不能使用“invoke-webrequest”，我仅限于“New-WebServiceProxy”或做一些魔术。我尝试了此处和类似页面中的示例：http: [//thepowershellguy.com/blogs/posh/archive/2009/05/15/powershell-v2-get-weather-function-using-a-web-service.aspx](http://thepowershellguy.com/blogs/posh/archive/2009/05/15/powershell-v2-get-weather-function-using-a-web-service.aspx)

我是 Web 服务和 powershell 的新手，所以我通过示例学习。所有这些都具有格式良好的 WSDL，呈现 XML 结构等。它们公开了方法和方法采用的参数。

我的内部 Web 服务不是那样的，它们有 schemasLocation，并且看起来像“多级关系”，例如，在我的 WSDL 上，我得到了一个有趣的方法：

```
$proxy | get member 
```

然后我尝试使用公式获取方法的重载

```
$proxy.InterestingMethod 
```

我得到的只是这样的：

```
Microsoft.PowerShell.Commands.NewWebserviceProxy.AutogeneratedTypes.WebServiceProxy1com_ABCWS_Service_wsdl.DBResponse getDB(Microsoft.PowerShell.Commands.NewWebserviceProxy.AutogeneratedTypes.WebServiceProxy1com_ABCWS_Service_wsdl.DBRequest DBRequest) 
```

我期待我必须发送的参数列表！我没有在 WSDL 上找到对“DBRequest”的引用，我在 Schema 上看到它们，在另一个 URL 上，它们似乎在不同元素上具有登录名、密码、名称、地址等，在多个级别上， ，所以我不知道如何构造发送这些参数的请求。

此时我不知道我是否可以在 powershell 上使用 NewWebservice 代理。我想知道这是否仍然可以完成，或者我需要学习如何在没有 Newwebservice Proxy CMDLET 的情况下使用 Web 服务“原始”并自己处理 XML（显然，非常复杂）我这样做对吗？或者我需要以某种方式考虑这个架构 URL？

多谢你们。多蒂

-- 我在今天 7 月 25 日添加了更多详细信息。可能是，但我不确定如何发送带有数组的参数（我今天正在阅读一本关于 powershell 的书，它也可能对我有帮助），例如，在 WSDL 中，该方法如下所示：

```
'<message name="getDB"><part name="request" element="ns1:DBRequest"/></message><message name="getDBResponse"><part name="response" element="ns2:DBResponse"/></message>' 
```

WSDL 引用了两个模式，如果我使用 Firefox 打开它们，在一个上我会看到请求方法，就像这样

```
'<xs:element name="DBRequest"><xs:complexType><xs:sequence><xs:element name="credentials" type="ns1:Credentials" form="qualified"/><xs:element name="Params" type="ns1:Params" form="qualified"/><xs:element name="Info" type="ns1:Info" form="qualified"/></xs:sequence></xs:complexType></xs:element><xs:element name="DBResponse"><xs:complexType><xs:sequence><xs:element name="transactionResponse" type="ns1:TransactionResponse" form="qualified"/><xs:element name="extremeResponse" type="ns1:extremeResponse" form="qualified" minOccurs="0" maxOccurs="unbounded"/><xs:element name="expressResponse" type="ns1:expressResponse" form="qualified" minOccurs="0" maxOccurs="unbounded"/></xs:sequence></xs:complexType></xs:element></xs:schema>' 
```

另一方面，我看到了对我必须发送的参数详细信息的引用，如下所示：

'xs:complexType name="凭据">'

像这样

```
'<xs:complexType name="Params"><xs:sequence><xs:element name="age" type="xs:string" minOccurs="0"/><xs:element name="cType" type="tns:CTypeEnum"/><xs:element name="Method" type="xs:string"/><xs:element name="sType" type="tns:sTypeEnum"/></xs:sequence></xs:complexType>' 
```

明白了吗？WSDL 没有显示我必须传递的参数（或参数），它们位于架构内，因此，我无法弄清楚如何构造请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:36:41.530

根据错误您是否尝试：

```
$proxy.getDB("Your database request") 
```

# android - android.net.uri getQueryParameterNames() 替代

> ID：11642494
> 
> 赞同：6
> 
> 时间：2012-07-25T03:57:59.787
> 
> 标签：android, api, parameters, uri

我正在寻找一种从 android.net.Uri 获取查询参数名称的替代方法。getQueryParameterNames() 需要 api 级别 11。我想对任何较低级别的 api 做同样的事情。我正在查看 getQuery() 它将在“？”之后返回所有内容 符号。解决这个问题的最好方法是解析该字符串并在“=”之前搜索所有内容并捕获它吗？我根本不知道每次会呈现什么查询参数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T21:01:03.110

APIs < 11 的唯一问题是没有实现此方法。我想最好的办法是查看 Android 源代码并使用 API >= 11 的实现。即使在较旧的 API 上，这也应该让您获得绝对相同的功能。

这个是4.1.1的，修改为以Uri为参数，所以可以马上使用：

```
/**
 * Returns a set of the unique names of all query parameters. Iterating
 * over the set will return the names in order of their first occurrence.
 *
 * @throws UnsupportedOperationException if this isn't a hierarchical URI
 *
 * @return a set of decoded names
 */
private Set<String> getQueryParameterNames(Uri uri) {
    if (uri.isOpaque()) {
        throw new UnsupportedOperationException("This isn't a hierarchical URI.");
    }

    String query = uri.getEncodedQuery();
    if (query == null) {
        return Collections.emptySet();
    }

    Set<String> names = new LinkedHashSet<String>();
    int start = 0;
    do {
        int next = query.indexOf('&', start);
        int end = (next == -1) ? query.length() : next;

        int separator = query.indexOf('=', start);
        if (separator > end || separator == -1) {
            separator = end;
        }

        String name = query.substring(start, separator);
        names.add(Uri.decode(name));

        // Move start to end of name.
        start = end + 1;
    } while (start < query.length());

    return Collections.unmodifiableSet(names);
} 
```

如果你想自己深入研究，这里是原始代码：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/net/Uri.java?av=f](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/net/Uri.java?av=f)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-05T21:23:43.570

如果您有一个`java.net.URI`（或创建一个），您可以使用`URLEncodedUtils.parse`以下方式获取参数和值`NameValuePair`：

```
Map<String, String> parameters = Maps.newHashMap();
List<NameValuePair> params = URLEncodedUtils.parse(uri, "UTF-8");
for (NameValuePair param : params) {
    parameters.put(param.getName(), param.getValue());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T17:42:32.080

我同意 foxter 的观点，最好的选择是从最新的 Android 版本中获取代码并添加到您的代码库中。每次我遇到这样的问题时，我都会创建一种方法来抽象版本特性。它是这样的：

```
public class FWCompat {
    public static boolean isFroyo_8_OrNewer() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO;
    }
    public static boolean isGingerbread_9_OrNewer() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD;
    }
    public static boolean isHoneycomb_11_OrNewer() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB;
    }
    public static boolean isHoneycomb_13_OrNewer() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2;
    }
    public static boolean isJellyBean_16_OrNewer() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN;
    }
}

@SuppressLint("NewApi")
public class FWUriCompat {

    public static Set<String> getQueryParameterNames(Uri uri) {
        if (FWCompat.isHoneycomb_11_OrNewer()) {
            return uri.getQueryParameterNames();
        }

        return FW_getQueryParameterNames(uri);
    }

    private static Set<String> FW_getQueryParameterNames(Uri uri) {
        if (uri == null) {
            throw new InvalidParameterException("Can't get parameter from a null Uri");
        }

        if (uri.isOpaque()) {
            throw new UnsupportedOperationException("This isn't a hierarchical URI.");
        }

        String query = uri.getEncodedQuery();
        if (query == null) {
            return Collections.emptySet();
        }

        Set<String> names = new LinkedHashSet<String>();
        int start = 0;
        do {
            int next = query.indexOf('&', start);
            int end = (next == -1) ? query.length() : next;

            int separator = query.indexOf('=', start);
            if (separator > end || separator == -1) {
                separator = end;
            }

            String name = query.substring(start, separator);
            names.add(Uri.decode(name));

            // Move start to end of name.
            start = end + 1;
        } while (start < query.length());

        return Collections.unmodifiableSet(names);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T04:26:29.843

好的，这就是我想出的。没有编译或测试过，所以这里不能保证

```
ArrayList<String> getQueryParamNames(String input) 
{
    ArrayList<String> result = new ArrayList<String>();
    //If its everything after the ? then up to the first = is the first parameter
    int start = 0;
    int end = input.indexOf("=");

    if (end == -1) return null; //No parameters in string

    while (end != -1)
    {
        result.Add(input.substring(start, end)); //May need to do end - 1 to remove the =
        //Look for next parameter, again may need to add 1 to this result to get rid of the &
        start = input.indexOf("&", end); 
        if (start == -1) //No more parameters
            break;

        //If you want to grab the values you can do so here by doing
        //input.substring(end, start);

        end = input.indexOf("=", start);
    }
    return result;  
} 
```

我在深夜写了这篇文章，没有测试它，所以你可能需要通过加或减 1 来调整一些调用。另外我可能忘记了添加到 a 的确切语法`List`。我想评论任何错误供其他人查看，但这是它的一般要点。我有一种感觉，我忘记了`;`某个地方。

编辑：将结果设置为新的 ArrayList 而不是 LinkList，如下所示

# wordpress - wordpress wp_nav_menu 排除类别

> ID：11642501
> 
> 赞同：0
> 
> 时间：2012-07-25T03:59:20.177
> 
> 标签：wordpress, categories

我想从我的主菜单中排除“未分类”类别。菜单由 wp_nav_menu() 函数生成。

我在网上搜索过，但一直被引导到使用类似的东西排除页面

`wp_list_pages(exclude=1,2,3)`

函数，但这不是生成我的标题菜单的函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:33:52.257

您需要添加自定义菜单。按着这些次序：

1.  转到外观 > 菜单。
2.  在右侧，您将看到一个用于添加新菜单的表单。输入菜单名称；说“menu-1”，然后单击“创建菜单”按钮。
3.  在“主题位置”部分中，从“主菜单”下拉列表中选择您的菜单，然后单击“保存”。
4.  接下来，向下滚动到“页面”部分，然后选择您希望在菜单上显示的页面。单击“添加到菜单”按钮。这些页面现在将出现在右侧。（您也可以在此菜单中添加类别。）
5.  最后，单击“保存菜单”按钮。您的主菜单已创建。

# oracle - 在前端显示警报框以显示后端的错误

> ID：11642503
> 
> 赞同：0
> 
> 时间：2012-07-25T03:59:52.860
> 
> 标签：oracle, jsp, jquery

> **可能重复：**
> [从数据库中删除表时在网页中显示表已删除消息](https://stackoverflow.com/questions/11646533/show-table-deleted-message-in-webpage-when-it-is-deleted-from-database)

我使用 ORACLE 10g 作为数据库，使用 JSP 作为前端。

当用户按下选项卡时，数据将从服务器获取并显示在前端。当在后端删除表或当用户按下选项卡时与服务器的连接中断时，我想在前端显示一个**ALERT 框。**

我该怎么做？警报框应显示：

1.  与服务器连接出错时与服务器的连接错误

2.  当在后端删除表时删除表，同时通过按选项卡从前端获取数据。

我有一个jsp 页面，其中有前端用户界面以及用于从服务器获取数据的java 代码。它不指向任何其他页面。我用谷歌搜索并找到了一些例子。

```
$.ajax({
  url: "test.html",
  context: document.body,
  success: function(){
    //do something on success
  }
}); 
```

我该如何处理 url 选项？

# midi - 重复 MIDI FF 51 03 事件？

> ID：11642504
> 
> 赞同：0
> 
> 时间：2012-07-25T03:59:59.240
> 
> 标签：midi

如果我没记错的话，元事件`51 03`是用来设置歌曲的节奏的。在我一直在研究的这个[midi 文件](http://games4um.ga.funpic.de/The%20Black%20Pearl.mid)中（学习 midi 协议），我注意到它一遍又一遍地调用这个事件。这是有原因的，还是只是DAW的一个小故障？

![FF 51 03](../Images/fcb3b60af1e4b881694c6034bbd68ad8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:59:32.783

该文件只是有一堆速度变化。这是完全有效的。我在 Logic 中打开它，这是 Tempo List 窗口的样子：

![节奏表](../Images/259226c39f4c75706fc0fe8ba14dd6d2.png)

这是一个图形视图：

![节奏轨道](../Images/509f056ce863e0eb4f9a6d2ffa82ab46.png)

在歌曲的开头有三种不同的速度有点奇怪，但它是一个有效的 MIDI 文件。

# jquery - 使用 jQuery 的 slideToggle 方法时导致闪烁的原因是什么？

> ID：11642515
> 
> 赞同：0
> 
> 时间：2012-07-25T04:01:19.050
> 
> 标签：jquery, css

我无法弄清楚为什么在打开和关闭此菜单时 slideToggle 会导致如此惊人的闪光：http: [//jsfiddle.net/joshnh/xr3e5/](http://jsfiddle.net/joshnh/xr3e5/)

注意：我只在 Chrome 和 Safari 中注意到这一点，所以我假设这是一个 webkit 问题。

```
<!-- HTML -->

<nav class="mainNav">
    <ul>
        <li><a href="javascript:void(0);">Home</a></li>
        <li><a href="javascript:void(0);">About Us</a></li>
        <li><a href="javascript:void(0);">Teachers</a></li>
        <li><a href="javascript:void(0);">Students</a></li>
        <li><a href="javascript:void(0);">Activities</a></li>
        <li><a href="javascript:void(0);">Media</a></li>
        <li><a href="javascript:void(0);">Venue Hire</a></li>
        <li><a href="javascript:void(0);">Contact Us</a></li>
    </ul>
</nav>

/* CSS */

.mainNav {
    background-color: #5978cf;
    color: #fff;
    cursor: pointer;
}
.mainNav:before {
    background-image: -webkit-linear-gradient(hsla(0,0%,100%,.05), hsla(0,0%,0%,.05));
    border-bottom: 1px solid hsla(0,0%,0%,.25);
    content: '≡ Menu';
    display: block;
    font: bold 1em/3 sans-serif;
    padding-left: 1em;
    text-shadow: 0 1px 1px hsla(0,0%,0%,.1);
}
.mainNav ul {
    background-image: -webkit-linear-gradient(hsla(0,0%,0%,.1), hsla(0,0%,100%,.1));
    box-shadow: inset 0 .1em .25em hsla(0,0%,0%,.1);
    display: none;
    left: 0;
    text-align: left;
    top: 3em;
    -webkit-transition: .1s;
}
.mainNav a {
    color: #fff;
    border-bottom: 1px solid hsla(0,0%,0%,.1);
    border-top: 1px solid hsla(0,0%,100%,.1);
    display: block;
    font: 1em/3 sans-serif;
    padding: 0 1em;
    text-decoration: none;
    text-shadow: 0 1px 0 hsla(0,0%,0%,.1);
}
.mainNav li:first-child a {
    border-top: none;
}
.mainNav a:hover,
.mainNav a:focus {
    background-color: hsla(0,0%,100%,.1);
}

// jQuery

var $mainNav = $('.mainNav'),
    $mainNavA = $mainNav.find('a');

$mainNav.on('click', function() {
    $mainNav.children('ul').slideToggle('linear');
});

$mainNavA.on('click', function(e) {
    e.stopPropagation();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:19:00.063

这似乎是您的 css 属性（ul 中的 -webkit-transition）的问题。看看[http://jsfiddle.net/davidbuzatto/xr3e5/13/](http://jsfiddle.net/davidbuzatto/xr3e5/13/)

```
.mainNav ul {
    background-image: -webkit-linear-gradient(hsla(0,0%,0%,.1), hsla(0,0%,100%,.1));
    box-shadow: inset 0 .1em .25em hsla(0,0%,0%,.1),
                inset 0 -.1em .25em hsla(0,0%,0%,.1);
    display: none;
    left: 0;
    text-align: left;
    top: 3em;
    /*-webkit-transition: .1s;*/
} 
```

# css - 无法使用不同的屏幕尺寸保持 div 和背景的正确定位

> ID：11642516
> 
> 赞同：0
> 
> 时间：2012-07-25T04:01:26.913
> 
> 标签：css, html, background, positioning

标题说明了大部分内容。我有一个包含所有站点 div 和背景的 div 容器。如果您将屏幕超出最大值，或者如果它位于不同的显示器尺寸/像素上（有一台计算机在工作，它没有填满屏幕，但我的宽屏，我只是试图正确地“拉伸”背景）和大多数其他人一样）。此外，如果您退出最大屏幕，它会切断部分网站，我不知道为什么。

相关CSS：

```
body {

font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
text-decoration: none;
color: lightsteelblue;
font-size: 14px;
background-image: url("../images/hardcoregames-bg-final.png"); 
-webkit-background-size: 100%; /*for webKit*/
-moz-background-size: 100%; /*Mozilla*/
-o-background-size: 100%; /*opera*/
background-size: 100%; /*generic*/
background-repeat: no-repeat;
background-position: top left;
background-color: #222;
}
#maindiv {
position: relative;
left: 0px;
top: 0px;
width: 100%;
height: 100%;
}
#navigation {
position: absolute;
top: 50px;
/*left: 360px;
margin: 0px;*/
left: 50%;
margin-left: -325px;
z-index: 10000;
width: 650px;
height: 100px;
padding: 50px 20px;
background-color: transparent;
float: left;
} 
```

我的标记很简单：

```
<body>
    <div id="maindiv">
        <div id="navigation">
            <img src="images/hardcoregames-logo1.png"></img> 
        </div>
        <div id="other divs just like navigation but positioned in different spots">
            stuff
        </div>
    </div>
<body> 
```

看看它的实际效果： 我尝试过在背景尺寸中对宽度和高度都使用 100% 的[站点，但这使得高度不是自动的情况变得更糟。](http://hardcoregamesusa.com)我尝试将主 div 设置为绝对。我试过使用背景大小来覆盖。补充一下，我在这里看到了其他的东西，但到目前为止我读过的想法都没有奏效，我不想固定背景，图像和主页一样大，所以我想要就这样。

PS 请提醒一下，至少在 IE 上退出最大化屏幕时，“maindiv”也会被切断。我在背景问题中添加了这个问题，因为我认为它们都与我的宽度/高度有关，但话又说回来我真的不知道。我发布的代码可以正常工作，直到您将屏幕调整得足够小，然后向右滚动。同样在大约相同大小的 IE 屏幕上，你不能一直在网站上离开，它被切断了。

显示的图像一直向右和向左滚动。向右滚动，它会切断页面的 1/3。向右滚动，bg 没有完全填满，看起来很笨。[图片](http://imgur.com/a/YcAVK)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:34:42.037

如果我理解正确...

为最宽的标准屏幕分辨率 (2560) 和最小的屏幕比例 (4:3) 创建足够大的背景图像。创建大小为 2560 x 1920 的背景并设置“背景大小：100% 自动”应该让它在所有显示器上填充背景而没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T04:39:24.760

问题可能与背景大小有关。如果您工作的计算机使用 Internet Explorer 8 或更低版本，则不支持 background-size。如果这是问题，我可以解释解决方法，让我知道。

编辑：不是 IE 8，试试下面。

```
html { 
  background: url('../images/hardcoregames-bg-final.png') no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T04:48:17.887

去掉`background-position: top left;` 就解决了。无论窗口大小如何，这都会导致您的徽标始终位于窗口的左上角

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T05:03:16.327

这种风格可以让你的背景以任何不同的分辨率拉伸：

```
body, html
{
  font-size:14px !important;
  color: lightsteelblue;
  font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background-image: url("../images/hardcoregames-bg-final.png"); 
  background-repeat: repeat-x;
  background-color: #222;
  background: no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T04:07:23.400

此设置修复了退出最大屏幕时网页的“截断”问题。[固定](http://jsfiddle.net/Hde6Y/1/) 谢谢@Mr。外星人

作为背景；在我的研究中，应该很明显，你不能“动态地”改变背景，因为人改变了 IE 的窗口大小，比如 CSS 中的 IE。据我所知，这将背景固定为按初始屏幕尺寸工作。

```
html, body {
    height: 100%;
    width: 100%;
    background-image: url("../images/hardcoregames-bg-final.png"); 
    -webkit-background-size: 100% auto; /*for webKit*/
    -moz-background-size: 100% auto; /*Mozilla*/
    -o-background-size: 100% auto; /*opera*/
    background-size: 100% auto; /*generic*/
    background-repeat: no-repeat;
    background-position: top left;
    background-color: #222;
} 
```

如果我在这方面错了，请纠正我。但我能做的最好的事情就是最初调整背景的大小，仅此而已。我想一些javascript或者更好的是jquery可以解决这个问题，因为它是动态工作的问题。我暂时保持这个答案开放，如果我错了，请发表评论。不希望错误的信息传出去。

# wordpress - WordPress 404 模板覆盖我的 .htaccess 设置以解决 404 错误？

> ID：11642518
> 
> 赞同：5
> 
> 时间：2012-07-25T04:02:20.167
> 
> 标签：wordpress, .htaccess, http-status-code-404

在具有自己的 .htaccess 的子目录（例如[http://website.com/sub/index.html](http://website.com/sub/index.html)）上仍然出于某种原因显示我为 Wordpress 拥有的 404 页面，该页面位于该目录上方。

.htaccess 用于子目录：

```
ErrorDocument 404 /404.html 
```

.htaccess 用于主目录：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^website.net$ [OR]
RewriteCond %{HTTP_HOST} ^www.website.net$
RewriteRule ^foghelper.php$ http://website.net/subdirone/ [R=301,L]
RewriteRule ^foghelper.php$ http://website.net/subdirtwo/ [R=301,L]
# DO NOT REMOVE THIS LINE AND THE LINES ABOVE jNLK5d:REDIRECTID

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

如果您想知道，hta 中的链接会被审查。

**编辑：**

在添加`RewriteCond %{REQUEST_URI} !^/?sub/`之前`RewriteRule . /index.php [L]`错误似乎仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:10:46.083

一切都通过 wordpress 进行路由，因此当请求类似的东西`/sub/no_file.html`但它不存在时，wordpress 会通过它来路由它，`index.php`因为它同时满足`!-f`and`!-d`条件（不是现有文件，也不是现有目录）。然后它决定它找不到资源，`/sub/no_file.html`所以它然后显示它自己的 404 文件。

如果您希望转到 /sub 的请求绕过 wordpress 的路由，以便在请求的文件`/sub/`不存在时`/404.html`得到服务，您可以在您的 wordpress 规则之前添加这一行`RewriteRule . /index.php [L]` ，使它们看起来像这样：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/?sub/
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:56:31.017

默认的 .htaccess 文件已经支持你想要的行为；

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

神奇之处在于以 RewriteCond 开头的行。他们指示 Apache 应用规则 RewriteRule 。/index.php [L]（这意味着“任何 URL 都将转到 index.php”），仅当 URL 不是现有文件 !-f 或现有目录 !-d 时。

所以这应该默认工作。当您尝试访问已经存在的文件时，Wordpress 重写规则不适用。

# javascript - 需要居中整个导航栏，包括子菜单，找不到正确的代码。我的 JavaScript 搞砸了吗？

> ID：11642519
> 
> 赞同：0
> 
> 时间：2012-07-25T04:02:40.937
> 
> 标签：javascript, html, css, html-lists, navbar

我一直在摆弄这段代码一个半小时，只是想弄清楚如何使元素居中。我的 div 似乎不影响 ul 或 li，我不知道如何将其居中。我无论如何都不是专业人士，这是我在网上找到的一些免费代码以及我由朋友提供的一段 javascript，以使其完全符合我的要求，这是一个水平下拉列表 [还有子菜单水平]。请有人帮助TT

[在这里查看](http://riothawk.net/ABSnavtest.html)我现在得到的内容的实时预览

这是代码

```
<style>
body {
   font: 80%/1.2 Arial, Helvetica, sans-serif; }
#navbar {
   position: inherit;
   top: 0;
   margin: 0 auto;
   padding: 0;}
#navbar li {
   list-style: none;
   float: left;}
#navbar li a {
   display: inline;
   padding: 3px 8px;
   text-transform: uppercase;
   text-decoration: none; 
   color: #999;
   font-weight: bold;
   text-align:center }
#navbar li a:hover {
   color: #000; }
#navbar li ul {
   display: none;  }
#navbar li:hover ul, #navbar li.hover ul {
   position: absolute;
   display: inline;
   left: 0;
   width: 100%;
   margin: 0;
   padding: 0; }
#navbar li:hover li, #navbar li.hover li {
   float: left; }
#navbar li:hover li a, #navbar li.hover li a {
   color: #000; }
#navbar li li a:hover {
   color: #357; }

</style>

<script>
sfHover = function() {
var sfEls = document.getElementById("navbar").getElementsByTagName("li");
for (var i=0; i<sfEls.length; i++) {
  sfEls[i].onmouseover=function() {
     this.className+=" hover";
  }
  sfEls[i].onmouseout=function() {
     this.className=this.className.replace(new RegExp(" hover\\b"), "");
  }
}
}
if (window.attachEvent) window.attachEvent("onload", sfHover);
</script>
</head>
<body>
  <ul id="navbar">
<li><a href="#">Exhibits and Events</a>
        <ul>
           <li><a href="#">Current Exhibit</a></li>
           <li><a href="#">Coming Exhibit</a></li>
           <li><a href="#">Events</a></li>
        </ul>
     </li>
     <li><a href="#">About Us</a>
        <ul>
           <li><a href="#">About 1</a></li>
           <li><a href="#">About Two</a></li>
           <li><a href="#">Third About</a></li>
        </ul>         
     </li>
     <li><a href="#">Contact</a>
        <ul>
           <li><a href="#">Via Email</a></li>
           <li><a href="#">Stalk Us Elsewhere</a></li>
        </ul>         
     </li>
     <li><a href="#">Press</a>
        <ul>
           <li><a href="#">Bench Press</a></li>
           <li><a href="#">Military Press</a></li>
           <li><a href="#">Press 'n Seal</a></li>
        </ul>         
     </li>
  </ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:09:55.517

在您的 CSS 代码 #navbar 中，添加以下两行：

```
text-align:center;
margin: 0 auto; 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:45:19.130

当你设置`margin: 0 auto;`你也应该设置`width: ...`

尝试这个：

```
#navbar {
    position:relative;
    width: 500px;
    margin: 0 auto;
    padding: 0;
} 
```

对于子菜单：

```
#navbar li ul {
    display: none;
    position:absolute;
    top: 1.5em;
} 
```

# c++ - 如何在这个 3 标签示例 GUI 中添加第四个标签？

> ID：11642522
> 
> 赞同：0
> 
> 时间：2012-07-25T04:02:59.133
> 
> 标签：c++, visual-studio-2010, user-interface, mfc, tabs

我一直在使用[这个演示](http://www.codeproject.com/Articles/17439/CMyTabCtrl-Very-Simple-Dynamic-Tab-Control-for-MFC)（它有 3 个选项卡）

对于我的生活，我似乎无法让第四个标签工作。

下面是我的示例代码的一部分。

```
CMyTabCtrl::CMyTabCtrl()
{
m_tabPages[0]=new CTabOne;
m_tabPages[1]=new CTabTwo;
m_tabPages[2]=new CTabThree;
m_tabPages[3]=new CTabFour;

m_nNumberOfPages=4;
}

CMyTabCtrl::~CMyTabCtrl()
{
for(int nCount=0; nCount < m_nNumberOfPages; nCount++){
delete m_tabPages[nCount];
}
}

void CMyTabCtrl::Init()
{
m_tabCurrent=0;

m_tabPages[0]->Create(IDD_TAB_ONE, this);
m_tabPages[1]->Create(IDD_TAB_TWO, this);
m_tabPages[2]->Create(IDD_TAB_THREE, this);
m_tabPages[3]->Create(IDD_TAB_FOUR, this);   /* Error occurs here */

m_tabPages[0]->ShowWindow(SW_SHOW);
m_tabPages[1]->ShowWindow(SW_HIDE);
m_tabPages[2]->ShowWindow(SW_HIDE);
m_tabPages[3]->ShowWindow(SW_HIDE); 
```

这是我尝试运行程序时显示的错误：

```
Error: m_tabPages[3]    0x00000000 {CDialog hWnd=???}   CDialog 
```

该演示适用于 3 个选项卡，但我似乎无法再添加任何内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:49:14.080

似乎您没有在资源文件中定义 IDD_TAB_FOUR（即 .rc 文件，而不是 resource.h）。仅在 resource.h 中定义资源 ID 是不够的。例如，

```
#define IDD_TAB_FOUR 132 
```

只是一个定义，它将 IDD_TAB_FOUR 替换为数字 132。

您需要从资源编辑器创建一个对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:59:51.453

m_tabPages[] 仅使用 3 [3] 个元素创建，因此请继续将其更改为 4 或 5 或它所在的头文件中的任何内容。

# asp.net-mvc-3 - MVC3 - 多个问题的单选按钮选择问题

> ID：11642523
> 
> 赞同：0
> 
> 时间：2012-07-25T04:03:02.710
> 
> 标签：asp.net-mvc-3, radio-button

1.  我在页面上有 4 个部分
2.  每个部分有多个问题
3.  每个问题都有 3 个单选按钮。
4.  我的单选按钮在 4 个部分中获得相同的名称和 ID，而不是在问题级别是唯一的。（我的问题）

我该如何解决这个问题？谢谢

**查看 - 仅显示第 1 部分的代码**

```
 @using (Html.BeginForm(ActionNames.Index, ControllerNames.PaperSurveyQualityControl, new { Area = AreaNames.OngoingProjects }, FormMethod.Post, new { @id = "PaperSurveyQualityControlForm" })){     
@Html.HiddenFor(x => x.Header.SurveyValidationId)         
if (Model.PersonalInformation != null && Model.PersonalInformation.Count > 0)    
{        
<div class="distanceBottom">            
<table class="siteTable">                
<thead>                    
<th style="width: 38%;">Description</th>                    
<th style="width: 30%;">Keyed Value</th>                    
<th style="width: 10%;"><center>Correct</center></th>                    
<th style="width: 10%;"><center>Typo</center></th>                    
<th style="width: 12%;"><center>Mismatched</center></th>                
</thead>                
<tbody>                    
@foreach (var item in Model.PersonalInformation)                    
{                        
@Html.HiddenFor(x => item.CategoryCode)                        
<tr>                            
<td>@item.Description</td>                            
<td>@item.KeyedValue</td>                            
<td><center>@Html.RadioButtonFor(model => item.Response, "C")</center></td>                            
<td><center>@Html.RadioButtonFor(model => item.Response, "T")</center></td>                            
<td><center>@Html.RadioButtonFor(model => item.Response, "M")</center></td>                        
</tr>                    
}                
</tbody>            
</table>        
</div>    
}
} 
```

**源视图**

```
<form action="/OngoingProjects/PaperSurveyQualityControl" id="PaperSurveyQualityControlForm" method="post">
<input data-val="true" data-val-number="The field SurveyValidationId must be a number." data-val-required="The SurveyValidationId field is required." id="Header_SurveyValidationId" name="Header.SurveyValidationId" type="hidden" value="1" />        
<div class="distanceBottom">            
<table class="siteTable">                
<thead>                    
<th style="width: 38%;">Description</th>                    
<th style="width: 30%;">Keyed Value</th>                    
<th style="width: 10%;"><center>Correct</center></th>                   
 <th style="width: 10%;"><center>Typo</center></th>                    
<th style="width: 12%;"><center>Mismatched</center></th>                
</thead>                

<tbody><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="FN" />                        
<tr>                            
<td>First Name</td>                            
<td>Firstname</td>                            
<td><center><input data-val="true" data-val-required="Message missing!" id="item_Response" name="item.Response" type="radio" value="C" /></center></td>                            
<td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>                            
<td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>                        
</tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="LN" />                       
 <tr>                            
<td>Last Name</td>                            
<td>Lastname</td>                            
<td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>                            
<td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>                            
<td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>                        
</tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="AD" />
                        <tr>
                            <td>Address</td>
                            <td>123 Test</td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="CT" /> 
                       <tr>
                            <td>City</td>
                            <td>Marcelius</td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="ST" />
                        <tr>
                            <td>State</td> 
                           <td>NV</td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="ZC" />
                        <tr>
                            <td>Zip Code</td>
                            <td>13108</td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="EM" />
                        <tr> 
                           <td>Email</td> 
                           <td>abc@abc.com</td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td> 
                       </tr>
                </tbody>
            </table>
        </div>
        <div class="distanceBottom">
            <table class="siteTable">
                <thead> 
                   <th style="width: 38%;">Description</th> 
                   <th style="width: 30%;">Keyed Value</th>
                    <th style="width: 10%;"><center>Correct</center></th>
                    <th style="width: 10%;"><center>Typo</center></th>
                    <th style="width: 12%;"><center>Mismatched</center></th>
                </thead>
                <tbody><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="Q1" />
                        <tr>
                            <td>Q1 - blah blah blah</td>
                            <td>A</td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="Q2" />
                        <tr>
                            <td>Q2 - blah blah blah</td> 
                           <td>ADF</td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td> 
                       </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="Q3" /> 
                       <tr>
                            <td>Q3 - blah blah blah</td>
                            <td>BC</td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td> 
                       </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="Q4" />
                        <tr>
                            <td>Q4 - blah blah blah</td>
                            <td>D</td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr>
                </tbody>
            </table>
        </div>
        <div class="distanceBottom">
            <table class="siteTable">
                <thead> 
                   <th style="width: 38%;">Description</th>
                    <th style="width: 30%;">Keyed Value</th> 
                   <th style="width: 10%;"><center>Correct</center></th> 
                   <th style="width: 10%;"><center>Typo</center></th>
                    <th style="width: 12%;"><center>Mismatched</center></th>
               </thead>
                <tbody><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="S1" />
                        <tr> 
                           <td>Declared State 1</td> 
                           <td>MO</td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="S2" /> 
                       <tr> 
                           <td>Declared State 2</td> 
                           <td>NY</td>  
                          <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td> 
                       </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="S3" />
                        <tr>
                            <td>Declared State 3</td>
                            <td>AZ</td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td> 
                       </tr>
                </tbody>
            </table>
       </div>
        <div class="distanceBottom">
            <table class="siteTable">
                <thead>
                    <th style="width: 38%;">Description</th>
                    <th style="width: 30%;">Keyed Value</th>
                    <th style="width: 10%;"><center>Correct</center></th>
                    <th style="width: 10%;"><center>Typo</center></th>
                    <th style="width: 12%;"><center>Mismatched</center></th>
                </thead>
                <tbody><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="C1" />
                        <tr>
                          <td>Declared College 1</td>
                            <td>US Naval Academy</td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="C2" />
                       <tr>
                            <td>Declared College 2</td>
                            <td>Don't know any others</td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="C3" /> 
                       <tr>
                            <td>Declared College 3</td>
                            <td></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="C4" /> 
                       <tr>  
                          <td>Declared College 4</td>
                            <td></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>
                        </tr><input id="item_CategoryCode" name="item.CategoryCode" type="hidden" value="C5" />
                        <tr>
                            <td>Declared College 5</td>
                            <td></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="C" /></center></td> 
                           <td><center><input id="item_Response" name="item.Response" type="radio" value="T" /></center></td>
                            <td><center><input id="item_Response" name="item.Response" type="radio" value="M" /></center></td>  
                      </tr>
                </tbody>
            </table>
        </div>
    <div class="distanceTop">
        <button type="submit" title="Update Email" id="ButtonUpdate" class="gradientbuttonRight gradientbutton gradientorange">Update</button> 
           <a id="ButtonExit" class="gradientbuttonLeft gradientbutton gradientblue" href="/OngoingProjects/PaperSurveyQualityControl/Exit?badEmailId=1" title="Exit">EXIT</a>
    </div>
</form> 
```

**查看模型**

```
using Sqc.BusinessEntities; namespace Sqc.ViewModels.OngoingProject{
    public partial class PaperSurveyQualityControlVideoModel    {
                 public PaperSurveyQualityControlHeader Header { get; set; }
         public List<PaperSurveyQualityControlItem> PersonalInformation { get; set; }
         public List<PaperSurveyQualityControlItem> QuestionAnswers { get; set; }
         public List<PaperSurveyQualityControlItem> DeclaredStates { get; set; }
         public List<PaperSurveyQualityControlItem> DeclaredColleges { get; set; }
       }
} 
```

**商业实体：**

标题

```
namespace Sqc.BusinessEntities{    public partial class PaperSurveyQualityControlHeader    {
        public int SurveyValidationId { get; set; }
        public string ImageFront { get; set; }
       public string ImageBack { get; set; }
    }
} 
```

物品

```
namespace Sqc.BusinessEntities{    public partial class PaperSurveyQualityControlItem    {
        public string CategoryCode { get; set; }
        public string Description { get; set; }
        public string KeyedValue { get; set; }
          public string Response { get; set; } //C=Correct, T=Typo, M=Mismatch  REQUIRED - radio button response
    }
} 
```

项目验证

```
using System.ComponentModel.DataAnnotations;using DataAnnotationsExtensions;using System.Web.Mvc; namespace Sqc.BusinessEntities{
    [MetadataType(typeof(PaperSurveyQualityControlItem.PaperSurveyQualityControlItemMetaData))]
    public partial class PaperSurveyQualityControlItem    {
        public class PaperSurveyQualityControlItemMetaData        {
            [Required(ErrorMessage = ValidationMessageConstants.MessageRequired)]
            public string Response { get; set; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:25:31.397

我首先要看的是 Phil Haack 关于绑定到列表的帖子。这本质上就是您正在尝试做的事情，并且索引您的输入可能对您有用：

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

我还想看看 Steven Sandersons 关于编辑可变长度列表的帖子。这是更高级的 HtmlPrefixScopeExtensions 处理了很多繁重的工作：

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:53:34.900

@using (Html.BeginForm(ActionNames.Index, ControllerNames.PaperSurveyQualityControl, new { Area = AreaNames.OngoingProjects }, FormMethod.Post, new { @id = "PaperSurveyQualityControlForm" })) {

```
@Html.HiddenFor(x => x.Header.SurveyValidationId)

if (Model.PersonalInformation != null && Model.PersonalInformation.Count > 0)
{
    <div class="distanceBottom">
        <table class="siteTable">
            <thead>
                <th style="width: 38%;">Description</th>
                <th style="width: 30%;">Keyed Value</th>
                <th style="width: 10%;"><center>Correct</center></th>
                <th style="width: 10%;"><center>Typo</center></th>
                <th style="width: 12%;"><center>Mismatched</center></th>
            </thead>
            <tbody>

                @for (var i = 0; i < Model.PersonalInformation.Count; i++)
                {
                    @Html.HiddenFor(x => Model.PersonalInformation[i].CategoryCode)
                    <tr>
                        <td>
                            @Html.ValidationMessageFor(x => Model.PersonalInformation[i].Response)
                            @Model.PersonalInformation[i].Description
                        </td>
                        <td>@Model.PersonalInformation[i].KeyedValue</td>
                        <td><center>@Html.RadioButtonFor(model => Model.PersonalInformation[i].Response, "C")</center></td>
                        <td><center>@Html.RadioButtonFor(model => Model.PersonalInformation[i].Response, "T")</center></td>
                        <td><center>@Html.RadioButtonFor(model => Model.PersonalInformation[i].Response, "M")</center></td>
                    </tr>
                }

            </tbody>
        </table>
    </div>
}

if (Model.QuestionAnswers != null && Model.QuestionAnswers.Count > 0)
{
    <div class="distanceBottom">
        <table class="siteTable">
            <thead>
                <th style="width: 38%;">Description</th>
                <th style="width: 30%;">Keyed Value</th>
                <th style="width: 10%;"><center>Correct</center></th>
                <th style="width: 10%;"><center>Typo</center></th>
                <th style="width: 12%;"><center>Mismatched</center></th>
            </thead>
            <tbody>
                @for (var i = 0; i < Model.QuestionAnswers.Count; i++)
                {
                    @Html.HiddenFor(x => Model.QuestionAnswers[i].CategoryCode)
                    <tr>
                        <td>
                            @Html.ValidationMessageFor(x => Model.QuestionAnswers[i].Response)
                            @Model.QuestionAnswers[i].Description
                        </td>
                        <td>@Model.QuestionAnswers[i].KeyedValue</td>
                        <td><center>@Html.RadioButtonFor(model => Model.QuestionAnswers[i].Response, "C")</center></td>
                        <td><center>@Html.RadioButtonFor(model => Model.QuestionAnswers[i].Response, "T")</center></td>
                        <td><center>@Html.RadioButtonFor(model => Model.QuestionAnswers[i].Response, "M")</center></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}

if (Model.DeclaredStates != null && Model.DeclaredStates.Count > 0)
{
    <div class="distanceBottom">
        <table class="siteTable">
            <thead>
                <th style="width: 38%;">Description</th>
                <th style="width: 30%;">Keyed Value</th>
                <th style="width: 10%;"><center>Correct</center></th>
                <th style="width: 10%;"><center>Typo</center></th>
                <th style="width: 12%;"><center>Mismatched</center></th>
            </thead>
            <tbody>
                @for (var i = 0; i < Model.DeclaredStates.Count; i++)
                {
                    @Html.HiddenFor(x => Model.DeclaredStates[i].CategoryCode)
                    <tr>
                        <td>
                            @Html.ValidationMessageFor(x => Model.DeclaredStates[i].Response)
                            @Model.DeclaredStates[i].Description
                        </td>
                        <td>@Model.DeclaredStates[i].KeyedValue</td>
                        <td><center>@Html.RadioButtonFor(model => Model.DeclaredStates[i].Response, "C")</center></td>
                        <td><center>@Html.RadioButtonFor(model => Model.DeclaredStates[i].Response, "T")</center></td>
                        <td><center>@Html.RadioButtonFor(model => Model.DeclaredStates[i].Response, "M")</center></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}

if (Model.DeclaredColleges != null && Model.DeclaredColleges.Count > 0)
{
    <div class="distanceBottom">
        <table class="siteTable">
            <thead>
                <th style="width: 38%;">Description</th>
                <th style="width: 30%;">Keyed Value</th>
                <th style="width: 10%;"><center>Correct</center></th>
                <th style="width: 10%;"><center>Typo</center></th>
                <th style="width: 12%;"><center>Mismatched</center></th>
            </thead>
            <tbody>
               @for (var i = 0; i < Model.DeclaredColleges.Count; i++)
                {
                    @Html.HiddenFor(x => Model.DeclaredColleges[i].CategoryCode)
                    <tr>
                        <td>
                            @Html.ValidationMessageFor(x => Model.DeclaredColleges[i].Response)
                            @Model.DeclaredColleges[i].Description
                        </td>
                        <td>@Model.DeclaredColleges[i].KeyedValue</td>
                        <td><center>@Html.RadioButtonFor(model => Model.DeclaredColleges[i].Response, "C")</center></td>
                        <td><center>@Html.RadioButtonFor(model => Model.DeclaredColleges[i].Response, "T")</center></td>
                        <td><center>@Html.RadioButtonFor(model => Model.DeclaredColleges[i].Response, "M")</center></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
} 
```

# xamarin.ios - MonoTouch TTStyledTextLabel 链接和 TTNavigator

> ID：11642524
> 
> 赞同：1
> 
> 时间：2012-07-25T04:03:10.590
> 
> 标签：xamarin.ios, three20

我正在尝试响应 TTStyledTextLabel 上的链接点击。

由于我在互联网上阅读过的内容，我的印象是我必须为 TTNavigator 创建一个代表。

我的 AppDelegate.cs 中有这个

```
public override bool FinishedLaunching (UIApplication application, NSDictionary launchOptions)
{
    _navigator = new TTNavigator();
    _navigator.Delegate = new NewsDelegate();
    _navigator.Window = Window;
    var map = _navigator.URLMap;
    map.FromToViewController("*",  (new MainController()).ClassHandle);
    return true;
} 
```

但这根本不是对新闻代表的回应

```
 public class NewsDelegate : TTNavigatorDelegate
    {
        public override bool Navigator (TTNavigator navigator, NSUrl URL)
        {
            return false;
        }
    } 
```

那里的断点没有触发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:14:43.997

好吧，这个让我发疯了很长一段时间。我尝试了一百万件事，对标签进行子类化，将其转换为 c# 等。我终于找到了解决方案。

您必须编辑绑定（我提交了更改，但在我编写它时它不在其中）。

```
[BaseType (typeof (NSObject))]
interface TTNavigator
{
    [Static, Export("navigator")]
    TTNavigator Navigator {get;set;}
... 
```

此静态函数允许您访问全局导航器。这将允许您的代表开火。在你运行 makefile 并上传新的 DLL 之后（如果它还没有在那里）。

更新您的 AppDelegate.cs

```
 public override bool FinishedLaunching (UIApplication application, NSDictionary launchOptions)
    {
        _navigator= TTNavigator.Navigator;
        _navigator.Delegate = new NewsDelegate();
        return true;
    } 
```

现在，当单击链接时，您的委托将触发

# windows - Windows Metro App 过滤列表视图并显示列表中的特定数据？

> ID：11642528
> 
> 赞同：0
> 
> 时间：2012-07-25T04:03:21.390
> 
> 标签：windows, windows-8

我不知道 Listview 创建是否有任何“回调”，以便我可以显示我拥有的 List 中非常特定类型的数据。我所知道的是，只有完整列表可以绑定到 ListView，但是我怎样才能像在 iOS 中那样在 Datasource Delegate 的帮助下对其进行检查。

任何人 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:53:42.583

过滤和分组传统上是使用**CollectionViewSource**完成的。不幸的是，**CollectionViewSource**不再具有**Filter**事件或**GroupDescriptions**属性。似乎不支持过滤和分组，但两者仍然可以使用 LINQ 实现。

在您的 Xaml 中，在页面的资源部分添加一个**CollectionViewSource 。**确保 IsSourceGrouped 设置为 true：

```
<common:LayoutAwarePage.Resources>

    <!--
        Collection of grouped items displayed by this page, bound to a subset
        of the complete item list because items in groups cannot be virtualized
    -->
    <CollectionViewSource x:Name="GroupsCV" Source="{Binding Groups}" IsSourceGrouped="True" />

</common:LayoutAwarePage.Resources> 
```

现在，**CollectionViewSource** (GroupsCV) 应该设置为您的 GridView 的 ItemsSource：

```
<GridView ItemsSource="{Binding Source={StaticResource GroupsCV}}" /> 
```

请注意，**CollectionViewSource**绑定到一个名为**Groups**的属性。此属性是我的 ViewModel 的一部分。**Groups**属性返回的值将是 LINQ 查询的结果。起初这让我很困惑，因为我不知道该属性应该返回什么*类型。*我选择了一组可比较的项目。这几乎适用于任何类型的任何 LINQ 查询。

因此，在您的 ViewModel（或任何您的 DataContext ）中添加以下属性：

```
private IEnumerable<IGrouping<IComparable, TItem>> groups;
public IEnumerable<IGrouping<IComparable, TItem>> Groups
{
    get { return groups; }
    set { SetProperty(ref groups, value); }
} 
```

现在，每当您想更改分组或过滤器时，只需将 Groups 属性设置为等于 LINQ 查询，如下所示：

```
Groups = from i in musicItems
            group i by i.Genre into g
            orderby g.Key
            select g; 
```

LINQ 可以很好地处理已知的属性名称，但是让用户从属性名称列表中选择并按该属性动态分组呢？好吧，LYNQ 能够创建组的唯一要求是，无论您传递什么，它都必须实现**IComparable**。

这是一个小扩展方法，它将属性名称作为字符串并返回**IComparable**：

```
static public IComparable GetComparableValue<T>(this T item, string propName) where T : class
{
    return (IComparable)typeof(T).GetTypeInfo().GetDeclaredProperty(propName).GetValue(item, null);
} 
```

有了它，您可以通过属性名称进行动态查询，如下所示：

```
string groupByPropertyName = "Artist";

Groups = from i in musicItems
group i by i.GetComparableValue(groupByPropertyName) into g
orderby g.Key
select g; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T04:41:02.210

I'm not 100% sure of the exact scenario you're trying to solve, but there are ways to create a filtered view on an existing source of data. You also don't say if this is XAML or JavaScript. I'm gonna answer the JavaScript part.

Obviously, you could just re-wrap the data you've got to the form you want it.

You can also choose a number of other options:

*   Use WinJS.Binding.List, along with the createFilter method. See:

[http://msdn.microsoft.com/en-us/library/windows/apps/Hh700774.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh700774.aspx)

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465496.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465496.aspx)

[http://msdn.microsoft.com/en-us/library/windows/apps/hh700741.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700741.aspx)

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465464.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465464.aspx)

*   [implement your own data source](http://msdn.microsoft.com/en-us/library/windows/apps/Hh770849.aspx)

# ruby-on-rails - 在 Rails 3.2 CoffeeScript 视图中使用 Sprockets 指令

> ID：11642539
> 
> 赞同：1
> 
> 时间：2012-07-25T04:04:59.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, sprockets

我正在使用 js 格式的文件`app/views/api/index.js.coffee`来`respond_to`请求`/api/:api_key`. 我可以看到 CoffeeScript 可以正确编译为 JS，并且也可以在 CoffeeScript 文件中使用 ERB。

但是，现在我试图通过 Sprockets 指令将外部文件添加到此 CoffeeScript 文件中，但它似乎不起作用。

我基本上是在添加

```
#= require jquery 
```

到 CoffeeScript 文件的第一行。我希望 jQuery 库被导入并添加到我生成的 JavaScript 文件中，但它没有显示出来。就好像该指令被忽略了。

是否可以在 CoffeeScript 视图中使用 Sprockets 指令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:14:33.110

这里有几个相互竞争的问题：

1.  由于资产管道的工作方式，如果您让咖啡脚本成为资产（例如，在 public/assets/javascript 中），您的 ERb 将在资产编译时进行评估，而不是在控制器呈现 javascript 时进行评估。这意味着可以使用类似 的指令`image_path`，但不能`current_user`在 erb 内部使用类似的东西。

2.  Sprockets 指令仅适用于作为资产管道的一部分编译的文件。在一个视图中，您可以使用`javascript_tag`来引用一个 javascript 程序集，但是在这里需要一些东西是没有意义的，因为它没有被编译。这实际上可以带来更好的设计，将库代码放入 public/assets（或 lib/assets），然后将自定义代码放入视图。

另外，我应该注意，如果您要使用`require`sprockets 指令，请不要忘记`require self`在其中的某个地方也加载该文件的内容。

# python - Python：更改与 py2app 捆绑的脚本的 CWD

> ID：11642540
> 
> 赞同：2
> 
> 时间：2012-07-25T04:05:01.420
> 
> 标签：python, py2app

我的脚本`python`使用. 我用来找出脚本所在的位置。`py2app``.app/Contents/Resources``os.getcwd()`

我该如何解决这个问题并确保我的文件是在包含目录的应用程序中创建的？

**黑客修复**

这是一个有效的技巧：

```
if re.search('([^/]+$)', cwd).group(0) == "Resources":
    mkFldr(cwd[0:-27] + fldr)         #this is a try except function
    sanExt(extPath, str(cwd[0:-27] + fldr + "/" + extName + "_san.csv"))
else:
    mkfldr(fldr)
    sanExt(extPath, str(cwd + "/" + fldr + "/" + extName + "_san.csv")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:50:43.187

如果我理解您的要求正确，我会使用类似于以下内容的内容来处理此问题。“冻结”部分会根据您是运行脚本还是 py2exe/py2app 可执行文件来更改行为。

```
import sys
import os.path

frozen = getattr(sys, 'frozen', '')

if frozen:
    MyFolder = os.path.dirname(sys.executable)
else:
    Myfolder = os.getcwd() 
```

# javascript - 简单的方法来增加

> ID：11642541
> 
> 赞同：3
> 
> 时间：2012-07-25T04:05:01.773
> 
> 标签：javascript, jquery

```
$("a[rel=example_1],a[rel=example_2],a[rel=example_3],a[rel=example_4],a[rel=example_5],a[rel=example_6],a[rel=example_7],a[rel=example_8],a[rel=example_9],a[rel=example_10]").fancybox({............ 
```

您好，现在我必须手动输入这些代码。

有没有简单的方法来增加数字？

我知道我可以使用类似于`a[rel=example_[1-10]]`. 什么是正确的语法？

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T04:08:44.460

您可以使用[以选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/)

```
a[rel^="example_"] 
```

这将选择所有具有以“example_”开头`a`的属性的元素。`rel`如果您想选择与该模式匹配的所有元素，我会推荐这种循环。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T04:08:35.487

如果你没问题 - 你可以选择

```
$('a[rel^="example_"]'). 
```

它会匹配所有`a`开始`rel`的`example_`

否则 - 使用精细过滤：

```
$('a[rel^="example_"]').filter(function() {
    var match = $(this).prop('rel').match(/^example_(\d+)$/);
    return match.length == 2 && parseInt(match[1]) <= 10;
}) 
```

显式检查下划线后`.filter()`是否有数字的回调`1..10`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T04:08:34.147

一种可能的解决方案是使用循环。

```
var element = 'a[rel=example_';
var elements = [];

for(var i = 1; i <= 10; i++){
    elements.push(element + i.toString() + ']');
}

elements = elements.join(', ');

$(elements).fancybox() 
```

或者，如果您想将所有元素与`rel` *包含*“example_”的元素匹配，您可以使用如下属性选择器：

```
$('a[rel*="example_"]').fancybox() 
```

最后，您可以简单地使用一个类来链接所有元素并通过引用公共类来选择它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T04:07:47.030

使用 for 或 while 循环。每次迭代时，都会向计数器变量添加一个，或者如果您使用 for 循环，它会自行完成。

继承人一些伪代码：

```
var output

for count 1 to 10:

output .= $("a[rel='example'" + count];

next for 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T04:09:17.007

您可以使用此选择器选择所有以“example_”开头的元素：

```
$('a[rel^=example_]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T04:09:23.213

您可以生成一个字符串用作查询：

```
var query = [];
for(var i=1;i<=10;i++)
    query.push('a[rel=example_' + i + ']');
$(query.join(',')).fancybox({}); 
```

# sql - 从另一个表的列中选择项目，如记录

> ID：11642544
> 
> 赞同：8
> 
> 时间：2012-07-25T04:06:14.740
> 
> 标签：sql, sql-server, sql-server-2008

我有一个包含大量记录的表（foo），我只想选择那些类似于另一个表（foo2）的字段中的记录之一

如果我使用内部连接执行 SELECT 查询

```
SELECT pst_qty AS [QTY]
  ,[MFGPN]
  ,[mfg_name] AS [MANUFACTURER]
  ,description
  ,sup_id
  FROM [foo]
  INNER JOIN [foo2]
  ON [foo].[MFGPN] = [foo2].TestString 
```

afaik 我只会得到 foo.field1=foo2.field1 的记录。我似乎无法使用 ON foo.field1 LIKE foo2.field2 来选择像 foo2 中的字段这样的记录。我将如何选择与不同表中的列中的记录类似的记录？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T04:10:16.690

你有没有尝试过类似的东西

```
SELECT pst_qty AS [QTY] 
  ,[MFGPN] 
  ,[mfg_name] AS [MANUFACTURER] 
  ,description 
  ,sup_id 
  FROM [foo] 
  INNER JOIN [foo2] 
  ON [foo].[MFGPN] LIKE '%' + [foo2].TestString + '%' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-14T14:17:27.383

怎么样，

```
SELECT DISTINCT
            F.[pst_qty] [QTY],
            F.[MFGPN], 
            F.[mfg_name] [MANUFACTURER], 
            F.[description], 
            F.[sup_id] 
    FROM
            [foo] F 
        CROSS JOIN
            [foo2] F2
    WHERE
             CHARINDEX(F2.[MFGPN], F.[TestString]) > 0; 
```

请注意，如果字符串包含`'%'`通配符，这将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:39:42.133

```
SELECT pst_qty AS [QTY]
.
.
.
  FROM [foo]
       where [foo].[MFGPN] LIKE '%123%'
             or [foo].[MFGPN] LIKE '%123%'
             or [foo].[MFGPN] LIKE '%123%' 
```

将起作用，但需要进行全表扫描，因为该列上的任何索引都将被忽略。因此，可以尝试以下代替它。

```
SELECT pst_qty AS [QTY]
.
.
.
  FROM [foo]
  INNER JOIN [foo2]
        ON [foo].[MFGPN] LIKE '%' + [foo2].TestString + '%' 
```

# ruby-on-rails - 为可排序表设置数据库

> ID：11642547
> 
> 赞同：0
> 
> 时间：2012-07-25T04:06:40.350
> 
> 标签：ruby-on-rails

可能是一个菜鸟问题......我自己解决了它的一部分，但是......

我正在制作一个具有法律决定数据库的基础应用程序，该数据库将在一个表中表示，该表最好在可能的情况下具有可排序的列。例如，我希望能够按日期对它们进行排序。

我将为此使用类方法

```
 def self.judgementdate
    order("judgementdate DESC")
  end 
```

问题：我应该将列创建为字符串还是整数？我应该如何将日期输入数据库以使其最容易排序。例如，我应该输入 2012 年 1 月 27 日作为

```
27/01/2012

or

"January 27, 2012" 
```

或者是其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:25:01.090

您应该使用[`date`列](http://guides.rubyonrails.org/migrations.html#supported-types)来存储日期，而`string`不是`integer`, `date`。然后数据库会对它们进行很好的排序，甚至知道如何将它们作为日期进行操作；如果您使用其他类型，那么您最终会进行奇怪的字符串修改或一堆毫无意义的（在极端情况下可能不正确）算术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:14:28.670

愚蠢的我，在我发布问题后，我意识到我应该检查自动生成的 created_at 列以获取正确的日期格式。所以我正在输入这样的日期。Rails 可以很好地分类！

```
2012-07-26 
```

# jquery - JQueryUI - 可调整大小迫使我的 div 从位置切换：相对到绝对

> ID：11642548
> 
> 赞同：4
> 
> 时间：2012-07-25T04:06:53.087
> 
> 标签：jquery, css, jquery-ui, jquery-ui-draggable, jquery-ui-resizable

我正在尝试在容器内创建一个可滑动、可调整大小的栏。出于某种原因，可调整大小的方法是将 div 从 Position:Relative 转换为 Position:Absolute。然后，这会在视觉上移动盒子，并破坏容器容器的滚动动作。

[**JSFiddle 示例**](http://jsfiddle.net/thalladay/m7Yv4/)

我曾尝试连接到 Stop 和 Resize 事件并转换回 Position:Relative，但这是一个相当的 hack，结果并不完美。看来这应该可以工作？

查询：

```
$(document).ready(function () {
    $(".Timeline").draggable({
        axis: "x",
        containment: "parent"
    })
    .resizable({
        containment: "parent",
        handles: 'e, w'
    });
}); 
```

HTML：

```
<div style="width: 800px; overflow: auto;">
    <div id="TimelineCanvas">
        <div class="TimelineContainer">
            <div class="Timeline">
            </div>
        </div>
    </div>
</div> 
```

风格：

```
#TimelineCanvas
{
    width: 2000px;
    height: 150px;
}
.TimelineContainer
{
    height: 75px;
    width: 100%;
    border: 1px solid black;
}
.Timeline
{
    position: relative;
    height: 75px;
    width: 75px;
    background-color: Gray;
    cursor: move;
} 
```

到目前为止我最好的修复尝试：

```
$(document).ready(function () {
    $(".Timeline").draggable({
        axis: "x",
        containment: "parent"
    })
    .resizable({
        containment: "parent",
        handles: 'e, w',
        resize: function (event, ui) {
            $(this).css("height", '');
        },
        stop: function (event, ui) {
            $(this).css("position", '');
            $(this).css("top", '');
            $(this).css("height", '');
        }
    });
}); 
```

任何帮助，将不胜感激; 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:13:20.860

```
.resizable({
        grid: 25,
        containment: "#"+ $(this).parent().attr("id"), // The parent
        stop: function(e, $this) {
            $(this).css({
                position: "relative",
                left: $this.originalPosition.left,
                width:$this.originalSize.width
            });
        }
    }) 
```

那应该是`the right way`这样做的。但肯定不是（总是有些东西会因为位置宽度冲突而被破坏`draggable`）`re sizable`，我们必须等待 Jquery-ui 2.0...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T04:27:43.520

我找不到原始缺陷报告来说明它发生的原因，但它显然是故意的，很可能是特定于浏览器的……肮脏的解决方案可能是你拥有的最好的解决方案。

[https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.resizable.js#L242](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.resizable.js#L242)

```
 // bugfix for http://dev.jquery.com/ticket/1749
  if (el.is('.ui-draggable') || (/absolute/).test(el.css('position'))) {
      el.css({position: 'absolute',top: iniPos.top,left: iniPos.left});
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T14:47:20.550

这是[原始的 jQuery UI 票证](http://bugs.jqueryui.com/ticket/1749)和更新的链接。代码中引用的票证不正确。

[https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.resizable.js#L299](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.resizable.js#L299)

```
// bugfix for http://dev.jquery.com/ticket/1749
if ( (/absolute/).test( el.css("position") ) ) {
    el.css({ position: "absolute", top: el.css("top"), left: el.css("left") });
} else if (el.is(".ui-draggable")) {
    el.css({ position: "absolute", top: iniPos.top, left: iniPos.left });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-20T12:25:03.583

您可以将可调整大小对象的位置属性设置为 !important

# android - 如何在 EditText 中创建多行字符串？

> ID：11642550
> 
> 赞同：-2
> 
> 时间：2012-07-25T04:07:07.820
> 
> 标签：android, string, text, multiline

我想在多行 EditText 中显示一个字符串。目前，字符串显示为....

```
Receive: 0 coin(s) Total
             Cost: $100 
```

我希望它显示为...

```
Receive: 0 coin(s) 
Total Cost: $10 
```

这是我的代码，我尝试使用“\n”，但无济于事......

```
result.setText("Receive:"+ " "+ df.format(rawounces)+"coin(s)" + "\n" 
     + "Total Cost:$" + df.format(transactionandpremium*rawounces)); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:18:54.060

您可以使用 `android:minLines="3"`for 在edittext中显示多行。对于在edittext顶部显示光标，您可以使用`android:gravity="top."`

```
<EditText
            android:id="@+id/edittext"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:minLines="3"
            android:maxLines="5"
            android:gravity="top"
            android:inputType="textMultiLine" /> 
```

# php - 搜索与特定大小匹配的文件的目录 - Windows/PHP

> ID：11642551
> 
> 赞同：1
> 
> 时间：2012-07-25T04:07:24.263
> 
> 标签：php, search, command-line, filesize

运行带有 IIS6 和 PHP 的 Windows Server 2003 系统。

我有一个图像目录，大约 20,000 个。我需要获取与一定大小的 9919 字节匹配的文件列表。这些是空白/通用图像。我将使用图像列表与图像提供者核对以查看是否有可用的更新图像。

有没有办法在 Windows、PHP 或其他一些命令行实用程序中安装我可以在系统上获取这些文件的列表，而无需扫描目录中的每个文件以了解文件大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:58:17.697

该类`DirectoryIterator`将让您快速迭代图像，`FileObject`它为每个项目返回的 SPL 将让您找到文件大小。

```
foreach (new DirectoryIterator('path/to/image/directory') as $item) {
     if ($item->isFile() && $item->getSize() == 9919) {
           // your code to handle each matching file here...
     }
} 
```

[SplFileObject](http://php.net/manual/en/class.splfileobject.php) [DirectoryIterator](http://php.net/manual/en/class.directoryiterator.php)

# c# - 如何在标题栏中添加图片？

> ID：11642552
> 
> 赞同：3
> 
> 时间：2012-07-25T04:07:26.777
> 
> 标签：c#, wpf

标题栏中的图标太小，所以我想添加Image而不是Icon。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T04:09:43.617

如果您不喜欢使用图标，那么唯一的方法是制作自定义标题栏，我认为......

您可以使用此代码：这是 XAML 代码：

```
<Window x:Class="WpfApplication1.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="350" Width="525" WindowStyle="None">
<Grid>
    <Border BorderBrush="#FF00860C" BorderThickness="3" Name="border1" Margin="0,30,0,0"></Border>
    <Rectangle Name="rectangle1" Stroke="#FF2446FF" StrokeThickness="3" Height="30" VerticalAlignment="Top" MouseDown="rectangle1_MouseDown">
        <Rectangle.Fill>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="White" Offset="0.013" />
                <GradientStop Color="White" Offset="1" />
                <GradientStop Color="#FF7CAEFF" Offset="0.477" />
            </LinearGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
    <Button Content="X" Height="24" HorizontalAlignment="Right" Margin="0,3,3,0" Name="button1" VerticalAlignment="Top" Width="23" Click="button1_Click" />
    <Button Content="□" Height="24" HorizontalAlignment="Right" Margin="0,3,26,0" Name="button2" VerticalAlignment="Top" Width="23" Click="button2_Click" />
    <Button Content="__" Height="24" HorizontalAlignment="Right" Margin="0,3,49,0" Name="button3" VerticalAlignment="Top" Width="23" Click="button3_Click" />
    <TextBlock Height="23" HorizontalAlignment="Left" Margin="102,4,0,0" Name="textBlock1" Text="Custom Title bar" VerticalAlignment="Top" FontSize="18" MouseDown="rectangle1_MouseDown"/>
    <Image Height="22" HorizontalAlignment="Left" Margin="8,4,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="26" />
</Grid> 
```

这是 C# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            this.Close();
        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {
            if (this.WindowState == WindowState.Maximized)

                this.WindowState = WindowState.Normal;
            else
                this.WindowState = WindowState.Maximized;
        }

        private void button3_Click(object sender, RoutedEventArgs e)
        {
            this.WindowState = WindowState.Minimized;
        }

        private void rectangle1_MouseDown(object sender, MouseButtonEventArgs e)
        {
            DragMove();
        }

    }
} 
```

# javascript - SoundCloud + Soundmanager2 + EQData

> ID：11642556
> 
> 赞同：2
> 
> 时间：2012-07-25T04:07:54.863
> 
> 标签：javascript, flash, audio-streaming, soundcloud, soundmanager2

这基本上与这个问题相同，但更详细：

[Soundcloud + SoundManager 错误：读取流的 eqData](https://stackoverflow.com/questions/10635986/soundcloud-soundmanager-bug-reading-a-streams-eqdata)

所以我有一个使用 canvas / svg / what have you 的可视化工具，当它从 SoundCloud / SoundManager2 接收 EQData 时看起来很棒，但是发生了一些非常奇怪的事件，导致它不那么酷。

1.) 当您使用 SMSound.pause() 或任何变体（SoundManager.togglePause 等）然后恢复所有 EQData / WaveformData 停止进入 SoundManager2 并且它只是归零。

2.) 如果您停止跟踪并重新启动它，所有 EQData / WaveformData 都会停止。

3.) EQData/WaveformData 偶尔会在没有警告的情况下停止进入 SM2，并且可视化器只是停止，如果我转到下一首曲目，它会再次启动，但对于超过 30 秒的歌曲，它从来没有 100% 工作过。

我无法弄清楚这是 SoundCloud 还是 SoundManager2 问题，但似乎其他一些人遇到了问题，但直到现在我无法在任何地方找到任何解决方案。

此处提供链接：http: [//nikru.com/viz/](http://nikru.com/viz/)。它被从网站中删除，因为它是为客户的未启动网站准备的，他们不希望公众看到。:)

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:14:03.760

好的。我敢肯定其他人也遇到过这种情况，但没有快速解决。我希望这对其他人有所帮助，因为我已经玩了一天左右的可能性，并且认为我有适合每个人的解决方法。

当 SoundManager2 第一次从[http://api.soundcloud.com/tracks/9708215/stream?consumer_key=](http://api.soundcloud.com/tracks/9708215/stream?consumer_key=) {YOUR KEY} 页面请求歌曲时，会发生什么情况。这很棒，歌曲可以播放，因为 api.soundcloud.com 有一个 crossdomain.xml 文件。糟糕的是，SoundManager2 在下一个请求（暂停/播放或下一首/上一首曲目）上只是回到它所知道的内容（这是 ec-media.soundcloud.com 上的 301 页面，正如我之前提到的 ec- media.soundcloud.com 没有 crossdomain.xml 文件）这不是很好。我的解决方法是每次重新开始一首歌曲时，我都会修改声音的 URL 以包含一个新的 ts={time} 参数，然后在 SMSound 上运行 .load() ，这会导致重新加载并修复问题。

```
var $track = $(this),
    data = $track.data('track'),
    playing = $track.is('.active');
newURL  = soundManager.sounds["track_" + data.id].url.split("&ts=")[0];
newURL += "&ts=" + Math.round((new Date()).getTime() / 1000);
soundManager.sounds["track_" + data.id].url = newURL;
soundManager.sounds["track_" + data.id].load();
soundManager.sounds["track_" + data.id].url = newURL; 
```

然后为了在歌曲暂停时节省带宽，我实际上只是将其静音并保存歌曲暂停的位置。当他们取消暂停时，我会在他们停止的位置播放该曲目并取消静音......这并不漂亮，但这是我们可以用现有的东西做的最好的事情（我认为）。

希望这可以帮助某人。:)

# javascript - jQuery Mobile 按钮无法按预期工作

> ID：11642566
> 
> 赞同：0
> 
> 时间：2012-07-25T04:09:02.973
> 
> 标签：javascript, jquery, jquery-mobile

```
<ul data-role="listview">
  <li>Facebook</li>
  <li>Google</li>
  <li>Apple</li>
</ul>

$(document).bind('pagebeforecreate',function(){
  $('form ul li').each(function(){
    $(this).html('<a role="button" data-icon="plus" data-iconpos="left">'+$(this).text()+'</a>');
  });
}); 
```

上面的代码应该将列表视图更改为左侧带有加号图标的按钮列表。但是，它对我不起作用。已`<a...></a>`正确插入，但图标未正确显示。此默认图标仍在显示。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:34:41.973

除了上面@patrick 的回复外，还需要在将按钮小部件附加到文档后对其进行初始化。试试这个，

```
$(document).bind('pageshow',function(){
  $('ul li').each(function(){
    var $this = $(this);
    $this.html('<a data-role="button" data-icon="plus" data-iconpos="left">'+$this.text()+'</a>');
    var $btn = $('a', $this);
    $btn.button();
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:23:57.077

根据 jQuery mobile[文档](http://jquerymobile.com/test/docs/buttons/buttons-types.html)，需要一个`data-role="button"`属性来将任何锚链接设置为按钮。

在您的代码中，您有：

```
<a role="button" 
```

这是不正确的。您需要将其更改为：

```
<a data-role="button" 
```

所以你的整个代码现在将是：

```
<ul data-role="listview">
  <li>Facebook</li>
  <li>Google</li>
  <li>Apple</li>
</ul>

$(document).bind('pagebeforecreate',function(){
  $('form ul li').each(function(){
    $(this).html('<a data-role="button" data-icon="plus" data-iconpos="left">'+$(this).text()+'</a>');
  });
}); 
```

# eclipse - 如何设置 Eclipse（比如 Juno）来支持 php Smarty

> ID：11642567
> 
> 赞同：3
> 
> 时间：2012-07-25T04:09:09.947
> 
> 标签：eclipse, smarty

设置 Eclipse 和 PDT（比如 Juno）来支持 php Smarty

比你

# perl - Perl 系统 + 拆分 + 数组

> ID：11642573
> 
> 赞同：2
> 
> 时间：2012-07-25T04:09:40.527
> 
> 标签：perl, split

我叫 luis，住在 arg。我有一个问题，无法解决。

```
**IN BASH**
pwd
/home/labs-perl
ls
file1.pl file2.pl

**IN PERL**
my $ls = exec("ls");
my @lsarray = split(/\s+/, $ls);
print "$lsarray[1]\n"; #how this, i need the solution. >> file.pl
file1.pl file2.pl # but this is see in shell. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T04:14:14.333

您看到的输出不是来自 print 语句，而是`ls`. 要将`ls`输出转换为变量，请使用反引号：

```
my $ls = `ls`;
my @lsarray = split(/\s+/, $ls);
print "$lsarray[1]\n"; 
```

这是因为`exec`没有返回，它之后的语句没有被执行。从[perldoc](http://perldoc.perl.org/functions/exec.html)：

> exec 函数执行系统命令并且永不返回；如果您希望它返回，请使用 system 而不是 exec 。仅当命令不存在并且直接执行而不是通过系统的命令 shell 执行时，它才会失败并返回 false

但是使用`system`命令对您没有帮助，因为它不允许输出捕获，因此是反引号。但是，使用`glob`函数更好：

```
my @arr = glob("*");
print $arr[1], "\n"; 
```

此外，perl 数组索引从 0 开始，而不是 1。要获取 file1.pl，您应该使用`print "$lsarray[0]\n"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T04:17:22.557

当您可以在 Perl 中编写某些内容时，使用 shell 是一种不好的做法。

这个程序显示了我认为你想要的。

```
chdir '/home/labs-perl' or die $!;
my @dir = glob '*';
print "@dir\n"; 
```

* * *

**编辑**

我刚刚从 perreal 的帖子中更好地了解了您的需求。

要显示当前工作目录中的第一个文件，只需编写

```
print((glob '*')[0], "\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T04:53:43.857

```
print <*> // die("No file found\n"), "\n"; 
```

（尽管如果脚本要进一步做任何事情，通常应该避免在标量上下文中使用迭代器。）

# django - 如何在 Django 表单中使用多个复选框保存多对多字段

> ID：11642579
> 
> 赞同：5
> 
> 时间：2012-07-25T04:09:56.283
> 
> 标签：django, django-models, django-forms, django-views

我想知道如何在以下表单`color`（多对多字段）中由`CheckboxSelectMultiple`小部件中的值填充。

**#models.py**

```
class Color(models.Model):
    RED = 1
    BLACK = 2

    COLOR_CHOICES = (
        (RED, _('Red')),
        (BLACK, _('Black')),
    )

    name = models.CharField(_('Color'), max_length=512,
                        choices=COLOR_CHOICES, blank=True)
class Car(models.Model):
    color = models.ManyToManyField(Color, blank=True, null=True)

    def save(self):
        self.slug = slugify(self.name)
        super(Car, self).save() 
```

**#forms.py**

```
class AddCar(forms.ModelForm):
    color = forms.MultipleChoiceField(
        choices=Color.COLOR_CHOICES,
        widget=forms.CheckboxSelectMultiple(),
        required=False
    ) 
```

**#view.py**

```
def add(request):
    if request.method == 'POST':
        form = AddCar(request.POST)
        ...
        if form.is_valid():
            car = form.save(commit=False)

            for c in request.POST.getlist('color'):
                car.color.add(c)

            car.save()
            form.save_m2m()

            return redirect('/') 
```

**＃错误**

```
'Car' instance needs to have a primary key value before a many-to-many relationship can be used. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T04:20:24.867

您正在做`form.save(commit=False)`的实际上并没有在 DB 中创建记录，因此它无法存储 M2M 字段。`form.save_m2m()`保存表单后执行。

或者从您的代码中，您可以`car.color.add()`在保存`car`. 而且你也不需要拥有`form.save(commit=False)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T04:15:14.810

您是否没有显示复选框，或者是您试图摆脱的错误？如果是后者，请`commit=False`在保存表单时尝试删除。

更新：`Color`模型未指定任何字段。给它一个，例如`color = IntegerField(choices=COLOR_CHOICES)`。

在`AddCar`形式上，`choices=Color.COLOR_CHOICES`如果错误就给出 - 你必须给它一个实际存在的对象元组（Color.COLOR_CHOICES 只是代码常量）。此外，您可能应该使用 ModelMultipleChoiceField，它带有一个`queryset`参数，例如：

`colors = forms.ModelMultipleChoiceField(queryset=Color.objects, widget=forms.CheckboxSelectMultiple(), required=False)`

[https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelmultiplechoicefield](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelmultiplechoicefield)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T04:18:53.693

此错误是因为，您正在尝试将相关对象保存到未保存的对象中，您有两个选择：

放`commit=True`

或之前：

```
for c in request.POST.getlist('color'):
                car.color.add(c) 
```

放： `car.save()`

如果您使用`commit=False`，则不会保存该对象。

但是，您不需要手动保存“颜色”，这样做`form.save_m2m()`会为您完成，好吧，只有当您的表单有许多字段可供选择时。

编辑：

表单中的颜色字段格式不正确，必须是 ModelMultipleChoiceField

```
color = forms.ModelMultipleChoiceField(queryset=Color.objects.all()) 
```

见文档： [https ://docs.djangoproject.com/en/1.3/topics/forms/modelforms/#inline-formsets](https://docs.djangoproject.com/en/1.3/topics/forms/modelforms/#inline-formsets)

# twitter - Twitter api 返回截断的描述

> ID：11642591
> 
> 赞同：0
> 
> 时间：2012-07-25T04:11:47.887
> 
> 标签：twitter, rss

我在用`https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=[username]&include_rts=true&rpp=100`

要获取用户的推文，但由于某种原因，大多数推文的描述都被截断了，有什么办法可以得到完整的描述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:51:11.383

遗憾的是，RSS 提要不包含完整的推文。

如果您将 .rss 替换为 .xml 或 .json，那么您将获得全文。

```
https://api.twitter.com/1/statuses/user_timeline.json?screen_name=[username]&include_rts=true&rpp=100 
```

然后，您必须将 JSON 或 XML 转换为 RSS。

# nexus - 自动镜像 Nexus 代理存储库

> ID：11642594
> 
> 赞同：10
> 
> 时间：2012-07-25T04:12:16.577
> 
> 标签：nexus

目前，我们有一个远程连接托管存储库（在不同的地理位置）。我们在托管存储库本地有一个本地代理存储库。

每当有一些文件的新版本添加到远程托管存储库时，构建系统对新添加文件的第一个请求是将其下载到本地代理存储库。

我现在遇到的问题是一些正在添加的文件非常大（比如大约 400 MB）。因此，第一次构建需要花费大量时间才能完成。

有没有办法我们可以对远程托管存储库进行轮询并自动镜像它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T05:58:13.090

Nexus Professional 2.+ 支持此作为智能代理功能集的实验性功能。这是一个默认关闭的实验性功能，但应该可以正常工作。搏一搏！

要打开它，请转到“管理/功能”。选中“显示高级”，然后选择“智能代理：订阅”并启用抢先获取。

更新：从 Nexus 2.3 开始，这不再被认为是实验性的，您可以为您代理的每个存储库配置 if。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:05:30.240

我无法评论曼弗雷德的回答，所以这里有一个新的变体：

如果您正在运行 Nexus Professional，则可以使用智能代理来同步存储库。

您需要先完成[http://www.sonatype.com/books/nexus-book/reference/smartproxy.html](http://www.sonatype.com/books/nexus-book/reference/smartproxy.html)中所述的一般设置（建立信任，设置发布托管存储库，设置接收代理存储库）。只有这样才能创建能力并且 Manfreds 的答案适用：

转到“管理/功能”，选中“显示高级”并为您的代理存储库选择“订阅”功能。在那里，您可以打开抢占式获取，这将自动在代理上的托管存储库中下载新工件。

# android - 如何 ListView 使用 onClick 打开一个新活动？

> ID：11642599
> 
> 赞同：1
> 
> 时间：2012-07-25T04:12:51.220
> 
> 标签：android, string, listview, apk

大家好。我的目标是当我想从 ListView 中单击特定项目时，它会打开一个我已编程的新活动。例如：当我点击“João”时，我希望它会打开一个名为 Joao 的类。我尝试过使用简单的代码，但它不起作用。当我从 ListView 中单击 João 的名字时，什么也没有发生。

这是我正在使用的代码：

```
public class Searchsort extends Activity {

    private ListView lv1;
    private EditText ed;
    private String lv_arr[]={"John","Mary","Carl","Rose","Charlie","Allan", "João"};
    private ArrayList<String> arr_sort= new ArrayList<String>();
    int textlength=0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        lv1 = (ListView)findViewById(R.id.ListView01);
        ed = (EditText)findViewById(R.id.EditText01);

        // By using setAdpater method in listview we an add string array in list.

        lv1.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1 ,   lv_arr));
        ed.addTextChangedListener(new TextWatcher() {

            public void afterTextChanged(Editable s) {

            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

            }

            public void onTextChanged(CharSequence s, int start, int before, int count) {
                textlength=ed.getText().length();
                arr_sort.clear();
                for(int i=0;i<lv_arr.length;i++) {
                    if(textlength<=lv_arr[i].length()) {
                        if(ed.getText().toString().equalsIgnoreCase((String) lv_arr[i].subSequence(0,  textlength))) {
                            arr_sort.add(lv_arr[i]);
                        }
                    }
                }

                lv1.setAdapter(new ArrayAdapter<String>  (Searchsort.this,android.R.layout.simple_list_item_1 , arr_sort));

            }
        });
    }

    public void onListItemClick(ListView parent, View v, int position, long id) {
        if ("João".equals(lv_arr[position])) { 
            Intent myIntent = new Intent(Searchsort.this, Joao.class);
            startActivity(myIntent);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:40:57.737

```
lv1.setOnItemClickListener(new OnItemClickListener() {
  public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

       Intent intent = new Intent(Searchsort.this, Joao.class);                                                  

                    startActivity(intent);          
                }
            }        
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:43:59.960

Use `setOnItemClickListener` for the `ListView` and handle activity opening there.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T09:09:21.670

尝试这个..

```
listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

if(position == 1)
{

         Intent myIntent = new Intent(YourActivity.this, SecondActivity.class);
             startActivityForResult(myIntent, 0);
}

if(position == 2)
{

         Intent myIntent =  new Intent(YourActivity.this, ThirdActivity.class);
             startActivityForResult(myIntent, 0);
}
    }
  }); 
```

希望对你有帮助 ：-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T06:27:09.230

正如 Niko 建议的那样，以下列方式使用 setOnItemClickListener()。

```
public class Searchsort extends Activity {

private ListView lv1;
private EditText ed;
private String lv_arr[]={"John","Mary","Carl","Rose","Charlie","Allan", "João"};
private ArrayList<String> arr_sort= new ArrayList<String>();
int textlength=0;
private String getItem;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    lv1 = (ListView)findViewById(R.id.listView1);
    ed = (EditText)findViewById(R.id.EditText01);

    // By using setAdpater method in listview we an add string array in list.

    lv1.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1 , lv_arr));
    // Here I have set Listener for listview 
    lv1.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
 // Here I am getting the selected item of listview.
            getItem = (arg0.getItemAtPosition(arg2).toString());

            if(getItem.equals("John"))
            {
                Intent i = new Intent(Searchsort.this,John.class);
                startActivity(i);
            }
        }
    });
    ed.addTextChangedListener(new TextWatcher() {
        public void afterTextChanged(Editable s) {
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            textlength=ed.getText().length();
            arr_sort.clear();
            for(int i=0;i<lv_arr.length;i++) {
                if(textlength<=lv_arr[i].length()) {
                    if(ed.getText().toString().equalsIgnoreCase((String) lv_arr[i].subSequence(0,  textlength))) {
                        arr_sort.add(lv_arr[i]);
                    }
                }
            }
            lv1.setAdapter(new ArrayAdapter<String>  (Searchsort.this,android.R.layout.simple_list_item_1 , arr_sort));
        }
    });
}    
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T05:20:52.920

请检查您的`Androidmanifest.xml`.

添加声明如下：

```
<activity android:name=".CLASS_NAME"> </activity> 
```

您必须像这样声明所有活动。

# java - Zend Studio 的 Java 堆大小，达到软限制，强大的硬件

> ID：11642600
> 
> 赞同：1
> 
> 时间：2012-07-25T04:13:20.133
> 
> 标签：java, zend-studio, heap-size

我有一台配备 Intel I7 2600 3.4Ghz 处理器、32GB RAM、Windows 7 Professional x64、JVM 更新的计算机。

在 Zend Studio 中，当对多个文件运行 Source -> Format Code 时，Zend 崩溃并出现警告：Java Heap Size。

我阅读了 ZendStudio.ini 中的设置值，我的相关设置：-Xms1089M -Xmx1089M -XX:MaxPermSize=256m

但我不能增加这些限制。

解决此问题的任何替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:40:40.350

Why can't you increment? 32 bit JVM?

UPDATE: Did some research. While it is possible to edit Zend Studio's JVM usage,

[This support forum post](http://forums.zend.com/viewtopic.php?f=59&t=57483&ei=1qEPUMnXJsjRiAKKh4GIAg&usg=AFQjCNHUbjGoW5mDND0azhOms8c7le95Zw) states 32 bit JVM is needed (I guess they use 32 bit native DLLS.

A 32 bit JVM is limited to about 1.5 GB addressable space. You might be able to tweak things further, but it's gonna be a stretch.

Therefore your only solutions are mostly out of your hands

*   Zend Studio updates to 64 bit support
*   Zend Studio adjusts memory usage
*   You figure out a way not to use as much memory yourself.

# java - 在Java中将双精度数除以零

> ID：11642601
> 
> 赞同：2
> 
> 时间：2012-07-25T04:13:24.453
> 
> 标签：java, divide-by-zero, arithmeticexception

> **可能重复：**
> [为什么 Java 除以 0.0 时不抛出异常？](https://stackoverflow.com/questions/2381544/why-doesnt-java-throw-an-exception-when-dividing-by-0-0)

为什么Java中的以下语句不会报告ArithmeticException？

```
double d = 1.0/0; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T05:48:43.883

简而言之：浮点数可以表示无穷大（甚至可以表示产生非数字值的操作），因此导致这种情况的操作（例如除以 0）是有效的。

扩展 Mohammod Hossain 的答案，以及[这个问题及其接受的答案](https://stackoverflow.com/questions/2381544/why-doesnt-java-throw-an-exception-when-dividing-by-0-0)，引发 ArithmeticException “发生异常算术条件时抛出”。对于整数，除以 0 就是这种情况，但对于浮点数（`float`s 和`double`s），存在正数和负数表示。

举个例子，

```
public class DivZeroFun {

    public static void main(String args[]) {

        double f = 5.0;
        System.out.println(f / 0);
        double f2 = -5.0;
        System.out.println(f2/0);
    }
} 
```

此代码将打印“Infinity”，然后打印“-Infinity”作为其答案，因为“Infinity”实际上是用 Java 编码的`float`s 和s 的可接受值。`double`

另外，从[这个论坛帖子](http://www.velocityreviews.com/forums/t137207-division-by-zero-float-vs-int.html)：

> 浮点表示通常包括 +inf、-inf 甚至“非数字”。整数表示不会。您看到的行为并不是 Java 独有的，大多数编程语言都会做类似的事情，因为这就是浮点硬件（或低级库）正在做的事情。

再次来自论坛帖子：

> 因为所用浮点数的 IEEE 标准定义了正无穷和负无穷的值，以及特殊的“非数字”情况。有关详细信息，请参阅 java.lang.Float 和 java.lang.Double 中的内容。

# c# - Random.Next() 不选择随机值的问题

> ID：11642602
> 
> 赞同：0
> 
> 时间：2012-07-25T04:13:29.497
> 
> 标签：c#, .net

据我了解， Random.Next() 使用系统时间来获取种子，但是当快速迭代循环时，系统时间没有改变或几乎没有改变，给了我相同的“随机”数字。我正在尝试使用随机选择起始位置来开始将字节写入音乐文件中大约 2 秒的静态时间，选择了 30 个不同的位置，但它们几乎相同。我从一开始就几乎是连续的静态，在几秒钟内中断了大约 3 次，然后在大约 30 秒后恢复正常播放音乐；这不是我想要的，我需要它在整个剪辑中展开。“int pos”是问题，它不是随机的，每个起始位置几乎与其他所有位置相同，所以我有很长的静态量，不是静态的随机散布在整个音乐中。我的随机数也是静态的。

```
FileStream stream = new FileStream(file, FileMode.Open, FileAccess.ReadWrite);
for (int i = 0; i < 20; i++)
{
    int pos = rand2.Next(75000, 4000000 /*I've been too lazy to get the file length, so I'm using 4000000*/ );
    for (int x = 0; x < 500000/*500000 is a little over 2 seconds of static*/; x++)
    {
        byte number = array[rand.Next(array.Length)];
        stream.Position = pos;
        pos++;
        stream.WriteByte(number); 
    }
} 
```

我假设每次写入需要 5 秒左右（在我的慢速 CPU 上），这足以让下一次随机给我一个与前一个不同或非常接近的位置。就目前而言，每次我似乎获得约 90000 的初始位置（音乐的前几秒）；所有接下来的都在 20 秒内。所以我的问题是，为了达到我想要的结果，我需要做些什么修改/做不同的事情？我想要几秒钟的静电散布在整个剪辑中，而不是聚集在一起。

我有一个字节数组来存储我的十六进制数字，这些数字是随机选择的，看起来工作正常，只是书写位置的随机性根本不是随机的，它们都非常接近。

```
byte[] array = { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A, 0x0B, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F }; 
```

谢谢。

PS 我知道我应该为 FileStream 使用块，当我找到它时我会添加它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:32:21.020

如果 500000 字节大约是 2 秒的音频，并且您从 75000 到 4000000 之间的某个位置开始，那么您将在 0.15 秒到 8 秒之间开始播放歌曲。这就解释了为什么在歌曲播放大约 10 秒后您没有听到任何静电。尝试使用实际文件大小（减去 500000）作为用于填充的 rand.Next 调用的上限`pos`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T04:40:35.823

当你写： int pos = rand2.Next(75000, 4000000) 如果你的文件是立体声 16 位 48KHz，那么 4000000 / (2*2*48000) = 20 秒的声音。使用文件大小，很容易。你不应该偷懒:-)。
但是，如果您“添加”噪声，则不应替换文件值，而应向其添加随机值。
为什么噪声幅度只有 16 / Byte？并固定？使用 number = rand.Next(Amplitude) 似乎可以很好地计算添加的噪声。
另请注意，您正在创建两个白噪声，每个通道上一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T04:30:41.473

我在生成随机数时遇到了同样的问题。它正在生成相同的值。下面的简单代码解决了我的问题。

```
private static readonly Random random = new Random();
private static readonly object syncLock = new object();
public int RandomNumber(int min, int max)
{
   lock (syncLock)
   { // synchronize
       return random.Next(min, max);
   }
} 
```

您将使用如下：

```
int rn = RandomNumber(0, 10); //for example 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T04:47:11.180

首先，Random.Next 不使用系统时钟来生成随机数。在提供的种子的基础上生成随机数，默认构造函数（无参数）使用系统时钟作为种子，但它只将系统时钟设置为种子。如果我错了，请纠正我，但看起来你得到了随机数，但这些数字足够接近以产生几乎相同的声音，你希望你的数字以较大的间隔分散（连续随机数之间的差异）。为此，我建议您使用最低阈值。如果连续数字之间的差异小于阈值，则尝试生成下一个或调整值以满足阈值。一段代码可以更好地解释我想说的话。

```
int RandomNumber(Random rand,int? lastRandomNumber, int min, int max, int threshold)
        {
            var number = rand.Next(min, max);
            if (lastRandomNumber.HasValue && Math.Abs(lastRandomNumber.Value - number) < threshold)
            {
                Console.WriteLine("Actual:{0}", number);
                if (lastRandomNumber.Value < number)
                {
                    number += threshold;
                    if (number > max)
                        number = max;
                }
                else
                {
                    number -= threshold;
                    if (number < min)
                        number = min;

                }
            }
            return number;
        } 
```

# c# - 使用嵌套的 for 循环

> ID：11642604
> 
> 赞同：0
> 
> 时间：2012-07-25T04:13:50.443
> 
> 标签：c#, for-loop

我正在尝试使用 for 循环。

如果输入为 3，则结果将是：

```
1**
*2*
**3 
```

所以我使用了这段代码

```
void button1_Click(object sender, EventArgs e) {
    string message = " ";
    int value = numericUpDown1.Value;
    for(int count = 0; count < value; count++) {
        for(int m = -2; m < value; m++) {
            message += "*";
        }
        message += "\r\n";
    }
    MessageBox.Show(message);
} 
```

我使用了两个 for 循环，但我无法修复它以显示数字，但它给了我

```
***
***
*** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:18:23.507

```
int digitCount = 3;
string message = " ";
for (int round = 1; round <= digitCount; round++)
{
    for (int digit = 1; digit <= digitCount; digit++)
    {
        if (digit == round)
        {
            message += digit;
        }
        else
        {
            message += "*";
        }
    }

    message += "\r\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:58:50.127

```
private string StarNumbers(int input)
    {
        var range = Enumerable.Range(1, input);
        var sb = new StringBuilder(input*input);
        foreach (var number in range)
        {
            var line = String.Format("{0}{1}{2}", new string('*', number - 1), number, new string('*', input - number));
            sb.AppendLine(line);
        }
        return sb.ToString();
    } 
```

**编辑：**

输入 = 500 的此代码：2ms

（输入 1 000 为 5ms）

使用 += 字符串连接输入 = 500 的代码：33 468 毫秒（它所做的只是垃圾收集）

（为输入 1 000 运行几分钟，但仍然没有）

# jquery - jQuery - 需要从数组中删除项目

> ID：11642607
> 
> 赞同：1
> 
> 时间：2012-07-25T04:14:07.437
> 
> 标签：jquery, arrays

我的'listmaker' 包含一个文本框和两个按钮。您在文本框中键入一个项目，点击“添加项目”，该项目被推送到一个数组中。完成后，点击完成，一个 div 将填充您的项目列表。每个列表项也有一个复选框。我想删除任何带有选中复选框的列表项，最好通过单击另一个按钮来“删除选中的项目”，但不是必需的。

这是html：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js"></script>
        <script src='script.js'></script>
        <title>Listmaker</title>
    </head>
    <body>
    <form>
        <input type="text" id="add" />
        <button type="button" name="addItem" id="addItem">Add Item</button>
        <button type="button" name="finish" id="finish">Finish</button> 
        </form>
        <div>
            <ol id="list">
            </ol>
            <button type="button" name="lineThrough" id="lineThrough">Remove Checked Items</button>
        </div>
    </body>
</html> 
```

和 jQuery：

```
$(document).ready(function() {
        var list = [];
        $('#add').focus();

    $('#addItem').click(function() {
        list.push($('#add').val());
        $('#add').val('');
        $('#add').focus();
    });

    $('#finish').click(function() {
        for(i=0; i<list.length; i++) {
        $('#list').append('<li><input type="checkbox" class="unchecked"/>' +list[i]+ '</li>');
        }
    });

}); 
```

在过去的几个小时里，我尝试了很多不同的方法，但我什至认为我没有走在正确的轨道上，所以我没有在上面的代码中包含我的尝试。我不知道如何迭代复选框和 array.remove() 数组项，它是它的一部分。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:43:25.223

Could try binding a change event to the checkboxes that removes the item from the array when checked. Ex:

```
$("#list").on( "change", "input.checkbox", function() {
    var $this = $(this);
    if ( $this.is(":checked") ) {
        removeFromArray( $this.val(), list );
    }
});

function removeFromArray( value, list ) {
    var index;
    if ( list == null ) {
        return;
    }
    index = list.indexOf(value);
    // Handle edge case so we dont do a range of 0 to -1
    if ( index !== -1 ) {
        list.splice(index, 1);
    }
} 
```

Haven't completely checked this code but it should be close.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:37:28.260

见 [http://jsfiddle.net/WGKHG/1/](http://jsfiddle.net/WGKHG/1/)

```
$(document).ready(function() {
        var list = [];
        $('#add').focus();

    $('#addItem').click(function() {
        list.push($('#add').val());
        $('#add').val('');
        $('#add').focus();
    });

    $('#finish').click(function() {
        var ids=Array();
        $('#list li').each(function(){
            if($(this).find("input:checked").length>0)
            {

                ids.push( 1 * $(this).attr("id").split("_")[1]);
                //alert("checked "+ids);
            }
        });

        for(var i=ids.length;i>0;i--)
        {
           //alert("checked "+ids);
           list.splice(ids[i-1],1);
        }

        $('#list').html("");

        for(i=0; i<list.length; i++) {

        $('#list').append('<li id="li_'+i+'" ><input type="checkbox" class="unchecked"/>' +list[i]+ '</li>');
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T04:38:37.503

演示：http: [//jsfiddle.net/GKnHG/1/](http://jsfiddle.net/GKnHG/1/)

我们可以使用该`.splice()`方法。

```
$('li').each(function() {
  if($(this).find('input:checked').length) {
     var val = $(this).find("span").html();
     var index = $.inArray(val, list);
     if (index >= 0) {
        list.splice(index, 1);
     }
  }
});
buildList(); 
```

我将列表构建移动到另一个函数`buildList()`（

基本上，我们循环遍历's，然后检查它们内部是否有一个（如果没有，`each()`长度将是）。`li``if``:checked` `input``0`

一旦我们知道我们有`li`一个选中的复选框，我们就可以从元素`.html()`中获取一个字符串`span`，并进行`jQuery.inArray()`检查，它返回数组中值的索引，或者`-1`如果它找不到任何.

`if`它大于或等于零，我们使用该`splice()`方法删除该索引处的数组项。第二个参数是要删除多少项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T04:39:38.260

[http://jsfiddle.net/MpBZp/1/](http://jsfiddle.net/MpBZp/1/)

我稍微改变了应用程序，去掉了 finsh 按钮和 list var。当你输入一个项目时让你按回车。顺便说一句，那个 JQuery 是旧的！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T04:58:27.293

通过使用该 id 从数组中删除值，将一些 id 添加到列表中。[这](http://jsfiddle.net/Kvqsf/2/)可能会对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T11:44:47.570

在这里，我已经完成了上述问题的完整解决方案。

**演示：** [http ://codebins.com/bin/4ldqp9n](http://codebins.com/bin/4ldqp9n)

**HTML：**

```
<div id="panel">
  <input type="text" id="add" />
  <button name="addItem" id="addItem">
    Add Item
  </button>
  <div>
    <ol id="list">
    </ol>
    <button type="button" name="lineThrough" id="lineThrough">
      Remove Checked Items
    </button>
  </div>
</div> 
```

**CSS：**

```
input#add{
  border:1px solid #55669a;
}
button{
  border:1px solid #55669a;
}
button:hover{
  background:#acacac;
}
ol{
  padding:2px;
  border:1px solid #7788a9;
  background:#a2a5fd;
  display:none;
}
ol li{
  list-style:none;
} 
```

**查询：**

```
$(function() {
    $("#add").focus();
    var list = new Array();
    //Add New Item 
    $("#addItem").click(function() {
        if ($.trim($("#add").val()) != "") {
            list.push($.trim($("#add").val()));
            $("#list").append("<li><input type='checkbox' value='" + (list[list.length - 1]) + "'/>" + list[list.length - 1] + "</li>");
            $("#add").val('');
            if (list.length > 0) {
                $("#list").show(800);
            }

        }

    });
    //Remove Checked Item
    $("#lineThrough").click(function() {
        $("#list input:checked").each(function() {
            var index = $.trim($("#list input:checkbox").index(this));
            list.splice(index, 1);
            $("#list li:eq(" + index + ")").remove();
            if (list.length <= 0) {
                $("#list").hide('fast');
            }
        });
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9n](http://codebins.com/bin/4ldqp9n)

# csv - 删除不需要的列并将一些文本添加到 csv 的第一列

> ID：11642609
> 
> 赞同：-1
> 
> 时间：2012-07-25T04:14:17.000
> 
> 标签：csv, vb6

我有一个*csv*文件。有很多列，例如*“商品”*、*“基础交货中心”*、*“价格单位”*等，我不想要，我想删除。如何才能做到这一点

此外，我想`1,2,3`根据到期时间将这些数字添加到第一列。例子：

```
SYMBOL     EXPIRY
BARLEYJPR  8/17/2012
BARLEYJPR  9/20/2012
BARLEYJPR  10/19/2012
BARLEYJPR  11/20/2012 
```

在第一行中，我想添加 1，`BARLEYJPR`因为到期时间`august 17th 2012(8/17/2012)`是最接近的，然后想添加 2 到`BARLEYJPR`到期时间，`September`然后想添加 3 到`BARLEYJPR`到期时间`October`，最后 4 到`BARLEYJPR`到期时间`November`.

有人能帮我吗？我正在寻找***VB6中的代码，因为我已经在******VB6***中编写了代码以从网站下载文件。

```
Private Sub Command1_Click()
On Error GoTo Err
Const q As String = "-"
Dim tmp As String, fName As String, Pos As Long, fPath As String
Dim first As Date, last As Date, spath As String, d As Date
cap = Me.Caption
If Dir(App.Path & "\NCDEX\") = "" Then
    MkDir App.Path & "\NCDEX\"
End If
spath = App.Path & "\NCDEX\" ' folder to save files : note trailing \
first = MonthView1
last = MonthView2
'http://www.ncdex.com/Downloads/Bhavcopy_Summary_File/Export_csv/07-04-2012.csv
strURL = "http://www.ncdex.com/Downloads/Bhavcopy_Summary_File/Export_csv/"
    For d = first To last
    ssourceurl = strURL & Format(d, "MM") & q & Format(d, "dd") & q & Format(d, "yyyy") & ".csv"
    fName = Format(d, "dd-mm-yyyy") & ".csv"
    slocalfile = spath & fName
    Me.Caption = "Downloading  " & fName
    Call DeleteUrlCacheEntry(ssourceurl)
    URLDownloadToFile 0&, ssourceurl, slocalfile, BINDF_GETNEWESTVERSION, 0&
    Debug.Print ssourceurl
Next
Me.Caption = cap
'YOU CAN TAKE THIS BELOW OUT IF U DONT WANT IT
MsgBox "Saved to " & spath, vbInformation + vbOKOnly, "Success!"
Exit Sub
Err:     MsgBox "Error", vbCritical + vbOKOnly, "Market Was Closed"
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:47:52.887

您可以使用 Jet 引擎将 CSV 文件读取到记录集并像使用 ADO 处理数据库一样对其进行操作。

一些示例和参考站点：

*   [http://www.freevbcode.com/ShowCode.asp?ID=2180](http://www.freevbcode.com/ShowCode.asp?ID=2180)
*   [http://www.codeproject.com/Articles/26822/Read-Text-File-txt-csv-log-tab-fixed-length](http://www.codeproject.com/Articles/26822/Read-Text-File-txt-csv-log-tab-fixed-length)
*   [http://www.vbforums.com/showthread.php?t=674758](http://www.vbforums.com/showthread.php?t=674758)

# html - 带有文本的两个 div 框 1 和 2，位于第三个 div 框内。有时框 1 中的文本比框 2 中的文本长

> ID：11642619
> 
> 赞同：0
> 
> 时间：2012-07-25T04:15:08.057
> 
> 标签：html, css, css-float

目前我有两个带文本的 div 框 1 和 2，在第三个 div 框内将它们包含在一起。

> 有时框 1 中的文本比框 2 中的文本长 - 我希望文本在框 2 周围流动。
> 有时框 2 中的文本比框 1 中的文本长 - 我希望文本在框 1 周围流动。

一直以来，文本都沿一个方向*向右*或*向左*流动，这取决于*浮点设置*。

带有更多文本的框如何用更少的文本包围框？

这是如何使用 CSS 完成的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:23:43.243

因为它们在两个 div 中，所以它们不能相互流动，因为 div 只能有 4 个边，矩形或正方形，它们不能相互环绕。

您需要做的只是有一个内部 div，用文本填充它并使其浮动，然后将其他文本放在浮动 div 之外但仍在最外层 div 内，这样基本上自由流动文本的父级就是最外层 div ，并且内部 div 里面有它自己的文本。

这将允许外部文本围绕内部 div 及其内容流动，但没有办法拥有 2 个 div 并根据内容长度自动让它们相互环绕。

编辑：

如果您使用 jQuery，您将能够首先将两个文本设置在隐藏元素中，测量内容，然后将较短的内容附加到内部 div 并将较长的内容附加到该 div 外部，以便将其包裹起来。

# oracle - 如果表有时间戳字段/列，如何在 lotusscript 中执行 sql 语句？

> ID：11642621
> 
> 赞同：1
> 
> 时间：2012-07-25T04:15:18.383
> 
> 标签：oracle, timestamp, lotus-notes, lotusscript

我正在努力将数据从 oracle 9i 检索到 lotus notes。我正在使用 Oracle 10g 进行测试，因为这就是我所拥有的。在默认 HR 数据库中，有一个 EMPLOYEES 表。我最近添加了一个新列来获取最后修改的时间戳，这是成功的。数据格式如下：**25-JUL-12 10.28.32.000000 AM**

以下是我的lotusscript代码：

```
Option Public
Option Declare

UseLSX "*lsxlc"

%Include "lsconst.lss"

Sub Initialize
    Dim s As New NotesSession, db As NotesDatabase
    Set db=s.Currentdatabase

    Dim lcs As New Lcsession
    lcs.Clearstatus

    Dim conUser As New Lcconnection("Oracle")
    Dim staffdoc As NotesDocument
    Dim fieldlistuser$
    fieldlistuser="EMPLOYEE_ID,FIRST_NAME,MODIFIED_AT"

    conUser.Server="localhost"
    conUser.UserID="hr"
    conUser.Password="hr"
    conUser.Connect
    conUser.MetaData="HR.EMPLOYEES"
    conUser.Fieldnames=fieldlistuser

    Dim fieldsUser As New LCFieldList
    Dim fieldUser As LCField
    Call conUser.Execute("Select * From HR.EMPLOYEES", fieldsUser)

    While conUser.Fetch(fieldsUser) > 0
        Set staffdoc=New NotesDocument(db)
        staffdoc.Form="Staff"
        staffdoc.StaffID=fieldsUser.EMPLOYEE_ID(0)
        staffdoc.StaffName=fieldsUser.FIRST_NAME(0)
        staffdoc.DateJoin=fieldsUser.MODIFIED_AT(0)
        Call staffdoc.Save(True, True)
    Wend
    conUser.Disconnect
End Sub 
```

在我在 EMPLOYEES 表中添加时间戳列之前一切正常，我可以将每一行导出到临时 Lotus 视图。现在错误总是停在`Call conUser.Execute("Select * From HR.EMPLOYEES", fieldsUser)`. 我认为它与该行有关`fieldlistuser="EMPLOYEE_ID,FIRST_NAME,MODIFIED_AT"`，因此我将其删除`MODIFIED_AT`并发表了评论`staffdoc.DateJoin=fieldsUser.MODIFIED_AT(0)`，但错误仍然存​​在。错误是**Error: Invalid data type for field 'MODIFIED_AT', Connector'Oracle', Method -Execute-**。这真的可以做到吗？如果可以，我应该在 Lotus 中存储什么数据类型的时间戳值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:51:36.453

我的第一个想法是 select 语句在服务器上工作正常吗？

假设确实如此，这看起来像是驱动程序将时间戳转换为 Lotus Notes 日期时间字段的问题。作为一种解决方法，您可以创建一个存储过程，将“修改时间”作为日期时间而不是时间戳类型返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:51:45.340

只是查看帮助文档，我想知道大写是否重要，因为我看到列出的 LCConnection 属性是 FieldNames，而不是 Fieldnames。

# asp.net-mvc - 打开 RelaxUrlToFileSystemMapping 以允许部分以“.”结尾的 URL 有任何潜在的安全风险吗？

> ID：11642623
> 
> 赞同：28
> 
> 时间：2012-07-25T04:15:31.853
> 
> 标签：asp.net-mvc, iis-7

当 URL 的任何部分以“。”结尾时，我们的应用程序会失败。在里面'; 由于功能要求，我们无法避免这种情况。建议的解决方案是在 web.config 文件中打开 RelaxUrlToFileSystemMapping。我们想知道这种方法是否存在任何潜在的安全风险。

失败 URL 的格式：[http ://server.com/path1/krishnakk./path2](http://server.com/path1/krishnakk./path2)

它返回 404 错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T05:34:15.420

即使这个问题已有七个月之久，这里有一个答案，以防其他人遇到这样的情况。

关于问题的安全部分，默认情况下`relaxedUrlToFileSystemMapping`设置为 false，并且 ASP .NET 假定 URL 的路径部分是有效的 NTFS 文件路径。如果您通过设置`relaxedUrlToFileSystemMapping`为 true 来禁用此功能，那么您可能会打开您的站点以受到攻击，因为您正在禁用 ASP .NET 提供的默认保护。

如果您绝对需要设置`relaxedUrlToFileSystemMapping`为 true，您还应该确保*在应用程序要求的约束范围内验证所有 URL*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-01T18:03:34.990

聚会有点晚了，但我想我会添加对我有用的东西。

我今天刚刚遇到这个问题，但幸运的是能够解决它。解决方案是将包含点（句点）的值作为查询字符串的一部分而不是 URL 传递。您失去了没有查询字符串的干净 URI 的优雅，但它可以在不降低安全性或更改任何设置的情况下工作。

例如[http://localhost/Home/hi.how:areyou](http://localhost/Home/hi.how:areyou)将失败，因为它包含两个非法字符作为 URI 的一部分，即点和冒号。但是[http://localhost/Home/id=hi.how:areyou](http://localhost/Home/id=hi.how:areyou)将完美运行。

对 Scott Hanselman 的支持，一如既往，他将在博客上发布几乎所有疯狂的场景和在进行 .NET 开发时可能遇到的问题。

# xml - 替换 XSLT 中的多个属性（使用标识模板）

> ID：11642627
> 
> 赞同：1
> 
> 时间：2012-07-25T04:16:18.550
> 
> 标签：xml, xslt, xhtml, xslt-1.0

嗨，我必须在使用标识模板复制整个文件时使用 XSLT 替换给定标记的多个属性。使用给定的 XSLT，我可以替换一个属性（类的值），但不能替换另一个。 **输入文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />
  <meta http-equiv="Content-type" content="text/html; charset=us-ascii" />

  <title></title>
</head>

<body>
  <!--OTHER STUFF-->    
  <div class="LR" id="12">
  </div>
  <!--OTHER STUFF-->
</body>
</html> 
```

**输出文件：**

```
<?xml version="1.0" encoding="utf-8"?>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title></title>
</head>

<body>
  <!--OTHER STUFF-->
  <div class="WZ" id="56">
  </div>
  <!--OTHER STUFF-->
</body>
</html> 
```

**我的 XSLT：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xhtml="http://www.w3.org/1999/xhtml"
 xmlns="http://www.w3.org/1999/xhtml"
 exclude-result-prefixes="xhtml">
<xsl:output method="xml" indent="yes" encoding="UTF-8"/>
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="xhtml:div[@id='12']/@class">
  <xsl:attribute name="class">WZ</xsl:attribute>
   <xsl:attribute name="id">56</xsl:attribute> 
</xsl:template>

</xsl:stylesheet> 
```

感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T09:31:18.867

此模板还复制 <div> 节点可能具有的任何额外属性，因此它是一个更强大的解决方案。

**这个模板...**

```
<xsl:template match="xhtml:div[@id='12']"
  xmlns="http://www.w3.org/1999/xhtml">
  <div id="56" class="WZ">
    <xsl:apply-templates select="
      (@*[local-name()!='id']
         [local-name()!='class'])
      | node()"/>
  </div>
</xsl:template> 
```

**...将改变这个元素...**

```
<div class="LR" id="12" other="x"> 
```

**...进入...**

```
<div id="56" class="WZ" other="x" /> 
```

**请注意，保留了额外的属性“other”！**

* * *

## 更新

更多的是出于一般兴趣而不是回答问题，这里有几个等效的替代方案......

### XSLT 1.0 替代方案

这是另一个做同样事情的 XSLT 1.0 模板。它效率较低但更简洁（嗯，有点）......

```
<xsl:template match="xhtml:div[@id='12']"
  xmlns="http://www.w3.org/1999/xhtml">
  <div>
    <xsl:apply-templates select="@*" />
    <xsl:attribute name="id">56</xsl:attribute>
    <xsl:attribute name="class">WZ</xsl:attribute>
    <xsl:apply-templates select="node()" />
  </div>
</xsl:template> 
```

### XSLT 2.0 替代方案

我知道 OP 正在使用 XSLT 1.0。这只是为了兴趣。想要简洁和高效？从不畏惧！此处提供有关此 XSLT 2.0 替代方案的帮助...

```
<xsl:template match="xhtml:div[@id='12']"
  xmlns="http://www.w3.org/1999/xhtml">
  <div id="56" class="WZ">
    <xsl:apply-templates select="@* except (@id,@class) | node()" />
  </div>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T04:59:14.920

尝试匹配`@*`：

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xhtml="http://www.w3.org/1999/xhtml"
  xmlns="http://www.w3.org/1999/xhtml"
  exclude-result-prefixes="xhtml">
<xsl:output method="xml" indent="yes" encoding="UTF-8"/>
<xsl:strip-space elements="*" />
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>
<xsl:template match="xhtml:div[@id='12']/@*">
    <xsl:attribute name="class">WZ</xsl:attribute>
    <xsl:attribute name="id">56</xsl:attribute>
</xsl:template>
</xsl:stylesheet> 
```

这给出了预期的结果：

```
<div class="WZ" id="56"></div> 
```

# php - 将 MS SQL Server 查询结果导出到 MS Access

> ID：11642628
> 
> 赞同：0
> 
> 时间：2012-07-25T04:16:33.560
> 
> 标签：php, sql-server, sql-server-2005, ms-access, ms-access-2007

我开发了一个与 MS SQL 2005 数据库交互的 PHP Web 应用程序。用户将访问我的网站并以 Excel 格式获取他们需要的一些数据。我已经用 phpexcel 扩展完成了这个。

但是，由于 MS Excel 对大文件的限制，现在我需要将查询结果保存为 MS Access 格式（*.accdb/ .mdb）。*

我在互联网上找不到任何 Ms Access 作家或任何类似的东西。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:29:31.873

您可以使用 PHP-ODBC 或 PHP 的 PDO-ODBC，其中任何一个都将访问您可以指向 Access 数据库的系统 ODBC 数据源。这些是[W3Schools.com](http://www.w3schools.com/php/php_db_odbc.asp)上的一个很好的指南。

# java - Junit测试正确的线程数已经开始

> ID：11642630
> 
> 赞同：3
> 
> 时间：2012-07-25T04:16:47.343
> 
> 标签：java, multithreading, unit-testing

所以我有一个启动五个线程的方法。我想写一个单元测试来检查五个线程是否已经启动。我怎么做？示例代码非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T04:40:46.013

Instead of writing your own method to start threads, why not use an [`Executor`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html), which can be injected into your class? Then you can easily test it by passing in a dummy `Executor`.

**Edit**: Here's a simple example of how your code could be structured:

```
public class ResultCalculator {
    private final ExecutorService pool;
    private final List<Future<Integer>> pendingResults;

    public ResultCalculator(ExecutorService pool) {
        this.pool = pool;
        this.pendingResults = new ArrayList<Future<Integer>>();
    }

    public void startComputation() {
        for (int i = 0; i < 5; i++) {
            Future<Integer> future = pool.submit(new Robot(i));
            pendingResults.add(future);
        }
    }

    public int getFinalResult() throws ExecutionException {
        int total = 0;
        for (Future<Integer> robotResult : pendingResults) {
            total += robotResult.get();
        }
        return total;
    }
}

public class Robot implements Callable<Integer> {
    private final int input;

    public Robot(int input) {
        this.input = input;
    }

    @Override
    public Integer call() {
        // Some very long calculation
        Thread.sleep(10000);

        return input * input;
    }
} 
```

And here's how you'd call it from your `main()`:

```
public static void main(String args) throws Exception {
    // Note that the number of threads is now specified here
    ExecutorService pool = Executors.newFixedThreadPool(5);
    ResultCalculator calc = new ResultCalculator(pool);
    try {
        calc.startComputation();
        // Maybe do something while we're waiting
        System.out.printf("Result is: %d\n", calc.getFinalResult());
    } finally {
        pool.shutdownNow();
    }
} 
```

And here's how you'd test it (assuming JUnit 4 and Mockito):

```
@Test
@SuppressWarnings("unchecked")
public void testStartComputationAddsRobotsToQueue() {
    ExecutorService pool = mock(ExecutorService.class);
    Future<Integer> future = mock(Future.class);
    when(pool.submit(any(Callable.class)).thenReturn(future);

    ResultCalculator calc = new ResultCalculator(pool);
    calc.startComputation();

    verify(pool, times(5)).submit(any(Callable.class));
} 
```

Note that all this code is just a sketch which I have not tested or even tried to compile yet. But it should give you an idea of how the code can be structured.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T04:27:42.080

与其说要“测试五个线程是否已经启动”，倒不如退一步想想这五个线程到底应*该做什么*。然后进行测试以确保“某事”实际上正在完成。

如果您真的只是想测试线程是否已启动，您可以做一些事情。您是否在某处保留对线程的引用？如果是这样，您可以检索引用，计算它们，然后调用`isAlive()`每个引用（检查它是否返回`true`）。

我相信在某个 Java 平台类上有一些方法，您可以调用它来查找正在运行的线程数，或者查找在 a 中运行的所有线程`ThreadGroup`，但是您必须搜索以找出它是什么。

**回应您的评论的更多想法**

如果您的代码很简单`new Thread(runnable).start()`，我就不会费心去测试线程是否真正开始了。如果您这样做，您基本上只是在测试 Java 平台是否有效（它确实有效）。如果您用于初始化和启动线程的代码更复杂，我会删除该`thread.start()`部分并确保使用正确的参数等调用存根所需的次数。

不管你怎么做，我*肯定会*测试在多线程模式下运行时任务是否正确完成。从个人经验来看，我可以告诉你，**一旦**你开始用线程做*任何*远程复杂的事情，就很容易得到一些微妙的错误，这些错误只在某些条件下才会出现，而且可能只是偶尔出现。处理多线程代码的复杂性是一个非常滑的斜坡。

因此，如果你能做到，我*强烈*建议你做的不仅仅是简单的单元测试。在多线程、多核机器、非常大的数据集上运行任务的压力测试，并确保所有答案都完全符合预期。

此外，尽管您期望使用线程会提高性能，但我*强烈*建议您使用不同数量的线程对程序进行基准测试，以确保实际实现所需的性能提升。根据您的系统的设计方式，可能会遇到并发瓶颈，这可能会使您的程序在使用线程时几乎不会比不使用线程快。在某些情况下，它甚至可能*更慢*！

# java - 如何使用Java将较小的矩形放在较大的矩形内？

> ID：11642631
> 
> 赞同：0
> 
> 时间：2012-07-25T04:16:48.817
> 
> 标签：java, applet, java-2d

我偶然发现了一个我想用 Java 解决的问题。用户输入较大的矩形尺寸（即 L_width 和 L_height）和较小的矩形尺寸（即 S_width 和 S_height）。我想在较大的矩形内放置尽可能多的较小矩形并以图形方式显示它。

例如：当较大的矩形大小为 4 x 5 且较小的矩形大小为 2 x 2 时，我可以将其放置在较大矩形内的较小矩形的最大数量为 4。我想以图形方式显示它们.

作为 java 新手，我想知道如何从编程的角度解决这个问题，以及我必须使用什么概念来实现相同的目标。

* * *

用于计算最大矩形数的初始代码。any1 可以帮助我使用 java 以图形方式显示此结果吗

```
// Code Starts
import java.awt.Graphics;
import java.util.Scanner; 

import javax.swing.JComponent;
import javax.swing.JFrame;

//Class to store the output of layout
class layout{
    private int Cnt_BW_CW=0; // BoardWidth and CardWidth are arranged together
    private int Cnt_BW_CH=0;
    private int option=0;    // Option 1: width-width Option 2: width-height

    public int getCnt_BW_CW (){
        return Cnt_BW_CW;
    }
    public int getCnt_BW_CH (){
        return Cnt_BW_CH;
    }
    public int getoption (){
        return option;
    }

    public void setCnt_BW_CW (int newValue){
        Cnt_BW_CW = newValue;
    }
    public void setCnt_BW_CH (int newValue){
        Cnt_BW_CH = newValue;
    }
    public void setoption (int newValue){
        option = newValue;
    }
}

// Stores the Dimension
class Dimension{
    private float w,h;
    Scanner input = new Scanner( System.in );

    public Dimension(){
        System.out.print( "Enter Width: " ); 
        w = input.nextInt(); 
        System.out.print( "Enter Height: " ); 
        h = input.nextInt(); 
    }
    public Dimension(float width, float height){
        w = width;
        h = height;
    }
    public float getWidth (){
        return w;
    }
    public float getHeight (){
        return h;
    }
    public void setWidth (float newWidth){
        w = newWidth;
    }
    public void setHeight (float newHeight){
        h = newHeight;
    }
}

class MyCanvas extends JComponent {
    private static final long serialVersionUID = 1L;

    public void paint(Graphics g) {
        g.drawRect (10, 10, 200, 200);  
      }
}

public class boundedRect {
  @SuppressWarnings("unused")

  public static void main(String[] a) {
    Dimension Board = new Dimension();
    Dimension Card = new Dimension();
    int Cnt =0;

    Cnt = NumOfRect(Board, Card);
    System.out.printf( "Number of Cards:%d",Cnt );

    JFrame window = new JFrame();
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setBounds(30, 30, 300,300);
    window.getContentPane().add(new MyCanvas());
    window.setVisible(true);
  }

  public static int NumOfRect(Dimension b,Dimension c){
      float bw,bh,cw,ch;
      int bw_cw,bh_ch,bw_ch,bh_cw;
      int SameDimensionCnt,DiffDimensionCnt;
      int count;
      layout Result = new layout();

      bw =b.getWidth(); bh = b.getHeight();
      cw =c.getWidth(); ch = c.getHeight();

      if (bw < cw || bh < ch){
          System.out.println( "Board and Card Dimension mismatch" );
          System.exit(0);
      }

      bw_cw = (int)Math.floor(bw/cw);
      bh_ch = (int)Math.floor(bh/ch);
      SameDimensionCnt = bw_cw * bh_ch; 
      Result.setCnt_BW_CW(SameDimensionCnt);

      bw_ch = (int)Math.floor(bw/ch);
      bh_cw = (int)Math.floor(bh/cw);
      DiffDimensionCnt = bw_ch * bh_cw;
      Result.setCnt_BW_CH(DiffDimensionCnt);

      System.out.printf( "Matching BW x CW: %d\n",SameDimensionCnt );
      System.out.printf( "Matching BW x CH: %d\n",DiffDimensionCnt );

      if (SameDimensionCnt < DiffDimensionCnt ){
          count = DiffDimensionCnt;
          System.out.println( "Align Board Width and Card Height" );
          Result.setoption(2);
      }else {
          count = SameDimensionCnt;
          System.out.println( "Align Board Width and Card Width" );
          Result.setoption(1);
      }
      return count;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:23:47.183

所以你想用一些小矩形平铺一个大矩形。首先定义一个类来表示小矩形，并创建一个数据结构（可能是一个`ArrayList`）来保存它们。使用嵌套循环在/步骤`for`中遍历大矩形区域，并创建尽可能多的小矩形。在创建它们时将它们添加到。如果需要，请在 Google 上搜索以查找 Java 文档。`S_width``S_height``ArrayList``ArrayList`

然后你需要编写代码在屏幕上绘制它们。为此，请查看 Google 上的官方 Java 教程并阅读图形部分。

尝试先编写代码，如果遇到问题，请在此处发布代码（您可以编辑问题）。

# ruby - 使用 rvm 安装 ruby 1.9.3 时出错

> ID：11642632
> 
> 赞同：2
> 
> 时间：2012-07-25T04:17:13.193
> 
> 标签：ruby, rvm

我正在尝试使用 rvm 安装 ruby​​。我在以下命令中收到以下错误 -

> rvm 安装 1.9.3
> 
> 提取 ruby​​gems-latest-1.8 ...
> 
> 错误：运行 'gunzip < /usr/share/ruby-rvm/archives/rubygems-latest-1.8.tgz | 时出错 tar xf - -C /usr/share/ruby-rvm/src'，请阅读 /usr/share/ruby-rvm/log/ruby-1.9.3-p194/rubygems.extract.log
> 
> 为 /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/bin/ruby 安装 ruby​​gems
> 
> 错误：错误运行 'GEM_PATH="/usr/share/ruby-rvm/gems/ruby-1.9.3-p194:/usr/share/ruby-rvm/gems/ruby-1.9.3-p194@global:/usr /share/ruby-rvm/gems/ruby-1.9.3-p194:/usr/share/ruby-rvm/gems/ruby-1.9.3-p194@global" GEM_HOME="/usr/share/ruby-rvm/ gems/ruby-1.9.3-p194" "/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/bin/ruby" "/usr/share/ruby-rvm/src/rubygems-latest- 1.8/setup.rb"'，请阅读 /usr/share/ruby-rvm/log/ruby-1.9.3-p194/rubygems.install.log

以下是日志文件的摘录 -

> [2012-07-25 09:29:03] gunzip < /usr/share/ruby-rvm/archives/rubygems-latest-1.8.tgz | tar xf - -C /usr/share/ruby-rvm/src
> 
> gzip：stdin：不是 gzip 格式 tar：这看起来不像 tar 存档 tar：由于以前的错误而退出失败状态 [2012-07-25 09:31:08] gunzip < /usr/share/ruby-rvm /archives/rubygems-latest-1.8.tgz | tar xf - -C /usr/share/ruby-rvm/src
> 
> gzip：stdin：不是 gzip 格式 tar：这看起来不像 tar 存档 tar：由于以前的错误而退出失败状态

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T05:18:59.747

您正在使用因 Ubuntu 打包而损坏的 RVM 版本，请使用此答案进行修复： [https ://stackoverflow.com/a/9056395/497756](https://stackoverflow.com/a/9056395/497756)

# android - 从Android中的listview检索数据时，我想显示progressdialog的后台进程

> ID：11642641
> 
> 赞同：0
> 
> 时间：2012-07-25T04:18:06.567
> 
> 标签：android

我想从数据库中检索数据。所以我决定使用`ProgressDialog`.

我想让用户在后台查看要添加到列表视图中的记录数。请帮我，

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:06:46.327

使用如下所示的 AsyncTask 来显示 ProgressDialog

```
 private class FetchRSSFeeds extends AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

    /** progress dialog to show user that the backup is processing. */
    /** application context. */

    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();
    }

    protected Boolean doInBackground(final String... args) {
        try {

            /**
             * Fetch the data
             */
            Utilities.arrayRSS = objRSSFeed.FetchRSSFeeds(Constants.Feed_URL);
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

          // Setting data to list adaptar
          setListData();
          txtTitle.setText(Utilities.RSSTitle);
    }
} 
```

# asp.net-mvc-3 - 由`AuthorizeAttribute`重定向时在登录页面中显示自定义消息

> ID：11642643
> 
> 赞同：0
> 
> 时间：2012-07-25T04:18:10.910
> 
> 标签：asp.net-mvc-3, httpcontext, authorize-attribute

我已经编写了一个自定义`AuthorizeAttribute`以在登录页面中显示消息。这是代码。

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    public string Message { get; set; }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        bool authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            httpContext.Items["LoginFailMessage"] = Message;
        }

        return authorized;
    }
} 
```

在我的行动中，我会做

```
[MyAuthorize(Message = "Please login to continue")]
public ActionResult Detail() 
```

现在，我无法访问`HttpContext.Current.Items["LoginFailMessage"]`我视图中的项目。我意识到问题是，该项目仅针对一个重定向调用存在，但授权失败会导致多个重定向。

那么，有什么办法可以解决这个问题吗？我应该从哪里传递消息？

**编辑**

我想要做的是，假设允许匿名用户查看某事的简短描述。

与描述，有一个`edit`和一个`detail`链接。两者都`edit`需要`detail`用户登录。因此，如果单击其中一个，用户将被重定向到登录页面。

如果用户点击`edit`我将显示一条消息`Please login to edit`，如果点击`detail`可能`please login to see detail`在登录页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:34:59.167

使用 ModelState 来执行此操作会容易得多，例如：

```
[HttpPost]
public ActionResult Login(LoginViewModel model) {
    // .. check model state is valid
    if (AuthorizationService.Authorize(model.Username, model.Password)) {
        // .. user is authenticated
    }
    else {
        ModelState.AddModelError("", "Login failed.");
        return View(model);
    }
} 
```

然后，您可以使用 ValidationSummary() 在登录页面上显示错误，或者在 AddModelError 调用中传递用户名或密码模型属性的名称以使用 ValidationMessage()。

# ios - 碰撞检测 Cocos2d

> ID：11642649
> 
> 赞同：-2
> 
> 时间：2012-07-25T04:18:31.513
> 
> 标签：ios, xcode, cocos2d-x, side-scroller

我的应用程序是横向卷轴。我希望能够让我的精灵能够撞到一个物体并且不能穿过它。我对 Cocos2d 很陌生，那么我怎样才能让我的角色（精灵）这样做呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-25T10:46:37.417

先从基础开始，看看和cocosdx构建中包含的tests项目

你读过cocos2dx wiki上的教程吗？

[http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Chapter_5_-_How_to_Detect_the_Collisions](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Chapter_5_-_How_to_Detect_the_Collisions)

或查看 ray wenderlich 的网站，对开发人员非常有用的网站

[http://www.raywenderlich.com/606/how-to-use-box2d-for-just-collision-detection-with-cocos2d-iphone](http://www.raywenderlich.com/606/how-to-use-box2d-for-just-collision-detection-with-cocos2d-iphone)

祝你好运

# java - 使用spring模板的pom.xml中的Maven错误

> ID：11642652
> 
> 赞同：4
> 
> 时间：2012-07-25T04:18:46.570
> 
> 标签：java, spring, maven

我在 spring 模板项目的 mi maven pom.xml 中收到以下错误

“描述资源路径位置类型 ArtifactDescriptorException：无法读取 org.slf4j:slf4j-api:jar:1.5.6 的工件描述符：ArtifactResolutionException：无法从[http://传输 org.slf4j:slf4j-api:pom:1.5.6 /repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)缓存在本地存储库中，直到中央的更新间隔已过或强制更新才会重新尝试解析。原始错误：无法传输工件org.slf4j：slf4j-api： pom:1.5.6 从/到中央 (http://repo.maven.apache.org/maven2): C:\Users\muhsin.HIFX.m2\repository\org\slf4j\slf4j-api\1.5.6\ slf4j-api-1.5.6.pom.ahc0570cfa3a1934af5 (系统找不到指定的文件) pom.xml /sample line 1 Maven Dependency Problem"

我的 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springframework.samples.spring</groupId>
    <artifactId>spring-jpa-utility</artifactId>
    <version>1.0.0.CI-SNAPSHOT</version>
    <packaging>jar</packaging>
    <name>Spring JPA Utility</name>
    <url>http://www.springframework.org</url>
    <description>
        <![CDATA[This project is a minimal jar utility with Spring configuration for JPA usage.]]>
    </description>
    <properties>
        <maven.test.failure.ignore>true</maven.test.failure.ignore>
        <spring.framework.version>3.0.6.RELEASE</spring.framework.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.6.0.Final</version>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.1.0.Final</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.framework.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.2.2</version>
        </dependency>       
        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <version>1.3.156</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
    </dependencies>

    <build>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>        
        </plugins>
    </build>

 <!--   <pluginRepositories>
        <pluginRepository>
            <id>Codehaus</id>
            <url>http://repository.codehaus.org/</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>
    <repositories>
        <repository>
            <id>org.jboss.repository.releases</id>
            <name>JBoss Maven Release Repository</name>
            <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
    </repositories>
    <distributionManagement>
        <downloadUrl>http://www.springframework.org/download</downloadUrl>
        <site>
            <id>staging</id>
            <url>file:///${user.dir}/target/staging/org.springframework.batch.archetype/${pom.artifactId}</url>
        </site>
        <repository>
            <id>spring-release</id>
            <name>Spring Release Repository</name>
            <url>file:///${user.dir}/target/staging/release</url>
        </repository>
        <snapshotRepository>
            <id>spring-snapshot</id>
            <name>Spring Snapshot Repository</name>
            <url>file:///${user.dir}/target/staging/snapshot</url>
        </snapshotRepository>
    </distributionManagement> -->
</project> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T09:54:32.027

您还可以使用强制更新标志（-U），例如：

```
 mvn clean install -U 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T07:14:43.567

根据错误信息

> “描述资源路径位置类型 ArtifactDescriptorException：无法读取 org.slf4j:slf4j-api:jar:1.5.6 的工件描述符：ArtifactResolutionException：无法从[http://传输 org.slf4j:slf4j-api:pom:1.5.6 /repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2) 缓存在本地存储库中，直到中央的更新间隔过去或强制更新后才会重新尝试解析。

这意味着您必须删除文件夹 $HOME/.m2/repository/org/slf4j ，然后您需要通过

```
mvn clean package 
```

和其他给定的错误消息：

> 原始错误：无法将工件 org.slf4j:slf4j-api:pom:1.5.6 从/传输到中央 (http://repo.maven.apache.org/maven2): C:\Users\muhsin.HIFX.m2 \repository\org\slf4j\slf4j-api\1.5.6\slf4j-api-1.5.6.pom.ahc0570cfa3a1934af5（系统找不到指定的文件）pom.xml /sample line 1 Maven Dependency Problem”

表示您的存储库访问存在某种问题。要么您有一个未正确配置的代理。我推荐的是使用使生活更轻松的存储库管理器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T04:27:55.387

1.  您可以尝试运行 maven clean 来执行清理
2.  您可以手动导航到本地存储库中的指定文件并将其删除，然后尝试使用 mvn clean install -e 将其作为新副本下载

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-06T01:04:31.060

打开这个位置 C:\Users...m2\repository\org\apache\maven\plugins\maven-surefire-plugin\2.10 删除文件 maven-surefire-plugin-2.10 并构建项目。

它对我有用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-01T09:35:54.623

删除文件夹中的所有文件 **C:\Users\username.m2\repository** open eclipse 再次重建项目 - （给 eclipse IDE 一些时间来构建工作区）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-06T10:21:10.400

<maven-jar-plugin.version>3.1.1</maven-jar-plugin.version>

在属性中添加这一行。为我工作！

# c - 数据类型修饰符和移位运算符

> ID：11642653
> 
> 赞同：6
> 
> 时间：2012-07-25T04:18:48.920
> 
> 标签：c

```
int main(void)  
{  

   unsigned i = -23; // line 1
   short a, b = 0x1;

   printf("sizeof(short) = %i\n", (int)sizeof(short)); // line 2

   a = b << 31; // line 3
   printf("i = %i", i); // line 4
   printf("i = %u", i); // line 5

   return 0;
} 
```

为什么指定类型修饰符 unsigned 时第 1 行没有给出任何错误？

第 2 行在我的系统中打印`sizeof(short)`为 2 个字节。a & b 是短整数，因此 2 字节或 16 位长。但是第 3 行不会引发任何错误。当字长仅为 16 位时，如何左移 31 位？

第 4 行和第 5 行是否有任何隐式转换？

我在 64 位 Mac 上使用 GCC 编译器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T04:23:37.703

1.  您不会收到错误，因为负整数常量被隐式转换为无符号值，成为一个非常大的数字（MSB 设置为 1）
2.  一个值被隐式转换为`int`^(1,2)，移位并赋值回；当数字被转换回时，你会得到全零`short`，但这是一个未定义的行为³。
3.  C 意义上的第 4 行和第 5 行没有*转换*；与将参数传递给可变参数函数相关的常规类型提升确实适用。但是，`printf`在第 4 行将 unsigned 重新解释为 singed：格式说明符是唯一说明`printf`传递给它的参数类型的内容。

* * *

¹换班前促销：[链接](http://port70.net/~nsz/c/c99/n1256.html#6.5.7)。

²整数促销：[链接](http://port70.net/~nsz/c/c99/n1256.html#6.3.1.1)。

³移动 30 就可以了，因为`2^30`可以表示为`int`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T04:41:36.270

1) Negative integers are converted to unsigned by adding `UINT_MAX + 1` as per point 2 of [C99 6.3.1.3](http://c0x.coding-guidelines.com/6.3.1.3.html):

> ```
>  6.3.1.3 Signed and unsigned integers
>  [...]
>  2 Otherwise, if the new type is unsigned, the value is converted by repeatedly
>  adding or subtracting one more than the maximum value that can be represented
>  in the new type until the value is in the range of the new type. 
> ```

2) Operands to the bit shift operators are implicitly converted to `int` as per [C99 6.5.7](http://c0x.coding-guidelines.com/6.5.7.html)

> ```
> 6.5.7 Bitwise Shift Operators
> 1 Each of the operands shall have integer type.
> 2 The integer promotions are performed on each of the operands.
> 3 The type of the result is that of the promoted left operand. 
> ```

3) See dasblinkenlight's answer.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:16:50.230

**分配**：你给变量的类型并没有说明你可以放什么，而是编译器应该如何解释它。在您的情况下，-23 被“转换”为 32 位，然后将该值放入 unsigned int （也有 32 位）...（位长度取决于体系结构）

[http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)

**移位**：当您移位时，一侧的位“消失”，另一侧的位（零）必须移入。您可以将变量移位多少次。

**Printfing**：同样，这不是关于“转换”，而是关于“解释”一系列位。

# sql - Oracle中如何将字符串转换为日期格式

> ID：11642661
> 
> 赞同：0
> 
> 时间：2012-07-25T04:19:40.400
> 
> 标签：sql, datetime, oracle11g, timestamp

我有一个文件包含一个类似的字符串`2011-03-14 11:57:42+08:00`，我需要将它存储在具有`DATE`数据类型的列中。我使用 Oracle 11g。

我已经尝试过`TO_DATE`功能，但它没有用。

谁能帮我？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:12:37.607

您必须使用该函数`TO_TIMESTAMP_TZ`来正确解析时区：

```
SELECT CAST(TO_TIMESTAMP_TZ('2011-03-14 11:57:42+08:00', 'YYYY-MM-DD HH24:MI:SS+TZH:TZM') AS DATE) AS my_date 
  FROM DUAL
 ; 
```

（并且作为评论中您示例的旁注：不需要`TO_CHAR`，缺少引用并且格式模型`MON`（缩写月份）不正确）

# php - 如何使用 PHPActiveRecord 和 CodeIgniter 更新记录？

> ID：11642664
> 
> 赞同：1
> 
> 时间：2012-07-25T04:19:46.553
> 
> 标签：php, activerecord, phpactiverecord

我在这里打破我的头。希望你能看看是什么错误。我已经通过火花将 PHPActiveRecord 安装到 CodeIgniter 并且除了一件事之外一切都很好。让我给你看一些代码。

这是我有问题的控制器。

模型**文章.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Article extends ActiveRecord\Model
{
    static $belongs_to = array(
        array('category'),
        array('user')
    );

    public function updater($id, $new_info)
    {
            // look for the article
        $article = Article::find($id);

            // update modified fields
        $article->update_attributes($new_info);
        return true;
    }
} 
```

这是它向我显示错误的部分。**Controllerarticles.php**中的相关代码

 **```
 // if validation went ok, we capture the form data.
        $new_info = array(
            'title'       => $this->input->post('title'),
            'text'        => $this->input->post('text'),
            'category_id' => $this->input->post('category_id'),
         );

        // send the $data to the model                          
        if(Article::updater($id, $new_info) == TRUE) {
            $this->toolbox->flasher(array('code' => '1', 'txt' => "Article was updated successfully."));
        } else {
            $this->toolbox->flasher(array('code' => '0', 'txt' => "Error. Article has not been updated."));
        }

        // send back to articles dashboard and flash proper message
        redirect('articles'); 
```

当我调用 Article::updater($id, $new_info) 时，它会显示一个令人讨厌的大错误：

**致命错误：**在非对象上调用成员函数 update_attributes()

**最奇怪的是，我有一个名为 categories.php 的控制器和模型 Categoy.php**具有相同的功能（我复制粘贴了文章的类别功能），这一次不起作用。

我在模型 Article.php 中有不同的功能，它们都工作正常，我正在为 Article::updater 部分苦苦挣扎。

有人知道正确更新一行的方法吗？我按照 PHP AR 站点中的文档所述使用，它给了我这个错误。为什么它确实说那不是一个对象？当我执行 $article = Article::find($id) 时，它应该是一个对象。

也许我没有看到真正容易的东西。在电脑前呆了太多小时。

谢谢朋友。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:25:50.437

你需要改变：

```
public function updater($id, $new_info)
    {
            // look for the article
        $article = Article::find($id); 
```

到：

```
public static function updater($id, $new_info)
    {
            // look for the article
        $article = Article::find($id); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T04:24:19.577

函数更新器需要标记为静态，并且它应该在 $id 错误时处理错误情况。

```
public static function updater($id, $new_info)
{
        // look for the article
    $article = Article::find($id);
    if ($article === null)
        return false;

        // update modified fields
    $article->update_attributes($new_info);
    return true;
} 
```**

# ios - 隐藏设置为 true 后按钮不隐藏 - IOS

> ID：11642665
> 
> 赞同：0
> 
> 时间：2012-07-25T04:19:52.077
> 
> 标签：ios, xcode

我有一个一般性问题，我想对另一个类隐藏按钮，该类是一个包装类，用于混合 c++ 代码和目标 c 代码。我有一个函数，例如：do action{}，该函数将根据输入显示一些按钮并隐藏一些其他按钮。如果我在同一个类中调用该函数，它工作正常。但是，如果我从未按预期工作的包装类调用。

当单击按钮时，我尝试通过调用这样的函数来更改按钮的状态。有效。

```
main_class.mm
- (IBAction)switchViews:(id)sender
{
    [self doaction:5];
}

-(void) doaction:user_id
{
    self.email_id.hidden = YES;
}

@interface interface_wrapper : NSObject
{

@public
    rootViewController *root_view;

}

-(void) doaction:(long)user_id;

@end

@implementation gui_interface_wrapper

-(void) success:(long) user_id
{
         // root_view is set with root controller object. So that I can access main which is  having the button.

        [root_view.main doaction:user_id];

} 
```

@end 但是，如果我没有在那个地方调用该函数。并且函数调用是从外部的某个包装类进行的，它有一个指向该对象的指针[我检查了两个调用中的自我地址相同]按钮被禁用而不是隐藏。我们可以从包装类执行 GUI 操作吗？

任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:33:50.137

您是否正在创建该类的另一个对象并调用其方法？比它不起作用。

```
class A
{
      object ofA;
}
//Code  In same class 

A a = init(); 
a.ofA = some value; 

//Code  In some other class
A anotherA = init(); 
anotherA.ofA = some other value; 
```

你在抱怨 a 的价值没有改变吗？这不会因为您正在更改 anotherA 并期望反映在...我希望这是您的问题如果不是，您应该放置一些代码

# c# - 非对称加密和解密 C#

> ID：11642668
> 
> 赞同：4
> 
> 时间：2012-07-25T04:20:05.867
> 
> 标签：c#, encryption, encryption-asymmetric

我已经实现了这段代码，用于使用公钥加密消息并使用私钥解密..现在我需要使用私钥更改它加密并使用公钥解密。我应该在以下代码中更改什么，我是初学者。请帮助。

```
public static string Encrypt(string plainText, X509Certificate2 certificate)
    {
        if (string.IsNullOrEmpty(plainText))
            throw new ArgumentNullException("plainText");

        using (var aesManaged = new AesManaged())
        {
            aesManaged.KeySize = 256;
            aesManaged.BlockSize = 128;
            aesManaged.Mode = CipherMode.CBC;

            // Create the streams used for encryption.
            using (var memoryStream = new MemoryStream())
            {
                // Generate a Symmetric Key used to actually encrypt the data

                RSAPKCS1KeyExchangeFormatter keyFormatter = new RSAPKCS1KeyExchangeFormatter((RSACryptoServiceProvider)certificate.PublicKey.Key);
                byte[] keyEncrypted = keyFormatter.CreateKeyExchange(aesManaged.Key, aesManaged.GetType());

                //byte[] LenSalt = new byte[_saltSize];

                // Create byte arrays to contain
                // the length values of the key and IV.
                byte[] LenK = new byte[_keyBytes];
                byte[] LenIV = new byte[_keyBytes];

                // Salt genration : 
                // default iteration count is 1000 in .NET (this is the same as when using Constructor(string password, int salt))
                //using (var keyDerivationFunction = new Rfc2898DeriveBytes(keyEncrypted, LenSalt, _iterations))
                //{
                //    LenSalt = keyDerivationFunction.Salt;
                //}

                int lKey = keyEncrypted.Length;
                LenK = BitConverter.GetBytes(lKey);
                int lIV = aesManaged.IV.Length;
                LenIV = BitConverter.GetBytes(lIV);

                // Write the following to the Stream
                // for the encrypted file (outFs):
                // - length of the key
                // - length of the IV
                // - encrypted key
                // - the IV
                // - the encrypted cipher content
                memoryStream.Write(LenK, 0, 4);
                memoryStream.Write(LenIV, 0, 4);
                //memoryStream.Write(LenSalt, 0, 4);
                memoryStream.Write(keyEncrypted, 0, lKey);
                memoryStream.Write(aesManaged.IV, 0, lIV);
                //memoryStream.Write(LenSalt, 0, _saltSize);

                //using (var encryptor = aesManaged.CreateEncryptor(aesManaged.Key, aesManaged.IV))
                using (var encryptor = aesManaged.CreateEncryptor())
                using (var memoryStreamEnc = new MemoryStream())
                {
                    using (var cryptoStream = new CryptoStream(memoryStreamEnc, encryptor, CryptoStreamMode.Write))
                    using (var streamWriter = new StreamWriter(cryptoStream))
                    {
                        // Send the data through the StreamWriter, through the CryptoStream, to the underlying MemoryStream
                        streamWriter.Write(plainText);
                    }
                    memoryStream.Write(memoryStreamEnc.ToArray(), 0, memoryStreamEnc.ToArray().Length);
                }

                return Convert.ToBase64String(memoryStream.ToArray());

            }
        }
    }

    /// <summary>
    /// Decrypts the ciphertext using the public key.
    /// </summary>
    /// <param name="ciphertext">The ciphertext to decrypt.</param>
    /// <param name="certificate">The RSA certificate (need access to Private Key for decryption to work).</param>
    /// <returns>The decrypted text.</returns>
    public static string Decrypt(string ciphertext, X509Certificate2 certificate)
    {
        string outstring = string.Empty;

        if (string.IsNullOrEmpty(ciphertext))
            throw new ArgumentNullException("cipherText");

        if (!certificate.HasPrivateKey)
            throw new ApplicationException("The private key is not accessible.  Decryption is not supported.");

        var allTheBytes = Convert.FromBase64String(ciphertext);

        //using (var keyDerivationFunction = new Rfc2898DeriveBytes(UTF8Encoding.UTF8.GetString(symmetricKey), saltBytes))
        using (var aesManaged = new AesManaged())
        {

            aesManaged.KeySize = 256;
            aesManaged.BlockSize = 128;
            aesManaged.Mode = CipherMode.CBC;

            // Create byte arrays to get the length of
            // the encrypted key and IV.
            // These values were stored as 4 bytes each
            // at the beginning of the encrypted package.
            byte[] LenK = new byte[_keyBytes];
            byte[] LenIV = new byte[_keyBytes];

            using (MemoryStream InStr = new MemoryStream(allTheBytes))
            {
                InStr.Seek(0, SeekOrigin.Begin);
                InStr.Read(LenK, 0, _keyBytes - 1);
                InStr.Seek(_keyBytes, SeekOrigin.Begin);
                InStr.Read(LenIV, 0, _keyBytes - 1);

                // Convert the lengths to integer values.
                int lenK = BitConverter.ToInt32(LenK, 0);
                int lenIV = BitConverter.ToInt32(LenIV, 0);

                // Determine the start postition of
                // the ciphter text (startC)
                // and its length(lenC).
                int startC = lenK + lenIV + 8;
                int lenC = (int)InStr.Length - startC;

                // Create the byte arrays for
                // the encrypted AesManaged key,
                // the IV, and the cipher text.
                byte[] KeyEncrypted = new byte[lenK];
                byte[] IV = new byte[lenIV];

                // Extract the salt, key and IV
                // starting from index 8
                // after the length values.
                InStr.Seek(8, SeekOrigin.Begin);
                InStr.Read(KeyEncrypted, 0, lenK);
                InStr.Seek(8 + lenK, SeekOrigin.Begin);
                InStr.Read(IV, 0, lenIV);

                byte[] KeyDecrypted = ((RSACryptoServiceProvider)certificate.PrivateKey).Decrypt(KeyEncrypted, false);

                byte[] CipherTextBytes = new byte[lenC];
                InStr.Seek(startC, SeekOrigin.Begin);
                InStr.Read(CipherTextBytes, 0, lenC);

                using (var decryptor = aesManaged.CreateDecryptor(KeyDecrypted, IV))
                using (var memoryStream = new MemoryStream(CipherTextBytes))
                using (var cryptoStream = new CryptoStream(memoryStream, decryptor, CryptoStreamMode.Read))
                using (var streamReader = new StreamReader(cryptoStream))
                {
                    // Return the decrypted bytes from the decrypting stream.
                    return streamReader.ReadToEnd();
                }
            }
        }
    } 
```

# java - EclipseLink 和 Spring OXM 继承问题

> ID：11642669
> 
> 赞同：1
> 
> 时间：2012-07-25T04:20:10.927
> 
> 标签：java, inheritance, jaxb, eclipselink

在尝试解组对象时，我遇到了继承问题。这是我的课

**一个**

```
@XmlRootElement(name="A")
public abstract class A{
} 
```

**乙**

```
@XmlRootElement(name="B")
public class B extends A{
   String bField;
   @XmlAttribute(name="b")
   public String getBField(){
     return bField;
   }
   public void setBField(String value){
     this.bField = value;
   }
} 
```

**C**

```
@XmlRootElement(name="C")
public class C extends A{
  String cField;
  @XmlAttribute(name="c")
  public String getCField(){
     return cField;
  }
  public void setCField(String value){
     this.cField = value;
  } 
} 
```

**容器**

```
@XmlRootElement(name="container")
public class Container{
   ArrayList<B> listB;
   ArrayList<C> listC;
   public ArrayList<B> getListB(){
       return listB;
   }
   @XmlElementWrapper(name="list-B")
   @XmlElement(name="b")
   public ArrayList<B> getListB(){
       return listB;
   }
   @XmlElementWrapper(name="list-C")
   @XmlElement(name="c")
   public ArrayList<C> getListC(){
       return listC;
   }
   public ArrayList<C> getListC(){
       return listC;
   }
} 
```

然后输入XML文件

```
<container>
  <list-B>
    <b b="BFied"/>
  </list-B>
  <list-C>
    <c c="CField"/>
  </list-C>
</container> 
```

我使用了与 Spring OXM 集成的 EclipseLink JAXB。当我将 xml 文件解组到 Container 的实例时，每件事都是重复的。在列表 B 中，我有 2 B 个重复的实例（与列表 C 相同）。

请让我知道我在哪里做错了？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:59:25.187

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

我无法重现您所看到的问题。我正在使用可以从以下位置获得的 EclipseLink 2.4.0：

*   [http://www.eclipse.org/eclipselink/downloads/](http://www.eclipse.org/eclipselink/downloads/)

以下是我根据您的问题的完整代码：

**一个**

```
package forum11642669;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="A")
public abstract class A{
} 
```

**乙**

```
package forum11642669;

import javax.xml.bind.annotation.*;

@XmlRootElement(name = "B")
public class B extends A {

    String bField;

    @XmlAttribute(name = "b")
    public String getBField() {
        return bField;
    }

    public void setBField(String value) {
        this.bField = value;
    }

} 
```

**C**

```
package forum11642669;

import javax.xml.bind.annotation.*;

@XmlRootElement(name = "C")
public class C extends A {

    String cField;

    @XmlAttribute(name = "c")
    public String getCField() {
        return cField;
    }

    public void setCField(String value) {
        this.cField = value;
    }

} 
```

**容器**

您在问题中拥有的类的版本`Container`无法编译，因此我在下面对其进行了修改：

```
package forum11642669;

import java.util.ArrayList;
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "container")
public class Container {

    ArrayList<B> listB;
    ArrayList<C> listC;

    @XmlElementWrapper(name = "list-B")
    @XmlElement(name = "b")
    public ArrayList<B> getListB() {
        return listB;
    }

    public void setListB(ArrayList<B> listB) {
        this.listB = listB;
    }

    @XmlElementWrapper(name = "list-C")
    @XmlElement(name = "c")
    public ArrayList<C> getListC() {
        return listC;
    }

    public void setListC(ArrayList<C> listC) {
        this.listC = listC;
    }

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum11642669;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Container.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11642669/input.xml");
        Container container = (Container) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(container, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<container>
   <list-B>
      <b b="BFied"/>
   </list-B>
   <list-C>
      <c c="CField"/>
   </list-C>
</container> 
```

# sql - SQL 不存在条件

> ID：11642670
> 
> 赞同：0
> 
> 时间：2012-07-25T04:20:18.643
> 
> 标签：sql

我有如下所述的三个表：

```
dbo.ServiceEntry
ID  RunLogEntry  Reconciled
1    0            1
2    4            1
3    5            1

dbo.ServiceEntryPart
ID  ServiceEntryID  PartId     ServiceEntryTypeID
1    1                3          1
2    2                4          2
3    2                4          1,2

dbo.Part
ID  Desc     Active (bitfield)
3   xyz        1
4   abc        1 
```

查询如下：

```
SELECT * 
  FROM ServiceEntry AS S 

 WHERE (S.RunLogEntryID is not null) AND (S.Reconciled=@ReconciledValue) 
   AND EXISTS (SELECT ServiceEntryID 
                 FROM ServiceEntryPart   SEP  
                 JOIN Part on SEP.PartID = Part.ID    
                WHERE ((@ActivePart = 0 AND Part.Active is not null) 
                    OR (@ActivePart = 1 and Part.Active = 0))      
                  AND (@ServiceTypes is null 
                    OR CHARINDEX(','+cast(SEP.ServiceTypeIDs as varchar(255))+',',','+@ServiceTypes+',') > 0))
    OR (NOT EXISTS (SELECT ServiceEntryID 
                      FROM ServiceEntryPart   SEP  
                      JOIN Part on SEP.PartID = Part.ID)) 
```

服务条目有一些包含runlogentry id 为0 的记录。如果服务条目表中的runlogentryid 值为0，则该服务条目将没有服务条目部分记录。这就是为什么我将它们分成两部分，正如您从查询中注意到的那样，例如存在和不存在。exists 语句处理所有具有服务条目部分的服务条目，对于这些条目，过滤器将适用。如果过滤器有值，则不需要不存在块，因为过滤器 servicetypeids 和 activepart 仅用于具有服务条目部分的记录。因此，换句话说，如果没有传递参数，则第一个存在块获取具有服务部分的服务条目，不存在获取具有 0 或非空的 runlogentry id 的服务条目。这很好用。问题是当参数通过时，我需要排除没有服务条目部分的服务条目，当它们存在时，我没有得到正确的结果。我希望我在解释问题方面做得很好。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:31:13.503

这可能不是您想要的，老实说，查询似乎无处不在。

您可能正在寻找像“（@ActivePart 为空或@ActivePart = Part.Active）”这样的活动部件过滤器。您的存在由内部连接隐式处理。我认为与您要查找的内容接近的查询如下。

```
select *
FROM ServiceEntry AS S
INNER JOIN ServiceEntryPart AS SEP ON SEP.ServiceEntryID = S.ServiceEntryID
INNER JOIN Part AS P ON P.PartID = SEP.PartID
WHERE S.RunLogEntryID is not null
    and S.Reconciled = @ReconciledValue
    and (@ActivePart is null or @ActivePart = Part.Active)
    and (@ServiceTypes is null or charindex(','+cast(SEP.ServiceTypeIDs as varchar(255))+',',','+@ServiceTypes+',') > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:28:03.927

我不能确定，因为我没有您列的业务定义，但我怀疑您处理 Part.Active 的条件是错误的。我希望这些值是 0 或 1，而不是 NULL 或 0。所以我应该认为当参数为 NULL 或参数与列匹配时，测试应该返回 TRUE。

您的 CHARINDEX 函数的参数颠倒了。

您需要额外的括号来获得正确的操作顺序，并且您的 OR NOT EXISTS 子句需要额外的条件才能使其仅在参数为 NULL 时才为真。

我相信以下内容更接近您正在寻找的内容。但我担心 ServiceTypes 测试。只有当参数包含单个 ServiceTypeID 时，它才会可靠地工作。如果它包含多个 ID，则可能无法正常工作。例如，我认为“1,3”的参数值应该匹配“1,2,3”的列表，但它不会。

```
SELECT *
  FROM ServiceEntry AS S
 WHERE (S.RunLogEntryID IS NOT NULL)
   AND (S.Reconciled=@ReconciledValue)
   AND( EXISTS(
          SELECT ServiceEntryID
            FROM ServiceEntryPart SEP
            JOIN Part ON SEP.PartID = Part.ID
           WHERE( @ActivePart IS NULL
                  OR @ActivePart = Part.Active
                )
             AND ( @ServiceTypes IS NULL
                   OR CHARINDEX( ','+@ServiceTypes+',',
                                 ','+cast(SEP.ServiceTypeIDs as varchar(255))+','
                               ) > 0
                 )
        )
        OR( @ActivePart IS NULL
            AND @ServiceTypes IS NULL
            AND NOT EXISTS( SELECT ServiceEntryID
                              FROM ServiceEntryPart SEP
                              JOIN Part on SEP.PartID = Part.ID
                          )
          )
      ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T04:30:22.453

在不尝试理解 SQL 的其余部分的情况下，如果您只想在参数为 null 时避免使用 NOT EXISTS 子句，则可以执行类似的操作。

```
SELECT * 
  FROM ServiceEntry AS S 
  JOIN     
 WHERE (S.RunLogEntryID is not null) AND (S.Reconciled=@ReconciledValue) 
   AND EXISTS (SELECT ServiceEntryID 
                 FROM ServiceEntryPart   SEP  
                 JOIN Part on SEP.PartID = Part.ID    
                WHERE ((@ActivePart = 0 AND Part.Active is not null) 
                    OR (@ActivePart = 1 and Part.Active = 0))      
                  AND (@ServiceTypes is null 
                    OR CHARINDEX(','+cast(SEP.ServiceTypeIDs as varchar(255))+',',','+@ServiceTypes+',') > 0))
    OR (@ReconciledValue is null and @ActivePart is null and @ServiceTypes is null
        and (NOT EXISTS (SELECT ServiceEntryID 
                      FROM ServiceEntryPart   SEP  
                      JOIN Part on SEP.PartID = Part.ID))) 
```

# java - 如何编译 MVC3 (razor) 视图，包括 Web 项目中的一些 java 文件

> ID：11642677
> 
> 赞同：2
> 
> 时间：2012-07-25T04:21:26.503
> 
> 标签：java, asp.net-mvc-3, compiler-errors

我想在我的 ASP.Net MVC3(razor) 项目中编译视图。
我 [在 ASP.NET MVC 中使用了这种技术编译视图](https://stackoverflow.com/questions/383192/compile-views-in-asp-net-mvc/542944#542944)

它工作正常，但问题是当我这样做时，开始显示错误：
**`"The CodeDom provider type "Microsoft.VJSharp.VJSharpCodeProvider, VJSharpCodeProvider, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" could not be located."`**

*当我挖掘更多时，我发现当一些java 文件*包含在项目中时会发生此错误。我有一个在 java 上制作的打印机插件（一些`.jar`和其他 java 相关文件）。当我删除这些文件时，一切都开始正常工作。但问题是，**我无法**从我的项目中删除这些 java 文件，因为它们在我的应用程序中具有重要作用。

有什么方法可以编译我的视图并将 java 文件包含到我的项目中？
任何建议将不胜感激。

# visual-studio-2010 - Web Developer 2010 Express 未列出 4.0 框架

> ID：11642681
> 
> 赞同：0
> 
> 时间：2012-07-25T04:21:50.433
> 
> 标签：visual-studio-2010, .net-4.0

无论我这几天做什么，Web Developer 2010 Express 都没有看到 4.0 NET Framework。如果要在应用程序-目标框架中右键单击解决方案属性，它会列出 2.0、3.0 和 3.5，它们未安装在我的计算机上，但实际安装的是 4.0。我尝试使用 dotnetfx_cleanup_tool 清理所有内容，重新安装 4.0 客户端和完整版几次，将引用程序集复制到不同的文件夹等等，但 WDE 仍然看不到它。

我还安装了适用于 Windows 7 和 .NET Framework 4 的 SDK。

它在哪里以及如何在扫描注册表或某些配置文件中找到框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:27:50.867

要面向 .NET 2.0/3.0/3.5，您必须安装 .NET 3.5。

并且 Web Develoepr 需要完整的配置文件，而不是客户端配置文件。

# php - 如何设置标题以下载文件 .apk 或 .jar？

> ID：11642684
> 
> 赞同：14
> 
> 时间：2012-07-25T04:22:54.040
> 
> 标签：php, joomla

我有一个示例 $file 是 test.zip 或 test.apk 或 test.jar

```
$len = filesize($file);
$filename = basename($file);
ob_end_clean();
JResponse::clearHeaders();
JResponse::setHeader('Pragma', 'public', true);
JResponse::setHeader('Expires', '0', true);
JResponse::setHeader('Cache-Control', 'must-revalidate, post-check=0, pre-check=0', true);
JResponse::setHeader('Content-Type', $file, true);
JResponse::setHeader('Content-Disposition', 'attachment; filename='.$filename.';', true);
JResponse::setHeader('Content-Transfer-Encoding', 'binary', true);
JResponse::setHeader('Content-Length', $len, true);
JResponse::sendHeaders();
echo JFile::read($file); 
```

当读取文件为 test.zip 时结果正常，但是当读取文件`test.apk or test.jar`是系统错误时，如何设置标题以读取此文件（apk，jar）

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-25T05:02:50.527

Content-Type 中的 setHeader 是

```
'apk' => 'application/vnd.android.package-archive'
'jar' => 'application/java-archive' 
```

更多： [https ://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types](https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T04:32:42.597

尝试使用

```
Content-type: application/jar
Content-type: application/apk 
```

但我认为这行代码是错误的。

```
JResponse::setHeader('Content-Type', $file, true); 
```

可能你必须像这样使用

```
JResponse::setHeader('Content-Type', 'application/jar', true); 
```

# php - Symfony2 CLI 错误（“stty”未被识别为内部或外部命令）

> ID：11642686
> 
> 赞同：2
> 
> 时间：2012-07-25T04:23:09.500
> 
> 标签：php, symfony, entity, stty

尝试从 Windows 命令行在 Symfony2 中生成实体时出现以下错误：

```
'stty' is not recognized as an internal or external command,
operable program or batch file. 
```

我刚刚将 FOSUserBundle 添加到我的 Symfony Bundles 中。并试图建立一个实体。

该错误也出现在其他地方。

我还添加了 FOSUserBundle 用户管理。操作系统：适用于 PHP 的 Windows 7 xampp 包。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T06:47:39.237

我认为这与这个[问题](https://github.com/symfony/symfony/issues/4974)有关。

# android - NDK 错误-不能做 ndk-build

> ID：11642696
> 
> 赞同：1
> 
> 时间：2012-07-25T04:24:22.440
> 
> 标签：android, android-ndk

我正在为我的项目使用 NDK... 我的 android.mk 文件

```
LOCAL_PATH:=$(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE:= libfreeimage
LOCAL_SRC_FILES:=libfreeimage.a
include $(PREBUILT_STATIC_LIBRARY)

LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE:= imageprocessing
LOCAL_SRC_FILES:= imageprocessing.cpp
LOCAL_STATIC_LIBRARIES:= libfreeimage
LOCAL_LDLIBS:= -lm -llog -ljnigraphicss
include $(BUILD_SHARED_LIBRARY) 
```

我得到的错误 -

```
flock@QS57:~/Desktop/android-imagefilter-ndk$ /home/flock/ANDROID/android-ndk-r8/ndk-build
make: *** No rule to make target `/home/flock/ANDROID/android-ndk-r8/build/core/imageprocessing.cpp', needed by `obj/local/armeabi/objs/imageprocessing/imageprocessing.o'.  Stop. 
```

我的文件层次结构......

```
jni-
  Android.mk 
  imageprocessing.cpp  
  libfreeimage.a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:43:36.223

好吧，我得到了解决方案，这是因为我给了“ LOCAL_PATH := $(call my-dir) ”两次。我删除了第二个“ LOCAL_PATH := $(call my-dir) ”，问题就解决了。

# database - 使用数据视图更新 DataGridView

> ID：11642699
> 
> 赞同：0
> 
> 时间：2012-07-25T04:25:00.960
> 
> 标签：database, datagridview, filter, dataview

我有一个 VB.NET 2010 应用程序，它将数据从 SQL Server 加载到一个`datagridview`通过`adapter.fill()`. 当我更新数据库时它工作正常，但我的问题是当我使用数据视图根据组合框选择过滤数据时，该方法`adapter.update(table)`不起作用！

是否可以在应用过滤器的情况下进行操作？

```
Private Sub cmbDepartment_SelectedIndexChanged(...) 
        Handles cmbDepartment.SelectedIndexChanged 
    Dim filter As String 
    Try 
        lblDepartmentId.Text =   ds.Tables("department").Rows(cmbDepartment.SelectedIndex)(0) 
        filter = "dprtId = " & lblDepartmentId.Text 
        dvSection = New DataView(ds.Tables("section"), filter, "", DataViewRowState.CurrentRows) 
        table = dvSection.ToTable 
        dgvSections.DataSource = table 
    Catch ex As Exception 
        MsgBox(Err.Description) 
    End Try 
 End Sub

Private Sub btnSaveDepartment_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 
        Handles btnSaveDepartment.Click 
    Dim cbDep As SqlCommandBuilder 
    Dim numRows As Integer 
    Try cbDep = New SqlCommandBuilder(daDep) 
        Me.Validate() numRows = daDep.Update(ds.Tables("section")) 
        MsgBox(numRows & " Rows affected.") 
    Catch ex As Exception 
        MsgBox(Err.Description) 
    End Try 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:50:47.360

您当前进行过滤的方式是创建一个新的 DataTable 并将其绑定到您的 DataGridView 数据源。这会破坏原始 DataSet 和该表之间的关联，因此当您调用 Update 时，您的更改不会恢复。

尝试更改为类似下面的代码（我省略了 try catch 块，它们不会改变解决您问题的想法）。

当您第一次将数据源设置为网格时，请将其设置为表单级别的私有 dvSection 字段：

```
Public Class Form1

    ' Here we declare some class level variables. 
    'These are visible to all members of the class

    Dim dvSection As DataView
    Dim tableAdapter As New DataSet1TableAdapters.CustomersTableAdapter()
    Dim ds As New DataSet1()

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

       ' We fill our dataset - in this case using a table adapter
        tableAdapter.Fill(ds.Customers)
        dvSection = ds.Customers.DefaultView

        DataGridView1.DataSource = dvSection

    End Sub

    ' Here is the code to filter.
    ' Note how I refer to the class level variable dvSection
    Private Sub ComboBox1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged

        Dim filter As String 

        lblDepartmentId.Text =   ds.Tables("department").Rows(cmbDepartment.SelectedIndex)(0) 

        filter = "dprtId = " & lblDepartmentId.Text 
        dvSection.RowFilter = filter 

        dvSection.RowFilter = filter

    End Sub

    ' And here is the update code referring to the class level table adapter
    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        tableAdapter.Update(ds.Customers)
    End Sub
End Class 
```

* * *

另一种可能使事情变得更容易的方法是引入绑定源并在其上设置过滤器。但是，两者都应该可以正常工作。

# java - 将年份添加到 Date 类中的随机日期

> ID：11642701
> 
> 赞同：19
> 
> 时间：2012-07-25T04:25:06.893
> 
> 标签：java

假设我有这个：

```
 PrintStream out = System.out;
 Scanner in = new Scanner(System.in);
 out.print("Enter a number ... ");
 int n = in.nextInt(); 
```

我有一个随机日期，例如 05/06/2015（它不是固定日期，每次都是随机的）。如果我想取这个日期的“年”，并将“n”添加到今年，我该怎么做？

Date 类中的所有方法都不是“int”。

并且要从 int 中添加年份，“years”也必须是 int。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-25T04:27:34.760

您需要将 转换`Date`为`Calendar`.

```
Calendar c = Calendar.getInstance();
c.setTime(randomDate);
c.add(Calendar.YEAR, n);
newDate = c.getTime(); 
```

您可以将年份（或其他字段）作为日历操作，然后将其转换回日期。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-11-09T18:09:04.610

这个问题早就应该得到一个现代的答案。[在 Java 8 中将 10 年添加到当前日期](https://stackoverflow.com/questions/47206400/add-10-years-to-current-date-in-java-8)之后更是如此，被认为是这个问题的重复。

其他答案是 2012 年的好答案。岁月流逝，今天我相信没有人应该使用现在已经过时的课程`Calendar`，`Date`更不用说`SimpleDateFormat`. 现代 Java 日期和时间 API 使用起来要好得多。

使用该[重复问题](https://stackoverflow.com/questions/47206400/add-10-years-to-current-date-in-java-8)中的示例，首先我们需要

```
private static final DateTimeFormatter formatter 
        = DateTimeFormatter.ofPattern("uuuu-MM-dd HH:mm:ss"); 
```

有了这个我们可以做到：

```
 String currentDateString = "2017-09-12 00:00:00";
    LocalDateTime dateTime = LocalDateTime.parse(currentDateString, formatter);
    dateTime = dateTime.plusYears(10);
    String tenYearsAfterString = dateTime.format(formatter);
    System.out.println(tenYearsAfterString); 
```

这打印：

```
2027-09-12 00:00:00 
```

如果您不需要一天中的时间，我建议您`LocalDate`上课，而不是`LocalDateTime`因为它完全是一个没有一天中的时间的日期。

```
 LocalDate date = dateTime.toLocalDate();
    date = date.plusYears(10); 
```

结果是日期`2027-09-12`。

**问题：我在哪里可以学习使用现代 API？**

您可以从[Oracle 教程](https://docs.oracle.com/javase/tutorial/datetime/)开始。网上资料很多，去搜吧。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-10-10T15:45:17.087

用于执行此操作的另一个包存在于`org.apache.commons.lang3.time`,中`DateUtils`。

```
Date date = new Date();
date = DateUtils.addYears(date, int quantity = 1); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-25T04:32:33.143

该`Date`课程不会帮助您，但该`Calendar`课程可以：

```
Calendar cal = Calendar.getInstance();
Date f;
...
cal.setTime(f);
cal.add(Calendar.YEAR, n); // Where n is int
f = cal.getTime(); 
```

请注意，您仍然必须为`f`变量赋值。我经常使用`SimpleDateFormat`将字符串转换为日期。

希望这对您有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T04:27:55.050

试试`java.util.Calendar`类型。

```
Calendar cal=Calendar.getInstance();
cal.setTime(yourDate.getTime());
cal.set(Calendar.YEAR,n); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-16T07:29:22.043

这将使当前日期增加 3 年并打印年份。

```
 System.out.println(LocalDate.now().plusYears(3).getYear()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-27T05:56:04.977

像这样尝试一个月和一年（2019 年 6 月）

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.YEAR, n); //here n is no.of year you want to increase
SimpleDateFormat format1 = new SimpleDateFormat("MMM YYYY");
System.out.println(cal.getTime());

String formatted = format1.format(cal.getTime());
System.out.println(formatted); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-06T09:23:57.603

如果您需要在任何日期添加一年，请使用对象日历。

```
Calendar dateMoreOneYear = Calendar.getInstance();
dateMoreOneYear.setTime(dateOriginal);
dateMoreOneYear.add(Calendar.DAY_OF_MONTH, 365); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-07-25T04:35:51.973

尝试这个....

```
String s = new SimpleDateFormat("YYYY").format(new Date(random_date_in_long)); // 
int i = Integer.parseInt(s)+n; 
```

# android - 如何在字符串中开始新行？

> ID：11642715
> 
> 赞同：-5
> 
> 时间：2012-07-25T04:27:26.517
> 
> 标签：android, string, android-edittext, settext

> **可能重复：**
> [如何在 EditText 中创建多行字符串？](https://stackoverflow.com/questions/11642550/how-do-i-create-a-multiline-string-in-edittext)

我想在多行 EditText 中显示一个字符串。目前，字符串显示为....

```
Receive: 0 coin(s) Total
             Cost: $100 
```

我希望它显示为...

```
Receive: 0 coin(s) 
Total Cost: $10 
```

这是我的代码，我尝试使用“\n”，但无济于事......

```
result.setText("Receive:"+ " "+ df.format(rawounces)+"coin(s)" + "\n" 
     + "Total Cost:$" + df.format(transactionandpremium*rawounces)); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:29:58.527

您可以使用 Html 属性根据需要将文本设置为 ::

```
<EditText
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   />

String str="Receive: 0 coin(s) <br> Total Cost: $10";
editText.setText(Html.formHtml(str)); 
```

# grid - 如何在 LightSwitch（C#）的可编辑网格中识别更改的行

> ID：11642719
> 
> 赞同：1
> 
> 时间：2012-07-25T04:27:46.973
> 
> 标签：grid, visual-studio-lightswitch

我有一个可编辑的发票网格和一些复选框列，如发票，发送给客户/确定发票。我有这些布尔字段更新/更新的字段。

如果复选框值已更改，我想更新这两列。我不确定我该怎么做。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:56:24.470

在页面的屏幕设计器中，从表示复选框的查询（左侧）中选择属性。然后单击“编写代码”链接旁边的下拉菜单并实现 xxx_Changed 的​​方法。

然后，您可以在此处根据此输入设置其他字段的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:08:36.333

我这样做的方法是为 DataGrid的*SelectedItem属性实现**INotifyPropertyChanged*接口。非常适合“*如果复选框值已更改，我想更新这两列*”。

 **如果您需要代码，请告诉我。**

# jquery - 在重置表单的 ajax 发布后初始化 jscolor

> ID：11642723
> 
> 赞同：3
> 
> 时间：2012-07-25T04:28:00.300
> 
> 标签：jquery, ajax, jscolor

在将表单元素重置为默认值的 ajax 帖子之后如何运行[jscolor ？](http://www.jscolor.com/)

当您单击“恢复默认值”按钮时，下面的 ajax 成功发布到页面内 iframe 并恢复页面表单值到默认值。问题在于附加了 jscolor 的输入不会将其背景颜色更改回默认值。

我所做的研究使我相信我需要使用 jscolor.init(); 重新启动 jscolor；在 ajax 发布之后，但我无法让它工作。我还尝试在 ajax 帖子之外构建一个函数（重置表单值，然后重置 jscolor.init();）并使用 onclick 将其绑定到“恢复默认值”按钮，但这不起作用。

**在 ajax 发布后如何让 jscolor 再次运行？**

Javascript：

```
<script type="text/javascript">
$(document).ready(function() {
    $('#restore_form').click(function() {
        $.ajax({
            data: $('#build_form').serialize(),
            type: $('#build_form').attr('method'),
            url: $('#build_form').attr('action')+'?type=restore',
            success: function(response) {
                $('#preview').contents().find('html').html(response);
                $('#build_form')[0].reset();
                jscolor.init();
            }
        });
        return false;
    });
});
</script> 
```

HTML：

```
<iframe id="preview" src="preview.php" width="100%" height="120"></iframe>

<form id="build_form" class="build_form" action="preview.php" method="post">
    <input type="text" name="background_color" value="#0CA0E2" class="color {adjust:false,hash:true}" />
    <input id="restore_form" name="restore" type="submit" value="Restore Default" class="button" />
    <input id="save_form" name="submit" type="submit" value="Save Changes" class="button" />
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T04:33:13.843

尝试重置颜色。看到你的标记，我认为你的默认颜色是 0CA0E2。我说得对吗？如果是这样，您只需要（如果您使用 jscolor 构造函数并将新对象分配给 myJsColorVar var）：

```
myJsColorVar.color.fromString("0CA0E2"); // instead of jscolor.init() 
```

在文档中，它被用于：

```
document.getElementById("myColorInput").color.fromString("0CA0E2"); 
```

我认为最后一个示例更适合您，因为我看到您没有在 JS 中创建 jscolor，而是应用了“颜色类”。

您只需要为颜色输入配置一个 id：

```
<form id="build_form" class="build_form" action="preview.php" method="post">
    <input id="myColorInput" type="text" name="background_color" value="#0CA0E2" class="color {adjust:false,hash:true}" />
    <input id="restore_form" name="restore" type="submit" value="Restore Default" class="button" />
    <input id="save_form" name="submit" type="submit" value="Save Changes" class="button" />
</form> 
```

看看这里：http: [//jscolor.com/try.php#setting-color](http://jscolor.com/try.php#setting-color)

**编辑：**我创建了一个自定义 jscolor。

```
<html>
    <head>
        <title>jscolor demo</title>
    </head>
    <body>
        <script type="text/javascript" src="jscolor.js"></script>
        <script type="text/javascript">

            function CustomJSColor( applyIn, defaultColor, opts ) {

                this.jscolor = new jscolor.color( document.getElementById( applyIn ), opts );
                this.defaultColor = defaultColor;
                this.jscolor.fromString( this.defaultColor );

                this.reset = function() {
                    this.jscolor.fromString( this.defaultColor );
                };

            }

        </script>
    <body>
        <input id="myField">
        <script>

            // the input with id "myField" will be the color picker
            // 0099cc is the default color
            // {} is the other options
            var myPicker = new CustomJSColor( "myField", "0099cc", {} );

            // to reset the color you just need to call reset
            myPicker.reset();

        </script>
    </body>
</html> 
```

我试图从 jscolor.color 继承，但它似乎不是构造函数，所以我创建了那个类，里面有一个 jscolor。要重置组件的颜色，只需调用 reset 方法。请注意，因为仅使用“颜色”类不会创建 CustomJSColor。您需要以编程方式创建它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T02:24:27.427

我知道这是一篇旧帖子，但我遇到了同样的问题并找到了一个更简单的解决方案，假设表单元素是带有“颜色”类的 jscolor 输入

```
$('.color').each(function() {
    $(this).focus();
});
$('#someotherinput').focus(); 
```

获得焦点会触发 jscolor mojo 并适当地设置单元格背景和文本颜色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-01T10:38:52.663

我发现这是一个很好的解决方案。设置值（JavaScript）后，我调用此函数：

```
document.getElementById('<your_id>').jscolor.importColor(); 
```

然后显示新颜色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-11T08:49:44.873

通过传递输入类值触发 installByClassName

```
jscolor.installByClassName('jscolor'); 
```

# c# - 在 Windows 窗体 C# 中更新列表 > 更新已经输入的列表 条目

> ID：11642724
> 
> 赞同：2
> 
> 时间：2012-07-25T04:28:00.853
> 
> 标签：c#, winforms, list

我有一个名为粒子的对象，它有自己的属性（位置、速度等），在我的窗口窗体中，我创建了一个粒子列表。然后在代码中更新这个粒子列表（即在每个迭代步骤中更新每个粒子的位置、速度等）。

我想要做的是在每次迭代（单击按钮后）将其添加`List<Particle>`到另一个列表中`List<List<Particle>>`，这样我现在就有了可以比较的单独的粒子列表。

这就是我的代码的样子（UpdateEngine 是一个类，它在其初始化方法中创建一个粒子列表，然后具有更新其列表中粒子值的其他方法）：

```
public partial class frmMain : Form
{
    private List<List<Particle>> listPlist;

    private UpdateEngine Engine;

    ...

    public frmMain()
    {
        InitializeComponent();

        listPlist = new List<List<Particle>>();

        Engine = new UpdateEngine();
    }

    ...

    //pressing this button iterates through a specified number of iterations
    private void btPrep_Click(object sender, EventArgs e)
    {            
        //create the particles and add the first list to the list of lists
        Engine.Initialize();
        listPlist.Add(Engine.ParticleList);

        //iterate through the list of particles in Engine and update their properties
        for(i = 0; i <= iterations; i++)
        {
            Engine.Update();
            listPlist.Add(Engine.ParticleList);
        }
    }
} 
```

我看到发生的是第一个列表是在迭代之前添加的。在 for 循环中添加的第一个列表添加得很好。此后添加的每个列表都会将 listPlist 中的所有列表更改为与当前列表相同。

我在运行代码时看到的示例：

初始化后：

*   listPlist(0) > Particle(0) > Position = 0,0

第一次迭代后：

*   listPlist(0) > Particle(0) > Position = 0,0
*   listPlist(1) > 粒子(0) > 位置 = 1,1

下一次迭代后：

*   listPlist(0) > 粒子(0) > 位置 = 2,2
*   listPlist(1) > 粒子(0) > 位置 = 2,2
*   listPlist(2) > 粒子(0) > 位置 = 2,2

我不确定如何解决这个问题。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:34:21.220

根据我从您的问题中了解到的情况，问题在于您正在尝试复制参考项目，这就是为什么您看到所有列表项目都在更改的原因。

您将需要对这些列表/粒子进行深度克隆，以便它们不依赖于引用。

您可能必须向粒子对象添加新的复制方法或构造函数才能实现此目的。

就像是

```
public class Particle
{
    public int SomeField;

    public Particle Copy()
    {
        return new Particle { SomeField = this.SomeField };
    }   

    public Particle(Particle copyFrom)
    {
        this.SomeField = copyFrom.SomeField;
    }
} 
```

然后，您可以创建原始列表的副本，例如

```
List<Particle> copyList = new List<Particle>(originalList.Select(c => c.Copy)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:48:34.207

答案真的取决于做什么`Engine.Update`。如果它更新`ParticleList`并使用新值填充它`Particle`，您可以在循环内部和外部进行以下更改（复制列表）：

```
listPlist.Add(new List<ParticleList>(Engine.ParticleList)); 
```

但是，如果它`Engine.Update`只是更新相同对象的内部值`Particle`，那么您需要通过复制列表以及`Particle`其他人所说的内部对象来进行深层复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T04:50:31.530

您遇到的是因为`List<>`对象仅指向底层`Particle`对象。如果同一个粒子在两个（或多个）不同的列表中并且它发生了变化，那么无论您是从一个列表还是其他列表访问粒子，您都指向已更改的对象。就像说“鲍勃·史密斯”在电话簿里，也住在房子里。假设您通过去 Bob 的家割断了他的腿，如果您随后给 Bob 打电话（不是以相同的方式访问他），他仍然会失去双腿！

就像@astander 所说，您可以在`Particle`类中创建一个方法来创建所谓的对象的深层克隆。该方法很可能会将原始对象的所有属性（和字段）复制到一个新对象中。但是你必须小心：如果 a`Particle`有一个类型的字段`SubParticle`（或任何其他对象），当你进行深度克隆时，你可能也想对该对象进行深度克隆，否则你的两个`Particle`s（原始和副本) 都指向同一个`SubParticle`.

此外，在您的特定上下文中，我建议您在循环的每次迭代之后，创建一个新的粒子副本列表。如果您随后从列表中删除了一个粒子，它只会由`GarbageCollector`不再被引用的粒子来处理。

**编辑**：通过重新阅读您的代码，我得出以下结论：在您的 Engine.Update() 方法中，您可以从创建一个新的副本列表开始。这意味着您的粒子在每次 Engine.Update() 调用之后都不是同一个对象。为此，首先实现一个返回深层克隆的 Particle.Copy() 方法，然后通过执行以下操作启动 Engine.Update()：

```
ParticleList = new List<Particle>(ParticleList.Select(p=>p.Copy())); 
```

# eclipse - 适用于 Eclipse Juno 的 Vmware tcServer

> ID：11642727
> 
> 赞同：0
> 
> 时间：2012-07-25T04:29:11.800
> 
> 标签：eclipse, spring

从内部`Eclipse Java EE - Juno`，*“新服务器向导*`Vmware tcServer`”即使在安装`Spring STS plugin`和`Vmware tcServe`r 扩展之后也没有选项。与我的 Eclipse Indigo/Helios 不同，它有一个 tcServer 选项。

可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:37:40.257

在苹果 mac os PPC 10.5.8 上安装新的 eclipse juno。安装的 VMware 功能如下所述：http: [//docs.cloudfoundry.com/tools/STS/deploying-CF-Eclipse.html](http://docs.cloudfoundry.com/tools/STS/deploying-CF-Eclipse.html)尽管没有云代工厂服务器作为选项出现。

# ruby - 扩展数组隐藏初始化程序？

> ID：11642728
> 
> 赞同：1
> 
> 时间：2012-07-25T04:29:31.487
> 
> 标签：ruby

我正在使用红宝石 1.8.7

```
my_array = Array.new(5, "A") 
```

工作正常。但是，如果我像这样扩展 Array 类：

```
class Array
  def my_function
    self
  end
end 
```

然后初始化程序不再工作并返回

```
wrong number of arguments (2 for 0) 
```

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:31:47.040

你在里面做这个`Module`吗？如果是这样，您将定义一个单独的`Array`类，而不是`Array`从标准库扩展。

确保您的扩展程序位于顶层，否则编写：

```
class ::Array 
```

（顺便说一句，你想使用 Ruby 1.8.7 有充分的理由吗？如果没有，我建议你使用最新版本——Ruby 多年来一直在改进。）

# regex - 查找并替换正则表达式以重新格式化值

> ID：11642729
> 
> 赞同：0
> 
> 时间：2012-07-25T04:29:39.417
> 
> 标签：regex

我有一个`:value_subvalue`想要转换为的文本`:value[:subvalue]`。

我在 Coda 中有一个查找和替换字段，我可以在其中输入正则表达式来查找和替换。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:36:50.733

你还没有说什么语言，所以这是一个通用的答案：

*   搜索正则表达式：`(:[a-z]+)_([a-z]+)`
*   替代品： `\1[:\2]`

如果您在 java 中执行此操作，则组 refs 将是`$1`并且`$2`

# java - bonecp 连接池的快速可靠替代方案

> ID：11642730
> 
> 赞同：15
> 
> 时间：2012-07-25T04:29:56.620
> 
> 标签：java, jdbc, connection-pooling, bonecp

我在我的*Java*项目中使用*BoneCP 。*但是，不幸的是，我发现这个池在数据库故障后无法恢复。我不是唯一一个有这种问题的人（如果你想看看官方论坛）。由于我（和许多其他人）从未在 bonecp 论坛上得到答案，看来这个项目不再受支持，我的问题不太可能得到解决。

 *因此，我正在寻找一个替代的积极开发和支持的连接池库，它能够正确处理数据库中断并在数据库再次可用时立即恢复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T04:36:42.263

其他主要竞争者是

*   [C3P0](http://sourceforge.net/projects/c3p0/) - 也或多或少被遗弃，但非常有能力
*   [Proxool](http://proxool.sourceforge.net/) - 也被遗弃了
*   [DBCP](http://commons.apache.org/dbcp) - 放弃了很长时间，重新启动。
*   [HikariCP](https://github.com/brettwooldridge/HikariCP) - 连 BoneCP 作者都[承认](https://stackoverflow.com/a/1662916/311525)的新 CP[更快](http://brettwooldridge.github.io/HikariCP/)
*   [Vibur](http://www.vibur.org/) - 现代池，具有指标和慢查询日志记录
*   [Tomcat JDBC 池](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)- 包含在 tomcat 中，但可以独立使用

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-05T15:08:37.900

您可能想查看[https://github.com/brettwooldridge/HikariCP](https://github.com/brettwooldridge/HikariCP)。速度声称是惊人的，但它是新的和 YMMV。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T06:42:17.347

尝试与 Tomcat 7 捆绑的jdbc-pool [http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html 。](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-11T14:36:03.007

这是另一个可以尝试的连接池，它是完全并发的，可以正确处理数据库中断：http: [//www.vibur.org/](http://www.vibur.org/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-01T09:52:25.393

只是想指出，BoneCP 开发已经重新启动。*

# php - 从表中检索分层数据以在 ul li 标记中显示树结构

> ID：11642732
> 
> 赞同：0
> 
> 时间：2012-07-25T04:30:00.463
> 
> 标签：php, mysql, codeigniter

我有下表：

```
id      name                       lft     rgt     level
---     -------------------------  ----    ----    -----
1       company name                1       16      0
2       HR                          2       3       1
3       Superwiser                  4       9       1
4       Associates                  5       6       2
5       test                        10      13      1
6       test2                       11      12      2 
```

使用这个数据库，我想在 ul li 标签中显示树结构。但没有得到这张桌子。我想这样显示：

```
1\. Company Name
|--:Hr  
|--:Superwiser  
   |--:Associates  
|--:test  
   |--:test2 
```

如何为此触发特定查询以及如何在 ul li 标签中显示它。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:20:00.563

如果不存在则创建表`category`（ `cat_id`int(11) NOT NULL AUTO_INCREMENT, `name`varchar(255) COLLATE utf8_bin DEFAULT NULL, `image`varchar(255) COLLATE utf8_bin DEFAULT NULL, `parent_id`int(11) NOT NULL DEFAULT '0', `top`tinyint(1) NOT NULL, `column`int(3) NOT NULL, `sort_order`int(3) NOT NULL DEFAULT '0', `status`tinyint(1) NOT NULL, `total_product`int(11) NOT NULL, `date_added`int(11) NOT NULL, `date_modified`int(11) NOT NULL, 主键 ( `cat_id`) ) 引擎=MyISAM 默认字符集=utf8 排序=utf8_bin AUTO_INCREMENT=17 ；

这是我的数据库表，我将用这个表创建树这是我的函数

```
function getTree(){
$config['ul_class']='tree';
$config['table']='category';
$this->load->library('category',$config);
echo $this->category->getTree();
} 
```

和图书馆是一样的

```
<?php 
```

类类别{

```
var $table='';
    var $CI ='';
    var $ul_class='';

    function Category($config=array()){
        $this->table=$config['table'];
        $this->CI=& get_instance();
        $this->CI->load->database();
        $this->ul_class=$config['ul_class'];
    }
    function getTree($parent_id=0){

       $this->CI->db->where('parent_id',$parent_id);
       $first_level=$this->CI->db->get('category')->result();
       $tree= '<ul class="'.$this->ul_class.'">';
       foreach($first_level as $fl){
           $tree.='<li>'.$fl->name;
            $this->CI->db->where('parent_id',$fl->cat_id);

           $count=$this->CI->db->count_all_results($this->table);

           if($count!=0){
               $tree.=$this->getTree($fl->cat_id);
           }
           $tree.= '</li>';
       }
       $tree.= '</ul>';

       return $tree;
    } 
```

} ?>

您必须将此类文件保存在应用程序文件夹中的库文件夹中，文件名类别为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:16:02.327

```
<?php 
```

类类别{

```
var $table='';
    var $CI ='';
    var $ul_class='';

    function Category($config=array()){
        $this->table=$config['table'];
        $this->CI=& get_instance();
        $this->CI->load->database();
        $this->ul_class=$config['ul_class'];
    }
    function getTree($parent_id=0){

       $this->CI->db->where('parent_id',$parent_id);
       $first_level=$this->CI->db->get('category')->result();
       $tree= '<ul class="'.$this->ul_class.'">';
       foreach($first_level as $fl){
           $tree.='<li>'.$fl->name;
            $this->CI->db->where('parent_id',$fl->cat_id);

           $count=$this->CI->db->count_all_results($this->table);

           if($count!=0){
               $tree.=$this->getTree($fl->cat_id);
           }
           $tree.= '</li>';
       }
       $tree.= '</ul>';

       return $tree;
    } 
```

} ?>

使用这个库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:48:23.790

递归数据库调用是魔鬼的标志，所以我通常处理这个的方式是使用 PHP 它自己。

IE

```
function buildTree($ParentID, $Categories, $Output = '')
{
    foreach($Categories as $Category)
    {
        // Skip any categories that are not
        // in the current parent.
        if($Category->ParentID != $ParentID)
            continue;
        // Add the current category to the output
        $Output .= '<li>' . $Category->name . '</li>';
        // If the category has children, recurse another level.
        if($Category->ChildCount > 0)
        {
            $Output .= '<ul>';
            $Output .= $this->buildTree($Category->ID, $Categories, $Output);
            $Output .= '</ul>';
        }
    }
    return $Output;
} 
```

然后你可以简单地称之为：

```
<ul><?= buildTree(0, $Categories); ?></ul> 
```

该代码依赖于您执行一个子查询，该查询返回属于该父行的子行的计数。

IE

```
select *, (select count(C2.*) from Category C2 where C2.ParentID = C1.ID) as ChildCount from Category as C1 
```

然后，这允许您仅在父节点实际上有子节点时继续递归，并防止`UL`在不存在子节点时将空的添加到输出中。

# objective-c - “.text”和“setText：”之间的区别？

> ID：11642735
> 
> 赞同：3
> 
> 时间：2012-07-25T04:30:16.810
> 
> 标签：objective-c, nsstring, label, uilabel

> **可能重复：**
> [使用点或括号语法设置属性有区别吗？](https://stackoverflow.com/questions/2207810/is-there-a-difference-between-setting-a-property-with-the-dot-or-the-bracket-syn)

`label.text = @"..."`如果我在 .h 文件中定义了一个标签，并且我想在 .m 文件中更改它的文本，那么使用和之间真的有区别`[label setText:@"..."]`吗？他们似乎做着完全相同的事情，如果是这样，那为什么会有不同的方式来做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T04:32:53.920

内部运作没有区别。第一种方法要求类型为`label`编译器可以验证属性的存在；即使编译器不知道确切的类型（即类型为 an 时`id`），第二种方法也有效。

第二种语法是原始语法；为了方便和可读性，添加了第一个语法。关于使用这些语法的主题有不同的思想流派：有些人会告诉你不要使用一种语法或另一种语法，并提供非常有效的理由。不过，最后，这是您的选择：您应该选择一种语法，并坚持下去。只要您始终如一并且您的读者知道您的偏好，他们就应该毫无困难地阅读和维护您的代码。

# javascript - 复制元素的最佳方式是什么：仅复制其类型和属性？

> ID：11642736
> 
> 赞同：3
> 
> 时间：2012-07-25T04:30:20.027
> 
> 标签：javascript, jquery, html

我有 DOM 元素，我想制作一个不包含任何原始内容的副本。

从：`<div class='cl' id='i'>Some text<p><a href="#">anchor</a>paragraph</p></div>`

生产：`<div class='cl' id='i'></div>`

但是以一种有效的方式使用 javascript（或者 jQuery，如果它更优雅的话）

最有效的解决方案是否需要`for`循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T04:32:49.660

如果没有 jQuery，请使用[cloneNode](https://developer.mozilla.org/en/DOM/Node.cloneNode)。

```
var newNode=oldNode.cloneNode(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T04:32:39.363

使用[`.clone()`](http://api.jquery.com/clone/)然后将元素的设置`html`为空。

```
​$("#i").clone().html('')​​​​​​ 
```

# android - 集中式数据访问设计逻辑

> ID：11642738
> 
> 赞同：1
> 
> 时间：2012-07-25T04:30:29.180
> 
> 标签：android, service

我无法掌握为不同资源实施集中数据访问的正确方法。

我想要一个类，调用它将`DataAccess.class`从 a`SQLiteDatabaseHelper.class`和 a调用，这`ServerAccess.class`取决于我调用它的方法时什么是合适的。

我认为`DataAccess.class`从服务扩展是最好的方法，因此我可以将 ASyncTask 用于`ServerAccess.class`. 现在我有疑问了。我的`DataAccess.class`应用程序中的大多数活动都需要可以访问，并且我希望它在应用程序访问时停止。

根据谷歌开发人员资源，听起来服务很好地用于后台的持续操作，但鉴于我试图合并的范围，我不确定如何处理生命周期。当我使用这些方法时`startService()`，我可以在内部进行服务调用吗？每次访问服务时调用它是否有意义，还是应该只在应用程序启动和停止时发生一次？`stopService()``DataAccess.class`

谢谢您的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:53:31.227

我会推荐

1）使用所有基于 AsyncTask 的解决方案，因为服务 - 活动通信是有限的。（当然，除非您需要在后台运行某些东西）但我很想听到对此的反驳，为什么要使用服务。

2) 不要只使用一个像DataAccess 这样的Facade，而是让它特定于你的应用程序功能（即有点像Android 中的系统服务）。

3) 你应该像 Android 一样使用工厂来获取你需要的 DataAccess 对象。这解决了您获取 DataAccess 对象的第二部分。遵循与获取和 Android 系统服务相同的模型。

4) 在 Android 文档中指示和管理的地方使用内容提供者。

更新：我认为这些是一种好的解决方案的公理。不是全部。当我们深入考虑这一点时，我会更新。

# jquery - 防止在双击期间行变为可编辑 - jqGrid

> ID：11642741
> 
> 赞同：1
> 
> 时间：2012-07-25T04:30:34.970
> 
> 标签：jquery, datagrid, jqgrid

我们的是一个 Struts2-jQuery Grid 实现，它类似于 jqGrid。我们已将 Grid 设为

```
multiselect="true" and editinline="true" 
```

我们在每一行的数据中添加了“自定义编辑”按钮，并希望该行只能通过该按钮进行编辑。我们删除了“编辑”的导航栏/工具栏图标。

目前，即使双击该行，数据行也可以编辑。我们能够捕获事件，但如何取消该动作？我们尝试返回错误，停止..但他们没有工作。我们甚至尝试了 stop.propogation，但该行仍然可以编辑。

我们怎样才能阻止这一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:37:50.127

将此与其他参数一起添加到您的 jqgrid

 `````
ondblClickRow: function(){
  return false ;
}, 
````  `或者使用 jquery，您可以将双击事件（ondblClickRow）绑定到您的网格并从该函数返回 false。``

# javascript - 将 onsubmit 属性添加到表单并提交

> ID：11642754
> 
> 赞同：0
> 
> 时间：2012-07-25T04:31:49.520
> 
> 标签：javascript, jquery, forms

我在页面上有两个按钮：

```
<div class="bottons">
        <button class="wiz_button wizard_prev_step" type="button" style="margin-top: 27px;
            display: none"><span><span>Previous</span></span></button>
        <form id="orderForm" method="POST">
        <input type="hidden" name="Signed_Order_B64" value="">
        <input type="hidden" name="email" size="50" maxlength="50" value="">
        <input type="hidden" name="Language" value="rus">
        <input type="hidden" name="firstname" value="">
        <input type="hidden" name="surname" value="">
        <input type="hidden" name="appendix" value="">            
        <button class="wiz_button wizard_next_step disabled long" type="button" style="margin-top: 27px;">
            <span><span>Next</span></span></button>
        </form>
    </div> 
```

这个按钮来自我的自定义向导。另外，我有一个`Next`按钮的单击事件处理程序：

```
$('.wizard_next_step').click(function () {
// load next step and other stuff
}) 
```

当用户在最后一步找到帖子表单时，我想要：

```
if (currentStep === '3') {
// here I want set onsubmit function for the form  *
} 
```

我怎样才能做到这一点？
谢谢。

PS。该解决方案必须适用于 IE 7 及更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:36:28.473

做就是了：

```
$('#orderForm').submit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:37:03.607

您正在使用 jQuery。所以只需使用

```
if (currentStep === '3') {
// here I want set onsubmit function for the form and submit it *
  $('#orderForm').submit();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:37:27.663

由于按钮在表单中，并且在附加的侦听`this`器中将引用该按钮，因此您可以使用以下方法分配给 onsubmit 属性：

```
this.form.onsubmit = someFn; 
```

并使用以下方式提交表格：

```
this.form.submit(); 
```

# android - 如何在不使用 phonegap 的情况下在我的 android 应用程序中实现 QR 码阅读器？

> ID：11642756
> 
> 赞同：1
> 
> 时间：2012-07-25T04:32:08.960
> 
> 标签：android, qr-code, barcode-scanner

我想用我的 android 应用程序实现一个 QR 扫描仪，但我没有得到任何完美的解决方案，我想在不使用 ZXing 或 phonegap 的情况下拥有一个内置的扫描仪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T07:48:15.917

到目前为止，在 Android 上集成条码扫描的最简单方法是： [http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

它不涉及PhoneGap，甚至不涉及太多代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:01:00.983

您可以将 ZXing 用作内部库，而不需要用户拥有条码扫描仪安装程序。

其实你可以使用条形码扫描仪源代码： [http ://code.google.com/p/zxing/downloads/list](http://code.google.com/p/zxing/downloads/list)

# mysql - Magento - 导入备份时重复条目

> ID：11642772
> 
> 赞同：0
> 
> 时间：2012-07-25T04:33:46.950
> 
> 标签：mysql, sql, magento, import, backup

我对商店的 sql 备份有一些严重的问题，我只有 sql 备份的形式。每次我想用 phpmyadmin 导入备份时（即使在新数据库上），我都会收到此错误：

> 插入`catalog_category_entity_datetime`值 (1,3,52,0,3,NULL),(2,3,53,0,3,NULL),(9,3,52,0,7,NULL),(10,3,53, 0,7,NULL),(11,3,52,0,8,NULL),(12,3,53,0,8,NULL),(13,3,52,0,9,NULL),( 14,3,53,0,9,NULL),(15,3,52,0,10,NULL),(16,3,53,0,10,NULL),(25,3,52,0, 15,NULL),(26,3,53,0,15,NULL),(33,3,52,0,19,NULL),(34,3,53,0,19,NULL),(35, 3,52,0,20,NULL),(36,3,53,0,20,NULL),(37,3,52,0,21,NULL),(38,3,53,0,21, NULL),(203,3,52,0,104,NULL),(204,3,53,0,104,NULL),(207,3,52,0,106,NULL),(208,3,53,0,106,NULL) ,(209,3,52,0,107,NULL),(210,3,53,0,107,NULL),(211,3,52,0,108,NULL),(212,3,53,0,108,NULL),( 213,3,52,0,109,NULL),(214,3,53,0,109,NULL),(215,3,52,0,110,NULL),(216,3,53,0,110,NULL),(217, 3,52,0,111,NULL),(218,3,53,0,111,NULL),(219,3,52,0,112,NULL),(220,3,53,0,112,NULL),(221,3, 52,0,113,NULL),(222,3,53,0,113,NULL),(223,3,52,0,114,NULL),(224,3,53,0,114,NULL),(225,3,52, 0,115,NULL),(226,3,53,0,115,NULL),(227,3,52,0,116,NULL),(228,3,53,0,116,NULL),(229,3,52,0,117,NULL),(230,3,53,0,117,NULL),(231,3,52,0,118,N[ ...]
> 
> MySQL 回应：
> 
> #1062 - 密钥“B3A14FF699AA1FA4D4DDA0B048582A7A”的重复条目“3-249-52-0”

我需要从该文件中获得数千种产品和近一百个类别！我尝试禁用外键检查，但似乎没有任何效果。我也只是将带有前缀“category_”和“eav_”的表放在一个单独的 sql 文件中，但那里相同......（我也找不到“3-249-52-0”或在 sql 文件中键入）

有人知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:40:15.747

我知道这是一个旧线程，但是通过在文本编辑器中查看原始 sql 文件，我取得了一些成功。

在这里，我发现我的一些行确实重复了，我可以手动删除重复项。对我来说幸运的是，那里只有五六个重复的行。

这可能是开始调试的好地方。

# html - 内容更改时，Webkit 滚动容器不再遵守底部边距

> ID：11642775
> 
> 赞同：2
> 
> 时间：2012-07-25T04:33:55.123
> 
> 标签：html, css, webkit

我在 Chrome（但不是 Firefox）中看到一个带有即时消息样式视图的 Web 应用程序的奇怪错误。输入框绝对位于页面底部并具有高度`X`，而消息的滚动窗格绝对定位为`bottom: X`使得窗格底部与输入框对齐。

消息窗格内有许多消息。这些中的每一个都有一个绝对定位的孩子。当这些内部子项之一的内容发生更改时（例如，使用 jQuery's `.html()`），底部消息的底部边距将被忽略。

[这是一个最小的 jsfiddle 示例](http://jsfiddle.net/ZPqUQ/3/)。它会为您将消息窗格滚动到底部。`#a`单击该按钮，您将看到在确定如何调整消息窗格 ( )的大小时不再考虑底部消息框的边距。

我的解决方法是删除绝对定位的孩子。在 jsfiddle 中，您可以将 更改`position: absolute`为`float: left`on`#inner`并查看该错误不再出现。不过，我很好奇为什么会出现这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:06:49.627

The issue has been fixed in the latest version, please use.

# java - query.Fileupload-ui 错误异常抛出但未被捕获

> ID：11642789
> 
> 赞同：0
> 
> 时间：2012-07-25T04:35:01.503
> 
> 标签：java, internet-explorer, file-upload

这是我面临的同一个问题[参考](https://stackoverflow.com/questions/5081119/jquery-file-upload-error-when-submitting-to-ashx)

它在 chrome、firefox 中运行良好，但在 IE 中却不行……错误是“IE（'异常抛出但未捕获'。第 95 行，字符 25'）”

从参考资料中我知道错误在对象 writer.write

java代码：（它是否格式错误）：任何人都可以调试这个错误

`writer.write("{\"name\":\"" + item.getName() + "\",\"type\":\"" + item.getContentType() + "\",\"size\":\"" + item.getSize() + "\",\"filepath\":\"" + tp2 + "\"}");`

js：

```
 $(function () {
        var initFileUpload = function (suffix) {

            $('#file_upload').fileUploadUI({
                namespace: 'file_upload_' + suffix,
                fileInputFilter: '#file_' + suffix,
                dropZone: $('#drop_zone_' + suffix),
                uploadTable: $('#files_' + suffix),
                downloadTable: $('.display-frame'),
                buildUploadRow: function (files, index) {
                    return $('<tr><td>' + files[index].name

                    + '<td class="file_upload_cancel">' + '<button class="ui-state-default ui-corner-all" title="Cancel">' + '<span class="ui-icon ui-icon-cancel">Cancel<\/span>' + '<\/button><\/td><\/tr>');
                },
                buildDownloadRow: function (file) {
                    //  return $('<tr><td>' + file.name +   file.filepath +'<\/td><\/tr>');     
                    var path = '<div class="picthumb" id="pic" url="' + file.filepath + '" onclick="clickpick(this)"><div class="mainpic"><img src="';
                    path += file.filepath + '" class="uploader-thumb-img" style="width: 108px; height: 120px; top: 0px; left: 0px; "/></div></div>';
                    return $(path);
                }
            });
        };
        initFileUpload(1);

    }); 
```

IE 显示的错误是 callback()

```
 if (typeof callBack === func) {
       try {
                            callBack();
           } catch (e) {
                            // Fix endless exception loop:
                            $(this).stop();
                            throw e;
                       }
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:23:54.210

问题出在 writer 对象，出于某种原因 item.getname 是 chrome 中的 filename.jpg 和 IE 中的 c:/images/filename.jpg 所以我删除了不需要的 item.getname

```
writer.write("{\",\"type\":\"" + item.getContentType() + "\",\"size\":\"" + item.getSize() + "\",\"filepath\":\"" + tp2 + "\"}"); 
```

# asp.net - 在asp.net中动态创建表并插入数据

> ID：11642791
> 
> 赞同：0
> 
> 时间：2012-07-25T04:35:06.337
> 
> 标签：asp.net, sql-server, vb.net

动态创建表并将数据插入创建的表中，我正在使用以下命令动态创建表并插入值。我分别评论了变量的样本值。

```
Dim question, opt1, opt2, opt3, opt4, ans, paper As String
          question = Request.QueryString("question") '<p>This is my first question</p>
          opt1 = Request.QueryString("option1") ' option 1
          opt2 = Request.QueryString("option2") ' option 2
          opt3 = Request.QueryString("option3") ' option 3
          opt4 = Request.QueryString("option4") ' option 4
          ans = Request.QueryString("answer")    ' 2
          paper = Request.QueryString("paper")  ' cs-5-cder-2012
          'Response.Write("....")
          Dim cs As String = ConfigurationManager.ConnectionStrings("eExamSolutionConnection").ConnectionString
          Dim cn As New SqlConnection(cs)
      Dim cmd As New SqlCommand

      Dim cmdText As String
      cmdText = "IF EXISTS (SELECT * FROM   INFORMATION_SCHEMA.TABLES  WHERE  TABLE_SCHEMA = 'RAVI' AND TABLE_NAME = '" & paper & "') "
      cmdText = cmdText & " BEGIN"
      cmdText = cmdText & " INSERT INTO " & paper & "(question,option1,option2,option3,option4,answer) VALUES('" & question & "','" & opt1 & "','" & opt2 & "','" & opt3 & "','" & opt4 & "','" & ans & "');"
      cmdText = cmdText & " END"
      cmdText = cmdText & " ELSE"
      cmdText = cmdText & " BEGIN"
      cmdText = cmdText & " CREATE TABLE " & paper & "(question_Id int AUTO_INCREMENT,question varchar(MAX),option1 varchar(255),option2 varchar(255),option3 varchar(255),option4 varchar(255),answer varchar(2));"
      cmdText = cmdText & " INSERT INTO " & paper & "(question,option1,option2,option3,option4,answer) VALUES('" & question & "','" & opt1 & "','" & opt2 & "','" & opt3 & "','" & opt4 & "','" & ans & "');"
      cmdText = cmdText & " END"
      Try
          cmd.CommandText = cmdText.ToString
          cmd.Connection = cn
          cmd.Connection.Open()
          cmd.ExecuteNonQuery()
          cmd.Connection.Close()
          cmd.Dispose()
          cn.Dispose()
          Response.Write("Question Added !!")
      Catch ex As Exception
          Response.Write(ex.ToString)
      End Try 
```

但是，我得到了例外

> System.Data.SqlClient.SqlException：“-”附近的语法不正确。'-' 附近的语法不正确。'-' 附近的语法不正确。
> 在 System.Data.SqlClient.SqlConnection.OnError(SqlException异常，Boolean breakConnection) 在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException
> 异常，Boolean breakConnection)
> 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
> 在 System .Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler，TdsParserStateObject stateObj）
> 在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds（字符串方法名，布尔异步）
> 在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
> at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
> at ASP.admin_addquestion_aspx._ *Render* _control1(HtmlTextWriter __w, Control parameterContainer) 在 D: \EWA\eExam\admin\addQuestion.aspx：第 40 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:18:42.797

请用

```
 Dim cmdText As String
    cmdText = "IF EXISTS (SELECT * FROM   INFORMATION_SCHEMA.TABLES  WHERE  TABLE_SCHEMA = 'RAVI' AND TABLE_NAME = '" & paper & "') "
    cmdText = cmdText & " BEGIN"
    cmdText = cmdText & " INSERT INTO [" & paper & "](question,option1,option2,option3,option4,answer) VALUES('" & question & "','" & opt1 & "','" & opt2 & "','" & opt3 & "','" & opt4 & "','" & ans & "');"
    cmdText = cmdText & " END"
    cmdText = cmdText & " ELSE"
    cmdText = cmdText & " BEGIN"
    cmdText = cmdText & " CREATE TABLE [" & paper & "](question_Id int IDENTITY(1,1),question varchar(MAX),option1 varchar(255),option2 varchar(255),option3 varchar(255),option4 varchar(255),answer varchar(2));"
    cmdText = cmdText & " INSERT INTO [" & paper & "](question,option1,option2,option3,option4,answer) VALUES('" & question & "','" & opt1 & "','" & opt2 & "','" & opt3 & "','" & opt4 & "','" & ans & "');"
    cmdText = cmdText & " END" 
```

代替

```
 Dim cmdText As String
  cmdText = "IF EXISTS (SELECT * FROM   INFORMATION_SCHEMA.TABLES  WHERE  TABLE_SCHEMA = 'RAVI' AND TABLE_NAME = '" & paper & "') "
  cmdText = cmdText & " BEGIN"
  cmdText = cmdText & " INSERT INTO " & paper & "(question,option1,option2,option3,option4,answer) VALUES('" & question & "','" & opt1 & "','" & opt2 & "','" & opt3 & "','" & opt4 & "','" & ans & "');"
  cmdText = cmdText & " END"
  cmdText = cmdText & " ELSE"
  cmdText = cmdText & " BEGIN"
  cmdText = cmdText & " CREATE TABLE " & paper & "(question_Id int AUTO_INCREMENT,question varchar(MAX),option1 varchar(255),option2 varchar(255),option3 varchar(255),option4 varchar(255),answer varchar(2));"
  cmdText = cmdText & " INSERT INTO " & paper & "(question,option1,option2,option3,option4,answer) VALUES('" & question & "','" & opt1 & "','" & opt2 & "','" & opt3 & "','" & opt4 & "','" & ans & "');"
  cmdText = cmdText & " END" 
```

问题是：

1 表名在创建和插入时应为 []。2 对于 autoincremnet，SQL 服务器中会有 IDENTITY(1,1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:41:19.540

您可以尝试在表名周围添加`[`and `]`，这样它就变成了；

```
"IF EXISTS (SELECT * FROM   INFORMATION_SCHEMA.TABLES  WHERE  TABLE_SCHEMA = 'RAVI' AND TABLE_NAME = ['" & paper & "']) " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:12:23.847

表名中不允许使用连字符“-”。您必须将其替换为下划线“_”或将其完全删除。

# javascript - icanhaz 没有找到模板

> ID：11642794
> 
> 赞同：1
> 
> 时间：2012-07-25T04:35:31.703
> 
> 标签：javascript, mustache, icanhaz.js

为了使这个示例尽可能简单，假设我在 home.html 中有以下代码：

```
<html>
    <head>
        <!-- ALL DEPENDENCIES FOR ICANHAZ ARE INCLUDED ABOVE -->

        <script type="text/html" id="foo" src="js_template.js"></script>
        <script>ich.foo({})</script>
    </head>
    <body></body>
</html> 
```

在 javascript_template.js 中，我有以下内容：

```
Hello world! 
```

事实证明，icanhaz 没有检测到 foo，所以 ich.foo({}) 抛出了一个错误。这里到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:49:24.407

ICanHaz.js 不会自动下载`src`. 这种行为可以在 ICH.js 源代码的第 510 行看到，其中它在定义模板之前检查脚本标记的 innerHTML 属性。

您必须内联定义它，或者使用您自己的 AJAX 请求。例如，嵌入式：

```
<script type="text/html" id="foo">
     Hello, world
</script> 
```

或者，如果您使用的是 jQuery，则可以使用 AJAX 加载脚本：

```
$(function(){
    $.get('js_template.js', function(res){
         ich.addTemplate('foo', res);
    });
}); 
```

请记住，`ich.foo()`在 AJAX 请求完成之前将不可用。

# lua - 是否可以通过 Lua 与您的计算机进行交互？

> ID：11642795
> 
> 赞同：0
> 
> 时间：2012-07-25T04:35:32.357
> 
> 标签：lua, interactive

我想知道是否可以通过 Lua 与您的计算机进行交互（通过 SciTE 或 Sublime Text，我想......）？例如，你`.mp3`能用 Lua 播放或打开文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:41:31.717

是的，通过使用操作系统库`os`。

您可以使用`os.execute([command])`从主机操作系统的 shell 运行任何命令（想想终端或命令提示符）。

[在Lua 在线参考手册](http://www.lua.org/manual/5.1/manual.html#5.8)中有更多关于使用这个库的信息。

# iphone - 使用tesseract扫描图像时是否可以获得x，y坐标？

> ID：11642798
> 
> 赞同：3
> 
> 时间：2012-07-25T04:36:07.647
> 
> 标签：iphone, objective-c, tesseract

我正在使用 tesseract 库扫描图像。我正在以 string 的形式从库中获取输出。是否真的可以与文本一起获得 x 和 y 位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:44:56.087

使用**hocr**命令行选项，如下所示：

```
tesseract eurotext.tif out hocr 
```

输出将是一个`out.html`文件，其中包含每个已识别单词的坐标。

# objective-c - 实时计算器

> ID：11642800
> 
> 赞同：1
> 
> 时间：2012-07-25T04:36:14.813
> 
> 标签：objective-c, ios

对于学校作业，我被告知要制作一个计算器应用程序，与聚光灯计算器相同。它是实时工作的，没有任何开始的按钮。

到目前为止，这是我的代码。它写在带有事件**Editing Did End**的文本字段中。我很确定那是错误的，但我找不到替代解决方案。此外，我还没有得到实时工作，所以当我按下文本字段时，我有点恢复到完成以下步骤。

```
- (IBAction)Didend_Action:(id)sender {
  NSString *list = [Sum_TextField text]; 
  NSArray *listItemsArray = [list componentsSeparatedByString:@" "];
  float firstNumber = [[listItemsArray objectAtIndex: 0] floatValue]; 
  NSString *symbol = [listItemsArray objectAtIndex: 1];
  float secondNumber = [[listItemsArray objectAtIndex: 2] floatValue];
  {   
    Calculator* calc = [[Calculator alloc] init];
    [calc setNum1:firstNumber];
    [calc setNum2:secondNumber];
    if ([symbol isEqualToString:@"-"])
    {
        [calc minus];
    }
    else if ([symbol isEqualToString:@"+"])
    {
        [calc add];
    } 
    if ([symbol isEqualToString:@"*"])
    {
        [calc multiply];
    }
    else if ([symbol isEqualToString:@"/"])
    {
        [calc divide];

    }
    [Answer_TextField setText:[NSString stringWithFormat:@"%d", [calc answer]]];  
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:00:55.123

我认为更好的方法是实现 UITextViewDelegate 协议方法，例如`textViewDidChange:`. 例如，您可以执行以下操作：

```
- (void)textViewDidChange:(UITextView *)textView {

    NSString *currentText = [textview text];
    NSArray *currentItems = [currentText componenetsSeparatedByString:@" "];
    float result = 0.0;

    //If a valid expression is in the text view
    if([currentItems count] > 2) {

        float num1 = [[currentItems objectAtIndex:0] floatValue];
        float num2 = [[currentItems objectAtIndex:2] floatValue];
        NSString *operator = [currentItems objectAtIndex:1];

        if([operator isEqualToString:@"+"]) {

            result = num1 + num2;
            answerTextField.text = [NSString stringWithFormat:@"%f", result];
        }
        else if([operator isEqualToString:@"-"]) {

            result = num1 - num2;
            answerTextField.text = [NSString stringWithFormat:@"%f", result];
        }
        else if([operator isEqualToString:@"*"]) {

            result = num1 * num2;
            answerTextField.text = [NSString stringWithFormat:@"%f", result];
        }
        else if([operator isEqualToString:@"/"]) {

            result = num1 / num2;
            answerTextField.text = [NSString stringWithFormat:@"%f", result];            
        }
        else{

            answerTextField.text = @"Invalid Operation";
        }
    }
} 
```

每次用户在文本视图中编辑文本时都会调用它。它应该可以工作，但我没有测试它。确保在此代码所在的任何文件的标题中，执行以下操作：

```
@interface yourClassName : yourSuperclass <UITextViewDelegate> {

    //Your instance variables
}

//Your method and property declarations 
```

**编辑：**

假设我将`- (void)textViewDidChange:(UITextView *)textView`代码放在一个名为 MyClass.m 的文件中。文件 MyClass.m 将如下所示：

```
@implementation MyClass

- (void)textViewDidChange:(UITextView *)textView {

    //All the above code goes here
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    //INCLUDE THESE LINES
    Sum_TextField.delegate = self;
    Answer_TextField.delegate = self;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

在头文件（MyClass.h）中，我会这样写：

```
@interface MyClass : UIViewController <UITextViewDelegate> 

//Note: you don't declare - (void)textViewDidChange:(UITextView *)textView in the header file because you are implementing
//a protocol method.

//MAKE SURE SUM_TEXTFIELD AND ANSWER_TEXTFIELD ARE UITEXTVIEWS NOT UITEXTFIELDS
@property (strong, nonatomic) IBOutlet UITextView *Sum_TextField;
@property (strong, nonatomic) IBOutlet UITextView *Answer_TextField;

@end 
```

希望这可以帮助！

# android-intent - 将意图链接到活动时遇到问题

> ID：11642801
> 
> 赞同：0
> 
> 时间：2012-07-25T04:36:15.147
> 
> 标签：android-intent, android-activity

好的，所以我已经在这段代码上工作了两天多，试图在我的代码中找到错误。我遇到的问题是有一个意图得到一个活动。我得到一个“ActivityNotFoundException”并且没有找到处理意图的活动。我知道问题在于我一直在使用的命名约定。我就是找不到。

当我单击第一个活动中的“是”按钮时，就会出现问题。

这里是java源文件、android清单文件和正java文件的过去

[http://pastie.org/pastes/4325906/text](http://pastie.org/pastes/4325906/text)

我正在关注 Wei-Meng Lee 的《开始 Android 应用程序开发》一书。

非常感谢您的帮助和支持。我相信回答我们的问题会很累。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:47:59.713

如果出现以下情况，您会收到此错误：

1.  您尚未在**清单**文件中**注册**您的活动。
***   **如果您已注册，则 **拼写错误的活动名称。******

 ****因此，如果您已注册，请检查活动名称并且**区分大小写**，因此您必须使用完全相同的名称进行注册。****

# python - 如何在 Python 脚本中创建动态字典，与另一个脚本共享其内容？

> ID：11642802
> 
> 赞同：-5
> 
> 时间：2012-07-25T04:36:17.600
> 
> 标签：python, python-2.6

我有一个Python字典如下

```
dictvvalue={'a':'1','b':'2','c':{'d':'5','e':'6'}} 
```

我的目的是保存这个 Python 字典以供另一个 Python 脚本使用。

我必须将此字典作为字典而不是字符串加载到其他脚本中。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:42:40.403

As Generic alluded to, you *must* encode it as a bytestring before you can persist it, and then decode it when reading in. The common ways to do this in Python are pickling (via `pickle`/`cPickle`), JSON (via `json`), or YAML (via PyYAML).

# java - 来自 InputStream 的扫描仪输入

> ID：11642808
> 
> 赞同：1
> 
> 时间：2012-07-25T04:36:57.370
> 
> 标签：java, console

我正在做测试驱动的开发，这需要我为一个接受用户输入的类编写一个测试函数。由于控制台输入功能在测试期间停止输入，因此我使用使用字符串的 InputStream 编写测试。

```
String str="3\n2\n1\n4\n";
InputStream is = new ByteArrayInputStream(str.getBytes());
assertTrue(app.RunApp(is)); 
```

这导致调用 getChoice(InputStream i) 函数，该函数涉及来自 Scanner 的控制台输入。

```
public int getChoice(InputStream i) throws IOException {
        Scanner s=new Scanner(i);
        s.useDelimiter("\n");
        String y= s.next();
        int x=Integer.parseInt(y);
        return x;
    } 
```

我希望上面的代码一个一个地获取字符串中的数字。但是，发生的事情是它正确地采用了第一个数字，然后流的位置直接进入流的末尾，这导致了 NoSuchElementException。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:39:09.290

利用...

```
String y = s.nextLine();  // That will take the entire line instead of only 1st word 
```

# python - Python：检测 unicode

> ID：11642810
> 
> 赞同：-1
> 
> 时间：2012-07-25T04:37:04.143
> 
> 标签：python, regex, unicode

我正在使用 Python 的`re`模块来审查一些文本。我必须审查 ASCII 和 Unicode 文本，所以如果文本是 Unicode，我需要设置`re`'s Unicode 标志。有没有一种方法可以检测文本是否为 Unicode？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:40:01.703

ASCII 是 Unicode 的一个子集，您不必做任何事情——除非您有理由怀疑您的文本既不是 ASCII 也不是 Unicode（例如 Windows CP 1252 等），只需默认使用 Unicode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:40:13.210

你可以使用

```
 isinstance( s, unicode) 
```

查看对象是否为 unicode。但是，如果您将所有字符串都作为*编码*的unicode，那么您需要知道编码。对于可能是一场噩梦的电子邮件处理应用程序。过去，我曾为此使用过[chardet 。](http://pypi.python.org/pypi/chardet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T04:41:07.293

您可以尝试`text.decode('utf-8')`，如果成功且没有错误，则文本是 UTF-8 编码的 Unicode（纯 ASCII 是其中的一个子集）。如果它是其他任何东西，即代码页，它可能会引发异常。

# php - 无法访问 php 函数返回的数组值

> ID：11642811
> 
> 赞同：0
> 
> 时间：2012-07-25T04:37:16.727
> 
> 标签：php, arrays, function

我在一个文件中同时拥有*PHP*和*HTML*，遵循以下模式：

> -HTML1
> -PHP1
> -HTML2
> <-script>
> -PHP2
> </script> -
> 其余 HTML

在*PHP2*部分，我调用*PHP1*中的一个函数，该函数返回一个数组。我可以获得 的值`count($arr)`，但无法打印数组中的值。当我在浏览器中检查源代码时，它只是显示为一个空字符串。

当我将函数中的语句从*PHP1*复制到*PHP2*时，一切正常 - 我可以打印数组的值。

代码如下：

```
<?
include('pathdata.php');
function getThePath($node1, $node2){ //pass strings

    $n1 = $matchIDtoNum[$node1]; //get int (from pathdata)
    $n2 = $matchIDtoNum[$node2];

    $res = array();
    $res[0] = $n1;
    $res[1] = $n2;

    return $res;

}

$node1='';
$node2='';
if($_GET["node1"]){
    $node1 = $_GET["node1"];
}

if($_GET["node2"]){
    $node2 = $_GET["node2"];
}

if ($node1!='' && $node2!=''){
$arr = getThePath($node1,$node2);
}

?>

<html>
<head><title>Paths</title>    
<script>

function init(){

<?    
echo ("document.getElementById('msg1').innerHTML = 'test';\n");
if($node1!='' && $node2!=''){

    //$n1 = $matchIDtoNum[$node1];
    //$n2 = $matchIDtoNum[$node2];      
    //$res = array();
    //$res[0] = $n1;
    //$res[1] = $n2;    
    //$arr=$res;

    $num = count($arr);
    $str = implode(' ', $arr); 

    echo ("document.getElementById('msg1').innerHTML = '$arr[0]';\n"); //Empty string
    echo ("document.getElementById('msg2').innerHTML = '$str';\n"); //String with one space character
    echo ("document.getElementById('msg3').innerHTML = '$num'+' '+'$node1'+' '+'$node2';\n"); //this always works
}

?>

}

</script>

</head>
<body onload="init()">
<h1>Given two Nodes, return Shortest Path</h1>
<form name="inputform" action="getpath.php" method="get">
<input type="text" name="node1" /> 
<input type="text" name="node2" /> 
<input type="submit" value="Submit" />
<input type="reset" value="Clear" />
<br/>
<p id ="msg1"></p>
<p id ="msg2"></p>
<p id ="msg3"></p>
<br/>
</form>
</body>
</html> 
```

关于我可能出错的地方有什么建议吗？

谢谢！

编辑添加：对我有用的是将全局`$matchIDtoNum;`放入函数中。IE

```
function getThePath($node1,$node2){
    global $matchIDtoNum; 
    $n1 = $matchIDtoNum[$nd1];
    //etc
} 
```

这给了我预期的输出。

感谢所有的评论者和回答者！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:56:10.980

使用 $node1 和 $node2 作为全局变量。像

```
function getThePath(){ //don't pass strings 
    global $node1, $node2;
    .....
}

//call function as
$arr = getThePath(); 
```

现在你会得到你的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:04:54.347

嗯..在这一行：

```
$n1 = $matchIDtoNum[$node1]; //get int (from pathdata) 
```

**看来您想从$matchIDtoNum**获取数组值。您不能从函数外部获取数组值，除非您将其作为函数调用。例如像这样：

```
$n1 = getMatchIDtoNum($node1); // get int (from pathdata) 
```

在文件**pathdata.php**上有这样一行：

```
function getMatchIDtoNum($arg){
      // Your code here
      return $matchIDtoNum[$arg];
} 
```

# c# - 将 MVC PartialView 渲染到 SignalR 响应中

> ID：11642815
> 
> 赞同：33
> 
> 时间：2012-07-25T04:37:31.583
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, partial-views, signalr

我想将 PartialView 呈现为 HTML 字符串，以便可以将其返回给 SignalR ajax 请求。

就像是：

**SignalR 集线器**(mySignalHub.cs)

```
public class mySignalRHub: Hub
{
    public string getTableHTML()
    {
        return PartialView("_MyTablePartialView", GetDataItems()) // *How is it possible to do this*
    }
} 
```

**Razor 部分视图 (_MyTablePartialView.cshtml)**

```
@model IEnumerable<DataItem>

<table>
    <tbody>
        @foreach (var dataItem in Model)
        {
        <tr>
            <td>@dataItem.Value1</td>
            <td>@dataItem.Value2</td>
        </tr>
        }
    </tbody>
</table> 
```

**HTML (MySignalRWebPage.html)**

```
<Script>
    ...      
    //Get HTML from SignalR function call
    var tableHtml = $.connection.mySignalRHub.getTableHTML();

    //Inject into div
    $('#tableContainer).html(tableHtml);
</Script>

<div id="tableContainer"></div> 
```

我的问题是我似乎无法在控制器之外呈现 PartialView。甚至可以在 Controller 之外渲染 PartialView 吗？仍然能够利用 Razor 附带的令人敬畏的 HTML 生成功能将是非常好的。

我对这一切都错了吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T12:17:42.110

在这里，这是我在 ajax 控制器中使用的，我对其进行了一些修改，以便可以从方法而不是控制器调用它，方法`returnView`呈现您的视图并返回 HTML 字符串，以便您可以在您的页面中使用 JS/jQuery 将其插入在客户端接收它：

```
 public static string RenderPartialToString(string view, object model, ControllerContext Context)
        {
            if (string.IsNullOrEmpty(view))
            {
                view = Context.RouteData.GetRequiredString("action");
            }

            ViewDataDictionary ViewData = new ViewDataDictionary();

            TempDataDictionary TempData = new TempDataDictionary();

            ViewData.Model = model;

            using (StringWriter sw = new StringWriter())
            {
                ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(Context, view);

                ViewContext viewContext = new ViewContext(Context, viewResult.View, ViewData, TempData, sw);

                viewResult.View.Render(viewContext, sw);

                return sw.GetStringBuilder().ToString();
            }
        }

        //"Error" should be name of the partial view, I was just testing with partial error view
        //You can put whichever controller you want instead of HomeController it will be the same
        //You can pass model instead of null
        private string returnView()
        {
            var controller = new HomeController();
            controller.ControllerContext = new ControllerContext(HttpContext,new System.Web.Routing.RouteData(), controller);
            return RenderPartialToString("Error", null, new ControllerContext(controller.Request.RequestContext, controller));
        } 
```

我没有在集线器上测试它，但它应该可以工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T13:02:49.780

正如[Wim](https://stackoverflow.com/a/11720881/63011)所建议的那样，最好的选择可能是使用[RazorEngine](https://github.com/Antaris/RazorEngine)。

```
public class mySignalRHub: Hub
{
    public string getTableHTML()
    {
        var viewModel = new[] { new DataItem { Value1 = "v1", Value2 = "v2" } };

        var template = File.ReadAllText(Path.Combine(
            AppDomain.CurrentDomain.BaseDirectory,
            @"Views\PathToTablePartialView\_MyTablePartialView.cshtml"));

        return Engine.Razor.RunCompile(template, "templateKey", null, viewModel);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T21:13:08.040

除了上面@user1010609 提供的答案之外，我也很努力地解决了这个问题，并最终得到了一个函数，该函数在给定控制器名称、视图和模型的路径的情况下返回渲染的 PartialView。

考虑到您没有控制器，因此没有来自 SignalR 事件的通常状态。

```
public static string RenderPartialView(string controllerName, string partialView, object model)
{
    var context = new HttpContextWrapper(System.Web.HttpContext.Current) as HttpContextBase;

    var routes = new System.Web.Routing.RouteData();
    routes.Values.Add("controller", controllerName);

    var requestContext = new RequestContext(context, routes);

    string requiredString = requestContext.RouteData.GetRequiredString("controller");
    var controllerFactory = ControllerBuilder.Current.GetControllerFactory();
    var controller = controllerFactory.CreateController(requestContext, requiredString) as ControllerBase;

    controller.ControllerContext = new ControllerContext(context, routes, controller);      

    var ViewData = new ViewDataDictionary();

    var TempData = new TempDataDictionary();

    ViewData.Model = model;

    using (var sw = new StringWriter())
    {
        var viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, partialView);
        var viewContext = new ViewContext(controller.ControllerContext, viewResult.View, ViewData, TempData, sw);

        viewResult.View.Render(viewContext, sw);
        return sw.GetStringBuilder().ToString();
    }
} 
```

你会用类似的东西来称呼它：

```
RenderPartialView("MyController", "~/Views/MyController/_partialView.cshtml", model); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T11:45:27.293

您是否考虑过使用诸如[http://razorengine.codeplex.com/](http://razorengine.codeplex.com/)之类的 razor 模板引擎？你不能用它来解析局部视图，但你可以用它来解析剃刀模板，这几乎类似于局部视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T13:59:12.393

如何使用`RazorEngineHost`and `RazorTemplateEngine`。我发现这篇[不错的文章](http://vibrantcode.com/blog/2010/11/16/hosting-razor-outside-of-aspnet-revised-for-mvc3-rc.html/)可能是您正在寻找的。这是关于在 ASP.NET (MVC) 之外托管 Razor。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-26T07:22:26.433

根据下面提供给类似问题的答案，我建议使用

**Html.Partial（部分视图*名称*）**

它返回一个 MvcHtmlString，您应该可以将其用作 SignalR 响应的内容。但是，我没有对此进行测试。

堆栈溢出问题：[是否可以在控制器外部呈现视图？](https://stackoverflow.com/questions/6444630/is-it-possible-to-render-a-view-outside-a-controller)

# magento - 指定的后端模型无效：magento 中的 catalog/product_attribute_backend_groupprice

> ID：11642822
> 
> 赞同：2
> 
> 时间：2012-07-25T04:38:17.827
> 
> 标签：magento, backend

当我在我的 Magento 站点中单击产品时，我收到此错误：

> 处理您的请求时出错
> 
> 指定的后端模型无效：`catalog/product_attribute_backend_groupprice`
> 
> 痕迹：
> 
> ```
> #0 F:\wamp\www\bc\app\code\core\Mage\Eav\Model\Entity\Attribute\Abstract.php(338): Mage::exception('Mage_Eav', 'Invalid backend...')
> #1 F:\wamp\www\bc\app\code\core\Mage\Eav\Model\Entity\Abstract.php(596): Mage_Eav_Model_Entity_Attribute_Abstract->getBackend()
> #2 F:\wamp\www\bc\app\code\core\Mage\Eav\Model\Entity\Abstract.php(1425): Mage_Eav_Model_Entity_Abstract->walkAttributes('backend/afterLo...', Array)
> #3 F:\wamp\www\bc\app\code\core\Mage\Eav\Model\Entity\Abstract.php(877): Mage_Eav_Model_Entity_Abstract->_afterLoad(Object(Mage_Catalog_Model_Product))
> #4 F:\wamp\www\bc\app\code\core\Mage\Catalog\Model\Resource\Eav\Mysql4\Abstract.php(630): Mage_Eav_Model_Entity_Abstract->load(Object(Mage_Catalog_Model_Product), 309, NULL)
> #5 F:\wamp\www\bc\app\code\core\Mage\Core\Model\Abstract.php(225): Mage_Catalog_Model_Resource_Eav_Mysql4_Abstract->load(Object(Mage_Catalog_Model_Product), 309, NULL)
> #6 F:\wamp\www\bc\app\code\core\Mage\Catalog\controllers\ProductController.php(52): Mage_Core_Model_Abstract->load(309)
> #7 F:\wamp\www\bc\app\code\core\Mage\Catalog\controllers\ProductController.php(138): Mage_Catalog_ProductController->_initProduct()
> #8 F:\wamp\www\bc\app\code\core\Mage\Core\Controller\Varien\Action.php(418): Mage_Catalog_ProductController->viewAction()
> #9 F:\wamp\www\bc\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(254): Mage_Core_Controller_Varien_Action->dispatch('view')
> #10 F:\wamp\www\bc\app\code\core\Mage\Core\Controller\Varien\Front.php(177): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
> #11 F:\wamp\www\bc\app\code\core\Mage\Core\Model\App.php(304): Mage_Core_Controller_Varien_Front->dispatch()
> #12 F:\wamp\www\bc\app\Mage.php(596): Mage_Core_Model_App->run(Array)
> #13 F:\wamp\www\bc\index.php(103): Mage::run('', 'store')
> #14 {main} 
> ```
> 
> 错误日志记录号：1257579136

这是什么？我该如何解决这个问题？

我的 Magento 版本是 1.4.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:42:10.550

我认为它应该返回您已为其分配后端模型的属性行`catalog/product_attribute_backend_groupprice`。

当您将值分配为`catalog/product_attribute_backend_groupprice`时，它将`groupprice.php`在

```
app/code/core/mage/catalog/product/attribute/model/backend/groupprice.php 
```

如果这不存在，则会引发错误。所以你需要创建一个新的后端模型。
在本地文件夹 app/code/local/Newmodule 中创建一个新模块，并在该文件夹下创建一个`.php`名为“GroupPrice”的文件

```
app/code/local/Newmodule/product/attribute/model/backend/groupprice.php 
```

我不确定您的属性的业务逻辑，因此无法进一步帮助您。但你可以看看[这里](http://magebase.com/magento-tutorials/using-a-backend-model-to-customize-magento-a-tip-from-magento-developers-paradise/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T10:21:32.657

当 magento 数据库中的一些基本数据库条目丢失时，也会出现此问题。因此，建议在执行任何此类操作之前备份**所有数据。**

就我而言，我正在测试将 magento 代码库从 1.6.x 升级到 1.7.y，升级导致 magento 数据库发生了一些变化。我恢复了我的数据库来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:20:38.977

我认为产品的特定属性的“eav_attribute”表的“backend_model”列的值（在您的情况下，我猜测与 groupprice 相关的内容）已被分配了“catalog/product_attribute_backend_groupprice”的无效值，这可能不是存在。如果您要创建自定义后端模型，则您的 CustomModule 中必须有一个名为 CustomModule_Model_Product_Attribute_Backend_GroupPrice 的类。

希望有意义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-03T22:19:21.360

这种错误也可能表明 Magento 安装无效。例如，由于服务器上的文件权限不正确，并非所有文件都已上传或并非所有文件都可访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-30T14:07:32.347

请尝试运行以下命令，希望它能解决您的问题

```
chmod 777 var/ generated/ pub/static/ pub/media/
php bin/magento setup:upgrade
php bin/magento setup:di:compile
php bin/magento setup:static-content:deploy -f
php bin/magento cache:flush
chmod 777 var/ generated/ pub/static/ pub/media/ 
```

# matlab - 使用matlab配色方案将float转为RGB

> ID：11642826
> 
> 赞同：5
> 
> 时间：2012-07-25T04:38:39.920
> 
> 标签：matlab, colors

例如，如果我有一个浮点数`0.568`（浮点数保证是`0 -> 1`）。在当前的 matlab 配色方案（即正常、热、hsv 等）下，有没有办法将其转换为 RGB 值（以 double`[1.0, 1.0, 1.0]`或 int形式）？`[255 255 255]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T06:21:38.363

你可以试试这个：

```
f = 0.568; % your float

cm = colormap % returns the current color map

colorID = max(1, sum(f > [0:1/length(cm(:,1)):1])); 

myColor = cm(colorID, :) % returns your color 
```

结果`f = 0.568`是

```
myColor =

    0.8125    1.0000    0.1875 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T04:52:21.917

查看 jet 的帮助。

jet.colors(n) 返回一个包含 n 个颜色值的数组，该数组跨越颜色函数的范围，在本例中为 jet。现在您所做的就是将您的数据缩放/映射到该 1:n 范围。这是获取/调整颜色贴图的好方法。我以前一直这样做。

# spring - Spring表达式语言中的空值检查

> ID：11642827
> 
> 赞同：1
> 
> 时间：2012-07-25T04:38:43.307
> 
> 标签：spring, spring-el

在集合对象内的日期字段中检查空指针时，我遇到了一种奇怪的行为

```
public class FilterTest {
       public static void main(String[] args) {
              Collection<EmployeeDto> employees = new ArrayList<EmployeeDto>();
           employees.add(new EmployeeDto("", 1111, new Date()));
           employees.add(new EmployeeDto("123", 2222, null));
           employees.add(new EmployeeDto("22", 3333, new Date()));
           employees.add(new EmployeeDto("22", 4444, null));
           employees.add(new EmployeeDto("11", 5555, null));
           employees.add(new EmployeeDto("22", 6666, null));
           employees.add(new EmployeeDto(null, 6666,null));

           StandardEvaluationContext stdContext = new StandardEvaluationContext();
           stdContext.setVariable("emps", employees);      

           ExpressionParser parser = new SpelExpressionParser();    

          **String key4= "#emps.?[dateOfBirth != null ? T(DateUtil).formatDate(dateOfBirth), 'dd/MM/yyyy').contains('25/07/2012') : false]" ;**          

              Collection<Object> proj1 = (Collection<Object>) parser.parseExpression(
                      key4).getValue(stdContext);
              System.out.println(proj1);    

}
class EmployeeDto {
       String name;
       public String getName() {
              return name;
       }

       public void setName(String name) {
              this.name = name;
       }

       public int getAge() {
              return age;
       }

       public void setAge(int age) {
              this.age = age;
       }

       int age;
       Date dateOfBirth;

       public EmployeeDto(String name, int age, Date dateOfBirth) {
              this.name = name;
              this.age = age;
              this.dateOfBirth = dateOfBirth;
       }

    public Date getDateOfBirth() {
        return dateOfBirth;
    }

    public void setDateOfBirth(Date dateOfBirth) {
        this.dateOfBirth = dateOfBirth;
    }
} 
```

表达式应返回满足条件的对象集合。但是现在，我遇到了一个异常，即在 null 上找不到 dateOfBirth。所以我尝试了一个新的表达方式

```
 String key4= "#emps.?[dateOfBirth != null ? T(DateUtil).formatDate(#emps.![dateOfBirth], 'dd/MM/yyyy').contains('25/07/2012') : false]" ; 
```

这工作正常。但是当我在集合的第一个对象中添加 null 时，它返回结果为 0，当我检查时，我发现 null 传递给了 DateUtil 类的 formatDate 方法。即员工集合就像`

```
employees.add(new EmployeeDto("", 1111, null)); // first value is null, and I am getting empty result, but there is one corrrect result
           **employees.add(new EmployeeDto("12", 2222, null));**
           employees.add(new EmployeeDto("22", 3333, new Date()));
           employees.add(new EmployeeDto("33", 4444, null));
           employees.add(new EmployeeDto("FIVE", 5555, null));
           employees.add(new EmployeeDto("SIX", 6666, null));
           employees.add(new EmployeeDto(null, 6666,null)); 
```

你能帮我解决这个问题吗，谁能告诉我应该使用正确的表达方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:40:24.253

前几天您问了一个类似的问题 - 在这种情况下，您需要对集合选择的结果执行投影。这是一个更简单的例子......

```
 Expression exp = new SpelExpressionParser()
        .parseExpression("(#emps.?[name != null]).![name.toUpperCase()]"); 
```

第一部分 (...) 选择符合条件的元素；然后它对该新集合执行投影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:29:33.073

在 DateUtil 类中，添加如下方法：

```
 public static boolean isSameDay(Date date1, Date date2) {
        if (date1 == null || date2 == null) {
            return false;
        }
        Calendar cal1 = Calendar.getInstance();
        cal1.setTime(date1);
        Calendar cal2 = Calendar.getInstance();
        cal2.setTime(date2);
        return isSameDay(cal1, cal2);
    } 
```

然后做：

```
StandardEvaluationContext stdContext = new StandardEvaluationContext();
stdContext.setVariable("emps", employees);
stdContext.setVariable("yourTestDate", new Date());
ExpressionParser parser = new SpelExpressionParser();   

String key4 = "#emps.?[T(DateUtil).isSameDate(dateOfBirth, yourTestDate)]" ;
Collection<Object> proj1 = (Collection<Object>) parser.parseExpression(key4).getValue(stdContext);
System.out.println(proj1); 
```

# android - 为什么 android:uiOptions="splitActionBarWhenNarrow" 不适用于设备

> ID：11642840
> 
> 赞同：6
> 
> 时间：2012-07-25T04:40:21.567
> 
> 标签：android

我在用`android:uiOptions="splitActionBarWhenNarrow"`

拆分`Menu's`.it 在模拟器上运行良好`4.03`

但不是用真机。`4.03`它是三星平板电脑

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T07:00:52.263

`splitActionBarWhenNarrow`，顾名思义，仅适用于电话等小型（窄）设备 - 在顶部和底部之间拆分控件。在平板电脑等宽设备上运行时，它不会分裂。

参考[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)，搜索`splitActionBarWhenNarrow`.

# c# - 使用从 CloudQueueMessage 派生的类型

> ID：11642846
> 
> 赞同：0
> 
> 时间：2012-07-25T04:40:52.707
> 
> 标签：c#, oop, azure, azure-queues

> **可能重复：**
> [在 Azure 队列存储中传递对象消息](https://stackoverflow.com/questions/8550702/passing-object-messages-in-azure-queue-storage)

我正在研究一个用例，它需要我的队列消息比 Windows Azure 队列消息（CloudQueueMessage 类）提供的属性多一些。我不能使用 CloudQueueMessage 中的大多数属性，因为它们大多受到保护。

所以我想继承 CloudQueueMessage 并将我的额外属性添加到派生类失败。我的派生类如下所示：

```
public class AzureQueueMessage : CloudQueueMessage
{
      public AzureQueueMessage(string content): base(content)
      {
      }

      //My new property
      public string Label { get; set; }
} 
```

我的消息插入和检索代码的其余部分如下所示：

```
AzureQueueMessage message = new AzureQueueMessage("testing");
cloudQueue.AddMessage(message);
CloudQueueMessage qmessage = cloudQueue.GetMessage();
AzureQueueMessage azureMessage = qmessage as AzureQueueMessage; 
```

在这里，cloudQueue 是我的 Azure Queue 实例。

消息插入正常，但 azureMessage 始终为空，因为强制转换回我的派生类。

[我确实在这里](https://stackoverflow.com/questions/8550702/passing-object-messages-in-azure-queue-storage)遇到了类似的解决方案，但我还没有尝试过。

这种行为是正常的还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:19:27.917

这些是 OOP 的基本原则。当您使用“as AzureQueueMessage”演员表时，您实际上是在说：“尝试看看这是否是实例实际上是一个 AzureQueueMessage”。但是 GetMessage() 不会返回 AzureQueueMessage，它会返回 CloudQueueMessage，而且您无法更改它。

如果您想使用 AzureQueueMessage 的实例，您必须在之后自己创建它。您可以编写一个构造函数来接受返回的 CloudQueueMessage 并接管所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:41:45.290

您想要的完全可以实现，但方式略有不同。它被称为“强类型队列”。查看[这个 SO question](https://stackoverflow.com/questions/8550702/passing-object-messages-in-azure-queue-storage)，因为它将完全回答您的问题。

# c# - 使用 iTextSharp 将现有 PDF 从文件添加到未编写的文档

> ID：11642852
> 
> 赞同：5
> 
> 时间：2012-07-25T04:41:16.237
> 
> 标签：c#, pdf, itextsharp, itext

如何正确地将现有磁盘 PDF 文件中的页面添加到当前正在生成的内存 PDF 文档中？

我们有一个使用 iTextSharp 生成 PDF 文档的类。这工作正常。目前，我们在最后一页添加了条款和条件作为图片：

```
this.nettPriceListDocument.NewPage();
this.currentPage++;
Image logo = Image.GetInstance("/inetpub/Applications/Trade/Reps/images/TermsAndConditions.gif");
logo.SetAbsolutePosition(0, 0);
logo.ScaleToFit(this.nettPriceListDocument.PageSize.Width, this.nettPriceListDocument.PageSize.Height);
this.nettPriceListDocument.Add(logo); 
```

我将此图像作为 PDF 文档，并希望附加它。如果我能弄清楚这一点，就可以将我们可能需要的其他 PDF 文档附加到我正在生成的文件中。

我试过了：

```
string tcfile = "/inetpub/Applications/Trade/Reps/images/TermsAndConditions.pdf";
PdfReader reader = new PdfReader(tcfile);
PdfWriter writer = PdfWriter.GetInstance(this.nettPriceListDocument, this.nettPriceListMemoryStream);
PdfContentByte content = writer.DirectContentUnder;
for (int pageno = 1; pageno < reader.NumberOfPages + 1; pageno++)
{
    this.nettPriceListDocument.NewPage();
    this.currentPage++;
    PdfImportedPage newpage = writer.GetImportedPage(reader, pageno);
    content.AddTemplate(newpage, 1f, 1f);
} 
```

这会导致“文档未打开”异常`writer.DirectContentUnder`

我也试过：

```
string tcfile = "/inetpub/Applications/Trade/Reps/images/TermsAndConditions.pdf";
PdfReader reader = new PdfReader(tcfile);
PdfConcatenate concat = new PdfConcatenate(this.nettPriceListMemoryStream);
concat.AddPages(reader); 
```

这会导致在文档的通常第一页上插入一个空白的、大小不一的页面。

我也试过：

```
string tcfile = "/inetpub/Applications/Trade/Reps/images/TermsAndConditions.pdf";
PdfReader reader = new PdfReader(tcfile);
PdfCopy copier = new PdfCopy(nettPriceListDocument, nettPriceListMemoryStream);
for (int pageno = 1; pageno < reader.NumberOfPages + 1; pageno++)
{
    this.currentPage++;
    PdfImportedPage newpage = copier.GetImportedPage(reader, pageno);
    copier.AddPage(newpage);
}
copier.Close();
reader.Close(); 
```

这导致 NullReferenceException 在`copier.AddPage(newpage)`。

我也试过：

```
string tcfile = "/inetpub/Applications/Trade/Reps/images/TermsAndConditions.pdf";
PdfReader reader = new PdfReader(tcfile);
PdfCopyFields copier = new PdfCopyFields(nettPriceListMemoryStream);
copier.AddDocument(reader); 
```

这也会导致 NullReferenceException 在`copier.AddDocument(reader)`。

我从各种 StackOverflow 问题和答案中获得了大部分这些想法。似乎没有人处理的一件事是，将现有 PDF 文件中的新页面添加到*尚未写入磁盘上 PDF 文件的现有内存文档中*。该文档已被打开，并已写入多页数据。如果我把这个条款和条件程序排除在外，或者只是把它写成一个图像（就像原来的一样），那么生成的 PDF 就可以了。

在我开始的时候完成：如何正确地将页面从现有的磁盘 PDF 文件添加到当前正在生成的内存 PDF 文档中？

提前感谢并感谢您对此的思考。如果我能提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T19:29:57.980

这是一种简单的合并方法，可以将 PDF 文件复制到一个 PDF 中。我在合并 pdf 时经常使用这种方法。我也用它来合并不同大小的页面，没有问题。希望能帮助到你。

```
public MemoryStream MergePdfForms(List<byte[]> files)
{
    if (files.Count > 1)
    {
        PdfReader pdfFile;
        Document doc;
        PdfWriter pCopy;
        MemoryStream msOutput = new MemoryStream();

        pdfFile = new PdfReader(files[0]);

        doc = new Document();
        pCopy = new PdfSmartCopy(doc, msOutput);

        doc.Open();

        for (int k = 0; k < files.Count; k++)
        {
            pdfFile = new PdfReader(files[k]);
            for (int i = 1; i < pdfFile.NumberOfPages + 1; i++)
            {
                ((PdfSmartCopy)pCopy).AddPage(pCopy.GetImportedPage(pdfFile, i));
            }
            pCopy.FreeReader(pdfFile);
        }

        pdfFile.Close();
        pCopy.Close();
        doc.Close();

        return msOutput;
    }
    else if (files.Count == 1)
    {
        return new MemoryStream(files[0]);
    }

    return null;
} 
```

# c# - CodeContracts：重用假设/断言？

> ID：11642857
> 
> 赞同：1
> 
> 时间：2012-07-25T04:42:02.540
> 
> 标签：c#, assert, code-contracts

我已经在 MSDN 的[CodeContracts 论坛](http://social.msdn.microsoft.com/Forums/en-US/codecontracts/thread/7896fef4-8e72-4e35-9766-64587c28b0f6)上发布了这个，但显然没有人知道或费心去研究这个问题。

我试图减少重复的断言并使其更可重用，但不幸的是这不起作用你能解释为什么吗？

```
[ContractVerification(false)]
public static class Assert
{
    [Conditional("DEBUG")]
    public static void GreaterThan<T>(T value, T lowerBound) where T : IComparable<T>
    {
        Contract.Ensures(value.CompareTo(lowerBound) > 0);
    }

    [Conditional("DEBUG")]
    public static void GreaterThanOrEqual<T>(T value, T lowerBound) where T : IComparable<T>
    {
        Contract.Ensures(value.CompareTo(lowerBound) >= 0);
    }

    [Conditional("DEBUG")]
    public static void LessThan<T>(T value, T upperBound) where T : IComparable<T>
    {
        Contract.Ensures(value.CompareTo(upperBound) < 0);
    }

    [Conditional("DEBUG")]
    public static void LessThanOrEqual<T>(T value, T upperBound) where T : IComparable<T>
    {
        Contract.Ensures(value.CompareTo(upperBound) <= 0);
    }

    [Conditional("DEBUG")]
    public static void NotNull(object value)
    {
        Contract.Ensures(value != null);
    }

    [Conditional("DEBUG")]
    public static void NotNullOrEmpty(string value)
    {
        Contract.Ensures(!string.IsNullOrEmpty(value));
    }

    [Conditional("DEBUG")]
    public static void True(bool value)
    {
        Contract.Ensures(value);
    }

    [Conditional("DEBUG")]
    public static void False(bool value)
    {
        Contract.Ensures(!value);
    }

    [Conditional("DEBUG")]
    public static void InRange<T>(T value, T lowerBound, T upperBound, ExclusionMode exclusionMode = ExclusionMode.None) where T : IComparable<T>
    {
        Contract.Ensures(((exclusionMode | ExclusionMode.LowerBound) == ExclusionMode.LowerBound ? value.CompareTo(lowerBound) > 0 : value.CompareTo(lowerBound) >= 0) && ((exclusionMode | ExclusionMode.UpperBound) == ExclusionMode.UpperBound ? value.CompareTo(upperBound) < 0 : value.CompareTo(upperBound) <= 0));
    }
} 
```

我将其更改为以下内容，它似乎可以工作，但显然通用版本更可取。

```
[ContractVerification(false)]
public static class Assert
{
    [Conditional("DEBUG")]
    public static void GreaterThan(int value, int lowerBound)
    {
        Contract.Ensures(value > lowerBound);
    }

    [Conditional("DEBUG")]
    public static void GreaterThanOrEqual(int value, int lowerBound)
    {
        Contract.Ensures(value >= lowerBound);
    }

    [Conditional("DEBUG")]
    public static void LessThan(int value, int upperBound)
    {
        Contract.Ensures(value < upperBound);
    }

    [Conditional("DEBUG")]
    public static void LessThanOrEqual(int value, int upperBound)
    {
        Contract.Ensures(value <= upperBound);
    }

    [Conditional("DEBUG")]
    public static void NotNull(object value)
    {
        Contract.Ensures(value != null);
    }

    [Conditional("DEBUG")]
    public static void NotNullOrEmpty(string value)
    {
        Contract.Ensures(!string.IsNullOrEmpty(value));
    }

    [Conditional("DEBUG")]
    public static void True(bool value)
    {
        Contract.Ensures(value);
    }

    [Conditional("DEBUG")]
    public static void False(bool value)
    {
        Contract.Ensures(!value);
    }

    [Conditional("DEBUG")]
    public static void InRange(int value, int lowerBound, int upperBound, ExclusionMode exclusionMode = ExclusionMode.None)
    {
        Contract.Ensures(((exclusionMode | ExclusionMode.LowerBound) == ExclusionMode.LowerBound ? value > lowerBound : value >= lowerBound) && ((exclusionMode | ExclusionMode.UpperBound) == ExclusionMode.UpperBound ? value < upperBound : value <= upperBound));
    }
} 
```

我只想要一个解释，甚至不是一个解决方案，它是否与 CodeContracts 不直接在源代码上运行但在 IL 上有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:44:22.410

你想要的完全有可能，但知道的人不多。首先，在您的计算机上访问`C:\Program Files (x86)\Microsoft\Contracts\Languages\CSharp`并包含`ContractExtensions.cs`在您的项目中。它包含您需要的一些属性。

然后，将该[`ContractAbbreviator`](http://msdn.microsoft.com/en-us/library/system.diagnostics.contracts.contractabbreviatorattribute.aspx)属性应用于您的方法。您可以删除`[Conditional("DEBUG")]`和`[ContractVerification(false)]`属性，因为您可以在项目的代码合同属性页面中为调试和发布设置合同行为。请注意，您必须在方法的开头调用您的合同方法，否则您将在此处编写合同。您不能在方法中放置任何其他代码。

```
public static class Assert
{
    [ContractAbbreviator]
    public static void GreaterThan<T>(T value, T lowerBound)
        where T : IComparable<T>
    {
        Contract.Ensures(value.CompareTo(lowerBound) > 0);
    }

    // ...
} 
```

虽然这是对您问题的回答，但它可能无法解决您的问题。原因是静态检查器看不到什么时候[`a.CompareTo(b) > 0`](http://msdn.microsoft.com/en-us/library/system.icomparable.compareto.aspx),`a > b`成立。因此，此示例不适用于您的通用版本，但适用于您的非通用版本：

```
static int PlusOne(int value)
{
    #region Contract
    Contract.Requires(value > 0);
    Assert.GreaterThan(value, 0);
    #endregion
    return value + 1;
} 
```

* * *

编辑：

显然我完全误解了你在课堂上的意图`Assert`。你确实可以做[这个论坛](http://social.msdn.microsoft.com/Forums/en-US/codecontracts/thread/6c6f1a96-4163-49d8-b788-5b50dd79025b)上推荐的事情。

但是，您不能指望静态检查器能够理解这一点，例如 from`x.CompareTo(y) > 0`遵循`x > y`. 原因？您可以在这些方法中添加任何内容。例如：

```
public int CompareTo(MyType t)
{
    // Implementation not consistent with '>'
    return this.field1 == t.field1 ? -1 : 1;
}

public static operator bool >(MyType left, MyType right)
{
    // Implementation not consistent with CompareTo()
    return left.CompareTo(right) <= 0;
} 
```

你甚至可能没有`CompareTo`. 所以静态检查器看不到它们之间的相似之处。

# c - Explain the result of sizeof operator for a union containing structures

> ID：11642859
> 
> 赞同：0
> 
> 时间：2012-07-25T04:42:05.177
> 
> 标签：c, sizeof, structure, unions

```
#include<stdio.h>
struct mystruct
{
    char cc;
    float abc;
};
union sample
{
    int a;
    float b;
    char c;
    double d;
    struct mystruct s1;
};
int main()
{
    union sample u1;
    int k;
    u1.s1.abc=5.5;
    u1.s1.cc='a';

    printf("\n%c %f\n",u1.s1.cc,u1.s1.abc);
    k=sizeof(union sample);
    printf("%d\n\n",k);
    return 0;
} 
```

The size of operator is returning `8` I am still able to access the structure elements, more than one at a time and still the `sizeof` operator is returning the max size of primitive data types i assume. Why is this behavior? Is the size actually allocated is `8`? and the `sizeof` is returning a wrong value? Or is the actual allocated size is `8`? Then how is the structure accommodated?? If we allocate an array of unions using `malloc` and `sizeof` will it allocate enough space in such case? Please eloborate.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T04:45:04.967

Typically, the size of the union is the size of its biggest member. The biggest member is [likely] your struct member as well as the `double` member. Both have size 8\. So, as `sizeof` correctly told you, the size of the union is indeed 8.

Why do you find it strange? Why do you call 8 "wrong value"?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T04:59:56.457

```
struct mystruct
{
    char cc;   //1 -byte 
    //3 bytes Added here for Padding
    float abc; //size of float is 4-bytes
}; 
```

所以 1 + 3 + 4 = 8 个字节。

我们知道内存将分配给最大的联合成员。在我们的例子中，sizeof(double) = sizeof(struct mystruct) 都是 8。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T04:45:36.870

A union is used to place multiple members at the same memory location - you can't use more than one member at a time. All of them overlap, so the size of the union is the same as the size of the largest member.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T04:57:23.460

联合类型是允许使用不同类型描述访问相同内存的特殊结构。例如，可以描述一个数据类型的联合，它允许读取与整数、浮点数或用户声明的类型相同的数据

```
union 
{
    int i;
    float f;
    struct 
    {
     unsigned int u;
     double d;
    } s;
} u; 
```

在上面的示例中，u 的总大小是 us 的大小（即 usu 和 usd 的大小之和），因为 s 大于 i 和 f。给ui赋值时，如果ui小于uf，uf的某些部分可能会被保留

# c# - Highlight Current Line of RichTextBox

> ID：11642861
> 
> 赞同：5
> 
> 时间：2012-07-25T04:42:30.647
> 
> 标签：c#, winforms, richtextbox, highlight

This highlights the entire width of each line by painting a transparent color as the backcolor on the current line. When the line switches, the original background color is restored.

So, what we want to do is:

1.  Verify the previous and current rectangles don't match, so not to paint the same area twice
2.  Replace the last line's highlight using the controls backcolor
3.  Highlight the current line using a transparent color
4.  Set `mLastHighlight` with the index and rectangle for each applied line

However, when removing the highlight, the text is painted over. This does not occur when applying the highlight.

One solution would be to repaint the text back on the control after resetting the back color. though the text formatting, selection colors, font styles, hyperlinks, etc would be tedious to filter. Not very elegant.

This leads to a simpler solution, refreshing the control. Though that would cause massive flickering. Not acceptable either.

Is there an elegant solution? I'm completely baffled why this occurs.

**EDIT**: Edited to reflect Code Gray's response.

```
using System;

public class RTBHL : RichTextBox
{
    private LastHighlight mLastHighlight = new LastHighlight(0, Rectangle.Empty);

    private class LastHighlight
    {
        public int mCharIndex;
        public Rectangle mRectangle;

        public LastHighlight(int index, Rectangle r)
        {
            mCharIndex = index;
            mRectangle = r;
        }
    }

    public void PaintLineHighlight()
    {
        using (Graphics g = this.CreateGraphics)
        {
            // highlight color
            Color c = Color.Beige;
            // current pen color
            Pen cp = new Pen(Color.Beige);
            // color for removing highlight
            Pen lp = new Pen(this.BackColor);
            // brush for removing highlight
            SolidBrush lb = new SolidBrush(this.BackColor);
            // brush for applying highlight
            SolidBrush cb = new SolidBrush(Color.FromArgb(64, c.R, c.G, c.B));
            // index of the current line
            int index = this.GetFirstCharIndexOfCurrentLine;
            // rectangle to specify which region to paint too
            Rectangle r = new Rectangle();

            // specify dimensions
            r.X = 0;
            r.Y = this.GetPositionFromCharIndex(index).Y;
            r.Width = this.HorizontalScrollBarWidth;
            r.Height = Convert.ToInt32(this.Font.Height * this.ZoomFactor);

            // this will always be true unless the current line remains the same
            if (!(mLastHighlight.mCharIndex == index) && !(mLastHighlight.mRectangle == r))
            {
                // remove the last highlight. regardless of the brush specified, white is always applied, and the text is painted over
                g.DrawRectangle(lp, mLastHighlight.mRectangle);
                g.FillRectangle(lb, mLastHighlight.mRectangle);
                // apply highlight to the current line
                g.DrawRectangle(cp, r);
                g.FillRectangle(cb, r);
            }

            mLastHighlight = new LastHighlight(index, r);
        }
    }

#region RichScrollBars
    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool GetScrollInfo(IntPtr hWnd, int fnBar, ref SCROLLINFO si);

    [StructLayout(LayoutKind.Sequential)]
    public class SCROLLINFO
    {
        public int cbSize;
        public int fMask;
        public int nMin;
        public int nMax;
        public int nPage;
        public int nPos;
        public int nTrackPos;
        public SCROLLINFO()
        {
            this.cbSize = Marshal.SizeOf(typeof(SCROLLINFO));
        }

        public SCROLLINFO(int mask, int min, int max, int page, int pos)
        {
            this.cbSize = Marshal.SizeOf(typeof(SCROLLINFO));
            this.fMask = mask;
            this.nMin = min;
            this.nMax = max;
            this.nPage = page;
            this.nPos = pos;
        }
    }

    private const int SIF_ALL = 0X17;
    private const int SB_HORZ = 0;
    private const int SB_VERT = 1;

    public int HorizontalScrollBarWidth()
    {
        SCROLLINFO si = new SCROLLINFO() {fMask = SIF_ALL};
        GetScrollInfo(this.Handle, SB_HORZ, si);

        return Math.Max(si.nMax, this.Width);
    }

    public int VerticalScrollBarHeight()
    {
        SCROLLINFO si = new SCROLLINFO() {fMask = SIF_ALL};
        GetScrollInfo(this.Handle, SB_VERT, si);

        return Math.Max(si.nMax, this.Height);
    }
#endregion
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:36:20.763

这里的问题是您复制的代码是为 Scintilla 设计的。`SCI_*`常量由 Scintilla 标头在内部定义，它们引用的消息仅对 Scintilla 控件有意义。

将这些消息发送到本机 Win32 富编辑控件不会做任何事情，因为它不是为处理这些消息而设计的。（或者更糟的是，一个或多个`SCI_*`常量碰巧与富编辑控件识别的一个或多个消息标识符发生冲突，从而*产生*一些潜在的有趣行为。）

除非您实际上在项目中使用了 Scintilla 编辑控件（您说过不想这样做），否则该代码不会做任何有趣的事情。它不是为 Win32 丰富的编辑控件编写的，它是为与 Scintilla 控件交互而编写的。

Scintilla 控件不仅仅是 Win32 富编辑控件的包装器。它必须做*大量*的自定义绘图才能发挥它的魔力，而所有这些代码都很难靠你自己来正确完成。这就是为什么这么多人首先使用 Scintilla 的原因。如果您需要它的功能集，我强烈建议您效仿。

无论如何，我实际上不知道这是否可以使用 Win32 富编辑控件。我不这么认为，但我不能对这个事实发誓。我想你可以通过设置选择颜色来破解它，但这似乎不是一个很好的解决方案。像[丹尼尔在这里建议的东西](https://stackoverflow.com/a/578850/366904)。我不是 Scintilla 专家，但在我未经训练的眼中，这看起来有点像基于 Scintilla 的代码的道德等价物，但为 Win32 丰富的编辑控件编写（通过其 .NET WinForms 包装器）。

# objective-c - 在 Objective-C 中解析 XML 的问题

> ID：11642867
> 
> 赞同：0
> 
> 时间：2012-07-25T04:43:16.720
> 
> 标签：objective-c, xml, xcode, gdataxml

我目前正在尝试为我玩的游戏制作一个简单的“服务器状态”应用程序，它所需要做的就是从 URL 解析 XML 并输出结果。我目前被困在这些错误上，我认为这与我链接/合并我的 GDataXML 的方式有关

请参阅图片以了解错误，抱歉我可以直接发布图片。声望不够：

错误 (1) 体系结构 i386 的未定义符号：**“_OBJC_CLASS_$_GDataXMLDocument”，引用自：** ViewController.old 中的 objc-class-ref：未找到体系结构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1 （使用 -v 查看调用）

错误 (2) 体系结构 i386 的未定义符号：“_OBJC_CLASS_$_GDataXMLDocument”，引用自：ViewController.o ld 中的 objc-class-ref：未找到体系结构 i386 clang 的符号：错误：**链接器命令失败，退出代码 1 （使用 -v 查看调用）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:56:56.300

正如您所怀疑的那样，您尝试使用的类未正确合并到您的项目中，或未正确链接到目标。也许[这篇 SO 帖子](https://stackoverflow.com/questions/10642808/how-to-fix-compile-mach-o-linker-error)会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:05:08.730

链接器找不到 GDataXML 的对象。看起来您需要构建 GDataXML 并将构建库的路径添加到链接器。

# mysql - mysql !php 登录脚本！xampp, localhost phpmyadmin 我从哪里开始

> ID：11642873
> 
> 赞同：1
> 
> 时间：2012-07-25T04:44:00.393
> 
> 标签：mysql, login, phpmyadmin

我正在尝试制作登录脚本。我下载了mysql、xampp、wamp。已经有filezilla。我开始在 xampp 控制面板中乱搞，试图弄清楚如何制作数据库，以便我可以为用户名、密码制作一个表。我安装了 phpmyadmin 终于让它接受我的主机、用户、通过然后我意识到我在 localhost/phpmyadmin 中看到了这个错误

错误

SQL 查询：DocumentationEdit 编辑

`tables` 从中选择`phpmyadmin`。`pma_recent` WHERE `username`= '根'

MySQL 说：文档

# 1142 - SELECT 命令拒绝用户 ''@'localhost' 用于表 'pma_recent'

我真的很沮丧。我想卸载所有内容并重新启动，但我不知道要下载什么。在我卸载所有东西后，我应该只下载 xampp，因为我听说它带有 mysql、phpmyadmin 或什么？

我认为我遇到了麻烦，因为我只能找到关于如何制作登录脚本的过时教程，而且每个人都使用不同的网络服务器或 w/e。

我还需要帮助理解这段代码......我应该保持 localhost 原样吗？?? 用户传递 $conect = mysql_connect("localhost", "root", "123")

mysql_select_db"whatsmydb?"

我会替换whatsmydb吗？与用户？

这是我在数据库 information_schema Check Privileges Check Privileges mysql Check Privileges Check Privileges performance_schema Check Privileges Check Privileges sakila Check Privileges Check Privileges test Check Privileges Check Privileges users Check Privileges Check Privileges world Check Privileges Check Privileges Total: 7

我尝试的次数越多，我就越感到困惑 LOL 有人可以帮我创建一个登录脚本吗？我应该用什么来创建它？有人有mysql5.5的新教程吗？为什么我会收到此错误？如何设置包含用户名密码的表？我太困惑了，我该从哪里开始？！？！？！！？！？！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T05:01:26.327

您没有为此包含 PHP 标记，听起来您正试图使用​​ PHP 连接代码来访问 MySQL 数据库。您需要首先了解您的服务器环境的几个概念。

1.  您的服务器是运行该软件的计算机
2.  您的数据库服务器是 MySQL（计算机上运行的软件）
3.  您的主机是计算机的 IP 地址或主机名（即 localhost 或 127.0.0.1）
4.  您的数据库名称是您创建的数据库的名称（我会谈到）
5.  PhpMyAdmin 是一个基于 Web 的应用程序，可让您操作 MySQL 数据库

**好的，让我们从 PhpMyAdmin 开始并创建您的第一个数据库：**

如果单击左侧的“房屋”图标，您将进入主屏幕，您将在主要内容区域看到一个表单字段，您可以输入数据库名称和“创建新数据库”，然后单击“创建”。如果那是数据库的名称，请输入**myfirstdb ，然后单击“创建”**

这将刷新左侧的列，并且有一个下拉（组合）菜单显示数据库名称（如您提到的那些）。您现在应该会看到**myfirstdb**也列在那里。选择它。

现在您将看到很少的内容，但在底部右侧的主要内容区域中有一个表单字段，允许您创建表名并确定它有多少个字段。输入**用户**并选择**4**作为字段数。然后点击最右边的“Go”。

一个表单显示 4 行，您必须命名您的字段（列），我建议您命名以下内容并选择以下数据类型：

*   id INT AUTO_INCREMENT
*   名称 VARCHAR(48)
*   用户名 VARCHAR(24)
*   密码 VARCHAR(24)

*   请务必检查**id**字段旁边的小键图标以将其声明为主键。然后单击“开始”以创建您的表**users**。

恭喜，您已经创建了第一个表。现在，如果你有勇气，你可以跳过这些步骤并单击 PhpMyAdmin 中的“SQL”选项卡并粘贴以下 SQL 代码，它也会创建表：

```
CREATE TABLE users (id INT AUTO_INCREMENT, name VARCHAR(48), username VARCHAR(24), password VARCHAR(24), PRIMARY KEY (id)); 
```

* * *

您在问题中尝试的代码是用于连接数据库的 PHP 代码。假设您按照上述说明进行操作，以下是正确连接的示例：

```
<?php
// Make a MySQL Connection
mysql_connect("localhost", "user", "pass") or die(mysql_error());
mysql_select_db("myfirstdb") or die(mysql_error());

// Retrieve all the data from the "example" table
$result = mysql_query("SELECT * FROM users")
or die(mysql_error());  

// store the record of the "example" table into $row
$row = mysql_fetch_array( $result );

// Print out the contents of the entry     
echo "Name: ".$row['name'];
echo "User: ".$row['username'];
echo "Pass: ".$row['password'];

?> 
```

* * *

请注意，我们没有将任何数据存储到您的表中，因此您可以在 PhpMyAdmin 中为选定的**用户**表单击“插入”选项卡并插入行，或者您可以使用 SQL 插入它们。插入几个用户的示例 SQL（单击 SQL 选项卡并粘贴）：

```
INSERT INTO users VALUES (1, "My Buddy", "user1", "password1"), (2, "My Enemy", "badguy1", "password2"); 
```

* * *

从这里您确实需要逐步阅读一些在线教程来创建应用程序。您的登录脚本需要对表单进行 HTML 编程，然后是 PHP 编程来接收表单提交，然后是 PHP + SQL 编程来检查用户与数据库。搜索示例并使用这些基础知识来创建您需要的内容。

* * *

** 为您的慷慨评分额外奖励 **

看看这个： - [http://www.html-form-guide.com/php-form/php-login-form.html](http://www.html-form-guide.com/php-form/php-login-form.html) - [http://www.phpeasystep.com/phptu/6.html](http://www.phpeasystep.com/phptu/6.html) （可能会更好)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T09:35:27.117

在您的 PHPMyAdmin 根文件夹中打开`config.inc.php`并注释掉以下行

```
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin'; 
```

这将禁用“高级 phpMyAdmin 功能”——无论它们是什么——并让正常功能正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-07T05:04:09.570

创建 pma 用户并将权限应用于 phpadmin 表

而不是使用 creat_tables.sql

用于设置 pmadb 的 SQL 命令，如文档中所述。

*   该文件适用于 MySQL 5 及更高版本！
*   该脚本要求用户 pma 已经存在。如果我们放一个
*   在这里创建他的行太多用户可能只是使用此脚本并结束
*   与控制用户的密码相同。
*   此用户“pma”必须在 config.inc.php (controluser/controlpass) 中定义
*   请不要忘记在 config.inc.php 中设置表名

数据库：`phpmyadmin`

```
CREATE DATABASE IF NOT EXISTS `phpmyadmin`
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin;
USE phpmyadmin; 
```

特权

```
 (activate this statement if necessary)
 GRANT SELECT, INSERT, DELETE, UPDATE ON `phpmyadmin`.* TO
    'pma'@localhost; 
```

表的表结构`pma_bookmark`

```
CREATE TABLE IF NOT EXISTS `pma_bookmark` (
  `id` int(11) NOT NULL auto_increment,
  `dbase` varchar(255) NOT NULL default '',
  `user` varchar(255) NOT NULL default '',
  `label` varchar(255) COLLATE utf8_general_ci NOT NULL default '',
  `query` text NOT NULL,
  PRIMARY KEY  (`id`)
)
  COMMENT='Bookmarks'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

表的表结构`pma__column_info`

```
CREATE TABLE IF NOT EXISTS `pma_column_info` (
  `id` int(5) unsigned NOT NULL auto_increment,
  `db_name` varchar(64) NOT NULL default '',
  `table_name` varchar(64) NOT NULL default '',
  `column_name` varchar(64) NOT NULL default '',
  `comment` varchar(255) COLLATE utf8_general_ci NOT NULL default '',
  `mimetype` varchar(255) COLLATE utf8_general_ci NOT NULL default '',
  `transformation` varchar(255) NOT NULL default '',
  `transformation_options` varchar(255) NOT NULL default '',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `db_name` (`db_name`,`table_name`,`column_name`)
)
  COMMENT='Column information for phpMyAdmin'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

表的表结构`pma__history`

```
CREATE TABLE IF NOT EXISTS `pma_history` (
  `id` bigint(20) unsigned NOT NULL auto_increment,
  `username` varchar(64) NOT NULL default '',
  `db` varchar(64) NOT NULL default '',
  `table` varchar(64) NOT NULL default '',
  `timevalue` timestamp NOT NULL,
  `sqlquery` text NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `username` (`username`,`db`,`table`,`timevalue`) 
```

) COMMENT='phpMyAdmin 的 SQL 历史记录' DEFAULT CHARACTER SET utf8 COLLATE utf8_bin;

表的表结构`pma__pdf_pages`

```
CREATE TABLE IF NOT EXISTS `pma_pdf_pages` (
  `db_name` varchar(64) NOT NULL default '',
  `page_nr` int(10) unsigned NOT NULL auto_increment,
  `page_descr` varchar(50) COLLATE utf8_general_ci NOT NULL default '',
  PRIMARY KEY  (`page_nr`),
  KEY `db_name` (`db_name`)
)
  COMMENT='PDF relation pages for phpMyAdmin'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

表的表结构`pma__recent`

```
CREATE TABLE IF NOT EXISTS `pma_recent` (
  `username` varchar(64) NOT NULL,
  `tables` text NOT NULL,
  PRIMARY KEY (`username`)
)
  COMMENT='Recently accessed tables'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

表的表结构`pma__table_uiprefs`

```
CREATE TABLE IF NOT EXISTS `pma_table_uiprefs` (
  `username` varchar(64) NOT NULL,
  `db_name` varchar(64) NOT NULL,
  `table_name` varchar(64) NOT NULL,
  `prefs` text NOT NULL,
  `last_update` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`username`,`db_name`,`table_name`)
)
  COMMENT='Tables'' UI preferences'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

表的表结构`pma__relation`

```
CREATE TABLE IF NOT EXISTS `pma_relation` (
  `master_db` varchar(64) NOT NULL default '',
  `master_table` varchar(64) NOT NULL default '',
  `master_field` varchar(64) NOT NULL default '',
  `foreign_db` varchar(64) NOT NULL default '',
  `foreign_table` varchar(64) NOT NULL default '',
  `foreign_field` varchar(64) NOT NULL default '',
  PRIMARY KEY  (`master_db`,`master_table`,`master_field`),
  KEY `foreign_field` (`foreign_db`,`foreign_table`)
)
  COMMENT='Relation table'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

表的表结构`pma__table_coords`

```
CREATE TABLE IF NOT EXISTS `pma_table_coords` (
  `db_name` varchar(64) NOT NULL default '',
  `table_name` varchar(64) NOT NULL default '',
  `pdf_page_number` int(11) NOT NULL default '0',
  `x` float unsigned NOT NULL default '0',
  `y` float unsigned NOT NULL default '0',
  PRIMARY KEY  (`db_name`,`table_name`,`pdf_page_number`)
)
  COMMENT='Table coordinates for phpMyAdmin PDF output'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

表的表结构`pma__table_info`

```
CREATE TABLE IF NOT EXISTS `pma_table_info` (
  `db_name` varchar(64) NOT NULL default '',
  `table_name` varchar(64) NOT NULL default '',
  `display_field` varchar(64) NOT NULL default '',
  PRIMARY KEY  (`db_name`,`table_name`)
)
  COMMENT='Table information for phpMyAdmin'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

表的表结构`pma__designer_coords`

```
CREATE TABLE IF NOT EXISTS `pma_designer_coords` (
  `db_name` varchar(64) NOT NULL default '',
  `table_name` varchar(64) NOT NULL default '',
  `x` INT,
  `y` INT,
  `v` TINYINT,
  `h` TINYINT,
  PRIMARY KEY (`db_name`,`table_name`)
)
  COMMENT='Table coordinates for Designer'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

表的表结构`pma__tracking`

```
CREATE TABLE IF NOT EXISTS `pma_tracking` (
  `db_name` varchar(64) NOT NULL,
  `table_name` varchar(64) NOT NULL,
  `version` int(10) unsigned NOT NULL,
  `date_created` datetime NOT NULL,
  `date_updated` datetime NOT NULL,
  `schema_snapshot` text NOT NULL,
  `schema_sql` text,
  `data_sql` longtext,
  `tracking` set('UPDATE','REPLACE','INSERT','DELETE','TRUNCATE','CREATE DATABASE','ALTER DATABASE','DROP DATABASE','CREATE TABLE','ALTER TABLE','RENAME TABLE','DROP TABLE','CREATE INDEX','DROP INDEX','CREATE VIEW','ALTER VIEW','DROP VIEW') default NULL,
  `tracking_active` int(1) unsigned NOT NULL default '1',
  PRIMARY KEY  (`db_name`,`table_name`,`version`)
)
  COMMENT='Database changes tracking for phpMyAdmin'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

表的表结构`pma__userconfig`

```
CREATE TABLE IF NOT EXISTS `pma_userconfig` (
  `username` varchar(64) NOT NULL,
  `timevalue` timestamp NOT NULL,
  `config_data` text NOT NULL,
  PRIMARY KEY  (`username`)
)
  COMMENT='User preferences storage for phpMyAdmin'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

问题在于额外的_

# c# - How to reverse a Reed - Solomon algorithm?

> ID：11642875
> 
> 赞同：1
> 
> 时间：2012-07-25T04:44:06.307
> 
> 标签：c#, c++, c#-4.0, barcode

I have a Reedsolomon encoding algorithm,if i passes 3 values as parameters to that algorithm, then it returns error code words as output.Now i want to reverse of it,means if i passes error code words as input,then i want to get 3 values as output.How can i do it?

# c# - Access HttpContext.Current.Application from batch process c#

> ID：11642876
> 
> 赞同：0
> 
> 时间：2012-07-25T04:44:09.057
> 
> 标签：c#, asp.net

I have a C# ASP.NET web application which starts a thread running some methods in a class called `SiteCrawler.cs`.

In `HttpContext.Current.Application` I want to save some value when all the threads are finished running. My problem is that the `HttpContext.Current` object is `null` in the spawned threads because it doesn't exist there.

I have tried to search around every inch of Stackoverflow to find a solution but without any luck....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:53:53.773

我建议在生成线程时将 HttpContext 作为参数传递。就个人而言，我会删除您对 HttpContext 的依赖并创建一个对象，其工作是同步您的线程（或存储它们的结果），并可用于在并行处理完成后执行后期处理。

HttpContext.Current.Application 是一个单例，它将存在于所有线程中......这是一个网络应用程序吗？如果不是，您始终可以自己初始化应用程序并将其分配给 HttpContext.Current.Application。

# android - 如何识别ActionMode中是否点击了Done按钮

> ID：11642877
> 
> 赞同：37
> 
> 时间：2012-07-25T04:44:13.150
> 
> 标签：android, android-actionbar, actionbarsherlock

我`ActionMode`用来选择网格中的项目。问题是我无法识别是否完全单击了**“完成”**按钮。我唯一能知道的就是`ActionMode`已经完成了。但是按**Back**也完成了`ActionMode`。**所需的行为是在完成**单击时接受选择，并`ActionMode`在**后**按时退出。

我尝试使用`ActionMode.setCustomView()`，但它不影响**完成**按钮。`Activity.onBackPressed()`启动 ActionMode 时不会调用。

我发现的一个解决方案是使用 ActionBarSherlock 并手动获取**完成**按钮：

```
View closeButton = findViewById(R.id.abs__action_mode_close_button); 
```

但它仅适用于 Android 2.x-3.x，因为在 4.xa 上使用了本机操作栏。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-25T06:14:11.413

请不要这样做，因为它是特定于实现且非常不标准的。

您可以在`onDestroyActionMode`关闭操作模式时使用回调。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-30T12:32:48.183

这是解决方案：

```
ActionMode mMode = MyActivityClass.this.startActionMode(some implementation);
int doneButtonId = Resources.getSystem().getIdentifier("action_mode_close_button", "id", "android");
View doneButton = MyActivityClass.this.findViewById(doneButtonId);
doneButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // do whatever you want 
        // in android source code it's calling mMode.finish();
    }
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-28T20:57:13.197

这是我的实现，它是一个适当的 hack，但它有效，当单击 ActionMode DONE 时，我真的找不到做特定事情的替代方法。我觉得你不能更优雅地捕捉这个事件真的很奇怪。

任何使这个稍微不那么难看的建议将不胜感激......

在我的活动中..

```
boolean mActionModeIsActive = false;
boolean mBackWasPressedInActionMode = false;

@Override
public boolean dispatchKeyEvent(KeyEvent event)
{
    mBackWasPressedInActionMode = mActionModeIsActive && event.getKeyCode() == KeyEvent.KEYCODE_BACK;
    return super.dispatchKeyEvent(event);
}

@Override
public boolean onCreateActionMode(ActionMode mode, Menu menu)
{
    mActionModeIsActive = true;
    return true;
}

@Override
public void onDestroyActionMode(ActionMode mode)
{
    mActionModeIsActive = false;

    if (!mBackWasPressedInActionMode)
        onActionModeDoneClick();

    mBackWasPressedInActionMode = false;
}

public void onActionModeDoneClick();
{
    // Do something here.
} 
```

如果您在 Activity 中使用 Fragments，那么其中一些代码可能需要在 Fragment 中，而其他位则在 Activity 中。

@JakeWharton（和其他 ActionBarSherlock 用户）如果您在旅行中看到这个。我很想知道以上内容是否与 ABS 兼容，因为我尚未将 ABS 与我当前的项目集成。

# javascript - Phonegap Build：应用程序无法在 iOS 上运行

> ID：11642879
> 
> 赞同：0
> 
> 时间：2012-07-25T04:44:47.430
> 
> 标签：javascript, android, ios, cordova

使用 Phonegap Build 构建应用程序，但我不知道为什么该应用程序无法安装在 iOS 设备上。我确实签署了应用程序作为 Apple iOS 开发人员许可证的分发许可证，这里是应用程序的链接。

[iOS版下载链接](http://s3.amazonaws.com/ios.phonegap/slicehost-production/apps/168868/12Gain.ipa)

[安卓版下载链接](https://build.phonegap.com/apps/168868/download/android)

我得到的错误：可以下载和安装，在安装过程中：此时无法安装“AppName”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:01:12.157

在构建设置中确保您的代码签名身份设置为开发人员而不是分发。仅在您要提交到 iTunes 时将其设置为分发

您必须拥有 Apple 开发人员登录名，并且必须在配置门户中注册相应的配置和安装应用程序的设备。

你可以去[https://developer.apple.com/ios/manage/devices/index.action](https://developer.apple.com/ios/manage/devices/index.action)

并使用您的苹果开发者登录名登录，以确保设备已在供应门户中注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:55:21.280

`Phonegap`像构建原生应用`iOS`一样构建您的应用。这是使用的最大优势`Phonegap`- 您拥有所有控制权。将您要测试的设备添加到配置文件，将配置文件添加到管理器，将代码签名身份设置到该配置文件，然后存档/构建您的应用程序等。您可以参考在线可用的各种链接，例如[这个](https://stackoverflow.com/questions/4861891/creating-ipa-for-distribution-to-client)或[这个一](https://stackoverflow.com/questions/7817162/create-ipa-file-in-xcode-4-2-ios-5-0-beta)。我的猜测是您忘记将要测试的设备的 UDID 添加到您使用的配置文件中。请参阅[此 SO 问题](https://stackoverflow.com/questions/10222946/how-to-find-out-what-profile-was-used-for-building-ipa-file/10223230#10223230)以查看您是否已将这些设备添加到配置文件中。

# windows - Convert line-endlings for whole directory tree to \r\n

> ID：11642882
> 
> 赞同：1
> 
> 时间：2012-07-25T04:45:08.760
> 
> 标签：windows, line-endings

As the question [Convert line-endlings for whole directory tree (Git)](https://stackoverflow.com/questions/7068179/convert-line-endlings-for-whole-directory-tree-git "Convert line-endlings for whole directory tree (Git)") but to Windows \r\n

Only text files (eg: .html, .css, .js, .php)

Assume complex scenarios, such as files with mixed line endings (Unix and Windows)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:49:09.513

[这是`find`](http://gnuwin32.sourceforge.net/packages/findutils.htm). [这是`unix2dos`](http://www.bastet.com/). 相同的解决方案适用。

# sql - SQL Server full-text search for phrase containing a hyphen doesn't return expected results

> ID：11642886
> 
> 赞同：11
> 
> 时间：2012-07-25T04:46:14.910
> 
> 标签：sql, sql-server, sql-server-2008, tsql, full-text-search

We have an application that using a SQL Server 2008 database, and full-text search. I'm trying to understand why the following searches behave differently:

First, a phrase containing a hyphenated word, like this:

```
contains(column_name, '"one two-three-four five"') 
```

And second, an identical phrase, where the hyphens are replaced by spaces:

```
contains(column_name, '"one two three four five"') 
```

The full-text index uses the ENGLISH (1033) locale, and the default system stoplist.

From my observations of other full-text searches containing hyphenated words, the first one should allow for matches on either `one two three four five` or `one twothreefour five`. Instead, it only matches `one twothreefour five` (and not `one two-three-four five`).

* * *

**Test Case**

Setup:

```
create table ftTest 
(
    Id int identity(1,1) not null, 
    Value nvarchar(100) not null, 
    constraint PK_ftTest primary key (Id)
);

insert ftTest (Value) values ('one two-three-four five');
insert ftTest (Value) values ('one twothreefour five');

create fulltext catalog ftTest_catalog;
create fulltext index on ftTest (Value language 1033)
    key index PK_ftTest on ftTest_catalog;
GO 
```

Queries:

```
--returns one match
select * from ftTest where contains(Value, '"one two-three-four five"')

--returns two matches
select * from ftTest where contains(Value, '"one two three four five"')
select * from ftTest where contains(Value, 'one and "two-three-four five"')
select * from ftTest where contains(Value, '"one two-three-four" and five')
GO 
```

Cleanup:

```
drop fulltext index on ftTest
drop fulltext catalog ftTest_catalog;
drop table ftTest; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T22:45:29.273

在这种情况下，您无法预测断词器的行为，最好在字符串上运行 sys.dm_fts_parser 以了解单词将如何被拆分并存储在内部索引中。

例如，在“一二三四五”上运行 sys.dm_fts_parser 会导致以下结果 -

```
select * from sys.dm_fts_parser('"one two-three-four five"', 1033, NULL, 0)
--edited--
1   0   1   Exact Match one
1   0   2   Exact Match two-three-four
1   0   2   Exact Match two
1   0   3   Exact Match three
1   0   4   Exact Match four
1   0   5   Exact Match five 
```

从返回的结果可以看出，分词器解析字符串并输出六种形式，这些形式可以解释您在运行 CONTAINS 查询时看到的结果。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T07:38:57.230

[http://support.microsoft.com/default.aspx?scid=kb;en-us;200043](http://support.microsoft.com/default.aspx?scid=kb;en-us;200043)

“如果在搜索条件中必须使用非字母数字字符（主要是短划线 '-' 字符），请使用 Transact-SQL LIKE 子句而不是 FULLTEXT 或 CONTAINS 谓词。”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-17T05:48:54.403

全文搜索将单词视为没有空格或标点符号的字符串。非字母数字字符的出现可能会在搜索过程中“打断”单词。因为 SQL Server 全文搜索是基于词的引擎，所以在搜索索引时一般不考虑标点符号并忽略。因此，像 'CONTAINS(testing, "computer-failure")' 这样的 CONTAINS 子句将匹配具有值“找不到我的计算机会很昂贵”的行。

请点击链接了解为什么： https: [//support.microsoft.com/en-us/kb/200043](https://support.microsoft.com/en-us/kb/200043)

# java - 表单提交图片需要2次点击执行

> ID：11642891
> 
> 赞同：2
> 
> 时间：2012-07-25T04:47:16.187
> 
> 标签：java, php, css, forms, submit

我正在尝试通过提交图像执行标准的选择加入表单。使用常规提交按钮时，脚本会正常执行。当使用图像作为按钮时，图像最初需要两次单击才能执行，然后再单击一次，除非重新加载页面。

我怀疑这可能是主题代码和选择加入表单代码之间的冲突，所以我将链接到一个可以查看表单、页面和源代码的实时[示例。](http://prosperityclicks.com/your-perfect-is-possible-prosperity-defined/)

选择加入表单在主要内容区域后淡入（滚动到底部 1-2 秒后）。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:02:10.933

您可以尝试避免使用图像并为按钮设置样式。

像这样：

```
<button style="background:url('your_image');height:100px;width:100px;"></button> 
```

# asynchronous - 正在捕获并行异常

> ID：11642894
> 
> 赞同：0
> 
> 时间：2012-07-25T04:47:42.643
> 
> 标签：asynchronous, task-parallel-library, .net-4.5, async-await, c#-5.0

不知何故，我的异常似乎被它们正在执行的方法捕获。这是调用该方法的代码。如您所见，我创建了一个超时的取消令牌。我注册了一个在取消令牌触发时调用的方法，然后我开始一个新任务。取消令牌似乎工作正常。注册方法也是如此。

```
var cancellationToken = new CancellationTokenSource(subscriber.TimeToExpire).Token;
cancellationToken.Register(() =>
{
    subscriber.Abort();
});
var task = Task<bool>.Factory.StartNew(() =>
{                  
 subscriber.RunAsync((T)messagePacket.Body, cancellationToken);
 return true;
})
.ContinueWith(anticedant => 
{
    if (anticedant.IsCanceled)
    {
        Counter.Increment(12);
        Trace.WriteLine("Request was canceled");
    }

    if (anticedant.IsFaulted)
    {
        Counter.Increment(13);
        Trace.WriteLine("Request was canceled");
    }

    if (anticedant.IsCompleted)
    {
        Counter.Increment(14);
    } 
```

下一段代码是似乎不仅抛出异常（预期行为。而且捕获异常）的方法。

```
public async override Task<bool> ProcessAsync(Message input, CancellationToken cancellationToken)
{
    Random r = new Random();
    Thread.Sleep(r.Next(90, 110));
    cancellationToken.ThrowIfCancellationRequested();
    return await DoSomethingAsync(input);
} 
```

取消令牌引发了异常，但根据 Intellitrace，它在方法结束时被捕获。我尝试了许多不同的选项，包括抛出我自己的异常，但无论 continuewith 函数总是执行 IsComleted 或运行到完成代码。关于我做错了什么的任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:35:25.743

我认为这`RunAsync`与`ProcessAsync`.

> 取消令牌引发了异常，但根据 Intellitrace，它在方法结束时被捕获。

是的。任何`async`方法都会捕获自己的异常并将它们放在返回的`Task`. 这是设计使然。

> 不管 continuewith 函数总是执行 IsComleted 或运行到完成代码。

好吧，让我们再看一下代码：

```
var task = Task<bool>.Factory.StartNew(() =>
{                  
  subscriber.RunAsync((T)messagePacket.Body, cancellationToken);
  return true;
})
.ContinueWith( 
```

考虑传递给 的 lambda `StartNew`：它调用`RunAsync`，它忽略`Task`它返回的 ，然后它返回`true`（成功）。所以`Task`返回的`StartNew`人总是会成功返回。这就是为什么`ContinueWith`总是为成功完成的任务执行。

你真正想要的是`await`返回`Task`的`RunAsync`. 所以，像这样：

```
var task = Task.Run(async () =>
{                  
  await subscriber.RunAsync((T)messagePacket.Body, cancellationToken);
  return true;
})
.ContinueWith( 
```

您仍然忽略`RunAsync`（`bool`它返回被忽略）的返回值，但您并没有忽略它`Task`本身（包括取消/异常信息）。

PS我假设你没有向我们展示很多代码；使用`StartNew`/`Run`来启动一些异步工作并返回一个值是非常昂贵的。

PPS[使用`await Task.Delay`而不是`Thread.Sleep`](http://nitoprograms.blogspot.com/2012/02/async-and-await.html).

# iphone - 使用 Xcode 在循环中处理对象的正确方法

> ID：11642898
> 
> 赞同：1
> 
> 时间：2012-07-25T04:48:14.950
> 
> 标签：iphone, xcode, cocoa, ios5, xcode4.3

我想知道您能否让我知道以下两种情况，它们几乎相似，但对象又小又大。

**场景一：**

在以下代码中：

```
NSString *iAmAstring;
for(int i = 0; i < 100000;i++)
{
     NSLog(@"INT VALUE: %d", i);
     iAmAstring = [NSString stringWithFormat:@"%d", i];
     NSLog(@"STRING VALUE: %@", iAmAstring);
} 
```

有人告诉我，因为我打开了 ARC，所以对于我分配和初始化字符串指针的每个循环运行，执行上述大规模循环并在其中没有任何影响。因为有人告诉我它太小了，没关系，ARC可以处理它。但不要用更大的物体来做。我最初来自 C# 背景，我习惯于在循环结束时将我的字符串设置为 null，但是在这里你不能在循环结束时释放它，因为 ARC 会抱怨并且我被告知如果我将它设置为`nil`在循环结束时，我将为 ARC 创建更多工作，但我并没有真正做对，而是在创建僵尸代码。有人可以澄清他们会对他们正在分配的对象做什么，在循环结束时在 ARC 打开的情况下在一个内存大小很小的大型循环（最好是我使用的字符串）中初始化吗？

**场景二：**

与上面相同，但假设现在上面使用的 NSSTRING 现在是另一个尺寸很大的对象。在这里，我显然会在循环之前分配和初始化它，然后通过设置它在循环中使用它，但是我将如何在循环结束时再次对它做一些事情以释放它，所以再次打开 ARC？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T04:59:13.727

在 ARC 下，您可以使用`@autoreleasepool {}`块定义自动释放池。这些块创建新的自动释放对象池，并在块范围结束时耗尽它们。

```
NSString *iAmAstring;
for(int i = 0; i < 100000;i++)
{
    @autoreleasepool {
         NSLog(@"INT VALUE: %d", i);
        iAmAstring = [NSString stringWithFormat:@"%d", i];
        NSLog(@"STRING VALUE: %@", iAmAstring);
    }
} 
```

这将耗尽自动释放池并在循环的每次迭代中释放所有自动释放的对象。这对于细小的字符串是一件很浪费的事情，但对于较大的对象可能会有很大的帮助。

`release`关于自动释放如何工作的快速说明：它所做的只是在池耗尽时给你的对象一个额外的调用。默认池在事件循环中耗尽（即在您的方法退出后的某个时间）。当范围`@autoreleasepool`结束时，您手动创建的池将被耗尽。

> 我最初来自 C# 背景，我习惯于在循环结束时将我的字符串设置为 null

除非您稍后重新使用该变量，否则这会在您的程序中添加完全无用的代码行：C# 编译器已经足够聪明一段时间了，可以找出让您的对象可用于垃圾回收的最早点，因此分配`null`没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:38:58.790

我永远不明白的是为什么人们认为他们需要使用自动释放池而不是仅仅使用 alloc/init 来创建他们的对象并显式释放来处理它们。

有一些具有副作用的对象需要自动释放池（日期，我在看你），但在大多数情况下，做

```
{
    NSString *s = [[NSString alloc] initWithFormat:...];
    ....
    [s release];
} 
```

在您的循环中将比依赖自动释放更有效。

关于场景 2，抱歉， NSString 是不可变的 - 您不会更改它们的值。

# mysql - mysql加入，需要建议

> ID：11642900
> 
> 赞同：1
> 
> 时间：2012-07-25T04:48:18.697
> 
> 标签：mysql

我创建了一个带有外键值的 MySQL 表。我想使用 MySQL 连接来获取外键值。我有一个名为`employee`外键值的表`sex`，性别表包含男性和女性。这是我正在工作的简单连接查询：

```
SELECT * FROM sex JOIN employee ON employee.sex_id=sex.id 
```

但我想在这里使用连接查询，但似乎我遗漏了一些东西，请完成这个：

```
SELECT employee_id, first_name, last_name, sex_id FROM employee 
```

请告诉我如何`insert to`在单个查询中输入该表的关键字：

```
CREATE TABLE IF NOT EXISTS `employee` (
  `employee_id` int(11) NOT NULL AUTO_INCREMENT,
  `first_name` varchar(20) NOT NULL,
  `middle_name` varchar(20) DEFAULT NULL,
  `last_name` varchar(20) NOT NULL,
  `employee_employee_id` int(11) DEFAULT NULL,
  `address_id` int(11) DEFAULT NULL,
  `phone_id` int(11) DEFAULT NULL,
  `dob` date DEFAULT NULL,
  `maritial_id` int(11) NOT NULL,
  `sex_id` int(11) NOT NULL,
  PRIMARY KEY (`employee_id`),
  KEY `fk_employee_employee` (`employee_employee_id`),
  KEY `fk_employee_address1` (`address_id`),
  KEY `fk_employee_phone1` (`phone_id`),
  KEY `fk_employee_maritial1` (`maritial_id`),
  KEY `fk_employee_sex1` (`sex_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ; 
```

我在 MySQL 中没有好主意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:56:06.000

尝试类似：

```
SELECT e.employee_id, e.first_name, e.last_name, s.id
FROM employee AS e
JOIN sex AS s
ON e.sex_id = s.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:29:14.747

```
SELECT emp.employee_id, emp.first_name, emp.last_name, emp.sex_id, sx.sex_label 
FROM employee AS emp
JOIN sex AS sx
ON emp.sex_id = sx.id 
```

其中 sex_label 是`sex`表中包含男性或女性的字段名称。

# php - 如何使用 php 获取 xml 属性？

> ID：11642901
> 
> 赞同：0
> 
> 时间：2012-07-25T04:48:19.737
> 
> 标签：php, xml

我有 api 链接。当我调用此链接时，该链接将输出 xml 数据。

输出是

```
<note>
<something a="this is a" b="this is b" c="this is c">
<something a="this is a1" b="this is b1" c="this is c1">
<something a="this is a2" b="this is b2" c="this is c2">
<something a="this is a3" b="this is b3" c="this is c3">
</note> 
```

我想得到一些东西的属性，我如何用 php 编写。我是 php 的初学者。感谢我的朋友。

我想写如下所示。我知道这个php代码有问题，如何正确编写。

```
foreach($xml->something[0]->attributes() as $a => $b)
  {
  echo $a,'="',$b,"\"</br>";
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:54:03.927

你可以试试这个

```
$xml = simplexml_load_string($string);
foreach($xml->foo[0]->attributes() as $a => $b) {
    echo $a,'="',$b,"</br>";
} 
```

# list - Sencha 中的列表分页

> ID：11642903
> 
> 赞同：0
> 
> 时间：2012-07-25T04:48:42.670
> 
> 标签：list, sencha-touch-2

我在 Sencha touch2 中创建了一个列表。我需要向它添加分页。假设我需要在页面中显示 25 个项目，然后点击“下一步”按钮，必须显示接下来的 25 个项目。我相信 sencha touch 2 提供了分页功能，但我没有处理它。

我的代码是

```
 cls:'inboxqueuecls',
            xtype:'list',
            id:'queuelist',
            store:'QueueStore',

            plugins: [{
                xclass: 'Ext.plugin.ListPaging',
                autoPaging: false,
                clearOnPageLoad: true

            }],
            style:{
                'border-right':'0.01px  black',
                'background-color':'rgba(0,140,153,0.2)'
            },
            itemTpl:'{queueName}' 
```

我的商店是

```
 pageSize: 20,
            autoload: false,
 proxy:{
            type:'memory',
            reader:{
                type:'xml',
                record:'string',
                rootProperty:'QueuesNames',

            }
        } 
```

但“页面大小”似乎不起作用。有什么遗漏吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:03:00.717

正如 TDEBailleul 所说，pageSize 是 store 的属性，而不是代理的属性。

其次，内存代理不支持分页。MemoryProxy 在 Store.js 中有自己的处理。指定 json 或其他代理以在输出处获取分页 ajax 调用。另一种解决方案是 MemoryProxy 或来自其他祖先的子类。

# ffmpeg - 我想知道为什么 logcat 说“没有这样的文件或目录（2）”

> ID：11642907
> 
> 赞同：1
> 
> 时间：2012-07-25T04:49:14.730
> 
> 标签：ffmpeg

我想用 ffmpeg 在 Android 上播放音频。但是当我运行这个项目时，发生了错误

## 我应该怎么办？

java端

```
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import android.app.Activity;
import android.media.AudioFormat;
import android.media.AudioManager;
import android.media.AudioTrack;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.os.SystemClock;

public class FFmpegBasic extends Activity
{
    private AudioTrack track;
    private FileOutputStream os;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        createEngine();

        int bufSize = AudioTrack.getMinBufferSize(44100,
                                                  AudioFormat.CHANNEL_CONFIGURATION_STEREO, 
                                                  AudioFormat.ENCODING_PCM_16BIT);

        track = new AudioTrack(AudioManager.STREAM_MUSIC, 
                               44100, 
                               AudioFormat.CHANNEL_CONFIGURATION_STEREO, 
                               AudioFormat.ENCODING_PCM_16BIT, 
                               bufSize,
                               AudioTrack.MODE_STREAM);

        byte[] bytes = new byte[bufSize];

        try {
            os = new FileOutputStream("/sdcard/a.out",false);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        String result = "/mnt/sdcard/Wildlife.mp3";
        loadFile(result,bytes);

        try {
            os.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    void playSound(byte[] buf, int size) {  
        if(track.getPlayState()!=AudioTrack.PLAYSTATE_PLAYING)
            track.play();
        track.write(buf, 0, size);

        try {
            os.write(buf,0,size);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private native void createEngine();
    private native void loadFile(String file, byte[] array);

    /** Load jni .so on initialization*/ 
    static {
         System.loadLibrary("avutil"); 
         System.loadLibrary("avcore"); 
         System.loadLibrary("avcodec");
         System.loadLibrary("avformat");
         System.loadLibrary("avdevice");
         System.loadLibrary("swscale");
         System.loadLibrary("avfilter");
         System.loadLibrary("ffmpeg");
         System.loadLibrary("basicplayer");
    }
} 
```

* * *

c侧

* * *

```
#include <assert.h>
#include <jni.h>
#include <string.h>
#include <android/log.h>

#include "libavcodec/avcodec.h"
#include "libavformat/avformat.h"
#include "avcodec.h"
#include "avformat.h"

void Java_net_jbong_FFmpegBasic_FFmpegBasic_createEngine(JNIEnv* env, jclass clazz)
    {
        //avcodec_init();

        av_register_all();

    }

void Java_net_jbong_FFmpegBasic_FFmpegBasic_loadFile(JNIEnv* env, jobject obj, jstring file, jbyteArray array)
{

    AVFormatContext *gFormatCtx = NULL;
    AVCodecContext *gAudioCodecCtx = NULL;
    AVCodec *gAudioCodec = NULL;
    int gAudioStreamIdx = -1;
    char *gAudioBuffer = NULL;
    int i, outsize = 0;
    AVPacket packet;
    const char *str; 
    str = (*env)->GetStringUTFChars(env, file, NULL); 
    jclass cls = (*env)->GetObjectClass(env, obj); 
    jmethodID play = (*env)->GetMethodID(env, cls, "playSound", "([BI)V"); 

    if (gFormatCtx != NULL)
        return -1;
    if (av_open_input_file(&gFormatCtx,str,NULL,0,NULL)!=0)
        return -2;
    if (av_find_stream_info(gFormatCtx) < 0)
        return -3;

    for(i=0; i<gFormatCtx->nb_streams; i++)
    {
        if(gFormatCtx->streams[i]->codec->codec_type == AVMEDIA_TYPE_AUDIO)
        {
            gAudioStreamIdx = i;
            break;
        }
    }

    if (gAudioStreamIdx == -1)
        return -4;
    gAudioCodecCtx = gFormatCtx->streams[gAudioStreamIdx]->codec;
    gAudioCodec = avcodec_find_decoder(gAudioCodecCtx->codec_id);

    if (gAudioCodec == NULL)
        return -5;

    if (avcodec_open(gAudioCodecCtx, gAudioCodec)<0)
        return -6;

    gAudioBuffer = (char *)av_malloc(AVCODEC_MAX_AUDIO_FRAME_SIZE *2); 
    int decode = 0;

    while (av_read_frame(gFormatCtx, &packet) >= 0)
    {
     if (gFormatCtx-> streams[packet.stream_index]->codec->codec_type == AVMEDIA_TYPE_AUDIO)
     {
         int data_size = AVCODEC_MAX_AUDIO_FRAME_SIZE * 8; 
         gAudioBuffer = (char *)av_malloc(data_size);
         int size=packet.size;
         while(size > 0)
         {
          int len = avcodec_decode_audio3(gAudioCodecCtx,
            (short *) gAudioBuffer, &data_size, &packet);
          if (data_size > 0)
          {
                    jbyte *bytes = (*env)->GetByteArrayElements(env, array, NULL);
                       memcpy(bytes + decode, (int16_t *)gAudioBuffer, size);
                       (*env)->ReleaseByteArrayElements(env, array, bytes, 0);
                       (*env)->CallVoidMethod(env, obj, play, array, data_size); 
                       decode += size;
                       size -= len;

          }
         }
     }
     av_free_packet(&packet);
    }

    av_close_input_file(gFormatCtx);
    return 0;
} 
```

为什么我的 android logcat 向我显示此消息？“打开跟踪文件时出错：没有这样的文件或目录 (2)”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T14:51:59.207

你播放的网址是什么？如果支持，您可以检查您的 ffmpeg 协议吗？`ffmpeg -protocol`

# perl - perl 中的“更多”命令

> ID：11642909
> 
> 赞同：2
> 
> 时间：2012-07-24T09:05:12.187
> 
> 标签：perl

有没有办法`more`在 perl 脚本中使用该命令？有一个文件，我想打印它的内容，但由于有很多行，我想用`more`. 我尝试`more`输入反引号，但它没有用：

```
open(FILE,'/opt/myfile' ) or die("Could not open  file.");
`more /opt/myfile`; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T00:16:43.423

``more /opt/myfile``意味着将命令的输出捕获`more`到一个字符串中，该字符串被丢弃（您通常将输出存储在变量中或将其传递给函数）。当它的输出没有连接到终端时，`more`相当于`cat`，它没有做任何有用的事情。

要在 Perl 中运行子进程而不捕获其输出，请使用该[`system`](http://perldoc.perl.org/functions/system.html)函数。

```
system('more', '/opt/myfile'); 
```

请注意，您应该传递一个包含命令及其参数的列表，而不仅仅是一个字符串。如果您将单个字符串传递给`system`，它将被传递给 shell，该 shell 将扩展文件名中的任何特殊字符。例如，`system('more /opt/myfile')`可以工作，但`system('more /opt/$(rm -rf ~)')`会删除您的所有文件。如果您传递多个参数，则不涉及 shell：`system('more', '/opt/$(rm -rf ~)')`调用`more`那个奇怪命名的文件。

`+`如果文件名以or开头存在任何风险，请在文件名之前`-`传递`--`，以避免将其解释为选项。

而不是 call `more`，您应该检查`PAGER`环境变量，如果已定义，则调用它。`$PAGER`是事实上的标准寻呼机。如果变量未定义，在这个千年中，您应该默认为`less`（如果您偏执，则默认为`less`如果它存在，`more`否则默认为）。

```
my $pager = $ENV{PAGER};
if (!defined $pager || $pager eq '') {
    $pager = 'less';
}
system($pager, '--', '/opt/myfile'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T09:17:57.587

只需使用系统命令：

```
system('more thefile'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:25:23.503

我可能会打开一个通往寻呼机的管道，如下所示：

```
open(FILE, "/opt/myfile") or die("Could not open file.");
open(PIPE, "| more") or die("Could not open pipe"); 

while(<FILE>) {
  print PIPE;
}

close P;    
close FILE;' 
```

# iphone - 为心电图等图像制作动画

> ID：11642914
> 
> 赞同：0
> 
> 时间：2012-07-25T04:50:15.693
> 
> 标签：iphone, animation

我有一张图片![在此处输入图像描述](../Images/bd0db76ec01672b86c182cca74b69a1e.png)

我想连续动画这个图像，即从屏幕的左端进入并在右端退出，因为我正在使用这个代码..

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:15];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.view cache:NO];
cardioImage1.frame = CGRectMake(330, 0, 320, 100);
[UIView commitAnimations]; 
```

此代码仅对图像进行一次动画处理。

我想让它在某个时间范围内连续动画。我能做些什么...请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:54:52.790

您需要为此属性设置一些值： `setAnimationRepeatCount`

也许`FLT_MAX`用于无限循环

# php - 与mysql和路径交叉检查

> ID：11642915
> 
> 赞同：0
> 
> 时间：2012-07-25T04:50:19.070
> 
> 标签：php, mysql, linux, bash, centos

我正在尝试交叉检查我拥有的文件名是否在我拥有的数据库列表中。如果不是，则将其删除。我遗漏了一些关键点，请帮助我学习这一点，谢谢。

这是我的代码：

```
#!/bin/bash
IFSTEMP=$IFS
IFS=\^

     rarFile=`find -name '*.mp4'`

       for r in $rarFile
        do
    filename=$(basename "$r")

    echo "$filename"

    myvariable=$(echo "SELECT nctid FROM $SQL_DATABASE.$SQL_TABLE WHERE nctid=$filname" | mysql -h$SQL_HOST -u$SQL_USERNAME -p$SQL_PASSWORD -N  $SQL_DATABASE)

    if(!$myvariable) {
    rm -rf $r
    }
    done

IFS="$IFSTEMP" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:47:17.073

IFS 是 shell 用来分割参数的分隔符，不建议改变它，这里显然没有理由改变它。默认为“\t\n”

看看区别：

```
(x='a b^c';IFS=\ $'\t\n';for s in $x;do echo $s;done)
(x='a b^c';IFS=^;for s in $x;do echo $s;done) 
```

更多信息 ：

```
man bash
/IFS 
```

# spring - 添加spring AOP(Aspect Oriented Programming)日志

> ID：11642917
> 
> 赞同：0
> 
> 时间：2012-07-25T04:50:26.413
> 
> 标签：spring, log4j, aop

我在我的 Web 应用程序中使用了 spring aop（面向方面​​的编程）。现在我想将日志添加到连接点出现的地方。如何为此任务配置我的 log4j xml。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:30:50.003

为此，我创建了一个 Aspect 记录器。这适用于不同的层，如控制器、具有不同日志记录级别的服务 DAO。

```
@Aspect
public class LoggerAspect {

    private final static Logger LOGGER = LoggerFactory
            .getLogger(LoggerAspect.class);

    @Autowired
    private RequestInfo requestInfo;

    @Around("@annotation(org.springframework.web.bind.annotation.RequestMapping)")
    public Object logWebRequest(ProceedingJoinPoint pjp) throws Throwable {
        Object obj;
        Long startTime = System.currentTimeMillis();
        if (SecurityContextHolder.getContext().getAuthentication() != null) {
            Object user = SecurityContextHolder.getContext()
                    .getAuthentication().getPrincipal();
            LOGGER.info("User: " + user);
        }
        LOGGER.info("Controller UUID: " + requestInfo.getRequestUUID());
        LOGGER.info("Controller URL: " + requestInfo.getRequestMethod());
        LOGGER.info("Controller Method: " + pjp.getSignature());
        logArguments(pjp);
        try {
            obj = pjp.proceed();
        } catch (Exception e) {
            LOGGER.error("Controller:" + e.getMessage());
            throw e;
        }
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("Returns: " + obj);
            LOGGER.debug("Controller Response Time: "
                    + (System.currentTimeMillis() - startTime) + " ms");
        }
        return obj;
    }

    @Around("execution(public * com.common.service..*.*(..))")
    public Object logCommonServiceRequest(ProceedingJoinPoint pjp)
            throws Throwable {
        return logServiceRequest(pjp);
    }

    @Around("execution(public * com.modules.*.service..*.*(..))")
    public Object logModulesServiceRequest(ProceedingJoinPoint pjp)
            throws Throwable {
        return logServiceRequest(pjp);
    }

    private Object logServiceRequest(ProceedingJoinPoint pjp) throws Throwable,
            Exception {
        Object obj;
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("Service: " + pjp.getTarget().getClass() + " -- "
                    + pjp.getSignature());
            logArguments(pjp);
        }
        try {
            obj = pjp.proceed();
        } catch (Exception e) {
            LOGGER.error("Service Exception:" + e.getMessage());
            throw e;
        }
        if (LOGGER.isDebugEnabled())
            LOGGER.debug("Service Returns: " + obj);
        return obj;
    }

    @Around("execution(public * com.common.dao..*.*(..))")
    public Object logCommonDAORequest(ProceedingJoinPoint pjp) throws Throwable {
        return logDAORequest(pjp);
    }

    @Around("execution(public * com.modules.*.dao..*.*(..))")
    public Object logModulesDAORequest(ProceedingJoinPoint pjp)
            throws Throwable {
        return logDAORequest(pjp);
    }

    private Object logDAORequest(ProceedingJoinPoint pjp) throws Throwable,
            Exception {
        Object obj;
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("DAO: " + pjp.getTarget().getClass() + " -- "
                    + pjp.getSignature());
            logArguments(pjp);
        }
        try {
            obj = pjp.proceed();
        } catch (Exception e) {
            LOGGER.error("DAO Exception:" + e.getMessage());
            throw e;
        }
        if (LOGGER.isDebugEnabled())
            LOGGER.debug("DAO Returns: " + obj);
        return obj;
    }

    private void logArguments(ProceedingJoinPoint pjp) {
        StringBuffer argLog = new StringBuffer();
        for (Object arg : pjp.getArgs()) {
            argLog.append(arg);
            argLog.append(",");
        }
        LOGGER.info("Args: " + argLog);
    }

}

<aop:aspectj-autoproxy proxy-target-class="true">
    <aop:include name="loggerAspect" />
</aop:aspectj-autoproxy>

<bean id="loggerAspect" class="com.service.LoggerAspect">
</bean> 
```

# gdlib - 如何在 imagettftext() 中使文本居中对齐

> ID：11642923
> 
> 赞同：3
> 
> 时间：2012-07-25T04:50:46.000
> 
> 标签：gdlib, imagettftext

我无法让这个工作。

见下图（这是我在 div 标签中显示的）：

![在此处输入图像描述](../Images/4a456c0d1b802a5ec0f9fd2af38289d8.png)

html代码是

```
<p>t-shirt is the giveaway</p> 
```

如何使用 imagettftext() 实现图像中显示的相同内容

# javascript - 停止/关闭由 navigator.mediaDevices.getUserMedia 打开的网络摄像头流

> ID：11642926
> 
> 赞同：198
> 
> 时间：2012-07-25T04:51:11.187
> 
> 标签：javascript, html, html5-video, webrtc, getusermedia

我使用以下 JavaScript 代码打开了一个网络摄像头：

```
const stream = await navigator.mediaDevices.getUserMedia({ /* ... */ }); 
```

是否有任何 JavaScript 代码可以停止或关闭网络摄像头？谢谢大家。

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2012-09-15T10:54:38.753

**编辑**

由于最初发布了此答案，因此浏览器 API 已更改。 `.stop()`在传递给回调的流上不再可用。开发人员必须访问构成流（音频或视频）的轨道并单独停止它们。

更多信息在这里：[https ://developers.google.com/web/updates/2015/07/mediastream-deprecations?hl=en#stop-ended-and-active](https://developers.google.com/web/updates/2015/07/mediastream-deprecations?hl=en#stop-ended-and-active)

示例（来自上面的链接）：

```
stream.getTracks().forEach(function(track) {
  track.stop();
});
```

浏览器支持可能不同。

**原始答案**

`navigator.getUserMedia`在成功回调中为您提供一个流，您可以调用`.stop()`该流来停止录制（至少在 Chrome 中，似乎 FF 不喜欢它）

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-07-25T09:42:21.797

使用以下任何功能：

```
// stop both mic and camera
function stopBothVideoAndAudio(stream) {
    stream.getTracks().forEach(function(track) {
        if (track.readyState == 'live') {
            track.stop();
        }
    });
}

// stop only camera
function stopVideoOnly(stream) {
    stream.getTracks().forEach(function(track) {
        if (track.readyState == 'live' && track.kind === 'video') {
            track.stop();
        }
    });
}

// stop only mic
function stopAudioOnly(stream) {
    stream.getTracks().forEach(function(track) {
        if (track.readyState == 'live' && track.kind === 'audio') {
            track.stop();
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2017-11-17T19:00:14.677

请勿使用`stream.stop()`，已弃用

[媒体流弃用](https://developers.google.com/web/updates/2015/07/mediastream-deprecations?hl=en#stop-ended-and-active)

采用`stream.getTracks().forEach(track => track.stop())`

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-02-21T12:15:28.537

FF、Chrome 和 Opera 现在已经开始作为标准暴露`getUserMedia`（`navigator.mediaDevices`可能会改变 :)

[在线演示](https://jsfiddle.net/sasivarunan/2xLbv7n9/)

```
navigator.mediaDevices.getUserMedia({audio:true,video:true})
    .then(stream => {
        window.localStream = stream;
    })
    .catch( (err) =>{
        console.log(err);
    });
// later you can do below
// stop both video and audio
localStream.getTracks().forEach( (track) => {
track.stop();
});
// stop only audio
localStream.getAudioTracks()[0].stop();
// stop only video
localStream.getVideoTracks()[0].stop(); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-02-04T11:06:19.430

假设我们在视频标签中有流式传输，并且 id 是视频 -`<video id="video"></video>`那么我们应该有以下代码 -

```
var videoEl = document.getElementById('video');
// now get the steam 
stream = videoEl.srcObject;
// now get all tracks
tracks = stream.getTracks();
// now close each track by having forEach loop
tracks.forEach(function(track) {
   // stopping every track
   track.stop();
});
// assign null to srcObject of video
videoEl.srcObject = null; 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-10-08T18:20:48.217

使用不同的浏览器启动网络摄像头视频

歌剧 12

```
window.navigator.getUserMedia(param, function(stream) {
                            video.src =window.URL.createObjectURL(stream);
                        }, videoError ); 
```

对于 Firefox Nightly 18.0

```
window.navigator.mozGetUserMedia(param, function(stream) {
                            video.mozSrcObject = stream;
                        }, videoError ); 
```

适用于 Chrome 22

```
window.navigator.webkitGetUserMedia(param, function(stream) {
                            video.src =window.webkitURL.createObjectURL(stream);
                        },  videoError ); 
```

使用不同的浏览器停止网络摄像头视频

歌剧 12

```
video.pause();
video.src=null; 
```

对于 Firefox Nightly 18.0

```
video.pause();
video.mozSrcObject=null; 
```

适用于 Chrome 22

```
video.pause();
video.src=""; 
```

有了这个，网络摄像头灯每次都会熄灭......

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-02-21T07:16:12.853

试试下面的方法：

```
var mediaStream = null;
    navigator.getUserMedia(
        {
            audio: true,
            video: true
        },
        function (stream) {
            mediaStream = stream;
            mediaStream.stop = function () {
                this.getAudioTracks().forEach(function (track) {
                    track.stop();
                });
                this.getVideoTracks().forEach(function (track) { //in case... :)
                    track.stop();
                });
            };
            /*
             * Rest of your code.....
             * */
        });

    /*
    * somewhere insdie your code you call
    * */
    mediaStream.stop(); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-04-01T18:58:49.143

您可以使用成功处理程序中返回的流对象直接结束流到 getUserMedia。例如

```
localMediaStream.stop() 
```

`video.src=""`或者`null`只是从视频标签中删除源。它不会释放硬件。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-03-16T12:53:29.437

由于您需要轨道来关闭流媒体，并且您需要`stream`对象才能到达轨道，所以我在上面 Muaz Khan 的回答的帮助下使用的代码如下：

```
if (navigator.getUserMedia) {
    navigator.getUserMedia(constraints, function (stream) {
        videoEl.src = stream;
        videoEl.play();
        document.getElementById('close').addEventListener('click', function () {
            stopStream(stream);
        });
    }, errBack);

function stopStream(stream) {
console.log('stop called');
stream.getVideoTracks().forEach(function (track) {
    track.stop();
}); 
```

当然，这将关闭所有活动的视频轨道。如果你有多个，你应该相应地选择。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-06-03T08:08:41.787

如果`.stop()`不推荐使用，那么我认为我们不应该像@MuazKhan 剂量那样重新添加它。这是为什么事物被弃用并且不应再使用的原因。只需创建一个辅助函数......这是一个更多的 es6 版本

```
function stopStream (stream) {
    for (let track of stream.getTracks()) { 
        track.stop()
    }
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-05-15T11:57:38.133

您需要停止所有曲目（来自网络摄像头、麦克风）：

```
localStream.getTracks().forEach(track => track.stop()); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-02-24T08:48:46.343

## 启动和停止网络摄像头，（更新 2020 React es6 ）

**启动网络摄像头**

```
stopWebCamera =()=>

       //Start Web Came
      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        //use WebCam
        navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
          this.localStream = stream;
          this.video.srcObject = stream;
          this.video.play();
        });
      }
 } 
```

**一般停止网络摄像头或视频播放**

```
stopVideo =()=>
{
        this.video.pause();
        this.video.src = "";
        this.video.srcObject = null;

         // As per new API stop all streams
        if (this.localStream)
          this.localStream.getTracks().forEach(track => track.stop());
} 
```

**停止网络摄像头功能甚至适用于视频流：**

```
 this.video.src = this.state.videoToTest;
  this.video.play(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-10T11:01:20.170

通过 http 连接时，在流上使用 .stop() 可以在 chrome 上工作。使用 ssl (https) 时它不起作用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-15T10:05:17.247

请检查：[https ://jsfiddle.net/wazb1jks/3/](https://jsfiddle.net/wazb1jks/3/)

```
navigator.getUserMedia(mediaConstraints, function(stream) {
    window.streamReference = stream;
}, onMediaError);
```

停止录制

```
function stopStream() {
    if (!window.streamReference) return;

    window.streamReference.getAudioTracks().forEach(function(track) {
        track.stop();
    });

    window.streamReference.getVideoTracks().forEach(function(track) {
        track.stop();
    });

    window.streamReference = null;
}
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-05-17T10:27:13.953

以下代码对我有用：

```
public vidOff() {

      let stream = this.video.nativeElement.srcObject;
      let tracks = stream.getTracks();

      tracks.forEach(function (track) {
          track.stop();
      });

      this.video.nativeElement.srcObject = null;
      this.video.nativeElement.stop();
  } 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2016-07-09T12:27:12.707

有流形式successHandle的参考

```
var streamRef;

var handleVideo = function (stream) {
    streamRef = stream;
}

//this will stop video and audio both track
streamRef.getTracks().map(function (val) {
    val.stop();
}); 
```

# javascript - Phonegap Build：通知/弹出窗口在android中不起作用？

> ID：11642928
> 
> 赞同：0
> 
> 时间：2012-07-25T04:51:26.537
> 
> 标签：javascript, android, ios, cordova

这是我从网络上获得的用于实现通知的代码部分，当我在浏览器测试中它工作时，但我不知道为什么当我在运行 android 的手机中使用相同的代码时它不工作。该应用程序也无法在 iOS 上运行。

```
navigator.notification.alert(
    'Please enter correct username and password',  // message
             null,         // callback
    'Information',            // title
        'Okay'                  // buttonName
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:57:59.680

只需警报（消息）；但不需要长长的文本行。

# algorithm - 新闻源内容排名算法：图论、亲和力和机器学习

> ID：11642930
> 
> 赞同：2
> 
> 时间：2012-07-25T04:51:30.940
> 
> 标签：algorithm, graph, machine-learning

我正在寻找一种算法来复制或改进 facebook-esque 内容排名算法。为此，应通过亲和力、时间衰减和内容类型等参数为每个用户定制供稿。为了实现 facebook 风格的个性化内容提要的算法，有哪些好的资源/启动板可供参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:22:49.300

这不是一个微不足道的项目。也就是说，[bishop](http://research.microsoft.com/en-us/um/people/cmbishop/prml/)是我首选的机器学习书籍，而[stanford 的书籍](http://nlp.stanford.edu/IR-book/)同样适用于信息检索。

# ember.js - 如何将 App.Router 拆分为几个独立的块？

> ID：11642931
> 
> 赞同：2
> 
> 时间：2012-07-25T04:51:32.117
> 
> 标签：ember.js, ember-old-router

我的 App.Router 变成了一个巨大的难以管理的单块代码

```
App.Router = Em.Router.extend({

    // 100500 pages of horrible COPY-PASTE

    gotoBlabla: Ember.Route.transitionTo('blabla'),
    blabla: Em.Route.extend({
        route '/blabla',
        connectOutlets: function (router, context) {
            router.get('applicationController').connectOutlet('blabla');
    ...
    })
    ...
    ... 
```

有没有办法以不那么冗长的方式声明路由并且没有复制粘贴？如何将路由器声明拆分为更小的独立部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:24:31.967

是的，绝对有。在我们的应用程序中，我们将每个顶级路由（松散地使用的术语）在其自己的文件中作为一个单独的类。我们有一个名为“states”的目录，这些文件位于其中。我发现这使它更具可读性和更容易测试。

例如：

```
// file: states/blog_posts.js

App.BlogPostsState = Ember.Route.extend({
   route: '/posts',
   /* .... */
}); 
```

```
// file: states/search_results.js

App.SearchResultsState = Ember.Route.extend({
   route: '/search',
   /* .... */
}); 
```

```
// file: states/router.js

App.Router = Em.Router.extend({
   blogPosts: App.BlogPostsState.extend(),
   searchResults: App.SearchResultsState.extend(),
   /* .... */
}); 
```

* * *

我不清楚一遍又一遍地复制粘贴什么代码。通常，如果我发现发生这种情况，我会尝试将该代码隔离到一个 mixin 中，但这并不总是那么容易，尤其是在路由器/状态图中。

一件事可能是相关的，我不确定您是否知道，但事件将沿着状态层次结构传播，因此每个叶状态不一定要重新实现相同的事件处理。

在此示例中，名为“showAlpha”的“动作”或“事件处理程序”在所有三个状态/路由位置（alpha、beta、delta）中都有效。这消除了多次重新实现同一事物的需要。

```
App.Router = Ember.Router.extend({
    showAlpha: Ember.State.transitionTo('alpha'),

    alpha: Em.Route.extend({
        route: '/alpha'
    }),
    beta: EM.Route.extend({
        route: '/beta'
    }),
    delta: Ember.Route.extend({
        route: '/delta'
    })
}); 
```

我希望这会有所帮助。我不确定这是否涵盖了您一遍又一遍地复制粘贴的代码。

# ruby-on-rails - 如何从 gem 加载资产？

> ID：11642932
> 
> 赞同：1
> 
> 时间：2012-07-25T04:51:45.727
> 
> 标签：ruby-on-rails, redmine, ruby-on-rails-2, redmine-plugins, ruby-1.8.7

谁能帮我？我不知道如何在运行时将资产（js、样式表、图像）和视图从我的 gem 添加到 rails 环境。每当我尝试访问我的 gem 的 routes.rb 指示的 url 路径时，此结果都会导致模板未找到错误。

宝石包含一些 redmine 插件。我们正在做的是将所有应用程序的插件变成宝石。

感谢任何可以帮助我的人！

```
Environment:
-> Ruby 1.8.7
-> Rails 2.2.2
-> Redmine 0.8 
```

# php - 如何在 services.yml 文件中添加多个事件作为 Doctrine symfony 中的事件监听器

> ID：11642934
> 
> 赞同：11
> 
> 时间：2012-07-25T04:51:51.500
> 
> 标签：php, symfony, doctrine

我正在使用这个：

```
my.listener:
        class: Acme\SearchBundle\Listener\SearchIndexer
        tags:
            - { name: doctrine.event_listener, event: postPersist } 
```

现在，如果我尝试监听两个这样的事件：

```
- { name: doctrine.event_listener, event: postPersist, preUpdate } 
```

它给出了一个错误。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-25T05:11:00.413

我认为你可以这样做：

```
my.listener:
        class: Acme\SearchBundle\Listener\SearchIndexer
        tags:
            - { name: doctrine.event_listener, event: postPersist }
            - { name: doctrine.event_listener, event: preUpdate } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T05:09:45.010

您需要事件订阅者而不是事件侦听器。

您将服务标签更改为`doctrine.event_subscriber`，并且您的类应该实现`Doctrine\Common\EventSubscriber`. 您需要定义 a`getSubscribedEvents`以满足`EventSubscriber`which 返回您要订阅的事件数组。

前任

```
<?php

namespace Company\YourBundle\Listener;

use Doctrine\Common\EventArgs;
use Doctrine\Common\EventSubscriber;

class YourListener implements EventSubscriber
{
    public function getSubscribedEvents()
    {
        return array('prePersist', 'onFlush');
    }

    public function prePersist(EventArgs $args)
    {

    }

    public function onFlush(EventArgs $args)
    {

    }
} 
```

# c++ - 使用 C++ 的欧拉九号项目

> ID：11642935
> 
> 赞同：1
> 
> 时间：2012-07-25T04:51:57.083
> 
> 标签：c++

我写了这个，但是在运行它时，控制台只是坐在“正在运行......”并且不会真正做任何事情，至少我可以看到。我在这里有点不知所措，因为我想不出别的办法。

```
#include <iostream>
#include <cmath>
#include <cstdlib>

int main(void) {
    int count = 0;
    do {

        int a = 1;
        int b = 2;
        int c = 3;
        int total;

        for (a=1;a<b;a++) {
            for (b=2;b<c;b++) {
                for (c=3;c<=1000;c++) {
                    total = a+b+c;

                    if (total == 1000 && a*a + b*b == c*c) {
                        std::cout << a << ", " << b << ", " << c;

                    }
                }
            }
        }

        count++;

    } while(count < 1000);  
    return 0;
    std::cin.get();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:08:20.610

您可能看不到任何输出，因为您的终端是行缓冲的，并且您从不写换行符或刷新流。要解决此问题，您可以添加`std::endl`到输出行：

```
std::cout << a << ", " << b << ", " << c << std::endl; 
```

这样一来，您应该会在找到所有三元组后立即看到它们，但程序仍然需要很长时间才能完成。甚至可能需要很长时间才能找到*任何*结果。您可以通过避免一些嵌套循环来加速程序。

# javascript - textarea 的基于单词的自动完成功能（带或不带 Mootools）

> ID：11642942
> 
> 赞同：0
> 
> 时间：2012-07-25T04:52:38.793
> 
> 标签：javascript, autocomplete, textarea, mootools

我希望为 textarea 提供自动完成功能，但不希望为完整内容（文本）提供自动完成功能。它应该在您打字时适用于每个单词。

我在文本中间添加了字母“aut”，它应该为我提供“自动完成”（来自预定义/外部单词列表）。

这样的事情存在吗？

由于当地法规，我仅限于 Mootools 作为框架，不允许使用 jQuery，但任何纯 JS 都可以。

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:22:49.387

你看过[MooTools Forge](http://mootools.net/forge/)吗？在那里你会发现很多基于 MooTools 的解决方案。

您正在寻找的那个叫做[Meio.Autocomplete](http://mootools.net/forge/p/meio_autocomplete)，但也有[一些其他](http://ajaxdump.com/2010/08/11/10-cool-auto-complete-scripts-using-ajaxjquerymootoolsprototype/)的方法可以解决这个问题。

# scala - 在 SBT 中将 unmanagedJars 添加到 proguardLibraryJars

> ID：11642945
> 
> 赞同：1
> 
> 时间：2012-07-25T04:52:53.707
> 
> 标签：scala, classpath, sbt, proguard, xsbt-proguard-plugin

我正在尝试将 sbt 与以下插件[https://github.com/siasia/xsbt-proguard-plugin](https://github.com/siasia/xsbt-proguard-plugin)一起使用。到目前为止，我对插件没有任何问题，除了 proguard 将所有非托管 jar 放入最终的 min.jar 文件中（导致多个 jar 冲突的问题）。Proguard 具有 proguardLibraryJars 标志，允许您指定要排除的 proguard jar

本质上，我想使用插件将 TaskKey unamangedJars 中的所有 jar 添加到 proguardLibraryJars，即做这样的事情

```
lazy val proguard = proguardSettings ++ Seq(
    proguardOptions := Seq(
      keepMain("com.test.FacebookPostScheduler"),
      keepMain("org.postgresql.Driver")
    ),
    proguardLibraryJars <++= unmanagedClasspath

  ) 
```

问题是上面显然没有在这一行编译

```
proguardLibraryJars <++= unmanagedClasspath 
```

与

```
No implicit for Append.Values[Seq[java.io.File], sbt.Keys.Classpath] found 
```

错误。

您将如何使用 Build.scala（不是 build.sbt）使用最新的 SBT（0.11.3-2）编写我尝试执行的操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:37:04.033

我有一个 SBT 插件的公共存储库，它设法将 jar 传递给 proguard。它不使用 proguard 插件，但代码可能会帮助您了解如何收集依赖项。

[https://github.com/tlazaro/xsbt-plugin-deployer/blob/master/src/main/scala/Deployer.scala](https://github.com/tlazaro/xsbt-plugin-deployer/blob/master/src/main/scala/Deployer.scala)

寻找：

```
private def getDepsJars(project: ProjectRef, bs: BuildStructure) = forAllProjects(project, bs) {p =>
    artifactPath in Compile in packageBin in p get bs.data
  } 
```

这可能会给你一个开始的方法。它收集了您通常想要的每个需要的 jar，而不仅仅是非托管的。

或者，您可以只使用此插件并进行协作。代码有点草率，还没有打算发布。该插件还做了一些其他简洁的事情，比如使用 pack200 将所有内容压缩到一个 jar 中，并有一个自定义的 ClassLoader 可以在运行时从那里加载压缩的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T09:03:35.137

[adamw/xsbt-proguard-plugin](https://github.com/adamw/xsbt-proguard-plugin)，它是 siasia/xsbt-proguard-plugin 的继任者似乎有非常好的选择：

> 默认情况下，Proguard 将被指示包含除 Java 运行时中的类以外的所有内容。要将其他库视为外部库（即将它们添加到`-libraryjars`传递给 Proguard 的列表中），请执行以下操作。下面是如何从库依赖项中选择名为“httpclient”的模块的示例：
> 
> ```
> proguardLibraryJars <++= (update) map (_.select(module = moduleFilter(name = "httpclient"))) 
> ```

# iphone - 如何判断两个物体是否相交？

> ID：11642947
> 
> 赞同：9
> 
> 时间：2012-07-25T04:53:15.200
> 
> 标签：iphone, objective-c

我使用以下代码创建对象并为其设置动画

```
//For creating two imageview 
UIImageView *bbl1Obj=[[UIImageView alloc]initWithFrame:CGRectMake(34,77,70, 70)];
bbl1Obj.image=[UIImage imageNamed:@"bubble1.png"];
[self.view addSubview:bbl1Obj];
UIImageView *bbl2Obj=[[UIImageView alloc]initWithFrame:CGRectMake(224,77,70, 70)];
bbl2Obj.image=[UIImage imageNamed:@"bubble2.png"];
[self.view addSubview:bbl2Obj];
// for animating the objects
[UIImageView beginAnimations:nil context:NULL];
[UIImageView setAnimationDuration:3];
[bbl1Obj setFrame:CGRectMake(224,77,70, 70)];
[UIImageView commitAnimations];

[UIImageView beginAnimations:nil context:NULL];
[UIImageView setAnimationDuration:3];
[bbl2Obj setFrame:CGRectMake(34,77,70, 70)];
[UIImageView commitAnimations]; 
```

当两个图像相互交叉时，我想显示一个图像。但我不知道如何在动画时找到图像是否与其他图像相交。谁能告诉我如何在制作动画时找到两个图像是否相交。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T05:50:22.837

这是我通常用来测试交叉点的方法。但是，我不确定它是否会在动画中间起作用。

```
if(CGRectIntersectsRect(bbl1Obj.frame, bbl2Obj.frame)) {

    //They are intersecting
} 
```

它在当前动画时无法测试交叉点，请尝试使用`presentationLayer`视图层的属性。这`presentationLayer`是取自[CALayer 类参考的内容：](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)

> **表示层**
> 
> 返回包含当前事务开始时所有属性的图层副本，并应用任何活动动画。

考虑到这一点，您现在可以试试这个：

```
CALayer *bbl1ObjPresentationLayer = (CALayer*)[bb1Obj.layer presentationLayer];
CALayer *bbl2ObjPresentationLayer = (CALayer*)[bb2Obj.layer presentationLayer];

if(CGRectIntersectsRect(bbl1ObjPresentationLayer.frame, bbl2ObjPresentationLayer.frame)) {

    //They are intersecting
} 
```

所以如果第一种方法不起作用，第二种方法肯定会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:16:13.420

使用 CGRectContainsPoint 使对象相交。

```
 if(CGRectContainsPoint([bbl1Obj bounds], CGPointMake(bbl2Obj.frame.origin.x, bbl2Obj.frame.origin.y)))
    {
NSLog(@"intersect");
    } 
```

# ruby - 为什么红宝石常数是可变的？变量之间有什么区别？

> ID：11642948
> 
> 赞同：2
> 
> 时间：2012-07-25T04:53:19.667
> 
> 标签：ruby, constants

我正在学习 ruby​​，我了解到 ruby​​ 常量必须以大写字母开头（例如 Myconstant）。这将使它成为一个常数，但它的值是可变的！

如果常量的值是可变的，那么为什么我们需要常量，那么变量之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:57:55.160

Ruby 让你在脚下开枪（如果你真的想的话）。但是，至少在这种情况下，它会警告您。

```
ONE = 'one'
ONE = 'two' # !> already initialized constant ONE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T04:58:51.747

一些原因：

1) 公约。仅从标识符的名称就很容易看出它不应该更改。

2）技术。它（可能；比我可能会回答的知识渊博的人）使解释器更简单。

3) 活力有时是有帮助的；例如，在测试中，可以出于测试目的重新定义事物，而不必对所有内容进行存根/代理……</p>

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T06:06:07.940

常量具有词法作用域，而方法具有动态作用域：

```
class Super
  Constant = "Super::Constant"

  def method
    'Super#method'
  end

  def get_constant
    Constant
  end

  def get_method
    method
  end
end

class Sub < Super
  Constant = 'Sub::Constant'

  def method
    'Sub#method'
  end
end

Super.new.get_constant # => "Super::Constant"
Sub.new.get_constant   # => "Super::Constant"

Super.new.get_method # => "Super#method"
Sub.new.get_method   # => "Sub#method" 
```

至于变量，它们是无法从外部访问的。您打算如何访问这些？

```
class Object
  Constant      = 'constant'  
  local_var     = 'local var'
  @instance_var = 'instance var'
  @@class_var   = 'class var' # btw, never use these
end 
```

*此外，你可以*在 Ruby 中做很多事情，但是为了你自己的理智，要小心。我建议不要更改常量，这可能会使您的团队感到沮丧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T11:29:57.677

我有时会使用此功能来测试没有其他必要参数的代码，例如，当我从难以提供参数的编辑器中运行脚本时。

```
#ARGV[0] = "c:/test.txt"  #in case of testing i remove the first remark sign 
```

# iphone - UITextField 文本更改回调

> ID：11642957
> 
> 赞同：3
> 
> 时间：2012-07-25T04:54:26.940
> 
> 标签：iphone, objective-c, ios, xcode, uitextfield

我有一个名为 textFieldInput 的 UITextField 和一些按钮。不知何故，我禁用了输入视图，这样如果有人在 texField 中点击，则不会显示键盘。当以编程方式按下按钮时，我正在添加文本。我想抓住这个变化。我想在 textField 的文本发生变化时调用一个函数。我怎样才能做到这一点？

我尝试通过添加以下功能

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)replacementStr {
// some my code
return YES;
} 
```

但这不起作用。这仅在我点击 textField 时调用。

我还尝试在我的 viewDidLoad 函数中添加以下内容

```
[textFieldInput addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged]; 
```

这也行不通。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T05:07:41.487

注册通知。

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                          selector:@selector(textChanged:)
                                              name:UITextFieldTextDidChangeNotification
                                            object:YOUR_TEXT_FIELD]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:10:40.613

```
shouldChangeCharactersInRange: 
```

这仅在您使用实现此方法的控制器设置其委托时才有效。另一种方法是：

添加这些行`viewDidLod`

```
NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];

    [nc addObserver:self
           selector:@selector (handle_TextFieldTextChanged:)
               UITextFieldTextDidChangeNotification
             object: textFieldInput]; 
```

并实施`handle_TextFieldTextChanged:`

```
- (void) handle_TextFieldTextChanged:(id)notification {

    // write your logic here.
} 
```

# credit-card - Authorize.net CCV 代码

> ID：11642959
> 
> 赞同：0
> 
> 时间：2012-07-25T04:54:27.887
> 
> 标签：credit-card, verification, authorize.net

我实施了 CIM（客户信息管理器），客户使用信用卡信息创建他们的个人资料。我（商家）使用 CIM 中的标准付款方式（通过按商家页面上的“立即付款”按钮）获得付款。现在令人困惑的是，当我按下“立即付款”按钮时，有些付款交易会出错，即“CCV 无效”。

我访问了论坛，发现客户无法在客户资料中保存他的 CCV。我的问题是，在 createCustomerProfileRequest 时，CCV 位于我们作为输入提供的参数列表中。如果 CCV 没有保存在客户资料中，那么为什么它在客户资料输入参数中？（编辑：记住，客户资料不在我的本地数据库中，它在 authorize.net 上）我该如何处理这个问题“CCV 无效”在进行交易时？我应该ping客户“请给我您的CCV代码，因为它没有被authorize.net客户资料保存，我需要完成交易”？

我会感谢你的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:54:13.167

创建 CIM 配置文件时验证 CVV。之后，它将被丢弃，因为以后通过 CIM 购买不再需要它。如果您在使用 CIM 付款时收到 CVV 错误，则说明您进行了错误的 API 调用。

# javascript - Ajax/Js 图片上传器：创建重复的预览图片

> ID：11642961
> 
> 赞同：4
> 
> 时间：2012-07-25T04:54:31.933
> 
> 标签：javascript, jquery, html, css, ajax

我正在使用来自此[SITE](http://dondedeportes.es/uploader-previewer/)的 Ajax 图像上传器。我目前实现了创建重复的预览图像：一个出现在输入字段下，另一个将出现在页面中的其他位置，例如“这就是你选择的”。问题是，如果用户选择一个文件，该函数将显示图像，但如果用户改变主意并选择新图像，`yourCustomPreview`则将显示选择的新图像和旧图像。

有没有办法只显示最新的预览图片而不显示旧的预览图片？如果不清楚，请在[此处查看源文件](http://dondedeportes.es/uploaderPreviewer.zip)

**uploaderPreviewer.js- 原始函数**

```
<script>
function displayImage($previewDiv, imageUrl) {

    var imageFilename = imageUrl.substr(imageUrl.lastIndexOf('/') + 1);

    $previewDiv
        .removeClass('loading')
        .addClass('imageLoaded')
        .find('img')
        .attr('src', imageUrl)
        .show();
    $previewDiv
        .parents('table:first')
        .find('input:hidden.currentUploadedFilename')
        .val(imageFilename)
        .addClass('imageLoaded');
    $previewDiv
        .parents('table:first')
        .find('button.removeImage')
        .show();
}
</script> 
```

**uploaderPreviewer.js- 修改函数**

```
<script>
    function displayImage($previewDiv, imageUrl) {
    //New
    var yourCustomPreview = $('#custompreview');

    var imageFilename = imageUrl.substr(imageUrl.lastIndexOf('/') + 1);

    $previewDiv
        .removeClass('loading')
        .addClass('imageLoaded')
        .find('img')
        .attr('src', imageUrl)
        .show();
    $previewDiv
        .parents('table:first')
        .find('input:hidden.currentUploadedFilename')
        .val(imageFilename)
        .addClass('imageLoaded');
    $previewDiv
        .parents('table:first')
        .find('button.removeImage')
        .show();

        //New
        yourCustomPreview.append('<img src="' + imageUrl + '"/>');

    }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T17:28:30.490

好的，试试这个：

**编辑：**

用这个替换 displayImage 函数：

```
function displayImage($previewDiv, imageUrl) {
//New
var yourCustomPreview = $('#custompreview');
var imageId = $($previewDiv.context).attr('id');
var imageFilename = imageUrl.substr(imageUrl.lastIndexOf('/') + 1);

$previewDiv
    .removeClass('loading')
    .addClass('imageLoaded')
    .find('img')
    .attr('src', imageUrl)
    .show();
$previewDiv
    .parents('table:first')
    .find('input:hidden.currentUploadedFilename')
    .val(imageFilename)
    .addClass('imageLoaded');
$previewDiv
    .parents('table:first')
    .find('button.removeImage')
    .show();

    //New
    if(!yourCustomPreview.find('#' + imageId +'_prev').length > 0)
    {
      yourCustomPreview.append('<img id="' + imageId + '_prev" src="' + imageUrl + '"/>');
    }
    else
    {
      $('#' + imageId +'_prev').attr('src', imageUrl);
    }
} 
```

**删除**

用这个替换 removeImage 函数：

```
function removeImage($removeImageButton, errorDisplayed) {

    var thumbIdToDelete = $removeImageButton.parents('table').find('[name=imageToUpload]').attr('id');
    var $parent = $removeImageButton.parents('table:first').parent();

    $.post($.uploaderPreviewer.removeImageAjaxUrl, {
        currentUploadedFilename: $parent.find('input:hidden.currentUploadedFilename').val()
    });

    $parent.find('input:hidden.currentUploadedFilename').removeClass('imageLoaded');
    $parent.find('div.previewImage')
        .removeClass('loading imageLoaded')
        .find('img')
        .hide();

    $parent.removeErrorMessage();

    if ( ! errorDisplayed) {
        $parent.find('input:file').val('');
        $removeImageButton.hide();
    }

    $('#' + thumbIdToDelete +'_prev').remove();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:10:38.527

是否是缓存原因，

```
`yourCustomPreview.append('<img src="' + imageUrl+'?'+new Date().getTime() + '"/>');` 
```

试试这个代码；

# xml - 我应该选择哪种 XML 结构？

> ID：11642962
> 
> 赞同：0
> 
> 时间：2012-07-25T04:54:33.113
> 
> 标签：xml, oracle, solr, xml-parsing, xsd

我正在使用 Oracle XML DB 来管理我的客户的资料。我想让配置文件可扩展且搜索引擎友好（我计划使用 Apache Solr 进行搜索）。我目前构想了两种不同的结构：

```
<profile>
<picture>
</picture>
<am>
    <sex>male</sex>
    <born_on>02/20/1989</born_on>
    <job>programmer</job>
</am>
<contact_information>
    <address>somewhere</address>
    <zip_code>somenumber</zip_code>
    <cellphone>somenumber</cellphone>
</contact_information>
<famliy>
    <parents>
        <father></father>
        <mother></mother>
    </parents>
</famliy>
<study_at>
</study_at>
<work_at>
</work_at>
<live_at>
</live_at>
<like>
</like>
    .... 
```

第二种是

```
<profile>
    <list name="am">
        <item name="sex">male</item>
        <item name="job">programmer</item>
    </list>
    <list name="study at">
        <item>someschool</item>
        <item>someschool</item>
    </list>
    ....
 </profile> 
```

第一个可以很容易地被 XPath 解析，而第二个可以有空格和更多的属性。哪一个更好？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:21:18.160

您可以使用其中任何一个来创建 XML，当您解析两种类型的 xml 时会出现差异。但是 i 和 xml 格式更喜欢第二种类型，因为 XPath 使我们能够灵活地解析 XML 并获取元素的值以及元素的属性。所以继续选择第二种类型。

阅读更多内容：[XPATH](http://www.w3schools.com/xpath/xpath_examples.asp)

开心！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:20:15.937

我认为不会有什么不同。选择您个人喜欢的那个。无论如何，您都必须使用带有 XSL 的 ImportDataHandler 来转换数据。

编辑：DataImportHandler 对不起...

# c++ - 如何在 C++ XE2 中监听 Running IE with IWebBrowser2 事件？

> ID：11642964
> 
> 赞同：3
> 
> 时间：2012-07-25T04:54:38.610
> 
> 标签：c++, c++builder, iwebbrowser2, c++builder-xe2

目前我想自动化正在运行的 IE。我已使用以下代码成功附加了正在运行的 IE（我假设一个选项卡中只有一个 IE）

```
#include "atl/atlbase.h"
#include <exdisp.h>
#include <mshtml.h>
CComQIPtr<IWebBrowser2> pCurIE;    
void __fastcall TForm4::Button3Click(TObject *Sender)
{
    bool SuccessToHook = false;
    CComPtr<IShellWindows> m_spSHWinds;
    if (FAILED(m_spSHWinds.CoCreateInstance( __uuidof( ShellWindows)))){

        return ;
    }

    LONG nCount;
    m_spSHWinds->get_Count( &nCount);
    ShowMessage(nCount);
    for (int i = 0; i < nCount; i++) {
        CComPtr<IDispatch> pDisp;
        m_spSHWinds->Item( CComVariant(i), &pDisp);
        CComQIPtr<IWebBrowser2> pIE(pDisp);
        if (pIE == NULL){

            continue ;
        }
        CComPtr<IDispatch> pDispDoc;
        pIE->get_Document(&pDispDoc);
        CComQIPtr<IHTMLDocument2> pHtmlDoc(pDispDoc);
        if (pHtmlDoc){
            pCurIE = pIE;
            SuccessToHook = true;
            break ;
        }
    }
    ShowMessage(SuccessToHook ? "Success to hook." : "Failed to hook." );
} 
```

现在我可以像导航和读取当前状态一样控制当前运行的 IE。但是因为我想在触发 onDocumentComplete Event 之类的事件时显示消息。我不知道如何按照我当前的代码监听事件。非常感谢带有 BCB 的简单示例代码，因为有一些带有 VC++ 的示例，但我的项目是在 C++ XE2 上的。

* * *

感谢@Remy Lebeau 和[这个链接](http://web.archive.org/web/20060311022915/http://bdn.borland.com/article/0,1410,26734,00.html)，我终于解决了我的问题。我把我的代码留在这里，希望它可能对其他人有帮助。

从 TEventDispatcher 派生的类

```
#include <exdisp.h>
#include <exdispid.h>
#include <mshtml.h>
#include <mshtmdid.h>
#include <utilcls.h>
//---------------------------------------------------------------------------
class TForm4;
class EventHandler:public TEventDispatcher<EventHandler,&DIID_DWebBrowserEvents2>{
    private:
        bool connected;
        TForm4 *theform;
        IUnknown* server;
    protected:
        HRESULT InvokeEvent(DISPID id, TVariant *params){
            switch(id){
                case DISPID_DOCUMENTCOMPLETE:
                    ShowMessage("On Document Complete");
                    break;
                default:
                    break;
            }
        }
    public:
        EventHandler(){
            connected = false; //not connected;
            theform = false; //backptr to form is null
        }
        ~EventHandler(){
            if (connected)
                Disconnect();
        }
        void Connect(TForm4 *form,  IUnknown* srv){
            server = srv;
            theform = form; //back pointer to form to do stuff with it.
            server->AddRef(); //addref the server
            ConnectEvents(server);
        }
        void Disconnect(){
            DisconnectEvents(server);   //disconnect the events
            server->Release();
        }
}; 
```

开始听

```
void __fastcall TForm4::Button5Click(TObject *Sender)
{
    Event = new EventHandler();
    Event->Connect(this, pCurIE);
} 
```

停止听

```
void __fastcall TForm4::Button6Click(TObject *Sender)
{
    Event->Disconnect();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T02:14:35.777

您必须在代码中编写一个实现`DWebBrowserEvents2`接口的类。然后你可以在浏览器中查询它的`IConnectionPointContainer`接口，调用`IConnectionPointContainer::FindConnectionPoint()`方法来找到对应的`IConnectionPoint`对象`DWebBrowserEvents2`，然后调用`IConnectionPoint::Advise()`传递给它你的类的实例的方法。`IConnectionPoint::Unadvise()`使用完事件后不要忘记打电话。

为了帮助您，您可以从`TEventDispatcher`utilcls.h 中的 VCL 类派生您的类。它`ConnectEvents()`和`DisconnectEvents()`方法`IConnectionPoint`为你处理这些东西。然后，您只需覆盖抽象`InvokeEvent()`方法（浏览器的每个事件都有自己的`DISPID`值）。

# actionscript-3 - 带有验证的 flex 中的动态组件

> ID：11642965
> 
> 赞同：0
> 
> 时间：2012-07-25T04:54:46.677
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4.5

如何使用验证创建动态 Flex 表单组件？是否可以创建动态 VO 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:10:47.803

每创建一个动态 VO 类，您可以`dynamic class`在 ActionScript 中定义一个可以添加或删除属性的属性。

```
public dynamic class EntityVO
{
    public function EntityVO()
    {
    }
} 
```

可以添加成员：

```
var entityVo:EntityVO = new EntityVO();    
entityVo.property1 = "New property"; 
```

或删除：

```
delete entityVo.property1; 
```

# eclipse - 如何在 Eclipse 中获取（知道）特定菜单的 menuid？

> ID：11642970
> 
> 赞同：6
> 
> 时间：2012-07-25T04:55:26.387
> 
> 标签：eclipse, eclipse-plugin

我正在尝试向 Package-Explorer 的项目上下文菜单中添加一个子菜单。但是，我找不到那个菜单的 menuid。

所以我的问题是如何在 Eclipse 中找到 menuid？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:38:16.780

Plugin Spy 为您提供有关正在运行的 UI 的轻松信息。

按“Alt+Shift+F1”可获取有关当前运行的 Eclipse 插件/数据类型/屏幕的信息。

按“Alt + Shift + F2”并选择一个菜单以查看谁在贡献此菜单。

了解更多信息：

[http://www.vogella.com/articles/EclipseCodeAccess/article.html#pluginspy](http://www.vogella.com/articles/EclipseCodeAccess/article.html#pluginspy)

例如：PackageExplorer 本身的 Plugin Spy 将显示如下：
![PackageExplorer间谍](../Images/7ee853463793c764a87f8700cd086274.png)

对于 packaghe 资源管理器中的弹出菜单，例如刷新它显示如下：
![刷新间谍](../Images/073dfd5549cbf09962b00a9ab8180eec.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-27T12:31:52.400

有一个包含常量值的类：**org.eclipse.ui.menus.MenuUtil**

例如，您应该看到这个 Eclipse 帮助链接（火星版）： [Eclipse 常量类 MenuUtil](http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Fconstant-values.html)

# ruby-on-rails-3 - 无法安装 capybara-webkit

> ID：11642971
> 
> 赞同：0
> 
> 时间：2012-07-25T04:55:33.210
> 
> 标签：ruby-on-rails-3, installation, gem, capybara-webkit

当我跑

```
 abhay$ gem install capybara-webkit 
```

我收到以下错误消息。

```
 Building native extensions.  This could take a while...
 ERROR:  Error installing capybara-webkit:
ERROR: Failed to build gem native extension.

    /Users/abhay/.rvm/rubies/ruby-1.9.2-p180/bin/ruby extconf.rb

  Gem files will remain installed in /Users/abhay/.rvm/gems/ruby-1.9.2-p180/gems/capybara-     webkit-0.12.1 for inspection.
  Results logged to /Users/abhay/.rvm/gems/ruby-1.9.2-p180/gems/capybara-webkit-0.12.1/./gem_make.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:00:35.490

我必须安装 QT[链接](http://qt-project.org/wiki/Support_for_Mac_OS_X)，因为 capybara-webkit gem 使用它来编译和安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T10:40:35.913

这听起来很像这个[https://stackoverflow.com/a/11622193的副本](https://stackoverflow.com/a/11622193)

我发现这个答案中的解决方案效果很好：

[https://stackoverflow.com/a/11622193/3088748](https://stackoverflow.com/a/11622193/3088748)

# sql-server - 本地 .mdf 文件中的数据没有改变，但没有错误

> ID：11642972
> 
> 赞同：-1
> 
> 时间：2012-07-25T04:55:45.600
> 
> 标签：sql-server, vb.net, linq-to-sql

我使用一个`.mdf`文件作为我的数据库。我还使用了 Linq-to-SQL 连接。

起初，我的应用程序可以`.mdf`正确添加和显示文件中的数据。但是当我尝试通过`.mdf`直接单击文件并从表中查看数据时，数据库为空。

我已经设置了`.mdf`文件和`.dbml`文件`Copy if newer`，但仍然没有。

请帮助我，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:10:28.367

我打赌你的连接字符串包含

```
AttachDbFileName=somefilename.mdf 
```

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！Visual Studio 将在`.mdf`文件周围进行复制，并且**很可能**，您的`INSERT`工作正常 - 但您最终只是查看了**错误的 .mdf 文件**！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`YourDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=YourDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样......

# php - 使用 php 转义斜杠

> ID：11642973
> 
> 赞同：1
> 
> 时间：2012-07-25T04:55:46.003
> 
> 标签：php, escaping, slash

我正在尝试删除输出之间存在的转义序列。我正在使用 php 进行编码，我有函数的输出，它包含转义序列，如`\r`和`\n`。如何从输出中转义这些东西，以便获得正确的输出。问题是我正在尝试将此输出添加到 csv 文件中，因此它将`\n`作为下一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:59:49.290

单引号禁止转义序列。`'\r'`是两个字符，`\`并且`r`; `"\r"`是 CR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:01:58.477

使用 str_replace 函数：

```
$your_string =  "here is your string"

$your_string = str_replace("\n", "", $your_string);
$your_string = str_replace("\r", "", $your_string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:01:51.887

您需要在[此处](http://php.net/manual/en/function.stripslashes.php)和[此处](http://php.net/manual/en/function.str-replace.php)`stripslashes`使用并`str_replace`查看它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T07:37:17.163

[这篇文章](https://stackoverflow.com/questions/1241220/generating-csv-file-for-excel-how-to-have-a-newline-inside-a-value)表明在字段中保留换行符应该可以工作，只要：

*   单元格内的换行符表示为 \n ( `str_replace("\r\n", "\n", $cell)`)
*   单元格被引用
*   行以 \r\n 结束

如果您还没有，我建议您使用[fputcsv()](http://php.net/manual/en/function.fputcsv.php)，因为它会为您处理报价。

# plone - 在 Plone 中搜索用户并显示用户记录

> ID：11642974
> 
> 赞同：0
> 
> 时间：2012-07-25T04:55:56.717
> 
> 标签：plone

我想在plone中实现搜索功能。根据用户搜索，用户电子邮件。想要显示用户的完整详细信息。是否有任何现有的添加可以使用（或）我必须编写自己的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:36:59.837

默认情况下，Plone 不执行“按内容划分用户”。

*   用户对象未注册为内容

*   因此，标准的 Plone 搜索功能不涵盖用户

如果您希望用户对所有人可见且可搜索

*   有附加的[http://pypi.python.org/pypi/Products.remember/](http://pypi.python.org/pypi/Products.remember/)它将用户转向内容项目，这服务于一些利基用例

*   或者，您可以编写自己的搜索框视图，例如站点设置中的用户/组页面

如果您需要成员在您的网站上公开，我建议您查看*Products.remember*。它还将使您能够通过 Archetypes 内容子系统扩展用户记录，并使它们受制于工作流菜单（对成员具有不同的状态，如禁用、注册等）

[http://collective-docs.readthedocs.org/en/latest/content/archetypes/index.html](http://collective-docs.readthedocs.org/en/latest/content/archetypes/index.html)

# java - 在进行实际搜索之前计算行数

> ID：11642975
> 
> 赞同：0
> 
> 时间：2012-07-25T04:56:03.477
> 
> 标签：java, sql, search, web-search

给定一个具有多个（例如 5 个）不同搜索屏幕的 Web 应用程序（Java、Spring、Hibernate 和 Sybase 作为 DB），我想首先计算基于用户条件的搜索结果是否会超过限制，例如 1000 行。即使用户提供了合理的过滤器和标准，也可能会出现超过 1000 个的巨大结果。

这样做是推荐的：

1.  select count(*) from table --clauses, etc here
2.  然后如果 > 1000，不进行实际搜索，返回并显示限制错误（告诉用户细化搜索）
3.  否则如果 < 1000，进行实际搜索并将结果集返回给用户

还是有更好的解决方案来处理这个问题？

如果这是要走的路，我的后续问题是，我们如何避免重复 sql 查询？因为我理解这样做，所以需要我声明相同的搜索 sql，除了 select 子句将只包含 count(*)。

**更新**

此外，我想避免两件事： 1\. 执行实际 sql 的处理 2\. ORM 加载/映射域对象（在这种情况下为休眠） ***当我检测到计数时避免 1 和 2 > 1000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:03:46.960

我根本不会运行 a `COUNT(*)`，只需使用 a 运行查询`LIMIT 1001`。您很可能在计数中生成完全相同的结果集（即，要执行 COUNT，您必须生成结果集），并且下一次命中将来自缓存，或者最坏的情况您将不得不重新计算。你只是在做同样的工作两次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:01:55.090

根据您从行集中检索行的方式，您可以简单地过滤该级别的结果。

IE

```
int rowIndex = 0;
while (rs.hasNext() && rowIndex < 1000) {
    // ... Extract results
    rowIndex++;
} 
```

您可能想警告用户结果集已被修剪；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:01:02.800

我们的应用程序也遵循相同的程序。是的，唯一的区别是在 SQL 中放置 count(1) 而不是 *。

但是，您可能需要了解，有时计数查询会花费更多时间然后获取结果子集。

# javascript - 使用动画将 toggleClass('hidden') 转换为 .toggle()

> ID：11642979
> 
> 赞同：0
> 
> 时间：2012-07-25T04:56:20.217
> 
> 标签：javascript, jquery

我的动态生成网页和 JQuery 项目的个人学习项目的第一次实现使用了复选框和切换（“慢”）和切换（“快”）。然而，完全是 CS 新手，管理复选框的状态对于我的第一个项目来说有点复杂。所以我只切换到`<label>`s`.on('click', function(){...})`和`$('*').click(function(){...})`with`.toggleClass('hidden')`来处理我的用户体验。隐藏类的 CSS 是：

```
.hidden {
    display: none;
} 
```

现在的问题是类的切换是瞬间发生的，我希望用户能够看到`.toggle()`就像`.toggle('slow')`或`.toggle('fast')`。我将如何转换以下行以实现这种视觉反馈？

```
$(this).toggleClass('hidden'); 
```

我已经查看了 toggle、toggleClass 和 slideToggle 的 API，并且很好奇某个组合是否可行。如果我必须将其重写为 toggle()，我如何包含 showOrHide 参数以及“显示”或“快速”持续时间，因为我需要验证当前状态，类似于`.toggleClass()`的 [switch] 参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:12:18.070

您不能动画添加或删除一个类 - 一个类要么存在，要么不存在。该`.toggle('fast')`效果是通过在隐藏元素之前对元素的特定 CSS 属性进行动画处理来产生的。

> *“如果我必须将其重写为* `toggle()`，*我如何包含* `showOrHide` *参数以及“显示”或“快速”持续时间，因为我需要验证当前状态，类似于* `.toggleClass()'s [switch]` *参数。”*

由于目前没有这样的版本`.toggle()`：

```
$(this).toggle('fast', showOrHide) 
```

...您可以改为这样做：

```
$(this)[showOrHide ? "show" : "hide"]('fast'); 
```

...这是一种简写方式：

```
if (showOrHide)
   $(this).show('fast');
else
   $(this).hide('fast'); 
```

如果您想在显示/隐藏完成时运行回调函数，则：

```
$(this)[showOrHide ? "show" : "hide"]('fast', function() { ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:12:58.283

您可能想要使用 jquery 的显示和隐藏函数 $('.target').show(); $('.target').hide(); [http://api.jquery.com/show/](http://api.jquery.com/show/) http://api.jquery.com/hide/ 它为您提供动画过渡和回调的额外好处。然后，您只需要检查是否显示为无，而不是切换，您就会知道是显示还是隐藏它。

# opencv - 确定两个 360x180 equirectangular 全景图像之间的相机旋转

> ID：11642988
> 
> 赞同：5
> 
> 时间：2012-07-25T04:58:09.500
> 
> 标签：opencv

我有 n 帧 360x180 全景图像。我想根据两个连续图像之间的比较来确定相机的旋转。对于这个项目，可以安全地假设图像中可见的所有特征都在无穷大。

我是 OpenCV 的新手（今天），肯定需要做更多的阅读。我有一个应用程序可以使用 SIFT 或 SURF 找到关键点，但我不确定如何从这里继续。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T07:30:37.623

要找到图像之间的旋转，您需要知道两者的方向，因此需要知道**姿势**。要计算相机位姿，您需要从**关键点匹配中找到****单应**变换。

 **想象一下，您知道第一帧的方向和位置，因为您可以任意决定它。您有 SIFT 提取的关键点。从这里你有接下来的步骤：

**1-**从下一帧中提取关键点。

**2-**在两帧上查找关键点的匹配。

**3-**使用 RANSAC 为下一步找到匹配的最佳内点/异常值集

**4-**对该集合使用 DLT（直接 Lienar 变换），这将使用 4 个匹配项来查找图像之间的单应性。

**5-**一旦你有了单应性，你就可以提取姿势和旋转。

[除了来自单应性的姿势](https://stackoverflow.com/a/10781165/744859)之外，您对所有步骤都有 openCV 函数。**

# c# - 旋转地铁风格

> ID：11642990
> 
> 赞同：0
> 
> 时间：2012-07-25T04:58:20.630
> 
> 标签：c#, microsoft-metro, rotation, .net-4.5

我目前正在使用 Metro 风格应用程序（.NET 4.5 RC [C#\XAML]，VS2012 RC），但我遇到了一个无法解决的问题。

我想实现我的应用程序将在旋转托管设备时更改布局（+-45）。我在 XAML 中准备了两种布局 - 一种用于横向，另一种用于纵向，并且我为 Visual States 做了一些动画：

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="ApplicationViewStates">
        <VisualState x:Name="FullScreenLandscape"/>
        <VisualState x:Name="Filled"/>
        <VisualState x:Name="FullScreenPortrait">
            <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ControlContentLandscape" Storyboard.TargetProperty="Visibility">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ControlContentPortrait" Storyboard.TargetProperty="Visibility">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
        <VisualState x:Name="Snapped"/>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

但我不知道下一步该做什么。当我的设备变成纵向模式时，如何设置我的应用程序将执行这些动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:22:16.853

我已经分析了 Grid App 模板。而且我注意到那里的主页继承自 Common 文件夹中的*LayoutAwarePage*类。LayoutAwarePage类为使用*VisualStateManager在状态之间**切换的**WindowSizeChanged*事件提供处理程序- 这是我当前项目中缺少的部分。解决方案是：

 *1.  手动处理*WindowsSizeChanged*事件并使用*VisualStateManager*类和*GoToState()*方法
2.  创建新项目（网格应用程序）并将其放入当前项目中。*

# php - XML 不适用于 php

> ID：11642997
> 
> 赞同：1
> 
> 时间：2012-07-25T04:59:01.987
> 
> 标签：php, xml, xml-parsing

我在php中编写了一个代码。我想要浏览器中的 XML 输出，但它显示错误。实际上它在本地运行良好。但是当我托管它时，它显示错误为“XML Parsing Error: junk after document element”。

```
 <?php
 header("Content-type: text/xml");
 echo '<?xml version="1.0" encoding="ISO-8859-1"?>';
 echo '<group>';
 echo '<family>';
 echo '<person>';
 echo 'first name';
 echo '</person>';
 echo '</family>';
 echo '</group>';
?> 
```

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:01:27.540

放一个`die();`后`echo '</group>';`。

如果这清除了您的错误，那么在您发布的代码之后会输出一些内容。

或者，您可以准备您的 XML，例如：

```
<?php header("Content-type: text/xml"); ?>
<?xml version="1.0" encoding="ISO-8859-1"?>
<group>
    <family>
        <person>first name</person>
    </family>
</group> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:03:37.750

你的 <\?php 之前有一个空格，所以在 <\?xml

它导致了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:14:35.450

您的脚本本身在我的本地环境中运行良好。问题可能来自其他地方。

您可能会在脚本**之后输出一些内容。**

并且它不是 php 之前的空格，否则您会遇到类似于以下内容的错误： **XML declaration allowed only at the start of the document**

# mysql - 在 MySQL 中，如何更改最大并发连接数？

> ID：11642998
> 
> 赞同：0
> 
> 时间：2012-07-25T04:59:08.950
> 
> 标签：mysql, database

我现在正在编辑 my.cfg，我想更改最大连接数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:02:46.260

```
# vi /etc/my.cnf
max_connections = 250 
```

在您喜欢的文本编辑器中打开您的 MySQL 配置文件并将变量“max_connections”设置为您需要的值。完成后，使用 /etc/init.d/mysqld restart 重新启动 MySQL 守护程序（系统上的 init 脚本路径可能不同）。