# StackOverflow 问答 11660000-11660999

# batch-file - 这个“subst”调用有什么作用？

> ID：11660000
> 
> 赞同：0
> 
> 时间：2012-07-25T23:08:43.600
> 
> 标签：batch-file, subst

我想知道这个命令在批处理脚本中的作用：

```
subst Q: /D  1>nul  2>nul 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:14:55.537

这看起来像一个 DOS 命令（不是 bash）。

`subst` [用文件夹代替驱动器号](http://www.computerhope.com/substhlp.htm)或用一个驱动器号代替另一个驱动器号

/D 删除（实际上是卸载）一个虚拟（以前替换的）驱动器。所以你的命令基本上删除了虚拟驱动器 Q：

和只是摆脱输出（即发送标准输出和标准错误输出到nul 设备）`1>nul`。`2>nul`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:16:11.840

您正在谈论的 subst 命令是 DOS 命令，而不是 bash。

它的作用是卸载虚拟驱动器 Q:，而 1 > nul 2 > nul 基本上意味着该命令的所有输出都被丢弃。

# c - 使用 Libgcrypt 的程序中的内存泄漏

> ID：11660001
> 
> 赞同：0
> 
> 时间：2012-07-25T23:08:45.837
> 
> 标签：c, memory-leaks, valgrind, libgcrypt

我正在使用 Libgcrypt 进行一些测试，当我使用 valgrind 检查内存使用情况时，退出时使用了 3,200 个字节。

我试过用

```
valgrind --leak-check=full --track-origins=yes --show-reachable=yes ./my_program 
```

但是 valgrind valgrind 只抱怨我的代码中的这一行：

```
version = gcry_check_version("1.5.0"); 
```

和 valgrind 关于 Libgcrypt 的内部功能。

我的测试代码在这里：[http](http://www.tiago.eti.br/storage/post2.c) : //www.tiago.eti.br/storage/post2.c 我正在使用来自 Debian sid 存储库的 Libgcrypt 1.5.0

这是 Libgcrypt 的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:40:34.657

并非所有图书馆都非常小心地清理所有资源。只要一些“永久”分配只发生一次并且一直使用到程序结束（例如对于版本字符串），库完全有可能从不费心去释放它。

这就是处理第三方库的不幸现实，如果它困扰你，你应该为 Valgrind 制作一个`--gen-suppressions=all`.

请记住，“仍然可以访问”的内存只是“懒惰”，而不是真正的*泄漏*，因为您实际上从未*丢失*分配。泄漏应该被认为是一个真正的编程错误，而仍然可以访问，未释放的内存可能是也可能不是一个可以原谅的捷径。

# rpy2 - 在 Windows 7 上安装 ry2

> ID：11660002
> 
> 赞同：0
> 
> 时间：2012-07-25T23:08:51.370
> 
> 标签：rpy2

这又是同一问题的重复，但我被迫将其作为新问题提出。所以请不要删除这个管理员！

我是 R 和 Rpy2 的新手。我的问题是类似的。我正在使用 p*ython 2.6、R 2.15.1、rpy2 2.2.6 和 Windows 7*。

**R_HOME: C:\Program Files\R\R-2.15.1**

在命令提示符下键入“R”不起作用。

**PATH：有这两个--C:\Program Files\R\R-2.15.1\bin;C:\Program Files\R\R-2.15.1**

**PYTHONPATH: C:\Python26\ArcGIS10.0\Lib;C:\Python26\ArcGIS10.0\DLLs;C:\Python26\ArcGIS10.0\Lib\lib-tk**

当我运行 setup.py 时，我得到“**错误：没有提供命令**”！

我尝试将所有文​​件从 bin/i386 直接放在 bin 下。

我的 rinterface->init.py 是不同的。然而，这就是我所做的：

```
# MSWindows-specific code
_win_ok = False
if sys.platform in _win_bindirs.keys():
    import win32api
    if os.path.exists(os.path.join(R_HOME, 'lib')):             ## ADDED ##
        os.environ['PATH'] += ';' + os.path.join(R_HOME, 'bin')
        os.environ['PATH'] += ';' + os.path.join(R_HOME, 'modules')
        os.environ['PATH'] += ';' + os.path.join(R_HOME, 'lib')
        R_DLL_DIRS = ('bin', 'lib')
    else:                                   ## ADDED ##
        os.environ['PATH'] += ';' + os.path.join(R_HOME, 'bin', 'i386')     ## ADDED ##
        os.environ['PATH'] += ';' + os.path.join(R_HOME, 'modules', 'i386') ## ADDED ##
        os.environ['PATH'] += ';' + os.path.join(R_HOME, 'library')     ## ADDED ##
        R_DLL_DIRS = ('bin', 'library')

    # Load the R dll using the explicit path
    # Try dirs in R_DLL_DIRS
    for r_dir in R_DLL_DIRS:
        Rlib = os.path.join(R_HOME, r_dir, _win_bindirs[sys.platform], 'R.dll')
        if not os.path.exists(Rlib):
            continue
        win32api.LoadLibrary(Rlib)
        _win_ok = True
        break

    # Otherwise fail out!
    if not _win_ok:
        raise RuntimeError("Unable to locate R.dll within %s" % R_HOME)

# cleanup the namespace
del(os) 
```

没有任何改变 setup.py 错误消息。我已经黔驴技穷了。请帮忙！！

阿维舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:00:59.290

检查上周左右的 rpy 邮件列表条目。有一个贡献的二进制文件。

# api - 通过 API 在项目和用户下获取体式“现在”任务和“今天”任务

> ID：11660005
> 
> 赞同：3
> 
> 时间：2012-07-25T23:08:58.333
> 
> 标签：api, asana

在 Asana 中，我们可以看到项目视图中的任务是如何拆分为“现在”、“下一个”和“稍后”以及用户中的“今天”、“即将到来”和“稍后”。我似乎找不到识别每个类别中的任务所需的 API。此功能是否可供开发人员使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T23:38:08.953

（我在 Asana 工作）

在[https://asana.com/developers/api-reference/tasks](https://asana.com/developers/api-reference/tasks)的任务参考中，文档描述了该`assignee_status`字段。这将为您提供分配给用户的任务的今天/即将到来/以后的状态。

在项目视图中，这些状态不存在，所以我假设现在/下一个/以后您指的是“优先标题”，或者您可以通过以任务名称结尾来在任何列表中创建的任意标签冒号 （：）。目前没有办法通过 API 找出任务的优先级。

如果知道包含任务的优先级标题很重要，您可以遍历结果（默认情况下，它们以与 UI 中相同的顺序显示），跟踪您最后看到的优先级标题。如果您以某种方式过滤任务列表（并且可能不会因此获得所有优先级标题），这很不雅且容易出现问题，但它可能会帮助您完成工作，直到提供更好的解决方案。

如果您要查询任务列表，请确保添加`opt_fields=assignee_status`参数，并且每个结果中都会提供该字段。

# touch - Sencha Touch 2 按需加载存储

> ID：11660011
> 
> 赞同：2
> 
> 时间：2012-07-25T23:09:55.023
> 
> 标签：touch, extjs, store

目前我有一个商店，我在运行时在我的 app.js 中加载：

```
stores: ['Neighbors'] 
```

它的 autoLoad 属性设置为 true。

如果在 localStorage 中找不到某些信息，我现在添加了一个登录系统：

```
//show login if user credentials are unknown
var username = window.localStorage.getItem("email");
var user_id = window.localStorage.getItem("user_id");

if(username == '' || username == undefined || user_id == '' || user_id == undefined) {
    Ext.Viewport.add(Ext.create('aa.view.Login'));
} else {
    Ext.Viewport.add(Ext.create('aa.view.Main'));
} 
```

登录视图会触发一个 ajax 请求来让用户登录，成功时会返回用户的 id 和其他一些信息：

```
onLoginButtonTap: function() {
        var values = this.getLoginForm().getValues();
        var that = this;
        // do the ajax login
        Ext.Ajax.request({
            url: 'http://localhost:8000/session',
            method: 'POST',
            params: values,
            timeout: 10000, // time out for your request

            success: function(result) {
                // let's get the email and id into local storage
                var json = Ext.decode(result.responseText);
                console.log(json);
                window.localStorage.setItem('user_id', json.user_id);
                window.localStorage.setItem('email', json.email);

                // var neighborsStore = Ext.getStore('Neighbors');
                // neighborsStore.load();

                // load up the tab holder and destroy the login view
                Ext.getCmp('loginForm').destroy();
                Ext.Viewport.add(Ext.create('aa.view.Main'));

            },

            failure: function(){
                Ext.Msg.alert("Login Failed");
            }
        });

    } 
```

我使用商店中的 user_id 来获取附近其他用户的列表。唯一的问题是，除非我的用户已登录，否则我的 user_id 是未知的。

我要么需要刷新商店，要么需要将其加载推迟到成功登录之后。我宁愿做第二个选项，只在登录后尝试加载商店。

我似乎找不到任何有关如何执行此操作的信息。我试过了

```
Ext.getStore('storename').load() 
```

但它并没有刷新商店。我尝试将 autoLoad 设置为 false，但商店永远不会加载。如何延迟加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:15:53.517

您应该能够`that.getNeighborsStore().load()`在您的成功功能中使用。一旦用户成功登录，这将加载商店。

# java - Django 中的 Web 服务

> ID：11660013
> 
> 赞同：1
> 
> 时间：2012-07-25T23:10:10.813
> 
> 标签：java, javascript, jquery, django, web-services

我有一个简单的 Java 应用程序，它响应 Web 服务请求。

当用户按下按钮时，会向 Java 应用程序发送一条消息。

如果消息是“ping”，则应用程序以“pong”响应，否则 - “uknown message”。

Java应用程序的代码：

```
@Path("/ping-pong")
public class PingPongService {

    @POST
    @Produces("text/plain")
    public String test(@FormParam("message") final String aMessage) {
        System.out.println("message from client: " + aMessage);
        if ("ping".equalsIgnoreCase(aMessage)) {
            System.out.println("ping.equalsIgnoreCase(aMessage)");
            return "pong";
        } else {
            System.out.println("Unknown message");
            return "unknown message " + aMessage;
        }
    }

} 
```

在 WAR 文件中，我有以下 HTML 代码，它可以工作（当我按下其中一个按钮时，我会从 Java 应用程序获得响应并显示在消息框中）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>JavaScript Ping-Pong Client</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">

        //This function send post request to the server using jQuery
        function testWithJQuery(message){
            $.post('http://localhost:8345/rest/ping-pong', { message: message }, function(data) {
                alert(data);
            });
        }

        //This function send post request to the server using a low-level XmlHttpRequest instead of the jQuery
        //(no dependencies on external libraries)
        function test(message){
            var http = new XMLHttpRequest();
            var url = "http://localhost:8345/rest/ping-pong";
            var params = "message=" + message;
            http.open("POST", url, true);
            http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            http.setRequestHeader("Content-length", params.length);
            http.setRequestHeader("Connection", "close");
            http.onreadystatechange = function() {
                if(http.readyState == 4 && http.status == 200) {
                    alert(http.responseText);
                }
            };
            http.send(params);
        }
    </script>
</head>
<body>
    <button onclick="test('ping')">Test</button>
    <button onclick="testWithJQuery('ping')">Test using jQuery</button>
</body>
</html> 
```

我想在 Django 应用程序中做完全相同的事情（用户按下一个按钮，一条消息被发送到 Java 应用程序，并且它的响应显示在一个警报消息窗口中）。

Django 生成以下 HTML 代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
    <title></title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
    //This function send post request to the server using jQuery
    function testWithJQuery(message){
        $.post('http://localhost:8345/rest/ping-pong', { message: message }, function(data) {
            alert(data);
        });
    }

    //This function send post request to the server using a low-level XmlHttpRequest instead of the jQuery
    //(no dependencies on external libraries)
    function test(message){
        var http = new XMLHttpRequest();
        var url = "http://localhost:8345/rest/ping-pong";
        var params = "message=" + message;
        http.open("POST", url, true);
        http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        http.setRequestHeader("Content-length", params.length);
        http.setRequestHeader("Connection", "close");
        http.onreadystatechange = function() {
            if(http.readyState == 4 && http.status == 200) {
                alert(http.responseText);
            }
        };
        http.send(params);
    }
</script>

</head>
<body>
<button onclick="test('ping')">Test</button>
</body>
</html> 
```

当我在 Django 生成的代码中按下“测试”按钮时，Java 应用程序会收到消息（我在控制台输出中看到了这一点），但 Java 应用程序的响应不会显示在 Django 网站中，即使 HTML 代码与 WAR 文件中的相同。

我该如何解决这个问题，即确保 Java 应用程序的响应显示在 Django 中？

UPD：这是 Chrome 的“网络”窗格中的详细错误描述：

![在此处输入图像描述](../Images/259a92447534b8f5f85e23c11c54bfde.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:26:55.487

这不是一个直接的答案，而是一些帮助您诊断问题的提示；我在这里发帖是因为它太大而无法发表评论。

1.  打开 Chrome 调试器 ( `shif`++ `ctrl`)`i`或 Firefox Firebug 并激活“网络”选项卡。
2.  检查两个版本的帖子并比较标题和正文

如果存在不同的行为，则两个帖子之间应该存在一些差异。

[更新]

> 我发现了错误 - 请参阅问题中的屏幕截图。错误是“XMLHttpRequest cannot load localhost:8345/rest/ping-pong. Origin localhost:8000 is not allowed by Access-Control-Allow-Origin.”。

该错误是由于浏览器中的安全限制（[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)）。有一些解决方法（来源：维基百科）：

> 为了使开发人员能够以受控方式规避同源策略，已经使用了许多“黑客”，例如使用片段标识符或 window.name 属性在驻留在不同域中的文档之间传递数据。使用 HTML5 标准，为此制定了一种方法：postMessage 接口，该接口仅在最近的浏览器上可用。JSONP 和跨域资源共享也可用于启用对其他域的类似 ajax 的调用。[2](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy) easyXDM 也可用于轻松解决同源策略设置的限制。它是一个轻量级、易于使用且自包含的 Javascript 库，使开发人员可以轻松地跨域边界进行通信和公开 javascript API。

我已经成功使用了[子域黑客](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)，请参阅此答案：

*   [规避同源政策的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

# python - PyBrain 神经元操作

> ID：11660014
> 
> 赞同：6
> 
> 时间：2012-07-25T23:10:14.853
> 
> 标签：python, neural-network, pybrain

有没有一种好方法可以在完全连接的 PyBrain 网络中添加/删除神经元及其相关连接？说我开始：

```
from pybrain.tools.shortcuts import buildNetwork
net = buildNetwork(2,3,1) 
```

我将如何使它成为（2,4,1）或（2,2,1）网络，同时保持所有旧权重（并将任何新权重初始化为随机的，就像在初始化网络时所做的那样）？我想这样做的原因是因为我正在尝试使用进化学习策略来确定最佳架构，并且“突变”步骤涉及以一定的概率添加/删除节点。（输入和输出模块应始终保持不变。）

编辑：我发现 NeuronDecomposableNetwork 应该使这更容易，但似乎我仍然必须分别跟踪神经元和连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T03:59:12.177

我假设您正在按照[NEAT](https://en.wikipedia.org/wiki/NeuroEvolution_of_Augmented_Topologies)算法的路线进行操作？你的问题有两个不同的答案：

1.  **网络拓扑的开放式**演化：在这种情况下，我建议将每个神经元封装在它自己的“层”/模块中，并迭代地添加/删除它们以及它们与网络的连接，有点像[本教程](http://www.pybrain.org/docs/tutorial/netmodcon.html#feed-forward-networks)，除了会有更多（单神经元）层。不要忘记`sortModules()`在每次拓扑更改后调用该方法。

2.  在预定义的框架内找到最佳拓扑（比如最多 1000 个神经元）。在这种情况下，在开始时构建完整的网络会更容易、更有效，并且只需**屏蔽**一些连接（例如使用[`MaskedParameters`](https://github.com/pybrain/pybrain/blob/master/pybrain/structure/evolvables/maskedparameters.py)模块）。其中，[模因算法](https://github.com/pybrain/pybrain/blob/master/pybrain/optimization/memetic/memetic.py) [（像这样使用）](https://github.com/pybrain/pybrain/blob/master/docs/tutorials/blackboxoptimization.py#L79)旨在搜索此类拓扑空间。

正如您所说，另一种方法是手动管理所有权重（通过跟踪[什么是 where](https://stackoverflow.com/questions/8150772/pybrain-how-to-print-a-network-nodes-and-weights/8161274#8161274)或使用`NeuronDecomposableNetwork`），但我*不建议*这样做。

* * *

一般评论：对于像你这样的 pybrain 更高级的使用，依赖 `buildNetwork' 快捷方式真的太有限了，你会想直接使用 Network/Module/Connection API。

# wordpress - Wordpress：current_page_item 适用于文本转换，但不适用于颜色

> ID：11660034
> 
> 赞同：0
> 
> 时间：2012-07-25T23:11:35.513
> 
> 标签：wordpress

我正在制作这部小电影的网站，我暂时托管在[http://ivanfuentes.com/nolovelost/](http://ivanfuentes.com/nolovelost/)

在失去电影工作后，我决定开始从事我的其他爱好，网页......我已经学习了很多 html5 和 css3，但我发现仍然是新手......我的客户要求我建立一个 Wordpress 网站，当我找到 Atahualpa 时，我认为采用它是一个好主意，这样他就可以轻松地控制他的网站。再也不！从现在开始，我会尽量从头开始。

他希望在侧边菜单上以不同的颜色书写当前页面。为此，我使用了 Wordpress 中的 current_page_item 标识符，它确实有效，因为我尝试使用不同的参数，例如，确实将所有文本转换为大写。但是由于某种原因我仍然无法弄清楚，它不会改变文本的颜色！

我使用 Chrome 的“检查元素”选项检查了代码，正如我所见，浏览器确实将该项目识别为“current_page_item”，只是它不想应用特定的颜色更改（它已被删除）。

有谁知道会是什么？我一直在努力解决这个问题，但到目前为止没有成功......任何帮助，甚至只是提示在哪里寻找，没有进一步的解释，将如此，非常感谢，因为这是我现在的所有工作。同样，如果有人想提出任何其他想法来停止成为这样的菜鸟，我会很高兴听/读！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:08:31.077

CSS 提示：

CSS 越具体，它越优先于针对相同项目的现有 CSS。像这样定位css：

```
.current_page_item a{color:/*YOUR COLOR HERE*/;} 
```

如果这仍然是通过，然后使其更具体：

```
#DIV_ID #MENU_ID .current_page_item a{color:/*YOUR COLOR HERE*/;} 
```

您可以以这种方式继续向上树添加更多的特异性层，直到它成为您想要的颜色，或者您可以像这样进行手动覆盖：

```
.current_page_item a{color:/*YOUR COLOR HERE*/ !important;} 
```

这将确保您的 CSS 不会被覆盖，但我个人尽量避免使用它，除非绝对必要。

# javascript - JS Array 传值无故改变

> ID：11660039
> 
> 赞同：0
> 
> 时间：2012-07-25T23:11:47.093
> 
> 标签：javascript

我有一个循环数组的函数......虽然它工作它似乎改变了从“开始”函数发送到“处理”函数的信息的值，但我不知道为什么......我确定我犯了一个愚蠢的错误，但我看不到错误=/

这是我的功能：

```
var array_data = data[9]; //global array to use
console.log(array_data); //debug

function process(i){
alert('Number is '+i); // shows the value "7" (should show value "1")
}

function begin(){
var count = 0;

for(i in array_data){

if(parseInt(array_data[i][9])){ //if true

    var result = create_layout(i); //function to make the layout
    alert('Number is '+i); //shows the value "1" (this is correct so far)

   document.getElementById('result'+count).innerHTML = result;  
   document.getElementById('result'+count).onclick = function() { process(i); };    

count++;

       }
}   

window.onload = function() {  
begin();  
}; 
```

以下是控制台日志中的 (array_data) 数组：

```
1: Array[10]
   0: "Car One"
   1: "1"
   2: "3"
   3: "d2.jpg"
   4: "1"
   5: "1"
   6: "200"
   7: "85"
   8: "5000"
   9: "1"
length: 10    

7: Array[10]
   0: "Car Two"
   1: "1"
   2: "1"
   3: "e2.jpg"
   4: "1"
   5: "0"
   6: "500"
   7: "50"
   8: "3000"
   9: "0"
length: 10 
```

所以我想知道为什么当它到达进程函数时它会改变“i”的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T23:19:42.213

当`onclick`函数实际被调用时，它的值`i`将会因为它所在的循环而改变。你应该“锚定”它的值。最简单的方法是这样的：

```
for( some loop on `i`) {
    (function(i) {
        // your code that depends on `i`
    })(i);
} 
```

这将确保该`i`闭包内的值不会改变（除非你自己改变它）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T23:25:11.143

*   ~~不要[在数组上使用 for-in-loops](https://stackoverflow.com/q/500504/1048572)~~（好的，这里不适用）
*   `begin`您的函数缺少右括号
*   只需使用`window.onload = begin;`- 无需额外功能
*   `i`然而，您的变量需要额外的闭包。事件处理程序执行的时间，它将使用变量`i`- 其当前值是它在最后一个循环周期中获得的值。你的`count`变量可能是同样的问题。

```
for(var i=0; i<array_data.length; i++) (function(i){

    <...>.onclick = function() { ...i...; };    

})(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:16:47.313

在 ECMAScript 5 中，您可以继续使用`bind`将参数绑定到您的函数：

```
document.getElementById('result' + count).onclick = process.bind(null, i); 
```

如果您不必担心 Internet Explorer 8 和更早版本，那就太好了。

# c# - C# 转换函数命名约定

> ID：11660040
> 
> 赞同：4
> 
> 时间：2012-07-25T23:11:47.513
> 
> 标签：c#, naming-conventions

我有一个将对象转换为可为空的 int 的函数：

```
public int? ToInt(object x) { ... } 
```

现在我需要另一个函数，如果无法进行转换，它将返回 0 而不是 null：

```
public int ToIntSomeOtherName(object x) { ... } 
```

其他功能的好名字是什么？我知道这似乎微不足道，但我会在很多地方使用这些函数，一个好的命名约定将是一大优势。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T23:13:53.323

我认为`ToInt`你的第二种方法更好：

```
public int ToInt(object x) { ... } 
```

您可以重命名第一个：

```
public int? ToIntOrNull(object x) { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T23:14:05.110

ToIntOrDefault 怎么样？

这是 IEnumerable 接口 (FirstOrDefault) 使用的约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T23:14:53.213

方法的名称首先应该是您（以及您的公司或团队）可以识别和理解的名称。

然而，有时名称会变得笨拙。我强烈建议使用 XML 注释来提供有关您的方法的功能的正确文档：

```
/// <summary>
/// Converts an object to an int.
/// If conversion is not possible, a default int value of 0 is returned.
/// </summary>
/// <param name="x">Object to convert to int.</param>
public int ToInt_NotNull(object x) { ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T23:15:19.163

也许`ToZeroForNull`可能是您方法的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T23:18:02.623

DefaultOrValue 怎么样，这将类似于 String.IsNullOrEmpty 的等效名称

```
public int DefaultOrValue(object x)
{ 
  int? intconverted = ToInt(x);
  return intconverted.HasValue ? intconverted.Value : 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T23:24:14.343

相当随意，但是如果它需要是整数，我使用 ToInt，如果它可以为空，我使用 AsInt。这与语言对“as”关键字的使用相似。我还将这些方法作为“对象”的扩展方法，它消除了对类型和空值的任何预检查。我还建议 ToInt 利用 AsInt，这样您就不会在解析逻辑上加倍努力。

# ruby-on-rails - 如何单独停止 phusion 乘客？

> ID：11660045
> 
> 赞同：4
> 
> 时间：2012-07-25T23:12:29.737
> 
> 标签：ruby-on-rails, ruby, passenger, phusion

我不知道如何单独停止 phusion 乘客。我有 2 个实例在 8000 端口运行一个，另一个在 8001 运行。谁能告诉我如何在每个代理上停止乘客。因为我在 8001 只需要一个。而且因为有两个实例，它占用了双倍的内存。请帮助我，我在dreamhost vps上。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-25T23:33:58.890

试试这个

```
passenger stop -p 8000 
```

或者

```
passenger stop --pid-file tmp/pids/passenger.pid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T05:54:37.490

```
passenger stop --pid-file tmp/pids/passenger.8000.pid 
```

和

```
passenger stop --pid-file tmp/pids/passenger.8001.pid 
```

将停止这两个端口上的两个服务器。

# php - 从现在开始仅查询年月日（）

> ID：11660046
> 
> 赞同：0
> 
> 时间：2012-07-25T23:12:41.497
> 
> 标签：php, mysql, date

我将日期插入数据库，`NOW()`然后查询结果。这是代码。

```
 function get_content($id = ''){

if($id != ''):
    $id = mysql_real_escape_string($id);
    $sql = "SELECT * FROM cms_content WHERE id = '$id'";

    $return = '<p><a href="index.php">Back to Content</a></p>';
else:
    $sql = "SELECT * FROM cms_content ORDER BY id DESC";
endif;

    $res = mysql_query($sql) or die(mysql_error());

    if(mysql_num_rows($res) != 0):
        while($row = mysql_fetch_assoc($res)) {
            echo '<h1><a href="index.php?id=' . $row['id'] . ' "> ' . $row['title'] . '</a></h1>';
            echo '<p>' . stripslashes($row['body']) . '</p>';
            **echo '<p>' . $row['date_posted'] . '</p>';**
            }
    else:
        echo '<p> You broke it!, this post dosn\'t exsist!';
    endif;

    echo $return; 
```

这

```
echo '<p>' . $row['date_posted'] . '</p>'; 
```

是我回显日期的地方。当我从数据库中回显此内容时，我得到 2012-07-25 19:00:46，因为这就是数据库中的内容。我的问题是我将如何回显这一天，然后回显月份，然后是年份。理想情况下，这些都是单独的回声，所以我可以不同的风格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:19:05.357

这更方便，代码更少。

```
$date = new DateTime($row['date_posted']);
$day = date->format('d');
$month = date->format('F');
$year = date->format('Y'); 
```

资源：[http ://www.php.net/manual/en/class.datetime.php](http://www.php.net/manual/en/class.datetime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:16:47.800

由于格式是已知的，您可以简单地使用它：

```
list($year,$month,$day) = explode("-",substr($row['date_posted'],0,10)); 
```

然后你可以随心所欲地回显这些变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T23:18:45.213

另一种选择是直接在 SQL 中执行此操作，使用 *date_format* 函数：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T23:15:17.217

```
$date = strtotime($row['date_posted'];
echo date('d', $date);
echo date('m', $date);
echo date('Y', $date); 
```

或者

```
$date = new DateTime($row['date_posted']);
echo $date->format('Y'); 
```

ETC

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T23:17:15.433

您将使用`php`内置`date()`函数：[http ://us.php.net/manual/en/function.date.php](http://us.php.net/manual/en/function.date.php)

```
echo "<p>".date('j M, Y', $row['date_posted'])."</p>";
// would output <p>25 July, 2012</p> 
```

这可以修改为您想要的任何格式。

# django - 聚合后的django过滤

> ID：11660049
> 
> 赞同：0
> 
> 时间：2012-07-25T23:13:02.583
> 
> 标签：django, filter, aggregation

假设我有一个聚合来显示每个销售代表创建的订单总数：

```
orders.values('sales_rep__username', 'sales_rep__email').annotate(Count('sales_rep')) 
```

那么我该如何只选择创建了 100 多个订单的销售代表呢？鉴于订单表有太多记录无法遍历代码。

注意：我只能考虑编写自己的自定义 SQL 语句，我的一个同事想出了一个 hack 使用 extra() 方法来注入自定义 where 子查询，但它没有针对 sql 执行计划进行优化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:28:50.393

命名带注释的值并在过滤器中使用它。

```
orders.values('sales_rep__username', 'sales_rep__email').annotate(order_count=Count('sales_rep')).filter(order_count__gt=100) 
```

# python - 从 OBJ 文件中查找网格边界框所需的简单 Python 算法

> ID：11660051
> 
> 赞同：1
> 
> 时间：2012-07-25T23:13:14.370
> 
> 标签：python, .obj

我正在尝试使用 Python 和 OBJ 文件的打包问题。我是 python 新手，不知道如何操作 OBJ 文件顶点来找到最佳边界框。任何示例 python 代码让我开始？这是一个简单的盒子 OBJ 文件，我需要将其放入更大的容器中。简而言之，对象 X 是否可以适合对象 Y。那么最终有多少 x 可以以最优解适合 Y，但那是以后的事了。

这是小型和大型盒子 Small 的 .OBJ 文件：

```
# Rhino 
```

v -5 -5 0 v -5 -5 5 v 0 -5 0 v 0 -5 5 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 -1 0 vn 0 -1 0 vn 0 -1 0 vn 0 -1 0 f 4/4/4 2/2/2 1/1/1 3/3/3 v 0 -5 0 v 0 -5 5 v 0 0 0 v 0 0 5 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 1 0 0 vn 1 0 0 vn 1 0 0 vn 1 0 0 f 8/8/8 6/6/6 5/5/5 7/7/7 v 0 0 0 v 0 0 5 v -5 0 0 v -5 0 5 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 1 0 vn 0 1 0 vn 0 1 0 vn 0 1 0 f 12/12/12 10/10/10 9 /9/9 11/11/11 v -5 0 0 v -5 0 5 v -5 -5 0 v -5 -5 5 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn -1 0 0 vn - 1 0 0 vn -1 0 0 vn -1 0 0 f 16/16/16 14/14/14 13/13/13 15/15/15 v -5 -5 0 v 0 -5 0 v -5 0 0 v 0 0 0 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 0 -1 vn 0 0 -1 vn 0 0 -1 vn 0 0 -1 f 20/20/20 18/18/18 17/17 /17 19 月 19 日 v -5 -5 5 v -5 0 5 v 0 -5 5 v 0 0 5 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 0 1 vn 0 0 1 vn 0 0 1 vn 0 0 1 f 24/24/24 22/22/22 21/21/21 23/23/23

更大的盒子：

```
# Rhino 
```

v 0 0 0 v 0 0 20 v 0 20 0 v 0 20 20 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn -1 -0 -0 vn -1 -0 -0 vn -1 -0 -0 vn -1 -0 -0 f 4/4/4 3/3/3 1/1/1 2/2/2 v 0 20 0 v 0 20 20 v 20 20 0 v 20 20 20 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 1 0 vn 0 1 0 vn 0 1 0 vn 0 1 0 f 8/8/8 7/7/7 5/5/5 6/6/6 v 20 20 0 v 20 20 20 v 20 0 0 v 20 0 20 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 1 0 0 vn 1 0 0 vn 1 0 0 vn 1 0 0 f 12/12/12 11/11/11 9/9 /9 10/10/10 v 20 0 0 v 20 0 20 v 0 0 0 v 0 0 20 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 -1 0 vn 0 -1 0 vn 0 -1 0 vn 0 -1 0 f 16/16/16 15/15/15 13/13/13 14/14/14 v 0 0 0 v 0 20 0 v 20 0 0 v 20 20 0 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn -0 -0 -1 vn -0 -0 -1 vn -0 -0 -1 vn -0 -0 -1 f 20/20/20 19/19/19 17/17/17 18/ 18/18 v 0 0 20 v 20 0 20 v 0 20 20 v 20 20 20 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 0 1 vn 0 0 1 vn 0 0 1 vn 0 0 1 f 24/ 24/24 23/23/23 21/21/21 22/22/22

```
enter code here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:06:42.200

首先回答标题中的问题：

*   将每个目标文件加载为顶点列表，我假设您已经编写了一些代码来在 python 中加载 .obj 文件（如果没有，您可以调整这个[loadObj()](http://www.nandnor.net/?p=86)函数，例如，让它返回 verts 变量）
*   对于每个对象，计算边界框，例如：

* * *

```
def verts_to_bbox(verts):
    xs = [v[0] for v in verts]
    ys = [v[1] for v in verts]
    zs = [v[2] for v in verts]
    return (min(xs), max(xs), min(ys), max(ys), min(zs), max(zs)) 
```

* * *

现在开始测试一个对象是否“适合”另一个对象。基本上，您想知道一个边界框在所有维度上是否等于或小于另一个边界框，据我了解。所以，

*   计算每个边界框在 x、y 和 z 维度上的大小，例如：

* * *

```
def bbox_size(bbox):
    # return tuple with sizes (dx, dy, dz)
    return (bbox[1] - bbox[0], bbox[3] - bbox[2], bbox[5] - bbox[4])

def fits_bbox(bigbox, smallbox):
    bdx, bdy, bdz = bbox_size(bigbox)
    sdx, sdy, sdz = bbox_size(smallbox)
    # return True if small box fits in bigbox in all three dimensions
    return (sdx<bdx and sdy<bdy and sdz<bdz) 
```

* * *

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:08:14.493

您将需要遍历 obj 数据以查找“v”并检查以下 xy 和 z 坐标是否并在每次遇到它时记录最高和最低值。以下代码打印出每个维度的最高和最低值，然后为您提供该边界框

```
obj = 'v -5 -5 0 v -5 -5 5 v 0 -5 0 v 0 -5 5 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 -1 0 vn 0 -1 0 vn 0 -1 0 vn 0 -1 0 f 4/4/4 2/2/2 1/1/1 3/3/3 v 0 -5 0 v 0 -5 5 v 0 0 0 v 0 0 5 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 1 0 0 vn 1 0 0 vn 1 0 0 vn 1 0 0 f 8/8/8 6/6/6 5/5/5 7/7/7 v 0 0 0 v 0 0 5 v -5 0 0 v -5 0 5 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 1 0 vn 0 1 0 vn 0 1 0 vn 0 1 0 f 12/12/12 10/10/10 9/9/9 11/11/11 v -5 0 0 v -5 0 5 v -5 -5 0 v -5 -5 5 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn -1 0 0 vn -1 0 0 vn -1 0 0 vn -1 0 0 f 16/16/16 14/14/14 13/13/13 15/15/15 v -5 -5 0 v 0 -5 0 v -5 0 0 v 0 0 0 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 0 -1 vn 0 0 -1 vn 0 0 -1 vn 0 0 -1 f 20/20/20 18/18/18 17/17/17 19/19/19 v -5 -5 5 v -5 0 5 v 0 -5 5 v 0 0 5 vt 0 0 vt 0 1 vt 1 0 vt 1 1 vn 0 0 1 vn 0 0 1 vn 0 0 1 vn 0 0 1 f 24/24/24 22/22/22 21/21/21 23/23/23'

elements = obj.split(' ')

x_min = 0.0
x_max = 0.0
y_min = 0.0
y_max = 0.0
z_min = 0.0
z_max = 0.0

i = 0

while i < len(elements):
    if elements[i] == 'v':
        #find min and max x value
        if float(elements[i + 1]) < x_min:
            x_min = float(elements[i + 1])
        elif float(elements[i + 1]) > x_max:
            x_max = float(elements[i + 1])

        #find min and max y value
        if float(elements[i + 2]) < y_min:
            y_min = float(elements[i + 2])
        elif float(elements[i + 2]) > y_max:
            y_max = float(elements[i + 2])

        #find min and max x value
        if float(elements[i + 3]) < z_min:
            z_min = float(elements[i + 3])
        elif float(elements[i + 3]) > z_max:
            z_max = float(elements[i + 3]) 

        #incriment the counter int by 4 as we know the next 4 elements are not a vertex
        i += 4

    else:
        i += 1

print 'x_min = ' + str(x_min)
print 'x_max = ' + str(x_max)   
print 'y_min = ' + str(y_min)
print 'y_max = ' + str(y_max)
print 'z_min = ' + str(z_min)
print 'z_max = ' + str(z_max)
print ''
print 'x_widh = ' + (str(x_max - x_min))
print 'y_widh = ' + (str(y_max - y_min))
print 'z_widh = ' + (str(z_max - z_min)) 
```

这是我得到的输出

```
x_min = -5.0
x_max = 0.0
y_min = -5.0
y_max = 0.0
z_min = 0.0
z_max = 5.0

x_widh = 5.0
y_widh = 5.0
z_widh = 5.0 
```

希望这是有道理的

# r - R中的非线性回归（nls）问题

> ID：11660052
> 
> 赞同：3
> 
> 时间：2012-07-25T23:13:18.857
> 
> 标签：r, nls

我正在尝试解决 R 中的非线性回归并收到语法错误消息。我曾尝试调试并招募了一位同事，但无济于事。我不确定该程序是否设置正确，因为我是 R 新手。

任何见解都会很棒-

谢谢

```
## read in files from snotel sites to develop parameters
BASE1 <-read.csv("base_data.csv")

## work with the base file first
attach(BASE1)

## set parameters
S1 <- seq(-10,10,0.5)
S2 <- seq(0.1,2.5,0.2)
M1 <- seq(-10,10,0.5)
M2 <- seq(0.1,2.5,0.2)

## define the sub-functions used in the model
S_EXP <- (exp(-(PRISM_T + S1)/S2))
M_EXP <- (exp(-(PRISM_T + M1)/M2))
C_SNOW <- (1 - (1/(1 + S_EXP)))
C_MELT <-(1/(1 + M_EXP))

swe.mod <- nls(SNOTEL_SWE ~ SURPLUS * C_SNOW + PREV_SWE * (1 - C_MELT),data=BASE1,
+ start=list(S1 = -10, S2 = 0.1, M1 = -10, M2 = 0.1) , trace=TRUE) 
```

玩具数据集：

```
BASE1<-structure(list(OBS = 1:61, SURPLUS = c(55.9, 124.5, 138.4, 124.1, 107.8, 102.9, 84.8, 74.4, 40.1, -23.1, -23.1, 20.7, 73.8, 267.9, 282.6, 244.2, 234.9, 199, 118.9, 55, -8.1, -59.4, -51.7, -10.4, 23.6, 111, 111.7, 107.7, 88.2, 88.1, 54.1, 18.8, -17.1, -65.4, -54.1, -16, 62.6, 178.5, 201, 192.8, 170.5, 173.5, 85.6, 30.4, -15.3, -69.7, -50.5, -4.8, 90, 243.2, 247.7, 234.6, 213.7, 194, 105.5, 16.6, -21.9, -73.8, -62.7, -6.8, 74.8), PRISM_T = c(1.9, -3.6, -6.3, -7, -5.7, -4.2, -1.3, 2.4, 5.8, 10.2, 10.4, 6.5, 5.9, 0.4, -2.3, -2.9, -2.1, -0.7, 1.4, 4.7, 8.6, 13.2, 13.3, 10.4, 5, -0.2, -3, -4.3, -2, 0, 2.1, 5.8, 9.8, 14.6, 14.4, 10.9, 7.1, 1.7, -0.3, -1.2, -0.6, 0.4, 2.2, 6.1, 9.7, 14.8, 14.8, 12, 8.5, 3, 1.3, 0.3, 1.3, 1.5, 2.8, 6.6, 10.6, 15.2, 15.7, 13.3, 7), SNOTEL_SWE = c(7.62, 50.8, 180.34, 317.5, 434.34, 562.61, 660.4, 622.3, 306.07, 36.83, 0, 0, 2.54, 49.53, 241.3, 488.95, 711.2, 895.35, 1093.47, 957.58, 372.11, 0, 0, 0, 1.27, 25.4, 137.16, 256.54, 379.73, 501.65, 549.91, 287.02, 8.89, 0, 0, 0, 2.54, 27.94, 177.8, 318.77, 459.74, 612.14, 730.25, 584.2, 142.24, 0, 0, 0, 0, 6.35, 91.44, 167.64, 256.54, 330.2, 267.97, 129.54, 0, 0, 0, 0, 10.16), PREV_SWE = c(0, 7.62, 50.8, 180.34, 317.5, 434.34, 562.61, 660.4, 622.3, 306.07, 36.83, 0, 0, 2.54, 49.53, 241.3, 488.95, 711.2, 895.35, 1093.47, 957.58, 372.11, 0, 0, 0, 1.27, 25.4, 137.16, 256.54, 379.73, 501.65, 549.91, 287.02, 8.89, 0, 0, 0, 2.54, 27.94, 177.8, 318.77, 459.74, 612.14, 730.25, 584.2, 142.24, 0, 0, 0, 0, 6.35, 91.44, 167.64, 256.54, 330.2, 267.97, 129.54, 0, 0, 0, 0)), .Names = c("OBS", "SURPLUS", "PRISM_T", "SNOTEL_SWE", "PREV_SWE"), class = "data.frame", row.names = c(NA, -61L)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:06:49.720

有点难以理解你想要做什么，但我想我可以猜到。您不能像正在做的那样定义“子功能”。您必须在模型中明确指定它们。例如，您的公式应该是：

```
swe.mod <- 
nls(
  SNOTEL_SWE ~ SURPLUS * (1-(1/(1 + (exp(-(PRISM_T + S1)/S2)))))
  + PREV_SWE * (1 - 1/(1 + (exp(-(PRISM_T + M1)/M2)))),
data=BASE1,
start=list(S1 = -10, S2 = 0.1, M1 = -10, M2 = 0.1)) 
```

如果您觉得这有点难看，您可以使用函数来定义您的“子函数”，如`?nls`. 尝试这个：

```
S_EXP  <- function(PRISM_T,S1,S2) (exp(-(PRISM_T + S1)/S2))
C_SNOW <- function(PRISM_T,S1,S2) (1 - (1/(1 + S_EXP(PRISM_T,S1,S2) )))
M_EXP  <- function(PRISM_T,M1,M2) (exp(-(PRISM_T + M1)/M2))
C_MELT <- function(PRISM_T,M1,M2) (1/(1 + M_EXP(PRISM_T,M1,M2)))

swe.mod <- nls(SNOTEL_SWE ~ SURPLUS * C_SNOW(PRISM_T,S1,S2) 
+ PREV_SWE * (1 - C_MELT(PRISM_T,M1,M2)),
data=BASE1,start=list(S1 = -10, S2 = 0.1, M1 = -10, M2 = 0.1), trace=TRUE) 
```

我无法弄清楚你的意思是：

```
## set parameters
S1 <- seq(-10,10,0.5)
S2 <- seq(0.1,2.5,0.2)
M1 <- seq(-10,10,0.5)
M2 <- seq(0.1,2.5,0.2) 
```

这些参数是你想要适应的，对吧？您只需要指定初始参数，就像您所做的那样。另外，避免`attach`. 你不需要它，它会导致很难找到错误。

结果如下：

```
Formula: SNOTEL_SWE ~ SURPLUS * C_SNOW(PRISM_T, S1, S2) + PREV_SWE * (1 - 
    C_MELT(PRISM_T, M1, M2))

Parameters:
   Estimate Std. Error t value Pr(>|t|)    
S1  -0.6546     0.4222  -1.550  0.12657    
S2   1.4182     0.4907   2.890  0.00543 ** 
M1  -7.4500     0.2335 -31.906  < 2e-16 ***
M2   1.6118     0.2046   7.879 1.09e-10 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 51.01 on 57 degrees of freedom

Number of iterations to convergence: 20 
Achieved convergence tolerance: 6.617e-06 
```

# bash - 来自一个 bash 脚本的多个进程

> ID：11660053
> 
> 赞同：0
> 
> 时间：2012-07-25T23:13:23.510
> 
> 标签：bash

> **可能重复：**
> [异步 shell 命令](https://stackoverflow.com/questions/2368137/asynchronous-shell-commands)

我有 2 个 bash 脚本，scriptA 和 scriptB。在 scriptA 中调用 scriptB。有没有办法让 scriptA 在 scriptB 之前退出？谢谢你。

# php - perl cgi 无法从 php 复选框数组中打印元素

> ID：11660057
> 
> 赞同：1
> 
> 时间：2012-07-25T23:13:36.427
> 
> 标签：php, perl, cgi

我有一个 HTML 表单，它将复选框值作为数组发送到 Perl CGI 脚本。但是，由于该站点主要使用 PHP 重建，因此复选框数组的处理方式有所不同。我有一个返回表单的 PHP 函数。它看起来像这样：

```
<td>Profiles: </td>
<td><input type=\"checkbox\" value=\"oneconnect\" name=\"v1-profile[]\">OneConnect <br />
<input type=\"checkbox\" value=\"http\" name=\"v1-profile[]\">HTTP <br />
<input type=\"checkbox\" value=\"xforwardedfor\" name=\"v1-profile[]\">Xforwarded-for</td>
</tr> 
```

然后我将其发送到 Perl CGI 脚本

```
use CGI qw(:standard);
my $q = new CGI;
my @profiles1 = $q->param("v1-profile"); 
```

当我尝试打印数组的元素时，我只看到“数组”这个词作为输出。

```
foreach my $r (@profiles1) {
print "$r\n";
} 
```

我也尝试了一些不起作用的东西。

```
foreach my $r (@profiles1) {
foreach my $v (@$r) {
print "$v\n";
}
} 
```

我将如何访问“@profiles1”数组的元素？感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:17:26.263

变量名的结尾`[]`是 PHP 主义——它不是标准的，并且没有被 Perl 的 CGI 模块（或 PHP 以外的任何东西，真的）特别对待。如果可以，请将其从表单中删除。如果没有，您应该能够通过在名称中包含括号来从 Perl 获取参数：

```
my @profiles = $q->param("v1-profile[]"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:43:53.193

不确定你的问题是什么。这对我来说似乎工作得很好。这是我建造的小试验台。

测试.html：

```
<html>
  <head>
    <title>Test</title>
  </head>
  <body>
    <h1>Test</h1>
    <form action="/cgi-bin/form">
      <table>
        <tr>
          <td>Profiles: </td>
          <td><input type="checkbox" value="oneconnect" name="v1-profile[]">OneConnect <br />
          <input type="checkbox" value="http" name="v1-profile[]">HTTP <br />
          <input type="checkbox" value="xforwardedfor" name="v1-profile[]">Xforwarded-for<br />
          <input type="submit"></td>
        </tr>
      </table>
    </form>
  </body>
</html> 
```

cgi-bin/表格：

```
#!/usr/bin/perl

use strict;
use warnings;
use CGI;

my $q = CGI->new;

print $q->header(-type => 'text/plain');

my @profiles = $q->param('v1-profile[]');

foreach (@profiles) {
  print "$_\n";
} 
```

我完全看到了我的期望。我选中的每个复选框都显示在输出中。

一件事要检查。提交表单后，您的 URL 是什么样的？我的看起来像这样（选中了两个复选框）。

```
http://localhost/cgi-bin/form?v1-profile%5B%5D=oneconnect&v1-profile%5B%5D=xforwardedfor 
```

请注意，输入名称中的方括号已经过 URL 编码。这就是应该发生的事情。

所以问题是，这与您的设置有何不同？

# ajax - Ajax url 树导航

> ID：11660058
> 
> 赞同：0
> 
> 时间：2012-07-25T23:13:41.687
> 
> 标签：ajax, url, jquery, hash, browser-history

我将如何制作一个使用 ajax 和 history.pushstate 的网站？我知道在页面上而不是链接上，您可以调用脚本来 ajax 页面并推送历史记录，但是当有人输入 URL 时呢？

例如，如果我在 domain.com 有一个页面，并且有人输入 domain.com/profiles/3325/scott，它怎么知道去 domain.com 并加载数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:35:32.153

我不太了解您的疑问，但在这种情况下（domain.com/profiles/3325/scott），您将不得不使用一些框架或项目模式来处理该页面的请求。事实上，您应该对所有页面执行此操作。

我的意思是你需要使用类似 MVC 模式的东西，比如 Spring MVC，它可以帮助你让或不让一个人访问一些信息。这样，您就不必担心浏览器中的历史记录，因为每次用户发出请求时，都会检索新数据，而 MVC 将允许或不允许用户访问它。

# jquery - jConfirm 来自注入的 HTML 元素的访问值

> ID：11660066
> 
> 赞同：0
> 
> 时间：2012-07-25T23:14:43.673
> 
> 标签：jquery

我有这段代码，它制作了一个带有几个输入的花哨的 jQuery 警报框：

```
//jConfirm( message, [title, callback] )
    $('#buttonNew').click(function(){
             jConfirm('<form><input id="postTitle" type="text"/><br/><textarea id="postBody"></textarea></form>', 'New Post',
             function(r){if(r==true){
                    alert($('#postTitle').val()); //Expecting the input value but getting "undefined"
                                  }
                         });
                         }) 
```

当我尝试使用输入到输入中的值（例如使用 alert() 进行测试，如上所示）时，我得到“未定义”。如何从回调函数中访问注入的 HTML 输入的那些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:25:10.270

您发布的代码似乎在语法上是正确的，并且回调中的条件语句显然是正确的（因此发出警报） - 这一定意味着它无法检索元素的值。

我很确定这是因为 jQuery 在文档 (DOM) 准备就绪时被初始化，所以注入的 HTML 在那个时候实际上并不存在 - 它稍后被注入到 DOM 中；动态的。

我似乎找不到任何使用这样的 HTML 表单的 jConfirm 示例；所以我会四处走动并假设这是问题所在。

[在 jQuery 网站](http://forum.jquery.com/topic/reload-dom-after-injecting-form-elements)上有一个关于这个问题的很好的讨论。您基本上需要重新加载 DOM，以便 jQuery 了解它正在使用的所有元素。将 HTML 动态嵌入页面时可能会导致其他问题，在涉及事件处理程序的情况下，您可以只使用[$.live()](http://api.jquery.com/live/)（[如此处所示](https://stackoverflow.com/questions/815074/jquery-doesnt-see-new-elements)）但是访问这些元素的值似乎是一件复杂得多的事情！

如果是这种情况，那么一个简单的小解决方法就是做这样的事情......

```
var title; //in global scope.. yucky!

/* set a -live- event listener to fire whenever 
** postTitle is modified; dumping the value in to
** our global var */
$('#postTitle').live('change',function(r){
    title = $(this).val();
});

/* then just access the 'title' var */ 
```

所有这一切只是有一个事件侦听器，该侦听器附加到*任何*具有 'postTitle' id 的元素，*无论它们何时插入到 DOM*中。每当更改“postTitle”时，都会调用此事件侦听器并将新值转储到全局变量中；即 - 允许您在范围内的任何地方访问它 - 所以您的整个代码库。（我通常不提倡全局变量——但在这种情况下，它更像是概念验证/故障排除步骤；））

由于这可能不是问题，请尝试查看您是否可以通过开发人员控制台访问该值。（萤火虫等）然后尝试检查不同的浏览器，看看它是否是一种普遍的行为。我认为最有可能的问题是 DOM。在这种情况下，如果不使用全局变量，我想不出很多方法来解决它。（好吧，没有简单的方法）

# tcp - 如何使用 gsocket 管理多包发送？

> ID：11660068
> 
> 赞同：1
> 
> 时间：2012-07-25T23:14:45.293
> 
> 标签：tcp, packet

我有一个关于 tcp/ip 套接字网络的问题。基本上它就在那里：我可以利用 tcp/ip 的任何部分来帮助管理多包发送。例如，我想发送一个 100 mb 的二进制文件，它需要 70-80 个 tcp 数据包。与此同时，我在另一边有一个相对较快的轮询接收。我的接收是否必须单独接收每个数据包并将数据包“缝合”在一起，寻找要达到的大小（它可以查看操作码并确定大小）或者有什么方法可以告诉 tcp 说“嘿，我在这里发送 100 mb，完成后让他们知道。”

我正在使用 glib 的低级套接字库（gsocket）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-13T12:36:28.500

当使用像协议缓冲区这样的二进制编码时，您将通过插入一个标头来包装实际的有效负载，该标头将包含在另一端解码有效负载所需的信息。

假设附加 8 个字节，其中前 4 个字节表示编码消息的类型，后 4 个字节表示整个消息的长度。

然后，在接收端，您将读取此标头，它是有效负载的一部分，以确定消息的类型和长度。这使您可以在一个有效负载中组合多条消息，或跨数据包拆分消息并可靠地重新组合它们。

# php - 表单数据未通过

> ID：11660072
> 
> 赞同：1
> 
> 时间：2012-07-25T23:15:14.597
> 
> 标签：php, javascript, html, forms

我正在使用 JavaScript 练习表单验证，但是当我尝试从它提交的页面中检索数据时，我无法获取它。

**表单.html**

```
<body>
    Hello.<br />
    <form onsubmit="return validate()" action="process.php" method="POST">
    Enter name: <input type="text" id="name" /><br />
    Enter phone number: <input type="text" id="number" /><br />
    Enter password: <input type="password" id="paswd" /><br />
    Is there anything else you would like to add: <input type="text" id="anything" /><br />
    <input type="submit" value="Check Form" />
    </form>
</body> 
```

**进程.php**

```
<?php
echo 'Here: '.$_POST['number']
?> 
```

无论我使用什么索引，我都会得到“未定义索引：第 2 行”。我究竟做错了什么？

编辑：所以我不能使用`id`我需要的属性`name`？由于所有`name`s 的值都将与对应的值相同，因此是否有防止编码冗余的方法`id`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T23:17:22.067

您需要`name`在字段中添加属性

```
<input type="text" id="number" name="number" /> 
```

`$_POST`在字段中查找`name`属性以捕获字段值而不是`id`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T23:25:59.957

您的输入需要元素的名称。

如：

```
<input type="text" id="number" name="number" /> 
```

Php 获取查看这些名称的表单数据，而不是 id。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T23:17:46.610

你忘`name`了输入：

```
<input type="text" id="number" name="number" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T23:18:10.317

您需要为表单元素命名。

```
<input type="password" id="paswd" name="paswd" /> 
```

有趣的是，名称和 ID 共享相同的命名空间。如果您真的不需要这些 ID，请保留它们。在 validate 函数中，您始终可以使用`elements`表单对象访问所有元素。

```
// called onsubmit
var validate = function(e) {
    if (this.elements["paswd"].value.length < 4) {
        alert("password needs to have at least 4 characters");
        return false;
    }
    return true
}; 
```

我通常将输入类型附加到我的 id 以将它们与字段名称区分开来

```
<label for="paswd-txt">Password: </label>
<input type="text" name="paswd" id="paswd-txt" />

<label for="save-cb">Remember me: </label>
<input type="checkbox" name="save" id="save-cb" value="1"/> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-27T01:20:35.467

因此，就像 Vitor Braga 说的那样，您的输入需要元素的名称，但只有在您使用 PHP 在提交中处理表单的值时才需要这个，如果您使用 javascript 进行验证，就像您所说的那样，您可以获得像这样的值：

document.getElementById("number").value

# assembly - 在 Emacs Lisp 中使用 asm-mode 识别 C++ 样式注释

> ID：11660077
> 
> 赞同：2
> 
> 时间：2012-07-25T23:15:20.647
> 
> 标签：assembly, emacs, comments, lisp

在 Emacs 中，如何调整 lisp 文件以识别 asm 模式下的 C++ 样式注释？我有一个处理 asm 代码但使用 C++ 样式注释的编译器。我希望 emacs 识别 C++ 风格的注释，并将包裹在 /* 、 */ 中的大块文本显示为注释。asm-mode (?\;) 的默认注释开始字符可以忽略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:17:19.360

你在使用 Emacs 21 吗？如果我正确阅读了版本历史记录，`//`则从 GNU Emacs 22 开始支持样式注释。

`M-x` `emacs-version`告诉你你正在运行什么版本。

# jmeter - 如何将jmeter摘要报告转储到文件中

> ID：11660078
> 
> 赞同：1
> 
> 时间：2012-07-25T23:15:25.693
> 
> 标签：jmeter

在 Jmeter 中，当我在 Filename 文本框中设置文件名、配置结果并运行测试时，我看到该文件没有 Min、Max、Avg Reponse Times，它们显示在摘要报告中。
如何将这些值添加到 Jmeter 中的报告中？
或者有什么插件可以用来做这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:26:02.923

[我相信http://code.google.com/p/jmeter-plugins/wiki/JMeterPluginsCMD](http://code.google.com/p/jmeter-plugins/wiki/JMeterPluginsCMD)上的 JMeterPluginsCMD可以保存包含您在 UI 中看到的所有数据的聚合报告（如 min/max/avg）。它只保存在 CSV，afaik

# python - 如何在 Python 中结合初始化和分配字典？

> ID：11660081
> 
> 赞同：0
> 
> 时间：2012-07-25T23:15:37.440
> 
> 标签：python

我想知道是否有任何交易被选中两次或更多。

为了便于阅读，下面的例子被删减了。但从本质上讲，我认为最好的解决方案是使用字典，并且每当任何交易容器（例如 deal_pot_1）包含相同的交易两次​​或更多次时，我都会将其捕获为错误。

以下代码对我很有帮助，但是它本身会引发异常......

```
 if deal_pot_1:
       duplicates[deal_pot_1.pk] += 1

    if deal_pot_2:
        duplicates[deal_pot_2.pk] += 1

    if deal_pot_3:
        duplicates[deal_pot_3.pk] += 1 
```

...如果我没有像下面这样事先初始化它。

```
 if deal_pot_1:
       duplicates[deal_pot_1.pk] = 0

    if deal_pot_2:
        duplicates[deal_pot_2.pk] = 0

    if deal_pot_3:
        duplicates[deal_pot_3.pk] = 0 
```

反正有没有简化/组合这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:17:41.987

基本上有两种选择：

1.  使用`collections.defaultdict(int)`. 在访问未知密钥时，它将相应的值初始化为 0。

2.  对于字典`d`，你可以做

    ```
    d[x] = d.get(x, 0) + 1 
    ```

    在单个语句中初始化和递增。

**编辑**：第三个选项是`collections.Counter`，正如 Mark Byers 所指出的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T23:18:20.160

看起来像你想要[`collections.Counter`](http://docs.python.org/library/collections.html#counter-objects)的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T23:17:20.450

查看[collections.defaultdict](http://docs.python.org/library/collections.html#collections.defaultdict)。看起来像你想要`defaultdict(int)`的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T23:21:40.190

所以你只想知道是否有重复的值？然后你可以使用一个[set](http://docs.python.org/tutorial/datastructures.html#sets)：

```
duplicates = set()
for value in values:
    if value in duplicates():
        raise Exception('Duplicate!')
    duplicates.add(value) 
```

如果您想查找所有重复项：

```
maybe_duplicates = set()
confirmed_duplicates = set()

for value in values:
    if value in maybe_duplicates():
        confirmed_duplicates.add(value)
    else:
        maybe_duplicates.add(value)

if confirmed_duplicates:
    raise Exception('Duplicates: ' + ', '.join(map(str, confirmed_duplicates))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T00:19:50.577

一套可能是去这里的方式 - collections.defaultdict 可能比你需要的要多。

不要忘记为你的牌制定一个规范的顺序——比如按照花色和面值从小到大对牌进行排序。否则，您可能无法检测到某些重复项。

# email - 如何设置“提交电子邮件”表单

> ID：11660088
> 
> 赞同：0
> 
> 时间：2012-07-25T23:16:17.830
> 
> 标签：email

我完全是网页设计的新手。我的问题是，我需要设置什么才能在“即将推出”页面上有“提交电子邮件”表单以进行更新？我可以将消息和电子邮件定向到现有的电子邮件地址吗？还是我需要在托管服务器上设置数据库？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:22:54.783

您可以：

*   只需在页面中添加一个 mailto: 链接以及电子邮件地址，并允许人们以这种方式取得联系

*   或在页面上设置a，然后在提交此表单时使用服务器端编码（例如PHP的邮件功能）发送一封电子邮件。如何做到这一点的确切细节取决于您的 Web 服务器能够支持什么以及您想要使用的表单有多复杂。您不需要在服务器上运行数据库来执行此操作。

使用这两种方法，您都需要小心垃圾邮件，因为您不希望爬虫获取电子邮件地址。

# javascript - 在Javascript中压缩稀疏数组？

> ID：11660090
> 
> 赞同：8
> 
> 时间：2012-07-25T23:16:37.010
> 
> 标签：javascript, arrays, sparse-array

我有一个元素数组，其中条目稀疏。如何轻松地将稀疏数组压缩成密集数组，这样每次循环数据时就不必一直检查空值和未定义值？

以下是一些示例数据：

```
var sparse = [];
sparse[1] = undefined;
sparse[5] = 3;
sparse[10] = null;

var dense = sparseToDenseArray(sparse);
// dense should be [3] 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T23:16:37.010

您可以使用`filter()`与 Firefox、Chrome、IE 9、Opera 和 Safari 网络浏览器兼容的版本。

根据 David Flanagan 的说法，在*Javascript: The Definitive Guide*中，将稀疏数组转换为密集数组的一种简单方法是在其上使用过滤器，如下所示：

```
var dense = sparse.filter(function (x) { return x !== undefined && x != null; }); 
```

这是有效的，因为它会`filter()`跳过丢失的元素，并且仅`true`在 x 不是`undefined`or时才返回`null`。

如果`filter()`不支持，这将压缩一个稀疏数组：

```
var compacted = [];

for(var i = 0; i < sparse.length; i++)
    if(i in sparse)
        compacted.push(sparse[i]); 
```

该示例的完全等价物`filter()`是：

```
var compacted = [];

for(var i = 0; i < sparse.length; i++)
    if(sparse[i] != null)
        compacted.push(sparse[i]); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-01-23T08:48:48.377

在 ES2017 (ES8) 中，这很简单`Object.values(sparseArray)`

例如：

```
const sparseArray = [, , 'foo', 'bar', , 'baz', ,];
const compactArray = Object.values(sparseArray);
console.log(compactArray);
```

请注意，此方法仅删除*gaps*，根据需要向下移动现有数组元素的索引。它不会删除显式设置为`undefined`or的元素`null`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T23:22:54.270

在 vanilla JS 中，适用于所有浏览器：

```
function filt(a) { 
 var b = []; 
 for(var i = 0;i < a.length;i++) { 
  if (a[i] !== undefined && a[i] !== null) { 
   b.push(a[i]); 
  }
 } 
 return b; 
}

> filt([1,undefined,3])
[1, 3] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T23:19:59.897

如果你想在你的代码中包含 underscore.js，你可以在你的数组上使用[compact函数。](http://underscorejs.org/#compact)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-19T10:57:06.343

我不敢相信这里的答案如此有限。首先，我认为压缩稀疏数组有更好、更快的解决方案。我猜一个稀疏数组并不意味着一个带有未定义项孔的数组（[什么是密集数组？](https://stackoverflow.com/q/39030196/4543207)）。稀疏数组应该是一个实际上不存在任何键的数组，除了属于现有但稀疏值的键。因此，如果我们对键进行迭代，我们应该会更有效、更快地完成工作。

好的，我在下面编译了一个测试，向您展示了几种压缩稀疏数组的方法的性能。

```
var ts = 0,
    te = 0,
sparse = new Array(10000000),
 dense = [];
[sparse[2499999], sparse[4999999], sparse[9999999]] = ["first one", "middle one", "last one"];

ts = performance.now();
dense = Object.keys(sparse).map(k => sparse[k]);
te = performance.now();
console.log(dense, "Okeys and map resulted in :" +(te-ts)+ "msecs");

dense = [];

ts = performance.now();
for (var key in sparse) dense.push(sparse[key]);
te = performance.now();
console.log(dense, "for in loop resulted in :" +(te-ts)+ "msecs");

dense = [];

ts = performance.now();
dense = sparse.filter(function (x) { return x !== undefined && x !== null; });
te = performance.now();
console.log(dense, "Array filter resulted in :" +(te-ts)+ "msecs");

dense = [];

ts = performance.now();
for (var i = 0, len = sparse.length; i < len; i++) sparse[i] !== undefined &&
                                                   sparse[i] !== null      &&
                                                   dense.push(sparse[i]);
te = performance.now();
console.log(dense, "For loop resulted in :" +(te-ts)+ "msecs");
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T23:27:15.510

> filter 是 ECMA-262 标准的 JavaScript 扩展；因此，它可能不会出现在该标准的其他实现中。您可以通过在脚本开头插入以下代码来解决此问题，允许在本机不支持它的 ECMA-262 实现中使用过滤器。参考：[**MDN**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)。

跨浏览器解决方案使用`filter`

```
if (!Array.prototype.filter) {  // Add the filter method to the 'Array prototype' if it's not available
    Array.prototype.filter = function(fun /*, thisp*/) {
        var len = this.length >>> 0;
        if (typeof fun != "function") {
            throw new TypeError();
        }

        var res = [];
        var thisp = arguments[1]; 
        for (var i = 0; i < len; i++) {
            if (i in this) {
                var val = this[i];
                if (fun.call(thisp, val, i, this)) {
                    res.push(val);
                }
            }
        }
        return res;
    };
}

var sparse = [];
sparse[1] = undefined;
sparse[5] = 3;
sparse[10] = null;

dense=sparse.filter(function(a){ //Call the `filter` method
    return a!== undefined && a != null;
}); 
```

[**演示。**](http://jsfiddle.net/heera/t73Gt/1/)

# html - JAWS Screenreader % 符号和上标标记

> ID：11660096
> 
> 赞同：1
> 
> 时间：2012-07-25T23:17:08.680
> 
> 标签：html, screen-readers, jaws-screen-reader

我有一个问题^(使用 JAWS 时未读取标签。)

我设法将问题缩小到以下范围：

```
<div>100<sup>1</sup></div> 
```

将被正确解读为“100 上标 1 端上标”

但是当我添加一个 % 符号时：

```
<div>100%<sup>1</sup></div> 
```

它将读作“100% 1”并省略上标标签的声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T17:26:28.653

尝试使用`&sup1;`而不是`<sup>1</sup>`.

[http://accessibleculture.org/research-files/character-references/jaws-we-all.php](http://accessibleculture.org/research-files/character-references/jaws-we-all.php)

# php - 如何获取一行数据并将其存储在数组中？

> ID：11660104
> 
> 赞同：0
> 
> 时间：2012-07-25T23:17:43.773
> 
> 标签：php, mysql

我无法从我的数据库中获取数据并将其排序到一个数组中。

这是我当前的代码：

我正在遍历每个引擎以创建具有每个服务器 ID 的排序数组。

```
for($i=0; $i <= $servers_default_engines_count; $i++){

        //get all servers with this engine type, and get how many
        $query = $db->query("SELECT `id` FROM `cgshop_servers` WHERE `server_engine` = $i");
        $server_id = mysql_fetch_row($query);

        $server[$i] = array();  
        array_push($server[$i], $server_id); 

    }; 
```

mysql_fetch_row 的结果：

```
 [0] => Array
        (
            [0] => Array
                (
                    [0] => 2
                )
        )
    [1] => Array
        (
            [0] => Array
                (
                    [0] => 1
                )
        )
) 
```

还：

```
[0] => Array
        (
        )

    [1] => Array
        (
        )

    [2] => Array
        (
            [0] => 1
        ) 
```

但我希望像这样返回它：() 出于解释原因放置。

```
Array(
   [0] (engine1) => Array(

      [0](server1) => 2 (serverid)
   )
   [1(engine2)] => Array(

      [0](server1) => 1 (serverid)
      [1](server2) => 3 (serverid)
   )
) 
```

这是 mysql 表中的当前数据：cgshop_servers：

```
id   server_name   server_ip    serevr_port    server_engine    source_engine
1    test1         195.62.14.65 15464          1                1
2    test2         195.62.14.63 15464          0                0
3    test3         195.64.14.62 15465          1                1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:21:08.747

你取错了，因为你说你正在使用准备好的语句，下面是更新的代码，你可以使用。

```
$server = array();
for($i=0; $i <= $servers_default_engines_count; $i++){
    //get all servers with this engine type, and get how many
    $sth = $db->prepare("SELECT `id` FROM `cgshop_servers` WHERE `server_engine` = ?");
    $sth->bind_param('i', $i);
    $sth->execute();
    $server[$i] = $sth->fetch();
}; 
```

或者更好的是，您可以通过一个查询来获取它，而无需像这样的任何循环。

```
$totalServerCounts = range(0, $servers_default_engines_count);
$sth = $db->query("SELECT `id` FROM `cgshop_servers` WHERE `server_engine` IN(".implode(', ', $totalServerCounts).")");
$servers = $sth->fetch_all(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:25:22.430

您是否尝试过使用`mysql_fetch_assoc`（[信息](http://php.net/manual/en/function.mysql-fetch-assoc.php)）

> mysql_fetch_assoc — 获取结果行作为关联数组

* * *

**示例用法**

```
 $mysql_query = mysql_query("SELECT * FROM `cgshop_servers` WHERE `server_engine` = ?", $i);
 $my_array = mysql_fetch_assoc($mysql_query);
 print_r($my_array); 
```

# blackberry - phonegap facebook 连接黑莓

> ID：11660111
> 
> 赞同：1
> 
> 时间：2012-07-25T23:18:14.653
> 
> 标签：blackberry, cordova

我正在尝试为 Blackberry 使用 phonegap 进行 facebook 连接。我正在尝试使用 facebook 进行简单登录，进行身份验证，重定向到应用程序。之后就可以喜欢任何我想要的东西。

我已经使用 Hackbook 在 iPhone 上完成了这项工作，但我还没有为 Blacbkerry 找到任何可行的解决方案。有任何想法吗？

# php - PHP升级导致MYSQLI按引用传递错误

> ID：11660112
> 
> 赞同：0
> 
> 时间：2012-07-25T23:18:15.740
> 
> 标签：php, mysqli, pass-by-reference

这是我正在尝试解决的报告错误，客户端刚刚从 PHP V-whoknowswhat 升级到 PHP V5.3。我相信这里的这个错误是造成网站混乱的众多错误之一。无论如何，长话短说，我需要将 $params 作为参考而不是作为值传递，但我很困惑该怎么做？也许有些帮助？

**mysqli_stmt::bind_param() 的参数 2 应为参考，在 ../Zend/Db/Statement/Mysqli.php 中给出值**

```
public function _execute(array $params = null)
{

var_export ($params);
// output1: array ( )
/* output2: array ( 
     0 => '34',
     1 => 'Four Seasons Seattle',
     2 => 'Four Seasons Seattle',
     3 => '{//...copy text...}',
     4 => '1',
     5 => '1',
     6 => 'four-seasons-hotel',
     7 => '14',
)
*/

    if (!$this->_stmt) {
        return false;
    }
    // if no params were given as an argument to execute(),
    // then default to the _bindParam array
    if ($params === null) {
        $params = $this->_bindParam;
    }

    // send $params as input parameters to the statement
    if ($params) {
        array_unshift($params, str_repeat('s', count($params)));

var_export ($params);
// output1: array ( )
/* output2: array ( 
     0 => 'ssssssss',
     1 => '34',
     2 => 'Four Seasons Seattle',
     3 => 'Four Seasons Seattle',
     4 => '{//...copy text...}',
     5 => '1',
     6 => '1',
     7 => 'four-seasons-hotel',
     8 => '14',
)
*/
        call_user_func_array(
            array($this->_stmt, 'bind_param'),
            $params
        );
die();

    } 
```

这是错误报告，我尝试了它所说的懒惰方式，它只是白屏了我而没有错误=（

[https://bugs.php.net/bug.php?id=43568](https://bugs.php.net/bug.php?id=43568)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:43:20.173

答案是完全重写 bindParams 函数以通过引用传递值。代码如下。

```
private static function _bindParams(&$stmt, $valuesArray)
{
    if (count($valuesArray) > 0)
    {

        $types = str_repeat('s', count($valuesArray));
        $params = array_merge(array($types), $valuesArray);

        $tmpArray = array();
        foreach ($params as $i => $value)
        {
            $tmpArray[$i] = &$params[$i];
        }

        $bindOK = call_user_func_array(array($stmt,'bind_param'), $tmpArray);
    }
    else
    {
        $bindOK = true;
    }
    return $bindOK;
} 
```

# ms-access - Access 2007 中的报告和图形 - 计算查询值

> ID：11660113
> 
> 赞同：1
> 
> 时间：2012-07-25T23:18:19.193
> 
> 标签：ms-access, report, ms-access-2007

想象一个包含字段（Id、Valid、Value）的表

有效 = 布尔值 = 0 到 100 之间的数字

我想要的是一份报告，它计算（valid = 0）的记录数，然后给我（value < 70）的案例总数和（value >= 70）的案例数。

问题是某些记录上的“值”字段可能为空，我只想要值字段不为空的记录。

我知道要计算第二个值（值> = 70），但问题是我不能简单地做（记录总数 - 值 < 70 的记录数），因为存在问题“值”为空的记录...

然后我想用这些值创建图形，以查看低于和高于 70 的记录的百分比。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:54:41.513

"*问题是某些记录上的 "value" 字段可能为空，我只想要 value 字段不为空的记录*。

使用`WHERE`子句排除“值”字段为 Null 的行。

这是 的示例数据`tblMetraton`。

```
Id Valid Valu
 1    -1    2
 2     0    4
 3    -1    6
 4     0
 5     0   90 
```

我用于`Valu`字段名称是因为`Value`是保留字。

您可以`Count()`在查询中使用该函数并利用它仅计算非 Null 值的事实。因此，使用返回非 Null 值（我使用 1）`Count()`的表达式用于您要匹配的条件，否则使用 Null。`IIf()`

```
SELECT
    Count(IIf(Valid=0,1,Null)) AS valid_false,
    Count(IIf(Valu<70,1,Null)) AS below_70,
    Count(IIf([Valu]>=70,1,Null)) AS at_least70
FROM tblMetraton AS m
WHERE (((m.[Valu]) Is Not Null)); 
```

根据我在 中的示例数据`tblMetraton`，该查询为我提供了这个结果集。

```
valid_false below_70 at_least70
          2        3          1 
```

如果我的样本数据没有解决您正在处理的可变性，和/或如果我的查询结果不符合您的要求，请向我们展示您自己的样本数据以及基于该样本的您想要的结果。

# java - BufferedWriter 不会将所有数据写入文件

> ID：11660116
> 
> 赞同：2
> 
> 时间：2012-07-25T23:18:31.380
> 
> 标签：java, file, bufferedwriter

所以我写了一个程序，假设将两个 LinkedList 的内容以格式写入文本文件

“标题行 1”

“标题行 2”

“标题行 3”

x1 y1

x2 y2

x3 y3

...

x1023 y1023

下面是主要的编写代码：

```
 LinkedList<Double> xVal;
    LinkedList<Double> yVal;
    LinkedList<String> header;
    Analize test;
    Scanner scan = new Scanner(System.in);
    FileWriter fstream;
    BufferedWriter out;

    int i=1;
    test = new Analize(i);
    test.addData();
    test.calculate();

    //Writing ModY
    fstream = new FileWriter("BLOCK " +i+"_ModY.txt");
    out = new BufferedWriter(fstream);
    header = test.getHeader();
    xVal=test.getXList();
    yVal=test.getYListMod();

    //Write Header
    out.write(header.get(0)+"_modY");out.newLine();
    out.write(header.get(1));out.newLine();
    out.write(header.get(2));out.newLine();

    for(int j=0;j<xVal.size();j++)
    {
        double x=xVal.get(j);
        double y=yVal.get(j);
        out.write(x+"\t"+y+" "+j);out.newLine();
        //test code
        System.out.println(xVal.get(j)+"    "+yVal.get(j)+" "+j);
        //System.out.println(j);
    } 
```

真正烦人的是测试代码行： System.out.println(xVal.get(j)+" "+yVal.get(j)+" "+j); 实际上在 System.in 中使用正确的值运行了 1023 次，但该文件只有第 558 次的值。

我不太确定这里发生了什么......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T23:22:34.680

我没有看到你`out.close();`在任何地方打电话。这将为您刷新和关闭底层流。我会把它放在你的for循环之后。

始终确保关闭您的流，否则您的一些数据可能会挂在内存中，等待 JVM 出现并将其刷新到您的文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T23:24:30.400

除了[Cory 所说](https://stackoverflow.com/a/11660154/53897)的之外，始终在 finally 块中关闭底层流，以确保它们确实被关闭，而不管异常如何。

# .net - 无论如何在变量名中使用句号

> ID：11660117
> 
> 赞同：1
> 
> 时间：2012-07-25T23:18:34.280
> 
> 标签：.net, visual-studio-2010

我只是想知道是否有办法使用

```
public test.name as string 
```

我知道句号通常允许访问事物的子部分，但我和一个朋友想知道是否有实际的方法来允许它

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:22:13.847

`.`运算符用于访问类的特征。因此，您不能将它放在变量名中。如果你这样做了，编译器如何区分`.`你的变量和`.`你真正想将它用作运算符的时间？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:19:39.727

不，因为正如您所说，该语言已经将句点用作一元运算符。

# ruby - 在 Centos6 上安装 Rails 3.2.6

> ID：11660121
> 
> 赞同：0
> 
> 时间：2012-07-25T23:18:56.853
> 
> 标签：ruby, ruby-on-rails-3, centos, centos6

我按顺序执行了以下步骤，但在运行 webrick 时遇到问题

我有一个centos 6安装

第 1 步：http: [//blog.jeffcosta.com/2011/07/22/install-ruby-version-manager-rvm-on-centos-6/](http://blog.jeffcosta.com/2011/07/22/install-ruby-version-manager-rvm-on-centos-6/)

第二步：server-world.info/en/note?os=CentOS_6&p=mysql

第三步：sudo install mysql -- --with-mysql-config=/usr/local/mysql/bin/mysql_config gem install -y mysql -- --with-mysql-config=/usr/bin/mysql_config

它安装了所有的宝石，没有任何问题。

**但是当我从使用rails new simple_cms -d mysql**创建的应用程序中加载 webrick

 **结果： create
create README.rdoc
create Rakefile
create config.ru
create .gitignore
create Gemfile
create app
create app/assets/images/rails.png
create app/assets/javascripts/application.js
create app/assets/stylesheets/application.css
创建 app/controllers/application_controller.rb
创建 app/helpers/application_helper.rb
创建 app/mailers
创建 app/models
创建 app/views/layouts/application.html.erb
创建 app/mailers/.gitkeep
创建 app/models/.gitkeep
创建配置
创建 config/routes.rb
创建 config/application.rb
创建 config/environment.rb
创建 config/environments
创建 config/environments/development.rb
创建 config/environments/production.rb
创建 config/environments/test.rb
创建 config/initializers
创建配置/初始化程序/backtrace_silencers.rb 创建配置
/初始化程序/inflections.rb 创建配置
/初始化程序/mime_types.rb 创建配置
/初始化程序/secret_token.rb 创建配置
/初始化程序/session_store.rb 创建
配置/初始化程序/wrap_parameters.rb
创建配置/语言环境
create config/locales/en.yml
create config/boot.rb
create config/database.yml
create db
create db/seeds.rb
create doc
create doc/README_FOR_APP
create lib
create lib/tasks
create lib/tasks/.gitkeep
create lib/ assets
create lib/assets/.gitkeep
create log
create log/.gitkeep
create public
create public/404.html
create public/422.html
create public/500.html
create public/favicon.ico
create public/index.html
create public/robots.txt
create script
create script/rails
create test/fixtures
create test/fixtures/.gitkeep
create test/functional
create test/functional/.gitkeep
create test/integration
create test/integration/.gitkeep
create test/unit
create test/unit/.gitkeep
create test/performance/browsing_test.rb
create test/test_helper.rb
create tmp/cache
create tmp/cache/assets
create vendor/assets/javascripts
create vendor/assets/javascripts/.gitkeep
create vendor/assets/样式表
create vendor/assets/stylesheets/.gitkeep
create vendor/plugins
create vendor/plugins/.gitkeep
run bundle install
从 [https://rubygems.org/] 获取 gem 元数据。
无法加载 OpenSSL。您必须使用 OpenSSL 支持重新编译 Ruby，或将 Gemfile 中的源代码从“https”更改为“http”。rvm.io/packages/openssl 提供了使用 RVM 使用 OpenSSL 进行编译的说明。

**运行 rails 服务器时出现以下错误：**

/usr/local/rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable) <br> from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs.rb:5:in`'
来自 /usr/local/rvm/gems/ruby-1.9 .3-p194/gems/execjs-1.4.0/lib/execjs.rb:4:in`<top (required)>' <br> from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in`要求
来自 /usr/local/rvm/gems/ruby-1.9.3-p194/gems/coffee-script-2.2。 0/lib/coffee_script.rb:1:in`<top (required)>' <br> from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in`需要'
来自 /usr/local/rvm/gems/ruby-1.9.3-p194/gems/coffee-script-2.2.0/lib/coffee-script.rb:1 :in `<top (required)>' <br> from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in`require'
来自 /usr/local/rvm/gems/ruby-1.9.3-p194/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>' <br> from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in`require'
来自 /usr/local /rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `block (2 levels) in require' <br> from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in`each'
来自 /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `block in require' <br> from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in`each'
来自 /usr/local/rvm/gems /ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in`require' <br> from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler.rb:119:in`要求
来自 /root/railsdev/simple_cms/config/application.rb:7:in`<top (required)>' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:53:in`要求'
来自 /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:53:in `block in <top (required)>' <br> from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:50:in`tap'
来自 /usr/local/rvm/gems/ ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>' <br> from script/rails:6:in`require'
from script/rails:6:in `'

我该如何解决？
**rvm info 给出以下结果**

红宝石-1.9.3-p194：

系统： uname: "Linux localhost.localdomain 2.6.32-220.el6.i686 #1 SMP Tue Dec 6 16:15:40 GMT 2011 i686 i686 i386 GNU/Linux" bash: "/bin/bash => GNU bash,版本 4.1.2(1)-release (i386-redhat-linux-gnu)" zsh: " => 未安装"

rvm: 版本: "rvm 1.14.7 (stable) by Wayne E. Seguin, Michal Papis [https://rvm.io/]" 更新: "1 小时 22 分 29 秒前"

ruby：解释器：“ruby”版本：“1.9.3p194”日期：“2012-04-20”平台：“i686-linux”补丁级别：“2012-04-20 修订版 35410”full_version：“ruby 1.9.3p194（2012 -04-20 修订版 35410) [i686-linux]"

家园：宝石：“/usr/local/rvm/gems/ruby-1.9.3-p194” 红宝石：“/usr/local/rvm/rubies/ruby-1.9.3-p194”

二进制文件： 红宝石：“/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby” irb：“/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/irb”宝石：“/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem” 耙子：“/usr/local/rvm/gems/ruby-1.9.3-p194/bin/rake”

环境：路径：“/usr/local/rvm/gems/ruby-1.9.3-p194/bin:/usr/local/rvm/gems/ruby-1.9.3-p194@global/bin:/usr/local/ rvm/rubies/ruby-1.9.3-p194/bin:/usr/local/rvm/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin: /bin:/root/bin" GEM_HOME: "/usr/local/rvm/gems/ruby-1.9.3-p194" GEM_PATH: "/usr/local/rvm/gems/ruby-1.9.3-p194:/usr /local/rvm/gems/ruby-1.9.3-p194@global" MY_RUBY_HOME: "/usr/local/rvm/rubies/ruby-1.9.3-p194" IRBRC: "/usr/local/rvm/rubies/ruby -1.9.3-p194/.irbrc" RUBYOPT: "" gemset: ""

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:44:05.303

安装 NodeJS 并将 gem 添加到 Gemfile 中。这应该可以解决运行时问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:04:19.387

Since Rails 3.1, a JavaScript runtime has been needed for development on Linux Ubuntu. It is not needed for Mac OS X or Windows.

For development on Linux Ubuntu, it’s best to install the Node.js server-side JavaScript environment:

sudo apt-get install nodejs

and set it in your $PATH.

If you don’t install Node.js, you’ll need to add this to the Gemfile for each Rails application you build:

gem 'therubyracer', '>= 0.9.9'

[source](http://railsapps.github.com/rails-3-2-example-gemfile.html)**

# c# - 绑定源更新后如何执行 ICommand？

> ID：11660123
> 
> 赞同：1
> 
> 时间：2012-07-25T23:19:09.997
> 
> 标签：c#, .net, wpf, mvvm

假设我有一个 WPF `TextBox`：

```
<TextBox Text="{Binding Foo}" /> 
```

有没有办法`ICommand`在属性`Foo`更新后执行一些`TextBox`（即由`TextBox`而不是其他一些控件或代码专门更新）？

我不想使用绑定的 SourceUpdated 事件，因为我想避免“代码隐藏”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:50:54.233

你确实意识到如果最终有一些代码落后，MVVM 警察不会来抓你吗？使用事件来命令等本质上只是在 XAML 中编码，而不是在 C# 中。无论哪种方式，您都需要将事件与命令挂钩，因为控件不会公开您所追求的命令。

我认为这就是您所追求的，如果我走错了路，请告诉我：

您想知道对 Foo 的更新何时来自文本框并且仅来自文本框。即，如果对 Foo 的更新来自您不希望命令运行的某些代码，对吗？

如果是这样：

```
 <TextBox Name="Fred" Text="{Binding Foo, NotifyOnSourceUpdated=True}" SourceUpdated="Fred_SourceUpdated"/> 
```

然后在“邪恶”的代码后面有：

```
private void Fred_SourceUpdated(object sender, DataTransferEventArgs e)
    {

    } 
```

在该方法中，您可以将视图的数据上下文转换为视图模型并调用您想要的任何命令。如果其他东西更新了 Foo，则不会调用源更新事件。

如果你真的不想像你在 OP 中提到的那样有代码，那么你可以做一个附加的行为，但这对于“无意义”的要求来说是巨大的矫枉过正。您的逻辑取决于更改是否来自文本框这一事实意味着您的视图已经不仅仅是一个视图。这种方法仍然允许您让您的命令代码在您的 VM 中完全可测试。

**第二次编辑**

您还可以通过事件命令而不是文本更改来查看在 XAML 中使用源更新事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:35:03.553

您可以尝试创建一个方法来执行您想做的任何事情，并在调用 raisepropertychanged() 之后调用该方法。例如

```
 public void MyMethod() 
  {
      //Do whatever;

  } 
```

然后在你的属性 getter setter 中：

```
 public string MyText 
  {
    get { return _MyText; }

    set 
    {
       _MyText = value;
       RaisePropertyChanged("MyText")
       // THen call that method
       MyMehtod();
    }

   } 
```

语法可能会关闭，我最近习惯做 vb。希望这会有所帮助，但如果您需要其他选择，还有其他方法。

编辑2：

```
<Textbox Text="{Binding Foo}">
  <i:Interaction.Triggers>
    <i:EventTrigger EventName="TextChanged">
      <i:InvokeCommandAction Command="{Binding TextChangedCommand}" />
    </i:EventTrigger>
 </i:Interaction.Triggers> 
```

TextChangedCommand 在您的视图模型中的位置

不确定 TextChanged 是否为 EventName，我不记得所有可用的事件类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T23:22:11.423

假设你已经实现`INotifyPropertyChanged`了，你只需要处理`PropertyChanged`事件。您在事件处理程序中执行命令。此事件处理程序进入您的 ViewModel（而不是您的代码）。

**编辑**

这是 MVVM Light 中的 EventToCommand 行为如何工作的示例。您可以使用它允许使用命令处理任何事件。

```
<Rectangle Fill="White"
           Stroke="Black"
           Width="200"
           Height="100">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseEnter">
            <cmd:EventToCommand Command="{Binding TestCommand,
                                          Mode=OneWay}"
               CommandParameter="{Binding Text,
                                  ElementName=MyTextBox,
                                  Mode=OneWay}"
               MustToggleIsEnabledValue="True" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Rectangle> 
```

**编辑 2**

另一个想法是在`Foo`通过代码更改时始终使用方法。这样，您就知道任何`Foo`不使用该方法的更改都必须由用户更改。

```
private bool _isFooUpdating;

private void SetFoo(string value)
{
    _isFooUpdating = true;
    Foo = value;
    _isFooUpdating = false;
}

public string Foo
{
    get { return _foo; }
    set
    {
        if (_foo = value) return;
        _foo = value;
        OnFooChanged();
        OnPropertyChanged("Foo");
    }
}

private void OnFooChanged()
{
    if (_isFooUpdating) return;
    FooChangedCommand.Execute();
} 
```

# c# - 使用 32 位字在 C# 中交换字节顺序的更快方法

> ID：11660127
> 
> 赞同：10
> 
> 时间：2012-07-25T23:19:28.063
> 
> 标签：c#, bit-manipulation, endianness

在[这个问题](https://stackoverflow.com/questions/1610868/faster-way-to-swap-endianness-in-c-sharp-with-16bit-words)中，以下代码：

```
public static void Swap(byte[] data)
{
        for (int i = 0; i < data.Length; i += 2)
        {
                byte b = data[i];
                data[i] = data[i + 1];
                data[i + 1] = b;
        }
} 
```

用不安全的代码重写以提高其性能：

```
public static unsafe void SwapX2(Byte[] Source)  
{  
    fixed (Byte* pSource = &Source[0])  
    {  
        Byte* bp = pSource;  
        Byte* bp_stop = bp + Source.Length;  

        while (bp < bp_stop)  
        {
            *(UInt16*)bp = (UInt16)(*bp << 8 | *(bp + 1));  
            bp += 2;  
        }  
    }  
} 
```

假设一个人想用 32 位字做同样的事情：

```
public static void SwapX4(byte[] data)
{
    byte temp;
    for (int i = 0; i < data.Length; i += 4)
    {
        temp = data[i];
        data[i] = data[i + 3];
        data[i + 3] = temp;
        temp = data[i + 1];
        data[i + 1] = data[i + 2];
        data[i + 2] = temp;
    }
} 
```

这将如何以类似的方式重写？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T23:23:00.677

```
public static unsafe void SwapX4(Byte[] Source)  
{  
    fixed (Byte* pSource = &Source[0])  
    {  
        Byte* bp = pSource;  
        Byte* bp_stop = bp + Source.Length;  

        while (bp < bp_stop)  
        {
            *(UInt32*)bp = (UInt32)(
                (*bp       << 24) |
                (*(bp + 1) << 16) |
                (*(bp + 2) <<  8) |
                (*(bp + 3)      ));
            bp += 4;  
        }  
    }  
} 
```

请注意，这两个函数（我的 SwapX4 和您的 SwapX2）只会交换 little-endian 主机上的任何内容；在大端主机上运行时，它们是昂贵的空操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-13T05:27:37.447

此版本不会超出缓冲区的范围。适用于 Little Endian 和 Big Endian 架构。并且在更大的数据上速度更快。（更新：为 x86 和 x64 添加构建配置，为 32 位（x86）预定义 X86 和为 64 位（x64）预定义 X64，它会稍微快一些。）

```
public static unsafe void Swap4(byte[] source)
{
    fixed (byte* psource = source)
    {
#if X86
            var length = *((uint*)(psource - 4)) & 0xFFFFFFFEU;
#elif X64
            var length = *((uint*)(psource - 8)) & 0xFFFFFFFEU;
#else
            var length = (source.Length & 0xFFFFFFFE);
#endif
        while (length > 7)
        {
            length -= 8;
            ulong* pulong = (ulong*)(psource + length);
            *pulong = ( ((*pulong >> 24) & 0x000000FF000000FFUL)
                      | ((*pulong >> 8)  & 0x0000FF000000FF00UL)
                      | ((*pulong << 8)  & 0x00FF000000FF0000UL)
                      | ((*pulong << 24) & 0xFF000000FF000000UL));
        }
        if(length != 0)
        {
            uint* puint = (uint*)psource;
            *puint = ( ((*puint >> 24))
                     | ((*puint >> 8) & 0x0000FF00U)
                     | ((*puint << 8) & 0x00FF0000U)
                     | ((*puint << 24)));
        }
    }
} 
```

# couchdb - couchdb 用复杂的键减少

> ID：11660129
> 
> 赞同：4
> 
> 时间：2012-07-25T23:19:38.677
> 
> 标签：couchdb, mapreduce

假设我们在 couchdb 中有一些文档，像这样

```
{ page: 'home', country: 'EN', timestamp: 15448 }
{ page: 'search', country: 'FR', timestamp: 15448 }
{ page: 'search', country: 'EN', timestamp: 15448 }
{ page: 'home', country: 'DE', timestamp: 15457 } 
```

每个文档代表一个具有给定时间戳的国家/地区的综合浏览量。我想做的是查询这些文档，对于给定的页面和时间戳范围，获取该范围内每个国家/地区的综合浏览量。

我想出的是这个地图功能

```
function (doc) {
  emit([doc.page, doc.timestamp, doc.country], 1)
} 
```

并`_sum`作为reduce函数。

我可以用例如查询视图。`startkey=["home",15448]&endkey=["home", 15448, {}]`但这会返回每个国家/地区每天的综合浏览量，这比我需要的信息多。（只是给定时期每个国家/地区的综合浏览量）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:37:12.883

只是不排放国

```
function (doc)
{
  emit([doc.page, doc.timestamp], 1)
} 
```

减少功能

```
function (keys, value)
{
  return sum(value);
} 
```

# android - 我的数据库中出现奇怪的错误，导致不应该发生的更改

> ID：11660137
> 
> 赞同：0
> 
> 时间：2012-07-25T23:20:10.243
> 
> 标签：android, sql, sqlite

我认为描述我的错误的更简单方法是[在视频中显示它](http://www.youtube.com/watch?v=7YCYbHw4Sfg)。但一般的想法是我使用数据库来跟踪复选框列表中的哪些项目被选中。每当我单击一个项目并激活该列表的操作模式时，它会立即忘记这些更改，尽管它们已经进入数据库。更糟糕的是，当多个项目受到这个错误的影响时，它们最终形成了一种奇怪的循环逻辑，其中数据库中的一个项目将被选中，另一个将成为未选中，并且两个将继续循环由于复选框在选中状态和未选中状态之间不断循环并因此触发复选框的`onCheckedChangedListener`. 里面没有代码`onListItemClick()`这应该会导致这些更改发生在列表级别或数据库级别，并且没有代码会重新加载 CursorLoader 或操作所选项目`onPrepareActionMode`。`onCreateActionMode`谁能帮我弄清楚这是怎么回事？（我的实现可以在视频中找到，但我也在下面包含了它。）

```
public class TaskCursorAdapter extends ResourceCursorAdapter{

public View newView(Context context, Cursor cursor, ViewGroup parent){
        final LayoutInflater inflater = LayoutInflater.from(context);
        final long assignedID = cursor.getInt(cursor.getColumnIndex(NagTasksDatabaseHelper.ID));
        View v = inflater.inflate(layout, parent, false);
        CheckBox taskCheckBox = (CheckBox)v.findViewById(R.id.taskCheckBox);
        TextView taskText = (TextView)v.findViewById(R.id.taskTitle);
        TextView taskNote = (TextView)v.findViewById(R.id.taskNote);
        if (cursor.getInt(cursor.getColumnIndex(NagTasksDatabaseHelper.CHECKED))==1){
            taskText.setPaintFlags(taskText.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
            taskNote.setPaintFlags(taskNote.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
        }
        taskCheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                //Current method:

                AlertDialog.Builder builder = new AlertDialog.Builder(buttonView.getContext());
                builder.setCancelable(true);
                Log.i("TaskCursorAdapter", "CheckBox assignedID="+assignedID);
                if (assignedID!=-1) {
                    NagTasksDatabaseHelper helper = new NagTasksDatabaseHelper(buttonView.getContext());
                    if (isChecked) {
                        helper.checkOffTask(assignedID);
                        //builder.setMessage("Item "+assignedID+" checked");
                    } else {
                        helper.uncheckTask(assignedID);
                        //builder.setMessage("Item "+assignedID+" unchecked");
                    }
                    helper.close();
                } else {
                    builder.setMessage("No ID found. Try something else.");
                    builder.create().show();
                }
            } 
        });
        return v;
    }
    public void bindView(View v, Context context, Cursor cursor){
        CheckBox taskCheckBox = (CheckBox)v.findViewById(R.id.taskCheckBox);
        TextView taskText = (TextView)v.findViewById(R.id.taskTitle);
        TextView taskNote = (TextView)v.findViewById(R.id.taskNote);
        taskCheckBox.setChecked(cursor.getInt(cursor.getColumnIndex(NagTasksDatabaseHelper.CHECKED))==1);
        //final long assignedID = v.getId();
        //v.setClickable(true);     
        //LinearLayout holder = (LinearLayout)v.findViewById(R.id.container);
        //holder.setClickable(true);
        //IdFromDb = c.getInt(c.getColumnIndex(NagTasksDatabaseHelper.ID));
        taskText.setText(cursor.getString(cursor.getColumnIndex(NagTasksDatabaseHelper.TASK)));
        taskNote.setText(cursor.getString(cursor.getColumnIndex(NagTasksDatabaseHelper.NOTE)));
        //isCheckedFromDb = c.getInt(c.getColumnIndex(NagTasksDatabaseHelper.CHECKED));
        //cursor = c;
    }

public class TaskListFragment extends SherlockListFragment implements ActionMode.Callback {
public boolean onCreateActionMode(ActionMode mode, Menu menu) {
    MenuInflater inflater = mode.getMenuInflater();
    inflater.inflate(R.menu.context_menu_single_choice, menu);
    mode.setTitle(R.string.activeActionMode);
    return true;
}
@Override
public boolean onPrepareActionMode(ActionMode mode, Menu menu) {

    return false;
}
public void onListItemClick(ListView l, View v, int position, long id){
    //super.onListItemClick(l, v, position, id);
    Log.i("NagTaskListFragment", "User clicked on "+id);
    if (mActionMode == null) {
        idForActionMode=id;
        mActionMode = getSherlockActivity().startActionMode(this);
    }
    if (l.getSelectedView() == v) {
        v.setSelected(false);
        mActionMode.finish();
        mActionMode = null;
        idForActionMode = -1;
    } else  if (l.getSelectedView() != null) {
        l.getSelectedView().setSelected(false);
        v.setSelected(true);
        idForActionMode = id;
        //onPrepareActionMode(mActionMode, mActionMode.getMenu());
        //Log.i("NagTaskListFragment", "selectedItemID = "+l.getSelectedItemId());
    } else {
        v.setSelected(true);
        idForActionMode = id;
        //Log.i("NagTaskListFragment", "selectedItemID = "+l.getSelectedItemId());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:30:30.670

所以，我把`setChecked()`方法移到了`newView`，这似乎解决了这个问题。我不确定这是否是正确的修复，但它现在有效。

# ios - iPad 3（视网膜）的最大视频/电影分辨率是多少？

> ID：11660142
> 
> 赞同：2
> 
> 时间：2012-07-25T23:21:06.670
> 
> 标签：ios, ipad, video, mpmovieplayercontroller, retina-display

出于某种原因，当我尝试在 ipad 3 上播放 1536x2048 的视频时，它不播放视频，只是跳过它。我检查了视频的 URL 是否正确。我正在使用 MPMoviePlayerController。我也尝试在 ipad 上播放相同的视频，它也做了同样的事情。它就像忽略了“播放”代码行一样。

那么是否有最大支持的视频分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:26:49.787

根据[`MPMoviePlayerController`](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)参考资料，我会说这可以回答你：

**支持的格式**

此类播放 iOS 支持的任何电影或音频文件。这包括流式内容和固定长度文件。对于电影文件，这通常意味着扩展名为 .mov、.mp4、.mpv 和 .3gp 并使用以下压缩标准之一的文件：

*   H.264 Baseline Profile Level 3.0 视频，在 30 fps 时高达 640 x 480。（基线配置文件不支持 B 帧。）
*   MPEG-4 第 2 部分视频（简单配置文件）

如果您使用此类播放音频文件，它会在播放音频时显示带有 QuickTime 徽标的白屏。对于音频文件，此类支持最高 48 kHz 的 AAC-LC 音频和最高 48 kHz 的 MP3（MPEG-1 音频层 3）立体声音频。

# sql-server-2008 - 我可以将超过 100 万行的 SQL 结果复制并粘贴到 Excel 中吗？

> ID：11660144
> 
> 赞同：0
> 
> 时间：2012-07-25T23:21:18.603
> 
> 标签：sql-server-2008, tsql, query-optimization, sql-optimization

我一直在运行一个庞大的 SQL 查询，如下所示：

```
select SessionID, PID, RespondentID
from BIG_Sessions (nolock)
where RespondentID in (

'1407718',
'1498288',
/* ETC ETC */

) 
```

我听说 Excel 最多有 100 万行。不知道如何处理这个

表 BIG_Sessions 很大。它为给定的 RespondentID 提取多个 SessionID - 但我只想要一个。

我不知道如何筛选这个。任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:27:21.800

这取决于您使用的 Excel 版本。 [2010显然支持“超过一百万”。](http://msdn.microsoft.com/en-us/library/office/ff700514.aspx)而[2003 仅支持 65,000 多一点](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx)。

我个人会将其导出为 CSV 文件。只需右键单击您的结果集并选择“将结果另存为...”。那里没有限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:29:11.577

一个纯粹与 Excel 相关的答案：我之前曾尝试将超过 50,000 行的数据放入 Excel。当我尝试时，会发生两件事之一。

1）它确实有效，但 Excel 非常慢，反应迟钝，并且经常崩溃。数据基本不可用。2）我填满了我的 RAM 和 Excel 崩溃，有时还带着其他程序。

如果您尝试复制 1,000,000 行......我会严重怀疑 Excel 是否可以处理它！创建数据库正是为了处理这种情况：组织大量数据。看看您是否无法在数据库中使用 Excel 完成您想要完成的任务。

# objective-c - OS X 停靠图标中的 NSProgressIndicator 显示灰色，如何制作标准蓝色

> ID：11660147
> 
> 赞同：1
> 
> 时间：2012-07-25T23:21:40.193
> 
> 标签：objective-c, macos

我想在我的应用程序的停靠图标中显示一个进度条。它可以工作，但由于某种原因，它将进度条显示为灰色条，而不是标准的蓝色条。我使用了在[另一个 SO question](https://stackoverflow.com/questions/4004941/adding-an-nsprogressindicator-to-the-dock-icon)中找到的代码。我究竟做错了什么？

```
NSProgressIndicator *progressIndicator = [[NSProgressIndicator alloc] initWithFrame:NSMakeRect(0.0f, 0.0f, 80.0f, 20.0f)];
[progressIndicator setStyle:NSProgressIndicatorBarStyle];
[progressIndicator setIndeterminate:NO];
[[[NSApplication sharedApplication] dockTile] setContentView:progressIndicator];
[progressIndicator setDoubleValue:50];
[[[NSApplication sharedApplication] dockTile] display]; 
```

![在此处输入图像描述](../Images/5b3119098b7b48e4715ba464a8671323.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:34:32.203

如果不对进度指示器进行子类化并进行自己的绘图，我不确定这是可能的。我认为问题在于码头瓷砖不是关键（而且不可能？）。非键窗口中的进度指示器将是灰色的，我假设停靠图块也是如此。制作进度指示器 firstResponder 也无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:59:15.543

我不确定它为什么会改变，但它是由这个 API 设置的：`setControlTint:`例如`NSBlueControlTint`使它变成蓝色。

# mobile - 媒体查询不适用于移动设备

> ID：11660149
> 
> 赞同：4
> 
> 时间：2012-07-25T23:22:11.383
> 
> 标签：mobile, css, twitter-bootstrap, media-queries

以前在这里提出过类似的问题，但在阅读完这些问题后，我还没有找到适用于我的网站的答案。

我已经围绕 Bootstrap 构建了网站，但添加了一些我自己的媒体查询。现场测试站点在：[http ://agoodman.com.au](http://agoodman.com.au)

媒体查询更改的部分是“我们的费用”和“地图”覆盖。如果您使用的是笔记本电脑，则调整浏览器的大小会使这些部分显示为块。

我的样式表链接：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/user.css" rel="stylesheet"> 
```

“User.css”只是一个单独的文件，因为我希望能够根据需要保留和更新引导程序的主框架。User.css 覆盖引导程序中的样式。我在 user.css 中的媒体查询如下：

```
@media screen or handheld(max-width: 979px) {
    .fee-buttons {
        height: auto;
        font-weight: 600;
        position: relative;
        padding: 0;
        margin: 0;
        list-style: none;
        }

    .fee-buttons .transformation {
        width: 100% !important;
        height: 300px;
        position: relative;
        z-index: 10;
        left:0;
        }

    .fee-buttons .hourly, .fee-buttons .membership {
    float: none;
    width: 100% !important;
    }

    li.button{
    overflow:visible;
    }

}

@media screen or handheld(max-width: 995px) {
    #overlay {
        position: relative;
        display: block;
        width: auto;
        right: 0;
        padding:1em;
    }
} 
```

正如我所说，在桌面浏览器上这工作正常，但在移动浏览器上它根本不工作。我已经在 iPhone 4（使用 safari）和 HTC Desire（使用股票 android 浏览器）上进行了测试，两者都以相同的方式显示 - 忽略媒体查询，只显示包含大量内容的完整网站.

关于我在这里做错了什么的任何想法？

编辑：

以下是在小屏幕宽度下**应该**是什么样子的屏幕截图：![在此处输入图像描述](../Images/1f93e8dbfcfb0e9b8707a1e2d278c7cc.png)

以及它目前在 Android 和 iPhone 上的样子，设备忽略了我的媒体查询：![在此处输入图像描述](../Images/257ee5d2ab47ab8587c61bb3bc6bf6ed.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T01:02:21.070

很抱歉回答我自己的问题，但我发现了一些有用的东西。

我设置媒体查询的方式有误。代替

`@media screen or handheld(max-width: 995px)`

我将查询更改为

`@media handheld, screen and (max-width: 995px)`

正如这个人所建议的那样：[https ://stackoverflow.com/a/996820/556006](https://stackoverflow.com/a/996820/556006)

它在所有设备上都能完美运行。感谢那些提出建议的人，向你们所有人投赞成票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:50:56.867

> 显示完整的网站，其中包含许多真正压扁和不讨人喜欢的内容。

这可能是因为您的媒体查询针对的是宽度为 979 和 995 像素的大屏幕。移动屏幕要小得多。

要定位像 iPhone 4 这样的东西，你需要一个`max-width`（`960px`这就是为什么引导程序默认为 960）用于横向和`480px`纵向。

由于您无法针对所有可能的屏幕尺寸，bootstrap 提供了一个合理的默认宽度列表，您也应该坚持使用。

# android - 关于“USE_CREDENTIALS”权限的一些问题

> ID：11660152
> 
> 赞同：7
> 
> 时间：2012-07-25T23:22:23.267
> 
> 标签：android, permissions, android-contentprovider, credentials, android-syncadapter

我对 android 上的[“USE_CREDENTIALS”权限](http://developer.android.com/reference/android/Manifest.permission.html#USE_CREDENTIALS)有一些疑问：

1.  似乎它用于使用您自己的 syncadapter 。它还可以用于与属于其他应用程序的其他同步适配器（或其内容提供者）进行通信吗？

2.  如果 #1 的答案是否定的，为什么它首先存在，如果它是你自己的 syncAdapter 呢？

3.  除了syncAdapter，它还有其他用途吗？

4.  如果我不需要任何身份验证，是否可以在没有此权限的情况下使用 syncAdapter？

5.  即使不使用 syncAdapter ，是否可以访问已同步的帐户、使用他们的凭据并对其进行特殊处理（例如，收集最近同步的数据），假设您拥有此权限（和/或其他权限）？

# python - 在 Pyramid 中实现 ElasticSearch

> ID：11660159
> 
> 赞同：1
> 
> 时间：2012-07-25T23:23:06.353
> 
> 标签：python, pyramid, elasticsearch, pyes

在对搜索引擎做了一些研究之后，我决定使用 ElasticSearch，并且想知道用金字塔实现它的最快和最有效的方法是什么。我找到了 Pyes 的文档，但我不确定这是否是正确的选择。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T06:49:59.683

我已经将弹性搜索与金字塔和[pyelasticsearch](https://github.com/rhec/pyelasticsearch)包一起使用，它可以很好地满足我的需求（YMMV）。

那么你能做的*最简单的事情就是在你的视图中建立一个连接。*就像是：

```
def aview(request):
    myobj = ...
    ...
    es = pyelasticsearch.ElasticSearch(request.registry.settings['es_uri'])
    ## index something
    es.index({'a': 1}, 'aindex', 'atype', myobj.id)
    ... 
```

您当然可以注册连接，使其始终处于请求状态并使用金字塔事件进行索引，或使用任务通风器、消息队列等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:35:56.923

Pyes 是可能的，尽管我更喜欢简单地使用原始 JSON，因为所有 ES 文档都在 JSON 中。许多邮件列表帖子也使用 JSON，因为它比各种实现（python、java 等）更通用。

PyCurl 可能对你有用： [http ://curl.haxx.se/libcurl/python/](http://curl.haxx.se/libcurl/python/)

# php - 如何在 PHP 中隐藏 mysql 错误？

> ID：11660160
> 
> 赞同：-5
> 
> 时间：2012-07-25T23:23:06.073
> 
> 标签：php, mysql

我使用 error_reporting(0) 代码来隐藏 PHP 错误，它总是有效，但是 mysql 有一些错误是无用的，是否有任何代码让 mysql 隐藏 mysql 错误，如无效 sql ，1064 错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:26:41.337

这里有一个想法：不要。

立即重新打开 PHP 错误报告，并修复这些错误，而不是将它们隐藏在地毯下。

就个人而言，我喜欢使用`error_reporting(E_ALL ^ E_NOTICE)`. 虽然它并不完美，但我忽略了通知，因为默认行为是我无论如何都想要发生的。

忽略 MySQL 错误是一个很大的***错误***！...好吧，除非您想要一台死机和一百万客户对您生气。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:19:28.460

```
$result = @mysql_operation();
$errno = mysql_errno();
if ($errno > 0)
{
    handle_error();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T23:58:51.453

**警告**

来自 php.net

*   目前，“@”错误控制运算符前缀甚至会禁用将终止脚本执行的严重错误的错误报告。
*   除此之外，这意味着如果您使用“@”来抑制某个函数的错误，并且该函数不可用或输入错误，则脚本将在那里死掉，而不会说明原因。

来自 php.net

**更好的方法：**

定制你自己的想法。只有错误行或错误编号之间的错误

```
<?php

function exception_error_handler($errno, $errstr, $errfile, $errline )
{
    if (error_reporting() === 0)
    {
        return;
    }
    //example turn error OFF, between line 100 and 200
    if ($errline<100 || $errline>200) {
    throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
    } else return;
}

set_error_handler("exception_error_handler");

function catchException($e)
{
    // Do some stuff
}

set_exception_handler('catchException');

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T00:17:43.907

我很惊讶我还没有看到抛出异常。

Try/catch 是自定义运行时错误和异常并允许您的代码继续执行而不是暂停的一种非常有效的方法。

```
class MySQLConnectException extends Exception{
     public function __construct( $message ){
          parent::__construct( $message );
     }
}

try{
    $mysql = new mysqli();
    If( !$mysql )
        Throw new MySQLConnectException('Failed to connect');
}
catch( MySQLConnectException $e ){
    echo $e-> getMessage();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T23:29:31.753

函数调用的`@`前面应该抑制生成的任何错误。

它是[错误控制运算符](http://php.net/manual/en/language.operators.errorcontrol.php)。我会非常轻松地使用它，并尝试首先修复产生错误/警告的代码。

我唯一会使用的`@`是当我使用已弃用代码的第三方库时。当它们弹出时，过多地使用它会掩盖任何真正的问题（比如你可能遇到的问题），并且会使调试变得非常困难。

# android - 锁定应用程序是否需要 root 访问权限？

> ID：11660162
> 
> 赞同：0
> 
> 时间：2012-07-25T23:23:08.633
> 
> 标签：android

我正在与开发人员合作开发一个应用程序，该应用程序将为父母提供对 Android 平板电脑的一些控制。这包括锁定相机，阻止访问某些应用程序，阻止网站，阻止某些广告网络..等。开发人员告诉我设备需要植根。

那么以上可以在不root设备的情况下完成吗？

如果必须root设备。那么这对平板电脑用户意味着什么呢？该应用程序会正常安装吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:43:50.563

如果不植根设备，您将无法做到这一点。它需要超级用户权限。

# jquery - jQuery 箭头键阅读器

> ID：11660164
> 
> 赞同：0
> 
> 时间：2012-07-25T23:23:21.270
> 
> 标签：jquery

您好，我正在使用这个网站[http://odyniec.net/projects/imgareaselect/usage.html#callback-functions](http://odyniec.net/projects/imgareaselect/usage.html#callback-functions) jQuery 来选择图像，即使当我选择图像时我确实得到了坐标，但我没有当我使用键盘上的箭头键移动选择时，无法获取坐标。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:17:43.980

我无法让它与键盘一起使用，所以我会给你一个固定的 jsfiddle 和工作选择。

```
$(document).ready(function() {
    $('#duck').imgAreaSelect({
        handles: true,
        onSelectEnd: function(img, selection) {
            $('input[name="x1"]').val(selection.x1);
            $('input[name="y1"]').val(selection.y1);
            $('input[name="x2"]').val(selection.x2);
            $('input[name="y2"]').val(selection.y2);
        }
    });
}); 
```

[演示](http://jsfiddle.net/hUg76/1/)

# mysql - 使用正则表达式查询 mysql 数据库以获取单词

> ID：11660165
> 
> 赞同：0
> 
> 时间：2012-07-25T23:23:24.637
> 
> 标签：mysql, regex

我正在使用正则表达式来获取一组完成下一个语法的单词：

```
SELECT * FROM words WHERE word REGEXP '^[dcqaahii]{5}$' 
```

我的第一印象让我觉得这很好，直到我意识到有些字母的使用超过了正则表达式中包含的内容。

问题是我想得到所有可以用括号内的字母组成的单词（即5个字母），所以如果我有两个'a'，结果单词可以没有'a'，一个'a'甚至两个'a'，但没有更多。

我应该在我的正则表达式中添加什么来避免这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:48:06.787

正如其他人所建议的那样，首先检索所有候选人并进行后处理可能会更好：

```
SELECT * FROM words WHERE word REGEXP '^[dcqahi]{5}$' 
```

但是，没有什么能阻止您执行多个 REGEXP。您可以使用这个邋遢的表达式选择字母“a”的 0、1 或 2 次出现：

```
'^[^a]*a?[^a]*a?[^a]*$' 
```

所以先进行预过滤，然后将其他 REGEXP 要求与 AND 结合起来：

```
SELECT * FROM words
  WHERE word REGEXP '^[dcqahi]{5}$'
    AND word REGEXP '^[^a]*a?[^a]*a?[^a]*$'
    AND word REGEXP '^[^i]*i?[^i]*i?[^i]*$' 
```

**[编辑]**作为事后的想法，我推断对于非元音，您也希望限制为 0 或 1 次出现。既然如此，那你就继续……

```
 AND word REGEXP '^[^d]*d?[^d]*$'
    AND word REGEXP '^[^c]*c?[^c]*$'
    AND word REGEXP '^[^q]*q?[^q]*$'
    AND word REGEXP '^[^h]*h?[^h]*$' 
```

呸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:30:25.280

我能想到的唯一解决方案是使用上面的 SQL，您必须获得一组初始过滤的数据，然后循环遍历它并使用一些更适合做那种的服务器端代码（PHP 等）进一步过滤逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T23:31:38.027

在正则表达式中，方括号 [] 只是一个字符类，就像一个允许的字符列表。因此，在括号内两次指定相同的字母是多余的。

例如，模式`[sed]`将匹配`sed`，并且`seed`因为`e`是允许字符的一部分。之后在大括号 {} 中指定字符数仅仅是字符类先前允许的字符总数。

因此，该模式`[sed]{3}`将匹配`sed`但不匹配`seed`。

我建议将用于测试单词有效性的逻辑从 SQL 转移到您的程序中。

# iphone - iPhone Wifi 扫描绊脚石

> ID：11660169
> 
> 赞同：2
> 
> 时间：2012-07-25T23:23:52.330
> 
> 标签：iphone, xcode, wifi

我正在尝试从这里使用 SOLStumbler：[Accessing & Using the MobileWiFi.framework](https://stackoverflow.com/questions/2018110/accessing-using-the-mobilewifi-framework) to scan for wifi networks。我知道这不受苹果的支持，但它是用于教育目的和实验。我将以下文件添加到我的应用程序中，它编译得很好，但它总是以错误代码退出。（作为“.m”文件的一部分。）有谁知道如何让它工作？

[SOLStumbler.h](http://code.google.com/p/uwecaugmentedrealityproject/source/browse/trunk/Classes/SOLStumbler.h)：

[SOLStumbler.m](http://code.google.com/p/uwecaugmentedrealityproject/source/browse/trunk/Classes/SOLStumbler.m)：

这部分 SOLStumbler.m 总是输出一个字母错误。通常`e`但有时`u`。

```
libHandle = dlopen("/System/Library/SystemConfiguration/WiFiManager.bundle/WiFiManager", RTLD_LAZY);

    char *error;
    if (libHandle == NULL && (error = dlerror()) != NULL)  {
            NSLog(@"%c",error);
            exit(1);
    } 
```

我的视图控制器代码：

```
#import "SOLStumbler.h"

-(void)viewDidLoad{
    SOLStumbler *networksManager = [[SOLStumbler alloc] init];      
    [networksManager scanNetworks]; 
    NSLog(@"%@", [networksManager description]);
    [networksManager release];  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T00:32:52.533

`SOLStumbler`您尝试使用的代码很旧。这些东西（例如**WiFiManager**）在一个私有框架中。这意味着苹果可以而且经常会在操作系统版本之间进行更改或移动。

我假设您现在使用的是 iOS 5？

我登录了我的 iOS 5 手机，确实，

```
/System/Library/SystemConfiguration/WiFiManager.bundle/ 
```

不存在。所以这就是你的代码失败的原因。

[看看这个有用的线程。](http://code.google.com/p/iphone-wireless/issues/detail?id=45)

看起来您现在可以在**IPConfiguration**框架中找到等效的 (?) 函数。试试这个代码：

```
libHandle = dlopen("/System/Library/SystemConfiguration/IPConfiguration.bundle/IPConfiguration", RTLD_LAZY); 
```

我在越狱的 iOS 5.0.1 手机上运行它并且它工作（加载了 dylib 并找到了一些 Apple80211 功能）。从我链接到的那个线程来看，您可能需要将其安装在越狱手机上的**/Applications**中，才能充分工作。或者，可能不得不为您的沙盒应用程序添加一些*权利*。

# php - 在多维数组中调用键/值

> ID：11660175
> 
> 赞同：0
> 
> 时间：2012-07-25T23:24:46.963
> 
> 标签：php, arrays

我很确定我只是想多了，但我现在想不出任何其他方法。

我有一个包含 image_ids 的隐藏字段。隐藏字段的值看起来像“1076,1077,1078”

在我的控制器中，我正在这样做：

```
 // get the value from hidden field
    $image_string = $this->input->post('images');

    // create array from comma separated string
    $images = explode(',', $image_string);

    $image = array();

    // get image data from the database, returns an array of the database row
    foreach ($images as $id) {
      $image[$id] = $this->file_model->get_image_data($id);
    }

   print_r($image); 
```

当我最后做的`print_r(image);`时候，我得到了这个：

```
Array (
 [0] => stdClass Object ( [image_id] => 1076 )
 [1] => stdClass Object ( [image_id] => 1077 )
 [2] => stdClass Object ( [image_id] => 1078 )
) 
```

这就是我卡住的地方。我需要再做一次 foreach 来回显每个 image_id，但我不知道如何调用它。第二个 foreach 应该是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:25:34.943

你有一个对象数组，所以你只需要：

```
foreach( $image as $obj) {
    echo $obj->image_id;
} 
```

# ruby-on-rails - 使用 active_model_serializers 序列化权限（例如 CanCan）

> ID：11660179
> 
> 赞同：10
> 
> 时间：2012-07-25T23:24:59.850
> 
> 标签：ruby-on-rails, cancan, activemodel, active-model-serializers

如何使用 active_model_serializers 序列化权限？我无权访问模型和序列化程序中`current_user`的`can?`方法。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-25T23:29:17.197

首先，要访问`current_user`序列化程序上下文中的 ，请使用新的范围功能：

```
class ApplicationController < ActionController::Base
  ...
  serialization_scope :current_user
end 
```

如果您手动实例化序列化程序，请确保传递范围：

```
model.active_model_serializer.new(model, scope: serialization_scope) 
```

然后在序列化器内部，添加自定义方法来添加您自己的授权伪属性，使用`scope`（当前用户）来确定权限。

如果您使用的是 CanCan，您可以实例化您的 Ability 类来访问该`can?`方法：

```
attributes :can_update, :can_delete

def can_update
  # `scope` is current_user
  Ability.new(scope).can?(:update, object)
end

def can_delete
  Ability.new(scope).can?(:delete, object)
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T23:14:41.303

我们创建了一个提供此功能的 gem：[https ://github.com/GroupTalent/active_model_serializers-cancan](https://github.com/GroupTalent/active_model_serializers-cancan)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-23T14:58:05.550

我认为你可以传递任何你想要传递的东西，`serialization_scope`所以我只是传递了能力。

```
class ApplicationController < ActionController::Base
 ...
 serialization_scope :current_ability

 def current_ability
   @current_ability ||= Ability.new(current_user)
 end

end

class CommentSerializer < ActiveModel::Serializer
  attributes :id, :content, :created_at, :can_update

  def can_update
    scope.can?(:update, object)
  end

end 
```

我不能这样做，因为我的能力实际上基于两个变量（不在上面的示例中）。
如果您仍然需要访问 current_user，您可以简单地在 Ability 上设置一个实例变量。

# php - InnoDB FOR UPDATE Transaction 导致 php 致命错误，最大执行时间

> ID：11660180
> 
> 赞同：0
> 
> 时间：2012-07-25T23:25:00.160
> 
> 标签：php, mysql, transactions, innodb, cakephp-1.2

情况如下： 1- MySQL InnoDB 表进行事务选择，如下所示：

```
 <?php

        ....
        doQuery('START TRANSACTION');
        $sql = "SELECT * FROM table where amount < 10 FOR UPDATE";
       $res = $doQuery($sql);
// Then a looping through $res includes updates to some fields -amount field- in the same table and set it to values greater than 10

//After the loop
doQuery('COMMIT'); 
```

在 XAMPP localhost 上，我打开了两个不同浏览器的窗口，FireFox 和 Opera，同时请求脚本 URL。我希望其中只有一个能够检索 $res 的值。但是，该脚本返回胎儿错误

> Blockquote 致命错误：超过 30 秒的最大执行时间

我需要知道这个错误的原因吗？是因为 FireFox 和 Opera 这两个客户端无法选择还是因为它们无法更新？我还需要一个保持交易并给我预期结果的解决方案，即只有一个浏览器可以返回结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:38:52.117

您可以`set_time_limit(0);`在脚本顶部添加，但对于通过 http 访问的脚本来说，这不是一个好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:35:48.583

您的脚本输入一个`dead lock`. 为避免这种情况，`ORDER BY`请在查询中添加一个，以确保两个查询将尝试以相同的顺序选择记录。还要确保有索引`amount`，否则查询将不得不锁定整个表。

# drools - 我应该使用多个知识库吗？

> ID：11660183
> 
> 赞同：5
> 
> 时间：2012-07-25T23:25:11.730
> 
> 标签：drools

我们有一个拥有数万个单元的系统。每个单位将有 5-10 米，每个米将有一个与之关联的值。这些仪表的值发生变化，我们需要我们的规则引擎能够实时响应这些变化。

我们将有这样的规则：“如果单元#1 的第一个仪表大于10，单元#1 的第二个仪表小于30，则......”，尽管规则可能比这长得多。每个单元的规则将是完全独立的，因此不会有规则以来自两个不同单元的两个不同仪表的值为条件。

我们将为每个单元设置大约 30 条相同的规则，然后每个单元将有大约 5-15 条自定义规则。这些规则需要在规则引擎运行时动态添加。一个单位很可能会在注册时添加 5-10 条规则，然后从那时起每周添加或删除一条规则。

我们决定为此使用 Drools，我正在尝试找出如何最好地实现它。我对 Drools 真的很陌生，所以我有点困惑。每个单元都有自己的知识库有意义吗？如果是这样，有没有办法共享每个单元相同的规则？

我担心我们可能没有足够的内存来存储所有这些规则，所以我在想如果我们为每个单元都有一个知识库，我们可以将所有知识库序列化，将它们放入数据库中，并在我们使用时检索它们需要他们。那会合理吗？

我考虑为每个单元使用单独的知识库的另一个原因是，每个单元的规则完全独立于其他单元的规则，将它们全部放入同一个知识库可能会影响性能。这是正确的还是 Rete 算法足够聪明来解决这个问题？

此外，是否可以在引擎运行时动态添加规则？是否必须重新编译所有规则？如果发动机仍需要实时响应仪表变化，这需要多长时间？这是否可行？

多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:29:09.387

***每个单元都有自己的知识库有意义吗？如果是这样，有没有办法共享每个单元相同的规则？***

请参阅下面的每个单元以拥有自己的知识库。出于组织目的，您可以考虑将它们放在单独的包中。要在包之间共享规则，您可以在全局区域创建规则并导入它们。虽然这将有助于共享通用规则，但它有一些缺陷：

*   当您有大量包时，您需要在第一次手动导入它们。
*   当您修改特定包中的导入规则时，它将更改全局规则，因此更改会影响所有其他导入规则的包。在 guvnor UI 中，无法直观地判断规则是导入的还是特定于包的。

***我担心我们可能没有足够的内存来存储所有这些规则，所以我在想如果我们为每个单元都有一个知识库，我们可以将所有知识库序列化，将它们放入数据库中，并在我们使用时检索它们需要他们。那会合理吗？***

这是一个选项，但如果规则发生变化，您将需要重新创建知识库。

***我考虑为每个单元使用单独的知识库的另一个原因是因为每个单元的规则完全独立于其他单元的规则，将它们全部放入同一个知识库可能会影响性能。这是正确的还是 Rete 算法足够聪明来解决这个问题？***

**Michal Bali**所著的**Drools JBoss Rules 5.0 Developer's Guide**一书说

 **> Rete算法的性能理论上与知识库中规则的数量无关。

更远，

> 如果您好奇并想查看一些基准测试，您可以在可从 Drools 网站下载的 drools-examples 模块中找到它们。还有一些网站定期发布各种规则引擎的基准测试解决众所周知的数学问题（通常是“Miss Manners”测试和“Waltz”），例如， http: [//illation.com.au/benchmarks/](http://illation.com.au/)。Drools 的性能与其他开源甚至商业引擎相当。

***此外，是否可以在引擎运行时动态添加规则？是否必须重新编译所有规则？如果发动机仍需要实时响应仪表变化，这需要多长时间？这是否可行？***

这里没有具体的想法，但我确信规则需要重新编译才能使用。重新编译新包时，仍然可以使用之前创建的 kbase。他们是独立的。**

# c# - C# 检查是否以管理员身份运行

> ID：11660184
> 
> 赞同：68
> 
> 时间：2012-07-25T23:25:18.337
> 
> 标签：c#, windows

> **可能重复：**
> [检查当前用户是否为管理员](https://stackoverflow.com/questions/3600322/check-if-the-current-user-is-administrator)

我需要测试应用程序（用 C# 编写，运行 Windows XP/Vista/7 操作系统）是否以管理员身份运行（如右键单击 .exe -> 以管理员身份运行，或在“属性”下的“兼容性”选项卡中以管理员身份运行） .

我已经用谷歌搜索并搜索了 StackOverflow，但我找不到有效的解决方案。

我最后一次尝试是这样的：

```
if ((new WindowsPrincipal(WindowsIdentity.GetCurrent()))
         .IsInRole(WindowsBuiltInRole.Administrator))
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-07-25T23:27:51.143

试试这个

```
public static bool IsAdministrator()
{
    var identity = WindowsIdentity.GetCurrent();
    var principal = new WindowsPrincipal(identity);
    return principal.IsInRole(WindowsBuiltInRole.Administrator);
} 
```

这在功能上看起来与您的代码相同，但以上内容对我有用......

在功能上做它，（没有不必要的临时变量）......

```
public static bool IsAdministrator()
{
   return (new WindowsPrincipal(WindowsIdentity.GetCurrent()))
             .IsInRole(WindowsBuiltInRole.Administrator);
} 
```

或者，使用表达式主体属性：

```
public static bool IsAdministrator =>
   new WindowsPrincipal(WindowsIdentity.GetCurrent())
       .IsInRole(WindowsBuiltInRole.Administrator); 
```

# r - 任何 r 包可用于根据特定日期的不均匀付款计算 IRR？

> ID：11660187
> 
> 赞同：11
> 
> 时间：2012-07-25T23:25:46.800
> 
> 标签：r, finance

是否有任何可用的 R 包具有某种形式的功能，可以根据特定日期的不均匀付款来计算 IRR，以进行一次性分配。

例子：

```
df <- data.frame(date = c(as.Date("2010-1-24"), as.Date("2011-5-6"), as.Date("2012-3-24")), pmts=c(-2000,-1000,-800))
today <- as.Date("2012-7-25")
lumpsum <- 4580 
```

我正在寻找一种简单的方法来计算今天收到的 4580 美元的回报率，以换取上面定义的付款时间表。

提前致谢，--JT

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T05:54:52.230

正如评论中已经指出的那样，写一些简单的东西会更容易：

```
NPV<-function(paym,pdates,IRR){
   ptimes<-as.Date(pdates)-min(as.Date(pdates))
   ptimes<-as.numeric(ptimes,units="days")/365.25
   NPV<-sum(paym*(1+IRR)^{-ptimes})
   NPV
}

nlm(function(p){NPV(c(lumpsum,df$pmts),c(today,df$date),p)^2},p=0.1) 
```

内部收益率为 11.26%

编辑：

`lifecontingencies`如果您想使用它来代替，在对包装进行快速侦察之后，它具有现值功能。

```
library(lifecontingencies)
capitals<-c(lumpsum,df$pmts)
times<-c(today,df$date)
times<-as.Date(times)-min(as.Date(times))
times<-as.numeric(times,units="days")/365.25
presentValue(cashFlows=capitals, timeIds=times,interestRates=0.03)
nlm(function(p){presentValue(capitals,times,p)^2},p=0.1) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T17:37:33.940

利用“stats”包的uniroot函数IRR可以编码如下：

```
 cf <- c(-10000, 1300, -1200, 12000) 
   npv <- function(i, cf, t=seq(along=cf)) sum(cf/(1+i)^t) 
   irr <- function(cf) { uniroot(npv, c(0,1), cf=cf)$root } 
   irr(cf)
   [1] 0.0686
   irrinpercent<- irr(cf)*100
   [1] 6.86 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-30T23:00:02.867

pmr 从他的代码示例中的一个很好的答案开始。谢谢！

然而，我对该代码的问题是，问题（也是我的需要）是在现金流具有任意时间时计算 IRR。pmr 的代码需要修改以使 irr 函数将时间向量 t 作为参数，就像他的 npv 函数一样。

为了明确这一点，我对该代码的改编是：

```
# Returns the Internal Rate of Return.
# See: https://www.investopedia.com/terms/i/irr.asp
irr = function(t, cf) {
    uniroot(f = npv, interval = c(0, 1), t = t, cf = cf)$root
}

# Returns the Net Present Value.
# See: https://www.investopedia.com/terms/n/npv.asp
npv = function(t, cf, i) {
    sum( cf / (1 + i)^t )
} 
```

请注意，我更改了 arg 顺序（例如 t first）。此外，t 没有默认值，但如果您想要一个偶数序列，我认为landroni 的评论是正确的：您投资的初始资本是在时间 = 0，而不是 1，正如 irr 函数上方的投资百科链接中清楚的那样.

以下是如何使用我遇到的那些功能的示例。我获得了投资 ATM 网络的机会。这些具有很高的年回报率（每月支付），但也是一种快速贬值的资产（最终清算时可能会出现您本金的 2%）。

在首先定义上述函数后执行以下代码。

```
# parameters:
numYears = 7
capitalInvest = 52000
retAnnual = 0.245
capitalLiquidation = 700

# convert yearly values to mpnthly:
numMonths = numYears * 12
retMonthly = retAnnual / 12    # assumes no compounding

# initialize the time to 0 and the cash flow to capital SPENT (so negative):
t = 0
cf = -capitalInvest

# add monthly returns:
for (m in 1:numMonths) {
    t = c(t, m / 12)    # divide the time by 12 to have units of year
    cf = c(cf, retMonthly * capitalInvest)
}

# add liquidation value also on the final year:
t = c(t, numMonths / 12)    # divide the time by 12 to have units of year
cf = c(cf, capitalLiquidation)

# calculate the IRR:
irr(t, cf) 
```

该代码返回的值为 0.1852015 ~= 18.5%，这与操作员引用我的 18.6% 的值非常接近。

# java - Struts2：比较If标签中的2个变量不起作用

> ID：11660193
> 
> 赞同：0
> 
> 时间：2012-07-25T23:26:18.227
> 
> 标签：java, struts2

我正在检索 2 个值（用户 ID 和配置文件 ID），并将它们设置在变量 userId 和 profileId 中，如下所示。

```
<s:set name="userId" value="#session.User.id"/>
<s:set name="profileId" value="%{#parameters['id']}"/>

<s:if test="%{#userId} != %{#profileId}" >

<a href="#" title="Follow" id="follow-btn">
<img src="theme/images/follow.png" alt="like" />
<span>Follow</span>
</a>

</s:if> 
```

我已经使用`<s:property value="%{#userId}" />`and进行了测试，`<s:property value="%{#profileId}" />`并且它们都能够显示出该值。但是我无法让它在 if 标签中工作。现在，无论这 2 个变量中的值是什么，链接按钮都不会显示。

我不确定 if 标记语句是否正确但是我尝试了很多组合（玩弄`%{}`and `' '`）

我觉得它与数据类型有关，但无论我做什么，比较表达式似乎都不起作用..

加油！~

**更新：** 好的，我发现问题出在`#profileId`. 可能是因为该值是从中`#parameters['id']`返回一个字符串值的。有没有办法将此值转换为int？我试过`Integer.parseInt(#profileId)`了，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:58:06.217

尝试使用这个：

```
<s:if test="#userId != #profileId" > 
```

# rest - Powershell v3 Invoke-RestMethod

> ID：11660194
> 
> 赞同：8
> 
> 时间：2012-07-25T23:26:32.007
> 
> 标签：rest, powershell, curl

我正在尝试使用新的 invoke-restmethod cmdlet 来发布 JSON 文件并已成功完成。但是，我没有像使用 CURL 时那样收到来自网络服务器的响应。对于我想要完成的事情，我需要从 reposne 获取信息到 POST 并将其用于另一个 POST 命令。

有人可以解释我如何从服务器获得预期的响应吗？以下是 CURL 中的两个命令，第二个使用 Invoke-RestMethod。curl 命令将执行正确的 POST 并返回响应。Powershell 命令将执行正确的 POST，但不会返回响应。

谢谢

**编辑：**我相信我试图从 ps 输出中获得的主要内容是“响应标头”，即。curl 命令的以下输出

```
 < HTTP/1.1 201 Created
 < Date: Thu, 26 Jul 2012 01:20:06 GMT
 < Server: Apache
 < X-EM7-Implemented-methods: GET,PUT,POST
 < X-Powered-By: ScienceLogic,LLC - EM7 API/Integration Server
 < Location: /ticket/321750
 < X-EM7-status-message: ticket /ticket/321750 added.
 < X-EM7-status-code: CREATED
 < Content-Length: 830
 < Content-Type: application/json
 < 
```

**卷曲命令**

```
 curl -f -v -s -k --no-sessionid -H X-em7-beautify-response:1 -H content-  type:application/json https://URLHERE --data-binary  @jsonfile.json 
```

**Powershell 代码**

```
 $cert=New-Object System.Security.Cryptography.X509Certificates.X509Certificate2("certfile.crt")
 $json = Get-Content jsonfile.json
 $cred = Get-Credential -Message "Enter Credentials"

 Invoke-RestMethod -Uri https://URLHERE -Credential $cred -Body $json -Certificate $cert -ContentType application/json -Method POST 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T05:04:42.920

经过一番摸索，我发现了 cmdlet `Invoke-WebRequest`。`Invoke-RestMethod`除了返回标头和响应之外，此 cmdlet 基本相同。

# wso2 - 如何在 ESB 4.0.3 中填充 SOAP 标头，例如 From、ReplyTo

> ID：11660198
> 
> 赞同：0
> 
> 时间：2012-07-25T23:27:03.980
> 
> 标签：wso2, wso2esb

我们在 MAC OSX 10.7.4 上使用带有数据服务功能的 WSO2 ESB 4.0.3。

我有将消息转发到数据服务的代理服务。当数据服务出现任何故障时，故障返回到在 OUTSEQUENCE 中调用代理服务。现在，如果有任何错误，我会将其转发到代理服务中的常见错误处理程序，这发生在 OUTSEQUENCE 中。这个常见的错误处理程序只是另一个代理服务。

现在，当错误处理完成时，控制返回到调用错误处理代理服务的原始代理服务。但是当控件从错误处理程序返回到原始代理服务时会发生什么，它再次开始执行代理服务的 OUTSEQUENCE。

所以对我来说，如果数据服务出现故障，它会执行两次代理服务的 OUTSEQUENCE。

这是标准行为吗？我曾经使用 Java 执行方式，当方法调用返回时，它开始执行下一行。但这里看起来它再次从头开始执行 OUTSEQUENCE。

为了避免重新开始执行 OUTSEQUENCE，我在错误处理程序代理中填充“传输”范围的值，该值将在过滤器中介中使用，以避免两次执行 OUTSEQUENCE 中的逻辑。

我正在尝试查找是否可以使用任何 SOAP 标头而不是设置属性。我看到没有设置像“From”或“ReplyTo”这样的 SOAP 标头，并且我相信 MessageId 会发生消息协调。我们如何使用这些 SOAP 标头而不是属性来转移流逻辑。

请帮忙。谢谢阿比吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:18:09.950

在这种情况下，您可以使用调用调解器而不是使用发送调解器来调用 Web 服务。这对错误处理服务进行了阻塞调用并返回到同一个地方。

并且还可以使用 esb 4.0.3 在发送中介级别指定接收序列。默认情况下，响应是在外序列级别接收的。例如。<send receive="fundTransferSequence"> <endpoint> <address encoding="UTF-8" statistics="disable" uri="http://10.1.23.11:8888/EgateValidWS/EgateValidWSSoapHttpPort" >

```
 &lt;/address&gt;
&lt;/endpoint&gt; 
```

</发送>

# python - Aquamacs（在 Mac lion 上）：无论我写什么，我都被解释为“Enter”

> ID：11660203
> 
> 赞同：0
> 
> 时间：2012-07-25T23:27:48.583
> 
> 标签：python, osx-lion, aquamacs

我正在编辑我不久前编写的 python 脚本，在 Mac lion 上使用 aquamacs。

无论我键入的哪个字母或数字都被解释为“输入”（例如，我按“g”，我的文本被打乱并出现换行符，但“g”没有出现）。重新启动 aquamacs、我运行它的终端或整台计算机都没有帮助。

其他观察结果（可能连接也可能不连接）： - 脚本位于 Dropbox 下的文件夹中 - 文件具有特殊属性（即“@”出现在权限末尾，键入 ls -lah 时） -我可能已经按下了 Control、Apple 和其他我不应该拥有的键的组合......

对此的任何解决方案将不胜感激（如果之前已经处理过，我深表歉意）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T11:36:48.587

我最近也遇到了这个问题。您需要添加次要模式填充。以鼠标 3 的方式在模式行中按下 Python，然后选择自动填充。

# php - sql 查询适用于 phpmyadmin 但不适用于 mysql_query

> ID：11660208
> 
> 赞同：0
> 
> 时间：2012-07-25T23:28:40.613
> 
> 标签：php, mysql, insert

我被这个困住了。

这是代码：

这就是我调用函数的方式，

`$res = DataManager::agregarPropiedad($_POST);`

这是生成查询并发送它的函数，

```
public static function agregarPropiedad($datos){
  $sql = "INSERT INTO propiedades (id_propiedad, nombre, tipopropiedad, descripcion, dormitorios, baños, direccion, localidad, provincia, fecha_alta, sup_cubierta, sup_total)
  VALUES (null, '" . $datos['nombre'] . "', '" . $datos['tipo'] . "', '" . $datos['descripcion'] . "', '" . $datos['dormitorios'] . "', '" . $datos['baños'] . "', '" . $datos['direccion'] . "', '" . $datos['localidad'] . "', '" . $datos['provincia'] . "', CURRENT_TIMESTAMP, '" . $datos['supcubierta'] . "', '" . $datos['suptotal'] . "')";
  //$sql = "insert into prueba values(null,'".$datos['nombre']."')";
  echo $sql; 
  return DataManager::consulta($sql); 
```

}

当我复制`echo`$sql 并粘贴到 phpMyAdmin 时工作正常，但是当我尝试发送我的函数时没有插入任何东西，但我没有错误。`mysql_erros()`它也是空的。

你可以看到，有一个评论`$sql`。我只用它来测试另一个更简单的表，并查询也可以正常工作的函数“consulta”。

这可能是在 mysql 数据库中插入东西的 40 个函数，但是我遇到问题的第一个函数，我不知道为什么 =(

帮顶...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:04:00.673

根据个人经验，在转储/复制/粘贴到 PhPMyAdmin 时有效但在代码中无效的 MySQL 查询 **是**由以下原因引起的：

*   自动增量/唯一字段问题
*   未处理的表单数据中的意外字符
*   重复的 POST 值（如数组）
*   不匹配的字段计数
*   编码/字符集问题

如果您解决第二个问题，问题可能会自行解决。在任何情况下，您至少应该使用 strip_tags 和 add_slashes 处理您的 POST(ed) 数据，但对于 MySQL，强烈建议使用 mysql_real_escape_string()。

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php) http://www.adminsehow.com/2010/03/prevent-mysql-injection-in-php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:45:05.770

VALUES() 中的引号存在问题及其易受攻击的问题。

```
<?php 
public static function agregarPropiedad($datos)
{
    $tipo = mysql_real_escape_string($datos['tipo']);
    $nomber = mysql_real_escape_string($datos['nombre']);
    $dormitorios = mysql_real_escape_string($datos['descripcion']);
    $baños = mysql_real_escape_string($datos['baños']);
    $direccion = mysql_real_escape_string($datos['direccion']);
    $localidad = mysql_real_escape_string($datos['localidad']);
    $provincia = mysql_real_escape_string($datos['provincia']);
    $supcubierta = mysql_real_escape_string($datos['supcubierta']);
    $suptotal = mysql_real_escape_string($datos['suptotal']);
    $sql = "INSERT INTO propiedades (id_propiedad, nombre, tipopropiedad, descripcion, dormitorios, baños, direccion, localidad, provincia, fecha_alta, sup_cubierta, sup_total)";
    $sql .= "VALUES (null,'$tipo','$nomber ','$dormitorios ','$baños ','$direccion ','$localidad','$provincia ',CURRENT_TIMESTAMP,'$supcubierta','$suptotal')";
    if(mysql_query($sql))
    {
        return TRUE;
    }else{ return FALSE; }
}
?> 
```

# haskell - Data.Vector.Binary 防止对列表进行编码。这是 GHC 错误吗？

> ID：11660214
> 
> 赞同：1
> 
> 时间：2012-07-25T23:29:09.567
> 
> 标签：haskell

在 GHCI 中，如果你运行：

```
import Data.Binary
encode [1] 
```

一切顺利。但是，如果你然后运行：

```
import Data.Vector.Binary
encode [1] 
```

您收到一条错误消息：

> 由于使用“编码”而导致二进制 [t0] 的重叠实例
> 
> 匹配实例：
> 
> ```
>  instance (Data.Vector.Generic.Base.Vector v a, Binary a) =>
>           Binary (v a)
>    -- Defined in `Data.Vector.Binary'
> 
>  instance Binary a => Binary [a] -- Defined in `Data.Binary' 
> ```
> 
> 在表达式中：编码 [1]
> 
> 在 `it' 的等式中：it = encode [1]

似乎 GHC 认为我的列表是矢量类型而不是列表。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:38:09.147

如果头部匹配，类型类匹配不会回溯。实例头

```
 Binary (v a) 
```

说“对于任何类型`v: * -> *`和类型`a:*`匹配`Binary (v a)`。” 从而`[] a`匹配。中的实例`Data.Vector`可能比它应该的更通用。OverlappingInstances 扩展允许您通过选择“最具体的实例”来解决这种情况，在这种情况下显然是`[a]`.

IMO，Haskell 应该提供一种控制实例范围的机制，以帮助防止此类问题，但它没有。

# html - 我可以在 Rails 视图中输入不带表单的内容吗？

> ID：11660222
> 
> 赞同：0
> 
> 时间：2012-07-25T23:29:54.293
> 
> 标签：html, ruby-on-rails, forms, model-view-controller

我想在我的页面上有几个复选框，以及一个访问这些复选框的值以传递`link_to`帮助器的链接。我不想使用表单，因为视图本质上散布了许多链接，而且它自然看起来不像是带有一个逻辑提交按钮的表单。

我有类似的东西

```
 <% for p in @some_array %>
 <!--other stuff .... -->
 <input value=<%= p.id %> id=<%= p.id %> name="selected[]" type=checkbox>
 <!--other stuff .... -->
<%= link_to "View all selected thing(s)", :action => 'show_selected', :selected_things => selected[] %> 
```

但它似乎无法识别`selected`存储输入的变量。它提出了

```
undefined local variable or method `selected' for #<#<Class:0x000001021b4a38>:0x00000102319a90> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:35:42.960

我想说代码片段中的最后一行导致错误：

```
<%= link_to "View all selected thing(s)", :action => 'show_selected', :selected_things => selected[] %> 
```

正如 ruby​​ 抱怨 a`selected`没有被定义一样。

（虽然我看不出你为什么不想使用表单，因为将选择强制转换为可以传递给链接的东西需要一些 javascript 魔法。）

# c# - c# - 优化 SQLite Select 语句

> ID：11660224
> 
> 赞同：0
> 
> 时间：2012-07-25T23:30:10.367
> 
> 标签：c#, sqlite, select

我正在为我的数据库使用 System.Data.SQLite，并且我的选择语句非常慢。查询大约 5000 行数据大约需要 3-5 分钟。这是我正在使用的代码：

```
 string connectionString;
        connectionString = string.Format(@"Data Source={0}", documentsFolder + ";Version=3;New=False;Compress=True;");
        //Open a new SQLite Connection
        SQLiteConnection conn = new SQLiteConnection(connectionString);
        conn.Open();

        SQLiteCommand cmd = new SQLiteCommand();
        cmd.Connection = conn;
        cmd.CommandText = "Select * From urls";
        //Assign the data from urls to dr
        SQLiteDataReader dr = cmd.ExecuteReader();

        SQLiteCommand com = new SQLiteCommand();
        com.CommandText = "Select * From visits";
        SQLiteDataReader visit = com.ExecuteReader();

        List<int> dbID2 = new List<int>();
        while (visit.Read())
        {
            dbID2.Add(int.Parse(visit[1].ToString()));
        }
        //Read from dr
        while (dr.Read())
        {
            string url = dr[1].ToString();
            string title = dr[2].ToString();
            long visitlong = Int64.Parse(dr[5].ToString());
            string browser = "Chrome";
            int dbID = int.Parse(dr[0].ToString());
            bool exists = dbID2.Any(item => item == dbID);
            int frequency = int.Parse(dr["visit_count"].ToString());

            bool containsBoth = url.Contains("file:///");

            if (exists)
            {
                if (containsBoth == false)
                {
                    var form = Form.ActiveForm as TestURLGUI2.Form1;

                    URLs.Add(new URL(url, title, browser, visited, frequency));
                    Console.WriteLine(String.Format("{0} {1}", title, browser));
                }
            }

        }
        //Close the connection
        conn.Close(); 
```

这是另一个需要很长时间的示例：

```
IEnumerable<URL> ExtractUserHistory(string folder, bool display)
{
    // Get User history info
    DataTable historyDT = ExtractFromTable("moz_places", folder);

    // Get visit Time/Data info
    DataTable visitsDT = ExtractFromTable("moz_historyvisits",
                                           folder);

    // Loop each history entry
    foreach (DataRow row in historyDT.Rows)
    {
        // Select entry Date from visits
        var entryDate = (from dates in visitsDT.AsEnumerable()
                         where dates["place_id"].ToString() == row["id"].ToString()
                         select dates).LastOrDefault();
        // If history entry has date
        if (entryDate != null)
        {
            // Obtain URL and Title strings
            string url = row["Url"].ToString();
            string title = row["title"].ToString();
            int frequency = int.Parse(row["visit_count"].ToString());
            string visit_type;

            //Add a URL to list URLs
            URLs.Add(new URL(url, title, browser, visited, frequency));

            // Add entry to list
            //    URLs.Add(u);
            if (title != "")
            {
                Console.WriteLine(String.Format("{0} {1}", title, browser));
            }
        }
    }

    return URLs;
}

DataTable ExtractFromTable(string table, string folder)
{
    SQLiteConnection sql_con;
    SQLiteCommand sql_cmd;
    SQLiteDataAdapter DB;
    DataTable DT = new DataTable();

    // FireFox database file
    string dbPath = folder + "\\places.sqlite";

    // If file exists
    if (File.Exists(dbPath))
    {
        // Data connection
        sql_con = new SQLiteConnection("Data Source=" + dbPath +
                            ";Version=3;New=False;Compress=True;");

        // Open the Connection
        sql_con.Open();
        sql_cmd = sql_con.CreateCommand();

        // Select Query
        string CommandText = "select * from " + table;

        // Populate Data Table
        DB = new SQLiteDataAdapter(CommandText, sql_con);
        DB.Fill(DT);

        // Clean up
        sql_con.Close();
    }
    return DT;
} 
```

现在，我该如何优化这些以使它们更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:48:35.100

除了将更多的数据聚合作为连接移动到 SQL 之外，您还可以考虑让您`SQLiteDataReader`提供数据类型，而不是总是解析值。

例如，您有以下行：

```
long visitlong = Int64.Parse(dr[5].ToString()); 
```

`dr[5]`是一个 Sqlite 值，您首先将其转换为字符串，然后将其解析为 long。这些解析操作需要时间。为什么不这样做：

```
long visitlong = dr.GetInt64(5); 
```

或者：

```
long visitlong = dr.GetInt64(dr.GetOrdinal("columnName")); 
```

查看[SqliteDataReader 提供的各种方法，](http://www.devart.com/dotconnect/sqlite/docs/Devart.Data.SQLite~Devart.Data.SQLite.SQLiteDataReader_members.html)并尽可能使用它们，而不是解析值。

**编辑：**

*请注意，这需要将数据存储为正确的类型。如果数据库中的所有内容都存储为字符串，那么一些解析将是不可避免的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T04:51:57.743

确保您最近运行过 SQL 命令“ANALYZE {db|table|index};”。

我最近遇到了一种情况，即查询在我的 ER 软件 (Navicat) 中运行得很快（<1 秒），即：没有调试，但在 Visual Studio 中调试非常慢（>1 分钟）。事实证明，因为我在 Navicat (SQLite v3.7) 中进行了数据库设计，所以统计数据与 Visual Studio (v3.8) 中的 System.Data.SQLite 使用的统计数据不同。运行“分析；” 在 Visual Studio 的整个数据库文件上更新了 v3.8 使用的 [sqlite_statX] 表。之后两个地方的速度都是一样的。

# java - 将字符串从 Java 传递到 bash 脚本

> ID：11660228
> 
> 赞同：0
> 
> 时间：2012-07-25T23:30:26.883
> 
> 标签：java, linux, shell, unix, scripting

所以我有一个客户端和一个服务器 Java 程序。客户端使用 Java processbuilder 执行脚本，但我的问题是用户输入了需要传递给 bash 脚本的信息。所以，本质上，我需要知道如何将三个不同的字符串发送到 bash 脚本正在读取的三个不同的变量。该脚本正在复制文件，因此我宁愿不使用 java 制作 txt 文件并让脚本读取文件。我还想要一种能够在 OS X 和 Windows 上运行的方法，因此欢迎改进。我目前在 Ubuntu 上使用 Java 7。

这是我正在尝试做的一个片段：.java

```
 Scanner bob = new Scanner(System.in);
    String workingDirectory = new String(System.getProperty("user.dir"));
    File tempDir = new File(workingDirectory); 
    String script = new String(workingDirectory + "/copyjava.sh");

    System.out.print("Designate the location of the file: ");
    String loc = bob.next();
    System.out.print("Type the name of the file w/ extension: ");
    String name = bob.next();
    System.out.print("What is the location of THIS file? "); //I know there is a way to do this automagically but I can't remember how...
    String wkspace = bob.next();
    ProcessBuilder pb = new ProcessBuilder( script, loc, name, wkspace);
    pb.start();
    File myFile = new File (name); 
```

脚本：

```
read loc

read name

read wkspace

cd $LOC

cp $name $wkspace 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:39:30.200

你的 shell 脚本有问题。该`read`命令从标准输入读取，但您将输入作为参数传递。您还在更改 loc 变量的大小写。shell 中的变量区分大小写。将您的脚本更改为以下内容：

```
#!/bin/sh
loc=$1
name=$2
wkspace=$3
cd "$loc" || { printf 'failed to cd to %s\n' "$loc" ; exit 1; }
cp "$name" "$wkspace" || { printf 'failed to copy %s\n' "$name" ; exit 1; } 
```

附带说明一下，您不需要调用以不同语言编写的外部脚本来复制文件。你应该在java中实现它。在 java 中实现这一点也会给你的代码你想要的平台独立性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:37:26.807

您在命令行上传递参数，但从脚本中的标准输入读取。如何将脚本更改为：

```
cd $1

cp $2 $3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T23:39:13.683

我没有看到任何客户端/服务器交互，但让我们关注真正重要的事情：您正在将参数传递给脚本，但您的脚本正试图从标准输入中读取它们。

要解决您的问题，请按如下方式修改您的脚本：

```
#!/bin/sh
LOC=$1
name=$2
wkspace=$3

cd $LOC

cp $name $wkspace 
```

查看[文档](http://linuxconfig.org/Bash_scripting_Tutorial#4-passing-arguments-to-the-bash-script)以获取更多详细信息。

但是没有做任何真正需要特定于系统的脚本文件的事情。复制文件的最佳方式是使用 Java 提供的自己的机制，这样您就无需担心底层操作系统。

如果您继续使用该脚本，那么您将需要另一个用于 Windows 系统的脚本，然后根据`os.name`系统属性的值决定您应该运行哪个脚本。

# loops - 在球拍中通过循环附加的正确方法是什么？

> ID：11660230
> 
> 赞同：3
> 
> 时间：2012-07-25T23:30:42.673
> 
> 标签：loops, racket

今天开始学习球拍。我试图找到通过循环追加的正确方法，但找不到答案或自己弄清楚语法。

例如，如果我想要使用 hc-append 的一行九个圆圈，如果不手动键入九个嵌套的 hc-append 程序，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T00:23:53.740

您需要意识到的第一件事是，Racket 中的“循环”实际上只是递归。在这种情况下，您希望将一堆绘图调用链接在一起。如果我们把它写出来，我们的目标是：

```
(hc-append (circle 10) 
    (hc-append (circle 10)
        (hc-append (circle 10)
            (hc-append (circle 10)
                (hc-append (circle 10)
                    (hc-append (circle 10)
                        (hc-append (circle 10)
                            (hc-append (circle 10)
                                (hc-append (circle 10)))))))))) 
```

我假设我们所有的圆圈都是相同的半径。

现在，由于我们要编写一个递归方法，我们需要考虑我们的基本情况。我们想要画九个圆圈。我们称之为最大圈数`max`。我们的基本情况，当我们打破我们的“循环”时，将是当我们到达`max`迭代时，或者当`(= iterations max)`.

现在是递归本身。我们已经知道我们至少需要传入两个变量，当前迭代`iterations`和最大迭代`max`。如果您查看上面的代码，您会注意到所有“循环”中的重复元素都是`(circle 10)`. 现在有很多方法可以传递它——例如，有些人会选择只传递半径——但我认为最简单的方法是传递圆的图片。

最后，我们还必须传递我们到目前为止所做的图片。也就是说，当我们将一个圆圈附加到我们的链上时，我们需要将它传递回递归方法，以便我们可以继续附加。

现在我们已经解决了这个问题，我们可以定义递归方法的结构，我们称之为`circle-chain-recursive`：

```
(define (circle-chain-recursive iteration max crcle output)
    ; body here
) 
```

我们方法的“胆量”将是一个`if`. 如果我们已经达到最大迭代，则返回输出。否则附加另一个圆圈， increment `iteration`，然后再次调用该方法。

```
(define (circle-chain-recursive iteration max crcle output)
  (if (= iteration max) 
      output
      (circle-chain-recursive
        (+ 1 iteration) max crcle (hc-append crcle output)))) 
```

我个人不喜欢直接调用这样的递归循环方法，所以我会写一个这样的辅助方法：

```
(define (circle-chain num radius)
  (circle-chain-recursive 0 num (circle radius) (circle 0))) 
```

现在，如果我想要一系列 9 个半径为 10 的圆，我所要做的就是调用`(circle-chain 9 10)`.

你会注意到我传入`(circle 0)`的参数是`output`. 这是因为该`hc-append`方法需要一个`pict`参数。由于我们没有从任何圆圈开始，我将其传递给相当于“空白”或零图片。可能还有其他方法可以传递“空白”图片，但我对`slideshow/pict`图书馆不太熟悉，不知道。

我希望这能澄清一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T17:37:35.310

Racket 中提供了三种样式的循环：

### #1 for 循环风格

这种风格使用 Racket Guide 第 11 章[“迭代和理解”](http://docs.racket-lang.org/guide/for.html)中描述的语法。它看起来像这样：

```
(require slideshow/pict)

(for/fold ([result (blank)]) ([i (in-range 9)])
  (hc-append (circle 10) result)) 
```

在这种风格中，在 for 之后的第一个括号*中*定义了循环的临时变量。在我的示例中有一个这样的变量，称为*result*。然后定义迭代变量以及它们迭代的内容。所以在这里，*i*循环 0 到 8 的数字。循环体为每个*i*运行一次，每次将结果分配给*result*，循环的最终值是最后的*result*值。

### #2 地图和折叠样式。

这种风格[在指南的第 3.8 节中进行了](http://docs.racket-lang.org/guide/pairs.html)描述。它看起来像这样：

```
(require slideshow/pict)
(foldl hc-append (blank) (build-list 9 (lambda (i) (circle 10)))) 
```

此代码首先列出 9 个圆圈：

```
(define o (circle 10))
(build-list 9 (lambda (i) o)  --->  (list o o o o o o o o o) 
```

*列表*表示法是更冗长的*cons*表示法的简写。

```
(list o o o o o o o o o)  --->  (cons o (cons o (cons o (cons o (cons o (cons o (cons o (cons o (cons o empty))))))))) 
```

*foldl*函数的思考方式是将一段数据转换为一段计算。它将列表作为输入，并将其转换为函数调用的集合。

*foldl*函数获取列表并用第一个参数替换列表中的每个 cons，并用第二个参数替换列表*末尾*的*空。*在示例中，我传递了*hc-append*函数和（空白），因此替换如下所示：

```
(foldl hc-append (blank) ...) --->
(hc-append o (hc-append o (hc-append o (hc-append o (hc-append o (hc-append o (hc-append o (hc-append o (hc-append o (blank)))))))))) 
```

这一系列函数调用正是您想要避免手动编写的。*Foldl*为您计算它。

### #3 递归风格

这是罗迪在他的回答中描述的风格。作为编码风格的一般问题，只有在没有简单的 *for、*map*或*fold*可能时才应该使用递归风格，例如在遍历递归数据结构时。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T17:38:25.153

冷冻豌豆的罗迪几乎涵盖了这个答案。

我想补充一点，因为这种事情很常见——重复一个过程并积累结果——Racket 语言中有一些功能可以简洁地表达这个想法。其中一项功能是 Racket 的[*for/fold*](http://docs.racket-lang.org/reference/for.html#%28form._%28%28lib._racket/private/base..rkt%29._for/fold%29%29)循环。举个例子：

```
> (for/fold ([result 'Go!]) 
            ([i (in-range 5)])
    (list 'Duck result))
'(Duck (Duck (Duck (Duck (Duck Go!))))) 
```

在这里，我们对初始值*'* *Go！*积累一个结果。 *for/fold*的实现是基于 Roddy 描述的递归过程，所以一旦你掌握了基础知识，你就会知道足够舒适地使用*for/fold 。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-11T03:23:39.377

这是一篇旧帖子，但阅读量很大，因此我添加了一个答案。以下使用“named let”的方法也很方便：

```
(define (f)
  (let loop ((counter 1)
             (result (blank)))
    (if (< counter 10)
        (loop (add1 counter)
              (hc-append (circle 10) result))
        result))) 
```

# actionscript-3 - 获取库对象图片的实用方法

> ID：11660232
> 
> 赞同：0
> 
> 时间：2012-07-25T23:31:13.307
> 
> 标签：actionscript-3, flash

我正在为我在 AS3 上的平台游戏制作关卡创建者。我正在寻找一种在我的 .fla 上获取库对象的图形表示的方法，这样用户就可以在世界上所需的坐标上插入该对象。我的意思是我只想要一张 mc 第一帧的照片，而不需要它的属性和方法（不需要制作包含该图像的 .jpg），因为那是问题开始出现的时候，我只想要播放模式下的对象功能，而不是关卡创建者。

比如说，一个球通过每帧更新它的位置来一直弹跳。在关卡创建器上，我只想获取球图片以将其插入所需位置。如果我把整个球对象带到关卡创建者那里，它不会停止弹跳，而且会把事情搞砸。

我希望我很清楚......我只想知道是否有可行的解决方案；如果不是，那么我将创建一个所有世界对象都将扩展到的类，该类具有初始化所有对象功能的 init() 函数，因此它仅在播放模式下调用，而不是在关卡创建者上调用。无论如何感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:52:20.880

您做错的是*将功能直接添加到 MovieClip*。

[请阅读我之前更深入地涵盖此概念的答案之一](https://stackoverflow.com/questions/9611426/actionscript-3-0-why-is-it-a-good-idea-to-detach-the-code-for-moving-an-object/9611760#9611760)。

MovieClips 应该仅用于显示，表示实际游戏类的图形，例如：

```
public class Player
{
    // Graphics that represent the Player.
    protected var display:MovieClip;

    // Constructor.
    public function Player()
    {
        display = new PlayerMovieClip();
    }
} 
```

无论如何，一旦你修复了这个问题，你就可以使用`BitmapData`它来获取 MovieClips 的位图样本`draw()`：

```
// Assume that 'mc' is your MovieClip.
var sample:BitmapData = new BitmapData(mc.width, mc.height, true, 0);
sample.draw(mc);

// This is your image.
var texture:Bitmap = new Bitmap(sample); 
```

# c# - 在 C# 中找出用户名（谁）修改的文件

> ID：11660235
> 
> 赞同：6
> 
> 时间：2012-07-25T23:31:35.477
> 
> 标签：c#, file-io, event-log, filesystemwatcher

我正在使用 FileSystemWatcher 来监视文件夹。但是当目录中发生某些事件时，我不知道如何搜索谁对该文件产生了影响。我尝试使用事件日志。它只是行不通。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T00:19:37.967

我不记得我在哪里找到了这段代码，但它是使用 pInvoke 的替代方法，我认为这对于这项任务来说有点矫枉过正。使用`FileSystemWatcher`来查看文件夹，当事件触发时，您可以使用以下代码确定是哪个用户更改了文件：

```
private string GetSpecificFileProperties(string file, params int[] indexes)
{
    string fileName = Path.GetFileName(file);
    string folderName = Path.GetDirectoryName(file);
    Shell32.Shell shell = new Shell32.Shell();
    Shell32.Folder objFolder;
    objFolder = shell.NameSpace(folderName);
    StringBuilder sb = new StringBuilder();

    foreach (Shell32.FolderItem2 item in objFolder.Items())
    {
        if (fileName == item.Name)
        {
            for (int i = 0; i < indexes.Length; i++)
            {
                sb.Append(objFolder.GetDetailsOf(item, indexes[i]) + ",");
            }

            break;
        }
    }

    string result = sb.ToString().Trim();
    //Protection for no results causing an exception on the `SubString` method
    if (result.Length == 0)
    {
        return string.Empty;
    }
    return result.Substring(0, result.Length - 1);
} 
```

Shell32 是对 DLL 的引用：Microsoft Shell Controls And Automation **- 它是一个 COM 引用**

以下是您如何调用该方法的一些示例：

```
string Type = GetSpecificFileProperties(filePath, 2);
string ObjectKind = GetSpecificFileProperties(filePath, 11);
DateTime CreatedDate = Convert.ToDateTime(GetSpecificFileProperties(filePath, 4));
DateTime LastModifiedDate = Convert.ToDateTime(GetSpecificFileProperties(filePath, 3));
DateTime LastAccessDate = Convert.ToDateTime(GetSpecificFileProperties(filePath, 5));
string LastUser = GetSpecificFileProperties(filePath, 10);
string ComputerName = GetSpecificFileProperties(filePath, 53);
string FileSize = GetSpecificFileProperties(filePath, 1); 
```

或者将多个逗号分隔的属性放在一起：

```
string SizeTypeAndLastModDate = GetSpecificFileProperties(filePath, new int[] {1, 2, 3}); 
```

* * *

注意：此解决方案已在 Windows 7 和 Windows 10 上进行了测试。除非在[使用 Shell32 获取文件扩展属性时按照异常在](https://stackoverflow.com/q/31403956/495455)STA 中运行，否则它将无法正常工作，您将看到以下错误：

> 无法将“Shell32.ShellClass”类型的 COM 对象转换为接口类型“Shell32.IShellDispatch6”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T23:44:01.970

您需要在文件系统上启用审核（并且审核仅在 NTFS 上可用）。您可以通过应用组策略或本地安全策略来做到这一点。您还必须对要监控的文件启用审核。您执行此操作的方式与修改文件的权限相同。

然后将审核事件写入安全事件日志。您必须监视此事件日志以查找您感兴趣的审计事件。执行此操作的一种方法是创建一个计划任务，该任务在记录您感兴趣的事件时启动应用程序。仅当事件没有以非常高的速率记录时，为每个事件启动一个新进程才是可行的。否则您可能会遇到性能问题。

基本上，您不想查看文件的内容或属性（shell 函数会这样做`GetFileDetails`）。此外，您不想使用文件共享 API 来获取打开文件的网络用户（`NetGetFileInfo`确实如此）。您想知道上次修改文件的进程的用户。Windows 通常不会记录此信息，因为它需要太多资源来执行所有文件活动。相反，您可以有选择地为对特定文件（和文件夹）执行特定操作的特定用户启用审核。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T23:44:26.120

看来您需要调用 Windows API 函数才能获得所需的内容，这涉及到 PInvoke。另一个论坛上的一些人一直在研究它并想出*了一些办法*，你可以在[这里找到他们的解决方案](http://vbcity.com/forums/p/133307/698930.aspx#698930)。但是，它似乎只适用于网络共享上的文件（而不是本地机器上的文件）。

供将来参考，这是[dave4dl 发布的代码](http://vbcity.com/forums/p/133307/698930.aspx#698930)：

```
[DllImport("Netapi32.dll", SetLastError = true)]
static extern int NetApiBufferFree(IntPtr Buffer);

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto, Pack = 4)]
struct FILE_INFO_3
{
    public int fi3_id;
    public int fi3_permission;
    public int fi3_num_locks;
    public string fi3_pathname;
    public string fi3_username;
}

[DllImport("netapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
static extern int NetFileEnum(
     string servername,
     string basepath,
     string username,
     int level,
     ref IntPtr bufptr,
     int prefmaxlen,
     out int entriesread,
     out int totalentries,
     IntPtr resume_handle
);

[DllImport("netapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
static extern int NetFileGetInfo(
  string servername,
  int fileid,
  int level,
  ref IntPtr bufptr
);

private int GetFileIdFromPath(string filePath)
{
    const int MAX_PREFERRED_LENGTH = -1;

    int dwReadEntries;
    int dwTotalEntries;
    IntPtr pBuffer = IntPtr.Zero;
    FILE_INFO_3 pCurrent = new FILE_INFO_3();

    int dwStatus = NetFileEnum(null, filePath, null, 3, ref pBuffer, MAX_PREFERRED_LENGTH, out dwReadEntries, out dwTotalEntries, IntPtr.Zero);

    if (dwStatus == 0)
    {
        for (int dwIndex = 0; dwIndex < dwReadEntries; dwIndex++)
        {

            IntPtr iPtr = new IntPtr(pBuffer.ToInt32() + (dwIndex * Marshal.SizeOf(pCurrent)));
            pCurrent = (FILE_INFO_3)Marshal.PtrToStructure(iPtr, typeof(FILE_INFO_3));

            int fileId = pCurrent.fi3_id;

            //because of the path filter in the NetFileEnum function call, the first (and hopefully only) entry should be the correct one
            NetApiBufferFree(pBuffer);
            return fileId;
        }
    }

    NetApiBufferFree(pBuffer);
    return -1;  //should probably do something else here like throw an error
}

private string GetUsernameHandlingFile(int fileId)
{
    string defaultValue = "[Unknown User]";

    if (fileId == -1)
    {
        return defaultValue;
    }

    IntPtr pBuffer_Info = IntPtr.Zero;
    int dwStatus_Info = NetFileGetInfo(null, fileId, 3, ref pBuffer_Info);

    if (dwStatus_Info == 0)
    {
        IntPtr iPtr_Info = new IntPtr(pBuffer_Info.ToInt32());
        FILE_INFO_3 pCurrent_Info = (FILE_INFO_3)Marshal.PtrToStructure(iPtr_Info, typeof(FILE_INFO_3));
        NetApiBufferFree(pBuffer_Info);
        return pCurrent_Info.fi3_username;
    }

    NetApiBufferFree(pBuffer_Info);
    return defaultValue;  //default if not successfull above
}

private string GetUsernameHandlingFile(string filePath)
{
    int fileId = GetFileIdFromPath(filePath);
    return GetUsernameHandlingFile(fileId);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T04:42:26.863

这已经讨论过很多次了。我对同一个问题的回答：

您不能使用 FileSystemWatcher 异步执行此操作，但是您可以使用文件系统过滤器驱动程序同步执行此操作。驱动程序允许您获取执行操作的帐户的用户名。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-24T08:44:08.503

使用[dave4dl 发布的](http://vbcity.com/forums/p/133307/698930.aspx#698930)代码并更新声明 struct FILE_INFO_3 如下，您可以监视创建和更新文件操作的用户名（类似于 FileSharing Server 的 FileSystemWatcher 和 OpenFiles.exe 的功能的组合）

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
public struct FILE_INFO_3
{
    public int fi3_id;
    public int fi3_permission;
    public int fi3_num_locks;
    [MarshalAs(UnmanagedType.LPWStr)] 
    public string fi3_pathname;
    [MarshalAs(UnmanagedType.LPWStr)] 
    public string fi3_username;
} 
```

* * *

# python - python引用一个像函数一样的属性

> ID：11660236
> 
> 赞同：-1
> 
> 时间：2012-07-25T23:31:37.613
> 
> 标签：python, list, properties, reference, setter

如何在不单独引用它们的情况下以 Python 方式设置多个属性？下面是我的解决方案。

```
class Some_Class(object):

    def __init__(self):
        def init_property1(value): self.prop1 = value
        def init_property2(value): self.prop2 = value

        self.func_list = [init_property1, init_property2]

    @property
    def prop1(self):
        return 'hey im the first property'

    @prop1.setter
    def prop1(self, value):
        print value

    @property
    def prop2(self):
        return 'hey im the second property'

    @prop2.setter
    def prop2(self, value):
        print value

class Some_Other_Class(object):

    def __init__(self):

        myvalues = ['1 was set by a nested func','2 was set by a nested func']
        some_class= Some_Class()

        # now I simply set the properties without dealing with them individually
        # this assumes I know how they are ordered (in the list)
        # if necessary, I could use a map

        for idx, func in enumerate(some_class.func_list):
            func(myvalues[idx])

        some_class.prop1 = 'actually i want to change the first property later on'

if __name__ == '__main__':
    test = Some_Other_Class() 
```

当我有许多属性要使用用户定义的值进行初始化时，这变得很有必要。否则我的代码看起来就像一个单独设置每个属性的巨大列表（非常混乱）。

请注意，许多人在下面有很好的答案，我认为我已经找到了一个很好的解决方案。这是一个重新编辑，主要是为了清楚地说明问题。但是，如果有人有更好的方法，请分享！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:11:52.370

我……终于想我知道你想要做什么，而且你不需要按照你接近它的方式去做。让我试一试。

```
class someclass(object):

    def __init__(self):
        func_list = [self.setter1, self.setter2]
        value_list = [1, 2]
        #    These lines don't need to be this complicated.
        #    for ind in range(len(func_list)): 
        #        func_list[ind](value_list[ind])

        for idx, func in enumerate(func_list):
            func(value_list[idx])

        #  Or even better
        for idx, (func, val) in enumerate(zip(func_list, value_list)):
            func(val)

    def setter1(self, value): 
        self.a = value

    def setter2(self, value): 
        self.b = value 
```

值得指出的是 idx 变量和 enumerate 调用在第二种形式中是多余的，但我不确定你是否需要在其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T23:37:32.047

只需使用 @property 装饰器

```
>>> class A:
...    a=2
...    @property
...    def my_val(self,val=None):
...        if val == None:return self.a
...        self.a = val
...
>>> a=A()
>>> a.my_val
2
>>> a.my_val=7
>>> a.my_val
7 
```

像这样的东西？

如果您只想允许设置，则不要给它一个默认值

```
>>> class A:
...    a=2
...    @property
...    def my_val(self,val):
...        self.a = val
...
>>> a=A()
>>> a.my_val
<Exception>
>>> a.my_val=7
>>> a.a
7 
```

或者如果您只想允许检索，只需省略第二个参数

```
>>> class A:
...    a=2
...    @property
...    def my_val(self):
...        return self.a
...      
...
>>> a=A()
>>> a.my_val
2
>>> a.my_val=7
<Exception> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T23:35:46.847

如果你在对象字典中查找属性，你会得到属性描述符（如果有的话），类也是如此；例如

```
a = SomeClass()
descriptor = a.__dict__.get('descriptor', type(a).__dict__.get('descriptor')) 
```

假设这`descriptor`是一个描述符，它将具有以下方法：

```
['deleter', 'fdel', 'fget', 'fset', 'getter', 'setter'] 
```

注意`fget`和`fset`。

# streaming - 使用 mencoder 为 Google TV（Logitech revue）进行流式传输的视频编码的正确命令是什么

> ID：11660238
> 
> 赞同：0
> 
> 时间：2012-07-25T23:31:39.453
> 
> 标签：streaming, android-mediaplayer, google-tv, mencoder, mkv

我对 Streaming 很陌生，但我有一个 nodeJS 应用程序并流式传输我可以在浏览器中看到的视频。但是，它不适用于 Google TV 浏览器，因此我使用 VideoView 创建了一个简单的 Android 应用程序，并将 URL 设置为文件的 GET 请求位置。我似乎无法让它工作。我相信它没有正确编码，因为我可以让它与这个[url](https://stackoverflow.com/questions/8575048/having-error-message-sorry-this-video-cant-play-to-play-online-video-in-video)一起工作。

有人可以给我正确的论据来将高清 MKV 编码为 Google TV 可读格式吗？最好使用 mencoder 或 avconv，因为我在 linux PC 上。

[这](https://developers.google.com/tv/android/docs/gtv_media_formats)是 Google 支持的视频格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:58:01.647

这里有大量关于使用 Mencoder 的信息 (http://en.gentoo-wiki.com/wiki/Mencoder)。如果没有更多信息（例如要查看的媒体文件），很难诊断您的问题。我建议您尝试转码为 mp4 h264 格式，看看是否适合您。然后，您可以尝试应用不同的容器/格式组合，看看哪种方式最适合大小/性能。由于罗技已停止该评论，因此可能很难获得支持。

您可能要考虑的一件事是转向一些新一代硬件，例如刚刚开始预购的 Visio 的 CoStar (http://www.vizio.com/costar/overview/?utm_medium=display&utm_campaign =Co-Star&utm_content=Google) 只需 99 美元

Mkv 可能很棘手 - 如果您仍然遇到问题，请考虑使用不同的格式。希望有帮助。

# sql - 重置 Sql Server 2008 登录（无法使用管理工作室访问）

> ID：11660239
> 
> 赞同：1
> 
> 时间：2012-07-25T23:31:52.877
> 
> 标签：sql, sql-server-2008, ssms

我不久前在我的机器上设置了 Sql Server 2008。

我尝试与 Management Studio 连接并得到用户登录失败的错误。

自从我设置它以来已经很长时间了，我不记得凭据了。

如何重置凭据以使其正常工作，还是必须卸载并重新安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:29:23.843

使用 Windows 身份验证登录 SQL Server。

在对象资源管理器中，打开 Security 文件夹，打开 Logins 文件夹。右键单击 SA 帐户并转到属性。 **更改 SA 密码并确认。单击确定。**

通过使用 SA 登录名和新密码登录系统，重新启动 SQL Server 及其所有服务并测试新密码。

[说明链接](http://blog.sqlauthority.com/2007/12/29/sql-server-change-password-of-sa-login-using-management-studio/)

# python - Pygame - 太空侵略者外星人

> ID：11660243
> 
> 赞同：1
> 
> 时间：2012-07-25T23:33:02.113
> 
> 标签：python, pygame

目前我有一排外星人，现在我正试图让子弹从一个随机的外星人身上射出，一旦当前的子弹离开屏幕。

到目前为止，我有这个子弹： http: [//pastebin.com/fR0gzkh6](http://pastebin.com/fR0gzkh6)

它在起点从外星人射出一颗子弹并继续从那个 x 坐标射击，但是我怎样才能让它采用各种不同外星人的当前 x 坐标并从他们当前的 x 坐标射击。

这是外星人类：[http](http://pastebin.com/kRpthdh4) ://pastebin.com/kRpthdh4 这就是我为外星人创建一组精灵的方式：

```
for i in range(5):
    self.alien_sprites.add(Alien((i*100)+10, 0)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:41:23.740

跟踪外星人实例：

```
self.aliens = []
for i in range(5):
    alien = Alien((i*100)+10, 0)
    self.alien_sprites.add(alien)
    self.aliens.append(alien) 
```

现在随机选择一个来做某事：

```
import random
random_alien = random.choice(self.aliens)
# Now do what you like 
```

# session - Magento 客户无法登录

> ID：11660246
> 
> 赞同：4
> 
> 时间：2012-07-25T23:33:41.027
> 
> 标签：session, magento, cookies, login, session-cookies

我最近将我的 Magento 商店搬到了新服务器上，现在客户无法登录他们的帐户。

在登录页面上，当您输入正确的电子邮件和密码时，页面只是刷新，没有任何消息或任何内容。如果您输入了错误的密码，它将给您一条消息告诉您。这让我相信这是一个 cookie/会话问题（也许 cookie 会立即过期？）问题是我不知道如何修复它......

我已经清除了 var/cache 和 var/session 文件夹，以及我的浏览器缓存，但没有成功。任何提示或建议将不胜感激。

PS 我在 MageMojo.com 主机上运行 Magento 6.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:47:34.967

如果在迁移过程中站点的 URL 或域发生了变化，请检查系统配置中的“Cookie 域”设置。您可以在下面找到它`General > Web > Session Cookie Management`，它被称为“Cookie 域”。

如果此参数与您站点的实际域名不匹配，则会发生登录表单已提交、用户已登录和会话 cookie 问题。用户的浏览器随后被重定向到受保护的页面，但 cookie 并未随新请求一起发送，因此 Magento 认为用户尚未登录。

如果是 cookie 域问题，要查找的主要症状如下。用户提交登录表单，当表单再次显示时，没有消息表明用户登录失败。但是，如果他们输入了错误的用户名或密码，则会出现该消息。

通常 cookie 域可以留空，网站按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T20:57:25.860

The problem I had was Cookie Management set to 'Yes' try giving that a bash. Saved a lot of agro - this was for 1.9 Magento which already has all the login.phtml sorted - [https://magento.stackexchange.com/questions/35439/admin-login-problems-what-are-the-correct-settings-of-session-cookie-management/60187#60187](https://magento.stackexchange.com/questions/35439/admin-login-problems-what-are-the-correct-settings-of-session-cookie-management/60187#60187)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T23:40:34.917

不幸的是，自从我使用 Magento 以来已经有一段时间了，所以不记得当事情不工作时它会返回什么样的错误。要检查的一件事可能是相关的缓存和会话文件夹是否可由网络服务器写入，并且如果它们已更改，配置是否具有指向这些文件夹的正确路径。当您尝试登录时，也许看看这里是否写了任何东西。

# database - 使用 ContentFlow (coverflow) IllegalStateException 错误显示数据库图像

> ID：11660247
> 
> 赞同：1
> 
> 时间：2012-07-25T23:33:46.497
> 
> 标签：database, servlets, jpa, coverflow, illegalstateexception

我目前正在使用第三方图像覆盖流 (http://www.jacksasylum.eu/ContentFlow/) 来显示保存在数据库中的图像。为此，我正在使用 Java、JPA 和 Richfaces。我已经设置了一个图像 servlet 来处理图像显示。我设置了 Richfaces 数据表，我只想在封面流中显示选定记录的图像。此功能可以执行此操作。我有一个命令按钮来在 OutputPanel 中呈现图像覆盖流。在实施封面流之前，我的图像在页面下方正确显示，没有错误。所以，我知道我的底层功能可以按需要工作。问题是，当我按照指示通过在我的 img 标签周围放置特定的 div 标签来实现coverflow 时，我收到以下错误：

```
Error Rendering View[/index.xhtml]: java.lang.IllegalStateException: Cannot create a session after the response has been committed
at org.apache.catalina.connector.Request.doGetSession(Request.java:2636) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.connector.Request.getSession(Request.java:2375) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:841) [jbossweb-7.0.10.Final.jar:]
at com.sun.faces.context.ExternalContextImpl.getSession(ExternalContextImpl.java:155) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at javax.faces.context.ExternalContextWrapper.getSession(ExternalContextWrapper.java:396) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
at com.sun.faces.renderkit.ServerSideStateHelper.writeState(ServerSideStateHelper.java:175) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.10.Final.jar:]
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.0.Final.jar:7.1.0.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.10.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.10.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.10.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.10.Final.jar:]
at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_32] 
```

这是我的一些代码：

**ImgServlet.java**

```
 /**
   * Servlet implementation class ImgServlet
   */
    @WebServlet(name = "ImgServlet", urlPatterns = {"/ImgServlet/*"})
    public class ImgServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @Inject
    Screenshot model;
        @PersistenceUnit(unitName = "primary")
    private EntityManagerFactory emf; 

    public ImgServlet() {
        super();
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        PrintWriter writer = response.getWriter();
        ServletContext sc = getServletContext();

        String classString = "Screenshot";
        String idString = request.getParameter("id");

        if (classString == null || classString.isEmpty() || idString == null || idString.isEmpty()) {
            response.sendError(HttpServletResponse.SC_NOT_FOUND); // 404.
            return;
        }

        Long id = Long.parseLong(idString.trim());
        PhotoInterface entry = null;

        EntityManager em = null;

        try {
            em = emf.createEntityManager();
        } catch (Throwable e1) {
            e1.printStackTrace();
        } 

        try {
            entry = em.find(Screenshot.class, id);
        } catch (Exception ex) {
            //Log.log(ex.getMessage());
        }

        if (entry == null) {
            response.sendError(HttpServletResponse.SC_NOT_FOUND); // 404.
            return;
        }

        ServletOutputStream out = null;

        try {
            response.reset();

             // It works ok without setting any of these...
            //response.setContentType(image.getContentType());
            //response.setHeader("Content-Length", String.valueOf(image.getLength()));
            //response.setHeader("Content-Disposition", "inline; filename=\"" + image.getName() + "\"");
            response.setContentType("image/png");

            out = response.getOutputStream();

            if (entry.getPng() != null && entry.getPng().length != 0) {
                out.write(entry.getPng());
                getServletContext().log("Found png!!");
            }
            else 
                getServletContext().log("png is NULL!!!");
        } catch (IOException e) {
            getServletContext().log("Error finding png!!!");
        } finally {
            close(out);
        }

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

    private static void close(Closeable resource) {
        if (resource != null) {
            try {
                resource.close();
            } catch (IOException e) {
                // Do your thing with the exception. Print it, log it or mail it.
            }
        }
    }
} 
```

**contentflow_src.js** - 用于渲染封面流的 javascript，可以在以下位置查看示例

> [http://www.jacksasylum.eu/ContentFlow/download.php](http://www.jacksasylum.eu/ContentFlow/download.php)

**这目前适用于我的 xhtml（在 outputPanel 中没有 ContentFlow Div 标签）：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:p="http://primefaces.org/ui">  

    <ui:composition 
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:my="http://java.sun.com/jsf/composite/components"
                xmlns:s="http://jboss.com/products/seam/taglib"
                >
    <h:head>  
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <h:outputStylesheet name="screen.css" library="css"/> 
        <script language="JavaScript" type="text/javascript" src="contentflow_src.js" load="slideshow lightbox">
        </script>
    </h:head>  
    <h:body>
       <h:form id="form"> 
        <p:dataTable var="scrshot">
          ....................
          ....................
         </p:dataTable>

          <p:commandButton id="viewDetails" value="View Selected Screenshots" icon="ui-icon-search"  
                             update=":form:imgBlock"/> 

          <p:outputPanel id="imgBlock" layout="block"> 
             <a4j:repeat var="img" value="#{screenshotListProducer.selectedScreenshots}">
               <img src="ImgServlet?id=#{img.id}" title="#{img.time}"/>
             </a4j:repeat>
          </p:outputPanel>
         </h:form>                            
    </h:body> 
    </ui:composition> 
</html> 
```

**这在我的 xhtml 中不起作用（在通过使用 outputPanel 中的 Div 标签包装实现 ContentFlow 之后）并触发错误：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:p="http://primefaces.org/ui">  

    <ui:composition 
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:my="http://java.sun.com/jsf/composite/components"
                xmlns:s="http://jboss.com/products/seam/taglib"
                >
    <h:head>  
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <h:outputStylesheet name="screen.css" library="css"/> 
        <script language="JavaScript" type="text/javascript" src="contentflow_src.js" load="slideshow lightbox">
        </script>
    </h:head>  
    <h:body>
       <h:form id="form"> 
        <p:dataTable var="scrshot">
          ....................
          ....................
         </p:dataTable>

          <p:commandButton id="viewDetails" value="View Selected Screenshots" icon="ui-icon-search"  
                             update=":form:imgBlock"/> 

          <p:outputPanel id="imgBlock" layout="block"> 
           <div class="ContentFlow" id="ContentFlow">
            <div class="flow">
             <a4j:repeat var="img" value="#{screenshotListProducer.selectedScreenshots}">
              <div class="item">
               <img src="ImgServlet?id=#{img.id}" title="#{img.time}"/>
              </div>
             </a4j:repeat>
            </div>
           </div>
          </p:outputPanel>
         </h:form>                            
    </h:body> 
    </ui:composition> 
</html> 
```

对不起所有的代码。如果有人可以提供帮助，将不胜感激！几天来，我一直在兜圈子，试图让 ContentFlow 与我的会话配合得很好。

# ruby - queue.pop 上的死锁 - Ruby

> ID：11660253
> 
> 赞同：1
> 
> 时间：2012-07-25T23:34:17.553
> 
> 标签：ruby

这会导致：检测到死锁（致命）错误

```
require 'thread'

@queue = Queue.new
x = @queue.pop 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:44:33.297

来自[Queue#pop 的 Ruby 文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/thread/rdoc/Queue.html#method-i-pop)：

> 从队列中检索数据。如果队列为空，则调用线程被挂起，直到数据被推入队列。如果 non_block 为真，则线程不会挂起，并引发异常。

您在这里使用单个线程，因此您的队列从不包含任何对象，因此您的线程将永远挂起（死锁）。

试试这个

```
require "thread"

queue = Queue.new
thread1 = Thread.new do
  5.times do |i|
    x = queue.pop
    sleep rand(i) # simulate workload
    puts "taken #{x} from queue!"
  end
end

thread2 = Thread.new do
  5.times do |i|
    sleep rand(i) # simulate workload
    queue.push i
    puts "pushed #{i} to the queue!"
  end
end

thread1.join 
```

您现在有两个线程，因此您不会遇到死锁。当队列为空时，消费者线程将被挂起，但当第二个线程将某些内容推送到队列时，它将再次变为活动状态。

# npapi - 为什么我的简单测试 NPObject 不起作用？

> ID：11660254
> 
> 赞同：1
> 
> 时间：2012-07-25T23:34:19.867
> 
> 标签：npapi, browser-plugin, npruntime

我有这个 getValue 方法 + NPclass 方法：

```
static bool hasmethod(NPObject *npobj, NPIdentifier name)
{
    return true;
}
static NPObject* allocate (NPP npp, NPClass *aClass)
{
    return  browser-> createobject(npp, aClass);
}
static bool hasProperty(NPObject *npobj, NPIdentifier name)
{
     return true;
}
static bool getProperty (NPObject *npobj, NPIdentifier name, NPVariant *result)
{
   if (!result) 
       return false;
   INT32_TO_NPVARIANT(50, *result);
   return true;
}
static void deallocate (NPObject *npobj)
{
   browser -> memfree(npobj);
}
static bool enumerate(NPObject *npobj, NPIdentifier **value, uint32_t *count)
{
    return false;
}
static bool defaultInvoke(NPObject* obj, const NPVariant *args, uint32_t argCount,     NPVariant *result)
{
    if (!result) 
    return false;
    INT32_TO_NPVARIANT(42, *result);
    return true;
}
static bool setProperty (NPObject *npobj, NPIdentifier name, const NPVariant *value)
{
    return false;
}  
static void invalidate(NPObject *npobj)
{
}
static bool removeProperty (NPObject *npobj,NPIdentifier name)
{
    return false;
}
NPError NPP_GetValue(NPP instance, NPPVariable variable, void *value)
{
    if (! instance)
    {
        return NPERR_INVALID_INSTANCE_ERROR;
    }
struct NPClass class;
class.structVersion = NP_CLASS_STRUCT_VERSION;
class.construct = NULL;
class.deallocate = deallocate;
class.hasMethod = hasmethod;
class.getProperty= getProperty;
class.enumerate= enumerate;
class.removeProperty= removeProperty;
class.hasProperty = hasProperty;
class.invoke = pinvoke;
class.invokeDefault = defaultInvoke;
class.invalidate = invalidate;
class.setProperty = setProperty;
class.allocate = allocate;
if (variable == NPPVpluginScriptableNPObject)
{
    void **v = (void **)value;
    struct NPObject *object = NPN_CreateObject(instance, &class);
    NPN_RetainObject(object);
    *v = object;
    return NPERR_NO_ERROR;
}
return NPERR_GENERIC_ERROR;
} 
```

以下是该类指向的另外两个方法：

```
 bool hasmethod(NPObject *npobj, NPIdentifier name)
 {
     return true;
 }

static bool pinvoke(NPObject* obj, NPIdentifier methodName, const NPVariant *args, uint32_t argCount, NPVariant *result)
{
    if (!result) 
    return false;
    INT32_TO_NPVARIANT(32, *result);
    return true;
} 
```

基本上，我希望对象在调用任何内容时返回 32 以进行测试。

这是我的创建和保留方法：

```
NPObject *NPN_CreateObject(NPP npp, NPClass *aClass)
{
    return browser->createobject(npp, aClass);
}

NPObject *NPN_RetainObject(NPObject *npobj)
{
    return browser->retainobject(npobj);
} 
```

在我的 Javascript 中：

```
 <embed type="application/x-my-extension" id="pluginId">
            <script>
            var plugin = document.getElementById("pluginId");
            console.log(plugin.something); 
```

窗口在页面上绘制，但控制台输出未定义。帮助将不胜感激。谢谢！

更新：Georg 建议浏览器由于我的 allocate 方法的无限递归而崩溃。这是新的：

```
 void* NPN_MemAlloc(uint32_t size)
 {
     return browser->memalloc(size);
 }
 static NPObject* allocate (NPP npp, NPClass *aClass)
 {
   NPObject* object = (NPObject*)NPN_MemAlloc(sizeof(NPObject));
   if (!object)
   {
    return NULL;
   }
   memset(object, 0, sizeof(NPObject));
   return object;
 } 
```

该插件仍然崩溃。

更新 2：我使对象实例特定

```
typedef struct PluginInstance {
  NPP npp;
  NPWindow window;
  NPObject *object;
}PluginInstance; 
```

在我的 NPP_New 方法中，我有

```
 PluginInstance *newInstance = (PluginInstance*)malloc(sizeof(PluginInstance));
 bzero(newInstance, sizeof(PluginInstance));
 newInstance -> object = NPN_CreateObject(instance, &class);
 newInstance->npp = instance;
 instance->pdata = newInstance; 
```

在我的 getValue 方法中：

```
 NPObject* obj = ((PluginInstance *) (instance->pdata)) -> object;
    void **v = (void **)value;
    NPN_RetainObject(obj);
    *v = obj; 
```

还是一样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:19:09.540

您不应该只填写部分`NPClass`功能，最值得注意的是您缺少`hasProperty`& `getProperty`。浏览器可能会处理其他缺失的功能，但据我所知，它们不是必需的。

另请注意，您`NPP_GetValue()`应该只返回`variable == NPPVpluginScriptableNPObject`.
然后，您应该为每个插件实例创建可编写脚本的对象（请记住，您的插件的多个实例可以同时运行）并且`NPN_Release()`当您的插件消失时不要忘记可编写脚本的对象。
`pinvoke()`可以改进为：

```
static bool pinvoke(NPObject* obj, NPIdentifier methodName, const NPVariant *args, 
                    uint32_t argCount, NPVariant *result)
{
    if (!result) 
        return false;
    INT32_TO_NPVARIANT(32, *result);
    return true;
} 
```

# installation - Meteor 有计划支持 Gentoo 吗？

> ID：11660255
> 
> 赞同：2
> 
> 时间：2012-07-25T23:34:32.453
> 
> 标签：installation, meteor, gentoo

我使用 Gentoo 系统，是否会在某个时候提供对 Gentoo 的 Meteor 支持？我现在有办法在 Gentoo 上安装吗？

谢谢查克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:43:02.947

**Meteor 是否会在某个时候提供对 Gentoo 的支持？**

Meteor 现在可以在 Portage 中使用，目前的关键字是不稳定的。

**我现在有办法在 Gentoo 上安装吗？**

是的，您可以执行以下命令来安装它：

```
echo "www-servers/meteor" >> /etc/portage/package.accept_keywords
emerge --sync 
emerge -av www-servers/meteor 
```

**[请在bugs.gentoo.org 提交](https://bugs.gentoo.org)**您遇到的任何问题。有关 Gentoo 或 Portage 的一般帮助，您可以尝试 FreeNode 网络上的 IRC 频道 #gentoo 或他们的论坛。

* * *

我建议您每次需要搜索“gentoo”覆盖中尚不可用的包时使用**[Zugaina 。](http://gpo.zugaina.org/)**在我写这篇文章时，Zugaina 返回["meteor" 的结果](http://gpo.zugaina.org/Search?search=meteor)。如果没有，您可以搜索**[bugs.gentoo.org](https://bugs.gentoo.org)**以查找用户贡献的 ebuild，如下[所示](https://bugs.gentoo.org/buglist.cgi?quicksearch=meteor)。

如果您需要进行新的 ebuild/package 请求，请访问[bugs.gentoo.org](https://bugs.gentoo.org/enter_bug.cgi?product=Gentoo%20Linux)，选择“ebuild”组件，提供有关您请求的软件包的一些信息（名称，网站，...）并点击提交。

# php - 在文本区域中输入文本

> ID：11660258
> 
> 赞同：-1
> 
> 时间：2012-07-25T23:34:59.660
> 
> 标签：php, html

我有一个表格：

```
function show_welcome()
{
        print_r($_REQUEST);
        global $error_flag , $date_error_flag;      

        $first_name = isset($_REQUEST['Fname']) ? $_REQUEST['Fname'] : "";
        $last_name = isset($_REQUEST["Lname"]) ? $_REQUEST["Lname"] : "";
        $phone = isset($_REQUEST["Phone"]) ? $_REQUEST["Phone"] : "";
        $height = isset($_REQUEST["Height"]) ? $_REQUEST["Height"] : "";
        $birthday = isset($_REQUEST["Bday"]) ? $_REQUEST["Bday"] : "";
        $sex = isset($_REQUEST["Sex"]) ? $_REQUEST["Sex"] : "";
        $history = isset($_REQUEST["Hx"]) ? $_REQUEST["Hx"] : "";
        $age = isset($_REQUEST["Age"]) ? $_REQUEST["Age"] : "";
?>                
        <form method='post' action=""  > 
    <center> 
            First Name: <input type='text' name='Fname' maxlength = '10' value = <?php echo $first_name ?> ></input>
            Last  Name: <input type='text' name='Lname' maxlength = '20' size = '25' value = <?php echo $last_name ?> ></input><br /> 

   </center>
   <div id="I1">Ten Characters</div>  <div id="I2"> Twenty Characters</div><br /><br /> 
    <center>        
        Phone: <input type="text" name="Phone" value = <?php echo $phone ?> ></input>
        Height: <input type="text" name="Height" value = <?php echo $height ?> ></input><br ></center>
        <div id="I3">XXX-XXX-XXXX</div>  <div id= "I4">  Inches</div><br /><br />
        <center>Birthday: <input type='text' name='Bday'  value = <?php echo $birthday  ?> ></input><br />  

<?php   
        printf(" \t\t\t\t YYYY-MM-DD   \n\n"); 
?>  
        <p ><input type="radio" name="Sex" value = <?php echo $sex ?> value = "0"/>Male
        <input type="radio" name="Sex" value = <?php echo $sex ?> value = "1"/>Female  </p >
        Hx: <br /> 
        <textarea style="overflow: scroll" cols="60" rows="10" wrap="hard" name="Hx" value = <?php echo $history ?>   ></textarea> <p />
        <input type="text" hidden="true" name="Age" ></input>
        <br /><br /><input type="submit" />
        <br /><br /><input type = "reset" value="Clear Form"/></center>
        <input type=hidden name='welcome_already_seen'   value='already_seen'>
        </form>
<?php       

} 
```

该表格由用户填写，然后检查有效格式。无效格式会触发错误消息，并且脚本会返回表单。我希望显示所有输入的数据，以便用户可以更轻松地进行更正。除历史记录 (Hx) 外，所有内容都重新输入到表单中。

$_REQUEST 包含历史：

数组 ( [Fname] => 44444444 [Lname] => Jones [电话] => 123-123-4656 [身高] => 62 [生日] => 1989-03-05 [性别] => 0 [Hx] = > 好 pt [年龄] => [welcome_already_seen] => already_seen)

作为一个附带问题，我如何确保在重新输入数据时重新检查正确的单选按钮。

请提供建议和帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:36:09.473

a 的内容`<textarea>`放置在开始和结束标记内 - a 没有`value`属性`<textarea>`。

```
<textarea style="overflow: scroll" cols="60" rows="10" wrap="hard" name="Hx"><?php echo $history ?></textarea> 
```

您还应该小心，因为`$history`可能包含的 HTML 会使您的网站面临安全漏洞。

默认情况下，单选按钮需要该``checked="checked"`属性才能被选中。您可以这样实现：

```
<input type="radio" name="Sex" value="1" <?php echo ($sex == 1 ) ? 'checked="checked" : ''; ?> /> 
```

# objective-c - 将自定义元数据应用于文件

> ID：11660262
> 
> 赞同：4
> 
> 时间：2012-07-25T23:35:23.923
> 
> 标签：objective-c, file, metadata, customization, spotlight

我一直在想办法给文件自定义元数据。这方面的一个例子是给文件标签，但这不是我想要应用的唯一类型的自定义元数据。我看过一些像这样的帖子 -[将自定义元数据添加到 jpeg 文件](https://stackoverflow.com/questions/10699494/adding-custom-metadata-to-jpeg-files)，[我可以将自定义元数据添加到文件吗？](https://stackoverflow.com/questions/11266687/can-i-add-custom-metadata-to-files),[将自定义元数据设置为任何类型的文件](https://stackoverflow.com/questions/9876956/set-custom-metadata-to-files-of-any-type)- 但它们都处理除 Objective-C 之外的语言，这是我试图用于自定义元数据的语言。我查看了 Apple 的文档，例如[File Metadata Attributes Reference](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/MetadataAttributesRef/MetadataAttrRef.html)和[NSMetadataItem Class Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMetadataItem_Class/Reference/Reference.html#//apple_ref/occ/cl/NSMetadataItem)，但我没有找到任何与自定义元数据相关的内容。

我的问题基本上是，是否可以将自定义元数据应用于文件，如果可以，我将如何去做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:57:48.313

自定义元数据可以由自定义 MDImporter 创建。这是 Spotlight 的插件，允许操作系统查看/扫描/搜索自定义文档。因此，您的元数据最终会出现在聚光灯搜索索引中。但是，您的聚光灯导入器插件必须以某种方式从文件本身中提取元数据。

您还可以将元数据存储在文件的资源分支中，这是 MacOS 9 和更旧的处理关联数据的方式。这仅适用于 HFS+ 格式的卷，并且会在 NFS 等其他文件系统下创建两个文件。同样简单的 unix 工具，例如 cat FILE1 > FILE2 只会复制数据部分并可能破坏目的。我不会推荐这个。

或者您可以对文件使用所谓的扩展属性，例如，查找器会记住您从哪里下载特定文件的方式，因此它可以询问您是否真的想在第一次启动时执行下载。（参见 getxattr(2)、listxattr(2)、removexattr(2) 和 setxattr(2) 或

从命令行：“xattr”或“ls -l@” 从 C：getxattr()、listxattr()、removexattr() 和 setxattr()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-10T15:28:06.150

我想为 iOS 做同样的事情。

xattr 库看起来正是适合这项工作的工具。谢谢你的提示。虽然它是基于 c 的，但我将使用它来创建一个支持自定义元数据的 objc iOS 文件对象类。xattr 在后台使用 void*，因此我的自定义元数据字典可以支持非常灵活的 NSString 键和 NSCoding 值。

这应该是一个很好的实用程序。在我的脑海中，存储 MIME 类型、校验和或已保存文件的相关下载 URL 可能很有用。更一般地说，我可以使用文件对象类来实现文件元数据以外的实用程序 - 例如，在创建文件的同时自动在其路径中创建任何必要的文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-14T23:31:21.390

这篇文章包括用于读取和写入扩展文件属性的 Swift 代码：

[编写扩展文件属性快速示例](https://stackoverflow.com/questions/38343186/write-extend-file-attributes-swift-example)

# java - 语句 S 立即包含语句 U 是什么意思？

> ID：11660272
> 
> 赞同：3
> 
> 时间：2012-07-25T23:36:19.610
> 
> 标签：java

来自[Java 语言规范，第 14 章，块和语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html)：

> 程序的执行顺序是由语句控制的，这些语句是为了执行它们的效果而执行的，并且没有值。
> 
> 一些语句包含其他语句作为其结构的一部分；此类其他陈述是该陈述的子陈述。如果不存在不同于 S 和 U 的语句 T 使得 S 包含 T 并且 T 包含 U，则我们说语句 S 立即包含语句 U。以同样的方式，某些语句包含表达式作为其结构的一部分。

如果没有不同于 S 和 U 的语句 T 使得 S 包含 T 并且 T 包含 U，那么语句 S 立即包含语句 U 是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T00:05:14.333

> 一些语句包含其他语句作为其结构的一部分；此类其他陈述是该陈述的子陈述。

[JLS #14.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.5)将语句定义为：

> 陈述：
> 
> *   StatementWithoutTrailing 子语句
> *   标签声明
> *   IfThen 语句
> *   IfThenElse 语句
> *   While 语句
> *   声明

因此，唯一可以有子语句（= 可以包含其他语句）的语句是标签、if、else、while 和 for。

然后含义变得更加清晰 - 例如，如果将 S、T 和 U 定义为：

```
if(a == b) //S
    if(c == d) //T
        doSomething(); //U 
```

语句 S 立即包含语句 T，而语句 T 立即包含语句 U。但 S 不立即包含 U。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:40:04.870

考虑以下复合语句为 S：

```
(a+b)+c 
```

令 U 为 S 中的语句`(a+b)`。那么 S 立即包含语句 U。这是因为在 S 中不存在非平凡语句 T 使得 T 包含 U。

但是，如果我们有类似的东西

```
S: (a+(b+c))+d 
```

然后我们可以让 T 为`(a+(b+c))`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T23:41:15.853

例如：

```
if (...) { // A
  doSomething();  // B

  if (...) {  // C
    doSomethingElse(); // D
  }
} 
```

标有字母的行是语句。语句 A 包含语句 B、C 和 D，并且仅**立即**包含 B 和 C。语句 C 立即包含语句 D。

# android - 为什么android log cat没有在LOGV（“....”）中显示调试语句；

> ID：11660276
> 
> 赞同：1
> 
> 时间：2012-07-25T23:36:41.723
> 
> 标签：android

在框架/基础本机 C++ 代码中，我看到带有日志语句的代码，例如

```
 LOGV("....."); 
```

但是当我在电话上使用'adb logcat'时，为什么我没有看到那些日志语句。不过，我看到了 LOGD("....)。

我需要做些什么才能看到'LOGV（...）'吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T12:19:19.340

Android 不输出本机 (C/C++) 代码的详细级别日志。如果您想要这些日志进行调试，您可以在本机代码中将 LOGV 重新定义为 LOGD。

例如。#define LOGV LOGD 在您需要从中记录日志的任何源文件的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:40:55.807

尝试

```
adb logcat *:V 
```

[Android ABD 过滤日志输出](http://developer.android.com/tools/debugging/debugging-log.html "资源")

> 以下过滤器表达式显示所有标签上优先级为“警告”或更高的所有日志消息：
> 
> adb logcat *:W

# sql - 将一个表的内容复制到另一个表中

> ID：11660278
> 
> 赞同：0
> 
> 时间：2012-07-25T23:36:54.003
> 
> 标签：sql, merge

在 MSSQL
中，我有两个表，结构相同。
表 A 是产品
表 B 是 products_update。

在某一天，我得到一个预定义格式的新产品 xls。我删除 products_update 表并使用 SQL 选择 products_update。

在 products 表中，我想创建新记录并修改现有记录，同时保留旧记录。

有（目前）50列..（很少重叠，所以规范化不合逻辑）

是否有一些简单的 SQL 来完成此操作。我看到了 MERGE 示例，但我必须映射到字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:43:45.867

不是 100% 确定这个问题，要创建现有表的副本，创建新表 (table_b)，然后运行：

```
INSERT INTO table_b SELECT * FROM table_a 
```

# javascript - 在Gridview中获取文本框的客户端ID

> ID：11660288
> 
> 赞同：1
> 
> 时间：2012-07-25T23:38:11.060
> 
> 标签：javascript, asp.net, gridview

为了使用 `txtbox = document.getElementById()`外部 javascript 文件中的函数，我将每个控件的 clientID 分配给我使用的变量。

例如，我说：

`var lbCancelID = '<%= lbCancel.ClientId %>';`

然后，当我在使用 document.getElementById() 的外部 javascript 文件中调用函数时，它可以对返回元素 (txtbox) 执行任何操作。

这工作得很好，直到我到达需要在 gridviews 编辑模板中获得控件的区域。然后，它告诉我该元素不存在。

所以我尝试了这个： `var txtStartDateID = '<%#((GridViewRow)Container).FindControl("txtStartDate").ClientID %>'`

但是得到一个错误`'GridViewRow' is a type and cannot be used as an expression.`我能做些什么呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:19:43.103

我认为您在标记中使用的方法不起作用。在您后面的代码中，您可以获得文本框的客户端 ID

```
TextBox t = (TextBox) gridView.Rows[0].FindControl("TextBoxID"); // Give the index of the row. and gridview in your gridview ID 
```

您可以从选定的索引事件中获取索引。如果您在 rowdatabound 事件中使用上述代码，那么您可以通过 e.Row 等获取行索引。

# c - 在汇编 x86 中遍历二维数组

> ID：11660291
> 
> 赞同：0
> 
> 时间：2012-07-25T23:38:35.080
> 
> 标签：c, assembly, x86

> **可能重复：**
> [x86 转换为小写程序集](https://stackoverflow.com/questions/11656464/x86-convert-to-lower-case-assembly)

在我的问题中，我有一个二维字符数组，我需要将所有内容都更改为小写。

```
char list[100][20] = {{"ArtUro"}, {"Bryan"}, {"chris"}, {"David"}, {"Jon"}, {"Mark"}, {"shane"}, {"SIMON"}, {"Thomas"}, {"TONY"}}; 
```

我有

```
int b_search (char list[100][20], int count, char* token)
{
__asm
{   
mov eax, 0          ; zero out the result
mov esi, list       ; move the list pointer to ESI
mov ebx, count      ; move the count into EBX
mov edi, token      ; move the token to search for into EDI 
MOV ecx, 0

LOWERCASE_ARRAY:        ;for(ecx = 0, ecx<ebx; ecx++), loops through each name
    CMP ecx, ebx
    JGE GET_OUT
    INC ecx             ;ecx++
    MOV edx, 0;         ;edx = 0

LOWERCASE_STRING:       ;while next char != 0, loop through each byte to convert to lower case
    OR [esi+edx],20h    ;change to lower case
    INC edx
    CMP [esi+edx],0     ;if [esi+edx] not zero, loop again
    JNZ LOWERCASE_STRING
    JMP LOWERCASE_ARRAY ;jump back to start case change of next name

GET_OUT: 
```

我成功地将 ArtUro 转换为小写，但我无法弄清楚如何将数组遍历到 Bryan 的地址，因为我无法按 20 进行缩放，而添加 20 会导致我`ESI`到另一个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:55:24.973

```
 LEA esi, [esi+20] 
```

我把它放在第二个循环的两个跳转指令之间。感谢那些阅读我的问题的人。

# c# - LINQ 选择新的 KeyValuePair >

> ID：11660297
> 
> 赞同：3
> 
> 时间：2012-07-25T23:39:02.523
> 
> 标签：c#, linq, entity-framework

我有一个这样的 LINQ 查询：通过实体框架导航属性链接的两个列表（两个实体都有多对多关系）

我想转换这个：

```
var query = (from a in listA 
             from b in a.ListB
             select new {T1=a, T2=b} 
```

对于这样的事情：

```
var query = (from a in listA
             from b in a.ListB
             select new KeyValuePair<T1,List<T2>>{ T1=a , T2=b}) 
```

第一个查询产生一个像这样的项目列表：{(a,x), (a,y), (a,z), (b,x) ...}

第二个查询的目的是将结果合并到具有自己列表的项目中。

结果如下所示：

{(a,List with items x,y,z), (b, List with item x) ...}

我会很感激帮助。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T00:17:07.603

编辑：感谢 Stijn 纠正我的答案。

看起来`a`已经包含相关`b`项目的列表，所以这不起作用吗？

```
var query = (from a in listA
             select new{ T1 = a, T2 = a.ListB }); 
```

您还可以将查询转换为字典：

```
var asDictionary = query.ToDictionary(item => item.T1, item => item.T2); 
```

# iphone - 如何将 iPhone 应用程序从 Xcode 4.3.1 部署到具有 IOS 5.0.1 越狱的真实 iPhone 设备

> ID：11660298
> 
> 赞同：-2
> 
> 时间：2012-07-25T23:39:06.113
> 
> 标签：iphone, ios, xcode, ios5, xcode4.3

> **可能重复：**
> [在没有开发人员程序的设备上安装 iOS 应用程序，iOS 5.1](https://stackoverflow.com/questions/10494398/install-ios-apps-on-device-without-developer-program-ios-5-1)

我希望能够在 Xcode 中创建项目并在模拟器上运行应用程序。本质上，我想在获得证书*之前*开发应用程序，但最终以 App Store 为目标。考完就拿证，中途退出也不会浪费钱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:43:17.120

没有付费开发者帐户，您无法部署到设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:57:30.577

我不建议这样做，但是**可以**将您的应用程序部署到设备上**，而无需**为越狱手机上的开发人员帐户付费。这个（[可以越狱的 iphone 用于开发](https://stackoverflow.com/questions/995262/can-jailbroken-iphone-used-for-development)）问题有很多关于如何部署应用程序的信息。这个（[在没有开发人员程序的设备上安装 iOS 应用程序，iOS 5.1](https://stackoverflow.com/questions/10494398/install-ios-apps-on-device-without-developer-program-ios-5-1)）问题对您想要做什么有很好的分步说明。这是第二个链接中的说明示例：

> 1.  创建名为“iPhone Developer”的自签名证书
> 2.  重新打开 Xcode 项目构建设置中的“代码签名身份” - 以使用您的自签名证书“​​iPhone 开发人员”
> 3.  按照说明更改 info.plist 的出现
> 4.  下载ldid，使其可执行
> 5.  创建 python 脚本，将其粘贴在 /usr/bin 中，相应地更改 python 脚本引用
> 6.  更改 iPhoneCodeSign.xcspec 以使用 ldid3.py
> 7.  通过 ssh 触摸在设备上创建 tdmtanf 文件
> 8.  不要将 -gta 标志放在“其他代码签名标志”中

希望这可以帮助！

# java - 图形对象被绘制两次

> ID：11660304
> 
> 赞同：0
> 
> 时间：2012-07-25T23:40:00.043
> 
> 标签：java

这是每 5 秒生成和绘制一个四氨基图形的代码。然而，这个数字被淹没了两次，因此扭曲了原始画面。

这里 tetramino 图形由 10x10 像素块组成。构造函数图形告诉块的位置和颜色。方法paint(Graphics g) 逐块绘制图f。

```
import java.applet.*;

import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Rectangle2D;

import javax.swing.Timer;
public class Tetris extends Applet  {

    Dimension size;
    int x1,y1;
    private int xs=0,ys=0;

    public int getXs() {
        return xs;
    }
    public void setXs(int xs) {
        this.xs = xs;
    }
    public int getYs() {
        return ys;
    }
    public void setYs(int ys) {
        this.ys = ys;
    }
    public void rotate(){

    }
    public Figure generate(){
        Figure i = new Figure(new int[][]{new int[]{1},new int[]{1},new int[]{1},new int[]{1}},Color.CYAN);
        Figure j = new Figure(new int[][]{new int[]{1,0,0}, new int[]{1,1,1}},Color.BLUE);
        Figure l = new Figure(new int[][]{new int[]{0,0,1}, new int[]{1,1,1}},Color.ORANGE);
        Figure o = new Figure(new int[][]{new int[]{1,1}, new int[]{1,1}},Color.YELLOW);
        Figure s = new Figure(new int[][]{new int[]{0,1,1}, new int[]{1,1,0}},Color.GREEN);
        Figure t = new Figure(new int[][]{new int[]{1,1,1}, new int[]{0,1,0}},Color.PINK);
        Figure z = new Figure(new int[][]{new int[]{1,1,0}, new int[]{0,1,1}},Color.RED);

        Figure[] genSet = {i,j,l,o,s,t,z};
        int index =((int) (Math.random() * 7)) ;
        //System.out.println(index);
        return  genSet[index];
    }
    public void drop(){

    }
    public void shift(){

    }
    public void movecheck(){

    }
    public void actiondelay(){
        ActionListener actionlistener = new ActionListener() {
            public void actionPerformed(ActionEvent actionevent){
                repaint();
            }

        };
        Timer timer = new Timer(5000,actionlistener);
        timer.start();
    }
    public void init(){
        setSize(200,400);
        setBackground(Color.black);
        size = getSize();

    }

    public void paint(Graphics g){

        super.paint(g);
        System.out.println("________________");
        Graphics2D g2d = (Graphics2D) g.create();
        Figure f = generate();
        int length = f.getX()[0].length;
        for(int j =0; j<f.getX().length;j++){
            System.out.println();
            ys = 0;                 
            for(int i=0;i<length;i++){                      

                if (f.getX()[j][i] == 1){
                    Rectangle2D p = new Rectangle2D.Double(xs,xs,xs+10,ys+10);
                    g2d.setColor(f.getY());
                    g2d.draw(p);
                    //g2d.drawRect(p.x, p.y, p.width, p.height);    
                    //g2d.fillRect(p.x, p.y, p.width, p.height);                    
                    //System.out.println("widnth: " +p.width + " | height: " + p.height + " end ");
                    System.out.print("*");
                }
                else System.out.print(" ");
                ys+=10;             
            }
            xs+=10;
        }
        xs=0;
        ys=0;
        actiondelay();                      
       //g.setColor(Color.white);
       //g.drawRect(45, 95, 55, 105);        
    }

}

import java.awt.Color;

public class Figure{
    int[][] x;
    Color y;
    public Figure(int[][] x , Color y){
        this.x=x;
        this.y=y;
    }
    public int[][] getX() {
        return x;
    }
    public void setX(int[][] x) {
        this.x = x;
    }
    public Color getY() {
        return y;
    }
    public void setY(Color y) {
        this.y = y;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:47:42.313

`g2d.dispose()`我认为你在你的方法中错过了一个调用`paint()`。我不确定这是否能解决问题，但尝试一下不会有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:14:25.087

您的图像不是因为图形被绘制了两次而扭曲，而是因为您几乎没有错误`new Rectangle2D.Double(xs,xs,xs+10,ys+10);`

1.  在开始`x`和`y`位置你使用`xs`了两次而不是`xs`and`ys`
2.  您的`width`and`hight`不是固定值，而是与`xs`and相关`ys`

此外，您的循环正在增加`xs`，而不是`ys`当您进入新行时。

尝试用以下方法替换您的`paint()`方法：

```
public void paint(Graphics g){

    super.paint(g);
    System.out.println("________________");
    Graphics2D g2d = (Graphics2D) g.create();
    Figure f = generate();
    int length = f.getX()[0].length;
    for(int j =0; j<f.getX().length; j++){
        System.out.println();

        for(int i=0; i<f.getX()[0].length; i++){                      

            if (f.getX()[j][i] == 1){
                Rectangle2D p = new Rectangle2D.Double(xs, ys, 10, 10);
                g2d.setColor(f.getY());
                g2d.draw(p);
                //g2d.drawRect(p.x, p.y, p.width, p.height);    
                //g2d.fillRect(p.x, p.y, p.width, p.height);                    
                //System.out.println("widnth: " +p.width + " | height: " + p.height + " end ");
                System.out.print("*");
            }
            else System.out.print(" ");
            xs+=10;
        }
        xs = 0;
        ys+=10;             
    }
    xs=0;
    ys=0;
    actiondelay();                      
   //g.setColor(Color.white);
   //g.drawRect(45, 95, 55, 105);        
} 
```

* * *

也是`javax.swing.Timer(int delay, ActionListener listener)`循环线程的类型，因此如果您想在`delay`. 在你的地方，我会将代码`actiondelay`从`init`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T00:20:48.580

问题在于你如何使用你的`Timer`. 我不知道您为什么坚持在每个“绘制”周期创建一个新计时器。

您无法控制绘制周期，Java 可以。所以基本上，发生的事情是每次绘制组件时（可能是`Timer`事件之间的多次），您正在创建一个新的`Timer`，每 5 秒**重复一次。**这意味着你正在运行***n 个***计时器，这会给你带来很多有趣的东西......

相反，创建一个计时器：

```
@Override
public void start() {

    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {

            timer = new Timer(5000, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {

                    repaint();

                }
            });

            timer.setInitialDelay(5000);
            timer.setCoalesce(true);
            timer.start(); // Repeats by default...

        }
    });

} 
```

不要改变绘画方法中的任何东西。只是不要你可能会触发更多的绘制请求，这最终会使 EDT 过载并在短时间内将你的 CPU 运行到 100%。

# facebook - Facebook 没有向 Canvas 应用发送 HTTP 引用？

> ID：11660317
> 
> 赞同：0
> 
> 时间：2012-07-25T23:41:24.950
> 
> 标签：facebook, iframe, facebook-canvas

这个让我难住了。我正在设置我的应用程序的开发版本，由于某种原因，iframe 没有收到 HTTP 引用标头。

我正在使用的应用程序依赖于发送的标头。你能想到 iframe 没有收到它的任何原因吗？

该应用程序（无推荐人）： [http ://apps.facebook.com/colinlocaltms](http://apps.facebook.com/colinlocaltms)

指向 Canvas URL 的链接（以 StackOverflow 作为引荐来源 - 因为您单击该链接而预期）： [http ://secret-lake-4762.herokuapp.com/](http://secret-lake-4762.herokuapp.com/)

# magento - 如何将脚本和 CSS 挂钩？

> ID：11660318
> 
> 赞同：5
> 
> 时间：2012-07-25T23:41:27.337
> 
> 标签：magento, magento-layout-xml

我正在制作的模块的事情是它会生成一个 javascript 片段，所以我不能使用一个动作将其挂接到 HTML 部分，因为该动作要求我有一个 JS 文件（如果我是，请纠正我错误的）。我有哪些方法可以将 JavaScript 片段放入标签中？我正在考虑使用一个块，但我不确定应该在之后附加什么块，我必须考虑这将适用于所有主题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T17:59:09.417

股票头模板是

```
template/page/html/head.phtml 
```

在您自己的主题中复制该文件将是获得一些 javascript 的最简单方法。

虽然更好（从开发人员的角度来看），此模板包含以下行

```
<?php echo $this->getChildHtml() ?> 
```

about 链接打印出块的所有子块。因此，将子块添加到 head 块也可以。

```
<layouts>
    <default> <!-- does this to all pages — use specific layout handles to target a page -->
        <reference name="head"> <!-- get a reference to the existing head block -->
            <block type="core/text" name="simple_example_javascript_block"> <!-- append a simple text block, probably better to use a new template block -->
                <action method="setText"> <!-- set our new block's text -->
                    <text><![CDATA[
                    <script type="text/javascript">
                        alert("foo");
                    </script>
                    //]]></text>
                </action>
            </block>
        </reference>
    </default>
</layouts> 
```

上面的 XML 使用一个简单的`core/text`块将 javascript 添加到每个 Magento 页面。从`local.xml`工作，应该在其他地方工作。我肯定会想到更好的方法来做到这一点（例如，模板块）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:06:08.870

Alan Storm 的解决方案有效，但您可能希望将脚本或 html 数据包含在模板文件中，以使其与 XML 分开。

```
<?xml version="1.0"?>
<layouts>
    <default>
        <reference name="before_head_end">
            <block type="page/html_head" output="toHtml" name="some_name" template="some_name/head.phtml" />
        </reference>
    </default>
</layouts> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-10T14:32:28.027

好的，这是一个令人尴尬的黑客，但正如 Alan Storm 指出的那样，这在 adminhtml 中不起作用，所以，本着试图将我的代码/文件保持在最低限度的精神，我已经破解了 magento，这对我有用，哈哈

```
$layout = Mage::app()->getLayout();
$headBlock = $layout->getBlock('head');

$headBlock->addLinkRel('blank', '" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">jQuery.noConflict();</script>
<link rel="blank" href="'); 
```

# mysql - Rails 3 - 存储浮点数的问题

> ID：11660323
> 
> 赞同：0
> 
> 时间：2012-07-25T23:41:37.207
> 
> 标签：mysql, ruby, ruby-on-rails-3, floating-point, migration

我正在创建一个 3D 地图，并且我有每个点的 x、y 和 z 值，我从中获取数据的当前数据库具有如下值：

```
x = -8.851079259998058e16
y = 4.236944396687888e16
z = -4.451352534647966e16 
```

我试图像这样进行数据库迁移：

```
class CreateMapPoints < ActiveRecord::Migration
  def change
    create_table :map_points do |t|
      t.float :x
      t.float :y
      t.float :z
      t.timestamps
    end
  end
end 
```

但是，当我将数据导入这个新表并在 中运行以下命令时`rails console`，我得到了奇怪的结果：

```
1.9.2-p290 :002 > MapPoint.first
  MapPoint Load (0.6ms)  SELECT `map_points`.* FROM `map_points` LIMIT 1
 => #<MapPoint id: 1, x: -88510800000000000.0, y: 42369400000000000.0, z: -44513500000000000.0, created_at: nil, updated_at: nil> 
```

x、y 和 z 缺少第一个数字后的点。有人可以建议我在这里做错了什么吗？任何帮助，将不胜感激。

谢谢

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:55:52.050

从您的问题中不清楚实际问题是什么。您说这些值“在第一个数字之后丢失了点”。但是，显示的值与输入值大致相同。它们只是表示方式不同。点是显示格式的特征，而不是数字的特征。例如，“1/2”、“.5”和“5e-1”是相同值的不同表示。一个有“/”，一个有一个“.”，一个有一个“e”这一事实并没有使它们成为不同的数字。

-8.851079259998058e16 与 -88510800000000000.0 大致相同。（末尾的“e16”表示乘以 10 ^(16)。）但是，在第六位有效数字之后是不同的。因此，存在这种差异是否真实以及是否存在问题的问题。

通过这种差异是否真实，我的意思是我想知道字符串“-88510800000000000.0”是否完全显示了计算机中的实际值。可能是在格式化输出时，只显示了前六位有效数字。在某些软件中，默认输出格式可能只显示几个有效数字，并且可以通过对格式设置进行一些修改来显示更多数字。您还可以使用指数格式指定显示，因为您已经显示了输入值。这将涉及您正在使用的特定软件，对此我无法提供进一步的建议。

如果值实际上发生了变化，而不仅仅是它的显示，那么您可能需要使用更精确的类型，例如双精度二进制浮点类型或扩展或任意精度十进制类型。同样，替代类型的可用性涉及您正在使用的特定软件，我无法提供进一步的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:47:04.820

您可能需要在迁移中设置精度，如果浮点数不起作用，请尝试十进制：

```
t.decimal :x, :precision => 15
t.decimal :y, :precision => 15
t.decimal :z, :precision => 15 
```

# entity-framework - 如何找出网页加载缓慢的原因？

> ID：11660333
> 
> 赞同：1
> 
> 时间：2012-07-25T23:43:25.660
> 
> 标签：entity-framework, web, performance

我想主页是好的。每次加载大约需要 1 秒。（我正在使用 YSlow 插件） [http://pocomaru.cloudapp.net/](http://pocomaru.cloudapp.net/)

但是，如果我转到指定类别，例如： [http](http://pocomaru.cloudapp.net/category/45/iphone-4-4s-cases) : //pocomaru.cloudapp.net/category/45/iphone-4-4s-cases 仍然需要 1.7-2s 才能加载。

我期待一个非常快的负载，最多为 1 秒。该页面仅包含一个主要的 sql 调用：get products 属于一个类别，并且该类别中只有 18 个产品。

我知道增加页面加载时间的正常技术，如延迟加载图片等，但我的问题是初始页面加载时间太长。

我不确定是什么原因。数据库是 sql azure web 版本。任何人都可以对此有所了解吗？我正在使用.net EF。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:42:18.173

看起来这是一个服务器端的问题。

我会得到一个分析器（某些版本的 Visual Studio[内置了](http://msdn.microsoft.com/en-us/magazine/cc337887.aspx)这个）并首先在您的开发机器上运行它 - 这是了解您的应用程序性能特征的最快方法。通常，通过此过程将显示出许多提高应用程序性能的机会。

如果您的应用程序在您的开发机器上运行良好，但在 Azure 上运行缓慢，则您必须深入研究基础架构问题。首先[收集性能计数器](http://msdn.microsoft.com/en-us/library/windowsazure/hh411542.aspx)- 通常显示正在发生的事情（生产中缺少的索引是经典的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:48:55.743

表有多大，您用于过滤的字段是否有索引？看起来当页面完全冷（一段时间内没有人访问）时，它可能需要长达 20 秒：[http ://www.webpagetest.org/result/120726_5R_108A/](http://www.webpagetest.org/result/120726_5R_108A/)

New Relic 与 Azure 达成协议，您可以免费获得他们的“标准”产品 - [http://newrelic.com/azure](http://newrelic.com/azure)。那应该能够很快告诉你时间在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:21:30.327

我认为这个页面可以让您了解原因是什么以及您可以采取哪些措施使其变得更好：

[https://developers.google.com/speed/pagespeed/insights](https://developers.google.com/speed/pagespeed/insights)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:19:42.427

您可以进行相当多的前端性能改进，但最终如果您想要低于 1 秒的加载时间，您需要整理后端。

HTML 的请求和响应之间的差距约为 1.5 秒，因此您需要分析服务器上发生的情况。

# google-maps - 如何在 Trigger 上可靠地显示原生谷歌地图？

> ID：11660334
> 
> 赞同：0
> 
> 时间：2012-07-25T23:43:29.483
> 
> 标签：google-maps, trigger.io

如何在 Trigger 中可靠地显示原生谷歌地图？

*这是背景：*

我正在使用主干在 Trigger.io 上显示 Google 地图，在此处复制 Trigger 博客上的格式：http: [//trigger.io/cross-platform-application-development-blog/2012/05/15/how-to-构建基于位置的混合移动应用程序与反向地理编码/](http://trigger.io/cross-platform-application-development-blog/2012/05/15/how-to-build-a-location-based-hybrid-mobile-app-with-reverse-geocoding/)

现在，在我朋友的手机上，这些地图显示为原生地图。在我的手机上，地图显示为 javascript 嵌入地图（它们具有缩放缩放功能，并且速度明显较慢）。

两部手机都运行 Android，虽然他运行的是 v4，而我的是 2.3.x。

我错过了什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:23:54.513

When you're using Trigger.io with Google Maps, you are not using 'native maps' at all so I'm not sure exactly what you mean here. If your phone is at the older Android version then I would expect it to be a lot slower.

Maybe you could provide screenshots to demonstrate the differences you're seeing other than performance?

# sql - 获取此查询的平均值

> ID：11660337
> 
> 赞同：1
> 
> 时间：2012-07-25T23:43:56.610
> 
> 标签：sql, tsql

假设我有一个包含以下列的表格： `EmployeeID, PayEntity, HourWorked, Date`我`PayEntity can be 1:Normal, 2:OverTime, etc`如何才能获得一段时间内的平均工作时间，例如，如果我们的表格上有这些数据：

```
1, 1, 40, 7/25/12
1, 2, 5, 7/25/12
2, 1, 30, 7/25/12 
```

该日期的平均值必须为`(40+5)+30/2 -- 37.5`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:47:22.930

尝试使用一个子选择，您可以在其中找到每个员工每天的总小时数，以及一个外部选择，您可以在其中计算每天的平均值：

```
SELECT Date, AVG(HourWorked) AS HourWorked
FROM 
(
    SELECT Date, SUM(HourWorked) AS HourWorked
    FROM yourtable
    GROUP BY EmployeeId, Date
) T1
GROUP BY Date 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!3/be733/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:56:51.273

沿着同样的思路，但不知道有一个 AVG 功能

```
SELECT employee_id, total_hours, days, total_hours/days as average, 
FROM (
    SELECT employee_id, SUM(hours) as total_hours, COUNT(date) as days FROM `employee_hours_table` GROUP BY `employee_id`
) data 
```

# javascript - 看到 JavaScript 正在创建的线程了吗？

> ID：11660342
> 
> 赞同：1
> 
> 时间：2012-07-25T23:44:21.987
> 
> 标签：javascript, jquery

有没有办法查看 JavaScript 正在创建的“线程”？例如，如果我有一个附加到 DOM 元素的事件处理程序，我假设 JavaScript 会隐式地创建一个新线程来在后台运行该代码？如果是这样，有没有办法（例如通过 Firebug、WebKit 检查器等）查看 JavaScript 已打开的不同“线程”？（如果 JavaScript 使用的不是线程，那么事件处理程序如何在“幕后”工作？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T23:45:41.887

JavaScript 不创建线程。底层浏览器可能在其自己的线程环境中处理事件，然后让您的 JavaScript 解释器运行处理程序，但 JavaScript 中没有线程访问，并且浏览器的工作方式是特定于实现的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T23:45:05.493

JavaScript 不创建新线程，它在浏览器中运行。你无法真正看到这些信息。您可以使用探查器，但我不确定是否能回答您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T23:47:57.377

使用这个工具，看看它是否达到了你想要的效果：[Visual Event](http://www.sprymedia.co.uk/article/Visual+Event)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T23:55:39.583

JavaScript 是“单线程”的，所有执行都是线性的（尽管我们不知道底层引擎是如何工作的）。

异步操作是基于事件的（DOM 事件、Ajax 调用、WebWorkers），因此它们的处理程序的执行被附加到调度程序队列中——它们只会在当前执行完成时执行。这就是为什么无法从外部停止无限循环的原因——它们只会冻结浏览器（并最终引发`long-running script`异常）。

超时（[W3`Timer`规范](http://www.w3.org/TR/html5/webappapis.html#timers)）也是如此，它们在活动计时器列表中添加了一个任务。您可以在Web-App API的[处理模型规范](http://www.w3.org/TR/html5/webappapis.html#processing-model-1)中阅读有关此类任务队列的更多信息。

# visual-studio-2010 - 安装 QT Visual Studio 插件

> ID：11660346
> 
> 赞同：0
> 
> 时间：2012-07-25T23:44:47.207
> 
> 标签：visual-studio-2010, qt

我正在尝试按照本指南将 QT 插件安装到 VS 2010 中： http: [//thomasstockx.blogspot.ca/2011/03/qt-472-in-visual-studio-2010.html](http://thomasstockx.blogspot.ca/2011/03/qt-472-in-visual-studio-2010.html)

当我到达第 11 步并尝试执行命令后：

```
configure -debug-and-release -opensource -shared -no-qt3support -qt-sql-sqlite -phonon -phonon-backend -no-webkit -no-script -platform win32-msvc2010 
```

我收到以下错误：

```
'configure' is not recognized as an internal or external command,
operable program or batch file. 
```

我使用的是 VS 命令提示符窗口，而不是常规的命令提示符窗口。有人可以建议我可能做错了什么吗？

目前，我在 VS 中看到了加载项。但是，当我单击 Qt-> Launch Designer 时，我收到以下错误消息：

```
No default QT version found. Please check your QT Visual Studio Add-in settings. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:43:45.903

`configure.exe`是 Qt 源代码树根目录中的一个可执行文件（作为 QTDIR）。在您尝试执行此命令之前，请确保您的工作路径是 QTDIR。如果您解决了 QTDIR，请为 command 提供正确的前缀路径`configure`。这是影子构建，需要 perl。

# couchdb - 使用多个键从 curl 调用 CouchDB 时出错

> ID：11660349
> 
> 赞同：1
> 
> 时间：2012-07-25T23:45:00.727
> 
> 标签：couchdb

当我尝试使用 curl 进行 Couchdb 查询时，出现此错误：

> curl：（3）[globbing] pos 100 范围规范中的非法字符

我的查询如下所示：

```
curl -X GET http://localhost:5984/db/_design/records/_view/query?key=\[\"abc.com\",\"215.211.211.211\"\] 
```

我的视图功能是：

```
function(doc) {
    emit([doc.domain, doc.ip])
} 
```

可能是什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:50:43.630

您需要对查询参数进行 url 编码，`%22`等等`"`。

# java - Java 的 Exceldna 等效项

> ID：11660352
> 
> 赞同：2
> 
> 时间：2012-07-25T23:45:09.047
> 
> 标签：java, excel-dna

ExcelDNA 是 C# 开发人员的绝佳资源 - Java 有类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:04:40.417

我认为最接近的是[XLL4J——Java 的 Excel 插件框架](http://xll4j.sourceforge.net/)，但仍然是 Alpha。

> XLL4J 是用于在 Java 中开发 Microsoft Excel 插件 (XLL) 的框架。它提供了一种用Java实现Excel函数的机制，具有以下特点：
> 
> *   通过 INI 文件轻松管理 Java VM（请参阅下表了解详细信息）。
> *   两个 API；一个低级和一个基于反射的，以便于实现。
> *   内置 CSV 插件，用于从文件系统或网络访问 CSV。

当然还有链接项目[XLLoop – Java、Javascript、Ruby、Python、Erlang 中的 Excel 用户定义函数](http://xlloop.sourceforge.net/)。

> XLLoop 是一个开源框架，用于在集中式服务器（函数服务器）上实现 Excel 用户定义函数 (UDF)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T06:43:28.900

您可以考虑使用[IKVM Java 运行时](http://www.ikvm.net/)在 CLR 上运行您的 Java 代码。这将允许您使用[Excel-DNA](http://exceldna.codeplex.com)进行 Excel 集成。我自己没有尝试过，但几年前的[讨论](https://groups.google.com/group/exceldna/browse_frm/thread/7763a8d215970a26)表明它工作正常。如果您遇到任何问题，我也很乐意提供帮助。

# c# - 将数据集列值与字符串数组值进行比较 C#

> ID：11660356
> 
> 赞同：1
> 
> 时间：2012-07-25T23:45:42.333
> 
> 标签：c#, dataset

我正在尝试创建一个程序来扫描我们的公司分发点，并将使用我从 SCCM 导出的包数据。
我目前有一个作为数据源连接到 Visual Studio 的 SQL 数据集，还有一个通过目录运行并填充列表视图的字符串数组。

数据集包含 3 个表，我要使用的表称为 PackageDB_Query：

此表中的列是：

*   包裹名字
*   制造商
*   描述
*   版本
*   语
*   PackageID（这是服务器上文件夹的名称（例如 FMC00015A）

我会将目录名称与数据集中的 PackageID 进行比较并返回包名称。

这是我用来用文件夹名称填充列表视图的函数：

```
`public void FolderScan()
    {
        try
        {
            string[] dirs = Directory.GetDirectories("\\" + _serverName + "\\" + _commonShareName, "FMC*");
            folderCntBox.Text = dirs.Length.ToString();
            foreach (string dir in dirs)
            {
                listBox1.Items.Add(dir);
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(Resources.MainForm_FolderScan_The_process_failed___0_, ex);
        }
    }` 
```

我已根据以下建议对代码进行了编辑，但仍然无法正常工作！这是我的功能：

```
'private void FolderScanTest()
    {
        try
        {
            var ds = new PackageDBDataSet();
            var dt = ds.Tables["PackageDB_Query"];

            string[] dirs = Directory.GetDirectories(@"\\PLYMMIMS001\SMSPKGD$", "FMC*");
            folderCntBox.Text = dirs.Length.ToString(CultureInfo.InvariantCulture);
            foreach (string dir in dirs)
            {
                DataRow dr = dt.Rows.Cast<DataRow>().Single(row => row["PackageID"] == dir);
                var packageName = dr["PackageName"] as string;
                listBox1.Items.Add(packageName);
            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(Resources.MainForm_FolderScan_The_process_failed___0_ + ":" + ex, "Error");
        }
    }' 
```

它说序列不包含匹配元素！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:20:05.267

应该是这样的：

```
using System.Linq;
...

DataSet ds = GetDataSet();
DataTable dt = ds.Tables["PackageDB_Query"];
DataRow dr = dt.Rows.Cast<DataRow>().Single(row => row["PackageID"] == dir);

string packageName = dr["PackageName"]; 
```

# list - 从 2007 年访问报告中的值列表中选择一个值

> ID：11660360
> 
> 赞同：0
> 
> 时间：2012-07-25T23:46:37.780
> 
> 标签：list, ms-access, ms-access-2007

我有一个表，其中包含一个名为“number”的字段，该字段由 0 到 6 之间的值列表填充。

然后我有一个查询，在其中搜索每个“数字”上的记录数。

在查询中它有效，我得到每个“数字”的记录数，例如： - 0 的 10 例 - 1 的 5 例 - ....

但是当我基于该查询创建报告时，它会显示“数字”字段中的值列表，并突出显示有问题的值......

我只想在每一行显示突出显示的数字，而不是整个值列表...

我怎样才能做到这一点？

# php - PHP 在算术中使用字符串

> ID：11660364
> 
> 赞同：1
> 
> 时间：2012-07-25T23:46:59.293
> 
> 标签：php, string, math

我有一个变量被用于 PHP 函数中的一些算术（主要是乘法/除法）的情况。变量实际上是从另一个函数传递给函数的。但是，传递的可能是数值，也可能是字符串值。

所以基本上我有：

```
 $inverse = 1/$number; 
```

where`$number`可以是一个有效的数字，也可以是一个字符串。

我的问题是什么时候`$number`是字符串？php如何处理这种情况？

最终答案并不重要。我可以想出几种不同的方法来解决这种情况。只是它出现了，我很好奇，快速的谷歌搜索无法回答我的问题。即使我不需要知道答案，我也想知道答案，因为了解 PHP 是如何工作的将对我将来有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:48:05.237

当变量在数值上下文中使用时， PHP 将执行类型强制（也称为[type-juggling](http://php.net/manual/en/language.types.type-juggling.php)）并尝试将当它是字符串时的值解释为数字。

请参阅除法运算符[的文档：](http://php.net/manual/en/language.operators.arithmetic.php)

> 除法运算符（“/”）返回一个浮点值，除非两个操作数是整数（或转换为整数的字符串）并且数字是可整除的，在这种情况下将返回一个整数值。

同样相关的是，[字符串转换为数字](http://php.net/manual/en/language.types.string.php#language.types.string.conversion)：

> 在数字上下文中评估字符串时，结果值和类型确定如下。
> 
> ……
> 
> 该值由字符串的初始部分给出。如果字符串以有效的数字数据开头，这将是使用的值。否则，该值将为 0（零）。有效的数字数据是一个可选的符号，后跟一个或多个数字（可选地包含一个小数点），后跟一个可选的指数。指数是一个“e”或“E”，后跟一个或多个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:48:18.143

PHP 默默地将字符串转换为浮点数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T23:50:42.617

它将接受字符串并分析它的算术值：例如`"1bottle"`will become `1`. 一般规则是字符串第一部分中的每个数字字符都转换为浮点数。所以`12.3bottle`= `12.3`, `.3alonin`= 0.3 等等。如果没有第一个数字字符，则该值为 0。

这称为[类型杂耍](http://php.net/manual/en/language.types.type-juggling.php)。

# c++ - movl多数据指令与汇编优化对比

> ID：11660366
> 
> 赞同：1
> 
> 时间：2012-07-25T23:47:05.027
> 
> 标签：c++, visual-studio, assembly, llvm, disassembly

考虑一个简单的循环：

```
for(int i=0;i<32;i++) 
    a[i] = i; 
```

LLVM 反汇编程序显示以下程序集：

```
.LBB0_1:                                # =>This Inner Loop Header: Depth=1
movl    %eax, (%esp,%eax,4)
addl    $1, %eax
adcl    $0, %ecx
cmpl    $32, %eax
jne .LBB0_1
# BB#2:
xorl    %eax, %eax
addl    $140, %esp
ret 
```

**问题1：**谁能解释一下`movl %eax, (%esp,%eax,4)`指令？

此外，Visual Studio 反汇编程序输出以下程序集：

```
 ;for(int i=0;i<32;i++)
00F290B5  mov         dword ptr [ebp-94h],0  
00F290BF  jmp         main+60h (0F290D0h)  
00F290C1  mov         eax,dword ptr [ebp-94h]  
00F290C7  add         eax,1  
00F290CA  mov         dword ptr [ebp-94h],eax  
00F290D0  cmp         dword ptr [ebp-94h],20h  
00F290D7  jge         main+7Eh (0F290EEh)  
        ;a[i] = i;
00F290D9  mov         eax,dword ptr [ebp-94h]  
00F290DF  mov         ecx,dword ptr [ebp-94h]  
00F290E5  mov         dword ptr a[eax*4],ecx  
00F290EC  jmp         main+51h (0F290C1h)  
    ;return 0;
00F290EE  xor         eax,eax 
```

显然 LLVM 的输出更加优化。

**问题 2：** Visual Studio 中有没有像 LLVM 那样优化代码的选项？

**更新：**

将解决方案配置设置为发布 & 优化为完全优化 (/Ox) 后的结果：

```
;   int a[32] = {0};
;   for(int i=0;i<32;i++)
 0039128B  xor         eax,eax  
 0039128D  lea         ecx,[a]  
 00391293  movd        xmm0,eax  
 00391297  pshufd      xmm0,xmm0,0  
 0039129C  paddd       xmm0,xmm1  
 003912A0  add         eax,4  
;   {
;       a[i] = i;
 003912A3  movdqu      xmmword ptr [ecx],xmm0  
 003912A7  lea         ecx,[ecx+10h]  
 003912AA  cmp         eax,20h  
 003912AD  jl          main+23h (0391293h)  
;   }
;   return 0;
; };
 003912AF  mov         ecx,dword ptr [ebp-4]  
 003912B2  xor         ecx,ebp  
 003912B4  xor         eax,eax  
 003912B6  call        __security_check_cookie (03916FDh)  
 003912BB  mov         esp,ebp  
 003912BD  pop         ebp  
 003912BE  ret 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T00:09:16.630

`movl %eax, (%esp,%eax,4)`只是一个间接的内存存储。

它存储`%eax`到内存位置：`%esp + %eax * 4`. 在这种情况下：

*   `%esp`是数组`a`。
*   `%eax`是索引`i`。
*   `4`是 的大小`int`。

* * *

对于第二个问题，Visual Studio 输出的代码看起来像是在没有优化的情况下完成的。有很多过多的内存负载和存储。

例如：`dword ptr [ebp-94h]`似乎是索引`i`变量。但是如果没有优化，它就永远不会被提升为寄存器。

启用优化，你会看到它会产生更健全的代码。

# objective-c - 扩展 NSMutableArray 以像 Java 数组一样工作

> ID：11660367
> 
> 赞同：0
> 
> 时间：2012-07-25T23:47:09.783
> 
> 标签：objective-c, arrays, nsmutablearray

我正在为 iphone 开发一款 rpg 类型的游戏。我想要做的是拥有一个仅允许您持有特定数量的特定类型物品的库存。我认为要做到这一点，我只是要扩展 NSMutableArray 并为其添加限制。我想不出最好的方法来做到这一点。这是我脑海中的想法......

**背包.h**

```
@interface Backpack : NSMutableArray {
  Class * arrayClass;
  NSMutableArray * array;
  int limit;
}

-(id) initWithClass:(Class) type andLimit:(int) num;

@end 
```

**背包.m**

```
@implementation Backpack

  -(id)initWithClass:(Class) type andLimit:(int) num {

    arrayClass = type;
    limit = num;
    array = [NSMutableArray new];
    return self;

  }

  -(void)insertObject:(id) object atIndex:(int) index {

    if([object isKindOfClass:arrayClass] && index < limit) {
      // Insert it
    } else {
      // Throw Exception
    }

  }

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T00:30:45.897

与其扩展 NSMutableArray，不如创建您自己的类，该类使用 NSMutableArray 的实例来保存项目。您的类可以有一个或多个方法，这些方法要求添加的项目属于某个类类型（或实现特定接口）。至于限制项目的数量，在您的 addItem 方法中，首先检查所持有的项目数量。如果它大于您的限制，则不允许添加该项目。最后，您的类可以公开一个 size 方法（例如 getSize()），它告诉您在 NSMutableArray 的实例内部已经保存了多少项目，这样您可以防止在背包“满”时添加项目。

一般来说，组合（即从其他类的成员实例组合您自己的类）比扩展类和使用继承来完成相同的行为要好。例如，如果您扩展 NSMutableArray，则生成的类将公开该类的所有公共方法，除了您的方法之外，从代码重用和文档的角度来看，这会导致类混乱。

最后，您的问题实际上与 Java 无关，所以也许这不应该用 Java 标记来标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:45:41.993

您想要施加的限制实际上并不需要类扩展，如果有任何使使用混淆和难以编写的东西。

只需保持简单，并将一些与库存相关的方法添加到自定义 Player 类之类的东西中，您可能希望在制作 RPG 的过程中设计某个地方。

```
@interface Player : NSObject {
  NSMutableArray * inventory;
  NSUInteger inventoryLimit;
  //other centralized player data like stats, spells, or whatever
}
-(BOOL)addItemToInventory:(YourItemClass *)item;
@end

@implementation 
//... other impl stuff, like init
-(BOOL)addItemToInventory:(YourItemClass *)item {
  if([inventory count] < inventoryLimit) {
    [inventory addObject:item];
    return TRUE;
  }
  else {
    return FALSE;
  }
}
@end 
```

请注意，我对“玩家”课程的建议并不是硬性要求。您可以通过多种方式为游戏构建类和数据...

# sql - t-SQL 中 CTE 子句后的条件 INSERT

> ID：11660368
> 
> 赞同：1
> 
> 时间：2012-07-25T23:47:19.840
> 
> 标签：sql, sql-server, tsql, insert, common-table-expression

我很好奇为什么我似乎无法让条件语句遵循 t-SQL 语句中的公用表表达式？

像这样的东西：

```
WITH ctx AS(...)
IF ctx.v BEGIN
INSERT INTO ...
END 
```

我在[这里做了一个样品小提琴](http://sqlfiddle.com/#!3/8f656/28)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:15:26.570

公共表表达式基本上只是一个可以在多个 SQL 语句中重用的子查询。因此，无论如何，您都需要从中进行选择；你不能像变量一样引用它。把它想象成一个临时表。

您应该能够通过将您的条件添加为 where 子句来实现您想要的。

```
WITH ctx AS(
   SELECT MIN(t1.dtIn) AS mdIn, MAX(t1.dtOut) AS mdOut FROM tbl t1
      INNER JOIN tbl t2
      ON t1.Type = t2.Type
        AND t1.dtIn < t2.dtOut 
        AND t1.dtOut > t2.dtIn
      WHERE t1.type = 1
)

INSERT INTO tbl (id, dtIn, dtOut, type)
SELECT 10, 
       CASE WHEN mdOut IS NOT NULL AND 
                 mdOut > '0:30' AND
                 '0:40' >= mdOut THEN mdOut
       ELSE '0:30' END,
       CASE WHEN mdIn IS NOT NULL AND
                 mdIn < '0:40' AND
                 '0:30' >= mdIn THEN mdIn
       ELSE '0:40' END,
1
FROM ctx
where ctx.mdIn < '0:40' AND ctx.mdOut > '0:30'

select * from tbl 
```

# c++ - 在 Windows API 中检查文件大小的规范方法？

> ID：11660370
> 
> 赞同：2
> 
> 时间：2012-07-25T23:47:23.467
> 
> 标签：c++, c, windows

有没有一种规范的方法来检查 Windows 中文件的大小？谷歌搜索给我带来了[FindFirstFile 和](http://blogs.msdn.com/b/oldnewthing/archive/2011/12/26/10251026.aspx)GetFileSizeEx[但](http://www.flamingspork.com/blog/2008/02/11/getting-a-file-size-on-windows/)没有明确的赢家。并且必须总是调用 GetLastError 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:53:00.713

如果您只想要尺寸，那`GetFileSizeEx`是明显的赢家。是的，`FindFirstFile`也可以完成这项工作，但它确实是为了其他目的，除非你需要做其他事情，否则它的使用可能会误导或混淆读者。

# xamarin.ios - Monotouch“滑动删除”提交编辑样式未触发

> ID：11660373
> 
> 赞同：1
> 
> 时间：2012-07-25T23:47:33.633
> 
> 标签：xamarin.ios

我正在尝试在 uitableview 中实现“滑动删除”功能。我关注了其他教程/论坛和扩展的 UITableViewSource。在该类中，我重写了以下方法：

```
public override void CommitEditingStyle(UITableView tableView, UITableViewCellEditingStyle editingStyle, NSIndexPath indexPath)
{
   if (editingStyle == UITableViewCellEditingStyle.Delete)
   {
       tableItems.RemoveAt(indexPath.Row);
       tableView.DeleteRows(new [] { indexPath }, UITableViewRowAnimation.Fade);
   }
}

public override UITableViewCellEditingStyle EditingStyleForRow(UITableView tableView, NSIndexPath indexPath)
{
    return UITableViewCellEditingStyle.Delete;
}

public override bool CanEditRow(UITableView tableView, NSIndexPath indexPath)
{
    return true;
} 
```

我相信这些是我应该需要的唯一方法。但是，当我执行滑动手势时，会调用 CanEditRow 和 EditingStyleForRow 方法，但永远不会调用 CommitEditingStyle。任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:31:19.250

我在回答我自己的问题。事实证明我的列表视图比它的容器大，所以删除按钮只是隐藏在屏幕外。面掌。

sblom 了解哪些事件会被触发，这对我有很大帮助。好资料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:53:04.630

据我所知，你*只*需要`override` `CommitEditingStyle`为了完成这项工作。只要您在滑动其中一行时看到删除按钮出现，您就有一个非常强烈的迹象表明所有棘手的部分都在工作。如果您在滑动时没有看到删除按钮，我们应该集中精力找出它为什么是擅离职守。

从技术上讲，`CanEditRow`is on the `UITableViewDataSource`protocol 和`EditingStyleForRow`is on `UITableViewDelegate`，所以如果这两个确实被调用，我们可以排除诸如你`UITableViewSource`只被分配到`DataSource`或`Delegate`而不是被分配到组合`Source`属性的问题。

# c# - C# 中具有不同颜色的多个突出显示/选择

> ID：11660383
> 
> 赞同：0
> 
> 时间：2012-07-25T23:48:44.987
> 
> 标签：c#, visual-studio-2012

我正在寻找一种在 C# 中同时突出显示单词和句子的方法。我正在尝试完成的一个示例如下所示。

![从 MS Word 创建](../Images/3394da93ac2fa5c58451405c1a7cbda1.png)

我正在使用 Windows 窗体，但如果需要，我可以移植到 WPF。

我一直在尝试使用富文本框来完成此操作，但我似乎无法找到一种方法来做我想做的事。有什么东西可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:54:20.193

[找到](http://msdn.microsoft.com/en-us/library/hfcsf75k.aspx)句子的开头，设置[SelectionBackColor](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionbackcolor.aspx)，然后从上一次调用的偏移量中找到您要[查找的单词并再次设置](http://msdn.microsoft.com/en-us/library/9be0980x.aspx)[SelectionBackColor](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionbackcolor.aspx)。`Find()`

# c# - 从对象属性创建动态单选按钮列表

> ID：11660386
> 
> 赞同：0
> 
> 时间：2012-07-25T23:49:12.870
> 
> 标签：c#, asp.net, dynamic, properties, radiobuttonlist

我有一个多项选择题的对象列表。我需要使用对象属性创建一个 RadioButtonList：Choice_A、Choice_B、... Choice_D。

```
var qs = (from questions in dc.Survey_Questions
                  where questions.Survey_ID == surveyid                     
                  select new SQuestions
                  {
                      QuestionID = questions.Question_ID,
                      SurveyID = questions.Survey_ID,                         
                      Description = questions.Description,
                      Choice_A = questions.Choice_A,
                      Choice_B = questions.Choice_B,
                      Choice_C = questions.Choice_C,
                      Choice_D = questions.Choice_D,
                    }).ToList();
DataList dtQuestion.DataSource = qs; 
```

HTML结构：

```
<asp:DataList ID="dtQuestion" runat="server" RepeatDirection="Vertical" >`
    <ItemTemplate>
        <%# Eval("Description") %> `          
    <ItemTemplate> 
    <RadioButtonList></RadiobuttonList>
    </ItemTemplate>

    </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:38:37.810

好的，尝试建模 SQuestion 以匹配以下内容：

```
public class SQuestion
{
    int QuestionId = 0; //int? change to whatever
    int SurveyId = 0; //same as above
    string Description = string.Empty;
    List<string> Choices = new List<string>(); //notice this is a list
} 
```

所以现在您可以将选项绑定到下拉列表。我建议使用 onDataBinding 方法或 onDataBound （其中之一，我不确定），然后您可以将内部选择下拉列表与当前 question.Choices 绑定。那应该行得通。

希望这有助于为您指明正确的方向。

# sql-server - 查询以查找应该是外键的可能列？

> ID：11660387
> 
> 赞同：2
> 
> 时间：2012-07-25T23:49:13.683
> 
> 标签：sql-server, tsql, foreign-keys, relational-database, primary-key

我正在寻找一个查询来帮助清理一个没有很多关系的旧数据库。我不需要它是完美的，只是为了帮助指导我开始清理并开始强制执行数据完整性。

我假设所有表都具有正确的主键，并且尚未相关的表中的列具有相同的名称。

从理论上讲，我可以拥有三个表，其中一个具有复合键（我不会选择这样设计数据库，但在清理它时受到限制，并且这些类型的复合/主/外键很常见）：

Case.CaseId (PK)
Workstep.WorkstepId (PK)
Workstep.CaseId (PK,FK)
WorkQueue.CaseId （与 Ca​​se.CaseId 无关，但应该是）

我想做的是运行一个查询并得出结果，这些结果给我一些类似表名、列名和不相关但应该是的表的外键，例如：

表名、列名，应与主键
WorkQueue、CaseId、Case.CaseId 相关

请参阅下面我使用的 SQL，但它返回任何主键，即使是既是主键又是外键一部分的主键。再次使用我的示例和下面的 SQL，而不是返回 1 行，我得到 2：

表名，列名，应该与主键
WorkQueue、CaseId、Workstep.CaseId 相关（我不想要这一行，因为它也与“真实”主键 Case.CaseId 相关）
WorkQueue、CaseId、Case。案例ID

```
 SELECT 
    SubqueryAllPotentialForeignKeys.TABLE_NAME
    ,SubqueryAllPotentialForeignKeys.COLUMN_NAME
    ,(PrimaryKeys.TABLE_NAME + '.' + PrimaryKeys.COLUMN_NAME) as 'Possible Primary Key'

--all potential foreign keys (column name matches another column name but there is no reference from this column anywhere else)
FROM
    (   
    SELECT
        INFORMATION_SCHEMA.COLUMNS.TABLE_NAME
        ,INFORMATION_SCHEMA.COLUMNS.COLUMN_NAME
    FROM
        INFORMATION_SCHEMA.COLUMNS
    WHERE
        --only get columns that are in multiple tables
        INFORMATION_SCHEMA.COLUMNS.COLUMN_NAME IN 
        (
            SELECT COLUMN_NAME FROM
                (SELECT COLUMN_NAME, COUNT(COLUMN_NAME) AS ColNameCount FROM INFORMATION_SCHEMA.COLUMNS GROUP BY COLUMN_NAME) AS SubQueryColumns
            WHERE ColNameCount > 1
        )

        --only get the table.column if not part of a foreign or primary key
        EXCEPT
        (
            SELECT TABLE_NAME, COLUMN_NAME  FROM INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE 
        )

    ) AS SubqueryAllPotentialForeignKeys

LEFT JOIN INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE AS PrimaryKeys ON 
    SubqueryAllPotentialForeignKeys.COLUMN_NAME = PrimaryKeys.COLUMN_NAME

--when finding possible keys for our columns that don't have references, limit to primary keys
WHERE 
    PrimaryKeys.CONSTRAINT_NAME LIKE '%PK_%'

ORDER BY TABLE_NAME, COLUMN_NAME 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:05:02.840

这可能不是世界上最美丽的东西，但效果很好：

```
 SELECT * FROM
(
    SELECT 
        SubqueryAllPotentialForeignKeys.TABLE_NAME
        ,SubqueryAllPotentialForeignKeys.COLUMN_NAME
        ,(PrimaryKeys.TABLE_NAME + '.' + PrimaryKeys.COLUMN_NAME) as 'Possible Primary Key'

    --all potential foreign keys (column name matches another column name but there is no reference from this column anywhere else)
    FROM
        (   
        SELECT
            INFORMATION_SCHEMA.COLUMNS.TABLE_NAME
            ,INFORMATION_SCHEMA.COLUMNS.COLUMN_NAME
        FROM
            INFORMATION_SCHEMA.COLUMNS
        WHERE
            --only get columns that are in multiple tables
            INFORMATION_SCHEMA.COLUMNS.COLUMN_NAME IN 
            (
                SELECT COLUMN_NAME FROM
                    (SELECT COLUMN_NAME, COUNT(COLUMN_NAME) AS ColNameCount FROM INFORMATION_SCHEMA.COLUMNS GROUP BY COLUMN_NAME) AS SubQueryColumns
                WHERE ColNameCount > 1
            )

            --only get the table.column if not part of a foreign or primary key
            EXCEPT
            (
                SELECT TABLE_NAME, COLUMN_NAME  FROM INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE 
            ) 

        ) AS SubqueryAllPotentialForeignKeys

    LEFT JOIN INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE AS PrimaryKeys ON 
        SubqueryAllPotentialForeignKeys.COLUMN_NAME = PrimaryKeys.COLUMN_NAME

    --when finding possible keys for our columns that don't have references, limit to primary keys
    WHERE 
        PrimaryKeys.CONSTRAINT_NAME LIKE '%PK_%'
) AS Subquery

--exclude all keys that are primary but also foreign
WHERE [Possible Primary Key] NOT IN
    (
        SELECT (TABLE_NAME + '.' + COLUMN_NAME)
        FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE
        WHERE CONSTRAINT_NAME LIKE 'FK_%'
    ) 

ORDER BY TABLE_NAME, COLUMN_NAME 
```

# json - C# 转换 JSON 结果

> ID：11660391
> 
> 赞同：0
> 
> 时间：2012-07-25T23:49:57.830
> 
> 标签：json, parsing

我从*Box.com*得到这个 JSON ：

```
{
    "total_count": 2,
    "entries": [
        {
            "type": "file",
            "id": "2615240421",
            "sequence_id": "0",
            "name": "successful file upload.png",
            "description": null,
            "size": 19586,
            "path": "/Hey Hey Whats Goin On/successful file upload.png",
            "path_id": "/316877053/2615240421",
            "created_at": "2012-07-11T11:54:21-07:00",
            "modified_at": "2012-07-11T11:54:21-07:00",
            "etag": null,
            "created_by": {
                "type": "user",
                "id": "181757341",
                "name": "sean test",
                "login": "sean+test@box.com"
            },
            "modified_by": {
                "type": "user",
                "id": "181757341",
                "name": "sean test",
                "login": "sean+test@box.com"
            },
            "owned_by": {
                "type": "user",
                "id": "181757341",
                "name": "sean test",
                "login": "sean+test@box.com"
            },
            "shared_link": null,
            "parent": {
                "type": "folder",
                "id": "316877053",
                "sequence_id": "0",
                "name": "Hey Hey Whats Goin On"
            }
        },
        {
            "type": "file",
            "id": "2615240431",
            "sequence_id": "0",
            "name": "a whole lot of shit just happenedjson.png",
            "description": null,
            "size": 128063,
            "path": "/Hey Hey Whats Goin On/a whole lot of shit just happenedjson.png",
            "path_id": "/316877053/2615240431",
            "created_at": "2012-07-11T11:54:21-07:00",
            "modified_at": "2012-07-11T11:54:21-07:00",
            "sha1": null,
            "created_by": {
                "type": "user",
                "id": "181757341",
                "name": "sean test",
                "login": "sean+test@box.com"
            },
            "modified_by": {
                "type": "user",
                "id": "181757341",
                "name": "sean test",
                "login": "sean+test@box.com"
            },
            "owned_by": {
                "type": "user",
                "id": "181757341",
                "name": "sean test",
                "login": "sean+test@box.com"
            },
            "shared_link": null,
            "parent": {
                "type": "folder",
                "id": "316877053",
                "sequence_id": "0",
                "name": "Hey Hey Whats Goin On"
            }
        }
    ]
} 
```

我需要获取每个文件的修改信息。不确定如何在 .NET 中执行此操作。我习惯于解析 XML。我在 Stack 上看过一些例子，但它们通常是浅对象。不确定更深的物体。

帮助？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:56:49.603

我只会使用内置的[JavaScriptSerializer 类](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)。您可以将 JSON 反序列化为特定类型或“即时”类型，然后您可以“遍历”。

# javascript - 如何自动填充 HTML 表单并立即提交？

> ID：11660395
> 
> 赞同：0
> 
> 时间：2012-07-25T23:50:27.017
> 
> 标签：javascript, html

我有一个带有用户名和密码的简单 HTML 表单。

此 HTML 表单包含免费和付费用户的登录信息。付费用户需要输入用户名和密码，而免费用户必须输入默认用户名，例如 Username = myname，Password = password。

我设法使用 HTML 链接自动填充表单的值 -

```
<a href="#" onclick="document.getElementById('name').value='myname';document.getElementById('password').value='mypassword';" >Free User</a> 
```

这工作顺利。现在我想添加这样一种可能性，即当免费用户单击按钮时，值会自动填充，如上所示，并立即提交所述 HTML 表单。

当我尝试使用各种方法时，字段会填充，但 HTML 表单不会提交。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T00:01:38.223

只需在表单中设置默认值，无需脚本：

```
User ID: <input type="text" name="userid" value="guest">
<br>
Password: <input type="password" name="password" value="password">
<br>
<input type="submit" value="Login"> 
```

如果你真的*必须*使用脚本，那么（注意一个名为“name”的表单控件将掩盖表单的 name 属性，所以我使用了更合适的东西）使用类似的东西：

```
<input type="button" value="Guest Login" onclick="
  this.form.userid.value = 'guest';
  this.form.password.value = 'password';
  this.form.submit();
"> 
```

但坦率地说，这完全是浪费时间。如果您在表单中放置了两个提交按钮，一个用于访客，一个用于注册用户，那么访客可以单击访客提交按钮。

```
<input type="submit" name="registeredLogin" value="Registered User Login">
<input type="submit" name="guestLogin" value="Guest User Login"> 
```

无论单击哪个按钮，都会将其发送到服务器，以便它可以设置适当的权限。如果他们点击了访客按钮，你不在乎他们为用户名或密码设置了什么值，只需忽略它。

同样，需要零脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:00:28.270

如果我正确理解您的问题，并且您希望在发布表单之前使用一个按钮来填充表单字段 - 只需将您的嵌入代码放在 javascript 函数中，并通过按钮的“onclick”属性将其设置为点击处理程序。

**前任：**

```
<script>
    function populate(){
        document.getElementById('name').value='myname';  //set username
        document.getElementById('password').value='mypassword'; //setpassword
        document.forms["formID"].submit();  //submit 'formID'
    }
</script>

...

<form>
    ....
    <input type="button" name="test" value="Free User" onclick="populate()">
</form>
<!-- or as a link.. -->
<a href="#" onclick="populate()" title="login as free user">Free User</a> 
```

我质疑一个设计，这意味着您需要填充变量而不是将它们作为默认值！（可以在 HTML 中设置默认值）但是，如果这是设计规范，那么这就是您的代码！

**编辑** 总结以下所有评论：如果您的表单中有一个名为“submit”的元素，则此代码将不起作用 - ala 大多数提交名为 submit 的表单！如果您尝试调用此代码，则提交行实际上会尝试调用按钮；这显然不是一个函数，你会在这里得到这个错误......

```
Uncaught TypeError: Property 'submit' of object <#an HtmlFormElement> is not a function. 
```

[ [jsFiddle 出现错误](http://jsfiddle.net/KS5ZN/3/)] [ [jsFiddle 已修复](http://jsfiddle.net/KS5ZN/2/)] -**注意只有提交按钮名称已更改**。

对此的解释就[在这里](https://stackoverflow.com/a/9993047/1475897)——你每天都能学到新东西！

因此，您可以将按钮的名称设置为其他名称 - 即 sub；或者您可以使用 GitaarLAB 以编程方式在提交按钮上调用单击事件的解决方案。（对此请参阅评论部分）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T00:05:30.093

您仍然可以在服务器端设置它们，即如果收到没有用户名/密码的登录表单提交，则使用您的默认用户/密码覆盖它并继续您的登录脚本。

或者或除此之外，如果您希望动态分配不同的默认用户/通行证组合，您还可以设置 1 或 2 个额外的隐藏字段。

更直接地回答您的问题，您已经想出了如何填充一个字段..所以第二个字段正在重复相同的技巧。如果您愿意，您仍然可以使用表单中的默认提交按钮，但是您需要在客户端上运行 Javascript。提交表单传统上由 document.forms[n].submit();
然而 document.getElementById('submit').click(); 效果好多了..

总而言之，为了优雅的回退，我建议使用 2 个隐藏的表单字段并处理其余的服务器端。

祝你好运

**更新 3：** 基于我的技术的两个版本，现在完美运行！！！
自动登录：

```
<form action="login.php" method="post" id="formID" name="formID">
    <label for="name">Username:</label>
    <input id="name" name="name" type="text">
    <label for="user_email">Password:</label>
    <input id="user_email" name="email" type="password" />
    <input id="submit" name="submit" type="submit" value="Login" />
    </div>
</form>
<script type="text/javascript">
window.onload=function(){
    document.getElementById('name').value = 'duddu';
    document.getElementById('user_email').value = 'dudu';
    document.getElementById('submit').click();
};
</script> 
```

按钮（用户启动）自动登录：

```
<form action="login.php" method="post" id="formID" name="formID">
    <label for="name">Username:</label>
    <input id="name" name="name" type="text">
    <label for="user_email">Password:</label>
    <input id="user_email" name="email" type="password" />
    <input id="submit" name="submit" type="submit" value="Login" />
    <input name="free" type="button" value="Free User Login" onclick="popAndSub();" />
    </div>
</form>
<script type="text/javascript">
var popAndSub=function(){
    document.getElementById('name').value = 'duddu';
    document.getElementById('user_email').value = 'dudu';
    document.getElementById('submit').click();
};
</script> 
```

# javascript - 缓存函数的结果？

> ID：11660397
> 
> 赞同：5
> 
> 时间：2012-07-25T23:50:32.123
> 
> 标签：javascript, caching

在 Javascript 中，有没有办法缓存以下函数的结果：

*   一种）。计算成本高。
*   乙）。多次调用。

以经常调用的递归阶乘函数为例。通常我会创建一个单独的数组，例如`facotrialResults = [];`当我计算它们时将我的结果添加到它们，`factorialResults[x] = result;` 但是，有没有更好的方法来完成这种缓存而不使用向全局命名空间添加新变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T23:54:32.850

您可以将哈希附加到要缓存的函数。

```
var expensive_fn = function(val) {
  var result = arguments.callee.cache[val];
  if(result == null || result == undefined) {
    //do the work and set result=...
    arguments.callee.cache[val]=result;
  }
  return result;
}
expensive_fn.cache = {}; 
```

这将要求该函数是一个没有副作用的 1-1 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T23:50:32.123

您可以定义自己的函数属性，以便缓存结果与函数相关联，而不是在新数组中填充全局命名空间：

```
function factorial(n) {
  if (n > 0) {
    if (!(n in factorial))  // Check if we already have the result cached.
      factorial[n] = n * factorial(n-1);
    return factorial[n];
  }
  return NaN;
}
factorial[1] = 1; // Cache the base case. 
```

唯一的问题是检查结果是否已缓存的开销。但是，如果检查的复杂性远低于重新计算问题，那么它是非常值得的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T23:53:41.243

[您可以考虑将下划线](http://underscorejs.org/)库滚动到您的环境中。它对很多事情都很有用，包括它的[memoize](http://underscorejs.org/#memoize)功能

> 通过缓存计算结果来记忆给定的函数。对于加速慢速运行的计算很有用。如果传递了一个可选的 hashFunction，它将用于根据原始函数的参数计算存储结果的哈希键。默认的 hashFunction 只使用 memoized 函数的第一个参数作为键。

```
var fibonacci = _.memoize(function(n) {
  return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T23:58:29.937

使用缓存

这是一般的解决方案

```
// wrap cache function
var wrapCache = function(f, fKey){
    fKey = fKey || function(id){ return id; };
    var cache = {};

    return function(key){
        var _key = fKey(key); 
        if (!cache[_key]){
            cache[_key] = f(key);
        };

        return cache[_key];
   };
};

// functions that expensive
var getComputedRGB = function(n){
    console.log("getComputedRGB called", n) ;
    return n * n * n; 
};

// wrapping expensive
var getComputedRGBCache = wrapCache(getComputedRGB, JSON.stringify);

console.log("normal call");
console.log(getComputedRGB(10));
console.log(getComputedRGB(10));
console.log(getComputedRGB(10));
console.log(getComputedRGB(10));
// compute 4 times

console.log("cached call") ;
console.log(getComputedRGBCache(10));
console.log(getComputedRGBCache(10));
console.log(getComputedRGBCache(10));
console.log(getComputedRGBCache(10));
// compute just 1 times

// output
=> normal call 
getComputedRGB called 10
1000
getComputedRGB called 10
1000
getComputedRGB called 10
1000
getComputedRGB called 10
1000

=> cached call
getComputedRGB called 10
1000
1000
1000
1000 
```

# sql-server - 将 MS Access 交叉表查询转换为 SQL Server 存储过程

> ID：11660400
> 
> 赞同：2
> 
> 时间：2012-07-25T23:50:50.303
> 
> 标签：sql-server, ms-access, pivot

我正在尝试将 MS Access Cross Tab 查询转换为 SQL Server 存储过程，但在 SQL Server 中透视数据时遇到问题。

这是我要转换的 MS Access 交叉查询 -

```
TRANSFORM Sum(NZ(Actuals!Amount,0)) AS Amount
SELECT Actuals.PS_OV, Actuals.Period, Actuals.Program, Actuals.Actuals_Year
FROM Actuals
GROUP BY Actuals.PS_OV, Actuals.Period, Actuals.Program, Actuals.Actuals_Year
PIVOT Actuals.Source; 
```

列中的值`Source`（即`Equipment, Expense, Furniture, Leasehold`）被透视到列。请建议如何在 SQL Server 存储过程中执行此操作？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:28:55.303

在 SQL Server 中，您[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)会像这样：

```
SELECT *
FROM 
(
  SELECT PS_OV
    , Period
    , Program
    , Actuals_Year
    , IsNull(Amount, 0) as Amount
    , Source
  FROM Actuals
) x
PIVOT
(
  Sum(Amount)
  FOR Source IN ([Equipment], [Expense], [Furniture], [Leasehold])
) p 
```

# google-drive-api - File.md5Checksum 等效于 Google Doc 文件

> ID：11660401
> 
> 赞同：3
> 
> 时间：2012-07-25T23:50:53.347
> 
> 标签：google-drive-api

对于 Google Drive 中的非 Google Doc 文件，我可以通过将 File.md5Checksum 与之前的值进行比较来检测更改。

对于 Google Doc 文件，md5Checksum 为空：

```
 application/vnd.google-apps.* 
```

除了 File.modifiedDate 还有什么方法吗？

诚然，这是一种极端情况：如果文档从状态 A => B => A 开始，那么 modifiedDate 会改变，但内容不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:38:57.967

File.modifiedDate 绝对是一个很好的解决方案，但您应该考虑使用 Changes 提要来检测文件的更改：

[https://developers.google.com/drive/manage-changes](https://developers.google.com/drive/manage-changes)

检索更改提要后，您可以使用该`fileId`字段过滤条目。

# ios - NSTimer 与 CACurrentMediaTime()

> ID：11660403
> 
> 赞同：24
> 
> 时间：2012-07-25T23:51:45.957
> 
> 标签：ios, nstimer, game-engine

所以我在我的第一个 iOS 游戏中，正在努力寻找如何以最佳方式集成对象运动。

游戏严重依赖快速移动的物体和持续快速的用户输入变化。因此，我试图让对象集成和约束求解器尽可能快速准确地运行（以最大限度地减少连续游戏循环调用之间的用户输入变化）。

更具体地说，我不确定 NSTimer 类和 CACurrentMediaTime() 函数的功能。很难凭经验进行测试，因为我不确定哪个误差更大。例如，使用重复间隔为 0.008（~2 更新/屏幕刷新）的 NSTimer 并在连续调用中调用 CACurrentMediaTime()，我发现调用之间的时间间隔在 0.0075 - 0.009 之间变化。很难说哪个是（小）不一致的原因。因此，为了确定时间步长，我应该是：

1.  假设 NSTimer 足够准确，可以使用 NSTimer 时间间隔作为游戏循环时间步长

2.  使用 CACurrentMediaTime() 确定连续游戏循环调用之间的时间间隔。

学生和所有这一切的新手 - 请善待:) 非常感谢任何建议。谢谢你的时间。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-26T02:26:19.230

`NSTimer`不是实时计时器。它甚至不接近，也不意味着要接近。如果您查看任何东西的速度超过半秒左右，`NSTimer`那就是错误的工具。我什至不会在一秒钟内推荐它。对于多秒的事情，尤其是多分钟的事情，当你并不真正关心它何时触发时，这很棒。我用它所有的时间。

`CACurrentMediaTime()`不是计时器。它是系统中最准确时间函数的封装：`mach_absolute_time()`. 因此，如果您真的关心现在是什么时间，并且希望以人类可以理解的数字显示，`CACurrentMediaTime()`这就是您的功能。`mach_absolute_time()`会给你一个非常准确的数字，但它基于[马赫绝对时间单位](http://developer.apple.com/library/mac/#qa/qa1398/_index.html)，它实际上并没有映射到任何讨厌的人类认为的东西（每个 CPU 都有不同的比例）。这就是为什么我们必须`CACurrentMediaTime()`让我们的生活更轻松。

好的，所以`NSTimer`不是实时的，`CACurrentMediaTime()`也不是计时器。游戏程序员要做什么？

[Grand Central Dispatch](https://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)包括我们拥有的一些最好的“大约在这个时候运行”系统。这是一个调度源。我说“大约这个时候”是因为 GCD 仍然不是 RTOS 人所说的真正的“实时”。但这对游戏开发者来说已经足够实时了。[在并发编程指南](https://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW1)中查找创建计时器。另请查看`dispatch_after()`，这对于一次性“延迟运行”很有用。

请记住，在您的主线程（UI 线程，所有绘图完成的地方）上运行的任何东西都将与该线程上的所有其他东西共享时间。因此，当您在主线程上处理绘图和用户交互时，您经常需要在后台线程上进行计算。这就是 GCD dispatch_queues 旨在帮助您的事情。另一方面，请记住许多 iOS 设备是单核的。所以“后台线程”有点用词不当。一次只能在 CPU 上真正运行一件事。这就是为什么将事物转移到 GPU 如此重要（见下文）。

您可能还想认真研究[cocos2d 之](http://www.cocos2d-iphone.org/)类的系统，这是一个非常好的游戏引擎。它会为您处理很多此类细节，并让您专注于游戏部分。

留在 Apple 框架中，您还应该看看 Core Animation。如果你用计时器在屏幕上移动东西，你不应该那样做。核心动画是您在屏幕上移动事物的方式。它会为你处理很多细节，比你自己做的更快，使用更少的电池，并且它将很多工作转移到 GPU 上（正如我上面提到的）。比起游戏，它更多地是为 UI 元素设计的，但它绝对可以用来构建简单的游戏。

当然还有 GLKit，但那是完全不同的事情......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T02:23:48.183

根据[NSTimer 文档](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html) `the effective resolution of the time interval for a timer is limited to on the order of 50-100 milliseconds.`，这可能就是您看到时间间隔变化的原因。

我建议您将更新间隔更改为 0.016 秒，因为没有理由让您的游戏状态更新频率超过屏幕可以绘制的频率。然后您可以使用[CADisplayLink](http://developer.apple.com/library/ios/documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)来处理时间。这应该非常准确，因为它使用显示刷新率。

# php - 从 PHP 中添加/替换 SQL 表中的记录：先抓取整个表，还是根据需要使用 SELECT？

> ID：11660405
> 
> 赞同：1
> 
> 时间：2012-07-25T23:52:02.087
> 
> 标签：php, mysql, performance, wordpress

我正在制作一段 PHP 代码，它接受用户 XML 输入（包含多个记录/项目，通常大约 20 到 100 个），对其进行解析，然后根据记录数据库对其进行检查。如果数据库中没有记录，PHP 脚本应该插入它。如果记录在数据库中，则脚本应丢弃用户的输入或运行该记录的更新，具体取决于用户是否选中了“替换记录”复选框。

我的问题是，哪个更快：选择确定唯一性的整个表的列，然后在 PHP 中对它们进行排序？或者，对于*每条*记录，执行 SELECT COUNT() FROM table WHERE name=(input name) AND region=(input region) 并查看是否有任何记录返回？

一个大 SQL 查询 + 相当多的 PHP 排序时间，还是 100 个小 SQL 查询和一个 PHP 比较？

编辑：人们一直在要求详细信息，所以：

**数据库大小：** 250 条记录或更少
**索引列：**我还没有在 YET 中放置索引，但我将在生产版本中设置名称和区域列与索引。
**返回 SELECT 的格式：**如果我执行大 SELECT，由于我使用的 DB 类 (WPDB)，它将在行对象的关联数组中返回。 **什么构成唯一性：**名称和区域列确定记录是否唯一。如果名称-区域组合不在数据库中，则该记录是唯一的。

例如，*name:"Paris" region:"France"*和*name:"Paris" region:"Texas"*是两个唯一记录。但是，*name:"Paris" region:"France"*和*name:"Marseilles" region:"France"*也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:15:16.103

我会先选择整个数据库，然后创建一个数组并使用 in_array() 进行检查。

```
$array = array();
$query = .......
while ($row = mysql_fetch_assoc($query)) {
  array[] = $row['id'];
}
foreach ($xml_array as $line) {
   if (in_array($line['id'], $array)) {
       ##ALREADY in database
       if (<other condition>) {
            #UPDATE THE ROW
       }
   }
   else {
      ##INSERT INTO DATABASE
   }
} 
```

当然，在我的示例中，我使用“id”作为列，但您可以使用任何内容。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:15:41.347

使用“REPLACE INTO”更快。语法与“INSERT INTO”完全相同，但如果有任何非唯一值由于索引（主键或唯一索引）而必须唯一，则现有记录将被替换。无需提前查询，一键查询。

请注意，替换将替换整个记录。如果您只想更新一个字段，然后运行“INSERT INTO ... ON DUPLIACTE KEY UPDATE field=value”，这将插入新记录或更新现有记录。还是一个查询。

至于另一部分（如果选中复选框，则删除记录）），只需运行“DELETE”，如果记录不存在，它将不会被删除 - 再次，一个查询。

这样，您就不会冒险在支票和更新之间添加/删除记录，而且您可以保存查询，而且其他人更容易阅读正在发生的事情。

# sql - 涉及平均值的 SQL 数学问题（但不是您的想法！）

> ID：11660410
> 
> 赞同：1
> 
> 时间：2012-07-25T23:52:41.067
> 
> 标签：sql, sqlite

我对 SQL 很陌生，无法让 SQL 查询正常工作。

我有一个包含数字 1 到 4 的响应列表示例：

问题1包含数据Q1：1,2,1,3,4,1,2,3,4,2

我需要做的是计算有多少个 1 和 2，将它们加起来，然后取平均值。例如在上面的示例中，有 6 个 1 和 2 的总数并将其除以总数以获得平均值。6/10 = .6（天哪，我希望这是有道理的）

我一直在尝试这段代码，但它是将数字相加，然后除以总数。

```
Select avg(q1) as avg
From db
Where q1 between 1 and 2
And call = 55817 
```

例如在上面的例子中它是这样做的：`1+2+1+1+2+2=9/10 = .9`当我再次需要它来“计算”有多少个 1 和 2 时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:55:11.450

对于 SQLite 特定的解决方案，试试这个：

```
SELECT AVG(q1 IN (1, 2)) AS youravg
FROM db
WHERE call = 55817 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!5/6d08d/3)

对于更标准的 SQL 解决方案，您可能更喜欢这样：

```
SELECT AVG(CASE WHEN q1 IN (1, 2) THEN 1 ELSE 0 END) AS youravg
FROM db
WHERE call = 55817 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:58:56.710

为什么不使用 1 和 2 进行 SELECT 然后使用 COUNT 函数？

[数数](http://www.techonthenet.com/sql/count.php)

# android - Android 设备已与打印机配对，但仍不断要求输入密码

> ID：11660412
> 
> 赞同：2
> 
> 时间：2012-07-25T23:53:13.797
> 
> 标签：android, bluetooth

我通常通过 Android 设置菜单配对设备，然后尝试以编程方式将其连接到打印机。我搜索配对的设备，尝试连接，然后它再次提示我输入密码。我试图避免每次建立连接时都必须输入密码。

以下是相关代码：

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();

        String defaultPrinter = UserSession.getDefaultPrinter( context );
        BluetoothDevice preferredDevice = null;
        if ( defaultPrinter == null ) {
            //start activity regarding selecting a default printer
        }
        else {

            for (BluetoothDevice device : pairedDevices)
                if ( device.getAddress().equals( defaultPrinter ) ) {
                    preferredDevice = device;
                    break;
                }
        }

        UUID id = UUID.fromString( BLUE_TOOTH_UUID );
        try {
            selectedDeviceSocket = preferredDevice.createRfcommSocketToServiceRecord( id );
            selectedDeviceSocket.connect();
            isConnected = true;
            return selectedDeviceSocket.getOutputStream();
        }
        catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

只有当我重新输入正确的引脚时，才会发生连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T01:22:06.847

尝试生成自己的 UUID：

```
private UUID generateUuid() {
String android_id = Secure.getString(getApplicationContext()
    .getContentResolver(), Secure.ANDROID_ID);
Log.i("System out", "android_id : " + android_id);

final TelephonyManager tm = (TelephonyManager) getBaseContext()
    .getSystemService(Context.TELEPHONY_SERVICE);

final String tmDevice, tmSerial, androidId;
tmDevice = "" + tm.getDeviceId();
Log.i("System out", "tmDevice : " + tmDevice);
tmSerial = "" + tm.getSimSerialNumber();
Log.i("System out", "tmSerial : " + tmSerial);
androidId = ""
    + android.provider.Settings.Secure.getString(
        getContentResolver(),
        android.provider.Settings.Secure.ANDROID_ID);

UUID deviceUuid = new UUID(androidId.hashCode(),
    ((long) tmDevice.hashCode() << 32) | tmSerial.hashCode());

return deviceUuid;
} 
```

并在这里使用它：

```
selectedDeviceSocket = preferredDevice.createRfcommSocketToServiceRecord( generateUuid() ); 
```

*需要 READ_PHONE_STATE 权限

# android - Titanium 和 android sdk 问题

> ID：11660413
> 
> 赞同：1
> 
> 时间：2012-07-25T23:53:35.493
> 
> 标签：android, titanium

所以我试图用钛2.0在osx lion上做到这一点。从 Titanium 运行我的代码直接让我进入模拟器上的登录屏幕（我在模拟器上等了几个小时）然后它冻结了，没有任何交互，我无法点击任何东西，我的应用程序没有加载。所以我尝试从 sdk 工具启动一个新的 AVD，但结果相同，模拟器启动，加载主屏幕，什么也没有。我尽了一切可能，给了它 2 gig 的内存空间，在多个 sdk 目标（2.1、2.2、4.0。4.1）上累了它，重新安装了 sdk，结果相同。最后我决定做一个“./emulator -avd -show-kernel”，下面的输出就是结果（我以用户和 sudo 的身份完成了它）。那么我在这里错过了什么？是 SDK、Titanium 还是操作系统？任何帮助深表感谢。

```
 s**erial0 console
  Uncompressing Linux................................................................................................. done, booting the kernel.
  Initializing cgroup subsys cpu
  Linux version 2.6.29-gc497e41 (kroot@kennyroot.mtv.corp.google.com) (gcc version 4.4.3 (GCC) ) #2 Thu Dec 8 15:07:43 PST 2011
  CPU: ARMv7 Processor [410fc080] revision 0 (ARMv7), cr=10c5387f
  CPU: VIPT nonaliasing data cache, VIPT nonaliasing instruction cache
  Machine: Goldfish
  Memory policy: ECC disabled, Data cache writeback
  Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 130048
  Kernel command line: qemu.gles=0 qemu=1 console=ttyS0 android.qemud=ttyS1 android.checkjni=1 ndns=1
  Unknown boot option `qemu.gles=0': ignoring
  Unknown boot option `android.qemud=ttyS1': ignoring
  Unknown boot option `android.checkjni=1': ignoring
  PID hash table entries: 2048 (order: 11, 8192 bytes)
  Console: colour dummy device 80x30
  Dentry cache hash table entries: 65536 (order: 6, 262144 bytes)
  Inode-cache hash table entries: 32768 (order: 5, 131072 bytes)
  Memory: 512MB = 512MB total
  Memory: 515712KB available (2756K code, 683K data, 108K init)
  Calibrating delay loop... 432.53 BogoMIPS (lpj=2162688)
  Mount-cache hash table entries: 512
  Initializing cgroup subsys debug
  Initializing cgroup subsys cpuacct
  Initializing cgroup subsys freezer
  CPU: Testing write buffer coherency: ok
  net_namespace: 716 bytes
  NET: Registered protocol family 16
  bio: create slab <bio-0> at 0
  NET: Registered protocol family 2
  IP route cache hash table entries: 16384 (order: 4, 65536 bytes)
  TCP established hash table entries: 65536 (order: 7, 524288 bytes)
  TCP bind hash table entries: 65536 (order: 6, 262144 bytes)
  TCP: Hash tables configured (established 65536 bind 65536)
  TCP reno registered
  NET: Registered protocol family 1
  checking if image is initramfs... it is
  Freeing initrd memory: 160K
  goldfish_new_pdev goldfish_interrupt_controller at ff000000 irq -1
  goldfish_new_pdev goldfish_device_bus at ff001000 irq 1
  goldfish_new_pdev goldfish_timer at ff003000 irq 3
  goldfish_new_pdev goldfish_rtc at ff010000 irq 10
  goldfish_new_pdev goldfish_tty at ff002000 irq 4
  goldfish_new_pdev goldfish_tty at ff011000 irq 11
  goldfish_new_pdev goldfish_tty at ff012000 irq 12
  goldfish_new_pdev smc91x at ff013000 irq 13
  goldfish_new_pdev goldfish_fb at ff014000 irq 14
  goldfish_new_pdev goldfish_audio at ff004000 irq 15
  goldfish_new_pdev goldfish_mmc at ff005000 irq 16
  goldfish_new_pdev goldfish_memlog at ff006000 irq -1
  goldfish_new_pdev goldfish-battery at ff015000 irq 17
  goldfish_new_pdev goldfish_events at ff016000 irq 18
  goldfish_new_pdev goldfish_nand at ff017000 irq -1
  goldfish_new_pdev qemu_pipe at ff018000 irq 19
  goldfish_new_pdev goldfish-switch at ff01a000 irq 20
  goldfish_new_pdev goldfish-switch at ff01b000 irq 21
  goldfish_pdev_worker registered goldfish_interrupt_controller
  goldfish_pdev_worker registered goldfish_device_bus
  goldfish_pdev_worker registered goldfish_timer
  goldfish_pdev_worker registered goldfish_rtc
  goldfish_pdev_worker registered goldfish_tty
  goldfish_pdev_worker registered goldfish_tty
  goldfish_pdev_worker registered goldfish_tty
  goldfish_pdev_worker registered smc91x
  goldfish_pdev_worker registered goldfish_fb
  goldfish_pdev_worker registered goldfish_audio
  goldfish_pdev_worker registered goldfish_mmc
  goldfish_pdev_worker registered goldfish_memlog
  goldfish_pdev_worker registered goldfish-battery
  goldfish_pdev_worker registered goldfish_events
  goldfish_pdev_worker registered goldfish_nand
  goldfish_pdev_worker registered qemu_pipe
  goldfish_pdev_worker registered goldfish-switch
  goldfish_pdev_worker registered goldfish-switch
  ashmem: initialized
  Installing knfsd (copyright (C) 1996 okir@monad.swb.de).
  yaffs Dec  8 2011 15:06:54 Installing. 
  msgmni has been set to 1008
  alg: No test for stdrng (krng)
  io scheduler noop registered
  io scheduler anticipatory registered (default)
  io scheduler deadline registered
  io scheduler cfq registered
  allocating frame buffer 480 * 800, got ffa00000
  console [ttyS0] enabled
  brd: module loaded
  loop: module loaded
  nbd: registered device at major 43
  goldfish_audio_probe
  tun: Universal TUN/TAP device driver, 1.6
  tun: (C) 1999-2004 Max Krasnyansky <maxk@qualcomm.com>
  smc91x.c: v1.1, sep 22 2004 by Nicolas Pitre <nico@cam.org>
  eth0 (smc91x): not using net_device_ops yet
  eth0: SMC91C11xFD (rev 1) at e080c000 IRQ 13 [nowait]
  eth0: Ethernet addr: 52:54:00:12:34:56
  goldfish nand dev0: size c200000, page 2048, extra 64, erase 131072
  goldfish nand dev1: size c200000, page 2048, extra 64, erase 131072
  goldfish nand dev2: size 4000000, page 2048, extra 64, erase 131072
  mice: PS/2 mouse device common for all mice
  *** events probe ***
  events_probe() addr=0xe0814000 irq=18
  events_probe() keymap=qwerty2
  input: qwerty2 as /devices/virtual/input/input0
  goldfish_rtc goldfish_rtc: rtc core: registered goldfish_rtc as rtc0
  device-mapper: uevent: version 1.0.3
  device-mapper: ioctl: 4.14.0-ioctl (2008-04-23) initialised: dm-devel@redhat.com
  logger: created 64K log 'log_main'
  logger: created 256K log 'log_events'
  logger: created 64K log 'log_radio'
  TCP cubic registered
  NET: Registered protocol family 10
  IPv6 over IPv4 tunneling driver
  NET: Registered protocol family 17
  NET: Registered protocol family 15
  RPC: Registered udp transport module.
  RPC: Registered tcp transport module.
  802.1Q VLAN Support v1.8 Ben Greear <greearb@candelatech.com>
  All bugs added by David S. Miller <davem@redhat.com>
  VFP support v0.3: implementor 41 architecture 3 part 30 variant c rev 0
  goldfish_rtc goldfish_rtc: setting system clock to 2012-07-25 17:40:43 UTC (1343238043)
  Freeing init memory: 108K
  mmc0: new SD card at address e118
  mmcblk0: mmc0:e118 SU02G 2.00 GiB 
   mmcblk0:
  init: cannot open '/initlogo.rle'
  yaffs: dev is 32505856 name is "mtdblock0"
  yaffs: passed flags ""
  yaffs: Attempting MTD mount on 31.0, "mtdblock0"
  yaffs_read_super: isCheckpointed 0
  save exit: isCheckpointed 1
  yaffs: dev is 32505857 name is "mtdblock1"
  yaffs: passed flags ""
  yaffs: Attempting MTD mount on 31.1, "mtdblock1"
  yaffs_read_super: isCheckpointed 0
  yaffs: dev is 32505858 name is "mtdblock2"
  yaffs: passed flags ""
  yaffs: Attempting MTD mount on 31.2, "mtdblock2"
  yaffs_read_super: isCheckpointed 0
  init: cannot find '/system/bin/dbus-daemon', disabling 'dbus'
  init: cannot find '/system/etc/install-recovery.sh', disabling 'flash_recovery'
  $ eth0: link up
  warning: `rild' uses 32-bit capabilities (legacy support in use)
  init: sys_prop: permission denied uid:1003  name:service.bootanim.exit** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:56:24.353

我实际上是 Eclipse 用户，但如果您可以进入模拟器的锁屏，这听起来像是您的计算机有问题（如果我什至无法到达那里，请纠正我）。也许您的计算机上正在运行一个后台任务或类似的东西。另外，尝试重新启动计算机。希望这会有所帮助，尽管模拟器如此参差不齐，以至于很难确切地知道发生了什么。

# java - 如何创建避免TaskManager被杀的通知？

> ID：11660415
> 
> 赞同：0
> 
> 时间：2012-07-25T23:53:54.210
> 
> 标签：java, android

我想在 Android 中创建通知。但是，如果我通过 TaskManager 杀死应用程序，它也会终止通知。它是代码片段。

它是调用者。

```
Intent intent = new Intent(myActivity, NotificationReciever.class);
String appName = myActivity.getTitle().toString();
Calendar calendar = Calendar.getInstance();  
calendar.setTimeInMillis(System.currentTimeMillis());  
calendar.add(Calendar.SECOND, time);
AlarmManager alarmManager = (AlarmManager)
myActivity.getSystemService(Context.ALARM_SERVICE);  
alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), sender); 
```

它是接收者。

```
public class NotificationReciever extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) { 
```

我添加了代码，但它不能

```
intent.setFlags( Intent.FLAG_ACTIVITY_NEW_TASK ); 
```

我喜欢让通知充满活力。你能告诉我如何避免TaskManager的杀戮吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:59:46.477

> 你能告诉我如何避免TaskManager的杀戮吗？

这是不可能的，除非通过自定义构建的 Android 操作系统，放入您自己的 ROM 模块以部署在您自己的设备上。

# objective-c - 字体渲染不佳（Cocoa - Mac）

> ID：11660419
> 
> 赞同：1
> 
> 时间：2012-07-25T23:54:21.853
> 
> 标签：objective-c, macos, cocoa

我注意到我的 xib 和我的最终程序中的字体渲染有一个奇怪且非常明显的差异，我在下面附上了屏幕截图：

[请参阅此处查看缩小的图像](http://cl.ly/image/0Q3W1H0z1w46)

[放大看这里](http://cl.ly/image/0I3f34143f3C)

这是怎么回事，我怎样才能让我的应用字体看起来像在 XCode 中一样？（它与亚像素渲染有关吗？？？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:23:25.593

[我从这里偷了这个答案](https://stackoverflow.com/questions/3917871/creating-a-label-using-nstextfield-is-blurry)：

> 如果您没有背景（包括透明）并且您的文本是任何支持图层的超级视图的子视图（您已在代码或 IB 中打开“想要图层”以允许动画/过渡），您将获得模糊的文本。您必须选择无图层支持的视图或具有纯色背景颜色的标签。

# c# - 日期格式的字符串比较不起作用？

> ID：11660423
> 
> 赞同：0
> 
> 时间：2012-07-25T23:54:40.837
> 
> 标签：c#, wpf, wcf, linq, web-services

嗨，由于某种原因，我无法在日期上进行字符串比较？举个例子：

```
public List<HireDate> GetHireDate(string anything)
{
List<HireDate> hiredate = hiredates.Where(n =>
string.Equals(n.HireFromDate, anything, StringComparison.CurrentCultureIgnoreCase)
).ToList();
return hiredate;
} 
```

它根本行不通？如果我输入一个文本框`13/07/2012`，它是如何存储的，它会返回 404 not found？？？

通用列表/获取请求的输出如下所示：

```
<ArrayOfHireDate>
<HireDate>
<HireFromDate>13/07/2012</HireFromDate>
<HireToDate>28/07/2012</HireToDate>
<NumberOfDaysHired>15</NumberOfDaysHired>
</HireDate>
</ArrayOfHireDate> 
```

还有另一种方法可以找到带有正斜杠的字符串吗？例如，在任何网络字符串比较器中使用 / 都不起作用，它总是会抛出 404 not found？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:28:08.033

两件事情：

1) 要将一个字符串放入另一个字符串中，最常见的方法是使用[`String.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx). 该方法采用格式字符串（例如`"Date: {0} Time: {1}"`）和一堆参数。字符串中的每次出现`{0}`都被第一个参数、`{1}`第二个等替换。还有其他选项可以格式化字符串中的参数，有关更多信息，请参阅[MSDN 页面上的`String.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)信息。

2) 如果你有一个 URL 并且你在你的应用程序中得到一个 404，首先验证 URL 的语法是正确的。直接在浏览器中手动尝试在程序中创建的 URL，如果不起作用，请找出实际用于提供参数的语法。例如，可能必须将日期格式设置为，`13-07-2012`而不是`13/07/2012`使其正常工作。如果是这样，您可能可以通过选择适当的[`CultureInfo`](http://msdn.microsoft.com/en-us/library/5hh873ya.aspx).

对于任何`DateTime date`对象，要使用任何您想要的格式设置它的短日期`CultureInfo`，请使用重载`ToString`并指定`d`为格式。例如，使用不变的文化：

```
var str = date.ToString("d", CultureInfo.InvariantCulture); 
```

其他格式字符串可以在[这里](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)找到。

# arrays - 对象未对齐错误

> ID：11660428
> 
> 赞同：0
> 
> 时间：2012-07-25T23:55:34.247
> 
> 标签：arrays, numpy, python-2.7

我正在使用 python 2.7 并试图让这段代码工作并不断收到错误

```
nsample = 50
sig = 0.25
x1 = np.linspace(0,20, nsample)
X = np.c_[x1, np.sin(x1), (x1-5)**2, np.ones(nsample)]
beta = masterAverageList
y_true = np.dot(X, beta)
y = y_true + sig * np.random.normal(size=nsample) 
```

但是我不断收到对象未对齐错误我认为这与主平均列表是一个列表有关吗？

如果重要的话，我忘了提到主数组列表中有 196 个项目。他们都是花车

我该如何纠正？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T00:51:03.623

[您应该在此处](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)和[此处](http://www.scipy.org/EricsBroadcastingDoc)阅读 numpy 广播。您正在尝试在具有不兼容形状的两个数组之间进行点积。

```
>>> import numpy as np
>>> x1 = np.linspace(0,20,50)
>>> X = np.c_[x1,np.sin(x1),(x1-5)**2,np.ones(50)]
>>> beta = np.ones(196)
>>> y_true = np.dot(X,beta)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: matrices are not aligned
>>> X.shape
(50, 4)
>>> beta.shape
(196,) 
```

我不确定要推荐什么，因为我不知道您通过在这些数组之间取点积来期待什么。

# sql - 在 HSQLDB 版本 < 2 中模拟 GROUP_CONCAT 函数？

> ID：11660432
> 
> 赞同：0
> 
> 时间：2012-07-25T23:56:07.617
> 
> 标签：sql, hsqldb, group-concat, openoffice-base, libreoffice-base

LO/OOO **Base**不附带 HSQLDB 版本 > 2，这意味着没有`GROUP_CONCAT`功能。

***有没有办法在 HSQLDB 版本 < 2 中模拟此功能？***

`name`这是列和`value`应用函数之前的示例：

```
TIM   |  51
TIM   |  53
TIM   |  55
JOHN  |  103
JOHN  |  104 
```

我想在 Base 中使用 (H)SQL 代码，它返回类似于 GROUP_CONCAT 的结果：

```
TIM   | 51, 53, 55
JOHN  | 103, 104 
```

（对于其他 DBMS 也有[类似的问题](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-ms-sql-server-2005)，但在 HSQLDB 中答案对我不起作用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:41:05.543

HSQLDB 1.8.0 没有实用的方法来做到这一点。

但是，您可以将 LO/OOo 提供的 jar 替换为 HSQLDB 2.2.9（候选版本 atm），并创建和使用外部 HSQLDB 数据库。现有的数据库也可以转换。

有关详细说明和帮助程序，请参见[http://www.ooofoum.org 。](http://www.ooofoum.org)一个简短的指南在这里：[http ://user.services.openoffice.org/en/forum/viewtopic.php?f=83&t=17567](http://user.services.openoffice.org/en/forum/viewtopic.php?f=83&t=17567)

更新：最新的 HSQLDB 2.2.9 候选版本可以与 LO/OOo 一起使用。.odb 文件中嵌入的数据库已更新到新版本，如果没有最新的 HSQLDB，则无法打开该文件。

# sql - t-sql 对连续分区或运行进行编号（字段中具有相同值的序列）

> ID：11660433
> 
> 赞同：2
> 
> 时间：2012-07-25T23:56:19.327
> 
> 标签：sql, sql-server, database, tsql

这似乎是一个非常简单的问题，但我想不出一个一次性（对我来说是一次性）SQL 查询，它将采用以下内容并添加一个字段，该字段`location number`将是第一次运行的 1，第一次运行的`DAL`2`BOS`运行，3 用于下一次运行`DAL`。我知道如何标记第一个分区（使用两个`ROW_NUMBER()`）。

```
+---------+--------+-----------+----------+
| ITEM_ID | LOT_ID | ORGN_CODE | TRANS_ID |
+---------+--------+-----------+----------+
|      61 |  15161 | DAL       |   992342 |
|      61 |  15161 | DAL       |   992347 |
|      61 |  15161 | DAL       |  1043941 |
|      61 |  15161 | BOS       |  1061565 |
|      61 |  15161 | BOS       |  1064997 |
|      61 |  15161 | BOS       |  1064998 |
|      61 |  15161 | BOS       |  1064999 |
|      61 |  15161 | BOS       |  1065000 |
|      61 |  15161 | BOS       |  1065036 |
|      61 |  15161 | BOS       |  1065062 |
|      61 |  15161 | BOS       |  1065063 |
|      61 |  15161 | DAL       |  1065184 |
|      61 |  15161 | DAL       |  1065185 |
|      61 |  15161 | DAL       |  1065186 |
|      61 |  15161 | DAL       |  1065197 |
|      61 |  15161 | DAL       |  1065198 |
|      61 |  15161 | DAL       |  1083864 |
|      61 |  15161 | DAL       |  1083865 |
+---------+--------+-----------+----------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T03:02:13.557

试试这样：

```
SELECT  *
    ,   DENSE_RANK() OVER(Order By GroupOrder) As GroupSequence
FROM (
    SELECT *,
        ROW_NUMBER() OVER(Order By TRANS_ID)
        -   ROW_NUMBER() OVER(Partition By ORGN_CODE Order By TRANS_ID)
            As GroupOrder
    FROM    yourTable
    )       As grp 
```

只有一次通过，没有游标。在 SQL Server (tsql) 上，这符合对源表的单次扫描。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T02:14:34.063

我在 Postgresql 上运行了这个。也许你可以申请你的 rdbms。这个想法是使用一个解析函数来确定上一条记录的orgn_code。然后用 0 或 1 标记每一行，如果它与前一个代码相同或不同。将此列相加得出递增的数字。

```
create table transaction( ITEM_ID int, LOT_ID int, ORGN_CODE text, TRANS_ID int);

insert into transaction values(61, 1561,  'DAL', 992342 );
insert into transaction values(61, 1561,  'DAL', 992347 );
insert into transaction values(61, 1561,  'DAL', 1043941 );
insert into transaction values(61, 1561,  'BOS', 1061565 );
insert into transaction values(61, 1561,  'BOS', 1064997 );
insert into transaction values(61, 1561,  'BOS', 1064998 );
insert into transaction values(61, 1561,  'BOS', 1064999 );
insert into transaction values(61, 1561,  'BOS', 1065000 );
insert into transaction values(61, 1561,  'BOS', 1065036 );
insert into transaction values(61, 1561,  'BOS', 1065062 );
insert into transaction values(61, 1561,  'DAL', 1065063 );
insert into transaction values(61, 1561,  'DAL', 1065184 );
insert into transaction values(61, 1561,  'DAL', 1065185 );
insert into transaction values(61, 1561,  'DAL', 1065186 );
insert into transaction values(61, 1561,  'DAL', 1065197 );
insert into transaction values(61, 1561,  'DAL', 1065198 );
insert into transaction values(61, 1561,  'DAL', 1083864 );
insert into transaction values(61, 1561,  'DAL', 1083865 );

SELECT item_id, lot_id, orgn_code, trans_id
      ,SUM( CASE WHEN orgn_code = previous_orgn_code THEN 0 ELSE 1 END ) OVER(order by item_id, lot_id, trans_id) + 1 AS counter
  FROM ( SELECT item_id, lot_id, orgn_code, trans_id
               ,COALESCE( LAG(orgn_code) OVER(order by item_id, lot_id, trans_id)
                         ,orgn_code ) AS previous_orgn_code
           FROM transaction ) x
  ORDER BY item_id, lot_id, trans_id, orgn_code; 
```

结果：

```
61  1561  "DAL"  992342   1
61  1561  "DAL"  992347   1
61  1561  "DAL"  1043941  1
61  1561  "BOS"  1061565  2
61  1561  "BOS"  1064997  2
61  1561  "BOS"  1064998  2
61  1561  "BOS"  1064999  2
61  1561  "BOS"  1065000  2
61  1561  "BOS"  1065036  2
61  1561  "BOS"  1065062  2
61  1561  "DAL"  1065063  3
61  1561  "DAL"  1065184  3
61  1561  "DAL"  1065185  3
61  1561  "DAL"  1065186  3
61  1561  "DAL"  1065197  3
61  1561  "DAL"  1065198  3
61  1561  "DAL"  1083864  3
61  1561  "DAL"  1083865  3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:22:28.173

干得好：

```
create table transactions( ITEM_ID int, LOT_ID int, ORGN_CODE varchar(10), TRANS_ID int);

insert into transactions values(61, 1561,  'DAL', 992342 );
insert into transactions values(61, 1561,  'DAL', 992347 );
insert into transactions values(61, 1561,  'DAL', 1043941 );
insert into transactions values(61, 1561,  'BOS', 1061565 );
insert into transactions values(61, 1561,  'BOS', 1064997 );
insert into transactions values(61, 1561,  'BOS', 1064998 );
insert into transactions values(61, 1561,  'BOS', 1064999 );
insert into transactions values(61, 1561,  'BOS', 1065000 );
insert into transactions values(61, 1561,  'BOS', 1065036 );
insert into transactions values(61, 1561,  'BOS', 1065062 );
insert into transactions values(61, 1561,  'DAL', 1065063 );
insert into transactions values(61, 1561,  'DAL', 1065184 );
insert into transactions values(61, 1561,  'DAL', 1065185 );
insert into transactions values(61, 1561,  'DAL', 1065186 );
insert into transactions values(61, 1561,  'DAL', 1065197 );
insert into transactions values(61, 1561,  'DAL', 1065198 );
insert into transactions values(61, 1561,  'DAL', 1083864 );
insert into transactions values(61, 1561,  'DAL', 1083865 );

;WITH main as (select ROW_NUMBER() over (order by (select 0)) as sno,ITEM_ID,LOT_ID,ORGN_CODE,TRANS_ID from transactions)

,CTE as (
select sno,ITEM_ID,LOT_ID,ORGN_CODE,TRANS_ID,1 as seq from main where sno=1
union all
select t.sno,t.ITEM_ID,t.LOT_ID,t.ORGN_CODE ,t.TRANS_ID,CASE when c.ORGN_CODE=t.ORGN_CODE then seq else seq+1 end 
from main t inner join CTE c on  t.sno-1 =c.sno

)
SELECT * FROM CTE 
```

# excel - can someone suggest an idea on printing blanks in an xls file?

> ID：11660436
> 
> 赞同：0
> 
> 时间：2012-07-25T23:56:32.147
> 
> 标签：excel, matlab, file-io

still fairly new to matlab, picked up this data analysis code from someone and I had to add in new functions.

for one function I'm calculating the average of every 3 entries in one column and print the result on another column. so it would be something like this

```
1 -1
3 -1
5 =(1+3+5)/3
7 -1
1 -1
1 =(7+1+1)/3
4 -1 
```

what I wish to do is to print a blank in the cells that have -1\. my first thought was to just assign string values to my results instead of ints. this didn't work because I think there is a line of code in there somewhere that converts everything to ints.

another possible solution is just to reopen the file and loop through all cells replacing any -1's with blank strings, though I'm not sure how to do this, and it's inefficient.

as last resort, I guess I can always tell the user of this xls sheet to use the find/replace function in excel before processing it.

edit: partial code of the save part:

```
data = [data.time, data.avg_time'];
data2 = num2cell(data);
data3 = {'t', 'avg t'};
data = [data3; data2];
xlswrite([filename, '.xls'], data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:06:33.917

I misunderstood your question (i thought of replacing NaN's with -1, thanks Amro).

You can use this:

```
A(A(:,2)==-1,2)=NaN 
```

where A is the matrix you created first.

Hope it helps you :)

# facebook - 无法访问应用命名空间

> ID：11660437
> 
> 赞同：1
> 
> 时间：2012-07-25T23:56:36.400
> 
> 标签：facebook, namespaces

我使用错误的 FB 配置文件创建了我的应用程序的命名空间，因此我删除了该应用程序。现在我正在尝试重新创建命名空间，但它不会让我 - 它说它已经存在。它不存在！我删除了它！帮助！另一位用户发布了一个类似的问题，并得到一个答案，建议他选择一个不同的名字。我希望你会考虑我可以保证它不存在，因为我删除了它。是不是没有希望了？这不是一个可以用标点符号轻松更改的名称 - 这是一个商标产品名称。是的，我拥有这个商标。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:31:32.443

它可能会被临时缓存，您可以等待几天，它会被释放。

但是，更重要的一点是，app 命名空间意义不大。实际上，当用户访问您的应用程序时，他们会在地址栏中看到它的唯一一次。大多数用户不会通过直接输入应用程序的 URL 来找到您的应用程序，而是通过应用程序中心发现它，或者他们会单击 Facebook 上的书签、Facebook 或其他地方的搜索结果，他们会看到一个链接或在新闻提要中请求，否则他们会看到一个添加。

App Namespace 在 Open Graph 代码等中被大量使用，但这些都没有暴露给用户，只有开发人员。因此，必须使用与原始名称空间不同的名称空间几乎没有什么区别。

作为一个应用程序命名空间有多么重要的例子，您认为 Farmville 的应用程序命名空间是什么？`farmville`? 不，是`onthefarm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T21:42:22.657

删除在 FB 上创建的应用程序后，您将无法使用相同的命名空间重新创建它。这是FB中的一个错误。一旦我遇到了同样的问题，当我试图从 FB 社区帮助中心获得帮助时，我发现很多人都有同样的问题。但问题仍然没有解决。

# java - Dynamodb requestHandler 接受

> ID：11660441
> 
> 赞同：1
> 
> 时间：2012-07-25T23:57:22.210
> 
> 标签：java, amazon-web-services, amazon-dynamodb

在云中运行发电机插入时，我发现了一个神秘的异常，有关如何调试此类错误的任何帮助或线索？

**背景**

我正在运行的代码：

*   从我的本地机器运行时成功地将数据插入到 dynamodb 中，但是

*   通过 EMR 在云中运行 mapreduce 作业时，由于身份验证而突然失败。

*   使用 URL 端点进行身份验证。

我只是像这样创建凭据：

```
 client=new DynamoDBClient(new BasicAWSCredentials(
        "XXXX",
        "XXXXXXXXXXX));
   client.setEndpoint("https://dynamodb.eu-west-1.amazonaws.com"); 
```

**我得到的例外如下：**

```
Exception in thread "main" java.lang.NoSuchFieldError: requestHandlers
        at com.amazonaws.services.securitytoken.AWSSecurityTokenServiceClient.init(AWSSecurityTokenServiceClient.java:214)
        at com.amazonaws.services.securitytoken.AWSSecurityTokenServiceClient.<init>(AWSSecurityTokenServiceClient.java:160)
        at com.amazonaws.auth.STSSessionCredentialsProvider.<init>(STSSessionCredentialsProvider.java:73)
        at com.amazonaws.auth.SessionCredentialsProviderFactory.getSessionCredentialsProvider(SessionCredentialsProviderFactory.java:96)
        at com.amazonaws.services.dynamodb.AmazonDynamoDBClient.setEndpoint(AmazonDynamoDBClient.java:857)
        at com.amazonaws.services.dynamodb.AmazonDynamoDBClient.init(AmazonDynamoDBClient.java:262)
        at com.amazonaws.services.dynamodb.AmazonDynamoDBClient.<init>(AmazonDynamoDBClient.java:181)
        at com.amazonaws.services.dynamodb.AmazonDynamoDBClient.<init>(AmazonDynamoDBClient.java:142) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:15:18.170

这里的“真实”答案是，当我们尝试在现代环境中使用它们时，与最新或当前版本不匹配的 dynamodb 客户端可能会出现奇怪的反射/类加载错误。

*   AWS jars 存在于旧 EMR AMI 实例的类路径中，可能与调用非 EMR 服务的 hadoop 作业使用的正确（最新）AWS jars 冲突（在我们的例子中，例如 dynamodb）。

在我较旧的 AMI 实例上，我只是发出：

```
mv $HOME/lib/aws-java-sdk-1.1.1.jar $HOME/lib/aws-java-sdk-1.1.1.jar.old 
```

解决单节点集群上的问题。

* * *

此错误的根本原因是什么？是我使用的是较旧的 Ruby elastic-mapreduce 客户端，这导致在我的 EMR 云中创建较旧的 AMI 版本，在类路径上有过时的 aws-sdk jar。

# javascript - jQuery UI 没有正确加载？找不到对话框方法

> ID：11660444
> 
> 赞同：2
> 
> 时间：2012-07-25T23:57:32.657
> 
> 标签：javascript, jquery

我在此页面上的 jQuery UI 对话框有问题（仅限此页面）：

[http://www.satelliteinternet.com/](http://www.satelliteinternet.com/)

我不确定问题是什么，因为它正在网站上的所有其他页面上工作。我得到的错误是 $("#DealerSearch") 对象没有对话框方法。确实很奇怪。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T00:10:03.337

我在这里看到的唯一区别是 jquery 在您的主页上加载了两次，在其他页面上加载了一次。尝试删除从谷歌加载的

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

# r - R行索引作为字符串？

> ID：11660445
> 
> 赞同：1
> 
> 时间：2012-07-25T23:57:36.717
> 
> 标签：r, matrix, row, hashtable, dataframe

鉴于此数据框：

```
 b  a  d c
    3 -2  1  3 2
    4  1  1  3 2
    5  1  1  3 2 
```

是否可以像这样重命名行索引？

```
 b  a  d c
    xxx -2  1  3 2
    yyy  1  1  3 2
    zzz  1  1  3 2 
```

本质上，我没有数字索引，而是将字符串作为 id，就像哈希表一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:02:54.167

```
test<-data.frame(b=c(-2,1,1),a=c(1,1,1),d=c(3,3,3),c=c(2,2,2),row.names=c(3,4,5))

row.names(test)<-c('xxx','yyy','zzz')

> test
     b a d c
xxx -2 1 3 2
yyy  1 1 3 2
zzz  1 1 3 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:03:12.603

是的，像这样。

row.names(someDataFrame) = someVectorOfNames

# jquery - ajax 调用/javascript 中的语法错误未出现在 rails 应用程序中

> ID：11660446
> 
> 赞同：0
> 
> 时间：2012-07-25T23:57:43.107
> 
> 标签：jquery, ruby-on-rails, ajax, firebug, syntax-error

假设我的 js.erb 文件中有类似的内容。

```
$(div_id + <%= @line_num %>).html("<%=j render :partial => "quant_change_form" %>"); 
```

这很好，但如果我有一个语法错误，比如say（即方法不存在）：

```
$(div_id + <%= @line_num %>).htmlabcd("<%=j render :partial => "quant_change_form" %>"); 
```

我的编辑器中没有出现语法错误（我正在使用 RubyMine），并且在 Firebug 中也没有出现错误。如果不告诉我原因，它根本行不通。这不是您应该在rails中进行ajax调用的推荐方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:22:23.133

好吧，在做了更多搜索之后，我找到了一个合理的解决方案。出于某种原因，如果 js.erb 文件中有错误，它将默默地失败，并且在 Firebug 中不会显示错误。

此处概述了此问题的解决方案：

[http://www.alfajango.com/blog/rails-js-erb-remote-response-not-executing/](http://www.alfajango.com/blog/rails-js-erb-remote-response-not-executing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:02:06.163

1.  您不会收到语法错误，因为语法有效
2.  如果您没有收到 firebug 错误，则表示您的代码未执行并且`htmlabcd`是有效的方法名称。

# generics - GenericDao 与 Guice

> ID：11660447
> 
> 赞同：2
> 
> 时间：2012-07-25T23:58:01.617
> 
> 标签：generics, guice, typeliteral

我有一个接口`DAO<T>`和它的通用实现（`GenericDAO<T> implements DAO<T>`）。

我想做这样的事情：

```
public interface UserDao extends Dao<User> {
 // code
}

// module
bind(UserDao.class).to(GenericDao.class); 
```

可能吗？我设法自动向 GenericDao 注入了 Dao（我没有创建特定的 userdao 实现），但是，无法让它工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T19:49:07.773

您必须最终选择一个类型`T`才能实际使用泛型类。对于您最终使用的每种类型，您需要创建一个像这样的绑定（使用`Integer`for `T`）作为示例：

```
bind(new TypeLiteral<DAO<Integer>>(){})
   .to(new TypeLiteral<GenericDAO<Integer>>(){}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:43:52.650

我不认为你可以绑定`UserDao`到`GenericDao`. 因为`GenericDao`没有实现`UserDao`，尽管两者都有共同的祖先。如果`GenericDao`类具有您需要的所有方法，那么您不需要单独的`UserDao`类。您只需要 Jeff 所写的绑定：

```
bind(new TypeLiteral<DAO<User>>(){}).to(new TypeLiteral<GenericDAO<User>>(){}); 
```

然后，您的客户类将依赖`DAO<User>`，并且他们将收到`GenericDAO<User>`。如果您确实需要一些`User`特定于实体的操作，那么您应该扩展`GenericDao<User>`.

我写了一篇关于这个[主题](http://jamolkhon.blogspot.com/2012/07/generic-typesafe-dao-with-guice-and.html)的帖子。具体见帖子底部。

# batch-file - if else 在 .bat 脚本中循环

> ID：11660448
> 
> 赞同：-1
> 
> 时间：2012-07-25T23:58:06.897
> 
> 标签：batch-file

我想出了一种在 .bat 脚本中编写 if 条件的方法：

```
if %sample==1(
echo "successful"
) 
```

但是我该如何添加其他条件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:30:15.450

很简单。

```
 if %sample==1(
    echo "successful"
    ) else (
    echo "unsuccessful"
    ) 
```

顺便说一句，如果您要比较字符串，`%`则两边都需要 ( `%sample%`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:30:14.693

```
if %sample==1(
echo "successful"
) ELSE (
echo "failed"
) 
```

# javascript - 获取低于固定 div 的 Javascript

> ID：11660449
> 
> 赞同：0
> 
> 时间：2012-07-25T23:58:18.603
> 
> 标签：javascript, css

[http://www.haymsalomonhome.com/recovery.html](http://www.haymsalomonhome.com/recovery.html)

最右边的蓝色按钮是固定的`div`。我怎样才能让它漂浮在 Javascript 幻灯片之上？`z-index`在这种情况下不起作用...

在只有一张没有 Javascript 的图像的页面上，固定按钮确实浮动在其上方：

[http://www.haymsalomonhome.com/culture.html](http://www.haymsalomonhome.com/cultural.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:02:26.137

试试`z-index:9999`应该可以。幻灯片有`z-index:999`，所以它不会在 999 以下工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:03:18.527

您的 z-index 太低，幻灯片 div 的 z-index 为 999，而 1000 只会增加 z-index 更高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T00:03:22.993

这工作正常：

```
#fadeshow1 {
z-index: 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T00:04:49.187

您是否将 z-index 设置得足够高？幻灯片元素上的 z-index 是 999 和 1000。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T00:11:00.283

你必须使用这个：

```
#fixed-div {
    position: fixed;
    top: 320px;
    right: 0px;
    width: 123px;
    height: 20px;
    z-index: 9999;
} 
```

因为幻灯片有，`z-index:999`所以不会锻炼。`z-index:999;``#fixed-div`

# ios - 尝试向 iOS 设备发送推送通知 - 未收到它们

> ID：11660451
> 
> 赞同：1
> 
> 时间：2012-07-25T23:58:27.410
> 
> 标签：ios, ssl, push-notification, apple-push-notifications, devicetoken

到目前为止，我已经完成了以下工作： - 生成的证书和私钥为 .pem，也将它们放在一起。成功连接到 gateway.sandbox.push.apple.com。- 使用带有推送通知的临时配置文件进行开发，我有一个基本应用程序成功提示“你想允许推送通知吗”，所以这工作正常 - 获得了设备令牌 - 我已经尝试拉一些预将 SSLing 文件从 Internet 放入沙盒中，只是为了在开始开发之前查看是否可以让它们运行。

这些文件是此处发布的 php 文件：[http](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12) ://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12 。我实际上收到了“消息已成功发送”

此处发布的python文件：[Apple PNS（推送通知服务）示例代码](https://stackoverflow.com/questions/1052645/apple-pns-push-notification-services-sample-code)；我不得不将 Python 3 命令“fromhash”行编辑为 str(float.fromhash(...))

我还尝试使用 PyAPNs API：[https](https://github.com/simonwhitaker/PyAPNs) ://github.com/simonwhitaker/PyAPNs 。我仍然将 use_sandbox 设置为 true。

显然，我将设备令牌和公钥/证书更改为我自己的。遗憾的是，我还没有收到任何推送的通知，也没有收到任何具体的错误来告诉我原因。如果有人能提供一些启示，那将是惊人的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T21:23:13.860

根据我在 radesix 的回答中的评论，很抱歉我无法提供更多细节，因为我接触 iOS 开发已经一年了。

问题是我的临时配置文件将“aps-environment”键设置为开发人员，但由于某种原因，xcode 默认为“调试”。在编辑器中更改它解决了我的问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-26T04:01:25.203

使用城市飞艇（urbanairship.com）之类的服务，您将在几分钟内启动并运行它。从长远来看，您需要维护的也更少。

# python - 当目标是Linux时，Fabric windows客户端放置命令不转换目录分隔符

> ID：11660452
> 
> 赞同：1
> 
> 时间：2012-07-25T23:58:28.363
> 
> 标签：python, fabric

我有一个在 Windows 上运行的 fabfile。我正在使用 put(...) 命令移动目标操作系统为 Linux 的文件...

```
put('*', '/home/somedir/') 
```

结果是我进入了目标 Linux 系统......

```
/home/somedir/directoryFromWindows\\file 
```

所以fabric似乎没有意识到客户端是windows，但目标是Linux，并且目录分隔符没有从那个DOS \ 转换为Linux /

有没有我可以用来让它工作的技术？在我工作的地方，有些人在 Mac (unix) 上，但其他人在 Windows 上。fabfile put（或 course）可以找到 Mac -> Linux，但是从 Windows -> Linux 放置的 fabfile 存在上述问题。

有什么建议么？

更新：

好的，问题似乎在于 Windows 上的目录树是通过 svn checkout 创建的，所以到处都是 .svn 目录。Fabric 似乎正在逃逸。例如，如果我做一个

```
put('*' , /targetDir) 
```

织物正在构建一条路径

```
somepath\\.svn 
```

当它在树中的任何地方遇到 .svn 目录时。我一直在尝试使用 globbing 来否定所有具有 .svn 的文件和目录

```
put( !(.svn), /targetDir) 
```

有谁知道如何**正确**使用 globbing 以便排除树中的所有 .svn 目录？我认为这将解决问题

# macos - 在 MacOS X 上设置 Erlang 和 Yaws

> ID：11660462
> 
> 赞同：2
> 
> 时间：2012-07-25T23:59:24.323
> 
> 标签：macos, erlang, yaws

我试图在我的 Mac OS X 10.8 上运行 Yaws 1.94 并且它崩溃了。我正在运行 Erlang R15B01

我正在使用 macports 使用以下命令安装它：

```
sudo port selfupdate

sudo port install erlang +ssl yaws

export ERL_LIBS=/opt/local/lib/yaws/

sudo mkdir /etc/yaws/

sudo cp /opt/local/etc/yaws/yaws.conf.template /etc/yaws/yaws.conf 
```

当我运行 yaws 时，它崩溃了

```
$ sudo yaws -i --conf /etc/yaws/yaws.conf 
```

Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernelpoll:true]

```
Eshell V5.9.1  (abort with ^G)
1> 
=INFO REPORT==== 25-Jul-2012::16:36:20 ===
Yaws: Using config file /etc/yaws/yaws.conf

=INFO REPORT==== 25-Jul-2012::16:36:20 ===
yaws debug:Add path "/opt/local/var/yaws/ebin"

=INFO REPORT==== 25-Jul-2012::16:36:20 ===
yaws debug:Add path "/opt/local/lib/yaws/ebin"

=INFO REPORT==== 25-Jul-2012::16:36:20 ===
yaws debug:Add path "/opt/local/lib/yaws/examples/ebin"

=INFO REPORT==== 25-Jul-2012::16:36:20 ===
yaws debug:Running with id="default" (localinstall=false) 
Running with debug checks turned on (slower server) 
 to directory "/opt/local/var/log/yaws"

=INFO REPORT==== 25-Jul-2012::16:36:20 ===
    application: yaws
    exited: {shutdown,{yaws_app,start,[normal,[]]}}
    type: permanent
{"Kernel pid terminated",application_controller,"{application_start_failure,yaws,{shutdown,{yaws_app,start,[normal,[]]}}}"}

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller) ({application_start_failure,yaws,{shutdown,{yaws_app,start,[normal,[]]}}}) 
```

# 因此

当我检查周围是否有 yaws 进程（ps -efw | grep yaws）并且没有

我在这里想念什么？我希望能够在 Mac OS X 上使用 Yaws。谢谢

# 这是 sasl 的输出

```
$ sudo yaws -i --conf /etc/yaws/yaws.conf --erlarg '-boot start_sasl'
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:true]

=PROGRESS REPORT==== 26-Jul-2012::15:41:44 ===
      supervisor: {local,sasl_safe_sup}
         started: [{pid,<0.34.0>},
                   {name,alarm_handler},
                   {mfargs,{alarm_handler,start_link,[]}},
                   {restart_type,permanent},
                   {shutdown,2000},
                   {child_type,worker}]

=PROGRESS REPORT==== 26-Jul-2012::15:41:44 ===
      supervisor: {local,sasl_safe_sup}
         started: [{pid,<0.35.0>},
                   {name,overload},
                   {mfargs,{overload,start_link,[]}},
                   {restart_type,permanent},
                   {shutdown,2000},
                   {child_type,worker}]

=PROGRESS REPORT==== 26-Jul-2012::15:41:44 ===
      supervisor: {local,sasl_sup}
         started: [{pid,<0.33.0>},
                   {name,sasl_safe_sup},
                   {mfargs,
                       {supervisor,start_link,
                           [{local,sasl_safe_sup},sasl,safe]}},
                   {restart_type,permanent},
                   {shutdown,infinity},
                   {child_type,supervisor}]

=PROGRESS REPORT==== 26-Jul-2012::15:41:44 ===
      supervisor: {local,sasl_sup}
         started: [{pid,<0.36.0>},
                   {name,release_handler},
                   {mfargs,{release_handler,start_link,[]}},
                   {restart_type,permanent},
                   {shutdown,2000},
                   {child_type,worker}]

=PROGRESS REPORT==== 26-Jul-2012::15:41:44 ===
     application: sasl
      started_at: nonode@nohost

=PROGRESS REPORT==== 26-Jul-2012::15:41:44 ===
      supervisor: {local,yaws_sup}
         started: [{pid,<0.43.0>},
                   {name,yaws_log},
                   {mfargs,{yaws_log,start_link,[]}},
                   {restart_type,permanent},
                   {shutdown,5000},
                   {child_type,worker}]

=PROGRESS REPORT==== 26-Jul-2012::15:41:44 ===
      supervisor: {local,yaws_sup}
         started: [{pid,<0.44.0>},
                   {name,yaws_trace},
                   {mfargs,{yaws_trace,start_link,[]}},
                   {restart_type,permanent},
                   {shutdown,5000},
                   {child_type,worker}]
Eshell V5.9.1  (abort with ^G)
1> 
=INFO REPORT==== 26-Jul-2012::15:41:44 ===
Yaws: Using config file /etc/yaws/yaws.conf

=INFO REPORT==== 26-Jul-2012::15:41:44 ===
yaws debug:Add path "/opt/local/var/yaws/ebin"

=INFO REPORT==== 26-Jul-2012::15:41:44 ===
yaws debug:Add path "/opt/local/lib/yaws/ebin"

=INFO REPORT==== 26-Jul-2012::15:41:44 ===
yaws debug:Add path "/opt/local/lib/yaws/examples/ebin"

=INFO REPORT==== 26-Jul-2012::15:41:44 ===
yaws debug:Running with id="default" (localinstall=false) 
Running with debug checks turned on (slower server) 
Logging to directory "/opt/local/var/log/yaws"

=CRASH REPORT==== 26-Jul-2012::15:41:44 ===
crasher:
initial call: yaws_server:init/1
pid: <0.45.0>
registered_name: []
exception exit: {{badmatch,{error,enotdir}},
                 [{yaws_server,setup_dirs,1,
                               [{file,"yaws_server.erl"},{line,525}]},
                  {yaws_server,init2,5,
                               [{file,"yaws_server.erl"},{line,200}]},
                  {gen_server,init_it,6,
                              [{file,"gen_server.erl"},{line,304}]},
                  {proc_lib,init_p_do_apply,3,
                            [{file,"proc_lib.erl"},{line,227}]}]}
  in function  gen_server:init_it/6 (gen_server.erl, line 328)
ancestors: [yaws_sup,<0.41.0>]
messages: []
links: [<0.42.0>]
dictionary: [{start_time,{{2012,7,26},{15,41,44}}},
              {gc,{gconf,"/opt/local/lib/yaws",false,102,
                         "/opt/local/var/log/yaws",
                         ["/opt/local/var/yaws/ebin",
                          "/opt/local/lib/yaws/ebin",
                          "/opt/local/lib/yaws/examples/ebin"],
                         [],30000,nolimit,400,1000000,8000,nolimit,[],
                         10240,[],1000000,0,
                         ["/opt/local/lib/yaws/include",
                          "/opt/local/lib/yaws/examples/include"],
                         "/usr/bin/php-cgi","Yaws 1.94","default",false,
                         [],yaws_session_server,8}}]
trap_exit: true
status: running
heap_size: 2584
stack_size: 24
reductions: 40977
neighbours:

=SUPERVISOR REPORT==== 26-Jul-2012::15:41:44 ===
 Supervisor: {local,yaws_sup}
 Context:    start_error
 Reason:     {{badmatch,{error,enotdir}},
              [{yaws_server,setup_dirs,1,
                            [{file,"yaws_server.erl"},{line,525}]},
               {yaws_server,init2,5,[{file,"yaws_server.erl"},{line,200}]},
               {gen_server,init_it,6,[{file,"gen_server.erl"},{line,304}]},
               {proc_lib,init_p_do_apply,3,
                         [{file,"proc_lib.erl"},{line,227}]}]}
 Offender:   [{pid,undefined},
              {name,yaws_server},
              {mfargs,
                  {yaws_server,start_link,
                      [{env,true,false,false,
                           {file,"/etc/yaws/yaws.conf"},
                           false,false,"default"}]}},
              {restart_type,permanent},
              {shutdown,120000},
              {child_type,worker}]

=INFO REPORT==== 26-Jul-2012::15:41:44 ===
application: yaws
exited: {shutdown,{yaws_app,start,[normal,[]]}}
type: permanent
{"Kernel pid terminated",application_controller,"{application_start_failure,yaws,{shutdown,{yaws_app,start,[normal,[]]}}}"}

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller) ({application_start_failure,yaws,{shutdown,{yaws_app,start,[normal,[]]}}}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:01:50.663

查看崩溃消息中的错误`exception exit: {badmatch,{error,enotdir}}`。这看起来像 yaws 期望在某个地方找到一个目录并找到其他东西。我建议您查看`525`文件中的行`yaws_server.erl`。你甚至可以放一个`io:format/2`，然后看看 yaws 在那个时候得到了什么。它可能是格式错误的目录名称，可能包含空格。您还可以尝试检查其用于启动的 conf 文件，并查看`PATHS`服务器想要用作`docroot`. 此外，检查 yaws 安装目录的权限，以及`Directories`yaws 想要查看的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:58:58.993

我不确定 Erlang 和 Yaws 构建的起源或可行性，可以通过 macports 检索，所以我不知道它们是否真的有效。就我个人而言，我不使用 macports，因为我从那里获得的其他软件存在问题。

要尝试获取有关 Yaws 安装问题的更多信息，请像这样启动 Yaws：

```
sudo yaws -i --conf /etc/yaws/yaws.conf --erlarg '-boot start_sasl' 
```

希望`sasl`能给我们更多关于潜在问题的信息。

# .net - FlowLayoutPanel 可以自动适应可调整大小的面板吗？

> ID：11660464
> 
> 赞同：1
> 
> 时间：2012-07-25T23:59:28.333
> 
> 标签：.net, winforms, flowlayoutpanel

我正在尝试创建一个表单，我可以最轻松地将其描述为像资源管理器视图一样，并排有两个面板（左侧是文件夹列表，右侧显示所选文件夹中的文件）。

左侧面板是固定宽度的，并停靠在表单的左侧。它工作正常，在这里不相关。

右侧面板位于左侧面板的右侧，填充表单的其余部分，并锚定顶部、左侧、底部和右侧，以便在调整大小时继续占据整个表单除了左侧面板占据的部分。它还`AutoScroll`设置为`True`，每当内容太大而无法容纳时，它会自动显示滚动条。那部分也很好用。

因为我想在不同的时间在右侧面板中显示不同的东西，所以我创建了一个普通`Panel`的容器，并为每种不同类型的内容使用子面板。任何时候都只能看到这些子面板中的一个。

我（有时）想要在右侧面板中显示的一件事是非常类似于资源管理器中的“图标”视图 - 即一堆文件图标，这`FlowLayoutPanel`听起来很完美，因为我确实希望它们从左到右排列，然后根据需要换行到新行。

我原以为这正是 a`FlowLayoutPanel`的设计目的，但我无法让它工作！[我将 的`Dock`属性设置为`FlowLayoutPanel`，`Fill`以便它使用父级中的所有可用空间`Panel`。]实际发生的是它只在一行中显示所有图标，而从不包装它们。我最终在父级上有一个水平滚动条，`Panel`因为`FlowLayoutPanel`它不适合。

我认为这可能是因为`Panel`包含的父`FlowLayoutPanel`级没有固定的大小（因为它会随表单增长和缩小），所以我猜当`FlowLayoutPanel`决定它可以承受的宽度时，它决定它可以是随心所欲。但是，这不是很有帮助。

有什么办法可以说服`FlowLayoutPanel`它应该只和它的父级一样宽`Panel`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:05:45.647

首先确保您`WrapContents`启用了 FLP 的选项。

如果您已经这样做了，我的猜测是`AutoScroll`启用 FLP 的父面板选项是原因。这与 FLP 的所需包装行为不兼容。FLP 不会换行，除非它不能将所有内容都放在一行中。通过允许其父面板滚动，FLP 将始终能够将所有内容放在一行中。关闭父面板`AutoScroll`，它应该可以工作。

# asp.net - 在 ASP SessionStateProvider 中跟踪并列出用户的所有会话

> ID：11660466
> 
> 赞同：2
> 
> 时间：2012-07-25T23:59:43.027
> 
> 标签：asp.net, asp.net-mvc, session, azure, session-state

我想跟踪并列出登录到我网站的个人的所有活动会话。说我可以为此目的使用或扩展 ASP.NET 的 SessionProvider 是否正确？

我的意图是为此目的编辑或增强现有的 Azure 表会话提供程序。哪些方法会被可靠地（或不可靠地）调用来跟踪谁是活跃的，谁不是活跃的？

我应该一起忽略会话提供程序并实现我自己的逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:49:01.903

您应该查看[Azure Shared Cache](http://msdn.microsoft.com/en-us/library/windowsazure/gg278339)（*当前处于预览*状态）或[Azure Cache](http://msdn.microsoft.com/en-us/library/windowsazure/gg185682) for **ASP.NET Session State**。至于跟踪谁当前在线的会话 - 您可以使用一些滑动到期和[DataCacheTag](http://msdn.microsoft.com/en-us/library/windowsazure/hh339927.aspx)为每个页面请求（或[Global.Session_Start ）使用](http://msdn.microsoft.com/en-US/library/ee255113%28v=bts.10%29)[DataCache](http://msdn.microsoft.com/en-us/library/microsoft.applicationserver.caching.datacachetag%28v=ws.10%29.aspx)。

要查询哪些用户会话处于活动状态 - 您可以使用[`GetObjectsByTag`](http://msdn.microsoft.com/en-us/library/windowsazure/hh914155.aspx). 对于标签本身 - 您可以只使用用户 ID。

# security - 密码重置模型如何工作？

> ID：11660468
> 
> 赞同：0
> 
> 时间：2012-07-25T23:59:52.963
> 
> 标签：security, email

当用户不记得密码时，电子邮件提供商使用秘密问题作为重置用户密码的过程的一部分，对吗？一般来说，这种安全模型是如何工作的？安全问题如何识别用户？

通常：重置密码模型如何工作？它的架构是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:22:58.853

基本上在注册时，用户选择并回答保存在数据库中的问题。

当用户忘记他或她的密码时，他们会被问到这些问题，其想法是只有用户会知道这些问题的答案。如果他们回答正确，则可以相信他们是实际用户，并且可以发出新密码。

# java - 从 javascript onClick 超链接获取内容

> ID：11660469
> 
> 赞同：0
> 
> 时间：2012-07-25T23:59:52.660
> 
> 标签：java, javascript, jsoup

我正在尝试从一个网站获取内容，该网站在超链接中使用“onClick”而不是“href”，因此尽管您看到的是页面，但 url 始终相同。

[http://www.sas.ul.pt/index.php](http://www.sas.ul.pt/index.php)

这是网站，我想要获取的内容在“Alimentação”>“Estudantes”内。

```
<a href="#" onclick="return go('','4;02');" title="Estudantes">Estudantes</a> 
```

Jsoup可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:31:16.730

```
Jsoup.connect(url).data("nav", "index@4;02", "opt", "4;02", "chvP", "127").post(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:50:09.547

可以通过jsoup获取onclick的值

[http://jsoup.org/cookbook/extracting-data/attributes-text-html](http://jsoup.org/cookbook/extracting-data/attributes-text-html)

只需更换线路

字符串链接Href = link.attr("href"); 使用此 String handler = link.attr("onclick");

但是在那之后就没有办法构造 URL，除非你能以某种方式将幻数映射到 4,02

# python - Markdown 库未安装/urllib ImportError

> ID：11660476
> 
> 赞同：2
> 
> 时间：2012-07-26T00:01:27.450
> 
> 标签：python, django, python-3.x, markdown

我正在尝试将 Markdown 与 Django 一起使用，如[本教程](http://freewisdom.org/projects/python-markdown/Django)所示。我已经使用 Django 在 Django 中安装和配置了库`django.contrib.markup`，但是当我使用标记转到页面时，我得到：

```
Error in 'markdown' filter: The Python markdown library isn't installed. 
```

然后，通过解释器我尝试运行`import markdown`，这会导致以下回溯：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/site-packages/markdown/__init__.py", line 43, in <module>
    from .treeprocessors import build_treeprocessors
  File "/usr/lib/python2.7/site-packages/markdown/treeprocessors.py", line 2, in <module>
    from . import inlinepatterns
  File "/usr/lib/python2.7/site-packages/markdown/inlinepatterns.py", line 47, in <module>
    from urllib.parse import urlparse, urlunparse
ImportError: No module named parse 
```

然而，Python 文档告诉我，在 Python 3 中`urlparse`已重命名为`urllib.parse`

顺便说一句，更改那一行会导致更多的导入错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:18:25.767

不知道这是怎么发生的，但重新安装 Markdown 有效。回想起来，我可能应该先尝试一下。

# ruby-on-rails - 将 Postgresql 数据库与 Ruby 应用程序集成

> ID：11660478
> 
> 赞同：0
> 
> 时间：2012-07-26T00:01:57.107
> 
> 标签：ruby-on-rails, database, postgresql

我刚刚开始构建我的第一个 Ruby on Rails 应用程序，为了将它托管在 heroku 上，我更改了我的应用程序中的数据库设置。我通过更改应用程序中的 database.yml 文件来做到这一点。这就是我现在所拥有的。

```
# SQLite version 3.x
#   gem install sqlite3-ruby (not necessary on OS X Leopard)
development:
  adapter:postgresql
  encoding:unicode
  database:dezirus_dev
  pool:5
  host:localhost
  username:postgres
  password:
  port:5432
 # timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter:postgresql
  encoding:unicode
  database:dezirus_test
  pool:5
  username:postgres
  password:
  host:localhost
  port:5432

production:
  adapter:postgresql
  encoding:unicode
  database:dezirus
  pool:5
  username:postgres
  password:
  host:localhost
  port:5432 
```

当我尝试耙数据库时，这是我得到的错误。

```
RAHMAN@IMLDEV1-LT ~/rails-projects/dezirus
$ rake db:migrate --trace
rake aborted!
no such file to load -- pg
/usr/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `require'
/usr/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `require'
/usr/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `each'
/usr/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `require'
/usr/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `each'
/usr/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `require'
/usr/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler.rb:122:in `require'
/home/RAHMAN/rails-projects/dezirus/config/application.rb:7
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
/home/RAHMAN/rails-projects/dezirus/Rakefile:4
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `load_rakefile'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `run'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/bin/rake:33
/usr/bin/rake:23:in `load'
/usr/bin/rake:23 
```

请注意，数据库是使用 postgreSQL 预先构建的，我已经设置了表、主键和外键。我不确定这是否是它拒绝工作的原因。任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:23:32.353

首先在你的电脑上安装PG，[http://www.postgresql.org/download/](http://www.postgresql.org/download/)

尝试用PGAdmin3（自带的DB管理员）打开，新建一个BD

接下来在你的 gem 文件中添加这个

```
gem 'pg' 
```

在终端运行捆绑安装。

在这里我给你发一个我的 DB.yml 的例子

```
development:
  adapter: postgresql
  encoding: unicode
  database: billy
  pool: 5
  username: postgres
  password: 
```

您可能需要将 pg_hba.conf 配置为在您的 localhost 中无需密码即可登录。

欢呼

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:24:53.073

将 gem 'pg' 添加到您的 gem 文件并运行

```
bundle install 
```

然后去这里[http://www.postgresql.org/download/](http://www.postgresql.org/download/)并将数据库安装到您的机器上，以便在本地运行您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T21:27:19.137

嘿伙计们，我终于找到了解决我遇到的不同问题的方法。事实证明 cygwin pg gem 不支持我的 PostgreSQL 版本，我使用了 ruby​​ 安装程序，它毫不犹豫地安装了。然后我不得不将这行代码添加到 boot.rb 文件中

```
require 'yaml'
YAML::ENGINE.yamler = 'syck' 
```

YML 文件也需要看起来像这样。

```
development:
  adapter: postgresql
  encoding: unicode
  database: dezirus_dev
  pool: 5
  username: postgres
  password:
# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: postgresql
  encoding: unicode
  database: dezirus_test
  username: postgres
  password:
production:
  adapter: postgresql
  encoding: unicode
  database: dezirus
  username: sudo
  password: ******* 
```

然后我运行了 rake db:migrate 命令，瞧 :)

# mysql - 致命错误：在第 7 行对非对象调用成员函数 query()

> ID：11660481
> 
> 赞同：1
> 
> 时间：2012-07-26T00:02:14.377
> 
> 标签：mysql, database, php

```
<center>
<?php

$lasttime = $_SERVER['REQUEST_TIME'] - 3600*24*30; // 1 month 
```

调用数据库？

```
$q = $db->query('SELECT * from votes where lasttime > '.$lasttime);
if($q->num_rows>0)
{
$users = array();
while($r = $q->fetch_object())
{
  $users[$r->username] += 1;
}
if(!empty($users))
{
foreach($users as $user => $t)
{
echo"<br /><strong>$user</strong> has voted $t times";
}
} 
```

如果没有投票，则没有投票记录。

```
}else{
echo"NO VOTE LOGS YET";
}

?>
</center> 
```

据我了解，它无法登录到 MYSQL 数据库？我不太确定该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:06:54.853

`$db`不是对象，表示连接失败。您应该检查连接是否已建立。假设您使用的是 mysqli：[阅读此](http://www.php.net/manual/en/mysqli.quickstart.connections.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:23:10.510

在第 7 行之前添加...

```
$db = new mysqli('host','user','password','dbname'); 
```

# mysql - 为每个用户在两个表中选择 SUM

> ID：11660482
> 
> 赞同：0
> 
> 时间：2012-07-26T00:02:16.507
> 
> 标签：mysql, math, join, sum

我有一个带有 users 表、credit_purchase 表和 credit_spend 表的应用程序。我正在尝试获取用户当前拥有的信用额度。

信用表如下：

credit_purchase

```
+----+---------+-------+---------------------+
| id | user_id | coins | timestamp           |
+----+---------+-------+---------------------+ 
```

credit_spend

```
+----+---------+-------+---------------------+
| id | user_id | coins | timestamp           |
+----+---------+-------+---------------------+ 
```

我要做的是为每个用户选择 SUM(credit_purchase.coins) - SUM(credit_spend.coins)。现在我有这样的事情：

```
SELECT users.*, COALESCE(SUM(credit_purchase.coins) - SUM(credit_spend.coins), 0) 
FROM users 
LEFT JOIN credit_purchase ON users.id = credit_purchase.user_id 
LEFT JOIN credit_spend ON users.id = credit_spend.user_id 
GROUP BY users.id 
```

但是，结果不是正确的数字。似乎是对购买进行了适当的求和，但是将支出中的 SUM 乘以购买次数。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:08:17.977

试试这个：

```
SELECT  users.*, 
        COALESCE(SUM(credit_purchase.coins) - SUM(credit_spend.coins), 0) 
FROM    users 
            LEFT JOIN credit_purchase
                    ON users.id = credit_purchase.user_id 
            LEFT JOIN credit_spend 
                    ON users.id = credit_spend.user_id 
GROUP BY users.id 
```

# javascript - 从数组中删除一个对象？

> ID：11660484
> 
> 赞同：4
> 
> 时间：2012-07-26T00:02:22.427
> 
> 标签：javascript, arrays, node.js, object

> **可能重复：**
> [JavaScript 数组删除元素](https://stackoverflow.com/questions/500606/javascript-array-delete-elements)

所以，在javascript中，我有这个设置：

```
global.menu = [{
   name: item1,
   price: price1,
   message: message1
},
{
   name: item2,
   price: price2,
   message: message2
},
{
   name: item3,
   price: price3,
   message: message3
}]; 
```

我的问题很简单，但是如何从这个数组中删除一个对象呢？
要选择一个对象，我使用这个命令：

```
global.HandleMenu = function (b) {
    var c = menu.filter(function (d) {
        return d.name == b;
    });
    c.forEach(function (d) {
        Say(d.message);
    });
}; 
```

是的。我可以在 forEach 函数中添加 delete d; 或 d.remove() 吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:07:53.420

假设您要删除的项目的名称在一个名为 的变量中`name`，例如

```
for (var i = 0; i = global.menu.length - 1; i--) {
   var current = global.menu[i];
   if (current.name === name) global.menu.splice(i, 1);
} 
```

应该管用。注意我不是在测试空值；但这是一般的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T00:05:16.897

使用过滤器并重新分配

```
global.menu = global.menu.filter(function(a){ return a.item != "be delete" }; 
```

# unix - 在我的 FreeBSD 服务器上查找所有粘滞位文件

> ID：11660489
> 
> 赞同：2
> 
> 时间：2012-07-26T00:02:48.383
> 
> 标签：unix, freebsd

我需要获取 FreeBSD 服务器上所有设置了粘性位的文件（无目录）的列表。我相当确定这是通过 find 完成的，但我无法获得正确的格式。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:04:56.540

这是一个简单的：

```
find . -type f -perm -1000 -print 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:12:25.440

这应该这样做：

```
find . -type f -perm -1000 -print 
```

# javascript - 当我将文件加载到 div 中时，div 会向下跳

> ID：11660494
> 
> 赞同：1
> 
> 时间：2012-07-26T00:03:06.210
> 
> 标签：javascript, jquery, html, css

我有一个看起来像这样的页面：

```
<body>
<div class="pollid" >
<select class="pollid" id="pollid" size="[2]" >
 [options]
</select></div>
<div class="seperator"></div>
<div class="options">
<select class="options" id="options" disabled="disabled" size="2">
<option id="deadoption">Select a poll to enable this box.</option>
</select></div>
<div class="seperator"></div>
<div class="options2" id="options2">
</div>
</body> 
```

我也有一点jQuery，只需选择第二个div的特定选项：

```
$("#options2").load("ajax/newOption.html"); 
```

newOption.html 看起来像这样：

```
<input type="text" id="newopt" label="Option: " />
<button id="submit" type="button" value="Submit" /> 
```

我拥有的 CSS 如下所示：

```
select {
height: 100%;
width: 100%;
}

div.pollid  {
height: 100%;
width: 30%;
display: inline-block;
}

div.options {
height: 100%;
width: 30%;
display: inline-block;
}

div.options2 {
height: 100%;
width: 30%;
display: inline-block;
}

.seperator {
height: 100%;
width: 3%;
display: inline-block;
} 
```

现在，这行得通。但是，当我单击加载该页面的选项时，div 会向下跳，以便输入的底部位于我的屏幕底部。这不是我想要的。我希望 div 保持原样，占据屏幕的 30%。我根本不希望屏幕滚动，一旦加载了html，它就会滚动。我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:52:31.940

经过实验，我找到了解决方案。看起来，出于某种原因，在这些 div 中的任何一个中都放置了除`<select size="x>1">`使其跳下之外的任何内容，并为它们提供了`vertical-align:top`修复该问题的属性。

# python - 使用元组和 operator.itemgetter 对字典进行排序

> ID：11660499
> 
> 赞同：0
> 
> 时间：2012-07-26T00:03:25.073
> 
> 标签：python, numpy

我在我的最后一个里程碑准备合适的输出之前。我认为它很简单，但我的方法不起作用：

给定一个字典

```
mydict = {x1: (val1, dist1, (lat1, lon1)), x2: (val2, dist2, (lat2, lon2)), ...} 
```

我尝试在数组中以嵌套方式对其进行排序，首先使用“值”，如果等于，则对“dist”进行排序。

但是，我做了功课并尝试使用这种方式：

```
import operator
s = sorted(mydict.iteritems(), key=operator.itemgetter(1)) 
```

问题是，如果排序方法适用于元组，那将非常容易，因为它的顺序已经正确。

不幸的是我得到：

> “列表”对象不可调用

你有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T00:12:06.300

您是否可以`sorted`用列表值覆盖名称？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:16:18.660

> 问题是，如果排序方法适用于元组，那就很容易了

`sorted()`在元组列表上工作得很好，在这种情况下，它使用[字典排序](http://en.wikipedia.org/wiki/Lexicographical_order)。

> (a,b) ≤ (a′,b′) 当且仅当 a < a′ 或 (a = a′ and b ≤ b′)。

这可以扩展到任意数量的维度。

```
>>> sorted([(10, 1), (5, 3), (6, 5), (3, 2), (5, 10)])
[(3, 2), (5, 3), (5, 10), (6, 5), (10, 1)] 
```

# jquery - jQuery Ajax 帖子

> ID：11660502
> 
> 赞同：1
> 
> 时间：2012-07-26T00:04:13.683
> 
> 标签：jquery, ajax, post

当我在 1.2 mb 上发布 base64 字符串时 apache tomcat 给出错误：“客户端发送的请求在语法上不正确” 当它低于 1.2 mb 时它工作正常，我在服务器端接收数据。

是否有尺寸限制，我将如何解决这个问题？任何帮助将不胜感激。

非常感谢 ：）

```
 $.ajax({ type: 'POST',
        url: 'http://localhost/testServer/image',
        data: {imageData : result} ,
        async: true,
        success: function(data) {

        },
        error: function (xhr, textStatus, errorThrown) {
           alert(xhr.responseText);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:06:41.817

HTTP 规范没有对帖子施加特定的大小限制。它们通常会受到 Web 服务器或用于处理提交的编程技术的限制。

* * *

> 在 httpd.conf 添加这一行
> 
> `LimitRequestBody<filesize>`
> 
> LimitRequestBody 指令指定请求正文中允许的从 0（表示无限制）到 >2147483647 (2GB) 的字节数
> 
> 更多信息，请参考网址：
> 
> [http://httpd.apache.org/docs/mod/core.html#limitrequestbody](http://httpd.apache.org/docs/mod/core.html#limitrequestbody)
> 
> 来源：[这里](http://forums.cpanel.net/f5/change-file-size-limit-apache-13874.html)

# css - 如何在spring 3中的css文件中使用字体

> ID：11660507
> 
> 赞同：3
> 
> 时间：2012-07-26T00:04:34.380
> 
> 标签：css, spring-mvc, font-face

我正在尝试在 style.css 文件中使用字体。我已经使用 Spring 3 将我的样式字体 .ttf 文件放入资源中。当使用 font-faces 时，我需要将路径放入 .ttf 文件，如下所示：

```
@font-face{
       font-family: NosiferCaps-Regular;
       src: url('../fonts/1942/1942.ttf');
}

.myClass{
     font:39px/1.2 NosiferCaps-Regular, verdana ;
     text-shadow:2px 2px 9px gray;
} 
```

那么，如何使用 Spring 在 style.css 文件中引用“src: url('../fonts/1942/1942.ttf')”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T23:03:38.890

您必须在 servlet-context.xml 文件中映射资源文件夹，如下所示：

```
<!-- Handles HTTP GET requests for /resources/** by efficiently serving 
    up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" /> 
```

根据您的资源映射路径，您可以按如下方式引用字体：

```
@font-face
{
    font-family: NosiferCaps-Regular;
    src: url('http://localhost:8080/{app_name}/resources/fonts/1942/1942.ttf');
} 
```

请根据您的应用替换 {app_name}。我正在使用 otf 字体，它可以工作。

# java - 在 Android 中缩放图像无法正常工作

> ID：11660513
> 
> 赞同：0
> 
> 时间：2012-07-26T00:05:24.017
> 
> 标签：java, android, xml, eclipse, imageview

我有一个长的垂直图像（224x1600）。我希望它适合图像宽度，并垂直滚动。它需要可滚动。我已经尝试了一切，但无法让它工作：\

这是我所拥有的

```
<ScrollView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <LinearLayout
                    android1:id="@+id/tab3"
                    android1:layout_width="fill_parent"
                    android1:layout_height="fill_parent" >

                    <ImageView
                        android:id="@+id/imageView1"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:src="@drawable/tiles" />
                </LinearLayout>
            </ScrollView> 
```

第二个问题是：有没有办法防止图像缩放？图像是 224x1632 并且在我的银河系上以这种方式显示。在 Nexus 7（更大的屏幕但更低的 DP）上，它达到 199x1440。88% 的奇怪缩放比例。我可以防止这种情况吗？我需要它在所有机器上显示 224x1632 并相应地缩放宽度。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:15:52.163

它应该工作......我认为问题是你有`android1:`并且它应该是`android:`

就像是：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tab3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
           android:id="@+id/imageView1"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:src="@drawable/tiles" />

    </LinearLayout>
</ScrollView> 
```

至于第二个问题，您可以尝试使用`android:minWidth=""`并`android:minHeight=""`查看是否可以解决您的问题。

**编辑：**尝试`android:scaleType="fitCenter"`它会按原样显示图像。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:47:31.297

如果你需要完全避免缩放，你应该把你的drawables放在`res/drawable-nodpi`文件夹中。请记住，不同密度的设备上的物理尺寸会有很大差异，但只要您了解风险，那就是您应该追求的解决方案。

关于您的第一个问题，我倾向于认为您需要在代码中进行一些手动工作，但是尽管我现在无法对其进行测试，但这也可能有效：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:src="@drawable/tiles"
        />
</ScrollView> 
```

试一试，让我知道情况如何。

# javascript - Javascript继承构造函数

> ID：11660517
> 
> 赞同：-1
> 
> 时间：2012-07-26T00:06:24.697
> 
> 标签：javascript, inheritance, constructor

正如我可以做的那样让孩子继承父母而不改变孩子代码构造函数，如下所示：

```
var parent = function(params){
    this.params = params;
}

var child = function(){}

var childObj = new child({one:1,two:2});

console.log(childObj.params) //should show params 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:18:30.370

你不能。这将如何工作，您传递给函数的参数（对它们没有任何作用）不能从外部获得......

```
function child(p) {
    parent.call(this, p);
} 
```

在不修改构造函数函数的情况下，您唯一可以做的就是手动设置它们：

```
var childObj = new child();
childObj.params = {one:1,two:2};

// or, if you want all child objects to inherit them:

child.prototype.params = {one:1,two:2}; 
```

# performance - 分析 Haskell 函数的运行时效率

> ID：11660520
> 
> 赞同：2
> 
> 时间：2012-07-26T00:06:40.063
> 
> 标签：performance, haskell, optimization

[我在 Haskell 中对问题 3](http://projecteuler.net/problem=3)有以下解决方案：

```
isPrime :: Integer -> Bool
isPrime p = (divisors p) == [1, p]

divisors :: Integer -> [Integer]
divisors n = [d | d <- [1..n], n `mod` d == 0]

main = print (head (filter isPrime (filter ((==0) . (n `mod`)) [n-1,n-2..])))
  where n = 600851475143 
```

但是，它需要的时间超过了 Project Euler 给出的分钟限制。那么如何分析我的代码的时间复杂度以确定我需要在哪里进行更改呢？

**注意：**请不要**发布**替代算法。我想自己弄清楚这些。现在我只想分析我拥有的代码并寻找改进它的方法。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T05:18:07.127

两件事情：

1.  任何时候你看到一个列表推导（就像你在 中一样`divisors`），或者等效地，列表上的一些系列`map`和/或`filter`函数（就像你在 中一样`main`），将其复杂性视为 Θ(n)，就像你对待 a `for`-loop 在命令式语言中。

2.  这可能不是您所期望的那种建议，但我希望它会*更有*帮助：Project Euler 的部分目的是鼓励您思考各种数学概念的定义，*以及*许多不同的算法可能正确地满足这些定义。

好的，第二个建议有点太模糊了......我的意思是，例如，你实现的方式`isPrime`实际上是教科书的定义：

```
isPrime :: Integer -> Bool
isPrime p = (divisors p) == [1, p]
-- p is prime if its only divisors are 1 and p. 
```

同样，您的实现也`divisors`很简单：

```
divisors :: Integer -> [Integer]
divisors n = [d | d <- [1..n], n `mod` d == 0]
-- the divisors of n are the numbers between 1 and n that divide evenly into n. 
```

这些定义读起来都很好！另一方面，从算法上讲，他们太天真了。举个简单的例子：数字 10 的除数是多少？`[1, 2, 5, 10]`. 在检查时，您可能会注意到几件事：

*   1 和 10 是成对的，2 和 5 是成对的。
*   除了 10 本身，10 的任何除数都不能大于 5。

您可能可以利用这些属性来优化您的算法，对吧？因此，无需查看您的代码——只需使用铅笔和纸——尝试为`divisors`. 如果你明白了我的提示，`divisors n`应该及时运行`sqrt n`。随着您的继续，您会发现更多沿着这些方向的机会。您可能决定以完全不使用您的`divisors`功能的方式重新定义所有内容......

希望这有助于为您提供解决这些问题的正确心态！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-26T03:28:12.550

让我们从顶部开始。

```
divisors :: Integer -> [Integer]
divisors n = [d | d <- [1..n], n `mod` d == 0] 
```

现在，让我们假设某些事情很便宜：递增数字是 O(1)，执行`mod`操作是 O(1)，比较`0`是 O(1)。（这些是错误的假设，但到底是什么。）该`divisors`函数循环遍历从`1`到的所有数字`n`，并对每个数字执行 O(1) 运算，因此计算完整输出为 O(n)。请注意，当我们说 O(n) 时，n 是*输入数字*，而不是输入的*大小*！由于存储 n 需要 m=log(n) 位，因此该函数在输入大小上需要 O(2^m) 时间来产生完整的答案。我将始终使用 n 和 m 来表示下面的输入数和输入大小。

```
isPrime :: Integer -> Bool
isPrime p = (divisors p) == [1, p] 
```

在最坏的情况下，`p`是素数，它强制`divisors`产生其全部输出。与静态已知长度列表的比较是 O(1)，所以这主要是调用`divisors`. O(n), O(2^m)

你的`main`函数一次做很多事情，所以让我们分解一下子表达式。

```
filter ((==0) . (n `mod`)) 
```

这会遍历一个列表，并对每个元素执行 O(1) 操作。这是 O(m)，其中 m 是输入列表的长度。

```
filter isPrime 
```

循环遍历一个列表，对每个元素执行 O(n) 工作，其中 n 是列表中的最大数字。如果列表恰好是 n 个元素长（在您的情况下），这意味着这是 O(n*n) 工作，或 O(2^m*2^m) = O(4^m) 工作（如上所述，此分析适用于它生成整个列表的情况）。

```
print . head 
```

微小的工作。让我们将其称为打印部分的 O(m)。

```
main = print (head (filter isPrime (filter ((==0) . (n `mod`)) [n-1,n-2..]))) 
```

考虑到上面的所有子表达式，`filter isPrime`位显然是主要因素。O(4^m), O(n^2)

现在，要考虑最后一个微妙之处：在上面的分析中，我一直假设每个函数/子表达式都被迫产生其全部输出。正如我们在 中看到的`main`，这可能不是真的：我们调用`head`，它只强制列表的一小部分。但是，如果输入数字本身不是素数，我们肯定知道我们必须至少查看一半列表：`n/2`和之间肯定没有除数`n`。所以，充其量，我们把工作减半——这对渐近成本没有影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T11:30:18.560

[Daniel Wagner 的回答](https://stackoverflow.com/a/11661927/1011995)很好地解释了为运行时复杂性推导界限的一般策略。然而，与一般策略的情况一样，它会产生过于保守的界限。

所以，只是为了它，让我们更详细地研究这个例子。

```
main = print (head (filter isPrime (filter ((==0) . (n `mod`)) [n-1,n-2..])))
    where n = 600851475143 
```

（另外：如果`n`是素数，这会在检查时导致运行时错误`n `mod` 0 == 0`，因此我将列表更改为，`[n, n-1 .. 2]`以便算法适用于所有`n > 1`。）

让我们将表达式拆分为多个部分，以便我们可以更轻松地查看和分析每个部分

```
main = print answer
  where
    n = 600851475143
    candidates = [n, n-1 .. 2]
    divisorsOfN = filter ((== 0) . (n `mod`)) candidates
    primeDivisors = filter isPrime divisorsOfN
    answer = head primeDivisors 
```

像 Daniel 一样，我假设算术运算、比较等是 O(1) - 虽然不正确，但对于所有远程合理的输入来说，这已经是一个足够好的近似值了。

因此，在列表中，必须生成`candidates`从`n`下到上的元素，元素的总成本为. 对于复合，我们有，那就是 Θ(n)。`answer``n - answer + 1``O(n - answer + 1)``n``answer <= n/2`

然后根据需要生成除数列表`Θ(n - answer + 1)`。

对于 的`d(n)`除数`n`，我们可以使用粗略的估计`d(n) <= 2√n`。

必须检查所有除数`>= answer`的`n`素数，这至少是所有除数的一半。由于除数列表是延迟生成的，因此

```
isPrime :: Integer -> Bool
isPrime p = (divisors p) == [1, p] 
```

是 O（p 的最小素因子），因为一旦`> 1`找到第一个除数，就确定了相等性检验。对于复合`p`，最小的质因数是`<= √p`。

我们`< 2√n`在最坏的情况下对复杂性进行素数检查 O(√n)，并且对复杂性进行一次检查`Θ(answer)`，因此执行的所有素数测试的组合工作是 O(n)。

总而言之，所需的总工作量是`O(n)`，因为每一步的成本是`O(n)`最坏的。

事实上，这个算法所做的总工作是`Θ(n)`. 如果`n`是素数，则在 O(1) 中完成所需的除数列表，但素数测试是`Θ(n)`. 如果`n`是复合的`answer <= n/2`，并且根据需要生成除数列表是`Θ(n)`。

如果我们不认为算术运算是 O(1)，我们必须乘以对大小为 的数字（即位）的算术运算的复杂度`n`，`O(log n)`这取决于所使用的算法，通常会稍微给出一个因子上面`log n`和下面`(log n)^2`。

# facebook - 评论框半截断

> ID：11660523
> 
> 赞同：0
> 
> 时间：2012-07-26T00:06:50.203
> 
> 标签：facebook, comments, height, cut

我的 Facebook 评论框被截断了一半。我将它保存为 HTML 并使用 Safari、Chrome 和 Firefox 打开它，但它们都被截断了一半。我该如何解决？

我已经尝试了很长时间，但无法让它发挥作用。为简单起见，我只使用注释框的必要代码：

```
<html>
    <head>
    </head>
    <body>
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id))
                    return;
                js = d.createElement(s);
                js.id = id;
                js.src = "http://connect.facebook.net/en_GB/all.js#xfbml=1&appId=170045126459927";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>

        <div class="fb-comments" data-href="http://example.com" data-num-posts="2" data-width="470"></div>
    </body>
</html> 
```

此外，页面不会停止显示加载标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T15:31:18.250

问题来自您的 CSS 文件：

如果您使用的是插件，则必须退出所有代码，例如

```
. facebook-comment { width: 95px !important; } 
```

这些代码由插件自动设置，不允许您随意设置 facebook 评论框。

一旦你这样做了，你可以在你的 PHP 控制台中创建一个，然后在你的 CSS 文件中添加这个类来定制你想要的盒子。

# ruby-on-rails - 何时应该在 Ruby 中使用表达式插值？

> ID：11660525
> 
> 赞同：2
> 
> 时间：2012-07-26T00:07:19.303
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

我对在方法中使用表达式插值感到困惑。最初我以为我可以传递任何类型的表达式，比如让我们说`name.capitalize`，但我也可以在没有表达式插值的情况下传递。这是两种情况。只需执行以下两种方法`irb`，两种方法的结果相同。我正在使用 Ruby 1.9.3

**1.**

```
def say_goodnight(name)
 result = "Good night, " + name.capitalize
 return result
end

puts say_goodnight('uncle') 
```

**2.**

```
def say_goodnight(name)
  result = "Good night, #{name.capitalize}"
  return result
end

puts say_goodnight('uncle') 
```

两种方式都会产生类似的输出

```
Good night, Uncle 
```

所以我的问题是我什么时候应该在 Ruby 中使用表达式插值？以及何时应该在 Ruby 中使用参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T00:17:07.510

哪个读得更干净通常更好。例如，如果字符串包含多个变量引用，每个变量引用由几个字符分隔，则表达式的“+”形式会变得复杂且不清楚，而插值字符串则更为明显。另一方面，如果表达式相对复杂，最好将它们与字符串的其他组件分开。

所以，我认为以下几点：

```
"Hello #{yourname}, my name is #{myname} and I'm #{mood} to see you." 
```

比

```
"Hello " + yourname + ", my name is " + myname + " and I'm " + mood + "to see you." 
```

但是如果我有复杂的表达式，我可能想将它们分开到不同的源代码行，并且用“+”更好地连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T00:22:31.253

我和@djconnel 在一起——使用读得最好、传达最多信息、简化修改和/或扩展、简化调试等等的任何一个。

这个昨天刚刚讨论过；看到[奇怪的 Ruby 语法？](https://stackoverflow.com/questions/11639855/strange-ruby-syntax/11639907#11639907)

在您的具体示例中，我将使用字符串插值，因为该方法实际上只是：

```
def say_goodnight(name)
  "Good night, #{name.capitalize}"
end 
```

# objective-c - 变量不工作

> ID：11660526
> 
> 赞同：0
> 
> 时间：2012-07-26T00:07:26.650
> 
> 标签：objective-c, string, variables, ios4

我想设置一个变量值。但我不知道该怎么做。我想用“值”替换 3456。

代码：

NSString *value = textbox.text;

NSString *field = [captcha stringByEvaluatingJavaScriptFromString:@"document.getElementById('mainPagePart:rn3').value='3456';"];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:21:46.437

我想您想说的是您想将 的内容`value`放入字符串中吗？

```
NSString *field = [captcha stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getElementById('mainPagePart:rn3').value='%@';", value]]; 
```

# wcf - SecurityContext.Current 不工作，nullexception

> ID：11660539
> 
> 赞同：0
> 
> 时间：2012-07-26T00:08:56.203
> 
> 标签：wcf, security, authentication

我使用 WCF 服务，用户和角色保存在数据库中。在我的服务中，我试图确定谁在调用该服务。所以我输入我的 WCF 服务

字符串用户 = ServiceSecurityContext.Current.PrimaryIdentity.Name；

但我得到我的 nullexception 对象没有发送到引用，我整天都在尝试用谷歌搜索它，但似乎找不到什么问题。有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:27:09.793

“出了什么问题”是`ServiceSecurityContext.Current`返回`null`而不是`ServiceSecurityContext`.

发生这种情况的一种情况是，如果绑定配置为使用`MessageCredentialType`设置为的消息安全性`None`。

但是，我不知道有任何综合文档列出了`ServiceSecurityContext.Current`可能出现的每个场景`null`：由于安全上下文是在通道堆栈中建立的，因此它取决于特定的绑定配置和使用的安全提供程序。我想，它也可能受到摆弄消息属性的自定义行为的影响。

话虽如此，除非您将自定义代码插入到通道堆栈中，否则可以安全地假设这只会发生在绑定不需要任何客户端身份验证的情况下。您应该首先检查您正在使用绑定配置，该配置将验证客户端并提供`IIdentity`您期望的用户名类型。

# sharepoint - SharePoint 中的每日列表视图？

> ID：11660540
> 
> 赞同：0
> 
> 时间：2012-07-26T00:08:58.783
> 
> 标签：sharepoint

我正在开发一个显示我公司的支持范围的每日列表视图（“今日支持列表”）。某些人在特定时间段（几天或几周）待命

我需要一个列表来显示特定日期（今天）发生的任何事件，这将显示当天待命的人。

我开发的逻辑基于开始和结束日期的计算。如果开始日期晚于昨天且在明天之前，它会显示在列表视图中。如果约会从今天开始到今天结束，这很有效，但如果约会从上周开始到下周结束，则根本不会出现。

我希望 Sharepoint 内置的功能是过滤在开始日期或结束日期之间的任何地方具有 [今天] 的事件的选项。

我想我会从 Sharepoint Designer 中试一试并创建一个工作流（因为工作流比前端有更多的选项），但我不知道如何去做。许多想法涌入我的脑海，但由于缺少一个功能，它们都没有实现……

有没有人尝试过远程做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:19:33.447

为列表创建一个视图并设置过滤器，使“开始日期”小于或等于 [今天] `And`“结束日期”大于或等于 [今天]。

# c++ - 使用 c++ 对象的全局实例扩展嵌入式 python 解释器

> ID：11660542
> 
> 赞同：3
> 
> 时间：2012-07-26T00:09:05.633
> 
> 标签：c++, python, boost-python

我有一堂课

```
class A {
  A(SomeClass* ptr);
  do_something();
}; 
```

我想在嵌入式 python 解释器中使用 boost-python

到目前为止，我已经设法通过一个接受 SomeClass 指针的构造函数创建了一个 python 模块`BOOST_PYTHON_MODULE`并创建了一个。`class_<A>`

现在我想扩展解释器，以便在调用某些 python 代码时有一个此类（名为`an_a`）的实例，以便以下 python 代码有效：

```
#preferably no imports here.
an_a.do_something() 
```

我的问题有两个方面，在使用解释器之前，我需要在 python 或 C++ 中构造这个对象，并且我需要让脚本的作者可以使用这个对象。我在找到的文档中确切地找到了如何执行此操作时遇到了一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:44:58.307

我最近需要做这件事。我也考虑过（并使用过）Boost.Python，但就个人而言（尽管我很喜欢 Boost），我发现不得不将 Boost 库的一半拖入来获得这一功能是过分的。

因此，如果您有兴趣，我最近在一个名为 ECS:Python 的 Python 包装库中根据第一原则为 C++ 实现了嵌入式 Python 脚本。ECS:Python（嵌入式 C++ 脚本与 Python）专为希望将 C++ 应用程序中的对象公开给嵌入式 Python 解释器以进行交互式脚本编写的 C++ 开发人员而设计。

它的免费（BSD）和开源：http: [//sourceforge.net/projects/ecspython](http://sourceforge.net/projects/ecspython)

# javascript - Typekit :: 的异步加载是否值得，或者最好根本不使用它？

> ID：11660543
> 
> 赞同：1
> 
> 时间：2012-07-26T00:09:13.860
> 
> 标签：javascript, asynchronous, typekit

试图降低页面加载时间。

我按照[此处](http://blog.typekit.com/2011/05/25/loading-typekit-fonts-asynchronously/)概述的第三个示例异步加载 TypeKit javascript。

要使其工作，您必须向`.wf-loading #some-element {visibility: hidden;}`使用该字体的每个元素添加一个，并且在 1) 加载或 2) 在设定时间（1 秒）后，字体变为可见。

问题是，我正在使用的 CSS 将字体分配给大约 200 个元素，所以这是 200 个元素`.wf-loading{ }`（注意：我没有写这个 CSS）。

我觉得这会减慢加载时间，而不仅仅是让它定期加载，DOM 遍历那么多东西。如果是这种情况，我将完全取消 Typekit 并使用常规字体。

有什么工具可以用来对这类东西进行性能测试吗？或者有没有人测试过这些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:34:26.457

您实际上并没有使用这种方法修改多个 DOM 元素（根）。这意味着我们的现代浏览器将依赖其*超快*的 CSS 引擎，因此所涉及的元素数量不会对页面加载产生明显影响。

就页面加载和闪烁而言，网络延迟通常比 DOM 操作差一个数量级。当浏览器等待字体下载时，在第一个（未启动的）页面加载时总会有一些闪烁。只需确保您的字体被缓存以供重复使用，并尝试使其文件大小尽可能小。

几年前，我和 Cufon 一起走上了这条路。最后，我选择了性能可以接受的最简单的路径，并就此打住。优化页面加载很容易陷入困境，但可能还有更有希望的改进领域——功能、错误、重构等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T13:26:16.287

问题是，正如他们在[博客](http://blog.typekit.com/2011/05/25/loading-typekit-fonts-asynchronously/)中提到的那样，Typekit CDN 完全失败并且用户只看到一个空白页面的罕见情况（但它确实发生过——对我来说肯定不止一次）。这是您希望使用异步加载的时候。

# git - 在一个 git 存储库中有多个“子存储库”？

> ID：11660552
> 
> 赞同：12
> 
> 时间：2012-07-26T00:11:11.573
> 
> 标签：git, github

我有幸通过 Github 的 EDU 程序获得了一个免费的微计划 Github 帐户用于我的功课。但是，我不确定如何最好地为我的 CS 课程构建它。理想情况下，我会为每个课程设置一个不同的存储库——CS101、CS102 等。但是，微计划最多只允许 5 个存储库，并且我将在未来一两年内学习超过 5 个课程。那么，有没有一种方法可以构建一个存储库以使每个文件夹的提交保持“独立”，即拥有一个具有多个“子”存储库（基本上是一个子模块）的存储库。

任何建议表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T12:56:24.470

### 分枝

对于每个类，在存储库中运行`git checkout --orphan <classname>`，您可以获得该类内容的新的无父分支。

获取存储库的本地副本时，运行`git clone --single-branch --branch <classname> <url> <localdir>`，它只会克隆并稍后获取该类的分支。

### 比特桶

正如 trauzti 所说，我肯定会推荐一个 Bitbucket 帐户。虽然 UI 不如 Github 漂亮，但它具有所有相同的功能，并且它们确实允许免费无限的私人存储库。我用它来做我的功课。如果你真的想使用 Github，那么上面的方法就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:14:07.173

也许有人知道为此使用子模块的方法： http: [//git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

您可以使用多个分支，每个类一个分支，并检查计算机上不同目录中的不同分支。

但如果只有 5 个人或更少的人使用这些存储库，您应该查看 BitBucket：[https ://bitbucket.org/](https://bitbucket.org/)

在那里，您可以免费拥有无限数量的私有存储库。

# windows - 如何更改 %SystemRoot% 文件夹 (C:\Windows) 的图标？

> ID：11660554
> 
> 赞同：1
> 
> 时间：2012-07-26T00:11:18.037
> 
> 标签：windows, icons, customization

我正在尝试更改系统根目录 C:\Windows 显示的图标。我无法像您通常对 Windows 文件夹一样对其进行自定义。我已经寻找了一个注册表项，我也可以添加一个 DefaultIcon 键，但我没有找到任何东西。

我曾尝试使用 desktop.ini 文件来执行此操作，但它不起作用：

```
[.ShellClassInfo]
IconResource=icon.ico,-0 
```

desktop.ini 文件和那个图标都在 Windows 目录中，它没有改变它，但是这些相同的部分在 Downloads 文件夹中工作正常，所以代码可以工作。

无论解决方案如何，我都想避免使用任何程序来完成此操作。

我还想在“程序文件”文件夹中添加一个自定义图标并遇到同样的问题。

编辑：我假设，但如果有问题：我正在运行 Windows 7（32 位）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:46:22.030

只需像您一样将`desktop.ini`文件复制到其中`C:\WINDOWS`，然后`Command Prompt`以*管理员*身份运行以键入以下命令。

```
ATTRIB +R C:\WINDOWS 
```

# javascript - Jquery选择层次结构

> ID：11660556
> 
> 赞同：3
> 
> 时间：2012-07-26T00:11:41.777
> 
> 标签：javascript, jquery, backbone.js, hierarchy

在我开始这个问题之前，如果您是新来的主干.js 并且想要实现以下功能，您必须使用主干关系模型，或者至少看起来是这样。

我正在尝试创建一个将通过backbone.js 实现的层次结构，我想知道如何构建层次结构和访问元素。我需要能够添加和删除列表/集/项目，并希望保持一致的编号策略。（List1 的显示名称为 list1。如果我删除了 Set1，我希望 Set2 成为 Set1，同时保留其对应的项目）

```
List1 
^--->Set1  
     ^--->Item1
     ^--->Item2
^--->Set2   
     ^--->Item1

List2 
^--->Set1  
     ^--->Item1
^--->Set2   
     ^--->Item1
     ^--->Item2 
```

等等

我的问题是：您如何以一种方式构造它，使得遵循相同层次结构的一组函数可以以最紧凑和最合乎逻辑的方式访问它们？

我有一个想法：使用 div 并让你的 div id 类似于 id="List"+currentlistnum()+"Set"+currentsetnum()+"Item"+currentitemnum()

还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:36:24.470

如果您的项目列表在语义上是“列表”，请使用有序列表（ol）或无序列表（ul）。然后，如果您有子列表嵌套更多列表。

```
<ul id="mylist">
    <li>
        <span>List 1</span>
        <ul>
            <li>
            <span>Set1</span>
                <ul>
                    <li>List1Set1Item1</li>
                    <li>Item2</li>
                    <li>Item3</li>
                </ul>
            </li>
            <li>
            <span>Set2</span>
                <ul>
                    <li>Item1</li>
                    <li>Item2</li>
                    <li>Item3</li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

并使用[jQuery nth Child 选择器](http://api.jquery.com/nth-child-selector/)和直接子`>`元素来选择特定的逻辑元素，这样您就可以使应用程序逻辑远离 HTML。

```
$('#mylist > li:nth-child(1) > span').text(); // List1
$('#mylist > li:nth-child(1) > ul > li:nth-child(1) > ul > li:nth-child(1)')
   .text(); //List1Set1Item1 
```

如果你想附加一个编号系统：示例 refresing all Set 根据当前视图更新其编号：

```
$('#mylist > li > ul > li > span').each(function(){
  var ordinalPositionOfMyParent = $(this).parent().index() + 1;
  $(this).text('Set' + ordinalPositionOfMyParent);
  }); 
```

# enums - Thrift 默认枚举值

> ID：11660561
> 
> 赞同：2
> 
> 时间：2012-07-26T00:12:17.250
> 
> 标签：enums, thrift

使用 Apache Thrift 并在 Java 中生成代码，我试图弄清楚是否有一种方法可以将其中一个枚举作为默认值返回。
例如，使用以下定义：

```
enum STATE {
  UNKNOWN,
  AVAILABLE,
  UNAVAILABLE
} 
```

我希望将 UNKNOWN 作为默认值而不是 NULL 值返回，以便枚举的添加不会影响现有客户端。
有可能这样做吗？在这种情况下还有哪些其他可用选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T22:31:56.377

我不确定“默认返回”部分，因为没有默认返回值之类的东西。可以解决您的问题的可能是某事。喜欢：

```
struct ReturnedValues
{
  1: STATE state = UNKNOWN  
} 
```

否则你应该解释你的情况。

# java - Java 数组整数操作

> ID：11660562
> 
> 赞同：1
> 
> 时间：2012-07-26T00:12:24.557
> 
> 标签：java, arrays, type-conversion

似乎无法弄清楚为什么我的数组没有输出正确的值。总和打印为数组中的第一个整数。我想要数组中所有整数的总和。有什么想法可能是错的吗？我试图将 int 转换为要发送的字符串。

```
 //Add values of Integers
  int i; int sum = 0; 
  for(i = 0; i < intarray.length; i++){  
      sum = sum + intarray[i];
  }

  String sumOut =  Integer.toString(sum);
  System.out.println( "to Client: " + sumOut);
  toclient.writeBytes("Sum = " +sumOut+'\n'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:16:49.500

您的代码看起来正确。尝试打印出 的内容`intarray`以确保其中包含的内容。另外，如何将值放入`intarray`. 发布一些代码向我们展示。也许数组没有正确填充。

此外，不需要线

```
String sumOut =  Integer.toString(sum); 
```

当您使用运算符时， Java 会自动将 an 转换`int`为 a ，例如：`String``+`

```
System.out.println("to Client:" + sum); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T00:18:18.900

这是我的做法：

```
package cruft;

/**
 * IntegerSum description here
 * @author Michael
 * @link
 * @since 7/25/12 8:14 PM
 */
public class IntegerSum {
    public static void main(String[] args) {
        int [] values = new int[args.length];
        for (int i = 0; i < args.length; ++i) {
            values[i] = Integer.valueOf(args[i]);
        }
        System.out.println(String.format("sum = %d", sum(values)));
    }

    public static int sum(int [] values) {
        int sum = 0;
        for (int value : values) {
            sum += value;
        }
        return sum;
    }
} 
```

# oracle - 在 Oracle PL/SQL 中重用绑定变量

> ID：11660564
> 
> 赞同：5
> 
> 时间：2012-07-26T00:12:37.570
> 
> 标签：oracle, plsql, oracle10g

我有一个很重的带有联合的 SQL 语句，其中代码不断被重用。我希望找出是否有一种方法可以重用单个绑定变量，而无需多次重复该变量以“使用”。

下面的代码返回“并非所有变量都绑定”，直到我将“USING”行更改为“USING VAR1,VAR2,VAR1;”

我希望避免这种情况，因为我在这两种情况下都提到 :1 - 有什么想法吗？

```
declare
var1 number :=1;
var2 number :=2;
begin
execute immediate '
select * from user_objects 
where 
rownum = :1
OR rownum = :2  
OR rownum = :1 '
using var1,var2;
end;
/ 
```

编辑：有关其他信息，我正在使用动态 SQL，因为我还生成了一系列 where 条件。

我对 SQL 数组不是很好（我在代码中使用了游标，但我认为这会使问题过于复杂），但伪代码是：

```
v_where varchar2(100) :='';
FOR i in ('CAT','HAT','MAT') LOOP
  v_where := v_where || ' OR OBJECT_NAME LIKE ''%' || i.string ||'%''
END;
  v_where := ltrim(v_where, ' OR'); 
```

然后将上面的 SQL 修改为：

```
execute immediate '
select * from user_objects 
where 
rownum = :1
OR rownum = :2  
OR rownum = :1 AND ('||V_WHERE||')'
using var1,var2; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T10:45:07.663

您可能会考虑一些选项，尽管它们可能需要更改执行 SQL 语句的方式或 SQL 语句本身。

1.  **使用`DBMS_SQL`而不是`EXECUTE IMMEDIATE`**-- `DBMS_SQL`(参见[http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sql.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sql.htm) ) 比 更难使用`EXECUTE IMMEDIATE`，但可以让您更好地控制过程 -- 包括能力（通过`DBMS_SQL.BIND_VARIABLE`and `DBMS_SQL.BIND_ARRAY`）按名称而不是按位置绑定。
2.  **`EXECUTE IMMEDIATE`与`WITH`子句一起使用**——您可以重组查询以使用`WITH`子句，该子句在开始时在子查询中收集绑定变量，然后在需要时加入子查询（而不是直接引用绑定变量）。它可能看起来像这样

```
with your_parameters as 
    (select :1 as p1, :2 as p2 from dual) 
select * 
from your_table, your_parameters 
where your_table.some_column1 = your_parameters.p1 
  and your_table.some_column2 <= your_parameters.p1 
  and your_table.some_column3 = your_parameters.p2 
```

这可能会影响查询的性能，但它可能是一个可以接受的折衷方案。

3.  **不要使用动态**SQL——当然，如果你不需要动态 SQL，你就不需要使用 EXECUTE IMMEDIATE，因此“仅按位置绑定”的限制不适用。你确定你真的需要使用动态 SQL 吗？

编辑：如果您使用动态 SQL，因为您`OR`在编辑中发布的条件数量不定，您可以通过执行以下操作之一来避免使用动态 SQL：

1.  **如果`OR`条件来自表（或查询）** - 加入该表（或查询）而不是使用`OR`条件列表。例如，如果 CAT、HAT 和 MAT 列在名为`YOUR_CRITERIA`的表中的列中，`YOUR_CRITERIA_TABLE`您可以添加`YOUR_CRITERIA_TABLE`到`FROM`子句中，并将子句`OBJECT_NAME LIKE '%CAT% OR OBJECT_NAME LIKE '%MAT% OR OBJECT_NAME LIKE '%HAT% OR OBJECT_NAME LIKE '%MAT%`中的`WHERE``OBJECT_NAME LIKE '%' || YOUR_CRITERIA_TABLE.YOUR_CRITERIA || '%'.`
2.  **否则，您可能会将条件放在全局临时表中**——如果您的条件不是来自表（或查询），您可以（一次，在设计时，而不是在运行时）创建一个全局临时表来保存它们，然后在运行时，将条件插入到全局临时表中，然后按照第 1 项中的说明加入它。
3.  **或者，您可以将条件放在嵌套表中**——这与第 2 项类似，不同之处在于使用嵌套表（使用创建的表`CREATE TYPE...IS TABLE OF`）而不是全局临时表。您可以创建或拥有嵌套表类型，或使用像`SYS.ODCIVARCHAR2LIST`. 在 PL/SQL 中，您将填充这种类型的变量，然后像第 1 项中的“真实”表一样使用它。

第 3 项的示例可能类似于：

```
DECLARE
    tblCriteria SYS.ODCIVARCHAR2LIST;

BEGIN
    tblCriteria := SYS.ODCIVARCHAR2LIST();

    -- In "real" code you might populate the nested table in a loop.
    -- This example populates it explicitly so that it will compile.  For the
    -- purpose of the example, we could have populated the nested table in 
    -- a single statement:

    -- tblCriteria := SYS.ODCIVARCHAR2LIST('CAT', 'HAT', 'MAT');

    tblCriteria.EXTEND(1);
    tblCriteria(tblCriteria.LAST) := 'CAT';

    tblCriteria.EXTEND(1);
    tblCriteria(tblCriteria.LAST) := 'HAT';

    tblCriteria.EXTEND(1);
    tblCriteria(tblCriteria.LAST) := 'MAT';

    FOR rec IN
    (
        SELECT
            USER_OBJECTS.*
        FROM
            USER_OBJECTS,
            TABLE(tblCriteria) YOUR_NESTED_TABLE
        WHERE
            USER_OBJECTS.OBJECT_NAME LIKE '%' || YOUR_NESTED_TABLE.COLUMN_VALUE || '%'
    )
    LOOP
        -- Do something.  For example, print out the object name.
        DBMS_OUTPUT.PUT_LINE(rec.OBJECT_NAME);
    END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T03:00:37.210

不，不幸的是，EXECUTE IMMEDIATE 的绑定变量必须按照它们在语句中出现的顺序提供，并且绑定变量名称被忽略。所以你只需要在你的声明中包含:1、:2 和:3。

# ruby-on-rails - Carrierwave：在第二个模型中复制文件

> ID：11660565
> 
> 赞同：4
> 
> 时间：2012-07-26T00:12:50.847
> 
> 标签：ruby-on-rails, carrierwave

我有两个模型，每个模型都有自己的 Carrierwave 上传器：

```
class User < ActiveRecord::Base
  mount_uploader :avatar, AvatarUploader
end 
```

和：

```
class Bookshelf < ActiveRecord::Base
  mount_uploader :image, ImageUploader
end 
```

我希望用户的头像是他上传的最新书架图像。我尝试这样实现：

```
class BookcasesController < ApplicationController
  def create
    @bookcase = current_user.bookcases.build(params[:bookcase])
    if @bookcase.save
      current_user.avatar = @bookcase.image
      current_user.avatar.recreate_versions!
    end
  end
end 
```

不幸的是，这对头像完全没有影响。我还能如何实现这一目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T01:18:16.217

```
current_user.avatar = @bookcase.image
current_user.avatar.recreate_versions! 
```

实际上并没有保存——您可以：

```
current_user.avatar.save 
```

或如您所说：

```
current_user.update_attribute(:avatar, @bookcase.image) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T19:01:28.017

如果您的图像文件存储在本地并且您不介意打开文件描述符，您也可以这样做：

```
current_user.avatar = File.open(@bookcase.image.path)
current_user.save 
```

# delphi - TRichViewEdit 段落编号

> ID：11660566
> 
> 赞同：0
> 
> 时间：2012-07-26T00:13:32.310
> 
> 标签：delphi, properties, delphi-xe2, paragraph

组件中有大量属性`TRichViewEdit`可以找到给定段落的大多数属性。例如，您可以轻松判断段落是否使用编号、使用的编号类型、是否从特定编号开始编号或者是前一段的延续等。

但是，我找不到确定正在使用的段落编号的属性或方法。例如：

```
A. some text
B. more text
C. etc 
```

我不知道那`some text`是段落编号`A`，那`more text`是编号`B`，而“等”是“C”。如果我也可以访问数值，比如“1”、“2”或“3”，那就没问题了。

有没有人有经验`TRichViewEdit`并知道如何获得段落编号值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:34:54.857

## 回答

有一种未记录的方法可以做到这一点。if`rve`是`TRichViewEdit`组件并且`ItemNo`是带有编号的段落的项目编号的id：

```
use
  RVMarker;

TRVMarkerItemInfo(rve.RVData.GetItem(ItemNo)).Counter; // paragraph number as int
TRVMarkerItemInfo(rve.RVData.GetItem(ItemNo)).DisplayString; // displayed paragraph number 
```

## 例子

```
use
  RVMarker, TypInfo;
---
var
  i, lno, ll, sf: Integer;
  usf: Boolean;
  rvmii: TRVMarkerItemInfo;
  pi: TParaInfo;
  s: string;
begin
  for i := 0 to rve.ItemCount - 1 do
  begin
    if rve.RVData.GetItemStyle(i) = rvsListMarker then
    begin
      pi := rve.Style.ParaStyles.Items[rve.GetItemPara(i)];
      rve.GetListMarkerInfo(i, lno, ll, sf, usf);
      s := GetEnumName(TypeInfo(TRVListType), Ord(rve.Style.ListStyles.Items[lno].Levels[ll].ListType));
      rvmii := TRVMarkerItemInfo(rve.RVData.GetItem(i));

      ShowMessage(
        Concat(
          'Paragraph Info',                                      #13#10,
          '---------------------------------',                   #13#10,
          #09'OutlineLevel:',    #09, IntToStr(pi.OutlineLevel), #13#10,
          #09'ID:',           #09#09, IntToStr(pi.ID),           #13#10,
          #09'Index:',        #09#09, IntToStr(pi.Index),        #13#10,
                                                                 #13#10,
          'Marker Info',                                         #13#10,
          '---------------------------------',                   #13#10,
          #09'ListNo:',       #09#09, IntToStr(lno),             #13#10, // can also use 'rvmii.ListNo'
          #09'ListLevel:',       #09, IntToStr(ll),              #13#10, // can also use 'rvmii.Level'
          #09'StartFrom:',       #09, IntToStr(sf),              #13#10, // can also use 'rvmii.StartFrom'
          #09'UseStartFrom:',    #09, BoolToStr(usf),            #13#10, // can also use 'rvmii.Reset'
          #09'Counter:',         #09, IntToStr(rvmii.Counter),   #13#10,
          #09'DisplayType:',     #09, s,                         #13#10,
          #09'DisplayString:',   #09, rvmii.DisplayString,       #13#10,
                                                                 #13#10,
          'ItemText',                                            #13#10,
          '---------------------------------',                   #13#10,
          rve.GetItemText(i+1),                                  #13#10  // next item is text for para #
        )
      );
    end;
  end;
end; 
```

# html - CSS 语法：“.one.column”“.two.column”，我读对了吗？

> ID：11660567
> 
> 赞同：0
> 
> 时间：2012-07-26T00:13:33.110
> 
> 标签：html, css, syntax, css-selectors

我刚刚发现了使用网格的 Skeleton 样板。这是 github 上的 css：[https ://github.com/dhgamache/Skeleton/blob/master/stylesheets/skeleton.css](https://github.com/dhgamache/Skeleton/blob/master/stylesheets/skeleton.css)

布局不同的列类`.one.columns`，`.two.columns`等等。

我以前没有在 CSS 中看到过这种语法。

我是否可以正确地假设这`.one.columns {}`与`.one, .columns {}`前者仅影响元素 with`class="one columns"`而后者影响两个元素 with`class="one"`和不同`class="columns"`？

那是：

```
.one.columns = .one AND .columns
.one, .columns =  .one OR .columns 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T00:20:56.647

`.class1.class2 {}`指所有**同时具有**类`class1`和的元素`class2`。

`.class1 .class2 {}`指所有具有 class 的元素，它们是具有 class`class2`的元素的后代`class1`。

`.class1, .class2 {}`指的是具有/或 class`class1`和/或 class的所有元素`class2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T00:15:41.857

你是对的。

在没有空格的情况下将它们链接在一起可以匹配所有存在的类。

它们之间的逗号表示选择与逗号分隔的选择器匹配的任何元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T00:21:33.027

当 CSS 选择器连接时，它们都必须应用于要选择的元素。就像`div.foo`div 的元素也有 class一样`foo`，`.one.columns`意味着元素有 class`one`也有 class `columns`。

当 CSS 选择器用逗号分隔时，这意味着样式适用于匹配第一个选择器的任何元素，也适用于匹配第二个选择器的任何元素。就像`h1, h2`手段一样，这些样式适用于`h1`元素，也适用于`h2`元素，`.one, .columns`意味着样式适用于类为 的所有元素`one`，也适用于类为 的所有元素`columns`。

# regex - 不包含某些文本的正则表达式匹配

> ID：11660568
> 
> 赞同：0
> 
> 时间：2012-07-26T00:13:42.100
> 
> 标签：regex

我正在尝试创建一个正则表达式，它可以找到一个开始前缀和一个结束前缀，它们之间有段落标签。但是我创建的那个并没有达到我的期望。

`%%%HL_START%%%(.*?)</p><p>(.*?)%%%HL_END%%%`

正确匹配 `<p>This Should %%%HL_START%%%Work</p><p>This%%%HL_END%%% SHould Match</p>`

这也匹配，但我不希望它匹配，因为它`</p><p>`不在开始和结束前缀之间

`<p>%%%HL_START%%%One%%%HL_END%%% Some More Text %%%HL_START%%%Here%%%HL_END%%%</p><p>Some more text %%%HL_START%%%Here%%%HL_END%%%</p>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:32:02.457

我对正则表达式在这里是正确的解决方案并不完全满意；如果您进入嵌套的开始和停止标记，您可能没有常规语言......

对于这个特定示例，请尝试更改要使用的正则表达式，`[^%]`而不是`.`这样`.*?`匹配就不会超过`%%%%H:_END%%%%`

```
%%%HL_START%%%([^%]*?)</p><p>([^%]*?)%%%HL_END%%% 
```

# python - 如何在 mac os 10.8 上安装 cc 而无需支付开发人员程序费用？

> ID：11660573
> 
> 赞同：-1
> 
> 时间：2012-07-26T00:14:10.043
> 
> 标签：python, macos, osx-mountain-lion, cc

升级到 Mac OS 10.8 后，几个 python 库停止工作。尝试通过 easy_install 或 pip 重新安装它们会带来错误消息“-bash: cc: command not found”。XCode 已安装。尝试为 XCode 安装命令行工具坚持注册到开发人员计划。我不想为过去的工作支付 99 美元。我不需要分发任何东西——我没有开发任何与苹果有关的东西。

有没有办法在不声明自己是 Mac 开发人员/每年支付 99 美元的情况下获得 c 编译器、制作和所有这些东西？

更新：伙计们，这些反对票是关于什么的？你知道答案？您不想知道 Mac OS X 10.8 有问题吗？我真的很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:51:30.860

命令行工具免费提供：

*   访问[https://developer.apple.com/devcenter/mac/index.action](https://developer.apple.com/devcenter/mac/index.action)
*   使用您的个人 Apple ID 登录
*   填表格
*   确认后，您将能够完全免费下载工具（或从 Xcode 安装它们）。

还要检查[https://github.com/kennethreitz/osx-gcc-installer/](https://github.com/kennethreitz/osx-gcc-installer/)
可能这就是你要找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T01:57:14.153

您应该能够通过转到首选项和下载从 Xcode 中安装命令行工具。如果它仍然在抱怨，请尝试使用 xcrun 访问内置工具。xcrun 允许您从命令行访问内置的 xcode 工具。

xcrun -find cc 找到 llvm 的位置，然后你可以设置你的环境来解决它。

例子：

```
xcrun -find cc
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc
lomion@basso.local:/usr/bin>xcrun cc
clang: error: no input files
Exit 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T00:57:52.843

我不完全确定这是否可行，但它不会破坏您的计算机，所以为什么不这样做。您可以在此处下载 Clang 工具链[http://llvm.org/releases/download.html](http://llvm.org/releases/download.html)。您将需要 MacOS X/x86_64 的 Clang 二进制文件。它应该为你安装 llvm、gcc、cc 和一切。

# google-apps-script - 在脚本中使用内置电子表格函数

> ID：11660574
> 
> 赞同：25
> 
> 时间：2012-07-26T00:14:16.663
> 
> 标签：google-apps-script, google-sheets, google-sheets-formula, worksheet-function

我是第一次使用 Google App Script。我在 Google Doc 电子表格上使用它。

我正在尝试非常简单的功能，只是为了学习基础知识。例如这有效：

```
function test_hello() {
    return 'hello';
} 
```

但我对这个简单的问题感到困惑：

```
function test_today() {
    return today();
} 
```

`#ERROR!`无论我在哪里使用它，它都可以制作。当我把光标放在上面时，它说：

> 错误：ReferenceError：“今天”未定义。

`today()`当直接在电子表格中使用时，该功能有效。

这是否意味着在脚本中，我不能使用电子表格的内置函数？有什么优雅的方法吗？

一些电子表格功能对我来说非常有用（例如我喜欢`weekday()`）。

一种不优雅的方法可能是创建列来计算我需要的中间值，并且可以使用电子表格函数进行计算。但我宁愿避免这种肮脏和麻烦的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T00:22:10.553

Google Apps 脚本是 JavaScript 的子集，目前不支持电子表格函数。例如，如果你想创建一个返回今天日期的函数，你应该写：

```
function test_today(){
return new Date()
}// note that this will  eventually return a value in milliseconds , you'll have to set the cell format to 'date' or 'time' or both ;-) 
```

语法与工作表函数相同：`=test_today()` [参见教程](https://developers.google.com/apps-script/execution_custom_functions)

有很多关于 javascript 的互联网资源，我发现其中最有用的资源之一是[w3school](http://www.w3schools.com/js/js_howto.asp)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-08T04:54:16.427

Google Apps 脚本仍然没有（2020 年 1 月 7 日）包含 Google 表格原生函数的 API。

但是您可以在电子表格中设置命名为命名范围的单元格的公式（本机函数）。

然后在 GAS 中：

```
var nativeOutput = spreadsheet.getRangeByName("outputCell").getValue(); 
```

瞧！您的 GAS 正在调用单元格中的本机函数。

您可以通过命名工作表（或任何工作表）中由另一个单元格中的公式引用的另一个单元格来将数据从 GAS 发送到单元格中的本机函数：

```
spreadsheet.getRangeByName("inputCell").setValue(inputData); 
```

您的 GAS 可以动态创建这些单元，而不是对它们进行硬编码，例如：

```
// Create native function, its input and output cells; set input value; use native function's output value:

// Use active spreadsheet.
var spreadsheet = SpreadsheetApp.getActive();

// Name input, output cells as ranges.
spreadsheet.setNamedRange("inputCell", spreadsheet.getRange("tuples!F1"));
spreadsheet.setNamedRange("outputCell", spreadsheet.getRange("tuples!F2"));

var outputCell = spreadsheet.getRangeByName("outputCell");
var inputCell = spreadsheet.getRangeByName("inputCell");

// Set native formula that consumes input cell's value, outputting in formula's cell.
outputCell.setFormula("=WEEKNUM(inputCell)");

// Call native function by setting input cell's value for formula to consume.
// Formula sets its cell's value to formula's output value.
inputCell.setValue(15);

// Consume native function output.
var nativeOutput = outputCell.getValue();
Logger.log("nativeOutput: "+ JSON.stringify(nativeOutput)); // Logs "nativeOutput: 3" 
```

注意：这种技术会暴露电子表格用户可以访问/更改的单元格中的代码，其他电子表格操作可能会覆盖这些单元格。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-26T10:05:13.073

电子表格函数能做什么，Javascript 能做什么。我只需要替换`var day_num = weekday()`为`var day_num = new Date(date).getDay()`

这是结果：

```
/**
* Writes the day of the week (Monday, Tuesday, etc), based on a date
*/
function day_name(date) {
  // calculate day number (between 1 and 7)
  var day_num = new Date(date).getDay();

  // return the corresponding day name
  switch(day_num) {
    case 0: return 'Sunday';    break;
    case 1: return 'Monday';    break;
    case 2: return 'Tuesday';   break;
    case 3: return 'Wednesday'; break;
    case 4: return 'Thursday';  break;
    case 5: return 'Friday';    break;
    case 6: return 'Saturday';  break;
  }
  return 'DEFECT - not a valid day number';
}; 
```

# android - 如何知道我为使用 ndk-build 而构建的 API 级别？

> ID：11660575
> 
> 赞同：4
> 
> 时间：2012-07-26T00:14:19.707
> 
> 标签：android, c++, c, android-ndk, android-manifest

我试图更好地理解使用 ndk-build 时 api 级别的选择是如何工作的。

我知道我可以`APP_PLATFORM`在*Application.mk*中显式设置，否则 ndk-build 将针对清单中指示的 api `android:minSdkVersion`，但是如果我的应用程序的清单同时具有`android:minSdkVersion`and`android:targetSdkVersion`并且这高于 minSdkVersion 怎么办？

ndk-build 会针对**targetSdkVersion**吗？我该如何检查呢？

如果它针对更高的 api 级别，我想我将能够使用仅适用于该级别的本机 api 进行构建，但如果我在具有较低 api 级别的设备上运行应用程序，它应该会失败，所以在这种情况下，我应该实现某种 api 级别检查，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-19T04:24:00.027

使用`__ANDROID_API__`定义在`$NDK/platforms/android-<level>/<abi>/usr/include/android/api-level.h`

```
#if __ANDROID_API__ >= 21
// building with Android NDK Native API level 21 or higher
posix_fadvise64(fd, ...);
#else
// building with Android NDK Native API level 20 or lower
syscall(__NR_arm_fadvise64_64, fd, ...);
#endif 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T08:48:01.833

`Android.mk`在定义 TARGET_PLATFORM 和 LOCAL_CFLAGS 之后，将此代码放入您的

```
ifeq ($(TARGET_PLATFORM),android-7)
    LOCAL_CFLAGS   += -DANDROID7
else
ifeq ($(TARGET_PLATFORM),android-8)
    LOCAL_CFLAGS   += -DANDROID8
else
ifeq ($(TARGET_PLATFORM),android-9)
    LOCAL_CFLAGS   += -DANDROID9
endif
endif
endif 
```

现在您可以在您的 C/C++ 代码中检查此定义：

```
#if defined( ANDROID9 )
   // do stuff for API Level 9
#endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T03:01:05.710

*   `Android:minSdkVersion`

运行应用程序的**最低安卓平台版本。**

*   `Android:targetSdkversion`

**指定应用程序设计运行**的 API 级别。

*   `Android:maxSdkVersion`

旨在运行应用程序的 Android 平台 的**最高版本。**

# java - 在 Lucene 中获取子查询的子分数

> ID：11660579
> 
> 赞同：0
> 
> 时间：2012-07-26T00:14:40.330
> 
> 标签：java, scala, lucene

我构建了一个查询，它本质上是其他查询的加权和：

```
val query = new BooleanQuery
for ((subQuery, weight) <- ...) {
  subQuery.setBoost(weight)
  query.add(subQuery, BooleanClause.Occur.MUST)
} 
```

当我查询索引时，我会返回包含总分的文档。这很好，但我还需要知道每个子查询的子分数是多少。我怎样才能得到那些？这就是我现在正在做的事情：

```
for (scoreDoc <- searcher.search(query, nHits).scoreDocs) {
  val score = scoreDoc.score
  val subScores = subQueries.map { subQuery =>
    val weight = searcher.createNormalizedWeight(subQuery)
    val scorer = weight.scorer(reader, true, true)
    scorer.advance(scoreDoc.doc)
    scorer.score
  }
} 
```

我认为这给了我正确的分数，但是当我知道文档已经作为总分的一部分进行评分时，前进并重新评分似乎很浪费。

有没有更有效的方法来获得这些子分数？

[我的代码在 Scala 中，但如果更容易，请随时用 Java 响应。]

**编辑：这是遵循罗伯特·缪尔的建议后的样子。**

查询：

```
val query = new BooleanQuery
for ((subQuery, weight) <- ...) {
  val weightedQuery = new BoostedQuery(subQuery, new ConstValueSource(weight))
  query.add(weightedQuery, BooleanClause.Occur.MUST)
} 
```

搜索：

```
val collector = new DocScoresCollector(nHits)
searcher.search(query, collector)
for (docScores <- collector.getDocSubScores) {
  ...
} 
```

收藏者：

```
class DocScoresCollector(maxSize: Int) extends Collector {
  var scorer: Scorer = null
  var subScorers: Seq[Scorer] = null
  val priorityQueue = new DocScoresPriorityQueue(maxSize)

  override def setScorer(scorer: Scorer): Unit = {
    this.scorer = scorer
    // a little reflection hackery is required here because of a bug in
    // BoostedQuery's scorer's getChildren method
    // https://issues.apache.org/jira/browse/LUCENE-4261
    this.subScorers = scorer.getChildren.asScala.map(childScorer =>
      childScorer.child ...some hackery... ).toList
  }

  override def acceptsDocsOutOfOrder: Boolean = false

  override def collect(doc: Int): Unit = {
    this.scorer.advance(doc)
    val score = this.scorer.score
    val subScores = this.subScorers.map(_.score)
    priorityQueue.insertWithOverflow(DocScores(doc, score, subScores))
  }

  override def setNextReader(context: AtomicReaderContext): Unit = {}

  def getDocSubScores: Seq[DocScores] = {
    val buffer = Buffer.empty[DocScores]
    while (this.priorityQueue.size > 0) {
      buffer += this.priorityQueue.pop
    }
    buffer
  }
}

case class DocScores(doc: Int, score: Float, subScores: Seq[Float])

class DocScoresPriorityQueue(maxSize: Int) extends PriorityQueue[DocScores](maxSize) {
  def lessThan(a: DocScores, b: DocScores) = a.score < b.score
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:58:33.527

有一个 scorer 导航 API：基本思想是您编写一个收集器，并在其 setScorer 方法中，通常您会将对该 Scorer 的引用保存到以后的 score() 每次命中，您现在可以遍历该 Scorer 的 subscorer 的树并且很快。

请注意，记分员有指向创建它们的权重的指针，以及返回到查询的权重。

使用所有这些，您可以隐藏对您在 setScorer 方法中关心的子计分器的引用，例如从 TermQueries 创建的所有子计分器。然后，在对命中进行评分时，您可以调查收集器中这些节点的 freq() 和 score() 之类的内容。

在 3.x 系列中，这是一个仅限于布尔关系的访问者 API，在 4.x 系列中（目前只有一个 alpha 版本），您可以获取每个子评分者的子级+关系，因此它可以与任意查询（包括您编写的自定义查询或其他）。

注意事项：

*   您将需要从您的收集器中的 AcceptDocsOutOfOrder 返回 false，因为您的收集器需要一次处理此文档才能使其正常工作。
*   您可能想要 3.6 系列的错误修复分支 ( [http://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_6/](http://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_6/) ) 或 4.x 的快照 ( [http://svn.apache. org/repos/asf/lucene/dev/branches/branch_4x/](http://svn.apache.org/repos/asf/lucene/dev/branches/branch_4x/)）。这是因为此功能通常不起作用，因为析取（或查询）总是将其子评分器设置为当前文档的“一个文档前面”，直到上周修复了一些问题，而这些修复并没有及时到 3.6.1。有关更多详细信息，请参阅[https://issues.apache.org/jira/browse/LUCENE-3505](https://issues.apache.org/jira/browse/LUCENE-3505)。
*   没有什么好的例子，除了一些简单的测试总结了所有叶节点的词频（见下文）

测试：

*   4.x系列： http: [//svn.apache.org/repos/asf/lucene/dev/branches/branch_4x/lucene/core/src/test/org/apache/lucene/search/TestBooleanQueryVisitSubscorers.java](http://svn.apache.org/repos/asf/lucene/dev/branches/branch_4x/lucene/core/src/test/org/apache/lucene/search/TestBooleanQueryVisitSubscorers.java)
*   3.x系列： http: [//svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_6/lucene/core/src/test/org/apache/lucene/search/TestBooleanQueryVisitSubscorers.java](http://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_6/lucene/core/src/test/org/apache/lucene/search/TestBooleanQueryVisitSubscorers.java)

# drupal-7 - 使用drupal 7 Form API的自定义模块中的多个文件上传字段

> ID：11660591
> 
> 赞同：1
> 
> 时间：2012-07-26T00:16:25.250
> 
> 标签：drupal-7

我正在寻找一种在自定义表单中添加字段的方法，该表单将允许我上传像这样的文件列表：![像这个](../Images/f553820274449d38f3dd094a7284e6c4.png)这是文件模块的文件字段的屏幕截图。

我试过这个：http: [//ygerasimov.com/d7-zip-archive-custom-file-multiple-upload](http://ygerasimov.com/d7-zip-archive-custom-file-multiple-upload) 它使用 ajax 和自定义代码。我的文件保存在数据库中，但在我重新加载页面时不显示......我试图让它工作但没有运气。

我真的希望有人能帮助我。提前致谢， Hervé

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-25T11:45:29.257

您可以将其用于自定义多个上传字段：

```
$form['file'] = array(
  '#type' => 'file',
  '#name' => 'files[]',
  '#title' => t('Upload some photos'),
  '#description' => t('JPG\'s, GIF\'s, and PNG\'s only, 10MB Max Size'),
  '#attributes' => array('multiple' => 'multiple'),
); 
```

# c++ - C ++ STL映射无法识别键

> ID：11660593
> 
> 赞同：4
> 
> 时间：2012-07-26T00:16:56.240
> 
> 标签：c++, stl, map

我有这段代码，CBString 只是我用于某些处理的字符串类

```
 char * scrummyconfigure::dosub(strtype input)
  {
    CBString tstring;
    tstring = input;
    uint begin;
    uint end;

    begin = tstring.findchr('$');
    end = tstring.findchr('}',begin);        

    CBString k = tstring.midstr(begin+2,end-2); // this is BASE
    strtype vname = (strtype) ((const unsigned char*)k);
    strtype bvar = (strtype) "BASE";
    assert(strcmp(bvar,vname) == 0); // this never fails
    // theconf is just a struct with the map subvars
    // subvars is a map<const char *, const char *>
    out(theconf->subvars[bvar]); // always comes up with the value
    out(theconf->subvars[vname]); // always empty

    uint size = end - begin;
    tstring.remove(begin, size);

    return (const char *)tstring; // it's OKAY! it's got an overload that does things correctly
    //inline operator const char* () const { return (const char *)data; } <-- this is how it is declared in the header of the library
  } 
```

为什么 strcmp 总是说字符串是相同的，但只有我声明为 bvar 的变量才返回任何内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T00:23:06.420

> //子变量是一个`map<const char *, const char *>`

这个映射的关键不是一个字符串，而是一个内存地址。相应的检查将是

```
assert( bvar == vname); 
```

这可能会失败。您需要将键类型更改为字符串类（或者`std::string`有意义`CBString`地使用 map.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T00:23:24.763

我假设`strtype`是通过以下方式定义的：

```
typedef char * strtype 
```

您的问题是您假设 vname 和 bvar 具有相同的值，而实际上，它们具有不同的值，每个值都指向包含相同数据的内存块。

`std::map`正在愚蠢地将它们与 == 进行比较，我敢打赌，如果您将它们与 == 进行比较，您会得到错误的结果，正如预期的那样。你为什么不使用这个`std::string`类？

编辑：我改写了你的方法不那么可怕：

```
// implied using namespace std;
string ScrummyConfigure::removeVariableOrSomething(string tstring)
{
    uint begin; // I'll assume uint is a typedef to unsigned int
    uint end;

    begin = tstring.find('$', 0);
    end = tstring.find('}', begin);        

    string vname = tstring.substr(begin + 2, end - 2); // this is supposedly BASE
    assert(vname == "BASE"); // this should be true if vname actually is BASE

    out(this->conf->subvars[bvar]);  // wherever theconf used to be, its now a member
    out(this->conf->subvars[vname]); // of ScrummyConfigure and its been renamed to conf

    uint size = end - begin;
    tstring.erase(begin, size);

    return tstring; // no casting necessary
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-26T00:29:20.543

仅仅因为字符串相同并不意味着 std::map 会将它们视为相同的键。这取决于 std::map 使用的 Compare 类，默认为`less<KeyType>`- 产生与应用小于运算符相同的结果。

您可以定义一个类，该类定义`operator()`为对您的 strtypes 进行适当的比较，并在定义 std::map 时将其作为第三个模板参数传递。或者，按照建议，使用 std::string 作为您的 strtype。

# android - 如何从父视图设置子视图的样式？

> ID：11660600
> 
> 赞同：1
> 
> 时间：2012-07-26T00:17:31.623
> 
> 标签：android, android-layout, android-styles

我目前正试图让我的应用程序看起来正确。但是我在弄清楚如何设置更改主题的方法时遇到了问题。一方面，有没有办法通过代码改变样式？我检查了方法列表，但什么也没看到。这引出了我的实际问题；有没有一种方法可以像 CSS 一样为父级设置样式，然后让它向下流动，但也会根据视图进行更改？我查看了 Android 文档，但没有显示任何示例。希望有人能给我一个关于如何实现这一点的想法，或者如果不可能，也让我知道这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:55:15.593

您应该能够使用样式和主题来做到这一点。我已经使用 Jake whartons Sherlock 操作栏实现了这一点。（我不确定是否有必要）它涉及使用可比性库，它使您也能够使用片段和加载器。[在http://actionbarsherlock.com/download.html](http://actionbarsherlock.com/download.html)查看他的演示代码。查找提及主题的位置，您会找到所需的信息。在演示应用程序中，您可以更改右上角的主题，并查看它如何影响活动的外观和感觉。它还显示了许多可用的功能以及编写它们的代码。我发现这是一个非常宝贵的资源，它应该向您展示如何为您的应用程序设置主题。

# python - python 2.3 版替换 Queue.Queue.task_done()

> ID：11660601
> 
> 赞同：0
> 
> 时间：2012-07-26T00:17:36.693
> 
> 标签：python, multithreading, queue

我在网上找到了一段代码，演示 Python 中的排队多线程。
[http://code.activestate.com/recipes/577187-python-thread-pool/](http://code.activestate.com/recipes/577187-python-thread-pool/)
我试过了，它似乎工作。
除了我正在运行 python 2.3 版。
线程完成后它抱怨没有属性'task_done''join' 我搜索了一下，发现 Queue.task_done() 和 Queue.join() 带有 2.5 或更高版本。
在这种情况下，我最好的选择是什么？
仅供参考：我尝试注释掉第 17 行：self.tasks.task_done()
看起来代码可以运行到完成，除了在每个线程完成后看到此错误
self.tasks.join()
AttributeError: Queue instance has no attribute 'join'
我使用'top'来检查程序启动的线程数正是我指定的。
程序完成后，Linux shell 变得无响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:26:25.133

您也许可以从更新的 Python 版本中复制 Queue.py 文件，并将其复制到您的项目中。我不知道代码是否依赖于较新的功能，但如果不依赖，那么你就准备好了。

# c# - :css3-container XPath 选择器

> ID：11660604
> 
> 赞同：0
> 
> 时间：2012-07-26T00:17:57.753
> 
> 标签：c#, javascript, html, xpath

我在一个 html 文件中有以下代码行，我不知道它是什么以及为什么有一个：infront。但是，我正在处理 DOM 并希望使用 xpath 选择器删除所有类似的节点。我似乎无法使用“//:css-container”来选择元素。

```
<:css3-container style="z-index: 3000; position: absolute; direction: ltr; top: 92px; left: -9998px;"> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:48:00.950

如果它在 DOM 中，您可以尝试

```
//*[local-name() = "css3-container"] 
```

或者

```
//*[local-name() = ":css3-container"] 
```

（如果它不被认为是一个空的命名空间）

# python - 使用makedirs创建文件夹时如何覆盖已存在的文件夹？

> ID：11660605
> 
> 赞同：66
> 
> 时间：2012-07-26T00:18:01.560
> 
> 标签：python, directory, text-files, overwrite

如果目录不存在，以下代码允许我创建一个目录。

```
dir = 'path_to_my_folder'
if not os.path.exists(dir):
    os.makedirs(dir) 
```

程序将使用该文件夹将文本文件写入该文件夹。但是我想在下次打开程序时从一个全新的空文件夹开始。

如果文件夹已经存在，有没有办法覆盖文件夹（并创建一个新的同名文件夹）？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-07-26T00:22:39.073

```
import os
import shutil

dir = 'path_to_my_folder'
if os.path.exists(dir):
    shutil.rmtree(dir)
os.makedirs(dir) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-26T00:23:35.360

```
import os
import shutil

path = 'path_to_my_folder'
if not os.path.exists(path):
    os.makedirs(path)
else:
    shutil.rmtree(path)           # Removes all the subdirectories!
    os.makedirs(path) 
```

那个怎么样？看看[shutil](http://docs.python.org/library/shutil.html)的`Python`图书馆！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-03-12T14:15:38.547

`os.path.exists(dir)`建议检查，但可以通过使用来避免`ignore_errors`

```
dir = 'path_to_my_folder'
shutil.rmtree(dir, ignore_errors=True)
os.makedirs(dir) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T00:26:31.383

说啊

```
dir = 'path_to_my_folder'
if not os.path.exists(dir): # if the directory does not exist
    os.makedirs(dir) # make the directory
else: # the directory exists
    #removes all files in a folder
    for the_file in os.listdir(dir):
        file_path = os.path.join(dir, the_file)
        try:
            if os.path.isfile(file_path):
                os.unlink(file_path) # unlink (delete) the file
        except Exception, e:
            print e 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-22T20:21:35.243

这是一个[EAFP](https://stackoverflow.com/questions/11360858/what-is-the-eafp-principle-in-python)（请求宽恕比许可更容易）版本：

```
import errno
import os
from shutil import rmtree
from uuid import uuid4

path = 'path_to_my_folder'
temp_path = os.path.dirname(path)+'/'+str(uuid4())
try:
    os.renames(path, temp_path)
except OSError as exception:
    if exception.errno != errno.ENOENT:
        raise
else:
    rmtree(temp_path)
os.mkdir(path) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-23T05:01:55.733

```
try:
    os.mkdir(path)
except FileExistsError:
    pass 
```

# javascript - 从主 div 中的子 div 检索单选按钮

> ID：11660610
> 
> 赞同：1
> 
> 时间：2012-07-26T00:18:36.367
> 
> 标签：javascript, jquery, html

我有以下 html .. 1 个主 div 有 2 个子 div。我需要遍历两个 div 并在每个中检索选中的单选按钮。例如：第一个子 div 可能已检查，而第二个 div 已检查 wright，我需要检索它们的值。我该怎么做

```
<DIV>
 <DIV>
  <TABLE>
   <TBODY>
      <TR>
          <TD>
            wrong<INPUT class=XX disabled value=wrong type=radio name=radiobutton>
            wright<INPUT class=XX disabled value=wright type=radio name=radiobutton>
            maybe<INPUT class=XX value=maybe CHECKED type=radio name=radiobutton ></TD>
    </TR></TBODY></TABLE>
</DIV>
<DIV>
   <TABLE><TBODY><TR>
     <TD>
      wrong<INPUT class=XX CHECKED value=wrong type=radio name=radiobutton>
       wright<INPUT class=XX value=wright type=radio name=radiobutton>
       maybe<INPUT class=XX value=maybe type=radio name=radiobutton ></TD>
       </TR></TBODY></TABLE>
     </DIV>
</DIV> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:27:48.780

据我了解，您有两组单选按钮。

所以，这是我的解决方案：

> HTML

```
<div>
  <div>
      <table>
          <tbody>
              <tr>
                  <td>wrong
                      <input class="xx" disabled="disabled" value="wrong" type="radio"
                      name="radiobutton">wright
                      <input class="xx" disabled="disabled" value="wright" type="radio"
                      name="radiobutton">maybe
                      <input class="xx" value="maybe" checked="checked" type="radio" name="radiobutton">
                  </td>
              </tr>
          </tbody>
      </table>
  </div>
  <div>
      <table>
          <tbody>
              <tr>
                  <td>wrong
                      <input class="xx" checked="checked" value="wrong" type="radio" name="radiobutton2">wright
                      <input class="xx" value="wright" type="radio" name="radiobutton2">maybe
                      <input class="xx" value="maybe" type="radio" name="radiobutton2">
                  </td>
              </tr>
          </tbody>
      </table>
  </div>
</div>​ 
```

> jQuery

```
var radiobutton = $("input[name='radiobutton']:checked").val();
var radiobutton2 = $("input[name='radiobutton2']:checked").val();

alert('1st - '+radiobutton+' / 2nd - '+radiobutton2);​ 
```

[演示](http://jsfiddle.net/L48pw/1)

**编辑**

> jQuery

```
var checked = new Array();
var pos = 0;
$("input[type='radio']:checked").each(function(){
    checked[pos] = new Array(2);
    checked[pos]['name'] = $(this).attr('name');
    checked[pos]['value'] = $(this).val();
    pos++;
});

var result = "";
for(i=0; i<pos; i++){
    result += checked[i]['name'] + " - " + checked[i]['value'] + " / ";
}
alert(result); 
```

[演示](http://jsfiddle.net/L48pw/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:24:46.920

这是你在找什么：**工作演示** [http://jsfiddle.net/79syA/](http://jsfiddle.net/79syA/)

在您的 HTML 中，您只`wrong`检查了输入单选，也将您的 html 设为小写，是否有任何理由将其设为大写`:)`

休息一下，希望这符合您的需求，并随时使用演示！`:)`

**代码**

```
$('.XX').each(function(){

    if($(this).is(':checked')){
       alert(" Checked value is ==> " + this.value);
    }        

})​ 
```

# c# - 为什么以下正则表达式与此文本匹配？

> ID：11660614
> 
> 赞同：2
> 
> 时间：2012-07-26T00:19:34.123
> 
> 标签：c#, regex, parsing

我有正则表达式： `(?ms)(?<attribute>\[.+?\]|public|private|\s)+?class`

我有文字：

```
[attribute]
public int a;

[attribute C]
[attribute B]
public class Test{

} 
```

**我想知道为什么我发布的正则表达式匹配：**

```
[attribute]
public int a;

[attribute C]
[attribute B]
public class 
```

**我认为它应该匹配：**

```
[attribute C]
[attribute B]
public class 
```

* * *

如果我错了，请纠正我。我认为应该读取正则表达式的方式是：

> 查找属性（ [ some attribute ] ）或公共关键字或私有关键字或空格。

所以首先正则表达式引擎应该匹配 [attribute]，然后是 '\n'（新行），然后是`public`关键字。在这些之后，关键字`int`不是一个选项，那么它为什么匹配它呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:24:27.557

问题是您使用的点匹配任何内容，包括右方括号、空格和（在单行模式下）换行符：

```
\[.+?\] 
```

你应该改用这个：

```
\[[^\]]+\] 
```

解释：

```
\[ 匹配文字左方括号。
[^\]] 匹配除右方括号之外的任何字符。
+ 一个或多个。
\] 匹配文字右方括号。

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:44:23.867

使用这个`Regex`：

```
((?<attribute>(?:public|private|\[[^\]]+\]))[\r\n\s]+)*class 
```

并给出名为`attribute`. 你的代码可以是这样的：

```
foreach (Match match in Regex.Matches(inputString, @"((?<attribute>(?:public|private|\[[^\]]+\]))[\r\n\s]+)*class"))
{
    var attributes = new List<string>();
    foreach (Capture capture in match.Groups["attribute"].Captures)
    {
        attributes.Add(capture.Value);
    }
} 
```

# ios - 更改 UItabbar 项目的图像，使用情节提要

> ID：11660618
> 
> 赞同：3
> 
> 时间：2012-07-26T00:19:45.153
> 
> 标签：ios, uitabbar

我有以下故事板：

![在此处输入图像描述](../Images/d3aa8b137a5bac0d492de535fad66ebf.png)

如您所见，有一个带有 5 个选项卡的选项卡栏应用程序，在情节提要上，我为每个选项卡分配了徽标。现在，当用户单击特定视图中的单元格时，我想更改其中一个选项卡的图像。我怎样才能做到这一点？我没有标签栏视图控制器或项目的实例，因为情节提要几乎为我完成了所有这些工作。所以我的问题是我必须实施哪些方法来更改图像？如果我需要标签栏控制器，我该如何获取它的实例以及我应该将它指向哪个类？

非常感谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:21:06.647

在任何`UIViewController`属于选项卡栏层次结构的类中，您需要做的就是获得选项卡栏控制器的实例：

```
//In UIViewController
UITabBarController *tabBarController = self.tabBarController; 
```

然后您可以像这样更改图像

```
//Suppose you want to change the 1st (0th) tab bar image
UITabBarItem * tabItem = [tabBarController.tabBar.items objectAtIndex: 0];
tabItem.image = //whatever image you want to change to 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T02:20:28.013

每个 UIViewController 都有一个名为的属性`tabBarItem`，它是`UITabBarItem`标签栏控制器用来设置表示该控制器的图像的属性。您可以对其进行操作以更改相关控制器的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T16:58:47.910

我发现——至少在使用 Swift 的 Xcode 6.1.1 中——对 tabBarItem 的直接操作对我不起作用。

但是，@borrrden 的回答让我走上了正轨。[Apple 的 UITabBarController 文档](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITabBarController_Class/)非常清楚地说明：

> 你不应该直接访问标签栏控制器的标签栏视图。要配置选项卡栏控制器的选项卡，请将为每个选项卡提供根视图的视图控制器分配给 viewControllers 属性。
> 
> ...
> 
> 选项卡栏项通过其相应的视图控制器进行配置。要将标签栏项与视图控制器相关联，请创建 UITabBarItem 类的新实例，为视图控制器适当配置它，并将其分配给视图控制器的 tabBarItem 属性。

因此，据此，以下是我想出的对我有用的东西。

它是用 Swift 编写的，我希望未来的读者可以根据需要对其进行相应的翻译（我还将图像名称更改为超级通用）。

[我还使用了 UIImage 的 imageWithRenderingMode 方法，因此我可以使用自定义图像而不是 iOS 创建的阴影剪影默认图像（我想在此](https://stackoverflow.com/questions/25490337/changing-uitabbaritem-image)感谢@NSHeffalump 的回答......）。

```
 if let viewControllers = tabBarController.viewControllers as? Array<UIViewController> {
        var tabBarItemImageNames = ["TabBarItemImage0","TabBarItemImage1","TabBarItemImage2","TabBarItemImage3","TabBarItemImage4"]
        var vcIndex = 0
        for vc:UIViewController in viewControllers {
            let selectedImage = UIImage(named: tabBarItemImageNames[vcIndex])?.imageWithRenderingMode(UIImageRenderingMode.AlwaysOriginal)
            let image = UIImage(named: tabBarItemImageNames[vcIndex])?.imageWithRenderingMode(UIImageRenderingMode.AlwaysOriginal)
            var tabBarItem = UITabBarItem(title: "", image: image, selectedImage: selectedImage)
            vc.tabBarItem = tabBarItem
            vcIndex++
        }
    } 
```

# ruby - Sqlite3 库在 250 次插入后不会打开

> ID：11660620
> 
> 赞同：0
> 
> 时间：2012-07-26T00:19:57.607
> 
> 标签：ruby, sqlite, sqlite3-ruby

我正在尝试使用 ruby​​ 脚本将大量信息插入到 Sqlite3 数据库中。在 250 db_prepare_location.execute 执行此操作后，它停止工作说：

```
.rvm/gems/ruby-1.9.2-p290/gems/sqlite3-1.3.6/lib/sqlite3/statement.rb:67:in `step': unable to open database file (SQLite3::CantOpenException)
    from /Users/ashley/.rvm/gems/ruby-1.9.2-p290/gems/sqlite3-1.3.6/lib/sqlite3/statement.rb:67:in `execute'
    from programs.rb:57:in `get_program_details'
    from programs.rb:22:in `block in get_link'
    from /Users/ashley/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/csv.rb:1768:in `each'
    from /Users/ashley/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/csv.rb:1202:in `block in foreach'
    from /Users/ashley/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/csv.rb:1340:in `open'
    from /Users/ashley/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/csv.rb:1201:in `foreach'
    from programs.rb:20:in `get_link'
    from programs.rb:63:in `<module:Test>'
    from programs.rb:15:in `<main>' 
```

这是我的代码：

```
require 'net/http'
require 'json'
require 'nokogiri'
require 'open-uri'
require 'csv'
require 'sqlite3'
require "bundler/setup"
require "capybara"
require "capybara/dsl"

Capybara.run_server = false
Capybara.default_driver = :selenium
Capybara.current_driver = :selenium

module Test
  class Tree
    include Capybara::DSL

    def get_link
      CSV.foreach("links.csv") do |row|
        link = row[0]
        get_details(link)
      end
    end

    def get_details(link)
      db = SQLite3::Database.open "development.sqlite3"
      address = []
      address_text = []
      visit("#{link}")
      name = find("#listing_detail_header").find("h3").text
      page.find(:xpath, "//div[@id='listing_detail_header']").all(:xpath, "//span/span").each {|span| address << span }
      if address.size == 4
        street_address = address[0].text
        address.shift
        address.each {|a| address_text << a.text }
        city_state_address = address_text.join(", ")
      else
        puts link
        street_address = ""
        city_state_address = ""
      end
      if page.has_css?('.provider-click_to_call')
        find(".provider-click_to_call").click
        phone_number = find("#phone_number").text.gsub(/[()]/, "").gsub(" ", "-")
      else
        phone_number = ""
      end
      if page.has_css?('.provider-website_link')
        website = find(".provider-website_link")[:href]
      else
        website = ""
      end
      description = find(".listing_details_list").find("p").text
      db_prepare_location = db.prepare("INSERT INTO programs(name, city_state_address, street_address, phone_number, website, description) VALUES (?, ?, ?, ?, ?, ?)")
      db_prepare_location.bind_params name, city_state_address, street_address, phone_number, website, description
      db_prepare_location.execute
    end
end

test = Test::Tree.new
test.get_link
end 
```

这里有什么问题，我能做些什么来解决它？让我知道是否需要其他信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T02:15:39.243

您可能会用完文件描述符。每次调用时`get_details`，都会打开 SQLite 数据库：

```
db = SQLite3::Database.open "development.sqlite3" 
```

但你从来没有明确地关闭它；相反，您依靠垃圾收集器来清理所有`db`s 并关闭所有文件描述符。每次打开数据库，都需要分配一个文件描述符，关闭数据库释放文件描述符。如果你调用`get_details`的速度比 GC 清理的速度快，你将用完文件描述符，随后的`SQLite3::Database.open`调用将失败。

尝试`db.close`在末尾添加`get_details`。

您可能还必须关闭准备好的语句，因此您应该`db_prepare_location.close`在之前`db.close`：

```
def get_details
  #...
  db_prepare_location.close
  db.close
end 
```

是的，Ruby 具有垃圾收集功能，但这并不意味着您不必手动管理资源。

另一种选择（DGM 暗示）是在构造函数中打开与数据库的连接：

```
def initialize
  @db = SQLite3::Database.open "development.sqlite3"
end 
```

然后挂断`SQLite3::Database.open`电话`get_details`并`@db`改为使用。你不再需要一个`db.close`in`get_details`但你仍然想要这个`db_prepare_location.close`电话。

# jquery - jQuery 使用 AJAX 更改下拉菜单

> ID：11660621
> 
> 赞同：0
> 
> 时间：2012-07-26T00:20:21.393
> 
> 标签：jquery, ajax

我需要一个单选按钮来更改下拉菜单，如果它工作得最多，只是不确定一些事情。我想将 CreativeID 作为 ID，将 CreativeName 作为名称。这是我的 AJAX：

```
$('input[name=creativeType]').change(function(){
        $.ajax({
            url: '/app/components/MailingsReport.cfc',
            //POST method is used
            type: "POST",
            //pass the data 
            data: {
                method: "getCreative",
                CreativeType: $('input[name=creativeType]:checked').val(),
                datasource: "shopping_cart"
                 },
            dataType: "xml",
            //contentType: "application/text; charset=utf-8",
            success: function(xml){
                $('#creative option').remove();
                    $(xml).find('number').each(function()
                    {

$("#creative").append('<option value="' + $(this).text() + '">' + $(this).find('CREATIVENAME').text() + '<\/option>');

                    });                
            }
        }); 
```

这是我的退货数据：

```
<wddxPacket version='1.0'><header/><data><recordset rowCount='3' fieldNames='CREATIVEID,CREATIVENAME' type='coldfusion.sql.QueryTable'><field name='CREATIVEID'><number>52.0</number><number>65.0</number><number>77.0</number></field><field name='CREATIVENAME'><string>Product One</string><string>Product Two</string><string>Product Three</string></field></recordset></data></wddxPacket> 
```

我的问题：我只是不知道如何填充下拉列表，所以 ID 是值并且产品名称显示在选项标签之间。对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:45:09.760

```
var numbers = $(xml).find('number');
var strings = $(xml).find('string');
for (var i = 0; i < numbers.length; i++) {
    $("#creative").append('<option value="' + numbers[i].innerHTML + '">' + strings[i].innerHTML + '<\/option>');
} 
```

# sql - SQL 从 3 列返回唯一数据及其显示次数

> ID：11660622
> 
> 赞同：2
> 
> 时间：2012-07-26T00:20:41.770
> 
> 标签：sql

我有的：

```
SELECT SGFORM.FFORMDESC, SGFORM.FPAPERNAME, SGFORM.FPAPERDESC
FROM SGFORM
Group by SGFORM.FPAPERNAME, SGFORM.FPAPERDESC, SGFORM.FFORMDESC
Having Count (*) > 0; 
```

这给了我一个独特项目的列表，但不是计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:22:20.247

```
SELECT SGFORM.FFORMDESC, SGFORM.FPAPERNAME, SGFORM.FPAPERDESC, COUNT(*)
FROM SGFORM 
Group by SGFORM.FPAPERNAME, SGFORM.FPAPERDESC, SGFORM.FFORMDESC 
Having Count (*) > 0 
```

# iphone - 应用程序在运行时要求 AppleID

> ID：11660623
> 
> 赞同：5
> 
> 时间：2012-07-26T00:20:44.147
> 
> 标签：iphone, ios, storekit, in-app

我正在使用 Apple 建议的交易 VerificationController 代码更新我的 iOS 应用程序，以验证应用程序内购买，因为最近发布的“黑客”允许人们购买应用内购买而无需支付，因为来自欺骗性 Apple 服务器的欺骗性收据。

我已经集成了所有内容，现在正在测试。我已多次运行该应用程序，并且验证内容已运行多次。

我想测试有关购买的所有内容，包括从全新的应用程序和 AppleID 开始。所以我从我的测试设备上完全删除了这个应用程序。我在 iTunes Connect 中创建了一个全新的“测试用户”AppleID。我去了我的测试设备上的设置应用程序，去商店，并将设备的默认 AppleID 更改为这个新创建的 AppleID。

我使用调试器从 Xcode 重新运行应用程序，它将应用程序重新安装到测试设备上并重新运行。

问题是，几乎在启动时，测试设备会立即显示 AppleID 密码警报类型的视图，并询问我最初用于测试所有内容的旧 AppleID 的密码，包括原始应用内购买和验证。它不会要求新设备 AppleID 的密码，如在商店下的“设置”应用程序中设置的那样。

当我将它作为一个新应用程序运行时，验证码不会运行，并且我的任何例程中都没有运行任何与 Apple StoreKit 内容相关的代码，除了一个单独的

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:observer]; 
```

（观察者是我的 StoreKit 东西的委托对象，并且已创建但其中没有任何例程运行，除了 init 和 init 什么都不做，除了为自己设置一个静态变量以创建一个单例类型类）

出于检查目的，我还添加了

```
NSLog(@"in App Delegate, payment queue transactions are %@", [[SKPaymentQueue defaultQueue] transactions]); 
```

这表明没有旧交易。

我不知道为什么在新安装应用程序时它开始询问原始测试用户的 AppleID，设备商店的 AppleID 不同，并且我无法识别正在运行的访问 StoreKit 的代码（除了上面提到的）。

对此的任何见解将不胜感激。

ETA：在密码对话框中点击取消不会导致任何额外代码在应用程序中运行，也不会阻止应用程序运行。

如果我随后进入应用内购买屏幕（应用程序会在该屏幕上查询商店以获取可用的应用内购买），它会以相同的方式再次在旧 AppleID 上要求输入密码。我可以取消，似乎什么都没有发生。如果我真的在我的应用程序中触摸“恢复购买”按钮，它会要求输入在商店设置中设置的新 AppleID 上的密码。我没有超过这一点，因为我想了解正在发生的事情，并且不想通过完成/尝试在新 AppleID 下进行恢复或购买来搞砸事情。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-12T09:54:33.290

我遇到了完全相同的问题，并努力解决了几个小时。

如前所述，`StoreKit`在系统范围内工作，系统不断要求登录以进行任何交易

```
[[SKPaymentQueue defaultQueue] finishTransaction:transaction]; 
```

没有被调用。我正在使用[RMStore](https://github.com/robotmedia/RMStore)，查看源代码我发现了这个可疑行：

```
if (error.code != RMStoreErrorCodeUnableToCompleteVerification) { 
    // If we were unable to complete the verification we want StoreKit to keep reminding us of the transaction
    [queue finishTransaction:transaction];
} 
```

大概是这样的：

*   我首先使用我的测试 Apple ID 购买了该产品
*   我出于测试目的删除了产品
*   我试图再次购买它。此时我输入了错误的凭据，并且 RMStore 没有调用`[[SKPaymentQueue defaultQueue] finishTransaction:`.
*   该应用程序开始在每次启动时要求登录。

我尝试使用不同的测试帐户登录，但仍然出现相同的警报，要求使用旧的 Apple ID 登录。我还在 iTunes Connect 上删除了 Apple ID，但这并没有帮助。

最后，我设法通过使用相同帐户恢复（而不是购买）产品来解决。我不知道是否有其他方法可以解决这个问题（即重置 StoreKit 队列）。无论如何，请始终记住调用`finishTransaction`您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:16:17.237

`StoreKit.framework`在系统范围内工作，因此显示的 Apple ID 与您的应用程序没有任何关系，重新安装应用程序不会有任何影响。

但是，您可以[从 iTunes Store / App Store 注销](http://support.apple.com/kb/HT1311?viewlocale=en_US&locale=en_US)：

1.  点击**设置 → iTunes 和应用商店**
2.  轻点已登录的 Apple ID（顶部的按钮）
3.  点击“退出”

当您再次使用您的应用程序时，`StoreKit`应提示输入电子邮件和密码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T22:50:34.387

修复步骤：

1.  从 App Store 开始，拉起多任务栏并点击设置应用程序。
2.  向下滚动并点击“常规”。
3.  向下滚动并点击“日期和时间”。
4.  如果“自动设置”开关打开，请将其关闭。
5.  点击“设置日期和时间”。
6.  点击显示“[星期几]、[月][日]、2013 年”的字段。
7.  将年轮调整为“2012”并退出“日期和时间”部分。
8.  多任务返回 App Store 并尝试再次下载该应用程序。
9.  在“无法连接...”模式中点击“取消”。
10.  返回到原生设置 > 常规 > 日期和时间 > 设置日期和时间。
11.  返回月、日、年轮并将年份更改为“2030”。
12.  返回主屏幕并启动 App Store。
13.  “无法连接到商店”模式应立即出现。
14.  点击“确定”，然后多任务返回设置。
15.  再次回到月份，日期，年份轮并将年份更改回“2013。
16.  多任务返回 App Store 并尝试再次下载该应用程序。

# cocoa - 沙盒化 Cocoa 应用程序组

> ID：11660624
> 
> 赞同：2
> 
> 时间：2012-07-26T00:20:45.450
> 
> 标签：cocoa, appstore-sandbox

权利文档描述了一种方法，在该方法中，[由单个开发团队生产的多个应用程序可以共享对特殊组容器的访问权限](http://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html#//apple_ref/doc/uid/TP40011195-CH4-SW19)

我已将授权密钥添加到主应用程序和包含在主应用程序包中的帮助应用程序。永远不会创建组目录，并且获取路径的方法 - `[NSURL containerURLForSecurityApplicationGroupIdentifier:]`- 实际上并不存在于任何标题中。

创建共享组容器我缺少什么？

*更新*：添加权利和组容器创建

这是我的主应用程序和帮助程序应用程序的权利文件。（将 TEAM_ID 替换为我的实际 ID）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.security.app-sandbox</key>
    <true/>
    <key>com.apple.security.application-groups</key>
    <array>
        <string>TEAM_ID.com.pinepointsoftware</string>
    </array>
</dict>
</plist> 
```

我尝试根据开发论坛的一些信息自己创建 Group Container 目录：

```
NSFileManager *fm = [NSFileManager defaultManager];
NSString *path = [@"~/Library/Group Containers/TEAM_ID.com.pinepointsoftware" stringByExpandingTildeInPath];

if ([fm createDirectoryAtPath:path withIntermediateDirectories:YES attributes:nil error:NULL]) {
    [fm createFileAtPath:[path stringByAppendingPathComponent:@"test.txt"] contents:nil attributes:nil];
} 
```

在主应用程序和辅助应用程序中执行该操作会在它们的每个沙箱内创建两个不同的目录。

*我从 Apple AppSandboxLoginItemXPCDemo*中找到了一个示例项目，它使用 XPC 的应用程序组。我可以通过更改权利和捆绑标识符以匹配我的团队来使其工作，但无法共享组容器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T07:59:20.527

“~”将在沙盒环境中自动转换为您的容器目录。

因此，一种方法是在“~”后面加上一些后退（“../”），直到你到达 ~/Library，然后你从它开始创建你的组容器。

# python - 带有 WSGI gunicorn 的 Django 中的 Python 应用程序导入错误

> ID：11660627
> 
> 赞同：5
> 
> 时间：2012-07-26T00:20:54.367
> 
> 标签：python, django, import, wsgi, gunicorn

我正在尝试在 Heroku 上部署一个带有 gunicorn 的 Django 应用程序，但遇到了一些问题。

当我开始我的项目时，我的 Django 版本是 1.3 并且不包含标准 wsgi.py 模块，所以我将标准 wsgi 模块添加为 top/wsgi.py（top 是我的项目名称，turk 是我的应用程序名称，topturk 是包含目录 - 保留因此错误日志在下面有意义）。

现在当我跑

```
gunicorn top.wsgi:application -b 0.0.0.0:$PORT 
```

服务器成功启动，

```
19:00:42 web.1     | started with pid 7869
19:00:42 web.1     | 2012-07-25 19:00:42 [7869] [INFO] Starting gunicorn 0.14.5
19:00:42 web.1     | 2012-07-25 19:00:42 [7869] [INFO] Listening at: http://0.0.0.0:5000 (7869)
19:00:42 web.1     | 2012-07-25 19:00:42 [7869] [INFO] Using worker: sync
19:00:42 web.1     | 2012-07-25 19:00:42 [7870] [INFO] Booting worker with pid: 7870 
```

但是当我导航到 0.0.0.0:5000 时，我得到一个内部服务器错误：

```
19:00:45 web.1     | 2012-07-25 17:00:45 [7870] [ERROR] Error handling request
19:00:45 web.1     | Traceback (most recent call last):
19:00:45 web.1     |   File "/Users/intenex/Dropbox/code/django/topturk/venv/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 102, in handle_request
19:00:45 web.1     |     respiter = self.wsgi(environ, resp.start_response)
19:00:45 web.1     |   File "/Users/intenex/Dropbox/code/django/topturk/venv/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 219, in __call__
19:00:45 web.1     |     self.load_middleware()
19:00:45 web.1     |   File "/Users/intenex/Dropbox/code/django/topturk/venv/lib/python2.7/site-packages/django/core/handlers/base.py", line 47, in load_middleware
19:00:45 web.1     |     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
19:00:45 web.1     | ImproperlyConfigured: Error importing middleware turk.middleware.subdomain: "No module named turk.middleware.subdomain"
19:00:47 web.1     | 2012-07-25 17:00:47 [7870] [ERROR] Error handling request
19:00:47 web.1     | Traceback (most recent call last):
19:00:47 web.1     |   File "/Users/intenex/Dropbox/code/django/topturk/venv/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 102, in handle_request
19:00:47 web.1     |     respiter = self.wsgi(environ, resp.start_response)
19:00:47 web.1     |   File "/Users/intenex/Dropbox/code/django/topturk/venv/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 219, in __call__
19:00:47 web.1     |     self.load_middleware()
19:00:47 web.1     |   File "/Users/intenex/Dropbox/code/django/topturk/venv/lib/python2.7/site-packages/django/core/handlers/base.py", line 47, in load_middleware
19:00:47 web.1     |     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
19:00:47 web.1     | ImproperlyConfigured: Error importing middleware turk.middleware.subdomain: "No module named turk.middleware.subdomain" 
```

我假设这是一个 python 路径错误，服务器不知道如何从我的应用程序目录导入

相关的导入代码在设置中：

```
MIDDLEWARE_CLASSES = (
    'turk.middleware.subdomain.SubdomainMiddleware',
    'turk.middleware.removewww.RemoveWWWMiddleware',
) 
```

我试图通过在我的 settings.py 文件顶部将我的应用程序目录插入到 sys.path 中来解决这个问题，如下所示：

```
PROJECT_ROOT = os.path.dirname(os.path.realpath(__file__))
sys.path.insert(1, PROJECT_ROOT+'/turk/') 
```

我已经验证将应用程序目录添加到路径中，但仍然没有骰子。有任何想法吗？还

```
sys.path.insert(1, PROJECT_ROOT+'/turk/') 
```

看起来很骇人，并在路径中添加了至少两个目录副本，在 Django 中附加到 PYTHON_PATH 的正确方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T01:02:27.000

想通了我的问题。需要将项目目录添加到 Python 路径，而不是应用程序目录 - 即 topturk/top 而不是 topturk/top/turk 以便导入 turk 目录模块。

```
python top/manage.py run_gunicorn 
```

和

```
python top/manage.py runserver 
```

工作得很好，因为根据 Python 路径文档，调用模块的目录总是作为元素 0 添加到 Python 路径元组中 - 所以当使用 top/manage.py 时，topturk/top 总是在 Python 路径中。

然而，对于 heroku，Procfile 位于项目的父目录中，topturk 而不是 topturk/top，因此当运行 Procfile 命令时，topturk 被添加到 Python 路径而不是 topturk/top，因此会出现错误。

事后看来，这就是 Django 文档在本节最后一句中所指的内容：[https ://docs.djangoproject.com/en/dev/howto/deployment/wsgi/gunicorn/#running-django-in -gunicorn-as-a-generic-wsgi-application](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/gunicorn/#running-django-in-gunicorn-as-a-generic-wsgi-application)，他们说为了运行这个命令，项目必须在 Python 路径上。

通过添加解决的问题

```
sys.path.insert(1, os.path.dirname(os.path.realpath(__file__))) 
```

到 settings.py 或 wsgi.py - 添加到 settings.py 因为这似乎是其他人推荐的（http://codepatter.com/2009/04/10/how-to-add-locations-to- python-path-for-reusable-django-apps/)，但不确定放置插入的*最佳位置是什么。*有人知道吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-23T12:14:20.277

上面的方法现在已经被 gunicorn 弃用了。当我尝试相同时，如果失败并显示警告消息！

(venv)root@ip-172-31-23-172:~/myproj# python manage.py run_gunicorn 0.0.0.0:8001

！！！

！！！警告：此命令已弃用。

！！！

！！！您现在应该使用 WSGI 接口运行您的应用程序

！！！与您的项目一起安装。前任。：

！！！

！！！gunicorn myproject.wsgi:应用程序

！！！

！！！请参阅[https://docs.djangoproject.com/en/1.5/howto/deployment/wsgi/gunicorn/](https://docs.djangoproject.com/en/1.5/howto/deployment/wsgi/gunicorn/)

！！！了解更多信息。

！！！

因此，我尝试了以下命令，它对我有用。

```
gunicorn myproject.wsgi:application 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T13:53:41.310

将“gunicorn”添加到 settings.py/INSTALLED_APPS 并使用

```
python manage.py run_gunicorn 127.0.0.0:8001 
```

（无论你喜欢什么端口）欲了解更多信息，请访问：[https ://pypi.python.org/pypi/gunicorn/](https://pypi.python.org/pypi/gunicorn/)

# android - 如何在 Android 中不使用线程或类似的东西创建启动画面？

> ID：11660629
> 
> 赞同：0
> 
> 时间：2012-07-26T00:21:12.610
> 
> 标签：android, multithreading, gif, splash-screen

我想在开始的 5 秒内介绍我的标志。但它必须是动感的。我用线程我的标志在 5 秒内停止。我想也许我可以使用“gif”，但它不能工作。我想展示我的标志动感。我怎么能在Android中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:16:28.430

如果您的意思是要显示 5 秒的初始屏幕然后继续，只需在 Activity 的 onCreate 中使用一个处理程序并在 5000 毫秒处发布一个延迟的可运行文件。在可运行文件中，只需启动一个新活动并删除处理程序的回调。如果您的意思是要淡入一些图像，那么您将需要一个 alpha 动画。

# android - 某些字符的神秘 URL 解码 - Android URI / Google App Engine

> ID：11660638
> 
> 赞同：1
> 
> 时间：2012-07-26T00:22:26.877
> 
> 标签：android, google-app-engine, url, url-encoding, urldecode

我有一个奇怪的问题，也许有人有洞察力。我使用以下代码将查询字符串编码为 Android 上的 URL：

```
request = REQUEST_BASE + "?action=loadauthor&author=" + URLEncoder.encode(author, "UTF-8"); 
```

然后我在字符串中添加一些其他参数并创建一个如下所示的 URI：

```
uri = new URI(request); 
```

在某个时刻，我提取查询字符串来生成校验和：

```
uri.getRawQuery().getBytes(); 
```

然后我发送它：

```
HttpGet get = new HttpGet(uri); 
```

然后在 Appengine 服务器上检索字符串并尝试匹配校验和：

```
String query = req.getQueryString(); 
```

通常，这可以正常工作。但是，在前往服务器的途中似乎有一些字符未编码。例如，

action=loadauthor&author=Charles+Alexander+%28Ohiyesa%29+Eastman×tamp=1343261225838&user=1479845600

在服务器日志（和 GAE 应用程序）中显示为：

action=loadauthor&author=Charles+Alexander+(Ohiyesa)+Eastman×tamp=1343261226837&user=1479845600

这只发生在少数字符（如括号）上。其他字符始终保持编码。有没有人想过我可能做错了什么？任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:49:38.220

我从来没有找到解决这个问题的方法。在将内容发送到服务器之前，我通过在客户端上取消编码某些字符来解决它：

```
request = request.replace("%28", "(");
request = request.replace("%29", ")");
request = request.replace("%27", "'"); 
```

如果有人有更好的解决方案，我相信我（和其他人）会感兴趣！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:34:27.957

URLEncoder 不对括号和某些其他字符进行编码，因为它们对于大多数服务器来说应该是“安全的”。请参阅[URLEncoder](http://developer.android.com/reference/java/net/URLEncoder.html)。如有必要，您必须自己更换这些。

例子：

```
URI uri = new URI(request.replace("(","%28")); 
```

如果需要大量替换，可以试试 request.replaceAll(String regularExpression, String replacement)。当然，这需要了解正则表达式。

# coldfusion - 什么是冷泉 & eqv in wirebox?

> ID：11660640
> 
> 赞同：0
> 
> 时间：2012-07-26T00:22:36.550
> 
> 标签：coldfusion, coldbox, coldspring

我正在将我的 Coldspring xml 移植到 Wirebox 中，但我被卡住了。

`<map>`在 Coldspring 中可以创建一个单例结构，然后通过构造函数或设置器将该结构传递给“bean”。并`<list>`创建一个数组。

我在 Wirebox.cfc 中写什么来做同样的事情？

```
<bean id="Foo" class="com.foo">
    <constructor-arg name="something">
        <map>
            <entry key="apple">
                <ref bean="apple"/>
            </entry>                
            <entry key="banana">                    
                <ref bean="banana"/>
            </entry>                    
        </map>
    </constructor-arg>
</bean>

<bean id="bar" class="com.bar">
    <constructor-arg name="anArray">
        <list>
            <bean class="com.XX"/>
            <bean class="com.YY"/>
        </list>
    </constructor-arg>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:51:07.413

**更新：**在阅读了 ColdSpring 的做法后，我找到了一种干净的方法来支持这一点。

首先，使用 2 种方法创建一个 cfc：

```
component 
{
    struct function buildStruct()   {
        return arguments;
    }

    array function buildArray()     {
        var array = [];

        for (var index = 1; index <= arrayLen(arguments); index++)
            array[index] = arguments[index];

        return array;
    }
} 
```

然后在wirebox config.cfc 中：

```
map("Factory")
        .to("com.util.wirebox.Factory")
        .asSingleton()
        .noAutowire();    

map("something")
        .toFactoryMethod(factory="Factory", method="buildStruct")
        .methodArg(name="apple", ref="apple")
        .methodArg(name="banana", ref="banana");

map("Foo").to("com.Foo").initArg(name="something", ref="something").asSingleton(); 
```

原答案：

[Luis Majano 的回答](http://pastebin.com/KLLmigbj)：

```
// Map Binder so you can do utility methods
map("myBinder").toValue( this );
// Map the singleton maps
map("s1Map").toFactoryMethod("myBinder", "buildMap")
    .methodArg(name="mapType", value="1");

// Map A service with a singleton map
map("Service").to("path")
    .initArg(name="myMap", ref="s1Map"); 
```

他建议我提交 ER，这里是：[http ://coldbox.assembla.com/spaces/coldbox/support/tickets/1387-support-for--list--and--map--of-coldspring -xml](http://coldbox.assembla.com/spaces/coldbox/support/tickets/1387-support-for--list--and--map--of-coldspring-xml)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T00:56:20.053

让我们分解一下，看看这里发生了什么。

1.) 您正在创建一个 id 为 foo 的新 bean，并将其映射到 com.foo。要在 Wirebox 中执行此操作，请使用 map 方法并传入您以后要引用它的任何键。接下来使用 to 方法将该键映射到路径
2.) 您希望将映射（结构）传递给组件的 init 方法。为此，只需传入一个正常的结构。这可以是任何值，包括使用 initWith 方法的其他 bean。

```
<cfscript>
    map("Foo")
        .to("com.foo")
        .initWith({apple=apple,banana=banana})
</cfscript> 
```

您还可以下载 ColdFusion builder 的 Coldbox 插件。这有一个不错的小实用程序，可以让您右键单击冷泉定义文件并将其转换为线盒。希望这可以帮助。

# c# - 将指针转换为 MemoryStream？

> ID：11660643
> 
> 赞同：2
> 
> 时间：2012-07-26T00:22:49.623
> 
> 标签：c#, wpf, clipboard

我正在尝试从剪贴板中获取与*设备无关的位图。*我很清楚这可以通过 .NET Framework 中内置的 Clipboard.GetData 函数来完成，但由于它有很多错误（如网络上的许多地方所记录的那样），我只想使用 API。

我编写了以下有效的代码。

```
//i can correctly cast this to a MemoryStream
MemoryStream ms = Clipboard.GetData("DeviceIndependentBitmap") as MemoryStream; 
```

但我想将它与 API 一起使用，它只是返回一个以某种方式指向流的指针（一个 IntPtr）。我看了一下[UnmanagedMemoryStream](http://msdn.microsoft.com/en-us/library/system.io.unmanagedmemorystream.aspx)但不明白如何正确地将其转换`IntPtr`为那个。

这是我的 API 代码（使用[GetClipboardData](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649039%28v=vs.85%29.aspx) API，其中将`CF_DIB`格式设置为其参数）。

```
IntPtr p = GetClipboardData(8);
//what do I do from here to get a MemoryStream from this pointer? 
```

我有点困惑。我自己已经研究过了，但想不出有用的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T00:46:19.297

正如你所说，你可以使用[`UnmanagedMemoryStream(byte* pointer, long length)`](http://msdn.microsoft.com/en-us/library/zw66yex7.aspx)和使用它，你应该有一个指针和字节的长度。所以你可以使用[`IntPtr.ToPointer()`](http://msdn.microsoft.com/en-gb/library/system.intptr.topointer.aspx)方法来获取指针，但你应该知道内存内容的长度。

```
UnmanagedMemoryStream unmanagedmemstream = UnmanagedMemoryStream(p.ToPointer(), 100); 
```

还有另一种检索字节数组的方法，但在这里你应该知道你想要的内存字节的长度，它是[`Marshal.Copy(IntPtr source, byte[] destination, int startIndex,int length)`](http://msdn.microsoft.com/en-us/library/ms146631.aspx)：

```
byte[] buffer = new byte[100];
Marshal.Copy(p , buffer, 0, buffer.Length); 
```

# xml - 经典 ASP 读取 XML 文件中的 CSV 信息

> ID：11660647
> 
> 赞同：1
> 
> 时间：2012-07-26T00:23:09.093
> 
> 标签：xml, dom, csv, asp-classic

我有一个脚本可以毫无问题地使用 DOM 读取 XML 文件。如果我检查结果，我会得到相关节点中包含的 CSV 信息。但是，我在阅读该信息时遇到了问题。我有一个包含它作为文本/字符串的变量，但我不知道如何根据新行拆分该文本以分隔每个 CSV 信息。由于我在网络上的搜索导致非常缺乏结果，我允许我向社区提出这个问题。

注意：我已经尝试过类似的东西：

```
myCsv = Replace(myCsv,vbCrLf,"<br>")
myCsv = Split(myCsv, "<br>") 
```

或喜欢：`myCsv = Split(myCsv, vbCrLf)`。

谢谢 ！问候，菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:53:55.633

XML 解析器会将 XML 中的任何 CRLF 序列简化为 LF。因此，您应该使用这一行：

```
myCsv = Split(myCsv, vbLf) 
```

# jquery - 从父级拖动时禁用父级可放置框

> ID：11660660
> 
> 赞同：1
> 
> 时间：2012-07-26T00:24:31.873
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

[http://jsfiddle.net/xSQBw/](http://jsfiddle.net/xSQBw/)演示了我的问题。请注意，当您将一个盒子拖出其父级并将其带回父级时，父级将接受该元素。我需要在拖动孩子时禁用父母的可放置性。然后我需要在孩子被丢弃后重新启用 droppable'ness。

我尝试使用 start: 和 stop: 方法进行 droppable，但是，让正确的元素禁用/重新启用是棘手的、笨拙的，并且无论如何都不起作用。

这是我正在尝试使用 droppable 处理程序的示例：

```
$('<fieldset />',
{
    id: login,
    level: self.levelValue,
    class: 'member ' + employeeClass,
}).appendTo('#columnWrapDiv')
  .droppable(
    {
        hoverClass: 'hovered',
        drop: function(event,ui) { /* removed */}); 
```

还有我的可拖动：

```
 $('.class')
  .draggable(
  {
      containment: '#ttkanbanDiv',
      cursor: 'crosshairs',
      revert: true,
      opacity: 0.4,
      start: 
        function(ui)
        {
            var id = $($($(ui).attr('srcElement'))
                        .parents()
                        .find('.ui-droppable')[0]).attr('id');
            $('#' + id).removeClass('ui-droppable');
        },
      stop:
        function(ui)
        {
            $($($(ui).attr('srcElement'))
                .parents()
                .find('.ui-droppable')[0])
                .addClass('ui-droppable');
        },
      zindex: 'auto',
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:24:31.873

和修复：http: [//jsfiddle.net/xSQBw/1/](http://jsfiddle.net/xSQBw/1/)

使其工作的特定代码（感谢 irc.freenode.net #jquery 中的 Shoky）：

```
$('#unassignedDiv,.member').droppable({
    hoverClass: 'hovered',
    accept: function(draggable) {
        draggable = draggable[0];
        var droppable = this;
        return !$.contains(droppable, draggable);
    },
    drop: ... 
```

# javascript - 如何连续运行计时器？（不要从头开始，当你刷新时）

> ID：11660662
> 
> 赞同：0
> 
> 时间：2012-07-26T00:24:35.333
> 
> 标签：javascript, timer

我的计时器代码仅在分钟和秒为 0 时发出警报：

```
status = false;
hour_to_start = some_value; // THIS VALUE IS PUT FOR OTHER PERSON
min = 15; //THIS VALUE IS PUT FOR ANOTHER PERSON
seg = 60;
function timecamisa(){
    if (seg > 0){
    seg--;
}else{
    if(seg==0){
        min--;
        seg=60;
    }
}
if(min == 0 && seg==0){
    // END - STOP ALL
    min= 0;
    seg = 0;
    status = true;
}
var timer = min + ' minutos ' + seg + ' segundos';
document.getElementById("times-get").innerHTML = timer;
if(status != true){
    setTimeout("timecamisa()",1000)//This reload this function (timecamisa())
}else{
    alert("END!");
} 
```

在我的 HTML 中，我有一个`<span id="times-get">`打印计时器的位置。但是，当我按 F5 时，我的计时器会回到开头，并且不会从您离开的地方继续……那么，该怎么做呢？有人有例子吗？

我的目标是我的计时器与我的变量 'hour_to_start' 和 'min' 一起工作，其中.. 这个计时器显示来自我的变量 'hour_to_start' 在 'x' 'min' （我的另一个变量）中的倒计时。当变量 MIN 为 0 时（即完成分钟）.. 提醒任何事情。

* * *

## 更新！

好的，我用 Jquery Plugin 倒数计时器来做这件事。对超过 1 个计时器非常有用。

现在，我的问题是......当我改变我的电脑的时间时，这个计时器也会改变。

当您更改我机器的时间、日期和/或时间时，如何避免更改我的计时器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:48:45.440

您将需要从您的服务器或某个远程服务器（例如，通过来自其他服务器的 javascript）获取时间。如果您使用 javascript 获取时间，它将始终取决于用户机器的时钟。

# makefile - 是否有“omake -P”（服务器模式）的替代方案？

> ID：11660664
> 
> 赞同：0
> 
> 时间：2012-07-26T00:24:50.930
> 
> 标签：makefile, build-automation, omake

omake 构建系统具有称为“服务器模式”的令人敬畏的功能，使用命令行开关“omake -P”调用。这将导致 omake 监视文件系统的任何文件更改——当有文件更改时，它将启动适当的构建操作。

不幸的是，omake 似乎不再得到积极维护，并且 -P 功能在 Ubuntu 12.04 上存在严重问题。（如果有人关心，我可以详细讨论这些）。

有谁知道像 make/omake 这样具有类似于 omake -P 的功能的构建系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:35:00.070

这方面的困难部分是定义所有要观看的文件（我认为无论如何你都必须使用 omake）。您可以很容易地编写代码来查看文件并启动操作。

如果我是你，我会更倾向于找到一个非常灵活的 make 系统并实现文件监视部分 msyelf。

问题是，我真正喜欢的所有构建系统都是在 Java 上实现的，我猜这不是你的一杯茶（但如果你不介意的话，看看 gant，应该足够强大，可以做任何事情，然后一些）

# java - OAuth Google API for Java 无法模拟用户

> ID：11660666
> 
> 赞同：9
> 
> 时间：2012-07-26T00:24:57.473
> 
> 标签：java, oauth-2.0, google-drive-api, google-api-java-client

我想模拟一个用户并代表他们从服务器进程向用户的 Google Drive 添加文件。我已经设置了一个服务帐户，并且可以使用以下代码作为服务帐户添加和列出文件等成功访问 Drive：

```
 /** Global instance of the HTTP transport. */
  private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();

  /** Global instance of the JSON factory. */
  private static final JsonFactory JSON_FACTORY = new JacksonFactory();

  public static void main(String[] args) {
    try {
        GoogleCredential credential = 
                new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
                  .setJsonFactory(JSON_FACTORY)
                  .setServiceAccountId("XXXXX@developer.gserviceaccount.com")
                  .setServiceAccountScopes(DriveScopes.DRIVE)
                  .setServiceAccountPrivateKeyFromP12File(new File("c:/junk/key.p12"))
                  .build();
        Drive drive = new Drive.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).build();         
        drive.files().list().execute();
  } catch (Exception e) {
     e.printStackTrace();
  } 
```

这可行，但是只返回与我假设与服务帐户驱动器（？）相关联的文件。

根据 JavaDoc，GoogleCredential 还可用于通过添加服务帐户用户电子邮件地址来模拟用户，如下所示：

```
 GoogleCredential credential = 
                new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
                  .setJsonFactory(JSON_FACTORY)
                  .setServiceAccountId("XXXXX@developer.gserviceaccount.com")
                  .setServiceAccountScopes(DriveScopes.DRIVE)
                  .setServiceAccountPrivateKeyFromP12File(new File("c:/junk/key.p12"))
                  .setServiceAccountUser("usera@domain.com") //<-- impersonate user a
                  .build(); 
```

但是，在执行此代码时，会引发以下异常：

```
com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
{
  "error" : "access_denied"
}
at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:303)
at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:323)
at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:340)
at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:508)
at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:260)
at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:796)
at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:198)
at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:237)
at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:207)
at com.google.api.services.drive.Drive$Files$List.execute(Drive.java:1071) 
```

我是否缺少步骤或配置设置？

谢谢，大卫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T01:18:01.790

我发现了一个与我类似的问题：[Google Apps 管理员可以使用 Drive SDK 管理用户文件吗？](https://stackoverflow.com/questions/11638186/can-a-google-apps-admin-manage-users-files-with-drive-sdk)到我的，这帮助我找到了答案。

cPanel 文档有点误导，因为它指的是启用消费者密钥，然后将域添加到管理 API 客户端访问屏幕。这似乎对 gdata api 有效，而不是新的 Google Drive api。通过按照另一个问题中的建议添加客户端 ID 并授予对 Drive 范围的访问权限，我现在可以模拟用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T18:56:44.610

让您的管理员通过管理面板将范围添加到 xxxxx.apps.googleusercontent.com：

我添加了以下内容来处理电子表格：

[https://www.googleapis.com/auth/drive](https://www.googleapis.com/auth/drive)
[https://docs.google.com/feeds](https://docs.google.com/feeds)
[https://spreadsheets.google.com/feeds](https://spreadsheets.google.com/feeds)

![委托 oAuth 权限范围](../Images/97731e1f0986a022dcff7d13bb73ecfc.png)

# java - 事件发生后如何调整框架的大小？

> ID：11660670
> 
> 赞同：3
> 
> 时间：2012-07-26T00:25:21.340
> 
> 标签：java, swing, events, resize, frame

我创建了一个表单来选择数据库服务，例如 SQL 服务器和 Oracle，以及它的版本。然后通过单击连接按钮连接到它....但是在建立连接之前，应该设置一些参数以便放置在 URL 中...此代码用于连接按钮。

```
jButton2 = new JButton();
getContentPane().add(jButton2);
jButton2.setText("Connect");
jButton2.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent evt){
            LinkedFrame inst = new LinkedFrame();
            inst.setLocationRelativeTo(rootPane);
            inst.setVisible(true);
//Question:  Should I add any method here to do what I want? , and what method should I add?
            }
                    });
        } 
```

这是 LinkedFrame 代码（从 JFrame 扩展）：

```
 private class DatabaseSelectionHandler implements ActionListener{
    public void actionPerformed(ActionEvent evt){
        database=jTextField1.getText();
        username=jTextField2.getText();
        pass=new String(jPasswordField1.getPassword());
        if(database.isEmpty() || username.isEmpty() || pass.isEmpty())
            JOptionPane.showMessageDialog(null, "Please fill all fields", "Error", JOptionPane.ERROR_MESSAGE);
        else
        {   setVisible(false);
            if (service.equalsIgnoreCase("sqlserver"))
                Connector.MSSQLConnection(service);//Single tone connectioto SQL Server
            else
                Connector.ORACLEConnection(service);//Single tone connection to Oracle
//Question:  Should I add any method here to do what I want? , and what method should I add?
        }
    }       
} 
```

LinkedFrame 是一种用于收集所需信息的新表单，包括数据库名称、用户名和密码。这些信息应传递给连接器类的 MSSQLconnect 或 OracleConnect 方法。在此表单中，当您单击按钮时创建此表单，并在您填写所有字段并按 Enter 时消失...（参见上面的代码）

现在我有一些问题：

我想在填写空白并加热 ENTER 以及是否建立连接以进行查询后立即调整我的主框架（不是链接框架）的大小。

1.  我应该使用哪种 JFrame 方法？

2.  该方法应该放在哪里（在主框架的按钮事件处理程序中或在 Linkedframe 的事件处理程序中或任何建议的地方）？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T02:55:13.370

如果没有更多代码，我们可能很难为您提供完整的答案，但我会试一试。

只要您一次不需要多个连接，就可以使用静态连接器。真的没有问题。但是，如果您这样做了，则需要将 a作为构造函数的一部分或作为属性传递`Connector`给，但这是一种设计选择。`LinkedFrame`

对于`LinkedFrame`，我会使用 JDialog 设置为`modal`。这将阻止用户输入，直到关闭对话框。这也意味着您可以显示对话框，并且您的代码将被阻止，直到对话框关闭。这在您的代码中为您提供了一个“陷阱”。

一旦用户提供了您想要的信息`LinkedFrame`并关闭对话框，您就可以提取所需的详细信息（如果有）并相应地调整主框架的大小。

**更新**

```
public void actionPerformed(ActionEvent evt) {

    LinkedFrame linkedFrame = new LinkedFrame(); // create the dialog, set as modal
    linkedFrame.setVisible(true); // code will block here till you close the dialog

    setSize(width, height); // supply the width & height you want
} 
```

# c# - 如何在不更改基于当前位置 X 和 Y 的纵横比的情况下调整旋转控件的大小？

> ID：11660672
> 
> 赞同：1
> 
> 时间：2012-07-26T00:25:26.257
> 
> 标签：c#, wpf, controls, transform

目前我使用了以下代码，它工作正常，但不尊重纵横比：

```
 private double angle;
    private Point transformOrigin;
    private ContentControl designerItem;

    public ResizeThumb()
    {
        DragStarted += new DragStartedEventHandler(this.ResizeThumb_DragStarted);
        DragDelta += new DragDeltaEventHandler(this.ResizeThumb_DragDelta);
    }

    private void ResizeThumb_DragStarted(object sender, DragStartedEventArgs e)
    {
        this.designerItem = DataContext as ContentControl;

        if (this.designerItem != null)
        {
            this.transformOrigin = this.designerItem.RenderTransformOrigin;
            RotateTransform rotateTransform = this.designerItem.RenderTransform as RotateTransform;
            if (rotateTransform != null)
                this.angle = rotateTransform.Angle * Math.PI / 180.0;
            else
                this.angle = 0;
        }
    }

    private void ResizeThumb_DragDelta(object sender, DragDeltaEventArgs e)
    {
        if (this.designerItem != null)
        {
            double deltaVertical, deltaHorizontal;

            switch (VerticalAlignment)
            {
                case System.Windows.VerticalAlignment.Bottom:
                    deltaVertical = Math.Min(-e.VerticalChange, this.designerItem.ActualHeight - this.designerItem.MinHeight);
                    Canvas.SetTop(this.designerItem, Canvas.GetTop(this.designerItem) + (this.transformOrigin.Y * deltaVertical * (1 - Math.Cos(-this.angle))));
                    Canvas.SetLeft(this.designerItem, Canvas.GetLeft(this.designerItem) - deltaVertical * this.transformOrigin.Y * Math.Sin(-this.angle));
                    this.designerItem.Height -= deltaVertical;
                    break;
                case System.Windows.VerticalAlignment.Top:
                    deltaVertical = Math.Min(e.VerticalChange, this.designerItem.ActualHeight - this.designerItem.MinHeight);
                    Canvas.SetTop(this.designerItem, Canvas.GetTop(this.designerItem) + deltaVertical * Math.Cos(-this.angle) + (this.transformOrigin.Y * deltaVertical * (1 - Math.Cos(-this.angle))));
                    Canvas.SetLeft(this.designerItem, Canvas.GetLeft(this.designerItem) + deltaVertical * Math.Sin(-this.angle) - (this.transformOrigin.Y * deltaVertical * Math.Sin(-this.angle)));
                    this.designerItem.Height -= deltaVertical;
                    break;
                default:
                    break;
            }

            switch (HorizontalAlignment)
            {
                case System.Windows.HorizontalAlignment.Left:
                    deltaHorizontal = Math.Min(e.HorizontalChange, this.designerItem.ActualWidth - this.designerItem.MinWidth);
                    Canvas.SetTop(this.designerItem, Canvas.GetTop(this.designerItem) + deltaHorizontal * Math.Sin(this.angle) - this.transformOrigin.X * deltaHorizontal * Math.Sin(this.angle));
                    Canvas.SetLeft(this.designerItem, Canvas.GetLeft(this.designerItem) + deltaHorizontal * Math.Cos(this.angle) + (this.transformOrigin.X * deltaHorizontal * (1 - Math.Cos(this.angle))));
                    this.designerItem.Width -= deltaHorizontal;
                    break;
                case System.Windows.HorizontalAlignment.Right:
                    deltaHorizontal = Math.Min(-e.HorizontalChange, this.designerItem.ActualWidth - this.designerItem.MinWidth);
                    Canvas.SetTop(this.designerItem, Canvas.GetTop(this.designerItem) - this.transformOrigin.X * deltaHorizontal * Math.Sin(this.angle));
                    Canvas.SetLeft(this.designerItem, Canvas.GetLeft(this.designerItem) + (deltaHorizontal * this.transformOrigin.X * (1 - Math.Cos(this.angle))));
                    this.designerItem.Width -= deltaHorizontal;
                    break;
                default:
                    break;
            }
        }
    }
} 
```

及其视觉（xaml）：

```
 <Grid>
  <s:ResizeThumb Height="3" Cursor="SizeNS" Margin="0 -4 0 0"
                 VerticalAlignment="Top" HorizontalAlignment="Stretch"/>
  <s:ResizeThumb Width="3" Cursor="SizeWE" Margin="-4 0 0 0"
                 VerticalAlignment="Stretch" HorizontalAlignment="Left"/>
  <s:ResizeThumb Width="3" Cursor="SizeWE" Margin="0 0 -4 0"
                 VerticalAlignment="Stretch" HorizontalAlignment="Right"/>
  <s:ResizeThumb Height="3" Cursor="SizeNS" Margin="0 0 0 -4"
                 VerticalAlignment="Bottom" HorizontalAlignment="Stretch"/>
  <s:ResizeThumb Width="7" Height="7" Cursor="SizeNWSE" Margin="-6 -6 0 0"
                 VerticalAlignment="Top" HorizontalAlignment="Left"/>
  <s:ResizeThumb Width="7" Height="7" Cursor="SizeNESW" Margin="0 -6 -6 0"
                 VerticalAlignment="Top" HorizontalAlignment="Right"/>
  <s:ResizeThumb Width="7" Height="7" Cursor="SizeNESW" Margin="-6 0 0 -6"
                 VerticalAlignment="Bottom" HorizontalAlignment="Left"/>
  <s:ResizeThumb Width="7" Height="7" Cursor="SizeNWSE" Margin="0 0 -6 -6"
                 VerticalAlignment="Bottom" HorizontalAlignment="Right"/>
        <!-- ... -->
    </Grid> 
```

就像我说的那样，它工作得很好，特别是如果控件被旋转，组件的 x 和 y 位置完全按照预期工作，无论它旋转了多少。

完整源代码： http: [//www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1](http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1)

如何调整它的大小以保持纵横比并且 X 和 Y 位置没有问题？

通过多种方式尝试，很容易在保持纵横比的同时获得新尺寸。但我无法使其正常工作，因为组件可以旋转，X 和 Y 位置一团糟。我不知道如何调整和纠正新的 X 和 Y 保持比例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T19:26:44.920

1.  计算 deltaVertical 和 deltaHorizo​​ntal。
2.  将纵横比应用于增量
3.  更新设计器项目的位置和大小

更新：来自工作解决方案的 ResizeThumb 类实现。设计器项绑定到视图模型（位置、大小、角度旋转）：

```
 /// <summary>
    /// Defines a thumb for resizing shapes.
    /// </summary>
    public class ResizeThumb : Thumb
    {  
    /// <summary>
    /// Holds a designer item.
    /// </summary>
    private DesignerItem _designerItem;

    /// <summary>
    /// Holds a collection of designer items.
    /// </summary>
    private DesignerItems _designerItems;

    /// <summary>
    /// holds a transform origin of the designer item 
    /// </summary>
    private Point _transformOrigin;

    /// <summary>
    /// holds an angle of the rotation transformation of the designer item
    /// </summary>
    private double _angle = 0.0;

    /// <summary>
    /// Initializes a new instance of the <see cref="ResizeThumb"/> class.
    /// </summary>
    public ResizeThumb()
    {
        DragStarted += ResizeThumbDragStarted;
        DragDelta += ResizeThumbDragDelta;
        DragCompleted += ResizeThumbDragCompleted;
    }

    /// <summary>
    /// Handles notifications when the dragging of the thumb starts.
    /// </summary>
    /// <param name="sender">the sender object</param>
    /// <param name="e">the event arguments</param>
    private void ResizeThumbDragStarted(object sender, DragStartedEventArgs e)
    {
        _designerItem = DataContext as DesignerItem;

        if (_designerItem == null) 
            return;

        _designerItem.IsResizing = true;
        _designerItem.IsDragging = true;
        _designerItems = _designerItem.GetItemsControl();

        _transformOrigin = _designerItem.RenderTransformOrigin;            
        var rotateTransform = _designerItem.RenderTransform as RotateTransform;
        if (rotateTransform != null)
            _angle = rotateTransform.Angle * Math.PI / 180.0;
        else
            _angle = 0.0;
    }

    /// <summary>
    /// Handles notifications when the dragging of the thumb completes.
    /// </summary>
    /// <param name="sender">the sender object</param>
    /// <param name="e">the event arguments</param>
    private void ResizeThumbDragCompleted(object sender, DragCompletedEventArgs e)
    {
        if (_designerItem != null)
        {
            _designerItem.IsResizing = false;
            _designerItem.IsDragging = false;
        }
    }

    /// <summary>
    /// Handles notifications when the thumb has been dragged.
    /// </summary>
    /// <param name="sender">the sender object</param>
    /// <param name="e">the event arguments</param>
    private void ResizeThumbDragDelta(object sender, DragDeltaEventArgs e)
    {
        if (_designerItem == null ||
            _designerItems == null ||
            !_designerItem.IsSelected)
        {
            return;
        }

        var item = _designerItem;
        var minLeft = double.MaxValue;
        var minTop = double.MaxValue;
        var minDeltaHorizontal = double.MaxValue;
        var minDeltaVertical = double.MaxValue;

        minLeft = Math.Min(Canvas.GetLeft(item), minLeft);
        minTop = Math.Min(Canvas.GetTop(item), minTop);

        minDeltaVertical = Math.Min(minDeltaVertical, item.ActualHeight - item.MinHeight);
        minDeltaHorizontal = Math.Min(minDeltaHorizontal, item.ActualWidth - item.MinWidth);

        // stop moving when
        // at least one of the selected items is locked
        if (item.IsLocked)
        {
            return;
        }

        double? dragDeltaVertical = null;
        switch (VerticalAlignment)
        {
            case VerticalAlignment.Bottom:
                dragDeltaVertical = Math.Min(-e.VerticalChange, minDeltaVertical);
                break;
            case VerticalAlignment.Top:
                dragDeltaVertical = Math.Min(Math.Max(-minTop, e.VerticalChange), minDeltaVertical);
                break;
        }

        double? dragDeltaHorizontal = null;
        switch (HorizontalAlignment)
        {
            case HorizontalAlignment.Left:
                dragDeltaHorizontal = Math.Min(Math.Max(-minLeft, e.HorizontalChange), minDeltaHorizontal);
                break;
            case HorizontalAlignment.Right:
                dragDeltaHorizontal = Math.Min(-e.HorizontalChange, minDeltaHorizontal);
                break;
        }

        // in case the aspect ratio is kept then adjust both width and height
        if (item.KeepAspectRatio)
        {
            CheckAspectRatio(ref dragDeltaHorizontal, ref dragDeltaVertical, item.ActualHeight / item.ActualWidth);
        }

        if (dragDeltaVertical.HasValue)
        {
            switch (VerticalAlignment)
            {
                case System.Windows.VerticalAlignment.Bottom:
                    Canvas.SetTop(item, Canvas.GetTop(item) + (_transformOrigin.Y * dragDeltaVertical.Value * (1 - Math.Cos(-_angle))));
                    Canvas.SetLeft(item, Canvas.GetLeft(item) - dragDeltaVertical.Value * _transformOrigin.Y * Math.Sin(-_angle));
                    break;
                case System.Windows.VerticalAlignment.Top:
                    Canvas.SetTop(item, Canvas.GetTop(item) + dragDeltaVertical.Value * Math.Cos(-_angle) + (_transformOrigin.Y * dragDeltaVertical.Value * (1 - Math.Cos(-_angle))));
                    Canvas.SetLeft(item, Canvas.GetLeft(item) + dragDeltaVertical.Value * Math.Sin(-_angle) - (_transformOrigin.Y * dragDeltaVertical.Value * Math.Sin(-_angle)));
                    break;
                default:
                    break;
            }

            item.Height = item.ActualHeight - dragDeltaVertical.Value;
        }

        if (dragDeltaHorizontal.HasValue)
        {
            switch (HorizontalAlignment)
            {
                case System.Windows.HorizontalAlignment.Left:
                    Canvas.SetTop(item, Canvas.GetTop(item) + dragDeltaHorizontal.Value * Math.Sin(_angle) - _transformOrigin.X * dragDeltaHorizontal.Value * Math.Sin(_angle));
                    Canvas.SetLeft(item, Canvas.GetLeft(item) + dragDeltaHorizontal.Value * Math.Cos(_angle) + (_transformOrigin.X * dragDeltaHorizontal.Value * (1 - Math.Cos(_angle))));
                    break;
                case System.Windows.HorizontalAlignment.Right:
                    Canvas.SetTop(item, Canvas.GetTop(item) - _transformOrigin.X * dragDeltaHorizontal.Value * Math.Sin(_angle));
                    Canvas.SetLeft(item, Canvas.GetLeft(item) + (dragDeltaHorizontal.Value * _transformOrigin.X * (1 - Math.Cos(_angle))));
                    break;
                default:
                    break;
            }

            item.Width = item.ActualWidth - dragDeltaHorizontal.Value;
        }

        e.Handled = true;
    }

    /// <summary>
    /// Checks the values so that the ratio beween them has a defined value.
    /// </summary>
    /// <param name="dragDeltaHorizontal">horizontal delta</param>
    /// <param name="dragDeltaVertical">vertical delta</param>
    /// <param name="aspectRatio">horizontal to vertical ration</param>
    private void CheckAspectRatio(ref double? dragDeltaHorizontal, ref double? dragDeltaVertical, double aspectRatio)
    {
        double? dragValue = null;
        if (dragDeltaVertical.HasValue && dragDeltaHorizontal.HasValue)
        {
            dragValue = Math.Max(dragDeltaVertical.Value, dragDeltaHorizontal.Value);
        }
        else if (dragDeltaVertical.HasValue)
        {
            dragValue = dragDeltaVertical;
        }
        else if (dragDeltaHorizontal.HasValue)
        {
            dragValue = dragDeltaHorizontal;
        }

        if (dragValue.HasValue)
        {
            dragDeltaVertical = dragValue.Value * aspectRatio;
            dragDeltaHorizontal = dragValue;
        }
    }
    } 
```

# ruby - 在 Mountain Lion 上安装带有 RVM 的 ree-1.8.7

> ID：11660673
> 
> 赞同：10
> 
> 时间：2012-07-26T00:25:32.627
> 
> 标签：ruby, xcode, rvm, osx-mountain-lion

我全新安装了 Mountain Lion 并安装了**Xcode 命令行工具**，. 我能够让**自制软件**运行并安装**RVM**。不幸的是，我无法让 RVM 安装**ree-1.8.7-head**。编译时失败。我以为和X11有关，所以我安装了**XQuartz**。仍然没有喜悦。然后我继续**从应用商店安装了完整的 Xcode**。仍然没有喜悦。有人在新的 Mountain Lion 安装中得到了这个吗？

从**.rvm/log/ree-1.8.7-head/make.log**的底部：

```
Find Tcl/Tk libraries. Make tcltklib.so which is required by Ruby/Tk.
gcc -I. -I../.. -I../../. -I../.././ext/tk -DHAVE_RB_SAFE_LEVEL -DHAVE_RB_HASH_LOOKUP -DHAVE_RB_PROC_NEW -DHAVE_RB_OBJ_TAINT -DHAVE_ST_PTR -DHAVE_ST_LEN -DRUBY_VERSION=\"1.8.7\" -DRUBY_RELEASE_DATE=\"2012-02-08\"  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -DWITH_TCL_ENABLE_THREAD=0 -fno-common -g -O2 -pipe -fno-common   -c stubs.c
In file included from stubs.c:10:
/usr/include/tk.h:78:23: error: X11/Xlib.h: No such file or directory
In file included from stubs.c:10:
/usr/include/tk.h:549: error: expected declaration specifiers or ‘...’ before ‘Window’
/usr/include/tk.h:549: error: ‘Window’ declared as function returning a function 
```

. .

```
/usr/include/tkDecls.h:1240: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute

__’ before ‘Tk_GetBitmapFromObj’
/usr/include/tkDecls.h:1245: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
/usr/include/tkDecls.h:1356: error: expected ‘)’ before ‘*’ token
/usr/include/tkDecls.h:1362: error: expected ‘)’ before ‘*’ token
/usr/include/tkDecls.h:1387: error: expected declaration specifiers or ‘...’ before ‘GC’
/usr/include/tkDecls.h:1399: error: expected declaration specifiers or ‘...’ before ‘GC’
/usr/include/tkDecls.h:1413: error: expected declaration specifiers or ‘...’ before ‘Pixmap’
/usr/include/tkDecls.h:1420: error: expected declaration specifiers or ‘...’ before ‘XColor’
/usr/include/tkDecls.h:1448: error: expected declaration specifiers or ‘...’ before ‘Pixmap’
/usr/include/tkDecls.h:1524: error: expected ‘)’ before ‘*’ token
/usr/include/tkDecls.h:1621: error: expected declaration specifiers or ‘...’ before ‘Drawable’
/usr/include/tkDecls.h:1656: error: expected ‘)’ before ‘*’ token
/usr/include/tkDecls.h:1661: error: expected ‘)’ before ‘*’ token
/usr/include/tkDecls.h:1692: error: expected specifier-qualifier-list before ‘XColor’
make[1]: *** [stubs.o] Error 1
make: *** [all] Error 1 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T00:57:23.350

尝试

```
rvm reinstall 1.8.7 --without-tcl --without-tk 
```

但是您的问题仍然可能与 gcc-4.2 有关-> MRI ruby​​ 需要它，llvm/clang 有一些成功，但仍然失败`Fibers`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:09:51.987

如果您不需要 tcl 或 tk 并且正在使用 rbenv，这应该可以工作：

```
brew install https://raw.github.com/Homebrew/homebrew-dupes/master/apple-gcc42.rb

CC=/usr/local/bin/gcc-4.2 CONFIGURE_OPTS="--without-tcl --without-tk" rbenv install 1.8.7-p358 
```

# jquery - ReferenceError: $ 未定义

> ID：11660675
> 
> 赞同：2
> 
> 时间：2012-07-26T00:25:49.070
> 
> 标签：jquery, jquery-ui

我有一个页面的这种奇怪行为。页面加载，但一两秒后变成空白。在 FireFox 控制台中，我收到此错误： **ReferenceError: $ is not defined @https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js:4**。在 chrome 中我没有收到任何错误，但页面仍然变为空白，并且仅在此特定页面中发生。

该页面使用 jquery 和 jquery ui，我正在尝试将一些内容放在选项卡中。jquery 脚本包含在页面中的任何其他 javascript 之前。

该页面如下：[http](http://www.upnext.eu/tv-schedule.html) ://www.upnext.eu/tv-schedule.html 或者您可以在此处查看源代码[http://pastebin.com/R8f7xNHd](http://pastebin.com/R8f7xNHd)。该页面是 100% HTML 5 有效的，这仅在此页面上发生。有谁知道可能出了什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:36:06.497

`gTOP.js`您包含的文件正在执行`document.write`，这将覆盖您的页面。如果不分析您的代码很难判断，但您似乎正在动态加载包含此脚本的 HTML。如果此脚本正在执行`document.write`，则它与动态加载不兼容。您可能必须更改您的设计以避免这样做。

您的页面也有多个 JS 错误，但这并不是导致页面空白的原因。

# c# - 字符串比较的 DateTime.TryParseExact 方法

> ID：11660681
> 
> 赞同：5
> 
> 时间：2012-07-26T00:26:50.447
> 
> 标签：c#, linq

嘿，如何为给定日期进行字符串比较匹配，这`DateTime.TryParseExact`似乎是明智的选择，但我不确定如何在以下方法中构建争论：

```
public List<Dates> DateEqualToThisDate(string dateentered)
{
    List<Dates> date = dates.Where(
        n => string.Equals(n.DateAdded, 
                           dateentered,
                           StringComparison.CurrentCultureIgnoreCase)).ToList();
        return hiredate;
 } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-26T00:41:27.210

如果您确切知道日期/时间的格式（即它永远不会改变，并且不依赖于用户的文化或语言环境），那么您可以使用[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx).

例如：

```
DateTime result;
if (DateTime.TryParseExact(
    str,                            // The string you want to parse
    "dd-MM-yyyy",                   // The format of the string you want to parse.
    CultureInfo.InvariantCulture,   // The culture that was used
                                    // to create the date/time notation
    DateTimeStyles.None,            // Extra flags that control what assumptions
                                    // the parser can make, and where whitespace
                                    // may occur that is ignored.
    out result))                    // Where the parsed result is stored.
{
    // Only when the method returns true did the parsing succeed.
    // Therefore it is in an if-statement and at this point
    // 'result' contains a valid DateTime.
} 
```

格式字符串可以是完全指定的[自定义日期/时间格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)（例如`dd-MM-yyyy`），也可以是[通用格式说明符](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)（例如`g`）。对于后者，文化对于日期的格式很重要。例如，在荷兰，日期写为`26-07-2012`( `dd-MM-yyyy`)，而在美国，日期写为`7/26/2012`( `M/d/yyyy`)。

但是，这一切仅在您的字符串`str`仅包含您要解析的日期时才有效。如果您有一个较大的字符串，并且日期周围有各种不需要的字符，那么您必须首先在其中找到日期。这可以使用正则表达式来完成，这本身就是另一个主题。可以在[此处](http://msdn.microsoft.com/en-us/library/ms228595.aspx)找到有关 C# 中的正则表达式 (regex) 的一些一般信息。正则表达式参考在[这里](http://www.regular-expressions.info/reference.html)。例如，`d/M/yyyy`可以使用 regex 找到类似于 的日期`\d{1,2}\/\d{1,2}\/\d{4}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:46:16.153

另一种方法是将日期从 转换`string`为`DateTime`。如果可能的话，我会保留`DateAdded`为`DateTime`.

Bellow 是在 LINQPad 中运行的代码

```
public class Dates
{
    public string DateAdded { get; set; }
}

List<Dates> dates = new List<Dates> {new Dates {DateAdded = "7/24/2012"}, new Dates {DateAdded = "7/25/2012"}};

void Main()
{
    DateEqualToThisDate("7/25/2012").Dump();
}

public List<Dates> DateEqualToThisDate(string anything)
{
    var dateToCompare = DateTime.Parse(anything);

    List<Dates> hireDates = dates.Where(n => DateTime.Parse(n.DateAdded) == dateToCompare).ToList();

    return hireDates;
} 
```

# javascript - jQuery Datepicker BeforeShowDay 第二个参数

> ID：11660682
> 
> 赞同：5
> 
> 时间：2012-07-26T00:26:53.190
> 
> 标签：javascript, jquery, datepicker

jQuery 的日期选择器允许您使用 BeforeShowDay 回调突出显示日期。

是否可以将第二个参数传递给该方法？

```
$(selector).datepicker({beforeShowDay: selectedDay});   

function selectedDay(date) {

    // Do stuff

    return [true, 'class_name'];
} 
```

如您所见，参数`date`自动传递给 selectedDay 方法，因此我不确定如何传递第二个参数。

干杯。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T14:30:31.190

```
function selectedDay(date, param ) {
     // Do stuff with param
     return [true, ''];
}

function doStuff(){
    var param = "param_to_pass";
    $(selector).datepicker({
        beforeShowDay: function (date){
            return selectedDay(date, param );
        }
    }); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:48:58.700

如果我理解正确，您可以创建另一个函数并传递您想要的任何参数：

```
function foo (param) { ... }
function selectedDay (date) {
  foo(param);
  return [true, 'class_name'];
}

$(selector).datepicker({beforeShowDay: selectedDay}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:16:23.367

我采用了非最佳实践来解决我的问题。我只是简单地制作了第二个参数来传递全局。它会暂时完成这项工作。

```
$(selector).datepicker({beforeShowDay: selectedDay});   

var my_param = x;
function selectedDay(date) {

    // Do stuff, use my_param

    return [true, 'class_name'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:48:08.710

您可以编写一个返回日期数组的函数

```
function selectedDay(date1,date2) {
// your code
return dates[];
} 
```

接着

```
$(selector).datepicker({beforeShowDay: selectedDay}); 
```

只是一个想法，绝对不确定它是否有效

# php - 在php中添加前导0

> ID：11660683
> 
> 赞同：7
> 
> 时间：2012-07-26T00:27:02.277
> 
> 标签：php, formatting

我有

*   教程 1 如何制作这个
*   教程 21 如何制作这个
*   教程 2 如何制作这个
*   教程 3 如何制作这个

我需要

*   教程 01 如何制作这个
*   教程 21 如何制作这个
*   教程 02 如何制作这个
*   教程 03 如何制作这个

所以我可以正确地订购它们。（找到单个数字时添加前导 0）

什么是转换的php方法？

提前致谢

注意 - 请确保它首先识别单个数字，然后添加前导零

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T00:29:09.127

[`str_pad()`](http://us3.php.net/manual/en/function.str-pad.php)

```
echo str_pad($input, 2, "0", STR_PAD_LEFT); 
```

[`sprintf()`](http://us3.php.net/manual/en/function.sprintf.php)

```
echo sprintf("%02d", $input); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T00:32:32.520

如果它来自数据库，这是在 sql 查询上执行此操作的方法：

```
lpad(yourfield, (select length(max(yourfield)) FROM yourtable),'0') yourfield 
```

这将获得表中的最大值并放置前导零。

如果是硬编码 (PHP)，请使用 str_pad()

```
str_pad($yourvar, $numberofzeros, "0", STR_PAD_LEFT); 
```

这是我在在线 php 编译器上所做的一个小例子，它可以工作......

```
$string = "Tutorial 1 how to";

$number = explode(" ", $string); //Divides the string in a array
$number = $number[1]; //The number is in the position 1 in the array, so this will be number variable

$str = ""; //The final number
if($number<10) $str .= "0"; //If the number is below 10, it will add a leading zero
$str .= $number; //Then, add the number

$string = str_replace($number, $str, $string); //Then, replace the old number with the new one on the string

echo $string; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-11T13:01:56.103

如果您的目标是按照人类的方式进行自然排序，为什么不直接使用`strnatcmp`

```
$arr = [
    'tutorial 1 how to make this',
    'tutorial 21 how to make this',
    'tutorial 2 how to make this',
    'tutorial 3 how to make this',
];
usort($arr, "strnatcmp");
print_r($arr); 
```

上面的示例将输出：

```
Array
(
    [0] => tutorial 1 how to make this
    [1] => tutorial 2 how to make this
    [2] => tutorial 3 how to make this
    [3] => tutorial 21 how to make this
) 
```

# .htaccess - 如何编写.htaccess

> ID：11660684
> 
> 赞同：0
> 
> 时间：2012-07-26T00:27:05.413
> 
> 标签：.htaccess

我已经尝试过，但没有找到合适的 PHP 解决方案`.htaccess`

**文件夹和文件信息：**

```
.htaccess (on root)
/profile/personal.php
/profile/exam/exam_information.php 
```

**`personal.php`从 ( ) 和 ( `exam_information.php`)发送 URL**

```
/profile/2012/A1PPOAQU7
........\-------------/ // Friendly URL
/profile/exam/2012/A1PPOAQU7
.............\-------------/ // Friendly URL 
```

**我发现，htaccess 但它仅适用于单个 URL。请检查代码中有什么问题。**

```
RewriteEngine On

RewriteRule ^([a-zA-Z0-9-/]+)$ /profile/personal.php?pid=$1
RewriteRule ^([a-zA-Z0-9-/]+)/$ /profile/personal.php?pid=$1 
```

# android - WebView 水平滚动失败

> ID：11660685
> 
> 赞同：1
> 
> 时间：2012-07-26T00:27:07.807
> 
> 标签：android, android-webview, android-viewpager

我对片段中的 WebView 有一个奇怪的问题。水平滚动无法正常工作。它只滚动一点。没有问题，垂直滚动内容，捏合缩放，是的，用两根手指移动页面同时捏合也适用于所有方向。

这是Fragment的onCreateView()-Method，它承载了WebView。我不能使用 WebViewFragment。该片段位于 Viewpager 中！提供的数据是有效的 html5 文档。但我也没有成功尝试过“真实网页”。

```
this.mView = inflater.inflate(R.layout.search_results, container, false);
        mWebView = (WebView)this.mView.findViewById(R.id.search_results);
        mWebView.setWebViewClient(new SearchResultsWebViewClient());
        mWebView.setInitialScale(120);
        mWebView.setScrollContainer(true);
        mWebView.bringToFront();
        mWebView.setScrollbarFadingEnabled(true);
        mWebView.setVerticalScrollBarEnabled(true);
        mWebView.setHorizontalScrollBarEnabled(true);
        mWebView.getSettings().setBuiltInZoomControls(true);
        mWebView.getSettings().setJavaScriptEnabled(false);

        mWebView.loadData(this.data, "text/html", "utf-8");

        return this.mView; 
```

这是 search_results.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id ="@+id/search_results"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</WebView> 
```

以及加载片段的布局文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
        android:baselineAligned="false"
        android:weightSum="1.0">

    <LinearLayout android:layout_weight="0.5"
                    android:layout_width="0dip"
                    android:layout_height="match_parent"
                    android:orientation="vertical" >        
<ListView android:id="@id/android:list"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:background="#000000"
           android:drawSelectorOnTop="false"/>
</LinearLayout>
     <LinearLayout android:layout_weight="0.5"
                android:layout_width="0dip"
                android:layout_height="match_parent"
                android:orientation="vertical" >
                <FrameLayout android:id="@+id/resultsWebWiewFragmentFrame"
                      android:layout_width="match_parent" 
                      android:layout_height="match_parent"/>
    </LinearLayout>
</LinearLayout> 
```

因为我使用的是 ABS，所以无法直接在 xml 文件中加载片段。这将引发 ClassCastException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:59:43.007

我刚刚搜索了这个并在 SO 上遇到了同样的问题，[查看这个答案，看看是否有帮助](https://stackoverflow.com/a/9602967/1134705)。

他补充说：

```
mWebView.getSettings().setUseWideViewPort(true); 
```

* * *

是的，这似乎`ViewPager`消耗了您的水平滚动，请查看这两个解决方案。希望他们有所帮助。

*   [解决方案 1](https://stackoverflow.com/a/8943531/1134705)
*   [解决方案 2](https://stackoverflow.com/questions/7774642/scroll-webview-horizontally-inside-a-viewpager/9925980#9925980)

# php - 如何存储和解析 RRULE 数据

> ID：11660686
> 
> 赞同：3
> 
> 时间：2012-07-26T00:27:15.800
> 
> 标签：php, date, recursion, calendar, fullcalendar

我敢肯定，这已经在这里被问过几次了，但我还没有找到一个像样的解决方案，或者了解做到这一点的最佳方法。

我有一个日历（使用 jQuery FullCalendar）。我想对日历实施重复结构。最好的方法是使用标准，例如 iCal RRULE。

但我想弄清楚的是，将它存储在 MySQL 数据库中的最佳方式是什么？一个简单的（varchar 字段），包含：RRULE:FREQ=DAILY;INTERVAL=1;BYDAY=TU,WE,FR;UNTIL=20110713T075959Z;WKST=SU

一旦我将它“存储”在数据库中，我将如何从数据库中“提取”数据以解析重复显示到我的日历上？

编辑：除了举办活动，永远不要停止重复，即生日？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T13:49:21.397

You can interpret RRule strings on the client side with the Javascript library [RRule.js](https://github.com/jkbr/rrule) like so:

```
var holidays = RRule.fromString("FREQ=WEEKLY;BYDAY=MO,FR;INTERVAL=5;UNTIL=20130130T230000Z");
var datesToHighlight = RRule.between( calendarViewStartDate, calendarViewEndDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T14:53:41.657

我想这个答案对于海报来说太晚了，但对于其他浏览的人（比如我）来说，[这个 PHP 库](https://github.com/simshaun/recurr)似乎很有希望。正如描述所说，它深受 rrule.js 的启发。

*编辑：* 哦，我忘了链接到[这个库](https://github.com/tplaner/When)，它也处理递归日期，而且看起来也是可行的。

# php - 从 mysql 中获取结果并将每个结果应用于变量并最终输出

> ID：11660688
> 
> 赞同：0
> 
> 时间：2012-07-26T00:27:22.783
> 
> 标签：php, mysql, xml, foreach

所以我想做的是：运行这个查询：`SELECT FW_ArtSrcLink FROM FW_ArtSrc WHERE OneSet =1`它输出两个结果：![图像1](../Images/b41ca7d2f06dcfbec00da4576e09fbe7.png)

我想将这两个结果附加到`$result`var 并通过结果（为 2 - 如图所示）作为`$r`，然后输出的部分`$r`因此为

```
# Source of Article Info-->
            $SrcTitle=$newsStory[$i]->title;
            $SrcLink=$newsStory[$i]->link;

    # Actual News Article Info -->
            $title=$newsStory[$i]->title;
            $desc=$newsStory[$i]->description; 
```

完整代码如下所示，目前仅从*sports.yahoo.com/tennis/rss.xml*的第二个结果中提取：

```
## Loop through results from mysql
try{
    #connection string
        // $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=mydatabase',array(PDO::ATTR_PERSISTENT => true));
        $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=mydatabase','myuser','mypass',array(PDO::ATTR_PERSISTENT => true));
        $q = $dbconn->prepare("SELECT FW_ArtSrcLink FROM FW_ArtSrc WHERE OneSet=1");
    #call stored proc
        $q->execute();
    #get the rows into an array
        $result = $q->fetchAll();
        $newsStory[] = array();
        foreach($result as $r){
            $xmlUrl = $r['FW_ArtSrcLink'];
            $ConvertToXml = simplexml_load_file($xmlUrl);
            # -> Setup XML
            $newsStory = $ConvertToXml->channel->item;
        }

    # -----> Load News Stories
        for($i = 0;$i<sizeof($newsStory); $i++){

    # Source of Article Info-->
            $SrcTitle=$newsStory[$i]->title;
            $SrcLink=$newsStory[$i]->link;

    # Actual News Article Info -->
            $title=$newsStory[$i]->title;
            $desc=$newsStory[$i]->description;

    # Output Results ------------>      
            echo '<hr>';
            echo '<strong>'.'Title:'.$title.'</strong>'.'(via: <a href=\''.$SrcLink.'\'>'.$SrcTitle.'</a>'.'<br />';
            //echo 'Link:'.$link.'<br />';
            echo 'Description'.$desc.'<br>';
            ##echo 'count '.count($result);
            echo '<hr>';
        }
} // try 
```

我在这里做错了什么？

来自单个 db 结果的简单输出示例，我将其称为硬编码结果而不是动态使用

```
$xmlUrl ="http://edge1.catalog.video.msn.com/videoByTag.aspx?tag=Fox%20Sports_NBA%20news&ns=MSNVideo_Top_Cat&mk=us&sd=-1&sf=ActiveStartDate&vs=0&ind=&ps=&rct=&ff=88&responseEncoding=rss&title=FOX%20Sports%20Video%20on%20MSN:%20NBA&template=foxsports&p=foxsports";
$ConvertToXml = simplexml_load_file($xmlUrl); 
```

： ![img2](../Images/4885fe4088de52991253057257d0d3cf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:49:00.973

尝试更改此代码块：

```
 $newsStory = array();
    foreach($result as $r){
        $xmlUrl = $r['FW_ArtSrcLink'];
        $ConvertToXml = simplexml_load_file($xmlUrl);
        # -> Setup XML
        $newsStory[] = $ConvertToXml->channel->item;
    } 
```

您之前的代码将 $newsStory 声明为数组数组。然后它覆盖了这个定义并将 $newsStory 变成了一个简单的字符串。
它解释了您注意到的行为：“目前仅从第二个结果中提取”。

而且由于您没有告诉我们任何 PHP 错误，您可能没有打开它们。在脚本的开头添加这些行：

```
error_reporting(E_ALL); // tells PHP to report all errors
ini_set('display_errors', 1); // tells PHP to display all errors on the screen 
```

文档：[数组](http://php.net/manual/en/language.types.array.php) [ini_set](http://php.net/ini_set) [error_reporting](http://php.net/manual/en/function.error-reporting.php)

# java - 读取外部文本文件并存储到数组中

> ID：11660689
> 
> 赞同：0
> 
> 时间：2012-07-26T00:27:36.237
> 
> 标签：java, arrays, java.util.scanner

我如何读取外部文本文件，可能使用扫描仪并将每行的 2 个值存储到数组中。

我想存储节点 id，它是每行的第一个值和父编号，它是每行的最后一个值。

文本文件包含您在下面看到的内容

```
1       2,7,|0|BLACK|NULL
10      3,4,12,|3|BLACK|3
11      4,12,|4|BLACK|4
12      8,10,11,|3|BLACK|8
2       1,3,6,8,|1|BLACK|1
3       2,4,5,6,8,10,|2|BLACK|2
4       3,5,9,10,11,|3|BLACK|3
5       3,4,8,|3|BLACK|3
6       2,3,|2|BLACK|2
7       1,8,|1|BLACK|1
8       2,3,5,7,9,12,|2|BLACK|2
9       4,8,|3|BLACK|8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:08:08.887

一种正则表达式方法（将数组位作为练习留给读者）：

```
BufferedReader br = new BufferedReader(new FileReader("hadoop_data.txt"));

String currentLine;
while ((currentLine = br.readLine()) != null) {

    Matcher matcher = Pattern.compile("(\\d+).*\\|(\\w+)").matcher(currentLine);
    if (matcher.matches()) {
        System.out.println(matcher.group(1) + "\t" + matcher.group(2));
            // add to array
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:31:47.870

Shonna，您可以使用 HashMap、Scanner 和一些简单的字符串解析来实现您想要的。这是我的全班：

```
import java.io.*;
import java.util.*;

public class nodes {

    private static HashMap<Integer, String> map = new HashMap<Integer, String>();

    public static void main(String[] args) {
        File file = new File("nodes.txt");
        Scanner scnr = null;
        try {
            scnr = new Scanner(file);
        } catch (FileNotFoundException e) {

        }
        while(scnr.hasNext()) {
            String line = scnr.nextLine();
            String[] getId = line.split("\\s+");
            int id = Integer.parseInt(getId[0]);
            int count = 0;
            int copy = 0;
            for(int i = 0; i < line.length(); i++) {
                if(line.charAt(i) == '|')
                    count++;
                if(count == 3) {
                    copy = i;
                    break;
                }
            }
            String parent = line.substring(copy + 1);
            map.put(id, parent);
            System.out.println(map);
        }
    }

} 
```

它的作用是读取文件的每一行，首先提取节点 ID。然后循环遍历该行中的每个字符，直到数到三个`|`'，此时我们知道该行的其余部分将是该节点的父节点。完成此操作后，它将 id 与 HashMap 中的父级配对。

# asp.net-mvc - 由于通过 javaScript 动态隐藏的表单字段上的 ValidationSummary 错误，无法发布表单。

> ID：11660691
> 
> 赞同：0
> 
> 时间：2012-07-26T00:27:43.597
> 
> 标签：asp.net-mvc, asp.net-mvc-3, modelstate, validationsummary, ivalidatableobject

ASP.NET MVC 3 应用程序。

我正在尝试发布具有一些使用 JavaScript 出现和消失的动态字段的表单。我正在使用 IValidatableObject 对其中一些动态字段进行服务器端验证。

当这些字段可见并且我发布表单时，验证工作正常，它会在 ValidationSummary 中提供适当的错误消息并回发。现在，虽然这些错误消息在那里，但我使用隐藏这些字段

document.getElementById("schoolNotListed").style.display = "none";

我尝试再次发布表单，每次都会弹出 ValidationSummary 错误。控件没有到达控制器，也没有到达视图模型中的 Validate() 函数。这是一些客户端验证，阻止表单发布。

有没有办法可以跳过或禁用这些现在通过 javaScript 隐藏的字段的验证。或者我可以通过 javaScript 清除 ModelState 吗？

如果您对如何以不同的方式处理它有一些建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:50:38.833

客户端 Javascript 验证库构建了一个规则对象来进行验证

当您隐藏它们时，请尝试删除验证器

```
$('#schoolNotListed').hide().rules('remove', 'required')
$.validate.unobtrusive.parse() 
```

第二行告诉验证器重建规则对象。

这个问题可能有用：[Disable required validation by JavaScript](https://stackoverflow.com/questions/7389652/disable-required-validation-by-javascript)

# regex - 如何使用正则表达式重写 URI，使路径成为查询的一部分？

> ID：11660693
> 
> 赞同：0
> 
> 时间：2012-07-26T00:27:54.553
> 
> 标签：regex, uri

我有一个想使用正则表达式解决的问题。我想要一个正则表达式，它将采用以下输入字符串并产生以下输出；

```
input               output
-----               ------
/                   /?path=/
/mypath/            /?path=/mypath/
/?myquery           /?path=/&myquery
/mypath/?myquery    /?path=/mypath/&myquery 
```

一个正则表达式可以完成上述所有操作吗？

“否”是可以接受的答案。这将使我能够继续前进并为我的问题寻找替代解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:36:50.077

我认为您不需要正则表达式。它似乎所做的只是替换`?`并附`&`加到`/?path=`前面。

使用`replace`您选择的语言中的字符串函数并从头`/?path=`开始。

```
// Input: /mypath/?myquery
String myquery = "/mypath/?myquery";
myquery = myquery.replaceAll("?", "&");
myquery = "/?path=" + myquery;
// Output: /?path=/mypath/&myquery 
```

Java`replaceAll()`采用正则表达式，但它是文字，因此您*实际上*不需要知道任何正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:43:55.000

这是你想要的？

正则表达式：`/^(\/[^?]*)(?:\?(.*))?/`
替换：`/?path=\1&\2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T01:10:38.853

如果你特别问

> **一个**正则表达式可以完成上述所有操作吗？

谷歌搜索，我看到[perl 可以做多个替换](https://stackoverflow.com/questions/765894/can-i-substitute-multiple-items-in-a-single-regular-expression-in-vim-or-perl)，但这似乎不是一个正则表达式。我要说**不**，一个正则表达式不能进行多次替换。

如果您只想使用正则表达式，它可能类似于：

```
public static void main(String[] args) {
    List<String> uris = Arrays.asList("/", "/mypath/", "/?myquery", "/mypath/?myquery");
    for (String uri : uris)
        System.out.println(uri + "\n" + rewriteURI(uri) + "\n");
}

private static String rewriteURI(String uri) {
    return uri.replaceAll("\\?", "&").replaceAll("^", "/?path=");
} 
```

哪个生产

```
/
/?path=/

/mypath/
/?path=/mypath/

/?myquery
/?path=/&myquery

/mypath/?myquery
/?path=/mypath/&myquery 
```

# asp.net-mvc - MVC 单选按钮设计选项

> ID：11660695
> 
> 赞同：1
> 
> 时间：2012-07-26T00:28:06.347
> 
> 标签：asp.net-mvc, razor, radio-button, styling

我正在创建一个 MVC 移动应用程序。我的一个屏幕包含单选按钮，供用户选择头发长度、眼睛颜色等。当前的样式非常庞大，每个项目占据一整行。

我还有哪些其他样式可供选择？这是一个屏幕截图，因此您可以看到它占用了多少空间。 [http://i.imgur.com/PgRr1.png](http://i.imgur.com/PgRr1.png)

以下是@danm 的一些代码

这是 Views/PersonalDetails/Edit.cshtml。

```
 <fieldset>
        <legend>Hair Length</legend>
        @Html.RadioButtonFor(e => e.HairLength, 0, new { id = "hair-short" })
        @Html.Label("hair-short", "Short")
        @Html.RadioButtonFor(e => e.HairLength, 1, new { id = "hair-medium" })
        @Html.Label("hair-medium", "Medium")
        @Html.RadioButtonFor(e => e.HairLength, 2, new { id = "hair-long" })
        @Html.Label("hair-long", "Long")
    </fieldset> 
```

这是 site.cs

```
.field-validation-error {
color: #f00;
display: block;
margin-top: 8px;
text-align: center;
}

.field-validation-valid {
display: none;
}

.input-validation-error {
border: 1px solid #f00;
background-color: #fee;
}

.validation-summary-errors {
font-weight: bold;
color: #f00;
}

.validation-summary-valid {
display: none;
}

.input input {
float: left;
}
.input label {
margin: 0px, 0px, 5px, 5px;
}

/* jQuery mobile styles
-----------------------------------------------------------*/

/* Make listview buttons fill the whole horizontal width of the screen */
.ui-li .ui-btn-inner a.ui-link-inherit, .ui-li-static.ui-li {
padding-right: 15px;
}

.ui-bar-a, .ui-body-a, .ui-btn-up-a, .ui-btn-hover-a, .ui-btn-down-a,
.ui-bar-b, .ui-body-b, .ui-btn-up-b, .ui-btn-hover-b, .ui-btn-down-b,
.ui-bar-c, .ui-body-c, .ui-btn-up-c, .ui-btn-hover-c, .ui-btn-down-c,
.ui-bar-d, .ui-body-d, .ui-btn-up-d, .ui-btn-hover-d, .ui-btn-down-d,
.ui-bar-e, .ui-body-e, .ui-btn-up-e, .ui-btn-hover-e, .ui-btn-down-e,
.ui-btn-active  {
text-shadow: none;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T00:37:47.330

单词长度似乎足够短，以至于您可以拥有两列单选按钮而不是一列。

我认为这是一个比简单地缩小单选按钮更好的解决方案，因为您希望保持目标足够大，以便人类手指轻松按下。

例子：

![在此处输入图像描述](../Images/df6ce2356eab948854c382b11a29e259.png)

**编辑**

这是一些（未经测试的）代码可以帮助您入门...

标记：

```
<fieldset>
    <div id="column-1">
        <legend>Hair Length</legend>
        @Html.RadioButtonFor(e => e.HairLength, 0, new { id = "hair-short" })
        @Html.Label("hair-short", "Short")
        @Html.RadioButtonFor(e => e.HairLength, 1, new { id = "hair-medium" })
        @Html.Label("hair-medium", "Medium")
        @Html.RadioButtonFor(e => e.HairLength, 2, new { id = "hair-long" })
        @Html.Label("hair-long", "Long")
    </div>
    <div id="column-2">
        <legend>Eye Colour</legend>
        @Html.RadioButtonFor(e => e.EyeColour, 0, new { id = "eyes-blue" })
        @Html.Label("eyes-blue", "Blue")
        @Html.RadioButtonFor(e => e.EyeColour, 1, new { id = "eyes-brown" })
        @Html.Label("eyes-brown", "Brown")
        @Html.RadioButtonFor(e => e.EyeColour, 2, new { id = "eyes-gray" })
        @Html.Label("eyes-gray", "Gray")
    </div>
</fieldset> 
```

CSS：

```
#column-1
{
    float:left;
    width:50%;
}

#column-2
{
    float:left;
    width:50%;
} 
```

您可能想要添加一些边距和/或填充以在列之间创建一些间距并提高美观度，但希望这足以让您使用。

# excel - 检查一个数字是否已经存在于 VBA 数组中

> ID：11660697
> 
> 赞同：2
> 
> 时间：2012-07-26T00:28:08.890
> 
> 标签：excel, vba

我有一小段代码检查计算出的数字“Birthday(i,0)”是否已经存在于数组“Birthday”中，以及它是否退出 For 计数器。有没有一种更简单的方法来测试“Birthday(i,0)”是否已经存在而不使用 For Counter 来检查数组“Birthday”的每个元素。

提前谢谢了。

代码如下：

```
 For i = 1 To MaxPeople

         Birthday(i, 0) = WorksheetFunction.RoundUp(Rnd() * 365, 0)

         For j = 1 To i - 1
             If Birthday(i, 0) = Birthday(j, 0) Then
                   NumberofPeople = i
                   Exit For
             End If

         Next j

         If NumberofPeople > 0 Then Exit For

  Next i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:55:17.597

```
Dim rv

'find the position of a value in the first dimension of an array
rv = Application.Match(yourDate, Application.Index(Birthday, 0, 1), 0)
'if not found, rv will be an error value
If IsError(rv) Then
    Debug.Print "Not found"
Else
    Debug.Print "Found at pos " & rv
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:59:18.373

看看这个例子是否有帮助？它使用分隔符加入数组，然后使用`INSTR`查找数组中的值。

```
Sub Sample()
    Dim n As Long
    Dim MyArray(5, 0) As Long
    Dim Delim As String

    n = 4

    Delim = Chr$(1)

    MyArray(0, 0) = 2
    MyArray(1, 0) = 3
    MyArray(2, 0) = 4
    MyArray(3, 0) = 5
    MyArray(4, 0) = 1

    If InStr(1, Delim & Join(WorksheetFunction.Transpose(MyArray), Delim) & _
    Delim, Delim & n & Delim, 1) Then
        Debug.Print "Exists"
    Else
        Debug.Print "Does Not Exist"
    End If
End Sub 
```

# javascript - 无法将 .slice Javascript 函数连接到我的 HTML

> ID：11660698
> 
> 赞同：0
> 
> 时间：2012-07-26T00:28:16.307
> 
> 标签：javascript, html, html-table, slice

我编写了一个脚本，将大量文本切成 1000 个字符块并将它们分组到一个对象中。现在我要做的是获取所有放在 textarea #PATypes 中的文本，将其分成 1000 个字符块，然后将每个单独的块放入表格中的一个单元格中。不幸的是，我遇到了麻烦——有人知道我做错了什么吗？

我在下面写了相关的片段；如果您想查看全部内容，请查看此处：http: [//jsfiddle.net/ayoformayo/yTcRb/1/](http://jsfiddle.net/ayoformayo/yTcRb/1/)

HTML

```
<label for="PATypes">Mass Text PA</label>
<textarea rows="2" cols="20" id="PATypes"></textarea>
<button onclick = "cutUp()">Submit PA</button> 
<table>
<tr>
<td id="PAType=Name=Value1"></td>
<td id="PAType=Name=Value2"></td>
<td id="PAType=Name=Value3"></td>
<td id="PAType=Name=Value4"></td>
<td id="PAType=Name=Value5"></td>
<td id="PAType=Name=Value6"></td>
</tr>
</table 
```

Javascript

```
function cutUp(){
    var chunks = [];
    var my_long_string = document.getElementById('PATypes').value;
    var i = 0;
    var n = 0;
    while(n < my_long_string.length) {
        n = 1000 * i;
        chunks.push(my_long_string.slice(n, n + 1000));
        i++;
    }
    document.getElementById('PAType=Name=Value4').innerHTML = chunks[0];
    document.getElementById('PAType=Name=Value5').innerHTML = chunks[1];
    document.getElementById('PAType=Name=Value6').innerHTML = chunks[2];
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:48:02.403

一个问题是您已经在 jsFiddle`cutUp`的处理程序中定义了您的函数。`onload`您需要从左侧菜单中选择*不换行选项。*

另一个问题是你的`chunks`数组最后总是有一个空字符串。您可以通过`n`在下一次评估`while`.

```
var n = 0
,   chunks = [];

while(n < my_long_string.length) { // ----v---increment n
    chunks.push(my_long_string.slice(n, n += 1000));
} 
```

***演示：http:*** [//jsfiddle.net/UFTjJ/](http://jsfiddle.net/UFTjJ/)

或者，如果您不喜欢作业的布置，请在...之后再做。

```
while(n < my_long_string.length) {
    chunks.push(my_long_string.slice(n, n + 1000));
    n += 1000;
} 
```

# java - 使用 Apache HTTPClient 提交棘手的表单数据

> ID：11660699
> 
> 赞同：2
> 
> 时间：2012-07-26T00:28:21.443
> 
> 标签：java, apache

这是我的代码：

```
HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost("http://www.webcitation.org/comb.php");

        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair(??, ??));
            nameValuePairs.add(new BasicNameValuePair("fromform", "2"));
            nameValuePairs.add(new BasicNameValuePair("email", "example@example.com"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);

            BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

            String line = "";
            while((line = rd.readLine()) != null) {
                System.out.println(line);
            }

        } catch (Exception e) {
            System.out.println(e);
        } 
```

这是我试图模仿的表单的 HTML 代码：[http ://www.webcitation.org/69Qsz3Tdn](http://www.webcitation.org/69Qsz3Tdn)

我正在尝试通过 Java 将 URL `http://video.google.com/?hl=en&tab=wv`、`http://maps.google.com/maps?hl=en&tab=wl`等提交到 PHP 文件并读取响应。由于s没有`name`s `href`，我很难过。复选框也没有`value`s，所以我无法检查它们是否被选中。

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:46:06.103

**您不会得到预期的响应。**

comb.php 的响应取决于 html 表单。

在你的 html 表单中没有指定值。所以我看不到 comb.php 如何测试复选框。

```
 <td><input type="checkbox" name="cachingurl0"/></td>
 <td><a href="http://video.google.com/?hl=en&tab=wv">http://video.google.com/?hl=en&tab=wv</a></td> 
```

**具有价值：**

```
 <td><input type="checkbox" name="cachingurl0" value="checked" /></td> 
```

1.) 您还需要一个带有 GUI 形式的 Java 应用程序（例如 Swing 形式的应用程序）。您可以在此处选中或取消选中所需的复选框。

2.) 您必须将适当的变量传递给 comb.php。例如：

```
if (myCheckB0.checked) { nameValuePairs.add(new BasicNameValuePair("cachingurl0", "checked"));}
if (myCheckB5.checked) { nameValuePairs.add(new BasicNameValuePair("cachingurl5", "checked")); 
```

# qt - 在 meego/N9 上带有 QtMobility 位置的离线地图？

> ID：11660700
> 
> 赞同：1
> 
> 时间：2012-07-26T00:28:33.737
> 
> 标签：qt, maps, meego, ovi, meego-harmattan

我想在 meego-harmattan 的一个应用程序中以离线模式使用 ovi 地图。根据 qml Map element documentation，connectivityMode 有一个 Map.OfflineMode 选项，但该选项在实践中不起作用。

环顾四周，我发现有些人声称在 meego-harmattan 上可以使用离线 ovi 地图，其他人 (https://bugreports.qt-project.org/browse/QTMOBILITY-1116) 说应该可以，但是允许它的插件不容易获得。

现在，这最后一条信息的日期是 2011 年 10 月。我想知道框架（和手机固件）的另外 2 次更新是否可以使用离线地图？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:58:48.320

诺基亚/Ovi 地图不支持/允许缓存 afaik。但是检查 OSM 瓦片支持包，http://xf.iksaif.net/dev/qtm-geoservices-extras.html 似乎支持缓存地图瓦片。

# php - 如果在 PHP 中有条件，如何写这个？

> ID：11660701
> 
> 赞同：2
> 
> 时间：2012-07-26T00:28:43.440
> 
> 标签：php

我的变量，`$current`格式`$row['start']`为**2012-07-24 18:00:00**

我应该如何写以下内容？

`if ($row['start'] - $current < 2 hours) echo 'starts soon'`

另外有没有办法将它与下面的结合起来？

```
<?php echo ($current > $row['start']) ? 'Started' : 'Starts';  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:33:42.380

您可以使用[`strtotime()`](http://php.net/strtotime)将这些日期时间字符串转换为时间戳，然后您可以彼此相加和相减。

```
$diff = strtotime($row['start']) - strtotime($current);
if ($diff < 7200) {
    echo 'Starts soon';
} else if ($diff <= 0) {
    echo 'Started';
} else {
    echo 'Starts';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:35:49.230

我建议在几秒钟内工作（从纪元开始），这 strtotime() 非常适合：

```
define("SOON_THRESHOLD", 2*60*60); // 7200 seconds == 2 hours
$start_time = strtotime($row['start']);
$current_time = strtotime($current);
$seconds_til_start = $start_time - $current_time;

if($seconds_til_start < SOON_THRESHOLD) {
  ...
} 
```

# google-app-engine - 了解谷歌应用引擎上的前端实例时间

> ID：11660702
> 
> 赞同：1
> 
> 时间：2012-07-26T00:28:45.247
> 
> 标签：google-app-engine, optimization

我的应用程序已经显示：

**前端实例时间：**

```
Frontend Instance Hours     62% 62%     17.35 of 28.00 Instance Hours 
```

**应用程序.yaml：**

```
version: 1
runtime: python27
api_version: 1
threadsafe: true

inbound_services:
- xmpp_message
- xmpp_presence
- xmpp_subscribe
- xmpp_error

libraries:
- name: django
  version: "1.2" 
```

使用 xmpp 服务是否会增加前端实例小时数？我需要 xmpp 服务向 gchat 客户端发送通知。该应用程序每小时处理的请求少于 10 个。如何在 GAE 上优化我的前端实例小时数？

任何有用的资源/教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:04:52.793

前端实例小时数仅记录您的应用程序实例运行的总时间。如果您有两个实例运行一小时，您将按两个实例小时计费。App Engine 会根据需要自动向上和向下扩展前端实例以服务您的流量，但在您正在处理的低流量水平下，至少需要运行一个实例才能提供流量，因此您将获得更多费用或每 10 分钟 1 个请求的数量少于每秒 1 个请求的数量。

包括 XMPP 在内的任何服务都不会从本质上增加消耗的实例小时数。服务由 XMPP 服务生成的请求将占用实例的处理时间，就像任何其他请求一样，当然，这*可能会*导致 App Engine 启动更多实例，或者在不需要时保持它们运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:42:00.887

在大多数情况下，是的，使用 XMPP 服务将使用前端实例小时数。您可以在管理控制台中查看当前正在运行的实例数量。从关于动态实例的[管理控制台文档](https://developers.google.com/appengine/docs/adminconsole/instances#Instance_Billing)（这很可能是您正在使用的）：

> 计费在实例启动时开始，在实例关闭十五分钟后结束。您只需为空闲实例付费，最多为在管理控制台的性能设置选项卡中设置的最大空闲实例数。

根据您的应用程序的架构（以及它处理请求的频率），您可能会在一天的大部分时间里运行一个或多个实例。

如果您需要在每小时内平均分配 10 个请求，您可能需要使用折扣预留实例（如[管理资源](https://developers.google.com/appengine/articles/managing-resources)中所述）。如果您可以将请求压缩到一个较小的窗口中，您的实例将有机会关闭，从而降低您的费用。

# ajax - 反向 Ajax + Spring MVC

> ID：11660703
> 
> 赞同：0
> 
> 时间：2012-07-26T00:28:48.403
> 
> 标签：ajax, spring, spring-mvc, reverse, dwr

我的网络应用程序有非常独特的要求。我有两个网络应用程序，例如。webapp1 和 webapp2。在 webapp1 中，我们正在收集一些信息并将其传递给 webapp2。Webapp2 处理此信息，完成后，必须通知 webapp1 所有数据是否已成功处理。现在我知道如果有一个 Web 应用程序，那么我可以使用 dwr 反向 ajax 并将更新发送回页面。我们也可以在我的场景中使用 DWR 吗？此外，我不想向所有打开的 webapp1 广播消息，而是只向 webapp1（浏览器）广播消息，后者将数据发送到 webapp2。

我希望我已经清楚地解释了这个场景

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-16T07:44:04.890

您可以在这种情况下使用 Atmosphere 框架和内置 websocket。

Atmosphere 框架易于与 Spring MVC 集成。

# jquery - 如何使用 jquery css a:hover

> ID：11660704
> 
> 赞同：1
> 
> 时间：2012-07-26T00:28:49.483
> 
> 标签：jquery, css

我正在使用颜色选择器来更改一些元素

```
function(color) {  
    $("#post h1").css("color",color.toHexString());
    $("#footer").css("background",color.toHexString());
    $("#navigation a:hover").css("background",color.toHexString());             
} 
```

`#post h1`和工作正常，`#foooter`但我怎样才能改变`#navigation a:hover`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T00:33:22.857

更新：试试看：

```
$('#navigation').hover(function(){
    $(this).css({'color':'your_color_when_mouse_in'});
},  function(){
    $(this).css({'color':'your_color_when_mouse_out'});
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:04:53.230

时髦的新鲜替代品！

```
function(color){
    //creates a new style tag
    var style = document.createElement('style');
    style.type = 'text/css';
    //setup your items as actually css instead of style attributes
    vars css = '#post h1{color: '+color.toHexString()+'}';
    css += '#footer, #navigation a:hover{background: '+color.toHexString()+'}';
    //place said css into style tag
    style.styleSheet.cssText = css;
    //add style tag to document
    $('head').append(style);
} 
```

这将为您的文档添加一个新`<style>`标签，其中包含您想要的 css。另外，它将允许您使用 css native `:hover`！

# css - CSS 过渡淡入

> ID：11660710
> 
> 赞同：38
> 
> 时间：2012-07-26T00:29:29.930
> 
> 标签：css, css-transitions

所以我之前使用过 CSS 过渡，但我有一个独特的案例。我正在编写一个用于创建模态的自定义插件。本质上，我动态创建了一个 div`document.createElement('div')`并将其附加到带有几个类的主体中。这些类定义颜色和不透明度。我想使用严格的 CSS 来淡入这个 div，但是改变状态似乎很困难，因为它们需要一些用户交互。

尝试了一些高级选择器，希望它能改变状态，尝试媒体查询希望改变状态......寻找任何想法和建议，如果可能的话，我真的想把它保留在 CSS 中

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2016-09-23T21:38:04.023

这些天对 CSS 关键帧的支持非常好：

```
.fade-in {
	opacity: 1;
	animation-name: fadeInOpacity;
	animation-iteration-count: 1;
	animation-timing-function: ease-in;
	animation-duration: 2s;
}

@keyframes fadeInOpacity {
	0% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}
```

```
<h1 class="fade-in">Fade Me Down Scotty</h1>
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-27T06:49:03.133

好的，首先我不确定当你使用创建 div 时它是如何工作的`(document.createElement('div'))`，所以我现在可能错了，但是不能为此使用 :target 伪类选择器吗？

如果您查看下面的代码，您可以看到我使用了一个链接来定位 div，但在您的情况下，可能可以从脚本中定位**#new**，这样可以使 div 在没有用户交互的情况下淡入，还是我想错了？

这是我的示例的代码：

HTML

```
<a href="#new">Click</a> 
<div id="new">
    Fade in ... 
</div> 
```

CSS

```
#new {
    width: 100px;
    height: 100px;
    border: 1px solid #000000;
    opacity: 0;    
}

#new:target {
    -webkit-transition: opacity 2.0s ease-in;
       -moz-transition: opacity 2.0s ease-in;
         -o-transition: opacity 2.0s ease-in;
                                  opacity: 1;
} 
```

...这是一个[jsFiddle](http://jsfiddle.net/u6crq/2/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-26T00:33:51.240

我相信您可以将Class 添加到元素中。但无论哪种方式，您都必须使用 Jquery 或 reg JS

```
div {
  opacity:0;
  transition:opacity 1s linear;*
}
div.SomeClass {
  opacity:1;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-17T06:51:19.283

我总是喜欢将 mixins 用于像淡入/淡出这样的小型 CSS 类，以防你想在多个类中使用它们。

```
@mixin fade-in {
    opacity: 1;
    animation-name: fadeInOpacity;
    animation-iteration-count: 1;
    animation-timing-function: ease-in;
    animation-duration: 2s;
}

@keyframes fadeInOpacity {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
} 
```

如果你不想使用 mixins，你可以创建一个普通的类 .fade-in。

# jquery - 当单击不是最近的时，jquery select 返回两个选项

> ID：11660713
> 
> 赞同：1
> 
> 时间：2012-07-26T00:30:13.510
> 
> 标签：jquery, jquery-ui

我的问题可能听起来有点混乱，但我希望读完这篇文章后会更清楚一点。

html

```
<form id="form">
selected: <input type="text" name="opt" id="opt">
<ul id="list">
<li>car</li>
<li>bus</li>
<li>bike</li>
</ul>
<input type="submit" name="submit" value="submit">
</form> 
```

JavaScript

```
$('#list li').click(function(){
    var id= $(this).text();
    $('#form').submit(function(){
        alert(id);
    });
}); 
```

当我单击一个列表项，然后在单击提交之前单击另一个列表项时，它会一个接一个地发出警报，例如，如果我单击汽车然后自行车，它会警告自行车，然后它会闪烁然后警告汽车。目的是只让它提醒最后的点击，或者换句话说，是选择的选项。因此，我希望它提醒自行车，而不是在每次点击时发出警报，因为这是最后的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:39:09.000

试试这个：**工作演示** [http://jsfiddle.net/RFgYk/1/](http://jsfiddle.net/RFgYk/1/) **或** [http://jsfiddle.net/RFgYk/](http://jsfiddle.net/RFgYk/)

**代码**

```
$('#list li').click(function() {
    id = $(this).text();

});

$('#form').submit(function() {
    alert(id);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:40:03.117

试试这个：

```
$('#form').submit(function(){
    id = $('#list li.selected').text();
    alert(id);
}); 
```

在这里，您只提醒最后一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T00:41:17.913

每次点击都会提交表单。根据您的代码。所以每次点击也会运行警报。为什么不使用实际标签？好奇你希望做什么。您也可以将表单提交从 click 函数中拆分出来，并将列表值存储在全局 Var

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T00:45:46.790

每次单击时都会添加一个提交处理程序，`li`因此对于每次单击，您都会从创建的提交处理程序中获得相应的警报`li`，您应该在单击处理程序之外的某个地方设置提交处理程序一次。

您可以在单击处理程序中设置最后单击项目的值并在提交处理程序中检索它，例如

```
$('#list li').click(function() {
    $('#form'.data('last', $(this).text());

});

$('#form').submit(function() {
    alert($('#form'.data('last');
});​ 
```

[小提琴](http://jsfiddle.net/mowglisanu/m29Qn/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T00:55:09.450

使用类的另一种方法；另外，我假设标记为“selected”的文本框应该显示所选项目的值——在这种情况下，您可以在警报中使用它的最终值：

```
$('#list li').click(function(){
    $('#opt').val($(this).text());
    $(this).addClass('selected');
    $('#list li').not(this).removeClass('selected');
});

$('#form').submit(function(){
    //To use selected item do: $('#list li.selected')

    alert( $('#opt').val() );
}); 
```

# mysql - 试图找到“前 n 个”，但日期出现一些错误

> ID：11660716
> 
> 赞同：0
> 
> 时间：2012-07-26T00:30:53.267
> 
> 标签：mysql

假设我正在尝试从本月开始查找一家商店销售的前 10 种冰淇淋口味。然而，我目前的查询只给了我 7/01 的前十种口味

```
select *
from buy_history
where date > '2012-07-01 00:00:00' 
group by flavor
order by max(purchase_count) desc 
limit 10; 
```

（是的，显然每毫秒可以购买多个冰淇淋。）

桌子看起来像 `buy_history(id, flavor, date, purchase_count)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:36:59.823

如何在下面使用日期条件

```
WHERE month(date)=3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:39:17.143

```
select flavor, sum(purchase_count) as purchase_count_total
from buy_history 
where date >= CONCAT(YEAR(CURDATE()), '-' MONTH(CURDATE()), '-1')
group by flavor 
order by sum(purchase_count) desc 
limit 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T00:40:42.870

它只是这样出现。进行手动计数（或将其放入电子表格并计算和验证）。

这里的问题是您正在按某个列 ( `group by flavor`) 对结果进行分组，并且您的结果具有额外的列，这些列既不包含在`group by`子句中，也不包含在聚合函数中。因此，MySQL 不知道如何显示这些列（服务器选择显示哪一个）。

你应该这样做（*大致）：

```
select flavor, sum(purchase_count) as total_sold
from buy_history
where date > '2012-07-01 00:00:00' 
group by flavor
order by total_sold desc 
limit 10; 
```

# google-maps-api-3 - 无法在谷歌地图 v3 中获取链接以打开标记信息窗口

> ID：11660718
> 
> 赞同：1
> 
> 时间：2012-07-26T00:30:56.907
> 
> 标签：google-maps-api-3

我在谷歌地图 v3 中获取链接以打开标记信息窗口时遇到问题。

任何人都可以帮忙吗？

代码在这里： http: [//pastebin.com/PgTtzdBq](http://pastebin.com/PgTtzdBq)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:53:37.317

[示例](http://www.geocodezip.com/v3_MW_example_map2.html)（从 Mike Williams 的 v2 教程翻译成 v3。

[v2 示例使用 dropdown](http://econym.org.uk/gmap/example_map15c.htm)，相同的概念适用于 v3（下拉列表不是特定于 API 版本的）

# asp.net - Safari 5.1.5 缺少 ASP.Net 4 会话数据

> ID：11660720
> 
> 赞同：0
> 
> 时间：2012-07-26T00:31:17.390
> 
> 标签：asp.net, session, safari

我在使用 Safari 5.1.5 时遇到了一个奇怪的问题，我有一个使用 wziard 控件的 ASP.NET 页面（版本 4）。在我正在收集信息的向导的特定步骤中，用户需要单击链接按钮，该按钮执行回发并在向导的同一步骤中填充数据网格。

数据被加载到数据集中，数据绑定工作正常，信息显示在页面上。与此同时，数据集被加载到会话对象中，以便稍后在向导中使用。

当用户完成此特定步骤时，单击下一步按钮（在向导上）并执行检查以确保提供了充足的信息。这是通过从会话对象中检索数据集并询问相关表来完成的。

在 Google Chrome、IE 和 Opera 中，这可以正常工作，并且检索到数据集并且数据存在。但是在 Safari 5.1.5 和 Firefox 14 中，数据集是空的。所有浏览器都运行完全相同的代码。

我已经在使用 Google 和 Safari 时逐步完成了代码，当在 Safari 中，数据集的数据表是空的，即使它用于填充数据网格。

我虽然可能在加载到会话对象之前数据集已损坏，但我已经通过在将数据集分配给会话变量之后立即从会话中检索数据集然后将数据集序列化为 XML 来测试这一点。XML 文件显示信息已加载到数据表和会话中。

有没有人见过这样的行为，或者对从这里去哪里有任何建议。

在此先感谢格伦。

**已解决：** 问题是 Safari 正在执行双重回发，第一次是正确的，但第二次是使用视图状态信息进行回发，因此 IsPostBack 为假，会话变量正在再次初始化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:28:08.400

请检查是否启用了cookies。由于 cookie 持有会话 ID，因此您应该启用它们。

或者你可以在 web config 的 sessionState 中设置 cookieless=true。

# mysql - MySQL 函数返回列值

> ID：11660721
> 
> 赞同：0
> 
> 时间：2012-07-26T00:31:44.317
> 
> 标签：mysql

在 StackOverflow 的帮助下，我有一个有效的 MySQL 查询。进行一些更改后，它返回`zip`和`distance`。我一直在尝试创建一个函数来为给定的 lat 和 lng 值设置参数并从另一个表返回 zip。但是查询返回两个值，我只需要一个。

```
SELECT loc.zip,(((ACOS(SIN((lat*PI()/180)) * SIN((`latitude`*PI()/180))+COS((lat*PI()/180)) * COS((`latitude`*pi()/180)) * COS(((lng - `longitude`)*PI()/180))))*180/PI())*60*1.1515) AS `distance` FROM geov1.zcta loc HAVING distance < 5 LIMIT 1; 
```

到目前为止，这就是我的功能：

```
BEGIN
DECLARE lat VARCHAR(15);
DECLARE lng VARCHAR(15);
DECLARE zip BIGINT;

SET zip = SELECT loc.zip,(((ACOS(SIN((lat*PI()/180)) * SIN((`latitude`*PI()/180))+COS((lat*PI()/180)) * COS((`latitude`*pi()/180)) * COS(((lng - `longitude`)*PI()/180))))*180/PI())*60*1.1515) AS `distance` FROM geov1.zcta loc HAVING distance < 5 LIMIT 1;

RETURN zip;

END 
```

这不起作用，给我一个错误，第 10 行有一些错误，这是：

```
`longitude`)*PI()/180))))*180/PI())*60*1.1515) AS `distance` FROM geov1.zcta loc HAVING distance < 5 LIMIT 1; 
```

此时我不知所措，我只需要让查询返回具有给定坐标的 zip。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:45:49.713

如果您的 SELECT 语句返回两个值，那么您应该使用带有 INTO 子句的 SELECT 语句，例如 -

```
BEGIN
  DECLARE a, b INT;
  SELECT MIN(column1), MAX(column1) INTO a,b FROM table;
END 
```

# grails - 我可以在返回消息条目字符串和参数之前获取 Grails 消息字符串吗？

> ID：11660722
> 
> 赞同：2
> 
> 时间：2012-07-26T00:31:50.183
> 
> 标签：grails, grails-validation

显然简化了，但我正在尝试构建一个字符串，我将把它传递给另一个 messages.properties 条目。例如，也许我的条目看起来像这样：

```
someField.sillyError.good=good
someField.sillyError.bad=bad
someField.validation.error=This has been a [{3}] morning 
```

验证看起来像这样：

```
static constraints = {
    someField(nullable: false, blank: false, validator: { val, obj ->
        def someOtherEntry = g.message(code: 'someField.sillyError.' + val)
        return ['someField.validation.error', someOtherEntry]
    }
 } 
```

调用`g.message()`不起作用，我似乎也无法使用其他任何东西来获取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:07:51.207

我有类似的情况，我使用以下代码。

```
default.mandatory.message={0} is Mandatory
item.error.message=Item #{0} - {1}

public setItemFieldMandatoryError(FormXItem item, String field, String defaultMessage) {
    def messageSource = Holders.applicationContext.messageSource
    def errorMessage = messageSource.getMessage("default.mandatory.message", [field] as Object[], LocaleContextHolder.getLocale())
    item.errors.rejectValue(field, "formXItem.error.message", [formxItem.itemNumber, errorMessage] as Object[], defaultMessage)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:04:44.797

通过执行以下操作，我能够完成我希望的事情：

在`messages.properties`：

```
someField.sillyError.good=good
someField.sillyError.bad=bad
someField.validation.error=This has been a [{3}] morning 
```

在`someCommand`：

```
def messageSource
static constraints = {
    someField(nullable: false, blank: false, validator: { val, obj ->
        def someOtherEntry = obj.messageSource.getMessage('someField.sillyError' + val, null, Locale.ENGLISH)
        return ['someField.validation.error', someOtherEntry]
    }
 } 
```

您可以在命令对象级别注入 bean，然后在约束中从 obj 变量调用它。来自同事，所以我不能相信：P

# api - 如何获取页面帖子列表，包括页面的幽灵/黑暗帖子？

> ID：11660723
> 
> 赞同：2
> 
> 时间：2012-07-26T00:31:55.067
> 
> 标签：api, facebook-graph-api

常规`https://graph.facebook.com/PAGE_ID/posts?access_token___`调用仅返回标准页面帖子。我怎样才能包括这些？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T13:41:26.933

从[宣布此功能的博客文章中](https://developers.facebook.com/blog/post/2012/07/23/new-marketing-tools-for-pages/)：

> 您可能会问如何通过 API 阅读所有已安排和未发布的页面帖子列表。Graph API 的 Page 对象提供了一个新连接 ,`promotable_posts`列出所有`published`, `scheduled`和`unpublished`Page 帖子。此外，您可以使用[FQL 流表](https://developers.facebook.com/docs/reference/fql/stream/)来实现此目的，如此 [处](https://developers.facebook.com/docs/reference/api/page)所述。

（在标题**未发布/预定页面帖子**下）

`https://graph.facebook.com/PAGE_ID/promotable_posts?access_token___`如何访问帖子也是如此。

# c - 在 Visual Studio 2012 RC 中定义 ANSI C ISO/IEC-9899:1990 中不存在的布尔类型

> ID：11660725
> 
> 赞同：0
> 
> 时间：2012-07-26T00:32:12.437
> 
> 标签：c, visual-studio, visual-c++

```
typedef char bool; 
```

不起作用（编辑：它不能编译为“致命错误 C1004：发现意外的文件结尾”，而不仅仅是 Intellisense 的推断）。我假设的原因是 bool 是 Microsoft Visual C/C++ 中的保留关键字之一。因为我需要布尔类型的文字名称作为精确的“bool”（这意味着，类型名称不是 bool，例如

```
boolean
BOOLEAN
BOOL
Bool
... 
```

**不允许**），是否有一个编译选项也许我可以用来覆盖不在 ANSI C（ISO/IEC-9899:1990）Microsoft Visual C/C++ 中的关键字“bool **”**？

注意：这根本不是关于 C++ 或 VISUAL C++。这是关于在兼容模式下使用 MSVC 编译器在 ANSI C 90 中编程。

提前致谢。

# 补充

编译选项：/TC /Za

```
/* ANSI C file main.c */

typedef char bool;

int main(int argc, char * argv[])
{
    return 0;
} 
```

**（编辑：这个问题已经解决了。对于这种情况 - typedef char bool - 就 ANSI C 而言，不能通过设置 /Za 选项来禁用 Microsoft 语言扩展，尽管 Microsoft 建议相反。这种不连贯性可能被视为 Visual Studio 2012 RC 中的潜在错误）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:47:05.473

文件有一个选项，您可以在其中选择要编译的类型（您可以选择 C ​​或 C++）

另外，您是否尝试过 stdbool.h

# rest - RESTFul WS over HTTPS 和 Java 客户端

> ID：11660726
> 
> 赞同：2
> 
> 时间：2012-07-26T00:32:22.880
> 
> 标签：rest, java1.4

我必须在 Java 1.4（约束）中开发一个 RESTful 客户端。此客户端应通过 SSL (Https) 调用 WS。我能够通过 http 成功调用 WS，但 https 超出了我的想象。请解释我要做什么以及如何导入证书等。另外我使用的是 vanilla Java 1.4，没有第三方 API。我在这里浏览了许多评论/帖子，但没有一个对我有用。

请帮忙。

# netbeans - 如何为 wso2 服务创建 netbeans 客户端

> ID：11660733
> 
> 赞同：0
> 
> 时间：2012-07-26T00:33:13.543
> 
> 标签：netbeans, client, wso2

我正在尝试为在 WSO2 上运行但不起作用的服务创建客户端，有人知道任何教程吗？我正在尝试使用 ?WSDL 但 netbeans 没有正确解析 WSDL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:32:27.493

[这](http://netbeans.org/kb/docs/websvc/client.html)是一个解释如何从 WSDL 生成 Web 服务客户端的示例。您也可以使用 Axis2 生成它，它是独立的 wsdl2java 工具。[这](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html)是 wsdl2java 工具的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:38:21.777

您可以使用 WSO2 Developer Studio 从您的 WSDL 文件生成 Web 服务客户端。有关详细信息，请参阅[Developer Studio 文档](http://wso2.org/project/developer-studio/2.0.1/docs/axis2_jaxws_category.html#Axis2Utils2)。

谢谢并恭祝安康，

哈沙娜

# iphone - VKRoadTile？奇怪的控制台错误

> ID：11660734
> 
> 赞同：8
> 
> 时间：2012-07-26T00:33:17.747
> 
> 标签：iphone, ios, urbanairship.com

```
MESH TOO LARGE!!! VKRoadTile: Too many road points for tile 0.0.1 (512) 
```

这是什么？

它出现在我的控制台中，但我在网上的任何地方都找不到它所指的任何内容的任何引用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:06:37.207

I got this error when I set the visiableMapRect of an MKMapView to only a single point rect (no union of multiple point rects).

# cocoa - Xcode 4.4 移除了开发者工具中的 Icon Composer

> ID：11660736
> 
> 赞同：37
> 
> 时间：2012-07-26T00:33:33.293
> 
> 标签：cocoa, icons, xcode4.4

所以我刚刚升级到最新最好的 Xcode 4.4 但找不到 Icon Composer。它在 Xcode 4.3 的 Open Developer Tool 菜单项中，但现在我在任何地方都找不到它。

苹果忘记包含它了吗？没有它如何创建图标？

我也尝试在终端中使用 iconutil，但出现不支持 1024x1024 的错误。我正在运行 OSX 10.7.4。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-26T02:16:11.767

我的猜测是 Apple 不希望你再使用它了。

**编辑：**更好的方法是将`.iconset`文件夹添加到 Xcode 中的目标。向下滚动到 Dvorak 的答案，这无疑是更好的答案。

* * *

官方认可的方式现在是`iconutil`命令。

从苹果的[指导方针](http://developer.apple.com/library/mac/documentation/UserExperience/Conceptual/AppleHIGuidelines/IconsImages/IconsImages.html#//apple_ref/doc/uid/20000967-SW1)：

> 创建必要的应用程序图标资产后，将它们放在名为`icon.iconset`. 要创建`.icns`文件，请`iconutil`在终端中使用。终端位于`/Applications/Utilities/Terminal`。输入命令，文件夹的路径在`iconutil -c icns <iconset filename>`哪里。您必须使用而不是 Icon Composer 来创建高分辨率文件。`<iconset filename>``.iconset``iconutil``.icns`

还有另一个更深入的相关 Apple 文档：[高分辨率资源](https://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html#//apple_ref/doc/uid/TP40012302-CH7-SW2)。

供参考，完整的图标集：

```
icon_16x16.png
icon_16x16@2x.png
icon_32x32.png
icon_32x32@2x.png
icon_128x128.png
icon_128x128@2x.png
icon_256x256.png
icon_256x256@2x.png
icon_512x512.png
icon_512x512@2x.png 
```

请注意，最后一个相当于 1024x1024，尽管 iconutil 似乎希望它命名为 512x512@2x，至少在 Lion 中是这样。确保——这是关键——你有这组文件，否则你会遇到错误。例如，请注意缺少`icon_64x64.png`。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-09T05:02:58.827

# 让 Xcode 自动创建一个 icns 文件

理想情况下，您将提供一整套图标。但是，并不要求拥有完整的套件；系统将为您不提供的尺寸和分辨率选择最佳表示。集合中的每个图标都提示系统要使用的最佳表示。

*

该集需要放入扩展名为**.iconset**的文件夹中。文件夹具有扩展名似乎有点不寻常，但此扩展名是向系统发出的信号，表明该文件夹包含一组图标。

*

Xcode 自动验证图标集文件夹并将其转换为 icns 文件。您需要做的就是将 iconset 文件夹添加到您的项目并构建项目。生成的 icns 文件会自动添加到构建的产品中。

*

**注意**：不要使用 Icon Composer——它不能创建高分辨率的 icns 文件。

[提供所有 App 图形资源的高分辨率版本](http://developer.apple.com/library/mac/documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html#//apple_ref/doc/uid/TP40012302-CH7-SW3)

[关于 OS X 的高分辨率](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-29T09:29:40.200

顺便说一句，我花了一个小时才弄清楚为什么两者都`iconsutil`无法`XCode`生成图标：我确实包含了一个 64x64 版本，这是错误的！不需要 64x64 版本。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-11T16:17:46.160

我创建了一个 Automator Workflow，它以 1024 像素的 PNG 图像作为输入，并在 .iconset 文件夹中自动为您创建所有其他格式。从设计师的角度来看，这不是最好的选择，但在开发过程中是完美的，因为 Xcode 不再抱怨缺少 16x16px 格式：

[https://github.com/audiocommander/Iconset-Generator](https://github.com/audiocommander/Iconset-Generator)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-26T00:56:08.273

下载 Xcode 4.4 的图形工具。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-15T18:56:11.753

你可以把旧的拿回来！

1.  转到苹果的开发页面，然后单击 Xcode 下方的“正在寻找旧版本的 Xcode？”
2.  下载 xCode 4.2。
3.  完成后打开 .dmg 文件。
4.  转到查找器并单击“转到文件夹”。
5.  键入“/Volumes/Xcode/Packages”。
6.  右键单击“DeveloperTools.pkg”。
7.  单击“The Unarchiver”打开（如果您在 App Store 中没有它是免费的）。
8.  将其解压缩到您的桌面并打开文件夹。
9.  右键单击有效负载文件并使用“存档实用程序”打开它。
10.  打开有效负载文件夹并转到应用程序 > 实用程序。
11.  将其复制到您的应用程序文件夹或其他地方。

享受图标作曲家！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-16T12:32:54.917

只是想我会同意 Xcode 4.4 的图形工具中的 Icon Composer 2.4。在 xcode44graphicstools6938118a.dmg 中不支持 1024 大小，但是旧的 2.2 版本支持。![在此处输入图像描述](../Images/1559a7d71ffd19c1a1bede61b03d74f5.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-01-23T01:03:09.533

截至 2015 年，所有其他答案都是工作量太大或完全错误。就这么简单：

![在此处输入图像描述](../Images/823e3307d4efd16c06dd54fae5a65765.png)

除了创建以下尺寸的图像之外，您无需执行任何操作：

```
16 x 16px
32 x 32px
64 x 64px
128 x 128px
256 x 256px
512 x 512px
1024 x 1024px 
```

然后在 Xcode 中的项目视图中单击`Images.xcassets`并从 finder 中将图像拖到 AppIcon 方块中。

您不必费力地命名文件或创建目录或将目录移动到 Xcode 或其中的任何一个中。只需从取景器中拖动图像即可。

这是其他人制作的关于在 XCode 中将图标拖动到何处的视频：

[http://www.youtube.com/watch?v=OQN_AwcF0GU&t=4m0s](http://www.youtube.com/watch?v=OQN_AwcF0GU&t=4m0s)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-08T13:20:11.287

Iconsutil 是最好的方法，也是 XCode 4.4 唯一接受的方法 请注意将您的 png 文件命名为与 Vervious 提到的完全相同并提供所有文件，否则将不起作用...

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-04T08:56:20.030

读这个...

[http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012302-CH1-SW1](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012302-CH1-SW1)

...获取您的 png 图像的命名约定。

不再支持 1024x1024。而是按照上面链接页面上的说明使用 512x512@2x 命名约定。

您不再需要转换为 icns 文件，因为 xcode 会自动为您执行此操作，因此您甚至不需要使用 iconutil。

以下是它的工作原理：

1) 只需在您的项目中创建一个扩展名为 .iconset 的文件夹 2) 将所有 png 放入其中，但确保按照上面链接给出的说明正确命名它们。3) 像往常一样编译项目。

Xcode 完成其余的工作。

# sql-server - 如何在sql server中插入许多类似细节的事务

> ID：11660738
> 
> 赞同：-4
> 
> 时间：2012-07-26T00:33:44.613
> 
> 标签：sql-server, tsql

我想将 100 个事务输入到具有相同地址和电话号码但名称不同的 sql server 数据库中。谢谢

好吧，快乐的人有很多负面反应，所以

我想插入 100 笔名称和地址相同但邮政信箱不同的交易。所以我的插入看起来像这样。

```
Insert into PEOPLE (PO_BOX, NAME , ADDRESS) 
VALUES ('100501', 'MICHAEL COLLINS', 'MBEAL NA BLATH') 
```

如何在保持相同名称和地址但将邮政信箱从 100501 增加到 100600 的同时做到这一点。邮政信箱不是主键，因为已经有一个索引键。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:05:37.380

如果您的姓名存储在另一个表中，那么您可以执行以下操作：

```
insert into test (id, name, address, phonenumber)
select id, name, '123 test dr', '12345678'
from names

select * from test 
```

请参阅带有演示的[SQL Fiddle](http://sqlfiddle.com/#!3/7398f/2)

根据您的编辑，您将执行以下操作：

```
declare @recNum int = 0

while @recNum < 100
  BEGIN
    INSERT INTO people (po_box, name, address)
    SELECT 100501 + @recNum, 'MICHAEL COLLINS', 'MBEAL NA BLATH'

    set @recNum = @recNum + 1
  END

select *
from people 
```

参见[SQL fiddle with Demo](http://sqlfiddle.com/#!3/e03e7/3)

# php - json_encode 在我的 php 中没有任何作用

> ID：11660741
> 
> 赞同：4
> 
> 时间：2012-07-26T00:34:01.623
> 
> 标签：php, json

我有这个小代码，我知道我从数据库中收到了很好的信息，因为我做了一些 print_r 并且工作正常：

```
//build query SQL         
$query = $this ->select() 
    ->where('numBedrooms=?',$numBedrooms) 
    ->where('type=?',$type)
    ->where('state=?',$state)
    ->limit(8);//8 rows, with an offset of $recent_page*8-8
//execute query SQL
$rows=$this->fetchAll($query);
//encode json
$var= json_encode($rows);//-------->var is empty always!! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T00:43:57.490

您需要将行集转换为数组：

`$var= json_encode($rows->toArray());`

[请参阅http://framework.zend.com/manual/en/zend.db.table.rowset.html](http://framework.zend.com/manual/en/zend.db.table.rowset.html)上的将行集作为数组检索

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T18:08:45.970

要为此添加不同的答案...

Zend 提供了不同的数据访问方式。我发现在 Zend 中始终使用数组更容易，因为它使您的代码更具可移植性。

使用 Zend_Db_Table_Abstract：

```
class Model_MyStuff extends Zend_Db_Table_Absract
{
    protected $_name = 'Stuff';
    protected $_primary = 'StuffID';

    function getStuff()
    {
        $select = $this->select();

        $select->where('Active = 1');

        $results = $select->query()->fetchAll();
        if (count($results) > 0) return $results;
        return null;
    }
} 
```

此代码将返回一个数组而不是可以立即传递给 json_encode 的对象。不同之处在于您要求对象 fetchAll($query)，而我将选择作为 query()->fetchAll()。我相信选择对象需要来自 $this->select() 才能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T00:38:37.327

如果 fetchAll() 像您说的那样返回一个对象，那么明智的做法是首先将其转换为数组，然后将其传递给 json_encode。我不相信 json_encode 与对象一起工作。

# oracle - 按序列号分组的问题

> ID：11660742
> 
> 赞同：2
> 
> 时间：2012-07-26T00:34:11.177
> 
> 标签：oracle, plsql, oracle11g

我基本上是在执行以下操作的 sql 之后。我在一组与 B 列何时更改但保持列 ID 保持顺序有关的顺序数字之后，我尝试了 Dense Rank，但它总是抛出 ID 列的序列，这使我所追求的东西变得混乱。有任何想法吗？

```
编号||A||B
01||T||1
02||T||1
03||T||0
04||T||0
05||T||1
06||T||1
07||T||1
08||T||0
09||T||1
10||T||1
11||T||0

```

进入

```
编号||A||B||C
01||T||1||1
02||T||1||1
03||T||0||2
04||T||0||3
05||T||1||4
06||T||1||4
07||T||1||4
08||T||0||5
09||T||1||6
10||T||1||6
11||T||0||7

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:02:46.673

```
--#3: Running total of value changes
select id, a, b
    ,sum(has_changed) over (partition by A order by id
        rows between unbounded preceding and current row) c
from
(
    --#2: Find rows where the value changed.
    select id, a, b
        ,case
            when b = lag(b) over (partition by A order by id) then 0
            else 1
        end has_changed    
    from
    (
        --#1: Test data
        select '01' ID, 'T' A, 1 B from dual union all
        select '02' ID, 'T' A, 1 B from dual union all
        select '03' ID, 'T' A, 0 B from dual union all
        select '04' ID, 'T' A, 0 B from dual union all
        select '05' ID, 'T' A, 1 B from dual union all
        select '06' ID, 'T' A, 1 B from dual union all
        select '07' ID, 'T' A, 1 B from dual union all
        select '08' ID, 'T' A, 0 B from dual union all
        select '09' ID, 'T' A, 1 B from dual union all
        select '10' ID, 'T' A, 1 B from dual union all
        select '11' ID, 'T' A, 0 B from dual
    ) test_data
)
order by id; 
```

结果：

```
ID  A   B   C
01  T   1   1
02  T   1   1
03  T   0   2
04  T   0   2
05  T   1   3
06  T   1   3
07  T   1   3
08  T   0   4
09  T   1   5
10  T   1   5
11  T   0   6 
```

不完全相同，尽管我认为您的示例有额外的增量，正如@Adam Hawkes 指出的那样。

* * *

**更新**

这将产生您预期的结果：

```
--#3: Running total of value changes, or where the value is 0
select id, a, b
    ,sum(has_changed_or_0) over (partition by A order by id
        rows between unbounded preceding and current row) c
from
(
    --#2: Find rows where the value changed, or where value is 0
    select id, a, b
        ,case
            when b = 0 then 1
            when b = lag(b) over (partition by A order by id) then 0
            else 1
        end has_changed_or_0
    from
    (
        --#1: Test data
        select '01' ID, 'T' A, 1 B from dual union all
        select '02' ID, 'T' A, 1 B from dual union all
        select '03' ID, 'T' A, 0 B from dual union all
        select '04' ID, 'T' A, 0 B from dual union all
        select '05' ID, 'T' A, 1 B from dual union all
        select '06' ID, 'T' A, 1 B from dual union all
        select '07' ID, 'T' A, 1 B from dual union all
        select '08' ID, 'T' A, 0 B from dual union all
        select '09' ID, 'T' A, 1 B from dual union all
        select '10' ID, 'T' A, 1 B from dual union all
        select '11' ID, 'T' A, 0 B from dual
    ) test_data
)
order by id; 
```

# c# - C# Metro HttpClient 未在 PostAsync 上接收 cookie

> ID：11660743
> 
> 赞同：4
> 
> 时间：2012-07-26T00:34:39.270
> 
> 标签：c#, windows-8, microsoft-metro, .net-4.5, dotnet-httpclient

我正在尝试使用 .NET 4.5 HttpClient 登录网站并接收 cookie。我在离开之前就中断了尝试并检查 CookieContainer 并且它不包含任何 cookie。不过，响应会发回 200 状态。

```
private async void Login(string username, string password)
{
    try
    {
        Uri address = new Uri(@"http://website.com/login.php");
        CookieContainer cookieJar = new CookieContainer();
        HttpClientHandler handler = new HttpClientHandler()
        {
            CookieContainer = cookieJar
        };
        handler.UseCookies = true;
        handler.UseDefaultCredentials = false;
        HttpClient client = new HttpClient(handler as HttpMessageHandler)
        {
            BaseAddress = address
        };

        HttpContent content = new StringContent(string.Format("username={0}&password={1}&login=Login&keeplogged=1", username, password));
        HttpResponseMessage response = await client.PostAsync(client.BaseAddress, content);
    } 
```

我不知道为什么这不起作用。当我尝试 .NET 4 风格时，它工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T00:49:08.953

使用[FormUrlEncodedContent](http://msdn.microsoft.com/en-us/library/system.net.http.formurlencodedcontent%28v=vs.110%29)而不是[StringContent](http://msdn.microsoft.com/en-us/library/system.net.http.stringcontent%28v=vs.110%29)和[string.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)。您的代码未正确转义用户名和密码。

```
HttpContent content = new FormUrlEncodedContent(new[]
{
    new KeyValuePair<string, string>("username", username),
    new KeyValuePair<string, string>("password", password),
    new KeyValuePair<string, string>("login", "Login"),
    new KeyValuePair<string, string>("keeplogged", "1")
}); 
```

# objective-c - SQLite EXC_BAD_ACCESS

> ID：11660744
> 
> 赞同：0
> 
> 时间：2012-07-26T00:34:43.620
> 
> 标签：objective-c, ios, xcode, ipad, sqlite

我在 sqlite3_prepare 之后收到 EXC_BAD_ACCESS 错误。任何想法将不胜感激？请注意，我正在使用 4 个 sql 语句遍历数据库。第一次迭代总是可以正常工作，第二次迭代会引发错误。

更新：第一个 SQL 语句有效，因为它没有返回任何值。

```
-(NSMutableArray *) categoryList{
    categories = [NSMutableArray array];
    const char *sql;

    for (int i = 0; i < 4; i++){
        @try {
            NSFileManager *fileMgr = [NSFileManager defaultManager];
            NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"webdemo.db"];
            BOOL success = [fileMgr fileExistsAtPath:dbPath];
            if(!success)
            {
                NSLog(@"Cannot locate database file '%@'.", dbPath);
            }
            if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
            {
                NSLog(@"An error has occured: %@", sqlite3_errmsg(db));
            }

            //queries for category captions and category images
            //get images from category attach first
            //take high res images first
            switch (i){
                case 0: //high res image in category attach
                    sql = "SELECT DISTINCT a.CategoryCaption1, b.LocationHigh FROM CategoryAdvance a JOIN CategoryAttach b ON a.CategoryText1 = b.CategoryText1 WHERE b.LocationHigh IS NOT NULL";
                    break;
                case 1: //low res image in category attach
                    sql = "SELECT DISTINCT a.CategoryCaption1, b.Location FROM CategoryAdvance a JOIN CategoryAttach b ON a.CategoryText1 = b.CategoryText1 WHERE b.LocationHigh IS NULL AND b.Location IS NOT NULL";
                    break;
                case 2: //high res image in category advance
                    sql = "SELECT DISTINCT CategoryCaption1, CategoryHIRESPicPath FROM CategoryAdvance where CategoryText1 NOT IN (SELECT CategoryText1 from CategoryAttach where LocationHigh IS NOT NULL or Location IS NOT NULL) AND CategoryHIRESPicPath IS NOT NULL";
                    break;
                case 3: //low res image in category advance
                    sql = "SELECT DISTINCT CategoryCaption1, CategoryPicPath FROM CategoryAdvance where CategoryText1 NOT IN (SELECT CategoryText1 from CategoryAttach where LocationHigh IS NOT NULL or Location IS NOT NULL) AND CategoryHIRESPicPath IS NOT NULL";
                    break;
            }

            sqlite3_stmt *sqlStatement;
            if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
            {
                NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
            }else{

                while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
                    Category *category = [[Category alloc] init];
                    category.caption = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,0)];
                    category.imageName = @"AppIcon-retina.png"; //[NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
                    [category parseImageName];
                    [categories addObject:category];
                }
            }

            sqlite3_finalize(sqlStatement);

        }
        @catch (NSException *exception) {
            NSLog(@"Problem with prepare statement: %@", sqlite3_errmsg(db));
        }
        @finally {
            //sqlite3_finalize(sqlStatement);
            sqlite3_close(db);
        }
    }

    //delete duplicate categories

    //order categories alphabetically

    return categories;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:53:24.400

我认为问题在于 finalize 语句，在您的代码中，如果没有准备好语句，那么它也会调用 finalize 方法。

检查重写的代码：

```
-(NSMutableArray *) categoryList
{
    categories = [NSMutableArray array];
    const char *sql;
    @try
    {
      NSFileManager *fileMgr = [NSFileManager defaultManager];
      NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"webdemo.db"];
      BOOL success = [fileMgr fileExistsAtPath:dbPath];
      if(!success)
      {
           NSLog(@"Cannot locate database file '%@'.", dbPath);
      }
      if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
      {
           NSLog(@"An error has occurred");
      }
      for (int i = 0; i < 4; i++)
      {
        switch (i){
            case 0: //high res image in category attach
                sql = "SELECT DISTINCT a.CategoryCaption1, b.LocationHigh FROM CategoryAdvance a JOIN CategoryAttach b ON a.CategoryText1 = b.CategoryText1 WHERE b.LocationHigh IS NOT NULL";
                break;
            case 1: //low res image in category attach
                sql = "SELECT DISTINCT a.CategoryCaption1, b.Location FROM CategoryAdvance a JOIN CategoryAttach b ON a.CategoryText1 = b.CategoryText1 WHERE b.LocationHigh IS NULL AND b.Location IS NOT NULL";
                break;
            case 2: //high res image in category advance
                sql = "SELECT DISTINCT CategoryCaption1, CategoryHIRESPicPath FROM CategoryAdvance where CategoryText1 NOT IN (SELECT CategoryText1 from CategoryAttach where LocationHigh IS NOT NULL or Location IS NOT NULL) AND CategoryHIRESPicPath IS NOT NULL";
                break;
            case 3: //low res image in category advance
                sql = "SELECT DISTINCT CategoryCaption1, CategoryPicPath FROM CategoryAdvance where CategoryText1 NOT IN (SELECT CategoryText1 from CategoryAttach where LocationHigh IS NOT NULL or Location IS NOT NULL) AND CategoryHIRESPicPath IS NOT NULL";
                break;
        }

        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement");
        }
        else
        {

            while (sqlite3_step(sqlStatement)==SQLITE_ROW)
            {
                Category *category = [[Category alloc] init];
                category.caption = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,0)];
                category.imageName = @"AppIcon-retina.png"; //[NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
                [category parseImageName];
                [categories addObject:category];
            }
            sqlite3_finalize(sqlStatement);
        }
    }
  }
  @catch (NSException *exception)
  {
     NSLog(@"Problem with prepare statement");
  }
  @finally
  {
     sqlite3_close(db);
  }
  return categories;
} 
```

# iphone - NSArray NSDictionary NSNumber 在 Xcode 4.4 中使用 @operator

> ID：11660747
> 
> 赞同：2
> 
> 时间：2012-07-26T00:34:56.150
> 
> 标签：iphone, xcode4.4

> **可能重复：**
> [Xcode 4.4 上的 Apple LLVM 4.0 新功能（文字）](https://stackoverflow.com/questions/9347722/apple-llvm-4-0-new-features-on-xcode-4-4-literals)

我读过一篇这篇[文章](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_4.html#//apple_ref/doc/uid/TP40011649-SW1)。

我发现了很棒的技能。是关于@operator。

> NSArray、NSDictionary 和 NSNumber 对象支持文字语法，使用与 NSString 文字相同的“@”运算符。

但是，我找不到任何示例代码。

您能否使用@operator 进一步解释有关 NSNumber、NSArray、NSDictionary 的信息？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:37:16.230

[您可以在 LLVM 关于Objective-C Literals](http://clang.llvm.org/docs/ObjectiveCLiterals.html)的手册页中找到有关新语法的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:37:24.427

Mike ash就这个话题写了一篇非常好的[文章：](http://mikeash.com/pyblog/friday-qa-2012-06-22-objective-c-literals.html)

它涵盖了基础知识，以及一些非常酷的实现细节。这至少应该让您开始，如果您有任何其他问题，请在下面发表评论！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T17:07:12.773

到目前为止，我看到的最好的文档在[llvm 手册页](http://clang.llvm.org/docs/ObjectiveCLiterals.html)中。

```
 // integral literals.
  NSNumber *fortyTwo = @42;             // equivalent to [NSNumber numberWithInt:42]
  NSNumber *fortyTwoUnsigned = @42U;    // equivalent to [NSNumber numberWithUnsignedInt:42U]
  NSNumber *fortyTwoLong = @42L;        // equivalent to [NSNumber numberWithLong:42L]
  NSNumber *fortyTwoLongLong = @42LL;   // equivalent to [NSNumber numberWithLongLong:42LL]

  // floating point literals.
  NSNumber *piFloat = @3.141592654F;    // equivalent to [NSNumber numberWithFloat:3.141592654F]
  NSNumber *piDouble = @3.1415926535;   // equivalent to [NSNumber numberWithDouble:3.1415926535]

  // BOOL literals.
  NSNumber *yesNumber = @YES;           // equivalent to [NSNumber numberWithBool:YES]
  NSNumber *noNumber = @NO;             // equivalent to [NSNumber numberWithBool:NO]

  // This creates an NSArray with 3 elements. The comma-separated sub-expressions of an array
  // literal can be any Objective-C object pointer typed expression.
  NSArray *array = @[ @"Hello", NSApp, [NSNumber numberWithInt:42] ];

  // Immutable dictionary expression:
  NSDictionary *dictionary = @{
    @"name" : NSUserName(),
    @"date" : [NSDate date],
    @"processInfo" : [NSProcessInfo processInfo]
  }; 
```

# bezier - 如何扩展贝塞尔曲线？

> ID：11660750
> 
> 赞同：1
> 
> 时间：2012-07-26T00:35:41.140
> 
> 标签：bezier

我正在使用这段代码来计算 [0, 1] 中 s 的三次贝塞尔曲线。我想根据其几何连续性来扩展曲线。我试过只设置 [0, 1] 以外的值，但结果不正确。实际上是否有一种可能的算法来计算贝塞尔点？

pb, pbh, peh, pe 是三次贝塞尔控制点的向量。

```
*pq = pb*powf(1-s, 3) + pbh*(3*s*(powf(1-s, 2))) + peh*(3*powf(s, 2)*(1-s)) + pe*powf(s,3); 
```

[http://imageshack.us/photo/my-images/217/37013437.jpg/](http://imageshack.us/photo/my-images/217/37013437.jpg/)

这是我得到的图像。白色曲线是我想要得到的。有 3 条白色贝塞尔曲线相互连接。中心是基于我的代码的曲线。延伸曲线（整个白色曲线大约是中心曲线的两倍）是我想要的。但是，如果我只是用 s 在 [-0.5, 1.5] 范围内的代码构建贝塞尔曲线，我会得到绿色的曲线，它甚至没有通过两个原始控制点。

对于绿线的句柄，我使用了以下代码，它也适用于 [0, 1] 中的 s。p123 是新的绿色左手柄，p234 是新的右手柄。

```
p12 = (pbh-pb)*s+pb;
p23 = (peh-pbh)*s+pbh;
p34 = (pe-peh)*s+peh;

p123 = (p23-p12)*s+p12;
p234 = (p34-p23)*s+p23; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T00:09:30.893

If you don't have any additional information, then the most reasonable kind of extension you can get is in fact the one you obtain by passing arguments *s* outside the [0,1] range. Obviously, a curve extended in this fashion will contain the original curve, so as your green curve doesn't do so, the computation of the control points must be flawed. I just added formulas for that computation to [another answer](https://stackoverflow.com/a/11705483/1468366); they should work for you as well.

In the three-segment white curve, the control points are not symmetric around the junctions. This means that the curve will continue to go in the same direction (as they are on a line), but will change speed (with *s* interpreted as time) quite suddenly. You cannot achieve that shape with a smooth continuation. So the method described above won't give you the white shape, and you won't be able to obtain that shape at all unless you provide some kind of further information.

# docpad - Docpad 的@getBlock 有什么作用？

> ID：11660755
> 
> 赞同：3
> 
> 时间：2012-07-26T00:35:57.223
> 
> 标签：docpad

这是一个简单的问题，我很难找到答案。我刚刚开始使用[docpad](https://github.com/bevry/docpad)来构建网站。我在 HTML5 Boilerplate 骨架中遇到了以下行：

> `<%- @getBlock('styles').add(["/style.css"]).toHTML() %>`

有谁知道这是做什么的。端点是它输出以下html：

> `<link rel="stylesheet" href="/style.css" />`

但我不确定这里到底发生了什么，以及为什么这个简单的 css 链接是以这种方式产生的。

任何照明将不胜感激。

**更新**

玩了一会儿，@getBlock 的作用似乎是输出某个 html 代码块。在这种情况下，样式似乎指定了代码。如果这是正确的，很高兴知道 Docpad 中还有哪些其他块，或者这个 @getBlock 函数（？）来自什么其他框架......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T13:41:47.153

DocPad 的创始人在这里。

正确，`getBlock`是您可用的内置模板助手的一部分。有几个块可用，`scripts`包括`styles`和`meta`。这些的目的是允许插件和其他模板安全地注入块的内容并与之交互。

这样的例子可能是：

*   仅将特定脚本添加到一个模板的标头
*   缩小您使用的所有脚本，甚至将它们连接到一个文件中
*   为某些插件注入新脚本等

我们正在努力改进文档和支持系统，因此很抱歉之前不清楚这些内容 - 但我们正在尽力而为！

# php - 刷新表单而不运行表单验证

> ID：11660756
> 
> 赞同：0
> 
> 时间：2012-07-26T00:36:00.343
> 
> 标签：php, forms, codeigniter, validation

我正在设置一个购物车，用户可以在其中更新数量。因为我不知道aJAX 可以立即执行，所以我希望通过刷新购物车在完整的php 中执行此操作。（[您仍然可以查看我尝试使用 AJAX 进行设置的帖子](https://stackoverflow.com/questions/11606079/how-can-i-update-my-cart-with-ajax)）

问题是购物车下方有一个表格，当用户更改数量（输入）时，他必须单击“刷新”或“重新计算”，无论如何。

所以我的问题是我让验证过程运行，因为重新计算就像一个提交按钮（价格在表单方法的开头计算），因为用户修改了输入，并且对于所有尚未填写的字段然而，我得到了一个错误。

我怎么能说“如果用户单击刷新，不要将表单提交到验证过程，只需考虑该输入”？我不知道是否可以在同一页面上有 2 个单独的表格？（他们在彼此里面）

顺便说一句，我正在使用 codeIgniter。

我给出了我表格的一部分，我需要听

`form_dropdown('quantity'.$product['title'],$options,$value[$product['title']],$data0);`

当我想更新数量时，只有这一个。

```
<ul class="form">
    <li>
        <h2>Your Information</h2>
    </li>
    <li>
        <ul class="form" id="threeColumns">
            <li>
                <?php
                echo form_open('main/Form');

                echo form_label('First Name', 'firstname');
                echo ' :</br>';
                if (set_value('firstname')) {
                    $valuefirstname = set_value('firstname');
                } else {
                    $valuefirstname = $this->session->userdata('firstname');
                }
                echo form_input('firstname', $valuefirstname);
                echo form_error('firstname');

                echo '</li><li>';

                echo form_label('Last Name', 'lastname');
                echo ' :</br>';
                if (set_value('firstname')) {
                    $valuelastname = set_value('lastname');
                } else {
                    $valuelastname = $this->session->userdata('lastname');
                }
                echo form_input('lastname', $valuelastname);
                echo form_error('lastname');

                echo '</li><li>';

                echo form_label('Email', 'email');
                echo ' :</br>';
                if (set_value('firstname')) {
                    $valueemail = set_value('email');
                } else {
                    $valueemail = $this->session->userdata('email');
                }
                echo form_input('email', $valueemail);
                echo form_error('email');
                ?>
                <div class="fError Right">
                    <?php
                    if (ISSET($error) AND $error != NULL)
                        echo $error;
                    ?>
                </div>
            </li>
        </ul>
    </li>

    <div class="break">
    </div>

    <li id="Payment">
        <div id='Table'>
            <table>
                <tr>
                    <th id="top-left">
                        Product
                    </th>
                    <th>
                        Color
                    </th>
                    <th>
                        Quantity
                    </th>
                    <th>
                        Price Per Product
                    </th>
                    <th id= "top-right">
                        Total
                    </th>
                </tr>
                <?php foreach ($products as $product) { ?>
                    <tr class="line">
                        <td>
                            <img id="tableImage" src="<?php echo base_url($product['image_url']) ?>" alt="product" width="121"  />
                        </td>
                        <td>
                            <?php echo $product['title'] ?>
                        </td>
                        <td>
                            <?php
                            $options = array(
                                '0' => '0',
                                '1' => '1',
                                '2' => '2',
                                '3' => '3',
                                '4' => '4',
                                '5' => '5',
                                '6' => '6',
                                '7' => '7',
                            );

                            if ($product['quantity'] == 0) {
                                $value[$product['title']] = set_value('quantity' . $product['title']);
                            } else {
                                $value[$product['title']] = $product['quantity'];
                            }
                            $data0 = 'class="quantSelect" value="' . $value[$product['title']] . '" id="quant' . $product['title'] . '"';

                            echo form_dropdown('quantity' . $product['title'], $options, $value[$product['title']], $data0);
                            ?>
                        </td>
                        <td>
                            <?php echo $product['price'] ?>
                        </td>
                        <td id="<?php echo 'price' . $product['title'] ?>">
                            $<?php echo $total[$product['title']] ?>
                        </td>
                    </tr>
                    <?php } ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:49:38.517

一种简单的方法是为您的表单设置两个规则集。一个是所有字段和“必需”。另一个是相同的规则，但没有“必需”

然后如果刷新，运行没有“必需”的表单验证

如果提交，则使用所需的规则集运行表单验证。

# c++ - pcap_next 在 Linux 上偶尔会丢失数据包

> ID：11660758
> 
> 赞同：0
> 
> 时间：2012-07-26T00:36:15.210
> 
> 标签：c++, libpcap

昨天，我问我[对 libpcap 的异步使用是否让我丢包](https://stackoverflow.com/questions/11637063/)。今天仔细看了下，好像问题不在libpcap的异步使用上，而在`pcap_next_ex`. 偶尔（1000 中有 10 次），`pcap_next_ex`将在 pcap 句柄超时到期之前返回，告诉程序没有要读取的数据包（即使它们在那里）。

以下概念验证重现了该问题。它依赖于 libpcap、pthread、boost 和[libcrafter](http://code.google.com/p/libcrafter/)（一个不错的 C++ 数据包制作库）。基本上，它将一组 TCP-SYN 数据包发送到目的地，并尝试使用 libpcap 获取响应。线程调用`pcap_loop`并行运行 - 当主程序错过一些响应（如上所述）时，线程捕获所有数据包。

```
#include <boost/date_time/posix_time/posix_time.hpp>
#include <boost/format.hpp>
#include <boost/make_shared.hpp>
#include <boost/shared_ptr.hpp>

#include <crafter.h>
#include <netinet/ip.h>
#include <netinet/tcp.h>
#include <pcap.h>
#include <sys/types.h>
#include <sys/socket.h>

using namespace boost;
using namespace Crafter;
using namespace std;

int captureThreadCount = 0;

typedef vector<pair<shared_ptr<Packet>, posix_time::time_duration> > PacketTimestamp;
PacketTimestamp capturedThreadPackets;

void captureThreadCallback(u_char* user, const struct pcap_pkthdr* h, const u_char* bytes)
{
    shared_ptr<Packet> packet = make_shared<Packet>();
    packet->PacketFromIP(bytes + 16, h->caplen - 16);
    posix_time::time_duration timestamp = posix_time::seconds(h->ts.tv_sec) +
        posix_time::microseconds(h->ts.tv_usec);
    capturedThreadPackets.push_back(make_pair(packet, timestamp));
    ++captureThreadCount;
}

void* captureThread(void* arg)
{
    pcap_t* pcap = (pcap_t*) arg;
    pcap_loop(pcap, -1, captureThreadCallback, NULL);
}

int main(int argc, char* argv[])
{
    if (argc != 5) {
        cout << "Usage: " << argv[0] << " <source ip> <destination ip> <port> <# tries>" << endl;
        exit(1);
    }

    InitCrafter();

    // Parameters.
    string sourceIp = argv[1];
    string destinationIp = argv[2];
    int port = atoi(argv[3]);
    int nTries = atoi(argv[4]);

    char errorBuffer[1024];
    // Socket for sending,
    int sd = socket(PF_INET, SOCK_RAW, IPPROTO_RAW);
    // And sockaddr_in to send to.
    struct sockaddr_in sin;
    sin.sin_family = AF_INET;
    sin.sin_port = htons(port);
    sin.sin_addr.s_addr = inet_addr(destinationIp.c_str());    
    // One pcap for the main thread (calling pcap_next),
    pcap_t* pcapForNext = pcap_open_live(NULL, BUFSIZ, false, 1000, errorBuffer);
    // Another pcap for a capture thread (calling pcap_loop),
    pcap_t* pcapCapture = pcap_open_live(NULL, BUFSIZ, false, 1000, errorBuffer);
    // Both filtered for SYN+ACK or RST+ACK from destination:port to source.
    string filterExpression = (boost::format("ip src %s and dst %s and src port %d and ((tcp[tcpflags] & (tcp-syn|tcp-ack) != 0) or (tcp[tcpflags] & (tcp-rst|tcp-ack) != 0))") % destinationIp % sourceIp % port).str();
    struct bpf_program filter;
    pcap_compile(pcapForNext, &filter, filterExpression.c_str(), false, 0);
    pcap_setfilter(pcapForNext, &filter);
    pcap_setfilter(pcapCapture, &filter);
    pcap_freecode(&filter);
    // Don't forget the capture thread!
    pthread_t thread;
    pthread_create(&thread, NULL, captureThread, pcapCapture);

    // Some statistics.
    int packetsSent = 0;
    int packetsReceived = 0;
    int packetsTimeout = 0;
    int packetsFailed = 0;

    // Let's probe.
    for (int i = 0; i < nTries; ++i) {
        // Create packet,
        IP ipHeader;
        ipHeader.SetSourceIP(sourceIp);
        ipHeader.SetDestinationIP(destinationIp);
        TCP tcpHeader;
        tcpHeader.SetSrcPort(12345 + i);
        tcpHeader.SetDstPort(port);
        tcpHeader.SetFlags(TCP::SYN);
        shared_ptr<Packet> packet = make_shared<Packet>(ipHeader / tcpHeader);
        // Check the time,
        struct timeval tv;
        gettimeofday(&tv, NULL);
        posix_time::time_duration sentTime =
            posix_time::seconds(tv.tv_sec) + posix_time::microseconds(tv.tv_usec);
        // And send it.
        if (packet->SocketSend(sd) > 0) {
            cerr << "Sent packet " << i << " at " << sentTime << "." << endl;
            ++packetsSent;
        }
        else {
            cerr << "Sending packet " << i << " failed." << endl;
            continue;
        }

        struct pcap_pkthdr* pktHeader;
        const u_char* pktData;
        int r;
        // Wait for the response.
        if ((r = pcap_next_ex(pcapForNext, &pktHeader, &pktData)) > 0) {
            posix_time::time_duration timestamp =
                posix_time::seconds(pktHeader->ts.tv_sec) +
                posix_time::microseconds(pktHeader->ts.tv_usec);
            cerr << "Response " << i << " received at " << timestamp << "." << endl;
            ++packetsReceived;
        }
        else if (r == 0) {
            cerr << "Timeout receiving response for " << i << "." << endl;
            ++packetsTimeout;
        }
        else {
            cerr << "Failed receiving response for " << i << "." << endl;
            ++packetsFailed;
        }
    }

    // Wait (to ensure "fast packets" are captured by the capture thread),
    usleep(500000); // 500 ms.

    for (PacketTimestamp::iterator i = capturedThreadPackets.begin();
         i != capturedThreadPackets.end(); ++i) {
        TCP* tcpLayer = GetTCP(*i->first);
        cout << "Captured packet " << (tcpLayer->GetDstPort() - 12345) << " at " << i->second << "." << endl;
    }

    cout << "SNT=" << packetsSent <<
        ", RCV=" << packetsReceived <<
        ", TIM=" << packetsTimeout <<
        ", FLD=" << packetsFailed <<
        ", CAP=" << captureThreadCount << "." << endl;

    CleanCrafter();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:36:15.210

这似乎是 libpcap 在 Linux 中使用内存映射的问题（即使在最新的 libpcap 1.3.0 上也会发生）。如果在没有内存映射支持的情况下编译 libpcap（如[tcpdump 邮件列表存档中的消息中所述](http://seclists.sebug.net/tcpdump/2009/q3/115)），问题就会消失。

# c# - 检测 propertyGrid 中的属性选择

> ID：11660760
> 
> 赞同：1
> 
> 时间：2012-07-26T00:36:20.917
> 
> 标签：c#, properties, selection, detect, propertygrid

是否可以检测何时选择了 propertyGrid 中的属性？如果是这样，怎么办？

在下图中，我想知道在运行时选择了哪些属性。 ![在此处输入图像描述](../Images/92a1173d9c9c279ef11ba72d02aba72e.png)

例如，网格知道选择了 MyBool，我可以做些什么来以编程方式而不是视觉方式获取该信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:17:59.050

我不经常在 Windows 窗体应用程序中工作，但很无聊，我想看看。我不确定您是否已为您正在寻找的内容提供了所有背景信息，但我会建议您继续提问

```
private void propertyGrid1_SelectedGridItemChanged(object sender, SelectedGridItemChangedEventArgs e)
    {
        MessageBox.Show(e.NewSelection.Label);

    } 
```

希望这会有所帮助。

# c++ - 内存使用率上升。释放的内存没有被重用

> ID：11660762
> 
> 赞同：2
> 
> 时间：2012-07-26T00:36:37.187
> 
> 标签：c++, windows, memory-management, memory-leaks

我正在使用[debug_new](http://wyw.dcweb.cn/leakage.htm)来查找内存泄漏。我正在删除我的对象，并且 debug_new 没有显示我泄漏它们的任何痕迹。

我已经阅读了有关内存碎片的几个线程。但我还是很困惑。此时我正在测试我的框架并且我正在做一个简单的测试。我像这样创建一个新对象：

```
if(sf::Keyboard::isKeyPressed(sf::Keyboard::Space)){
    artemis::Entity& e = world->createEntity();
    e.addComponent(new PositionComponent(posX,posY));
    e.addComponent(new MovementComponent(500,0));
    e.addComponent(new SpriteComponent(TextureManager::getInstance().getTexture("bullet.png")));
    e.addComponent(new ColliderComponent(10,10));
    e.refresh();
    e.setGroup("BULLET");
} 
```

这些“组件”在名为“EntityManager”的管理器中进行管理，该管理器重用实体对象，但在将实体发送回“池”时破坏组件。我已经对此进行了测试，如果池中没有可用的实体，则只会创建新实体。

从上面的代码可以看出。在这个简单的测试中，模式是相同的。然而，分配器继续使用新内存，而不是重用任何以前使用过的内存。每个空格键命中（每帧 1/60）创建几千个使我的记忆进入 2 gig 频谱。组件甚至没有那么大。例如：

```
class ColliderComponent : public artemis::Component{

    public:
    int width,height,collidionsId;

    ColliderComponent(int width, int height){
        this->width = width;
        this->height = height;
    }
}; 
```

到目前为止，大多数组件都是简单的整数“集合”。它们非常轻巧。它绝对应该重用一些以前分配/释放的内存。但事实并非如此。

也许我错过了一些东西。有没有人对可能发生的事情有不同的想法？有没有好的（免费）内存分析器？如果不是因为我的组件，那么缺陷一定在其他地方。我现在根本看不到它，至少可以说令人沮丧。

编辑：看起来我忽略了导致重大泄漏的不同部分。这显然是我自己的愚蠢错误。

这是罪魁祸首：e.setGroup("BULLET");

“BULLET”被保存为一个指针（我应该重新设计它），并覆盖指向实体 ID 索引处现有字符串的指针。我不知道为什么我忽略了这一点，但我的内存分配现在很稳定！

我本可以使用智能指针，但到目前为止我已经从中学到了很多东西！我觉得我已经取得了一些成就=D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:30:29.900

我没有在 中看到重载的`new`运算符`ColliderComponent`，这使我相信您总是从堆中分配内存，并将内存分配给您的`EntityManager`. 这肯定看起来像一个泄漏，一旦你`EntityManager`被破坏就会消失。

**编辑：**我现在更了解您的代码是如何工作的。组件不会被您的 缓存`EntityManager`，只有`Entity`is。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:56:45.667

您说您正在使用任务管理器来评估内存消耗 - 大多数内存管理器不会立即将释放的内存返回给操作系统（这是一个相当昂贵的操作），而是保持内存可供应用程序本身使用。因此，您的应用程序的内存管理器（它是 C++ 运行时的一部分）会将您释放的块标记为空闲，并且能够在以后有另一个内存请求时重用它。

这具有性能优势，因为运行时的内存管理器不必经常调用操作系统来释放然后重新获取内存。

# c++ - 必须 size() == end() - begin()？演员阵容呢？

> ID：11660774
> 
> 赞同：20
> 
> 时间：2012-07-26T00:37:56.927
> 
> 标签：c++, iterator, language-lawyer

据我了解，`size_type`and`difference_type`的目的**不仅仅是**标志 - 它还旨在解决例如分段架构等，它们可能具有不同的大小。

在这种情况下，如果我有一个带有随机访问迭代器的容器，我是否可以随意在它的和值`static_cast`之间执行 a ，因为当任何一个被强制转换时，它*必须*始终等于？ `difference_type``size_type``end() - begin()` *`size()`*

 *（例如，用例是创建一个容器，其大小等于两个迭代器之间的元素数量，或者相反：将某个大小的容器复制到由迭代器分隔的范围内。）

在投射之前我应该​​注意什么（例如数据丢失）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-26T01:05:05.433

以下是[C++11 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)在这里对各种事情的看法：

§ 23.2.1

```
Expression: difference_type
Return Type: signed integer type
Operational Semantics: -
Assertion/note, pre-/post-condition: is identical to the difference type of iterator and const_iterator
Complexity: compile-time

Expression: size_type
Return Type: unsigned integer type
Operational Semantics: -
Assertion/note, pre-/post-condition: size_type can represent any non-negative value of difference_type
Complexity: compile-time

Expression: size()
Return Type: size_type
Operational Semantics: distance(begin(),end()) 
Assertion/note, pre-/post-condition: -
Complexity: constant 
```

让我们确保`size()`等效于`end() - begin()`：

§ 24.4.4/4

```
distance():
Eﬀects: If InputIterator meets the requirements of random access iterator, 
returns (last - first); otherwise, returns the number of increments needed 
to get from first to last 
```

由于您的容器具有随机访问迭代器，因此这是正确的。就是这样。正如您在第一个框中看到的，

```
size_type can represent any non-negative value of difference_type 
```

由此，我们认为从`difference_type`to的转换`size_type`应该对所有非负值都有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T00:50:31.737

我不认为它总是安全的。这个历史问题自 C 语言首次规范以来就存在，`ptrdiff_t`不能保证涵盖`size_t`. 由于显而易见的原因，这个问题延续到`std::vector`.

使用标准 C++ 容器，可以保证`size_type`覆盖 的非负范围`difference_type`，但不能保证反向覆盖。

但是，可以通过其他方式来保证标准容器`size()`之间的关系。实现可以自由地对通过函数`end() - begin()`公开的最大容器大小施加自己的限制。`container::max_size()`它可以人为地限制最大大小以确保减法永远不会溢出。

PS我想说`difference_type`' 存在的原因只是符号，没有别的。为了完全“安全” `difference_type`，应该比`size_type`. 这在实践中通常很难实现，这就是语言规范不要求它的原因。*

# c# - 如何在父项中选择列表框之前隐藏元素？

> ID：11660801
> 
> 赞同：0
> 
> 时间：2012-07-26T00:42:30.207
> 
> 标签：c#, wpf, xaml, mvvm, visibility

我在 XAML 中有一个视图，其中有一个列表框，并且该列表框中的选择会使用来自所选 ChildViewModel 实例的属性填充到一侧的区域。ChildView 中有几个按钮连接到 ChildViewModel 中的命令。在我从父列表框中进行选择之前，这些按钮没有按预期执行任何操作。在父列表框中进行选择之前，我如何才能隐藏这些按钮，从而创建 ChildViewModel 的实例。

我知道如果这些按钮是父视图的一部分，我可以通过将这些按钮的可见性绑定到 {Binding SelectedItem, ElementName=listBoxName} 来实现这一点。但是，我很难在 ChildView 中完成此操作，因为我无法访问（并且不想依赖）父视图中的元素。请帮我完成这个，最好是纯粹在 XAML 代码中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:06:58.670

您应该能够检查子视图的数据上下文是否为空（即没有设置 ChildViewModel）。如果为空，则隐藏按钮。

```
<Button Click="Button_Click" Content="bah">
        <Button.Style>
            <Style TargetType="Button">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window, Mode=FindAncestor}, Path=DataContext}" Value="{x:Null}" >
                        <Setter Property="Visibility" Value="Collapsed"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Button.Style>
    </Button> 
```

将祖先设置为持有您的子视图的任何容器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:10:12.137

解决这个问题的一种方法是基于 ViewModel 属性和绑定以及一个 ValueConverter 来管理可见性。

给定一个父视图和视图模型，它将有具有自己视图模型的子视图，并且父虚拟机负责子虚拟机：

父视图模型：包含列表框的 SelectedItem 绑定到的“SelectedItem”属性（根据上下文适当命名）。在 Setter 中，在孩子的 VM 上设置一个布尔属性。（即 ParentItemSelected） Child 的控件 Visibility 属性与 ParentItemSelected 绑定，该值转换器将布尔值转换为合适的 Visibility 值。

如果父视图和子视图共享一个虚拟机，那么同样的工作，但只是基于“SelectedItem”是否为空的可见性。（或者可以使用类似的布尔属性。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:16:30.493

正如 EdFred 所建议的，您可以使用 MVVMLight 及其 Messenger 功能来解耦依赖对象之间的通信。[这](http://www.nileshgule.com/2011/07/ngtweet-part-7-decoupled-communication.html)是一个如何做到这一点的示例。

如果您没有使用任何 MVVM 框架，您仍然可以在父视图模型上公开一个事件，该事件可以从子视图模型订阅。当父项中的选择发生变化时，您可以在子视图模型上执行您希望执行的任何操作。

# mysql - 如何检查表中是否存在多对多对多...

> ID：11660802
> 
> 赞同：1
> 
> 时间：2012-07-26T00:42:35.993
> 
> 标签：mysql, sql, select

我有 4 个表，其中 4 个是一个联结表中的外键。

问题是我需要检索缺少的 jnction 值。

例如：

```
Table A       Table B      Table C     Table D             
--------     ---------    ---------   ----------
  1              4            7          A
  2              5            8          B

 JUNCTION TABLE
-----------------
  1   4   7   A
  1   4   7   B
  1   4   8   A
  1   4   8   B
  1   5   7   A
  1   5   7   B
  1   5   8   A
  1   5   8   B      
  2   4   7   A
  2   4   7   B
  2   4   8   A
  2   4   8   B
  2   5   7   A
  2   5   7   B
  2   5   8   A
  2   5   8   B 
```

因此，如果缺少 1 5 8 B 列，当我运行查询时，它会显示 1 5 8 B..

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:06:23.203

我会在您的源表上使用交叉连接，然后将结果连接到您的连接表。

编辑：感谢 andy holaday 指出 MySQL 没有 FULL OUTER JOIN。

```
select x.*
from (select *
      from a,b,c,d) as x
left outer join j
    on (x.a = j.a and
        x.b = j.b and
        x.c = j.c and
        x.d = j.d)
where j.a is NULL and
      j.b is NULL and
      j.c is NULL and
      j.d is NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:59:15.290

使用这个查询，它对来自 4 个交叉连接的表的连接进行外部连接：

```
select a.col, b.col, b.col, d.col
from tablea a
cross join tableb b
cross join tablec c
cross join tabled d
left join junction j 
    on j.cola = a.col
    and j.colb = b.col
    and j.colc = c.col
    and j.cold = d.col
where junction.cola is null; -- sufficient to test just one 
```

# lisp - Common Lisp：delete-if 是否与 setf + remove-if 相同？

> ID：11660804
> 
> 赞同：3
> 
> 时间：2012-07-26T00:43:15.383
> 
> 标签：lisp, common-lisp, primes

以下代码生成从 1 到 n 的素数：

```
(defun prime-list(n)
  (let ((a)(b)(x (floor (sqrt n))))
    (loop for i from (floor n 6) downto 1 do
          (push (1+ (* 6 i)) a)
          (push (1- (* 6 i)) a))
    (loop while (<= (car a) x) do
          (push (car a) b)
          (setf a (remove-if #'(lambda(m)(or (= 0 (mod m (car a))) (> m n))) a)))
    (append '(2 3) (reverse b) a))) 
```

在我看来，这部分

```
(setf a (remove-if #'XXX a)) 
```

可以替换为

```
(delete-if #'XXX a) 
```

我希望这会让它更快。但是，当我进行更改时，函数现在进入无限循环并且永远不会返回。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T04:27:03.763

如评论中所述，您需要设置变量。

`DELETE-IF`主要是`REMOVE-IF`. `REMOVE-IF`返回一个新的 consed 序列，其中不包含已删除的元素。`DELETE-IF`可能会返回一个重复使用的序列。

如果您有一个绑定到列表的变量，您仍然需要设置结果。上面的函数返回结果，但它们没有为结果设置变量。在列表的情况下，`DELETE-IF`操作的结果可以是空列表，并且不可能有副作用，即可以为它设置一个变量 - 当它指向一个非空列表时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:18:47.640

我没有太多的 CL 经验，但是我在 Scheme 中做了很多工作。

在第二个版本（sans setf a）中，remove-if 表达式被求值，但它实际上并没有改变 a。loop 是 CL 中的一个宏，它只计算表达式，但不像递归函数那样使用这些表达式的结果。

因此，在第一个版本中，由于 setf 每次循环运行时 a 的值都会更改，但在第二个版本中，a 的值始终保持不变。因此 (car a) 永远不会改变并且循环永远不会终止。

我们可以在两个循环语句上比较 macroexpand 的结果：

没有 setf：

```
(MACROLET ((LOOP-FINISH NIL (SYSTEM::LOOP-FINISH-ERROR)))
 (BLOCK NIL
  (LET NIL
   (MACROLET ((LOOP-FINISH NIL '(GO SYSTEM::END-LOOP)))
    (TAGBODY SYSTEM::BEGIN-LOOP
     (PROGN (UNLESS (< (CAR A) X) (LOOP-FINISH))
      (PROGN (PUSH (CAR A) B) (REMOVE-IF #'(LAMBDA (M) (= 0 (MOD M (CAR A)))) A)))
     (GO SYSTEM::BEGIN-LOOP) SYSTEM::END-LOOP
     (MACROLET
      ((LOOP-FINISH NIL (SYSTEM::LOOP-FINISH-WARN) '(GO SYSTEM::END-LOOP))))))))) ; 
```

使用 setf：

```
(MACROLET ((LOOP-FINISH NIL (SYSTEM::LOOP-FINISH-ERROR)))
 (BLOCK NIL
  (LET NIL
   (MACROLET ((LOOP-FINISH NIL '(GO SYSTEM::END-LOOP)))
    (TAGBODY SYSTEM::BEGIN-LOOP
     (PROGN (UNLESS (< (CAR A) X) (LOOP-FINISH))
      (PROGN (PUSH (CAR A) B)
       (SETF A (REMOVE-IF #'(LAMBDA (M) (= 0 (MOD M (CAR A))))) A)))
     (GO SYSTEM::BEGIN-LOOP) SYSTEM::END-LOOP
     (MACROLET
      ((LOOP-FINISH NIL (SYSTEM::LOOP-FINISH-WARN) '(GO SYSTEM::END-LOOP))))))))) ; 
```

您可以看到在第一个循环中计算了 remove-if 表达式，但没有使用它的结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-26T01:33:51.783

克里斯是正确的。

`delete-if`您可以使用代替来加快速度`remove-if`

# jsp - oracle日期格式的JSP输出在服务器之间是不同的？

> ID：11660805
> 
> 赞同：0
> 
> 时间：2012-07-26T00:43:31.120
> 
> 标签：jsp, oracle11g

我使用的是 Oracle 11g，当我尝试通过 JSP 提取数据时，两个环境之间的日期格式不同。两者都具有相同的代码。两者都指向两个不同的 oracle 11g 实例。

例如，服务器 A 返回**2012-08-31**，但服务器 B 返回**8/31/2012**。

这是我打印日期的jsp部分：

```
String query = "select dob from profiles";
Stement stmt = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE);
ResultSet rs =stmt.executeQuery(query);
while(rs.next()){
out.println(rs.getString[0]);
} 
```

系统 A：Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Oracle JDBC DriverVersion：11.2.0.3.0

系统 B：Oracle 数据库 11g 版本 11.1.0.0.0 Oracle JDBC DriverVersion：10.2.0.2.0

知道为什么会这样吗？先感谢您。约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:32:43.217

由于 server_A 和 server_B 上的源代码相同。

尝试检查这些服务器上的 JDBC_Driver.jar。

您可以使用类格式化日期：`SimpleDateFormat`

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:25:05.837

> 例如，服务器 A 返回 2012-08-31，但服务器 B 返回 8/31/2012。

这些都不是 oracle 默认的 Date 类型。

对于日期的输入和输出，标准的 Oracle 日期格式`DD-MON-YY`如下： `13-NOV-92`.

我怀疑您是否在其中存储日期，`String`并且输入可能会有所不同。

1.  仔细检查数据库中存储的值。它们的格式相同吗？然后有一些东西可以在代码中查找。

# php - 在什么情况下我需要更多的 symfony2 中的实体管理器 Doctrine2

> ID：11660812
> 
> 赞同：2
> 
> 时间：2012-07-26T00:44:10.433
> 
> 标签：php, symfony, doctrine-orm

我一直在使用 symfony2 和教义 2。我正在与一位实体经理合作。

我仍然无法找到为什么在项目中需要更多的实体经理。

谁能解释一下拥有更多实体经理的用例是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T00:52:27.130

> 您可以在 Symfony2 应用程序中使用多个实体管理器。如果您使用不同的数据库，甚至使用具有完全不同的实体集的供应商，这是必要的。换句话说，一个连接到一个数据库的实体管理器将处理一些实体，而另一个连接到另一个数据库的实体管理器可能会处理其余的。

[http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:47:00.543

如果要连接到多个数据库，则需要多个实体管理器。

此外，如果你想使用 Doctrine PHPCR 或 Doctrine OXM，你必须使用它们各自的实体管理器。

# linux - 如何在 unix 或 AWK 中执行以下 grep

> ID：11660816
> 
> 赞同：0
> 
> 时间：2012-07-26T00:45:30.840
> 
> 标签：linux, bash, unix, vim, awk

我有一个像这样的文件

开始---abcxyz

结束----efg123

编号----2345

松弛---- lmnop

..... ......并且上述格式在“开始和松弛”之间的其他内容中重复

我想从文件中提取“开始”“结束”“Slack”的行那么我们如何在 unix 或使用 AWK 中做。

-谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T00:49:56.160

我可以用两种不同的方式阅读这个问题，要么在两个标记之间回显线条，要么只输出多种类型的线条。

* * *

如果你想要和之间的线（*例如* ），你可以使用“回声”变量：`Start``End``awk`

```
echo 'Start ---abcxyz
something goes here
and here
End ---- efg123
Ref ----2345
Slack---- lmnop' | awk '
    /^Start / { e = 1 }
              { if (e) { print } }
    /^End /   { e = 0 }
    ' 
```

输出是：

```
Start ---abcxyz
something goes here
and here
End ---- efg123 
```

echo 变量`e`最初未设置，因此该`if`语句将永远不会触发。每当`awk`看到以 开头的行时`Start`，它会将 echo 变量设置为 true。在这种情况下，将从该点开始回显所有行。

然后，当`awk`看到以 开头的行时`End`，它将回显标志设置回 false，防止进一步输出。

这三个`awk`命令的顺序可以用来决定是否也打印开始行和结束行。例如，如果你不想要它们，你可以交换第一个和第三个命令（开始和结束的）：

```
echo 'Start ---abcxyz
something goes here
and here
End ---- efg123
Ref ----2345
Slack---- lmnop' | awk '
    /^End /   { e = 0 }
              { if (e) { print } }
    /^Start / { e = 1 }
    ' 
```

输出是：

```
something goes here
and here 
```

* * *

如果您只想要开始线、结束线和松弛线，`grep`则可以这样做：

```
echo 'Start ---abcxyz
something goes here
and here
End ---- efg123
Ref ----2345
Slack---- lmnop' | egrep '^Start |^End |^Slack' 
```

输出是：

```
Start ---abcxyz
End ---- efg123
Slack---- lmnop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:56:28.700

据我了解你的问题......你可以试试这个

**输入文件**

```
Start ---abcxyz

End ---- efg123

Ref ----2345

Slack---- lmnop

Some other text

Some other text

Some other text

Start ---osdidiu

End ---- llll

Ref ----234513

Slack---- lmnodsasdp 
```

**代码**

```
 awk '$1 == "Start" || $1 == "End" || $1 == "Slack----" {print $0}' InputFile 
```

**输出**

```
Start ---abcxyz
End ---- efg123
Slack---- lmnop
Start ---osdidiu
End ---- llll
Slack---- lmnodsasdp 
```

# javascript - 为什么对 img 标签的前向引用在 Chrome 上失败但在 FireFox 和 IE 上有效？

> ID：11660817
> 
> 赞同：2
> 
> 时间：2012-07-26T00:45:33.160
> 
> 标签：javascript, html, google-chrome

以下在 FireFox 和 IE 上运行良好，但在 Chrome 上不行。在 Chrome 上，传递给`doSomething()`函数的 'image' id 是`undefined`，而在 FireFox 和 IE 上，它正确引用了 'img' 标签：

```
<div onclick="doSomething(image);"><img id="image" src="test.gif" /></div> 
```

显然，Chrome 不能处理前向引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:48:21.950

我不确切知道，但我想如果您使用以下`getElementById`方法，您的代码将起作用：

```
<div onclick="doSomething(document.getElementById('image'));"><img id="image" src="test.gif" /></div> 
```

# php - 在 php 中解析 solr 响应并在 html 表中显示它们

> ID：11660819
> 
> 赞同：4
> 
> 时间：2012-07-26T00:45:34.070
> 
> 标签：php, html, xml, solr

因此，我运行了许多 solr 实例并提交搜索，我只是将一个快速网站放在一起。发出请求 URL 后，在 php 中，我使用以下内容从 solr 获取 XML 响应：

```
 $solr_return= file_get_contents($full_request_URL); 
```

现在响应不是简单的 xml 格式，如果您知道我的意思，它就具有 solr-ness。我希望能够解析返回的 xml 并将它们显示在 html 表中的行中。

我一直在网上寻找，有很多不同的想法让我觉得也许我完全不在了，这不是这样做的方法。如果你是我，你会怎么做？

中的 xml`$solr_return`如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>

<lst name="responseHeader">
  <int name="status">0</int>
  <int name="QTime">95</int>
  <lst name="params">
    <str name="indent">true</str>
    <str name="rows">10</str>
    <str name="start">0</str>
    <str name="q">*:*</str>
    <str name="shards">some shards here</str>
  </lst>
</lst>
<result name="response" numFound="2403043" start="0">
  <doc>
    <str name="1">test1</str>
    <str name="2">test2</str>
    <str name="3">test3</str>
  </doc>
  <doc>
    <str name="1">test1</str>
    <str name="2">test2</str>
    <str name="3">test3</str>
  </doc>
</result>
</response> 
```

对于此示例，我想显示一个包含 1、2 和 3 三列以及两行 test1、test2 和 test3 的表。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T01:15:45.153

最简单的做法是添加`&wt=php`到 Solr 请求 URL，然后运行`eval()`并将结果分配给数组（假设您信任 Solr 服务器不会发回恶意代码）。然后 Solr 结果将只是在常规 PHP 数组中，您可以根据需要对其进行操作。

或者，您可以`&wt=json`在最后添加，以 JSON 格式获取结果，然后`json_decode()`在 PHP 中对返回的字符串运行以将其转换为 PHP 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:48:08.927

试试这个：

```
<?php
$solr_return = file_get_contents($full_request_URL);
$solr_return = simplexml_load_string($solr_return);
$xpath = $solr_return->xpath( '//result/doc' );

$rowCols = array();
if( count( $xpath ) > 0 ) {
    foreach( $xpath as $key => $value ) {
        if( !isset ( $rowCols[ $key ] ) ) {
            $rowCols[ $key ] = '<tr>';
        }

        foreach( $value as $k => $v ) {
            $rowCols[ $key ] .= '<td>' . $v . '</td>';
        }

        $rowCols[ $key ] .= '</tr>';
    }
}     else {
    $rowCols[] = '<tr><td colspan="3"></td></tr>'
    }
$rowCols = implode( '', $rowCols);
?>
<html>
<head></head>
<body>
<table border="0" width="50%" cellpadding="2" cellspacing-="3">
<tbody>
<?php echo $rowCols;?>
</tbody>
</table>
</body>
</html> 
```

希望这可以帮助。

# signal-processing - 3维信号的离散化

> ID：11660823
> 
> 赞同：1
> 
> 时间：2012-07-26T00:45:48.140
> 
> 标签：signal-processing, time-series, matlab, discretization

[Symbolic Aggregate Approximation](https://sites.google.com/a/seninp.net/trajectory/algorithms/sax)谈论将时间序列（x，t）转换为符号。基于此，我几乎没有基本查询。如果时间信号是表示位置坐标的 (x,y,z,t) 的复合物，或者是带有时间戳 t 的二维图像的简单 (x,y,t) 的复合物，该怎么办。那么我如何使用这个工具来分配符号/离散化。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:56:09.240

您可以将[SAX](http://www.cs.ucr.edu/~eamonn/SAX.htm)转换分别应用于每个维度，然后组合每个时间戳的符号/字母。

以 (x,y,z,t) 为例，你会得到`b,a,c`t=1 的组合，然后`a,a,c`是 t=2 的组合，等等。

然后，您可以根据需要组合这些符号以形成“巨型符号”。假设符号集是`Symbols={a,b,c}`。那么新的一组字母就是笛卡尔积`SxSxS`（每个维度一个）。

换句话说，`aaa`成为新字母`A`，`aab`如，`B`然后`aac`，，，等。`aba``abb`

* * *

## 编辑：

这是一些代码来显示我的想法。由于我没有 SAX 算法的实现，我将使用以下函数作为占位符（它返回垃圾）：

```
%# use your actual SAX function instead of this one
my_sax_function = @(x,n,a) randi(a, [n 1]); 
```

这是代码：

```
%# time series of length=100, with (x,y,z) at each timestamp
data = cumsum(randn(100,3));

%# apply your SAX function to each dimension independently
N = 20;     %# number of segments to divide the signal into
A = 3;      %# size of alphabet (a,b,c)
dataSAX = zeros(N,3);
for i=1:3
    dataSAX(:,i) = my_sax_function(data(:,i), N, A);
end

%# we assume the above function returns integers denoting the symbols
%# therefore row i corresponds to A=3 symbols for each of the 3 x/y/z dimensions
dataSAX(1,:)

%# build cartesian product of all combinations of the A=3 symbols
[x y z] = ndgrid(1:A,1:A,1:A);
cartProd = [x(:) y(:) z(:)];

%# map to the new alphabet with 3*3*3 = 27 symbols
[~,V] = ismember(dataSAX, cartProd, 'rows')

%# A to Z with $ character to make up 27 symbols
oldSymbols = {'a';'b';'c'};             %# 1: a, 2: b, 3: c
newSymbols = cellstr(['A':'Z' '$']');   %# 1: A, ..., 26: Z, 27: $

%# SAX representation of the entire time series as a string
mappedV = char(newSymbols(V))' 
```

# python - 编码错误的 DictWriter

> ID：11660829
> 
> 赞同：0
> 
> 时间：2012-07-26T00:46:05.927
> 
> 标签：python, parsing, csv

我环顾了整个网络，但似乎无法使这件事起作用。

我正在使用**python2.6**读取 csv 文件**input.csv**并希望在 python 中使用**DictReader**和**DictWriter将其逐行输出到****output.csv**中。

 ****我对**input.csv**的编码一无所知。当我打开**output.csv**时，对眼睛来说一切都很好，但是当我在两行上运行**diff命令时，每一行都是***不同*的。我需要文件的字节序列相同，因为我将文件作为作业提交。

这是我拥有的代码的基本骨架（从这里和那里借来的）：

```
from csv import DictReader,DictWriter

class DictWriterEx(DictWriter):
    def writeheader(self):
        header = dict(zip(self.fieldnames, self.fieldnames))
        self.writerow(header)

with open('input.csv','rb',) as f:
    dr = DictReader(f)
    with open('output.csv','wb') as o:
        dw = DictWriterEx(o,fieldnames=dr.fieldnames)
        dw.writeheader()
        for row in dr:
            dw.writerow(dict((k, v) for k, v in row.iteritems())) 
```

我也试过改变

```
dw.writerow(dict((k, v) for k, v in row.iteritems())) 
```

进入

```
dw.writerow(dict((k, v.encode('utf-8')) for k, v in row.iteritems())) 
```

这给了我一个例外：

> UnicodeDecodeError：“ascii”编解码器无法解码位置 7 中的字节 0xc3：序数不在范围内（128）

请帮我解决这个问题，因为我快疯了。

**解决方案：**使用**lineterminator="/n"** 初始化**DictWriter**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:50:35.783

文件可能有不同的行尾吗？您传递给`csv.reader`或`csv.writer`应该以二进制模式打开的文件（请参阅[文档](http://docs.python.org/library/csv.html#csv.reader)），它看起来不像您正在做的。这可能会导致写入不正确的行尾字符。******

# opencv - OpenCV：检测城市广场的人

> ID：11660834
> 
> 赞同：0
> 
> 时间：2012-07-26T00:46:27.377
> 
> 标签：opencv, object-recognition

我需要像这样在城市广场找到所有人或一群人。我使用`CascadeClassifier.detectMultiScale`功能并通过`equalizeHist`（正确的亮度和对比度）准备图像![在此处输入图像描述](../Images/05f52bbe98b957546bcc560a23b2c675.png)

如您所见，并非所有人都被发现。

在对我的描述中，`haarcascade_fullbody.xml`我读到检测器仅支持正面和背面视图。

你知道这个问题的一些 haarcascades 集合，还是我需要更正我的代码并留下这个级联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:49:32.633

你可以使用opencv提供的hog cascades来识别行人。并且您的程序可能不会将所有人识别为您正在使用的级联，可能没有接受过仅识别下半身或仅识别上半身的训练。为此，您可以使用多个级联。检查 OpenCV 中的数据文件夹，你会在那里找到 haar 和 hog 级联。

# jquery - jQuery if hasclass then 函数

> ID：11660835
> 
> 赞同：2
> 
> 时间：2012-07-26T00:46:48.780
> 
> 标签：jquery, class, function, if-statement

这是一个动画，仅当 div rip_tab 具有类 'rip_tab_ripped' 时才会触发，该类在单击 div 后应用。然而，动画甚至在 rip_tab_ripped 类被切换之前就被触发了。每个函数在没有 if 子句的情况下单独工作。任何帮助，将不胜感激 -

```
var sauceSquirt = {
    init: function() {

        $("#rip_tab").click(function() {
            $(this).toggleClass("rip_tab_ripped");
        });

        function fireA() {
            $("#sauceRed").switchClass("sauce_hide", "sauceRedGo", 500)
        }

        function fireB() {
            $("#sauceBlue").switchClass("sauce_hide", "sauceBlueGo", 500)
        }

        if ($('#rip_tab').hasClass("rip_tab_ripped")) {

            $('#packet').click(function() {

                var events = [fireA, fireB];

                //declare counter
                if (!this.counter) {
                    this.counter = 0;
                }

                events[this.counter]();
                this.counter = (this.counter + 1) % 3;
            });

        }

    }

}

$(document).ready(function() {
    sauceSquirt.init();

});​ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T01:12:48.760

看起来你在这部分有问题：

```
if ($('#rip_tab').hasClass("rip_tab_ripped")) {
    $('#packet').click(function() {

       var events = [fireA, fireB];

       //declare counter
       if(!this.counter) { this.counter = 0; }

       events[this.counter]();
       this.counter = (this.counter + 1) % 3;
    });
} 
```

您可以将其更改为：

```
$('#packet').click(function() {
    if ($('#rip_tab').hasClass("rip_tab_ripped")) {

           var events = [fireA, fireB];

           //declare counter
           if(!this.counter) { this.counter = 0; }

           events[this.counter]();
           this.counter = (this.counter + 1) % 3;
    }
    return false;
}); 
```

你也可以看看[jQuery Promise](http://api.jquery.com/promise/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:50:59.260

解决方法是将 if ($ 语句移动到 click 语句下面的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T01:02:06.007

#packet 是什么？在我看来，有这个语句应该是这样写的：

```
this.counter = this.counter % 2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T01:19:01.943

请记住，在初始化时会调用此方法中的所有内容，而您希望延迟类检查直到`#packet`单击 ：

```
$('#packet').click(function() {
    if ( $('#rip_tab').is('.rip_tab_ripped') ) {
        var events = [fireA, fireB];

        //declare counter
        this.counter = this.counter || 0; // set to 0 if value is null

        events[this.counter]();
        this.counter = ++this.counter % 2; // You only have two methods
    }
}); 
```

# javascript - DOM 元素的行为不符合预期。

> ID：11660847
> 
> 赞同：0
> 
> 时间：2012-07-26T00:48:46.533
> 
> 标签：javascript, jquery, dom, jquery-masonry

我似乎完全无法解决这个问题。当我运行这个循环时：

```
for ( var i=0; i < 10; i++ ) {
    var $items = $(balls()); 
    console.log($items);
    $container.imagesLoaded(function(){
        $container.append( $items ).masonry( 'appended', $items, true );
    });
} 
```

第一项和最后一项都很好，它们看起来像：

```
<div class="box masonry-brick" id="resultBox" style="top: 0px; position: absolute; left: 0px; "><div><p>NAME</p><img src="pathtoimage.jpg"><boxbottom id="boxBottom">NUM%</boxbottom></div></div> 
```

但其他 8 个不好，它们看起来像：

```
<div class="box" id="resultBox""><div><p>NAME</p><img src="pathtoimage.jpg"><boxbottom id="boxBottom">NUM%</boxbottom></div></div> 
```

所以没有应用“砌体砖”类，这意味着它们没有被砌体处理。

同样相关的是：

```
function balls(){
    var boxes = [];
    $iterator -= 1;
    var box = document.createElement('div'),
        spacerdiv = document.createElement('div'),
        para = document.createElement('p'),
        img = document.createElement('img'),
        boxBottom = document.createElement('boxBottom'),
        name = document.createTextNode( $test[$iterator][1][2]['name'] ),
        percentage = document.createTextNode(Math.floor($test[$iterator][0]*100)+'%');

    box.className = 'box';
    box.id = 'resultBox';
    img.src= 'scripts/php/timthumb.php?src='+$test[$iterator][2]+'&q=100&w=300';
    boxBottom.id='boxBottom';

    box.appendChild( spacerdiv );
    spacerdiv.appendChild( para);
    para.appendChild(name);
    spacerdiv.appendChild( img );
    spacerdiv.appendChild(boxBottom);
    boxBottom.appendChild(percentage);
    // add box DOM node to array of new elements
    return box;
} 
```

我认为这里的 DOM 模型有些奇怪，可能是因为元素是动态创建的？
我整天都在这，我已经筋疲力尽了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:55:20.177

我假设每次调用`.imagesLoaded()`都会绑定您的回调函数，以便稍后在实际加载图像之后*异步运行。*如果是这样，您可以将代码更改为以下内容：

```
for ( var i=0; i < 10; i++ ) {
   (function() {
       var $items = $(balls()); 
       console.log($items);
       $container.imagesLoaded(function(){
           $container.append( $items ).masonry( 'appended', $items, true );
       });
   })();
} 
```

...因为 JS 没有块作用域，它只有函数作用域。因此，即使您将`var`语句放在循环内，您的`$items`变量实际上并不局限于循环的范围，并且当执行回调设置时，`.imagesLoaded()`它们都引用*相同* `$items`的- 这将保持循环结束时的值。通过将您的代码包装在一个函数中（在这种情况下是一个立即执行的匿名函数表达式 -请注意`()`末尾`$items`的`.imagesLoaded()``$items`

更高效的版本（因为它不会在每次迭代时创建一个新函数）：

```
function addBalls() {
   var $items = $(balls()); 
   console.log($items);
   $container.imagesLoaded(function(){
       $container.append( $items ).masonry( 'appended', $items, true );
   });
}
for ( var i=0; i < 10; i++ )
    addBalls(); 
```

无论哪种方式，如果您确实需要在循环中引用循环索引`i`，您只需将其作为参数传递给函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:08:53.257

很可能这里发生了一些奇怪的事情：

```
boxBottom = document.createElement('boxBottom'), 
```

*createElement*的参数应该是一个有效的标签名称。

# django - 用于 Django Web 开发的 Cloud9 ide

> ID：11660849
> 
> 赞同：0
> 
> 时间：2012-07-26T00:48:55.610
> 
> 标签：django, cloud9-ide

我正在与一个小团队一起使用 Django 开发一个 Web 应用程序。我们每个人都有一个在本地机器上运行的 Django 服务器，而不是使用传统的存储库来维护我们的代码，我想知道 Cloud9 是否会是更好的方法。我希望能够像谷歌文档那样配对程序和评论彼此的代码。但是，对于 cloud9 是否可以像对节点服务器一样运行小型 django 服务器进行测试，我似乎无法找到直接的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:08:00.313

是的，在 Cloud9 中可以做到这一点。这里的缺点是 Cloud9 缺乏调试，目前只有 Python 应用程序的基本代码完成。但是，正如您在帖子中指出的那样，也有很多积极的方面。

无论如何，Cloud9 为每个项目提供一个运行 Python 2.6.6 的 VM，所以应该没问题。

# php - 创建一个定义了键和值的数组

> ID：11660853
> 
> 赞同：0
> 
> 时间：2012-07-26T00:49:12.993
> 
> 标签：php

下面的代码基本上将计算一个单词在数组中出现的次数。

不过，我现在想要做的是获取`$word`，将其分配为数组的键，然后分配`$WordCount[$word]`为其值。例如，如果我得到一个单词“jump”，它将自动分配为数组的键，并将单词“jump”( `$WordCount[$word]`) 的出现次数分配为其值。请问有什么建议吗？

```
function Count($text)
{
    $text = strtoupper($text);
    $WordCount = str_word_count($text, 2);

    foreach($WordCount as $word)
    {   
        $WordCount[$word] = isset($WordCount[$word]) ? $WordCount[$word] + 1 : 1;
        echo "{$word} has occured {$WordCount[$word]} time(s) in the text <br/>";                       
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:58:59.153

试试这个代码：

```
<?php

$str = 'hello is my favorite word.  hello to you, hello to me.  hello is a good word';

$words = str_word_count($str, 1);

$counts = array();
foreach($words as $word) {
    if (!isset($counts[$word])) $counts[$word] = 0;
    $counts[$word]++;
}

print_r($counts); 
```

输出：

```
Array
(
    [hello] => 4
    [is] => 2
    [my] => 1
    [favorite] => 1
    [word] => 2
    [to] => 2
    [you] => 1
    [me] => 1
    [a] => 1
    [good] => 1
) 
```

在将所有单词完全组合在一起之前，您无法在循环中回显计数值。

# javascript - 使用 Javascript 获取被点击元素的 HTML

> ID：11660856
> 
> 赞同：-2
> 
> 时间：2012-07-26T00:49:53.707
> 
> 标签：javascript

如果单击的元素是容器，我将向单击的元素添加一个类并获取它的 innerHTML。但是如果是HTML元素而不是容器，比如点击的元素是图片`<img src="hello.png" />`（不是容器，不能使用innerHTML），那么我需要获取对应的元素标签，即需要获取`<img src="hello.png" />`. 那么无论如何要用纯JavaScript来做到这一点？

PS 我不想在这里使用任何 JavaScript 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:59:47.483

你可以这样做...

```
<img src="hello.png" onclick="alert(outerHTML)" /> 
```

* * *

请注意，`outerHTML`最近才获得 Firefox 支持。

*这可能看起来很奇怪，但它确实有效。*

***演示：http:*** [//jsfiddle.net/2GLjC/](http://jsfiddle.net/2GLjC/)

如果您使用不同类型的处理程序*（不是内联）*，您仍然可以`outerHTML`从元素的上下文中使用。

* * *

获得更多 Firefox 支持的跨浏览器解决方案可能如下所示......

```
function getOuterHTML(elem) {
    return elem.outerHTML || document.createElement("div")
                                     .appendChild(elem.cloneNode(true))
                                     .parentNode
                                     .innerHTML
} 
```

因此，只需将您的元素传递给`getOuterHTML`函数，它就会返回正确的结果。

```
alert(getOuterHTML(this)); 
```

# php - 从多维数组中查找值并删除第一级键

> ID：11660864
> 
> 赞同：0
> 
> 时间：2012-07-26T00:51:48.363
> 
> 标签：php, multidimensional-array

这是我的阵列。

我试图找到一个特定的日期并从数组中删除整个键（对应的 start_time 和 end_time.

```
 $c = array
    // Search all end_times        
    $remove = '2012-06-24 17:00:59'; 
```

> 数组（2）{
> 
> > [ **0** ]=>
> > 数组（2）{
> > 
> > > [ **0** ]=>
> > > 数组（2）{
> > > 
> > > > ["ID"]=> 字符串(2) "15"
> > > > ["start_time"]=> 字符串(19) "2012-06-24 08:00:00"
> > > 
> > > }
> > > 
> > > [ **1** ]=>
> > > 数组（2） {
> > > 
> > > > ["ID"]=> 字符串(2) "15"
> > > > ["end_time"]=> 字符串(19) "2012-06-24 17:00:59"
> > > 
> > > }
> > 
> > }
> > 
> > [ **1** ]=>
> > 数组（2）{
> > 
> > > [ **0** ]=>
> > > 数组（2）{
> > > 
> > > > ["ID"]=> 字符串(2) "28"
> > > > ["start_time"]=> 字符串(19) "2012-07-26 18:00:00"
> > > 
> > > }
> > > 
> > > [ **1** ]=>
> > > 数组（2）{
> > > 
> > > > ["ID"]=> 字符串(2) "28"
> > > > ["end_time"]=> 字符串(19) "2012-07-26 22:00:59"
> > > 
> > > }
> > 
> > }
> 
> }

这是我到目前为止的代码。它仅在针对第一个 start_time 或第二个 end_time 时才有效，这向我表明计数在某处丢失了。我对 PHP 还很陌生，所以我对接下来会发生什么一无所知。

```
 // recursive array search, look for value, remove key
   for ($i = 0, $count = count($c); $i < $count; $i++) {
       if ($c[$i][$i]['end_time'] == $remove) {
           unset($c[$i]);
   } 
   } 
```

将不胜感激任何帮助！
问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:00:20.470

```
foreach ($c as $k=>$v) {
   foreach ($v as $line) {
      $times = array('start_time', 'end_time');
      foreach ($times as $time) {
         if ($line[$time] == $remove) {
            unset($c[$k]);
         }
      }
   }
} 
```

如果我理解正确，应该做你正在寻找的东西。

编辑：基本上它所做的是获取原始数组的每个成员并搜索该父数组的每个成员以获取删除时间。如果找到它，它将删除整个“树”。

# c - C中的双向tcp套接字问题

> ID：11660869
> 
> 赞同：2
> 
> 时间：2012-07-26T00:52:41.333
> 
> 标签：c, sockets, tcp, client, bidirectional

我正在尝试在 C 中实现一个 TCP 客户端，它需要按如下方式工作：

*   能够打开到给定服务器的连接
*   能够通过已建立的连接向服务器发送任意数据，以及
*   能够从服务器接收任意数据（将其视为对我的客户端发送到服务器的“问题”的响应）。

例如，客户端应该能够打开与任意 HTTP 服务器的连接，发送“HEAD”消息并打印来自 HTTP 服务器的响应。

（我的目标是为我日常工作使用的特定软件环境创建一个通用的“TCP 客户端插件”，该软件环境缺乏网络功能。我非常了解我的环境的 SDK，但我真的没有套接字编程方面的深厚经验。）

目前，我有 2 个单独的线程用于发送和接收数据。接收线程的工作流程（只要用户设置了服务器地址和端口就会自动启动）如下（这里我只提到套接字调用的主序列）：

```
globalSocket = socket(); // Create socket and store it globally
bind(); // Bind the local port
connect(); // Connect to remote host & port
listen(); // Listen to the socket
while (isAlive) {
  select(... &readfds ...); // Check for ready reader descriptors
  accept(); // Accept the incoming connection
  recv(); // Receive data from server
}
close(); // End the connection 
```

发送者线程很简单，它使用`globalSocket`接收者线程创建的来执行`send()`命令。

现在，这是我的问题：我可以毫无问题地打开与远程服务器的连接。我也可以毫无问题地发送任意数据（我确认我发送的数据实际到达服务器端没有问题）。但是，我无法从服务器取回任何数据。经过一些测试，似乎`select`永远不会返回正值。

我在我的代码中尝试了很多修改（比如将参数更改为`select`、省略`listen`等），我在这一天至少阅读了 Beej 的指南 10 次，并尝试了我能想象的每一个临时更改，但行为仍然相同。因此，在我开始使用特定代码摘录提出特定问题之前，我想知道我解决这个问题的方法是否正确，或者我是否在这里遇到了一些严重的概念问题。

确实感谢您的回答，

亚当

PS 我无法在评论中发布此代码部分，因为它太长了；这是管理`select`- `accept`-`recv`循环的代码片段：

```
while ( thread->isActive ) {
   // Accept connection
   timeVal.tv_sec = TIMEOUT_SEC;
   timeVal.tv_usec = TIMEOUT_USEC;
   FD_ZERO( & fileDescriptor );
   FD_SET( socketDescriptor, & fileDescriptor ); // socketDescriptor is the global socket
   result = select ( FD_SETSIZE, & fileDescriptor, NULL, NULL, & timeVal );
   if ( result > 0 ) {
      post ( "select" ); // This line is actually never reached
      connectionDescriptor = accept ( socketDescriptor, ( struct sockaddr * ) & clientAddress, & clientLength ); // connectionDescriptor is the local socket created by accept
      if ( connectionDescriptor < 0 ) { // Some error happened
         outlet_int ( thread->parent->statusOutlet, errno );
      } else {
         // Receive data
         data.clear ( ); // 'data' is an std::vector of chars that stores the incoming data and makes it accessible for the rest of the environment
         size = thread->parent->bufferSize;
         buffer = new unsigned char [ size ]; // this buffer is used for receiving the data from 'recv'
         receivedBytes = 1;
         while ( receivedBytes > 0 ) {
            receivedBytes = recv ( connectionDescriptor, ( char * ) buffer, size, 0 );
            if ( receivedBytes < 0 ) { // Socket error
               outlet_int ( thread->parent->statusOutlet, errno );
            }
            data.insert ( data.end ( ), buffer, buffer + receivedBytes );
         }
         delete [ ] buffer;
#ifdef WIN_VERSION
         closesocket ( connectionDescriptor );
#else
         close ( connectionDescriptor );
#endif
         // Output received data
         ... blah ... blah ... blah
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:21:08.643

其他人已经评论了[`connect(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/connect.2.html)和的不兼容性[`listen(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/listen.2.html)。你也不需要[`bind(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/bind.2.html)那里。

using 最常见的错误[`select(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)是没有在每次迭代时**重新初始化文件描述符集。**`select(2)`的第二个到第四个参数是**input-output**，因此您每次都必须重做它们。

### 编辑0：

在您发布您的代码之后，让我补充一点，您根本没有从 I/O 解复用中受益`select(2)`。在被新的连接尝试唤醒`select(2)`和客户端在您进入阻塞之前断开该连接之间也存在众所周知的竞争`accept(2)`。

如果您不热衷于采用非阻塞路由（使用`select(2)`、`poll(2)`、`epoll(7)`、`kqueue(2)`等的首选方式），您不妨摆脱`select(2)`并在循环中接受和处理客户端连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T01:38:18.530

首先，您是否在物理上接收来自远程服务器的数据包？我问是因为我在分配期间遇到了类似的问题，当我运行 tcpdump 时，它也没有显示任何接收到的数据包。问题原来是防火墙，它显然允许传出流量但阻止所有传入数据包......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:13:27.053

所以，这里有几个独立的问题，分为几个答案和评论，所以我要总结一下。

发件人线程正常。但是，连接器/侦听器线程应如下所示：

```
socket();
connect();
while (isAlive) {
   if (select(... &readfds ...) > 0) {
      recv();
   }
}
close(); 
```

关于最初发布的代码摘录，`while`用于处理的循环`recv`是一个概念错误，应该删除，因为它会阻塞线程 - 这将使`select`语句变得不必要（因为在这种情况下，`select`不会产生实际影响）。

还应该指出，如果`recv`返回 0，则意味着套接字已被远程对等方关闭，因此在这种情况下，即使父线程未将`while (isAlive)`循环设置为 false，也应中止循环。`isAlive`但是，循环内不需要额外的`close` 语句（这也是原始代码中的概念错误）。

# cordova - phonegap 中的后台通知

> ID：11660870
> 
> 赞同：4
> 
> 时间：2012-07-26T00:53:26.210
> 
> 标签：cordova, phonegap-plugins, localnotification

我正在使用 Phonegap for ios 构建一个简单的闹钟，并且我已经在后台和前台触发了通知。（在 Drew Dahlman 和本教程 [http://www.drewdahlman.com/meusLabs/?p=84](http://www.drewdahlman.com/meusLabs/?p=84)的帮助下）。

phonegap 插件提供了在触发 localNotification 时运行后台和前台功能的能力。

我的问题是，如果应用程序在后台，我似乎只会得到一个默认的“关闭/查看”对话框，而不是我正在设置的通知对话框。我希望让后台通知让用户能够“起床”或“打盹”，但当然，这对于默认的“关闭/查看”通知是不可能的。

我错了吗？还有其他方法吗？

我设置本地通知的代码很简单

```
plugins.localNotification.add({ date: set_alarm,
                               消息：“背景”，  
                               徽章：1，
                               编号：12，
                               声音：'Alarm_01.caf',
                               背景：'MyApp.Alarm.notification_background',
                               前景：'MyApp.Alarm.notification_foreground'
                             });

```

前台通知工作正常，这只是我正在努力解决的后台通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:41:25.080

在您的应用程序 delegate.m 文件中，您需要在应用程序进入后台时激活警报或本地通知：

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

或者

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

（取决于您的需要）可以在此处找到更多文档：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

我的怀疑是您仅将应用程序配置为在之后触发`–application:didFinishLaunchingWithOptions:`警报 `-application:didReceiveLocalNotification:`

这是默认设置。

还有许多其他选择：

监控应用状态变化

*   应用程序：willFinishLaunchingWithOptions：
*   应用程序：didFinishLaunchingWithOptions：
*   applicationDidBecomeActive:
*   applicationWillResignActive：
*   applicationDidEnterBackground：
*   应用程序WillEnterForeground：
*   应用程序将终止：
*   applicationDidFinishLaunching：

管理应用状态恢复

*   应用程序：应该保存应用程序状态：
*   应用程序：应该恢复应用程序状态：
*   应用程序：viewControllerWithRestorationIdentifierPath：编码器：
*   应用程序：willEncodeRestorableStateWithCoder：
*   应用程序：didDecodeRestorableStateWithCoder：

为 Storyboard 窗口属性提供一个窗口 管理默认界面方向

*   应用程序：supportedInterfaceOrientationsForWindow：

打开 URL 资源

*   应用程序：openURL：源应用程序：注释：
*   应用程序：handleOpenURL：

管理状态栏更改

*   应用程序：willChangeStatusBarOrientation：持续时间：
*   应用程序：didChangeStatusBarOrientation：
*   应用程序：willChangeStatusBarFrame：
*   应用程序：didChangeStatusBarFrame：

响应系统通知

*   applicationDidReceiveMemoryWarning：
*   applicationSignificantTimeChange:

处理远程通知

*   应用程序：didReceiveRemoteNotification：
*   应用程序：didRegisterForRemoteNotificationsWithDeviceToken：
*   应用程序：didFailToRegisterForRemoteNotificationsWithError：

响应内容保护更改

*   applicationProtectedDataWillBecomeUnavailable：
*   applicationProtectedDataDidBecomeAvailable：

# node.js - express.js 连接模块的问题

> ID：11660879
> 
> 赞同：1
> 
> 时间：2012-07-26T00:54:28.603
> 
> 标签：node.js, express, connect, npm

我无法使用 express.js 子模块，并且我认为我缺少与 npm 相比基本的东西。我正在尝试按照[本教程](http://vimeo.com/17842590)构建一个简单的身份验证系统。

在应用程序目录中表达的路径：

```
./node_modules/express/lib/express.js 
```

我的应用程序：

```
var express = require('express');
var app = express.createServer();
app.use(express.bodyDecoder()); // problems happen here 
```

这就是发生的事情：

```
meeeeee$ node app.js 

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
TypeError: Object #<Object> has no method 'bodyDecoder'
    at Object.<anonymous> (/Users/nflacco/Projects/santorinillc/js/auth-demo/app.js:3:17)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

也供参考，我的 package.json 文件：

```
{
    "name" : "my dirty little app",
    "version" : "0.0.1",
    "dependencies" : 
    {
        "express" : "2.5.9",
        "connect" : "1.8.7",
        "optimist" : "0.3.4"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:00:33.917

本教程正在使用`express 1.0.0rc4`，而您正在使用`2.5.9`. 早期版本的 express 依赖于 1.x 之前的[connect](http://www.senchalabs.org/connect/)版本。

`bodyDecoder()`已重命名为[`bodyParser()`](http://www.senchalabs.org/connect/bodyParser.html)in [connect 1.x](https://github.com/senchalabs/connect/blob/9be16df4fc7f2b3ef87c1ad4ccbd266e5da5a0f7/Readme.md)。将有问题的代码行更改为：

`app.use(express.bodyParser());`

您可能还想查看 1.x 到 2.x[迁移指南](http://expressjs.com/migrate.html)以了解本教程中使用的版本与您正在开发的版本之间的任何其他差异。

# github - dotcloud 上缺少软件包

> ID：11660880
> 
> 赞同：0
> 
> 时间：2012-07-26T00:54:35.430
> 
> 标签：github, dotcloud

我实际上想在 Dotcloud
github com/danielweinmann/catarse上加载这个 ruby​​ git repo

具有以下关于包和依赖项的指南

[https://github.com/danielweinmann/catarse/wiki/Installing-Catarse-on-Ubuntu-11.10-VMWare](https://github.com/danielweinmann/catarse/wiki/Installing-Catarse-on-Ubuntu-11.10-VMWare)

到目前为止，我正在使用下面包含的 dotcloud.yml 获得此输出

[https://gist.github.com/3179421](https://gist.github.com/3179421)

drupin@freenode

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:39:21.560

整个`systempackages:`部分应该缩进；例如：：

```
www:
  type: python
  systempackages:
    - foo
    - bar
    - libquux 
```

# php - 有没有办法判断一个表/行是否涉及不同会话的事务？

> ID：11660882
> 
> 赞同：0
> 
> 时间：2012-07-26T00:54:41.007
> 
> 标签：php, mysql, sql, innodb

有没有办法判断另一个会话当前是否正在事务中使用表或表行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:09:35.310

能够在更改*提交之前*检测到更改会破坏 ACID 的整个概念。

通常，如果一个表或行当前正在参与事务，它将被锁定，您将无法更改它。如果您尝试*查看*它，您将看到它在任何未提交的更改之前的样子。这是保持事务短暂存在的一个很好的理由（例如，在等待用户输入时不要锁定行）。

对于更新，如果事务花费太长时间，您最终会看到超时（假设已配置）。

这就是 ACID 的全部意义——你要么看到所有的变化，要么一个都看不到——没有一点可以看到部分变化，而且很少有提前知道的用例。

* * *

我的建议是重新考虑你的问题。询问如何以特定方式修复某事对您来说适得其反。您应该说明实际问题并询问如何解决它。这样，我们将更好地了解背景，您不会将自己局限于可能的解决方案的一小部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T01:35:33.870

如果启用[锁监视器](http://dev.mysql.com/doc/refman/5.1/en/innodb-monitors.html)，您实际上可以使用 SHOW ENGINE INNODB STATUS 查看事务中未完成的行锁，但您需要解析结果才能获得任何可用的信息。这些锁通常只是暂时的。它们在事务提交后消失。

如果您尝试序列化查询，您可以使用 SELECT ... LOCK IN SHARE MODE 实现表锁定（对于整个表）或（使用 InnoDB）行级锁定（或者您可以让 MySQL 为您执行此操作[SERIALIZABLE](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)隔离模式）。

您甚至可以使用存储在数据库中的值提出自己的锁定方案，我已经看到很多实现了。

默认的[innodb_lock_wait_timeout](http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html)是 50 秒，适用于 InnoDB 中的所有行级锁。表锁没有锁等待超时。

如果您更具体，例如提供实际场景和所需行为，我们将能够更详细地回答。

# google-visualization - 无法让 Google 可视化 API 工作。它抛出一个错误

> ID：11660893
> 
> 赞同：0
> 
> 时间：2012-07-26T00:55:20.687
> 
> 标签：google-visualization

这是我的代码和我得到的错误：

```
var data = new google.visualization.DataTable();
data.addColumn('date', 'Date');
data.addColumn('number', 'Views');
data.addColumn('number', 'Winks');
data.addRows([
                  [new Date('2012-25-07'), 1, null],
                  [new Date('2012-23-07'), 1, null],
                  [new Date('2012-21-07'), 1, null],
                  [new Date('2012-19-07'), 1, null],
                  [new Date('2012-18-07'), 1, null],
                  [new Date('2012-17-07'), 1, null],
                  [new Date('2012-16-07'), 1, null],
                  [new Date('2012-15-07'), 1, null],
                  [new Date('2012-14-07'), 1, null],
                ]);

var formatter_short = new google.visualization.DateFormat({formatType: 'short'});
formatter_short.format(data, 0);

var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
chart.draw(data); 
```

> 错误：解析问题 d="Mnull,162.5Lnull,101Lnull,101Lnull,101Lnull,101Lnull,101Lnull,101Lnull,101Lnull,101Lnull,101"

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-09-14T06:47:43.720

您的第三列是数字类型，因此您不能将“null”作为值尝试将“0”放入

# xcode - 在 Mountain Lion 的 Xcode 4.4 中禁用抗锯齿字体

> ID：11660895
> 
> 赞同：35
> 
> 时间：2012-07-26T00:55:49.700
> 
> 标签：xcode, antialiasing, osx-mountain-lion, xcode4.4, font-smoothing

一直在这个问题上挣扎变得非常令人沮丧。我不确定它是 Xcode 4.4 还是 Mountain Lion（我同时安装了两者），但我的代码再次在 Xcode 中进行了抗锯齿（字体平滑）。

我以前能够使用以下说明解决此问题，取自[此问题](https://stackoverflow.com/questions/5268931/xcode-4-appleantialiasingthreshold-doesnt-work-so-how-to-disable-antialiasin)，但现在似乎都不起作用：

> 对于 XCode 3.x，我会执行以下操作：`defaults write com.apple.xcode AppleAntiAliasingThreshold 24`.
> 
> 对于 XCode 4，用户默认域更改为 com.apple.dt.Xcode。对于 XCode 4`defaults write com.apple.dt.Xcode AppleAntiAliasingThreshold 24`应该可以得到你想要的。

如何让 Xcode 恢复可用状态？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-26T17:55:16.763

来自发行说明：[https ://developer.apple.com/library/content/releasenotes/DeveloperTools/RN-Xcode/Chapters/Introduction.html#//apple_ref/doc/uid/TP40001051-CH1-SW680](https://developer.apple.com/library/content/releasenotes/DeveloperTools/RN-Xcode/Chapters/Introduction.html#//apple_ref/doc/uid/TP40001051-CH1-SW680)

> OS X v10.8 上的文本和字体渲染针对 Retina 显示进行了优化。在运行 OS X v.10.8 的非 Retina 显示器上，某些字体配置在 Xcode 中可能显得模糊。11486875 通过在终端中输入以下命令，切换回 Xcode 中的非 Retina 显示优化文本和字体外观：

```
defaults write com.apple.dt.Xcode NSFontDefaultScreenFontSubstitutionEnabled -bool YES 
```

它适用于在 Mountain Lion 上运行 Xcode 4.4 的 Mac Pro。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T14:19:55.230

升级到 ML 时我也遇到了这个问题。`System Preferences > General > Untick 'Use LCD font smoothing when available'`似乎为我修好了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-22T19:12:11.467

lifjoy 的回答不适用于 OS X 10.8.2 和 XCode 4.5，所以我找到了另一个解决方案：

```
defaults -currentHost write -globalDomain AppleFontSmoothing -int 0 
```

# ios - NSTemporaryDirectory 在 RAM 中吗？

> ID：11660899
> 
> 赞同：2
> 
> 时间：2012-07-26T00:56:22.247
> 
> 标签：ios, cocoa-touch

有谁知道`NSTemporaryDirectory()`在 iOS 上返回的目录是否是 *nix 意义上的临时目录 - 就像在内存中一样`tmpfs`？

我正在寻找解决[方法](https://stackoverflow.com/questions/11589105/shmget-throws-sigsys-on-ios)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:00:49.263

不它不是。它是一个临时目录，因为它的内容会定期删除（我认为每 3 天左右）。该文件夹本身在存储中是物理的，并且位于应用程序沙箱中的某个位置。

# git - github ssh 公钥权限被拒绝

> ID：11660900
> 
> 赞同：0
> 
> 时间：2012-07-26T00:56:36.833
> 
> 标签：git, ssh-keys

我有一台服务器，我在其上签出了一个 git 存储库。我通常从我的桌面 ssh 到这个服务器并在我的存储库中工作并从 github 推送和拉取更改。现在我从我的笔记本电脑连接到同一台服务器（这台笔记本电脑与我的台式机具有相同的私有和公共 ssh 密钥），当我尝试从同一台服务器执行 git pull 时，我总是执行 git pull （尽管我已从另一台机器 ssh 进入服务器）我收到权限被拒绝（公钥）错误。

根据我对 git 和 ssh 密钥的了解，这似乎很荒谬。我会错过什么？

# iphone - 如何将插座设置为连接有动作的按钮？

> ID：11660902
> 
> 赞同：0
> 
> 时间：2012-07-26T00:56:37.737
> 
> 标签：iphone, c++, xcode

我的应用程序中有一个按钮，目前我通过界面生成器连接了一个 IBAction，但我需要连接一个插座，以便我可以在我的代码中声明它，`button.hidden = yes`但我不能这样做，因为按钮只有一个IBAction，我将如何设置按钮的出口和动作？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T01:01:33.957

按住 Control 并将按钮拖到 interface() 部分。或者先声明outlet，在按钮上点右键，可以看到一个菜单，可以选择这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:13:50.857

你的代码是

```
button.hidden = yes 
```

我的代码是`button.hidden = YES;`

我希望这能解决你的问题。

# .net - 无法连接到 Microsoft SQL Server

> ID：11660903
> 
> 赞同：-1
> 
> 时间：2012-07-26T00:56:38.800
> 
> 标签：.net, sql-server

所以我用服务器下载了 SQL 套件，并尝试通过 Visual Studio 数据库资源管理器连接到我的服务器。

我选择：

数据来源：Microsoft SQL Server ( `SqlClient`)

服务器名称： ？？

但是我尝试了服务器名称的所有内容，但它没有显示该服务器上的数据库列表，只是显示为空（尝试了 localhost/root/DraftDB 这是我在 MySQL 工作台中的服务器名称，没有任何效果。

有谁知道我如何从 Visual Studio 连接到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:44:52.673

确保您已在 SQL 配置管理器中启用 TCP/IP 或命名管道连接，在 MSSQL 所在的服务器上，在您的 SQL Server 实例的客户端协议部分下。然后，只要包含数据库实例名称，您就应该能够通过 IP 或名称进行连接。

例子：

数据库服务器 IP：192.168.1.101

数据库名称：MYDBSERVER

SQL 实例名称：MSSQL

通过 TCP/IP 的连接是：192.168.1.101/MSSQL

通过名称连接是：\\MYDBSERVER\MSSQL

# php - 记录何时以及如何在 Web 应用程序中使用 PHP 文件

> ID：11660906
> 
> 赞同：0
> 
> 时间：2012-07-26T00:57:04.817
> 
> 标签：php, logging, get, freebsd

我有一个我正在做一些测试的 php web 应用程序。此应用程序在 Freebsd 主机上运行。在应用程序目录中，我有几个 .php 文件，我不确定它们的用途/时间。有没有办法在应用程序访问这个 .php 文件时记录它，以及在使用它时传递给它的参数是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:03:43.140

当然。您可以在每个文件的开头放置一个 error_log() 调用，假设您可以访问它们将被写入的任何日志（通常是网络服务器错误日志）。

```
$error_msg = 'File: ' . __FILE__ . ' Request: ' . var_export($_REQUEST, true);
error_log($error_msg); 
```

这将记录正在访问的文件，并导出请求超全局，以便您了解 GET、POST 和 COOKIE 中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:02:53.953

debug_backtrace 或 debug_print_backtrace 将为您提供所需的一切，包括之前加载的文件和函数，以便您发现整个调用/加载路径。

# database - “对象”之间的数据库建模关系

> ID：11660912
> 
> 赞同：0
> 
> 时间：2012-07-26T00:58:15.167
> 
> 标签：database, object, modeling, relationships

我想建模、分析和创建一个包含纸牌游戏信息的数据库。每一轮游戏都有一个 ID、时间戳和 4 个或更多玩家（通常是 4 个）。我已经用一组属性定义了我的播放器表。但是由于每回合有4名玩家，***我如何有效地实现回合与玩家之间的关系？***

基本上每一轮都有 4 个不同的玩家，具有相同的属性（具有不同的值）。每个玩家都有一个属性（列）似乎很奇怪，因为我想有某种链接到玩家表以保持我的“对象”独立和封装。***这是回合和4名玩家之间的一对多关系吗？***

当我在纸上绘制模型时，它似乎更像是一个层次结构。例如，我有一个*有*4 名玩家的回合，每个玩家*都有*一手牌。***这是关系模型、层次模型、对象模型还是其他什么？***

另外，***这可以在 SQL 中完成吗？如果不是我应该使用什么？*** 非常感谢任何帮助/建议，因为我的所有经验都是使用 SQL 中的关系数据库。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:22:34.860

基本上

```
 Round                                       Player
------------                              -----------------

round_id player_id others_attri       player_id info_attributes 
```

然后，对于每一轮，您需要在 Round 中存储 4 行，具有相同的 id 和每个玩家 id，例如，玩家 1、2、3、4 所在的 id 为 1 的 Round。

```
 Round               Player
-----------          -----------
1  1  date                1
1  2  date                2
1  3  date                3
1  4  date                4 
```

player_id 是 player_id 的外键。

或者，如果您不想多次存储日期，请执行以下操作：

```
Round                      player_play                      Player
---------                   ------------                -----------------

round_id info_attributes  round_id player_id        player_id info_attributes

Round           player_play              Player
-------         -----------          -----------
1 date           1  1                  1
                 1  2                  2
                 1  3                  3
                 1  4                  4 
```

# java - 带有进度条的延迟加载图像在显示图像时会导致图像损坏

> ID：11660913
> 
> 赞同：12
> 
> 时间：2012-07-26T00:58:17.053
> 
> 标签：java, android

我有一个应用程序显示来自服务器的图像。现在我懒加载我的图片。所以最初我在图像完成加载时显示一个进度条我通过将其`visibility`属性设置为来删除进度条`View.INVISIBLE`并显示图像。这是我用于图像的布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center" >

     <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:contentDescription="@string/app_name"
            android:scaleType="centerInside"
            android:src="@drawable/ic_launcher" />

    <RelativeLayout
        android:id="@+id/loading_layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@android:color/white" >

        <ProgressBar
            android:id="@+id/progressBar1"
            style="?android:attr/progressBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:background="@android:color/white" />
    </RelativeLayout>

</FrameLayout> 
```

**问题** 当进度条消失时，屏幕上显示的图像已损坏。喜欢这张图片

当我刷新列表时，从缓存目录加载的图像，当它们显示在屏幕上时，它们显示正确，没有任何损坏。

![在此处输入图像描述](../Images/7c72041d655553cd8cae8010b31f988a.png)

我用来延迟加载图像的 ImageLoader 类

```
public class ImageLoader {
    // @@ JUST FOR THIS PROJECT
    BaseAdapter mAdapter;
    // @@
    MemoryCache memoryCache = new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews = Collections
            .synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService;

    boolean addRoundCournerAndStroke = false;
    boolean scale = false;

    boolean localfile = false;
    int default_image;

    public ImageLoader(Context context, boolean flag, boolean scale,
            boolean localfile) {
        fileCache = new FileCache(context);
        this.addRoundCournerAndStroke = flag;
        executorService = Executors.newFixedThreadPool(5);
        this.scale = scale;
        this.localfile = localfile;

    }

    public ImageLoader(Context context, boolean flag, boolean scale,
            boolean localfile, int default_image_id) {
        this(context, flag, scale, localfile);
        this.default_image = default_image_id;
    }

    public ImageLoader(Context context, boolean flag, boolean scale,
            boolean localfile, int default_image_id, BaseAdapter adapter) {
        this(context, flag, scale, localfile);
        this.default_image = default_image_id;
        this.mAdapter = adapter;
    }

    public void DisplayImage(String url, ImageView imageView) {
        imageViews.put(imageView, url);
        Bitmap bitmap = memoryCache.get(url);
        if (bitmap != null) {
            changeProgressBarVisibilty(imageView, false);
            imageView.setImageBitmap(bitmap);
        }

        else {
            queuePhoto(url, imageView);
            imageView.setImageResource(this.default_image);
        }
    }

    private void queuePhoto(String url, ImageView imageView) {
        PhotoToLoad p = new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url) {
        File f = null;
        if (localfile)
            f = new File(url);
        else
            f = fileCache.getFile(url);

        // Log.d("bytes", "decode");
        // from SD cache
        Bitmap b = decodeFile(f);
        if (b != null)
            return b;

        // from web
        try {
            Bitmap bitmap = null;

            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection) imageUrl
                    .openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is = conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();

            bitmap = decodeFile(f);
            // //Log.d("bytes", "decode");
            return bitmap;
        } catch (Exception ex) {
            ex.printStackTrace();
            return null;
        }
    }

    private Bitmap decodeFileWithoutScaling(File f) {
        try {
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = 1;
            //o2.inPurgeable = true;
            if (this.localfile)
                return BitmapFactory.decodeFile(f.getAbsolutePath(), o2);
            else
                return BitmapFactory.decodeStream(new FileInputStream(f), null,
                        o2);
        } catch (FileNotFoundException e) {
        }
        return null;
    }

    private Bitmap decodeFile(File f) {

        if (this.scale) {
            return decodeFileWithScalling(f);
        } else {
            return decodeFileWithoutScaling(f);
        }
    }

    // decodes image and scales it to reduce memory consumption
    private Bitmap decodeFileWithScalling(File f) {
        try {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;

        //  o.inPurgeable = true;
            if (this.localfile)
                BitmapFactory.decodeFile(f.getAbsolutePath(), o);
            else
                BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            // Log.d("width", width_tmp + "");
            // Log.d("height", height_tmp + "");
            int scale = 1;
            while (true) {
                if (width_tmp / 2 < REQUIRED_SIZE
                        || height_tmp / 2 < REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale *= 2;
            }

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
        //  o2.inPurgeable = true;
            // Log.d("after shave width", o2.outWidth + "");
            // Log.d("after shave height", o2.outHeight + "");
            if (this.localfile)
                return BitmapFactory.decodeFile(f.getAbsolutePath(), o2);
            else
                return BitmapFactory.decodeStream(new FileInputStream(f), null,
                        o2);
        } catch (FileNotFoundException e) {
        }
        return null;
    }

    // Task for the queue
    private class PhotoToLoad {
        public String url;
        public ImageView imageView;

        public PhotoToLoad(String u, ImageView i) {
            url = u;
            imageView = i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;

        PhotosLoader(PhotoToLoad photoToLoad) {
            this.photoToLoad = photoToLoad;
        }

        public void run() {
            if (imageViewReused(photoToLoad)) {
                return;
            }

            Bitmap bmp = getBitmap(photoToLoad.url);

            // if (addRoundCournerAndStroke) {
            // // bmp = ImageHelper.rotateAndFrame(bmp, 10);
            // bmp = ImageHelper.getRoundedCornerBitmap(bmp, 10);
            // }

            memoryCache.put(photoToLoad.url, bmp);
            if (imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd = new BitmapDisplayer(bmp, photoToLoad);
            Activity a = (Activity) photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad) {
        String tag = imageViews.get(photoToLoad.imageView);
        if (tag == null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    // Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;

        public BitmapDisplayer(Bitmap b, PhotoToLoad p) {
            bitmap = b;
            photoToLoad = p;
        }

        public void run() {
            if (imageViewReused(photoToLoad))
                return;
            changeProgressBarVisibilty(photoToLoad.imageView, false);
            if (bitmap != null) {
                photoToLoad.imageView.setImageBitmap(bitmap);

            } else {
                photoToLoad.imageView
                        .setImageResource(ImageLoader.this.default_image);

            }
            if (mAdapter != null) {
                mAdapter.notifyDataSetChanged();
            }

        }
    }

    private void changeProgressBarVisibilty(ImageView image, boolean visible) {
        ViewGroup layout = (ViewGroup) image.getParent();

        try {
            View v = layout.findViewById(R.id.loading_layout);
            v.setVisibility(visible ? View.VISIBLE : View.GONE);
        } catch (Exception ex) {
            ex.printStackTrace();
        }

    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T11:10:59.693

尝试使用 ProgressDialog 而不是 Progressbar。ProgressDialog 也可以使用进度条。ProgressDialog 不是 XML 类型。因此您可以使用 show() 或 dismiss() 方法。也许它没有这个问题。我认为这个问题来自RelativeLayout。如果您使用 ProgressBar Visiblity ，RelativeLayout 仍然可见（但没有背景）。RelativeLayout 也有任何项目。我猜空布局给你带来了腐败。使用 ProgressDialog 是最好的..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T16:27:30.607

损坏的图像显示损坏的 JPEG 伪影。

您的问题可能来自该 `BitmapFactory.decodeStream`方法。并非所有 JPEG 都针对动态解码（“渐进式”）进行了优化，因此在正确解码之前，它们可能需要作为一个整体可用。通常，非渐进式图像可以自上而下解码，但这可能不适用于所有文件，或者解码器可能有一些缺陷会阻止这种情况。

另一方面，如果稍后从缓存文件中获取图像，`BitmapFactory.decodeFile`则使用不需要关心流数据并且可以随机访问图像文件以解码 JPEG。如果您在加载图像时不需要逐行显示更新，我建议您消除此代码路径并始终在解码前下载整个图像。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T13:14:31.897

我认为您可以尝试将可见性设置为`View.GONE`，因为当您设置`View.INVISIBLE`View 时，该位置仍然存在，并且就像 Tae 所说的那样，RelativeLayout 可能存在一些问题。

干杯

# github - GitHub Markdown - 双括号

> ID：11660914
> 
> 赞同：3
> 
> 时间：2012-07-26T00:58:22.223
> 
> 标签：github, wiki, markdown

我一直在尝试找到一些有关如何执行此操作的文档，但我似乎找不到任何类似的东西。我正在尝试在 GitHub MD 中的代码块中添加双括号：

```
[[something]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:30:08.497

以下任何一项似乎都有效：

排队：

```
this is some `[[code]]` 
```

带空格的块：

```
 this is some [[code]] 
```

# python - 如何在 django 管理界面中按字符串长度过滤数据（查询集）？

> ID：11660915
> 
> 赞同：2
> 
> 时间：2012-07-26T00:58:22.617
> 
> 标签：python, django

我想知道，如何只显示“code_key”长度为 10 个字符的记录？

目前，如果我使用 'qs = Code.objects.filter(code_key.len **(** )=10)' 返回错误。

提前致谢。

**管理员.py**

```
class CodeAdmin(admin.ModelAdmin):
    fields = ['code_key','redemption_date','user','movie']

    #
    list_display = ('code_key','redemption_date','user','movie')

    #
    search_fields = ('code_key','user__email','movie__title')

    def queryset(self, request):
        """
        Filter the objects displayed in the change_list
        """
        qs = super(CodeAdmin, self).queryset(request)
        return qs

    def changelist_view(self, request, extra_context=None):
        my_context = {
            'total': 'some value query',
        }
        return super(CodeAdmin, self).changelist_view(request,extra_context=my_context) 
```

**模型.py**

```
class Code(models.Model):
    id = models.AutoField(primary_key=True)
    code_key = models.CharField(max_length=20,unique=True)
    redemption_date = models.DateTimeField(null=True, blank=True)
    user = models.ForeignKey(User, blank=True, null=True)
    movie = models.ForeignKey(Movie, blank=True, null=True)

    # ...
    def display_record(self):
        return (self.code_key.__len__() == 10)

    # ...
    def __unicode__(self):
        return self.code_key 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T01:20:45.783

使用 MySQL？

```
qs = Code.objects.extra(where=['CHAR_LENGTH(code_key) = 10']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:04:28.463

采用

```
filter(lambda code_object: len(code_object.code_key) == 10, list_of_code_objects) 
```

它将删除语句 len(code_object.code_key) == 10 不返回 true 的 list_of_code_objects 的所有成员。

编辑：它不影响原始 list_of_code_objects；它返回一个新列表，其中仅包含原始列表中通过测试的那些对象。

# php - PHPExcel - 如何设置默认窗口大小

> ID：11660918
> 
> 赞同：7
> 
> 时间：2012-07-26T00:58:59.410
> 
> 标签：php, window, size, phpexcel, worksheet

我查看了 PHPExcel 示例并尝试在线搜索，但我不知道如何在第一次打开电子表格时设置窗口的大小 - 窗口很小，我总是必须调整它的大小，这就变成了测试新布局时有点乏味:)

如果这是相关的，我将生成 Excel 5.0 格式的电子表格（出于兼容性原因）。

希望我遗漏了一些非常明显的东西，但感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:07:08.163

根据我的经验，excel 会自行打开到干净关闭时的最后一个大小。尝试打开一个文件，最大化它，

# php - 带有数组参数的 Symfony2 Doctrine2 查询

> ID：11660922
> 
> 赞同：0
> 
> 时间：2012-07-26T00:59:44.397
> 
> 标签：php, mysql, symfony, doctrine-orm

我需要这样查询：

```
SELECT p.pid, p.url FROM products as p WHERE url_crc IN (FNV_64("http://url1.com/"),FNV_64("http://url2.com/")) 
```

我需要对每个数组变量使用 FNV_64 哈希函数。**在将变量传递给查询生成器之前，我不能进行散列。此哈希函数仅可作为 MySQL 扩展使用。**

我怎样才能使用 Symfony2 做到这一点？例如，使用：

```
$qb = $em->createQueryBuilder();
$query = $qb->select('p.pid')
            ->from('SRC\MainBundle\Entity\Product', 'p')
            ->where('p.url_crc IN (FNV_64(:urls))') // error HERE
            ->setParameter('urls', $hashes_array)
            ->getQuery(); 
```

行不通。我能做到的唯一方法是：

```
$query = $em->createNativeQuery('SELECT p.pid, p.url FROM products as p
                                WHERE url_crc IN (' . join(',', $tmp_array) . ')', $rsm); 
```

tmp_array 看起来像这样：

```
Array
(
    [0] => FNV_64("http://url1.com/")
    [1] => FNV_64("http://url2.com/")
) 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:10:07.167

您始终可以绕过 DQL。但是，Doctrine2 旨在支持各种数据库引擎，并允许您在 DQL 中添加“供应商特定的 SQL 功能”。您可以阅读[此链接](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/cookbook/dql-user-defined-functions.html "这个链接")以了解如何编写代码以支持您的 mysql 扩展。还有一个指向 github 存储库的链接，其中包含许多扩展，您可以查看示例。

另一件事——我在这里找到了至少一个 FNV 哈希的 php 实现[。](http://code.google.com/p/boyanov/source/browse/?repo=prototypes#hg/fnvhash)

# gcc - setup.py ld 找不到存在的库，路径已配置

> ID：11660928
> 
> 赞同：0
> 
> 时间：2012-07-26T01:00:34.650
> 
> 标签：gcc, shared-libraries, ld, cython, archlinux

我正在尝试使用本教程将 cython 接口编译到 C 库：[Using C libraries with Cython](http://docs.cython.org/src/tutorial/clibraries.html)但是当我使用它时：

```
python2 setup.py build_ext -i 
```

链接器找不到库（库名是`libHorde3D`）

```
gcc -pthread -shared -Wl,-O1,--sort-common,--as-needed,-z,relro,--hash-style=gnu build/temp.linux-x86_64-2.7/horde3d.o -L/usr/lib -llibHorde3D -lpython2.7 -o /home/kiril/workspace/horde3d_python/cython/horde3d.so
/usr/bin/ld: cannot find -llibHorde3D 
```

这是非常特殊的，因为 libHorde3D.so 存在于我的 /usr/lib 和 /opt/lib 中，链接器的搜索路径在 /etc/ld.conf 中配置为查看这些目录，我尝试设置搜索具有以下变量的路径：LD_LIBRARY_PATH、LIBRARY_PATH、LDFLAGS，以及直接传递它：

```
python2 setup.py build_ext -i -L/opt/lib 
```

我做了一个`ldconfig -v`并列出了图书馆：

```
/usr/lib:
    libHorde3D.so -> libHorde3D.so
/opt/lib:
    libHorde3D.so -> libHorde3D.so 
```

为了更好地衡量，我试图将所有者更改为“root”，但仍然没有。

这里发生了什么？特别是因为如果从 Code::Blocks 调用链接器（在处理一些补充 C++ 代码时），我能够链接库。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:18:09.023

我认为你只需`lib`要从你的`-l`论点中删除这个词，所以把它改成`-lHorde3D`

# javascript - JavaScript 无效日期

> ID：11660930
> 
> 赞同：2
> 
> 时间：2012-07-26T01:00:54.333
> 
> 标签：javascript, date

我被传递了一个“日期时间 UTC”的日期，例如`2012-03-10 20:00:00 UTC`. 我如何使用 Javascript 的 Date 来解析它，以便我可以获取到现在的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:03:27.790

`Date.parse`可以做到：

```
new Date(Date.parse('2012-03-10 20:00:00 UTC')) 
```

至少，它可以在谷歌浏览器上。如果您发现任何兼容性问题，这将解决问题：

```
function parseDate(date) {
    var m = /^(\d{4})-(\d\d)-(\d\d) (\d\d):(\d\d):(\d\d) UTC$/.exec(date);
    var tzOffset = new Date(+m[1], +m[2] - 1, +m[3], +m[4], +m[5], +m[6]).getTimezoneOffset();

    return new Date(+m[1], +m[2] - 1, +m[3], +m[4], +m[5] - tzOffset, +m[6]);
} 
```

# ruby-on-rails - 如何按 _id 和国家/地区分组？

> ID：11660931
> 
> 赞同：0
> 
> 时间：2012-07-26T01:01:32.687
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, aggregation-framework

我需要按 _id 和国家/地区分组。我已经设法分组`_id`，但想知道如何对这些国家/地区进行分组`_id`并返回每个国家/地区的计数。

我正在使用聚合框架。到现在为止还挺好。

```
conn = Mongo::Connection.new
db   = conn['foobar_development']

cmd = {
  aggregate: 'live_daily_stats',
  pipeline: [
    { '$project' => {
      :metacontent => 1,
      :visits => 1,
    } },
    { '$unwind' => '$visits' },
    { '$match' => { 'visits.minute' => { '$gt' => 224 } } },
    { '$sort' => { 'visits.minute' => 1 } },
    { '$group' => { 
      :_id => '$_id', 
      :visits => { '$push' => '$visits' }, 
      :visits_count => { '$sum' => 1 },
      :metacontent => { '$addToSet' => '$metacontent' },
      } 
    },
    { '$sort' => { 'visits_count' => -1 } },
  ]
}

res = db.command(cmd)['result'] 
```

以下返回：

```
[
    [0] {
                 "_id" => "20120726/foobar/song/custom-cred",
              "visits" => [
            [0] {
                                              "country_name" => "UK",
                               "iso_two_letter_country_code" => "UK",
                                                   "referer" => "http://localhost:3000/",
                                                    "minute" => 59,
                                                  "token_id" => "134326199711wfryhpdq"
            },
            [1] {
                                              "country_name" => "UK",
                               "iso_two_letter_country_code" => "UK",
                                                   "referer" => "http://localhost:3000/",
                                                    "minute" => 59,
                                                  "token_id" => "134326199711wfryhpdq"
            },
            [2] {
                                              "country_name" => "US",
                               "iso_two_letter_country_code" => "US",
                                                   "referer" => "http://localhost:3000/",
                                                    "minute" => 59,
                                                  "token_id" => "134326199711wfryhpdq"
            }
        ],
        "visits_count" => 1,
         "metacontent" => [
            [0] {
                                     "date" => "20120726"
            }
        ]
    },
    [1] {
                 "_id" => "20120725/foobar/song/test-pg3-long-title-here-test-lorem-ipsum-dolor-lo",
              "visits" => [
            [0] {
                                              "country_name" => "UK",
                               "iso_two_letter_country_code" => "UK",
                                                   "referer" => "http://localhost:3000/",
                                                    "minute" => 58,
                                                  "token_id" => "13432600883knjzcbic"
            }
        ],
        "visits_count" => 1,
         "metacontent" => [
            [0] {
                                     "date" => "20120725"
            }
        ]
    }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:34:21.500

从[文档](http://docs.mongodb.org/manual/reference/aggregation/#aggregation-expression-operators)

> $group 将文档分组在一起，以便根据文档集合计算聚合值。实际上，组通常支持诸如每天网站中每个页面的平均页面浏览量之类的任务。
> 
> $group 的输出取决于您如何定义组。首先为您使用此管道创建的组指定一个标识符（即 _id 字段）。您可以指定管道中文档中的单个字段、先前计算的值或由多个传入字段组成的聚合键。
> 
> 每个组表达式都必须指定一个 _id 字段。您可以将 _id 字段指定为带点的字段路径引用、**包含在大括号中的多个字段（即 { 和 }）的文档**或常量值。

我会先尝试按 _id 和国家/地区分组（让您进行所需的计数），然后仅按 _id 对结果进行分组以提供所需的结构。

更新：

我在想这样的事情..但我没有环境设置来检查它..

```
 conn = Mongo::Connection.new
    db   = conn['foobar_development']

    cmd = {
      aggregate: 'live_daily_stats',
      pipeline: [
        { '$project' => {
          :metacontent => 1,
          :visits => 1,
        } },
        { '$unwind' => '$visits' },
        { '$match' => { 'visits.minute' => { '$gt' => 224 } } },
        { '$sort' => { 'visits.minute' => 1 } },
        { '$group' => { 
          :_id => {'$_id','$visits.iso_two_letter_country_code'},
          :page_id => '$_id',
          :visits_count => { '$sum' => 1 },
   .... whatever you want ...
          :metacontent => { '$addToSet' => '$metacontent' },
          } 
        },
        { '$group' => { 
          :_id => '$page_id', 
   .... whatever you want ...
          } 
        },
        { '$sort' => { 'visits_count' => -1 } },
      ]
    }

    res = db.command(cmd)['result'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:15:26.407

我将 更改`$group`为连接两者`_id`和`country_name`：

```
cmd = {
  aggregate: 'live_daily_stats',
  pipeline: [
    { '$project' => {
      :metacontent => 1,
      :visits => 1,
    } },
    { '$unwind' => '$visits' },
    { '$match' => { 'visits.minute' => { '$gt' => 224 } } },
    { '$sort' => { 'visits.minute' => 1 } },
    { '$group' => { 
      :_id => { '$add' => ['$_id', '$visits.country_name']}, 
      :visits => { '$push' => '$visits' }, 
      :visits_count => { '$sum' => 1 },
      :metacontent => { '$addToSet' => '$metacontent' },
      } 
    },
    { '$sort' => { 'visits_count' => -1 } },
  ]
} 
```

# javascript - 用于编辑 LESS CSS 变量的 Javascript 库？

> ID：11660933
> 
> 赞同：3
> 
> 时间：2012-07-26T01:01:35.907
> 
> 标签：javascript, html, css, less

假设我有一个使用 LESS 并利用变量的网站；我想知道是否存在一个库或任何东西来为最终用户提供更改变量的能力。例如，如果在变量中指定了类的背景颜色，我希望能够在下拉菜单中对其进行编辑。我将实现类似的东西，所以在这样做之前，想知道任何现有的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:14:15.217

我最近经常遇到这个问题，在尝试了很多事情之后，我的解决方案是最终放弃 LESS 并使用[Stylus](http://learnboost.github.com/stylus/)，它有一个很好的 JavaScript API。

无论如何，这就是我现在在 JavaScript 中获取 LESS 变量的工作：

```
var getLessVar = function (name, prop) {
  var value = $('<div class="' + name + '"></div>').hide().appendTo('body').css(prop)
  $('.' + name).remove()
  return /^\d+/.test(value) ? +value : value
} 
```

这是 hacky 但有效。您在 LESS 中创建一个类并将您想要在 JS 中获取的变量分配给一个属性，比如说`width`，但它可以是任何其他属性，具体取决于您发送的数据类型（数字、颜色......）

```
@myvar: 30px + @foo;
.myvar { width: @myvar } 
```

然后在 JS 中，您使用该 lil' 脚本获取变量，如下所示：

```
var myvar = getLessVar('myvar', 'width') 
```

这对性能来说不是很好，因为它创建了一个不可见的元素来检索数据，但它可以工作。

* * *

从 JS 设置变量更复杂，但你总是可以做一些 AJAX 魔术[`LessPHP`](http://leafo.net/lessphp/)以及一些基本的解析器来读取你的`variables.less`.

但同样，如果您需要更多功能，请使用 Stylus。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T15:34:58.117

> modifyVars 允许在运行时修改 LESS 变量。当使用新值调用时，会重新编译 LESS 文件而不重新加载。简单的基本用法：

```
less.modifyVars({
    '@buttonFace': '#5B83AD',
    '@buttonText': '#D9EEF2'
}); 
```

# javascript - javascript错误消息未显示

> ID：11660934
> 
> 赞同：1
> 
> 时间：2012-07-26T01:01:48.140
> 
> 标签：javascript

如果文本框（First_Name）为空，我会尝试出错。例如，如果 firstname 字段留空，用户将收到以下错误：“请输入您的名字”但是当我在将字段留空后单击提交按钮时没有任何反应...

```
<HTML>
<HEAD>
<TITLE>this is a test page</TITLE>
<script language="javascript" type="text/javascript">
<!--
function CheckForm()
{
  var formObj = document.getElementById("Data");
  var firstname = formObj.FIRST_Name.value;

    if(notEmpty(firstname, "Please enter your first name")){                        

    return true;}

    return false;
    }

function notEmpty(elem, helperMsg){
    if(elem.value.length == 0){
        alert(helperMsg);
        elem.focus(); // set the focus to this input
        return false;
    }
    return true;
}

</script>
</HEAD>
<BODY>
<div style="background: #CCCC99">
<HR><FORM id="Data" onsubmit="return CheckForm()" >
<P>First Name: <input type=text name=FIRST_Name maxlength=15 size=15>
</P>
<input type=submit value="Submit Products Registration Form" style="width: 220px"><input type=reset value="Reset">
</form>
</div>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:06:25.173

`firstname`是元素值，但您将其`notEmpty`作为元素传递给，而不是使用

```
if(notEmpty(formObj.FIRST_Name, "Please enter your first name")){ 
```

# android - Android ScrollView 拒绝滚动到底部

> ID：11660937
> 
> 赞同：28
> 
> 时间：2012-07-26T01:02:20.130
> 
> 标签：android, android-layout, scroll, scrollview

我有一个带有相对布局的根滚动视图元素，以及相对布局内的一堆表单元素。

出于某种原因，当软键盘启动时，它似乎无法一直滚动到底部，这将我的一个按钮切成两半。

这是层次结构查看器的屏幕截图，以说明我的意思。

![在此处输入图像描述](../Images/7e8f320ef1734e233e10a7a61d50317a.png)

如您所见，系统知道视图继续通过键盘，但滚动视图（正确填充屏幕的可见部分）不会继续向下滚动。

我`android:windowSoftInputMode="adjustResize"`在活动清单中有，我可以/不会将其切换到平移。

任何帮助表示赞赏。

编辑：我在不止 1 个视图中看到这个。这是另一个具有相同问题的视图的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background" >
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="32dp" >
        <EditText
            android:id="@+id/reset_oldpass"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:ems="10"
            android:singleLine="true"
            android:hint="@string/current_password"
            android:layout_marginTop="16dp" />
        <EditText
            android:id="@+id/reset_pass1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/reset_oldpass"
            android:ems="10"
            android:hint="@string/reset_new_pass"
            android:inputType="textPassword"
            android:layout_marginTop="16dp" />
        <EditText
            android:id="@+id/reset_pass2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/reset_pass1"
            android:ems="10"
            android:hint="@string/reset_confirm_pass"
            android:inputType="textPassword"
            android:layout_marginTop="16dp" />
        <TextView
            android:id="@+id/reset_forgot_password"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/reset_pass2"
            android:layout_marginTop="16dp"
            android:textColor="@color/Link"
            android:textStyle="bold"
            android:text="@string/Login_forgot_password" />
        <Button
            android:id="@+id/reset_reset_password_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/reset_forgot_password"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="16dp"
            android:layout_marginBottom="32dp"
            android:text="@string/reset_change_pass" />
    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-26T01:55:00.573

这确实很奇怪，但似乎是由`android:layout_margin="32dp"`RelativeLayout内部引起的。一旦我把它拿出来，卷轴就可以正常工作。

当然，正因为如此，我不得不为我的表单元素添加更多边距，但至少现在已经修复了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-07T12:32:08.707

我遇到了同样的问题，我通过在 ScrollView 中使用填充而不是在 RelativeLayout 中使用边距来修复它。

因此，`android:layout_margin="32dp"`从 RelativeLayout（ScrollView 的子项）中删除并添加`android:padding="32dp"`到 ScrollView。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-23T08:07:57.937

在棒棒糖及更高版本中使状态栏透明给我带来了问题。环境

```
安卓：fitsSystemWindows="真"
```

到包含 scrollView 的布局的父视图解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-02T06:56:01.697

我刚刚在一个应用程序中遇到了这个问题，发现这是由于 ScrollView layout_height 被设置为包装内容。问题是，如果您有足够的内容需要 ScrollView，则您不想包装内容，因为 ScrollView 的底部在屏幕之外任意量。我没有足够的数据受此影响，因为在键盘弹出之前我不需要 ScrollView。从表面上看，OP处于同样的境地。

现在，一旦键盘弹出，ScrollView 的底部将被提升到与键盘高度相同的高度，并最终在键盘顶部下方与可见屏幕底部下方相同的任意数量。

最终，我的解决方法是将 ScrollView 的顶部绑定到我的工具栏，然后右键单击树中的 ScrollVIew 并选择“垂直居中”（不在父选项中）。现在就像一个魅力。layout_height 应该自动变为 0dp。

# objective-c - 如何引入编辑功能

> ID：11660943
> 
> 赞同：0
> 
> 时间：2012-07-26T01:03:23.670
> 
> 标签：objective-c, ios, xcode4

我遇到了一个问题，我有一个选项卡应用程序，在其中我将第二个控制器作为导航控制器，然后在上面拖放一个表格视图。

我的表与来自数据库的所有元素一起工作正常。

我的问题是单击时我想要一个编辑按钮，表格进入编辑模式并允许我从表格中删除行。我无法理解我该怎么做我试过这个

```
- (void)viewDidLoad
{

      self.navigationItem.rightBarButtonItem = self.editButtonItem;

    [super viewDidLoad]; 
```

它在导航控制器的右侧带来了一个编辑按钮，但是当我单击它时，它不会在编辑模式下更改表格。

我知道我必须实现这个方法，但我没有得到要写的内容

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {

} 
```

我在其他论坛上到处都能找到写的 tableview -----，这个 table view 是什么，它是 UITableView 类的实例吗？

请帮我解决代码问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:15:21.897

您必须在*- (void)viewDidLoad中指定以下按钮*

```
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

然后实现以下方法：

```
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath 
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    return UITableViewCellEditingStyleNone;
}

- (BOOL)tableView:(UITableView *)tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath 
{
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:11:54.767

您可以删除您的`setEditing:animated:`或调用`super`. 的默认实现`UITableViewController`已经将其表格视图置于编辑模式，因此您不必自己这样做。你在这里所做的是用一个什么都不做的方法来覆盖这个行为。

# php - PHP MySQL 在同一个表中复制一行...具有主键和唯一键

> ID：11660944
> 
> 赞同：24
> 
> 时间：2012-07-26T01:03:24.740
> 
> 标签：php, mysql, duplicates, row

我的表有两个键，一个是自动递增的 id (PRIMARY)，另一个是项目的名称 (UNIQUE)。

是否可以在同一个表中复制一行？我试过了：

```
INSERT INTO items
SELECT * FROM items WHERE id = '9198' 
```

这给出了错误`Duplicate entry '9198' for key 'PRIMARY'`

我也试过：

```
INSERT INTO items
SELECT * FROM items WHERE id = '9198'
ON DUPLICATE KEY UPDATE id=id+1 
```

这给出了错误`Column 'id' in field list is ambiguous`

就项目名称（UNIQUE）字段而言，有没有办法附加`(Copy)`到项目名称，因为该字段也必须是唯一的？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-26T01:05:39.147

明确选择所有列，除了 id 列：

```
INSERT INTO items
(col1, col2, ..., coln)
SELECT col1, col2, ..., coln
FROM items
WHERE id = '9198' 
```

您的下一个问题可能是：

> 有没有办法在不明确列出所有列的情况下做到这一点？

回答：不，我不这么认为。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-26T01:28:11.360

如果你**真的**不想像马克的回答那样列出所有表格列，你可以试试这个：

```
CREATE TEMPORARY TABLE temp_tbl SELECT * FROM items WHERE id = '9198';
SELECT @maxId := MAX(id) + 1 FROM items;
UPDATE temp_tbl SET id = @maxId;
INSERT INTO items SELECT * FROM temp_tbl;
DROP TABLE temp_tbl; 
```

不漂亮，不快。但有效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-08T20:18:06.937

感谢 hobailey 提供了出色的免维护解决方案。

这是我最终使用的代码，已针对 MySQLi 进行了更新：

```
// Get the columns
$cols = array();
$result = $mysqli->query("SHOW COLUMNS FROM [TABLE]"); // Change table name

while ($r = $result->fetch_array(MYSQLI_ASSOC)) {
    if (!in_array($r["Field"], array("COLA", "COL4", "COL8"))) { // Edit array with any column names you want to exclude
        $cols[] = $r["Field"];
    }
}

// Build and do the insert
$result = $mysqli->query("SELECT * FROM [TABLE] WHERE [SELECTION CRITERIA];"); // Change table name and add selection criteria

while ($r = $result->fetch_array(MYSQLI_ASSOC)) {

    $insertSQL = "INSERT INTO [TABLE] (" . implode(", ",$cols) . ") VALUES ("; // Change table name
    $count = count($cols);

    foreach($cols as $counter=>$col) {
// This is where you can add any code to change the value of existing columns
        $insertSQL .= "'" . $mysqli->real_escape_string($r[$col]) . "'";
        if ($counter < ($count - 1)) {
            $insertSQL .= ", ";
        }
    } // END foreach

    $insertSQL .= ");";

    $mysqli->query($insertSQL);
    if ($mysqli->affected_rows < 1) {
// Add code if the insert fails
    } else {
// Add code if the insert is successful
    }

} // END while 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-02T13:33:46.300

或者，如果您不想显式编写所有列（并且不想开始创建/删除表），您可以获取表的列并自动构建查询：

```
//get the columns
$cols=array();
$result = mysql_query("SHOW COLUMNS FROM [table]"); 
 while ($r=mysql_fetch_assoc($result)) {
  if (!in_array($r["Field"],array("[unique key]"))) {//add other columns here to want to exclude from the insert
   $cols[]= $r["Field"];
  } //if
}//while

//build and do the insert       
$result = mysql_query("SELECT * FROM [table] WHERE [queries against want to duplicate]");
  while($r=mysql_fetch_array($result)) {
    $insertSQL = "INSERT INTO [table] (".implode(", ",$cols).") VALUES (";
    $count=count($cols);
    foreach($cols as $counter=>$col) {
      $insertSQL .= "'".$r[$col]."'";
  if ($counter<$count-1) {$insertSQL .= ", ";}//dont want a , on the last one
    }//foreach
  $insertSQL .= ")";

  mysql_query($insertSQL);//execute the query
  }//while 
```

请注意，这使用了 MySQL 的折旧代码，它应该是 MySQLi。我敢肯定它也可以改进，但这是我正在使用的，而且效果很好。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-05T01:29:44.343

问题标题确实表明您想通过 PHP 执行此操作。

我遇到了同样的问题，如果您更改表结构（添加/删除列），写出所有列名很乏味且难以维护......而且我不喜欢使用临时表的解决方案。

我选择通过从 PHP 发送的两个查询来解决这个问题 - 效果很好并且不需要维护*（免责声明：我使用 meekrodb 库进行数据库访问）*：

```
//get the data as an associative array
$row = DB::queryFirstRow("SELECT * FROM your_table WHERE id=%i",$id);
if ($row){
    unset($row["id"]); //unset the primary key
    DB::insert("your_table",$row);
    return DB::insertId();
} else {
    return false;
} 
```

您甚至可以在重新插入之前对内部数据执行更多操作（取消设置其他列以忽略、编辑值等）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-11T10:25:00.563

**PHP**中的另一种解决方案，用于在没有特定列/例如主键的情况下复制同一个表中的行 - 并且没有“临时表”和“从...显示列” - 方法：

```
$stmt = $db->prepare("select * from table where id = :id;");
$stmt->bindValue(':id', $_GET['id'], PDO::PARAM_INT);
$stmt->execute();
$row = $stmt->fetch(PDO::FETCH_ASSOC);
unset($row['id']);      //remove primary key

$columns = array_keys($row);
$query = "insert into table (`".implode('`, `', $columns)."`) select `".implode('`, `', $columns)."` from  data_ticket_serie where id = ".$_GET['id'].";";
// echo $query;
$stmt = $db->prepare($query);
$stmt->execute(); 
```

INSERT 是一个 SELECT 语句，因此值在语句中不是直接的——>“real_escape_string”或类似的东西没有问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-26T14:29:22.767

对于有很多列的表，我使用类似于 Phius 想法的（是的，慢）方法。
我把它放在这里只是为了完整。

假设，表 'tbl' 有一个 'id' 定义为

> id INT NOT NULL AUTO_INCREMENT PRIMARY KEY

然后，您可以按照以下步骤克隆/复制一行：

1.  创建一个 tmp 表

> 创建临时表 tbl_tmp LIKE tbl;

1.  插入一个或多个要克隆/复制的条目

> INSERT INTO tbl_tmp SELECT * FROM tbl WHERE ...;

1.  从 'id' 中删除 AUTOINCREMENT 标签

> ALTER TABLE tbl_tmp 修改 id INT；

1.  删除主索引

> ALTER TABLE tbl_tmp 删除主键；

1.  更新您的唯一索引并将“id”设置为 0（第 6 步需要 0。才能工作）

> 更新 tbl_tmp SET unique_value=?,id=0;

1.  将修改后的行复制到“tbl”中，并自动生成“id”。

> 插入 tbl SELECT * FROM tbl_tmp;

1.  清理（​​或只是关闭数据库连接）

> 删除表 tbl_tmp;

如果您还需要克隆/复制其他表中的一些依赖数据，请对每一行执行上述操作。在第 6 步之后，您可以获得最后插入的键，并使用它使用相同的过程克隆/复制其他表中的相关行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-20T16:40:05.250

我很惊讶没有人提到使用 phpMyAdmin 创建查询。因为这样可以快速添加所有列，然后您只需将 id 设置为 null 或 o，如 wlf 上面提到的。

这是迄今为止最简单的方法

```
INSERT INTO users SELECT 0,email,user FROM users WHERE id=10 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-08T10:47:48.677

我最近不得不做类似的事情，所以我想我发布了适用于任何尺寸表的解决方案，包括示例。它只需要一个配置数组，可以调整到几乎任何大小的表。

```
$copy_table_row = array(
    'table'=>'purchase_orders',     //table name
    'primary'=>'purchaseOrderID',   //primary key (or whatever column you're lookin up with index)
    'index'=>4084,                  //primary key index number
    'fields' => array(
        'siteID',             //copy colunm
        ['supplierID'=>21],   //overwrite this column to arbirary value by wrapping it in an array
        'status',             //copy colunm
        ['notes'=>'copied'],  //changes to "copied"
        'dateCreated',        //copy colunm
        'approved',           //copy colunm
    ),
);
echo copy_table_row($copy_table_row);

function copy_table_row($cfg){
    $d=[];
    foreach($cfg['fields'] as $i => $f){
        if(is_array($f)){
            $d['insert'][$i] = "`".current(array_keys($f))."`";
            $d['select'][$i] = "'".current($f)."'";
        }else{
            $d['insert'][$i] = "`".$f."`";
            $d['select'][$i] = "`".$f."`";
        }
    }
    $sql = "INSERT INTO `".$cfg['table']."` (".implode(', ',$d['insert']).")
        SELECT ".implode(',',$d['select'])."
        FROM `".$cfg['table']."`
        WHERE `".$cfg['primary']."` = '".$cfg['index']."';";
    return $sql;
} 
```

这将输出如下内容：

```
INSERT INTO `purchase_orders` (`siteID`, `supplierID`, `status`, `notes`, `dateCreated`, `approved`)
SELECT `siteID`,'21',`status`,'copied',`dateCreated`,`approved`
FROM `purchase_orders`
WHERE `purchaseOrderID` = '4084'; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-23T22:24:18.057

假设表格是`user(id,email,user)`并且因为您有一个`WHERE`不能使用的子句`MAX(id)+1`：

```
INSERT INTO users SELECT 0,email,user FROM users WHERE id=10 
```

请记住，使用 INSERT 时应始终指定列名。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-01-24T14:04:56.837

我想在我的事件表中复制一行，发现 Mark 的解决方案非常有帮助。我把它缩短了一点。

```
public static function getColumnsOfTable($table,  $arr_exclude_cols=array()) {
    global $obj_db;

    $cols = array();
    $result = $obj_db->query("SHOW COLUMNS FROM `".$table."`");

    while ($r = $result->fetch_array(MYSQLI_ASSOC)) {
        if (!in_array($r["Field"], $arr_exclude_cols)) { 
            $cols[] = $r["Field"];
        }
    }

    return $cols;
} 
```

和复制代码：

```
$cols = Utils::getColumnsOfTable('events', array('event_id'));

    $result1 = $obj_db->query('SELECT * FROM `events` WHERE `event_id` = '.$event_id);
    $arr_event = mysqli_fetch_array($result1, MYSQLI_NUM);
    unset($arr_event[0]);

    $insertSQL =  'INSERT INTO `events` (`' . implode('`, `',$cols) . '`) VALUES ("'. implode('","', $arr_event).'")'; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-28T21:31:22.117

这是复制任何表的记录的通用函数：

```
/**
 * @param string $table         Name of table
 * @param array $primaryKey     Which record should be copied? array('nameOfColumnWithUniqueId' => "value")
 * @param array $excludeFields  Which columns should not be copied (e.q. Unique Cols)
 * @param string $database      Name of database
 * @return int                  ID of new inserted record
 */
function copyMysqlRow($table, $primaryKey, $excludeFields = array(), $database = "usr_web3_2")
{
    $field = key($primaryKey);
    $value = current($primaryKey);
    $sql = "
        SELECT
            *
        FROM
            $database.$table
        WHERE
          $field = '$value'
    ";

    $result = mysql_query($sql);
    $row = mysql_fetch_assoc($result);

    $cols = array();
    $values = array();
    foreach ($row AS $col=>$value) {
        if (!in_array($col, $excludeFields)) {
            $cols[] = "`" . $col . "`";
            $values[] = $value === null ? 'null' : "'" . $value . "'";
        }
    }

    $sql = sprintf(" INSERT INTO $database.$table (%s) VALUES  (%s) ", implode($cols, ','), implode($values, ','));

    mysql_query($sql);

    return mysql_insert_id();
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-12T07:04:48.973

最简单的只是使记录的重复值

```
INSERT INTO items (name,unit) SELECT name, unit FROM items WHERE id = '9198' 
```

或者通过添加一些列值的新/更改值来复制记录的值，例如“是”或“否”

```
INSERT INTO items (name,unit,is_variation) SELECT name, unit,'Yes' FROM items WHERE id = '9198' 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-16T20:23:14.800

我使用这个...它删除了 temp_tbl 上的主键列，因此重复 ID 没有问题

```
CREATE TEMPORARY TABLE temp_tbl SELECT * FROM table_to_clone;
ALTER TABLE temp_tbl DROP COLUMN id;
INSERT INTO table_to_clone SELECT NULL, temp_tbl.* FROM temp_tbl;
DROP TABLE temp_tbl; 
```

# c# - HttpWebRequest.GetResponse() 抛出“错误请求”400 错误

> ID：11660947
> 
> 赞同：1
> 
> 时间：2012-07-26T01:04:12.483
> 
> 标签：c#, .net-4.0, httpwebrequest, httpwebresponse, bad-request

以下是带有（更改的实际 URL 和凭据）的示例代码

```
ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback((object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) => { return true; }); 

var requestUri = new Uri("https://example.com/path1/path2?var=somevar");

byte[] data = Encoding.UTF8.GetBytes("DEV72*12/27/06*TAYLOR*RICH*JOE*10/28/56*U0999495102*466666666*01*TAYLOR*TAMMY*M*10/26/52***CIGNA HMO*62308*UPIN*MEDICAL CENTER**MESSAGE*M*F*30");
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(requestUri);
request.PreAuthenticate = true;
request.UseDefaultCredentials = false;
request.Credentials = new NetworkCredential("UUUSSSEEERR", "PASSWORD");
request.ContentLength = data.Length;
request.ContentType = "text/plain";
request.Method = "POST";

using (Stream stream = request.GetRequestStream())
{
   stream.Write(data, 0, data.Length);
   stream.Flush();
}

StreamReader streamReader = null;

string result;
try
{
   streamReader = new StreamReader(request.GetResponse().GetResponseStream());
   result = streamReader.ReadToEnd();
}
finally
{
   streamReader.Close();
}

txtOutput.Text = result; 
```

它总是在第一次运行时抛出错误的请求异常，但是当我将调试器中的光标移回第一行时，它可以正常工作并在 txtOutput.text 中给出正确的响应，并且在分离的应用程序中给出相同的行为，第一次它抛出异常但第二次它可以工作好的，有人可以给我一些工作或让我知道我在这里做错了什么。使用.net 4.0。

**更新：**

例如，下面的代码对我有用，但这不是我正在寻找的解决方法

```
var requestUri = new Uri("https://example.com/path1/path2?var=somevar");

ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback((object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) => { return true; }); 

byte[] data = Encoding.UTF8.GetBytes("DEV72*12/27/06*TAYLOR*RICH*JOE*10/28/56*U0999495102*466666666*01*TAYLOR*TAMMY*M*10/26/52***CIGNA HMO*62308*UPIN*MEDICAL CENTER**MESSAGE*M*F*30");
HttpWebRequest request = null;  
int counter = 0;
do
{
    request = (HttpWebRequest)WebRequest.Create(requestUri);

    request.PreAuthenticate = true;
    request.UseDefaultCredentials = false;
    request.Credentials = new NetworkCredential("USERNAME", "password");
    request.ContentLength = data.Length;
    request.ContentType = "text/plain";
    request.Method = "POST";

    using (Stream stream = request.GetRequestStream())
    {
        stream.Write(data, 0, data.Length);
        stream.Flush();
    }

    StreamReader streamReader = null;

    string result = string.Empty;
    try
    {
        streamReader = new StreamReader(request.GetResponse().GetResponseStream());
        result = streamReader.ReadToEnd();
    }
    catch (WebException ex)
    {
        HttpWebResponse response = (HttpWebResponse)ex.Response;
        if (response.StatusCode == HttpStatusCode.BadRequest)
        {
            counter++;
        }
        else
        {
            txtOutput.Text = ex.ToString();
        }
    }
    finally
    {
        if(streamReader != null) streamReader.Close();
    }

    txtOutput.Text = result;

} while (counter == 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:06:49.063

一个流。关闭（）；在 stream.Flush() 之后；可能会有所帮助

# javascript - 动态更改 json 文件的值

> ID：11660950
> 
> 赞同：0
> 
> 时间：2012-07-26T01:04:41.720
> 
> 标签：javascript, google-maps-api-3

我必须通过添加 0.035 来调整我的 Json 文件的所有纬度点（超过一千个）。我怎样才能动态地做到这一点？

**更新**

我真的不是开发专家，所以我尝试在 UltraEdit 中打开 json 文件并使用如下脚本：

```
UltraEdit.activeDocument.top();
var latToChange = 48+".";
latToChange = parseInt(latToChange);
var n;
for (n = 0; n < 1115; n++) {
  if (latToChange) {
   latToChange = latToChange + 0.035;
 } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:16:14.653

迭代您的 JSON 对象并将每个 lat 值增加 0.035。

此答案概述了如何使用纯 javascript 迭代 JSON 对象：

[https://stackoverflow.com/a/684692/187954](https://stackoverflow.com/a/684692/187954)

```
for (var key in p) {
  if (p.hasOwnProperty(key)) {
    alert(key + " -> " + p[key]);
  }
} 
```

# linux - 确定 UNIX 别名的定义位置

> ID：11660962
> 
> 赞同：7
> 
> 时间：2012-07-26T01:07:32.430
> 
> 标签：linux, bash, shell, unix

即使命令是别名，是否有（某种）可靠的方法来获取命令的“来源”？例如，如果我把它放在我的 .bash_profile

```
alias lsa="ls -A" 
```

我想从命令行知道在哪里`lsa`定义，这可能吗？我知道这个`which`命令，但这似乎并没有。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T01:12:01.950

正如卡尔在他的评论中指出的那样，这`type`是找出名称是如何定义的正确方法。

```
mini:~ michael$ alias foo='echo bar'
mini:~ michael$ biz() { echo bar; }
mini:~ michael$ type foo
foo is aliased to `echo bar'
mini:~ michael$ type biz
biz is a function
biz () 
{ 
    echo bar
}
mini:~ michael$ type [[
[[ is a shell keyword
mini:~ michael$ type printf
printf is a shell builtin
mini:~ michael$ type $(type -P printf)
/usr/bin/printf is /usr/bin/printf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T20:04:55.723

虽然`type`并且`which`会告诉您来源，但他们不会在几个步骤中查找。我为此写了一个小程序：[origin](https://github.com/atorstling/origin "起源")。一个例子：

```
alext@smith:~/projects/origin$ ./origin ll
'll' is an alias for 'ls' in shell '/bin/bash': 'ls -alF'
'ls' is an alias for 'ls' in shell '/bin/bash': 'ls --color=auto'
'ls' found in PATH as '/bin/ls'
'/bin/ls' is an executable
alext@smith:~/projects/origin$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T08:54:54.533

此函数将提供有关它是什么类型的命令的信息：

```
ft () {
    t="$(type -t "$1")";
    if [ "$t" = "file" ]; then
        if which -s "$1"; then
            file "$(which "$1")"
        else
            return 1
        fi
    else
        echo $t
    fi
    return 0
} 
```

它要么吐出`builtin`,`alias`等，像`/bin/ls: Mach-O 64-bit x86_64 executable`文件一样的一行，或者如果不存在则什么都不存在。在最后一种情况下，它将返回错误。

# c# - 报告类和线程之间后台工作者的进度

> ID：11660963
> 
> 赞同：-1
> 
> 时间：2012-07-26T01:07:36.667
> 
> 标签：c#, wpf, progress-bar, backgroundworker

下面是我拥有的一个类的代码，它处理与串行设备的连接和交互。我从另一个类调用连接函数，如下所示。我的问题是：更新我的进度条的最佳方法是什么，它位于与我初始化后台工作人员不同的类上？我遇到了问题，因为我正在尝试更新跨线程和跨类的内容。将表单类作为参数传递给我的连接函数是可行的，但是我必须通过后台工作者和报告进度函数传递它；它只是凌乱和不干净。有一个更好的方法吗？任何帮助表示赞赏并提前感谢。

我从中调用连接函数的类（也是我的 WPF 类）：

```
public partial class agentRadio : Window
{
    private void connectButton_Click(object sender, RoutedEventArgs e) //Connect button clicked
    {
        agentradioread.connect((string)portsOpen.SelectedValue, this);
    }
} 
```

处理我的串行交互的类：

```
class agentRadioRead //Handles connection and reading of device values
{
    /*Local variable declarations*/
    SerialPort agentSerial;
    BackgroundWorker connectWorker;

    string resultMessage = "Error: The connect function has completed without setting this status message properly.";
    byte[] data = new byte[2246];

    /*Public methods*/

    public void connect(string selectedPort, agentRadio agentR) //Connects device, reads values, stores values, displays status message
    {
        agentSerial = new SerialPort(selectedPort, 9600, Parity.None, 8, StopBits.One);
        connectWorker = new BackgroundWorker();
        //connectWorker.WorkerReportsProgress = true;
        connectWorker.DoWork += new DoWorkEventHandler(initialRead);
        //connectWorker.ProgressChanged += new ProgressChangedEventHandler(reportProgress);

        connectWorker.RunWorkerAsync(agentR);
    }

    /*Private methods*/

    void initialRead(object sender, DoWorkEventArgs e)
    {
        agentSerial.Open();
        agentSerial.BaseStream.Flush();

        byte[] result = new byte[7];
        byte questionMark = 63;
        agentSerial.BaseStream.WriteByte(questionMark);

        System.Threading.Thread.Sleep(100);
        agentSerial.BaseStream.Read(result, 0, 7);

        string system = "";
        foreach (byte letter in result)
        {
            system += Convert.ToChar(letter).ToString();
        }

        bool read = readPort();

        if (read)
        {
            int i = 1;
            foreach (byte value in data)
            {
                storeData(i, value);
                i++;
            }
        }

        MessageBox.Show(resultMessage, "Status Message", MessageBoxButton.OK, MessageBoxImage.Information);
    }

    bool readPort()
    {
        bool succesfulRead = false;

        agentSerial.BaseStream.Flush();
        agentSerial.BaseStream.Write(Global.READ_VALUES, 0, Global.READ_VALUES.Length); //begin read values

        byte key = (byte)agentSerial.BaseStream.ReadByte();

        if (Global.START_COMMAND == key) //Verify continue key
        {
            for (int i = 0; i < 2246; i++) //Loop through values
            {
                try
                {
                    data[i] = (byte)agentSerial.BaseStream.ReadByte();
                    agentSerial.BaseStream.Write(Global.GO_AHEAD, 0, Global.GO_AHEAD.Length);
                    agentSerial.BaseStream.Flush();
                }
                catch
                {
                    resultMessage = "An error occured, while reading the device settings." + i;
                    break;
                }
            }
            if (data[2245] != Global.FINISH_COMMAND)
            {
                resultMessage = "An error occured, while reading the device settings." + 2245;
            }
            else
            {
                succesfulRead = true;
            }
        }
        else //Key failed and displays error
        {
            resultMessage = "An error occured, are you sure you are trying to connect to an Agent (Radio Version)? If so make sure you have followed the steps listed above.";
        }

        return succesfulRead;
    }

    void storeData(int iteration, byte value)
    {
        if (iteration > 0 && iteration < 385) //read schedule
        {
            double pos = (iteration - 1) / 48;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1) - (i * 48);

            Create.schedule[i, j] = value;
        }

        if (iteration > 384 && iteration < 1285) //read alarm history
        {
            double pos = (iteration - 385) / 9;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 385) - (i * 9);

            Create.alarms[i, j] = value;
        }

        if (iteration > 1284 && iteration < 1345) //read error log
        {
            double pos = (iteration - 1285) / 6;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1285) - (i * 6);

            Create.errors[i, j] = value;
        }

        if (iteration > 1344 && iteration < 1945) //read voltage history
        {
            double pos = (iteration - 1345) / 6;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1345) - (i * 6);

            Create.voltage[i, j] = value;
        }

        if (iteration > 1944 && iteration < 1973) //read holidays
        {
            Create.holidays[iteration - 1945] = value;
        }

        if (iteration > 1972 && iteration < 2168) //read message sequences
        {
            double pos = (iteration - 1973) / 15;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1973) - (i * 15);

            Create.messages[i, j] = value;
        }

        if (iteration > 2167 && iteration < 2196) //read message info
        {
            Create.recordings[iteration - 2168] = value;
        }

        if (iteration > 2195 && iteration < 2246) //read sysval
        {
            Create.sysval[iteration - 2196] = value;
        }

        if (iteration == 2246 && value == Global.FINISH_COMMAND)
        {
            if (Global.restoring)
            {
                resultMessage = "Your device has been succesfully restored.";
            }
            else
            {
                resultMessage = "Your device has been succesfully connected, and all settings have been loaded from the device.";
            }
        }
        else
        {
            resultMessage = "An error occured, while reading the device settings." + "Storing";
        }
    }

    void reportProgress(object sender, ProgressChangedEventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:30:01.630

我会反过来做。在 agentRadio 窗口中初始化工作线程。
在 agentRadioRead 类中具有与设备交互相关的所有功能。
从中取出所有引用表单窗口的代码。创建此 agentRadioRead 类的对象并将其传递给工作线程。使用 workerthread 的 reportprogress 事件向 agentRadio 窗口报告状态变化。让 agentRadio 中的事件处理程序执行任何 UI 更新。

# session - Sitecore 与另一个用户切换用户会话

> ID：11660964
> 
> 赞同：1
> 
> 时间：2012-07-26T01:08:07.403
> 
> 标签：session, asp.net-membership, sitecore, session-state, sitecore6

我有一个使用 Sitecore 的 FBA 站点。每隔一段时间，它就会将一个用户与另一个用户混淆。我的意思是，用户 A 会以某种方式无意中劫持用户 B 的会话。用户 A 将查看 a) 他们无权查看的页面，这是 b) 为用户 B 定制的页面。有一次我能够重现（意外），我在单击后恢复了原始会话通过到另一个页面。

我知道 Sitecore 利用了 Aspnet 会员数据库，所以这可能是该数据库的问题，但我真的无法猜测。感觉更像是一个会话问题而不是其他任何事情。此外，这不是在集群上发生，而是在独立机器上发生。

无论如何，任何信息——甚至是理论——都可以提供帮助。我想我以前从未见过这样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T07:27:57.947

很久以前我有一个类似的问题。原来有一个静态（共享）方法来检索用户（或会话）。这不是一个 Sitecore 错误，而是一个糟糕的实现......完全不确定这是您的问题，但可能值得检查用于访问用户的字段或方法是否被共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:01:31.530

我见过下面描述的类似问题

1.  您以登录的 Extranet 用户的身份查看该站点 - Sitecore 很乐意为您执行此操作
2.  您在浏览器中打开一个新选项卡并登录到 Sitecore 后端
3.  Sitecore 将您切换为 Sitecore 用户
4.  您单击返回并浏览网站 - Sitecore 现在使用 Sitecore 用户浏览网站的前端

那么可能是您（或某人在不同的选项卡中作为单独的外联网用户登录？）

# wordpress - 我的 WordPress 网站上的 .htaccess（和重定向链接）在移动设备上不起作用

> ID：11660965
> 
> 赞同：0
> 
> 时间：2012-07-26T01:08:08.357
> 
> 标签：wordpress, .htaccess, redirect, mobile, rewrite

我的网站（使用 WordPress）有一个位于根区域的 .htaccess 文件，其中包含重写规则/条件以重定向某些链接。它们在使用计算机时工作得很好，但是当我尝试通过我的 BlackBerry 移动设备访问这些相同的页面时，我得到了错误。

当我尝试在我的移动设备上访问我的重定向页面时，我收到此错误：“HTTP 错误 403：禁止访问。您无权查看此页面。请尝试加载其他页面。”

您可以通过在此处查看代码来查看我的 .htaccess 文件的外观：http: [//jsfiddle.net/GhW4G/](http://jsfiddle.net/GhW4G/)。

我是否需要在 .htaccess 文件中添加其他代码，以便移动用户可以像计算机用户一样查看页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:25:04.070

除了大尺寸之外，您的 .htaccess 文件对我来说看起来还不错。

谷歌告诉我，黑莓上的 403 错误是半常见的。尝试清除黑莓的缓存？

[如何清除 BlackBerry 智能手机上的 BlackBerry Browser 缓存](http://btsc.webapps.blackberry.com/btsc/viewdocument.do?externalId=KB03865&sliceId=2&cmd=displayKC&docType=kc&noCount=true&ViewedDocsListHelper=com.kanisa.apps.common.BaseViewedDocsListHelperImpl)

# java - 如何在 Java 程序中处理 Java 类文件的无符号类型（尤其是 u4）？

> ID：11660967
> 
> 赞同：1
> 
> 时间：2012-07-26T01:08:13.763
> 
> 标签：java, jvm, bytecode, unsigned

来自[Java 虚拟机规范](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html)：

> 一个`class`文件由一个 8 位字节流组成。所有 16 位、32 位和 64 位量都是通过分别读取两个、四个和八个连续的 8 位字节来构造的。多字节数据项始终以大端顺序存储，高字节在先。`java.io.DataOutput`在 Java 平台中，接口 java.io.DataInput 和java.io.DataInputStream 和 java.io.DataOutputStream 等类都支持这种格式。
> 
> 本章定义了自己的一组表示`class`文件数据的数据类型：类型`u1`、`u2`和`u4`分别表示无符号的一、二或四字节数量。在 Java 平台中，这些类型可以通过接口的`readUnsignedByte`、`readUnsignedShort`、 和等方法读取。`readInt``java.io.DataInput`

除了提到“64 位数量”（没有`u8`、[long 和 double](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.5)分为两个`u4`项目）之外，我不明白如何处理该`u4`类型。

很`u1`明显`u2`：

*   `u1`: 读取`readUnsignedByte`，存储在`int`
*   `u2`: 读取`readUnsignedShort`，存储在`int`

该规范建议这样做：

*   `u4`: 读取`readInt`，存储在`int`(?)

大于 的值会发生什么[`Integer.MAX_VALUE`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE)？这个建议是否暗示所有类型的值`u4`都小于或等于`Integer.MAX_VALUE`？

我想出了这个主意：

*   `u4`: 读取`readUnsignedInt`，存储在一个`long`

不幸的是，[没有这样的方法](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4077352)。但这不是问题，因为您可以轻松编写自己的：

```
public long readUnsignedInt() throws IOException {
    return readInt() & 0xFFFFFFFFL;
} 
```

所以，这里有两个值得怀疑的地方：

1.  代码[属性](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.3)：

    > Code_attribute {
    > ...
    > u4 code_length;
    > u1 代码[code_length];
    > ...
    > }

    为什么`code_length`不是类型`u2`？[后来它说](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.9.1)：

    > 该`code_length`项目的值必须小于 65536。

2.  SourceDebugExtension[属性](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.11)：

    > SourceDebugExtension_attribute {
    > ...
    > u4 attribute_length;
    > u1 debug_extension[attribute_length];
    > ...*请注意，该*
    > 数组*表示的字符串可能比用 class 的实例表示的字符串长**。*
    > *`debug_extension``String`*

    为什么？值确实可以`u4`超过`Integer.MAX_VALUE`（因为我认为这是`String`实例的最大长度）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:01:37.930

1.  如果需要，可以轻松解除 64K 代码长度限制。
2.  由于没有提到 u4 值不能超过 Integer.MAX_VALUE，因此必须假设 u4 值可以超过 Integer.MAX_VALUE。JVM 规范没有隐含任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T18:06:35.593

如果你想有效地处理类文件，你不应该把太多的资源浪费在纯粹的假设上。正如您自己所注意到的，代码数组的大小指定为`u4`，但实际支持的值仅限于`u2`. 同样，所有其他`u4`大小值都受到隐式限制，如果您认为将类文件获取到 JVM 的唯一官方支持的方法是基于[数组](https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html#defineClass-java.lang.String-byte:A-int-int-java.security.ProtectionDomain-)或[a`ByteBuffer`](https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html#defineClass-java.lang.String-java.nio.ByteBuffer-java.security.ProtectionDomain-)，两者都被限制为`int`表示其总大小的有符号。

即使有办法将更大的类文件放入 JVM，也有其他部分，[如 Instrumentation API](https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/ClassFileTransformer.html#transform-java.lang.ClassLoader-java.lang.String-java.lang.Class-java.security.ProtectionDomain-byte:A-)，期望将类转换回普通数组的可能性。即使未来的 JVM 真正支持更大的类文件，通过使用新缓冲区类型的替代方案来扩充所有 API，您今天编译的应用程序也仅限于今天的 API 和缓冲区类型。

因此，如果类文件的*总*大小本质上被限制为最大有符号数`int`，即`2³¹`字节，则无需考虑类文件的*一部分*（如一个属性）大于该值的可能性。虽然您可以使用如此庞大的属性形成理论上正确的类文件，但即使 JVM 本身也不支持它。这种场景也没有现实生活的相关性。

因此，如果问题不是如何处理它们，问题是如何正确拒绝它们。如果您要处理一个文件，它确实可能有多个`Integer.MAX_VALUE`字节，如果您要将文件读入缓冲区以进行进一步处理，则无论如何您都必须考虑这一点。然后，在做任何其他事情之前检查大小并抛出一个`UnsupportedOperationException`是合适的。在 32 位 JVM 上，即使抛出 an`OutOfMemoryError`也是合适的，因为任何真正尝试缓冲该文件的内容都会以这种方式结束。

如果文件小于`Integer.MAX_VALUE`或您通过 API 接收类文件，该 API 本质上将类文件限制为小于该值，例如通过传递数组 or `ByteBuffer`，您可以继续并认为每个`u4`大小值大于`Integer.MAX_VALUE`无效，因为它表示比类文件本身更大的大小。您不需要特殊的`readUnsignedInt`方法，因为`int`两者`u4`具有相同的大小，您只需正确*解释*该值即可整理出有效正`int`范围之外的值。

使用 Java 8，这尤其容易：

```
int codeSize=bytebuffer.getInt();
if(Integer.compareUnsigned(codeSize, 65536)>0)
    throw new IllegalArgumentException(
        "invalid code size "+Integer.toUnsignedString(codeSize));
// carry on using the int value ordinarily 
```

对于早期版本，您可能会认为`u4`大于 的值`Integer.MAX_VALUE`在解释为时会显示为负数`int`：

```
int codeSize=bytebuffer.getInt();
if(codeSize<0 || codeSize>65536)
    throw new IllegalArgumentException("invalid code size "+(codeSize&0xFFFFFFFFL));
// carry on using the int value ordinarily 
```

同样，处理其他`u4`大小值：

```
int size=bytebuffer.getInt();
// ByteBuffer can't be bigger than Integer.MAX_VALUE bytes:
if(size<0) throw new IllegalArgumentException(
    "truncated class file (attribute size "+(size&0xFFFFFFFFL)+')');
// carry on using the int value ordinarily 
```

# java - Jsoup获取两个标签之间的html

> ID：11660976
> 
> 赞同：3
> 
> 时间：2012-07-26T01:09:40.243
> 
> 标签：java, html, wiki, jsoup

在像[http://wikitravel.org/en/San_Francisco](http://wikitravel.org/en/San_Francisco)这样的网站上，“Districts”、“Understand”、“Get in”等部分实际上并不包含 HTML 中的整个部分。节实际上只是标题中的跨度类。因此，不能仅通过选择 id 来获取 wiki 文档的某些部分。

但是，是否可以收集两个标签之间的所有 html？假设我想要“绕过”部分。我将如何发出一个选择器说所有 html 之间

```
<h2><span class="editsection">[<a href="/wiki/en/index.php?title=San_Francisco&amp;action=edit&amp;section=15" title="Edit section: Get around">edit</a>]</span> <span class="mw-headline" id="Get_around">Get around</span></h2> 
```

和

```
<h2><span class="editsection">[<a href="/wiki/en/index.php?title=San_Francisco&amp;action=edit&amp;section=22" title="Edit section: See">edit</a>][<a href="#See" title="click to add a see listing" onclick="addListing(this, '22', 'see', 'San_Francisco');">add listing</a>]</span> <span class="mw-headline" id="See">See</span></h2> 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:14:22.710

哎哟。该 HTML 不是很容易使用。我认为您可能正在做一些抓取，所以我知道有时这就是我们所处理的很多事情。你标记了这个[jsoup](/questions/tagged/jsoup "显示标记为“jsoup”的问题")，所以我会尝试一下。通常没有选择器可以处理像这样相当非结构化的 HTML。您可以做的是选择第一个 h2 的所有下一个兄弟姐妹，然后删除第二个 h2 的所有下一个兄弟姐妹。更麻烦的是，我们只能通过文本内容来识别节标题，因此我们需要使用`:contains`选择器。像这样：

```
Document doc = Jsoup.connect("http://wikitravel.org/en/San_Francisco").get();
//select all "next siblings" of the "Get around" h2
Elements section = doc.select("h2:contains(Get around) ~ *");
//select all "next siblings" of the "See" h2 and remove them
section.select("h2:contains(See) ~ *").remove();
//remove the second h2
section.select("h2").remove();
//section now contains the elements between "Get around" and "See"
String sectionHtml = section.html(); 
```

这是使用 jQuery 执行相同操作后的一些 Firebug 输出：第一个选择器返回一个包含这些 Element 的 Elements 对象：

`[h3, p, p, p, p, h3, p, p, p, h3, div.thumb, div.thumb, p, ul, p, p, p, p, p, p, p, div.thumb, ul, ul, div.thumb, ul, ul, p, ul, ul, h3, p, p, p, h3, p, p, p, h3, p, p, p, p, p, p, h2, p, p, ul, ul, ul, h3, p, ul, h3, div.thumb, p, p, p, h3, div.thumb, p, p, p, p, p, h3, p, p, p, p, h3, div.thumb, p, p, p, p, p, h2, h3, div.thumb, p, p, p, p, p, ul, h3, div.thumb, ul, ul, ul, ul, ul, h3, p, h4, ul, h4, ul, h4, p, ul, h4, ul, h3, div.thumb, p, p, p, h3, p, h2, p, p, h2, p, p, p, h2, dl, p, p, p, p, h2, div.thumb, dl, p, p, p, h2, dl, h3, p, p, p, p, p, p, h3, p, ul, p, p, h2, dl, p, p, p, h2, p, p, p, p, h2, p, p, p, p, p, p, h2, p, p, p, p, h2, h3, ul, h3, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, ul, h2, p, p, ul, p, div.route_box, p, p, p, p, p, table, p, div, p, p, p, p]`

第一个`h3`说“导航”，最后一个`p`包含一个`<br>`（奇怪的 HTML，是的）。第二个选择和删除将其缩减为：

`[h3, p, p, p, p, h3, p, p, p, h3, div.thumb, div.thumb, p, ul, p, p, p, p, p, p, p, div.thumb, ul, ul, div.thumb, ul, ul, p, ul, ul, h3, p, p, p, h3, p, p, p, h3, p, p, p, p, p, p, h2]`

第一个`h3`仍然是“导航”，最后一个`h2`是您引用的“查看”。select("h2") 和 remove 导致：

`[h3, p, p, p, p, h3, p, p, p, h3, div.thumb, div.thumb, p, ul, p, p, p, p, p, p, p, div.thumb, ul, ul, div.thumb, ul, ul, p, ul, ul, h3, p, p, p, h3, p, p, p, h3, p, p, p, p, p, p]`

其中包含“Get around”`h2`和“See”之间的所有元素`h2`。

# html - 单击单选按钮时如何突出显示标签？

> ID：11660977
> 
> 赞同：3
> 
> 时间：2012-07-26T01:10:05.747
> 
> 标签：html, css

我想在单击单选按钮时突出显示它的标签，我找到[了答案](https://stackoverflow.com/questions/4641752/css-how-to-style-a-selected-radio-buttons-label)但不起作用。这是我的代码：

**HTML**

```
<div class="same-line">
    <input type="checkbox" name="417-jornadas-de-g%c3%a9nero-sin-fecha-confirmada" value="Sí" class="checkbox">
    <label class="checkbox">
    Jornadas de género (sin fecha confirmada)</label>
    <div class="clear-form"></div>
</div> 
<div class="same-line">
    <input type="checkbox" name="417-curso-de-fotograf%c3%ada-sin-fecha-confirmada" value="Sí" class="checkbox">
    <label class="checkbox">
    Curso de fotografía (sin fecha confirmada)</label>
    <div class="clear-form"></div>
</div> 
```

**CSS**

```
.same-line input[type='radio'] {
    display:none;
}

.same-line label[class='checkbox'] {
    display:inline-block;
        font-size: 12.2pt;
}

.same-line input[type='radio']:checked + label[class='checkbox'] { 
   background-color: #FFBF00 !important;
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T01:24:03.347

[http://jsfiddle.net/hekh8/](http://jsfiddle.net/hekh8/)

```
input[type="radio"]:checked+label{ background-color: #FFFF00; } ​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T01:23:16.060

HTML：

（我`id`在复选框上添加了属性，`for`在标签上添加了属性）

```
<div class="same-line">
    <input type="checkbox" name="417-jornadas-de-g%c3%a9nero-sin-fecha-confirmada" id="cb1" value="Sí" class="checkbox">
    <label class="checkbox" for="cb1">
    Jornadas de género (sin fecha confirmada)</label>
    <div class="clear-form"></div>
</div>
<div class="same-line">
    <input type="checkbox" name="417-curso-de-fotograf%c3%ada-sin-fecha-confirmada" id="cb2" value="Sí" class="checkbox">
    <label class="checkbox" for="cb2">
    Curso de fotografía (sin fecha confirmada)</label>
    <div class="clear-form"></div>
</div> 
```

CSS：

（我已将“收音机”更改为“复选框”）

```
.same-line input[type='checkbox'] {
    display:none;
}

.same-line label.checkbox {
    display:inline-block;
        font-size: 12.2pt;
}

.same-line input[type='checkbox']:checked + label.checkbox { 
   background-color: #FFBF00;
} 
```

**现场演示：http:** [//jsfiddle.net/PUcmA/1/](http://jsfiddle.net/PUcmA/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T01:26:13.270

**HTML**：

```
<div class="same-line">
    <input type="checkbox" id="checkbox1" name="417-jornadas-de-g%c3%a9nero-sin-fecha-confirmada" value="Sí" class="checkbox">
    <label for="checkbox1">
    Jornadas de género (sin fecha confirmada)</label>
    <div class="clear-form"></div>
</div> 
<div class="same-line">
    <input type="checkbox" id="checkbox2" name="417-curso-de-fotograf%c3%ada-sin-fecha-confirmada" value="Sí" class="checkbox">
    <label for="checkbox2">
    Curso de fotografía (sin fecha confirmada)</label>
    <div class="clear-form"></div>
</div> 
```

**CSS**：

```
.same-line input[type='checkbox'] {
    display:none;
}

.same-line label {
    display:inline-block;
        font-size: 12.2pt;
    background-color:#fff;
}

.same-line input[type='checkbox']:checked + label {
   background-color: #ddd;
} 
```

jsFiddle：http: [//jsfiddle.net/heZBT/](http://jsfiddle.net/heZBT/)

# rabbitmq - 使用rabbitmq发送消息不是字符串而是结构

> ID：11660979
> 
> 赞同：4
> 
> 时间：2012-07-26T01:10:09.217
> 
> 标签：rabbitmq

我阅读了教程，RabbitMQ 是一个消息代理，消息是一个字符串。是否知道消息被定义为类或结构？所以我可以定义我的消息结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T05:08:49.857

消息以字节流的形式发送，因此您可以将任何可序列化的对象转换为字节流并发送，然后在另一端进行反序列化。

将它放在消息对象中，并在消息发布时调用它：

```
 public byte[] toBytes() {
      byte[]bytes; 
      ByteArrayOutputStream baos = new ByteArrayOutputStream(); 
      try{ 
        ObjectOutputStream oos = new ObjectOutputStream(baos); 
        oos.writeObject(this); 
        oos.flush();
        oos.reset();
        bytes = baos.toByteArray();
        oos.close();
        baos.close();
      } catch(IOException e){ 
        bytes = new byte[] {};
        Logger.getLogger("bsdlog").error("Unable to write to output stream",e); 
      }         
      return bytes; 
    } 
```

把它放在消息对象中，并在消息被消费时调用它：

```
public static Message fromBytes(byte[] body) {
    Message obj = null;
    try {
        ByteArrayInputStream bis = new ByteArrayInputStream (body);
        ObjectInputStream ois = new ObjectInputStream (bis);
        obj = (Message)ois.readObject();
        ois.close();
        bis.close();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
    catch (ClassNotFoundException ex) {
        ex.printStackTrace();
    }
    return obj;     
} 
```

# android - ABS 片段在 onCreate 上崩溃

> ID：11660982
> 
> 赞同：0
> 
> 时间：2012-07-26T01:10:48.363
> 
> 标签：android, fragment, actionbarsherlock

我需要一些关于 ActionBar Sherlock 片段的帮助。

我对android编程很陌生，但我基本上遵循[http://goo.gl/Nikyg（stackoverflow](http://goo.gl/Nikyg) post）来创建我的片段，但是每次我尝试在android 2.2或4.0上运行时应用程序都会崩溃

谁能帮我？代码如下：

Mainactivity.java

```
package br.com.example.fragmented;

import android.os.Bundle;
import com.actionbarsherlock.app.SherlockFragmentActivity;

public class MainActivity extends SherlockFragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

布局文件activity_main

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <Spinner
        android:id="@+id/spinner2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <fragment class="br.com.example.fragment1"
        android:id="@+id/fragment1"
        android:name="com.actionbarsherlock.app.SherlockFragment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.85" />

</LinearLayout> 
```

片段1.java

```
package br.com.example.fragmented;

import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import com.actionbarsherlock.app.SherlockFragment;

public class fragment1 extends SherlockFragment{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i("First Fragment", "onCreate()");
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        Log.i("First Fragment", "onCreateView()");
        return inflater.inflate(R.layout.fragment1layout, container, false);
    }
} 
```

片段1布局.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="#000000">

    <Button android:text="Landscape" 
        android:id="@+id/button1"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content">

    </Button>

</LinearLayout> 
```

谁能指出我在这里错过了错误的地方？哦，顺便说一下，我已将主题设置为 Sherlock.Light 在 Manifest 上。

添加日志：

```
07-26 20:22:14.297: E/AndroidRuntime(401): FATAL EXCEPTION: main
07-26 20:22:14.297: E/AndroidRuntime(401): java.lang.RuntimeException: Unable to start activity ComponentInfo{br.com.example.fragmented/br.com.example.fragmented.MainActivity}: android.view.InflateException: Binary XML file line #17: Error inflating class fragment
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.os.Looper.loop(Looper.java:123)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-26 20:22:14.297: E/AndroidRuntime(401):  at java.lang.reflect.Method.invokeNative(Native Method)
07-26 20:22:14.297: E/AndroidRuntime(401):  at java.lang.reflect.Method.invoke(Method.java:521)
07-26 20:22:14.297: E/AndroidRuntime(401):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-26 20:22:14.297: E/AndroidRuntime(401):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-26 20:22:14.297: E/AndroidRuntime(401):  at dalvik.system.NativeStart.main(Native Method)
07-26 20:22:14.297: E/AndroidRuntime(401): Caused by: android.view.InflateException: Binary XML file line #17: Error inflating class fragment
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:582)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-26 20:22:14.297: E/AndroidRuntime(401):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:857)
07-26 20:22:14.297: E/AndroidRuntime(401):  at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251)
07-26 20:22:14.297: E/AndroidRuntime(401):  at br.com.example.fragmented.MainActivity.onCreate(MainActivity.java:12)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-26 20:22:14.297: E/AndroidRuntime(401):  ... 11 more
07-26 20:22:14.297: E/AndroidRuntime(401): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment br.com.example.fragment1: make sure class name exists, is public, and has an empty constructor that is public
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.support.v4.app.Fragment.instantiate(Fragment.java:395)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.support.v4.app.Fragment.instantiate(Fragment.java:363)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:264)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558)
07-26 20:22:14.297: E/AndroidRuntime(401):  ... 20 more
07-26 20:22:14.297: E/AndroidRuntime(401): Caused by: java.lang.ClassNotFoundException: br.com.example.fragment1 in loader dalvik.system.PathClassLoader[/data/app/br.com.example.fragmented-1.apk]
07-26 20:22:14.297: E/AndroidRuntime(401):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
07-26 20:22:14.297: E/AndroidRuntime(401):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
07-26 20:22:14.297: E/AndroidRuntime(401):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
07-26 20:22:14.297: E/AndroidRuntime(401):  at android.support.v4.app.Fragment.instantiate(Fragment.java:385)
07-26 20:22:14.297: E/AndroidRuntime(401):  ... 23 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:13:08.023

摆脱 xml 中的类属性，并使用您的片段名称作为名称属性，而不是 ABS。

# c# - 对返回类型感到困惑

> ID：11660996
> 
> 赞同：-1
> 
> 时间：2012-07-26T01:14:32.923
> 
> 标签：c#, io

您好，我正在尝试在 C# 中创建一个按钮，如果您按下它。它应该从附加的 txt 文件中生成一个关于 IP 地址是什么的消息框。但是我遇到了无法修复的错误。我想我的返回类型混淆了，我一直觉得这里是代码。

```
private String getIPAddress()
    {

        String x;

        using (TextReader configfile = File.OpenText("PC104Configs.txt"))
            while (configfile.Peek() > -1)  // If therre are no more characters in this line
            {
                x = configfile.ReadLine();

                if (x.Length == 0)
                {
                    // This is a blank line
                    continue;
                }

                if (x.Substring(0, 1) == ";")
                {
                    // This is a comment line
                    continue;
                }

                if (x == trueIP)
                {
                    // This is the real deal
                    testPort = configfile.ReadLine();
                    testIP = trueIP;
                    return MessageBox.Show(trueIP);
                }
            }  // End of 'while' there are more characters loop

        UnitToTest.Text = "";

        MessageBox.Show("Specified Configuration Not Found!");

        return (false);
    }

    private void btnSendConfig_Click(object sender, EventArgs e)
    {
        getIPAddress();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:18:08.717

一方面，您的“getIPAddress”函数应该返回一个字符串。但是，您让它返回一个布尔值 (false)。我认为你真的需要返回'X'。另外，我怀疑您是否真的想从 MessageBox.Show(trueIP) 返回结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T01:19:01.120

您正在从期望返回字符串的函数返回布尔值。因此，这：

```
private String 
```

..不允许返回，这个：

```
return (false); 
```

..或者

```
return MessageBox.Show(trueIP); 
```

..false 是布尔值，并且 Show() 方法返回一个 DialogResult，您的函数必须返回一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T01:18:45.383

您声明`getIPAddress`返回 a `String`，但随后您尝试返回 a`DialogResult`和 a `bool`。

听起来您需要更准确地定义`getIPAddress`应该做什么。函数签名意味着您将返回一个包含一个或多个 IP 地址的字符串（或一组字符串），但您的代码似乎想要做的是弹出一个带有找到的第一个 IP 地址的消息框。

# objective-c - iOS - TimeZone issue with difference between 2 NSDates

> ID：11660997
> 
> 赞同：0
> 
> 时间：2012-07-26T01:14:42.337
> 
> 标签：objective-c, nsdate, nscalendar, nsdatecomponents, nstimezone

I've been using NSCalendar and NSDateComponents to return the difference (in days) between 2 dates. Here's the code I'm using to get that.

```
NSCalendar *calendar = [NSCalendar currentCalendar];
calendar.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0];

NSDate *todayDate = [NSDate date];
NSDateComponents *comps = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) 
                                 fromDate:todayDate];
[comps setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

NSDate *today = [calendar dateFromComponents:comps];

NSDate *startDate = self.date;
NSDate *endDate =  today;
NSLog(@"startDate: %@",startDate);
NSLog(@"endDate: %@",endDate);

NSDateComponents *components = [calendar components:NSDayCalendarUnit
                                            fromDate:endDate
                                              toDate:startDate
                                             options:0];
[components setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

NSInteger days = [components day]; 
```

The weird part is that this works perfectly during the early part of the day, but once I reach around 6 or 7PM (I'm using Mountain Time, which is GMT -7 I think), it stops working correctly. Instead of a returning the correct difference, it returns the difference minus 1 day. so For example, it returns -1 instead of 0, or 1 instead of 2.

I'm guessing this is a time zone issue. Does anyone know how to fix it? I've tried setting the timeZone for my NSCalendar and the NSDateComponents to GMT, local and system, but none seem to work.

Any ideas?

Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:56:58.897

It looks like the code is not handling the fractional difference between days. For example, if the start date is yesterday at 11:59 PM and the end date is today at 12:01 AM, the code will report the difference as 0 days. If you consider that to be a 1 day difference, then the code needs to handle that case.

If you are selecting self.date with a date picker, self.date contains the date plus the current local time. At 6 or 7 PM your local time, it's midnight GMT (i.e., tomorrow WRT your local time), which causes the unexpected -1 in your difference calculation.