# StackOverflow 问答 10590000-10590999

# php - Exchange 2003 - 对公共日历文件夹的 LDAP 访问（通过 php）？

> ID：10590002
> 
> 赞同：4
> 
> 时间：2012-05-14T19:43:21.250
> 
> 标签：php, ldap, exchange-server-2003

是否可以通过 LDAP 访问 Exchange Server 2003 公共日历条目？

我目前正在使用 PHP 中的 LDAP 并针对登录的活动目录进行身份验证，但现在我需要访问交换服务器中的公共日历以读取其中的日历条目。

如果没有，您对我如何获取公共日历条目有任何其他建议吗？

# jsf - 如何处理 JSF 类中的资源？

> ID：10590003
> 
> 赞同：4
> 
> 时间：2012-05-14T19:43:21.357
> 
> 标签：jsf, properties, resources, classpath

我`src/main/resources`在我的 JSF 项目中放置了一个属性文件。

我该如何处理它？我知道 EL 在支持 bean 中不起作用。

**注意：**该文件位于`src/main/resources`- NOT`src/main/webapps/resources`中，因此以下内容不起作用：

```
FacesContext context = FacesContext.getCurrentInstance();
File value = context.getApplication().evaluateExpressionGet(context, "#{resource['resources:email.properties']}", File.class); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T19:49:50.673

它因此在类路径中。你可以用它[`ClassLoader#getResourceAsStream()`](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)来`InputStream`摆脱它。假设这`src`是类路径根并且`main/resources`是包：

```
InputStream input = Thread.currentThread().getContextClassLoader().getResourceAsStream("main/resources/foo.properties");
Properties properties = new Properties();
properties.load(input);
// ... 
```

或者，如果它应该是特定于 webapp 的，因此不应该被类路径中具有更高类加载优先级的同一路径上的文件覆盖（例如，在 appserver 的 lib 或 JRE 的 lib 中），然后使用[`ExternalContext#getResourceAsStream()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getResourceAsStream%28java.lang.String%29)反而。

```
InputStream input = FacesContext.getCurrentInstance().getExternalContext().getResourceAsStream("main/resources/foo.properties");
Properties properties = new Properties();
properties.load(input);
// ... 
```

至于`#{resource}`语法，这确实是专门针对放置在`/resources`公共 Web 内容文件夹中的 CSS/JS/image 资源的。另请参阅[如何在 Facelets 模板中引用 CSS / JS / 图像资源？](https://stackoverflow.com/questions/8367421/how-to-reference-css-js-image-resource-in-facelets-template)

# c# - 我的 linq 语句或 GetCollection 存在问题 ()

> ID：10590006
> 
> 赞同：4
> 
> 时间：2012-05-14T19:43:30.093
> 
> 标签：c#, asp.net-mvc-3, linq, mongodb-.net-driver

这是我的代码：这是提琴手使用的函数：

```
http://localhost:3334/Service/Login/?json={'username':'cara','password':'password'}

public ActionResult Login(JObject JSON)
{
    var response = JsonResponse.OKResponse();
    var username = JSON["username"].ToString();
    var password = JSON["password"].ToString();

    var helper = new MemberHelper();

    //goes into here and never returns
    if (helper.ValidateUser(username, password))
    {
        MongoCollection<User> users = db.GetCollection<User>();
        var usr = users.FindAll().FirstOrDefault(u => u.UserName.Equals(username));
        response.data.Add(usr);
    }
    else
    {
        return Json(JsonResponse.ErrorResponse("Invalid username or password provided!"), JsonRequestBehavior.AllowGet);
    }

    return Json(response, JsonRequestBehavior.AllowGet);
} 
```

MemberHelper 中的 validateUser 方法：

```
public override bool ValidateUser(string username, string password)
{
    var hash = Encoding.ASCII.GetBytes(password);
    var provider = new SHA256CryptoServiceProvider();
    for (int i = 0; i < 1024; i++) // 1024 round SHA256 is decent
         hash = provider.ComputeHash(hash);
    var pass = Convert.ToBase64String(hash);

    MongoCollection<User> users = db.GetCollection<User>();

    //***The following statement is where the program just stops***    
    var usr = users.FindAll().FirstOrDefault(u => u.UserName.Equals(username) && u.Password.Equals(pass));
   ...
} 
```

和getCollection....

```
public MongoCollection<T> GetCollection<T>(string name = null)
{
    string collectionName = name; 
    if (collectionName == null) { 
        collectionName = typeof(T).Name; 
    }
    return Database.GetCollection<T>(collectionName); 
} 
```

我真的不知道出了什么问题。我是 linq 的新手，所以我不确定我是否违反了一些黄金法则。请帮忙！让我知道是否还有其他需要添加的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:53:06.767

您也可以将其更改为类似

```
var usr = users.AsQueryable().Where(u => u.UserName.Equals(username)).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:09:29.533

问题确实在 GetCollection<>() 方法中，一旦我用以下代码替换它，它就可以正常工作：

```
public MongoCollection<T> GetCollection<T>(string name = null)
        {
            string collectionName = name;
            if (collectionName == null)
                collectionName = typeof(T).Name;
            if (Database.CollectionExists(collectionName) == false)
                Database.CreateCollection(collectionName);
            return Database.GetCollection<T>(collectionName);
        } 
```

# javascript - 如何将 javascript/jquery 函数从一个 html 页面传递到另一个

> ID：10590007
> 
> 赞同：0
> 
> 时间：2012-05-14T19:43:51.197
> 
> 标签：javascript, jquery, html, css, hyperlink

我有这个页面[文章](http://agencystudy.com/eic/microsites/microsites-02/articles.html)

在此页面中，左侧有导航链接，右侧有内容加载。

```
function showonlyone(thechosenone) {
 $('div[name|="newboxes"]').each(function(index) {
      if ($(this).attr("id") == thechosenone) {
           $(this).show(200);
      }
      else {
           $(this).hide(600);
      }
 });
} 
```

我的导航看起来像这样

```
<ul>
        <li><a id="myHeader1" href="javascript:showonlyone('articles');" >ARTICLES</a></li>
        <li><a id="myHeader1" href="javascript:showonlyone('whitepapers');" >WHITE PAPERS</a></li>
        <li><a id="myHeader1" href="javascript:showonlyone('brochures');" >BROCHURES</a></li>
    </ul> 
```

我的内容在 div 中，如下所示

```
<div id="articles" name="newboxes" style="display:none;">
<div id="whitepapers" name="newboxes" style="display:none;">
<div id="brochures" name="newboxes" style="display:none;"> 
```

基本上这个页面，是一个内部页面。我有一个主页，我想有每个部分的链接，所以我想要的部分已经显示出来，所以用户不必再次点击。

知道我该怎么做吗？

感谢您的帮助，如果我没有使用正确的术语，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:56:29.480

如果我很好理解您的问题，请在“文章”页面上调用`showonlyone`函数

```
$(function() { // DOMready
   showonlyone('articles');
}); 
```

并为每个内部页面重复此代码，更改参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:17:18.740

我从您的问题中了解到的是..您
在主页上有链接..
当用户单击这些链接时，您希望在内部页面打开时已经打开该特定部分，
例如当用户单击“文章”然后在内部页面上的**文章 div**应该是可见
的，您必须 在主页上以下列方式 使用**哈希标签.. 为链接提供像这样的哈希标签**

```
http://agencystudy.com/eic/microsites/microsites-02/articles.html#articles 
```

然后在文档就绪事件的内部页面中

```
$(document).ready(function(){
 $(window.location.hash).show(200);
}); 
```

# django - Django：我应该将网页分成不同的应用程序吗？

> ID：10590013
> 
> 赞同：1
> 
> 时间：2012-05-14T19:43:57.670
> 
> 标签：django, project

我正在开发一个企业目录网站，它有

*   主页
*   搜索结果页面
*   列表页面

我目前处于设计阶段，有人建议将页面/功能分成不同的应用程序，例如。

*   家
*   搜索结果
*   清单

这是 Django 社区的最佳实践吗？或者你会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T20:07:23.563

不，这些听起来像是单个业务应用程序中的不同视图。

您绝对不希望每个 DetailView、ListView 或 SearchView 都有一个新应用程序。这很快就会变得混乱......

想想应用程序结构实际上做了什么：它添加了数据库数据库表前缀（appname_），拆分`models.py`文件并鼓励它自己的views.py 文件和tests.py 文件。

**在我看来，home、search_result 和 Listing视图**之间的差异并不能证明上述观点是合理的。

如果您想要一个分隔不同视图的目录/文件结构，您可以`views`在您的应用程序中构建一个目录，其中包含各个`search_result.py`视图......如果它们很长。

# c# - 获取编译时错误 CS0579：重复的“AssemblyFileVersionAttribute”属性

> ID：10590017
> 
> 赞同：25
> 
> 时间：2012-05-14T19:44:07.817
> 
> 标签：c#, attributes, duplicates

我最近通过 Properties->Application->Assembly Information 按钮向一组 C# 项目 (dll) 添加了一些版权信息。我在一个解决方案中有几个这样的项目。编译后，我收到以下类型的错误消息：

错误 CS0579：重复的“XXX”属性

其中“XXX”是我指定的属性之一的名称（例如 AssemblyFileVersionAttribute）

谷歌搜索我发现，对于从 Attribute 类派生的类，可以通过以下方式允许重复：

```
[System.AttributeUsage(System.AttributeTargets.All, AllowMultiple=true)]
class NewAttribute : System.Attribute { } 
```

但在我的情况下，我通过属性对话框添加了这些属性，并有语句（在每个项目的 AssemblyInfo.cs 中），例如：

```
[assembly: AssemblyCompanyAttribute("My Company")]
[assembly: AssemblyProductAttribute("My Product")]
[assembly: AssemblyCopyrightAttribute("© 2012 My Company, All Rights Reserved.")]
[assembly: AssemblyVersionAttribute("13.0.0.0")]
[assembly: AssemblyFileVersionAttribute("1.0.0.0")] 
```

并且没有任何我可以附加任何限定符的手动派生属性类。

我该如何解决这个重复的问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-13T08:33:41.680

我认为您已经在Project **Properties的****Assembly Information**窗口中指定了这些属性。如果您这样做了，请从**Assembly Information**中删除这些属性。

 ***** * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-04-06T18:37:58.633

通过在 .csproj 文件中添加它解决了这个问题

```
 <PropertyGroup>
    <TargetFramework>netcoreapp2.1</TargetFramework>
    <GenerateAssemblyConfigurationAttribute>false</GenerateAssemblyConfigurationAttribute>
        <GenerateAssemblyDescriptionAttribute>false</GenerateAssemblyDescriptionAttribute>
        <GenerateAssemblyProductAttribute>false</GenerateAssemblyProductAttribute>
        <GenerateAssemblyTitleAttribute>false</GenerateAssemblyTitleAttribute>
  </PropertyGroup> 
```

正如 Bob 建议的那样，如果您不想单独添加它们，您可以添加

```
<GenerateAssemblyInfo>false</GenerateAssemblyInfo> 
```

到`<PropertyGroup>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-23T04:45:18.317

面临类似的重复属性问题**CS0579**。

通过从项目中删除**目录**为我解决了这个问题。****

# javascript - 使用 Uploadify 插件计算上传速度

> ID：10590018
> 
> 赞同：0
> 
> 时间：2012-05-14T19:44:13.950
> 
> 标签：javascript, jquery, math, uploadify

由于某种原因，最新版本的 Uploadify 取消了报告用户上传速度的`onProgress`活动（除非我遗漏了什么），这让我更难报告用户上传速度。

基本上，该`onProgress`事件会定期触发（尽管不是按设定的时间间隔，但它似乎有所不同）并报告到目前为止上传的总字节数（`bytesUploaded`）和要上传的总字节数（`bytesTotal`）。

如何使用这两个指标来计算用户上传速度`kb/s`？我知道我必须根据这两个值进行计算，并且还需要使用 Javascript 日期/时间跟踪器或其他东西，但我不知道该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:17:18.517

我假设您能够获得每次触发`onprogress`事件之间经过的时间。要计算下载速度，您还需要跟踪每次下载了多少。换句话说，保存`bytesUploaded`每次，然后从新值中减去旧值。现在您知道已经过去了多少时间，以及在那段时间内下载了多少。只需将差异除以`bytesUploaded`经过的时间即可获得以字节/秒为单位的上传速度。除以 1024 得到千字节/秒。我通常会在第二次除法后检查该数字是否仍然大于 1024，以了解速度是否大于每秒 1 兆字节，如果是，则再次除以 1024 以获得该数字。

总结：获取经过的时间和该时间上传的字节数，然后将上传的字节数除以时间跨度，即可获得下载速度。

# playframework-2.0 - id 在 PlayFramework 模型中不自动可用？

> ID：10590021
> 
> 赞同：2
> 
> 时间：2012-05-14T19:44:30.843
> 
> 标签：playframework-2.0

当我尝试访问 Application 类或模型中的模型时，它会引发以下错误。我可以创建模型并将其持久化。但是如果我尝试访问它，问题。

执行异常

```
[InvalidPropertyException: Invalid property 'id' of bean class [models.CandidateToSalesforce]: No property 'id' found]
In [...]/app/views/syncedRecords.scala.html at line 11.

7   <h3>Results</h3>
8   <ul>
9       @for(r <- records) {
10          <li>
11              @r    [[ this is the line]]
12          </li>
13      }
14  </ul>
15} 
```

这可以通过添加 getter 来解决，如下所示。

```
@Id
public Long id;

// NOTE: play framework was bugging out without this method even though it's supposed to be automatic
public Long getId() {
    return id;
} 
```

没什么大不了的，但这不是错吗？[文档说](http://www.playframework.org/documentation/2.0.1/JavaEbean)“ Play 旨在自动生成 getter/setter，以确保与期望它们在运行时可用的库兼容”

我是否有一个已知的配置问题会以其他方式困扰我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:06:44.873

您可以在模型中编写自己的`toString()`方法：

```
public String toString(){
     return this.id.toString();
} 
```

尽管返回真实的一些字符串而不是 ie 可能是更好的主意。

```
return this.name+" "+this.somethingElse; 
```

然后，如果您将`this is my record: @r`在模板中使用，它将呈现`toString()`返回。

您可以使用以下方法获取您的`id`不写自定义 getter：（`@r.id`或`r.id`在控制器中）

# excel - 如果单元格为空白，则设置不要继续...并显示一条消息

> ID：10590023
> 
> 赞同：0
> 
> 时间：2012-05-14T19:44:40.237
> 
> 标签：excel, vba

此代码完美运行。我只有一个问题，我想做到这一点，如果单元格 Q23 中没有任何内容，它不会将任何内容放入 NCMR 数据中，并说些什么……代码在我所拥有的下面，下面是什么我想我需要做一个特定的部分才能工作，有人可以审查并确保我走在正确的道路上吗？

```
Option Explicit

Sub NCMR()
    Dim i As Integer

    With Application
        .ScreenUpdating = False
    End With

    'Internal NCMR
    Dim wsInt As Worksheet
    Dim wsNDA As Worksheet

    'Copy Ranges
    Dim c As Variant

    'Paste Ranges
    Dim P As Range

    'Setting Sheet
    Set wsInt = Sheets("NCMR Input")
    Set wsNDA = Sheets("NCMR Data")
    Set P = wsInt.Range("B61:V61")

    With wsInt
        c = Array(.Range("B11"), .Range("B14"), .Range("B17"), .Range("B20"), .Range("Q23"), .Range("B23") _
                , .Range("Q11"), .Range("Q14"), .Range("Q17"), .Range("Q20"), .Range("R26"), .Range("V23") _
                , .Range("V25"), .Range("V27"), .Range("B32"), .Range("B40"), .Range("B46"), .Range("B52") _
                , .Range("D58"), .Range("L58"), .Range("V58"))
    End With

    For i = LBound(c) To UBound(c)
        P(i + 1).Value = c(i).Value
    Next

    With wsNDA
        Dim LastRow As Long

        LastRow = .Range("A" & Rows.Count).End(xlUp).Row + 1

        wsInt.Rows("61").Copy

        With .Rows(LastRow)
            .PasteSpecial Paste:=xlPasteFormats
            .PasteSpecial Paste:=xlPasteValues
            .Interior.Pattern = xlNone
        End With

        With .Range("A" & LastRow)
            If LastRow = 3 Then
                .Value = 1
            Else
                .Value = Val(wsNDA.Range("A" & LastRow - 1).Value) + 1
            End If

            .NumberFormat = "0#######"
        End With
    End With

    With Application
        .Range("A61:V61").ClearContents
        .ScreenUpdating = True
    End With
End Sub 
```

我想做什么我想：

```
With wsInt
    Dim f As Range

    Set f = .Cell("Q23")

        If IsEmpty(f) Then
            MsgBox "The data can't entered, you have not entered any data into the Sales Order field."
        Else
                    c = Array(.Range("B11"), .Range("B14"), .Range("B17"), .Range("B20"), .Range("Q23"), .Range("B23") _
                , .Range("Q11"), .Range("Q14"), .Range("Q17"), .Range("Q20"), .Range("R26"), .Range("V23") _
                , .Range("V25"), .Range("V27"), .Range("B32"), .Range("B40"), .Range("B46"), .Range("B52") _
                , .Range("D58"), .Range("L58"), .Range("V58"))
        End If
End With 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:31:31.420

也许很简单：

```
With wsInt 
    If Len(.Range("Q23")) = 0 Then
        MsgBox "The data can't be entered, you have not entered any data into the Sales Order field."
        Exit Sub
    End If
End With      'added this line for clarity 
```

# c++ - 字符串到二进制文件

> ID：10590026
> 
> 赞同：0
> 
> 时间：2012-05-14T19:45:08.503
> 
> 标签：c++, string, file, binary

我的问题是这样的：我有一个名为“注册”的课程。它有一个名为“trainName”的字符串属性及其设置器：

```
class Register {

 private:
    string trainName;

 public:
    string getTrainName();
}; 
```

事实上，它更长，但我想让它更简单。

在其他类中，我将几个 Register 对象复制到一个二进制文件中，之前设置了 trainName。

```
Register auxRegister = Register();   
auxRegister.setName("name");

for(int i = 0; i < 10; i++) {

  file.write(reinterpret_cast<char*>(&auxRegister),sizeof(Register));

} 
```

稍后，我尝试从二进制文件中检索寄存器：

```
Register auxRegister = Register();

while(!file.eof()) { //I kwnow this is not right. Which is the right way?

    file.read(reinterpret_cast<char*>(&auxRegister), sizeof(Register));
} 
```

它发生它不起作用。实际上，Register 确实有更多属性（它们是 int），我可以正常检索它们，但字符串并非如此。

难道我做错了什么？在处理二进制文件和字符串时我应该考虑什么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:51:53.573

您不能以这种方式编写字符串，因为它几乎可以肯定包含指向某些结构和其他根本无法序列化的二进制内容的指针。您需要编写自己的序列化函数，并编写字符串长度+字节（例如）或使用完整的库，例如[protobuf](http://code.google.com/p/protobuf/)，它可以为您解决序列化问题。

编辑：见普力夺的回答。比我的好得多（即使在此编辑时得分较低）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:07:27.340

该类`std::string`包含一个指向存储字符串的缓冲区的指针（以及其他成员变量）。字符串缓冲区本身不是类的一部分。所以写出类实例的内容是行不通的，因为如果你这样做，字符串永远不会成为你转储到文件中的内容的一部分。你需要得到一个指向字符串的指针并写下来。

```
Register auxRegister = Register();   
auxRegister.setName("name");
auto length = auxRegister.size();

for(int i = 0; i < 10; i++) {
  file.write( auxRegister.c_str(), length );
  // You'll need to multiply length by sizeof(CharType) if you 
  // use a wstring instead of string
} 
```

稍后，要读取字符串，您必须跟踪写入文件的字节数；或者可能从文件本身中获取该信息，具体取决于文件格式。

```
std::unique_ptr<char[]> buffer( new char[length + 1] );
file.read( buffer, length );

buffer[length] = '\0'; // NULL terminate the string
Register auxRegister = Register();

auxRegister.setName( buffer ); 
```

# wpf - 当 UI 线程卡住时，WPF 窗口会轻微移动

> ID：10590030
> 
> 赞同：0
> 
> 时间：2012-05-14T19:45:30.407
> 
> 标签：wpf, windows, user-interface

我注意到，当我们的 WPF 应用程序的 GUI 线程卡住几秒钟时，应用程序的主窗口会向顶部和左侧移动几个像素，然后，当 GUI 线程被释放时，窗口会返回到它的位置。

我还注意到，当我保存一个复杂的文件并且[CodeMaid](http://www.codemaid.net/)正忙于清理它时，Visual Studio 中会发生这种情况——Visual Studio 窗口向顶部和左侧移动了几个像素，然后，当工作完成时，它返回到之前的位置。

这并不总是发生，也不容易重现。窗口最大化时似乎不会发生。

谁能说出为什么会发生这种情况，更重要的是，如何避免它（除了防止 GUI 线程卡住……）？

# php - 比较 3 个表并以最低价格创建新表

> ID：10590033
> 
> 赞同：0
> 
> 时间：2012-05-14T19:45:42.480
> 
> 标签：php, mysql

你好，我在我的数据库中创建了 3 个表。

表 A = 分销商 A

表 B = 分销商 B

表 C = 分销商 C

每个表都使用来自每个分销商的以下字段进行更新。

Sku、价格、库存、产品名称、经销商名称

我现在要做的是创建一个新表，其中应该准备好导入的价格。

有以下规则：

如果库存 = 0 跳过

如果所有 3 个经销商表中都有相同的 sku，则采用最低价格并以最低价格更新。

所以我有一个包含以下内容的新表：

Sku、价格、库存、产品名称、经销商名称。

上表仅包含每个 sku 一次，并且总是最低价格与正库存。

任何人:-)

× 96472

225296

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:32:59.253

您的问题不是最好的，我会尽力提供帮助，但更好的问题会得到更好的答案。

我假设您需要将表格保留为 3 个单独的表格（我个人不会，我只需添加一个`distributor`字段或类似的字段并将所有内容放在一个表格中）。

（从你的 PHP 标签来看，我会把它放在 php 中）。
我将提供一个相当具体的示例，但重要的是您要了解它是如何工作的，这样您才能适应它。

```
//Dist. A
$query = "SELECT * FROM `db`.`table_a` WHERE 1 ORDER BY `sku` DESC"; //Get the list of products
$result = mysql_query ($query) or die (mysql_error());
while ( $row = mysql_fetch_assoc($result)) {
  if ( $row['stock'] != 0 ) { //If we have stock...
    $query = "SELECT * FROM `final_table` WHERE `sku` LIKE '".$row['sku']."'"; //See if we have the data in the final table
    $final_result = mysql_query ($query) or die (mysql_error());
    if ( mysql_num_rows($final_result) == 0 ) { //Product Not in new table
      $query = "INSERT INTO `final_table` VALUES ( '".$row['sku']."' [The rest of your values]";
      mysql_query ($query) or die (mysql_error());
    }
    if ( mysql_num_rows($final_result) >= 1 ) { //Product In new table
      $new_row = mysql_fetch_assoc($new_result); //Get the data into an array so we can compare the prices
      if ( $row['price'] < $final_row['price'] ) { //New price is lower
        $query = "UPDATE `final_table` SET `dist` = 'A', `price` = '".$row['price']."' [Other Vars that need update] WHERE `sku` LIKE '"$row['sku']"'";
        mysql_query ($query) or die (mysql_error());
      }
    }
  }
} 
```

然后对 B 和 C 表重复此操作，更新表名和放入最终数据库的值。

（我意识到我可能在那个例子中违反了一些约定，但这个概念就在那里。）

这确实假设了一些事情，主要`sku`是某种唯一索引。

# github - GitHub 的 Redis 和 Resque 失败行为？

> ID：10590038
> 
> 赞同：10
> 
> 时间：2012-05-14T19:46:01.063
> 
> 标签：github, redis, resque

任何人都知道 GitHub 在使用 Resque 时如何处理 Redis 服务器的潜在故障或暂时不可用？

还有其他一些似乎将半复杂的解决方案放在一起，作为使用 zookeeper 的 redis-cluster 的保留（请参阅[https://github.com/ryanlecompte/redis_failover](https://github.com/ryanlecompte/redis_failover)和[resque failover redis 的解决方案](https://stackoverflow.com/questions/7759572/solutions-for-resque-failover-redis)）。其他人似乎有“可怜的人的故障转移”，即在没有 redis 客户端之间协调的情况下，在第一眼看到连接问题时将奴隶切换到主人（但这在临时不可用的情况下似乎有问题）。

问题：Defunkt 有没有谈论过 GitHub 如何处理 Redis 故障？是否有不涉及 Zookeeper 的故障转移最佳实践？

resque 上的原始帖子指出，选择 Redis 的部分原因是 redis 的主从功能，但该帖子没有描述 GitHub 如何利用这一点，因为所有工作人员都需要对 Redis 的读写访问（参见[https： //github.com/blog/542-introducing-resque](https://github.com/blog/542-introducing-resque)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T00:26:56.443

基本 Resque 库不处理故障。如果一个盒子在弹出消息后立即死亡，则该消息将永远消失。您必须编写自己的代码来处理故障，这非常棘手。

[https://github.com/resque/resque/issues/93](https://github.com/resque/resque/issues/93)

# magento - 在已筛选页面上按类别获取可筛选属性

> ID：10590042
> 
> 赞同：1
> 
> 时间：2012-05-14T19:46:09.767
> 
> 标签：magento, filter, navigation, block

我在导航中的每个类别下拉列表中添加了制造商列表（制造商是一个常规的、可过滤的属性）。我使用 Jasper 在这里描述的确切方法填充了列表（http://stackoverflow.com/questions/3157799/magento-get-filterable-attributes-by-category）

此方法适用于所有页面，但已由制造商过滤的页面除外。无论我在哪个页面上，我都希望下拉列表中显示此列表。我怀疑“当前购物”块正在以某种方式删除制造商过滤器。关于如何使制造商列表保留在下拉列表中的任何想法？

# php - PHP & 实现 .Netish 属性

> ID：10590046
> 
> 赞同：0
> 
> 时间：2012-05-14T19:46:39.050
> 
> 标签：php

我决定找点乐子，并在 PHP 中实现 .Net 属性。

我目前的设计中心围绕着：

```
$var;

method Var($value = null)
{
if($value == null) {
return $var;
}
else {
$var = $value;
}

} 
```

显然，如果有人试图将属性（和相关变量）设置为 null，这会遇到一些问题，所以我正在考虑创建一个永远不会使用的一次性类。想法，评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:47:46.647

不要重新发明轮子。PHP 已经提供了神奇的方法[`__get`](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)，[`__set`](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)可以用来实现类似 .NET 的属性；文档页面上有示例。PHP 框架还使用这些钩子将代码执行重定向到正确的 getter/setter 方法（由于您自己发现的原因，它们确实需要不同），以便也可以实现只读属性；一个（诚然复杂的）例子是[this](http://code.google.com/p/yii/source/browse/tags/1.1.10/framework/base/CComponent.php#95)。

专业提示：如果你重写`__get`and `__set`，你还需要重写`__isset`and `__unset`，这样你的类就可以在存在和 等结构的情况下继续直观地`empty`表现`unset`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:50:04.290

我不明白你想在这里实现什么。你想要一个吸气剂吗？

```
public function getVar() {
    return $this->var;
} 
```

你要二传手吗？

```
public function setVar($newVar) {
    $this->var = $newVar;
} 
```

您甚至可以将其公开并让外部人员设置 var：

```
public $var;
...
$object->var = "New Var"; 
```

# asp.net-mvc - 报表查看器布局问题

> ID：10590050
> 
> 赞同：0
> 
> 时间：2012-05-14T19:46:59.610
> 
> 标签：asp.net-mvc, reportviewer

我有一个带有两个不同数据集的报表查看器，并且我有两个不同的表，每个表都从数据集中获取信息。

我希望布局如下所示：

*   数据集 1（类）
    *   数据集 2（子类）

我当前的报告返回所有类（来自数据集 1）然后显示子类（来自数据集 2） 有没有一种方法可以同时显示来自两个不同数据集的数据？

我有两个不同的列表，每个列表都引用一个数据集，其中包含带有适当表的表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:02:04.737

听取其他人的建议并将两个存储过程合并为一个，在报表查看器中，我使用过滤器功能在不同的表中显示不同的数据。

# javascript - jQuery 选择器规则是否会针对较新的浏览器而改变？

> ID：10590054
> 
> 赞同：3
> 
> 时间：2012-05-14T19:47:40.967
> 
> 标签：javascript, jquery, html, performance

我刚刚[在 Chrome 18 中运行了这个 jsPerf 测试](http://jsperf.com/jquery-selector-speed-tests)，发现它的`.class`性能明显优于`tag.class`尽管[有](http://www.artzstudio.com/2009/04/jquery-performance-rules/#use-tags-before-classes)[无数](https://stackoverflow.com/questions/46214/good-ways-to-improve-jquery-selector-performance) [资源](http://24ways.org/2011/your-jquery-now-with-less-suck)[另有](http://seesparkbox.com/foundry/jquery_selector_performance_testing)说明。我知道[这个问题最近在 SO 上被问到，](https://stackoverflow.com/questions/10278128/jquery-class-selectors-with-or-without-tagname)但除了“不要使用 jQuery”之外没有明确/令人满意的答案。有人可以阐明最新的最佳实践吗？

注意：假设清晰度和语义得到了照顾（例如，我在锚标记上有一个类，称为它会像它`item-link`一样清晰地脱落）。`a.item-link``.item-link`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:50:29.573

您在询问最佳实践，因此我会更倾向于更具可读性的方式，而不是可能将脚本运行时缩短一微秒的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:53:52.900

最新的浏览器有更好的实现，`getElementsByClassName`因此当您使用 jquerys 类选择器时，它只会立即回退到此方法，因此性能差异和增益。

当你在它前面加上一个标签选择器时，jquery首先需要处理你的选择器，然后将它分解为不同的标记，然后它开始搜索控件，不确定这里遵循什么顺序，是否检索到所有具有 className 的元素首先应用附加选择器，反之亦然，但我相信您可以通过查看 jquery 源代码来研究它。

关于辩论是否可读，我不确定通过知道选择器在什么控件上，你会获得什么，如果这是你需要的，那么为了上帝的缘故，最好更好地命名你的类。接下来在 ids 之前是什么标签名称？？：/

# asp.net - 如何将“System.Drawing.Image”添加到“System.Web.UI.WebControls.Image”

> ID：10590055
> 
> 赞同：2
> 
> 时间：2012-05-14T19:47:43.153
> 
> 标签：asp.net, image, oracle, byte, blob

我有两个功能：

功能一：ImageToByteArray：用于将图像转换为字节数组，然后存储到Oracle数据库中，在一个BLOB字段中。

```
 public byte[] ImageToByteArray(string sPath)
            {
                byte[] data = null;
                FileInfo fInfo = new FileInfo(sPath);
                long numBytes = fInfo.Length;
                FileStream fStream = new FileStream(sPath, FileMode.Open, FileAccess.Read);
                BinaryReader br = new BinaryReader(fStream);
                data = br.ReadBytes((int)numBytes);
                return data;
            } 
```

函数2：ByteArrayToImage：用于将数据库中的字节数组转换为图像：

```
 public System.Drawing.Image ByteArrayToImage(byte[] byteArray)
            {
                MemoryStream img = new MemoryStream(byteArray);
                System.Drawing.Image returnImage = System.Drawing.Image.FromStream(img);
                return returnImage;
            } 
```

在我的标记中，我有一个图像控件： `<asp:Image ID="Image1" runat="server" />`

在后面的代码中，我想将函数 2 的返回值（类型为**System.Drawing.Image ）分配给类型为（** **System.Web.UI.WebControls.Image** ）的“image1”控件。

显然我不能只分配： `image1 = ByteArrayToImage(byteArray);` 因为我会收到以下错误：无法将类型'System.Drawing.Image'隐式转换为'System.Web.UI.WebControls.Image'

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-22T00:30:43.423

看起来您只需要一种简单的方法将图像字节数组转换为图片。没问题。我找到了[一篇](http://www.codeproject.com/Tips/445876/Auto-bind-byte-to-asp-Image)对我帮助很大的文章。

```
 System.Web.UI.WebControls.Image image = (System.Web.UI.WebControls.Image)e.Item.FindControl("image");

    if (!String.IsNullOrEmpty(currentAd.PictureFileName))
    {
        image.ImageUrl = GetImage(currentAd.PictureFileContents);
    }
    else
    {
        image.Visible = false;
    }

    //The actual converting function
    public string GetImage(object img)
    {
        return "data:image/jpg;base64," + Convert.ToBase64String((byte[])img);
    } 
```

PictureFileContents 是一个 Byte[] ，这就是 GetImage 函数将其作为对象的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:07:59.570

你不能。WebControls.Image 只是图像 url 的 HTML 容器 - 您不能将图像数据直接存储在其中，您只需将引用 (url) 存储到图像文件。

如果您需要动态检索图像数据，通常的方法是创建一个图像处理程序来处理请求并将图像作为浏览器可以显示的流返回。

看到这个[问题](https://stackoverflow.com/questions/3437740/how-to-convert-system-drawing-image-to-system-web-ui-webcontrols-image)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-15T14:56:05.120

我认为这是可能的，我希望它会有所帮助。我的解决方案在这里：

```
public System.Web.UI.WebControls.Image HexStringToWebControlImage(string hexString)
{
    var imageAsString = HexString2Bytes(hexString);

    MemoryStream ms = new MemoryStream();
    ms.Write(imageAsString, 0, imageAsString.Length);

    if (imageAsString.Length > 0)
    {
        var base64Data = Convert.ToBase64String(ms.ToArray());
        return new System.Web.UI.WebControls.Image
        {
            ImageUrl = "data:image/jpg;base64," + base64Data
        };
    }
    else
    {
        return null;
    }
}

public byte[] HexString2Bytes(string hexString)
{
    int bytesCount = (hexString.Length) / 2;
    byte[] bytes = new byte[bytesCount];
    for (int x = 0; x < bytesCount; ++x)
    {
        bytes[x] = Convert.ToByte(hexString.Substring(x * 2, 2), 16);
    }

    return bytes;
} 
```

# iphone - archiveRootObject:toFile: 文件看起来像乱码

> ID：10590061
> 
> 赞同：0
> 
> 时间：2012-05-14T19:48:00.990
> 
> 标签：iphone, nsfilemanager

我正在尝试将我的 NSMutableArray 写入文本文件。我在写之前用NSLog查看了数据，它是我想要的格式

```
String \t integer \t integer \t integer \r\n
String \t integer \t integer \t integer \r\n
... (50 lines like this)
String \t integer \t integer \t integer \r\n 
```

我通过以下方式编写文件：

```
[NSKeyedArchiver archiveRootObject:myMutableArray toFile:newPath]; 
```

然而，当我查看磁盘上的文件时，它是一堆乱码。我在这里做错了吗？或者我是否理解 archiveRootObject:toFile: 工作不正确？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:59:31.553

第 1 步：如果使用自定义对象（例如类对象），则

```
-(id) initWithCoder:(NSCoder *)aDecoder

-(void) encodeWithCoder:(NSCoder *)aCoder 
```

自定义类中的方法，并且必须使用 NSCoding 协议

第 2 步：为了从 .bin 文件中检索数据

```
NSFileManager * fm = [NSFileManager defaultManager];
NSURL * docsURL =[fm URLForDirectory:NSDocumentDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:NO error:nil];
// this will create the file yourFile.bin if it is not present    
NSString * path = [[docsURL path]stringByAppendingString:@"/yourFile.bin"];

self.yourArray = [NSKeyedUnarchiver unarchiveObjectWithFile:self.path]; 
```

第 3 步：如果要将数据保存到 .bin 文件中

```
NSFileManager * fm = [NSFileManager defaultManager];
NSURL * docsURL =[fm URLForDirectory:NSDocumentDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:NO error:nil]; 
```

这将使用您的文件（如果存在），否则它将创建它

```
NSString * path = [[docsURL path]stringByAppendingString:@"/yourFile.bin"]; 
```

[NSKeyedArchiver archiveRootObject:self.recordedPlayers toFile:self.path]

就是这样，您的代码应该通过将数据存储到文件中并在您要求时检索它来正常工作......

希望这能解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:08:56.193

您无法直接检查文件，因为它是以二进制格式编写的。您必须重新加载它才能阅读它。

[请参阅文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)中的讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:06:03.087

正如其他人所指出的，该文件以二进制格式编写。

但是，您可以检查它 - 它是一个二进制 plist，因此只需将其命名（或在 Finder 中重命名）为`.plist`扩展名并使用 Xcode 打开即可显示密钥存档的内容。键的组织不是很明显，但如果你正在寻找一个特定的值，你通常可以很容易地找到/编辑它：

![Xcode plist 编辑器的屏幕截图](../Images/0c8382d6614d554e43cbbc9d3e3e06b2.png)

# python - 通过（非 MPI）python 脚本与 MPI 二进制文件交互

> ID：10590064
> 
> 赞同：3
> 
> 时间：2012-05-14T19:48:18.580
> 
> 标签：python, mpi, interaction

我想通过例如**（串行）python 脚本以某种方式触发****MPI 程序（用 C++ 编写）**的某些功能的执行。这个 python 脚本应该在开头启动 mpi 程序，例如，

 **```
subprocess.call(['mpirun','-np', '4', 'mpibinary', 'args' ]) 
```

我需要多次调用这个 MPI 程序的一个函数，并且我想避免为不同的输入重新启动程序，因为我必须重新初始化我的所有数据结构，这很昂贵。因此，我想到了在 MPI 程序空闲时外部触发一个函数。我认为这可以通过文件 IO 来完成，即 MPI 程序的根级别在 while(1) 循环中监视某个文件，一旦其内容发生变化，它就会解析新内容并通知其他级别并调用函数. 我的问题有更优雅的解决方案吗？

最好的解决方案是拥有一个包装 C++ MPI 程序的重要功能的 python 类，以便我可以从 python 调用它们

```
mpiprogram.superfunction(a,b) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T11:01:49.887

也许最优雅的解决方案是让 Python 代码成为 MPI 应用程序的一部分。然后它将能够直接将数据（通过 MPI 消息）发送到 MPI 应用程序的其余部分，因为它将是 MPI 应用程序的一部分。这里有两种不同的方法：

1) 将 Python 二进制文件作为 0 级插入 MPI 作业。为了将其排除在集体操作的参与`mpibinary`之外，您必须制作一个排除 0 级的子通信器，并将其用于所有进一步的集体通信`mpibinary`。第一步是简单的部分。在 Open MPI 中，您将执行以下操作：

```
mpirun --hostfile hosts -np 1 pythonbinary args : -np 32 mpibinary args 
```

这称为 MPMD（多程序多数据）启动，它将启动其中的一个副本，`pythonbinary`该副本将成为 0 级，32 个副本`mpibinary`将成为 1 级、2 级，......直到 32 级（总共 33 个进程） . 其他 MPI 实现也为 MPMD 启动提供了非常相似的机制。然后，您将使用`MPI_Comm_split()`它来创建一个不包含 Python 程序的新通信器。拆分通信器是一项集体操作。这就是为什么您必须在 Python 代码和 C++ 应用程序中都调用它的原因。`MPI_Comm_split()`取一个“颜色”和一个键，根据颜色的不同将通信器拆分为多个子通信器。然后根据键值对具有相同颜色的进程进行排序。您很可能希望这样称呼它：

在 Python 中：

```
python_comm = mpi.mpi_comm_split(mpi.MPI_COMM_WORLD, 0, 0) 
```

在 C++ 中：

```
int rank;
MPI_Comm c_comm;

MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_split(MPI_COMM_WORLD, 1, rank, &c_comm); 
```

通过使用`rank`as key one 可以保证 in 中的进程顺序与`c_comm`拆分之前的顺序相同，即 rank 1 from`MPI_COMM_WORLD`将变为 rank 0 in `c_comm`， rank 2 将变为 rank 1 等。

从现在开始，C++ 应用程序可以`c_comm`像往常一样用来执行集体操作。为了在 Python 和 C++ 代码之间进行通信，您仍然必须使用`MPI_COMM_WORLD`Python 代码在其中的排名仍然为 0。

2) 使用 MPI-2 过程管理工具。首先，您将运行一个仅包含 Python 二进制文件的 MPI 作业：

```
mpirun --hostfile hosts -np 1 pythonbinary args 
```

然后 Python 二进制文件将直接使用`MPI_Comm_spawn()`所需数量的新进程生成另一个 MPI 二进制文件。新生成的进程将拥有自己的进程`MPI_COMM_WORLD`，您无需使用`MPI_Comm_split()`. 此外，spawn 操作将建立一个互通器，允许 Python 代码将消息发送到 MPI 应用程序的其他部分。

* * *

在这两种情况下，该`hosts`文件都将包含可以执行 MPI 二进制文件的所有执行主机的定义。您还需要使用可用的 Python MPI 绑定之一。

请注意，您只需将一些 MPI 调用添加到您的 Python 脚本中，例如 ,`MPI_Init`和相关的/ 。你不需要让它平行。MPI 用途广泛，不仅允许您将它用于并行工作共享，还可以用作通用消息传递框架。但请注意，Python 绑定应使用与程序其余部分相同的 MPI 库。`MPI_Finalize``MPI_Comm_split``MPI_Send``MPI_Recv`

另一种解决方案是使用一些消息队列库或文件池（这实际上是一个粗略的 MQ 实现）。**

# arrays - 如何获取静态数组的长度？

> ID：10590065
> 
> 赞同：4
> 
> 时间：2012-05-14T19:48:20.143
> 
> 标签：arrays, inno-setup, pascalscript

如果我有一个静态标签数组：

```
Labels: array [0..6] of TLabel; 
```

如何获取程序中的标签数量？

另外，如果有人能告诉我更多关于 Pascal Inno Setup 正在使用的类型，或者是否有一些手册。例如，我不能`High()`在阵列上做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T19:57:43.913

***Inno Setup Unicode 版本：***

在 Inno Setup 的 Unicode 版本中，您可以使用`Low`,`High`甚至可以使用`Length`Delphi 中已知的函数。所以也许是时候改用 Unicode 版本来编写这样的代码了：

```
function InitializeSetup(): Boolean;
var
  Labels: array [0..6] of TLabel;
begin
  MsgBox(
    'Array length: ' + IntToStr(Length(Labels)) + #13#10 +
    'Array low bound: ' + IntToStr(Low(Labels)) + #13#10 +
    'Array high bound: ' + IntToStr(High(Labels)),
    mbInformation, MB_OK);
end; 
```

* * *

***Inno 设置 ANSI 版本：***

在 ANSI 版本的 InnoSetup 中无法获取静态数组的长度或边界。没有`Low`nor`High`函数，该`Length`函数仅适用于字符串，[`GetArrayLength`](http://www.jrsoftware.org/ishelp/topic_isxfunc_getarraylength.htm)仅适用于动态数组。只是[另一个](https://stackoverflow.com/q/10177531/960757)静态数组 Inno Setup nitpick。

资料来源： http:
[//www.mirality.co.nz](http://www.mirality.co.nz/inno/tips.php#arrays)

# jquery - 在 Chrome 而不是 Firefox 中呈现元素？

> ID：10590069
> 
> 赞同：0
> 
> 时间：2012-05-14T19:48:31.343
> 
> 标签：jquery, html, css

**这解决了！原来 body 标签没有 100% 的高度，而是两个宽度设置。小学生错误，对不起。这解决了。**

我只使用网络元素和文本创建了一面美国国旗。

它在 Chrome 中以全彩色呈现良好，但在 Firefox 中仅显示星星和黑色主体背景。

有人可能会强调这里出了什么问题吗？将 Doctype 放在页面上实际上产生了 Firefox 在页面的 Chrome 呈现中遇到的相同问题。

[链接到国旗](http://eda.site50.net/flag.html)

任何帮助深表感谢。

```
<html>
<head>
        <title>FLAG</title>
        <style>

        * {
        margin: 0;
        padding: 0;
        }

        body {
        position: relative;
        background: #000;
        font-family: Arial, Helvetica, sans-serif;
        font-size: small;
        color: #fff;
        margin: 0;
        width: 100%;
        width: 100%;
        }

        a {
        text-decoration: none;
        color: inherit
        }

        #star_wrapper {
        position: relative;
        }

        h1 {
        line-height:35%;
        font-size: 150px;
        padding: 5%;
        margin-top: 11%;
        margin-right: 5%;
        margin-left: 5%;
        z-index: -1;
        }

        #foot {
        position: absolute;
        background: #000; 
        top: 0px;
        width: 100%;
        height: 100%;
        }

        #stripes_wrapper {
        height: 100%;
        width: 100%;
        }       

        .box {
        position: relative;
        display: block;
        height: 7.692307692307692%;
        width: 100%;
        }

        .red {
        background: #B22234;
        }

        .white {
        background: #ffffff;        
        }

        #title_wrapper {
        background: #3C3B6E;
        height: 53.84615384615385%;
        width: 40%;
        z-index: 1;
        position: absolute;
        top: 0;
        }

        .liner {
        z-index: 2;
        }
        </style>
</head>

<body>
                <div id="foot">

            <div id="title_wrapper">
            <center>
                        <div id="star_wrapper">

            <h1>

            * * * * * *<br>
                * * * * *<br>
            * * * * * *<br>
                * * * * *<br>
            * * * * * *<br>
                * * * * *<br>
            * * * * * *<br>
                * * * * *<br>
            * * * * * *<br>

                </h1>
                            </div>

            </center>
            </div>

            <div id="stripes_wrapper">
            <div class="box red"></div>
            <div class="box white"></div>
            <div class="box red"></div>
            <div class="box white"></div>
            <div class="box red"></div>
            <div class="box white"></div>
            <div class="box red"></div>
            <div class="box white liner"></div>
            <div class="box red liner"></div>
            <div class="box white liner"></div>
            <div class="box red liner"></div>
            <div class="box white liner"></div> 
            <div class="box red liner"></div>           
            </div>
            </div>

            <center>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script src="jquery.fittext.js"></script>
        <script src="jquery-outline-1.0.js"></script>
        <script>
          $("h1").fitText(0.34);
        </script>
         <script type="text/javascript">
           $(document).ready(function(){    
            $("h1").outlineLetters({color: '#fff', size: 1});
           });
          </script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:33:14.133

这不是问题，但是设置 DOCTYPE 是一个好习惯，没有它，浏览器会以 quirks 模式呈现网页，设置字符集也是一个好习惯。

要解决您的问题，请尝试以下操作：（首先在您的条纹包装容器之后擦除杂散中心标签）

HTML：

```
<div id="stripes_wrapper">
        <div class="box red"></div>
        <div class="box white"></div>
        <div class="box red"></div>
        <div class="box white"></div>
        <div class="box red"></div>
        <div class="box white"></div>
        <div class="box red"></div>
        <div class="box white liner"></div>
        <div class="box red liner"></div>
        <div class="box white liner"></div>
        <div class="box red liner"></div>
        <div class="box white liner"></div> 
        <div class="box red liner"></div>           
        </div>
        </div>

<!-- ERASE THIS CENTER TAG -->
        <center> 
```

CSS：

将此添加到您的CSS：

```
html {
    height: 100%;
} 
```

将 100% 高度添加到身体包装：

```
body {
    position: relative;
    background: #000;
    font-family: Arial, Helvetica, sans-serif;
    font-size: small;
    color: #fff;
    margin: 0;  
    height: 100%;
} 
```

将高度 100% 添加到条纹包装器：

```
#stripes_wrapper {
    width: 100%;   
    height: 100%;
} 
```

这应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:55:40.470

```
 <style>

    * {
    margin: 0;
    padding: 0;
    }

    body {
    position: relative;
    background-color: #000;
    font-family: Arial, Helvetica, sans-serif;
    font-size: small;
    color: #fff;
    margin: 0;
    }

    a {
    text-decoration: none;
    color: inherit
    }

            #star_wrapper {
            position: relative;
            }

    h1 {
    line-height:35%;
    font-size: 150px;
    padding: 5%;
    margin-top: 11%;
    margin-right: 5%;
    margin-left: 5%;
    z-index: -1;
    }

    #foot {
    position: absolute;
    background: #000; 
    top: 0px;
    width: 100%;
    height: 100%;
    }

    #stripes_wrapper {
    width: 100%;
    }       

    .box {
    position: relative;
    display: block;
    height: 7.692307692307692%;
    width: 100%;
    height:20px;
        background-color: #B22234;

    }

    .red {
    background-color: #B22234;
    }

    .white {
    background-color:  #ffffff;     
    }

    #title_wrapper {
    background-color: #3C3B6E;
    height: 53.84615384615385%;
    width: 40%;
    z-index: 1;
    position: absolute;
    top: 0;
    }

    .liner {
    z-index: 2;
    }
    </style> 
```

# magento - 交易电子邮件未发送

> ID：10590073
> 
> 赞同：0
> 
> 时间：2012-05-14T19:48:46.490
> 
> 标签：magento

我们正在 Linux 服务器上运行一个 magento 商店（1.6.0），并在 Microsoft Exchange 服务器上为域提供电子邮件。没有交易电子邮件发送给具有与同一域关联的电子邮件地址的客户，而是发送到域外的帐户（hotmail 和 gmail 等）。

这个问题有什么解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:04:30.640

关闭 Linux 服务器上的邮件服务。假设您的域是“domain.com”，而您的 Exchange Server 也是“domain.com”。当 Linux 服务器尝试发送到“info@domain.com”时，Linux 服务器认为邮件应该发送给它自己而不是您的 Exchange 服务器。当您关闭 Linux 服务器上的邮件服务时，它将不再尝试投递给自己。

# c# - 两个控件显示在其他控件之前

> ID：10590078
> 
> 赞同：0
> 
> 时间：2012-05-14T19:48:53.220
> 
> 标签：c#, .net, vb.net, user-controls

我在表单上有一个用户控件，我将其用作数据输入表单。我不断地用新数据显示和隐藏它。

通常（并非总是）相同的两个备忘录框首先在屏幕上显示一秒钟，然后完全控制可见。

我找到[了这个](https://stackoverflow.com/questions/487661/how-do-i-suspend-painting-for-a-control-and-its-children)链接，我不确定这是否是我的解决方案，但无论如何我不知道在哪里以及何时调用它。

编辑：我注意到它仅在程序空闲几分钟时才会发生。我可以一个接一个地显示和隐藏控件10次没问题。但是如果我隐藏它并在 2-3 分钟后再次显示它，那么我就会得到这种行为。

我想这与重新连接到 MsSQL 数据库以提取数据所需的时间有关。但是我怎么能告诉这 2 个盒子像那里的父母一样保持隐形，直到父母准备好显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:16:26.980

这真的很草率，可能有更好的解决方案，但如果你尝试这样的事情会怎样。

```
If SlowControl.visible = True Then
FastControl1.visible = True
FastControl2.visible = True
End If 
```

我不确定这是否可行，因为我不知道如何复制问题进行测试，但尝试一下，看看它是否会稍微延迟游戏前的 2 并且直到其他人才会显示它们显示。

# java - Java URLDecoder 在与包含 % 的字符串一起使用时抛出异常

> ID：10590080
> 
> 赞同：11
> 
> 时间：2012-05-14T19:48:58.767
> 
> 标签：java, url, decoding

我对 Java 的 URLDecoder 有疑问。我正在转义 JavaScript 中的字符串，并将其发送到 java servlet。然后我使用以下行解码转义的字符串：

```
URLDecoder.decode(request.getParameter("text"), "UTF-8"); 
```

这适用于我尝试过的每个特殊字符，唯一的问题是“%”。每次在字符串中使用此字符时，都会出现以下异常：

```
java.lang.IllegalArgumentException: URLDecoder: Incomplete trailing escape (%) pattern
    java.net.URLDecoder.decode(URLDecoder.java:187)
    at.fhv.students.rotter.ajax.count.CountServlet.doGet(CountServlet.java:31)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

这是一个已知的错误？还是真的是我的错？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T19:55:07.547

这不是一个错误。您发送了错误的编码字符串。-`%`符号必须编码为`%25`

如果你调用 request.getParameter()，我想你会得到一个解码的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-24T10:58:55.870

我们在 Angular 应用程序中遇到了类似的问题，我们`%`在客户端代码中对符号进行了一次编码。当我们收到 servlet 中的值时，由于`request.getParameter()`. 由于我们的服务器端代码中已经有 URL 解码器，因此对`%`符号进行两次解码会导致`"URLDecoder: Incomplete trailing escape (%) pattern"`异常。我们发现我们根本不应该将编码和解码`%`作为一个值来面对这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T08:20:31.930

为了得到我写的参数

```
String requestURL=request.getQueryString(); 
```

这样它就会给我们参数。在固定长度或单个参数的情况下，我们可以`String.substring()`从中获取首选参数。然后

```
String decodeValue = URLDecoder.decode(value,"UTF-8"); 
```

也会得到首选字符串编码的 % 符号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-22T13:25:23.407

即使我遇到了类似的问题，它也得到了解决。以下是您可以简单地运行以重现和解决此问题的示例代码。

```
public class TestPercentage {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        String transResult = "Se si utilizza DHCP%2C i valori validi sono S%C3%AC o No.%24%23%24%23%24%23%25NICyUSEWINS%25%24%23%24%23%24%23Se si utilizza WINS%2C i valori validi sono S%C3%AC o No.%24%23%24%23%24%23%25NODEFULL%25%24%23%24%23%24%23Nome completo del computer%24%23%24%23%24%23%25NODENAME%25%24%23%24%23%24%23I primi 8 caratteri del nome effettivo del computer%24%23%24%23%24%23%25NWCONTEXT%25%24%23%24%23%24%23Nome contesto NetWare%24%23%24%23%24%23%25NWSERVER%25%";
        String decode = null;
        try {
            decode = URLDecoder.decode(transResult, "UTF-8");
        } catch (UnsupportedEncodingException ue) {
            System.out.println("UnsupportedEncodingException ! = " + ue);
        } catch (IllegalArgumentException ile) {
            System.out.println("IllegalArgumentException ! = " + ile);
            if (transResult.endsWith("%")) {
                transResult = transResult.substring(0, transResult.lastIndexOf("%"));
                System.out.println("transResult2 = " + transResult);
                try {
                decode = URLDecoder.decode(transResult, "UTF-8");
                } catch (UnsupportedEncodingException ue2) {
                    System.out.println("UnsupportedEncodingException 2 = " + ue2);
                } catch (IllegalArgumentException ile2) {
                    System.out.println("IllegalArgumentException ! = " + ile2);
                }
            }
        }
        System.out.println("decode = " + decode);
    }

} 
```

# c# - Windows服务USB弹出？

> ID：10590083
> 
> 赞同：1
> 
> 时间：2012-05-14T19:49:13.063
> 
> 标签：c#, windows, windows-services

我正在尝试调整以下项目[http://www.codeproject.com/Articles/32026/Capturing-Device-Events-in-aC-Windows-Service](http://www.codeproject.com/Articles/32026/Capturing-Device-Events-in-a-C-Windows-Service)以检测 USB 磁盘并将其弹出或停止安装基于在标识字符串上。首先，当到达这部分代码时，项目无法正常运行： if (hdr.dbcc_devicetype == Win32.DBT_DEVTYP_DEVICEINTERFACE) {

```
 Win32.DEV_BROADCAST_DEVICEINTERFACE deviceInterface;
                        deviceInterface = (Win32.DEV_BROADCAST_DEVICEINTERFACE)
                            Marshal.PtrToStructure(eventData, typeof(Win32.DEV_BROADCAST_DEVICEINTERFACE));

                        string name = new string(deviceInterface.dbcc_name);

                        name = name.Substring(0, name.IndexOf('\0')) + "\\";
                        StringBuilder stringBuilder = new StringBuilder();

                        Win32.GetVolumeNameForVolumeMountPoint(name, stringBuilder, 100);

                        uint stringReturnLength = 0;
                        string driveLetter = "";

                        Win32.GetVolumePathNamesForVolumeNameW(stringBuilder.ToString(), driveLetter, (uint) driveLetter.Length, ref stringReturnLength);

                        if (stringReturnLength == 0)
                        {
                            // TODO handle error
                        }

                        driveLetter = new string(new char[stringReturnLength]);

                        if (!Win32.GetVolumePathNamesForVolumeNameW(stringBuilder.ToString(), driveLetter, stringReturnLength, ref stringReturnLength))
                        {
                            //// TODO handle error
                        }
                        RegisterForHandle(driveLetter[0]); 
```

....} 它永远不会获得驱动器号，驱动器号字符串始终为空白。stringBuilder = ôu<¬ë6 并且名称变量变为 = \?\USBSTOR#Disk&Ven_&Prod_USB_DISK_2.0&Rev_PMAP#07A512076EB115FA&0#{53f56307-b6bf-11d0-94f2-00a0c91efb8b}\

它出什么问题了？或者关于我想要做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T17:53:08.623

我已经用这个新逻辑改变了现有逻辑......这已经过测试并为我工作..

```
writeLog("Device valid");

try
{
    Win32.DEV_BROADCAST_DEVICEINTERFACE deviceInterface;
    deviceInterface = (Win32.DEV_BROADCAST_DEVICEINTERFACE)
        Marshal.PtrToStructure(eventData, typeof(Win32.DEV_BROADCAST_DEVICEINTERFACE));

    foreach (ManagementObject drive in
            new ManagementObjectSearcher(
                "select DeviceID, Model from Win32_DiskDrive where InterfaceType='USB'").Get())
    {
        // associate physical disks with partitions
        ManagementObject partition = new ManagementObjectSearcher(String.Format(
            "associators of {{Win32_DiskDrive.DeviceID='{0}'}} where AssocClass = Win32_DiskDriveToDiskPartition",
            drive["DeviceID"])).First();

        if (partition != null)
        {
            // associate partitions with logical disks (drive letter volumes)
            ManagementObject logical = new ManagementObjectSearcher(String.Format(
                "associators of {{Win32_DiskPartition.DeviceID='{0}'}} where AssocClass = Win32_LogicalDiskToPartition",
                partition["DeviceID"])).First();

            if (logical != null)
            {
                // finally find the logical disk entry to determine the volume name
                ManagementObject volume = new ManagementObjectSearcher(String.Format(
                    "select FreeSpace, Size, VolumeName from Win32_LogicalDisk where Name='{0}'",
                    logical["Name"])).First();

                string capacity = bytesToUnit((ulong)volume["Size"]);
                string freeSpace = bytesToUnit((ulong)volume["FreeSpace"]);

                writeLog("Drive Letter    "     + logical["Name"].ToString() + Environment.NewLine +
                         "Drive Name    "       + volume["VolumeName"].ToString() + Environment.NewLine +
                         "Drive Capacity    "   + capacity + Environment.NewLine +
                         "Drive Free Space    " + freeSpace);
            }
        }
    }
}
catch (Exception exp)
{
    writeLog("Exception: " + exp.ToString());
}

private string bytesToUnit(ulong bytes)
{
    string[] Suffix = { "B", "KB", "MB", "GB", "TB" };
    int i = 0;
    double dblSByte = bytes;

    if (bytes > 1024)
    {
        for (i = 0; (bytes / 1024) > 0; i++, bytes /= 1024)
        {
            dblSByte = bytes / 1024.0;
        }
    }
    return String.Format("{0:0.##}{1}", dblSByte, Suffix[i]);
}

public void writeLog(string log)
{
    eventLog1.WriteEntry(log);
} 
```

**获取结果.cs**

```
public static class GetResult
    {
        public static ManagementObject First(this ManagementObjectSearcher searcher)
        {
            ManagementObject result = null;
            foreach (ManagementObject item in searcher.Get())
            {
                result = item;
                break;
            }
            return result;
        }
    } 
```

它将为您提供您可能需要的所有详细信息。

希望对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:16:02.597

要枚举驱动器，请使用：

```
IEnumerable<DriveInfo> allDrives = DriveInfo.GetDrives().Where(c => c.DriveType == DriveType.Removable); 
```

但我不知道如何删除它

# xamarin.ios - 如何以编程方式关闭 Monotouch 中的键盘

> ID：10590088
> 
> 赞同：3
> 
> 时间：2012-05-14T19:49:39.373
> 
> 标签：xamarin.ios

有很多关于如何在本机 Objective-C 中执行此操作的示例，但我似乎找不到如何在 MonoTouch 的 C# 代码中完成相同操作的示例。

我想关闭用户按下返回键时弹出的键盘。

EditingDidEnd 是要捕获的正确事件吗？我似乎找不到解雇第一响应者方法调用。

帮助高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:41:39.160

[在这里](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements.cs#L1582)寻找样本。

一般来说，如果您可以链接到示例，它会容易得多。人们会确切地看到您想要什么，并告诉您如何使用 MonoTouch 做到这一点。还提供您自己的部分/不工作的代码通常是一个很大的帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T10:05:09.130

这是显示如何在数字键盘上方添加关闭按钮[的要点。](https://gist.github.com/3844649)你可以用 1LOC 做到这一点

```
myTextField.SetKeyboardEditorWithCloseButton(UIKeyboardType.NumberPad); 
```

使用此扩展方法：

```
public static void SetKeyboardEditorWithCloseButton (this UITextField txt, UIKeyboardType     keyboardType, string closeButtonText = "Done")
{
    UIToolbar toolbar = new UIToolbar ();
    txt.KeyboardType = keyboardType;
    toolbar.BarStyle = UIBarStyle.Black;
    toolbar.Translucent = true;
    toolbar.SizeToFit ();
    UIBarButtonItem doneButton = new UIBarButtonItem (closeButtonText, UIBarButtonItemStyle.Done,
                                                      (s, e) => {
        txt.ResignFirstResponder ();
    });
    toolbar.SetItems (new UIBarButtonItem[]{doneButton}, true);

    txt.InputAccessoryView = toolbar;
} 
```

[带有关闭按钮的数字键盘 http://moocode.net/img/numeric_editor.png](http://moocode.net/img/numeric_editor.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T21:44:40.490

在您的方法中，只需像通常那样`TouchesBegan()`调用任何文本框或. 当然，只有当您在某个地方继承并拥有这些事件时，这才是正确的。`textbox.ResignFirstReponder()``View.EndEditing(true);``UIViewController`

# php - 输出异步脚本的状态

> ID：10590092
> 
> 赞同：0
> 
> 时间：2012-05-14T19:50:00.000
> 
> 标签：php, javascript, jquery, ajax

我有一个需要约 5 分钟才能执行和完成的脚本。一切都发生在一个 PHP 页面上（包括但不包括 AJAX 或任何东西）。脚本完成后，您会收到一个文件的电子邮件。

我想要的是前端简单地接受表单提交并在幕后做这件事，同时在窗口保持打开时推送*信息*。

因此，例如，这将是流程：

1.  填写表格并提交。
2.  页面确认表单已提交 - 免费关闭窗口。
3.  如果窗口保持打开状态，请提供“里程碑”更新
    1.  查询完成
    2.  文件生成
    3.  邮件已发送

目标是在用户等待时提供信息，但在表单提交后立即关闭窗口是完全可以接受的，并且仍然会收到电子邮件。我知道我可以通过 AJAX 提交表单，但我如何才能传回临时流程完成而不仅仅是成功回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:59:14.740

您必须让客户端（浏览器）定期轮询服务器以获取更新。例如，您可能有以下内容：

```
function checkStatus() {
    $.ajax( {
        url: "/CheckStatus",  // your AJAX handler, on the server
        success: function(data) {
            $('#status').text( data );
            if( data != 'Email sent' )
                setTimeout( checkStatus(), 100 );
        }
    } );
} 
```

然后，提交表单后，只需调用`checkStatus`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:29:23.597

您应该将服务器端逻辑分离到可以从命令行运行的脚本中。假设您在 Linux 上，您将使用 php exec() 函数在您的服务器上启动一个后台进程，该进程使用 php 命令行程序运行您的脚本。

然后，您将让您的浏览器代码定期轮询服务器以获取更新。

# javascript - Javascript RegExp + 单词边界 + unicode 字符

> ID：10590098
> 
> 赞同：51
> 
> 时间：2012-05-14T19:50:34.947
> 
> 标签：javascript, regex, unicode

我正在构建搜索，我将使用 javascript 自动完成功能。我来自芬兰（芬兰语），所以我必须处理一些特殊字符，如 ä、ö 和 å

当用户在搜索输入字段中输入文本时，我尝试将文本与数据匹配。

如果用户键入例如“ää”，这是一个无法正常工作的简单示例。与“äl”相同

```
var title = "this is simple string with finnish word tämä on ääkköstesti älkää ihmetelkö";
// Does not work
var searchterm = "äl";

// does not work
//var searchterm = "ää";

// Works
//var searchterm = "wi";

if ( new RegExp("\\b"+searchterm, "gi").test(title) ) {
    $("#result").html("Match: ("+searchterm+"): "+title);
} else {
    $("#result").html("nothing found with term: "+searchterm);   
} 
```

[http://jsfiddle.net/7TsxB/](http://jsfiddle.net/7TsxB/)

那么如何让这些 ä、ö 和 å 字符与 javascript 正则表达式一起使用？

我想我应该使用 unicode 代码，但我应该怎么做呢？这些字符的代码是：[\u00C4,\u00E4,\u00C5,\u00E5,\u00D6,\u00F6]

=> äÄåÅöö

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-14T20:25:43.960

Regex 似乎存在问题，并且单词边界`\b`与字符串的开头匹配且起始字符超出了正常的 256 字节范围。

而不是使用`\b`，尝试使用`(?:^|\\s)`

```
var title = "this is simple string with finnish word tämä on ääkköstesti älkää ihmetelkö";
// Does not work
var searchterm = "äl";

// does not work
//var searchterm = "ää";

// Works
//var searchterm = "wi";

if ( new RegExp("(?:^|\\s)"+searchterm, "gi").test(title) ) {
    $("#result").html("Match: ("+searchterm+"): "+title);
} else {
    $("#result").html("nothing found with term: "+searchterm);   
} 
```

分解：

`(?:`括号`()`形成正则表达式中的捕获组。括号以问号开头，冒号`?:`形成非捕获组。他们只是将术语组合在一起

`^`插入符号匹配字符串的开头

`|`条是“或”运算符。

`\s`匹配空格（出现`\\s`在字符串中，因为我们必须转义反斜杠）

`)`关闭组

因此，我们不使用`\b`匹配单词边界且不适用于 unicode 字符的 using ，而是使用匹配字符串开头或空格的非捕获组。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-14T20:33:21.917

JavaScript RegEx 中的`\b`字符类实际上只对简单的 ASCII 编码有用。 是and设置 or和字符串的开头或结尾`\b`之间的边界的快捷代码。这些字符集只考虑 ASCII “单词”字符，其中等于并且是该类的否定。`\w``\W``\w``\w``[a-zA-Z0-9_]``\W`

这使得 RegEx 字符类在处理任何真实语言时基本上没有用处。

`\s`应该适用于您想要做的事情，前提是搜索词仅由空格分隔。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-09-13T21:44:52.523

这个问题很老，但我想我找到了一个更好的解决方案，用于使用 unicode 字母的正则表达式中的边界。使用 XRegExp 库，您可以实现一个有效的 \b 边界扩展它

```
XRegExp('(?=^|$|[^\\p{L}])') 
```

结果是 4000+ 字符长，但它似乎工作得很好。

一些解释： (?= ) 是一个零长度的前瞻，它查找开始或结束边界或非字母 unicode 字符。最重要的想法是前瞻，因为 \b 不捕获任何东西：它只是对或错。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-14T21:23:03.810

当您必须使用来自 Unicode 的特定字符集时，我建议您使用[XRegExp](https://github.com/slevithan/XRegExp/)，该库的作者映射了所有类型的区域字符集，使得使用不同语言的工作更容易。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-07-31T12:15:14.900

`\b`是字母和非字母字符之间转换的快捷方式，反之亦然。

更新和改进[max_massti](https://stackoverflow.com/a/32554839/951432)的答案：

随着`/u`ES2018 中 RegEx 修饰符的引入，您现在可以`\p{L}`用来表示任何 unicode 字母，并且`\P{L}`（注意大写字母`P`）表示除此之外的任何字符。

*编辑*：以前的版本不完整。

像这样：

```
const text = 'A Fé, o Império, e as terras viciosas';

text.split(/(?<=\p{L})(?=\P{L})|(?<=\P{L})(?=\p{L})/);

// ['A', ' Fé', ',', ' o', ' Império', ',', ' e', ' as', ' terras', ' viciosas'] 
```

我们使用后`(?<=...)`向查找来查找字母，使用前瞻`(?=...)`查找非字母，反之亦然。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-08-13T08:51:39.087

尽管这个问题似乎已经有 8 年历史了，但不久前我遇到了一个类似的问题（我必须匹配西里尔字母）。我花了一整天的时间在 StackOverflow 上找不到任何合适的答案。因此，为了避免其他人付出很多努力，我想分享我的解决方案。

是的，`\b`单词边界仅适用于拉丁字母（[单词边界： \b](https://javascript.info/regexp-boundary)）：

> 单词边界 \b 不适用于非拉丁字母 单词边界测试 \b 检查该位置的一侧是否应该有 \w，而另一侧是否应该有“not \w”。但 \w 表示拉丁字母 az（或数字或下划线），因此该测试不适用于其他字符，例如西里尔字母或象形文字。

是的，JavaScript`RegExp`实现几乎不支持 UTF-8 编码。

因此，我尝试在非拉丁字符的支持下实现自己的单词边界功能。为了使单词边界仅使用西里尔字符，我创建了这样的正则表达式：

```
new RegExp(`(?<![\u0400-\u04ff])${cyrillicSearchValue}(?![\u0400-\u04ff])`,'gi') 
```

[代码表中](https://en.wikipedia.org/wiki/List_of_Unicode_characters#Cyrillic)`\u0400-\u04ff`提供的西里尔字符范围在哪里。这不是一个理想的解决方案，但是，它在大多数情况下都能正常工作。

要使其适用于您的情况，您只需从[Unicode characters 列表中](https://en.wikipedia.org/wiki/List_of_Unicode_characters)选择适当范围的代码。

要试用我的示例，请运行下面的代码片段。

```
function getMatchExpression(cyrillicSearchValue) {
  return new RegExp(
    `(?<![\u0400-\u04ff])${cyrillicSearchValue}(?![\u0400-\u04ff])`,
    'gi',
  );
}

const sentence = 'Будь-який текст кирилицею, де необхідно знайти слово з контексту';

console.log(sentence.match(getMatchExpression('текст')));
// expected output: ["текст"]

console.log(sentence.match(getMatchExpression('но')));
// expected output: null
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-14T20:18:55.913

`\b`在使用 Unicode 时，我注意到一些非常奇怪的事情：

```
/\bo/.test("pop"); // false (obviously)
/\bä/.test("päp"); // true (what..?)

/\Bo/.test("pop"); // true
/\Bä/.test("päp"); // false (what..?) 
```

似乎`\b`and的含义`\B`是相反的，但仅在与非 ASCII Unicode 一起使用时？这里可能有更深层次的东西，但我不确定它是什么。

无论如何，似乎单词边界是问题，而不是 Unicode 字符本身。也许您应该替换`\b`为`(^|[\s\\/-_&])`，因为这似乎可以正常工作。（不过，让你的符号列表比我的更全面。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-14T19:58:09.403

我的想法是使用代表芬兰字母的代码进行搜索

`new RegExp("\\b"+asciiOnly(searchterm), "gi").test(asciiOnly(title))`

我最初的想法是使用普通`encodeURI`但 % 符号似乎干扰了正则表达式。

[http://jsfiddle.net/7TsxB/5/](http://jsfiddle.net/7TsxB/5/)

我使用 encodeURI 编写了一个粗略的函数来编码超过 128 的代码的每个字符，但删除它的 % 并在开头添加“QQ”。它不是最好的标记，但我无法让非字母数字工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-14T14:30:26.980

您正在寻找的是 Unicode 字边界标准：

[http://unicode.org/reports/tr29/tr29-9.html#Word_Boundaries](http://unicode.org/reports/tr29/tr29-9.html#Word_Boundaries)

这里有一个 JavaScript 实现（unciodejs.wordbreak.js）

[https://github.com/wikimedia/unicodejs](https://github.com/wikimedia/unicodejs)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-24T13:07:18.280

我遇到了类似的问题，但我不得不替换一系列术语。如果两个术语在文本中彼此相邻（因为它们的边界重叠），我发现的所有解决方案都不起作用。所以我不得不使用一些修改过的方法：

```
var text = "Ještě. že; \"už\" à. Fürs, 'anlässlich' že že že.";
var terms = ["à","anlässlich","Fürs","už","Ještě", "že"];
var replaced = [];
var order = 0;
for (i = 0; i < terms.length; i++) {
    terms[i] = "(^\|[ \n\r\t.,;'\"\+!?-])(" + terms[i] + ")([ \n\r\t.,;'\"\+!?-]+\|$)";
}
var re = new RegExp(terms.join("|"), "");
while (true) {
    var replacedString = "";
    text = text.replace(re, function replacer(match){
        var beginning = match.match("^[ \n\r\t.,;'\"\+!?-]+");
        if (beginning == null) beginning = "";
        var ending = match.match("[ \n\r\t.,;'\"\+!?-]+$");
        if (ending == null) ending = "";
        replacedString = match.replace(beginning,"");
        replacedString = replacedString.replace(ending,"");
        replaced.push(replacedString);
        return beginning+"{{"+order+"}}"+ending;
    });
if (replacedString == "") break;
order += 1;
} 
```

请参阅小提琴中的代码：http: [//jsfiddle.net/antoninslejska/bvbLpdos/1/](http://jsfiddle.net/antoninslejska/bvbLpdos/1/)

正则表达式的灵感来自：[http ://breakthebit.org/post/3446894238/word-boundaries-in-javascripts-regular](http://breakthebit.org/post/3446894238/word-boundaries-in-javascripts-regular)

我不能说，我觉得解决方案很优雅......

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-12T12:14:55.780

该问题的正确答案由**andrefs**给出。在将所有必需的东西放在一起之后，我只会更清楚地重写它。

对于 ASCII 文本，您可以`\b`用于匹配模式开头和结尾的单词边界。使用 Unicode 文本时，您需要使用 2 种不同的模式来执行相同的操作：

*   用于`(?<=^|\P{L})`匹配主要模式之前的开始或单词边界。
*   用于`(?=\P{L}|$)`匹配主模式之后的结尾或单词边界。
*   此外，`(?i)`在所有内容的开头使用，以使所有这些匹配不区分大小写。

所以得到的答案是：`(?i)(?<=^|\P{L})xxx(?=\P{L}|$)`，其中 xxx 是您的主要模式。这相当于`(?i)\bxxx\b`ASCII 文本。

为了使您的代码正常工作，您现在需要执行以下操作：

*   将要查找的模式或单词分配给您的变量“searchterm”。
*   转义变量的内容。例如，替换`'\'`为`'\\'`并且对正则表达式的任何保留特殊字符也执行相同的操作，例如`'\^', '\$', '\/'`等。请[在此处](https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex)查看有关如何执行此操作的问题。
*   `string.replace()`只需使用该方法，将变量的内容插入到上面的模式中，代替“xxx” 。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-06T04:28:55.750

我有一个类似的问题，我试图用不同的 unicode 词替换所有特定的 unicode 词，我不能使用lookbehind，因为它在 JS 引擎中不受支持，该代码将被使用。我最终像这样解决了它：

```
const needle = "КАРТОПЛЯ";
const replace = "БАРАБОЛЯ";
const regex = new RegExp(
  String.raw`(^|[^\n\p{L}])`
    + needle
    + String.raw`(?=$|\P{L})`,
   "gimu",
);

const result = (
    'КАРТОПЛЯ сдффКАРТОПЛЯдадф КАРТОПЛЯ КАРТОПЛЯ КАРТОПЛЯ??? !!!КАРТОПЛЯ ;!;!КАРТОПЛЯ/#?#?'
    + '\n\nКАРТОПЛЯ КАРТОПЛЯ - - -КАРТОПЛЯ--'
  )
    .replace(regex, function (match, ...args) {
      return args[0] + replace;
    });
console.log(result) 
```

输出：

```
БАРАБОЛЯ сдффКАРТОПЛЯдадф БАРАБОЛЯ БАРАБОЛЯ БАРАБОЛЯ??? !!!БАРАБОЛЯ ;!;!БАРАБОЛЯ/#?#?

БАРАБОЛЯ БАРАБОЛЯ - - -БАРАБОЛЯ-- 
```

## 拆开它

第一个正则表达式：`(^|[^\n\p{L}])`

*   `^|`= 行首或
*   `[^\n\p{L}]`= 任何不是字母或换行符的字符

第二个正则表达式：`(?=$|\P{L})`

*   `?=`= 前瞻
*   `$|`= 行尾或
*   `\P{L}`= 任何不是字母的字符

第一个正则表达式捕获该组，然后`args[0]`在替换期间使用 via 将其放回字符串中，从而避免向后查找。第二个正则表达式使用了前瞻。

请注意，第二个必须是前瞻，因为如果我们捕获它，则不会触发重叠的正则表达式匹配（例如`КАРТОПЛЯ КАРТОПЛЯ КАРТОПЛЯ`，只会匹配第一个和第三个）。

# java - 如何使用 HttpClient 对 HTTPS 端点执行 HttpPost？

> ID：10590102
> 
> 赞同：0
> 
> 时间：2012-05-14T19:51:01.257
> 
> 标签：java, debugging, ssl, httpclient

每当我尝试发布到 https 端点时，都会收到 javax.net.ssl.SSLException: java.lang.NullPointerException ：

```
import org.apache.commons.httpclient.MultiThreadedHttpConnectionManager;
import org.apache.commons.httpclient.methods.GetMethod;
import org.apache.commons.httpclient.HttpClient;

try {
    MultiThreadedHttpConnectionManager connectionManager = new MultiThreadedHttpConnectionManager();
    HttpClient httpClient = new HttpClient(connectionManager);
    PostMethod pm = new PostMethod("https://www.random.org");
    httpClient.executeMethod(pm);
} catch (Exception e) {
    e.printStackTrace();
} 
```

这给了我：

```
javax.net.ssl.SSLException: java.lang.NullPointerException
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:190)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1731)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1692)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1675)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1601)
    at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:94)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
    at org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream(HttpConnection.java:828)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.flushRequestOutputStream(MultiThreadedHttpConnectionManager.java:1565)
    at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2116)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
    at <My File>
Caused by: java.lang.NullPointerException
    at org.bouncycastle.jce.provider.JCEECPublicKey.<init>(Unknown Source)
    at org.bouncycastle.jce.provider.JDKKeyFactory.createPublicKeyFromPublicKeyInfo(Unknown Source)
    at org.bouncycastle.jce.provider.X509CertificateObject.getPublicKey(Unknown Source)
    at sun.security.validator.PKIXValidator.initCommon(PKIXValidator.java:92)
    at sun.security.validator.PKIXValidator.<init>(PKIXValidator.java:60)
    at sun.security.validator.Validator.getInstance(Validator.java:161)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.getValidator(X509TrustManagerImpl.java:108)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:204)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:925)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1170)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:637)
    at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:89) 
```

我没有在我的机器上专门配置 SSL，但我运行的 JSSE 测试脚本似乎表明它已安装。我是否跳过了一个必要的步骤？NullPointerException 让我认为这可能是一个错误，而不是预期的错误。

**编辑 2012 年 5 月 15 日：**

我已经使用 eclipse 调试器进行了深入研究，直到可以在 SSLSocketFactoryImpl 中看到证书。

```
SchemeSocketFactory socketfac = httpClient.getConnectionManager().getSchemeRegistry().getScheme("https").getSchemeSocketFactory();
socketfac.socketfactory.context.trustManager.trustedCerts.map.table, in debugger. 
```

我可以找到我要访问的网站的证书；问题是，在此过程中，表中有一个空指针异常。（见附图。）如果我使用调试器删除条目集中产生 NPE 的 2 个（共 183 个）条目，我的代码运行得非常好，但这似乎不是一个可行的解决方案。我认为这不是我的密钥库本身的问题 - 如果我使用`keytool -list -keystore cacerts`，它会输出 183 个条目，并且每个条目的格式似乎都正确。

* * *

![表 NPE](../Images/e53329ccd72dd315a4811a2bf575613c.png)

* * *

![表好条目](../Images/66201537c19716276ffe8e41a3a5807f.png)

* * *

![表 BAD 条目](../Images/c84bf5f79c1f7e41d5b12d11c043af89.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:43:29.013

终于设法梳理出一个答案。我将使用 Maven 的 bouncycastle 版本 133 作为项目的单独部分所需的另一个工件的一部分。我的解决方案是在我的 maven pom.xml 文件中将 bouncycastle 的 versionId 升级到 140。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T19:46:40.347

版本[133 大约有 6 年的历史](http://bouncy-castle.1462172.n4.nabble.com/Bouncy-Castle-Crypto-Provider-Package-version-1-33-now-available-td1468415.html)。自. [_](http://www.bouncycastle.org/releasenotes.html) 最新版本是 1.47，可在[`org.bouncycaste`组 ID (不再`bouncycastle`)](http://search.maven.org/#search%7Cga%7C1%7Cg%3a%22org.bouncycastle%22)下获得。如果您查看发行说明，则会发现许多导致`NullPointerException`s.

我还怀疑某些代码在不需要时使用 BouncyCastle 提供程序而不是 Sun 提供程序，无论是明确地还是因为 BC 提供程序是在默认 Sun/Oracle 提供程序使用`Security.insertProviderAt(...)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:09:52.767

该代码对我有用。启用调试日志以查看发生了什么。

```
 java.util.logging.Logger.getLogger("org.apache.http.wire").setLevel(java.util.logging.Level.FINEST);
  java.util.logging.Logger.getLogger("org.apache.http.headers").setLevel(java.util.logging.Level.FINEST);

  System.setProperty("org.apache.commons.logging.Log", "org.apache.commons.logging.impl.SimpleLog");
  System.setProperty("org.apache.commons.logging.simplelog.showdatetime", "true");
  System.setProperty("org.apache.commons.logging.simplelog.log.httpclient.wire", "debug");
  System.setProperty("org.apache.commons.logging.simplelog.log.org.apache.http", "debug");
  System.setProperty("org.apache.commons.logging.simplelog.log.org.apache.http.headers", "debug"); 
```

# php - PHP：如何使这个变量有一个值

> ID：10590106
> 
> 赞同：0
> 
> 时间：2012-05-14T19:51:05.563
> 
> 标签：php, globals

我已经注册了全局变量，我知道，我知道，坏主意，我没有对应用程序进行编程，我只需要在开发他们的新应用程序时让它工作。似乎托管公司进行了某种更新，知道该应用程序不起作用。

```
function showfield($fldn_,$flds_,$edit_, $onch_='', $maxlen_='255',$format_='', $align_='left', $extra_='') {
  switch ($format_) {
    case 'curr':
        $fldv_=curr($GLOBALS[$fldn_]);
        break;
    case 'currn':
        $fldv_=currn($GLOBALS[$fldn_]);
        break;
    default:
        $fldv_=$GLOBALS[$fldn_];
  }
  if($edit_=='2'){ 
    echo '<input type="text" name="'.$fldn_.'" id="'.$fldn_.'" VALUE="'.$fldv_.'" SIZE="'.afsize($flds_).'"';
    if ($onch_) echo " onChange=\"$onch_\"";
    if ($maxlen_) echo " maxlength=\"$maxlen_\"";
    if ($align_ and $align_<>'left') echo " style=\"text-align:$align_\"";
    echo " $extra_>";
  } else { echo $fldv_; }
} 
```

请注意上面函数的这一部分......`$fldv_=$GLOBALS[$fldn_];`这不再起作用了，它应该为`VALUE="'.$fldv_.'"`. 我不知道它应该从哪里获得价值。我对代码进行了搜索，但找不到设置变量的引用。无论如何， $GLOBALS 所在的所有内容都不再起作用。我已经将 register_globals 设置为 On 并且它处于打开状态。

以前可以用，更新后就不行了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:32:01.830

我在 $_POST 上使用了 extract 来解决一些问题，我只需要在 $_GET 上也这样做：[PHP: translate POST into simple variables？](https://stackoverflow.com/questions/10589345/php-translate-post-into-simple-variables)

```
extract($_GET, EXTR_SKIP); 
```

# c# - C# 并发和代理

> ID：10590107
> 
> 赞同：9
> 
> 时间：2012-05-14T19:51:08.753
> 
> 标签：c#, parallel-processing

C# 中是否有任何类似于新的 Microsoft C++11 并发库允许构建异步代理（例如在[这里](http://msdn.microsoft.com/en-us/library/dd504791#createAgentClass)完成）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:11:01.923

您可能正在寻找新的（测试版）`async`关键字。 [http://msdn.microsoft.com/en-us/vstudio/gg316360](http://msdn.microsoft.com/en-us/vstudio/gg316360)

# java - 将一个大的 x 元素数组拆分为 y 数组，其中包含 +/- 1 个元素

> ID：10590108
> 
> 赞同：0
> 
> 时间：2012-05-14T19:51:15.353
> 
> 标签：java, arrays, modulo

我试图将 5163 个元素的数组拆分为 128 个数组，每个数组不应包含超过 +/- 1 个平均值的元素。

5163 / 128 = 40,33，四舍五入 = 40。5163 % 128 = 43，表示 128 个数组中的 43 个应该比平均值多 1 个。

我怎么能用代码写这个？

```
String [] words; // Contains 5163 words

for(... .. .. .) {

....

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:57:11.650

您需要一个集合来保存所有数组，根据您的约束执行元素划分，然后返回集合。

我会说一些数组（可能是一些随机的 44 个数组）在除法完成后会在其中获得一个额外的元素。

# user-agent - 用户代理字符串中的 MAMD 是什么？

> ID：10590109
> 
> 赞同：1
> 
> 时间：2012-05-14T19:51:30.680
> 
> 标签：user-agent

在此用户代理字符串中：

Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；.NET4.0C；**MAMD** ; BRI/2)

MAMD 是什么来的？这是我唯一无法复制的部分。[http://user-agent-string.info](http://user-agent-string.info)告诉我这是一个“未知片段”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T00:12:07.327

[What Is My Browser](http://www.whatismybrowser.com/developers/unknown-user-agent-fragments)中的信息表明它是 OEM 标识符 - 它与计算机制造商分发的 Internet Explorer 版本有关。不过，“MAMD”的确切含义尚不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T08:51:09.897

它说[这里](https://user-agents.me/windows-oem-manufacturer-list)是[Medion的 OEM 标识符](http://www.medion.com/)

# android - 如何使用我的安卓应用程序登录网站？

> ID：10590111
> 
> 赞同：0
> 
> 时间：2012-05-14T19:51:45.110
> 
> 标签：android

我可以使用什么来使用我的应用程序登录网站？是否有图书馆或其他东西可以使与网站的通信和返回数据变得容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:11:21.707

Authentificator 可能是您正在寻找的。

它是 java.net 包的一部分，并提供了一个用于密码验证的回调方法。

有一个非常基本且易于理解的示例如何使用它，所以我将链接它。

无法更好地展示它！

[http://www.java2s.com/Code/Java/Network-Protocol/AuthenticatorsetDefaultnewAuthenticator.htm](http://www.java2s.com/Code/Java/Network-Protocol/AuthenticatorsetDefaultnewAuthenticator.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:16:47.647

正如您在我的资料中看到的那样，我个人使用发布请求，功能登录：[http://code.google.com/p/tsukiapp/source/browse/trunk/src/net/myfigurecollection/android/webservices/MFCService。爪哇](http://code.google.com/p/tsukiapp/source/browse/trunk/src/net/myfigurecollection/android/webservices/MFCService.java)

我必须管理 cookie，但如果您只需要验证凭据，这不是强制性的；）

# php - mysql_fetch_array() 期望参数 1 是资源错误问题

> ID：10590112
> 
> 赞同：0
> 
> 时间：2012-05-14T19:51:49.330
> 
> 标签：php, mysql, sql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我正在尝试回显表格的内容，但是这行代码出现错误：

```
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name ORDER BY id DESC";
// OREDER BY id DESC is order result by descending 
$result=mysql_query($sql);

while($rows=mysql_fetch_array($result)){ // Start looping table row 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:54:02.713

这意味着您的查询出错并导致它失败。用于[`mysql_error()`](http://us3.php.net/manual/en/function.mysql-error.php)找出原因。

仅供参考，[您应该停止使用 mysql_*](https://chat.stackoverflow.com/transcript/message/3656047#3656047)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:24:43.913

在开始循环之前添加一个 if 条件来检查 $result。避免不必要的双引号。

```
mysql_connect($host, $username, $password)or die("cannot connect"); 
mysql_select_db($db_name)or die("cannot select DB");

$sql="SELECT * FROM $tbl_name ORDER BY id DESC";
// OREDER BY id DESC is order result by descending 
$result=mysql_query($sql);

if($result)
{
  while($rows=mysql_fetch_array($result)){ 
       // Start looping table row  
  }//while end
}
else
{
   echo "ERROR:".mysql_errno();
} 
```

# c - c编程搜索文件的字符串

> ID：10590114
> 
> 赞同：0
> 
> 时间：2012-05-14T19:51:58.290
> 
> 标签：c, search, text-files

所以我必须编写一个函数，从文件中读取并扫描它以查看其中的任何标题是否与用户输入的标题匹配并以标题格式打印所有现有标题：（标题）作者：（姓，名）。如果没有匹配的标题，则打印没有找到的标题。我可以让程序将标题读入一个数组并以我想要的格式打印，但我的问题是搜索文件以找到匹配的标题来打印它们。程序只是打印出没有匹配的标题 5 次当有比赛时......任何帮助将不胜感激......谢谢......

```
void findBookByTitle(FILE* fp, char title[])
{
FILE* open = fp;
char title2[200];
char last[200];
char first[200];
int i=0;

while(!feof(fp))
{
fscanf(fp, "%[^;];%[^;];%[^\n]", title2, last, first);
if( strcmp(title2,title)==0)
{
printf("Title: %s\n", title2);
printf("Author: %s,%s\n", last,first);
}
else {
   printf("No books match the title: %s\n", title);
 }

}
} 
```

文本文件说：

```
Making The Right Choices; Henry; Mark
Time For Change; Robinson; Chris
Battle For Air; Jetson; Lola
The Right Moves; Henry;Mark
People Today; Robinson; Chris 
```

因此，如果用户想要搜索书籍 Time to change 它会打印出 author: time for change 作者：Henry, Mark 但我的功能只是一遍又一遍地打印出没有匹配的书籍......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:23:13.130

问题是您的`else`子句的位置。

如果您在此固定间距：

```
while(!feof(fp)) {
    fscanf(fp, "%[^;];%[^;];%[^\n]", title2, last, first);
    if( strcmp(title2,title)==0) {
        printf("Title: %s\n", title2);
        printf("Author: %s,%s\n", last,first);
    }
    else {
        printf("No books match the title: %s\n", title);
    }
} 
```

如果与您不匹配，您可以看到找到的每个标题：

```
 else {
        printf("No books match the title: %s\n", title);
    } 
```

您需要做的是添加一个变量以查看是否找到任何内容并在阅读所有内容后检查它

```
int found = 0;
...
while(!feof(fp)) {
    fscanf(fp, "%[^;];%[^;];%[^\n]", title2, last, first);
    if( strcmp(title2,title)==0) {
        printf("Title: %s\n", title2);
        printf("Author: %s,%s\n", last,first);
        found = 1;
    }
}

if(!found) {
   printf("No books match the title: %s\n", title);
}
.... 
```

编辑：

从另一个[问题](https://stackoverflow.com/questions/1893636/fscanf-problem-with-reading-in-string)这向您展示了如何使用`fscanf`. 根据那里的答案，我认为：

```
fscanf(fp, "%200[^;]%*c %200[^;]%*C %200[^\n]%*c", title2, last, first); 
```

应该做你需要的（用 200 来防止缓冲区溢出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:14:03.343

如果您只匹配 for ，您的代码就可以工作`Making The Right Changes`，因为您的`fscanf`线路正在做您没想到的事情。

您这样做是为了将文件的每一行读入单独的字段。

```
fscanf(fp, "%[^;];%[^;];%[^\n]", title2, last, first); 
```

`[^\n]`末尾的 告诉忽略`fscanf`换行符，但它仍保留在缓冲区中，因此它实际上会在它读入的下一行中读入它。这意味着每本书的标题都`\n`在开头添加了一个字符。

我把它改成这样：

```
fscanf(fp, "%[^;];%[^;];%s\n", title2, last, first); 
```

这意味着它只会读取该行并按照您的预期将其分解（并将换行符放在地板上）。

这是我根据您编写的示例程序，带有一个简单的 main 函数。

```
#include <stdio.h>

void findBookByTitle(FILE* fp, char title[])
{
   FILE* open = fp;
   char title2[200];
   char last[200];
   char first[200];
   int i=0;

   while(!feof(fp))
   {
      fscanf(fp, "%[^;];%[^;];%s\n", title2, last, first);
      if( strcmp(title2,title)==0)
      {
         printf("I found a match\n");
         printf("Title: %s\n", title2);
         printf("Author: %s,%s\n", last,first);
         printf("---\n");
         return;
      }
   }
}

int main(int argc, char **argv) {
   char *fname = argv[1];
   FILE* fp = fopen(fname, "r");
   findBookByTitle(fp, "Making The Right Choices");
   findBookByTitle(fp, "Time For Change");
   findBookByTitle(fp, "The Right Moves");
   fclose(fp);
   return 0;
} 
```

运行此代码，我得到正确的输出：

```
λ > ./a.out sample.txt
I found a match
Title: Making The Right Choices
Author:  Henry,Mark
---
I found a match
Title: Time For Change
Author:  Robinson,Chris
---
I found a match
Title: The Right Moves
Author:  Henry,Mark
--- 
```

# java - 需要帮助在 Java 中将数字转换为单词

> ID：10590115
> 
> 赞同：1
> 
> 时间：2012-05-14T19:52:06.567
> 
> 标签：java, numbers, tostring, words

我正在开发一个将数字转换为单词的程序，但是 Numbers 类中的 toString() 方法出现问题。所有的方法都给了我，所以我可以实现；因此，我无法删除它们中的任何一个...

编号：4564 --> 四千五百六十四

这是代码 Numbers 类

```
package numberstowords;

import java.util.*;

public class Numbers {

    //array containing single digits words numbers:0-9
    private final String[] SINGLE_DIGITS_WORDS;

    //array containing special words words eg:10-19
    private final String[] TEEN_DIGITS_WORDS;

    //array containing tens words numbers:20-90
    private final String[] TEN_DIGITS_WORDS;

    private int value,   //number to be converted to words
                one,     //number to store digits
                ten,     //number to store tens
                hundred, //number to store hundred
                thousand;//number to store thousand

    private String strOut;

    //conscructor: Initializing value and arrays
    public Numbers(int n)

    //getting single digit number
    private int getOnes()
    {
        one = value % 10;
        return one;
    }

    //getting tens numbers
    private int getTens()
    {
        ten = value % 100;
        ten /= 10;
        return ten;
    }

    //getting hundreds numbers
    private int getHundreds()
    {
        hundred = value % 1000;
        hundred /= 100;
        return hundred;
    }

    //getting thousands numbers
    private int getThousands()
    {
        thousand = value % 10000;
        thousand /= 1000;
        return thousand;
    }

    //converting and returning string of ones 
    private String digitsToString(int one)
    {
        return SINGLE_DIGITS_WORDS[one];        
    }

    //converting and returning strings of tens and teens
    private String tensAndOnesToString(int ten, int one)
    {
        if(ten == 1)//if number is a teen return, else return tens 
        { 
            return TEEN_DIGITS_WORDS[one];
        }
        return TEN_DIGITS_WORDS[ten-2];         
    }

    //converting and returning strings of hundreds
    private String hundredsToString(int hundred)
    {
        return digitsToString(hundred) + " hundred";
    }

    private String thousandsToString(int thousand)
    {
        return digitsToString(thousand) + " thousand";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:35:39.780

According to your comments, the problem is that you're getting the `ones` output for numbers between `11-19`.

Looking at your `tensAndOnesToString()` method, it checks whether `ten == 1`, for the purpose of identifying the `teens` numbers. So, why don't you put a similar check in your `if(d4 != 0)` line,

```
 if(d4 != 0 && d3 != 1) // CHANGED THIS LINE
    {
        if(strOut.equals(""))
            strOut = digitsToString(one);
        else
        {
            strOut = strOut +" "+ digitsToString(one);
        }
    } 
```

So now it will only output a `one` number if it (`d4`) isn't `0`, and if the `tens` (`d3`) isn't `1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T19:34:45.160

在这个简短的代码中，我使用了递归函数来使其具有良好性能的简单答案。我将给定的数字划分为小块数学可理解的值。这种类型的划分是基于数学的，主要由 CPU 执行，使用较少的内存。

```
public class NumbersLetter {

    private java.util.HashMap<Long, String> hashMap = new java.util.HashMap<>(34);
    private long[] dividers = {
            1_000_000_000_000_000_000L, 1_000_000_000_000_000L, 1_000_000_000_000L,
            1_000_000_000L, 1_000_000L, 1_000L, 100L, 10L, 1L};

    public String getNaturalNumbersLetter(long number) {
        String regex = "[0-9]+";
        if (!Long.toString(number).matches(regex)) {
            number = 0;
        }
        return divideNumber(number);
    }

    private String getDigitLetter(long digit) {
        return hashMap.get(digit);
    }

    private String addSeparation(boolean addSeperator) {
        if (addSeperator) return " and ";
        return "";
    }

    private String divideNumber(long digit) {
        //Check if the number is a pure number
        // and mapped in our @hashMap
        if (hashMap.containsKey(digit)) {
            return " " + getDigitLetter(digit);
        }
        // Start to divide the given number
        // to small pieces of math understandable values
        // This type of divide is math based
        // which do mostly by the CPU and
        // use small amount of RAM.
        for (long i : dividers) {
            /**
             * Start divide the given number to smaller pieces
             * for example will change 4,321 to
             * 4000 , 300 ,20 & 1
             * this is one of those formats which is human readable.
             * The important thing about this design is that
             * I use calculation instead of buffering strings.
             * */
            if ((digit >= i)) {
                if (digit % i == 0) {
                    //
                    return divideNumber(digit / i) + divideNumber(i);
                } else {
                    if ((digit / i) == 1) {
                        return divideNumber(digit / i)
                                + divideNumber((digit / i) * i)
                                + divideNumber(digit % i);
                    } else {
                        return divideNumber((digit / i) * i)
                                + divideNumber(digit % i);
                    }
                }
            }
        }
        return "";
    }

    public NumbersLetter() {
        // NumbersLetter Constructor
        hashMap.put(0L, "Zero");
        hashMap.put(1L, "One");
        hashMap.put(2L, "Two");
        hashMap.put(3L, "Three");
        hashMap.put(4L, "Four");
        hashMap.put(5L, "Five");
        hashMap.put(6L, "Six");
        hashMap.put(7L, "Seven");
        hashMap.put(8L, "Eight");
        hashMap.put(9L, "Nine");
        hashMap.put(10L, "Ten");
        hashMap.put(11L, "Eleven");
        hashMap.put(12L, "Twelve");
        hashMap.put(13L, "Thirteen");
        hashMap.put(14L, "Fourteen");
        hashMap.put(15L, "Fifteen");
        hashMap.put(16L, "Sixteen");
        hashMap.put(17L, "Seventeen");
        hashMap.put(18L, "Eighteen");
        hashMap.put(19L, "Nineteen");
        hashMap.put(20L, "Twenty");
        hashMap.put(30L, "Thirty");
        hashMap.put(40L, "Forty");
        hashMap.put(50L, "Fifty");
        hashMap.put(60L, "Sixty");
        hashMap.put(70L, "Seventy");
        hashMap.put(80L, "Eighty");
        hashMap.put(90L, "Ninety");
        hashMap.put(100L, "Hundred");
        hashMap.put(1_000L, "Thousand");
        hashMap.put(1_000_000L, "Million");
        hashMap.put(1_000_000_000L, "Billion");
        hashMap.put(1_000_000_000_000L, "Trillion");
        hashMap.put(1_000_000_000_000_000L, "Quadrillion");
        hashMap.put(1_000_000_000_000_000_000L, "Quintillion");
    }

} 
```

# javascript - 使用 XHR 一次向客户端发送多个文件，包括图像

> ID：10590117
> 
> 赞同：0
> 
> 时间：2012-05-14T19:52:32.650
> 
> 标签：javascript, html, file, upload

我目前正在尝试在一个请求中向 HTML 客户端发送多个文件，包括图像。服务器语言并不重要，因为客户端是问题所在。

例如，我们有 2 张图片和 2 个带有文本内容的文件。现在我用 base64 对它们进行编码，将它们存储在一个数组中并将其序列化并发送给客户端。这对于文本文件没有问题，但是图片呢？

不知何故，我看不出我怎么可能在 HTML 中显示它们。从 base64 解码它们是没有问题的，但是为了在图像标签中以 HTML 格式显示它们，我确实需要将它们存储在一个文件中。一个可能的解决方案是将它传递给 flash 或其他东西，但我可以直接发送它，因为我必须加载 flash 代码，这让我回到原来的问题......

不知何故，我还没有在这里看到解决方案。很长一段时间以来，我一直在使用这个过程来组合 javascript、css 和其他请求的数据，以最大限度地减少单独请求的数量，最近我来找我，如果我也可以包含图像，它将进一步提高性能。

# php - 如何使用 PHP 读取完整的 URL 字符串？

> ID：10590120
> 
> 赞同：2
> 
> 时间：2012-05-14T19:52:44.117
> 
> 标签：php, url, get, request

我的网址如下所示：

[http://mydomain.com/reader/index.php?type=numerated&id=28&m=2#page/6/mode/2up](http://mydomain.com/reader/index.php?type=numerated&id=28&m=2#page/6/mode/2up)

我怎样才能像变量一样获得它？使用“标准”PHP 编码，我不知道如何参与**page/6/mode/2up**

看起来像小问题，但我无法得到解决方案......提前谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T19:54:02.453

# 之后的部分是 URL 的客户端部分，它指的是 HTML 中的锚点。因此，您只能在此之前检索所有内容。

> 客户端在检索文档时不应向服务器发送 URI 片段，并且如果没有本地应用程序片段的帮助，则不会参与 HTTP 重定向。

~ 维基百科：[http ://en.wikipedia.org/wiki/Fragment_identifier](http://en.wikipedia.org/wiki/Fragment_identifier)

* * *

要检索其他所有内容，您可以使用以下代码：

```
$url = "http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; 
```

# c++ - 无法从 void 转换为 int

> ID：10590121
> 
> 赞同：0
> 
> 时间：2012-05-14T19:52:47.587
> 
> 标签：c++, function-pointers

我试图通过它们的指针调用函数。编译这段代码时，我收到错误说 void 类型的表达式不能转换为其他类型，但我在调用函数之前检查函数是否返回 void。还有另一种方法可以做到这一点吗？

```
class FuncBase {
public:
FuncBase(string n, string ret, string arg1, string arg2): name(n), retval(ret), a1(arg1), a2(arg2) {} 
string getName() const { return name; }
string getRet() const { return retval; }
string getA1() const { return a1; }
string getA2() const { return a2; }
virtual void call() = 0; 

private: 
string name, retval, a1, a2; 
};  

template <typename ret, typename arg1, typename arg2> 
class Func: public FuncBase {
public:
Func(string n, string r, string ar1, string ar2, ret(*fc)(arg1, arg2)):
                FuncBase(n, r, ar1, ar2), func(fc) {}
void call() {
    arg1 ar1;
    arg2 ar2;
    cout << "You chose the " << getName() << " function" << endl; 
    cout << "Enter a " << getA1() << ": "; 
    cin  >> ar1;
    cout << "Enter a " << getA2() << ": "; 
    cin  >> ar2; 

    if (getRet() != "void") {
        ret val = (*func)(ar1, ar2);
        cout << getName() << " returned " << val << endl; 
    }
    else (*func)(ar1, ar2); 
    cout << endl; 
}

private:
// pointer to function
ret(*func)(arg1, arg2);
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:57:08.533

对于失败的模板实例化，`func`是一个接收两个参数并具有`void`返回类型的函数指针。那`ret`就是`void`。返回类型为 void 的函数不返回任何内容。当然，您无法读取调用的返回值，`(*func)()`因为您说没有返回值。

即使读取返回值的分支不会被执行，它仍然需要编译并通过静态类型检查。这里的基本问题是调用`*func()`是在编译时处理的，并且是编译时静态类型检查。

这个[Stack Overflow](https://stackoverflow.com/questions/9625526/check-at-compile-time-if-template-argument-is-void)问题涵盖了与您完全相同的问题，并且接受的答案显示了如何处理该问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:59:47.977

我假设“arg1”、“arg2”和“ret”都是模板参数。鉴于此，即使代码会将您带到运行时路径`(*func)(ar1, ar2)`，编译器仍然必须编译`ret val = (*func)(ar1, ar2);`，这对于返回 void 的函数没有意义。我认为这是给你的错误。你能给我们提供更多的代码吗？

编辑：好的，既然我看到了您要执行的操作，您将需要这样的东西来执行 void 和 non-void 函数，每个函数具有不同的行为：

```
int foo(){ return 5; }
void bar(){}

struct executor
{
    template <typename T>
    void exec( T (*func)())
    {
        T ret = (*func)();
        cout << "Non-void function called, returned " << ret << endl;
    }

    void exec( void (*func)())
    {
        (*func)();
        cout << "void function called" << endl;
    }
};

int main()
{

    executor ex;
    ex.exec(foo);
    ex.exec(bar);

    return 0;
} 
```

# python - 使用日期时间键进行字典搜索

> ID：10590126
> 
> 赞同：4
> 
> 时间：2012-05-14T19:53:18.993
> 
> 标签：python, dictionary, indexing, python-2.7

我有时间序列数据，我目前存储在字典“键”是`datetime.datetime`对象的字典中。类似于以下内容：

```
data[datetime.datetime(2012,5,14,15,28,2)]={'error':error,'flags':flags,'value':value} 
```

我的问题是：**找到指定时间最接近的两次（之前和之后）的最佳方法是什么？**我需要这个函数尽可能快，因为它在两个最近点之间线性插值的循环内被调用 (~10,000)。

* * *

我目前有一种方法需要很长时间，因为它搜索所有键（〜50,000）：

```
def findTime(time):
    keys=data.keys()
    bdt=10000000000000000000
    adt=10000000000000000000
    minKey=False
    maxKey=False
    for key in keys:
        dt=(time-key).total_seconds()
        if abs(dt)<bdt and dt>0:
            bdt=abs(dt)
            minKey=key
        elif abs(dt)<adt and dt<0:
            adt=abs(dt)
            maxKey=key
    return minKey,maxKey 
```

* * *

我尝试使用 bisect：

```
def findTime(time):
    keys=data.keys()
    l,r = bisect.bisect_left(time,keys), bisect.bisect_right(time,keys)
    return l,r 
```

不幸的是，这会产生一个错误：

```
TypeError: 'datetime.datetime' object does not support indexing 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:07:02.097

这些`bisect`函数将排序数组（或列表，或者实际上任何可以索引的东西）作为它们的第一个参数。 `keys`是一个未排序的数组，您将它作为第二个参数传递。

这应该有效：

```
def findTime(time):
    keys = sorted(data.keys())
    return bisect.bisect_left(keys, time), bisect.bisect_right(keys, time) 
```

尽管您应该保留已排序的副本以用于未更改数据的重复搜索，而不是每次都重新排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:42:10.343

你最好为你的 dict 使用不同的键。

有两个很明显。

1) 您可以使用[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)日期格式作为字符串。这本质上是`YYYY-MM-DD`格式。您也可以使用`YYYY-MM-DD:HH:MM:SS`格式。ISO 8601 的一个属性是词法排序，因此在已排序的键列表中，只需取插入点上方和下方的两个排序键。

2）您可以使用日期的浮点表示，整数部分是与千年标记的日期偏移量，而浮点数是当天的小数部分，然后可以轻松转换为 HH:MM:SS。Excel 和 Windows 和 Unix 使用这种方法。

1）的例子：

```
>>> datetime.datetime.fromtimestamp(time.time()).isoformat()
'2012-05-14T13:55:22.142548'  # a hashable, sortable dict key based on time 
```

2）的例子：

```
>>> time.time()               # That is days and fraction of day since 1/1/1970 
1337028447.499273             # THAT is you dict key
>>> datetime.datetime.fromtimestamp(time.time()).timetuple()
time.struct_time(tm_year=2012, tm_mon=5, tm_mday=14, tm_hour=13, tm_min=52, tm_sec=13, tm_wday=0, tm_yday=135, tm_isdst=-1) 
```

无论哪种情况，Python 都能够在几毫秒内管理 50,000 个元素的数据结构。

根据需要将时间戳转换为日期时间对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T20:08:07.447

基于`bisect`模块创建索引似乎是一个值得深入研究的想法。但是，通过查看文档，您会看到 bisect 函数将排序列表作为第一个参数，而不是第二个参数。

尝试：

```
keys=sorted(data.keys())
bisect.bisect_left(keys,time), bisect.bisect_right(keys,time) 
```

此外，您可以尝试通过在`keys`函数之外构造对象来优化代码`findTime`。如果您`data`的字典没有通过您的`findTime`调用序列进行修改，您只需支付一次排序列表的构建费用。

# java - 在简单的数据库驱动的 Java Web 应用程序中使用异常

> ID：10590127
> 
> 赞同：3
> 
> 时间：2012-05-14T19:53:20.933
> 
> 标签：java, exception, web-applications, exception-handling, dao

我有一个关于中型 Java Web 应用程序中的异常的问题。有一个使用 JDBC 实现的数据访问层，其逻辑主要集中在一个 servlet 中（UI 是 JSP）。像这样的应用程序的常规异常层次结构是什么？

我应该在数据访问层捕获异常并重新抛出另一个异常（例如DataAccessException）还是让最高级别处理它们（servlet）。

此外，我有一个在数据访问层中调用的连接池，它有自己的异常类型。这些异常应该在数据访问层内部捕获并作为DataAccessException重新抛出，还是应该由更高级别直接处理？

有两个孩子的主要应用程序异常是个好主意：LogicException 和 TechnicalException。Logic 将具有类似于 AuthentificationFailedException 等的子类，而 TechnicalExceptions 将负责传达有关失败的信息，例如数据访问层异常、FileNotFound（应该是）等等？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:34:50.067

通常，在应用程序的任何给定层中，您都希望捕获的异常对该层有意义。因此，您不希望在 Servlet（或 MVC 控制器）中捕获 SybaseException，因为您可能有一个 DAO 层来隐藏该级别的实现细节。

夫妇一般提示：

*   您应该配置您的 apache+servlet 容器以在 500 错误时返回一个合理的页面。
*   您的控制器应该使用用户友好的消息来包装大多数错误。捕获的异常应该为控制器提供足够的信息来制定合理的消息。
*   我会考虑使用基本应用程序异常子类化 RuntimeException，它既包含技术错误消息，也包含本地化的用户错误消息。
*   想想当你捕捉到异常时你想做什么*。*设计您的例外，以便可以直接执行您需要的操作。

最后，并不是每个人都会同意这一点，但是您可以提出一个强有力的理由，让您的所有异常都成为 RuntimeException 的子类，这样它们就不会被检查。我已经在许多采用这种方法的大型代码库上工作过，它通常工作得很好，并且减少了很多 catch-rethrow 样板代码。仅仅因为 java 提供了检查异常，并不意味着你必须使用它们。这显然是我的观点，但重要的是要意识到并非每个人都使用检查异常，事实上，许多代码库会明确避免它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:05:30.863

在应用程序中，我看到所有异常都在抛出它们的层中被捕获，包装在更通用的异常中（在您的情况下为 DataAccessException），然后以这种方式重新抛出。这是因为通常引发异常的层没有足够的上下文信息，因此无法决定如何以适当的方式处理错误。处理这些异常的最佳位置是位于引发异常的层的正上方的层：它有足够的信息来“优雅地失败”，而不会让该异常在堆栈跟踪上走得太远。在您的情况下，在 servlet 中捕获异常就可以了。

但是异常的层次结构取决于您正在处理的应用程序。您的逻辑技术部门可能是一个不错的选择……也可能不是。:) 在“异常处理”中没有“正确”的选择，而且这是一个过于复杂的论点，无法在单个问答对中处理。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T20:28:52.090

通常，我用更高级别、更有意义的异常来包装较低级别的异常。这通常需要更多的工作，但可以让您在层之间解耦。

想象一下，我正在编写一个恰好从数据库读取的配置子系统。如果我不包装，我会有类似的东西：

```
public String getConfigurationProperty(String name) throws SQLException {
    // Try to read from my configuration table
} 
```

如果我做包装，我会

```
public String getConfigurationProperty(String name) throws ConfigurationException {
    try {
        // Try to read from my configuration table 
    } catch (SQLException ex) {
        ConfigurationException wrapper = // Some subclass of ConfigurationException that wraps ex
        throw wrapper;
    }
} 
```

这肯定是更多的工作。优点是，如果以后我想将我的配置后端更改为基于文件的后端，没有包装器，我的方法将变为

```
public String getConfigurationProperty(String name) throws IOException {
    // Try to read from my configuration file
} 
```

然后我将不得不更改*我的所有客户端代码*以处理`IOException`s 而不是`SQLException`s。如果您进行包装，您只需要更改后端，因为您的客户端代码已经在编写时考虑了`ConfigurationException`s 及其子类。请注意，这与您使用已检查或未检查的异常无关：如果您想要进行异常处理，您几乎总是需要至少知道要处理的异常类型的一些近似值。

现在，这就是我倾向于做的事情。有人认为无论如何都无法正确处理大多数异常，并且大多数情况下所有这些包装都是无稽之谈。

```
public String getConfigurationProperty(String name) throws ConfigurationException {
    try {
        // Try to read from my configuration file 
    } catch (IOException ex) {
        ConfigurationException wrapper = // Some subclass of ConfigurationException that wraps ex
        throw wrapper;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T20:09:44.730

我还参与开发一个中等规模的 Web 应用程序。我们使用的方法是将异常从数据库层抛出到处理逻辑的 servlet，该逻辑捕获它们并向用户生成正确的错误消息。

这是....**不是**国际海事组织的方式。原因：整个 servlet 现在都依赖于实现。假设我们想要切换实现（我们现在想要）。我们现在需要更改服务集其余部分中的每个捕获，因为新实现不会抛出相同的异常。通用异常是正确的选择。

不仅例外，业务对象也应该是通用的。最好是接口。这将允许您更轻松地更改实现，而您的 locig 处理代码将在您的 servlet 整个生命周期中依赖于相同的对象。

# php - 显示来自 mySQL 数据库的结果...如何在 X 结果后添加表？

> ID：10590131
> 
> 赞同：0
> 
> 时间：2012-05-14T19:54:02.280
> 
> 标签：php, mysql, search

我有一个脚本，它从 mySQL 数据库获取结果，然后输出它们，每行 4 个，总共 20 个。有点像：

```
X X X X
X X X X
X X X X
X X X X 
```

我想要做的是让脚本在前 4 行之后输出一段代码（然后我将对其进行 HTMLify）。我该怎么做？所以结果将是：

```
X X X X
something else
X X X X
X X X X
X X X X 
```

这是我当前的代码：（注意我故意删除了 mySQL 查询和那些东西，以使其更容易）。

```
<table width="100%" border="0" cellspacing="1" cellpadding="3">
<? 
$columns = 4;
$results = 20;
for($i = 0; $i < $results; $i++)
{           
if($i % $columns == 0) { ?>
<tr height="15" valign="top">
<? } ?>
<td width="20%">OUTPUT GOES HERE</td>
<? if(($i % $columns) == ($columns - 1) || ($i + 1) == $results) { ?>
</tr>
<? } ?>
<? } ?>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:57:27.640

```
if ($i == 4) { /* Or 5 if you only want to show it when $results > 4 */
  echo '<tr><td colspan="4">something else</td></tr>';
} 
```

还是我错过了一些重要的东西？

顺便说一句，我认为你的代码真的很难阅读和维护。我会首先构建一个我想要的二维数组，然后输出它。

# objective-c - 如何随机重新排列多个相应 NSMutableArrays 中的数据？

> ID：10590136
> 
> 赞同：0
> 
> 时间：2012-05-14T19:54:08.267
> 
> 标签：objective-c, nsmutablearray, shuffle

我有一个带有动物图像的数组，另一个带有相应动物声音的数组，最后一个带有动物名称的数组。例如：

**图像数组：**

0：`[UIImage imageNamed:@"Elephant.png"]`
1：`[UIImage imageNamed:@"Dog.png"]`
2：`[UIImage imageNamed:@"Cat.png"]`

**声音数组：**

0：大象
.mp3 1：狗.mp3
2：猫.mp3

**单词数组：**

0：大象
1：狗
2：猫

它们是同步的，并与同一个计数器一起工作。我想开始将它们随机排列在新的 3 个数组中，但我希望相同的动物细节（图像或声音或单词）在所有 3 个数组中都相同。例如，新数组应如下所示：

**图像数组：**

0：`[UIImage imageNamed:@"Cat.png"]`
1：`[UIImage imageNamed:@"Dog.png"]`
2：`[UIImage imageNamed:@"Elephant.png"]`

**声音数组：**

0：猫.mp3
1：狗.mp3
2：大象.mp3

**单词数组：**

0：猫
1：狗
2：大象

我将这段代码写到视图中确实加载了：

```
theNewAnimalsPicture = [NSArray arrayWithObjects:[UIImage imageNamed:@"Square_Bee.png"],[UIImage imageNamed:@"Square_Bird.png"],[UIImage imageNamed:@"Square_Cat.png"],[UIImage imageNamed:@"Square_Chicken.png"],[UIImage imageNamed:@"Square_Cow.png"],[UIImage imageNamed:@"Square_Dog.png"],[UIImage imageNamed:@"Square_Elephant.png"],[UIImage imageNamed:@"Square_Frog.png"],[UIImage imageNamed:@"Square_Horse.png"],[UIImage imageNamed:@"Square_Lion.png"],[UIImage imageNamed:@"Square_Monkey.png"],[UIImage imageNamed:@"Square_Sheep.png"], nil];
theNewAnimalsSound = [NSArray arrayWithObjects:@"Bee.mp3",@"Bird.mp3",@"Miao.mp3",@"Chicken.mp3",@"Cow.mp3",@"Waff.mp3",@"Elephant2.mp3",@"Frog.mp3",@"Horse.mp3",@"LionSound.mp3",@"Monkey_Sound.mp3",@"Sheep.mp3", nil];
theNewAnimalsWord = [NSArray arrayWithObjects:@"Bee",@"Bird",@"Cat",@"Chicken",@"Cow",@"Dog",@"Elephant",@"Frog",@"Horse",@"Lion",@"Monkey",@"Sheep", nil];

for (int i =0;i<[theNewAnimalsPicture count];i++)
{
    int number = arc4random() % [theNewAnimalsPicture count];
    [PicturesAnimalArray addObject:[theNewAnimalsPicture objectAtIndex:number]];
    [SoundsAnimalArray addObject:[theNewAnimalsSound objectAtIndex:number]];
    [wordAnimalArray addObject:[theNewAnimalsWord objectAtIndex:number]];
    [theNewAnimalsPicture removeObjectAtIndex:number];
    [theNewAnimalsSound removeObjectAtIndex:number];
    [theNewAnimalsWord removeObjectAtIndex:number];
} 
```

它不工作。为什么会这样，我怎样才能以比我在这里做的更有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:44:55.743

这里最好的做法是创建一个类，封装一个单词、声音和图片。

### 动物.h

```
@interface Animal : NSObject
{
}

@property (nonatomic, retain) UIImage *picture;
@property (nonatomic, copy) NSString *word;
@property (nonatomic, copy) NSString *soundFile;

+ animalWithPicture:(UIImage *) aPicture word:(NSString *) aWord soundFile:(NSString *) aSoundFile;
- initWithPicture:(UIImage *) aPicture word:(NSString *) aWord soundFile:(NSString *) aSoundFile;

@end 
```

### 动物.m

```
#import "Animal.h"

@implementation Animal
@synthesize picture = _picture;
@synthesize word = _word;
@synthesize soundFile = _soundFile;

+ animalWithPicture:(UIImage *) aPicture word:(NSString *) aWord soundFile:(NSString *) aSoundFile
{
    return [[[self alloc] initWithPicture:aPicture word:aWord soundFile:aSoundFile] autorelease];
}

- initWithPicture:(UIImage *) aPicture word:(NSString *) aWord soundFile:(NSString *) aSoundFile
{
    self = [super init];
    if (!self) return nil;

    // WARNING, make sure you understand the side effects of using
    // the property accessor methods during "init" and "dealloc".
    // In this case, there should be no issue.

    self.picture = aPicture;
    self.word = aWord;
    self.soundFile = aSoundFile;

    return self;
}

- (void) dealloc
{
    self.picture = nil;
    self.word = nil;
    self.soundFile = nil;
    [super dealloc];
}

@end 
```

然后，您可以简单地使用一个数组来包含每个动物对象。还可以考虑将您的动物信息存储在 plist 文件中，而不是像我在这里所做的那样对值进行硬编码：

```
NSMutableArray *animals = [NSMutableArray array];

[animals addObject:[Animal animalWithPicture:[UIImage imageNamed:@"Square_Bee.png"] word:@"Bee" soundFile:@"Bee.mp3"]];
// ... etc ...
[animals addObject:[Animal animalWithPicture:[UIImage imageNamed:@"Square_Sheep.png"] word:@"Sheep" soundFile:@"Sheep.mp3"]]; 
```

* * *

有关为什么在 and 中使用访问器方法的信息`init`，`dealloc`请参阅[此答案](https://stackoverflow.com/questions/5932677/initializing-a-property-dot-notation/5932733#5932733)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:55:55.803

1.  我不会直接将图像数据存储在数组中。相反，您可以存储图像文件名。
2.  当您从数组中删除对象时，它会重新索引。

您可以使用 NSDictionary 来存储图像文件名、声音文件名和单词组合集。

示例代码：

```
#define kImageFileName   @"ImageFileName"
#define kSoundFileName     @"SoundFileName"
#define kWord           @"Word" 

NSDictionary *animalRecord = [[NSDictionary alloc]initWithObjectsAndKeys:
                              @"Square_Bee.png", kImageFileName,
                              @"bee.mp3", kSoundFileName,
                              @"Bee", kWord,                              
                              nil];

NSMutableArray *myArray = [[NSMutableArray alloc]init];
[myArray addObject:animalRecord];
// you would need to create some kind of loop and create animalRecord and add it to your myArray for all your picture/sound/word comnination sets.

//To retreive each record
int i = 0; // for example
NSString *imageFileName = [[myArray objectAtIndex:i] objectForKey:kImageFileName];  //with the filename, you can can the image whenever you need
NSString *soundFileName = [[myArray objectAtIndex:i] objectForKey:kSoundFileName];
NSString *word  = [[myArray objectAtIndex:i] objectForKey:kWord];

//to rearrange myArray's objects in random order, try this

 // This piece of code is from this [SO][1]
NSUInteger count = myArray.count;
for (NSUInteger i = 0; i < count; ++i) 
{
    // Select a random element between i and end of array to swap with.
    int nElements = count - i;
    int n = (arc4random() % nElements) + i;
    [myArray exchangeObjectAtIndex:i withObjectAtIndex:n];
} 
```

链接到数组重排[SO](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T20:38:29.460

另一种方法是创建一个新对象，例如“动物”。Animal 对象将具有三个属性：图片、声音、名称。

然后，您可以使用单个数组并将动物对象添加到数组中。然后遍历数组。

# opengl - OpenGL 片段着色器未写入 fbo 颜色缓冲区

> ID：10590137
> 
> 赞同：1
> 
> 时间：2012-05-14T19:54:10.990
> 
> 标签：opengl, glsl, fbo

我无法从片段着色器写入 FBO 中的颜色缓冲区。这个想法是绘制到这个纹理，然后把这个纹理绘制成一个四边形。问题是，着色器在绘制到默认窗口缓冲区时起作用，因为如果我删除 FBO，则会显示场景。并且四边形的纹理也有效，我用导入的纹理尝试了它，它显示了。我得到的只是黑屏。可能出了什么问题？:(

创建 FBO 的代码：

```
glGenFramebuffers(1, &fbo);
glBindFramebuffer(GL_FRAMEBUFFER, fbo);

glGenRenderbuffers(1, &depthbuff); //Add a depth renderbuffer for depth testing
glBindRenderbuffer(GL_RENDERBUFFER, depthbuff);
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT, width, height);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthbuff);

//Add the buffer to be drawn to and the buffer for the picking information
glGenTextures(1, &drawbuff);
glBindTexture(GL_TEXTURE_2D, drawbuff);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, drawbuff, 0);

glGenTextures(1, &pickingbuff);
glBindTexture(GL_TEXTURE_2D, pickingbuff);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, pickingbuff, 0); 
```

渲染代码：

```
glBindFramebuffer(GL_FRAMEBUFFER, fbo);
GLenum buffers[] = { GL_COLOR_ATTACHMENT0, GL_COLOR_ATTACHMENT1 };
glDrawBuffers(2, buffers);

shader->bind(); //If the three lines above are removed, it draws correctly to the window
drawStuff(); 
```

四边形代码：

```
quadshader->bind();
glEnable(GL_TEXTURE_2D);
int drawTexID = quadshader->uniformLocation("drawTex");

glActiveTexture(GL_TEXTURE0);
//glBindTexture(GL_TEXTURE_2D, anotherTexture); //This works. A texture imported from a TGA
glBindTexture(GL_TEXTURE_2D, drawbuff);
glUniform1i(drawTexID, 0);

drawQuad(); 
```

最后，片段着色器，我只是将其设置为将所有内容绘制为纯色：

```
void main(void) {
    gl_FragData[0] = vec4(1.0, 1.0, 0.0, 1.0);
    gl_FragData[1] = vec4(0.0, 1.0, 1.0, 1.0);
} 
```

编辑：如果有任何帮助，整个事情都在 Qt GLWidget 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:23:11.337

您是否小心确保您的纹理不会同时绑定到采样器（glBindTexture）和帧缓冲区？我相信如果您在绑定到活动采样器时尝试写入纹理，或者如果您尝试在纹理附加到活动帧缓冲区时对其进行采样，则该行为是错误或未定义的。

# tsql - T-SQL：在记录列表中显示或不显示值

> ID：10590138
> 
> 赞同：-1
> 
> 时间：2012-05-14T19:54:17.173
> 
> 标签：tsql

我有一张客户、订单和物品的表格。我想写一份报告，每行有一个客户（在这个例子中，我假设每个客户一个订单）以及是否订购了某些物品。

***客户***：

```
ID  
名

```

***订单***：

```
ID
客户 ID

```

***项目***：

```
ID
订单编号

```

如果尚未订购特定项目（例如苹果），我在显示行时遇到问题

我想要一份包含 3 列的报告：

*   名
*   苹果
*   香蕉

这是我正在使用的查询：

```
SELECT c.firstName, i_apple, i_banana
FROM customers
LEFT JOIN orders o ON c.id = o.customers_id
LEFT JOIN items i_apple ON o.id = i_apple.orders_id
LEFT JOIN items i_banana ON o.id = i_banana.orders_id
WHERE i_apple = 'apple' AND i_banana = 'banana' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:38:12.043

一切都很好，但是您需要在连接的 ON 子句中过滤外连接，否则您会将外连接变成内连接。我已经`Name`在 Items 中添加了列，但它可能应该是`ProductID`Product 表的外键，带有 ProductName。

```
SELECT c.firstName, i_apple.Name Apple, i_banana.Name Banana
FROM customers
LEFT JOIN orders o 
  ON c.id = o.customers_id
LEFT JOIN items i_apple 
  ON o.id = i_apple.orders_id
 AND i_apple.Name = 'apple'
LEFT JOIN items i_banana 
  ON o.id = i_banana.orders_id
 AND i_banana.Name = 'banana' 
```

# html - 如何使整页居中？

> ID：10590140
> 
> 赞同：0
> 
> 时间：2012-05-14T19:54:40.003
> 
> 标签：html, css, centering

如何使整页居中？我尝试添加我的 object.css.css 文件：

```
#content {
  width: 700px ;
  margin-left: auto ;
  margin-right: auto ; 
```

}

但这没有帮助。我也试过：

```
.field
{
  margin:auto;
  width:70%;

} 
```

但这不包括`h1`元素

谢谢。编辑：http: [//imgur.com/2fzfJ](http://imgur.com/2fzfJ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:06:36.413

这不是一个真正的 Ruby on Rails 问题，而是一个 HTML/CSS 问题。您的样式表应包含以下内容：

```
body {
    text-align: center;
} 
```

当然，您的布局包含的任何其他内容都可以产生其他效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:02:13.833

要在您使用的页面上居中元素`margin:0 auto;`并设置宽度，但要在您将使用的元素内居中文本`text-align:center;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T20:16:26.853

为了使内容居中，我们首先将页面包装在一个 div 中，然后在该包装器 div 中将 #content 居中。

你的CSS看起来像：

```
 #wrapper {
      width: 100%;
      height: auto;
 }
 #content {
      margin: 0 auto;
      width: 700px;
 } 
```

你的 html 看起来像：

```
 <div id="wrapper">
     <div id="content">
        Content Stuffs
     </div>
 </div> 
```

# jquery - 如何在 dataTables 中创建选择过滤器（从表中）？

> ID：10590144
> 
> 赞同：-1
> 
> 时间：2012-05-14T19:55:04.433
> 
> 标签：jquery, forms, filter, datatables

我想制作一个小表格来对下表执行选择过滤器：

```
<table id="example">
    <thead>
        <tr>
            <th>Name</th>
            <th>Surname</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Michael</td>
            <td>Jordan</td>
        </tr>
        <tr>
            <td>Michael</td>
            <td>Jackson</td>
        </tr>
        <tr>
            <td>Bruno</td>
            <td>Mars</td>
        </tr>
    </tfoot>
</table> 
```

我该怎么做？

它应该类似于这个例子[http://www.datatables.net/release-datatables/examples/api/multi_filter_select.html](http://www.datatables.net/release-datatables/examples/api/multi_filter_select.html)但是这两个字段都不应该在表格的底部，而是在页面的另一部分.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:31:49.497

这是一种解决方案。它会自动生成`select`元素。

```
$("#example > thead th").each(function(i) {
    $("<select />").attr("data-index", i).html($("<option />")).change(function() {
        $("#example > tbody > tr").show().filter(function() {
            var comb = [], children = $(this).children();
            children.each(function(i) {
                var value = $("select[data-index='" + i + "']").val();
                if (value == $(this).text() || value == "") comb.push(1);
            });
            return comb.length != children.length;
        }).hide();
    }).appendTo("body");
});
$("#example > tbody tr").each(function() {
    $(this).children().each(function(i) {
        var that = $(this);
        var select = $("select[data-index='" + i + "']");
        if (!select.children().filter(function() {
            return $(this).text() == that.text();
        }).length) {
            select.append($("<option />").text($(this).text()));
        }
    });
});​ 
```

**演示：http:** [//jsfiddle.net/xXj5F/](http://jsfiddle.net/xXj5F/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:23:49.813

我认为你需要这样的东西：

```
var alreadyOrdered = false;
$('#example tr th').on('click', function() {
    var index = $(this).index(),
        rows = [];
    $('#example tbody tr').each(function() {
        rows.push(this)
    });
    if (alreadyOrdered == false) {
        rows.sort(function(a, b) {
            return $('td:eq(' + index + ')', a).text() > $('td:eq(' + index + ')', b).text();
        });
        alreadyOrdered = true;;
    } else {
        rows.sort(function(a, b) {
            return $('td:eq(' + index + ')', a).text() < $('td:eq(' + index + ')', b).text();
        });
        alreadyOrdered = false;
    }
    $('#example tbody').empty().append(rows);
});​ 
```

[演示](http://jsfiddle.net/thesystemrestart/5UBaK/2/)

# c# - 一次性物品应该传入吗？

> ID：10590145
> 
> 赞同：14
> 
> 时间：2012-05-14T19:55:04.440
> 
> 标签：c#

在代码审查中，一位同事更改了我的代码以将 Stream 作为参数传递。他说这是为了确保调用者清楚处理对象的责任。某种意义上我可以感同身受。我希望对象创建者也负责清理。

另一方面，这两种方法都`using`没有更清楚地说明需要。我也更喜欢更简单的方法调用。

拿

```
 public static TextReader Serialize<T>(T obj) where T: new()
    {
        if (obj == null) throw new ArgumentNullException("obj");
        return Serialize<T>(obj, null);
    } 
```

VS

```
 public static void Serialize<T>(T obj, TextWriter outbound) where T : new()
    {
        if (obj == null) throw new ArgumentNullException("obj");
        Serialize<T>(obj, outbound, null);
    } 
```

添加额外参数是否有任何技术原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T19:58:54.663

这完全取决于您的代码架构。

我个人喜欢第二种方法（即使它增加了一个参数），其中函数的*定义**表明*它不会关闭/处理流，但这取决于调用者。

当您要在同一个流上调用相同的函数时，这非常有用，因为如果您想象每个函数调用都会关闭并重新打开流，它会成为资源消耗操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T19:59:06.223

您可能已经打开了一个 TextWriter。这就是为什么我更喜欢第二个版本。此外，它还缩小了 Serialize 方法的作用范围：它序列化了，但它不打开任何东西。打开是一个不同的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T20:11:45.977

随着项目的发展，在**第一种**方法中维护代码的程序员可能不记得关闭流是调用代码的责任（尤其是在不平凡的情况下）。调用者必须依靠文档来做正确的事情，每个人都阅读文档，对吗？;)

第二种**方法**更好地[“平衡”资源](http://pragprog.com/the-pragmatic-programmer/extracts/balance-resources)。它使责任分离的位置更加清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T20:01:37.857

重载的 Serialize-T 方法创建流？如果是这种情况，我更喜欢＃1，因为它使“使用”更简单：

```
using (var stream = Serialize(a_T)))
{
    // Do something else with the stream?
} 
```

另一方面，调用者提供流可能会更好，在这种情况下，您希望在选项 2 中传递一个。

# sql-server - 如何对具有相同布局的两个表进行完全外连接而不重复？

> ID：10590146
> 
> 赞同：2
> 
> 时间：2012-05-14T19:55:04.777
> 
> 标签：sql-server, tsql, join, full-outer-join

我必须使用相同布局（相同列）的表。有一个ID和其他数据。我需要一个只返回一个 ID 的查询，如果该 ID 在所需表中不可用，则将数据字段设置为 null。

例子：

```
Table A 
ID - Val1 - Val2
1 - 2 - 2
2 - 3 - 3
4 - 1 - 5

Table B
ID - Val1 - Val2
2 - 3 - 3
3 - 2 - 1
4 - 2 - 3

Result
ID - Val1A - Val2A - Val1B - Val2B
1 - 2 - 2 - NULL - NULL
2 - 3 - 3 - 3 - 3
3 - NULL - NULL - 2 - 1
4 - 1 - 5 - 2 - 3 
```

我正在使用 MS SQL Server。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:57:12.503

使用 coalesce 来获取非空 id，对于非匹配表，其他列将为空

```
select coalesce(a.id,b.id) as ID, Val1A , Val2A , Val1B , Val2B
from TableA a
Full outer join tableB b
ON <.....> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:08:32.863

```
SELECT COALESCE(a.ID,b.ID) AS ID, 
      a.Val1 AS TableA_Val1, 
      a.Val2 AS TableA_Val2, 
      b.Val1 AS TableB_Val1,
      b.Val2 AS TableB_Val2
FROM TableA a
FULL OUTER JOIN TableB b
ON a.ID = b.ID 
```

你可以在这里测试它：[http ://sqlfiddle.com/#!3/51b8c/3](http://sqlfiddle.com/#!3/51b8c/3)

# python - 列表上重叠对的 Python 组合

> ID：10590150
> 
> 赞同：1
> 
> 时间：2012-05-14T19:55:27.023
> 
> 标签：python, hadoop, combinations

我将 Python 脚本作为 Hadoop 流式作业运行，但这篇文章更多地与一些核心 Python 概念相关，而不是关于 Hadoop 的知识。

基本上我有一组线我想找到重叠

```
$ cat sample.txt
ID1    2143,2154,
ID2    2913,14545
ID3    2143,2390,3350,5239,6250
ID4    2143,2154,2163,3340
ID5    2143,2154,2156,2163,3340,3711 
```

我想最后找到重叠的记录对并计算它们，例如这里是这样的：

```
2143,2154    3
2143,2163    2
2143,3340    2
2154,2163    2
2154,3340    2
2163,3340    2 
```

我这样做的方法是创建一个用 Python 编写的 Hadoop 流作业，其中映射器基本上会输出给定行上的所有对组合，这些组合将由化简器进一步处理。

我的问题实际上很简单：如何在 Python 中**有效地**生成给定行中所有对的组合？请注意，在我的情况下，一对 (x,y) 与一对 (y,x) 相同。例如，`ID3`我想在我的映射器中生成以下列表：

```
[(2143,2390), (2143,2390), (2143,3350), (2143,5239), (2143,6250), (2390,3350), (2390,5239), (2390,6250), (3350,5239), (3350,6250), (5239,6250)] 
```

我当然可以用一堆 for 循环来做到这一点，但这很丑陋。我试过使用 itertools 但无法正确地从中得到一些东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T20:05:13.393

怎么样：

```
x = [2143, 2390, 3350, 5239, 6250]
itertools.combinations(x, 2) 
```

给出：

```
(2143, 2390) (2143, 3350) (2143, 5239) (2143, 6250) (2390, 3350) (2390, 5239) (2390, 6250) (3350, 5239) (3350, 6250) (5239, 6250) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T19:58:01.137

如果`l`是有问题的列表

```
[(x, y) for x in l for y in l if x < y] 
```

或者，您可以创建一个生成器：

```
def pairs(l):
  for x in l:
    for y in l:
      if x < y:
        yield x, y 
```

这具有能够“动态”生成对的优点，而不必同时将它们全部保存在内存中。

可以使用 来实现类似的东西`itertools.product(l, l)`，但这会产生两者`(x, y) and (y, x)`，并且还会产生像`(x, x)`. 要过滤掉这些，您必须执行以下操作：

```
itertools.ifilter(lambda (x,y): x < y, itertools.product(l,l)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T20:08:43.610

琐碎有什么不好

```
for i, x in enumerate(L):
    for y in L[i+1:]:
        whatever(x, y) 
```

?

这将调用`whatever`传递每对不同的元素（通过不同的我的意思是不同的索引，如果包含重复项`L`，它们可能相等）。`L`

# sql - 如何编写这个棘手的 SQL / JPA 查询？

> ID：10590153
> 
> 赞同：0
> 
> 时间：2012-05-14T19:55:47.040
> 
> 标签：sql, jpa

（我正在使用 Oracle 和 JPA（来自 Java EE 5、WebSphere 7））。

我有一个项目类，项目有一个任务列表。

每个任务都有一个序列号，因此我可以确定任务的顺序 (Task.seq)、分配的用户 (Task.userId) 和字符串状态 Task.status（“IN_PROGRESS”或“COMPELTE”）。项目的任务由其分配的用户按其数字顺序“完成”。

我的问题是......这是一个棘手的问题......我需要一个执行以下操作的查询：

给定一个用户 ID，找到该项目的当前任务分配给该用户的所有项目。（“当前任务”是在数字序列中找到的第一个状态为“IN_PROGRESS”的任务。）

我对 SQL 不是很好，而且对 JPA 很陌生——请帮忙！

PS。例如，这是我当前使用的查询，它可以让我获得所有填充了任务列表的 Project 对象：

```
select distinct p from Project p left join fetch p.taskList 
```

任何帮助是极大的赞赏！

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:07:19.883

就像是：

```
Select p from Project p join p.tasks t where t.user = :user and t.seq = (Select min(t2.seq) from Task t2 where t2 = t and t2.status = 'IN_PROGRESS') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:07:55.467

要考虑这一点，首先要为用户找到第一个任务。然后，加入项目信息，并选择您想了解的项目信息：

```
select distinct p.*
from (select userid, projectid, min(t.seq) as firstseq
      from Task t
      where t.userid = <userid> and 
            t.status = 'IN PROGRESS'
      group by userid, projectid
     ) u join
     Task t
     on t.projectid = u.projectid and
        t.seq = u.firstseq join
     Project p
     on p.projectid = u.projectid 
```

我假设该任务有一个 projectid，尽管您没有明确说明。

该解决方案应该适用于几乎任何数据库。

# git - 从另一个分支的子目录更新一个分支的根目录

> ID：10590156
> 
> 赞同：16
> 
> 时间：2012-05-14T19:56:08.703
> 
> 标签：git, github

在 github 上进行开发时，我经常在我的 master 分支中维护一个`html/`或`_site/`子目录，在那里我为项目生成基于 Web 的文档。我想切换到我的 gh-pages 分支，并将`pull`这个`html`目录的内容切换到 gh-pages 分支的根目录，这样它将通过 github 呈现为一个不错的网站（它会自动在`gh-pages`at 中呈现 html `username.github.com/repositoryname`）。执行此操作的最佳工作流程是什么？

如果我还没有设置 gh-pages 分支，我可以分支，清除分支，然后复制`html`目录的内容，然后，我已经准备好了一个站点。但我不确定以后如何最好地更新 gh-pages 分支。

```
git branch gh-pages
git checkout gh-pages
# Remove files I don't need from the gh-pages branch
rm -rf data/ man/ R/ README.md NEWS NAMESPACE DESCRIPTION demo/
# move documentation to the root
mv inst/doc/html/* .
# remove the rest
rm -rf inst/
git add *
git commit -a -m "gh-pages documentation"
git push origin gh-pages
git checkout master 
```

现在我应该怎么做才能稍后更新 gh-pages 分支？听起来这可能涉及[子树合并](https://git-scm.com/book/en/v1/Git-Tools-Subtree-Merging)，但我不太确定。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-14T22:02:34.510

要启动您的 gh-pages 分支：

```
true | git mktree | xargs git commit-tree | xargs git branch gh-pages 
```

要获取您想要的任何内容，请从主分支、读取树和提交中说 html 目录：

```
git checkout gh-pages
git read-tree master:html
git commit -m'gh-pages documentation'
git push origin gh-pages
git checkout master 
```

你就完成了。

后期添加：添加到 gh-pages 分支的顺序更短：

```
git commit-tree -p gh-pages -m "" master:html \
| xargs git update-ref refs/heads/gh-pages 
```

不需要刷新当前工作树

# sql - sql汇总不同的行

> ID：10590158
> 
> 赞同：0
> 
> 时间：2012-05-14T19:56:21.353
> 
> 标签：sql

我有一张名为游戏的桌子：

```
id  player_a_id  player_b_id  player_a_result  player_b_result  turn 
 1     1           2             1                 0              1 
 2     3           4             1                 0              1 
 3     1           3             1                 0              2 
```

我正在尝试编写一个 SQL 查询来制作表格的评级列表。像这样：

```
player_id  total score 
   1           2 
   2           0 
   3           1 
   4           0 
```

我不确定如何编写sql。一些帮助会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:21:32.727

```
SELECT player_id, SUM(result)
FROM
(SELECT player_a_id AS player_id, player_a_result AS result FROM games
UNION
SELECT player_b_id, player_b_result FROM games) AS u
GROUP BY player_id
ORDER BY player_id 
```

这就是我猜你所追求的。这将创建一个子查询（parens() 中的内容）将（UNION）玩家 a 和 b 组合成一组，然后按玩家分组并对结果求和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:01:34.107

嗯..你想如何获得ranking_score SUM？我的意思是你想要对哪些数字/列求和？如果您需要对同一列中的值求和，例如：

表格示例：

```
`id`  `player_id`  `number`
 1     1            1
 2     2            15
 3     1            20 
```

预期结果：

```
`player_id`  sum(`number`)
 1           21
 2           15 
```

你可以简单地使用这个：

```
SELECT player_id, SUM(`number`) FROM `table` GROUP BY player_id 
```

SUM 将计算所有行的结果，需要使用 GROUP BY 将总和除以 player_id。如果需要获取不同列的总和，则需要准备一个过程。

# forms - Symfony2 表单和 Doctrine2 - 更新分配实体中的外键失败

> ID：10590159
> 
> 赞同：4
> 
> 时间：2012-05-14T19:56:25.743
> 
> 标签：forms, symfony, doctrine-orm, symfony-forms

我有个人资料和研究。一个人可以完成许多学业。表单正确呈现。有一个“添加新研究”按钮，使用 jQuery，我添加了另一个基于数据原型的子表单，效果很好。当我提交带有新子表单的此类表单时，出现数据库错误

```
Integrity constraint violation: 1048 Column 'profile_id' cannot be null 
```

我理解这个错误，但我不知道如何摆脱它。我知道我可以在控制器中绑定后更新研究集合，但我希望有一种方法可以在注释中正确配置它。当我只更新实体时，一切正常。

代码是：

```
class Profile {
    /**
     * @var integer $profileId
     *
     * @ORM\Column(name="profile_id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $profileId;
...
    /**
     *
     * @var Study
     * @ORM\OneToMany(targetEntity="Study", mappedBy="profile", cascade={"persist", "remove"})
     */
    private $study;

    public function __construct()
    {
        $this->study = new \Doctrine\Common\Collections\ArrayCollection();
    }
...
} 
```

和

```
 class Study {
    /**
     * @var integer $studyId
     *
     * @ORM\Column(name="study_id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $studyId;
...
    /**
     * @var Profile
     *
     * @ORM\ManyToOne(targetEntity="Profile")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="profile_id", referencedColumnName="profile_id")
     * })
     */
    private $profile;
...
} 
```

带有 s(g) 字母。底层数据库结构是

```
CREATE TABLE IF NOT EXISTS `profile` (
  `profile_id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`profile_id`),
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `study` (
  `study_id` int(11) NOT NULL AUTO_INCREMENT,
  `profile_id` int(11) NOT NULL,
  PRIMARY KEY (`study_id`),
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

ALTER TABLE `study`
  ADD CONSTRAINT `study_fk2` FOREIGN KEY (`profile_id`) REFERENCES `profile` (`profile_id`); 
```

表单构建器是：

```
class ProfileType extends AbstractType {

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('study', 'collection', array(
                    'type' => new StudyType(),
                    'allow_add' => true,
                    'allow_delete' => true
                        )
                )
    }
...
} 
```

和

```
class StudyType extends AbstractType {

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
                ->add('city') //example field not included in above structures
    }
...
} 
```

Javascript 部分

```
function profileNewStudy() {
    var nr = $('[class^=profile_study_][class*=type2]').last().parent();
    nr = nr.attr('id').split('_');
    nr = nr.pop()*1 + 1;
    var proto = $('#profile_study').data('prototype');
    proto = proto.replace(/\$\$name\$\$/g, nr);
    $('#profile_study').append(proto).find('.profile_study_' + nr + ' input').val('qpa' + nr);
} 
```

和树枝模板

```
<form action="#" method="post" {{ form_enctype(form) }}>
    {{ form_widget(form) }}
    <input type="submit" value="Zapisz"/>
</form> 
```

出于测试目的，我从 study.profile_id 上的数据库约束 NOT NULL 中删除，然后保存除了 study.profile_id=null 之外的所有内容。

**在@Gremo 回答后编辑**

我做了一些测试。不幸的是，它没有帮助:(我用代码纠正了他的错误

```
class Profile
    /**
     * @var Study
     * @ORM\OneToMany(targetEntity="Study", mappedBy="profile")
     */
    private $study;
class Study
    /**
     * @var Profile
     * @ORM\ManyToOne(targetEntity="Profile", inversedBy="study")
     * @ORM\JoinColumn(nullable=false, onDelete="CASCADE", referencedColumnName="profile_id")
     */
    private $profile; 
```

当我在表单中添加新的研究实体并将其发布到服务器时出现错误：通过关系“Alden\xxxBundle\Entity\Profile#study”找到了一个新实体，该关系未配置为实体的级联持久操作：Alden \xxxBundle\Entity\Study@0000000073eb1a8b00000000198469ff。显式持久化新实体或在关系上配置级联持久化操作。如果您无法找出导致问题的实体，请执行“Alden\xxxxBundle\Entity\Study#__toString()”以获取线索。

所以我在配置文件中添加了级联：

```
/**
 * @var Study
 * @ORM\OneToMany(targetEntity="Study", mappedBy="profile", cascade={"persist"})
 */
private $study; 
```

并且比我在开始时遇到的错误：SQLSTATE [23000]：完整性约束违规：1048 列'profile_id'不能为空。

**编辑了** 我的控制器代码：

```
 $request = $this->getRequest();
    $r = $this->getProfileRepository();
    $profile = $id ? $r->find($id) : new \Alden\BonBundle\Entity\Profile();
    /* @var $profile \Alden\BonBundle\Entity\Profile */
    $form = $this->createForm(new ProfileType(), $profile);
    if ($request->getMethod() == 'POST')
    {
        $form->bindRequest($request);
        if ($form->isValid())
        {
            $vacation = $profile->getVacation();
            foreach($vacation as $v) {
                $r=5;
            }
            $em = $this->getEntityManager();
            $em->persist($profile);
            $em->flush();
            //return $this->redirect($this->generateUrl('profile_list'));
        }
    }
    return array(
        'profile' => $profile,
        'form' => $form->createView()
    ); 
```

**解决方案**

在 Profile 类中，重要的部分是级联，注释中的 orphanRemoval 和 setStudies() 中的 foreach 循环（感谢@Parhs 的建议）

```
/**
 * @var \Doctrine\Common\Collections\ArrayCollection
 * @ORM\OneToMany(targetEntity="Study", mappedBy="profile", cascade={"ALL"}, orphanRemoval=true)
 */
private $studies;

public function __construct()
{
    $this->studies = new \Doctrine\Common\Collections\ArrayCollection();
}

/**
 * @return Doctrine\Common\Collections\Collection
 */
public function getStudies()
{
    return $this->studies;
}

public function setStudies($studies)
{
    foreach ($studies as $v)
    {
        if (is_null($v->getProfile()))
        {
            $v->setProfile($this);
        }
    }
    $this->studies = $studies;
} 
```

在学习班

```
/**
 * @var Profile
 * @ORM\ManyToOne(targetEntity="Profile", inversedBy="studies")
 * @ORM\JoinColumn(name="profile_id", nullable=false, onDelete="CASCADE", referencedColumnName="profile_id")
 */
private $profile; 
```

和通常的 getter 和 setter。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:46:53.020

如果我理解正确，您的关系是双向的，因此您必须指定**拥有方**和**反方**。作为教义 2 文档：

*   **反面**必须使用OneToOne、OneToMany 或 ManyToMany 映射声明的 mappedBy 属性
*   **拥有方**必须使用 OneToOne、ManyToOne 或 ManyToMany 映射声明的 inversedBy 属性
*   ManyToOne 始终是**拥有方**，OneToMany 始终是 **反方**

所以我在第一个回答中搞砸了你的联想。在您的情况下`Profile`，必须是相反的一面，而学习应该是拥有的一面。但是您正在处理`Profile`，因此您需要`cascade`配置文件上的注释来保留新实体：

```
class Profile
{
    /**
     * Bidirectional (INVERSE SIDE)
     *
     * @ORM\OneToMany(targetEntity="Study", mappedBy="profile",
     *     cascade={"persist", "remove"})
     */
    private $studies;
}

class Study
{
    /**
     * Bidirectional (OWNING SIDE - FK)
     * 
     * @ORM\ManyToOne(targetEntity="Profile", inversedBy="studies")
     * @ORM\JoinColumn(nullable=false, onDelete="CASCADE")
     */
    private $profile;
} 
```

请注意，您的示例与Doctrine2 文档[中](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations)的示例完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:37:36.533

您必须将配置文件设置为实例。在控制器中。您还没有粘贴控制器代码。您应该遍历 $profile->getStudy 集合并为每个项目设置 ->setProfile=$profile。

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/composite-primary-keys.html#use-case-1-dynamic-attributes](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/composite-primary-keys.html#use-case-1-dynamic-attributes)

那里发生的事情不适用于表格..他实际上有一个 this 参考..嗯也许添加这是一种自动修复以避免迭代，不确定它是否有效，我会尝试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-10T06:16:37.997

您的解决方案对我不起作用。事实上，我已经建立了关系并定义了加法器、去除器、吸气剂，在我看到你的解决方案后，我添加了设置器。

但是，提交表单时没有调用我的设置器。

我的解决方案是另一个。

在加法器方法中，我添加了一个设置所有者的调用。

```
public function addStudie($studie)
{
     $studie->setProfile($this);
     $this->studies->add($studie);
} 
```

并且要在提交表单时调用此加法器，您需要将`by_reference`属性设置为添加到表单集合字段中`false`。

```
 $builder->add('study', 'collection', array(
                'type' => new StudyType(),
                'allow_add' => true,
                `by_reference` => false,
                'allow_delete' => true
                    )
            ) 
```

这是文档：

> 类似地，如果您使用 CollectionType 字段，而您的基础集合数据是一个对象（例如 Doctrine 的 ArrayCollection），那么如果您需要添加器和移除器（例如 addAuthor() 和 removeAuthor()），则必须将 by_reference 设置为 false叫做。

[http://symfony.com/doc/current/reference/forms/types/collection.html#by-reference](http://symfony.com/doc/current/reference/forms/types/collection.html#by-reference)

# javascript - Highcharts 加载数据而不是绘图

> ID：10590162
> 
> 赞同：1
> 
> 时间：2012-05-14T19:56:36.323
> 
> 标签：javascript, json, highcharts

我正在尝试将数据动态加载到 Highcharts 中，但我遇到了问题。我尝试以多种方式执行此操作，数据似乎已加载到 JS，但未绘制图表。

目前这是我在 jQuery`document ready`函数中的代码：

```
options = {
    chart: {
        renderTo: 'container',
        zoomType: 'x',
        animation: true,
    },
    title: {
        text: null
    },
    subtitle: {
        text: null
    },
    xAxis: {
        type: 'datetime',
        title: {
            text: null
        },
    },
    yAxis: {
        title: {
            text: 'Size',
        },
    },
    legend: {
        enabled: false
    },

   series: [{
        data: []
    }]
}

$.ajax({
        type: "GET",
        url: "works/load_data.php",
        data: "id=3&mdate=2012-02&mxdate=2012-03",
        success: function (items) {

            var obj = eval(items).load;
            var series = { data: [] };

            $.each(obj, function (itemNo, item) {
                series.data.push(item);
            });

            options.series.push(series);

        },
        cache: false,
});
var chart = new Highcharts.Chart(options); 
```

图表上什么也没有发生。但是，如果我登录到控制台图表选项，我会得到：

![在此处输入图像描述](../Images/8186c66cd0b0a21ed931f7cae2cd3994.png)

我的 PHP 正在回显这样的数据： `data = {load:[ {x: Date.UTC(2012,2,1,7,15), y: 0.012},{x: Date.UTC(2012,2,1,7,30), y: 0.068} ... ]}`

至少对我来说似乎还可以。但它不起作用:(有人可以告诉我我做错了什么吗？？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:19:46.767

AJAX 是异步的，这意味着调用发生在您渲染图表之后。在您的成功事件之后尝试创建图表，如下所示：

```
$.ajax({
        type: "GET",
        url: "works/load_data.php",
        data: "id=3&mdate=2012-02&mxdate=2012-03",
        success: function (items) {

            var obj = eval(items).load;
            var series = { data: [] };

            $.each(obj, function (itemNo, item) {
                series.data.push(item);
            });

            options.series.push(series);

            var chart = new Highcharts.Chart(options);

        },
        cache: false,
}); 
```

# jquery - a[href$=fgh.html] 选择器中的 $ 是什么意思

> ID：10590163
> 
> 赞同：1
> 
> 时间：2012-05-14T19:56:37.657
> 
> 标签：jquery

```
 a[href$=fgh.html] 
```

$ 在这里是什么意思。有没有办法了解更多关于符号的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:57:57.577

它的意思是“以*fgh.html*`<a>`结尾的 href 属性”。您可以在此处找到[完整的 CSS3 选择器参考](http://www.w3.org/TR/selectors/#selectors)。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T19:58:34.837

它是一个[以](http://api.jquery.com/attribute-ends-with-selector/)jQuery 结尾的选择器，因此它匹配所有以 .`href`结尾的 s `fgh.html`。

有关可能的选择器的更多信息，请参见：

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:58:39.263

这意味着`a`标签的href以`fhg.html`单词结尾。

它选择具有指定属性（此处，`href`）的元素，其值（此处，`fgh.html`）恰好以给定字符串结尾并且区分大小写。

[这里还有更多](http://api.jquery.com/attribute-ends-with-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T19:59:42.493

[jQuery 选择器](http://api.jquery.com/category/selectors/)

这将具有您发布的 Ends With 选择器以及所有其他选择器。*

# vim - vim 中有没有办法让 :W 和 :w 做同样的事情？

> ID：10590165
> 
> 赞同：17
> 
> 时间：2012-05-14T19:56:40.213
> 
> 标签：vim

:q 和 :Q 也是如此。我几乎总是没有足够快地放弃轮班，并且看到 :Q 和 :W 无论如何都没有被使用，我认为让它们与小写对应物一样会很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T20:18:14.147

hack 是通过 a `:cmap`or进行的`:cabb`，但这些都有副作用（即其他实例也会被无意转换）。

cmdalias[插件](http://www.vim.org/scripts/script.php?script_id=746)做得更好。

但我认为对于您的用例，最好定义自己的大写命令变体。主要挑战是支持原始选项的所有选项：

```
command! -bang -range=% -complete=file -nargs=* W <line1>,<line2>write<bang> <args>
command! -bang Q quit<bang> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T20:10:53.300

是的，您可以像这样在 .vimrc 中重新映射它们：

```
cabb W w
cabb Q q 
```

或者

```
cmap W w
cmap Q q 
```

缺点是“W”在两种情况下都会扩展为“w”（`cmap`显示变化，`cabb`不显示）。

在 Vim 中重新映射键以满足您的需要通常很容易。尝试查看以下教程：[在 Vim 中映射键](http://vim.wikia.com/wiki/Mapping_keys_in_Vim_-_Tutorial_%28Part_1%29)

**编辑：** 正如@IngoKarkat 指出的那样，这是一个骇人听闻的解决方案。我把它留在这里是因为它又快又容易。但是，缺点很明显。它会干扰其他用途。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T21:09:37.530

noremap 对我有用，没有已知的副作用

```
noremap :W :w 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-20T13:07:29.290

这不是您问题的答案，而是您问题的解决方案——“我几乎总是不会足够快地放弃轮班”。交换冒号和分号的意思。然后不需要移位，因为您将使用`;w`and `;q`。

```
nnoremap ; :
nnoremap : ;
vnoremap ; :
vnoremap : ; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-16T21:58:59.077

## 假设您正在寻找一种更快的方法`:wq`

真的这是`ESC`then `:`（它本身是`Shift`+ `;`） then `w`then `q`then的组合`Enter`。五次击键，如果算作`:`两次，则六次。

相反，尝试`ESC`then（按住）`Shift`再按`Z`then `Z`（根本不`:`）。它将立即保存并退出文件。少一次击键（或两次，取决于你如何计算）加上更难搞砸。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-06T11:09:23.530

您可以定义`W`并将`Q`以下条目添加到您的`.vimrc`：

```
command! W write
command! Q quit 
```

# javascript - fadeIn/fadeOut 在单击另一个 div 时指定 div？

> ID：10590166
> 
> 赞同：4
> 
> 时间：2012-05-14T19:56:50.227
> 
> 标签：javascript, jquery, html, fade, show-hide

我正在创造一些东西，我想知道是否有人可以帮助我解决一个问题。我不知道，如何制作一个始终隐藏指定 div id 并在单击另一个 div（例如按钮）时显示它的 javascript。编辑：

所以假设我有 4 个按钮。

```
<div class="section" id="info" style="margin-top: 0px; ">
<h3><a href="#">Button</a></h3>
</div>

<div class="section" id="search" style="margin-top: 0px; ">
<h3><a href="#">Button2</a></h3>
</div>

<div class="section" id="player" style="margin-top: 0px; ">
<h3><a href="#">Button3</a></h3>
</div>

<div class="section" id="socials" style="margin-top: 0px; ">
<h3><a href="#">Button4</a></h3>
</div> 
```

现在假设我在另一个 div 中有一个内容，我想在单击上面的第一个按钮时淡入。

```
 <div id="content-reveal">
    <p>something here</p>
    </div>

    <div id="content-reveal-2">
    <p>something here</p>
    </div>

    <div id="content-reveal-3">
    <p>something here</p>
    </div>

    <div id="content-reveal-4">
    <p>something here</p>
    </div> 
```

好的...所以位置已经设​​置，一切都在正确的位置。

`<div id="content-reveal">`所以......当有人点击我的按钮时，我怎样才能隐藏并显示它？

**我有 4 个不同的按钮，有 4 个不同的内容。所以点击同一个按钮，内容再次消失，点击另一个按钮，旧内容消失，新内容出现。**

简单的问题，对我来说艰巨的任务......

如果有人可以提供帮助，我真的很感激......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:10:08.307

似乎其他答案并没有完全得到 OP 正在寻找的东西。据我了解，OP希望：

*   `#content-reveal`在页面加载时隐藏
*   `#content-reveal`按下按钮时淡入
*   不需要切换`#content-reveal`（即，一旦显示，它应该保持显示）

基于此，这是我的解决方案：

```
$(document).ready( function() {
    $('#content-reveal').hide();
    $('#show-button').click( function() {
        $('#content-reveal').fadeIn( 500 );
    } );
} );​ 
```

jsfiddle在这里：http: [//jsfiddle.net/xK83w/](http://jsfiddle.net/xK83w/)

编辑：根据对 OP 问题的编辑，这里有一种方法可以完成您想要完成的工作：

```
$(document).ready( function() {
    $('#content-reveal').hide();
    $('#info').click( function() {
        $('#content-reveal').fadeOut( 500, function() {
            $('#content-reveal').html( '<b>info HTML</b>' );
            $('#content-reveal').fadeIn( 500 );
        } );
    } );
    $('#search').click( function() {
        $('#content-reveal').fadeOut( 500, function() {
            $('#content-reveal').html( '<b>search HTML</b>' );
            $('#content-reveal').fadeIn( 500 );
        } );
    } );
    // repeat for 'player' and 'socials'
} 
```

在这里更新了 jsfiddle：http: [//jsfiddle.net/xK83w/1/](http://jsfiddle.net/xK83w/1/)

但是，如果您的内容块包含大量 HTML，您可能需要考虑一种不同的方法，这样您的 Javascript 就不会有大量 HTML 文本的负担。例如，您可以有四个不同`div`的 s，并在它们之间进行选择，如下所示：

```
<div id="content">

    <div id="content-reveal-info">
    <ul id="newsticker_1" class="newsticker">
        <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</li>
        <li>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip...</li>
        <li>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum...</li>
        <li>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia...</li>
        <li>Bubble bubble ipsum dolor sit amet, consectetur adipisicing elit...</li>
    </ul>
</div>

<div id="content-reveal-search">
    <b>search HTML</b>
</div>

<div id="content-reveal-player">
    <b>player HTML</b>
</div>

<div id="content-reveal-socials">
    <b>socials HTML</b>
</div> 
```

然后创建一个函数来进行实际的切换：

```
var activeElement;

function activateElement( eltSuffix ) {
    if( activeElement ) {
        activeElement.fadeOut( 500, function() {
            activeElement = $('#content-reveal-'+eltSuffix);
            activeElement.fadeIn( 500 );
        } );
    } else {
        activeElement = $('#content-reveal-'+eltSuffix);
        activeElement.fadeIn( 500 );
    }
} 
```

然后最后连接你的事件处理程序：

```
$(document).ready( function() {
    $('#content div').hide();
    $('#info').click( function() {
        activateElement('info');
    } );
    $('#search').click( function() {
        activateElement('search');
    } );
    $('#player').click( function() {
        activateElement('player');
    } );
    $('#socials').click( function() {
        activateElement('socials');
    } );
} );​ 
```

jsfiddle在这里：http: [//jsfiddle.net/xK83w/1/](http://jsfiddle.net/xK83w/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:00:40.617

```
$('#info a').on('click', function(evt) {
   evt.preventDefault();
   $('#newsticker_1').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T20:02:43.347

使用 jQuery

```
$(document).ready(function(){
  $("#content-reveal").hide();
  $("#info").click(function(){
     $("#content-reveal").show();
   });

}); 
```

如果您想在每次单击后显示/隐藏，则代替`$("#content-reveal").show();`写入`$("#content-reveal").toggle();`

对于不带您到页面顶部的链接，请始终这样做

`<a href="jaavascript:void(0);">Button</a>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T20:00:21.293

这是 JQuery，不是普通的 javascript，但它可以帮助你，你有例子[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T20:03:55.860

```
<div class="section" id="info" style="margin-top: 0px; ">
<h3><a href="#" id="showDiv" rel="hidden">Button</a></h3>
</div>
<div id="content-reveal">
    <ul id="newsticker_1" class="newsticker">
        <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</li>
        <li>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip...</li>
        <li>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum...</li>
        <li>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia...</li>
        <li>Bubble bubble ipsum dolor sit amet, consectetur adipisicing elit...</li>
    </ul>
</div>

<script type="text/javascript">
$('#showDiv').click(function(e){
   e.preventDefault();
   if($(this).attr('rel') == 'hidden'){
      $('#content-reveal').show();
      $(this).attr('rel', 'shown');
   }
   else
   {
      $('#content-reveal').hide();
      $(this).attr('rel', 'hidden');
   }
}
</script> 
```

当然还有其他更简单和更小的方法可以做到这一点，但是看到你给出的这将是我的快速演绎，不会影响你已经拥有的东西的整体概念

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-14T20:18:44.020

这是我制作的一个快速 JSFiddle。建立在此处已经提供的概念之上。

[http://jsfiddle.net/Talty09/mv7qx/2/](http://jsfiddle.net/Talty09/mv7qx/2/)

编辑：使用 .toggle()

# android - 我可以使用 d3.js 在 android 应用程序中创建交互式可视化吗？

> ID：10590168
> 
> 赞同：21
> 
> 时间：2012-05-14T19:57:00.357
> 
> 标签：android, web-applications, visualization, d3.js

我正在尝试在 android 应用程序中创建交互式可视化。

将被可视化的数据将存储在本地的 sqlite 数据库中，并将被查询以生成可视化。

我还没有决定是构建原生应用还是网络应用。

根据我的研究，d3.js 似乎非常适合需求，但我不确定如何在移动环境中使用它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T03:28:50.147

您可以使用 WebView 组件轻松地将 Javascript 嵌入到 Android 应用程序中，也可以使用 PhoneGap 或类似平台。不幸的是，在 Android 3.0 之前，原生 android 浏览器不显示 svg，而 D3 是基于 SVG 的，因此在 android 2.3（或更低版本）浏览器中无法正常工作。然而，它确实可以在 Firefox 浏览器中使用。

另一种选择是在 WebView 或电话间隙中使用[InfoVis Toolkit 。](http://thejit.org/)InfoVis Toolkit 似乎在 Android 上运行得更好。

不知道有没有可比的Android可视化平台，但是D3，它的前辈Protovis、Flare、Prefuse都是开源的。您可以尝试将其中一个移植到 Android 上。

这是一个相关的问题：[移动（平板电脑）的可视化工具](https://stackoverflow.com/questions/9839451/visualization-tool-for-mobile-tablet)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-23T02:33:36.700

[按照本教程](http://www.appstoremarketresearch.com/articles/d3-js-pie-chart-android-webview/)，我让 D3 在我的 Android 应用程序上工作。从那里，很容易扩展教程的代码以满足我的需要。

这是本教程的略微修改版本（我添加了缩放控件和缩放）：

1.  创建一个 JS 资产文件夹（ProjectName/app/src/main/assets/js）
2.  下载 D3 ( [https://d3js.org/](https://d3js.org/) ) 并将缩小的 d3.min.js 源文件复制到 ProjectName/app/src/main/assets/js
3.  为 HTML 资产创建一个目录：(ProjectName/app/src/main/assets/html)
4.  创建文件 ProjectName/app/src/main/assets/html/graph.html。将此代码复制到新文件中：

```
<html>
<head>
    <script type="text/javascript" src="file:///android_asset/js/d3.min.js"></script>
    <script type="text/javascript" src="file:///android_asset/js/drawGraph.js"></script>
    <meta name="viewport" content="width=device-width, user-scalable=yes" />
</head>

<body>
<svg id="piechart"></svg>
</body>
</html> 
```

5.  创建将运行 D3 的 JS 文件：ProjectName/app/src/main/assets/js/drawGraph.js。向其中添加以下代码：

```
function initGraph(dataset, pHeight, pWidth) {
  var height = parseInt(pHeight);
  var width = parseInt(pWidth);        
  var svg = d3.select("#piechart");
  var textLabelSuffix = "%";

  showPieChart(dataset, svg, height, width, 
      textLabelSuffix);
}

function showPieChart(dataset, svg, height, width, 
  textLabelSuffix)
{
  var outerRadius = width / 2;
  var innerRadius = 0;

  // set height/width to match the SVG element
  svg.attr("height", height).attr("width", width);

  // create a new pie layout
  var pie = d3.layout.pie();

  // initialize arcs/wedges to span 
  // the radius of the circle
  var arc = d3.svg.arc()
               .innerRadius(innerRadius)
               .outerRadius(outerRadius);

  // create groups
  var arcs = svg.selectAll("g.arc")   
                // bind dataset to pie layout
                .data(pie(dataset))   
                // create groups
                .enter()              
                // append groups
                .append("g")          
                // create arcs
                .attr("class", "arc") 
                // position each arc in the pie layout
                .attr("transform", "translate(" + 
                 outerRadius + "," + 
                 outerRadius + ")");

  // initialize color scale - refer to
  // https://github.com/mbostock/d3/wiki/Ordinal-Scales
  var color = d3.scale.category10();

  arcs.append("path")
      .attr("fill", function(d,i) { return color(i); })
      .attr("d", arc);

  arcs.append("text")
      .attr("transform", function(d) {
          return "translate(" + arc.centroid(d) + ")";
       })
      .attr("text-anchor", "middle")
      .text(function(d) { return d.value + 
         textLabelSuffix; });
} 
```

6.  创建一个将托管 D3 代码的活动布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent">
    <WebView
        android:id="@+id/webview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/tvOutgoing"
        android:layout_alignParentBottom="true"/>
</RelativeLayout> 
```

7.  在您的活动中初始化网络视图：

```
 public class VisualizationActivity extends AppCompatActivity {

```
private WebView webview;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_visualization);

    // Prepare webview: add zoom controls and start zoomed out
    webview = (WebView) findViewById(R.id.webview);
    final WebSettings webSettings = webview.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setBuiltInZoomControls(true);
    webSettings.setSupportZoom(true);
    webSettings.setUseWideViewPort(true);
    webview.setWebChromeClient(new WebChromeClient());
    webview.setInitialScale(1);

    webview.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {
            // after the HTML page loads, run JS to initialize graph
            int dataset[] = new int[] {5,10,15,20,35};
            String text = Arrays.toString(dataset);

            webview.loadUrl("javascript:initGraph(" + 
                    text + ", "
                    (webview.getHeight()) + ", "
                    + (webview.getWidth()) + ")");
        }
    });

    // Load base html from the assets directory
    webview.loadUrl("file:///android_asset/html/graph.html");
} 
```

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T10:27:12.220

据我所知，Android 应用程序仅适用于 Java。因此，要使用 d3，您需要一个 java javascript 引擎/包装器（如 Rhino，或者[显然是 PhoneGap](http://grammerjack.blogspot.co.uk/2010/05/writing-android-application-in.html)），或者只需要制作一个 HTML5 应用程序（而不是 Android 应用程序本身）。

关于 PhoneGap 的链接似乎是关于从 HTML5 生成应用程序，但您需要检查是否可以包含任意附加库。

它必须是一个应用程序吗？D3 更适合编写 HTML5 网站而不是应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-12T12:27:00.223

嗨，我在使用 D3、C3 和 phonegap 在可安装应用程序上渲染图表时遇到了问题。问题是，如果您尝试执行 c3.generate，它将在浏览器上正常工作，但在可安装应用程序上却不行，解决方案是编写您自己的指令并在其中使用 C3。

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-31T10:55:08.343

对于像我一样尝试通过参考教程学习如何将 D3 集成到 Android 中的人来说，这里是当前 D3 版本 V5 的 D3 饼图的 js 代码。

```
function loadPieChart(dataset) {
      var svg = d3.select("#piechart");
      var height = 500;
      var width = 500;
      var textLabelSuffix = "%";

      showPieChart(dataset, svg, height, width,
          textLabelSuffix);
    }

    function showPieChart(dataset, svg, height, width,
      textLabelSuffix)
    {
      var outerRadius = width / 2;
      var innerRadius = 0;

      // set height/width to match the SVG element
      svg.attr("height", height).attr("width", width);

      // create a new pie layout
      var pie = d3.pie();

      // initialize arcs/wedges to span
      // the radius of the circle
      var arc = d3.arc()
                   .innerRadius(innerRadius)
                   .outerRadius(outerRadius);

      // create groups
      var arcs = svg.selectAll("g.arc")
                    // bind dataset to pie layout
                    .data(pie(dataset))
                    // create groups
                    .enter()
                    // append groups
                    .append("g")
                    // create arcs
                    .attr("class", "arc")
                    // position each arc in the pie layout
                    .attr("transform", "translate(" +
                     outerRadius + "," +
                     outerRadius + ")");

      // initialize color scale - refer to
      // <a href="https://github.com/mbostock/d3/wiki/Ordinal-Scales" target="_blank">https://github.com/mbostock/d3/wiki/Ordinal-Scales</a>
      var color = d3.scaleOrdinal(d3.schemeAccent);

      arcs.append("path")
          .attr("fill", function(d,i) { return color(i); })
          .attr("d", arc);

      arcs.append("text")
          .attr("transform", function(d) {
              return "translate(" + arc.centroid(d) + ")";
           })
          .attr("text-anchor", "middle")
          .text(function(d) { return d.value +
             textLabelSuffix; });
    } 
```

# vhdl - 简单的添加不起作用，计时问题

> ID：10590170
> 
> 赞同：1
> 
> 时间：2012-05-14T19:57:09.660
> 
> 标签：vhdl, xilinx

首先是这个简单的加法器实体：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.std_logic_unsigned.all;
use ieee.std_logic_misc.all;
use ieee.numeric_std.all;

entity adder is
    Port ( a : in  STD_LOGIC_VECTOR(31 downto 0);
           b : in  STD_LOGIC_VECTOR(31 downto 0);
           alu_out : out  STD_LOGIC_VECTOR(31 downto 0) := (others => '0')
           );
end adder;

architecture Behavioral of adder is
  signal result_ext:STD_LOGIC_VECTOR(32 downto 0) := (others => '0');
  signal result:STD_LOGIC_VECTOR(31 downto 0)     := (others => '0');
begin

  process (a,b)
  begin
    result_ext <= std_logic_vector(signed('0' & a) + signed('0' & b));
    result     <= result_ext(result'left downto 0);

    alu_out <= result;
  end process;
end Behavioral; 
```

和测试台：

```
-- TestBench Template 

  LIBRARY ieee;
  USE ieee.std_logic_1164.ALL;
  USE ieee.numeric_std.ALL;

  ENTITY testbench IS
  END testbench;

  ARCHITECTURE behavior OF testbench IS         

    signal a : STD_LOGIC_VECTOR(31 downto 0);
    signal b : STD_LOGIC_VECTOR(31 downto 0);
    signal alu_out : STD_LOGIC_VECTOR(31 downto 0);
  BEGIN
    ADDER : entity work.adder port map(
      a => a,
      b => b,
      alu_out => alu_out
    );

  --  Test Bench Statements
     tb : PROCESS
     BEGIN

        a <= B"0000_0000_0000_0000_0000_0000_0111_1010";
        b <= B"0000_0000_0000_0000_0000_0000_0000_1011";

        wait for 100 ns; -- wait until global set/reset completes

        report "alu_out = " & integer'image(to_integer(signed(alu_out)));

        wait; -- will wait forever
     END PROCESS tb;
  --  End Test Bench 

  END; 
```

我得到报告输出：

```
Finished circuit initialization process.
at 100 ns: Note: alu_out = 0 (/testbench/). 
```

如果我不初始化*结果*信号，我会得到未定义。所以问题是我最终没有得到结果。

我使用**iSim**和**Xilinx**。

此外，如果有人有一些关于 VHDL 的简短有效材料的良好链接，请随时发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:27:48.373

以彼得的代码和：

*   更新输入宽度的灵活性
*   只是`numeric_std`
*   保持进位

给出了这个：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.numeric_std.all;

entity adder is
    generic (width : integer := 32)
    Port ( a       : in  signed(width-1 downto 0);
           b       : in  signed(width-1 downto 0);
           alu_out : out signed(width downto 0) := (others => '0');
           );
end adder;

architecture synth of adder is
begin
  process (a,b)
  begin
    alu_out <= resize(a,alu_out'length) + b;
  end process;
end Behavioral; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:17:39.767

问题是您正在使用信号`result`以及`result_ext`何时需要它们对该过程周期的直接价值。变量会立即更新，您可以在流程的当前周期中访问它们的值。

试试这个，我认为它可以解决您遇到的问题：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.std_logic_unsigned.all;
use ieee.numeric_std.all;

entity adder is
    Port ( a : in  STD_LOGIC_VECTOR(31 downto 0);
           b : in  STD_LOGIC_VECTOR(31 downto 0);
           alu_out : out  STD_LOGIC_VECTOR(31 downto 0) := (others => '0')
           );
end adder;

architecture Behavioral of adder is

begin

  process (a,b)
    variable result_ext:STD_LOGIC_VECTOR(32 downto 0) := (others => '0');
    variable result:STD_LOGIC_VECTOR(31 downto 0);
  begin
    result_ext := std_logic_vector(signed('0' & a) + signed('0' & b));
    result     := result_ext(result'left downto 0);

    alu_out <= result;
  end process;
end Behavioral; 
```

至于阅读材料，VHDL Cookbook 还不错：[VHDL Cookbook](http://tams-www.informatik.uni-hamburg.de/vhdl/doc/cookbook/VHDL-Cookbook.pdf)

# javascript - Dojox Mobile - 通过 ToolBarButton 回调提交表单？

> ID：10590177
> 
> 赞同：0
> 
> 时间：2012-05-14T19:57:42.230
> 
> 标签：javascript, forms, mobile, callback, dojo

使用 Dojox Mobile ToolBarButton (http://dojotoolkit.org/reference-guide/1.7/dojox/mobile/ToolBarButton.html)，如何在按下按钮时提交 ID 为“myformID”的表单？

ToolBarButton 接受一个“回调”参数，我很确定它是要使用的参数，但我什至无法让它做一个简单的 JS 警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:28:43.940

只需要解决同样的问题。这对我有用：

```
<button data-dojo-type="dojox/mobile/ToolBarButton" data-dojo-props="onClick: function() {document.getElementById('myformID').submit();}">Log in</button> 
```

# php - 如何使用 PHP/jQuery 处理上传的文件？

> ID：10590180
> 
> 赞同：0
> 
> 时间：2012-05-14T19:57:46.883
> 
> 标签：php, javascript, html, codeigniter, upload

我有一个导入文件页面，其中有一个带有文件输入元素的表单，当用户单击提交时，它将带有 JSON 文档的文件发送到使用 PHP 读取文件并处理它的 url，然后插入将数据导入 MySQL 数据库。

我的问题是，在导入页面（面向用户的界面）上处理此导入功能的最佳方法是什么？我能够使用的技术是，用于导入文件页面的 Javascript 和 jQuery，以及用于服务器端处理的 API 的 PHP 和 Codeigniter。

到目前为止，我读到有人推荐使用 iframe 或 HTML5 File Api 的变通方法。是否有更好/更安全/更简单的方法来创建文件上传功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:06:23.233

至于可用性，对于最新的浏览器，我建议使用拖放上传功能（这真的很酷！）以及旧浏览器的“老式”ajax 文件传输回退，即基于 Flash。

看看这个 jQuery 插件，例如： [http ://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

至于安全性，如果可能（如果您有 PHP 文件信息扩展名），我建议使用 PHP 检查文件 mime 类型。不幸的是，我不熟悉 Codeigniter（我使用 ZF），但我确信 Codeigniter 具有文件过滤器/验证器。

CI中的表单验证：

[http://codeigniter.com/forums/viewthread/74624/#898858](http://codeigniter.com/forums/viewthread/74624/#898858)

[http://keighl.com/post/codeigniter-file-upload-validation](http://keighl.com/post/codeigniter-file-upload-validation)

# android - android日志不能在一类中工作

> ID：10590181
> 
> 赞同：0
> 
> 时间：2012-05-14T19:57:50.363
> 
> 标签：android, logging

我有一个正确显示的 ListActivity 类，我可以选择列表项并且事情会按预期发生。但我有没有记录的 Log.* 命令。OnClick 之后调用的其他类正在正确记录。例如，我的 onCreate 有这个

```
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.e(MY_DEBUG, "Creating list of actions"); // does not log?!?!?
    setTitle("Choose an action for this widget"); // executes fine
    // do other stuff... works fine
 } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:59:23.090

另外，请尝试更改标签，因为它可能是保留字。

这可能不起作用： Log.i("PHONE", "checkStatus");

但这会起作用： Log.i("PHONE_PROPERTY", "checkStatus");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:03:58.990

尝试使用 Log.i(MY_DEBUG, "Creating list of actions");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T20:52:07.040

我也有这个问题。

解决方案是：

**检查导入**并确保您使用的是 Android Log 而不是其他库。

**正确的**

 ``import android.util.Log;`

**错误的**

 ``import br.com.thainamonteiro.util.Log;```

# oracle - 连接泄漏问题 Weblogic

> ID：10590184
> 
> 赞同：0
> 
> 时间：2012-05-14T19:57:59.363
> 
> 标签：oracle, oracle10g, weblogic, connection-pooling, database-performance

在我们的数据库中，我们发现 GV$Session 中的非活动会话计数很高。但是在监视 weblogic 服务器中的连接池时，没有发现数据库中显示的连接数。

检查了连接泄漏的应用程序代码，但找不到任何。你能帮我指出可能是这里的问题。

Weblogic 8.1，Oracle 10g

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:01:20.700

请计算连接设置中每个 JDBC 允许的最大连接数。然后检查每个 JDBC 到每个服务器的映射。

当您的应用程序运行时，weblogic 服务器会在用户之后创建与数据库的连接，而不是断开连接，而是将其保留为非活动会话。因此很容易被 weblogic 重用。随着越来越多的负载施加到应用程序上，这个数字会增加到允许的最大数量。

一旦超过一个 JDBC 的这个数字，JVM 就会开始给出错误。

但连接并没有丢失，它们处于非活动状态。将此计数与您所拥有的计数相比较。

我想他们会是一样的。在这种情况下，请调整您的应用程序以减少连接时间，并尝试更好的连接逻辑（如果在 Web 上可用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:24:17.620

您是否在 Weblogic 集群中运行？

请记住，每个托管服务器都会打开配置的数据库连接数，因此如果您计算出 10 个 JDBC 连接和 4 个托管服务器，则它是 40 个打开的会话。

然后，您是否使用相同的凭据将多个池配置到同一个数据库，您必须将每个托管服务器的所有池合计起来。

# xcode - Xcode：如何从以编程方式添加的 ui 元素中提取数据？

> ID：10590189
> 
> 赞同：0
> 
> 时间：2012-05-14T19:58:11.633
> 
> 标签：xcode, uitextfield

我希望我能在一个小问题上得到一些帮助。

我的应用程序 UI 的一部分是动态的，因此我以编程方式添加 UI 元素，然后将其存储在 NSMutableArray 中。我有两个问题：

1）当我尝试执行以下操作时，为什么会得到空值？

```
UITextField* field = [self.uiElementsForWorkItems objectAtIndex:i];
NSLog(@"title: %@", field.text); 
```

如果这些是值副本而不是引用，我怎么能成功地调用它们的 removeFromSuperview ？

2) 如何从以编程方式添加的 UI 元素（即 UITextField.text 值）中检索值，并有一种方法可以让我识别它是哪个元素？

我已经看到了以下解决方案，但它没有提供访问元素数据或识别它的方法：

```
[title addTarget:self action:@selector(handlerMethod) forControlEvents:UIControlEventEditingDidEnd]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:15:27.910

尝试使用 UITextField.tag 属性，在不使用数组的情况下调用特定元素。（只需确保标签是唯一的）通过调用

`UITextField *field = (UITextField *)[self viewWithTag: tagValue];`

尝试使用 UITextField 委托方法。大多数情况下，您可以使用委托和标签进行管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:16:40.707

> 当我尝试执行以下操作时，为什么会得到空值？

可能是因为`field`是零。如果`field`指向一个真正的 UITextField，你会从`field.text`. 如果它指向没有`text`访问器的东西，你就会崩溃。如果我们知道它是如何`self.uiElementsForWorkItems`产生的以及它包含什么，那将会有所帮助。

> 如何从以编程方式添加的 UI 元素中检索值

与任何其他 UI 元素的方式相同：您向它发送一条消息，询问您想要的数据。为了发送消息，您需要一个指向该对象的指针。如果您以编程方式创建这些 UI 对象，您将希望在创建每个对象时保留对每个对象的引用（类似于 IBOutlet），或者为自己提供一种稍后查找对象的方法，例如分配一个唯一的对其`tag`财产的价值。

# azure - 如何将 sitemaps.xml 添加到在 Windows Azure 上运行的网站？

> ID：10590193
> 
> 赞同：0
> 
> 时间：2012-05-14T19:58:30.763
> 
> 标签：azure, sitemap

我在 Windows Azure 上有一个带有两个 Web 实例的网站。

是否可以创建一个 sitemaps.xml 文件：

*   即使 Web 实例失败（或被覆盖）也会被添加或替换
*   自动更新自身

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:36:46.277

在 Windows Azure 中，相同角色的实例是相同的。在两个实例上复制相同的 sitemaps.xml。如果一个实例关闭，另一个实例将继续服务请求而不会出现任何问题（尽管如果有很多请求，性能会降低）。在这种情况下，我们不需要更新 sitemaps.xml。对于客户端，它只看到负载均衡器。它不关心实例。

此致，

明旭。

# search - cakephp 使用 cakedc 搜索插件的基本帮助

> ID：10590199
> 
> 赞同：0
> 
> 时间：2012-05-14T19:58:47.313
> 
> 标签：search, cakephp-2.1, cakedc

我正在使用 cakephp 2.1 和 cakedc 搜索插件。
问题是我不能把它粘在一起。还得到：

```
Notice (8): Indirect modification of overloaded property ProjectsController::$paginate has no effect [APP\Controller\ProjectsController.php, line 48] 
```

遵循 cakedc 教程，但缺少一些东西！简单的搜索不会过滤任何内容。
我想按名称字段过滤。

在我的项目模型上

```
public $actsAs = array('Search.Searchable');
var $name = 'Project';

public $filterArgs = array(
       array('name' => 'name', 'type' => 'like'),
       array('name' => 'filter', 'type' => 'query', 'method' => 'orConditions'),
);

public function orConditions($data = array()) {
            $filter = $data['filter'];
            $cond = array(
                'OR' => array(
                    $this->alias . '.name LIKE' => '%' . $filter . '%',
                    //$this->alias . '.body LIKE' => '%' . $filter . '%',
                    ));
            return $cond;
        } 
```

在我的控制器中：

```
public $components = array('Search.Prg');

public $presetVars = array(
    array('field' => 'name', 'type' => 'value')
); 
```

索引函数更新为仅使用 index.ctp（无查找函数）

```
public function index() {
    $this->Prg->commonProcess();
    $this->Project->recursive = 0;
    // next line causes
    // Notice (8): Indirect modification of overloaded property ProjectsController::$paginate has no effect [APP\Controller\ProjectsController.php, line 48] 
    //$this->paginate['conditions'] = $this->Project->parseCriteria($this->passedArgs);
    $this->set('projects', $this->paginate());
} 
```

并将搜索表单添加到 view.ctp

```
echo $this->Form->create('Project', array('url' => array_merge(array('action' => 'index'), $this->params['pass'])));
echo $this->Form->input('name', array('div' => false));
echo $this->Form->submit(__('Search', true), array('div' => false));
echo $this->Form->end(); 
```

我知道这一定是我的一些明显错误，请多多包涵。任何人都可以帮忙吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T16:40:32.450

我很高兴让人们知道我找到了使用 cakedc 搜索插件的方法。

首先，我必须密切关注 1.3 的本教程（起初我认为它不适用于 2.1，但它就像魅力一样。）

[http://www.youtube.com/watch?v=FAVuLXFVaCw](http://www.youtube.com/watch?v=FAVuLXFVaCw)

并从 cakedc [http://cakedc.com/eng/downloads/view/cakephp_search_plugin](http://cakedc.com/eng/downloads/view/cakephp_search_plugin)
下载 1.3 示例代码 以了解视频教程。（尝试按照自述文件的说明运行它，但出现错误 Fatal error: Class 'Dispatcher' not found in C:\wamp\www\search\webroot\index.php on line 83 所以选择只获取代码片段并让它们工作2.1)

回到我的项目：

[1.- 从 cakedc https://github.com/CakeDC/search](https://github.com/CakeDC/search)下载搜索版本 2.1 ，
文件 CakeDC-search-2.1-0-g834f79f.zip。

2.- 将所有文件放在 /plugins/Search/ 文件夹中

3.- 添加

```
CakePlugin::load('Search'); 
```

到 /Config/bootstrap.php 的底部

4.- 在我的控制器上，声明组件和 presetVars（我正在使用一个名为 name 的字段）

```
public $components = array('Search.Prg');
public $presetVars = array(
    array('field' => 'name', 'type' => 'value'),
    array('field' => 'pr_status', 'type' => 'value'),
); 
```

5.-并更新了我的索引功能：

```
public function index() {
    $this->Prg->commonProcess();
    $this->paginate = array(
        'conditions' => $this->Project->parseCriteria($this->passedArgs));
    $this->set('projects', $this->paginate());
} 
```

6.-在我的模型上，添加

```
 public $actsAs = array('Search.Searchable');

        public $filterArgs = array(
            array('name' => 'name', 'type' => 'query', 'method' => 'filterName'),
            array('name' => 'pr_status', 'type' => 'value'),
        );

        public function filterName($data, $field = null) {
            if (empty($data['name'])) {
                return array();
            }
            $nameField = '%' . $data['name'] . '%';
            return array(
                'OR' => array(
                    $this->alias . '.name LIKE' => $nameField,
                    ));
        }

        // Built a list of search options (unless you have this list somewhere else)
        public function __construct($id = false, $table = null, $ds = null) {
        $this->statuses = array(
                    '' => __('All', true),
                     0 => __('Bid', true),
                     1 => __('Cancelled', true),
                    2 => __('Approved', true),
                    3 => __('On Setup', true),
                    4 => __('Field', true),
                    5 => __('Closed', true),
                    6 => __('Other', true));
         parent::__construct($id, $table, $ds);
         } 
```

7.- 最后，在 index.ctp 上创建搜索表单，就在 table 标记的正上方

```
 <div><?php
        echo $this->Form->create('Project', array(
            'url' => array_merge(array('action' => 'index'), $this->params['pass'])
            ));
        echo $this->Form->input('name', array('div' => false, 'empty' => true)); // empty creates blank option.
                echo $this->Form->input('pr_status', array('label' => 'Status', 'options' => $statuses));
        echo $this->Form->submit(__('Search', true), array('div' => false));
        echo $this->Form->end();
    ?>
        </div> 
```

即使我使用的是 2.1，我也学会了不要丢弃 1.3 的教程和文档。下一步是按日期和更好的搜索表单进行过滤。

祝大家好运。

卡洛斯

# c# - 保护发布到 Web api 的数据

> ID：10590201
> 
> 赞同：1
> 
> 时间：2012-05-14T19:59:04.560
> 
> 标签：c#, security, mobile, asp.net-web-api

我正在考虑将 asp.net web api 集成到我的 web 应用程序中，作为其他用户可以构建应用程序的外部 api，无论是移动应用程序等。

我的网站是一个电子商务网站，展示产品并接受付款等。

我想知道我的 web api 的安全性是否可以安全地将信用卡号码从外部应用程序（例如移动应用程序）发布到 REST API 端点。它是通过 SSL 设置的，调用应用程序通过 OAuth 进行身份验证，但我还应该做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:01:46.510

只要您通过 TLS 发送数据，就应该没问题。TLS 将加密在 HTTP 请求/响应正文中发送的数据（以及其他一些内容，例如 URL 路径）。

# c++ - 使用专用函数的异构集合上的 STL 算法

> ID：10590207
> 
> 赞同：0
> 
> 时间：2012-05-14T19:59:32.883
> 
> 标签：c++, templates, stl

我想使用算法`std::include`来处理异构 STL 集合。在我的示例中，我想检查 a `std::vector`of integer 是否包含在 a 中`std::map`。

我想通过使用一个简单的模板函数来解决这个问题；这样做的原因是因为我想使用 C++ 模板参数推导来让比较器函数的第一个参数是 std::pair vs int 时进行推导，反之亦然（`std::include`幕后调用 Comp(a,b ) 和 Comp(b,a) )。

在我的代码下面我想运行

```
 typedef std::map<int,std::string> dict;
    typedef std::vector<int> vect;

    int data[]={1,2,3,4};
    vect l(data,data+4);
    dict h;
    h.insert(dict::value_type(0,"ciccio"));
    h.insert(dict::value_type(1,"ciccio"));                  
    std::includes( h.begin(),h.end()
        , l.begin(), l.end(), is_my_less ); 
```

我在下面尝试了以下操作，但它没有编译和说`partial specialization is not allowed`，但这也`unresolved overloaded function type`让我认为我的函数做错了。你知道这可以通过严格使用模板函数来实现吗？

```
 template<class T1,class T2,class T3>
    bool is_less_than_pair( const T1&a ,const T2& b ){
        return false;
    };

    template<class T1,class T>
    bool is_less_than_pair<
        T1
        , std::pair<T1,T>
        , T >( const T1&a, const std::pair<T1,T>& b ){
        return a<b.first;
    }

    template<class T1, class T>
    bool is_less_than_pair< 
        std::pair<T1,T>
        ,T1
        , T >( const std::pair<T1,T>& a, const T1& b ){
        return a.first<b;
    } 
```

现在基于函数模板不能部分专门化的事实，我尝试了如下所示的函数重载，但没有成功，gcc`unresolved overloaded function type`再次告诉我。我能做的最好的事情是什么？

```
 template<class T1,class T2>
      bool is_less_than_pair( const std::pair<T1,T2>& a ,const T1& b ){
        return a.first<b;
      };
      template<class T1,class T2>
      bool is_less_than_pair( const T1& a ,const std::pair<T1,T2>& b ){
        return b.first<a;
      }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:23:46.117

如果您仅限于功能，则不。您不能使用重载函数，因为在将其传递给 STL 算法时，它将无法选择正确的重载。而且您不能部分专门化功能模板。

它可以通过提供所有重载来使用函数对象来完成。实际上，您会将所有重载传递给 STL 算法，然后它会在调用时选择适当的重载。请注意，由于映射的值为`std::pair<const int, string>&`，因此在混合模式运算符的两侧使用相同的 T1 将不起作用，因为向量的迭代器正在变为 int&，其中映射使用常量。

```
struct my_less_than
{
   template <typename T1>
   bool operator()(const T1& lhs, const T1& rhs) const
   {
      return lhs < rhs;
   }

   template <typename T1, typename T2, typename T3>
   bool operator()(const T1& lhs, const std::pair<T2, T3>& rhs) const
   {
      return lhs < rhs.first;
   }

   template <typename T1, typename T2, typename T3 >
   bool operator()(const std::pair<T1, T2>& lhs, const T3& rhs) const
   {
      return lhs.first < rhs;
   }

   template <typename T1, typename T2, typename T3>
   bool operator()(const std::pair<T1, T2>& lhs, const std::pair<T1, T3>& rhs) const
   {
      return lhs.first < rhs.first;
   }
}; 
```

用法：

```
 std::includes( h.begin(),h.end()
        , l.begin(), l.end(), my_less_than() ); 
```

编辑：示例[http://ideone.com/JFIoy](http://ideone.com/JFIoy)

# javascript - 在 Web-Worker 中同步等待消息

> ID：10590213
> 
> 赞同：20
> 
> 时间：2012-05-14T20:00:18.860
> 
> 标签：javascript, web-worker

有什么方法可以同步等待或检查网络工作者中的新消息吗？

我有大量复杂的代码（从 emscripten 编译的 LLVM），我无法围绕回调进行重构。

我需要确保在我收到并处理来自 UI 线程的消息之前，某一行之后的代码不会执行。如果我用 while 循环阻塞，则事件循环永远不会运行，所以我无法接收消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-08-28T06:31:09.223

[这是我在使用Pyodide](https://github.com/pyodide/pyodide)时也遇到的问题。我想从主线程“同步”调用一个函数。

一种解决方案涉及`Atomic`s 和`SharedArrayBuffer`API。从 web worker 的角度来看，这看起来像下面这样

1.  `postMessage`主线程
2.  冻结我们自己`Atomics.wait`
3.  被主线程解冻
4.  从 a 读取结果`SharedArrayBuffer`。我们无法以 接收结果`postMessage`，因为没有一种同步方式来询问“我收到消息了吗”。

当然，这需要相当多的额外代码来处理所有的序列化、数据传递等等。

这样做的一个限制是它不能在 Safari 中工作，因为 Safari 没有实现`Atomic`s API。另一个限制是，要使用这些 API，需要[设置 COOP/COEP 标头](https://dev.to/stefnotch/enabling-coop-coep-without-touching-the-server-2d3n)。

还有一个带有[同步 XHR 和 service worker](https://glitch.com/edit/#!/sleep-sw?path=worker.js%3A28%3A71)的替代解决方案，但我还没有研究过这个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-07T15:31:15.363

Can you break the sequence as follow without refactoring?

```
wrk.onmessage = function(e) {
    if (e.data.step === 'initial input') {
        doInitialWork(e.data.inputs)
    } else if (e.data.step === 'ui input') {
        doTheRest(e.data.uiData)
    }
} 
```

The onmessage event will be blocked until the initial step execution stack is complete and the critical ui bits will only launch when and if the info is available.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T17:41:43.290

不，不幸的是。有一些关于添加一种方法来阻止来自父页面的消息的讨论，但它没有成功。我会看看我是否可以挖掘相关的邮件列表线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-07T04:41:10.250

一个粗略的破解方法可能是使用同步 API，例如 FileSystem API，并使用临时文件作为同步机制。

在您的示例中，emscripten 代码可以对文件发出同步读取，而 UI 线程写入同一个文件，从而有效地解除阻塞工作人员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-26T21:19:45.533

我就是这样做的。*想到 Web Workers 还没有收到await 消息*功能，真的很可悲，这将使整个线程间通信概念更接近例如*Go语言。*但是不，他们没有这样做，所以必须发明一些东西来保持线程同步

```
 let resolver: any = undefined;
  let message: any = undefined;
  const messagePromise = new Promise((resolve) => resolver = resolve);

  worker.onmessage = async ({ data: payload }: { data: any }) => {
    message = payload;
    worker.onmessage = undefined;
    resolver?.();
  }

  await messagePromise; 
```

现在，这是打字稿。只需删除类型即可获取 Javascript。请注意，如果在我们开始侦听消息之前已发送消息，则无法捕获该消息

# facebook - 在通过调试器运行之前，Facebook 内 URL 共享不会引入 og: 标记信息（即使调试器没有给出错误）

> ID：10590216
> 
> 赞同：7
> 
> 时间：2012-05-14T20:00:37.810
> 
> 标签：facebook, facebook-opengraph, sharing

这是一个示例网址：

[http://www.motherjones.com/mojo/2012/05/reince-priebus-lgbt-workplace-discrimination](http://www.motherjones.com/mojo/2012/05/reince-priebus-lgbt-workplace-discrimination)

当粘贴到 Facebook 状态更新框中时，上面的内容过去不会拉入任何图像、标题或描述——它仍然是一个裸 URL。然后我通过调试器运行它，没有发现任何问题。现在，当粘贴到状态更新框中时，它会拉入标题、图像和描述。

为了比较，这里有一篇我还没有调试过的帖子。粘贴到更新框中时不会变形。然而，只要我或其他任何人通过调试器运行它，它就会开始拉入标题（尽管这个标题没有图像或描述）。

[http://www.motherjones.com/kevin-drum/2012/05/health-insurers-required-credit-obama-when-sending-out-rebate-checks](http://www.motherjones.com/kevin-drum/2012/05/health-insurers-required-credit-obama-when-sending-out-rebate-checks)

这可能只是一个时间问题——FB 在我们的页面上准备元数据的速度很慢——但我们注意到共享开始正常工作需要几个小时，甚至几天。那是在这件作品的流量达到顶峰之后很久，所以它对我们没有什么好处。

我们在 4 月 9 日左右开始看到这种情况。

我的问题是：我们的页面是否有什么东西让 Facebook 抓取它们的速度变慢了？我错过了什么？如果有问题，为什么调试器不告诉我？似乎确实有一个稍微更新的 doctype 版本可以尝试，但这似乎不太可能是罪魁祸首。另外——有什么理由我不应该写一个钩子来在发布时通过调试器运行所有东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T00:18:42.990

Facebook 将废弃的数据缓存在他们身边，以便在用户分享时更快地响应。在[Like Button](http://developers.facebook.com/docs/reference/plugins/like/)的文档中它说：

> **Facebook 什么时候抓取我的页面？**
> 
> Facebook 需要抓取您的页面以了解如何在网站周围显示它。
> 
> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。
> 
> 爬虫的用户代理是：“facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)”

如您所见，当您使用 linter（也称为调试工具）时，它会清除已使用 url 的缓存并将其替换为新数据，这就是您在调试页面后得到不同共享结果的原因。尽管您说有时需要几天时间，但这并不正确，但也许他们的文档在该主题上并不完全准确，毕竟他们有很多东西要报废。

如果页面是新的，也就是之前没有报废，那么就没有缓存了，分享的时候应该得到正确的结果，只有当og数据改变了，才需要清缓存。因此，如果您更新报废页面的数据，请务必稍后对其进行调试，您可以从服务器端向他们在调试工具中使用的相同 url 发出 http 请求，您不需要使用 Web 界面。

如果事情仍然没有按您的预期工作，您可以检查传入请求的用户代理字符串并将其与 它进行比较`facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)`，如果它匹配记录您发回的响应，然后将其与您在共享时获得的结果进行比较，如果它不一致尝试提交错误报告。**至于每次发布时“挂钩”调试器请求，我建议不要这样做，如果**事情按预期工作，这似乎是不必要的流量。我相信解决问题比使用变通方法更好。

# excel - 使用 WinHTTP 和 Excel 配置代理

> ID：10590219
> 
> 赞同：3
> 
> 时间：2012-05-14T20:00:49.897
> 
> 标签：excel, vba, proxy, winhttp

我正在使用 WinHTTP 在 Excel VBA 宏中执行 GET 请求。但是，如果我尝试从具有代理的网络中的机器发出请求，它就不起作用。如果我手动配置它，它可以工作，但我认为使用我正在开发的工具的人不会知道他们的代理服务器。

有没有办法自动配置代理服务器，或者从 Windows 获取代理配置？下面是一个示例代码：

```
Dim result As String
Dim URL As String
Dim winHttpReq As Object
Set winHttpReq = CreateObject("WinHttp.WinHttpRequest.5.1")

URL = "http://google.com/"
winHttpReq.Open "GET", URL, False
winHttpReq.setRequestHeader "User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"
winHttpReq.setProxy 2, "proxyserver:8080", ""
winHttpReq.send
result = winHttpReq.responseText 
```

在这种情况下，我不想强​​迫用户找到“proxyserver:8080”地址——我想要的是一种自动填充它的方法。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:21:21.527

我从以下链接获得了以下 vbScript。您可以使用获取代理服务器并将其作为变量传递给“proxyserver:8080”的代码：

[http://www.activexperts.com/activmonitor/windowsmanagement/scripts/networking/client/retrieving/](http://www.activexperts.com/activmonitor/windowsmanagement/scripts/networking/client/retrieving/)

如果您知道 vbScript - 它与 VBA 非常相似，我认为这应该会有很大帮助。如果您在使用 VBA 编写此内容时需要帮助，请告诉我。

```
On Error Resume Next

strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

Set colItems = objWMIService.ExecQuery("Select * from Win32_Proxy")

For Each objItem in colItems
    Wscript.Echo "Proxy Port Number: " & objItem.ProxyPortNumber
    Wscript.Echo "Proxy Server: " & objItem.ProxyServer
    Wscript.Echo "Server Name: " & objItem.ServerName
    Wscript.Echo
Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-26T15:11:15.550

如果其他人在此页面上偶然发现相同问题的答案，我想指出[这个答案](https://stackoverflow.com/a/31069416/2822888)，其中提到使用[VBA-Web](https://github.com/VBA-tools/VBA-Web)项目来解决这个确切的问题。

您的代码将如下所示：

```
Dim client As New WebClient
With client
    .BaseUrl = "https://www.google.com"
    .EnableAutoProxy = True
End With

Dim request As New WebRequest
With request
    .Method = WebMethod.HttpGet
    .AddHeader "User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"
    .Format = WebFormat.PlainText
End With

Dim response As WebResponse
Set response = client.Execute(request) 
```

# java - Java Timer 在每 t 秒后调用函数 n 次

> ID：10590222
> 
> 赞同：0
> 
> 时间：2012-05-14T20:01:16.500
> 
> 标签：java, timer

我希望 Java Timer 在每 t 秒后调用函数 n 次。我现在正在尝试这个，它每隔 t 秒调用一次函数，但我希望这个函数只被调用 n 次。

```
Timer tt = new Timer();
tt.schedule(new MyTimer(url), t); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:08:38.633

我认为`Timer`没有它作为内置功能。您需要添加一个计数器来计算每次调用的次数，然后`cancel()`在 n 次后停止使用计时器。

像这样的东西：

```
final int[] counter = {n};
final Timer tt = new Timer();
tt.schedule(new TimerTask(){
    public void run() {
        //your job
        counter[0]--;
        if (counter[0] == 0) {
            tt.cancel();
        }
    }
}, t); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:07:35.793

尝试[执行者](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)服务。您必须计算自己，调用 Callable 和取消 Timer 的频率。

# c - 编写大量 printf 函数会减少程序的运行时间

> ID：10590225
> 
> 赞同：1
> 
> 时间：2012-05-14T20:01:45.980
> 
> 标签：c, openmp

我使用 openmp 在 c 中编写了一个多线程程序。该程序有大约 400 个并行函数调用。这些函数有一些 printf 函数来打印一些调试信息。我观察到，通过删除这些 printf 函数，程序的运行时间从 1.2 秒增加到 1.6 秒。我一直在观察这些现象。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:59:27.567

并行函数调用是否以任何方式相互依赖？由于您不太可能在 400 个内核上运行它，因此随着各种线程的调度，上下文切换会产生一些开销。printf 可能会导致 CPU 产生（当它写入 stdout 时），并且碰巧它是产生 CPU 的好地方（即，此时它不会阻塞任何其他线程）。

我在一个多进程应用程序上工作，它偶尔会同步写入磁盘。我看到的一件事是，摆脱所有同步写入会提高该过程的速度，但代价是整个系统运行不顺畅。相反，我们只是确保在持有任何信号量锁的同时避免写入。

如果进程总是暂停等待同步写入完成，并且它没有阻塞其他任何东西，那么一切都有机会以非常低的延迟运行，并且整个系统会快很多。

# jquery - fullCalendar updateEvent '完成' 重新渲染事件并非所有事件

> ID：10590228
> 
> 赞同：1
> 
> 时间：2012-05-14T20:02:06.703
> 
> 标签：jquery, jquery-ui, fullcalendar, qtip, qtip2

我目前将我的事件动态地拉入我的日历。然后，当我将鼠标悬停在事件上时，它会弹出一个 qTip（jquery 插件）以显示一个弹出对话框。

我目前有一个“链接”，用于“完成”日历上的一个项目，我正在使用这个 javascript 从链接中提取我的信息。

```
// Update event to be complete
        $('.updateEvent').live('click', function() {
            var goTo     = $(this).attr('href');
            var eventId1 = $(this).attr('rel');
            var eventId2 = eventId1.split("-");
            var eventId  = eventId2[1];

            $.ajax({
                  url: goTo,
                  dataType: 'html',
                  success: function (event, response) {
                        $("#"+eventId).fullCalendar('className', '.complete');
                        //$("#calendar").fullCalendar("refetchEvents");
                  },
                  error: function(response, data) {
                    alert("Oops... Looks like we're having some difficulties.");  
                  }
            });
            return false;
        }); 
```

有没有办法去做和更新事件“className”->“.complete”我知道我应该拉入实际的“事件”，但我不确定如何用 jQuery 做到这一点qTip 功能。

我希望这是有道理的，如果有任何方向，将不胜感激。

**更新代码：**

```
// Update event to be complete
        $('.updateEvent').live('click', function() {
            var goTo     = $(this).attr('href');
            var eventId1 = $(this).attr('rel');
            var eventId2 = eventId1.split("-");
            var eventId  = eventId2[1];

            $.ajax({
                  url: goTo,
                  dataType: 'html',
                  success: function (event, response) {

                      var eventNew = $("#calendar").fullCalendar("clientEvents", eventId);
                      console.log(eventNew);

                  },
                  error: function(response, data) {
                    alert("Oops... Looks like we're having some difficulties.");  
                  }
            });
            return false;
        }); 
```

当我写入 console.log(eventNew); 它返回为 NULL。而且我知道 eventId 正在响应实际的 eventId，例如 (17836)。

任何其他想法将不胜感激！

我在此页面上的完整 JS 脚本：http: [//jsfiddle.net/ah73B/](http://jsfiddle.net/ah73B/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:17:14.407

我认为您需要先获取事件的句柄，然后再更改类名。看看`.fullCalendar( 'clientEvents' [, idOrFilter ] )`方法。如果您知道 eventId，则可以将其作为过滤器传递给此方法。然后更改类名。

希望这可以帮助。您可以发布问题的 HTML 以使问题更加清晰。

# internet-explorer - GWT - IE - 表单锚标签

> ID：10590231
> 
> 赞同：1
> 
> 时间：2012-05-14T20:02:17.340
> 
> 标签：internet-explorer, gwt, spring-security

我有一个 spring security + GWT 应用程序，它在成功登录后重定向到 Main.html。我想在登录完成后保留片段信息。我按照以下说明进行操作：[https](https://jira.springsource.org/browse/SEC-1067) ://jira.springsource.org/browse/SEC-1067但它似乎不适用于 IE。

有人遇到过类似的问题并解决了吗？

# sql - Postgres中的左外连接不返回空值

> ID：10590234
> 
> 赞同：10
> 
> 时间：2012-05-14T20:02:32.000
> 
> 标签：sql, postgresql

下载由下载时间、下载时间 ID 和 buno ID 组成。故障由故障代码、下载时间 ID、状态和类型组成。一次下载可以有很多错误，并且可以加入下载时间ID。

给定一组故障代码，结果必须包含具有相应故障计数的每个故障代码。如果在下载中未找到故障代码，则必须返回故障代码，故障计数为零。

这个问题似乎需要一个 OUTER JOIN，但在 Postgres 上没有看到它按预期工作，因为它似乎没有从 LEFT 表返回带有空值的集合。

查询如下，为简洁起见省略了一些细节：

```
SELECT  f.faultcode, f.downloadtimeid, d.downloadtime, count(*) as faultcount 
FROM    download_time d 
LEFT OUTER JOIN fs_fault f ON f.downloadtimeid = d.id
    AND f.faultcode IN (1000,1100)
    AND f.statusid IN(2, 4)
WHERE (d.downloadtime BETWEEN '04/11/2011' AND '05/01/2012')
    AND d.bunoid = 166501
GROUP BY d.bunoid, f.downloadtimeid, d.downloadtime, f.faultcode 
```

第二天，我进行了编辑以显示答案。所有答案都很接近，并且有各种帮助元素。然而，JayC 的回答是最接近的。 **这是最终的 SQL，唯一的变化是 WHERE 子句采用错误代码 IN 语句：**

```
SELECT  f.faultcode, f.downloadtimeid, d.downloadtime, count(*) as faultcount
FROM    download_time d  
RIGHT OUTER JOIN fs_fault f ON f.downloadtimeid = d.id
        AND f.statusid IN(2, 4)
        AND d.downloadtime BETWEEN '04/11/2011' AND '05/01/2012'
        AND d.bunoid = 166501
WHERE f.faultcode IN (1000,1100)
GROUP BY d.bunoid, f.downloadtimeid, d.downloadtime, f.faultcode 
```

谢谢大家的帮助！喜欢这个网站！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-15T00:30:04.897

我给出我的答案是因为我对其他答案有很大的怀疑。你必须小心过滤器的要求。请记住， where 子句*在您的 joins 之后运行*。因此，如果*where 子句*中有任何引用非外部联接表的过滤器要求，则（在许多情况下）您已经取消了外部联接。因此，使用您的 sql，似乎最简单的解决方案是使用正确的联接或适当地移动表名，然后将过滤条件从 where 子句移到 join 子句中。

```
SELECT  f.faultcode, f.downloadtimeid, d.downloadtime, count(*) as faultcount 
FROM    download_time d 
RIGHT OUTER JOIN fs_fault f ON 
    f.downloadtimeid = d.id
    AND f.faultcode IN (1000,1100)
    AND f.statusid IN(2, 4)
    AND d.downloadtime BETWEEN '04/11/2011' AND '05/01/2012')
    AND d.bunoid = 166501
GROUP BY d.bunoid, f.downloadtimeid, d.downloadtime, f.faultcode 
```

我认为应该等效的另一种方式是

```
SELECT  f.faultcode, f.downloadtimeid, d.downloadtime, count(*) as faultcount 
FROM    download_time d 
RIGHT OUTER JOIN fs_fault f ON 
    f.downloadtimeid = d.id
    AND d.downloadtime BETWEEN '04/11/2011' AND '05/01/2012')
    AND d.bunoid = 166501
WHERE
    f.faultcode IN (1000,1100)
    AND f.statusid IN(2, 4)
GROUP BY d.bunoid, f.downloadtimeid, d.downloadtime, f.faultcode 
```

因为 fs_fault 的过滤器要求在哪里并不重要。（而且你的 SQL 引擎无论如何都会改变这一切）。

Edit: Here's a [SQLFiddle](http://sqlfiddle.com/#!1/daa2b/2) demonstrating filtering on the join clause vs. the where clause.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:11:34.977

这将需要一个`RIGHT OUTER JOIN`. 右外连接包括右表中的所有值，其中`NULL`s 左表中没有条目（我不确定这是否适用于`GROUP BY`，不过......）**如果** `fs_fault`是一个包含所有故障代码的表。

在您的情况下，`fs_fault`似乎包含所有下载错误。这可能是意外行为的情况吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T20:57:27.933

如果您想按故障代码计数，这似乎是最简单的解决方案：

```
WITH fc(faultcode) AS (VALUES (1000,1100))
SELECT fc.faultcode, count(d.downloadtimeid) as faultcount 
  FROM fc
  LEFT JOIN (fs_fault f ON f.faultcode = fc.faultcode
                       AND f.statusid IN(2, 4)
  JOIN download_time d ON d.id = f.downloadtimeid
                      AND d.bunoid = 166501
                      AND d.downloadtime::date BETWEEN date '2011-04-11'
                                                   AND date '2011-05-01')
  GROUP BY fc.faultcode
  ORDER BY fc.faultcode 
```

请注意，我保留了您的条件，如果它们没有正确的 statusid 或 bunoid，则不计算故障。我有点担心日期选择可能没有按照您的想法进行，所以我建议了一个替代方案。如果您使用`TIMESTAMP WITHOUT TIME ZONE`，即使这样也可能无法满足您的要求，但那是另一回事了。我还添加了一个`ORDER BY`子句，因为您可能不希望结果的顺序不一致；如果没有该子句，它可能会或可能不会按`GROUP BY`顺序排列，并且可能会在没有警告的情况下发生变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T20:19:09.280

左外连接选择第一个表中的所有内容以及第二个表中的匹配行。第一个表似乎包含下载尝试。因此，“来自”的结果包括所有下载尝试。

但是，它不一定包含您所有的故障代码。发生的情况是，您对一个或多个符合标准的代码没有错误。

您需要一个包含所有故障代码的表，才能使其正常工作。在这里，我只是创建了一个故障代码列表作为第一个表。我认为以下查询可以做到这一点：

```
SELECT thefaults.faultcode, f.downloadtimeid, d.downloadtime, count(*) as faultcount
FROM  (select 1000 as faultcode union all select 1100
      ) thefaults join
      fs_fault f
      on f.faultcode = thefaults.faultcode and
         f.statusid in (2, 4) left outer join
      download_time d
      ON f.downloadtimeid = d.id
WHERE (d.downloadtime BETWEEN '04/11/2011' AND '05/01/2012') AND
      d.bunoid = 166501
GROUP BY d.bunoid, f.downloadtimeid, d.downloadtime, f.faultcode 
```

我承认：我正在使用 SQL Server 语法来创建“错误”。

# c# - LINQ to XML 从文件中获取所有节点名称

> ID：10590235
> 
> 赞同：-1
> 
> 时间：2012-05-14T20:02:32.553
> 
> 标签：c#, mysql, xml, linq, parent-child

我有一个这样的 XML 文件。

```
Parent
-Value
-Value
-Child
--Value
--Value
---Grandchild
----Value
---GrandchildEND
-ChildEND
-Value
-Child2
...... 
```

XML 文件的结构是可变的。意味着每个 XML 都有不同的 Childs ， Grandchilds 等。我想打开 XML 文件，并将 XML 文件中的数据输入到 MYSQL 数据库。

这里是我用来打开 XML 并将信息输入 MySQL 的代码。

```
 while (hardcore < 50000)
            {
                try
                {
                    XDocument xmlDoc2 = XDocument.Load("c:\\a.xml");
                    var simpleQuery2 = (from Mainparent in xmlDoc2.Descendants("Mainparent")
                                        select Mainparent).FirstOrDefault();
                    dbcon.Insert
                        (
                        simpleQuery2.Element("id").Value,
                        simpleQuery2.Element("action").Value,
                        simpleQuery2.Element("ordernr").Value,
                        simpleQuery2.Element("typ").Value,
                        simpleQuery2.Element("orderdate").Value,
                        simpleQuery2.Element("p4code").Value,
                        simpleQuery2.Element("runtime").Value,
                        );
                }
                catch (NullReferenceException)
                {
                    textBox1.Text = "did a stupid mistake mofo";
                }
                hardcore++;
            } 
```

"simpleQuery2.Element("id").Value" 中的信息是存储在 MainParent 中的值。

我现在的问题是：

我无法确定 XML 文件中包含哪些值/子项/孙子项。因此，要成功将其导入 MySQL，我需要逐个导入所有元素，否则会出现错误并且导入不起作用。

我需要知道父/值名称/值或父/子/值名称/值。因为 Parent/Valuename/Value 将被导入到表“PARENT”中，而 Parent/Child/Valuename/value 将被导入到表“CHILD”中。

如果我知道哪些孩子/孙子是，我知道期望什么值。

我已经可以通过以下方式获取元素的完整列表：

```
 XDocument xmlDoc2 = XDocument.Load("c:\\a.xml");
        foreach (var name in xmlDoc2.Root.DescendantNodes().OfType<XElement>()
                .Select(x => x.Name).Distinct())
        { textBox1.Text = textBox1.Text + "\r\n"+name; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:39:52.253

Your question is still a bit vague. The reason I feel it's still a bit vague is because you state each XML is different, but I'm not sure how that relates to the Parent/Child/... flow.

```
var nodeNames = XDoucment.root.Descendants()
                              .Select(e => e.Name.Localname)
                              .Distinct()
                              .ToList() 
```

This code will give you a list of *all* the distinct node names in your XML file.

I've answered a similar question Titled [Reading dynamic elements from the xml file using c#`](https://stackoverflow.com/questions/7960080/reading-dynamic-elements-from-the-xml-file-using-c/7960427)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:21:33.240

要获取所有 XML 节点，只需使用以下命令：

```
XmlDocument xml_doc = new XmlDocument(); 
xml_doc.Load(something);
XmlNodeList list = xml_doc.SelectNodes("//*"); 
```

如果您想要更多，只需修改 XPath 表达式 :)。

# php - PHP：如何在 24 小时后删除页面？

> ID：10590241
> 
> 赞同：1
> 
> 时间：2012-05-14T20:02:59.463
> 
> 标签：php, delay, sleep

我们希望 PHP 在指定日期和时间后 24 小时自动从我们的网站上删除一个页面。目的是向某些客户提供仅持续 24 小时的促销优惠券。我们应该怎么做？（我是超级新手，所以请通过示例代码而不是解释来回答。谢谢。）

到目前为止我们有什么：

```
<?php
$filename = "myfile.txt";
sleep (86400);
unlink($filename);
?> 
```

这没有任何意义，因为我认为页面必须打开整整 24 小时（86,400 秒）才能执行，是吗？此外，24 小时倒计时应从指定的日期和时间开始。什么代码可以做到这一点？

太感谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:06:01.413

不要删除它......只是不要显示它。我会避免通过 web 使用 PHP 来删除本地系统上的内容。基本上，将代码包装在包含日期范围的地方，否则不要。

更好的是，将报价详细信息存储在包含开始和结束日期/时间的 CSV 文件、XML 文档或数据库中，并将其用于检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:11:59.610

如果您希望事情在预定的时间发生，而不是对用户事件的响应，请使用操作系统内置的调度系统。在 Linux/Unix 上，这将是 cron。

这里解释得太详细了，但并不复杂。如果您要删除文件，请务必小心。

维基百科在这里对 cron 有一个很好的概述：[http ://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

当然，使用 cron 通常要求您具有对服务器的终端访问权限。

# sql - 网站和数据库信息

> ID：10590245
> 
> 赞同：0
> 
> 时间：2012-05-14T20:03:29.573
> 
> 标签：sql, sql-server, database, web

我想在服务器上托管一个电子商店，但我想澄清一下。我在另一台服务器上准备了一个数据库。网站（电子商店）将连接到另一台服务器。另一台服务器上的数据库是 MSSQL 2000。所以我想将数据库中的所有数据导入网站的数据库。想想我需要以某种方式连接这两个数据库。让我解释一下。我想以自动方式将所有内容从另一台服务器的数据库传输到网站的数据库，但我想扫描另一台服务器的数据库服务器，每当进行更改时，我希望具有相同内容的我的（网站）数据库自动更改。这可能吗？你能建议我怎么做吗？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:11:46.153

如果数据库正常运行并且当前托管在服务器上，那么您需要做的就是将新网站也连接到该数据库。

“扫描”数据库以获取新信息尚不清楚，因为无论如何网站都会从数据库中读取**当前状态下**的所有详细信息。

# c++ - 代码库是什么意思？我如何访问一个？

> ID：10590249
> 
> 赞同：0
> 
> 时间：2012-05-14T20:03:46.140
> 
> 标签：c++, build

[http://troy.spunak.com/TAPsDoc/html/index.html](http://troy.spunak.com/TAPsDoc/html/index.html)

这是某人编写并制作为库的 .cpp 和 .h 文件的示例。

我如何访问他的函数和类（下载后我将它们放在哪个目录，如果我必须编译它们？我如何编译它们？）？

我是否必须创建一个主函数并运行我的代码，或者该库是否带有一个主函数并且我使用提供的那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:19:41.980

库是在特定系统配置中预编译使用的可重用模块。

您如何使用库取决于您的特定开发环境，但是对于某些版本的 C++，您告诉链接器库在哪里（例如 *.dll 或 *.lib）并告诉它将该库合并到您的可执行文件中（静态链接) 或根据需要使用它（动态链接）。

要使用特定的库，库设计者可能已经包含了 IDE 项目文件或生成文件，以便您可以从源代码构建库。或者，他们可能只是将库作为二进制文件提供。无论哪种情况，他们都可能会提供有关使用该库的说明，或展示一些示例。实际上，这个是：

[http://troy.spunak.com/TAPsDoc/html/ *ex* _c_d_r__fns_8cpp-example.html](http://troy.spunak.com/TAPsDoc/html/_ex__c_d_r__fns_8cpp-example.html)

希望这可以帮助。

# c# - 如何在对话框（）模式弹出窗口中保留部分视图之间的字段数据

> ID：10590250
> 
> 赞同：0
> 
> 时间：2012-05-14T20:03:51.783
> 
> 标签：c#, javascript, jquery, model-view-controller, jquery-ui

在我的应用程序中创建新用户时，我正在显示一个 JQuery 模式弹出窗口（ .dialog() ），它包含一个部分视图，其中三个子部分视图显示为选项卡。

选项卡内容（部分视图）通过 Ajax 调用加载到模式弹出窗口内，该调用简单地替换为

用于呈现选项卡内容的 Javascript：

```
 $.post('@Url.Action("AddUserEducation","User")', { id: userId},
        function(data) {
            $("#education").show().html(data);
           } 
```

行动方法：

```
 public PartialViewResult AddUserEducation(Guid id)
    {
            var userEducation = new UserEducation();
            var user = GetUserFromRepository(id);
            userEducation.User = User;

            return PartialView("UserEducation", userEducation);
    } 
```

将显示选项卡的用户局部视图：

```
<div id="details"></div>
<div id="education"></div>
<div id="employment"></div> 
```

因此，每次切换选项卡时，都会在弹出 Div 中加载另一个局部视图。

我想不出在切换标签时保留数据的好方法。

每次我切换选项卡时，都会调用一个 Actionmethod 来使用选项卡内容 html 填充 div，然后我会丢失已经输入的所有内容。

提前谢谢各位！请不要犹豫，提出任何问题。

额外信息：

模型：对于父弹出窗口，我有一个“用户”模型，然后我将其 UserDetails、UserEducation 和 UserEmployment 分别传递给三个部分视图选项卡：用户详细信息、用户教育、用户就业。

如何让用户在不丢失数据的情况下自由浏览选项卡，以便完成后他们可以简单地保存用户模型并保存三个连接的实体而不会丢失任何数据。

ps 我没有使用 jquery 选项卡控件，因为我不需要这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:12:51.517

您应该一次将这个局部视图加载到弹出窗口中。我的意思是所有 3 个选项卡选项卡的所有内容。显示更多代码以获得更好的解决方案，尤其是 Javascript 部分。

# javascript - flot：无法使用画布内包含的标签绘制饼图

> ID：10590254
> 
> 赞同：8
> 
> 时间：2012-05-14T20:04:07.077
> 
> 标签：javascript, charts, flot

我正在尝试做一些图表，并遇到了这个奇怪的错误消息。这是一个有效的例子：

```
$.ajax({
    type: "GET",
    dataType: "json",
    url: "/data/active_projects_per_phase",
    success: function (result) {
        $.plot($("#active_per_phase"), result, {
            series: {
                pie: {
                    show: true,
                    label: {
                        show: true,
                        radius: 3 / 4,
                        formatter: function (label, series) {
                            return label + ': ' + series.data[0][1] + ' (' + Math.round(series.percent) + '%)';
                        },
                        background: {
                            opacity: 0.5
                        }
                    }

                }

            },
            legend: {
                show: false

            }
        });

    }
}); 
```

url 返回以下数据：

```
[
  {
    "data": 24,
    "label": "\u0411\u0438\u0437\u043d\u0435\u0441-\u0438\u0434\u0435\u044f"
  },
  {
    "data": 31,
    "label": "\u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"
  },
  {
    "data": 26,
    "label": "\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"
  },
  {
    "data": 1,
    "label": "\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435"
  }
] 
```

然而，它不适用于此数据并显示“无法绘制带有包含在画布内的标签的馅饼”错误：

```
[
  {
    "data": 6,
    "label": "\u0417\u0430\u043a\u0440\u044b\u0442"
  },
  {
    "data": 11,
    "label": "\u041e\u0442\u043c\u0435\u043d\u0435\u043d"
  },
  {
    "data": 1,
    "label": "\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d"
  },
  {
    "data": 5,
    "label": "\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0435\u043d \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0440\u043e\u0435\u043a\u0442"
  },
  {
    "data": 4,
    "label": "\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0435\u043d \u0432 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443"
  }
] 
```

我在图表设置中缺少什么来克服这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T15:23:30.563

flot 的饼图功能对图例和标签有限制。该代码确保图例/标签保持在画布的边界内，如果没有，它会失败，如您所见。您的选择是：

1.  让你的画布更大
2.  让你的标签更短
3.  `legend.container`使用指定外部的选项在画布外部使用图例`div`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T13:55:08.283

尝试减少标签的文本，或尝试减少标签的半径，我从这里得到了提示 [http://people.iola.dk/olau/flot/examples/pie.html](http://people.iola.dk/olau/flot/examples/pie.html)

我减小了标签的半径，问题已为我解决。

# php - PHP：继承 DateTime 并使用 createFromFormat()

> ID：10590255
> 
> 赞同：1
> 
> 时间：2012-05-14T20:04:07.653
> 
> 标签：php, datetime, static-methods

我已经编写了自己的扩展类`DateTime`。我无法弄清楚覆盖静态的`createFromFormat()`内容，因此它返回我的子类的实例。这甚至可能吗？谢谢！

* * *

[Joeren Offerjins](https://stackoverflow.com/users/625231/jeroen-offerijns)获得了荣誉，但问题与我的相同，并且有我正在寻找的答案：[Make DateTime::createFromFormat() return child class 而不是 parent](https://stackoverflow.com/questions/5450197/make-datetimecreatefromformat-return-child-class-instead-of-parent)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:09:48.087

```
class Custom_DateTime extends DateTime
{
    static public function createFromFormat($format, $time)
    {
        return new static();
    }
} 
```

我可能在这里遗漏了一些东西 - 为什么这不起作用？

# javascript - 使用拼接从数组中删除空值

> ID：10590257
> 
> 赞同：2
> 
> 时间：2012-05-14T20:04:08.653
> 
> 标签：javascript

我正在尝试创建一个函数来从多维数组中删除空值，但效果不是很好。不穿透到最后一层数组，当两个空值相邻时不移除。

```
function isArray(obj) {
    // http://stackoverflow.com/a/1058753/1252748
    return Object.prototype.toString.call(obj) === '[object Array]';
}

function removeEmptyArrayElements(obj) {

    for (key in obj) {
        if (obj[key] === null) {

            obj = obj.splice(key, 1);

        }
        var isArr = isArray(obj[key]);
        if (isArr) {
            removeEmptyArrayElements(obj[key]);
        }

    }
    return obj;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T20:14:26.663

迭代对象时不要从对象中删除元素。

不要`for ... in`在数组上使用。

一定要利用高阶函数，如`filter`和`map`。试试这个：

```
function removeEmptyArrayElements(arr) { 
   if (!isArray(arr)) {
      return arr;
   } else {
       return arr.filter( function(elem) { 
          return elem !== null
       } ).map(removeEmptyArrayElements)
   }
} 
```

解释：

“高阶”函数是使用其他函数作为值的函数——要么接受它们作为参数，要么返回它们，或两者兼而有之。在这种情况下，我使用了 Javascript 的 Array 类的两种方法，它们接受一个函数作为参数，并使用它来构建和返回一个新数组。

`someArray.filter(` *function* 对 的每个元素`)`调用*function*`someArray`并返回一个新数组，该数组仅包含*function*返回 true 的元素。我在这种情况下传递的函数是`function(elem) { return elem !== null }`- 即一个匿名函数，如果元素不为 null，则返回 true。因此，该`filter`调用的结果是删除了所有空值的原始数组。

现在我们要从结果的任何本身是数组的元素中删除任何空值。我用过`map`。`someArray.map(` *function* `)`还对数组的每个元素调用*function*，但不是根据这些结果返回其输入的子集，而是返回结果本身。例如，`[1,2,3].map(function(x){return x*2})`返回数组`[2,4,6]`。在这种情况下，我们传递的函数是我们正在定义的函数 .. 一个对 . 的递归回调`removeEmptyElements`。

我们确实需要一种方法来停止这种无休止的调用自己的循环，这就是外部`if`的用途——当调用一个不是数组的元素时，我们只是按原样返回它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:08:38.167

您正在循环要从中删除的数组。这为您提供了*“当两个空值相邻时不删除”*错误。“*它没有渗透到数组的最后一层”*部分可能是因为您没有重新分配`obj[key]`. 数组是按值复制的，而不是引用的。

我会这样做：

```
function isArray(obj) {
    // http://stackoverflow.com/a/1058753/1252748
    return Object.prototype.toString.call(obj) === '[object Array]';
}

function removeEmptyArrayElements(arr) {
    var i;
    for (i = 0; i < arr.length; i += 1) {
        if (arr[i] === null) {
            arr = arr.splice(i, 1);
            i -= 1; // decrement counter!

        } else if (isArray(arr[i])) {
            arr[i] = removeEmptyArrayElements(arr[i]);
        }
    }
    return arr;
} 
```

# ajax - Django jQuery Ajax 表单：下载文件或呈现错误的表单

> ID：10590258
> 
> 赞同：1
> 
> 时间：2012-05-14T20:04:17.447
> 
> 标签：ajax, django, jquery, django-forms

我希望 Django 创建的表单是 jQuery/Ajax 提交的；如果成功，我希望下载一个文件，如果表单无效，我希望返回我的 Django 表单。

我试图像这样“劫持” Django 表单以将其变成 jQuery/Ajax 的东西：（javascript 代码）

```
form.submit(function(e) {
  e.preventDefault();
  $.ajax({
      data: form.serialize(), // form data
      type: form.attr('method'),
      url: form.attr('action'),
      success: function(data, textStatus, jqXHR) {
          var ctype = jqXHR.getResponseHeader('Content-Type');
          if (ctype == 'text/html') {
              $('#div_where_my_form_is').html(data);
          }
          else if (ctype == 'text/csv') {
              // ???? my problem is here
          }
      }
  });
}); 
```

我的 Django 视图代码是这样的：

```
# (if the form is invalid I return it (simple template containing only the form))
# if valid:
response = HttpResponse(mimetype='text/csv')
response['Content-Disposition'] = 'attachment; filename=filename.csv'
writer = csv.writer(response, delimiter=';')
writer.writerow(['...stuff written here...'])
return response 
```

所以我的文件是动态创建的 CSV，这可能是需要注意的重要事项。

看看我如何在我的 jQuery 代码中使用 jqXHR 对象来检查返回的内容类型（欢迎任何更好的做法）。我的问题是，在成功的情况下，我无法让 jQuery 理解这是一个正在返回的文件，应该下载它。那可能吗？jQuery 只是将数据视为文本。

可能的解决方法：

*   进行第一次 ajax 调用以检查表单，如果可以，则进行“正常”（非 ajax）调用以下载文件
*   忘记ajax，如果表单无效，返回错误页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T22:43:46.233

试试[这个 jquery 插件](http://jqueryfiledownload.apphb.com/)，它允许下载类似 Ajax 的文件

# backbone.js - Backbone.js Sync 没有触发模型上的任何事件

> ID：10590260
> 
> 赞同：5
> 
> 时间：2012-05-14T20:04:24.250
> 
> 标签：backbone.js

我有一个非常简单的设置...

设置了一个使用引导程序调用模式对话框的路由。当单击菜单时，headerView 会调用一个方法 -

```
menuClick: function(e){
    e.preventDefault();
    if (!this.myView) {
        this.myView= new MyView({model: new MyModel()});
    }
    this.myView.render();
}, 
```

在 MyView 我在初始化中调用 bind

```
initialize: function(){
    this.model.bind('sync', function(model){ alert('test view')});
} 
```

并在按钮单击事件中调用 Backbone.sync：

```
var response = Backbone.sync('read', this.model, {
    success: function(data, textStatus, jqXHR) { alert('success'); },
    error: function(data, textStatus, jqXHR){ alert(fail); }
}); 
```

同步中的警报被调用......但初始化中绑定命令中的警报永远不会被调用。尝试在模型内移动绑定，将其移出，还尝试了同步：失败，同步：完成。没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:48:17.147

没有任何事件被触发，因为你没有这么说。您正在传递显式`success`和`error`回调，它们必须负责触发事件。

`Backbone.sync`来自高层命令的本机调用，如、、`save`接收和回调这些触发事件，但您使用的是您自己的，因此可以避免这种本机行为。`create``fetch``success``error`

例如[在`Model.save`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L377-389)，[在`Model.destroy`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L416-423)等等。

但是，正如我在之前的评论中所说，您真的应该考虑是否真的需要`Backbone.sync`直接调用而不是使用更高层的方法，例如`Model.fetch()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T02:30:03.440

尝试像这样实现 Backbone.sync：

```
var sync = Backbone.sync;
Backbone.sync = function (method, model, options) {
    var success = options.success;
    options.success = function (resp, status, xhr) {
        //Your logic goes here
        console.log('succeed');
        if (success) success(resp, status, xhr);
    };
    options.error = function (xhr, ajaxOptions, thrownError) {
        console.log('failed');
    }
    sync(method, model, options);
}; 
```

# weblogic - 从哪里开始使用 Weblogic 和 j_security_check？

> ID：10590262
> 
> 赞同：2
> 
> 时间：2012-05-14T20:04:43.067
> 
> 标签：weblogic, web.xml, j-security-check

我对 Weblogic 和 j_security_check 完全陌生。在过去几天的阅读中，我看到的只是服务器上受呼叫保护的数据的操作顺序以及它如何路由到 j_security_check。（例如[j_security_check 重定向](https://stackoverflow.com/questions/9528374/j-security-check-redirect)）

我想了解的是配置在哪里告诉服务器检查用户名和密码的内容？

当一个表单被提交到传递用户名/密码的服务器时，会执行什么代码？我可以查看源代码吗？它如何知道它将在哪里检查值？

我在一个项目中，没有人知道如何使用 Weblogic，因为所有以前的开发人员都跳槽了。

web.xml 和 weblogic.xml 文件中没有任何内容来说明任何到数据库的映射是如何存在的。系统如何知道要检查用户名和密码字段的数据库，甚至是数据库中的哪一列？

在浏览 Weblogic 门户时，我可以看到“DefaultAuthenticator、DefaultIdentityAsserter 和 OpenLDAPAuthenitcator”，但是在任何子级别页面中都没有任何内容可以显示如何处理和验证任何字段。

我应该寻找什么，我是否在错误的地方寻找，应该花费什么时间线来了解整个 Weblogic 和 j_security_check 过程发生了什么？

任何关于如何继续这个主题的建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:17:50.137

所以你需要非常基础的东西。我可以解释一些东西，但你需要阅读我指向的一些链接。还要澄清您的应用程序是部署在 Weblogic Server 上还是还使用 WL Portal？我的回答基于您在帖子中提到的 WL 门户

`j_security_check`是 Java EE 标准，因此任何指向 j_security_check 的登录表单都将由容器进行身份验证 - 在本例中为**Weblogic Server**。

在 web.xml 中配置要保护的页面/URL，以及允许哪些角色访问这些受保护的页面。

这方面的入门书在这里

[http://docs.oracle.com/javaee/1.4/tutorial/doc/Security5.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/Security5.html)

阅读“基于表单的登录身份验证”部分，然后阅读[http://docs.oracle.com/javaee/1.4/tutorial/doc/Security5.html#wp280108](http://docs.oracle.com/javaee/1.4/tutorial/doc/Security5.html#wp280108)

现在您已经提到了 Weblogic Portal。这与简单的 Java EE 容器（例如 WLogic Server）不同，因为它添加了额外的安全、身份验证和授权机制。

这些将在您的门户管理控制台中可见和可访问 - 这不是 Weblogic Server 控制台，而是使用 URL /portalApp 或类似名称运行的单独应用程序。有关更多信息，请参见此处[http://docs.oracle.com/cd/E13155_01/wlp/docs103/users/users.html#wp1013658](http://docs.oracle.com/cd/E13155_01/wlp/docs103/users/users.html#wp1013658)

有一个名为 SQLAuthenticator 的默认身份验证提供程序，它将用户/角色/组存储在本地数据库中，通常这是一个 Pointbase DB，除非您的团队已指定与 Oracle 等外部 RDBMS 的单独连接

阅读本文以了解 WLPortal 上下文中的用户/组/角色[http://docs.oracle.com/cd/E13155_01/wlp/docs103/users/index.html](http://docs.oracle.com/cd/E13155_01/wlp/docs103/users/index.html) 请注意，这些是正在使用的门户特定配置和 API -因此您不会看到直接查找数据库或用户表的代码，它将使用 JSP 标记或其他 API 进行包装。也许像这样[http://docs.oracle.com/cd/E13155_01/wlp/docs103/users/developusers.html](http://docs.oracle.com/cd/E13155_01/wlp/docs103/users/developusers.html)

最后这里是数据库详细信息，包括默认的 Pointbase [http://docs.oracle.com/cd/E13155_01/wlp/docs103/pdf/db.pdf](http://docs.oracle.com/cd/E13155_01/wlp/docs103/pdf/db.pdf)登录到您的数据库，看看您是否可以看到用户表。

# c - 头文件中的变量要共享给许多 .c 文件

> ID：10590264
> 
> 赞同：0
> 
> 时间：2012-05-14T20:04:48.397
> 
> 标签：c, header-files

我创建了一个名为 variables.h 的头文件来存储要在程序中使用的所有变量。然后我将程序裁剪为单独的原型 .h 文件和 .c 文件。

我决定创建一个 variables.c 文件来定义变量。在 variables.h 中它们具有 extern 关键字，在 c 文件中它们被定义。但是当我在其他 c 文件中包含“variables.h”时，我得到了错误比如“缺少二元运算符”、“var_1 undefined”等。

建议？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:08:15.150

我有一个建议：利用范围。

编写良好的 C 程序很少需要很多全局变量，而编写良好的 C 程序所需的大多数全局变量只需要一个或两个 .c 文件。在大型程序的所有 .c 文件中使用相同的全局变量是没有意义的，因为这样您就失去了[信息隐藏](http://en.wikipedia.org/wiki/Information_hiding)和[模块化](http://en.wikipedia.org/wiki/Modular_programming)的好处。您的程序变得脆弱且难以更改，因为对程序一部分的更改会影响全局变量，从而影响整个程序的其余部分。

* * *

**编辑**：避免全局变量的建议

将代码分成模块，每个模块都有一项工作要做，然后在不依赖模块外部可见的任何全局变量的情况下实现该工作。请注意，完全不依赖任何全局变量也符合此标准，并且确实是首选。另外，我喜欢 StackOverflow 答案中给出的[建议](https://stackoverflow.com/a/357361/960195)。

让我们看一个将程序划分为模块的快速示例。通常，一个用户可见的程序会有一些用户界面逻辑，一些业务逻辑，也许还有一个数据库连接覆盖。这些东西中的每一个都代表*至少*一个模块，可能是几个。作为我们的例子，让我们离开数据库，只考虑像 Unix 这样的程序`wc`。它读取一个文件，计算字数并打印字数。很简单，对吧？好吧，即使是这个简单的程序也应该有一个用于解析命令行参数并将这些参数放入结构的模块，一个用于实际计算单词的模块，以及一个用于打印字数的模块。用户界面模块（在这种情况下，一个文件与`main`function) 将命令行参数传递给解析器，解析器返回一个指向堆分配结构的指针，该结构包含有关命令行参数的信息。然后，主模块对命令行中找到的每个文件名调用一次字数统计模块，字数统计模块返回字数统计信息。然后，主模块调用打印模块，该模块使用命令行标志来确定要打印哪些信息以及如何格式化。

现在假设您已经设计了模块，并且每个模块都有一个或多个 .c 文件。您可能仍然需要一些全局状态。在这种情况下，每个模块的 .c 文件都应声明所有全局变量，除非模块有多个 .c 文件，否则整个项目中不应有其他文件使用该变量，无论是通过包含外部变量还是以其他方式。

# r - 压缩向量 in（rep 的倒数）

> ID：10590267
> 
> 赞同：6
> 
> 时间：2012-05-14T20:04:55.093
> 
> 标签：r

我需要将一个向量分解为一系列 x 并重复，我不太确定这个的正确术语是什么。它是函数的反`rep`函数。所以一个向量

```
[1,2,2,2,2,1,1,1,1,1,2,2] -> [1x1, 4x2, 5x1, 2x2] 
```

我写了一个小函数来做到这一点，但我相信一定有一个更原生的方式：

```
invrep <- function(y){
  numy <- as.numeric(y);
  newpoints <- which(c(T,diff(numy) != 0));
  x <- y[newpoints];
  times <- diff(c(newpoints, length(numy)+1));
  return(list(x=x, times=times));
}

myvec <- factor(floor(runif(50,0,3)), levels=0:2, labels=c("blue", "yellow", "red"));
myrep <- invrep(myvec);
identical(myvec, rep(myrep$x, myrep$times)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T20:12:05.837

该`rle`功能应该可以解决问题：

```
> x <- c(1,2,2,2,2,1,1,1,1,1,2,2)
> y <- rle(x)
> y
Run Length Encoding
  lengths: int [1:4] 1 4 5 2
  values : num [1:4] 1 2 1 2
> inverse.rle(y)
 [1] 1 2 2 2 2 1 1 1 1 1 2 2
> rep(y$values, y$lengths)
 [1] 1 2 2 2 2 1 1 1 1 1 2 2 
```

**更新**正如@TylerRinker 评论的那样，使用`as.character`因素：

```
myvec <- factor(sample.int(3,50,TRUE), levels=1:3, labels=c("blue", "yellow", "red"))
x <- rle(as.character(myvec))
y <- inverse.rle(x) 
```

# monodevelop - 如何下载旧版本的 MonoDevelop？

> ID：10590268
> 
> 赞同：4
> 
> 时间：2012-05-14T20:04:59.883
> 
> 标签：monodevelop, monobjc

在我将 MonoDevelop IDE 更新到最新版本 3.0.1 后，不再检测到我的 Monobjc 项目。我尝试重新安装 Monobjc，但未安装加载项，因为它们仅支持 MonoDevelop 2.8。

![在此处输入图像描述](../Images/9f4c3d44c2642e8c8468ed37d0a23354.png)

项目浏览器显示错误：

```
MySolution
  MyProject (Load Failed)
    Unknown solution item type:{guid1};{guid2} 
```

所以，我正在尝试将 MonoDevelop 回滚到最后一个稳定版本。我搜索了 MonoDevelop 网站，但没有找到任何旧稳定版本的下载存档。

我在哪里可以获得稳定的 MonoDevelop 2.8 包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:55:45.637

MonoDevelop 3.0 的 Monobjc 插件还没有准备好（在撰写本文时），因为解析模型（现在基于 NRefactory 5）中的许多东西已经发生了变化。

最新的 MonoDevelop 2.8 包可以在[这里下载](http://download.xamarin.com/monodevelop/Mac/MonoDevelop-2.8.8.4.dmg)。

**更新**：Monobjc 插件现在支持 MonoDevelop 3.0 和 Xamarin Studio 4.0。

# sql - 在 SQL Server 中将字符串转换为货币值

> ID：10590270
> 
> 赞同：7
> 
> 时间：2012-05-14T20:05:06.087
> 
> 标签：sql, sql-server, tsql, casting, ssis

是否有一种简单的内置方法可以将格式为“$1,000.00”和“($1,000.00)”的 NVARCHAR 分别转换为数值 1000.00 和 -1000.00？

我正在尝试在 SQL Server 或 SSIS 中执行此操作。

投射到 MONEY 给了我错误

```
"Cannot convert a char value to money. The char value has incorrect syntax.". 
```

当尝试转换负值时，我假设是由于括号。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T20:10:43.640

这应该可以解决问题

```
SELECT   '$1,000.00'
        ,CAST('$1,000.00' AS MONEY)
        ,CAST(REPLACE(REPLACE('($1,000.00)', '(', '-'), ')','') AS MONEY) 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/d41d8/1153)

根据@mellamokb 的建议，如果您使用的是 SQL 2012，则可以使用：

```
SELECT PARSE('($1000.00)' AS MONEY) 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!6/d41d8/78)

# java - 像这个示例一样解析 XML 的好方法？

> ID：10590275
> 
> 赞同：3
> 
> 时间：2012-05-14T20:05:19.837
> 
> 标签：java, xml

我想知道像这样解析 XML 的最佳做法是什么：

```
<root>
    <MailNotification enable="true">
        <To>foo@bar.org</To>
        <From>foo@bar.org</From>
        <Server>smtp.bar.org</Server>
        <Port>465</Port>
        <Username>foo@bar.org</Username>
        <Password>fooo!</Password>
    </MailNotification>
</root> 
```

我使用的是 Java 7，完整的 XML 更长，但它并不是一个真正的大文件。我考虑过使用 Stax Pull Parser，因为它看起来很简单，但有一点我不确定它是否真的是一个好方法：

当来到*MailNotification 元素*时，我可以创建一个新的实例，例如一个邮件类，我对此没有任何问题。但是：如果我来到例如*To 元素*怎么办？我怎么知道它是否真的在 MailNotification 元素内，而不是在根的正下方？换句话说：我缺少的是处理“现在我在 MailNotification”元素等状态的最佳实践。

注意：我知道我可以先验证 XML，但想象一下它可以在*MailNotification 元素*内有一个*To 元素*，并且允许*To 元素*作为另一个语义不同元素的子元素 - 同样的问题：我需要以某种方式跟踪状态/ context 以确保我正确解释*To 元素*。

 ***感谢您的任何提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:24:24.297

StAX Stream Reader 是最佳*选择。只需使用 Java 堆栈来保持您的状态，就像在这个例子中一样。常数是`XMLStreamConstants`。

```
XMLStreamReader reader;

void parseRoot() {
    reader.require(START_ELEMENT, null, "root");

    while (reader.nextTag() == START_ELEMENT) {
        switch (reader.getLocalName()) {
        case "MailNotification":
            MailNotification mail = parseMail();
            // do something with mail
            break;
        // more cases
        }
    }

    reader.require(END_ELEMENT, null, "root");
}

MailNotification parseMail() {
    reader.require(START_ELEMENT, null, "MailNotification");
    MailNotification mail = new MailNotification();

    while (reader.nextTag() == START_ELEMENT) {
        switch (reader.getLocalName()) {
        case "To":
            mail.setTo(parseString());
            break;
        // more cases
        }
    }

    reader.require(END_ELEMENT, null, "MailNotification");
    return mail;
}

String parseString() {
    String text = "";
    if (reader.next() == CHARACTERS) {
        text = reader.getText();
        reader.next();
    }
    return text;
} 
```

(*) 只是为了澄清“最佳选择”，这取决于你想做什么。如果您的 XML 直接映射到您要创建的对象，那么
[JAXB非常好。](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/JAXB.html)
[如果您想以复杂的方式导航 XML， JDOM](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Node.html)很有用，例如，如果您实现了 XPath 之类的东西；但是为了简单地解析它的矫枉过正。这是消耗大部分内存的方法。
[在 StAX 出现之前， SAX](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/ContentHandler.html)是最轻量级和最高效的解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:32:59.593

看看消化器。

```
public static final String TEST_XML = "<root>\n" +
          "<MailNotification>\n" +
          " <to>foo@bar.org</to>\n" +
          " <from>foo@bar.org</from>\n" +
          " </MailNotification>\n" +
          "</root>";

Digester digester = new Digester();
digester.setValidating(false);

digester.addObjectCreate("root/MailNotification", MailNotification.class);
digester.addBeanPropertySetter("root/MailNotification/to", "to");
digester.addBeanPropertySetter("root/MailNotification/from", "from");

MailNotification notification = (MailNotification) digester.parse(new StringReader(TEST_XML));
System.out.println(notification.getTo());
System.out.println(notification.getFrom());

public class MailNotification {
  private String to;
  private String from;

  public String getTo() {
    return to;
  }

  public void setTo(String to) {
    this.to = to;
  }

  public String getFrom() {
    return from;
  }

  public void setFrom(String from) {
    this.from = from;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T20:47:10.177

使用[JAXB](http://jaxb.java.net/)怎么样？您可以拥有一个带有注释的 java 类，并且只需要编组或解组，这很容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T20:26:08.337

你可以看看我之前的回答：

[XML响应如何为变量赋值](https://stackoverflow.com/questions/10539264/xml-response-how-to-assign-values-to-variables/10540376#10540376)

而且我敢肯定这里有很多相同/相似的答案。

至于您在几个类似的问题中的问题，即：

`How do I know if it is really inside a MailNotification element and not directly below the root?`

你有开始元素/结束元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T20:28:01.447

您可以使用任何体面的 XML 解析库来解析它。然后“收件人”将包含在“MailNotification”对象中。

有很多这样的，请参阅[this question](https://stackoverflow.com/questions/373833/best-xml-parser-for-java)进行比较。我自己使用过[jdom](http://www.mkyong.com/java/how-to-read-xml-file-in-java-jdom-example/)，它易于使用并且理解我非常看重的东西。但是，如今有更高级的替代方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T22:22:14.930

询问使用什么工具来解析 XML 似乎有点像询问您使用什么编程语言：您将得到“StAX 是最好的”或“JAXB 是最好的”这样的答案，而没有给出任何理由说明它们比其他方法提供了什么好处。老实说，如果不进一步了解项目的要求和约束，就不可能客观地回答这个问题，但是对于绝大多数项目来说，使用任何流行的技术都可以轻松完成任务，因此不值得浪费时间担心决定。

我可能会使用 JDOM。***

# java - Java：为什么这个滚动窗格不滚动？

> ID：10590278
> 
> 赞同：0
> 
> 时间：2012-05-14T20:05:31.117
> 
> 标签：java, swing, jscrollpane

我有这个类作为我的问题的一个例子。滚动窗格不滚动，我看不出一个很好的理由：

```
 import java.awt.Dimension;

import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public class DoesNotScroll{ 

    public static void main(String[] args){
        String str = "this\n\nshould\n\n\n\nscroll\n\n\nthis is the bottom";
        message("test", str, JOptionPane.INFORMATION_MESSAGE);
    }

    public final static void message(String title, String message, int messageType){
        JTextArea messageArea = new JTextArea();
        messageArea.setMinimumSize(new Dimension(300, 100));
        messageArea.setMaximumSize(new Dimension(300, 100));
        messageArea.setPreferredSize(new Dimension(300, 100));
        messageArea.setEditable(false);
        JScrollPane scroller = new JScrollPane(messageArea);
        scroller.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        scroller.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        messageArea.setText(message);
        messageArea.revalidate();
        messageArea.repaint();
        JOptionPane.showMessageDialog(null, scroller, title, messageType);
    }
} 
```

任何帮助表示赞赏，

-C

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:29:48.133

> 我在这里设置的问题是我打电话`messageArea.setPreferredSize()`而不是`scroller.setPreferredSize()`

在这种情况下，需要调用任何一个都表明存在问题。通过在构造函数中提供列/行大小来设置文本区域的“首选大小”。将其添加到滚动窗格中。任务完成。

```
import javax.swing.*;

public class DoesScroll {

    public static void main(String[] args){
        String str = "this\n\nshould\n\n\n\nscroll\n\n\nthis is the bottom";
        message("test", str, JOptionPane.INFORMATION_MESSAGE);
    }

    public final static void message(String title, String message, int messageType){
        JTextArea messageArea = new JTextArea(3,20);
        messageArea.setEditable(false);
        JScrollPane scroller = new JScrollPane(messageArea,
            JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
            JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        messageArea.setText(message);
        JOptionPane.showMessageDialog(null, scroller, title, messageType);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:22:57.393

我在这里设置的问题是我打电话`messageArea.setPreferredSize()`而不是`scroller.setPreferredSize()`. 一旦我取消了 messageArea 的调整方法调用并将它们添加到滚动条，滚动条就可见了。我不确定为什么会这样，但是如果我弄清楚了，我会更新这个答案。如果其他人知道，在这里发表评论将不胜感激。

# php - 如何判断套接字是否在 PHP 中打开？

> ID：10590280
> 
> 赞同：8
> 
> 时间：2012-05-14T20:05:52.130
> 
> 标签：php, sockets

我需要维护一些用 PHP 打开的套接字并定期检查这些套接字。我是 PHP 中套接字的新手；我像这样打开套接字：

```
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP); 
socket_connect($socket, $ip, $port); 
```

一些套接字可能会进入不返回消息的状态；这些套接字只接收消息。**如果套接字没有响应消息，我如何判断套接字是否打开？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:15:39.893

> socket_sendto — 向套接字发送消息，无论它是否已连接

似乎您可以使用[socket_sendto](http://www.php.net/manual/en/function.socket-sendto.php)并向远程主机发送一些“ping”数据，然后测试返回值以确定套接字是否仍然建立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:35:46.810

最好使用函数：fsockopen()

阅读：[http ://www.php.net/manual/en/function.fsockopen.php](http://www.php.net/manual/en/function.fsockopen.php)

或者您可以尝试使用该功能：socket_create_listen()

阅读：[http ://www.php.net/manual/en/function.socket-create-listen.php](http://www.php.net/manual/en/function.socket-create-listen.php)

（这只是实验性的。）

并定期检查，您可以使用简单的 cron 进行检查。

# mongodb - Mongoid：如何返回符合特定条件的文档计数？

> ID：10590281
> 
> 赞同：4
> 
> 时间：2012-05-14T20:05:55.697
> 
> 标签：mongodb, mongoid

我需要返回一个计数列表（所有记录，所有符合特定条件的记录）。我知道如何使用 MySQL ( `SELECT COUNT(*) WHERE ...`) 来做到这一点，但我不熟悉如何使用 Mongo 和 Mongoid 来做到这一点。如何以最有效的方式获取这些计数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T20:10:11.693

从[Mongoid 文档](http://mongoid.org/docs/querying/finders.html#count)：

**模型计数**

返回数据库中的文档数。如果要指定条件，请使用`where`

```
# Get the count of documents.
Person.count
# Get the count of documents given the provided conditions.
Person.where(title: "Sir").count 
```

来自[MongoDB 文档](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Count)：

```
db.mycollection.count( {active:true} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:18:25.713

使用 MongoID，您可以通过多种方式设置条件：http: [//mongoid.org/docs/querying/criteria.html](http://mongoid.org/docs/querying/criteria.html)

假设 Thing 是一个 Ruby 类，包括 Mongoid::Document

例如，您可以使用 where 函数，然后可以通过调用 'count' finder 函数获取匹配的文档数量。：

```
Thing.where(foo: "bar").count 
```

# oracle - 通过 Windows 批处理文件执行时 ECHO 无法正常工作

> ID：10590282
> 
> 赞同：0
> 
> 时间：2012-05-14T20:05:58.837
> 
> 标签：oracle, batch-file, sqlplus

我正在尝试编写一个简单的批处理脚本，如果该环境最近已刷新并清除了我们的更改，我们的用户可以使用该脚本将一些代码重新部署到环境中。

该脚本运行良好，但它并没有按照我想要的方式记录。对我们的部署过程进行限制（我不是 DBA，只是一个开发人员），我们不能在文件中包含 ECHO 命令。

为了解决这个问题，作为批处理脚本的一部分，我在工作目录中创建了一个[login.sql](http://download.oracle.com/docs/cd/B19306_01/server.102/b14357/ch2.htm#sthref414)文件，其中包含“SET ECHO ON”和“SPOOL file.log APPEND”命令。目标是这将在脚本之前执行并假脱机我的输出。然而，虽然 SPOOL 命令似乎在工作，但脚本的内容并未被 ECHO。

以下是批处理脚本中的相关代码：

```
:: Identify all files that begin with a number and end with .sql and write to a file.
dir /b *.sql | findstr /b "[0-9]" > ScriptsToImplement.txt

:: Show the user the files to be executed and confirm whether to proceed
echo The following scripts will be executed in %DB%:
for /f "delims=" %%i in (ScriptsToImplement.txt) do echo %%i
echo:
set /p PROCEED=Proceed with implementation? [y/n] ^>
if /i "%PROCEED%" NEQ "y" (goto :opt_to_terminate)

:: Build the user profile SQL file that will be executed after logging into SQLPlus
:: This allows for the spooling of the output without having the SPOOL command declared in the file.
echo SET ECHO ON >> login.sql
echo SPOOL %DB%~%FOLDER%~%DATESTAMP%.log APPEND >> login.sql

:: Go through the SQL files in the text file and execute them in the specified database.
for /f "delims=" %%i in (ScriptsToImplement.txt) do (
echo exit | sqlplus -L -S %DB_USER%/%DB_PASS%@%DB% @%%i
if %errorlevel% NEQ 0 (@echo an error occurred with applying %%i; stopping further script execution... & pause & goto :terminate) else (@echo %%i was applied successfully) >> %DATESTAMP%_run_all.log
) 
```

我的理解是，因为这是使用每个单独的脚本启动一个单独的 SQL*Plus 会话，所以它每次都调用 login.sql 文件，因此每次都应该使用 SET ECHO ON 命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T05:25:58.563

如果您在 BAT 文件中使用它，请记住这`ECHO`是一个命令，而不是环境变量。打开回声的命令是`ECHO ON`。`SET ECHO ON`不影响回声行为。它返回*“环境变量 ECHO 未定义”*。

# android - Android如何在Activity上禁用屏幕旋转，但不是菜单

> ID：10590286
> 
> 赞同：0
> 
> 时间：2012-05-14T20:06:03.923
> 
> 标签：android, menu

我想知道是否可以禁用应用程序活动而不是菜单的屏幕旋转。因此，当屏幕转动时，活动不会被破坏和重新创建，而是会保留下来，只有菜单位置会根据旋转而变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:18:20.310

您可以使用`onConfigurationChanged`来检测屏幕何时在横向/纵向之间切换。最好的部分是您可以在调用之前更改传递给它的配置对象`super.onConfigurationChanged`

[http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)

[这是另一个答案](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)，其中包含更多用于控制屏幕方向更改的选项

如果您希望菜单在手机缓慢旋转时保持直立，而不是突然切换，您可以使用 SensorEvent ( [http://developer.android.com/reference/android/hardware/SensorEvent.html](http://developer.android.com/reference/android/hardware/SensorEvent.html) )。我从来没有用过这个，所以我不能肯定

# c# - 我可以将控制台应用程序构建到我的 C# GUI 应用程序中吗？

> ID：10590291
> 
> 赞同：0
> 
> 时间：2012-05-14T20:06:25.453
> 
> 标签：c#, winforms, command-line

是否可以在我的 C# WinForm 应用程序中包含命令行实用程序？更具体地说，是否可以将命令行实用程序编译成`.exe`文件，以便我可以编写 GUI 来控制命令行工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:30:16.953

如果您依赖于另一个应用程序，那么将该实用程序*打包*到您的 EXE 中是一个坏主意，因为这意味着每次更新该依赖项时，您都应该更新您的应用程序。我只会构建您的 Windows 应用程序并帮助用户找到所需的 EXE。这就是[Exact Audio Copy](http://www.exactaudiocopy.de/)的工作方式，它依赖于另一个 3rd 方应用程序进行编码（特别是[LAME](http://lame.sourceforge.net/)）。

# extjs - Extjs 复选框计数

> ID：10590292
> 
> 赞同：1
> 
> 时间：2012-05-14T20:06:27.367
> 
> 标签：extjs

我正在尝试计算 ext js 中选定的复选框。

如何计算选中的复选框并将它们显示在图像下方显示的区域中。

谢谢 ![在此处输入图像描述](../Images/5790b0b015f97afb96df4a5afe1eee48.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:34:28.440

我同意沙。这是一个实际的例子：

```
var index = 0;

var changeCounter = function (cb, nv, ov) {
  if (nv) index++;
  else index--;
}
Ext.create('Ext.form.Panel', {
  bodyPadding: 10,
  width: 300,
  title: 'Pizza Order',
  items: [
    {
        xtype: 'fieldcontainer',
        fieldLabel: 'Toppings',
        defaultType: 'checkboxfield',
        items: [
            {
                boxLabel  : 'Anchovies',
                name      : 'topping',
                inputValue: '1',
                id        : 'checkbox1' ,
                listeners: {
                    change: changeCounter
                }
            }, {
                boxLabel  : 'Artichoke Hearts',
                name      : 'topping',
                inputValue: '2',
                id        : 'checkbox2' ,
                listeners: {
                    change: changeCounter
                }
            }, {
                boxLabel  : 'Bacon',
                name      : 'topping',
                inputValue: '3',
                id        : 'checkbox3' ,
                listeners: {
                    change: changeCounter
                }
            }
        ]
    }
],
bbar: [
    {
        text: 'Get Counter' ,
        handler: function () {
            alert (index);
        }
    } ,
    {
        text: 'Select Bacon',
        handler: function() {
            Ext.getCmp('checkbox3').setValue(true);
        }
    },
    '-',
    {
        text: 'Select All',
        handler: function() {
            Ext.getCmp('checkbox1').setValue(true);
            Ext.getCmp('checkbox2').setValue(true);
            Ext.getCmp('checkbox3').setValue(true);
        }
    },
    {
        text: 'Deselect All',
        handler: function() {
            Ext.getCmp('checkbox1').setValue(false);
            Ext.getCmp('checkbox2').setValue(false);
            Ext.getCmp('checkbox3').setValue(false);
        }
    }
],
renderTo: Ext.getBody()
}); 
```

只需获取此代码，转到[ExtJS API Doc for Checkbox](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Checkbox)并将示例代码替换为上面的代码：然后，推送预览并单击“获取计数器”按钮。它完全按照sha所说的那样做。

再见

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:26:43.587

您可以将它们全部订阅到一个处理程序，并在该处理程序中根据值进行递增或递减。似乎有什么问题？

# .net - F# 编译器从衍生进程调用时抛出异常

> ID：10590297
> 
> 赞同：0
> 
> 时间：2012-05-14T20:06:52.690
> 
> 标签：.net, process, f#

我生成了一个新进程并让它像这样调用 F# 编译器：

```
var exeName = args[0];
var commandLine = args[1];
using (var process = new Process())
{
    process.StartInfo = new ProcessStartInfo(exeName, commandLine);
    process.StartInfo.UseShellExecute = true;
    process.StartInfo.LoadUserProfile = true;

    process.Start();
} 
```

我传入的参数是 fsc.exe 的路径和我要构建的代码的参数。
结果是异常：

```
Unhandled Exception: System.ArgumentException: chop_extension
   at Internal.Utilities.Filename.chop_extension(String s)
   at Microsoft.FSharp.Compiler.Build.TcConfigBuilder.DecideNames(FSharpList`1 sourceFiles)
   at Microsoft.FSharp.Compiler.Driver.main1(String[] argv)
   at Microsoft.FSharp.Compiler.ErrorLogger.ErrorLoggerExtensions.ReraiseIfWatsonable(Exception exn)
   at Microsoft.FSharp.Compiler.ErrorLogger.ErrorLoggerExtensions.ErrorLogger.ErrorRecovery(ErrorLogger x, Exception exn, range m)
   at Microsoft.FSharp.Compiler.ErrorLogger.errorRecovery(Exception exn, range m)
   at Microsoft.FSharp.Compiler.Driver.main1(String[] argv)
   at Microsoft.FSharp.Compiler.Driver.main(String[] argv)
   at Microsoft.FSharp.Compiler.CommandLineMain.main(String[] argv)
   at Microsoft.FSharp.Compiler.ErrorLogger.ErrorLoggerExtensions.ReraiseIfWatsonable(Exception exn)
   at Microsoft.FSharp.Compiler.ErrorLogger.ErrorLoggerExtensions.ErrorLogger.ErrorRecovery(ErrorLogger x, Exception exn, range m)
   at Microsoft.FSharp.Compiler.ErrorLogger.errorRecovery(Exception exn, range m)
   at Microsoft.FSharp.Compiler.CommandLineMain.main(String[] argv) 
```

但是，当我从命令提示符运行相同的命令和参数时，它编译时没有错误

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:17:12.540

在不知道您传递给编译器的参数的情况下很难给出具体的答案 - 错误可能来自一些格式错误的命令行参数。

但是，如果要从 C# 调用 F# 编译器，则无需使用`Process`该类显式执行此操作。您可以使用[F# PowerPack](http://fsharppowerpack.codeplex.com/)中提供的 F# CodeDom 提供程序- 它负责格式化参数（以及定位 F# 编译器，这可能非常微妙）。

这是一个简短的示例，展示了如何从 F# 调用它（从 C# 中调用它会类似）：

```
#r "FSharp.Compiler.CodeDom.dll"

open System.CodeDom.Compiler
open Microsoft.FSharp.Compiler.CodeDom

let provider = new FSharpCodeProvider()
let parameters = CompilerParameters()
provider.CompileAssemblyFromFile(parameters, [| "C:...file.fsx" |]) 
```

# c# - 在 form_resize 事件中设置图片框大小

> ID：10590300
> 
> 赞同：0
> 
> 时间：2012-05-14T20:07:12.987
> 
> 标签：c#, winforms

当我改变表单的大小时，我想改变图片框（和里面的图像）的大小。但是当我这样做时

```
private void Form2_Resize(object sender,EventArgs e)
{
    pictureBox1.Width = this.Width;
    pictureBox1.Height = this.Height;
} 
```

图片大小不变。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:12:27.560

如果您`picturebox`不`docked`尝试通过将其设置为停靠来使其停靠，`property`那么它将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:13:40.223

我认为当表单开始改变它的大小时会触发 resize 事件。尝试延迟您的图片框调整大小逻辑，直到表单完成调整大小。

然而，最简单的方法是使用锚点或停靠图片框......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T20:17:16.273

确保您已将`Form2_Resize`上面的事件处理程序连接到`Resize`表单的事件。
转到设计器，单击表单，然后转到属性框中的事件列表，并确保选择`Form2_Resize`事件`Resize`。

除此之外，您可能需要考虑按照其他人的建议将图片框停靠在表单上。

# ruby - 如何从 ram(cache) 获取对象并对它们进行校验和？

> ID：10590301
> 
> 赞同：1
> 
> 时间：2012-05-14T20:07:17.637
> 
> 标签：ruby, object, checksum, ram

我想从运行我的代码的当前机器上的 ram 获取对象。获取后如何获取它们和校验和？我正在编写 ruby​​ 代码，我想在运行时在 ram 上获取所有对象，它可以连续完成吗？

# regex - 在 Notepad++ 中，如何在每行第 X 个实例之后替换给定字符的所有实例？

> ID：10590302
> 
> 赞同：0
> 
> 时间：2012-05-14T20:07:22.013
> 
> 标签：regex, notepad++

我有一个我正在尝试格式化的 CSV，但输入数据有很多逗号开头。如果我可以简单地用分号替换给定行（第 4 行之后）上的所有逗号，那会容易得多。

无论如何使用简单的查找/替换正则表达式来做到这一点，还是需要编程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:22:35.860

解决这个问题的最简单方法（因为 Notepad++ 的正则表达式不支持可变长度的lookbehind 断言）可能分三步完成：

首先，将前四个逗号更改为独特的：搜索

```
^([^,]*),([^,]*),([^,]*),([^,]*), 
```

并替换为`\1#COMMA#\2#COMMA#\3#COMMA#\4#COMMA#`.

然后，用分号替换所有逗号。

最后，`#COMMA#`用逗号替换所有 s。

这假设所有带逗号的行都至少有四个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:23:18.903

您应该可以使用查找/替换中的正则表达式来完成。在记事本++中尝试以下操作：

```
Find what:    ([^,]*),([^,]*),([^,]*),([^,]*),
Replace with: \1,\2,\3,\4; 
```

不要忘记检查正则表达式单选按钮。

# android - 我可以将 SMS 收件箱的内容放入数组吗？

> ID：10590304
> 
> 赞同：0
> 
> 时间：2012-05-14T20:07:26.297
> 
> 标签：android, listview, sms

**这与具有两个文本视图的列表视图有关。第一个文本视图列出了联系人，而第二个文本视图假设显示来自相关联系人的收件箱中的消息数量。**

我已经能够通过解析来计算设备上收件箱中的邮件数量

```
String inbox = "content://sms/inbox" 
```

成一个字符串。但我想更深入，而不仅仅是一次性支付。是否可以更深入地进入收件箱并将邮件总数分离到相应的联系人？例如，如果我有 3 个联系人和 20 条消息，contact1 有 11 条消息，contact2 有 4 条消息，contact3 有 6 条消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:26:57.350

To get a count of how many texts in your inbox from each sender, you can use a SQL Group By clause. This is the popular trick to sneak a Group By clause into a ContentProvider:

```
Cursor cursor = getContentResolver().query(
        Uri.parse("content://sms/inbox/"),
        new String[] { "_id", "address", "count(*) as totals" },
        "1) Group By (address",
        null,
        null); 
```

However this does not work for Android 4.0+. (For me designing ContentProviders without a Group By clause is like manufacturing a keyboard without numbers...) For 4.0+, I would suggest iterating through the regular cursor and sorting the messages yourself.

# javascript - 在 asp.net 网页表单中使用下划线模板 _.template()

> ID：10590309
> 
> 赞同：2
> 
> 时间：2012-05-14T20:07:38.550
> 
> 标签：javascript, asp.net, backbone.js, webforms, underscore.js

我正在尝试在 asp.net Web 表单应用程序中使用带有 underscore.js 模板的主干.js，但遇到了模板问题。

```
<script id='Template' type='text/template'>
<span class="description <%=Description%>"></span>
</script> 
```

此页面在 asp.net webforms 中不起作用，因为 webforms 使用与下划线模板相同的 <% 和 %> 表示法，导致运行时出错

> 编译器错误消息：CS0103：当前上下文中不存在名称“描述”

有没有办法让它在 asp.net 网络表单中工作，或者我必须使用不同的模板库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T20:23:03.097

您可以覆盖 underscore.js 模板设置。查看 _.templateSettings 和文档 ( [http://documentcloud.github.com/underscore/#template](http://documentcloud.github.com/underscore/#template) )。您可以为嵌套数据定义自己的正则表达式。

例如

```
_.template("hello <?= name ?>", {"name": "Mike"}, {"interpolate": /<?=([\s\S]+?)%>/g) ?>}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T22:50:29.007

您的正则表达式不起作用。这个正则表达式似乎与模式匹配。

```
/<\?=([\s\S]+?)>/g 
```

# exchange-server - 用于检查电子邮件发件人的 Exchange 传输代理

> ID：10590319
> 
> 赞同：1
> 
> 时间：2012-05-14T20:08:26.760
> 
> 标签：exchange-server, exchange-transport-agents

我想编写一个 Exchange 传输代理来根据文本文件检查电子邮件发件人，并根据该更改电子邮件主题行。检查电子邮件发件人的 C# 代码是什么？应该是这样的吗？

```
List<RoutingAddress> emails = new List<RoutingAddress>();
RoutingAddress john = new RoutingAddress("john@contoso.com");
emails.Add(john);
     if (emails.Contains(e.MailItem.FromAddress))
         e.MailItem.Message.Subject = "EmailGroup1"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:54:18.623

你可能会想要使用 HashSet 来代替它来工作......

# java - Java：将长转换为时间戳

> ID：10590324
> 
> 赞同：28
> 
> 时间：2012-05-14T20:08:54.370
> 
> 标签：java, timestamp, long-integer

我知道，如何使用方法将 a 转换`Timestamp`为 long [`getTime()`](http://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html#getTime--)。

有没有将 a 转换`long`为 a的方法`TimeStamp`？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-14T20:10:31.003

构造函数正在这样做：

```
Timestamp(long time) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-14T20:10:42.847

见[`Timestamp.Timestamp(long)`](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html#Timestamp%28long%29)：

```
new Timestamp(someLong) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T20:17:57.593

是的，Timestamp 有一个构造函数，它需要 long 作为参数。 [http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html#Timestamp(long)](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html#Timestamp%28long%29)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-02-10T11:58:26.580

这个问题有点老了，但对于那些到达这里的人来说，因为他们的 Timestamp 对象不包含`(long)`构造函数而挠头，Firebase 的[com.google.firebase.Timestamp](https://firebase.google.com/docs/reference/android/com/google/firebase/Timestamp)对象包含`(Date date)`构造函数。并且[Date](https://developer.android.com/reference/kotlin/java/util/Date.html)确实包含一个构造函数（它根据从纪元开始的秒数创建一个日期对象 - 与`(long seconds, int nanoseconds)` java.sql.Timestamp[相同](https://developer.android.com/reference/kotlin/java/sql/Timestamp.html)`(long)`

底线是您的解决方案很简单

```
Timestamp(new Date(longEpochTimeVar)); 
```

或者

```
Timestamp(longEpochTimeVar,0); 
```

0 代表 0 纳秒，因此两个选项将产生相同的结果。

# sql - 合并：修改多个表

> ID：10590325
> 
> 赞同：8
> 
> 时间：2012-05-14T20:08:55.543
> 
> 标签：sql, oracle

`merge`是否可以使用Oracle中的函数修改多个表？在每种情况下，都需要采取不同的操作，例如：

```
MERGE INTO users tab1
USING(SELECT 1 id, 10 points FROM dual) tab2 
ON(tab1.id = tab2.id ) 
WHEN MATCHED THEN 
   UPDATE SET points = tab2.points 
   UPDATE "abc" = action.status -- another table
WHEN NOT MATCHED THEN 
   INSERT(id, points)  VALUES(tab2.id, tab2.points) 
   UPDATE "def" = action.status -- another table 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T01:00:13.647

根据文档，简单的答案是否定的。[该语法](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9016.htm)支持一个表或视图。但是，使用可更新视图，您可以完成多表插入/更新。

然而，你的例子似乎试图做一些你不能做的事情。WHEN MATCHED 子句指定要更新的内容。您不能从此子句中插入。WHEN NOT MATCHED 子句也一样——你不能从这个子句更新，只能插入。

# iphone - performSelectorOnMainThread:withObject:waitUntilDone 的语义：

> ID：10590326
> 
> 赞同：0
> 
> 时间：2012-05-14T20:09:01.067
> 
> 标签：iphone, objective-c, multithreading

我所拥有的是

```
- (void)startTheBackgroundJob {   
    1.NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    2.[NSThread sleepForTimeInterval:3];
    3.[self performSelectorOnMainThread:@selector(makeMyProgressBarMoving) withObject:nil waitUntilDone:YES];
    4.//[self makeMyProgressBarMoving];
    5.[pool release];

}

- (void)makeMyProgressBarMoving {

    float actual = [threadProgressView progress];
    threadValueLabel.text = [NSString stringWithFormat:@"%.2f", actual];
    if (actual < 1) {
        threadProgressView.progress = actual + 0.01;
        [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(makeMyProgressBarMoving) userInfo:nil repeats:NO];
    }
    else threadStartButton.hidden = NO;

} 
```

在starTheBackgroundJob的第4行，您可以设置`waitUntilDone = YES`（或NO）的值。

我阅读了参考资料，他们指出：

> 等待
> 
> 一个布尔值，指定当前线程是否阻塞，直到在主线程上的接收器上执行指定的选择器之后。指定 YES 来阻塞这个线程；否则，指定 NO 使该方法立即返回。如果当前线程也是主线程，并且您为此参数指定 YES，则消息将立即传递和处理。

**我的问题是：**

1.  这里指定的选择器是什么（在这个例子中）？
2.  抛开问题。设置时会发生什么`waitUntilDone = YES`。我试过了，但我根本没有看到任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:39:05.087

1) makeMyProgressBarMoving 是您的选择器。2）如果您尝试从另一个线程中的主线程上执行选择器，您只会使用 onMainThread 版本。文档说：

Wait：一个布尔值，指定E当前线程是否阻塞，直到在指定的选择器上在主线程上的接收器上执行。

# javascript - jqGrid 使用 Backbone 和分页

> ID：10590329
> 
> 赞同：3
> 
> 时间：2012-05-14T20:09:30.800
> 
> 标签：javascript, asp.net-mvc, jqgrid, backbone.js

我看到了一些使用 jqGrid 支持 MVC (asp.net) 的商业应用程序示例，我正在尝试确定将 jQgrid 与 Backbone.js 客户端 mvc 一起使用的最佳方法。

我们目前正在使用一个 Backbone 视图，该视图可以很好地保存 jqgrid，具有较小的表和由主干集合提供的“本地”数据类型。

为了支持分页和虚拟滚动，我希望主干模型/集合支持从服务器和任何搜索/过滤选项获取数据，并将输出传递到视图和 jqgrid 以更新网格。

似乎 jqGrid 对 beforeRequest、loadBeforeSend 等事件有一些挂钩，我可以挂钩并进行集合调用以发出 ajax 请求并返回 json 并更新集合（使用 Addy 的 Backbone Paginator 集合），但似乎 jqgrid 会仍然在进行 ajax 调用，这似乎不正确地控制视图而不是模型。

如果我使用自定义数据类型，我可以在网格需要获取更多数据并让 bb 集合提供该功能并获取数据时捕获条件。

自定义数据类型是最佳选择吗？是否有更好的方法将主干模型/集合连接到 jqgrid？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T15:56:38.057

在骨干环境中，您需要使用适当的侦听器将表直接绑定到集合以更新数据，否则您要么依赖于静态视图 - 这与您使用骨干的原因相反 - 或者您将花费无数个小时来挂钩回调以更新从未用于任何实时的网格。

我在 Backbone 环境中完成了 datatables.net 两次，两次尝试都是一团糟，因为我本质上是暴力破解数据表来更新它自己的模型，这太过分了。同样，尝试利用 Datatable 的服务器端选项几乎是不可能的，因为它与 Ajax 事务的 Backbone 系统相冲突。

看看[Backgrid](http://backgridjs.com/)，它是从头开始构建的，可与 Backbone 一起使用。到目前为止，它是我发现的最简单、最干净、开销最低的选项。

# c++ - 是否存在编译前不提示保存的 C/C++ IDE？

> ID：10590336
> 
> 赞同：6
> 
> 时间：2012-05-14T20:10:03.313
> 
> 标签：c++, c, ide, save, read-eval-print-loop

这对我来说是一个常见的情况：我脑子里有一个代码的想法（在这个例子中，它是在 Python 中的），所以我打开 PyScripter，编写代码然后简单地运行它。PyScripter 没有要求我事先保存代码，几秒钟后我就愉快地浏览了算法的结果。

现在我知道 C 是一种编译语言，代码必须事先保存，等等，但我想知道是否有这样的 IDE 可以让你简单地享受你的代码，而无需保存许多名为`"test1.*"`, `"test2.*"`, 的文件或文件夹ETC...

我猜这可以做到的一种方法是IDE将管理临时文件夹中的所有项目文件，直到（如果有的话......）用户点击“保存/另存为”；然后它实际上会将文件保存在所需的位置。*因此，在大多数情况下，用户只想编写代码并查看其输出，IDE 不会通过保存提示来打扰用户。*

*如果有人可以向我推荐这样的 IDE（如果它们存在的话），我会非常高兴。提前非常感谢=]*

编辑：@Michael Burr 是的，最初的意图确实不是想出文件名。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T20:14:16.057

你可以试试[ideone.com](http://ideone.com/)。我觉得很方便:-)

它是在线的，因此不需要实际安装，它支持许多已知的编程语言。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T20:12:04.417

对于 C++，您可以在 Visual Studio 中执行此操作。下次修改文件时，只需按`F5`（运行），当出现提示时（询问您是否要在编译前保存文件）只需选中显示的框`Don't ask again`。

对于Java，Eclipse（也许其他）提供自动编译，但您仍然需要保存文件。你只需要检查`Build Automatically`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-14T20:45:10.237

CodePad 似乎正是出于这个原因而创建的。编写代码，点击按钮，观察它运行。没有大惊小怪，也没有保存数百个文件。

[http://codepad.org/](http://codepad.org/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T20:18:55.713

如果你使用 emacs：

```
 (defun my-emacs-command-save-compile ()
    "save and compile."
    (interactive)
    (save-buffer)
    (recompile)) 
```

# google-apps-script - 为什么我会“失踪”；声明之前的 Google Apps 脚本？

> ID：10590341
> 
> 赞同：0
> 
> 时间：2012-05-14T20:10:14.377
> 
> 标签：google-apps-script

首先，我对java很陌生，所以如果这很明显，我很抱歉。下面是我脚本的前 6 行：

```
function myFunction (){

}import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException; 
```

我收到的错误消息是：**Missing ; 声明之前。（第 3 行）**。

如果您需要更多脚本来理解错误，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:00:21.963

您使用的导入语句是 Java 编程语言的一部分。Google Apps 脚本代码是用 JavaScript 编写的，它的名称相似，但实际上却大不相同。来自 JavaScript 的[维基百科页面](http://en.wikipedia.org/wiki/JavaScript)：

> JavaScript 从 Java 复制了许多名称和命名约定，但是这两种语言在其他方面是不相关的，并且具有非常不同的语义。

如果您想学习如何使用 JavaScript 编程，[Code Academy](http://www.codecademy.com/)是一个不错的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:21:26.573

因为您可能正在尝试使用 java 而不是 javascript 进行编程？

# android - 比较 2 个完全相同的字符串结果为假？

> ID：10590346
> 
> 赞同：-1
> 
> 时间：2012-05-14T20:10:49.940
> 
> 标签：android, string, compare

我有一个奇怪的问题......我使用这个代码：

```
 String text = new String(values[0]);
    Log.e("TEST", "|" + text + "|" + new String(values[0]) + "|");
    if (text == "pong") {
        Log.e("TEST", "2|" + new String(values[0]) + "|");
        receivedresponse = true;
    } else {
        Log.e("TEST", "1|" + new String(values[0]) + "|");
        myToast.setText(new String(values[0]));
        myToast.show();
    } 
```

值 = 112,111,110,103

字符串（值 [0]）=“乒乓”

文本 = 新字符串（值 [0]） = “乒乓”

仍然是文本！=“pong”......但是“pong”==“pong”？

-

有谁知道为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T20:13:09.987

在java中，您需要`.equals`在字符串上使用：

```
 text.equals("pong"); 
```

# css - 我可以影响 CSS 规则顺序吗？

> ID：10590350
> 
> 赞同：0
> 
> 时间：2012-05-14T20:11:03.623
> 
> 标签：css

这是我上周遇到的一个问题的娱乐。我有 3 个盒子，想将其中的 2 个向左移动，以便它们适合其父盒子。我可以成功地移动它们，但 CSS 完全忽略了它们可以适应宽度并将最后一个框放在一个新行中，这完全破坏了外观。这是一个[演示](http://jsfiddle.net/M6uBk/1/)，我看到了 firefox 11 和 chrome 18 的问题。我怎样才能影响 css 以便 3 个框适合该行，因为它显然可以在进行左移时。

html（第二部分只是为了查看班次是否有效与没有班次。）

```
<div class="A">
    <div class="B"></div>
    <div class="C"></div>
    <div class="D"></div>
</div>

<div class="A2">
    <div class="B2"></div>
    <div class="C2"></div>
    <div class="D2"></div>
</div> 
```

的CSS

```
.A { width: 290px; height:200px; background-color: red; }
.B, .C, .D { width: 100px; height: 100px; }
.B, .D { background-color: green;}
.C { width: 100px; background-color: blue; }
.A div { float: left; }
.C, .D { position:relative; left: -50px; }

.A2 { width: 290px; height:200px; background-color: red; }
.B2, .C2, .D2 { width: 100px; height: 100px; }
.B2, .D2 { background-color: green;}
.C2 { width: 100px; background-color: blue; }
.A2 div { float: left; } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T20:16:03.040

好吧 3x100px > 290px，对吧？所以难怪第 3 个盒子会换行。

您需要记住，这`position:relative` **会保持元素的原始空间**被占用。这就是为什么 3 个框不适合的原因，尽管您将 2 个框向左移动 50 像素。

编辑：

尝试使用`position:absolute`- 它将元素从文档流中取出（尽管这与 float “不兼容”）。除此之外，您需要调整子元素的宽度以适应父元素的宽度，反之亦然。

请记住，通过使用绝对定位或负边距，您的部分内容会被剪裁。最好使用正确的尺寸，所以一切都很合适。

[例子](http://jsfiddle.net/M6uBk/16/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:23:44.337

如果您希望它们全部放在一条线上，您可以使用负边距。

你有 10px 的额外空间要计算，所以你可能想要尽可能均匀地划分，像这样（3 个元素有点尴尬）：

```
.B{ margin-left: -3px; }
.C{ margin-left: -3px; }
.D{ margin-left: -4px; } 
```

[http://jsfiddle.net/M6uBk/15/](http://jsfiddle.net/M6uBk/15/)

还有许多其他方法可以做到这一点，或者您可以以任何方式调整这些数字，使它们加起来为 10，这仅取决于您要显示的元素有多少，因为它不可能全部放入容器中。

# ios - 在 UIAutomation 中不起作用的按钮上的点击命令

> ID：10590353
> 
> 赞同：2
> 
> 时间：2012-05-14T20:11:23.907
> 
> 标签：ios, functional-testing, ios-ui-automation, automated-tests

我在应用程序中有这个按钮。我想模拟点击按钮。该按钮的位置如下：target>frontMostApp()>windows()[0]>buttons()[2]。我的 javascript 代码如下： `target.frontMostApp().windows()[0].buttons()[2].tap();` 但运行代码后，显示以下错误消息：

> 错误：无法点击 target.frontMostApp().windows()[0].buttons()[2]

我已检查此按钮的可访问性标签是否设置为启用。谁能告诉我我做错了什么？以下是仪器控制台的屏幕截图：

![在此处输入图像描述](../Images/f1129ce20b04331e56aaf29c87c4b9ac.png)

突出显示的按钮是我想点击的按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:24:49.427

我刚刚解决了这个问题。只是我试图点击的按钮不可见。我检查`.isVisible()`并返回错误。谢谢您的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T03:23:22.260

您可以`logElementTree()`在窗口上运行并将其粘贴到您的问题中吗？该错误通常意味着您要查找的元素无效。也许我们可以通过一起查看元素树来帮助发现问题。

# jquery-masonry - 从数据库中提取 PHP 内容的 Jquery Masonry

> ID：10590354
> 
> 赞同：0
> 
> 时间：2012-05-14T20:11:24.340
> 
> 标签：jquery-masonry

因此，我正在开发一个 PHP 站点，该站点从数据库中提取数据并将其格式化为 html 帖子。然后，此 php 页面对数据库中的所有帖子重复该过程。index.php 页面然后将所有这些帖子拉入自身以进行显示。

我的砌体工程只工作了一部分。它识别 index.php 上的容器，但不能识别被拉入的单个项目。

我知道这很模糊。我自己不了解php，正在努力学习它。php 是由不再从事该项目的其他人构建的。我只是想重新设计前端。我有一个平面 html 版本的网站，砌体工作完美。

# ios - Xcode“此mac上未安装私钥 - 分发”

> ID：10590356
> 
> 赞同：101
> 
> 时间：2012-05-14T20:11:40.740
> 
> 标签：ios, xcode, app-store

当我尝试将我的应用提交到应用商店时，我总是收到此消息。

这是消息的图片：

![图片](../Images/1cde45e24493e948b0336cef6199e83c.png)

如果有人可以帮助我解决这个问题，那就太好了，这样我就可以将我的应用程序提交到商店。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2014-01-02T23:19:50.727

尝试按照以下步骤操作：

1.  从 iOS 开发者网站吊销您现有的 iOS 分发证书。
2.  通过转到 XCode Preferences->Accounts->View Details 然后单击签名身份列表下方的 + 来生成新的 iOS 分发证书。
3.  返回开发人员网站并确保您的所有配置文件都配置了新证书。（完成后，它们都应该被列为活动。）
4.  返回 XCode 并刷新您的配置文件列表。

我遇到了和你一样的问题，这解决得很好。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-09-29T18:41:19.330

This solved it for me without starting all the way from scratch:
1\. Open Keychain Access on the machine that was used to generate the private keys
2\. Select Keychains->Login and Category->Certificates on the left hand side
3\. Locate the two certificates iPhone Developer: [your developer name] and iPhone Distribution: [your developer name]
4\. Select both, right click and choose Export 2 items...
5\. Enter a password of choice, save to disk and get the .p12-file over to the other machine that won't sign
6\. Open the file, enter the password and you should be good to go.

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2019-03-17T13:51:45.363

有类似的问题，经过几天的测试，检查，尝试修复等，对我有用的只是：

1.  打开 Xcode 的首选项（帐户面板）
2.  点击“管理证书”。
3.  添加新证书。

然后一切又开始工作了。

[![在此处输入图像描述](../Images/4d8cca68e4bfa84fa945a16a1916359d.png)](https://i.stack.imgur.com/qQysV.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-07-08T02:28:21.553

我也经历了这一点，并在这个过程中战斗了 4 个小时。最后我做了以下

1.  删除了我的钥匙串访问中的所有私钥和公钥以及证书
2.  删除了所有配置文件
3.  删除了所有 AppID - （可能不需要这样做，因为我想要一个干净的石板）
4.  删除了我在 Developer.Apple 网站上的认证
5.  创建了新的通配符开发配置文件
6.  为我正在部署的应用程序创建了新的 Profile SPECIFIC（因此它在 AppID 中具有 appname 而不是 *）
7.  从网站创建了新的开发证书。
8.  下载了中间证书（全球开发者关系证书颁发机构），因为我也把它从我的钥匙串上擦掉了
9.  创建了认证签名请求 (CSR)，按照信中的说明将其添加到我的钥匙串访问权限中。并上传了 CSR。
10.  添加认证后，我确保重命名公钥和私钥，并在信息框中添加评论 - 这样我就可以记住我做了什么。
11.  通过为分发重复步骤 7、9、10 创建一个新的分发证书，以便我可以将它放到 App Store 上。

希望这可以帮助某人知道您可以清除所有内容并重新开始。我在上周开始出现故障的 olf Macbook Pro 上加载了所有证书。所以我上周买了一台新的 Mac Air，但我不记得什么键了，我当然不记得我有 2 套 Private 和 Public 一套用于开发，1 套用于分发。（如果你有超过 1 个分布，我相信你会有更多的集合。）

史蒂夫

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-08-23T21:37:35.963

遇到同样的问题，在骂了 Apple 之后，我意识到这是我的错。

```
1.- Go to developer.apple.com / Certificates / Production
2.- Download your certificate 
```

在尝试其他答案后，这对我有用。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-27T06:29:17.743

值得检查 Keychain Access 以确保您没有多个具有相同名称的密钥。此外，当我经常遇到代码签名问题时，最快的解决方案是重新开始这个过程（创建新的密钥对、证书和配置文件）。

祝你好运！

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-04-28T01:51:52.967

转到首选项->帐户->选择您正在使用的Apple ID->单击“查看详细信息...”按钮->然后单击加号按钮并选择“iOS分发”按钮。更多细节[在这里](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/MaintainingCertificates/MaintainingCertificates.html#//apple_ref/doc/uid/TP40012582-CH31-SW6)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-05-14T20:24:21.590

似乎您已经生成了分发证书，因此您一定在某个时候生成了一个密钥对。你在多台机器上开发吗？从拥有它的机器中导出开发者配置文件并将其导入到这台机器中。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-27T20:05:22.683

这很简单，登录到用于创建分发证书的用户帐户（可能在不同的 Mac 上）。打开钥匙串访问并导出他们的私钥。然后将其安装到您的钥匙串。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-05-20T22:00:18.470

我的问题是 Xcode 不在私钥的访问控制列表中。您可以在钥匙串访问中解决此问题，而无需生成新的密钥对。

打开钥匙串访问。在左侧选择登录和我的证书。选择您的分发证书并双击您的私钥。选择访问控制，如果 Xcode 不存在，则将其添加到列表中。

重新启动 Xcode 并创建一个新存档。它现在应该找到私钥。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-07-08T19:06:35.183

我实际上只是关闭并重新打开了 xCode，然后一切恢复正常。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-06-25T15:00:19.587

我有另一个答案（除了我之前的帖子）。今天，我的私钥过期了（正如我在查看 KeyChain Access 时发现的那样），并且一个新的在列表中。如何？Idk ...也许是通过使用我出现的XCode“修复问题”按钮，或者通过拉动配置文件的更新，正如我在另一篇文章中描述的那样，自动创建了一个新的？...

无论如何，我登录了开发中心，找到了我想使用的配置文件并单击“编辑”。然后我可以选择“证书”。我发现想要的那个没有被选中。我选择它并单击“生成”以重新创建配置文件。然后我就可以下载了。我将文件拖放到我的 XCode 停靠图标上。那解决了它！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-05-31T07:17:30.050

我有解决方案：

您的公司有一个 Company (Enterprise Distribution).pem 和 CompanyEnterpriseDistribution.p12，您也必须安装它们。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-07-01T14:28:36.033

我创建了一个新的分发证书，然后编辑了我现有的配置文件以指向该新证书，然后在 Xcode > 首选项 > 帐户 > 查看详细信息中更新了我的签名证书。

像魅力一样工作

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-06-23T08:45:13.413

这为我解决了它，而无需从头开始：

1.  由其他 macbook 重新生成文件“CertificateSigningRequest.certSigningRequest”。
2.  重新生成证书“ ******* Grid Information Technology Co.,Ltd”
3.  重新生成配置文件

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-05-23T10:22:46.500

尝试这个..

*   在您的“系统偏好设置”中选择“安全和隐私”。

*   点击左下角的“锁定”图标。

*   将“允许从任何地方下载的应用程序”更改为“Mac App Store 和已识别的开发人员”。

- 然后尝试构建。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-05-22T17:53:24.327

我在苹果有一个公司帐户。我通过以下方式解决了这个问题：

1) 在开发者网站 Certificates, Identifiers & Profiles
2) 在 Provisioning Profiles -> development
3) 进入我的开发 Provisioning -> edit
4) 然后下载，然后双击。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-06-08T09:27:18.253

对于那些在一段时间后尝试更新应用程序的人，您需要在 Apple Development Center 中更新您的 Porvisioning Profile，然后只需转到 Apple Development Center 左侧的证书，下载分发证书并打开它.

Xcode 将完成剩下的工作并让您运行应用程序。

干杯!

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-06-09T07:27:06.053

对我来说，我没有安装我的生产证书。（我已经安装了开发证书）

下载生产证书并安装到钥匙串后，它对我有用。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-06-24T15:26:33.677

我正在为我的 beta iOS 应用程序构建和分发开发 ipa。我一再不得不将新设备添加到允许的列表中，并且因此造成了许多麻烦。这次我正在记录和分享这样一个问题和解决方案......

我在开发者中心的列表中添加了一个新的 udid，建立了一个存档，发现在 ipa 中嵌入的配置文件中找不到 ipa。因此，我在 XCode 中刷新了我的配置文件（以获取更新的列表），这个错误是由于缺少私钥引起的（如本线程开头所述）。

然后我无法建立另一个档案。此外，这在尝试构建项目时会产生代码签名错误。

在经历了很多痛苦之后，我这样修复了它：

在 XCode 中，转到 Preferences...Account 选项卡。单击添加按钮（左中）并选择“iOS 开发”。这将创建一个新的签名身份。

您现在应该能够使用新的配置文件来创建存档。

此外，应该修复构建错误。回到项目的“常规”选项卡，选择“团队”并重试构建。可能会有一些额外的权限对话框。出现提示时单击“修复”或“始终允许”。

注意：会员中心和钥匙串列表会变得一团糟，签名 id 会重复，但至少一切正常。您可能想尝试清理它...

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2013-11-07T02:27:14.667

this will happen because you have format your mac and reinstall it or you are developing from new mac .

if you can not do the above and have your old certicate and profiles exported from the old mac

you will need to remove the wild card provissioning profiles from apple developer center , and also from certifcates you have to remove the old ones just the general development and production certificates .

then you will have to create new ones and to create new provisioning profiles for the app you need to upload to apple .

you do not need to delete all the provisiong profiles for now , but for sure you will need to create new ones for apps that you do not create for it .

# ruby - 在子目录的文件中搜索字符串

> ID：10590359
> 
> 赞同：2
> 
> 时间：2012-05-14T20:11:53.997
> 
> 标签：ruby, string, file, search, directory

我需要找到所有包含`<some_word>`. 有 MAIN 目录，我们必须在其中搜索，并且可以有文件和其他目录（带有文件）。它必须进入一个目录 - 检查那里的所有文件`<some_word>`，返回主目录 - 进入另一个目录 - 检查那里的所有文件，返回主目录......等等。当主目录中只有文件时，我没有问题......但不知道如何使用目录......请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T20:17:58.610

处理目录中的所有文件：

```
Dir['**/*'].each do |filepath|
  # filepath is a string path to the file or directory
  # relative from the working directory of the script
end 
```

*有关详细信息，请参阅[`Dir.[]`](http://ruby-doc.org/core-1.9.3/Dir.html#method-c-5B-5D)或的文档[`Dir.glob`](http://ruby-doc.org/core-1.9.3/Dir.html#method-c-glob)。*

因此，如果你已经拥有`find_text_in_file( some_word, filepath )`，你可以这样做：

```
Dir['**/*'].select{|f| File.file?(f) }.each do |filepath|
  find_text_in_file( some_word, filepath )
end 
```

请注意，以上将在深度优先遍历中搜索文件。如果你想以广度优先的方式搜索，你可以改用这个：

```
files = Dir['**/*'].select{ |f| File.file?(f) }
files.sort_by{ |f| f.split(File::SEPARATOR).length }.each do |filepath|
  find_text_in_file( some_word, filepath )
end 
```

* * *

或者，如果您已经拥有，`find_word_in_directory( some_word, dirpath )`那么您可以执行以下操作：

```
Dir['**/*'].select{ |f| File.directory?(f) }.each do |dirpath|
  find_word_in_directory( some_word, dirpath )
end 
```

# python-2.7 - 如何在 Python 2.7 运行后保存变量

> ID：10590363
> 
> 赞同：0
> 
> 时间：2012-05-14T20:12:08.573
> 
> 标签：python-2.7

好的，所以我在从用户那里获取将在程序中使用的输入时遇到问题，直到使用 cmd 中的某些选项再次运行它。

假设用户使用参数 GUI 从 cmd 运行程序，这将打开一个 Tk 窗口，询问他们的电子邮件，用户按下提交，输入框中的文本保存到变量中，现在它可以将它用于该运行时，但在下一次运行时，比如没有参数，它将不会有任何分配给该变量，因为它已从内存中清除。

如果我可以让它在运行时以某种方式保存变量，我会发现它是理想的，因为用户将像这样使用该程序，直到他们收到一封新电子邮件，然后他们将再次使用选项 GUI 运行它以分配一个新的一。现在我正在使用 .txt 来做到这一点，但我发现即使在使用 base64 加密电子邮件/密码之后也有点不安全，因为它很容易被解密。我将如何以更安全、更便携的方式执行此操作，因为用户很容易忘记不要删除文件，并将 .txt 文件移动到正确的目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:05:51.473

首先，base64 不是“加密”。它只是一种编码格式，在 base64 中保存任何内容都不会保护它不被读取。

我认为适合您的情况的最佳解决方案是使用某种系统级“钥匙串”。否则，只需在每次需要密码时向用户询问密码，但这当然可能会变得烦人。

# java - Java项目目录结构约定

> ID：10590366
> 
> 赞同：6
> 
> 时间：2012-05-14T20:12:27.463
> 
> 标签：java, maven, directory

我从事过 maven 项目，其中的目录结构如下所示：

```
src/
  main/
    java/
  test/
    java/ 
```

我想知道是否存在其他目录结构约定。这个约定是特定于 maven 的还是适用于所有 Java？我有一个需要多种编程语言的项目，并且对是否存在某些标准感到好奇。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T20:27:45.500

它是特定于 Maven 的目录结构约定，但是即使在 Maven 世界之外它也变得非常流行，因为它很好（就像任何其他有意义的约定一样）并且没有理由不将它用于 Ant 管理的项目或只是常规 Java 项目。甚至不需要项目的 Java 特性。例如，[FlexMojos](http://flexmojos.sonatype.org/)项目使 Flex 项目能够由 Maven 管理。

如果您打算使用多种编程语言，则必须使用一些扩展 Maven 功能的附加插件。例如，您可以使用[GMaven](http://groovy.codehaus.org/GMaven)插件在 Maven 项目中启用 Groovy 语言支持。然后，有约定（实际上是插件的默认设置）将 Groovy 源代码放入`src/main/groovy`. 默认情况下，仅支持 Java。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T08:08:06.127

约定是遵循[Maven 中的默认文件夹布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)。此外，其他编程语言遵循这些约定，如 src/main/c++ 等。

# javascript - 设置 IFRAME 的 style.height 属性对 Android Mobile Safari 没有任何影响

> ID：10590374
> 
> 赞同：1
> 
> 时间：2012-05-14T20:13:24.870
> 
> 标签：javascript, android, html, dom

我有一个名为“parent.html”的 HTML，它在 IFRAME 中显示“child.html”。我正在尝试通过以下方式调整 IFRAME 的高度。

```
f = document.getElementById('frame');
log('B: Frame height: ' + f.style.height);
log('B: Child offsetHeight: ' + f.contentWindow.document.body.offsetHeight);
log('B: Child scrollHeight: ' + f.contentWindow.document.body.scrollHeight);
f.style.height = f.contentWindow.document.body.offsetHeight + 'px';
log('A: Frame height: ' + f.style.height); 
```

它适用于桌面浏览器，如左侧显示的 Google Chrome 浏览器屏幕截图所示。它不适用于三星 Galaxy S II 上 Android 的默认浏览器。

[![](../Images/a3f68350bae68116f4541d1afbcf8f53.png)](https://i.stack.imgur.com/9dEYL.png) [![](../Images/de9a9543c672c601694a1ebdbd77f0d6.png)](https://i.stack.imgur.com/pSJwp.png)

# 浏览器详情

以下是两个浏览器的用户代理字符串，分别为：

1.  `Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.41 Safari/536.5`
2.  `Mozilla/5.0 (Linux; U; Android 2.3.4; en-gb; GT-I9100G Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1`

# HTML

这是'parent.html'的完整代码：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Parent</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style type="text/css">
div#log {
    background: #333333;
    color: white;
    padding: 10px;
}

iframe#frame {
    height: 200px;
}
</style>

<script type="text/javascript">
var logDiv;
var f;

window.onload = function() {
    logDiv = document.getElementById('log');
    logDiv.innerHTML = 'Logger ready<br>';

    f = document.getElementById('frame');
    log('B: Frame height: ' + f.style.height);
    log('B: Child offsetHeight: ' + f.contentWindow.document.body.offsetHeight);
    log('B: Child scrollHeight: ' + f.contentWindow.document.body.scrollHeight);
    f.style.height = f.contentWindow.document.body.offsetHeight + 'px';
    log('A: Frame height: ' + f.style.height);
}

function log(msg)
{
    logDiv.innerHTML += msg + '<br>';
}
</script>
</head>
<body>
<iframe id="frame" src="child.html">IFRAME not supported</iframe>
<div id="log">&nbsp;</div>
</body>
</html> 
```

这是'child.html'的完整代码：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Child</title>
</head>
<style type="text/css">
body, p {
    margin: 0;
    padding: 0;
}
</style>
<body>
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer
fermentum, nunc eget bibendum imperdiet, est odio sagittis lectus,
volutpat viverra odio eros vel quam.
</div>
</body>
</html> 
```

# 问题

1.  这是预期的行为吗？是否有在线文档描述了我可以在 Android 浏览器中操作哪些 DOM 对象以及我不能操作哪些？
2.  有没有其他方法可以在 Android 中调整 IFRAME 的大小？

# iphone - 是否可以让（非越狱的）iPhone 发出 i2c 命令？

> ID：10590377
> 
> 赞同：1
> 
> 时间：2012-05-14T20:13:48.990
> 
> 标签：iphone, ios, hardware, i2c, interfacing

我想直接从我的 iPhone控制[一串 LED 。](http://www.alibaba.com/product-gs/547149280/Infinite_extension_5050_RGB_LED_Flexible.html)[LED 控制器芯片](http://arduino.cc/forum/index.php/topic,74566.msg784589.html#msg784589)使用i2c[串行](http://en.wikipedia.org/wiki/I%C2%B2C)协议。

我可以在未越狱的 iPhone 上使用 Apple 支持的 API 执行此操作吗？我需要使用哪些框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-25T06:55:40.873

是的，但您需要外部硬件来执行此操作。iOS 不允许您直接访问对接连接器中的 I2C。

[KissBos](http://kiss-box.com) 有一个 OEM 板可以做到这一点，并带有一个特殊的固件。您可以通过 WiFi、使用基于 TCP 的协议或通过基于 RTP-MIDI 的协议连接到他们的开发板（RTP-MIDI 在 iOS 中实现，您不必处理协议细节，它只是一个 MIDI 端口你的申请）。

如果您想通过扩展坞连接器，您将需要他们的 USB 接口（它将 USB 转换为 RTP-MIDI，进入 OEM 板）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:30:49.850

我很确定你不能那样做。Apple 对您可以做什么和不可以做什么非常严格。我花了几天时间试图找到一种方法来访问 iphone 的蓝牙层，结果我的头靠在墙上（只有有限的游戏 api 是公开的，否则你必须使用 Made For Iphone 程序）。但是，您可以使用 USB 电缆做一些事情，但我想可能性也有限。

# java - Java 线程 - 获取 ServerSocket 输入以更新 Swing

> ID：10590379
> 
> 赞同：1
> 
> 时间：2012-05-14T20:14:03.393
> 
> 标签：java, multithreading, swing, sockets, client-server

我首先问[了这个](https://stackoverflow.com/q/10575808/1305463)问题，我弄清楚了 EDT 是如何工作的，并通过阅读[这篇](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)文章开始阅读更多关于 swing 和工作线程的内容。我开始了解它们是如何工作的，并将我的代码固定在它将运行的位置。现在我正在尝试从我的工作线程*（服务器）*获取信息以更新我的 GUI。尽管我似乎无法解决问题，但我遇到了问题。问题是我需要继续监听新客户端*（因为服务器应该处理多个客户端）*但是因为那是在一个 while 循环中，我从来没有碰到我的工作线程的返回。我也看不到任何其他设置方式。有人可以看看我的代码并提出一种我可以让它工作的方法吗？

***主类***

```
package com.sever.core;

import java.io.IOException;
import java.net.Socket;
import java.util.Scanner;
import java.util.concurrent.ExecutionException;

import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;

public class Main { 

private SocketManager network;
private Window window;

public static void main(String[] args){         
    Main main = new Main();
    main.runGUI();
    main.runServer();
}

private void runGUI(){

    //Runs the swing components in the EDT.
    SwingUtilities.invokeLater(new Runnable(){
        @Override
        public void run() {
            window = new Window();
            window.setVisible(true);
        }       
    });
}

private void runServer(){

    //Runs the Server process on a worker thread.
    SwingWorker<String, String> server = new SwingWorker(){
        @Override
        protected Object doInBackground() throws Exception {    
            network = new SocketManager(25595);
            /*
             * Here is the problem. I need to keep running this code so,
             * that I can let multiple clients connect. However,
             * it then never reaches the return.
             */
            while(true){
                try {   
                    network.setSocket(network.getServerSocket().accept());
                    addUser(network.getSocket());
                } catch (Exception e) {
                    System.out.println("Failed to connect.");
                }
            }
            return network.getMessage(); 
        }

        @Override
        protected void done(){
            try {
                window.updateChat(get().toString());
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    };
    server.run();
}

private void addUser(Socket s){
    try {
        Scanner input = new Scanner(s.getInputStream());
        network.addUser(input.nextLine());
    } catch (Exception e) {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:22:41.497

来自[Java 教程](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)

**服务器**

```
public class Server {

    public static void main(String[] args) {
        ServerSocket server = new ServerSocket(4444);

        while(true) {
            new ServerThread(server.accept()).start();
        }
    }
} 
```

**服务器线程**

```
public class ServerThread implements Runnable {

    private InputStream in;
    private OutputStream out;

    public ServerThread(Socket client) {
        in = client.getInputStream();
        out = client.getOutputStream();
    }

    public void run() {
        // do your socket things 
    }
} 
```

# sqlite - 如何在不知道我查询的是哪个表的情况下查询表中的任何列是否包含某个值？

> ID：10590388
> 
> 赞同：0
> 
> 时间：2012-05-14T20:15:03.047
> 
> 标签：sqlite, search

我有一堆不同的表，每个表都有一个 ID 列，我想提供一个搜索功能，它将搜索所有表的所有列并返回包含匹配字符串的行的 ID 列。由于我想对所有表的所有列执行此操作，因此我无法执行`WHERE col1 CONTAINS TEXT_STRING OR col2 ...`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:20:32.757

好吧，如果您需要这样做，那么您的设计就有问题。但是当然有很多时候你必须使用别人给你的东西！

我会创建一个视图，在视图中我会创建所有可能的表的联合。稍后您可以搜索视图。但是您必须在所有表的该列上建立索引，否则您将获得非常糟糕的性能。

# bash - 使从我的 bash 脚本生成的字符串准备好粘贴到其他地方

> ID：10590389
> 
> 赞同：0
> 
> 时间：2012-05-14T20:15:11.570
> 
> 标签：bash, terminal, copy, paste, putty

我使用 putty 远程连接到我有一个 bash 脚本（函数）的 linux 服务器，我设计它来生成一些字符串。通常我可以让我的函数将字符串回显到腻子屏幕，以便我可以使用鼠标选择字符串，然后直接粘贴到 Windows 中的其他位置。

但是我不知道是否有任何方法可以使该字符串准备好粘贴到其他地方而不选择它？更清楚地说，在我输入函数后的bash中，我可以退出腻子然后crtl + c将我的函数生成的字符串粘贴到Windows？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:29:09.033

If you run an X server on your client (PuTTY does support X forwarding for use in conjunction with such a tool, and several X servers for Windows are available -- including [a Cygwin port of Xorg](http://x.cygwin.com/)), you can use [XClip](http://sourceforge.net/projects/xclip/) to directly interact with the remote clipboard, as such:

```
xclip -i <<<"$variable_with_things_to_copy" 
```

Depending on the X server for Windows you're using, and how it manages integration with the native clipboard, it may be necessary to add `-selection primary`, `-selection secondary`, or `-selection clipboard` to specify which of the three clipboards X11 supports is tied to the native Windows one; experiment!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:00:02.580

我不知道有任何用于跨平台剪贴板共享的非商业实用程序。如果没有实用程序来同步剪贴板，您需要使用 PuTTY 客户端的功能。

[腻子常见问题解答](http://www.chiark.greenend.org.uk/~sgtatham/putty/faq.html)说：

> A.6.6 如何在 PuTTY 和其他 Windows 应用程序之间进行复制和粘贴？
> 
> 复制和粘贴的工作方式与 X Window System 类似。您可以使用鼠标左键在 PuTTY 窗口中选择文本。选择动作会自动将文本复制到剪贴板：无需按 Ctrl-Ins 或 Ctrl-C 或其他任何键。事实上，按下 Ctrl-C 会将 Ctrl-C 字符发送到连接的另一端（就像它在其余时间所做的一样），这可能会产生令人不快的效果。要将文本复制到剪贴板，您唯一需要做的就是选择它。

另一种说法是 PuTTY 与*Windows*剪贴板交互；它与远程主机上的任何剪贴板工具完全没有交互。

# forms - jquery iframe表单提交刷新页面

> ID：10590390
> 
> 赞同：0
> 
> 时间：2012-05-14T20:15:16.863
> 
> 标签：forms, session, iframe, upload, refresh

我有一个非常奇怪的问题。最近我在 iframe 上使用 jquery 表单提交创建了一个上传页面（我不想刷新页面），它运行良好。

当我将此代码放在我的真实页面上时，会出现一个奇怪的问题。我有一个带有此代码的按钮：

```
("#upload_button").click(function(){
    $("form").submit();
    }) 
```

但是当我点击它时，整个页面都在刷新，我的用户会话消失了。这有什么办法？

PS：我的初始版本完美运行。

哦，是的。如果我放了一个提交按钮，它也可以工作。但我想在 div 上使用 jquery 提交

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:31:40.007

尽量不要使用表单标签，而是使用表单 id 参数。像 $('#MyForm') 之类的东西。以这种方式使用它可以确保您调用正确的表单。

# ios - UISlider 值，转换为 NSNumber，= -1.10311e-146

> ID：10590392
> 
> 赞同：0
> 
> 时间：2012-05-14T20:15:39.077
> 
> 标签：ios, floating-point, uislider, nsnumber

AI 有一个滑块，我将它的值保存到用户默认值，然后在不同的视图中抓取该数字。然后我将该浮点数转换为 NSNumber 以在 CiRadialGradient 过滤器中使用。

我正在保存如下值：

```
[[NSUserDefaults standardUserDefaults] setFloat:_alphaSlider.value forKey:@"Alpha"]; 
```

并检索如下：

```
NSNumber *inRadius1 = [NSNumber numberWithFloat:[[NSUserDefaults standardUserDefaults] floatForKey:@"Alpha"]]; 
```

问题是当抓取滑块值并将其转换为 NSNumber 时，我得到的值为 -1.10311e-146。我期待一些不同的东西。

在我的情节提要中，滑块值设置为 0 到 100。无论我将滑块放在哪里，该值始终是一个很大的负数。

有任何想法吗？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:28:56.377

我猜你是这样记录的：

```
NSLog(@"%f", inRadius1); 
```

但实际上 NSNumber 是一个 Objective-C 对象，所以你应该使用`%@`：

```
NSLog(@"%@", inRadius1); 
```

# c++ - 将数组传递给函数错误

> ID：10590394
> 
> 赞同：0
> 
> 时间：2012-05-14T20:15:50.373
> 
> 标签：c++, arrays

我正在尝试将数组传递给函数，但收到的值只是数组中的第一个值。我究竟做错了什么 ？以下是操作中涉及的 3 个功能。

```
void computeCScode (int temp1, int temp2, int code[])
{
    if((temp1<100)&&(temp2<100)) 
{
    code[0]=1;
    code[1]=0;
    code[2]=1;
    code[3]=0;
}
else if((temp1<100)&&(temp2>=100&&temp2<=400))
{
    code[0]=1;
    code[1]=0;
    code[2]=0;
    code[3]=0;
}
...
 }

 void invert(int x1, int y1, int x2, int y2, int firstCode[], int secondCode[])
   {
     int ok=1;
int *temp;
temp=(int*)malloc(sizeof(firstCode));
int aux;
if(firstCode==0000) ok=1;
else ok=0;
... 
```

}

```
void cs(HDC hdc, int x1, int y1, int x2, int y2)
{
int firstCode[4];
int secondCode[4];
FINISHED = FALSE;
DISPLAY=FALSE;
REJECTED=FALSE;
do
{
    computeCScode(x1,y1,firstCode);
    computeCScode(x2,y2,secondCode);
    ...
            invert(x1,y1,x2,y2,firstCode,secondCode);
    }while(!FINISHED);
} 
```

在 computeCScode 之后，firstCode 和 secondCode 就可以了。但是当将它们传递给反转时，在函数内部它们只使用函数的第一个值。我忘记了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:19:44.613

这部分`invert`没有做你认为它做的事情：

```
temp=firstCode;
firstCode=secondCode;
secondCode=temp; 
```

如果您真的想交换数组的内容，请使用`memcpy`or`for`循环，例如

```
for (i = 0; i < 4; ++i)
{
    int temp = firstCode[i];
    firstCode[i] = secondCode[i];
    secondCode[i] = temp;
} 
```

# sql - vb6 & SQL 中的查询字符串语法错误

> ID：10590399
> 
> 赞同：0
> 
> 时间：2012-05-14T20:16:12.447
> 
> 标签：sql, string, vb6

我不知道这段代码的哪一部分写错了。

在我的查询字符串中，我试图收集 sFrom 和 sTo 值之间的一系列记录。基本上，我想做到这一点，以便在我从数据库中收集的所有控制数字中，唯一显示的将是用户输入的起始范围 (sFrom) 和结束范围 (sTo) 的任何内容。

```
sQuery = "SELECT " & sFields & " FROM " & sTable &
         " Where store_id Like 'XXX'" & sFilter &
         " Where control_no > sFrom and < sTo " &
           order by " & sOrderBy 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:51:24.463

这：

`" Where control_no > sFrom and < sTo "`

应该是这样的：

`" Where control_no >= " & sFrom & " and control_no <= " & sTo`

（当然假设 sFrom 和 sTo 是由用户输入的数字填充的字符串变量）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:19:37.227

您不能在 < 之前删除 control_no

```
sQuery = "SELECT " & sFields & " FROM " & sTable & " Where store_id Like 'XXX'" & sFilter & " Where control_no > sFrom and control_no < sTo " & order by " & sOrderBy 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:50:59.790

1.  在' 和下一个字符串`Like 'XXX'" & sFilter`之间没有空格。`X`
2.  您根本没有行继续字符。
3.  您有两个 Where 子句。
4.  `sFrom`并且`sTo`是文字字符串。您可能打算将它们用作变量。
5.  `control_no`和之间没有可比性`sTo`。
6.  `sFilter`你和周围的 SQL之间没有任何语句。
7.  您之前没有双引号`order by`。
8.  就像样式选择一样，您的 SQL 关键字大小写不一致。

现在，把它们放在一起：

```
sQuery = "SELECT " & sFields & " FROM " & sTable & _
         " WHERE store_id LIKE 'XXX'" & _
         " AND " & sFilter & _
         " AND control_no > " & sFrom & _
         " AND control_no < " & sTo & _
         " ORDER BY " & sOrderBy 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T08:51:43.407

调试此问题的最佳方法是查看生成的 SQL 语句是什么并从那里开始工作。

您目前的评估结果类似于

```
SELECT field, field2 FROM table Where store_id Like 'XXX'FilterString Where control_no > sFrom and < sTo order by field1 
```

1.  您不能有多个 WHERE 子句。
2.  我希望您的`sFilter`包含是非常错误的，但这取决于确切的价值。
3.  `sFrom`并`sTo`作为文字包含在内，未评估（参见[tcarvin 的回答](https://stackoverflow.com/a/10590838/588306)）
4.  条款的每个部分都`WHERE`需要完整和完整。您不能省略要检查的字段（请参阅[Darrel 的回答](https://stackoverflow.com/a/10590439/588306)）

# ios - 将 url 发送到 iPhone 应用程序的最简单方法是什么？

> ID：10590402
> 
> 赞同：-1
> 
> 时间：2012-05-14T20:16:28.893
> 
> 标签：ios

我正在编写一个应用程序来帮助我在使用 iPhone 时进行更好的研究。其中一部分涉及跟踪/标记网址以供稍后查看。

将我正在查看的网址发送到我的应用程序的最简单方法是什么？

到目前为止，我正在使用一个特殊的电子邮件地址，以及一项从电子邮件中解析 URL 并使其可用于某处服务器上的应用程序的服务，但如果可能的话，我希望做得更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:50:23.977

[推送通知](https://developer.apple.com/appstore/push-notifications/index.html)呢。您甚至可以创建一个浏览器插件，让一个按钮将 url 推送到您的服务器，然后使用推送通知将该 url 发送/复制到设备。

# php - 使用 Symfony2 创建多租户应用程序

> ID：10590406
> 
> 赞同：-2
> 
> 时间：2012-05-14T20:16:52.837
> 
> 标签：php, symfony, yaml, multi-tenant

我正在尝试使用 Symfony2 创建一个多租户应用程序。

有人知道如何根据访问应用程序的域来选择要连接的数据库吗？例如。company1.domain.com => db1, company2.domain.com => db2

我找到了可能有帮助的插件，例如 sfMultiTenantPlugin，但似乎都有缺点。

我只需要 parameters.ini 文件根据域具有不同的 database_name 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:59:06.500

也许是这样的？ [这里](http://webcheatsheet.com/php/get_current_page_url.php)

然后使用开关分配您的连接变量。

```
case "company1.domain.com":
  $dbname = `db1`;
  etc. 
```

（我没有使用 Symfony2 的经验，但听起来好像不在此范围内。我可能是错的。）
希望这会有所帮助。

# sql - 如何编写这个棘手的 SQL 查询？

> ID：10590407
> 
> 赞同：0
> 
> 时间：2012-05-14T20:17:01.757
> 
> 标签：sql

**[仅供参考，这不是家庭作业——我想每个人都认为是因为我努力将我的问题格式化为一种简单易读的形式？再次，不是家庭作业。我在工作，只是想学习。谢谢。]**

我非常坚持一个棘手的问题。我是 Java 人，我不是 SQL 人，因此非常感谢您提供任何帮助！

我有一个 PROJECT 表和一个 TASK 表，如下所示：

```
**PROJECT**
projectId
name 
```

PROJECT 有许多任务：

```
**TASK**
taskId
projectId
description
userId // the user who is assigned the task
status // either "IN_PROGRESS" or "COMPLETE"
sequence // the numeric sequence of the TASK in the PROJECT 
```

例如：

```
Project
   projectId=100
   name="Build House"
Task
   taskId=250 // task IDs are not necessary in numerical order
   sequence=1
   description="Pour Foundation"
   userId=55
   status="COMPLETE"
Task
   taskId=240
   sequence=2
   description="Build walls"
   userId=56
   status="COMPLETE"
Task
   taskId=260
   sequence=3
   description="Install windows"
   userId=57
   status="IN_PROGRESS"
Task
   taskId=245
   sequence=4
   description="Build roof"
   userId=58
   status="IN_PROGRESS" 
```

我需要两个查询：

(1) 对于给定的 projectId，获取“当前任务”。当前任务是编号最小`sequence`但未完成的任务编号。在我的示例中，`getCurrentTask(projectId=100)`将返回 taskId 260（因为它是第一个不完整的）。

(2) 对于给定的 userId，获取分配给“当前任务”的项目列表。在我的示例中，`getProjectsForUserId(userId=57)`将返回 projectId 100；`getProjectsForUserId(userId=58)`不会返回任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:22:39.263

```
SELECT min(taskID) FROM Task WHERE ProjectID = ? and status <> "COMPLETE";

SELECT projectID FROM 
Tasks T INNER JOIN
(SELECT min(taskID) as taskID, projectID FROM Task GROUP BY projectID WHERE status <> "COMPLETE")
AS CT on CT.taskID = T.taskID
WHERE T.userId = ?' 
```

**编辑**

下面的查询按顺序排列，而不是 TaskID。

```
SELECT taskID from Task T INNER JOIN
(SELECT min(sequence) as sequence, projectID FROM Task GROUP BY projectID WHERE status <> "COMPLETE")
   AS CT on CT.sequence = T.sequence AND CT.projectID = T.projectID
WHERE T.projectID = ?;

SELECT projectID FROM 
Task T INNER JOIN
(SELECT min(sequence) as sequence, projectID FROM Task GROUP BY projectID WHERE status <> "COMPLETE")
   AS CT on CT.sequence = T.sequence AND CT.projectID = T.projectID
WHERE T.userID = ?; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:24:51.273

如果是家庭作业，我会给出以下提示：

(1)：一个简单的查询`Tasks`就可以了。（毕竟您知道项目 ID，对吗？）使用聚合函数和`WHERE`子句。

(2)：尝试`Projects`使用`WHERE EXISTS ...`构造进行查询。`DISTINCT`也可能派上用场。

**编辑：**您甚至不需要触摸`Projects`第二个查询。@true 发布的查询看起来是正确的。

**编辑^2：** ...但是@true 的查询没有考虑到只有“当前”任务才感兴趣的微妙之处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:22:50.310

```
SELECT * FROM TASK
LEFT OUTER JOIN PROJECT ON 
    TASK.PROJECTID=PROJECT.PROJECTID 
WHERE TASK.STATUS='IN_PROGRESS' 
  AND PROJECT.PROJECTID=?
ORDER BY SEQUENCE ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T20:24:38.217

第一个查询（更新）：

```
SELECT taskId FROM `task` 
WHERE `projectId`=100 AND `status` = "IN_PROGRESS" 
ORDER BY `sequence`
LIMIT 1 
```

第二个：

```
SELECT DISTINCT(projectId) FROM task 
WHERE userId=57 AND `status` = "IN_PROGRESS"
ORDER BY `sequence` 
```

PS 没有向项目表添加任何连接，因为在您的任务中您只询问了 id。

# android - 从应用程序（Android）中的任何位置访问变量

> ID：10590408
> 
> 赞同：1
> 
> 时间：2012-05-14T20:17:06.847
> 
> 标签：android, object

是否可以在启动活动中创建一个变量（例如：活动 1 中的 Book 类）并使其在应用程序中的任何位置可用（例如，活动 3、4 和 5 中的 Book 类）而不实际传递它。

我问是因为我的 xml 处理程序创建了一系列对象，它还会在对对象进行任何更改后更新 xml 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:19:56.437

您可以创建一个静态变量。只要它被声明为具有适当的访问权限（例如，`public`），它就可以直接用于同一进程中的任何活动。（这将是默认设置；您需要做额外的工作才能将活动放入单独的流程中。）

将这些全局变量分离到一个单独的类中是很常见的。

但是，请注意，如果您的应用程序被推送到后台，则该进程可能会被终止并重新创建。在这种情况下，存储在静态变量中的任何数据都将丢失。替代方法包括使用 SharedPreferences、数据库或 ContentProvider。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:46:44.263

Implement a class, for example with the name GlobalVariables, which extends Application.

```
public class GlobalVariables extends Application 
```

In your AndroidManifest.xml do this in the application tag:

```
<application android:label="@string/YourAppName" android:icon="@drawable/YourIcon"
                 android:name=".activities.GlobalVariables."> 
```

Don´t forget the package path for declaring your class (similar you do for adding activities to manifest file).

Then you can access this class and its variables or methods from everywhere of your application. Do this in the onCreate method of any Activity:

```
GlobalVariables globalVariables = (GlobalVariables) getApplicationContext(); 
```

The Class extended from Application (e.g. our GlobalVariables here) will be created with the start of your app and will be available until the app will be destroyed.

You can have a HashMap or something, else where you can store your desired variable, in the GlobalVariables class. Push the variable from your first Activity into the GlovalVariables and pull it from the second trough getting an instance to the GlobalVariables. Like this (once again):

```
GlobalVariables globalVariables = (GlobalVariables) getApplicationContext(); 
```

# php - 缺少所需文件的具体 5 主题安装问题

> ID：10590416
> 
> 赞同：0
> 
> 时间：2012-05-14T20:17:40.347
> 
> 标签：php, content-management-system, content-management, concrete5

我已经安装了 Concrete 5.5.2.1，现在我正在尝试安装我从市场上下载的主题。

我已经下载了 zip 存档，将其解压缩并将整个目录通过 FTP 上传到 /themes 目录。但是，在尝试了几个主题后，我每次都会收到此错误：

> 未找到文件 /htdocs/concrete5.5.2.1/themes/cannonf700_zenlike/default.php。所有主题都需要 default.php 和 view.php 文件。有关如何创建这些文件的信息，请参阅具体的 5 文档。

两个主题似乎都有这些文件，我在上传之前没有更改任何代码、文件或结构。

我上传的方式主题有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:44:59.100

好的，这回答了我的问题：

[http://www.concrete5.org/community/forums/themes/importing-a-theme/](http://www.concrete5.org/community/forums/themes/importing-a-theme/) ...

我必须上传到 /packages 目录，而不是 /themes。从那里，我可以通过“添加功能”菜单选项安装..

# mootools - Ace 编辑器 - 未捕获的类型错误：无法读取未定义的属性“clientX”

> ID：10590420
> 
> 赞同：0
> 
> 时间：2012-05-14T20:18:07.143
> 
> 标签：mootools, ace-editor

我正在使用 ace 编辑器和 mootools。我刚刚将我的 mootools 更新到 1.4.5 版，当我在编辑器上单击/拖动时，我得到 js 异常：

```
Uncaught TypeError: Cannot read property 'clientX' of undefined 
```

请帮助...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:16:10.260

我认为我找到了一种解决方法，而不是总是删除绑定方法。似乎只有几个 Mootools 版本有这个问题。所以我用这段代码来修复它们：

```
if (this.MooTools.build=='ab8ea8824dc3b24b6666867a2c4ed58ebb762cf0') {
    delete Function.prototype.bind;

    Function.implement({

        /*<!ES5-bind>*/
        bind: function(that){
            var self = this,
                args = arguments.length > 1 ? Array.slice(arguments, 1) : null,
                F = function(){};

            var bound = function(){
                var context = that, length = arguments.length;
                if (this instanceof bound){
                    F.prototype = self.prototype;
                    context = new F;
                }
                var result = (!args && !length)
                    ? self.call(context)
                    : self.apply(context, args && length ? args.concat(Array.slice(arguments)) : args || arguments);
                return context == that ? result : context;
            };
            return bound;
        },
        /*</!ES5-bind>*/
    });
} 
```

好处是我可以为每个构建单独修复它。缺点显然是我自己的代码附带了 mootools 代码。但目前我看不到其他选择，因为我为 Joomla 编码，我很确定正在使用的 mootools 版本数量有限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:39:08.803

我解决了我的情况！我从 mootools.js 中删除了一些行：

1) bind:function(e){var a=this,b=arguments.length>1?Array.slice(arguments,1):null,d=function(){};var c=function(){var g =e,h=arguments.length;if(this instanceof c){d.prototype=a.prototype; g=new d;}var f=(!b&&!h)?a.call(g):a.apply(g,b&&h?b.concat(Array.slice(arguments)):b||arguments);return g==e?f:g;};返回 c;}

2）删除Function.prototype.bind；

（我不需要在 mootools 中绑定鼠标，所以这对我来说是一个启示！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:20:56.220

这是一个非常奇怪的错误。在调试期间，我没有收到错误。但是一旦我删除断点，它就会再次出现。我终于通过[将最新版本的 mootools 1.4.5 添加](http://mootools.net/core/ab8ea8824dc3b24b6666867a2c4ed58ebb762cf0)到 joomla 来解决这个问题。错误立即消失了。

# view - 将数据库结果制作为 html 链接

> ID：10590427
> 
> 赞同：-2
> 
> 时间：2012-05-14T20:18:40.810
> 
> 标签：view

我是 cakephp 新手，我希望我的数据库结果显示为链接，这样如果用户单击结果，他/她应该被重定向到不同控制器中的不同页面并具有不同的视图。有什么帮助吗？？

例如：我有这行代码显示来自数据库的结果。

```
 <?php echo $Menu['Menu'] ['menuname']; ?>&nbsp;</td> 
```

我希望用户将此菜单名称视为将重定向到菜单项页面的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:28:12.693

这是一个平面php代码（编程语言）。因此，您可以在菜单中添加指向您想要的任何页面的任何链接。例如将此代码替换为：

`<?php echo '<a href="/somepage.php">'.$Menu['Menu']['menuname']. '</a>''&nbsp;</td>`

或者发布您想为用户显示的确切链接。

# algorithm - 适合一维或二维数据的聚类方法

> ID：10590438
> 
> 赞同：3
> 
> 时间：2012-05-14T20:19:33.660
> 
> 标签：algorithm, cluster-analysis

我有一组我生成的数据，其中包括提取的质量（嗯，m/z 但不是那么重要）值和时间。我从文件中提取数据，但是，可能会重复测量，这会导致数据集中出现大量冗余。我正在寻找一种方法来对这些进行聚类，以便根据单独的质量相似性或质量和时间的相似性对相关的那些进行分组。

应组合在一起的数据示例如下：

m/z 时间

337.65 1524.6

337.65 1524.6

337.65 1604.3

但是，我无法确定我将拥有多少个集群。有谁知道实现这一目标的有效方法，可能使用简单的距离度量？遗憾的是，我不熟悉聚类算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:33:54.633

[http://en.wikipedia.org/wiki/Cluster_analysis](http://en.wikipedia.org/wiki/Cluster_analysis)

[http://en.wikipedia.org/wiki/DBSCAN](http://en.wikipedia.org/wiki/DBSCAN)

如果您真的不想提前指定多少个集群，请阅读有关层次聚类的部分并查看 DBSCAN。您将需要定义一个距离度量，并在该步骤中确定您将在哪些特征或特征组合上进行聚类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T05:23:35.390

你为什么不设置一个门槛？

如果连续值（按时间）不相差至少`+-0.1`（按 m/s），则将它们组合在一起。或者，使用相对阈值：相差小于`+- .1%`。根据您的领域知识设置这些阈值。

这听起来像是对我来说预处理这些数据的直接方法。

在这里使用“聚类”算法对我来说似乎太过分了。聚类算法将尝试发现比您在此处尝试找到的更复杂的结构。结果可能会令人惊讶且难以控制。直接的变化阈值方法（我*不会*称之为集群！）非常易于解释、理解和控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:29:21.527

对于简单的一维 K-means 聚类（http://en.wikipedia.org/wiki/K-means_clustering#Standard_algorithm）是合适的，可以直接使用。唯一的问题是选择合适的 K。选择一个好的 K 的最佳方法是绘制 K 与剩余方差的关系图，然后选择“显着”减少方差的 K。另一种策略是使用一些信息标准（例如，贝叶斯信息标准）。

您可以轻松地将 K-Means 扩展到多维数据。但是您应该注意缩放各个维度。例如。在项目 (1KG, 1KM) (2KG, 2KM) 中，使用这些比例尺离 (1.7KG, 1.4KM) 最近的点是 (2KG, 2KM)。但是，一旦您开始以米为单位表达第二项，则可能另一种选择是正确的。

# javascript - 使用 javascript 解析 RSS 提要

> ID：10590446
> 
> 赞同：4
> 
> 时间：2012-05-14T20:20:18.160
> 
> 标签：javascript, rss

我正在使用 PHP 和 JavaScript 解析 RSS 提要。首先，我使用 PHP 创建了一个代理来获取 RSS 提要。然后使用 JavaScript 从这个 RSS 提要中获取个人数据。我的 JavaScript 问题。如果我使用`console.log(rssData);`没有错误，我能够获得整个 JavaScript 文档。如果我尝试获取此文档中的单个元素，例如：`<title>`、`<description>`或`<pubDate>`使用`rssData.getElementsByName("title");`它会给出错误“未捕获的类型错误：对象 ....没有方法 'getElementsByName'”。所以我的问题是如何获取 RSS 提要中的元素？

**Javascript（更新）**

```
function httpGet(theUrl) {
    var xmlHttp = null;

    xmlHttp = new XMLHttpRequest();
    xmlHttp.open("GET", theUrl, false);
    xmlHttp.send(null);
    return xmlHttp.responseXML;
}

// rss source
var rssData = httpGet('http://website.com/rss.php');

// rss values
var allTitles = rssData.getElementsByTagName("title");    // title
var allDate = rssData.getElementsByTagName("pubDate");    // date 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:25:25.123

尝试将`httpGet`函数的最后一行更改为：

```
return xmlHttp.responseXML; 
```

毕竟，您期望得到一个 XML 响应。您可能还需要将此行添加到您的 PHP 代理：

```
header("Content-type: text/xml"); 
```

强制将返回内容作为 XML 发送。

# macos - NSDatePicker 操作方法未触发

> ID：10590447
> 
> 赞同：5
> 
> 时间：2012-05-14T20:20:31.873
> 
> 标签：macos, cocoa, nsdatepicker

设想：

用户在没有步进器的情况下以文本形式输入日期`NSDatePicker`（在 OS X 上），当他们在键盘上按回车键时，我希望向控制器发送一条消息。

在一个`NSTextField`中，我只需在 Interface Builder 中连接动作，或者从代码中设置它，当用户按下回车键时，动作消息就会发送到目标。

日期选择器允许设置动作消息和目标，但我无法触发动作。当我在日期选择器中按 Enter 时，不会调用操作消息。

我做错了什么，还是有我必须使用的解决方法？如果需要的话，我不会反对对所涉及的任何类进行子类化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T01:22:37.007

NSDatePicker 不会处理或转发由 Return 或 Enter 键触发的键事件。

解决方案是将**NSDatePicker**子类化以在 keyDown 中获得所需的行为：

```
#import "datePickerClass.h"

@implementation datePickerClass
- (void)keyDown:(NSEvent *)theEvent{
    unsigned short n = [theEvent keyCode];
    if (n == 36 || n == 76) {
       NSLog(@"Return key or Enter key");
        // do your action
        //
    } else { 
        [super keyDown:theEvent];// normal behavior
    }
}
@end 
```

就是这样。

编辑：你也可以使用**NSCarriageReturnCharacter**和**NSEnterCharacter**

```
NSString* const s = [theEvent charactersIgnoringModifiers];
unichar const key = [s characterAtIndex:0];
if (key == NSCarriageReturnCharacter || key == NSEnterCharacter) { 
```

# ruby-on-rails - 将数组转换为字符串

> ID：10590457
> 
> 赞同：1
> 
> 时间：2012-05-14T20:21:36.490
> 
> 标签：ruby-on-rails, ruby

我需要将哈希的输出连接到字符串中。

哈希看起来像这样：

```
 nas.location.walledgardens.to_s

  => "[#<Walledgarden id: 1, location_id: 12, url: \"polka.com\", created_at: \"2012-05-14 17:02:47\", updated_at: \"2012-05-14 17:02:47\">, #<Walledgarden id: 2, location_id: 12, url: \"test.com\", created_at: \"2012-05-14 17:02:47\", updated_at: \"2012-05-14 17:02:47\">, #<Walledgarden id: 3, location_id: 12, url: \"help.com\", created_at: \"2012-05-14 17:02:47\", updated_at: \"2012-05-14 17:02:47\">, #<Walledgarden id: 4, location_id: 12, url: \"yell.com\", created_at: \"2012-05-14 17:02:47\", updated_at: \"2012-05-14 17:02:47\">, #<Walledgarden id: 5, location_id: 12, url: \"sausage.com\", created_at: \"2012-05-14 17:02:47\", updated_at: \"2012-05-14 17:02:47\">]" 
```

我需要将 url 值加入以下格式：

```
polka.com,test.com,help.com 
```

最好的方法是什么？我可以轻松浏览它，但输出有换行符，我需要删除这些换行符加上逗号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T20:25:12.793

```
nas.location.walledgardens.collect { |w| w.url }.join(",") 
```

该`.collect`方法将收集该块返回的所有内容并将其放入一个数组中，然后连接将该数组放入一个字符串中，并用你给它的任何内容分隔（所以一个逗号）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T20:25:23.943

您拥有的不是[Hash](http://www.ruby-doc.org/core/Hash.html)，而是 Walledgarden 对象的[Array](http://www.ruby-doc.org/core/Array.html)（它们看起来是[ActiveRecord::Base](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)子类）。

试试这个：

```
nas.location.walledgardens.collect(&:url).join "," 
```

（注意：`#map`和`#collect`是等价的，所以你选择哪一个应该是可读性的考虑因素！）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-14T20:24:16.623

使用[`Array#map`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)：

```
nas.location.walledgardens.map(&:url).join ',' 
```

# javascript - 使用 moment.js 和 setInterval 的动态日期和时间

> ID：10590461
> 
> 赞同：14
> 
> 时间：2012-05-14T20:21:51.993
> 
> 标签：javascript, jquery, setinterval, momentjs

我试图找出如何使用[moment.js](http://momentjs.com)显示动态日期和时间。

显然我无法正确使用 setInterval 。

如果可能的话，我不想使用 jQuery，因为 moment.js 不需要它。

这是我到目前为止所拥有的：http: [//jsfiddle.net/37fLF/2/](http://jsfiddle.net/37fLF/2/)。

```
$(document).ready(function () {
    var datetime = $('#datetime'),
        date = moment(new Date()),
        update = function(){
            datetime.html(date.format('dddd, MMMM Do YYYY, h:mm:ss a'));
        };
    update();
    setInterval(update, 1000);
});​ 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-14T20:31:32.377

我对您的代码进行了一些修改：

请注意，方法更新现在在`ready`事件处理程序之外

代码：

```
var datetime = null,
        date = null;

var update = function () {
    date = moment(new Date())
    datetime.html(date.format('dddd, MMMM Do YYYY, h:mm:ss a'));
};

$(document).ready(function(){
    datetime = $('#datetime')
    update();
    setInterval(update, 1000);
}); 
```

工作演示：[jsfiddle](http://jsfiddle.net/schawaska/37fLF/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T19:25:08.993

再次感谢您的回答。我最终得到的代码如下。（注意丹麦语 i18n）

```
moment.lang('da');

var datetime = null, date = null;

var datetime_update = function() {
  date = moment(new Date());
  datetime.html(date.format('[Lige nu: ] dddd [d.] Do MMMM YYYY [kl.] HH:mm:ss'));
};

$(document).ready(function() {
  datetime = $('#datetime');
  datetime_update();
  setInterval(datetime_update, 1000);
}); 
```

**编辑**：在我问了这个问题九个月后，我想出了这种不用 jQuery 的方法（正如我最初问的那样）。这里是：

```
function date_time() {
  now = moment().format('dddd [d.] Do MMMM YYYY [kl.] HH:mm:ss');
  document.getElementById('timer').innerHTML = now;
  setTimeout(function () { date_time(); }, 1000);
}
date_time(); 
```

然后当然可以将它与 HTML ID 一起使用，例如：

```
<span id="timer"></span> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T20:24:53.353

放

```
date = moment(new Date()); 
```

在更新函数里面。现在你只是每秒打印相同的日期；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-20T13:37:46.717

这就是我的方式，它的工作方式你可以在这里查看

```
HTML 
```

<asp:Label ID="Label1" runat="server" Text='' >

```
JavaScript
< script language="javascript" type="text/javascript">
function date_time() 
{
var dt = new Date();
document.getElementById('<%=Label1.ClientID%>').innerHTML = dt;
setTimeout(function () { date_time(); }, 1000);
}
date_time();
< /script> 
```

# php - 画廊和花式盒子

> ID：10590462
> 
> 赞同：0
> 
> 时间：2012-05-14T20:22:03.073
> 
> 标签：php, html, fancybox, modx, modx-revolution

我在`MODx`Revolution 2.1.5 上使用 Gallery Snippet。

我正在调用基本图库片段以及指定的专辑。

我正在尝试将`Fancybox`（jQuery Lightbox）链接到缩略图和图像。

这是 MODx 在资源上输出的内容：

```
<div class="gal-item"> 
<a href="path/to/page/test.html?galItem=1&galAlbum=1&galTag="> 
<img class="" src="/assets/components/gallery/connector.php?action=web/phpthumb&w=100&h=100&zc=1&far=C&q=90&src=%2Fassets%2Fcomponents%2Fgallery%2Ffiles%2F1%2F4.jpg" alt="lorem-ipsum-2.jpg" /> 
</a> 
</div> 
```

我已正确选择了内容，当我单击链接标签中包含的图像时，我收到以下消息：

无法加载请求的内容。请稍后再试。

怎么加载不出来？它正在加载缩略图，它需要原始图像来创建缩略图。怎么找不到图？

注意：我正在使用此插件的默认设置。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:27:27.437

正如 AlexC 所提到的，我认为这与您的大图像路径有关。您是否尝试过直接访问该 URL 并查看图像是否加载。您可以尝试删除 fancybox 代码，然后单击拇指，查看链接是否正常工作。图像应在浏览器窗口中自行加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:55:01.903

我可能有很多原因为什么 id 会那样做。

我认为它可能是什么，您尝试在拥有这个人之前加载内容，我的意思是使用一些 Ajax 并在您应用“fancybox”之后加载

你可以试试这个：

1.  删除“fancybox”类名

2.  并使用此代码：

    ```
    $(".gal-item").live("click", function(){
        var $href = $(this).find("a").attr("href");

        var $href = $(this).attr("href");

        $.fancybox({
           href:$href
        }); 
    ```

    });

# jquery - “开”不适用于“加载”事件

> ID：10590463
> 
> 赞同：0
> 
> 时间：2012-05-14T20:22:29.237
> 
> 标签：jquery

我正在尝试在图像出现时附加一个加载事件，而无需等待文档完成加载。所以我用`$.on`它来实现这一点，而不是将我的代码放在页面底部，但它仍然无法正常工作。

我的html是这样的：

```
<script>
  $('img').on('load', function(){
    $(this).css('border', '2px solid red');
  });
</script>

<img src="koala.png" /> 
```

这实际上不起作用，但这确实：（这不是我想要的）

```
<img src="koala.png" />

<script>
  $('img').bind('load', function(){
    $(this).css('border', '2px solid red');
  });
</script> 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:40:17.573

我不确定我是否得到了这个问题，但请尝试将其放在DOM 中的图像**下方：**

```
var images = document.getElementsByTagName('img');

for (i=0; i<images.length; i++) {
    var img = new Image();
        img.src = images[i].src;
        img.onload = loaded(images[i]);
}

function loaded(image) {
    image.style.border = '20px solid red';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:35:01.653

应该注意几个已知的警告。

*   它不能始终如一地工作，也不能可靠地跨浏览器
*   如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
*   它没有正确地冒泡 DOM 树
*   可以停止对已经存在于浏览器缓存中的图像进行触发

从[这里](http://api.jquery.com/load-event/)

# facebook - 您何时删除 Facebook 应用请求？

> ID：10590464
> 
> 赞同：2
> 
> 时间：2012-05-14T20:22:32.887
> 
> 标签：facebook

文档说该应用程序负责删除它自己的请求。从应用程序设计的角度来看，何时是删除请求的最佳时间？是否存在不应该删除请求的情况？

顺便说一句，这就是我删除请求的意思...

`$facebook->api("/$full_request_id",'DELETE');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:17:48.657

根据[文档](http://developers.facebook.com/docs/requests/#deleting)，删除请求的最合适时间是在用户点击请求后立即进入您的画布应用程序。这会从各种通知渠道中删除请求并更新请求计数器。我会推荐一个全局钩子，它被配置为监控入站 Facebook request_ids GET 参数，查找适当的 Facebook 请求，可选地更新您的内部请求/邀请跟踪，并在处理后删除请求。

我认为没有关于删除您自己的应用程序请求的任何[官方政策](https://developers.facebook.com/policy/)，并且尽早删除待处理的请求是有意义的，例如，如果请求是针对已经过去的时间敏感的操作。

# .net - 如何将目录中的多个 .xls (Excel) 文件导出到单个 .csv 文件中？

> ID：10590477
> 
> 赞同：2
> 
> 时间：2012-05-14T20:23:14.300
> 
> 标签：.net, csv, xls

因此，我正在寻找一种将目录中的所有 .xls 文件导出到单个 .csv 文件中的方法。关于我将如何处理这个问题的任何想法？

具体来说：

说我的目录包含-

```
wksht1.xls
wksht2.xls
wksht3.xls
...
wksht1000.xls 
```

我将如何将所有这些文件合并到一个 .csv 中（我们称之为 aggregate.csv）。假设每个文件都填充了最大数量的工作表/行。

*所有文件都标准化为数据标准*

非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:33:53.717

这是非 .NET 解决方案（不清楚您的“.NET”标签是否暗示 .NET 是强制性的）。

我会编写一个像这样的 VBS/WSH 脚本并从命令行运行它：

```
Dim oFSO
Dim oShell, oExcel, oFile, oSheet
Set oFSO = CreateObject("Scripting.FileSystemObject")
Set oShell = CreateObject("WScript.Shell")
Set oExcel = CreateObject("Excel.Application")
oExcel.DisplayAlerts = False

For Each oFile In oFSO.GetFolder("C:\").Files
  If LCase(oFSO.GetExtensionName(oFile)) = "xls" Then
    With oExcel.Workbooks.Open(oFile, 0, True, , , , True, , , , False, , False)
      For Each oSheet In .Worksheets
        oSheet.SaveAs ".\" & oFile.Name & "." & oSheet.Name, 6
      Next
      .Close False, , False
    End With
  End If
Next
oExcel.Quit
oShell.Popup "Conversion complete", 10 
```

请注意，这直接摘自这里： http: [//www.computing.net/answers/programming/script-convert-excel-ss-to-csv/16265.html](http://www.computing.net/answers/programming/script-convert-excel-ss-to-csv/16265.html)

但是我之前多次使用几乎相同的方法将 Access 表导出到 CSV，所以我知道 VBS 脚本是一种可行的（并且可能是最简单的）方法。

修改您认为合适的目录名称（即我认为您的文件不在“C：\”中。将其保存到名为 的文件`export_to_csv.vbs`中，然后运行：

```
cscript export_to_csv.vbs 
```

或者

```
wscript export_to_csv.vbs 
```

# jquery - jQuery height() 返回错误值

> ID：10590482
> 
> 赞同：16
> 
> 时间：2012-05-14T20:23:41.030
> 
> 标签：jquery, css, height

我正在尝试使用 jQuery 将几个 div 的高度设置为与最高 div 的高度相同。基本上，我循环遍历 div 并从每个 div 中获取高度，将最大的一个存储在变量中。然后我再次遍历所有这些并将它们的高度设置为变量。

但是，jQuery 给了我错误的高度值。例如，第一个 div 的 height() 函数返回 633，但是当我在检查器中查看它时，它说它是 603。我完全不知道它为什么这样做。它似乎包括填充和边距，但文档说它不应该这样做。

div 的高度在我的样式表中设置为自动。如果我给它们一个固定的像素高度，那么 jQuery height() 函数会返回正确的值，但不是在它们处于自动状态时（因为它们需要）。

有问题的网站是 ictsf.org。注意三列底部的额外空间。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-14T21:17:54.903

该问题与您在 上运行的“均衡列高”代码有关[`$(document).ready()`](http://api.jquery.com/ready/)，这发生在 WebKit 知道您的图像高度之前。

因此，最快的解决方法是改为在[`$(window).load()`](http://api.jquery.com/load-event/). 或者，更好的是，使用[imagesLoaded 插件](https://stackoverflow.com/questions/7417245/javascript-jquery-runs-too-fast-works-on-reloading-page/7417273#7417273)。

或者，`height`在 s 上设置属性`img`可能会解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T20:29:33.367

***也许***你正在寻找这个： [http ://api.jquery.com/outerHeight/](http://api.jquery.com/outerHeight/)

# bamboo - 从 Bamboo 部署到通用 Artifactory 存储库时指定版本号

> ID：10590491
> 
> 赞同：1
> 
> 时间：2012-05-14T20:24:27.253
> 
> 标签：bamboo, artifactory

我正在测试从 Bamboo 到 Artifactory 的构建工件的自动部署。我在 Bamboo 中安装了 Artifactory 插件，然后设置了一个测试构建计划。我添加了一个“Artifactory Generic Deploy Task”，因为我没有使用 Maven、Ivy 或 Gradle。

我的存储库布局是：

```
group / product / version / filename.extension 
```

在 Bamboo 的“编辑已发布的工件”字段中指定工件的位置非常容易：

```
myartifact=>com.example/someproduct/${bamboo.buildNumber} 
```

这对于快照构建来说很好，但是如果我想发布具有特定版本号的版本怎么办？我用什么代替`${bamboo.buildNumber}`？还是我需要采取完全不同的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:06:17.463

通常，最好将令人满意的快照构建提升到发布状态，而不是运行独立的发布构建。

尽管 Artifactory 的发布升级支持并未针对 Bamboo 的通用构建类型实现，但从 2.6.0 版本开始，您实际上可以在 Artifactory 中将自己的构建升级策略实现为自定义[用户插件](http://wiki.jfrog.org/confluence/display/RTF/User+Plugins#UserPlugins-Promotions)，并通过[REST-API 命令](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API#ArtifactorysRESTAPI-ExecuteBuildPromotion)调用该过程。

所以程序变得非常简单：

1.  编写发布推广策略。
2.  添加一个通过 REST 执行提升的 Bamboo 构建步骤。
3.  构建您的快照，直到您对状态感到满意为止。
4.  执行发布步骤。

我们还在[github](https://github.com/JFrogDev/artifactory-user-plugins/blob/master/build/promotion.groovy)中保留了一个发布促销策略插件的示例。

# android - 如何提高gridview性能（android）

> ID：10590493
> 
> 赞同：1
> 
> 时间：2012-05-14T20:24:42.320
> 
> 标签：android, performance, gridview

如何提高我的 gridView 性能？滚动不流畅。

这是我的代码：

```
public View getView(final int position, View convertView, ViewGroup parent) {

        View MyView;

        // Inflate the layout
        LayoutInflater li = ((Activity) MyContext).getLayoutInflater();

        MyView = li.inflate(R.layout.gallery_adapter, null);
        ImageButton imageFolders = (ImageButton) MyView.findViewById(R.id.folder);

        try {

            imageFolders.setImageBitmap(bMap);
            imageFolders.setOnClickListener(this);
            imageFolders.setId(products.get(position).getId());
        } catch (Exception e) {

        }

        MyView.setLayoutParams(70, 70);
        return MyView;
    } 
```

我在这个 gridView 上有 200 张图像，但性能非常非常糟糕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T22:06:04.867

你可以像这样修改你的代码：

```
public View getView(final int position, View convertView, ViewGroup parent) {

    View MyView;

    if(convertView==null) 
    {
        // Inflate the layout
        LayoutInflater li = ((Activity) MyContext).getLayoutInflater();

        MyView = li.inflate(R.layout.gallery_adapter, null);
        ImageButton imageFolders = (ImageButton) MyView.findViewById(R.id.folder);

        try {

            imageFolders.setImageBitmap(bMap);
            imageFolders.setOnClickListener(this);
            imageFolders.setId(products.get(position).getId());
        } catch (Exception e) {

        }

        MyView.setLayoutParams(70, 70);
    }
    else
        MyView = convertView;
    return MyView;
} 
```

已加载的图像将不会重新加载。你试过这种可能性吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T12:18:27.107

```
public View getView(final int position, View convertView, ViewGroup parent){

    View MyView;
    ImageButton imageFolders;

    if(convertView==null){
        LayoutInflater li = ((Activity) MyContext).getLayoutInflater();
        MyView = li.inflate(R.layout.gallery_adapter, null);
     }else{
        MyView = convertView;
     }

     imageFolders = (ImageButton) MyView.findViewById(R.id.folder);

     try {
        imageFolders.setImageBitmap(bMap);
        imageFolders.setOnClickListener(this);
        imageFolders.setId(products.get(position).getId());
     } catch (Exception e) {}

     MyView.setLayoutParams(70, 70);
     return MyView;
} 
```

我没有测试它，但试一试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T11:20:31.573

做所有的布局修改，比如 `textView.setText("text");`在里面`if(convertView == null)`对我来说极大地提高了性能。

此外，如果您需要在Block`super.getView();`之后立即调用它。`if(convertView == null)`

对于`else`部分`return convertView`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-09T11:32:10.743

1.  回收您的视图。膨胀布局并仅设置一次布局参数。
2.  确保您没有从主线程上的磁盘/网络加载位图。
3.  简化网格项目布局 (R.layout.gallery_adapter) 中的视图层次结构。
4.  确保您的应用清单中未禁用硬件加速。
5.  确保您没有过度绘制（在彼此之上绘制多个背景）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-17T22:52:52.103

最好的方法是：

1.  在 CustomAdapter 的构造函数中初始化 Context、LayoutInflayer 和 Bitmaps（或 Drawables）

    ```
     private Context ctx;
     private int resource;
     private Bitmap[] bmps;

     private LayoutInflater inflater;

     MyCustomAdapter(Context ctx, Bitmap[] bmps) {
         this.ctx = ctx;
         this.bmps = bmps;

         this.resource = R.layout.gallery_adapter;
         this.inflater = LayoutInflater.from(ctx);
     } 
    ```

2.  如果不为空，则回收您的 convertView

    ```
     public View getView(final int position, View convertView, ViewGroup parent) {
         final ImageButton imgBtn;

         // Recycle convertView
         if (convertView == null) {
             imgBtn = (ImageButton) inflater.inflate(resource, null, false);
         } else {
             imgBtn = (ImageButton) convertView;
         }

         // Set Attributes
         imgBtn.setImageBitmap(bmps[position]);
         // imgBtn.setLayoutParams(70, 70); // Remove this and put it in your xml resource

         ...

         return imgBtn; 
    ```

此代码假定您的 xml 资源 (R.layout.myImageButton) 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<ImageButton xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/someId"
    android:layout_width="70dp"
    android:layout_height="70dp"
    ...
 /> 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-05-14T20:29:02.040

获取较低细节的图像，或获取更快的手机。
要么这样，要么对 gridview 进行编程，使图像仅在您开始看到它们时才加载。

# asp.net-mvc - 如何返回自定义 503 消息？

> ID：10590494
> 
> 赞同：4
> 
> 时间：2012-05-14T20:24:43.673
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, wcf-web-api, http-status-code-503

我有一个在 MVC4 / ASP.NET Web Api 中实现的服务。当系统停机进行维护时，我想向我的客户返回自定义 503 消息。

我有以下代码：

```
 public class ServiceController : ApiController
    {
        public HttpResponseMessage<ServiceUnavailableModel> Get()
        {
            return new HttpResponseMessage<ServiceUnavailableModel>(new ServiceUnavailableModel(), HttpStatusCode.ServiceUnavailable);
        }
    } 
```

我的模型如下所示：

```
 [Serializable]
    public class ServiceUnavailableModel : ISerializable
    {
        public ServiceUnavailableModel()
        {
            this.Message = Resources.SDE_SERVICE_UNAVAILABLE;
            this.Detail = Resources.SDE_SERVICE_REQUESTED_CURRENTLY;
            this.Code = (int)System.Net.HttpStatusCode.ServiceUnavailable;
        }

        public string Message { get; set; }
        public string Detail { get; set; }
        public int Code { get; set; }

        public virtual void GetObjectData(SerializationInfo info, StreamingContext context)
        {
            info.AddValue("Message", this.Message);
            info.AddValue("Detail", this.Detail);
            info.AddValue("Code", this.Code);
        }

    } 
```

这正是我当前的一堆 API 客户所期望的。但是，当我执行此操作时，我得到以下结果：

```
HTTP/1.1 503 Service Unavailable
Cache-Control: no-cache
Pragma: no-cache
Content-Type: text/html
Expires: -1
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Mon, 14 May 2012 20:22:39 GMT
Content-Length: 200

The service is unavailable.The service you requested is currently
unavailable or undergoing maintenance. We will have the service back
up and running shortly. Thank you for your patience.","Code":503} 
```

请注意，我的回复似乎是*部分*序列化的。是什么赋予了？

PS。我试过 Response.Clear() 和 Response.ClearContent() - 不走运

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:19:25.067

事实证明，您必须配置 http 错误才能通过：

```
<configuration>
  <system.webServer>
    <httpErrors existingResponse="PassThrough"/>
  </system.webServer>
<configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:59:38.410

在 Global.asax 中注册一个 Application_Error 事件并捕获 response.statuscode ，如果是 503 则在控制器中返回正确的消息

请在下面的帖子中查看我的回答

[Spring MVC 3：如何为 HTTP 404 错误提供动态内容到错误页面？](https://stackoverflow.com/questions/5553719/spring-mvc-3-how-to-provide-dynamic-content-to-error-page-for-http-404-errors/10634239#10634239)

# python - 使用 Django 使用 RESTful API

> ID：10590497
> 
> 赞同：11
> 
> 时间：2012-05-14T20:24:45.867
> 
> 标签：python, django, django-models

我正在构建一个 Django 应用程序，它需要与第 3 方 RESTful API 交互，对该资源进行各种 GET、PUT 等。我正在寻找的是一种在 Django 中表示该 API 的好方法。

最明显但可能不太优雅的解决方案似乎是创建一个模型，该模型具有映射到 Web 服务查询的各种方法。另一方面，使用自定义数据库后端之类的东西似乎会提供更大的灵活性并更好地集成到 Django 的 ORM 中。

*警告：这是我用 Django 完成的第一个真正的项目，所以我可能在这里遗漏了一些明显的东西。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T20:54:17.380

该[`requests`](http://docs.python-requests.org/en/latest/index.html)库使编写 REST API 使用者变得容易。还有一个名为 的 Python 库[`slumber`](http://slumber.in/)，它构建在 之上`requests`，用于使用 REST API 的明确目的。这对您的效果如何可能取决于 API 的真正 RESTful 程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:17:00.803

使用内置的 urllib 进行 REST 调用（有点笨拙但功能强大）并将接口包装到一个类中，并为每个远程调用提供一个方法。然后，您的类可以与本机 Python 类型相互转换。这就是我无论如何都会做的！

# java - 使用 KeyBindings 获取输入

> ID：10590499
> 
> 赞同：1
> 
> 时间：2012-05-14T20:24:52.213
> 
> 标签：java, swing, jbutton, key-bindings

我有一个我想使用键绑定的程序：

```
// Imports..
public class Test{

JButton button = new JButton();

Test(){
//...
button.getInputMap().put(KeyStroke.getKeyStroke("A"), "A");
button.getActionMap().put("Action", action);
//...
}
} 
```

现在如何使按钮在单击时响应？

是否像 KeyListeners 我有一个 actionPerformed 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:35:32.547

> 是否像 KeyListeners 我有一个 actionPerformed 方法？

A`KeyListener`没有`actionPerformed`办法！解决方案是添加一个`ActionListener`，或者正如@mKorbel 指出的那样，使用`Action`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:44:22.667

> 现在如何使按钮在单击时响应？

从[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)只有一种方法

```
button.doClick(); 
```

然后将这行代码调用[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)或[Swing Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)添加到[JButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#jbutton)

# c - 在命令行和 Makefile 中定义宏，使用 gcc 在 linux 上工作，编写 c 代码

> ID：10590502
> 
> 赞同：3
> 
> 时间：2012-05-14T20:24:58.530
> 
> 标签：c, linux, gcc, makefile

我有一个名为：Makefile 和一个 main.c 文件的文件，我正在 main.c 文件中执行下一个代码

```
int main(int argc, char *argv[])
{

    //if 0 then it is default scheduling which is Round Robin.
    //if 1 then the scheduling will be Round Robin.
    //if 2 then the scheduling will be Priority based.
    //if 3 then both scheduling are acceptable, and we decide to use Round Robin.
    int scheduling = 0; 
    #ifdef SCHED_RR
            printf("SCHED_RR is defined\n");
            #ifdef SCHED_PB
                    printf("and also SCHED_PB is defined\n");
                    scheduling = 3;
            #else
                    scheduling = 1;
            #endif
    #elseif SCHED_PB
            printf("SCHED_PB is defined\n")
            scheduling = 2;
    #endif

    printf("the number of the scheduling is %d\n",scheduling);
    printf("bye bye\n");

    return 0;

}//main 
```

如您所见，我正在检查是否定义了宏以及定义了哪个宏。现在我想用我的 Makefile 执行下一个命令行来运行程序

```
make some_var=SCHED_RR 
```

这个伪命令（因为我不知道该怎么做）是为了预定义宏 SCHED_RR 我也希望能够编写命令

```
make some_var=SCHED_PB 
```

和

```
make some_var1=SCHED_RR some_var2=SCHED_PB 
```

最后一个是针对有人想要预先定义两个调度的情况

现在我的问题是：我不知道如何以及在哪里将它写入我的 Makefile 以及如何在命令行中写入它？

这是我的 Makefile，它当然表明我的真实程序更大，所以我应该在哪里以及在这个 make 文件中添加什么

```
OBJS = \
    bio.o\
    console.o\
    exec.o\
    file.o\
    fs.o\
    ide.o\
    ioapic.o\
    kalloc.o\
    kbd.o\
    lapic.o\
    log.o\
    main.o\
    mp.o\
    picirq.o\
    pipe.o\
    proc.o\
    spinlock.o\
    string.o\
    swtch.o\
    syscall.o\
    sysfile.o\
    sysproc.o\
    timer.o\
    trapasm.o\
    trap.o\
    uart.o\
    vectors.o\
    vm.o\

# Cross-compiling (e.g., on Mac OS X)
#TOOLPREFIX = i386-jos-elf-

# Using native tools (e.g., on X86 Linux)
#TOOLPREFIX = 

# Try to infer the correct TOOLPREFIX if not set
ifndef TOOLPREFIX
TOOLPREFIX := $(shell if i386-jos-elf-objdump -i 2>&1 | grep '^elf32-i386$$' >/dev/null 2>&1; \
    then echo 'i386-jos-elf-'; \
    elif objdump -i 2>&1 | grep 'elf32-i386' >/dev/null 2>&1; \
    then echo ''; \
    else echo "***" 1>&2; \
    echo "*** Error: Couldn't find an i386-*-elf version of GCC/binutils." 1>&2; \
    echo "*** Is the directory with i386-jos-elf-gcc in your PATH?" 1>&2; \
    echo "*** If your i386-*-elf toolchain is installed with a command" 1>&2; \
    echo "*** prefix other than 'i386-jos-elf-', set your TOOLPREFIX" 1>&2; \
    echo "*** environment variable to that prefix and run 'make' again." 1>&2; \
    echo "*** To turn off this error, run 'gmake TOOLPREFIX= ...'." 1>&2; \
    echo "***" 1>&2; exit 1; fi)
endif

# If the makefile can't find QEMU, specify its path here
#QEMU = 

# Try to infer the correct QEMU
ifndef QEMU
QEMU = $(shell if which qemu > /dev/null; \
    then echo qemu; exit; \
    else \
    qemu=/Applications/Q.app/Contents/MacOS/i386-softmmu.app/Contents/MacOS/i386-softmmu; \
    if test -x $$qemu; then echo $$qemu; exit; fi; fi; \
    echo "***" 1>&2; \
    echo "*** Error: Couldn't find a working QEMU executable." 1>&2; \
    echo "*** Is the directory containing the qemu binary in your PATH" 1>&2; \
    echo "*** or have you tried setting the QEMU variable in Makefile?" 1>&2; \
    echo "***" 1>&2; exit 1)
endif

CC = $(TOOLPREFIX)gcc
AS = $(TOOLPREFIX)gas
LD = $(TOOLPREFIX)ld
OBJCOPY = $(TOOLPREFIX)objcopy
OBJDUMP = $(TOOLPREFIX)objdump
#CFLAGS = -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer
CFLAGS = -fno-pic -static -fno-builtin -fno-strict-aliasing -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer
CFLAGS += $(shell $(CC) -fno-stack-protector -E -x c /dev/null >/dev/null 2>&1 && echo -fno-stack-protector)
ASFLAGS = -m32 -gdwarf-2 -Wa,-divide
# FreeBSD ld wants ``elf_i386_fbsd''
LDFLAGS += -m $(shell $(LD) -V | grep elf_i386 2>/dev/null)

xv6.img: bootblock kernel fs.img
    dd if=/dev/zero of=xv6.img count=10000
    dd if=bootblock of=xv6.img conv=notrunc
    dd if=kernel of=xv6.img seek=1 conv=notrunc

xv6memfs.img: bootblock kernelmemfs
    dd if=/dev/zero of=xv6memfs.img count=10000
    dd if=bootblock of=xv6memfs.img conv=notrunc
    dd if=kernelmemfs of=xv6memfs.img seek=1 conv=notrunc

bootblock: bootasm.S bootmain.c
    $(CC) $(CFLAGS) -fno-pic -O -nostdinc -I. -c bootmain.c
    $(CC) $(CFLAGS) -fno-pic -nostdinc -I. -c bootasm.S
    $(LD) $(LDFLAGS) -N -e start -Ttext 0x7C00 -o bootblock.o bootasm.o bootmain.o
    $(OBJDUMP) -S bootblock.o > bootblock.asm
    $(OBJCOPY) -S -O binary -j .text bootblock.o bootblock
    ./sign.pl bootblock

entryother: entryother.S
    $(CC) $(CFLAGS) -fno-pic -nostdinc -I. -c entryother.S
    $(LD) $(LDFLAGS) -N -e start -Ttext 0x7000 -o bootblockother.o entryother.o
    $(OBJCOPY) -S -O binary -j .text bootblockother.o entryother
    $(OBJDUMP) -S bootblockother.o > entryother.asm

initcode: initcode.S
    $(CC) $(CFLAGS) -nostdinc -I. -c initcode.S
    $(LD) $(LDFLAGS) -N -e start -Ttext 0 -o initcode.out initcode.o
    $(OBJCOPY) -S -O binary initcode.out initcode
    $(OBJDUMP) -S initcode.o > initcode.asm

kernel: $(OBJS) entry.o entryother initcode kernel.ld
    $(LD) $(LDFLAGS) -T kernel.ld -o kernel entry.o $(OBJS) -b binary initcode entryother
    $(OBJDUMP) -S kernel > kernel.asm
    $(OBJDUMP) -t kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$$/d' > kernel.sym

# kernelmemfs is a copy of kernel that maintains the
# disk image in memory instead of writing to a disk.
# This is not so useful for testing persistent storage or
# exploring disk buffering implementations, but it is
# great for testing the kernel on real hardware without
# needing a scratch disk.
MEMFSOBJS = $(filter-out ide.o,$(OBJS)) memide.o
kernelmemfs: $(MEMFSOBJS) entry.o entryother initcode fs.img
    $(LD) $(LDFLAGS) -Ttext 0x100000 -e main -o kernelmemfs entry.o  $(MEMFSOBJS) -b binary initcode entryother fs.img
    $(OBJDUMP) -S kernelmemfs > kernelmemfs.asm
    $(OBJDUMP) -t kernelmemfs | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$$/d' > kernelmemfs.sym

tags: $(OBJS) entryother.S _init
    etags *.S *.c

vectors.S: vectors.pl
    perl vectors.pl > vectors.S

ULIB = ulib.o usys.o printf.o umalloc.o uthread.o

_%: %.o $(ULIB)
    $(LD) $(LDFLAGS) -N -e main -Ttext 0 -o $@ $^
    $(OBJDUMP) -S $@ > $*.asm
    $(OBJDUMP) -t $@ | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$$/d' > $*.sym

_forktest: forktest.o $(ULIB)
    # forktest has less library code linked in - needs to be small
    # in order to be able to max out the proc table.
    $(LD) $(LDFLAGS) -N -e main -Ttext 0 -o _forktest forktest.o ulib.o usys.o
    $(OBJDUMP) -S _forktest > forktest.asm

mkfs: mkfs.c fs.h
    gcc -DVarName=$(VarName) -m32 -Werror -Wall -o mkfs mkfs.c

UPROGS=\
    _cat\
    _echo\
    _forktest\
    _grep\
    _init\
    _kill\
    _ln\
    _ls\
    _mkdir\
    _rm\
    _sh\
    _stressfs\
    _usertests\
    _wc\
    _zombie\
    _main\

fs.img: mkfs README $(UPROGS)
    ./mkfs fs.img README $(UPROGS)

-include *.d

clean: 
    rm -f *.tex *.dvi *.idx *.aux *.log *.ind *.ilg \
    *.o *.d *.asm *.sym vectors.S bootblock entryother \
    initcode initcode.out kernel xv6.img fs.img kernelmemfs mkfs \
    .gdbinit \
    $(UPROGS)

# make a printout
FILES = $(shell grep -v '^\#' runoff.list)
PRINT = runoff.list runoff.spec README toc.hdr toc.ftr $(FILES)

xv6.pdf: $(PRINT)
    ./runoff
    ls -l xv6.pdf

print: xv6.pdf

# run in emulators

bochs : fs.img xv6.img
    if [ ! -e .bochsrc ]; then ln -s dot-bochsrc .bochsrc; fi
    bochs -q

# try to generate a unique GDB port
GDBPORT = $(shell expr `id -u` % 5000 + 25000)
# QEMU's gdb stub command line changed in 0.11
QEMUGDB = $(shell if $(QEMU) -help | grep -q '^-gdb'; \
    then echo "-gdb tcp::$(GDBPORT)"; \
    else echo "-s -p $(GDBPORT)"; fi)
ifndef CPUS
CPUS := 1
endif
QEMUOPTS = -hdb fs.img xv6.img -smp $(CPUS) -m 512 $(QEMUEXTRA)

qemu: fs.img xv6.img
    $(QEMU) -serial mon:stdio $(QEMUOPTS)

qemu-memfs: xv6memfs.img
    $(QEMU) xv6memfs.img -smp $(CPUS)

qemu-nox: fs.img xv6.img
    $(QEMU) -nographic $(QEMUOPTS)

.gdbinit: .gdbinit.tmpl
    sed "s/localhost:1234/localhost:$(GDBPORT)/" < $^ > $@

qemu-gdb: fs.img xv6.img .gdbinit
    @echo "*** Now run 'gdb'." 1>&2
    $(QEMU) -serial mon:stdio $(QEMUOPTS) -S $(QEMUGDB)

qemu-nox-gdb: fs.img xv6.img .gdbinit
    @echo "*** Now run 'gdb'." 1>&2
    $(QEMU) -nographic $(QEMUOPTS) -S $(QEMUGDB)

# CUT HERE
# prepare dist for students
# after running make dist, probably want to
# rename it to rev0 or rev1 or so on and then
# check in that version.

EXTRA=\
    mkfs.c ulib.c user.h cat.c echo.c forktest.c grep.c kill.c\
    ln.c ls.c mkdir.c rm.c stressfs.c usertests.c wc.c zombie.c\
    printf.c umalloc.c main.c\
    README dot-bochsrc *.pl toc.* runoff runoff1 runoff.list\
    .gdbinit.tmpl gdbutil\

dist:
    rm -rf dist
    mkdir dist
    for i in $(FILES); \
    do \
        grep -v PAGEBREAK $$i >dist/$$i; \
    done
    sed '/CUT HERE/,$$d' Makefile >dist/Makefile
    echo >dist/runoff.spec
    cp $(EXTRA) dist

dist-test:
    rm -rf dist
    make dist
    rm -rf dist-test
    mkdir dist-test
    cp dist/* dist-test
    cd dist-test; $(MAKE) print
    cd dist-test; $(MAKE) bochs || true
    cd dist-test; $(MAKE) qemu

# update this rule (change rev#) when it is time to
# make a new revision.
tar:
    rm -rf /tmp/xv6
    mkdir -p /tmp/xv6
    cp dist/* dist/.gdbinit.tmpl /tmp/xv6
    (cd /tmp; tar cf - xv6) | gzip >xv6-rev5.tar.gz

.PHONY: dist-test dist 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:27:58.610

你需要的是

```
make -e VarName=VarValue 
```

这会将 VarName 导出到 makefile 中，您可以在 gcc 编译语句中将其用作 $(VarName) 。

所以，在makefile中它会是

```
gcc -DVarName=$(VarName) -c your_source.c -o your_obj.o 
```

对于“#ifdef”情况，您必须将其更改为“#if”，或者使用以下命令：

```
make -e SCHED_PR=1 
```

并在生成文件中

```
ifeq ($(SCHED_PR), 1)
mkfs: .....
    gcc -DSCHED_PR=1  ....
else
mkfs: .....
    gcc ....
endif 
```

在 .c 文件中

```
#if SCHED_PR 
```

...

# php - 检查关联是否存在而不捕获 Doctrine2 中的异常？

> ID：10590505
> 
> 赞同：3
> 
> 时间：2012-05-14T20:25:06.067
> 
> 标签：php, symfony, doctrine, doctrine-orm

在 Doctrine2 中发出查询之前是否可以检查关联是否存在？例子：

```
/**
 * @ORM\Entity
 */
class Product
{
    /**
     * @ORM\OneToMany(targetEntity="Feature", inversedBy="product")
     */
    public $features;
} 
```

我想检查（实际上没有发出查询本身）关联是否`product.features`存在。

**编辑**：出于好奇，我正在编写一个服务（真的是一个助手）来做一些基于 GET 参数的集合过滤：

```
public function initialize($entityName, $key)
{
    // Defaults are empty values and empty collection
    $this->values     = array();
    $this->collection = new ArrayCollection();

    // If "$key" GET parameter is null or blank return this instance
    if(is_null($value = $this->request->get($key))
        || strlen(trim($value)) == 0) return $this;

    // Split the parameter value based on separator (typically a comma)
    $re = '/\s*' . $this->separator . '\s*/';

    // Return this instance if no values are found
    if(!($set = preg_split($re, $value, 0, PREG_SPLIT_NO_EMPTY))) return $this;

    // Guess the repository fully qualified name and entity name
    $guesser    = $this->getManagementGuesser();
    $repoName   = $guesser->guessRepositoryName();
    $entityName = $guesser->guessEntityName();

    // Get the repository for the entity and create the builder
    $qb = $this->getRepository($repoName)->createQueryBuilder('e');

    // Check if a relation named $key exists and throw a LogicException
    $exists = $this->getEntitiesUtility()->checkRelation($entityName, $key);
    if(!$exists) throw new \LogicException("Relation named '$key' not found.");

    // Other stuff
} 
```

相关的部分是：

```
$this->getEntitiesUtility()->checkRelation($entityName, $relationName); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:19:03.737

```
// $em being your EntityManager..

if ($em->getClassMetadata($className)->getAssociationMapping($fieldName))
{
   ....
} 
```

# python - 如何正确运行 localtunnel v2

> ID：10590506
> 
> 赞同：10
> 
> 时间：2012-05-14T20:25:07.127
> 
> 标签：python, networking, tunnel

我正在使用[localtunnel v1](http://progrium.com/localtunnel/)。但是我发现v2允许你自定义子域，我需要这个功能。

[我按照存储库](https://github.com/progrium/localtunnel)`README`中描述的教程进行操作，但它在几个部分让我感到困惑，最后它没有用。

第一步是运行一些网络应用程序：检查，在端口号上。8000。

然后，它说明了主机名：

> Localtunnel 对主机名做了一些事情，所以你想设置两个主机名。一个用于本地隧道注册，一个用于您的本地隧道。通常它需要一个通配符，但我们只会为这个示例隧道硬编码一个主机名。
> 
> 示例.localtunnel.local -> 127.0.0.1
> localtunnel.local -> 127.0.0.1
> 
> 您可以在 /etc/hosts 中执行此操作，或者使用那个花哨的 ghost 实用程序。

我在这里迷路了，但我仍然编辑了我的`/etc/hosts`：

```
127.0.0.1   localhost
127.0.1.1   my-pc-name
127.0.0.1   example.localtunnel.local
127.0.0.1   localtunnel.local 
```

下一步...

> 现在您可以启动服务器了。它基于 config 目录中的配置文件。您可以自己制作，但**这个**配置为在端口 9999 上运行服务器，并且需要主机名 localtunnel.local
> 
> 银杏配置/default.conf.py

哪一个？无论如何...我根据 localtunnel repo 目录中的文件创建了 myconfig.conf.py [`/deploy`](https://github.com/progrium/localtunnel/tree/master/deploy)：

```
port = 9999
hostname = 'localtunnel.local'
service = 'localtunnel.server.TunnelBroker' 
```

但是，当我运行时：

```
lt --broker 127.0.0.1:9999 --name example 8000 
```

我有：

```
Traceback (most recent call last):
File "/usr/local/lib/python2.7/dist-packages/gevent/greenlet.py", line 390, in run
  result = self._run(*self.args, **self.kwargs)
File "/usr/local/lib/python2.7/dist-packages/localtunnel/client.py", line 53, in listen
  msg = self.ws.receive(msg_obj=True)
TypeError: receive() got an unexpected keyword argument 'msg_obj'
<Greenlet at 0xb6e0db1cL: <bound method TunnelClient.listen of <localtunnel.client.TunnelClient object at 0xb6def52c>>> failed with TypeError 
```

而在银杏过程中：

```
Traceback (most recent call last):
File "/usr/local/lib/python2.7/dist-packages/gevent/pywsgi.py", line 438, in handle_one_response
  self.run_application()
File "/usr/local/lib/python2.7/dist-packages/ws4py/server/geventserver.py", line 85, in run_application
  self.result = self.application(self.environ, start_response_for_upgrade)
File "/usr/local/lib/python2.7/dist-packages/ws4py/server/wsgi/middleware.py", line 131, in __call__
  environ.copy()))
TypeError: handle_websocket() takes exactly 3 arguments (2 given)
<BrokerFrontend fileno=6 address=0.0.0.0:9999>: Failed to handle request:
  request = GET /t/example HTTP/1.1 from ('127.0.0.1', 35907)
  application = <ws4py.server.wsgi.middleware.WebSocketUpgradeMiddleware object at 0x95bc2ac>

127.0.0.1 - - [2012-05-14 17:18:18] "GET /t/example HTTP/1.1" 101 162 0.000933 
```

而且，显然，[http://example.localtunnel.local:9999](http://example.localtunnel.local:9999)不起作用。

如何解决这个问题？我必须在哪里修改才能更改最终的子域？

对不起令人毛骨悚然的英语。

* * *

**编辑**

我遵循*了保罗的*建议并进行了降级。但是，虽然发生了变化，但错误仍然存​​在。银杏工艺：

```
$ ginkgo eco.conf.py  
Starting process with eco.conf.py...  
127.0.0.1 - - [2012-05-22 20:21:11] "GET /t/example HTTP/1.1" 400 116 0.000190 
```

本地隧道进程：

```
$ lt --broker 127.0.0.1:9999 --name example 8000
Traceback (most recent call last):
  File "/usr/local/bin/lt", line 9, in <module>
    load_entry_point('localtunnel==0.4.0', 'console_scripts', 'lt')()
  File "/usr/local/lib/python2.7/dist-packages/localtunnel/client.py", line 31, in main
    client.serve_forever()
  File "/usr/local/lib/python2.7/dist-packages/ginkgo/core.py", line 188, in serve_forever
    self.start()
  File "/usr/local/lib/python2.7/dist-packages/ginkgo/core.py", line 124, in start
    ready = not self.do_start()
  File "/usr/local/lib/python2.7/dist-packages/localtunnel/client.py", line 42, in do_start  
    self.ws.connect()
  File "/usr/local/lib/python2.7/dist-packages/ws4py-0.1.5-py2.7.egg/ws4py/client/threadedclient.py", line 72, in connect
    self.process_response_line(response_line)
  File "/usr/local/lib/python2.7/dist-packages/ws4py-0.1.5-py2.7.egg/ws4py/client/__init__.py", line 61, in process_response_line
    raise HandshakeError("Invalid response status: %s %s" % (code, status))
ws4py.exc.HandshakeError: Invalid response status: 400 Bad Handshake 
```

虽然现在 ginkgo 没有报错，但是 localtunnel 还是会报出与之前的报错不同的报错。显然它试图在连接过程中获取“/t/example”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:36:08.177

看起来这个软件需要一个旧版本的 ws4py。ws4py的[当前版本 (0.2.1)](https://github.com/Lawouach/WebSocket-for-Python/blob/v0.2.1/ws4py/client/geventclient.py#L28)与您所拥有的相匹配，而 ws4py 的[0.1.5 版本与 localtunnel](https://github.com/Lawouach/WebSocket-for-Python/blob/v0.1.5/ws4py/client/geventclient.py#L41)尝试使用的相匹配。

降级到 ws4py 0.1.5 可能足以解决您遇到的问题。

但是，另一方面，这似乎不是世界上受支持最好的软件。您确定这是解决您问题的正确方法吗？我已经查看了该 repo 中提供的代码和所有文档，我得到的是它设置了这个奇怪的 tcp-tunnel-over-json-over-websockets（是的，websockets，对于两个都有 python 的东西服务器和客户端！）的东西，甚至没有提供任何特定的安全性或加密或自身的稳健性功能，而且它似乎没有做其他更常见的工具无法做得更好的事情。但是，当然，我可能遗漏了一些重要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:27:50.760

我认为您必须按照说明设置 localtunnel.com 服务器（即，如果您想在其他域上运行自己的 localtunnel 服务器）。

为正常使用安装 localtunnel v2 应该像运行一样简单`pip install localtunnel`（可能使用 sudo）。

完成后，只需运行`localtunnel-beta -n <subdomain> 8000`

有关更多详细信息，请参阅[Jeff 的博客文章](http://progrium.com/blog/2012/12/25/localtunnel-v2-available-in-beta/)。

# rdf - 查询 rdf 三元组

> ID：10590507
> 
> 赞同：-1
> 
> 时间：2012-05-14T20:25:11.340
> 
> 标签：rdf, sparql, owl, virtuoso

如果我有以下例如，我如何编写 sparql 查询来比较变量（？a，？b）？（这有什么问题吗？）：

```
<ont:XXXXX rdf:about="http://www.myOntDomain#C">
   <ro:part_of rdf:resource="http://www.myOntDomain#A">
   <ro:part_of rdf:resource="http://www.myOntDomain#B">
</ont:XXXXX> 
```

这并没有给我想要的东西：

```
select ?s ?a ?b
where {
   ?s a ont:XXXXX; ro:part_of ?a; ro:part_of ?b .
   filter(str(?a) = "http://www.myOntDomain#A" && str(?b) = "http://www.myOntDomain#B")
} 
```

我想：

```
http://www.myOntDomain#C http://www.myOntDomain#A http://www.myOntDomain#B 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T22:53:46.400

您的问题，或者更确切地说是您的意图，相当不清楚，因为您所写的查询中唯一的未知数是`:C`. `:A`您已经知道and的身份`:B`，因为您*在查询本身中*引用了它们的 URI 。

我可以想到对您尝试做的事情的两种解释：

首先，您只想知道`?s`which 是 an `ont:XXXXX`and has `part_of` `:A`and `:B`：

```
select ?s where {
    ?s a ont:XXXXX ;
       ro:part_of <http://www.myOntDomain#A> ;
       ro:part_of <http://www.myOntDomain#B>
} 
```

或者，您想知道`?s`which 是 an`ont:XXXXX`和 which 具有（至少）两个不同的部分：

```
select ?s ?a ?b where {
    ?s a ont:XXXXX ;
       ro:part_of ?a, ?b
       FILTER (?a != ?b)
} 
```

如果这些都不符合你实际想要做的，你需要让问题更清楚。

# asp.net - 使用应用程序请求路由进行 SSL 卸载 - 如何让应用程序了解安全连接？

> ID：10590509
> 
> 赞同：3
> 
> 时间：2012-05-14T20:25:17.113
> 
> 标签：asp.net, https, web-farm-framework

我可以做些什么来让我的应用程序知道 arr 正在执行 SSL 卸载？

我想在我当前的环境中实现带有卸载的 arr，但是我们的应用程序当前决定将 http 重定向到 https，具体取决于我们数据库中的设置。

我想继续从我的数据库设置中管理重定向是否发生，但在测试期间，我将所有请求都视为 http 并最终进入重定向循环。

当 arr 的前端是安全的时，我将如何强制 HTTPS 服务器变量在后端服务器上“打开”。

感谢您提供任何帮助/推荐的解决方法。-丹尼

# iphone - 尝试从图像 I/O 创建 AspectRatioThumbnail 时出错

> ID：10590514
> 
> 赞同：1
> 
> 时间：2012-05-14T20:25:40.013
> 
> 标签：iphone, ios, cocoa-touch, core-graphics

`ALAsset`我正在尝试从iOS5 之前的版本创建纵横比缩略图（`ALAssetDefaultRepresentation aspectRatioThumbnail`直到 ios5 才实现）。我有以下代码，由于某种原因它给了我一个错误：

```
CGImageRef imref;
    NSURL* url = [self.photoAsset.defaultRepresentation url];
    NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                       (id)kCFBooleanTrue, kCGImageSourceShouldAllowFloat,
                       (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailWithTransform,
                       (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailFromImageAlways,
                       [NSNumber numberWithInteger:1024], kCGImageSourceThumbnailMaxPixelSize, nil];
    CGImageSourceRef src = CGImageSourceCreateWithURL((CFURLRef)url, NULL);
    imref = CGImageSourceCreateThumbnailAtIndex(src, 0, (CFDictionaryRef) dictionary); 
```

具体来说，我得到：

```
ImageIO: <ERROR>  CGImageSourceCreateWithURL CFURLCreateDataAndPropertiesFromResource failed with error code -11.ImageIO: <ERROR>  CGImageSourceCreateThumbnailAtIndex image source parameter is nil 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:58:18.680

问题`url`在于您要传递以创建“ `src`”，检查是否`url`有效并且此 url 中存在一些图像。

# objective-c - 为精灵生成随机 Y

> ID：10590518
> 
> 赞同：0
> 
> 时间：2012-05-14T20:25:45.030
> 
> 标签：objective-c, ios, c

我需要一些帮助（呃）。我想在 cocos2d 中为我的游戏生成一个随机的 Y 位置。

所以情况是这样的：游戏每 0.2 秒生成一个平台。iPhone / iPad 处于横向模式。平台出现在屏幕右侧（x 大于宽度，以便平台出现在屏幕之外）并开始使用 向屏幕左端移动`CCMoveTo`。我为每个平台选择一个随机 Y。问题是我不想在另一个平台之上生成一个平台。这意味着我需要制作一个不是“已经采取”的 randY。到目前为止我尝试过的代码是这样的：

```
//this is a part of code from my addPlatform function. This part in particular cares for the generation of my Y coordinate.
int randY = arc4random() % (int)(3 * (winSize.height/4)); //This prevents to spawn a Y larger than 3/4 of the screen

//here I would like to loop long enough to find a good Y
while (![self isGoodPlatformY:randY])
{
    randY = arc4random() % (int)(3 * (winSize.height/4));
} 
```

下一部分是我的`isGoodPlatformY`功能

```
- (bool)isGoodPlatformY:(int)platY
{
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    int padding = 100;
    bool ok = true;
    for (CCSprite *body in [self children])
    {
        if (body.tag > platformBody)
        {
            if (body.position.x < (winSize.width - padding))
            {
                if (abs(body.position.y - platY) < 20)
                {
                    ok = false;
                }
            }
        }
    }
return ok;
} 
```

我遍历所有标签比我的平台更大的主体。我有不同类型的平台，我使用标签将它们分开。如果身体是一个平台，我首先检查 X 坐标。如果平台足够远（填充），我可以在该确切点生成一个新平台，以便检查下一个平台。如果不是，我想检查那个平台的 Y。如果在这种情况下 Y 坐标小于 20 像素，我必须找到一个新的 Y，这就是为什么将 bool 设置为 false 并在 for 循环之后返回它。我知道不需要那些花括号，但我正在测试其他一些东西，这就是我把它们放在那里的原因。

这似乎不起作用。希望我清楚自己想要完成什么。您的任何帮助将不胜感激。希望我没有错过太新手风格的东西:)

我用其他语言标记了这个问题，因为这个问题可能“无处不在”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:26:51.227

假设所有衍生的平台都具有与您提到的相同的标签，即您使用标签来分隔不同类型的平台。

所有以前的平台都不会为此行返回 true

```
if (body.tag > platformBody) 
```

因为它们都具有相同的标签，所以您将比较 (1 > 1) 是否为假。

因此，您的方法将始终返回 YES（这是您的默认值 ok），并且永远不会检查平台是否相互碰撞。

我建议逐步执行该方法以查看是否是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:08:47.990

现在我发现我可以回答我自己的问题:)（我很傻）。所以，是的，这个问题很久以前就解决了，但对于任何可能正在阅读本文的人来说，解决方案是改变这条线：

```
if (body.position.x < (winSize.width - padding)) 
```

到：

```
if (body.position.x > (winSize.width - padding)) 
```

# java - 在 Java 中使用扩展另一个空接口的目的是什么？

> ID：10590526
> 
> 赞同：6
> 
> 时间：2012-05-14T20:26:34.990
> 
> 标签：java, interface, guice

我刚刚开始维护一个使用 Java Guice 框架的 Java MVC 项目。

在几乎整个代码中，首先开发人员将一个空模型接口作为参数传递给 **另一个**接口。

这是第一个界面：

```
public interface FooModel extends ModelInterface {

} 
```

另一个界面：

```
 public interface ModelInterface {
        public void addListener(FooListener fooListener);
        void setFoo(boolean blop);
        boolean isFoo();
    } 
```

这对我来说没有任何意义。

在 Java 中是否有充分的理由/模式使用空接口？也许是为了吉斯？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T20:32:44.633

[这](https://stackoverflow.com/questions/1436674/is-interface-as-labels-a-bad-practice-in-java-oo/1437231#1437231)是“标记接口”的一个很好的动机。它们在面向方面的编程中特别有用，它们给你一个附加点（我猜 Guice 就是这样一个框架）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:41:09.353

我知道使用空接口的唯一原因是作为标记接口。有一些示例，例如 java.lang.Cloneable 或 Serializable。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T20:28:32.290

它可用于标记特定用途的类。

示例：[IRequiresSessionState](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate.aspx)

# javascript - 如何获取/设置扩展中图像的全局 Google Chrome 内容设置？

> ID：10590529
> 
> 赞同：3
> 
> 时间：2012-05-14T20:26:50.530
> 
> 标签：javascript, google-chrome, google-chrome-extension

我为 Google Chrome 编写了一个扩展程序，以使用浏览器操作按钮打开和关闭图像的加载。

它有效，但到目前为止我只能通过 URL 设置和获取*特定*页面的值。这些设置显示在**Settings > Under the Bonnet > Privacy > Content Settings... > Images**部分的**Manage exceptions...**按钮下。例如，

 **```
chrome.contentSettings['images'].get({
    'primaryUrl': 'http://www.example.com/*',
    'incognito': false
},
function(details) {
    console.log('Show images: ' + details.setting);
}); 
```

将输出消息“显示图像：允许”或“显示图像：块”。

但我希望能够打开和关闭全局设置。**因此，我需要知道Settings > Under the Bonnet > Privacy > Content Settings... > Images 下**的值是“显示所有图像（推荐）”还是“不显示任何图像” ，即**允许**还是**阻止**是*默认*？

对 使用通配符的各种尝试（`primaryUrl`如下所示）都会引发错误：

```
chrome.contentSettings['images'].get({
    'primaryUrl': '*://*/*',
    'incognito': false
},
function(details) {
    console.log('Show images: ' + details.setting);
}); 
```

错误：

```
'Error during contentSettings.get: The URL "*://*/*" is invalid.' 
```

引用[内容设置](http://code.google.com/chrome/extensions/contentSettings.html#property-images)和[匹配模式](http://code.google.com/chrome/extensions/match_patterns.html)让我认为我需要使用特殊`<all_urls>`模式，但我也遇到了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-30T22:04:08.077

对于 contentSettings.get，您可以使用“http://*”或当前选项卡的 url。`'<all_urls>'`适用于 contentSettings.set 中的 primaryPattern。

```
function toggleImages(tab) {

    chrome.contentSettings['images'].get({
        primaryUrl: tab.url
    }, function (details) {
        chrome.contentSettings['images'].set({
            primaryPattern: '<all_urls>',
            setting: details.setting == 'allow' ? 'block' : 'allow'
        })
    });

}

chrome.browserAction.onClicked.addListener(toggleImages); 
```**

# android - 在 ActivityInstrumentationTestCase 中使用自定义包

> ID：10590533
> 
> 赞同：2
> 
> 时间：2012-05-14T20:27:14.553
> 
> 标签：android, android-testing

我正在尝试为我的 android 应用程序编写测试。我有一个活动，它初始化在 onCreate() 方法中传递给它的 Bundle 中的几个文本字段（在实际情况下，数据已从另一个活动放入包中）

我编写了一个扩展 ActivityInstrumentationTestCase2 的测试，但我找不到在测试中注入自定义 Bundle 的方法

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:16:05.767

您应该使用[InstrumentationTestCase.launchActivity()](http://developer.android.com/reference/android/test/InstrumentationTestCase.html#launchActivity%28java.lang.String,%20java.lang.Class%3CT%3E,%20android.os.Bundle%29)接收 a`Bundle`作为参数。另请注意，`ActivityInstrumentationTestCase2`extends`InstrumentationTestCase`并且您应该`launchActivity()`在之前或代替`getActivity()`.

# windows - 适用于 Windows Server 2008 的 FaxServer 替代方案

> ID：10590534
> 
> 赞同：3
> 
> 时间：2012-05-14T20:27:26.353
> 
> 标签：windows, object, com, coldfusion, windows-server-2008

为了在内部发送传真，我们一直在使用以下 Coldfusion 代码来创建处理传真的对象：

```
<cfobject type="COM" action="Create" name="objFaxServer" 
class="FaxServer.FaxServer.1"> 
```

在我们继续使用 ColdFusion 8 的同时，我们正在将我们的服务器迁移到 Windows Server 2008，这是一个 64 位系统。因此，我们现在无法调用 COM 对象（例如 FaxServer）来处理此类请求。我正在寻找一个内部替代方案（没有像 InterFax.net 这样的第 3 方），但我找不到一个，也没有任何建议来处理这种情况。

关于使用什么或如何通过coldfusion内部发送传真的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:11:13.177

我会使用电子邮件到传真网关，例如[efax](http://www.efax.com.au/)。这使得整个过程非常简单，您只需发送一封电子邮件，主题字段中包含电话号码。

我知道你在内部说，但我认为外部更好:)

# ios - 将 JPEG 用于启动图像

> ID：10590535
> 
> 赞同：7
> 
> 时间：2012-05-14T20:27:31.113
> 
> 标签：ios, xcode

这与[iPad 的 Default-Portrait.png 有关：有什么方法可以使文件变小？](https://stackoverflow.com/questions/4580477/default-portrait-png-for-ipad-any-way-to-make-the-file-size-smaller)

有没有办法为 Default-Landscape.png 和 Default-Portrait.png 指定更有效的文件格式（如 JPEG）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T12:08:21.527

是的，可以使用 jpg 文件作为启动图像。只需将带有基本文件名（例如 LaunchImage.jpg”）的“启动图像”键添加到 Info.plist。然后将文件添加到您的项目中，例如

*   启动图像.jpg
*   LaunchImage@2x.jpg
*   LaunchImage-568h@2x.jpg

Xcode 会接收它们。

**但是**，通过个人经验，我发现如果您支持更大的 iPhone 5 屏幕**，App Store 需要 PNG 格式**，并使用 PNG 的存在来确定 iPhone 5 支持并在商店中显示 iPhone 5 尺寸的缩略图。使用 JPG 图像不会将应用显示为在应用商店中优化的 iPhone 5（即使它在设备上可以正常工作），因此最好坚持使用 PNG。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T20:47:54.460

~~除了 png 之外，没有其他方法可以使用图像。~~

> ~~所有启动图像都必须是 PNG 文件，并且必须位于应用程序包目录的顶层。[部分：应用程序启动（默认）图像](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)~~

* * *

更新：JPEG 图像可以工作，Apple 的文档不再指定图像​​必须是 PNG 文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-14T22:53:35.110

如果您使用 xcassets，那么从 Xcode 6 开始您可以使用 JPG。但是 Xcode 仍然不允许您将 JPG 放入 LaunchImage 文件夹。但是您可以在 Finder 中进行操作。只需使用 Finder 将您的 PNG 放入该文件夹，然后编辑 JSON 文件，将所有 .png 扩展名更改为 .jpg。

我还没有使用它向商店提交应用程序，但它至少可以在 iPhone 模拟器中运行。

更新：在设备上不起作用。无论如何我都会把这个答案留在这里，这样人们就知道这种技术至少已经尝试过了，所以不会重复这种努力。

# objective-c - Objective C 上的配置文件

> ID：10590536
> 
> 赞同：2
> 
> 时间：2012-05-14T20:27:32.230
> 
> 标签：objective-c, macos, configuration-files

我是 Objective-C 的新手（我的最强技能是 .Net），在 .Net 上有一个用户可以修改的配置文件，并且应用程序会获取这个修改后的值。我的问题是：Objective-C 上有类似的东西（我的应用程序适用于 Mac OS X）？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:39:12.590

如果您在谈论首选项，则由[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)类处理。要写入的首选项的标准位置是 ~/Library/Preferences/bundleidentifier.plist（其中 bundleidentifier 是您的包的标识符 - 例如，com.apple.preview 用于 Apple 的 Preview 应用程序）。从技术上讲，您可以在任何地方编写 plist，但是在没有用户说的情况下在标准位置之外涂鸦是一种不好的形式。

# matlab - MatLab 中的 ode23 - 使用可选参数作为输入

> ID：10590542
> 
> 赞同：1
> 
> 时间：2012-05-14T20:27:56.060
> 
> 标签：matlab, parameters, arguments, argument-passing, ode

我正在尝试自己学习 MatLab。我得到了关于求解 ODE 的大部分概念，但我对使用可选参数作为输入有点不确定。我创建了以下功能：

```
function xdot = funn(t,x,mu);
if nargin < 3 | isempty(mu)
    mu = 1;
end
xdot = t +mu*x; 
```

另外我定义了：

```
tspan = [0 2];
x0 = 0;
options = odeset('outputfcn','odeplot'); 
```

我不确定的是如何`mu`在使用`ode23`函数时更改变量。我知道这应该可以通过输入可选参数来实现，但我无法让它工作。说如果我写：

```
[t y] = ode23('funn',tspan,x0,options) 
```

然后一切计算正确，我们自动得到`mu`= 1。

但如果我想改变这一点，我该如何进行？我尝试编写以下内容来设置`mu`= 4：

```
[t y] = ode23('funn',tspan,x0,options,4) 
```

但后来我得到以下信息：

```
??? Error using ==> funn
Too many input arguments.

Error in ==> odearguments at 98
f0 = feval(ode,t0,y0,args{:});   % ODE15I sets args{1} to yp0.

Error in ==> ode23 at 171
[neq, tspan, ntspan, next, t0, tfinal, tdir, y0, f0, odeArgs, odeFcn, ... 
```

我这样做是基于我对教科书中所写程序的理解，但显然我在这里做错了。如果有人能解释我如何更改参数`mu`，以及一般来说如何`p1, p2, ...`使用可选参数，`ode23`我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:17:40.263

您需要做的是使用[匿名](http://www.mathworks.com/help/techdoc/math/bsgprpq-5.html#bsgprpq-8)函数在函数调用中传递数据：

```
[t y] = ode23(@(t,y)funn(t,y,4),tspan,x0,options) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:00:39.497

我认为问题与`ode23`. 问题似乎在于您没有`varargin`在函数定义中列出`funn`. 它应该是：

```
function xdot = funn(t,x,mu,varargin) 
```

这种方式`funn`接受 3 个或更多参数，并且您不应收到错误“输入参数过多”。

# css - 下拉菜单悬停问题

> ID：10590545
> 
> 赞同：0
> 
> 时间：2012-05-14T20:28:00.310
> 
> 标签：css, drop-down-menu

我正要读书把我的头发拉出来！每当您越过下拉导航菜单时，悬停图像就会下降到它应该在的位置下方并伸展。然后，当您尝试将鼠标移到下拉区域时，它就会消失。[您可以在http://pauldrayton.com/sites/waterdamagesegeorgia/](http://pauldrayton.com/sites/waterdamagesegeorgia/)上看到这一点。我已经尝试使用 z-index 来查看这是否是问题所在，但我还没有弄清楚！

这是CSS。任何帮助，将不胜感激。

```
#access {
display: block;
float: left;
margin: 0 ;
margin-right:24px;
margin-top:-30px;
border-bottom:  2px solid #CCC ;
width: 990px;
z-index: 100;
}

#access .menu-header,
div.menu {
font-size: 14px;
margin-left: 12px;
}

#access .menu-header ul,
div.menu ul {
list-style: none;
float:right;
position:relative;
margin: 0 0;
margin-right:24px;
}

#access .menu-header ul.sub-menu li { 
box-shadow: 3px 3px 3px #999; 
-moz-box-shadow: 3px 3px 3px #999; 
-webkit-box-shadow: 3px 3px 3px #999; }

#access .menu-header li,
div.menu li {
float: right;
position: relative;
padding:0px;
background:url(images/mantra_menu.png) top left no-repeat;
height: 27px;
margin-right:10px;
    z-index: 101;
}

 #access   li.current_page_item {
background:url(images/mantra_menu_current.png) top left no-repeat;
border-bottom:none;
}

 #access  li.current-menu-item {
background:url(images/mantra_menu_current.png) top left no-repeat;
border-bottom:none;
}

#access a {
color: #FFFFFF;
display: block;
height: 27px;
margin-left:10px;
padding-right: 10px;
padding-top:4px;
padding-right:25px;
text-decoration: none;
font-weight:normal !important;
background:url(images/mantra_menu.png) top right no-repeat;
position:relative;
right:-10px;
z-index: 102;
white-space:nowrap;
}

#access .menu-header li:hover,
div.menu li:hover, #access a:hover {
color:#0C85CD ;
}

#access ul ul {
display: none;
position: absolute;
top: 29px;
right: 0px important;
float: right;
z-index: 104;
background:url(images/mantra_menu_down.png)  0px 0px no-repeat;
padding:12px 0px 0px;
/*border-bottom:1px solid #CCC;*/
margin-top:-30px;

}
#access ul ul li {
display:block !important;
background:#FFF !important;
/*  border-left:1px solid #CCC;
border-right:1px solid #CCC;*/
margin-left:0 !important;
margin-right:0px !important;
/*padding-left:10px;
padding-right:10px;*/ /* disabled for submenu width fix */
padding-top:6px;
z-index: 105;
}

#access ul { }
#access ul li { }
#access ul li ul {
display: none; /* submenu width fix */ }

#access ul ul li {  /* level 2 */
border: 0;
width: 100%; /* submenu width fix */
border-left: 1px solid #EEE;
border-right: 1px solid #EEE;
border-bottom: 1px solid #EEE;
white-space: pre;

}

#access ul ul ul li { /* level 3 */
border: 0;
/* width: 100%;*/
  width: auto;
  display: block;
    float: none;
    border-top: 1px solid #EEE;
    border-right: 1px solid #EEE;
    border-bottom: 1px solid #EEE;
    white-space: pre; /* submenu width fix */
    z-index: 106;}

#access ul ul a { display: block; padding: 3px 20px 0 10px !important; 
/* submenu width fix */   }

#access ul ul a, #access ul ul ul a {
margin:0 !important;/*padding:0 !important;*/
left:0 !important;
color:#5F5B5B;
border-bottom:none;
background:none !important;
}

#access ul ul li:hover, #access ul ul ul li:hover {
background:#FCFCFC !important;
}

#access ul ul ul {
left: 100%;
top: 0;
background:url(images/mantra_menu_right.png)  0px 0px no-repeat;
padding:0px 0px 0px 12px;
    z-index: 107;
/*border:1px solid #CCC;*/
}

#access li:hover > a {
color:#0E85CD ;
}

#access ul ul :hover > a {
color:#0E85CD;
}

#access ul li:hover > ul {
display: block;
    z-index: 108;
}
#access ul li.current_page_item > a,
#access ul li.current-menu-item > a{

color: #000 !important;
background:url(images/mantra_menu_current.png) top right no-repeat;
}

#access ul ul li.current_page_item ,
#access ul ul li.current-menu-ancestor,
#access ul ul li.current-menu-item ,
#access ul ul li.current-menu-parent {
color: #000 !important;
background:#FFF !important;
}

* html #access ul li.current_page_item a,
* html #access ul li.current-menu-ancestor a,
* html #access ul li.current-menu-item a,
* html #access ul li.current-menu-parent a,
* html #access ul li a:hover {
color: #5F5B5B ;
background:url(images/mantra_menu_current.png) top right no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:51:13.933

我做了以下更改：

```
 #menu-main-navigational { 
       position:relative;
    } 
    #access .menu-header ul { 
       position:absolute; 
    } 
```

它对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:51:02.423

给`.sub-menu`元素一个绝对位置而不是相对位置。相对导致它强制其父元素展开。您还需要给它一个固定的宽度，因为它不会再调整到它的父级。并编辑掉任何覆盖元素上该属性的规则。

# inno-setup - 在 CurPageChanged 过程中创建控件是否合适？

> ID：10590552
> 
> 赞同：2
> 
> 时间：2012-05-14T20:28:37.923
> 
> 标签：inno-setup

我在 CurPageChanged 中有代码，它向许可证窗口添加了一个按钮。我的 CurPageChanged 是这样开始的：

```
procedure CurPageChanged(CurPageID: Integer);
var Button123 TButton;
begin
  if CurPageID = wpLicense then begin
    Button123 := TButton.Create(WizardForm.LicenseMemo.Parent); 
```

我的问题是每次页面更改为 wpLicense 页面时不会创建一个按钮吗？因此，如果用户点击许可对话框，然后返回它，那不会创建另一个按钮吗？如何确保只创建一个按钮？我正在寻找的是最合适的过程，从中添加一个控件--once-- 到现有的 wp. 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T21:08:11.580

> 我的问题是每次页面更改为 wpLicense 页面时不会创建一个按钮吗？因此，如果用户点击许可对话框，然后返回它，那不会创建另一个按钮吗？

是的，它每次都会创建多个按钮。因为页面不会被破坏，所以它们上的控件不会被破坏。但是您实际上可以利用这一事实来创建单个控件，然后在必要时显示/隐藏它。

首先，修改该方法，该方法在显示向导*之前*`InitializeWizard`只调用一次。在此处创建按钮，如下所示：

 *```
procedure InitializeWizard();
var
  MyButton: TButton;
begin
  MyButton := TButton.Create(WizardForm.LicenseMemo.Parent);
  MyButton.Parent := WizardForm.LicenseMemo.Parent;
  MyButton.Top := 0;
  MyButton.Left := 0;
  MyButton.Caption := 'My Custom Button';
  ...
end; 
```*

# jquery - 在 IE 中调用 Ajax 后页面元素不刷新

> ID：10590553
> 
> 赞同：0
> 
> 时间：2012-05-14T20:28:50.347
> 
> 标签：jquery, cakephp-2.0

我在 IE 中使用 Ajax 代码时偶然发现了一个问题。

在我网站的几个部分中，用户可以将数据添加到数据库中，单击提交，然后表单消失，同时刷新页面上的数据以显示更改。这适用于 Opera 和 Firefox，但不适用于 IE（特别是 IE9，因为这是我尝试过的唯一版本）。

表单将更改保存到数据库，因此部分 Ajax 请求正在执行。但是，处理刷新的代码部分似乎在 IE 中不起作用。这是代码：

```
$('form#CompanyIndexForm').submit(function(event){
    event.preventDefault();

    $.ajax({
        url:'/company/save_customer_data',
        type:'POST',
        data: $("form#CompanyIndexForm").serialize(),
        success: function(data) {
            $("#main").load("#main");
        },

    });     
}); 
```

我对使用 Ajax 很陌生，所以这让我有些困惑。该代码在 Firefox 和 Opera 中确实有效，所以我很困惑为什么 IE 应该有所不同？

干杯!

**编辑：**
这是举行的`save_customer_data`：

```
function save_customer_data(){
    $this->autoRender = false;
    $this->layout = 'ajax';

    $this->loadModel('Company');

    if ($this->Company->save($this->data)) {
            $this->redirect('/admin/customers/');
        }
} 
```

# c# - WPF ListView 在添加新项目后更新列表项目值（值随时间变化）

> ID：10590554
> 
> 赞同：0
> 
> 时间：2012-05-14T20:28:51.953
> 
> 标签：c#, wpf, listview

我有一个响应事件并将事件中的数据添加到“ListView”的应用程序，并且我有一个具有 3 个属性的简单类。

ListView 保存这些数据：

```
 public string Code { get; set; }
    public string Status { get; set; }
    public TimeAgo Time { get; set; } 
```

TimeAgo 类是：

```
public class TimeAgo
{

    private DateTime _time;

    public TimeAgo(DateTime time) { _time = time; }

    public override string ToString()
    {
        return new TimeSpan(DateTime.Now.Ticks - _time.Ticks).Seconds + " seconds ago";
    }
} 
```

所以，每当发生新事件时，我希望其他对象更新，所以如果我添加一个新对象，它会显示“0 秒前”，但旧的应该更新并说“15 秒前”，这样我就可以跟踪多长时间以前每个事件都在更新时发生。

我已经为此搜索了方法，但我尝试过的所有方法都没有奏效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:47:36.447

只需将 Seconds 设为您绑定的属性即可。

放在顶部

```
Insert(0, T item 
```

对于 ObservableCollection 中的所有项目调用 NotifyPropertyChanged("Seconds"); 插入后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:46:12.767

这似乎很简单的任务。“最新条目是第一” - 您可以简单地按 TimeAgo 订购您的数据源（但您必须实现 IComparable）

您是否使用 MVVM（您将其标记为 WPF）？如果是 - 只需使用 ObservableCollection 类作为 ListView DataSourse。也应该调查[这个](http://msdn.microsoft.com/en-us/library/ms743695.aspx)

# apache - 防止在没有 .htaccess 的情况下从 Apache 访问文件

> ID：10590560
> 
> 赞同：2
> 
> 时间：2012-05-14T20:29:03.420
> 
> 标签：apache, .htaccess, php

（LAMP 服务器配置）

作为另一个问题的解决方法，我需要 PHP 能够访问本地文件，但要防止 Apache 通过 http 提供这些文件。

通常，我只会使用 .htaccess 来完成此操作，但是由于体制限制，我不能。我也不能触摸 php.ini，虽然我可以在 php 中使用 php_ini_set。

作为一个创造性的解决方案，我认为如果 php 作为它自己的 linux 用户（而不是 apache）执行，我可以使用普通的 chown 和 chmod 来完成这个。

同样，目标只是拥有一个 apache 不会显示但 php 可以访问的文件目录。

我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T20:34:06.253

将文件放在您的 Web 可访问根目录 ( `DocumentRoot`) 之外，但通过 PHP 保持它们可访问。

建议：

```
/sites
/sites/my.site.com
/sites/my.site.com/data  // <-- data goes here
/sites/my.site.com/web   // <-- web root is here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:37:41.667

这是一个想法。将文件的权限设置为即使所有者也无法访问，然后当 PHP 需要它们时[`chmod()`](http://php.net/manual/en/function.chmod.php)，读取它们，然后将`chmod()`它们恢复为无法访问。

# mongodb - Grails - 使用身份验证连接到 MongoDB 数据库

> ID：10590562
> 
> 赞同：4
> 
> 时间：2012-05-14T20:29:21.697
> 
> 标签：mongodb, authentication, grails, database-connection, database

我正在尝试使用身份验证连接到我的 MongoDB。我在我的 Mongo 服务器上做了这个：

```
use admin
db.addUser('adminLogin','adminPassword')
db.shutdownServer()
exit 
```

然后我再次启动我的服务器`mongod --auth`

我在 DataSource.groovy 中设置了我的数据库配置，如下所示：

```
grails {
    mongo {
        host = "localhost"
        port = 27017
        username = "adminLogin"
        password = "adminPassword"
        databaseName = "my DB name"
        options {
            autoConnectRetry = true
            connectTimeout = 300
        }
    }
} 
```

当我启动我的应用程序时，我收到以下错误消息：

```
ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean
 with name 'mongoDatastore': FactoryBean threw exception on object creation; nested 
exception is org.springframework.data.mongodb.CannotGetMongoDbConnectionException:
 Failed to authenticate to database 
```

任何建议都是最受欢迎的。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T00:20:05.950

我遇到了同样的问题，所以我可以帮助解释 Mongo 如何进行身份验证。您会看到您所做的是您在管理数据库中创建了一个管理员用户，这很棒。但是，您尝试使用不允许的管理员用户直接连接到“mydb”。听起来很混乱？这是因为它是。为了更好地说明这一点，这里有一个简单的练习：

1.  像上面一样为 admin db 创建一个用户。
2.  退出 mongo shell
3.  运行以下

> ```
> mongo
> use myDBname
> db.auth("adminlogin", "adminpwd") 
> ```

那将失败。但是试试这个。

> ```
> mongo
> use admin
> db.auth("adminlogin", "adminpwd")
> use myDBname 
> ```

这将起作用，因为您使用管理上下文切换到此数据库并且没有尝试直接连接到它。

因此，您需要做的就是直接连接到您想要的数据库并在该数据库中创建一个用户权限，如下所示：

> ```
> mongo
> use myDBname
> db.addUser("dblogin", "dbpwd") 
> ```

用这个更新你的 grails 配置文件，我敢打赌它会起作用。

请注意，最后一部分是您的答案并解决了您的问题，但是由于我为此苦苦挣扎并以艰难的方式弄清楚了，我认为上下文确实有助于更好地理解 mongo auth。

小心

# asp.net - 在 Web 服务中使用时将 Linq 属性设为可选

> ID：10590564
> 
> 赞同：1
> 
> 时间：2012-05-14T20:29:25.770
> 
> 标签：asp.net, linq, web-services

我在我的网络服务中使用 LINQ 对象，并被 iphone 和 android 开发人员使用。现在我在表中添加了一些新字段，这些字段又将用于 linq 对象。

我想知道一些方法，我可以将一些 linq 属性标记为可选，即如果 iphone 和 android 开发。不通过该属性，则不会出现错误。

谢谢高拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:21:21.330

首先，不建议将 LINQ 对象直接嵌入到 Web 服务中。专门为捕获每个 Web 服务调用的相关参数的 Web 服务创建数据对象。这将保护您的服务消费者免受底层数据存储的更改，并允许您更严格地控​​制消费者已知的内容。然后，您可以使用适配器模式将 Web 服务中的对象转换为 LINQ 对象以提交到数据库。

其次，关于您关于可选参数的问题。使用自定义数据对象，可以使用可为空的属性（对于原始类型）或仅`null`对于对象类型轻松完成此操作。如果您必须使用 LINQ 对象，使数据库中的字段可以为空也将导致属性可以为空，因此对于服务使用者是可选的。

# jquery - 缩放图像并保持其比例

> ID：10590566
> 
> 赞同：1
> 
> 时间：2012-05-14T20:29:35.947
> 
> 标签：jquery, image, scaling

我正在开发一个照片共享网站。当以全尺寸显示图像时，我希望宽度最大为 800 像素，高度最大为 600。

下面的代码适用于缩放，但它不保持图像的比例。我想我可以改用百分比，但我仍然希望图像具有这些特定的最大值（h：800，w：600）。

有没有办法用 jQuery 来实现呢？

提前致谢！

```
 if ($('#photo').length > 0) {
        var imgWidth = $("#photo").width();
        var imgHeight = $("#photo").height();

        if (imgWidth > 800) {
            $("#photo").width(800);
        }
        if (imgHeight > 600) {
            $("#photo").height(600);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:34:38.237

你可以使用 `max-width`或`max-height`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:33:49.017

关键是将宽度和高度乘以相同的缩放常数。

如果您受宽度限制，请乘以 800/宽度。

如果您受高度限制，请乘以 600/高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T20:34:06.890

像这样的东西：

```
var imgWidth = $("#photo").width();
var imgHeight = $("#photo").height();
var maxWidth = 800;
if (imgWidth > maxWidth) {
    var newWidthMultiplier = maxWidth / imgWidth;
    $("#photo").width(maxWidth);
    $("#photo").height(newWidthMultiplier * imgHeight);
} 
```

# windows - 如何使用日期和时间创建文件夹？

> ID：10590567
> 
> 赞同：2
> 
> 时间：2012-05-14T20:29:41.747
> 
> 标签：windows, command-line, batch-file

我正在尝试做一个快速简单的游戏备份脚本，但它不适合我。这就是我所拥有的。

```
 @echo off

:main

RD /S /Q "C:\Users\Citadel\Desktop\Minecraft_Backups"

mkdir "C:\Users\Citadel\Desktop\Minecraft_Backups\%date% - %time%"

XCOPY "C:\Users\Citadel\AppData\Roaming\.minecraft\saves" "C:\Users\Citadel\Desktop\Minecraft_Backups\%date% - %time%" /D /E /C /R /I /K /Y

echo %date% - %time% - Backup Complete >> log.txt

PING 1.1.1.1 -n 1 -w 900000 >NUL

goto main 
```

老实说，mkdir 命令是在黑暗中开枪，但到目前为止没有任何效果，所以我尝试了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T21:06:39.443

问题在于它`%date%`包含`%time%`不能在目录名称中使用的特殊字符。在脚本顶部试试这个：

```
for /f "tokens=2-4 delims=/ " %%a in ('date /t') do (set mydate=%%c-%%a-%%b)
for /f "tokens=1-2 delims=/:" %%a in ('time /t') do (set mytime=%%a%%b) 
```

或者，如果您更喜欢 24 小时制，请将第二行更改为：

```
for /f "tokens=1-2 delims=/:" %%a in ("%TIME%") do (set mytime=%%a%%b) 
```

然后使用`%mydate%_%mytime%`代替`%date% %time%`.

请注意，这可能存在区域问题，但如果您确认它适用于您的机器，那么对于本地备份它总是没问题的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:00:56.093

这是我发现似乎有效的方法：

```
@setlocal enableextensions
set datestamp=%date:~-4,4%%date:~-10,2%%date:~7,2%
mkdir %datestamp% 
```

# html - 我将如何设计这样的网站，其中一半垂直页面是一种纹理，而另一种则不同？

> ID：10590569
> 
> 赞同：0
> 
> 时间：2012-05-14T20:29:46.380
> 
> 标签：html, css

[http://panic.com/transmit/](http://panic.com/transmit/)

我习惯于在正文中添加一个背景，然后占据整个页面，但是对于这个网站，他们很有趣，因为他们将其拆分。如果我只使用 div，它们的侧面有白色，与 body 不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:31:52.257

> 如果我只使用 div，它们的侧面有白色，与 body 不同。

将 body 元素的边距和内边距设置为 0。

# asp.net-mvc - MVC 3 / Jquery AJAX / Session Expires / C# - 处理 ajax 调用期间的会话超时

> ID：10590572
> 
> 赞同：8
> 
> 时间：2012-05-14T20:29:48.967
> 
> 标签：asp.net-mvc, jquery, session-cookies, session-timeout

我有一个对 MVC 的 ajax 调用，它返回一个局部视图。这一切都很好，直到会话结束或 cookie 过期。当我进行 ajax 调用时，它会在 div 中显示用于局部视图的内容。如何在 ajax 调用期间检测到我的会话已过期并正确重定向到全屏/页面

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T20:39:56.717

我建议将您的所有请求封装到一个包装器元素中：

```
public class JsonResponse<T>
{
    public JsonResponse()
    {
    }

    public JsonResponse(T Data)
    {
        this.Data = Data;
    }

    public T Data { get; set; }
    public bool IsValid { get; set; }
    public string RedirectTo { get; set; }
} 
```

您要发送给客户的模型在 Data.xml 中。

为了填充 RedirectTo，我在 Global.Asax 中使用了[GlobalAuthorize](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)属性，并[为 HandleUnauthorizedRequests 添加了句柄](https://stackoverflow.com/questions/5238854/handling-session-timeout-in-ajax-calls/5242746#5242746)。

```
public sealed class GlobalAuthorize : AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest
      (AuthorizationContext filterContext)
    {
        if (filterContext.HttpContext.Request.IsAjaxRequest())
        {
            filterContext.Result = new JsonResult
            {
                Data = new JsonResponse<bool>
                       {
                           IsValid = false,
                           //RedirectTo = FormsAuthentication.LoginUrl
                           RedirectTo = "/"
                       },
                JsonRequestBehavior = JsonRequestBehavior.AllowGet
            };
        }
        else
        {
            base.HandleUnauthorizedRequest(filterContext);
        }
    } 
```

此外，我已将**所有**Ajax 请求封装到一个函数中，该函数检查`RedirectTo`.

```
function global_getJsonResult(Controller, View, data, successCallback, completeCallback, methodType)
{
    if (IsString(Controller)
        && IsString(View)
        && !IsUndefinedOrNull(data))
    {
        var ajaxData;
        var ajaxType;

        if (typeof (data) == "string")
        {
            ajaxData = data;
            ajaxType = "application/x-www-form-urlencoded"
        }
        else
        {
            ajaxData = JSON.stringify(data);
            ajaxType = "application/json; charset=utf-8";
        }
        var method = 'POST';

        if (!IsUndefinedOrNull(methodType)) 
        {
            method = methodType;
        }

        var jqXHR = $.ajax({
            url: '/' + Controller + '/' + View,
            data: ajaxData,
            type: method,
            contentType: ajaxType,
            success: function(jsonResult)
            {
                if (!IsUndefinedOrNull(jsonResult)
                    && jsonResult.hasOwnProperty("RedirectTo")
                    && !IsUndefinedOrNull(jsonResult.RedirectTo)
                    && jsonResult.RedirectTo.length > 0)
                {
                    $.fn.notify('error', 'Login Expired', 'You have been inactive for a prolonged period of time, and have been logged out of the system.');
                    window.setTimeout(function() { window.location = jsonResult.RedirectTo }, 5000);
                }
                else if (IsFunction(successCallback))
                {
                    successCallback(jsonResult, Controller + '/' + View);
                }
            },
            error: function(jqXHR, textStatus, errorThrown)
            {
                if (errorThrown != 'abort')
                {
                    $.fn.notify('error', 'AJAX Connection Error', textStatus + ': ' + errorThrown);
                }

            },
            complete: function(jqXHR, textStatus)
            {
                if (IsFunction(completeCallback))
                {
                    completeCallback(jqXHR, textStatus, Controller + '/' + View);
                }
            }
        });

        return jqXHR;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T20:39:47.307

您可以使用 javascript 在客户端上创建一个计时器，该计时器将在会话超时时向用户显示一个对话框。您只需将计时器的值设置为会话超时。然后在ajax请求时，它也会重置倒计时。

```
var g_sessionTimer = null;
function uiSessionInit() {
    id = "uiTimeout";
    timeout = 3600000 * 24; // 1 day timeout
    uiSessionSchedulePrompt(id, timeout);
    $('body').ajaxStart(function () {
        // reset timer on ajax request
        uiSessionSchedulePrompt(id, timeout);
    });
}
function uiSessionSchedulePrompt(id, timeout) {
    if (g_sessionTimer)
        clearTimeout(g_sessionTimer);
    g_sessionTimer = setTimeout(function () { uiSessionExpiring(id); }, timeout);
}
function uiSessionExpiring(id) {
    // create a dialog div and use this to show to the user
    var dialog = $('<div id="uiTimeout"></div>').text("Your session with has timed out. Please login again.");
    $('body').append(dialog);
    $('#uiTimeout').dialog({ 
           autoOpen: true, 
           modal: true, 
           title: 'Expired Session', 
           buttons: { 
                "OK": function(){
                    $(this).dialog('close'); 
                }
           },
           close: uiSessionDialogClose
     });
}

function uiSessionDialogClose(){
    // take user to sign in location
    location = 'http://www.mypage.com'; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-16T11:58:35.220

已经 8 年了，但我刚刚遇到了一个类似的问题，即在用户的身份验证 cookie 过期后进行的将部分视图加载到模式中的 Ajax 调用会导致完整的登录页面被加载到模式中。这就是我解决它的方法。

首先，我在登录页面上添加了一个隐藏控件。`value`不是严格要求的，但我认为它使标记更具可读性：

```
<input id="isLoginPage" type="hidden" value="true" /> 
```

然后我像这样修改了 Ajax 调用。我正在使用 jQuery，但同样的原理也适用于普通的旧 Javascript：

```
$.ajax({
    url: `/mypartialview`,
    type: "GET",
    success: function (data) {
        var $modal = $("#myModal");
        $modal.find(".modal-content").html(data);
        if ($modal.find("#isLoginPage").length > 0) {
            window.location.replace("/");
        }
        $modal.modal("show");
    }
}); 
```

这样做的基础是，如果用户的身份验证已过期，MVC 的默认行为是返回登录页面，所以我“嗅探”Ajax 调用返回的`isLoginPage`隐藏输入视图，如果找到，我知道登录页面已经返回，所以我只是将用户重定向到应用程序的根目录，然后 MVC 将重定向到主登录页面。

如果您的应用程序的根允许匿名访问，您可以替换`window.location.replace("/")`为应用程序登录页面的路径，例如`window.location.replace("/account/login")`.

通过这项工作，我将解决方案封装在一个函数中以简化事情并避免重复自己：

```
function handleAjaxData($container, data) {
    $container.html(data);
    if ($container.find("#isLoginPage").length > 0) {
        window.location.replace("/");
    }
} 
```

然后我可以在我的 Ajax 调用中使用它，如下所示：

```
$.ajax({
    url: `/mypartialview`,
    type: "GET",
    success: function (data) {
        var $modal = $("#myModal");
        handleAjaxData($modal.find(".modal-content"), data);
        $modal.modal("show");
    }
}); 
```

您显然可以更进一步，将 Ajax 调用本身包含在函数中，但在我的情况下，这将涉及一些复杂的回调，所以我没有打扰。

# sql-server - sql server 关键字段

> ID：10590573
> 
> 赞同：0
> 
> 时间：2012-05-14T20:29:53.367
> 
> 标签：sql-server, tsql

我的 sql server 数据库中有一个表，它是一个由数字组成的关键字段（例如 1-50,000）。有没有办法在输入数据时将该键号插入数据库并从最后一个已知值开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:48:09.747

将您的字段的身份种子值设置为您想要开始的数字

前任。如果您想从 10000 开始，那么您的下一个值将是 10001，

![身份种子](../Images/40c7f15b8af61b9dd75345afa4643581.png)

# sql-server - SQL Server 锁定内存中的页面

> ID：10590576
> 
> 赞同：1
> 
> 时间：2012-05-14T20:30:10.550
> 
> 标签：sql-server

在 Windows 2008 R2 上运行的 SQL Server 2012 x64 标准版是否具有 LPIM（内存中的锁定页面默认打开 - 开箱即用）？如果不是，这是否应该需要打开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:35:29.510

通常不允许 SQL Server 锁定页面。[您必须使用策略编辑器“gpedit.msc”](http://msdn.microsoft.com/en-us/library/ms190730.aspx)授予“锁定内存页面”权限。

如果它有权限，SQL Server 2012[将使用它](http://msdn.microsoft.com/en-us/library/ms178067.aspx)：

> 当具有运行 sqlservr.exe 权限的帐户被授予 Windows“内存中的锁定页”时，SQL Server Lock Pages in Memory 选项在 SQL Server 2012 Standard 版和更高版本的 32 位和 64 位实例中设置为 ON (LPIM) 用户权限

# java - 如何使用从 Java 中的嵌套接口继承的静态方法定义嵌套的静态类？

> ID：10590578
> 
> 赞同：1
> 
> 时间：2012-05-14T20:30:16.380
> 
> 标签：java, interface, static, nested, abstract

我对嵌套类有 Java 问题。

我的第一个类结构如下所示：

```
public class TopClass {

    public void mainMethod() {
        // uses the different "method" methods from 
        // NestedClass-implementing nested classes
    }            

    private interface NestedClass {
        public void method();
    }    

    private class NestedClass1 {
        public void method() {
        }
    }    

    private class NestedClass2 {
        public void method(){
        }
    }    
} 
```

但现在我希望这些`method()`方法是静态的，因为它们应该是主要的。

如果没有将它们放在静态类中，我无法将它们设为静态，但这没问题，我将类设为静态，无论如何它们都应该是静态的。

现在看起来像这样：

```
public class TopClass {

    public void mainMethod() {
        // uses the different "method" methods from 
        // NestedClass-implementing nested classes
    }            

    private static interface NestedClass {
        public void method();
    }    

    private static class NestedClass1 {
        public static void method() {
        }
    }    

    private static class NestedClass2 {
        public static void method(){
        }
    }    
} 
```

但麻烦就开始了。静态方法不能从非静态接口方法正确继承，因为我`This static method cannot hide the instance method from TopClass.NestedClass`在 Eclipse 中收到此消息。

当我将接口方法设为静态时，它给了我这个错误：`Illegal modifier for the interface method method; only public & abstract are permitted`

所以我想到了一个抽象类，并尝试了这个：

```
public class TopClass {

    public void mainMethod() {
        // uses the different "method" methods from 
        // NestedClass-implementing nested classes
    }    

    private static abstract class NestedClass {
        public static abstract void method();
    }    

    private static class NestedClass1 {
        public static void method() {
        }
    }    

    private static class NestedClass2 {
        public static void method(){
        }
    }    
} 
```

但同样，看似抽象的方法不能声明为 static: `The abstract method method in type NestedClass can only set a visibility modifier, one of public or protected`。

离开静态（在抽象类方法中），在 NestedClass1 和 2 中的方法方法上出错：`This static method cannot hide the instance method from TopClass.NestedClass`。

有没有办法声明某种上层结构来覆盖静态方法？

编辑：我实际上试图解决的问题是 Java 无法存储对方法的引用。因此，我让这些类每个人都只有一种方法，但是要将它们存储在 List fe 中，它们必须能够被上层结构“捕获”。我得到了尝试匿名类或枚举的提示，现在就试试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T20:32:17.510

接口和静态不会在一起。完全没有。Java 不支持在静态方法上创建/强加模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:59:42.813

静态方法声明必须始终跟在定义之后。它不能由子类实现。

我认为您只是没有正确解决问题。尝试不同的方法！

*   创建`NestedClass`一个接口`NestedInterface`并将您的不同实现存储为实现此接口的匿名类：

    ```
    public static final NestedInterface firstNested = new NestedInterface() {
        @Override
        public void method() {
            // ...
        }
    }; 
    ```

*   `NestedClass`进行枚举`NestedEnum`并将您的不同实现存储为实现枚举中的抽象方法的枚举值。这仅在您有固定数量的实现可供选择并且您不想接受`NestedClass`来自外部来源的实现时才有效。

    ```
    public enum NestedEnum  {

        FIRST {
            @Override
            public void method() {
                // ...
            }
        };

        public abstract void method();
    } 
    ```

**编辑**：回复您的评论：

> 类本身也是静态的..

`static`在嵌套类的上下文中意味着可以在*没有包含类的实例的情况下实例*化此类。

可以通过实例化常规嵌套类，例如您的第一个示例`TopClass.this.new NestedClass1()`。通常，您只需`new NestedClass1()`在构造函数或实例方法中编写`TopClass`，但在这种冗长的形式中，您可以清楚地看到对`TopClass.this`. 这也可以从 的任何方法中看出`NestedClass1`，因为您可以使用 访问包含类`TopClass.this`。

可以通过实例化静态嵌套类，例如您的第二个示例`new TopClass.NestedClass1()`。再一次，您可以只写`new NestedClass1()`，但详细的形式清楚地表明该构造仅依赖于. 您甚至可以使用相同的代码片段从外部类创建实例，而无需创建实例。`TopClass``TopClass``new TopClass.NestedClass1()``TopClass`

我建议你看看[这个关于内部类和静态嵌套类](https://stackoverflow.com/questions/70324/java-inner-class-and-static-nested-class)的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T20:37:13.623

您的接口/抽象类嵌套的事实与问题无关。
你就是不能。Java 中没有办法强制某些类实现静态方法。只需哭泣并投降并使用实例方法即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T20:37:30.020

`static abstract`是矛盾的。静态方法与其他语言的类方法不同。当您创建一个静态方法时，它会在单个类上运行，它不会被继承或将其实现推迟到子类。

你没有解释为什么你希望这些方法是静态的。如果您希望这些方法由子类定义，那么它们不应该是。

# php - PEAR 错误代码列表

> ID：10590583
> 
> 赞同：0
> 
> 时间：2012-05-14T20:30:50.697
> 
> 标签：php, error-handling, pear

这个问题以前有人问过，但没有回答。PEAR 错误代码的任何地方都有列表吗？

我有一个服务器/客户端应用程序，客户端需要知道服务器可能产生的所有可能的错误消息，所以我需要确保我的客户端正确处理使用 PEAR Mail 包可能引发的所有错误应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:18:55.080

不，没有。获得完整列表的唯一方法是获取`PEAR::raiseError`.

# drupal - 在 MAMP 上安装 Drupal 7 日期 API 时出错

> ID：10590584
> 
> 赞同：0
> 
> 时间：2012-05-14T20:30:59.857
> 
> 标签：drupal, error-handling, installation, localhost, mamp

当我在 localhost 上安装这个 Drupal 7 设置时。

我收到此错误：

```
 An AJAX HTTP error occurred. HTTP Result Code: 200 Debugging information follows. Path:      http://localhost:8888/drupal-testing/docroot-syn/install.php?profile=localvox&locale=en&id=1&op=do StatusText: OK ResponseText: Home | Drupal @import url("http://localhost:8888/drupal-testing/docroot-syn/modules/system/system.messages.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/modules/system/system.base.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/modules/system/system.theme.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/modules/system/system.menus.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/modules/comment/comment.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/sites/all/modules/contrib/date/date_api/date.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/sites/all/modules/contrib/date/date_popup/themes/datepicker.1.7.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/modules/field/theme/field.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/modules/node/node.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/modules/user/user.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/sites/all/modules/contrib/views/css/views.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/modules/system/system.admin.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/modules/system/system.maintenance.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/sites/all/modules/contrib/ctools/css/ctools.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/themes/seven/reset.css?0"); @import url("http://localhost:8888/drupal-testing/docroot-syn/themes/seven/style.css?0"); Home Installation tasksChoose profile(done)Choose language(done)Verify requirements(done)Set up database(done)Install profile(active)Configure siteFinished Warning message The Date API requires that you set up the site timezone and first day of week settings and the date format settings to function correctly. Attempt to create a field of unknown type searchrank. 
```

问题是什么？

我尝试增加 php.ini；它不会改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:12:54.070

错误并没有告诉我太多，但它要么是您的本地主机启动的限制，要么是一些 AJAX 相关模块导致一些混淆。
尝试将您的 Drupal 导出到某个服务器或其他一些本地主机模拟器。如果错误仍然存​​在，请尝试更新模块。更新 ctools 模块，因为它非常重要，jet 最近有点乱。
确实这是一个问题，您可以转到模块的问题页面并在那里发布。

# c - 如何链接调用多个make文件产生的不同文件夹中的文件？

> ID：10590593
> 
> 赞同：1
> 
> 时间：2012-05-14T20:31:36.617
> 
> 标签：c, linker, makefile

我有以下制作文件

```
all:    XmlNode.o y.tab.o   y.tab.o lex.yy.o
    gcc -g -o prog y.tab.o lex.yy.o XmlAttributeNode.o XmlNode.o -ll -ly -lm

XmlNode.o:  
    cd XmlNode; make
y.tab.o: y.tab.c
    gcc -g -c y.tab.c
lex.yy.o: lex.yy.c
    gcc -g -c lex.yy.c
y.tab.c: LexYacc/prog1.y
    bison -y -dv LexYacc/prog1.y
lex.yy.c: LexYacc/prog1.l
    lex -l LexYacc/prog1.l

clean:
    rm -f y.tab.* lex.yy.* *.o prog 
```

`XmlAttributeNode.o`并`XmlNode.o`在`XmlNode`文件夹中制作，因此出现错误

```
gcc: XmlAttributeNode.o: No such file or directory
gcc: XmlNode.o: No such file or directory 
```

我查看了以下问题[1](https://stackoverflow.com/questions/1139271/makefiles-with-source-files-in-different-directories)、[2](https://stackoverflow.com/questions/10044433/using-a-make-file-to-compile-files-in-separate-directories)和[3](https://stackoverflow.com/questions/341387/adding-a-directory-for-the-headers-in-a-makefile)，但我似乎无法找到如何获取由 XmlNode.o 生成的所有 .o 文件的列表，因此 1) 我不必键入它们手和 2) 包含正确的路径，因此 gcc 可以找到 .o 文件。所以是这样的：

```
 XmlNode.o: 
    cd XmlNode; XmlNodeList = .o files from this make; XmlPath = `pwd`; 
```

接着：

```
 all:   XmlNode.o y.tab.o   y.tab.o lex.yy.o
    gcc -g -o prog y.tab.o lex.yy.o XmlPath/XmlNodeList -ll -ly -lm 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:51:15.953

假设评论中的信息，这至少会起作用。

```
all:    XmlNode.o y.tab.o   y.tab.o lex.yy.o
    gcc -g -o prog y.tab.o lex.yy.o XmlNode/XmlAttributeNode.o XmlNode/XmlNode.o -ll -ly -lm

XmlNode/XmlAttributeNode.o XmlNode/XmlNode.o:  
    cd XmlNode; make
y.tab.o: y.tab.c
    gcc -g -c y.tab.c
lex.yy.o: lex.yy.c
    gcc -g -c lex.yy.c
y.tab.c: LexYacc/prog1.y
    bison -y -dv LexYacc/prog1.y
lex.yy.c: LexYacc/prog1.l
    lex -l LexYacc/prog1.l

clean:
    rm -f y.tab.* lex.yy.* *.o prog; cd XmlNode; make clean 
```

# cuda - 如何最好地将大量字符数组传输到 GPU？

> ID：10590595
> 
> 赞同：2
> 
> 时间：2012-05-14T20:31:41.993
> 
> 标签：cuda, gpu, thrust

我是 CUDA 新手，正在尝试对大量数组进行一些处理。每个数组是一个大约 1000 个字符的数组（不是字符串，只是存储为字符），最多可以有 100 万个字符，因此要传输大约 1 gb 的数据。这些数据已经全部加载到内存中，并且我有一个指向每个数组的指针，但我认为我不能依赖所有数据在内存中的顺序，所以我不能一次调用就全部传输。

我目前第一次尝试使用推力，并基于[此消息](http://groups.google.com/group/thrust-users/msg/4d3cd3a6d1fc2041)的解决方案 ...我使用分配所有内存的静态调用创建了一个结构，然后每个单独的构造函数复制该数组，我有一个转换调用，它接收带有指向设备数组的指针的结构。

我的问题是这显然非常慢，因为每个数组都是单独复制的。我想知道如何更快地传输这些数据。

在[这个问题](https://stackoverflow.com/questions/7846832/memset-in-cuda-that-allows-to-set-values-within-kernel)中（这个问题大部分是不相关的，但我认为用户正在尝试做类似的事情）talonmies 建议他们尝试使用 zip 迭代器，但我看不出这将如何帮助传输大量数组。

我在写这个问题时也刚刚发现了 cudaMemcpy2DToArray 和 cudaMemcpy2D ，所以也许这些就是答案，但我没有立即看到它们是如何工作的，因为它们似乎都没有将指向指针的指针作为输入......

欢迎任何建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:22:32.110

一种方法是按照 marina.k 的建议，仅在需要时对传输进行批处理。由于您说每个数组仅包含大约 1000 个字符，因此您可以将每个字符分配给一个线程（因为在 Fermi 上，我们可以为每个块分配 1024 个线程）并让每个数组由一个块处理。在这种情况下，您可以在一次调用中传输一个“回合”的所有数组 - 您可以使用 FORTRAN 样式，在其中创建一个巨大的数组并获取“第三个”1000 字符数组的第 5 个元素去：

```
third_array[5] = big_array[5 + 2*1000] 
```

这样前 1000 个字符数组构成 big_array 的前 1000 个元素，第二个 1000 个字符数组构成 big_array 的后 1000 个元素，等等。在这种情况下，您的字符将在内存中是连续的，您可以移动要处理的集合，只需在一个 memcpy 中启动一个内核即可。然后，一旦启动一个内核，就在 CPU 端重新填充 big_array 并将其异步复制到 GPU。

在每个内核中，您可以简单地处理 1 个块内的每个数组，以便块 N 处理第 (N-1) 个元素，直到 d_big_array 的第 N 个元素（您将所有这些字符复制到其中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:55:54.927

试试异步，你可以将同一个作业分配给不同的流，每个流处理一小部分日期，同时进行传输和计算
这里是代码：

```
cudaMemcpyAsync(
    inputDevPtr + i * size, hostPtr + i * size, size, cudaMemcpyHostToDevice, stream[i]
);
MyKernel<<<100, 512, 0, stream[i]>>> (outputDevPtr + i * size, inputDevPtr + i * size, size);
cudaMemcpyAsync(
    hostPtr + i * size, outputDevPtr + i * size, size, cudaMemcpyDeviceToHost, stream[i]
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T20:29:30.423

你试过固定记忆吗？这可以在某些硬件配置上提供相当大的加速。

# javascript - Raphael JS - 通过 id 获取元素，将该元素移动到顶部

> ID：10590598
> 
> 赞同：2
> 
> 时间：2012-05-14T20:31:52.383
> 
> 标签：javascript, raphael

我对 Raphael JS 遗漏了一些明显的东西。我是 a) 循环遍历数组，b) 从值中绘制圆圈，c) 创建文本叠加层，以及 d) 在 Raphael 中设置侦听器。

我正在努力解决的是听众的行动。具体来说，如何通过 id 获取元素，然后将其移至顶部。

来源 JSFiddle [http://jsfiddle.net/NPks2/3/](http://jsfiddle.net/NPks2/3/)

我希望这会起作用，但事实并非如此。你能帮我吗？

```
// this happening while looping through an object
var p = paper.circle(x_coord, y_coord, diameter)
    .data("i", i)
    .attr({"fill": "90-"+fillColorStart+":5-"+fillColorEnd+":95","fill-opacity": 0.5})
    .glow({color: "#4b4b4b", width: 7})

    paper.text(x_coord, y_coord, opportunityTitle)
    .data("text_id", i+"text")
    .attr({ "font-size": 16, "font-family": fontFamily, "fill":fontColor});

    paper.text(x_coord, title_y_coord, ideasCount)
    .attr({ "font-size": 27, "font-family": fontFamily, "fill":fontColor});

// loop is over, listeners are waiting
paper.forEach(function(element) {
    element.mouseover(function() {
            c = elem_id = this.data("i");    
        t = p.getById(elem_id"+text);

        c.toFront();
        t.toFront();
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:28:07.647

您需要添加：

```
this.toFront(); 
```

到你的 element.mouseover 函数：

我更新了你的[小提琴](http://jsfiddle.net/NPks2/4/)：

# ios - 是否让用户确认 UIActionSheet 操作是糟糕的设计？

> ID：10590601
> 
> 赞同：0
> 
> 时间：2012-05-14T20:32:01.880
> 
> 标签：ios, user-interface, uiactionsheet

我正在使用 a`UIActionSheet`让用户选择多个操作之一。其中一项操作是“删除”。但是，用户可能会错误地点击删除。

我是否应该重新考虑将“删除”操作与此列表中的其他操作混合在一起，或者有什么方法可以让用户确认选择是正确的？例如一个新`UIActionSheet`的问题“你确定要删除吗？是/否”，或者这会被认为是糟糕的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:46:49.223

我会考虑将删除操作作为一个单独的按钮，然后将操作表作为确认。

如果您以照片应用程序为例，删除操作不在操作菜单中，而是它自己的按钮，然后要求使用操作表进行确认。这与其他应用程序相同，例如 iMovie 和 Pages。

用户可能不喜欢必须按下 2 个操作表，但如果他们不小心按下它会更加恼火。如果您还没有在操作表中将删除选项设为红色，您可以帮助防止事故发生。

这也取决于要删除的内容，如果您在设置菜单中擦除手机，则会询问您两次。但是删除诸如文本之类的内容根本不会得到确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:45:14.453

取决于他删除的内容是否重要。如果它很重要，您应该明确地让用户重新确认。

告诉我一个操作系统，例如格式化硬盘不会要求您重新确认... :-)

# extension-methods - IQueryable vs IEnumerable...扩展方法

> ID：10590603
> 
> 赞同：0
> 
> 时间：2012-05-14T20:32:04.990
> 
> 标签：extension-methods, ienumerable, iqueryable, asqueryable

说真的，我必须错过一些简单的东西。任何帮助将不胜感激。

下面是场景： 1) 创建一个名为 DoSomething 的 IQueryable 扩展方法，并带有适当的签名（IQueryable、int x、int y）。2) 创建一个名为 DoSomething 的 IEnumerable 扩展方法，使用与 IQueryable 相同的签名，除了接受/返回 IEnumerable 而不是 IQueryable。3) 在 IEnumerable 扩展方法中，将 enumerable 转换为 Queryable (AsQueryable) 并尝试调用 IQueryable.DoSomething 方法。

出于某种原因，上述方案似乎对 IEnumerable 扩展方法而不是 IQueryable 进行了递归调用。我不明白为什么。

我了解 IQueryable 扩展了 IEnumerable；但是，.NET 扩展似乎可以检测并正常工作。例如， variable.AsQueryable().Take(1) 将至少通过智能感知（和 ReSharper）调用 Queryable 扩展，而不是 Enumerable 扩展。当我自己编写时，它似乎不起作用，并创建了一个无限循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:55:44.000

我相信答案是它就像你描述的那样工作得很好。这是我的小 LINQPad 测试程序。诚然，这种情况比您描述的情况稍微简单一些，因为我返回 void 并且不带任何参数。

```
void Main()
{
    int[] numbers = { 1, 2, 3, 4, 5 };
    numbers.AsQueryable().DumpLast<int>();
    numbers.DumpLast<int>();
}

public static class TestExtensions
{
    public static void DumpLast<T>(this IQueryable<T> list)
    {
        list.Last<T>().Dump();
    }

    public static void DumpLast<T>(this IEnumerable<T> list)
    {
        list.AsQueryable().DumpLast<T>();
    }
} 
```

输出：

```
5
5 
```

如果你能提供一个更具体的例子，那么我们可能会发现一些导致问题的东西。

# c# - 从子类中获取属性值并将其添加到目标对象c#

> ID：10590605
> 
> 赞同：1
> 
> 时间：2012-05-14T20:32:20.553
> 
> 标签：c#, propertyinfo

我有一个静态方法，它有两个参数，一个是包含所有信息的源对象，另一个是我想要将所有值传输到的目标对象。

问题是该类具有嵌套类，我不知道如何将其添加到`dest`对象中。

我感谢我能得到的所有帮助。

调用该方法如下所示：

```
Automapper(annonsDto, new Annons(){ 
            Model = new Model()
                 {Company = new Company()}, 
                         User = new Users()});

private static Object Automapper(Object source, Object dest)
    {
        PropertyInfo[] sourcePropertyInfos = source.GetType().GetProperties();
        Array.Sort(sourcePropertyInfos, delegate(PropertyInfo propertyInfo1, PropertyInfo propertyInfo2)
        {
            return propertyInfo1.Name.CompareTo(propertyInfo2.Name);
        });

        foreach (PropertyInfo sourcePropertyInfo in sourcePropertyInfos)
        {
            if (sourcePropertyInfo.PropertyType.IsClass)
            {
                if (sourcePropertyInfo.PropertyType.FullName.ToLower().Contains("xXxXx"))
                {
                    var nestedClass = sourcePropertyInfo.GetValue(source, null);
                    Automapper(nestedClass, dest);
                    continue;
                }
            }

            dest = TransferPropValue(sourcePropertyInfo.Name, source, dest);
        }

        return dest;
    }

    private static Object TransferPropValue(String targetName, Object sourceObj, Object destObj)
    {
        if (sourceObj == null)
        {
            return null;
        }

        Type destType = destObj.GetType();
        PropertyInfo destInfo = destType.GetProperty(targetName);

        Type sourceType = sourceObj.GetType();
        PropertyInfo sourceInfo = sourceType.GetProperty(targetName);
        if (sourceInfo == null) { return null; }

        try
        {
            var sourceValue = sourceInfo.GetValue(sourceObj, null);
            destInfo.SetValue(destObj, sourceValue, null);
        }
        catch (Exception) { }

        return destObj;
    } 
```

# jquery - 用于旋转元素的 jQuery 插件

> ID：10590607
> 
> 赞同：0
> 
> 时间：2012-05-14T20:32:24.550
> 
> 标签：jquery, jquery-plugins, html, rotation

```
<div id="rotate">
  <img .. />
  <img .. />
</div> 
```

是否可以仅旋转父`div`级（`$("#rotate").rotate()`）并且其所有子级也将随之旋转？如果是，那么请建议可以为我执行此操作的插件，如果不是，请建议解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:34:09.357

你可以试试这个

```
$("#rotate, #rotate img").rotate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:32:53.380

您真正需要做的就是在元素上设置样式：

```
$('#rotate').css('-webkit-transform', 'rotate(45deg)'); 
```

# android - UnsatisfiedLinkError AudioRecordNew

> ID：10590611
> 
> 赞同：1
> 
> 时间：2012-05-14T20:32:46.247
> 
> 标签：android, audio, java-native-interface

尝试使用[此处](http://www.devdaily.com/java/jwarehouse/android/core/java/android/speech/srec/index.shtml)的代码 我试图合并这两个类，以便最终得到一个 ulaw 音频数据的 inputStream。所以我像这样编辑了 UlawEncoderInputStream：

```
private MicrophoneInputStream micIn;
public UlawEncoderInputStream() {
    mMax = 0;
    try {
            micIn = new MicrophoneInputStream(8000, 1);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
} 
```

然后尝试使用那个 UlawEncoderInputStream：

```
while(transmittingAudio) {
                        if(micInStream.available()>0) {
                            //              byte[] data = new byte[audioDump.available()];
                            int bytesRead = micInStream.read(data);
                            os.write(data,0,bytesRead);
                            os.flush();
                            //              ca.transmitAxisAudioPacket(data);
//                          System.out.println("read "+bytesRead);
                        } 
```

但是，MicrophoneInputStream 底部的 JNI 本机语句似乎存在问题。

```
private static native int AudioRecordNew(int sampleRate, int fifoDepth); 
```

错误：

> 05-14 14:46:48.544: W/dalvikvm(28658): 找不到本地 Lcom/avispl/nicu/audio/MicrophoneInputStream;.AudioRecordNew (II)I 的实现
> 
> 05-14 14:46:48.552: W/dalvikvm(28658): threadid=10: 线程退出未捕获异常 (group=0x40018560)
> 
> 05-14 14:46:48.552：E/AndroidRuntime（28658）：致命异常：线程 12
> 
> 05-14 14:46:48.552: E/AndroidRuntime(28658): java.lang.UnsatisfiedLinkError: AudioRecordNew
> 
> 05-14 14:46:48.552：E/AndroidRuntime（28658）：在 com.avispl.nicu.audio.MicrophoneInputStream.AudioRecordNew（本机方法）
> 
> 05-14 14:46:48.552: E/AndroidRuntime(28658): 在 com.avispl.nicu.audio.MicrophoneInputStream.(MicrophoneInputStream.java:27)
> 
> 05-14 14:46:48.552: E/AndroidRuntime(28658): 在 com.avispl.nicu.audio.UlawEncoderInputStream.(UlawEncoderInputStream.java:111)
> 
> 05-14 14:46:48.552: E/AndroidRuntime(28658): 在 com.avispl.nicu.audio.AudioTransmitter.run(AudioTransmitter.java:66)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:24:31.737

对不起，如果这远低于您提出的问题的水平，我很累，我发现您的问题很难理解：

如果您尝试调用本机方法`AudioRecordNew`

您将需要`static { System.loadLibrary("cLibraryName"); }`加载您使用`android-ndk`\ `Android.mk`\构建的本机库`Application.mk`

并且您的`c++`文件（和`h`文件）将需要这样的方法：

```
JNIEXPORT void JNICALL Java_com_company_package_JavaFile_AudioRecordNew(JNIEnv* env, jobject obj, jint arg0, jint arg1)     
{

} 
```

除非您有一个执行上述所有操作的本机库，否则您会收到一条错误消息，告诉您本机库不存在。（这看起来像您在这里遇到的问题，您没有示例中使用的 java 本机库）。

如果您可以获得本机库的源代码，但是您可以按照上述方法构建库的 android 版本并继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:28:51.110

我相信它现在不受支持，请参见[此处](http://groups.google.com/group/android-developers/browse_thread/thread/1555a9685054aecb)

> 很抱歉重复，但正如 Dianne 所说：“此时：SDK 中不支持本机代码。使用它可能会导致您的应用程序在交付手机更新时中断。使用 C++ API 肯定会导致你在未来打破。

# perl - 如何使用 Perl 发出 HTTP GET 请求？

> ID：10590614
> 
> 赞同：-3
> 
> 时间：2012-05-14T20:33:07.407
> 
> 标签：perl, http, http-get

> **可能重复：**
> [如何从 Perl 发出 HTTP GET 请求？](https://stackoverflow.com/questions/1556724/how-can-i-make-an-http-get-request-from-perl)

我正在尝试通过 perl 检索 HTML 页面的整个源代码，以便稍后从中解析一些数据。

最简单的方法是什么？

（最简单的意思是添加新库的开销最小）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:37:39.493

[LWP::Simple](http://search.cpan.org/perldoc/LWP%3a%3aSimple)是连接网站以获取源信息的好方法。

```
use strict;
use warnings;
use LWP::Simple;

my $url = 'http://www.example.com';
my $content = get $url or die "Unable to get $url\n";
print $content; 
```

# css - 在客户端运行的 LESS 的最低浏览器版本

> ID：10590615
> 
> 赞同：0
> 
> 时间：2012-05-14T20:33:07.610
> 
> 标签：css, less

在客户端运行[LESS](http://lesscss.org)的每个浏览器（IE、Chrome 和 Firefox）的最低版本是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:45:00.987

根据[http://blog.montylounge.com/2011/07/31/one-thing-about-lessjs/](http://blog.montylounge.com/2011/07/31/one-thing-about-lessjs/)，它是 IE6+，尽管他们没有指定支持哪些版本的 Chrome 和 Firefox。我会假设足够远，它不应该给你带来任何问题。

# mysql - 如何在mysql中使用范围值搜索

> ID：10590621
> 
> 赞同：0
> 
> 时间：2012-05-14T20:33:31.557
> 
> 标签：mysql

我被困在范围搜索查询上。请看下面的例子：

```
SELECT * FROM product where status='A' and subcat_id=5 AND product.price < 50 AND  product.price BETWEEN 50 AND 100 AND category = "male" 
```

在上面的示例中，它不返回低于 50 的记录，但它们在数据库中。

如果我尝试如下第二个示例：

```
SELECT * FROM product where status='A' and subcat_id=5 AND product.price < 50 OR  product.price BETWEEN 50 AND 100 AND category = "male" 
```

它返回所有不属于男性类别但小于 50 的记录

最后，我想获得范围小于 50 或介于 50 到 100 之间但仅适用于男性类别的记录。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:35:42.003

您需要更多`()`的来对您的条件进行分组。如果我理解正确，您要么想要`product.price < 50`任何其他比赛，要么`product.price BETWEEN 50 AND 100`只想要男性。在这种情况下，将这两个条件与 分组`()`。

```
SELECT * 
FROM 
  product
where 
  status='A' 
  and subcat_id=5
  AND (product.price < 50 OR  (product.price BETWEEN 50 AND 100 AND category = "male")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:37:29.623

`AND`的优先级高于`OR`。您的查询解释如下：

```
SELECT col1, col2, ..., coln
FROM product
WHERE (status='A' AND subcat_id=5 AND product.price < 50) OR
      (product.price BETWEEN 50 AND 100 AND category = 'male') 
```

您需要在适当的位置插入括号以正确地对术语进行分组。剩下的唯一问题就是把它们放在哪里。

我想你的意思是：

```
SELECT col1, col2, ..., coln
FROM product
WHERE status='A'
AND subcat_id=5
AND (
    product.price < 50 OR 
    (product.price BETWEEN 50 AND 100 AND category = 'male')
) 
```

这将显示所有类别的 50 岁以下的产品，以及男性类别的 50 到 100 岁的产品。

# javascript - Android WebView：使用脚本标签从我的资产文件夹中加载外部 javascript 文件

> ID：10590623
> 
> 赞同：2
> 
> 时间：2012-05-14T20:33:42.307
> 
> 标签：javascript, android, html, android-webview, external-js

我有一个具有 webview 的 android 项目。此 webview 加载存储在我的资产文件夹中的静态 html 文件。在我的资产文件夹中还有一个第 3 方 javascript 库（范围很广）。我的 html 文件头部的脚本标签中有一些 javascript。该 javascript 引用了 rangy 库中的方法和对象。我让我的 html 文件通过脚本标签引用 rangy。当我尝试使用函数和方法时，我得到一个错误，内容如下：

```
 Cannot call method '[any method from rangy library]' of 
    undefined 
```

以下是相关的代码片段。

这是我包括范围的地方：

```
<html lang="en">
<head>
    <title> </title>
    <meta charset="utf-8">
    <style type="text/css">
    </style>
    <script type="text/javascript" src="rangy.js"></script>
    <script type="text/javascript" src="rangy-serializer.js"></script>
    <script type="text/javascript">

    //...My native js

    </script>
</head> 
```

这是 rangy 库的一个非常广泛的描边。我只在这篇文章中包含我认为与我的问题相关的 hte 库部分：

```
window['rangy'] = (function() {

//This is all the code for rangy

}); 
```

这是我的原生 js 中引用 rangy 的部分。最后的 catch 块将错误打印到 html 文档的正文中，因为默认情况下 android webview 不提供此信息：

```
jsHandler.restoreSelection = function(selectionDetails) {

        try{
            window.document.body.style.background="yellow";
            window.rangy.deserializeSelection(decodeURIComponent(selectionDetails.replace(/\s+$/, "")));
            window.document.body.style.background="green";
        }
        catch(err){
            window.document.body.innerHTML = err.message;
        } 
    }; 
```

我的应用程序中有一个按钮，它将触发 jsHandler.restoreSelection() 函数。当我按下该按钮时，背景从白色变为黄色，但随后该命令捕获异常并将正文文本替换为我在顶部发布的错误消息。我的应用程序设置有什么问题？从我的资产文件夹中的 html 文件中引用外部 js 文件的正确方法是什么？（注意：我确实打开了 javascript）。

先谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:39:22.987

经过一天的谷歌搜索后，我发现这个页面解决了我的问题：[使用自定义 CSS 在 WebView 中渲染 HTML](https://stackoverflow.com/questions/4950729/rendering-html-in-a-webview-with-custom-css) 我使用 loadDataWithBaseUrl 将数据传递到 webview，但我将 baseurl 作为 null 传递，因为我没有不知道怎么处理它。相反，我将传递对我项目的资产目录的引用。

# gwt - GWT 问题。如何实现这种 Tab Panel 或 Docklayout Panel

> ID：10590625
> 
> 赞同：0
> 
> 时间：2012-05-14T20:33:50.790
> 
> 标签：gwt, widget, panel, tabpanel, docklayoutpanel

我有一个复杂的 GWT 问题。希望有人能给我一些建议。

我想创建一个如下所示的面板（左侧的内容，右侧中间的一些文本（选项卡），或者右侧的顶部。（见第一张图片）

首先，我考虑了标签面板。但点击面板顶部只有水平选项卡。因此，除非我使用第三方库，否则这将不起作用。

然后我厌倦了docklayoutpanel。但也有一些问题。我把内容放在中间，在东边放了一个带有一些文字的标签。选项卡的高度将与内容的高度相同。（见第二张图）。我不喜欢这个。我不希望出现空白。

那么有人对如何实现这种面板有好的想法吗？

非常感谢。

问候！

第一张图片

```
|-------------------------|

|------- content ---------|---------|

|-------------------------|---tab---|

|-------------------------|---------|

| ------------------------| 
```

* * *

第二张图片

```
|-------------------------|white space|

|------- content ---------|-----------|

|-------------------------|----tab----|

|-------------------------|-----------|

| ------------------------|white space| 
```

另外，对于第二种方法，我尝试将docklayoutpanel的东部区域设置为透明。但我不知道该怎么做。而且我不确定它是否会清除空白区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:15:06.077

将选项卡放在带有 的“东”面板中`height: 100%`，并为其提供所需的背景颜色。将主要内容放在“中心”面板中。不要使用“北”或“南”。

如果您希望选项卡垂直居中，那么最简单的方法是将 VerticalPanel 与`verticalAlignment="MIDDLE"`.

```
<ui:style>
  .centerPanel { background-color: royalblue; }
  .eastPanel { background-color: lightblue; width: 100%; height: 100%; }
</ui:style>

<g:DockLayoutPanel unit="EM">

  <g:center>
    <g:FlowPanel addStyleNames="{style.centerPanel}">
      <g:Label>Content</g:Label>
    </g:FlowPanel>
  </g:center>

  <g:east size="8">
    <g:VerticalPanel addStyleNames="{style.eastPanel}" 
                   verticalAlignment="MIDDLE">
      <g:FlowPanel>
        <g:Label>Tab1</g:Label>
        <g:Label>Tab2</g:Label>
      </g:FlowPanel>
    </g:VerticalPanel>
  </g:east>

</g:DockLayoutPanel> 
```

结果如下所示：

![在此处输入图像描述](../Images/a8f04fa4068df13d12973fe245ba1a56.png)

# excel - 使用 OleDB/Powershell 从 Excel 电子表格的任何位置获取 DataTable 值

> ID：10590628
> 
> 赞同：0
> 
> 时间：2012-05-14T20:34:00.030
> 
> 标签：excel, powershell, oledb

我有一个简单的业务需求来设计一个“名册”电子表格，该电子表格可以由 powershell 脚本读取，以提取下游流程的数据。该电子表格有一些标题，例如 FirstName、LastName、Company、StartDate。这些标头从 A1 开始并继续到 J1。电子表格是 2007 (xlsm)，包含 1 个带有格式化表格 (DataTable?) 的工作表。DataTable 的右侧是一些字段，例如 NumberOfRecords 和 ContactInfo。

到目前为止，只要 DataTable 是第一列/行，powershell 脚本就可以正常工作。如果我将 NumberOfRecords & ContactInfo 字段切换到上方或左侧，那么它会打乱整个记录读取顺序。

以下是当前脚本

```
function getData {
$excelPath = "c:\temp\Roster.xlsm"
$global:roster = @()

$conn = new-object System.Data.OleDb.OleDbConnection
$conn.ConnectionString = 'Provider=Microsoft.ACE.OLEDB.12.0;Data Source='+$excelPath+';Extended Properties="Excel 12.0 Xml;HDR=YES";'

$cmd = new-object System.Data.OleDb.OleDbCommand("SELECT * FROM [Roster$] WHERE [Valid] = true",$conn)
$conn.open()

$reader = $cmd.ExecuteReader()
while ($reader.Read())
{
    $user = new-object object
    $user | add-member -MemberType NoteProperty -Name "FirstName" -Value $reader.item(1).ToString()
    $user | add-member -MemberType NoteProperty -Name "MName" -Value $reader.item(2).ToString()
    $user | add-member -MemberType NoteProperty -Name "LastName" -Value $reader.item(3).ToString()
    $user | add-member -MemberType NoteProperty -Name "Company" -Value $reader.item(6).ToString()
    $user | add-member -MemberType NoteProperty -Name $reader.GetName(8) -Value $reader.item(8).ToString()
    $global:roster += $user
}

$conn.close()

$global:roster | out-gridview
#
} 
```

有什么办法可以直接引用这个 DataTable 吗？我知道在 Excel 2010 中将数据格式化为表格时，您可以为其命名（默认 Table1）。我可以做类似的事情`"SELECT Table1.* FROM [Roster$] WHERE [VALUE] = true"`吗？

我的目标是提供一个格式良好的电子表格，通过 Powershell 从格式化表中提取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T19:55:25.477

我找到了一个解决方案，但它需要使用 COM 而不是 OLEDB 或 ADO。我无法使用 OLE 在线找到任何解决方案来调用命名对象。这个解决方案要好一些，因为我可以在工作表中的任何位置安排我的 DataTable，但是我不太喜欢它，因为它需要安装 Office，但基本上我可以通过创建 Excel 对象来调用对命名表的引用和然后在 ActiveSheet 上调用它的 ListObjects。这将返回包含所有列/行/范围的 DataTable。然后我需要做的就是遍历每一行和每一列来获取数据。

```
$excel = new-object -ComObject Excel.Application
$tmp = $excel.Workbooks.Open('c:\temp\Roster.xlsm')
$table = $excel.ActiveSheet.ListObjects | where-object { $_.DisplayName -eq "MyNamedRange" }    
$rows = $table.ListRows 
```

# facebook - Facebook 支付对话不起作用。无法处理您的付款

> ID：10590637
> 
> 赞同：0
> 
> 时间：2012-05-14T20:34:34.280
> 
> 标签：facebook, dialog, payment

我尝试为 facebook 配置应用程序，但在使用 facebook 支付功能时遇到问题。JS SDK 给我答案。

“抱歉，我们在处理您的付款时遇到了问题。您还没有为这笔交易付费。请重试。”

我上传了截图，包含所有信息。

错误 [http://screencast.com/t/PoSAVUi4](http://screencast.com/t/PoSAVUi4) 我的代码 [http://screencast.com/t/evS1DzvIcBlC](http://screencast.com/t/evS1DzvIcBlC)脸书应用 程序设置 [http://screencast.com/t/bh2oAjolV0zU](http://screencast.com/t/bh2oAjolV0zU) 信用 设置[http://screencast.com/t /i2vocbXftLA](http://screencast.com/t/i2vocbXftLA)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:50:33.717

您的回调会立即重定向到[http://www.local.com](http://www.local.com) - 请先检查一下 - 如果 Facebook 无法正确访问您的回调，它将无法正常工作

# c# - 在 C++ 中通过 DirectShow 使用 C# UserControl 中的 HWND 的示例

> ID：10590642
> 
> 赞同：0
> 
> 时间：2012-05-14T20:35:19.500
> 
> 标签：c#, c++, directshow, command-line-interface

有没有人有任何简单的例子来说明如何为 C++ 代码提供一个可用于从 C# UserControl 进行 DirectShow 渲染的窗口？

我目前能够创建一个单独的并通过 WS_POPUP 窗口渲染到一个窗口，并将其大小/位置与我为 WPF 控件上的视频窗格保留的现有控件窗口匹配。

一旦我尝试使窗口成为 WPF 控件的子窗口或在新窗口或现有窗口上设置 WS_CHILD，一切都会停止渲染，并且我没有收到任何错误来解释正在发生的事情。

理想情况下，我可以将现有的 HWND 从 C# 传递到 C++/DirectShow 类并按原样使用它。

附言

在您问“为什么不...做一些不同的事情”之前，我需要从 C++ 控制 DirectShow，并且必须通过 C# (WPF) 控件显示结果。我无法控制这些情况。

C#/WPF（控制保留）<---> C++/CLI <---> C++/HWND/DirectShow

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:18:41.670

实现这一点的最佳方法是在无窗口模式下使用 VMR。以下代码片段说明了这一点（这是用于工作代码。我已经删除了错误检查等，但应该给你一个想法）：

```
 pVMRConfig->SetRenderingMode(VMRMode_Windowless);
    m_VMR->QueryInterface(IID_IVMRWindowlessControl9, (void**)&pVMRWindowlessControl);

    //displayWnd is what you pass in from your C# app
    pVMRWindowlessControl->SetVideoClippingWindow(displayWnd); 
    RECT rcDest;
    GetClientRect(displayWnd, &rcDest); 
    hr = pVMRWindowlessControl->SetVideoPosition(NULL, &rcDest); 
```

# git - Git 不确定性 - 自定义，但能够引入上游更改？

> ID：10590644
> 
> 赞同：3
> 
> 时间：2012-05-14T20:35:27.653
> 
> 标签：git

我已经设置了[phabricator 。](http://phabricator.org)作为 git 的相对绿色，确保我可以拥有自己的配置文件（可能还有其他文件中的一些 hack）与来自上游的内容共存的理智/正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:44:39.317

将您的更改保存在单独的分支上。假设您跟踪分支中的上游更改`vendor`，并且您在`master`分支上工作。然后你会做这样的事情来引入上游更新：

*   切换到`vendor`分支：

    ```
    git checkout vendor 
    ```

*   拉入新的更新：

    ```
    git pull 
    ```

*   切换到您的`master`分支：

    ```
    git checkout master 
    ```

*   合并更改：

    ```
    git merge vendor 
    ```

*   修复冲突并提交。

进入更多细节......假设您的上游存储库是 `http://github.com/spiffy/project.git`，并且您想要跟踪`master` 分支。克隆存储库：

```
$ git clone http://github.com/spiffy/project.git
$ cd project 
```

您想跟踪分支中的上游更改并在`vendor`分支中做自己的工作`master`。首先将现有 `master`分支重命名为`vendor`：

```
$ git branch -m master vendor 
```

这将保留操作设置的配置`clone`：

```
$ git config --get-regexp 'branch.vendor.*'
branch.vendor.remote origin
branch.vendor.merge refs/heads/master 
```

现在创建你的`master`分支：

```
$ git checkout -b master 
```

并拥有它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:51:47.243

最简单的方法是确保这些是不同的文件，并且您的本地内容被 .gitignore 引用。除非有这种能力，否则您需要在每次提交时排除您的 hack。

# floating-point - 试图理解浮点运算

> ID：10590648
> 
> 赞同：0
> 
> 时间：2012-05-14T20:35:36.680
> 
> 标签：floating-point

所以我试图用尾数和指数等来理解浮点运算，但发现它令人困惑。

我得到了一个练习题，但不知道哪个答案是正确的：

***假设您有 5 位尾数 m、2 位指数 e 和 45 个忽略符号的偏差。什么数可以表示为：m= 03456，指数 e=41？***

我最初的猜测是这是 3456*10^(41-45)，即 3.456，但我是删除 0 还是保留它，在这种情况下为 0.3456？

任何有助于消除这种混乱的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:48:35.727

一个格式良好的浮点数通常应该有一个非零的前导数字（除非它被非规范化，这不是因为有偏差的指数是非零的）。所以你的尾数 03456 是可疑的。

我认为在基数 10 中引入浮点数是一个坏主意，因为它引入了二进制中不存在的复杂性。首先学习二进制，然后是浮点。

# objective-c - 一个在 GC 下运行良好但在 ARC 中开始崩溃的简单代码

> ID：10590649
> 
> 赞同：2
> 
> 时间：2012-05-14T20:35:40.263
> 
> 标签：objective-c, cocoa, memory-management, automatic-ref-counting

我有以下简单的“检查我的应用程序是否设置为在登录时启动”代码。它在垃圾收集下运行良好。但是，由于我开始使用 ARC（并根据需要插入“ `__bridge`”），代码开始随机且不可预测地崩溃。根据堆栈跟踪，代码在某些`CFRelease`. 任何想法可能导致在 ARC 下发生这种情况？

```
- (BOOL)loginItemExists
{
  NSString *appPath = [[NSBundle mainBundle] bundlePath];
  LSSharedFileListRef loginItems = LSSharedFileListCreate(NULL,
                                     kLSSharedFileListSessionLoginItems, NULL);
  BOOL found = NO;  
  UInt32 seedValue;
  CFURLRef thePath;
  CFArrayRef loginItemsArray = LSSharedFileListCopySnapshot(loginItems,
                                                              &seedValue);
  for (id item in (__bridge NSArray *)loginItemsArray)
  {    
    LSSharedFileListItemRef itemRef = (__bridge LSSharedFileListItemRef)item;
    if (LSSharedFileListItemResolve(itemRef, 0, &thePath, NULL) == noErr)
    {
      if ([[(__bridge NSURL *)thePath path] hasPrefix:appPath])
        found = YES;
    }

    //docs for LSSharedFileListItemResolve say we should release the CFURLRef
    if (thePath != NULL)
      CFRelease(thePath);

    if (found)
      break;
  }

  CFRelease(loginItemsArray);
  CFRelease(loginItems);
  return found;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T01:04:57.540

如果该项目未解决，您将在第二次循环中获得双重免费。在开始时以及在释放它之后将 thePath 设置为 nil，这将修复崩溃。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T20:39:09.270

您可以通过将编译器标志 -fno-objc-arc 添加到特定文件来禁用 ARC ![在此处输入图像描述](../Images/2476f3c145b76b0bdf75bdfe175095d7.png)

# javascript - 使用 PWI 时，在 Primefaces 应用程序中，图片在完整布局的中心部分后面打开

> ID：10590653
> 
> 赞同：0
> 
> 时间：2012-05-14T20:35:55.293
> 
> 标签：javascript, jsf, layout, primefaces, picasa

我正在使用 PWI（Picasa Webalbum Integrator），它是用于获取照片的 Jquery 插件。它正在部分工作。我可以将我的照片放到面板内的 xhtml 页面上，但是当我单击它时，它会在中心布局后面打开图片，所以除了布局部分之间的几毫米之外，我看不到它们：)

![您可以在布局部分之间看到其中一张照片](../Images/57b77cb2dd142eeb38a175b502a81ea5.png)

图片： [http ://aijaa.com/0054410193073](http://aijaa.com/0054410193073)

[Picasa 网络相册集成器](http://code.google.com/p/pwi/)

```
<script type="text/javascript">

  $(document).ready(function () {
    var settings = {
      username: 'TedTester'

      };
    $("#container").pwi(settings);
  });

</script>

    <p:panel>   
    <div id="container"> </div>
    </p:panel>
    </ui:define>
</ui:composition> 
```

我不知道如何开始解决这个问题，如果有人有时间做这种愚蠢的事情，我将非常感激。我正在使用 Primefaces 3.2 和 PWI 的最新版本 2.0。萨米人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:24:59.097

我的错！

将 jquery 插件与 JSF 一起使用时必须记住的两件事。

```
<h:outputStylesheet library="css" name="pwi.css"  />
<h:outputScript library="js" name="jquery.pwi.js" /> 
```

你必须使用这些标签。我对它们都只使用了 h:outputScript，它似乎没问题，但当然不是，生成的 html 不好。

另一件事是：

```
 <h:outputScript library="primefaces" name="jquery/jquery.js" target="head" /> 
```

我在 Primefaces 中使用带有 is 的 jquery，没有它，jquery 版本之间会发生冲突，或者 pwi 根本找不到 jquery。至少我是这么认为的 :) 没有一切正常，所以我很高兴！

萨米人

# jquery - 在 jQuery 中，如何在具有某些类的元素之间选择元素？

> ID：10590655
> 
> 赞同：18
> 
> 时间：2012-05-14T20:36:00.193
> 
> 标签：jquery

我有一个无序列表。

```
<ul>
    <li class="foo">Baz</li>
    <li>Select Me!</li>
    <li>Select Me!</li>
    <li>Select Me!</li>
    <li class="bar">Baz</li>
    <li>Don't Select Me</li>
    <li>Red Herring List Item</li>
</ul> 
```

如何使用 jQuery 选择具有类 foo 和 bar 的列表项之间的列表项？我不知道任何列表项的内容。我也不知道要选择多少个列表项，所以我不能依赖计数。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-14T20:40:12.797

```
$('li.foo').nextUntil('li.bar') 
```

[http://jsfiddle.net/zZRDB/1/](http://jsfiddle.net/zZRDB/1/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-14T20:40:46.787

```
var $elements = $('.bar').prevUntil('.foo'); 
```

或者其他方式：

```
var $elements = $('.foo').nextUntil('.bar'); 
```

[**演示**](http://jsfiddle.net/gdoron/LMZ7Z/1)

* * *

如果您有兴趣知道它是如何实现的，[请查看源代码](http://code.jquery.com/jquery-1.7.2.js)：

```
nextUntil: function(elem, i, until) {
    return jQuery.dir(elem, "nextSibling", until);
},
prevUntil: function(elem, i, until) {
    return jQuery.dir(elem, "previousSibling", until);
},​

dir: function(elem, dir, until) {
    var matched = [],
        cur = elem[dir];

    while (cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery(cur).is(until))) {
        if (cur.nodeType === 1) {
            matched.push(cur);
        }
        cur = cur[dir];
    }
    return matched;
},​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T20:41:04.027

尝试，

```
 $('li.bar').prevUntil('.foo') 
```

[**演示**](http://jsfiddle.net/skram/2W883/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T20:41:25.890

```
var index1 = $('li.foo').index(),
    index2 = $('li.bar').index()-1;

    $('li:gt('+ index1+'):lt('+ index2+')', 'ul'); 
```

或者`$('li.foo').nextUntil('li.bar');`

或者`$('li.bar').prevUntil('li.foo');`

# objective-c - 核心数据 - 取消删除规则

> ID：10590658
> 
> 赞同：1
> 
> 时间：2012-05-14T20:36:27.753
> 
> 标签：objective-c, core-data, null

我在实体组和联系人之间存在多对多关系。一个组可以有多个联系人，一个联系人可以存在于多个组中。

现在，如果我要删除一个组，我应该如何处理对其持有的联系人的所有引用？

正如我所看到的，有两个选项：使用 nullify 规则，这会将删除的组引用设置为 nil 对于那些拥有该组的联系人。但是这种引入了一个微观管理问题。然后，我必须在每次列出联系人组时检查是否有任何组为零。

所以对我来说，更优雅的解决方案是，当一个组被删除时，我会从联系人对象中完全删除组引用（？），这样它就不会包含任何组的 nil 值。那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T21:08:44.393

> 但是这种引入了一个微观管理问题。然后，我必须在每次列出联系人组时检查是否有任何组为零。

不，请参阅类似[问题的](https://stackoverflow.com/q/3025598/643383)[答案](https://stackoverflow.com/a/3029499/643383)。如果您将 Groups->>Contacts 和 Contacts->>Groups 关系的删除规则设置为无效，则：

*   删除联系人将从包含该联系人的任何组中删除该联系人

*   删除组将从属于它的所有联系人中删除该组

Foundation 框架中的集合对象（NSArray、NSSet 等）从不具有“nil 值”。可以将 NSNull 单例存储*为*集合中的值，但这不是 nullify 删除规则所做的。

听起来无效规则适用于您的情况中的两种关系。您唯一需要关心的是当您删除属于给定组的所有联系人时会发生什么，反之亦然。不属于任何组的联系人是有意义的，但是不包含联系人的组应该怎么办？如果没有成员的组对您的应用没有任何意义，您将不得不处理这种情况。

# iphone - 可以限制 UIScrollView 中的缩放/平移区域吗？

> ID：10590659
> 
> 赞同：0
> 
> 时间：2012-05-14T20:36:28.870
> 
> 标签：iphone, ios, cocoa-touch, uiscrollview

我有一个 UIViewController，它使用 UIScrollViewDelegate 实现 UIScrollView。附加到它的是一个 UIImageView，用户必须通过缩放和平移来裁剪照片以填充整个屏幕长度。在用户完成裁剪并点击完成后，原始 UIImage 将被发送到下一个 UIViewController。

我想知道，无论如何，使用原始图像在 UIScrollView 中显示它并允许用户缩放和平移它，以便只显示裁剪区域？IE 裁剪区域之外的图像都没有在缩放和平移中显示？有没有办法在不显式裁剪图像的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:55:54.303

这可能会让您朝着正确的方向前进：[显示图像的一部分](https://stackoverflow.com/questions/8035673/most-efficient-way-to-draw-part-of-an-image-in-ios)

不确定这是否适用于您的显示方式。但如果确实如此，它可能是一个简单的解决方案。您还可以通读[UIScrollviews](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)并可能使用 panGestureRecognizer 和 pinchGestureRecognizer 来限制他们可以缩放和平移的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:47:15.603

将 UIScrollView 的内容大小设置为裁剪区域的矩形。

# asp.net-mvc-3 - 从传入的 ASPX url 路由到 ASP.NET MVC 控制器操作

> ID：10590662
> 
> 赞同：0
> 
> 时间：2012-05-14T20:36:42.350
> 
> 标签：asp.net-mvc-3, routing

我有一个 url Review.aspx?reviewId=3，我想将此 url 路由到 MVC 控制器/操作 Review/3。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:13:24.297

没关系，像这样的简单路线有效：

```
 routes.MapRoute(
          "Reviews_Old", // Route name
          "LOreview.aspx", // URL with parameters
          new { controller = "LOReview", action = "Review", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

并且查询字符串参数是模型绑定在控制器动作参数上

# powershell - 电源外壳。如何将两个单独连续的字符串连接到文件中的一个字符串中？

> ID：10590672
> 
> 赞同：1
> 
> 时间：2012-05-14T20:37:48.060
> 
> 标签：powershell

我有一个文件。我需要选择一些连续的字符串，加入它们并将它们放在文件中，放在powershell脚本中选定字符串的第一个位置

我尝试：

```
$test=cat $file |select-string -pattern '<DIV>$' -Context 0,1|%{$_ -split "\r\n"}
$t= -join ($test[0],$test[1])
cat  $file|%{$_ -replace '$test','$t'} > temp.txt 
```

或这个

```
cat $file | %{$_ -replace '<DIV>[\u000d\u000a]{0,2}',""}>temp.txt 
```

但失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T22:54:18.430

从您显示的代码中，我得出结论，您想在 div 标记后删除换行符。

cat 作为 get-content 的别名返回一个数组，因此换行符由数组输出重置为文件。当然有严格的 powershel cmdlet 方法可以做到这一点。

我发现最快的是：

```
[io.file]::readAllText("$file") -replace "<DIV>`r`n" "<DIV>" > temp.txt 
```

`readAlltext`保留文件的换行符，因此替换有效。

高温高压

# asp.net-mvc-3 - 如何在 ASP.NET MVC 3 中使用操作链接访问虚拟目录

> ID：10590673
> 
> 赞同：1
> 
> 时间：2012-05-14T20:37:57.683
> 
> 标签：asp.net-mvc-3, url, virtual-directory

我在 MVC 3 中创建了 Web 应用程序并将其上传到服务器..

问题是我创建了虚拟目录并将我的项目上传到这个虚拟目录中，它的 url 是这样的

```
www.snowads.com/snow 
```

所以我`@Html.ActionLink("Register", "Create", "User")` 像这样使用它的创建链接

```
www.snowads.com/User/Create 
```

但我希望它应该包含虚拟目录名称

```
www.snowads.com/snow/User/Create 
```

我怎样才能做到这一点 ？

# javascript - 如何从构造函数中删除函数？

> ID：10590674
> 
> 赞同：5
> 
> 时间：2012-05-14T20:38:12.833
> 
> 标签：javascript

如何从构造函数中删除函数？

如果构造函数中调用`greet`了`Person`函数，如何删除该函数？

```
function Person(name)
{
    this.name = name;
    this.greet = function greet()
    {
        alert("Hello, " + this.name + ".");
    };
} 
```

我希望结果是：

```
function Person(name)
{
    this.name = name;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T20:39:36.297

```
delete this.greet 
```

或者

```
var personInstance = new Person();
delete personInstance.greet // to remove it from the instance from the outside 
```

或者

```
delete Person.prototype.greet // if doing prototypes and inheritance 
```

`delete`是您很少看到的关键字，但我向您保证，它存在：P

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T21:02:55.140

您不能更改函数的来源。如果要更改该函数的行为，则必须选择：

**用你自己的覆盖函数。**如果该功能是独立的，这很容易。然后你真的可以定义

```
function Person(name)
{
    this.name = name;
} 
```

*在*定义了原始函数之后。但是，如果涉及原型和继承，获取对原始原型的引用可能会变得很棘手（因为函数声明的评估方式）。

**创建一个包装函数**，它创建和实例化并删除您不想要的属性：

```
function PersonWrapper(name) { 
    var p = new Person(name); 
    delete p.greet; 
    return p;
} 
```

这种方法也受到限制，因为您只能更改从外部可访问的内容。在您提供的示例中，这已经足够了。

# c# - 如何使用 jquery 将对象从 mvc 控制器操作传递到视图

> ID：10590683
> 
> 赞同：0
> 
> 时间：2012-05-14T20:39:20.127
> 
> 标签：c#, jquery, asp.net-mvc

有人可以帮我吗我是 jQuery 新手，我想知道如何从控制器操作 MVC 传递对象

```
public ActionResult UserGroupSetting()
{
    UserGroupSetting setting = //some code to retrieve the settings
    ViewData["Theme"] = setting.Theme;
    ViewData["Image"] = setting.LogoImage;
    returnView(setting);
} 
```

我希望它在 jQuery 函数中获取主题和徽标图像，我将使用它们来更新样式表中的类，主题对象目前仅包含十六进制形式的颜色。

如果有人可以帮助我调用 jquery 函数以及如何在 jquery 中公开图像和主题对象。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:51:51.780

您可以返回 json 格式的数据，并让 jquery 使用方法调用您的操作`getJSON`方法

```
public ActionResult UserGroupSetting()
{
   var result=new { Theme="YourTheme", Logo="YourLogoURL"};
   return Json(result, JsonRequestBehavior.AllowGet);
} 
```

在您的页面中，从您的 javascript 调用它

```
$(function(){
   $.getJSON('YourController/UserGroupSetting', function(data) {
      alert(data.Theme);
      alert(data.Logo);
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T05:25:03.853

如果我是你，我会这样做：

你可以使用 ViewBag: 在行动中： ViewBag.Setting = setting;

```
 UserGroupSetting setting = //some code to retrieve the settings
  ViewBag.Theme  = setting.Theme;
  ViewData.Image = setting.LogoImage;
  returnView(setting); 
```

然后在剃刀中：

```
 @{
    var setting = (UserGroupSetting)ViewBag.Setting;
  } 
```

将其输出到 javascript 标签：

```
 <script type="text/javascript">
        var setting = new setting{
                 Theme = @setting.Theme,
               Image = @setting.Image
        }
  </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:51:05.690

这可能不是最好的解决方案，但我过去使用的一个选项是`input`在您的视图中创建一个 hidden 并访问`input`jQuery 代码中的值。这将是您视图中的代码示例：

```
<input id="someID" type="hidden" value="@TempData["Theme"]" /> 
```

# c# - MVC WebGrid如何更新查询字符串

> ID：10590684
> 
> 赞同：3
> 
> 时间：2012-05-14T20:39:34.267
> 
> 标签：c#, asp.net-mvc, gridview, query-string

当您在 MVC 的 WebGrid 上启用分页和排序时，它会自动在查询字符串中附加排序和页面参数。它是如何做到的？我了解它如何为第 n 页创建链接，但是如果*读取*查询字符串以知道要生成哪个页面，该怎么办？

真正让我困惑的是，在控制器中，我不必指定页面和排序参数，但它们仍然可以工作。这是什么巫术？

如果我不够清楚，

这是gridview定义

```
@{ var grid = new WebGrid(Model.Customers, rowsPerPage: 25, canPage: true }); } 
```

这是生成的查询字符串：

```
/Customer?sort=Notes&sortdir=ASC 
```

和我的 Customer.Index 控制器

```
//no parameters here. how does WebGrid maintain querystring?
public ActionResult Index() 
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:23:27.517

长话短说，它只是从 中提取值`HttpContext.Request.QueryString`，毕竟这并不是那么神奇。

例如，这里是它访问排序字段的地方：

```
 public string SortColumn {
        get { 
            if (!_sortColumnSet) { 
                string sortColumn = QueryString[SortFieldName];
                // blah blah blah
            } 
            // blah blah blah
            return _sortColumn;
        } 
        set {
            // blah blah blah omitted for brevity
        } 
    } 
```

# ruby-on-rails - 如何验证会员的电子邮件？

> ID：10590689
> 
> 赞同：0
> 
> 时间：2012-05-14T20:39:53.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我有`validates_presence_of :email`我的`User`模型。我的用户模型还有一个布尔`member`列，用于确定用户是会员还是普通用户。

普通用户无需电子邮件即可注册。但是当他们注册会员帐户时，他们需要提供电子邮件。

问题是当用户注册为普通用户时，验证将触发声明`:email`为空白。我该怎么做？

如果验证也命名了范围，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:00:27.980

如果我理解你，它应该很简单

```
validates_presence_of :email, :if => :member 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T22:13:21.647

您的会员注册表单调用的操作可以显式设置 user.member=true，那么 JacobM 的答案将起作用，即，

```
validates_presence_of :email, :if => :member 
```

# ruby-on-rails - 如何在 Rails 3.1+ 中将参数传递给 Thin 以配置 SSL？

> ID：10590693
> 
> 赞同：2
> 
> 时间：2012-05-14T20:40:07.993
> 
> 标签：ruby-on-rails, ssl, thin

我正在使用 Thin gem 的暂存环境中的 Rails 应用程序上启用 SSL。好像我只有几步之遥。我已经入驻`config.force_ssl = true`了`config/environments/staging.rb`。

由于我没有告诉 Thin SSL 证书和密钥在哪里，所以 rails 放了`!! Invalid request`. 至少我认为这就是它这样做的原因。

我发现 Thin 可以接受参数来确定 SSL 证书和密钥文件的位置，如[本答案所示](https://stackoverflow.com/a/7862689/783601)。但是，我不知道该从哪里告诉 Rails 从这些参数开始 Thin。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:49:58.900

如果您从命令行开始，则可以运行`thin start --ssl`而不是（以及[如何将 SSL 选项传递到 Rails 3.0 中的“rails 服务器”中](https://stackoverflow.com/questions/3604303/how-can-i-pass-ssl-options-into-rails-server-in-rails-3-0/7862689#7862689)`rails server`列出的任何其他选项？ ）

# php - SQLite：对特定查询执行区分大小写的 LIKE 查询

> ID：10590700
> 
> 赞同：5
> 
> 时间：2012-05-14T20:40:29.647
> 
> 标签：php, sqlite, pdo, case-sensitive

我想`SELECT ... LIKE`在 SQLite 中运行一个区分大小写的查询。但我只希望这一个查询区分大小写，仅此而已。

我知道有

> PRAGMA case_sensitive_like = 布尔值；

但这似乎改变了所有 LIKE 查询。

如何在单个查询上启用区分大小写的 LIKE？

示例：我希望查询“FuN”以匹配“blah FuN blah”，但不匹配“foo fun bar”。

（这是在 PHP 下使用 PDO 运行的）

我可能可以将其打开，然后在查询后关闭，但我可以担心可能产生的影响（效率等）。有没有害处？

我没有对数据库的写访问权限。

（这是在 Windows Server 2008 下）

我也尝试过`SELECT id, summary, status FROM Tickets WHERE summary COLLATE BINARY LIKE '%OPS%';`，但没有做区分大小写的 SELECT，它仍然返回结果返回，如*laptops*。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T10:57:44.420

为什么不走简单的使用方式

```
PRAGMA case_sensitive_like = true/false; 
```

在每个查询之前和之后你想区分大小写吗？但要注意区分大小写只适用于 ASCII 字符，而不是 Unicode，这使得 SQlite 目前不完全符合 UC。

或者，SQlite 允许应用程序实现 REGEXP 运算符，根据[www.sqlite.org/lang_expr.html](http://www.sqlite.org/lang_expr.html)可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T21:15:17.417

尝试：

```
 SELECT id, summary, status FROM Tickets WHERE summary GLOB \"*OPS*\"; 
```

`*`和之间没有空格`OPS`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T11:02:45.833

我认为您可能需要在您的 php 代码中对返回值进行单独检查，以查看它们是否与您区分大小写的数据匹配。

```
$rs = mysql_query("Select * from tbl where myfield like '%$Value%'");

while($row == mysql_fetch_assoc($rs))
{

     if (strpos($row['myfield'],$Value) !== false)
     {
        $Matches[] = $row;
      }

 }

 print_R($Matches); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T18:11:48.630

你可以尝试这样的事情：

从 YOUR_TABLE 中选择 YOUR_COLUMN WHERE YOUR_COLUMN COLLATE latin1_general_cs LIKE '%YOUR_VALUE%'

不确定列上的排序规则集是什么。我以拉丁语为例。运行查询并在最后将“cs”更改为“ci”。您应该会看到不同的结果。

**更新**

对不起。读得太快了。上面的排序规则是针对 mysql 的。对于 SQLLite，您应该能够使用 BINARY，它应该为您提供区分大小写的搜索。

参考：[http ://www.sqlite.org/datatype3.html#collat​​ion](http://www.sqlite.org/datatype3.html#collation)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-17T18:40:53.677

您可以按列执行此操作，而不是按查询（可能是您的情况）。为此，请使用 sqlite collat [​​ions](http://www.sqlite.org/datatype3.html#collation)。

```
CREATE TABLE user (name VARCHAR(255) COLLATE NOCASE); 
```

该列上的所有`LIKE`操作都将不区分大小写。

`COLLATE`即使未使用特定排序规则声明列，您也可以查询：

```
SELECT * FROM list WHERE name LIKE '%php%' COLLATE NOCASE 
```

请注意，排序规则中只有 ASCII 字符不区分大小写。"A" == "a"，但是 "Æ" != "æ"

SQLite 允许您声明新的排序规则类型，`sqlite_create_collation`它们在 PHP 端实现排序规则逻辑，但 PDO 没有公开这一点。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-10-13T08:27:35.990

```
SELECT * FROM table WHERe field LIKE '%search_term%' 
```

在这种形式中，SELECT 不区分大小写。

# android - 有没有办法将安卓手机上的默认 SQLITE 数据库位置更改为 HPH 网站上的文件夹？

> ID：10590701
> 
> 赞同：1
> 
> 时间：2012-05-14T20:40:34.237
> 
> 标签：android, database, sqlite, web, location

我有一个应用程序可以在通常的位置存储一个 sqlite 数据库。即：数据/数据/com.blah.blah/databases。我希望远程定位**SQLITE**数据库并对其进行读写。我想知道是否有办法在不使用 Oracle Mysql 选项的情况下做到这一点。有没有办法将默认位置更改为网站上的文件夹。提前致谢。如果是这样，我该怎么做。我找不到任何解释它是如何完成的 tuts 或书籍。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T21:47:12.797

SQLite 不是远程数据库实现。那是一种白色的一部分，它被称为 SQ*Lite*。:) 它用于基于本地文件创建 SQL 数据库，而无需在您和数据库之间放置一些可远程服务协议的额外开销。

与远程数据存储交互的选项有很多种，而不仅仅是 MySQL - PostgreSQL 等。您可以使用任何您想要的选项。然后，您可以在设备上只拥有与远程数据存储通信所需的客户端代码。但是，对于 Android 来说，在此处提供任何复杂/复杂的内置功能是没有意义的，因为您想要的内容主要取决于您在后端服务器上使用的内容。

# facebook - C# Facebook SDK、页面标签应用程序和身份验证

> ID：10590702
> 
> 赞同：0
> 
> 时间：2012-05-14T20:40:41.873
> 
> 标签：facebook, facebook-c#-sdk

如果这是一个愚蠢的问题，请原谅我。我们在尝试进行身份验证时遇到了问题。这个问题似乎是一个直截了当的问题，所以我敢肯定这是我们忽略的愚蠢问题。

第 1 步：用户点击我们的标签应用首页。此页面是公开的，不需要我们知道当前用户是谁。第 2 步：此页面上有一个按钮，可以让人们加入我们的应用程序。这会将用户带到我们控制器上的另一个操作，这里是检查应用程序身份验证的地方。如果用户没有授权应用程序，我们将提供指向我们服务器上托管应用程序的重定向 URL（我相信这是我们问题的症结所在）。第 3 步：用户对应用程序进行身份验证，但是，当我们被重定向到 Facebook 之外时，我们会被带到目标页面。

我们是否必须重新定向回我们的页面选项卡，如果是这样，我们如何将代码交换为访问令牌？

在此先感谢，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:22:05.053

为应用程序设置一个“命名空间”。这会为您的应用创建一个以命名空间结尾的新链接。调用认证时使用这个新的 url 作为 return_url。

# python - 将两个列表映射到倒排字典

> ID：10590705
> 
> 赞同：1
> 
> 时间：2012-05-14T20:40:54.030
> 
> 标签：python, dictionary

我有一系列基因，我想将它们与属性列表和颜色相关联：

```
gene_A_color = red
gene_B_color = blue

gene_A_property = ['a','b','c']
gene_B_property = ['d','e','f'] 
```

出于绘图的目的，我想创建一个字典，我可以在其中使用属性值作为键来获取颜色或基因，如下所示：

```
#lookup dictionary
{'a': ['red', 'gene_A']
 'b': ['red', 'gene_A']
 'c': ['red', 'gene_A']
 'd': ['blue' 'gene_B']
 'e': ['blue' 'gene_B']
 'f': ['blue' 'gene_B']}
lookup[a][0] = red
lookup[a][1] = gene_A 
```

我一开始就是这样，但如果我丢失了基因名称，只能颠倒列表：

```
lookup_dict = defaultdict(list)
    lookup_dict['red'] =  ['a','b','c']
    lookup_dict['blue'] =  ['d','e','f']
inverted    = defaultdict(list)
for k, v in lookup_dict.items():
    inverted[v].append( k )

#inverted
{'a': 'red'
 'b': 'red'
 'c': 'red'
 'd': 'blue'
 'e': 'blue'
 'f': 'blue' } 
```

建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T20:51:08.273

你已经拥有了你需要的一切，基因与属性的关联。其他一切都会自行解决。

为什么不使用类来表示基因？

```
class Gene(object):
    def __init__(self, color, properties):
        self.color = color
        self.properties = properties

geneA = Gene('red', ['a', 'b', 'c'])
geneB = Gene('blue', ['d', 'e', 'f'])
genes = [geneA, geneB]

inverted = {}
for gene in genes:
    for prop in gene.properties:
        inverted[prop] = gene.color 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:48:56.023

如果您只需要几个简单的语句来执行此操作：

```
>>> gene_A_property = ['a','b','c']
>>> gene_B_property = ['d','e','f']
>>> ld={k:['red','gene_A'] for k in gene_A_property}
>>> ld.update({k:['blue','gene_B'] for k in gene_B_property})
>>> ld
{ 'a': ['red', 'gene_A'], 
  'c': ['red', 'gene_A'], 
  'b': ['red', 'gene_A'], 
  'e': ['blue', 'gene_B'], 
  'd': ['blue', 'gene_B'], 
  'f': ['blue', 'gene_B']
} 
```

# ruby-on-rails-3 - Rails 3 设计用户表缺少 authentication_token

> ID：10590710
> 
> 赞同：0
> 
> 时间：2012-05-14T20:41:22.020
> 
> 标签：ruby-on-rails-3, authentication, devise

我的 Rails 3 应用程序正在使用 Devise，我注意到我的 users 表缺少它的 authentication_token 列。不确定到目前为止它是如何对用户进行身份验证的，但无论哪种情况，我都希望添加 authentication_token 列以重复本教程中所做的事情：http: [//ariejan.net/2011/03/27/rails-3 -devise-uploadify-no-flash-session-hacks](http://ariejan.net/2011/03/27/rails-3-devise-uploadify-no-flash-session-hacks)。我该如何添加这个？

**编辑**

我确实注意到`config/initializers/devise.rb`我有这个，我认为它是身份验证令牌的替代品？

```
# If true, uses the password salt as remember token. This should be turned
# to false if you are not using database authenticatable.
  config.use_salt_as_remember_token = true 
```

**编辑 2**

我还尝试将以下内容添加到我的用户模型中，但没有任何改变。

```
devise :database_authenticatable 
```

这是我当前的用户模型：

```
devise :database_authenticatable, :registerable,
       :recoverable, :rememberable, :trackable, :validatable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:21:02.973

令牌身份验证仅用于 API 样式身份验证，您从另一个应用程序接收 JSON 响应。默认情况下，Devise 使用电子邮件和密码身份验证，这`:database_authenticatable`是配置的内容。

为了以这种方式设置您的应用程序，您可以按照[Devise Wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Simple-Token-Authentication-Example)中的任一教程进行操作。其中任何一个都会为您指明正确的方向。

# google-app-engine - Query 和 GqlQuery 操作是否会自动缓存其结果？

> ID：10590716
> 
> 赞同：0
> 
> 时间：2012-05-14T20:41:49.127
> 
> 标签：google-app-engine, caching

在 AppEngine 中执行查询时，您可以使用`Query`or`GqlQuery`对象从数据存储区中获取数据。我想知道这些对象是否缓存了它们的结果集，或者它们是否每次都获取数据。例如，如果您需要多次循环结果：

```
query = GqlQuery('SELECT * '
                 'FROM User '
                 'WHERE favorite_color = :1',
                 'pink')

for user in query:
    # perform setup ...

# do some intermediary step ...

for user in query:
    # final step ... 
```

在循环中，查询对象自动调用`.run()`并返回一个可迭代对象，但它是每次都访问实际数据库，还是缓存它，这意味着第二个`for`循环将是一个更快的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:08:12.577

结果不会被缓存，因为它们可能随时更改，并且没有实用的方法来使所有可能包含修改结果的结果集无效。如果您只想执行示例代码中的步骤而不执行两次查询，只需调用`.fetch()`查询对象以获取对象列表，然后对其进行迭代而不是查询本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:55:30.227

不，他们没有。您必须自己进行缓存。在为您执行此操作的数据存储周围使用 memcache 或现成的包装器之一。

# c - dlmalloc 中的 fd 和 bk

> ID：10590717
> 
> 赞同：1
> 
> 时间：2012-05-14T20:41:53.667
> 
> 标签：c, malloc, heap-memory

我想知道是否有人可以澄清以下内容：如果我没记错 fd 是指向 bin 中下一个 malloc_chunk 结构的指针，但我也看到它被指定为指向 malloc_chunk 结构中 fd 字段的指针。那么它是指向 malloc_chunk 结构的开头还是结构中的 fd 字段呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:24:42.387

它的类型是 a `struct malloc_chunk *`，所以它应该指向一个 malloc_chunk 结构，下一个。如果它指向 fd 字段，它将是一个指向指针的指针，....，它可以存储为`void *`

# database - 了解 Heroku 中的多个数据库

> ID：10590718
> 
> 赞同：0
> 
> 时间：2012-05-14T20:41:57.823
> 
> 标签：database, postgresql, database-design, heroku, postgresql-9.1

我最近安装了 heroku`dev` [数据库](https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/)。然后当我输入命令行时`heroku pg:info`，我得到三个数据库。

```
=== SHARED_DATABASE (DATABASE_URL)
Data Size    808k

=== HEROKU_POSTGRESQL_BRONZE
Plan         Dev
Status       available
Connections  1
PG Version   9.1.3
Created      2012-05-14 17:47 UTC
Tables       0
Conn Info    "host=XXXXXX.compute-1.amazonaws.com
             port=5432 dbname=resourceXXXXX
             user=abcXXXXX sslmode=require
             password=XXXXXXXXX"

=== HEROKU_POSTGRESQL_CHARCOAL
Plan         Dev
Status       available
Connections  1
PG Version   9.1.3
Created      2012-05-13 19:08 UTC
Tables       0
Conn Info    "host=XXXXXXX.compute-1.amazonaws.com
             port=5432 dbname=resourceXXXXX
             user=YYYYYY sslmode=require
             password=XXXXXXXXXXXXXXXX"

=== HEROKU_POSTGRESQL_GREEN
Plan         Dev
Status       available
Connections  1
PG Version   9.1.3
Created      2012-05-13 19:06 UTC
Tables       0
Conn Info    "host=XXXXXXXXXXXX.compute-1.amazonaws.com
             port=5432 dbname=resourceXXXXXX
             user=XXXXXXXXXX sslmode=require
             password=XXXXXXXXXXXXXX" 
```

主机、资源、用户和密码各不相同。

为什么有三个？他们之间有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T22:31:22.133

使用类似于生产计划的开发计划，您可以添加多个数据库。其中每一个都是一个独特的数据库，您可以单独连接到它们中的每一个。

如果您不打算添加三个数据库，但希望删除数据库，您可以：

```
heroku addons:remove HEROKU_POSTGRESQL_GREEN 
```

要将其中一个提升到您的主数据库，您可以：

```
heroku pg:promote HEROKU_POSTGRESQL_GREEN 
```

您也可以单独连接到它们中的每一个：

```
heroku pg:psql HEROKU_POSTGRESQL_RED 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:30:47.293

如果您多次安装插件，它会创建多个条目。我删除了应用程序并重新加载了插件，现在只有一个条目。我猜以前，我无意中多次添加了插件。

# c# - 如何使用十六进制为图像着色？

> ID：10590720
> 
> 赞同：2
> 
> 时间：2012-05-14T20:42:13.597
> 
> 标签：c#, image, image-processing, css

我有一个图标，我想以任意十六进制数字显示。图标示例如下，但由于颜色可以是任何颜色，我将如何通过提供 HTML 颜色对其进行着色？背景必须是透明的，因为它将成为地图上的一个精确点。关于如何做到这一点的任何想法？

![在此处输入图像描述](../Images/f08ae2935e723971e361ade84aa59c07.png) ![在此处输入图像描述](../Images/83d77547cee5d03e5ff76ce0b70a7ab6.png) ![在此处输入图像描述](../Images/f2a0d2c3cbe222fb5356c116147e8550.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:36:35.803

[这](http://jsfiddle.net/eNfak/8/)是我将使用的方法。

您需要从该图像的一个没有颜色的版本开始——只有轮廓、总线和渐变所需的黑白。您需要渐变具有 alpha 透明度，以便某些像素比其他像素更透明 - 然后您可以将任何颜色放在图像后面，颜色会改变。成功！

问题是这会溢出图钉的边界，并且您将失去让它覆盖地图的能力，因此您需要找到一种方法来剪辑背景项目，使其与图钉的形状完全相同，并且是透明的边缘之外。

您可以尝试创建一个形状相同的简单 SVG 图像并将其放在其后面。我用[这个工具](http://svglab.hiasm.com/)来创建这个橙色圆圈：

```
<?xml version="1.0" standalone="no"?>
<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">
<ellipse cx="200" cy="190" rx="30" ry="30" style="fill:orange"/>
</svg> 
```

通过一些工作，您可能能够获得与您的图钉相匹配的形状，然后当您将其放在透明图像后面时，您需要做的就是使用 Javascript 或诸如此类的东西将文本从“填充：橙色”更改为任何颜色你要。

另一种类似的方法是使用 canvas 元素来绘制该形状。您还可以尝试使用 CSS 边框圆角和旋转来制作该形状，具体取决于您的浏览器支持的内容。这是一个 css 生成的图钉，它接近您需要的形状，虽然还没有：（显然，代码是特定于 webkit 的）

```
​&lt;div style="background-color: blue; -webkit-transform: rotate(-45deg); width:100px; height:100px; border-radius: 50px 60px 50px 0;"></div> 
```

如果你想做一些可以在旧浏览器中使用的东西，你可以创建一堆 1px 高、不同长度的 div，以创建与透明图钉大小完全相同的东西。

```
<div class="constructedPin">
    <div style="width: 8px"></div>
    <div style="width: 12px"></div>
    <div style="width: 30px"></div>
    <div style="width: 35px"></div>
    <div style="width: 38px"></div>
    <div style="width: 40px"></div>
    <div style="width: 41px"></div>
                 (etc...)
</div>

<style>
 div.constructedPin div { height: 1px; background-color:whatever; margin: auto;}
</style> 
```

那么改变div的背景颜色就很简单了。这种方法听起来很复杂，但不会太难，而且实际上加载速度非常快，因为您可以对 div 进行硬编码，不会动态生成，而且 CSS 更新会非常快。

[编辑：] 我被带走了，做了一个小演示。显然，如果你有一张真实的图像，效果会更好——我只是很快地从它上面抹掉了颜色来传达这个想法。

[http://jsfiddle.net/eNfak/8/](http://jsfiddle.net/eNfak/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:49:43.920

我不认为这可以在客户端使用 CSS 来完成 - 我会使用一个服务器端函数来创建具有指定颜色的位图（可能缓存结果），然后从 HTML 中调用它：

```
<img src="createicon.ashx?name=truck&color=0xff0000"> 
```

原始位图应该使用预定义的背景颜色 - 比如说红色，并且在非背景区域中没有任何红色部分，那么您的代码应该查找所有红色像素并将它们替换为新背景的百分比颜色对应于原始像素中红色的百分比 - 例如，如果原始像素为 50% 红色并且您的新颜色为蓝绿色，则该像素应变为 50% 蓝绿色。

有关如何更改位图颜色的信息，请参见[此处。](https://stackoverflow.com/questions/9858202/applying-a-color-filter-to-a-bitmap-object)

# javascript - 如何运行使用 innerHTML 添加到页面的脚本？

> ID：10590724
> 
> 赞同：3
> 
> 时间：2012-05-14T20:42:23.357
> 
> 标签：javascript

> **可能重复：**
> [执行插入 .innerHTML 的 <script> 元素](https://stackoverflow.com/questions/2592092/executing-script-elements-inserted-with-innerhtml)
> [在页面加载时将 <script> 标签动态插入 HTML](https://stackoverflow.com/questions/3114035/dynamically-inserting-script-tags-into-html-on-page-load)

我的意思是，如果我做 .innerHTML 写包含

```
<script type="text/javascript" src="source.js"></script> 
```

或者

```
<script type="text/javascript"> // embedded code here </script> 
```

嵌入式代码不会运行，链接到代码也不会运行。它是“死的”。

有没有办法手动触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:45:13.540

您需要将javascript添加到head标签，即

```
var head = document.getElementsByTagName("head")[0];         
var newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.src = 'http://www.somedomain.com/somescript.js';
head.appendChild(newScript); 
```

（这是很常见的事情，但我从这里复制了代码：[http](http://www.hunlock.com/blogs/Howto_Dynamically_Insert_Javascript_And_CSS) ://www.hunlock.com/blogs/Howto_Dynamically_Insert_Javascript_And_CSS ）

* * *

*附带说明：* 如果您使用 jQuery，您会很想编写以下内容：

```
<script>
    [....]
    $( "head" ).append( "<script src='myScript.js'></script>" ); 
    [....]
</script> 
```

请注意，这不起作用，因为 javascript 解析器将看到第一个`</script>`并在那里停止解析。

# c++ - TortoiseSVN 和 Visual Studio Express 2010

> ID：10590726
> 
> 赞同：0
> 
> 时间：2012-05-14T20:42:43.720
> 
> 标签：c++, visual-studio, svn

我在 VS 2010 express 项目中使用 TotoiseSVN 客户端和 Assembla 后端。我们遇到了 VS 文件夹（或过滤器）删除和文件有时未添加到项目中的问题。我注意到当我提交 .vcxproj 和 .vcxproj.filters 文件时，默认情况下从不检查它们，即使它们应该更改。所以我手动检查它们，并在他们提交时告诉其他人。

如果团队成员 A 签出，仅更改一些代码，而团队成员 B 签出项目并将文件添加到项目中，这可能会导致问题。如果团队成员 B 然后在团队成员 A 之前提交，则团队成员 A 的项目文件没有团队成员 B 添加的新文件，所以现在他的项目覆盖了团队成员 B 他签入的项目文件，现在新添加的文件不在该项目。

除了具有惊人的协调性外，我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:56:07.543

我怀疑这里可能发生的事情是开发人员在向他们添加新文件时没有保存项目文件。VS2008 默认执行此操作，但我认为在 VS2010 中，除非您明确执行 File -> Save All，否则它们不会被保存。因此，这意味着更改没有被提交。一旦您的开发*人员*养成了在提交之前保存项目文件的习惯，那么 SVN 将在 99% 的时间内为您处理所有合并。剩下的 1% 的时间是某人对项目文件进行了一些更重大的重组，或者两个人对构建设置进行了相互冲突的更改。在这些情况下，您必须手动解决它们。

SVN 永远不会用另一个人覆盖一个人的更改，它总是会尝试合并。因此，如果您遇到此问题，则表明一个人正在以某种方式回滚其他人的更改，或者他们在 Visual Studio 中没有设置在外部更改时重新加载文件的选项：`Tools -> Options -> Documents -> Detect when file is changed outside the environment`.

处理这个问题的一个有效方法是设置一个简单的构建服务器，例如使用[Jenkins](http://www.jenkins-ci.org)，它会在一些签入后定期启动构建。如果构建失败，那么签入的人会收到一封邮件，告诉他们他们破坏了构建。您还可以拥有一个显示[构建状态](https://wiki.jenkins-ci.org/display/JENKINS/Radiator+View+Plugin)的监视器，这使得整个团队更容易看到损坏的构建，并希望鼓励每个人保持构建的修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:59:15.533

[CMake](http://www.cmake.org)非常适合这一点。

如果您还没有遇到过 CMake，它允许您在 svn 之外的源文件的单独目录中创建整个项目的构建文件。

存储库根目录中的单个 CMakeLists.txt 文件将替换所有当前的 .vcxproj 和 .filters 文件。

# c++ - 以 RAW 格式恢复磁盘内容并转储为一个大二进制文件的应用程序？

> ID：10590727
> 
> 赞同：0
> 
> 时间：2012-05-14T20:42:53.390
> 
> 标签：c++, disk

我有一堆工作丢失在我一次不小心格式化的硬盘上。我意识到那里有很多数据恢复工具，但它们似乎都在尝试扫描驱动器以获取实际的分区数据以恢复文件。我不需要这个。**我只需要一个程序以 RAW 方式访问每个扇区并将内容逐字节转储到某个文件中。**原因是，我的大部分工作都是 ASCII 文件，所以我不在乎内容是否是可识别和完整文件的一部分。我可以解析 RAW 数据并尝试恢复我可以恢复的任何文本。

那么这样的事情是否存在，还是我辞职编写自己的程序（我非常满意）？这将是一个相当简单的程序，它实际上会扫描整个磁盘（逐个扇区）并将内容（逐个字节）转储到另一个磁盘上的文件（或可能是几个较小的文件以使其更易于管理）。**从 C/C++ 读取 RAW 磁盘的建议方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:54:15.683

您能否从 Linux [Live CD](http://livecdlist.com/)启动，识别硬盘的设备名称（例如，`fdisk`它还会告诉您分区大小）然后使用[dd](http://linux.about.com/od/commands/l/blcmdl1_dd.htm)命令，例如`dd if=/dev/sda1 of=/mnt/path_to_external_drive`提取磁盘的原始内容？

# c# - 在两个控件之间共享绑定源不起作用

> ID：10590729
> 
> 赞同：0
> 
> 时间：2012-05-14T20:43:00.093
> 
> 标签：c#, winforms, data-binding

我正在创建一个充当主从编辑器的表单。我在这个表单上有 2 个控件。一个基本上是主项目列表，另一个控件是项目的详细信息。我试图在两个控件中使用相同的 BindingSource 对象，以便在主控件上进行更改时，将更新详细控件。

在我的表格中，我有：

```
EmployerCollection employerCollection = new EmployerCollection();
employerCollection.GetMulti(null, 0, new SortExpression(EmployerFields.Name | SortOperator.Ascending));
bsEmployers.DataSource = employerCollection;

masterControl.Init(bsEmployers);
detailControl.Init(bsEmpoyers); 
```

在我的 masterControl 中，我有：

```
public void Init(BindingSource bs)
{
    bsEmployers = bs;
} 
```

但是对于我的生活，当我以这种方式传递绑定源时，我无法让我的主控件显示绑定源中的数据。

仅当我删除 bsEmployers = bs 行并按如下方式移动其他逻辑时，我才能使绑定工作：

```
public void Init(BindingSource bs)
    {
        EmployerCollection employerCollection = new EmployerCollection();
        employerCollection.GetMulti(null, 0, new SortExpression(EmployerFields.Name |             SortOperator.Ascending));
        bsEmployers.DataSource = employerCollection;
    } 
```

有谁知道我不能传递 BindingSource 对象来共享它吗？我尝试在我的控件中调用 RefreshBindings，但它似乎没有任何效果。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:04:12.143

我不认为 BindingSource 打算以这种方式使用。我建议将 EmployerCollection 值传递给 Init 方法，并让每个控件使用 EmployerCollection 创建自己的 BindingSource。

# python - 在 Python 中替换特殊字符

> ID：10590731
> 
> 赞同：0
> 
> 时间：2012-05-14T20:43:20.783
> 
> 标签：python, special-characters

我需要替换文件名中的特殊字符。我现在正在尝试使用翻译，但它的效果并不好，我希望你有一个想法来做到这一点。为了制作一个清晰的播放列表，我在我的车里放了一个糟糕的 mp3 播放器，它不能做 umlaute oder specialchars。

到目前为止我的代码

```
# -*- coding: utf-8 -*-
import os
import sys
import id3reader
pfad = os.path.dirname(sys.argv[1])+"/"
ordner = ""

table = {
      0xe9: u'e',
      0xe4: u'ae',
      ord(u'ö'): u'oe',
      ord(u'ü'): u'ue',
      ord(u'ß'): u'ss',
      0xe1: u'ss',
      0xfc: u'ue',
    }
def replace(s):
return ''.join(c for c in s if (c.isalpha() or c == " " or c =="-") )
fobj_in = open(sys.argv[1])
fobj_out = open(sys.argv[1]+".new","w")

for line in fobj_in:
if (line.rstrip()[0:1]=="#" or line.rstrip()[0:1] ==" "):
    print line.rstrip()[0:1]
else:
    datei= pfad+line.rstrip()
    #print datei
    id3info = id3reader.Reader(datei)
    dateiname= str(id3info.getValue('performer'))+" - "+ str(id3info.getValue('title'))
    #print dateiname
    arrPfad = line.split('/')

    dateiname = replace(dateiname[0:60])
    print dateiname
#   dateiname = dateiname.translate(table)+".mp3"
    ordner = arrPfad[0]+"/"+dateiname
#   os.rename(datei,pfad+ordner)
    fobj_out.write(ordner+"\r\n")
fobj_in.close() 
```

我收到此错误：***UnicodeEncodeError: 'ascii' codec can't encode character u'\xfc' in position 37: ordinal not in range(*** ***128*** )***目的***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:37:09.133

如果我需要摆脱非ASCII字符，我经常使用：

```
>>> unicodedata.normalize("NFKD", u"spëcïälchärs").encode('ascii', 'ignore')
'specialchars' 
```

它试图将字符转换为其规范化 unicode 分解的 ascii 部分。不好的是，它会丢弃所有它不知道的东西，并且不够聪明，无法音译变音符号（如 ue、ae 等）。

但它至少可以帮助您播放这些 mp3。

当然，您可以先自己做`str.translate`，然后将结果包装在其中，以消除所有剩余的非 ascii 字符。事实上，如果你`replace`是正确的，这将解决你的问题。不过，我建议您看一下`str.translate`and `str.maketrans`。

# asp.net-mvc - html.textbox 不可见

> ID：10590735
> 
> 赞同：0
> 
> 时间：2012-05-14T20:43:41.660
> 
> 标签：asp.net-mvc, asp.net-mvc-3

嗨，我的代码中有这样的内容：`

```
 <div>Room:@Html.TextBox("RoomID")</div>  
<div>Nume:@Html.TextBox("FirstName")</div>
<div>Prenume:@Html.TextBox("LastName")</div>
<div>Telefon:@Html.TextBox("Phone")</div>
 <div>Data Nasterii:@Html.TextBox("Birthday")</div>
<h3>Address</h3>
<div>Tara:@Html.TextBox("Tara")</div>
<div>Oras:@Html.TextBox("Oras")</div>
<div>Judet:@Html.TextBox("Judet")</div>
<div>Strada:@Html.TextBox("Strada")</div>
<div>tipclient:@Html.TextBox("GuestTypeId")</div> 
<div>Data In:@Html.TextBox("Data_Check_in")</div>
<div>Data OUT:@Html.TextBox("Data_Check_out")</div>  ` 
```

我怎样才能使它 `<div>Room:@Html.TextBox("RoomID")</div>`对客户端不可见或如何使它只读？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:45:26.993

You could use a hidden field:

```
@Html.Hidden("RoomID") 
```

or if you want to make it visible to the client but readonly:

```
@Html.TextBox("RoomID", Model.RoomID, new { @readonly = "readonly" }) 
```

or using the strongly typed versions which obviously are preferred:

```
@Html.HiddenFor(x => x.RoomID) 
```

or:

```
@Html.TextBox(x => x.RoomID, new { @readonly = "readonly" }) 
```

or if you want to use a hidden field yet another possibility is to decorate your view model property with the `[HiddenInput]` attribute:

```
[HiddenInput(DisplayValue = false)]
public int RoomID { get; set; } 
```

and in your view simply use an editor template:

```
@Html.EditorFor(x => x.RoomID) 
```

But no matter what you do or choose please use view models and strongly typed versions of those helpers.

# ubuntu - 无论“正在运行的实例”是否已经存在，如何使 Opera open -newwindow 行为一致？

> ID：10590737
> 
> 赞同：0
> 
> 时间：2012-05-14T20:43:54.247
> 
> 标签：ubuntu, opera, window-managers

我正在运行 Ubuntu 10.04 LTS。我有 4 个 Gnome 风格的工作区——一次只能在屏幕上看到 4 个工作区中的一个。

作为一名程序员，我需要定期从 bash 脚本启动嵌入式浏览器。

我需要的主要功能是浏览器必须在与调用它的 bash 脚本相同的工作区中打开，即使浏览器的另一个实例正在另一个（非活动）工作区中运行。

案例 1：没有实例在运行

1.  从脚本中以 URL 作为唯一参数运行 Opera 浏览器会显示 Speed-Dial 选项卡，以及包含我的内容的第二个选项卡。 **不良行为**
2.  更糟糕的是，如果我在上述情况下添加 -newwindow，则会生成两个窗口，一个带有快速拨号选项卡，另一个带有我的内容。**不良行为**
3.  从脚本运行 Opera 浏览器，将 URL 作为参数以及 -activetab 将我的内容显示为当前工作区中浏览器的唯一选项卡。 **这是我想要的行为！**
4.  如果我同时指定 -newwindow 和 -activetab，在上述情况下，似乎会忽略 -activetab。***参考行为***

案例 2：另一个实例正在运行

1.  从没有 URL 作为唯一参数的脚本运行 Opera 浏览器会输出“激活的运行实例”，并且网页会在该浏览器中打开。**不良行为**
2.  使用 -newwindow 选项运行 Opera 浏览器会在我当前的工作区中启动一个新窗口，其中我的内容作为浏览器的唯一选项卡。 **这是我想要的行为。**
3.  从脚本运行 Opera 浏览器并将 URL 作为参数以及 -activetab 显示替换该工作区中的内容，并在脚本窗口中仅显示“激活的运行实例”。**不良行为**
4.  如果我同时指定 -newwindow 和 -activetab，在上述情况下，似乎会忽略 -newwindow。**不一致的行为**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:34:52.020

我接受的解决方案是：

1.  始终提供 URL 和 -newwindow 作为唯一参数。
2.  启动窗口后，使用 wmctrl 删除不需要的“快速拨号”浏览器窗口（如果已创建），方法是发出：
        `wmctrl -c "Speed Dial - Opera"`

# jquery - jquerymobile attibute data-role="button" 不起作用

> ID：10590739
> 
> 赞同：0
> 
> 时间：2012-05-14T20:44:03.967
> 
> 标签：jquery, jquery-mobile

我想`data-role="button"`在窗口调整大小时从锚标记中添加或删除 jquerymobile 属性，这意味着：

```
 <a href=".." class="mobilebutton">Hello</a>

  if(windowsize < 700)
    $(".mobilebutton").attr("data-role", "button");
  else 
    $(".mobilebutton").removeAttr("data-role"); 
```

但它不起作用可能是因为页面已经创建，所以添加`data-role`属性没有效果，因为`jquerymobile.js`不知道我们添加的这个属性。谁能告诉我解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T22:29:29.053

当页面已经创建（因此标记被增强）时，您无法通过删除属性来恢复增强。

一个按钮标记：

```
<a id="myButton" href="index.html" data-role="button">Link button</a> 
```

增强后将如下所示：

```
<a id="myButton" href="index.html" data-role="button" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c">
    <span class="ui-btn-inner ui-btn-corner-all">
        <span class="ui-btn-text">Link button</span>
    </span>
</a> 
```

因此，摆脱增强标记的一种方法是手动将其替换为预增强标记：

```
$("#myButton").replaceWith('<a id="myButton" href="index.html">Link button</a>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:57:14.037

您可以在 jQueryMobile 增强标记之前触发的[pagecreate事件中调用您的逻辑。](http://jquerymobile.com/test/docs/api/events.html)

# java - 相同的 Jsoup 代码在 Android 和桌面上的行为不同

> ID：10590742
> 
> 赞同：0
> 
> 时间：2012-05-14T20:44:19.600
> 
> 标签：java, android, html-parsing, jsoup

我有 5 行简单的 Jsoup 代码来解析一些字符串，它可以顺利运行并返回一个包含我想要的值的数组列表，但是在 android 模拟器和手机上，它什么也不返回，甚至没有给出错误。

这就是整个代码：

```
Document doc = Jsoup.connect(myURL).get();
Elements els = doc.select("div font a");
for (int i = 3; i < els.size(); i++) {
    latestNews.add(els.get(i).text());
} 
```

在桌面上，它将元素添加到数组列表中，但是在设备上，什么也没有发生。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:50:44.137

您确定您从该站点接收到相同的 HTML 吗？您应该调试并检查您的`doc`变量以确保它包含与您在网站上所期望的相同的 HTML。解析整个站点时可能会抓取移动站点的情况？（不确定 Jsoup 是否阻止获取移动站点）。您可能需要设置用户代理，以便接收网站的完整桌面版本。

前任。

```
Document doc = Jsoup.connect(myURL).userAgent("Mozilla").get(); 
```

# jquery - 如何使用 jQuery 的 $.getJSON 获取 gzipped jsonp？

> ID：10590745
> 
> 赞同：0
> 
> 时间：2012-05-14T20:44:30.080
> 
> 标签：jquery, json, cross-domain, gzip, jsonp

> **可能重复：**
> [是否可以强制 jQuery 对启用了 gzip/deflate 的 URL 进行 AJAX 调用？](https://stackoverflow.com/questions/3778706/is-it-possible-to-force-jquery-to-make-ajax-calls-for-urls-with-gzip-deflate-ena)

我正在使用 jsonp 跨越两个不同的域。Domain1 使用带有回调参数的 $.getJSON 向 Domain2 询问一些 json 数据，效果很好，没有问题。

Domain2 还可以提供压缩后的 json 数据。

我想利用这个特性，但我不知道如何使用 jQuery 的 $.getJSON 从 Domain1 请求它。

这可能吗？如果可以，请给我一个例子（或任何其他解决方法）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:35:02.240

gzip 压缩您的 http 流量是一个服务器选项，它对处理内容的实际进程（在您的情况下是您的脚本）是透明的。浏览器负责 gzip 压缩，但只有在连接的双方都支持它时才会起作用（这在请求标头中进行了通信）。您还必须在服务器端启用它（例如在 apache 中使用 mod_deflate）

您声明 domain2 上的服务器支持 gzipping，因此如果您正确配置它，所有“gzippable”的流量都将自动 gzip。您不需要额外的工作。

如果您想知道您的流量是否被压缩，请查看您的 jsonp 调用的响应标头。他们应该说使用了gzip。例如，您可以在 chrome 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:27:29.433

I don't think there is a way to tell your browser what to do in this case. If this is a JSONP request we are talking about, then it is up to your browser deciding which headers get sent. A JSONP request is just another `<script>` tag.

# c# - Unity - How to be notified when an object is resolved/instanciated?

> ID：10590758
> 
> 赞同：3
> 
> 时间：2012-05-14T20:45:28.727
> 
> 标签：c#, .net, unity-container

I am currently investigating some performance issue in a big application setup with Unity. I am suspecting that we are allocating too many objects. Since Unity handles objects creation/allocation, is there an event or something that I could log when an object is resolved or created by Unity? I'd like a full trace so that I understand better what is going on.

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T06:20:30.067

我不会去定制`LifetimeManager`。如果您想知道 Unity 何时创建新对象，您应该直接从 Unity 的构建管道中获取该信息。

[在 codeplex 上](http://tecx.codeplex.com)的 TecX 项目中有一个扩展，它在容器创建对象之前和之后引发事件。查看*TecX.Unity*项目（文件夹通知）中的源代码。*TecX.Unity.Tests*中的测试展示了如何使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T21:17:34.953

尝试以自定义生命周期管理器的方式进行搜索。您可以包装对象实例化的默认生命周期管理器和日志时间。也许这个链接可以帮助你：[http ://tavaresstudios.com/Blog/post/Writing-Custom-Lifetime-Managers.aspx](http://tavaresstudios.com/Blog/post/Writing-Custom-Lifetime-Managers.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T07:36:19.410

您可以通过`UnityContainerExtension`. 构建一个在阶段添加单个构建器策略的构建器`TypeMapping`：

```
 protected override void Initialize()
    {
        Context.Strategies.Add(_builderStrategy, UnityBuildStage.TypeMapping);
    } 
```

在`PreBuildUp`方法里面`BuilderStrategy`你可以看到要解决什么，在`PostBuildUp`方法里面你可以看到已经解决了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T21:31:35.600

快速而肮脏的解决方案是在您认为被多次创建的对象的默认构造函数中添加一些日志记录代码并转储堆栈跟踪。您还可以在此代码中设置断点并在调试期间检查堆栈。

# wcf - Is there any downside to using WCF Routing Service

> ID：10590760
> 
> 赞同：0
> 
> 时间：2012-05-14T20:45:50.470
> 
> 标签：wcf, .net-4.0, wcf-routing

Its been proposed by one of my team that we implement WCF routing service to simplify the configuration of our service architecture. I understand the concept, but want to make sure there are no hidden gotcha's, bottlenecks or other issues before we move forward on it.

We use custom service classes, error handlers, dispatchers, etc. I need to make sure the routing will not interfere with these.

Can I get some general feed back on its viability/complexity?

# ruby-on-rails - NameError：未初始化的常量 LoremIpsum

> ID：10590761
> 
> 赞同：1
> 
> 时间：2012-05-14T20:45:53.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, factory-bot

我有一个使用 factory_girl_rails gem 3.2 的工厂

```
FactoryGirl.define do
  sequence(:random_string) {|n| "#{LoremIpsum.generate}#{n}" }
  factory :agenda do
    subject { generate(:random_string) }
    due_date "2012-05-14"
    completed false
    user
  end
end 
```

但我在我的 Rspec 测试中遇到了 NoNameError。我用谷歌搜索并查看了 FactoryGirl 文档，我的代码似乎是正确的。

仅供参考，我在我的测试中调用 FactoryGirl.create(:agenda, user: @user, created_at: 1.day.ago) 导致抛出错误。

我只是想为我的工厂使用随机测试生成器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:51:59.520

如果您使用 lorem-ipsum gem，请确保它在您的 gemfile 中以用于测试环境

```
gem "lorem-ipsum", :group=>:test 
```

# c - Using errno for application / library error reporting

> ID：10590762
> 
> 赞同：14
> 
> 时间：2012-05-14T20:45:54.433
> 
> 标签：c, errno

I'm writing a C library for a software project. I need to do some error reporting, but I'm a little bit too lazy to implement my own complex set of error-codes, variables and functions. Is it acceptable to use the errno facility provided by the libc for custom error reporting? All my errors fit into the categories given by the `E...` macros.

For instance, let's say my code includes a function that reads a SHA256 hash in hexdecimal notation and converts it into some sort of internal format. I want to use `errno`to report errors:

```
#include <errno.h>

int hash_fromstr(hash_t *out, const char *in) {
  /* ... */

  if (strlen(in) != 65) {
    errno = EINVAL;
    return -1;
  }

  /* ... */
} 
```

Of course this example is ridiculously simplified, in reality much more errors may happen in other functions.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T21:24:31.107

您可以随意修改 errno 的值，只要确保您的库代码在这样做之前检查 errno 是否未设置，以确保您的库代码仍然可以正确检测导致设置 errno 的内部标准故障。您还可以查看[“我应该设置 errno”](https://stackoverflow.com/questions/9856822/should-i-set-errno)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T17:12:59.520

是的，您可以对其进行修改，并且它具有线程范围，这在这种错误处理中是非常可取的。

使用 errno 错误系列 ( `E...`) 并可能对其进行扩展，这可能是一种非常强大但简单的错误处理模式。它可能被其他人认为是不好的方法，但恕我直言，它产生更清晰的代码和用于错误处理的标准化模式。

# javascript - 有没有办法改变一个已经打开的浏览器窗口的大小（或允许某些网站使用 window.resizeTo）

> ID：10590765
> 
> 赞同：1
> 
> 时间：2012-05-14T20:46:03.650
> 
> 标签：javascript, jquery, html, browser

我制作了一个允许拖放的上传器，但由于人们通常使用浏览器浏览大部分屏幕，我希望在用户单击按钮时将浏览器缩小，以便他/她更容易将文件拖入。 ..

有没有办法调整已经打开的浏览器窗口的大小......或者至少在js中最小化浏览器？

```
I know there is window.resizeTo(w,h); 
```

但这对我不起作用

**更新** 用户可以选择取消阻止特定网站的此功能吗？有没有办法让我检查用户是否允许或阻止该选项？

我还能使用 window.resizeTo(w,h); 我要弹出一个新窗口吗？？因为如果我是，我会尝试默认。

如果可能允许 resizeTo(w,h); 对于特定网站（我的意思是用户设置或在计算机上编辑某些文件而不是通过 js，即使它仅适用于某些浏览器）你是怎么做到的？（即使它真的很难我想知道）

**类似的问题**（带有如何在 chrome 中执行的答案）： [set_browser_window_size](https://stackoverflow.com/questions/5238603/javascript-set-browser-window-size)

**另一个**（这个解释了如何使用 js 检查 about:config 值） [检查 about:config with js](https://stackoverflow.com/questions/3796084/about-config-preferences-and-js)

很高兴看到支持 resizeTo 功能的浏览器列表以及版本号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:49:18.800

由于烦人的用户和恶意行为，几乎所有**新**浏览器都默认禁用此事件。

在某些浏览器中，用户允许手动启用此操作，但大约 95% 的用户将使用默认设置。要在 Firefox 上启用调整大小，您可以转到`about:config`并将`dom.disable_window_move_resize;true`属性设置为`false`

您可以随时尝试使用`window.resizeTo(w,h);`方法调整用户窗口大小，然后检查当前用户屏幕高度。即使用 jQuery 方法`var curH =$(window).innerHeight();`并`h`与`curH`以确保其调整大小。

解决您的问题的更好方法是允许用户将文件从文件夹拖动到屏幕的特定区域，或者打开带有多个文件选择的操作对话框。

**插件**

也许最好的选择是为大多数流行的浏览器使用自己的插件在您的网站上组织上传。您可以为 Chrome、Opera 和 Firefox 编写自己的代码。

**好处：**

*   用户不需要阅读大量关于如何启用某些东西的规则。只需点击几下即可安装插件。
*   良好的控制和稳定的工作。
*   您可以提供对文件上传功能的访问，而无需访问您的站点。

# python - Using SQLAlchemy with multiple self-referential foreign keys

> ID：10590766
> 
> 赞同：4
> 
> 时间：2012-05-14T20:46:05.620
> 
> 标签：python, foreign-keys, sqlalchemy, relational-database

What if I had something like a double linked list in a relational database, for example:

```
node_id    left_id    right_id

1          null       2
2          1          3
3          2          null 
```

Then I have some SQLAlchemy code like the following:

```
class NodeClass(Base):
    __tablename__ = 'nodes_table'
    node_id = Column(Integer, primary_key=True)
    left_id = Column(Integer, ForeignKey('nodes_table.node_id'))
    right_id = Column(Integer, ForeignKey('nodes_table.node_id'))
    left = relationship('NodeClass') # Wrong
    right = relationship('NodeClass') # Wrong 
```

If I have node_id 2, and I call `NodeClass.left` I would like to receive node_id 1 in return. How can I configure the SQLAlchemy relationships to behave this way?

UPDATE:

I will give a second example. Consider a table of people, and each person has a mother and a father.

```
person_id    mother_id    father_id

1            null         null
2            null         null
3            1            2 
```

The SQLAlchemy code:

```
class PersonClass(Base):
    __tablename__ = 'persons_table'
    person_id = Column(Integer, primary_key=True)
    mother_id = Column(Integer, ForeignKey('persons_table.person_id'))
    father_id = Column(Integer, ForeignKey('persons_table.person_id'))
    mother = relation('PersonClass') # Wrong
    father = relation('PersonClass') # Wrong 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:14:32.593

下面的代码展示了如何配置关系：

```
class NodeClass(Base):
    __tablename__ = 'nodes_table'
    node_id = Column(Integer, primary_key=True)

    left_id = Column(Integer, ForeignKey('nodes_table.node_id'))
    left = relationship('NodeClass', remote_side=[node_id],
            primaryjoin=('NodeClass.left_id==NodeClass.node_id'),
            backref=backref("right", uselist=False),
            #lazy="joined", join_depth=9,
            ) 
```

但有几点需要注意：

*   只存储关系的一端，推断另一端。这可能不是您想要的，但管理起来要简单得多，只设置一侧就足够了，另一侧`myNode.left = myOtherNode`( `right`) 将自动设置（因为已配置`backref`）
*   如果两端都存储（`right`和`left`），那么
    *   两端都需要在代码中设置，并且必须确保它们是一致的，这可能不是一项简单的任务
    *   `insert-1, insert-2, update-1`如果您的主键是在数据库上计算的，则需要插入两个链接的节点，因为在第一个`insert`.

**更新：**问题更新部分的示例代码（但仍使用原始类名）。只需指定`primaryjoin`and `uselist=False`：

```
class NodeClass(Base):
    __tablename__ = 'nodes_table'
    node_id = Column(Integer, primary_key=True)

    left_id = Column(Integer, ForeignKey('nodes_table.node_id'))
    right_id = Column(Integer, ForeignKey('nodes_table.node_id'))

    left = relationship('NodeClass', primaryjoin = ('NodeClass.left_id == NodeClass.node_id'), use_list=False)
    right = relationship('NodeClass', primaryjoin = ('NodeClass.right_id == NodeClass.node_id'), use_list=False) 
```

# c++ - C++ function pointer class not compiling in GCC?

> ID：10590768
> 
> 赞同：1
> 
> 时间：2012-05-14T20:46:13.873
> 
> 标签：c++, function, pointers

I'm trying to make a class that can hold and later call functions. It stores the functions in a map along with a string that holds the name of the function.

I tried doing this on Linux with GCC and got the following error: `"invalid conversion from void(*)() to void *"` on the line `functionsMap[nameOfFunction] = func;`

Here's the entire program I have so far. It's not done yet, but I'm really curious as to why this would compile under Visual C++ and not GCC. If I'm doing something wrong or could be doing something better, please let me know. Thanks!

```
#include <iostream>
#include <map>
#include <string>
using namespace std; 

class Dyn_Class{
private: 
    map<string, void *> functionsMap; 

public: 
    Dyn_Class(){} 

    template<typename ReturnValue>
    void add_func( string nameOfFunction, ReturnValue(*func)() ){
        functionsMap[nameOfFunction] = func; 
    }

    void remove_func( string nameOfFunction ){

    }

    Dyn_Class operator()(string nameOfFunction){

    }
}; 

void print(void){
    for(int index = 0; index < 9; index++){
        cout << index << "   "; 
    }
    cout << endl; 
}

int main(){
    Dyn_Class functionsList; 

    functionsList.add_func("print", print); 

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:48:51.047

To have a map of pointers to function taking no arguments and returning void you need:

```
std::map<std::string, void(*)()> functionsMap; 
```

There is no point making `add_func` a template as it will only work when instantiated with `ReturnValue = void` (unless you add a potentially unsafe cast to its implementation).

If your code compiles with Visual C++ it is because Visual C++ is being permissive.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T22:58:49.697

考虑使用 std::function 代替：

```
class Dyn_Class{
private: 
    map<string, function<void()> > functionsMap; 

public: 
    Dyn_Class(){} 

    template<typename FUNC>
    void add_func(const string& nameOfFunction, FUNC func){
        functionsMap.insert(make_pair(nameOfFunction, func));
    }

    void remove_func(const string& nameOfFunction ){

    }

    void operator()(const string& nameOfFunction){
        functionsMap[nameOfFunction]();
    }
}; 
```

好处？使用“函数”，您可以使用普通的旧函数指针，可以使用函子，也可以使用 lambda 表达式：

```
DynClass dyn;
dyn.add("print", []() { printf("Say hi"; } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:57:03.650

您可以将该函数作为参数传递，如下所示：

```
void add(void * f()){...} 
```

[如何在 C 中将函数作为参数传递？](https://stackoverflow.com/questions/9410/how-do-you-pass-a-function-as-a-parameter-in-c)

# jquery-mobile - jQuery Mobile - 禁用多选菜单标签更改 - 计数气泡

> ID：10590773
> 
> 赞同：0
> 
> 时间：2012-05-14T20:46:38.540
> 
> 标签：jquery-mobile

当使用带有多选选项的选择菜单时，jquery 会根据所选元素更改菜单的标签。

[http://jquerymobile.com/demos/1.1.0/docs/forms/selects/custom.html](http://jquerymobile.com/demos/1.1.0/docs/forms/selects/custom.html)

看到这个小提琴。当用户选择运输选项时，所选元素会显示在菜单的标签中。

[http://jsfiddle.net/VEYjV/3/](http://jsfiddle.net/VEYjV/3/)

如何禁用此功能并强制菜单保留我与之关联的标签（即选择选项）？如何禁用计数气泡功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:12:27.370

我想出了如何通过侵入 jquery.mobile 库来禁用这些功能。

从刷新调用时，我禁用了 setButtonText 和 setButtonCount 函数

```
refresh: function() {
    //this.setButtonText();
    //this.setButtonCount();
}, 
```

# matlab - Error using fmincon, hack fixes it but I'm uneasy about it

> ID：10590777
> 
> 赞同：1
> 
> 时间：2012-05-14T20:46:59.053
> 
> 标签：matlab, mathematical-optimization, nonlinear-optimization

I'm having a strange error when using fmincon. The details about the objective function and the nonlinear constraint functions are many, so I'm going to try to ask this question without describing those if possible.

The minimization requires a single input. For some but not all inputs, I get the following error:

```
Subscript indices must either be real positive integers or logicals.

Error in qpsub>eqnsolv (line 888)
    ACTSET = A(ACTIND,:);

Error in qpsub (line 157)
[Q,R,A,B,X,Z,how,ACTSET,ACTIND,ACTCNT,aix,eqix,neqcstr,ncstr, ...

Error in nlconst (line 619)
    [SD,lambda,exitflagqp,outputqp,howqp,ACTIND] ...

Error in fmincon (line 794)
[X,FVAL,LAMBDA,EXITFLAG,OUTPUT,GRAD,HESSIAN]=...

Error in PauliApproximate2.unitalChannelApproximate (line 170)
        [pc, distance] = fmincon(@objective,x0, A, b, Aeq, beq,lb,ub, @constraint,
        options); 
```

When I check to see the value of ACTIND, the error is thrown when it equals [0], hence the indexing error. Similar to the hack that the OP of [this thread](http://www.mathworks.com/matlabcentral/newsreader/view_thread/242827) used, before the line (in qpsub)

```
ACTSET = A(ACTIND,:); 
```

I put the if statement:

```
 if max(ACTIND) < 1
        ACTIND = [1];
    end 
```

From preliminary testing this seems to "Fix" the problem. It is giving sensible results for inputs that used to throw the error (in that it is returning a good minimum value and the constraints are satisfied to within tolerance), and is returning the same results it always did for inputs that didn't have the error (obviously, as the if statement won't be invoked). So my question is, for people that know the inner workings of these functions, how bad is this? Am I sidestepping a horrible issue that results in ACTIND being [0] that I shouldn't be?

# powershell - PSSession display browser on remote computer

> ID：10590784
> 
> 赞同：1
> 
> 时间：2012-05-14T20:47:25.433
> 
> 标签：powershell, process

My goal is to display the (default) browser and open a specific URL on a remote session.

1 Create PSSession on a remote computer => OK

> $computerName = "yannTPI-1"
> 
> $credential = get-credential
> 
> $session = new-PSSession -computerName $computerName -credential $credential

2 Run a script => OK

> invoke-command -session $session -filePath $file

3 On that script... Open browser (many way...)

> [System.Diagnostics.Process]::Start("http://stackoverflow.com")
> 
> start [http://stackoverflow.com](http://stackoverflow.com)

And it works, under processes I can see a process corresponding to my browser. On my remote computer I'm connected with another account that the one I use to connect to it with PSSession. So it does not display as it is not the same User Name.

How can I force the display of the browser to another user ?

Sorry english is not my mother tongue, hope I'm clear enaugh.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:07:39.647

我尝试了我想做的安静的事情：

> psexec -d "c:\program files\internet explorer\iexplore.exe"

IE 启动但窗口全黑 - 我需要添加语法 -i [UserName/Pwd]

我还发现： *不幸的是，当您使用特定的用户帐户时，PsExec 会将凭据以明文方式传递给远程工作站，从而将凭据暴露给碰巧“监听”的任何人。* 资料来源：[PsExec 安全 -i](http://blog.isdecisions.com/post/13298789101/remoteexec-vs-psexec-not-is-the-same-league)

我还尝试了 WM，但出现了很大的图形问题。(Win7)

无论如何，即使我能够正确打开浏览器，有没有办法打开特定的 URL？如果没有，我不会再尝试。

资料来源：[Windows Systernals PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:32:05.397

你不能。在 PowerShell 远程处理和 WMI 远程处理中无法进行远程交互会话。如果这是您需要做的事情，您应该使用 PSExec！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T14:58:42.300

psexec.exe \machinename -u DOMAIN\username -i -d "c:\program files\internet explorer\iexplorer.exe" [http://www.webpage.com](http://www.webpage.com)

这将显示在登录用户的当前 shell 中。

# wpf - WPF CodedUI 测试：以编程方式启动应用程序

> ID：10590785
> 
> 赞同：2
> 
> 时间：2012-05-14T20:47:34.897
> 
> 标签：wpf, coded-ui-tests

如果我记录将登录凭据输入到对话框中的操作并在 UImap1.uitests 中调用此 Submit()。自动生成的代码将如下所示：

```
 public void Launch()
    {
        #region Variable Declarations
        WpfEdit uIUsernameBoxEdit = this.UIOCC600OILoginWindow.UIUsernameBoxEdit;
        WpfEdit uIPasswordBoxEdit = this.UIOCC600OILoginWindow.UIPasswordBoxEdit;
        WpfButton uIOKButton = this.UIOCC600OILoginWindow.UIOKButton;
        #endregion

        // Type 'username' in 'usernameBox' text box
        uIUsernameBoxEdit.Text = this.LaunchParams.UIUsernameBoxEditText;

        // Click 'passwordBox' text box
        Mouse.Click(uIPasswordBoxEdit, new Point(63, 13));

        // Type '********' in 'passwordBox' text box
        Keyboard.SendKeys(uIPasswordBoxEdit, this.LaunchParams.UIPasswordBoxEditSendKeys, true);

        // Click 'OK' button
        Mouse.Click(uIOKButton, new Point(33, 14));
    } 
```

现在，如果我在 CodedUI 测试类中使用 ClassInitialize 修饰的方法手动启动应用程序，如下所示：

```
 [ClassInitialize()]
        public static void MyTestInitialize(TestContext context)
        {
           Process.Start(@"C:\Program Files (x86)\MyCompany\MyApp.exe");
            Playback.Wait(2000);

            var uimap = new LaunchApplicationMap();
            var loginParams = uimap.EnterLoginCredentialsParams;
            loginParams.UIUsernameBoxEditText = "username";
            loginParams.UIPasswordBoxEditSendKeys = Playback.EncryptText("password
");
            uimap.Launch();
            Playback.Wait(5000);
        } 
```

为什么我会得到如下所示的空异常？

![在此处输入图像描述](../Images/b2d6033a0aeab6f18f6c376c082b6181.png)

这也是堆栈跟踪：

```
System.NullReferenceException was unhandled by user code
  Message=Object reference not set to an instance of an object.
  Source=Microsoft.VisualStudio.TestTools.UITest.Framework
  StackTrace:
       at Microsoft.VisualStudio.TestTools.UITest.Framework.UITestService.TechnologyManagerByName(String technologyName)
       at Microsoft.VisualStudio.TestTools.UITesting.UITestControl.ValidateSearchProperties()
       at Microsoft.VisualStudio.TestTools.UITesting.UITestControl.FindInternal()
       at Microsoft.VisualStudio.TestTools.UITesting.UITestControl.FindControlIfNecessary()
       at Microsoft.VisualStudio.TestTools.UITesting.UITestControl.SetProperty(String propertyName, Object value)
       at Microsoft.VisualStudio.TestTools.UITesting.WpfControls.WpfEdit.set_Text(String value)
       at UITests.UIMaps.LaunchApplicationMapClasses.LaunchApplicationMap.Launch() in C:\dev\OCC600\Source - Copy\Tests\UITests\UIMaps\LaunchApplicationMap.Designer.cs:line 44
       at UITests.LogsViewTests.MyTestInitialize(TestContext context) in C:\dev\OCC600\Source - Copy\Tests\UITests\LogsViewTests.cs:line 70
  InnerException: 
```

TIA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T04:50:34.307

您需要初始化播放引擎以在测试方法之外使用 CodedUI。该框架会在 testinitalize/cleanup 方法中自动初始化播放/清理，因此您看不到它。

ClassInitialize/AssemblyInitialize 发生在任何测试开始之前，因此您必须调用 Playback.Initialize()。

# c++ - is it possible to color one given line in console without writing text to it?

> ID：10590791
> 
> 赞同：3
> 
> 时间：2012-05-14T20:47:49.297
> 
> 标签：c++, windows, console

Normally this is done by `SetConsoleTextAttribute()` and then writting text. But it is possible to change line colors after text has been written to the line ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:55:19.017

至少如果记忆有用，[`WriteConsoleOutputAttribute`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687407.aspx)可以做到这一点。

编辑：...或者，如果您想要一个块都设置为相同的属性，您可以使用[`FillConsoleOutputAttribute`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682662.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:49:37.457

不，但是您可以将光标设置回该行，更改颜色，重写文本，然后跳回到跳转之前光标所在的位置进行重写。

我不是专业的 C++ 程序员（尽管今天穿着我的“Hello World！”T 恤☺），所以我不能给你任何帮助......

# objective-c - How can I have a default file selected for opening in an NSOpenPanel?

> ID：10590794
> 
> 赞同：2
> 
> 时间：2012-05-14T20:48:02.557
> 
> 标签：objective-c, xcode, nsopenpanel

The old way was `[ MyPanel runModalForDirectory: thedir file: thefile ]`, and the panel would open in the specified directory with the specified file already selected.

That's deprecated; we're supposed to use runModal now, but I don't see any way to set the selected file name. I've tried including it in the string for setDirectoryURL, I've tried setRepresentedFilename, I've tried setNameFieldStringValue ... obviously it's possible to do this somehow, but I'm not having any luck with the internet search terms I've chosen, nor with Apple's documentation....

Thanks if you can help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:51:51.157

文档列出了[`setDirectoryURL:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSavePanel_Class/Reference/Reference.html#//apple_ref/doc/uid/20000309-SW24)&[`setNameFieldStringValue:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSavePanel_Class/Reference/Reference.html#//apple_ref/doc/uid/20000309-SW24)在 10.6 及更高版本中可用：

```
NSString *defaultDirectoryPath, *defaultName;
NSOpenPanel *openPanel;
...
[openPanel setNameFieldStringValue:defaultName];
[openPanel setDirectoryURL:[NSURL fileURLWithPath:defaultDirectoryPath]];
[openPanel runModal]; 
```

# c++ - 使用 SIMD 查找表

> ID：10590798
> 
> 赞同：14
> 
> 时间：2012-05-14T20:48:32.573
> 
> 标签：c++, sse, simd

我有一个大像素处理功能，我目前正在尝试使用内在函数进行优化。

作为 SSE 新手，我不确定如何处理涉及查找表的代码部分。

基本上，我正在尝试对以下 vanilla C++ 代码进行矢量化：

```
 //outside loop
const float LUT_RATIO = 1000.0F;

//in loop
float v = ... //input value
v = myLookupTable[static_cast<int>(v * LUT_RATIO)]; 
```

我正在尝试什么：

```
//outside loop
const __m128 LUT_RATIO = _mm_set1_ps(1000.0F);

//in loop
__m128 v = _mm_set_ps(v1, v2, v3, v4); //input values
__m128i vI = _mm_cvtps_epi32(_mm_mul_ps(v, LUT_RATIO)); //multiply and convert to integers
v = ??? // how to get vI indices of myLookupTable? 
```

编辑：ildjarn 提出了一个需要我澄清的观点。我不是想加速查找表代码，我只是想避免将寄存器存储回专门用于查找的浮点数，因为这部分夹在理论上可以从 SSE 中受益的两个其他部分之间。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-14T21:03:28.120

如果您可以等到明年，那么英特尔的 Haswell CPU 将配备 AVX2，其中包括用于收集负载的指令。这使您可以在一条指令中执行例如 8 个并行 LUT 查找（参见例如`VGATHERDPS`）。除此之外，你运气不好，除非你的 LUT 非常小（例如 16 个元素），在这种情况下你可以使用`PSHUFB`.

# c# - 如何禁止验证错误的自动数据绑定

> ID：10590800
> 
> 赞同：2
> 
> 时间：2012-05-14T20:48:50.190
> 
> 标签：c#, wpf, data-binding, mvvm

我正在使用 MVVM 作为中继命令和数据绑定在 C# WPF 中创建一个简单的数据库应用程序。对于我使用的数据库内容的内存存储`ObservableCollection`，它绑定到 Datagrid，如下所示：

`<DataGrid ItemsSource="{Binding Path=Softwares, Mode=OneWay}" SelectedItem="{Binding Path=SoftwareSelection, Mode=TwoWay}">`

选择项目时，用户可以选择对其进行编辑。对于编辑，打开一个带有一堆文本框的表单，其中包含给定实体的数据。使用 验证所有字段`IDataErrorInfo`，除非所有文本框都有效，否则不会启用 ok 按钮，因此无法将更改保存到集合和数据库中。

以下是示例文本框的外观：

`<TextBox Text="{Binding Name, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}"/>`

但棘手的部分是，如果我更改文本框中的某些值然后关闭窗口，新值会传播到`ObservableCollection`我不想这样做的 . 你有什么想法，如何防止这种行为？我希望只有在单击按钮后才能进行数据绑定。否则数据绑定工作得很好，所以按钮（禁用/启用）在单击后启用和反映对数据库和集合的更改。两个视图都由不同的 ViewModel 提供服务，视图之间的数据通过触发事件传递。

我试图添加到`DataGrid` `UpdateSourceTrigger=Explicit`ItemsSource 绑定，但没有帮助。也许，我错过了一些应用程序逻辑？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:21:50.830

这是大多数 WPF 开发人员犯错误的地方！

在 MVVM 中，脏数据可以存储在`ViewModel`VM 层中！它模仿了`View`from`Model`的观点，并且因为`View`是错误的，所以`ViewModel`也会在错误中。那是完全有效的。

话虽如此，问题仍然存在

> 您将如何不允许**临时**/**脏**数据流向您的 ObservableCollection？

两种方式...

1.  如果您`ObservableCollection`特定于您的模型类（例如`MyItem`），那么如果您的模型类（`MyItem`）是一个实体类\DAL 类\NHibernate 类，则创建一个`MyItem`名为`ViewModelMyItem`然后的类的包装器，而不是`ObservableCollection<MyItem>`使用`ObservableCollection<ViewModelMyItem>`。

    这样，来自您的脏数据`View`将在内部，并且只有在单击按钮时`ViewModelMyItem`才能合法地飞回您的模型类（`MyItem`） 。`Save`这意味着在`Save Command`' 的委托中，如果验证正常，`Execute()`您可以将 ' 的属性复制`ViewModelMyItem`到' 的属性中。`Item``ViewModelMyItem`

    因此，如果`Item`是一个`EntityType`类/`NHibernate`类/`WCF`客户端模型类，它总是只有有效数据，因为`ViewModelMyItem`它预先过滤了临时/脏信息。

2.  您可以使用`Explicit`绑定模型。除非明确调用，否则它会阻止`TwoWay`数据流回源。`Item``BindingExpressions.UpdateSource()`

    但据我说，这以直接的方式击败了 MVVM，因为`ViewModel`不会有 UI 显示的内容！但是，您仍然可以使用 * *Attached Behavior **通过留在 MVVM 空间中来管理显式绑定！

让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:57:00.447

您最好将代码放入域对象的属性设置器中。然后通过触发处理程序与视觉效果同步`NotifyPropertyChanged`。

有关此主题的更多信息：http:
[//msdn.microsoft.com/en-us/library/ms743695.aspx](http://msdn.microsoft.com/en-us/library/ms743695.aspx)
[http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T23:49:57.547

将绑定模式设置为显式应该要求您调用绑定表达式 UpdateSource() 方法将更改发送回您的模型。因为您只提到您在 DataGrid 的绑定上设置了 Explicit，所以我猜您只需要确保在直接绑定回您的模型的任何属性上明确设置了该模式。比如你的 TextBox 的 Text Binding，在上面的例子中。这可能会解决您的问题，但需要您以一种或另一种方式在每个目标的 BindingExpression 上调用 UpdateSource() 。

如果您使用主流 ORM 之一（EF、Linq to SQL 等），那么您的实体很可能会自动实现 INotifyPropertyChanged 和 INotifyPropertyChanging。因为您正在共享对您的单个实例的引用，所以您编辑中的所有更改都将反映在您的主视图以及绑定到该实例的任何其他内容中。作为更肮脏的替代方案，您可以只创建一个相同类型的单独实例，并在窗口的对话框结果为真时手动将值复制回来。

第一种方法需要您手动更新绑定，第二种方法需要您手动更新 Edit 实例中的值。

使用更多代码，我可以帮助您采用特定方法。

# jquery - jQuery 发现不适用于 AJAX 函数

> ID：10590802
> 
> 赞同：0
> 
> 时间：2012-05-14T20:48:53.513
> 
> 标签：jquery, ajax, pagination

我正在尝试使用 jQuery 设置一个相对简单的 AJAX 分页，如下所示：

```
$('.pagination a').on('click', function(e) {
        e.preventDefault();

        $.ajax({
            type    : 'GET',
            url     : $('.pagination a').attr('href'),
            success : function(html) {
                // Get older pager
                var oldPager = $(html).find('.pagination a'); // Not working
            }
        });
}); 
```

出于某种原因，即使它确实存在，我也无法获得下一页的分页链接，如果我`console.log($(html))`确实获得了所有现有元素，包括`.pagination`带有标签的 div，则`a`不确定该`find`方法不会返回任何内容。我过去做过这样的事情，我不记得有这么多麻烦。

这是`html`帮助调试的字符串：http: [//pastebin.com/dD8GnG78](http://pastebin.com/dD8GnG78)它基本上是下一页的 html。我还尝试`console.log($(html).find('div'))`仅进行测试，并注意到并非所有人`divs`都因某种原因而被退回。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:03:50.980

目前您正在寻找对象。

你在寻找它的 href 属性吗？

`$(html).find('.pagination a').attr("href");`

还是锚标记内的标记/文本？

`$(html).find('.pagination a').html();` .. 或者`.text();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:04:13.113

在不知道您实际尝试做什么的情况下，我认为问题出在您的 jQuery 选择器上：

网址：`$('.pagination a').attr('href')`

应该：

网址：`$(e.target).attr('href')`

而且，您的变量“oldPager”意味着什么？您现在拥有它的方式，它将包含您刚刚通过 AJAX 调用请求的 HTML 中的所有分页锚。

**编辑：**

好的，试试这个：

```
var oldPager = $(html).filter('.pagination').find('a'); 
```

# c# - Selenium WebDriver for C# - Popup Dialog Boxes

> ID：10590803
> 
> 赞同：1
> 
> 时间：2012-05-14T20:48:58.850
> 
> 标签：c#, selenium, dialog, webdriver

Is there any support for working with popup dialogs (specifically file downloads) in c#?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:18:01.533

对于弹出窗口对话框，您可以使用警报来捕获：

```
IAlert alert = driver.SwitchTo().Alert();
alert.Accept(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T02:17:49.217

不，没有——至少不是本地的。

WebDriver 只与网页交互。弹出对话框一旦被实例化，就会成为操作系统的域而不是网页。

您可以通过使用您正在检索或发送到服务器的内容发出 POST 或 GET 来绕过文件下载/上传对话框。

您可以使用 AutoIt 或 Windows 自动化 API 等工具与其他对话框窗口进行交互。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T01:18:45.030

来自 WebDriver FAQ：WebDriver 提供了处理多个窗口的能力。这是通过使用“WebDriver.switchTo().window()”方法切换到具有已知名称的窗口来完成的。如果名称未知，您可以使用“WebDriver.getWindowHandles()”获取已知窗口的列表。您可以将句柄传递给“switchTo().window()”。

完整的[常见问题解答](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q%3a_How_do_I_handle_pop_up_windows)在这里。

来自 Thoughtworks 的[示例](http://www.thoughtworks-studios.com/docs/twist/2.3/help/how_do_i_handle_popup_in_selenium2.html)

```
 String parentWindowHandle = browser.getWindowHandle(); // save the current window handle.
      WebDriver popup = null;
      Iterator<String> windowIterator = browser.getWindowHandles();
      while(windowIterator.hasNext()) { 
        String windowHandle = windowIterator.next(); 
        popup = browser.switchTo().window(windowHandle);
        if (popup.getTitle().equals("Google") {
          break;
        }
      } 
```

下面是从 Java 转换为 C# 的示例（替换了不推荐使用的方法）

```
 String parentWindowHandle = _browser.CurrentWindowHandle; // save the current window handle.
        IWebDriver popup = null;
        var  windowIterator = _browser.WindowHandles;

        foreach (var windowHandle in windowIterator)
        {
            popup = _browser.SwitchTo().Window(windowHandle);

            if (popup.Title == "Google")
            {
                break;
            }
        } 
```

# asp.net - 使用 IE 的 Gridview 中的复选框

> ID：10590804
> 
> 赞同：1
> 
> 时间：2012-05-14T20:48:59.810
> 
> 标签：asp.net, internet-explorer, gridview, checkbox

我遇到了一个奇怪的问题。我正在尝试查看在 gridview 中选择了哪些复选框。我的代码看起来像我在互联网上找到的示例，在 FF 和 Chrome 中工作，但在 IE9 中失败。在 IE9 中，checked 属性永远不会返回 true。我已经单步执行了代码，并验证了它正在查看正确的复选框，但 IE 将始终返回 false。

有没有人有任何想法？下面是我的标记和代码隐藏。

```
 <asp:GridView ID="gvParts" runat="server" 
      AllowSorting="True" AutoGenerateColumns="False"
      CellPadding="5" DataKeyNames="Rec_ID" DataSourceID="dsParts" 
      PageSize="50" Width="100%">
        <Columns>
            <asp:TemplateField HeaderText="Select">
                <HeaderTemplate>
                    Select
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:CheckBox ID="chkSelect" runat="server"/>
                </ItemTemplate>
                <ItemStyle HorizontalAlign="Center" Width="75px" />
            </asp:TemplateField>
            <asp:BoundField DataField="Arcft_Make" HeaderText="Make" 
                SortExpression="Arcft_Make" >
            <HeaderStyle HorizontalAlign="Left" />
            <ItemStyle HorizontalAlign="Left" />
            </asp:BoundField>
            <asp:BoundField DataField="Arcft_Model" HeaderText="Model" 
                SortExpression="Arcft_Model" >
            <HeaderStyle HorizontalAlign="Left" />
            <ItemStyle HorizontalAlign="Left" />
            </asp:BoundField>
            <asp:BoundField DataField="Source_Name" 
                            HeaderText="Source_Name" 
                            SortExpression="Source_Name" 
                            DataFormatString="{0:d}" 
                            HtmlEncode="false">
            <HeaderStyle HorizontalAlign="Left" />
            <ItemStyle HorizontalAlign="Left" />
            </asp:BoundField>
            <asp:BoundField DataField="Part_Number" 
                            HeaderText="Part Number" 
                            SortExpression="Part_Number" >
            <HeaderStyle HorizontalAlign="Left" />
            <ItemStyle HorizontalAlign="Left" />
            </asp:BoundField>
            <asp:BoundField DataField="Vendor_Part_Number" 
                            HeaderText="Vendor Number" 
                            SortExpression="Vendor_Part_Number" >
            <HeaderStyle HorizontalAlign="Left" />
            <ItemStyle HorizontalAlign="Left" />
            </asp:BoundField>
            <asp:BoundField DataField="Vendor_Name" 
                            HeaderText="Vendor Name" 
                            SortExpression="Vendor_Name" >
            <HeaderStyle HorizontalAlign="Left" />
            <ItemStyle HorizontalAlign="Left" />
            </asp:BoundField>
            <asp:BoundField DataField="Descr" 
                            HeaderText="Description" 
                            SortExpression="Descr">
                <HeaderStyle HorizontalAlign="Left" />
                <ItemStyle Width="300px" HorizontalAlign="Left" />
            </asp:BoundField>
            <asp:BoundField DataField="Date_Added" 
                            HeaderText="Date_Added" 
                            SortExpression="Date_Added">
            <HeaderStyle HorizontalAlign="Left" />
            <ItemStyle HorizontalAlign="Left" />
            </asp:BoundField>
            <asp:BoundField DataField="Rec_ID" 
                            ReadOnly="True" Visible="False">
                <ItemStyle Width="0px" />
            </asp:BoundField>
            <asp:CommandField ShowEditButton="True" />
        </Columns>
        <SelectedRowStyle BackColor="#FFFFCC" />
        <AlternatingRowStyle BackColor="#CCFFFF" />
    </asp:GridView> 
```

`

和

```
Protected Sub btnAdd_Click(ByVal sender As Object, ByVal e As System.EventArgs) 
                         Handles btnAdd.Click
    Dim Rec_IDs As New List(Of String)
    Dim Rec_ID As Int32
    Rec_IDs = Session("Rec_IDs")
    For Each Row As GridViewRow In gvParts.Rows
        If CType(Row.FindControl("chkSelect"), CheckBox).Checked Then
            Rec_ID = gvParts.DataKeys(Row.RowIndex).Value
            If Not Rec_IDs.Contains(Rec_ID) Then
                Rec_IDs.Add(Rec_ID)
            End If
            CType(Row.FindControl("chkSelect"), CheckBox).Checked = False
        End If
    Next
    Session("Rec_IDs") = Rec_IDs
    lblCount.Text = String.Format("You have {0} records selected",   
                                   Rec_IDs.Count.ToString)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:16:06.097

好的，解决了。我的 gridview 不在我的表单标签内。我猜IE不喜欢那样。

# ios - ios 我的对象没有被释放

> ID：10590806
> 
> 赞同：2
> 
> 时间：2012-05-14T20:49:05.333
> 
> 标签：ios, memory-management, automatic-ref-counting

```
- (void)fadeOutSplash {
    UIImageView *splash = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default-Landscape~ipad.png"]];
    [self.window.rootViewController.view addSubview:splash]; // <-- OBJECT IS BEING RETAINED HERE

    [UIView animateWithDuration:0.5 
                     animations:^{
                         splash.alpha = 0;
                     }
                     completion:^(BOOL finished) {
                         [splash removeFromSuperview];
                     }];
} 
```

我认为当我将 ARC 添加到`rootViewController`. 当我运行动画完成时，ARC 应该释放“飞溅”，因为它会从它自己的超级视图中删除我的“飞溅”。但是，我可以在分配工具中看到这个父视图控制器保持分配状态，并且它显示问题行是在哪里添加了 splash 到`rootViewController`. 我能做些什么来确保“飞溅”被释放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:36:25.290

我解决了这个问题，但我不确定如何......这是可能的解决方案：

```
- (void)removeFromSuperView
{
    // Use this space to manually release any non IB pointers / variables as needed
    self.someDictionaryIMadeInInit = nil;

    while(self.subviews.count > 0) [[self.subviews objectAtIndex:0] removeFromSuperView];
    [super removeFromSuperView];
} 
```

这是我为 ARC 相关视图提出的一个小技巧。我更推荐它作为最后的手段，因为这确实应该以适当的方式解决，但值得一试，以免你扯掉头发！

# asp.net - ASP.NET Membership - LDAP Authentication Against Apache DS

> ID：10590807
> 
> 赞同：1
> 
> 时间：2012-05-14T20:49:11.780
> 
> 标签：asp.net, authentication, ldap

I am trying to set up a custom ASP.NET membership provider to authenticate using LDAP and Apache DS. This is what my web.config entry looks like:

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
<add name="DefaultMembershipProvider"
     type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.0.0,Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
     connectionStringName="ADConnectionString"
     connectionProtection="None"
     connectionUsername="uid=myid, O=this domain"
     connectionPassword="mypwd"
     attributeMapUsername="sAMAccountName"
     enableSearchMethods="True" /> 
```

I am not having much luck here, probably owing to the fact that I have no idea what I am doing. I am hoping someone can at least verify I am headed in the right direction?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:15:41.773

您不能将 ActiveDirectoryMembershipProvider 用于 LDAP，它需要一个真正的 ActiveDirectory 服务器。除非 Apache DS 模拟 AD，否则您将无法使用它。

您将要做一个自定义会员提供程序。这里有一个工作示例：

[http://forums.asp.net/t/970391.aspx/1](http://forums.asp.net/t/970391.aspx/1)

# objective-c - How to play a simple system sound

> ID：10590811
> 
> 赞同：3
> 
> 时间：2012-05-14T20:49:28.847
> 
> 标签：objective-c, ios, audio

I just need to play a simple sound, I have app that send messages, and I need to play "message sent" system sound when message get sent.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T20:55:06.347

这就是我播放系统滴答声的方式。尽可能简单。只需找到您要播放的声音的名称即可。

不要忘记导入`#import <AVFoundation/AVFoundation.h>`
并添加`AVFoundation.framework`目标的构建阶段。

```
AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:[[NSBundle bundleWithIdentifier:@"com.apple.UIKit"] pathForResource:@"Tock" ofType:@"aiff"]] error:NULL];
[audioPlayer play]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:54:01.183

查看`AudioServicesPlayAlertSound`iOS[系统声音服务参考](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html)

# javascript - 如何在 PhoneGap 中从 SD 卡中读取文件？

> ID：10590816
> 
> 赞同：0
> 
> 时间：2012-05-14T20:49:46.993
> 
> 标签：javascript, file, cordova

我正在尝试遵循 PhoneGap 文档中提供的示例，除了在 onDeviceReady 中调用 window.requestFileSystem... 之外，我在实际需要访问某个文件时调用它。出于某种原因，我的代码似乎没有越过那条线。

```
function pullSelectRecord(link)
{
    selectedFile = link;
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
        alert("this is" + selectedFile);
        fileSystem.root.getFile(link, null, gotFileEntry, fail);
    }

    function gotFileEntry(fileEntry) {
        fileEntry.file(gotFile, fail);
    }

    function gotFile(file){
        readDataUrl(file);
        readAsText(file);
    }

 function readAsText(file) {
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            alert(evt.target.result);
        };
        reader.readAsText(file);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:26:13.043

您可以从任何地方调用 requestFileSystem。如果您没有越过那条线，您需要查看“adb logcat”以查看错误可能是什么。另外，请确保您的 Manifest.xml 具有写入外部存储权限。

# glsl - WebGL GLSL Shader：访问texture2D会覆盖其他纹理

> ID：10590819
> 
> 赞同：5
> 
> 时间：2012-05-14T20:50:00.877
> 
> 标签：glsl, textures, shader, webgl

我对 WebGL 中的 glsl 有一个非常令人不安的问题。

此着色器按预期工作：

```
uniform sampler2D tColor;
uniform sampler2D tNormal;
varying vec2 vUv;

void main() {
    gl_FragColor = texture2D( tColor, vUv );
} 
```

但是这个行为完全不同：

```
uniform sampler2D tColor;
uniform sampler2D tNormal;
varying vec2 vUv;

void main() {
    vec4 test = texture2D( tNormal, vUv );
    gl_FragColor = texture2D( tColor, vUv );
} 
```

通过访问 tNormal 纹理，tColor 纹理被覆盖。这怎么可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T22:54:40.630

过去我看到过类似的行为，这几乎总是因为我不正确地绑定我的纹理。最近的事件是在我尝试像这样绑定我的纹理时引起的：

```
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, colorTexture);
gl.uniform1i(colorUniform, gl.TEXTURE0);

gl.activeTexture(gl.TEXTURE1);
gl.bindTexture(gl.TEXTURE_2D, normalTexture);
gl.uniform1i(normalUniform, gl.TEXTURE1); 
```

当正确的语法实际上是：

```
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, colorTexture);
gl.uniform1i(colorUniform, 0); // 0 to indicate texture unit 0!

gl.activeTexture(gl.TEXTURE1);
gl.bindTexture(gl.TEXTURE_2D, normalTexture);
gl.uniform1i(normalUniform, 1); // 1 to indicate texture unit 1! 
```

这是一个相当常见的错误，不幸的是，WebGL 实际上并没有在第一个代码片段（WebGL 邮件列表中最近讨论的主题）上抛出错误，而且它似乎在有限的情况下工作，所以很容易错误地认为这是有效的代码。

我不知道这是否是您的具体问题，但这可能是我可以提供的最佳建议，无需进一步详细信息。

# php - 如何将变量与下划线和其他单词结合起来？

> ID：10590823
> 
> 赞同：1
> 
> 时间：2012-05-14T20:50:28.287
> 
> 标签：php, variables, concatenation

我需要将 $variable 与下划线和这样的单词结合起来：

$agent = agent id 词是“拒绝”。

```
$newvar = $agent_declined; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:52:50.030

像这样：`$newvar = $agent . "_declined";`

在 PHP 中，您可以使用以下方式组合字符串`.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:54:05.443

使用串联：

```
<?php

$newvar = $agent . "_declined";

?> 
```

在这里阅读[！](http://php.net/manual/en/language.operators.string.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T20:52:46.010

像这样？

```
$agent_declined = "foobar";
$id = "declined";
$varname = "\$agent_" . $id
$newvar = $$varname; // should give foobar 
```

我建议不要使用 double `$$`，这很令人困惑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T21:01:13.380

试试这个：

```
${$variableName.'_declined'} = 'foo'; 
```

有关详细信息，请参阅[PHP：变量变量](http://us3.php.net/manual/en/language.variables.variable.php%20%22PHP%3a%20Variable%20variables)

# magento - 如何将零售店信息编入 Magento 网站

> ID：10590824
> 
> 赞同：1
> 
> 时间：2012-05-14T20:50:29.520
> 
> 标签：magento

我们正在尝试做一些有趣但具有挑战性的事情：

我们的 B2C 网站（非 Magento）上列出了数千种产品，出于各种原因，我们正在考虑将网站移至 Magento。产品页面提供有关这些产品的详细信息。我们的用户群现在希望我们提供有关他们可以购买这些产品的零售商店的本地信息；所需信息是零售店名称、地址、邮编、电话和谷歌地图显示（最后一项是可选的）。

在前端，每​​个产品详细信息页面将根据产品以及根据用户的 zip 显示相关零售商。每个用户将看到最多 5 个附近的零售商。

我的问题是：我们怎样才能最好地在 Magento 中进行设置，以便我们可以：

1.  将产品映射到retail_outlets，magento 允许将产品映射到类别。产品和销售点将具有多对多的关系，我们正在寻找易于维护的东西。
2.  将用户的邮编映射到零售商信息。

如果更合适，我们愿意使用 magento 1.7。

提前致谢。-TM值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:47:22.863

这不是这个问题的正确位置，因为它与编程无关，也没有代码示例，而且过于笼统:(请阅读常见问题解答

但总的来说，您需要：

1.  为您的所有零售店添加产品属性（多选）并将可能的零售商添加到产品中
2.  如果他还没有 jet ，请让用户输入一个 zip 。`quote->getShippingAddress()->getPostcode();`如果您的用户已注册或其他内容，您可以从中获取此信息
3.  在详细信息页面上通过 zip 查询您的零售商。这将需要您使用 MySQL 实现地理/空间搜索。

# linux - 可以更改动态 libc.so 地址吗？

> ID：10590829
> 
> 赞同：4
> 
> 时间：2012-05-14T20:51:01.407
> 
> 标签：linux, gcc, ld

命令

```
gcc main.c -o main
ldd main 
```

屈服

```
linux-gate.so.1 => (0x00f67000)
libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0x00b7d000)
/lib/ld-linux.so.2 (0x00ae5000) 
```

是否可以更改 libc.so.6 将在内存中映射的地址？例如，将 libc.so.6 映射到例如 0xb0000000。

我正在运行 Xubuntu 32 位：Linux 3.2.0-23-generic i686 i686 i386 GNU/Linux

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:12:11.927

有一个`prelink`实用程序（[wiki 页面](http://en.wikipedia.org/wiki/Prelink)）能够更改 so 库的加载地址（称为“基地址”）。

有一些关于预链接如何工作的信息：[http ://www.acsu.buffalo.edu/~charngda/e​​lf.html](http://www.acsu.buffalo.edu/%7Echarngda/elf.html)

> 这个预链接有什么作用？当动态库加载到内存中时，它将动态库的基地址更改为用户程序地址空间中的实际地址。当然，ld.so 识别 GNU_PRELINKED 标记并将动态库加载到它的这个基地址（回忆 mmap 的第一个参数是首选地址；当然，这取决于操作系统。）
> 
> 通常，动态库构建为位置无关代码，即 -fPIC 编译器命令行选项，因此基地址为 0。例如，普通的 libc.so 具有如下 ELF 程序头（`readelf -l`命令）...

根据[`man prelink`](http://linux.die.net/man/8/prelink)prelink 实用程序的一个选项，可以将给定库重新定位（重新定位）到指定地址：

> `-r --reloc-only=ADDRESS` 无需预先链接，只需将给定的共享库重新链接到指定的基地址即可。

`prelink --reloc-only=0x7896000 libc.so.6`应该足以实现您想要的更改。

PS：您可以在您的本地 libc 副本上执行此重定位，然后通过`export LD_LIBRARY_PATH=/path/to/your/rebased/copy:$LD_LIBRARY_PATH`

# html - 使用 d3.js svg 库在智能手机上冻结

> ID：10590830
> 
> 赞同：1
> 
> 时间：2012-05-14T20:51:01.480
> 
> 标签：html, web-applications, d3.js

我正在开发一个网页，该网页使用 d3.js 库来制作动画无向图形视觉效果，但我发现（经过大量工作后）它在移动设备上运行得如此冻结。

您知道此类问题的任何解决方案，还是我需要改变创建视觉效果的方式？例如是使用 html5 canvas 更优雅的解决问题吗？

谢谢大家的回答：）

# python - 导入我自己的模块时出现 Python 路径问题。最好的方法是什么？

> ID：10590840
> 
> 赞同：2
> 
> 时间：2012-05-14T20:51:38.973
> 
> 标签：python

我已经创建了 python 模块，但它们位于不同的目录中。

```
/xml/xmlcreator.py
/tasklist/tasks.py 
```

在这里，tasks.py 正在尝试导入 xmlcreator，但两者都在不同的路径中。一种方法是在 Pythonpath 中包含 xmlcreator.py。但是，考虑到我将发布代码，这似乎不是[这里](https://stackoverflow.com/questions/279237/python-import-a-module-from-a-folder)建议的正确方法。因此，我如何包含 xmlcreator 或更确切地说是我可能编写的任何模块，这些模块将位于各种目录和子目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:59:19.667

你打算单独发布两个模块还是一起发布在一个包中？

如果是前者，那么您可能希望您的用户安装您的 xml 模块（我会称它为别的 :)，以便默认情况下它已经在 Python 的路径上，并将其声明为任务列表的依赖项模块。

如果两者都作为捆绑分发，那么[相对导入](http://docs.python.org/tutorial/modules.html#intra-package-references)似乎是最好的选择，因为您可以控制路径相对于彼此的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T21:14:22.473

最好的方法是在您定义的单个顶级包中创建子包。然后，您将它们一起装在一个包裹中。如果您正在使用 setuptools/Distribute 并且想要单独分发它们，那么您还可以定义一个“namspace 包”，这些包将被安装在其中。您不需要使用任何丑陋的 sys.path hacks。

制作这样的目录树：

```
mypackage/__init__.py
mypackage/xml/__init__.py
mypackage/xml/xmlcreator.py
mypackage/tasklist/__init__.py
mypackage/tasklist/tasks.py 
```

`__init__.py`文件可能为空。他们将目录定义为 Python 将在其中搜索的包。

除非你想使用命名空间包，`mypackage/__init__.py`否则应该包含：

```
__import__('pkg_resources').declare_namespace(__name__) 
```

您的`setup.py`文件包含：

```
...
namespace_packages=["mypackage"],
... 
```

然后在您的代码中：

```
from mypackage.xml import xmlcreator
from mypackage.tasklist import tasks 
```

将它们带到您需要的任何地方。在这种情况下，您只需要使一个名称全局唯一，即`mypackage`名称。

为了开发代码，您可以将包置于“开发模式”，方法是

```
python setup.py develop --user 
```

这将设置本地 python 环境以在您的工作区中查找您的包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T21:07:51.360

当我开始一个新的 Python 项目时，我会立即编写它`setup.py`并[声明我的 Python modules/packages](http://packages.python.org/distribute/setuptools.html#basic-use)，这样我就可以：

`python setup.py develop`

一切都神奇地添加到了我的 PYTHONPATH 中。如果您从 virtualenv 中执行它会更好，因为您不需要在系统范围内安装它。

这里有更多关于它的信息：

[http://packages.python.org/distribute/setuptools.html#development-mode](http://packages.python.org/distribute/setuptools.html#development-mode)

# .net - 如何通过一键部署发布多个应用程序/进程？

> ID：10590846
> 
> 赞同：6
> 
> 时间：2012-05-14T20:52:06.813
> 
> 标签：.net, visual-studio-2010, deployment, clickonce, publish

我需要一个具有管理员权限的进程。从[这个](https://stackoverflow.com/questions/10587275/whats-the-simplest-way-to-execute-a-method-with-administrator-privileges)问题和答案看来，似乎没有比启动单独进程更好的方法了。因为我宁愿有一个专门用于此的过程，而不是仅仅为了这一种方法在第二个过程中启动我的原始应用程序——我想我会在 VS2010 中的一个解决方案中简单地创建两个项目。但是——在尝试部署它时——似乎我一次只能发布其中一个。那是不行的，因为我不希望客户端必须安装多个 - 然后还会出现找出相对路径等问题。

我不希望这两个进程都作为启动应用程序。我想要一个作为启动应用程序，它只为一种方法调用（如果需要）第二个。

那么如何一键安装两个进程呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T23:32:27.693

您**需要从第一个（主）项目中引用第二个（工作人员）项目**- 然后，如果您转到第一个项目属性 -> 发布 -> 应用程序文件，您应该已经将第二个 EXE 视为依赖项。如果不是 - 只需将“发布状态”下拉菜单设置为“包含”。

另外-我不确定您的目标是什么，但请在此处查看我的帖子：[强制应用程序具有管理员权限](https://stackoverflow.com/questions/10227378/forced-the-application-to-have-the-administrator-privileges/10228137#10228137)-与从 ClickOnce 应用程序调用具有管理员权限的应用程序的问题非常相似。可能会为您节省几分钟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T23:34:37.023

如果您不希望用户安装多个应用程序，那么您不希望有多个 ClickOnce 部署。你真正想要的是一个部署。因此，ClickOnce 应用程序需要成为您的主应用程序，并且您需要在 ClickOnce 部署中包含来自辅助应用程序的 exe。我会这样做：

将 exe 的副本添加到 ClickOnce 项目，将构建操作设置为“内容”并将复制到输出目录设置为“始终复制”。然后进行构建并检查发布属性中的应用程序文件对话框并确保它显示出来。

现在，如果您可以构建解决方案并且它构建了两个项目，请确保它正在构建首先创建 exe 的项目。然后将构建后命令添加到 ClickOnce 项目，该命令会将其从第一个项目的输出目录复制到第二个项目的输出目录。

将会发生的是它将构建第一个项目，然后它将构建 C/O 项目（并将 ClickOnce 项目的 exe 版本复制到输出目录），然后它将从另一个复制最新版本的 exe项目进入 ClickOnce 项目的输出目录，然后它将创建部署。

我不是 msbuild 专家，但 post-build 命令会是这样的。

COPY/Y "$(ProjectDir)....\otherproject\bin\release\mynew.exe" "$TargetDir)\mynew.exe"

这从当前项目，向上两个级别，另一个项目，然后是 bin 文件夹，然后是 release + mynew.exe，复制到构建输出目录。我不会让目录结构与其他项目完全正确——您需要自己设置。但这给了你大致的想法。

# ios - MBProgressHUD 在显示时阻止与 uiscrollview 的交互

> ID：10590847
> 
> 赞同：5
> 
> 时间：2012-05-14T20:52:12.823
> 
> 标签：ios

我正在使用这个 MBProgressHUD 代码：

```
 MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
  hud.mode = MBProgressHUDModeText;
  hud.removeFromSuperViewOnHide = YES;
  [hud hide:YES afterDelay:1]; 
```

在显示 HUD 期间，与 UIScrollview（包含调用此按钮的按钮）的交互被禁用。我不能点击其他按钮，或者滚动 UIScrollview。

为什么 MBProgressHUD 会阻止我与 UIScrollview 的交互，我该如何禁用它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-07T17:55:20.937

我正在使用 MBProgressHUD 0.5 版并简单地设置：

```
HUD.userInteractionEnabled = NO; 
```

这样就可以在父视图中进行用户交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:36:55.570

可能是因为按钮位于您尝试添加进度视图的同一视图中，而当进度视图处于视图中时，此视图会阻止视图添加按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T05:55:47.390

MBPregressHUD 阻止了以下方法中的交互

```
-(void)show:(BOOL)animated{
    [[UIApplication sharedApplication] beginIgnoringInteractionEvents];
    ...
    ...
    ...
} 
```

这行代码会阻止应用程序内部的所有交互。如果您确实想保留交互，请通过类级别 BOOL 驱动它，您可以调用它`isModal`并决定是否要阻止交互

```
 -(void)show:(BOOL)animated{
      if(isModal){
        [[UIApplication sharedApplication] beginIgnoringInteractionEvents];
      }
      ...
      ...
      ...
  } 
```

理想情况下，您应该创建一个新的“init”方法来将此 BOOL 作为参数。可能的签名可能是

```
- (id)initWithView:(UIView *)view isModal:(BOOL)modal; 
```

然后在初始化视图之后在这个方法里面初始化类级别的BOOL。在“隐藏”方法中应该应用相同的条件。

快乐的编码... :)

# facebook-like - 如何避免指向 http://static.ak.facebook.com/connect/xd_arbiter.php 的链接无限期挂起

> ID：10590850
> 
> 赞同：2
> 
> 时间：2012-05-14T20:52:29.053
> 
> 标签：facebook-like, facebook-comments

我们在我们的网站上使用 Facebook 评论和 Facebook Like 按钮。这些以某种方式生成对[http://static.ak.facebook.com/connect/xd_arbiter.php](http://static.ak.facebook.com/connect/xd_arbiter.php)的调用，该调用从未加载，给人留下页面未加载的印象。有没有办法避免调用这个脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:02:20.650

两种方式，

*   写信给 Facebook 并报告问题并建议他们修复他们的 Javascript
*   下载他们的 Javascript 代码，将按钮添加到页面，修复它并直接从您的服务器页面链接到它。

最后一个建议的缺点是 Facebook 托管的 Javascript 代码或后端可以随时更改，您的旧版本脚本将无法运行。

# javascript - 如何在 chrome 中调试以找出此代码不起作用的原因？

> ID：10590858
> 
> 赞同：2
> 
> 时间：2012-05-14T20:53:09.607
> 
> 标签：javascript, jquery

我如何使用 JavaScript 控制台查看此代码的原因：

```
// Empty info
if ($('.perma-info').text() == '') {
    $('.perma-info').remove();
} 
```

在此页面中不起作用：http: [//dev-indiehaz.tumblr.com/post/22897976111/vans-vw](http://dev-indiehaz.tumblr.com/post/22897976111/vans-vw)

我想要它，以便如果元素为空，我可以删除它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:54:41.687

你可以开始：

```
console.log($('.perma-info')); 
```

然后你观察控制台。2种可能性：你得到一个空的结果集，在这种情况下你显然应该检查你的选择器，因为你的DOM中可能没有元素，`class="perma-info"`或者你得到一些结果，在这种情况下你继续：

```
console.log($('.perma-info').text()); 
```

然后观察控制台。如果你得到一个空文本，那么 if 条件应该有效。如果它打印一些值，那么匹配的 DOM 元素有一些文本。

调试愉快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:54:59.577

按**F12**并设置断点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T20:57:14.983

1.  打开你的谷歌浏览器开发工具并点击脚本
2.  选择正确的脚本文件并设置所需的断点（最好在 if 语句上）
3.  开始运行脚本！
4.  Devtool 将在断点处停止。您可以看到全局变量和局部变量。您应该将文本值存储到变量中，以便查看变量的实际内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T20:58:07.223

按照其他人的说明使用开发工具，但我认为在你的 li 里面有一个空间。我在firefox上使用firebug，我看到了一个空间。

尝试

```
if ( $.trim($('.perma-info').text()) == '') {
    $('.perma-info').remove();
} 
```

# php - 谷歌地图静态自定义图标

> ID：10590859
> 
> 赞同：1
> 
> 时间：2012-05-14T20:53:10.113
> 
> 标签：php, google-maps

```
http://maps.googleapis.com/maps/api/staticmap?center=35.442797,-80.880361&zoom=12&size=512x512&maptype=roadmap&markers=icon:http://*****.com/images/icon-marker.png|35.442797,-80.880361&sensor=false 
```

出于某种原因，我没有看到我的自定义图标。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T21:04:23.783

您的图标太大。从[文档](https://developers.google.com/maps/documentation/staticmaps/#CustomIcons)中：

图标参数必须使用 URL 指定（应该是 URL 编码的）。您可以使用您选择的任何有效 URL，或 URL 缩短服务，例如[http://bit.ly](http://bit.ly)或[http://tinyurl.com](http://tinyurl.com)。大多数 URL 缩短服务具有自动编码 URL 的优势。图标的大小限制为**4096 像素（方形图像为 64x64）**，静态地图服务允许每个请求最多五个独特的自定义图标。请注意，这些唯一图标中的每一个都可以在静态地图中多次使用。

您的图像为 80x52（4,160 像素）。

# maven - 无法通过 maven-jetty 插件部署两个战争文件

> ID：10590860
> 
> 赞同：0
> 
> 时间：2012-05-14T20:53:15.977
> 
> 标签：maven, jetty, maven-jetty-plugin

我试图在码头上发动两场战争。我有这个配置。

```
<groupId>org.mortbay.jetty</groupId>
    <artifactId>maven-jetty-plugin</artifactId>
    <version>6.1.14</version>
    <configuration>
        <scanIntervalSeconds>10</scanIntervalSeconds>
        <stopKey>foo</stopKey>
        <stopPort>9999</stopPort>
    </configuration>
    <executions>

        <execution>
            <id>start-jetty</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>run-war</goal>
            </goals>
            <configuration>
                <contextPath>grc-webclient-app</contextPath>
                <webApp>${project.build.directory}/war/first.war</webApp>
                  <contextHandlers>
                    <contextHandler implementation="org.mortbay.jetty.webapp.WebAppContext">
                        <war>${project.build.directory}/war/second.war</war>
                        <contextPath>rest.war</contextPath>
                        <daemon>false</daemon>
                        <scanIntervalSeconds>0</scanIntervalSeconds>
                    </contextHandler>
                </contextHandlers>
                <scanIntervalSeconds>0</scanIntervalSeconds>
                <daemon>false</daemon>
            </configuration>
        </execution> 
```

但是，只部署了 first.war。second.war 没有部署。我究竟做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:25:00.853

您使用的是非常旧的插件版本。

更新到 jetty-maven-plugin 的 7.6.3.v20120416，我相信它支持像您尝试做的那样部署多个 web 应用程序。

[http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin)

# java - Java 运算符有趣的问题

> ID：10590861
> 
> 赞同：6
> 
> 时间：2012-05-14T20:53:20.987
> 
> 标签：java, operators

问题是：

为什么在这种情况下我会在 Java 中出现编译错误？

```
byte x = 0;
x = 128; 
```

但这是合法的：

```
x+= 999l; 
```

我使用eclipse，jdk 7。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:59:26.653

`byte`有符号并且只能保存 的最大值`127`和最小值`-128`，这就是为什么第一种情况会给你一个编译错误。

第二种情况会编译，因为您添加到“字节”的值会环绕，请注意`999 % 128 = 103`，它在“字节”的有效范围内

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T21:01:14.663

在你的第一个：

```
byte x = 0;
x = 128; 
```

字节是有符号整数类型，8 位宽，可以表示`-128`to的范围`+127`。

`x = 128`表示“分配`x`给`128`”，默认情况下，`128`是 type `int`，所以你试图分配一个`int`会`byte`导致`Possible loss of precision`错误的，因为`int`它比`byte`. 要使其正常工作，您必须显式转换`128`.

```
byte x = 0;
x = (byte)128; // x is now -128. 
```

对于您的第二个示例，添加值`x`很好，但您只是溢出了值。

```
byte x = 0;
x += 999L; // don't really need the long qualifier here
// x is now -25. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T21:12:19.233

byte 的范围是 -128 到 127。 this x+= 999l; 有效，因为它是复合赋值运算符。看看这里[可能相同或相似的问题](https://stackoverflow.com/questions/7681201/different-compiler-behavior-when-adding-bytes)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T21:02:18.340

在第一个语句中`x = 128`，由于字节范围`0-127`在 java 中，因此需要显式转换，因此会出现编译错误。在第二种情况下，它会溢出并转换为字节范围内的 -25。

# eclipse - EGit，为 URI、主机和存储库路径选择正确的参数。

> ID：10590864
> 
> 赞同：3
> 
> 时间：2012-05-14T20:53:31.557
> 
> 标签：eclipse, git, url, import, egit

我对 GIT 很陌生，正在尝试从 eclipse.org git 存储库中查看一些示例项目。我刚刚安装了 EGit 插件，尝试在“从 Git 导入项目”菜单中输入正确的参数时遇到了障碍。

我希望查看的示例的位置位于此处。

[http://git.eclipse.org/c/cdt/org.eclipse.cdt.git/tree/dsf](http://git.eclipse.org/c/cdt/org.eclipse.cdt.git/tree/dsf)

但是我不确定如何从此 url 创建正确的 URI、主机和存储库路径。

我希望能够探索该页面上列出的不同存储库（例如 org.eclipse.cdt.examples.dsf 文件夹）并签出这些项目，但是我只是不知道正确的 git url 是什么将会。

我来自 SVN，所以我确定我弄错了一些术语。我一直在关注本教程以使用 git：[http ://wiki.eclipse.org/EGit/User_Guide#Cloning_Remote_Repositories](http://wiki.eclipse.org/EGit/User_Guide#Cloning_Remote_Repositories)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:33:29.330

`Summary`如果您在您提到的页面（[http://git.eclipse.org/c/cdt/org.eclipse.cdt.git/tree/dsf](http://git.eclipse.org/c/cdt/org.eclipse.cdt.git/tree/dsf) ）中单击“ ” ，您将获得一个页面（[http://git .eclipse.org/c/cdt/org.eclipse.cdt.git/](http://git.eclipse.org/c/cdt/org.eclipse.cdt.git/)）**在底部**（您需要向下滚动）显示克隆地址：

> ### 克隆

```
git://git.eclipse.org/gitroot/cdt/org.eclipse.cdt.git
ssh://git.eclipse.org/gitroot/cdt/org.eclipse.cdt.git
http://git.eclipse.org/gitroot/cdt/org.eclipse.cdt.git 
```

您可以使用其中一个地址从 Egit 克隆：请参阅用户手册中的“[克隆远程存储库](http://wiki.eclipse.org/EGit/User_Guide#Cloning_Remote_Repositories)”。

![鸡蛋克隆](../Images/17e0e5610d915da998492ed5d63e0560.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:04:36.517

[此页面](http://wiki.eclipse.org/Git#Connecting.2C_cloning_a_repo)包含来自 Eclipse 项目的有关克隆其 git 存储库的文档。它们显示了`org.eclipse.cdt.git`存储库的明确示例。你可以使用这个：

```
git clone git://git.eclipse.org/gitroot/cdt/org.eclipse.cdt.git 
```

或这个：

```
git clone http://git.eclipse.org/gitroot/cdt/org.eclipse.cdt.git 
```

我通常`git://`在 URL 可用时使用它们。他们曾经更快，但这可能不再是真的了。两者都应该工作得很好。

一般来说，看起来可以从 获取存储库，`git://git.eclipse.org/gitroot/<PROJECT>/<REPO>`您可以在其中正确替换`<PROJECT>`和`<REPO>`。

# javascript - 将图像绘制到

> ID：10590866
> 
> 赞同：0
> 
> 时间：2012-05-14T20:53:36.270
> 
> 标签：javascript, canvas, html5-canvas

我试图将图像（png 文件）绘制到 a 以充当背景图像，但我不知道为什么到目前为止我的 js 不起作用。

这是我所拥有的：

```
var canvas = document.getElementById('hplogo-z');
var cnvs = canvas.getContext('2d');
background = new Image();
background.onload = function(){
  cnvs.drawImage(background, x, y);
}
background.src = 'bg.png'; 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:04:13.790

我[无法重现您的问题](http://jsfiddle.net/vD73w/1/)，所以我唯一能猜到的是您的路径错误或您的图像有问题。

我建议您尝试用[placehold.it](http://www.placehold.it)中的内容替换您当前的路径，或者在不同的位置使用不同的图像，以查看您的图像/路径是否确实是问题所在。

# tomcat - favicon.ico 用于使用 Tomcat 的类似 REST 的 Web 服务

> ID：10590868
> 
> 赞同：0
> 
> 时间：2012-05-14T20:53:47.753
> 
> 标签：tomcat, favicon

我有一个部署在 Tomcat 上的类似 REST 的 Web 服务。我的 servlet 响应中没有 HTML；它是 XML。我想使用我自己的 favicon.ico 而不是 Tomcat 默认值。

如果我将文件放在 webapps/myWebApp/favicon.ico，它不会加载。我仍然得到Tomcat的默认值。Going to`http://localhost/myWebApp/favicon.ico`表明该文件确实存在。

如果我**替换**webapps/ROOT/favicon.ico 中的文件，那么我会得到新的 favicon。这并不理想，因为我想将 favicon.ico 打包到我的 war 文件中，并且理想情况下不希望其他 Web 应用程序使用我的 favicon.ico。

有没有更好的方法让我的新网站图标得到认可？

作为记录，我使用的是 Tomcat 7，在每次测试之间，我重新启动 Tomcat，清除浏览器缓存，然后重新启动浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T22:01:26.813

这不是“favicon”的工作方式：您要么必须指定要使用的收藏图标的 URL（使用 <link rel="shortcut icon" href="http://example.com/myicon.ico" />）或将您的 favicon.ico 文件放入服务器的根目录。

[http://en.wikipedia.org/wiki/Favicon#Accessibility](http://en.wikipedia.org/wiki/Favicon#Accessibility)

因此，既然您正在提供 XML，那么您只有一种选择。

# atk4 - 刷新时详细信息页面上的快速搜索不保留 id

> ID：10590869
> 
> 赞同：2
> 
> 时间：2012-05-14T20:53:57.863
> 
> 标签：atk4

我有一个网格，我有一个格式化为链接的列。一旦我单击正在生成的链接，该链接将带我到 url 看起来像的页面`?page=details&id=10`。到目前为止，这工作正常。

在此详细信息页面上，我有另一个显示子记录的网格，方法是将条件添加到网格的模型中`addCondition("parent_id", "=", $_GET["id"])`。这也很好，我的子记录是根据正在传递的主记录 ID 显示的。

现在，如果我从详细信息页面在网格上添加一个快速搜索，一旦我尝试搜索，id 不会在 url 中传递，所以现在我的条件将是`addCondition("parent_id", "=", null)`因为`$_GET["id"]`为空。为刷新生成的 url 是`?page=details&submit=agile_details_mvcgrid_quicksearch`. 所以网格不会显示任何结果。我怎样才能解决这个问题？我可以将值放在会话中，但这确实是一个很好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:08:13.957

请在页面顶部添加以下内容：

```
$this->api->stickyGET('id'); 
```

这将保留从该点开始的 $_GET['id'] 的值。

# php - 如何解析（lat，long）php的值

> ID：10590876
> 
> 赞同：1
> 
> 时间：2012-05-14T20:54:27.127
> 
> 标签：php, parsing, google-maps, coordinates

我需要解析`(47.624718,-122.356133)`或示例或 (lat,long) 对的值。

该 url 由以下 JS 生成：

```
var html = \"<b>\" + name + \"</b> <br/>\" + address + \"<br><br>\" + \"<a id='myLink' href='result.php?\"+point+\"'>Professors here</a>\"; 
```

`point`var 是由这个 js var 生成的：

```
var point = new GLatLng(parseFloat(markers[i].getAttribute(\"lat\")),parseFloat(markers[i].getAttribute(\"lng\"))); 
```

显然，这些值的大小/长度会根据谷歌地图上的点而有所不同，那么我如何使用 php 解析这个以获取除两个变量之外的任何内容之前`,`和之后的所有内容？`,``()`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:01:32.363

```
php > preg_match("/(-?[0-9]+(.[0-9]+)?),(-?[0-9]+(.[0-9]+)?)/","(42.3,-59.0)",$matches); print_r($matches);
Array
(
    [0] => 42.3,-59.0
    [1] => 42.3
    [2] => .3
    [3] => -59.0
    [4] => .0
)
php > 
```

由于括号的嵌套方式，索引的顺序是这样的。只需使用索引 1 和 3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:20:01.063

你可以写得更简洁，但很容易遵循这种方式

```
$latlon = "(42.3,-59.0)"; 
list($lat, $lon) = string_to_lat_lon($latlon);

function string_to_lat_lon($string) {
    $string = str_replace('(', '', $string); // remove leading bracket
    $string = str_replace(')', '', $string); // remove trailing bracket
    return explode(',', $string);
} 
```

# php - 带有嵌套数组的 PHP create_function

> ID：10590877
> 
> 赞同：0
> 
> 时间：2012-05-14T20:54:34.850
> 
> 标签：php, multidimensional-array, create-function

我需要使用`create_function`，因为运行应用程序的服务器具有过时的 PHP 版本。

问题是我传入的项目`usort`是数组，我需要按数组中的值排序：

```
$sort_dist = create_function( '$a, $b', "
    if( $a['order-dir'] == 'asc' ) {
        return $a['distance'] > $b['distance'];
    }
    else {
        return $a['distance'] < $b['distance'];
    }" 
);

usort( $items, $sort_dist ); 
```

给出一个错误：`syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING`

删除对`['distance']`并`['order-dir']`删除此错误的引用。

有谁知道如何使用`create_function`嵌套数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:58:32.553

您需要转义变量名。根据[`create_function`](http://php.net/manual/en/function.create-function.php)文档（强调我的）：

> 通常这些参数将作为单引号分隔的字符串传递。使用单引号字符串的原因是为了保护变量名不被解析，*否则，如果您使用双引号，则需要对变量名进行转义，例如`\$avar`*.

我应该为未来的读者指出，[Frits van Campen 的答案](https://stackoverflow.com/a/10590911/350278)可能是您应该使用的解决方案，但如果您绝对需要使用`create_function`，我的答案应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:56:52.230

不要`create_function`在这种情况下使用。你也可以这样写：

```
function sort_by_distance($a, $b) {
    if( $a['order-dir'] == 'asc' ) {
        return $a['distance'] > $b['distance'];
    }
    else {
        return $a['distance'] < $b['distance'];
    }
}

usort( $items, "sort_by_distance" ); // pass the function name as a string 
```

# java - Java/ 从 long 到 SimpleDateFormat 再到 Timestamp

> ID：10590880
> 
> 赞同：0
> 
> 时间：2012-05-14T20:54:46.780
> 
> 标签：java

我编写了一个以时间戳（年、月、日、小时、分钟和秒）作为参数的函数。

我刚刚发现，我没有得到 Timestamp 类型，而是得到了一个 long 类型 - 在下一个 stpes 之后：

构造函数是：

```
protected SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss"); 
```

进而：

```
long qu = dateFormat.parse("24.12.2011 18:54:23").getTime(); 
```

我尝试找到如何将 qu 转换回 SimpleDateFormat 然后转换为 Timestamp，或者直接：从 long 转换为 Timestamp (But `where long was created after these two steps`)。

之前，[我问如何将 long 转换为 Timestamp。](https://stackoverflow.com/questions/10590324/java-convert-long-to-timestamp)给出的答案是正确的，但是当我将它从 SimpleDateFormat 转换为 long 时恐怕不是这种情况（更改后该功能不起作用）。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T21:02:19.187

这对我有用：

```
public class Test {
  public static void main(String... args) {
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
    try {
      long qu = dateFormat.parse("24/12/2011 18:54:23").getTime();
      Timestamp ts = new Timestamp(qu);
      System.out.println(ts);
    } catch (ParseException e) {
      e.printStackTrace();
    }
  }
} 
```

输出：2011-12-24 18:54:23.0

# qt - Qt 的 QGraphicsItem 中的事件和信号：*应该*如何工作？

> ID：10590881
> 
> 赞同：13
> 
> 时间：2012-05-14T20:54:53.900
> 
> 标签：qt, qt4, pyqt4

与 Qt 中的其他原语一样，QGraphicsItems 可以处理鼠标事件等。甜的！现在说我需要将一个 QGraphicsItem 上的事件传播到同一场景中的其他一些 QGraphicsItem。我可以想到两种方法可以解决这个问题：

* * *

### (A) 天真的方法 - 发信号

**概念：**将兄弟 QGraphicsItems 与信号连接在一起。QGraphicsItem 上的事件处理程序调用 emit()s 来唤起其他 QGraphicItems 上的协调响应。这遵循在整个 Qt 框架中建立的一般设计模式。

**实现：**由于我不完全掌握的原因，QGraphicsItems 不能发出（）信号。[有人建议](http://www.qtforum.org/article/31679/how-can-a-qgraphicsitem-signal-a-scene-update.html)，也继承自 QGraphicsObject 的派生类可能能够解决此问题。不过，在我看来，在 QGraphicsItems 上排除 emit() 可能是 Qt 开发人员有意的设计决定，因此，多重继承可能不是正确的解决方案。

### (B) 容器级事件处理

**概念：** QGraphicsItems 总是存在于 QGraphicsScene 类型的容器的上下文中。(A) 中在 QGraphicsItem 级别处理的事件由继承自 QGraphicsScene 的对象处理。该对象还实现了在同级 QGraphicsItems 之间协调响应的逻辑。

**实现：** QGraphicsScene 绝对有能力处理否则会进入 QGraphicsItems 的事件。QGraphicsScene 还提供了 itemsAt() 方法，用于确定其中的哪些事物受到位置事件的影响，例如鼠标点击。尽管如此，在容器类中为容器之间的协调动作建立相当多的逻辑感觉就像是无法正确封装。不好的做法？也许吧，但这似乎是至少在[一个官方示例](http://doc.qt.nokia.com/4.7-snapshot/graphicsview-diagramscene.html)中的做法。

* * *

### 问题

1.  什么是正确的解决方案？如果不是 A 或 B，那是不是我没有想到的其他东西？
2.  为什么 Qt 开发人员允许 QGraphicsItems 接收事件但不发送信号？这似乎是整个框架中使用的设计模式的一个主要例外。
3.  这个问题的一个扩展是 QGraphicsItems 和高阶容器类之间的通信，比如主应用程序。这意味着如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T21:14:58.427

Signaling 不是 QGraphicItem 的一部分，因为它们不是从 QObjects 继承的。这是出于性能原因的设计决定，以允许非常大和快速的场景。如果您决定确实需要信号的特殊情况，则创建 QGraphicsWidget 来填补这一空白。它确实继承自 QObject 并允许您混合使用 QWidget 和 QGraphicsItem 功能。尽管如果您的场景规模适中，建议您避免这种情况。

可能与您的情况相关的另一个选项是使用 sceneEventFilter 方法。您可以设置一项以接收另一项的事件并决定是否应该传播它们： [http](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qgraphicsitem.html#sceneEventFilter)
: //www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qgraphicsitem.html#sceneEventFilter 可以设置一项作为多个对象的过滤器。它可以识别每个单独的项目和事件来响应。

通常，尽管您应该利用场景来协调其对象。这已经是用于事件的模式（场景协调将所有事件传递给项目）。

此外，您的选项 A 似乎是不可能的，因为 QGraphicsItem 甚至没有发出方法。您需要在其中组成一个 QObject 实例作为成员并使用它来发出信号。类似的东西`myItem.qobject.emit()`。否则，您将不得不从 QGraphicsObject 继承您自己的完全自定义的

**更新 1**：解决您的主要评论更新

您的具体情况是一个带有“热角”的矩形。我会看到这是一个自定义的 QGraphicsItem。您可能会将 QGraphicsRectItem 子类化，然后将其中的子热角项组合为子项 ( `setParentItem()`)。现在您的矩形项目知道它的孩子并且可以直接对他们采取行动。您可以将矩形项目设置为孩子的场景事件过滤器并直接处理他们的事件。无需返回现场。让所有这些逻辑都存在于课堂上。

**更新 2**：解决您添加的问题 #3

将通信传播到 QWidget 的场景之外有几种我能想到的方法：

1.  在这种情况下，您可以考虑是否要将 QGraphicsObject 子类用作根项，然后将其余对象组合为子项（矩形，然后将热角作为矩形的子项）。这将允许对象发出信号。为清楚起见，它们可能仍会连接到场景，然后场景的高阶容器将连接到场景。您必须根据场景的复杂性以及 QGraphicsObject 是否对它有任何性能影响来逐个选择这种方法。如果您将拥有大量此类实例，您可能应该避免这种情况。
2.  您可以为您的 rect 类定义一个回调，场景可以为其设置。要么是：`graphicsRect.resizedCallback`作为属性，要么是 setter `graphicsRect.setResizedCallback(cbk)`。在您的 rect 类中，您只需在适当的时候调用它。如果它设置了回调，它可以用来直接调用场景中的某些东西。rect 类仍然不知道该逻辑。它只是调用一个回调。

这些只是一些建议。我敢肯定还有其他方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:05:39.817

我建议 B，除非您的 QGraphicsItems 相对较少。我相信 QGraphicsItems 不是 QObjects，因为有一定数量的与 QObjects 相关的开销。QGraphicsView 框架被设计成允许在一个场景中快速插入和删除许多（例如，数千个）QGraphicsItem，因此更轻量级的方法是首选。

我会看看 QGraphicsItems 中的育儿概念。QGraphicsItems 可以有父母和孩子，这有几个类似于 QObjects 之间的父母关系的效果。例如，如果你移动一个父 QGraphicsItem，它的子项也会随之移动，如果你删除一个父项，它的子项也会被删除。您可以使用 访问 QGraphicsItem 的父项`QGraphicsItem::parentItem()`，使用 访问子项`QGraphicsItem::childItems()`。因此，您可以像这样轻松访问同级项目：

```
QList<QGraphicsItem *> mySiblings = this->parentItem()->childItems(); 
```

请注意，`mySiblings`包括`this`.

# c++ - 有关 ide、库和包含的一般信息？

> ID：10590889
> 
> 赞同：0
> 
> 时间：2012-05-14T20:55:11.077
> 
> 标签：c++, ide

当您安装 DEV C++ 等 IDE 时，我可以通过包含 cmath、iostream、string 等文件来创建程序并编译我的主要功能。我的问题是流和字符串等的类实现......IDE是否将它们安装在一个特殊的目录中，这就是为什么我能够包含它们或者它们已经在我的系统上可用（预装Windows）并且IDE看起来对于这些。

它们的定义是否也存储在 .cpp 和 .h 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:16:51.100

这些文件将包含在 IDE 中，因为它们是基本编程所必需的。如果您打开文件，您会看到版权是制作 IDE 的人（在大多数情况下，可能），并且不同 IDE 之间的文件不会相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:03:13.447

我希望 IDE 已经安装了它们。通常 IDE 具有说明要搜索包含文件的目录的设置。

# c++ - MASM locals：动态分配的数据？

> ID：10590891
> 
> 赞同：2
> 
> 时间：2012-05-14T20:55:15.750
> 
> 标签：c++, masm

我正在学习 masm32，遵循一些教程。在一个教程中：[http](http://win32assembly.online.fr/tut3.html) ://win32assembly.online.fr/tut3.html 有说明：

> LOCAL 指令从堆栈中为函数中使用的局部变量分配内存。一堆 LOCAL 指令必须紧接在 PROC 指令之下。LOCAL 指令后紧跟 :。所以 LOCAL wc:WNDCLASSEX 告诉 MASM 从堆栈中为名为 wc 的变量分配 WNDCLASSEX 结构大小的内存。我们可以在代码中引用 wc，而不会遇到堆栈操作的任何困难。这真是天赐之物，我想。缺点是局部变量不能在它们创建的函数之外使用，并且会在函数返回给调用者时自动销毁。另一个缺点是您不能自动初始化局部变量，因为**它们只是动态分配的堆栈内存** 输入函数时。您必须在 LOCAL 指令之后手动为它们分配所需的值。

我一直被告知堆栈内存是静态的，而任何动态分配都是堆内存。那么，我们真的可以将它们视为 C++ 意义上的本地人吗？当您在 C++ 中创建局部变量时，这些变量是否也会在堆栈上动态分配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:58:58.843

> 那么，我们真的可以将它们视为 C++ 意义上的本地人吗？当您在 C++ 中创建局部变量时，这些变量是否也会在堆栈上动态分配？

在 C++ 中，本地（自动）变量存在于堆栈中，所以是的，是的。

它们是动态分配的，因为它们在进入/退出函数时来来去去。但是，正如您正确指出的那样，这种类型的分配与堆分配有很大不同。

除了堆和栈之外，还有第三个区域可以存放变量。它是数据段。它是全局以及函数级和类级`static`变量所在的位置。

# java - java动态web项目中找不到图片

> ID：10590894
> 
> 赞同：1
> 
> 时间：2012-05-14T20:55:20.463
> 
> 标签：java, jakarta-ee, servlets

我有以下问题：

我创建了应该绘制动态图的 servlet。在绘图过程中，它应该从另一个目录中获取图片并将其绘制到另一个图像上。一切都应该正常工作：

```
try {
            BufferedImage temp = ImageIO.read(new File("image/arrow.png"));
            tempIm = temp.getScaledInstance(55, 55, Image.SCALE_SMOOTH);
        } catch (IOException e) {

            e.printStackTrace();

        } 
```

但它会打印以下内容：

`SEVERE: javax.imageio.IIOException: Can't read input file! at javax.imageio.ImageIO.read(ImageIO.java:1275) at CertificateDraw.doGet(CertificateDraw.java:36)`

我试图以所有可能的方式更改 File 对象的路径，即使图像的一部分仍然发送到浏览器，它也会出现同样的问题。所以问题出在 ImageIO.read 部分 - 我怎样才能找到它不加载图像的原因？！

我在 Eclipse 中工作 - servlet 在 src 文件夹中。该图像位于 rot 目录“WebContent”下的“image”文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:01:41.183

中的相对路径`java.io.File`相对于当前工作目录 (CWD)。这是在发出命令以启动 Java 运行时环境（在您的情况下为网络服务器）时当前打开的文件夹。在 Eclipse 中启动服务器时，这通常是`/bin`项目的文件夹。您可以通过打印来计算这一点`new File(".").getAbsolutePath()`。

但是您根本不应该依赖相对路径`File`。CWD 不能从代码内部控制。

由于它已经在 webcontent 文件夹中，因此只需获取它即可[`ServletContext#getResourceAsStream()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)。

```
InputStream input = getServletContext().getResourceAsStream("/image/arrow.png");
BufferedImage image = ImageIO.read(input);
// ... 
```

请注意，[`getServletContext()`](http://docs.oracle.com/javaee/6/api/javax/servlet/GenericServlet.html#getServletContext%28%29)继承自扩展的`GenericServlet`类`HttpServlet`，因此您不需要自己提供该方法。

# c# - 在 C# getter 中使用 StringBuilder 会不会特别糟糕？

> ID：10590895
> 
> 赞同：0
> 
> 时间：2012-05-14T20:55:26.720
> 
> 标签：c#, stringbuilder, getter

getter 将收到有关其所在结构状态的消息，该状态由结构属性的组合定义，这些属性是有限的。

首先，这与[微优化](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)无关，我只是认为：

```
StringBuilder msg = new StringBuilder();
...
msg.AppendLine("static string");
... 
```

看起来更干净：

```
String msg = String.Empty;
...
msg = String.Concat(msg, "static string", System.Environment.NewLine)
... 
```

所以只是一种审美选择。

msg 变量必须以任何方式初始化为空，因此额外的行不会打扰我。但是在返回字符串的字段中构造一个新的 StringBuilder 有多糟糕呢？

**编辑** 我只是想知道将 StringBuilder 构造函数放在 getter 中是否会打开一大堆蠕虫，这是荒谬的开销，有些人从不使用 getter 中的构造函数，等等……不知道每个人的最喜欢的连接非循环字符串的最高效方式。

**EDIT2** getter 通常的最佳实践性能阈值是什么，StringBuilder 构造函数是否低于该阈值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T20:57:15.657

为什么不这样做？

```
msg + "static string" + Environment.NewLine 
```

它将编译为与您的第二个示例相同。

**更新**

您更改了代码，看起来您想要创建一个包含很多行的非常大的字符串。

那么我想使用它很好`StringBuilder`，但我建议你把它变成一个**方法**（覆盖怎么样`ToString`？）而不是一个属性，这样调用者就不太可能认为调用它很便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:57:43.253

从性能的角度来看，使用提供的数据（三个子字符串），String.Concat 更好。

但是，如果在 getter 内部，您有这样的行`if(state == 0)`会破坏 Concat 或 + 运算符的效率，那么请使用 StringBuilder，因为它在字符串内存处理方面具有良好的效率，并且在 AppendLine 上具有清晰的语法。查看[此站点](http://www.dotnetperls.com/string-concat)以获取有关`StringBuilder`vs `Concat`vs的数据`+`以及有关 StringBuilder[提示](http://www.dotnetperls.com/stringbuilder)和[错误的一些信息](http://www.dotnetperls.com/stringbuilder-mistake)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T21:05:41.090

除了现在应该说的答案之外，考虑到您正在谈论结构的属性（我认为这不是 1000，但是..），重要的是要强调事实，差异**不仅**在于语义存在，但在实际功能中也是如此。

更短更清晰：

`+`并`string.Concat`在每次调用时创建一个*新*的字符串对象。

相反，如果您使用`StringBuilder`，它将在*一个*字符串缓冲区上运行。因此，从性能的角度来看，`StringBuilder`如果您要编写长字符串，则使用它非常方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T21:03:27.947

在不使用大量字符串时，String.Concat 函数的性能比 StringBuilder 高 2.3 倍。此外，例如，如果您编写诸如“a”+“b”+“c”+“d”+“f”之类的代码，编译器将编译它以在 IL 代码中使用 string.Concat(string[])。

# android - 为什么我的 Android 列表项背景图像显示为黑色覆盖？

> ID：10590897
> 
> 赞同：1
> 
> 时间：2012-05-14T20:55:28.200
> 
> 标签：android, android-layout, android-theme

这是我的 Android`list_item`布局 XML：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:paddingRight="?android:attr/scrollbarSize"
    android:background="@drawable/list_bg">
    <TextView
        android:id="@+id/tv_displayname"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:ellipsize="end"
        android:textAppearance="?android:attr/textAppearanceLarge" />
</RelativeLayout> 
```

这是`list_bg`图像：

![在此处输入图像描述](../Images/397a0583cc06bdf3a6b992f4d1eae79f.png)

然而，这是它在 Android 模拟器中显示时的样子：

![在此处输入图像描述](../Images/93dfd787ced3b7f3f93b6144858a2877.png)

我可以看到正在应用背景，因为它有轻微的渐变效果，但我不知道这个黑色叠加层是从哪里来的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:06:24.237

您是否尝试过不同的图像以查看该图像是否执行相同的操作？对我来说，它看起来像是在您的列表后面创建图像，`RelativeLayout`而您的 textview 背景位于顶部。由于您将其设置为填充行的宽度，我敢打赌，如果您只是设置为，`wrap_content`您会在后面看到它

尝试将图像作为`TextView`背景

# c++ - ADL 无法为用户定义的类型找到具有适当限定符的流运算符

> ID：10590898
> 
> 赞同：2
> 
> 时间：2012-05-14T20:55:28.747
> 
> 标签：c++, boost, boost-variant, stream-operators

我正在使用 Visual Studio 2010 在 Microsoft Windows 7 上编译 x64 服务，使用类似以下的[Boost 变体](http://www.boost.org/doc/libs/1_48_0/doc/html/variant.html)：

```
namespace my_ns
{
    typedef struct {} empty_t;
    typedef std::pair<size_t, std::shared_ptr<char>> string_t;
    typedef boost::variant<empty_t, double, long, string_t> variant_t;
    typedef std::map<unsigned short, variant_t> variant_map_t;
} 
```

我摆脱那个 string_t 并用 std::string 替换它的那一天就是我给我的老板和团队买甜甜圈的那一天。但这不是我们来这里的原因...

Boost 变体支持其包含类型的流运算符，前提是该类型具有重载。所以我有：

```
namespace my_ns
{
    std::ostream &operator<<(std::ostream &, const empty_t &);
    std::ostream &operator<<(std::ostream &, const string_t &);
} 
```

然而，我被错误信息所困扰：

```
error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'const T3' (or there is no acceptable conversion) 
```

T3 指的是 string_t。

生成错误的违规代码存在于以下上下文中。它很冗长，所以你，读者，有相关的上下文信息：

```
namespace my_ns
{
    void Widget::public_method(std::ostringstream &os) const
    {
        //variant_map_t Widget::the_map; // Private Widget member.

        // This here is a C++11 lambda in a standard loop algorithm, if you didn't recognize the syntax.
        std::for_each(the_map.begin(), the_map.end() [&os](variant_map_t::value_type value)
        {
            os << value.first << '=' << value.second << ' ';
        });
    }
} 
```

我尝试删除右手限定符和引用，认为按值传递副本会取消限定符（根据共享指针可能不那么出色），并且我尝试将声明从命名空间移动到全局范围，希望 ADL 会因为某种原因捡起它（从概念上讲，我得到了 ADL，但对我来说仍然只有一点点黑魔法）。

我不知道还能做什么。除了编译器无法找到具有 const 限定 rhs 的插入运算符之外，这个 bug 的本质是什么？怎么可能，当它就在那里的时候？决议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:28:27.420

将 typedef 添加到命名空间并没有帮助，`std::pair`并且`std::ostream`仍然是`std`命名空间的一部分。所以编译器会在那里寻找`<<`运算符，而不是在你的命名空间中。

# java - 我的这个 C++ CRC32 函数的 Java 端口有什么问题？

> ID：10590901
> 
> 赞同：1
> 
> 时间：2012-05-14T20:55:41.020
> 
> 标签：java, c++, crc

我有以下CRC函数：

```
unsigned long Checksummer::crc32 (unsigned long crc, char *buf, unsigned long len)
{
   unsigned long crc_table[256];
   int i, k;
   for (i = 0; i < 256; i++) {
      unsigned long c = (unsigned long) i;
      for (k = 0; k < 8; k++) 
         c = c & 1 ? 0xedb88320 ^ (c >> 1) : c >> 1;
      crc_table[i] = c;
   }

   crc = crc ^ 0xffffffffL;
   while (len--) 
      crc = crc_table[((int)crc ^ (*buf++)) & 0xff] ^ (crc >> 8);
   return crc ^ 0xffffffffL;
} 
```

我正在尝试将此代码移植到 Java，以便可以在多个平台上计算 CRC。下面我移植的代码会产生不同的结果。我究竟做错了什么？

```
static long getCrc32 (long crc, char[] buf, long len)
{
   long crc_table[] = new long[256];
   int i, k;
   for (i = 0; i < 256; i++) {
      long c = ( long)i;
      for (k = 0; k < 8; k++) 
         c = (c & 1) == 1 ? 0xedb88320 ^ (c >> 1) : c >> 1;
      crc_table[i] = c;
    }

    /* Calculate crc on buf */
    crc = crc ^ 0xffffffffL;
    int j = 0;
    while (len-- != 0){ 
       crc = crc_table[((int)crc ^ (buf[(int)j++])) & 0xff] ^ (crc >> 8);}
    return crc ^ 0xffffffffL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:00:24.173

`char`在 Java 中是两个字节；改为使用`byte`（`char`在 C 和 C++ 中，定义为一个字节）。

`long`在 Java 中是 8 个字节；改为使用`int`（假设`sizeof(unsigned long) == 4`在您的 C++ 平台上，这是常态）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:11:31.440

我看到的一个问题是这一行：

```
c = (c & 1) == 1 ? 0xedb88320 ^ (c >> 1) : c >> 1; 
```

在 C++ 中，`c&1`如果它不为零，则为真；它不必是 1。

此外，您可能应该使用`>>>`而不是`>>`. 前者总是将 0 移到最左边的位，就像 C 运算符`>>`对 unsign 所做的那样。

# r - 从 lapply 提取输出到数据帧

> ID：10590904
> 
> 赞同：20
> 
> 时间：2012-05-14T20:56:13.590
> 
> 标签：r, list, dataframe

我有一些 R 代码，它使用以下代码对当前目录中的所有文件执行一些数据提取操作：

```
files <- list.files(".", pattern="*.tts")
results <- lapply(files, data_for_time, "17/06/2006 12:00:00") 
```

lapply 的输出如下（使用 提取`dput()`） - 基本上是一个充满向量的列表：

```
list(c("amer", "14.5"), c("appl", "14.2"), c("brec", "13.1"), 
c("camb", "13.5"), c("camo", "30.1"), c("cari", "13.8"), 
c("chio", "21.1"), c("dung", "9.4"), c("east", "11.8"), c("exmo", 
"12.1"), c("farb", "14.7"), c("hard", "15.6"), c("herm", 
"24.3"), c("hero", "13.3"), c("hert", "11.8"), c("hung", 
"26"), c("lizr", "14"), c("maid", "30.4"), c("mart", "8.8"
), c("newb", "14.7"), c("newl", "14.3"), c("oxfr", "13.9"
), c("padt", "10.3"), c("pbil", "13.6"), c("pmtg", "11.1"
), c("pmth", "11.7"), c("pool", "14.6"), c("prae", "11.9"
), c("ral2", "12.2"), c("sano", "15.3"), c("scil", "36.2"
), c("sham", "12.9"), c("stra", "30.9"), c("stro", "14.7"
), c("taut", "13.7"), c("tedd", "22.3"), c("wari", "12.7"
), c("weiw", "13.6"), c("weyb", "8.4")) 
```

但是，我想将此输出作为具有两列的数据框处理：一列用于字母代码（`"amer"`等`"appl"`），另一列用于数字（`14.5`等`14.2`）。

不幸的是，`as.data.frame`似乎不适用于列表中嵌套向量的输入。我应该如何进行转换？我是否需要更改函数`data_for_time`返回值的方式？目前它只是返回`c(name, value)`。或者有没有一种很好的方法可以将这种输出转换为数据框？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-14T21:00:28.703

`results`如果你的清单是这样，试试这个：

```
> as.data.frame(do.call(rbind, results))

     V1   V2
1  amer 14.5
2  appl 14.2
3  brec 13.1
4  camb 13.5
... 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-14T21:00:23.757

一种选择可能是使用**plyr**`ldply`包中的函数，它将为您将内容重新拼接到数据框中。

 **一个简单的例子：

```
ldply(1:10,.fun = function(x){c(runif(1),"a")})
                    V1 V2
1    0.406373084755614  a
2    0.456838687881827  a
3    0.681300171650946  a
4    0.294320539338514  a
5    0.811559669673443  a
6    0.340881009353325  a
7    0.134072444401681  a
8  0.00850683846510947  a
9    0.326008745934814  a
10    0.90791508089751  a 
```

但请注意，如果您将变量类型与 混合`c()`，您可能希望*将*函数更改为简单地返回`data.frame(name= name,value = value)`而不是`c(name,value)`. 否则一切都将被强制转换为角色（就像我上面的例子一样）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T22:35:10.093

```
inp <- list(c("amer", "14.5"), c("appl", "14.2"), .... # did not see need to copy all

data.frame( first= sapply( inp, "[", 1), 
            second =as.numeric( sapply( inp, "[", 2) ) )

   first second
1   amer   14.5
2   appl   14.2
3   brec   13.1
4   camb   13.5
5   camo   30.1
6   cari   13.8
snipped output 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T21:16:57.827

因为Nelton接受了我正在给予的回应，而Joran接受了我能想到的唯一其他合理的回应，因为我应该写一篇论文，所以这是一个荒谬的答案：

```
#I named your list LIST
LIST2 <-  LIST[[1]]
lapply(2:length(LIST), function(i) {LIST2 <<- rbind(LIST2, LIST[[i]])})
data.frame(LIST2) 
```**

# validation - cakephp recapthca 插件未设置

> ID：10590906
> 
> 赞同：1
> 
> 时间：2012-05-14T20:56:15.693
> 
> 标签：validation, cakephp, recaptcha

我正在尝试在一些表单上取消 recapthca 验证，但没有任何运气。我总是从我的“recaptcha_response_field”中收到一个错误，指出“您输入的单词不正确。请重试。”

我的大部分表格都需要recaptcha，但我想跳过一些。我试过“MultivalidatableBehavior” [http://bakery.cakephp.org/articles/dardosordi/2008/07/29/multivalidatablebehavior-using-many-validation-rulesets-per-model](http://bakery.cakephp.org/articles/dardosordi/2008/07/29/multivalidatablebehavior-using-many-validation-rulesets-per-model)但我也无法让它工作。

关于我如何能够让它发挥作用的任何想法？

[https://github.com/tbsmcd/recaptcha_plugin](https://github.com/tbsmcd/recaptcha_plugin)

谢谢，巴特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:29:55.023

你将不得不编辑插件行为来做到这一点......这将是最简单的方法，你也可以在行为中做到这一点，但这种方式简单易行。

```
//Your Controller
function add(){
$this->{$this->modelClass}->reCaptcha = true;
if(!empty($this->data)){
$this->{$this->modelClass}->save($this->data);
}
}

//Edit Recaptcha ValidateBehavior
function beforeValidate(&$model) {
if(isset($model->reCaptcha) && $model->reCaptcha){
$model->validate['recaptcha_response_field'] = array(
'checkRecaptcha' => array(
'rule' => array('checkRecaptcha', 'recaptcha_challenge_field'),
'required' => true,
'message' => 'You did not enter the words correctly. Please try again.',
),
);
}
} 
```

# perl - 没有包就不能调用方法“断开连接”..Perl

> ID：10590910
> 
> 赞同：2
> 
> 时间：2012-05-14T20:56:51.793
> 
> 标签：perl, module, dbi

我写了一个 perl 模块：

```
package sql;
use strict;
use XML::Simple;
use DBI;
use DBD::mysql;

require Exporter;
our @ISA = qw(Exporter);
our @EXPORT_OK = qw(DBImport DataFill);
our @EXPORT = qw(DBImport DataFill);

our $dbh;

sub DBConnect() {
    my $platform = "mysql";
    my $database = "databasename";
    my $host = "localhost";
    my $user = "user";
    my $pw = "password";
    my $dsn = "dbi:mysql:$database:localhost";
    $dbh = DBI->connect($dsn, $user, $pw);
    $dbh->do('SET NAMES utf8');
    return $dbh;
}

sub Query($) {
    my $sth = $dbh->prepare(shift);
    $sth->execute;
    while (my $ref = $sth->fetchrow_hashref()) {
        print $ref->{'email'};
    }
    $sth->finish();
}

BEGIN{
    $dbh = &DBConnect();
}

END{
    $dbh->disconnect();
}
1; 
```

我尝试使用它：

```
#!/usr/bin/perl
use strict;
use CGI qw/:standard/;
use CGI::Carp qw/fatalsToBrowser warningsToBrowser/;
use sql;

&Query("SELECT * FROM users"); 
```

但它不起作用。

错误消息：未定义的子例程 &main::Query 在 /var/www/domains/gabordx.tauri.hu/www/main.pl 第 7 行调用。 -> "&Query("SELECT * FROM users");"

有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:15:35.807

您可以直接调用它，添加模块名称：

```
sql::Query("SELECT * FROM users"); 
```

或者您可以从模块中导入它

```
our @EXPORT_OK = qw(Query DBImport DataFill); # In the module

use sql qw(Query); # In caller code 
```

或者您可以默认从 sql.pm 导出它

```
our @EXPORT = qw(Query DBImport DataFill); 
```

`@EXPORT`和参考`@EXPORT_OK`： http: [//perldoc.perl.org/Exporter.html#How-to-Export](http://perldoc.perl.org/Exporter.html#How-to-Export)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:18:23.830

您还需要导出`Query`，如下所示：

```
our @EXPORT_OK = qw(Query DBImport DataFill);
our @EXPORT = qw(Query DBImport DataFill); 
```

否则你应该通过`sql`包来引用它，像这样

```
sql::Query("SELECT * FROM users"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T21:14:06.843

一种方法是导出函数：

```
our @EXPORT = qw(DBImport DataFill Query); 
```

[perldoc 导出器](http://perldoc.perl.org/Exporter.html)

# java - 在自定义地图上使用定位服务

> ID：10590912
> 
> 赞同：0
> 
> 时间：2012-05-14T20:56:55.517
> 
> 标签：java, android, map

所以我们有一个区域的自定义地图，我们想使用位置服务来定位用户的位置。唯一担心的是它不会与我们拥有的地图同步，并且无法使用谷歌地图。有什么方法可以使用位置服务来支持我们的地图？或者您可能有任何其他可以帮助我们的想法？

TL；DR 需要在自定义地图上跟踪用户位置，而不是使用 GMaps

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:43:16.853

这可能不是最优雅的答案，但是如果您参考[How to get Latitude and Longitude of the mobile device in android?](https://stackoverflow.com/questions/2227292/how-to-get-latitude-and-longitude-of-the-mobiledevice-in-android) ，使用 GPS 单元中的纬度和经度并将其映射到您的地图上，您应该最终得到一个相当可行的解决方案。

# html - 如何将空格算作子节点？

> ID：10590916
> 
> 赞同：2
> 
> 时间：2012-05-14T20:57:04.843
> 
> 标签：html

空白算作 DOM 中的空文本元素。我如何计算这些空格？

例如

```
<body>

    <div>

    </div>

    <div>

    </div>

</body> 
```

body 元素中有多少个空格（childNodes）？

每个 div 元素中有多少个空格（子节点）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:16:10.310

您发布的代码有 5 个空格。我会向你解释为什么会这样。首先，我想明确一点，当我提到 whitepace 时，我不仅仅是在谈论`" "`char。空格也可以是`\t`或`\r`chars `\n`，代表空的[文本](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1312295772)节点。
话虽如此，我们可以谈谈您发布的代码在 DOM 中的表示方式：

```
body
 |
 x-- #Text = "\n\t"
 |
 x-- div
 |    |
 |    x-- #Text = "\n\t"
 |
 x-- #Text = "\n\t"
 |  
 x-- div
 |    |
 |    x-- #Text = "\n\t"
 |
 x-- #Text = "\n" 
```

如您所见，`\n`和`\t`位于同一文本节点中。这符合**DOM Level 2**说：

> 当一个文档第一次通过 DOM 可用时，每个文本块只有一个 Text 节点。

因此，下推的断线与`div`右推的选项卡位于同一文本节点中。我们可以更进一步，在其中一个`div`s 中添加一个文本：

```
<body>

    <div>

    </div>

    <div>
        Hello World!
    </div>

</body> 
```

这将由浏览器解析，例如：

```
body
 |
 x-- #Text = "\n\t"
 |
 x-- div
 |    |
 |    x-- #Text = "\n\t"
 |
 x-- #Text = "\n\t"
 |  
 x-- div
 |    |
 |    x-- #Text = "\n\t Hello World! \n\t"
 |
 x-- #Text = "\n" 
```

文本与两个空白节点组合在一起，因为一切都是文本，因此它们成为单个文本块。这是您应该在文档中计算空格的方式。
但我不会依赖我的眼睛并尝试根据计数空格来查找或访问元素。而是使用一些脚本循环`childNodes`并检查[元素](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1950641247)`nodeType`的。 **[在这里](https://developer.mozilla.org/en/Whitespace_in_the_DOM)**，您可以使用一些有用的函数来遍历 DOM，而不必担心空格。 好了，话够多了。让我们看一些代码。要证明您发布的 HTML 有 5 个空格，请参阅这个计算文档中所有文本节点的 工作**[示例。](http://jsfiddle.net/ntv2z/)** 希望它有助于澄清一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:14:37.033

如果你想看看有多少元素是空的？然后我给你一个 jQuery 解决方案。

```
bodyChild = $("body :empty").length;
divHcild = $("#divid :empty").length; 
```

使用它们，您可以知道一个元素中有多少元素是完全空的。

* * *

**更新：** 要获取所有子元素，您可以使用类似这样的东西

身体：

```
var children = document.getElementByTagName('body').childNodes; 
```

# java - 使用 CellList 禁用选择

> ID：10590922
> 
> 赞同：2
> 
> 时间：2012-05-14T20:57:15.867
> 
> 标签：java, gwt, celllist

我有一个`CellList`：

```
friendCellList = new CellList<PlayerDataEntity>(new PlayerCell());
friendCellList.setSelectionModel(new NoSelectionModel<PlayerDataEntity>()); 
```

我希望通过`NoSelectionModel`将阻止 UI 对用户选择单元格列表中的项目做出反应。但是，用户可以正常选择元素。我没有正确应用选择模型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:35:44.020

来自 NoSelectionModel 的 Javadoc：

> 不允许选择但会触发选择更改事件的选择模型。如果您想知道用户何时选择项目，但不希望视图根据选择进行更新，请使用此模型。

这就是它的作用：在标准主题中，这将导致该行不再以蓝色突出显示（“cellListSelectedItem”样式类）。但是，它仍会以黄色突出显示（“cellListKeyboardSelectedItem”样式类）。此外，SelectionChangeEvent 仍将被触发。

要关闭 SelectionChangeEvent，请使用

```
cellList.setSelectionModel(new NoSelectionModel<String>(), 
  DefaultSelectionEventManager.<PlayerDataEntity>createWhitelistManager()); 
```

没有参数的白名单管理器意味着您不能选择任何列。

如果您还想关闭“黄色”突出显示，您应该使用不同的 CellList.Resources 实例来实例化 CellList：

```
public interface MyResources extends CellList.Resources {
  @Override
  @Source("com/mypackage/my.css")
    Style cellListStyle();
}
...
friendCellList = new CellList<PlayerDataEntity>(new PlayerCell(),
    (MyResources) GWT.create(MyResources.class); 
```

我的.css：

```
.cellListEvenItem {}
.cellListKeyboardSelectedItem {}
.cellListOddItem {}
.cellListSelectedItem {}
.cellListWidget {} 
```

# c# - C# 三元表达式类型转换

> ID：10590923
> 
> 赞同：1
> 
> 时间：2012-05-14T20:57:21.773
> 
> 标签：c#, ternary-operator, compile-time

为什么编译器无法正确自动转换此表达式中的值？

```
var input = "Hello";
object x = string.IsNullOrEmpty(input) ? input : DBNull.Value;

//could try this too and get similar compile time error
object x2 = string.IsNullOrEmpty(input) ? 1 : input; 
```

我知道 DBNull.Value 不能转换为字符串；但是，我很好奇为什么它不能合并成一个对象，因为结果只是存储一个引用。如果你把`(object)`它放在 DBNull.Value 前面，它将编译并运行得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:58:35.887

这是因为`string`不可铸造，`DbNull`反之亦然。使用三元运算符时，两个结果操作数必须兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:59:17.230

修复它：

```
string x = string.IsNullOrEmpty(input) ?
                                       input :
                                       DBNull.Value.ToString(); 
```

* * *

我在**Eric Lippert** [博客](http://blogs.msdn.com/b/ericlippert/archive/2006/05/24/type-inference-woes-part-one.aspx)中找到了这个极好的解释：

运营商的规范`?:`规定如下：

> ?: 运算符的第二个和第三个操作数控制条件表达式的类型。设 X 和 Y 是第二个和第三个操作数的类型。然后，
> 
> *   如果 X 和 Y 是相同的类型，那么这是条件表达式的类型。
>     
>     
> *   否则，如果存在从 X 到 Y 的隐式转换，但不存在从 Y 到 X 的转换，则 Y 是条件表达式的类型。
>     
>     
> *   否则，如果存在从 Y 到 X 的隐式转换，但不存在从 X 到 Y 的转换，则 X 是条件表达式的类型。
>     
>     
> *   否则，无法确定表达式类型，并出现编译时错误。

在这种情况下：

*   `string`并且`DBNull`不是同一类型。
*   `string`没有隐式转换为`DBNull`
*   `DBNull`没有隐式转换为`string`

所以我们最终会出现编译时错误。

编译器不会检查可以“持有”这两种类型的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T21:02:16.687

帮助编译器找到你想要的通用基类型，像这样：

```
object x = string.IsNullOrEmpty(input) ? (object)input : DBNull.Value; 
```

# java - Google App Engine：从 Google Cloud Storage 读取

> ID：10590925
> 
> 赞同：0
> 
> 时间：2012-05-14T20:57:29.647
> 
> 标签：java, apache-flex, google-app-engine, google-cloud-storage

我在 Google App Engine 上有一个 Flex/Java 应用程序，我想要的只是使用 Flex 中的 URLRequest 从 Google Cloud Storage 加载大图像。我确信这很简单，但我无法让它工作。我将使用 Google API 控制台手动上传图像，因此我不需要从应用程序中编写任何内容。图片不能公开。

我不是 100% 确定如何访问该文件，所以这可能是问题所在。我试过这些：

*   *“/gs/mybucket/myimage.jpg”*：**未找到**
*   *“/mybucket/myimage.jpg”*：**未找到**
*   *“http://commondatastorage.googleapis.com/mybucket/myimage.jpg”*：**被拒绝**

我在 Google API 控制台的 Team 选项卡中添加了*myappid@appspot.gserviceaccount.com并具有***Can View权限，我使用 GSUtil 在***mybucket*和*myimage.jpg*上获取和设置 ACL以添加*myappid@appspot.gserviceaccount.com的***READ**权限但这没有帮助。

 *我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:39:03.687

我不太确定 flex 是如何工作的，或者它是如何尝试访问 blob 的。

但是，如果您想使用 Google Storage 对象的内容响应 http 请求，则可以使用 serve 方法。

[https://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob](https://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:10:48.193

您是否使用 OAuth 令牌授权 URLRequest 调用？如果不是，那么即使请求是从应用程序引擎应用程序发起的，它也会像未经身份验证的公开读取一样查看 Google Cloud Storage。我不知道 flex 是否有跟踪选项，但如果有办法检查请求详细信息，我会检查您是否设置了正确的身份验证。

如果事实证明很难让 flex 与 OAuth 很好地配合使用，您还可以使用签名 URL（也称为查询字符串身份验证 URL）。这使您能够创建一个带有特殊签名的 URL，该签名隐含地传达您的授权，但只有拥有该链接的人才能访问该对象。可以将对象的 ACL 设置为禁止公共访问，但您的签名 URL 将能够读取该对象。如果您愿意，您还可以对签名 URL 进行时间限制。这是有关如何使用此技术[的文档。](https://developers.google.com/storage/docs/accesscontrol#Signed-URLs)*

# css - css在wordpress主题上悬停在错误的位置

> ID：10590929
> 
> 赞同：0
> 
> 时间：2012-05-14T20:57:44.290
> 
> 标签：css, wordpress

我正在努力解决我网站上的这个悬停问题。每当我翻阅产品时，产品描述都会显示在其下方，我终生无法弄清楚如何修复它：

[http://lovelylovely.me/shop/](http://lovelylovely.me/shop/)

它使用的是有感知的主题，但是在 firebug 花了一些时间试图深入研究 css 之后，我仍然无法弄清楚如何移动产品描述以使其显示在图像的顶部而不是图像的下方。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:58:19.010

我认为这应该适合你：

```
// removes img from the flow, so doesn't push other elements down:
.product > img{position:absolute;z-index:1} 

//on hover, give the other elements positioning & z-index 
// so they're not hidden by the image:
.product:hover h3,
.product:hover .amount,
.product:hover .excerpt,
.product:hover .button add_to_cart_button product_type_simple
    {position:relative;z-index:2} 
```

# c++ - g++：Ubuntu发行版升级后，我的代码都不会链接

> ID：10590931
> 
> 赞同：0
> 
> 时间：2012-05-14T20:58:01.537
> 
> 标签：c++, ubuntu, g++, debian, ld

我正在将 eclipse CDT 用于一个大型 C++ 项目，该项目已经编译了 2 年。大约 2 周前，我开始遇到一些奇怪的段错误，这些段错误毫无意义，似乎 gtk 不知何故被破坏了。所以既然是时候升级发行版了，我决定从 11.04 升级到 12.04。现在，什么都不会链接。我拥有的每个依赖项都会在链接时引发未定义的引用错误。一切都编译得很好，所有 pkg​​-config 命令都返回了它们应该返回的内容。

有任何想法吗？

这是命令：

```
 Invoking: GCC C++ Linker g++ `pkg-config libv4l2 --libs` `pkg-config --libs alsa` -lmysqlcppconn -lboost_regex `pkg-config sigc++-2.0 --libs` `pkg-config gstreamer-0.10 --libs` `pkg-config gstreamer-app-0.10 --libs` `pkg-config gstreamer-interfaces-0.10 --libs` `pkg-config gstreamer-rtp-0.10 --libs` `pkg-config glib-2.0 --libs` `pkg-config gtk+-2.0 --libs` -lX11 -ldl -lXext  `pkg-config gdkmm-2.4 --libs` `pkg-config glib-2.0 --libs` `pkg-config gtkmm-2.4 --libs` `pkg-config ptlib --libs` `pkg-config opal --libs` -fexceptions -o"HHPVideoServer"  ./HHPVideoCodec.o ./engine.o  ./opal/GstEndPoint.o ./opal/Linux_GstEndPoint.o ./opal/opal-call-manager.o  ./logging/log.o  ./gui/HHPVideoCodecGui.o ./gui/misc.o  ./framework/services.o  ./StreamEngine/GSTMediaStream.o ./StreamEngine/HHPStreamingEndPoint.o ./StreamEngine/HHPStreamingProtocol.o ./StreamEngine/Linux_GstMediaStream.o  ./SDKEngine/AudioSettings.o ./SDKEngine/CallSettings.o ./SDKEngine/ClientSocket.o ./SDKEngine/Communications.o ./SDKEngine/DeviceInfo.o ./SDKEngine/FileActions.o ./SDKEngine/MediaCodecs.o ./SDKEngine/NetworkSettings.o ./SDKEngine/OSDSettings.o ./SDKEngine/SDKEngine.o ./SDKEngine/SDKEngineCore.o ./SDKEngine/SIPAccount.o ./SDKEngine/ServerSocket.o ./SDKEngine/SessionScheduleDisplay.o ./SDKEngine/Socket.o ./SDKEngine/VideoInput.o  ./DigitalIO/DigitalIOCore.o ./DigitalIO/DigitalInputEngine.o   
./HHPVideoCodec.o: In function `HHPVideoCodec':
/home/jonathan/workspace/HHPVideoServer/Debug/../HHPVideoCodec.cc:9: undefined reference to `PProcess::PProcess(char const*, char const*, unsigned short, unsigned short, PProcess::CodeStatus, unsigned short, bool)'
/home/jonathan/workspace/HHPVideoServer/Debug/../HHPVideoCodec.cc:9: undefined reference to `PTimedMutex::PTimedMutex()'
/home/jonathan/workspace/HHPVideoServer/Debug/../HHPVideoCodec.cc:9: undefined reference to `PTimedMutex::PTimedMutex()'
/home/jonathan/workspace/HHPVideoServer/Debug/../HHPVideoCodec.cc:9: undefined reference to `PTimedMutex::~PTimedMutex()'
/home/jonathan/workspace/HHPVideoServer/Debug/../HHPVideoCodec.cc:9: undefined reference to `PProcess::~PProcess()'.... 
```

它持续了数千行，每个库都有一个未定义的引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T21:20:03.640

库（作为 pkg-config 的输出）应该列在 .o 文件之后。链接器的参数顺序很重要。

# ruby-on-rails - Rails 3控制台沙箱刷新？

> ID：10590935
> 
> 赞同：2
> 
> 时间：2012-05-14T20:58:22.433
> 
> 标签：ruby-on-rails

我是一名 ruby​​ 新手，跟随 Michael Hartl 的 Ruby on Rails 教程。在第 6 章中，我们正在为我们的用户模型创建验证规则，并在控制台沙箱中进行手动测试。当我更改模型中的规则时，它不会反映在控制台测试中。即，即使我刚刚在我的模型中创建了该验证，也允许保存没有名称的新用户。

```
validates :name, presence:true 
```

如果我退出控制台然后重新启动控制台，一切都会按预期工作。有没有另一种方法来刷新或者我完全做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:02:11.277

在控制台中输入：

```
reload! 
```

# php - 接受来自单个 HTTP POST 的文件上传的 PHP

> ID：10590940
> 
> 赞同：0
> 
> 时间：2012-05-14T20:58:49.307
> 
> 标签：php, file-upload

我试图弄清楚如何让服务器一步通过 HTTP 发布接受文件 - 无需经历创建 html 表单和单击提交按钮的所有麻烦。

我知道如何编写一个 PHP/HTML 包来完成以下任务：

*   用户将本地浏览器指向带有上传表单的 URL
*   用户选择一个本地文件并单击表单上的“上传”按钮
*   服务器接受该文件并将其放置在指定位置

我创建了一个带有表单的 HTML 文件，该表单在单击提交按钮时调用 php 脚本。

我想将其更改为以下内容：

*   从命令行，用户执行以下命令：“curl -X POST @somefile http://myhost/getter.php”
*   服务器（myhost）接受该文件并将其放置在指定位置

换句话说，我想直接将文件发送到 php 脚本，而无需通过表单步骤。

非常感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:24:05.340

[http://curl.haxx.se/docs/httpscripting.html](http://curl.haxx.se/docs/httpscripting.html)

4.3 文件上传POST

```
<form method="POST" enctype='multipart/form-data' action="upload.cgi">
  <input type=file name=upload>
  <input type=submit name=press value="OK">
</form> 
```

命令行等效：

```
 curl --form upload=@localfilename --form press=OK [URL] 
```

# ruby-on-rails - 用解析的数据填充 rails 表单

> ID：10590942
> 
> 赞同：0
> 
> 时间：2012-05-14T20:59:02.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我在我的库中设置了一个 nokogiri 脚本作为模块。我的产品表单中还有一个字段，它获取一个 url 并将其传递给 nokogiri 脚本。如何使用 nokogiri 模块解析的数据填写表单字段。本质上，我希望表单填充解析数据，以便用户只需查看产品并将其添加到数据库。

我的模块：

```
 module product
   def get_product
        url = ""
        product_page = Nokogiri::HTML(open(url))
        image_url = product_page.at_xpath('/html/body/div/div[2]/div[4]/div[4]/div/div/div/div').children[3].attributes['href'].text
          title_text = product_page.at_xpath('/html/body/div/div[2]/div[4]/div[4]/div[2]/div[2]/div/form/div/h1').text
        description = product_page.at_xpath('//*[(@id = "SITCC_1column")]//*[contains(concat( " ", @class, " " ), concat( " ", "ItemSectionContent", " " ))]').text.strip!
        curr_item_price = product_page.at_xpath('//*[(@id = "WM_PRICE")]//*[contains(concat( " ", @class, " " ), concat( " ", "camelPrice", " " ))]').text[/[0-9\.]+/]
        base_item_price = product_page.at_xpath('//*[(@id = "WM_PRICE")]//*[contains(concat( " ", @class, " " ), concat( " ", "SubmapPrice", " " ))]').text[/[0-9\.]+/]      
        wm_item_num = url.split("/").last
        id_str = "walmart_#{wm_item_num}"

      end
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:22:39.780

## **请原谅我的语法，我认为解决问题的方法是这样的，**

```
 ====================================Module================================            
        module product
                   def get_product(product)
                        product_page = Nokogiri::HTML(open(product.url))
                        product.image_url = product_page.at_xpath('/html/body/div/div[2]/div[4]/div[4]/div/div/div/div').children[3].attributes['href'].text
                        product.title_text = product_page.at_xpath('/html/body/div/div[2]/div[4]/div[4]/div[2]/div[2]/div/form/div/h1').text
                        product.description = product_page.at_xpath('//*[(@id = "SITCC_1column")]//*[contains(concat( " ", @class, " " ), concat( " ", "ItemSectionContent", " " ))]').text.strip!
                        product.curr_item_price = product_page.at_xpath('//*[(@id = "WM_PRICE")]//*[contains(concat( " ", @class, " " ), concat( " ", "camelPrice", " " ))]').text[/[0-9\.]+/]
                        product.base_item_price = product_page.at_xpath('//*[(@id = "WM_PRICE")]//*[contains(concat( " ", @class, " " ), concat( " ", "SubmapPrice", " " ))]').text[/[0-9\.]+/]      
                        product.wm_item_num = url.split("/").last
                        product.id_str = "walmart_#{wm_item_num}"

                        product # returning product after parsing the url and setting other fields.

                      end
                    end

    ====================================View================================

                <%= form_tag url_for(:controller => 'products', :action => 'parse_url') do  %>

                   <p>
                    <%= label_tag :enter_url %> :<br />
                    <%= text_field_tag :url %>
                  </p>   

                  <p class="button"><%= submit_tag "Parse"  %></p>

    ====================================Controller================================

            class ProductsController < ApplicationController
             include MyModule #if your file name is my_module.rb in /lib folder.

              def parse_url
                @product = Product.new
                @product = get_product(@product)
                render ('products/new')
              end

              def create

                @product = Product.new(params[:products]) # the usual way

                if @product.save
                else
                end

              end

            end

    ====================================View================================

                <%= form_for @product, :url => {:controller => 'products', :action => 'create'} do |f| %>

                <p>
                    <%= f.label :image_url %> : <%= f.text_field :image_url %>
                </p>
                <p>
                    <%= f.label :title_text %> : <%= f.text_field :title_text %>
                </p>
                <p>
                    <%= f.label :description %> : <%= f.text_field :description %>
                </p>
                .
                .
                .
                .
                <p class="button"><%= f.submit "Create this product"  %></p>

    ====================================The End================================

Thanks. 
```

# listview - 如何在 ListView 中创建不可重复且不可点击的静态标题

> ID：10590946
> 
> 赞同：2
> 
> 时间：2012-05-14T20:59:12.013
> 
> 标签：listview, header

我正在尝试为我的列表视图创建一个静态标题，但标题为列表中的每个项目重复。我试图为我的标题制作线性布局，但只有标题显示并且列表视图没有显示。

以及如何使它不可点击。我想为我创建的图像实现退出功能，但现在，整行都是可点击的。

下面是布局代码。有人可以纠正我哪里出错了吗？

```
 <?xml version="1.0" encoding="utf-8"?>   
     <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
       >  
     <LinearLayout 
            android:id="@+id/header"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/header"
            android:paddingBottom="5dip"
            android:paddingTop="5dip" >
             <TextView
            android:id="@+id/title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"  
            android:text="Patient List"  
            android:layout_marginLeft="20dp"    
            android:textColor="#343434"
            android:textSize="20dip"
            android:layout_marginTop="1dip"
             android:layout_weight="2"
            android:textStyle="bold"
         />  
            <ImageView
                android:id="@+id/exit"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dip" 
                android:layout_weight="2"
                android:src="@drawable/exit" /> 
        </LinearLayout>     
        <LinearLayout
        android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:layout_below="@+id/header"
     >   
    <RelativeLayout
    android:layout_width="wrap_content"
     android:layout_height="wrap_content"
    android:background="@drawable/list_selector"
    android:orientation="horizontal" 
    android:padding="5dip"  
    > 
    <!--  ListRow Left side Thumbnail image -->
    <LinearLayout android:id="@+id/thumbnail"  
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dip"      
        android:layout_alignParentLeft="true"
        android:background="@drawable/patient"  
        android:layout_marginRight="5dip" 
        > 
    </LinearLayout> 
    <!-- patient id -->
    <TextView
        android:id="@+id/firstName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"        
        android:textColor="#343434"
        android:textSize="10dip"
        android:layout_marginTop="1dip"
        android:textStyle="bold"
        android:layout_toRightOf="@+id/thumbnail" /> 
    <TextView
        android:id="@+id/lastName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#343434"
        android:textStyle="bold"
        android:layout_below="@id/firstName"
        android:textSize="10dip"
        android:layout_toRightOf="@+id/thumbnail" 
                /> 
    <TextView
        android:id="@+id/patientId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#343434"
        android:textStyle="bold"
        android:layout_toRightOf="@+id/thumbnail" 
         android:layout_below="@id/lastName"
        android:textSize="10dip"
        />
    </RelativeLayout>
    </LinearLayout>
   </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:58:24.533

使用 addHeaderView 并将 selectable 设置为 false。

mListView.addHeaderView(headerView, null, false);

# login - 如何使用 Google 的 OpenID 和/或 OAuth 服务登录并允许对 API 的访问，而对用户只有一个提示？

> ID：10590948
> 
> 赞同：1
> 
> 时间：2012-05-14T20:59:16.793
> 
> 标签：login, oauth, openid, token

我正在尝试为我的网站创建一个登录系统，允许通过 Google 的 API 进行身份验证和访问任何支持 OAuth 的 Google 数据 API，同时理想情况下只向用户显示一个提示，无论他是创建帐户还是登录他现有的。我想尽量减少他被要求批准的次数。

我知道谷歌为此目的提供了混合 OpenID/OAuth，但问题是*每次我向我的 OpenID 请求添加 OAuth 扩展时，它永远不会记住用户对该请求的批准*。当我进行混合 OpenID/OAuth 时，有*什么方法可以记住批准？*如果我只是在没有 OAuth 扩展的情况下执行 OpenID，那么一切都会很好地记住，并且不会一直用提示来干扰用户。

除了我的 OpenID 请求之外，这是我发送的相关扩展，这导致我获得 OAuth 请求令牌（好）但导致批准永远不会被记住（坏）。

PHP 语法：

```
$args["openid.ns.ext2"] = 'http://specs.openid.net/extensions/oauth/1.0';
$args["openid.ext2.consumer"] = 'www.MYSITE.com';
$args["openid.ext2.scope"] = 'http://www-opensocial.googleusercontent.com/api/people/';
$args["openid.mode"] = 'checkid_setup';
$args["openid.realm"] = 'http://www.MYSITE.com/'; 
```

Hybrid OpenID/OAuth 以这种方式行事是否正常（不记得最后一次 OAuth 授权）？解决这个问题的最佳方法是什么？我曾想过在用户的计算机上存储 cookie 以链接到我的数据库中的某个位置，这样我就可以再次使用最后一个访问令牌，等等......（这里的问题是我不知道要查找谁的令牌，除非我知道谁用户是......一个循环问题）。并且执行仅 OpenID 请求以获取他的用户 ID 以查看他是否有帐户以查找他的访问令牌，然后执行 OpenID+OAuth 请求（如果未存储他的访问令牌）将导致两个提示，这真的无济于事。

看起来 Hybrid 似乎只支持 OAuth 1.0，我认为它在 2015 年之前都很好，所以现在对我来说这不是问题。我假设他们将来会支持 OAuth 2.0。

**checkid_immediate**是否与此相关？我只是不确定如何使用它来完成我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T23:44:27.097

我建议使用 OAuth 2.0。这支持获取身份和对 API 的访问——因此实现了相同的最终目标，但比 OAuth 1 Hybrid 容易得多。

看看这里： [https ://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

您尝试访问的范围包含在 URL 中（请参阅“形成 URL”）。引用的文档列出了获取身份/配置文件信息所需的范围。您可以简单地向字符串添加额外的范围，以逗号分隔，以便请求访问其他 API。生成的访问令牌将访问 API 和身份信息（通过提到的 UserInfo API 端点）。

也就是说，您尝试对 OpenID 2.0/OAuth 1 混合执行的操作应该可以工作——并且用户应该会看到一个“记住”授权的复选框。如果您真的想进一步调试它，有一个可以指向的网页会很有帮助，该网页会启动此身份验证+授权流程，这样我们就可以看到发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:42:11.900

我发现checkid_immediate（和x-has-session，不确定是否需要甚至工作）允许我确定用户是否在不提示他的情况下登录，如果他是，它给了我一个claim_id通过它我可以识别用户。这正是我所需要的。原始问题已解决，*但*我确实想弄清楚如何使用 OAuth 2.0 来识别，因为我已经实现了。

此外，我注意到在使用 OpenID/OAuth 时，即使在他授权 OpenID 之后，用户仍然会被要求授权 OAuth。从用户的角度来看，我看不到混合方法的优势。

如果用户从 Google 中注销，则总共需要三个提示来注册我的网站并获取他的姓名和个人资料图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T23:22:18.577

如果有人想知道，这里是使 Hybrid OpenID/OAuth 完全工作所需的步骤（概述）。在整个过程中，我感到非常困惑，所以我希望这对某人有所帮助。

*   进行正常的 OpenID 握手并为 OAuth 1.0 添加 AX 扩展。
    *   使用“checkid_immediate”允许在*不*提示用户的情况下探测活动的 Google 会话。使用 *claimed_id* 作为唯一标识符将用户链接到您的数据库。
    *   如果返回“setup_needed”，请使用“checkid_setup”，以便在继续之前提示并验证用户。
    *   这给您留下了两种可能性。*checkid_immediate* 立即返回给你一个claim_id，或者在*checkid_setup*（基本上是注册）成功后通过的claim_id。
*   Hybrid OpenID/OAuth 1.0 会给你一个*授权*的请求令牌。
*   使用*授权*的请求令牌获取*访问令牌*（*只*需要调用OAuthGetAccessToken）
*   使用该 OAuth 1.0 访问令牌来做任何你想做的事情。

我成功地使用 OAuthGetAccessToken 从我的混合 OAuth 舞蹈的授权请求令牌中获取访问令牌，省略了“oauth_verifier”参数（与混合无关）。

在我的混合 OAuth 舞蹈之后，我成功地使用 OAuthGetAccessToken 获取访问令牌，省略了“oauth_verifier”参数（与混合无关）。

在 PHP/Zend 环境中：

```
$config = array(
    'accessTokenUrl' => 'https://www.google.com/accounts/OAuthGetAccessToken',
    'consumerKey' => $consumer_key,
    'consumerSecret' => $consumer_secret
);
$consumer = new Zend_Oauth_Consumer($config);

$zendRToken = new Zend_Oauth_Token_Request(); // create class from request token we already have
$zendRToken->setToken($requestToken);

try{
    $accessToken = $consumer->getAccessToken(array(
          'oauth_token'               => $requestToken,
//          'oauth_verifier'            => '', // unneeded for Hybrid
          'oauth_timestamp'           => time(),
          'oauth_nonce'               => md5(microtime() . mt_rand()),
          'oauth_version'             => '1.0'
      ), $zendRToken);
} catch (Zend_Oauth_Exception $e){
    echo $e->getMessage() . PHP_EOL;
    exit;
}

echo "OAuth Token: {$accessToken->getToken()}" . PHP_EOL;
echo "OAuth Secret: {$accessToken->getTokenSecret()}" . PHP_EOL; 
```

# c++ - 字符串操作，转换时在字符串开头显示 0

> ID：10590953
> 
> 赞同：3
> 
> 时间：2012-05-14T20:59:23.487
> 
> 标签：c++, string

我想知道如何使`string`我从转换`DWORD`为`onstringstream`然后转换为`AnsiString`。

但这并不重要，转换可能是 from `int`to `string`，**我只是想知道如何让每个字符串转换为 ALWAYS show `6`digits**，比如如果我的号码是`57`，`string`那么它将是`000057`。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T21:05:17.250

使用[io 操纵器](http://en.cppreference.com/w/cpp/io/manip) `setfill`和`setw`：

```
#include <iostream>
#include <string>
#include <sstream>
#include <iomanip>

int main()
{
    std::ostringstream s;

    s << std::setfill('0') << std::setw(6) << 154;

    std::cout << s.str() << "\n";

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:05:26.533

那么，关于格式化输出的问题？你可以使用`iostream::width`和`iostream::fill'：

```
// field width
#include <iostream>
using namespace std;

int main () {
  cout << 100 << endl;
  cout.width(6);
  cout.fill('0');
  cout << 100 << endl;
  return 0;
} 
```

# php - 使用 Cron'd PHP Script + DropboxUpload.php 将文件复制到 DropBox

> ID：10590955
> 
> 赞同：1
> 
> 时间：2012-05-14T20:59:28.813
> 
> 标签：php, cron, dropbox

我正在使用此脚本的修改版本来备份我网站的数据库。我也想将我网站的内容备份到 DropBox。如何修改以下 PHP 脚本来执行此任务？然后，我将其设置为作为 Cron 作业运行。

```
$dropbox_email='myEmail';  //Dropbox username
$dropbox_pass='myPassword';   // Dropbox password
$dropbox_dir='/SITE-BACKUPS';

$backupfile = $dbname . date("Y-m-dTh:i:s") . '.sql.gz';
$backupdir = dirname(__FILE__);
system("mysqldump -h $dbhost -u $dbuser --password='$dbpass' $dbname | 
gzip > $backupfile");

include("DropboxUploader.php");
$uploader = new DropboxUploader($dropbox_email, $dropbox_pass);
$uploader->upload($backupdir.'/'.$backupfile,$dropbox_dir);
unlink($backupfile); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:42:27.527

这取决于您的意思是您网站的内容。如果您只是想获取网络服务器文档根目录中的所有内容，您可以将系统命令替换为以下内容：

```
system("tar -czvf $sitebkpfile $siteroot"); 
```

您定义的位置`$siteroot = "/var/www/html";`或文档根目录是什么，以及

```
$sitebkpfile = "site" . date("Y-m-dTh:i:s") . '.tgz'; 
```

# xml - XML exists() 用于在 tsql 中删除

> ID：10590960
> 
> 赞同：0
> 
> 时间：2012-05-14T20:59:46.420
> 
> 标签：xml, tsql, xsd

当我尝试删除不在 XML 模式中的 XML 元素时，我得到

> 消息 2260，级别 16，状态 1，第 13 行
> XQuery [Table_name.Table_XML_field.exist()]：没有名为“XML_element_name”的元素

尽管将删除包装在布尔值中

```
IF EXISTS (select 'x'
from sys.xml_schema_collections xsc
    inner join sys.xml_schema_elements xse on xsc.xml_collection_id = xse.xml_collection_id
where 1 = 1
and xse.is_qualified = 0
and xsc.name = 'XML_schema_name'
and xse.name = 'XML_element_name')
BEGIN

UPDATE Table_name
SET Table_XML_field.modify(' delete (//XML_element_name)')
WHERE Table_XML_field.exist('(//XML_element_name)[1]') = 1

END 
```

我将删除包装在布尔条件中，但仍然出现该错误。如果 XML 节点不存在，是否有不同的方法不执行“UPDATE”语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:57:14.677

这有点可怕，但您可以将更新包装在 EXEC() 中：

```
IF EXISTS (...8<...)
BEGIN

EXEC('
UPDATE Table_name
SET Table_XML_field.modify('' delete (//XML_element_name)'')
WHERE Table_XML_field.exist(''(//XML_element_name)[1]'') = 1
')
END 
```

# typo3 - 将用户重定向到移动网站并使用打字稿返回typo3

> ID：10590961
> 
> 赞同：3
> 
> 时间：2012-05-14T20:59:54.003
> 
> 标签：typo3, typoscript

我发现如果我使用下面的打字稿，我可以将我的用户重定向到该网站的移动版本，该网站在我的typo3 网站后端有自己的树。

```
[useragent = *iPhone*]||[useragent = *iPod*]||[useragent = *Android*]
config.additionalHeaders = Location: http://m.example.com/
[end] 
```

这是该网站的简化版本，但是我想返回完整的网站链接。但是由于我上面的打字错误将用户重定向到 m 域，我无法返回 www.example.com。

有人在这里有任何排版建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:35:17.187

您需要在链接中添加一个附加参数，您可以使用它来关闭重定向。

尝试这样的事情：

```
# check for mobile browser
[useragent = *iPhone*]||[useragent = *iPod*]||[useragent = *Android*]
config.additionalHeaders = Location: http://m.example.com/
[global]

# undo mobile redirect if mobile param is set
[globalVar = GP:nomobileredirect > 0]
config.additionalHeaders =
[global] 
```

并在您的链接上重定向到[http://www.example.com/?nomobileredirect=1 。](http://www.example.com/?nomobileredirect=1)

要在所有生成的链接中保留 nomobileredirect 值，请将 nomobileredirect 添加到您的 linkVars，例如

```
config.linkVars = nomobileredirect,L 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:26:44.463

您可以在 GET 参数上使用另一个条件并覆盖`config.additionalHeaders`后者。请记住，TS 不是一种脚本语言，而是一种静态配置。最后一条语句总是获胜，并且只有在解析完所有 TS 后才开始渲染。

您还可以尝试通过额外排除 GET 参数来扩展上述条件。

# javascript - 什么会导致 Scripting.FileSystemObject.OpenTextFile() 失败？

> ID：10590964
> 
> 赞同：0
> 
> 时间：2012-05-14T21:00:12.770
> 
> 标签：javascript, windows, activex, windows-scripting

我们有一个（非网络）应用程序，它使用 Javascript 来扩展其功能。有一次，有一个脚本命令创建一个`Scripting.FIleSystemObject`ActiveX 对象并调用`OpenTextFile`它来读取配置文件。

文件总是在那里，总是在同一个地方。大多数情况下，这是可行的，但我有断断续续的报告说它因“找不到文件”错误而失败。该文件不会去任何地方，所以有谁知道还有什么可能导致它失败？可能是并发/权限错误，因此仅当两个文件尝试同时打开它时才会发生？这是我唯一能想到的，但这不应该返回“找不到文件”......

# java - 在 Android 编程中使用套接字和对象 IO 流

> ID：10590971
> 
> 赞同：1
> 
> 时间：2012-05-14T21:00:29.680
> 
> 标签：java, android, sockets

我正在尝试在我一直在编写的游戏中实现多人游戏，并且我已经成功连接了一切（我认为..），但是当我运行它时，客户端抛出了 EOFException，并且未成功接收对象（一个 ArrayList）。

服务器线程的代码：

```
 class ServerThread implements Runnable
{
    ServerSocket server = null;
    Socket controlSocket = null;
    ObjectOutputStream outStream = null;
    ObjectInputStream inStream = null;
    @Override
    public void run() {
        setupConnection();
        while(true){
            sendObject(out.getStuff());     
        }

    }
    void setupConnection(){
        Log.e("OUTPUTSHOOTER","init-connect");
        try {
            server = new ServerSocket(SERVERPORT);
            Log.e("OUTPUTSHOOTER","server initiated port: "+SERVERPORT);
        controlSocket = server.accept();
        Log.e("OUTPUTSHOOTER","connected");
        inStream =  new ObjectInputStream(controlSocket.getInputStream());
        outStream = new ObjectOutputStream(controlSocket.getOutputStream());
        } catch (StreamCorruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("OUTPUTSHOOTER",server+" "+controlSocket+" "+inStream+" "+outStream);
        }

    public Object recieveObject(){
        Object o = null;
        try {
            o = inStream.readObject();
        } catch (OptionalDataException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return o;
    }
    public void sendObject(Object o)
    {
            try {
                outStream.writeObject(o);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    }
} 
```

然后是客户端的代码：

```
 class ClientThread implements Runnable
{
    Socket controlSocket = null;
    ObjectOutputStream outStream = null;
    ObjectInputStream inStream = null;
    @Override
    public void run() {
        setupConnection();
        while(true){
            Log.e("OUTPUTSHOOTER","recieving");
            Object in = recieveObject();
            if(in!= null && in instanceof ArrayList)
            {
                Log.e("OUTPUTSHOOTER","loading");
                out.load((ArrayList<UniverseObject>)in);
            }       
        }

    }

    void setupConnection(){
        Log.e("OUTPUTSHOOTER","ip: "+SERVERIP);
        while(controlSocket == null) {
            try {
                controlSocket = new Socket(SERVERIP,SERVERPORT);
                Log.e("OUTPUTSHOOTER","socket connected");
            } catch (IOException e) {
                e.printStackTrace();
            }

        }
        try {
            Log.e("OUTPUTSHOOTER","attempting streams");
            outStream = new ObjectOutputStream(controlSocket.getOutputStream());
            Log.e("OUTPUTSHOOTER","output working");
            inStream =  new ObjectInputStream(controlSocket.getInputStream());
            Log.e("OUTPUTSHOOTER","streams connected");

        } catch (StreamCorruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }
    }
    public Object recieveObject(){
        Object o = null;
        try {
            o = inStream.readObject();
        } catch (OptionalDataException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return o;
    }
    public void sendObject(Object o)
    {
            try {
                outStream.writeObject(o);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    }
} 
```

这是什么意思？也许更重要的是，我该如何解决？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:02:01.013

我没有看到你关闭你的输出流。

请参阅此 SO 主题：[Problem serializing and deserializing ArrayList](https://stackoverflow.com/questions/3588932/problem-serializing-and-deserializing-arraylist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T01:57:14.603

事实证明服务器没有正确启动它的输入和输出流，即使它的套接字是成功的。不知道为什么，但只有当我先从输出流开始，然后是输入（？）时它才有效。还有一些其他非常奇怪的错误，但至少沟通似乎有效.. 在发布到这里之前，我会更多地研究它们。多谢你们！

# html - PHP/ARRAY/HTML TABLE - 为什么这会在整个过程中重复相同的事情？

> ID：10590975
> 
> 赞同：0
> 
> 时间：2012-05-14T21:00:49.093
> 
> 标签：html, arrays, facebook, facebook-graph-api

我试图将 Facebook Graph API 中的一组朋友姓名：$friends['name'] 转换为一个有 4 列的表格，每个框中都有一个人的名字。

问题：

我让它制作一个表格并将人们的名字放在表格的单元格中，但是，它在所有 4 行中重复每个人的名字，而不是在每个框中放置一个唯一的名字。但是，下一行以新名称开头。

我会非常感谢任何可以帮助指出我哪里出错并帮助我纠正它的人：

```
 <? 
    $friends_url = "https://graph.facebook.com/".$user_id."/friends?access_token=".$access_token;
    $friends_json = file_get_contents($friends_url);
    $friends_data = json_decode($friends_json, true);       
    $friends_total = count($friends_data['data']);
    $cols = 4;
    for ($i = 0; $i < $friends_total; $i++) 
    {
            $friends = $friends_data['data'][$i];
            echo "<tr>"; 
                for ($c=0; $c<$cols; $c++) 
                {
                $n = $i+$c;
                    if ( $n < $friends_total) 
                    {
                        echo "<td>".$friends['name']."</td>"; 
                    }
                    else
                    {
                        echo "<td></td>";
                    }
                } 
            echo "</tr>"; 
        $i += ($c-1); 
    } 
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:54:57.843

因为您要为每个朋友循环 4 次，并且您的“列”循环计数器在该循环内，所以请尝试更多类似这样的操作：

```
$cols = 4;
$current_col = 0;

    echo "<tr>"; 
    foreach ($friends_data['data'] as $friend)
    {
      echo "<td>".$friend['name']."</td>"; 
      if (($current_col++)%$cols == 0){
        echo "</tr><tr>";
      }
    }
   while (($current_col++)%$col !=0){
   echo "<td>&nbsp;</td>";
   }
   echo "</tr>"; 
```

这循环遍历所有的朋友，保持一个计数器已经打印了多少。4（/或任何 $cols 设置为）之后，它吐出一个新行当所有朋友都打印出来时，它开始一个新循环以用空单元格填充最后一行的末尾，然后结束该行

# package - 如何发布nuget预发布版本包

> ID：10590978
> 
> 赞同：81
> 
> 时间：2012-05-14T21:00:53.813
> 
> 标签：package, nuget, pack

我了解如何使用 nuget 命令行发布 nuget 包

[nuget 命令行](http://docs.nuget.org/docs/reference/command-line-reference)

但是我四处搜索我没有找到有关如何发布 nuget 预发布包的文档

![在此处输入图像描述](../Images/88fd0f7e564e62ea3a58a15e71ac80b3.png)

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-15T16:58:41.463

您只需指定使用 SemVer 格式（例如 1.0-beta）而不是通常格式（例如 1.0）的版本字符串，NuGet 会自动将其视为预发布包。

“从 NuGet 1.6 开始，NuGet 支持通过根据语义版本控制 (SemVer) 规范在版本号中指定预发布字符串来创建预发布包。” [请参阅 NuGetDocs - 预发布版本](http://docs.nuget.org/ndocs/create-packages/prerelease-packages)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-31T17:01:47.163

此外，如果其版本号低于稳定版本，则不会显示预发布版本。例如，如果您有

*   MyNuget v1.0.26
*   MyNuget v1.0.25-beta

只有稳定版本会出现在列表中。

如果你有

*   MyNuget v1.0.26
*   MyNuget v1。**1** .25-β

预发布版本将是可安装的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-30T05:35:00.250

只需简单地将“-alpha”或“-beta”添加到文件的`version`键中`.nuspec`。这会将您的客户端发布为预发布版本。

重要提示：假设你想测试一个版本`7.6.6.4`，那么你可以在`7.6.6.4-alpha`. 避免添加`-alpha`到您已经发布的版本中，例如：`7.6.6.3-alpha`

**样本：**

```
<?xml version="1.0" encoding="utf-8"?>
<package xmlns="http://schemas.microsoft.com/packaging/2013/05/nuspec.xsd">
  <metadata>
    <id>AnalyticalService.Client</id>
    <version>7.6.6.4-alpha</version>
    <title>.net client for Analytical Service</title>
    <authors>Kushal Seth</authors>
    <owners>Kushal Seth</owners>
    <requireLicenseAcceptance>false</requireLicenseAcceptance>
    <description>Alpha version for events integration</description>
    <summary>Alpha version for events integration</summary>
    <dependencies>
      <dependency id="EntityFramework" version="6.1.3" />
      <dependency id="Newtonsoft.Json" version="11.0.2" />
      <dependency id="System.Net.Http" version="4.0.0" />
      <dependency id="System.Net.Http.Formatting.Extension" version="5.2.3" />
      <dependency id="WindowsAzure.Storage" version="9.3.3" />
      <dependency id="Polly" version="7.1.0" />
      <dependency id="Microsoft.Azure.KeyVault.Core" version="1.0.0" />
      <dependency id="NETStandard.Library" version="1.6.1" />
      <dependency id="Microsoft.NETCore.Platforms" version="1.1.0" />
    </dependencies>
  </metadata>
  <files>
    <file src="E:\service\AnalyticalService\src\AnalyticalService.Client\bin\Release\AnalyticalService.Client.dll" target="lib\AnalyticalService.Client.dll" />
    <file src="E:\service\AnalyticalService\src\AnalyticalService.Client\bin\Release\AnalyticalService.Model.dll" target="lib\AnalyticalService.Model.dll" />
  </files>
</package> 
```

要在 Nuget 包管理器中检查您发布的包，您必须选中此复选框：（我使用的是 VS 2019 Professional 16.8 版本，您的 VS 版本中可能有类似的选项）

[![在此处输入图像描述](../Images/1c9a25ebf46524d393a1e5b52a14d728.png)](https://i.stack.imgur.com/VaxMn.png)

# vb.net - WebRequest.GetResponse 忽略我的超时值？

> ID：10590980
> 
> 赞同：2
> 
> 时间：2012-05-14T21:00:58.383
> 
> 标签：vb.net, timeout, webresponse

我正在尝试在 a 上设置一个近乎无限的超时值`WebRequest`，考虑到我正在查询的基于 HTTP 的 API 已经通过发回声明超时的 XML 文档来优雅地处理超时。但出于某种原因，以下代码仍然会引发异常：

```
Dim request As WebRequest = WebRequest.Create("http://api/cgi-bin/do?cmd=longRunningOperation&timeout=300")
' ^ command returns timeout if not complete within 300 seconds (5 minutes)

request.Timeout = Integer.MaxValue ' so we don't need client-side timeout handling

Dim response As WebResponse = request.GetResponse() ' yet this call blows up 
```

很抱歉，我无法提供您可以调试的东西，但根据 MSDN，这是如何做到的。然而，大约 100 秒后我仍然收到 WebException（消息：`The operation has timed out`，状态：） `WebExceptionStatus.Timeout`。

有人可以解释这种行为吗？（如果没有，请提出解决方法？）

**编辑**

这个问题可能与这个片段是在 a 中执行的事实有关`Task`，但到目前为止，这仍然是我所知道的。

**编辑2**

在 UI 线程上运行代码仍然会抛出相同的异常，所以也许毕竟不是这样......

**编辑3**

经过一夜好眠后，我认为它可能会这样做，因为我没有正确关闭我的响应或响应流。我正在发送多个请求，而长时间运行的操作仍然很忙。我可以想象，如果您没有在此处正确处理，则会出现较低级别的问题。但对我来说很难说，因为我不知道 webrequest/webresponse 类的内部工作原理。

我正在使用的代码：[http](http://code.google.com/p/dune-api-codepack/source/browse/ApiWrappers/DuneCommands/CommandResult.vb) ://code.google.com/p/dune-api-codepack/source/browse/ApiWrappers/DuneCommands/CommandResult.vb （不是最新的提交，但差异不是太大）

有问题的方法是`GetResults(command)`。不要介意这个`GetResultsAsync`方法，它只是一个草稿（尽管它可能包含相同的错误）。

**编辑4**

忽略我所说的一切，问题和解决方案在我下面的答案中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:50:40.770

特别感谢@mellamokb 试图与我一起解决这个问题，但解决方案实际上是你们都不知道的。

在设置请求超时之前，我很愚蠢地将发布数据写入请求流。我想这就是你在疲倦时尝试编写代码的结果。

感谢你的宝贵时间。

# c# - Ajax Accordion 仅使用第一个窗格上下移动左列内容

> ID：10590982
> 
> 赞同：1
> 
> 时间：2012-05-14T21:01:04.670
> 
> 标签：c#, asp.net, accordion

我的页面设置顶行有一列，第二行分为两列，最后一行也只有一列。

我的 Ajax 手风琴在第二行的第二列，在第一列，我有我的导航，导航页面在母版页上，所以它在每个页面上。手风琴位于内容占位符中，因此它只出现在一页上。

我遇到的问题是当我在带有手风琴的页面上时，当我展开第一个窗格时，它会像预期的那样将其他窗格向下推，但与此同时，导航也会向下移动。当我折叠它时，它会重新向上移动。当我展开第二个窗格时，它只会按预期移动手风琴。

这只发生在 2 个浏览器上：Firefox 和 IE。我在chrome上没有遇到这个问题。

如果我可以进一步澄清任何事情，我会尽力而为，如果您需要任何代码片段，我会根据需要提供它们，我只是不明白它为什么这样做。

谢谢你。

CSS：

```
.aHeader 
{

cursor:pointer;
background-color:#00457c; 
border: 1px solid #00457c;
color: White;
font-family: Arial, Helvetica, Sans-Serif; 
font-size:8pt; 
font-weight:bold;
padding:5px; 
margin-top:5px;
text-align:left; 

}

.aContent 
{
background-color:#F5FCFF; 
border:1px solid #00457c;
font-family:Arial, Helvetica, Sans-Serif; 
font-size:.8em; 
font-weight:normal;
border-top:none; 
padding:5px; 
padding-top:10px;

}
.aSelected
{
background-color:#005ca8; 
border: 1px solid #005ca8;
font-family: Arial, Helvetica, Sans-Serif; 
font-size:8pt; 
font-weight:bold;
padding:5px; 
margin-top:5px;
text-align:left; 
} 
```

这是包含移动部件的表格行，第一个 TD 通过垂直对齐固定，第二个 TD 与导航保持不变

```
<tr>
 <td align="top" style="vertical-align:top;"><asp:Panel runat="server" 
  ID="pnlSelectedCustomer" Visible="false" class="style1" >Selected Customer: 
  <asp:DropDownList runat="server" AppendDataBoundItems="true" ID="ddlSelectedCustomer"
                                onselectedindexchanged="ddlSelectedCustomer_SelectedIndexChanged"
  AutoPostBack="True" EnableViewState="true" DataTextField="CustomerName" DataValueField="CustomerID">
  <asp:ListItem Text="Please Select Customer" Value=""/>
  </asp:DropDownList></asp:Panel></td>
  <td valign="top" rowspan="2" colspan="2" style="border-left:2px solid #000000;">
  <asp:ContentPlaceHolder ID="cphMainWindow" runat="server" OnLoad="cphMainWindow_Load"> </asp:ContentPlaceHolder>
  </td>
  </tr>
  <tr height="90%">                                              
  <td valign="top" style="vertical-align:top;">
   <asp:TreeView ID="tvMainMenu" runat="server" DataSourceID="SiteMapDataSource1" 
                                  ImageSet="Arrows" HoverNodeStyle-ForeColor="Black">
         <ParentNodeStyle Font-Bold="False" ForeColor="Black" />
         <HoverNodeStyle  Font-Underline="True" ForeColor="#5555DD" />
         <SelectedNodeStyle Font-Underline="True" ForeColor="#5555DD" HorizontalPadding="0px" VerticalPadding="0px" />
          <NodeStyle Font-Names="Tahoma" Font-Size="10pt" ForeColor="Black" HorizontalPadding="5px" NodeSpacing="0px" VerticalPadding="0px" />
           </asp:TreeView><asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" />
           </td>
           </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:43:43.683

检查您的表格是如何设置的，听起来您可能有一个放错位置的 td 标签。这就是我的猜测，因为我看不到您遇到问题的所有代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:39:09.993

为了好玩，对于您的导航列，放一个`style="vertical-align:top;"`听起来像扩展的第一个窗格大于导航（高度方面）并且由于它们在同一行中，随着第 2 列变大，第 1 列也会变大。但是当另一个窗格已打开，如果它们比第 1 列短，那么一切都会好起来的

# php - 目录路径

> ID：10590984
> 
> 赞同：1
> 
> 时间：2012-05-14T21:01:13.923
> 
> 标签：php, jquery, directory

我在将文件相互路径时遇到问题。所有目录路径格式都相同吗？因为在外部链接中 Ex:`<script type="text/javascript" src="file_js/friendList.js"></script>`不一样，`<img src="../FriendsList/image/defaultboysmall.png" />`但两种代码都有效。例如：`../folder/file.php`或`folder/file.php`。

例子：

```
$.getJSON('/data_php/getFriends.php', function(data) {

$.getJSON('../data_php/getFriends.php', function(data) {

$.getJSON('data_php/getFriends.php', function(data) { 
```

这里的行代码对我不起作用，我不知道为什么会这样。请帮忙，我不擅长目录路径。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:04:57.293

`getJSON`及其`ajax`同类基于 url，而不是文件系统。您需要使用相对于网站文档根目录的适当路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:09:09.247

它必须通过 url，没有路径。我认为更好的方法是通过 php 将路径放入 html 中。选择此路径并放入 ajax 回调后。

示例：html：

```
<p data-link='<?= link_to_fiends() ?>'>hi</p> 
```

js：

```
var link = $('p').data('link');
$.getJSON(link,function(data){}); 
```

# php - 如何替换 shell_exec 返回的空白空间？

> ID：10590987
> 
> 赞同：0
> 
> 时间：2012-05-14T21:01:26.177
> 
> 标签：php, html, linux, bash

我正在使用带有 ls 命令的 php 函数 shell_exec：

```
shell_exec('ls'); 
```

回报是：

```
index.php index.php~ ajaxF.php ajaxF.php~ ajaxL.php ajaxL.php~ ajax.php 
```

我注意到每个文件之间都有一个空格，我试图更改它但它失败了（'A' 它只是一个随机字符，实际上我想添加一些 html）：

```
preg_replace('/ /', "A", $output);
preg_replace('/<br>/', "A", $output);
preg_replace('/\n/', "A", $output); 
```

如何用任何其他字符替换这个空白空间？这样做的意思是为每一行添加html数据。

是否可以拆分数组中的每一行？

顺便说一句，我正在使用ubuntu。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T21:05:10.037

为什么不使用`glob('*')`，它将返回当前目录中的文件数组？然后您可以使用 implode() 并插入您想要的任何分隔符字符/文本。

参考： http: [//php.net/glob](http://php.net/glob) [http://php.net/implode](http://php.net/implode)

# string - 试图将复选框列表枚举值传递给我的视图

> ID：10590988
> 
> 赞同：0
> 
> 时间：2012-05-14T21:01:27.230
> 
> 标签：string, asp.net-mvc-3, checkbox

只是试图做一些快速而肮脏的测试。我通过控制器将假数据传递给视图，只是为了查看 UI 的外观。

在我设置为“测试”的控制器中，例如：

```
MyViewModel = new MyViewModel
{
  MyModel= new Models.MyModel
  {
      FirstName = "Homer", //This works
      SomeDecimal = 10000, //This works
      SomeRadioButton = Models.MyModel.Enum.Selection, //This works
      SomeCheckBox = Models.MyModel.OtherEnum.OtherSelection, //This doesn't
  }
} 
```

我收到`Cannot implicitly convert type ... to 'System.Collections.Generic.List<string>'`错误消息。

我的单选按钮和复选框共享使用枚举的类似约定，但复选框使用`public List<string> SomeCheckBox { get; set; }`而单选按钮使用`public Enum? SomeRadioButton { get; set; }`

请注意，我没有使用测试框架。我只是想快速弄清楚如何传递一些虚假数据以查看 UI 是如何形成的。谁能分享一个如何完成我想要的示例（传递一个复选框值，以便我的 UI 可以显示用户选择的数据）？

我预见到的另一个问题是从复选框中传递了多个选项，但是一旦我把代码写下来，我想我应该能够弄清楚这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:42:52.937

您的错误消息完全有道理。试试这个

```
 var testViewModel = new TestViewModel
 {
     SomeCheckBox = new List<string> {TestViewModel.RadioButtonValues.Value1.ToString() }
 }; 
```

# iphone - 如何使用按钮将项目添加到 Xcode 上的另一个视图

> ID：10590989
> 
> 赞同：0
> 
> 时间：2012-05-14T21:01:28.000
> 
> 标签：iphone, objective-c, xcode, macos, ipad

我有一个使用故事板的 iPad 基本餐厅菜单系统，我有一个带有按钮的产品视图，可以将项目添加到订单页面，我怎样才能得到它，以便当用户按下添加到订单按钮时​​它将产品名称添加到订单场景。我曾考虑在订单页面中使用表格视图，但我不知道这是否是个好主意。主要是我需要一些帮助，如何让它在按下按钮时将相应的产品名称打印到订单页面上。有任何想法吗？

谢谢，

艾斯林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:16:58.553

> 我怎样才能得到它，以便当用户按下添加到订单按钮时​​，它会将产品名称添加到订单场景中。

您正在混淆演示文稿和数据，这是一个坏主意。创建一个完全没有视图逻辑的订单表示。当按下按钮向订单添加内容时，视图控制器应该告诉管理订单的类这样做。当您需要显示订单时，视图控制器应该向类询问详细信息。有关更多信息，请阅读 Apple 大量使用的 MVC 设计模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:12:48.640

只需将产品名称添加到 an`NSMutableArray`并让 tableview 加载此数组中的项目并将其显示给用户。

**编辑：**

当用户单击按钮添加产品​​时，使用`[arrayName addObject:@"Product Name"]`. 然后，要将其加载到 tableview 中，请使用 tableview 的委托方法`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{}`将名称加载到单元格中。像这样的东西：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        static NSString *identity = @"MainCell";
        UITableViewCell *cell;
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identity] autorelease];
        cell.textLabel.text = [arrayName objectAtIndex:indexPath.row];
        return cell;
} 
```

# database - Drupal 7 - 查询中的多个联接给我带来了麻烦

> ID：10590995
> 
> 赞同：2
> 
> 时间：2012-05-14T21:01:41.537
> 
> 标签：database, forms, drupal, join

当向 Drupal 站点的用户注册页面添加新字段时，新字段不会存储在“用户”表中，而是存储在它们自己的单独表中。我设置了一个自定义表单模块页面，用户可以在其中根据年龄、性别、如果他们是学生以及他们是否选择在绰号 Live 下接收消息来选择哪些人接收他们的消息。我以前从未在 mySQL 查询中使用过“join”，所以我不确定 Drupal 数据库 API 的适当语法是什么。这是我目前拥有的：

```
$query = db_select("field_data_field_age", "a");
$query->join("field_data_field_gender", "g", "a.entity_id = g.entity_id");
$query->join("field_data_field_phone_number", "p", "a.entity_id = p.entity_id AND g.entity_id = p.entity_id");
$query->join("field_data_field_student", "s", "a.entity_id = s.entity_id AND g.entity_id = s.entity_id AND p.entity_id = s.entity_id");
$query->join("field_data_field_live", "l", "a.entity_id = l.entity_id AND g.entity_id = l.entity_id AND p.entity_id = l.entity_id AND s.entity_id = l.entity_id");
$query->groupBy("p.entity_id");
$query->fields("p", array("field_phone_number_value"))
    ->condition("a.field_age_value", $values["age_lower"], >=)
    ->condition("a.field_age_value", $values["age_upper"], <=)
    ->condition("l.field_live_value", "Yes", =)
    ->condition("g.field_gender_value", values["gender"], =);

$phone_numbers = $query->execute(); 
```

这段代码破坏了我的网站，我不确定我做错了什么。同样，我尝试在“multiple joins mysql”下搜索 Google，但没有找到专门处理 Drupal 数据库 API 的任何内容。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T21:49:19.460

倒数第三行在“values”变量上缺少 $。

此外，运算符 >=、<= 和 = 必须是字符串（用引号括起来）。

# c - 如何修复 C 中未解决的外部错误

> ID：10590996
> 
> 赞同：-1
> 
> 时间：2012-05-14T21:01:45.890
> 
> 标签：c, struct

当我在 C 中编译我的代码时，我收到以下错误“错误 LNK2001：未解析的外部符号_staff”以及有关未解析的外部的错误。听起来它认为我的人员数组需要一个外部文件，但它只是一个用于保存 Persons 的数组（两种类型的联合）。我该如何解决这个问题？我的代码的开头如下。

```
 #include <stdio.h>
        #include <string.h>
    //employee struct

        typedef struct {    
        //...
        } Employee;

    //Manager struct inheriting from employee struct

        typedef struct {
        Employee employee;   
        int bonus;
        } Manager;  

    //union of manager and employee

        typedef union{
           Employee e;
           Manager m;
          } Person;
    //functions

        Employee newEmployee(char n[], ...);    
        Manager newManager(...);
        double getManagerSalary(Manager man);    
        Manager boss; 
        Employee harry ;
        Employee tommy;
        Person staff[];

//main code

    int main(void)
    {

      boss = newManager(...);
      harry = newEmployee(...);       
      tommy = newEmployee(...);

      staff[3]; 
      staff[0].m = boss;
      staff[1].e = harry;
      staff[2].e = tommy;

     ...    
    }   

    Employee newEmployee(char n[], double s, int year, int month, int day)
    {
    ...
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:14:47.487

必须在 C 中声明数组才能具有大小，例如：`Person a[1]`这意味着`a is an array of 1 Person`. 您不能以您所做的方式声明它。

如果您想估计运行时的人数，请尝试指针。然后考虑总人数并继续分配内存但我认为你`Person *a`不想这样做。

另请参阅`extern`@ShinTakezou 的消息。尽管与您的实施完全无关，但这是一个重要且有效的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:02:09.820

```
 // you are not reserving room for anything;
        // gcc would give an error; your compiler silently consider this
        // staff as a pointer to something (an array) which has its actual
        // memory defined elsewhere; so, when you link, it raises that 
        // linking error
        Person staff[];

        // could be
        Person staff[N];
        // where N is a positive number, or a true define or const value

//main code

    int main(void)
    {

      boss = newManager(...);
      harry = newEmployee(...);       
      tommy = newEmployee(...);

      // the following line is an expresion which does nothing:
      // it accesses the fourth element of a "supposed" array,
      // and the value retrieved in this way is lost
      // if you meant to "allocate" three staff, you are doing it wrong; 
      staff[3]; 

      // following the possible previous path of having the 
      // room for staff not dynamically created, you don't need the
      // previous line, which is simply a no-op (if 3 is less than N-1, 
      // otherwise it's a potentially illegal access to memory you shouldn't access)

      staff[0].m = boss;
      staff[1].e = harry;
      staff[2].e = tommy;

     ...    
    } 
```

（我还补充说，代码看起来并不完全“理智”——不用说也许*——对我来说*，但这可能是另一个问题的问题，与这个特定问题无关）

# github - 如何获取用户的所有公共 github 提交

> ID：10590998
> 
> 赞同：32
> 
> 时间：2012-05-14T21:01:52.177
> 
> 标签：github, github-api

无论项目如何，我都想知道是否有一种简单的方法可以为单个用户名获取所有公共存储库的所有提交。

由于我属于多个组织，因此我正在尝试编译我作为贡献者的项目列表，以及我已接受拉取请求的项目。

到目前为止，我的 google-fu 和查看 github api 文档已被证明是不够的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-20T00:53:10.933

[http://zmoazeni.github.com/gitspective/](http://zmoazeni.github.com/gitspective/)是你的朋友。:-) 过滤掉除“Push”之外的所有内容，你就有了自己的看法，尽管没有编码工作来首先自己实现它。

如果您想自己重做工作，检查 Chrome Devtools 的“网络”选项卡可能会帮助您模仿 API 查询。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-07-08T19:56:39.690

正确的方法是通过[事件 API](https://developer.github.com/v3/activity/events/)。

首先，您需要[获取用户的事件](https://developer.github.com/v3/activity/events/#list-events-performed-by-a-user)：

```
GET /users/:username/events 
```

然后，您将要过滤[设置为的项目](https://developer.github.com/v3/activity/events/types/#pushevent)[的`type``PushEvent`](https://developer.github.com/v3/activity/events/types/#pushevent)响应数组。这些项目中的每一个都对应于`git push`用户。`payload.commits`来自该推送的提交在数组中按时间倒序提供。

下一步是通过检查`author.email`每个提交对象的属性来过滤掉其他用户的提交。您还可以访问同一对象上的 , 和 等属性`sha`，`message`并且可以使用该属性`url`消除多个推送中的重复提交。`distinct`

**编辑：正如**[亚当泰勒](https://stackoverflow.com/users/237244/adam-taylor)在评论中指出的那样，这种方法是错误的。我未能进行 RTFM，抱歉。该 API 最多允许您获取 300 个事件，并且事件也仅限于过去 90 天。为了完整起见，我将在此处留下答案，但对于获取*所有*提交的所述问题，它不起作用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-12T08:47:49.520

**更新 2018-11-12**

下面提到的 URL 现在已移动到一个类似于[https://github.com/AurelienLourot?from=2018-10-09](https://github.com/AurelienLourot?from=2018-10-09)的 URL，但想法保持不变。请参阅[github-contribs](https://github.com/AurelienLourot/github-contribs)。

* * *

> 我想知道是否有一种简单的方法可以为单个用户名获取所有公共存储库的所有提交。

第一个挑战是列出用户曾经贡献过的**所有repos。**正如其他人指出的那样，官方API**从一开始就**不允许您获取此信息。

您仍然可以通过查询非官方页面并循环解析它们来获取该信息：

*   [https://github.com/users/AurelienLourot/created_commits?from=2018-05-17&to=2018-05-17](https://github.com/users/AurelienLourot/created_commits?from=2018-05-17&to=2018-05-17)
*   [https://github.com/users/AurelienLourot/created_repositories?from=2018-05-17&to=2018-05-17](https://github.com/users/AurelienLourot/created_repositories?from=2018-05-17&to=2018-05-17)
*   [https://github.com/users/AurelienLourot/created_pull_requests?from=2018-05-17&to=2018-05-17](https://github.com/users/AurelienLourot/created_pull_requests?from=2018-05-17&to=2018-05-17)
*   [https://github.com/users/AurelienLourot/created_pull_request_reviews?from=2018-05-17&to=2018-05-17](https://github.com/users/AurelienLourot/created_pull_request_reviews?from=2018-05-17&to=2018-05-17)

*（免责声明：我是维护者。）*

这正是[github-contribs](https://github.com/AurelienLourot/github-contribs)为您所做的：

```
$ sudo npm install -g @ghuser/github-contribs
$ github-contribs AurelienLourot
✔ Fetched first day at GitHub: 2015-04-04.
⚠ Be patient. The whole process might take up to an hour... Consider using --since and/or --until
✔ Fetched all commits and PRs.
35 repo(s) found:
AurelienLourot/lsankidb
reframejs/reframe
dracula/gitk
... 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-21T08:31:07.837

GitGub [GraphQL API v4](https://developer.github.com/v4/) [ContributionsCollection](https://developer.github.com/v4/object/contributionscollection/)对象提供在两个日期之间按存储库分组的贡献，最多 100 个存储库。`from`并且`to`最多可以相隔一年，因此要检索所有贡献，您需要提出多个请求。

```
query ContributionsView($username: String!, $from: DateTime!, $to: DateTime!) {
  user(login: $username) {
    contributionsCollection(from: $from, to: $to) {
      commitContributionsByRepository(maxRepositories: 100) {
        repository {
          nameWithOwner
        }
        contributions {
          totalCount
        }
      }
      pullRequestContributionsByRepository(maxRepositories: 100) {
        repository {
          nameWithOwner
        }
        contributions {
          totalCount
        }
      }
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-07T10:51:46.160

我知道这个问题已经很老了，但我最终编写了自己的解决方案。

最后，解决方案是找到用户使用`organization_repositories`和`list_repositories`服务贡献的所有潜在存储库（我正在使用 octokit）。

然后我们`branches`在这些存储库上找到所有活动的分支（服务），并为每个分支找到来自我们用户（服务`commits`）的提交。

示例代码有点广泛，但可以在[这里找到](https://github.com/nuk/codemood/blob/master/lib/github_collector.rb)

```
OBS: As pointed out, this solution does not consider organizations and repositories where you contributed but are not part of. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-25T18:00:19.000

您可以使用 API 方法获取有关用户的信息：[get-a-single-user](https://developer.github.com/v3/users/#get-a-single-user)

之后，您可以找到所有用户存储库，然后使用如下功能提交：

```
def get_github_email(user_login, user_name, key):
    '''
    :param str user_login: user login for GitHub
    :param str key: your client_id + client_secret from GitHub, 
                string like '&client_id=your_id&client_secret=yoursecret'
    :param str user_name: user GitHub name (could be not equeal to user_login)
    :return: email (str or None) or False
    '''
    url = "https://api.github.com/users/{}/repos?{}".format(user_login, key)
    #get repositories
    reps_req = requests.get(url)

    for i in reps_req.json():
        if "fork" in i:
            # take only repositories created by user not forks
            if i["fork"] == False:
                commits_url = "https://api.github.com/repos/{}/{}/commits?{}".format(user_login, i["name"], key)
                #get commits
                commits_req = requests.get(commits_url)

                for j in commits_req.json():
                    #check if author is user (there may be commits from someone else)
                    if j.get("commit", {}).get("author", {}).get("name") == user_name:
                        return j["commit"]["author"]["email"]
    return False 
```