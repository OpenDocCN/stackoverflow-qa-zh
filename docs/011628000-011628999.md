# StackOverflow 问答 11628000-11628999

# php - php从linux上的串口读取数据

> ID：11628002
> 
> 赞同：1
> 
> 时间：2012-07-24T09:32:47.450
> 
> 标签：php, linux, serial-port

我尝试使用 PHP 在 Linux 平台上读取串口。
但我无法读取任何数据。当我尝试使用 .net 阅读时，这次我可以阅读。

我使用“php_serial.class.php”类进行串口操作。你可以从这个链接阅读这个课程：
[这里](http://www.phpclasses.org/browse/file/17926.html)

我的代码是这样的：

```
<?php  
 include "php_serial.class.php";  

// Let's start the class
$serial = new phpSerial;

// First we must specify the device. This works on both linux and windows (if
// your linux serial device is /dev/ttyS0 for COM1, etc)
$serial->deviceSet("/dev/ttyS1");

// We can change the baud rate, parity, length, stop bits, flow control
$serial->confBaudRate(19200);
$serial->confParity("none");
$serial->confCharacterLength(8);
$serial->confStopBits(1);
$serial->confFlowControl("none");

// Then we need to open it
$serial->deviceOpen();  

// read from serial port
$read = $serial->readPort();

//Determine if a variable is set and is not NULL
if(isset($read)){
   while(1){
       $read = $serial->readPort();
       print_r(" (size ".strlen($read). " ) ");
       for($i = 0; $i < strlen($read); $i++)
       {
          echo ord($read[$i])." ";
       }
       print_r("\n");
       sleep(1);
  }// end while
}// end if  

// If you want to change the configuration, the device must be closed
$serial->deviceClose();

// We can change the baud rate
$serial->confBaudRate(19200);  
?> 
```

行 "print_r(" (size ".strlen($read). " ) ");" 总是返回零。我无法从串口读取数据的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:46:44.220

我相信你现在已经解决了这个问题，但这是我的 2c 价值。

你读了两次串口。一次检查是否有数据，然后在有数据时再次检查。根据我的经验，读取一次会清除缓冲区，因此再次读取会产生空结果。

只是不要读第二遍

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T21:43:54.777

有同样的问题。`-isig -icanon`一旦设置脚本读取没有问题，我需要使用 stty 设置两个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T15:44:03.137

您好，这真的很旧，但我目前（仍在）正在处理这个问题，我正确地恢复了字节（删除 ord() 以读取为字符串 btw）。

它通过为零的原因是由于无限循环，即使您发送任何内容也不会返回任何内容（看起来如此）尽管使用您的代码我设法将内容作为字符串返回。

实际上，我将设备端的数据输入到控制台中……然后将我输入到设备中的内容返回给我，看来您需要分叉该过程才能以 100% 的方式完成。它有时起作用的原因是，如果你输入一个返回几行的命令，它很可能会得到其中的一些。

使用屏幕连接到设备，然后只需键入随机内容并按回车...您将看到它出现在您的 php 输出中。

# xpages-extlib - xpages动态视图中错误/疯狂的数字显示

> ID：11628003
> 
> 赞同：0
> 
> 时间：2012-07-24T09:32:50.233
> 
> 标签：xpages-extlib

在 xPage 的动态视图面板中显示带有数字列的视图时，我有一个疯狂的效果：一些（不是全部！）条目显示如下：123.40000000000005

注释文档中的值为 123.4 。

我找不到错误显示的值与正确显示的其他值之间的任何区别。我在注释视图的列属性中尝试了一些数字格式设置：没有改善。

笔记视图显示一切都很好（对于笔记客户端）。

它是一个错误吗？还是忘记了 dyn 视图控件的一些格式设置？

提前致谢， 乌韦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:37:29.717

它不是错误，更像是副作用。

好吧，因为它是双精度的，所以有办法将浮点数放入内存中，有时它的行为“有点奇怪”，但这只是一个副作用。所以数字有时会出现小误差。

阅读：[http](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) ://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html 它解释了浮点是如何工作的。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-17T18:14:02.953

```
tmp:=yourfield;
@Round(tmp*100)/100 
```

# jquery - 拆分 String[] 以制作不同的 JSON

> ID：11628007
> 
> 赞同：1
> 
> 时间：2012-07-24T09:33:06.850
> 
> 标签：jquery, json

我想知道如何使用 jquery 拆分它...

```
 "{"answer":["q1001-a2","q1002-a2","q1003-a2","q1004-a2","q1005-a2","q1006-a2"]}" 
```

所以我可以制作以下 JSON ......

```
 {
  "d": [
       {
          "question": 1001,
          "answer": "a2"
       },
       {
          "question": 1002,
          "answer": "a2"
       }
       ]
 } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:37:05.630

循环`answer`，将元素拆分`-`，创建新元素，然后将其推送到`d`.

```
var ret = {d: []};
// if you have json string, then you could jQuery.parseJSON to parse it
var obj = {"answer":["q1001-a2","q1002-a2","q1003-a2","q1004-a2","q1005-a2","q1006-a2"]};
var answers = obj.answer, tmp, i;
for (i = 0; i < answers.length; i++) {
  tmp = answers[i].split('-');
  ret.d.push({"question": tmp[0], "answer": tmp[1]});
} 
```

***[现场演示](http://jsfiddle.net/JC8cb/)***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:35:30.240

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

猜猜这应该会有所帮助。

```
"{"answer":["q1001-a2","q1002-a2","q1003-a2","q1004-a2","q1005-a2","q1006-a2"]}" 
```

应该看起来像

```
'{"answer":["q1001-a2","q1002-a2","q1003-a2","q1004-a2","q1005-a2","q1006-a2"]}' 
```

您可以尝试将 'q1001' 和 '-' 替换为带有匹配 JSON 标准的字符串的正则表达式，但这不是通用解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:48:21.017

在 jquery 中使用格式化函数，如下所示：

```
var string = "{\"key\":\"val}{ue\"}{'key':'val}{ue'}{ \"asdf\" : 500 }";
var result = string.match(/('.*?')|(".*?")|(\d+)|({)|(:)|(})/g);
var newstring = "";
for (var i in result) {
   var next = parseInt(i) + 1;
   if (next <= result.length) {
      if (result[i] == "}" && result[next] == "{") {
         newstring += "},";
       }
      else {
        newstring += result[i];
   }
 } 
```

这段代码在[jQuery - $.each loop through json code](https://stackoverflow.com/questions/337766/jquery-each-loop-through-json-code) page中有详细解释

# javascript - 当 path=/ 时如何创建唯一的 cookie？

> ID：11628014
> 
> 赞同：0
> 
> 时间：2012-07-24T09:33:26.873
> 
> 标签：javascript, cookies

我的网站托管服务（我坚持使用）坚持主页是 Abc.com/ ，其他页面是 Abc.com/here 和 Abc.com/there 和 Abc.com/somethingelse 。在所有页面通用的代码中，我有一个 JavaScript 脚本，它使用具有适当 max-age/expires 的浏览器 cookie（例如 myDailyValue=17）。我希望使用 path= 为每个页面提供其唯一的 cookie 实例，但主页的路径必须是“/”，这样的路径将被其他页面看到。如果没有现存的cookie，其他页面将创建自己的路径，例如。'/there'，只要它存在，它将优先于 '/' 路径，但是当用户在一周后返回并从主页开始时，将创建 '/' 路径 cookie 并且所有其他页面将遵循它，并且看不到缺少 cookie，

至少，这是我认为正在发生并且必须发生的事情。

我做对了吗？是否有众所周知的解决方法，或者我必须调整代码以在主页上使用不同的 cookie 名称？

谢谢你读到这里。请注意，我的脚本选项是有限的。浏览器中的 JavaScript 是唯一实用的选择。

# c# - C# - 如何自定义 OpenFileDialog 以选择多个文件夹和文件？

> ID：11628021
> 
> 赞同：14
> 
> 时间：2012-07-24T09:33:45.413
> 
> 标签：c#, openfiledialog

我已发布 -[如何使用 OpenFileDialog 选择文件夹？](https://stackoverflow.com/questions/11624298/how-to-use-open-file-dialog-to-select-a-folder-or-how-to-reuse-rc-file-from)，我找不到正确的答案。所以，我改变了我的问题。

我想自定义 OpenFileDialog 以选择多个文件夹和文件。我试图找到一个解决方案，并且可以看到一些关于它的帖子。

从互联网上，我找到了以下项目 - [https://github.com/scottwis/OpenFileOrFolderDialog](https://github.com/scottwis/OpenFileOrFolderDialog)。

但是，在使用它时，我遇到了一个问题。它使用 MFC 中的**GetOpenFileName**函数和**OPENFILENAME**结构。并且**OPENFILENAME**有一个名为“ **templateID** ”的成员。它是对话框模板的标识符。示例项目具有“ **res1.rc** ”文件，并且其中还包含模板化对话框。

但我不知道**如何将此文件附加到我的 C# 项目中？**

**或者关于“如何自定义OpenFileDialog以选择多个文件夹和文件？** ”还有其他完美的解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T09:37:56.377

如果您使用 FileNames 属性而不是 FileName 属性，您将获得每个选定文件的字符串数组，您可以使用 shift 键选择多个文件。像这样：

```
private void button1_Click(object sender, EventArgs e)
{
    OpenFileDialog x = new OpenFileDialog();
    x.Multiselect = true;
    x.ShowDialog();
    string[] result = x.FileNames;

    foreach (string y in result)
       MessageBox.Show(y, "Selected Item", MessageBoxButtons.OK, MessageBoxIcon.Information);
} 
```

对于您需要使用[WinAPI](http://archive.msdn.microsoft.com/WindowsAPICodePack/Release/ProjectReleases.aspx?ReleaseId=4906)`CommonOpenFileDialog`附带的文件和文件夹，特定的类在[这里](https://log2console.svn.codeplex.com/svn/src/External/WindowsAPICodePack/Shell/CommonFileDialogs/CommonOpenFileDialog.cs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:38:21.543

试试这个：

```
openFileDialog.Multiselect = true; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:57:09.863

您可能无法获得这样的内置 .Net 控件。绝对 OpenFileDialog 不能同时用作文件浏览器和文件夹浏览器。对于第三方工具，您有两种选择，例如您找到的第二个让您自己控制的工具。令人惊讶的是，您可能不会发现创建自己的控件的非常简单的版本非常困难。

# c# - 我可以访问 .Aggregate 中的计数器变量吗？

> ID：11628023
> 
> 赞同：0
> 
> 时间：2012-07-24T09:33:59.953
> 
> 标签：c#, string, list, aggregate

我正在使用`.Aggregate`a`List<String>`来连接每个项目。我需要找出迭代何时到达最后一项。我正在考虑测试，但如果值相同`listOfStrings.Last() == currentString`，列表中的最后一项*可以等于任何其他项。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:38:03.397

为什么你需要知道这个？

我只是在猜测，但听起来您正在做类似于生成诸如“x，y，z”之类的字符串的事情，并且您不希望在最后一项之后使用逗号。

如果是这种情况，您可以[`string.Join(separator, items)`](http://msdn.microsoft.com/en-us/library/dd992421)改用。除非你想要符合“x, y & z”形式的东西？

如果你真的需要使用`Aggregate`，你可以关闭一个外部变量，比如：

```
int count = 0;

var aggregated = items.Aggregate(new StringBuilder(), (acc, item) =>
{
    if (++count == items.Count)
    {
        // it's the last item
        acc.Append("last");
    }
    else
    {
        acc.Append("not last, ");
    }
    return acc;
}).ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:46:39.247

使用这个（只有一行代码）：

```
int i = 0;
string strResult = listOfStrings.Where(s => ++i != listOfStrings.Count)
                                .Aggregate("", (current, s) => current + s); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:50:26.857

像这样的东西？

```
var count=listOfStrings.Count();

var result=listOfStrings.Aggregate(
   new { i=0, v=String.Empty},
   (x,y) => new { i=x.i+1, v=(x.i+1 == count) ? x.v + "&" + y : x.v+","+y},
   x=>x.v
   ); 
```

# php - python的mysql_fetch_array或mysql_fetch_object？

> ID：11628025
> 
> 赞同：-3
> 
> 时间：2012-07-24T09:34:07.597
> 
> 标签：php, python, mysql

我在 python 中使用 MySQLdb 连接到 mysql 数据库（duh），我真的缺少 PHP 内置的功能，即：

`mysql_fetch_array`和`mysql_fetch_object`

Python 中的等价物是什么，以便我可以开始移植我的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:34:28.077

我正在寻找的是`DictCursor`：

```
cur = con.cursor(MySQLdb.cursors.DictCursor) 
```

# oracle - 不使用索引访问时的基于函数的索引

> ID：11628027
> 
> 赞同：3
> 
> 时间：2012-07-24T09:34:23.227
> 
> 标签：oracle, indexing, user-defined-functions

我第一次将基于函数的索引与用户定义的函数一起使用，并且在无法使用索引时偶然发现了性能问题。

在内部，基于函数的索引似乎会生成一个隐藏的表列（类型为 varchar2(4000)，因为我的函数返回一个 varchar2），并为其编制索引。使用索引时效果很好，但有时我们必须使用该函数作为过滤器进行全表扫描，在这种情况下，我看到性能下降了 6 倍。似乎在这种情况下，Oracle 不使用隐藏列，但为每一行重新计算函数，使查询受 CPU 限制而不是 IO 限制。

有没有办法让 Oracle 也使用该隐藏列进行过滤？我想知道我是否遗漏了一些重写选项或类似的东西。

如果没有，我将不得不自己定义该列并使用触发器使其保持最新。我更喜欢使用基于函数的索引来提高透明度和更容易维护。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:55:36.703

您使用的是哪个版本的 Oracle？如果是 11g，你应该尝试[使用 virtual column](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#BABIJABG)。这是一列，其值是从表达式或文字派生的。它们被定义为表的一部分，因此它们在表 DESC 中具有可见性（与基于函数的索引不同）。我们可以在虚拟列上建立索引。它们是自动维护的，不需要触发器。

因此，您可以使用与基于函数的索引相同的表达式向表中添加虚拟列。或许是这样的：

```
create table t23
   (id number
    , col_a varchar2(10)
    , vcol_a as (upper(substr(col_a, 1, 1)))
  )
/ 
```

请注意，我们不能插入或更新虚拟列。所以需要指定插入语句的投影：

```
insert into t23 (id, col_a) values (1, 'this is a test'); 
```

然后你可以在虚拟列上建立一个常规索引：

```
create index t23_vc_i on t23(vcol_a)
/ 
```

不要忘记删除基于函数的索引！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:53:01.113

在表扫描中无法使用基于函数的索引。

我在我的问题中所做的假设，即*“在内部，基于函数的索引似乎生成了一个隐藏的表列......”，*这是完全错误的：函数的结果*不*存储在表列中，而只存储在指数。

因此，除非在执行扫描时有办法访问索引（我能想到的唯一方法是它是否是从键列开始的组合索引），否则无法使用预先计算的函数结果。

11g 的“虚拟列”特性也无济于事，因为列不存储在表中，而是动态计算，类似于在视图中使用函数。

总之：如果您不能排除表扫描，并且您的函数调用很昂贵（慢），请结合“插入或更新之前”触发器使用真实列。基于函数的索引是行不通的。

（注意：添加此答案是因为我不想让这个问题悬而未决。答案的功劳属于[thilo](https://stackoverflow.com/users/14955/thilo)，他指出该列从未实现）。

# ruby - Thin::Server#daemonize 立即退出

> ID：11628028
> 
> 赞同：6
> 
> 时间：2012-07-24T09:34:24.833
> 
> 标签：ruby, sinatra, thin

我试图制作一个可执行文件，它通过 Thin 作为守护程序启动 Sinatra 应用程序。我正在使用此代码通过 Sinatra 应用程序调用 Thin：

```
#!/usr/bin/env ruby

require 'thin'
require 'app.rb'

server = ::Thin::Server.new('127.0.0.1', 9999, App)
server.log_file = 'tmp/thin.log'
server.pid_file = 'tmp/thin.pid'
server.daemonize 
```

这是我执行脚本时得到的日志输出：

```
>> Writing PID to tmp/thin.pid
>> Exiting! 
```

当我这样做时服务器启动正常

```
server.start 
```

有什么建议我如何追踪它为什么立即退出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T19:07:39.110

使用`daemonize`仅使脚本成为守护进程，它实际上并没有启动服务器。之后您仍然需要致电`start`：

```
server.daemonize
server.start 
```

日志文件：

```
>> Writing PID to tmp/thin.pid
>> Thin web server (v1.4.1 codename Chromeo)
>> Maximum connections set to 1024
>> Listening on 127.0.0.1:9999, CTRL+C to stop 
```

# android - 使用 NoClassDefFoundError 构造 Gson 对象时的运行时崩溃

> ID：11628033
> 
> 赞同：2
> 
> 时间：2012-07-24T09:34:49.857
> 
> 标签：android, json, gson

我正在开发一个 android 应用程序，在该应用程序中，我尝试使用 Gson 库进行 Json 序列化和反序列化。我从以下链接下载了库：-

[http://code.google.com/p/google-gson/downloads/list](http://code.google.com/p/google-gson/downloads/list)

我在 Java Build Path 中包含了 gson-2.2.2.jar，但是在构建 Gson 对象时应用程序在运行时崩溃：-

```
Gson gson = new Gson(); 
```

在 logcat 我得到

```
07-24 14:53:21.648: E/dalvikvm(488): Could not find class 'com.google.gson.Gson', referenced from method com.google.gson.examples.android.GsonProguardExampleActivity.onCreate
07-24 14:53:21.648: W/dalvikvm(488): VFY: unable to resolve new-instance 10 (Lcom/google/gson/Gson;) in Lcom/google/gson/examples/android/GsonProguardExampleActivity;
07-24 14:53:21.668: D/dalvikvm(488): VFY: replacing opcode 0x22 at 0x0010
07-24 14:53:21.668: D/dalvikvm(488): VFY: dead code 0x0012-007a in Lcom/google/gson/examples/android/GsonProguardExampleActivity;.onCreate (Landroid/os/Bundle;)V
07-24 14:53:21.788: D/AndroidRuntime(488): Shutting down VM
07-24 14:53:21.788: W/dalvikvm(488): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-24 14:53:21.814: E/AndroidRuntime(488): FATAL EXCEPTION: main
07-24 14:53:21.814: E/AndroidRuntime(488): java.lang.NoClassDefFoundError: com.google.gson.Gson
07-24 14:53:21.814: E/AndroidRuntime(488):  at com.google.gson.examples.android.GsonProguardExampleActivity.onCreate(GsonProguardExampleActivity.java:40)
07-24 14:53:21.814: E/AndroidRuntime(488):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-24 14:53:21.814: E/AndroidRuntime(488):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-24 14:53:21.814: E/AndroidRuntime(488):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-24 14:53:21.814: E/AndroidRuntime(488):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-24 14:53:21.814: E/AndroidRuntime(488):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-24 14:53:21.814: E/AndroidRuntime(488):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-24 14:53:21.814: E/AndroidRuntime(488):  at android.os.Looper.loop(Looper.java:123)
07-24 14:53:21.814: E/AndroidRuntime(488):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-24 14:53:21.814: E/AndroidRuntime(488):  at java.lang.reflect.Method.invokeNative(Native Method)
07-24 14:53:21.814: E/AndroidRuntime(488):  at java.lang.reflect.Method.invoke(Method.java:521)
07-24 14:53:21.814: E/AndroidRuntime(488):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-24 14:53:21.814: E/AndroidRuntime(488):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-24 14:53:21.814: E/AndroidRuntime(488):  at dalvik.system.NativeStart.main(Native Method) 
```

错误是：-

**07-24 14:53:21.814: E/AndroidRuntime(488): java.lang.NoClassDefFoundError: com.google.gson.Gson**

此外，如果我在我的项目中包含 Gson 库的完整源代码作为另一个包，它一切正常。

我在做什么错，这是正确的罐子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T09:36:39.623

似乎您已将 jar 文件保存在文件`lib`夹中，而应将名称更改为`libs`. 这是更新的 ADT 更新版本（从第 17 版开始）。

# iphone - NSXMLParser 和 NSOperation 无法正常工作

> ID：11628035
> 
> 赞同：0
> 
> 时间：2012-07-24T09:35:02.600
> 
> 标签：iphone, objective-c, nsxmlparser, nsoperation

要向服务器发送请求以下载数据，我正在使用 NSOperation。接收数据后，我正在使用 NSXMLParser 解析响应，但它没有调用解析器委托方法，例如

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
```

或者

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
```

谁能告诉我哪里做错了。

```
//Creating NSOperation as follows:
NSOperationQueue *operationQueue = [NSOperationQueue new];
NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(createRequestToGetData) object:nil]; 
[operationQueue addOperation:operation];
[operation release];    

-(void)createRequestToGetData
{
    NSError *error;
    NSURL *theURL = [NSURL URLWithString:myUrl];
    NSData *data = [NSData dataWithContentsOfURL:theURL];

    MyXMLParser *theXMLParser = [[MyXMLParser alloc]init];
    NSError *theError = NULL;
    [theXMLParser parseXMLFileWithData:data parseError:&theError];
    NSLog(@"Parse data:%@",theXMLParser.mParsedDict); //Cursor is not coming here.
    [theXMLParser release];
} 
```

注意：MyXMLParser 是实现 Parser 委托方法的 NSObject 的子类，但我的光标没有到达 NSLog。当在 Parser 委托方法中放置调试点时，发现这些方法没有被调用。

谁能告诉我问题出在哪里以及我如何解决这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:45:49.320

I solved above problem by creating subclass of NSOperation and performed parsing in main method of subclass of NSOperation as follows:

```
//DataDownloadOperation.h
#import <Foundation/Foundation.h>

@interface DataDownloadOperation : NSOperation
{
    NSURL *targetURL;
}
@property(retain) NSURL *targetURL;
- (id)initWithURL:(NSURL*)url;

@end

//DataDownloadOperation.m
#import "DataDownloadOperation.h"
#import "MyXMLParser.h"

@implementation DataDownloadOperation
@synthesize targetURL;

- (id)initWithURL:(NSURL*)url
{
    if (![super init]) return nil;
    self.targetURL = url;
    return self;
}

- (void)dealloc {
    [targetURL release], targetURL = nil;
    [super dealloc];
}

- (void)main {

    NSData *data = [NSData dataWithContentsOfURL:self.targetURL];
    MyXMLParser *theXMLParser = [[MyXMLParser alloc]init];
    NSError *theError = NULL;
    [theXMLParser parseXMLFileWithData:data parseError:&theError];
    NSLog(@"Parse data1111:%@",theXMLParser.mParsedDict);
    [theXMLParser release];
}
@end
//Created NSOperation as follows:
NSURL *theURL = [NSURL URLWithString:myurl];
        NSOperationQueue *operationQueue = [NSOperationQueue new];
        DataDownloadOperation *operation = [[DataDownloadOperation alloc] initWithURL:theURL];
         [operationQueue addOperation:operation];
         [operation release]; 
```

# spring - 从第二个应用程序访问 spring 安全性

> ID：11628037
> 
> 赞同：0
> 
> 时间：2012-07-24T09:35:12.837
> 
> 标签：spring, security

我有两个应用程序，每个应用程序都位于它自己的服务器上。他们都使用带有标准设置的 Spring 安全性。我需要通过第二个应用程序访问第一个应用程序的问题。登录第二个应用程序时，我需要发送密码并登录到第一个应用程序。有人可以帮忙提供样品或提示吗？谢谢你。我在两个应用程序中的 spring-security.xml ：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security 
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http pattern="/favicon.ico" security="none" />

<http auto-config="true">
    <intercept-url pattern="/**" access="ROLE_ADMIN"/>
</http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="hey" password="there" authorities="ROLE_ADMIN" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:49:19.000

您应该为此使用 CAS，而不是尝试跨应用程序访问或传递用户/传递。

请参考此[链接](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/cas.html)以了解如何在这种情况下使用 CAS。

# java - 文件存在于 Java 中吗？

> ID：11628038
> 
> 赞同：0
> 
> 时间：2012-07-24T09:35:20.700
> 
> 标签：java, file

我试图检查给定目录位置是否存在文件。

```
File seacrhFile = new File("D:/input", contract.conf);
if (seacrhFile.exists()) {
  returnFile = seacrhFile;
} else {
  System.out.println("No such file exists");
}
reutrn returnFile; 
```

这适用于`D:/input`目录方案，但如果我将目录位置更改为`src/test/resources/input`文件夹`No such file exists`，那么即使文件存在，我也会得到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:54:21.907

如果你想访问
src/test/resources/input
你可能应该使用

```
System.getProperty("user.dir") + File.separator + "src/test/resources/input" 
```

因为系统属性“user.dir”指向项目位置。

如果您只使用“src/test/resources/input”，您将得到您提到的异常，因为文件对象不会在项目位置“启动”。所以你必须手动指定它。

尽管如此，最好使用 getResource-Method 来检索项目中的不同资源，因为如果您使用 jar-File 运行项目，则需要调整以使“user.dir”正常工作。

只是 Classloader 的一个基本示例：

```
ClassLoader.getSystemClassLoader().getResource("test/resources/input"); 
```

这将返回一个 URL-Object，使用此对象，您可以使用 ...

```
URL filePath =  ClassLoader.getSystemClassLoader().getResource("test/resources/input");
File file = new File( filePath.toURI() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:55:50.653

删除 src 并重试。

# c++ - regex_match 和 regex_search 之间的区别？

> ID：11628047
> 
> 赞同：30
> 
> 时间：2012-07-24T09:35:44.350
> 
> 标签：c++, regex, gcc, g++

我正在尝试使用正则表达式来尝试回答[这个问题](https://stackoverflow.com/questions/11627440/regex-c-extract-substring)，并发现虽然`regex_match`找到了匹配项，`regex_search`但没有。

以下程序使用 g++ 4.7.1 编译：

```
#include <regex>
#include <iostream>

int main()
{
    const std::string s = "/home/toto/FILE_mysymbol_EVENT.DAT";
    std::regex rgx(".*FILE_(.+)_EVENT\\.DAT.*");
    std::smatch match;

    if (std::regex_match(s.begin(), s.end(), rgx))
        std::cout << "regex_match: match\n";
    else
        std::cout << "regex_match: no match\n";

    if (std::regex_search(s.begin(), s.end(), match, rgx))
        std::cout << "regex_search: match\n";
    else
        std::cout << "regex_search: no match\n";
} 
```

输出：

```
正则表达式匹配：匹配
regex_search: 不匹配

```

我的假设是两者都应该匹配错误，还是 GCC 4.7.1 中的库可能存在问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T10:58:53.517

您的正则表达式在 VS 2012rc 中**工作正常（两者都匹配，这是正确的）。**

在 g++ 4.7.1`(-std=gnu++11)`中，如果使用：

*   `".*FILE_(.+)_EVENT\\.DAT.*"`,`regex_match`匹配，但`regex_search`不匹配。
*   `".*?FILE_(.+?)_EVENT\\.DAT.*"`,`regex_match`也不`regex_search`匹配 (O_o)。

[所有变体都应该匹配，但有些不匹配（由于betabandido](https://stackoverflow.com/a/11628522/170194)已经指出的原因）。在 g++ 4.6.3`(-std=gnu++0x)`中，行为与 g++ 4.7.1 相同。

Boost (1.50)可以**正确匹配所有**模式类型。

**摘要**：

```
                        正则表达式匹配正则表达式搜索
 -------------------------------------------------- ---
 g++ 4.6.3 linux OK/- -
 g++ 4.7.1 linux OK/- -
 与 2010 年相比 好的 好的
 vs 2012rc OK OK
 提升 1.50 胜利 OK OK
 boost 1.50 linux OK OK
 -------------------------------------------------- ---

```

关于你的模式，如果你的*意思是*一个点字符`'.'`，那么你应该这样写（`"\\."`）。您还可以通过使用非贪婪修饰符 ( `?`) 来减少回溯：

```
".*?FILE_(.+?)_EVENT\\.DAT.*" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-08T10:22:24.880

假设 C++ 和[Boost Regex](http://www.boost.org/doc/libs/1_58_0/libs/regex/doc/html/index.html)具有相似的结构和功能，[这里](http://boost-sandbox.sourceforge.net/libs/xpressive/doc/html/boost_xpressive/user_s_guide/matching_and_searching.html)解释了`regex_match`和之间的区别：`regex_search`

> `regex_match()`如果正则表达式从头到尾匹配整个输入，该算法只会报告成功。如果正则表达式只匹配输入的一部分，`regex_match()`将返回 false。如果要在字符串中搜索正则表达式匹配的子字符串，请使用`regex_search()`算法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T16:16:31.243

查看最新的 libstdc++[源代码](http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01430_source.html#l02028)，`regex_search`您会发现：

```
* @todo Implement this function. 
```

不幸的是，这不是剩下的唯一 TODO 项。GCC 的`<regex>`实现目前还不完整。`#ifdef`我建议在 GCC 赶上之前使用 Boost 或 Clang 和代码。

（这在 4.8 分支中都没有修复。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T10:03:54.603

我尝试在 C++11 中使用正则表达式库，但遇到了很多问题（都使用 g++ 4.6 和 4.7）。基本上，要么没有支持，要么只有部分支持。即使是 SVN 版本也是如此。在这里，您有一个链接，描述了[libstdc++ 的 SVN 版本的当前状态](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)。

所以，就目前而言，我想最好的选择是继续使用[Boost.Regex](http://www.boost.org/doc/libs/1_50_0/libs/regex/doc/html/index.html)。

或者，您可以尝试使用[libc++](http://libcxx.llvm.org/)。根据[这个文档](http://libcxx.llvm.org/libcxx_by_chapter.pdf)，对正则表达式的支持是完整的。

# image-processing - 训练 Tesseract-OCR V 3.01 时出现 Font_Property 问题

> ID：11628052
> 
> 赞同：0
> 
> 时间：2012-07-24T09:35:51.637
> 
> 标签：image-processing, ocr, tesseract, tessnet2

我在设置字体属性文件以训练 tesseract v 3.01 ocr 引擎时遇到了问题。根据 3.01v，您需要设置字体属性文件。font_properties 文件的格式是这样的

并且必须使用 0 或 1 个标志来指示属性。有谁知道fixed、serif或fraktur是什么意思？

当我使用我的 font_properties 文件运行它时，它会引发以下错误![在此处输入图像描述]！[在此处输入图像描述](../Images/a92b1e4ab4e9ac47ed6df68ee3e3d064.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:04:05.847

固定（或等宽）、Serif 和 Fraktur 是标准字体描述符 - 您可以在 Wikipedia 上查找它们的含义。

关于您的错误，请确保您已正确格式化您的 font_properties 文件，如下面的 Training Tesseract 3 教程中所述。如果您只训练一种字体，则文件应包含一行，在您的情况下

times_new_roman 0 0 0 1 0

您还没有包含您在 font_properties 文件中放入的内容，但请注意您的字体名称不应包含空格！

[http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract3](http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T00:08:07.927

Tesseract 训练的输入文件不应在其名称中包含空格。

font_properties 中的条目应与图像文件名称的 fontname 部分匹配；例如，如果 font_properties 有 uknumberplate，那么图像的文件名应该是 eng.uknumberplate.exp0.tif。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-28T15:02:52.780

您必须将 font_properties.txt 放入命令中，但随后会在 windows 中引发异常，但它会找到字体属性文件。

# php - 将对象另存为字符串，而不使用序列化

> ID：11628055
> 
> 赞同：1
> 
> 时间：2012-07-24T09:35:53.930
> 
> 标签：php, string, object

对于错误日志记录，我想将一个对象作为字符串保存在我的数据库中。我不想使用序列化，因为这会触发`__sleep()`- 方法。那么是否有另一种方法可以将对象保存为字符串而不使用`serialize()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:37:53.647

```
class Foo {
  public function __toString() {
    return "Hooray";
  }
}

echo new Foo; 
```

甚至会

```
echo var_export(new Foo, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:38:04.443

你可以这样做：

```
ob_start();
var_dump($x);
ob_get_contents(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:27:26.987

你可以试试这个

```
$string = print_r($x, true); 
```

要保存`$string`在数据库中，您可以压缩字符串：

```
$string = gzcompress($string); 
```

解压缩和打印`$string`使用：

```
echo '<pre>'.gzuncompress($string).'</pre>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:42:51.210

另一个解决方案可能是`json_encode`-function ( [docu](http://php.net/manual/en/function.json-encode.php) )。

编辑：它的好处是，如果您必须自动分析日志文件，您可以使用几乎任何编程语言轻松解析它;-)

# java - 如何将Android中的文件写入原始文件夹？

> ID：11628058
> 
> 赞同：7
> 
> 时间：2012-07-24T09:36:04.960
> 
> 标签：java, android

我认为这是一个非常基本的问题。

我目前正在编写这样的文件：

```
File output = new File("exampleout.mid"); 
```

现在，我想将文件写入 ../myproject/res/raw

我读到我可以通过将完整的网址放在“”中来做到这一点。但。因为这是一个安卓应用。完整的网址是什么？我不必写 /home/.../myproject/...？

是解决方案：

```
File output = new File("/res/raw/exampleout.mid"); 
```

还是我需要更高的 url 结构？

很抱歉问这个简单的问题，但由于我使用的是 Android 模拟器，我无法检查文件是否真的在正确的位置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T09:36:36.853

您不能将文件写入原始文件夹。它是只读的。确切地说，您不能即时修改“Res”文件夹中包含的任何内容。

看看这个，[https://stackoverflow.com/a/3374149](https://stackoverflow.com/a/3374149)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-22T20:45:44.007

如果您想在 Android 或 Google App Engine 上使用 iText，则需要使用 iTextG。

```
dependencies {
    compile 'com.itextpdf:itextg:5.5.10'
} 
```

来源：[iText 官网](https://developers.itextpdf.com/itextg-android)

# android - 从任何 Android 应用程序获取 GID

> ID：11628060
> 
> 赞同：0
> 
> 时间：2012-07-24T09:36:11.750
> 
> 标签：android, process

每当我们启动任何 Activity 时，我们都会获得有关 uid、gid 等的信息，如下所示：

```
I/ActivityManager( 1986): Start proc app.processName for activity hostingNameStr: pid=3641 uid=10109 gids={3003, 1007} 
```

现在使用 PackageManager，我们可以得到 packageName、uid 和 pid，如下所示：

```
List<ApplicationInfo> packages = pm
                .getInstalledApplications(PackageManager.GET_META_DATA);

for (ApplicationInfo packageInfo : packages) {
    Log.d("ME", "packageInfo is  :" + packageInfo);
    Log.d("ME", "Installed package :" + packageInfo.packageName);
    Log.d("ME", "Package process for " + packageInfo.packageName+"-->" + packageInfo.processName);
    Log.d("ME", "Package uid for " + packageInfo.packageName+"-->"+packageInfo.uid);
} 
```

但是在这里，我无法获得 gid，所以想知道像这样获得 gid 是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:54:12.223

尝试查看`Process`类提供的方法。例如，在你的情况下`getGidForName(String name)`。它返回 int 值，GID，但我不知道如何选择所有 gid 的列表。

**编辑：** 我对 applicationInfo 有点困惑。您可以使用[PackageManager 的](http://developer.android.com/reference/android/content/pm/PackageManager.html)方法 getPackageGids(String packageName) 或者您可以获取所有 PackageInfo 然后读取该`gids`字段的值。

# sql - 创建链接服务器和数据库别名

> ID：11628061
> 
> 赞同：7
> 
> 时间：2012-07-24T09:36:19.457
> 
> 标签：sql, sql-server, linked-server

我有两台服务器 Server1 和 Server2

在两台服务器上，我都有一个名为 QAI 的数据库

有没有一种方法可以创建一个链接服务器，其别名从 Server2 到 Server1，而不是 Server1.QAI.dbo.tbBlah

将其别名为 QAI.dbo.tbBlah

这是必需的，因为 server2 上的 QAI DB 失败并且需要在修复时回退到 Server1 实例

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-04-28T13:35:06.987

这行得通。在 SQL2012 上测试

[http://alexpinsker.blogspot.se/2007/08/how-to-give-alias-to-sql-linked-server.html](http://alexpinsker.blogspot.se/2007/08/how-to-give-alias-to-sql-linked-server.html)

> 将 SQL 链接服务器添加到运行它的特定主机没有问题。但是如果你需要给它一个别名，而不是使用主机名作为链接服务器名呢？这是如何做到的：
> 
> 1) 第 1 步：
> • 在 SQL Server Management Studio 中打开链接服务器，然后打开“新建链接服务器”。
> • 出现的向导内部– 选择常规选项卡。
> • 在“链接服务器”字段中指定别名。
> • 选择SQL Native Client 作为提供者。
> • 在“产品名称”字段中添加 sql_server（这很神奇）。
> • 在“数据源”中——指定要用作链接服务器的主机名。
> 
> 2) 第 2 步：
> • 在安全选项卡中 - 指定适当的安全选项（例如安全上下文）
> 
> 3) 第 3 步：
> • 在“服务器选项”选项卡中 - 将“数据访问”、“RPC”、“Rpc Out”和“使用远程协作”设置为 true。
> 
> 4) 第 4 步：
> • 享受。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T17:27:32.633

如果您不想在查询表时指定数据库名称，您可以为其创建同义词。

```
CREATE SYNONYM [dbo].[DimProduct]
FOR
[AdventureWorksDW].[dbo].[DimProduct] 
```

这将在您的 Synonyms 文件夹中创建 DimProduct

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:44:46.640

恐怕这是不可能的，你总是必须明确地引用 Server1。但是如果您的应用程序是在服务器上而不是在许多客户端上，因此使用点数量有限，您可以在那里修改连接字符串，因此应用程序将临时引用 server1 而不是 server2。

# linq - 字符串数组的 linq 表达式始终导致“当前上下文中不存在名称‘结果’”

> ID：11628064
> 
> 赞同：0
> 
> 时间：2012-07-24T09:36:24.387
> 
> 标签：linq

我正在尝试使用以下命令从 Request.Form.AllKeys 字符串数组中获取某些键：

```
var result = keys.Where(key => key.StartsWith("added")); 
```

无论我做什么，结果都是“当前上下文中不存在名称'结果'”。

我也试过：

```
var result = (from keys in Request.Form.AllKeys
              where keys.StartsWith("added")
              select keys).ToArray(); 
```

一样。

我是 Linq 和 Lambda 表达式的新手，所以请原谅我的无知。

问候， 雅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:44:59.133

我找到了问题的答案：延迟执行。

当我实际执行代码然后使用 result.Any() 跟进它时，表达式被执行并产生了正确的结果。

# jenkins - 使用 jenkins 发送电子邮件时出错

> ID：11628065
> 
> 赞同：29
> 
> 时间：2012-07-24T09:36:26.487
> 
> 标签：jenkins

我正在尝试在詹金斯中使用电子邮件发送。我保留默认值，单击“测试配置”按钮并得到错误：

> 发送电子邮件失败
> 
> javax.mail.MessagingException：无法连接到 SMTP 主机：localhost，端口：25；嵌套异常是：java.net.SocketException：权限被拒绝：连接
> 
> 在 com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1934)
> 
> 在 com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)

我错过了什么？默认情况下不工作？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-07-10T10:41:05.027

我使用下图给出的设置为 Jenkins 配置了我的 gmail 帐户。

![在此处输入图像描述](../Images/0803757c3896b994421083b453db3957.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-18T14:36:53.617

我有类似的问题无法通过 zoho 发送电子邮件。配置是：[SMPT TLS Zoho 配置](https://www.zoho.com/mail/help/zoho-smtp.html) 我只需要将 jenkins 配置中的系统管理员地址更改为电子邮件通知中的相同。

在这里您可以找到系统管理员电子邮件：管理 Jenkins -> 配置系统 -> Jenkins 位置 -> 系统管理员电子邮件地址

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-29T10:41:28.497

我也在努力解决这个错误。这是我解决它的方法。

**1.谷歌账号设置：**

转到 Gmail 帐户设置 -> 转发和 POP/IMAP -> IMAP 访问 -> 启用 IMAP（这是启用 IMAP 和 SMTP 设置）

检查提到的[配置详细信息：](https://support.google.com/mail/answer/7126229?hl=en&visit_id=636711348934015376-1929736174&rd=2)

*   外发邮件 (SMTP) 服务器：smtp.gmail.com
*   需要 SSL：是
*   需要 TLS：是（如果可用）
*   需要身份验证：是
*   SSL 端口：465
*   TLS/STARTTLS 端口：587

（不要使用任何人提到的设置，请查看您的帐户以获取此信息，因为设置/配置会不断变化。）

**2.詹金斯（2.121.3）设置：**

管理 Jenkins -> 配置系统 -> 向下滚动到电子邮件通知选项卡 -> 高级

*   使用 SMTP 身份验证：选中
*   用户名：<您的 gmail id>
*   密码：<您的密码>
*   使用 SSL：选中
*   SMTP 端口：465
*   回复地址：可选（我将其留空。您可以提供任何您想要的电子邮件 ID）
*   字符集：UTF-8

启用“通过发送测试电子邮件进行测试配置”，提供测试电子邮件 ID 并点击“测试配置”按钮

**笔记：**

1.  确保您连接到开放网络（不受防病毒保护或防病毒可能会阻止您的电子邮件）。我使用我的电话互联网而不是办公室互联网来测试这个。
2.  我没有为此更改任何 McAfee 设置。只需切换您的互联网以打开一个。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T09:40:10.043

本地主机上没有运行 SMTP 服务器，或者您没有连接到它的权限。

检查 Jenkins 的配置。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-10T12:36:51.910

如果有人仍然在 Jenkins 中遇到电子邮件问题，那么从那时起已经发生了很多变化。

如果您有一个用于 g-mail 的自定义域名，并且需要两步验证才能登录，例如`you@yourcompany.com`，

**SMTP 服务器**应该仍然是`smtp.gmail.com`

**默认用户电子邮件后缀**应为`@yourcompany.com`

因为谷歌不再允许你简单地使用你的默认电子邮件密码通过任何外部应用程序登录，在这种情况下是 Jenkins。让 Google 为 Jenkins 创建自定义密码比关闭 G-Mail 的安全功能以允许 Jenkins 访问您的帐户要安全得多。

在此处创建*应用密码*： [https ://security.google.com/settings/security/apppasswords](https://security.google.com/settings/security/apppasswords)

`Jenkins`在-> `Configure Systems`->中使用生成的密码`E-Mail Configuration`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T21:09:29.800

您的机器上可能没有运行 SMTP，这是 Windows 或 Mac 服务器的常见状态。

**要对此进行测试**，请为此使用任何已知的邮件服务器，例如 - 如果您有 gmail 帐户，请尝试以下操作：

SMTP 服务器：**smtp.gmail.com**

默认用户电子邮件后缀：**@something.something**

发件人电子邮件地址：**your-mail@gmail.com**

如果计划在构建过程中使用邮件通知，
最好正确设置 SMTP，或者将 Jenkins/Hudson 服务器移动到支持此功能的机器上。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-18T12:16:12.520

检查您的提供商是否阻止了端口 25。

为了进行适当的测试

远程登录 smtp.gmail.com 25

如果您收到这样的答案：

telnet：连接到地址 74.125.206.108：连接被拒绝

您应该按照[harikrishna-pai 的](https://stackoverflow.com/a/17568541/1212830)回答中所述进行 smtp 身份验证

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-30T11:25:17.820

我有同样的问题并设法通过以下方式解决，

1.  生成 Gmail 应用密码、 [Gmail 应用](https://i.stack.imgur.com/NZ4Qx.png)

2.  在 Jenkins 中使用 app 密码，Jenkins [的配置](https://i.stack.imgur.com/gS0Hp.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-08T06:59:29.643

我有同样的问题，因为我使用 avast 它阻止了 smtp 邮件所以我禁用它并且它工作

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-20T10:01:35.430

我遇到过同样的问题。在猎巫了很多之后，我找到了如下解决方案：

甚至打开 - 不太安全的应用程序，我从 6 小时开始就一直在苦苦挣扎。第二个选项：然后转到  [https://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha)

 并单击继续。  

这解决了这个问题。

# sql - 如何显示2个表中的所有重复行？

> ID：11628066
> 
> 赞同：0
> 
> 时间：2012-07-24T09:36:29.910
> 
> 标签：sql

我有 2 个名为 DataEntry_old 和 DataEntry_new 的表，两个表上都有 doc id、mobileno、name、addr 列。

我想显示两个表中 mobileno=987654321 的所有匹配行。也就是说，如果 mobileno=987654321 在 DataEntry_old 中，则该表中的一行，如果 mobileno=987654321 在 DataEntry_new 中，则该表中的另一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:24:34.880

您想对此查询使用 union all：

```
select t.*
from ((select 'old' as which, doc id, mobileno, name, addr
       from DataEntry_old
      ) union all
      (select 'new' as which, doc id, mobileno, name, addr
       from DataEntry_new
      )
     ) t
where t.mobileno='987654321' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:50:04.800

```
SELECT doc_id, mobileno, name, addr FROM DataEntry_old o inner join  DataEntry_new n
on o.doc_id=n.doc_id
where n.mobileno='987654321' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:39:16.523

```
SELECT doc_id, mobileno, name, addr 
FROM DataEntry_old
    ,DataEntry_new
WHERE DataEntry_ol.doc_id = DataEntry_new.doc_id 
```

# android - 如何在 CyanogenMod 中正确签署应用程序？

> ID：11628070
> 
> 赞同：2
> 
> 时间：2012-07-24T09:36:42.027
> 
> 标签：android, android-source, jar-signing, cyanogenmod

我从源代码编译了 CyanogenMod 7，然后尝试在我的设备上安装 ADWLauncher：

```
$ adb install -r ./out/target/product/crespo/system/app/ADWLauncher.apk
4147 KB/s (1060312 bytes in 0.249s)
    pkg: /data/local/tmp/ADWLauncher.apk
Failure [INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES] 
```

相关问题的答案说，这意味着包裹没有正确签名。但是当我尝试签名时 - 它失败了，因为包已经签名。如何正确签名？

有线

```
LOCAL_CERTIFICATE := shared 
```

在 Android.mk 中。如何用我自己的证书覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T09:04:08.143

这可能是因为您尝试在具有不同签名的另一个版本之上安装一个应用版本。首先尝试通过 Android 的 UI 或从 adb 完全卸载已安装的 apk：

`adb uninstall org.adw.launcher`

然后尝试重新安装。即使您自己构建了这两个版本，也可能会出现相同的错误 - 比如说首先安装了使用发布密钥签名的版本，然后使用测试/调试密钥再次安装相同的应用程序。

# c# - 实体框架：将表拆分为多个表

> ID：11628071
> 
> 赞同：1
> 
> 时间：2012-07-24T09:36:49.763
> 
> 标签：c#, .net, entity-framework, ef-code-first

我使用以下 EF 代码优先方法（TPH 继承）创建了下表 [PaymentComponent]。它工作正常。我需要更改数据库设计——需要将 GiftCouponPayments 存储在 GiftCouponPayment 表中，并将 ClubCardPayments 存储在 ClubCardPayment 表中。需要在 C# 代码中进行哪些更改才能获得所需的数据库结构？

![在此处输入图像描述](../Images/1431d30dea410d4be57b5557cda27c49.png)

**代码**

```
public abstract class PaymentComponent
{
    public int PaymentComponentID { get; set; }
    public int MyValue { get; set; }
    public string MyType { get; set; }
    public abstract int GetEffectiveValue();
}

public partial class GiftCouponPayment : PaymentComponent
{

    public override int GetEffectiveValue()
    {
        if (MyValue < 2000)
        {
            return 0;
        }
        return MyValue;
    }

}

public partial class ClubCardPayment : PaymentComponent
{
    public override int GetEffectiveValue()
    {
        return MyValue;
    }
}

public partial class Payment
{
    public int PaymentID { get; set; }
    public List<PaymentComponent> PaymentComponents { get; set; }
    public DateTime PayedTime { get; set; }

}

//System.Data.Entity.DbContext is from EntityFramework.dll
public class NerdDinners : System.Data.Entity.DbContext
{

    public NerdDinners(string connString): base(connString)
    { 

    }

    protected override void OnModelCreating(DbModelBuilder modelbuilder)
    {
        modelbuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }

    public DbSet<GiftCouponPayment> GiftCouponPayments { get; set; }
    public DbSet<ClubCardPayment> ClubCardPayments { get; set; }
    public DbSet<Payment> Payments { get; set; }

} 
```

**客户**

```
static void Main(string[] args)
{
    string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";

    using (var db = new NerdDinners(connectionstring))
    {
        GiftCouponPayment giftCouponPayment = new GiftCouponPayment();
        giftCouponPayment.MyValue=250;
        giftCouponPayment.MyType = "GiftCouponPayment";

        ClubCardPayment clubCardPayment = new ClubCardPayment();
        clubCardPayment.MyValue = 5000;
        clubCardPayment.MyType = "ClubCardPayment";

        List<PaymentComponent> comps = new List<PaymentComponent>();
        comps.Add(giftCouponPayment);
        comps.Add(clubCardPayment);

        var payment = new Payment { PaymentComponents = comps, PayedTime=DateTime.Now };
        db.Payments.Add(payment);

        int recordsAffected = db.SaveChanges();
    }

} 
```

**参考**：

1.  [如何让 Entity Framework 4.3 Code First 使用 Table Per Type (TPT) 映射子类？](https://stackoverflow.com/questions/9511021/how-do-i-get-entity-framework-4-3-code-first-to-map-a-subclass-using-table-per-t)
2.  [http://weblogs.asp.net/manavi/archive/2011/04/24/associations-in-ef-4-1-code-first-part-4-table-splitting.aspx](http://weblogs.asp.net/manavi/archive/2011/04/24/associations-in-ef-4-1-code-first-part-4-table-splitting.aspx)
3.  [http://www.robbagby.com/entity-framework/entity-framework-modeling-entity-splitting/](http://www.robbagby.com/entity-framework/entity-framework-modeling-entity-splitting/)
4.  实体框架映射方案 - [http://msdn.microsoft.com/en-us/library/cc716779.aspx](http://msdn.microsoft.com/en-us/library/cc716779.aspx)
5.  [http://blogs.microsoft.co.il/blogs/gilf/archive/2009/03/06/entity-splitting-in-entity-framework.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/03/06/entity-splitting-in-entity-framework.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:36:47.653

在 OnModelCreating 的 Context 类中：

```
modelBuilder.Entity<GiftCouponPayment>()
                .Map(m =>
                {
                    m.MapInheritedProperties();
                    m.ToTable("GiftCouponPayment");
                });

modelBuilder.Entity<ClubCardPayment>()
                .Map(m =>
                {
                    m.MapInheritedProperties();
                    m.ToTable("ClubCardPayment");
                }); 
```

# facebook - Facebook 集成会话问题

> ID：11628073
> 
> 赞同：-1
> 
> 时间：2012-07-24T09:37:04.123
> 
> 标签：facebook

这是我的 UserLogin.aspx 页面代码，其中包含 Facebook 用户的身份验证，问题是我在会话中维护令牌，后来我在 Default.aspx 上使用它。如果你看到 Session["facebook_token"] = authToken;

在我的 Default.aspx 页面加载中，我放置了此代码，但是当我转到主页或默认页面时，它给了我空值。

```
 if (Session["facebook_token"] != null)
        lblUserName.Text = Session["facebook_token"].ToString();

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using SocialMediaModel;
using Facebook.Components;

public partial class UserLogin : System.Web.UI.Page
{
FacebookService _fbService = new FacebookService();
private const string FACEBOOK_API_KEY = "551810942508804";
private const string FACEBOOK_SECRET = "b63b8cca428b42935e6eab59976367b1";

protected void Page_Load(object sender, EventArgs e)
{
    // ApplicationKey and Secret are acquired when you sign up for
    _fbService.ApplicationKey = FACEBOOK_API_KEY;
    _fbService.Secret = FACEBOOK_SECRET;
    _fbService.IsDesktopApplication = false;

    string sessionKey = Session["facebook_session_key"] as String;
    string userId = Session["facebook_userId"] as String;

    string authToken = Request.QueryString["auth_token"];

    Session["facebook_token"] = authToken;

    // We have already established a session on behalf of this user
    if (!String.IsNullOrEmpty(sessionKey))
    {
        _fbService.SessionKey = sessionKey;
        _fbService.UserId = userId;
    }
    // This will be executed when facebook login redirects to our page
    else if (!String.IsNullOrEmpty(authToken))
    {
        _fbService.CreateSession(authToken);
        Session["facebook_session_key"] = _fbService.SessionKey;
        Session["facebook_userId"] = _fbService.UserId;
        Session["facebook_session_expires"] = _fbService.SessionExpires;
    }
    // Need to login
    else
    {
        Response.Redirect(@"http://www.facebook.com/login.php?api_key=" +   
       _fbService.ApplicationKey + @"&v=1.0");
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:29:21.333

> `string authToken = Request.QueryString["auth_token"];`
> 
> `Session["facebook_token"] = authToken;`

看起来您在每个页面加载（？）上都执行这些行 - 甚至没有检查此名称是否存在*GET*参数。

# git - 如何让 GIT 忽略我的更改

> ID：11628074
> 
> 赞同：58
> 
> 时间：2012-07-24T09:37:03.693
> 
> 标签：git

尽管标题似乎与以前的问题相似，但我找不到我的简单案例的解决方案：

*   我致力于我的分支'ABCD'：`git commit -a .....`
*   然后决定访问以前的提交：`git checkout 2387687326487`
*   在这里我做了一些更改，仅用于测试目的，我不想保留它们
*   我完成了，我想回到我的最新提交（再次：忽略我对旧提交所做的更改）：命令`git checkout 'ABCD'`给出错误：

> 您对以下文件的本地更改将被结帐覆盖......请提交或存储......

而我不想提交或隐藏或其他任何东西。我只想回家:) 请问我该怎么办？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-07-24T09:54:45.470

只使用

```
git checkout . 
```

将丢弃当前目录中任何未提交的更改（点表示当前目录）。

**编辑**以回应@GokulNK：

如果您想保留这些更改以供将来使用，您有 2 个选项：

*   `git stash`：这会将这些更改保存在堆栈中。您可以稍后将更改应用于您的工作副本`git stash pop`
*   `git diff > changes.patch`: 这会将这些更改保存到文件`changes.patch`中。如果您想将它们应用于您的工作副本，您可以这样做：`git apply changes.patch`.

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-07-24T09:46:06.083

如果您确定不想保留更改，则可以使用以下行：

```
git checkout -f 'ABCD' 
```

选项“-f”代表力。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-24T09:50:35.703

要撤消本地更改并从提交返回状态，您可以：

```
git reset --hard 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-07-24T10:00:10.530

除了提到的解决方案之外，您还可以隐藏更改

```
git stash 
```

结帐您的分支

```
git checkout 'ABCD' 
```

最终，当您确定不需要隐藏更改中的任何内容并使用`gitk`or检查了两次时`gitg`，请丢弃存储：

```
git stash drop 
```

这是我的首选方式，因为它更安全。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-28T23:09:59.413

如果有人想忽略 git 上的更改但将它们保留在本地，您可以使用：

`$ git update-index --assume-unchanged <filepath>`

# backbone.js - Backbone.js - 从集合创建中获取 id

> ID：11628076
> 
> 赞同：3
> 
> 时间：2012-07-24T09:37:10.997
> 
> 标签：backbone.js, backbone.js-collections

我正在使用该`create`方法将模型添加到集合中，并且 api 响应很好。该模型似乎已正确返回，并查看`console.dir( resp );`我正在寻找的模型。但是，当我尝试访问定义为`runningorderid`的时，响应为空。我认为这与响应的异步性质有关，但我不知道如何处理它。`id``idAttribute`

```
var resp = window.app.RunningOrderCollection.create(
        { runningorderid: null, listitemid: 1, starttime: n} , 
        { wait: true }
);
console.dir( resp );
console.dir( resp.get("strt") );
console.dir( resp.id ); 
```

![问题截图](../Images/0f4442640c19ba91fe1d1ee42064c868.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:54:17.203

`collection.create`，与所有与服务器请求相关的方法一样，确实是异步的。在您的情况下，您可以收听同步事件以获得所需的结果。

来自[http://backbonejs.org/#Collection-create](http://backbonejs.org/#Collection-create)

> 一旦在服务器上成功创建模型，创建模型将立即触发集合上的“添加”事件以及“同步”事件。

例如：

```
resp.on('sync', function(model) {
  console.dir( resp );
  console.dir( resp.get("strt") );
  console.dir( resp.id );
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:57:12.750

To circumvent the async nature of the server-operations of collections and models, bind the actions to be taken after the operations to the events that are triggered when those operations are finished. For example the backbone.js documentation has [the following to say](http://backbonejs.org/#Collection-create) about Collection's `create`-function:

> Creating a model will cause an immediate "add" event to be triggered on the collection, as well as a "sync" event, once the model has been successfully created on the server. Pass {wait: true} if you'd like to wait for the server before adding the new model to the collection.

So, you have passed {wait: true}, so the collection will trigger an `add` event when the model has been created on the server and added to the collection. With this logic:

```
window.app.RunningOrderCollection.on('add', function(resp) {
  console.dir( resp );
  console.dir( resp.get("strt") );
  console.dir( resp.id );
});
var model = window.app.RunningOrderCollection.create(
  { runningorderid: null, listitemid: 1, starttime: n} , 
  { wait: true }
); 
```

Check out the exellent [catalog of events](http://backbonejs.org/#FAQ-events) in the backbone.js documentation for more info!

Hope this helps!

# android - 在 Android 应用程序开发中不再可见被系统杀死的应用程序

> ID：11628077
> 
> 赞同：1
> 
> 时间：2012-07-24T09:37:13.913
> 
> 标签：android, android-intent

我对android开发很陌生。我创建了一个android应用程序正常工作。但我的问题是当我点击“home”按钮时，它进入onPause（）方法并且onStop（）保持活动状态。然后我使用了其他一些应用程序我的设备。1 小时后，我再次转到“主页”，根据 Activity 生命周期单击我的应用程序图标，它应该转到 onRestart() 方法，而不是我的应用程序再次转到“onCreate() 方法。我以为我的应用程序被系统杀死了因为它不再对用户可见。

那么你们都可以帮我保持应用程序活动状态吗？

谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:58:39.153

这取决于很多因素，为什么应用程序在后台长时间被杀死。

*   内存需求/消耗是第一个，如果您在将应用程序发送到后台后启动了太多应用程序，那么很明显您的应用程序将被操作系统杀死以为其他应用程序提供内存。

*   其次，我们现在市场上有很多应用程序将终止应用程序以延长电池寿命，因此请检查您的设备中是否安装了任何此类应用程序，因为您的应用程序需要再次通过 onCreate()。

[检查此项](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)以了解应用程序何时会被终止。

如果您想进一步了解，您可能也[对此](http://developer.android.com/guide/components/processes-and-threads.html)感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:48:43.550

如果您需要保存数据和状态，您可以将其保存在[Shared Preferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)中。然后第二次您可以检查首选项并从那里恢复所有信息。

# java - 使用 OR 的 nHibernate 动态查询

> ID：11628078
> 
> 赞同：0
> 
> 时间：2012-07-24T09:37:16.457
> 
> 标签：java, nhibernate, dynamic, hibernate-criteria

我们有一个表单，它允许用户指定查询数据库的条件。

我们的表单构建“标准”对象，然后用于构建 nHibernate 标准。

我们当前执行此操作的代码是：

```
public virtual ICriteria BuildCriteria(ICriteria criteria)
{
    foreach (SheCriterion criterion in this.SheCriterions)
    {
        if (criterion.OperatorKey == "OR")
        {
            //// code required here to process ORs
        }
        criteria.Add(criterion.BuildCriterion());
    }
    return criteria;
} 
```

不幸的是，这就是我卡住的地方——如果我们和每个标准都没有问题，但我在解决如何添加 OR 时遇到困难——当我们知道涉及 OR 时，之前的标准已经是处理。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:51:56.510

`or`没那么容易。考虑`a and b or c`有两种不同的可能性`(a and b) or c`，`a and (b or c)`所以如果`a = false`你会得到两个不同的答案。您必须建立一个标准树并在

```
public virtual ICriteria BuildCriteria(ICriteria criteria)
{
    foreach (SheCriterion criterion in this.SheCriterions)
    {
        criteria.Add(criterion.BuildCriterion());
    }

    return criteria;
}

public virtual ICriterion BuildCriterion()
{
    if (OperatorKey == "OR")
    {
        return new Disjunction()
            .Add(Left.BuildCriterion())
            .Add(right.BuildCriterion());
    }
    else
    {
        return new Conjunction()
            .Add(Left.BuildCriterion())
            .Add(right.BuildCriterion());
    }
} 
```

更新：否则你需要一棵树

```
Man { Name = "Bill", Eyecolor = "blue", Height = 175, IsRich = true };

// will show Bill
SELECT * FROM Men WHERE height > 180 AND eyecolor = blue OR IsRich = 1
SELECT * FROM Men WHERE (height > 180 AND eyecolor = blue) OR IsRich = 1

// will not show Bill
SELECT * FROM Men WHERE height > 180 AND (eyecolor = blue OR IsRich = 1) 
```

# d3.js - D3/咖啡气泡图中的不同状态

> ID：11628081
> 
> 赞同：4
> 
> 时间：2012-07-24T09:37:31.060
> 
> 标签：d3.js, coffeescript, force-layout, bubble-chart

我想使用这个（[http://vallandingham.me/vis/gates/](http://vallandingham.me/vis/gates/ "气泡图")）气泡图（在 D3 中制作）：

![在此处输入图像描述](../Images/3509e94202a903b25b9e92e4406c0209.png)

...走过一些不同的场景。简而言之，我想可视化选举数据。政党获得了多少票，组建政府的可能性是什么？

在数据层面，非常明显：姓名、议会席位数量、州 1、州 2、州 3 等。州 1 是 1 或 2。1 是政府中的位置，2 是反对党。很简单。

但该示例仅显示两种状态：All Grants 和 Grants By year。我想要的是更多的州，比如按年拨款。但是我不是一个很好的程序员，无法弄清楚如何使这项工作。当我添加新状态时，可视化不起作用。

这是控制状态的代码（咖啡）。

```
class BubbleChart
  constructor: (data) ->
    @data = data
    @width = 940
    @height = 600

    @tooltip = CustomTooltip("gates_tooltip", 240)

    # locations the nodes will move towards
    # depending on which view is currently being
    # used
    @center = {x: @width / 2, y: @height / 2}
    @year_centers = {
      "2008": {x: @width / 3, y: @height / 2},
      "2009": {x: @width / 2, y: @height / 2},
      "2010": {x: 2 * @width / 3, y: @height / 2}
    }

    # used when setting up force and
    # moving around nodes
    @layout_gravity = -0.01
    @damper = 0.1

    # these will be set in create_nodes and create_vis
    @vis = null
    @nodes = []
    @force = null
    @circles = null

    # nice looking colors - no reason to buck the trend
    @fill_color = d3.scale.ordinal()
      .domain(["low", "medium", "high"])
      .range(["#d84b2a", "#beccae", "#7aa25c"])

    # use the max total_amount in the data as the max in the scale's domain
    max_amount = d3.max(@data, (d) -> parseInt(d.total_amount))
    @radius_scale = d3.scale.pow().exponent(0.5).domain([0, max_amount]).range([2, 85])

    this.create_nodes()
    this.create_vis()

  # create node objects from original data
  # that will serve as the data behind each
  # bubble in the vis, then add each node
  # to @nodes to be used later
  create_nodes: () =>
    @data.forEach (d) =>
      node = {
        id: d.id
        radius: @radius_scale(parseInt(d.total_amount))
        value: d.total_amount
        name: d.grant_title
        org: d.organization
        group: d.group
        year: d.start_year
        x: Math.random() * 900
        y: Math.random() * 800
      }
      @nodes.push node

    @nodes.sort (a,b) -> b.value - a.value

  # create svg at #vis and then 
  # create circle representation for each node
  create_vis: () =>
    @vis = d3.select("#vis").append("svg")
      .attr("width", @width)
      .attr("height", @height)
      .attr("id", "svg_vis")

    @circles = @vis.selectAll("circle")
      .data(@nodes, (d) -> d.id)

    # used because we need 'this' in the 
    # mouse callbacks
    that = this

    # radius will be set to 0 initially.
    # see transition below
    @circles.enter().append("circle")
      .attr("r", 0)
      .attr("fill", (d) => @fill_color(d.group))
      .attr("stroke-width", 2)
      .attr("stroke", (d) => d3.rgb(@fill_color(d.group)).darker())
      .attr("id", (d) -> "bubble_#{d.id}")
      .on("mouseover", (d,i) -> that.show_details(d,i,this))
      .on("mouseout", (d,i) -> that.hide_details(d,i,this))

    # Fancy transition to make bubbles appear, ending with the
    # correct radius
    @circles.transition().duration(2000).attr("r", (d) -> d.radius)

  # Charge function that is called for each node.
  # Charge is proportional to the diameter of the
  # circle (which is stored in the radius attribute
  # of the circle's associated data.
  # This is done to allow for accurate collision 
  # detection with nodes of different sizes.
  # Charge is negative because we want nodes to 
  # repel.
  # Dividing by 8 scales down the charge to be
  # appropriate for the visualization dimensions.
  charge: (d) ->
    -Math.pow(d.radius, 2.0) / 8

  # Starts up the force layout with
  # the default values
  start: () =>
    @force = d3.layout.force()
      .nodes(@nodes)
      .size([@width, @height])

  # Sets up force layout to display
  # all nodes in one circle.
  display_group_all: () =>
    @force.gravity(@layout_gravity)
      .charge(this.charge)
      .friction(0.9)
      .on "tick", (e) =>
        @circles.each(this.move_towards_center(e.alpha))
          .attr("cx", (d) -> d.x)
          .attr("cy", (d) -> d.y)
    @force.start()

    this.hide_years()

  # Moves all circles towards the @center
  # of the visualization
  move_towards_center: (alpha) =>
    (d) =>
      d.x = d.x + (@center.x - d.x) * (@damper + 0.02) * alpha
      d.y = d.y + (@center.y - d.y) * (@damper + 0.02) * alpha

  # sets the display of bubbles to be separated
  # into each year. Does this by calling move_towards_year
  display_by_year: () =>
    @force.gravity(@layout_gravity)
      .charge(this.charge)
      .friction(0.9)
      .on "tick", (e) =>
        @circles.each(this.move_towards_year(e.alpha))
          .attr("cx", (d) -> d.x)
          .attr("cy", (d) -> d.y)
    @force.start()

    this.display_years()

  # move all circles to their associated @year_centers 
  move_towards_year: (alpha) =>
    (d) =>
      target = @year_centers[d.year]
      d.x = d.x + (target.x - d.x) * (@damper + 0.02) * alpha * 1.1
      d.y = d.y + (target.y - d.y) * (@damper + 0.02) * alpha * 1.1

  # Method to display year titles
  display_years: () =>
    years_x = {"2008": 160, "2009": @width / 2, "2010": @width - 160}
    years_data = d3.keys(years_x)
    years = @vis.selectAll(".years")
      .data(years_data)

    years.enter().append("text")
      .attr("class", "years")
      .attr("x", (d) => years_x[d] )
      .attr("y", 40)
      .attr("text-anchor", "middle")
      .text((d) -> d)

  # Method to hide year titiles
  hide_years: () =>
    years = @vis.selectAll(".years").remove()

  show_details: (data, i, element) =>
    d3.select(element).attr("stroke", "black")
    content = "<span class=\"name\">Title:</span><span class=\"value\"> #{data.name}</span><br/>"
    content +="<span class=\"name\">Amount:</span><span class=\"value\"> $#{addCommas(data.value)}</span><br/>"
    content +="<span class=\"name\">Year:</span><span class=\"value\"> #{data.year}</span>"
    @tooltip.showTooltip(content,d3.event)

  hide_details: (data, i, element) =>
    d3.select(element).attr("stroke", (d) => d3.rgb(@fill_color(d.group)).darker())
    @tooltip.hideTooltip()

root = exports ? this

$ ->
  chart = null

  render_vis = (csv) ->
    chart = new BubbleChart csv
    chart.start()
    root.display_all()
  root.display_all = () =>
    chart.display_group_all()
  root.display_year = () =>
    chart.display_by_year()
  root.toggle_view = (view_type) =>
    if view_type == 'year'
      root.display_year()
    else
      root.display_all()

  d3.csv "data/gates_money.csv", render_vis 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T06:54:28.153

在索引页面本身上，它具有以下代码`toggle_view(view_type)`：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(document).ready(function() {
          $('#view_selection a').click(function() {
            var view_type = $(this).attr('id');
            $('#view_selection a').removeClass('active');
            $(this).toggleClass('active');
            toggle_view(view_type);
            return false;
          });
        });
    });
  </script> 
```

在您提供的代码中，您拥有该功能的代码：

```
 root.toggle_view = (view_type) =>
    if view_type == 'year'
      root.display_year()
    else
      root.display_all() 
```

因此，似乎要添加另一个状态，您需要：

1.  为链接添加适当的 id`<a href="#" id="my_type" class="btn">My Type</a>`
2.  添加`else if`具有该 id 的，直接到函数
3.  编写函数

所以像这样

```
 root.toggle_view = (view_type) =>
    if view_type == 'year'
      root.display_year()
    else if view_type == 'my_type'
      root.display_my_type()
    else
      root.display_all()

   display_my_type = () =>
     # Whatever needs to be done 
```

# jsp - 如何在 POJO 中调用 JSP 标记

> ID：11628083
> 
> 赞同：1
> 
> 时间：2012-07-24T09:37:47.140
> 
> 标签：jsp, tags, include, custom-tag, requestdispatcher

我有一个用于

```
<jsp:useBean id="controller" class="the.Pojo" scope="page"/> 
```

我在这个 Pojo 中放入了我需要的东西：比如`request`, `response`.. 这样我就可以包含另一个带有`RequestDispatcher`.

我需要做的是包含一个`custom tag`，我可以将此自定义标记放入 JSP 中并包含该 JSP，但我想知道是否还有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:53:56.870

我认为您不能`custom tag`在 Java (POJO) 类中包含一个。您最好继续将其包含在`JSP`.

尽管如此，我还是想听听其他人怎么说，并找到一些有趣的解决方案。

这种使用包含其他 JSP 本身的 POJO 的方法非常有趣 :-)

# php - 注册前与 . 和空间

> ID：11628091
> 
> 赞同：0
> 
> 时间：2012-07-24T09:38:02.227
> 
> 标签：php, regex

我遇到了正则表达式的问题。每当我输入'St。Joe'，输入作为 'St.' 存储在后端。只要。我的正则表达式中有一个空格，但我不确定出了什么问题。

这是输入通过的功能。

```
function reg_sent($i){
    $reg_sent = "/[^A-Za-z0-9., '\n\r ]/";
    return preg_replace($reg_sent, '', $i);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:40:31.623

您的函数从字符串中删除不属于字符类的所有字符`A-Za-z0-9., '\n\r`。所以它`"St. Joe"`完全保持不变。

您的问题一定是由程序的不同部分引起的。

# maven - sbt.ResolveException：未解决的依赖：

> ID：11628095
> 
> 赞同：0
> 
> 时间：2012-07-24T09:38:21.807
> 
> 标签：maven, playframework

似乎 Play 找不到我的本地存储库。

我已经在我的项目的 plugins.sbt 文件中的“file://”+“/Users/branco”+“/.m2/repository”中声明了解析器 +=“Local Maven Repository”。

并在文件 Build.scala val appDependencies = Seq( "linkedin" % "linkedin_api" % "1.0-SNAPSHOT" )

（我使用play20）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T02:50:10.817

plugins.sbt 的解析器部分是一个陷阱。在 Build.scala 中设置它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T14:52:16.900

该`resolver`部分必须在您的`project/Build.scala`文件中定义，如 Play！文档（在页面末尾）：[http ://www.playframework.org/documentation/2.0/SBTDependencies](http://www.playframework.org/documentation/2.0/SBTDependencies)

# gwt - GWT 是否支持在 GWTTestCase 期间包含样式表？

> ID：11628098
> 
> 赞同：0
> 
> 时间：2012-07-24T09:38:29.387
> 
> 标签：gwt, junit, gwttestcase

我有一些简单的 GWT 客户端代码，我想使用`GWTTestCase`GWTTestSuite 进行测试。

但是，这些测试需要使用一些`CSS stylesheet`（仅测试需要）。

我的第一次尝试是：

1.  定义一个`ClientBundle`提供用于测试的 CSS 文件。
2.  在我`gwtSetUp()`的测试中，调用 `ensureInjected() 方法来添加 CSS 文件，然后再调用我的测试
3.  测试 CSS 样式是否应用于 DOM 中的特定元素，例如

代码：

```
assertEquals("blue", element.getStyle().getBorderColor()); 
```

**我没有错误，但这似乎不起作用。**

查看控制台的日志（在 Junit 测试期间）我发现了这个：

> 初始化 ResourceGenerator
> 寻找可操作的 CssResource 子类型
> 计算 CSS 类替换
> 准备方法 css
> 寻找资源
> 解析 CSS 样式表文件：/D:/Workspace/libraries/gwt-text/gwt-text/src/test/java/com/t/i/client/ CSSDecorationTest.css
> 扫描 CSS 以获取需求
> 创建字段
> 创建 css() 的赋值
> 创建图像精灵类
> 替换基于属性的 @if 块
> 替换 CSS 类名
> 在节点边框颜色中执行替换：.....;

我的 css 文件简单包含：

```
.d {
    border-color: blue;
} 
```

## 编辑

请参阅此链接：[https ://stackoverflow.com/a/10575244/921244](https://stackoverflow.com/a/10575244/921244)

这是错误的方法，因为 getStyle 不提供 CSS 计算样式。太糟糕了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:51:10.600

如果您不需要对 CSS 做任何特殊处理（即它是一个简单的*CSS*，`CssResource`而不是你的返回测试特定模块的名称而不是被测模块的名称*）*，您将在其中添加 a以包含您的样式表（如果样式表仅用于测试，则最简单的方法是将其放入测试特定文件旁边的子文件夹）。 请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideAutomaticResourceInclusion](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideAutomaticResourceInclusion)`gwt.xml``<inherits>`*`GWTTestCase``getModuleName`*`<stylesheet src="…" />``public``gwt.xml`** 

 **或者，`CssResource`像您一样使用，您可能想在[`StyleInjector.flush()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/dom/client/StyleInjector.html#flush%28%29)调用`ensureInjected()`.**

# ajax - 可重用客户端/启用 Ajax 的表格设计（不要使用默认的 Asp.Net Grid）

> ID：11628099
> 
> 赞同：-2
> 
> 时间：2012-07-24T09:38:29.333
> 
> 标签：ajax, html-table

我正在寻找具有以下 HTML 表功能的代码。

设计一个具有以下默认功能的可重用网格：

1.  启用 Ajax 的表（无回发）
2.  通过 Ajax 调用进行分页
3.  对 Ajax 调用进行排序
4.  通过 Ajax 调用过滤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:13:03.893

你可以使用 jQuery datatables.net 来完成这个任务。你可以从这里下载 js 文件

[**下载JS文件**](http://datatables.net/)

在这里，我将解释一个相同的示例。我使用实体框架从后端获取数据。如果您不使用实体框架，那么从这个示例中获取概念并在您的方式中实现它。

**HTML：**

```
<table id="tblList" cellpadding="0" cellspacing="0" border="0" class="grid" >
    <thead>
        <tr>
            <th class="headingtextcenter">#</th><th class="headingtextcenter">Name</th><th class="headingtextcenter">Description</th>
            <th class="headingtextcenter">Form Publish Date</th><th class="headingtextcenter">Last Data Entery Date</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>
<script src="Scripts/jquery-1.7.2.js" type="text/javascript"></script>
<script src="Scripts/jquery.dataTables.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript">
    $(window).load(function () {
        var oTable = $('#tblList').dataTable({
            "bServerSide": true,
            "sAjaxSource": "List.aspx?load=1",
            "bProcessing": true,
            "sPaginationType": "full_numbers",
            "oLanguage": { "sZeroRecords": "<div style='width:99%;text-align:center;padding:4px;'>No record found.</div>" },
            "aoColumns": [
                { "sName": "ID","bSortable": false },
                { "fnRender": function (oObj) {
                        return '<a  href=\"Whitepaper/' +
                            oObj.aData[3] + '\" >' + oObj.aData[0] + '</a>';
                    },"bSortable": false },
                { "sName": "Description", "bSortable": false},
                { "sName": "FormPublishDate", "bSortable": false},
                { "sName": "LastDataEnteryDate"}
            ],
            "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                $('td', nRow).addClass("cells");
            }
        });
    });
</script>
//User fnRowCallback function if you want to add css to all td 
```

**代码背后（List.aspx.cs）：**

```
private FormEntities objEntities;
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        if (Request.QueryString["load"] != null && Request.QueryString["load"].ToString() == "1")
            BindData();
    }
}

private void BindData()
{
    using (objEntities = new FormEntities())
    {
        //For sorting
        Func<Forms, string> orderingFunction = (c => c.LastDataEnteryDate);
        var sortDirection = Request["sSortDir_0"];

        IEnumerable<Forms> allForms = objEntities.Forms;

        var sSearch = Convert.ToString(Request["sSearch"]);
        if (!string.IsNullOrEmpty(sSearch))
        {
            allVideoLibraries = allForms.Where(c => c.LastDataEnteryDate.ToLower().Contains(sSearch.ToLower()));
        }

        if (sortDirection == "asc")
            allForms = allForms.OrderBy(orderingFunction);
        else if (sortDirection == "desc")
            allForms = allForms.OrderByDescending(orderingFunction);

        var displayForms = allForms.Skip(int.Parse(Request.QueryString["iDisplayStart"])).Take(int.Parse(Request.QueryString["iDisplayLength"]));

        var result = from v in displayForms
                     select new[] { v.ID,v.Name, v.Description, v.FormPublishDate ,v.LastDataEnteryDate };

        JavaScriptSerializer toJSON = new JavaScriptSerializer(); //need to add reference using System.Web.Script.Serialization;
        Response.Clear();
        string datastring = toJSON.Serialize(new 
        {
            sEcho = Request.QueryString["sEcho"],
            iTotalRecords = result.Count(),
            iTotalDisplayRecords = result.Count(),
            aaData = result
        });
        Response.Write(datastring);
        Response.End();
    }
} 
```

# jquery - 单击正文时隐藏 div 并在单击按钮时显示它

> ID：11628101
> 
> 赞同：2
> 
> 时间：2012-07-24T09:38:34.650
> 
> 标签：jquery, events, click

我在按钮上应用了点击事件并显示了一个 div。我还在 body 标签上应用了 onclick 事件来隐藏该 div。但是当我点击也在 body 中的按钮时，然后点击按钮调用和 div 显示的点击功能。同时，body 调用的 onclick 事件和 div 隐藏。

我想在单击按钮时显示 div 并在单击任何其他位置时将其隐藏。

任何人都可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:51:19.003

使用[**event.stopPropagation()**](http://api.jquery.com/event.stopPropagation/)防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

**jQuery**

```
$('button').click(function(){
    alert('show');
    $('div').show();
    event.stopPropagation(); // <<<<<<<<
});

$('body').click(function(){
    $('div').hide();
    alert('hide');
}) 
```

见演示：http: [//jsfiddle.net/MX4xA/](http://jsfiddle.net/MX4xA/)

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:44:38.667

只是一个简单的例子。未经测试。除非您提供更多信息，否则无法提供更多信息。

HTML：

```
<body>
   <div id="element">Show / hide this</div>
   <div id="button">Click me!</div>
</body> 
```

JS：

```
$(document).ready(function() {
    // Click event on body hide the element
    $("body").click(function() {
        $("#element").hide("fast");
    });

    // Click event on button show the element
    $("#button").click(function() {
        $("#element").show("fast");
        event.stopPropagation();
    });
} 
```

根据[artwl](https://stackoverflow.com/users/572504/artwl)的回答，您将希望使用它[`event.stopPropagation()`](http://api.jquery.com/event.stopPropagation/)来防止事件冒泡 DOM 树。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:25:31.817

在这里，我已经为上述问题完成了完整的垃圾箱。

**演示：** [http ://codebins.com/bin/4ldqp9s](http://codebins.com/bin/4ldqp9s)

每当您使用语句 event.stopPropagation(); 在 jquery 函数中，您必须将事件变量定义为函数参数，然后它将被视为事件对象变量并且它工作正常。

**HTML：**

```
<div id="panel">
  <div id="box">
    Div To be Hide/Show
  </div>
  <br/>
  <input type="button" id="btn1" name="btn1" value="Show Div"/>
</div> 
```

**CSS：**

```
#box{
  height:50px;
  width:200px;
  background:#55a1dc;
  vertical-align:middle;
  text-align:center;
  border:1px solid #334499;
  display:none;
} 
```

**查询：**

```
$(document).ready(function() {
    // Click event on body hide the element
    $("body").click(function(event) {
        $("#box").hide(600);
        event.stopPropagation();
    });

    // Click event on button show the element
    $("#btn1").click(function(event) {
        $("#box").show(600);
        event.stopPropagation();
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9s](http://codebins.com/bin/4ldqp9s)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T09:47:36.060

```
$(function(){
    $("body").click(function(){
        $("#divID").hide();
    });
    $("#btnShow").click(function(event){
        $("#divID").show();
        event.stopPropagation();
    });
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T09:47:19.640

You can try something below -

```
$('body.aClass').click(function(){
    $('#divId').hide(); 
    $(this).removeClass('aClass'); 
});
$('button').click(function(){ 
    $('#divId').show(); 
    $('body').addClass('aClass'); 
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-11T08:34:37.157

```
<script>
$(document).ready(function(){
 $("body").click(function(){
        $("#effect").hide();
    });

  $("#button").click(function(){
    $("#effect").toggle();
    event.stopPropagation();
  });

   $( "#effect" ).hide();
});
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-03T03:03:42.133

点击body做一些除了特定div之外的事情

```
$(document).on('click', function (event) {
  // ... clicked on the 'body', but not inside of #menu
});
$('#menu').on('click', function (event) {
  event.stopPropagation();
}); 
```

# web-services - 如何设置 Apache Web 服务器以在两个 Tomcat 上集群 Web 服务

> ID：11628102
> 
> 赞同：0
> 
> 时间：2012-07-24T09:38:34.553
> 
> 标签：web-services, apache, axis2, tomcat7

我正在尝试设置一个 Apache Web 服务器，以便在两个 Tomcat 服务器上平衡客户端的请求。对于 Web 服务，我使用 Axis2。它部署在两个 Tomcat 上。当我调用 Web 服务时，总是只有一个服务器应答，尽管集群已经建立。我使用[了本](http://jee-bpel-soa.blogspot.de/2009/07/apache-tomcat-clustering-load-balancing.html)教程 Axis2 1.6.1、Tomcat 7、Apache Web Server 2.2，并在 Windows 32 位系统上运行它。如何平衡两个 Tomcat 上的客户端请求？它可能与 Web 服务器的代理配置有关，但这只是一个想法。如果您需要截图或其他，请告诉我。对不起我的德国口音:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:06:09.897

通常使用负载平衡（集群），一台服务器将首先回答 - 哪一台将由负载平衡器（代理）在其配置中决定。负载平衡器（代理）通常会查询所有集群服务器，直到找到一个不太忙的服务器。为了测试集群环境，您必须模拟（或创建）高负载，或者您可以“减慢”（或完全停止）其中一台服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:53:21.650

好的，现在可以了。这是axis2.xml文件中的配置问题，我的IP错误。现在我在每个实例上都有以下配置：

```
 <!-- The host name or IP address of this member -->
    <parameter name="localMemberHost">127.0.0.1</parameter> 
```

同样重要的是 Tomcat 实例的 server.xml 文件。此处每个实例的 Shutdown 端口必须不同：

实例 1：

```
 <Server port="8005" shutdown="SHUTDOWN"> 
```

实例 2：

```
 <Server port="8015" shutdown="SHUTDOWN"> 
```

连接器端口也必须不同：

实例 1：

```
 <!-- Define an AJP 1.3 Connector on port 8009 -->
        <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" /> 
```

实例 2：

```
 <!-- Define an AJP 1.3 Connector on port 8009 -->
        <Connector port="8010" protocol="AJP/1.3" redirectPort="8443" /> 
```

然后我只是在 Apache Webserver 的 httpd.conf 文件中设置这些调整，如下所示：

```
 BalancerMember ajp://127.0.0.1:8009 min=1 max=1 route=node1 loadfactor=1
        BalancerMember ajp://127.0.0.1:8010 min=1 max=1 route=node2 loadfactor=1 
```

现在我的集群工作正常。有时您必须返回一些步骤才能了解问题所在。

# apache-flex - 包含 itemrenderer 的 flex 数据网格排序

> ID：11628109
> 
> 赞同：2
> 
> 时间：2012-07-24T09:39:09.077
> 
> 标签：apache-flex, sorting, datagrid, itemrenderer

我是flex的新手，我可以向任何可以建议的人提出一些问题。

我有用于监控 CPU 状态的网格，它看起来像这样

中央处理器 | CPU 差异
--------------
5.9 | +0.2 ^
4.0 | -0.6 v
12.7| -1.5 伏

`^ , v`上图中的代表`[s:itemrenderer]`

问题是“CPU差异”列无法正常排序，所以我使用sortCompareFunction来解决这个问题

```
public static function compareCPU(typeOne:Object, typeTwo:Object ,grid:Object):int
{
  return ObjectUtil.numericCompare(Number(typeOne.cpu), Number(typeTwo.cpu) );
}
public static function compareCPUdif(typeOne:Object, typeTwo:Object ,grid:Object):int
{
  return ObjectUtil.numericCompare(Number(typeOne.cpu_dif), Number(typeTwo.cpu_dif) );
} 
```

和

```
<s:GridColumn headerText="Cpu%" dataField="cpu" sortCompareFunction="compareCPU"/>
<s:GridColumn width="90" headerText="Cpu% Dif"  sortCompareFunction="compareCPUdif">
  <s:itemRenderer>
    <fx:Component>
      <s:GridItemRenderer width="100%" height="100%">
        <s:HGroup width="100%" height="100%" verticalAlign="middle" horizontalAlign="left">
          <s:HGroup width="50%" paddingLeft="5" horizontalAlign="left">
            <s:Label text="{data.cpu_dif}"/>
          </s:HGroup>    
          <s:HGroup  width="50%" paddingRight="5" horizontalAlign="right">
            <mx:Image source="{outerDocument.statusArrow.getItemAt(data.pic)as String}"/>
          </s:HGroup>
        </s:HGroup>
      </s:GridItemRenderer>
    </fx:Component>
  </s:itemRenderer>
</s:GridColumn> 
```

看起来很奇怪，它可以工作一半，它们只能以一种方式正确排序（升序排序）
当我再次单击它时，没有响应。

你能有什么解决这个问题的办法吗？
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T11:28:38.683

它可能将 '+' 和 '-' 字符视为 .. 好。字符而不是数学符号。

获取排序提供给您的对象，自行将它们转换为数字，然后应用`numericCompare`.

# sql-server-2008 - 将数据插入 3 个表的存储过程。不工作。

> ID：11628110
> 
> 赞同：0
> 
> 时间：2012-07-24T09:39:11.027
> 
> 标签：sql-server-2008

我有3张桌子-

```
1\. Country (CountryName, CID (PK- AutoIncrement))
2\. State (SID(PK- AutoIncrement), StateName, CID (FK to Country)
3\. City (CityName, CID, SID (FK to State) 
```

现在我只需要将名称插入到 CountryName、StateName 和 CityName 的三个表中。ID 需要更新。

```
Create PROCEDURE sp_place(
    @CountryName char(50),
    @StateName  varchar(50),
    @CityName   nchar(20)
    )
AS
DECLARE @CountryID int, @StateID int, @CityID int;

Set NOCOUNT OFF

BEGIN TRANSACTION

INSERT INTO dbo.Country VALUES (@CountryName);
SET @CountryID = SCOPE_IDENTITY();

IF @@ERROR <> 0 
BEGIN     
ROLLBACK     
RETURN 
END 

Insert into dbo.State VALUES (@StateName, @CountryID);
SET @StateID = SCOPE_IDENTITY();
IF @@ERROR <> 0 
BEGIN     
ROLLBACK     
RETURN 
END 

Insert into dbo.City VALUES (@CityName, @StateID);
SET @CityID= SCOPE_IDENTITY();

Commit 
```

当我两次输入国家/地区时，该值不应更改。例如：如果我进入印度 CountryID=1 的值，当我再次进入印度时，CountryID 的值不应该增加。

我是怎么做到的？我的 SP 每次插入都会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:49:19.847

您可以检查该国家/地区是否已存在并检索 countryID

```
IF NOT EXISTS(Select 1 FROM Country Where CountryName=@Country)
BEGIN
    INSERT INTO dbo.Country VALUES (@CountryName);
    SET @CountryID = SCOPE_IDENTITY();
END
ELSE
    Select @CountryID = CountryID From Country Where CountryName=@Country 
```

如果需要`State`，您可以执行相同的操作`City`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:44:01.480

```
Hello try with this syntax

IF EXISTS (SELECT * FROM Country WHERE CountryName= @CountryName)
BEGIN
    UPDATE dbo.Country
    SET CountryName = @CountryName
    WHERE   CountryId = (SELECT CountryId FROM dbo.Country WHERE CountryName= @CountryName);
END
ELSE
BEGIN
   INSERT INTO dbo.Country(CountryName) VALUES (@CountryName);

END

-- For the identity you must just add identity to your column in your creation script 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:40:12.197

你需要`MERGE`语法

[http://technet.microsoft.com/en-us/library/bb510625.aspx](http://technet.microsoft.com/en-us/library/bb510625.aspx)

或在插入之前手动检查（即：使用`IF EXISTS (...)`）是否存在国家/地区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:43:29.483

为什么不在 CountryName 列上设置[唯一约束](http://www.w3schools.com/sql/sql_unique.asp)，根本不允许您插入重复的国家

# shell - 在一行上组合两个命令

> ID：11628117
> 
> 赞同：0
> 
> 时间：2012-07-24T09:39:35.853
> 
> 标签：shell, unix, sed, replace, cut

有什么办法可以结合这两个命令：

```
sed -i 's/test=.*$/test=NEXTCOMMAND/' filename.cfg

tail -1 file2.txt | cut -f 7- 
```

变成这样的东西：

```
sed -i 's/test=.*$/test=`tail -1 file2.txt | cut -f 7-/`' filename.cfg 
```

不分配

```
"tail -1 file2.txt | cut -f 7-" 
```

到一个变量。我的问题是，如果我能以某种方式将提到的命令包装成正确的命令？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:41:27.470

您可以尝试将所有内容都放在一个脚本中，然后运行一个脚本文件来一次执行所有命令。

用 bash 脚本试试，看看会发生什么： [http](http://www.linfo.org/create_shell_1.html) ://www.linfo.org/create_shell_1.html （更多信息）

# three.js - 射线与动态几何相交平面返回空数组

> ID：11628121
> 
> 赞同：0
> 
> 时间：2012-07-24T09:39:52.247
> 
> 标签：three.js, raytracing, intersect, plane

*** 解决了 ***

这不是关于 0,0,0 或失真。这非常奇怪，但我发现计算几何作为球体有效！（即使在瓷砖角落，你应该认为球体不会覆盖它）

[http://threejs.org/docs/#Reference/Core/Geometry](http://threejs.org/docs/#Reference/Core/Geometry)

计算边界球（）；

问题描述 如下。

嘿，我正在为我的投资组合网站构建一个 webgl 墙，我需要射线交叉点来了解用户何时将鼠标悬停在墙上以及何时单击他们正在单击的平面，以便我可以将它们重定向到正确的项目。

[http://www.martinlindelof.com](http://www.martinlindelof.com)

我所做的是在 xyz(0,0,0) 上添加所有平面，然后我使用动态几何将它们的顶点放置在受排斥粒子影响的点网格上（使用 traer）

现在，当我进行光线相交（使用threejs r49 中的示例）时，我得到一个空数组，没有任何命中。

这可能是因为所有平面的原点都在 0,0,0 中。我应该在每一帧上不仅移动顶点而且移动整个平面吗？

或者是别的东西。

（面法线似乎指向正确的方向，我看到平面上的纹理并且它没有倒置，如果它是双面平面的背面背面。猜测它不是默认情况下在创建平面时在three.js )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:39:05.200

Ray 在对象位置 0,0,0 时遇到了问题（因为某处会被位置除以导致不可除）。尝试另一个姿势。

# php - 检索文件夹中的文件名，SSH

> ID：11628123
> 
> 赞同：0
> 
> 时间：2012-07-24T09:39:57.127
> 
> 标签：php, file, ftp

我正在尝试找到一种方法来检索我的 FTP 中特定文件夹中所有文件的名称。

我只有 ssh 访问我的 ftp。(SFTP) 所以，php 的 ftp 函数对我不起作用。

例如，我想检索我的文件夹 /var/www/test/ 中所有文件的所有名称。

有任何想法吗？

PS：请停止投票，我现在不能再问更多问题了^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:42:03.743

取自手册的示例

```
<?php
$conn_id = ftp_connect($ftp_server);
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
$contents = ftp_nlist($conn_id, "."); 
```

[`ftp_nlist()`](http://php.net/ftp-nlist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:41:33.050

[http://nl3.php.net/manual/en/function.ftp-nlist.php](http://nl3.php.net/manual/en/function.ftp-nlist.php)

看看上面的链接。应该够用

# c - 将十六进制字符串转换为长字符串

> ID：11628124
> 
> 赞同：2
> 
> 时间：2012-07-24T09:39:58.250
> 
> 标签：c, hex, type-conversion, integer-overflow, strtol

我正在尝试在 32 位机器上进行十六进制到整数的转换。这是我正在测试的代码，

```
int main(int argc,char **argv)
{
    char *hexstring = "0xffff1234";
    long int n;

    fprintf(stdout, "Conversion results of string: %s\n", hexstring);
    n = strtol(hexstring, (char**)0, 0); /* same as base = 16 */
    fprintf(stdout, "strtol = %ld\n", n);
    n = sscanf(hexstring, "%x", &n);
    fprintf(stdout, "sscanf = %ld\n", n);
    n = atol(hexstring);
    fprintf(stdout, "atol = %ld\n", n);
    fgetc(stdin);

    return 0;
  } 
```

这就是我得到的：

```
 strtol = 2147483647 /* = 0x7fffffff -> overflow!! */
 sscanf = 1 /* nevermind */
 atol = 0   /* nevermind */ 
```

如您所见，使用 strtol 时出现溢出（我还检查了 errno），尽管我希望不会发生任何事情，因为 0xffff1234 是一个有效的 32 位整数值。我要么期望 4294906420 要么 -60876

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T09:47:13.400

If you don't want the overflow effect, don't use the signed variant of the function. Use `strtoul()` instead.

With the following code:

```
#include <stdio.h>
int main(int argc,char **argv) {
    char *hexstring = "0xffff1234";
    long sn;
    unsigned long un;

    fprintf(stdout, "Conversion results of string: %s\n", hexstring);

    sn = strtoul(hexstring, (char**)0, 0);
    fprintf(stdout, "strtoul   signed = %ld\n", sn);

    un = strtoul(hexstring, (char**)0, 0);
    fprintf(stdout, "strtoul unsigned = %lu\n", un);

    return 0;
} 
```

I get:

```
Conversion results of string: 0xffff1234
strtoul   signed = -60876
strtoul unsigned = 4294906420 
```

You cannot control this when calling `strtol()` and its brethren since the behaviour is *within* those functions. The standard has this to say:

> The strtol, strtoll, strtoul, and strtoull functions return the converted value, if any. If no conversion could be performed, zero is returned. If the correct value is outside the range of representable values, LONG_MIN, LONG_MAX, LLONG_MIN, LLONG_MAX, ULONG_MAX, or ULLONG_MAX is returned (according to the return type and sign of the value, if any), and the value of the macro ERANGE is stored in errno.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T10:08:06.003

的最小范围`long`是 -2147483647 到 2147483647。`long`您的实现范围可能是 -2147483648 到 2147483647。

的定义`strtol()`表示如果转换后的值超出 的范围`long`，`LONG_MIN`或者`LONG_MAX`根据转换后的值的符号返回，并`ERANGE`存储在 中`errno`。在这种情况下，转换后的值`0xffff1234`超出范围 - 它大于`LONG_MAX`，因此`LONG_MAX`返回。

顺便说一句，您的调用是用 的返回值`sscanf()`覆盖转换后的值，即 1 表示有 1 次成功转换。`n``sscanf()`

# c# - C# VS 错误：类不包含构造函数（即使在类本身中添加了一个构造函数）

> ID：11628133
> 
> 赞同：0
> 
> 时间：2012-07-24T09:40:45.833
> 
> 标签：c#, constructor

在 VS C# Express 上，运行以下代码时出现此错误：

> “myComponent.SettingsComponentAttributes”不包含带有 1 个参数的构造函数。

我尝试在类本身中添加一个构造函数，但同样的消息应用于新的构造函数：

```
public override void CreateAttributes()
{
    m_attributes = new SettingsComponentAttributes(this);
}

public SettingsComponentAttributes(SettingsComponentAttributes obj)
{
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T09:44:00.997

您的类没有声明任何构造函数，因此它相当于拥有一个无参数构造函数：

```
public SettingsComponentAttributes()
{
} 
```

您正在尝试将参数 ( `this`) 传递给构造函数——这是行不通的。您需要更改构造函数调用，或声明适当的构造函数。

您*还*应该仔细查看错误消息并找出您需要在 Stack Overflow 上提问的原因。哪一点信息对你来说不是很清楚？修改您的 C# 知识的这方面。理解错误消息是成为一名优秀开发人员的一个非常重要的部分，这一点相当清楚：

*   您正在尝试使用带有 1 个参数的构造函数
*   不存在这样的构造函数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T09:43:47.747

默认构造函数是无参数的，所以如果你想创建一个接受一个参数的构造函数，你必须自己创建它

像这样的东西

```
public class SettingsComponentAttributes : GH_ComponentAttributes
{
    public override void CreateAttributes()
    {
      m_attributes = new SettingsComponentAttributes(this);
    }

    public SettingsComponentAttributes(SettingsComponentAttributes obj)
    {
       // Do your fancy work here
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:43:55.490

您需要创建一个接受 1 个参数的类构造函数，例如：

```
 public SettingsComponentAttributes(SettingsComponentAttributes other)
    {
        // Initialise.
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:30:09.553

你没有一个带 1 个参数的构造函数

```
public SettingsComponentAttributes(int i) 
```

# java - CTabFolder 布局控件不呈现

> ID：11628137
> 
> 赞同：0
> 
> 时间：2012-07-24T09:40:59.407
> 
> 标签：java, swt

我在 SWT 的 TabFolder 下创建了两个展开栏。我将选项卡文件夹的布局设置为 FillLayout(SWT.HORIZONTAL)。它在选项卡文件夹中显示了两个展开栏。但是，当我将选项卡文件夹更改为具有相同布局的 CTabFolder 时，它不会显示 CTabFolder 下的任何扩展栏。可能是什么问题？我需要为此设置任何参数吗？请参阅我下面的 TabFolder 和 CTabFolder 代码。

**TabFolder 的代码：**

```
public class Snippet223 {

    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());
        shell.setText("ExpandBar Example");
        final TabFolder folder = new TabFolder(shell, SWT.BORDER);
        folder.setLayout(new FillLayout(SWT.HORIZONTAL));
        ExpandBar bar = new ExpandBar(folder, SWT.V_SCROLL);
        ExpandBar bar1 = new ExpandBar(folder, SWT.V_SCROLL);
        Image image = display.getSystemImage(SWT.ICON_QUESTION);
        // First item
        createContentsForExpandableBar(bar, image);
        createContentsForExpandableBar(bar1, image);
        shell.setSize(400, 350);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }

    private static void createContentsForExpandableBar(ExpandBar bar,
            Image image) {
        Composite composite = new Composite(bar, SWT.NONE);
        GridLayout layout = new GridLayout();
        layout.marginLeft = layout.marginTop = layout.marginRight = layout.marginBottom = 10;
        layout.verticalSpacing = 10;
        composite.setLayout(layout);
        Button button = new Button(composite, SWT.PUSH);
        button.setText("SWT.PUSH");
        button = new Button(composite, SWT.RADIO);
        button.setText("SWT.RADIO");
        button = new Button(composite, SWT.CHECK);
        button.setText("SWT.CHECK");
        button = new Button(composite, SWT.TOGGLE);
        button.setText("SWT.TOGGLE");
        ExpandItem item0 = new ExpandItem(bar, SWT.NONE, 0);
        item0.setText("What is your favorite button");
        item0.setHeight(composite.computeSize(SWT.DEFAULT, SWT.DEFAULT).y);
        item0.setControl(composite);
        item0.setImage(image);
    }

} 
```

**CTabFolder 的代码：**

```
public class Snippet223 {

    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());
        shell.setText("ExpandBar Example");
        final CTabFolder folder = new CTabFolder(shell, SWT.BORDER);
        folder.setLayout(new FillLayout(SWT.HORIZONTAL));
        ExpandBar bar = new ExpandBar(folder, SWT.V_SCROLL);
        ExpandBar bar1 = new ExpandBar(folder, SWT.V_SCROLL);
        Image image = display.getSystemImage(SWT.ICON_QUESTION);
        // First item
        createContentsForExpandableBar(bar, image);
        createContentsForExpandableBar(bar1, image);
        shell.setSize(400, 350);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }

    private static void createContentsForExpandableBar(ExpandBar bar,
            Image image) {
        Composite composite = new Composite(bar, SWT.NONE);
        GridLayout layout = new GridLayout();
        layout.marginLeft = layout.marginTop = layout.marginRight = layout.marginBottom = 10;
        layout.verticalSpacing = 10;
        composite.setLayout(layout);
        Button button = new Button(composite, SWT.PUSH);
        button.setText("SWT.PUSH");
        button = new Button(composite, SWT.RADIO);
        button.setText("SWT.RADIO");
        button = new Button(composite, SWT.CHECK);
        button.setText("SWT.CHECK");
        button = new Button(composite, SWT.TOGGLE);
        button.setText("SWT.TOGGLE");
        ExpandItem item0 = new ExpandItem(bar, SWT.NONE, 0);
        item0.setText("What is your favorite button");
        item0.setHeight(composite.computeSize(SWT.DEFAULT, SWT.DEFAULT).y);
        item0.setControl(composite);
        item0.setImage(image);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:57:42.480

您需要在 TabFolder/CTabFolder 下创建一个 TabItem/CTabItem 并将内容添加到其中。您不应该在选项卡文件夹本身上设置布局。来自 CTabFolder 的 JavaDoc：

> 请注意，尽管此类是 的子类`Composite`，但在其上设置布局是没有意义的。

# django - 避免在 Django 站点上进行 POST 伪造

> ID：11628139
> 
> 赞同：0
> 
> 时间：2012-07-24T09:41:03.913
> 
> 标签：django, django-forms, security, csrf, man-in-the-middle

我正在尝试一种方法来了解我的网站用户的特定 Twitter 身份，即使他们没有登录。并且希望社区的帮助，以找出我可以如何减少冒充的可能性。

主要思想是用户来到主页，填写表单，然后单击“tweet this”按钮作为提交表单的一种方式。这会打开一个弹出窗口，用户会在其中看到一条预先填写的消息：“我刚刚提交了此表单”并在推特上发布。此弹出窗口位于 twitter.com 上。这里不涉及oauth。推文完成后，推特将刚刚创建的推文的 id 发送回网页上的 javascript 回调函数。这个 javascript 函数 ajax 将表单字段以及推文 ID 发布到服务器上的处理程序。

然后，服务器获取该推文的 Twitter 信息，包括用户信息，并使用外键将表单信息保存给用户。

我要避免的是冒充者来到页面，用垃圾填写表单，然后手动将包含推文 ID 的表单发布到来自另一个用户的不相关推文。

我正在使用的 Django 有一个叫做 CSRF 令牌的东西，可以避免模仿者在不加载页面的情况下进行 POST 调用。但我不确定这是否也会阻止加载页面（并查看 csrf 令牌）的用户伪造 POST。

我要避免的主要事情是让人们将不属于他们的 twitter id 与他们发布的 for 相关联。

期待您提出一些创造性的方法来解决这个问题或戳破我的想法。

# android - android spinner第一个元素列表

> ID：11628157
> 
> 赞同：0
> 
> 时间：2012-07-24T09:42:11.540
> 
> 标签：android, spinner

我有以下代码：

```
spin.setAdapter(new ArrayAdapter<String>(Activity.this,
                                    android.R.layout.simple_spinner_item,result));
spin.setOnItemSelectedListener(new OnItemSelectedListener() {
String selected;
boolean click=false;
int currSelection =spin.getLastVisiblePosition();
public void onItemSelected(
AdapterView<?> parentView,View selectedItemView, int position,long id)
{
   if ((position != 0)){
  //code here
    }
} 
```

单击列表中的**第一个元素**时，我无法检索该值。所有其余的`list elements`工作都按预期进行。

我知道问题在于 int 值位置。问题是，如果我没有那个 if 条件，那么我启动列表的每种类型都会弹出第一个元素，即使我没有单击列表中的任何项目。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:27:49.770

由于您想在单击后打印列表元素，因此使用微调器会很困难，因为默认情况下，android 会在微调器的第 0 个位置选择第一个元素，并且它将在不选择的情况下打印该元素。

为此，我建议您使用警报对话框而不是微调器。使用按钮而不是微调器和按钮的 onClick() 创建警报对话框。示例如下。

创建微调器项目的字符串数组。

```
String[] element = {Your element List};
private OnClickListener btn_Listener = new OnClickListener() {

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        AlertDialog.Builder builder = new AlertDialog.Builder(getContext());
        builder.setTitle("Set your Button Name");

            builder.setSingleChoiceItems(itemsForHindi, -1,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int item) {                             
                            alertDialog.dismiss();
                            selectedParam = element[item].toString(); // Here you can get selected ielement.                                
                        }
                    });
        }           
        alertDialog = builder.create();
        alertDialog.show();
    }
}; 
```

如果你有任何疑问可以问我。

# java - 从Java中的字母数字字符串中提取双精度值

> ID：11628159
> 
> 赞同：1
> 
> 时间：2012-07-24T09:42:18.237
> 
> 标签：java, android

我正在寻找一个可以完成标题所说的功能。

我最终编写了解析每个字符的代码，然后创建了另一个字符串**Double.parseDouble**。这引发了`StringIndexoutOfBounds`异常。这显然不是要走的路。

> 代码块在这里

```
int i = 0;
char c = q.charAt(i);
if (Character.isDigit(c)) {
    try {
        String h = "" + c;
        while (Character.isDigit(c) || c == '.') {
            if (i == (q.length() - 1)) if (Character.isDigit(q.charAt(i + 1)) || (q.charAt(i + 1) == '.')) {
                Log.i("CalcApps", "within while");
                h += q.charAt(i + 1);
            }
            i++;
            c = q.charAt(i);
        }
        result = Double.parseDouble(h);
    } catch (Exception e) {
        Log.i("MyApps", "Index is out of bounds");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:51:57.337

你会尝试这样的事情：

```
public static void main(String[] args) {
        String str = "dsde1121zszs.15szs"; 
        Double d = Double.valueOf(str.replaceAll("[^0-9\\.]", ""));
        System.out.println(d);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:49:59.550

您应该使用[DecimalFormat](http://developer.android.com/reference/java/text/DecimalFormat.html)并避免创建自己的解析器实现。有关一些示例，请参见此[问题](https://stackoverflow.com/questions/5054132/how-to-change-the-decimal-separator-of-decimalformat-from-comma-to-dot-point)。

# asp.net - 不存在的用户的投诉

> ID：11628160
> 
> 赞同：1
> 
> 时间：2012-07-24T09:42:40.230
> 
> 标签：asp.net, sql-server, sql-server-2008, exception-handling, database-connection

我已将我的应用程序池的用户指定为 SERVER4\IUSR_SERVER4。然后我将此用户添加到 SQL Server。但是当我尝试连接到数据库时，出现以下错误：

```
Server Error in '/BSHHD' Application.
Cannot open user default database. Login failed.
Login failed for user 'SERVER4\Administrator'. 
```

让我发疯的是没有名为 SERVER4\Administrator 的用户。为了能够从我的网站正确连接到此 SQL Server 数据库，我需要做什么？

PS我认为这与会员身份验证有关。现在我需要了解 Membership 如何访问 SQL Server 以及登录凭据的指定位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:43:15.200

问题是，应用程序池用户不一定是您用来连接到 MSSQL 的用户（正如评论中的一个人已经说明的那样）。在看到您的连接字符串后，可能就是这种情况，也许，只是也许，问题不在于用户，而在于默认数据库。

我过去遇到过这个错误：尝试将您在连接字符串（职员）默认数据库中使用的用户设置为其他内容。当您之前为用户设置了默认数据库并且现在该数据库不再存在或出现一些问题时，此错误很常见。

您可以使用以下方式更改用户的默认数据库：

```
Exec sp_defaultdb @loginame='clerk', @defdb='dok' 
```

您也可以使用类似的东西，但我从未使用过它：

```
ALTER LOGIN SQLLogin WITH DEFAULT_DATABASE = AvailDBName 
```

此外，无需将集成安全设置为 false，因为它已经是默认值。我希望这会有所帮助=)

# sencha-touch - sencha touch：尝试添加一个空项目作为具有 itemId/id 的 Container 的子项：ext-comp-1050

> ID：11628161
> 
> 赞同：1
> 
> 时间：2012-07-24T09:42:45.100
> 
> 标签：sencha-touch

我是 Sencha Touch 的新手。我有一个必须改进的现有 Web 应用程序。

我创建了一个新面板并尝试将项目添加到现有面板，但尝试将 NULL 元素添加为 Container itemId/id 的子项时出现错误：ext-comp-1050

我的代码如下

```
Myapp.views.mainView = new Ext.extend(Ext.Panel, {
   initComponent: function() {
      this.items = [
          Myapp.views.welcomePanel, // new panel I am trying to add
          Myapp.views.settingsView,
          Myapp.views.placePopup,
          Myapp.views.newsPanel
      ];
      this.dockedItems = [];
      this.cardAnimation='slide';
      this.html = null;
      this.fullscreen = true;
      this.layout = 'card';
      this.align = 'stretch';
      Myapp.views.mainView.superclass.initComponent.call(this); 
  }
}); 
```

欢迎面板的代码是

```
Myapp.views.welcomePanel = new Ext.Panel({
    frame:true,
    autoHeight:true,
    collapsible:true,
    layout:'card',
    items:[
       Myapp.views.mapPlaces,
       Myapp.views.listOfPlaces
    ],
    dockedItems:[
       Myapp.views.mainToolBar,
       Myapp.views.changerPanelsToolbar
    ]
}); 
```

`Myapp.views.mapPlaces, Myapp.views.listOfPlaces, Myapp.views.mainToolBar, Myapp.views.changerPanelsToolbar`

已经存在并且可以正常工作

请帮忙

# java - JSF 2.0： 和默认转换器

> ID：11628169
> 
> 赞同：3
> 
> 时间：2012-07-24T09:43:26.690
> 
> 标签：java, jsf, datetime, jsf-2, converter

我想`javax.faces.convert.DateTimeConverter`为视图参数使用标准 JSF 转换器 ()

从文档中：

> 您可以使用组件标签的转换器属性按类或按其 ID 引用转换器。ID 在应用程序配置资源文件中定义

然后我尝试了：

```
<f:viewParam
    name        = "rangeStartCreationDate"
    value       = "#{doiListController.model.rangeStartCreationDate}"
    converter   = "javax.faces.convert.DateTimeConverter"
/> 
```

但我明白了

```
javax.faces.FacesException: Expression Error: Named Object: javax.faces.convert.DateTimeConverter not found. 
```

然后我尝试了第二个选项（按 ID）。我在`faces-config.xml`

```
<converter> 
    <converter-id>DateTimeConverter</converter-id> 
    <converter-class>javax.faces.convert.DateTimeConverter</converter-class> 
</converter> 
```

并使用了身份证

```
<f:viewParam
    name        = "rangeStartCreationDate"
    value       = "#{doiListController.model.rangeStartCreationDate}"
    converterId = "DateTimeConverter"
/> 
```

在这种情况下，我得到

```
Conversion Error setting value 'Tue Jul 24 00:00:00 CEST 2012' for 'null Converter'. 
```

有没有办法让 JSF 实例化转换器或者我必须手动实例化它（在某些 bean 中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:38:40.313

转换器 id 是`javax.faces.DateTime`，所以试试

```
<f:viewParam
  converter="javax.faces.DateTime"
... /> 
```

# android - 将 ArrayAdapter 转换为 CursorAdapter 以在 SearchView 中使用

> ID：11628172
> 
> 赞同：22
> 
> 时间：2012-07-24T09:43:45.067
> 
> 标签：android, android-actionbar, simplecursoradapter, autocompletetextview, android-cursoradapter

如何将`ArrayAdapter<String>`静态数据转换`CursorAdapter`为使用 Suggestion Listener 的`SearchView`？我已经`ArrayAdapter<String>`从静态数据 ( `allString`)

```
ArrayAdapter<String> searchAdapter = new ArrayAdapter<String>(context, R.layout.listitem, allString); 
```

我将它用于`MultiAutoCompleteTextView`API 级别低于 11 的设备上运行良好

```
MultiAutoCompleteTextView findTextView.setAdapter(searchAdapter); 
```

但是，我的目标 API 级别为 11，对于 API>10，我使用`ActionBar`我希望在其中使用 SearchView 的一个。

这是我尝试过的：它确实显示`ActionBar`了嵌入的`SearchView`，但没有像在`MultiAutoCompleteTextView`.

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {     
        MenuInflater inflater = getMenuInflater();

         if (android.os.Build.VERSION.SDK_INT > 10){
             inflater.inflate(R.menu.menu11, menu);
             searchView = (SearchView) menu.findItem(R.id.MENU_SEARCH).getActionView();
             int[] to = {0};
             CursorAdapter cursorAdapter = new SimpleCursorAdapter(context, R.layout.listitem, null, allBusStopString, to);
             searchView.setSuggestionsAdapter(cursorAdapter);
             searchView.setOnSuggestionListener(new OnSuggestionListener() {

                @Override
                public boolean onSuggestionClick(int position) {
                    String selectedItem = (String)cursorAdapter.getItem(position);
                    Log.v("search view", selectedItem);
                    return false;
                }

                @Override
                public boolean onSuggestionSelect(int position) {
                    return false;
                }
             });  
         }else{
             inflater.inflate(R.menu.menu, menu);
         }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-24T10:04:08.220

奇怪的是`SearchView.setSuggestionsAdapter`只接受 CursorAdapter 。

您可以创建[MatrixCursor](http://developer.android.com/reference/android/database/MatrixCursor.html)并用字符串数组中的数据填充它。我希望你有少量的数据收集。

然后将光标传递给 CursorAdapter。

```
String[] columnNames = {"_id","text"}
MatrixCursor cursor = new MatrixCursor(columnNames);
String[] array = getResources().getStringArray(R.array.allStrings); //if strings are in resources
String[] temp = new String[2];
int id = 0;
for(String item : array){
    temp[0] = Integer.toString(id++);
        temp[1] = item;
    cursor.addRow(temp);
}               
String[] from = {"text"}; 
int[] to = {R.id.name_entry};
busStopCursorAdapter = new SimpleCursorAdapter(context, R.layout.listentry, cursor, from, to); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-12-14T18:00:49.393

我面临着类似的问题。您可以使用只接受**CursorAdapter的****SearchView.setSuggestionsAdapter()**。另一方面......有什么意义？如果您使用标准，那么它包含 SearchAutoComplete，它在里面扩展了 AppCompatAutoCompleteTextView。以下代码对我有用：**`<android.support.v7.widget.SearchView />`**

 **```
List<String> items = Lists.newArrayList(new String[] {"aaaaa", "bbbbb", "ccccc", "ddddd"});
SearchView searchView = (SearchView) findViewById(R.id.autocomplete_searchview);
SearchView.SearchAutoComplete searchSrcTextView = (SearchView.SearchAutoComplete) findViewById(android.support.v7.appcompat.R.id.search_src_text);
searchSrcTextView.setThreshold(1);
searchSrcTextView.setAdapter(new SuggestionAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, items));
searchSrcTextView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        return;
    }
}); 
```

和以下适配器代码：

```
public class SuggestionAdapter<T> extends ArrayAdapter<T> {

    private List<T> items;
    private List<T> filteredItems;
    private ArrayFilter mFilter;

    public SuggestionAdapter(Context context, @LayoutRes int resource, @NonNull List<T> objects) {
        super(context, resource, Lists.<T>newArrayList());
        this.items = objects;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public T getItem(int position) {
        return items.get(position);
    }

    @Override
    public Filter getFilter() {
        if (mFilter == null) {
            mFilter = new ArrayFilter();
        }
        return mFilter;
    }

    public int getCount() {
        //todo: change to pattern-size
        return items.size();
    }

    private class ArrayFilter extends Filter {
        @Override
        protected FilterResults performFiltering(CharSequence prefix) {
            FilterResults results = new FilterResults();

            //custom-filtering of results
            results.values = items;
            results.count = items.size();

            return results;
        }

        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            filteredItems = (List<T>) results.values;
            if (results.count > 0) {
                notifyDataSetChanged();
            } else {
                notifyDataSetInvalidated();
            }
        }
    }
} 
```**

# ios - 在 iOS 上同时下载多少是有意义的

> ID：11628173
> 
> 赞同：1
> 
> 时间：2012-07-24T09:43:44.273
> 
> 标签：ios, networking, afnetworking

我有一个 iOS 应用程序，它在启动时同步一定数量的资产。我正在使用 AFNetworking 并设置一个 NSOperationQueue 来处理所有下载。我想知道，有多少同时下载是有意义的。如果我同时有很多网络性能会下降，是否有限制？目前我一次最多下载 5 次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:49:55.913

这取决于几个因素：

*   网络速度和延迟是多少？
*   请求和响应的数据大小是多少？
*   服务器处理请求需要多长时间？
*   客户端处理响应需要多长时间？
*   服务器可以有效地满足多少并行请求？
*   有多少用户会同时发出请求？
*   目标设备的最小速度和内存大小是多少？

对于中小型应用程序，限制因素通常是设备的网络延迟，但您的情况可能并非如此。最后，您必须测试并找出最有效的折衷方案。5 是一个很好的开始数字。您可能希望通过可用的网络连接（WLAN 或 3G 甚至更慢...）来设置并发下载的数量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T12:16:06.980

使用 NSOperationQueues 的美妙之处在于它们与底层操作系统（iOS 或 OSX）紧密相关。队列根据许多因素决定运行多少操作，包括可用内存、系统负载等。

您不应该尝试对系统进行第二次猜测并限制自己。排队尽可能多的操作，让操作系统处理它。我有一个 iPhone 应用程序，当它必须获取不同大小的图像等时，它会在队列中添加数百个操作。效果很好，UI 没有被阻塞等。

编辑：好吧，似乎在进行 NSURLConnections 和类似的网络连接时，NSOperationQueue 并没有真正关注网络使用情况。今年夏天我在 Apple 内部论坛上问过，最后被 Quinn “The Eskimo”（Apple 网络大师）告知使用 4 之类的限制。所以这个帖子在纯处理能力的意义上是正确的 - NSOperationQueue会做正确的事——但是当涉及到网络操作时，你需要设置一个限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T11:11:31.897

我会说主要取决于您的硬件。解决这个问题的最好方法是用多个案例和多个试验对其进行测试。尽量使你测试的硬件多样化（记住不要使用模拟器来测试这个！）。

实际上[，SDK 提供了一个常数，](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004592-RH2-SW12)该常数因各种约束而异。我建议您考虑使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T09:21:14.357

关于这个问题，我在一台Ipad2 IOS6.0上做了一些测试。我创建了一个对网络服务器执行 HTTP-GET 请求的小应用程序。该网络服务器将提供 60 秒的数据（为了获得有意义的结果，在我的测试中将其更改为 10 分钟后）。

对于一个 HTTP-GET 请求，它工作得非常好。然后我尝试同时执行几个 HTTP 请求，看看我可以通过 iPad 的 WIFI 连接下载多少和多快

我做了2个版本。1 个版本使用 NSOperations 和 1 个版本使用 NSThread 同步 HTTP-GET 请求。简而言之，我的第 6 个请求总是会超时。（ tcp-syn 无法访问我的 HTTP-Server ）。

## 额外信息：

NSThead 实现：

只需创建一个 for 循环并创建一个线程。这将执行同步的 HTTP 请求。

在那里我观察到我的第 6 个请求在 20 秒后超时。如果我将超时设置为 80 秒，我清楚地看到在我的第一个 http 请求结束后（60 秒后）我的第 6 个请求被启动......

NSOperation-实现：

创建一个队列并将 maxConcurrentOperations 设置为 12。将 12 个 http-request 操作添加到队列中。在这里，我还注意到第 6 个请求得到了 -1001 错误代码（意思是： timout ）。我看不到第 6 个请求的 tcp-syn。

# jquery - 列表需要双击切换一个类

> ID：11628179
> 
> 赞同：1
> 
> 时间：2012-07-24T09:44:12.307
> 
> 标签：jquery, css

请参阅此小提琴：http: **[//jsfiddle.net/toroncino/7Yag9/2/](http://jsfiddle.net/toroncino/7Yag9/2/)**

为什么如果我单击该行没有任何反应？

我需要双击以突出显示该元素。

仅当我单击右侧的选择时才有效。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:59:34.917

如果你去掉这行 CSS，只需要单击一下 :)

```
label{color:#777;padding-top:2px;display:block;} 
```

小提琴[在这里](http://jsfiddle.net/ENtk8/1/)更新。

实际上，您可以将线路留在其中，但只需删除`display:block;`它即可。

编辑：您也可以只取出`<label>`and`</label>`标签并将您的 CSS 放在`<span>`或更改`<span>text</span>`为`<label>text</label>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:00:51.887

你错过了`$`：

```
$(function() { 
```

包装`select`标签`label`无效：*_*

改变这些：

```
 <li>
        <label>
            <span>text</span>
            <select>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </label>
    </li> 
```

到：

```
 <li>
        <label>text</label>
            <select>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
    </li> 
```

[演示](http://jsfiddle.net/7Yag9/17/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:57:03.247

这是因为当您单击 时，也会触发`li`的`click`事件。`select`第一次单击应用该类，但第二次单击事件`select`（反过来又冒泡到`li`单击事件）删除该类。添加`return false`选择的`click`事件可以完成这项工作。我也更新了小提琴[http://jsfiddle.net/7Yag9/9/](http://jsfiddle.net/7Yag9/9/)。

```
$('li').on("click", function() {    
    $(this).toggleClass('sel');
});

$("select").on("click", function() {
    return false;
});​ 
```

# c# - 这个 C# 片段是什么意思？

> ID：11628180
> 
> 赞同：0
> 
> 时间：2012-07-24T09:44:13.977
> 
> 标签：c#

```
struct MyStruct : int
{
   .../...
} 
```

[MSDN](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.71%29.aspx)声明之后是已实现接口的`:`列表，但`int`对我来说这是一个非常奇怪的接口......

这可能是一种定义结构大小的方法吗？有点像位域？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T09:45:37.847

It is illegal and means nothing whatsoever.

> Error 5 Type 'int' in interface list is not an interface redacted\Program.cs 13 23 ConsoleApplication9

However! If by `int` you mean "an interface", then it means: "this is a value-type that implements an interface"

You can't, however, have an interface called `int`, since `int` is a reserved keyword. You would have to refer to that as `@int` in the C#.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:02:22.150

看起来 Struct 实际上应该说 Enum，那么它就会有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:47:33.977

这里`struct MyStruct : int`不是一个接口，所以编译器会失败

如果你有 Resharper，它会在运行构建之前通过红色下划线来警告你

因为知识 int 是[System.Int32](http://msdn.microsoft.com/en-us/library/system.int32.aspx)的别名，它是一个结构

# php - 为什么这只显示我的一条记录？

> ID：11628182
> 
> 赞同：0
> 
> 时间：2012-07-24T09:44:17.497
> 
> 标签：php, pagination

我正在尝试在我的网站上进行分页。一切都应该正常工作，但这仅显示一种产品，但应该是 8 种产品。有人知道出了什么问题吗？提前致谢。

```
else {
$query = "SELECT COUNT(*) FROM products";
$result = mysql_query($query) or die(mysql_error());
$num_rows = mysql_fetch_row($result);
$pages = new Paginator;  
$pages->items_total = $num_rows[0];  
$pages->mid_range = 9;  
$pages->paginate();  

$query = "SELECT serial, name, description, price, picture FROM products WHERE serial != '' ORDER BY serial ASC $pages->limit";
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_row($result);
{
echo '<div style="margin-bottom:10px;display:inline-block;background-color:#E3E3E3;width:190px;height:200px;"><a href="'.$_SERVER['PHP_SELF'].'?serial='.$row[0].'"><img style="padding-top:10px;padding-left:25px;width:150px;height:150px;" src="'.htmlspecialchars($row[4]).'"></a><br><div align="center"><b>'.htmlspecialchars($row[1]).'</b><br><h6>&euro;'.htmlspecialchars($row[3]).'</h6></div></div>';
};
echo '&nbsp;';
echo '<br><br><div style="margin-left:330px;">';
echo $pages->display_pages();
echo '</div>';
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:46:48.483

[`mysql_fetch_row()`](http://php.net/manual/en/function.mysql-fetch-row.php) only fetches one row at a time. You need to call it repeatedly to display all rows, like this:

```
while ($row = mysql_fetch_row($result)) {
    // handle single row
} 
```

I suggest you consider using [`mysql_fetch_array()`](http://php.net/manual/en/function.mysql-fetch-array.php) instead. Then you will not have to rely on the order of the columns anymore and your code becomes more legible: `$row[0]` becomes `$row["serial"]` etc.

Try reading the articles that @Kush linked. See [here](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php) for a PHP-specific discussion.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:50:02.793

您似乎没有正确使用[mysql_fetch_row()](http://php.net/manual/en/function.mysql-fetch-row.php)

* * *

以下代码易受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击，因为 $page->limit 似乎没有被清理

```
$query = "SELECT serial, name, description, price, picture FROM products WHERE serial != '' ORDER BY serial ASC $pages->limit"; 
```

停止使用 mysql_* 函数，因为它们已被弃用。请改用[PHP 数据库对象 (PDO)](http://php.net/manual/en/book.pdo.php)，因为 PDO 允许参数绑定，从而保护您免受 sql 注入。

[您可以在此处](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)阅读有关使用 PDO的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:46:48.890

because of this line

```
$row = mysql_fetch_row($result); 
```

should be

```
while($row = mysql_fetch_row($result)){... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:47:39.957

换行

```
$row = mysql_fetch_row($result); 
```

至

```
while ($row = mysql_fetch_row($result)) 
```

# gtk - 如何使用 GTK 开发类似 Eclipse 的界面？

> ID：11628194
> 
> 赞同：3
> 
> 时间：2012-07-24T09:45:03.163
> 
> 标签：gtk, gtkmm

我想使用 GTKMM 编写一个桌面应用程序。我希望界面由不同的面板组成，例如在 Eclipse 中，您有项目资源管理器、控制台、属性等。您应该能够拖动面板以更改它们的位置，关闭它们并弹出它们（不确定是否可以弹出Eclipse 中的面板，但您可以在 Visual Studio 中完成）。

我在这里使用面板一词，因为我不确定正确的术语是什么。我猜有些人称之为可停靠窗口。

关于如何在 GTKMM 中实现这一点的任何指示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:11:43.953

术语是“停靠”小部件，而[GDL 库](https://developer.gnome.org/gdl/stable/)是开始使用它的最简单方法。您可能已经在 Anjuta 和 Inkscape 等应用程序中看到了 GDL。文档不是那么好，但是，源代码包含一个示例应用程序，一旦你开始使用它就不是那么难了。

基本上，您将小部件添加到 a`DockItem`并将那些小部件添加到 a `Dock`。您`DockBar`在应用程序中放置了一个可以最小化停靠项目的位置。您可以将停靠“布局”保存并加载到 XML 文件中，这样用户就不必在每次启动应用程序时重新排列停靠项目。

# macos - IOKit 设备添加/删除通知 - 只触发一次？

> ID：11628195
> 
> 赞同：5
> 
> 时间：2012-07-24T09:45:09.203
> 
> 标签：macos, cocoa, iokit

我一直在尝试在添加或删除特定 USB 设备时收到通知。我已阅读“从应用程序访问硬件”文档并有一个简单的演示应用程序，主要基于该文档中提供的代码。

它在第一次添加或删除设备时工作，但在那之后我的回调永远不会被调用。我不知道为什么？谁能发现我哪里出错了？

（xcode 项目，如果你想测试） [http://monkeyfood.com/testIOKitNOtificaiton.zip](http://monkeyfood.com/testIOKitNOtificaiton.zip)

谢谢。

```
//
//  AppDelegate.m
//  testIOKitNotification
//
//  Created by Diggory Laycock on 23/07/2012.
//  Copyright (c) 2012 MonkeyFood.com. All rights reserved.
//

#import "AppDelegate.h"

@implementation AppDelegate

//          Arduino USB info
#define     matchVendorID           0x2341      
#define     matchProductID          0x0043

#pragma mark -
#pragma mark C Callback functions
#pragma mark -

void usbDeviceAppeared(void *refCon, io_iterator_t iterator){
    NSLog(@"Matching USB device appeared");
}
void usbDeviceDisappeared(void *refCon, io_iterator_t iterator){
    NSLog(@"Matching USB device disappeared");
}

@synthesize window = _window;

#pragma mark -
#pragma mark Application Methods
#pragma mark -

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    io_iterator_t newDevicesIterator;
    io_iterator_t lostDevicesIterator;

    newDevicesIterator = 0;
    lostDevicesIterator = 0;
    NSLog(@" ");

    NSMutableDictionary *matchingDict = (__bridge NSMutableDictionary *)IOServiceMatching(kIOUSBDeviceClassName);

    if (matchingDict == nil){
        NSLog(@"Could not create matching dictionary");
        return;
    }
    [matchingDict setObject:[NSNumber numberWithShort:matchVendorID] forKey:(NSString *)CFSTR(kUSBVendorID)];
    [matchingDict setObject:[NSNumber numberWithShort:matchProductID] forKey:(NSString *)CFSTR(kUSBProductID)];

    //  Add notification ports to runloop
    IONotificationPortRef notificationPort = IONotificationPortCreate(kIOMasterPortDefault);
    CFRunLoopSourceRef notificationRunLoopSource = IONotificationPortGetRunLoopSource(notificationPort);
    CFRunLoopAddSource([[NSRunLoop currentRunLoop] getCFRunLoop], notificationRunLoopSource, kCFRunLoopDefaultMode);

    kern_return_t err;
    err = IOServiceAddMatchingNotification(notificationPort, 
                                           kIOMatchedNotification, 
                                           (__bridge CFDictionaryRef)matchingDict, 
                                           usbDeviceAppeared, 
                                           (__bridge void *)self, 
                                           &newDevicesIterator);
    if (err)
    {
        NSLog(@"error adding publish notification");
    }
    [self matchingDevicesAdded: newDevicesIterator];

    NSMutableDictionary *matchingDictRemoved = (__bridge NSMutableDictionary *)IOServiceMatching(kIOUSBDeviceClassName);

    if (matchingDictRemoved == nil){
        NSLog(@"Could not create matching dictionary");
        return;
    }
    [matchingDictRemoved setObject:[NSNumber numberWithShort:matchVendorID] forKey:(NSString *)CFSTR(kUSBVendorID)];
    [matchingDictRemoved setObject:[NSNumber numberWithShort:matchProductID] forKey:(NSString *)CFSTR(kUSBProductID)];

    err = IOServiceAddMatchingNotification(notificationPort, 
                                           kIOTerminatedNotification, 
                                           (__bridge CFDictionaryRef)matchingDictRemoved, 
                                           usbDeviceDisappeared, 
                                           (__bridge void *)self, 
                                           &lostDevicesIterator);
    if (err)
    {
        NSLog(@"error adding removed notification");
    }
    [self matchingDevicesRemoved: lostDevicesIterator];

    //      CFRunLoopRun();
    //      [[NSRunLoop currentRunLoop] run];

}

#pragma mark -
#pragma mark ObjC Callback functions
#pragma mark -

- (void)matchingDevicesAdded:(io_iterator_t)devices
{
    io_object_t thisObject;
    while ( (thisObject = IOIteratorNext(devices))) {
        NSLog(@"new Matching device added ");
        IOObjectRelease(thisObject); 
    } 

}

- (void)matchingDevicesRemoved:(io_iterator_t)devices
{
    io_object_t thisObject;
    while ( (thisObject = IOIteratorNext(devices))) {
        NSLog(@"A matching device was removed ");
        IOObjectRelease(thisObject); 
    } 

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:15:56.593

我已经找出了问题所在 - 我没有对 C 回调中的迭代器做任何事情。一个愚蠢的错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T00:21:55.447

我有点晚了，因为有一个可接受的答案，但要解决这个问题，您需要在回调中迭代匹配的设备迭代器。但这样做并不是微不足道的，所以这里是实现这一点的代码，因为回调是一个 C 函数，你想将它桥接到你的 Objective C 方法。

```
void usbDeviceAppeared(void *refCon, io_iterator_t iterator){
    NSLog(@"Matching USB device appeared");
    SerialMonitor *monitor = (__bridge SerialMonitor *)refCon;
    [monitor matchingDevicesAdded:iterator];
    [monitor reload];
}

void usbDeviceDisappeared(void *refCon, io_iterator_t iterator){
    NSLog(@"Matching USB device disappeared");
    SerialMonitor *monitor = (__bridge SerialMonitor *)refCon;
    [monitor matchingDevicesRemoved:iterator];
    [monitor reload];
} 
```

`SerialMonitor`是我的 USB 设备管理器类，`reload`是一种进行适当 USB 设备初始化（获取功能报告和交换数据）的方法。

# ruby-on-rails - 在 Rails 应用程序中的控制器和视图之间共享变量

> ID：11628196
> 
> 赞同：0
> 
> 时间：2012-07-24T09:45:10.317
> 
> 标签：ruby-on-rails

在我的控制器中，我正在收集这样的数据（到哈希中）（请注意，我的`BillingAddress`应用程序中没有模型，`@billing_address`是标准的 ruby​​ 哈希

```
@billing_address = params[:billing_address] 
```

我的观点是这样的

```
<%= text_field_tag 'billing_address[phone]' %> 
```

我想显示用户输入的先前值（以防出现错误），如下所示：

```
<%= text_field_tag 'billing_address[phone]', @billing_address['phone'] %> 
```

但是，这给了我一个例外，说我正在尝试访问 nil，想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:05:28.440

我猜`params[:billing_address]`是`nil`。
如果是，请尝试分配空哈希。

```
@billing_address = params[:billing_address] || {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:26:21.293

这不是在出现错误时显示先前值的 Rails 方式。查看此[截屏视频](http://railscasts.com/episodes/211-validations-in-rails-3)，了解如何更好地处理错误。

# maven - Enable certain Maven tests by passing a command line switch

> ID：11628197
> 
> 赞同：2
> 
> 时间：2012-07-24T09:45:24.320
> 
> 标签：maven, surefire

I have a single module project that has some unit tests that require an external hardware device. I don't want these tests to execute unless I indicate that the device is available.

I feel like this is solvable using Maven properties and the SureFire exclusion/inclusion configuration, but I can't quite see how to do it. A [similar question](https://stackoverflow.com/questions/9123075/maven-how-can-i-skip-test-in-some-projects-via-command-line-options) shows how to disable/enable all the tests in a project based on a Maven property, but doesn't quite answer my issue.

In summary, I wish to identify a pattern (e.g. `**/*ResourceTest.java`) that describes the tests I don't want to run, unless I pass a Maven property to enable them.

E.g.

`mvn clean install` (*runs the standard tests, but skips device-related tests*)

`mvn -Drun.device.tests=true clean install` (*runs all the tests*)

Thanks in advance.

(*Edited to remove the misleading usage of the word "resource" > replaced with "hardware device"*).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:54:34.370

您也可以只使用 JUnit [Assume](http://junit.sourceforge.net/javadoc/org/junit/Assume.html)方法来决定（在测试内部）是否应该执行或跳过测试。

然而，恕我直言，最好的选择是将设备依赖测试“声明”为“集成测试”，并让它们由[Maven Failsafe Plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/)执行。我认为这将是没有任何配置文件“魔术”的“内置”maven 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:44:28.477

The link you provided gave the good answer.

***The right way***

Use a mix of Profile Management and Surefire Configuration inclusion / exlcusion is the right way.

You should ask yourself WHY you want to activate some tests dependings on a resource. The resource should always been in your classpath.

If not, you probably just want to activate some test manually, for some tricky reasons. In that case consider this is a bad use of Maven (how would you automate that on a distant server for instance ?)

***What you asked***

If you really really want to do that, because you have some good reasons that we are not aware of, simply use this :

This example will trigger the profile when the generated file target/generated-sources/axistools/wsdl2java/org/apache/maven is missing.

Example from Maven official doc : [http://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

```
<profiles>
  <profile>
    <activation>
      <file>
        <missing>target/generated-sources/axistools/wsdl2java/org/apache/maven</missing>
      </file>
    </activation>
    ...
  </profile>
</profiles> 
```

> As of Maven 2.0.9, the tags and could be interpolated. Supported variables are system properties like ${user.home} and environment variables like ${env.HOME}. Please note that properties and values defined in the POM itself are not available for interpolation here, e.g. the above example activator cannot use ${project.build.directory} but needs to hard-code the path target.

You could find more information here : [http://www.sonatype.com/books/mvnref-book/reference/profiles-sect-activation.html](http://www.sonatype.com/books/mvnref-book/reference/profiles-sect-activation.html)

Hope that will help. Don't hesitate to challenge my point of view with you own reasons (even legacy code ;) ) or experience

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:12:51.647

为了扩展@Jean-Rémy 的答案，我在我的项目 POM 文件中执行了以下操作：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <version>2.12</version>
      <configuration>
        <excludes>
          <exclude>${tests.to.skip}</exclude>
        </excludes>
      </configuration>
    </plugin>
  </plugins>
</build>

<profiles>
  <profile>
    <!-- This profile will be used when running tests without a device -->
    <id>default-profile</id>
    <activation>
      <activeByDefault>true</activeByDefault>
    </activation>
    <properties>
      <tests.to.skip>**/*DeviceTest.java</tests.to.skip>
    </properties>
  </profile>

  <profile>
    <id>device-profile</id>
    <activation>
      <property>
        <name>device</name>
        <value>true</value>
      </property>
    </activation>
    <properties>
      <!-- Unsure how to match nothing -->
      <tests.to.skip>NOTHING</tests.to.skip>
    </properties>
  </profile> 
```

这将创建两个配置文件，默认配置文件将排除设备测试，而“设备配置文件”将执行所有测试。

要执行设备配置文件，可以执行`mvn -Ddevice=true test`.

# c# - ExecuteNonQuery: Connection property has not been initialized

> ID：11628198
> 
> 赞同：1
> 
> 时间：2012-07-24T09:45:24.787
> 
> 标签：c#, asp.net, sql

I have this code and when I run it gives this error ExecuteNonQuery: Connection property has not been initialized. And I have sql database. its name is Cost. I have this code and when I run it gives this error ExecuteNonQuery: Connection property has not been initialized. And I have sql database. its name is Cost. My code is:

```
 namespace Accountingss
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        public SqlConnection conn;

        protected void Page_Load(object sender, EventArgs e)
        {
        }

        protected void Connect(string cmdtxt, Hashtable parameters)
        {
            conn = new SqlConnection();
            string connString = @"Data      Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Cost.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
            conn.ConnectionString = connString;
            SqlCommand cmd = new SqlCommand();
            cmd.CommandText = cmdtxt;
            cmd.Parameters.Clear();
            var ieParams = parameters.GetEnumerator();
            while (ieParams.MoveNext())
            {
                cmd.Parameters.AddWithValue(ieParams.Key.ToString(), ieParams.Value.ToString());
                //cmd.Parameters.Add(new SqlParameter(ieParams.Key.ToString(), ieParams.Value.ToString()));
            }

            conn.Open();
            cmd.ExecuteNonQuery();

            //SqlDataAdapter costdataAdpater = new SqlDataAdapter();
            //DataTable costdataTable = new DataTable(); 
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            string insert = "INSERT INTO Cost (Type, Amount) VALUES (@type,         @amount)";// +type.Text + ',' + a.Text + ")";
            var addpTA = new Hashtable();
            addpTA.Add("@type", txtType.Text);
            addpTA.Add("@amount", txtAmount.Text);
            Connect(insert, addpTA);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:49:36.730

您必须为 sql 命令分配连接，如下所示。看来你忘了这样做了。

```
cmd.Connection = conn; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T09:57:09.620

You didn't connected the command to the connection.

```
cmd.Connection = conn; 
```

And after executing the command you should close it.

```
conn.Close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:47:57.200

只需在执行之前将 SqlConnection 连接到您的 SqlCommand

```
cmd.Connection = conn; 
```

Connection 对象是将我们的命令传递给底层数据库引擎的工具。
如果我们想访问数据库，我们需要将它与我们的命令联系起来。

一个很好的快捷方式是使用此方法直接从连接创建命令

```
 SqlCommand cmd = conn.CreateCommand(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T09:48:13.213

您应该将连接传递给命令

```
SqlCommand cmd = new SqlCommand(conn); 
```

或者

```
cmd.Connection = conn; 
```

# android - Issue With Jellybean Menu button Android

> ID：11628199
> 
> 赞同：4
> 
> 时间：2012-07-24T09:45:28.830
> 
> 标签：android, menu

When I press the menu the screen button the screen fades away slowly and up pops my apparently in Jellybean. Is these issue with my code or any other stuff going on? I can't seem to find out how to change it.

Anyone know this thing?

Here is my java code with onCreateOption Menu :

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

My menu xml file "activity_main" :

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_settings"
    android:title="@string/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never" />
</menu> 
```

Thanks, Jay Patel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:38:45.287

带有硬件菜单按钮的手机不会显示三点溢出按钮。相反，当您按下硬件菜单按钮时，动作项目将显示在弹出窗口中。我不知道这是否是您的问题，因为您确实提供的信息很少，而且您的语法非常难以理解。

# python - reducing number of choices

> ID：11628204
> 
> 赞同：0
> 
> 时间：2012-07-24T09:45:41.107
> 
> 标签：python, web2py

I have two tables:

```
db.define_table('tests', Field('name'), Field('status'),...)
db.tests.status.requires=IS_IN_SET(['OK','obsolete'])
db.define_table('testruns', Field('name'), Field('test', db.tests), ...) 
```

My form looks lik this:

```
form = SQLFORM(db.testruns) 
```

How can I change the form, that it contains only the tests that have the state 'OK'?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:29:59.153

当您定义一个像 的引用字段`Field('test', db.tests)`时，它会获得一个默认`IS_IN_DB`验证器，它会在表单中为其提供一个默认选择小部件。验证器默认为引用字段中的`IS_IN_DB`所有记录，但您可以显式指定自己的`IS_IN_DB`验证器并传入将记录限制为子集的 DAL Set 对象（在这种情况下，那些具有 tests.status == 'OK' 的记录）：

```
db.define_table('testruns',
    Field('name'),
    Field('test', db.tests,
          requires=IS_IN_DB(db(db.tests.status == 'OK'), 'tests.id', '%(name)s'),
          represent=lambda id, row: db.tests[id].name)) 
```

# asp.net - How do I run MySQL in medium trust mode?

> ID：11628206
> 
> 赞同：3
> 
> 时间：2012-07-24T09:45:54.717
> 
> 标签：asp.net, mysql, asp.net-mvc, mysql-error-1064

I am using .NET Framework 4.0 and MySQL. My service providers allows me to run my website in medium trust mode. When I host my site, the following error is generated:

```
Request for the permission of type 'System.Security.Permissions.ReflectionPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed. 
```

To overcome this, I have gone through [these](https://rbrundritt.wordpress.com/2010/09/18/mysql-net-4-entity-framework-and-medium-trust-hosting-environments/#comment-1471) [links](http://www.marthijnvandenheuvel.com/2011/04/14/fix-net-4-socketpermission-for-mysql-driver-in-medium-trust/) to run MySQL in medium trust mode.

When I use the code from those links, however, my code works fine with SELECT queries, but when I use an INSERT query, the following error is generated:

```
Request for the permission of type 'System.Security.Permissions.ReflectionPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed. 
```

How can I solve this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:51:30.230

我怀疑这是 Net 4.0 的新实现，它使用的反射对于中等信任环境来说是禁忌的。使用以前的版本，我正在使用 6.5 版和 godaddy，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:48:31.943

我希望以下选项可以帮助您：

*   确保您的用户已写入您的 mysqldb
*   右键单击您的 Web 项目并单击“添加可部署的依赖项”（单击此之前，请确保在 MySQL 程序集的选项窗口中的 VS 上将程序集道具“复制到本地”设置为“真”。
*   确保您的主机设置上的应用程序池设置为使用 .net framework 4.0 运行。

# visual-studio-2010 - How can I cleanup Visual Studio SP1 installation?

> ID：11628207
> 
> 赞同：1
> 
> 时间：2012-07-24T09:45:59.260
> 
> 标签：visual-studio-2010

I installed Visual Studio 2010 and applied SP1 and then my HDD died and I had to uninstall and install Visual Studio.

Now trying to apply SP1 again however the installer gets stuck. When I check the logs, this is the error :

> INSTALLMESSAGE_OUTOFDISKSPACE

It's trying to check the disk space in a non-existent volume (D:) in this case instead of the new volume of installation and gets in a recursive loop.

The following repeats itself thousands times in the logs

```
Returning IDCANCEL. INSTALLMESSAGE_OUTOFDISKSPACE [Out of disk space -- Volume: 'D:'; required space: 7,090 KB; available space: 0 KB. Free some disk space and retry.]
Returning IDNO. INSTALLMESSAGE_USER [Are you sure you want to cancel?]
Returning IDCANCEL. INSTALLMESSAGE_OUTOFDISKSPACE [Out of disk space -- Volume: 'D:'; required space: 7,090 KB; available space: 0 KB. Free some disk space and retry.]
Returning IDNO. INSTALLMESSAGE_USER [Are you sure you want to cancel?]
Returning IDCANCEL. INSTALLMESSAGE_OUTOFDISKSPACE [Out of disk space -- Volume: 'D:'; required space: 7,090 KB; available space: 0 KB. Free some disk space and retry.]
Returning IDNO. INSTALLMESSAGE_USER [Are you sure you want to cancel?]
Returning IDCANCEL. INSTALLMESSAGE_OUTOFDISKSPACE [Out of disk space -- Volume: 'D:'; required space: 7,090 KB; available space: 0 KB. Free some disk space and retry.]
Returning IDNO. INSTALLMESSAGE_USER [Are you sure you want to cancel?] 
```

I tried Microsoft Fix it for cleanup uninstall but didn't work, it's still same.

What's the way to actually clean up after Visual Studio SP1 so it won't look at the previous installation directory?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:49:49.380

正确的文档实际上是从原始 SP1[下载站点](http://go.microsoft.com/fwlink/?LinkId=210711)的 ReadMe 中获得的：

看：

*   2.2\. 卸载，和
    *   2.2.1。如果卸载 Visual Studio 2010 Service Pack 1，则必须重新安装 Visual Studio 2010 才能恢复某些组件

“阅读本自述文件中的 2.2.1。有关如何在卸载 SP1 后重新安装 Visual Studio 2010 的说明。重新安装 Visual Studio 2010 后，重新应用 SP1。”

我认为这可能会解决您的服务包问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:39:15.850

对于将来遇到此错误的任何人，我遇到了这个问题并解决了它：

1）虽然可能没有硬盘驱动器卷 D:，如果你看到这个，你可能有一个分配了该驱动器号的光驱（这就是它可以找到 D，但有 0 个字节空闲的原因）。暂时将光驱重新分配给另一个盘符，安装应继续。

2) 当您使用它时，您可能想要获得像 Registry Workshop 这样的第三方工具，以便您可以搜索所有 Visual Studio 2010 中所有具有指向驱动器 D: 的路径的键，然后将其删除。

3) 写信给微软并指出对他们来说是多么荒谬 a) 滥用注册表以获得他们应该使用 AppData 文件夹的东西，b) 没有创建适当的工具来清除产品的所有注册表项（他们现有的独立卸载程序几乎所有键都保持不变），c）编写安装程序，完全吞下错误消息而不提醒用户，迫使他们挖掘日志文件，以及 d）作为一个整体的注册表系统。

# ipad - access the masterViewController from splitviewcontroller

> ID：11628210
> 
> 赞同：0
> 
> 时间：2012-07-24T09:46:06.130
> 
> 标签：ipad, delegates

I have started a master detail application using storyboard and core data. the managerObjContext is defined in the masterViewController:

```
@interface addMasterViewController : UITableViewController <NameEditorViewControllerDelegate>
    ...
    @property (strong, nonatomic) NSManagedObjectContext *mngObjCntxt; 
```

and synthesized in the m.file:

```
@implementation addMasterViewController
...
@synthesize mngObjCntxt=_mngObjCntxt; 
```

now Im trying to set the mngObjCntxt in the application deligate but with no sucess. this is what I have tried:

```
 #import "addAppDelegate.h"
    #import "addMasterViewController.h"
    #import "addDetailViewController.h"

@implementation addAppDelegate

@synthesize window = _window;
@synthesize splitViewController=_splitViewController;

@synthesize mngObjCntxt = _mngObjCntxt;
@synthesize mngObjModel = _mngObjModel;
@synthesize persistentStoreCoor = _persistentStoreCoor;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;
    UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
    splitViewController.delegate = (id)navigationController.topViewController;
   [[[splitViewController viewControllers] objectAtIndex:0] setMngObjCntxt:[self mngObjCntxt]];

    return YES;
} 
```

the problem is that via the bolded expresion above im reaching the UINavigationController and not to the masterViewContoller, which hold the mngObjCntxt. so Im falling on the following error:-[UINavigationController setMngObjCntxt:]: unrecognized selector sent to instance how can I access the masterViewController frm the app deligate? thanks! Shimrit.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:52:37.327

确保您已经在 Interface Builder 中设置了主视图控制器的类。

# symfony - How to remove "delete" button in default "Edit" form of sonata admin?

> ID：11628211
> 
> 赞同：7
> 
> 时间：2012-07-24T09:46:07.190
> 
> 标签：symfony, symfony-forms, sonata-admin

I wrote a code to list data taken from a simple database and there I put an action to edit data. When I click on this Edit button, it goes to the default "Edit" page. There is a button called "delete" there. I want to remove that button...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T08:06:24.567

在您的 EntityAdmin 类中添加以下内容

```
public function configureRoutes(RouteCollection $collection)
{
  $collection->remove('create');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-06T07:09:30.590

我需要从编辑表单中隐藏删除按钮，但不从列表中删除删除功能。

我就是这样做的......以防有人需要做类似的事情

**第 1 步**：将 SonataAdminBundle:CRUD:base_edit_form.html.twig 复制到您的包中，并根据需要注释掉代码/更新

```
//YourBundle/Resources/views/EntityAdmin/base_edit_form.html.twig
{% block form %}

...

    {#{% if admin.hasroute('delete') and admin.isGranted('DELETE', object) %}#}
    {#{{ 'delete_or'|trans({}, 'SonataAdminBundle') }}#}
    {#<a class="btn btn-danger" href="{{ admin.generateObjectUrl('delete', object) }}">{{ 'link_delete'|trans({}, 'SonataAdminBundle') }}</a>#}
    {#{% endif %}#}

...

{% endblock %} 
```

**第 2 步**：添加新的视图资源 edit.html.twig 以扩展默认编辑模板

```
//YourBundle/Resources/views/EntityAdmin/edit.html.twig
{% extends 'SonataAdminBundle:CRUD:base_edit.html.twig' %}

{% use 'YourBundle:EntityAdmin:base_edit_form.html.twig' with form as parentForm %}

{% block form %}
    {{ block('parentForm') }}
{% endblock %} 
```

**第 3 步**：更新您的 Admin 类以使用上述模板

```
//YourBundle/Admin/EntityAdmin.php
class EntityAdmin extends Admin{
...
    public function getTemplate($name)
    {
        switch ($name) {
            case 'edit':
                return 'SomeBundle:EntityAdmin:edit.html.twig';
                break;
            default:
                return parent::getTemplate($name);
                break;
        }
    }
...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T00:19:38.800

base_edit_form.html.twig：

```
{% if admin.hasroute('delete') and admin.isGranted('DELETE', object) %}
    {% trans from 'SonataAdminBundle' %}delete_or{% endtrans %}
    <a class="btn danger" href="{{ admin.generateObjectUrl('delete', object) }}">{% trans from 'SonataAdminBundle' %}link_delete{% endtrans %}</a>
{% endif %} 
```

我看到了 3 种方法来实现这一点：

*   删除删除路线，它将从所有地方删除所有删除按钮，以供管理员使用
*   在您的管理员中重新定义 hasroute 功能，它会产生相同的效果
*   删除对象的删除权限，取决于您使用什么权限

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-14T14:35:23.180

首先在您的 CustomClassAdmin 中使用类 RouteCollection ：

```
use Sonata\AdminBundle\Route\RouteCollection;
```

并添加以下代码：

```
 public function configureRoutes(RouteCollection $collection)
    {
        $collection->remove('delete');
    }
```

# jakarta-ee - CDI interceptor for a specific type

> ID：11628212
> 
> 赞同：0
> 
> 时间：2012-07-24T09:46:13.373
> 
> 标签：jakarta-ee, cdi, interceptor

```
@InterceptorBinding
@Target({ ElementType.TYPE, ElementType.METHOD })
@Retention(RetentionPolicy.RUNTIME)
public @interface RequiresPageReload {
}

public interface Page{
    public static final String LOAD_STR = "load";
    public void load();
}
@RequestScoped
public class PageImpl1 implements Page{
    public void load(){
        //...
    }

    @RequiresPageReload
    public String foo(){
        //...
        return "foo1";
    }
}
@RequestScoped
public class MyObject{
    @RequiresPageReload
    public String foo2(){
        //...
        return "foo2";
    }
}

@RequiresPageReload
@Interceptor
public class RequiresPageReloadInterceptor implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @AroundInvoke
    public Object forceReload(InvocationContext context) throws Exception {
        Object result = context.proceed();
        context.getMethod().getDeclaringClass().getDeclaredMethod(Page.LOAD_STR).invoke(context.getTarget()); //***
        return result;
    }

} 
```

In the line marked with stars, of course I can check through reflection if the method exists and decide accordingly what to do. But I wonder whether is there a better way to achieve the same behavior? For example, is it possible to associate interceptors to just a specific type (in this example, imagine I don't want the foo2() method of MyObject to be intercepted because such object does not implement Page)? I considered also using Decorators, but there the problem is "foo"s method don't belong to an interface..

thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:52:31.133

听起来你想要的是一个[装饰器](http://docs.jboss.org/weld/reference/1.1.5.Final/en-US/html/decorators.html)。

# c# - 尝试使用 list<> 创建用户定义的集合类

> ID：11628216
> 
> 赞同：1
> 
> 时间：2012-07-24T09:46:33.087
> 
> 标签：c#, class, collections

C#：我正在尝试使用其他一些用户定义的类的列表创建集合类，但是当我尝试在主对象中添加对象时，它显示对象未设置为对象的实例。这是我的 C# 代码：

```
namespace ConsoleApplication2
{

   public class Monthlst
    {
        public List<Monday> Monday { get; set; }
        public List<Tuesday> Tuesday { get; set; }
        public List<Wednesday> Wednesday { get; set; }
        public List<Thursday> Thursday { get; set; }
        public List<Friday> Friday { get; set; }
        public List<Saturday> Saturday { get; set; }
        public List<Sunday> Sunday { get; set; }

    }
   public class Monday
    {
        public int days { get; set; }
    }
   public class Tuesday
    {
        public int days { get; set; }
    }
   public class Wednesday
    {
        public int days { get; set; }
    }
   public class Thursday
    {
        public int days { get; set; }
    }
   public class Friday
    {
        public int days { get; set; }
    }
   public class Saturday
    {
        public int days { get; set; }
    }
   public class Sunday
    {
        public int days { get; set; }
    }
    class Program
    {

        static void Main(string[] args)
        {

          Monthlst objmonth = new Monthlst();
          Wednesday wednes = new Wednesday();
          wednes.days = 5;
          objmonth.Wednesday.Add(wednes); // here i am getting error object not set to.... 
        }
  }
} 
```

在这里，我只是在 main 方法中创建了我的 Monthlst 类的实例，并在 Monthlst 对象的 list 属性中创建了周三类的对象，但是为什么它向我显示错误我不知道我做错了什么，请解释....

谢谢，拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:49:00.620

是的，您没有初始化您的属性。建设完成后，所有的`Monthlst`属性将是`null`。您需要在添加之前创建一个列表。例如：

```
Monthlst objmonth = new Monthlst();
objmonth.Wednesday = new List<Wednesday>();
Wednesday wednes = new Wednesday();
wednes.days = 5;
objmonth.Wednesday.Add(wednes); 
```

或者，使构造函数`Monthlst`初始化其所有属性。

除此之外，我认为设计在各个方面都有些笨拙，但那是另一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:57:50.173

初始化您的`Wednesday`列表项。你的代码应该是这样的：

```
public class Monthlst
{
    public Monthlst()
    {
        Monday = new List<Monday>();
        Tuesday = new List<Tuesday>();
        Wednesday = new List<Wednesday>();
        Thursday = new List<Thursday>();
        Friday = new List<Friday>();
        Saturday = new List<Saturday>();
        Sunday = new List<Sunday>();
    }
    public List<Monday> Monday { get; set; }
    public List<Tuesday> Tuesday { get; set; }
    public List<Wednesday> Wednesday { get; set; }
    public List<Thursday> Thursday { get; set; }
    public List<Friday> Friday { get; set; }
    public List<Saturday> Saturday { get; set; }
    public List<Sunday> Sunday { get; set; }

}
public class Monday
{
    public int days { get; set; }
}
public class Tuesday
{
    public int days { get; set; }
}
public class Wednesday
{
    public int days { get; set; }
}
public class Thursday
{
    public int days { get; set; }
}
public class Friday
{
    public int days { get; set; }
}
public class Saturday
{
    public int days { get; set; }
}
public class Sunday
{
    public int days { get; set; }
}
class Program
{
    static void Main(string[] args)
    {
        var objmonth = new Monthlst();
        var wednes = new Wednesday {days = 5};
        objmonth.Wednesday.Add(wednes);
    }
} 
```

# c# - 如何使用“标签函数”从 javascript 代码调用服务器端函数">

> ID：11628235
> 
> 赞同：0
> 
> 时间：2012-07-24T09:47:12.317
> 
> 标签：c#, javascript, asp.net, .net, ajax

对于初学者，我搜索了什么是“标签运算符” <%=%> 没有答案，所以我将引用它

我在 ASP.NET 和 C# 中实现了一个[进度条](http://www.htmldrive.net/items/show/1047/jQuery-tooltip-animated-progress-bar)，这是用户控件的相关部分：

```
<div class="progress_container" >
    <div class="progress_bar tip" id="ProgressBar" title="78%"></div>
</div>    

<script type="text/javascript">        
    function myFunction() {
        document.getElementById("ProgressBar").setAttribute("title", '<%=getPercent()%>')
        var percent = $('.progress_bar').attr('title');
        $('.progress_bar').animate({ width: percent }, 1000);
    }
</script>

<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnProgressBar" EventName="Click" />
    </Triggers>
    <ContentTemplate>
        <asp:Button runat="server" Text="Go!"  id="btnProgressBar" OnClientClick="myFunction()" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

这是来自代码隐藏的功能：

```
public string getPercent()
{
    Random random = new Random();
    int randomNumber = random.Next(0, 100);
    return randomNumber + "%";
} 
```

女巫仅一次就可以很好地工作，然后什么也没有，就像对函数的调用`'<%=getPercent()%>'`只工作一次。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:53:09.133

我知道这不完全是您问题的答案，但您可以肯定地这样做（使用属性）

```
public string GetPercent
    {
        get
        {
            Random random = new Random();
            int randomNumber = random.Next(0, 100);
            return randomNumber + "%";
        }
    } 
```

而不仅仅是像这样从 aspx 文件中调用它

```
<%= GetPercent %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:53:46.660

你不能像那样做你想做的事。您需要使用 AJAX/AJAJ 来获得不断更新的进度条。

<%=blah()%> 只是一个替换。第一次生成页面时，它会对其进行评估，并将文档的该部分替换为评估结果，因此您可以将变量、函数、资源等放在那里。

看起来你正在使用 jQuery，所以看看 $.ajax()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:13:59.540

~~您可以使用这样的内联属性~~

 ~~```
var randNum= '<%= Percent %>';

public string Percent
{
    get
    {
         return getPercent();
    }
} 
```~~ 

或者你可以使用这样的东西。

```
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "RandValue", "var randNum= '" + getPercent()+ "';", true); 
```

其中 randNum 是您希望在客户端访问的 javascript 变量

 ~~**更新**

您需要做的是在 javascript 中调用 setTimeout 并在一段时间后调用此函数

你可以看看[Dino Espito](http://msdn.microsoft.com/en-us/magazine/hh708746.aspx)的这个例子如何构建上下文相关的进度条。虽然它在 MVC 中，但客户端代码是相同的

**更新 2**

[再次由Dino Espito](http://msdn.microsoft.com/en-us/magazine/cc163393.aspx)找到这篇文章，他在其中使用 ASP.NET 构建了一个进度条（类似于你的）~~

# android - Wget or similar for Android

> ID：11628238
> 
> 赞同：4
> 
> 时间：2012-07-24T09:47:19.767
> 
> 标签：android, curl, https, wget

I need to make petitions against a https server and download data that the server sends back (text, video files or image files), inside my Android app.

It works fine in the terminal of suse Linux and wget or curl. Request have this structure:

```
wget --post-data "token=xxxx&option1=1&option2=4&File=video" https://api.serverx.com/ --no-check-certificate 
```

My question is if there is any wget or similar working in Android, or how can I make this kind of petitions in another way.

I read about implement wget in the NDK but I'd like to know your experience or recomendations. Thanks

# Solution

Using NDK to port Wget was too complicated. After some research I found a solution using DefaultHttpClient and adding a couple of classes to avoid checking the certificates. I follow [this article](http://www.virtualzone.de/2011-02-27/how-to-use-apache-httpclient-with-httpsssl-on-android)

```
SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
    schemeRegistry.register(new Scheme("https", new EasySSLSocketFactory(), 443));

    HttpParams params = new BasicHttpParams();
    params.setParameter(ConnManagerPNames.MAX_TOTAL_CONNECTIONS, 30);
    params.setParameter(ConnManagerPNames.MAX_CONNECTIONS_PER_ROUTE, new ConnPerRouteBean(30));
    params.setParameter(HttpProtocolParams.USE_EXPECT_CONTINUE, false);
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);

    ClientConnectionManager cm = new SingleClientConnManager(params, schemeRegistry);
    DefaultHttpClient httpClient = new DefaultHttpClient(cm, params); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T09:51:08.270

为此使用 wget 或 ndk 是个坏主意：直接`java`使用并`HttpClient`用于制作发布请求：示例可以在[此处](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)找到。

响应将包含您的数据，准备好保存到文件中。

此外，你可以把它放在一个异步任务中，进度监控：分叉一个像 Curl ou wget 这样的外部进程应该作为最后的机会（与服务器通信显然不是）

# javascript - 调用驻留在不同文件夹中的 javascript 文件

> ID：11628242
> 
> 赞同：3
> 
> 时间：2012-07-24T09:47:32.680
> 
> 标签：javascript

我是 JavaScript 新手。我试图从 jsp 调用外部 javascript 文件。

我在执行上述操作时没有问题，但是当我尝试将此**javascript 放在不同的文件夹中然后调用**时，我无法执行此操作。

从jsp调用js的代码

```
<input type="submit" name="submit" value="Submit" onclick="validate(this.form)"></input> 
```

在 jsp的*头部*添加了这些行

```
<script src="scripts/validate.js">
</script> 
```

**结构：** ServletsApp 是 WebContent 所在的主要项目文件夹。WebContent 具有文件夹视图和脚本。我的 jsp 位于脚本文件夹中的视图和 .js 中。

**更新：** LoginExample.jsp

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Share Market Application</title>
<script src="../WebContent/scripts/validate.js">
</script>
</head>

<body>
<form name="loginForm">
    <h2>Enter user credentials</h2>
    <br> 
    <font size="3" style="TimesNewRoman">Username:</font> 
    <input type="text" name="userId"></input> 
    <br>
    <font size="3" style="TimesNewRoman">Password:</font> 
    <input type="password" name="password"></input> 
    <br> 
    <input type="submit" name="submit" value="Submit" onclick="validate(this.form)"></input>
    <input type="button" name="cancel" value="Cancel"></input>
</form> 
```

**验证.js**

```
function validate(form)
{
alert("Entered");
alert(document.getElementById("userId"));
var userName=form.userId.value;
alert(userName);
var pwd=form.password.value;
alert(document.getElementById("userId").valueOf());
if(userName=="" || userName!="admin")
    {
    alert("User name is incorrect");
    }
else
    {
    if(pwd=="" || pwd!="admin")
    {
    alert("Password is incorrect");
    }   
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:53:17.057

检查文件的正确路径

```
<script src="~/Scripts/validate.js" type="text/javascript"></script> 
```

尝试这个

```
<script src="~/WebContent/Scripts/validate.js" type="text/javascript"></script> 
```

或者

```
<script src="../Scripts/validate.js" type="text/javascript"></script> 
```

# asp.net-mvc-3 - 在 JQuery 数据表和 ASP.NET MVC 中对 DateTime 列进行排序

> ID：11628245
> 
> 赞同：0
> 
> 时间：2012-07-24T09:47:37.843
> 
> 标签：asp.net-mvc-3, entity-framework, jquery-ui, extension-methods, datatables

我在 ASP.NET MVC 项目中使用 JQuery Datatables 插件来显示一些表格数据，这些数据又是从使用实体框架的数据库中获取的。

我已将 Datatable 配置为使用 ajax 搜索和排序例程，并且我正在使用扩展方法来允许我指定要作为字符串排序的列的名称。这适用于大多数字段，但在尝试对包含 DateTime 对象的字段进行排序时出现错误。

查看 JQuery 代码：

```
$('#Orders').dataTable({
        "bServerSide": true,
        "sAjaxSource": "/Suppliers/GetOrders/@Model.ID",
        "aaSorting": [[1, 'desc']],
        "bProcessing": true,
        bAutoWidth: false,
        "sPaginationType": "full_numbers",
        "aoColumns": [
                    { "bVisible": false },
                    { "sName": "OrderNumber",
                        "bSearchable": false,
                        "bSortable": true,
                        "fnRender": function (oObj) {
                            return '<a href=\"/Orders/View/' + oObj.aData[0] + '\">' + oObj.aData[1] + '</a>';
                        }
                    },
                    { "sName": "Supplier", "bSortable": true },
                    { "sName": "Client" },
                    { "sName": "OrderPlaced" },
                    { "sName": "OrderReceived"},
                    { "sName": "OrderedBy" },
                    { "sName": "Actions",
                      "fnRender": function (oObj) {
                            return '<a href=\"/Orders/View/' + oObj.aData[0] + '\">view</a>';
                        } 
                    }
                ]
    }); 
```

控制器代码：

```
var data = DataContext.PartsOrders.Select(order => 
    new {
        order.SupplierID, 
        order.UniverseID, 
        order.ID, 
        order.OrderNumber, 
        Supplier = order.Supplier.Name, 
        Client = order.Job.Client.Name, 
        DateOrderPlaced = order.DateOrderPlaced, 
        order.DateOrderReceived, 
        OrderedBy = order.OrderedBy.Name 
    }).Where(x => x.SupplierID == id && x.UniverseID == Universe.ID);
data = data.OrderByField(columnNames[Convert.ToInt32(Request["iSortCol_0"])], Request["sSortDir_0"]); 
```

我的ExtensionMethod如下，基于我在网上找到的一些代码。我不完全确定我理解这段代码在做什么，这并不能帮助我找到我的问题！

```
public static IQueryable<T> OrderByField<T>(this IQueryable<T> q, string SortField, string SortDirection)
    {

        var param = Expression.Parameter(typeof(T), "p");

        var prop = Expression.Property(param, SortField);

        var exp = Expression.Lambda(prop, param);

        string method = "";

        if (SortDirection == "asc")
            method = "OrderBy";
        else
            method = "OrderByDescending";

        Type[] types = new Type[] { q.ElementType, exp.Body.Type };

        var mce = Expression.Call(typeof(Queryable), method, types, q.Expression, exp);

        return q.Provider.CreateQuery<T>(mce);

    } 
```

最后，尝试对包含日期的列进行排序时出现的错误：

```
Instance property 'OrderPlaced' is not defined for type '<>f__AnonymousType6`9[System.Nullable`1[System.Int32],System.Int32,System.Int32,System.String,System.String,System.String,System.Nullable`1[System.DateTime],System.Nullable`1 
```

这发生在扩展方法中，在线`var prop = Expression.Property(param, SortField);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:20:19.880

这只是名称冲突。`<>f__AnonymousType6...`是您在 中创建的匿名类型`DataContext.PartsOrders.Select(...`。里面有一个属性`DateOrderPlaced`。将其更改为`OrderPlaced`，或将`OrderPlaced`javascript 中 dataTable 中的列更改为`DateOrderPlaced`。

# jquery-mobile - 这个网站使用了哪个 JS 框架？

> ID：11628251
> 
> 赞同：-2
> 
> 时间：2012-07-24T09:48:02.560
> 
> 标签：jquery-mobile

谁能告诉[http://iphone.paulmillersubaru.com/index.htm#index_p_2Ehtm使用了哪个 Javascript 框架](http://iphone.paulmillersubaru.com/index.htm#index_p_2Ehtm)

这是基于 jquerymobile.com 还是使用其他框架？

谢谢，

贾廷德思德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:50:40.337

如果我查看页面源代码并搜索 javascript，我可以看到它使用的所有库。你也可以：

```
<script type="text/javascript" src="http://static.dealer.com/v8/global/js/jquery/jquery-1.4.1.mod.pack.js?1319813505000"></script> 
```

对我来说看起来像 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:52:56.013

是的，它使用的是 jquery 框架。

只需右键单击并查看页面源代码。

搜索 Jquery。你会找到它的 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:43:40.397

该网站还包括[`jQTouch`](http://www.jqtouch.com/). 这提供了动画。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:44:06.877

它不使用 jQuery mobile，它使用[bootstrap.js](http://twitter.github.com/bootstrap/)和其他一些 js 文件。正如其他人提到的那样，准确地查看站点正在使用哪些 js 文件并不难，只需查看源代码或在调试器（[firebug](https://getfirebug.com/)、[web 检查器](http://trac.webkit.org/wiki/WebInspector) [等](http://www.opera.com/dragonfly/)）中打开它。

# asp.net-mvc - 为什么 asp.net MVC 控制器不被视为 RESTful Web 服务

> ID：11628252
> 
> 赞同：1
> 
> 时间：2012-07-24T09:48:02.963
> 
> 标签：asp.net-mvc, rest

我有一个 asp.net Web 应用程序，现在假设用户使用以下 URL 向应用程序发送 POST 操作方法`Myapplication.com/Customer/Edit/120`，然后此 URL 将使用发送的数据更新 ID=120 的客户。

因此，这与调用 Web 服务相同，因为您正在使用 URL 与应用程序集成（在本例中为更新客户），所以为什么不将其视为具有 RESTfull Web 服务！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:04:18.037

究竟什么是 Web 服务？以及如何区分网页和 Web 服务。

这些只是检索某些资源的不同术语。无论是使用 Web 服务还是网页，您都只是在请求资源。网页的表示是固定的，即它始终是 HTML。如果从我的 Web 服务而不是返回 Json 或 XML，如果它开始提供 HTML 服务，那么它会变成一个网页吗？

我认为 Web 服务的整个概念是伴随着 SOAP 世界而来的。有了 Rest，就没有 Web 服务或网页。资源（json、xml、html、图像）只有不同的表示形式。

进一步回答您的

> 那么为什么这不被视为拥有 RESTfull Web 服务！

微软推出了[Asp.Net Web API](http://stephenwalther.com/archive/2012/03/05/introduction-to-the-asp-net-web-api.aspx)，它只是纯粹的 MVC 来提供内容。

# c# - 不支持 streamreader 异常 URI 格式

> ID：11628254
> 
> 赞同：0
> 
> 时间：2012-07-24T09:48:08.873
> 
> 标签：c#, azure, azure-storage

我正在使用`azure blob storage`. 我在存储中存储了一个 txt 文件，现在我正在尝试阅读它：

```
StreamReader reader = new StreamReader(Blob.Uri.AbsoluteUri); 
Blob containes the reference of the blob where txt file is stored. 
```

但在这里我得到了例外`(URI formats are not supported.)`。我认为`streamreader`不支持 URI 格式。有人可以为此给我一个更好的工作吗？

（我知道我们可以使用`DowmloadToFile`的方法 `CloudBlob`下载文件，然后使用 Server.MapPath 创建一个地址，并放置该地址而不是 URI。但如果有其他更好的解决方案，请告诉我）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:56:54.953

看看[WebClient.OpenRead](http://msdn.microsoft.com/en-us/library/ms144209.aspx)或[WebClient.DownloadString](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadstring)方法。

您的代码将如下所示：

```
var wc = new WebClient();
using(var sourceStream = wc.OpenRead(Blob.Uri.AbsoluteUri)){
    using(var reader = new StreamReader(sourceStream)){
         // Process
    }
} 
```

或者如果文件很小（文本文件通常很小），：

```
var wc = new WebClient();
var fileContent = wc.DownloadString(Blob.Uri.AbsoluteUri); 
```

# android - 带有 SHA256 的 PBKDF2 在 android 上

> ID：11628256
> 
> 赞同：7
> 
> 时间：2012-07-24T09:48:12.950
> 
> 标签：android, encryption, sha256, pbkdf2

我想使用带有 SHA256 的 PBKDF2 生成密码的派生哈希。有了这个`SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1")`工作，但它使用 SHA1。使用`SecretKeyFactory.getInstance("PBKDF2WithHmacSHA256")`（或`SecretKeyFactory.getInstance("PBKDF2WithHmacSHA256","SC")`使用 spongycastle 时）我有一个错误。

如何使用 PBKDF2WithHmacSHA256 成功生成哈希？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-08T21:06:21.643

如果您使用 1.47 或更高版本的 SpongyCastle，您可以直接调用 PBKDF2WithHmacSHA256：

```
PKCS5S2ParametersGenerator generator = new PKCS5S2ParametersGenerator(new SHA256Digest());
generator.init(PBEParametersGenerator.PKCS5PasswordToUTF8Bytes(password), salt, iterations);
KeyParameter key = (KeyParameter)generator.generateDerivedMacParameters(keySizeInBits); 
```

在 BC < 1.47 的版本中，您不能指定 SHA256 摘要，它默认为 SHA1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T03:05:49.380

Bouncy Castle 不支持`PBKDF2WithHmacSHA256`，所以这行不通。您可以尝试自己实现它。查看来源`PKCS5S2ParametersGenerator.java`并替换`SHA1Digest`为`SHA256Digest`.

# grails - 直接从铅笔或 balsamiq 线框渲染 UI / 生成 GSP

> ID：11628260
> 
> 赞同：-1
> 
> 时间：2012-07-24T09:48:25.800
> 
> 标签：grails, user-interface, automation, gsp, wireframe

有没有我可以使用的现有工具/工具组合，以便我的应用程序（grails）可以直接使用我使用铅笔或 balsamiq 构建的线框来呈现 UI？或者也许是一种从我的线框中生成 GSP 的方法（假设有一套风格指南等）？我本质上是希望不必为每个页面编写 HTML/GSP 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:22:28.677

[Napkee](http://www.napkee.com/)是一种商业解决方案。不过，我不知道有什么完全免费的

# android - 通过前台 NDEF 推送 API 级别 10 到 13，我可以在两个非 Android 设备之间进行模拟吗？

> ID：11628261
> 
> 赞同：1
> 
> 时间：2012-07-24T09:48:29.123
> 
> 标签：android, blackberry, nfc

通过前台 NDEF 推送 API 级别 10 到 13，我可以在两个非 Android 设备之间进行模拟吗？

我有一台 Android 设备和一台支持 NFC 的黑莓设备。如何在 API 级别 10 中在这些设备之间进行仿真？

```
package com.app.app.nfctag;

import java.nio.charset.Charset;

import android.app.Activity;
import android.content.Intent;
import android.nfc.NdefMessage;
import android.nfc.NdefRecord;
import android.nfc.NfcAdapter;
import android.os.Bundle;
import android.os.Parcelable;
import android.widget.Toast;

public class NFCDeveloper extends Activity{
     NfcAdapter mNfcAdapter;
     private NdefMessage pushMessage;

       // TextView textView;

     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
            if (mNfcAdapter == null) {
                Toast.makeText(this, "NFC is not available", Toast.LENGTH_LONG).show();
                finish();
                return;
            }

            String text = ("Beam me up, Android!\n\n" + "Beam Time: " + System
                    .currentTimeMillis());
            pushMessage = new NdefMessage(new NdefRecord[] { createMimeRecord(
                    "application/com.example.android.beam", text.getBytes())

            });

     }

     /*public NdefMessage createNdefMessage(N event) {
            String text = ("Beam me up, Android!\n\n" +
                    "Beam Time: " + System.currentTimeMillis());
            NdefMessage msg = new NdefMessage(
                    new NdefRecord[] { createMimeRecord(
                            "application/com.example.android.beam", text.getBytes())
             *//**
              * The Android Application Record (AAR) is commented out. When a device
              * receives a push with an AAR in it, the application specified in the AAR
              * is guaranteed to run. The AAR overrides the tag dispatch system.
              * You can add it back in to guarantee that this
              * activity starts when receiving a beamed message. For now, this code
              * uses the tag dispatch system.
              *//*
              //,NdefRecord.createApplicationRecord("com.example.android.beam")
            });
            return msg;
        }
     */

        public void onResume() {
            super.onResume();
            // Check to see that the Activity started due to an Android Beam
            if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
                processIntent(getIntent());
            }
            mNfcAdapter.enableForegroundNdefPush(this, pushMessage);
        }

        public void onNewIntent(Intent intent) {
            // onResume gets called after this to handle the intent
            setIntent(intent);
        }

        void processIntent(Intent intent) {
          //  textView = (TextView) findViewById(R.id.textView);
            Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
                    NfcAdapter.EXTRA_NDEF_MESSAGES);
            // only one message sent during the beam
            NdefMessage msg = (NdefMessage) rawMsgs[0];
            // record 0 contains the MIME type, record 1 is the AAR, if present
          //  textView.setText(new String(msg.getRecords()[0].getPayload()));
        }
        public NdefRecord createMimeRecord(String mimeType, byte[] payload) {
            byte[] mimeBytes = mimeType.getBytes(Charset.forName("US-ASCII"));
            NdefRecord mimeRecord = new NdefRecord(
                    NdefRecord.TNF_MIME_MEDIA, mimeBytes, new byte[0], payload);
            return mimeRecord;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:21:04.640

NDEF 是大多数其他系统使用的最常见的 NFC 标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:47:35.870

NDEF 推送适用于从 Android 设备到 Blackberry，就像到另一个 Android 设备一样。

更新：

你是对的。它只能从 API 14 开始工作。在此之前，Android 只使用 NPP 协议；SNEP（BB 支持）仅从 API 14 实现。

# php - 使用至少 3 方服务从 PHP 发送邮件？

> ID：11628262
> 
> 赞同：1
> 
> 时间：2012-07-24T09:48:31.590
> 
> 标签：php, smtp, sendmail

如果这听起来像重复，请不要忽略。我在这里遇到了类似的问题，但无法解决我的疑问。

我在我的本地主机中开发一个站点。它用 PHP 编码。我需要从我的 PHP 脚本向我网站的客户发送邮件。我知道我们可以为此使用 gmail smtp 服务器。但是由于谷歌设置的邮件/天的限制，我不想使用它们。

但我的疑问是：

1.  我可以在没有 gmail 的 smtp 服务器或其他任何人的 smtp 服务器的情况下做到这一点吗？
2.  从本地主机和在线网络服务器发送邮件需要哪些组件？
3.  是否所有的网络服务器都预先配置为使我们能够从站点发送邮件？
4.  什么是 sendMail、phpMailer、pearMail 等？我被建议使用它们。但它们是什么？

非常感谢！

编辑：我在我的本地主机中使用 wamp2.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:53:42.160

如果您使用 XAMPP，它带有 Mercury Mail。您可以使用它通过 localhost 发送邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:53:34.870

1.  当然
2.  设置一个自己的 MTA（邮件传输代理），如 postfix。
3.  根据我的经验，共享主机通常已经提供了邮件代理。如果您真的是指“网络服务器”，那么不是：网络服务器就是网络服务器。像 XAMPP 这样的预配置包通常也带有 MTA。
4.  库发送邮件。`sendMail`可能是`sendmail`，它本身就是一个 MTA 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:08:57.020

要从 php 发送电子邮件，只需使用 php 自己的邮件功能：

```
 <?php

             $to = "destinationemailid";

             $subject = "mail subject";

             $message = "your message to send";

             $from =  "sourceemailid";

             $headers = "From:" . $from;

             mail($to,$subject,$message,$headers);

        ?> 
```

这适用于本地主机上的 xampp

# c# - 如何在 c#.net Web 项目中禁用延迟登录

> ID：11628264
> 
> 赞同：1
> 
> 时间：2012-07-24T09:48:37.093
> 
> 标签：c#, .net

我收到这些错误

构建（网络）：无法加载文件或程序集“PetShop.DBUtility，版本=4.0.0.0，文化=中性，PublicKeyToken=a7987b61c51ca872”或其依赖项之一。无法验证强名称签名。该程序集可能已被篡改，或者它被延迟签名但未使用正确的私钥完全签名。（来自 HRESULT 的异常：0x80131045）

所以我发现我需要禁用我在项目中使用的那个 dll 的延迟信号

我正在使用 vsexpress10 c# 版本进行开发

等待您的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:58:09.823

For enabling delay signing following lines are used:

```
[assembly:AssemblyKeyFileAttribute("myKey.snk")]
[assembly:AssemblyDelaySignAttribute(true)] 
```

setting the 2nd attribute as false will disable the delay signing.

# php - PHP - 将多个文本框值的文本值添加到变量中

> ID：11628265
> 
> 赞同：1
> 
> 时间：2012-07-24T09:48:39.013
> 
> 标签：php

我想将以下信息添加到变量中，（txt-via-hn 文本框是门牌号，txt-via 是地址详细信息）

```
$vias =         $_POST['txt-via-hn2'].' '.$_POST['txt-via2'] 
               .$_POST['txt-via-hn3'].' '.$_POST['txt-via3']
               .$_POST['txt-via-hn4'].' '.$_POST['txt-via4']
               .$_POST['txt-via-hn5'].' '.$_POST['txt-via5']
               .$_POST['txt-via-hn6'].' '.$_POST['txt-via6']
               .$_POST['txt-via-hn7'].' '.$_POST['txt-via7']
               .$_POST['txt-via-hn8'].' '.$_POST['txt-via8']
               .$_POST['txt-via-hn9'].' '.$_POST['txt-via9']
               .$_POST['txt-via-hn10'].' '.$_POST['txt-via10']; 
```

我对 PHP 还很陌生，所以我不太确定如何去做，但基本上我需要的格式如下：

```
$vias = <vias>
        <vh1>$_POST['txt-via-hn2']</vh1><vi1>$_POST['txt-via2']</vi1>
        <vh2>$_POST['txt-via-hn3']</vh2><vi2>$_POST['txt-via3']</vi2>
        <vh3>$_POST['txt-via-hn4']</vh3><vi3>$_POST['txt-via4']</vi3>
        <vh4>$_POST['txt-via-hn5']</vh4><vi4>$_POST['txt-via5']</vi4>
        <vh5>$_POST['txt-via-hn6']</vh5><vi5>$_POST['txt-via6']</vi5>
        <vh6>$_POST['txt-via-hn7']</vh6><vi6>$_POST['txt-via7']</vi6>
        <vh7>$_POST['txt-via-hn8']</vh7><vi7>$_POST['txt-via8']</vi7>
        <vh8>$_POST['txt-via-hn9']</vh8><vi8>$_POST['txt-via9']</vi8>
        <vh9>$_POST['txt-via-hn10']</vh9><vi9>$_POST['txt-via10']</vi9>
        </vias> 
```

另外，如果例如`$_POST['txt-via-hn10']`&`$_POST['txt-via10']`为空，是否有可能`<vh9> and </vh9>`不包含在变量中？

对此的任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:08:57.293

最直接的方法是每行使用一个 if 语句来检查 $_POST 变量是否存在，如果为真则连接它们：

```
$vias = "<vias>";
$vias .= (isset($_POST['txt-via-hn2']) && isset($_POST['txt-via2'])) ? "<vh1>" . $_POST['txt-via-hn2'] . "</vh1><vi1>" . $_POST['txt-via2'] . "</vi1>    " : null;
.
.
.
$vias .= "</vias>"; 
```

或者您可以使用 FOR 循环进行迭代，因为您在这里使用了一个声明良好的数字序列：

```
$vias = "<vias>";
for ($x = 1; $x < 10; ++$x) {
    $vias .= (isset($_POST['txt-via-hn'.($x+1)]) && isset($_POST['txt-via'.($x+1)])) ? "<vh$x>" . $_POST['txt-via-hn'.($x+1)] . "</vh$x><vi$x>" . $_POST['txt-via'.($x+1)] . "</vi$x>    " : null;
}
$vias .= "</vias>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:59:28.747

您应该开始更改表单以将值添加到数组中。您可以通过将字段名称更改为“门牌号[]”来做到这一点。

对地址详细信息字段执行相同操作。

然后遍历生成的两个 $_POST 数组并创建最终的 xml 类字符串。

我在下面制定了一个简单的例子。

表单.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title></title>
</head>
<body>
    <form action="action.php" method="post">
        <input type="text" name="housenumber[]" id="" />
        <input type="text" name="detail[]" id="" /><br />
        <input type="text" name="housenumber[]" id="" />
        <input type="text" name="detail[]" id="" /><br />
        <input type="text" name="housenumber[]" id="" />
        <input type="text" name="detail[]" id="" /><br />
        <input type="text" name="housenumber[]" id="" />
        <input type="text" name="detail[]" id="" /><br />
        <input type="text" name="housenumber[]" id="" />
        <input type="text" name="detail[]" id="" /><br />
        <input type="submit" value="Submit" />
    </form>
</body>
</html> 
```

动作.php：

```
<?php
$total_housenumbers = count($_POST['housenumber']);
$vias = '';

for ($i = 0; $i < $total_housenumbers; $i++) {
    if ($_POST['housenumber'][$i] != '' && $_POST['detail'][$i] != '') {
        $vias .= $_POST['housenumber'][$i]. ' ' .$_POST['detail'][$i]. '<br />';
    }
}

echo $vias;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:59:38.650

要检查变量是否存在，您可以使用[isset()](http://php.net/manual/en/function.isset.php)函数对其进行检查，然后根据此决定打印什么。使用条件表达式它变成：

```
(isset($_POST['txt-via-hn10']) && isset($_POST['txt-via10']))
?'<vh9>'.$_POST['txt-via-hn10'].'</vh9><vi9>'.$_POST['txt-via10'].'</vi9>'
: '' 
```

至于您尝试生成的字符串，因为变量相似，您可以使用[for](http://it2.php.net/manual/en/control-structures.for.php)循环，使用我在上面写的条件来检查变量的存在并将行添加到`$vias`您已初始化的字符串循环外：

```
$number_of_field = count($_POST);
$vias = '<vias>';
for($i = 1; $i<=$number_of_field; $i++){
 $vias .=(isset($_POST['txt-via-hn'.$i]) && isset($_POST['txt-via'.$i]))
?'<vh'.($i-1).'>'.$_POST['txt-via-hn'.$i].'</vh'.($i-1).'><vi'.($i-1).'>'.$_POST['txt-via'.$i].'</vi'.($i-1).'>'
: ''
}
$vias .= '</vias>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:03:03.563

使用 php isset() 来测试是否设置了变量。并使用如下代码：

```
$vias = "<vias>";

if(isset($_POST['txt-via-hn2'])
{
$vas=$vas."<vh1>".$_POST['txt-via-hn2']."</vh1>";       
}

if(isset($_POST['txt-via2'])
{
$vas=$vas."<vi1>".$_POST['txt-via2']."</vi1>";      
}

... and continue as you need..

and at last 
$vias=$vias." </vias>"; 
```

# sql-server - 使用 SQL Server 脚本打包图像

> ID：11628267
> 
> 赞同：0
> 
> 时间：2012-07-24T09:48:43.233
> 
> 标签：sql-server

我有一个需要与 asp.net 应用程序一起部署的 sql server db。在安装应用程序时，通过批处理填充特定主表数据。在安装过程中，有些图像必须保存在数据库中。如何打包这些图像以及如何提供这些图像的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:12:48.467

在 SQL Server 中，它们最终将成为二进制数据。因此，您可以将它们编写为十六进制字符串，如下所示：

```
INSERT INTO myTable(ImageColumn)
VALUES (0x104321943324798543...) 
```

这是最简单的方法。有很多工具可以为您编写脚本，包括我编写的 IDE（您可以在[此处](http://www.atlantis-interactive.co.uk/products/sqleverywhere/default.aspx)找到）。

# javascript - 根据浏览器大小定位元素

> ID：11628273
> 
> 赞同：0
> 
> 时间：2012-07-24T09:49:15.110
> 
> 标签：javascript, html, css

我有一个关于在屏幕上定位元素的问题。当我启动我的程序时，它会计算浏览器的宽度和高度的一半。我只在开始时这样做。所以我的水平滚动条位于中心，但是当我在程序运行期间更改浏览器大小时，它当然不会位于中心。我怎样才能做到这一点？

我对宽度和高度的计算：

```
 function GetWidth()
{
      var x = 0;
      if (self.innerHeight)
      {
              x = self.innerWidth;
      }
      else if (document.documentElement && document.documentElement.clientHeight)
      {
              x = document.documentElement.clientWidth;
      }
      else if (document.body)
      {
              x = document.body.clientWidth;
      }
      return x;
}
function GetHeight()
{
      var y = 0;
      if (self.innerHeight)
      {
              y = self.innerHeight;
      }
      else if (document.documentElement && document.documentElement.clientHeight)
      {
              y = document.documentElement.clientHeight;
      }
      else if (document.body)
      {
              y = document.body.clientHeight;
      }
      return y;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:53:50.857

希望这会对您有所帮助：[媒体查询 CSS](http://css-tricks.com/css-media-queries/)

阅读这些内容，我用它来在手机、平板电脑和台式机之间显示和控制我的内容。

它非常手，易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:54:30.927

使用[onresize-event](https://developer.mozilla.org/en/DOM/window.onresize)重新调整您的 gui。

```
function resize() {
  // do something here
}

window.onresize = resize; 
```

# playframework - 是否可以在 CoffeeScript 文件中使用 Scala？

> ID：11628276
> 
> 赞同：3
> 
> 时间：2012-07-24T09:49:20.933
> 
> 标签：playframework, playframework-2.0

在 Rails 中，只需在 CoffeeScript 文件中使用 ERB 模板语言并更改文件扩展名，就可以在 CoffeeScript 文件中使用一些服务器端视图逻辑。

有没有办法在 Play 2.0 中做同样的事情——也就是说，使用 CoffeeScript 中 HTML 视图中使用的 Scala 来执行一些服务器端逻辑来修改脚本文件？

我想到的主要用例是通过一些通过 Scala 加载到脚本中的配置文件值来修改某些脚本的行为。我也欢迎 Play 2.0 以不同方式实现这一目标的最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:21:54.340

在 Play 1.2 中，我正在执行以下操作以在脚本中获取模板语言，假设您有 view.html 文件，请添加：

```
<script type="text/javascript" >
    #{include '/public/javascripts/script.js'/}
</script> 
```

然后，您可以在 script.js 中使用相同的模板表达式和变量来基于您的服务器逻辑构建动态 JavaScript。

# python - 通过 Python 理解符号表

> ID：11628278
> 
> 赞同：0
> 
> 时间：2012-07-24T09:49:29.423
> 
> 标签：python, data-structures

在阅读[本文](http://www.scribd.com/doc/1461552/A-technique-for-isolating-differences-between-files)时，我遇到了“符号表”一词。起初，我以为这只是字典的另一个词，但我越来越不确定，因为我尝试实现论文中描述的差异算法。

我已经在互联网上搜索了一个可以理解的解释，但我没有找到答案。

有人可以解释论文中符号表的含义，并可能在 Python 中提供它的基本实现（数据结构，而不是算法）吗？论文中的相关描述在标题3“算法”中

John Resig (@john-resig)[在 JavaScript 中提供了算法的实现](http://ejohn.org/projects/javascript-diff-algorithm/)，但我对 JavaScript 的熟练程度太有限，无法使用他的实现来了解数据结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:58:31.727

A "symbol table" is just what the name implies, a table of symbols. It's often implemented as an associative table, like a Python dictionary. Symbol tables are common in e.g. compilers, where you have to map things like variable and function names to their internal structures.

In relation to the paper you link to, the symbol table (dictionary) is indexed by the text of a line, and the data of each index is a pair of counters.

# mysql - MySql触发器，识别直接数据库访问

> ID：11628282
> 
> 赞同：1
> 
> 时间：2012-07-24T09:49:43.497
> 
> 标签：mysql, triggers

我`BEFORE UPDATE`在一张桌子上有一个触发器。现在在该触发器中，我想确定更新查询是从应用程序 (Java) 发送还是直接从数据库访问发送，例如来自 MySql 命令提示符的查询。

在 MySql 触发器中是否有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:56:04.330

不，触发器独立于客户端触发。它们不是为客户特定的问题而构建的。
因此，您找不到哪个客户端的语句导致触发器触发。

# class - 如何在 uml 类图中将数据与函数相关联

> ID：11628287
> 
> 赞同：1
> 
> 时间：2012-07-24T09:50:00.857
> 
> 标签：class, uml

我的类中有两个私有数据结构和五个函数，如何表示函数和类中数据结构之间的关系。例如：其中两个函数使用第一个数据结构，其他三个函数使用第二个数据结构。

另外我如何表示类中函数之间的关系。例如：在 5 个函数中，两个是公共的，三个是私有的，类中的一个公共函数调用其他三个私有函数。

如果这在类图中不相关，那么在 UML 中表示它的最佳解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:04:59.227

函数和字段的交互不会显示在类图中。

因此，您应该使用[序列图](http://www.ibm.com/developerworks/rational/library/3101.html)。但通常你不会显示对象中字段的交互。您在对象之间的函数调用级别上显示交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T11:52:40.530

两件事情。首先，UML 没有提供用于描述类中关系和结构的符号是有充分理由的。类应该是数据和功能的内聚抽象。因此，如果您在一个类中有任何重要的结构，您应该质疑它是否应该分成 2 个（或更多）有凝聚力的抽象类。

好的。这就是背景。根据您的描述，如何：

*   为每个数据结构绘制一个类，为每个结构成员绘制一个属性
*   为每个对数据结构进行操作的函数添加一个方法到每个类
*   添加捕获它们关系的类之间的关联
*   将上面的所有位放在一个包中以表示模块

最后一点 - 就像所有这些事情一样 - 是使用该工具来说明您想要什么。不要过度受建模语言规则的约束。重要的是该图表可以有效地与您和您的合作者沟通。满足“语言律师”的考虑应该少得多。

hth。

# ruby-on-rails - rails carmen country_select 没有表单对象的助手

> ID：11628291
> 
> 赞同：1
> 
> 时间：2012-07-24T09:50:05.900
> 
> 标签：ruby-on-rails

我的表格没有绑定到特定的模型，看起来像这样：

```
<%= form_tag(:controller => 'orders' , :action => 'process_credit_card') do  %>
    ... bunch of fields ...
<% end %> 
```

[carmen-rails](https://github.com/jim/carmen-rails)的`country_select`助手看起来像这样

```
 <%= f.country_select :country_code, {priority: %w(US CA)}, prompt: 'Please select a country' %> 
```

但是我没有表单对象`f`，我使用助手`<%= text_field_tag 'billing_address[phone]' %>`来创建我的表单，有没有办法我仍然可以在这种表单中使用 carmen？

更新：我正在使用 ActiveMerchant 进行支付处理，我可以创建一个表单，`form_for`而不是，`form_tag`但我不知道如何，任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:54:14.267

这应该工作......

```
<%= country_select :country_code, {priority: %w(US CA)}, prompt: 'Select' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T06:51:24.983

请用

```
<%= country_select(nil,:country, { priority: %w(US CA) , prompt: 'Select Country'},:class=>"form-control") %> 
```

与上面一起使用`form_tag`

```
<%= f.country_select :country, {priority: %w(US CA), prompt: 'Select Country'},:class=>"form-control" %> 
```

并在上面使用`form_for`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T06:39:56.367

我迟到了几年，但今晚我遇到了这个问题，并通过浏览 carmen-rails 源代码找到了一个对我有用的解决方案。请注意，第二个哈希（作为第四个参数）可以包含 HTML 选项，例如`class`.

```
<%= country_select(nil, :country_code, { priority: %w(US CA) }, {}) %> 
```

对于其他解决方案（没有`nil`作为第一个参数），我的 AJAX 搜索功能出现了序列化问题。整个哈希（包括优先级和其他代码）将随请求序列化。当像我上面那样调用它时，这不再是一个问题，只有国家代码被序列化。希望这将有助于将来遇到与我们相同的问题的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-22T07:13:33.237

正确的方法不是使用`country_select`gem，而是依赖它有`countries`gem 和普通 Rails 表单助手`select_tag`和`options_for_select`：[使用 country_select gem with form_tag and no model](https://stackoverflow.com/questions/28410077/using-country-select-gem-with-form-tag-and-no-model/34940945#34940945)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-24T10:24:22.767

尝试：

`<%= country_select_tag :country_code, {priority: %w(US CA)}, prompt: 'Please select a country' %>`

# winapi - 如何在内存缓冲区上绘制文本

> ID：11628297
> 
> 赞同：1
> 
> 时间：2012-07-24T09:50:16.183
> 
> 标签：winapi, window

我想在内存缓冲区上绘制一些文本，但不知道如何。请帮忙，非常感谢！代码：

```
 widht = 640;
 height = 480;
 pBuf = malloc( width * 3 * height );

 memset( pBuf, 0, width * 3 * height );

 //DrawText is the function that needs to be implemented, and I don't know how to do it.
 DrawText( "this is the text that i want to draw on the buffer", pBuf, width, height, 3 );

 //now there is text on the memory buffer pointed to by pBuf. 
```

# azure - 在 Windows azure 中进行聚类

> ID：11628299
> 
> 赞同：-1
> 
> 时间：2012-07-24T09:50:23.117
> 
> 标签：azure, cloud, load-balancing, hyper-v, hypervisor

在 Windows azure 中可以进行集群吗？我们可以将 azure vms 转移到 hyper v 或任何其他虚拟机管理程序和副 varsa 吗？如果有人对此有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:09:57.813

这可以通过[IaaS 功能 - 虚拟机](https://www.windowsazure.com/en-us/home/scenarios/virtual-machines/)来实现。此外，还可以将您的 VM 从 Windows Azure 虚拟机转移到本地 Hyper-V 或任何其他支持 VHD 格式的管理程序。但是，您当然必须完全自己管理操作系统级别的功能！

您可以查看Mark Russinovich 的[这个技术视频](http://blogs.technet.com/b/keithmayer/archive/2012/06/15/what-s-supported-inside-a-windows-azure-virtual-machine-windowsazure-msteched-itcamp.aspx)以获取更多信息。

# mercurial - 如何为共享组件和依赖项使用 mercurial subrepos？

> ID：11628301
> 
> 赞同：11
> 
> 时间：2012-07-24T09:50:24.633
> 
> 标签：mercurial, shared-libraries, dependency-management, mercurial-subrepos

我们用 C# 开发 .NET 企业软件。我们正在寻求改进我们的版本控制系统。我以前使用过 mercurial，并且一直在我们公司尝试使用它。但是，由于我们开发企业产品，因此我们非常关注可重用的组件或模块。我一直在尝试使用 mercurial 的子存储库来管理组件和依赖项，但遇到了一些困难。以下是源代码控制/依赖管理的基本要求：

1.  可重复使用的组件
    1.  由源共享（用于调试）
    2.  依赖于 3rd 方二进制文件和其他可重用组件
    3.  可以在消费产品的背景下开发并致力于源代码控制
2.  依赖项
    1.  产品依赖于 3rd 方二进制文件和其他可重用组件
    2.  依赖有自己的依赖
    3.  应通知开发人员依赖项中的版本冲突

这是我一直在使用的 mercurial 结构：

## 一个可重用的组件：

```
SHARED1_SLN-+-docs
            |
            +-libs----NLOG
            |
            +-misc----KEY
            |
            +-src-----SHARED1-+-proj1
            |                 +-proj2
            |
            +-tools---NANT 
```

## 第二个可重用组件，使用第一个：

```
SHARED2_SLN-+-docs
            |
            +-libs--+-SHARED1-+-proj1
            |       |         +-proj2
            |       |
            |       +-NLOG
            |
            +-misc----KEY
            |
            +-src-----SHARED2-+-proj3
            |                 +-proj4
            |
            +-tools---NANT 
```

## 消耗这两种成分的产品：

```
PROD_SLN----+-docs
            |
            +-libs--+-SHARED1-+-proj1
            |       |         +-proj2
            |       |
            |       +-SHARED2-+-proj3
            |       |         +-proj4
            |       |
            |       +-NLOG
            |
            +-misc----KEY
            |
            +-src-----prod----+-proj5
            |                 +-proj6
            |
            +-tools---NANT 
```

## 笔记

1.  回购是大写
2.  所有子回购都被假定为子回购
3.  第 3 方（二进制）库和内部（源）组件都是位于 libs 文件夹中的子存储库
4.  第 3 方库保存在单独的 mercurial 存储库中，以便使用项目可以引用特定版本的库（即旧项目可能引用 NLog v1.0，新项目可能引用 NLog v2.0）。
5.  所有 Visual Studio .csproj 文件都位于第 4 级（proj* 文件夹），允许相对引用依赖项（即所有引用 NLog 的 Visual Studio 项目的 ../../../libs/NLog/NLog.dll）
6.  所有 Visual Studio .sln 文件都位于第二级（src 文件夹），因此在将组件“共享”到使用组件或产品时不会包含它们
7.  开发人员可以自由组织他们认为合适的源文件，只要源是使用 Visual Studio 项目的 proj* 文件夹的子级（即 proj* 文件夹可以有 n 个子级，包含各种源/资源）
8.  如果 Bob 正在开发 SHARED2 组件和 PROD1 产品，那么他在 PROD1_SLN 存储库中更改 SHARED2 源（比如属于 proj3 的源）并提交这些更改是完全合法的。我们不介意有人在消费项目的上下文中开发图书馆。
9.  内部开发的组件（SHARED1 和 SHARED2）通常由源包含在使用项目中（在 Visual Studio 中添加对项目的引用而不是浏览到 dll 引用）。这允许增强调试（单步执行库代码），允许 Visual Studio 管理何时需要重建项目（修改依赖项时），并允许在需要时修改库（如上述注释中所述）。

## 问题

1.  如果 Bob 在 PROD1 上工作，而 Alice 在 SHARED1 上工作，那么 Bob 怎么知道 Alice 何时将更改提交到 SHARED1。目前使用 Mercurial，Bob 被迫在每个子存储库中手动拉取和更新。如果他从 PROD_SLN 存储库推/拉到服务器，他永远不知道子存储库的更新。[Mercurial wiki](https://www.mercurial-scm.org/wiki/Subrepository?action=show&redirect=Subrepositories#Synchronizing_in_subrepositories)对此进行了描述。当 Bob 从服务器中提取最新的 PROD_SLN 时，如何通知他子存储库的更新？理想情况下，应该通知他（最好在拉取期间），然后必须手动决定他要更新哪些子存储库。

2.  假设 SHARED1 引用 NLog v1.0（mercurial 中的 commit/rev abc），SHARED2 引用 Nlog v2.0（mercurial 中的 commit/rev xyz）。如果 Bob 在 PROD1 中吸收了这两个组件，则应该让他意识到这种差异。虽然从技术上讲，Visual Studio/.NET 将允许 2 个程序集引用不同版本的依赖项，但我的结构不允许这样做，因为 NLog 的路径对于依赖于 NLog 的所有 .NET 项目都是固定的。Bob 怎么知道他的两个依赖有版本冲突？

3.  如果 Bob 正在为 PROD1 设置存储库结构并希望包含 SHARED2，那么他如何知道 SHARED2 需要哪些依赖项？使用我的结构，他必须手动克隆（或在服务器上浏览）SHARED2_SLN 存储库，然后查看 libs 文件夹，或者查看 .hgsub 文件以确定他需要包含哪些依赖项。理想情况下，这将是自动化的。如果我在我的产品中包含 SHARED2，则 SHARED1 和 NLog 也会自动包含在内，如果与其他依赖项存在版本冲突，则会通知我（参见上面的问题 2）。

## 更大的问题

1.  mercurial 是正确的解决方案吗？

2.  有更好的水银结构吗？

3.  这是对 subrepos 的有效使用（即 Mercurial 开发人员将[subrepos](https://www.mercurial-scm.org/wiki/Subrepository)标记为最后手段的功能）？

4.  使用 mercurial 进行依赖管理有意义吗？我们可以使用另一个工具进行依赖管理（可能是内部 NuGet 提要？）。虽然这对 3rd 方依赖项很有效，但它确实会给内部开发的组件带来麻烦（即，如果它们是积极开发的，开发人员将不得不不断更新提要，我们必须在内部为它们提供服务，而且它不允许由消费项目修改的组件（注 8 和问题 2）。

5.  您有更好的企业 .NET 软件项目解决方案吗？

## 参考

I have read several SO questions and found [this one](https://stackoverflow.com/q/6020936/880509) to be helpful, but the [accepted answer](https://stackoverflow.com/a/6030180/880509) suggests using a dedicated tool for dependencies. While I like the features of such a tool it does not allowed for dependencies to be modified and committed from a consuming project (see Bigger Question 4).

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T21:52:35.530

这可能不是您要寻找的答案，但我们最近有新手 Mercurial 用户使用子存储库的经验，我一直在寻找机会传递我们的经验......

总之，我基于经验的建议是：**无论 Mercurial 子存​​储库多么吸引人，都不要使用它们**。相反，找到一种方法来并排布置您的目录，并调整您的构建以应对这种情况。

然而，将子回购中的修订与父回购中的修订联系在一起似乎很有吸引力，但它在实践中是行不通的。

在转换的所有准备过程中，我们收到了来自多个不同来源的建议，即子存储库很脆弱并且没有很好地实现 - 但我们还是继续进行，因为我们希望在存储库和子存储库之间进行原子提交。这个建议——或者我对它的理解——更多地谈论了原则而不是实际后果。

只有当我们使用 Mercurial 和一个子回购时，我才真正正确地理解了这些建议。这里（根据记忆）是我们遇到的各种问题的示例。

*   您的用户最终将与更新和合并过程作斗争。
*   有些人会更新父仓库而不是子仓库
*   有些人会从子仓库推送，ang .hgsubstate 不会得到更新。
*   您最终将“丢失”在子回购中所做的修订，因为有人会在合并后设法使 .hgsubstate 处于不正确的状态。
*   一些用户会遇到 .hgsubstate 已更新但子 repo 没有更新的情况，然后您会收到非常神秘的错误消息，并且会花费很多时间来弄清楚发生了什么。
*   而且，如果您为发布进行标记和分支，则有关如何为父仓库和子仓库正确执行此操作的说明将长达数十行。（我什至有一个很好的驯服的 Mercurial 专家帮我写说明！）

所有这些事情在专家用户手中已经够烦人了——但是当你向新手用户推出 Mercurial 时，它们就是一场真正的噩梦，也是浪费大量时间的根源。

因此，在投入大量时间通过子回购进行转换后，几周后，我们将子回购转换为回购。因为我们在通过 .hgsubstate 引用子存储库的转换中有大量历史记录，所以它给我们留下了更复杂的东西。

我只希望我能在更早的时候真正欣赏所有建议的实际后果，例如在 Mercurial 的[“最后手段的特征”](https://www.mercurial-scm.org/wiki/FeaturesOfLastResort)页面中：

> **但我需要管理子项目！**
> 
> 再说一次，不要那么肯定。像 Mozilla 这样具有大量依赖项的重要项目在不使用子存储库的情况下也可以正常工作。如果不使用 subrepos，大多数较小的项目几乎肯定会更好。

* * *

**编辑：关于[shell 回购的想法](https://www.mercurial-scm.org/wiki/Subrepository#Use_a_thin_shell_repository_to_manage_your_subrepositories)**

*有了免责声明，我对他们没有任何经验......*

不，我不认为他们中的很多人是。您仍在使用子存储库，因此所有相同的用户问题都适用（除非您可以为每个步骤提供包装脚本，当然，以消除人类提供正确选项来处理子存储库的需要。）

另请注意，您引用的 wiki 页面确实列出了 shell 存储库的一些特定问题：

> *   过于严格地跟踪 project/ 和 somelib/ 之间的关系
> *   无法检查或推送项目/如果 somelib/ 源 repo 变为
> *   不可用 缺乏对递归 diff、log 和
> *   提交的状态递归性质令人惊讶

* * *

**编辑 2 - 进行试验，涉及所有用户**

我们真正开始意识到我们遇到问题的时候是多个用户开始提交、拉取和推送——包括对子存储库的更改。对我们来说，现在回应这些问题已经太晚了。如果我们早点知道他们，我们本可以更轻松、更简单地做出回应。

所以在这一点上，我认为我能提供的最好建议是建议您**在布局确定之前对项目布局进行试运行**。

我们离开全面试验直到太晚才做出改变，即便如此，人们也只在父 repo 中进行了更改，而不是在子 repo 中进行了更改——所以我们直到太晚才看到全貌。

换句话说，无论您考虑什么布局，在该布局中创建一个存储库结构，并让很多人进行编辑。尝试将足够的真实代码放入各种 repos/sub-repos 中，以便人们可以进行真正的编辑，即使它们是一次性的。

可能的结果：

*   您可能会发现一切正常 - 在这种情况下，您将花费一些时间来获得确定性。
*   另一方面，您可能会比花时间试图找出结果更快地发现问题
*   您的用户也会学到很多东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T09:01:55.090

# 问题一：

此命令在父“shell”存储库中执行时将遍历所有子存储库并从默认拉取位置列出不存在的变更集：

```
hg incoming --subrepos 
```

如果您选中了“--subrepos”选项（在同一窗格上），则可以通过单击 TortoiseHg 中“同步”窗格上的“传入”按钮来完成相同的操作。

感谢 mercurial IRC 频道的用户在这里提供帮助。

# 问题 2 和 3：

首先，我需要修改我的 repo 结构，以便父 repos 是[hg wiki 上推荐](https://www.mercurial-scm.org/wiki/Subrepository#Use_a_thin_shell_repository_to_manage_your_subrepositories)的真正的“shell” repos 。我将把这一点发挥到极致，说**shell 不应该包含任何内容，只包含 subrepos 作为 children**。总之，将 src 重命名为 main，将 docs 移动到 main 下的 subrepo 中，并将 prod 文件夹更改为 subrepo。

## SHARED1_SLN：

```
SHARED1_SLN-+-libs----NLOG
            |
            +-misc----KEY
            |
            +-main----SHARED1-+-docs
            |                 +-proj1
            |                 +-proj2
            |
            +-tools---NANT 
```

## SHARED2_SLN：

```
SHARED2_SLN-+-libs--+-SHARED1-+-docs
            |       |         +-proj1
            |       |         +-proj2
            |       |
            |       +-NLOG
            |
            +-misc----KEY
            |
            +-main----SHARED2-+-docs
            |                 +-proj3
            |                 +-proj4
            |
            +-tools---NANT 
```

## PROD_SLN：

```
PROD_SLN----+-libs--+-SHARED1-+-docs
            |       |         +-proj2
            |       |         +-proj2
            |       |
            |       +-SHARED2-+-docs
            |       |         +-proj3
            |       |         +-proj4
            |       |
            |       +-NLOG
            |
            +-misc----KEY
            |
            +-main----PROD----+-docs
            |                 +-proj5
            |                 +-proj6
            |
            +-tools---NANT 
```

1.  所有共享库和产品都有自己的存储库（SHARED1、SHARED2 和 PROD）。
2.  如果您需要独立处理共享库或产品，则有一个可用的 shell（我的 repos 以 _SLN 结尾），它使用 hg 来管理依赖项的修订。shell 只是为了方便，因为它*不包含任何内容，*只有 subrepos。
3.  在发布共享库或产品的发布时，开发人员应列出用于创建发布的所有依赖项及其 hg revs/changesets（或最好是人类友好的标签）。此列表应保存在 lib 或产品（SHARED1、SHARED2 或 PROD）的 repo 中的文件中，*而不是 shell*中。请参阅下面的注释 A，了解这如何解决问题 2 和 3。
4.  如果我发布共享库或产品的版本，我*应该*将匹配的标签放在项目 repo 中，并且它是 shell 以方便起见，但是，如果 shell 出现问题（@Clare 的[回答](https://stackoverflow.com/a/11639890/880509)中的真实经验表达的担忧)，这真的不重要，因为外壳本身是*愚蠢*的并且不包含任何内容。
5.  Visual Studio sln 文件再次进入共享库或产品存储库（SHARED1、SHARED2 或 PROD）的根目录，*而不是 shell*。结果是如果我在 PROD 中包含 SHARED1，我最终可能会得到一些我从未打开过的额外解决方案，但这并不重要。此外，如果我真的想在 SHARED1 上工作并运行它的单元测试（在 PROD_SLN shell 中工作时），这真的很容易，只需打开上述解决方案即可。

## 注一：

关于上面的第 3 点，如果依赖文件使用类似于 .hgsub 的格式但添加了 rev/changeset/tag，则可以自动获取依赖项。例如，我想在我的新产品中使用 SHARED1。将 SHARED1 克隆到我的 libs 文件夹并更新到提示或最后一个版本标签。现在，我需要查看依赖项文件并 a) 将依赖项克隆到正确的位置 b) 更新到指定的 rev/changeset/tag。自动化这一点非常可行。更进一步，它甚至可以跟踪 rev/changeset/tag 并提醒开发人员共享库之间存在依赖冲突。

如果 Alice 正在积极开发 SHARED1 而 Bob 正在开发 PROD，则会留下一个漏洞。如果 Alice 更新 SHARED1_SLN 以使用 NLog v3.0，Bob 可能永远不会知道这一点。如果 Alice 更新她的依赖文件以反映更改，那么 Bob 确实有信息，他只需要知道更改。

# 更大的问题 1 和 4：

我相信这是一个源代码控制问题，而不是可以通过依赖项管理工具解决的问题，因为它们通常使用二进制文件并且只*获取*依赖项（不允许将更改提交回依赖项）。我的依赖问题并不是 Mercurial 独有的。根据我的经验，所有源代码控制工具都有同样的问题。SVN 中的一种解决方案是仅使用 svn:externals（或 svn 副本）并递归地让每个组件都包含其依赖项，从而创建一个可能巨大的树来构建产品。然而，这在 Visual Studio 中分崩离析，我真的只想包含一个共享项目的实例并在任何地方引用它。正如@Clare 的[回答](https://stackoverflow.com/a/11639890/880509)和[Greg 对我发给 hg 邮件列表的电子邮件的回复所暗示的那样](http://www.selenic.com/pipermail/mercurial/2012-July/043713.html), 尽量保持元件平整。

# 更大的问题 2 和 3：

正如我上面所阐述的，有一个更好的结构。我相信我们有一个强大的使用 subrepos 的用例，我没有看到可行的替代方案。正如@Clare 的[回答](https://stackoverflow.com/a/11639890/880509)中提到的，有[一个阵营认为可以在没有 subrepos 的情况下管理依赖项](https://www.mercurial-scm.org/wiki/FeaturesOfLastResort#But_I_need_to_have_managed_subprojects.21)。但是，我还没有看到任何证据或实际参考来支持这一说法。

# 更大的问题5：

仍然对更好的想法持开放态度......

# iphone - 在 facebook 和 twitter 上分享时 sharekit/sharekit 不显示链接

> ID：11628304
> 
> 赞同：0
> 
> 时间：2012-07-24T09:50:30.603
> 
> 标签：iphone, ios, sharekit

我正在使用 sharekit/sharekit API 通过邮件、twitter、facebook 共享

```
NSDictionary *table = [[NSDictionary alloc] initWithObjectsAndKeys:@"SHKTwitter", SHKLocalizedString(@"Twitter", nil), @"SHKFacebook", SHKLocalizedString(@"Facebook", nil), @"SHKMail", SHKLocalizedString(@"Email", nil),@"SHKTextMessage", SHKLocalizedString(@"Text", nil),nil];

Class SharersClass = NSClassFromString([table objectForKey:"Facebook"]);
NSString *shareMsg = @"share message";
NSURL *shareUrl = [NSURL URLWithString:myURL];
SHKItem *item = [SHKItem text:shareMsg];
item.url = shareUrl;
[SharersClass performSelector:@selector(shareItem:) withObject:item]; 
```

共享有效，但我的问题是 url 没有在 facebook 弹出窗口中显示给用户，但是它显示在 facebook.com 的用户墙上......同样的情况发生在 twitter 上......但链接出现在邮件中和文本共享...知道可能是什么问题吗？

# objective-c - 链接到图书馆

> ID：11628314
> 
> 赞同：1
> 
> 时间：2012-07-24T09:51:10.283
> 
> 标签：objective-c, xcode, macos, frameworks, shared-libraries

我`ImageMagick`通过安装`MacPorts`。所以所有`library`文件都在`/opt/local/lib`，标题在`/opt/local/include/ImageMagick`. 它在我的 Mac 上运行良好。在 xCode`Build Settings - > Search Paths`中，一切看起来都设置好了。

![在此处输入图像描述](../Images/d3bb4f785fc58868de53e42beb4d6598.png)

添加`library`文件到`Linked Frameworks and Libraries`

![在此处输入图像描述](../Images/eba9096d419d78061ae16c395ee56061.png)

当我构建我的应用程序时，它看起来正在运行。但是，当我尝试在未安装 ImageMagick 的其他计算机上运行构建的应用程序时，会出现以下错误消息：

![在此处输入图像描述](../Images/5efc306caa51afd6418a125e31aac0b2.png)

如何修复它以使用户能够使用我的应用程序而无需额外安装 ImageMagick 等？如何将所需的库文件链接到我的应用程序（在项目包中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:58:20.207

现在您的链接库是从 /opt/local/lib/ 引用的 ---

您的问题的解决方案：

1.  确保安装应用程序的位置支持库安装到正确的位置
2.  使用 app bundle 携带动态库，并从 app bundle 中引用 dyld，这将与 app bundle 启动路径相关。

更新：如果您正在寻找第二个选项 --- 使用此选项，您的库将被放置在您的应用程序包中......因此应用程序可以从应用程序包中引用库。

1.  预编译的动态库可以与应用程序一起携带——在xCode中——>转到目标的构建阶段——>构建阶段（复制文件）......这将确保你的动态库被复制到你的应用程序包中...
2.  更新每个动态库中的“安装名称” --- 您可以使用“otool”命令了解预编译库的当前安装路径，您可以在终端中使用“install_name_tool”命令预编译库安装路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:39:49.117

ImageMagick 论坛不支持它，StackOverflow 不支持，所以我想这是不可能的......

# postgresql - 将 plpgsql 递归函数翻译回 pg8.1

> ID：11628315
> 
> 赞同：0
> 
> 时间：2012-07-24T09:51:12.417
> 
> 标签：postgresql, recursion, plpgsql

我有以下 plpgsql 函数，该函数在 pg 8.3 及更高版本上运行良好，但我需要将其转换回 pg 8.1 数据库并且我无法缝合以使其正确。

有小费吗？我需要摆脱“返回查询”，因为它尚未在 8.1 中引入......

```
CREATE OR REPLACE FUNCTION specie_children (specie_id INT, self BOOLEAN)
      RETURNS SETOF specie AS
    $BODY$
    DECLARE
      r specie%ROWTYPE;
    BEGIN
      IF self THEN
        RETURN QUERY SELECT * FROM specie WHERE specieid = specie_id;
      END IF;
      FOR r IN SELECT * FROM specie WHERE parent = specie_id
      LOOP
        RETURN NEXT r;
        RETURN QUERY SELECT * FROM specie_children(r.specieid, FALSE);
      END LOOP;
      RETURN;
    END
    $BODY$
    LANGUAGE 'plpgsql'; 
```

我该如何翻译这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:06:23.713

```
RETURN QUERY SELECT * FROM specie_children(r.specieid, FALSE); 
```

可以改写为

```
for r2 in select * from specie_children(r.specieid, FALSE)
loop
    return next r2
end loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:41:30.070

快速演示。基本上@maniek 已经提供了答案。

测试表：

```
CREATE TEMP TABLE specie(specieid int, parent int);
INSERT INTO specie VALUES
 (1,0), (2,0), (3,0)
,(11,1), (12,1), (13,1)
,(111,11), (112,11), (113,11); 
```

改写函数：

```
CREATE OR REPLACE FUNCTION specie_children (specie_id INT, self BOOLEAN)
  RETURNS SETOF specie AS
$BODY$
DECLARE
   r specie%ROWTYPE;
BEGIN
IF self THEN
   FOR r IN SELECT * FROM specie WHERE specieid = $1
   LOOP
      RETURN NEXT r;
   END LOOP;
END IF;

FOR r IN SELECT * FROM specie WHERE parent = $1
LOOP
   RETURN NEXT r;
   FOR r IN SELECT * FROM specie_children(r.specieid, FALSE)
   LOOP
      RETURN NEXT r;
   END LOOP;
END LOOP;

RETURN;
END;
$BODY$
LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM specie_children (1, true); 
```

回报：

```
specieid | parent
---------+-------
1        | 0
11       | 1
111      | 11
112      | 11
113      | 11
12       | 1
13       | 1 
```

# sql-server-2012 - SQL2012 LocalDB：如果当前已安装，如何检查 c#？

> ID：11628316
> 
> 赞同：22
> 
> 时间：2012-07-24T09:51:11.990
> 
> 标签：sql-server-2012, localdb

如果当前安装了 LocalDB，如何签入 c# 代码？另外，如何检查系统中是否存在 SQLNCLI11？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T10:35:52.360

通过查找此注册表项检查是否安装了 LocalDB：

```
[HKLM\SOFTWARE\Microsoft\Microsoft SQL Server Local DB\Installed Versions\11.0] 
```

SQLNCLI11 - 检查文件版本和此文件的存在：`C:\WINDOWS\system32\sqlncli.dll`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-23T21:50:56.287

这是一个检查 LOCALDB 的 VB.NET 示例

```
Public Shared Function CheckLocalDBExists() As Boolean
    Dim s As String = ""
    Dim reg As RegistryKey
    Dim rtn As Boolean = False
    reg = Registry.LocalMachine.OpenSubKey("SOFTWARE\Microsoft\Microsoft SQL Server Local DB\Installed Versions\12.0", True)
    Try
        s = reg.GetValue("ParentInstance", "").ToString
        reg.Close()
    Catch ex As Exception
        s = Nothing
    End Try
    'MessageBox.Show(s)
    If s = "MSSQL12E.LOCALDB" Then
        rtn = True
    End If
    Return rtn
End Function 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-05T21:55:03.613

我正在使用[这个问题的答案](https://stackoverflow.com/questions/3855956/check-if-an-executable-exists-in-the-windows-path) 来检查是否存在`sqllocaldb.exe`

像这样：

```
public static bool IsLocalDBInstalled()
{
    return ExistsOnPath("SqlLocalDB.exe"); ;
}

public static bool ExistsOnPath(string fileName)
{
    return GetFullPath(fileName) != null;
}

public static string GetFullPath(string fileName)
{
    if (File.Exists(fileName))
        return Path.GetFullPath(fileName);

    var values = Environment.GetEnvironmentVariable("PATH");
    foreach (var path in values.Split(';'))
    {
        var fullPath = Path.Combine(path, fileName);
        if (File.Exists(fullPath))
            return fullPath;
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-25T14:18:26.297

我发现这个[nuget](https://github.com/martincostello/sqllocaldb)包包含使用 SQLLocalDB 具有以下命令

```
SqlLocalDbApi.IsLocalDBInstalled() 
```

# windows-8 - 使用 Sharpdx 库 (WinRT) 从 xaml 控件创建位图图像或内存流

> ID：11628322
> 
> 赞同：0
> 
> 时间：2012-07-24T09:51:37.833
> 
> 标签：windows-8, windows-runtime, sharpdx

是否可以从 Sharpdx 创建位图图像或 xaml 控件的内存流 say(gird, canvas)。我需要从我的一个窗口创建一个图像，以实现辅助磁贴 Pin 启动功能。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-07-24T18:16:10.277

我一直在使用 Windows.Storage.Streams 中的 RandomAccessStreamReference 类来创建位图。一个例子（这实际上是共享代码）：

```
 var reference = RandomAccessStreamReference.CreateFromUri(new Uri(item.ImagePath.AbsoluteUri));
        request.Data.SetBitmap(reference); 
```

还要记住，对于固定辅助磁贴，您可以传入磁贴上徽标的 URI，而无需创建实际的位图，只要徽标是应用程序包的一部分，如下所示：

```
 var uri = new Uri(item.TileImagePath.AbsoluteUri);

    var tile = new SecondaryTile(
            item.UniqueId,              // Tile ID
            item.ShortTitle,            // Tile short name
            item.Title,                 // Tile display name
            item.UniqueId,              // Activation argument
            TileOptions.ShowNameOnLogo, // Tile options
            uri                         // Tile logo URI
        );

    await tile.RequestCreateAsync(); 
```

最后，如果要在辅助磁贴上使用的图像是在线的，而不是应用程序包的一部分，则必须先将其复制到本地，然后才能使用它。这是一些执行此操作的代码：

```
 // This is the URI that you will then pass as the last parameter into 
    // the Secondary Tile constructor, like the code above:
    var logoUri = await GetLocalImageAsync(restaurant.ImagePath, restaurant.Key);

    // and here's the method that does the meat of the work:

/// <summary>
/// Copies an image from the internet (http protocol) locally to the AppData LocalFolder.
/// This is used by some methods (like the SecondaryTile constructor) that do not support 
/// referencing images over http but can reference them using the ms-appdata protocol.  
/// </summary>
/// <param name="internetUri">The path (URI) to the image on the internet</param>
/// <param name="uniqueName">A unique name for the local file</param>
/// <returns>Path to the image that has been copied locally</returns>
private async Task<Uri> GetLocalImageAsync(string internetUri, string uniqueName)
{
    if (string.IsNullOrEmpty(internetUri))
    {
        return null;
    }

    using (var response = await HttpWebRequest.CreateHttp(internetUri).GetResponseAsync())
    {
        using (var stream = response.GetResponseStream())
        {
            var desiredName = string.Format("{0}.jpg", uniqueName);
            var file = await ApplicationData.Current.LocalFolder.CreateFileAsync(desiredName, CreationCollisionOption.ReplaceExisting);

            using (var filestream = await file.OpenStreamForWriteAsync())
            {
                await stream.CopyToAsync(filestream);
                return new Uri(string.Format("ms-appdata:///local/{0}.jpg", uniqueName), UriKind.Absolute);
            }
        }
    }
} 
```

# php - 使用 PHP GD 展平多个透明 PNG

> ID：11628324
> 
> 赞同：2
> 
> 时间：2012-07-24T09:51:46.163
> 
> 标签：php, image-processing, png, gd, transparent

我正在构建一个产品配置模块，该模块需要将多个相同大小的透明 PNG（代表产品部件）拼合到一个图像上。

起初我尝试了这个，它合成了 3 张图像，但在黑色背景上：

```
<?php

$x = 500;
$y = 500;

$final_img = imagecreatetruecolor($x, $y);
$images = array('1.png', '2.png', '3.png');

foreach ($images as $image) {
    $image_layer = imagecreatefrompng($image);
    imagecopy($final_img, $image_layer, 0, 0, 0, 0, $x, $y);
}

imagealphablending($final_img, true);
imagesavealpha($final_img, true);

header('Content-Type: image/png');
imagepng($final_img);

?> 
```

然后我发现这个功能可以修复黑色背景问题并给我一个透明的，但现在只显示添加到合成中的最后一张图像。

```
<?php

$x = 500;
$y = 500;

function imageCreateTransparent($x, $y) {
    $image = imagecreatetruecolor($x, $y);
    imagealphablending($image, false);
    imagesavealpha($image, true);
    $col = imagecolorallocatealpha($image,255,255,255,127);
    imagefill($image, 0, 0, $col);
    return $image;
}

$final_img = imageCreateTransparent($x, $y);
$images = array('1.png', '2.png', '3.png');

foreach ($images as $image) {
    $image_layer = imagecreatefrompng($image);
    imagecopy($final_img, $image_layer, 0, 0, 0, 0, $x, $y);
}

imagealphablending($final_img, true);
imagesavealpha($final_img, true);

header('Content-Type: image/png');
imagepng($final_img);

?> 
```

如何获得透明背景并显示合并在一起的所有 3 张图像。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:33:51.663

我已经修改了您的第一个示例以使其正常工作。

```
 <?php

$x = 500;
$y = 500;

$final_img = imagecreatetruecolor($x, $y);

imagesavealpha($final_img, true);

$trans_colour = imagecolorallocatealpha($final_img, 0, 0, 0, 127);
imagefill($final_img, 0, 0, $trans_colour);

$images = array('1.png', '2.png', '3.png');

foreach ($images as $image) {
    $image_layer = imagecreatefrompng($image);
    imagecopy($final_img, $image_layer, 0, 0, 0, 0, $x, $y);
}

//imagealphablending($final_img, true);
imagesavealpha($final_img, true);
imagealphablending($final_img, true);

header('Content-Type: image/png');
imagepng($final_img);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T00:55:12.017

你可以试试这个[库](http://phpimagemagician.jarrodoberto.com)来编译透明图像。只需将要分层的每个图像视为新的水印图像。

# php - php随机图像，其中宽度等于

> ID：11628333
> 
> 赞同：0
> 
> 时间：2012-07-24T09:52:21.117
> 
> 标签：php, arrays, image, width

我目前有这个片段，它吐出一个随机图像

```
$imgDir  = 'images/';
$images  = glob($imagesDir . '*.{jpg}', GLOB_BRACE);
$randimg = $images[array_rand($images)]; 
```

但我希望图像具有一定的宽度（600px），而不是使用 CSS 来扭曲图像有没有一种方法可以使用 PHP 结合上面的代码片段来检查图像宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:55:23.140

是的，您可以浏览每个单独的文件并使用[`getimagesize`](http://php.net/getimagesize).

这当然是每次都非常昂贵的操作。相反，只需执行一次并将大小作为文件名的一部分（例如`foobar_500.jpg`），然后`glob`使用数据库来组织您的图像，以从您可以保存此类元数据并对其进行查询的位置开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:00:16.653

这将确保您只从宽度为 600 的图像中选择随机图像

```
$imgDir = 'images/';
$images = glob($imgDir . '*.{jpg}', GLOB_BRACE);

$arr_images_600 = array();
foreach ($images as $img)
{
  list($width, $height, $type, $attr) = getimagesize($img);
  if ($width == 600) { $arr_images_600[] = $img; }
}
$randimg = $images[array_rand($arr_images_600)]; 
```

# html - 列包含在 div 中时不继承宽度

> ID：11628337
> 
> 赞同：0
> 
> 时间：2012-07-24T09:52:37.223
> 
> 标签：html, xml, xslt, pdf, xslt-1.0

假设我们有一个包含许多行的表。通过 XSLT 将我的 XML 转换为 PFD 时，我希望某些行不会跨分页符拆分。目前我有

```
<table>
  <tr>...</tr>
  <tr>...</tr>
  <div style="page-break-inside:avoid">
    <tr>...</tr>
    <tr>...</tr>
  </div>
  <tr>...</tr>
</table> 
```

这在一定程度上运作良好。问题是 div 中的列不再像往常一样从表中的第一行继承它们的宽度。

我可以用 div 做些什么来维护继承吗？还是我应该尝试不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:58:33.720

`<div>`作为`<table>`. _

试试这个...

```
<table>
  <tr>...</tr>
  <tr style="page-break-inside:avoid">...</tr>
  <tr style="page-break-inside:avoid">...</tr>
  <tr>...</tr>
</table> 
```

或者更好的是，通过 CSS 设置它——针对所有`<tr>`元素......

```
<style type="text/css">
  tr { page-break-inside:avoid }
</style> 
```

...或设置`class="myTR"`为的属性`<tr>`，然后...

```
<tr class="myTR">...</tr>

<style type="text/css">
  .myTR { page-break-inside:avoid }
</style> 
```

# python - sublime 中的自动 python 代码格式化

> ID：11628338
> 
> 赞同：14
> 
> 时间：2012-07-24T09:52:38.610
> 
> 标签：python, sublimetext

我试图找到一些在使用 sublime 时会自动格式化 python 代码的包。

有 PythonTidy，但是当我使用 PackageController 时，它说安装已完成，但未安装包（未出现在首选项中）。

我确实尝试按照以下说明进行操作： [https ://github.com/witsch/SublimePythonTidy](https://github.com/witsch/SublimePythonTidy)

当我在 python 中“安装”包时，sublime 不会加载，抛出：

```
terminate called after throwing an instance of 'boost::python::error_already_set'
/usr/bin/subl: line 3: 12415 Aborted                 
/usr/lib/sublime-text-2/sublime_text --class=sublime-text-2 "$@" 
```

如果没有 PackageController，我将如何安装它，或者，有人可以推荐另一个包吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-03-21T15:17:54.243

ctrl+shift+P 然后 Package Control: Install Package 查找`Python PEP8 Autoformat`并安装。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-29T09:45:19.117

尝试在命令行中执行以下操作（有点蛮力）：

1.  导航到`Packages/PythonTidy`文件夹，
    通常`~/.config/sublime-text-2/Packages/PythonTidy`
    或`~/.config/sublime-text-2/Packages/SublimePythonTidy`
    *   如果它不存在重新安装使用`Package Control`
2.  里面应该有另一个`PythonTidy`文件夹（在你的情况下是空的）。
    **不要进入它，只需检查它是否为空**。
3.  跑`git clone https://github.com/witsch/PythonTidy.git`
4.  重新启动 sublime 并检查控制台是否有错误（`View`-> `Show Console`）

**PS** 如果您无法开始`Sublime`执行以下操作：

```
sudo pip uninstall PythonTidy 
```

然后重试我上面写的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T23:40:16.677

Package Control 应该在 Sublime Text 的 packages 文件夹中创建一个适当命名的文件夹。你可以从那里到达`Preferences > Browse Packages`。如果包安装正确，应该有一个名为 PythonTidy 的文件夹。如果没有，您可以直接从 github 下载包并将文件夹放在此 Packages 文件夹中。

# android - 如何使用“uri”

> ID：11628339
> 
> 赞同：0
> 
> 时间：2012-07-24T09:52:44.293
> 
> 标签：android, uri

我有一个图像，我想在另一个课程中使用它。所以我创建了一个这样的URI：

```
final Uri selectedImage = data.getData();
String path = selectedImage.getPath();
Intent sintent = new Intent(FromFile.this, OurView.class);
sintent.putExtra("image", path);
startActivity(sintent); 
```

我在 OurView 类中这样称呼 uri

```
String ur = getIntent().getStringExtra("image");
try {
    URI uri = new URI(ur);
} catch (URISyntaxException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我想用这张图片作为这堂课的背景。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:01:00.657

在 Android 中，我们有活动。似乎您想将图像设置为 Activity 的背景。为此，您必须将其设置为父布局中的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:04:34.463

您可以直接将 URI 传递给意图，而不是传递路径。它将作为 putExtra 中的 Parceable Value

```
final Uri selectedImage = data.getData();
Intent sintent = new Intent(FromFile.this, OurView.class);
sintent.putExtra("image", selectedImage);
startActivity(sintent); 
```

接着

```
URI ur = getIntent().getStringExtra("image"); 
```

# three.js - 如何使用three.js围绕中心旋转平移对象？

> ID：11628340
> 
> 赞同：1
> 
> 时间：2012-07-24T09:52:46.607
> 
> 标签：three.js

使用three.js 可以围绕其中心旋转平移对象。我创建了一个 jsfiddle，[http://jsfiddle.net/yKt6h/4/](http://jsfiddle.net/yKt6h/4/)

当我检查控制面板中的自动旋转模式时，我能够围绕其中心旋转平移的立方体。当我尝试用鼠标移动来旋转立方体时，是否有可能产生类似的效果。

如果可能，请提供示例代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:16:43.747

查看您的 jsFiddle 时，我在控制台中遇到错误`THREE is not defined`但是，您要问的并不难。轨迹球相机旨在完全按照您的意愿行事。如果您在原点渲染您的对象，您只需要初始化轨迹球控件。我创建了一个[使用 TrackballControls 的简单月球演示](http://cmg0030.zxq.net/threejs/glslDemo/)。您无需在 TrackballControls.js 中进行任何修改。

在上面的演示中，我调用了一个函数来初始化轨迹球控件，该函数在我的 ThreeUtil.js 文件中定义为：

```
function initTrackball(camera, rotate, zoom, pan, damping) {
    var controls = new THREE.TrackballControls(camera);
    controls.rotateSpeed = rotate || 1.0;
    controls.zoomSpeed = zoom || 1.2;
    controls.panSpeed = pan || 0.8;
    controls.noZoom = false;
    controls.noPan = false;
    controls.staticMoving = true;
    controls.dynamicDampingFactor = damping || 0.3;
    return controls;
} 
```

如果您不希望用户能够平移或缩放，而只能围绕您的对象旋转，那么只需在上面的函数中设置`controls.noZoom = true`和`controls.noPan = true`。

由于我的月亮物体位于场景的原点，我所要做的就是将相机设置为离原点一定距离。我们将它放在正 z 轴上，因此它已经在原点处查看我们的对象。然后我们调用上面的函数来设置控件。我传入一个自定义旋转速度：

```
controls = initTrackball(camera, 0.8); 
```

然后在每一帧中你所要做的就是在你的动画循环中调用更新函数：

```
controls.update(camera); 
```

# ruby-on-rails - 如何创建一个 ActiveRecord 模型，其中一些属性存储在数据库中，一些属性从 Facebook 读取

> ID：11628341
> 
> 赞同：1
> 
> 时间：2012-07-24T09:52:50.977
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, activerecord, activemodel

在我的应用程序中，我有一个用户对象模型。我正在使用 koala 和 OmniAuth 访问 Facebook。

我试图弄清楚如何将 Facebook 中的数据添加到我的模型中，以便我的控制器正确序列化它。

我已经设法在我的控制器中从 Facebook 获取数据：

```
token = request.env["omniauth.auth"]["credentials"]["token"]
api = Koala::Facebook::API.new(token)
api.get_object("me") 
```

而且我想我想出了如何在没有 DB 列的情况下向我的模型添加属性，但是以一种将其保留在序列化响应中的方式：

```
def fb_info
  {"fb_info" =>"should be here"}
end

def attributes
  super.merge('fb_info' => fb_info)
end 
```

那么将它们放在一起的首选方法是什么？我需要以某种方式填充模型中的属性。为了做到这一点，我需要那里的访问令牌。从控制器调用以填充它们或将令牌传递给模型似乎很麻烦。有没有一种干净的方法来处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:37:13.910

将 setter 方法添加到您的模型中，并在此方法中执行所有数据转换。在大多数情况下，您可以将数据从控制器传递给 setter 方法，就像使用任何“真实”属性一样。但是要将这些数据存储到数据库中，您应该自己处理它。

```
def virtual_column_name=(raw_data)
  # some code to handle raw_data and put it into database
end 
```

# javascript - 下拉菜单、CSS、HTML 和 JavaScript：JavaScript 使菜单跳转并且无法正常运行

> ID：11628342
> 
> 赞同：0
> 
> 时间：2012-07-24T09:52:52.423
> 
> 标签：javascript, html, css

我有一个简单的下拉菜单，但使用时它不能正常工作，我认为 JavaScript 存在问题，因为它只是不断地上下跳动！

jsFiddle 这里：http: [//jsfiddle.net/pJeDV/](http://jsfiddle.net/pJeDV/)

```
<div class="container">
<ul id="coolMenu">
<li><a href="#">Lorem</a></li>
<li><a href="#">Mauricii</a></li>
<li>
    <a href="#">Periher</a>
    <ul>
        <li><a href="#">Hellenico</a></li>
        <li><a href="#">Genere</a></li>
        <li><a href="#">Indulgentia</a></li>
    </ul>
</li>
<li><a href="#">Tyrio</a></li>
<li><a href="#">Quicumque</a></li>
</ul> 
```

CSS

```
#coolMenu,
#coolMenu ul {
    list-style: none;
}
#coolMenu {
    float: left;
}
#coolMenu > li {
    float: left;
}
#coolMenu li a {
display: block;
    height: 2em;
    line-height: 2em;
    padding: 0 1.5em;
    text-decoration: none;
}
#coolMenu ul {
    position: absolute;
    display: none;
z-index: 999;
}
#coolMenu ul li a {
    width: 80px;
}
#coolMenu li:hover ul {
    display: block;
}

/* Main menu
------------------------------------------*/
#coolMenu {
    font-family: Arial;
    font-size: 12px;
    background: #2f8be8;
}
#coolMenu > li > a {
    color: #fff;
    font-weight: bold;
}
#coolMenu > li:hover > a {
    background: #f09d28;
    color: #000;
}

/* Submenu
------------------------------------------*/
#coolMenu ul {
    background: #f09d28;
}
#coolMenu ul li a {
    color: #000;
}
#coolMenu ul li:hover a {
    background: #ffc97c;
}

#coolMenu li:hover ul.noJS {
    display: block; 
} 
```

JavaScript

```
<script type="text/javascript">
$(function(){
    $('#coolMenu').find('> li').hover(function(){
        $(this).find('ul')
        .removeClass('noJS')
        .stop(true, true).slideToggle('fast');
    });
});
</script> 
```

[http://jsfiddle.net/pJeDV/](http://jsfiddle.net/pJeDV/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:03:09.830

这是工作小提琴：http: [//jsfiddle.net/surendraVsingh/pJeDV/6/](http://jsfiddle.net/surendraVsingh/pJeDV/6/)

**jQuery**

```
$(function(){
    $('#coolMenu > li').hover(function(){
        $(this).find('ul').slideToggle();
    });
}); 
```

**CSS**（完全删除下面给定的代码）

```
#coolMenu li:hover ul {
    display:block; /* Remove This*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:03:54.843

这是你要找的吗？而不是使用**.find('> li')**我使用了 .children( **'a')**。同样在**.hover()**函数中，您缺少 mouseout 函数。

[jsFiddle](http://jsfiddle.net/pJeDV/5/)

这是代码：

```
$(function(){
$('#coolMenu').children('a').hover(function(){
    $(this).find('ul')
    .removeClass('noJS')
    .slideToggle('fast');
},function(){
   $(this).find('ul')
    .addClass('noJS')
    .slideToggle('fast');
    });
}); 
```

# c++ - 字符串上 strtok() 的 C++ 用法

> ID：11628346
> 
> 赞同：-2
> 
> 时间：2012-07-24T09:53:02.033
> 
> 标签：c++

[我从回答我上一个问题](https://stackoverflow.com/questions/11616379/c-how-to-get-substring-after-get-position-of-its-index)的人那里尝试了以下代码。

我的情况是我试图在这个字符串中获取值 1.2597，而我的非功能性要求是使用`strtok`这里`boost`的许多其他编码人员推荐的值。

但是，我在将结果转换为可以使用`strtok`.

我想知道如何获得 1.2597，并用`strtok`

```
string result= "CCY 1.2597 Down 0.0021(0.16%) 14:32 SGT [44]";

char *first = strtok(result, ' ');
char *second = strtok(0, ' '); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:59:56.523

您不能`strtok`直接在 C++ 上使用`std::string`。它需要一个可变的以零结尾的 C 样式字符串，并且没有标准方法可以访问该`std::string`形式的 a 的内容。

最简单的选择（不使用 Boost 或其他非标准库）是使用 C++ 流来代替：

```
std::stringstream stream(result);
std::string first, second;
stream >> first >> second; 
```

如果这是您想要的，那也可以将第二个标记直接转换为数字类型。

如果您出于某种原因确实想使用`strtok`，那么一种可能性是将字符串复制到临时可变缓冲区中：

```
std::vector<char> temp(result.begin(), result.end());
temp.push_back(0);

char * first = strtok(&temp[0], ' ');
char * second = strtok(0, ' '); 
```

请注意另一个主要错误`strtok`：它不是线程安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:26:07.633

是的，正如 Mike Seymore 所说，您必须将 std::string 复制到可变缓冲区。已经包含 string.h，只需使用 strcpy 将 std::string 复制到可变 char*。不要忘记包含空终止的空间 + 实际插入 '\0' ;D

```
std::string result = "...";
char* token;
char* buffer[res.length() + 1];  //Space for '\0'
strcpy(buffer, result.c_str());
buffer[res.length()] = '\0';     //insert '\0'
token = strtok(buffer, " ");
while (token != NULL) {
  /* work with token */
  token = strtok(NULL, " ");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:14:32.670

这有效：

```
std::string result= "CCY 1.2597 Down 0.0021(0.16%) 14:32 SGT [44]";
size_t pos0 = result.find(' ');+1
size_t pos1 = result.find(' ',pos0);
std::string final_result = result.substr(pos0,pos1-pos0); 
```

# amazon-web-services - ElasticBeanStalk 如何将您的应用程序版本部署到实例？

> ID：11628348
> 
> 赞同：2
> 
> 时间：2012-07-24T09:53:09.463
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

我目前正在使用 AWS ElasticBeanStalk，我很好奇它是如何（在内部）知道当你启动一个实例时（或者它会自动进行扩展）来解压缩我作为版本上传的 zip？是否有一些环境设置可以在我的 S3 存储桶中查找我的 zip，然后为在该环境中运行的每个实例自动解包？

如果是这样，这是否也可以用于自动化任务，例如在启动时运行 SQL 查询（实例部署）？这些自动化任务是否可以更改或完全可见？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:13:30.553

我不知道 beanstalk 如何知道要下载和解包哪个版本，但是在启动时运行任务是微不足道的。查看`cloud-init`，这是一个[由 Ubuntu 编写的工具，现在已打包在 Amazon Linux 中。](https://help.ubuntu.com/community/CloudInit)它允许您将任意 shell 脚本传递到实例配置的 UserData 部分，这些 shell 脚本将在启动时运行。

[这是在启动时引导实例的好方法，](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/cloudformation-waitcondition-article.html)它避免了管理 AMI 的痛苦。

一个快速（可能不适用）的警告：如果您在 beantalk AMI 上的数据库上运行 SQL 查询，您几乎可以保证在某些时候丢失您的数据库。这些机器被设计为完全瞬态的。不要在它们上面放置数据库。[有关更多详细信息，请参阅此答案。](https://stackoverflow.com/a/11471408/877115)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T04:28:09.280

由于您的目标似乎是运行自定义配置任务，答案是肯定的，有办法做到这一点。您可以在与您的应用程序一起打包的 .ebextensions 文件中定义自定义操作。例如，您可以配置一个命令以在每次部署新机器时运行：http: [//docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#linux-commands](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#linux-commands)

# sharepoint - 使用客户端对象模型获取 SharePoint Server 的所有信息

> ID：11628349
> 
> 赞同：1
> 
> 时间：2012-07-24T09:53:12.163
> 
> 标签：sharepoint, sharepoint-2010

我想创建一个 Windows 应用程序

展示 ：

*   所有网络应用程序，

*   每个 Web 应用程序的站点集合，

*   每个站点集合的站点，

*   每个站点的子站点，

*   所有列表-树视图中每个站点和子站点的库

在这里，我不想在应用程序启动时提供任何静态 URL，如果 SharePoint 安装在该计算机上，所有信息都会自动填充在树形视图中。

这可能吗 ？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:45:44.223

**.Net 托管客户端对象模型：获取所有网站、库、项目**

在 SharePoint 2010 中，我们有 3 个客户端对象模型。

1.  .Net 托管客户端对象模型
2.  银光
3.  ECMA 脚本/JavaScript

今天，我将介绍 .NET 托管客户端对象模型，以从 SharePoint 检索所有网站、库和项目。

桌面应用程序的先决条件参考：

*1\. Microsoft.SharePoint.Client.dll
2\. Microsoft.SharePoint.Client.Runtime.dll*

我的自定义类感觉就像我们正在处理 SharePoint Server 对象模型：

```
public class SPWeb
 {
     public string WebGUID { get; set; }
     public string Title { get; set; }
     public string ServerRelativeUrl { get; set; }
     public string ParentType { get; set; }
     public SPBase Parent { get; set; }
 }
 public class SPList
 {
     public string ListGUID { get; set; }
     public string Title { get; set; }
     public string ParentWebUrl { get; set; }
     public string RootFolderServerRelativeUrl { get; set; }
 }

public class SPFolder
 {
     public string ID { get; set; }
     public string UniqueID { get; set; }
     public string Name { get; set; }
     public string Title { get; set; }
     public string ParentWebUrl { get; set; }
     public string ListName { get; set; }
     public string ServerRelativeUrl { get; set; }
     public string ParentFolderServerRelativeUrl { get; set; }
 }

 public class SPListItem
 {
     public string ID { get; set; }
     public string Name { get; set; }
     public string Title { get; set; }
     public string ServerRelativeUrl { get; set; }
     public string Modified { get; set; }
     public string ModifiedBy { get; set; }
     public string CreatedBy { get; set; }
     public string Size { get; set; }
     public string Created { get; set; }
     public string UniqueId { get; set; }
     public string ListName { get; set; }
 } 
```

用于获取**Webs/library/Items**的方法：

```
public List<SPWeb> GetAllWebs(string webURL)
{
    var webColl = new List<SPWeb>();
    try
    {
    var currentWeb = _ctx.Site.OpenWeb(webURL);
    var allWebs = currentWeb.Webs;
    var webCollection = _ctx.LoadQuery(allWebs.Include(web => web.Title,
    web => web.Id, web => web.ServerRelativeUrl));
    _ctx.ExecuteQuery();
    webColl.AddRange(webCollection.Select(web => new SPWeb
                                {
                                  Title = web.Title,
                                  WebGUID = web.Id.ToString(),
                                  ServerRelativeUrl = web.ServerRelativeUrl
                                 }));
    }
    catch (Exception ex)
    {
      // error log
    }
 return webColl;
}

public List<SPList> GetAllLibraries(string webURL)
{
   var listColl = new List<SPList>();
   try
   {
     var currentWeb = _ctx.Site.OpenWeb(webURL);
     var query = from list in currentWeb.Lists
                 where list.BaseType == BaseType.DocumentLibrary
                 select list;
     var AllLists = currentWeb.Lists;
     var listCollection = _ctx.LoadQuery(query.Include(myList => myList.Title,
                                   myList => myList.Id,
                                   myList => myList.RootFolder.ServerRelativeUrl,
                                   myList => myList.ParentWebUrl,
                                   myList => myList.Hidden,
                                   myList => myList.IsApplicationList));
  _ctx.ExecuteQuery();

  listColl.AddRange(from list in listCollection
                    where !list.Hidden
                    select new SPList
                    {
                        Title = list.Title,
                        ListGUID = list.Id.ToString(),
                        RootFolderServerRelativeUrl = list.RootFolder.ServerRelativeUrl,
                        ParentWebUrl = list.ParentWebUrl
                     });
   }
   catch (Exception ex)
   {
       // error log
   }
  return listColl;
}

public List<SPFolder> GetAllFolder(string webURL, string listName, string folderName)
{
    var itemColl = new List<SPFolder>();
    try
    {
      var currentWeb = _ctx.Site.OpenWeb(webURL);
      var currentList = currentWeb.Lists.GetByTitle(listName);

      var query = new CamlQuery();

      if (folderName.Length > 0)
         query.FolderServerRelativeUrl = folderName;

      query.ViewXml = @"<View><Query><Where>
                        <Or>
                          <Eq>
                             <FieldRef Name='ContentType' />
                             <Value Type='Text'>Document Set</Value>
                          </Eq>
                          <Eq>
                             <FieldRef Name='ContentType' />
                             <Value Type='Text'>Folder</Value>
                          </Eq>
                        </Or>
                        </Where></Query></View>";

      var listitems = currentList.GetItems(query);
  _ctx.Load(listitems);
  _ctx.ExecuteQuery();

  itemColl.AddRange(listitems.ToList().Select(item => new SPFolder()
                   {
                       ID = Convert.ToString(item["ID"]),
                       UniqueID = Convert.ToString(item["GUID"]),
                       ListName = listName,
                       ParentWebUrl = webURL,
                       Title = Convert.ToString(item["FileLeafRef"]),
                       Name = "folder",
                       ServerRelativeUrl = Convert.ToString(item["FileRef"])
                   }).AsEnumerable());
  }
  catch (Exception ex)
  {
     // error log
  }
  return itemColl;
}
public List<SPListItem> GetAllItems(string webURL, string listName, string folderName)
{
    var itemColl = new List<SPListItem>();
    try
    {
        var currentWeb = _ctx.Site.OpenWeb(webURL);
        var currentList = currentWeb.Lists.GetByTitle(listName);
        var query = new CamlQuery();

        if (folderName.Length > 0)
           query.FolderServerRelativeUrl = folderName;

        var myquery = from myitems in currentList.GetItems(query)
                      select myitems;

        var listitems = _ctx.LoadQuery(myquery.Include(myitem => myitem["ID"],
                                      myitem => myitem["FileLeafRef"],
                                      myitem => myitem["Modified"],
                                      myitem => myitem["File_x0020_Size"],
                                      myitem => myitem["Modified_x0020_By"],
                                      myitem => myitem["Created_x0020_By"],
                                      myitem => myitem["FileRef"],
                                      myitem => myitem["UniqueId"],
                                      ));

         _ctx.ExecuteQuery();

         foreach (var nitem in listitems.Select(item => new SPListItem
         {
               ID = Convert.ToString(item["ID"]),
               ParentWebUrl = webURL,
               Title = Convert.ToString(item["FileLeafRef"]),
               Modified = item["Modified"] != null ?         Convert.ToString(item["Modified"]) : string.Empty, Size = item["File_x0020_Size"] != null ? Convert.ToString(item["File_x0020_Size"]) : string.Empty,
           CreatedBy = item["Created_x0020_By"] != null ? Convert.ToString(item["Created_x0020_By"]) : string.Empty,
           ModifiedBy = item["Modified_x0020_By"] != null ? Convert.ToString(item["Modified_x0020_By"]) : string.Empty,
           UniqueId = item["UniqueId"].ToString(),
           ServerRelativeUrl = Convert.ToString(item["FileRef"]),
           ListName = listName
     }))

     itemColl.Add(nitem);
}
catch (Exception ex)
{
     // error log
}
return itemColl;
} 
```

为此，我使用了以下参考，

[http://shahjinesh11.wordpress.com/2012/06/14/net-managed-client-object-model-fetch-all-webs-libraries-items/](http://shahjinesh11.wordpress.com/2012/06/14/net-managed-client-object-model-fetch-all-webs-libraries-items/)

它可以帮助你祝你好运:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:47:25.247

我的代码：

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                var service = SPFarm.Local.Services.GetValue<SPWebService>(string.Empty);
                foreach (SPWebApplication webApplication in service.WebApplications)
                {
                    ShowSiteCollection(webApplication.Sites);
                }
            }
        }

private void ShowSiteCollection(IEnumerable<SPSite> sites)
        {
            foreach (SPSite site in sites)
            {
                using (site)
                {
                    var rootWeb = site.RootWeb;
                    var node = new TreeNode(rootWeb.Title, rootWeb.Url);
                    if (rootWeb.Webs.Count > 0)
                    {
                        ShowWebCollection(rootWeb.Webs, (title, url) => node.ChildNodes.Add(new TreeNode(title, url)));
                    }

                    siteCollectionTree.Nodes.Add(node);
                }
            }
        }

 private static void ShowWebCollection(SPWebCollection collection, Action<string, string> func)
        {
            for (var i = 0; i < collection.Count; i++)
            {
                var info = collection.WebsInfo[i];

                func.Invoke(info.Title, info.ServerRelativeUrl);

                if (collection[i].Webs.Count > 0)
                {
                    ShowWebCollection(collection[i].Webs, func);
                }
            }
        } 
```

以及获取列表的方法：

```
private static IEnumerable<List> GetSiteLists(string siteUrl)
        {
            using (var context = new ClientContext(siteUrl))
            {
                var query = from lists in context.Web.Lists
                            where !lists.Hidden
                            select lists;
                var siteLists = context.LoadQuery(query);
                context.ExecuteQuery();

                return siteLists;
            }
        } 
```

我没有声称解决方案是最好的，但它确实有效。祝你好运！

# javascript - 有没有比这更有效的方法来切换多个点击类？

> ID：11628351
> 
> 赞同：3
> 
> 时间：2012-07-24T09:53:26.440
> 
> 标签：javascript, jquery, class, toggle

使用 JS 实现这个切换类的更好方法是什么？

这就是这样做的：

当您单击“服务”、“图库”或“客户”时，它会删除下面 div 中的“隐藏”类，并将“隐藏”类添加到同一 div 中的所有其他列表中。

可以在这里看到正在发生的事情的现场演示：[http](http://www.cyberbytesdesign.com/WIP2) ://www.cyberbytesdesign.com/WIP2 （它是主要的标题导航）。

这是我正在使用的代码（绝对不是一种有效的方法，因为这不到所有代码的一半，但可以理解）。

```
<nav>
  <ul class="menu-option-set">
    <li>
      <a href="javascript:;" onmouseup="
        document.getElementById('services').classList.toggle('hidden');
        document.getElementById('gallery').classList.add('hidden');
        document.getElementById('customer').classList.add('hidden');
        ">Services</a>
    </li>
    <li>
       <a href="javascript:;" onmouseup="
         document.getElementById('gallery').classList.toggle('hidden');
         document.getElementById('services').classList.add('hidden');
         document.getElementById('customer').classList.add('hidden'); ">Gallery</a>
    </li>
    <li>
       <a href="javascript:;" onmouseup="
         document.getElementById('gallery').classList.toggle('hidden');
         document.getElementById('services').classList.add('hidden');
         document.getElementById('customer').classList.add('hidden'); ">Customer</a>
    </li>
  </ul>
</nav>
<div id="header-subnav">
  <nav>
    <ul id="services" class="hidden">
      <li <?php echo $bathroom ?>><a href="bathroom">Bathroom</a></li>
      <li <?php echo $kitchen ?>><a href="index.php">Kitchen</a></li>
      <li <?php echo $accessibility ?>><a href="index.php">Accessibility</a></li>
    </ul>
    <ul id="gallery" class="hidden">
      <li <?php echo $photo ?>><a href="gallery.php">Photo Gallery</a></li>
      <li <?php echo $project ?>><a href="project.php">Project Gallery</a></li>
    </ul>
    <ul id="customer" class="hidden">
      <li <?php echo $coupons ?>><a href="coupons.php">Coupons</a></li>
      <li <?php echo $testimonials ?>><a href="testimonials.php">Testimonials</a></li>
    </ul>
  <nav>
</div> 
```

我假设你必须做一些类似于以某种方式使用它的事情，但修改了：

```
$('.menu-option-set a').click(function()
{
    // if clicked item is selected then deselect it
    if ($('#header-subnav').hasClass('hidden'))
    {
        $('#header-subnav').removeClass('hidden');
    }

    // otherwise deselect all and select just this one
    else
    {
        $('.menu-option-set a').removeClass('hidden');
        $('#header-subnav').addClass('hidden');
    }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:32:10.600

## 少修改版：

将数据属性添加到主菜单并将其值设置为子菜单的 id。

```
<nav>
  <ul class="menu-option-set">
    <li>
      <a href="#" data-subid="services">Services</a>
    </li>
    <li>
       <a href="#" data-subid="gallery">Gallery</a>
    </li>
    <li>
       <a href="#" data-subid="customer">Customer</a>
    </li>
  </ul>
</nav> 
```

然后将事件处理程序附加到主菜单。它隐藏所有子菜单，并显示正确的子菜单。（而且你不需要'隐藏'类。）

```
$(function() {
    $("#header-subnav ul").hide();
    $('.menu-option-set a').on('click', function() {
        var $s = $("#" + $(this).attr('data-subid'));                
        if($s.is(':hidden')) {
            $("#header-subnav ul").hide();
            $s.show();
        } else {
            $s.hide();
        }
    });
}); 
```

就是这样！这是示例：http: [//jsfiddle.net/dT225/1/](http://jsfiddle.net/dT225/1/)

## ...但我个人建议这种风格：

在每个主菜单旁边放置子菜单。

```
<nav id="menu">
  <ul>
    <li>
      <a href="#">Services</a>
      <ul>
        <li <?php echo $bathroom ?>><a href="bathroom">Bathroom</a></li>
        <li <?php echo $kitchen ?>><a href="index.php">Kitchen</a></li>
        <li <?php echo $accessibility ?>><a href="index.php">Accessibility</a></li>
      </ul>
    </li>
    <li>
      <a href="#">Gallery</a>
      <ul>
        <li <?php echo $photo ?>><a href="gallery.php">Photo Gallery</a></li>
        <li <?php echo $project ?>><a href="project.php">Project Gallery</a></li>
      </ul>
    </li>
    <li>
      <a href="#">Customer</a>
      <ul>
        <li <?php echo $coupons ?>><a href="coupons.php">Coupons</a></li>
        <li <?php echo $testimonials ?>><a href="testimonials.php">Testimonials</a></li>
      </ul>
    </li>
  </ul>
</nav>​​​​​​​​​​​​​ 
```

单击主菜单时，事件处理程序将仅显示源元素的下一个元素。

```
$(function() {
    $('#menu li ul').hide();
    $('#menu a').on('click', function() {
        var $s = $(this).next();           
        if($s.is(':hidden')) {
            $('#menu li ul').hide();
            $s.show();
        } else {
            $s.hide();
        }
    });
}); 
```

我认为它更简单、可维护和语义化。[http://jsfiddle.net/dKtVK/1/](http://jsfiddle.net/dKtVK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:08:08.070

首先为尝试使用纯 javascript 做到这一点竖起大拇指。但是请注意，`classList`并非每个浏览器都支持使用类似的东西 - 您的代码在 IE 中将失败。

对你的问题：你几乎自己回答了你的问题。强烈建议不要在元素中使用这些事件属性。而是将其放入（分离的）js（文件）中。这使您的代码干净且可维护。

所以改为这样写：

```
<a class="services" href="javascript:;">Services</a> 
```

然后在您的标签或单独的 JS 文件中添加一个[事件处理程序：](https://developer.mozilla.org/en/DOM/element.addEventListener)`<script>`

```
var gallery  = document.getElementById('gallery');
var services = document.getElementById('services');
var customer = document.getElementById('customer');

document.querySelector(".services").addEventListener(function(){
    /* Do your stuff here */
    gallery.classList.toggle('hidden');
    /*...and so on...*/
}); 
```

我`querySelector`在这里使用，因为它与jQuery非常相似，因此为很多人所熟悉，并且在IE> = 8中支持。但是请随意使用适合您的任何东西（并且是浏览器支持所需要的）。

使用 jQuery（您发布的第二个代码片段）使这变得非常容易，并且在所有浏览器中都可以正常工作，因此请随意使用它并为您节省一些工作。

# sql-server - ETL SSIS：将错误行重定向到单独的表

> ID：11628352
> 
> 赞同：5
> 
> 时间：2012-07-24T09:53:28.763
> 
> 标签：sql-server, etl, ssis

我正在开发一个包含源、大约 80 个查找和 1 个目标的包。

源表中的数据不够一致，因此我的包经常失败。

有没有一种方法可以传输在将它们插入目标表时给出的所有行？

例如。我在 Source 中有 5 行，其中第 1 行和第 4 行会出错。现在结果应该是第 2、第 3 和第 5 应该进入目的地，但第 1 和第 4 应该存储在某个平面文件或数据库表中。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T10:51:09.420

您可以创建第二个`OLE DB Destination`并将红色箭头从您的`Data Conversion`任务指向此目的地。`Data Conversion`然后在您的任务中选择配置错误输出并选择`Redirect row`作为所有错误/截断的选项。完成新的目的地映射，您就完成了：正确的数据现在应该转到您的第一个目的地（绿色箭头），不正确的数据应该转到您的第二个目的地（红色箭头）。

# c# - 使用 Newtonsoft.Json 序列化 json 时如何忽略默认值

> ID：11628353
> 
> 赞同：7
> 
> 时间：2012-07-24T09:53:31.063
> 
> 标签：c#, json, json.net

我正在使用`Newtonsoft.Json.JsonConvert`将`Textbox`（WinForms）序列化为 json，并且我希望序列化跳过具有默认值或空数组的属性。

我尝试使用`NullValueHandling = NullValueHandling.Ignore`in`JsonSerializerSettings`但似乎没有任何影响。

这是完整的代码示例（简化）：

```
JsonSerializerSettings settings = new JsonSerializerSettings()
                {
                    Formatting = Formatting.None,
                    DefaultValueHandling = DefaultValueHandling.Ignore,
                    NullValueHandling = NullValueHandling.Ignore,
                    ReferenceLoopHandling = ReferenceLoopHandling.Ignore,
                    ObjectCreationHandling = ObjectCreationHandling.Replace,
                    PreserveReferencesHandling = PreserveReferencesHandling.None,
                    ConstructorHandling = ConstructorHandling.AllowNonPublicDefaultConstructor,
                };

    string json = JsonConvert.SerializeObject(textbox, settings); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T10:02:31.470

您可以使用标准的条件序列化模式：

```
private int bar = 6; // default value of 6
public int Bar { get { return bar;} set { bar = value;}}
public bool ShouldSerializeBar()
{
    return Bar != 6;
} 
```

关键是一个`public bool ShouldSerialize*()`方法，其中`*`的成员名称。这种模式也被`XmlSerializer`、protobuf-net`PropertyDescriptor`等使用。

当然，这确实意味着您需要访问该类型。

# c++ - 如何阻塞线程并恢复它

> ID：11628364
> 
> 赞同：3
> 
> 时间：2012-07-24T09:54:06.713
> 
> 标签：c++, multithreading

这就是我想要做的：有一个主线程产生数字并将它们放入队列中，它触发一个消耗队列中数字的子线程。

如果队列的大小增长超过 10，主线程应该停止生成数字，如果队列的大小小于 5，它应该恢复数字生成。

```
queue<int> qu;

void *num_consumer(void *arg)
{
    while(1) {
        //lock qu
        int num = qu.pop();
        //unlock qu
        do_something_with(num);
    }
}

int main()
{
    pthread_create(&tid, NULL, num_consumer, NULL);
    while(1) {
        int num;
        produce(&num);
        //lock qu
        queue.push(num);
        //unlock qu
        if(qu.size() >= 10) {
            //how to block and how to resume the main thread?
        }
    }
} 
```

我可能会`semaphore`用来做这项工作，但还有其他想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T10:21:41.740

条件变量在这里是合适的——实际上是一对条件变量，因为如果队列为空，消费者也需要阻塞：

```
pthread_cond_t qu_empty_cond = PTHREAD_COND_INITIALIZER;
pthread_cond_t qu_full_cond = PTHREAD_COND_INITIALIZER;
pthread_mutex_t qu_mutex = PTHREAD_MUTEX_INITIALIZER;

void *num_consumer(void *arg)
{
    while(1) {        
        int num;

        pthread_mutex_lock(&qu_mutex);
        while (qu.size() < 1)
            pthread_cond_wait(&qu_empty_cond, &qu_mutex);
        num = qu.pop();
        if (qu.size() < 5)
            pthread_cond_signal(&qu_full_cond);
        pthread_mutex_unlock(&qu_mutex);
        do_something_with(num);
    }
}

int main()
{
    pthread_create(&tid, NULL, num_consumer, NULL);
    while(1) {
        int num;

        produce(&num);

        pthread_mutex_lock(&qu_mutex);
        queue.push(num);
        pthread_cond_signal(&qu_empty_cond);
        if (qu.size() >= 10)
             do {
                pthread_cond_wait(&qu_full_cond, &qu_mutex);
             } while (qu.size() >= 5);
        pthread_mutex_unlock(&qu_mutex);
    }
} 
```

请注意，当生产者等待条件变量时，队列互斥锁会自动释放。

# ajax - Django，CRSF 令牌，POST 请求。可以在浏览器上运行，但不能在手机上运行

> ID：11628365
> 
> 赞同：1
> 
> 时间：2012-07-24T09:54:13.287
> 
> 标签：ajax, django, csrf

正如标题中提出的问题。

我想在这里更具体，请原谅我的英语。

我目前正在使用 django 在 openshift 上开发 jquerymobile 网站。我有一个使用 ajax 并发送帖子请求的登录页面。我做过类似的事情。

```
var account = '{"Email" : "' + username + '" , "Password" : "' + password + '"}';
$.ajax({
url: "/Account/Login",
beforeSend: function(xhr) {
    xhr.setRequestHeader("X-CSRFToken", '{{ csrf_token }}');
},
type: "POST",
data: { "account" : account },
success: function(data) {
    var obj = eval("(" + data + ")");
    if (obj.Status == "100")
    {
    if(typeof(Storage)!=="undefined")
    {
        sessionStorage.user = username;
        window.location = "/";
    }
    }
    else if (obj.Status == "101")
    {
    invalid parameters sent.
    }
    else if (obj.Status == "102")
    {
    email doesnt exist / email & password pair doesn't match.
    }
},  
}); 
```

基本上 obj.Status 是带有状态和消息的 json 回复。用户名和密码由用户输入。我也尝试过使用发送 csrfmiddlewaretoken 的数据，结果相同。

那么有什么解决方案吗？顺便说一句，我正在 iPhone 4S 和 Google Chrome 上测试它。在此先感谢人们:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T19:12:51.247

`{% csrf_token %}` 在您的模板页面内添加。

在 Javascript 中：

```
var input = document.getElementsByName('csrfmiddlewaretoken')[0]
var csrftoken = input.getAttribute('value'); 
```

并`csrfmiddlewaretoken: csrftoken`进入您的 POST 请求数据

在视图上改为使用来自的`@ensure_csrf_cookie`装饰器`django.views.decorators.csrf`

# git - git 获取和克隆

> ID：11628366
> 
> 赞同：0
> 
> 时间：2012-07-24T09:54:14.823
> 
> 标签：git

我有一台带有我的 git 项目的计算机（计算机 A）。然后我做了一个`git clone`在另一台计算机（计算机 B）上处理它。我在新电脑 (B) 上做了一些改动，做了 a`commit`和 a `push`。一切似乎都很好。

```
$ git push

Counting objects: 7, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 539 bytes, done.
Total 4 (delta 3), reused 0 (delta 0)
To mike@xx.xx.xxx.xx:/photos/
2bf1437..ef7de42  mike -> mike 
```

当我去我原来的电脑 (A) 并做 a`git fetch`时，它什么也得不到。我需要做些什么来告诉计算机 B 关于计算机 A 的信息吗？

我`git pull`在计算机 B 上做了一个，它说以下内容：

> 您的配置指定与远程的 ref 'mike' 合并，但没有获取这样的 ref。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:56:42.850

You wanted to do `git pull` which does a fetch and a merge.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:58:37.917

Make sure you have your `remote` set up properly, and then you will need to issue `git pull` which will do the work for you. Actually, `pull` is a combination of `fetch` and `merge` of `FETCH_HEAD` into the current branch.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:03:11.837

根据您对问题的评论，您需要更改计算机 A 的`origin`遥控器以匹配 B。在计算机 B 上发出以下命令：

```
git config remote.origin.url 
```

那会输出一些东西。假设它是`<url>`。现在，在计算机 A 上，发出以下命令：

```
git remote rm origin
git remote add origin <url> 
```

这删除了错误的来源参考并将其更新为匹配 B。现在`git push origin mike`从计算机 A 发出，然后在计算机 B 上再次尝试获取。应该可以正常工作。

# html - 如何创建唯一的 html 表？

> ID：11628370
> 
> 赞同：2
> 
> 时间：2012-07-24T09:54:18.633
> 
> 标签：html, css

我在创建如下图所示的表格时遇到问题： ![在此处输入图像描述](../Images/f10577fde114d4c2a132a127aefd885c.png) 有谁知道如何使用 html 和 css 在上面创建表格？我使用该表创建如下内容： ![在此处输入图像描述](../Images/21c014b00e048bc0eba20635f90d89bc.png) 请指导我并提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:42:31.000

rowspan=2 将让您垂直合并单元格。

例如，这是您的表格的开始：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 TRANSITIONAL//EN"><HTML>
<BODY>
<table border>
  <tr>
    <td rowspan=2>row 1, column 1</td>
    <td>row 1, column 2</td>
    <td>row 1, column 3</td>
  </tr>
  <tr>
    <!--td row 2, column 1, covered by row above-->
    <td rowspan=2>row 2, column 2</td>
    <td>row 2, column 3</td>
  </tr>
  <tr>
    <td>row 3, column 1</td>
    <!--td row 3, column 2, covered by row above-->
    <td>row 3, column 3</td>
  </tr>
</table>
</BODY>
</HTML> 
```

手动生成这样的表格很快就会变得混乱。使用好的布局工具会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:16:29.370

制作一个 6 行 3 列的表格，并使某些边框不可见，这将是最简单的。我想你可以自己解决剩下的问题。

# jquery - 使用 JQuery 选择最后一个选择值？

> ID：11628372
> 
> 赞同：2
> 
> 时间：2012-07-24T09:54:24.050
> 
> 标签：jquery, jquery-selectors

我有以下html代码：

```
<div id="casesList1" class="cases">
   <select id="casesList">
      <option value="1">case1</option>
      <option value="2">case2</option>
      <option value="3">case3</option>
   </select>

   <div id="casesList2" class="cases">
      <select id="casesList">
         <option value="4">case4</option>
         <option value="5">case5</option>
      </select>
   </div>

</div> 
```

我需要使用 JQuery 在内部 div 中选择选择输入的最后一个值。例如，如果我选择了“case5”，该函数应该返回 5，问题是我有多个选择输入编号为“案例列表”。我试过这个：

```
$('#casesList:last option:selected').attr('value'); 
```

但它只选择第一个选择值......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T10:02:28.010

对于初学者，您不能在页面中重复 ID - 这是无效代码。因此，每个选择元素的“caseList”id 需要不同。

但是，您可以使用重复的类，因此您可以通过这种方式访问​​每个元素：

```
$('.caseList:last').val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:56:28.133

尝试

```
$('.cases:last option:selected').val(); 
```

或者

```
$('div[id^="casesList"]:last option:selected').val(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T10:57:01.760

这就是我解决它的方法：

```
$('select[name=category]').last().attr('value'); 
```

在给出选择名称类别后..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T09:58:59.957

元素 ID 应该是唯一的，如果你想要重复，你应该使用类。

```
$('.cases:last option:selected').attr('value'); 
```

或者

```
$('.cases:last option:selected').val(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T10:06:54.417

试试这个

```
$('div.cases:last > select option:selected')[0].attr('value') 
```

# android - 使用 ZXing 扫描多个条码

> ID：11628373
> 
> 赞同：5
> 
> 时间：2012-07-24T09:54:26.570
> 
> 标签：android, barcode, zxing

我目前正在尝试让 ZXing 扫描一些条形码。到目前为止，它做得很好（通过意图）。

现在我想让它一次解码多个条形码（它们被放置在彼此下方），而不必单独扫描每个条形码。

这甚至可以通过意图实现吗？如果没有，将不胜感激如何以另一种方式进行操作的简短示例:)

到目前为止，我只发现了一个非常古老的线程，用户请求此功能并且一些开发人员似乎已经集成了它。但是，我找不到任何解释利用率的教程。

该线程可以在[这里](http://code.google.com/p/zxing/issues/detail?id=183)找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:05:48.910

Intent 不可能，但在项目中肯定是可能的。您必须编写自己的扫描组件，然后使用核心库的支持（您已经找到）来查找多个条形码并对其进行处理。

# sql-server - SQL Server 2005：日期算术

> ID：11628376
> 
> 赞同：1
> 
> 时间：2012-07-24T09:54:33.857
> 
> 标签：sql-server

我想`SELECT`在 SQL Server 2005 中编写一个简单的语句，它使用日期算术进行以下计算：

从当前日期（这意味着`getdate()`）开始，确定上一个星期一，然后从该星期一减去 70 天，在输出中显示结果日期。

我怎么能做到这一点？

我的难点主要是确定*前一个星期一*。

当然，如果`getdate()`是星期一，前一个星期一是`getdate()`

预先感谢您的帮助。

超提交

编辑：请注意，在意大利，一周的第一天是星期一而不是星期日，因此如果输入是 2012 年 7 月 29 日星期日，则输出必须是 7 月 23 日，而不是 7 月 30 日。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:00:00.393

要获得上周一的信息，请查看 [http://blog.sqlauthority.com/2007/08/20/sql-server-find-monday-of-the-current-week/](http://blog.sqlauthority.com/2007/08/20/sql-server-find-monday-of-the-current-week/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:00:08.117

这应该让你开始。它将找到本周的过去星期一。

```
SELECT DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 0) MondayOfCurrentWeek 
```

要减去 70 天，只需在末尾添加 -70：

```
SELECT DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 0)-70 as SomeMondayInHistory 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T09:59:47.490

这将检索本周的星期一

```
Select DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 0) 
```

然后你需要从上面的一天中减去 70

```
SELECT Dateadd(DAY,-70,DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 0)) 
```

编辑：请仔细阅读[SO中发布的答案](https://stackoverflow.com/questions/7168874/get-first-day-of-week-in-sql-server)

星期一显示为当前周，因为指示一周的第一天的[DATEFIRST](http://msdn.microsoft.com/en-us/library/ms181598.aspx)设置为星期一。要将其设置为星期日，您需要将设置更改为星期日

```
 Set DATEFIRST 7 
```

否则，如上述 SO 链接中所建议的，您需要更改您的代码

```
 DECLARE @dt DATE = '1905-01-01';
 SELECT [start_of_week] = DATEADD(WEEK, DATEDIFF(WEEK, @dt, CURRENT_TIMESTAMP), @dt); 
```

# scala - 如何知道一个对象是否是 TypeTag 类型的实例？

> ID：11628379
> 
> 赞同：21
> 
> 时间：2012-07-24T09:54:55.917
> 
> 标签：scala, instanceof, scala-2.10

我有一个函数，它能够知道一个对象是否是 a`Manifest`类型的实例。我想将它迁移到一个`TypeTag`版本。旧功能如下：

```
def myIsInstanceOf[T: Manifest](that: Any) = 
  implicitly[Manifest[T]].erasure.isInstance(that) 
```

我一直在尝试使用 TypeTag，现在我有了这个 TypeTag 版本：

```
// Involved definitions
def myInstanceToTpe[T: TypeTag](x: T) = typeOf[T]
def myIsInstanceOf[T: TypeTag, U: TypeTag](tag: TypeTag[T], that: U) = 
  myInstanceToTpe(that) stat_<:< tag.tpe

// Some invocation examples
class A
class B extends A
class C

myIsInstanceOf(typeTag[A], new A)        /* true */
myIsInstanceOf(typeTag[A], new B)        /* true */
myIsInstanceOf(typeTag[A], new C)        /* false */ 
```

有没有更好的方法来完成这项任务？`U`是否可以使用 an 来省略参数化`Any`（就像在旧函数中所做的那样）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-24T10:54:59.073

如果对擦除类型使用子类型检查就足够了，请按照 Travis Brown 在上面的评论中建议的那样做：

```
def myIsInstanceOf[T: ClassTag](that: Any) =
  classTag[T].runtimeClass.isInstance(that) 
```

否则，您需要明确说明`U`类型，以便 scalac 在类型标记中捕获其类型：

```
def myIsInstanceOf[T: TypeTag, U: TypeTag] =
  typeOf[U] <:< typeOf[T] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-26T17:08:55.420

在您的特定情况下，如果您确实需要迁移现有代码并保持相同的行为，则需要`ClassTag`. 使用`TypeTag`更精确，但正是因为某些代码的行为会有所不同，所以（通常）你需要小心。

如果你确实想要`TypeTag`，我们可以比上面的语法做得更好；在调用处的效果与省略 相同`U`。

# 推荐的替代品

### 使用拉皮条

对于 Eugene 的回答，必须拼写两种类型，而最好推断`that`. 给定一个类型参数列表，要么指定全部，要么不指定；[类型柯里化](https://groups.google.com/forum/#!topic/scala-internals/44xGjEPPoZs)可能会有所帮助，但只是拉皮条似乎更简单。让我们使用这个在 2.10 中也新增的隐式类，*仅用 3 行*来定义我们的解决方案。

```
import scala.reflect.runtime.universe._
implicit class MyInstanceOf[U: TypeTag](that: U) {
  def myIsInstanceOf[T: TypeTag] = 
    typeOf[U] <:< typeOf[T]
} 
```

事实上，我会争辩说，像这样的东西，用一个更好的名字（比如`stat_isInstanceOf`），甚至可以属于 Predef。

使用示例：

```
//Support testing (copied from above)
class A
class B extends A
class C

//Examples
(new B).myIsInstanceOf[A]                //true
(new B).myIsInstanceOf[C]                //false

//Examples which could not work with erasure/isInstanceOf/classTag.
List(new B).myIsInstanceOf[List[A]]      //true
List(new B).myIsInstanceOf[List[C]]      //false

//Set is invariant:
Set(new B).myIsInstanceOf[Set[A]]        //false
Set(new B).myIsInstanceOf[Set[B]]        //true

//Function1[T, U] is contravariant in T:
((a: B) => 0).myIsInstanceOf[A => Int]   //false
((a: A) => 0).myIsInstanceOf[A => Int]   //true
((a: A) => 0).myIsInstanceOf[B => Int]   //true 
```

### 更兼容的语法

如果拉皮条是一个问题，因为它改变了调用语法并且你有现有的代码，我们可以尝试如下类型的柯里化（使用起来更棘手），这样只需要显式传递一个类型参数 - 就像在你的旧定义中一样`Any`：

```
trait InstanceOfFun[T] {
  def apply[U: TypeTag](that: U)(implicit t: TypeTag[T]): Boolean
}
def myIsInstanceOf[T] = new InstanceOfFun[T] {
  def apply[U: TypeTag](that: U)(implicit t: TypeTag[T]) = 
    typeOf[U] <:< typeOf[T]
}
myIsInstanceOf[List[A]](List(new B))     //true 
```

如果您想自己学习编写此类代码，您可能会对下面显示的变体讨论感兴趣。

# 其他变体和失败的尝试

使用结构类型可以使上述定义更加紧凑：

```
scala> def myIsInstanceOf[T] = new { //[T: TypeTag] does not give the expected invocation syntax
  def apply[U: TypeTag](that: U)(implicit t: TypeTag[T]) = 
    typeOf[U] <:< typeOf[T]
}
myIsInstanceOf: [T]=> Object{def apply[U](that: U)(implicit evidence$1: reflect.runtime.universe.TypeTag[U],implicit t: reflect.runtime.universe.TypeTag[T]): Boolean} 
```

然而，使用结构类型并不总是一个好主意，正如 -feature 警告的那样：

```
scala> myIsInstanceOf[List[A]](List(new B))
<console>:14: warning: reflective access of structural type member method apply should be enabled
by making the implicit value language.reflectiveCalls visible.
This can be achieved by adding the import clause 'import language.reflectiveCalls'
or by setting the compiler option -language:reflectiveCalls.
See the Scala docs for value scala.language.reflectiveCalls for a discussion
why the feature should be explicitly enabled.
              myIsInstanceOf[List[A]](List(new B))
                            ^
res3: Boolean = true 
```

问题是由于反射导致的减速，这是实现结构类型所必需的。修复它很容易，只是使代码更长一点，如上所示。

### 我必须避免的一个陷阱

在上面的代码中，我第一次尝试写`[T]`而不是。`[T: TypeTag]`有趣的是为什么它会失败。要理解这一点，请看一下：

```
scala> def myIsInstanceOf[T: TypeTag] = new {
     |   def apply[U: TypeTag](that: U) = 
     |     typeOf[U] <:< typeOf[T]
     | }
myIsInstanceOf: [T](implicit evidence$1: reflect.runtime.universe.TypeTag[T])Object{def apply[U](that: U)(implicit evidence$2: reflect.runtime.universe.TypeTag[U]): Boolean} 
```

如果您仔细查看返回值的类型，您会发现它是`implicit TypeTag[T] => U => implicit TypeTag[U]`（在伪 Scala 表示法中）。当你传递一个参数时，Scala 会认为它是第一个参数列表，隐式的：

```
scala> myIsInstanceOf[List[A]](List(new B))
<console>:19: error: type mismatch;
 found   : List[B]
 required: reflect.runtime.universe.TypeTag[List[A]]
              myIsInstanceOf[List[A]](List(new B))
                                          ^ 
```

### 一个提示

最后也是最不重要的一个提示，您可能感兴趣也可能不感兴趣：在此尝试中，您将两次传递 TypeTag[T] - 因此您应该删除`: TypeTag`after `[T`。

```
def myIsInstanceOf[T: TypeTag, U: TypeTag](tag: TypeTag[T], that: U) = 
  myInstanceToTpe(that) stat_<:< tag.tpe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T19:16:02.593

我使用上述建议提出以下建议。欢迎反馈。

```
/*
    Attempting to cast Any to a Type of T, using TypeTag
    http://stackoverflow.com/questions/11628379/how-to-know-if-an-object-is-an-instance-of-a-typetags-type
     */
    protected def toOptInstance[T: ClassTag](any: Any) =
        classTag[T].runtimeClass.isInstance(any) match {
            case true =>
                Try(any.asInstanceOf[T]).toOption
            case false =>
                /*
                Allow only primitive casting
                 */
                if (classTag[T].runtimeClass.isPrimitive)
                    any match {
                        case u: Unit =>
                            castIfCaonical[T](u, "void")
                        case z: Boolean =>
                            castIfCaonical[T](z, "boolean")
                        case b: Byte =>
                            castIfCaonical[T](b, "byte")
                        case c: Char =>
                            castIfCaonical[T](c, "char")
                        case s: Short =>
                            castIfCaonical[T](s, "short")
                        case i: Int =>
                            castIfCaonical[T](i, "int")
                        case j: Long =>
                            castIfCaonical[T](j, "long")
                        case f: Float =>
                            castIfCaonical[T](f, "float")
                        case d: Double =>
                            castIfCaonical[T](d, "double")
                        case _ =>
                            None
                    }
                else None
        }

    protected def castIfCaonical[T: ClassTag](value: AnyVal, canonicalName: String): Option[T] ={
        val trueName = classTag[T].runtimeClass.getCanonicalName
        if ( trueName == canonicalName)
            Try(value.asInstanceOf[T]).toOption
        else None
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-26T07:42:00.503

您还可以从 TypeTag 捕获类型（到类型别名中），但前提是它没有被擦除，因此它在函数内部不起作用：

[如何从 TypeTag[T] 或 scala 中的任何其他泛型中捕获 T？](https://stackoverflow.com/questions/26053319/how-to-capture-type-from-typetag-or-any-other-generic-in-scala)

# css - 如何在没有 webkit 上下文的情况下检测 CSS translate3d？

> ID：11628390
> 
> 赞同：0
> 
> 时间：2012-07-24T09:56:07.437
> 
> 标签：css, translate3d

检测浏览器是否支持`translate3d`我们可以使用（`WebKitCSSMatrix`在 window && `m11`in new WebKitCSSMatrix()）

但是现在那个firefox支持`translate3d`怎么才能有正确的检测呢？

我们的想法是在不使用 Modernizr 的情况下找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:36:25.873

我需要类似的东西。我想在不使用库的情况下测试浏览器是否支持 translate3d。我没有找到任何非 webkit 特定的通用测试。所以经过大量的实验，我想出了下面的测试。我首先创建一个测试元素，为其分配一个变换函数，然后查看该元素是否保留了变换函数。

```
function Has3DSupport()
{
    var sTranslate3D = "translate3d(0px, 0px, 0px)";

    var eTemp = document.createElement("div");

    eTemp.style.cssText = "  -moz-transform:"    + sTranslate3D +
                          "; -ms-transform:"     + sTranslate3D +
                          "; -o-transform:"      + sTranslate3D +
                          "; -webkit-transform:" + sTranslate3D +
                          "; transform:"         + sTranslate3D;
    var rxTranslate = /translate3d\(0px, 0px, 0px\)/g;
    var asSupport = eTemp.style.cssText.match(rxTranslate);
    var bHasSupport = (asSupport !== null && asSupport.length == 1);

    return bHasSupport;
} // Has3DSupport 
```

该功能对我的需求来说非常快：桌面浏览器中 < 50 微秒，移动浏览器中 < 500 微秒。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T16:17:10.073

另一个对我来说就像魅力的选择：

```
function has3d() {
    var el = document.createElement('p'), 
        has3d,
        transforms = {
            'WebkitTransform':'-webkit-transform',
            'OTransform':'-o-transform',
            'MSTransform':'-ms-transform',
            'MozTransform':'-moz-transform',
            'Transform':'transform'
        };

    // Add it to the body to get the computed style.
    document.body.insertBefore(el, null);

    for (var t in transforms) {
        if (el.style[t] !== undefined) {
            el.style[t] = "translate3d(1px,1px,1px)";
            has3d = window.getComputedStyle(el).getPropertyValue(transforms[t]);
        }
    }

    document.body.removeChild(el);

    return (has3d !== undefined && has3d.length > 0 && has3d !== "none");
} 
```

# c++ - 如何在服务 exe 中添加失败操作？

> ID：11628391
> 
> 赞同：0
> 
> 时间：2012-07-24T09:56:20.463
> 
> 标签：c++, winapi, service, atl

如何在*Windows 服务中编程**失败操作*（使用 ATL） ，所以在我通过调用注册服务后，失败操作已经设置？*`myservice.exe /service`*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:09:59.623

在继承自 的模块类中`CAtlServiceModuleT`，您可以覆盖[`Install`](http://msdn.microsoft.com/en-US/library/71wh6b8c%28v=vs.100%29)方法，这是将代码设置失败操作的好地方：

```
BOOL Install() throw()
{
  if(!__super::Install())
    return FALSE;
  // TODO: Setup Failure Actions
  return TRUE;
} 
```

设置操作将涉及与 SCM 的交互，您可以查看基本方法实现的提示，了解如何操作。`__super`如果您不想打开 SCM 句柄两次，您可能还希望完全覆盖它而不去。*

# excel - 如何在 Excel 中为文本添加空格以填充文本长度？

> ID：11628397
> 
> 赞同：0
> 
> 时间：2012-07-24T09:56:46.180
> 
> 标签：excel, excel-formula, excel-2010

如何在 Excel(2010) 中为文本添加空格以填充文本长度。
示例
在 Excel 工作表中有 3 列 A 是长度，B 是实际文本，D 是预期文本。

(B) 文本是`ABVC`，但要求文本长度为 (A)6，然后 (D) 文本应为“ABVC”( `Space``Space`ABVC) 在旧文本的字体中添加空格以完全填充长度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:04:03.960

假设您可以在 D1`A1=6`中`B1=ABVC`插入以下公式：

```
=IF(LEN(B1)<A1,REPT(" ",A1-LEN(B1)),"")&B1 
```

注意：我添加了一个检查以确保 B1 不超过 6 个字符，如果是，我按原样使用它。您可以使用该`LEFT`函数截断它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-17T05:19:33.323

如果要添加 10 个字符的单元格，则可以在 excel 中使用此公式

> =RIGHT(" "&E2,10)

在这个公式中，我在两者之间添加了 10 个空格

> “”

标记并与单元格连接，在逗号 (,) 之后，我在执行此公式后指定了该单元格中所需的字符数。（公式中未显示空格）

# css - 如何在 html5 中为表格提供 100% 的高度

> ID：11628398
> 
> 赞同：8
> 
> 时间：2012-07-24T09:56:48.573
> 
> 标签：css, html

如何为桌子提供 100% 的高度，

```
<table border="1" style="height:100%"><tr> <td>Height 100%</td></tr>  </table> 
```

我试过了，但它没有达到 100% 的高度，谁能帮帮我

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T10:02:40.747

给你的身体高度，`100%`桌子就会跟着 - [http://jsfiddle.net/R3h3p/](http://jsfiddle.net/R3h3p/)

# javascript - javascript Raphael path width

> ID：11628410
> 
> 赞同：1
> 
> 时间：2012-07-24T09:57:25.663
> 
> 标签：javascript, svg, raphael, scaling

I'm trying to scale a path in SVG. For doing so I'm using the javascript-library Raphaël. The scaling itself works just fine, but it's scaling at the center and I want it to scale at a different point (the figure of the path is a circle-sector and I want it to scale at the center of the "circle").

Is there a method to get the height and width of the path? if so, I'll be able to calculate the center of the circle. Or is there another method to find that point?

the path:

> var path = "M "+center.x+" "+center.y;
> 
> path += "L "+(center.x+startX)+" "+(center.y+startY);
> 
> path += "A "+Math.floor(dist)+" "+Math.floor(dist)+" 0 " +(this.endAngle-this.startAngle > Math.PI ? "1 1 " :"0 1 ")+ (center.x+endX)+ " "+(center.y+endY);
> 
> path += "L "+center.x + " "+center.y; path += "z";
> 
> this.shape = paper.path(path);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:51:03.717

You can get the height and width of an element with `.getBBox()`: [http://raphaeljs.com/reference.html#Element.getBBox](http://raphaeljs.com/reference.html#Element.getBBox)

How are you scaling the path? `.scale()` can take optional coordinates for the center of scaling: [http://raphaeljs.com/reference.html#Element.scale](http://raphaeljs.com/reference.html#Element.scale)

# javascript - Javascript 新手 - For 循环

> ID：11628411
> 
> 赞同：0
> 
> 时间：2012-07-24T09:57:37.203
> 
> 标签：javascript

我正在尝试学习 Javascript，并且正在查看 for 循环。

我正在尝试遍历已成功完成的 4 个数字。

```
for (i=0;i<5;i++) {
    console.log(i + " and " + (i+1));
} 
```

但是我正在尝试实现这样的目标：

```
0 1 

0 2

0 3

0 4

1 2

1 3

...etc 
```

用for循环可以吗？

谢谢

特里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:59:42.123

首先，您的循环将遍历 5 个数字。0、1、2、3、4（数一数）

您可以通过使用两个嵌套的 for 循环来实现这一点

```
for (var i = 0; i < 5; i++) {
    for(var j = i+1; j < 5; j++){
        console.log(i + " " + j);
    }
} 
```

这会给你：

```
0 1
0 2
0 3
0 4
1 2
...
3 4 
```

注意：这似乎与您不包括“1 1”的模式相匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:00:50.133

```
for (i=0;i<5;i++) {
    for (j=i+1;j<5;j++) {
        console.log(i + " and " + j);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:02:20.660

嵌套循环可以解决问题：

```
for (var i = 0; i < 5; i++) {
  for (var j = i + 1; j < 5; j++) {
    console.log(i + ' and ' + j);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:05:12.767

**我认为问题是只要求一个 for 循环。**

这是您想要的正确答案：

```
for (i=0,j=0;i<5;i++) {
    console.log(j + " and " + (i+1));
    if(j<5&&i==4){
    j++;i=0;
    }
} 
```

# windows - VBScript: Opening a file parameter that has spaces in it's name

> ID：11628413
> 
> 赞同：0
> 
> 时间：2012-07-24T09:57:46.280
> 
> 标签：windows, vb.net, vbscript

Im writing a small VBScript that i will pass a file path to. It works fine when the file name has no spaces but not when it does.

As far as I can tell, this is the offending line:

```
If util.Run("c:\program files (x86)\microsoft office\office14\PPTVIEW.exe " & WScript.Arguments(1)) = True Then
...perfomrm tasks...
End If 
```

I have tried putting quotes around WScript.Arguments(1) but i still get errors. Any ideas on how I can get it to work?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:21:38.807

您需要在文件路径字符串的每一端插入引号——现有的引号只是通知脚本引擎它包含一个字符串。您可以通过附加 Chr(34) 或添加两个双引号来执行此操作，如下所示：

```
If util.Run("""c:\program files (x86)\microsoft office\office14\PPTVIEW.exe"" " &    WScript.Arguments(1)) = True Then
    ...perfomrm tasks...
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:23:52.283

以下代码设置可执行文件的路径以及引号内的参数：

```
If util.Run("""c:\program files (x86)\microsoft office\office14\PPTVIEW.exe"" """ & WScript.Arguments(1) & """") = True Then
...perfomrm tasks...
End If 
```

# c# - GIT - 不能忽略 .suo 文件

> ID：11628418
> 
> 赞同：104
> 
> 时间：2012-07-24T09:58:09.323
> 
> 标签：c#, git

我正在尝试在用 C# 编写的应用程序中与同事一起使用 Git。

我们在 .gitignore 文件中添加了条目“project1.suo”，但每次我们必须提交项目时，Git 似乎都告诉我们也要提交文件“project1.suo”。

我们尝试了很多方法来在 .gitignore 中添加文件，如下所示：

```
*.suo
project1.suo
c:\project\project1.suo 
```

我们无法解决这个问题。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-07-24T10:50:00.833

git 不会忽略已添加到存储库中的文件。如果要忽略它，则必须从存储库中删除该文件：

```
git rm --cached project1.suo
git commit -m "Delete suo file from repository" 
```

这将从存储库中删除该文件，而它仍在您的硬盘上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-11T21:14:10.927

我总是回到这个问题以使用答案中的方法，但我找到了一个更好的解决方案，即忽略对此文件的更改。方法是

```
git update-index --assume-unchanged project1.suo 
```

或者

```
git update-index --assume-unchanged .vs/config/applicationhost.config 
```

要撤消此使用 --no-assume-unchanged

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2015-09-17T13:33:13.890

我有同样的问题。Ikke 的解决方案有帮助，但不要忘记从您的 .gitignore 中删除 *.suo 条目，如果它存在的话。文件更正后，执行

```
git add **/*.suo 
```

# java - Server/Client stop 1 thread = 1 clients

> ID：11628420
> 
> 赞同：1
> 
> 时间：2012-07-24T09:58:13.513
> 
> 标签：java, multithreading, sockets

Protocol: TCP

I have a server with a SocketServer that accepts clients and puts the socket (returned by `ss.accept()`) in an array.

I have 1 thread that needs to be notified when a socket is ready to be read (client sent data). This thread will dispatch the request to other threads for processing so what this initial thread does is really simple and fast.

Is it possible?

I really want to avoid 1 thread = 1 client and have 1 thread deal with N clients.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:30:16.970

[我想你可能想看看Java NIO](http://docs.oracle.com/javase/1.4.2/docs/guide/nio/)的非阻塞 IO 方面，其中一些在这篇关于[“基于高度可扩展的 NIO 的服务器的架构”的](http://today.java.net/pub/a/today/2007/02/13/architecture-of-highly-scalable-nio-server.html)
文章中进行了讨论。 此外，我认为[这个问题](https://stackoverflow.com/questions/7097745/selecting-among-multiple-sockets-that-are-ready-to-be-read-from)的答案会对你有所帮助。

通常非阻塞 IO 使用回调——当数据可用时，您的代码将需要注册一个处理程序以“回调”。在这种情况下，处理程序会将消息或数据发布到您的单线程 - 这必须是线程安全的才能处理并发通知/回调。

# python - 何时使用 tempfile、pickle、json 或 open()

> ID：11628424
> 
> 赞同：0
> 
> 时间：2012-07-24T09:58:28.263
> 
> 标签：python, json, pickle

我知道 Python 有很多方法可以从文件中存储和读取数据，所以我想知道以上 4 种的最佳做法是什么，以及每种方法最适用的时间。

另外，请让我知道是否还有其他我应该注意的模块/功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:07:08.430

好吧，我确定您已经阅读了 python 中上述命令的文档，但我认为您在使用它时犯了一个错误。对于您要求的文件打开，在一段时间内打开就足够了。

> json -> 处理字符串，列表及其方法的转储并以它们的 json 格式加载。
> pickle -> 序列化数据
> tempfile -> 创建临时文件/目录。

但正如我之前所说，如果不需要特殊处理，最好使用打开、写入命令来处理要转储的文件（命令读/写）。

问候。

# objective-c - Objective C: making point Larger through long press

> ID：11628427
> 
> 赞同：0
> 
> 时间：2012-07-24T09:58:32.343
> 
> 标签：objective-c, ios, ios4, core-graphics, paint

Is it possible to make a larger point in painting through long press? Because I want to make my line much bigger when I do the long press gesture and use that point to make a line in touches move. I hope this make sense, and this is my code.

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event//upon moving
{

            UITouch *touch = [touches anyObject];
            previousPoint2 = previousPoint1;
            previousPoint1 = currentTouch;
            currentTouch = [touch locationInView:self.view];

            CGPoint mid1 = midPoint(previousPoint2, previousPoint1); 
            CGPoint mid2 = midPoint(currentTouch, previousPoint1);

            UIGraphicsBeginImageContext(CGSizeMake(1024, 768));
            [imgDraw.image drawInRect:CGRectMake(0, 0, 1024, 768)];
            CGContextRef context = UIGraphicsGetCurrentContext();
            CGContextSetLineCap(context,kCGLineCapRound);
            CGContextSetLineWidth(context, slider.value);
            CGContextSetBlendMode(context, blendMode);
            CGContextSetRGBStrokeColor(context,red, green, blue, 1);
            CGContextBeginPath(context);
            CGContextMoveToPoint(context, mid1.x, mid1.y);//Computation
            CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
            CGContextStrokePath(context);

            imgDraw.image = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsGetCurrentContext();
} 
```

Now how do I insert my long press here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:16:17.317

您应该将 UILongPressGestureRecognizer 添加到您的视图中。这个识别器应该有一个与之关联的方法，该方法增加点的半径然后绘制它，当手势结束时将半径重置为某个默认起始值​​。

尝试这样的事情：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    UILongPressGestureRecognizer *recognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(drawAndExpandPoint:)];
    [self addGestureRecognizer:recognizer];
} 
```

然后，在 drawAndExpandPoint 方法中，您可以执行类似的操作（使用具有一些默认值的名为 radius 的 ivar）：

```
-(void)drawAndExpandPoint:(UILongPressGestureRecognizer *)recognizer
{ 
    //Reset radius, if gesture ended
    if (recognizer.state == UIGestureRecognizerStateEnded) {
        radius = DEFAULT_RADIUS;
        return;
    }

    else if (radius <= MAX_RADIUS) {
        radius += RADIUS_INCREMENT;
        //You will have to write this method to draw the point
        [self drawAtPoint:[recognizer locationInView:self.view] withRadius:radius];
    }
} 
```

这段代码可能不是你所描述的 100%，但我认为它概述了一般策略，即使用手势识别器——它使事情变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:12:36.063

一种可能的解决方案：

`- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event`

*   `UITouch`从`touches`实例变量中保存一个。

`- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event`

*   检查是否设置了实例变量。如果是，则计算保存的触摸和新触摸的时间戳之间的差异。使用此差异确定线宽，然后取消设置实例变量。

# c# - C#允许同时控制台输入和输出

> ID：11628432
> 
> 赞同：3
> 
> 时间：2012-07-24T09:58:46.047
> 
> 标签：c#, multithreading, console

我正在尝试通过制作一个简单的小游戏来了解 C# 线程。我遇到了一些我当然可以使用帮助的问题。

我的愿望是同时输入和输出。线程的输出将出现在屏幕的顶部，而用户的输入可以输入到屏幕的底部。我遇到的问题是，为了刷新屏幕，当我使用 时`Console.Clear()`，它也会清除用户输入的任何内容！下面我附上了我正在尝试做的一个极其简化的版本（为了避免不必要的代码妨碍实际问题）。

请注意：虽然在这个例子中我只更新屏幕顶部的一个字符，但我的实际程序会在屏幕顶部和中间有很多文本，这些文本会随着每个刻度不断变化（我计划在 1.5 秒内使用）。

任何想法都会很棒！我还是 C# 编程的新手，如果你能提供任何帮助，我会很高兴 :) 我唯一关心的是设计。顶部是系统输出，底部是用户输入，前面是“>”。如果我这样做的方式是错误的，那么将它全部扔出窗外并以不同的方式进行操作是没有问题的。

编辑：我的目标是让屏幕顶部的输出文本每 1.5 秒更新一次（每次运行计数线程），同时允许用户在屏幕底部输入。但是，我使用的方法（清除然后将新内容写入屏幕）也消除了用户的输入！它使得每 1.5 秒用户输入的任何输入都会消失，这是正确的，因为这正是 Console.Clear 所做的。所以我正在寻找一种新的方法来完成这项任务。

简而言之：如何在允许用户继续在屏幕底部输入的同时更新屏幕顶部/中间的文本？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace ConsoleApplication2
{
    class Program
    {

        static int i = 0;

        static void Main(string[] args)
        {
            Thread tickThread = new Thread(new ThreadStart(CountThread));
            Thread userThread = new Thread(new ThreadStart(UserInput));
            tickThread.Start();
            Thread.Sleep(1);
            userThread.Start();
            Thread.Sleep(20000);
            tickThread.Abort();
            userThread.Abort();
        }

        static void UserInput()
        {
            string input = "";
            while (true)
            {
                input = Console.ReadLine();
            }
        }

        static void CountThread()
        {
            while (true)
            {
                Console.Clear();
                Console.SetCursorPosition(0, 0);
                Console.WriteLine(i);
                i++;
                Console.SetCursorPosition(0, Console.WindowHeight - 1);
                Console.Write("> ");
                Thread.Sleep(1500);

            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:53:23.660

您可以使用 逐个字符读取输入字符`Console.ReadKey`。如果存储输入，则可以重建整个屏幕，包括在清除控制台之前键入的输入。我建议在一个线程中完成所有相关的 I/O。您可以保留由多个线程更新的控制台的内部表示，然后从一个线程打印它。

做这个！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:10:47.033

您可以为控制台中的每个单元格设置循环中的[光标位置](http://msdn.microsoft.com/en-us/library/system.console.setcursorposition.aspx)，除了那些为用户输入而设计的单元格，并写一个空格符号。从本质上讲，这将清除控制台窗口的一部分。此外，您可以使用相同的方法将输出部分呈现到控制台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:16:54.083

您是否考虑过为此使用窗口窗体，其中一个面板用于输出，一个面板用于输入？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-22T03:44:33.363

这是一种方法，主线程读取控制台输入，第二个线程写入控制台输出：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Threading;

namespace ConsoleReadWriteTest
{
    class Program
    {
        private static ConsoleInfo consoleInfo = new ConsoleInfo();
        static void Main(string[] args)
        {
            Thread consoleWriter = new Thread(new ThreadStart(ConsoleWriter));
            consoleWriter.Start();

            consoleInfo.outputBuffer.Add("Running.");
            consoleInfo.outputBuffer.Add(".. status of foo = good");
            consoleInfo.outputBuffer.Add(".. status of bar = bad");

            while (true)
            {
                var key = Console.ReadKey(true);
                lock (consoleInfo)
                {
                    if (key.Key == ConsoleKey.Enter)
                    {
                        consoleInfo.commandReaty = true;
                    }
                    else
                    {
                        consoleInfo.sbRead.Append(key.KeyChar.ToString());
                    }
                }
            }

        }

        static void ConsoleWriter()
        {
            while (true)
            {
                lock(consoleInfo)
                {
                    Console.Clear();

                    if (consoleInfo.outputBuffer[0].Length > 20)
                    {
                        consoleInfo.outputBuffer[0] = "Running.";
                    }
                    else
                    {
                        consoleInfo.outputBuffer[0] += ".";
                    }

                    foreach (var item in consoleInfo.outputBuffer)
                    {
                        Console.WriteLine(item);
                    }

                    Console.WriteLine("--------------------------------------------------------------");

                    if (consoleInfo.commandReaty)
                    {
                        consoleInfo.commandReaty = false;
                        consoleInfo.lastCommand = consoleInfo.sbRead.ToString();
                        consoleInfo.sbRead.Clear();
                        consoleInfo.lastResult.Clear();
                        switch (consoleInfo.lastCommand)
                        {
                            case "command1":
                                consoleInfo.outputBuffer[2] = ".. status of bar = good";
                                consoleInfo.lastResult.Append("command #1 performed");

                                break;
                            case "command2":
                                consoleInfo.outputBuffer[2] = ".. status of bar = bad";
                                consoleInfo.lastResult.Append("command #2 performed");
                                break;
                            case "?":
                                consoleInfo.lastResult.AppendLine("Available commands are:");
                                consoleInfo.lastResult.AppendLine("command1     sets bar to good");
                                consoleInfo.lastResult.AppendLine("command1     sets bar to bad");
                                break;
                            default:
                                consoleInfo.lastResult.Append("invalid command, type ? to see command list");
                                break;
                        }
                    }

                    Console.WriteLine(consoleInfo.lastCommand);
                    Console.WriteLine(consoleInfo.lastResult);
                    Console.WriteLine();
                    Console.Write(">");
                    Console.WriteLine(consoleInfo.sbRead.ToString());
                    Console.WriteLine();
                    Console.WriteLine();
                    Console.WriteLine();
                }

                Thread.Sleep(250);
            }
        }
        private class ConsoleInfo
        {
            public bool commandReaty { get; set; }
            public StringBuilder sbRead { get; set; }
            public List<string> outputBuffer { get; set; }
            public string lastCommand { get; set; }
            public StringBuilder lastResult { get; set; }

            public ConsoleInfo()
            {
                sbRead = new StringBuilder();
                outputBuffer = new List<string>();
                commandReaty = false;
                lastResult = new StringBuilder();
            }
        }
    }
} 
```

# android - 将自定义 Activity 称为 startActivityForResult

> ID：11628433
> 
> 赞同：12
> 
> 时间：2012-07-24T09:58:48.770
> 
> 标签：android, android-activity

我正在为结果开始一个活动

```
startActivityForResult(new Intent(this,ActivityA.class),REQUEST_CODE) 
```

ActivityA 已启动。ActivityA 上有一个 gridview，我想在调用者 Activity 的方法 onActivityResult(int requestCode, int resultCode, Intent data) 中获取所选图像的位置，但我没有办法做到这一点

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-24T10:01:01.163

在活动 A 中，

`onItemClick()`的`GridView`

```
//create a new intent...
Intent intent = new Intent();
intent.putInt("position",position);
setResult(RESULT_OK,intent);
//close this Activity...
finish(); 
```

在来电活动中，

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent){
        super.onActivityResult(requestCode, resultCode, intent);
        Bundle extras = intent.getExtras();
        if(extras != null)
        int position = extras.getInt("position");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-02T21:35:11.633

要唯一标识您的 startActivityForResult() 回调，请检查 Activity A 的相似性和成功。按照这个：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent){
    super.onActivityResult(requestCode, resultCode, intent);
    if(requestCode==REQUEST_CODE)
      {
        if(resultCode==RESULT_OK)
          {
              Bundle extras = intent.getExtras();
              if(extras != null)
              int position = extras.getInt("position");
          }
       }
} 
```

# android - 下载 Android 开源代码时出现“由于 android 获取错误导致错误退出同步”

> ID：11628449
> 
> 赞同：2
> 
> 时间：2012-07-24T09:59:53.403
> 
> 标签：android, android-source

我正在尝试在我的 Linux 系统上下载 Android 开源代码。我已经执行了 mkdir、curl 和 repo init 的初始命令，然后执行了 repo sync 命令，但过了一段时间它显示“由于 android 获取错误而导致错误退出同步”。然后我再次执行了 repo sync 命令，但过了一段时间它显示如下：

```
Downloading packages/apps/Settings:  75% (56MB/74MB)  Exception in thread Thread-150:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 552, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/threading.py", line 505, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/ingrid/.repo/repo/subcmds/sync.py", line 200, in _FetchHelper
    clone_bundle=not opt.no_clone_bundle)
  File "/home/ingrid/.repo/repo/project.py", line 968, in Sync_NetworkHalf
    and self._ApplyCloneBundle(initial=is_new, quiet=quiet):
  File "/home/ingrid/.repo/repo/project.py", line 1526, in _ApplyCloneBundle
    exist_dst = self._FetchBundle(bundle_url, bundle_tmp, bundle_dst, quiet)
  File "/home/ingrid/.repo/repo/project.py", line 1590, in _FetchBundle
    raise DownloadError('%s: %s ' % (req.get_host(), str(e)))
DownloadError: android.googlesource.com: <urlopen error [Errno 104] Connection reset by peer> 
```

你能告诉我为什么它会显示这个吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:29:42.133

我认为问题在于该项目已部分同步，然后您的 Internet 连接已中断。因此，不可能同步所有树。之后，您尝试继续同步，但由于某些文件已经下载的原因，您会收到这些错误。

尝试删除您的源文件夹，然后再次重新启动它。有时会发生无法同步 Android 源的情况。

# facebook - Facebook 应用故事印象

> ID：11628454
> 
> 赞同：0
> 
> 时间：2012-07-24T10:00:00.593
> 
> 标签：facebook, impressions

您是否知道在使用赞助应用程序发布的故事的 Facebook 广告时，这些展示次数是否计入“故事展示次数”下的 Insights 统计信息中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:05:58.977

它通常取决于新闻提要故事的数量。这可能会导致您收到的展示次数有所不同。也许您应该尝试结合使用 Facebook 广告和赞助商故事来提高印象。

# php - 从 sql 表字段中获取最多的重复值

> ID：11628460
> 
> 赞同：0
> 
> 时间：2012-07-24T10:00:11.263
> 
> 标签：php, sql

我想在下面的 sql 表列字段中获得最多一个重复值是我的 sql 结构。

我想从主题字段中获得最多的重复值

表名是`Orange`，带值的字段名是`topic`

```
话题
 1
 2
 1
 3
 1
 2

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:08:19.800

```
SELECT    count(topic) 
FROM      Orange  
GROUP BY  topic
ORDER BY  count(topic) DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:02:57.570

`select topic, count(topic) from orange group by topic order by count(topic) desc;`

这是运行顺便说一句的 SQL 查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:03:14.837

您在这里寻找的是模态平均值 - 检查此链接，其中包含 Sql Server 中模态操作的示例并根据需要进行调整。

[http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/calculating-mean-median-and-mode-with-sq](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/calculating-mean-median-and-mode-with-sq)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:06:48.117

```
SELECT MAX(COUNT(`topic`)) FROM `Orange`; 
```

# asp.net-mvc-3 - Html.ValidationMessage：错误还是功能？

> ID：11628469
> 
> 赞同：0
> 
> 时间：2012-07-24T10:00:45.243
> 
> 标签：asp.net-mvc-3, validation

我尝试使用 @Html.ValidationMessage() 助手。

如果我只提供模型名称，它只会在出现错误时显示。

如果我提供一个明确的validationMessage，无论如何它都会显示出来（即使该字段是有效的）：

```
@Html.ValidationMessage("elem_" + i, "This will show up no matter what!") 
```

这与描述相反。

从 System.Web.Mvc.Html.ValidationExtensions.ValidationMessageHelper 函数（我 ILSpied 它）：

```
if (!string.IsNullOrEmpty(validationMessage))
{
    tagBuilder.SetInnerText(validationMessage);
}
else
{
    if (modelError != null)
    {
        tagBuilder.SetInnerText(ValidationExtensions.GetUserErrorMessageOrDefault(htmlHelper.ViewContext.HttpContext, modelError, modelState));
    }
} 
```

如您所见，如果您提供了验证消息，它将显示出来。

这是一个错误还是有意为之。我该如何规避呢？

# php - 选择最后插入的记录并分组mysql

> ID：11628470
> 
> 赞同：2
> 
> 时间：2012-07-24T10:00:45.843
> 
> 标签：php, mysql, sql

我有一张带笔记的桌子。下面是我的数据库的一小部分数据样本。

```
Id  register_no     name        classification      possibility
1   112             Ben         Red                 10%
2   112             Ben         Red                 10%
3   113             Ben         Red                 20%
4   112             Ben         Amber               30%
5   112             Ben         Amber               10%
6   113             Ben         Amber               30%
7   113             Ben         Red                 10%
8   112             Ben         Red                 50% 
```

对不起，我以错误的方式解释了这个问题。

实际上我想要的是为每个 register_no 检索最后插入的记录，因为 sales_log 表包含一个列表进度......

例如，Register_no 112 在数据库中有 12 条记录，最后一条记录是 90%（它从 10、40、60% 发展，所以所有这些记录都在数据库中）

我想要的是获得 90% 的 register_no 112 等等......它不仅仅是一个记录......大约有 500 个 register_no 我想获得每个 register_no 的最后一个条目

希望这次有意义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:03:26.490

您应该尝试此查询以获取具有最大值的寄存器编号的注释`id`：

```
SELECT n1.*
FROM   notes n1
       LEFT JOIN notes n2
           ON (n1.register_no = n2.register_no AND n1.id < n2.id)
WHERE  n2.id IS NULL; 
```

来源：[检索每组中的最后一条记录](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:05:56.760

尝试

```
SELECT * FROM (`sales_log`) WHERE 1 ORDER BY `id` DESC LIMIT 2 
```

告诉 msyql 匹配 'name = ben' 将永远找不到 mandy 的 id 7

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T10:12:27.040

采用

```
SELECT * FROM sales_log WHERE `classification` =  'red' ORDER BY `Id` DESC LIMIT 2; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T11:17:32.647

这应该有效：

```
SELECT data.* 
FROM sales_log AS data
JOIN 
    (
        SELECT MAX(Id) as Id 
        FROM sales_log 
        GROUP BY register_no
    ) AS newest
    ON data.Id = newest.Id 
```

结果：

```
'8', '112', 'Ben', 'Red', '50'
'7', '113', 'Ben', 'Red', '10' 
```

编辑：我刚刚查看了@Omesh 的链接，显然他发布的解决方案要快得多。它产生与我的查询完全相同的输出。

# javascript - Spotify App API 错误报告：播放器音量无法设置为值

> ID：11628478
> 
> 赞同：4
> 
> 时间：2012-07-24T10:01:02.263
> 
> 标签：javascript, api, spotify

几周前我开始使用 Spotify App API。

我想改变音量。这应该通过使用 Player 类的 volume 属性来完成，如[文档](https://developer.spotify.com/technologies/apps/docs/beta/f19ff300f8.html)中所述：

> volume 获取或设置当前音量级别为 0.0 和 1.0 之间的浮点数。

不幸的是，这个音量属性只能用于获取当前音量，而不能用于设置音量。

于是我开始在网上搜索一些资料。我在堆栈溢出[1](https://stackoverflow.com/questions/10822979/change-volume-with-spotify-app-api)和[2](https://stackoverflow.com/questions/11230630/change-volume-in-a-spotify-app)上找到了两个相关的帖子。

那么，我会问与您可能会问的其他两个人相同的问题。

好吧，我对 Spotify API 进行了更深入的研究，并找到了一些有用的信息。我希望这篇文章能对 Spotify 开发者有所帮助。

此外，stackoverflow 似乎是为 Spotify 发布错误报告的方式。

因此，让我们开始我的 Spotify App API 调查。所有这些都是通过使用 Inspector 完成的。

音量属性在 Player 类中定义。Player 类在模型模块中定义。所以让我们看看模型，为此我们打开文件 models.js（检查器中的“脚本”选项卡，在下拉菜单中选择“models.js”）。我们首先找到这个（第 743 行）：

```
* @property {number}      volume               Get or set the current volume level as a float between 0.0 and 1.0. 
```

那么让我们看看这个 volume 属性（models.js 中的第 889-892 行）：

```
volume: {
    get: sp.trackPlayer.getVolume,
    set: sp.trackPlayer.setVolume
}, 
```

行。所以现在我们可以使用 trackPlayer 中的 setVolume 方法来设置音量。让我们更深入地看看 trackPlayer 里面有什么。为此，请在控制台中输入：

```
_getSpotifyModule("trackPlayer") 
```

它返回一个包含许多函数的对象。这是一个小快照：

```
_getSpotifyModule("trackPlayer")
    Object
    ...
    getShuffle: function getShuffle() { [native code] }
    getVolume: function getVolume() { [native code] }
    playTrackFromContext: function playTrackFromContext() { [native code] }
    ...
    setShuffle: function setShuffle() { [native code] }
    skipToNextTrack: function skipToNextTrack() { [native code] }
    ... 
```

是否可以看到函数 getVolume 已定义。但是函数 setVolume 不是。

所以这是我的结论：目前还不能使用 Player.volume 来设置音量，因为 setVolume 函数没有在 trackPlayer 中定义。

我希望我的工作能够帮助开发人员解决这个问题。

* * *

在 [1] 中，IKendac 建议：

> 仅当您的应用启动正在发生的播放时，您才可以更改音量

但事实证明这是错误的，我做了一个小应用程序来测试它：[https](https://gist.github.com/3152875) ://gist.github.com/3152875 。

也可以尝试在控制台执行以下代码，会看到音量没有变化：

```
var sp = getSpotifyApi(1);
var models = sp.require('sp://import/scripts/api/models');
var views = sp.require('sp://import/scripts/api/views');
var player = models.player;

player.volume;
player.volume = 0.5;
player.volume; 
```

* * *

[1][使用 spotify App API 更改音量](https://stackoverflow.com/questions/10822979/change-volume-with-spotify-app-api) [2] [https://stackoverflow.com/questions/11230630/change-volume-in-a-spotify-app](https://stackoverflow.com/questions/11230630/change-volume-in-a-spotify-app)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:42:42.257

这是预期的行为。文档有问题，将予以更正。

# iphone - iPhone：从图像创建视频

> ID：11628481
> 
> 赞同：1
> 
> 时间：2012-07-24T10:01:06.763
> 
> 标签：iphone, objective-c, uiimageview

我正在尝试从没有音频文件的 png 图像创建视频。

我已经实现了以下代码，但我的图像运行不顺畅。

```
- (void)viewDidLoad
{
    totalImages = 121;
    counter=1;
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}
-(void)viewDidAppear:(BOOL)animated
{
    levelTimer = [NSTimer scheduledTimerWithTimeInterval:0.40 target: self selector: @selector(levelTimerCallback:) userInfo: nil repeats: YES];
}

- (void)levelTimerCallback:(NSTimer *)timer 
{

    if(counter <= totalImages)
    {
        NSString *fileName = [NSString stringWithFormat:@"image_iphone_%d",counter];
        NSLog(@"filenameEasy:%@",fileName);
        NSString *fileLocation = [[NSBundle mainBundle] pathForResource:fileName ofType:@"png"];

        UIImage *imageName = [[UIImage alloc] initWithContentsOfFile:fileLocation];
        imgV.image = imageName; 
        counter++;
        NSLog(@"counter:%d",counter);
        [imageName release];
        [self viewDidAppear:NO];
    }

} 
```

如果你有任何想法请分享。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:28:54.833

你可以看看这个话题

[使用 AVAsset 制作带有图片数组和歌曲文件的电影文件](https://stackoverflow.com/questions/6061092/make-movie-file-with-picture-array-and-song-file-using-avasset)

如果您以前没有尝试过 AVFoundation，那会有点混乱。

它的概念是这样的：
1.设置一个assetwriter（写视频的助手）。
2.告诉作者你想输入什么轨道（添加视频和音频 writerInput）
3.如果一切正常，试着把你的图像放到视频轨道上
4.让作者编码。

# php - 使用 jquery 显示 div 并从猿服务器检索数据

> ID：11628484
> 
> 赞同：0
> 
> 时间：2012-07-24T10:01:26.493
> 
> 标签：php, jquery, post, ape

我的问题是：如何制作一个在屏幕右下角可见 10 秒的 div？此 div 将触发由 php 脚本触发的猿服务器内联推送。我想尝试使用 php 将数据发布到猿服务器，然后使用 jquery 与显示 x 秒的 div 回显此数据。我毫不怀疑我将如何开始或如何使其发挥作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:12:59.580

你在这里说的是两种不同的东西，我想...

您想要使用 php 的服务器端函数（然后使用 jQuery 显示/隐藏 div），或者使用 jQuery 的 AJAX 请求。由于您似乎不想在执行所有这些操作时重新加载页面，因此我会选择 AJAX 选项。

使用 AJAX 执行此操作的示例方法如下：

您需要运行一项服务，您可以将您的数据发布到该服务，该服务将提供响应以显示在页内。这可以用 php.ini 编码。

然后使用 jQuery，您可以执行以下操作：

```
$(function(){
    // use jQuery's .post() shorthand method to post your data to your php script
    $.post('myService.php', function(data){
        // do something with whatever is returned by your php function... 
        // in this instance, show a div containing the response 
        // (assuming the response is html)
        $('#responseDiv').empty().append(data).fadeIn(500, function(){
            // in this callback (which runs once the fadeIn animation is complete), 
            // we will tell #responseDiv to disappear after 10 seconds
            setTimeout(function(){
                $('#responseDiv').fadeOut(500);
            }, 10000);
        });
    });
}); 
```

我希望这有助于回答你的问题。

//编辑：作为对您的评论的回应，APE 文档似乎向您展示了如何实现这一点-

```
var client = new APE.Client();

client.load();

client.core.join('testChannel');

client.request.send('foo', {ping: 'ho hey'});

client.onRaw('bar', function(raw, pipe) {
    console.log('echo : ' + raw.data.echo);
    console.log('Receiving : ' + raw.data.hello);
}); 
```

client.request.send() 方法将数据发送到服务器，然后 client.onRaw() 方法是您处理响应的方式，从外观上看。在这种情况下，它只是注销到控制台，但原理是合理的。从外观上看，这个 onRaw 正在寻找具有“bar”类型的原始数据。

我建议彻底阅读 APE 文档。我阅读了 5 分钟，并走到了这一步，但不是真正的 APE 专家，如果不花更多时间进行研究，我将无法走得更远。

//编辑2

如果只是让消息出现在 div 中然后消失这是您的问题，那么我的原始答案的一部分是正确的：

```
 $('#responseDiv').empty().append(data).fadeIn(500, function(){
        // in this callback (which runs once the fadeIn animation is complete), 
        // we will tell #responseDiv to disappear after 10 seconds
        setTimeout(function(){
            $('#responseDiv').fadeOut(500);
        }, 10000);
    }); 
```

该部分脚本会将数据内容附加到 div 中，将其淡入，然后在 10 秒后淡出。然后，您需要做的就是使用来自 APE 的响应而不是该数据变量（我认为替换为 ）`data`进行排序。`raw.data`

如果您需要动态创建 div，那么您可以执行以下操作：

```
 // your css would need to set .response to be display: none
    $('body').append('<div class="response">'+raw.data+'</div>');
    $('.response').fadeIn(500, function(){
        // in this callback (which runs once the fadeIn animation is complete), 
        // we will tell .response to disappear after 10 seconds
        setTimeout(function(){
            $('.response').fadeOut(500);
        }, 10000);
    }); 
```

这对您的问题有帮助吗？

# php - 如何通过 HTTP 标头使用另一台服务器登录 PHP 脚本？

> ID：11628488
> 
> 赞同：2
> 
> 时间：2012-07-24T10:01:44.763
> 
> 标签：php, http, header, metadata, icecast

我正在尝试创建一个脚本，该脚本将登录到 Icecast2 服务器并获取当前播放曲目的元数据。我的问题是 Icecast 服务器通过基本的 HTTP 登录受到用户/密码保护。

```
 <?php
        $fp = fsockopen("xxxxxxxx.com", 8000, $errno, $errstr, 30);
        if (!$fp) {
            echo "$errstr ($errno)<br />\n";
        } else {
            $out = "GET / HTTP/1.1\r\n";
            $out .= "Icy-MetaData:1\r\n";
            $out .= "Host: xxxxxxxx.com\r\n";
            $out .= "Connection: Close\r\n\r\n";

            fwrite($fp, $out);
            $arr = array();

            while (!feof($fp)) {
                $arr[] = fgets($fp, 128);
            }
            fclose($fp);
        }

        echo json_encode(trim(strip_tags($arr[73])));

?> 
```

这是允许我在 Icecast 服务器受密码保护之前获取元数据的脚本。

**简而言之，如何通过此脚本向 Icecast 服务器发送用户/密码以成功登录并获取信息？（使用 htpasswd）**

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:08:15.200

一些研究揭示了[这一点](http://www.higherpass.com/php/Tutorials/Using-Curl-To-Query-Remote-Servers/5/)。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.example.com');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt(CURLOPT_USERPWD, '[username]:[password]')

$data = curl_exec();
curl_close($ch); 
```

但是，它需要使用[cURL](http://php.net/manual/en/book.curl.php)而不是文件套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:05:59.147

如[Wikipedia](http://en.wikipedia.org/wiki/Basic_access_authentication)上所述，您需要`Authorization: Basic`标题和.[`base64_encode()`](http://php.net/manual/en/function.base64-encode.php) `username:password`

要添加的代码：

```
$out .= "Authorization: Basic " . base64_encode($user .":". $password); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:11:35.110

手动登录以检查页面是否使用 cookie 来验证用户身份，如果是，则可以使用标头发送 cookie，这应该允许您从受密码保护的页面中检索数据。

```
$array = array(
      'http'=>array(
        'header'=>"Cookie: *cookiedatahere*"
      )
);

$context = stream_context_create($array);

$url = *password protected data source*;
$raw = file_get_contents($url, false, $context); 
```

# ember.js - emberjs - 如何使用路由器基础设施标记活动菜单项

> ID：11628489
> 
> 赞同：51
> 
> 时间：2012-07-24T10:02:08.923
> 
> 标签：ember.js, ember-old-router

我正在尝试创建导航选项卡（取自[Twitter Bootstrap](http://twitter.github.com/bootstrap/components.html#navs)）：

```
<ul class="nav nav-tabs">
    <li class="active"><a href="#">Home</a></li>
    <li><a href="#">Profile</a></li>
    <li><a href="#">Messages</a></li>
</ul> 
```

活动选项卡标有`class="active"`。

在[http://jsfiddle.net/schawaska/pfbva/](http://jsfiddle.net/schawaska/pfbva/)上有一个很好的静态导航栏和路由器/插座功能示例，但我不明白如何创建动态导航栏/菜单/选项卡视图。

据我了解，可以在每个菜单项中使用类绑定：

```
 classNameBindings: ['isActive:active'] 
```

但是切换 isActive 属性的正确位置在哪里？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-01-24T12:08:23.630

余烬 1.11+：

```
{{#link-to "dashboard" tagName="li"}}
  <a href="{{view.href}}">Dashboard</a>
{{/link-to}} 
```

Ember < 1.11（`bind-attr`必需）：

```
{{#link-to "dashboard" tagName="li"}}
  <a {{bind-attr href="view.href"}}>Dashboard</a>
{{/link-to}} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-24T11:34:07.610

如果您使用的是 Ember >= 1.11，那么下面的[https://stackoverflow.com/a/14501021/65542](https://stackoverflow.com/a/14501021/65542)是正确答案。

* * *

我会创建一个`NavigationView`，请参阅[http://jsfiddle.net/pangratz666/z8ssG/](http://jsfiddle.net/pangratz666/z8ssG/)：

**车把**：

```
<script type="text/x-handlebars" data-template-name="navigation">
    <ul class="nav nav-tabs">
        {{#view view.NavItemView item="home" }}
            <a {{action gotoHome}} >Home</a>
        {{/view}}
        {{#view view.NavItemView item="profiles" }}
            <a {{action gotoProfiles}} >Profiles</a>
        {{/view}}
        {{#view view.NavItemView item="messages" }}
            <a {{action gotoMessages}} >Messages</a>
        {{/view}}        
    </ul>
</script> 
```

**JavaScript**：

```
App.NavigationView = Em.View.extend({
    templateName: 'navigation',
    selectedBinding: 'controller.selected',
    NavItemView: Ember.View.extend({
        tagName: 'li',
        classNameBindings: 'isActive:active'.w(),
        isActive: function() {
            return this.get('item') === this.get('parentView.selected');
        }.property('item', 'parentView.selected').cacheable()
    })
}); 
```

在您的路线内，`connectOutlets`您必须通过`router.set('navigationController.selected', 'home');`...设置当前导航项

* * *

还可以查看[ember-bootstrap](https://github.com/emberjs-addons/ember-bootstrap)存储库，它在 Ember.js 中包装了 Bootstrap 的这个和更多功能

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-05-31T05:17:43.827

上面的一些建议对于 twitter bootstrap 案例仍然有效。你也可以试试这样的

```
{{#link-to 'dashboard' tagName='li'}} 
  {{#link-to 'dashboard'}}Link Title{{/link-to}}
{{/link-to}} 
```

1.  `link-to`with tagName将`li`活动类应用于 li
2.  内部`link-to`将是一个在右键单击时`anchor`为您提供功能的元素`Open in New Tab`

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-04-29T09:38:19.293

最近有一个 Ember-cli 插件可以做到这一点。它被称为[ember-cli-active-link-wrapper](https://www.npmjs.com/package/ember-cli-active-link-wrapper)。

安装：`ember install ember-cli-active-link-wrapper`

你可以像这样使用它：

```
{{#active-link}}
  {{link-to "Index" "index"}}
{{/active-link}} 
```

这导致：

```
<li class='active'>
    <a href="/" class='active'>Index</a>
</li> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-03-12T08:40:08.057

我知道这是旧帖子，但这里是**Ember 2.4.0的更新**

要创建链接，您可以编写

```
{{#link-to 'photoGallery'}}
  Great Hamster Photos
{{/link-to}} 
```

或者

```
{{link-to 'Great Hamster Photos' 'photoGallery'}} 
```

当当前路由与链接的路由匹配时，Ember 会自动将类设置为活动状态（在本例中`photoGallery`）。

如果您还想控制其他路线上的“活动”类，您可以通过设置`current-when`属性来实现。

```
{{#link-to 'photoGallery' current-when='photoGallery photoPreview'}}
  Great Hamster Photos
{{/link-to}} 
```

此链接将在和路线`active`上都有课程。`photoGallery``photoPreview`

[https://github.com/emberjs/ember.js/blob/v2.4.0/packages/ember-routing-views/lib/components/link-to.js#L140](https://github.com/emberjs/ember.js/blob/v2.4.0/packages/ember-routing-views/lib/components/link-to.js#L140)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-02-16T12:51:09.023

车把

```
<ul class="nav">
    <li>{{#linkTo "index"}}Index{{/linkTo}}</li>
    <li>{{#linkTo "about"}}About{{/linkTo}}</li>
</ul> 
```

Javascript

```
App.Router.map(function() {
    this.route("about");
}); 
```

它将根据路由自动添加活动类。注意：使用 ember-1.0.0-pre.4.js 测试

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-02T07:08:15.587

您还可以将 isActive 方法更改为如下内容：

```
isActive: function() {
    return App.getPath('router.currentState.path') === "root.firms";
}.property("App.router.currentState"), 
```

或者

```
isActive: function() {
    return this.get('controller.target.currentState.path') === "root.firms";
}.property("controller.target.currentState"), 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-26T23:38:36.273

我看到这个问题已经很老了，但是如果您将 Ember.js 升级到 RC3，您可以使用`tagName`属性，例如：

```
{{#link-to messages tagName="li"}}Messages{{/link-to}} 
```

这是 API - [http://emberjs.com/api/classes/Ember.LinkView.html](http://emberjs.com/api/classes/Ember.LinkView.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-24T11:14:26.437

不确定它是否非常动态，但尝试在[http://codebrief.com/2012/07/anatomy-of-an-ember-dot-js-app-part-i-redux-routing-and-outlets/](http://codebrief.com/2012/07/anatomy-of-an-ember-dot-js-app-part-i-redux-routing-and-outlets/)上查看解决方案 主要思想是检查您的应用程序的状态

**JavaScript：**

```
function stateFlag(name) {
  return Ember.computed(function() {
    var state = App.router.currentState;
    while(state) {
      if(state.name === name) return true;
      state = state.get('parentState');
    }
    return false;
  }).property('App.router.currentState');
}

ApplicationController: Ember.Controller.extend({
    isHome: stateFlag('home'),
    isSections: stateFlag('sections'),
    isItems: stateFlag('items')
  }) 
```

**车把：**

```
<li class="home" {{bindAttr class="isHome:active"}}>
</li>
<li class="sections" {{bindAttr class="isSections:active"}}>
</li>
<li class="items" {{bindAttr class="isItems:active"}}>
</li> 
```

**更新：** pangratz 的解决方案看起来更漂亮

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-14T21:20:04.083

这是一个完整的工作解决方案：

看法：

```
App.NavView = Ember.View.extend({
  tagName: 'li',
  classNameBindings: ['active'],

  active: function() {
    return this.get('childViews.firstObject.active');
  }.property()
}); 
```

模板：

```
<ul>
  {{#each item in controller}}
  {{#view App.NavView}}
  {{#linkTo "item" item tagName="li"}}
      <a {{bindAttr href="view.href"}}>
        {{ item.name }}
      </a>
  {{/linkTo}}
  {{/view}}
  {{/each}}
</ul> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-07-09T08:37:32.880

从 v0.8.0 开始，[ember-bootstrap](http://kaliber5.github.io/ember-bootstrap/)支持导航，包括正确处理活动状态。而且没有任何链接到/标签名称的黑客：

```
{{#bs-nav type="pills"}}
   {{#bs-nav-item}}
      {{#link-to "foo"}}Foo{{/link-to}}
   {{/bs-nav-item}}
   {{#bs-nav-item}}
     {{#link-to "bar"}}Bar{{/link-to}}
   {{/bs-nav-item}}
 {{/bs-nav}} 
```

见[http://kaliber5.github.io/ember-bootstrap/api/classes/Components.Nav.html](http://kaliber5.github.io/ember-bootstrap/api/classes/Components.Nav.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-07-28T10:54:35.223

此处提出的许多解决方案不适用于任何最近的 Ember 版本（例如，不推荐使用的视图）。此外，仅使用`link-to`帮助程序不会解决问题，因为引导程序希望`active`该类出现在`<li>`not `<a>`！

因此，我将尝试总结目前确实有效的解决方案：

### 使用[ember-cli-active-link-wrapper](https://www.npmjs.com/package/ember-cli-active-link-wrapper)

该插件为此特殊用例提供了一个组件：

```
<ul class="nav nav-tabs">
  {{#active-link}}
    {{#link-to "foo"}}Foo{{/link-to}}
  {{/active-link}}
  {{#active-link}}
    {{#link-to "bar"}}Bar{{/link-to}}
  {{/active-link}}
</ul> 
```

取自[https://stackoverflow.com/a/29939821/5556104](https://stackoverflow.com/a/29939821/5556104)

### 使用[ember-bootstrap](http://kaliber5.github.io/ember-bootstrap/)

[ember-bootstrap](http://kaliber5.github.io/ember-bootstrap/)提供了许多将引导功能集成到您的 ember 应用程序中的组件，其中包括导航组件：

```
{{#bs-nav type="tabs"}}
   {{#bs-nav-item}}
      {{#link-to "foo"}}Foo{{/link-to}}
   {{/bs-nav-item}}
   {{#bs-nav-item}}
      {{#link-to "bar"}}Bar{{/link-to}}
   {{/bs-nav-item}}
 {{/bs-nav}} 
```

取自[https://stackoverflow.com/a/38279975/5556104](https://stackoverflow.com/a/38279975/5556104)

### 链接到黑客

有点hacky，但应该在没有任何额外插件的情况下工作：

```
<ul class="nav nav-tabs">
  {{#link-to "foo" tagName="li"}} 
    {{#link-to "foo"}}Foo{{/link-to}}
  {{/link-to}}
  {{#link-to "bar" tagName="li"}} 
    {{#link-to "bar"}}Bar{{/link-to}}
  {{/link-to}}
</ul> 
```

取自[https://stackoverflow.com/a/23966652/5556104](https://stackoverflow.com/a/23966652/5556104)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-12-27T19:18:04.320

迟早想要更改您的状态的命名或您必须通过代码和视图的任何内容，还添加一个函数来 transitionTo 每条路线似乎是不可取的。我的方法更加程序化和模块化：

```
# Parent View-Tamplate, holding the navbar DOM elements
App.NavView = Ember.View.extend( 
  controller: App.NavArrayController
  templateName: "ember-nav"
)
# We push NavItems into this array
App.NavArrayController = Ember.ArrayController.create(
  content: Ember.A([])
)
# NavItem has two settable properties and 
# an programmatic active state depending on the router
App.NavItem = Ember.Object.extend(
  title: ''
  goto: null    # <=this is the name of the state we want to go to!
  active: (->
    if App.router.currentState.name == @.get "goto"
      true
    else
      false
  ).property('App.router.currentState.name').cacheable()
)
# the actual NavElement which gets the class="active" if the 
# property "active" is true, plus a on-click binding to
# make the Router transition to this state
App.NavItemView = Ember.View.extend(
 tagName: "li"
  classNameBindings: ["active"]
  click: ->
    App.router.transitionTo(@get('goto'))
    false
) 
```

nav-view.hbs（用于 twitter-bootstrap 风格的导航）

```
<div class="nav-collapse collapse">
  <ul class="nav">
    {{#each App.NavArrayController}}
      {{#view App.NavItemView classBinding="active" gotoBinding="goto"}}
        <a href="#" {{bindAttr data-goto="goto"}}> {{title}}</a>
      {{/view}}
    {{/each}}
  </ul>
</div> 
```

这样，我可以在路由器中创建和处理我的路线，并保持导航定义并排：

```
# put this somewhere close to the Router 
App.NavArrayController.pushObjects(
  [
    App.NavItem.create(
      title: 'Home'
      goto: 'home'
    ),
    App.NavItem.create(
      title: 'Chat'
      goto: 'chat'
    ),
    App.NavItem.create(
      title: 'Test'
      goto: 'test'
    )
  ]
) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-07-21T16:35:03.780

baijum 上面的回答大部分是正确的，但是在最新版本的 Ember 中，“bind-attr”已被弃用。这是编写它的新方法：

```
{{#link-to "dashboard" tagName="li"}}
    <a href="{{view.href}}">Dashboard</a>
{{/link-to}} 
```

正如你所看到的，它更容易，而且有点像魔术一样的工作......

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-10-31T19:55:11.047

就像其他人说的那样，使用`{{#link-to}}`链接到现有的`route`，当该路由是当前 URL 时，`{{#link-to}}`将自动添加`active`到其 CSS 类。

请参阅[Ember 问题 4387](https://github.com/emberjs/ember.js/issues/4387)

# eclipse - EGit：如何防止快进合并？

> ID：11628493
> 
> 赞同：8
> 
> 时间：2012-07-24T10:02:23.440
> 
> 标签：eclipse, git, merge, egit

我工作的公司给了我将他们的 java 项目从 CVS 转移到 Git 的项目。出于几个原因，他们不想使用 Eclipse 以外的其他工具。所以我们被EGit困住了。

我进行了很多搜索以找到适合我们项目的工作流程。这个似乎很相关并被很多人使用：http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

问题是，当我们尝试使用提交、分支和合并来查看它如何与 EGit 一起工作时，发生了很多快进合并。快进合并的问题在于它会让你*失去*分支的起点。

我们工作的客户希望能够选择哪些功能将在下一个版本中出现，哪些不会。这是我们想要从 CVS 迁移到 Git 的主要原因之一，因为在 CVS 中似乎没有简单的方法来查找哪些文件因功能 #1 而被修改，哪些文件因功能 #2 而被修改。在 git 中，我们可以为功能 #1 和 #2 创建分支，并查找针对这些功能修改了哪些文件。但是，由于快进，就像回到 CVS，我们无法知道哪个是功能#1，哪个是功能#2。

**那么有什么办法可以防止快进合并？**我们尝试将这些配置放在 Eclipse 中：

```
[core]
mergeoptions = --no-ff

[merge]
ff = false 
```

但它并没有阻止 EGit 进行快进合并。如果此功能未使用 JGit/EGit 实现，是否有任何其他方法可以使用 Egit 来遵循客户想要的工作流（选择要发布的功能的能力）。使用命令行可能会解决问题，但如果可以将其保留在 Eclipse 中，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T10:20:46.040

[EGit 错误 336933](https://bugs.eclipse.org/bugs/show_bug.cgi?id=336933)是关于支持这些选项的，它已在 EGit 2.3 中修复，请参阅[发行说明](http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.3)。

如果您还没有使用 2.3，（丑陋的）解决方法可能如下所示：

*   在合并之前，使用历史视图检查它是否会导致快进合并
*   如果可以，请在不相关文件中的 master（或您要合并的分支）中进行提交
*   然后进行合并

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T12:54:49.810

请注意，随着**[Egit 2.3 的发布](http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.3)**，Egit 现在支持该选项：

> 支持`git merge --no-ff`作为 EGit 首选项。

这就完成了[错误 335091](https://bugs.eclipse.org/bugs/show_bug.cgi?id=335091)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:13:23.610

看起来这是不可能的，因为 JGit 不支持某些合并选项，包括 --no-ff。

看到[这个帖子](http://www.eclipse.org/forums/index.php/m/664973/)，有一个关于这个的错误报告。

# facebook - 我的网页中的 Facebook 签名请求

> ID：11628496
> 
> 赞同：-1
> 
> 时间：2012-07-24T10:02:35.010
> 
> 标签：facebook, login, oauth

是否可以访问我网页中的 signed_request 数据？（脸书环境外）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:26:10.243

如果您使用 JavaScript SDK 在您的站点上登录 (FB.login/FB.getLoginStatus)，那么您将在 response.authResponse 对象中获得一个 signed_request 属性。

# iphone - iPhone 联系人应用程序的“联系人视图/编辑视图”XCODE

> ID：11628500
> 
> 赞同：2
> 
> 时间：2012-07-24T10:02:45.903
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我实际上正在制作一个应用程序，其中有一个表格视图（列出所有课程）单击其中一个将显示该课程的详细信息。（细节视图）现在我想做的是，那个细节视图的编辑模式..我想让它感觉像 iphone 的原生应用程序：P

当我查看联系人的应用程序时，当我在联系人中单击“编辑”时，它似乎并没有改变整个视图控制器，而只是隐藏/显示旧/新字段和按钮..

如果它不是一个新的视图控制器（用于编辑），那么它是如何工作的？如果它是一个新的视图控制器，那么我想，它非常简单，将视图控制器推入导航堆栈..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:15:40.487

在视图控制器的“-(void)setEditing:(BOOL)editing animated:(BOOL)animated”方法中，覆盖当前行为：

```
 - (void)setEditing:(BOOL)editing animated:(BOOL)animated {
    [self.tableView beginUpdates]; // Tell the table to begin updates to ensure that the following reloads and animations all happen at once

    [super setEditing:editing animated:animated];

    // set the table editing if you are not using UITableViewController

    // reload any rows that may need updating for the new state

    if (editing) {
        // tell the table view to insert the editing rows
    } else {
        // tell the table view to remove the editing rows
    }

    [self.tableView endUpdates]; // commit the updates.
} 
```

所以现在，当视图控制器（和表视图）进入编辑模式时，视图控制器告诉表在编辑点插入行。表格本身也进入编辑模式。

随着视图控制器退出编辑（以及带有它的表格视图），正在编辑特定的行被删除。

请注意，如果您不使用 UITableViewController 子类，而只是 UIViewController 本身的子类，则需要告诉表格视图同时进入编辑状态：

```
[tableView setEditing:editing animated:animated]; 
```

如果您需要重新加载或插入行等，委托和数据源方法需要检查表是否处于编辑模式，并返回编辑或非编辑模式所需的行。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (tableView.editing) {
        return /*editing count*/;
    }
    return 0;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (tableView.editing) {
        // return cells for the editing state.
    }

    // return cells based on the standard state.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:12:44.153

是的，您在 iPhone 中编写本机联系人的应用程序不会更改整个视图控制器，而只是隐藏/显示旧/新字段和按钮..

为此，首先您必须采用 UITableView 然后您可以通过采用不同的部分然后在该部分中的行来添加您的视图，或者使用 UITableView 的标题视图在联系人的应用程序中显示一些视图，例如联系人的应用程序联系人的 ImageView 和联系人姓名和公司字段显示在 UITableView 的标题视图中。

您还可以使用 UITableView 的页脚视图在表格视图的底部添加按钮或某些视图。

像这样，您可以显示用户选择的课程的详细视图。

对于编辑模式，当用户点击编辑按钮时，您需要重新加载表格视图并在表格视图的委托方法中为表格视图提供适当的视图，为此您需要跟踪模式，即课程详细视图模式或课程编辑模式。

或者

您可以将两个单独的表一起用于两种不同的模式。

当用户点击特定课程加载下一个显示课程详细信息的视图时，

当用户点击编辑按钮时，删除课程详细信息表格视图，例如 [tableview removeFromSuperView]；

并添加具有不同视图的课程编辑表，

例如 [self.view addSubview:courseEditTable];

# java - java中的垃圾字符删除

> ID：11628502
> 
> 赞同：9
> 
> 时间：2012-07-24T10:02:47.800
> 
> 标签：java, mysql, string, utf-8

如果我从 word 复制，在文本字段中，会插入垃圾字符。从jsp页面发布参数时它仍然很好。但是在获取 java 中的参数时，它会转换为垃圾。我在插入之前使用了以下代码来消除垃圾。我正在使用mysql数据库。（JBOSS 5.1 GA 服务器）

```
String outputEncoding = "UTF-8";

Charset charsetOutput = Charset.forName(outputEncoding);
CharsetEncoder encoder = charsetOutput.newEncoder();
byte[] bufferToConvert = userText.getBytes();
CharsetDecoder decoder =  (CharsetDecoder) charsetOutput.newDecoder();
try {
    CharBuffer cbuf = decoder.decode(ByteBuffer.wrap(bufferToConvert));
    ByteBuffer bbuf = encoder.encode(CharBuffer.wrap(cbuf));
    userText = decoder.decode(bbuf).toString();
} catch (CharacterCodingException e) {
    e.printStackTrace();
} 
```

但我仍然收到单引号（''）和双引号（“”）的垃圾字符。我需要 UTF-8 格式的字符串。谁能建议我可能错在哪里？

示例：输入 -“esgh”。输出 - â??esghâ?? ：想要的输出 -“esgh”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T10:32:19.633

您必须交换编码和解码调用。**加; 您要解码两次，仅一次编码！**

你写了：

```
CharBuffer cbuf = decoder.decode(ByteBuffer.wrap(bufferToConvert));
ByteBuffer bbuf = encoder.encode(CharBuffer.wrap(cbuf));
userText = decoder.decode(bbuf).toString(); 
```

但是，显然，它必须是：

```
ByteBuffer bbuf = encoder.encode(CharBuffer.wrap(userText));
CharBuffer cbuf = decoder.decode(bbuf);
userText = cbuf.toString(); 
```

首先，您必须对文本进行编码，然后对编码结果进行解码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T21:59:48.720

如果您从 Microsoft Word 复制文本，它具有“智能引号”功能，有时会在编码/解码时出错。尝试使用编码`Windows-1252`作为源编码。另外，我建议使用`String#getBytes(String)`and`String#String(byte[],Charset)`进行转换，不需要在这个级别上搞乱缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:04:08.007

Martijn Courteaux 的回答应该会给你预期的输出。但是一旦尝试使用服务器设置`CHARACTER`并将`COLLATION`.Set 设置为`UTF-8`.

我希望它会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T16:20:32.730

请检查网络/应用程序服务器是否正在发送正确的数据。

您使用的是哪个 Web/应用程序服务器？

您使用的是简单的文本字段还是其他？

# magento - Magento网站IE问题

> ID：11628506
> 
> 赞同：0
> 
> 时间：2012-07-24T10:03:02.253
> 
> 标签：magento, ie-compatibility-mode

我在我的 magento 网站上遇到了 IE 兼容性问题。当我深入研究时，我发现这是因为默认的怪癖模式。当我将 quirks 模式更改为 IE 标准模式时，我可以获得原始网站。但默认情况下，怪癖模式即将到来。

*当我定义页面的DOCTYPE*时，我可以在 html 网站中解决这个问题。但我是magento的新手。我不知道如何在 Magento 网站中定义*DOCTYPE 。*我尝试了一些php文件。但是失败了。有人帮我解决这个问题吗？

有没有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:28:46.123

DOCTYPE 在模板的主页模板中定义，即 1column.phtml、2columns-left.phtml、2columns-right.phtml、3columns.phtml。

所以在 app/design/frontend/[package]/[theme]/templates/page/

其中 package 是您的活动包，而 theme 是活动主题。

# c# - XSD 代码生成器空节点

> ID：11628507
> 
> 赞同：0
> 
> 时间：2012-07-24T10:03:02.480
> 
> 标签：c#, xml, xsd, xsd.exe

我收到了一个 XSD 文件，我使用 XSD.exe 生成了代码，但它没有按我预期的方式运行。

```
 <xsd:element name="Claims">
      <xsd:complexType>
        <xsd:sequence>
          <xsd:element maxOccurs="unbounded" name="Claim" minOccurs="0">
            <xsd:complexType>
              <xsd:sequence>
                <xsd:element name="ClaimDate" type="xsd:dateTime" />
                <xsd:element name="ClaimDesc" type="xsd:string" />
                ....
              </xsd:sequence>
            </xsd:complexType>
          </xsd:element>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:element> 
```

期望是，如果没有声明，则发送一个空节点，但生成的代码显示为

```
[System.Xml.Serialization.XmlArrayItemAttribute("Claim", IsNullable=false)]
public QuoteRequestClaim[] Claims {
    get {
        return this.claimsField;
    }
    set {
        this.claimsField = value;
    }
} 
```

这意味着我不能通过这个空节点。这是 XSD.exe 中的一个怪癖，还是需要修改 XSD 才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:29:41.517

我自己解决了这个问题。我提供的 XSD 需要更改为

```
<xsd:sequence maxOccurs="unbounded" minOccurs="0">
      <xsd:element name="Claim">
      </xsd:element>
</xsd:sequence> 
```

minOccurs 和 maxOccurs 在错误的位置。

# c - 为户主减少算法编译 C 代码时出错

> ID：11628515
> 
> 赞同：0
> 
> 时间：2012-07-24T10:03:35.787
> 
> 标签：c, visual-studio, algorithm, exception

我写了一个 C 代码来减少户主（将矩阵转换为三对角矩阵），但是编译它会出现以下错误：

eig3.exe 中 0x0139399d 处的第一次机会异常：0xC0000005：访问冲突读取位置 0x001ac240。

eig3.exe 中 0x0139399d 处未处理的异常：0xC0000005：访问冲突读取位置 0x001ac240。

我不知道这个错误的原因是什么以及如何处理它。谢谢你的帮助。

```
 #include <stdio.h>
    #include <math.h>

    void tred2(float a [25][25], int n, float d[25], float e[25]);

    int main(void)
    {
    float p [25][25] = {
    {2555.00000000000   ,922.005311398953   ,637.379419667162   ,620.854753485905   ,911.254051182594   ,1014.66270354426   ,812.462795013727   ,1072.60166757533   ,1096.81527844247   ,804.789434963328   ,787.686049787311   ,149.217640419107   ,1566.64395026266   ,1588.48393430107   ,1492.94885424606   ,991.938328585146   ,976.827808746522   ,532.528819818273   ,722.768915905778   ,763.614122733850   ,1579.60048937499   ,1001.71798224119   ,1302.39870957033   ,1166.44619446079   ,1560.95252809953}
    ,{922.005311398953  ,2555.00000000000   ,948.729365770484   ,1252.25139249907   ,626.461731508273   ,1872.91731556186   ,970.579881474055   ,1404.21684991920   ,1697.79261702870   ,1660.75191655532   ,885.912360323321   ,-826.559236092200  ,1064.22706203730   ,1297.73910149212   ,1149.30978063813   ,1432.76348929109   ,1203.23027209744   ,898.925016935900   ,1731.53004042905   ,1501.47080150068   ,1293.89882724464   ,292.711988397453   ,1583.90052201935   ,742.612048219667   ,1412.09079625792}
    ,{637.379419667162  ,948.729365770484   ,2555.00000000000   ,1606.45631882269   ,1205.09485268865   ,1214.09523991542   ,1248.34335302171   ,1326.14561611573   ,1230.85115422645   ,1669.59745355344   ,1752.88432738528   ,494.100155408190   ,1080.00543503926   ,1067.78673262180   ,975.062883004617   ,1405.11899504866   ,1247.48007973090   ,1676.09723626932   ,1491.90674867064   ,1610.28518973263   ,1183.09375133136   ,1273.50753822421   ,1112.17881531081   ,933.065161216677   ,1327.24996811513}
    ,{620.854753485905  ,1252.25139249907   ,1606.45631882269   ,2555.00000000000   ,982.568289011985   ,1334.18632529062   ,1235.54945313756   ,1505.75951183069   ,1336.55410791772   ,1800.29366906675   ,1513.41736418093   ,-150.789903127066  ,1136.34003190369   ,1086.47082456098   ,856.748289849762   ,1527.62678599168   ,1367.39795727282   ,1457.68030807905   ,1843.09328177403   ,1888.54356980410   ,1152.61902697012   ,1148.79986990636   ,1319.86967136771   ,811.630450226485   ,1324.72067320582}
    ,{911.254051182594  ,626.461731508273   ,1205.09485268865   ,982.568289011985   ,2555.00000000000   ,1006.48667459184   ,1436.94802946664   ,1478.68843517829   ,1111.66962056243   ,974.358987124379   ,1682.91304943585   ,1383.69707742754   ,1429.43793210911   ,1086.57958876630   ,1228.44183248830   ,1348.82292814661   ,1325.04121890600   ,1406.19567045305   ,685.498133948134   ,961.858800804619   ,1140.83831352846   ,1741.89044735911   ,705.214461186938   ,1123.73455700641   ,1326.41608064405}
    ,{1014.66270354426  ,1872.91731556186   ,1214.09523991542   ,1334.18632529062   ,1006.48667459184   ,2555.00000000000   ,1102.75907250178   ,1532.03278329145   ,1898.33027069207   ,1743.73722868282   ,1242.26031630962   ,-374.581610868589  ,1288.97322442843   ,1522.17129337367   ,1161.22727923774   ,1473.15439922315   ,1242.38910855661   ,1044.03524006396   ,1737.82499851481   ,1562.82929669660   ,1431.63427086281   ,670.595041163938   ,1669.23104465845   ,856.549829330034   ,1592.91947720379}
    ,{812.462795013727  ,970.579881474055   ,1248.34335302171   ,1235.54945313756   ,1436.94802946664   ,1102.75907250178   ,2555.00000000000   ,1852.32912991805   ,1262.19132114632   ,1071.57700899904   ,1594.42318713543   ,976.023796565991   ,1451.14173122087   ,1011.97236259581   ,1315.19997091247   ,1936.85007229790   ,1970.04581376139   ,1558.86400917758   ,1034.22690523497   ,1174.78286756902   ,1208.69285767467   ,1255.06466912584   ,734.338320013703   ,889.143970486845   ,1232.98445944503}
    ,{1072.60166757533  ,1404.21684991920   ,1326.14561611573   ,1505.75951183069   ,1478.68843517829   ,1532.03278329145   ,1852.32912991805   ,2555.00000000000   ,1590.48563674342   ,1553.73027238155   ,1543.62072395496   ,346.707208870300   ,1671.67461719673   ,1315.57936035923   ,1368.83441512085   ,2016.29646183317   ,1974.85412946931   ,1293.01154780142   ,1487.73944205692   ,1608.85973274544   ,1474.18444486134   ,1128.61280903632   ,1178.35448619270   ,1048.09492091795   ,1524.37188755617}
    ,{1096.81527844247  ,1697.79261702870   ,1230.85115422645   ,1336.55410791772   ,1111.66962056243   ,1898.33027069207   ,1262.19132114632   ,1590.48563674342   ,2555.00000000000   ,1682.64294010254   ,1376.98769886015   ,-101.987854073015  ,1305.92004665249   ,1531.57844271590   ,1265.40439197583   ,1462.99255306792   ,1437.78441328442   ,1113.27311156055   ,1622.34725044000   ,1602.43604551484   ,1438.29417331368   ,783.469603812970   ,1472.34769797847   ,896.479716677738   ,1482.73306220344}
    ,{804.789434963328  ,1660.75191655532   ,1669.59745355344   ,1800.29366906675   ,974.358987124379   ,1743.73722868282   ,1071.57700899904   ,1553.73027238155   ,1682.64294010254   ,2555.00000000001   ,1626.25275793207   ,-420.709178738120  ,1158.29054706898   ,1305.03473704533   ,1006.33223409788   ,1528.75160521552   ,1224.36877733660   ,1490.98324372591   ,2080.17152629728   ,2030.17215288853   ,1380.88302431676   ,770.111243053728   ,1587.56786604855   ,958.393733612288   ,1533.86017999511}
    ,{787.686049787311  ,885.912360323321   ,1752.88432738528   ,1513.41736418093   ,1682.91304943585   ,1242.26031630962   ,1594.42318713543   ,1543.62072395496   ,1376.98769886015   ,1626.25275793207   ,2555.00000000000   ,1097.63026872654   ,1342.56626511327   ,1121.01344153946   ,1229.36072577169   ,1599.79042770094   ,1424.31811308624   ,1882.73938717439   ,1368.97989321395   ,1595.13452677113   ,1292.17310482938   ,1578.82248605974   ,1032.67146970819   ,968.266803228347   ,1413.73060072601}
    ,{149.217640419107  ,-826.559236092200  ,494.100155408190   ,-150.789903127066  ,1383.69707742754   ,-374.581610868589  ,976.023796565991   ,346.707208870300   ,-101.987854073015  ,-420.709178738120  ,1097.63026872654   ,2555.00000000001   ,454.968552737453   ,-15.1135182216903  ,506.850419956902   ,383.190817312292   ,564.386594524708   ,890.220013496502   ,-697.131970750369  ,-294.984935131726  ,79.3672216013743   ,1281.22039761639   ,-677.737670255204  ,194.388865612795   ,53.2942878203829}
    ,{1566.64395026266  ,1064.22706203730   ,1080.00543503926   ,1136.34003190369   ,1429.43793210911   ,1288.97322442843   ,1451.14173122087   ,1671.67461719673   ,1305.92004665249   ,1158.29054706898   ,1342.56626511327   ,454.968552737453   ,2555.00000000000   ,1645.43953157881   ,1551.51256668275   ,1656.32956655138   ,1449.67830906168   ,1035.28509796355   ,1059.71892915082   ,1142.41232626779   ,1717.55677745606   ,1489.41331600837   ,1568.01635257960   ,1322.25766815038   ,1960.69572270888}
    ,{1588.48393430107  ,1297.73910149212   ,1067.78673262180   ,1086.47082456098   ,1086.57958876630   ,1522.17129337367   ,1011.97236259581   ,1315.57936035923   ,1531.57844271590   ,1305.03473704533   ,1121.01344153946   ,-15.1135182216903  ,1645.43953157881   ,2555.00000000000   ,1633.85577074972   ,1309.83850890225   ,1116.37634369325   ,894.420409878297   ,1239.77893642942   ,1179.54818574932   ,1831.26976322878   ,1095.41625715418   ,1555.44977811449   ,1379.27681797320   ,1845.12969224029}
    ,{1492.94885424606  ,1149.30978063813   ,975.062883004617   ,856.748289849762   ,1228.44183248830   ,1161.22727923774   ,1315.19997091247   ,1368.83441512085   ,1265.40439197583   ,1006.33223409788   ,1229.36072577169   ,506.850419956902   ,1551.51256668275   ,1633.85577074972   ,2555.00000000000   ,1399.89569672702   ,1292.78494194694   ,1071.57348440573   ,919.438634412043   ,984.063775832769   ,1664.54317998763   ,1216.01431762331   ,1117.89982383136   ,1209.44972060098   ,1552.76541019022}
    ,{991.938328585146  ,1432.76348929109   ,1405.11899504866   ,1527.62678599168   ,1348.82292814661   ,1473.15439922315   ,1936.85007229790   ,2016.29646183317   ,1462.99255306792   ,1528.75160521552   ,1599.79042770094   ,383.190817312292   ,1656.32956655138   ,1309.83850890225   ,1399.89569672702   ,2555.00000000000   ,1907.39582900906   ,1533.90610292659   ,1529.08890780899   ,1528.36173717935   ,1451.45792249781   ,1185.87635311023   ,1245.92379463711   ,994.335556646288   ,1565.15016994369}
    ,{976.827808746522  ,1203.23027209744   ,1247.48007973090   ,1367.39795727282   ,1325.04121890600   ,1242.38910855661   ,1970.04581376139   ,1974.85412946931   ,1437.78441328442   ,1224.36877733660   ,1424.31811308624   ,564.386594524708   ,1449.67830906168   ,1116.37634369325   ,1292.78494194694   ,1907.39582900906   ,2555.00000000000   ,1308.07259306803   ,1290.86467986442   ,1440.81003563023   ,1356.20292784065   ,1138.03298890447   ,882.908847334965   ,880.320469711113   ,1293.91232138750}
    ,{532.528819818273  ,898.925016935900   ,1676.09723626932   ,1457.68030807905   ,1406.19567045305   ,1044.03524006396   ,1558.86400917758   ,1293.01154780142   ,1113.27311156055   ,1490.98324372591   ,1882.73938717439   ,890.220013496502   ,1035.28509796355   ,894.420409878297   ,1071.57348440573   ,1533.90610292659   ,1308.07259306803   ,2555.00000000001   ,1350.47553889761   ,1425.02183656120   ,1068.66070773005   ,1403.89403478196   ,995.052158755041   ,1033.42238484679   ,1256.14314008640}
    ,{722.768915905778  ,1731.53004042905   ,1491.90674867064   ,1843.09328177403   ,685.498133948134   ,1737.82499851481   ,1034.22690523497   ,1487.73944205692   ,1622.34725044000   ,2080.17152629728   ,1368.97989321395   ,-697.131970750369  ,1059.71892915082   ,1239.77893642942   ,919.438634412043   ,1529.08890780899   ,1290.86467986442   ,1350.47553889761   ,2555.00000000000   ,2004.23504874421   ,1315.13784792259   ,604.706253997176   ,1597.97962863405   ,817.161486914232   ,1437.88230857763}
    ,{763.614122733850  ,1501.47080150068   ,1610.28518973263   ,1888.54356980410   ,961.858800804619   ,1562.82929669660   ,1174.78286756902   ,1608.85973274544   ,1602.43604551484   ,2030.17215288853   ,1595.13452677113   ,-294.984935131726  ,1142.41232626779   ,1179.54818574932   ,984.063775832769   ,1528.36173717935   ,1440.81003563023   ,1425.02183656120   ,2004.23504874421   ,2555.00000000000   ,1293.05860991331   ,896.871006849127   ,1354.09744749331   ,820.004005040133   ,1350.99003077704}
    ,{1579.60048937499  ,1293.89882724464   ,1183.09375133136   ,1152.61902697012   ,1140.83831352846   ,1431.63427086281   ,1208.69285767467   ,1474.18444486134   ,1438.29417331368   ,1380.88302431676   ,1292.17310482938   ,79.3672216013743   ,1717.55677745606   ,1831.26976322878   ,1664.54317998763   ,1451.45792249781   ,1356.20292784065   ,1068.66070773005   ,1315.13784792259   ,1293.05860991331   ,2555.00000000000   ,1239.52387671990   ,1550.41892957873   ,1551.16127349026   ,1845.12091395182}
    ,{1001.71798224119  ,292.711988397453   ,1273.50753822421   ,1148.79986990636   ,1741.89044735911   ,670.595041163938   ,1255.06466912584   ,1128.61280903632   ,783.469603812970   ,770.111243053728   ,1578.82248605974   ,1281.22039761639   ,1489.41331600837   ,1095.41625715418   ,1216.01431762331   ,1185.87635311023   ,1138.03298890447   ,1403.89403478196   ,604.706253997176   ,896.871006849127   ,1239.52387671990   ,2555.00000000000   ,911.178694367549   ,1125.41110335920   ,1384.35828777648}
    ,{1302.39870957033  ,1583.90052201935   ,1112.17881531081   ,1319.86967136771   ,705.214461186938   ,1669.23104465845   ,734.338320013703   ,1178.35448619270   ,1472.34769797847   ,1587.56786604855   ,1032.67146970819   ,-677.737670255204  ,1568.01635257960   ,1555.44977811449   ,1117.89982383136   ,1245.92379463711   ,882.908847334965   ,995.052158755041   ,1597.97962863405   ,1354.09744749331   ,1550.41892957873   ,911.178694367549   ,2555.00000000000   ,1223.23805006692   ,1911.50640631402}
    ,{1166.44619446079  ,742.612048219667   ,933.065161216677   ,811.630450226485   ,1123.73455700641   ,856.549829330034   ,889.143970486845   ,1048.09492091795   ,896.479716677738   ,958.393733612288   ,968.266803228347   ,194.388865612795   ,1322.25766815038   ,1379.27681797320   ,1209.44972060098   ,994.335556646288   ,880.320469711113   ,1033.42238484679   ,817.161486914232   ,820.004005040133   ,1551.16127349026   ,1125.41110335920   ,1223.23805006692   ,2555.00000000000   ,1512.05329660110}
    ,{1560.95252809953  ,1412.09079625792   ,1327.24996811513   ,1324.72067320582   ,1326.41608064405   ,1592.91947720379   ,1232.98445944503   ,1524.37188755617   ,1482.73306220344   ,1533.86017999511   ,1413.73060072601   ,53.2942878203829   ,1960.69572270888   ,1845.12969224029   ,1552.76541019022   ,1565.15016994369   ,1293.91232138750   ,1256.14314008640   ,1437.88230857763   ,1350.99003077704   ,1845.12091395182   ,1384.35828777648   ,1911.50640631402   ,1512.05329660110   ,2555.00000000000}
    };

    int myLength = sizeof(p);
    float dd [25] = { 0.0 };
    float ee [25] = { 0.0 };
    tred2(p,myLength,dd,ee);
    }

    void tred2(float a [25][25], int n,float d[25], float e[25])
    //void tred2(void)
    {
    int l,k,j,i;
    float scale,hh,h,g,f;
    for (i=n;i>=2;i--) {
    l=i-1;
    h=scale=0.0;
    if (l > 1) {
    for (k=1;k<=l;k++)
    scale += fabs(a[i][k]);
    if (scale == 0.0) /*Skip transformation.*/
    e[i]=a[i][l];
    else {
    for (k=1;k<=l;k++) {
    a[i][k] /= scale; /*Use scaled a’s for transformation.*/
    h += a[i][k]*a[i][k]; /*Form ? in h.*/
    }
    f=a[i][l];
    g=(f >= 0.0 ? -sqrt(h) : sqrt(h));
    e[i]=scale*g;
    h -= f*g; /*Now h is equation*/
    a[i][l]=f-g; /*Store u in the ith row of a.*/
    f=0.0;
    for (j=1;j<=l;j++) {
    /* Next statement can be omitted if eigenvectors not wanted */
    a[j][i]=a[i][j]/h; /*Store u/H in ith column of a.*/
    g=0.0; /*Form an element of A · u in g.*/
    for (k=1;k<=j;k++)
    g += a[j][k]*a[i][k];
    for (k=j+1;k<=l;k++)
    g += a[k][j]*a[i][k];
    e[j]=g/h; /*Form element of p in temporarily unused element of e.*/
    f += e[j]*a[i][j];
    }
    hh=f/(h+h); /*Form K*/
    for (j=1;j<=l;j++) { /*Form q and store in e overwriting p.*/
    f=a[i][j];
    e[j]=g=e[j]-hh*f;
    for (k=1;k<=j;k++) /*Reduce a*/
    a[j][k] -= (f*e[k]+g*a[i][k]);
    }
    }
    } else
    e[i]=a[i][l];
    d[i]=h;
    }
    /* Next statement can be omitted if eigenvectors not wanted */
    d[1]=0.0;
    e[1]=0.0;
    /* Contents of this loop can be omitted if eigenvectors not wanted except for statement d[i]=a[i][i]; */
    for (i=1;i<=n;i++) { /*Begin accumulation of transformation matrices.*/
    l=i-1; 
    if (d[i]) { /*This block skipped when i=1.*/
    for (j=1;j<=l;j++) {
    g=0.0;
    for (k=1;k<=l;k++) /*Use u and u/H stored in a to form P·Q.*/
    g += a[i][k]*a[k][j];
    for (k=1;k<=l;k++)
    a[k][j] -= g*a[k][i];
    }
    }
    d[i]=a[i][i]; /*This statement remains.*/
    a[i][i]=1.0; /*Reset row and column of a to identity*/
    for (j=1;j<=l;j++) a[j][i]=a[i][j]=0.0; /*matrix for next iteration.*/
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:14:21.710

至少，看起来你需要这个：

```
int myLength = 25; 
```

代替 ：

```
int myLength = sizeof(p); 
```

`sizeof(p)`不会回来`25`，而是`25 * 25 * sizeof(float)`。

此外，您必须意识到数组索引从`0`to `n - 1`（`n`数组中的项目数量在哪里），而不是 from `1`to `n`。因此，当您遍历数组的内容时，请确保从 开始，在`0`停止`n - 1`。例如 ：

```
for (i = 0; i < n; ++i) {
    /* do something with array[i] */
} 
```

# ruby-on-rails - 通过项目学习 Rails 3 的资源

> ID：11628519
> 
> 赞同：3
> 
> 时间：2012-07-24T10:03:42.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3, railstutorial.org

我最近完成了我的 Rails 应用程序`Michael Hartl's Rails Tutorial Book`。我一直在通过添加额外的功能来玩弄该应用程序，例如照片上传、Twitter 用户登录等。我想知道是否有其他 Rails 资源使用 Hartl 的基于项目的学习方法。

我被引导`Rails for Zombies`并发现它在 Hartl 之后非常有限和大退步。有人建议我`Rails 3 in Action by Ryan Bigg and Yehuda Katz.`

如果你们中的任何人都可以为我提供一些`project-based learning`Rails 资源，我将不胜感激。

谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T10:50:48.333

**几个月前我也有同样的情况。**除了完成 Hartls 教程之外，我还完成了[Peepcode Rails 截屏视频](https://peepcode.com/screencasts)和[Lyndas 教程](http://www.lynda.com/Ruby-on-Rails-tutorials/essential-training/324-2.html)，所以看看那些（他们花钱但真的很好）。此外，我还阅读了 Rails 3 in action - 很棒的书！

但是，我提出了一个替代方案。除了阅读和观看截屏视频**，我认为最重要的是远离固定路径教程并开始构建您想要构建的应用程序。**你已经了解了一些基础知识，我认为已经准备好这样做了。当我这样做时，我对 Rails 和编码的热情爆发了，并给了我一些积极的方面：

a)**你在更短的时间内学到更多**

b)**你学会从更多的资源中学习**，为你遇到的每个问题提供多角度的视角

c)**你学会与社区互动**。周围有很多很棒的人，在 SO 上，在 irc chanels 上……通过向他们提问，您可以从他们那里学到难以置信的数量，比任何教程都多。

d)**你学习谷歌。**您将学习如何正确搜索问题的解决方案、阅读文档、阅读其他代码……所有基本技能。

d)**你学会独立思考。**这对我来说是一件大事。所有这些教程虽然非常好且内容丰富，但仅遵循和解释固定路径。现实世界的 Rails 开发比这要广泛得多，越早脱离固定的教程，就越早开始学习正确研究并用自己的头脑思考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:08:57.643

使用 Rails 进行敏捷 Web 开发（版本 4）。他们采用了基于项目的方法，详细解释了您使用 rails 的方法。当我开始时，我首先阅读了敏捷，然后是 Hartl 的教程，实际上应该是相反的。敏捷向您解释了 Rails 中的大部分内容。还可以使用导轨。它们很容易学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:13:22.903

[http://rubymonk.com/](http://rubymonk.com/)和[http://tryruby.org/levels/1/challenges/0](http://tryruby.org/levels/1/challenges/0)怎么样

虽然它不像基于项目的学习资源，但我认为它有用且有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T20:53:17.240

I agree with oFca. I finished the Rails Tutorial and immediately started creating my first app. Much of what is discussed in the tutorial, including associations, is relevant, so I've been bouncing around in the tutorial to figure out how to build parts of my app.

I get into some tricky situations when things don't work, but that's when Google and StackOverflow usually come to the rescue.

Rails is great, the Rails Tutorial is great, and StackOverflow is great!

# r - 迭代数据框中组的唯一组合

> ID：11628521
> 
> 赞同：1
> 
> 时间：2012-07-24T10:03:52.213
> 
> 标签：r, iteration, unique, dataframe, combinations

我在一个数据框中总结了 3 个不同的组。数据框如下所示：

```
d <- data.frame(v1 = c("A","A","A","B","B","B","C","C","C"), 

                v2 = c(1:9), stringsAsFactors = FALSE) 
```

我想要的是将 A 的值与 B 的值进行比较。A 的值也与 B 的值进行比较，最后将 B 的值与 C 的值进行比较

我构造了 2 个 for 循环来迭代 v1 以提取要比较的组。然而，for循环给了我所有可能的组合，比如：

甲与甲

甲与乙

A与C

B 与 A

B 与 B

B 与 C

C与A等等......

这是我的for循环：

```
for(i in unique(d$v1)) {

    for(j in unique(d$v1)) {

        cat("i = ", i, "j = ", j, "\n")

        group1 <- d[which(d$v1 == i), ]

            group2 <- d[which(d$v1 == j), ]

        print(group1)
        print(group2)

        cat("---------------------\n\n")

    }
} 
```

我怎样才能设法只迭代数据帧`d`，以便在第一次迭代中 group1 包含 A 的值，group2 包含 B 的值。在第二次迭代中 group1 包含 A 的值和 group2 的值 C。作为最后比较 group1 包含 B 的值， group2 包含 C 的值。

我不知何故完全被这个问题所困扰，并希望在这里找到答案。

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:36:33.510

也许这样的事情对你有用。通过更多的工作，输出也可以“整理”一点。

我们将用于`combn`找出组合，并`lapply`根据组合对我们的数据进行子集化：

```
temp = combn(unique(d$v1), 2)
temp
#     [,1] [,2] [,3]
# [1,] "A"  "A"  "B" 
# [2,] "B"  "C"  "C" 
lapply(1:ncol(temp), function(x) cbind(d[d$v1 == temp[1, x], ],
                                       d[d$v1 == temp[2, x], ]))
# [[1]]
#   v1 v2 v1 v2
# 1  A  1  B  4
# 2  A  2  B  5
# 3  A  3  B  6
# 
# [[2]]
#   v1 v2 v1 v2
# 1  A  1  C  7
# 2  A  2  C  8
# 3  A  3  C  9
# 
# [[3]]
#   v1 v2 v1 v2
# 4  B  4  C  7
# 5  B  5  C  8
# 6  B  6  C  9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:44:26.163

I personally like mrdwab answer for its elegance, but if you still want to do it your way with the loops I'd fix it with this (take into account this will mess up your code, it's better to keep it tidy :)

```
u <- unique(d$v1)
for (i in 1:length(u)) {
    if (i < length(u)) {
        for (j in u[(i+1):length(u)]) {
            group1 <- d[which(d$v1 == u[i]), ]
            group2 <- d[which(d$v1 == j), ]
            cat("i = ", u[i], "j = ", j, "\n")
            print(group1)
            print(group2)
            cat("---------------------\n\n")
        }
    }
} 
```

And result in this:

```
i =  A j =  B 
  v1 v2
1  A  1
2  A  2
3  A  3
  v1 v2
4  B  4
5  B  5
6  B  6
---------------------

i =  A j =  C 
  v1 v2
1  A  1
2  A  2
3  A  3
  v1 v2
7  C  7
8  C  8
9  C  9
---------------------

i =  B j =  C 
  v1 v2
4  B  4
5  B  5
6  B  6
  v1 v2
7  C  7
8  C  8
9  C  9
--------------------- 
```

# python - 用于从 dbpedia 解析 .nt 文件的 Python 库/代码

> ID：11628524
> 
> 赞同：3
> 
> 时间：2012-07-24T10:03:56.620
> 
> 标签：python, rdf, dbpedia

我想解析以 .nt 格式（N-Tuples）存在的[dbpedia 数据。](http://wiki.dbpedia.org/Downloads37)我已经下载了 .nt 文件，并且在我的本地磁盘中。

例如，我想找出所有实体及其主页。

我想做python。现在我唯一能做的就是做一个 grep，或者遍历所有行并选择我想要的行。有什么好的图书馆可以让我这样做吗？

我看着[RDFLib](https://github.com/RDFLib/rdflib/)。但是所有示例都告诉您如何编写或创建 .nt 格式而不是从中读取。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:41:07.703

来自[rdflib 文档。](http://code.alcidesfonseca.com/docs/rdflib/gettingstarted.html)：

```
>>> from rdflib.graph import Graph
>>> g = Graph()
>>> g.parse("demo.nt", format="nt") 
```

你只需要 `format=`kwarg。

# android - 分隔线是填充父级..我想适合金色边框...我该怎么办？

> ID：11628530
> 
> 赞同：0
> 
> 时间：2012-07-24T10:04:18.100
> 
> 标签：android, custom-lists

![在此处输入图像描述](../Images/dcbe0332d4c01241cb78dd028baa02b8.png)

在这张图片中，金色分隔线不适合屏幕......我希望这条线适合屏幕......我使用了 fill_parent..但这给了我这种布局......

这是我的自定义 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:id="@+id/main"
     >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="40dp" 
    android:layout_centerVertical="true" android:background="#000000">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="1dp"
        android:src="@drawable/arrow" />

    <LinearLayout
        android:id="@+id/linear1"
        android:layout_width="fill_parent"
        android:layout_height="2dp"
        android:layout_alignParentBottom="true"
        android:background="@drawable/seprater_line" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="TextView"
        android:textColor="@android:color/white"
        android:textSize="18sp" />

</RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:11:53.997

a 的分隔线与它本身`ListView`一样宽`ListView`。查看您的屏幕截图，您已经为您设置了一些边距或填充，`ListView`这也导致为分隔线设置边距/填充。删除这些属性，您的分隔线将覆盖整个屏幕宽度。通过为行本身定义自定义 xml 文件，您可以在需要时添加自定义填充/边距。

# ruby-on-rails - 尝试使用 vagrant 安装预配置的虚拟盒。初始化失败

> ID：11628534
> 
> 赞同：2
> 
> 时间：2012-07-24T10:04:47.220
> 
> 标签：ruby-on-rails, ruby, macos, virtualbox, vagrant

首先，我对此很陌生，但我正在尝试使用指南安装开源众筹平台

[https://github.com/danielweinmann/catarse/wiki/Pre-Configured-Catarse-Virtual-Box-using-Vagrant-%28Ubuntu-11.10-AMD64%29](https://github.com/danielweinmann/catarse/wiki/Pre-Configured-Catarse-Virtual-Box-using-Vagrant-%28Ubuntu-11.10-AMD64%29)

我安装了 vagrant 和 virtual box 都很好，包括图像的下载。

问题是当我尝试使用以下命令对其进行初始化时：

```
vagrant init Ubuntu_11.10_amd64-Catarse-Master 
```

系统响应以下错误：

```
Tiagos-MacBook-Pro:catarse_vagrant tiagomartins$ vagrant init Ubuntu_11.10_amd64-Catarse-Master
/Applications/Vagrant/embedded/gems/gems/vagrant-1.0.3/lib/vagrant/command/init.rb:28:in `initialize': Permission denied - /Users/tiagomartins/catarse_vagrant/Vagrantfile (Errno::EACCES)
    from /Applications/Vagrant/embedded/gems/gems/vagrant-1.0.3/lib/vagrant/command/init.rb:28:in `open'
    from /Applications/Vagrant/embedded/gems/gems/vagrant-1.0.3/lib/vagrant/command/init.rb:28:in `open'
    from /Applications/Vagrant/embedded/gems/gems/vagrant-1.0.3/lib/vagrant/command/init.rb:28:in `execute'
    from /Applications/Vagrant/embedded/gems/gems/vagrant-1.0.3/lib/vagrant/cli.rb:42:in `execute'
    from /Applications/Vagrant/embedded/gems/gems/vagrant-1.0.3/lib/vagrant/environment.rb:167:in `cli'
    from /Applications/Vagrant/embedded/gems/gems/vagrant-1.0.3/bin/vagrant:43:in `<top (required)>'
    from /Applications/Vagrant/bin/../embedded/gems/bin/vagrant:19:in `load'
    from /Applications/Vagrant/bin/../embedded/gems/bin/vagrant:19:in `<main>' 
```

我做错了什么以及修复它的最佳方法是什么。

非常感谢！！

蒂亚戈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:31:18.850

`/Users/tiagomartins/catarse_vagrant/Vagrantfile`根据错误消息，由于该文件的权限设置，Vagrant 无法访问。

更改文件或父文件夹的权限 ( [`chmod`](https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man1/chmod.1.html)/ [`chown`](https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man8/chown.8.html)) 应该可以解决问题。

# bash - Unix：递归解压缩相应文件夹中的 .zip 文件

> ID：11628538
> 
> 赞同：2
> 
> 时间：2012-07-24T10:04:57.523
> 
> 标签：bash, shell, unix, unzip

我`a.zip b.zip`在一个文件夹中有许多压缩文件等等​​。我想将它们解压缩并放入相应的目录中`a,b`。你能建议我一些 unix 脚本吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T10:30:35.327

应该不难（未经测试！）：

```
#!/bin/bash

for zip in *.zip ; do
    dir=${zip%.zip}
    mkdir "$dir"
    unzip -rd "$dir" "$zip"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:51:36.993

[上一篇文章](https://stackoverflow.com/questions/8107886/create-folder-for-zip-file-and-extract-to-it)帮助我实现了同样的功能；我什至创建了一个脚本来帮助我在计算机上记住：

```
$ ls *.zip|awk -F'.zip' '{print "unzip "$0" -d "$1}'|sh 
```

* * *

同样，您可以创建一个`alias`来执行一个`bash`函数：

```
$ alias munzip='for f in *.zip; do unzip -d "${f%*.zip}" "$f"; done' 
```

对于试运行，请事先对其进行测试：

```
$ alias testmunzip='for f in *.zip; do echo unzip -d "${f%*.zip}" "$f"; done' 
```

只是认为将这些相关信息保留在一个页面上可能会有所帮助，以防其他人正在寻找相同的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:32:10.987

您可以在 unzip 中使用 unzip 实用程序，如下所示：

```
 #!/bin/bash

    for f in *.zip
    do
        echo "unzipping $f"
        unzip $f -d ${f%.*}
    done 
```

在目录中运行此脚本将根据需要解压缩其中的所有 zip 文件，例如 a.zip，b.zip 将分别解压缩到目录 a 和 b。

# parsing - 如何在 Pharo Smalltalk 中解析这个（见描述）文本文件

> ID：11628539
> 
> 赞同：4
> 
> 时间：2012-07-24T10:05:03.680
> 
> 标签：parsing, text, csv, smalltalk, pharo

我想在 Pharo Smalltalk 中解析一个文本文件，它具有下面概述的结构到一个名为 TestResults 的 Smalltalk 对象中，该对象具有所有数据元素的实例变量：

```
Properties:

Name: Value
Name: Value
...

Settings:

Category
    SubCategory
        Name=Value
    SubCategory
        Name=Value
        Name=Value
...

Column1 Column2 Column3 ...
Value Value Value...
... 
```

我曾考虑将[NeoCSV](https://github.com/svenvc/docs/blob/master/neo/neo-csv-paper.md)用于文件末尾的制表符分隔值部分，但我不知道如何解析文件的开头以及如何将它（如果这种方法可能的话）与 NeoCSV 结合起来。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T11:00:45.343

我建议你看看 PetitParser。请参阅[http://pharobooks.gforge.inria.fr/PharoByExampleTwo-Eng/latest/PetitParser.pdf](http://pharobooks.gforge.inria.fr/PharoByExampleTwo-Eng/latest/PetitParser.pdf)和[http://www.themoosebook.org/book/internals/petit-parser](http://www.themoosebook.org/book/internals/petit-parser)。如果您在编写解析器时需要帮助，请不要犹豫，在 stackoverflow 上提出更多关于此的问题。

# iphone - 滚动后异常不活动的uitableview

> ID：11628541
> 
> 赞同：0
> 
> 时间：2012-07-24T10:05:09.380
> 
> 标签：iphone, ios, uitableview, uiscrollview

我有一个奇怪的问题，我不确定是什么原因造成的。我有一个宽度未知的水平滚动视图（启用了分页）：

```
myScrollView.contentSize = CGSizeMake(320 * count, myScrollView.frame.size.height); 
```

在这个滚动视图内部是一个单独的表（myTable），它会根据当前页面的内容进行更新。在 scrollViewDidScroll 方法中 - 设置了 int 页面，更新了 pageControl (UIPageControl)，然后我移动了表格，使其仍在视图中。移动表格后，我更新数据并重新加载表格。

```
- (void)scrollViewDidScroll:(UIScrollView *)sender {
CGFloat pageWidth = myScrollView.frame.size.width;
page = floor((tableScroll.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
pageControl.currentPage = page;

[myTable setFrame:CGRectMake(tableScroll.contentOffset.x, 0, 320, 213)];
//[myTable bringSubviewToFront:tableScroll];
//[tableScroll bringSubviewToFront:self.view];

[self getMyData];
[myTable reloadData]; 
```

这工作正常，滚动后表格可见并且数据已更新。我遇到的问题是表格的所有交互性都丢失了。我无法单击单元格上的任何按钮或单击单元格本身。交互只在第一页起作用。

有谁知道这可能是什么原因或如何解决它。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:49:11.913

我假设“myTable”是一个 UITableView。如果是这样我知道问题 - UITableView 本身是 UIScrollView 的子类 - 所以你有嵌套的滚动视图。[在 scrollView 中](https://stackoverflow.com/a/3424528/96716)有此UIScrollView 的解决方法。在本网站的 scrollView 中搜索 UIScrollView 以获取更多建议。

# python - Python csv：写入文件时保留标题

> ID：11628542
> 
> 赞同：1
> 
> 时间：2012-07-24T10:05:11.190
> 
> 标签：python, csv

我编写了一个简单的函数，该函数根据用户提供的 CSV 的行数，通过添加或删除列：

```
def sanExt(ifpath, ofpath):
    with open(ifpath, "rb") as fin, open(ofpath, "wb") as fout:
        csvin = csv.reader(fin)
        csvout = csv.writer(fout, delimiter=",")
        fline = csvin.next()
        if len(fline) == 33:
            for row in csvin:
                row.insert(10, "NULL")
                csvout.writerow(row)
            print "AG"
        elif len(fline) == 35:
            print "AI"
        elif len(fline) == 36:
            print "AJ"
        else:
            print "Unknown" 
```

我已经停在第一`if`条语句上，只是为了确保我的代码有效。在这种情况下，该列已正确添加，但缺少标题。

如何确保每一行都写入文件，而不仅仅是`[1:len(rows)]`？

我的方法是完成所需工作的正确 pythonic 方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:54:42.393

如果您不需要`csv.DictReader`通过列名进行访问，那么传统的解决方案基于以下内容：

```
with open('in.csv') as fin, open('out.csv', 'wb') as fout:
   csvin = csv.reader(fin)
   csvout = csv.writer(fout)
   try:
       header = next(csvin)
       csvout.writerow(header)
   except StopIeration as e:
       pass # empty file - either handle, or we'll just continue and drop out of loop

   for row in csvin:
       csvout.writerow(row) # do some real work here... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:16:49.837

使用 csv.DictReader、csv.DictWriter 及其[writeheader()](http://docs.python.org/library/csv.html#csv.DictWriter.writeheader)方法来处理带有少量多余代码的标题行。

# asp.net - 表单身份验证子域 cookie 在某些服务器中传递，而不是在其他服务器中传递

> ID：11628549
> 
> 赞同：1
> 
> 时间：2012-07-24T10:05:36.973
> 
> 标签：asp.net, .net, forms-authentication, session-cookies, subdomain

我正在尝试跨多个服务器和子域设置表单身份验证，但我发现它适用于我们的某些盒子而不是其他盒子的问题。我们将 2 个 cookie 从一台服务器传递到另一台服务器。一个是 Forms Authentication 加密 cookie，另一个是非加密 cookie。

我们在两个盒子上都设置了正确的键：

```
<authentication mode="Forms" >
  <forms name=".MSLA" protection="All" timeout="30" slidingExpiration="true" path="/"
         enableCrossAppRedirects="true" />
</authentication>
<machineKey
  decryption="AES"
  decryptionKey="CAB....."
  validation="AES"
  validationKey="A2........."
/> 
```

我们正在设置正确的 cookie 域，例如。.bbbb.com 作为一个站点将是[http://login.bbbb.com](http://login.bbbb.com)，另一个是[http://app.bbbb.com](http://app.bbbb.com)。

我们正在使用 ASP.net 和 .Net 4.0

在有效的盒子上，我发现 isAutenticated 为真，并且 Forms Authentication 用户名已解密，但是在其他不起作用的盒子中，我发现非表单身份验证 cookie 已正确传递并读取，但表单身份验证 cookie 已通过（我可以通过 Firebug 看到），但第二个站点无法解密它，因此 isAuthenicated 为 False。

我们正在使用 Windows server 2008 和一个月前应用的更新。

我已经看到了与我的问题类似的文章，并且我已经尝试过，但这对我不起作用。

[具有相同问题但不起作用的类似文章](https://stackoverflow.com/questions/9281419/setting-up-persistent-forms-authentication-on-multiple-servers-and-subdomains "MS 安全公告 MS11-100")

有没有人遇到过这个问题？我认为它必须更多是服务器设置问题而不是代码，因为我能够让它在某些服务器而不是其他服务器上工作。是否有可能需要添加到这些服务器的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:49:55.760

**更新**

我发现了问题所在。我们需要将所有服务器完全更新到最新的服务包。微软一定改变了他们的解密算法，而且盒子上一定有不同的更新。

感谢 Microsoft 让每个人都了解这一变化......

# mysql - MySQL 按 SUM 后排序

> ID：11628551
> 
> 赞同：0
> 
> 时间：2012-07-24T10:05:50.963
> 
> 标签：mysql, sql, sum, sql-order-by

对于我遇到的问题，我已经解决了以下问题：

```
SELECT Event_id, SUM(Money) AS 'Total Money'
FROM prize
GROUP BY Event_id
ORDER BY 'Total Money' DESC; 
```

但是，它不按总金额排序。如果我省略“”标记并调用 Total_Money 列，它可以正常工作：

```
SELECT Event_id, SUM(Money) AS Total_Money
FROM prize
GROUP BY Event_id
ORDER BY Total_Money DESC 
```

为什么是这样？有没有办法调用 Total Money 列并按我想要的方式排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:12:23.107

当你写的时候，`SELECT Event_id, SUM(Money) AS Total Money`你给 Sum(Money) 起了一个别名 Total Money。
如果您将 Total Money 写在引号中，那么您将其视为错误的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:11:30.740

```
SELECT Event_id, SUM(Money) AS `Total Money`
FROM prize
GROUP BY Event_id
ORDER BY `Total Money` DESC; 
```

按“总金额”排序基本上是对 MySQL 的一些字符串进行排序。当您将任何内容放在引号中时，您将创建一个字符串。创建别名时，处理以某些保留字命名的列名（`user`例如） - 使用反引号：

```
`user` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:11:49.920

单引号定义了一个字符串值，因此按照您的顺序，您并不是说`order by this column`您在说`order by the string 'Total Money'`哪个当然不起作用。

如果您真的想使用空格，可以使用反引号而不是单引号，例如

```
ORDER BY `Total Money` 
```

# vim - 从另一个编辑器打开文件时 vim 的语法问题

> ID：11628561
> 
> 赞同：0
> 
> 时间：2012-07-24T10:06:10.377
> 
> 标签：vim, syntax, editor

我曾经用 Vim 编辑我的所有文件，但我从来没有遇到过问题。但是，昨天我从开发人员那里收回了一些工作并打开了他给我的文件。

我真的不知道为什么，但 Vim 只将其读取为一行：

```
<?php ^M $lesdatas=file_get_contents('datas.dat'); ^M $datas=explode('=>',$lesdatas);
foreach ($datas as $data) { ^M // comment ^M $vals=explode('==',$data); 
```

等等等等...

看起来 vim 无法将 ^ M 解释为“Enter”。

如何将文件转换为正常读取？

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:19:21.027

看起来该文件以（传统）Apple Mac 格式编码，使用回车（CR，`^M`）作为行尾分隔符（Windows 使用 CR-LF `^M^J`，Unix LF `^J`）。尝试打开文件

```
:edit ++ff=mac filename 
```

如果您需要经常打开此类文件，请调整您的`'fileformats'`设置，如下所述`:help fileformats`。

# c# - 将 Rdl 与 SQL Server CE 一起使用？

> ID：11628562
> 
> 赞同：1
> 
> 时间：2012-07-24T10:06:11.393
> 
> 标签：c#, visual-studio-2010, sql-server-ce, rdl

我在谷歌搜索，但到目前为止我找不到任何可靠的结果，我是否可以在 vs2010 中将 rdl 与 SQL Server CE 版本一起使用？

我想也许你们对此有所了解！

干杯

# objective-c - Highlighted 和 Selected UIButton 的 State 有什么区别？

> ID：11628563
> 
> 赞同：58
> 
> 时间：2012-07-24T10:06:11.983
> 
> 标签：objective-c, uibutton

谁能告诉我 a 的 Highlighted 和 Selected 状态有什么区别`UIButton`？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2015-06-25T20:11:47.700

2012 年的答案并非不正确，但有些人可能会发现 UIControl 文档中的解释是……贫血。我个人认为[iOS 的 Collection View Programming Guide 中的](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/CreatingCellsandViews/CreatingCellsandViews.html#//apple_ref/doc/uid/TP40012334-CH7-SW8)解释更有帮助：

> 单元格的突出显示状态与其选定状态之间存在细微但重要的区别。突出显示状态是一种过渡状态，当用户的手指仍在触摸设备时，您可以使用它对单元格应用可见的突出显示。此状态`YES`仅在集合视图跟踪单元格上的触摸事件时设置。当触摸事件停止时，高亮状态返回值`NO`。相比之下，选择状态只有在一系列触摸事件结束后才会改变——特别是当这些触摸事件表明用户试图选择单元格时。
> 
> […剪断…]
> 
> ![在此处输入图像描述](../Images/52485cc816cae816f752a35fb0f99f25.png)

尽管此文档专门针对集合视图单元格，但其解释在 Cocoa Touch 框架中都适用。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-07-24T10:25:50.693

根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/c/tdef/UIControlState)：

***控件的突出显示状态**。当在跟踪过程中触摸进入和退出以及发生触摸事件时，控件将进入此状态。*

和

***控件的选定状态**。对于许多控件，此状态对行为或外观没有影响。但是其他子类可能会根据它们的* `selected` *状态有不同的外观。*

这是各州之间的纯粹差异。

# c# - 是否可以隐藏（不删除）PivotItem？

> ID：11628565
> 
> 赞同：6
> 
> 时间：2012-07-24T10:06:21.767
> 
> 标签：c#, wpf, windows-phone-7

我有一种情况，我正在展示一组`PivotItem`s 和（取决于情况）最喜欢的一个。

当包含我的收藏夹的列表为空时，我需要能够隐藏这个枢轴 - 但是当有东西时它需要显示出来。

现在，我*可以*删除它，但是这种情况呢：

1.  转到枢轴视图（没有最喜欢的枢轴，因为列表是空的）
2.  转到剩余`PivotItem`的其中一个并选择一个项目。
3.  在自己的视图中选择该项目作为收藏夹
4.  点击后退按钮，然后返回枢轴视图。

现在将没有收藏夹-pivot，这还不够好。

我尝试使用 Visibility="hidden" 将其删除，但 VS 抱怨数据上下文未正确指定（确实如此。）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:11:59.700

为什么不在`PivotItem`代码中动态添加和删除响应用户事件？用户添加收藏夹 -> 创建并添加 Pivot 项目。用户删除他最后最喜欢的项目 -> 删除 Pivot 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:33:17.970

我想您将在该枢轴项目中有一个收藏夹列表，因此我的方法是将枢轴项目的可见性绑定到列表的 isEmpty 属性。

例如，视图将是

```
<PivotItem
  Visibility="{Binding IsNotEmpty,
  Converter={StaticResource VisibilityConverter}}"/> 
```

并在视图模型中

```
ICollectionView ItemsSource;
...
public bool IsNotEmpty(){     
    return !ItemsSource.IsEmpty;
} 
```

最后，转换器

```
public class BooleanToVisibilityConverter : IValueConverter {

public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    if(value == null)
        return Visibility.Collapsed;
    var isVisible = (bool)value;
    return isVisible ? Visibility.Visible : Visibility.Collapsed;
}
public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
{
    var visiblity = (Visibility)value;
    return visiblity == Visibility.Visible;
}} 
```

从[有用的转换器获得的转换器](http://compiledexperience.com/blog/posts/useful-calue-converters)

# android - 上下文菜单未关闭

> ID：11628572
> 
> 赞同：0
> 
> 时间：2012-07-24T10:06:40.103
> 
> 标签：android, menu, contextmenu

当用户在菜单窗口外单击时，我需要关闭上下文菜单。我该如何实施？在某些地方，我看到当用户在窗口外单击时，上下文菜单会关闭。或者有没有其他方法可以关闭上下文菜单。请帮助..thanks.my 代码在这里

```
selectedImageView = (ImageView) findViewById(R.id.selected_imageview);
    registerForContextMenu(selectedImageView);
}
    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo)
    {

        super.onCreateContextMenu(menu, v, menuInfo);
        menu.setHeaderTitle("Post Image");
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.contextmenu, menu);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item)
    {
      switch (item.getItemId())
      {
          case R.id.take_photo:
              Intent intent = new Intent(this, Mag.class);
              this.startActivity(intent);
              break;
          case R.id.choose_gallery:
              Intent intent2 = new Intent(this, Mag1.class);
              this.startActivity(intent2);
              break;

          case R.id.share_cancel:
              Intent intent3 = new Intent(this, Mag2.class);
              this.startActivity(intent3);
              break;
          default:
            return super.onContextItemSelected(item);
      }
      return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:12:39.263

无需为您的需要实现任何其他代码。

`menu window`当您在其块外单击时，Android 会自动关闭

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:13:24.607

试试这样

```
public static final int take_photo= Menu.FIRST;
public static final int choose_gallery= Menu.FIRST+1;
public static final int share_cancel= Menu.FIRST+2;

@Override
public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo) {     

    menu.add(0,take_photo, 0, "take_photo");

    menu.add(0, choose_gallery, 0, "choose_gallery");  

    menu.add(0, share_cancel, 0, "share_cancel");  
}
@Override
public boolean onContextItemSelected(MenuItem item) {        ;
    onOptionsItemSelected(item);
    return true;
}

  public boolean onOptionsItemSelected(MenuItem item) {

   switch (item.getItemId())
  {
      case R.id.take_photo:
          Intent intent = new Intent(this, Mag.class);
          this.startActivity(intent);
          break;
      case R.id.choose_gallery:
          Intent intent2 = new Intent(this, Mag1.class);
          this.startActivity(intent2);
          break;

      case R.id.share_cancel:
          Intent intent3 = new Intent(this, Mag2.class);
          this.startActivity(intent3);
          break;
      default:
        return super.onContextItemSelected(item);
  }
  return true;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:30:29.243

Android 在 pre-ics 版本上不提供此行为，因此必须编写额外的代码来完成此操作。

# android - 当用户单击退出时显示“评价我的应用程序”警报（在退出应用程序之前）

> ID：11628573
> 
> 赞同：0
> 
> 时间：2012-07-24T10:06:42.907
> 
> 标签：android

我已经实现了“评价我的应用程序”功能。但是我只想在用户单击按钮时才显示询问评分的警报`exit`。

AppRater 的代码来自[http://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater](http://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater)

退出按钮上的代码：

```
case R.id.exit:
        Log.i(DEBUG_TAG, "Exiting from application");
        AppRater.app_launched(this);   //Display alert for app rating
        Intent exitIntent = new Intent(Intent.ACTION_MAIN);
        exitIntent.addCategory(Intent.CATEGORY_HOME);
        exitIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(exitIntent);
        this.finish();
        break; 
```

现在使用此代码，它会在当前活动完成时显示警报一秒钟。

我只想在用户单击警报框中的任何按钮时完成当前活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:11:59.480

您可以为结果启动活动......而不是 startActivity() 方法，您可以使用 startActivityForResult()... 可能是这项工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:12:31.777

Instead of Calling this.finish() immediately after you show the dialog box.

Call the same after any of the button is selected in the DialogBox shown.

As you are calling this.finish() the context is lost immediately so closing the dialog as well.

If you do this you do not need to have the below code in your app.

```
 Intent exitIntent = new Intent(Intent.ACTION_MAIN);
    exitIntent.addCategory(Intent.CATEGORY_HOME);
    exitIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(exitIntent);
    this.finish(); 
```

# bash - 使用 sed 解析开始和结束日期

> ID：11628575
> 
> 赞同：2
> 
> 时间：2012-07-24T10:06:52.607
> 
> 标签：bash, parsing, sed

请有人可以让我知道我将如何解决这个问题：

```
part1-part2-part3-2012-07-23-2012-07-23.csv 
```

进入这个：

```
part1-part2-part3.csv 
```

是对另一个字符串的`part1-part2-part3`替换，因此不应被视为常量。

我相信`sed`这可能是完成这项工作的最佳工具，虽然我可以及时解决这个问题，但我的工作时间很紧。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:12:27.643

```
$ echo 'part1-part2-part3-2012-07-23-2012-07-23.csv' |  \
  sed -re 's/^(.*)(-[0-9]+){6}(.*)$/\1\3/'
part1-part2-part3.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:11:47.993

```
$ echo part1-part2-part3-2012-07-23-2012-07-23.csv |
> awk -F '-' '{ print $1"-"$2"-"$3".csv" }'
part1-part2-part3.csv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:41:10.733

`cut`比`sed`在这种情况下更简单：

```
fname=part1-part2-part3-2012-07-23-2012-07-23.csv
new_fname="$(echo $fname | cut -d- -f1-3).csv" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:51:00.133

**输入.txt**

```
part1-part2-part3-2012-07-23-2012-07-23.csv 
```

**代码**

> $> sed 's/[0-9][0-9]//g' Input.txt | sed 's/---*//g'

**输出**

```
part1-part2-part3.csv 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T10:57:30.680

[http://www.gnu.org/software/gawk/manual/html_node/Field-Separators.html](http://www.gnu.org/software/gawk/manual/html_node/Field-Separators.html)

```
echo part1-part2-part3-2012-07-23-2012-07-23.csv | \
awk -v FS='-2012-07[^.]*' '{print $1 $2}' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T10:11:51.577

这个`sed`命令完成了这项工作。它匹配一个日期并将其用作第二个匹配的第 1 组，因为它们是相同的。

```
sed -e 's/\(-[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}\)\1\(\.csv\)$/\2/' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-24T10:12:08.047

```
$ echo part1-part2-part3-2012-07-23-2012-07-23.csv | sed 's/-[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]-[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]//'
part1-part2-part3.csv 
```

此外，如果您知道需要删除从 -2012 到行尾的所有字符，则可以更简单地执行此操作：

```
$ echo part1-part2-part3-2012-07-23-2012-07-23.csv | sed 's/-2012.*/.csv/' 
```

# java - 从部署在 glassfish 服务器中的应用程序调用 web 服务时出现 ArrayIndexOutOfBoundsException

> ID：11628576
> 
> 赞同：2
> 
> 时间：2012-07-24T10:06:52.490
> 
> 标签：java, web-services, glassfish, axis2

我是这个网站的新手。在听到我的朋友说这个网站实际上会帮助我在技术上成长后，现在才订阅。

我报告了以下问题：

我的应用程序是这样开发的，它必须命中 5 个外部服务（Web 服务调用）进行处理。这些服务是使用axis2 存根调用的。

我的应用程序作为企业应用程序部署在 glassfish 应用程序服务器 2.1 版中。

处理进行得很好，但某些请求的 web 服务请求失败（即）失败，每 1000 个请求有 20 个请求失败，并出现以下错误。

在axis2 trace中发现的错误日志如下：

```
2012-04-19 15:42:10,328 DEBUG org.apache.axiom.om.util.StAXUtils - XMLStreamReader is com.sun.xml.stream.XMLReaderImpl
2012-04-19 15:42:10,326 DEBUG org.apache.axis2.description.ParameterIncludeImpl - ==================
2012-04-19 15:42:10,328 DEBUG org.apache.axis2.description.ParameterIncludeImpl -  Parameter add on object org.apache.axis2.description.ParameterIncludeImpl@3ee78dcc
2012-04-19 15:42:10,328 DEBUG org.apache.axis2.description.ParameterIncludeImpl -   Key =enableMTOM
2012-04-19 15:42:10,328 DEBUG org.apache.axis2.description.ParameterIncludeImpl -   Value =false
2012-04-19 15:42:10,328 DEBUG org.apache.axis2.description.ParameterIncludeImpl -   Value Class = java.lang.String
2012-04-19 15:42:10,328 DEBUG org.apache.axis2.description.ParameterIncludeImpl -   Value Classloader = null
2012-04-19 15:42:10,328 ERROR webServiceRequestConnector - Exception >>> webServiceRequestConnector.postRequest() >>> Interface Request >>> 3652467 >>> Exception Message is >>> 
java.lang.ArrayIndexOutOfBoundsException: -1
    at com.sun.xml.stream.xerces.util.NamespaceSupport.popContext(NamespaceSupport.java:223)
    at com.sun.xml.stream.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:359)
    at com.sun.xml.stream.XMLReaderImpl.setInputSource(XMLReaderImpl.java:207)
    at com.sun.xml.stream.ZephyrParserFactory.getXMLStreamReaderImpl(ZephyrParserFactory.java:291)
    at com.sun.xml.stream.ZephyrParserFactory.createXMLStreamReader(ZephyrParserFactory.java:173)
    at com.sun.xml.stream.ZephyrParserFactory.createXMLStreamReader(ZephyrParserFactory.java:156)
    at org.apache.axiom.om.util.StAXUtils$2.run(StAXUtils.java:137)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.axiom.om.util.StAXUtils.createXMLStreamReader(StAXUtils.java:133)
    at org.apache.axis2.util.XMLUtils.toOM(XMLUtils.java:596)
    at org.apache.axis2.util.XMLUtils.toOM(XMLUtils.java:581)
    at org.apache.axis2.deployment.DescriptionBuilder.buildOM(DescriptionBuilder.java:97)
    at org.apache.axis2.deployment.AxisConfigBuilder.populateConfig(AxisConfigBuilder.java:86)
    at org.apache.axis2.deployment.DeploymentEngine.populateAxisConfiguration(DeploymentEngine.java:641)
    at org.apache.axis2.deployment.FileSystemConfigurator.getAxisConfiguration(FileSystemConfigurator.java:116)
    at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:68)
    at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContextFromFileSystem(ConfigurationContextFactory.java:184)
    at org.apache.axis2.client.ServiceClient.configureServiceClient(ServiceClient.java:150)
    at org.apache.axis2.client.ServiceClient.<init>(ServiceClient.java:143)
    at QueryScoreStub.<init>(QueryScoreStub.java:91)
    at QueryScoreStub.<init>(QueryScoreStub.java:77)
    at QueryScoreStub.<init>(QueryScoreStub.java:125)
    at QueryScoreStub.<init>(QueryScoreStub.java:117)
    at webServiceRequestConnector.handleService(webServiceRequestConnector.java:1014)
    at webServiceRequestConnector.postRequest(webServiceRequestConnector.java:173)
    at FinalInterface.receiveResponse(FinalInterface.java:76)
    at ExtConnectionManager.processRequest(ExtConnectionManager.java:88)
    at ExtConnectionManager.processRequest(ExtConnectionManager.java:112)
    at InterfaceWorkflowExecutor.call(InterfaceWorkflowExecutor.java:242)
    at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:178)
    at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1061)
    at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Thread.java:595) 
```

不知道为什么仅对某些请求就失败了。

从互联网上阅读了以下内容：

1.  Glassfish 有一个名为 webservice-rt.jar 的 jar，它在调用 web 服务时使用它。
2.  此错误在 popContext() 方法内的 NamespaceSupport 类中引发。
3.  此外，此错误可能是由于尝试 popContext 而不首先调用 pushContext 方法。

除了上述之外，找不到其他帮助。

谁能帮我解决一下到底是什么问题？

此外，在 5 项服务中，不仅仅是一项服务失败。有时 2 个服务失败，有时 1 个服务失败，有时 3 个服务失败。

因此，我怀疑问题出在外部服务上。:( :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:17:19.507

此问题可能与[AXIOM-74](https://issues.apache.org/jira/browse/AXIOM-74)有关。将 Woodstox 打包到您的应用程序中，它可能会消失。

# javascript - 允许用户第二次尝试获得正确答案

> ID：11628578
> 
> 赞同：2
> 
> 时间：2012-07-24T10:06:58.677
> 
> 标签：javascript, jquery, jquery-ui

在我的拖放拼写游戏中，我设计了它，因此当将正确的字母拖到相应的单词上时，会应用一种样式（wordglow2），使其消失并显示背后的图片 - 这是游戏的目标。问题是，当用户输入错误的单词时，他/她没有第二次尝试该单词，因此它停留在网格中，这意味着游戏无法完成。将样式应用于错误的单词（wordglow）后，我需要再次尝试它，有人可以帮忙吗？

```
$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));
    console.log($(event));
    console.log($(ui.draggable).text());

    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    if ($(this).text() == $(ui.draggable).text().trim()) {

        $(this).addClass('wordglow3');
    } else {
        $(this).addClass('wordglow');
    }
    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass("wordglow2");

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow4");

        }
    }

},

activate: function(event, ui) {
    word = $(this).data('word');

    // try to remove the class
    $('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3');
}

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:18:43.697

目前您只需填写一个数组以检查单词是否正确。但这还不够。假设我想解决“top”，但我很懒，以“p”开头，因为我的鼠标指针靠近这个特定的字母。然后数组将由单个字母组成，`['p']`并且该单词不再可解。

而是检查您当前正在处理*哪个*字母，将字母保存在正确的位置并使用一个固定为 3 而不是`Array.push`.

但是，如果您不希望用户能够提供错误的订单，您可以简单地删除旧的猜测（请参阅 参考资料[`splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)）：

```
if (guesses[word].length == 3) {
    if (guesses[word].join('') == word) {
        $('td[data-word=' + word + ']').addClass("wordglow2");

    } else {
        $('td[data-word=' + word + ']').addClass("wordglow4");
        guesses[word].splice(0,guesses[word].length);
    }
} 
```

# installation - 在 Gentoo 上取消屏蔽 gitolite 版本 3

> ID：11628583
> 
> 赞同：1
> 
> 时间：2012-07-24T10:07:16.597
> 
> 标签：installation, gitolite, gentoo

我尝试安装 gitolite v2，但由于可怕的奇怪错误/错误而无法设置它。现在我想在 Gentoo 上试用 gitolite v3。我已经添加了这一行

```
/etc/portage/package.unmask: =dev-vcs/gitolite-3* 
```

因为它与

```
/usr/portage/profiles/package.mask. 
```

但是当我输入：

```
emerge -s gitolite or emerge -p gitolite 
```

我找不到版本 3，只有版本 2。我做错了什么？如何正确取消屏蔽此包？我应该更改 /usr/portage/profiles/package.mask 吗？

**解决方案：** 我的同事帮助了我。

```
echo '>=dev-vcs/gitolite-3.03 ~x86' >> /etc/portage/package.keywords 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:29:00.907

我发现取消屏蔽特定 ebuild 的最简单、最方便的方法是让emerge 为我进行取消屏蔽：

```
sudo emerge =dev-vcs/gitolite-3.2 --autounmask-write 
```

如果您尝试直接出现，这会生成与推荐的相同行（“需要进行以下*关键字更改*”），但需要为您将它们添加到 packages.keywords 的额外步骤。

既然您说您“尝试安装 gitolite v2，但由于可怕的奇怪错误/错误而无法设置它”，您可能还想查看`=dev-vcs/gitolite-gentoo-2.3.1`，因为这似乎是专门为 Gentoo 创建的 gitolite 的一个分支.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:56:03.307

我真的建议*不要*在这里使用包。

只需克隆 GitHub Gitolite 存储库（默认情况下，在 'g3' 或 GitoliteV3 中显示`master`），并将其安装在本地的任何路径中（通常，`$HOME/bin`作为`$HOME`专用 gitolite 管理员帐户的主目录）

您可以在此处找到自动化安装过程的脚本：[`install_or_update_gitolite.sh`](https://github.com/VonC/compileEverything/blob/master/gitolite/install_or_update_gitolite.sh).

# java - JDK 7 WatchService API 和 NFS 文件共享

> ID：11628584
> 
> 赞同：6
> 
> 时间：2012-07-24T10:07:23.197
> 
> 标签：java, filesystems, java-io, nfs, filesystemwatcher

我们正在使用`[WatchService][1]`API (JDK 7) 来跟踪在我的系统中创建的文件。到目前为止，它工作正常。我的程序跟踪在我的系统上创建的每个文件。

但是我们在使用NFS的时候就遇到了麻烦（我们跟踪的目录实际上存在于局域网中的另一台计算机上）。

`WatchService`不起作用。

谁能告诉我如何解决这种情况？如何设置 NFS 以支持 Java 7 `WatchService`API，或者谁能告诉我一个更好的库。

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:44:09.217

您可以将代码与OpenJDK 中的[Polling Watcher](http://adnotacja.blogspot.com/2012/12/powiadamiacz-zgodny-z-jdk-7-ale-na.html)混合使用（波兰语文本）

[来源](http://code.ohloh.net/file?fid=cQxrK5Q5FYttalAQTwrjYEJnYVI&cid=WNlXb5_YXCo&s=&browser=Default#L0)

# c# - 实体框架 - 如何为实体类创建基类？

> ID：11628587
> 
> 赞同：1
> 
> 时间：2012-07-24T10:07:48.863
> 
> 标签：c#, entity-framework

我有三个结构相同的表。我正在使用实体框架。我想创建只接受这三种类类型的通用函数。但我不能在类型参数中提供一种以上的类型。有什么办法吗？或者我只想添加基类，如何创建基类，因为它们是从实体生成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T10:16:47.833

最简单的方法可能是不使用基类，而是使用接口。假设公共属性是`string Name`，那么您可以

```
interface IEntityWithName
{
    string Name { get; set; }
}

// make sure this is in the same namespace and has the same name as the generated class
partial class YourEntity1 : IEntityWithName
{
}

// ditto
partial class YourEntity2 : IEntityWithName
{
}

public void DoSomething<T>(T entity)
    // if you have no common base class
    where entity : class, IEntityWithName
    // or if you do have a common base class
    where entity : EntityObject, IEntityWithName
{
    MessageBox.Show(entity.Name);
} 
```

究竟什么是可能的取决于你的实体类是如何生成的，以及你想在你的过程中做什么。如果您无法弄清楚如何使其适应您的情况，您能否提供有关您正在尝试做什么的更多信息？

# javascript - 用js生成动态站点地图？

> ID：11628588
> 
> 赞同：1
> 
> 时间：2012-07-24T10:07:58.470
> 
> 标签：javascript, jquery, json, seo, sitemap

我有一个小站点，它有一些动态的选项卡式内容，这些内容是通过 AJAX 请求从 JSON 文件加载并用于填充 DOM，选项卡本身和它们包含的内容都是从这个 JSON 动态生成的。这一切都与 History.js 联系在一起，因此每个选项卡都可以通过 url 加入书签和索引：?state=whatever。

我现在正在寻找一个 sitemap.xml 以提交给 Google，其中包含相关选项卡的所有 URL。

但是，该站点没有服务器端处理，它是在 S3 存储桶中提供的所有静态内容。

我正在寻找是否有一种方法，使用纯字体端技术从用于填充各种选项卡的同一 JSON 文件生成站点地图。

有什么想法或建议吗？

谢谢，

罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:20:17.667

要让机器人使用您的 sitemap.xml，它必须是存在于您服务器上的实际文件。

要创建文件，您将需要一种服务器端语言来动态创建它。这可以是 PHP、ColdFusion、.NET 或任何你喜欢的。

这是我要做的：

将您的 JSON 对象（在站点中保存您的链接）发布到 AJAX 请求，发送到服务器端脚本，该脚本将获取此数据，然后生成一个名为 sitemap.xml 的文件。

这有帮助吗？对不起，如果我误解了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:10:16.117

不，没有，检索站点地图的机器人不会运行 javascript。

# java - 无法远程连接到 JMX？

> ID：11628595
> 
> 赞同：62
> 
> 时间：2012-07-24T10:08:26.617
> 
> 标签：java, jmx

由于某些奇怪的原因，我无法使用 JMX 连接`VisualVM`或连接`jconsole`到 JMX。

用于启动要监控的VM的参数：

`-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=1100`

我检查了一下，我可以从本地和远程远程登录到这个端口。

尽管如此，VisualVM 或 jconsole 还是无法连接，在花费了相当长的时间尝试连接之后。

```
REMOTE MACHINE with JMX (debian)
java version "1.6.0_33"
Java(TM) SE Runtime Environment (build 1.6.0_33-b03-424-11M3720)
Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03-424, mixed mode)

MY WORKSTATION (OS X)
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-08-16T13:46:33.357

添加`-Djava.rmi.server.hostname = host ip`. 即使我面临同样的问题，这也成功了。

加上这个`-Djava.rmi.server.hostname = host ip`会强制 RMI 服务使用主机 ip 而不是 127.0.0.1

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-02-10T20:20:26.980

这些是对我有用的步骤（通过 VPN 从我的本地 Mac 访问服务器端防火墙后的 Debian）：

1.  检查服务器公共 ip

    `ifconfig`

2.  使用 JVM 参数：

```
 -Dcom.sun.management.jmxremote
    -Dcom.sun.management.jmxremote.port=[jmx port]
    -Dcom.sun.management.jmxremote.local.only=false
    -Dcom.sun.management.jmxremote.authenticate=false
    -Dcom.sun.management.jmxremote.ssl=false
    -Djava.rmi.server.hostname=[server ip from step 1] 
```

3.  运行应用程序

4.  查找正在运行的java进程的进程ID

5.  检查 JMX/RMI 使用的所有端口

    `netstat -lp | grep [pid from step 4]`

6.  在防火墙上打开步骤 5 中的所有端口

瞧。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-24T10:20:46.380

除了侦听您指定的端口 (1100)，JMX 服务器还侦听随机选择的（临时）端口。检查，例如，`lsof -i|grep java`如果您在 linux/osx 上，java 进程侦听哪些端口，并确保您的防火墙也为临时端口打开。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-07-25T17:09:45.623

我遇到了永远显示“正在添加”并且似乎无法连接的问题。我通过更改 jvisualvm 代理设置（工具->选项->网络）解决了这个问题。将选项更改为无代理后，我就可以连接了。我的 jvm 使用以下选项启动：

```
-Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.port=2222 
-Dcom.sun.management.jmxremote.authenticate=false 
-Dcom.sun.management.jmxremote.ssl=false 
-Djava.rmi.server.hostname=<external_IP_of_server> 
```

然后当我添加 jmx 连接时，我指定了“external_IP_of_server:2222”

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-04-05T16:23:10.783

使用端口转发时我遇到了类似的问题。我有一台带有 Tomcat 的远程机器，在`localhost:9000`.

在我的本地机器上，我习惯于使用以下方式进行端口转发：

```
ssh -L 9001:localhost:9000 tomcat.example.com 
```

（所以远程端口 9000 被转发到我本地机器的端口 9001）。

然后当我尝试使用 VisualVM 连接时`localhost:9001`，连接被拒绝。JMX 似乎要求双方的端口号相同。

所以我的解决方案是使用端口号 9000 和 9000：

```
 ssh -L 9000:localhost:9000 tomcat.example.com 
```

现在我本地机器的 VisualVM 通过 . 成功连接到远程机器的 Tomcat `localhost:9000`。

确保您没有任何其他服务（开发机器上的 Tomcat？）在同一端口上侦听。

还要看看[正确设置参数](https://stackoverflow.com/a/32418821/923560)。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-04-05T11:27:44.400

我对上述答案的两分钱..

我看到大多数答案只提到了主机名，但没有提到端口。如果我们没有指定端口，那么服务器将动态分配 RMI 端口。如果两台服务器都在同一子网中或没有防火墙问题，则不会有任何问题。如果有任何问题，我们可以添加下面的 JVM 参数来冻结。

```
-Dcom.sun.management.jmxremote.rmi.port 
```

前任：

```
<option name="-Dcom.sun.management.jmxremote.rmi.port" value="11001"/> 
```

确保 RMI 和 JMX 端口应该相同。更多，[请点击这里](https://docs.oracle.com/javase/9/management/monitoring-and-management-using-jmx-technology.htm#JSMGM-GUID-F08985BB-629A-4FBF-A0CB-8762DF7590E0)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-02-25T20:57:25.760

因为我刚加入，所以我不能赞成 Hett 的回答，但它使我免于又一周的反复试验！

这是一个工作 Dockerfile 的示例：

```
FROM store/oracle/serverjre:8 

RUN mkdir -p /opt/app

ENV APP_PATH /opt/app

WORKDIR $APP_PATH   

COPY . $APP_PATH

CMD ["java", \
     "-Dcom.sun.management.jmxremote", \
     "-Dcom.sun.management.jmxremote.port=9010", \
     "-Dcom.sun.management.jmxremote.rmi.port=9010", \
     "-Dcom.sun.management.jmxremote.authenticate=false", \
     "-Dcom.sun.management.jmxremote.ssl=false", \
     "-Djava.rmi.server.hostname=12.345.67.89", \
     "-jar", \
     "app-service-0.0.1-SNAPSHOT.jar"]

EXPOSE 9010 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-09-20T07:46:35.617

如果您运行`jar`文件（通过 -jar 选项），则必须在选项之前指定所有其他 jvm`-jar`选项！

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-04-28T10:29:07.103

我发现了问题，我的 rmi 服务在主机 ip 上运行，它是“127.0.0.1”。要远程连接到 jvm，我必须将外部 ip 绑定到主机名。要在 unix 系统中执行此操作，请使用命令`hostname`获取主机名的名称。然后检查分配给主机名的 ip，要找出这个用途`ping $(hostname)`，您会看到系统正在 ping 主机名的 ip。如果您的主机 IP 是默认的“127.0.0.1”并且您想更改它，只需以超级用户身份编辑文件 /etc/hosts。重新启动 rmi 服务后，您可以从远程计算机访问它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-27T16:12:08.117

如果您的机器没有错误的 IP，请查看 /etc/hosts 示例：127.0.0.1 localhost 127.0.0.2 your_machine 185.12.58.2 your_machine（您机器的好 IP）

JMX 取 IP 127.0.0.2 而忘记另一个

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-17T15:40:51.587

感谢@Arpit Agarwal，以下内容对我有用。添加了这个对我有用的附加 jvm 参数。

```
 -Djava.rmi.server.hostname=192.168.1.16 
```

对我有用的完整列表。

```
 -Dcom.sun.management.jmxremote 
 -Dcom.sun.management.jmxremote.port=21845
 -Dcom.sun.management.jmxremote.ssl=false 
 -Dcom.sun.management.jmxremote.authenticate=false
 -Dcom.sun.management.jmxremote.local.only=false 
 -Djava.rmi.server.hostname=192.168.1.16
 -Dcom.sun.management.jmxremote.rmi.port=10099 
```

# css - 将阴影应用到包装器每一侧的最佳方法

> ID：11628597
> 
> 赞同：0
> 
> 时间：2012-07-24T10:08:31.760
> 
> 标签：css, border, shadow

我想这是一个非常典型的设计，有一个全屏背景图像，以及一个居中的白色背景内容包装器。这个白色包装纸的左右边缘有一个几个像素宽的整齐阴影。类似于[这个网站](http://www.santandersalt.co.uk/)。

实现这一目标的最佳方法是什么？背景图像（如果是这样，在什么以及如何？）或边框，其他什么？任何帮助表示赞赏。

编辑：我需要在 IE7 上支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:11:31.593

您可以使用 CSS3`box-shadow`属性执行此操作。

```
#wrapper {
   box-shadow: 0 0 10px #000;
   border:1px solid #000;
} 
```

所有现代浏览器都支持此功能，但如果您需要支持 IE < 9，则需要使用图像或外部库，例如[PIE](http://css3pie.com/)。

有关浏览器兼容性的更多信息：http: [//caniuse.com/#search=box-shadow](http://caniuse.com/#search=box-shadow)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:34:15.613

为了支持回到 IE7，我建议使用图像。您的图像将放置在顶部/中心对齐的身体标签上，并在 Y 轴上重复。图像本身的高度将是一个像素，并且与您的设计一样宽。任何精通 Photoshop 的人都可以为您创建这个。

# excel - 如何在excel中汇总一列大小时：分钟：秒数？

> ID：11628598
> 
> 赞同：1
> 
> 时间：2012-07-24T10:08:35.750
> 
> 标签：excel

使用 MS Excel 2010。

一列小时，分钟，秒，例如

```
12345:34:34
12345:34:34
12345:34:34 
```

总计为

```
00000:00:00 
```

单元格的格式设置为 [h]:mm:ss

有人可以建议一种获得正确答案的方法吗？我试过 =a1+a2+a3 以及 =sum(a1:a3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:15:32.520

`12345:34:34`不是有效时间，[因为它超过 9999:59:59](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx)。

如果您确实想添加这些时间，我认为您需要手动完成。例如看[这篇文章](https://stackoverflow.com/questions/6943906/timespan-in-excel-above-24-hours)。

在您的情况下，您可以使用十进制值：`12345:34:34 = 12345 + 34/60 + 34/3600`小时。然后添加并转换回字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:55:00.960

您也可以尝试此公式并将结果格式化为 [h]:mm:ss ...

```
=SUMPRODUCT(LEFT(A1:A3,FIND(":",A1:A3)-1)/24+REPLACE(A1:A3,1,FIND(":",A1:A3)-1,0)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T19:48:49.433

您使用 AutoSum 创建的公式很好。

您需要做的就是对其结果应用适当的格式：

选择包含总计的单元格 从“格式”菜单中，选择“单元格”命令 从“类别”列表中，选择“自定义” 在“类型”框中，输入格式 h:mm（注意使用方括号）。如果要显示总秒数，请输入单击确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-19T19:56:01.413

仅 SUM(a1:a3) 然后使用自定义格式 [h]:mm:ss 格式化单元格要简单得多您不必创建毛茸茸的公式或任何东西。

# c# - 从 USB 端口读取数据

> ID：11628601
> 
> 赞同：0
> 
> 时间：2012-07-24T10:08:44.393
> 
> 标签：c#

我想使用热电偶读取房间的温度并对其进行监控。我想用 C# 编写我的程序。谁能帮我？（我更喜欢使用测量工作室和 DAQmx）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T10:28:29.170

你试过什么？

作为起点，有一些库可以帮助您：

*   [SharpUSBLib](http://www.icsharpcode.net/opensource/sharpusblib/)
*   [LibUsbDotNet](http://libusbdotnet.sourceforge.net/V2/Index.html)

在 stackoverflow 中，您还可以找到一些有趣的问题，例如：

*   [`Working with USB devices in .NET`](https://stackoverflow.com/questions/68749/working-with-usb-devices-in-net)
*   [`USB device`](https://stackoverflow.com/questions/552330/usb-device?rq=1).

# xcode - 管理 xcode 工作区

> ID：11628602
> 
> 赞同：2
> 
> 时间：2012-07-24T10:08:47.507
> 
> 标签：xcode, workspace

我有几个使用相同类的 iphone 应用程序。这些应用程序运行良好，但是当我想更改应用程序中的某些内容时遇到问题，假设我想为我的所有应用程序添加一项新功能。为此，我需要在所有项目中进行相同的更改。所以我想创建一个主应用程序，其中将包含应用程序的所有公共资源。每个应用程序都会从​​主应用程序中获取资源，如果它有额外的东西，还会添加更多资源。我可以在这里使用工作区概念吗？我对工作空间或工作空间中的依赖管理了解不多。有人可以在这件事上帮助我吗？请。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:29:23.157

工作区只是组合在一起的一个或多个项目。人们解决您描述的这类问题的一种方法是创建一个框架或库项目，其中包含您想要在项目之间共享的所有代码。然后，您可以在构建各种应用程序的项目中包含此框架或库。您可能会发现将所有内容放在一个工作区中更容易，或者您可能并不取决于您的应用程序的复杂程度和您的工作风格。选项如下所示：

**一切都在一起工作区**

*   共享库 A 项目

*   共享框架 B 项目

*   应用 C 项目

*   应用 D 项目

*   ...

    或者

**应用 C 工作区**

*   共享库 A 项目
*   共享框架 B 项目
*   应用 C 项目

**应用 D 工作区**

*   共享库 A 项目
*   共享框架 B 项目
*   应用 D 项目

将所有内容放在一起的主要缺点是它可能会导致很多项目，而您在任何时候都只关心其中的几个。在这种情况下，您可以通过选择 Xcode 工具栏左上角的项目来选择要构建的特定应用程序。

将应用程序分离到单独的工作区的主要缺点是项目一次只能在一个工作区中打开。因此，如果您想同时对 App C 和 App D 进行更改，如果同时打开两个工作区，则会出现错误，因为共享库 A 和共享框架 B 只能同时打开一个。

将事物拆分为逻辑相关的项目确实为您带来了很大的灵活性。另一方面，您必须在每个单独的项目中进行顶级配置更改而付出代价。您可以使用 xcconfig 文件将所有项目的通用配置参数存储在一个位置来解决此问题。[Rob Napier 在他关于Using Xcconfig](http://robnapier.net/build-system-1-build-panel)的博客中描述了如何做到这一点。

# xcode - 仅在我的 iphone 应用上使用 sharekit 进行 Twitter 身份验证

> ID：11628604
> 
> 赞同：1
> 
> 时间：2012-07-24T10:08:54.853
> 
> 标签：xcode, twitter, sharekit

我正在尝试在我的应用程序上实现 sharekit twitter 身份验证。

我已经在我的应用程序上安装了 sharekit。这是我在“登录页面”上的当前代码

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSURL *url = [NSURL URLWithString:@"http://www.test.com"];
    SHKItem *item = [SHKItem URL:url title:@"A title"];

}

-(IBAction)SignInTwitter:(id)sender{

    [SHKTwitter shareItem:item];

} 
```

这样，在点击 SignInTwitter 后，它会将我重定向到 twitter 登录表单，然后在成功登录后，它会将我返回到我的应用程序的登录页面。

我很确定这不是正确的方法，有没有不使用 shareItem 方法的方法？

我想要的是当用户点击 SignInTwitter 时，它会让用户登录到他/她的 Twitter 帐户，如果成功，它将把用户重定向到应用程序的主页，而不是返回登录页面。

另外，是否可以获取已登录帐户的 Twitter 用户名？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T17:45:31.453

如果您计划在 iOS5+ 上部署，您可能会使用原生 Accounts 框架并从那里获得您想要的东西——这样您就根本不需要 ShareKit。去年的 WWDC 视频中有关于此的大量信息。

如果出于某种原因您需要 ShareKit：

*   授权：

`[[[SHKTwitter alloc] init] authorize];`

*   用户名：参见[ShareKit 2.0](https://github.com/ShareKit/ShareKit)中的[常见问题解答](https://github.com/ShareKit/ShareKit/wiki/FAQ)。它是使用 SHKShareTypeUserInfo 完成的。

# javascript - 用 jquery 正则表达式自动替换

> ID：11628607
> 
> 赞同：0
> 
> 时间：2012-07-24T10:09:21.033
> 
> 标签：javascript, jquery, regex

我有 $("#text") 并且我想这样做，以便当您在 $("text") 中键入单词“替换我”时，它会自动替换为短语“替换成功”和“再见” '你好'

我假设这样做的正确方法是用正则表达式找到“替换”并替换它，这就是我所得到的

> ```
>  $('#text').keydown(function(){
>                 var text = $('#text').text();
>                 var replaceCommand = ['replace me', 'goodbye'];
>                 var replaceOutput = ['replaced successfully', 'hello'];
>                     for (var i=0; i < replaceCommand.length; i++){
>                         text.replace(replaceCommand[i]/i, replaceOutput[i]);
>                     }
>             }); 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:25:22.720

如果您的 replaceCommand 数组包含已定义的字符串，则无需使用正则表达式。使用 .replace() 代替。

[演示](http://jsfiddle.net/K6xFA/)

```
var replaceCommand = ['replace me', 'goodbye'];
var replaceOutput = ['replaced successfully', 'hello'];

$('#text').keyup(function(){
    var text = $('#text').val();
    for (var i=0; i < replaceCommand.length; i++){
        text = text.replace(replaceCommand[i],replaceOutput[i]);
    }
    $('#text').val(text);
});​ 
```

更新 1：我希望你 $('#text') 是一个文本框。所以你需要使用 $('#text').val() 来获取值。.replace() 也将返回替换的字符串。因此，您需要再次将其分配给文本框值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:21:52.993

改为使用`blur`文本框。下面的代码不使用正则表达式，但如果下面的代码有帮助，请告诉我：

```
 $('#text').blur(function(){ 
var text = $('#text').text(); 
var replaceCommand = ['replace me', 'goodbye']; 
var replaceOutput = ['replaced successfully', 'hello'];     
if($(this).val() == replaceCommand [0]){
$(this).val(replaceOutput[0]) ;
    }
else if($(this).val() == replaceCommand [1]){
$(this).val(replaceOutput[1]) ;
    }

}); 
```

工作[JSFIDDLE](http://jsfiddle.net/rutwik/6emJw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:22:10.323

你会尝试这样的事情：

```
$('#text').bind("keydown blur", function(){
                var jText = $(this);
                var newTxt = jText.val().replace(/replace(?!\s*successfully)/gi, "replace successfully");
                jText.val(newTxt);
            }); 
```

[例子](http://jsfiddle.net/VAJwa/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:17:02.427

这是一种很好的方法，但不确定我是否会使用 keydown ，因为它会在每次按键时触发。但是，如果您必须在输入单词 replace 的最后一个字符后立即拥有它，那么 key down 就是那个（或 key up）。

但是，如果通过鼠标粘贴，它不会触发。因此，您还需要捕获鼠标事件。

如果框中的值是您所需要的，那么 onchange 就可以解决问题，但在您失去焦点之前不会触发（不同的浏览器会有不同的行为）。

# c# - 访问 ashx 文件中的视图状态

> ID：11628612
> 
> 赞同：3
> 
> 时间：2012-07-24T10:09:46.887
> 
> 标签：c#, asp.net

我正在做一个项目，我有 ashx 处理程序文件，我想`ViewState`在我的 ashx 文件中创建一些数据，然后在 .cs 文件中检查它

我怎么能做到这一点，因为我无法访问`ViewState`我的 ashx 文件中的对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:11:59.030

不，您无法访问 Ashx 文件中的页面数据，因为它会在页面请求发生时处理并执行。

您可以使用 Session boject 代替 viewstate

```
public class Handler : IHttpHandler, System.Web.SessionState.IRequiresSessionState
  {
      public void ProcessRequest(HttpContext context)
     {
           context.Session["sessionvariable"] = "value";
     }
  } 
```

或者只是只读访问会话对象

```
public class Handler : IHttpHandler, IReadOnlySessionState
{
   public bool IsReusable { get { return true; } }

   public void ProcessRequest(HttpContext ctx)
   {
       ctx.Response.Write(ctx.Session["fred"]);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:12:31.650

`ViewState`特定于页面并包含在页面客户端的隐藏元素中。

我会建议`Session`or`Cache`对象作为更好的解决方案

# java - 将使用 SOAP 从（C# .net）Web 服务接收的对象转换为 Android 中的字符串数组

> ID：11628613
> 
> 赞同：0
> 
> 时间：2012-07-24T10:09:53.977
> 
> 标签：java, android, web-services, object, ksoap2

我正在尝试使用 kSOAP2 将字符串数组从 Web 服务发送到 android 应用程序。使用 kSOAP2，我在 android 端收到对象格式的响应。现在我想将此对象转换为字符串数组格式，以便我可以将此数组直接传递给 GridView。

我的Web服务方法如下：

```
[WebMethod]
public string[] getit(string status)
{
   string[] result;
   if (status == "blue")
      result = new string[] { "One", "Two", "Three", "Four" };
   else
      result = new string[] { "five", "six", "Seven", "Eight" };
   return result;
} 
```

我的安卓代码如下：

```
public void call(String status)
{
   try {    
       SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

       request.addProperty("status",status.toString());

       SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
       envelope.dotNet=true;
       envelope.setOutputSoapObject(request);

       HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
       androidHttpTransport.call(SOAP_ACTION, envelope);

       Object result = (Object)envelope.getResponse();

       array1=(String []) result;   //This statement does not work
   } 
} 
```

在 android 代码中，array1 是全局声明的字符串数组。字符串数组1[]; 我想将 Object 结果转换为 array1 String 数组。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:30:36.910

现在我想不出一个很好的例子。您应该检查返回的对象。但我猜它是一个内部有属性的 SoapObject

```
SoapObject result = (SoapObject)envelope.getResponse(); 
```

那么我想如果你打电话

```
String s = (String)result.getProperty(0); 
```

您将获得返回数组的第一个元素。

当然，您应该进行必要的错误处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:30:41.220

首先使用 result.toString().... 打印“结果”对象并查看它返回的内容，然后它不会直接转换为 string[] 首先它应该转换为 Object[] 数组...和一个一个它将转换为 string[] 数组......所以你的代码应该像......

对象[] objArr=(对象[])结果；

字符串[] strArr=新字符串[objArr.length];

for(int i=0;i<=objArr.length;i++)

{

```
 strArr[i]=objArr[i].toString(); 
```

}

这就是你可以做到的......

# entity-framework - 使用上下文和编译查询的实体框架

> ID：11628617
> 
> 赞同：0
> 
> 时间：2012-07-24T10:10:25.350
> 
> 标签：entity-framework, linq-to-entities

我有一个 winform 应用程序并使用 EF 4.2。我读到在 EF 4.2 中，linq to entity-queries 是自动编译的。调用查询时，我执行以下操作：

```
 using (BVSEntities bvsContext = new BVSEntities(ConnectionString))
        {
            var person = (from sender in bvsContext.T_Absender
                          where sender.Absender_ID == id
                          select sender).First<T_Absender>();
            return person;
        } 
```

问题：1）这个查询是自动编译的吗？2）如果它是自动编译的。编译后的查询是否因为 bvsContext 在使用后被释放而被重用？3）如果没有，我怎样才能重用它但不会遇到任何并发问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:19:14.377

> 这个查询是自动编译的吗？

不，因为 EF 4.2 不包括自动编译的查询。原以为 EF 4.2 将包含它们，但之后 EF 的命名约定发生了变化。自动编译查询是 .NET 4.5 的一部分。EF 4.2 只是带有一些修复的 EF 4.1。

> 编译后的查询是否因为 bvsContext 在使用后被释放而被重用？

.NET 4.5 包含用于自动编译查询的内部缓存以重用它们。

# magento - Magmi 图片没有出现

> ID：11628618
> 
> 赞同：8
> 
> 时间：2012-07-24T10:10:29.540
> 
> 标签：magento, magmi

我正在使用 Magmi 导入产品，但无法显示图像，我已经解决了其他问题，但没有运气。

当我上传时，我没有收到任何未找到图像的错误，并且看起来它出现在后端，因为它说悬停以查看图像，但是当我将鼠标悬停在它上面时，就像那里没有图像一样消失。

我`media/import`在 Magmi 的“读取本地图像”中有这个我假设这是 public_html/media/import？

我在那里有图像，在我的 csv 列中有`image-name.jpg`

以前有没有人遇到过这个问题并找到了解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:02:41.667

那是我如何使用它的示例。我注意到我需要上传差异尺寸才能将它们放入产品中。

sku,图片,small_image,thumbnail,media_gallery,store,websites 4101078,/4101078-marquise-ring.jpg,/4101078-marquise-ring-s.jpg,/4101078-marquise-ring-t.jpg,/4101078-marquise -ring-2.jpg;/4101078-marquise-ring-3.jpg;/4101078-marquise-ring-4.jpg,,

对我来说完美，

尝试从 Cashe 菜单导入后重新生成图像

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:04:05.353

文件路径在 Linux 中区分大小写。不要忘记在您的 csv 中放入正确的案例。

就像提到的 blakcaps 一样，image、small_image 和 thumbnail 的值应始终以斜杠开头。比如说，如果你的图片的路径是“public_html/media/import/myfolder/Abc.jpg”，它在你的 csv 文件中应该是这样的。

```
 sku, image, small_image, thumbnail 
   sku_abc, /myfolder/Abc.jpg, /myfolder/Abc.jpg, /myfolder/Abc.jpg 
```

并记住授予您的网络服务器对“媒体”文件夹的读/写权限。

# android - API 级别 < 11 中的 ObjectAnimator

> ID：11628623
> 
> 赞同：28
> 
> 时间：2012-07-24T10:10:47.260
> 
> 标签：android, android-compatibility

所以我对 android 感到非常沮丧，而且当你将 API 级别回滚到 11 之后，一半的东西都不起作用。为什么它不像 iOS 那样容易和做得好？！

**我** 用来`ObjectAnimators`为`Fragments`. 它们在任何 API 级别 11 及以上的环境中都能正常工作。`propertyName`一旦我将构建目标更改为小于 11，我就会遇到问题，说它`valueType`在 xml 文件中找不到属性的资源标识符。

**问题** 我应该使用什么来制作`Fragment`适用于 API Levels > 7 的过渡动画。

提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-17T11:28:22.810

我建议使用[http://nineoldandroids.com/](http://nineoldandroids.com/)，它来自 ActionBarSherlock 项目的同一制造商，它引入了从 API 1 开始工作的支持 ObjectAnimator。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:34:01.723

[`Property Animation`](http://developer.android.com/guide/topics/graphics/prop-animation.html) **在 Android 3.0（API 级别 11）中引入**

支持较低的android版本，（我没试过，但你可以使用）

[九个旧机器人](https://github.com/JakeWharton/NineOldAndroids/) [下载](https://github.com/JakeWharton/NineOldAndroids/archive/master.zip)

Android 库，用于在所有版本的平台上使用 Honeycomb (Android 3.0) 动画 API 回到 1.0!。

另请参阅此博客[Fragment Transactions Reference](http://daniel-codes.blogspot.in/2012_06_01_archive.html)

这个 SO question [Android Fragment standard transition not animating](https://stackoverflow.com/questions/7718111/android-fragment-standard-transition-not-animating)

# c# - Monitor.Pulse() 没有效果

> ID：11628625
> 
> 赞同：0
> 
> 时间：2012-07-24T10:10:55.713
> 
> 标签：c#, multithreading, monitor

这是我的代码片段。我想，一个线程应该工作而不必等到前一个线程完成。但我认识到所有线程都是串联开始的，我的脉冲调用对它们的工作方式没有影响。

```
class A
{
    string path = "file.xml";
    static public object _lock = new object();
    static private int accessCounter = 0;

    public List<T> GetItems()
    {
        List<T> result = null;
        lock (_lock)
        {

            while (accessCounter < 0)
                Monitor.Wait(_lock);
            accessCounter++;
            Thread.Sleep(1000);

            Monitor.Pulse(_lock);
            Thread.Sleep(1000);

            using (Stream stream = File.OpenRead(path))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(List<T>), new Type[] { typeof(T) });
                result = (List<T>)serializer.Deserialize(stream);
            }
            accessCounter--;
            Monitor.Pulse(_lock);
        }
        return result;
    }
    public void AddItem(T item)
    {
      lock(_lock){if (accessCounter!=0) Monitor.Wait(_lock);
      accessCounter = -1;
      //some writing ooperations
      accessCounter = 0;
       }
    }
} 
```

我知道*if*条件在当前情况下是无用的，因为它总是*true*。更重要的是，它们应该同时工作，但不能。

编辑：此代码从不同的线程以下列方式调用：

```
.....
A a = new A();
var list = a.GetItems();
..... 
```

它应该是某种写/读块。因此，如果线程想要读取并且其他线程已经在读取文件，那么它不必等待其他线程。现在，如果其他线程捕获 *_lock*，则所有读取线程都需要挂起

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:10:47.720

该框架已经提供了一个锁定机制（实际上是两个），它应该做你想做的事情（即允许许多同时阅读者，但写入是排他的（同时没有其他阅读者*或*作者）——ReaderWriterLock 和 ReaderWriterLockSlim。

您的代码可以修改为以下内容以利用 ReaderWriterLockSlim：

```
class A
{
    private readonly ReaderWriterLockSlim _lock = new ReaderWriterLockSlim();
    string path = "file.xml";
    static public object _lock = new object();
    static private int accessCounter = 0;

    public List<T> GetItems()
    {
        _lock.EnterReadLock();
        try
        {
            using (Stream stream = File.OpenRead(path))
            {
                var serializer = new XmlSerializer(typeof(List<T>), new[] { typeof(T) });
                return (List<T>)serializer.Deserialize(stream);
            }
        }
        finally
        {
            _lock.ExitReadLock();
        }
    }

    public void AddItem(T item)
    {
        _lock.EnterWriteLock();
        try
        {
            // Some writing operations
        }
        finally
        {
            _lock.ExitWriteLock();
        }
    }
} 
```

还值得注意的是，这种方法会泄漏内存，因为您`XmlSerializer`每次都使用`XmlSerializer(Type)`or以外的构造函数创建一个新的`XmlSerializer(Type, String)`。这将导致每次都构建和加载一个新的 XML 序列化程序集，并且这些程序集永远不会被释放。您要么需要切换到使用提到的两个构造函数之一，要么缓存`XmlSerializer`实例（可能由 键控`typeof(T)`），这样就不会泄漏内存。

有关详细信息，请参阅此处的“动态生成的程序集”部分：[XmlSerializer 文档](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer%28v=vs.100%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:15:33.673

您的访问计数器检查错误。它应该检查大于，而不是小于。

```
while (accessCounter > 0)
    Monitor.Wait(_lock); 
```

但是，您的代码似乎有点奇怪。访问计数器检查发生在一个关键线程内，锁定在 上`_lock`，因此无论如何都不可能有超过 1 个线程执行此代码。这就是您的代码没有同时执行的原因。

另外，请注意[Monitor.Wait](http://msdn.microsoft.com/en-us/library/ateab679.aspx) **释放**当前线程持有的锁 - 它不会等待锁变为空闲。

# .net - IIS 托管 -> 非托管 -> 托管 -> StackOverflowException

> ID：11628627
> 
> 赞同：4
> 
> 时间：2012-07-24T10:11:06.227
> 
> 标签：.net, iis, pinvoke, stack-overflow, unmanaged

我会尽可能详细地描述我的问题，但如果需要更详细的解释，请告诉我。

为了简化，假设我有 3 个 DLL（实际上我有更多，但我猜这不是很重要）：

1.  `managed-1.dll`- 托管 DLL（用 C# .NET 4.0 编写） - 处理请求并在某些请求期间调用第二个 DLL 中的非托管代码

2.  `unmanaged.dll`- 非托管 DLL（用老式 VC++ 6.0 编写） - 执行多个操作，有时调用第三个 DLL

3.  `managed-2.dll`- 托管 DLL（用 CLI/C++ .NET 3.5 编写） - 我的问题的根源

我在 3 种不同的场景中运行我的代码：

1.  我`managed-1.dll`从控制台应用程序调用 - 一切正常

2.  我打电话`managed-1.dll`给`ASP.NET Development Server`- 一切都很好

3.  我打电话`managed-1.dll`来自`IIS`- 一切正常，直到`managed-1.dll -> unmanaged.dll -> managed-2.dll`涉及整个序列。

在场景 3 中抛出 StackOverflowException。调试器显示不涉及递归。同样很明显，异常发生在以下类型的调用堆栈中：

*   `managed-1.dll::CallUnmanagedCode()`
*   `unmanaged.dll::SomeMethod1()`
*   `unmanaged.dll::SomeMethod2()`
*   `unmanaged.dll::CallManagedCode()`
*   `managed-2.dll::CallUnmanagedCode()` **！！标有`__declspec(dllexport)`并且不使用任何托管类型！**
*   `managed-2.dll::FailingMethod()` **！！使用托管类型；一开始（甚至第一行代码都没有执行）发生异常！**

一件更有趣的事情：调试器显示的参数值`FailingMethod`与方法调用点中的值不同。

如果有人有任何线索，请指教。

**解决方案：**问题与托管-非托管无关，而是与[IIS 堆栈大小](http://blogs.msdn.com/b/tom/archive/2008/03/31/stack-sizes-in-iis-affects-asp-net.aspx)有关。对我来说，使用[editbin](http://msdn.microsoft.com/en-us/library/xd3shwhf%28v=vs.100%29.aspx)工具是不可接受的解决方案。所以我的解决方案 - 在调用之前创建新线程`unmanaged.dll`并将堆栈设置为 1 MB：

```
var result = unchecked ((int)0x800000FF);
var thread = new Thread(() => { result = pinvoke_func(); }, 1024 * 1024); // 1MB
thread.Start();
thread.Join(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:42:54.263

普通 Windows 应用程序的堆栈大小显然是 1MB，但对于 IIS，它是 256KB（参见[http://support.microsoft.com/kb/932909](http://support.microsoft.com/kb/932909)）。这也许可以解释为什么应用程序在控制台应用程序中运行而不是在 IIS 中运行。

我不确切知道 ASP.NET 开发服务器的堆栈大小是多少，但它可能是 1MB，有关更多信息，请参阅这个 SO 问题：[stackoverflowexception-in-iis7-but-not-in-cassini](https://stackoverflow.com/questions/4013037/stackoverflowexception-in-iis7-but-not-in-cassini)

显然，可以使用 editbin 增加 IIS 的堆栈大小。
有关说明，请参阅本文：[IIS 中的堆栈大小 - 影响 ASP.NET](https://web.archive.org/web/20160316195628/http://blogs.msdn.com/b/tom/archive/2008/03/31/stack-sizes-in-iis-affects-asp-net.aspx)

# eclipse - Subclipse，比较分支上的更改（逐个文件）

> ID：11628628
> 
> 赞同：1
> 
> 时间：2012-07-24T10:11:10.240
> 
> 标签：eclipse, svn, subclipse

在 Eclipse 中，如果我使用 CompareWith 将我的分支与主干进行比较，它只会显示已添加或删除的文件。查看单个文件的实际更改的唯一方法是单独选择它们。

是否有另一种方法可以显示整个项目中的所有单个更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:11:00.120

你用的是最新版本吗？1.8.14？这听起来像是某种错误，但是当我这样做时它对我有用。更新日志中有很多比较错误。

![显示与分支/标签比较的屏幕截图](../Images/4c32ef7de1f638f0fe09fd2d11977fab.png)

# java - 未找到贝宝沙盒集成 API 凭据

> ID：11628631
> 
> 赞同：1
> 
> 时间：2012-07-24T10:11:32.613
> 
> 标签：java, paypal, integration, paypal-sandbox

我正在尝试将贝宝沙箱与我的 Web 应用程序集成。

为此，根据我在`https://developer.paypal.com/`. 之后，我还创建了一个测试帐户 - 那是一个商业帐户。我通过在下面提到的屏幕中选择卖家单选按钮创建了该帐户。

![测试帐户用户创建屏幕](../Images/0cf2119b819e1287ef48cccd10564807.png)

现在当我点击我的`Test Accounts`链接时，我可以在那里找到一个商业测试帐户，如下图所示。

![显示业务用户测试帐户](../Images/288e6d2d17c663547beb114a8e55d94d.png)

之后，当我试图通过单击链接获取 API 凭据时`API and Payment Card Credentials`，它会说`my test account do not have credentials and create a business Test Account to get the credentials`。见下图。

![显示帐户没有 API 凭据的错误](../Images/68ce22d0c36da14703482c86746be482.png)

实际上我已经创建了一个商业测试帐户。那为什么没有获得 API 凭据。谁能帮我解决这个问题。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:42:39.307

我有同样的问题，终于解决了。创建卖家账户时，您必须在第二个屏幕截图中单击“预配置”，否则任何创建的账户都不会有 API 详细信息。

# msmq - 如何通过 MessageQueue 发送客户自定义类型

> ID：11628633
> 
> 赞同：0
> 
> 时间：2012-07-24T10:11:36.990
> 
> 标签：msmq, user-defined-types

鉴于此事件

```
 public class DummyEvent : EventDTO{
    public CustomUUID Cid { get; set; }
    public DateTime Date { get; set; }
    public Guid Id { get; set; }
} 
```

我通过 MSMQ 发送消息：

```
 var de = new DummyEvent {
                               Date = DateTime.UtcNow, 
                               Id = Guid.NewGuid(), 
                               Cid = Guid.NewGuid()
                           };
 var mq = new MessageQueue(AppSettings.EventQueue);                            
 mq.Formatter = new XmlMessageFormatter(new[]{de.GetType()});
 mq.Send(de);
 var e = reciever.Receive().Body; 
```

Date 是*System.DateTime*所以它可以反序列**化**。
Id 是*System.Guid*，所以它可以反序列**化**。
Cid 是*CustomUUID*，它是用户定义的类型，**不会被反序列**化。

我还需要发送客户定义的类型，但网上信息很少。

**编辑**：它实际上没有被序列化，所以问题在于发送消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:35:36.430

这是示例

```
using System;
using System.Messaging;

namespace MsmqSample
{
    internal class Program
    {
        private static MessageQueue _queue;
        private static readonly BinaryMessageFormatter _formatter = new BinaryMessageFormatter();

        private static void Main(string[] args)
        {
            const string queueName = @".\private$\TaskQueue";
            if (!MessageQueue.Exists(queueName))
            {
                MessageQueue.Create(queueName, true);
            }
            _queue = new MessageQueue(queueName);
            _queue.Purge();
            AddMessage();
            Console.ReadKey();
        }

        private static void AddMessage()
        {
            using (var transaction = new MessageQueueTransaction())
            {
                try
                {
                    transaction.Begin();
                    var externalMessage = new ExternalMessage {Data = "Test Data"};
                    _queue.Send(new Message(externalMessage, _formatter), transaction);
                    transaction.Commit();
                }
                catch (Exception)
                {
                    transaction.Abort();
                }
            }
        }
    }

    [Serializable]
    public class ExternalMessage
    {
        public string Data;

        public ExternalMessage()
        {
            Content = new MessageContent {Guid = Guid.NewGuid()};
        }

        public MessageContent Content { get; set; }
    }

    [Serializable]
    public class MessageContent
    {
        public Guid Guid { get; set; }
    }
} 
```

# css - 如何使用 CSS 在 div 内的文本之前和之后创建一行

> ID：11628634
> 
> 赞同：0
> 
> 时间：2012-07-24T10:11:38.583
> 
> 标签：css

我有一个 div 内的文本跨度。在那个跨度的前面，我想要一条 2 px 的线到左边的边缘。在文本之后，我想要一条模拟线转到父元素的右边缘。

**当前标记：**

```
<div style="width: 400px;">
    <span class="label" style="padding-left: 40px;">This is my text</span>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**预期结果：**

```
----- This is my text -------------------------- 
```

**我的问题的最佳解决方案是什么？**

我试图在文本后面的行中使用额外的跨度。没能把它弄好。它是基于[让跨度填充剩余宽度？](https://stackoverflow.com/questions/3499314/let-span-fill-remaining-width). 我的尝试可以在[这里找到](http://jsfiddle.net/yDLuK/1/)

**更新：**

父 div 具有渐变颜色作为背景和高度。文本上的背景颜色不能使用 AFAIK。

```
<div style="
    background-image: none;
    background-color: #99D166;
    background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #C0E3A1), color-stop(3%, #A6D77A), color-stop(100%, #8CCB52));
    background-image: -webkit-linear-gradient(top, #C0E3A1, #A6D77A 3%, #8CCB52);
    background-image: linear-gradient(top, #C0E3A1, #A6D77A 3%, #8CCB52);
    width: 400px;
    height: 40px;"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-10T09:35:25.567

HTML

```
<span class="label">You're Text Message</span> 
```

CSS

```
span.label:after{content:"------------";padding-right:15px;letter-spacing:-1px;color:#3399ff;}
span.label:before{content:"------------";padding-left:15px;letter-spacing:-1px;color:#3399ff;} 
```

示例：http: [//jsfiddle.net/2qLptucL/1/](http://jsfiddle.net/2qLptucL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:17:29.080

你可以这样写：

**CSS**

```
.label {
    margin-left: 40px;
    display:inline-block;
    height: 20px;
    background:#fff;
}

.parent {
    border-bottom:2px solid red;
    width: 400px;
    height:9px;
} 
```

检查这个[http://jsfiddle.net/yDLuK/3/](http://jsfiddle.net/yDLuK/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:23:54.780

您的 Fiddle 几乎可以做到这一点，您只需要将一个元素放在另一个元素之上（如果您想在纯 CSS 中执行此操作）。另一种选择是将 line 元素分成两个 - 一个用于文本之前，一个用于文本之后。

虽然您可以使用负边距将其向上移动到行的顶部，但将文本和行元素包含在容器元素中可能是有意义的，[就像这样](http://jsfiddle.net/2FuDK/)，并在容器上使用相对定位并在文本和行上使用绝对定位在容器元素中。

HTML：

```
<div id="container">
    <span class="line"></span>
    <span class="label">This is my text</span>
</div>​ 
```

CSS：

```
#container {
width: 400px;
position: relative;
}

.label {
    position: absolute;
    left: 40px;
    top: 0px;
    padding: 0 6px 0 6px;
    height: 20px;
    background-color: #fff;
}

.line {
    position: absolute;
    left: 0;
    top: 0.5em;
    height: 2px;
    width: 100%;
    background-color: red;
    display: block;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:45:08.990

Take a look at this:

[http://jsfiddle.net/WVzNf/](http://jsfiddle.net/WVzNf/)

I reworked Shailender Arora's idea, to use border dashed instead.

Another method might be to remove the border and use a background image instead. That way you can have full control over its appearance.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T10:18:01.793

您可以通过 positiong 以及：-

**CSS**

```
.label {
    background: white;
    float: left;
    height: 20px;
    margin-left: 30px;
    position: relative;
    top: -8px;
}

.line {
    height: 2px;
    background-color: red;
    display: block;
    margin-top: 9px;
    margin-bottom: 9px;
} 
```

**HTML**

```
<div style="width: 400px;">
    <span class="label">This is my text</span>
    <span class="line"></span>
</div> 
```

[http://jsfiddle.net/yDLuK/6/](http://jsfiddle.net/yDLuK/6/)

# python - 我无法获取 HTML 页面的完整源代码

> ID：11628636
> 
> 赞同：2
> 
> 时间：2012-07-24T10:11:43.320
> 
> 标签：python, web-crawler

使用 Python，我想在来源很大的网页上抓取数据（它是某个用户的 Facebook 页面）。

假设 URL 是我要抓取的 URL。我运行以下代码：

```
import urllib2

usock = urllib2.urlopen(url)
data = usock.read()
usock.close() 
```

数据应该包含我正在抓取的页面的来源，但由于某种原因，当我直接与页面的来源进行比较时，它不包含所有可用的字符。我不知道我做错了什么。我知道我要抓取的页面最近没有更新，所以这不是因为我丢失了一些最近的数据。

有人有线索吗？

编辑：我缺少的信息是这样的：

```
<code class="hidden_elem" id="up82eq_33"><!-- <div class="mbs profileInfoSection"><div class="uiHeader uiHeaderTopAndBottomBorder uiHeaderSection infoSectionHeader"><div class="clearfix uiHeaderTop"><div><h4 tabindex="0" class="uiHeaderTitle">Basic Information</h4></div></div></div><div class="phs"><table class="uiInfoTable mtm profileInfoTable uiInfoTableFixed"><tbody><tr><th class="label">Networks</th><td class="data"><div class="uiCollapsedList uiCollapsedListHidden" id="up82eq_32"><span class="visible">XXXX</span></div></td></tr></tbody></table></div></div> --></code> 
```

基本上是一些我感兴趣的领域。让我吃惊的是我可以得到*一些*领域，但不是全部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:21:53.323

Facebook 主要面向 Javascript。您在浏览器中看到的页面源是任何 JS 代码运行后的 DOM *（*并且页面源无论如何都会经常更改）。您可能必须使浏览器自动化（使用 Selenium），或尝试其他工具，例如 mechanize... 或查看合适的 FB 应用程序并使用 FB API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:20:23.070

这个页面可能会执行一些 javascript 并且 javascript 会生成一些内容。
试试[斜纹布](http://twill.idyll.org/)。
它基于[Mechanize](http://wwwsearch.sourceforge.net/mechanize/)，但执行 javascript。
Python中的示例：

```
from twill.commands import *
go("http://google.com/")
fv("f", "q", "test")
submit("btnG")
info() #shows page info
show() #shows html 
```

另一种选择是在 Node.js上使用[Zombie.js 。](http://zombie.labnotes.org/)
这个库比斜纹更好，它是无浏览器的解决方案。
Coffeescript 中的示例：

```
zombie = require "zombie"
browser = new zombie()
browser.visit "https://www.google.ru/", =>
    browser.fill "q", "node.js"
    browser.pressButton "Поиск в Google", ->
        for item in browser.queryAll "h3.r a"
            console.log item.innerHTML 
```

# c# - 如何以编程方式向表单中的所有控件添加工具提示 - WPF，C#？

> ID：11628644
> 
> 赞同：0
> 
> 时间：2012-07-24T10:11:58.733
> 
> 标签：c#, wpf, tooltip

![在此处输入图像描述](../Images/784905acec1c49ac6baed36a8ca50b69.png)

我有一个 WPF 表单，其中包含不同类型的控件，如文本框、文本块、组合框、按钮等。我需要使用 C# 为每个控件动态添加工具提示，以便它们可以显示以下信息：

1.  X 和 Y 位置
2.  选项卡索引。

我为每个控件执行如下代码（现在为文本框的代码）：

```
 foreach (Control ctrl in grd.Children)
        {
            if (ctrl.GetType().ToString() == "System.Controls.TextBox")
            {
                tbox = ctrl as TextBox;
                Point p = Mouse.GetPosition(tbox);
                tbox.ToolTip =p.X + " " + p.Y + " \n " + tbox.TabIndex ;
            }
        } 
```

但这不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T10:19:41.163

首先，您的类型检查简直是邪恶的。

```
 if (ctrl.GetType().ToString() == "System.Controls.TextBox") 
```

将其更改为

```
 if (ctrl is TextBox) 
```

甚至更好

```
var textbox = ctrl as TextBox;
if(textbox != null) 
```

请注意，在 wpf 中，TextBox 位于`System.Windows.Controls`命名空间中。

如果您想拥有其他容器、模板任何分组控件，那么您的循环只会检查 Visual Tree 中的第一级，然后您必须遍历树。请参阅[this](https://stackoverflow.com/questions/636383/wpf-ways-to-find-controls)了解如何操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:19:15.273

```
try with this code

var controls = grd.Children.OfType<TextBox>();

foreach(var control in controls)
{
   Point point = Mouse.GetPosition(control);
   control.ToolTip = point.X + " " + point.Y + " \n " + control.TabIndex ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:23:23.877

您的类型检查错误（命名空间！）。尝试这个：

```
foreach (var ctrl in grd.Children)
        {
            if (ctrl is TextBox)
            {
                tbox = ctrl as TextBox;
                Point p = Mouse.GetPosition(tbox);
                tbox.ToolTip =p.X + " " + p.Y + " \n " + tbox.TabIndex ;
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:19:20.913

假设你做 MVVM。

那么你可能有一个 ViewModel 类。在该类中，您可以为每个控件定义一个动态字符串，就在您定义控件的位置。

在 XAML 中，您只需定义工具提示，例如

```
<Button Content="Submit">
    <Button.ToolTip>
        <ToolTip>
            <StackPanel>
                <TextBlock FontWeight="Bold">Submit Request</TextBlock>
                <TextBlock>Submits the request to the server.</TextBlock>
            </StackPanel>
        </ToolTip>
    </Button.ToolTip>
</Button> 
```

Textblock 文本可以在您的 ViewModel 中传递，Binding 会将它们发送到您的 View。

我想您的 ViewModel 也知道您的控件在哪个选项卡上。

有关工具提示的更多信息，请参阅 WPFTutorials 站点[WPF 工具提示控件教程](http://wpftutorial.net/ToolTip.html)

有关 MVVM 的更多信息，这里有一个快速教程：[MSDN on MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

# modx - ModX TV 参数不显示在片段中

> ID：11628645
> 
> 赞同：0
> 
> 时间：2012-07-24T10:12:00.087
> 
> 标签：modx, modx-evolution

我创建了一个代表 DropDownList 菜单的 TV 参数。但是当我通过 Modx API 在片段中调用它时，它根本不显示。

这是我制作的电视![在此处输入图像描述](../Images/9e72f194f8dca65d86e62810d3ce5477.png)

这是我的称呼

```
$name=$buf['title'].' ( цвет: '.$modx->documentObject['material'].' )'; 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:02:50.660

TV 不是 documentObject 的一部分；我对 Evo 有点生疏，但您需要改用[$modx->getTemplateVar()](http://wiki.modxcms.com/index.php/API%3agetTemplateVar)：

```
$material = $modx->getTemplateVar('material', "", $modx->documentIdentifier);
$name = $buf['title'] . ' ( цвет: ' . $material . ' )'; 
```

# java - 如何在 J2ME 中使用手机信号塔查找用户位置？

> ID：11628648
> 
> 赞同：3
> 
> 时间：2012-07-24T10:12:06.067
> 
> 标签：java, mobile, java-me

我只想在 j2me 中使用手机信号塔查找位置名称。

另外，如何将来电重定向到我们自己的应用程序，从那里向用户显示来电号码，就像正常的呼叫信息一样？

[截至目前，当有人打电话给某人时，会显示手机号码，]

我想用他/她的手机号码向来电者显示来电者的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T11:10:32.397

此小区信息由小区信号塔作为 CBS（小区广播服务）消息进行广播，并由大多数服务提供商在某个预定义频道（通常为 050）上连接到该信号塔的所有 GSM 手机接收。因此，我们的 Java ME 应用程序可以使用 Push Registry 监听此 CBS 频道并捕获此信息。

按照步骤，

1.  导入库

    ```
    import javax.wireless.messaging.*;
    import javax.microedition.io.PushRegistry; 
    ```

2.  注册您的 Midlet 以侦听 CBS 端口 50 并设置消息侦听器

    ```
    public void setupListening()
    {        
        try{
        PushRegistry.registerConnection("cbs://:50",this.getClass().getName(),"*");
        }catch(Exception e){}
        String[] connList;
        connList = PushRegistry.listConnections(true);
    if((connList == null) || (connList.length == 0))
    {
      // You can exit the app, if you want
    }
    else 
        { 
        try{
        msgconn = (MessageConnection)Connector.open("cbs://:50");
            msgconn.setMessageListener(this);
        } catch( IOException e){ e.printStackTrace();}
         }
    } 
    ```

3.  检索 CBS 消息有效负载。

    ```
    public void notifyIncomingMessage(MessageConnection conn)
    {
      try{
            txtmsg =(TextMessage)msgconn.receive();
         }catch(Exception e){System.out.println(e);}
         from = txtmsg.getAddress());
         Msg = txtmsg.getPayloadText();
        // Display from & Msg            
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:50:32.600

> 我只想在 j2me 中使用手机信号塔查找位置名称。

当设备不处于 3G 模式时，@Lucifer 的方法会在某些网络上向您显示您自己当前的 Cell ID 信息。

> 另外，如何将来电重定向到我们自己的应用程序，从那里向用户显示来电号码，就像正常的呼叫信息一样？
> 
> [截至目前，当有人打电话给某人时，会显示手机号码，]

在 J2ME 中是不可能的。

> 我想用他/她的手机号码向来电者显示来电者的位置。

根本不可能！您的手机 ID 指的是您的位置，而不是呼叫者的位置。即使有一种将来电信息路由到 J2ME 应用程序的方法，您也只能显示国家信息（例如，以 +44 开头的号码肯定是英国），如果该号码是固定电话，则有些高级位置信息（例如，以+441234 开头的数字是英国贝德福德）。

* * *

# mysql - MySQL REGEX 一个单词中的一个部分单词

> ID：11628656
> 
> 赞同：0
> 
> 时间：2012-07-24T10:12:31.520
> 
> 标签：mysql, regex

我正在尝试用 MySQL 中的 REGEX 将一个单词与其他单词进行匹配，但我无法做到正确。

例如，搜索单词`foo`应匹配以下内容（不区分大小写）：

```
foobar
barfoo
foofoo
football
foo-bar
foo_bar 
```

并且不匹配它们之间的空格，例如：

```
foo bar 
```

我在网上搜索并找到了一些正则表达式，但它们与上述所有选项都不匹配。

这是我目前的模式：

```
REGEX '[[:<:]]'.$word.'(![:space:])[[:>:]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:20:56.287

我假设您在 . 之前或之后允许任何非空白字符`foo`。

然后你可以使用

```
'^[^[:space:]]*'.$word.'[^[:space:]]*$' 
```

转换为 PCRE 正则表达式，其中`\S`表示非空格字符并`\b`表示单词边界：

```
^\S*foo\S*$ 
```

所以这匹配包含`foo`但不包含任何空格的单词。

# php - How can I fix the #c3284d# malvertising hack on my website?

> ID：11628659
> 
> 赞同：2
> 
> 时间：2012-07-24T10:12:37.983
> 
> 标签：php, .htaccess, google-chrome, malware

For the past couple of weeks at semi regular intervals, [this](http://www.melfordschoolofmotoring.co.uk) website has had the **#c3284d#** malware code inserted into some of its .php files. Also the .htaccess file had its equivelant code inserted. I have, on many occasions removed the malicious code, replaced files, changed the ftp password on my ftp client (which is CoreFTP), changed the connection method to FTPS for more secure storage of the password (instead of plain text).

I have also scanned my computer several times using AVG and Windows Defender which have found no malware on my computer which might have been storing my ftp passwords.

I used [Sucuri SiteCheck](http://sitecheck.sucuri.net/results/www.melfordschoolofmotoring.co.uk) to check my website which says my website is clean of malware which is bizarre because I just attempted to click one of the links on the site a minute ago and it linked me to another one of these random stats.php sites, even though it appears I have gotten rid of the #c3284d# code again (which will no doubt be re-inserted somehow in an hour or so)..

Has anyone found an actual viable solution for this malware hack?

I have done just about all of the things suggested [here](http://www.gadgehit.com/2012/07/23/how-to-fix-c3284d-stats-php-malware-issues/?utm_source=rss&utm_medium=rss&utm_campaign=how-to-fix-c3284d-stats-php-malware-issues) and [here](http://stopmalvertising.com/malware-reports/the-c3284d-malware-network-stats.php.html) and the problem still persists.

Currently when I click on a link within the sites navigation menu within Google Chrome I get googles Malware warning page:

> Warning: Something's Not Right Here! oxsanasiberians.com contains malware. Your computer might catch a virus if you visit this site. Google has found that malicious software may be installed onto your computer if you proceed. If you've visited this site in the past or you trust this site, it's possible that it has just recently been compromised by a hacker. You should not proceed. Why not try again tomorrow or go somewhere else? We have already notified oxsanasiberians.com that we found malware on the site. For more about the problems found on oxsanasiberians.com, visit the Google Safe Browsing diagnostic page.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:31:15.113

我有完全相同的问题。

我猜该网站是通过小部件感染的，因为我使用了一个允许执行 PHP 代码的插件。

我最好的解决方案是：

> ```
> -eliminate the suspicious widget;
> -see the time and date of one infected file(my case: header.php); 
> -clear all infected files(in my case I have a backup of the site); 
> -search into log file for suspicious IPs at that time (search finded IPs on blacklists); 
> -install one plugin to ban suspicious IPs. 
> ```

从那一刻起，问题就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:06:08.440

> 我使用 Sucuri SiteCheck 检查了我的网站，上面说我的网站没有恶意软件，这很奇怪，因为我一分钟前刚刚尝试单击该网站上的一个链接，它把我链接到另一个随机 stats.php 网站，即使看起来我再次摆脱了#c3284d#代码（毫无疑问，它会在一小时左右以某种方式重新插入）..

1.  你点击重新扫描了吗？因为该站点将结果缓存 24 小时。

2.  您是否清除了网站的缓存？例如，如果您使用 Super Cache 插件或其他东西。

3.  当您通过您的CPanel更改FTP密码时，您是否尝试过一天左右没有登录？这将验证问题是否基于 FTP 密码。我最近在清除此感染后尝试通过 Filezilla 登录我的 FTP，然后我立即删除了之后的网站条目。第二天我的网站又被感染了。所以我决定从现在开始通过 cPanel 做所有事情。

# javascript - How to handle js functions when we use markup-based DOM-ready execution

> ID：11628662
> 
> 赞同：1
> 
> 时间：2012-07-24T10:12:44.570
> 
> 标签：javascript, json, unobtrusive-javascript

Sorry for the long read, but it would be nice if you can share your thoughts anyway. :)

So.. the technique is described in Paul Irish's blogpost here - [http://paulirish.com/2009/markup-based-unobtrusive-comprehensive-dom-ready-execution](http://paulirish.com/2009/markup-based-unobtrusive-comprehensive-dom-ready-execution) and then extended by Jason Garber here - [http://viget.com/inspire/extending-paul-irishs-comprehensive-dom-ready-execution](http://viget.com/inspire/extending-paul-irishs-comprehensive-dom-ready-execution) .

The main idea is to have a json object that would contain all of you code that is supposed to be executed when a particular page (controller and/or view) is loaded (on DOM-ready).

The object would look something like:

```
APP = {
  controller1 : {
    view10: function(){ ... },
    view11: function(){ ... }
  },
  controller2: {
    view20: function() {...},
    view21: function() {...}
  }
} 
```

Then you change your `<body>` into

```
<body data-controller="controller_name" data-action="view_name"> 
```

and then with some JS goodies when the DOM is ready there is an automatic call to `APP.controller_name.view_name()`.

This is super awesome because you can put all of your to-be-executed-on-DOM-ready scripts on one place and these scripts are executed without additional code.

**And now to the actual question:** What to do with the other JS functions for a particular controller or view/page that are not supposed to be executed when the DOM is ready but when an event occur (e.g. onclick="someFunction()"?

It would be really nice if these functions are within the appropriate `APP.controller_name` namespace because that would help maintain the code. And with that said, I'm currently changing my APP object into something like:

```
APP = {
  controller1 : {
    view10: function(){ ... },
    view11: function(){ ... },
    extraStuff10: function: () {...},
    extraStuff11: function: () {...}
  },
  controller2: {
    view20: function() {...},
    view21: function() {...},
    extraStuff20: function: () {...}
  }
} 
```

And this is all good - `APP.controller1.view10()` is executed automatically and you can call `APP.controller1.extraStuff10()` when you need it afterwards. But there one *serious* drawback for that structure - view10() and extraStuff10() have absolutely identical structure so you can't tell whether extraStuff10() is a function that is waiting to be executed when an event occur OR if there is an actual view/page that is called extraStuff and the content of that function will be executed when the page is loaded.

I'm thinking of changing the function view10() into an object that contains init() function (and we'll place the script-for-DOM-ready inside) like that:

```
APP = {
  controller1 : {
    view10: {
      init(): function(){ ... }
    },
    extraFunction10: function: () {...}
  }
} 
```

This will give clear separation of the DOM-ready functions and the other functions but I'm wondering if that is the best way to accomplish that stuff... Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:24:28.790

这是一个很好的模式，但我建议将事情分开一点，因为一个文件规则所有的方法很快就会变得笨拙。当您的应用增长到 50 页时会发生什么？您最终会得到一个要编辑的怪物文件，该文件必须在整个页面中完整加载，从而增加了下载和解析时间。

根据访问的页面动态加载的较小的 JS 库文件效果很好。然后，您可以将函数附加到 APP 全局命名空间，以便它们可以在页面之间重用。您的控制器代码保持轻量，因为它会附加一个简单的 onclick 或其他任何内容，以便触发已经加载的库内容。

转向使用需求管理器以正确的顺序加载库可能会对此有所帮助，例如[http://requirejs.org/docs/jquery.html](http://requirejs.org/docs/jquery.html)

# html - 在 Outlook 2003 及更低版本中显示的 HTML 电子邮件中的黑色空表格单元格

> ID：11628672
> 
> 赞同：1
> 
> 时间：2012-07-24T10:13:10.993
> 
> 标签：html, outlook, html-table, html-email

我一直在提醒自己 Outlook 和电子邮件是多么可爱。当我的“空”间隔表格单元格在 Outlook 2003 或更低版本中显示为黑色表格单元格时，我遇到了问题，有什么想法吗？我有间隔 gif，我在 tds 上给出了宽度并设置了 bgcolor，但它仍然导致这个问题。我在使用 span 设置文本样式时也遇到了这个问题，但是将它们更改为 div 解决了这个问题。

这是我的代码片段：

```
 <!-- Introduction section -->
            <table id="intro" bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0" width="100%" align="center" style="font-size: 15px; line-height: 24px border: none;">
              <tr>
                <td height="16" bgcolor="#fff" colspan="3">  </td>
              </tr>
              <tr>
                <td colspan="3">
                  <table bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0" width="100%" align="center">
                    <tr>
                      <td width="60%" height="1" bgcolor="#99ad26"> </td>
                      <td width="40%" height="1" bgcolor="#ffffff"> </td>
                    </tr>
                  </table>
                  </td>
                </tr>
                <tr>
                  <td height="2" bgcolor="#fff" colspan="3"> </td>
                </tr>
                <tr>
                  <td colspan="3">
                    <table bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0" width="100%" align="center">
                      <tr>
                        <td width="70%" height="1" bgcolor="#99ad26"> </td>
                        <td width="30%" height="1" bgcolor="#ffffff"> </td>
                      </tr>
                    </table>
                  </td>
                </tr>
                <tr>
                  <td height="24" bgcolor="#ffffff" colspan="3">   </td>
                </tr>
                <tr>
                  <td width="24" bgcolor="#fff"><img src="http://www.ukgbc.org/sites/files/ukgbc/email/images/spacer.gif" alt="" width="24" height="1" style="display: block;"/</td>
                  <td width="512" align="left" bgcolor="#fff"> 
                    <h1 style="font-size: 30px; margin: 0px; margin-bottom: 25px; font-family:Arial, Helvetica, sans-serif; background-color: #fff;" mc:edit="intro_heading">Introduction</h1>
                    <div mc:edit="greeting" mc:hideable style="font-family:Arial, Helvetica, sans-serif; font-size:16px; background-color: #fff;">Dear *|FNAME|*,</div>
                    <br /><br />
                    <div mc:edit="introduction" style="font-family:Arial, Helvetica, sans-serif; font-size:15px; background-color: #fff;">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui sem, rutrum ut tristique a, eleifend quis libero. Aenean scelerisque blandit ante quis aliquet. Proin et augue odio, eget porta tortor. Fusce pharetra quam sed nisl vulputate ullamcorper.
                    </div>
                  </td>
                  <td width="24" bgcolor="#fff"><img src="http://www.ukgbc.org/sites/files/ukgbc/email/images/spacer.gif" alt="" width="24" height="1" style="display: block;"/</td>
                </tr>
                <tr>
                  <td height="40" bgcolor="#fff" colspan="3">   </td>
                </tr>
              </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:09:25.217

Outlook“讨厌”截断的颜色代码。任何 3 个字符的代码都被视为黑色。将所有颜色（样式标签外的背景颜色）编码为 6 位/字符代码。白色 = #FFFFFF 黑色 = #000000

# shopify - Shopify：为没有特定标签的产品创建智能集合

> ID：11628674
> 
> 赞同：3
> 
> 时间：2012-07-24T10:13:19.237
> 
> 标签：shopify

在 Shopify 中，我为所有带有“批发”标签的产品提供了一个智能集合。

我还想为所有没有“批发”标签的剩余产品创建另一个智能集合。这可能吗？有解决方法吗？

也许创建一个智能收藏并不是最好的选择。我真正需要做的只是列出 6 个没有“批发”标签的产品。是否有捷径可寻？

在此先感谢，奥古斯托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:14:38.700

您可以创建自定义集合并将单个产品添加到其中。目前，您无法基于没有标签来创建智能集合。如果您想自动执行此操作，您可以让网络挂钩监听产品创建/更新并在标签更改时调整集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T22:41:41.447

有这个“电动工具 - 批量编辑标签”应用程序： http: [//apps.shopify.com/power-tools-bulk-edit-tags](http://apps.shopify.com/power-tools-bulk-edit-tags)

# php - 创建其键和值依赖于其他数组的数组

> ID：11628680
> 
> 赞同：0
> 
> 时间：2012-07-24T10:13:46.777
> 
> 标签：php, arrays

有一些主题缩小了我的问题，但没有人允许我解决它。我有一个 csv 文件，我想从中计算我的数据库表中的数字并将结果写入一个新的 csv 文件。我需要创建一个新数组，其中每个键都是第一个数组的一个术语，值是我数据库中相关的记录数。以下是输入的一些示例：

乳糖

丝氨酸

我想得到这样的东西：

乳糖，25

丝氨酸，3

所以我创建了一个数组，其值是 csv 文件中的术语。然后我在 sql 查询中输入这个数组的值。然后，我一直无法在 Internet 或 php 文档中找到正确的方法。最后一行完全失败，但我尝试了它，因为它似乎是管理我的任务的狭义手段。

有人可以帮助我吗？

提前致谢 ！

```
$termslist= array();

$file = fopen('fileterms.csv', 'r');
while (($line = fgetcsv($file)) !== FALSE) {
//$line is an array of the csv elements
  foreach ($line AS $molindice => $molvalues) 
  {
    if ( ! in_array( $molvalue, $termslist ) )
            {array_push($termslist, $molvalues);}
  }
}

fclose($file);

//print_r ($termslist);

$molnumbers = array();

foreach ($termslist as $ancientkey => $ancientvalue)
{
    echo $ancientvalue;
    $sql3 = "SELECT content from mols WHERE content like '% $ancientvalue %'";
    $result3 = mysql_query($sql3)or die(mysql_error());
    $count3 = mysql_num_rows($result3);
    echo $count3;
    $molnumbers [$ancientvalue['molnames']] = $count3['quantities'];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:17:12.070

改变：

```
$molnumbers [$ancientvalue['molnames']] = $count3['quantities']; 
```

到：

```
$molnumbers[$ancientvalue['molnames']] = $count3['quantities']; 
```

或者：

```
$molname = $ancientvalue['molnames'];
$molnumbers[$molname] = $count3['quantities']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:45:10.190

在行中：

```
if ( ! in_array( $molvalue, $termslist ) ) 
```

您应该有一个小错误：

```
if ( ! in_array( $molvalues, $termslist ) ) 
```

然后在这一行：

```
$molnumbers [$ancientvalue['molnames']] = $count3['quantities']; 
```

$ancientvalue 本身已经是值（或 molname），而不是数组本身。因此，该行只需：

```
 $molnumbers [$ancientvalue] = $count3['quantities']; 
```

然后它应该将数字放入数组的正确部分。对于 sql 本身：

```
$sql3 = "SELECT content from mols WHERE content like '% $ancientvalue %'"; 
```

在我看来，您正在搜索 %BLANKancientvalueBLANK% 如果这不是您想要在那里做的而是寻找 %ancientvalue%，您应该将该行修改为：

```
$sql3 = 'SELECT content from mols WHERE content like \'%'.$ancientvalue.'%\''; 
```

# exception - 带有gpu的opencv在调试模式下崩溃

> ID：11628682
> 
> 赞同：1
> 
> 时间：2012-07-24T10:13:47.747
> 
> 标签：exception, opencv, cuda, gpu

我正在使用带有 cmake 的 Visual Studio 2010 构建的 opencv2.4.2（启用了 CUDA）。问题是我在调试模式下访问 gpu 方法/初始化时总是崩溃。它在发布模式下工作，尽管它也需要在 Visual Studio 之外运行，否则会发生一些崩溃。我收到的异常如下：

opencvGPUtest.exe 中 0x76dbfbae 处的第一次机会异常：Microsoft C++ 异常：内存位置 0x00a3e258 处的 cudaError_enum

该错误非常一致，我在互联网上与其他人一起看到了几个示例（http://tech.groups.yahoo.com/group/OpenCV/message/77905）。在处理大型项目时，如果没有调试支持就很难工作，所以请帮我解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:59:32.400

遇到同样的问题，通过删除所有调试/发布/x64文件**和SDF文件**解决。

# asp.net-mvc - 无法在 Kendo UI 的更新和删除功能上调用服务器端功能

> ID：11628684
> 
> 赞同：2
> 
> 时间：2012-07-24T10:14:06.400
> 
> 标签：asp.net-mvc, asp.net-web-api, kendo-ui, grid

我在我的应用程序中使用带有 WEB API 的 MVC。我正在使用带有弹出编辑功能的 Kendo Grid。我能够获取数据并绑定网格。但是当我尝试编辑或删除一行时，问题就出现了。parameterMap 的操作**参数：function(options, operation)**一直显示为**create**并且在更新和销毁的情况下会命中相同的创建传输 url。

我在这段代码中做错了什么：

```
dataSource = new kendo.data.DataSource({
        type: "json",
        transport: {
            read: {
                cache: false,
                url: GETUSER_API_URL,
                contentType: "application/json; charset=utf-8", 
                datatype: "json"
            },
            create: {
                cache: false,
                url: UPDATEUSER_API_URL,
                contentType: "application/json; charset=utf-8",
                type: "POST",
                datatype: "json"
            },
            update: {
                cache: false,
                url: UPDATEUSER_API_URL,
                contentType: "application/json; charset=utf-8",
                type: "POST",
                datatype: "json"
            },
            destroy: {
                url: DELETEUSER_API_URL,
                contentType: "application/json; charset=utf-8",
                type: "POST", 
                datatype: "json"
            },
            parameterMap: function (options, operation) {
                debugger;
                if (operation == "update" || operation == "create") {
                    if (options.models[0].UserProfileId == null && operation != "destroy") {
                        operation = "create";
                    }
                    else {
                        operation = "update";
                    }
                    return kendo.stringify({ models: options.models[0] });
                }
                else if (operation == "destroy") {

                    return kendo.stringify({ models: options.models[0] });
                }
            }
        },
        batch: true,
        pageSize: 10,
        schema: {
            model: {
                id: "UserProfileID",
                fields: {
                    FirstName: { validation: { required: true } },
                    LastName: { validation: { required: true } },
                    EmailId: { nullable: false, validation: { required: true } }
                }
            }
        }
    }); 
```

**此外，我如何将行数据发送回 API？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T19:37:35.583

尝试使用该配置配置您的 webconfig：

```
<system.webServer>
  <validation validateIntegratedModeConfiguration="false" />
  <modules runAllManagedModulesForAllRequests="true" />
</system.webServer> 
```

我有同样的问题，但是当我添加`<modules runAllManagedModulesForAllRequests="true" />` webapi 时工作正常。

# java - 为什么 MD5 哈希键与 php 生成的 MD5 哈希键不匹配？

> ID：11628685
> 
> 赞同：0
> 
> 时间：2012-07-24T10:14:08.300
> 
> 标签：java, android, hash, md5

在我的 Android 应用程序中，我使用 MD5 哈希密钥来保证数据访问的安全性。我正在使用 Email+time+"postfix" 字符串来生成密钥。它运作良好。但问题是，当我使用至少有一个加号 ( `+`)`a+b@gmail.com`的电子邮件地址时，服务器返回“不正确的访问密钥”消息。我注意到它正在处理带有减号 ( `-`) 、下划线 ( `_`) 等符号的电子邮件地址，但它不适用于带有加号 ( `+`) 的电子邮件地址。我正在使用这种方法生成 MD5 哈希键：

```
public static String MD5_Hash(String s) {
    try {
        // Create MD5 Hash
        MessageDigest digest = java.security.MessageDigest
                .getInstance("MD5");
        digest.update(s.getBytes());
        byte messageDigest[] = digest.digest();

        // Create Hex String
        StringBuffer hexString = new StringBuffer();
        for (int i = 0; i < messageDigest.length; i++) {
            String h = Integer.toHexString(0xFF & messageDigest[i]);
            while (h.length() < 2)
                h = "0" + h;
            hexString.append(h);
        }
        return hexString.toString();

    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    }
    return "";
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T10:36:46.207

我就是这样做的：-

```
public static String getMD5(String input) {

 byte[] source;
 try {
     source = input.getBytes("UTF-8");
 } catch (UnsupportedEncodingException e) {
     System.out.println("Error!");
 }

 String result = null;
 char hexDigits[] = {'0', '1', '2', '3', '4', '5', '6', '7',
         '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'};
 try {
     MessageDigest md = MessageDigest.getInstance("MD5");
     md.update(source);
     byte temp[] = md.digest();
     char str[] = new char[16 * 2];
     int k = 0;
     for (int i = 0; i < 16; i++) {
         byte byte0 = temp[i];
         str[k++] = hexDigits[byte0 >>> 4 & 0xf];
         str[k++] = hexDigits[byte0 & 0xf];
     }
     result = new String(str);
 } catch (Exception e) {
 System.out.println("Error!");
}
return result;
} 
```

# jboss - 在 Java EE 应用服务器上运行的 Axis2 WS-Security

> ID：11628691
> 
> 赞同：2
> 
> 时间：2012-07-24T10:14:39.447
> 
> 标签：jboss, axis2, ws-security, websphere-7, weblogic11g

我在应用服务器（如 JBoss、WebSphere 和 Weblogic）中运行了 Axis2 Web 服务，直到现在我在请求中传递用户详细信息并在处理用户之前对用户进行身份验证。

下一步是我想将身份验证位委托给 Java EE 应用程序服务器，一旦通过身份验证，应用程序服务器应该传递我将用作执行请求的上下文的 UserPrinciple。

我不确定我是否正确地问了这个问题？我想我将 WebContainer 身份验证与 WS-Security 的东西混合在一起。

任何人都可以通过一些我可以将其作为启动指南引用的文档为我指明正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:21:51.267

好的，我已经尝试了一个解决方案，它在一定程度上奏效了。这是详细信息；

使用以下 services.xml 创建了 TestService

```
<serviceGroup>
    <service name="TestWebService" scope="application" targetNamespace="http://TestServiceWs"> 
        <schema schemaNamespace="http://TestServiceWs"/>
        <description>Test POJO Axis2 AAR deployment</description>
        <parameter name="ServiceClass">test.TestServiceWS</parameter>
        <messageReceivers>
            <messageReceiver mep="http://www.w3.org/2004/08/wsdl/in-only"
                class="org.apache.axis2.rpc.receivers.RPCInOnlyMessageReceiver"/>
            <messageReceiver mep="http://www.w3.org/2004/08/wsdl/in-out"
                class="org.apache.axis2.rpc.receivers.RPCMessageReceiver"/>
        </messageReceivers>
    </service>

    <module ref="rampart" />

    <parameter name="InflowSecurity">
      <action>
        <items>UsernameToken Timestamp</items>
        <passwordCallbackClass>test.PWHandlerServer</passwordCallbackClass>
      </action>
    </parameter>
</serviceGroup> 
```

已实现**PWHandlerServer.java**

```
package test;

import java.io.IOException;

import javax.security.auth.callback.Callback;
import javax.security.auth.callback.CallbackHandler;
import javax.security.auth.callback.UnsupportedCallbackException;

import org.apache.ws.security.WSPasswordCallback;

public class PWHandlerServer implements CallbackHandler {

    // the username and password we expect incoming WS calls to use
    private String user = "wsuser";
    private String pwd = "wspwd";

    public void handle (Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for (int i = 0; i < callbacks.length; i++) {
            if (callbacks[i] instanceof WSPasswordCallback) {
                WSPasswordCallback pc = (WSPasswordCallback) callbacks[i];
                System.out.println("identifier: "+pc.getIdentifer()+", usage: "+pc.getUsage());

                if (pc.getUsage() == WSPasswordCallback.USERNAME_TOKEN) {
                    // for passwords sent in digest mode we need to provide the password,
                    // because the original one can't be un-digested from the message

                    // we can throw either of the two Exception types if authentication fails
                    if (! user.equals(pc.getIdentifer()))
                        throw new IOException("unknown user: "+pc.getIdentifer());

                    // this will throw an exception if the passwords don't match
                    pc.setPassword(pwd);

                } else if (pc.getUsage() == WSPasswordCallback.USERNAME_TOKEN_UNKNOWN) {
                    // for passwords sent in cleartext mode we can compare passwords directly

                    if (! user.equals(pc.getIdentifer()))
                        throw new IOException("unknown user: "+pc.getIdentifer());

                    // we can throw either of the two Exception types if authentication fails
                    if (! pwd.equals(pc.getPassword()))
                        throw new IOException("password incorrect for user: "+pc.getIdentifer());
                }
                // If everything is OK then set the context and move on
                TestRequestContext ctx = new TestRequestContext(pc.getIdentifer());
                TestRequestContext.setRequestContext(ctx);

            } else {
                throw new UnsupportedCallbackException(callbacks[i], "Unrecognized Callback");
            }
        }
    }
} 
```

已实现**TestRequestContext**

```
package test;

class TestRequestContext {
    private final static ThreadLocal<TestRequestContext> currentContext = new ThreadLocal<TestRequestContext>();

    public static void setRequestContext(TestRequestContext context) {
        currentContext.set(context);
    }

    public static TestRequestContext getRequestContext() {
        return currentContext.get();
    }

    public static void clearRequestContext() {
        currentContext.remove();
    }

    private String userPrincipal;

    public TestRequestContext(String principal) {
        this.userPrincipal = principal;
    }

    public String getUserPrincipal(){
        return this.userPrincipal;
    }
} 
```

现在我应该能够在我的 Web 服务类中访问我的 TestRequestContext.getUserPricipal() 并将其传递给 DB 以进行事务和切换安全上下文。唯一的问题是当我尝试通过 SoapUI 访问服务时，它给了我以下异常；

```
 15:07:34,924 INFO  [STDOUT] identifier: wsuser, usage: 5
15:08:48,081 INFO  [STDOUT] [ERROR] WSDoAllReceiver: security processing failed (actions mismatch)
org.apache.axis2.AxisFault: WSDoAllReceiver: security processing failed (actions mismatch)
        at org.apache.rampart.handler.WSDoAllReceiver.processBasic(WSDoAllReceiver.java:344)
        at org.apache.rampart.handler.WSDoAllReceiver.processMessage(WSDoAllReceiver.java:86)
        at org.apache.rampart.handler.WSDoAllHandler.invoke(WSDoAllHandler.java:72)
        at org.apache.axis2.engine.Phase.invoke(Phase.java:318)
        at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:254)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:160)
        at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:173)
        at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:144)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
        at java.lang.Thread.run(Thread.java:619) 
```

在 SoapUI 中，我只是使用“身份验证”选项卡来设置用户名和密码并调用？我需要在调用之前设置其他任何东西吗？

另外，使用 ThreadLocal 的方法是正确的，还是我也可以通过其他方式访问该原理？

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T16:41:08.773

您也可以获取以下格式的 SOAP 标头中传递的用户名。在授权之前，您可以在操作中访问它。您可能不需要 TestRequestContext 类来存储用户名。如果有人不同意，请告诉我。

```
MessageContext msgContext = MessageContext.getCurrentMessageContext();                   
// Getting HttpServletRequest from Message Context 
String username = (String)msgContext 
                           .getProperty(RampartMessageData.USERNAME); 
```

# ajax - 将另一个 XHTML 加载到中心布局中，但应用程序在 3 次更新后没有响应

> ID：11628695
> 
> 赞同：1
> 
> 时间：2012-07-24T10:14:51.743
> 
> 标签：ajax, jsf, include, primefaces

我在我的 template.xhtml 文件中使用 PrimeFaces 布局，在我的 index.xhtml 中，当我在树中导航时，我尝试将页面动态包含到中心布局中。它运行良好，但在树中第四次单击后，应用程序不再响应。它会更新中心页面三次，并在第四次单击后冻结。

这是我的 template.xhtml 的一部分：

```
<p:layout fullPage="true">
    <p:layoutUnit position="north" size="50">
        <ui:insert name="header"></ui:insert>
    </p:layoutUnit>
    <p:layoutUnit position="south" size="65" resizable="true" collapsible="true"> 
        <ui:insert name="footer"></ui:insert>
    </p:layoutUnit>
    <p:layoutUnit position="west"  size="250" header="TreeMenu" resizable="true" collapsible="true"> 
        <ui:insert name="treemenu"></ui:insert>
    </p:layoutUnit>
    <p:layoutUnit position="center">
        <ui:insert name="content"></ui:insert>
    </p:layoutUnit>
</p:layout> 
```

这是我的 index.xhtml 的一部分：

```
 <ui:define name="treemenu">
        <p:tree id="tree1" dynamic="true" value="#{treebuilder.tree}" var="node" selectionMode="single" selection="#{treebuilder.selectedNode}">
            <p:ajax event="select" listener="#{treebuilder.onNodeSelection}" update=":contentpanel"></p:ajax>
            <p:treeNode>
                <h:outputText value="#{node.trzKod}"></h:outputText>
            </p:treeNode>
        </p:tree>
    </ui:define>    
    <ui:define name="content">
        <h:panelGroup id="contentpanel" layout="block">
            <ui:include src="#{treebuilder.centerPage}"></ui:include>
        </h:panelGroup>
    </ui:define> 
```

我认为问题出在ajax更新的某个地方，但我不知道我做错了什么。

# java - 使用 JSON 时，我们可以将对象作为 map 中的键吗？

> ID：11628698
> 
> 赞同：26
> 
> 时间：2012-07-24T10:15:31.140
> 
> 标签：java, json, jackson

如下代码：

```
public class Main {

    public class innerPerson{
        private String name;
        public String getName(){
            return name;
        }
    }

    public static void main(String[] args){
        ObjectMapper om = new ObjectMapper();

        Map<innerPerson, String> map = new HashMap<innerPerson,String>();

        innerPerson one = new Main().new innerPerson();
        one.name = "david";

        innerPerson two = new Main().new innerPerson();
        two.name = "saa";

        innerPerson three = new Main().new innerPerson();
        three.name = "yyy";

        map.put(one, "david");
        map.put(two, "11");
        map.put(three, "true");

        try {
            String ans = om.writeValueAsString(map);

            System.out.println(ans);

        } catch (JsonGenerationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JsonMappingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

输出是：

```
{"Main$innerPerson@12d15a9":"david","Main$innerPerson@10a3b24":"true","Main$innerPerson@e91f5d":"11"} 
```

是否可以使地图的键是精确的数据而不是对象的地址？如何？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-24T15:19:21.833

> 使用 JSON 时，我们可以将对象作为 map 中的键吗？

严格来说，没有。JSON *map*数据结构是一个 JSON*对象*数据结构，它是一个名称/值对的集合，其中元素名称必须是字符串。因此，尽管将 JSON 对象作为映射来感知和绑定是合理的，但 JSON 映射键也必须是字符串——同样，因为 JSON 映射是 JSON 对象。JSON 对象（映射）结构的规范可在[http://www.json.org](http://www.json.org)获得。

> 是否可以使地图的键是精确的数据而不是对象的地址？如何？

Costi 正确地描述了 Jackson 的默认映射键序列化程序的行为，它只是调用`toString()`Java 映射键的方法。除了修改`toString()`方法以返回映射键的 JSON 友好表示形式外，还可以使用 Jackson 实现自定义映射键序列化并且相当简单。[Serializing Map<Date, String> with Jackson](https://stackoverflow.com/questions/6574636/serializing-mapdate-string-with-jackson)提供了一个这样做的例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T10:25:38.470

您看到打印的“地址”就是您的`toString()`方法返回的内容。

现在忽略 JSON 封送处理为了让您的代码正常工作，您需要在您的类中实现:和`equals()`。如果您在 中返回 name 属性，它将成为您的 JSON 表示中的键。`hashCode()``toString()``InnerPerson``toString()`

但是如果没有正确实现`equals()`and `hashCode()`，就无法正确使用 HashMap。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T17:08:12.247

除了现有的正确答案之外，您还可以使用 Module 接口（通常使用`SimpleModule`）添加自定义密钥序列化器和密钥反序列化器。这允许您在外部定义密钥的序列化和反序列化。无论哪种方式，JSON 中的键都必须是字符串，就像其他人指出的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-29T22:36:28.567

使用 Gson 库是可能的。

Gson gson = new GsonBuilder().enableComplexMapKeySerialization().create(); gson.toJson(地图);

# linux - shellscript 从文件中读取变量

> ID：11628700
> 
> 赞同：3
> 
> 时间：2012-07-24T10:15:32.257
> 
> 标签：linux, shell, unix

我是 shell 脚本的新手。我正在开发一个项目，其中的要求就像一个脚本文件将设置变量，而另一个脚本文件必须获取这些变量并对其进行操作。我将第一个脚本中的变量存储到一个文件中，并在第二个脚本文件中读取它。

在第一个脚本文件 first.sh 中，我正在做

```
echo "a=6" > test.dat
echo "b=7" >> test.dat
echo "c=8" >> test.dat 
```

我使用`>`它覆盖的第一个变量和它附加的下一个值。因此该文件将始终具有最新值。

还有比这更好的方法吗？

在第二个脚本文件中如何读取和填充适当的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T10:18:01.527

您可以使用以下脚本从脚本加载此变量`source`：

```
source test.dat 
```

要不就

```
. test.dat 
```

例子：

```
$ echo "a=6" > test.dat ; echo "b=7" >> test.dat ; echo "c=8" >> test.dat
$ cat test.dat 
a=6
b=7
c=8
$ . test.dat
$ echo $a $b $c
6 7 8 
```

如果您有生成这些变量的脚本/程序，您也可以使用`eval`.

例子：

```
$ cat generate.sh
echo a=6
echo b=7
echo c=8

$ bash generate.sh 
a=6
b=7
c=8

$ eval $(bash generate.sh)
$ echo $a $b $c
6 7 8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:19:12.320

要读取第二个脚本中的变量，您只需获取它（导入它）：

```
## Put this line in your second script
. test.dat 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:12:15.890

总是有修改的机会，写你的变量文件的方法很好。您仍然可以按如下方式进行更改：

> echo -e "a=6\nb=7\nc=8" > test.dat

要通过脚本读取变量文件，您可以添加以下内容：

> 源测试.dat

或者

（我的建议:-)）

> . 测试数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T14:45:04.753

在编写文件方面，有不同的方法。哪个*更好*取决于许多因素。一种常见的方法是使用heredoc：

```
cat > test.dat << EOF
a=6
b=7
c=8
EOF 
```

# .htaccess - .htaccess 搜索页面重写

> ID：11628702
> 
> 赞同：0
> 
> 时间：2012-07-24T10:15:35.360
> 
> 标签：.htaccess, redirect, rewrite

我有一个网站`www.domain.com/jeeves/`。我希望网站上的搜索看起来像这样：

```
http://www.domain.com/jeeves/results/[search_term_here]/[page_number_here] 
```

当然，在搜索时，我希望他们转到第 1 页。On`next`等`previous`，以浏览页码。

.ht 访问：

```
 # rewrite all URL's of the format I want to point at my php page with params
 RewriteRule ^results/([A-Za-z0-9]+)$/([0-9]+)$ http://www.domain.com/jeeves/search.php?s=$1&page=$2 [NC,L]

 # rewrite initial search query to the first page of results
 RewriteCond %{QUERY_STRING} s=([^&]*)
 RewriteRule ^search http://www.domain.com/jeeves/results/%1/1? [NC,R=301] 
```

这似乎不起作用 - 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:46:58.377

您的第一个正则表达式不正确： ^results/([A-Za-z0-9]+) **$** /([0-9]+)$
试试这个：

```
RewriteRule ^jeeves/results/([A-Za-z0-9]+)/([0-9]+)/?$ /jeeves/search.php?s=$1&page=$2 [NC,L]
RewriteCond %{QUERY_STRING} s=([^&]+)
RewriteRule ^jeeves/search /jeeves/results/%1/1? [NC,R=301]`enter code here` 
```

# jquery - 每个会话设置一次随机背景图像

> ID：11628703
> 
> 赞同：0
> 
> 时间：2012-07-24T10:15:36.500
> 
> 标签：jquery, html, css, image

我对 jquery 完全陌生。我希望能够随机设置标题背景图像。我不希望它在每次刷新页面时都发生变化。相反，我只想在每个会话中设置一次。我假设我需要为此使用会话 cookie，但无法使其正常工作。

以下是我在每次刷新的基础上都可以正常工作的内容。我只想在每次刷新时停止它的变化。

```
$(document).ready(function () {
var randomImages = ['image1', 'image2', 'image3', 'image4', 'image5'];
var rndNum = Math.floor(Math.random() * randomImages.length);
var imageFile = $('#imgpathname').val() + randomImages[rndNum] + ".jpg";
$("div#header").css({ background: "url(" + imageFile + ") no-repeat" });
}); 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:24:13.130

jQuery.cookie.js 可能会在这里为您提供帮助：

[https://github.com/carhartl/jquery-cookie/](https://github.com/carhartl/jquery-cookie/)

在项目页面中，创建会话 cookie 非常简单：

```
$.cookie('the_cookie', 'the_value'); 
```

然后，您可以在每次页面加载时读取此 cookie。

```
$.cookie('the_cookie'); // => "the_value" 
```

我希望这会有所帮助。如上所述，可以使用 HTML5 本地存储，但更广泛地支持会话 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:21:58.327

嗨，为什么不将您的 imageID 存储在 html5 存储对象中，例如 sessionStorage/localStorage，请访问[Html5 存储文档](http://diveintohtml5.info/storage.html)以获取更多详细信息。使用它，您可以在本地临时/永久存储中间值，然后访问您的值以存储会话的值

```
sessionStorage.getItem('label')
sessionStorage.setItem('value', 'label') 
```

或使用永久存储值

```
localStorage.getItem('label')
localStorage.setItem('value', 'label') 
```

因此，您可以使用 html5 存储对象在多个页面之间存储（临时）表单数据，您甚至可以在重新加载后保留这些数据。

现在，在您的情况下，您可以将图像 ID 存储在会话存储中，并在刷新页面时使用它，以便每个会话加载相同的图像。

# iphone - 让 CorePlot 条形图显示浮点值而不是整数？

> ID：11628714
> 
> 赞同：0
> 
> 时间：2012-07-24T10:16:20.640
> 
> 标签：iphone, objective-c, ios, core-plot

基本上，我有这个类，用于在 CorePlot 条形图中显示数据：

```
#import "BarChartViewController.h"
#import "AppDelegate.h"
#import "Project.h"
#import "Currency.h"
#import "TotalValueCalculator.h"

#define BAR_POSITION @"POSITION"
#define BAR_HEIGHT @"HEIGHT"
#define COLOR @"COLOR"
#define CATEGORY @"CATEGORY"

#define AXIS_START 0

@interface BarChartViewController ()

@end

@implementation BarChartViewController
{
    int count;
}

@synthesize data;
@synthesize graph;
@synthesize hostingView;
@synthesize graphType;

//Finds the maximum value from an array of ints
int findMax (int numbers[], int N){
    int max = numbers[0];
    for (int i = 0; i < N; i++)
        if(max<numbers[i]) max = numbers[i];

    return max;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

    }

    return self;
}

- (void) generateBarPlot
{
    //Create host view
    self.hostingView = [[CPTGraphHostingView alloc] 
                        initWithFrame:[[UIScreen mainScreen]bounds]];
    [self.view addSubview:self.hostingView];

    //Create graph and set it as host view's graph
    self.graph = [[CPTXYGraph alloc] initWithFrame:self.hostingView.bounds];
    [self.hostingView setHostedGraph:self.graph];

    //set graph padding and theme
    self.graph.plotAreaFrame.paddingTop = 20.0f;
    self.graph.plotAreaFrame.paddingRight = 20.0f;
    self.graph.plotAreaFrame.paddingBottom = 170.0f;
    self.graph.plotAreaFrame.paddingLeft = 70.0f;
    [self.graph applyTheme:[CPTTheme themeNamed:kCPTDarkGradientTheme]];

    //set axes ranges
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(AXIS_START) length:CPTDecimalFromFloat(50)];

    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:
                        CPTDecimalFromFloat(AXIS_START)
                                                    length:CPTDecimalFromFloat((axisEnd - AXIS_START)+5)];

    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.graph.axisSet;
    //set axes' title, labels and their text styles
    CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
    textStyle.fontName = @"Helvetica";
    textStyle.fontSize = 14;
    textStyle.color = [CPTColor whiteColor];

    if (graphType == @"TotalProject"){
        axisSet.xAxis.title = @"Project Name";
    }
    else if (graphType == @"TotalCategory"){
        axisSet.xAxis.title = @"Category Name";
    }
    else if (graphType == @"TotalCurrency"){
        axisSet.xAxis.title = @"Currency Name";
    }

    else if (graphType == @"DistanceTravelled"){
        axisSet.xAxis.title = @"Project";
    }
    else if (graphType == @"FuelCostProject"){
        axisSet.xAxis.title = @"Project";
    }
    else if (graphType == @"FuelCostCurrency"){
        axisSet.xAxis.title = @"Currency";
    }

    axisSet.yAxis.title = @"Total Value";
    axisSet.xAxis.titleTextStyle = textStyle;
    axisSet.yAxis.titleTextStyle = textStyle;
    axisSet.xAxis.titleOffset = 50.0f;
    axisSet.yAxis.titleOffset = 50.0f;
    axisSet.xAxis.labelTextStyle = textStyle;
    axisSet.xAxis.labelOffset = 3.0f;
    axisSet.yAxis.labelTextStyle = textStyle;
    axisSet.yAxis.labelOffset = 3.0f;
    //set axes' line styles and interval ticks
    CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
    lineStyle.lineColor = [CPTColor whiteColor];
    lineStyle.lineWidth = 3.0f;
    axisSet.xAxis.axisLineStyle = lineStyle;
    axisSet.yAxis.axisLineStyle = lineStyle;
    axisSet.xAxis.majorTickLineStyle = lineStyle;
    axisSet.yAxis.majorTickLineStyle = lineStyle;
    //Set x axis tick length to 0 as there is no data on the x axis
    axisSet.xAxis.majorIntervalLength = CPTDecimalFromFloat(0.0f);

    if (axisEnd <= 400){
        axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(25.0f);
    }
    else if (axisEnd <= 900){
        axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(50.0f);
    }
    else if (axisEnd <= 1300){
        axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(75.0f);
    }
    else if (axisEnd <= 1800){
        axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(100.0f);
    }
    else if (axisEnd <= 2300){
        axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(125.0f);
    }
    else if (axisEnd <= 2800){
        axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(150.0f);
    }
    else if (axisEnd <= 3300){
        axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(175.0f);
    }
    else if (axisEnd <= 3500){
        axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(200.0f);
    }
    else {
        axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(300.0f);
    }

    axisSet.xAxis.majorTickLength = 7.0f;
    axisSet.yAxis.majorTickLength = 7.0f;
    axisSet.xAxis.minorTickLineStyle = lineStyle;
    axisSet.yAxis.minorTickLineStyle = lineStyle;
    axisSet.xAxis.minorTicksPerInterval = 1;
    axisSet.yAxis.minorTicksPerInterval = 1;
    axisSet.xAxis.minorTickLength = 5.0f;
    axisSet.yAxis.minorTickLength = 5.0f;

    NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
    [numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
    [numberFormatter setMaximumFractionDigits:2];
    [numberFormatter setPositiveFormat:@"###0.00"];    
    axisSet.yAxis.labelFormatter = numberFormatter;

    int initialTickLocation = 9;
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSMutableArray *customTickLocations = [[NSMutableArray alloc] init];
    NSMutableArray *xAxisLabels = [[NSMutableArray alloc] init];

    if (graphType == @"TotalProject"){
        for (int i = 0; i < [appDelegate.projects count]; i++){

            //CHANGE THESE NUMBERS TO CHANGE POSITIONS OF THE LABELS
                [customTickLocations addObject:[NSNumber numberWithInt:initialTickLocation]];
                initialTickLocation = initialTickLocation + 7;
                [xAxisLabels addObject:[[appDelegate.projects objectAtIndex:i] name]];
        }
    }
    else if (graphType == @"TotalCategory"){
        for (int i = 0; i < [appDelegate.categories count]; i++){
            //CHANGE THESE NUMBERS TO CHANGE POSITIONS OF THE LABELS
            [customTickLocations addObject:[NSNumber numberWithInt:initialTickLocation]];
            initialTickLocation = initialTickLocation + 7;
            [xAxisLabels addObject:[[appDelegate.categories objectAtIndex:i] name]];
        }
    }
    else if (graphType == @"TotalCurrency"){
        for (int i = 0; i < [appDelegate.currencies count]; i++){
            //CHANGE THESE NUMBERS TO CHANGE POSITIONS OF THE LABELS
            [customTickLocations addObject:[NSNumber numberWithInt:initialTickLocation]];
            initialTickLocation = initialTickLocation + 7;
            [xAxisLabels addObject:[[appDelegate.currencies objectAtIndex:i] shortName]];
        }
    }

    else if (graphType == @"DistanceTravelled"){
        for (int i = 0; i < [appDelegate.projects count]; i++){
            //CHANGE THESE NUMBERS TO CHANGE POSITIONS OF THE LABELS
            [customTickLocations addObject:[NSNumber numberWithInt:initialTickLocation]];
            initialTickLocation = initialTickLocation + 7;
            [xAxisLabels addObject:[[appDelegate.projects objectAtIndex:i] name]];
        }
    }
    else if (graphType == @"FuelCostProject"){
        for (int i = 0; i < [appDelegate.projects count]; i++){
            //CHANGE THESE NUMBERS TO CHANGE POSITIONS OF THE LABELS
            [customTickLocations addObject:[NSNumber numberWithInt:initialTickLocation]];
            initialTickLocation = initialTickLocation + 7;
            [xAxisLabels addObject:[[appDelegate.projects objectAtIndex:i] name]];
        }
    }
    else if (graphType == @"FuelCostCurrency"){
        for (int i = 0; i < [appDelegate.currencies count]; i++){
            //CHANGE THESE NUMBERS TO CHANGE POSITIONS OF THE LABELS
            [customTickLocations addObject:[NSNumber numberWithInt:initialTickLocation]];
            initialTickLocation = initialTickLocation + 7;
            [xAxisLabels addObject:[[appDelegate.currencies objectAtIndex:i] shortName]];
        }
    }

    axisSet.xAxis.labelRotation = M_PI/4;
    axisSet.xAxis.labelingPolicy = CPTAxisLabelingPolicyNone;

    NSUInteger labelLocation = 0;
    NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[xAxisLabels count]];
    for (NSNumber *tickLocation in customTickLocations){
        CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:[xAxisLabels objectAtIndex:labelLocation++] textStyle:axisSet.xAxis.labelTextStyle];
        newLabel.tickLocation = [tickLocation decimalValue];
        newLabel.offset = axisSet.xAxis.labelOffset + axisSet.xAxis.majorTickLength;
        newLabel.rotation = M_PI / 4;
        [customLabels addObject:newLabel];
    }
    axisSet.xAxis.axisLabels = [NSSet setWithArray:customLabels];

    // Create bar plot and add it to the graph
    CPTBarPlot *plot = [[CPTBarPlot alloc] init] ;
    plot.dataSource = self;
    plot.delegate = self;
    plot.barWidth = [[NSDecimalNumber decimalNumberWithString:@"5.0"]
                     decimalValue];
    plot.barOffset = [[NSDecimalNumber decimalNumberWithString:@"10.0"]
                      decimalValue];
    plot.barCornerRadius = 5.0;
    // Remove bar outlines
    CPTMutableLineStyle *borderLineStyle = [CPTMutableLineStyle lineStyle];
    borderLineStyle.lineColor = [CPTColor clearColor];
    plot.lineStyle = borderLineStyle;
    // Identifiers are handy if you want multiple plots in one graph
    plot.identifier = @"projectTotals";
    [self.graph addPlot:plot];
}

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
    return [self.data count];
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    NSDictionary *bar = [self.data objectAtIndex:index];

    if(fieldEnum == CPTBarPlotFieldBarLocation){
        NSLog(@"Position: %@", [bar valueForKey:BAR_POSITION]);
        return [bar valueForKey:BAR_POSITION];
    }
    else{ 
        NSLog(@"Height: %@", [bar valueForKey:BAR_HEIGHT]);
        return [bar valueForKey:BAR_HEIGHT];
    }

}

-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index
{

    CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
    textStyle.fontName = @"Helvetica";
    textStyle.fontSize = 12;
    textStyle.color = [CPTColor whiteColor];

    NSDictionary *bar = [self.data objectAtIndex:index];
    //Here we want to display the value for that day, not the name of the day
    CPTTextLayer *label = [[CPTTextLayer alloc] initWithText:[NSString stringWithFormat:@"%0.2f", [[bar valueForKey:BAR_HEIGHT] floatValue]]];
    label.textStyle =textStyle;

    return label;

}

-(CPTFill *)barFillForBarPlot:(CPTBarPlot *)barPlot
                  recordIndex:(NSUInteger)index
{
    NSDictionary *bar = [self.data objectAtIndex:index];
    CPTGradient *gradient = [CPTGradient gradientWithBeginningColor:[CPTColor whiteColor]
                                                        endingColor:[bar valueForKey:@"COLOR"]
                                                  beginningPosition:0.0 endingPosition:0.3 ];
    [gradient setGradientType:CPTGradientTypeAxial];
    [gradient setAngle:320.0]; 

    CPTFill *fill = [CPTFill fillWithGradient:gradient];

    return fill;
}

- (void)dealloc
{

}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.data = [NSMutableArray array];

    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    count = [appDelegate.projects count];
    int catCount = [appDelegate.categories count];
    int currencyCount = [appDelegate.currencies count];

    int bar_heights[count];
    NSString *categories[count];
    int catBar_heights[catCount];
    NSString *catCategories[catCount];
    int currencyBar_heights[currencyCount];
    NSString *currencyCategories[currencyCount];

    if ([graphType isEqualToString:@"TotalProject"])
    {
                for (int i = 0; i < count; i++)
                {
                    TotalValueCalculator *calc = [[TotalValueCalculator alloc] initWithString:[[appDelegate.projects objectAtIndex:i] name]];
                    NSString *totalValueString = [calc compareProject];
                    float totalValue = [totalValueString floatValue];

                    bar_heights[i] = totalValue;
                    NSLog(@"---%0.2f", totalValue);
                    categories[i] = [[appDelegate.projects objectAtIndex:i] name];
                }

                axisEnd = findMax(bar_heights, count) + ((findMax(bar_heights, count)) / 10);

                UIColor *colors[] = {
                    [UIColor colorWithRed:139/255.0 green:198/255.0 blue:63/255.0 alpha:1], 
                    nil};

                for (int i = 0; i < [appDelegate.projects count] ; i++){
                    int position = i*7; //Bars will be 7 pts away from each other
                    float height = bar_heights[i];
                    NSDictionary *bar = [NSDictionary dictionaryWithObjectsAndKeys:
                                         [NSDecimalNumber numberWithFloat:position],BAR_POSITION,
                                         [NSDecimalNumber numberWithFloat:height],BAR_HEIGHT,
                                         colors[0],COLOR,
                                         categories[i],CATEGORY,
                                         nil];
                    NSLog(@"^^^^^^^^^^^^^%@", [NSDecimalNumber numberWithFloat:height]);
                    [self.data addObject:bar];

                }

    }
    else if ([graphType isEqualToString:@"TotalCategory"])
    {
        for (int i = 0; i < catCount; i++)
        {
            TotalValueCalculator *calc = [[TotalValueCalculator alloc] initWithString:[[appDelegate.categories objectAtIndex:i] name]];
            NSString *totalValueString = [calc compareCategory];
            double totalValue = [totalValueString doubleValue];

            catBar_heights[i] = totalValue;
            catCategories[i] = [[appDelegate.categories objectAtIndex:i] name];
        }

        axisEnd = findMax(catBar_heights, catCount) + ((findMax(catBar_heights, catCount)) / 10);

        UIColor *colors[] = {
            [UIColor colorWithRed:236/255.0 green:139/255.0 blue:34/255.0 alpha:1], 
            nil};

        for (int i = 0; i < [appDelegate.categories count] ; i++){
            double position = i*7; //Bars will be 7 pts away from each other
            double height = catBar_heights[i];

            NSDictionary *bar = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithDouble:position],BAR_POSITION,
                                 [NSNumber numberWithDouble:height],BAR_HEIGHT,
                                 colors[0],COLOR,
                                 catCategories[i],CATEGORY,
                                 nil];
            [self.data addObject:bar];

        }

    }
    else if ([graphType isEqualToString:@"TotalCurrency"])
    {

        for (int i = 0; i < currencyCount; i++)
        {
            TotalValueCalculator *calc = [[TotalValueCalculator alloc] initWithString:[[appDelegate.currencies objectAtIndex:i] shortName]];
            NSString *totalValueString = [calc compareCurrency];
            double totalValue = [totalValueString doubleValue];

            currencyBar_heights[i] = totalValue;
            currencyCategories[i] = [[appDelegate.currencies objectAtIndex:i] shortName];
        }

        axisEnd = findMax(currencyBar_heights, currencyCount) + ((findMax(currencyBar_heights, currencyCount)) / 10);

        UIColor *colors[] = {
            [UIColor colorWithRed:236/255.0 green:139/255.0 blue:34/255.0 alpha:1], 
            nil};

        for (int i = 0; i < [appDelegate.currencies count] ; i++){
            double position = i*7; //Bars will be 7 pts away from each other
            double height = currencyBar_heights[i];

            NSDictionary *bar = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithDouble:position],BAR_POSITION,
                                 [NSNumber numberWithDouble:height],BAR_HEIGHT,
                                 colors[0],COLOR,
                                 currencyCategories[i],CATEGORY,
                                 nil];
            [self.data addObject:bar];

        }

    }
    else if ([graphType isEqualToString:@"DistanceTravelled"])
    {

        for (int i = 0; i < count; i++)
        {
            TotalValueCalculator *calc = [[TotalValueCalculator alloc] initWithString:[[appDelegate.projects objectAtIndex:i] name]];
            NSString *totalValueString = [calc compareProjectDistance];
            double totalValue = [totalValueString doubleValue];

            bar_heights[i] = totalValue;
            categories[i] = [[appDelegate.projects objectAtIndex:i] name];
        }

        axisEnd = findMax(bar_heights, count) + ((findMax(bar_heights, count)) / 10);

        UIColor *colors[] = {
            [UIColor colorWithRed:236/255.0 green:139/255.0 blue:34/255.0 alpha:1], 
            nil};

        for (int i = 0; i < [appDelegate.projects count] ; i++){
            double position = i*7; //Bars will be 7 pts away from each other
            double height = bar_heights[i];

            NSDictionary *bar = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithDouble:position],BAR_POSITION,
                                 [NSNumber numberWithDouble:height],BAR_HEIGHT,
                                 colors[0],COLOR,
                                 categories[i],CATEGORY,
                                 nil];
            [self.data addObject:bar];

        }

    }
    else if ([graphType isEqualToString:@"FuelCostProject"])
    {

        for (int i = 0; i < count; i++)
        {
            TotalValueCalculator *calc = [[TotalValueCalculator alloc] initWithString:[[appDelegate.projects objectAtIndex:i] name]];
            NSString *totalValueString = [calc compareProjectFuel];
            double totalValue = [totalValueString doubleValue];

            bar_heights[i] = totalValue;
            categories[i] = [[appDelegate.projects objectAtIndex:i] name];
        }

        axisEnd = findMax(bar_heights, count) + ((findMax(bar_heights, count)) / 10);

        UIColor *colors[] = {
            [UIColor colorWithRed:236/255.0 green:139/255.0 blue:34/255.0 alpha:1], 
            nil};

        for (int i = 0; i < [appDelegate.projects count] ; i++){
            double position = i*7; //Bars will be 7 pts away from each other
            double height = bar_heights[i];

            NSDictionary *bar = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithDouble:position],BAR_POSITION,
                                 [NSNumber numberWithDouble:height],BAR_HEIGHT,
                                 colors[0],COLOR,
                                 categories[i],CATEGORY,
                                 nil];
            [self.data addObject:bar];

        }

    }
    else if ([graphType isEqualToString:@"FuelCostCurrency"])
    {

        for (int i = 0; i < currencyCount; i++)
        {
            TotalValueCalculator *calc = [[TotalValueCalculator alloc] initWithString:[[appDelegate.currencies objectAtIndex:i] shortName]];
            NSString *totalValueString = [calc compareCurrencyFuel];
            double totalValue = [totalValueString doubleValue];

            currencyBar_heights[i] = totalValue;
            currencyCategories[i] = [[appDelegate.currencies objectAtIndex:i] shortName];
        }

        axisEnd = findMax(currencyBar_heights, currencyCount) + ((findMax(currencyBar_heights, currencyCount)) / 10);

        UIColor *colors[] = {
            [UIColor colorWithRed:236/255.0 green:139/255.0 blue:34/255.0 alpha:1], 
            nil};

        for (int i = 0; i < [appDelegate.currencies count] ; i++){
            double position = i*7; //Bars will be 7 pts away from each other
            double height = currencyBar_heights[i];

            NSDictionary *bar = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithDouble:position],BAR_POSITION,
                                 [NSNumber numberWithDouble:height],BAR_HEIGHT,
                                 colors[0],COLOR,
                                 currencyCategories[i],CATEGORY,
                                 nil];
            [self.data addObject:bar];

        }

    }

            [self generateBarPlot];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

我知道那里有很多，但我一生都无法弄清楚如何让这个条形图显示浮点值（对于条形高度）？我在这上面花了很多时间，现在我开始绝望了。

有谁知道如何做到这一点？图表接收的值肯定是浮点值。

任何帮助都将不胜感激..

非常感谢，

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:00:56.583

中的`bar_heights`数组`-viewDidLoad`声明为`int`. 由于数据值在放入您传递给绘图数据源的字典结构之前存储在这里，因此值的任何小数部分都会丢失。

# c# - 带有 linq 的 C# 实体框架返回空引用

> ID：11628719
> 
> 赞同：7
> 
> 时间：2012-07-24T10:16:44.267
> 
> 标签：c#, linq, frameworks, entity

我对 C# 中的实体框架有疑问。我有 2 个实体，用户和用户角色。它们通过关系用户 *-> 1 UserRole 联系在一起

每当我在函数中使用此查询时：

```
User user = context.User.Where(i => i.id == id).FirstOrDefault();
return user.UserRole.accessLevel; 
```

查询返回用户，但 UserRole 为空。User表有与UserRole的id相关的roleId，调试时roleId的值是正确的，虽然UserRole实体为null。这很奇怪，因为以前从未发生过……

我已经确保我在模型和数据库中的关系是正确的。我已将正确的行添加到数据库中。

***编辑：***

抱歉，我应该提到我使用自定义可测试数据库控制器：

```
public class DBController : IUnitOfWork
{
    readonly ObjectContext context;
    const string ConnectionStringName = "MarketPlaceDBEntities";

    public DBController()
    {
        var connectionString =
        ConfigurationManager
            .ConnectionStrings[ConnectionStringName]
            .ConnectionString;
        context = new ObjectContext(connectionString);
    }

    public void Commit()
    {
        context.SaveChanges();
    }

    public IObjectSet<Category> Category
    {
        get { return context.CreateObjectSet<Category>(); }
    }
    public IObjectSet<ItemComment> ItemComment 
    {
        get { return context.CreateObjectSet<ItemComment>(); }
    }
    public IObjectSet<ItemRating> ItemRating 
    {
        get { return context.CreateObjectSet<ItemRating>(); }
    }
    public IObjectSet<Item> Item 
    {
        get { return context.CreateObjectSet<Item>(); }
    }
    public IObjectSet<ItemSale> ItemSale 
    {
        get { return context.CreateObjectSet<ItemSale>(); }
    }
    public IObjectSet<ItemScreenshot> ItemScreenshot 
    {
        get { return context.CreateObjectSet<ItemScreenshot>(); }
    }
    public IObjectSet<UserRole> UserRole 
    {
        get { return context.CreateObjectSet<UserRole>(); }
    }
    public IObjectSet<User> User 
    {
        get { return context.CreateObjectSet<User>(); }
    }
} 
```

我通过它进行操作。也许它与我的概率有关。

```
interface IUnitOfWork
{
    IObjectSet<Category> Category { get; }
    IObjectSet<ItemComment> ItemComment { get; }
    IObjectSet<ItemRating> ItemRating { get; }
    IObjectSet<Item> Item { get; }
    IObjectSet<ItemSale> ItemSale { get; }
    IObjectSet<ItemScreenshot> ItemScreenshot { get; }
    IObjectSet<UserRole> UserRole { get; }
    IObjectSet<User> User { get; }
    void Commit();
} 
```

我以前有这整件事，但不知道为什么会出错..

**编辑2：**

解决了！感谢 RicoSuter。

在我的数据库控制器的构造函数中启用延迟加载解决了这个问题。我以为它已经启用了，因为它在数据库模型中设置为true，但是看起来在创建新上下文时，您必须再次手动启用它。

```
public DBController()
{
    var connectionString =
    ConfigurationManager
        .ConnectionStrings[ConnectionStringName]
        .ConnectionString;
    context = new ObjectContext(connectionString);
    context.ContextOptions.LazyLoadingEnabled = true;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T10:19:51.927

尝试急切地加载`UserRole`（加入）：

```
context.User.Include("UserRole").Where(i => i.id == id).FirstOrDefault(); 
```

或先启用延迟加载：

```
context.ContextOptions.LazyLoadingEnabled = true;
context.User.Where(i => i.id == id).FirstOrDefault(); 
```

`UserRole`否则与您的数据库中的 a 没有关系...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:22:30.677

最简单的你可以这样做：

```
UserRole user = context.User.Where(i => i.id == id).Select(i => i.UserRole);
return user.accessLevel; 
```

**编辑：**

`User`假设您已经在和之间建立了关系`UserRole`

```
User user = context.User.Where(i => i.id == id).FirstOrDefault();
UserRole role = context.UserRole.Where(i => user.Contains(i.id)).FirstOrDefault();
return role.accessLevel; 
```

`User`假设你在和之间没有关系`UserRole`

```
int roleid = Convert.ToInt32(context.User.Where(i => i.id == id).Select(i => i.roleid));
UserRole role = context.UserRole.Where(i => i.id == roleid).FirstOrDefault();
return role.accessLevel; 
```

另外，如果您有关系但看不到`UserRole`下面，请`User`尝试将其添加到您的模型中

```
public IDisposable User()
{
    YourDataContext context = new YourDataContext();
    Type ct = context.User.GetType();
    return (IDisposable)(ct);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:44:23.403

尝试这个

`User user = context.User.Where(i => i.id == id).FirstOrDefault(); return user==null?null:user.UserRole.accessLevel;`

# sql-server - 当我在存储过程中更改它时，带有空值的参数不会改变

> ID：11628725
> 
> 赞同：0
> 
> 时间：2012-07-24T10:16:59.160
> 
> 标签：sql-server, tsql

我有一个如下所示的存储过程；当我通过时`NULL`，`Gkol`我希望将其更改为尽可能少的数量（存在于表中），但它没有发生 - 为什么会这样？

```
ALTER PROCEDURE sp_vUnitsUnitTejariGetFilteredUnitDetail
    (@UnitFB BIT,
     @UnitWithCooking BIT,
     @MMofidFrom FLOAT = NULL,
     @MMofidTo FLOAT = NULL,
     @GKolFrom FLOAT = NULL,
     @GKolTo FLOAT = NULL)
AS
BEGIN
    DECLARE @MMofidCalculative BIT
    DECLARE @GKolCalculative BIT

    IF (@MMofidFrom IS NULL)
        SELECT @MMofidFrom = MIN(MMofid) 
        FROM vw_PSA_UnitsUnitTejari

    IF (@MMofidTo IS NULL)
        SELECT @MMofidTo = MAX(MMofid) 
        FROM vw_PSA_UnitsUnitTejari

    IF (@GKolFrom IS NULL)
        SELECT @GKolFrom = MIN(GKol) 
        FROM vw_PSA_UnitsUnitTejari

    IF (@GKolTo IS NOT NULL)
        SELECT @GKolTo = MAX(GKol) 
        FROM vw_PSA_UnitsUnitTejari

    SELECT * 
    FROM vw_PSA_UnitsUnitTejari 
    WHERE UnitTypeID = 1
      AND UnitStateID = 1
      AND UnitFB = ISNULL(@UnitFB, UnitFB)
      AND UnitWithCooking = ISNULL(@UnitWithCooking, UnitWithCooking)
      AND MMofid BETWEEN @MMofidFrom AND @MMofidTo
      AND GKol BETWEEN @GKolFrom AND @GKolTo
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:58:30.000

我弄清楚为什么它不起作用，问题出在最后一个 if 块

```
if(@GKolTo is not null) 
```

我删除了NOT，一切顺利，谢谢大家

# nunit - 如何将 nunit 结果从詹金斯发送到电子邮件

> ID：11628726
> 
> 赞同：2
> 
> 时间：2012-07-24T10:16:58.607
> 
> 标签：nunit, jenkins

我已经设置我的詹金斯在 nunit 测试通过后发送电子邮件。如何配置邮件正文包含来自 TestResult.xml 文件的 nunit 结果？也许詹金斯有一些插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:25:38.433

我认为您应该看看[Email-ext 插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)，它可以让您决定要发送的内容（并在您的 cae 中附加 NUnit 报告）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:42:11.477

我找到了适合我的解决方案：使用此处描述的 Jelly 脚本：

[https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)

# c# - 将多个报告导出到 Excel

> ID：11628727
> 
> 赞同：0
> 
> 时间：2012-07-24T10:17:01.493
> 
> 标签：c#, .net, visual-studio-2010, reporting

我有 ac# windows 窗体，可以打开一个报表查看器（使用 Visual Studio 报表）。显示的第一个报告是概述报告，显示按年份划分的各种数据。然后可以单击每年并打开钻取报告，将日期作为参数传递，其中显示更详细的视图。

有没有办法将此概览报告及其钻取报告导出到一个 Excel 工作簿，并将报告分隔为工作表？我可以单独保存每个报告，但我需要选择将它们全部自动保存到一个工作簿中。因此，excel 文件看起来与它在报表查看器上的外观基本相同。我到处搜索并没有找到明确的解决方案。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:26:43.577

我不相信，您可能需要编写自己的 xls 编写器才能使其正常工作。

# phone-number - 从数据库中提取（国际）手机

> ID：11628729
> 
> 赞同：0
> 
> 时间：2012-07-24T10:17:07.857
> 
> 标签：phone-number

有没有从数据库中提取国际手机的简单方法？有没有人在午夜上网时遇到过解决这个问题的开源软件或资源？

欢迎大家指点，谢谢！

更新：

*1：我有一个包含电话号码的数据库，想遍历所有电话号码，只提取或保存国际移动（手机）电话。任何开源软件或脚本或 int。实现这一目标的移动列表？

*2：找到了一些列表，可以合并用于验证手机的脚本。

*   [http://en.wikipedia.org/wiki/International_mobile_phone_codes](http://en.wikipedia.org/wiki/International_mobile_phone_codes)

*   [http://pastebin.com/ziYj1uy4](http://pastebin.com/ziYj1uy4)

*3：用于解析、格式化、存储和验证国际电话号码的 Google 通用 Java、C++ 和 Javascript 库：[http ://code.google.com/p/libphonenumber/](http://code.google.com/p/libphonenumber/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T12:12:05.140

如果假设您来自印度，那么 +91 国家代码以外的所有手机号码对您来说都是国际的，所以我冒昧地为您编写此查询

```
select * from table_name where mobile_number not in (select mobile_number from table_name where mobile_number like '+91%') 
```

这将为您提供表格中的数据，而不是本地号码

让我知道它是否对您有用。

# c# - SQL 查询耗时较长

> ID：11628732
> 
> 赞同：-1
> 
> 时间：2012-07-24T10:17:13.007
> 
> 标签：c#, sql-server-2008, stored-procedures, ado.net

我正在尝试从 C# 应用程序在 SQL Server 2008 上执行存储过程。这需要很多时间，我的应用程序“没有响应”。我的存储过程：

```
ALTER PROCEDURE [dbo].[PROC066]
@date_1 date,
@date_2 date
AS
SELECT
RTRIM(tt1.[Org]) as 'Org', 
RTRIM(tt1.[CustomerHQ]) as 'Customer',
RTRIM(tt1.[Customer]) as 'ShipTo', 
RTRIM(tt1.[Date]) as 'Date', 
RTRIM(tt2.Clean) as 'Clean', 
RTRIM(tt1.[PO number]) as 'PONumber',
RTRIM(tt1.[GCAS]) as 'GCAS',
'Description' = (SELECT DISTINCT [Description] FROM tDeploymentDB WHERE tDeploymentDB.[Item Code] = tt1.[GCAS]),
RTRIM(tt1.NQTY) as 'NQTY',
RTRIM(tt1.[Dummy]) as 'Dummy', 
RTRIM(tt1.[MOQ]) as 'MOQ', 
RTRIM(tt1.[Inactive]) as 'Inactive', 
RTRIM(tt1.[Allocation]) as 'Allocation', 
RTRIM(tt1.[MultiSector]) as 'MultiSector',
RTRIM(tt2.Pallet_Checked) as 'FullPallets',
RTRIM(tt2.FullTruck_Checked) as 'Full_Truck',
FROM tCleanOrderTracking_prod as tt1, tCleanOrderTracking_HDR_prod as tt2
WHERE 
SUBSTRING(RTRIM(tt1.[PO number]), 6, LEN(RTRIM(tt1.[PO number])) - 5) = 
RTRIM(tt2.CustomerOrderNumber) AND 
tt1.[Date] = @date_1 AND tt1.[Date] <= @date_2
ORDER BY Org, [PO Number] 
```

如果我尝试在 SQL Server Management Studio 上执行此过程 - 需要 5-7 秒。但是通过 C# 我不能执行这个查询。我试图在查询中删除这一行

```
tt1.[Date] = @date_1 AND tt1.[Date] <= @date_2 
```

之后它工作正常..我的应用程序需要 5 秒才能执行。我也试图重写这一行

```
tt1.[Date] BETWEEN @date_1 AND @date_2 
```

没有结果！我在查询 tCleanOrderTracking_prod 中的主表有大约 40500 条记录。我还能尝试什么？我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:20:57.267

查看[如何阅读 SQL Server 执行计划](http://www.mssqltips.com/sqlservertip/1873/how-to-read-sql-server-graphical-query-execution-plans/)，它将向您展示如何分析您自己的 SQL 查询并改进速度和执行性能。

您想针对您的查询运行它并查看它是如何执行的，以便您可以添加索引/更改连接等。

该`Trim`函数也是一个计算量很大的函数，它不仅仅是从行中选择，而是一个处理命令。在 40,000 上运行它可能会受到很大的打击。考虑只在您需要它的列上执行它，并在插入时间而不是选择时间执行它（然后您执行一次，而不是一百万次；））。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T10:22:13.073

您应该考虑从选择查询中删除修剪功能。这样做需要 SQL Server 方面付出很多努力。您应该在插入它们之前修剪这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:26:57.410

从 where 条件中删除修剪函数，因为在执行它时首先对所有行应用函数，然后在执行 where 条件后影响性能。

# facebook - FQL - 按like_count 排序相册中的照片

> ID：11628740
> 
> 赞同：1
> 
> 时间：2012-07-24T10:18:04.663
> 
> 标签：facebook, facebook-fql

我正在尝试使用以下查询获取按*FQL*中的类似计数排序的*Facebook*相册的照片：

 *```
SELECT like_info, object_id FROM photo WHERE aid="xxxxxxxxxx_xxxx" ORDER BY like_info.like_count desc 
```

但我得到一个错误`(#602) like_count is not a member of the like_info scalar.`

```
SELECT like_info, object_id FROM photo WHERE aid="xxxxxxxxxx_xxxx" ORDER BY like_info desc 
```

有诀窍，但我不知道为什么：*like_info* 不是一个对象吗？可以使用对象的成员对查询进行排序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T04:06:54.487

只需使用 ORDER BY like_info。不要忘记设置 LIMIT，否则查询可能会因大量图片而崩溃：

```
SELECT like_info, object_id FROM photo WHERE aid="20531316728_324257" ORDER BY like_info desc LIMIT 10 
```

[在 Facebook API 资源管理器中运行](https://developers.facebook.com/tools/explorer/?fql=SELECT%20like_info,%20object_id%20FROM%20photo%20WHERE%20aid=%2220531316728_324257%22%20ORDER%20BY%20like_info%20desc%20LIMIT%2010)*

# android - ArrayAdapter 、 BaseAdapter 和 ListAdapter 有什么区别

> ID：11628742
> 
> 赞同：39
> 
> 时间：2012-07-24T10:18:19.140
> 
> 标签：android, android-arrayadapter, listadapter, baseadapter

你能告诉我和之间`ArrayAdapter`的区别吗？`BaseAdapter``ListAdapter`

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-24T10:24:37.393

**`BaseAdapter`**顾名思义，它是所有适配器的基类。

当您扩展 Base 适配器类时，您需要实现所有方法，例如`getCount()`，`getId()`等等。

**`ArrayAdapter`**是一个可以处理数据数组的类。您只需要覆盖`getview()`方法。

**`ListAdapter`**是一个由具体适配器类实现的接口。

`BaseAdapter`是抽象类，而`ArrayAdapter`和`ListAdapter`是具体类。

`ArrayAdapter`和`ListAdapter`类的开发是因为通常我们处理数组数据集和列表数据集。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-07-24T10:25:28.507

**列表适配器**

它是一个扩展 Adapter 的接口，它是 ListView 和支持列表的数据之间的桥梁。

**基础适配器**

可以在 ListView（通过实现专门的 ListAdapter 接口}和 Spinner（通过实现专门的 SpinnerAdapter 接口）中使用的 Adapter 通用实现的通用基类。

**阵列适配器**

由任意对象数组支持的具体 BaseAdapter。

请参考以下链接

1.  [列表适配器](http://developer.android.com/reference/android/widget/ListAdapter.html)

2.  [基础适配器](http://developer.android.com/reference/android/widget/BaseAdapter.html)

3.  [阵列适配器](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

# google-apps-script - 使用 TextBox 和 onKeyUp 和 onKeyDown 进行即时搜索

> ID：11628743
> 
> 赞同：0
> 
> 时间：2012-07-24T10:18:28.220
> 
> 标签：google-apps-script

我想在您在 TextBox 中键入时立即制作用于搜索电子表格的 Google Apps Script webapp。

我现在使用的实现如下。对于每个按键事件，新搜索都使用当前搜索字符串启动。我在 onKeyUp 正在调用的函数上使用延迟，如果调用 onKeyDown，我会尝试终止前一个函数打电话，然后用新的。这有时有效，但搜索需要不同的时间才能完成，所以最后一个完成的并不总是正确的。

我不知道如何在 Google Apps 脚本中解决此任务。这可以使用类似这样的东西来实现，但这些功能不可用：

```
var timer;
function up(){
  setTimeout(mySpreadsheetSearchFunction, 500);
}
function down(){
  clearTimeout (timer);
} 
```

这是当前实现的代码无法正常工作：

```
function up(){
  var cache = CacheService.getPrivateCache();
  var now = parseInt(cache.get('iterate'));
  Utilities.sleep(500);
  if(parseInt(cache.get('iterate')) !== parseInt(now)){
    return;
  }else{
    search();
  }
  showInGui();
}

function down(){
  var cache = CacheService.getPrivateCache();
  cache.put('iterate', 1+parseInt(cache.get('iterate')));
} 
```

CacheService 可能是这项工作的错误工具，还有什么更好的方法？这是实现这样的事情的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:51:12.397

不确定您是否必须使用缓存功能才能获得快速结果...我制作了这样一个运行良好的脚本，我一直使用它的变体；-) 您可以在[此测试表上对其进行测试](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dENrU0hldDNLeF9lUjUteDNyWlJkY2c)

这是它的工作原理，脚本可能很长，但仅查看处理程序部分（单击）

在其他版本中，我在函数之外读取电子表格，因此数据数组成为全局变量，主要是为了限制电子表格调用的数量（有时会达到此版本的配额限制）

```
// G. Variables
var sh = SpreadsheetApp.getActiveSheet();
var ss = SpreadsheetApp.getActiveSpreadsheet();
var lastrow = ss.getLastRow();
// ...
function onOpen() {
  var menuEntries = [ {name: "Search GUI", functionName: "searchUI"},
                     ];
  ss.addMenu("Search Utilities",menuEntries);// custom menu
}
// Build a simple UI to enter search item and show results + activate result's row
function searchUI() {
  var app = UiApp.createApplication().setHeight(130).setWidth(400);
  app.setTitle("Search by name / lastname / adress");
  var panel = app.createVerticalPanel();
  var txtBox = app.createTextBox().setFocus(true);
  var label=app.createLabel(" Item to search for :")
  panel.add(label);
  txtBox.setId("item").setName("item");
  var label0=app.createLabel("Row").setWidth("40");
  var label1=app.createLabel("Name").setWidth("120");
  var label2=app.createLabel("Lastname").setWidth("120");
  var label3=app.createLabel("Street").setWidth("120");
  var hpanel = app.createHorizontalPanel();
  hpanel.add(label0).add(label1).add(label2).add(label3)
//
  var txt0=app.createTextBox().setId("lab0").setName("0").setWidth("40");
  var txt1=app.createTextBox().setId("lab1").setName("txt1").setWidth("120");
  var txt2=app.createTextBox().setId("lab2").setName("txt2").setWidth("120");
  var txt3=app.createTextBox().setId("lab3").setName("txt3").setWidth("120");
  var hpanel2 = app.createHorizontalPanel();
  hpanel2.add(txt0).add(txt1).add(txt2).add(txt3)
  var hidden = app.createHidden().setName("hidden").setId("hidden");
  var subbtn = app.createButton("next ?").setId("next").setWidth("250");
  panel.add(txtBox);
  panel.add(subbtn);
  panel.add(hidden);
  panel.add(hpanel);
  panel.add(hpanel2);
  var keyHandler = app.createServerHandler("click");
  txtBox.addKeyUpHandler(keyHandler)
  keyHandler.addCallbackElement(panel);
//
  var submitHandler = app.createServerHandler("next");
  subbtn.addClickHandler(submitHandler);
  submitHandler.addCallbackElement(panel);
//
  app.add(panel);  
  ss.show(app);
  }
//
function click(e){
   var row=ss.getActiveRange().getRowIndex();              
   var app = UiApp.getActiveApplication();
   var txtBox = app.getElementById("item");
   var subbtn = app.getElementById("next").setText("next ?")      
   var txt0=app.getElementById("lab0").setText('--');
   var txt1=app.getElementById("lab1").setText('no match').setStyleAttribute("background", "white");// default value to start with
   var txt2=app.getElementById("lab2").setText('');
   var txt3=app.getElementById("lab3").setText('');
   var item=e.parameter.item.toLowerCase(); // item to search for
   var hidden=app.getElementById("hidden")                  
   var data = sh.getRange(2,2,lastrow,3).getValues();// get the 3 columns of data
       for(nn=0;nn<data.length;++nn){ ;// iterate trough
     Logger.log(data[nn])
         if(data[nn].toString().toLowerCase().match(item.toString())==item.toString()&&item!=''){;// if a match is found in one of the 3 fields, break the loop and show results
          txt0.setText(nn+2);
          txt1.setText(data[nn][0]).setStyleAttribute("background", "cyan");
          txt2.setText(data[nn][1]);
          txt3.setText(data[nn][2]);
          sh.getRange(nn+2,2).activate();
          subbtn.setText("found '"+item+"' in row "+Number(nn+2)+", next ?");
          hidden.setValue(nn.toString())                                                                                  
          break
          }
      }
return app    ;// update UI
}
function next(e){
   var row=ss.getActiveRange().getRowIndex();              
   var app = UiApp.getActiveApplication();
   var txtBox = app.getElementById("item");
   var subbtn = app.getElementById("next").setText("no other match")      
   var hidden=app.getElementById("hidden");                  
   var start=Number(e.parameter.hidden)+1;//returns the last search index stored in the UI
   var item=e.parameter.item.toLowerCase(); // item to search for
   var txt0=app.getElementById("lab0");
   var txt1=app.getElementById("lab1").setStyleAttribute("background", "yellow");
   var txt2=app.getElementById("lab2");
   var txt3=app.getElementById("lab3");
   var data = sh.getRange(2,2,lastrow,3).getValues();// get the 3 columns of data
       for(nn=start;nn<data.length;++nn){ ;// iterate trough
         if(data[nn].toString().toLowerCase().match(item.toString())==item.toString()&&item!=''){;// if a match is found in one of the 3 fields, break the loop and show results
          txt0.setText(nn+2);
          txt1.setText(data[nn][0]).setStyleAttribute("background", "cyan");
          txt2.setText(data[nn][1]);
          txt3.setText(data[nn][2]);
          sh.getRange(nn+2,2).activate();
          subbtn.setText("found '"+item+"' in row "+Number(nn+2)+", next ?");                                                                                               
          hidden.setValue(nn.toString())                                                                                  
          break
          }
      }
return app    ;// update UI
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:01:38.210

使用 HtmlService 您可以改为在纯 HTML 和 JavaScript 中实现它。这使您能够加载电子表格数据一次，然后执行搜索客户端，那里的性能应该更好。

# database - 使用 Hadoop 对大型固定格式文件执行 DML 操作

> ID：11628749
> 
> 赞同：0
> 
> 时间：2012-07-24T10:19:10.847
> 
> 标签：database, file-io, hadoop

我们有一个使用 MySQL 数据库作为数据存储的产品。数据存储包含大量数据。我们面临的问题是应用程序的响应时间很慢。数据库查询非常基本，连接非常简单（如果有的话）。一些资深员工表示，响应时间缓慢的根本原因是对庞大数据存储的数据库操作。

我们公司的另一个团队过去曾参与过一个项目，他们使用 Hadoop 处理大型固定格式文件，并将这些文件的内容转储到数据库表中。借用这个项目，一些团队成员觉得我们可以从使用 MySQL 数据库迁移到简单的固定格式文件来保存数据。将有一个文件对应于数据库中的每个表。然后，我们可以构建另一个数据交互层，提供对这些文件中的内容执行 DML 操作的接口。该层将使用 Hadoop 和 MapReduce 编程模型开发。

在这一点上，我想到了几个问题。1\. 问题陈述是否适合使用 Hadoop 解决的问题类型？2\. 应用程序将如何要求数据交互层获取/更新/删除所需的数据？据我了解，包含数据的文件将驻留在 HDFS 上。我们将生成一个 Hadoop 作业，它将处理所需的文件（类似于 db 中的表）并获取所需的数据。此数据将写入 HDFS 上的输出文件。我们将不得不解析这个文件以获得所需的内容。3\. 使用固定格式文件并用 Hadoop 处理它们的方法真的能解决问题吗？

我已经设法用两台 Ubuntu 机器建立了一个简单的节点集群，但是在玩了一段时间 Hadoop 之后，我觉得问题陈述不适合 Hadoop。我可能完全错了，因此想知道 Hadoop 是否适合这种情况，还是只是浪费时间，因为问题陈述与 Hadoop 的含义不符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:03:49.307

我建议直接去 Hive (http://hive.apache.org/)。它是构建在 Hadoop MR 之上的 SQL 引擎/数据仓库。简而言之 - 它获得了 Hadoop 可扩展性和 hadoop 高延迟。
我会考虑在那里存储大量数据，进行所有必需的转换，并且只将汇总数据移动到 MySQL 以服务查询。通常将用户请求转换为配置单元查询并不是一个好主意——它们太慢了，并行运行作业的能力并非微不足道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:55:00.513

如果您计划更频繁地更新数据，那么直接存储在 hadoop 中可能不是您的好选择。要在 hadoop 中更新文件，您可能必须重写文件，然后删除旧文件并在 hdfs 中复制新文件。

但是，如果您只是搜索和加入数据，那么它是一个不错的选择。如果您使用配置单元，那么您可以进行一些查询，如 sql.

在 hadoop 中，您的工作流程可能如下所述：

1.  您将为查询运行 hadoop 作业。

2.  您的 hadoop 程序将解析查询并执行一些作业以根据您的查询和输入参数加入和读取文件。

3.  您的输出将在 hdfs 中生成。

4.  您将输出复制到本地文件系统。然后将输出显示到您的程序。

# iphone - 相机在phonegap中不起作用

> ID：11628753
> 
> 赞同：2
> 
> 时间：2012-07-24T10:19:15.363
> 
> 标签：iphone, ios, cordova

我正在我的 phonegap 应用程序中集成相机来录制视频和捕捉图像。我正在为 iPhone 使用 Phonegap 1.5.0。

要捕获我正在使用此代码的图像：

```
 function capturePhoto() { 

   navigator.camera.getPicture(onPhotoDataSuccess, fail, { quality: 30 }); 
   } 
```

单击按钮时，我正在调用上面的函数，但它什么也没做。有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:41:00.483

我最近用 Cordova 试过了，效果很好。请检查代码 -

```
<script type="text/javascript">

document.addEventListener("deviceready",onDeviceReady,false);

function onDeviceReady() {

console.log("CORDOVA IS WORKING:::");
}

        function capturePhoto()
{
navigator.camera.getPicture(onSuccess, onFail, { quality: 50, 
destinationType: Camera.DestinationType.FILE_URI }); 
}

function onSuccess(imageURI) {
var image = document.getElementById('myImage');
image.src = imageURI;
}

function onFail(message) {
alert('Failed because: ' + message);
}    
</script> 
```

# servlets - 在 glassfish 中导入 derby 驱动程序的问题

> ID：11628759
> 
> 赞同：1
> 
> 时间：2012-07-24T10:19:38.767
> 
> 标签：servlets, netbeans, jdbc, jar, glassfish

祝大家有美好的一天，

我在让 Glassfish 3.1.2 看到一些进口的罐子时遇到了一些问题。因为这是我的研究生项目，所以我有限制。除了 Glassfish、Netbeans，我不能使用其他任何东西，也不能使用 Maven、Hibernate、Ear 或其他任何东西。

我正在使用嵌入式 Derby 驱动程序。（我可以使用另一个数据库，但在我的试验中问题仍然存在）。

我编写了一些普通的 java 代码来连接数据库：

```
 try{
        Connection c   = DriverManager.getConnection(URL, USER, PWD);
        Statement st   = c.createStatement();                
        st.executeUpdate("CREATE TABLE Users" +
                         " (ACCOUNT VARCHAR(20) PRIMARY KEY," +
                         " PWD VARCHAR(20) NOT NULL," +
                         " USERTYPE INTEGER NOT NULL)");

                       ...

       }
       catch (SQLException x){
         System.out.println(x);  
       } 
```

它很丑，它不使用连接池，它可以工作。我稍后会使用它们。显然我必须将 derbyclient.jar 添加到库中。

当我尝试在 servlet 中使用此方法时出现问题：

```
protected void processRequest(HttpServletRequest req, HttpServletResponse res)
        throws ServletException, IOException {

    try{           
        DriverManager.registerDriver(org.apache.derby.jdbc.ClientDriver);            
        Connection c = DriverManager.getConnection(dbUsr, pwd, url);            
        Statement st = c.createStatement();            
        ResultSet rs = st.executeQuery(query);

                         ...

       }catch (SQLException e){
        ServletException e1 = new ServletException(e.getMessage());
        throw e1;
    } 
```

我无法编译 servlet，因为“包 org.apache.derby.jdbc 不存在”。

我可以提供更多信息（20 多个小时的阅读和不成功的试验）：

*   servlet 和 java 代码在同一个项目中，因此它们应该都能看到 derbyclient.jar。
*   当我编写 org.apache.berby 时，netbeans 向我展示了用于自动完成的包导航器，因此它知道某个地方有一个 jar。
*   我试图将 derbyclient.jar 放入：
    *   Glassfish/glassfish/domains/domain1/lib
    *   Glassfish/glassfish/domains/domain1/lib/ext
    *   Glassfish/glassfish/lib
*   在没有驱动程序注册的情况下尝试，java 代码没有它就可以工作，但我得到“javax.servlet.ServletException：找不到适合应用程序的驱动程序”。我觉得有道理。

我已经黔驴技穷了。有人愿意帮忙吗？

编辑：

昨天我从老师那里得到消息：她责怪 Netbeans IDE 丢失了 jar 的踪迹。这似乎是一个已知的错误。

我受到热烈的鼓励，转而使用 tomcat 服务器。我一定会尝试的，但我会继续努力解决这个问题。还有什么好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:10:51.557

" `No suitable driver found`" 通常意味着您提供的用于连接的 JDBC URL 的语法不正确。或者根本没有加载驱动程序。

`Class.forName`在连接到数据库之前，您必须使用加载驱动程序。德比的网址是：

```
Class.forName("org.apache.derby.jdbc.ClientDriver"); 
```

有关 Derby 的更多详细信息，请查看[文档](http://db.apache.org/derby/papers/DerbyTut/embedded_intro.html)

还要检查你`derby.jar`的类路径中是否有。我建议将 derby.jar 放在`/WEB-INF/lib`项目目录的物理位置。然后 IDE 将负责其余的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:00:47.267

您（通常）不应该自己向 DriverManager 注册驱动程序，这是 Driver 实现的责任。对于 JDBC 3.0 及更早版本（Java 5 及更早版本），您需要加载该类以使其注册自身：

```
Class.forName("org.apache.derby.jdbc.ClientDriver") 
```

当类被加载时，驱动程序将自己注册到 DriverManager。

对于 JDBC 4.0 兼容驱动程序（Java 6 和 7），您甚至不需要这样做，因为 JDBC 4.x 使用 ServiceLoader 机制，并且每个兼容驱动程序都会`META-INF/services/java.sql.Driver`在其 jar 文件中的文件中列出其驱动程序实现。

所以一般来说你不应该**自己**调用'DriverManager.registerDriver(..)'。如果由于某种原因您确实需要自己在代码中注册驱动程序（例如，因为驱动程序实际上并没有自动向 DriverManager 注册自身），那么请确保实际的驱动程序也在您的编译路径（构建路径）上，并且不只是在您的应用程序服务器的 lib 文件夹中（这似乎是您的实际问题）。

还要记住，您需要注册 Driver 的实例，而不是类。所以你需要实例化它：

```
DriverManager.registerDriver(new org.apache.derby.jdbc.ClientDriver()); 
```

# java - 将子类对象添加到arraylist，同时不允许超类对象进入列表

> ID：11628760
> 
> 赞同：0
> 
> 时间：2012-07-24T10:19:39.323
> 
> 标签：java, generics

考虑以下;

```
class Mobile
{
}
class Android extends Mobile
{
}
class Iphone extends Mobile
{
} 
```

现在我必须创建一个“仅”接受子类对象而不是超类（移动）对象的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:22:33.117

覆盖`add()`和`addAll()`检查方法`object.getClass().getSimpleName()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T10:29:36.233

如果允许，您可以添加一个标记界面`Listable`：

```
interface Listable {
}    
class Mobile
{
}
class Android extends Mobile implements Listable
{
}
class Iphone extends Mobile implements Listable
{
} 
```

然后使用它来创建列表：

```
List<Listable> list = new ArrayList<Listable>(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T10:26:36.507

简而言之，没有。

总而言之，这是不合理的。首先，您必须知道您添加的是“参考”。对 Mobile 的引用可以指向 Mobile、Iphone 或 Android 的实例。您是想通过实例的实际类型来限制，还是想通过引用类型来限制？

受实例的实际类型限制：

```
Mobile a = new Mobile();
Mobile b = new Iphone();
Mobile c = new Android();

aList.add(a);  //reject
aList.add(b);  //allow
aList.add(c);  //allow 
```

按参考类型限制：

```
Mobile a = ...;
Iphone b = ...;
Android c = ...;

aList.add(a);  //reject
aList.add(b);  //allow
aList.add(c);  //allow 
```

对于第一种情况，您仍然可以扩展列表并在某些方法中进行检查（当然，类型检查发生在运行时，而不是编译时）

对于第二种情况，我认为您没有合理的方法来实现

# html - 将 DIV 包裹在内容周围并使其居中

> ID：11628764
> 
> 赞同：2
> 
> 时间：2012-07-24T10:19:54.817
> 
> 标签：html, css

我有一个关于 CSS 和 HTML 的问题。

我正在尝试将 DIV 包裹在另一个元素（在这种情况下为 UL）并让它包裹它，同时保持两者居中。作为一个额外的好处，我不能设置一个特定的宽度，因为包装 DIV 内的内容的宽度必须是动态的（因为这基本上是一个模板）。

我试过浮动，就包装而言，它可以工作，但事情最终要么向右或向左。

我对此有点疯狂，谷歌没有帮助！

提前致谢！

更新：

很抱歉不包括代码或图像。这就是我试图用图像说明的事情：

[UL宽度的一种状态](http://sandbox.auforia.com/misc/help1.png)

[宽度的另一种状态](http://sandbox.auforia.com/misc/help2.png)

包装 DIV*不能*拉伸容器的整个宽度。它必须环绕*UL*。

深灰色是 UL 周围的 DIV。无论内容的宽度如何，我都需要 DIV 包裹 UL（具有水平布局），因为就像我上面所说的，UL 的内容会不时变化。LI 中的文本将发生变化。

我也需要它居中。我已经让它与 float left 和 float right 一起工作，但我需要它*居中*。

这是我目前用于容器 DIV 以及 UL 和 LI 元素的代码：

```
#container{
    height: 100px;
    width: 500px;
    font-size: 14px;
    color: #grey;
    display: table-cell;
    vertical-align: middle;
}
#container ul{
    text-transform: uppercase;
    text-align: center;
    font-weight: bold;
}
#container li{
    background: url(checkmark.png) center left no-repeat;
    display: inline;
    padding-left: 20px;
    margin-right: 5px;
}
#container li:last-child{
    margin-right: 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T10:47:36.077

**更新**

我得到了它。这是你要找的吗？？[http://jsfiddle.net/vZNLJ/20/](http://jsfiddle.net/vZNLJ/20/)

```
#wrapper {
    background: #ccc;
    margin: 0 auto; /* to make the div center align to the browser */
    padding: 20px;
    width: 500px; /* set it to anything */
    text-align: center;
}
#wrapper ul {
    background: #aaa;
    padding: 10px;
    display: inline-block;
}
#wrapper ul li {
    color: #fff;
    display: inline-block;
    margin: 0 20px 0 0;
}
#wrapper ul li:last-child {
    color: #fff;
    display: inline-block;
    margin: 0;
}
```

```
<div id="wrapper">
    <ul>
        <li>Menu</li>
        <li>Menu</li>
        <li>Menu</li>
    </ul>
</div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-19T08:13:54.850

这是一个旧帖子，但您现在可以做的是：

```
<div style="display: flex; justify-content: center;">
    <div style="display: inline-block;">
        <input type="button" value="Example Button" />
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-28T07:19:52.997

问题不在于将 DIV 包裹在内容周围，而是让内容声明其实际大小，从而将 DIV 边界向外推。在处理这个问题时，有几件事情需要考虑。不仅来自现有的 UL 或 LI 标签，还来自 DIV 中的 DIV。

我使用自定义标签来帮助更清晰地描述布局。自定义标签是 DIV 标签，因此它们的属性必须由 CSS 操作才能获得正确的行为。

```
<layout-linear horizontal>
    <control-label>Label 1</control-label>
    <control-label>Label 2</control-label>
    <control-label>Label 3</control-label>
    <control-label>Label 4</control-label>
    <control-label>Label 5</control-label>
</layout-linear> 
```

这种布局表明内容 .. 控制标签标签 .. 将显示在水平行中。要让 layout-linear 标签的边框环绕 control-label 标签的内容，需要做几件事：

```
layout-linear[horizontal]
{
    display : block;
    box-sizing: border-box;
    border : 1px solid black;
    padding : 1px 1px 1px 1px;
    white-space: nowrap;
    width : 100%;
    clear : both;
    text-align : center;
} 
```

首先，box-sizing 属性必须设置为border-box。这将强制线性布局 (DIV) 标记环绕内容。Padding、Border、Margin 将确保显示一个空的 DIV 标签。显示空 DIV 标签的其他技巧是使用 or :after { content:.; 可见性：隐藏；}。

如果您不希望控制标签标签换行，请添加空格：nowrap。

当我讨论 control-label 标签的 float 属性时，我将讨论 text-align。

下一部分需要内部 DIV 标记（控制标签）正确指定它们的框大小类型和边框。

```
control-label
{
    display : inline-block;
    /* float : left; */
    box-sizing: border-box;
    border : 1px solid black;
    margin : 5px 5px 5px 5px;
    padding : 5px 5px 5px 5px;
} 
```

Display : inline-block，使控制标签标签从左到右流动。显示：块，将导致标签垂直堆叠。

Float 被特别注释掉以引起您的注意，float 会导致布局线性标签根据边距、填充和边框缩小到其最小的框大小。

要让控制标签从右到左流动，请将 text-align : right 添加到 layout-linear 标记。或者在这种特定情况下，设置 text-align : center。

同样，box-sizing 用于告诉控制标签 (DIV) 标记完全环绕它的内容。不仅是文本，还有由边框、填充和边距设置绘制的框的边缘。

CSS 属性的这种排列是导致外框和内框正确呈现或按预期呈现的原因。

快乐编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:30:36.883

您没有提供代码，但请看一下我刚刚设置的这个小提琴，这可能会有所帮助：

[http://jsfiddle.net/qXDJr/](http://jsfiddle.net/qXDJr/)

如果我误解了你的意思，请告诉我。示例代码将始终有助于将来参考。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T11:13:03.553

这可能会有所帮助。如果你不能设置宽度，你可以`align='center'`在`div`包装中添加`ul`

```
<div align="center">
<ul>
    <li>MenuItem</li>
    <li>MenuItem</li>
    <li>MenuItem</li>
</ul>
</div> 
```

# c++ - 为什么 c++11 中的 lambda 函数没有 f unction<> 类型？

> ID：11628765
> 
> 赞同：17
> 
> 时间：2012-07-24T10:20:04.913
> 
> 标签：c++, lambda, functional-programming, c++11

我正在玩 c++11 的功能特性。我觉得奇怪的一件事是 lambda 函数的类型实际上不是 function<> 类型。更重要的是，lambda 似乎并不能很好地与类型推断机制配合使用。

附件是一个小例子，我在其中测试了翻转函数的两个参数以添加两个整数。（我使用的编译器是 MinGW 下的 gcc 4.6.2。）在示例中，类型 for`addInt_f`已使用 function<> 显式定义，而`addInt_l`它是一个 lambda，其类型使用`auto`.

当我编译代码时，该`flip`函数可以接受 addInt 的显式类型定义版本，但不能接受 lambda 版本，并给出错误提示， `testCppBind.cpp:15:27: error: no matching function for call to 'flip(<lambda(int, int)>&)'`

接下来的几行表明，如果将 lambda 版本（以及“原始”版本）显式转换为适当的 function<> 类型，则可以接受它。

所以我的问题是：

1.  为什么 lambda 函数首先没有`function<>`类型？在这个小例子中，为什么不`addInt_l`具有`function<int (int,int)>`as 类型而不是具有不同的`lambda`类型？从函数式编程的角度来看，函数/函数对象和 lambda 有什么区别？

2.  如果有一个根本原因，这两者必须不同。我听说 lambda 可以转换为，`function<>`但它们是不同的。这是 C++11 的设计问题/缺陷、实现问题还是将两者区分开来有什么好处？似乎`addInt_l`单独的类型签名已经提供了关于函数的参数和返回类型的足够信息。

3.  有没有办法编写 lambda 以避免上述显式类型转换？

提前致谢。

```
 //-- testCppBind.cpp --
    #include <functional>
    using namespace std;
    using namespace std::placeholders;

    template <typename T1,typename T2, typename T3>
    function<T3 (T2, T1)> flip(function<T3 (T1, T2)> f) { return bind(f,_2,_1);}

    function<int (int,int)> addInt_f = [](int a,int b) -> int { return a + b;};
    auto addInt_l = [](int a,int b) -> int { return a + b;};

    int addInt0(int a, int b) { return a+b;}

    int main() {
      auto ff = flip(addInt_f);   //ok
      auto ff1 = flip(addInt_l);  //not ok
      auto ff2 = flip((function<int (int,int)>)addInt_l); //ok
      auto ff3 = flip((function<int (int,int)>)addInt0);  //ok

      return 0;
    } 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-24T10:41:38.507

`std::function`是一种用于*存储*任何类型的可调用对象的工具，无论其类型如何。为了做到这一点，它需要采用某种类型的擦除技术，这涉及一些开销。

任何可调用对象都可以隐式转换为 a `std::function`，这就是它通常无缝工作的原因。

我将重复以确保它变得清晰：`std::function`不仅仅是 lambdas 或函数指针：它适用于*任何*类型的可调用对象。这包括诸如 之类`struct some_callable { void operator()() {} };`的东西。这是一个简单的，但它可能是这样的：

```
struct some_polymorphic_callable {
    template <typename T>
    void operator()(T);
}; 
```

lambda 只是另一个可调用对象，类似于上述`some_callable`对象的实例。它可以存储在 a 中，`std::function`因为它是可调用的，但它没有`std::function`.

并且委员会计划在未来使 lambdas 成为多态的，即看起来像`some_polymorphic_callable`上面的 lambdas。`std::function`这样的 lambda 会是哪种类型？

* * *

现在...模板参数推导，或者隐式转换。选一个。这是 C++ 模板的规则。

要将 lambda 作为`std::function`参数传递，需要对其进行隐式转换。采用`std::function`参数意味着您选择隐式转换而不是类型推导。但是您的函数模板需要显式推导或提供签名。

解决方案？不要将您的来电者限制在`std::function`. 接受*任何类型的 callable*。

```
template <typename Fun>
auto flip(Fun&& f) -> decltype(std::bind(std::forward<Fun>(f),_2,_1))
{ return std::bind(std::forward<Fun>(f),_2,_1); } 
```

* * *

你现在可能在想我们*为什么*需要`std::function`那时。`std::function`为具有已知签名的可调用对象提供类型擦除。从本质上讲，这使得存储类型擦除的可调用对象和编写`virtual`接口变得有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T10:37:31.927

1.  因为`function<>`采用[类型擦除](http://en.wikipedia.org/wiki/Type_erasure)。这允许将几种不同的类似函数的类型存储在 a 中`function<>`，但会产生很小的运行时损失。类型擦除将实际类型（您的特定 lambda）隐藏在虚函数接口后面。
2.  这样做有一个好处：C++ 设计“公理”之一是绝不增加开销，除非确实需要。`auto`使用此设置，您在使用类型推断（使用或作为模板参数传递）时没有任何开销，但您仍然可以灵活地通过`function<>`. 另请注意，这`function<>`不是语言结构，而是标准库的一个组件，可以使用简单的语言特性来实现。
3.  不，但是您可以编写函数以仅采用函数的类型（语言构造）而不是`function<>`（库构造）的细节。当然，这使得实际写下返回类型变得更加困难，因为它不会直接为您提供参数类型。但是，使用[Boost.FunctionTypes](http://www.boost.org/doc/libs/1_50_0/libs/function_types/doc/html/index.html)等一些元编程，您可以从传入的函数中推断出这些。但在某些情况下这是不可能的，例如使用具有模板的仿函数`operator()`。

# css - 在一个父 div 中放置多个 div

> ID：11628767
> 
> 赞同：1
> 
> 时间：2012-07-24T10:20:09.810
> 
> 标签：css, html, position, parent

我已经看到几个问题朝着这个方向发展，但没有任何帮助。每个人都说只需将父 div 位置设置为相对，将子 div 位置设置为绝对。但我的问题是每个 div 都在我父 div 的 0/0 点。似乎内部元素彼此不知道。

这是我的页面的样子：

[http://imageshack.us/photo/my-images/854/unbenanntgoc.png/](http://imageshack.us/photo/my-images/854/unbenanntgoc.png/)

在我的 html 中，我只定义了我的 div：

```
<div id="content">

<div id="header" />
<div id="naviContent" />
<div id="imageContent" />
<div id="tagContent" />
<div id="textContent" />

</div> 
```

所以导航图像和标签内容 div 应该是浮动的。

这就是我的 CSS 的样子：

```
@charset "utf-8";

body {
    background-color:#33FF00;
}

#header {
    height:100px;
    background-color:#FFFFFF;
    position:relative;
}

#naviContent {
    width:25%;
    background-color:#F0F;
    float:left;
}

#imageContent {
    background-color:#000;
    position:absolute;
    float:left;
    width:800px;
    height:600px;
}

#tagContent {
    background-color:#900;
    position:absolute;
    float:left;
    width: 25%;
}

#textContent {
    background-color:#0000FF;
    clear:both;
}

#content {
    height:1600px;  
    width:1200px;
    background-color:#999999;
    margin-left: auto; 
    margin-right: auto;
    padding:10px;
    position:relative;
} 
```

所以也许有人可以告诉我为什么我的所有元素（黑色、黄色、红色、灰色和绿色）都定位到粉红色元素的 0/0 点？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:22:41.927

您需要正确关闭 DIV -

```
<div id="content">

<div id="header">Header </div>
<div id="naviContent">Nav</div>
<div id="imageContent">Image</div>
<div id="tagContent"> Tags</div>
<div id="textContent">Text  </div>

</div> 
```

**编辑：** [工作小提琴](http://jsfiddle.net/s4hGz/1/)你需要调整浮动宽度，你就完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:27:04.660

绝对位置不是布局页面的标准方式。

您应该做的只是删除位置属性，将所有内容浮动并设置宽度（请注意，您需要 div 中的内容才能正确呈现）。

您可能想研究 CSS 网格系统，例如[960.gs](http://960.gs)，因为它们使用预定义的类以标准化的方式为您处理这部分开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:42:00.953

你应该这样编码：-http: [//tinkerbin.com/J9CCZXRL](http://tinkerbin.com/J9CCZXRL)

**CSS**

```
#content {
background:pink;
  width:500px;
  padding:10px;
  -moz-box-sizing:border-box;
  overflow:hidden;
}

#header {
  background:red;
  height:100px;

}

#left {
background:green;
  width:100px;
  height:400px;
  float:left;
}

#middle {
background:blue;
  width:260px;
  float:left;
  height:400px;
  margin-left:10px;
}
#right {
background:yellow;
  width:100px;
  float:right;
  height:400px;
}

#footer {
background:grey;
height:100px;
  clear:both;
} 
```

**HTML**

```
<div id="content">
  <div id="header"></div>
  <div id="left"></div>
  <div id="middle"></div>
  <div id="right"></div>
  <div id="footer"></div>
</div> 
```

# c# - asp.net 搜索字符串

> ID：11628769
> 
> 赞同：0
> 
> 时间：2012-07-24T10:20:13.383
> 
> 标签：c#, asp.net, string

我有一些来自网页的数据，我需要根据返回的内容对其进行过滤。我有预定义数量的要搜索的关键字，大约 30 个。

匹配它们的最有效方法是什么？因为我可以输入约 2000 条记录，所以我不认为通过列表/数组/开关盒搜索每条记录效率太高，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:28:20.977

除了list/array/switch-case，我唯一能想到的就是Linq。

```
List<string> found = (from str in listOfStringsToSearch 
                     where listOfKeywords.Any(keyword => str.Contains(keyword)) 
                     select str).ToList<string>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:31:50.630

如果您只想知道哪些搜索词具有匹配的字符串，您可以使用[`Enumerable.Intersect`](http://msdn.microsoft.com/en-us/library/bb460136.aspx)：

```
var both = records.Intersect(searchTerms); 
```

它被延迟执行，因此不会创建新集合，并且在您以某种方式（fe`ToList`或`foreach`or `string.Join`）使用它之前不会执行。

它在内部使用 a `Set`，因此它非常有效。

以下是有关 LINQ 中集合操作的更多信息：

[http://msdn.microsoft.com/en-us/library/bb546153.aspx](http://msdn.microsoft.com/en-us/library/bb546153.aspx)

# wpf - 一次通话打开多个窗口

> ID：11628770
> 
> 赞同：0
> 
> 时间：2012-07-24T10:20:13.930
> 
> 标签：wpf, point-of-sale

我正在开发 WPF 应用程序。我制作了小型 PointOfSale 类型的应用程序。当我销售产品时，账单/收据窗口将打开。

当我第一次销售产品时它工作正常，或者你可以说每当我第一次运行应用程序时。但是每当我第二次销售产品时，账单/收据窗口将打开 2 次，第三次销售产品时，账单/收据窗口将打开 3 次，依此类推......

在销售按钮点击事件中

```
 BillWindow billwin= new BillWindow();
 billwin.Show(); 
```

在账单窗口中有打印按钮。在打印按钮单击事件中：

```
 this.close(); 
```

我不明白它是如何发生的。任何帮助都可以欣赏。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:50:10.697

我只是在这里有一个疯狂的猜测。但是您是否多次注册按钮单击事件处理程序？

# jquery - 我不能过滤前 5 个元素吗？

> ID：11628772
> 
> 赞同：0
> 
> 时间：2012-07-24T10:20:18.370
> 
> 标签：jquery

> **可能重复：**
> [使用 jQuery 选择前“n”个项目](https://stackoverflow.com/questions/1865552/selecting-the-first-n-items-with-jquery)

[代码](http://jsfiddle.net/MUyJ7/)：

```
<div class="prova">Hello</div>
<div class="prova">Hello</div>
<div class="prova">Hello</div>
<div class="prova">Hello</div>
<div class="prova">Hello</div>
<div class="prova">Hello</div>
<div class="prova">Hello</div>
<div class="prova">Hello</div>
<div class="prova">Hello</div>
<div class="prova">Hello</div>

$('.prova:gt(' + 0 + '):lt(' + 5 + ')').html("Hello Edited");​ 
```

我想编辑前 5 个元素。为什么它忽略了第一个？（应该是索引 0）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T10:23:58.830

代替[`.slice`](http://api.jquery.com/slice/)或[`:gt`](http://api.jquery.com/gt-selector/)获得[`:lt`](http://api.jquery.com/lt-selector/)最佳性能：

```
$('.prova').slice(0,5).html("Hello Edited");​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T10:23:32.977

如果从 0 开始，那么试试这个：

```
$('.prova:lt(5)').html("Hello Edited");​ 
```

[http://jsfiddle.net/MUyJ7/2/](http://jsfiddle.net/MUyJ7/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T10:23:33.510

:gt 表示大于第一个元素的索引 0。删除选择器的 :gt 部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T10:23:54.583

因为您正在使用`gt`，并且由于 0 不大于 0，所以它被排除在外。做类似的事情`$('.prova:lt(5)')`。我不知道你为什么要做所有这些引用和连接的东西。

# c# - 使用 IHttpHandler 从控制器调用的视图不返回任何内容

> ID：11628776
> 
> 赞同：0
> 
> 时间：2012-07-24T10:20:24.407
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个自定义的 IHttpHandler，我用来在 MVC3 中调用我的控制器。问题是当我调用 View("~/path/to/my/view.cshtml") 时，我什么也得不到。没有错误。没什么，只是空源和200 ok。

既然我称这是我的自我，那么视图生命周期的某些部分是否还没有开始？

IHttpHandler：

```
public class MyHttpHandler : IHttpHandler
{
    ISimpleController _c;

    public SimpleHttpHandler(Controller c)
    {
        _c = c;
    }

    public bool IsReusable
    {
        get { return false; }
    }

    public void ProcessRequest(HttpContext context)
    {
        _c.Get();
    } 
```

来自控制器的代码：

```
 public new ActionResult Get()
    {
        ViewBag.Proof = "Ping";
        ViewBag.Of = "Pong";
        ViewBag.Life = "Fizz";
        return View("~/Views/Shared/WhatAView.cshtml");
    } 
```

WhatAView.cshtml：

```
<ul>
@foreach(var pair in ViewData)
{
   <li>@pair.Key : @pair.Value</li>
}
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:55:45.640

您唯一需要的是在您的 ActionResult 上调用 ExecuteResult()。这将强制渲染您的视图。这就是 MVC 框架在从控制器检索 ActionResult 后所做的事情。

```
_c.Get().ExecuteResult(_c.ControllerContext); 
```

使用有效的 ControllerContext 正确实现控制器很重要。我已经使用 dotPeek 反编译了 ViewResultBase.ExecuteResult()：

```
public override void ExecuteResult(ControllerContext context)
{
  if (context == null)
    throw new ArgumentNullException("context");
  if (string.IsNullOrEmpty(this.ViewName))
    this.ViewName = context.RouteData.GetRequiredString("action");
  ViewEngineResult viewEngineResult = (ViewEngineResult) null;
  if (this.View == null)
  {
    viewEngineResult = this.FindView(context);
    this.View = viewEngineResult.View;
  }
  TextWriter output = context.HttpContext.Response.Output;
  this.View.Render(new ViewContext(context, this.View, this.ViewData, this.TempData, output), output);
  if (viewEngineResult == null)
    return;
  viewEngineResult.ViewEngine.ReleaseView(context, this.View);
} 
```

您会看到此方法将视图呈现为 ControllerContext.HttpContext。确保 HttpContext 在您的控制器中可用。

如上所示，您仍然可以使用原始渲染：

```
 TextWriter output = context.HttpContext.Response.Output;
  var viewResult = (ViewResult)_c.Get();
  viewResult.View.Render(new ViewContext(_c.ControllerContext, viewResult.View, viewResult.ViewData, viewResult.TempData, output), output); 
```

# java - Android MediaPlayer - 切换到下一首歌曲

> ID：11628777
> 
> 赞同：1
> 
> 时间：2012-07-24T10:20:33.747
> 
> 标签：java, android, audio, media-player, midi

我生成一个midi文件并这样写：

```
File output = new File("exampleout.mid"); 
```

我想我可能需要更改它，所以它位于正确的文件夹中（只是一个可读/可写文件夹，可能是 Music/ ）

接下来我想用 MediaPlayer 播放这个 MIDI 文件，但我不知道如何加载文件。

```
mediaPlayer = MediaPlayer.create(this, R.raw.test3); 
```

仅从只读目录 /res/raw 加载。但是，如果我尝试类似：

```
mediaPlayer = MediaPlayer.create(this, "file://exampleout"); 
```

它不起作用，因为 create 需要一个整数作为输入。我尝试了 AssetFileDescriptor，但还没有弄清楚。

同时，我想生成一个新的 midi 文件并将其加载到 mediaPlayer（链接）中，以便在第一个文件播放完毕时播放。

```
MediaPlayer  mediaPlayer = MediaPlayer.create(Activity.this,R.raw.a1);
mediaPlayer.setOnCompletionListener(new musicCompletionListener());
mediaPlayer.start();
private class musicCompletionListener implements OnCompletionListener {
    @Override
    public void onCompletion(MediaPlayer mediaPlayer) {
mediaPlayer.setDataSource(WHATTOPUTHERE)
        mediaPlayer.release();
    }
} 
```

我的问题实际上是如何调用文件。我不能明显地使用字符串，并且 r.raw 目录由于其只读性质而无法使用。我觉得解决方案并不难，但我只是从 c++ 轻松进入 java，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:03:21.220

我将文件存储在缓存目录中，这有效！

```
File output = new File(getCacheDir() + "/exampleout.mid"); 
```

然后调用文件：

```
 String filePath = null;
    File file = null;
    FileInputStream inputStream = null;
try {
           filePath = getCacheDir() + "/exampleout.mid";
           file = new File(filePath);

           inputStream = new FileInputStream(file);
           if(inputStream.getFD().valid())
           {
               System.out.println("Valid!");
           }
        } catch (Exception e1) {
            e1.printStackTrace();
            System.exit(-1);
        }

       try {
         mediaPlayer = new MediaPlayer();
        mediaPlayer.setDataSource(inputStream.getFD());
        inputStream.close();
    } catch (Exception e1) {
        e1.printStackTrace();
        System.exit(-1);
    }

    try {
        mediaPlayer.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:33:22.273

您必须很好地设计应用程序的架构，然后才能实现您所要求的。

根据我的说法，您可以执行以下操作。

1.  使用 midiReady(midi 文件的 uri) 方法设计接口
2.  此接口由包含媒体播放器的活动实现
3.  一旦 midi 文件生成完成，调用方法 midiReady(midi 文件的 uri)
4.  现在，由于您的活动实现了接口回调，因此在您的活动上调用接口回调，您可以设置媒体播放器以播放 midi 文件，因为在回调中，您拥有 midi 文件的 uri。

以上metinoed点只是一个模糊的想法，你可以做什么。有了上面的模糊想法，你可以继续实施。

希望这会有所帮助。谢谢。

# ant - 在 IVY 中将 Maven 约定文件夹包含到类路径中

> ID：11628784
> 
> 赞同：0
> 
> 时间：2012-07-24T10:21:02.847
> 
> 标签：ant, ivy

我们使用 IVY 的原因是我们已经有了 ANT 脚本。意思是，默认情况下没有 maven 兼容的文件夹。

我们必须创建这样的约定。

现在，我已经实现了 IVYing。解决后，我做

```
<ivy:cachepath pathid="ivy.test.classpath" conf="test" settingsref="ivy.ref" /> 
```

这个问题，它不包括

```
src/test/java , src/test/resources 
```

包含这些的最佳方式是什么。

我目前正在做的是创建另一个类路径（后缀为.extended），其中包括原始类路径以及新文件夹。

有没有“IVYier”的方式来做到这一点？可能在依赖文件 ivy.xml 中添加一些东西或告诉它执行 maven 的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:37:34.217

为什么需要将源目录添加到类路径中？

我通常只需要将已编译的类目录添加到类路径中，这通常更容易直接在需要以这种方式配置的 Junit 等少数任务中完成。

例如：

```
<junit ....>
    <classpath>
        <path refid="runtime.path"/>
        <pathelement path="${classes.dir}"/>
    </classpath>
    ..
</junit> 
```

# linux - 用于 arm-linux 板的 OSGi 框架

> ID：11628786
> 
> 赞同：-1
> 
> 时间：2012-07-24T10:21:06.123
> 
> 标签：linux, arm, osgi, equinox, jamvm

我有运行 linux 的 arm 9 板。我已经移植了 Jamvm 并且工作正常。现在我需要在它上面移植 OSGi 框架。

我是 OSGI 的新手。

请帮助我了解如何在 arm-linux 上移植 osgi 的过程/教程。

我更喜欢 Equinox 或 Flex 框架。

请建议是否有任何其他框架可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:43:32.930

不需要移植，因为 Equinox 和 Felix 都是用纯 Java 编写的。在这两者中，Felix 更轻量级。

另请查看 Knopflerfish，它是另一种经常用于嵌入式编程的开源 OSGi 实现。

您可能还想查看 ProSyst mBedded Server，它是一种商业产品。

# python - Django：我的代码有什么问题？

> ID：11628787
> 
> 赞同：0
> 
> 时间：2012-07-24T10:21:14.470
> 
> 标签：python, django, forms

这些是我的模型：

```
class war(models.Model):
    title = models.CharField(max_length=20)

class option(models.Model):
    warval =models.ForeignKey(war)
    value = models.CharField(max_length=10)

class warform(ModelForm):
    class Meta:
        model = war

class option_form(ModelForm):
    class Meta:
        model = option
    exclude = ('warval') 
```

这是处理选项创建的视图：

```
def warhandler(request,war_id):
    f=modelformset_factory(option,form=option_form)
    wobj=get_object_or_404(war,pk=war_id)
    if request.method == 'POST':
        formset = f(request.POST,queryset=option.objects.filter(warval=wobj))
        if formset.is_valid():
            formset.save()
            return HttpResponse("Saved!check your model")   
        else:
            return render_to_response("formset.html",RequestContext(request,{"set":formset}))
    else:
        formset = f(queryset=option.objects.filter(warval=wobj))
        print(formset)
        return render_to_response("formset.html",RequestContext(request,{"set":formset,"war":wobj})) 
```

因此，当我将表单提交到此视图时，我收到以下错误：

```
Exception Type: IntegrityError
Exception Value: hit_option.warval_id may not be NULL 
```

我知道这个错误是什么以及为什么会出现，但我怎样才能消除这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:40:43.127

正如您所意识到的，这是因为您没有在任何地方设置外键值。您可能希望使用[`inlineformset_factory`](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#inline-formsets)which 来为您将 FK 设置为父`war`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:41:20.730

使 warval 成为非必需字段

```
class option(models.Model):
    warval =models.ForeignKey(war, null=True)
    value = models.CharField(max_length=10) 
```

或者在保存之前定义formset.warval，设置一个默认值...

**编辑：**

阅读[此处](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#saving-objects-in-the-formset)和[此处](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)以使用表单上的字段子集并保存。

# javascript - 在knockoutjs上绑定按键事件，未填充可观察到的

> ID：11628789
> 
> 赞同：12
> 
> 时间：2012-07-24T10:21:33.210
> 
> 标签：javascript, knockout.js

需要一些关于 knockoutjs 和绑定按键事件的帮助。我正在尝试连接淘汰赛，以便我从文本框中选择输入键。所以我可以执行与单击按钮相同的操作。解释起来有点棘手，但希望这个 JsFiddle 能展示我想要实现的目标。

[http://jsfiddle.net/nbnML/8/](http://jsfiddle.net/nbnML/8/)

我遇到的问题是 observable 值没有得到更新，我认为这与 observable 在焦点离开文本框之前没有更新有关吗？

这个问题的任何解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-24T13:34:45.253

一种选择是使用`valueUpdate`附加绑定在每次按键时强制更新。例如，你会这样做：

```
<input type="text" data-bind="value: InputValue, valueUpdate: 'afterkeydown', event: { keypress: RunSomethingKey }" /> 
```

如果这不是你所追求的，那么你真的想在你的处理程序中触发元素的更改事件。例如，使用 jQuery，您可以执行以下操作`$(event.target).change();`：

将它移到自定义绑定中会更好。也许是这样的（可能应该检查 valueAccessor() 的结果是否是一个函数）：

```
ko.bindingHandlers.enterKey = {
    init: function(element, valueAccessor, allBindings, vm) {
        ko.utils.registerEventHandler(element, "keyup", function(event) {
            if (event.keyCode === 13) {
                ko.utils.triggerEvent(element, "change");
                valueAccessor().call(vm, vm); //set "this" to the data and also pass it as first arg, in case function has "this" bound
            }

            return true;
        });
    }         
}; 
```

这是您更新的示例：http: [//jsfiddle.net/rniemeyer/nbnML/9/](http://jsfiddle.net/rniemeyer/nbnML/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:56:26.460

不要打折提交绑定： http: [//knockoutjs.com/documentation/submit-binding.html](http://knockoutjs.com/documentation/submit-binding.html)

这可以解决一些 IE 9/10 的问题，例如返回键不更新 observable。有了这个照顾，你不需要拦截 keycode 13

html:

```
<form data-bind="submit:RunSomething">
 <input type="text" data-bind="value: InputValue" />
 <input type="submit" value="test" />
 <div data-bind="text: InputValue" />
</form> 
```

代码：

```
var ViewModel = function () {
    var self = this;
    self.InputValue = ko.observable('');

    self.RunSomething = function (ev) {
        window.alert(self.InputValue());
    }
}
ko.applyBindings(new ViewModel()); 
```

在这里看到这个：

[http://jsfiddle.net/jnewcomb/uw2WX/](http://jsfiddle.net/jnewcomb/uw2WX/)

# javascript - 总是显示 niceScroll rail

> ID：11628793
> 
> 赞同：6
> 
> 时间：2012-07-24T10:21:45.863
> 
> 标签：javascript, jquery, jquery-plugins, nicescroll

我正在使用[niceScroll](http://areaaperta.com/nicescroll/index.html) jQuery 插件来替换溢出中的常见浏览器滚动条`<div>'s`。该插件运行良好，但我无法让它工作并**始终**显示滚动条（即使内容没有超出`<div>`界限）。我的最终配置是：

```
$(document).ready(function () {
    $(".div-wrapper").niceScroll({
        cursorcolor: "#333",
        cursoropacitymin: 0.3,
        background: "#bbb",
        cursorborder: "0",
        autohidemode: false,
        cursorminheight: 30
    });
}; 
```

我试过开火`$(".div-wrapper").getNiceScroll().show()`，但它似乎也不起作用。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T14:00:22.913

首先，你**最后少了一个括号**——这可能是你的问题吗？

将 autohidemode 设置为 false 仅意味着它不会在用户停止滚动时消失，然后在滚动时再次出现。不幸的是，如果内容没有溢出，这并不意味着它是可见的。

作为一种解决方法，您可以尝试在调用 .niceScroll() 后使 id=ascrail2000 的元素显式可见，如下所示：

```
$(document).ready(function () {
    $(".div-wrapper").niceScroll({
        cursorcolor: "#333",
        cursoropacitymin: 0.3,
        background: "#bbb",
        cursorborder: "0",
        autohidemode: false,
        cursorminheight: 30
    });
    $('#ascrail2000').show();
}); 
```

**在最后一行中查看缺失的括号**

您可能还需要使其子元素可见：

```
 $('#ascrail2000 *').show(); 
```

（确保元素的 id 是 ascrail2000 在您的情况下。）

**更新：**正如 veritas 所指出的，使用更通用的选择器`div[id^='ascrail']`而不是`#ascrail2000`使它适用于一页上的多个 nicescroll，因此可以使用 JavaScript 完成上述操作：

```
 $("div[id^='ascrail']").show(); 
```

或在 CSS 中：

```
 div[id^='ascrail'] { display: block; } 
```

或者如果上述方法不起作用：

```
 div[id^='ascrail'] { display: block !important; } 
```

这不是最优雅的解决方案，但恐怕这是目前解决此问题的唯一方法，因为 nicescroll 插件没有选择该行为的选项。幸运的是，nicescroll 是开源的，[可以在 GitHub 上使用，](https://github.com/inuyaksa/jquery.nicescroll)因此人们可以轻松地对其进行分叉并添加这样的选项或在 GitHub 上[发布功能请求](https://github.com/inuyaksa/jquery.nicescroll/issues)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T16:12:05.063

```
$(".div-wrapper").niceScroll({
    cursorcolor: "#333",
    cursoropacitymin: 0.3,
    background: "#bbb",
    cursorborder: "0",
    autohidemode: false,
    cursorminheight: 30
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:53:20.950

我假设如果内容没有溢出边界框， niceScroll 不会做任何事情，这可能是你的问题。请记住 niceScroll 不是 >$overflow: scroll;... 如果不深入研究插件本身，我无法确定，但我会假设它内置了一个检查来测试内容是否需要滚动，以及是否需要滚动它没有，然后函数静默退出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-02T15:30:00.847

**现在**07/02/2018和工作版本**jquery.nicescroll v3.7.6** [源链接](https://nicescroll.areaaperta.com)

添加后 `autohidemode: false` 对我来说效果很好。

```
$("#example").niceScroll({
   autohidemode: false       // it make nicescroll scroll bar visible all time
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-07T15:04:22.267

我通过谷歌搜索看到了这个答案，即使它很旧，如果有人看到这个寻求答案，这就是我的工作解决方案：

```
 $('#ascrail2000.nicescroll-rails').show();
        $('#ascrail2000.nicescroll-rails div').height('300px').show(); 
```

我需要为“bar” div 设置任意高度，因为默认情况下它是 height:0px，即使你显示它，你也看不到任何东西。我想我们可以做得更好，用窗户尺寸计算一个好的高度，但我不需要:)

# .net - EntityFramework (CodeFirst) 继承映射：TPT 和 TPC 的混合

> ID：11628796
> 
> 赞同：5
> 
> 时间：2012-07-24T10:21:54.993
> 
> 标签：.net, entity-framework, table-per-type, table-per-class

**我们正在遗留**数据库上制作 EntityFramework CodeFirst DAL （这意味着我们大多会遇到它所存在的任何设计错误）。

领域模型（非常）简单：我们有抽象 Card，子类型为 HomeCard、CarCard、OwnerCard 和 RenterCard。准确地说：

```
abstract class Card {}
class HomeCard: Card {}
class CarCard: Card {}
class OwnerCard: Card {}
class RenterCard: Card {} 
```

数据库模型紧随其后的是表 Cards、Homes、Cars、Owners 和 Renters，其中 Cards 包含公共列，而其他表包含与特定类有关的列。这正是 TPT 的含义，它完美地映射到 EntityFramework。

重构之后，我们发现（不出所料）Home 和 Car 确实共享一些属性，并且 Owner 和 Renter 也这样做。而且它不仅是为了美观，而且一些功能会更容易实现（例如按名称搜索所有者**和**租户，或按所有者搜索房屋**和**卡片）。所以我们希望我们的领域模型看起来像这样：

```
abstract class Card {}
abstract class ProperyCard: Card {}
class HomeCard: ProperyCard {}
class CarCard: ProperyCard {}
abstract class PersonCard: Card {}
class OwnerCard: PersonCard {}
class RenterCard: PersonCard {} 
```

但是我们仍然有相同的数据库模型，这意味着我们在 TPT 和 TPC 之间有一些奇怪的混合。我们通过 EF/CodeFirst 映射它的所有尝试都失败了。关于使它工作的任何建议？

*PS*我们的基表 Cards 确实有一个鉴别器字段，如果这可能有帮助的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:25:37.373

您有一个现有的数据库，因此您不想先使用代码。将实体数据模型项添加到您的项目并使用提供的向导将其连接到现有数据库。

我不推荐以下操作**，但如果您必须**使 CF 模型与现有数据库一起使用，请尝试以下步骤。

1.  让 CF 生成一个新数据库。
2.  将 EDMMetaData (<EF4.3.1) 或 __MigrationHistory (>=EF.4.3.1) 表复制到现有数据库。这将*诱使*EF 认为它创建了数据库并且它匹配。

**注意**：在使用 CF 框架处理旧数据库时，您很可能会遇到错误。如果你的 CF 框架不*完美*，它就会受到影响。

# algorithm - 线交点横向

> ID：11628798
> 
> 赞同：0
> 
> 时间：2012-07-24T10:22:04.547
> 
> 标签：algorithm, math, geometry, line, intersection

我有几个随机线段。我必须检查任何两条线段之间是否有任何交集。线路可能已连接或未连接。什么是解决这个问题的好算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:32:18.197

假设您在这里谈论线段（否则，只需比较线的斜率：如果它们的斜率不相等，则它们相交）。

要确定一组 2 个或更多线段中是否存在 [单个] 交点，可以使用 Shamos-Hoey 算法。

要查找一组 2 个或更多线段中的*所有交点，可以使用 Bentley-Ottmann 算法。*

这两种算法以及其他基于“扫描线”的算法的实现[在 Internet 上随处可见](https://www.google.com/search?q=Line+segment+intersection+code)。

# java - Deadbolt - Play Framework - 如何使用控制器中的参数检查 @RestrictedResource？

> ID：11628802
> 
> 赞同：3
> 
> 时间：2012-07-24T10:22:14.663
> 
> 标签：java, playframework, authorization, acl, deadbolt

使用 Deadbolt 的模块，我们可以在视图中使用资源名称和参数检查受限制的资源。

例如，在我看来，我拥有它，并且效果很好：

```
#{deadbolt.restrictedResource resourceKeys:['Domain'] , resourceParameters:['domainid':domain.id]}
   <li><a href="@{Admin.showDomain(domain.id)}">${domain.title}</a></li>
#{/deadbolt.restrictedResource} 
```

但是在我的控制器中，我只能检查资源名称，但我找不到在传递域 ID 的 RestrictedResourcesHandler 中检查它的方法。

我正在寻找一个解决方案来做这样的事情：

```
@RestrictedResource(name = {"Domain"}, params = {domainid})
public static void showDomain(String domainid)
{
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T07:55:45.667

注释中不可能有动态信息，但您可以使用参数来定义请求中传入值的名称。但是，此信息目前未传递到处理程序，因为它需要一个地图。虽然您可以从受限制的资源标记中传递参数映射，但不能从注释中执行此操作，因此会将空映射传递给处理程序。

您最好的方法是从请求对象中提取一个众所周知的参数名称。我需要重新考虑在不破坏向后兼容性的情况下做到这一点的最佳方法。

史蒂夫（Deadbolt 的作者）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:38:48.563

我找到了解决问题的方法，不是我认为的最好的方法，但它是 Steve Chaloner 的解决方案（Deadbolt 的创造者），并且它有效。

例如，如果你的 Controller 的方法参数被命名为“id”，并且你想在你的 checkAccess 方法中检查这个 id：

```
// Controller's method : 
@RestrictedResource(name = {"Domain"})
public static void showDomain(String id){} 
```

只需在您的 checkAccess 方法的开头检查 Map "resourceParameters" 是否为空，并使用请求对象获取参数：

```
public AccessResult checkAccess(List<String> resourceNames,
                                Map<String, String> resourceParameters)
{    
    Map<String, String> hashm = new HashMap<String,String>();

    if(resourceParameters != null && !resourceParameters.isEmpty()){
        hashm = resourceParameters;
    }else if(Http.Request.current().routeArgs!= null && !Http.Request.current().routeArgs.isEmpty()){
        hashm = Http.Request.current().routeArgs;
    }
} 
```

然后只需要在你的 checkAccess 方法中 foreach 你的 hashmap 来获取你的 Controller 的方法参数并根据需要检查 Access。

```
for (Map.Entry<String,String> mp : hashm.entrySet())
{
    // Get the id argument
    if(mp.getKey().equals("id"))
    {
        // Do something with the value..
        mp.getValue()
    }        
} 
```

# php - 在函数中包含文件

> ID：11628809
> 
> 赞同：0
> 
> 时间：2012-07-24T10:22:33.770
> 
> 标签：php, function, templates, include

我有一个函数`get_header()`，它在模板中包含头文件（有点像 wordpress），它正在工作。在我的函数文件中还定义了一个`stylesheetURL()`获取模板样式表 url 的函数。

在我的 header.php 文件中（在子目录“design”中），我调用 stylesheetURL 并且 PHP 说它是未定义的。

这是结构：

pagehandler.php - 处理页面请求。包括“load.php”，然后是“design/page.php”

load.php - 包括“functions.php”和类。

functions.php - 包含诸如 get_header 和 stylesheetURL 之类的过程函数。get_header 实际上将 header.php 文件作为绝对 url (http://website.com/design/header.php) 包含在函数内部，但由于函数没有范围，它仍然应该调用 stylesheeturl 函数。

page.php - 调用函数`get_header()`，回显内容，然后调用`get_footer()`.

header.php - 调用`stylesheetURL()`。<< 这就是它崩溃的地方。头文件包含在内，但无法访问任何功能。

为什么会这样？

编辑： // 设置是一个全局数组，如果从 header.php 或 footer.php 以外的任何文件调用，siteURL 会显示 url。

```
 function siteURL() {
    global $settings;
    return $settings['site_url'];
}

function designURL() {
    $siteurl = siteURL();
    return $siteurl.'/design';
}

function stylesheetURL() {
    $durl = designURL();
    return $durl.'/style.css';
}

function get_header() {
    $durl = designURL();
    require $durl.'/header.php';
} 
```

事实上，如果我从 更改为`get_header()`，`include 'header.php'`它会按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:33:56.337

我想这是因为，您不能通过 url 要求文件。您需要一个路径，而不是一个 url 来要求一个文件。如果您在 php.ini 中设置了远程文件包含，则包含正在工作。

# javascript - 随着数字模块的增加，Javascript 图像正在重复

> ID：11628814
> 
> 赞同：0
> 
> 时间：2012-07-24T10:23:08.323
> 
> 标签：javascript, dotnetnuke

我正在开发 dotnetnuke 模块。我开发了一个模块。3d 悬停效果，使用 javascript 。javascript是，

```
$item.find('img')
  .end()
  .append($struct)
  .find('div.slice')
  .css('background-image', 'url(' + img + ')')
  .prepend($('<span class="" ></span>')); 
```

如果我使用这个图像正在增加。例如，如果我使用 5 个模块，则显示 5 个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:12:33.493

您的脚本将被包含并为模块的每个实例运行。您可以只包含一次脚本（可能通过将其放入外部文件并通过[客户端资源管理框架](http://www.dotnetnuke.com/Resources/Wiki/Page/Client-Resource-Management-API.aspx)包含它），或者您可以限制脚本的范围，仅影响模块中的内容（或者，执行两者，通过在外部脚本中创建一个可重用的插件，并为每个模块使用不同的参数 [模块 ID 或 HTML 元素] 对其进行初始化）。

# iphone - Iphone String DateTime 转换为 int 格式

> ID：11628815
> 
> 赞同：0
> 
> 时间：2012-07-24T10:23:15.160
> 
> 标签：iphone, objective-c

我有字符串包含这个`2012-07-16 10:20:25`，我想将`DateTime`格式更改为`yyyyMMddHHmmss`它将是`20120716102025`并且想要但是这个数字在`int`var 中。

我试过了。

```
NSDateFormatter *ConvertFormat;
int *DateTimeConverted;

ConvertFormat = [[NSDateFormatter alloc] init];
[ConvertFormat setDateFormat:@"yyyyMMddHHmmss"];

DateTimeConverted = [ConvertFormat stringFromDate:StringDateTime]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:16:28.853

找到一些其他更准确的解决方法很可能会更好，例如使用 1970 年的秒数（或其他），但如果你必须这样做......

使用`NSDateComponents`你从你需要的字符串中抓取每个数字：

```
NSDateComponents *todayComponents = [gregorian components:(NSWeekdayCalendarUnit |NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit) fromDate:date];
NSInteger day = [todayComponents day];
NSInteger month = [todayComponents month]; 
```

上面的示例并不完整，但应该让您了解它是如何完成的。

然后您需要创建一个由上述所有值组成的整数字符串，例如：

`NSString *stringDate = [NSString stringWithFormat:@"%i%i",day,month];`

然后将其转换回 int 值：

`int finalValue = [stringDate intValue]`

我从来没有这样做过，但这将是我最初的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:28:03.837

我认为以这种方式存储日期是愚蠢的，你应该使用其他东西（比如时间戳）。话虽如此，我的答案来了。

我们可以将字符串转换为`NSDate`对象，然后再转换回字符串并获取整数值。不要忘记使用足够宽的整数类型来保存值（例如`long long`）。

```
NSString *dateString = @"2012-07-16 10:20:25";
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *date = [formatter dateFromString:dateString];
[formatter setDateFormat:@"yyyyMMddHHmmss"];
NSString *numericString = [formatter stringFromDate:date];
long long value = [numericString longLongValue]; 
```

但我们也可能认为字符串与日期无关，而只是我们要连接的一堆数字的容器。在这种情况下，我们只需要删除不需要的字符。这更快：

```
NSString *dateString = @"2012-07-16 10:20:25";
NSMutableString *string = [NSMutableString stringWithString:dateString];
[string deleteCharactersInRange:NSMakeRange(16, 1)]; // remove last colon
[string deleteCharactersInRange:NSMakeRange(13, 1)]; // remove first colon
[string deleteCharactersInRange:NSMakeRange(10, 1)]; // remove space
[string deleteCharactersInRange:NSMakeRange(7, 1)];  // remove last hyphen
[string deleteCharactersInRange:NSMakeRange(4, 1)];  // remove first hyphen
long long value = [string longLongValue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:05:01.233

您应该尝试在代码中添加以下行：

```
long long int DateTimeConverted = [[ConvertFormat stringFromDate:/* your date object */] longlongInt]; 
```

# linux - 如何用 awk 和 gsub 替换文件中的数字（分别用 NA、0101、0102 和 0202 替换 -1、0、1 和 2）？

> ID：11628823
> 
> 赞同：0
> 
> 时间：2012-07-24T10:23:47.377
> 
> 标签：linux, awk, gsub

我有一个这样的文件：

```
hgfjk
AX-75183725 2 2 -1 2 1 2 -1 0 
```

我想分别替换`-1`, `0`,`1`和`2`, `NA`,`0101`和。所以我会得到：`0102``0202`

```
hgfjk
AX-75183725 0202 0202 NA 0202 0101 0202 NA 0101 
```

我使用这个命令：

```
awk 'NR == 1 { print; next } NR>1{a=$1;$1="@";gsub(/ -1\>/,"NA");gsub(/<0\>/,"0101");gsub(/<1\>/,"0102");gsub(/\<2\>/,"0202");$1=a;print}' file > out 
```

这给了我这个输出：

```
hgfjk
AX-75183725 0202 2NA 0202 0102 2NA 0101 
```

不知道怎么回事！！有人可以帮忙吗谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:41:35.067

我将创建一个包含要替换的值的数组。并将计算除第一个字段之外的每个字段的每个位置。

```
awk '
    BEGIN {
        subs="NA 0101 0102 0202";
        split( subs, subs_arr );
    }
    NR == 1 { 
        print; 
        next 
    } 
    NR>1{
        for ( i = 2; i <= NF; i++ ) {
            $i = subs_arr[ $i + 2 ];
        }
        print
    }
' file 
```

运行之前的命令，将得到以下输出：

```
hgfjk
AX-75183725 0202 0202 NA 0202 0102 0202 NA 0101 
```

* * *

**编辑**`gsub(/<0\>/,"0101")`：我给出了一个解决方案，但我猜你的解决方案因为and不起作用`gsub(/<1\>/,"0102")`。你也应该逃跑`<`，比如：`gsub(/\<0\>/,"0101")`和`gsub(/\<1\>/,"0102")`

# c++ - C++ 中的“未定义符号”错误

> ID：11628825
> 
> 赞同：1
> 
> 时间：2012-07-24T10:23:51.670
> 
> 标签：c++, templates, compiler-errors, operator-overloading

我有`Point`一个具有`X`,`Y`和`Name`作为数据成员的类。我超载了

```
T operator-(const Point<T> &); 
```

这会计算两点之间的距离并返回一个值

```
template < typename T>
T Point<T>::operator-(const Point<T> &rhs)
{
cout << "\nThe distance between " << getName() << " and " 
<< rhs.getName() << " = ";

return sqrt(pow(rhs.getX() - getX(), 2) + pow(rhs.getY() - getY(), 2));;
} 
```

`main`功能_

```
int main () {

Point<double> P1(3.0, 4.1, "Point 1");

Point<double> P2(6.4, 2.9, "Point 2");

cout << P2 - P1;
return EXIT_SUCCESS;
} 
```

但问题是这个程序没有编译，我收到这个错误：

```
Undefined symbols:
"Point<double>::operator-(Point<double>&)", referenced from:
  _main in main.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:30:21.803

您不能编译非专业模板。您必须将定义代码放在标题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:33:54.033

您需要将 Point 模板类放在 .hpp 文件中，并在使用 Point 时包含该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:09:53.477

您必须在每个使用模板的文件中包含模板，否则编译器无法为您的特定类型生成代码。

运算符之间也有优先级，重载它们时不会改变。您的代码将被视为

```
(cout << P2) - P1; 
```

试试这个

```
cout << (P2 - P1); 
```

# java - android下载器，我该如何自定义

> ID：11628832
> 
> 赞同：0
> 
> 时间：2012-07-24T10:24:02.230
> 
> 标签：java, android

我可以使用`android downloader`下载文件。代码在**[这里](https://stackoverflow.com/a/10950971/1140321)**

默认情况下，android将文件存储在`download`目录中。如何指定应该下载的路径？如果这不可能，我打算将文件复制到 sd 卡中，我想删除 src 文件（文件`download`夹中的文件。但我无法从`download`文件夹中删除文件。我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:34:51.677

[setDestinationInExternalPublicDir](http://developer.android.com/reference/android/app/DownloadManager.Request.html#setDestinationInExternalFilesDir%28android.content.Context,%20java.lang.String,%20java.lang.String%29)

```
DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
    Request request = new Request(
            Uri.parse("url for file to download"));
    request.setDestinationInExternalPublicDir (String dirType, String subPath);
    long enqueue = dm.enqueue(request); 
```

这个方法可以帮到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:38:08.703

```
 Environment.getExternalStorageDirectory().getPath() + "/download"; 
```

你能改变“/下载”部分吗？我认为这会将它保存到外部存储中

# wxpython - 冻结 wxgrid 中的几列

> ID：11628835
> 
> 赞同：2
> 
> 时间：2012-07-24T10:24:14.590
> 
> 标签：wxpython

我有一个窗口，它被拆分为在左侧面板上有一个自定义树 ctrl，在右侧有一个网格表。现在我希望网格表以这样的方式显示信息，即前几列冻结（不滚动），而其余数据可以选择水平滚动。我不知道如何继续，请帮助。我已经看到拆分器窗口可以提供一些帮助，有人可以提供示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:44:58.853

没有内置的方法可以做到这一点。您需要使用网格并使它们保持同步。请参阅[https://groups.google.com/forum/?fromgroups#!topic/wxpython-users/Lbt5EW6sRDo](https://groups.google.com/forum/?fromgroups#!topic/wxpython-users/Lbt5EW6sRDo)

你也应该在 wxPython 邮件列表上询问。我发誓我在这个主题上看到了一些东西，其中有人创建了某种解决方案，但我现在找不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-10T05:20:35.190

wx.FreezeTo（行，列）

0 解冻，否则任何其他数字将冻结第一行或第一列

# logging - 是否有行业标准的日志记录级别？

> ID：11628836
> 
> 赞同：7
> 
> 时间：2012-07-24T10:24:17.483
> 
> 标签：logging

我正在为开发人员编写有关登录特定系统的政策文档。

在我的草稿文档中，我有“所有日志记录都应该处于合理的水平......”在审查中得到了正确的选择。我的意思是什么是明智的水平？

是否有任何概括但权威的指导？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T13:59:13.990

为了减少**如何选择正确级别**的问题的答案：

**调试**：此级别的消息包含广泛的上下文信息。它们主要用于问题诊断。此级别的信息是针对开发人员的，而不是针对用户的。

**Info**：这些消息包含一些上下文信息，以帮助跟踪生产环境中的执行（在粗粒度级别）。

**警告**：警告消息表明系统中存在潜在问题。系统能够自行处理问题或无论如何处理此问题。

**错误**：错误消息表明系统中存在严重问题。该问题通常是不可恢复的，需要人工干预。

标准 Java Logging API 和 Apache Log4J 都提供了超出这些基础的日志级别。日志级别的主要目的是帮助您从噪音中过滤出有用的信息。为了避免使用错误的级别从而降低日志消息的有用性，开发人员在开始编码之前必须得到明确的指导。

在[IBM的基础上创建](http://www.ibm.com/developerworks/java/library/j-logging/)

# git - 让 head 停止等待输入

> ID：11628838
> 
> 赞同：2
> 
> 时间：2012-07-24T10:24:23.273
> 
> 标签：git, shell, sed, msysgit, head

我正在为 git 开发“自定义 grep”包装器。它显示文件匹配模式的第一行。此行应为文件的标题。

我创建了别名，一切正常，直到我尝试搜索模式，但在工作文件夹中找不到。由于没有找到文件，`head`并且`sed`命令没有任何可使用的命令并等待输入。

如何防止这种情况？如果没有输入，我希望脚本中断。当然我可以创建单独的脚本，将文件列表分配给变量并检查该变量的长度。但我更喜欢甜美整洁的 oneliner-alias。

是否可以？这是我的`.gitconfig`别名部分：

```
[alias] 
    gg = !sh -c 'head -n1 -q `git grep --name-only $0` | sed s/OBJECT.//' 
```

## 解析度

以下别名命令在 Windows 7 x64、msysGit 1.7.11.1 上为我工作：

```
gg = !sh -c 'head -n1 -q `git grep --name-only $0` < /dev/null | sed s/OBJECT.//' 
```

和

```
gg = !sh -c 'git grep --name-only $0 | xargs -l sed -n "1{s/OBJECT.//p}"' 
```

但表现不同。第一种方法明显更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:29:30.190

要解决有关如何防止`head`等待不存在的输入而停止的直接问题，您可以使用[进程替换](http://tldp.org/LDP/abs/html/process-sub.html)而不是命令替换：

```
head -n1 -q <(git grep --name-only $0) | sed s/OBJECT.// 
```

与[命令替换](http://tldp.org/LDP/abs/html/commandsub.html)不同，其中 ```cmd ``` portion is replace by the output of the command, with process substitution the`<(cmd)` 部分被替换为包含命令输出的文件/管道的文件名。

在命令输出为空的情况下，`head`仍会收到输入，即空文件/管道的文件名，并将按预期进行。

**PS**请注意，您需要使用`bash`而不是`sh`才能使用进程替换。

## 更新

如果您的 bash 版本不支持进程替换，另一种解决问题的方法是从空文件或虚拟文件重定向内容：

```
head -n1 -q `git grep --name-only $0` < /dev/null | sed s/OBJECT.// 
```

或者，您可以简单地通过管道输出 `git grep`to `xargs`which 允许您将调用链接到`head`或`sed`如[patthoyts answer](https://stackoverflow.com/questions/11628838/make-head-stop-waiting-for-input/11629060#11629060)中所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:37:43.103

你真的不需要 head - sed 可以自己做这一切。

```
git grep --name-only $0 | sed -n "s/OBJECT.//;1p" 
```

## 更新

OP 正在读取 git grep 返回的每个文件的第一行，因此：

```
git grep --name-only $0 | xargs -l sed -n "1{s/OBJECT.//;p}" 
```

# objective-c - 等效于 ObjC 的 SJCL.js

> ID：11628840
> 
> 赞同：0
> 
> 时间：2012-07-24T10:24:33.907
> 
> 标签：objective-c, macos, aes, sjcl

我正在为 RESTful Web 服务开发客户端应用程序。Web 应用程序使用 Stanford JS Crypto 库进行一些客户端站点加密，我也需要对应用程序执行此操作。

但是 SJCL 库不只是 AES256 加密数据，它确实提供了一种易于包装的方法。查看 SJCL 简短概述页面了解更多详细信息：[http ://crypto.stanford.edu/sjcl/](http://crypto.stanford.edu/sjcl/)

有没有人有提供兼容过程来加密数据的经验，比如 SJCL 会用 ObjC 做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:28:11.070

OS X 和 iOS 都带有几个框架，它们提供了你需要做的一切，就像 SJCL:`CommonCrypto/CommonCrypto.h`和`Security/Security.h`开始一样。从 AES 到 PBKDF2，介于 SHA-1/2 或 Base64 之间。

# c# - C#表单窗口中的多个鼠标宏

> ID：11628846
> 
> 赞同：0
> 
> 时间：2012-07-24T10:24:52.083
> 
> 标签：c#, windows, forms

我想制作一个可以多次打开的 Windows 窗体应用程序。

当我点击第一个表单上的“GO”按钮时，我希望鼠标在表单内执行一系列点击（由特定坐标给出），而我仍然可以使用我的手持鼠标控制光标，所以基本上有2只老鼠。

如果我在所有表单上单击“GO”按钮，我希望所有鼠标在相应的表单内执行一系列单击（全部一致运行，互不影响），同时我仍然可以控制手持鼠标做我想做的事 IE 浏览网页。

这可能吗？如果是这样，我会从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:44:56.540

To the best of my knowledge it is impossible to have two mice on one windows system, if you simulate a click somewhere it normally moves the mouse to that location.

You can try the lib Wolfgang suggested or you can use the code from [this question](https://stackoverflow.com/questions/2416748/how-to-simulate-mouse-click-in-c)

As for it running multiple times you could just load up multiple threads all running the same code, like this:

```
 static void Main(string[] args)
    {
        Thread[] threads = new Thread[5]; // replace 5 with how many times you want to run it.
        for(int i = 0; i < threads.Length;i++)
        {
            threads[i] = new Thread(new ThreadStart(MyCode));
            threads[i].Start();
        }
    }

    static void MyCode()
    {
        //put code here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:29:15.870

您可以使用`PInvoke`和调用`SendInput`API。 [http://www.pinvoke.net/default.aspx/user32.sendinput](http://www.pinvoke.net/default.aspx/user32.sendinput)

# oop - Scala 中的模式匹配如何克服 switch case 导致的重复？

> ID：11628852
> 
> 赞同：26
> 
> 时间：2012-07-24T10:25:11.133
> 
> 标签：oop, scala, design-patterns

**注意：我问这个问题是出于好奇，而不是质疑语言功能的重要性。**

看起来是向命令式编程世界的人们介绍的一个很棒的功能。我是 Scala 的新手，仍然试图找出所有的地方，让它的大量构造适合并且可以被利用。

模式匹配绝对可以比 switch 案例做得好 100 倍。但是，自从 OOP 出现以来，它仍然是一个案例构造，我们习惯于使用多态性。

*所以简而言之，我发现难以理解的是，如果 switch case 鼓励重复，我们最好将与 case 相关的代码编写到各自的类中，那么 Scala 的模式匹配如何克服这个问题？*

*我们仍然可以为各种情况使用类或泛型类，并再次利用多态性来满足我们的需要。*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-24T11:10:11.807

这是对象和数据结构之间差异的问题。

如果您正在处理对象，请使用子类型多态性 - 添加新类型不需要重新编译、重新测试或重新部署现有类型，而添加新算法（接口上的方法，位于层次结构的顶部）则需要.

如果您正在处理数据结构，请使用模式匹配 - 添加新算法不需要重新编译、重新测试或重新部署现有算法，而添加新类型则需要。

[在此处](http://web.archive.org/web/20121020042747/http://blog.objectmentor.com/articles/2007/11/02/active-record-vs-objects)阅读更多相关信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T11:10:42.087

模式匹配是一个很棒的功能，因为它易于使用。

它比广泛使用的面向对象语言中的大多数设计模式解决了“如何为对象系统带来功能”的问题。例如有[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)，它将算法与其对象结构分开。这个想法很棒，因为它允许我们改变对象的行为而无需触及它们的类。但另一方面，这种模式在符号的过于复杂和冗长方面失败了。使用模式匹配，这可以很容易地解决：

```
def calc(e: Expression): Double = e match {
  case Num(n) => n
  case Add(a, b) => calc(a)+calc(b)
  case Sub(a, b) => calc(a)-calc(b)
  ...
} 
```

这将 AST 的计算与其定义分开，并且比多态访问者模式更易于阅读。

因为模式匹配非常简单，所以我们可以在任何地方使用它——你会在大多数 OO 语言中从未想过的地方找到它。一个很好的例子是 Actors，它使用代数数据类型 (ADT) 在彼此之间进行通信：

```
sealed trait Message
case class Hello(name: String) extends Message
case class Bye(name: String) extends Message
case class Question(q: Symbol) extends Message

class MySelf extends Actor {
  def receive {
    case Hello(name) => println("Hello "+name)
    case Bye(name) => println("Buy "+name)
    case Question('AreYouOk) => sender answer "I'm ok"
    ...
  }
} 
```

我希望通过使用访问者模式来实现这一点，你会获得很多乐趣！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T11:06:39.110

我看到很少有模式匹配完成 OOP 并允许更多模块化编程的地方。

1.  当您有一个大项目时，您希望避免在您的域类中放置“过多的行为”。您可以将行为移到外部，并且通常有一个方法在层次结构的顶部接收一个类并与子类匹配。

2.  当您使用特定库并且想要添加行为但无法修改源时。您也可以为此使用隐式转换，但在简单的情况下，模式匹配更快更容易。

要回答您的问题，我可能会说您低估了模式匹配可以带来的代码重用：当您创建一个创建**PartialFunction**的匹配块时。如果需要重用模式匹配块，可以通过 orElse 方法使用 PartialFunction 链接。这在设计特定对象的分层处理程序集时也带来了好处，因为匹配是按顺序执行的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T10:37:51.160

继承和案例构造都是实现多态性的有效方法。它们在稍微不同的情况下都很好。与基于继承的多态性不同，模式匹配是不可扩展的，但您通常不需要它。函数式编程中的许多结构，例如 Option、Either 或 :: 可以更简洁地与 oop 多态性和 if 语句的模式匹配一​​起使用。一般来说，任何问题都可以用任何一种多态性来解决。这只是优雅的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T11:15:18.470

如果您滥用它们，它们实际上并没有确切的问题。

正如继承的多态性会导致您的类吸引不属于该类的各种方法时遇到问题一样。

虽然 Java 对继承有一些合理的强大支持，但 switch 语句只是一个笑话。

在 Scala 中，您对继承和惊人的模式匹配有更强大的支持。

为你的钉子挑选合适的锤子是你的工作。

# iphone - UINavigationBar 隐藏时调整视图大小

> ID：11628855
> 
> 赞同：0
> 
> 时间：2012-07-24T10:25:16.813
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationbar

当我隐藏 UINavigationBar 时，我希望当前 UIViewController 的视图占据整个屏幕（没有状态栏）。它不必是动画的。我不知道如何更改框架。我还应该提到我使用的是笔尖，所以在界面生成器中我选择了模拟指标：导航栏，我不知道它是否有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:41:51.417

试试这个：

```
// On YourViewController.m

// Call this method when the nav bar gets hidden
- (void)navigationBarDidBecomeHidden {
    self.view.frame = CGRectMake(0, 0, 320, 480);
} 
```

# c# - 如何确定服务器端 C# 上的浏览 器窗口大小

> ID：11628859
> 
> 赞同：37
> 
> 时间：2012-07-24T10:25:31.150
> 
> 标签：c#, asp.net, .net

如何获得当前打开的浏览器屏幕窗口的确切高度和宽度？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-24T10:36:34.383

您可以使用 Javascript 来获取视口的宽度和高度。然后通过隐藏的表单输入或 ajax 将值传回。

## 最简单的

```
var width = $(window).width();
var height = $(window).height(); 
```

## 使用隐藏表单输入的完整方法

假设您有：[JQuery 框架](http://jquery.com/)。

首先，添加这些隐藏的表单输入来存储宽度和高度，直到回发。

```
<asp:HiddenField ID="width" runat="server" />
<asp:HiddenField ID="height" runat="server" /> 
```

接下来我们要获取窗口（视口）的宽度和高度。JQuery 对此有两种方法，恰当地命名为 width() 和 height()。

将以下代码添加到 head 元素内的 .aspx 文件中。

```
<script type="text/javascript">
$(document).ready(function() {

    $("#width").val() = $(window).width();
    $("#height").val() = $(window).height();    

});
</script> 
```

**结果**

这将导致浏览器窗口的宽度和高度在回发时可用。只需像这样访问隐藏的表单输入：

```
var TheBrowserWidth = width.Value;
var TheBrowserHeight = height.Value; 
```

此方法在回发时提供高度和宽度，但在初始页面加载时不提供。

***关于 UpdatePanels 的注意事项：****如果您通过 UpdatePanels 发回，我相信隐藏的输入需要在 UpdatePanel 中。*

或者，您可以通过 ajax 调用回发这些值。如果您想对窗口大小调整做出反应，这很有用。

**jquery 3.1.1 更新**

我不得不将 JavaScript 更改为：

```
$("#width").val($(window).width());
$("#height").val($(window).height()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T10:48:39.033

所以这就是你将如何做到的。

编写一个 javascript 函数，该函数在调整窗口大小时触发。

```
window.onresize = function(event) {
    var height=$(window).height();
    var width=$(window).width();
    $.ajax({
     url: "/getwindowsize.ashx",
     type: "POST",
     data : { Height: height, 
              Width:width, 
              selectedValue:selectedValue },
     contentType: "application/json; charset=utf-8",
     dataType: "json",
     success: function (response) { 
           // do stuff
     }

} 
```

处理程序的代码隐藏：

```
 public class getwindowsize : IHttpHandler {

public void ProcessRequest (HttpContext context) {
    context.Response.ContentType = "application/json";
     string Height = context.Request.QueryString["Height"]; 
     string Width = context.Request.QueryString["Width"]; 
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-14T12:43:59.100

我使用来自[detectmobilebrowser.com](http://detectmobilebrowsers.com/)的正则表达式来检查`user-agent`字符串。即使它说它最后一次更新是在 2014 年，但它在我测试的设备上是准确的。

这是`C#`我在提交此答案时从他们那里得到的代码：

```
<%@ Page Language="C#" %> 
<%@ Import Namespace="System.Text.RegularExpressions" %>
<%
    string u = Request.ServerVariables["HTTP_USER_AGENT"];
    Regex b = new Regex(@"(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino", RegexOptions.IgnoreCase | RegexOptions.Multiline);
    Regex v = new Regex(@"1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-", RegexOptions.IgnoreCase | RegexOptions.Multiline);
    if ((b.IsMatch(u) || v.IsMatch(u.Substring(0, 4)))) {
        Response.Redirect("http://detectmobilebrowser.com/mobile");
    }
%> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-26T08:58:06.847

有一个解决 page_onload 问题的解决方案（在页面加载完成之前无法获取大小）：创建一个 userControl：

```
<%@ Control Language="VB" AutoEventWireup="false" CodeFile="ClientSizeDetector.ascx.vb"    Inherits="Project_UserControls_ClientSizeDetector" %>
<%If (IsFirstTime) Then%>
<script type="text/javascript">
var pageURL = window.location.href.search(/\?/) > 0 ? "&" : "?";
window.location.href = window.location.href + pageURL + "clientHeight=" + window.innerHeight + "&clientWidth=" + window.innerWidth;
</script>
<%End If%> 
```

后面的代码：

```
 Private _isFirstTime As Boolean = False
 Private _clientWidth As Integer = 0
 Private _clientHeight As Integer = 0

 Public Property ClientWidth() As Integer
    Get
        Return _clientWidth
    End Get
    Set(value As Integer)
        _clientWidth = value
    End Set
End Property

Public Property ClientHeight() As Integer
    Get
        Return _clientHeight
    End Get
    Set(value As Integer)
        _clientHeight = value
    End Set
End Property

public Property IsFirstTime() As Boolean 
    Get
        Return _isFirstTime
    End Get
    Set(value As Boolean)
        _isFirstTime = value
    End Set
End Property

Protected Overrides Sub OnInit(e As EventArgs)

    If (String.IsNullOrEmpty(Request.QueryString("clientHeight")) Or String.IsNullOrEmpty(Request.QueryString("clientWidth"))) Then
        Me._isFirstTime = True
    Else
        Integer.TryParse(Request.QueryString("clientHeight").ToString(), ClientHeight)
        Integer.TryParse(Request.QueryString("clientWidth").ToString(), ClientWidth)
        Me._isFirstTime = False
    End If
End Sub 
```

所以之后，你可以调用你的控件属性

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-07T16:46:54.093

这是一个 Ajax、`asxh`处理程序和会话变量方法：

**处理程序：**

```
using System;
using System.Web;

public class windowSize : IHttpHandler , System.Web.SessionState.IRequiresSessionState  {

    public void ProcessRequest (HttpContext context) {
        context.Response.ContentType = "application/json";

        var json = new System.Web.Script.Serialization.JavaScriptSerializer();
        var output = json.Serialize(new { isFirst = context.Session["BrowserWidth"] == null });
        context.Response.Write(output);

        context.Session["BrowserWidth"] =  context.Request.QueryString["Width"]; 
        context.Session["BrowserHeight"] = context.Request.QueryString["Height"];
    }

    public bool IsReusable
    {
        get { throw new NotImplementedException(); }
    }
} 
```

**Javascript：**

```
window.onresize = function (event) {
    SetWidthHeight();
}
function SetWidthHeight() {
    var height = $(window).height();
    var width = $(window).width();
    $.ajax({
        url: "windowSize.ashx",
        data: {
            'Height': height,
            'Width': width
        },
        contentType: "application/json; charset=utf-8",
        dataType: "json"
    }).done(function (data) {     
        if (data.isFirst) {
            window.location.reload();
        };
    }).fail(function (xhr) {
        alert("Problem to retrieve browser size.");
    });

}
$(function () {
    SetWidthHeight();
}); 
```

**在 aspx 文件上：**

```
...
<script src="Scripts/jquery-1.9.1.min.js"></script>
<script src="Scripts/BrowserWindowSize.js"></script>
...
<asp:Label ID="lblDim" runat="server" Text=""></asp:Label>
... 
```

**后面的代码：**

```
protected void Page_Load(object sender, EventArgs e)
  {
      if (Session["BrowserWidth"] != null)
      {
          // Do all code here to avoid double execution first time
          // ....
          lblDim.Text = "Width: " + Session["BrowserWidth"] + " Height: " + Session["BrowserHeight"];
      }
  } 
```

来源： [https ://techbrij.com/browser-height-width-server-responsive-design-asp-net](https://techbrij.com/browser-height-width-server-responsive-design-asp-net)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-08T11:28:41.250

下面是我如何使用 Cookies 解决它：

首先，在网站主脚本里面：

```
var browserWindowSize = getCookie("_browserWindowSize");
var newSize = $(window).width() + "," + $(window).height();
var reloadForCookieRefresh = false;

if (browserWindowSize == undefined || browserWindowSize == null || newSize != browserWindowSize) {
    setCookie("_browserWindowSize", newSize, 30);
    reloadForCookieRefresh = true;
}

if (reloadForCookieRefresh)
    window.location.reload();

function setCookie(name, value, days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "") + expires + "; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
} 
```

在 MVC 动作过滤器内部：

```
public class SetCurrentRequestDataFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // currentRequestService is registered per web request using IoC
        var currentRequestService = iocResolver.Resolve<ICurrentRequestService>();

        if (filterContext.HttpContext.Request.Cookies.AllKeys.Contains("_browserWindowSize"))
        {
            var browserWindowSize = filterContext.HttpContext.Request.Cookies.Get("_browserWindowSize").Value.Split(',');
            currentRequestService.browserWindowWidth = int.Parse(browserWindowSize[0]);
            currentRequestService.browserWindowHeight = int.Parse(browserWindowSize[1]);
        }

    }
} 
```

# objective-c - Mac OS 上的防病毒 API

> ID：11628867
> 
> 赞同：3
> 
> 时间：2012-07-24T10:25:57.087
> 
> 标签：objective-c, macos

我想获取安装在我的 Mac 机器上的防病毒产品的信息。我正在开发一个将显示所有系统信息的应用程序，并且我能够获取系统基本信息，但无法获取安全详细信息，例如该机器中安装的所有防病毒/反间谍软件产品。

我正在使用 Obj-C 开发我的应用程序，并试图仅在其中获取 api。我想按需调用该 api，因此它可以直接嵌入到应用程序中，也可以在外部执行。如果我也能得到那个命令，那么我就可以使用它。

请问有谁知道我应该调用什么API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T23:21:58.397

OPSWAT maintains a commercial C++ library/api called OESIS Framework which enables the integrator to obtain information and manage common functions of 3rd party security applications installed on Mac OS devices.

The list of security applications that can be called is at- [http://www.opswat.com/products/oesis-framework/supported-applications#!product=all&os=mac](http://www.opswat.com/products/oesis-framework/supported-applications#!product=all&os=mac)

Available API calls, by application type are at [http://www.opswat.com/products/oesis-framework/available-apis](http://www.opswat.com/products/oesis-framework/available-apis)

Disclaimer: I work for OPSWAT.

# ios - 导航到不同的视图控制器并返回时如何保留 UITextField 文本？

> ID：11628871
> 
> 赞同：0
> 
> 时间：2012-07-24T10:26:08.220
> 
> 标签：ios

第一个视图控制器具有多个文本字段以及三个按钮，其中每个按钮被推送到不同的视图控制器。其他视图控制器的情况也是如此。我想保持输入的文本字段值保持不变，无论在所有视图中从一个视图控制器导航到其他视图控制器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:14:25.120

Be careful. You have to know when your controllers are deallocated. After deallocation you cannot restore the values, but if you stored the values in i.e. in NSUserDefaults, when the controller deallocates, then you can restore.

Normally, if another viewController is pushed, the last one is hold in memory, to get back smoothly. Forward pushing is always initializing a new controller, for which you have to think about how to store the old values (i.e. NSUserDefaults or implementing nscoding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:05:22.817

将按钮（或包含文本的 NSStrings）作为 ivars（实例变量）存储在您的第一个控制器中。只要您不摆脱该控制器并重新创建它，它们就应该持续存在。

# php - CRYPT_BLOWFISH 用法

> ID：11628873
> 
> 赞同：2
> 
> 时间：2012-07-24T10:26:21.430
> 
> 标签：php, login, hash, passwords

我一直在研究处理用户登录密码的选项，我对如何使用 CRYPT_BLOWFISH 有一些疑问。我阅读了有关如何实现它的信息，但我想在开始使用它之前更好地理解它。

所以我打算做这样的事情：

```
 function genBlowfishSalt()
 {
      //return random string for Salt
 }

 $hash = crypt($password, '$2a$12$'. genBlowFishSalt()); 
```

我的问题如下：

1) '$2a$12$' 是什么？

2）我知道在这种情况下我必须为每个用户存储盐，我想在没有自己的哈希的情况下存储它是可以接受的吗？盐是否会附加到散列值？

3) 登录后，我将如何比较散列值？

4）我还读到有一个需要为每个用户存储多次迭代的概念，这对密码的散列有什么影响？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:33:50.557

1）那是哈希的盐，你需要使盐更随机（EG不同的盐为每个用户提供最大的保护）

2）是的，您可以将盐存储在一个字段中，将加盐哈希存储在另一个字段中。

3）您将执行以下步骤

1.  从表单中获取密码和用户名
2.  从数据库中获取盐，然后用该盐 crypt() 密码字符串
3.  您获得的新字符串（散列+加盐密码）然后将其与数据库进行比较（EG 是用户名 = xxx 和密码 = zz9zjz9）并查看是否返回任何行，如果返回行那么你知道它是正确的密码并登录该人。

4）我不确定你的意思，请详细说明！

# android - 运行线程后设置新的内容视图

> ID：11628874
> 
> 赞同：0
> 
> 时间：2012-07-24T10:26:31.980
> 
> 标签：android, multithreading, view

我正在为下载和解析一些数据的应用程序创建启动活动。在加载时，我想查看我的 startup_loading.xml 文件，其中包含一个进度条和一个设置为“正在加载”的文本视图。我在启动时需要做的所有事情都放在一个线程中，即 startUp 线程。运行此线程后，数据已加载，然后我想显示一个新视图：startup_loaded.xml，其中包含两个按钮，可将您发送到应用程序中的不同活动。

但是我在使用两个视图并在我想要的时候显示它们时遇到了麻烦。我想如果我把

> setContentView(R.layout.startup_loaded);

在我的线程的可运行结束时它会工作，但我得到一个错误，这是不可能的

> CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能接触其视图。

我想我可以像这样修复它：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    startUp.start();
    String language =  Locale.getDefault().getISO3Language();
    if (startUp.isAlive()) {
        setContentView(R.layout.startup_loading);
        tv1=(TextView)findViewById(R.id.tvloading);
        if(language.equals("nld")) {
            tv1.setText("bijwerken");
        } else {
            tv1.setText("loading");
        }
        pbar=(ProgressBar)findViewById(R.id.progressBar1);
        pbar.setVisibility(1);
    } else {
        setContentView(R.layout.startup_loaded); 
    }
}
Thread startUp= new Thread() {
    public void run() {
        // all the loading
    }
}; 
```

但这也不起作用：我的 startup_loaded 从未出现。我尝试完成我的线程（`finish();`在可运行的末尾），但它由整个应用程序完成。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:34:25.763

使用[处理程序](http://developer.android.com/reference/android/os/Handler.html)对象。或者，使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)并在 onPostExecute() 方法中设置新内容。

# list - 覆盖列表元素？

> ID：11628875
> 
> 赞同：0
> 
> 时间：2012-07-24T10:26:34.887
> 
> 标签：list, prolog

有没有办法将元素添加到列表中，而不关心它是否已经存在并且列表仍然不包含重复项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:20:04.603

您可以先检查该项目是否包含在列表中，如果不包含则添加它。例如：

```
add_no_duplicates(List, Item, NList):-
  member(Item, List) -> NList=List ; NList=[Item|List]. 
```

测试：

```
?- add_no_duplicates([a,b,c],d,L).
L = [d, a, b, c].
?- add_no_duplicates([a,b,c,d],d,L).
L = [a, b, c, d]. 
```

请注意，所写的 add_no_duplicates/3 需要实例化输入列表（List）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T16:58:58.340

如果您正在寻找效率，有比列表更好的数据结构，可以在 SWI-Prolog 中使用。特别是，您的用例适合[add_nb_set](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.13%27,swi%28%27/doc/Manual/nb_set.html%27%29%29) (+Key, !Set, ?New)。

参数`New`控制 WRT 重复的行为：你应该使用`true`for don't care。参数`Set`必须与`empty_nb_set(Set)`

**编辑**：我很抱歉，参数`Set`必须是一个免费的变量`don't care behaviour`，例如`add_nb_set(Key, Set, _)`，如文档页面所示......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:34:28.847

基本上你想实现一个集合；查看[list 手册页](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.12%27,swi%28%27/doc/Manual/lists.html%27%29%29)以了解设置操作。似乎没有添加，但有[union/3](http://www.swi-prolog.org/pldoc/doc_for?object=union/3)，因此您可以通过与一组新元素（intersection（[NewEl]，OldSet，NewSet）相交来添加元素。请注意，您不必将列表转换为set （列表是一个集合，只要它没有重复项；list_to_set/2 只是消除它们）。

现在，如果您有一个包含重复项的列表，并且您有时希望按照您所说的方式添加一个元素，您将不得不自己实现一些东西。

# google-app-engine - 在 Google App Engine 中保护 RESTful API

> ID：11628887
> 
> 赞同：6
> 
> 时间：2012-07-24T10:27:48.423
> 
> 标签：google-app-engine, oauth, webapp2

我试图弄清楚如何实现以下身份验证流程：

1.  用户访问 Web 应用程序（最有可能使用 Ruby on Rails 编写）并进行身份验证（例如，用户名/密码）。
2.  客户端通过基于 Google App Engine（Python、webapp2）构建的 RESTful API 提供的 AJAX 使用数据。

![在此处输入图像描述](../Images/1801039b688d10d3eb19fa491ef4cc5b.png)

**要求：**

1.  只有在 Web 应用程序 (Rails) 中经过身份验证的用户才能访问 App Engine 上托管的 API。
2.  用户可以在 Web 应用程序 (Rails) 中拥有不同的角色，并且 API (App Engine) 需要知道哪些角色与给定用户关联以限制对某些数据的访问。
3.  客户端应该能够直接通过 AJAX 调用 API（App Engine），而无需通过 Web 应用程序（Rails）路由所有请求。

我正在寻找有关如何实施此类工作流程的建议。我应该使用 OAuth（或 OAuth2）来访问 API 吗？OAuth 提供程序是否应该存在于 App Engine 上，并且 Web 应用程序 (Rails) 是否应该代表用户向 API 请求令牌？如果是这样，只允许 Web 应用程序（Rails）请求 OAuth 令牌的最佳方式是什么？还是我应该考虑完全不同的策略？

非常感谢任何建议。我也在寻找在上述上下文中实现 OAuth 的库的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:15:34.170

如果您正在考虑使用 OAuth 为您的安全层实现基于 Google App Engine 构建的 API，我建议您谨慎行事。我目前参与了一个正在努力解决这个问题的项目。GAE 上的 OAuth 层仍然是新的，并且被 Google 认为是“实验性的”。谷歌的文档在这一点上是最少的。一切从[这里](https://developers.google.com/appengine/docs/java/oauth/overview)开始。如果您尝试继续，我祝您一切顺利，如果您这样做，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T23:55:30.017

我对同样问题的解决方案是编写我自己的三向身份验证（如 OAuth）：

1.  用户在 RoR 服务器上通过身份验证后，它会使用临时令牌进行响应。此令牌存储在 RoR 服务器上，有效期为 60 秒，并包含用户的角色。
2.  浏览器将此令牌（使用 AJAX）发送到 webapp2 服务器。这就像只使用令牌登录该服务器。
3.  webapp2 服务器将令牌转发到 RoR 服务器以确保其有效。
4.  RoR 服务器确保令牌没有过期并立即删除令牌以防止重复请求。如果令牌有效，则 RoR 服务器以用户的角色进行响应。
5.  如果来自 RoR 服务器的响应良好，则 webapp2 服务器会响应浏览器的 AJAX 调用（在步骤 2 中），并使用 cookie 指示此用户现在已登录。会话应包含用户的角色。
6.  对 webapp2 服务器的后续请求将包含 cookie，以便服务器可以根据用户的角色进行响应。

# javascript - 计算机领域的准系统是什么意思？

> ID：11628890
> 
> 赞同：0
> 
> 时间：2012-07-24T10:27:55.250
> 
> 标签：javascript, node.js

我看到一个介绍 node.js 的视频。在介绍中，Ryan Dahl 在 36:12 说 javascript 是一种非常简单的语言。这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:29:07.417

正如链接的定义所表明的那样，“裸骨”意味着“简单、基本、简洁”。想想一个骨架，而不是一个充满所有器官的身体。“Bare Bones”是一个笼统的表达方式，没有特定于计算领域的含义。

# c - 在 vfork() / clone() 中调用 execv() 之前的 setuid()

> ID：11628892
> 
> 赞同：0
> 
> 时间：2012-07-24T10:28:02.240
> 
> 标签：c, linux

我需要从服务器分叉一个 exec。由于我的服务器内存占用很大，我打算使用`vfork()`/linux `clone()`。我还需要为`stdin`/ `stdout`/打开管道`stderr`。这是否允许使用`clone()`/ `vfork()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:20:29.473

从标准：

> [..] 如果创建的进程修改了除用于存储返回值`vfork()`的类型变量以外的任何数据，或从被调用的函数返回，或在成功调用或之前调用任何其他函数，则行为未定义函数族之一。`pid_t``vfork()``vfork()``_exit()``exec`

调用`setuid`or之类的函数的问题`pipe`在于它们可能会影响父进程和子进程之间共享的地址空间中的内存。如果您之前需要做任何事情`exec`，最好的方法是编写一个小的 shim 进程来执行您需要的任何操作，然后`exec`转到最终的子进程（可能是通过 提供的参数`argv`）。

```
shim.c
======

enum {
    /* initial arguments */
    ARGV_FILE = 5, ARGV_ARGS
};
int main(int argc, char *argv[]) {
    /* consume instructions from argv */
    /* setuid, pipe() etc. */
    return execvp(argv[ARGV_FILE], argv + ARGV_ARGS);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:41:21.743

我会改用`clone()`标志`CLONE_VFORK|CLONE_VM`；有关详细信息，请参见[man 2 clone](http://www.kernel.org/doc/man-pages/online/pages/man2/clone.2.html)。

因为`CLONE_FILES`没有设置，所以子进程有自己的文件描述符，可以关闭和打开标准描述符，完全不影响父进程。

因为克隆的进程是一个单独的进程，它有自己的用户和组 ID，所以通过`setresgid()`and设置它们`setresuid()`（可能调用`setgroups()`或`initgroups()`首先设置额外的组 - 请参阅[man 2 setresuid](http://www.kernel.org/doc/man-pages/online/pages/man2/setresgid.2.html)、[man 2 setgroups](http://www.kernel.org/doc/man-pages/online/pages/man2/setgroups.2.html)和[man 3 initgroups](http://www.kernel.org/doc/man-pages/online/pages/man3/initgroups.3.html)了解详细信息) 根本不会影响父母。

`CLONE_VFORK|CLONE_VM`标志意味着这应该`clone()`表现得像`vfork()`，子进程在与父进程相同的内存空间中运行，直到`execve()`调用。

这种方法避免了使用中间可执行文件时的延迟——它非常重要——但这种方法完全是 Linux 特定的。

# javascript - 数据传输在 chrome 中不起作用

> ID：11628895
> 
> 赞同：2
> 
> 时间：2012-07-24T10:28:22.190
> 
> 标签：javascript, html, google-chrome, javascript-events

我正在实现从缩略图中拖动图像并放入画布中并绘制它。

我在事件 ondragstart 期间使用了 datatransfer.setdata()，在事件 ondrop 期间使用了 datatransfer.getdata()。它在 Firefox 中运行良好，但在 chrome 中无法运行。我知道在 chrome 中不支持数据传输。那么，什么可以是一个好的解决方案，也应该是跨浏览器兼容的！

```
function dragIt(event) {
event.dataTransfer.setData("URL", event.target.id)
};

function dropIt(event) {
  var theData = new Image();
  theData = event.dataTransfer.getData("URL");
  dt = document.getElementById(theData);
  event.preventDefault();
  var ctx = this.getContext('2d');
  ctx.clearRect(0,0,this.width,this.height);
  ctx.drawImage(dt, 0, 0);      
};

var out = document.getElementById('out');
        var Can1 = document.createElement("canvas");
        Can1.height="100";
        Can1.width="100";
        Can1.style.cssText = 'position:relative; top:5px;left:500px;border:2px  solid black;'  
        Can1.ondragover = function(event) {
        event.preventDefault();
        };
        Can1.ondrop = dropIt;  
        out.appendChild(Can1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T18:12:03.367

I know the proverbial horse has probably bolted on this question but I've also just noticed this problem in Chrome with getData/setData. For me, it works *only* if you use "text" or "text/plain" as the format for the data, and everything else fails with `event.dataTransfer.getData(format)` returning `undefined`.

In Chrome's Developer Tools, you can inspect the `event.dataTransfer.types` property to see which values are accepted for the "format" parameter to the getData/setData functions.

Therefore changing "URL" to "text" may solve the problem in this case. Unfortunately, I've so far failed to find any information on why Chrome's chosen to implement only these formats.

# iphone - iPhone应用程序在连接到远程服务器时在设备上随机崩溃？

> ID：11628896
> 
> 赞同：-1
> 
> 时间：2012-07-24T10:28:22.207
> 
> 标签：iphone, ipad, crash

我有一个应用程序，它使用 web 服务发布和获取数据，它工作正常，但是在严格测试应用程序时，**应用程序因信号 9(Killed) 异常退出**消息而崩溃。

```
Mon Jul 16 21:07:55 unknown MyApp[167] <Warning>: NVVC Dealloc 
        Mon Jul 16 21:08:23 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.company.MyApp[0xe271]) Bug: launchd_core_logic.c:2688 (24132):10 
        Mon Jul 16 21:08:23 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.company.MyApp[0xe271]) Working around 5020256\. Assuming the job crashed. 
        Mon Jul 16 21:08:23 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:com.company.MyApp[0xe271]) Job appears to have crashed: Segmentation 
        fault 
        Mon Jul 16 21:08:23 unknown SpringBoard[29] <Warning>: Application 'MyApp' exited abnormally with signal 11: Segmentation fault 
        Mon Jul 16 21:09:04 unknown lockdownd[20] <Error>: (0x403000) handle_connection: Could not receive USB message #7 from Xcode. Killing connection 
        Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.apple.mobilemail[0x55fb]) Exited: Killed 
        Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.apple.mobilephone[0xa13c]) Exited: Killed 
        Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.MyApp.app[0x137]) Exited: Killed 
        Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (com.apple.accessoryd) Exited: Killed 
        Mon Jul 16 22:00:41 unknown SpringBoard[29] <Warning>: Application 'Mail' exited abnormally with signal 9: Killed 
        Mon Jul 16 22:00:41 unknown SpringBoard[29] <Warning>: Memory level is not normal (15%). Delaying auto-relaunch of 'Mail' for 30 seconds. Mon Jul 16 22:00:41 unknown SpringBoard[29] <Warning>: Application 'app' exited abnormally with signal 9: Killed 
        Mon Jul 16 22:00:42 unknown SpringBoard[29] <Warning>: Application 'Phone' exited abnormally with signal 9: Killed 
```

我四处搜索，但找不到任何解决方案或杀死应用程序的原因。请帮助我解决问题。

编辑#2 在这里，我添加了一些代码，我的应用程序崩溃了。

```
 @try {

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    NSUserDefaults *defaults2 = [NSUserDefaults standardUserDefaults];

    NSString *string = [NSString stringWithFormat:URL];

                NSURL *url = [NSURL URLWithString:string];
            NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: url];
                // NSURLRequest *request =[NSURLRequest requestWithURL:[NSURL URLWithString:synStr]];
            NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
            [connection start];
            [connection release];
            if(label != nil){
       progressView = [[ProgressView showHUDAddedTo:self.tabBarController.view animated:YES]retain];
       progressView.labelText = label;
        }

       [request release];
           }
    @catch (NSException * e) {   
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:11:42.847

你使用`NSURLConnection`不正确。如果你看[这里，](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)你可以看到你正在启动一个异步连接。看起来您在连接对象完成之前释放了它，这导致了分段错误。

# python - 使用 BeautifulSoup 提取和分组元素/标签

> ID：11628902
> 
> 赞同：0
> 
> 时间：2012-07-24T10:28:41.183
> 
> 标签：python, beautifulsoup

我有一个包含以下数据类型和结构的文件：

```
<data>
    <from>A</from>
    <to>B</to>
    <data>
        <name>EXAMPLE ONE</name>
        <info>
            <some_data>1</some_data>
            <more_data>2</more_data>
        </info>
        <random>
            <some_tag>
            </foobar>
            <foo>
                <bar />
           </foo>
        </random>
    </data>
    <data>
        <name>EXAMPLE TWO</name>
        <info>
            <some_data>3</some_data>
            <more_data>4</more_data>
        </info>
        <random>
            <some_tag>
            </foobar>
            <foo>
                <bar />
           </foo>
        </random>
   </data>
</data>
<data>
    <from>C</from>
    <to>D</to>
    <data>
        <name>EXAMPLE</name>
        <info>
            <some_data>1</some_data>
            <more_data>2</more_data>
        </info>
        <random>
            <some_tag>
            </foobar>
            <foo>
                <bar />
           </foo>
        </random>
    </data>
 </data> 
```

数据在文件中以这种精确的结构继续，除了可以重复 n 次的最里面的`<data>...</data>`标签，数据结构总是以`<data>`标签开始，然后以`<from>...</from>`和`<to>...</to>`标签继续。

我想要做的是提取最外层`<data>`标签之间的所有数据，`<to>`并`<from>`作为数据块的描述。我当然也想将最里面的标签彼此分开，`<data>`并以某种方式保存这些数据，以便清楚地知道最外面的数据与父数据相关。

我不知道我想如何保存数据，所以任何例子都值得赞赏！

我正在使用 Python 模块 BeautifulSoup 对此进行测试，并在这里搜索并阅读了很多示例，但没有找到任何可以为我指明正确方向的东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:09:30.853

`<data>`您将标签名称加倍作为记录容器以及内部元素的事实会产生问题。`BeautifulSoup`可以容忍此类问题，如果您无法返回并更改 XML 结构，您可能需要使用以下方法。

将数据分配给变量。当然，这可以从文本文件中读取：

```
data = '''<data>
    <from>A</from>
    <to>B</to>
    <data>
        <name>EXAMPLE ONE</name>
        <info>
            <some_data>1</some_data>
            <more_data>2</more_data>
        </info>
        <random>
            <some_tag>
            </foobar>
            <foo>
                <bar />
           </foo>
        </random>
    </data>
    <data>
        <name>EXAMPLE TWO</name>
        <info>
            <some_data>3</some_data>
            <more_data>4</more_data>
        </info>
        <random>
            <some_tag>
            </foobar>
            <foo>
                <bar />
           </foo>
        </random>
   </data>
</data>
<data>
    <from>C</from>
    <to>D</to>
    <data>
        <name>EXAMPLE</name>
        <info>
            <some_data>1</some_data>
            <more_data>2</more_data>
        </info>
        <random>
            <some_tag>
            </foobar>
            <foo>
                <bar />
           </foo>
        </random>
    </data>
 </data>''' 
```

处理数据：

```
from BeautifulSoup import BeautifulSoup
from pprint import pprint

store = {}
key = ()

soup = BeautifulSoup(data)

recs = soup.findAll('data')

for rec in recs:
    if rec.find('from'):
        key = (rec.find('from').text, 
               rec.find('to').text)
    else:
        item = {}
        item['name'] = rec.find('name').text
        item['some_data'] = rec.find('info').find('some_data').text
        item['more_data'] = rec.find('info').find('more_data').text
        if store.has_key(key):
            store[key].append(item)
        else:
            store[key] = [ item ]

pprint(store) 
```

这个虚拟数据的结果：

```
{(u'A', u'B'): [{'more_data': u'2',
                 'name': u'EXAMPLE ONE',
                 'some_data': u'1'},
                {'more_data': u'4',
                 'name': u'EXAMPLE TWO',
                 'some_data': u'3'}],
 (u'C', u'D'): [{'more_data': u'2', 'name': u'EXAMPLE', 'some_data': u'1'}]} 
```

# iphone - 如何以编程方式下载音频文件？

> ID：11628903
> 
> 赞同：8
> 
> 时间：2012-07-24T10:28:41.113
> 
> 标签：iphone, objective-c, xcode

我想从以下链接下载音频文件

[音频文件链接](http://in.orgware.in/Heather/Heather%20voice/phraseaudio1.mp3)

我已经尝试过在这个网站上发布的其他答案。但是我不想使用 ASIHTTPRequest 所以任何人都可以告诉我如何将该链接内容下载到我的文档目录中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T10:43:48.890

那么你可以写这样的东西：

```
//Download data
NSData *data = [NSData dataWithContentsOfURL:<YOUR URL>];

//Find a cache directory. You could consider using documenets dir instead (depends on the data you are fetching)
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *path = [paths  objectAtIndex:0];

//Save the data    
NSString *dataPath = [path stringByAppendingPathComponent:@"filename"];
dataPath = [dataPath stringByStandardizingPath];
BOOL success = [data writeToFile:dataPath atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:47:43.073

You can use `NSURLConnection` to download the file **to memory** and then write it to file.

```
[NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:yourURL]
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){
                                              [data writeToFile:yourPath atomically:YES];
                                              // Audio file is ready to be played.
                                          }]; 
```

You could also create your own `NSOperationQueue` instance to perform writing in background.

If the file is large and you don't want to keep it whole in memory, you should use `AFNetworking` or you could also write your own implementation using `NSOutputStream` to write directly to disk.

# c# - MVVM 灯光：将对象从视图传递到视图模型

> ID：11628908
> 
> 赞同：2
> 
> 时间：2012-07-24T10:28:50.560
> 
> 标签：c#, mvvm, mvvm-light

我最近开始使用 MVVM light 使用 WPF，我有以下（简单场景）。

1.  MainWindow 包含一个元素列表框。

2.  选择一个并单击按钮时，我发出命令：

    ```
    ReservoirViewerCommand.Execute(null); 
    ```

3.  在 viewmodel 类上，我实例化命令并发送带有所选对象的消息：

    ```
    ReservoirViewerCommand = new RelayCommand(OpenReservoir);
    private void OpenReservoir()
    {
        Messenger.Default.Send(new LaunchShowReservoirMessage(){Reservoir=SelectedReservoir});          
    } 
    ```

    在哪里：

    ```
    class LaunchShowReservoirMessage:MessageBase
    {
        public Reservoir Reservoir { get; set; }
    } 
    ```

4.  主视图注册消息并打开一个新的子窗口：

    ```
    private void RegisterMessages() 
    {
        Messenger.Default.Register<LaunchShowReservoirMessage>(this,OnLaunchShowReservoir);
    }

    public void OnLaunchShowReservoir(LaunchShowReservoirMessage msg) {
        var showReservoir = new ReservoirViewerView();
        showReservoir.Show(); 
    } 
    ```

我需要的是新的 ViewModel (ReservoirViewerViewModel) 可以通过消息以某种方式获取传递的对象，以便我可以在子窗口上显示该对象的详细信息。

我做了一些逐步调试，但似乎永远无法到达 ViewModel 构造函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:45:17.007

我不是 MVVM 专家，但是当我想在单击 ListBox 项后导航到新视图以显示某些内容时，我会在我想在这个新视图中显示的对象中发送一条新消息，然后导航到。我写这篇文章是因为我认为您的方法有点复杂，但是我是一名 Windows Phone 应用程序开发人员，因此请相应地接受此评论。

无论如何，消息的第一个功能是允许通过视图模型进行通信，因此我认为您应该在 ReservoirViewerViewModel 中注册消息，并在此处使用 msg.Reservoir 获取 Reservoir“附件”。

在 ReservoirViewerViewModel 中：

```
private void RegisterMessages() 
{
    Messenger.Default.Register<LaunchShowReservoirMessage>(this, ReservoirReceived);
}

private void ReservoirReceived(LaunchShowReservoirMessage msg) {
    this.LocalReservoir = msg.Reservoir;
}

public Reservoir LocalReservoir { get... set... } ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:15:07.460

> “我做了一些逐步调试，但似乎永远无法访问 ViewModel 构造函数。”

确保使用以下方法之一将视图实际绑定到视图模型：

在**代码隐藏中**

```
var showReservoir = new ReservoirViewerView();
showReservoir.DataContext = ViewModelLocator.ReservoirViewerViewModel; //static property
//OR showReservoir.DataContext = new ReservoirViewerViewModel();
showReservoir.Show(); 
```

在**Xaml 视图中**

```
<Window x:Class="Garmin.Cartography.AdminBucketTools.ChildWindowView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
    DataContext="{Binding Path=ReservoirViewerViewModel, Source={StaticResource Locator}}">
    <!--Use the non-static property in your ViewModelLocator-->

    <Grid />
</Window> 
```

在**Xaml 资源中**

```
<DataTemplate DataType="{x:Type viewmodels:ReservoirViewerViewModel}">
    <views:ReservoirViewerView/>
</DataTemplate> 
```

> “我需要的是新的 ViewModel (ReservoirViewerViewModel) 可以通过消息以某种方式获取传递的对象，以便我可以在子窗口上显示该对象的详细信息。”

只需在 ReservoirViewerViewModel 类中注册相同的消息：

```
Messenger.Default.Register<LaunchShowReservoirMessage>(this, (msg) =>
{
    var reservoir = msg.Reservoir;
}); 
```

仅供参考，如果您从 GenericMessage<[content type]> 而不是 MessageBase 派生消息类，则可以使用 GenericMessage 类的已定义 Content 属性。例如：

```
public class LaunchShowReservoirMessage: GenericMessage<Reservoir>
{
    public LaunchShowReservoirMessage(Reservoir content) : base(content) { }
} 
```

接着：

```
Messenger.Default.Register<LaunchShowReservoirMessage>(this, (msg) =>
{
    var reservoir = msg.Content;
}); 
```

# c# - Context.SaveChanges() 导致重复问题

> ID：11628909
> 
> 赞同：0
> 
> 时间：2012-07-24T10:28:52.113
> 
> 标签：c#, mysql, entity-framework

目前我们正在本地主机上的 WampServer 上运行 MySQL 数据库。我们有几个类，并使用 POCO 类将它们映射到数据库表。

我们有一个存储库，用于按照标准处理所有创建、编辑和删除。我们向这个存储库传递一个 Question 对象，这个问题对象具有基本属性，例如 id、文本，还包含一个导航属性以链接到该问题的所有答案。

在 poco 类问题中，所有答案都存储为 ICollection。几周以来，这一直运行良好，能够毫无问题地更新、删除和创建。

现在突然之间，每当我们尝试编辑一个问题时，它都会导致其答案呈指数级重复，2 变成 4 变成 8，在我们知道它之前，我们在试图解决这个问题时有近 6 万个答案。

存储库中用于编辑问题的代码：

```
 public void EditQuestion(Question question)
    {
        var tempquestion = Context.Questions.Single(q => q.Question_Id == question.Question_Id);

        tempquestion.Question_Help = question.Question_Help;
        tempquestion.Question_Text = question.Question_Text;
        tempquestion.Question_Type = question.Question_Type;

        context.SaveChanges();} 
```

我们已经在每一行都设置了断点，检查了答案属性，它在整个过程中保持正确的数字，然后它命中 context.saveChanges() 如果我们突然发现它的结果是重复的.

进一步说明和要求的代码：

是的，我为此使用实体框架，我应该指定。

我对这个问题的 poco 课程是这样的：

```
public int Question_Id { get; set; }

    public string Question_Text { get; set; }

    public string Question_Help { get; set; }

    public string Question_Type { get; set; }

    [Display(Name = "Set ID")]
    public int Set_Id { get; set; }

    public Set Set { get; set; }

    private ICollection<Answer> _answers;
    public ICollection<Answer> Answers
    {
        get
        {
            if (_answers == null)
            {
                _answers = Arep.GetAnswers(this.Question_Id);
            }
            return _answers;
        }
        set
        {
            _answers = value;
        }
    } //a collection of answers belonging to this question 
```

编辑2：我想我现在可能离真正的问题又近了一大步。感谢 CodeCaster 的有用链接，我检查了我的最后一个查询，当它有 2 个答案时，它只执行 2 个插入语句，这是预期的，但我最终得到 4 个答案，显然这里真正的问题是它添加了新的当答案与已编辑的问题一起传递时，这种情况从未发生过。

希望修复将发送已编辑的问题以及与其相关的答案，这样就不会插入新的问题，也不会产生重复的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:22:36.213

感谢 CodeCaster 关于如何记录所有执行的查询的有用提示，我能够看到实际上添加了正确的数量。

问题在于它根本不应该添加答案！但是因为每当我更新问题时问题属性都有答案，所以它重新添加了所有答案！因此导致我在保存更改的整个过程中看到正确的数字，但之后的数字错误。

非常感谢CC！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:01:30.060

不知道问题是什么，无法从您的问题中读出，所以不知道这是否解决了问题，但我会让 POCO 像这样：

```
public class Question {
    public int Question_Id { get; set; }
    public string Question_Text { get; set; }
    public string Question_Help { get; set; }
    public string Question_Type { get; set; }
    [Display(Name = "Set ID")]
    public int Set_Id { get; set; }
    public Set Set { get; set; }
    public virtual ICollection<Answer> Answers { get; set; }
} 
```

答案是否有 ID 字段？我猜他们会这样做，当它们与 EF 一起使用时。

# javascript - 使用 JavaScript 将自定义对象添加到文档中

> ID：11628911
> 
> 赞同：0
> 
> 时间：2012-07-24T10:28:56.717
> 
> 标签：javascript, jquery, html

我试图创建一个包含图像的自定义对象，然后将此对象添加到文档中。例如：

```
function ImageObject(path, name, type) {
   this.name = name;
   this.type = type;
   var img = new Image();
   addListener(img, 'load', function () {
      // RESIZE THE IMAGE AND DO OTHER MANIPULATIONS HERE
   });
   img.src = path;
}
var newImg = new ImageObject(test.jpg, 'my test', 'background'); 
```

然后我想将对象添加到文档中，就像添加普通图像并在页面上查看加载的图像一样。类似的东西：`$(#container).append(newImg )`。怎么可能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:32:36.330

您可以添加`Image`到页面（通过 jQuery`append`或其他几个），但不能添加到您的`ImageObject`实例。

但是，您可以做的是使用 jQuery`data`将图像元素与您的 相关联`ImageObject`，例如（假设`this`指的是`ImageObject`实例）：

```
$(img).data("owner", this).appendTo("#container"); 
```

然后，如果您有对该元素的引用，则可以使用`$(img).data("owner")`它来取回它。`ImageObject``image`

我建议在 DOM 上使用`data`而不是仅使用 expando 属性，`image`因为当从 DOM 中删除元素时，jQuery 会清理与元素关联的数据（前提是通过 jQuery 进行删除）。如果您改为使用 expando 属性（只是`image`在t 正确处理 DOM 元素和 JavaScript 对象之间的循环引用）。`image``ImageObject``null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:45:48.077

The purpose of a constructor is just to initialize an object. And you also want your custom object the be in control, not jQuery.

I would do like this:

```
function ImageObject(path, name, type) {
        this.name = name;
        this.type = type;
        this.path = path;
}

ImageObject.prototype.renderTo = function( target ) {
        var img = new Image();
        this.img = img;
        img.src = this.path;
        $(img).load( $.proxy( this.loaded, this )) ;
        $(img).appendTo(target);    
};

ImageObject.prototype.loaded = function(e) {
    this.width = e.currentTarget.width;
    this.height = e.currenTtarget.height;
    //Resize
};

var a = new ImageObject( "image.png", "image", "png" );

$(document).ready(function() {
    a.renderTo("body");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:31:35.870

您需要修改函数以在某处公开创建的 DOM 对象。目前它只是一个作用于函数的变量，在函数之外是不可访问的。

然后使用标准 DOM 方法之一（[appendChild](https://developer.mozilla.org/en/DOM/Node.appendChild)、[insertBefore](https://developer.mozilla.org/En/DOM/Node.insertBefore)等）。

您的自定义对象不是 DOM 对象，不能添加到文档本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T10:39:08.413

您可以让 ImageObject() 函数返回 img：

```
function ImageObject(path, name, type) {
    this.name = name;
    this.type = type;
    var img = new Image();
    addListener(img, 'load', function () {
        // RESIZE THE IMAGE AND DO OTHER MANIPULATIONS HERE
    });
    img.src = path;
    return img;
} 
```

然后你应该能够将它附加到 DOM，据我所知。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T10:34:42.560

我不考虑这里的类型参数。如果你想要一个 background-img，你应该将 DIV 作为参考传递并设置背景属性。

```
function ImageObject(path, name, type) {

        var img = new Image();
        addListener(img, 'load', function () {
            // RESIZE THE IMAGE AND DO OTHER MANIPULATIONS HERE
        });
        img.src = path;

        return img;
    }

var newImg = new ImageObject(test.jpg, 'my test', 'background');

$("#container").append( newImg ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T10:39:31.630

只需 `this.appendTo`在对象中添加一个函数。

```
function ImageObject(path, name, type) {
        this.name = name;
        this.type = type;
        var img = new Image();
        addListener(img, 'load', function () {
            // RESIZE THE IMAGE AND DO OTHER MANIPULATIONS HERE
        });
        img.src = path;
       this.appendTo = function(id){
             document.getElementById(id).appendChild(img);
            };
    }

var newImg = new ImageObject('test.jpg', 'my test', 'background');
newImg.appendTo("container"); 
```

# javascript - Xcode - UIWebview 不显示 CSS、Javascript 或外部内容

> ID：11628914
> 
> 赞同：3
> 
> 时间：2012-07-24T10:29:08.273
> 
> 标签：javascript, html, objective-c, ios, xcode

我正在使用 UIWebview 来显示本地 HTML 文件中提供的内容。

然而问题是页面没有正确显示，只有核心 html 被渲染，没有显示 css 样式或媒体内容。对于这个项目，我将整个 web 结构放在它们各自的文件夹中，并放在 Xcode 项目中（所有内容都显示在蓝色文件夹中）。

构建的应用程序包包含 Web 文件夹和所有内容，所以我不确定它为什么不能正确显示。

这是我用来加载和显示网页的代码：

```
NSString *html = [[NSString alloc]initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"www/content/island-1" ofType:@"html"] encoding:NSUTF8StringEncoding error:NULL];

NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];
[webView loadHTMLString:html baseURL:baseURL]; 
```

在 html 文件中，以下是对某些内容的代码引用：

```
<script type="text/javascript" src="../static/js/custom-event.js"></script>

<script type="text/javascript" src="../static/js/touch-source/Browser/Features.Touch.js"></script>

<link rel="stylesheet" href="../static/css/islands_popup.css">
<link rel="stylesheet" href="../static/css/content.css"> 
```

所有文件夹和文件都正确无误。有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:54:30.537

XCode 不使用文件夹，它只使用它的包来存储所有数据。所以我建议你使用：

```
 <script type="text/javascript" src="custom-event.js"></script> 
```

**例如：**

```
<script type="text/javascript" src="../static/js/custom-event.js"></script>. 
```

与您的 css 和其他文件相同。此外，如果我们谈论`.js`文件，请务必从以下位置删除文件：

**目标——>构建阶段——>编译源**

并添加到

**目标——>构建阶段——>复制捆绑资源**

因为当您第一次将`.js`文件添加到项目时，XCode 以某种方式认为它需要编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:02:26.293

您的相对引用（即“../[目录]/[文件名]”）是否正确？

就我个人而言，我避免使用这些相对源引用，而是使用 root relative：即 /[directory from root of website]/[file name]

# javascript - Android在触摸选择时获取选定的文本

> ID：11628923
> 
> 赞同：2
> 
> 时间：2012-07-24T10:29:26.477
> 
> 标签：javascript, android, events, touch

我试图在选择时在 android 中获取选定的文本。它在触摸设备中不起作用。但它在普通浏览器中运行良好。

```
if(!window.Kolich) {
   Kolich = {};
}
Kolich.Selector = {};
// getSelected() was borrowed from CodeToad at
// http://www.codetoad.com/javascript_get_selected_text.asp
Kolich.Selector.getSelected = function() {
   var t = '';
   if(window.getSelection) {
      t = window.getSelection();
   }
   else if(document.getSelection) {
      t = document.getSelection();
   }
   else if(document.selection){
      t =document.selection.createRange().text;
   }
   return t;
}
Kolich.Selector.mouseup = function(e){
   var st = Kolich.Selector.getSelected();
   alert(st);
} 
```

但是Android触摸选择不适用于此代码..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:23:33.450

最近的 WebKit 浏览器，包括最新版本的 Android 中的默认浏览器，都支持节点`selectionchange`上的事件。`Document`此事件在 Opera 或 Mozilla 中不存在（但在 IE 5.5 版本中已存在）。

示例代码：

```
document.onselectionchange = function() {
    alert( window.getSelection().toString() );
}; 
```

# php - 如何更新 jQuery DatePicker 的 minDate 值？

> ID：11628931
> 
> 赞同：2
> 
> 时间：2012-07-24T10:29:48.257
> 
> 标签：php, jquery, datepicker, mindate

我有以下函数来设置 minDate 的默认值：

```
$(function() {
$( "#arrival_date" ).datepicker();
$( "#arrival_date" ).datepicker('option','minDate','<?php echo $minDate ?>');       
}); 
```

但是在页面加载后，$minDate 变量有时会根据我的某些函数中的最早日期而改变。

例如，如果 $minDate 的值为“7/29/2012”并且在页面完全加载后，有时 $mindDate 日期会更改为早于“7/29/2012”。说它将更改为“2012 年 7 月 20 日”。

如果发生这种情况，我想将 DatePicker 的 minDate 值更改为新日期（即“7/20/2012”而不是“7/29/2012”）。

如何调用这个函数？

更新*示例代码：

```
<?php
    $checkin = "7/29/2012";
    $minDate = $checkin;
?>
<head>
    $(function() {
        $( "#arrival_date" ).datepicker();
        $( "#arrival_date" ).datepicker('option','minDate','<?php echo $minDate ?>');       
    });
</head>

<body>
<?php
    for($i=0;$i<$max;$i++){
        $r_id=$_SESSION['cart'][$i]['room_id'];

        if (!isset($room_id)){
            $room_id=$r_id;
        }else{
            $room_id=$room_id . "," . $r_id;
        }

        $checkin=$_SESSION['cart'][$i]['checkin'];
        $checkout=$_SESSION['cart'][$i]['checkout'];
        $nights=$_SESSION['cart'][$i]['nights'];
        $q=$_SESSION['cart'][$i]['qty'];
        $pname=get_room_type($r_id);

        if ($checkin < $minDate) $minDate = $checkin; //<--- here...how can I change the minDate of datepicker to the new value?
    }
?>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:36:05.180

在你的情况下，你可以这样做。

```
$(function() {
 $( "#arrival_date" ).datepicker();
 $( "#arrival_date" ).datepicker({ minDate: new Date(<?php echo $checkin ?>) });
});

$( "#arrival_date" ).datepicker( "option", "minDate", selectedDate ); 
```

请参考此链接。这可能会对您有所帮助。[http://jqueryui.com/demos/datepicker/#date-range](http://jqueryui.com/demos/datepicker/#date-range)

我希望这是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:39:36.607

这取自早期的 stackoverflow 帖子，但它应该可以帮助您解决问题

[jQuery datepicker minDate 变量](https://stackoverflow.com/questions/2484631/jquery-datepicker-mindate-variable)

```
$("#checkinDate").change(function() {     
    test = $(this).datepicker('getDate');     
    testm = new Date(test.getTime());     
    testm.setDate(testm.getDate() + 1);      
    $("#arrival_date").datepicker("option", "minDate", testm); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:42:54.090

我不知道签入何时或如何更改，但可能类似于..

```
$checkin.change(function () {
    newDate = $(this).val();
    $( ".selector" ).datepicker({ 
        minDate: new Date(newDate) 
    });
}); 
```

# java - 如何在 Play framework 2.0 中创建引导作业

> ID：11628934
> 
> 赞同：1
> 
> 时间：2012-07-24T10:30:11.323
> 
> 标签：java, playframework, playframework-2.0

我有一个新的 Play!2.0 项目，我正在尝试使用启动工作。这是我从找到的示例中写下的一些代码。

```
package jobs;

import util.*;
import play.jobs.*;

@OnApplicationStart
public class StartupJob extends Job {

    public void doJob() {
        MongoUtil.init();
    }
} 
```

当它尝试编译时，它返回一个错误：

> 包 play.jobs 不存在

环顾文档，play.jobs 包似乎存在于 1.0.1 中，但不存在于 2.0 中。有人知道 2.0 的做法是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T10:36:25.270

在 play 2.0 中，您应该使用[全局](http://www.playframework.org/documentation/2.0.2/JavaGlobal)对象来执行引导任务。Jobs 已替换为[Akka](http://www.playframework.org/documentation/2.0.2/JavaAkka)，您可以使用它来运行异步任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:39:12.040

找到了答案！

在 play 2.0 中，您可以使用 GlobalSetting

看这里[http://www.playframework.org/documentation/2.0/JavaGlobal](http://www.playframework.org/documentation/2.0/JavaGlobal)

# c# - 将 C# 异常消息传递给 VB 应用程序

> ID：11628936
> 
> 赞同：1
> 
> 时间：2012-07-24T10:30:17.433
> 
> 标签：c#, com, exception-handling, vb6

我有 COMVisible 的 C# 组件。我使用 regasm 注册了它。

该组件正在另一个 VB 应用程序中使用。这个 VB 应用程序正在处理这样的错误：

```
On Error GoTo MyErrorHandler
...some code here..

MyErrorHandler
If Err.Number <> 0 Then
    Err.Raise Err.Number, , "Failure In COM Object" & Chr(13) & Chr(10) & Err.Description
End If 
```

我想将 C# 异常消息的值传递给 Err.Description。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:59:05.377

我没有看到您从 COM 对象传递错误消息。您是否能够从您的 COM 对象中检索错误消息？如果是，您只需将其添加`Err.Raise`到`Err.Description`. 如果你不能找回，那是一条完全不同的鱼。请详细说明。

```
Err.Raise Err.Number, , "Failure In COM Object" & Chr(13) & Chr(10) & objYourComObject.Description 
```

# knockout.js - 将 Mvc 模型传递给 KnockoutJS 的最佳实践

> ID：11628938
> 
> 赞同：24
> 
> 时间：2012-07-24T10:30:19.520
> 
> 标签：knockout.js, asp.net-mvc-4

我在谷歌上搜索了如何将 mvc 模型传递给 knockoutjs，似乎有两种方法：

*   使用@Html.Raw(Json.Encode(Model))
*   使用 $.get 或 $.ajax

哪种方式是将 mvc 模型传递给 knockoutjs 的最佳实践？我知道这是每个需求的基础，但似乎使用 $.get 比 @Html.Raw 方法更干净。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-24T18:07:16.717

我已经成功地使用了几种方法。

在强类型 Razor 视图中，您可以像编写任何其他 HTML 一样编写 JavaScript ViewModel 对象，随时插入模型元素。我发现这很笨拙，因为 Razor 和 JS 不能很好地与 Visual Studio 和 Intellisense 一起使用，但即使有一堆红色波浪线，生成的代码也能正常工作。

```
<script type="text/javascript">

var data = [
    @for (int i=0; i < Model.Packages.Count; i++)
    {
        var package = Model.Packages[i];
        <text>{Id: ko.observable(package.Id),
               Name: ko.observable(package.Name)
              }</text>
    }

    var viewModel = {
        var packages = ko.observableArray(data);
        // more code
    }

    ko.applyBindings(viewModel);
</script> 
```

根据模型的复杂性，这段代码可能会很快变得丑陋。正如您所提到的，您还可以使用 Html.Raw() 将模型对象序列化为 JSON。如果你走这条路，你可以使用 KO Mapping 库来构建你的 Knockout ViewModel：

```
<script type="text/javascript">
    var data = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));
    var viewModel = ko.mapping.fromJS(data);
    ko.applyBindings(viewModel);
</script> 
```

这不像第一个选项那样笨拙，但我觉得我放弃了太多的控制权。这意味着我的 KO ViewModel 与我的 MVC ViewModel 的结构非常紧密地耦合，我可能想要也可能不想要。更不用说，为了让它工作，我的 JavaScript 需要在我真的不喜欢的 cshtml 页面中。最后，这两种方法都是纯粹的服务器端。对于响应速度更快的网页，例如 SPI，您需要在客户端做更多的事情。

我的偏好是使用 $.getJSON 从 JavaScript 本身调用客户端。此时，您可以手动滚动或使用映射库将返回数据处理到您的 ViewModel 中。如果要回调 MVC 控制器中的操作，只需让操作返回 JsonResult 类型（而不是 ActionResult）。（你也可以用 ContentResult 做类似的事情）如果你可以使用新的 MVC4 WebAPI，那些控制器将默认返回 JSON。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T18:15:30.200

@Html.Raw(Json.Encode(Model)) 当您希望将数据作为实际页面下载的一部分发送时使用。这可能会导致您的页面需要更长的时间才能呈现给用户，但是当它确实呈现时，它应该已经准备就绪。

$.get 或 $.ajax 将在页面呈现时获取数据。这将创建一个单独的调用，这将导致您的页面在呈现后更新。

至于使用哪个.. 这取决于您的页面布局方式，是否必须从那里开始所有数据以及获取数据与渲染页面需要多长时间。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-07T22:15:27.773

我的做法：

*   视图模型是用自己的 JS 文件编写的，没有服务器端代码生成
*   视图模型通过 $.get 或 $.ajax 加载数据
*   view 在创建视图模型的时候传入了一个对象，这个对象包含了所有服务端生成的url

一个例子：

```
function MyViewModel(urls) {
    var self = this;
    self.isLoading = ko.observable(true);
    self.items = ko.observableArray();
    self.loadData = function() {
        $.get(urls.load, function(data) {
                // Process data and push into our items array
                self.isLoading(false);
            });
    }
}

var vm = new MyViewModel({
        load: '@Url.Action("GetData", "MyItemController")'
    });

$(function() {
    ko.applyBindings(vm);
    viewModel.loadData();
}); 
```

这意味着我对数据有额外的 AJAX 调用，但 IMO 用户开始意识到数据！= UI。好处是我的 UI 可以快速提供，因为不涉及真正的数据访问。数据加载可能需要一些时间，具体取决于数据库、数据量等。它还为我的代码提供了非常清晰的关注点分离。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-25T04:14:06.237

我使用 @Html.Raw 是因为在生成 Knockout UI 之前，用户在页面上没有任何用处，并且由于将 JSON 写入页面的额外初始下载而导致的任何潜在的微不足道的时间延迟都会被用户抵消而不是在构建 UI 之前看到令人不安的延迟。用于构建我的初始视图模型的 JSON 直接在我的页面中，我完全没有问题。

我确实提高效率的地方是通过从 MVC 控制器下载的单独动态脚本中检索任何可重用的参考数据，例如选择选项（产品列表等），然后由浏览器缓存。这样它们就可以跨视图模型重用，并且视图模型只需要存储选定的项目值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-27T13:22:41.130

我所做的是一个 Html.Raw，然后我将那个 js 对象传递给我的淘汰赛 js 模型。像这样的东西：

```
//I'm using Newtonsoft library to serialize the objects
@{
    var jsModel = Newtonsoft.Json.JsonConvert.SerializeObject(Model);
}

<script type="text/javascript">
var model = @Html.Raw(jsModel);

var vm = new MyKnockoutModel(model);
ko.applyBindings(vm);

var MyKnockoutModel = function(model) {
    var self = this;
    this.Id = ko.observable(model.Id);
    this.Name = ko.observable(model.Name);
    this.Array1 = ko.observableArray(model.Array1);
}

</script> 
```

我就是做这个的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-24T13:15:33.377

正如您所说，这几乎是每个需求的基础。

如果你在做一个“单页应用程序”，你会做很多 $.get 和 $.ajax 调用，如果你只是渲染一个页面，把模型放在Html，保存一个额外的请求到服务器。

还取决于服务器端需要多少代码，如果我的应用程序无论如何都需要 API，我倾向于重用 API 并进行 $.get 和 $.ajax 调用，如果没有，我将模型放在 Html 中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-09T23:55:14.887

老问题，但我认为我有一个很好的解决方案，可以以可重用的方式将模型数据传递给 KO 视图模型。注意，我也在使用 require.js。

在 .NET 中添加 HtmlHelper 扩展方法：

```
using System.Web;
using System.Web.Mvc;
using System.Web.Script.Serialization;

namespace PROJECT.YOUR.EXTENSIONS.NAMESPACE {

    public static class HtmlHelperJavascriptExtensions {

        public static IHtmlString Serialize(this HtmlHelper helper, object obj) {
            return helper.Raw(new JavaScriptSerializer().Serialize(obj));
        }
    }
} 
```

添加局部视图，KnockoutJsBinderPartial（我不得不使用 aspx）：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<PROJECT.Views.Shared.KnockoutJsBinderViewData>" %>
<%@ Import Namespace="PROJECT.YOUR.EXTENSIONS.NAMESPACE" %>

<script type="text/javascript">
    require(["Path/To/KnockoutJs", "<%= Model.ViewModelPath %>"], function (ko, ViewModel) {
        ko.applyBindings(new ViewModel(<%= Html.Serialize(Model.InnerModel) %>));
    });
</script> 
```

该视图引用的模型是：

```
namespace PROJECT.Views.Shared {

    public class KnockoutJsBinderViewData {

        public object InnerModel { get; private set; }

        public string ViewModelPath { get; private set; }

        public KnockoutJsBinderViewData(object innerModel, string viewModelPath) {
            InnerModel = innerModel;
            ViewModelPath = viewModelPath;
        }
    }
} 
```

现在，要将 .NET 模型连接到淘汰视图模型，您需要做的就是：

```
<% Html.RenderPartial(
   "~/Views/Shared/KnockoutJsBinderPartial.ascx",
   new PROJECT.Views.Shared.KnockoutJsBinderViewData(
        Model, // The model from your strongly typed MVC view
        "Path/To/Knockout/ViewModel")); // The path to the Javascript file containing your view model
%> 
```

请注意，包含您的视图模型的 Javascript 文件不应调用 ko.applyBindings 并且应返回视图模型的构造函数。构造函数应该接受一个参数——模型的 JSON 数据。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2014-05-15T19:23:32.183

在我看来，最好保持 HTML 干净并避免混合内联 JavaScript 和数据。

我更喜欢通过 AJAX 调用向端点注入数据。

# asp.net-mvc - VS 2010 和 Nunit 测试框架设置

> ID：11628939
> 
> 赞同：0
> 
> 时间：2012-07-24T10:30:19.620
> 
> 标签：asp.net-mvc, unit-testing, nunit, nunit-2.5

我正在开发一个 Asp.net mvc3 项目（.NET 4）。并且需要集成一个测试工具。我尝试在我的解决方案中设置 Nunit 测试框架，但似乎在 vs2010 中设置它存在问题。

现在我想知道 Nunit 在 vs2010 中是否仍然有效，或者是否有明确的 vs2010 测试工具。

天呐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:38:21.067

NUnit 有一个单独的测试运行程序。我相信 NUnit 的工作流程是您在 VS 中编写测试代码，但您必须使用单独的 NUnit 测试运行程序来运行它们。MSTest 是我所知道的唯一可以让您直接在 VS 中运行测试的单元测试框架。

但是，有一个名为[ReSharper](http://www.jetbrains.com/resharper/)的 VS 插件。安装它会为您提供 VS 中的 NUnit 测试运行器。

**更新**

如果我在这里错了，任何人都可以纠正我，但我相信您只能获得具有 VS Professional 及更高版本的 MSTest 运行器。我不认为 VS Express 带有内置的 MsTest 运行器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:29:59.893

是的，VS 仅适用于 MSTest 框架。但是您可以使用一些外部测试运行器：

*   [测试驱动网](http://www.testdriven.net/)
*   [代码拉什](http://devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)
*   [锐化器](http://www.jetbrains.com/resharper/)

另一个选项 - 转到 NUnit GUI 设置并在测试程序集更改时打开测试重新运行。其实我喜欢大绿条，所以我在单独的显示器上打开了 NUnit GUI。当重新构建测试程序集时，所有最新的测试都会自动执行。如果我想调试一些测试，我使用 CodeRush - match 比将调试器附加到 NUnit 更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:03:46.197

[Visual Nunit](http://visualstudiogallery.msdn.microsoft.com/c8164c71-0836-4471-80ce-633383031099/)可以让你在 Visual Studio 中运行测试。

还有[NCrunch](http://www.ncrunch.net/)，仍处于测试阶段，但非常酷。从他们的网站：

> NCrunch 是 Visual Studio .NET 的自动化并行连续测试工具。它智能地负责运行自动化测试，这样您就不必这样做了，并且在您工作时，它会在您的 IDE 中为您提供大量有关测试的有用信息（例如代码覆盖率和性能指标）。

# formula - 将公式转换为递归

> ID：11628942
> 
> 赞同：0
> 
> 时间：2012-07-24T10:30:31.487
> 
> 标签：formula

[看这里的图片](http://img201.imageshack.us/img201/7408/14210487.jpg)

您好，我需要将上面的公式转换为代码（Java 或 C#）我做了很多尝试都没有成功。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:02:59.743

下面的代码在 php 中，在 java 或 c# 中将具有相同的逻辑，假设 f(x) 返回 x+1，对于 n=3，总和将为 10

```
<?php
function fun($x)
{
  echo $x+1;
  return $x+1;
}

$n=3;
$sum=0;

if($n>0)
{
  $i = $n-1;
  while($i>=0)
  {
    $sum = $sum +(fun($i) * fun($n-1-$i));
    $i= $i-1;
  }
}
else if($n=0)
{
   $sum = 1;
}
echo $sum;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:17:45.270

这是您在 Java 中的答案：

```
public static int f(int n) {
    if(n == 0)
        return 1;
    int sum = 0;
    for(int i = 0; i < n; i++)
        sum += f(i) * f(n - 1 - i);
    return sum;
} 
```

享受。

# sqlite - SQLite 中的二进制 Guid [ PetaPoco MicroOrm ]

> ID：11628944
> 
> 赞同：1
> 
> 时间：2012-07-24T10:30:35.463
> 
> 标签：sqlite, petapoco

当我尝试将带有 Guid 的记录插入 SQLite 时，PetaPoco 将该 guid 作为字符串而不是二进制插入...在我到 SQLite 的连接字符串中，我标识 BinaryGUID=True。

为什么会发生这种情况，如何强制 PetaPoco 将 Guid 写入二进制？

**更新：我找到它...**

感谢“开源运动”...:-)

我检查了源代码，发现在 AddParam 有这样的代码：

```
else if (t == typeof(Guid))
{
    p.Value = item.ToString();
    p.DbType = DbType.String;
    p.Size = 40;
} 
```

并将其更改为 Guid

```
else if (t == typeof(Guid))
{
    p.Value = item;
    p.DbType = DbType.Guid;
    p.Size = 40;
} 
```

# nhibernate - NHibernate - 在选择之前/之后刷新？

> ID：11628948
> 
> 赞同：0
> 
> 时间：2012-07-24T10:30:47.133
> 
> 标签：nhibernate, flush

目前我正在研究一个由其他人编写的项目，并且众所周知 NHibernate 部分可能没有很好地实现。我在实习期间被要求改进这一点，但我对 NHibernate 也很陌生。我遇到了一些代码部分，在选择后有一个 Flush，在我看来这完全没用，对吗（问题 1）？我几乎阅读了完整的 NHibernate 文档，但我不确定我是否理解所有内容。

我应该在选择之前刷新（问题 2）吗？我的想法是，当我在刷新后选择时，数据将是最新的。

（目前该程序根本不使用任何交易 - 我看到那里有很大的改进空间）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:52:27.143

NH官方[文件](http://nhforge.org/doc/nh/en/index.html#manipulatingdata-flushing)说：

> **9.7.1。刷新会话**
> 
> 如果您碰巧使用的是 ITransaction API，则无需担心这一步。它会在事务提交时隐式执行。否则，您应该调用 ISession.Flush() 以确保所有更改都与数据库同步。

您[应该始终使用 transactions](http://ayende.com/blog/3775/nh-prof-alerts-use-of-implicit-transactions-is-discouraged)，即使是读取。

如果您不使用事务，则应在写入后使用 Flush。
阅读后对 Flush 没有任何意义。
看看这[两个](https://stackoverflow.com/a/780918/219406) [答案](https://stackoverflow.com/a/43567/219406)，一切都得到了很好的解释。

# iphone - 标签栏项目上的徽章未显示

> ID：11628950
> 
> 赞同：1
> 
> 时间：2012-07-24T10:30:50.720
> 
> 标签：iphone, ios, uitabbaritem, badge

在我的应用程序中，我的 tabBar 项的标记值设置在 中`AppDelegate.m`，如下所示：

**AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ...
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UITabBarController *tabBarController = [storyboard instantiateViewControllerWithIdentifier:@"tabBarController"]; 
    [[tabBarController.tabBar.items objectAtIndex:4] setBadgeValue:@"1"];
    ...
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    ...
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UITabBarController *tabBarController = [storyboard instantiateViewControllerWithIdentifier:@"tabBarController"]; 
    [[tabBarController.tabBar.items objectAtIndex:4] setBadgeValue:@"2"];
    ...
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    ...
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UITabBarController *tabBarController = [storyboard instantiateViewControllerWithIdentifier:@"tabBarController"]; 
    [[tabBarController.tabBar.items objectAtIndex:4] setBadgeValue:@"3"];
    ...
} 
```

问题是：徽章值始终为“1”。为什么徽章值在两者中都设置`applicationWillEnterForeground:`并且`applicationDidBecomeActive:`永远不会出现？如果我没有在 中设置徽章值`application: didFinishLaunchingWithOptions:`，则那里没有显示徽章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:13:25.187

您需要阅读 UIApplicationDelegate 协议以及各种状态转换。applicationDidBecomeActive 转换不会在启动时发生，仅当手机中发生一组状态更改时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:03:39.297

@Meno 谢谢哥们。它对我有用。

只需复制粘贴

```
[[tabBarController.tabBar.items objectAtIndex:4] setBadgeValue:@"2"]; 
```

在`viewDidLoad`.

# python - Python - TypeError：“函数”类型的参数不可迭代

> ID：11628958
> 
> 赞同：0
> 
> 时间：2012-07-24T10:31:37.013
> 
> 标签：python

我正在运行一些 python 代码并得到一个错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1413, in __call__
    return self.func(*args)
  File "multiline14.py", line 28, in getText
    if encodinghex in process:
TypeError: argument of type 'function' is not iterable 
```

我的定义如下。

```
def gui(item):
    def default_encode(s):
        pass

    # map items from menu to commands
    encodinghex = '.encode("hex")'
    decodinghex = '.decode("hex")'
    mapping = {"encode_b64": base64.encodestring,"encode_url": urllib.quote_plus,"encode_hex": encodinghex, "decode_b64": base64.decodestring, "decode_url": urllib.unquote_plus, "decode_hex": decodinghex}

    process = mapping.get(item, default_encode)

    def getText():
    #clear bottom text field
        bottomtext.delete(1.0, END)
    #var equals whats in middle
        var = middletext.get(1.0, 'end-1c')

    #insert encoded var in bottom
        if encodinghex in process:
            var = '"%s"' % (var)
            bottomtext.insert(INSERT, eval(var + process))
        elif decodinghex in process:
            var = '"%s"' % (var)
            bottomtext.insert(INSERT, eval(var + process))
        else:
            bottomtext.insert(INSERT, process(var)) 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:38:28.103

你所做的似乎根本没有任何意义。您有两个文本字符串，encodinghex 和 decoderhex，您可以将`eval`它们转换为要执行的代码。但是在您的`mapping`dict 中，您还拥有各种实际方法，您也试图将其传递给`eval`这些方法 - 这本身肯定会失败，但甚至在此之前，您的代码正试图将现有的文本字符串添加到实际的函数值，这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:05:11.647

您正在从这里请求一个**函数：**`mapping`

```
process = mapping.get(item, default_encode) 
```

然后，您尝试在此处对其进行迭代：

```
if encodinghex in process: 
```

除非主题是 ，否则您不能使用`in`关键字`Iterable`。

您在这里尝试实现的是实际查看*您的调用**返回了****哪个函数**`mapping.get()`*

```
if process == encodinghex: 
```

Note that `base64.encodestring, urllib.quote_plus, encodinghex, base64.decodestring, urllib.unquote_plus, decodinghex` are all functions

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:35:58.167

从示例的最后一行来看，您在`process()`某处调用了一个函数。然而，您尝试访问它，就好像它是 line 中的一个可迭代对象`if encodinghex in process`。要修复错误，请更改函数或可迭代的名称。

# javascript - 通过单独文件中的代码验证 Javascript 表单

> ID：11628960
> 
> 赞同：0
> 
> 时间：2012-07-24T10:31:40.720
> 
> 标签：javascript, html, forms, validation

```
<script type="text/javascript" src="js/js01.js"></script>
<!-- ... -->
<form id="frmReg" method="post" onsubmit="valRegs()" action="memb_area/register.php"> 
```

为什么不执行函数 valRegs() （代码放在 js01.js 文件中），除了我将代码拖到 html 文件中？
我如何确定 valRegs() 总是在 register.php 文件中的代码之前而不是之后执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:34:55.020

通过确保带有验证的脚本**位于 html 中的表单下方**。

这是因为您试图在脚本运行时绑定到不存在的元素。

或者，您应该将脚本包装在 jQuery 中`$(document).ready()`或通过创建 onload 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:40:10.277

除了`Sam`建议的解决方案外，还有一种可能是`js01.js`包含错误，并且该函数位于错误点之后。因此，使用浏览器检查以确保 js 文件中没有错误。

# google-chrome - 为 ttsEngine 扩展静默安装语音

> ID：11628964
> 
> 赞同：0
> 
> 时间：2012-07-24T10:32:02.563
> 
> 标签：google-chrome, google-chrome-extension, text-to-speech

我正在为我的网页创建一个语音扩展程序，以便盲人可以访问它。到目前为止效果很好，现在我想自动安装我选择的两个语音引擎。事实证明，这真的很困难：我已经阅读了大量关于如何解决这个问题的信息。最简单的方法是在 Chrome 商店中打开语音（ttsEngine）的网页——但盲人也必须经历所有这些麻烦。大多数其他方法需要我没有的计算机权限，例如弄乱用户的文件系统或注册表。

我的问题：真的没有简单的方法来为您的扩展程序要求、包含或预安装另一个扩展程序，所以它安装在后台（静默）？

感谢您听取我的意见并提供一些帮助！亲切的问候，罗马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T17:41:53.647

我还在[谷歌组的 Chromium-extensions](https://groups.google.com/a/chromium.org/forum/#!msg/chromium-extensions/eRiokHydX9o/hdRlMpEW0VwJ)中发布了这个问题，结果是这样的事情（还没有？）仅通过扩展是可能的。

确实，如果它们是开源的，我也许可以将它们包含到我的项目中，但这些不是。现在看来，我必须要么像链接中建议的那样使用“管理”来完成它，要么创建一个与 Chrome 扩展程序混淆的可安装文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:50:36.627

您是否有权修改/扩展/重新分发其他扩展？例如，如果它们是开源的，它们可能会与您的代码合并到一个扩展中。

# maven - 如何使用 maven 创建项目源的 jar 存档

> ID：11628968
> 
> 赞同：5
> 
> 时间：2012-07-24T10:32:12.503
> 
> 标签：maven, pom.xml, maven-source-plugin

我在项目对象模型中包含以下代码段

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-source-plugin</artifactId>
    <version>2.1.2</version>
  </plugin> 
```

根据[maven.apache.org](http://maven.apache.org/plugins/maven-source-plugin/jar-mojo.html)，插件将 jar 目标附加到包阶段。但是，执行“mvn clean ; mvn package”不会在目标目录中生成 project-sources.jar。

编辑：可能我不明白来自网站的评论，我引用了：“[来源：jar 目标] 默认绑定到生命周期阶段：包。” 我预计，当我包含如上所示的插件部分时，maven 已经将 source:jar 目标绑定到包阶段。我在这里误会了吗？评论是什么意思？

马蒂亚斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:54:39.683

该文档有点误导。该插件具有包的默认执行阶段，但没有默认目标。我相信您已经指定了一个目标以使插件正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:24:08.143

尝试这个：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-source-plugin</artifactId>
        <version>2.1.2</version>
        <executions>
          <execution>
            <id>attach-sources</id>
            <goals>
              <goal>jar-no-fork</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

然后它使用`jar-no-fork`目标的默认绑定到`package`生命周期的阶段，这可能就是您需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:53:09.463

您需要将[插件](http://maven.apache.org/plugins/maven-source-plugin/usage.html)绑定到一个 Maven 生命周期目标，以便它生成源 jar。否则，您需要显式调用它`mvn source:jar`。

如此[处](http://maven.apache.org/plugin-developers/cookbook/attach-source-javadoc-artifacts.html)所述，您可以将其绑定到`jar`目标。

# c# - DataList 继续显示以前加载的数据列表

> ID：11628973
> 
> 赞同：0
> 
> 时间：2012-07-24T10:32:29.603
> 
> 标签：c#, asp.net, user-controls, datalist

我有一个目录功能，用户可以通过单击单选按钮来过滤他们的选择。例如，通过选择餐饮单选按钮，所有与餐饮相关的包裹都会出现。

我使用 DataList1.Items.Count 方法来计算数字搜索结果。我已经在 page_load 中实现了这个方法，但是 datalist 的数量的值一直显示以前加载的 datalist。

这是我的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {  
        DataList1.DataSourceID = "SqlDataSource3";
        Label1.Text = DataList1.Items.Count.ToString(); 
    }

    private SqlDataReader getReader()
    {
        //get connection string from web.config
        string strConnectionString = ConfigurationManager.ConnectionStrings["ASPNETDBConnectionString1"].ConnectionString;
        SqlConnection myConnect = new SqlConnection(strConnectionString);

        string strCommandText = "SELECT CategoryID, CatName  from Category";

        SqlCommand cmd = new SqlCommand(strCommandText, myConnect);
        myConnect.Open();

        //DataList1.DataSource = reader; 

        DataList1.DataBind();

        // CommandBehavior.CloseConnection will automatically close connection
        SqlDataReader reader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
        return reader;
    }

    protected void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)
    { 
        DataList1.DataSourceID = "SqlDataSource1";

        if (RadioButtonList1.SelectedIndex == 0)
        {
            Session["catID"] = 1;

        }
        else if (RadioButtonList1.SelectedIndex == 1)
        {
            Session["catID"] = 2;

        }
        else if (RadioButtonList1.SelectedIndex == 2)
        {
            Session["catID"] = 3; 

        }
        else if (RadioButtonList1.SelectedIndex == 3)
        {
            Session["catID"] = 4;

        }
        else if (RadioButtonList1.SelectedIndex == 4)
        {
            Session["catID"] = 5;

        }

        else
        {
            Session["catID"] = 8;

        }

    } 
```

我曾尝试将 Item.Count 放在此代码的其他位置，但同样的问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:53:27.583

```
 Try this,
protected void Page_Load(object sender, EventArgs e)  
 {  
     if(!Page.IsPostBack) 
     {           
         DataList1.DataSourceID = "SqlDataSource3";
         Label1.Text = DataList1.Items.Count.ToString();   
     } 
 } 
```

# android-emulator - 无法获取 wglGetExtensionsStringARB: 是什么意思，如何解决？

> ID：11628976
> 
> 赞同：3
> 
> 时间：2012-07-24T10:32:39.087
> 
> 标签：android-emulator

我是 android 新手，当我启动我的 AVD 时，我在 Eclipse IDE 的控制台中收到此消息“无法获取 wglGetExtensionsStringARB”。

虽然应用程序运行良好，但我想问这个消息是什么意思，我应该忽略它还是解决它？如果我应该解决它，那么该怎么做呢？

来自 Eclipse IDE 控制台的消息如下：

```
[2012-07-24 13:02:05 - test] Automatic Target Mode: launching new emulator with compatible AVD 'ICS'

[2012-07-24 13:02:05 - test] Launching a new emulator with Virtual Device 'ICS'

[2012-07-24 13:02:22 - Emulator] could not get wglGetExtensionsStringARB

[2012-07-24 13:02:22 - Emulator] Failed to create Context 0x3005

[2012-07-24 13:02:22 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.

[2012-07-24 13:02:22 - Emulator] could not get wglGetExtensionsStringARB 
```

与上一行相同，则

```
[2012-07-24 13:02:22 - Emulator] could not get wglGetExtensionsStringARB

[2012-07-24 13:02:24 - Emulator] emulator: warning: opening audio output failed

[2012-07-24 13:02:24 - Emulator] 

[2012-07-24 13:02:28 - test] New emulator found: emulator-5554 
```

# c# - 如何在另一个类中使用 xaml 对象

> ID：11628977
> 
> 赞同：1
> 
> 时间：2012-07-24T10:32:44.220
> 
> 标签：c#, .net, wpf, xaml

我有一个包含标签的 xaml 类。我想从一个不同的类更改此标签的内容。例如，我有一个带有 mainwindow.xaml 的类 mainwindow.xaml.cs，我想从 newclass.cs 处理 mainwindow.xaml 的标签。我怎样才能做到这一点？？

编辑：我在网格中有这个标签，我想更改另一个类的内容：

`<Label Content="" Panel.ZIndex="1" FontWeight="SemiBold" FontSize="16px" Name="lb1" Margin="0,0,0,0" VerticalAlignment="Bottom" Height="30" HorizontalAlignment="Right" Width="250" HorizontalContentAlignment="Right" VerticalContentAlignment="Top"/>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:40:33.357

我会做的是这样的事情，我不确定这是否是最合乎逻辑的事情，但它对我有用。

在你的 newclass.cs 中：

```
Class Newclass
{
     MainWindow main;

     public Newclass(MainWindow win)
     {
         main = win;
         main.label.content = "";
     }
} 
```

然后在你的 mainwindow.xaml.cs 中：

```
Newclass class = new Newclass(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:39:26.567

数据绑定和 MVVM 将是最优雅的解决方案。但是您可以简单地使用代码隐藏。为标签命名`<Label x:Name="myLabel">`，以便您可以在代码中使用该名称访问它，就像任何其他变量一样。然后，您可以将此变量传递给您的 newclass.cs 并在那里更改其属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:36:55.337

您可以首先使用绑定 - 甚至更好地绑定 MVVM 模式和视图模型。

但是，在提出问题时，您应该发布一些代码

# android - Android：解析包含 Html 实体、Html 字符和 URL 地址的 XML 文件？

> ID：11628978
> 
> 赞同：1
> 
> 时间：2012-07-24T10:32:46.733
> 
> 标签：android, xml-parsing, url-encoding, html-encode, domparser

我正在尝试解析 XML 文件（RSS 提要），但我有一个问题，即 xml 文件包含 HTML 实体字符，当我将其转换为字符串时它没有出现，我不知道如何对其进行编码：

```
public String getXmlFromUrl(String url) {
    String xml = null;
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();

        xml = EntityUtils.toString(httpEntity, HTTP.UTF_8);

    } catch (UnsupportedEncodingException e) {} 
    catch (ClientProtocolException e) {} 
    catch (IOException e) {} 
```

例如：这是我想在我的 java 代码中得到的文本

```
<description>
     Amman Post: Shath'a Hasson pointed on the reason about &nbsp .... .... ...
</description> 
```

但是在字符串中，我丢失了这个字符   之后的所有文本

当我尝试解析 URL 地址时：

[http://www.ammanpost.net/index.php?page=article&id=25981](http://www.ammanpost.net/index.php?page=article&id=25981)

我在字符串中得到的是：

[http://www.ammanpost.net/index.php?page=article](http://www.ammanpost.net/index.php?page=article)

我失去了'&'字符之后的所有东西。

你能帮我吗 ？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:29:15.443

我的应用程序也有问题，我设法用[Html 类](http://developer.android.com/reference/android/text/Html.html "HTML 类")修复它， 如下所示：

```
Html.fromHtml(string); 
```

对于 URL 问题，请查看[URLDecoder 类](http://developer.android.com/reference/java/net/URLDecoder.html "URL解码器类")

# android - 特定号码的 Android 短信监听器

> ID：11628979
> 
> 赞同：5
> 
> 时间：2012-07-24T10:32:53.447
> 
> 标签：android, sms

我正在编写一个通过 SMS 与其他设备通信的应用程序。

我能够为收到的短信实现监听器。问题是它正在监听所有收到的消息。我只想收听来自特定号码的收到的短信。

这是我的`onReceive`方法。

```
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle bundle = intent.getExtras();

    Object messages[] = (Object[]) bundle.get("pdus");
    SmsMessage smsMessage[] = new SmsMessage[messages.length];
    for (int n = 0; n < messages.length; n++) {
        smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
    }

    // show first message
    Toast toast = Toast.makeText(context,
                  "Received SMS: " + smsMessage[0].getMessageBody(),
                  Toast.LENGTH_LONG);
    toast.show();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:41:52.370

使用[PhoneNumberUtils.compare()](http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html#compare%28java.lang.String,%20java.lang.String%29)比较电话号码，因为有不同的电话号码格式（+4XXXX、0XXXX...）。您可以通过[getOriginatingAddress()](http://developer.android.com/reference/android/telephony/SmsMessage.html#getOriginatingAddress%28%29)获取发件人。

```
public class SmsReceiver extends BroadcastReceiver {

    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(SMS_RECEIVED)) {
            Bundle bundle = intent.getExtras();
            if (bundle != null) {
                // get sms objects
                Object[] pdus = (Object[]) bundle.get("pdus");
                if (pdus.length == 0) {
                    return;
                }
                // large message might be broken into many
                SmsMessage[] messages = new SmsMessage[pdus.length];
                StringBuilder sb = new StringBuilder();
                for (int i = 0; i < pdus.length; i++) {
                    messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                    sb.append(messages[i].getMessageBody());
                }
                String sender = messages[0].getOriginatingAddress();
                String message = sb.toString();
                // apply sms filter
                if (PhoneNumberUtils.compare("your number", sender)) {
                    // do something
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T10:42:15.760

AFAIK 无法仅按意图过滤数字。

您可以做的是在接收器中获取电话号码，如下所示：

```
SMSMesssage msg=SMSMessage.creatFromPdu(pdu)
String origination_no = msg.getDisplayOriginatingAddress() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T10:40:25.910

用这个

```
for(int i=0; i<smsMessage.length; i++) {
    smsMessage[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
    String msg_from = msgs[i].getOriginatingAddress();
    Log.v("msg_from >>",msg_from);     
    if(msg_from.equals("1234556"))
    {
        //do you stuff here.
    }                    
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T10:42:14.817

您可以使用`message.getOriginatingAddress()`获取您收到消息的号码，并根据您获得的地址进行进一步计算。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T10:43:57.343

恐怕您无法避免收到收到任何短信的通知。

但是，您可以丢弃任何与您感兴趣的号码不符的短信。

您可以通过拨打电话获取号码

> 来自 = smsMessage[i].getOriginatingAddress() 的字符串；

[关联](http://developer.android.com/reference/android/telephony/SmsMessage.html#getOriginatingAddress%28%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-05T22:52:11.860

对于那些有此问题的人，`creatFromPdu`我们不赞成对实际 api 和旧 api 进行此验证....

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
        String format = bundle.getString("format");
        currentSMS = SmsMessage.createFromPdu((byte[]) aObject, format);
    } else {
        currentSMS = SmsMessage.createFromPdu((byte[]) aObject);
    } 
```

（[来源](https://stackoverflow.com/a/34945368/5287072)）

# c# - 从 DataTemplate 绑定到 ItemsControl 中的索引

> ID：11628981
> 
> 赞同：0
> 
> 时间：2012-07-24T10:32:57.540
> 
> 标签：c#, .net, wpf, datatemplate, itemscontrol

我有一个简单的类，它创建一个对象列表：

```
namespace TestWPF2
{
  /// <summary>
  /// Interaction logic for MainWindow.xaml
  /// </summary>
  public partial class MainWindow : Window
  {
    public ObservableCollection<TestObj> SomeList { get; set; }
    public string WindowTitle { get; set; }

    public MainWindow()
    {
      this.DataContext = this;
      WindowTitle = "People";
      SomeList = new ObservableCollection<TestObj>();
      SomeList.Add(new TestObj("Bob"));
      SomeList.Add(new TestObj("Jane"));
      SomeList.Add(new TestObj("Mike"));
      InitializeComponent();
    }
  }
} 
```

TestObj 类如下：

```
namespace TestWPF2
{
  public class TestObj
  {
    public string FirstName { get; set; }

    public TestObj(string firstName)
    {
      this.FirstName = firstName;
    }
  }
} 
```

然后，我尝试使用以下内容显示列表中的每个项目：

```
<Window x:Class="TestWPF2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TestWPF2"    
        Title="MainWindow" Height="350" Width="525">

    <Window.Resources>
        <DataTemplate DataType="{x:Type local:TestObj}">
            <StackPanel Orientation="Vertical">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Pos: "/>
                    <TextBlock x:Name="posText"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Name: "/>
                    <TextBlock Text="{Binding FirstName}"/>
                </StackPanel>
            </StackPanel>

            <!-- THESE TRIGGERS DONT WORK -->

            <DataTemplate.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                    <Setter Property="Text" Value="First" TargetName="posText"/>
                </Trigger>
                <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                    <Setter Property="Text" Value="Second" TargetName="posText"/>
                </Trigger>
                <Trigger Property="ItemsControl.AlternationIndex" Value="3">
                    <Setter Property="Text" Value="Third" TargetName="posText"/>
                </Trigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </Window.Resources>

    <StackPanel>
        <TextBlock Text="{Binding Title}"/>
        <ItemsControl HorizontalAlignment="Stretch"
                      ItemsSource="{Binding SomeList}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </StackPanel>
</Window> 
```

我想显示的是这样的：

```
Pos: First
Name: Bob
Pos: Second
Name: Jane
etc. 
```

绑定到列表中每个项目的 FirstName 属性非常简单，但我也想绑定到列表中的*索引*。我知道我可以使用 ItemsControl.AlternationIndex 从 ItemsControl 内部执行此操作，但是如何从 DataTemplate 内部链接到 AlternationIndex？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:09:15.990

您需要了解您的上下文`TestObj`和触发器，您基本上是在检查一个名为的属性的值，该属性`ItemsControl`应该有一个 property `AlternationIndex`。

您应该使用 RelativeSource 绑定更改触发器的上下文来保存您的对象，命名为`ContentPresenter`：

```
<DataTemplate.Triggers>
    <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Path=(ItemsControl.AlternationIndex)" Value="0">
        <Setter Property="Text" Value="First" TargetName="posText"/>
    </Trigger>

    <!--- here be the other triggers -->

</DataTemplate.Triggers> 
```

希望这可以帮助..

# google-apps-script - ScriptDb 相对于 Fusion Tables 的优势

> ID：11628983
> 
> 赞同：2
> 
> 时间：2012-07-24T10:33:02.457
> 
> 标签：google-apps-script

我一直在研究新的 ScriptDb 功能 - 我确信它比 Fusion Tables 作为数据存储“更好”，我只是不确定如何/为什么？谁能提出为什么它比融合表更可取（尽管我敢肯定不是普遍如此）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T11:24:03.480

这里有几点可以证明“为什么使用 scriptDB”

1.  您不必使用 URLfetch 从 Fusion Tables 中获取数据。由于 URLFetch 的配额相对较低（根据我的观察）
2.  App Script 原生支持 ScriptDB，因此它比您自己的实现访问融合表更快、更健壮。
3.  ScriptDB 是键值存储（以 JSON 的形式），它的延迟随着 DB 大小的增加而线性增加，这比所有延迟随着 DB 大小呈指数增长的 RDBMS 都要快。但我不确定随着数据大小的增加，Fusion Table 的表现如何。
4.  ScripDB 服务的配额远高于 URLFetch。
5.  在融合表中，您可以在一秒钟内执行最多 5 次查询，但在 scriptDB 中，没有这样的查询限制声明。
6.  ScriptDB 的大小限制：消费者帐户为 50MB，Google Apps 帐户为 100MB，Google Apps for Business/Education/Government 帐户为 200MB。我认为，这对于使用 Apps Script 开发的应用程序来说已经足够了。

您可以查看以下链接中的常见问题解答部分以获取更多详细信息。 [https://developers.google.com/apps-script/scriptdb](https://developers.google.com/apps-script/scriptdb)

# android - 从另一个活动中启动具有纬度和经度值的行车路线

> ID：11628989
> 
> 赞同：0
> 
> 时间：2012-07-24T10:33:33.820
> 
> 标签：android

这是我的情况：

*   我有一个列表，可以为不同的地方启动不同的页面。
*   这些页面中的每一个都已经有一个 WebView 和 MapView 显示各个地方的详细信息和地图（我使用了 TabHost）
*   我创建了一个扩展 ItemizedOverlay 的活动，以使我能够放置标记，并为我的行车路线启动警报对话框。这被所有 MapView 使用

到目前为止，我可以通过我的应用程序中的谷歌地图应用程序从警报对话框中启动行车路线。但是，我必须将 lat 和 long 值（实际数字）放在 Uri.parse("http://maps.google.com/maps...") 中。

有没有办法用各个地方的 Activity 中的字符串替换 lat 和 long 值？

PS请原谅我，因为这是我第一次在这里发帖，而且我对编程很陌生=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:43:04.990

尝试这样的事情：

```
String uri = "http://maps.google.com/maps" + String.format( "?daddr=%s,%s",
                                                            getLocationLat(),
                                                            getLocationLng() );
Intent i = new Intent( Intent.ACTION_VIEW, Uri.parse( uri ) );
startActivity( i ); 
```

# jquery - 如何从控制器调用 jQuery（从 Devise 注册路径后）？

> ID：11628991
> 
> 赞同：2
> 
> 时间：2012-07-24T10:33:35.490
> 
> 标签：jquery, ruby-on-rails, controller

我不知道是否有可能 - 在用户注册时调用 jQuery。

我正在使用 Rails 和 Devise gem，所以我有 after_sign_up_path：

```
 def after_sign_up_path_for(resource)
    edit_user_registration_path(current_user)
    //call jQuery 
 end 
```

或者如果这是不可能的 - 为什么我的 js 不工作：

```
 if($('.alert').val()=='Welcome! You have signed up successfully.')) 
      $('#congrats').show(); 
```

**编辑：HTML**

```
 <div class="alert alert-notice">Welcome! You have signed up successfully.</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:35:16.143

`)`您的代码中有一个额外的内容：

```
 if($('.alert').val()=='Welcome! You sign up.')) 
                                //  -----------^ 
```

尝试这个：

```
if ( $('.alert').val() == 'Welcome! You sign up.' ) {
      $('#congrats').show();
} 
```

对于您应该使用的 div 元素，`text()`而不是`val()`：

```
if ( $('.alert').text() == 'Welcome! You have signed up successfully.' ) {
      $('#congrats').show();
} 
```

# android - android中使用线程的TimeDelay错误

> ID：11628992
> 
> 赞同：1
> 
> 时间：2012-07-24T10:33:41.203
> 
> 标签：android, multithreading, text-to-speech, timedelay

在制作应用程序时，功能延迟存在问题，

首先，我使用线程作为计时器，我还使用动画功能....

当计时器结束时，它启动 TextToSpeech 并且在后台图像的动画连续工作......

在 TTS 结束后，它再次启动计时器，并在固定时间计时器停止并启动 TTS 后..这将持续运行..

但由于这个原因，TTS 的延迟存在问题，并且在计时器停止后它不能完全工作......并且需要一些时间......

那么我应该怎么做才能阻止这种延迟呢？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:39:21.723

你的计时器不应该有一个固定的值，而是一个计算出来的值。如果希望它在固定的内部（timeFI）触发，则应计算 TTS 中的处理时间（timeTTS）并设置定时器“睡眠时间”=（timeFI - timeTTS）

# networking - 特定网络的wireshark捕获过滤器（bssid）

> ID：11628996
> 
> 赞同：2
> 
> 时间：2012-07-24T10:33:54.500
> 
> 标签：networking, wireless, wireshark, bssid

我想知道如何使用wireshark捕获特定无线网络的数据包。

我已经能够捕获不同网络的所有数据包，将我的无线卡设置为监控模式，但为了进行特定分析，我需要在捕获过程中丢弃所有与我的网络无关的数据包。

我知道存在显示过滤器可以做到这一点，但我需要提前过滤它们（比如使用捕获过滤器）。

如果我去 CAPTURE->OPTIONS 我可以设置捕获过滤器，但我不知道确切的过滤器，因为它们与显示过滤器不同，事实上 wlan.bssid==xx:xx:xx:xx:xx:xx 不起作用。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-07-17T17:41:53.357

您可以使用 wlan 数据包开头的索引。它需要一些哄骗，但 BSSID 字段处于固定的、可预测的位置。通过使用括号，您应该能够引用数据包中的正确位置。

BSSID 位于第 16 位，因此如果您想模拟如下内容：

```
wlan.bssid=12:34:56:78:9a:bc 
```

你必须做这样的事情：

```
wlan[16:4] == 0x12345678 and wlan[20:2] == 0x9abc 
```

您必须将前 4 个八位字节转换为 int32 并将后 2 个八位字节转换为 int16 并使用 2 个子句，因为 BPF 不能表示 6 字节数，但我已经使用它并且它工作正常。这也可以适应其他用途（您只需要偏移量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T01:01:35.157

很好的问题，也是我一直试图弄清楚的事情。

简短的回答是，wireshark 工具无法过滤 BSSID。Wireshark 使用 pcap，它通过 SO_ATTACH_FILTER ioctl 使用内核 Linux Socker 过滤器（基于 BPF）。BSSID 没有 BPF 过滤器。

另一个工具 airodump-ng，通过 BSSID 捕获 CAN，因为它将所有 802.11 帧传递到用户空间并在那里解码/过滤帧。考虑到所有用户空间的处理，它的效果出奇的好。

但即使是低容量的 80211 网络也相当嘈杂。例如，我的 SOHO 在不到两分钟的时间内捕获了 11K 帧；我仍然丢帧。为我附近的五个可见（但很小！）BSSID 抓取所有 80211 帧，我在不到三分钟的时间内收到了 141K 帧（104MB）。

我正在寻找使用 EMMC 或 SD 闪存的嵌入式帧嗅探器/注入器，所以我需要小心突破极限。

所以我正在尝试编写一个自定义 BDF 过滤器来仅过滤本地 BSSID 帧。我希望扩展它以丢弃大量的“嘈杂”帧——大多数控制和管理帧都可以被过滤掉。帧中的 BSSID 地址位置基于 ToDS 和 FromDS 控制位。

无论如何，希望我为解决方案提供了一些面包屑。它可能只是一个 airodump 用户空间解决方案是最简单的。

# actionscript - 使用 AIR、空格和链接读取远程文本文件

> ID：11628998
> 
> 赞同：0
> 
> 时间：2012-07-24T10:33:59.900
> 
> 标签：actionscript, air

我的网络服务器中有一个文本文件（txt）。我将读取文件内容并将其展示给用户。问题是它没有以正确的方式显示行分隔符和空格。我还需要激活可能的链接。例如，如果有[http://www.google.com](http://www.google.com)，那么用户只需点击链接，默认浏览器就会打开它。

到目前为止，我有这个：

```
var fileContents:String;

            try{

                var myLoader:URLLoader = new URLLoader();
                myLoader.addEventListener(Event.COMPLETE, onFileLoaded);
                myLoader.load(new URLRequest("http://my.website.com/test.txt"));

                function onFileLoaded(e:Event):void
                {
                    fileContents = String(e.currentTarget.data);
                    var alertMessage = fileContents; 
```

我在java中做过同样的事情，但我对ActionScript不太熟悉。

Java代码：

```
URL url = new URL(getString(R.string.url));

                BufferedReader r = new BufferedReader(new InputStreamReader(
                        url.openStream(), "UTF-8"));
                StringBuilder total = new StringBuilder();
                String line;
                while ((line = r.readLine()) != null) {
                    total.append(line);
                    total.append(System.getProperty("line.separator"));

                }
                str = total.toString();
                r.close();

                return str; 
```

java中的链接：

```
final SpannableString s = new SpannableString(sUrl);
            Linkify.addLinks(s, Linkify.WEB_URLS); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:51:12.967

您可以考虑使用 Adob​​e 的文本布局框架 (TLF)。您可以将文本导入为 HTML，它将为文本中找到的任何 URL 创建可点击的链接。TLF 有点笨拙，但非常强大。

```
private var myTextFlow:TextFlow = TextConverter.importToFlow(sourceText, TextConverter.TEXT_FIELD_HTML_FORMAT); 
```

如果您使用的是 Flex 4，可以将生成的`TextFlow`对象分配给文本组件之一：

```
<s:RichText textFlow="{myTextFlow}" /> 
```

在 Actionscript 项目中，您必须做更多工作才能使用`TextFlow`. TLF 使用 MVC 方法。`TextFlow`用作模型，您可以将 a用于`Sprite`视图，并将 a`ContainerController`作为控制器：

```
private var container:Sprite = new Sprite();
addChild(container);
private var controller:ContainerController = new ContainerController(container, 800,600);
myTextFlow.flowComposer.addController(controller);
myTextFlow.flowComposer.updateAllControllers(); 
```