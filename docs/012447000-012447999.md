# StackOverflow 问答 12447000-12447999

# android - Android 文本菜单

> ID：12447001
> 
> 赞同：1
> 
> 时间：2012-09-16T12:52:14.010
> 
> 标签：android, android-intent

我有一些 XML 用作 Android 文本菜单。

这是XML

```
 <menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_settings"
    android:title="@string/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never" />
<item android:id="@+id/menu_search" android:title="@string/menu_search"></item>
<item android:id="@+id/exit" android:title="@string/menu_exit" android:orderInCategory="200" ></item>

 </menu> 
```

在使用以下代码膨胀菜单

```
 public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    } 
```

当我检查单击的菜单项时，我使用它。

```
 public boolean onOptionsItemSelected(MenuItem item) {
        int itemid = item.getItemId();
        Toast.makeText(this, "You pressed the icon!" + itemid, itemid).show();
        return true;
    } 
```

这为我按下的每个菜单项提供了一个数字 ID。我是否应该使用案例语句来检查这一点，然后启动我要打开的页面？或者有没有办法让我将意图链接到菜单项？将此代码添加到每个屏幕似乎有点浪费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:02:56.987

您应该使用 case 语句来调用：-

```
public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
        case R.id.menu_settings:

             return true;
              case R.id.menu_setting2:

             return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:27:01.077

为了在不同的活动中使用相同的菜单，只需在 MenuActivity 类中扩展 Activity 类，而在其他类中只扩展 MenuActivity 类而不是 Activity，这样做他们不需要一次又一次地编写相同的代码。

```
public class MenuActivity extends Activity {

protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                setContentView(R.layout.menulayout);

    }

public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menuxml, menu); 
        return true;
    }

public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {

               // pass menu item in cases
        case R.id.menu1:

                Intent intent1 = new Intent(this,
                        Activity1.class);
                startActivity(intent1 );

            break;

                              case R.id.menu2:

                Intent intent2 = new Intent(this,
                        Activity2.class);
                startActivity(intent2 );

            break;

        return true;
    }
} 
```

//这是另一个扩展MenuActivity的Activity

```
public class Activity1 extends MenuActivity{
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
setContentView(R.layout.activity1);
} 
```

}

# c# - c#中NX客户端的密码加扰算法

> ID：12447002
> 
> 赞同：0
> 
> 时间：2012-09-16T12:52:14.603
> 
> 标签：c#, c++, windows, nomachine-nx

我目前正在尝试将 NX 的密码加扰算法从 QT-C++ 移植到 C#。

来源： [http ://www.nomachine.com/ar/view.php?ar_id=AR01C00125](http://www.nomachine.com/ar/view.php?ar_id=AR01C00125)

我目前的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace mynamespace
{
class NxScramble
{
    string ToScramble = "";
    int numValidCharList = 85;
    String dummyString = "{{{{";

    char[] validCharList = new char[]
    {
      '!',  '#',  '$',  '%',  '&',  '(', ')',  '*',  '+',  '-',
      '.',  '0',   '1',  '2',   '3',  '4',  '5',  '6', '7', '8',
      '9', ':',  ';',  '<',  '>',  '?',  '@',  'A',  'B', 'C',
      'D',  'E',  'F',  'G',  'H',  'I',  'J',  'K',  'L', 'M',
      'N', 'O',  'P',  'Q',  'R',  'S',  'T', 'U', 'V', 'W',
      'X',  'Y',  'Z',  '[', ']',  '_',  'a',  'b',  'c',  'd',
      'e',  'f',  'g',  'h',  'i',  'j',  'k',  'l',  'm',  'n',
      'o',  'p',  'q',  'r',  's',  't',  'u',  'v',  'w',  'x',
      'y',  'z',  '{',  '|',  '}'
    };

    public NxScramble(string s)
    {
        ToScramble = s;
    }

    public string scrambleString()
    {
        string sRet = "";

        if (ToScramble == null || ToScramble.Equals(""))
        {
            return ToScramble;
        }

        string str = encodePassword(ToScramble);

        if (str.Length < 32)
        {
            str += dummyString;
        }

        for (int iR = (str.Length - 1); iR >= 0; iR--)
        {
            //
            // Reverse string
            //
            sRet += str.ElementAt(iR);
        }

        if (sRet.Length < 32)
        {
            sRet += dummyString;
        }

        int k = getRandomValidCharFromList();
        int l = k + sRet.Length - 2;

        sRet.Insert(0, k.ToString());

        string retStr = "";

        for (int i1 = 1; i1 < sRet.Length; i1++)
        {
            int j = findCharInList(sRet.ElementAt(i1));

            if (j == -1)
            {
                return ToScramble;
            }
            int i = (j + l * (i1 + 1)) % validCharList.Length;
            /*
             * sRet.ref(i1) = validCharList[i];
             */
            retStr += validCharList[i];
        }

        char c = (char)(getRandomValidCharFromList() + 2);
        sRet += c;

        retStr = retStr.Replace("&", @"&amp;");
        retStr = retStr.Replace("\"", @"&quot;");
        retStr = retStr.Replace("'", @"&apos;");
        retStr = retStr.Replace("<", @"&lt;");
        retStr = retStr.Replace(">", @"&gt;");

        return retStr;
    }

    private string encodePassword(string p)
    {
        string sPass = ":";
        string sTmp = "";

        if (p.Equals(""))
        {
            return "";
        }

        for (int i = 0; i < p.Length; i++)
        {
            char c = (char)p.ElementAt(i);
            sTmp = String.Format("{0:d}:", (c + i + 1));
            sPass += sTmp;
            sTmp = "";
        }

        return sPass;
    }

    private int findCharInList(char c)
    {
        int i = -1;

        for (int j = 0; j < numValidCharList; j++)
        {
            if (validCharList[j] == c)
            {
                i = j;
                return i;
            }
        }
        return i;
    }

    private char getRandomValidCharFromList()
    {
        int k = DateTime.Now.Second;
        return validCharList[k];
    }

}
} 
```

它从给定的密码生成一个字符串，并将其添加到 nxclient 的 XML-Config 文件中：

```
 NxScramble nxs = new NxScramble(passPhrase);
        string ScambledPass = nxs.scrambleString();

        string nxconfig = @"
        ....
        ....
        <group name='Login' >
        <option key='Auth' value='"+ ScambledPass + @"' />
        <option key='Guest Mode' value='false' />
        <option key='Guest password' value='' />
        <option key='Guest username' value='' />
        <option key='Login Method' value='nx' />
        <option key='Public Key' value='
        .........
        .........
        ' />
        <option key='User' value='" + username + @"' />
        </group>
        "; 
```

但是 NXClient 一直说“身份验证失败”。所以我很确定我的 C++ 代码的 C#-Port 中一定有错误。特别是我不确定这行原始代码： sRet.ref(i1) = validCharList[i];

我不知道 ref(i1) 在做什么。

如果有人发现我的错误会很好:)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:41:51.143

上面的代码部分`scrambleString()`确实进行了初始化和工作`sRet`，而最后返回的下部代码`retStr`使工作 `sRet`根本没有使用。您可能应该结合`retStr`/ `sRet`，也许只使用一个字符串...

```
sRet.ref(i1) = validCharList[i] 
```

上面的代码只是一个简单的 char 赋值，将 pos `i1`in的 char 替换为pos的`sRet`字符串中的 char 。`validCharList``i`

# javascript - jQuery - 删除子域或 www？

> ID：12447003
> 
> 赞同：2
> 
> 时间：2012-09-16T12:52:51.183
> 
> 标签：javascript, jquery, subdomain

我有以下 URL：[http](http://www.scenemovie.org) ://www.scenemovie.org或[http://subdomain.scenemovie.org](http://subdomain.scenemovie.org)

我想保留“scenemovie.org”并删除“http://www.”。jQuery如何实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-17T00:27:30.450

如果有子子域，则此正则表达式仅返回域：

```
url = 'http://a.sub.subdomain.exemple.com';
domain = url.match(/[^\.]*\.[^.]*$/)[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T12:59:19.933

```
url = 'http://www.scenemovie.org';
domain_and_tld = url.replace(/http:\/\/.+?\./, '') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T13:02:41.910

> 如何用 jQuery 做到这一点？

在您可能不知道所需域是什么的一般情况下，您不知道。

正如您在 DNS 中使用的术语一样，没有关于什么构成“子域”的规范。实际上，您正在寻找的是 DNS 中的*管理*边界，但没有确定性的方法来判断这些管理边界的位置。

例如，我碰巧认识`www.me.uk`. 这本身就是一个正确注册的域名，即使它*看起来*像一个“子域”。

您可以获得的最接近的（尽管即使是有缺陷的）是将域与“公共后缀列表”进行比较，这是试图创建一个明确的列表（它不是）哪些域是“可注册域”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-16T13:02:28.360

尝试 htaccess：

```
<IfModule mod_rewrite.c>
  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]
</IfModule> 
```

# java - 在 JSP 页面中缓存访问的值

> ID：12447005
> 
> 赞同：0
> 
> 时间：2012-09-16T12:53:03.677
> 
> 标签：java, jsp, caching

在我的**Java** Web 应用程序中，我的整个数据库结构都包含在**Model classes**中。这真的很简洁，因为使用这些模型，我可以非常简单地直接在**JSP 页面**中从数据库中打印任何内容。请参见以下示例：

```
<c:if test="${fn:length(author.books) == 0}">The author has no books.</c:if>

<c:forEach items="${author.books}" var="book">
${book.name}
</c:forEach> 
```

模型`Author`有一个`getBooks()`从数据库中获取相关书籍并返回代表书籍的模型**集合的方法。**问题是在上面的示例中，该方法实际上被调用了两次，这导致了一个冗余查询。

我知道我可以使用存储值，`<c:set />`但首先，我会经常使用它（上面的示例在我的应用程序中*很*常见），其次，它并不总是有效。例如：

```
<c:forEach items="${books}" var="book">
${book.author.name}
</c:forEach> 
```

不幸的是，我的数据库**不支持连接**，因此对于每一行，我都必须运行一个查询以从数据库中获取作者（它实际上非常快，因为作者是`memcache`通过键存储的）。假设我想在一页中使用这个循环**两次（***大菜单*和*小菜单*或其他......）。因此，每个作者都从数据库（或 memcache）中获取了两次，这实际上是不希望的。

我该如何避免呢？理想情况下，JSP“渲染器”应该将每个获取的值存储在一个**临时缓存**中（仅用于一个请求），并且下次使用这个缓存值而不是再次调用该方法。另一种方法是直接在模型对象中实现此缓存，但我不知道如何在不重写一半代码的情况下有效地做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:57:54.273

JSP 不应该做任何这样的事情。它们仅用于展示。

通常的习惯用法称为 Web 的 Model-2 MVC：servlet 充当前端控制器并将 JSP 请求路由到后端服务。它应该编组 JSP 需要显示的值。它是执行所有逻辑的后端。这包括数据的来源：缓存、数据库或实时计算。

您的模型对象不应该知道或关心它们是否被缓存。（仅仅因为您决定缓存或保留它，它就不再是作者或书籍。）保持缓存分开。

既然有这么多可用的东西，你为什么要考虑写这样的东西？谷歌搜索 EhCache 或 Terracotta 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:15:32.680

最大的问题是第二个描述的例子——我想避免从数据存储（或内存缓存）重复获取相同的实体。幸运的是，所有实体都在一个完全分离的层中获取。我更新了这一层，现在每个获取的实体都通过其键存储在 HashMap 中。此 HashMap 用作简单的缓存 - 当一个实体被多次请求时，它仅在第一种情况下被获取，在使用该缓存值之后。请求完成时清除此 HashMap。

这更有可能是一种解决方法，而不是我仍然对其他想法感兴趣的真正解决方案。

# concatenation - 如何使用串联将 std_logic_vector 转换为 std_logic_vector

> ID：12447010
> 
> 赞同：2
> 
> 时间：2012-09-16T12:53:35.057
> 
> 标签：concatenation, vhdl, shift

假设我有 2 个 std_logic_vectors：

```
inputA : std_logic_vector(31 downto 0)
inputB:  std_logic_vector(31 downto 0) 
```

如何使用串联进行`inputA`移位？`inputB`

我知道如何向左或向右移动 1 个位置，但不知道如何向右（或向左）移动 N 个位置。注意：这是一个无时钟电路，不能使用标准的 vhdl 移位运算符。

除了串联之外的其他技术或想法也将受到赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T18:31:20.110

最简单的方法是这样的：

```
library ieee;
use ieee.numeric_std.all;
...
output <= std_logic_vector(unsigned(inputA) srl to_integer(unsigned(inputB))); 
```

（顺便说一句，作为无时钟电路与是否能够使用移位运算符无关。决定它的是数据类型。这种移位操作将由合成器转换为与您编写更多内容时相同的逻辑复杂的 case 语句全部手动展开。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T10:15:17.507

我更喜欢 wjl 的方法，但鉴于您专门要求使用连接的方法，请尝试以下操作：

```
function variable_shift(i : std_logic_vector, num_bits : integer) 
   return std_logic_vector is
   constant zeros : std_logic_vector(num_bits-1 downto 0) := (others => '0');
begin
   return i(i'high-num_bits downto i'low) & zeros;
end function; 
```

（它可以写成参数需要一秒钟`std_logic_vector`，`num_bits`但由于它基本上是一个数字，我总是使用基于数字的类型）

# zend-framework - 如何在 Ubuntu 上的 netbeans 中设置新的 zend 框架

> ID：12447018
> 
> 赞同：0
> 
> 时间：2012-09-16T12:54:42.827
> 
> 标签：zend-framework, ubuntu, netbeans

我通过（新 PHP 项目）>（名称和位置）>（运行配置）>（PHP 框架）联系了 PHP 框架。

现在，当我尝试选择 Zend PHP 框架时，Netbeans 说错误没有选择 zend 脚本。

如何在 Ubuntu 上配置 Zend Framework。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:31:19.770

查看[Zend_Tool 的手册以了解](http://framework.zend.com/manual/1.12/en/zend.tool.framework.clitool.html "Zend_Tool 手册")如何设置它。然后使用

```
zf create project myproject 
```

# assembly - 程序集 x86 - 尝试移动用户输入时向左移动不起作用

> ID：12447019
> 
> 赞同：0
> 
> 时间：2012-09-16T12:54:49.783
> 
> 标签：assembly, x86, int, user-input, x86-16

我试图将用户输入的数字移动 1，因为`SHL`它等于 2 的倍数，这就是为什么我将输入移动 2 以打印 2 的倍数。

这是我的代码，

```
MOV AH,01H
INT 21H

MOV DL,AL

MOV AH, 02H
INT 21H 

MOV CX,10

L1:
    SHL DL,1
    MOV AH, 02H
    INT 21H 
LOOP L1

MOV AX, 4CH ; RETURN TO MS-DOS
INT 21H 
```

的服务接受用户输入的字符`01`。`INT 21H`在这种情况下是一个数字，在每次迭代中循环向左移动 1。不幸的是，这不会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:15:06.697

在移位之前，您需要从 的值中减去`'0'`/ `48d`/以获取 ASCII 值的字符的数值。移位 ASCII 值对乘法没有意义。然后在打印前添加。`0x30``dl``'0'``dl`

```
mov cx,10

sub dl,'0' ; convert ASCII value to numeric value: '0' -> 0, '1' -> 1 ... 

L1:
    shl dl,1
    mov ah,02h
    add dl,'0' ; convert numeric value to ASCII value: 0 -> '0', 1 -> '1' ...
    int 21h
    sub dl,'0' ; convert ASCII value back to numeric value: '0' -> 0, '1'
loop L1 
```

# iphone - 如何测试生产推送通知？

> ID：12447025
> 
> 赞同：48
> 
> 时间：2012-09-16T12:55:43.020
> 
> 标签：iphone, objective-c, ios, apple-push-notifications

到目前为止，我使用了开发推送证书，推送通知效果很好。

现在我想将我的应用程序提交给 Apple，所以我创建了一个生产证书并将其设置在“代码签名身份”->“发布”下

我还将 .p12 文件放在我的生产服务器中。
但是现在的推送不起作用。

当我从 xcode 运行时，它应该工作吗？或者从 App Store 下载应用程序时它会起作用吗？如果是这样，我该如何测试它？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-20T15:15:17.610

您可以测试构建您应用的 AdHoc 版本的 APNS 生产环境。该应用程序将使用生产证书和服务器，其目的正是在您将其发送到 AppleStore 之前进行测试。

看看这个链接：[我需要什么样的证书来测试使用 ad-hoc 分发的 apns？](https://stackoverflow.com/questions/1889743/what-kind-of-certificate-do-i-need-to-test-apns-using-ad-hoc-distribution)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-16T13:00:45.030

当您从 App Store 下载应用程序时，生产推送将起作用。

更新：
您还可以使用 AdHoc 构建的应用程序测试生产推送；见[特林卡的回答](https://stackoverflow.com/a/13975158/199364)。

更新：
现在，最简单的解决方案是使用[Apple 的 TestFlight](https://developer.apple.com/testflight/)。（在 TestFlight 中，很容易添加新的远程用户，向他们发送电子邮件邀请，然后他们可以在他们选择的任何设备上下载。）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-11T22:00:32.237

在配置文件中为您的应用创建临时分发配置文件。下载配置文件并安装。选择 Adhoc dist 配置文件以对您的应用程序进行代码签名。存档 ipa 并保存以供临时分发。将 ipa 复制到您的设备并测试推送。它将使用生产推送证书而不是开发证书。希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-02T08:02:25.863

通过 Apple TestFlight 安装应用程序时，可以测试生产通知（不发布构建版本）。

这样，生产通知将被传递到应用程序。

（如果通过 HockeyApp 或其他方式安装完全相同的版本，则不会发送生产通知。）

在 iTunes Connect 中完成处理后，只需将构建设置为内部测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-11T07:46:21.193

如果你想在生产环境中测试推送通知，你需要注意几件事：-

1.  生产推送通知只能在 ipa 上测试。您需要从 AdHoc Distribution 配置文件创建 ipa。
2.  您需要替换 Push API 服务器上的 Push 证书。在这种情况下将使用APNS**分发证书。**
3.  如果您的 API 在 DOTNET 中，那么您需要将布尔值更改为 true。
4.  将代码签名身份更改为在**项目**和**目标上分发**

# android - 四个 Square API 应用程序图标

> ID：12447030
> 
> 赞同：0
> 
> 时间：2012-09-16T12:56:19.623
> 
> 标签：android, foursquare

在 Fours Square 应用程序中，签到模块显示了我附近的地方的图标，例如商学院、餐厅等。现在我正在我的应用程序中集成 Fours Square API，并且想要类似的外观和感觉。谁能告诉我从哪里可以得到这些图标，或者我必须自己设计。

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:30:26.557

返回场地时，API 会返回类别图标。查看场地类别中的图标节以获取返回的场地。[场地用户图像错误的 Foursquare API](https://stackoverflow.com/questions/10977100/foursquare-api-for-venue-user-image-error)包含有关如何从前缀/后缀构造图标的说明。

# javascript - Javascript中奇怪的字符串拆分行为

> ID：12447032
> 
> 赞同：1
> 
> 时间：2012-09-16T12:56:29.550
> 
> 标签：javascript

当我跑

```
'{{123}}'.split(/(\{\{)|(\}\})/g, -1) 
```

我预计

```
["", "123", ""] 
```

但它显示

```
["", "{{", undefined, "123", undefined, "}}", ""] 
```

为什么？？有什么不对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T12:58:26.147

采用：

```
'{{123}}'.split(/\{\{|\}\}/) 
```

使用时不需要抓组`.split`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T13:14:47.100

[http://es5.github.com/#x15.5.4.14](http://es5.github.com/#x15.5.4.14)

如果 separator 是一个包含捕获括号的正则表达式，那么每次 separator 匹配时，捕获括号的结果（包括任何未定义的结果）都会拼接到输出数组中。例如，

```
"A<B>bold</B>and<CODE>coded</CODE>".split(/<(\/)?([^<>]+)>/) 
```

评估为数组

```
["A", undefined, "B", "bold", "/", "B", "and", undefined, "CODE", "coded", "/", "CODE", ""] 
```

所以，`'{{123}}'.split(/(\{\{)|(\}\})/g, -1)`返回

```
["",
"{{", undefined, // "{{" is matched, but "}}" isn't.
"123",
undefined, "}}", // "{{" isn't matched, but "}}" is matched. 
""] 
```

# python - 为什么 __getitem__ 不能是类方法？

> ID：12447036
> 
> 赞同：17
> 
> 时间：2012-09-16T12:56:56.287
> 
> 标签：python, class-method

假设以下类：

```
class Class(object):
    @classmethod
    def getitem(*args):
        print 'getitem %s' % (args,)
    @classmethod
    def __getitem__(*args):
        print '__getitem__ %s' % (args,) 
```

getitem 方法的行为符合预期：它作为第一个 arg接收`Class`，但作为第一个 arg 接收：`__getitem__``type`

```
calling Class.getitem(test)
getitem (<class '__main__.Class'>, 'test')

calling obj.getitem(test)
getitem (<class '__main__.Class'>, 'test')

calling Class[test]
'type' object has no attribute '__getitem__'

calling obj[test]
__getitem__ (<class '__main__.Class'>, 'test') 
```

背后有什么魔力`__getitem__`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-16T13:03:45.867

在类上查找特殊方法，而不是在实例上查找 - 与首先在实例上查找的常规方法不同。请参阅Python 数据模型文档中的[特殊方法查找](http://docs.python.org/reference/datamodel.html#special-method-lookup-for-new-style-classes)。

考虑`Class`作为 的一个实例`type`，这意味着当您这样做时

```
Class.getitem(test) 
```

它首先查找您告诉它的内容：在`Class`自己的属性中调用的方法`getitem`。但是，当你使用

```
Class[test] 
```

它跳过这个，直接进入`type`（作为 的类`Class`，或其元类），因此调用`type.__getitem__(Class, test)`. 所以，发生的事情不是作为它的第一个参数`__getitem__`得到`type`（它仍然会得到`Class`，如果你明确地这样做`Class.__getitem__(test)`），它是`__getitem__`Python 在这种情况下寻找的不存在。要使其存在，您需要定义自己的元类`Class`，将其定义为实例方法，而不是将其定义`Class`为类方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-16T13:02:48.393

当您调用`x[test]`时，解释器会检查`type(x)`该`__getitem__`属性。如果是`Class[test]`的`Class`元类，即`type`. 如果你想拥有一个类范围的`__getitem__`，在一个新的元类中定义它。（不用说，这是一种魔法，就像你对元类所做的任何事情一样）

```
class Meta(type):
    def __getitem__(self, arg):
        print "__getitem__:", arg

class X(object):
    __metaclass__ = Meta

X['hello'] # output: __getitem__ hello 
```

# c# - 在 WPF 中设置自定义光标图像热点

> ID：12447038
> 
> 赞同：1
> 
> 时间：2012-09-16T12:57:31.683
> 
> 标签：c#, wpf, image, cursor

我正在尝试在 Cursor 上使用自定义图像，并使用这些代码进行了操作。

```
public static class cursorHelper
{

    public static Cursor vertical = new Cursor(Application.GetResourceStream(getFromResource("PenCADwpf", "Images/cursors/Vertical.ico")).Stream);
    public static Cursor horizontal = new Cursor(Application.GetResourceStream(getFromResource("PenCADwpf", "Images/cursors/Horizontal.ico")).Stream);
    public static Uri getFromResource(string psAssemblyName, string psResourceName)
    {
        Uri oUri = new Uri("pack://application:,,,/" + psAssemblyName + ";component/" + psResourceName, UriKind.RelativeOrAbsolute);
        return oUri;
    }
    public static ImageSource getImageSourceFromResource(string psAssemblyName, string psResourceName)
    {
        Uri oUri = getFromResource(psAssemblyName, psResourceName);

        return BitmapFrame.Create(oUri);
    }

} 
```

在代码中使用是

```
 private void btnVerticalMullion_Click(object sender, RoutedEventArgs e)
    {
        this.Cursor = cursorHelper.vertical;
    } 
```

我的问题是光标的热点是左下角。我需要将其更改为图像的 0,0（左上角）点。任何机构可以帮助我吗？提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T17:36:45.067

这是因为您使用 .ICO 文件而不是 .CUR 文件作为`Cursor`类的数据。

虽然 .ICO 和 .CUR 文件格式相似，但 .ICO 格式不包含热点信息。

*   [http://en.wikipedia.org/wiki/ICO_(file_format)#cite_note-11](http://en.wikipedia.org/wiki/ICO_(file_format)#cite_note-11)

您有 2 个选择：

*   将您的 .ICO 文件转换为 .CUR 文件并将其嵌入为资源

    使用您可以在 Web 上找到的转换实用程序来执行此操作，
    或者
    在 Visual Studio 中创建一个新的 .CUR 文件，然后从您的 . ICO 文件。

*   将它们保留为 .ICO 文件，但修改数据，以便在传递给 Cursor 类时遵循 CUR 格式。

下面是一些修改 ICO 流以将其转换为 CUR 格式的示例代码。

在此示例中，我使用包含单个 32X32X4 位 BMP 图像的 ICO 文件对其进行了测试，并且我希望光标具有 (15,15) 热点。

如果您沿着这条路线走，此代码只是为了让您开始......它需要更多代码来处理错误，以及处理包含多个图标图像（即，如果有多个条目）等的 ICO 文件的能力，等等​​。

您还可以使用 a`BinaryWriter`来更自然地处理数据，例如通过使用 . 写出使用 2 个字节（即超过 255 个）的热点坐标`Write(UInt16)`。

![在此处输入图像描述](../Images/b8a352c9f04f7b7b12a4602935c59825.png)

![在此处输入图像描述](../Images/e49c48ae052db2ddc99cc26ecdb7711d.png)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.IO;
using System.Windows.Resources;

namespace WpfApplication2
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Uri uri = new Uri("pack://application:,,,/test.ico");

            Stream iconstream = GetCURFromICO(uri, 15, 15 );

            Cursor cursor = new Cursor(iconstream);

            this.Cursor = cursor;
        }

        public static Stream GetCursorFromICO(Uri uri, byte hotspotx, byte hotspoty)
        {
            StreamResourceInfo sri = Application.GetResourceStream(uri);

            Stream s = sri.Stream;

            byte []buffer = new byte[s.Length];

            s.Read(buffer, 0, (int)s.Length);

            MemoryStream ms = new MemoryStream();

            buffer[2] = 2; // change to CUR file type
            buffer[10] = hotspotx;
            buffer[12] = hotspoty;

            ms.Write(buffer, 0, (int)s.Length);

            ms.Position = 0;

            return ms;
        }

        public static Stream GetCURFromICOAlternativeMethod(Uri uri, byte hotspotx, byte hotspoty)
        {
            StreamResourceInfo sri = Application.GetResourceStream(uri);

            Stream s = sri.Stream;

            byte []buffer = new byte[s.Length];

            MemoryStream ms = new MemoryStream();

            ms.WriteByte(0); // always 0
            ms.WriteByte(0);
            ms.WriteByte(2); // change file type to CUR
            ms.WriteByte(0);
            ms.WriteByte(1); // 1 icon in table
            ms.WriteByte(0);

            s.Position = 6; // skip over first 6 bytes in ICO as we just wrote

            s.Read(buffer, 0, 4);
            ms.Write(buffer, 0, 4);

            ms.WriteByte(hotspotx);
            ms.WriteByte(0);

            ms.WriteByte(hotspoty);
            ms.WriteByte(0);

            s.Position += 4; // skip 4 bytes as we just wrote our own

            int remaining = (int)s.Length - 14;

            s.Read(buffer, 0, remaining);
            ms.Write(buffer, 0, remaining);

            ms.Position = 0;

            return ms;
        }
    }
} 
```

* * *

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>

    </Grid>
</Window> 
```

# algorithm - 加入混合抗锯齿线时下降

> ID：12447042
> 
> 赞同：9
> 
> 时间：2012-09-16T12:58:13.293
> 
> 标签：algorithm, graphics, drawing, antialiasing, raster-graphics

在使用混合模式时加入两条抗锯齿线时遇到问题，我在它们加入的点处有所下降。通过混合模式，我的意思是我通过计算线条颜色与背景颜色的比率来绘制抗锯齿线条，因此当像素的比率为例如 70% 时，新像素为 0.7*线条颜色 + 0.3*背景颜色。我的线条抗锯齿功能基本上是由错误函数制成的（尽管我认为大多数抗锯齿功能也会出现同样的问题），如下所示：

![0.5+0.5erf(-x)](../Images/d4b92d38890c7c005d582f610e855db6.png)

因此，当两条线相遇时，一条接一条地绘制，你会得到一个下降，两条线的连接处下降到它应该处于的强度的 75%，因为在那一点上，第一条线保留了 50% 的背景，并且然后在绘制第二条线后剩下 50% 的 50% 应该留下 0%：

![1 - (0.5erfc(-x) * 0.5erfc(x))](../Images/31f3e85b2f5f02c0af0bacba3bb1cfc6.png)

我只能假设这是绘制带有连接线的抗锯齿光栅图形的常见问题，因此它必须有一个通用的解决方案，但我不知道这是什么。谢谢！

*另外：*为了清楚线条是如何绘制的，线条的宽度是使用高斯函数 (e^-x*x) 制作的，并且两端使用凸起的误差函数进行四舍五入。您可以通过在 WolframAlpha 中输入 '0.5erfc(-x-5) * 0.5erfc(x-5) * e^(-y*y)' 来查看 10 px 长水平线的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T23:04:33.823

如果您将混合线段视为线段，则通常无法制作由混合线段组成的好看的连续线 - 如果您只是想到有一条线然后以相同角度绘制下一条线段的情况，然后以 90 度角。*一条线的像素颜色取决于它与下一条线的连接角度*

然后你需要考虑的是末端有角度的部分。

要绘制它，请查找有关斜角线连接斜接的文献（斜接可能更容易）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:01:58.000

如果你用混合来绘制相邻的线，这是一个非常不可能的问题。

考虑这一点的一个好方法是理想形状的距离函数。像素强度映射（通过某些函数）到形状的距离。有两条完美的线条，这只是最低限度。

不幸的是，这意味着您需要到可能影响像素的每条线的距离。这就是一些文本光栅化器所做的。

或者你只是不加权线。它们按像素打开或关闭。然后你让超级采样处理剩下的事情。这就是像 flash 或 svg 这样的软件矢量渲染器所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T18:46:55.217

[thang](https://stackoverflow.com/users/1779316/thang)的想法可能是一个很好的起点：简而言之，控制“画笔”的中心而不是边缘。理想情况下，通过这种方法，您会看到漂亮的圆形端点。

然而，事实不会这么美好。问题是您首先将一条线与目标曲面进行 alpha 混合，然后在该曲面上对第二条线进行 alpha 混合，该曲面上已经有一条线“烧入”。最终结果将是在两个半透明像素相互重叠的角落处出现更胖的斑点（例如，如果您尝试在 Gimp 中绘制连接线段，您可能会在实际中观察到这种效果）。

我认为在此设置上使用这种简单的一次一行的方法无法解决此问题（因此您需要使用折线算法或超级采样朝着其他建议的方向发展）。但是，根据您的目标，您可能有一个可行的解决方案。

这是将您的图形对象预渲染到具有 alpha 的单独表面。在这一点上，您可以组合各个线的 alpha（例如从目标像素和绘制的像素中获取最大的），这将为您提供预期的结果（角落上没有脂肪团）。

缺点是您需要一个单独的表面，当对象完成时，您必须在目标上进行 blit：这需要额外的内存和处理时间。

如果您只需要渲染到一些平面（单色）目标，您可以解决这个问题：那么您根本不需要执行适当的 alpha 混合，并且可以就地进行组合 alpha 计算。如果背景很容易计算（例如坐标网格），则此解决方案可能是可行的，因此总的来说，当您可以轻松获得背景的原始像素值时，您可以结合它（确实这也可以如果你将渲染的背景保留在一个单独的表面中，但你又在内存中有另一个表面，所以可能没有任何结果）。

如果您的问题属于其他性质，如果您将这些渲染的单独表面保留在周围，这也可能是可行的，这实际上是您预渲染线条对象，然后仅将它们用作纹理或瓷砖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-21T13:09:32.790

最终我找到了这个问题的答案。直接在主图像上直接绘制一条线，这是没有明智的方法的，因为您不希望将线条混合在一起，而是希望将它们加在一起然后得到线条总和的结果融入主图。

但是，如果您必须将所有这些线绘制到一个单独的缓冲区，然后将整个缓冲区混合到主缓冲区中，那将很笨拙，这是我在提出这个问题之前考虑并认为不合适的。值得庆幸的是，从那以后我完全改变了我的方法，而不是使用一个缓冲区来绘制一个又一个元素，而是使用逐像素方法，其中每个像素都是通过遍历要绘制的元素列表直接计算的，为了并行化（使用 OpenCL）。因此，不必使用额外的缓冲区，我只需要一个可以容纳一些额外像素值的小数组，并且在我要绘制的元素列表中，我有用作括号的元素，例如，而不是：

`image => (blend) line1 => (blend) line2 => (blend) line3`

我可以有：

`image => (blend) [0 => (add) line1 => (add) line2 => (add) line3]`

这是通过为括号的每个深度级别设置一个值数组来替换单个像素值的使用来完成的，因此在这种情况下，`v[0]`您将拥有来自 的像素`image`，然后您将从`v[1]`0 开始并将每一行添加到它，当添加所有行时，括号的关闭将`v[1]`被混合`v[0]`，并且正确的结果像素值将在那里。

就是这样，它非常简单，如果您不允许自己在 Photoshop 中使用相当于一组图层，这只是一个问题。

# lua - Corona/Lua - 如何在 3 列中打印文本

> ID：12447043
> 
> 赞同：0
> 
> 时间：2012-09-16T12:58:16.180
> 
> 标签：lua, coronasdk

我对 Lua 和 Corona 还很陌生，所以我还不能理解逻辑。

我有看起来像这样的数据（但列表是动态创建的）：

```
cat
dog
egg
want
gone
bone
goner
bones
effort
effect 
```

但我希望它在屏幕上看起来像这样（注意列表是按字母数排列的）：

```
cat   gone   effort
dog   bone   effect
egg   goner
want  bones 
```

该列表可以更长或更短，但我希望将其保持在 3 列。我怎样才能做到这一点？

问候，

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T23:27:40.560

您可以并排使用 3 Corona display.newText() ...

或者您可以使用 Lua 本身以这种方式格式化字符串，使用 [[ ]]

```
local myString = [[
123    1234     12345
123    1234     12345
123    1234     123456
1234   1234     123456
]] 
```

# jquery - 在输入字段中输入一定长度的文本后如何自动提交表单

> ID：12447045
> 
> 赞同：1
> 
> 时间：2012-09-16T12:58:21.687
> 
> 标签：jquery, forms, submit

我正在为我的表单寻找一个自动提交功能，一旦用户在输入字段中输入一定长度的文本（比如说 15 个字符）就应该提交它。

jQuery 中是否有任何函数会不断（以非常短的时间间隔）检查输入字段中文本的长度并在满足所需的字符数后运行函数？有任何想法吗？

编辑：我正在寻找此功能：用户使用表单输入页面-自动聚焦在输入字段上-用户使用扫描仪读取条形码-然后将条形码编号粘贴在输入字段中（不是 keyup、keydown 事件）和表格是自动提交的。

已解决：使用此功能捕捉输入字段的变化：

```
$(#inputField).bind('input propertychange', function(){
  dostuff();  
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T13:01:28.057

`interval`让我们将`keyup`事件处理程序附加到文本字段，而不是在特定的输入字段中检查文本长度。每次`keyup`触发事件时，我们都会检查长度是否超过 15。如果超过，我们将使用`.submit()`API 提交表单。

```
$('yourTextBoxSelector').on("change paste keyup", function(){
    if($(this).val().length >15){
        $('yourFormSelector').submit()
    }
}); 
```

更新： jQuery 有一个事件`paste`。你可以用它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:03:22.400

这是我处理这个问题的方法。这也考虑到用户复制和粘贴到输入区域。

Jsfiddle -> [http://jsfiddle.net/PgzrU/4/](http://jsfiddle.net/PgzrU/4/)

下面的代码：

```
var max = 15;
$('input').change(function(e)
{  
  if ($(this).val().length > max) { alert('form fired') }
}).keyup(function(e)
{  
  if ($(this).val().length > max) { alert('form fired') }
});​ 
```

# spring - 使用 Spring Security 和 Hibernate 进行简单登录

> ID：12447051
> 
> 赞同：1
> 
> 时间：2012-09-16T12:59:47.267
> 
> 标签：spring, jakarta-ee, spring-security

我的要求是使用 spring security 和 hibernate 从 db 验证用户 ID 和密码。

我想在用户的第一次请求时打开 login.jsp 页面，一旦用户被验证，那么只有它应该重定向到 index.jsp。

我尝试了几个选项，但无法找出正确的方法。

applicationContext-security.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http auto-config="false" use-expressions="true">
        <form-login login-page="/jsp/login.jsp"
            default-target-url="/jsp/index.jsp"
            authentication-failure-url="/jsp/login.jsp?login_error=1" />

        <intercept-url pattern="/jsp/login.jsp" access="permitAll" />
        <intercept-url pattern="/**" access="isAuthenticated()" />

        <logout logout-url="/j_spring_security_logout"
            invalidate-session="true" />

    </http>

    <beans:bean id="customUserDetailsService" class="com.onmobile.otp.db.CustomUserDetailsService">
        <beans:property name="urmService" ref="urmService" />
    </beans:bean>

    <authentication-manager alias="authenticationManager">
        <authentication-provider user-service-ref="customUserDetailsService">
        <password-encoder hash="md5" />
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

CustomUserDetailsS​​ervice.java

```
package com.onmobile.otp.db;

import java.util.ArrayList;
import java.util.List;

import org.springframework.dao.DataAccessException;
import org.springframework.security.GrantedAuthority;
import org.springframework.security.GrantedAuthorityImpl;
import org.springframework.security.userdetails.UserDetails;
import org.springframework.security.userdetails.UserDetailsService;
import org.springframework.security.userdetails.UsernameNotFoundException;

import com.onmobile.otp.domain.Permission;
import com.onmobile.otp.domain.User;

public class CustomUserDetailsService implements UserDetailsService{

    URMService urmService=null;

    @Override
    public UserDetails loadUserByUsername(String userName)throws UsernameNotFoundException, DataAccessException {
        System.out.println("Inside loadUserByUserName");

        User user = urmService.getUserByUserName(userName);
        if(user == null){
            throw new UsernameNotFoundException("Username :"+ userName + " not found in database");
        }

        UserRole userRole = urmService.getUserRoleByUser(user);
        if(userRole == null){
            return null;
        }
        if(userRole.getRole() == null){
            return null;
        }

        List<Permission> userAuthorities = urmService.getPermissionsByRole(userRole.getRole());
        if(userAuthorities == null){
            return null;
        }

        List<GrantedAuthority> grantedAuthoritiesList = new ArrayList<GrantedAuthority>();
        for(Permission permission : userAuthorities){
            String perm = permission.getPermissionName();
            grantedAuthoritiesList.add(new GrantedAuthorityImpl(perm));
        }
        GrantedAuthority [] grantedAuthoritiesArray = grantedAuthoritiesList.toArray(new GrantedAuthority[grantedAuthoritiesList.size()]);
        CustomUserDetails customUserDetails = new CustomUserDetails(user.getUsername(), user.getPassword(), true, true, true, true, grantedAuthoritiesArray);
        customUserDetails.setUserRole(userRole);

        return customUserDetails;
    }

    public void setUrmService(URMService urmService) {
        this.urmService = urmService;
    }

} 
```

我得到了例外

```
Caused by: java.lang.IllegalArgumentException: No authentication providers were found in the application context
    at org.springframework.util.Assert.notEmpty(Assert.java:268)
    at org.springframework.security.config.NamespaceAuthenticationManager.afterPropertiesSet(NamespaceAuthenticationManager.java:31)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)
    ... 30 more 
```

请建议我哪里出错了。谢谢

# python - 爬取 Twitter 时结果重复

> ID：12447053
> 
> 赞同：0
> 
> 时间：2012-09-16T13:00:00.407
> 
> 标签：python, twitter

```
while(page<=500):
    tweets=api.GetSearch("#Burma",per_page=100) 
```

为什么它给了我这么多重复的结果。它只给我一页，然后重复 500 次。它给了我和第一页一样的推文。谁能给我一个线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:22:23.780

您需要分别向 twitter 询问每个页面；在您的循环中，您每次都不断要求相同的页面，而不将页码传递给搜索查询：

```
import twitter

api = twitter.Api()
page = 1
while page <= 500:
    tweets = api.GetSearch("#Burma", page=page, per_page=100)
    for t in tweets:
        print t.text
    page += 1 
```

您也不需要使用`while`循环，您可以通过使用循环来简化代码`for`，并结合`xrange()`函数：

```
api = twitter.Api()
for page in xrange(1, 501):
    tweets = api.GetSearch("#Burma", page=page, per_page=100)
    for t in tweets:
        print t.text 
```

# java - Java Activiti 变量

> ID：12447057
> 
> 赞同：0
> 
> 时间：2012-09-16T13:00:49.190
> 
> 标签：java, spring-mvc, activiti

我正在学习 Java Activiti，以便通过 Java Spring MVC 连接进程。

我使用了 Java 服务任务并且我的代码执行了。我想要做的是当进程开始时我希望客户端发送输入。例如发送一个名字。这如何通过 Java Activiti 实现？我已经尝试了所有东西，但找不到我需要的东西。

另外，我希望该过程输出一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:20:51.967

根据我从您的问题中可以理解的内容，我能想到的选择很少。

1.  创建一个网络服务。在那里，您可以从用户那里获取 GET/POST 数据。然后在服务代码中，使用 Acitviti API 启动工作流。

2.  在开始事件上创建一个表单。浏览开始事件的属性

3.  在 Start 事件之后创建一个用户任务。使用表单属性从用户那里获取输入。

# java - 将图像插入 JList

> ID：12447059
> 
> 赞同：1
> 
> 时间：2012-09-16T13:01:06.303
> 
> 标签：java, image, swing, list

我正在尝试将 a 加载`Image`到 a`List`中，但似乎无法使其正常工作。我努力了

```
ImageIcon pic = new ImageIcon("http://i3.ytimg.com/vi/68X8RUxeXeA/default.jpg");
JLabel picLbl = new JLabel(pic);

Object[] lol = {picLbl, "pic", "length"};
list = new JList(lol);
scrollPane.setViewportView(list);
list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); 
```

那只是放`javax.swing.JLabel[,0,0,0x0,invalid,alignmentX=0.0,alignmentY=0.0,border=,flags=8388608,maximumSize=,minimumSize=,preferredSize=,defaultIcon=http://i3.ytimg.com/vi/68X8RUxeXeA/default.jpg,disabledIcon=,horizontalAlignment=CENTER,horizontalTextPosition=TRAILING,iconTextGap=4,labelFor=,text=,verticalAlignment=CENTER,verticalTextPosition=CENTER]`

而不是实际的图片。我环顾四周，但似乎找不到任何有效的方法。如果你们中的任何人知道如何实现这一点，任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:09:49.100

A[`DefaultListCellRenderer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListCellRenderer.html)是 a `JLabel`，因此您可以与 a`setIcon()`一起使用`ImageIcon`。这个相关的[例子](https://stackoverflow.com/a/7620726/230513)可能是一个有用的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T13:14:59.140

Jlist 不能显示 Jlabels。从您的 Image 创建一个 ImageIcon 并将其用于您的元素数组。

如果您想了解更多关于 JList 实际显示元素的信息，请阅读[http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer)

# javascript - 避免两次包含js文件的方法

> ID：12447063
> 
> 赞同：0
> 
> 时间：2012-09-16T13:02:03.087
> 
> 标签：javascript, html

这是一个简单的 html 文件：

```
<!DOCTYPE html>
<html>
   <head>
<title>Test Uploading Func.</title>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery-1.7.2.js">                  </script>        
<link type="text/css" href="jquery-ui-1.8.21.custom.css" rel="Stylesheet" />
    <script type="text/javascript" src="jquery-ui-1.8.21.custom.min.js"></script>

        <!--Include js file-->
        <script type="text/javascript" src="upload.js" ></script>
</head>
<body>
    <button id="Upload" value="upload">upload</button>      
    <script type="text/javascript" src="upload.js" ></script>
</body> 
```

这是我要包含的 js 文件：

```
$( '#Upload' ).bind('click', function(){
alert(">");
}); 
```

如果我只是在开头包含 js 文件，**选择器 #**无法知道 id **Upload**所以我必须在文件末尾再次包含它......我知道它不正确。但是不知道怎么解决？我们不只是在标签**head**中包含所有 js 文件吗？我展示的合适的编码风格是什么？谢谢。

更新问题！！！

如果我有很多这样的场景，我应该在所有函数中添加“$(document).ready()”吗？有点奇怪......还有另一种方法吗？或者 Web 开发人员总是这样做。

我应该在哪里包含我的 js 文件？在开始还是结束？

如果我最后把它们都包括在内，就不会出现这种问题。那为什么很多人一开始就包含js文件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:06:03.577

在选择元素之前等待 DOM[准备好：](http://api.jquery.com/ready/)

```
$(document).ready(function () {
    $( '#Upload' ).bind('click', function(){
        alert(">");
    });
}); 
```

*更新：*

如果您正在操作代码运行时希望出现在页面上的元素，则应*始终*使用。`$(document).ready(...)`如果您的代码在`<head></head>`文档中，这一点尤其重要。

如果您的代码在标签内，则*不需要*使用，但请注意[两者之间存在差异](https://stackoverflow.com/q/4820523/497356)。`$(document).ready(...)``</body>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T13:05:29.513

为什么不检查`$(document).ready()`并只包含一次：

```
$(document).ready(function() {
    $( '#Upload' ).bind('click', function(){
        alert(">");
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T16:17:14.197

通常认为将所有脚本放在 body 标签的底部是更好的做法。我通常不会的唯一一次是需要位于顶部的专用脚本，例如 HTML5 shiv 或某些分析脚本。

主要原因是脚本解释暂停了 HTML/CSS 渲染，这实际上会降低感知的加载时间性能。

附带的好处是您通常不必担心 DOM 就绪事件，因为当您的脚本在引用元素下方触发时，您可以确定 HTML 已经“就绪”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T13:49:10.833

如果您使用 jQuery，则应始终将其放入，
`$(document).ready(function(){ ... code here ... });`
或者
`$(function(){ ... code here ... })`
如果您不知道要引用的元素是否已加载。这样您就可以确保一切都按您的预期进行。此功能还有另一个问题，但这是最重要的。

# c# - 我可以使用类将 json 数据从我的 MVC 程序返回到我的视图吗？

> ID：12447064
> 
> 赞同：0
> 
> 时间：2012-09-16T13:02:13.570
> 
> 标签：c#, javascript, asp.net-mvc, json, asp.net-mvc-3

我有以下代码：

```
return Json(new {
    entity = vm.Entity,
    errors = e.Message,
    field = vm.Field
}); 
```

如果我键入以下内容，它仍然可以编译，但是当视图尝试读取数据时会失败。

```
return Json(new {
    wrongspellingofentity = vm.Entity,
    errors = e.Message,
    field = vm.Field
}); 
```

有什么方法可以使用某种类来返回我的数据，如果是这样，我将如何处理在客户端上读取它。有没有我可以用来接受数据的javascript类之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:06:46.707

使用 Anonymouse 类型与使用类相同，因为编译器将匿名类型创建为类。

只需指定一个要转换为 JSON 的类就可以像现在一样工作，结果完全一样。

考虑：

```
return Json(new MyType{
     entity = vm.Entity,
     errors = e.Message
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:36:49.263

如果您担心更改服务器端的属性不会被客户端接收，那么使用 C# 类不会真正有帮助。JavaScript 本身不支持类，只要您传递有效的 JSON，就没有理由抱怨。

您可以从 C# 程序集生成 JavaScript 伪类，并且在加载 JSON 数据时，将生成的 JavaScript 对象转换为具有使丢失或不正确属性无效的机制的这些类之一。这在技术上是可行的，但不知道你的意图，我不知道我是否会建议在生成和解释 JSON 数据时过度自律。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:01:29.420

您可以将自定义视图模型（它只是一个 POCO 类）发送给您的客户。

假设您有这样的课程

```
public class CustomerInfo
{
  public string Name { set;get;}
  public int Age { set;get;}
} 
```

您可以像这样从您的 Action 方法返回它

```
public Actionresult GetCustomerInf()
{
 var cm=new CustomerInfo();
 cm.Name="Some Name";
 cm.Age=23;
 return Json(cm,JsonRequestBehaviour.AllowGet);
} 
```

这将返回一个`JSON`这样的

```
{  "Name":"Some Name", "Age":"23" } 
```

要从客户端 javascript 访问它，您可以使用[`getJSON`](http://api.jquery.com/jQuery.getJSON/)方法。

```
$.getJSON("@Url.Action("GetCustomerInfo","YourController")",function(data){
  //now you can parse through the JSON result we received back
  alert(data.Name);
  alert(data.Age);
}); 
```

如果您从操作方法返回复杂类型，则可以获取 JSON 结构并更改解析结果的代码。

[jsonlint.com](http://jsonlint.com/)是一个有用的站点，可帮助您在使用`JSON`.

# excel - 使用引用文件的变量打开 Excel 文件

> ID：12447066
> 
> 赞同：0
> 
> 时间：2012-09-16T13:02:24.870
> 
> 标签：excel, excel-2007, vba

在 Excel VBA 中我写： Set mWB = Application.Workbooks("File.xlsx")

然后： mWB.Close() 我注意到这是一种可能性，但在自动完成列表中我只看到关闭，没有打开。

如何使用包含对该文件的引用的 Excel 类型的变量（Dim mWB As Workbook）在 VBA 中打开一个 excel 文件？

我不想使用：Application.Workbooks.Open ("File.xlsx")，我知道这是可能的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:52:56.250

简单的答案是，这不是该类的工作方式。如果你愿意，你可以创建一个类来做到这一点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:02:42.307

尝试

```
set mwb = Application.Workbooks.Open ("File.xlsx") 
```

# java - 如何将比较器添加到内部类？

> ID：12447068
> 
> 赞同：1
> 
> 时间：2012-09-16T13:02:30.347
> 
> 标签：java, inner-classes, comparator

```
 public class Prerequisites {

        private class Course implements Comparator<Course> {
            public String name;
            public LinkedList<Course> requiredFor;
            public LinkedList<Course> prerequisites;

            Course(String name) {
                requiredFor = new LinkedList<Course>();
                prerequisites = new LinkedList<Course>();
                this.name = name;
            }

            @Override
            public int compare(Course c0, Course c1) {
                Pattern p = Pattern.compile("[A-Z]*");
                Matcher matcher0 = p.matcher(c0.name);
                Matcher matcher1 = p.matcher(c1.name);
                matcher0.find();
                matcher1.find();
                int courseNumber0 = Integer.parseInt(c0.name.substring(matcher0.end(),c0.name.length()));
                int courseNumber1 = Integer.parseInt(c1.name.substring(matcher1.end(),c1.name.length()));
                if(courseNumber0 > courseNumber1) {
                    return 1;
                }
                else if(courseNumber0 < courseNumber1) {
                    return -1;
                }
                else {
                    return matcher0.group().compareTo(matcher1.group());
                }
            }

            @Override
            public String toString(){
                return this.name;
            }
        }
    public void compare(String args[]) {
        Course c0 = new Course("CSE110");
        Course c1 = new Course("DSE110");
        LinkedList<Course> courses = new LinkedList<Course>();
        courses.add(c0);
        courses.add(c1);
        **Collections.sort(courses);** //gives compiler error

    }
 } 
```

为什么为这个内部类添加 Collections.sort() 不起作用？我无法从编译器错误中弄清楚这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T13:04:11.277

您可能打算[实施`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)，而不是`Comparator`。

这就是[该`Collections#sort`方法所期望](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)的：

```
public static <T extends Comparable<? super T>> void sort(List<T> list) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T13:04:39.390

你应该实施[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)，而不是[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T14:18:31.320

`Collections.sort(courses);`

**-**如果是上面的，你想要实现的就是你想要实现的`java.lang.Comparable`接口，而不是 java.util.Comparator 接口。

**-**此外`Comparable Interface`，当您需要仅基于一个属性对项目进行排序时使用。

但是如果你想**根据多个属性对项目进行排序**，那么请实现`java.util.Comparator Interface`。

`Collections.sort(List l, Comparator<T> t);`

# iphone - NSMutableDictionary 的 objectForKey: 方法会返回副本还是对象本身？

> ID：12447070
> 
> 赞同：4
> 
> 时间：2012-09-16T13:02:44.617
> 
> 标签：iphone, ios, cocoa-touch, nsdictionary

`objectForKey:`类的方法是否`NSMutableDictionary`返回对象的副本？

如果我在 a`NSMutableArray`中存储了 a`NSMutableDictionary`并且我对`objectForKey:`使用字典的方法访问的数组进行了一些修改（如添加对象），这些修改是否对存储在字典中的数组有效？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T13:08:07.503

不，它不会返回副本。

```
NSMutableArray *array = [NSMutableArray new];
NSMutableDictionary *dict = [NSMutableDictionary new];

NSLog(@"local instance of array: %p", array);

[dict setObject: array forKey: @"key"];

NSLog(@"returned from dictionary: %p", [dict objectForKey: @"key"]); 
```

输出：

```
2012-09-16 14:06:36.879 Untitled 3[65591:707] local instance of array: 0x7f98f940a2f0
2012-09-16 14:06:36.884 Untitled 3[65591:707] returned from dictionary: 0x7f98f940a2f0 
```

您将返回相同的指针，这意味着该对象尚未被复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T13:12:16.123

如果你这样做

```
[collection setObject:obj forKey:key]; 
```

您将该对象实例放入集合（字典、数组或集合）中。

如果要在字典中添加对象的副本，则必须这样做

```
[collection setObject:[obj copy] forKey:key]; 
```

无论如何， objectForKey: 方法总是返回您输入的内容，而不是它的副本。

# ruby-on-rails - 范围声明的rails语法

> ID：12447077
> 
> 赞同：0
> 
> 时间：2012-09-16T13:03:39.100
> 
> 标签：ruby-on-rails

我正在为 Rails 语法苦苦挣扎。我正在尝试为用户与地址建立一对多的关系，但用户将始终拥有一个主地址。我已经设法让模型工作，但我似乎无法让表单工作。下面的表格用于“新注册”，但嵌套地址的字段不显示。

我一直在破解这个，似乎无法得到它。有人可以解释为什么在尝试注册新用户时嵌套表单字段不会显示吗？

这是表格

```
 <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => "form-horizontal"}) do |f| %>
    <small>Mandatory fields marked *</small><br><br>

    <%= f.fields_for :primary_address do |address_form| %>
    <div class="control-group">
        <%= address_form.label :first_name, :class => "control-label" %>
        <div class="controls">
          <%= address_form.text_field :first_name, :class => "input-xlarge" %>
        </div>
      </div>

    <div class="control-group">
        <%= address_form.label :last_name, :class => "control-label" %>
        <div class="controls">
          <%= address_form.text_field :last_name, :class => "input-xlarge" %>
        </div>
      </div>
    <% end %> 
```

这是用户模型：

```
class Member::User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
  :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :addresses_attributes

  validates_presence_of :email

  # each user may have zero or many addresses
  # their primary email is also set as their login id.
  has_many :addresses

  has_one :primary_address, :class_name => "Address",  :conditions => "is_primary = true"

  accepts_nested_attributes_for :primary_address

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:55:21.853

尝试像这样初始化一个新的 primary_address：

```
<%= f.fields_for resource.build_primary_address do |address_form| %> 
```

# javascript - iPhone UIWebView getElementsByClassName

> ID：12447079
> 
> 赞同：1
> 
> 时间：2012-09-16T13:03:45.597
> 
> 标签：javascript, iphone, getelementsbyclassname

我仍然使用 getElementsByID，这一切都是上帝。但是现在我想用 ByClassName 来做，但它不起作用。

我想要这个页面的温度：[http](http://www.weatherman.com/us/ny/new-york.html) ://www.weatherman.com/us/ny/new-york.html 类名是：temp tempF

但此代码不起作用： `tempString = [deg stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getElementByClassName('temp tempF').innerText;"]];` deg 是我的 WebView 显示页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T13:18:14.233

javascript 函数的名称`getElementsByClassName`带有一个**s**（因为在 HTML 中，与`id`给定文档中唯一的 s 不同，一个类名可以归属于同一页面的多个元素）。

如果您查看页面的源代码，您实际上可以看到有多个元素标记为 classes`temp`和`tempF`. 您需要根据要提取的内容选择正确的（第一个？第二个？）。

例如：

```
tempString = [deg stringByEvaluatingJavaScriptFromString:@"document.getElementsByClassName('temp tempF')[0].innerText;"]; 
```

*（`stringWithFormat`如果没有格式参数就不用了，那太矫枉过正了，直接用字符串字面量就行了）*

* * *

*PS：为了清楚词汇，请注意元素是用`<div class="temp tempF">`HTML 编写的，这意味着这是一个`div`应用两个 CSS 不同类的元素，即`temp`和`tempF`。所以这个元素不是“具有类名的元素`temp tempF`”，而是“具有两个类名`temp`并`tempF`应用于它的元素”。*

**提示**：要调试您的 javascript，请在​​ Mac 上的 Chrome 或 Safari 等浏览器中打开页面，显示页面检查器并转到控制台选项卡，以便您可以在此处键入 javascript 代码并使用不同的表达式进行一些测试。在您的情况下，您会看到您的函数输入错误，名称中缺少“s”，并且一旦更正，您会看到`getElementsByClassName`返回多个元素的结果而不仅仅是一个。

# javascript - Facebox 插件 onClick 做点什么

> ID：12447083
> 
> 赞同：0
> 
> 时间：2012-09-16T13:04:31.083
> 
> 标签：javascript, jquery, asp.net, database

我正在为我拥有的链接使用[facebox 插件](http://defunkt.io/facebox/) ，但我也想做一些 onClick。

![在此处输入图像描述](../Images/2b6a9787ee73277df990896937cf3d51.png)

我试着做 onclick 事件：（ **我用文字来做，也许这就是问题所在）**

```
litWorkplaceButton.Text = "<a class='google-button' href=\"#dialog-form\" id='btnSaveForLater' rel='facebox' onclick=\"addSaveList\" runat='server'>Save for later</a>"; 
```

但出现以下错误：

```
'addSaveList' is undefined 
```

我将我的方法定义为`void protected addSaveList(){}`

我只是想将项目的 ID 保存在一个表上，所以我需要在页面后面编码！

我尝试使用文字 for `<asp:LinkButton>`(on code behind) 和 normal 并且错误结果向我展示了这一点：

```
<asp:LinkButton ID="searchLinkk" runat="server" onclick="searchLink_Click">Search</asp:LinkButton>

<a id="CPHcontent_searchLinkk" href="javascript:__doPostBack(&#39;ctl00$CPHcontent$searchLinkk&#39;,&#39;&#39;)">Search</a> 
```

通常被转换为带有 h​​ref="javascript:__doPostBack" 的标签

但是我必须使用文字，因为我仅在发生事件时才显示此按钮（用户已登录）。

还有其他方法吗，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:22:31.157

这里的问题是`a`您通过`Literal`'`Text`属性插入到页面中的标记未被识别为服务器控件。该`OnClick`属性被识别为 javascript 事件。

如果用户未登录，您仍然可以使用您的`LinkButton`并且只需在其上设置属性。在您的代码后面的方法中添加类似这样的内容：`Visible``Page_Load`

`searchLinkk.Visible = User.IsAuthenticated;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:19:12.437

您的问题是您误解了 Literal 控件的目的。它仅用于将 text/html 注入页面，不能用于动态添加服务器控件。为此，您应该使用占位符控件。

您收到`'addSaveList' is undefined`错误是因为当浏览器看到“onclick”属性（由于很多原因不应该使用该属性）时，它会尝试将其绑定到名为 的全局 Javascript 方法`addSaveList`，该方法不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:57:42.540

是的，不要使用内联 JS，它不好的语义，它总会回来困扰你。相反，将脚本放在单独的脚本文件中，在标题中链接到它，并让它包含它。

```
$(document).ready(function() {

   // Put your method here

}); 
```

祝你好运，
-布赖恩

# stack - android返回祖父母活动

> ID：12447084
> 
> 赞同：0
> 
> 时间：2012-09-16T13:04:35.520
> 
> 标签：stack, android-activity

我名为“A”的主要活动通过使用创建活动“B”

```
startActivity(intent); 
```

然后“B”以相同的方式创建“C”。我可以使用从“B”返回到“A”或从“C”返回到“B”

```
finish(); 
```

方法。

我如何从“C”直接转到“A”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:11:34.283

将 Intent 从 C 传递给活动 A： Intent cIntent=new Intent(getApplicationContext(),A.class); 开始活动（cIntent）；

# c# - Context.Items 与局部变量？

> ID：12447088
> 
> 赞同：1
> 
> 时间：2012-09-16T13:05:20.997
> 
> 标签：c#, asp.net, .net, httprequest

我将我的 User 类存储在 HttpRequest 的 Context.Items 属性中，以便在整个页面中使用。

如果我使用中继器，我需要多次引用它，可能是 10 次。

从 context.items 中检索是否昂贵？例如，我应该获取它并将其存储为局部变量，还是直接多次访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:24:52.650

如果可以使用局部变量，请使用局部变量。它不仅减少了开销，还使您的代码更短，更易于阅读和维护（没有“魔术字符串”）。

[Context.Items专为](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx)*不能*使用局部变量的情况而设计：

> 获取可用于在 HTTP 请求期间在 IHttpModule 接口和 IHttpHandler 接口之间组织和共享数据的键/值集合。

*因此，您将使用 Context.Items 在处理相同请求*但无权访问相同对象的两个对象之间传输信息`Page`。具体的例子是：

*   使用 .在两个页面之间传递数据`Server.Transfer`。
*   `Application_BeginRequest`在和页面之间传递数据。
*   `IHttpModule`在自定义（例如，自定义身份验证处理程序）和页面之间传递数据。

# c# - 如何在 Metro 风格的应用程序中选择打印机

> ID：12447091
> 
> 赞同：0
> 
> 时间：2012-09-16T13:05:47.407
> 
> 标签：c#, printing, microsoft-metro, windows-runtime

我正在尝试将现有的桌面应用程序转换为**Metro 风格的应用程序**（Win8 和 VS12）。但我很难处理打印。

我的软件有两个用户 - “管理员”和“用户”。我希望“管理员”能够选择打印机和打印机设置，而“用户”需要按下“打印”按钮，就是这样。

麻烦是：

1.  我找不到如何获取所有连接的打印机。（`DeviceInformation.FindAllAsync()`要求`DeviceClass`只有这些选项 - `All, AudioCapture, AudioRender, PortableStorageDevice, VideoCapture`）。[在我的原始应用程序（WPF）中，我正在使用`PrinterSettings.InstalledPrinters`]

2.  我找不到打印到选定打印机的方法（即使我已经知道名称）。因为（据我了解），打印的唯一方法是打开（使用代码或注册）“魅力”栏，让用户选择打印机。如果我不希望用户使用指定的打印机怎么办？

3.  有没有办法引用一个“普通”的 C# dll 来为 Metro 风格的应用程序做“脏东西”？当我尝试时，我得到“无法添加对项目'Try1'的引用”。有没有办法绕过它？

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:31:27.537

Windows 应用商店应用程序中的打印现在[由任务处理](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.printing.printtask.aspx)。您不必完成查找打印机和让用户选择一台打印机的所有工作，这些工作现在由 Windows 处理。

# javascript - 在“。”之后去掉。从输入值

> ID：12447093
> 
> 赞同：0
> 
> 时间：2012-09-16T13:05:50.883
> 
> 标签：javascript, strip

我有这个脚本正在更改输入字段的值。

我想要的输出是：AZ。（A. 和 B. 以此类推）

我怎样才能实现“。”之后的一切。正在被剥离。

```
<script language="JavaScript">

    function hoofdlettermetpunt(obj)
    {
        var firstChar = document.all(obj).value.charAt(0);
        firstChar = firstChar.toUpperCase() + ".";
        document.all(obj).value = document.all(obj).value.replace(
                                  document.all(obj).value.charAt(0), firstChar);
    }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:12:52.487

我不知道 Javascript，但你真的想返回直到字符串开头的所有内容的子字符串，但不包括子字符串索引处的字符。

```
return s.subString(indexOf('.')) // You may need to add a -1 to offset the location of the substring. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:15:19.830

要从字符串中删除点后的任何内容，`.`您可以使用以下内容：

```
var str = 'My test. string';
var newstr = str.split('.',2)[0];

/// newstr will contain 'My test' 
```

但是，我不确定您要对代码执行什么操作以根据您的示例实际回答您的问题。基本上`.split`将始终返回一个数组，因此您可以`[0]`在之后直接用作数组访问 - 这将为您提供数组中第一个找到的元素*（由于拆分，它将是您想要的子字符串）*。即使字符串不包含`.`.

有关信息，`.split()`请参见下文：

[http://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:22:22.123

> 我怎样才能实现“。”之后的一切。被剥夺？

尝试：

```
String str = "Hello.Whose this !!!";

String[] tempArr = str.split("\\.");

String finalVal = tempArr[0];       // Hello is obtained 
```

# java - 有没有相当于Play的桌面！框架？

> ID：12447094
> 
> 赞同：1
> 
> 时间：2012-09-16T13:05:52.667
> 
> 标签：java, playframework-1.x

通过 Play! 对 Java 和 JPA 产生了兴趣！Framework 1.x，我有兴趣为桌面应用程序做类似的事情。

是否有适用于非 Web 桌面 GUI 应用程序的 Java 框架，它具有 Play！网络应用程序提供？任何抽象所有复杂性并让我只专注于代码的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T13:36:38.343

你可以试试[Griffon](http://griffon-framework.org/)，它基于 Grails (groovy rulezzz) 并抽象了很多 Java 桌面开发的样板代码，还有一个 netbeans 插件，你可以使用 matisse 设计器的 UI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T07:43:57.923

Griffon 非常接近您可能正在寻找的东西。如果您更喜欢 Scala 而不是其他 JVM 语言，那么您会发现 Griffon 支持它[https://bintray.com/griffon/griffon-archetypes](https://bintray.com/griffon/griffon-archetypes)毫无障碍，您甚至可以使用它构建一个完整的 Scala 应用程序。

在 UI 方面：Swing、JavaFX 还是 SWT？格里芬为您服务。坚持？没有汗水（包括 JPA [http://griffon-plugins.github.io/griffon-jpa-plugin/](http://griffon-plugins.github.io/griffon-jpa-plugin/)和 Ebean [http://griffon-plugins.github.io/griffon-ebean-plugin/](http://griffon-plugins.github.io/griffon-ebean-plugin/)）。

每个 Griffon 发行版都包含一份 Griffon 指南，您是学习 Griffon 的第一站[http://griffon-framework.org/guide/latest/](http://griffon-framework.org/guide/latest/)

# algorithm - 在加权二分图上找到最佳匹配的快速算法

> ID：12447096
> 
> 赞同：5
> 
> 时间：2012-09-16T13:06:03.570
> 
> 标签：algorithm, optimization, graph-algorithm

我需要有效地解决分配问题（给定一个完整的加权二分图，选择一个具有最大总权重的完美匹配），并且我一直在使用来自这里[http://community.topcoder.com的 O(n^3) 版本/tc?module=Static&d1=教程&d2=hungarianAlgorithm](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=hungarianAlgorithm). 然而，我读到的一篇论文在“A shortest augmenting path algorithm for dense and sparse linear assignment questions”中提到了一种“更有效的方法”，遗憾的是它落后于付费墙。有没有我应该知道的更快的算法（渐近，或者只是使用更小的常量/更统一的内存访问或其他）？我正在使用浮点权重而不是整数权重，这对于匈牙利方法似乎并不重要，但对于更快的整数实现来说可能是一个问题。任何相关链接将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-05-18T00:51:09.053

有几篇论文具有用于加权二分图的快速算法。

最近的一篇论文 Ramshaw 和 Tarjan，2012 “On Minimum-Cost Assignments in Unbalanced Bipartite Graphs”提出了一种称为 FlowAssign 和 Refine 的算法，它解决了最小成本、不平衡、二分分配问题，并使用权重缩放来解决完美和不完美的分配问题，但不是增量的，运行时复杂度为 O(m * sqrt(n) * log(n * C)) 其中 m 是图中的边数（也称为弧），n 是图中的最大节点数两个要匹配的图，C是一个常数，大于等于最大边权重，大于等于1。

权重缩放允许算法相对于 s 实现更好的性能，其中 s 是匹配节点的数量。

其他快速解决方案可以在 1990 年代初期找到。Lee 和 Orlin 于 1993 年发表的一篇名为“QuickMatch: A Very Fast Algorithm for the Assignment Problem”的论文提出了一种算法，他们估计该算法的运行时间在图的大小上以弧线表示有效。 [http://jorlin.scripts.mit.edu/docs/publications/WP4-quickmatch.pdf](http://jorlin.scripts.mit.edu/docs/publications/WP4-quickmatch.pdf)

QuickMatch 算法将分配问题解决为一系列 n 最短路径问题。他们使用源节点和目标节点之间的交替最短路径以及启发式方法来减少计算次数。作者通过经验结果和与理论上有界算法的比较来估计平均运行时复杂度。他们发现他们的算法与图边（又名弧）的数量成线性关系，但该算法的性能不如 Bertsekas 的“正反向拍卖”算法，后者也使用交替最短路径。后面的参考文献没有印在论文中，但可能在“Reverseuctionalgorithms for assignment questions”，Castanon，1992，MACS Seris in Discrete Mathematics and Computer Science

还有一种算法，伯克利分割基准代码在评估分割结果期间与人工绘制的边界相比用于二分匹配。 [http://www.eecs.berkeley.edu/Research/Projects/CS/vision/bsds/](http://www.eecs.berkeley.edu/Research/Projects/CS/vision/bsds/) 他们使用 Goldberg CSA 包 [http://www.eecs.berkeley.edu/Research/Projects/CS/vision/bsds/ code/CSA++/](http://www.eecs.berkeley.edu/Research/Projects/CS/vision/bsds/code/CSA++/) 据报道其运行时与图大小成线性关系，并解决了稀疏的最小成本分配问题。参考文献是“分配问题的有效成本缩放算法”，Goldberg 和 Kennedy 以及 Cherkassky 和 ​​Goldberg 于 1993 年出版的“关于实现最大流量问题的 PushRelabel 方法”，Proc。第四次整数规划和组合优化会议，第 157-171 页，1995 年 5 月。

# jquery - 使用 jquery javascript 验证 youtube URL

> ID：12447099
> 
> 赞同：2
> 
> 时间：2012-09-16T13:06:36.377
> 
> 标签：jquery, regex, validation, youtube

我希望用户提交 youtube 网址。如果 youtube 链接正确，我想“即时”检查，如果检查成功，则将输入旁边的文本更改为 OK。

我设法制作了一个验证功能，但它不起作用。我究竟做错了什么？

**更新**

它仍然不起作用，当 URL 不正确时它应该说 not ok，当 URL 正确时它应该在输入时说：

```
 $('form #youtube').bind("change keyup input", validYT());
        function validYT()
        {

            var url = $('form #youtube').val();
            var p = /^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/;
            if (url.match(p)) {
                $('#ytInfo').removeClass().addClass('fieldok ').text('OK');
                return true
            }
            else
            {
                $('#ytInfo').removeClass().addClass('fieldok ').text('NOT OK');
                return false
            }
        } 
```

**HTML：**

```
youtubelink<BR>
<input type="text" name="youtube" id ="youtube" value="" /><div id="ytlInfo">dd</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T13:13:47.643

```
function validYT(url) {
  var p = /^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/;
   return (url.match(p)) ? RegExp.$1 : false;
} 
```

谢谢@eyecatchUp [https://stackoverflow.com/a/10315969/1250044](https://stackoverflow.com/a/10315969/1250044)

**更新**

```
function ytVidId(url) {
    var p = /^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/;
    return (url.match(p)) ? RegExp.$1 : false;
}

$('#youtube').bind("change keyup input", function() {
    var url = $(this).val();
    if (ytVidId(url) !== false) {
        $('#ytlInfo').addClass('fieldok');
    } else {
        $('#ytlInfo').removeClass('fieldok');
    }
}); 
```

* * *

[演示](http://fiddle.jshell.net/3Jzw8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:50:33.543

我使用上述方法创建了一个方法

```
$(document).ready(function(){

    $.validator.addMethod("youtube", function(value, element) {
     var p = /^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/;
     return (value.match(p)) ? RegExp.$1 : false;
    }, "Enter correct URL");

    var validator = $("#frmAddvideo").validate({
        errorElement:'div',
        rules: {
            useravideo: {
                required: true,
                youtube: "#useravideo"
            }

        },
        messages: {
            useravideo: {
                required: "Enter user A video URL",
            }
        }
    });
}); 
```

# f# - 使用记录类型的 F# WebApi 未提供所需的 XML 输出

> ID：12447102
> 
> 赞同：4
> 
> 时间：2012-09-16T13:07:11.833
> 
> 标签：f#, asp.net-web-api, f#-3.0

**工作代码在这个问题的底部！**

**在 F# 中使用以下 WebApi 控制器：**

```
namespace FsWeb.Controllers

open System.Web
open System.Web.Mvc
open System.Net.Http
open System.Web.Http
open Microsoft.FSharp.Linq;
open Microsoft.FSharp.Data.TypeProviders;

type dbSchema = SqlDataConnection<"conn string">

[<CLIMutable>] 
type ViewModelRec = { CustomerId : string }

type ValuesController() =
    inherit ApiController()
    let db = dbSchema.GetDataContext()
    do
        db.DataContext.Log <- System.Console.Out

    // GET /api/values
    member x.Get(take:int, skip:int) = 
        let t = take
        let s = skip

        query {
            for row in db.Reservations do
            skip s 
            take t
            select { CustomerId = row.CustomerId.ToString() }
        } 
```

**XML 输出为：**

```
<ArrayOfViewModelRec xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/FsWeb.Controllers">
<ViewModelRec>
<CustomerId_x0040_>A98971F0-5F93-4F0D-B5AC-95E161458381</CustomerId_x0040_>
</ViewModelRec>
<ViewModelRec>
<CustomerId_x0040_>60DF7CF6-91FB-4BBE-AD6B-FE0CAA32F60E</CustomerId_x0040_>
</ViewModelRec>
<ViewModelRec>
<CustomerId_x0040_>84506E40-139C-4DD1-B396-3CE13DC20996</CustomerId_x0040_>
</ViewModelRec>
<ViewModelRec>
<CustomerId_x0040_>D9FABC12-9B19-46C2-9776-E31171A302D5</CustomerId_x0040_>
</ViewModelRec>
<ViewModelRec>
<CustomerId_x0040_>B1B6C617-AA0E-46A9-A0B6-312A229BE178</CustomerId_x0040_>
</ViewModelRec>
<ViewModelRec>
<CustomerId_x0040_>BAB194AE-CD2C-400F-B81E-2A293C50C404</CustomerId_x0040_>
</ViewModelRec>
<ViewModelRec>
<CustomerId_x0040_>AE001AB4-8410-43BF-9C93-AE5A2EACFDF5</CustomerId_x0040_>
</ViewModelRec>
<ViewModelRec>
<CustomerId_x0040_>2DDBDB91-9307-4BF7-865F-C6237D09D542</CustomerId_x0040_>
</ViewModelRec>
<ViewModelRec>
<CustomerId_x0040_>A3E93E5C-2B7E-4B8D-8AAD-AD245E32093F</CustomerId_x0040_>
</ViewModelRec>
<ViewModelRec>
<CustomerId_x0040_>B64B814F-9B4C-46BD-A804-648309FA7DD0</CustomerId_x0040_>
</ViewModelRec>
</ArrayOfViewModelRec> 
```

当我改用一个类时，命名看起来是正确的（没有*x0040*标记）。

有人建议吗？

**更新：解决方案：**

```
namespace FsWeb.Controllers

open System.Web
open System.Web.Mvc
open System.Net.Http
open System.Web.Http
open System.Runtime.Serialization;
open Microsoft.FSharp.Linq;
open Microsoft.FSharp.Data.TypeProviders;

type dbSchema = SqlDataConnection<"here comes the connection string">

[<DataContract>]
type ViewModelRec = {
    [<field: DataMember(Name="CustomerId")>]
    CustomerId : string }

type ValuesController() =
    inherit ApiController()
    let db = dbSchema.GetDataContext()
    do
        db.DataContext.Log <- System.Console.Out

    member x.Get(take:int, skip:int) = 
        let t = take
        let s = skip

        query {
            for row in db.Reservations do
            skip s 
            take t
            select { CustomerId = row.CustomerId.ToString() }
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T13:56:13.050

我不是 F# 专家，但据我所知，记录类型属性获取器由同名的内部字段支持，最后只有“@”。在您的情况下为“CustomerId@”。

然后，序列化程序选择序列化这些支持字段，而不是公共 getter，就像您拥有一个带有 [Serializable] 属性的 C# 类时一样。

它应该在您使用 DataContract/DataMember 时工作 - 请参阅[记录类型的 F# 序列化](https://stackoverflow.com/questions/4034932/f-serialization-of-record-types)

# facebook - 刷新/自动刷新 Facebook 评论框

> ID：12447103
> 
> 赞同：2
> 
> 时间：2012-09-16T13:07:33.697
> 
> 标签：facebook, comments, xfbml

我想每次点击和/或每 30 秒刷新一次 Facebook 评论框。我尝试了一下 FB.XFBML.parse 函数，但它不起作用。有人提示如何做到这一点？

谢谢

# variables - XNA 4.0 共享基本效果变量？

> ID：12447104
> 
> 赞同：1
> 
> 时间：2012-09-16T13:07:46.363
> 
> 标签：variables, xna, shared

我正在制作受卡坦定居者启发的游戏。( www.facebook.com/Expanze ) 我正在优化我的代码，它呈现数百个相同模型的实例。

```
foreach (ModelMesh mesh in model.Meshes)
{
    foreach (BasicEffect effect in mesh.Effects)
    {
        effect.Alpha = 1.0f;
        effect.LightingEnabled = true;
        effect.DirectionalLight0.Direction = GameState.LightDirection;
        effect.DirectionalLight0.DiffuseColor = GameState.LightDiffusionColor;
        effect.DirectionalLight0.SpecularColor = GameState.LightSpecularColor;
        effect.DirectionalLight0.Enabled = true;
        effect.View = GameState.view;
        effect.Projection = GameState.projection;
        for (int loop1 = 0; loop1 < validItems; loop1++)
        {
             if (instance[loop1].Visible)
             {
                  instance[loop1].UpdateEffect(effect, meshNumber);
                  effect.World = transforms[mesh.ParentBone.Index] * instance[loop1].World;

                  mesh.Draw();

                  if(loop1 > 4)
                       break;
             }
        }
    }
    meshNumber++;
} 
```

在 ： `instance[loop1].UpdateEffect(effect, meshNumber);`

我改变环境颜色：`effect.AmbientLightColor = playerAmbientLightColor;`

我的问题是更改颜色会影响应该已经绘制的早期实例的颜色。

两张图片，一张带有 if(loop1 > 4) break，第二张没有这两行：http: [//i.imgur.com/DxSKA.jpg](http://i.imgur.com/DxSKA.jpg)

[http://i.imgur.com/EjV9f.png](http://i.imgur.com/EjV9f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:49:04.643

灵感来自或几乎相同？哈哈哈哈。

这里发生的可能是您的`Draw()`呼叫被推迟，并且您`Effect`为每个模型使用相同的实例。那么，如果您正在设置值、调用`Draw`（延迟；读取：直到稍后才执行）、切换模型，然后为 ALREADY USED`Effect`实例设置值，然后再次调用 Draw，会发生什么情况。

当延迟调用被执行时，它们使用传递给（或类似的东西`Draw`）的最新（读取：最后）设置/参数。`Effect`

解决方案是为每个模型创建（克隆等）`Effect`每个模型的新实例。

可能还有其他问题导致此问题；你使用什么绘图模式？您的 XNA 设置是什么？这只是人们遇到的标准问题。

# objective-c - 为什么我在 backButtonBarItem 上单击两次以返回一个视图？故事板

> ID：12447107
> 
> 赞同：0
> 
> 时间：2012-09-16T13:08:06.193
> 
> 标签：objective-c, storyboard, navigationcontroller

为什么我必须在 NavigationController 中的 backButtonBarItem 上单击两次才能返回一个视图？

我有一个带有导航控制器、tableViewController 和 singleViewController 的故事板。

当我单击 tableViewController 中的一行时，会加载 viewController。

```
[self.navigationController pushViewController:[[self storyboard] instantiateViewControllerWithIdentifier:@"singleView"] animated:YES]; 
```

但是当我单击 singleView 中的 backButton 时，它会再次切换到 singleView。当我在 singleView 中再次单击 backButton 时，它会切换到 tableView ！！！

为什么？我怎样才能改变它，我只点击一次？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:13:08.967

如果您正在使用情节提要，那么更好的方法是将右键单击从 拖动`UITableViewCell`到`UIViewController`并创建一个`Segue`. 完成`Segue`后，您可以使用下面的委托方法来准备`UIViewController`是否需要实例化任何数据。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.destinationViewController respondsToSelector:@selector(sendDataToViewController:)])
    {
        [segue.destinationViewController sendDataToViewController:data];
    }
} 
```

# iphone - 消除过渡期间实现 UIScrollView Album 的故障

> ID：12447109
> 
> 赞同：0
> 
> 时间：2012-09-16T13:08:23.563
> 
> 标签：iphone, ios, uiscrollview, uiscrollviewdelegate

已经实现了一个 UIScrollView 相册，其中 +2 和 -2 定位的子视图在`scrollViewDidEndDragging`被调用时生成，但添加子视图是一项昂贵的操作，因此滑动不是那么顺利。拖动结束时屏幕有点卡住。我什至尝试过使用`NSTimer`or延迟调用，`performSelector`但如果用户快速滑过所有图像，那么所有延迟调用都会立即调用，有时会导致应用程序崩溃。

```
-(void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    flyNumber = (NSInteger)(imageScrollView.contentOffset.x/imageScrollView.frame.size.width);
    [self createM2P2SubView];

    //[self performSelector:@selector(createM2P2SubView) withObject:nil afterDelay:0.1];
    //[NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(createM2P2SubView) userInfo:nil repeats:NO];

    NSLog(@"End dragging   ...... %d",flyNumber);
} 
```

请提供解决方案以消除该故障。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:18:18.277

创建视图是一项昂贵的操作，但这本质上就是表视图所做的。它会在新单元格出现在屏幕上时动态创建视图，并且它会*重用*视图，因为它们的创建成本很高。

尝试使用 Time Profiler 和 Animation Profiler 分析您的代码以找到瓶颈。

尝试重用您在 +2/-2 偏移处插入的视图以加快速度。

还有一个巧妙的技巧是使用 UITableView 而不是自我管理的 UIScrollView。如果您需要它是水平的，那么只需对表格视图应用旋转变换。

由于您提到“专辑”一词是您的标题，我假设每个视图都需要加载和显示图像？我不会使图像加载同步，而是使其异步并使用微调器或其他东西为相册图像*加载状态提供指示器。*

# php - PHP日期格式，去除时间等

> ID：12447110
> 
> 赞同：25
> 
> 时间：2012-09-16T13:08:27.043
> 
> 标签：php, date, datetime, date-format

> **可能重复：**
> [在 PHP 中将一种日期格式转换为另一种日期格式](https://stackoverflow.com/questions/2167916/convert-one-date-format-into-another-in-php)

从...开始：

```
$date = '2012-09-09 03:09:00' 
```

我想做两件事。

1.  从字符串中删除时间，所以它会变成`"2012-09-09"`.
2.  使用服务器当前日期/时间/时区计算自该日期以来已经过去了多少年、多少天和多少小时。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-16T13:14:11.653

使用[日期](http://php.net/manual/en/book.datetime.php)时间：

```
$date = '2012-09-09 03:09:00';

$createDate = new DateTime($date);

$strip = $createDate->format('Y-m-d');
var_dump($strip); // string(10) "2012-09-09"

$now = new DateTime();
$difference = $now->diff($createDate, true);
var_dump($difference);

/* object(DateInterval)#3 (8) {
  ["y"]=>
  int(0)
  ["m"]=>
  int(0)
  ["d"]=>
  int(7)
  ["h"]=>
  int(13)
  ["i"]=>
  int(4)
  ["s"]=>
  int(38)
  ["invert"]=>
  int(0)
  ["days"]=>
  int(7)
} */ 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-16T13:13:02.863

```
$date = '2012-09-09 03:09:00';
$dt = new DateTime($date);

echo $dt->format('Y-m-d');

$interval = $dt->diff(new DateTime()); 
```

您可以使用适合您的间隔。见[http://php.net/manual/en/class.dateinterval.php](http://php.net/manual/en/class.dateinterval.php)

# python - Selenium 的 Xpath 嵌套括号问题（使用 Python）

> ID：12447111
> 
> 赞同：2
> 
> 时间：2012-09-16T13:08:33.853
> 
> 标签：python, xpath, selenium

我正在尝试使用 Selenium 和 xpaths 获取一些数据。

以下 xpath 工作正常：

```
print sel.get_attribute("xpath=(//*[@id='course_list']/*[@class='series'])[4]//*[@class='series_links']//a/@href") 
```

并返回 4 个匹配的 URL。到目前为止，一切都很好。

问题是我想编写一个 xpath 来单独定位每个 URL。

使用 Firefox xpath 检查器插件，我设法确认以下代码完全符合我的需要：

```
((//*[@id='course_list']/*[@class='series'])[4]//*[@class='series_links']//a/@href)[1] 
```

但是尽管在 Firefox xpath 检查器中工作，我似乎无法让它在 Selenium 中工作。

每当我尝试执行时：

```
print sel.get_attribute("xpath=((//*[@id='course_list']/*[@class='series'])[4]//*[@class='series_links']//a/@href)[1]") 
```

我收到以下错误：

```
Exception: ERROR: Invalid xpath [2]: ((//*[@id='course_list']/*[@class='series'])[4]//*[@class='series_links']//a 
```

不知道这里发生了什么。我犯了一个简单的错误，还是 Selenium xpath 不支持像 FF xpath 检查器那样的嵌套括号？

任何想法都将不胜感激，因为我已经为此工作了几个小时，但似乎无法使其发挥作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:24:36.540

这又不是您问题的答案。但是，我从不使用这样的 xpath。如果网页作者足够聪明，可以使用类，那么他也足够聪明，能够更改网页的结构并保留这些类。

```
from selenium import webdriver
driver = webdriver.Chrome() 

series = driver.find_element_by_class_name("series")
series_links = [i.get_attribute('href') for i in series.find_elements_by_class_name("series_links")]

driver.quit() # call this when you're done using the webdriver. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:47:00.427

不是我的问题的真正答案，但我确实为那些可能遇到类似问题的人找到了解决方法。

Selenium 的 get_xpath_count 命令允许相对轻松的 xpath 验证。如果您指定了不正确的 xpath（或不存在的 xpath），该命令将简单地返回一个零 ('0')。

所以我现在在运行 get_attribute 命令之前使用一个简单的“if”语句来验证 xpath 是否存在：

```
if sel.get_xpath_count("(//*[@class='series_links'])[" + str(data) + "]//*[@class='youtube']") > 0:
    print sel.get_attribute("xpath=(//*[@id='course_list']/*[@class='series'])[" + str(data) +"]//*[@class='youtube']//a/@href") 
```

# xml - 流程图的 XML 表示

> ID：12447118
> 
> 赞同：0
> 
> 时间：2012-09-16T13:09:45.270
> 
> 标签：xml

有没有人知道如何将流程图转换为xml？我需要流程图的 xml 表示。一个非常简单的流程图示例将帮助我入门。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:47:38.743

听起来好像您正在寻找 GraphML、GXL 或类似的 XML 词汇；它们中的任何一个都可能在用 XML 表示流程图方面做得很合理。

# c# - Queue.Count - 它是如何工作的？

> ID：12447120
> 
> 赞同：0
> 
> 时间：2012-09-16T13:10:10.070
> 
> 标签：c#, queue

你能告诉我每次我打电话后`Count`，检查`Queue`所有的`Queue`计数或队列是否有一个`int`计数的属性，并且每次添加/删除它都会增加/减少？

无论如何，有没有更好的方法来知道队列是否为空？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T13:12:41.793

请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/fy0wwyz4.aspx)（“queue.count 属性”在 Google 中的第一次点击）：

> 检索此属性的值是 O(1) 操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T13:12:37.323

> a的容量是可以存储`Queue<T>`的元素的数量。是实际在 中的元素数。`Queue<T>``Count``Queue<T>`
> 
> 容量总是大于或等于`Count`。如果`Count`在添加元素时超出容量，则通过在复制旧元素并添加新元素之前自动重新分配内部数组来增加容量。
> 
> **检索此属性的值是 O(1) 操作。**

取自[`Queue<T>.Count Property`MSDN 上的源代码](http://msdn.microsoft.com/en-us/library/fy0wwyz4.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T13:12:15.147

了解 Queue 是否为空的更好方法是使用`IEnumerable`Any[方法](http://msdn.microsoft.com/en-us/library/bb337697.aspx)。

这样，您无需遍历整个集合即可在使用 Count 方法时简单地了解集合中是否至少有一个项目。

```
if(myQueue.Any())
{
 // Do something.
} 
```

在 where 是一个属性的情况下，使用vs`Count`会有轻微的性能提升，但是我认为在许多情况下程序员的意图会更好地保留下来，特别是当检查的目的是查看是否存在任何项目时。`Count``Any``Any`

# d - 无法读取contracts.d

> ID：12447121
> 
> 赞同：2
> 
> 时间：2012-09-16T13:10:33.710
> 
> 标签：d, dmd

[我最近从dmd.2.060.zip 解](https://github.com/downloads/D-Programming-Language/dmd/dmd.2.060.zip)压缩了子目录 windows 和 src 。然后我尝试`import std.contracts;`但编译器不喜欢它：

```
Error: module contracts is in file 'std\contracts.d' which cannot be read 
```

我也无法手动找到文件。什么坏了？

contract.d 是否已被另一个文件替换？

也许我必须在使用前编译一些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T13:12:00.433

您现在想使用该`std.exception`模块。

# java - XML 模式验证时超时和挂起线程

> ID：12447126
> 
> 赞同：2
> 
> 时间：2012-09-16T13:11:26.347
> 
> 标签：java, xml, xsd, timeout

通过 XSD 架构验证 XML 时出现 TimeoutException，并且与检查器关联的线程已挂起。

为什么会这样？如何避免这种情况？

堆栈跟踪：

```
TimeoutManage I   WTRN0124I: When the timeout occurred the thread with which the transaction is, or was most recently, associated was Thread[WebContainer : 3,5,main].  The stack trace of this thread when the timeout occurred was:
        java.net.SocketInputStream.socketRead0(Native Method)
        java.net.SocketInputStream.read(SocketInputStream.java:140)
        java.io.BufferedInputStream.fill(BufferedInputStream.java:229)
        java.io.BufferedInputStream.read1(BufferedInputStream.java:269)
        java.io.BufferedInputStream.read(BufferedInputStream.java:328)
        sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:700)
        sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:645)
        sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1205)
        org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
        org.apache.xerces.impl.xs.opti.SchemaParsingConfig.parse(Unknown Source)
        org.apache.xerces.impl.xs.opti.SchemaParsingConfig.parse(Unknown Source)
        org.apache.xerces.impl.xs.opti.SchemaDOMParser.parse(Unknown Source)
        org.apache.xerces.impl.xs.traversers.XSDHandler.getSchemaDocument(Unknown Source)
        org.apache.xerces.impl.xs.traversers.XSDHandler.resolveSchema(Unknown Source)
        org.apache.xerces.impl.xs.traversers.XSDHandler.constructTrees(Unknown Source)
        org.apache.xerces.impl.xs.traversers.XSDHandler.parseSchema(Unknown Source)
        org.apache.xerces.impl.xs.XMLSchemaLoader.loadSchema(Unknown Source)
        org.apache.xerces.impl.xs.XMLSchemaLoader.loadGrammar(Unknown Source)
        org.apache.xerces.impl.xs.XMLSchemaLoader.loadGrammar(Unknown Source)
        org.apache.xerces.jaxp.validation.XMLSchemaFactory.newSchema(Unknown Source)
        javax.xml.validation.SchemaFactory.newSchema(Unknown Source)
        my.utils.XmlUtils.validate(XmlUtils.java:38) 
```

用于验证的代码片段：

```
SchemaFactory schemaFactory = 
    SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
try {
    Schema schema = schemaFactory.newSchema(new StreamSource(new StringReader(xsd)));
    Validator validator = schema.newValidator();
... 
```

异常发生在以下行：

```
Schema schema = schemaFactory.newSchema(new StreamSource(new StringReader(xsd))); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T13:23:12.893

如果没有看到实际的 XSD，很难确定，但很可能您的架构不是自包含的，而是包含一个或多个引用外部 URL***的包含语句。***schemaFactory 可能会尝试获取它们以构建完整的 XSD。

指出这一点的是`getSchemaDocument()`堆栈跟踪中的调用，它试图在`parseSchema()`您传入的 xsd 上执行过程中通过 HTTP 获取模式文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:56:21.310

如果您的架构引用了 W3C 网站上的文档，例如 XML 命名空间的架构，则会出现一个特定的问题。W3C 故意延迟响应此类请求以阻止过度使用。这个想法是您应该重定向此类引用以使用文件的本地副本。

# html - Div 未正确包装链接

> ID：12447132
> 
> 赞同：0
> 
> 时间：2012-09-16T13:12:04.780
> 
> 标签：html, css

如何使链接保持在 div 元素内，而不是在其上方和下方延伸？看起来它与未考虑的填充有关，并且 div 认为链接与文本一样高。

有办法解决吗？

[小提琴](http://jsfiddle.net/na6B3/)

代码：

```
div {
    background-color: yellow;   
    margin-top: 20px;
}
a {
    padding: 10px;
    border: 1px solid black;
    background-color: blue;    
}
a:link {
    color: white;   
}

<div><a href="#">Link button</a></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T13:17:26.443

```
div {
    background-color: yellow;   
    margin-top: 20px;
}
a {
    padding: 10px;
    border: 1px solid black;
    background-color: blue; 
    display:inline-block    
}
a:link {
    color: white;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:16:42.860

将填充添加到您的 div，而不是您的链接。

```
div {
 padding: 10px;
 background-color: yellow;   
 margin-top: 20px;
}
a {
border: 1px solid black;
background-color: blue;
}
a:link {
 color: white;   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:19:51.030

因为您在锚上使用填充，所以需要设置 display:block。

请[在此处](http://jsfiddle.net/na6B3/13/)查看我的 jsfiddle 。

```
div {
  background-color: yellow;   
  margin-top: 20px;
}
a {
  padding: 10px;
  display:block; //Added this
  border: 1px solid black;
  background-color: blue;    
}
a:link {
  color: white;   
} 
```

# android - 我可以得到一个非阻塞的 Looper 吗？

> ID：12447135
> 
> 赞同：3
> 
> 时间：2012-09-16T13:12:23.907
> 
> 标签：android, multithreading, looper

我有一个带有消息循环器的线程，用于一些位置计算。为此，我呼吁：

```
LocationManager.requestLocationUpdates(mProvider, mMinTime, mMinDistance, (LocationListener)this, looper); 
```

为了获得一个有效的 Looper 对象，我准备了我的线程，如下所示：

```
 Looper.prepare();
    mLooper = Looper.myLooper();
    handler = [...]
    Looper.loop(); 
```

但是是否有可能在同一个线程中有一个额外的while循环用于数据处理？

也许我可以以某种方式派生出自己的 Looper 并手动处理消息，但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T19:20:52.920

没有必要这样的事情。

当您调用 Looper.loop() 时，线程运行它的处理程序的消息队列。因此，Handler 收到的任何消息或帖子都将在 Looper 线程上进行处理。

像这样：

```
Thread t1 = new Thread(new Runnable()
{
    @Override
    public void run() {

    Looper.prepare();

    final Handler h = new Handler();
        final boolean isRunning = true;

        Thread t2 = new Thread(new Runnable() {

            @Override
            public void run()
            {
                //Do stuff like download

                h.post(new Runnable() {

                     @Override
                     public void run() {

                         //Post stuff to Thread t1

                     }
                });

                isRunning = false;
                h.getLooper().quit();
            }
        }

    while(isRunning)
    {
            //This will ensure that the messages sent by the Handler, be called inside the Thread
    Looper.loop();
    }
    }
} 
```

这样，您可以确保线程持续运行响应 Handler 帖子和回调所需的时间。您还可以使用自己的 handleMessage 方法扩展 Handler，它们也将在 Thread t1 中被调用。

希望能帮助到你。

# android-actionbar - 更改 actionBar 上的 tabview 的颜色

> ID：12447137
> 
> 赞同：0
> 
> 时间：2012-09-16T13:12:33.033
> 
> 标签：android-actionbar

我是 Android 开发的新手。最初，actionBar 上的 tabView 如果具有焦点，则包含蓝色。我只想将其更改为另一种颜色。所以 actionBar 的其他样式组件应该保持不变。

我写了以下代码：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android"> 
    <style name="CustomActivityTheme" parent="@android:style/Theme.Holo.Light">
        <item name="android:actionBarStyle">@style/MyActionBarTabStyle</item>
    </style>

    <style name="MyActionBarTabStyle" parent="android:style/Widget.Holo.Light.ActionBar.TabView">
        <item name="android:background">@drawable/ab_transparent_tabdesign</item>
    </style>
</resources> 
```

在清单上我写了这个

```
<activity
            android:label="@string/app_name"
            android:name=".mainActivity"
            android:theme="@style/CustomActivityTheme"
>
</activity> 
```

当我运行我的应用程序时，操作栏完全消失了！我真的可以使用一些帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:11:26.470

如果您要更改选项卡的背景，请将颜色设置为可绘制的选择器并定义不同的状态（按下/未按下）-（焦点/无焦点）。

这篇文章有更多关于解决这个问题的细节： [ActionBar change color/drawable of selected tab only?](https://stackoverflow.com/questions/12954567/actionbar-change-color-drawable-of-selected-tab-only)

希望这可以帮助。

# java - 在 Hibernate 中加载多个带注释的类

> ID：12447142
> 
> 赞同：5
> 
> 时间：2012-09-16T13:13:03.457
> 
> 标签：java, hibernate, hibernate-annotations

我正在使用休眠注释，为此`hibernate.cfg.xml`我需要添加这样的带注释的类， `<mapping class="p.Customer" />`这里**p**是包名称，**客户**是带注释的 bean。

假设我有 20 个此类带注释的类，这意味着我必须为该类编写 20 条映射线。在 Spring 中有一个属性`packageToScan`可用于注册/加载指定包中的所有休眠注释类。

由于我没有使用 Spring，我们可以在 Hibernate 中拥有相同的功能吗？

我也发现了一个标签`hibernate.cfg.xml` `<mapping package="" />`，起初我认为这对我有用，但它没有用。我不明白这个属性有什么用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:58:28.620

注释解析的魔力是在创建会话工厂时完成的。Hibernate 可以在没有弹簧的情况下做到这一点。Spring 实际上只是包装了休眠功能。

请看这篇文章：[http ://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-overview](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-overview)

他们展示了如何在会话工厂中注册类，因此使用了注释。它们确实不提供扫描功能，但您可以自己实现它或更好地使用其他包。我出于类似目的使用了“reflections”包。我的意思是我使用反射包扫描了我的类路径以根据我的标准定位类。我没有将它用于休眠，但我相信这是可能的。

这是可以帮助您的参考。 [http://code.google.com/p/reflections/](http://code.google.com/p/reflections/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T03:04:38.193

1、参考： [如何获取包中的所有类名？](https://stackoverflow.com/questions/15519626/how-to-get-all-classes-names-in-a-package)

2、扩展org.hibernate.cfg.Configuration

`

```
package com.hw.configuration;

import com.hw.util.ClassFinder;
import org.hibernate.MappingException;
import org.hibernate.cfg.Configuration;

import java.util.List;

/**
 * Created by whuanghkl on 17/5/31.
 */
public class WildCardConfiguration extends Configuration {

    @Override
    public Configuration addPackage(String packageName) throws MappingException {
        List<Class<?>> classes = ClassFinder.find(packageName);
        int size=classes.size();
        for (int i=0;i<size;i++){
            super.addAnnotatedClass(classes.get(i));
        }
        return this;
    }
} 
```

`

3、`

```
new SchemaExport(new
                 WildCardConfiguration().configure()).create(true, false); 
```

`

# machine-learning - Weka 属性选择

> ID：12447143
> 
> 赞同：6
> 
> 时间：2012-09-16T13:13:04.153
> 
> 标签：machine-learning, weka

我正在尝试在 Weka 中执行属性选择。我想用 InfoGainAttributeEval 作为评估器，因为我读到它相当于互信息，而 Ranker 作为搜索方法。我应该对训练集和测试集执行属性选择吗？另外，如何为 N 参数选择正确的值？

非常感谢您的时间，

纳迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:48:45.580

在训练和测试上分别应用属性选择可能会导致选择不同的属性，从而使它们不兼容。因此，要确保两个集合具有相同的属性，您需要在整个数据集上应用属性选择。一旦您选择了最有用的属性，您就可以将数据拆分为训练集和测试集。

至于使用哪个值`-N`，我会使用您的属性总数。这将生成所有属性的排名列表，您可以自己评估所有属性的不同分数。然后，您可能会发现一个明确的阈值，将包含任何有用信息的属性与不添加任何内容的属性分开来训练分类器。然后，我将使用该`-T`选项设置此阈值。

# ruby - 如何使用 ruby 中的参数从 unc 路径运行 exe

> ID：12447145
> 
> 赞同：0
> 
> 时间：2012-09-16T13:13:08.203
> 
> 标签：ruby

所以我试图从我的 ruby​​ 脚本运行一个可执行文件，并同时将一些参数传递给它。目前我有：

```
command = Thread.new do 
  return_code = system('\\\\file-server\\share1\\data_app.exe -gTest -d20120914')
end
command.join 
```

但这不起作用。

有人知道我要去哪里错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:35:57.200

所以我设法弄清楚了。这与我的应用程序如何运行和查找它的依赖项有关。我需要在调用应用程序之前设置工作目录，您可以这样做：

```
Dir.chdir('\\\\file-server\\share1\\') 
```

谢谢你的帮助！

# asp.net - ContentPlaceHolder 不起作用

> ID：12447151
> 
> 赞同：1
> 
> 时间：2012-09-16T13:14:30.883
> 
> 标签：asp.net, umbraco

我需要你的帮助：Asp ContentPlaceHolder 不工作。“blao balo bla balll”未显示。在 HTML 代码中：

```
<!-- Insert default "slide" markup here --> 
```

这是我的代码 - HomePage.master：

```
<%@ Master Language="C#" MasterPageFile="~/umbraco/masterpages/default.master" AutoEventWireup="true" %>

<asp:Content ContentPlaceHolderID="ContentPlaceHolderDefault" runat="server">

<asp:ContentPlaceHolder Id="slide" runat="server">
    <!-- Insert default "slide" markup here -->
</asp:ContentPlaceHolder>

</asp:Content> 
```

幻灯片大师：

```
<%@ Master Language="C#" MasterPageFile="~/masterpages/HomePage.master" AutoEventWireup="true" %>

<asp:Content ContentPlaceHolderId="slide" runat="server">
     blao balo bla balll
</asp:Content> 
```

![在此处输入图像描述](../Images/3cf16d58c577f0c210e2a49eff4d4f19.png)

![在此处输入图像描述](../Images/97858379e89affac0157b2d1228451dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:43:08.177

由于`slide`模板使用`HomePage`模板作为母版页并替换`HomePage`模板中定义的 ContentPlaceHolder 的内容，因此您应该确保在`slide`要显示非默认幻灯片标记时使用模板。

使用`HomePage`模板时，会按预期显示模板中定义的默认标记`HomePage`。

# javascript - 每 x 列拆分数据表列

> ID：12447152
> 
> 赞同：2
> 
> 时间：2012-09-16T13:14:34.733
> 
> 标签：javascript, jquery, datatables

我正在使用 Javascript 版本的 DataTables ( [Link](http://datatables.net/release-datatables/examples/data_sources/ajax.html) )，我想每 x 列拆分一个大 DataTable。

有什么建议或插件吗？

问题：

![在此处输入图像描述](../Images/4329f466cadefc6a27d59713a50f05b0.png)

而不是使用 x-srcolling 我希望能够将大数据表分解为 2-3-x 更小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:33:40.283

如果您需要有多个表，只需创建不同的 html 表格并使用不同的 id 分别初始化它们，如[本](http://datatables.net/release-datatables/examples/basic_init/multiple_tables.html)例所示。

[或者您可以使用此示例](http://datatables.net/release-datatables/examples/server_side/row_details.html)中的按钮显示 ecxtra 数据

# javascript - CanJS模型的动态属性？

> ID：12447153
> 
> 赞同：0
> 
> 时间：2012-09-16T13:14:41.710
> 
> 标签：javascript, javascript-framework, canjs, canjs-model

我想在我的模型中添加不在 REST 服务结果中的动态属性。这些动态属性会缩短名称、格式化日期等。例如，我的 CanJS 模型是这样的：

```
var MyModel = can.Model({
    findAll: 'GET /Services/all'),
    findOne: 'GET /Services/{id}'),
    create:  'POST /Services/all'),
    update:  'PUT /Services/{id}'),
    destroy: 'DELETE /Services/{id}')
}, {}); 
```

然后我像这样检索数据：

```
MyModel.findAll({}, function(data) {
    $('#main').html(can.view('templates/List.ejs'), data));
}); 
```

这就是我的 List.ejs 模板的样子：

```
<% for(var i = 0; i < this.length; i++) { %>
    <div class="thumb"><img src="http://cdn.somewhere.com/images/logo.<%= this[i].BaseName %>.png" /></div>
    <div class="title"><%= this[i].Name %></div>
    <div class="date"><%= moment(this[i].StartDate).format('MMM DD, YYYY') %> - <%= moment(this[i].EndDate).format('MMM DD, YYYY') %></div>
    <div class="location"><%= this[i].LocationFriendly %></div>
    <div class="description"><%= this[i].Description %></div>
<% } %> 
```

请注意我在模板中为图像 src 和开始/结束日期所做的逻辑。我想把这个逻辑放在模型中，所以我在模板中要做的就是：

```
<% for(var i = 0; i < this.length; i++) { %>
    <div class="thumb"><img src="<%= this[i].ImageURL %>" /></div>
    <div class="title"><%= this[i].Name %></div>
    <div class="date"><%= this[i].StartDateFriendly %> - <%= this[i].EndDateFriendly %></div>
    <div class="location"><%= this[i].LocationFriendly %></div>
    <div class="description"><%= this[i].Description %></div>
<% } %> 
```

如何将此逻辑移动到模型层或比模板更好的地方？感谢您提供任何帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T07:38:05.317

最简单的方法是在模型上创建函数：

```
var MyModel = can.Model({
    findAll: 'GET /Services/all',
    findOne: 'GET /Services/{id}',
    create:  'POST /Services/all',
    update:  'PUT /Services/{id}',
    destroy: 'DELETE /Services/{id}'
}, {
    imageUrl : function(){
        return "http://cdn.location.com/" + this.BaseName + ".png"
    },
    startDateFriendly : function(){
        return moment(this.StartDate).format('MMM DD, YYYY')
    },
    endDateFriendly : function(){
        return moment(this.StartDate).format('MMM DD, YYYY')
    },
    locationFriendly: function() {
        // ...
    }
}); 
```

然后你可以从视图中调用这些函数：

```
<% for(var i = 0; i < this.length; i++) { %>
    <div class="thumb"><img src="<%= this[i].imageUrl() %>" /></div>
    <div class="title"><%= this[i].Name %></div>
    <div class="date"><%= this[i].startDateFriendly() %> - <%= this[i].endDateFriendly() %></div>
    <div class="location"><%= this[i].locationFriendly %></div>
    <div class="description"><%= this[i].Description %></div>
<% } %> 
```

# java - 在字节数组中存储对象引用

> ID：12447154
> 
> 赞同：2
> 
> 时间：2012-09-16T13:14:42.940
> 
> 标签：java, arrays, memory, byte, object-reference

我有一个字节数组和一个对象引用。

```
 byte[] data = new byte[128];

    Block b = new Block(); 
```

我想将引用 b 存储在**“数据”**数组的最后 2 个（或 4 个）字节中。

请注意：我不想序列化对象并存储在字节数组中。我需要存储一个引用新块的指针（引用）。

**编辑**

我的 Block 类如下

```
 public class Block {
        byte[] data ;

        public Block(){
            data = new byte[128];
        }
} 
```

基本上，数据数组将使用 126 字节来存储字符串，最后两个（或 4）字节来存储对另一个块的引用。它的一种链接列表。

我可以使用 Block 类的不同定义来完成它[通过在类本身中包含对 Block 的引用]。但是问题陈述指出了只有最后 2 个字节应该用作对另一个块的引用的约束。从其他帖子我知道在 jvm（32 位）中，引用的大小为 4 个字节。因此我认为只能使用最后 4 个字节来完成

**问题陈述的片段**

> 该块的最后 2 个字节用于指向下一个块。假设文件大小为 8 个块，那么第 4 个块的最后 2 个字节将指向第 5 个块，第 5 个块的最后 2 个字节指向第 6 个块，依此类推。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T13:36:47.810

> 基本上，数据数组将使用 126 字节来存储字符串，最后两个（或 4）字节来存储对另一个块的引用。它的一种链接列表。

您可以通过存储块索引来做到这一点。

例如

```
// list of blocks so you can lookup any block using a 16-bit index.
List<Block> blocks = new ArrayList<Block>();

int indexInBlocksToNext = ...
data[126] = (byte) (indexInBlocksToNext >> 8);
data[127] = (byte) indexInBlocksToNext; 
```

> 我可以使用 Block 类的不同定义来完成它[通过在类本身中包含对 Block 的引用]。但是问题陈述指出了只有最后 2 个字节应该用作对另一个块的引用的约束。从其他帖子我知道在 jvm（32 位）中，引用的大小为 4 个字节。因此我认为只能使用最后 4 个字节来完成

所有 32 位系统都使用 32 位指针或引用。您不能在 Java 中放置引用，因为没有通过数字引用对象的全局方式。您可以获取对象在内存中的位置，但此位置可以随时更改。

* * *

在 Java 7 中，开始之前使用的最小内存约为 1.3 MB。

```
$ java -mx1200k -version
Error occurred during initialization of VM
Too small initial heap for new size specified
$ java -mx1300k -version
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

这意味着您甚至在程序开始之前就已经使用了超过 1 MB 的预算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T13:17:16.570

您可以通过序列化任何对象[`ObjectOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)（请注意，您必须添加`implements Serializable`到您的类`Block`）。例如：

```
Block block = new Block();
// ...
ObjectOutputStream oos = new ObjectOutputStream(new BufferedOutputStream(new FileOutputStream(new File("test.dat"))));
oos.wrtieObject(block);
oos.close(); 
```

然后像这样阅读：

```
ObjectInputStream ois = new ObjectInputStream(new BufferedInputStream(new FileInputStream(new File("test.dat"))));
Block block = (Block) ois.readObject();
ois.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T14:01:27.793

> 我需要存储一个引用新块的指针（引用）。

基本上，在纯 Java 中根本无法做到这一点。

执行此操作的非纯 Java 方法（使用 JNI 或`Unsafe`类）将为您提供一个无法安全地转回 Java 引用的值。

原因是当 GC 运行时，它通常会将*可达*对象移动到新位置。现在，如果您在正确的引用类型字段、变量或数组槽中有对对象的引用，GC 将找到该引用副本并将其更新为指向对象的新位置。但是如果引用已经变成了字节或其他东西，那么 GC 将不知道字节实际上是引用的表示，并且不会更新它。因此，您的引用表示为字节现在将指向错误的位置。如果您将其转回参考并尝试使用它，则可能会出现混乱。

* * *

您需要找到一种不同的方式来表示这些`Block`引用。如果您不愿意自己序列化`Block`对象，那么显而易见的选项是索引或某种类型的 Map 键。在所有情况下，您的数据结构都需要保存垃圾收集器可访问的对象/数组中的真实引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T13:36:03.077

我认为你可以做的是：

1.  第一个序列化块类。
2.  然后使用类似下面的东西将块对象转换为字节数组。

` public byte[] toByteArray(Object obj) {//

```
 byte[] bytes = null;
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    try {
        ObjectOutputStream oos = new ObjectOutputStream(bos);
        oos.writeObject(obj);
        oos.flush();
        oos.close();
        bos.close();
        bytes = bos.toByteArray();
    } catch (IOException ex) {
        System.out.println(ex);
    }
    return bytes; 
```

`

1.  使用[System.arraycopy](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html) (src, srcPos, dest, destPos, length) 方法从源对象复制到目标对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T14:03:52.060

对于 java 中的内存数据结构，这是无法做到的。

jvm 规范故意模糊对象引用的存储和分配方式，以允许不同的 jvm 实现对它们如何实现垃圾收集等做出不同的选择。

您可以做的最好的事情（如果在内存中工作）是模拟具有大字节数组的地址空间，您使用数组中的索引作为指针。

如果在磁盘上工作，那就是另一回事了，因为基于磁盘的存储可以通过偏移量访问，并且指针是有意义的，但是您的内存数据结构变得无关紧要

# c# - 如何设置属性网格的列宽？

> ID：12447156
> 
> 赞同：13
> 
> 时间：2012-09-16T13:14:48.740
> 
> 标签：c#, .net, winforms, propertygrid

我在我的应用程序中使用属性网格来显示对象属性的名称和值。

默认情况下，列（名称和属性）的宽度为 50:50。我们可以选择滑动分割器来改变这个宽度。我想知道如何以编程方式调整此宽度，以便可以将其设置为 25:75。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T08:28:36.383

我发现 hamed 的解决方案不能可靠地工作。我已经通过以编程方式模拟用户拖动列拆分器来解决它。以下代码使用反射来执行此操作：

```
public static void SetLabelColumnWidth(PropertyGrid grid, int width)
{
    if(grid == null)
        return;

    FieldInfo fi = grid.GetType().GetField("gridView", BindingFlags.Instance | BindingFlags.NonPublic);
    if(fi == null)
        return;

    Control view = fi.GetValue(grid) as Control;
    if(view == null)
        return;

    MethodInfo mi = view.GetType().GetMethod("MoveSplitterTo", BindingFlags.Instance | BindingFlags.NonPublic);
    if(mi == null)
        return;
    mi.Invoke(view, new object[] { width });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-10-08T01:17:21.687

**2019答​​案**

此页面上的其他答案包含对 C# 版本和用户评论过程的临时改进。

我选择了最好的工作解决方案并创建了一个扩展方法。

```
public static class PropGridExtensions
{
    public static void SetLabelColumnWidth(this PropertyGrid grid, int width)
    {
        FieldInfo fi = grid?.GetType().GetField("gridView", BindingFlags.Instance | BindingFlags.NonPublic);
        Control view = fi?.GetValue(grid) as Control;
        MethodInfo mi = view?.GetType().GetMethod("MoveSplitterTo", BindingFlags.Instance | BindingFlags.NonPublic);
        mi?.Invoke(view, new object[] { width });
    }
} 
```

**用法：**

在 Form_Load() 事件中，直接在您的属性网格上调用它，如下所示：

myPropertyGrid.SetLabelColumnWidth(值);

您不需要在其他任何地方调用它。调用一次即可享受。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-16T14:03:18.113

正如在[这个](https://stackoverflow.com/a/5152195/359170)答案中提到的：

没有属性可以做到这一点，您必须破解控件。首先添加此代码：

```
 public static void SetLabelColumnWidth(PropertyGrid grid, int width)
{
    if (grid == null)
        throw new ArgumentNullException("grid");

    // get the grid view
    Control view = (Control)grid.GetType().GetField("gridView", BindingFlags.Instance | BindingFlags.NonPublic).GetValue(grid);

    // set label width
    FieldInfo fi = view.GetType().GetField("labelWidth", BindingFlags.Instance | BindingFlags.NonPublic);
    fi.SetValue(view, width);

    // refresh
    view.Invalidate();
} 
```

并用你想要的大小来调用它。像这样：

```
SetLabelColumnWidth(propertyGrid1, 100); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-13T04:37:01.393

Framework 4.0 的版本（我必须使用**BaseType**）。方法在继承自 PropertyGrid 的类中使用：

```
private void SetLabelColumnWidth(int width)
{
    FieldInfo fi = this.GetType().BaseType.GetField("gridView", BindingFlags.Instance | BindingFlags.NonPublic);
    object view = fi.GetValue(this);
    MethodInfo mi = view.GetType().GetMethod("MoveSplitterTo", BindingFlags.Instance | BindingFlags.NonPublic);

    mi.Invoke(view, new object[] { width });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T15:36:27.823

我在开源扩展 PropertyGrid 上取得了成功，您可以在[http://www.codeproject.com/Articles/13630/Add-Custom-Properties-to-a-PropertyGrid](http://www.codeproject.com/Articles/13630/Add-Custom-Properties-to-a-PropertyGrid)找到。它有两种你会感兴趣的方法：

> AutoSizeProperties - 自动移动拆分器以更好地适应所有显示的属性。MoveSplitterTo - 按照用户在参数中的指示移动拆分器。

您可以计算`Width`PropertyGrid 的 25% 并`MoveSplitterTo`使用它进行设置。

我实际上使用`AutoSizeProperties`了，因为它会自动移动分离器以贴合标签。请注意，您需要在`AutoSizeProperties`设置`SelectedObject`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-04T12:16:56.203

一个可能对某人有用的特殊用例：我正在使用带有 DesignSurface 的 PropertyGrid，并且每次编辑值时标签列的宽度都会变窄。在以下对我有用之前，要保持用户设置的标签列宽度：

```
public UcPropertyGridHost(...)
        {
            ...
            propGrid.PropertyValueChanged += OnPropertyValueChanged;
        }

private void OnPropertyValueChanged(object p_s, PropertyValueChangedEventArgs p_e)
        {
            var iWidth = GetLastLabelWidth();

            //do other things you want to

            SetLabelColumnWidth(propGrid, (int)iWidth);
        }

private int GetLastLabelWidth()
        {
            var iDefaultLabelColumnWidth = propGrid.Width / 2;

            var oFieldInfo = propGrid.GetType().GetField("gridView", BindingFlags.Instance | BindingFlags.NonPublic);
            if (oFieldInfo == null) return iDefaultLabelColumnWidth;

            if (!(oFieldInfo.GetValue(propGrid) is Control oView)) return iDefaultLabelColumnWidth;

            var oFileInfo = oView.GetType().GetField("labelWidth", BindingFlags.Instance | BindingFlags.NonPublic);
            if (oFileInfo == null) return iDefaultLabelColumnWidth;

            return (int)oFileInfo.GetValue(oView);
        } 
```

和取自这里的代码：

```
private void SetLabelColumnWidth(PropertyGrid p_oGrid, int p_iWidth)
    {
        if (p_oGrid == null) return;

        var oFieldInfo = p_oGrid.GetType().GetField("gridView", BindingFlags.Instance | BindingFlags.NonPublic);
        if (oFieldInfo == null) return;

        if (!(oFieldInfo.GetValue(p_oGrid) is Control oView)) return;

        var oMethodInfo = oView.GetType().GetMethod("MoveSplitterTo", BindingFlags.Instance | BindingFlags.NonPublic);
        if (oMethodInfo == null) return;

        oMethodInfo.Invoke(oView, new object[] { p_iWidth });
    } 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-09-16T15:16:26.397

您可以使用[Smart PropertyGrid.Net](http://www.visualhint.com/propertygrid)代替 propertygrid 并使用以下代码更改比率：

```
propertyGrid1.LabelColumnWidthRatio = 0.25; 
```

# web-services - 从 struts2 Web 应用程序创建 Web 服务

> ID：12447157
> 
> 赞同：2
> 
> 时间：2012-09-16T13:14:56.377
> 
> 标签：web-services, web-applications, struts2

首先，我是 Web 服务的新手。我在大学有一个教学任务，关于开发 Web 应用程序和 Web 服务，例如管理分布式药店。我已经使用 struts2 框架开发了一个有效的 Web 应用程序，但现在我想将它扩展到一个 Web 服务。我发现我可以实现一个类（例如命名为 WSManager），它是各种 Web 应用控制器的包装器。它必须调用这些控制器的静态方法。Web 应用程序旨在为每个用例提供一个控制器。

例如控制器是这样的：

```
public class AdminLocaleController extends AbstractController {

private static final long serialVersionUID = -6266455088438602574L;
private static Logger logger = Logger.getLogger(AdminLocaleController.class);

private List<Prodotto> prodotti;

@Override
public String execute() {
    prodotti = initializeAdminLocaleView();
    return "success";
}

public List<Prodotto> getProdotti() {
    return prodotti;
}

public void setProdotti(List<Prodotto> prodotti) {
    this.prodotti = prodotti;
}

public static List<Prodotto> initializeAdminLocaleView() {
            logger.info("Recupero lista di prodotti da ordinare");
    DBController dbController = new DBControllerImpl();
    return dbController.getProdottiDaOrdinare();
}

} 
```

并且 WSManager 类调用 initializeAdminLocaleView()，就像这样：

```
/* AdminLocaleController */
public List<Prodotto> initializeAdminLocaleView(){
    return AdminLocaleController.initializeAdminLocaleView();
} 
```

我将在 Eclipse 中创建一个提供该服务类的 Web 服务。

如果我做错了什么，我会问你将 Web 应用程序扩展到 Web 服务的正确方法。

否则，我的问题是我是否必须（以及如何）管理视图（jsp）和控制器之间的参数和属性。

最后，我有一些控制器（每个都实现 SessionAware），它们处理数据并将返回的对象存储在 Session 中（例如，在请求会话中保存 User bean 的 LoginController）。更深一点，我的问题是在 Web 服务的情况下我应该如何管理 Web 应用程序的**会话存储属性**。如果我在 WSManager 中有将用户 bean 作为参数传递的方法调用，我如何从会话中获取它。或者简单地说，我是否有必要从 Web 服务的角度从会话中获取某些东西？

我确定我写了一个令人困惑的问题，但我此时的心态也是令人困惑的。

# ruby-on-rails - 处理 Ruby on Rails 中以 json 格式接收的 ajax 请求结果

> ID：12447163
> 
> 赞同：0
> 
> 时间：2012-09-16T13:15:34.813
> 
> 标签：ruby-on-rails, ruby, ajax, json, haml

我正在尝试通过 AJAX 进行身份验证，但无法弄清楚在 ajax 请求完成时如何显示消息。当电子邮件和密码无效时，我需要显示错误消息。

一个haml页面的代码

```
=form_for(resource, :as => resource_name, :url => session_path(resource_name), :remote => true, :format => :json) do |f| 
    = label :user, :email, "Email"
    = text_field :user, :email
    = label :user, :password
    = password_field :user, :password
    %input{:type => "submit", :value => "Sign in"} 
```

和结果 ![在此处输入图像描述](../Images/6e5848aed72db9833312c36ae43ce444.png)

你的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:40:28.353

由于您使用的是 JSON 格式（仅数据，而不是操作），因此您需要某种客户端处理。

尝试在处理程序中处理响应`ajax:success`。使用 jQuery，它可以是这样的：

```
$('#the_form_id').on('ajax:success', function(data, status, xhr) {
  if(data) {
    if(data.status) { // Login successful
      alert("Login successful");
    }
    else {
      alert(data.errors);
      // To show errors inside a DOM element
      $("#error-wrapper").html(data.errors);
    }
  }
}); 
```

# c++ - 如何在 VS 2010 上安装 BASS 音频库？

> ID：12447164
> 
> 赞同：1
> 
> 时间：2012-09-16T13:15:36.343
> 
> 标签：c++, visual-studio-2010, include-path, bass

我正在使用 OpenCV 和 Visual Studio 2010 开发一个项目。我在 VS 2010 上安装 BASS 音频库时遇到问题。我下载了[这些 win32 库](http://www.un4seen.com/)

我将文件添加到链接器输入中，并且还在附加库目录（在链接器部分）和我的 .cpp 文件中`bass.lib`添加了 .lib 文件（即 ）的路径。这与您对 OpenCV 文件或任何外部文件执行的操作相同，唯一的区别是我不知道在*C/C++-> 附加包含目录*中放入什么（其中已经包含OpenCV）。有谁知道放在那里什么？`C:\bass24\c``#include "bass.h"`*`C:\opencv\build\include`*

 *VS 2010 给了我这个问题：

```
Error 1error C1083: Cannot open include file: 'bass.h': No such file or directory 
```

PS：我正在做一个声化项目，我必须从我的相机中跟踪一个有色物体，并且如果该物体在不同的位置移动，我必须播放音乐。我想使用 BASS，因为可以使用多扬声器选项（如果对象向右移动，则在右扬声器上播放音乐，依此类推）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:46:10.963

VS 2010 应该知道必要的库文件在哪里（根据您的描述），但是您忘记告诉它`bass.h`文件在哪里。

在`C/C++`->`Additional Include Directories`中，添加目录`C:\bass24\C`，因为那是`bass.h`文件所在的位置。*

# ios - 应用程序：didFinishLaunchingWithOptions：没有在 iPad 上被调用

> ID：12447165
> 
> 赞同：1
> 
> 时间：2012-09-16T13:15:54.743
> 
> 标签：ios, ipad, uiapplicationdelegate

我有一个项目正在为 Retina 4 做好准备。它以前使用过 MainWindow.xib 文件（一个用于 iPhone，一个用于 iPad），但我已经删除了这些文件（以及项目设置中对它们的引用）和将其替换为在应用程序的 application:didFinishLaunchingWithOptions: 方法中分配窗口。在旧分辨率和新分辨率下，iPhone 上一切正常，但是当我在 iPad（模拟器和设备）上尝试时应用程序：didFinishLaunchingWithOptions：永远不会被调用......我在方法的顶部放置了一个 NSLog 以确保它不是t 只是默默地崩溃了一些方法，但我从来没有得到日志输出。应用程序启动并变黑。我曾尝试重置模拟器，但它再次发生在设备和模拟器上并且没有效果。这发生在 iOS 5、5 上。1 和 iOS 6 在视网膜和非视网膜上，以及在设备上，所以它似乎不是操作系统或模拟器问题。完全相同的代码（通用项目）在 iPhone 上运行良好，所以我有点难过它是如何混淆并忽略应用程序委托的......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T13:27:23.690

有多种方法可以设置 AppDelegate 类。NIB 是一个，主程序是另一个：

```
main.m
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

# javascript - 点击获取全部 元素鼠标在基于坐标

> ID：12447166
> 
> 赞同：0
> 
> 时间：2012-09-16T13:16:01.297
> 
> 标签：javascript, jquery

我正在使用 jquery maphilight 插件，并且我的图像地图上有大量（数百个）重叠元素。我注意到，当将鼠标悬停在图像地图上时，maphilight 会突出显示它为这些坐标找到的第一个元素，因此重叠可能会成为一个问题。

我希望能够在某处单击图像映射并让 maphilight （或外部函数）向我返回一个包含所有元素的数组，而不仅仅是第一个元素。

对如何解决此问题的任何想法持开放态度。

**编辑：**为了简化，当我单击一个点时，我正在寻找 maphilight 来获取该区域（因为它已经这样做了），然后将其添加到一个数组中并继续从相同的坐标中寻找其他区域。不只是将它找到并停止的第一个区域返回给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:26:02.553

您可能需要研究向量。使用普通元素/div/图像是很复杂的。这是一个很好的例子，他们使用 jQuery 创建了一个单词地图[http://jvectormap.com/](http://jvectormap.com/)他们制作了一个完全交互式的地图。另一个很好的例子是 svg，但这可能非常复杂[http://keith-wood.name/svg.html](http://keith-wood.name/svg.html)

希望这有助于您朝着正确的方向前进。

# html - 将 HTML5 微格式放在用户访问受限页面中是否有用

> ID：12447168
> 
> 赞同：1
> 
> 时间：2012-09-16T13:16:33.230
> 
> 标签：html, authorization, microformats

我的问题似乎很愚蠢，但是因为我正在制作一个*所有*页面都需要获得用户身份验证的应用程序，并且因为我使用的是**HTML5**，所以，

*   谷歌机器人会解析这些页面吗？
*   如果不是，那么使用**Microformats**有用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:46:10.527

这完全取决于您要做什么，但 Microformats 解决的问题是“我怎样才能使这个 HTML 容易被计算机理解？”。

如果您认为计算机需要以一种有意义的方式解析数据，那么请使用它。

这可能是谷歌（尽管在您的情况下，它无法登录）、您在某个时候编写的内部搜索、突出显示某种信息的浏览器扩展等。

简而言之，它不太可能有用，但另一方面也不难实现！

# java - 如何使用 JSP 连接到 MySQL 数据库并检索和检查数据？

> ID：12447179
> 
> 赞同：0
> 
> 时间：2012-09-16T13:19:20.017
> 
> 标签：java, mysql, jsp

如何使用 JSP 连接到 MySQL 数据库并检索和检查数据？

我一直在浏览[http://www.jsptut.com/Forms.jsp](http://www.jsptut.com/Forms.jsp)中的教程。在那里，我看到了 setter 和 getter。

但是我不清楚如何将它们与 MySql 数据库一起使用。如何从数据库中添加新用户、检索现有用户……？

我正在使用 Eclipse IDE。我已经在项目中添加了Tomcat mysql-connector jar 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:42:40.337

使用可以使用以下链接来参考：[使用 jsp 连接到 mysql](http://www.9lessons.info/2008/09/jsp-login-page-to-connect-mysql-atabase.html)。对于教程，请参考 www.roseindia.net、mkyong.net 和 viruspatel.net 等网站

# wordpress - 如何在heroku上安装postgresql？

> ID：12447180
> 
> 赞同：0
> 
> 时间：2012-09-16T13:19:43.420
> 
> 标签：wordpress, postgresql, heroku

我想在heroku上安装wordpress并按照本教程（https://github.com/mhoofman/wordpress-heroku）我下载了heroku的工具带并在我的磁盘上获得了git repo我还创建了一个heroku帐户但是当我想要向其中添加 postgresql 我得到：

```
$ heroku addons:add heroku-postgresql:dev
 !    autoupdate in progress
 !    No app specified.
 !    Run this command from an app folder or specify which app to use with --app
 <app name> 
```

为什么我按照教程中的说明做所有事情；？

我很感激你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:25:22.747

好的，我知道了！！！我想复杂了！！！我必须先创建一个应用程序；P

# ruby-on-rails - Ruby on Rails - 使用 md5 的 Postgresql - Rake 中止！fe_sendauth：未提供密码

> ID：12447182
> 
> 赞同：4
> 
> 时间：2012-09-16T13:19:53.167
> 
> 标签：ruby-on-rails, postgresql, ubuntu, passwords, rake

我在 Ubuntu 上使用 Rails 设置 Postgresql，但出现错误：Rake Aborted！fe_sendauth：运行 rake 命令时未提供密码。

我的 database.yml 文件中有以下内容：

```
development:
    adapter: postgresql
    encoding: unicode
    database: test_database
    pool: 5
    username: postgres
    passsword: <password> 
```

我已经更改了 pg_hba.conf 文件中的连接方法并重新启动了 postgresql 服务器，但是发生了同样的错误。

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD
local   all             all                                     md5
host    all             all             127.0.0.1/32            md5
host    all             all             ::1/128                 md5 
```

我知道我可以将方法更改为信任并运行 rake 命令，但我需要使用 md5，因为我想使用 Thinking sphinx 并且它不支持信任。

我可以通过 pgAdmin 连接到数据库，并在控制台中使用我的用户名和密码：psql -U postgres -d test_database。

我错过了什么吗？

**[编辑]** 原来我不会拼写。我在我的 database.yml 中将 'Password' 更改为 'Password' 并且它现在可以工作了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:48:53.093

修复了错字，当想在 ubuntu 上的 rails 中使用用户/密码认证时，您必须将 postgresql 安装目录的 pg_hba.conf 中的方法访问类型更改为 md5

# jquery - jquery隐藏和显示打印

> ID：12447185
> 
> 赞同：1
> 
> 时间：2012-09-16T13:20:24.633
> 
> 标签：jquery, css, show-hide

是否可以为不同的媒体（例如打印和屏幕）设置不同的 jquery 显示和隐藏属性？

假设我有 2 个 div 和一个按钮，用于显示和隐藏一个 div 并显示另一个。但是当我点击打印时，我想展示它们。尽管如此，如果我在 css 中定义打印它是 display:inline; 当前隐藏的块隐藏在打印中。我该如何解决这个问题？谢谢多里扬

这是示例：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<style type="text/css">
@media print{
    #div1{
        display:block;
    }

    #div2{
        display:block;
    }
}
</style>

<div id="div1">Div1</div>
<div id="div2">Div2</div>
<a href="#" onclick="$('#div1').hide();$('#div2').show();">Showdiv1</a>
<a href="#" onclick="$('#div2').hide();$('#div1').show();">Showdiv1</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:31:42.160

将一个类添加到您的可见元素，例如`.visible`. 比做这样的事情：

```
@media print {
    .visible {display:block}
} 
```

**更新**

在您更新问题后，我会说您需要使用`!important`-declaration ...

```
@media print{
    #div1, #div2{
        display:block !important;
    }
} 
```

* * *

**[演示](http://jsfiddle.net/u2r7R/show)**只是隐藏一个 div 并尝试打印！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:31:47.130

[这是](https://stackoverflow.com/questions/10088890/print-a-table-from-an-html-page/10088956#10088956) 主题，如何从 html 页面打印表格（div 等）。我认为它更好的解决方案

# php - 摆脱heredoc中的空格

> ID：12447189
> 
> 赞同：1
> 
> 时间：2012-09-16T13:20:53.997
> 
> 标签：php

我有这个循环

```
foreach ($unserialized as $key => $value) {
 $foo = <<<EOT
<div class='krudItem' id='xxx'><form class='aj' name='itemForm' method='post'
 action=''><section><label>Slider Title</label><input type='hidden'
 name='sliderKey' value=$key/><input type='text' name='sliderTitle' value='$value 
 ['slidertitle']'/></section><section> <label>Slider Location</label>
 <input type='text' 
 name=$value['sliderlocation']value='ipsum'/></section><section><label>Slider 
 Description</label><textarea name='sliderDescription'>$value
 ['sliderdescription']</textarea></section><button name='saveNew' class='saveNew' 
 value='save'>save</button><button name='newCancel' value='cancel' 
 class='deleteNew'>cancel</button></form></div>
EOT;
echo $foo; 
```

但每次我运行它，我得到

> 解析错误：语法错误，意外的 '' (T_ENCAPSED_AND_WHITESPACE)，

我一直在阅读 php 关于[http://us2.php.net/tokens](http://us2.php.net/tokens)的内容，并且我尝试了所有其他可能的解决方案，但错误仍然存​​在。有一些空格，但我不确定如何处理好它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T13:24:46.127

您需要将变量括在花括号中：

```
$str = <<<EOF
some string with {$some['variables']} in it
EOF; 
```

您可以放入任何 PHP 表达式，`{...}`只要它以`$`.

请参阅[php.net 上有关此语法的文档](http://php.net/manual/en/language.types.string.php#example-72)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T13:22:33.367

您需要将变量括在括号中。

这应该适合你：

```
<?php
foreach ($unserialized as $key => $value) {
    $foo = <<<EOT
    <div class='krudItem' id='xxx'>
        <form class='aj' name='itemForm' method='post' action=''>
            <section>
                <label>Slider Title</label>
                <input type='hidden' name='sliderKey' value={$key}/>
                <input type='text' name='sliderTitle' value='{$value['slidertitle']}'/>
            </section>
            <section>
                <label>Slider Location</label>
                <input type='text' name={$value['sliderlocation']} value='ipsum'/>
            </section>
            <section>
                <label>Slider Description</label>
                <textarea name='sliderDescription'>
                    {$value['sliderdescription']}
                </textarea>
            </section>
            <button name='saveNew' class='saveNew' value='save'>save</button>
            <button name='newCancel' value='cancel' class='deleteNew'>cancel</button>
        </form>
    </div>
EOT;
    echo $foo;
} 
```

# c - 进程到不同状态的转换

> ID：12447191
> 
> 赞同：-3
> 
> 时间：2012-09-16T13:20:56.073
> 
> 标签：c

假设我有一个简单的 c 程序。我想知道这个程序所做的转换，即它是否进入阻塞状态或暂停状态等，因为它正在执行。有人可以解释一下使用一个简单的 c 程序并通过每行代码的转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:39:58.323

状态适用于过程。正在执行的程序称为进程。此链接将是了解进程不同状态的更好方法 [http://en.wikipedia.org/wiki/Process_state](http://en.wikipedia.org/wiki/Process_state)

# c - C 指针的使用

> ID：12447192
> 
> 赞同：1
> 
> 时间：2012-09-16T13:20:57.667
> 
> 标签：c, pointers

我开始学习C。

现在，据我了解，指针用于指向另一个变量的地址并通过不直接接近它来更改该变量值。

现在，我有 3 个问题：

1.  这对吗？如果是这样，我为什么需要它？

2.  还有其他用途吗？

3.  以下代码行之间有什么区别：

    ```
    // 1
    int x = 10;
    int *ptr = &x;
    // 2
    int x = 10;
    int ptr = &x; 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:12:44.033

指针的值是另一个对象在内存中的位置。所以给定第一组声明：

```
int x = 10;
int *ptr = &x; 
```

你会在内存中有类似下面的内容（地址是凭空提取的，并不意味着代表任何真实的平台）：

```
项目地址 0x00 0x01 0x02 0x03
---- -------- ---- ---- ---- ----
   x 0x08001000 0x00 0x00 0x00 0x0A
 指针 0x08001004 0x08 0x00 0x10 0x00

```

`x`包含值`10`。 `ptr`包含 的地址`x`。因此，*表达式* `x`和`*ptr`是等价的；读或写与`*ptr`读或写相同`x`。

FWIW，那和之间的区别

```
int x = 10;
int ptr = &x; 
```

是`ptr`被视为整数，而不是指向整数的指针，因此如果您尝试类似`*ptr`的操作（一元的操作数`*` *必须*是指针类型），编译器会发出警告。

那么，为什么是指针呢？

C 中的指针有 3 个用途：

首先，指针允许我们模仿传递引用的语义。在 C 中，所有函数参数都是按值传递的；这意味着函数的形式参数与实际参数在内存中是不同的对象。例如，使用这个`swap`函数：

```
void swap(int a, int b)
{
  int t = a;
  a = b;
  b = t;
}

int main(void)
{
  int x = 1, y = 2;
  swap(x, y);
  ...
} 
```

如果我们查看内存，我们有如下内容：

```
项目地址 0x00 0x01 0x02 0x03
---- -------- ---- ---- ---- ----
   x 0x08001000 0x00 0x00 0x00 0x01
   是 0x08001004 0x00 0x00 0x00 0x02
   一个 0x08001010 0x00 0x00 0x00 0x01
   b 0x08001014 0x00 0x00 0x00 0x02

```

`a`这意味着对或所做的任何更改`b`都不会反映在`x`或中`y`；调用`swap`,后将`x`保持`y`不变。

但是，如果我们将*指针*传递给`x`和`y`，`swap`就像这样：

```
void swap(int *a, int *b)
{
  int t = *a;
  *a = *b;
  *b = t;
}

int main(void)
{
  int x = 1, y = 2;
  swap(&x, &y);
  ...
} 
```

那么我们的记忆看起来像这样：

```
项目地址 0x00 0x01 0x02 0x03
---- -------- ---- ---- ---- ----
   x 0x08001000 0x00 0x00 0x00 0x01
   是 0x08001004 0x00 0x00 0x00 0x02
   0x08001010 0x08 0x00 0x10 0x00
   b 0x08001014 0x08 0x00 0x10 0x04

```

`a`and`b`包含 and 的地址*，*所以从*表达式*中读取和写入and等价于从and中读取和写入。因此，在*调用*之后，和的值将被更改。`x``y` *`*a``*b``x``y`*`swap``x``y`**

 **我们使用指针的第二个原因是跟踪动态分配的内存。当我们想在运行时创建一个新对象时，我们使用`malloc`or`calloc`调用，它分配内存并返回一个指向它的指针：

```
int *p = malloc(sizeof *p * N); // dynamically allocates enough memory
                                // to hold N integer values and saves
                                // the location to p 
```

指针是在 C 中跟踪动态分配内存 的*唯一方法。*

最后，指针允许我们创建动态数据结构，例如列表、树、队列等。其思想是结构中的每个元素*显式*指向下一个元素。例如，这是一个定义简单整数列表的类型：

```
struct elem
{
  int data;
  struct elem *next;
}; 
```

每个类型的对象都`struct elem`明确指向以下类型的项目`struct elem`。这允许我们根据需要在列表中添加或删除它们（与数组不同），它允许我们在构建列表时对列表进行排序（我会发布一个示例，但我累死了，它可能没有意义；无论如何，您很快就会找到它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T13:27:03.317

指针存储给定类型的内存地址。`&x`是变量的地址`x`，当前存储的值是10。一个`int* ptr`可以保存这个位置。改变 10 (aka `x`) 你可以说

```
*ptr = 3; 
```

您的第二个代码块将地址存储`ptr`为实际数字。这意味着当您尝试打印时，`ptr`您会注意到它是一个半随机数（可能非常高）。

我建议您研究这些基本数据类型是如何存储在内存中的。

至于用途，您可以创建能够在其范围之外更改内存的函数，而不是为自己制作本地副本。如果您继续学习并了解功能，应该更好地解释它。你用什么来学习C？我强烈建议放弃你所拥有的并获得 K&R。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T13:29:46.657

指针一般用来存放变量的地址。这里在第一种情况下`&x`给出地址`x`和变量`*ptr`的值存储在地址值存储`ptr`指向的位置。在第二种情况下，ptr 存储变量 x 的地址。

```
#include<stdio.h>
#include<inttypes.h>
int main()
{
    int x = 10;
    int *ptr = &x;
    uintptr_t p = (uintptr_t)&x;
    printf("x=%d ,*ptr=%d,ptr=%p,p=%p",x,*ptr,ptr,p);
    return 0;
} 
```

在我的机器上，这段代码产生：

```
 x=10 ,*ptr=10,ptr=0028FF14,p=0028FF14 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T13:32:33.677

指针是内存地址，对。

但它不一定指向单个变量。
想象一下：

```
int * x = malloc( 2 * sizeof( int ) ); 
```

您在这里有一个指向可以包含 2 个整数的内存区域的指针。
所以：

*   `x[ 0 ]`是第一个 int
*   `x[ 1 ]`是第二个 int

取消引用时，您将在该示例中分配第一个：

```
*x = 0; // same as x[ 0 ] = 0 
```

关于你的第三个问题，确实有区别：

```
int x    = 10;
int *ptr = &x; // As expected, ptr is now a pointer to x
int x    = 10;
int ptr  = &x; // Certainly not what you expect as ptr is not a pointer 
```

在第二种情况下，您将内存地址分配给整数。它不是指针，如果指针的长度与 int 不同（例如，在 64 位平台中），您将遇到问题。

指针很好，因为你可以做算术。

```
int * x  = malloc( 2 * sizeof( int ) );
int * x2 = x; // So we don't touch x, as we'll need to free it.

x2++; // Now x2 points to the second integer.

x2[ 0 ] = 0; // same as x[ 1 ] = 0; 
```

增量是根据指针类型完成的。这通常是魔术开始的地方。

如果我们在一个 short 大小为 2 的平台上，你可以想象如下：

```
short * x  = malloc( 2 * sizeof( short ) );
char  * x2 = ( char * )x; 
```

由于 a 的大小`char`为 1，您现在可以访问之前短指针的每个字节（4 个字节，因为我们分配了其中两个）。

所以：

```
x2[ 0 ] -> First short / First byte
x2[ 1 ] -> First short / Second byte
x2[ 2 ] -> Second short / First byte
x2[ 3 ] -> Second short / Second byte 
```

最后，指针在处理结构时也很好，例如，您需要将它们作为参数传递。
在这种情况下，使用指针将传递结构地址。否则，将需要在调用时复制结构，这根本没有效率。

```
void foo( struct x p );   // Structure data will be copied
void bar( struct x * p ); // Only the address will be passed, no data copied 
```**

# c# - RabbitMQ - 消息保持未确认，连接静默终止

> ID：12447193
> 
> 赞同：3
> 
> 时间：2012-09-16T13:21:04.137
> 
> 标签：c#, .net, process, rabbitmq

我有一个非常简单的客户端，我希望它可以 24/7 全天候使用消息。它在 Windows 进程中运行。

我对服务器和接收消息没有任何问题，它只是客户端。

行为如下：

如果我重新开始连接，则可以使用。过了一段时间，也许是几个小时后，我的客户处于一种奇怪的状态；它包含“持有”未确认消息的连接。

换句话说，使用 web 管理界面，我看到我总共有 2 条未确认的消息。查看我的连接，我看到 2 条未确认的消息散开。

但是没有进行任何处理。

最终，我的连接被终止，**没有任何异常或日志消息**被触发。这会将所有消息置于就绪状态。

我第一次尝试解决这个问题是添加一个简单的外部循环来检查 IModel、IChannel 和 QueueingBasicConsumer 的 i-var 的状态。然而，IModel/IChannel 的 IsOpen 总是报告 true，即使在 web 管理员报告没有连接处于活动状态之后，并且 QueueingBasicConsumer 的 IsRunning 也总是报告 true。

显然，我需要另一种方法来检查连接是否“活动”。

总而言之，事情最初运作良好。最终，我进入了一个奇怪的状态，我的诊断检查毫无意义，发送到服务器的消息未得到确认，并散布在任何现有的连接中。很快，我的连接被终止，没有任何调试或异常抛出，我的诊断检查仍然报告事情是洁净的。

任何帮助或最佳实践将不胜感激。我已经阅读了心跳和 IsOpen 'race' 条件，建议使用 BasicQos 并检查异常，但是我想先了解发生了什么。

这是我开始的地方：

```
private void StartMessageLoop(string uri, string queueName) {
    this.serverUri = uri;
    this.queueName = queueName;

    Connect(uri);
    Task.Factory.StartNew(()=> MessageLoopTask(queueName));
} 
```

这是我的连接方式：

```
private void Connect(string serverAddress) {
    ConnectionFactory cf = new ConnectionFactory();

    cf.Uri = serverAddress;

    this.connection = cf.CreateConnection();

    this.connection.ConnectionShutdown += new ConnectionShutdownEventHandler(LogConnClose);
    this.channel = this.connection.CreateModel();
} 
```

这是无限循环开始的地方：

```
private void MessageLoopTask(string queueName) {
    consumer = new QueueingBasicConsumer(channel);
    String consumerTag = channel.BasicConsume(queueName, false, consumer);

    while (true) {
        try {       
            BasicDeliverEventArgs e = (BasicDeliverEventArgs)consumer.Queue.Dequeue();
            IBasicProperties props = e.BasicProperties;
            byte[] body = e.Body;       

            string messageContent = Encoding.UTF8.GetString(body);
            bool result = this.messageProcessor.ProcessMessage(messageContent);

            if(result){
                channel.BasicAck(e.DeliveryTag, false);
            }
            else{
                channel.BasicNack(e.DeliveryTag, false, true);
                // log
            }
        }
        catch (OperationInterruptedException ex) {
            // log
            break;
        }    
        catch(Exception e) {            
            // log      
            break;
        }
    }
    // log
} 
```

问候， 戴恩

# ios - 无法将值插入到 sqlite DB iOS

> ID：12447200
> 
> 赞同：0
> 
> 时间：2012-09-16T13:22:40.887
> 
> 标签：ios, sqlite

在本教程之后，我在向我的数据库插入值时遇到了一些问题，尽管一切似乎都工作正常。

这是我插入条目的代码。

```
-(void)insertOrder:(MyOrderList*)entry
{
    // Create insert statement for the person
    NSString *insertStatement = [NSString stringWithFormat:@"INSERT INTO LIST (URL, CODE, EMAIL, FULL) VALUES (\"%@\", \"%@\", \"%@\",\"%@\")", entry.db_url, entry.db_code, entry.db_email,entry.db_full];
    NSLog(@"SQL INSERTION COMMAND:%@",insertStatement);

    char *error;
    if ( sqlite3_exec(databaseHandle, [insertStatement UTF8String], NULL, NULL, &error) == SQLITE_OK)
    {
            NSLog(@"Order inserted.");
    }
    else
    {
        NSLog(@"Error: %s", error);
    }
} 
```

我可以看到“已插入订单”被打印出来。

这是我检索列表的代码。

```
-(NSArray*) getList
{
    NSMutableArray *persons = [[NSMutableArray alloc]init];
    NSString *queryStatement = [NSString stringWithFormat:@"SELECT URL,CODE ,MAIL, FULL FROM LIST"];
    sqlite3_stmt *statement;
    NSLog(@"Query:%@",queryStatement);
    if (sqlite3_prepare_v2(databaseHandle, [queryStatement UTF8String], -1, &statement, NULL) == SQLITE_OK)
    {
        // Iterate over all returned rows
        while (sqlite3_step(statement) == SQLITE_ROW) {
            NSLog(@"Url of my List is:%@",[NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 0)]);

            MyOrderList *person = [[MyOrderList alloc]initWithUrl:[NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 0)] andCode:[NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 1)] andEmail:[NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 2)] andFull:[NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 3)]];
      [persons addObject:person];

            // Release the person because the array takes ownership
            //[person release];

        }
        sqlite3_finalize(statement);
    }
    //return [persons autorelease];
    return persons;

} 
```

这就是我在 .m 文件中使用它的方式

```
 DataController *dataController = [[DataController alloc]init];
                [dataController initDatabase];
                //[dataController release];

                 MyOrderList *order  = [[MyOrderList alloc] initWithUrl:url_2 andCode:keycode andEmail:mail andFull:full_2 ];
                [dataController insertOrder:order];
                //data has been added
                NSMutableArray* persons = [dataController getList]; 
```

我看到人是0。

从终端我看到这个：

```
Admins-MacBook-Air:~ admin$ sqlite3 Users/admin/Library/Application\ Support/iPhone\ Simulator/5.1/Applications/1A70F53B-133E-46AE-833E-13F205EA96EA/Documents/sqlite.db
SQLite version 3.7.12 2012-04-03 19:43:07
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> .schema
Error: unable to open database "Users/admin/Library/Application Support/iPhone Simulator/5.1/Applications/1A70F53B-133E-46AE-833E-13F205EA96EA/Documents/sqlite.db": unable to open database file
Admins-MacBook-Air:~ admin$ 
```

这就像我的数据库甚至没有创建。

这是我创建数据库的代码。

```
-(void)initDatabase
{
    // Create a string containing the full path to the sqlite.db inside the documents folder
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"sqlite.db"];
    NSLog(@"Path is:%@",databasePath);

    // Check to see if the database file already exists
    bool databaseAlreadyExists = [[NSFileManager defaultManager] fileExistsAtPath:databasePath];

    // Open the database and store the handle as a data member
    if (sqlite3_open([databasePath UTF8String], &databaseHandle) == SQLITE_OK)
    {
        // Create the database if it doesn't yet exists in the file system
        if (!databaseAlreadyExists)
        {
            // Create the PERSON table
            const char *sqlStatement = "CREATE TABLE IF NOT EXISTS LIST (ID INTEGER PRIMARY KEY AUTOINCREMENT, URL TEXT, CODE TEXT, EMAIL TEXT, FULL TEXT)";
            char *error;
            if (sqlite3_exec(databaseHandle, sqlStatement, NULL, NULL, &error) == SQLITE_OK)
            {
                NSLog(@"Database and tables created.");
            }
            else
            {
                NSLog(@"Error: %s", error);
            }
        }
    }
} 
```

# javascript - 代码不工作错误“预期为'{'，而是看到';'。”

> ID：12447201
> 
> 赞同：1
> 
> 时间：2012-09-16T13:22:46.047
> 
> 标签：javascript

```
function f() {
    var b = "b";
    return function() {
        alert(b);
        return b;
    };
}
var a = function f();
    alert(a);
​ 
```

我尝试运行此代码，但出现我不理解的错误。

```
Error:
Problem at line 8 character 21: Expected '{' and instead saw ';'.
var a = function f();

Problem at line 8 character 21: Unnecessary semicolon.
var a = function f();

Problem at line 8 character 22: Missing semicolon.
var a = function f();

Implied global: alert 4,9 
```

这段代码有什么问题我想从全局范围内提醒privete var。我应该改变什么？很多谢谢。​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T13:23:50.940

> ```
>  var a = function f(); 
> ```

这没有任何意义。
如果您尝试调用该函数，只需编写`f()`.

# php - json输出到在php中再次可读的文件

> ID：12447203
> 
> 赞同：0
> 
> 时间：2012-09-16T13:23:17.757
> 
> 标签：php, arrays, json, transfer

我希望能够通过 ftp 以文件的形式将 php 数组从一台服务器传输到另一台服务器。

接收服务器需要能够打开所述文件并读取其内容并使用提供的数组。

我考虑过这两种方法，要么从服务器 1 用数组的 php 代码编写一个 php 文件，然后简单地将这个文件加载到服务器 2 上。但是，当数组的深度未知时，编写所述文件变得很棘手.

所以我想将数组写入json编码的文件，但我不知道第二台服务器如何打开并读取所述数据。

我可以简单地做：

```
$jsonArray= json_encode($masterArray);
$fh = fopen('thefile.txt' , 'w');
fwrite($fh, $thePHPfile);
fclose($fh); 
```

然后在另一台服务器上将数据打开到一个变量中：

```
$data = json_decode( include('thefile.txt') ); 
```

有没有人有过这方面的经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T13:25:57.727

对于第一台服务器，通过 FTP 连接到第二台服务器并将该文件内容放入文件中

```
$jsonArray = json_encode($masterArray);
$stream    = stream_context_create(array('ftp' => array('overwrite' => true))); 
file_put_contents('ftp://user:pass@host/folder/thefile.txt', $jsonArray, 0, $stream); 
```

用于`file_get_contents()`第二台服务器：

```
$data = json_decode( file_get_contents('/path/to/folder/thefile.txt') ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T13:32:55.503

如果您只对使用 PHP 读取文件感兴趣，您是否考虑过使用`serialize()`and `unserialize()`？

见[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

它也*可能*比`json_encode()`/更快`json_decode()`（参见[http://php.net/manual/en/function.serialize.php#103761](http://php.net/manual/en/function.serialize.php#103761)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T13:46:04.720

要在服务器之间“传输”阵列，使用文件作为媒介，您使用`json_encode`and找到了一个很好的解决方案`json_decode`。`serialize`and`unserialize`函数可以很好地执行相同的目标。

```
$my_array = array('contents', 'et cetera');

$serialized = serialize($my_array);
$json_encoded = json_encode($my_array);

// here you send the file to the other server, (you said you know how to do)
// for example:
file_put_contents($serialized_destination, $serialized);
file_put_contents($json_encoded_destination, $json_encoded); 
```

在接收服务器中，您只需要读取文件内容并应用相应的“解析”函数：

```
$serialized = file_get_contents($serialized_destination);
$json_encoded = file_get_contents($json_encoded_destination);

$my_array1 = unserialize($serialized);
$my_array2 = json_decode($json_encoded); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T13:36:24.353

您正在寻找的 PHP 函数是：**file_get_contents**

```
$masterArray = array('Test','Test2','Test3');
$jsonArray= json_encode($masterArray);
$fh = fopen('thefile.txt' , 'w');
fwrite($fh, $jsonArray);
fclose($fh); 
```

然后在另一台服务器上：

```
$masterArray = json_decode( file_get_contents('thefile.txt') );
var_dump($masterArray); 
```

# c# - 从一个实例运行应用程序的另一个实例。

> ID：12447205
> 
> 赞同：1
> 
> 时间：2012-09-16T13:23:25.040
> 
> 标签：c#, .net, winforms

就像`Sticky Notes`在中一样`Windows 7`，我想创建一个`mainForm`每当用户单击`Button`say时添加一个新表单`btnAdd`。这个新的 Form 应该具有 的所有属性`mainForm`。

我努力了：

```
private void btnAdd_Click (object sender, EventArgs e)
{
    mainForm newForm=new mainForm();
    newForm.show();
} 
```

但即使这正在创建一个类似于 的表单`mainForm`，它也会在我们关闭 时关闭`mainForm`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:31:58.833

我想这就是你要找的...

[从另一个线程回答。](https://stackoverflow.com/questions/11332731/how-do-i-create-another-instance-of-a-net-program-within-one-instance-by-code)

已复制：

```
private void button1_Click(object sender, EventArgs e)
{
    Process p = new Process();
    p.StartInfo.FileName = Application.ExecutablePath;
    p.Start();
} 
```

# javascript - 调用回调的事件调用回调

> ID：12447206
> 
> 赞同：0
> 
> 时间：2012-09-16T13:23:32.273
> 
> 标签：javascript, module, callback, dom-events

我正在实现模块模式，我想公开一个事件函数。
这是代码：

```
var module = (function(){
    var self = {},
        cb = $(":checkbox");

    cb.on("change",/* self.OnChange */ ); // ???

    return self;
}());

module.OnChange(callbackFunction);

function callbackFunction(event){
    //do staff
} 
```

那么，关于如何访问`OnChange`'callbackFunction' 的任何想法？
还是使用模块模式更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:32:40.630

我经常在我的模块/插件/库中使用这种模式：

```
var borrow = function( obj, funcName, funcArg ){
  return function(){
    /// convert arguments to array
    var args = Array.prototype.slice.call( arguments );
    /// add in our fixed arg 'change'
    args.unshift( funcArg );
    /// execute the function
    return obj[funcName].apply( obj, args );
  }
}

self.change = borrow( cb, 'on', 'change' ); 
```

这应该意味着您可以在构造函数之外调用：

```
module.change( callbackFunction ); 
```

这基本上具有直接借用jQuery函数的效果，但是用您选择的特定元素包装它。以上将您的事件侦听器直接传递给复选框，就像您直接键入以下内容一样：

```
cb.on( 'change', callbackFunction ); 
```

您可以改进上述内容以接受多个固定参数，如下所示：

```
var borrow = function( obj, funcName ){
  /// convert arguments to array
  var args1 = Array.prototype.slice.call( arguments );
  /// remove the first two args (obj & funcName) 
  /// which means we now have an array of left over arguments
  /// we'll treat these as 'fixed' and always passed to the 
  /// 'borrowed' function.
  args1.shift(); args1.shift();
  /// return a closure containing our 'borrowed' function
  return function(){
    /// convert arguments to array
    var args2 = Array.prototype.slice.call( arguments );
    /// create a new array combined from the fixed args and the variable ones
    var args = args1.concat( args2 );
    /// execute the function
    return obj[funcName].apply( obj, args );
  }
} 
```

进一步的改进*（摆脱班次）*将是这样的：

```
var borrow = function( obj, funcName ){
  /// convert arguments to array and remove first two arguments
  var args1 = Array.prototype.slice.call( arguments, 2 );
  /// return a closure containing our 'borrowed' function
  return function(){
    /// convert arguments to array
    var args2 = Array.prototype.slice.call( arguments );
    /// create a new array combined from the fixed args and the variable ones
    var args = args1.concat( args2 );
    /// execute the function
    return obj[funcName].apply( obj, args );
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:31:51.767

我认为你正在制造一些混乱

```
var module = (function(){
    // here this points to the window object
    var self = this,
        cb = $(":checkbox");

    cb.on("change",/* self.OnChange */ ); // ???
    // here you are returning the window object
    return self;
}());
//since the function was instantaneous, here you are calling onChange() on the window object
module.OnChange(callbackFunction);

function callbackFunction(event){
    //do staff
} 
```

你到底想做什么？

# c# - 读取 GeoRSS 提要时 C# 中的文件意外结束

> ID：12447208
> 
> 赞同：3
> 
> 时间：2012-09-16T13:23:42.633
> 
> 标签：c#, xml

在我的程序中，我每 10 秒从一个网站获取一次 GeoRSS。只要没有新项目添加到 GeoRSS 提要中，程序就可以正常工作（即，我可以正确获取和解析 rss - 即使现有 rss 项目的元素更改其值时也是如此）。但是，只要将新项目添加到 rss 提要，我就会收到以下错误：

> 解析名称时出现意外的文件结尾。第 85 行，第 13 位。

堆栈跟踪：

```
 at System.Xml.XmlTextReaderImpl.Throw(String res, String arg)
   at System.Xml.XmlTextReaderImpl.ParseQName(Boolean isQName, Int32 startOffset, Int32& colonPos)
   at System.Xml.XmlTextReaderImpl.ParseElement()
   at System.Xml.XmlTextReaderImpl.ParseElementContent()
   at System.Xml.XmlReader.MoveToContent()
   at System.Xml.XmlReader.IsStartElement()
   at System.ServiceModel.Syndication.Rss20FeedFormatter.ReadItemFrom(XmlReader reader, SyndicationItem result, Uri feedBaseUri)
   at System.ServiceModel.Syndication.Rss20FeedFormatter.ReadItem(XmlReader reader, SyndicationFeed feed)
   at System.ServiceModel.Syndication.Rss20FeedFormatter.ReadItems(XmlReader reader, SyndicationFeed feed, Boolean& areAllItemsRead)
   at System.ServiceModel.Syndication.Rss20FeedFormatter.ReadXml(XmlReader reader, SyndicationFeed result)
   at System.ServiceModel.Syndication.Rss20FeedFormatter.ReadFrom(XmlReader reader)
   at System.ServiceModel.Syndication.SyndicationFeed.Load[TSyndicationFeed](XmlReader reader)
   at Master.Model.ResourceManagerService.wc_OpenReadCompleted(Object sender, OpenReadCompletedEventArgs e) in C:\Users\polle\Documents\Visual Studio 2010\Projects\Master(23)\LSCommMaster\Master\Master\Services\ResourceManagerService.cs:line 319
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherOperation operation, CancellationToken cancellationToken, TimeSpan timeout)
   at System.Windows.Threading.Dispatcher.LegacyInvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run()
   at Master.App.Main() in C:\Users\polle\Documents\Visual Studio 2010\Projects\Master(23)\LSCommMaster\Master\Master\obj\Debug\App.g.cs:line 0
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.Runtime.Hosting.ApplicationActivator.CreateInstance(ActivationContext activationContext, String[] activationCustomData)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssemblyDebugInZone()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

我用来获取 rss 的代码如下：

```
public static void FetchRSS(string url)
        {            

        if (url != String.Empty)
        {
            LoadRSS(url.Trim());
            DispatcherTimer UpdateTimer = new System.Windows.Threading.DispatcherTimer();
            UpdateTimer.Interval = new TimeSpan(0, 0, 0, 0, 10000);
            UpdateTimer.Tick += (evtsender, args) =>
            {
                LoadRSS(url.Trim());
            };
            UpdateTimer.Start();
        }
    }

    private static void LoadRSS(string uri)
    {
        Trace.WriteLine("Fetching rss feed");
        WebClient wc = new WebClient();
        wc.OpenReadCompleted += wc_OpenReadCompleted;
        Uri feedUri = new Uri(uri, UriKind.Absolute);
        wc.OpenReadAsync(feedUri);
    }

    private static void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {

        if (e.Error != null)
        {
            Trace.WriteLine("Error in Reading Feed. Try Again later!");
            return;
        }

        using (Stream s = e.Result)
        {
            SyndicationFeed feed;
            List<SyndicationItem> feedItems = new List<SyndicationItem>();

            using (XmlReader reader = XmlReader.Create(s))
            {
                try
                {
                    feed = SyndicationFeed.Load(reader);
                    foreach (SyndicationItem feedItem in feed.Items)
                    {
                        SyndicationElementExtensionCollection ec = feedItem.ElementExtensions;

                        string title = feedItem.Title.Text;
                        string x = "";
                        string y = "";
                        string state = "not available";
                        string type = "not available";
                        string task = "not available";

                        foreach (SyndicationElementExtension ee in ec)
                        {
                            XmlReader xr = ee.GetReader();

                            switch (ee.OuterName)
                            {
                                case ("lat"):
                                    {
                                        y = xr.ReadElementContentAsString();
                                        break;
                                    }
                                case ("long"):
                                    {
                                        x = xr.ReadElementContentAsString();
                                        break;
                                    }
                                case ("point"):
                                    {
                                        string p = xr.ReadElementString();
                                        string[] coordinates = p.Split(' ');                                            
                                        y = coordinates[0];
                                        x = coordinates[1];
                                        break;
                                    }
                                case ("state"):
                                    {
                                        state = xr.ReadElementString();                                       
                                        break;
                                    }
                                case ("type"):
                                    {
                                        type = xr.ReadElementString();
                                        break;
                                    }
                                case ("taskDescription"):
                                    {
                                        task = xr.ReadElementString();
                                        break;
                                    }
                            }

                        }

                        if (!string.IsNullOrEmpty(x))
                        {
                            Resource resource = new Resource()
                            {
                                Geometry = new MapPoint(Convert.ToDouble(x, System.Globalization.CultureInfo.InvariantCulture),
                                Convert.ToDouble(y, System.Globalization.CultureInfo.InvariantCulture), new SpatialReference(4326))
                            };

                            resource.Attributes.Add("TITLE", title);
                            resource.Attributes.Add("STATE", state);
                            resource.Attributes.Add("TYPE", type);
                            resource.Attributes.Add("TASK", task);
                            resource.Attributes.Add("PENDINGTASK", "none");

                            resource.Title = title;
                            resource.TypeDescription = type;
                            resource.State = state;
                            resource.TaskDescription = task;
                            resource.PendingTask = "none";

                            ResourceDataReceivedMessage msg = new ResourceDataReceivedMessage() { Resource = resource };
                            Messenger.Default.Send<ResourceDataReceivedMessage>(msg);

                        }
                        else
                        {
                            Trace.WriteLine("STRING IS NULL OR EMPTY");
                        }
                    }
                }
                catch
                {
                    Trace.WriteLine("Exception occurred while fetching RSS feed" );
                }

            }
        }
    } 
```

有谁知道是什么导致了错误，以及如何防止它发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:49:32.380

听起来当您获得更新时，您只是将其添加到您已有的内容的末尾，可能在错误的结束标签之外？

```
<root>
    <!-- Tags Galore -->
</root>
<addedTags></addedTags> 
```

像那样

# android - android:textCursorDrawable 未知

> ID：12447210
> 
> 赞同：1
> 
> 时间：2012-09-16T13:23:57.470
> 
> 标签：android, android-edittext

我有一个白色的 EditText 并且在 Android 3.1 及以上的光标不显示（因为它也是白色的）。有关信息，我使用

```
android:background="@android:drawable/editbox_background_normal" 
```

我在这篇文章[Set EditText cursor color](https://stackoverflow.com/questions/7238450/set-edittext-cursor-color/9165217#9165217)上读到，解决方案是将 textCursorDrawable 属性设置为我尝试过的“@null”，但我不能使用它，因为它说该属性是未知的。

我在 AndroidManifest.xml 中设置了我的 SDK，如下所示：

```
<uses-sdk android:minSdkVersion="14"
          android:targetSdkVersion="14"/> 
```

但它仍然无法识别 android:textCursorDrawable

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T19:01:05.587

也许您没有更改应用程序的构建目标。这就是为什么日食没有检测到`android:textCursorDrawable`

右键单击项目 -> 属性 -> Android -> 构建目标 -> 选择 api level 12 或更高

# java - "src" 和有什么不一样。“con”和“输出”

> ID：12447216
> 
> 赞同：1
> 
> 时间：2012-09-16T13:24:21.983
> 
> 标签：java, eclipse

在 eclipse .classpath 文件中，kind 有“src”、“con”和“output”，它们有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:28:38.320

*   `src`kind 具有存在 java 源的位置。
*   `con`kind 包含这些来源引用的外部档案的位置。
*   `output``src`kind 包含了每种kind指向的 java 源代码的编译类。
*   `lib`kind （虽然不在您的列表中）指向项目所依赖的 jar 的位置。

考虑 Eclipse 中的以下 java 项目：

*   我的项目
    *   源代码
        *   爪哇
        *   com
            *   维克多
            *   领域
            *   道
    *   测试
        *   com
            *   维克多
            *   领域
            *   道

假设这个项目依赖于 spring-core-3.0.jar、spring-beans-3.0.jar、apache-commons-1.0.jar。

然后，

*   src/java 和 src/test 很`src`友好，因为它们包含我的 java 源文件。
*   每个 jar 依赖项都是`lib`同类的。
*   如果我选择将 java 源代码编译到`eclipse-bin`目录，那就`output`太好了。
*   您的项目使用的 JRE 是`con`一种包含一堆 JRE jar 文件（如 rt.jar 等）的类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:32:51.733

*   src - 这些是项目中定义的源文件夹的位置。这些通常包含 java 源文件和/或资源。
*   输出 - 这些是编译文件的位置。这些是编译后放置类文件的位置。
*   con - 这些是类路径容器条目。容器是 jar、本机库和/或其他类路径文件夹的预定义集合。示例容器是为项目配置的 Java 运行时环境和应用服务器运行时环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:58:22.940

`src`: 主要包含`.java file`，广义上讲它的位置`source folders`

`con`: 将其视为保存`jars`, `libraries`, `classpath`文件夹。

`output`: 这包含`byte-code file`，即。文件夹中的`.class`文件对应的`.java`文件`src`。

# scala - Scala - 'for-yield' 子句可以在某些条件下不产生任何结果吗？

> ID：12447222
> 
> 赞同：12
> 
> 时间：2012-09-16T13:25:20.793
> 
> 标签：scala, yield-keyword

在 Scala 语言中，我想编写一个在给定范围内产生奇数的函数。该函数在迭代偶数时打印一些日志。该函数的第一个版本是：

```
def getOdds(N: Int): Traversable[Int] = {
  val list = new mutable.MutableList[Int]
  for (n <- 0 until N) {
    if (n % 2 == 1) {
      list += n
    } else {
      println("skip even number " + n)
    }
  }
  return list
} 
```

如果我省略打印日志，实现变得非常简单：

```
def getOddsWithoutPrint(N: Int) =
  for (n <- 0 until N if (n % 2 == 1)) yield n 
```

但是，我不想错过日志记录部分。如何更紧凑地重写第一个版本？如果能改写成这样就好了：

```
def IWantToDoSomethingSimilar(N: Int) =
  for (n <- 0 until N) if (n % 2 == 1) yield n else println("skip even number " + n) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T16:43:34.193

```
def IWantToDoSomethingSimilar(N: Int) = 
  for {
    n <- 0 until N
    if n % 2 != 0 || { println("skip even number " + n); false }
  } yield n 
```

不过，使用`filter`而不是`for`表达式会稍微简单一些。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T14:05:44.160

我想保持特征的顺序（按顺序处理奇数和偶数，而不是单独处理），您可以使用类似的东西（已编辑）：

```
def IWantToDoSomethingSimilar(N: Int) =
  (for (n <- (0 until N)) yield {
    if (n % 2 == 1) {
        Option(n) 
    } else {
        println("skip even number " + n)
        None
    }
  // Flatten transforms the Seq[Option[Int]] into Seq[Int]
  }).flatten 
```

编辑，遵循相同的概念，更短的解决方案：

```
def IWantToDoSomethingSimilar(N: Int) = 
    (0 until N) map {
        case n if n % 2 == 0 => println("skip even number "+ n)
        case n => n
    } collect {case i:Int => i} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T14:56:24.113

如果您想深入研究一种函数式方法，那么以下内容是一个很好的起点。

首先是一些常见的定义：

```
 // use scalaz 7
    import scalaz._, Scalaz._

    // transforms a function returning either E or B into a 
    // function returning an optional B and optionally writing a log of type E
    def logged[A, E, B, F[_]](f: A => E \/ B)(
      implicit FM: Monoid[F[E]], FP: Pointed[F]): (A => Writer[F[E], Option[B]]) = 
      (a: A) => f(a).fold(
        e => Writer(FP.point(e), None), 
        b => Writer(FM.zero, Some(b)))

    // helper for fixing the log storage format to List
    def listLogged[A, E, B](f: A => E \/ B) = logged[A, E, B, List](f)

    // shorthand for a String logger with List storage
    type W[+A] = Writer[List[String], A] 
```

现在你所要做的就是编写你的过滤函数：

```
 def keepOdd(n: Int): String \/ Int = 
      if (n % 2 == 1) \/.right(n) else \/.left(n + " was even") 
```

您可以立即尝试：

```
 scala> List(5, 6) map(keepOdd)
    res0: List[scalaz.\/[String,Int]] = List(\/-(5), -\/(6 was even)) 
```

然后您可以使用该`traverse`函数将您的函数应用于输入列表，并收集写入的日志和结果：

```
 scala> val x = List(5, 6).traverse[W, Option[Int]](listLogged(keepOdd))
    x: W[List[Option[Int]]] = scalaz.WriterTFunctions$$anon$26@503d0400

    // unwrap the results
    scala> x.run
    res11: (List[String], List[Option[Int]]) = (List(6 was even),List(Some(5), None))

    // we may even drop the None-s from the output
    scala> val (logs, results) = x.map(_.flatten).run
    logs: List[String] = List(6 was even)
    results: List[Int] = List(5) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T14:00:47.500

我不认为这可以通过理解来轻松完成。但是你可以使用分区。

```
def getOffs(N:Int) = {
  val (evens, odds) =  0 until N partition { x => x % 2 == 0 } 
  evens foreach { x => println("skipping " + x) }
  odds
} 
```

编辑：为避免在分区完成后打印日志消息，您可以像这样更改方法的第一行：

```
val (evens, odds) = (0 until N).view.partition { x => x % 2 == 0 } 
```

# jquery - 在大屏幕上查看时，Div 似乎从中心移除

> ID：12447227
> 
> 赞同：0
> 
> 时间：2012-09-16T13:26:03.957
> 
> 标签：jquery, html, css

我的主页有一个部分，当以我正在处理的屏幕尺寸以外的屏幕尺寸查看时，它会改变位置。我认为这与位置元素有关，但我不确定它应该设置为什么或应该放置在我的 CSS 中的什么位置。

我想保留在同一个地方的部分是一个 jquery 图像转换，它显示在图像内的导航菜单下方。请参阅下面的 HTML 和 CSS 以获取更多参考。

谢谢你的帮助

![在此处输入图像描述](../Images/6939c7ebb82551ac0edde81f6df310ab.png)

```
HTML:

<body>
<div id="top_bar">
<div id="top_inner">
<div id="logo"> <a href="http://www.edosbornephotography.com"><img src="images/logo.gif" alt="Ed Osborne" width="225" height="115" class="logo"></a></div>
<div class="nav">
<ul class = "menu" >
            <li> <a href = "#" > Home </a> </li>
            <li><a href = "#" > Packages </a>
            <li><a href = "#" > Weddings </a>
            <li><a href = "#" id="left" > Lifestyle </a>
        <ul class = "submenu" >
            <li> <a href = "#" > Families </a> </li>
            <li> <a href = "#"> Newborn/Child </a> </li>
            <li> <a href = "#" > Portraits </a> </li>
        </ul>
        </li>

        <li> <a href = "#" > Blog </a> </li>
        <li><a href = "#" id="left"> Abous Us </a>
        <ul class = "submenu" >
        <li> <a href = "#" > Ed Osborne </a> </li>
        <li> <a href = "#" > Testimonials </a> </li>
        <li> <a href = "#" > FAQs </a> </li>
        </ul>
        </li>

        <li> <a href = "#" > Contact Us </a> </li>
        <li> <a href = "#" > Links </a> </li>
        </ul>
    </div>
</div>
</div>

<div id="main">  

<div id="smart-gallery">
    <a href="images/cubagallery-img-1.jpg">
        <img src="images/cubagallery-img-1.jpg" /></a> 

    <a href="images/cubagallery-img-15.jpg">
        <img src="images/cubagallery-img-15.jpg" /></a> 

    <a href="images/cubagallery-img-3.jpg">
        <img src="images/cubagallery-img-3.jpg" /></a> 

    <a href="images/cubagallery-img-4.jpg"></a>
        <img src="images/cubagallery-img-4.jpg" /></a>
</div>

</div> 
```

CSS：

```
#top_bar {
width: 100%;
height: 145px;
background: #000000;
padding-bottom: 20px;
}

#top_inner {
text-align: center;
margin: 0 auto;
width: 1000px;
height: 144px;
}

.nav {
margin: 0 auto;
position: relative;
padding-top: 100px;
}

ul.menu {
list-style: none;
margin: 0;
float: left;
background: #222;
font-size: 1.2em;
background: url(../images/topnav_bg.gif) repeat-x;
}

ul.menu li {
float: left;
margin: 0;  
position: relative; 
}

ul.menu li span { 
width: 11px;
height: 35px;
float: left;
background: url(../images/subnav_btn.gif) no-repeat center top;
}

.min-gallery
{
width: 927px;
height: 615px;
border: solid 1px black;
background-color: Black;
background: url(../images/bg.jpg);
margin: auto;
margin-left: 232px;
}

.min-gallery .preview
{
width: 852px;
height: 493px;
margin-top: 36px;
margin-left: 36px;
margin-right: 36px;
position: relative;
border: solid 2px black;
overflow: hidden;
background-color: White;
}

.min-gallery .preview img
{
width: 795px;             
height: 525px;
position: absolute;
}

.min-gallery .bottom
{
width: 100%;
height: 98px;
color: Gray;
font-family: Arial;
font-size: 1em;
font-weight: bold;
overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:35:18.443

您的 html 代码不包含任何具有`min-gallery`类的元素...但是如果您将其更改为带有智能画廊的 min-gallery：

```
.smart-gallery
{
    width: 927px;
    height: 615px;
    border: solid 1px black;
    background-color: Black;
    background: url(../images/bg.jpg);
    margin: auto;
    margin-left: 232px; <- remove
}
.smart-gallery... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T13:37:23.193

您可以使用百分比而不是像素来定位图库。更好的方法是使用 css 媒体查询，这样当窗口发生变化时，div 的大小和位置也会发生变化。

这里没有足够的信息让我编写任何伪代码，而且我无法加载您的网站。但以下网站应该让您朝着正确的方向开始。

[快速提示媒体查询速成课程](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-a-crash-course-in-css-media-queries/)

[自适应布局](http://www.netmagazine.com/tutorials/adaptive-layouts-media-queries)

# objective-c - NSStatusItem 出现图形错误

> ID：12447232
> 
> 赞同：4
> 
> 时间：2012-09-16T13:27:04.080
> 
> 标签：objective-c, xcode, macos, cocoa, nsstatusitem

我的应用程序使用 NSStatusItem 对用户可见。所以我将'Application is agent (UIElement)'设置为YES，这基本上隐藏了应用程序的菜单栏，并隐藏了dock中的图标。现在，我没有删除菜单栏，所以我仍然可以使用 cmd+W 关闭首选项窗口或 cmd+q 退出应用程序等快捷方式。问题是，每当我使用这样的命令时，菜单栏就会变得一团糟。我注意到在后台运行的其他应用程序，如 Growl 2，也有同样的问题。

![菜单栏图形错误](../Images/73722f4d3cf983ae5b32650adb9e7d94.png)

我不知道如何解决这个问题。希望你们中的某个人可以帮助我

我在跑山狮。

谢谢！

**暗示**

它可能与 10.8 SKD 有关。我以前从未在任何应用程序中注意到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:54:39.417

将整个窗口菜单移动到应用程序菜单子菜单然后隐藏它怎么样？您仍然会收到快捷方式，并且突出显示的菜单将是无论如何存在的应用程序菜单（我想是这样，您将如何打开首选项窗口？也是快捷方式？）。

# wpf - 如何从 Win32 中托管的 WPF 窗口接收 Win32 消息？

> ID：12447236
> 
> 赞同：1
> 
> 时间：2012-09-16T13:28:04.437
> 
> 标签：wpf, winapi, clr

我在我的 Win32 应用程序中加载了一个 WPF 窗口：

```
case WM_INITDIALOG:
    {
        System::Windows::Interop::HwndSourceParameters p;
        p.WindowStyle = WS_VISIBLE | WS_CHILD;
        p.PositionX = 100;
        p.PositionY = 100;
        p.Width = 600;
        p.Height = 600;
        p.ParentWindow = System::IntPtr(hDlg);
        Globals::source = gcnew System::Windows::Interop::HwndSource(p);        
        Globals::source->RootVisual = gcnew MyControl();
        return TRUE;
    } 
```

现在我想通过在我的应用程序中接收 win32 消息来处理 WPF 窗口事件。我怎样才能做到这一点？

# javascript - HTML / js 局域网游戏

> ID：12447237
> 
> 赞同：2
> 
> 时间：2012-09-16T13:28:24.920
> 
> 标签：javascript, html, lan

> **可能重复：**
> [如何建立浏览器到浏览器（点对点）的连接？](https://stackoverflow.com/questions/7022383/how-to-make-a-browser-to-browser-peer-to-peer-connection)

我正计划制作一个*多人*游戏网页游戏，如果它在局域网上运行会很棒（因为它更快，而且我希望人们一起玩，坐在同一个房间里。）

这个想法是每个客户端都是一个网页，其中一个是主人，所有其他人都连接到它（其他人不必相互通信）。每个客户端也是一个网页。

所以现在我想知道，是否有任何*javascript*库可以做到这一点？通过局域网连接计算机，无需互联网连接（除了实际加载网页。）

我看到了一些没有太大帮助的旧答案，所以也许有一些新的东西可以帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:37:29.043

Node.js 在您的情况下可能真的很有帮助。您也可以尝试使用[HTML5 WebSocket API](https://stackoverflow.com/questions/1253683/what-browsers-support-html5-websocket-api)。

# android - 支持取消的 Android 文件上传队列

> ID：12447239
> 
> 赞同：3
> 
> 时间：2012-09-16T13:28:30.053
> 
> 标签：android, asynchronous, upload, queue, cancellation

我们正在开发一个 Android 应用程序，其中需要以异步方式将多张照片上传到我们的服务器。考虑一下，一旦拍摄了照片，它将开始上传。上传完成后，下一个（所有这些都将排入队列）将开始上传。

但是，支持取消功能也很重要，这意味着用户可以通过从队列中删除图像甚至取消正在运行的上传的方式与应用程序交互。

在寻找可能的解决方案后，我们得出了以下可能的场景：

1) 使用 IntentService 作为队列机制，并在其中实现我们自己的逻辑。但是，对于支持取消的难易程度存在一些担忧。

2) 使用 SD 卡和本地数据库来存储文件和服务来检查新文件。此处已对此进行了描述： [Android（或iOS）-图像上传队列](https://stackoverflow.com/questions/11346279/android-or-ios-image-upload-queue)

3）想办法使用内置的Android DownloadManager进行上传（真的可以做到吗？）

4) 使用 AsyncTask 和 isCancelled() 函数。

5) 或者理想情况下找到另一个内置的 Android/Java 机制以无缝方式完成上述所有工作。

有任何想法吗？

# php - 如何遍历文件中的数组

> ID：12447241
> 
> 赞同：1
> 
> 时间：2012-09-16T13:28:41.067
> 
> 标签：php

我有一个包含此内容的简单 html 文件。

```
<table border="1">
    <tr>
        <td>Name</td>
        <td>City</td>
    </tr>
    <tr>
        <td>Greg House</td>
        <td>Century City</td>
    </tr>
    <tr>
        <td>Dexter Morgan</td>
        <td>Miami</td>
    </tr>
</table> 
```

我有这个脚本：

```
include_once('simple_html_dom.php');

//$html = file_get_html('');
$html = file_get_html('http://localhost/path2mylocalfile/test1.html');

// first check if $html->find exists
if (method_exists($html,"find")) 
{
    // then check if the html element exists to avoid trying to parse non-html   
    if ($html->find('html')) 
    {

        foreach ($html->find('table') as $table)
        {

            // loop over rows
            foreach($table->find('tr') as $row) 
            {
                // initialize array to store the cell data from each row
                $rowData = array();

                foreach($row->find('td.text') as $cell) 
                {
                    // initialize array to store the cell data from each col
                    //$colData = array();                   

                    // push the cell's text to the array
                    $rowData[] = $cell->innertext;
                }

                if ($rowData) $theData[]=$rowData;

            }
            //print_r($theData);        

        }
    }
}

//Show array    
//foreach ($colData as $colItems)
//{
      foreach ($rowData as $rowItems)
          {
              echo "$rowItems<br /><br />";
          }
          //print_r($theData);
//} 
```

如果我只使用`$rowData`循环，我只会得到姓氏和城市，所以我尝试添加`$colData`循环，但是当我使用它时，屏幕上什么也没有。

如何循环遍历行和列并显示名称和城市？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:51:10.310

您可以使用原生 PhP 函数 DOMDocument-> loadHTML (http://docs.php.net/manual/en/domdocument.loadhtml.php)。

它专为 HTML 解析而设计，您可能能够解析标签的第一个和第二个子项。

# c# - 如何更新存在于另一个 ConcurrentDictionary 中的 ConcurrentDictionary？

> ID：12447243
> 
> 赞同：1
> 
> 时间：2012-09-16T13:29:01.193
> 
> 标签：c#, linq, concurrentdictionary

我有一个以 Pr_Matrix 命名的 ConcurrentDictionary：

```
ConcurrentDictionary<int, ConcurrentDictionary<int, float>> Pr_Matrix = new ConcurrentDictionary<int, ConcurrentDictionary<int, float>>(); 
```

以下代码的目的是将data_set.Set_of_Point数据集中每对点之间的相似度值添加到该字典中。

```
foreach (var point_1 in data_set.Set_of_Point)
{
   foreach (var point_2 in data_set.Set_of_Point)
   {
       int point_id_1 = point_1.Key;
       int point_id_2 = point_2.Key;
       float similarity = selected_similarity_measure(point_1.Value, point_2.Value);

       Pr_Matrix.AddOrUpdate(point_id_1, 
       new ConcurrentDictionary<int, float>() { Keys = {  point_id_2 }, Values = { similarity } }, 
       (x, y) => y.AddOrUpdate(point_id_2, similarity, (m, n) => n));
   }
} 
```

我无法更新存在于主 ConcurrentDictionary 中的 ConcurrentDictionarys。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:04:47.880

第一个问题是*AddOrUpdate*方法返回一个*Float*数据类型。您必须明确返回*ConcurrentDictionary ：*

```
 Pr_Matrix.AddOrUpdate(point_id_1, new ConcurrentDictionary<int, float>() { Keys = { point_id_2 }, Values = { similarity } }

                        , (x, y) => { y.AddOrUpdate(point_id_2, similarity, (m, n) => n); return y; }); 
```

第二个问题是*Keys*和*Values*集合是只读的并且*ConcurrentDictionary*不支持*Collection Initializer ，因此您必须使用**Dictionary*之类的东西对其进行初始化：

```
Pr_Matrix.AddOrUpdate(
    point_id_1, 
    new ConcurrentDictionary<int, float>(new Dictionary<int, float> {{point_id_2, similarity}} ), 
    (x, y) => { y.AddOrUpdate(point_id_2, similarity, (m, n) => n); return y; }
); 
```

# java - 如何在 Java 中为 Conway 的 Game Of Life 打印棋盘

> ID：12447244
> 
> 赞同：1
> 
> 时间：2012-09-16T13:29:23.500
> 
> 标签：java, boolean, conways-game-of-life

好的，所以我的作业问题是关于康威的生命游戏。我不是最好的程序员，所以我遇到了这个问题。我们不必创建实际的动画；只需打印到控制台。

问题的第一种方法是打印板。

棋盘表示为二维布尔数组：

```
boolean[][] board = new boolean[numberOfRows][numberOfColumns]; 
```

您的打印方法调用如下：

```
public static void printBoard(boolean[][] board) 
```

该方法应使用“。”将数组的每一行打印在单独的行上。代表假单元格和代表真的“*”。

我知道布尔值意味着它要么是假的要么是真的，但我不知道该怎么做。我应该使用while循环吗？

```
public static void printBoard(boolean[][] board) {
   boolean[][] board = new boolean[numberOfRows][numberOfColumns];

  int i = 0;
  int j = 0;

   while (i < numberofColumns) {
        System.out.print(".");
        i++;
    }

    >while (i < numberofColumns) {
        System.out.print("*");
        j++;

    }

    System.out.println(); } 
```

这就是我现在所拥有的。我什至接近吗？我收到错误消息'board is already defined in printBoard(boolean[][])

抱歉，如果问题不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:54:16.180

基本上你想要做的是遍历整个数组数组。您应该使用一个`for`循环来迭代`board`（或一个 foreach 循环），然后`for`在第一个循环中嵌入另一个循环来迭代每个`board`. 在这个嵌入式循环中，您可以简单地执行类似`System.out.print(board[i][j] ? "*" : ".")`. 在第一个 for 循环结束时，您将需要打印一个新行以获得矩形格式。

# facebook - 检索 facebook 秘密群组提要

> ID：12447248
> 
> 赞同：-1
> 
> 时间：2012-09-16T13:30:01.563
> 
> 标签：facebook, facebook-opengraph

我正在一个网站上构建一个 PHP 应用程序，以允许一个秘密 Facebook 组的成员检索发布在组墙上的所有 YouTube 链接。为此，我需要检索我使用开放图所做的组的提要。我`access_token`感谢图形 API 资源管理器，我设法显示了提要，但它依赖于`access_token`最终会过期的提要。

我该如何做才能随时使用有效的 API 调用函数`access_token`？

我正在考虑要求访问者将他们的 Facebook 帐户连接到应用程序，以便他们可以使用自己的令牌发出请求。

你有关于我如何做到这一点的线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:57:29.150

谢谢我刚刚在 facebook 上创建了一个 dum 应用程序，以允许在我的网站上使用 oauth，这就成功了。

# entity-framework - 实体中的单元测试和 Equals/GetHashCode

> ID：12447249
> 
> 赞同：1
> 
> 时间：2012-09-16T13:30:12.237
> 
> 标签：entity-framework, mstest

所以我创建了一些 POCO，目前其中一个是我正在测试的集合的一部分。我正在使用 MS Test，显然当我需要比较两个集合时，我将使用 CollectionsAssert.AreEquivalent()。现在在我的实体中，除了所有属性之外，我还覆盖了 .Equals() 和 .GetHashCode()，因为 CollectionAssert.AreEquivalent() 需要这两个属性。我的简单问题是——这两种方法都可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:03:56.203

覆盖 Equals 和 GetHashCode 时需要特别小心，因为不正确的实现可能会导致难以调试的细微错误和性能问题。如果您只需要它们来测试更安全的方法，那就是实现您自己的接受 IEqualityComparer 的 AreEquivalent() 方法。

话虽如此，EF 本身并不依赖于 POCO 的 Equals 和 GetHashCode，而是使用实体的 EntityKey 上的等价物。

如果您确实需要覆盖这些方法，您可以委托给相应的 EntityKey 以在使用实体的非 EF 代码中获取 EF 语义。然而，这种方法并不适用于所有场景，因为它只使用键值来建立实体身份。

# java - Android Parcelable 无法实例化类型

> ID：12447250
> 
> 赞同：1
> 
> 时间：2012-09-16T13:30:18.710
> 
> 标签：java, android, parcelable, parcel

我正在开发一个 Android 应用程序，我正在尝试使用 Parcelable 传递信息。这就是我所拥有的。

```
import android.os.Parcel;
import android.os.Parcelable;

abstract class Role implements Parcelable {

    private String name;
    private String image;

    public Role() {

    }

    public Role(Parcel read) {
        name = read.readString();
        image = read.readString();
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getImage() {
        return image;
    }

    public void setImage(String image) {
        this.image = image;
    }

    public String toString() {
        return this.name;
    }

    public static final Parcelable.Creator<Role> CREATOR = 
            new Parcelable.Creator<Role>() {

                public Role createFromParcel(Parcel source) {
                    return new Role(source);
                }

                public Role[] newArray(int size) {
                    return new Role[size];
                }
            };

    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    public void writeToParcel(Parcel dest, int flags) {
        // TODO Auto-generated method stub
        dest.writeString(name);
        dest.writeString(image);
    }

} 
```

但是，当我尝试编译时，我得到了错误（我放置评论的地方）

> 无法实例化类型角色

对此有什么想法吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:14:03.423

Yout 类`Role`被定义为`abstract`，抽象类不能被实例化。

只需定义您的班级角色：

```
class Role implements Parcelable {
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:47:47.080

我自己没有在抽象类中使用过parcelable，但应该没问题。您可能想在[这里查看](https://stackoverflow.com/questions/4049627/parcelable-and-inheritance-in-android/4055452#4055452)或更一般地[在这里查看](http://developer.android.com/reference/android/os/Parcelable.html)

我有一个非常相似的类（两个字符串），但它是一个公共静态类。我在构造函数中对我的字符串成员执行 new() 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T02:38:17.217

正如 qjuanp 提到的，不能实例化一个`abstract`类（根据 Java 和常见的 OOP 定义；你不能实例化抽象的东西，它必须被更多定义）。

我确定您正在尝试使用 Role 的某些子类（这是您可以同时使用`abstract`并`Parcelable`在此处实现的唯一方法），请考虑使用这种[方法](https://stackoverflow.com/questions/4049627/parcelable-and-inheritance-in-android)：

```
public abstract class A implements Parcelable {
    private int a;

    protected A(int a) {
        this.a = a;
    }

    public void writeToParcel(Parcel out, int flags) {
        out.writeInt(a);
    }

    protected A(Parcel in) {
        a = in.readInt();
    }
}

public class B extends A {
    private int b;

    public B(int a, int b) {
        super(a);
        this.b = b;
    }

    public static final Parcelable.Creator<B> CREATOR = new Parcelable.Creator<B>() {
        public B createFromParcel(Parcel in) {
            return new B(in);
        }

        public B[] newArray(int size) {
            return new B[size];
        }
    };

    public int describeContents() {
        return 0;
    }

    public void writeToParcel(Parcel out, int flags) {
        super.writeToParcel(out, flags);
        out.writeInt(b);
    }

    private B(Parcel in) {
        super(in);
        b = in.readInt();
    }
} 
```

# facebook - Facebook Connect 默认重定向

> ID：12447256
> 
> 赞同：0
> 
> 时间：2012-09-16T13:31:31.217
> 
> 标签：facebook, login, refresh, connect

我所有的页面都有 facebook 登录按钮并加载 facebook SDK。

这是我加载FB的JS代码：

```
window.fbAsyncInit = function() {
        FB.init({
          appId   : 129837912837129837128937, //fake id
      channelUrl : '//www.example.com/channel.php', // Channel File
          status  : true, // check login status
          cookie  : true, // enable cookies to allow the server to access the session
          xfbml   : true, // parse XFBML
          oath    : true
        });
// Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = \"//connect.facebook.net/en_US/all.js\";
     d.getElementsByTagName('head')[0].appendChild(js);
   }(document)); 
```

问题重现：

1) 使用注销链接从我网站内的 facebook 注销。Facebook.com 也会被注销。到目前为止还好。我的网站现在有用户注销。

2) 用户有时会访问 facebook.com 并登录。他使用 cookie 来维护会话。

3）然后他直接通过链接 /page.php?5&sdasda&asdad 或任何其他非主页链接访问我的网站，并且页面完全加载（除了最大延迟为 1-2 秒的 FB 登录按钮）。

4) 当 FB 登录按钮最终加载时，FB js 检测到用户已经登录 facebook.com（查看在步骤 2 中获得的 fb cookie），因此尝试通过重定向到根目录（www.mydomain）来“登录”他.com) 并且不刷新当前页面。

这是我的登录按钮的样子：

```
<div class="fb-login-button fb_iframe_widget " scope="status_update,email,user_birthday,read_stream,publish_stream,share_item"></div> 
```

呈现为：![呈现的 facebook 登录按钮](../Images/271a93a4186750a936a60def0122293a.png)

这是正常行为吗？我首先做错了什么吗？有什么办法解决这个问题吗？

# php - Facebook like 按钮在使用 load() 刷新 div 后不显示；

> ID：12447257
> 
> 赞同：2
> 
> 时间：2012-09-16T13:31:39.763
> 
> 标签：php, jquery, html, facebook, facebook-like

我正在使用一个简单的脚本来重新加载一个 div

`$('#mydiv').fadeOut('300').load('# #mydiv').fadeIn("300");`

问题是我正在重新加载的 div 里面有 Facebook like 按钮。DIV 重新加载后，我可以看到它在源代码中更新，但由于某种原因该按钮被隐藏了。

有没有办法强制按钮重新绘制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:59:37.293

正如我在评论中所说，我认为这`.load`被误解了，正如您在问题中所说

> 我可以在源代码中**看到**它已更新，但由于某种原因该按钮被隐藏了

..因此，考虑到这一点，我假设您的负载使用正确的参数运行。

你这里有一个同步问题。您在链中使用的所有内容都使用时间刻度，`.load()`因此是异步的。

因此，您必须使用回调来了解特定函数的时间尺度何时结束，而不是仅仅链接所有内容。

```
$('#myDiv').fadeIn('300', function() {
  // callback when #myDiv is faded out (display:none;)
  $(this).load('url', function() {
    // callback when #myDiv is loaded with new content from the given 'url'
    $(this).fadeIn('300');
  })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:50:20.777

facebook 按钮不会显示，因为它是在 document.load 之后正常配置的。

如果您在文档已加载且 Facebook javascript SDK 已初始化时加载 div 内容。它行不通。

如果在 div 加载之前不需要 facebook。您可以尝试在 div 中加载“all.js”脚本。

否则，如果您遇到这种情况，您肯定必须审查应用程序的设计。

# mysql - 从 information_schema 数据库中删除触发器

> ID：12447264
> 
> 赞同：0
> 
> 时间：2012-09-16T13:31:51.653
> 
> 标签：mysql, sql, database, triggers

在学校，我们正在学习用 SQL 编写触发器，我写了一个，但它是错误的。因此，我想删除它。

我尝试了以下方法：

```
mysql> use information_schema
Database changed
mysql> drop trigger log;
ERROR 1360 (HY000): Trigger does not exist 
```

但如您所见，我收到一个错误，因为它不存在。当我使用 Sequel Pro 并使用 来检查该表时`select * from triggers;`，它显示存在一个名为 log 的触发器。看截图：

![触发器可用](../Images/864805bd34dc62b26595a4624c699881.png)

我尝试通过右键单击并单击“删除行”将其删除，但随后出现以下错误：

> 无法删除行。
> 
> MySQL说：用户'robbert'@'localhost'拒绝访问数据库'information_schema'

我应该如何删除该触发器？明显有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:36:09.580

该`TRIGGER_SCHEMA`列指示定义触发器的数据库：您需要`USE db5`，而不是`INFORMATION_SCHEMA`（或限定`DROP TRIGGER`语句中的触发器名称）：

```
USE db5;
DROP TRIGGER log; 
```

或者：

```
DROP TRIGGER db5.log; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:36:31.713

尝试像这样使用：

**句法：**

```
DROP TRIGGER [IF EXISTS] [schema_name.]trigger_name 
```

在你的情况下：

```
 DROP TRIGGER [IF EXISTS] db5.log; 
```

发生错误是因为您使用了错误的架构名称。`db5`架构名称不应该是`information_schema`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:36:53.333

您的触发器位于 db5 模式中。您需要在删除之前使用该架构

```
use db5;
drop trigger log; 
```

或在 drop 语句中使用完全限定的触发器名称

```
drop trigger db5.log 
```

# image - sencha 列表背景图像与布局适合

> ID：12447268
> 
> 赞同：0
> 
> 时间：2012-09-16T13:32:14.197
> 
> 标签：image, list, background, extjs

我想为选项卡面板中的列表添加背景。但是一旦我使布局适合，背景就会消失......如果我删除布局，列表就会消失......

该列表似乎仅在布局适合时出现...

有人可以帮忙吗？

请谢谢...

```
 ****************************  Bollist.js  **********************

    Ext.define('tabla.view.Bollist',
{
    extend:'Ext.Panel',
    xtype:'Bollist',
    config:{
        title:'Bols',
        iconCls:'music2',
        layout:'fit',
        items:[
            {
                xtype:'list',
                store:'BolStore',
                itemTpl:'{name}'
            }
        ]
    }
});

     *************** Main.js **************

    Ext.define("tabla.view.Main", {
extend: 'Ext.tab.Panel',
requires: [
    'Ext.TitleBar',
    'Ext.dataview.List'
],
config: {
    tabBarPosition: 'bottom',

    items: [
        {
            style:{
                backgroundImage:'url(resources/images/bg.png)',
                backgroundRepeat:'repeat',
                backgroundPosition:'center',
                backgroundSize:'cover'
            },
            xtype:'home'
        },
        {
            style:{
                background:'red',
                backgroundRepeat:'repeat',
                backgroundPosition:'center',
                backgroundSize:'cover'
            },
            xtype:'Bollist'
        }
    ]
} 
```

});

```
 Ext.define('tabla.store.BolStore',{
extend:'Ext.data.Store',
config:
{
    model:'tabla.model.Bol',
    data:[
        { name: 'Na/Ta' },
        { name: 'Ti' },
        { name: 'Tin' },
        { name: 'Ri'},
        { name: 'Ge' },
        { name: 'Ka/Kat'},
        { name: 'Dha'},
        { name: 'Dhi'},
        { name: 'Dhin'},
        { name: 'Toon'}
    ]
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:40:04.957

试试这种方法，这对我有用。

从您的列表中删除**样式：**

```
 style:{
             background:'red',
            backgroundRepeat:'repeat',
            backgroundPosition:'center',
            backgroundSize:'cover'
        } 
```

在**index.html**中添加 **CSS 文件**，如下所示：

 **```
 <link href="app.css" rel="stylesheet" type="text/css" /> 
```

在您的**app.css**添加以下代码：

```
 .x-list
{
  background:'red';
} 
```

希望这可以帮助。**

# c# - 考虑夏令时从纪元获取日期和时间

> ID：12447277
> 
> 赞同：0
> 
> 时间：2012-09-16T13:33:01.587
> 
> 标签：c#, epoch

我目前正在开发 ac# 应用程序，并且正在使用纪元时间戳并将其转换回正常的日期和时间。这几乎是有效的，除了目前它返回的时间落后 1 小时，因为它没有考虑夏令时。如何确定用户是否处于夏令时的时区并根据需要更正时间。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T13:39:53.800

您尚未指定如何从纪元时间戳转换为 a`DateTime`但纪元时间戳是自 1970-01-01 00:00:00 UTC 以来经过的秒数，因此我假设您有 UTC `DateTime`。您可以使用以下代码将其转换为考虑夏令时的本地时间戳：

```
var date = DateTime.UtcNow; // Should be created from epoch time stamp.
var localDate = date.ToLocalTime(); 
```

重要的是`Kind`of the `DateTime`is not `Local`。如果不是这种情况，您可以自己修改它：

```
var date = DateTime.Now; // Should be created from epoch time stamp.
date = DateTime.SpecifyKind(date, DateTimeKind.Utc);
var localDate = date.ToLocalTime(); 
```

在 Windows 上，转换基于执行代码的当前用户的时区和夏令时设置。

# windows - 无论如何我可以在 Mac 上创建 Windows 8 应用程序（适用于 PC 和移动设备）

> ID：12447278
> 
> 赞同：1
> 
> 时间：2012-09-16T13:33:02.760
> 
> 标签：windows, macos, windows-8, microsoft-metro

我使用 Mac OSX。我现在想尝试在 Windows 8 上为 Imagine Cup 开发一个应用程序。但我不想切换回 Windows。有什么方法可以从 mac 开发适用于 windows 8 的应用程序？

最好是免费选项....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:01:07.003

我实际上在 Mac 上使用 VMWare 在 Windows 7 和 VS2010 上进行所有 Win32 开发。

你会需要：

1.  强大的 Mac (i7)
2.  很多内存（我有 8G，我希望我有 16G）
3.  7200rpm 硬盘或 SSD。

有了它，这对我来说真的很棒。我已经这样做了几个月了，根本没有出现内核恐慌或蓝屏。

注意：您不能使用这种配置真正为 WP7 开发。WP7 模拟器使用 VirtualBox，根据我们的经验，它在其他虚拟机中运行速度极慢或根本不运行。需要一台真正的 Windows 机器 ^_^

这是一个可行的方案。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:48:43.393

唯一可用的方法是使用虚拟机，因为即使使用低于 Windows 8 的 Windows 版本也无法开发 Windows 8 Modern UI 应用程序（Windows Store 应用程序）。有许多虚拟机可以免费使用。[Virtualbox](https://www.virtualbox.org/)可能是一个好的开始。
www.techspot.com/guides/503-windows-8-virtual-machine，windows 8创建vm的教程。
假设windows phone是你选择开发app的平台，同样你需要windows来创建windows phone app。 [在这里](https://dev.windowsphone.com/en-us/downloadsdk)
开始您的 Windows Phone 应用程序开发。

# php - 在 codeigniter 上将域重定向到 www

> ID：12447282
> 
> 赞同：1
> 
> 时间：2012-09-16T13:33:26.130
> 
> 标签：php, .htaccess, codeigniter

将codeigniter网站重定向到www域的最佳方法是什么？我想到的唯一方法是为此使用htaccess，但无法弄清楚到底如何。这是我现在用来从 url 中删除 index.php 的重写规则。我应该如何正确添加到 www 域的重定向？

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|assets|uploads|robots\.txt|favicon\.png|favicon\.ico)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T13:43:17.250

**看到这个网址**

[.htaccess 将非 WWW 重定向到 WWW 保留 URI 字符串](https://stackoverflow.com/questions/1685962/htaccess-redirect-non-www-to-www-preserving-uri-string)

**或者试试**

```
RewriteCond %{HTTP_HOST} .

RewriteCond %{HTTP_HOST} !^www.mysite.com [NC]

RewriteRule (.*) http://www.mysite.com/$1 [R=301,L] 
```

**另一个例子**

看到这个网址

[Codeigniter 重定向新域](https://stackoverflow.com/questions/9172019/codeigniter-redirects-for-a-new-domain)

**尝试一下**

尝试将以下内容添加到**www.xyz.com**站点根目录中的**.htaccess文件中。**

 **```
RewriteEngine on
RewriteBase / 

#redirect www.xyz.com/A/B/controller/function
#www.xyz.com/B/controller/function
RewriteCond %{HTTP_HOST} ^www\.xyz\.com$ [NC] 
RewriteRule ^A/(B/[\w]+/[\w]+)$ /$1 [L,NC,R=301]

#redirect www.xyz.com/A/controller/function to
#www.abc.com/controller/function
RewriteCond %{HTTP_HOST} ^www\.xyz\.com$ [NC] 
RewriteRule ^A/([\w]+/[\w]+)$ http://www.abc.com/$1 [L,NC,R=301] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T13:46:38.960

在您的 DNS 中使用[CNAME 记录。](http://en.wikipedia.org/wiki/CNAME_record)

这节省了 HTTP 请求，因此是最有效的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T13:38:44.960

在此之下添加另一个条件：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```**

# sql - 如何在 SQL Server 中按月计算两个日期之间的天数？

> ID：12447288
> 
> 赞同：-3
> 
> 时间：2012-09-16T13:35:18.707
> 
> 标签：sql, sql-server

我在 SQL 服务器中有两个日期在两个月内重叠我想找出每个月重叠的天数。例如：

```
Start date is : 26-Sep-2012
End Date is : 10-Oct-2012

Sept- 5 days
October - 10 days 
```

以及每个月的日期列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:09:21.913

```
declare @start datetime;
declare @end datetime;
set @start = '20120926';
set @end = '20121010';

SELECT (DAY(DATEADD (m, 1, DATEADD(d, 1 - DAY(@start), @start))-1)
        - DAY(@start) + 1) AS DaysLeftStart,
        DAY(@end) AS DaysEnd 
```

小提琴：[http ://sqlfiddle.com/#!3/d41d8/4441/0](http://sqlfiddle.com/#!3/d41d8/4441/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:44:13.053

```
DECLARE @start DATETIME, @end DATETIME;

SELECT @start = '20120926', @end = '20121010';

;WITH c(d) AS
(
  SELECT TOP (DATEDIFF(DAY, @start, @end)+1)
    DATEADD(DAY, ROW_NUMBER() OVER (ORDER BY name)-1, @start)
    FROM sys.all_columns
) 
SELECT 
  [date] = DATEADD(MONTH, DATEDIFF(MONTH, 0, d), 0), 
  [days] = COUNT(*)
FROM c GROUP BY DATEDIFF(MONTH, 0, d)
UNION ALL SELECT d, NULL FROM c; 
```

结果：

```
date                        days
-----------------------     -----
2012-09-01 00:00:00.000     5
2012-10-01 00:00:00.000     10
2012-09-26 00:00:00.000     NULL
2012-09-27 00:00:00.000     NULL
2012-09-28 00:00:00.000     NULL
2012-09-29 00:00:00.000     NULL
2012-09-30 00:00:00.000     NULL
2012-10-01 00:00:00.000     NULL
2012-10-02 00:00:00.000     NULL
2012-10-03 00:00:00.000     NULL
2012-10-04 00:00:00.000     NULL
2012-10-05 00:00:00.000     NULL
2012-10-06 00:00:00.000     NULL
2012-10-07 00:00:00.000     NULL
2012-10-08 00:00:00.000     NULL
2012-10-09 00:00:00.000     NULL
2012-10-10 00:00:00.000     NULL 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T13:45:34.827

[在这里](http://weblogs.sqlteam.com/dang/archive/2010/07/19/calendar-table-and-datetime-functions.aspx)，您可以找到有关创建日历表的一些详细信息。您可以使用它来执行这样的查询：

```
SELECT CalendarMonth, count(*) day_num 
FROM dbo.Calendar 
WHERE CalendarDate  between @start_date and @end_date; 
```

# objective-c - 将 Delegate 设置为放置在 Xib 中的 NSImageView 的子类

> ID：12447290
> 
> 赞同：1
> 
> 时间：2012-09-16T13:35:21.380
> 
> 标签：objective-c, xcode, macos, cocoa, delegates

我有一个`NSImageView`子类，用于将文件拖放到我的应用程序中。

为此，我创建了一个子类`NSImageView`并将其`NSImageView`拖到我的 XIB 上，然后将 XIB`NSImageView`对象的类设置为我的自定义子类。

一切都适用于拖放，我知道拖放后我有正确的文件。

当我想根据拖入的文件更新 MainViewController 上的文本字段时，问题就出现了。

我创建了以下子类和协议

```
#import <Cocoa/Cocoa.h>
#import <Quartz/Quartz.h>

@protocol PDFDraggedIntoWell <NSObject>
@required
-(void)PDFDraggedIntoWellWithURL:(NSURL*) importedURL;

@end

@interface DragAndDropImageView : NSImageView

@property (strong) id <PDFDraggedIntoWell> delegate;

@end 
```

然后在子类的实现中，我尝试调用委托方法

```
-(void) finishedDragginInFileWithURL:(NSURL*) importedURL{
    if( self.delegate != nil && [ self.delegate respondsToSelector: @selector(PDFDraggedIntoWellWithURL:)]) {
        [self.delegate performSelector:@selector(PDFDraggedIntoWellWithURL:) withObject:importedURL];
    }
} 
```

我遇到的问题是如何分配代表。从 XIB NSImageView 到我的 MainviewController 我连接了一个`IBOutlet`

```
@property (weak) IBOutlet DragAndDropImageView *draggedFileImageView; 
```

我已经声明我的 ViewController 将接收委托

```
@interface MyMainUIViewController ()<PDFDraggedIntoWell> 
```

实施了适当的方法

```
-(void) PDFDraggedIntoWellWithURL:(NSURL *)importedURL{   } 
```

现在我已经尝试在各个地方将委托分配给自我（在`viewDidLoad`- 由于视图正在加载到 XIB 中，因此不会被调用？？）以及

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
```

但我得到的只是调试时委托仍然为零。

我究竟做错了什么？谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:51:28.917

如果您使用的是 xibx，`initWithCoder`则调用该方法进行初始化。在那里设置你的代表。

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 10)];
        myView.delegate = self;
    }
    return self;
} 
```

或者，通过将 wile 按住 ctrl 从文件所有者拖动到您的视图，通过界面构建​​器设置委托。像这样：
![在此处输入图像描述](../Images/6625d5c51823bb645eaaa48a00a81d3c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:10:43.930

我能够将委托添加到 awakefromnib(in mymainviewcontroller) 方法中，现在一切正常。谢谢

# perl - 如何在 Perl 中使用 BOM 编码检测 UTF8

> ID：12447298
> 
> 赞同：3
> 
> 时间：2012-09-16T13:36:12.273
> 
> 标签：perl, file, comparison

我有一个简单的 Perl 脚本，可以比较两个文件。结果我用 UTF8 BOM 编码写入不同的文件。为了将文本保存在 BOM 文件中，我将 chr(65279) 打印到结果文件的开头。有时输入文本在文本的乞求中已经包含 BOM 字符，而我的脚本又打印了一个。

**问题是：**我如何才能解决它不打印此 BOM 字符两次。

请参阅下面我的 Perl 代码的文本：

```
use strict;
use warnings;
use List::Compare;
use Cwd 'abs_path';
use open ':encoding(utf8)';
use open IO => ':encoding(utf8)';

open F, "<$ARGV[0]" or die $!;
open S, "<$ARGV[1]" or die $!;
my @a=<F>;
my @b=<S>;
close F;
close S;

my $lc = List::Compare->new(\@a, \@b);

my @intersection = $lc->get_intersection;
my @missing = $lc->get_unique;
my @extra = $lc->get_complement;

open EXTRA, ">".$ARGV[2]."file_extra.txt" or die("Unable to open the file");
open MISSING, ">".$ARGV[2]."file_missing.txt" or die("Unable to open the file");
open SUBTRACTED, ">".$ARGV[2]."file_subtr.txt" or die("Unable to open the file");

#Turn on UTF-8 BOM support
print EXTRA chr(65279);
print MISSING chr(65279);
print SUBTRACTED chr(65279);

print MISSING @missing;
print EXTRA @extra;
print SUBTRACTED @intersection;

close MISSING;
close EXTRA;
close SUBTRACTED; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T14:19:12.500

在读取文件内容时剥离它（在您的示例中适用`s/^\x{FEFF}//`于`$a[0]`and `$b[0]`），然后在结果时将其添加到输出前面`print`，如果您真的需要它，但更好的是 - 根本不要将其打印回来，因为它没用对于 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-09T23:47:52.227

如果您有双 BOM，这可能是因为一个 BOM 来自您的输入。所以你应该在处理之前清理你的输入：

`s/^\x{FEFF}/ for $a[0], $b[0];`

# ios - 应用程序是否应该请求 iCloud 使用许可？

> ID：12447299
> 
> 赞同：4
> 
> 时间：2012-09-16T13:36:17.890
> 
> 标签：ios, icloud, user-permissions

当我们需要获得访问 GPS 坐标的权限时，系统会自动为我们执行此操作。与应用内购买类似，该框架会自动确认用户是否真的想购买某些东西。

iCloud怎么样？

我正在开发一个应用程序来拍照，我正在考虑将 iCloud 添加到它。为什么不 - 如果用户可以在他/她拥有的任何设备上访问他/她的相册，那就太酷了。但是每张照片都有很大的尺寸。200 张照片和 1 GB 消失了。

你的方法是什么？您是否要求用户使用 iCloud 或本地存储，或者仅使用 iCloud（如果可用）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T16:53:11.010

您无需询问用户。

由于您只存储用户生成的内容，因此没有问题。

请记住，用户可以从系统设置中启用/禁用 iCloud，并且可以禁用应用程序的数据存储。
他还可以删除每个应用程序的用户数据。

如果您希望您的用户能够在本地存储和 iCloud 存储之间进行选择，恕我直言，最好的方法是检测 iCloud 是否可用，使用`NSFileManager`方法，然后，如果它打开，则决定您的应用程序是否应默认同步数据。
我想这个设置应该默认开启，因为这是 iCloud 用户的预期行为，但这取决于你

无论如何，不​​要通过烦人的弹出窗口询问用户。第一次启动很烦人，有些用户可能不理解。
如果您需要提供一种配置方式，请将设置包添加到您的应用程序，以便用户能够配置它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-11T21:37:19.490

看起来苹果可能已经更新了他们的文档，因为其中一些答案。虽然我个人认为问起来可能有点刺耳（而且不知道我看到很多应用程序这样做），但 Apple 确实建议在他们的 iCloud 设计指南中这样做。他们甚至为您提供警报本身的代码：

```
if (currentiCloudToken && firstLaunchWithiCloudAvailable) {
    UIAlertView *alert = [[UIAlertView alloc] 
    initWithTitle: @"Choose Storage Option"
          message: @"Should documents be stored in iCloud and available on all your devices?"
         delegate: self
cancelButtonTitle: @"Local Only"
otherButtonTitles: @"Use iCloud", nil];
// and
     [alert show];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:47:23.427

如果用户使用您的应用创建或上传数据并希望在另一台 iOS 或 OSX 设备上看到相同的数据，那么使用 iCloud 是有意义的。

不建议将 iCloud 用于应用程序私有数据，因为您将在未经批准的情况下占用用户空间。

至于提示，您可以询问用户是否要同步他们的数据，但我发现这甚至比默认同步更令人困惑，因为多个设备可能在没有同步的情况下工作并且用户不了解您的应用程序可能会处理合并。

如果空间不足，用户可以在设置中从 iCloud 中删除文件。所以没什么大不了的。

# c++ - 为什么我们需要强制转换变量而不分配它？

> ID：12447304
> 
> 赞同：0
> 
> 时间：2012-09-16T13:36:32.640
> 
> 标签：c++, variables, casting, void

> **可能重复：**
> [为什么将未使用的值强制转换为 void？](https://stackoverflow.com/questions/4647665/why-cast-an-unused-value-to-void)

对于这个 C++ 代码：

```
MyClass::myFunc(int val)
{
//some code
(void)val;
//somecode
} 
```

为什么我们需要将 val 强制转换为 void 而不分配给另一个变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:37:47.077

这样做是为了关闭编译器，警告未使用的变量。

# mysql - 我可以在单个 mysql 命令中设置两次数据字段值吗

> ID：12447306
> 
> 赞同：2
> 
> 时间：2012-09-16T13:36:41.807
> 
> 标签：mysql, sql, sql-update

假设我的表配置文件中有一个数据字段 education，现在我想更新 education='01' 早期教育是 'BA' ，类似地 education='02' 教育是 'MD'

所以我可以像这样完成这个任务

```
update profile set education='01' where education='BA';
update profile set education='02' where education='MD'; 
```

我的问题是我可以只用一个命令来完成这项任务吗

```
 update profile set education='01' where education='BA' and set education='02' where education='MD'; 
```

这种语法是错误的，请告诉我这是否可能以及如何？如果**不可能，也请让我知道...**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T13:39:45.080

您可以`CASE`在`SET`子句中使用语句，但要小心包含一个`ELSE`将列设置为其当前值的 case——否则，两个 case 不匹配的行将被设置为`NULL`.

```
UPDATE profile
SET education = 
  CASE
    WHEN education = 'BA' THEN '01'
    WHEN education = 'MD' THEN '02'
    /* MUST include an ELSE case to set to current value, 
       otherwise the non-matching will be NULLed! */
    ELSE education
  END 
```

# ios - 可靠而优雅地处理所有网站一次性根静态文件，如 favicon.ico？

> ID：12447314
> 
> 赞同：0
> 
> 时间：2012-09-16T13:37:41.650
> 
> 标签：ios, django, heroku, web, gunicorn

也许我遗漏了一些东西（我希望我是！），但是必须处理浏览器请求的一次性根网站文件（例如 favicon.ico 和 apple-touch-icon 之类的东西）似乎非常笨拙-precomposed.png（在 iPad 上）。现在，每当我遇到其中一个我没有明确提供文件的情况时，我都会收到 500 服务器错误。

我的问题：

1.  是否有我的 webapp 应该处理的所有主要浏览器的所有此类文件的最新列表？

2.  作为故障保险，有没有办法让这些文件中的任何一个都无声地失败，即在 webapp 继续以快乐的方式运行时不会出现 500 服务器错误，只需使用空白图标或其他什么？

我正在使用 gunicorn 在 Heroku 上运行 Django 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:19:59.117

我从来没有从无效的 url 中得到 500 错误，因为我使用 STATIC_URL 和基于类的 RedirectView

通常我有一个专门用于此的应用程序，并将其包含在根 urls.py 中

```
#urls.py
include('oneoff.urls', name='oneoff')` 
```

和

```
#oneoff/urls.py
urlpatterns = ( '',
    url(r'favicon.ico$',
        RedirectView.as_view(url=urlparse.urljoin(settings.STATIC_URL, "img/favicon.ico")),
        name="favicon"
    ),
    url(r'icon-precomposed.png',
        RedirectView.as_view(url=urlparse.urljoin(settings.STATIC_URL, "img/iphone/icon.png")),
        name="iphone"
    ),
) 
```

然后在模板中

```
{% load url from future %}
<link rel="favicon" href="{% url 'oneoff:favicon' %} /> 
```

# ios - 从http切换到https。无效证书

> ID：12447318
> 
> 赞同：7
> 
> 时间：2012-09-16T13:38:19.213
> 
> 标签：ios, objective-c, ssl, https, afnetworking

我有一个连接到我的家庭路由器网络界面的应用程序。我想将其转换为使用 https 而不仅仅是 http。我最初使用`ASIHttpRequest`的是 ，但由于它不再受支持，我正在切换到`AFNetworking`. 问题是，每当我尝试连接时，都会收到以下**错误**消息：

```
_block_invoke_0220 [Line 243] ERROR: Error Domain=NSURLErrorDomain Code=-1202 "The certificate for this server is invalid. You might be connecting to a server that is pretending to be “192.168.1.1” which could put your confidential information at risk." UserInfo=0x9792ad0 {NSErrorFailingURLStringKey=https://192.168.1.1/Info.live.htm, NSLocalizedRecoverySuggestion=Would you like to connect to the server anyway?, NSErrorFailingURLKey=https://192.168.1.1/Info.live.htm, NSLocalizedDescription=The certificate for this server is invalid. You might be connecting to a server that is pretending to be “192.168.1.1” which could put your confidential information at risk., NSUnderlyingError=0xa6a3560 "The certificate for this server is invalid. You might be connecting to a server that is pretending to be “192.168.1.1” which could put your confidential information at risk.", NSURLErrorFailingURLPeerTrustErrorKey=< SecTrustRef: 
```

如果我导航到 safari 的 url，我会收到一条消息，说 Safari 无法验证身份......我必须单击继续继续。我怎样才能做到这一点？不幸的是，我对 ssl 或 https 一无所知。这是我目前正在使用的代码：

```
NSString *urlString = @"https://192.168.1.1/";
NSURL *url = [NSURL URLWithString:urlString];

// Set authorization
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
[httpClient setAuthorizationHeaderWithUsername:user password:pass];

NSURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"Info.live.htm" parameters:nil];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSString *responceString = [operation responseString];
    //        NSLog(@"%@",responceString);
    if ([self parseInfoLive:responceString])
        [[NSNotificationCenter defaultCenter] postNotificationName:@"downloadsComplete" object:nil];
}
                                 failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                     NSLog(@"ERROR: %@",error.description);
                                 }];

[operation start]; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-16T13:46:41.137

要绕过主机证书的有效性检查，请添加以下代码。

首先为已在 SDK 中但未公开的 setter 方法添加一个接口：

```
@interface NSURLRequest(Private)
+(void)setAllowsAnyHTTPSCertificate:(BOOL)inAllow forHost:(NSString *)inHost;
@end 
```

现在，每当您呈现新请求时，调用该设置器：

```
[NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[inURL host]]; 
```

**警告**

**不要将此代码用于生产，但仅在证书尚未批准/提交/安装的情况下开发应用程序时使用。典型的情况是使用未安装受信任证书的开发服务器。使用此代码将使您的应用程序无法通过 iTunes 分发，因为它使用私有 API 方法。**

为了确保在生产环境中一切顺利，您必须为您的主机获取受信任的 SSL 证书。有各种权威公司提供这样的东西。要提到至少一个（还有更多），您可以使用[GoDaddy](http://www.godaddy.com/compare/gdcompare2_ssl.aspx?isc=sslfgeu16&currencytype=EUR&ef_id=UFXZawAARXb7hA9W:20120916135139%3as)。

* * *

更新（2013 年 5 月 31 日）

[AFNetworking 已更新](https://github.com/AFNetworking/AFNetworking/pull/204)以支持开箱即用的无效证书，而无需使用任何私有 API。向彼得·斯坦伯格致敬！

要启用该功能，最方便的解决方案是将以下内容添加到您的前缀标头 (.pch) 中：

```
#ifdef DEBUG
#define _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_
#endif 
```

再一次强调，您应该避免在生产代码中启用该功能 - 您几乎会使 SSL 连接的整个点无效并使它们易受攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T12:48:40.367

Apple 文档中的此 URL 可能会有所帮助[检查此链接](https://developer.apple.com/library/ios/technotes/tn2232/_index.html)

在上述文件中阅读简介部分。 ![Apple 文档的屏幕截图](../Images/1264f80c438547cbfe40741ef36989a6.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:11:55.400

我不熟悉 AFNetworking，但这里有一个解决方案[可以](https://stackoverflow.com/questions/11573164/uiwebview-to-view-self-signed-websites-no-private-api-not-nsurlconnection-i/15074358#15074358)解决您看到的错误。众所周知，Till 的回答是让您无法将应用提交到应用商店。

# android - 在服务中取消注册广播

> ID：12447322
> 
> 赞同：0
> 
> 时间：2012-09-16T13:38:53.083
> 
> 标签：android, service, broadcastreceiver

异步获取播放列表后，我正在使用本地广播开始通过我的服务播放音乐。它运作良好，但我对如何以及何时取消注册广播接收器有一些疑问。在我的实现中，

```
unregisterReceiver(BroadcastReceiver); 
```

在 onDestroy() 中调用。

所以我对此有两个问题：

*   即使应用程序崩溃，我是否保证会调用 onDestroy ？
*   一旦广播接收器在内存/cpu 方面不再有用时，取消注册它是否有用？这个特定的接收器在应用程序的每次执行过程中最多只需要一次（播放列表可以在服务启动之前加载，在这种情况下我不需要广播）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:41:23.740

*   不，你永远得不到保证。但是您可以向自己*保证*，在您的代码中检查/捕获和处理每个错误。
*   它可能很有用。如果它没有任何用途，请取消注册，这可能有什么问题？

# c++ - 将两个整数相除以产生浮点结果

> ID：12447325
> 
> 赞同：83
> 
> 时间：2012-09-16T13:39:31.327
> 
> 标签：c++, precision, integer-division

> **可能重复：**
> [为什么我不能从两个被分割的整数中返回一个双精度数](https://stackoverflow.com/questions/7571326/why-cant-i-return-a-double-from-two-ints-being-divided)

即使我尝试将输出放入浮点数中，我的 C++ 程序也会截断整数除法的输出。如何在将变量（a 和 b）保持为整数的同时防止这种情况发生？

```
user@box:~/c/precision$ cat precision.cpp
#include <iostream>
#include <iomanip>
using namespace std;

int main()
{
  int a = 10, b = 3;
  float ans = (a/b);
  cout<<fixed<<setprecision(3);
  cout << (a/b) << endl;
  cout << ans << endl;
  return 0;
}

user@box:~/c/precision$ g++ -o precision precision.cpp 
user@box:~/c/precision$ ./precision 
3
3.000 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-09-16T13:41:13.027

将操作数转换为浮点数：

```
float ans = (float)a / (float)b; 
```

# ruby-on-rails - 访问站点问题

> ID：12447327
> 
> 赞同：0
> 
> 时间：2012-09-16T13:39:52.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, refinerycms, heroku-san

问题是有时我无法访问我的网站。我使用 Ruby on Rails 3、Refinery CMS 开发了我的网站并将其部署到 heroku。我从 domainsite.com 购买了该域名。我总是可以使用 heroku 后缀访问我的网站，即 mysite.herokuapp.com。当我想在地址栏中输入 mysite.com 访问我的网站时，有时会遇到问题。这种行为真的很奇怪，因为在没有任何更改的情况下，我突然可以访问该站点。而且我无法访问我的网站，因为我使用 www。字首。这是我肯定想解决的问题。

有谁知道所有这些问题的原因可能在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:06:40.603

问题出在我的 domainsite.com 配置中。我必须添加 A 记录并将其指向与 mysite.com 相同的 IP 地址

# javafx - 如何在 TitledPane 标题中设置 ImageView 的位置？

> ID：12447330
> 
> 赞同：1
> 
> 时间：2012-09-16T13:40:07.827
> 
> 标签：javafx, javafx-2

我已经解决了将图标图像带入这样的标题的问题`TitledPane`：

```
 <TitledPane fx:id="x2" text="Strukturen">
            <graphic>
                <ImageView >
                        <image>
                            <Image url="@/de/myres/icons/arrow-out.png" />
                        </image>
                </ImageView>
            </graphic>
            <content>
                    <AnchorPane id="Content" minHeight="0.0" minWidth="0.0"
                        prefHeight="180.0" prefWidth="200.0" />
            </content>
            </TitledPane> 
```

如下所示：

![带图标的 TitledPane 标题](../Images/90d504929b56fffb011473b169d78509.png)

如您所见，当折叠箭头和此图标直接并排显示时，它看起来不是很好。

我怎样才能将图标放在标题栏的右侧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:23:20.653

您可以将 TitledPane 文本留空，并将图标节点设置为一个 HBox，其中包含左侧的 Label 和右侧的 ImageView。

# ruby-on-rails - 让 Bundler 从 gem/s 中的 Gemfile/s 解析和加载依赖项，并加载 :path

> ID：12447332
> 
> 赞同：2
> 
> 时间：2012-09-16T13:40:26.137
> 
> 标签：ruby-on-rails, ruby, gem, bundler, rails-engines

这是我目前的情况：

我正在研究 Rails 引擎（“awesome_engine”）。我通过主机应用程序进行所有开发，即使用 :path 参数将此引擎指定为 Gemfile 中的依赖项的 Rails 应用程序

```
 gem "awesome_engine", :path => "awesome_engine" 
```

这很好用 - 引擎 gem 文件夹相对于主机应用程序的根目录位于“awesome_engine”下。然而，“awesome_engine”引用了一个也在开发中的 gem，“awesome_core”。awesome_engine/Gemfile 因此读取：

```
 gem "awesome_common", :path => "../awesome_core" 
```

这个设置的问题似乎是 Bundler 在为主机 rails 应用程序创建应用程序包时没有在 awesome_engine/ 中寻找 Gemfile，它只从“awesome_engine”的 gemspec 中读取依赖项，这对于任何单个 gem 都很好您希望在其“未打包”状态下加载，当您想同时处理相关 gem 的图表时，这不是很好

我是吗

a) 试图咬掉比我能咀嚼的更多的东西，应该在主机应用程序的 Gemfile 中转储“awesome_core”，而它正在开发中并对此感到满意（我不会:-)）

b) 遗漏了一些关于如何让 Bundler 执行此操作的琐碎内容

c) 以上都不是（请注明：***_* __ *_* ____**）

谢谢！安德拉斯

ps：我知道 Bundler 不会解析“awesome_engine/Gemfile”，因为 a）如果我在其中放入垃圾包，则主机应用程序中的捆绑安装仍然可以正常运行 b）该文件中的其他依赖项都不会最终出现在主机应用程序应用程序包中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:05:57.407

因此，当您通过（当前项目的）Gemfile 指定 gem 时，假定您正在引用具有明确定义的依赖项的东西。这意味着应该有一个有效的 .gemspec 文件来命名这些依赖项。但这你已经知道了。

我对 c) 的建议是创建你的 gems，用`bundle gem`它来设置 gem 的方式，即它的 Gemfile 的信息是从 .gemspec 文件中提取的。看看[http://gembundler.com/v1.2/bundle_gem.html](http://gembundler.com/v1.2/bundle_gem.html)并生成一个测试 gem 并阅读它的源代码，这很清楚。

我希望这能解决你的问题。

# gstreamer - 使用 gstreamer 从网络摄像头录制音频+视频

> ID：12447333
> 
> 赞同：0
> 
> 时间：2012-09-16T13:40:28.187
> 
> 标签：gstreamer

我在尝试将网络摄像头中的音频+视频录制到文件时遇到问题。如果我使用`videotestsrc`并且`autoaudiosrc`我得到了一切正确（读作我得到一个文件，其中包含从网络摄像头的麦克风录制的音频和测试视频图像），但只要我`videotestsrc`用`v4l2src`（或`autovideosrc`）替换我就会得到`Error starting streaming on device '/dev/video0'`.

我正在使用的命令：

`gst-launch-0.10 videotestsrc ! queue ! ffmpegcolorspace! theoraenc ! queue ! oggmux name=mux autoaudiosrc ! queue ! audioconvert ! vorbisenc ! queue ! mux. mux. ! queue ! filesink location = test.ogg`

为什么会这样？我究竟做错了什么？

编辑：

事实上，像这样简单的事情

`gst-launch-0.10 autovideosrc ! autovideosink autoaudiosrc ! autoaudiosink`

失败并出现相同的错误`(Error starting streaming on device '/dev/video0')`

替换`autovideosrc`为`videotestsrc`给我测试图像+真实音频。

替换`autoauidosrc`给`audiotestsrc`我真实的图像+测试音频。

我开始认为这是我的网络摄像头的某种限制。那可能吗？

编辑：

GST_DEBUG=2 在此处登录：http: [//pastie.org/4755009](http://pastie.org/4755009)

编辑2：

GST_DEBUG="v4l2*:5" (gstreamer 0.10): [http://pastie.org/4810519](http://pastie.org/4810519)

GST_DEBUG="v4l2*:5" (gstreamer 1.0): [http://pastie.org/4810502](http://pastie.org/4810502)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:54:17.567

请做一个 `gst-launch-1.0 v4l2src ! videoscale ! videoconvert ! autovideosink` 运行吗？如果不重复 `GST_DEBUG="v4l2*:5" GST_DEBUG_NO_COLOR=1 gst-launch 2>debug.log ...` 并检查日志是否有错误。您可能还想运行 v4l-info（在 debian/ubuntu 下安装 v4l-conf）并报告您的相机支持的格式。

# php - phpgmailer突然停止工作

> ID：12447335
> 
> 赞同：1
> 
> 时间：2012-09-16T13:40:31.367
> 
> 标签：php, phpmailer

我曾经`phpgmailer`发送电子邮件，它工作顺利。今天我测试了我的项目，但它现在无法正常工作。

```
 <?php                  
    require_once('class.phpgmailer.php');
    $mail = new PHPGMailer();
    $mail->Username = 'username@gmail.com';
    $mail->Password = '********';
    $mail->From = 'username@gmail.com';
    $mail->FromName = "<blah>";
    $mail->Subject = 'something';
    $mail->AddAddress('xyz@gmail.com');

    $mail->Body =  "Hello Sir"."\n"."     
    Your Password is : ."."";
    $mail->Host = 'smtp.gmail.com'; 
    $mail->Port = 465;
    $mail->Send();

    if(!$mail->Send())
            {

       echo 'Message could not be sent.' ;
       echo 'Mailer Error: ' . $mail->ErrorInfo;

       exit;
            }
       echo 'Message has been sent'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:12:49.627

我建议您下载[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list)并尝试以下代码：

```
 require("phpmailer/class.phpmailer.php");

    $mail = new PHPMailer();
    $mail->IsSMTP();
    $mail->SMTPAuth = true;
    $mail->Host     = "ssl://smtp.gmail.com";
    $mail->Port     = 465;
    $mail->Username = "from@gmail.com";
    $mail->Password = "****";
    $mail->FromName = "Sender name";
    $mail->Subject  = "test";
    $mail->Body     = "Test body";
    $mail->AddAddress('sender@mail.com');
    if(!$mail->Send()){
        echo "Mailer Error: " . $mail->ErrorInfo;
    }else{
        echo "Message has been sent";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T14:34:05.640

请确保：

*   `$mail->Username`等于`$mail->From`，并且是正确的
*   `$mail->Password`是正确的
*   `$mail->FromName`不包含“<”和“>”字符；试试看嘛`$mail->FromName = 'Test';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:56:00.457

@goose 是对的，删除第一个`$mail->Send()`并将其留在 if 语句中。如果`From`地址与用户名电子邮件相同，那么您也不需要它，因为它会从您的 gmail 帐户中获取。

试试看它是否有效。

编辑：尝试添加以下内容；

```
 $mail->IsSMTP(); // enable SMTP
    $mail->SMTPDebug = 0;  // debugging: 1 = errors and messages, 2 = messages only
    $mail->SMTPAuth = true;  // authentication enabled
    $mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for GMail
    $mail->Host = 'smtp.gmail.com';
    $mail->Port = 465; 
    $mail->Username = 'email@gmail.com';  
    $mail->Password = 'password'; 
```

试试看，如果有错误，那么它应该会给你更多的细节。

EDIT2：如果这不起作用，那么我建议尝试 PHPMailer 而不是 PHPGmailer - 并按照此处的教程进行操作：[http ://www.web-development-blog.com/archives/send-e-mail-messages-via-smtp -with-phpmailer-and-gmail/](http://www.web-development-blog.com/archives/send-e-mail-messages-via-smtp-with-phpmailer-and-gmail/)

# tfs - 无法使用 TFS API 设置 WorkItem 状态？

> ID：12447343
> 
> 赞同：1
> 
> 时间：2012-09-16T13:41:53.583
> 
> 标签：tfs, tfs-sdk

我正在尝试设置`State`测试用例工作项的属性值。我正在使用 TFS API 和 C# 代码创建。

`Save()`当我使用方法保存测试用例时，它会引发错误。我已经调用`Validate()`了工作项的方法，并且`ArrayList`显示我尝试分配的值是无效状态。

```
testCase.State = TestPointState.Ready.ToString();

ArrayList result = testCase.WorkItem.Validate();
if (!testCase.WorkItem.IsValid())
{
    //this block executes
} 
```

当我手动打开 MTM 以查看现有工作项的不同状态值是什么时，我发现`READY`和`DESIGN`. 这就是我尝试分配`TestPointState.Ready`枚举的原因。我尝试`READY`直接在该语句中分配字符串，但在保存测试用例时仍然存在相同的异常。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:56:09.147

可能在设置状态时，另一个字段的输入无效。例如：当您从 Ready 更改为 Design 时，可能需要您选择 AssignTo 人是谁，因此您还需要填充这些字段。在设置如下状态后，您可以使用 Validate 方法获取无效字段列表。

```
ArrayList invalidFields = newWI.Validate(); 
```

# java - 相当于 Joda 时间的 DAY_OF_WEEK_IN_MONTH

> ID：12447344
> 
> 赞同：3
> 
> 时间：2012-09-16T13:42:14.657
> 
> 标签：java, calendar, jodatime

乔达时间中 Calendar.DAY_OF_WEEK_IN_MONTH 的等价物是多少

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:27:00.050

我使用 Joda-Time 很长时间了，我一直在寻找这个等价物。但是 Joda API 中没有这个等价物。

而不是这个，ypu 会结合 params`dayOfWeek`和`dayOfMonth``weekOfMonth`

# cocos2d-iphone - box2d 检测碰撞但避免物理结果

> ID：12447345
> 
> 赞同：0
> 
> 时间：2012-09-16T13:42:39.090
> 
> 标签：cocos2d-iphone, box2d, physics, collision

我正在我的 iPhone（带有飞机）上制作一个“射击他们”游戏，我想检测我的飞机和敌人之间的碰撞，但没有在他们身上应用物理。

如果我刚刚检测到与 ContactListener 的碰撞，我可以降低飞机的寿命，但它会在碰撞后反弹。

如果我将我的敌人和我的飞机放在同一个fixture groupIndex 上，就不会发生碰撞，我将无法降低我的飞机的寿命。

我发现了类似我的问题，但仍然没有答案。你能帮助我吗 ？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:29:03.263

我找到诀窍了！

我所要做的就是将飞机的固定装置设置为传感器。

```
myPlaneFixtureDef.isSensor = YES; 
```

# php - 具有多个值的一个字段的大规模 sql 更新？

> ID：12447347
> 
> 赞同：0
> 
> 时间：2012-09-16T13:42:46.687
> 
> 标签：php, mysql, sql-update

我有一个看起来像这样的数组：

```
array(
    [0] => 1
    [1] => 2
    [2] => 4
    [3] => 3
) 
```

目前我正在遍历数组并按照以下方式运行单个更新

```
foreach($array as $position => $id){
   //query = update users set order = ($position+1) where id = $id
} 
```

显然不是实际的代码，但它得到了重点，

如果我的列表中有 1000 个项目，那就是 1000 个查询，

我想知道是否有一种方法可以在一个查询中完成所有这些操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T13:50:37.530

您可以使用 MySQL 的 case 语句。我不确定它是否会更快，但它是如何工作的：

```
$query = 'UPDATE users SET order = CASE id ';
foreach($array as $position => $id) {
    $query .= 'WHEN '.$id.' THEN "'.($position+1).'" ';
}
$query .= 'ELSE order ENDCASE'; // leave order the same if the id doesn't match the array
// run $query... 
```

[MySQL CASE 语法](http://dev.mysql.com/doc/refman/5.0/en/case.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:53:04.213

这实际上是可能的。您可以使用循环构建查询字符串以适合此[示例](http://www.karlrixon.co.uk/writing/update-multiple-rows-with-different-values-and-a-single-sql-query/)

然后执行你的查询；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:56:32.427

假设`id`是主键或唯一键，您可以这样做：

```
$tmp = Array();
foreach($array as $position=>$id) {
    $tmp[] = "(".$id.",".($position+1).")";
}
$query = "INSERT INTO users (id,order) VALUES ".implode(",",$tmp)
    ." ON DUPLICATE KEY UPDATE order=VALUES(order)"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T13:56:49.503

使用“in”运算符 - 更新用户 set order = ($position+1) where id in

# python - 使用 wx.Config 时遇到困难

> ID：12447353
> 
> 赞同：0
> 
> 时间：2012-09-16T13:43:57.720
> 
> 标签：python, user-interface, wxpython, python-2.7, configuration-files

我的问题是我想为应用程序制作一个配置文件，但事情并不像接缝那么简单。所以我看过一个教程，其中一个配置文件包含宽度和高度，等号后面的值可以被检索并用于建立框架的大小。去过那里，做到了，一切正常。奇怪的是，这个接缝只适用于一些关键词，就像我在配置文件中使用的一样，还有一个名为 freq 的参数，它没有像使用宽度、高度参数那样检索它的值。

例如，如果我有一段这样的代码：

```
 self.cfg = wx.Config('myconf')
   wid = self.cfg.ReadInt('width')
   hei = self.cfg.ReadInt('height')
   freq = self.cfg.ReadInt('frequency')
   print wid, hei, freq 
```

在 myconf 中的哪个位置

```
 width=400
   height=250
   frequency=3000 
```

所以它显示高度、宽度但不显示频率，至于频率它只给出 0，这发生在我在配置文件中使用的任何其他词。我猜测配置文件中只能使用某些关键字，因此在使用 wxPython 时可以识别它们。

如果是这样，我在哪里可以获得可以用于制作配置文件的那些键的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:39:37.820

您可以做的是自己阅读这些行：

```
F = open('myconf', 'r')
for line in F.read().split('\n'):
    switchres = { 'frequency': print(line.split('=')[1]),
                            # add the rest
                            }
    switchres[line.split('=')[0]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:38:12.763

就个人而言，我建议使用Python 附带的[ConfigParser或](http://www.doughellmann.com/PyMOTW/ConfigParser/)[ConfigObj](http://www.blog.pythonlibrary.org/2010/01/01/a-brief-configobj-tutorial/)（我更喜欢它）。如果您尝试保存小部件属性/设置，那么您可能还想查看[PersistenManager](http://xoomer.virgilio.it/infinity77/Phoenix/lib.agw.persist.persistencemanager.PersistenceManager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T08:24:01.817

wxPython 是 wxWidgets 的包装器（或绑定器），它是一个 C++ 库。

因此 wx.Config 或 wx.FileConfig 适用于没有特定方法处理这些类型的配置文件的 C++（仍然 wx.Config 旨在在平台之间移植）。

在 Python 中，您已经拥有 ConfigParser 模块，但请记住：

*   一些 wxPython 类可以与 wx.Config 一起使用，例如 wx.FileHistory，
*   如果您想使用特定于平台的方式来存储配置（如 Windows 中的注册表），请使用 wx.Config。

# failover - 如何在 Appscale 上重新启动崩溃的节点？

> ID：12447356
> 
> 赞同：1
> 
> 时间：2012-09-16T13:44:10.743
> 
> 标签：failover, appscale

我有一个用于 5 个 appscale 虚拟机的简单同构（一个控制器，多个服务器）集群部署。在测试中，它们在我为我想要运行的 appengine 进程数设置的最大和最小边界内运行。然后，在负载下，一个节点出现故障。其余的继续运行。我单独的负载均衡器处理得很好。我很高兴裁员给了我韧性。好的。但是我如何让那个坏节点重新发挥作用呢？

如果快速回答是“不支持”，那么我真正的问题是：我将如何破解这个，使用 cassandra 作为我的数据存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:43:44.773

有一个命令`appscale-add-instances`会为你处理这个问题。[这里](https://github.com/AppScale/appscale/wiki/Adding-Machines-to-an-AppScale-Deployment)有更多文档，但摘要是：

1.  确保您的新机器安装了与当前运行的机器相同的 AppScale 版本。
2.  编写一个包含其 IP 地址的 YAML 文件。添加单个节点的示例是：

    内存缓存：192.168.10.3

    taskqueue_slave：192.168.10.3

    应用引擎：192.168.10.3

这表明我们有一台机器运行 memcache、taskqueue 和 appengine 服务。

1.  运行`appscale-add-keypair --add_to_existing --ips your-yaml-file.yaml`以在新节点上同步 SSH 密钥。如果在 Amazon EC2、Google Compute Engine 或 Eucalyptus 上运行，请跳过此步骤。
2.  运行`appscale-add-instances --ips your-yaml-file.yaml`以添加新节点！

* * *

旧答案（为后代保存，以及我们如何实现此支持的演练）：

所以快速回答是“不支持”。我看到添加崩溃节点的情况与添加新节点的情况非常相似，因此破解 AppScale 以使其工作的方法如下：

1.  查看 AppScale 工具（[github 上的 AppScale/appscale-tools](https://github.com/AppScale/appscale-tools)）并在 bin 中创建一个名为 的新命令`appscale-add-nodes`，该命令将节点列表添加到当前运行的 AppScale 部署中。
2.  在 AppController ( [AppController/djinn.rb](https://github.com/AppScale/appscale/blob/master/AppController/djinn.rb) )的主 AppScale 代码 ( [github 上的 AppScale/appscale](https://github.com/AppScale/appscale) ) 中添加一个新的 SOAP 公开方法，称为(请参阅[djinnServer.rb](https://github.com/AppScale/appscale/blob/master/AppController/djinnServer.rb)了解如何通过 SOAP 公开方法及其定义以了解如何他们实现了它），它接受一个参数，即作为 AppScale 节点启动的 IP 列表。`add_nodes_from_ips``djinn.rb`
3.  已`appscale-add-nodes`连接到 Shadow AppController（其 IP 地址在 ~/.appscale/locations-appscale.yaml 中）并使用 IP 列表调用新的 SOAP 公开方法以启动 AppScale。

您的 SOAP 公开方法应该调用`start_appcontroller`每个 IP 地址，以便 AppController 守护程序在那里启动并可以连接回其他 AppController。要启动的角色列表由您决定 - 我建议使用开放角色，以便 AppScale 可以决定将新节点用于什么。

肯定有很多东西需要吸收，但我很高兴根据评论更新这个答案（当然，我会在 AppScale wiki 上为每个单独的部分添加一个页面，比如如何添加 SOAP AppController 的一般方法）。

# java - 如何根据Java中的变量值调用不同的构造函数

> ID：12447358
> 
> 赞同：1
> 
> 时间：2012-09-16T13:44:15.190
> 
> 标签：java

它真的是一个简单的问题。

```
class salad
class chef_salad extends salad
class ceasar_salad extends salad 
```

所以我有一个变量`type`，我想根据类型创建适当的对象。

显然我可以

```
if(type.equals("chef"){ salad s = new chef_salad(); } 
```

我想我什至可以使它成为一个返回`salad`对象的静态方法，但这真的是最好的方法还是有更好的方法通过构造函数来做到这一点？

附言。虚构的例子

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T13:46:49.760

您正在谈论[工厂模式](http://en.wikipedia.org/wiki/Factory_pattern)，您希望根据输入隐藏在继承层次结构中实例化给定类型的对象背后的逻辑。

```
public class SaladFactory
{
    public Salad getSalad(type) {
        if ("chef".equals(type) {
            return new ChefSalad();
        }
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T13:49:09.240

我会这样做：

```
public static Salad createSaladInstance(String type)
{
    if(type.equals("Salad")) return new Salad();
    else if(type.equals("ChefSalad")) return new ChefSalad();
    // ...
}

// ...

Salad s = createSaladInstance(type); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T13:48:10.633

请参阅[工厂设计模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。

```
public interface SaladFactory
   {
   public Salad createSalad();
   public String getName();
   }

for(SaladFactory factory:factories)
{
if(factory.getName().equals("caesar")) return facory.createSalad();
} 
```

# c# - 事件未触发

> ID：12447359
> 
> 赞同：0
> 
> 时间：2012-09-16T13:44:27.460
> 
> 标签：c#, .net, events, event-handling

我创建了一个名为`textBox1_Leave`; 但是当我运行我的程序时，我将焦点从`txtBox1`事件中移开并没有触发。

我希望触发此事件，因此我可以检查`Name`用户输入的值是否`txtBox1`存在于我的数据库中。如果是这样，我想`button1`通过设置启用`button1.Enable = true`，否则启用`false`.

我的 C# 代码：

```
private void textBox1_Leave(object sender, EventArgs e)
{
    OleDbConnection A=new OleDbConnection();
    A.ConnectionString=Program.DBPATH;
    A.Open();

    OleDbCommand BB=new OleDbCommand();
    BB.Connection=A;
    BB.CommandText="SELECT username FROM Users WHERE (username = '" + textBox1.Text + "')";
    OleDbDataReader CC = BB.ExecuteReader();

    if (CC.Read())
    {
        button1.Enabled=true;
    }
    else
    {
        button1.Enabled=false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:15:29.933

```
first check the event is wired up in constructor of the page

textBox1.Leave += textBox1_Leave;

and then

1) Debug the program and check whether break point is hitting. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:08:29.350

我相信您正在开发 Windows 应用程序。我建议您执行以下步骤：

1) 调试程序，检查断点是否命中。

2）在您的表单上，您应该有一些除 textbox 之外的控件，然后只会触发 Leave 事件。如果表单上只有文本框，则不会触发文本框的离开事件。

3) 使用 try catch 块，否则如果出现运行时错误，您的应用程序将崩溃。

# iphone - removeFromSuperview 不会“释放”我的 UILabel

> ID：12447361
> 
> 赞同：1
> 
> 时间：2012-09-16T13:45:05.017
> 
> 标签：iphone, xcode, uilabel

由于 UITextViews 的一些渲染问题，我正在为场景中的每个 UITextViews 动态创建 UILabel，并使用 renderInContext 制作图像。工作得很好，除了我需要在渲染后删除标签，否则下次我执行 renderInContext 时它们会重新渲染。我正在使用 removeFromSuperview 尝试删除标签，但它们并没有“释放”它们只是在每次渲染时累积，并且在某些情况下它们会重新渲染。我怎样才能摆脱标签，使它们不会重新渲染？

```
for (i = 0; i < [labelsArray count]; i++) {

    [[labelsArray objectAtIndex:i] removeFromSuperview];

    NSLog(@"label: %@", [labelsArray objectAtIndex:i]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:08:26.950

如果它们仍在您的阵列中，它们仍将保留。如果你想让它们被释放，你必须从你的数组中删除你的标签。尝试在其上设置一个 UILabel 指针，将其从超级视图和数组中删除，然后显示它。它应该被释放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:29:11.757

答案似乎是我不仅需要从 superViews 中删除我的子视图（标签和任何已删除的 UITextViews），还需要使用以下方法从数组中删除这些视图：

```
[array removeObject:viewObject]; 
```

# model-view-controller - MVC 应用程序 - 存储参考数据的位置

> ID：12447362
> 
> 赞同：0
> 
> 时间：2012-09-16T13:45:07.550
> 
> 标签：model-view-controller, model, yii, referential-integrity

我正在使用 Yii 框架开发一个应用程序，因此它是 MVC 风格的。我有一个记录类型“人”，其中包含有关成员资格的信息。会员有两种类型：成人和儿童。对于孩子们，我们知道他们中的一些人的年龄，他们被分成不同的年龄组。年龄组有名字（例如“8 岁及以下”。）例如，John Smith 和 Jane Smith 有两个孩子 Jimmy Smith 和 Janey Smith。Janey 想做一个足球节目，所以我们需要知道她的年龄并将她放在一个年龄组中。吉米正在做艺术和手工艺，所以我们不需要知道他的年龄，因为他的节目没有按年龄划分。而且我们不询问成年人的年龄。

所以问题是：关于如何存储它，我有几个选择。我可以：

*   在 person 表中放置一个 int agegroup 字段，并在我为人定义模型时将值定义为 CONST 值（并且对于“未定义”可能有一个特殊值 - 对于成年人。然后我需要编写一些代码来翻译描述性标签的 const 值。
*   如上在人员表中放置一个年龄组字段，但还要在数据库中添加另一个带有参考数据的表。对这个新表实施参照完整性。这引发了另一个问题 - 对于我不知道/不关心年龄组的情况，我应该在参考表中创建一个虚拟记录，还是应该在人员表的年龄组字段中允许空值？
*   其他的？

我知道我可以使这些工作中的任何一个工作。但我欢迎就哪种方法更受欢迎以及为什么提供建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:22:25.620

对于未来扩展的可能性（您可能想要创建、删除和修改年龄组），我建议您使用一个由开始年龄、上限年龄和描述组成的年龄组表。您可以将开始年龄保留为 null 以表示“最多 n”/“n 及以下”​​组，反之亦然，有上限。主键将由开始和上年龄一起组成（复合键。）

然后，在您的“活动”表中，您需要强制引用年龄组表（即使只是“空/空”或“所有年龄”记录）。这样您就可以为年龄组创建活动 - - 8 岁及以下足球、12 至 14 岁足球、所有年龄段的手工艺品、18 岁及以上的艺术等等。

# android - 在活动中嵌入日期选择器

> ID：12447363
> 
> 赞同：7
> 
> 时间：2012-09-16T13:45:34.120
> 
> 标签：android, android-activity, dialog, datepicker

我想`DatePickerDialog`在 Android 活动本身中嵌入一个。我不希望`DatePicker`在单击按钮作为对话框时出现，而是将其嵌入到我的活动本身中。我曾尝试`DatePicker`在布局中使用视图，但这似乎与`DatePickerDialog`.

我`DialogFragment`用于创建和`DatePickerDialog`使用以下代码`onCreate``MainAcitivity.java`

```
 FragmentTransaction ft = getFragmentManager().beginTransaction();
    DatePickerDialogFragment datePickerDialogFragment = DatePickerDialogFragment.newInstance();

    ft.add(R.id.main_screen_layout, datePickerDialogFragment); // main_screen_layout is given as the id for the layout related to MainActivity
    ft.commit(); 
```

// DatePickerDialogFragment.java

`public class DatePickerDialogFragment extends DialogFragment`

```
implements DatePickerDialog.OnDateSetListener {

public static DatePickerDialogFragment newInstance() {
    return new DatePickerDialogFragment();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.dialog_datepicker, container, false);
    View tv = v.findViewById(R.id.tv);

    ((TextView)tv).setText("This is a new instance");

    return v;
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    Calendar c = Calendar.getInstance();
    return new DatePickerDialog(getActivity(), this, 
            c.get(Calendar.YEAR),
            c.get(Calendar.MONTH),
            c.get(Calendar.DAY_OF_MONTH));
}

public void onDateSet(DatePicker view, int year, int monthOfYear,
        int dayOfMonth) {
    // TODO Auto-generated method stub

} 
```

`}`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-08T12:51:12.677

我在活动布局中有 DatePicker 和 DateTime。这个想法是允许两者的编辑，组成一个日期时间值并在用户单击完成/设置按钮后返回它。下面，您可以找到一些代码，显示 DatePicker 如何嵌入到布局和活动代码中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:orientation="vertical">

    <DatePicker
        android:id="@+id/date_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:calendarViewShown="false" />
</LinearLayout>

public class DateSelectionActivity extends Activity {

    private DatePicker datePicker;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // ...

        this.datePicker = (DatePicker) this.findViewById(R.id.date_value);
        this.datePicker.init(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH), null);

        // ...
    }

    private OnClickListener confirmButtonClickListener = new OnClickListener() {

            @Override
            public void onClick(View v) {

                // Get user selection
                // DateSelectionActivity.this.datePicker.getYear());
                // DateSelectionActivity.this.datePicker.getMonth());
                // DateSelectionActivity.this.datePicker.getDayOfMonth());
            }
    }
} 
```

# indexing - Angularjs - 如何有条件地应用不同的类来重复指令

> ID：12447367
> 
> 赞同：10
> 
> 时间：2012-09-16T13:46:05.083
> 
> 标签：indexing, angularjs, repeat

`<tr>`我需要根据`$index`重复指令将不同的类应用于 a 。例如

```
<table>
   <tr ng-repeat="model in list" class="xxx">
       <td>...</td>
   <tr>
</table> 
```

我需要`<tr>`根据索引是偶数还是奇数来应用不同的样式。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-16T14:28:04.520

通常你会像这样使用 ngClassOdd ( [http://docs.angularjs.org/api/ng.directive:ngClassOdd](http://docs.angularjs.org/api/ng.directive%3angClassOdd) ) 和 ngClassEven ( [http://docs.angularjs.org/api/ng.directive:ngClassEven](http://docs.angularjs.org/api/ng.directive%3angClassEven) ) 指令：

```
<tr ng-repeat="item in items" ng-class-odd="'class1'" ng-class-even="'class2'"> 
```

这是 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/hNHJ4/1/](http://jsfiddle.net/pkozlowski_opensource/hNHJ4/1/)

不幸的是，当删除行时，上述指令无法正常工作：[https ://github.com/angular/angular.js/issues/1076](https://github.com/angular/angular.js/issues/1076)

作为一种解决方法，您可以将 ngClass 指令 ( [http://docs.angularjs.org/api/ng.directive:ngClass](http://docs.angularjs.org/api/ng.directive%3angClass) ) 与中继器公开的 $index 变量一起使用：

```
<tr ng-repeat="item in items" ng-class="{class1 : $index%2==0, class2 : !($index%2==0)}"> 
```

这是 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/am7xs/](http://jsfiddle.net/pkozlowski_opensource/am7xs/)

它不是超级干净，但可以改进（例如，通过在根范围内公开一个函数，例如：

```
ng-class="getClass($index,'class1','class2')" 
```

直到提到的错误被修复

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T19:15:10.170

如果这只是为了造型，你可以只使用 CSS

```
tr:nth-child(odd) { ... }
tr:nth-child(even) {...} 
```

有关示例，请参见[http://jsfiddle.net/5MSDC/](http://jsfiddle.net/5MSDC/)

# forms - JSF：将表单数据存储到地图

> ID：12447368
> 
> 赞同：0
> 
> 时间：2012-09-16T13:46:09.523
> 
> 标签：forms, jsf, map

我正在开发一个 JSF 页面，其中包含一个包含大量输入字符串值的表单。我不想在 bean 中为每个 input 创建相应的字段。是否可以使用地图代替。

这是我希望表单输入元素的样子：

```
<h:inputText value='#{myBean.data["key"]}' /> // or something like this 
```

并且 bean 包含如下映射：

```
class myBean {
Map data;

...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:32:10.667

> *如果我创建这样的代码，地图操作的 getter 和 setter 应该是什么样的？*

没什么特别的。只是一个标准的 getter，因为您应该始终将其用于模型属性。

```
public Map<String, Object> getData() {
    return data;
} 
```

setter 不是强制性的，因为它无论如何都不会被使用。EL 将为此使用地图自己的`put()`方法。您只需要确保地图已经在 bean 的（后）构造函数中预先创建，JSF/EL 不会为您执行此操作。

```
public MyBean() {
    data = new HashMap<String, Object>();
} 
```

# network-programming - ns2中TCP同步攻击的模拟

> ID：12447371
> 
> 赞同：2
> 
> 时间：2012-09-16T13:46:17.683
> 
> 标签：network-programming, simulation, ns2, network-security

如何在 ns2 中模拟 TCP 同步攻击？`DOS Attack` 请提供一些指导方针，如何模拟这个`ns2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:38:45.720

`AQM & DOS`使用模拟平台可以产生tcp同步攻击。

# java - 如何按“值”的降序遍历 berkeley-db 数据库？

> ID：12447377
> 
> 赞同：0
> 
> 时间：2012-09-16T13:46:47.417
> 
> 标签：java, berkeley-db, berkeley-db-je

我有一个 Berkeley-db 数据库，其中“键”和“值”都是整数类型。有没有办法按“值”的降序遍历数据库？

我正在使用 Berkeley-db je-5.0.58 API。我在其文档中使用的示例代码如下所示。

```
/*-
* See the file LICENSE for redistribution information.
*
* Copyright (c) 2004-2010 Oracle.  All rights reserved.
*
*/

package je;
import java.io.File;

import com.sleepycat.bind.tuple.IntegerBinding;
import com.sleepycat.je.Cursor;
import com.sleepycat.je.Database;
import com.sleepycat.je.DatabaseConfig;
import com.sleepycat.je.DatabaseEntry;
import com.sleepycat.je.DatabaseException;
import com.sleepycat.je.Environment;
import com.sleepycat.je.EnvironmentConfig;
import com.sleepycat.je.LockMode;
import com.sleepycat.je.OperationStatus;
import com.sleepycat.je.Transaction;

/**
* SimpleExample creates a database environment, a database, and a database
* cursor, inserts and retrieves data.
*/
class SimpleExample {
private static final int EXIT_SUCCESS = 0;
private static final int EXIT_FAILURE = 1;

private int numRecords;   // num records to insert or retrieve
private int offset;       // where we want to start inserting
private boolean doInsert; // if true, insert, else retrieve
private File envDir;

public SimpleExample(int numRecords,
                     boolean doInsert,
                     File envDir,
                     int offset) {
    this.numRecords = numRecords;
    this.doInsert = doInsert;
    this.envDir = envDir;
    this.offset = offset;
}

/**
 * Usage string
 */
public static void usage() {
    System.out.println("usage: java " +
                       "je.SimpleExample " +
                       "<dbEnvHomeDirectory> " +
                       "<insert|retrieve> <numRecords> [offset]");
    System.exit(EXIT_FAILURE);
}

/**
 * Main
 */
public static void main(String argv[]) {

    if (argv.length < 2) {
        usage();
        return;
    }
    File envHomeDirectory = new File(argv[0]);

    boolean doInsertArg = false;
    if (argv[1].equalsIgnoreCase("insert")) {
        doInsertArg = true;
    } else if (argv[1].equalsIgnoreCase("retrieve")) {
        doInsertArg = false;
    } else {
        usage();
    }

    int startOffset = 0;
    int numRecordsVal = 0;

    if (doInsertArg) {

        if (argv.length > 2) {
            numRecordsVal = Integer.parseInt(argv[2]);
        } else {
            usage();
            return;
        }

        if (argv.length > 3) {
            startOffset = Integer.parseInt(argv[3]);
        }
    }

    try {
        SimpleExample app = new SimpleExample(numRecordsVal,
                                              doInsertArg,
                                              envHomeDirectory,
                                              startOffset);
        app.run();
    } catch (DatabaseException e) {
        e.printStackTrace();
        System.exit(EXIT_FAILURE);
    }
    System.exit(EXIT_SUCCESS);
}

/**
 * Insert or retrieve data
 */
public void run() throws DatabaseException {
    /* Create a new, transactional database environment */
    EnvironmentConfig envConfig = new EnvironmentConfig();
    envConfig.setTransactional(true);
    envConfig.setAllowCreate(true);
    Environment exampleEnv = new Environment(envDir, envConfig);

    /*
     * Make a database within that environment
     *
     * Notice that we use an explicit transaction to
     * perform this database open, and that we
     * immediately commit the transaction once the
     * database is opened. This is required if we
     * want transactional support for the database.
     * However, we could have used autocommit to
     * perform the same thing by simply passing a
     * null txn handle to openDatabase().
     */
    Transaction txn = exampleEnv.beginTransaction(null, null);
    DatabaseConfig dbConfig = new DatabaseConfig();
    dbConfig.setTransactional(true);
    dbConfig.setAllowCreate(true);
    dbConfig.setSortedDuplicates(true);
    Database exampleDb = exampleEnv.openDatabase(txn,
                                                 "simpleDb",
                                                 dbConfig);
    txn.commit();

    /*
     * Insert or retrieve data. In our example, database records are
     * integer pairs.
     */

    /* DatabaseEntry represents the key and data of each record */
    DatabaseEntry keyEntry = new DatabaseEntry();
    DatabaseEntry dataEntry = new DatabaseEntry();

    if (doInsert) {

        /* put some data in */
        for (int i = offset; i < numRecords + offset; i++) {
            /*
             * Note that autocommit mode, described in the Getting
             * Started Guide, is an alternative to explicitly
             * creating the transaction object.
             */
            txn = exampleEnv.beginTransaction(null, null);

            /* Use a binding to convert the int into a DatabaseEntry. */

            IntegerBinding.intToEntry(i, keyEntry);
            IntegerBinding.intToEntry(i+1, dataEntry);
            OperationStatus status =
                exampleDb.put(txn, keyEntry, dataEntry);

            /*
             * Note that put will throw a DatabaseException when
             * error conditions are found such as deadlock.
             * However, the status return conveys a variety of
             * information. For example, the put might succeed,
             * or it might not succeed if the record alread exists
             * and the database was not configured for duplicate
             * records.
             */
            if (status != OperationStatus.SUCCESS) {
                throw new RuntimeException("Data insertion got status " +
                                           status);
            }
            txn.commit();
        }
    } else {
        /* retrieve the data */
        Cursor cursor = exampleDb.openCursor(null, null);

        while (cursor.getNext(keyEntry, dataEntry, LockMode.DEFAULT) ==
               OperationStatus.SUCCESS) {
            System.out.println("key=" +
                               IntegerBinding.entryToInt(keyEntry) +
                               " data=" +
                               IntegerBinding.entryToInt(dataEntry));

        }
        cursor.close();
    }

    exampleDb.close();
    exampleEnv.close();

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:53:46.940

您可以使用[自定义比较器](http://docs.oracle.com/cd/E17076_02/html/api_reference/C/dbset_bt_compare.html)并使用[光标](http://docs.oracle.com/cd/E17076_02/html/api_reference/C/dbc.html)按降序遍历数据。

在java中你必须实现一个自定义的比较器：

**编辑**：

```
import java.util.Comparator;

import com.sleepycat.bind.tuple.IntegerBinding;
import com.sleepycat.je.DatabaseEntry;

public class IntegerSorter implements Comparator<byte[]>
    {
    @Override
    public int compare(byte[] o1, byte[] o2)
        {
        return
              IntegerBinding.entryToInt(new DatabaseEntry(o1)) - 
              IntegerBinding.entryToInt(new DatabaseEntry(o2));
        }
    }

(...)
 dbConfig.setBtreeComparator(IntegerSorter.class);
(...) 
```

# php - 用两个数组创建多维数组

> ID：12447379
> 
> 赞同：0
> 
> 时间：2012-09-16T13:47:00.603
> 
> 标签：php, arrays

我正在索引网页。该代码扫描网页中的链接和给定标题的网页。链接和标题存储在两个不同的数组中。我想创建一个多维数组，其中包含单词 Array，后跟链接，然后是链接的各个标题。我有代码，我只是不知道如何把它放在一起。

```
 require_once('simplehtmldom_1_5/simple_html_dom.php');
require_once('url_to_absolute/url_to_absolute.php');
 //links
$links = Array();
$URL = 'http://www.youtube.com'; // change it for urls to grab  
// grabs the urls from URL 
$file  = file_get_html($URL);
foreach ($file->find('a') as $theelement) {
   $links[] = url_to_absolute($URL, $theelement->href);
} 
print_r($links);
   //titles
  $titles = Array();
  $str = file_get_contents($URL);  
  $titles[] = preg_match_all( "/\<title\>(.*)\<\/title\>/", $str, $title );

   print_r($title[1]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:53:04.407

您应该能够做到这一点，假设链接数量与标题数量相同，那么它们应该对应于相同的数组键。

```
$newArray = array();

        foreach ($links as $key=>$val)
        {
            $newArray[$key]['link'] = $val;
            $newArray[$key]['title'] = $titles[$key];
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:59:05.897

目前尚不清楚您想要什么。

无论如何，这就是我将以更有条理的方式重写您的代码的方法：

```
require_once('simplehtmldom_1_5/simple_html_dom.php');
require_once('url_to_absolute/url_to_absolute.php');

$info = array();

$urls = array(
    'http://www.youtube.com',
    'http://www.google.com.br'
);

foreach ($urls as $url)
{
    $str = file_get_contents($url);
    $html = str_get_html($str);

    $title = strval($html->find('title')->plaintext);

    $links = array();
    foreach($html->find(a) as $anchor)
    {
        $links[] = url_to_absolute($url, strval($anchor->href));
    }
    $links = array_unique($links);

    $info[$url] = array(
        'title' => $title,
        'links' => $links
    );
}

print_r($info); 
```

# c - 64 位 CPU 上不同整数大小的效率

> ID：12447381
> 
> 赞同：10
> 
> 时间：2012-09-16T13:47:26.470
> 
> 标签：c, 64-bit, int, long-integer

在 64 位 CPU 中，如果`int`是 32 位，而`long`是 64 位，会`long`比 更有效`int`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T14:53:29.473

您的问题的主要问题是您没有定义“高效”。有几种可能的效率相关差异。

当然，如果您**需要**使用 64 位，那么毫无疑问。但有时您可以使用 32 位，但您想知道使用 64 位是否会更好。

**数据大小效率**

使用 32 位将使用更少的内存。这更有效，特别是如果您使用大量它们。它不仅在您可能无法换出的意义上更有效，而且在您将有更少的缓存未命中的意义上也是如此。如果您只使用几个，那么效率差异是无关紧要的。

**代码大小效率**

这在很大程度上取决于架构。一些架构需要更长的指令来操作 32 位值，其他架构需要更长的指令来操作 64 位值，而其他架构则没有区别。例如，在 intel 处理器上，即使是 64 位代码，32 位也是默认操作数大小。较小的代码可能在缓存行为和管道使用方面都有一点优势。但这取决于操作数大小将使用更小的代码的架构。

**执行速度效率**

一般来说，除了代码大小所暗示的差异之外，应该没有差异。一旦指令被解码，仅仅执行的时间通常是相同的。然而，再一次，这实际上是特定于架构的。例如，有些架构没有原生 32 位算法。

我的建议：

如果只是小型结构中的一些局部变量或数据，您不会大量分配，请以**不**`int`假定大小的方式使用和执行它，以便新版本的编译器或使用不同的编译器size for仍然有效。**`int`**

 **但是，如果您有巨大的数组或矩阵，则使用您可以使用的最小类型并确保其大小是明确的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T14:48:51.123

在常见的 x86-64 架构上，32 位算术永远不会比 64 位算术慢。所以`int`总是相同的速度或更快`long`。在其他实际上没有内置 32 位算术的架构上，例如 MMIX，这可能不成立。

基本智慧：编写它而不考虑此类微优化，如有必要，分析和优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T13:55:09.953

如果您尝试存储 64 位数据，请使用 long。如果您不需要 64 位，请使用常规的 32 位 int。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-16T13:49:10.240

是的，64 位数字比 32 位数字更有效。

在 64 位 CPU 上，如果您要求 long int，大多数编译器都会给您 64 位。

要使用当前编译器查看大小：

```
#include <stdio.h>

int main(int argc, char **argv){
    long int foo;
    printf("The size of an int is: %ld bytes\n", sizeof(foo));
    printf("The size of an int is: %ld bits\n", sizeof(foo) * 8);
    return 0;
} 
```

如果您的 cpu 在 64 位模式下运行，则无论您提出什么要求，您都可以预期 CPU 会使用它。所有的寄存器都是 64 位的，操作都是 64 位的，所以如果你想得到 32 位的结果，它通常会为你将 64 位的结果转换为 32 位。

在`limits.h`我的系统上定义`long int`为：

```
/* Minimum and maximum values a `signed long int' can hold.  */
#  if __WORDSIZE == 64
#   define LONG_MAX 9223372036854775807L
#  else
#   define LONG_MAX 2147483647L
#  endif
#  define LONG_MIN  (-LONG_MAX - 1L) 
```**

# c# - 列出文件中的行，并创建删除行的选项

> ID：12447383
> 
> 赞同：-1
> 
> 时间：2012-09-16T13:47:46.747
> 
> 标签：c#

我正在做一个项目，我需要从文件中删除行。示例：（通过从文件中读取，例如“list.txt”）

```
1 Hello DELETE
2 Hi    DELETE
3 Hey   DELETE 
```

我已经尝试过思考如何做到这一点，但我找不到办法做到这一点。我也试过在谷歌中搜索它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:18:39.883

与其从文本文件中删除行，不如*重写*将是更好的选择。如果您有一个很大的文本文件，则将所有行读入内存并没有得到太多优化。[`ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)方法正在处理这种情况下

> 使用 ReadLines 时，可以在返回整个集合之前开始枚举字符串集合；使用 ReadAllLines 时，必须等待返回整个字符串数组才能访问该数组。因此，当您处理非常大的文件时，ReadLines 会更有效率。

假设您有方法来检查是否应该删除一行：

```
 bool ShouldDeleteLine(string line)
 {
 } 
```

编码：

```
 string tempFile = Path.GetTempFileName();

 var lines = File.ReadLines("list.txt")
                    .Where(line => !ShouldDeleteLine(line));

 File.WriteAllLines(tempFile, lines);

 File.Delete("list.txt");
 File.Move(tempFile, "list.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:51:18.613

将所有行读入内存，然后将其写回文件，不包括要删除的行。如果它是一个非常大的文件，您无法一次将其全部存储在内存中，您可以一次执行几行并将其写入一个新文件（减去要删除的行）。然后，当您浏览完原始文件时，继续删除它并将新文件重命名为原始名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:03:29.907

使用这样的东西：

```
void DeleteLines()
{
    var filePath = @"path/to/file.txt";
    string[] lines = File.ReadAllLines(filePath);
    File.WriteAllLines(filePath, lines.Where(KeepLine));
}   

bool KeepLine(string line)
{
    // Decide whether to keep this line. The line below for example
    // Keeps all lines except the ones containing the word "Hey".
    return !line.Contains("Hey");
} 
```

它将整个文件读入内存，然后将所有行写回文件中。

# c# - 如何检查文本输入是否完成

> ID：12447386
> 
> 赞同：0
> 
> 时间：2012-09-16T13:48:39.430
> 
> 标签：c#, .net, wpf

我正在开发一个简单的 WPF 应用程序，我想在其中对特定文本字段使用文本更改方法。问题是我实现了该方法，但是该方法在很短的时间内被触发，就像我输入一个字符之后一样。我想检查文本更改是否完成，以便使用文本更改方法中编写的方法。

```
private void searchBox_TextChanged(object sender, TextChangedEventArgs e)
{
    if (...) // how to check whether the typing is finished?
    {
        // code goes here
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:51:47.203

我想你需要这个`LostFocus`活动。正如@SLaks 评论所说，您无法预测用户是否会按下另一个键。或者，您可以对控件进行数据绑定 - 取决于您实际尝试执行的操作，这可能更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:51:39.113

而不是`TextChanged`，尝试监视`LostFocus`事件，当用户离开文本框时，将触发该事件，方法是按 Enter/Tab 或单击表单上的其他位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:08:12.903

同意 LostFocus

[UIElement.LostFocus 事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.lostfocus.aspx)

问题不是关于绑定而是要考虑的问题。
在绑定中等效的是 UpdateSourceTrigger="LostFocus"

[Binding.UpdateSourceTrigger 属性](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)

通过绑定，您可以进入更高级的验证 UI 效果。

[如何：实施绑定验证](http://msdn.microsoft.com/en-us/library/ms753962.aspx)

# sql - 使用 GROUP BY 从多个表中选择

> ID：12447392
> 
> 赞同：6
> 
> 时间：2012-09-16T13:49:40.130
> 
> 标签：sql, ms-access, count, group-by

我对多表查询有一点问题。（RDBMS：访问）

这是数据库模式：（此查询中仅使用 S_Cards、Books、Authors、Student 表）S_Cards 是 Student 图书订单（在图书馆中）。

![数据库方案](../Images/32af24c4ad6eb0bddb9b796cbc93d229.png)

查询：选择学生中最受欢迎的作者以及该作者在图书馆订购的书籍数量。

虽然我可以在一个查询中获得这样的订单+作者列表：

```
SELECT 
    Students.FirstName & " " & Students.LastName AS [Student], 
    Books.Name AS [Book], Authors.FirstName & " " & Authors.LastName AS [Author]
FROM 
    Students, 
    Books, 
    S_Cards, 
    Authors
WHERE 
    S_Cards.ID_Student = Students.ID 
AND S_Cards.ID_Book = Books.ID 
AND Books.ID_Author = Authors.ID
ORDER BY Authors.LastName 
```

结果（对不起，它是俄语）：

![查询结果](../Images/7de611b87a9c27d63289ef8fe5bc9ee5.png)

我想不通，为什么我不能像这样 COUNT 和 GROUP BY：

```
SELECT 
    Students.FirstName & " " & Students.LastName AS [Student], 
    Books.Name AS [Book], 
    COUNT(Authors.FirstName & " " & Authors.LastName) AS [Number of books]
FROM Students, Books, S_Cards, Authors
WHERE 
    S_Cards.ID_Student = Students.ID 
AND S_Cards.ID_Book = Books.ID 
AND Books.ID_Author = Authors.ID
GROUP BY 3 
```

我收到一条错误消息，“Authors.FirstName & " " & Authors.LastName' 不是静态函数或组的一部分。

问题：

1.  有没有办法在没有 JOIN 的情况下仅通过 GROUP BY、SELECT、UNION 以及如何执行此查询？
2.  我的第二个查询有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-22T02:03:36.280

解决方案（从[有问题的旧版本中](https://stackoverflow.com/revisions/12447392/4)提取）：

```
SELECT TOP 1 Author, COUNT(Book) AS [Number of books] FROM
(
    SELECT 
        Students.FirstName & " " & Students.LastName AS [Student], 
        Books.Name AS [Book], 
        Authors.FirstName & " " & Authors.LastName AS [Author]
    FROM 
        Students, 
        Books, 
        S_Cards, 
        Authors
    WHERE 
        S_Cards.ID_Student = Students.ID AND
        S_Cards.ID_Book = Books.ID AND
        Books.ID_Author = Authors.ID
    ORDER BY Authors.LastName
)
GROUP BY Author
ORDER BY 2 DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T22:09:39.020

您必须 GROUP BY 不属于聚合函数的任何内容：

```
SELECT 
    Students.FirstName & " " & Students.LastName AS [Student], 
    Books.Name AS [Book], 
    COUNT(Authors.FirstName & " " & Authors.LastName) AS [Number of books]
FROM Students, Books, S_Cards, Authors
WHERE 
    S_Cards.ID_Student = Students.ID 
AND S_Cards.ID_Book = Books.ID 
AND Books.ID_Author = Authors.ID
GROUP BY Students.FirstName & " " & Students.LastName, 
    Books.Name AS [Book] 
```

我建议您开始使用显式而不是隐式连接。在大多数情况下，MS Access 有更好的选择。

```
<...>
FROM Students
INNER JOIN S_Cards
ON Students.ID = S_Cards.ID_Student 
```

或者

```
<...>
FROM Students
LEFT JOIN S_Cards
ON Students.ID = S_Cards.ID_Student 
```

查询设计窗口将允许您使用正确的语法构建您的 JOIN。只需将连接字段从一个表拖放到下一个表，然后选择您需要的连接类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:55:19.317

SQL Server 中的字符串[连接运算符](http://msdn.microsoft.com/en-us/library/aa276862%28v=sql.80%29.aspx)`+`不是`&`. *此外，您应该按不是*聚合函数的事物进行分组。

```
SELECT Students.FirstName + ' ' + Students.LastName AS [Student]
     , Books.Name AS [Book]
     , COUNT(Authors.FirstName + ' ' + Authors.LastName) AS [Number of books]
  FROM Students
  JOIN S_Cards
    ON S_Cards.ID_Student = Students.ID
  JOIN BOOKS
    ON S_Cards.ID_Book = Books.ID 
  JOIN Authors
    ON Books.ID_Author = Authors.ID
 GROUP BY Students.FirstName + ' ' + Students.LastName
        , Books.Name 
```

请注意，我已将您的查询更改为标准的 ANSI 连接语法，这使得错误更难产生并且更易于阅读。

想了想，你的计数似乎有些奇怪。不是书的数量`COUNT(Books.ID)`吗？

# objective-c - 从 mastersplitview 中的 uibarbutton 关闭 mastersplitview

> ID：12447404
> 
> 赞同：0
> 
> 时间：2012-09-16T13:52:07.290
> 
> 标签：objective-c, ios, xcode

我已经实现了一个 UISpliview 并且效果很好。但是我想为用户添加一个选项，通过按下主视图中的按钮来关闭主视图（因此它会执行相同的操作，这是通过触摸详细视图来欺骗的）。这可能吗？我已经更新了代码，我认为它应该可以工作，但它什么也没做？

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
{
barButtonItem = _backButton;
[self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
self.masterPopoverController = popoverController;
}

- (void)splitViewController:(UISplitViewController *)splitController willShowViewController:  (UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
// Called when the view is shown again in the split view, invalidating the button and popover controller.
[self.navigationItem setLeftBarButtonItem:nil animated:YES];
self.masterPopoverController = nil; 
}

//the action, which gets called once the button is pressed. 
- (IBAction)backToFullDetailView:(id)sender
{
    [self.masterPopoverController dismissPopoverAnimated:YES];
} 
```

![Masterview 显示按钮（帮助）](../Images/83e36c8fba578652a15233c4f518fd27.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:49:09.803

我相信你需要关闭你的弹出窗口。一个类似的问题已经被问到[here](https://stackoverflow.com/questions/11422812/how-can-i-dismiss-the-master-view-from-a-uisplitviewcontroller-in-ios-5-1)。你正在看类似的东西`[youPopoverController dismissPopoverAnimated: YES];`

# mysql - UPDATE col 基于 GROUP BY

> ID：12447406
> 
> 赞同：0
> 
> 时间：2012-09-16T13:52:37.000
> 
> 标签：mysql, sql, group-by, sql-update

我有一张桌子

```
id |  title  | ...
––----------------
 1 |  test A | ...
 2 |  test C | ...
 3 |  test B | ...
 4 |  test C | ...
 5 |  test B | ...
 6 |  test X | ... 
```

我想添加一个基于 GROUP BY 查询的列：`SELECT * FROM table GROUP BY title`

```
id |  title  | group_id (int)
––--------------------------
 1 |  test A | 1
 2 |  test C | 2
 3 |  test B | 3
 4 |  test C | 2
 5 |  test B | 3
 6 |  test X | 4 
```

`group_id`不需要很重要，它只需要在具有相同`title`值且与另一个不同的行上是相同的值。

我怎样才能做到这一点 ？

谢谢。

PS：对不起我的英语，我是法语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:10:45.077

好吧，假设您更改了表格并添加了新列 ParentID ？就像是

```
UPDATE ATable t
  INNER JOIN (
    SELECT
      Title, 
      MIN(ID) AS ID
    FROM ATable
    GROUP BY Title
  ) m ON t.Title = m.Title
SET t.ParentID = m.ID 
```

# parsing - 这是 BNF 语法 LL(1) 吗？

> ID：12447409
> 
> 赞同：1
> 
> 时间：2012-09-16T13:52:54.667
> 
> 标签：parsing, grammar, bnf, ebnf, ll

如果以下 BNF 语法是 LL(1)，有人可以帮我确认一下：

```
S ::= A B B A
A ::= a
A ::=
B ::= b
B ::= 
```

其中 S 是起始符号，非终结符 A 和 B 可以导出为 epsilon。我知道解析表中的单个单元格中是否有 2 个或多个产生式，那么语法不是 LL(1)。但是如果一个单元格已经包含 epsilon，我们可以在构建解析表时安全地用新的产生式替换它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:30:02.127

这个文法是模棱两可的，因此对于任何 k 都不是 LL(1)，也不是 LL(k)。

将单个`a`或`b`作为输入，并查看它可以与来自 的`A`或`B`引用中的任何一个匹配`S`。因此有两种不同的解析树，证明文法是不明确的。

# backbone.js - Backbone.js 模块化设置

> ID：12447415
> 
> 赞同：6
> 
> 时间：2012-09-16T13:53:31.587
> 
> 标签：backbone.js, modularity

我是骨干新手，我在这里寻求一些帮助，以了解我将如何构建我当前的 webapp 项目。我正在为服务器开发一个模块化管理面板。面板的每个“页面”都应该是一个打包的“模块”，包括控制器、模型和视图。

该面板将包含一个初始加载的主布局视图，以及一个基本导航。当用户单击导航上的链接时，页面会通过 AJAX 加载到布局中。（如果这听起来很愚蠢/有理由不这样做，请告诉我:)）

由于其他人也会开发这些页面，而且它们是模块化的，所以我不知道我将在通过 AJAX 加载的页面中看到哪些模型、视图和控制器。

我将如何最好地使用骨干做到这一点？

我特别想知道如何动态扩展 Backbone 模型等，以及如何管理（例如）用户离开页面和/或稍后重新访问它。

Backbone 是否提供了我可以使用的东西，我是否需要一起破解自己的东西，有没有更好的方法来做我缺少的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:29:30.007

与 Backbone 结合使用的常见模块化脚本加载框架是 require.js。这可能是您正在寻找的东西。Require.js 都是关于 AMD 模块、异步模块的。通常每个模型、集合、视图都是它自己的模块，它定义了特定模块所需的依赖关系，然后根据需要加载这些模块。它特别适合大型项目，在这些项目中，您需要在应用程序的不同点将许多单独的部分混合在一起。

您当然可以在单个模块中组合多个主干元素（通常我将其保留给仅与父视图一起使用的视图和特定子视图），但这完全取决于您。

使用 Backbone，通常的目的是创建单页应用程序 - 这意味着所有页面脚手架通常被包装为单个文件并在开始时完全加载到客户端。然后通过 ajax 调用每个页面的数据，并在用户导航和加载应用程序的不同方面时填充数据。这是您在描述中的意图吗？

如果您要加载从服务器单独抓取的不同页面，那么我不确定 Backbone 是否是答案。还有其他服务器端 MVC 框架可以帮助实现这一点。

这通常涉及如何将 Backbone 用于此类事情。

至于如何扩展 Backbone 模型等，Backbone 使用 Underscore 作为依赖项，并且 underscore 提供了一个很好的`_.extend()`功能，可以轻松地以几乎任何您想要的方式扩展所有对象。覆盖默认功能，加入 mixins，就 Backbone 而言，这一切都非常轻松。作为一个框架，Backbone 在改变、修改和定制每一点和每一个部分时都非常适合。

至于处理用户访问和重新访问页面，`Backbone.router`允许您创建不仅指向应用程序中特定“页面”的 URL，而且还可以执行需要执行才能到达那里的任意代码。像登录用户访问“mysite/#account”之类的东西会触发路由器加载某些脚本，这些脚本会显示该特定视图以及可能`fetch()`为用户启动和运行该视图所需的数据。

我不确定是否有资源可以为您提供某种基本结构。我所知道的大多数经验都倾向于通过“Todo List”之类的基本教程并从那里开始。我不确定您对 javascript 或一般编程的经验水平如何，但是当我几乎一无所知时，我从 Backbone 和 require 开始。只有对 JSON 是什么的模糊概念和对 HTTP 的低层次理解，例如“它就是获取网页的东西”。也就是说，我认为 Backbone 对我来说很容易上手，它加深了我对整个客户端 RESTful 类型应用程序结构的了解。

“待办事项列表”应用程序有一个非常好的列表，有许多不同的风格，例如 Backbone 和 Knockout 等等。在决定一个框架时，我基本上通过代码比较了所有可用的不同框架并选择了 Backbone，因为它对我来说似乎最有意义。我不后悔。这很有趣，我认为最好的方法是尝试一些演示教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:14:51.940

你对这些问题的思考听起来很正确。使您的 UI 组件尽可能自包含。观看这个[10 分钟的视频](http://www.youtube.com/watch?v=HOQ2_Vul0yY)，了解有关 UI 组件最佳实践的更多信息。

如果您对 JavaScript 应用程序开发的其他重要问题感兴趣，请查看我发布的[BoilerplateJS](http://boilerplatejs.org)参考架构以分享我的经验。它包含与您描述的类似的示例应用程序（带有组件激活的菜单）。

我对您的 UI 组件激活、停用的建议是：

*   不要删除/创建 DOM 组件。重用隐藏/显示，因为即使从 DOM 中删除，您的元素也会在内存中重新定位
*   尽量减少在客户端保留“状态”信息。当用户重新访问组件时，使用服务器调用刷新它，然后使其可见（使用服务器作为状态信息的唯一真实性）。

有关更多详细信息，请参阅 BoilerplateJS 示例组件实现。我知道很少有人将它与 BackboneJS 一起使用（目前它与 knockoutJS 一起提供）。我们将在一周后使用 v0.2 中的 BackboneJS 发布它的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T17:27:38.013

看看[木偶](http://derickbailey.github.com/backbone.marionette/)或[卓别林](https://github.com/chaplinjs/chaplin)。两者都建立在 Backbone 之上，并提供了一种结构化的方式来使用 Backbone 构建更大的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:56:01.600

这是使用backbonejs将您的应用程序组织为模块的教程

[http://backbonetutorials.com/organizing-backbone-using-modules/](http://backbonetutorials.com/organizing-backbone-using-modules/)

# ruby - 需要 Gem 版本时如何执行“OR”

> ID：12447416
> 
> 赞同：2
> 
> 时间：2012-09-16T13:53:38.130
> 
> 标签：ruby, rubygems, gemspecs

目前我有一个 Gemspec，它需要 Rails > 3.1 的特定版本的 Rails 3.x：

```
Gem::Specification.new do |s|
  # (...)
  s.add_dependency "railties", "~> 3.1"
  # (...)
end 
```

我希望更新此语句以要求`~> 3.1`OR `~> 4.0.0`。我已经尝试过：

*   `~> 3.1, ~> 4.0.0`
*   `~> 3.1 OR ~> 4.0.0`
*   `~> 3.1 || ~> 4.0.0`
*   `~> 3.1 ~> 4.0.0`

没有一个工作。**当前的 RubyGems 版本有可能吗？**

现在我使用 > 3.1，但真正的问题是这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:40:55.653

由于您使用的是`~>`，因此您似乎愿意使用 3.1 之后的任何 gem 版本，即任何 3.x 或任何 4.0.x，但不是 x 大于 1 的 4.x。

如果这是您的意图，那么根据[ruby​​gems guide](http://guides.rubygems.org/patterns/#declaring-dependencies)，您将需要使用如下模式：

```
spec.add_dependency 'library', ['>= 3.1', '< 4.1'] 
```

我认为这可能是您需要添加括号。

# vba - 在 Excel 工作表上触发查询并将结果填充到组合框中

> ID：12447417
> 
> 赞同：-2
> 
> 时间：2012-09-16T13:53:39.850
> 
> 标签：vba, excel, excel-2007

我有一个名为“公司”和“项目”的两列

我想为特定公司选择所有项目并将生成的产品列表填充到 ComboBox 中。

我认为 ADODB 将是实现这一目标的最佳方式。我不知道如何制作连接，命令对象等。请提供详细的代码来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:12:37.260

我已经使用以下代码完成了！

```
Dim cn
Set cn = CreateObject("ADODB.Connection")
With cn
    .Provider = "Microsoft.Jet.OLEDB.4.0"
    .ConnectionString = "Data Source=" & ThisWorkbook.FullName & "; Extended Properties=Excel 8.0"
    .Open
End With

Dim ObjRes
Set ObjRes = cn.Execute("Select * from [SourceData$]")
Do Until ObjRes.EOF
    cmbCompany.AddItem ObjRes.Fields.Item("Company").Value
    cmbProject.AddItem ObjRes.Fields.Item("Project").Value

    ObjRes.MoveNext
Loop

Set ObjRes = Nothing 
```

# php - 执行脚本时的注意事项？

> ID：12447421
> 
> 赞同：-2
> 
> 时间：2012-09-16T13:54:12.933
> 
> 标签：php

为什么我在本地服务器上执行 php 文件时会收到通知？这是否意味着我的文件中有错误？像这样的通知：

```
Notice: Use of undefined constant l - assumed 'l' in C:\xampp\htdocs\weekday.php on line 3  
Notice: Use of undefined constant Monday - assumed 'Monday' in C:\xampp\htdocs\weekday.php on line 6* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:02:46.670

您可能会收到通知，因为您打开了调试。它可能看起来像这样：

```
 error_reporting(E_ALL);
   ini_set('display_errors', True); 
```

要定义一个常量，你需要做

```
 define("Monday","value"); 
```

此外，用大写字母命名常量也是一个 php 约定。我建议您遵守此约定，以便在阅读代码时将常量与常规字符串区分开来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T13:59:52.907

这些通知可以*准确*地告诉您问题出在哪里。

查看 weekday.php 的第 3 行，您会看到一个您使用的地方`l`并意识到它是一个未定义的常量（查找常量）

您可能的意思是它是一个变量（查找变量 - 它们`$l`以 PHP 中的 $ 开头）或字符串常量（查找字符串 - 它们被引号包围，如`"l"`or `'l'`）

提到“星期一”，我假设你的意思是它是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:58:44.333

是 通知意味着您有错误。如您所见，它解释了错误在哪里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T14:02:49.297

错误和通知是有区别的。错误将停止您的脚本运行；一个通知是 PHP 告诉你你的脚本有问题，它在猜测你的实际意思。

像这样的通知：

```
Notice: Use of undefined constant Monday - assumed 'Monday' in C:\xampp\htdocs\weekday.php on line 6* 
```

意味着您正在使用类似的东西：

```
if ($day == Monday) ..... 
```

PHP 猜测你的意思是一个包含星期一文本的字符串，它是正确的。

您不必修复通知 - 您的代码仍会运行。但这绝对是一个好主意——它会确保你的脚本完全按照你的意图执行。

# xcode - Xcode 构建失败并显示“路径上的数据模型编译失败” - 并且不适用于针对类似问题的建议 StackOverFlow 修复

> ID：12447424
> 
> 赞同：9
> 
> 时间：2012-09-16T13:54:21.740
> 
> 标签：xcode, svn, core-data

嗨，我的 Xcode 项目昨天开始无法构建并出现错误：

> 路径“/Users/cooldocman/Library/Developer/Xcode/DerivedData/cooldocs-ejjarvdamwdcbbcpahhnbweztrmh/Build/Products/Debug-iphonesimulator/cooldocs.app/cooldocs.momd/cooldocs.mom”的数据模型编译失败

我在 StackOverflow 和其他网站上进行了研究——对于类似的声音问题的建议修复都没有对我有用。问题似乎出在 SVN、Xcode、Core Data 和 XCUserState 的交汇处，我已经尝试了从 StackOverflow 和其他网站上找到的信息中的一些步骤，但仍然没有解决这个问题。

这是我到目前为止所尝试的：

1.  一篇 stackoverflow 文章建议清理 SIMulator 应用程序文件夹：所以我从 /Users/cooldocman/Library/Application Support/iPhone Simulator/5.1/Applications 下删除了应用程序...错误仍然存​​在...

2.  另一个 stackoverflow 线程建议删除临时 DerivedData 文件夹。所以我删除了 /Users/cooldocman/Library/Developer/Xcode/DerivedData 下的所有文件夹（错误消息中的文件夹，即 /Users/cooldocman/Library/Developer/Xcode/DerivedData/cooldocs-ejjarvdamwdcbbcpahhnbweztrmhwere 因此被删除）

3.  另一篇文章说要删除Archives文件夹的内容... /Users/cooldocman/Library/Developer/Xcode/Archives

即使在第 2 步和第 3 步之后仍然没有运气

1.  即使在所有清理之后，当我 grep 项目的内容时，我仍然看到对旧的“cooldocs-ejjarvdamwdcbbcpahhnbweztrmh”文件夹的引用仍然存在......

    $ grep ejjarvdamwdcbbcpahhn */* /*/ */* /* 二进制文件 trunk/cooldocs.xcodeproj/project.xcworkspace/xcuserdata/cooldocman.xcuserdatad/UserInterfaceState.xcuserstate 匹配

现在我该如何清理*这个*？

也许我需要的秘密是如何清理这个剩余的 xcuserdata 并希望这将解决问题 - 或者，使用寻宝类比，它至少可以打开通往另一个需要爬下的神秘隧道的大门！（当我走出最后一个洞穴时，我就可以开始真正需要做的事情了！）

感谢您阅读并感谢该小组的任何帮助和见解！

:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:01:53.097

关于 xcuserdatad 文件夹，为什么不直接关闭 Xcode 并在 Finder 或终端中删除它？这样做是安全的。下次你用 Xcode 打开项目时，它会为你重新创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T18:46:35.860

我遇到了同样的问题，但没有任何建议有效。我终于删除了包含我的项目的整个目录，并从 Github 再次克隆了它，它解决了这个问题。可能某些被 git 忽略的文件没有恢复，但我没有时间找出它是哪个文件。

# adobe-illustrator - illustrator cs3-无法打开具有多个页面的较新的ai文件

> ID：12447425
> 
> 赞同：0
> 
> 时间：2012-09-16T13:54:44.817
> 
> 标签：adobe-illustrator, cs3

我正在尝试在 ai cs3 中打开一个 illustrator 文件。该文件是在较新版本的 Illustrator 中创建的，由 2 页组成。当我在 cs3 中打开文件时，我只得到第 1 页。

如何提取第二页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T05:41:18.843

Adobe 在 Illustrator CS4 中进行了重大更改，因为它可以在一个文件中包含多个（最多 99 个）画板。但是 CS3 一次打开一个画板。

因此，您可以安装更新版本或使用安装了 CS4 的机器打开 CS4 文件并将其转换为 CS3。

希望这有效。:)

# mongodb - Mongodb中的标签感知分片

> ID：12447426
> 
> 赞同：3
> 
> 时间：2012-09-16T13:54:53.507
> 
> 标签：mongodb, sharding

我一直在阅读标签感知分片。这些是我提到的链接：
[http ://www.mongodb.org/display/DOCS/Tag+Aware+Sharding](http://www.mongodb.org/display/DOCS/Tag+Aware+Sharding)
[http://www.kchodorow.com/blog/2012/ 07/25/controlling-collection-distribution/](http://www.kchodorow.com/blog/2012/07/25/controlling-collection-distribution/)
Kristina 以非常清晰的方式解释了这个概念，有一点是肯定的：这种增强将使 MongoDB 对开发人员更加友好。

但我的问题是..看起来标记/重新标记是为了轻松迁移块..将所有写入都写入首选数据中心等..但这如何适应旧的范围分区系统和 Mongo 的学习方式平衡的关键分布？据说 shard-key 不能更改，这是因为假设数据分布在 shard 之间，更改 shard-key 会干扰这一点。应用标签本质上不是在做同样的事情吗？那么标签感知分片是否*意味着*处理这个问题？

**编辑：**
知道索引如何受到如此巨大的迁移的影响吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T00:09:07.890

阿弗林，

你是对的。在这个阶段，分片标记执行许多与平衡分片键相同的功能。它不做的一件事是执行除标记之外的任何级别的分发。所以说标记架构存在于现有的分片架构之上可能更正确。

您必须记住，标记仅适用于：

a) 标记数据将去哪里，未标记数据将使用 shard-key

b) 在多个标记服务器之间共享的标记数据仍需要分发

您当然可以使用标签感知分片以与平衡器现在相同的方式手动控制数据分布，方法是制作足够细化的标签，以便将数据放在您想要的地方并均匀分布。

但是，用例更像是您链接的文档。您将大量分片分解为较小的子集。在此示例中，您将标记每个对象，然后标记会将其推送到正确的地理位置（以降低延迟检索），一旦进入正确的地理位置，原始分片架构将接管并在标记的分片之间分配。

至于索引，它们受到迁移的严重影响，因为它们需要重新指向。但是对于大量的块迁移来说，负载水平是相同的——比如向集群添加一个新的分片。

# c++ - C++ 维护子类对象的混合集合

> ID：12447427
> 
> 赞同：2
> 
> 时间：2012-09-16T13:54:58.280
> 
> 标签：c++, inheritance, collections, copy-constructor, derived-class

抱歉，如果我在这里遗漏了一个相当基本的概念，但我正在尝试解决如何维护多个类类型的集合（所有类都派生自同一个父类），并且在检索它们时仍然可以访问它们的子类特定方法从收藏。

作为上下文，我有一个基类（“BaseClass”）和许多类（比如“SubClassA”到“SubClassZ”），它们都派生自这个基类。我还需要维护一个包含所有子类对象的中央索引集合，这些对象是我创建的

```
typedef unordered_map<std::string, BaseClass*> ItemCollectionType;
ItemCollectionType Items; 
```

该列表将只包含子类对象，但我已将列表成员类型定义为“BaseClass”指针，以便它可以存储任何子类的实例。到目前为止，我假设这种方法没有什么特别糟糕的（但如果我错了，请纠正我）。

我遇到的问题是，有时我需要创建这些集合及其内容的副本。我为此拥有的（简化）代码如下：

```
ItemCollectionType CopiedItems;
ItemCollectionType::const_iterator it_end = Items.end();

for (ItemCollectionType::const_iterator it = Items.begin(); it != it_end; ++it) 
{
    BaseClass *src = it->second;
    BaseClass *item = new BaseClass(src);
    NewItems[item->code] = item;
} 
```

这里明显的问题是编译器只会调用 BaseClass 复制构造函数，而不是“src”实际指向的 SubClass，因为它不知道它是什么类型的 SubClass。

对于这种情况，推荐的方法是什么？我是否应该通过添加到 BaseClass 类型的集合来“丢失”这个子类类型信息？我看不到任何其他方式来维护收藏，但请让我知道任何更好的选择。

每个 SubClass 对象都包含一个数字 ID，表示它是哪种风格的子类；因此，是否可以编写一个函数将该数字 ID 转换为“类型”对象，然后在调用复制构造函数之前使用该对象转换源对象？这是模板的有效用途吗？

当然，这可能是糟糕的编程实践和/或不可能。我只是确定应该有比最简单和最难维护的解决方案更好的选择

```
switch (src->code)
{
    case SubClassTypes::VarietyA:
        SubClassA *item = new SubClassA( *((SubClassA*)src) );
        Items[item->code] = item;
        break;
    case SubClassTypes::VarietyB:
        SubClassB *item = new SubClassB( *((SubClassB*)src) );
        Items[item->code] = item;
        break;
    ...
    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T13:59:06.827

您可以定义`Clone`将在每个子类中实现的抽象方法。

```
virtual BaseClass* Clone() = 0; 
```

不仅仅是打电话：

```
for (ItemCollectionType::const_iterator it = Items.begin(); it != it_end; ++it) 
{
    BaseClass *src = it->second;
    NewItems[item->code] = src->Clone();
} 
```

另请注意，C++ 支持返回值协方差，因此您的派生类可以返回确切的类型，而不仅仅是基类，例如

```
// in DerivedClass (which derives from BaseClass)
DerivedClass* Clone() { ... } 
```

尽管返回类型与基类中的不同，但这被认为是适当的覆盖。

基于属性将基类指针转换为派生类不被认为是良好的 OOP 实践。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T13:58:32.460

在您的子类中创建一个新函数（也许在您的基类中使其成为纯虚拟函数），类似于以下内容，

```
BaseClass * SubClassA::copy(){ /* Copy construtor like code. */ } 
```

当您调用 BaseClass->copy() 并在子类上调用复制构造函数时，这将调用动态绑定。

# php - 如何在.htaccess中自动重写？

> ID：12447431
> 
> 赞同：0
> 
> 时间：2012-09-16T13:55:22.193
> 
> 标签：php, apache, .htaccess

我在 .htaccess 中这样做：

```
RewriteRule ^([A-Za-z0-9-]+)[/]?$ /index.php?u1=$1 [L,QSA]
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)[/]?$ /index.php?u1=$1&u2=$2 [L,QSA]
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/([A-Za-z0-9-]+)[/]?$ /index.php?u1=$1&u2=$2&u3=$3 [L,QSA]
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/([A-Za-z0-9-]+)[/]?$ /index.php?u1=$1&u2=$2&u3=$3&u4=$4 [L,QSA] 
```

有什么方法可以根据 url 的长度自动从 u1 到 u(infinite)，而不必定义每种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:08:27.820

不，Apache 和正则表达式都不提供对未指定数量参数的编程处理。但是 PHP 是为这样的事情而设计的，所以你最好只使用一个规则：

```
RewriteRule ^([A-Za-z0-9/-]+)$ /index.php?path=$1 
```

然后让您的 PHP 脚本通过在正斜杠字符上调用[explode](http://php.net/manual/en/function.explode.php)`path`函数来分解变量。你会得到一个包含完整路径的每一部分的数组。

通过这种方式，您的 PHP 脚本可以处理无限数量的路径元素，并且 Apache 无需费力地尝试理解无限的正则表达式模式。

# php - 表单提交到目录？可能的？

> ID：12447435
> 
> 赞同：1
> 
> 时间：2012-09-16T13:56:01.647
> 
> 标签：php, html, forms, input, action

我知道这听起来可能有点愚蠢。但是我从 github 下载了一个脚本，并意识到它的一个表单提交实际上将表单输入引用到一个文件夹/目录而不是单个 php 文件。

我现在的问题是，如果是这种情况，是否意味着文件夹本身中的所有脚本都能够获得我的 $_POST 表单输入结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T14:04:18.200

> 它的表单提交实际上将表单输入引用到文件夹/目录

在 HTTP URI 中没有这样的东西。所有 URI 都将指向一个资源。由服务器决定如何响应该资源。

看起来像 URI 中的目录的东西可能会映射到文件系统上的真实目录。Web 服务器通常会使用`DirectoryIndex`指令之类的东西来使用默认文件。

它可能会映射到上面几个级别的文件，然后由它处理：`http://example.com/foo.php/bar/baz/`从URI`foo.php`读取并对其进行处理。`/bar/baz/`

它可能有一个显式映射（例如使用`ScriptAlias`指令），在内部将它映射到另一个脚本。

它可能有一个程序映射（例如，使用 mod_rewrite），它使用正则表达式将其映射到其他东西（可能将“目录”分解为不同的查询字符串参数）。

还有很多其他的可能性。

> 我现在的问题是，如果是这种情况，是否意味着文件夹本身中的所有脚本都能够获得我的 $_POST 表单输入结果？

从理论上讲，可以将服务器配置为将 POST 请求传递到文件系统目录中的每个脚本，然后返回复合响应。不过，我从未见过有人尝试过（或想尝试过）。上述解释之一的可能性更大。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T13:57:59.800

假设你在谈论类似的事情：

```
<form method='post' action='some/directory'> 
```

它期望由 Web 服务器作为目录索引提供的文件（例如`index.php`）接收表单 post 并处理输入。因此，您不是将表单发布到目录，而是发布到访问目录时 Web 服务器执行的默认文件。

标签的`action=`属性`<form>`只需要是一些相对或绝对的 URI - 它不必指向实际存在的文件。由 Web 服务器根据目录索引规则、重写规则等来确定要执行的脚本。

# php - 引用另一个同级元素的数组项

> ID：12447436
> 
> 赞同：-1
> 
> 时间：2012-09-16T13:56:07.580
> 
> 标签：php, arrays, object, items

我可以用 PHP 或任何其他方式做到这一点吗？我想引用数组中的另一个元素。

```
$config = array(
    'factory-code'  => array(
        '01', '02'
    ),
    'commodity-filter'  => array(
        'factory' => array(
            'steel'     => array( $this->factory-code ),
        ),
        'branch' => array(
            'steel'     => array( $this->factory-code, '09' ),
        )
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:31:47.523

您必须在单独的数组中创建工厂代码

```
$factory_code  => array('01', '02');

$config = array(
    'factory-code'  => $factory_code,
    'commodity-filter'  => array(
        'factory' => array(
            'steel'     => array( $factory_code ),
        ),
        'branch' => array(
            'steel'     => array( $factory_code, '09' ),
        )
    )
); 
```

# ssh - 即使以前工作过，EC2 SSH 端口 22 连接也被拒绝

> ID：12447438
> 
> 赞同：7
> 
> 时间：2012-09-16T13:56:14.480
> 
> 标签：ssh, amazon-ec2, amazon-web-services

我有一个 EC2 实例，我在上面托管了几个站点，而且它以前运行得非常好。

今天我尝试通过 SSH 连接它，它只是拒绝端口 22 上的连接，即使安全组已打开它并且安全组已设置为实例。

任何人都可以帮助我了解为什么会出现这种情况？

我每次都得到这条线 - ssh：连接到主机 54.247.99.86 端口 22：连接被拒绝

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:33:34.253

如果您的实例是基于 EBS 而不是实例存储，则首先将 ami 映像作为备份，然后停止实例，启动新的原始实例。

由于您的旧实例是基于 EBS 的，因此分离卷并将其附加到新实例。将其挂载到某个目录后，更改权限 /var/empty/sshd，同时执行 cat /etc/fstab 以了解 / 分区挂载在哪里。现在将卷从新实例附加到旧实例中，并使用您在 fstab 中的确切挂载点（例如 /dev/sda1 for /）卸载卷。

连接后，启动旧实例并检查您是否能够登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T20:50:17.947

要解决此问题，您可以按照以下步骤进行操作：

1.  在同一区域启动一个新实例（以便我们稍后将 EBS 卷附加到它）。
2.  停止当前实例并分离 EBS 卷
3.  将该卷附加到位于 /dev/sdf 的新实例。
4.  SSH 进入新实例并运行以下命令：sudo mount /dev/sdf /mnt
5.  运行这个命令：cat /mnt/etc/rc.d/rc.local

如果输出包含这些行，请将其从 rc.local 文件中删除：

```
 cat <<EOL >> /etc/ssh/sshd_config
    UseDNS no
    PermitRootLogin without-password
    EOL 
```

6.  修改 rc.local 文件后，您可以卸载 EBS 卷，将其与临时实例分离，然后将其附加回位于 /dev/sda1 的原始实例。您应该能够通过 SSH 连接到您的实例。

这似乎是一个临时修复。如果您重新启动，这将再次发生。我也在寻找永久修复。

# c# - 无法在从后台 Worker 加载的表单中使用 WebBrowser 控件？

> ID：12447445
> 
> 赞同：1
> 
> 时间：2012-09-16T13:57:34.433
> 
> 标签：c#, .net, facebook-like, webbrowser-control, backgroundworker

我有一个带有两个表单的 Windows 表单应用程序，`Login`并且`Account`

在登录表单中，我有`backgroundWorker1`

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{

// doing some heavy work ...

Account acc = new Account(entered_username, entered_password, true);
acc.ShowDialog();
acc.Dispose();
}

//.... 
```

和`Button1`

```
//...

private void Button1_Click(object sender, System.EventArgs e)
    {

        showOrHideLoading();
        backgroundWorker1.RunWorkerAsync();

    }

//... 
```

当我单击 button1 时，Account 表单正确显示，但在将 WebBrowser Control 添加到 Account 表单后，应用程序无法按预期工作，当我单击 Button1 时，没有任何反应！

将 WebBrowser Control 与 BackgroundWorker 一起使用是否有任何限制？

我需要使用 WebBrowser 显示一个链接（到 facebook like 按钮），是否有另一种方法可以在不使用 WebBrowser 控件的情况下在 Windows 窗体应用程序中显示 html 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:15:56.397

除非您有充分的理由，否则请尝试始终将 UI 保持在同一个线程上。

将您的“繁重工作”放在后台线程中并显示进度对话框或其他任何内容。

完成后，然后启动 Web 浏览器表单。

# c# - 应用程序是否需要 app.config

> ID：12447449
> 
> 赞同：3
> 
> 时间：2012-09-16T13:57:49.830
> 
> 标签：c#, winforms, app-config

以前对我的英语感到抱歉...我想在 app.config 中存储连接字符串

我的应用程序在构建后是否需要 app.config 文件我试图删除 app.config 然后从发布文件夹运行应用程序但没有出现错误，但是从调试文件夹中我得到了一个。

那么 app.config 的键嵌入到应用程序中的哪个位置呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:00:27.280

默认情况下，当您构建时；app.config 被重命名`<YourAssembly>.exe.config`并复制到输出目录。

这就是为什么即使您删除了 app.config 它仍然有效 - 旧的 .config 仍在输出目录中。尝试在该目录中查找 .config 文件。

# c# - 选择项目后如何从 AutoCompletBox 移动焦点？

> ID：12447451
> 
> 赞同：0
> 
> 时间：2012-09-16T13:58:00.593
> 
> 标签：c#, .net, wpf, wpftoolkit

在我的应用程序中，用户可以将项目添加到`ListBox`. 我希望用户能够在从 中选择新项目后通过再次`AutoCompleteBox`按*回车键*来添加新项目。我认为将`IsDefault`属性设置`True`为`Add`按钮就足够了。

MainWindow 代码如下所示：

```
<ListBox Name="listBox1" />

<Button Name="button1" Content="Add" IsDefault="True" Click="button1_Click" />

<my:AutoCompleteBox Name="autoCompleteBox1" 
                IsTextCompletionEnabled="True"
                PreviewKeyDown="autoCompleteBox1_PreviewKeyDown"/> 
```

由于设置`IsDefault`不起作用，因为它自己保持焦点，然后我尝试通过检查是否按下*返回键*并尝试将焦点设置到按钮`AutoCompleteBox`来响应事件。`KeyDown`

 *但是在选择一个项目后按下*Return 键*并没有触发该`KeyDown`事件。所以我终于订阅了这个`PreviewKeyDown`活动并这样做：

```
public partial class MainWindow : Window
{
    ObservableCollection<string> myCollection = new ObservableCollection<string>();

    public MainWindow()
    {
        InitializeComponent();

        listBox1.ItemsSource = myCollection;
        autoCompleteBox1.ItemsSource = new string[] { "item1", "item2", "item3", "item4", "item5" };
    }

    private void autoCompleteBox1_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Return)
        {
            button1.Focus(); 
        }
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        if (autoCompleteBox1.SelectedItem != null)
            myCollection.Add((string)autoCompleteBox1.SelectedItem);
    }
} 
```

但是按钮没有获得焦点。我怎样才能将焦点从`AutoCompleteBox`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:06:05.660

使用 KeyUp 事件。KeyDown 在改变焦点的周期中为时过早。*

# python - 实现数值方法总是返回 NotImplemented

> ID：12447462
> 
> 赞同：4
> 
> 时间：2012-09-16T13:59:28.133
> 
> 标签：python, python-c-api

我正在编写一个新的扩展类型，但在设置数字运算（例如加法/减法/乘法）时遇到问题。我已经设法设置了一些就地操作，而没有调用正常操作。

例如，我有以下功能：

```
static PyObject *
MyType_Mul(PyObject *v, PyObject *w)
{
    PyErr_SetString(PyExc_ValueError, "testing");
    return NULL;
} 
```

我在这样的数字方法中设置它：

```
static PyNumberMethods my_type_as_number = {
    0,  /* nb_add */
    0,  /* nb_sub */
    (binaryfunc)MyType_Mul,  /* nb_mul */
    ...
    0,  /* nb_in_place_add */
    0,  /* nb_in_place_sub */
    (binaryfunc)MyType_Mul,  /* nb_in_place_mul */
    ...
}; 
```

现在，当我尝试使用我的类型时，我得到了这种行为：

```
>>> from mytype import MyType
>>> a = MyType()
>>> a * 2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for *: 'mytype.MyType' and 'int'
>>> 2 * a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for *: 'int' and 'mytype.MyType' 
```

但是，如果我使用就地运算符：

```
>>> a *= 2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: testing 
```

如果我`dir()`在对象上使用，我可以看到`__mul__`and`__rmul__`方法（这意味着 python 看到它们），但似乎根本没有调用它们。使用`a.__mul__(2)`退货`NotImplemented`。

还：

```
>>> a.__mul__
<method-wrapper '__mul__' of mytype.MyType object at 0x7fc2ecc50468>
>>> a.__imul__
<method-wrapper '__imul__' of mytype.MyType object at 0x7fc2ecc50468> 
```

所以，正如你所看到的，它们是*完全*一样的。

这是怎么回事？为什么相同的功能适用于就地运算符而不适用于“正常”运算符？我也认为我可能使用了错误的插槽，但我仔细检查了它是正确的，并且将它设置为`nb_add`等`nb_sub`也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:09:40.410

感谢 nneonneo 的评论，我明白出了什么问题。基本上我忘了设置[`Py_TPFLAGS_CHECKTYPES`](http://docs.python.org/c-api/typeobj.html#Py_TPFLAGS_CHECKTYPES)标志。

在我给出的描述中，有一些关于这种缺失的线索：

1.  这些方法是同一个对象，但它对就地操作的作用不同
2.  在评论中，我还说过，例如，做`a*a`会产生正确的结果，而做`a*different-type`不会。

这显然意味着解释器在执行非就地操作时正在检查参数的类型，如果类型为 ，则调用我的函数`MyType`，否则返回`NotImplemented`。

在文档中搜索一下很容易看出这是数字方法的默认行为。

如果参数类型不属于同一类，则假定操作未实现。

要允许不同类型一起“操作”，您必须在以下位置设置`Py_TPFLAGS_CHECKTYPES`标志`MyType`：

```
static PyTypeObject MyType = {
    PyObject_HEAD_INIT(&PyType_Type)
    0,                         /*ob_size*/
    "mytype.MyType",           /*tp_name*/
    sizeof(MyTypeObject),      /*tp_basicsize*/
    0,                         /*tp_itemsize*/
    ...
    0,                         /*tp_repr*/
    &mytype_as_number,         /*tp_as_number*/
    0,                         /*tp_as_sequence*/
    ...
    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_CHECKTYPES,/*tp_flags*/
    ...
}; 
```

设置此标志后，解释器将不会检查类型，因此您必须手动处理它们。

相反，就地运算符总是允许不同的类型。为什么会这样，我不知道。

# matlab - 在 if 块中只输入一次的最佳方法

> ID：12447463
> 
> 赞同：0
> 
> 时间：2012-09-16T13:59:30.697
> 
> 标签：matlab, if-statement

我有一个for循环

```
for n= 1: 100
  x=rand()*10;
  if x > 5
    do something
  end
end 
```

当我执行这个循环时，如果 x 大于 5，则程序进入 if 子句。即使条件为真，我也会创建一种仅在 if 子句中输入一次的方法。这可能是最好的方法吗？在 Java 中，我使用 boolean 创建了它，但 matlab 没有 boolean 类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:15:00.717

像这样的东西？

```
for n= 1: 100
  x=rand()*10;
  y = 0
  if x > 5 && y == 0
    do something
    y = 1
  end
end 
```

# android - Admob 代码不起作用

> ID：12447464
> 
> 赞同：-1
> 
> 时间：2012-09-16T13:59:31.530
> 
> 标签：android, admob

以下代码是我为了检查 admob 广告检索而实施的，但我无法获得任何广告，尽管代码甚至没有崩溃。请告知此代码中有什么问题。

```
public class MainActivity extends Activity {

    public AdView  admobView;
    public View mainView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        admobView = new AdView(this, AdSize.BANNER, "Top secret");
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);
        lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
        admobView.setLayoutParams(lp);
        //mainView.setLayoutParams(lp);

        RelativeLayout layout = new RelativeLayout(this);

        AdRequest adRequest = new AdRequest();

        //tested this
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);               // Emulator

        //tested this
        //adRequest.addTestDevice("20cb18e8ffc74ad2");

        //tested this
        //adRequest.addMediationExtra("3d879f364d5747c5", null);
        admobView.loadAd(adRequest);
        layout.addView(admobView);
        //layout.addView(mainView);

        setContentView(layout);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:39:54.800

您是否在清单中添加了 admob 的权限和配置更改。因为我已经运行了你的代码，它显示在我的模拟器中。而且为了显示添加您的应用程序的 targetSdkVersion 需要大于 14。

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<activity android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
        </activity> 
```

活动和你一样

```
public AdView  admobView;
    public View mainView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        admobView = new AdView(this, AdSize.BANNER, "a14f39f0b52dce6");
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);
        lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
        admobView.setLayoutParams(lp);
        //mainView.setLayoutParams(lp);

        RelativeLayout layout = new RelativeLayout(this);

        AdRequest adRequest = new AdRequest();

        //tested this
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);               // Emulator

        //tested this
        //adRequest.addTestDevice("20cb18e8ffc74ad2");

        //tested this
        //adRequest.addMediationExtra("3d879f364d5747c5", null);
        admobView.loadAd(adRequest);
        layout.addView(admobView);
        //layout.addView(mainView);

        setContentView(layout);
    } 
```

清单是==

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.ee"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
        </activity>
    </application>

</manifest> 
```

# java - 类路径资源 [java/lang/Object.class] 无法打开，因为它不存在

> ID：12447467
> 
> 赞同：2
> 
> 时间：2012-09-16T13:59:36.657
> 
> 标签：java, spring, exception, tomcat

我在使用 Spring Web 应用程序时遇到了一个奇怪的问题。这是来自Tomcat日志：

```
GRAVE: Exception lors de l'envoi de l'évènement contexte initialisé (context initialized) à l'instance de classe d'écoute (listener) org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to load bean class: com.jverstry.Configuration.WebConfig; nested exception is java.io.FileNotFoundException: class path resource [java/lang/Object.class] cannot be opened because it does not exist
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:267)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:622)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1247)
    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:714)
    at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:219)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.FileNotFoundException: class path resource [java/lang/Object.class] cannot be opened because it does not exist
    at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:157)
    at org.springframework.core.type.classreading.SimpleMetadataReader.<init>(SimpleMetadataReader.java:49)
    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:80)
    at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:101)
    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:76)
    at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:257)
    at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:149)
    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:126)
    at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:219)
    at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:149)
    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:126)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:263)
    ... 36 more
16-sept.-2012 15:51:56 org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext 
```

我在 SO 上看到过类似的问题，但没有一个与`java/lang/Object.class`. 我不知道是什么原因造成的。

这是我的`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <context-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </context-param>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>com.jverstry.Configuration</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <filter>
      <filter-name>springSecurityFilterChain</filter-name>
      <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
      <filter-name>springSecurityFilterChain</filter-name>
      <url-pattern>/*</url-pattern>
    </filter-mapping>

    <servlet>
        <servlet-name>mytest</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/mytest/*</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file></welcome-file>
    </welcome-file-list>

</web-app> 
```

这是我的`WebConfig`课：

```
@EnableWebMvc
@Configuration
@ComponentScan(basePackages = {"com.jverstry", "org.krams"})
@ImportResource("WEB-INF/spring-security.xml")
public class WebConfig extends WebMvcConfigurerAdapter {

    @Bean
    public ViewResolver getViewResolver() {

        InternalResourceViewResolver resolver
            = new InternalResourceViewResolver();
        resolver.setPrefix("WEB-INF/pages/");
        resolver.setSuffix(".jsp");

        return resolver;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:25:26.503

那是最奇特的。

让我们从我们所知道的开始。该类`java.lang.Object`和相应的`java/lang/Object.class`文件肯定确实存在。如果他们不这样做，那么 JVM 一开始就不太可能启动。

那么你怎么会得到例外呢？

我的理论是，在您的代码库（或您正在使用的库）的某个地方，有一个违反规则的类加载器。当要求加载资源时，表现良好的类加载器将首先委托类加载器链，以查看其父类加载器是否可以加载资源。我怀疑正在发生的事情是损坏的类加载器正在跳过委托步骤，只是试图加载资源本身。如果“rt.jar”不在其 JAR 列表等中（通常不会出现），则类加载器将找不到 Object.class 文件……您将获得一个`FileNotFoundException`.

* * *

**更新**

我想我明白。如果您的 Java 安装损坏到无法加载的程度`java.lang.Object`，那么 JVM 将无法启动。如果它在损坏之前已经启动，那么它就不会尝试加载`Object`类。

但它并没有尝试这样做。它实际上是在尝试读取`Object.class`文件。堆栈跟踪似乎在说这发生在 Spring 的注释处理代码中。

所以我认为在 Java 安装受到破坏后，某些东西触发了 servlet 重启。并且重新启动导致再次完成弹簧配置。为什么它在您重新启动时起作用是一个谜......除非问题是由于硬件错误或重新启动清除的卡住的设备驱动程序造成的。

（您找到的帖子描述了一个不同的场景...... JVM 在其引导期间失败。您的场景更复杂。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:28:26.370

原来我的 JRE6 安装不知何故损坏了。我手动重新安装了它，现在我没有问题了。我还发现了另一篇[文章](http://forum.ragezone.com/f578/fix-error-occurred-initialization-vm-720611/)，可以解释为什么重启后问题会消失。

# java - Eclipse 在使用“添加 JAR”时找不到某些库，如果使用“添加外部 JAR”则找到它们

> ID：12447470
> 
> 赞同：0
> 
> 时间：2012-09-16T14:00:02.443
> 
> 标签：java, eclipse, ide, libraries

我正在尝试将一些库添加到我的 Java 项目中。我的 IDE 是 Eclipse。参观

> 项目属性 -> Java 构建路径 -> 库

使我能够将库添加到我的项目中。如果我使用`Add External JARs`，我可以找到我所有的库（下面的屏幕截图）。

![在此处输入图像描述](../Images/1cdf74f4e8005fa2858c9343659a22c3.png)

但是，如果我在使用时尝试做同样的事情`Add JARs`，我会得到一个完全不同的屏幕（**列出的库甚至不存在！**）：

![在此处输入图像描述](../Images/96179def6a9af71f1b3bb9e39181a3e6.png)

我 100% 确定我正在浏览正确的目录。Eclipse 或类似的东西似乎存在缓存问题。

我很欣赏有关如何解决此问题的所有建议。也许工作区范围的设置重置可能已经到位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:13:59.607

使用`Add Jars`选项，您可以添加其中的所有罐子，您可以`present workspace` 从.`Add External Jars``file system`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T12:09:18.597

'Add Jar' -> 从你的工作区添加一个 jar 的源代码

“添加外部 jar” -> 添加外部 .jar 或 .zip 文件（在您的工作区中找不到的东西）

“添加库”-> 添加在您的系统或 Eclipse 中找到的已安装库

# javascript - 无法在 iPad 上将焦点设置到 tinyMCE 文本区域

> ID：12447472
> 
> 赞同：0
> 
> 时间：2012-09-16T14:00:09.513
> 
> 标签：javascript, jquery, focus, tinymce

我需要使用才能在兼容 iPad 的网站上使用多个[tinyMCE 。](http://www.tinymce.com) `<textarea>`

但是，当我在 iPad 上查看[站点示例网站](http://www.tinymce.com/tryit/multiple_configs.php)时，我无法让它专注于 2nd `<textarea>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:34:25.897

以编程方式，您可以使用`tinymce.get('your_editor_id').focus()`来聚焦您的编辑器。您所看到的编辑器不是文本区域，而是内容可编辑的 iframe。

# c# - 如何从枚举创建 IEnumerable

> ID：12447473
> 
> 赞同：10
> 
> 时间：2012-09-16T14:00:11.023
> 
> 标签：c#, .net, enums

> **可能重复：**
> [枚举上的 IEnumerable 扩展方法](https://stackoverflow.com/questions/1752194/ienumerable-extension-methods-on-an-enum)
> [如何使用泛型创建从枚举生成 IEnumerable 的方法？](https://stackoverflow.com/questions/12447799/how-can-i-use-generics-to-create-a-way-of-making-an-ienumerable-from-an-enum)

给定这样的枚举：

```
public enum City
{
    London    = 1,
    Liverpool  = 20,
    Leeds       = 25
}

public enum House
{
    OneFloor    = 1,
    TwoFloors = 2
} 
```

如何将这些转换为 IEnumerable 列表，其中包含两个名为“数据”和“值”的字段。是否有可能有一个通用的方法或方法来做到这一点？请注意，这些值并不总是连续的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-16T14:02:24.773

您可以使用[`Enum.GetValues`](http://msdn.microsoft.com/en-us/library/system.enum.getvalues.aspx)：

```
City[] values = (City[])Enum.GetValues(typeof(City));
var valuesWithNames = from value in values
                      select new { value = (int)value, name = value.ToString() }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T14:01:54.383

怎么样：

```
//Tested on LINQPad
void Main()
{
    var test = GetDictionary<City>();
    Console.WriteLine(test["London"]);
}

public static IDictionary<string, int> GetDictionary<T>()
{
    Type type = typeof(T);
    if (type.IsEnum)
    {
        var values = Enum.GetValues(type);
        var result = new Dictionary<string, int>();
        foreach (var value in values)
        {
            result.Add(value.ToString(), (int)value);
        }
        return result;
    }
    else
    {
        throw new InvalidOperationException();
    }
}

public enum City
{
    London = 1,
    Liverpool = 20,
    Leeds = 25
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T14:08:16.433

你可以试试这个：

```
var cities Enum.GetValues(typeof(City)).OfType<City>()
               .Select(x =>
                    new
                    {
                         Value =  (int)x,
                         Text = x.ToString()
                    }); 
```

**编辑**

用演员代替 OfType

```
var cities = ((IEnumerable<City>)Enum.GetValues(typeof(City)))
                                     .Select(x => 
                                         new 
                                         {
                                             Value =  (int)x,
                                             Text = x.ToString()
                                         }); 
```

# algorithm - 一个数的除数代码背后的逻辑

> ID：12447474
> 
> 赞同：0
> 
> 时间：2012-09-16T14:00:19.943
> 
> 标签：algorithm, math

**编辑**问题是找到像 1,3,6,10,15 这样的数字的除数，它遵循 n*(n+1)/2 模式。我得到了答案，谢谢

我正在由一位经验丰富的程序员浏览以下代码片段。

```
int number = 0;
int i = 1;

while(NumberOfDivisors(number) < 500){
    number += i;
    i++; 
```

我尝试了很多，但我无法理解以下代码部分。

```
number += i;
i++; 
```

为什么他不只是增加数字本身？如果他使用相同的代码，执行过程中不会丢失一些数字吗？其背后的逻辑是什么？

这是其余的代码

```
private int NumberOfDivisors(int number) {
    int nod = 0;
    int sqrt = (int) Math.Sqrt(number);

    for(int i = 1; i<= sqrt; i++){
        if(number % i == 0){
            nod += 2;
        }
    }
    //Correction if the number is a perfect square
    if (sqrt * sqrt == number) {
        nod--;
    }

    return nod;
} 
```

我理解了上面的部分。看不懂第一部分。

正如其中一个答案所说，迭代看起来像这样：

```
NumberOfDivisors(0)
    0 += 1
NumberOfDivisors(1)
    1 += 2
NumberOfDivisors(3)
    3 += 3
NumberOfDivisors(6) 
```

等等

他为什么要消除2,4,5等？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:19:12.137

原作者这样做是为了解决这个问题：[500 个除数的三角形数](http://www.mathblog.dk/triangle-number-with-more-than-500-divisors/)。按照链接获取解释，您发布的代码甚至在那里......

```
The sequence of triangle numbers is generated by adding the natural numbers.
So the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28.
The first ten terms would be:
1, 3, 6, 10, 15, 21, 28, 36, 45, 55, …
Let us list the factors of the first seven triangle numbers:
1: 1
3: 1,3
6: 1,2,3,6
10: 1,2,5,10
15: 1,3,5,15
21: 1,3,7,21
28: 1,2,4,7,14,28
We can see that 28 is the first triangle number to have over five divisors.
What is the value of the first triangle number to have over five hundred divisors? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:03:57.957

他不只是增加它。他在添加 i ，每次都会变大。

```
+= 1;
+= 2;
etc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T14:04:30.810

迭代看起来像这样：

```
NumberOfDivisors(0)
    0 += 1
NumberOfDivisors(1)
    1 += 2
NumberOfDivisors(3)
    3 += 3
NumberOfDivisors(6) 
```

等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T14:13:46.180

这是某种启发式方法，因为除数的数量呈非线性增长，最好以非线性顺序检查数字。我看不出它与[近似增长率](http://en.wikipedia.org/wiki/Number_of_divisors#Approximate_growth_rate)的关系，可能只是作者的随机直觉选择。

# php - 粉丝页面的 Facebook 默认地址连接

> ID：12447477
> 
> 赞同：0
> 
> 时间：2012-09-16T14:00:26.100
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试访问公共粉丝页面上的事件数据（页面是地方，所以他们有自己的地址）

问题是某些页面组织的活动不在页面所在的同一地点举行。我的意思是：`page venue != event venue`。

这不是问题，因为大多数活动都附加了场地属性。所以我可以解析它，太好了！它通常包含一个页面的 id，我可以抓取 lat 和 lng 并且我在家。

**但对于某些事件，`venue` `id`不存在。唯一`name`包含地址的值。**

现在，我想比较*page->location和**page->event->venue->name*返回的地址。**问题在于 location 是一个 JSON 对象，其中包含很少的 location 特征，而第二个是预先连接的字符串。**

```
 "name": "someClub",
   "location": {
      "street": "happy street",
      "city": "City",
      "country": "Country",
      "zip": "02-591",
      "latitude": 22.00,
      "longitude": 21.00

   "name": "happy street, 02-591 City, Country", 
```

我怀疑它的连接方式是特定于语言环境的。所以简单地以这种方式连接它是不够的（因为该项目是国际性的）。**问题：有人会告诉我是否有办法获得页面的预连接地址，或者这种 concat 方式是否是 fb 的默认方式？**

# c++ - 如何从 Node.js 调用 C++ 代码？

> ID：12447479
> 
> 赞同：20
> 
> 时间：2012-09-16T14:00:37.603
> 
> 标签：c++, node.js, performance, v8, ffi

我目前正在开发一个在服务器上运行并应在浏览器中显示数据的模拟器。

对于提供文件、通信和类似的东西，我想使用 Node.js。但是，我不确定它在计算部门是否会像我希望的那样执行，所以我想用 C++ 开发模拟部分。

模拟分为不同的“世界”，它们都以一些初始参数开始。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-16T22:30:05.717

好吧，V8 允许从 JavaScript 调用 C++ 代码。

所以你可以有你的代码的 3 部分：

*   普通 C++，不知道 node.js 和 V8。这将是在哪里`World`。
*   粘贴 node.js/V8-C++ 代码，让 JS 可以“看到”你的`World`类的一部分。
*   普通 JavaScript 代码，通过“胶水”层与 C++ 端通信

首先，了解 V8 和 C++ 是如何通信的。谷歌为此提供了指南：[https ://developers.google.com/v8/embed](https://developers.google.com/v8/embed)

然后，您需要 node.js 特定的胶水。请参阅[http://www.slideshare.net/nsm.nikhil/writing-native-bindings-to-nodejs-in-c](http://www.slideshare.net/nsm.nikhil/writing-native-bindings-to-nodejs-in-c)和[http://syskall.com/how-to-write-your-own-native-nodejs -延期](http://syskall.com/how-to-write-your-own-native-nodejs-extension)

从上面的幻灯片链接：

```
#include <v8.h>
#include <node.h>

using namespace v8;

extern "C" {
   static void init(Handle<Object> target) {}
   NODE_MODULE(module_name, init)
} 
```

我们可以将其扩展为更接近您想要的内容：

src/world.h

```
#ifndef WORLD_H_
#define WORLD_H_

class World {
    public:
        void update();
};

extern World MyWorld;

#endif 
```

src/world.cpp

```
#include "world.h"
#include <iostream>

using std::cout;
using std::endl;

World MyWorld;

void World::update() {
    cout << "Updating World" << endl;
} 
```

src/bind.cpp

```
#include <v8.h>
#include <node.h>
#include "world.h"

using namespace v8;

static Handle<Value> UpdateBinding(const Arguments& args) {
    HandleScope scope;

    MyWorld.update();

    return Undefined();
}

static Persistent<FunctionTemplate> updateFunction;

extern "C" {
   static void init(Handle<Object> obj) {
      v8::HandleScope scope;

        Local<FunctionTemplate> updateTemplate = FunctionTemplate::New(UpdateBinding);

        updateFunction = v8::Persistent<FunctionTemplate>::New(updateTemplate);

      obj->Set(String::NewSymbol("update"), updateFunction->GetFunction());
   }

   NODE_MODULE(world, init)
} 
```

演示/demo.js

```
var world = require('../build/Release/world.node');
world.update(); 
```

脚本

```
def set_options(opt):
  opt.tool_options("compiler_cxx")

def configure(conf):
  conf.check_tool("compiler_cxx")
  conf.check_tool("node_addon")

def build(bld):
  obj = bld.new_task_gen("cxx", "shlib", "node_addon") 
  obj.cxxflags = ["-g", "-D_FILE_OFFSET_BITS=64", "-D_LARGEFILE_SOURCE", "-Wall"]
  # This is the name of our extension.
  obj.target = "world"
  obj.source = "src/world.cpp src/bind.cpp"
  obj.uselib = [] 
```

在 Linux shell 上，一些设置：

```
node-waf configure 
```

要构建，请运行：

```
node-waf 
```

去测试：

```
node demo/demo.js 
```

输出：

```
Updating World 
```

# c# - 想要从 asp.net 中的函数返回在 listview 中设置图像 url

> ID：12447481
> 
> 赞同：1
> 
> 时间：2012-09-16T14:00:47.917
> 
> 标签：c#, asp.net

```
<asp:ImageButton ID="Imagebtn" runat="server" ImageUrl=retriveurl('<%# Eval("id") %>') CommandName="viewalbum" CommandArgument='<%# Eval("id") %>' />
<asp:Label ID="product_nameLabel" runat="server" 
    Text='<%# Eval("product_name") %>' /> 
```

我想从另一个数据库表中设置图像 url，使用`Eval("id").query`可以返回几行。但我想从 datareader 设置最后一个 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:12:41.033

如果您想绑定 dataTable 中的最后一个 url，您可以通过调用一个单独的方法来自定义您的数据源，该方法将返回您所需的 url，然后可以绑定更新的数据源。

# php - CakePHP 用 Auth 记住我

> ID：12447487
> 
> 赞同：14
> 
> 时间：2012-09-16T14:01:36.583
> 
> 标签：php, session, cakephp, authentication, cookies

我已经成功使用了 Auth，但不幸的是，它似乎只适用于 Session。我希望如果用户选中“记住我”复选框，我会使用 Cookie，他会登录 2 周。我在官方书籍中找不到任何东西，在谷歌中我发现的博客文章很少而且不是很好。有没有办法在不重写核心的情况下实现这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-18T15:20:40.490

在您的用户控制器中：

```
public function beforeFilter() {
    $this->Auth->allow(array('login', 'register'));
    parent::beforeFilter();
}

public function login() {
    if ($this->request->is('post')) {

        if ($this->Auth->login()) {

            // did they select the remember me checkbox?
            if ($this->request->data['User']['remember_me'] == 1) {
                // remove "remember me checkbox"
                unset($this->request->data['User']['remember_me']);

                // hash the user's password
                $this->request->data['User']['password'] = $this->Auth->password($this->request->data['User']['password']);

                // write the cookie
                $this->Cookie->write('remember_me_cookie', $this->request->data['User'], true, '2 weeks');
            }

            return $this->redirect($this->Auth->redirect());

        } else {
            $this->Session->setFlash(__('Username or password is incorrect.'));
        }
    }

    $this->set(array(
        'title_for_layout' => 'Login'
    ));
}

public function logout() {
    // clear the cookie (if it exists) when logging out
    $this->Cookie->delete('remember_me_cookie');

    return $this->redirect($this->Auth->logout());
} 
```

在登录视图中：

```
<h1>Login</h1>

<?php echo $this->Form->create('User'); ?>
    <?php echo $this->Form->input('username'); ?>
    <?php echo $this->Form->input('password'); ?>
    <?php echo $this->Form->checkbox('remember_me'); ?> Remember Me
<?php echo $this->Form->end('Login'); ?> 
```

在您的 AppController 中：

```
public $components = array(
    'Session',
    'Auth',
    'Cookie'
);

public $uses = array('User');

public function beforeFilter() {
    // set cookie options
    $this->Cookie->key = 'qSI232qs*&sXOw!adre@34SAv!@*(XSL#$%)asGb$@11~_+!@#HKis~#^';
    $this->Cookie->httpOnly = true;

    if (!$this->Auth->loggedIn() && $this->Cookie->read('remember_me_cookie')) {
        $cookie = $this->Cookie->read('remember_me_cookie');

        $user = $this->User->find('first', array(
            'conditions' => array(
                'User.username' => $cookie['username'],
                'User.password' => $cookie['password']
            )
        ));

        if ($user && !$this->Auth->login($user['User'])) {
            $this->redirect('/users/logout'); // destroy session & cookie
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T18:31:09.270

请参阅此 URL，我认为它对您很有帮助。

[http://lecterror.com/articles/view/cakephp-and-the-infamous-remember-me-cookie](http://lecterror.com/articles/view/cakephp-and-the-infamous-remember-me-cookie)

**或者试试这个**

```
function login() {
    if ($this->Auth->user()) {
        if (!empty($this->data) && $this->data['User']['remember_me']) {
            $cookie = array();
            $cookie['username'] = $this->data['User']['username'];
            $cookie['password'] = $this->data['User']['password'];
            $this->Cookie->write('Auth.User', $cookie, true, COOKIE_EXPIRE);
            unset($this->data['User']['remember_me']);
        }

        $this->LogDetail->Write('activity','has logged IN');
        $this->redirect($this->Auth->redirect());
    }

    if (empty($this->data)) {
        $cookie = $this->Cookie->read('Auth.User');
        if (!is_null($cookie)) {
            if ($this->Auth->login($cookie)) {
                $this->Session->destroy('Message.Auth'); # clear auth message, just in case we use it.
                $this->LogDetail->Write('activity','has been authenticated via cookie and is now logged IN');

                $this->redirect($this->Auth->redirect());
            } else {
                $this->LogDetail->Write('activity','attempted to gain access with an invalid cookie');
                $this->Cookie->destroy('Auth.User'); # delete invalid cookie

                $this->Session->setFlash('Invalid cookie');
                $this->redirect('login');
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T08:58:21.263

使用 CookeAuthenticate 适配器：

[https://github.com/ceeram/Authenticate/blob/master/Controller/Component/Auth/CookieAuthenticate.php](https://github.com/ceeram/Authenticate/blob/master/Controller/Component/Auth/CookieAuthenticate.php)

这里更多信息：

[https://github.com/ceeram/Authenticate/wiki/Set-Cookie](https://github.com/ceeram/Authenticate/wiki/Set-Cookie)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-16T15:10:01.797

记住我只不过是用 cookie 标识的会话，但 cookie 的生命周期设置为无穷大。查看 Config/core.php 以了解会话 cookie 的生命周期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-24T10:29:41.327

you can try this

```
if ($this->Auth->login()) 
        {
            if (!empty($this->data['User']['remember']))
            {
                $cookie = array();
                $cookie['login'] = $this->data['User']['login'];
                $cookie['password'] = $this->data['User']['password'];
                                    $cookie['language'] =$this->data['User']['language'];
                $this->Cookie->write('Auth.projectname', $cookie, true, '+1 years');                                                        
                unset($this->data['User']['remember']); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-05T09:37:40.767

```
 public function admin_login() {
        $this->layout = 'admin_login';
        if (count($this->Session->read("Auth.User"))) {
            $usr = $this->Session->read("Auth.User");
            if ($usr['role'] == 'A' || $usr['role'] == 'RA' || $usr['role'] == 'MAfA' || $usr['role'] == 'Af' || $usr['role'] == 'FAA')
                return $this->redirect(array('controller' => 'dashboard', 'action' => 'view'));
        }
        if ($this->request->is('post')) {

            if ($this->request->data['User']['remember_me']=="1") {
//                pr($this->request->data);
//                die('sdd');

                $this->Cookie->write('username', $this->request->data['User']['username'], true, '1 year');
                $this->Cookie->write('password', $this->request->data['User']['password'], true, '1 year');
            } else {
                $this->Cookie->destroy();
            }
            /*
             * Check if email or username is passed in form
             */
            $uname = $this->request->data['User']['username'];
            //login via email
            if (filter_var($uname, FILTER_VALIDATE_EMAIL)) {
                $u = $this->User->findByemail($uname);
            } else { //login via username
                $u = $this->User->findByusername($uname);
            }
            if ($u) {
                $this->request->data['User']['username'] = $u['User']['username'];
                /*                 * *
                 * Error if user is not active
                 */
                if ($u['User']['user_status'] != 'active') {
                    $this->Session->setFlash(__('Sorry! Your account is not active.'), 'default', array('class' => 'alert alert-danger'));
                } elseif ($this->Auth->login()) { //if logged in
                    $user_caps = $this->fetchCapabilitiesByRole($u['User']['role']);
                    $this->Session->write("Auth.User.privileges", array('capabilities' => $user_caps['capabilities'], 'geo_areas' => array()));
                    if ($u['User']['role'] == 'A' || $u['User']['role'] == 'RA' || $u['User']['role'] == 'Af' || $u['User']['role'] == 'MAfA' || $u['User']['role'] == 'FAA')
                        return $this->redirect(array('controller' => 'dashboard', 'action' => 'view'));
                    return $this->redirect($this->Auth->redirect());
                }else { //if invalid
                    $this->Session->setFlash(__('Invalid username or password.'), 'default', array('class' => 'alert alert-danger'));
                }
            } else {//if user does not exists
                $this->Session->setFlash(__('User does not exists.'), 'default', array('class' => 'alert alert-danger'));
            }
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T11:01:21.423

我认为您需要了解 CakePHP 安全级别。尝试降低 cakePHP 的安全性。CakePHP 的配置变量[文档](http://book.cakephp.org/1.3/view/931/CakePHP-Core-Configuration-Variables)。很久以前我也写过一篇关于它的[博客。](http://www.connectech.in/blog/cakephp-problem-with-auth-component/)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-08-11T07:48:51.300

问题得到回答已经有一段时间了，但希望这可以帮助那些追随我的人。

我已经写了关于如何使用来自[Ceeram的 Authenticate Plugin 设置“记住我”功能的简短演练](https://stackoverflow.com/a/12527324)

更多信息在这里： http: [//mirkoborivojevic.com/posts/2013/08/10/setup-remember-me-functionality-in-cakephp/](http://mirkoborivojevic.com/posts/2013/08/10/setup-remember-me-functionality-in-cakephp/)

# google-app-engine - 如何将数据上传到本地数据存储？

> ID：12447489
> 
> 赞同：0
> 
> 时间：2012-09-16T14:01:45.050
> 
> 标签：google-app-engine

我可以使用远程 API 更新实时数据存储，但本地数据存储是否有类似的东西？我的数据是 CSV 格式。

当我尝试使用以下代码在本地连接时

```
String username = "test";
String password = "test";
    RemoteApiOptions options = new RemoteApiOptions().server("localhost", 8888).credentials(username, password);
RemoteApiInstaller installer = new RemoteApiInstaller();
installer.install(options); 
```

我得到一个例外：

线程“主”java.net.UnknownHostException 中的异常：http

异常在 line 抛出：

> 安装程序。安装（选项）；

本地服务器正在运行，我连接正确吗？我需要单独启动本地 remote_api 服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:39:03.923

我终于通过大量的搜索来解决这个问题。开发网址/密码为 XXXX/XXXX

取自这里：[https ://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/1cQWn0UEoMc](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/1cQWn0UEoMc)

我无法在谷歌应用引擎文档的任何地方找到这个指定的。

# java - 如何实现基于不同条件的集合过滤

> ID：12447492
> 
> 赞同：4
> 
> 时间：2012-09-16T14:02:31.337
> 
> 标签：java, android, design-patterns, collections, filtering

我正在制作一个 Android 应用程序，其中有一个项目列表（超过 500 个条目）、10 个过滤器按钮（复选框）和一个搜索框。

用户可以点击一个或多个过滤器并相应地更新列表。

我是这样做的：我从 10 个列表开始，每个列表仅由与过滤器匹配的项目初始化，然后当用户激活（例如）过滤器 1、3 和 7 时，我创建列表 1、3 的交集和 7 然后我浏览它以根据搜索查询对其进行过滤。

我发现这是迄今为止“最快”的方式，但我知道有更好、更有效的模式。你有什么推荐的，所以它需要更少的时间？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:33:31.333

您可以使用一系列策略模式。

```
interface IFilter
{
    List<Item> Filter(List<Item> items);
}

class FilterA implements IFilter
{
    public List<Item> Filter(List<Item> items)
    {
        //filter
    }
}

class FilterB implements IFilter
{
    public List<Item> Filter(List<Item> items)
    {
        //filter
    }
}

//list that would have filters added to it as the user activates filters
List<IFilter> filters = new List<IFilter>();    
//your list of items
List<Item> items = new List<Item>();

public List<Item> Filter() {
    for (IFilter filter : filters) {
        items = filter.Filter(items);
    }    
    return items;
} 
```

# php - 锁定具有特殊值的行？

> ID：12447495
> 
> 赞同：0
> 
> 时间：2012-09-16T14:02:48.550
> 
> 标签：php, mysql

> **可能重复：**
> [如何将 MySQL 行设置为只读？](https://stackoverflow.com/questions/10502298/how-to-set-a-mysql-row-to-read-only)

我需要临时保护表格的自定义行不被其他用户编辑。例如，当我插入具有此功能的行时：`tid = 51`; 不应该让任何人插入一行，或者至少同时插入一行`tid = 51`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:34:07.260

只需将列 (tid) 定义为 MYSQL（或任何其他 DBMS，几乎所有地方都支持此功能）中的 AUTO_INCREMENT 字段。您不必照看锁定，数据库会为您完成。

如果您在向数据库中插入一行之前需要此字段的值（这实际上并不总是一个好的设计），您应该使用随机生成的 UUID。因此，通过最小化具有两个相同值的概率来避免冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T14:17:56.370

通常，只有在将行插入数据库时​​才将**id分配给行。**在这一刻之前它是不存在的。在它之后，它已经被插入，并且没有其他人能够插入具有相同**id**的另一行（假设它是一个唯一索引的列）。

因此，您的示例似乎无效。无论如何，如果我们忽略这个例子并考虑开头的短语，这个问题仍然是有意义的：“*我需要暂时保护表格的自定义行不被其他用户编辑。* ”

在这种情况下，您需要将正在编辑的 ID 的值以及由哪个用户存储在某处。然后，您需要检查此数据以允许/禁止编辑操作。

事实上，这里的主要问题是 UNLOCK 阶段，这是由于 web/HTTP 应用程序的无状态特性。如果该行在其编辑或某种超时后未正确解锁，它将被永久锁定（而不是暂时锁定）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:20:13.920

您想要的与数据库设计的一切相吻合。我想要一个唯一的主键，使用自动增量字段。如果要强制使用唯一字段值，请使用字段约束，可能是唯一字段或唯一字段组合。

不要锁定表、行或数据库，几乎在任何情况下这都是糟糕的设计！

# android - PhoneGap 应用程序 - 图像模糊

> ID：12447498
> 
> 赞同：0
> 
> 时间：2012-09-16T14:02:52.323
> 
> 标签：android, jquery, cordova, jquery-mobile

我的 PhoneGap 应用程序中的图像有问题。图标图像显得模糊；我该如何解决这个问题？

![模糊的图标](../Images/52d3c3dba0388f5e75b3c288d4666365.png)

这是我的 CSS

```
#login input:first-child { background: rgba(255,255,255,0.0) url(../images/holo_dark/hdpi/5_content_email.png) no-repeat; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:57:31.327

我建议根据 android 中的 DPI 制作图标。就像三星 s2 有 1.5 dpi，所以我们必须将图标比正常大 1.5 倍，并通过 -webkit-background-size 调整图标。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T04:39:43.453

我建议将图像的大小加倍到需要的大小。然后将 CSS 规则设置为一半。这将涵盖您的屏幕是否大于标准 72ppi。

# time - 如果以这种方式实现，BST 中序遍历的时间复杂度

> ID：12447499
> 
> 赞同：5
> 
> 时间：2012-09-16T14:03:03.783
> 
> 标签：time, complexity-theory, binary-search-tree, traversal

通常，如果使用深度优先遍历，我们会得到`O(n)`时间。但是，如果我们先找到最小元素，然后调用`successor()`方法`n`次数，它的时间复杂度是多少？

我认为这可能是`O(n log n)`因为继任者是`O(log n)`，但这似乎不对。谁能在这里提供任何深入的分析（可能涉及一些极限分析）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T20:20:33.780

如果每个节点都存在父指针，则调用后继方法 n 次需要 O(n) 时间。为了看到这一点，观察到树中的每条边最多被所有后继调用组合访问两次（一次从父到子，一次从子到父）。因此，所有后继调用访问的边总数最多为 2n。所以运行时间是O(n)。

现在，如果不存在父指针，则在每次调用中，我们都必须从根开始并通过 O(log n) 个节点搜索后继元素（如果树是平衡的）。因此复杂度变为 O(n log n)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T14:23:28.073

不是一个正式的论点，但对于 O(n) 来说是一个相当有说服力的论点：

后继函数总是采用从起始节点到其后继节点的最短路径。它要么下降，要么上升，但一旦开始做一个，就不能改变另一个。因此，它必须采取最短路径。

后继函数必须产生与深度优先方法相同的输出，因此它必须以相同的顺序访问相同的节点（即输出的节点，它不必经过相同的节点，尽管它确实如此） .

深度优先方法也总是采用每个输出节点之间的最短路径（在每一步中它要么向下要么向上，而不是两者）。

因此，每种方法都采用完全相同的路径，实际上是等价的。

# python - 将两个列表“合并”到元组列表的 Pythonic 方式

> ID：12447500
> 
> 赞同：3
> 
> 时间：2012-09-16T14:03:12.910
> 
> 标签：python, list

假设我有两个列表

`L1 = [1,2,3]`

和

`L2 = [a,b,c]`

将其转换为列表的最快方法是什么`M = [(1,a),(2,b),(3,c)]`？

我试过`M = [(x,y) for x in L1 for y in L2]`了，但这给了我所有可能的元素组合。当然我可以写一个循环来做到这一点，但有没有更蟒蛇的方式来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T14:05:15.957

使用[`zip()`](http://docs.python.org/library/functions.html#zip).

> 该函数返回一个元组列表，其中第*i*个元组包含来自每个参数序列或可迭代对象的第*i个元素。*返回的列表在长度上被截断为最短参数序列的长度。

```
>> zip([1, 2, 3], ['a', 'b', 'c'])
[(1, 'a'), (2, 'b'), (3, 'c')] 
```

# iphone - 哪些工具提供 Xcode 调试器来查找逻辑错误？

> ID：12447502
> 
> 赞同：2
> 
> 时间：2012-09-16T14:03:24.267
> 
> 标签：iphone, objective-c, xcode, debugging

我有一个具有复杂逻辑的程序。在不同的地方有很多函数可以改变参数“a”的值。

参数“a”的正确值应该在 0..10 范围内，但有时它会变得大于 80

XCode 是否提供了一些工具，我可以只键入一次表达式“if (a > 10) throws some exception”并找到将参数“a”更改为不正确值的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:15:48.543

是`a`某物的属性吗？如果是，您可以覆盖 setter 方法并检查值：

```
- (void)setA:(int)newA {
    if (newA > 10) {
        NSLog(@"Invalid value");
    }
    a = newA;
} 
```

您可以在 NSLog 行上设置断点，每当设置了无效值时，它就会停在那里，您可以检查调用跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:10:38.113

我不确定如何设置它以便在更改的值时抛出异常`a`而不在更改值的地方调用它`a`，但是你可以`NSException`用这个来调用自己：

```
if (a > 10) {
    [NSException raise:@"Invalid foo value" format:@"foo of %i is invalid", a];
} 
```

# html - 如何隐藏嵌入式 swf 上的边框

> ID：12447504
> 
> 赞同：0
> 
> 时间：2012-09-16T14:03:25.157
> 
> 标签：html, css, wordpress, border

我无法隐藏嵌入的 .sfw 文件周围的灰色边框。它是由 Wordpress 插件插入的一个 swf，称为*shortcode*。SWF 在我的页面[上](http://a.vinylart.pl)。你能告诉我怎么做吗？

我编辑了插件 PHP 并给出`<object>`了`<embed>`类`#swf_object`。之后我编辑了 CSS 并试图隐藏这个边框，但它仍然存在。在此之前，我还尝试添加`border:none;`style.css（我的主题的样式）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:08:42.190

以下是隐藏边框的步骤，因为它无法删除：

`.home_display`添加_`overflow:hidden; height: 579px;`

并为您`.home_display`添加此 css 中的 flash 对象：

```
left: -1px;
position: relative;
top: -1px; 
```

# php - 在获取 android 客户端的结果时从 mongodb 操作光标结果时出错

> ID：12447507
> 
> 赞同：0
> 
> 时间：2012-09-16T14:03:41.333
> 
> 标签：php, android, mongodb, cursor

我正在从 android 客户端连接到本地 Web 服务器并从 mongodb 数据库中获取结果。

```
<?php
        $Earth_radius = 6378.137; //KM 
                $required_distance = 20; //KM

                if(! isset($_POST['long']) || ! isset($_POST['lat']) )
                {
                    echo 'NOT SET'; //exit();

                }

                $long = $_POST['lat'];
               $lat = $_POST['long'];

                // open connection to MongoDB server
                $conn = new Mongo('localhost');

                // access database
                $db = $conn->matabatdb;

                // access collection
                $collection = $db->matabat;

                $center=array($long,$lat);
                $radius=$required_distance/$Earth_radius; //convert to radians

                echo 'Im Ok here ';

               $result = $collection->find(array("loc"=>array('$within'=>array('$centerSphere'=>array($center,$radius)))));
    echo ' I can reach here';

var_dump($result->getNext());

         echo 'I do not reach this line';

?> 
```

对 $result 的任何操作都不会向 android 客户端提供任何反馈响应

```
 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);

            HttpEntity entity = response.getEntity();
            if (entity != null) {

                String responseText = EntityUtils.toString(entity);
                Pattern pattern=Pattern.compile(".*?<body.*?>(.*?)</body>.*?",Pattern.DOTALL);

                Matcher matcher=pattern.matcher(responseText);
                if(matcher.find()) {
                    String userID = matcher.group(1).trim();

                }
                else
                    Log.i(TAG," POST RESPONSE "+ responseText);

            }
            else
                Log.i(TAG," POST RESPONSE is NULL"); 
```

奇怪的是，如果我制作了一个 html 文件并手动发布数据，则代码在浏览器中工作，但对于 android，我在操作光标后没有收到任何数据，或者更具体地说，我没有收到任何数据。在 Android 中接收到该行之前的任何 echo 语句。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:10:58.910

如果 PHP 脚本在浏览器中运行。那么这可能是一个数据编码问题。

尝试使用 json_encode($result->getNext()) 而不是 var_dump($result->getNext())。

# sql - 查找给定月份的有效 SQL 查询介于两个日期之间

> ID：12447511
> 
> 赞同：0
> 
> 时间：2012-09-16T14:04:14.820
> 
> 标签：sql, sql-server

我的订阅表中有两个日期（`start_date`和`end_date`）。我想知道用户是否在指定月份订阅？例如：`start_date=11/20/2011 and end_date=03/10/2012`. 我想知道 . 月份订阅的所有用户`Feb-2012 (02/2012)`。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:25:22.800

假设您将 201202 作为感兴趣的月份作为字符串传递。

```
Declare @StartOfMonth DateTime
Declare @EndOfMonth DateTime

Set @StartOfMonth = Convert(DateTime,@MyMonth + '01')
Set @EndOfMonth = DateSubtract(day, 1,DateAdd(month, 1, @StartOfMonth)) 
```

这取决于您是否对整个月或一个月中任何部分的订阅感兴趣。

这将为您提供整个月的服务

```
Select * From Subscriptions Where
StartDate <= @StartOfMonth and EndDate >= @EndOfMonth 
```

或者这会让你在本月的任何时候得到这些

```
Select * From Subsciptions Where
(@StartOfMonth Between StartDate and EndDate)
Or
(@EndOfMonth Between StartDate and EndDate) 
```

好吧，反正就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T14:27:24.840

像这样的东西？

```
DECLARE @subscriptionStart datetime;
DECLARE @subscriptionEnd datetime;
DECLARE @monthStart datetime;
DECLARE @monthEnd datetime;
SET @subscriptionStart = '20111120';
SET @subscriptionEnd = '20120310';
SET @monthStart = '20120201';
SET @monthEnd = (dateadd(day,-1* day(dateadd(month,1,@monthStart)),dateadd(month,1,@monthStart)));

SELECT CASE   
        WHEN @subscriptionStart <= @monthStart 
        AND  @subscriptionEnd   >= @monthEnd 
        THEN 'month between dates' 
        ELSE 'month not between dates' END AS result 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T14:58:00.373

不知道我是否理解，因为其他答案“如此”复杂，但只要您只需要知道一个月内是否订阅了 sbdy，我会以一种简单的方式做到这一点：

```
SELECT
    *
FROM 
    your_table
WHERE
    CONVERT(datetime,'2012-02-01')
        between DATEADD(month, DATEDIFF(month, 0, start_date), 0) 
            and DATEADD(month, DATEDIFF(month, 0, end_date), 0) 
```

只要记住将一个月的第一天放在 CONVERT 函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T14:22:33.063

试试这个

```
SET @SpecifiedDate = '2012/02/01'

SELECT * FROM myTable WHERE Start_Date >= @SpecifiedDate 
```

或者

```
WHERE Month(@SpecifiedDate) = MONTH(Start_Date) AND YEAR(@SpecifiedDate) = YEAR(Start_Date) 
```

**你可以用这个**

```
WHERE Month(@SpecifiedDate) >= MONTH(Start_Date) AND Month(@SpecifiedDate) <= MONTH(End_Date) 
```

但我更喜欢使用完整的日期（以年、月和 01 作为日）。因此我不用担心那一年，因为 SQL 将处理过滤

```
WHERE @SpecifiedDate >= Start_Date AND @SpecifiedDate <= End_Date 
```

# java - DB2 中的 jdbc 语句获取大小

> ID：12447513
> 
> 赞同：2
> 
> 时间：2012-09-16T14:04:18.867
> 
> 标签：java, sql, jdbc, db2

我试图在语句上设置 fetchSize，同时执行查询，这样可以提高一些长时间运行的查询的性能。我的 DB2 jdbc 驱动程序版本是 3.64（DB2 版本 9.2）。但是即使获取大小更高，我也没有看到总执行时间有任何差异。默认情况下，如果我尝试调用`statement.getFetchSize()`，在执行查询之前它返回 0。此[链接](http://webmoli.com/2009/02/01/jdbc-performance-tuning-with-optimal-fetch-size/)提到 DB2 默认提取大小为 32。是否有任何不同的配置（以及打开连接，例如设置一些特定属性等）我需要设置以使用 DB2 启用不同的提取大小？还是 DB2 jdbc 驱动程序不支持不同的提取大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:05:38.330

我相信您可以控制 DB2 上的提取大小，但首先您需要`enableRowsetSupport`为您的 jdbc 驱动程序进行设置。[在这里](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.apdv.java.doc/doc/rjvdsprp.htm)查看更多。

# android - 如何检查哪个 ContentObserver 触发了 onChange 方法？

> ID：12447515
> 
> 赞同：0
> 
> 时间：2012-09-16T14:04:31.473
> 
> 标签：android, android-contentprovider, onchange, contentobserver

我想要做的是注册一个`Service`以上的`ContentObserver`并检查哪些`ContentObserver`触发器`onChange()`来做特定的反应。我不知道我是否只需要在 中包含 if/else `onchange()`，或者`Overwrite`在每个中包含一个 if/else `ContentObserver`，在任何一种情况下，我都不知道该怎么做。提前感谢您的帮助。

```
public class SmsObserverService extends Service {

private String BABAS = "babas";
@Override
public void onCreate() {

    Handler handler = new Handler();

    this.getContentResolver().registerContentObserver(Uri.parse("content://sms/"), true, new SmsObserver(handler));

    //Second observer
    this.getContentResolver().registerContentObserver(Uri.parse("CallLog.Calls.CONTENT_URI"), true, new SmsObserver(handler));

}

@Override
public IBinder onBind(Intent intent) {
    // TODO Put your code here
    return null;
}

public class SmsObserver extends ContentObserver{

    public SmsObserver(Handler handler) {
        super(handler);

    }
    @Override
    public void onChange(boolean selfChange) {          
        super.onChange(selfChange);

        //Where I should check somehow which ContentObserver triggers the onChange

        //This code to the sms log stuff, the call log part will be included
        //when I find out how to check whic observer trigerred the onChange
        Uri uri = Uri.parse("content://sms/");
        Cursor cursor = getApplicationContext().getContentResolver().query( uri, null, null, null, null);
        cursor.moveToNext();

        String body = cursor.getString(cursor.getColumnIndex("body"));
        String add = cursor.getString(cursor.getColumnIndex("address"));
        String time = cursor.getString(cursor.getColumnIndex("date"));

        String protocol = cursor.getString(cursor.getColumnIndex("protocol"));

        if(protocol == null){
            Toast.makeText(getApplicationContext(), "Enviada para: " +add + ", Hora: "+time +" - "+body, Toast.LENGTH_SHORT).show();
            Log.i(BABAS, "Enviada para: "+add +" " +"Time: "+time +" - "+body);
        }else{
            Toast.makeText(getApplicationContext(), "Recebida de: "+add + ", Hora: "+time +" - "+body, Toast.LENGTH_SHORT).show();
            Log.i(BABAS, "Recebida de: "+add +" " +"Time: "+time +" - "+body);
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:26:49.637

我会简单地扩展`ContentObserver`并添加我在那里缺少的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-22T15:11:19.147

```
mObserver = new ContentObserver(new Handler(Looper.getMainLooper())) {

                @Override
                public void onChange(boolean selfChange, Uri uri) {
                    super.onChange(selfChange, uri);

                    }
                }
            }; 
```

您可以使用上述方法检查uri

# java - 64 位 jvm 上的 Java 内存不足

> ID：12447518
> 
> 赞同：2
> 
> 时间：2012-09-16T14:05:12.250
> 
> 标签：java, memory, jvm, out-of-memory

我有一个问题。我的程序真的很大，java 正在抛出 OutOfMemoryException。在`.bat`文件中，我有以下内容：

```
java -server -Dfile.encoding=UTF-8 -Xmx1500m -Xbootclasspath/p:../libs/l2ft.jar -cp config/xml;../libs/*; l2ft.gameserver.GameServer 
```

Java 正在使用我的 6 GB RAM，接下来的 6 GB 未使用。

我输入`System.getProperty("sun.arch.data.model");`了它，它说我使用的是 64 位 JVM。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T14:08:44.193

您已将最大堆大小设置为 1500m，而 JVM 可以使用多一点的 ~200 MB，这就是您限制进程的全部。

请尝试将进度限制在 5 GB 左右。（您想为开销和操作系统留下一些内存）

```
-mx5g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T14:14:48.717

在此之前进行选项`Xbootclasspath`：

```
java -XX:MaxPermSize=512m -server -Dfile.encoding=UTF-8 -Xmx8g -XX:+UseCompressedOops 
```

这将使它使用更多内存，并确保它使用尽可能少的内存来寻址 64 位机器中的对象。

这`-XX:MaxPermSize=512m`使得 perm gem 空间更大（当你使用大量堆内存时你可能需要它），并且`-XX:+UseCompressedOops`将使它对对象使用 32 位寻址，而不是 64 位，因为 8gb 堆可以用 32 位正确寻址，所以它可以让你使用更少的内存来分配对象。

# c# - 显示带有编号代码行的代码

> ID：12447527
> 
> 赞同：3
> 
> 时间：2012-09-16T14:06:08.880
> 
> 标签：c#, .net, winforms, line-numbers

我正在开发一个 Windows 窗体应用程序，该应用程序从我的硬盘驱动器中读取和显示源代码文件。我不确定哪个控件最适合这个。是否有任何库可以让我用颜色和编号的代码行显示源代码？

编辑：澄清一下，我正在寻找的是一种用颜色和行号显示代码的方法，无需编辑。该应用程序供教师使用，允许他查看学生提交的源代码文件。教师不必能够编辑文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:09:27.713

[ScintillaNet](http://scintillanet.codeplex.com/)是一个 WinForms 控件，它是优秀的[Scintilla](http://www.google.hr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CBsQFjAA&url=http://www.scintilla.org/&ei=hd1VUIjLGIjP4QSQjoGYDg&usg=AFQjCNEVbV_Ul7yTCGFzOHsiLiQMr0FKLg&sig2=VqQgMFrR_WTPIGyPGBNeSA)库的 .NET 包装器，非常好。在另一个答案中提到的 Avalon 也很好，但它是一个 WPF 控件（当然，可以通过使用`ElementHost`控件将 WPF 控件添加到 WinForms 表单中，但它会引入额外的复杂性，这可能会或可能不会被保证）。

# python - urllib2 发送 postdata

> ID：12447528
> 
> 赞同：1
> 
> 时间：2012-09-16T14:06:23.837
> 
> 标签：python, post, urllib2

我想直接从他们的网页上抓取博彩公司的投注。目前，我尝试从名为 unibet.com 的提供商处获取报价。问题：我需要发送一个帖子请求，以便对我想要的报价进行适当的过滤。

因此，我转到以下网页[https://www.unibet.com/betting/grid/all-football/germany/bundesliga/1000094994.odds#](https://www.unibet.com/betting/grid/all-football/germany/bundesliga/1000094994.odds#)，其中投注部分的上部有几个复选框。我取消选中每个框而不是“匹配”。然后我点击更新按钮并用 chrome 记录了发布请求。以下屏幕截图演示了正在发送的内容：

![在此处输入图像描述](../Images/ebbc562a421c6ff9dc3f1ae8430dd0c2.png)

之后，我得到一个仅包含匹配引号的过滤结果。

现在，我只想拥有这些报价。因此，我编写了以下 python 代码：

```
 req = urllib2.Request( 'https://www.unibet.com/betting/grid/grid.do?eventGroupIds=1000094994' )
    req.add_header("Content-type", "application/x-www-form-urlencoded")
    post_data = [ ('format','iframe'),
                  ('filtered','true'),
                  ('gridSelectedTab','1'),
                  ('_betOfferCategoryTab.filterOptions[1_604139].checked','true'),
                  ('betOfferCategoryTab.filterOptions[1_604139].checked','on'),
                  ('_betOfferCategoryTab.filterOptions[1_611318].checked','false'),
                  ('_betOfferCategoryTab.filterOptions[1_611319].checked','false'),
                  ('_betOfferCategoryTab.filterOptions[1_611321].checked','false'),
                  ('_betOfferCategoryTab.filterOptions[1_604144].checked','false'),
                  ('_betOfferCategoryTab.filterOptions[1_624677].checked','false'),
                  ('_betOfferCategoryTab.filterOptions[1_604142].checked','false'),
                  ('_betOfferCategoryTab.filterOptions[1_604145].checked','false'),
                  ('_betOfferCategoryTab.filterOptions[1_611322].checked','false'),
                  ('_betOfferCategoryTab.filterOptions[1_604148].checked','false'),
                  ('gridSelectedTimeframe','')]
    post_data = urllib.urlencode(post_data)
    req.add_header('Content-Length', len(post_data ))
    resp = urllib2.urlopen(req, post_data )
    html = resp.read() 
```

问题：我得到的不是过滤结果，而是所有报价和投注类型的完整列表，就好像所有复选框都已选中一样。我不明白为什么我的 python 请求返回未过滤的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:42:24.067

该网站将您的偏好存储在会话 cookie 中。因为您没有捕获和发送适当的 cookie，所以在更新站点时会显示其默认结果。

尝试这个：

```
import cookielib

cookiejar = cookielib.CookieJar()
opener = urllib2.build_opener(
    urllib2.HTTPRedirectHandler(),
    urllib2.HTTPHandler(debuglevel=0),
    urllib2.HTTPSHandler(debuglevel=0),
    urllib2.HTTPCookieProcessor(cookiejar),
) 
```

现在，不要`urllib2.open()`只使用 call opener 作为函数调用：`opener()`并传递你的参数。

# objective-c - 透明的 NSMenu

> ID：12447544
> 
> 赞同：0
> 
> 时间：2012-09-16T14:09:07.240
> 
> 标签：objective-c, cocoa, opacity, nsmenuitem, nsmenu

我正在尝试更改 NSMenu 的不透明度，我制作了自定义 NSMenuItems 并更改了它们的不透明度，但它们后面仍然是白色的菜单，我正在寻找一种方法来改变菜单背景的颜色和不透明度。我想知道这是否可能？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:35:30.360

我认为没有一种优雅的方法可以做到这一点。[`NSMenu`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenu_Class/Reference/Reference.html)不是 的子类`NSView`。渲染视图可能是菜单对象的私有变量。

[`NSMenuItem`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenuItem_Class/Reference/Reference.html)有一个`view`可以使用的属性。尝试设置自定义视图（如果您还没有），稍后通过调用`menuItem.view.superview`. 然后设置该视图的`alpha`属性。

或者，您可以尝试`view`使用. 请注意，使用私有变量绝不是一个好主意。特别是如果您打算在 App Store 上发布该应用程序。`NSMenu``class-dump`

# java - 用 values() 创建一个最终的 Java 类枚举常量数组

> ID：12447545
> 
> 赞同：3
> 
> 时间：2012-09-16T14:09:10.867
> 
> 标签：java, class, constructor, enums

在 Java 枚举类中，我想创建一个`final static`包含该类的数组`values()`。当我按照以下几行执行此操作时，生成的数组是`null`.

```
public enum Name {
    E1( stuff ), E2( stuff );
    private static final Name[] values = Name.values();

    private Name( stuff ) { more stuff; }
} 
```

我也尝试通过调用显式类设置器方法来执行此操作，但这给出了`java.lang.ExceptionInInitializerError`异常。

我知道问题是由一些浅层依赖引起的`stuff`，因为前面的代码使用了其他类，这些类本身依赖于枚举类。

是否有经过测试和验证的技术来实现我的需求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T15:32:05.430

**tl; dr：**您尝试做的事情是不可能的 - 在所有构造函数调用完成之前，枚举类型的静态字段不会被初始化。

* * *

考虑这个例子：

```
public enum Name {
  E1("hello"), E2("world");

  private static final Name[] values = values();

  private Name(String val) {
    System.out.println("val = " + val);
    dump();
  }

  protected void dump() {
    System.out.println("this = " + this + ", values = " + values);
  }
} 
```

请注意，该`dump`方法存在的[原因](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2)是尝试`value`从`Name`. 使用此测试工具：

```
public class Main {
  public static void main(String... args) throws Exception {
    System.out.println(Name.values());
  }
} 
```

我们得到

```
$ java Main
val = hello
this = E1, values = null
val = world
this = E2, values = null
[LName;@35960f05 
```

* * *

使用反编译`Name`类，`javap`我们看到以下内容：

```
private static final Name[] $VALUES;

public static Name[] values();
  Code:
   0:   getstatic   #1; //Field $VALUES:[LName;
   3:   invokevirtual   #2; //Method "[LName;".clone:()Ljava/lang/Object;
   6:   checkcast   #3; //class "[LName;"
   9:   areturn 
```

编译器创建一个`$VALUES`保存值数组的私有字段，该`values()`方法实现为`{ return (Name[])$VALUES.clone() }`. 那么如何`$VALUES`初始化呢？

```
static {};
  Code:
   0:   new #4; //class Name
   3:   dup
   4:   ldc #19; //String E1
   6:   iconst_0
   7:   ldc #20; //String hello
   9:   invokespecial   #21; //Method "<init>":(Ljava/lang/String;ILjava/lang/String;)V
   12:  putstatic   #22; //Field E1:LName;
   15:  new #4; //class Name
   18:  dup
   19:  ldc #23; //String E2
   21:  iconst_1
   22:  ldc #24; //String world
   24:  invokespecial   #21; //Method "<init>":(Ljava/lang/String;ILjava/lang/String;)V
   27:  putstatic   #25; //Field E2:LName;
   30:  iconst_2
   31:  anewarray   #4; //class Name
   34:  dup
   35:  iconst_0
   36:  getstatic   #22; //Field E1:LName;
   39:  aastore
   40:  dup
   41:  iconst_1
   42:  getstatic   #25; //Field E2:LName;
   45:  aastore
   46:  putstatic   #1; //Field $VALUES:[LName;
   49:  invokestatic    #26; //Method values:()[LName;
   52:  putstatic   #18; //Field values:[LName;
   55:  return

} 
```

我们在这里看到的是初始化本质上是：

```
// compiler-generated initialization code
E1 = new Name("hello");
E2 = new Name("world");
$VALUES = new Name[] {E1, E2};

// static initializer of the values field
values = Name.values(); 
```

因此在执行构造函数调用期间，该`values`字段将为 null，并且该`values()`方法将抛出 NullPointerException（它将被包装在 ExceptionInInitializerError 中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T14:15:46.350

您能否提供一个发生这种情况的示例，因为它不应该为空。

```
public class Main {
    public enum Name {
        E1(  ), E2(  );
        private static final Name[] VALUES = Name.values();
    }

    public static void main(String... args) {
        System.out.println(Name.VALUES);
        System.out.println(Arrays.asList(Name.VALUES));
    }
} 
```

印刷

```
[LMain$Name;@717e5fde
[E1, E2] 
```

# python - 在python中调整图像大小算法

> ID：12447549
> 
> 赞同：1
> 
> 时间：2012-09-16T14:09:42.170
> 
> 标签：python, algorithm, python-3.x, image-resizing

所以，我正在通过[本教程](http://interactivepython.org/courselib/static/thinkcspy/MoreAboutIteration/moreiteration.html)学习我自己的 python，我坚持练习第 13 号，它说：

编写一个函数来均匀地缩小或放大图像。您的函数应该采用图像和比例因子。要缩小图像，比例因子应在 0 和 1 之间，要放大图像，比例因子应大于 1。

这不是关于 PIL 的问题，而是询问使用哪种算法，以便我自己编写代码。

我发现了一些类似的问题[，](https://stackoverflow.com/questions/1550878/nearest-neighbor-interpolation-algorithm-in-matlab)但我不知道如何将其翻译成 python。

任何帮助，将不胜感激。

我来到了这个：

```
import image

win = image.ImageWin()
img = image.Image("cy.png")

factor = 2

W = img.getWidth()
H = img.getHeight()

newW = int(W*factor)
newH = int(H*factor)

newImage = image.EmptyImage(newW, newH)

for col in range(newW):
    for row in range(newH):
        p = img.getPixel(col,row)
        newImage.setPixel(col*factor,row*factor,p)

newImage.draw(win)

win.exitonclick() 
```

我应该在一个函数中执行此操作，但这并不重要。函数的参数是（图像，因子）。您可以在 ActiveCode 中的 OP 教程中尝试它。它制作了一个带有空列的拉伸图像：。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:27:40.740

如图所示，您的代码对于所谓的最近邻调整大小非常简单有效，除了一个小错误：

```
 p = img.getPixel(col/factor,row/factor)
    newImage.setPixel(col,row,p) 
```

编辑：由于您要向其中发送浮点坐标，`getPixel`因此您不仅限于最近邻 - 您可以在内部实现任何您想要的插值算法。最简单的做法是简单地截断坐标，当大于 1`int`时会导致像素被复制，或者当小于 1 时会被跳过。`factor``factor`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:22:43.300

你可以使用 Python Imaging Library 做到这一点。

`Image.resize()`应该做你想做的。

见[http://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm)

**编辑**

由于您想自己编程而不使用模块，因此我添加了一个额外的解决方案。

您将不得不使用以下算法。

加载你的图像提取它的大小计算所需的大小（高度*因子，宽度*因子）创建一个具有所需大小的新 EmptyImage

使用嵌套循环遍历图像中的像素（逐列）。然后（为了缩小）你每隔一段时间删除一些像素，或者为了（放大）你复制图像中的一些像素。

如果您想变得花哨，可以通过将 rgb 值与相邻像素进行平均来平滑添加或删除的像素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T15:41:52.133

马克有正确的方法。要获得更平滑的结果，请替换：

```
p = img.getPixel(col/factor,row/factor) 
```

使用一个函数，该函数采用浮点坐标并返回从源图像中的几个相邻点插值的像素。对于线性插值，它需要四个最近的邻居；对于高阶插值，它需要更多的周围像素。

例如，如果 col/factor = 3.75 和 row/factor = 1.9，线性插值将采用 (3,1)、(3,2)、(4,1) 和 (4,2) 处的源像素，并且给出这 4 个 rgb 值之间的结果，对 (4,2) 处的像素加权最重。

# python - 使用 % 和转义序列的字符串格式之间的奇怪交互。Python

> ID：12447551
> 
> 赞同：1
> 
> 时间：2012-09-16T14:10:03.393
> 
> 标签：python, string-formatting

我知道我可以使用转义序列获取 unicode 字符，如下所示：

```
>>> print "\3"
♥ 
```

我只是想查看可用的 ASCII 字符并写下这个：

```
for i in xrange(1, 99):
    print "\%o" % i 
```

它打印“\1”、“\2”、“\3”等，所以不是unicode字符。然后我使用 %s、%r 和 %d 进行了尝试，但这些似乎都不起作用。

这比看到可用的 ASCII 字符有趣得多，所以我开始阅读有关字符串格式的内容，并最终完成了这篇文章：

```
for i in xrange(1, 99):

    print "{:c}".format(i) 
```

问题是 - 为什么初始代码不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:11:33.230

Python 将其解释`\%o`为“文字反斜杠后跟字符串格式化代码”；`\%`在 python 文字中没有任何意义，因此反斜杠包含在字面上。

您正在寻找[`chr()`功能](http://docs.python.org/library/functions.html#chr)：

```
for i in xrange(1, 99):
    print chr(i) 
```

`\`字符转义仅适用于 python 文字。您可以指示 python 解释包含文字`\`反斜杠 pus 代码的任意字符串，以使用编解码器将其解释为 python 字符串文字`string_escape`：

```
>>> print repr('\\n'.decode('string_escape')
'\n' 
```

请注意，指定 unicode 文字的*正确*`\uxxxx`方法是使用格式，并使用 unicode 字符串文字：

```
>>> print u'\u2665'
♥ 
```

原始字节也可以使用`\x00`转义序列生成：

```
>>> print repr('\x12')
'\n' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T14:22:11.470

字符串文字中的转义序列在**"parse time"**处理，而不是在**"run time"**处理。如果你写

```
"\%o" 
```

Python 解析器看到一个反斜杠后跟一个百分号，因为这不是一个有效的转义序列，它只会保留两个字符，然后也会添加`o`为普通字符（请注意，在这个 Python 中，它不同于例如它的 C++ 编程语言会将该字符串解释为`"%o"`因为在该语言中，百分号前的反斜杠仅被解释为百分号）。

在运行时，格式化运算符将在左侧看到由三个字符、一个反斜杠和一个`%o`序列组成的字符串，该部分将被右侧替换，例如`"\\1"`输入值 1 的字符串和字符串显示为`\1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T14:20:45.093

Python 源代码中的字符串文字在词法分析期间被解释——Python 编译器执行源代码处理的第一步。转义序列被解析，并且只有结果字符串存储在内存中。这就是为什么例如

```
>>> "A"
'A'
>>> "\x41"
'A' 
```

产生完全相同的字符串。在实际打印字符串或执行字符串格式化时，不会处理转义序列。打印基本上意味着将字符串的内容复制到终端。格式化意味着用所需的内容插入`%`或占位符。`{}`字符串的其余部分保持不变。

格式化选项的结果

```
>>> "\%03o" % 65
'\\101' 
```

是一个由四个字符组成的字符串`\101`。（在交互式解释器中，显示了该字符串的*表示形式*；这就是为什么您会看到引号和双反斜杠的原因。）`"\101"`另一方面，字符串文字是只有一个字符的字符串，即大写字母`A`。

正如 Martijn Pieters 所指出的，您可以使用`string_escape`编解码器显式请求解释转义序列：

```
>>> ("\%03o" % 65).decode("string_escape")
'A' 
```

# iphone - iOS6：supportedInterfaceOrientations 不起作用（被调用但界面仍然旋转）

> ID：12447552
> 
> 赞同：50
> 
> 时间：2012-09-16T14:10:24.277
> 
> 标签：iphone, objective-c, ios, ios6

在我的应用程序中，我有多个视图，一些视图需要同时支持纵向和横向，而其他视图只需要支持纵向。因此，在项目摘要中，我都选择了所有方向。

下面的代码用于在 iOS 6 之前禁用给定视图控制器上的横向模式：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

由于 shouldAutorotateToInterfaceOrientation 在 iOS6 中已被弃用，我已将上述内容替换为：

```
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMask.Portrait;
} 
```

当视图出现时，这个方法被正确调用（我可以设置一个断点来确保这一点），但界面仍然旋转到横向模式，不管我只为纵向模式返回掩码。我究竟做错了什么？

似乎目前不可能构建每个视图具有不同方向要求的应用程序。它似乎只遵循项目摘要中指定的方向。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-21T10:07:04.537

如果您使用**UINavigationController 作为根窗口控制器**，它将是**它的** `shouldAutorotate`&`supportedInterfaceOrientations`将被调用。

如果您使用的是**UITabBarController**等，则同上。

所以要做的事情是继承你的导航/标签栏控制器并覆盖它的`shouldAutorotate`&`supportedInterfaceOrientations`方法。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-09-20T06:54:40.620

尝试在 AppDelegate.m 中更改此代码

```
//   self.window.rootViewController = self.navigationController;

    [window setRootViewController:navigationController]; 
```

这是完整的答案

[在 iOS 6 中未调用 shouldAutorotateToInterfaceOrientation](https://stackoverflow.com/questions/12260261/shouldautorotatetointerfaceorientation-not-being-called-in-ios-6)

XD

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-09-20T13:25:20.250

In my case I have UINavigationController and my view controller inside. I had to subclass UINavigationController and, in order to support only Portrait, add this method:

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

So in the UINavigationController subclass I need to check which orientation is supported by the current topViewController.

```
- (NSUInteger)supportedInterfaceOrientations
{
    return [[self topViewController] supportedInterfaceOrientations];
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-09-20T18:29:44.960

我发现的一件事是，如果您有一个仍在使用的旧应用程序

```
[window addSubView:viewcontroller.view];  //This is bad in so may ways but I see it all the time... 
```

您需要将其更新为：

```
[window setRootViewController:viewcontroller]; //since iOS 4 
```

一旦你这样做了，方向应该再次开始工作。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-12-21T00:30:06.540

Ray Wenderlich 团队在“iOS6 By Tutorials”中特别指出了 iOS6 的最佳方法 - [http://www.raywenderlich.com/](http://www.raywenderlich.com/)并且在大多数情况下比子类化 UINavigationController 更好。

我将 iOS6 与包含 UINavigationController 设置为初始视图控制器的情节提要一起使用。

//AppDelegate.m - 不幸的是，此方法在 iOS6 之前不可用

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
NSUInteger orientations = UIInterfaceOrientationMaskAllButUpsideDown;

if(self.window.rootViewController){
    UIViewController *presentedViewController = [[(UINavigationController *)self.window.rootViewController viewControllers] lastObject];
    orientations = [presentedViewController supportedInterfaceOrientations];
}

return orientations;
} 
```

//MyViewController.m - 返回你想为每个 UIViewController 支持的任何方向

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-05-14T06:30:45.290

正如其他人所说，如果您使用的是 UINavigationController 并且想要自定义各种视图，则您需要继承 UINavigationController 并确保您拥有这两个组件：

```
@implementation CustomNavigationController

// -------------------------------------------------------------------------------
//  supportedInterfaceOrientations:
//  Overridden to return the supportedInterfaceOrientations of the view controller
//  at the top of the navigation stack.
//  By default, UIViewController (and thus, UINavigationController) always returns
//  UIInterfaceOrientationMaskAllButUpsideDown when the app is run on an iPhone.
// -------------------------------------------------------------------------------
- (NSUInteger)supportedInterfaceOrientations
{
    return [self.topViewController supportedInterfaceOrientations]; 
}

// -------------------------------------------------------------------------------
//  shouldAutorotate
//  Overridden to return the shouldAutorotate value of the view controller
//  at the top of the navigation stack.
//  By default, UIViewController (and thus, UINavigationController) always returns
//  YES when the app is run on an iPhone.
// -------------------------------------------------------------------------------
- (BOOL)shouldAutorotate
{
    return [self.topViewController shouldAutorotate];
} 
```

然后在任何只有肖像的视图中，您将包括：

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

在任何观点中，这都是颠倒的：

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-17T22:25:53.400

基本上正如上面所说的那样，但更详细：

1.  创建一个新文件，它是 UINavigationController 的子类
2.  转到您的故事板，然后单击导航控制器，将其类设置为您刚刚创建的类
3.  在此类（.m 文件）中添加以下代码，使其保持纵向模式：

    ```
    (BOOL)shouldAutorotate
    {
      return NO;
    } 

    (NSUInteger)supportedInterfaceOrientations
    {
     return UIInterfaceOrientationMaskPortrait;
    } 
    ```

这对我有用

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-30T16:22:37.423

我认为最好的方法是做一个类别而不是子类化`UINavigationController`或`UITabbarController`

你的 UINavigationController+Rotation.h

```
#import <UIKit/UIKit.h>

@interface UINavigationController (Rotation)

@end 
```

你的 UINavigationController+Rotation.m

```
#import "UINavigationController+Rotation.h"

@implementation UINavigationController (Rotation)

-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}

@end 
```

试着让你的所有控制器都导入这个类别，这就像一个魅力。您甚至可以使控制器不旋转并推动另一个将旋转的控制器。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-22T03:23:32.233

这段代码对我有用：

```
-(BOOL)shouldAutorotate {
     return YES;
}

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

[iPhone/iPad App Orientation](https://stackoverflow.com/questions/12540152/iphone-ipad-app-orientation/12540379)查看我自己的答案

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-24T15:58:13.413

如果您正在使用，则必须在 的子类中`UINavigationController`实现`shouldAutorotate`and 。`supportedInterfaceOrientations``UINavigationController`

这些可以分两步控制，如果`shouldAutorotate`返回YES则有效`supportedInterfaceOrientations`。这是一个非常好的组合。

在这个例子中，除了 CoverFlowView 和 PreviewView，我的主要视图是 Portrait。CoverFlowView转移到PreviewView，PreviewView要跟随CoverFlowCView的旋转。

```
@implementation MyNavigationController

-(BOOL)shouldAutorotate
{

if ([[self.viewControllers lastObject] isKindOfClass:NSClassFromString(@"PreviewView")])

return NO;

else

return YES;

}

-(NSUInteger)supportedInterfaceOrientations

{

if ([[self.viewControllers lastObject] isKindOfClass:NSClassFromString(@"CoverFlowView")])

return UIInterfaceOrientationMaskAllButUpsideDown;

else

return UIInterfaceOrientationMaskPortrait;

}

...

@end 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-02T03:36:36.393

这里的答案为我指明了正确的方向，尽管我无法通过剪切和粘贴来使其工作，因为我在 UITabBarController 中使用 UINavigationControllers。所以我在 AppDelegate.m 中的版本看起来像这样，它将适用于 UITabBarController 中的 UITabBarControllers、UINavigationControllers 或 UINavigationControllers。如果您正在使用其他自定义容器控制器，则需要在此处添加它们（这有点令人讨厌）。

```
- (UIViewController*)terminalViewController:(UIViewController*)viewController
{
  if ([viewController isKindOfClass:[UITabBarController class]])
  {
    viewController = [(UITabBarController*)viewController selectedViewController];
    viewController = [self terminalViewController:viewController];
  }
  else if ([viewController isKindOfClass:[UINavigationController class]])
  {
    viewController = [[(UINavigationController*)viewController viewControllers] lastObject];
  }

  return viewController;
}

- (NSUInteger)application:(UIApplication *)application
supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
  NSUInteger orientations = UIInterfaceOrientationMaskPortrait;
  UIViewController* viewController = [self terminalViewController:window.rootViewController];

  if (viewController)
    orientations = [viewController supportedInterfaceOrientations];

  return orientations;
} 
```

另一个需要注意的关键是，您必须在 UIViewController 子类中覆盖supportedInterfaceOrientations，否则它将默认为您在Info.plist 中指定的内容。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-01T01:56:10.387

我的解决方案：子类化`UINavigationController`并将其设置为`window.rootViewController`

层次结构的顶部视图控制器将控制方向，一些代码示例：[子类 UINavigationController](https://stackoverflow.com/questions/12662240/how-to-make-app-fully-working-correctly-for-autorotation-in-ios-6/12662433#12662433)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-09-24T05:00:01.000

我的情况和你一样。我知道你已经接受了一个答案，但我想我还是会再添加一个。这就是我理解新版本轮换系统工作的方式。根视图控制器是唯一被调用的视图控制器。我相信，原因在于，对于子视图控制器，经常旋转它们的视图是没有意义的，因为它们无论如何都会停留在根视图控制器的框架内。

那么，会发生什么。首先`shouldAutorotate`是**在根视图控制器上**调用。如果`NO`返回，那么一切都会停止。如果`YES`返回则`supportedInterfaceOrientations`调用该方法。如果在此方法中确认了界面方向*以及*来自 Info.plist 或应用程序委托的全局支持的方向，则视图将旋转。在旋转之前`shouldAutomaticallyForwardRotationMethods`查询方法。如果`YES`（默认），那么所有的孩子都会像父母一样收到`will`and`didRotateTo...`方法（他们反过来会将它转发给他们的孩子）。

我的解决方案（直到有一个更有说服力的解决方案）是在`supportedInterfaceOrientations`方法期间查询最后一个子视图控制器并返回其值。这让我可以旋转一些区域，同时只保留其他区域。我意识到它很脆弱，但我没有看到另一种不涉及使事件调用、回调等复杂化的方法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-09-17T08:28:45.137

尝试添加`shouldAutorotate`方法

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-09-17T09:26:31.727

首先，为了使您的应用程序在仅模式下工作，您应该返回`UIInterfaceOrientationMaskLandscape`. 如果您只想保留纵向模式，那么您做的事情是正确的。

只需`UISupportedInterfaceOrientations`在 Info.plist 中添加键并分配您的应用打算保留的界面方向值。

`shouldAutoRotate`此外，如果您想完全避免自动旋转，您应该返回 false 。但我建议你从这里返回 true 并在`supportedInterfaceOrientations`方法中指定正确的方向。

# windbg - IDA Pro Windbg 命令不起作用

> ID：12447556
> 
> 赞同：2
> 
> 时间：2012-09-16T14:10:47.317
> 
> 标签：windbg, ida, dbg

第一件事：

我上次使用它时它正在工作（大约一个多月前）。

问题是，没有来自扩展的命令正在工作，似乎没有加载扩展。

只有默认命令有效（如版本等）

“版本”命令的输出是：

```
Extension DLL chain:
dbghelp: image 6.2.9200.16384, API 6.1.6, built Sat Nov 20 12:57:48 2010
    [path: C:\Windows\system32\dbghelp.dll]
ext: (Not loaded)
wow64exts: (Not loaded)
exts: (Not loaded)
uext: (Not loaded)
ntsdexts: (Not loaded) 
```

它说没有加载任何扩展，但是 winext 文件夹确实存在于我的 system32 文件夹（C:\Windows\System32\winext）中，扩展位于（据我所知）。

像 !gle 这样的命令不起作用：/

我真的不知道我能做什么，请帮助我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:26:55.470

Does the DBGTOOLS definition in your IDA.CFG point to the x86 WinDBG installation directory?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T06:00:14.820

以下来自 IDA Pro 的帮助：

```
Windbg debugger plugin has the following configuration options:
  - The Debugging Tools folder: This should be configured to point to the same
  folder where Microsoft Debugging Tools are installed. The plugin will try to
  guess where the tools are, but if it fails, a manual intervention will be
  required. If this option is not set, then the plugin will try to use dbgeng.dll
  from MS Windows system folder, while normal debug operations will work,
  extensions will not. 
```

此信息表明，如果 IDA Pro 使用 Windows 系统文件夹中的 dbgeng.dll，则扩展命令（如 !gle）将不起作用。

如果您已经将 DBGTOOLS 设置为正确指向 /cfg/ida.cfg 中的 WinDbg（x86 版本）目录，但 IDA Pro 仍在使用 Windows 系统文件夹中的 dbgeng.dll，那么您的 IDA 上下文可能未配置为分析 IBM PC 处理器。当您启动 IDA Pro 并直接单击“开始”按钮以自行工作并启动 WinDbg 调试器时，可能会发生这种情况。

检查 ida.cfg 中的 DBGTOOLS，您会发现它被#ifdef **__PC__** #endif 包裹。例如，如果您正在分析 Windows EXE 文件，则**__PC__**只会由 IDA Pro 定义。成功反汇编 Windows EXE 文件后，尝试从 IDA Pro 菜单启动 WinDbg，看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-29T02:46:27.080

如果这仍未得到解答，您的问题很可能是您没有取消注释 ida.cfg 文件中的 DBG Tools 行。

我自己解决了这个问题。希望这可以帮助。

其他人也是正确的。确保您使用双反斜杠“\\”进行转义，并确保您指向 (x86) 目录。

# c++ - 我们可以有递归宏吗？

> ID：12447557
> 
> 赞同：68
> 
> 时间：2012-09-16T14:11:08.263
> 
> 标签：c++, c, macros, c-preprocessor

我想知道我们是否可以在 C/C++ 中使用递归宏？如果是，请提供示例。

第二件事：为什么我不能执行下面的代码？我在做什么错误？是因为递归宏吗？

```
# define pr(n) ((n==1)? 1 : pr(n-1))
void main ()
{
    int a=5;
    cout<<"result: "<< pr(5) <<endl;
    getch();
} 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-09-22T04:20:23.877

宏不会直接递归扩展，但有一些变通方法。当预处理器扫描并展开时`pr(5)`：

```
pr(5)
^ 
```

它创建了一个禁用上下文，因此当它`pr`再次看到时：

```
((5==1)? 1 : pr(5-1))
             ^ 
```

无论我们尝试什么，它都会变成蓝色，并且无法再扩展。但是我们可以通过使用延迟表达式和一些间接来防止我们的宏变成蓝色：

```
# define EMPTY(...)
# define DEFER(...) __VA_ARGS__ EMPTY()
# define OBSTRUCT(...) __VA_ARGS__ DEFER(EMPTY)()
# define EXPAND(...) __VA_ARGS__

# define pr_id() pr
# define pr(n) ((n==1)? 1 : DEFER(pr_id)()(n-1)) 
```

所以现在它会像这样扩展：

```
pr(5) // Expands to ((5==1)? 1 : pr_id ()(5 -1)) 
```

这是完美的，因为`pr`从未被漆成蓝色。我们只需要应用另一个扫描以使其进一步扩展：

```
EXPAND(pr(5)) // Expands to ((5==1)? 1 : ((5 -1==1)? 1 : pr_id ()(5 -1 -1))) 
```

我们可以应用两次扫描以使其进一步扩展：

```
EXPAND(EXPAND(pr(5))) // Expands to ((5==1)? 1 : ((5 -1==1)? 1 : ((5 -1 -1==1)? 1 : pr_id ()(5 -1 -1 -1)))) 
```

但是，由于没有终止条件，我们永远无法应用足够的扫描。我不确定您想要完成什么，但如果您对如何创建递归宏感到好奇，这里有一个如何创建递归重复宏的示例。

首先是应用大量扫描的宏：

```
#define EVAL(...)  EVAL1(EVAL1(EVAL1(__VA_ARGS__)))
#define EVAL1(...) EVAL2(EVAL2(EVAL2(__VA_ARGS__)))
#define EVAL2(...) EVAL3(EVAL3(EVAL3(__VA_ARGS__)))
#define EVAL3(...) EVAL4(EVAL4(EVAL4(__VA_ARGS__)))
#define EVAL4(...) EVAL5(EVAL5(EVAL5(__VA_ARGS__)))
#define EVAL5(...) __VA_ARGS__ 
```

接下来，一个对模式匹配有用的 concat 宏：

```
#define CAT(a, ...) PRIMITIVE_CAT(a, __VA_ARGS__)
#define PRIMITIVE_CAT(a, ...) a ## __VA_ARGS__ 
```

递增和递减计数器：

```
#define INC(x) PRIMITIVE_CAT(INC_, x)
#define INC_0 1
#define INC_1 2
#define INC_2 3
#define INC_3 4
#define INC_4 5
#define INC_5 6
#define INC_6 7
#define INC_7 8
#define INC_8 9
#define INC_9 9

#define DEC(x) PRIMITIVE_CAT(DEC_, x)
#define DEC_0 0
#define DEC_1 0
#define DEC_2 1
#define DEC_3 2
#define DEC_4 3
#define DEC_5 4
#define DEC_6 5
#define DEC_7 6
#define DEC_8 7
#define DEC_9 8 
```

一些对条件有用的宏：

```
#define CHECK_N(x, n, ...) n
#define CHECK(...) CHECK_N(__VA_ARGS__, 0,)

#define NOT(x) CHECK(PRIMITIVE_CAT(NOT_, x))
#define NOT_0 ~, 1,

#define COMPL(b) PRIMITIVE_CAT(COMPL_, b)
#define COMPL_0 1
#define COMPL_1 0

#define BOOL(x) COMPL(NOT(x))

#define IIF(c) PRIMITIVE_CAT(IIF_, c)
#define IIF_0(t, ...) __VA_ARGS__
#define IIF_1(t, ...) t

#define IF(c) IIF(BOOL(c))

#define EAT(...)
#define EXPAND(...) __VA_ARGS__
#define WHEN(c) IF(c)(EXPAND, EAT) 
```

把它们放在一起，我们可以创建一个重复宏：

```
#define REPEAT(count, macro, ...) \
    WHEN(count) \
    ( \
        OBSTRUCT(REPEAT_INDIRECT) () \
        ( \
            DEC(count), macro, __VA_ARGS__ \
        ) \
        OBSTRUCT(macro) \
        ( \
            DEC(count), __VA_ARGS__ \
        ) \
    )
#define REPEAT_INDIRECT() REPEAT

//An example of using this macro
#define M(i, _) i
EVAL(REPEAT(8, M, ~)) // 0 1 2 3 4 5 6 7 
```

所以，是的，通过一些解决方法，您可以在 C/C++ 中使用递归宏。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-16T14:20:11.590

您的编译器可能提供了仅预处理而不实际编译的选项。如果您试图在宏中查找问题，这很有用。例如使用`g++ -E`：

```
> g++ -E recursiveMacro.c

# 1 "recursiveMacro.c"
# 1 "<built-in>"
# 1 "<command line>"
# 1 "recursiveMacro.c"

void main ()
{
    int a=5;
    cout<<"result: "<< ((5==1)? 1 : pr(5 -1)) <<endl;
    getch();
} 
```

如您所见，它不是递归的。`pr(x)`在预处理过程中只更换一次。要记住的重要一点是，预处理器所做的只是盲目地用另一个文本字符串替换一个文本字符串，它实际上并不评估像`(x == 1)`.

您的代码无法编译的原因是它`pr(5 -1)`没有被预处理器替换，因此它最终在源代码中作为对未定义函数的调用。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-09-16T14:34:26.310

您不**应该**在 C 或 C++ 中使用递归宏。

来自 C++ 标准的相关语言，第 16.3.4 节第 2 段：

> 如果在替换列表的扫描过程中找到被替换的宏的名称（不包括源文件的其余预处理标记），则不会替换它。此外，如果任何嵌套替换遇到被替换的宏的名称，它不会被替换。这些未替换的宏名称预处理标记不再可用于进一步替换，即使它们稍后在该宏名称预处理标记将被替换的上下文中进行（重新）检查。

这种语言有一些回旋的余地。对于多个相互调用的宏，存在一个灰色区域，该措辞并没有完全说明应该做什么。关于这个语言律师问题，有一个针对 C++ 标准的活跃问题；见[http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#268](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#268)。

忽略语言律师问题，每个编译器供应商都了解其意图：

C 或 C++ 中不允许使用递归宏。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-09-16T14:27:00.163

很可能您无法执行它，因为您无法编译它。此外，如果它能够正确编译，它总是会返回 1。你的意思是`(n==1)? 1 : n * pr(n-1)`.

宏不能是递归的。根据第 16.3.4.2 章（感谢 Loki Astari），如果在替换列表中找到当前宏，则保持原样，因此您`pr`的定义不会改变：

> 如果在替换列表的扫描过程中找到被替换的宏的名称（不包括源文件的其余预处理标记），则不会替换它。此外，如果任何嵌套替换遇到被替换的宏的名称，它不会被替换。这些未替换的宏名称预处理标记不再可用于进一步替换，即使它们稍后在该宏名称预处理标记将被替换的上下文中进行（重新）检查。

你的来电：

```
cout<<"result: "<< pr(5) <<endl; 
```

由预处理器转换为：

```
cout<<"result: "<< (5==1)? 1 : pr(5-1) <<endl; 
```

在此期间，`pr`宏的定义“丢失”，并且编译器显示类似“'pr' is not declared in this scope (fact)”之类的错误，因为没有名为 的函数`pr`。

C++ 不鼓励使用宏。你为什么不写一个函数？

在这种情况下，您甚至可以编写一个模板函数，以便在编译时解析它，并表现为一个常量值：

```
template <int n>
int pr() {  pr<n-1>(); }

template <>
int pr<1>() { return 1; } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-16T14:18:06.103

您不能在 C 或 C++ 中使用递归宏。

# sql - 姓、名切换

> ID：12447559
> 
> 赞同：-1
> 
> 时间：2012-09-16T14:11:14.527
> 
> 标签：sql

请帮忙，我一点也不擅长 SQL，但我创建了下面的查询。它从房间预订系统中提取信息以显示在数字标牌产品上。

目前，“名称”字段输出为`lastname, firstname`. 我真的需要它显示为`Firstname Lastname`但仍在一列下。

有人可以看看吗？这将不胜感激。

```
SELECT 
    HOST9006.DESCRIPTION, 
    HOST0110.ROOMNAME, 
    HOST0140.NAME, 
    dateadd(mi, HOST0120.STARTMINS, HOST0120.MTGDATE) AS ASTART, 
    dateadd(mi, HOST0120.ENDMINS, HOST0120.MTGDATE) AS AFINISH, 
    CONVERT(VARCHAR(5), dateadd(mi, HOST0120.STARTMINS, HOST0120.MTGDATE) ,108) AS START, 
    CONVERT(VARCHAR(5), dateadd(mi, HOST0120.ENDMINS, HOST0120.MTGDATE) ,108) AS FINISH, 
    HOST0120.MTGKEY, HOST0120.HIPTYPE, HOST0120.ROOMKEY
FROM 
    HOST0140
    INNER JOIN HOST0120
    ON HOST0120.OWNERKEY=HOST0140.PERSONKEY
    INNER JOIN HOST9006
    ON HOST9006.KEYVALUE=HOST0120.MTGSTATE
    INNER JOIN HOST0110
    ON HOST0110.ROOMKEY=HOST0120.ROOMKEY
WHERE 
    CANCELSTATE='0'
AND MTGDATE >= DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)
AND MTGDATE < DATEADD(day, DATEDIFF(day, 0, GETDATE()), 1)
AND MTGSTATE <> '11'
ORDER BY START 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:23:40.020

这应该让您开始使用 sql-server（您没有指定您正在使用的 RDBMS）：

```
select substring(col1, charindex(',', replace(col1, ' ', '')) + 1, len(col1)) 
  + ' ' 
  + left(col1, charindex(',', col1) -1) as First_Last
from names 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/20c7d/27)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T18:26:53.297

这应该适用于 mySQL

`select concat(right(Name, length(Name) - instr(Name, ',') - 1), ' ', left(Name, instr(Name,',')-1)) from mytable`

# java - 如何在 Java 中监控异步请求

> ID：12447560
> 
> 赞同：5
> 
> 时间：2012-09-16T14:11:13.633
> 
> 标签：java

我有2节课。一个 (A) 收集一些数据，另一个 (B) 将数据发送到 TCP/IP 客户端。该过程是异步的，刷新率几乎为零到几秒。请注意，此应用程序没有 GUI，因此我将无法使用许多内置的“onChange”侦听器。

在正常情况下，我会简单地编写代码，以便 A 在 B 上调用“发送”方法，传递数据，这里没有问题。

现在，假设 A 收集数据的速率至关重要（实时），并且 A 不能等待 B 完成发送过程（注意 B 使用 TCP，而不是 UDP）。我实现这个的方式是

*   A 将数据放在 B 的字段中
*   B 有一个连续循环来检查数据是新的还是现在的。如果是新的，它将发送出去。

如果在发送期间数据被更新了几次没关系，只要它不会减慢 A。为每次发送生成一个新线程原则上不会减慢 A，但它可能会导致一团糟.

您可以看到 B 在同步模式下工作（但 A 不是），它是通过带有 Thread.sleep() 调用的 while 循环实现的。我的问题是：

1.  我应该使用计时器任务而不是 while 循环吗？我知道大多数人讨厌 Thread.sleep() 调用，但最终我唯一感兴趣的是保持 CPU 较低。

2.  难道没有比同步方法更优雅的方法吗？在某些情况下，A 的数据刷新大约需要 1 秒，如果我可以有一个对事件采取行动的侦听器，那就太好了。在这种情况下，25 毫秒的睡眠时间将浪费周期。在其他情况下，它非常快，我根本不想睡觉。

**示例：假设 A 正在从您的屏幕提交屏幕截图，而 B 正在将它们发送给客户端。只有最后一个很重要，B会尽可能快**

有什么想法或建议吗？请让事情尽可能简单和低cpu

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:21:24.530

当队列已满时，我会设置一个[`LinkedBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)between `A`，`B`其大小不应阻塞。`A`在`A`中，收集数据的方法会将其发布到队列中。在`B`中，只要队列中有一个项目，它就是新的，应该被发送出去。

如果您想`B`利用对消息的多次编辑来`A`合并并作为单个更新发送，那么我会使用[`Observer`](http://en.wikipedia.org/wiki/Observer_pattern).

1.  `A`不断更新的消息是`Observable`.
2.  `B`是此消息的观察者。
3.  每次`A`更新消息，都表明 B 采取一些行动。
4.  `B`可以选择立即将更新发送给客户端
5.  `B`也可以选择使用定时器等待一段时间，并在定时器触发后才将更新发送给客户端。发送更新的代码将是 TimerTask。
6.  `B``A`在更改消息之前不会再次设置计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T14:35:46.343

我会这样：

A 以任何合适的方式收集数据，然后发布“下一条消息”以发送。如果已经有消息待处理，让新消息替换/更新以前的消息。

B 检查任何待处理的消息，如果可用，它会抓取它并将其发送给客户端。但是，如果没有消息未决，则 B 等待有一个消息可用。

```
Object lock = new Object();
Object pending = null;

public void post(Object message) {
    synchronized (lock) {
        pending = message;
        lock.notifyAll();
    }
}

public Object getNextMessage() {
    Object message;
    synchronized (lock) {
        while (pending == null) {
            try {
                lock.wait();
            } catch (InterruptedException e) {
                // Ignore
            }
        }
        message = pending;
        pending = null;
    }
    return message;
} 
```

使用队列你可以做

```
BlockingDeque<Object> queue = new LinkedBlockingDeque<Object>(1);

public void postMessage(Object message) {
    // If previous message is still pending we replace it.
    queue.clear();
    queue.offer(message);
}

public Object getNextMessage() {
    while (true) {
        try {
            return queue.take();
        } catch (InterruptedException e) {
            // Ignore interrupts
        }
    }
} 
```

当然，在这两个示例中，最好不要使用*while (true)*信号，这样您就可以优雅地关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T14:47:06.907

您可以使用[交换器](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Exchanger.html)

B将发送信息，使用交换器进行交换（他可能会等待A和它的罚款）
一旦进行交换，他将发送信息。

A 将使用超时 0 的交换器，这意味着如果 B 尚未等待，那么我们跳过此交换，如果他等待交换将进行，A 将继续他的工作，B 现在可以发送信息。

B 忙时出现的信息将被忽略（如果 B 忙，A 中超时 0 的交换只会抛出异常，确保你抓住它）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T14:20:58.597

最优雅的方式是使用[消息队列](https://stackoverflow.com/questions/2025079/what-are-popular-message-queue-services-in-java)。`A`一旦数据可用，就将数据写入队列。B 订阅队列并在有新数据时收到通知。消息队列为您处理一切。

但是，您应该更明确：是否应该`B`收到每条消息的通知？如果更新丢失怎么办？

# java - 混乱的 GUI：很多空白区域

> ID：12447562
> 
> 赞同：1
> 
> 时间：2012-09-16T14:11:31.777
> 
> 标签：java, swing, user-interface, jtextarea, gridbaglayout

请看下面的代码

```
package email;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SendEmail extends JDialog
{
    private JLabel to, cc, bcc, subject, account;
    private JTextField toTxt, ccTxt, bccTxt, subjectTxt;
    private JTextArea messageTxt;
    private JButton send;

    private JComboBox accountBox;

    private JScrollPane scroll;

    private GridBagLayout gbl;
    private GridBagConstraints gbc;

    public SendEmail()
    {
        //Declaring instance variables
        to = new JLabel("To: ");
        cc = new JLabel("CC: ");
        bcc = new JLabel("BCC: ");
        subject = new JLabel("Subject: ");
        account = new JLabel("Select an Account: ");

        toTxt = new JTextField(20);
        ccTxt = new JTextField(20);
        bccTxt = new JTextField(20);
        subjectTxt = new JTextField(20);

        messageTxt = new JTextArea(500,500);
        scroll = new JScrollPane(messageTxt);

        accountBox = new JComboBox();
        accountBox.addItem("Yahoo");
        accountBox.addItem("GMail");
        accountBox.addItem("MSN");
        //accountBox.addItem("Yahoo");
        //accountBox.addItem("Yahoo");

        //Creating thr GUI
        gbl = new GridBagLayout();
        gbc = new GridBagConstraints();

        this.setLayout(gbl);

        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(account,gbc);

        gbc.gridx = 2;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(accountBox,gbc);

        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(to,gbc);

        gbc.gridx = 2;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(toTxt,gbc);

        gbc.gridx = 1;
        gbc.gridy = 3;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(bcc,gbc);

        gbc.gridx = 2;
        gbc.gridy = 3;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(bccTxt,gbc);

        gbc.gridx = 1;
        gbc.gridy = 4;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(cc,gbc);

        gbc.gridx = 2;
        gbc.gridy = 4;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(ccTxt,gbc);

        gbc.gridx = 1;
        gbc.gridy = 5;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(subject,gbc);

        gbc.gridx = 2;
        gbc.gridy = 5;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(subjectTxt,gbc);

        gbc.gridx = 1;
        gbc.gridy = 6;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(scroll,gbc);

        this.setSize(new Dimension(200,500));
        this.setVisible(true);

    }
} 
```

在这里，GUI 似乎很糟糕。我需要为所有字段提供足够的空间。在 中`JTextArea`，您可以看到它甚至不可见。我需要它的高度为 2 列；似乎所有这些问题都在发生，因为它试图将大列设置`JTextArea`为一列。供您参考，这是一个“撰写电子邮件”GUI，因此您可以清楚我的要求。我用过`this.pack()`，但它让一切变得更糟！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T14:30:34.243

正如我在上面的评论中提到的：

> 不要打电话`setSize()`。取而代之`pack()`的是 GUI，让组件的自然首选大小和布局决定 GUI 的大小。如果`pack()`让事情变得更糟，那么你应该从事情的那一面解决问题，而不是通过调用`setSize()`.

例如，我会

*   使 JTextArea 的大小*合理*，而不是 500 行乘 500 列！
*   不要设定事物的大小
*   打电话`pack()`
*   不要忘记使用 weightx 和 weighty（添加到代码中）和 insets（尚未添加）。
*   避免幻数。
*   考虑嵌套更易于使用的布局并尽量减少 GridBagLayout 的使用。
*   给 JScrollPane 额外的网格宽度以允许它填满底部。例如：

发送电子邮件.java：

```
import java.awt.*;
import java.util.HashMap;
import java.util.Map;
import javax.swing.*;

@SuppressWarnings("serial")
public class SendEmail extends JDialog {
   public final static String[] LABEL_TEXTS = { "Select an Account:", "To:",
         "BCC:", "CC:", "Subject:" };
   public final static String[] ACCOUNT_TEXTS = { "Yahoo", "GMail", "MSN" };
   private static final int TEXT_FIELD_LENGTH = 20;
   private static final int T_AREA_ROWS = 20;
   private static final int T_AREA_COLS = 50;
   private static final int INSET_GAP = 1;
   private static final int RIGHT_INSET_GAP = 15;
   private Map<String, JTextField> fieldMap = new HashMap<String, JTextField>();
   private JTextArea messageTxt;
   private JButton send;

   private JComboBox<String> accountBox;

   private JScrollPane scroll;

   public SendEmail(JFrame frame) {
      super(frame, "Dialog", true);
      messageTxt = new JTextArea(T_AREA_ROWS, T_AREA_COLS);
      scroll = new JScrollPane(messageTxt);
      accountBox = new JComboBox<String>(ACCOUNT_TEXTS);

      this.setLayout(new GridBagLayout());
      int ebGap = 5;
      ((JPanel) getContentPane()).setBorder(BorderFactory.createEmptyBorder(
            ebGap, ebGap, ebGap, ebGap));

      for (int i = 0; i < LABEL_TEXTS.length; i++) {
         JLabel label = new JLabel(LABEL_TEXTS[i]);
         addLabel(0, i, label);

         if (i == 0) {
            addField(1, i, accountBox);
         } else {
            JTextField tField = new JTextField(TEXT_FIELD_LENGTH);
            fieldMap.put(LABEL_TEXTS[i], tField);
            addField(1, i, tField);
         }
      }

      GridBagConstraints gbc = new GridBagConstraints();
      gbc.gridx = 0;
      gbc.gridy = LABEL_TEXTS.length;
      gbc.gridwidth = 2;
      gbc.weightx = 1.0;
      gbc.weighty = 1.0;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.insets = new Insets(INSET_GAP, INSET_GAP, INSET_GAP, INSET_GAP);
      this.add(scroll, gbc);

      pack();
      this.setVisible(true);
   }

   private void addField(int x, int y, JComponent comp) {
      GridBagConstraints gbc = new GridBagConstraints();
      gbc.gridx = x;
      gbc.gridy = y;
      gbc.weightx = 1.0;
      gbc.weighty = 0.0;
      gbc.fill = GridBagConstraints.HORIZONTAL;
      gbc.insets = new Insets(INSET_GAP, INSET_GAP, INSET_GAP, INSET_GAP);
      gbc.anchor = GridBagConstraints.EAST;

      this.add(comp, gbc);
   }

   private void addLabel(int x, int y, JComponent comp) {
      GridBagConstraints gbc = new GridBagConstraints();
      gbc.gridx = x;
      gbc.gridy = y;
      gbc.weightx = 0.0;
      gbc.weighty = 0.0;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.insets = new Insets(INSET_GAP, INSET_GAP, INSET_GAP, RIGHT_INSET_GAP);
      gbc.anchor = GridBagConstraints.EAST;

      this.add(comp, gbc);
   }

   public String getTextFieldText(String key) {
      JTextField tField = fieldMap.get(key);
      if (tField == null) {
         String text = "key, " + key + " not a valid argument for fieldMap";
         throw new IllegalArgumentException(text);
      }

      return tField.getText();
   }

   public String getAccountText() {
      return accountBox.getSelectedItem().toString();
   }

   public String getMessageTxt() {
      return messageTxt.getText();
   }

   public static void main(String[] args) {
      JFrame frame = new JFrame();
      frame.pack();
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

      new SendEmail(frame);
      frame.dispose();
   }
} 
```

运行时看起来像：

![在此处输入图像描述](../Images/7d88eb06f5a826ac1c2e90d1106e1ebf.png)

# templates - 如何在 Play framework 2.0 模板中插入指向控制器操作的链接

> ID：12447567
> 
> 赞同：14
> 
> 时间：2012-09-16T14:12:31.750
> 
> 标签：templates, hyperlink, playframework-2.0

如果我有一个 action `Application.show(tag: String)`，并且也有一个相应的路由条目，如何在不手动制作 url 的情况下将此 action 的链接插入到模板？

我想做类似的事情`magiclink(Application.show("tag"))`。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-16T14:43:52.127

句法：

```
<a href='@routes.Application.show("some")'>My link with some string</a> 
```

以此类推，您还可以在控制器中生成 url。IE。在某些操作后重定向：

```
public static Result justRedirect(){

    // use as String
    String urlOfShow = routes.Application.index().toString().

    // or pass as a redirect() arg
    return redirect(routes.Application.show("some"));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-19T13:31:27.993

将`routes`文件中的 URL 放入 html 的格式如下：

```
@routes.NameOfYourClass.nameOfyourMethod() 
```

因此，如果在您的`routes`文件中，您有：

```
GET     /products                   controllers.Products.index() 
```

你的`Products`班级看起来像这样：

```
public class Products extends Controller {

    public Result index() {
        return ok(views.html.index.render());
    }
} 
```

你`<a>`应该是这样的：

```
<a href="@routes.Products.index()">Products</a> 
```

**另外**：如果您的方法可以接受参数，那么您当然可以在方法的括号之间传递它们，如下所示： `index("Hi")`.

我希望这个答案更清楚易懂。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T14:17:54.730

啊，就这么简单`@{routes.Application.show("tag")}`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-27T23:47:15.947

接受的答案是正确的，但它不包括控制器在子包中的情况，即：`controllers.applications.MyFavouriteApplication.show()`

由于我很难找到答案，所以我会在这里发布。

要将非范围链接放入模板，正确的模式是`@controllers.{sub-packages if any}.routes.{your class}.{your method}()`

所以在这种情况下`@controllers.applications.routes.MyFavouriteApplication.show()`

如果您使用推荐的 Play 模式`@Inject`来创建单例控制器对象，并且如果您认为正确的答案是`@controllers.applications.MyFavouriteApplication.show()`，您将收到如下错误：

`Object MyFavouriteApplication is not a member of controllers.applications. Note: class MyFavouriteApplication exists, but it has no companion object.`

鉴于您已经提供了`@Inject()` `@Singleton`注释，这看起来确实是一个非常奇怪的错误。它可能会让您质疑您是否正确构建了项目。确定真正的原因可能会花费你大量的鲜血和财宝。

# python - 使用符号链接在 Linux 中导入 python 模块的简单方法

> ID：12447571
> 
> 赞同：2
> 
> 时间：2012-09-16T14:13:16.317
> 
> 标签：python, linux, import, module, symlink

我正在用 Linux (Mint 13) 中的 Python 修补一些宠物项目，我计划执行以下操作：

*   创建一个名为“pybin”的 Dropbox 子文件夹，我将所有自制的 python 模块放在其中；
*   在系统中的某处放置一个指向此文件夹的符号链接（第一个候选：`/usr/lib/python2.7/dist-packages`，位于`sys.path`或类似路径中）；
*   然后我只是`import mymodule`从任何 python 会话中执行，并导入模块。

我试过了，但没有用。我怀疑这与模块和包以及`__init__.py`文件之间的差异有关，但我承认，每次我读到一些关于这些东西的东西时，我都会感到很困惑。除了更多地了解这一点之外，我真正想做的就是找到一种方法来以所描述的方式导入我的模块。至关重要的是，实际文件夹位于 Dropbox（或任何其他文件同步文件夹）中，而不是系统文件夹中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:16:32.560

为什么不简单地在 .bash_profile 中设置 PYTHONPATH 环境变量。这样每次你执行一个 bash shell（通常发生在登录时），这个环境变量将被设置在你放置用户定义模块的任何地方。python 解释器使用这个变量来确定在哪里搜索模块导入：

```
PYTHONPATH="${PYTHONPATH}:/path/to/some/cool/python/package/:/path/to/another/cool/python/package/"

export PYTHONPATH 
```

# facebook - 如何在本地测试 Facebook API 操作？

> ID：12447572
> 
> 赞同：1
> 
> 时间：2012-09-16T14:13:35.273
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在构建一个 facebook 应用程序，到目前为止一切都很好，但是当我想添加一个指向外部 URL 的操作（即文章等）时，例如“ **example.com/articles/12** ”它不起作用，因为我正在使用诸如“ **localhost/dev/myprogram/articles/12** ”之类的本地网址进行开发，而 Facebook 显然无法获取它。

有什么好办法解决这个问题？请注意，该应用程序也不存在于活动域中，因此我无法使用该空间。

我使用我的本地主机域设置了开发应用程序，并且由于 Facebook 使用 iframe，它可以完美运行，但是一旦我想实际保存对象，它就会因为这个问题而失败。

所以可以说我有一个像这样的网址：

```
http://localhost/dev/myprogram/articles/12 
```

然后facebook首先尝试通过解析它

```
https://graph.facebook.com/?ids=http://localhost/dev/myprogram/articles/12&scrape=true 
```

然后用类似的东西保存新对象

```
https://graph.facebook.com/me/myprogram:upload?article=http://localhost/dev/myprogram/articles/12 
```

这将失败，因为即使 Facebook 可以通过 iframe 访问我的本地主机，它也无法从其他任何地方访问此页面。

有什么解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:27:41.243

> 有什么好办法解决这个问题？

要么获得一些可公开访问的空间来测试您的东西（例如，可以是您实际项目域的子域） - 或者通过使用某种 DynDNS 服务将您的本地开发机器设置为可从互联网访问。

# objective-c - 如何以编程方式强制在 UISearchBar 中进行搜索？

> ID：12447573
> 
> 赞同：24
> 
> 时间：2012-09-16T14:13:39.183
> 
> 标签：objective-c, ios, cocoa-touch, uisearchbar

如何强制 UISearchBar 自动开始新搜索（如按下搜索按钮）？有没有简单的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-06-17T11:26:25.163

我发现在以编程方式更改搜索字段的值之前，我需要将 UISearchViewController 设置为活动状态，以使 UISearchViewController 自动执行搜索：

```
// Need to set the searchDisplayController to active to 
// make the changes in search text trigger a search.
self.searchDisplayController.active = YES;
self.searchDisplayController.searchBar.text = @"New search string"; 
```

**斯威夫特 4**

```
self.searchController.isActive = true
self.searchController.searchBar.text = "New search string" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T15:02:40.840

只需让搜索输入字段成为第一响应者：

```
[self.searchInputField becomeFirstResponder]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-05T07:43:53.307

你可以强制你的搜索栏，

**目标 C：**

```
[self searchBar:yourSearchBarName textDidChange: yourSearchingString]; 
```

**斯威夫特 3.0：**

```
self.searchBar(self.yourSearchBarName, textDidChange: yourSearchingString) 
```

这将触发您的 searchBar。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-04T11:49:04.577

在确保您想要的文本在您的搜索栏中之后，您可以调用`self.searchBarSearchButtonClicked(searchBar)`（在您的搜索栏中传递）假设您已经实现了这个 UISearchBarDelegate 方法`searchBarSearchButtonClicked(_ searchBar: UISearchBar)`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-23T07:56:40.967

```
let searchBar: UISearchBar = /* The Searchbar */
searchBar.delegate?.searchBar?(searchBar, textDidChange: "")
searchBar.text = "" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-16T14:30:08.510

`searchBarSearchButtonClicked:`是的，您只需要隐式调用`UISearchbarDelegate`. 查看[官方文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISearchBarDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UISearchBarDelegate)以获取有关此代表的更多信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-27T20:26:39.403

**斯威夫特 5**

如果你只有一个 UISearchBar（不是 UISearchViewController）：

```
let searchBar: UISearchBar
searchBar.text = "foo" // Reset the search text
searchBar.becomeFirstResponder() // Select the field and bring up the keyboard 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-30T20:22:57.417

看起来很愚蠢，但很有效，所以它并不愚蠢；）

```
NSString * forceReload = self.searchDisplayController.searchBar.text;
self.searchDisplayController.searchBar.text = forceReload; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-06-16T17:52:33.183

这行得通 - 斯威夫特 4

```
 searchBar.text="Amber"
   self.searchBar(self.searchBar, textDidChange: "Amber") 
```

# django - 如何将西里尔字母的第一个字母大写

> ID：12447581
> 
> 赞同：0
> 
> 时间：2012-09-16T14:14:25.560
> 
> 标签：django, utf-8, title, capitalize

下一个问题：

```
>>> a = "привет"
>>> a.title()
'\xd0\xbf\xd1\x80\xd0\xb8\xd0\xb2\xd0\xb5\xd1\x82'

>>> print(a.title())
привет

>>> from string import capwords
>>> capwords(a)
'\xd0\xbf\xd1\x80\xd0\xb8\xd0\xb2\xd0\xb5\xd1\x82'

>>> print(capwords(a))
привет

>>> print(a.capitalize())
привет 
```

拉丁语没问题，一切正常。我现在在 Windows 7 中工作。我认为在 Linux 中这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:23:41.910

尝试这个：

```
>>> print u"привет".capitalize() #call the method on the unicode object
Привет

>>> a = "привет"
>>> print a.decode('utf-8').capitalize() #decode str to unicode 
Привет 
```

# javascript - 将异步调用转换为同步？

> ID：12447587
> 
> 赞同：0
> 
> 时间：2012-09-16T14:15:40.303
> 
> 标签：javascript, design-patterns, asynchronous, publish-subscribe

我在处理异步调用时遇到了问题。

例如，我想用 requirejs 动态加载一些模块。目前我使用订阅者-发布者模式。不幸的是，这使我的代码在某些情况下真的很混乱......：

*想象对象中有一个有效的事件系统*

```
var loader = {
    load: function(modules) {
        // do a async requirejs call
        require(modules, function(){
            // map arguments to normal array
            var modules = [].slice().call(arguments);
            // fire loaded event, pass modules
            this.trigger('loaded', modules);
        }.bind(this));
    }
};

var parent = {
    // do some initialization work
    initialize: function() {
        // execute the second initialization when our modules have finished loading async
        loader.on('loaded', this.secondInitialize, this);
        // require the given modules in the array
        loader.load(['one', 'two', 'three']);
    },

    secondInitialize: function(modules) {
        var three = new modules[2]();
        // do something with the 'three' module
    }

}; 
```

如您所见，这确实令人困惑。

**是否有任何其他设计模式可以很好地处理异步调用？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:22:08.603

查看[jQuery Deferred 对象](http://api.jquery.com/category/deferred-object/)。（即使没有 jq，大多数库都有 javascript 承诺的实现）

有了它，您可以执行以下操作：

```
var loadingOne = getLibOne(); //returns a jquery deferred promise
var loadingTwo = getLibTwo(); //returns another one

var loadingAllLibraries = $.when(loadingOne, loadingTwo);
loadingAllLibraries.done(function(lib1, lib2) {
  //... stuff
}); 
```

不完全是你的场景，但你明白了。组成异步原子变得相对容易。

# php - Openlayers - 服务器响应状态为 401（未授权

> ID：12447589
> 
> 赞同：1
> 
> 时间：2012-09-16T14:15:43.700
> 
> 标签：php, openlayers

我正在 WMS 上的普通 Openlayes 上进行地图项目。本地服务器是 Oracle Virtual Box 上的 Debian_x64，地图服务器是芬兰国家土地调查局。请求和投票示例可在此处获得[http://www.maanmittauslaitos.fi/aineistot-palvelut/rajapintapalvelut/rasteriaineistojen-palvelurajapinta-wms/kayttoonotto/kyselyt-es](http://www.maanmittauslaitos.fi/aineistot-palvelut/rajapintapalvelut/rasteriaineistojen-palvelurajapinta-wms/kayttoonotto/kyselyt-es)。我已成功完成 GetCapabilities 请求并获得 XML 响应。基于该 XML 响应，我尝试使用 GetMap 获取地图图层。Map 参数是根据我现在得到的 XML 响应分配的，我遇到的问题是

1.  BoundingBox 上有参数“resx 和 resy”，我是否需要将它们用于我正在做的事情，如果需要，如何使用？
2.  我在 Chrome 开发人员工具上监控了控制台，它响应以下错误：

`Failed to load resource: the server responded with a status of 401 (Unauthorized) https://ws.nls.fi/rasteriaineistot/image?LAYERS=yleiskartta_12m&VERSION=1.1.1&FORMAT=image%2Fpng&REQUEST=GetMap&TRANSPARENT=FALSE&STYLES=light&SERVICE=WMS&SRS=EPSG%3A4326&BBOX=0,45,45,90&WIDTH=256&HEIGHT=256`

...同时粉红色的瓷砖正在加载。我已经使用 Php cURL 代理“proxy.php”使用用户名和密码进行 HTTPS 基本身份验证，它与 Openlayers.js、style.css 和 index.php 位于同一文件夹中。现在我分配的代理是否可能无法正常工作？或者可能有一些相同的原产地政策问题？我的用户名和密码有效。我该如何解决这个问题？如果有人提供代码示例，那将非常有帮助。

我的 proxy.php 文件如下：

```
$string = $_GET['url'];
$urli = urldecode($string);
$url = $urli;

$ch = curl_init();
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_USERPWD,"user:pass");
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);
$data = curl_exec($ch);
$type = curl_getinfo($ch, CURLINFO_CONTENT_TYPE);

$im = imagecreatefromstring($data);

if ($type == "image/jpeg") {
    header('Content-Type: image/jpeg');
    imagejpeg($im);
} else if ($type == "image/png") {
    header('Content-Type: image/png');
    imagepng($im);
} else if ($type == "image/gif") {
    header('Content-Type: image/gif');
    imagegif($im);
} else if ($type == "text/xml") {
    header('Content-Type: text/xml');
    print_r($data);
}

imagedestroy($im);
curl_close($ch);
exit;

and the index.php is as following
  function init() {
                    var map = new OpenLayers.Map('map',options)

                    var request = OpenLayers.Request.GET({
                                        url:"https://ws.nls.fi/rasteriaineistot/image?",

                                        params: {service:"WMS",
                                                 version:"1.1.1",
                                             format:"text/xml",
                                             request:"GetCapabilities"},
                                                 proxy: "queryboth.php?url=",
                                                 async: false,
                                                 callback: handler

                    } );

                    function handler(request) {
                                console.log(request);

                           // alert(request.responseText);
                           // alert(request.status);
                           // alert(request.getAllResponseHeaders());
                                         }

// Here I set my ProxyHost could it be some mistake here    
                 OpenLayers.ProxyHost = "proxy.php?url=";

                 var layer = new OpenLayers.Layer.WMS("yleiskartta",

                            "https://ws.nls.fi/rasteriaineistot/image?",
                            {
                                layers: "yleiskartta_12m",
                                version:"1.1.1",
                                format: "image/png",
                                request: "GetMap",
                                transparent: false,
                                styles:"light"  

                            },

                            {

                               isBaseLayer: true,
                               opacity: 1 

                            }

                    );

                      var options = { 
                      sphericalMercator: true,
                      projection: new OpenLayers.Projection("EPSG:3067"),
                      maxExtent: new OpenLayers.Bounds(-380688,6247443,1347312,8227443),
                                          minScale: 2121.32, 
                          maxScale: 8485.28,  
                      units: "m",
                                          numZoomLevels: 6

                      };

                  map.addLayers([layer]);
                  map.zoomToMaxExtent();
                                  map.addControl( new OpenLayers.Control.LayerSwitcher() );

            } 
```

xml中一层的响应如下（对不起，我删除了标签）：

```
Layer opaque="1"
Name:yleiskartta_12m
Title : Yleiskarttarasteri 1:12 milj
LatLonBoundingBox minx="1.21" miny="55.57" maxx="51.93" maxy="71.79"
BoundingBox SRS="EPSG:3067" minx="-380688" miny="6247443" maxx="1347312" maxy="8227443" resx="1500.0" resy="1500.0"
BoundingBox SRS="EPSG:2393" minx="2619125.63" miny="6250068.42" maxx="4347827.2" maxy="8147483.65" resx="1500.0" resy="1500.0" 
ScaleHint min="2121.32" max="8485.28"
</Layer>

</pre> 
```

# c++ - 整数到布尔数组

> ID：12447593
> 
> 赞同：0
> 
> 时间：2012-09-16T14:16:20.290
> 
> 标签：c++

我想将像 83 这样的整数编码为像 1100101 这样的二进制代码，最快的方法是什么？现在我正在使用这段代码：

```
ToBinary(int size, int value) {  
    size--;  
    this->code = new bool[size];  
    int in = size;  
    while (in >= 0) {  
        if(pow(2, in) <= value) {  
        this->code[size-in] = pow(2, in);  
        value -= pow(2, in);  
        } else   
            this->code[size-in] = 0;  
        in--;  
    }  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:23:12.620

您可以利用 shift using`>>`使事情变得更容易：

```
ToBinary(int size, int value) {
    int i = size;

    this->code = new bool[size];

    while(i--) {
        this->code[i] = (value >> i) & 1;
    }
} 
```

（或者，以相反的顺序，`this->code[size - i]`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:49:56.363

如果您在编译时知道大小，`std::bitset<size> bits(value);`将在其构造函数中执行您想要的操作。

# parsing - 无法解析 AVC SPS 中的宽度/高度

> ID：12447595
> 
> 赞同：0
> 
> 时间：2012-09-16T14:17:36.140
> 
> 标签：parsing, video, video-streaming, h.264, video-processing

这是我从 mp4 容器中的 avcC 原子中解析出来的信息 avc extradata 符合 ISO/IEC 14496-15:2004(E) 5.2.4.1.1

```
> 0x01 0x42 0x00 0x1E 0xFF 0xE1 0x00 0x0E

Configuration Version: 1   u(8)<br>
AVCProfileIndication:  66  u(8)<br>
profile_compatability: 0   u(8)<br> 
AVCLevelIndication:    30  u(8)<br> 
bit(6) reserved = '111111' b   <br>
unsigned int (2) lengthSizeMinusOne = '11' <br> 
bit(3) reseved = '111' <br>
unsigned int (5) numOfSequenceParameterSets = 1 <br>
unsigned int (16) sequenceParameterSetLength = 14 <br>
SPS
> 0x67 0x42 0x00 0x1E 0x8D 0x68 0x6E 0x03 0xDA 0x6A 0x0C 0x02 0x0C 0x04 <br>

avC data Continued
> 0x01 0x00 0x04 <br>

unsigned int (8) numOfPictureParameterSets: 1 <br>
unsigned int (16) pictureParameterSetLength: 4 <br>
PPS <br>
>0x68 0xCE 0x74 0xC8 
```

SPS 的内容似乎给出了不正确的结果`pic_width_in_mbs_minus1 (5)`，我认为没有任何`emulation_3_byte`预防措施。我错过了一些明显的东西吗？我正在根据 ISO/IEC 14496-10:2004(E) 解析 SPS，这与[此处](https://stackoverflow.com/questions/6394874/fetching-the-dimensions-of-a-h264video-stream "获取 h264 视频流的维度")的 SPS 解析信息相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:29:59.823

图片是 96x16（[为什么？](https://stackoverflow.com/questions/6394874/fetching-the-dimensions-of-a-h264video-stream)）

### 序列参数集

```
profile_idc 66 
constraint_set0_flag 0 
constraint_set1_flag 0 
constraint_set2_flag 0 
constraint_set3_flag 0 
level_idc 30 
seq_parameter_set_id 0 
// ... 
num_ref_frames 1 
gaps_in_frame_num_value_allowed_flag 0 
pic_width_in_mbs_minus1 5 
pic_height_in_map_units_minus1 0 
frame_mbs_only_flag 1 
direct_8x8_inference_flag 1 
frame_cropping_flag 0 
vui_parameters_present_flag 0 
// ... 
```

### 图片参数集

```
pic_parameter_set_id 0 
seq_parameter_set_id 0 
entropy_coding_mode_flag 0 
num_slice_groups_minus1 0 
// ... 
```

# mysql - 使用两个操作创建 SQL 触发器

> ID：12447599
> 
> 赞同：0
> 
> 时间：2012-09-16T14:17:59.593
> 
> 标签：mysql, database, triggers

我正在尝试创建一个触发器，它将做两件事：

1.  `UPDATE`在完成之前将所有内容从表 X 中的一行复制到表 Y 中的一行
2.  将表 X 中一行的一列复制到表 Y 中`UPDATE`from no 之后的一行。1 完成

这是我到目前为止所拥有的：

```
delimiter //
create trigger log
before update on opnaar
for each ROW 

    begin
    set @a = opnaar.id;
    set @c = opnaar.initials;
    set @d = opnaar.revised;
    set @f = opnaar.course;
        insert into log(id,init_old,date_old,date_new,course) values (@a,@c,@d,NOW(),@f);
        end;

    after update on opnaar
    for each ROW
    begin
        set @e = opnaar.initials;
            insert into log(init_new) values (@e);
            end; 
```

但我认为不可能只向表中已经存在的行添加一个值。至少，不是我试图这样做的方式。我应该把它`after update`放在第一个动作中吗？

示例：我有这个内容：

![在此处输入图像描述](../Images/c7c4f14d24abdc89e125ff1f9059fe70.png)

我想将 、 和 复制`course`到`revised`另一个`initials`表`id`。这就是我的第一个动作应该做的。

在老师更新了该表中的某些内容后，应该将新的首字母（但与旧的首字母在同一列）复制到表 Y。这就是我的第二个动作应该做的。

我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:37:14.887

查看[CREATE TRIGGER](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)语法。不能在一个触发器中指定 AFTER 和 BEFORE 选项。

*   因此，您应该创建两个单独的触发器。
*   如果您想优化代码并组合触发器的主体，那么您可以编写一个存储过程并从触发器中调用它。

# java - 即使加载了所需的 javax.jms 类，ant build (javac) 也会出现“找不到符号”错误

> ID：12447600
> 
> 赞同：2
> 
> 时间：2012-09-16T14:18:04.730
> 
> 标签：java, ant

我正在使用我公司的 Ant 脚本来编译一个使用 javax.jms API 的类。即使 ant 脚本显示它正在加载类，它似乎也找不到任何这个 API 类的方法（我确实确认 jms.jar 位于 Ant 构建正在使用的类路径中）。我也在使用 Eclipse，这个类在 Eclipse 中编译得很好（使用与 Ant Build 脚本的类路径中相同的 jms.jar）。我查看了 javax.jms API，在我看来我正在正确编码。下面是代码的摘录，后面是编译输出的摘录。

**代码摘录**

```
import java.util.*;
import javax.jms.*;
import javax.naming.*;
import javax.naming.directory.*;

Hashtable environment = new Hashtable();
environment.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.fscontext.RefFSContextFactory");
environment.put(Context.PROVIDER_URL, "file:C:\\MQ-JNDI");
final InitialDirContext ctx = new InitialDirContext( environment );
final ConnectionFactory factory = (ConnectionFactory)ctx.lookup("PRIMARY_QCF");     
final Destination destination = (Destination)ctx.lookup("Q_LIST");
final javax.jms.Connection connection = factory.createConnection();
connection.start();
final Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
final MessageProducer producer = session.createProducer(destination);

ObjectMessage message = session.createObjectMessage(msg);
producer.send(message); 
```

**ANT BUILD 结果的摘录**

```
[javac] [loading javax\naming\Context.class(javax\naming:Context.class)]
[javac] [loading javax\naming\directory\InitialDirContext.class(javax\naming\directory:InitialDirContext.class)]
[javac] [loading javax\jms\ConnectionFactory.class(javax\jms:ConnectionFactory.class)]
[javac] [loading javax\naming\Name.class(javax\naming:Name.class)]
[javac] [loading javax\jms\Destination.class(javax\jms:Destination.class)]
[javac] [loading javax\jms\Connection.class(javax\jms:Connection.class)]
[javac] C:\work\tla\ja11\projects\common\src\com\ntrs\tla\controller\MemberListController.java:1474: cannot find symbol
[javac] symbol  : method createConnection()
[javac] location: interface javax.jms.ConnectionFactory
[javac]         final javax.jms.Connection connection = factory.createConnection();
[javac]                                                        ^
[javac] [loading javax\jms\Session.class(javax\jms:Session.class)]
[javac] C:\work\tla\ja11\projects\common\src\com\ntrs\tla\controller\MemberListController.java:1479: cannot find symbol
[javac] symbol  : method createSession(boolean,int)
[javac] location: interface javax.jms.Connection
[javac]         final Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
[javac]                                           ^
[javac] [loading javax\jms\MessageProducer.class(javax\jms:MessageProducer.class)]
[javac] C:\work\tla\ja11\projects\common\src\com\ntrs\tla\controller\MemberListController.java:1483: cannot find symbol
[javac] symbol  : method createProducer(javax.jms.Destination)
[javac] location: interface javax.jms.Session
[javac]         final MessageProducer producer = session.createProducer(destination);
[javac]                                                 ^
[javac] [loading javax\jms\ObjectMessage.class(javax\jms:ObjectMessage.class)]
[javac] C:\work\tla\ja11\projects\common\src\com\ntrs\tla\controller\MemberListController.java:1486: cannot find symbol
[javac] symbol  : method send(javax.jms.ObjectMessage)
[javac] location: interface javax.jms.MessageProducer
[javac]         producer.send(message); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:02:42.033

看起来您的编译器类路径中有 JMS jar 的旧版本（1.0.x），而不是 1.1 版本，或者在 1.1 版本之前。编译器抱怨的方法是 JMS 1.1 引入的方法。

我会仔细查看您传递给`<javac>`任务的类路径，以找出旧 JAR 的来源并排除它。

# jquery - 带有语法高亮的基于 Web 的代码编辑器插件（用于 Css 和 Less）

> ID：12447602
> 
> 赞同：7
> 
> 时间：2012-09-16T14:18:20.343
> 
> 标签：jquery, css, less

是否有一种经过验证/简单的方法可以在我的 Web 应用程序中创建代码编辑器的 CSS/LESS 文件？（如在 github 或任何基于 Web 的 IDE 上）。也许有一些好的插件可以实现这一目标？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T14:34:00.257

Github 使用[Ace 编辑器](http://ace.ajax.org/)，我强烈推荐它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-16T14:23:44.997

[试试http](http://codemirror.net/) : //codemirror.net / ...

# java - Java：使用原始类型序列化对象。获取错误 java.io.NotSerializableException

> ID：12447610
> 
> 赞同：0
> 
> 时间：2012-09-16T14:19:23.390
> 
> 标签：java, serialization, serializable

类定义

```
private class classSerial implements Serializable {
    private static final long serialVersionUID = 1L;
    String vString;
    boolean vBool;
    long vLong;
    int vInt;

    classSerial(){
     //initialize members;
    }
} 
```

我仍然收到错误：

```
Caused by: java.io.NotSerializableException: com.example..... 
```

当我`writeObject`尝试`FileOutputStream`对`classSerial`.

* * *

根据我的阅读，我使用的数据类型, `String`, `boolen`,是. 所以，我不需要实现任何方法。`long``int``Serializable`

我在这里想念什么？

* * *

LOGCAT

```
09-16 19:58:26.170: W/dalvikvm(4278): threadid=1: thread exiting with uncaught exception (group=0x40018560)
09-16 19:58:26.201: E/AndroidRuntime(4278): FATAL EXCEPTION: main
09-16 19:58:26.201: E/AndroidRuntime(4278): java.lang.IllegalStateException: Could not execute method of the activity
09-16 19:58:26.201: E/AndroidRuntime(4278):     at android.view.View$1.onClick(View.java:2165)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at android.view.View.performClick(View.java:2506)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at android.view.View$PerformClick.run(View.java:9112)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at android.os.Handler.handleCallback(Handler.java:587)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at android.os.Looper.loop(Looper.java:130)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at android.app.ActivityThread.main(ActivityThread.java:3835)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.lang.reflect.Method.invokeNative(Native Method)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.lang.reflect.Method.invoke(Method.java:507)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at dalvik.system.NativeStart.main(Native Method)
09-16 19:58:26.201: E/AndroidRuntime(4278): Caused by: java.lang.reflect.InvocationTargetException
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.lang.reflect.Method.invokeNative(Native Method)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.lang.reflect.Method.invoke(Method.java:507)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at android.view.View$1.onClick(View.java:2160)
09-16 19:58:26.201: E/AndroidRuntime(4278):     ... 11 more
09-16 19:58:26.201: E/AndroidRuntime(4278): Caused by: java.io.NotSerializableException: com.example.testing.serialActivity
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1535)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1143)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:413)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at com.example.testing.serialActivity.login(login_activity.java:277)
09-16 19:58:26.201: E/AndroidRuntime(4278):     at com.example.testing.serialtest.login(serialtest.java:34)
09-16 19:58:26.201: E/AndroidRuntime(4278):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:34:44.923

问题很可能是你有一个内部类。即它不是静态的，因此它具有对不可序列化的外部类的引用。这就是检查存在的原因，以避免序列化您不打算的东西。

您会在堆栈跟踪中注意到它抱怨的类是另一个类。

```
NotSerializableException: com.example.testingserialActivity 
```

尝试上课

```
private static class ClassSerial implement Serializable 
```

# html - CSS列表样式类型不起作用

> ID：12447611
> 
> 赞同：25
> 
> 时间：2012-09-16T14:19:26.637
> 
> 标签：html, css, html-lists

我已经`list-style-type`在 CSS 中设置了，但由于某种原因它没有显示它。

```
body {
  margin: 0;
}
ol {
  list-style-type: decimal;
  padding-left: 0;
}
```

```
<ol>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ol>
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-09-16T14:23:48.043

由于您的填充重置，数字实际上在页面的左侧。尝试添加：

```
list-style-position: inside; 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-04-28T10:41:52.307

```
display:list-item;
list-style-position:outside; 
```

如果列表`display:`属性设置为其他内容，则可能会出现问题`display:list-item;`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-16T14:27:30.740

十进制是“ol”的默认值。无需声明。数字也只是从页面的一侧掉下来，即不可见。调整您的填充并摆脱多余的声明。[看这里](http://www.w3schools.com/cssref/pr_list-style-type.asp)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-05T00:33:33.440

如果这些都不起作用，请确保您没有在 LI 内明确标记为显示块的元素。它只是发生在我身上，将 H4 A 设置为 LI 内的块。我正要辞职

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-08T11:07:15.297

就我而言，它不适用于`<ul>`.

我怀疑这可能是因为我使用了一个 CSS 重置文件。

我`ul { display:list-item; }`按照上面的建议设置了，它工作得很好。

检查您是否正在使用任何重置文件。他们有时可能很棘手。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-19T09:49:55.940

只需删除“显示：块；” 从你的 li 元素

# javascript - 我不能 .load() 已经是 .load() 的 div

> ID：12447612
> 
> 赞同：0
> 
> 时间：2012-09-16T14:19:36.213
> 
> 标签：javascript, jquery, html

我有一个使用 .load() 的 div

```
var $LoadData = $("#my-data-div");
$($LoadData).load("first-page.html"); 
```

然后我创建一个表来保存一些数据

```
<table id="user-list">
  <tr id="tr-name1"><td>DATA</td></tr>
  <tr id="tr-name2"><td>DATA</td></tr>
  <tr id="tr-name3"><td>DATA</td></tr>
</table> 
```

然后我设置了一个点击处理程序，每次点击其中一个 tr 时，都会使用新页面加载 $LoadData DIV 并传入一个 url 变量。

```
$("#user-list tr").on("click", function(event){
  var rowId = $(this).attr("id");
  $($LoadData).load("setStatus.asp", {sbid: rowId}, function(){
alert($($LoadData).html());
  });
}); 
```

我的问题是新页面永远不会加载。$LoadData DIV 的 innerHTML 始终与旧页面相同。谁能看到我做错了什么？我很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:34:19.233

`that`是 JavaScript 中的 lambda。

```
$("#user-list tr")
    .on("click", function(event){
    var that = $(this)
    that
    .load("setStatus.asp",
    {sbid: rowId},
    function(){
        alert(that.html());
    }); 
```

});

# c++ - C++ 二维数组

> ID：12447613
> 
> 赞同：0
> 
> 时间：2012-09-16T14:19:38.990
> 
> 标签：c++

我目前正在学习 c++，代码到目前为止，直到我创建数组变量来调用函数而不是字符串，但是出了点问题，我不知道它是什么。问题是，它只能正确计算前 2 个字母，然后将其余的字母记为 └└└└ 符号。

这是代码：

```
#include <iostream>
#include <string>
#include <windows.h>
#include <conio.h>

using namespace std;

int land(){
    HANDLE hConsole;
    hConsole = GetStdHandle (STD_OUTPUT_HANDLE);
    SetConsoleTextAttribute(hConsole, FOREGROUND_GREEN);
    char H = 72;
    cout<<H;
}

int player(){
    HANDLE hConsole;
    hConsole = GetStdHandle (STD_OUTPUT_HANDLE);
    SetConsoleTextAttribute(hConsole, FOREGROUND_BLUE);
    char X = 88;
    cout<<X;
}

    /*previously,i declared a string inside worldgen,and generated 2d array inside the for loop,but when i changed variables to call a function,first letters were X and H,but then it went └└└└└└└└└└└└└└└└└└└└└└└ for all the remaining characters.What's wrong here? */

int worldgen(int dimX,int dimY,int x,int y){  
    HANDLE hConsole;
    hConsole = GetStdHandle (STD_OUTPUT_HANDLE);
    system("TITLE MyTitleText");
    int H = land();
    int X = player();
    string world[dimX][dimY];
    for(int c = 0;c<dimY;c++){
        for(int count = 0;count<dimX;count++){
            world[count][c] = H;
            world[x][y] = X;
            cout<<world[count][c];
        }
        cout<<endl;
    }

}

int main(){
    HANDLE hConsole;
    hConsole = GetStdHandle (STD_OUTPUT_HANDLE);

    worldgen(70,15,10,10);

    cin.get();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:26:36.260

land() 和 player() 都不返回任何内容，因此 H 和 X 都没有获得任何有意义的数据，它们只是未初始化的垃圾数据。

我很惊讶这甚至可以编译，因为你有两个函数应该返回整数，但没有设置为返回任何东西。

# ruby-on-rails - Rails：将 Facebook 集成到具有多个域的项目的最佳方式

> ID：12447614
> 
> 赞同：0
> 
> 时间：2012-09-16T14:19:47.197
> 
> 标签：ruby-on-rails, facebook-graph-api, internationalization

在我当前的项目中，我们计划集成 Facebook 进行身份验证。该站点为 i18n、sitenameineng.com、sitenameinswe.se 等使用不同的域。
Facebook 只允许具有相同基本 URL 的多个域，这就是问题开始的地方。我可以为每种语言建立一个新项目，但感觉非常不必要。最好的解决方案是什么？

我能想出的唯一解决方案是为每种语言创建一个新的 Facebook 应用程序，然后根据语言环境更改我的项目中的 facebook 应用程序 ID 和密码，还是有更好的解决方案？如果没有更好的解决方案，我应该如何根据语言环境放置 app id 和 secret？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:22:23.077

如何创建一个`proxy`应用程序，为您的所有域提供一个 API 来使用？

说：proxy.sitename.com 包含 SDK、身份验证、数据库处理和重定向到正确的网站。然后，您可以向您的代理发出请求，然后代理使用提供的访问令牌调用 Facebook API 端点。当然，这可能会导致轻微的性能下降，但这可能是解决这个问题的最佳方法。

考虑到您项目的性质，您可能还需要考虑：[https ://developers.facebook.com/docs/internationalization/](https://developers.facebook.com/docs/internationalization/)

# javascript - jQuery：在字符串中搜索文本

> ID：12447622
> 
> 赞同：3
> 
> 时间：2012-09-16T14:20:48.237
> 
> 标签：javascript, jquery

我试试这个：

```
form['comment'] = '<blockquote>test</blockquote><a href="#">test</a> <Your reply here>';

if($(form['comment']).search('<Your reply here>'))
    alert(1)
else
    alert(0) 
```

但是有这个错误：

> TypeError: $(form.comment).search 不是函数

我解决了这个问题：

```
if(form['comment'].value.search('<Вашият отговор тук>') != -1)
    alert(1)
else
    alert(0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:23:32.077

你想要的是`$(form['comment']).text().search()`

所以：

```
form = [];
form['comment'] = '<blockquote>test</blockquote><a href="#">test</a> <Your reply here>';

if(form['comment'].search('<Your reply here>') != -1)
    alert(1)
else
    alert(0)​ 
```

[这是一个工作示例](http://jsfiddle.net/hfDWr/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:47:42.647

要找出与其他字符串匹配的字符串，您不需要 jQuery！。

```
var comment = "<blockquote>test</blockquote><a href="#">test</a> <Your reply here>",
    search = "<Your reply here>";

comment.indexOf( search ) != -1;  //  indexOf returns -1 when search does not match
/<Your reply here>/.test( comment ); // returns true when search is in comment. 
```

# java - 有没有办法在 Java AWT 中创建表？

> ID：12447623
> 
> 赞同：2
> 
> 时间：2012-09-16T14:20:55.227
> 
> 标签：java, database, awt

有没有办法在 Java AWT 中创建表？我需要创建简单的 Java AWT 程序，用于从数据库中插入、编辑、删除和读取用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:55:45.427

是的：用一堆标签作为单元格和一个滚动窗格制作您自己的表格。您可以对其进行设置以即时添加更多单元格/标签，并添加您想要的任何功能。

如果您不能或不想执行上述操作，那么您可以寻找为 AWT 创建表的第三方库。

或者采取更容易和更快的选择，只使用挥杆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-10T14:10:47.260

您可以在摇摆 JTable 中制作表格。但现在你应该使用图形：

```
import java.awt.*;
public class name extends Frame{
 name(){
  setLayout(new FlowLayout());
  setSize(1000,1000);
  setVisible(true);
}//end of name()
public void paint(Graphics g){//opening graphics
  g.drawRect(10,50,100,100);//make a rectangle 
  g.drawRect(50,50,100,100);//another rectangle
  g.drawRect(10,100,100,100);//and another
  g.drawRect(50,100,100,100);//last rectangle
  g.drawString("SOMTHING", 30,80);//write a text in a rectangle
}//end of graphics
public static void main(String[] args){
  name n=new name();
}
}//end of Frame 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-25T07:51:34.783

您可以使用带有 GridLayout 的面板以及组件（标签或文本字段）来创建，然后您可以将该面板放在框架内。这是示例代码！希望这会奏效！

但唯一的问题是，我们无法为放置在 GridLayout 中的组件设置大小！谁知道如何在GridLayout中设置组件的大小，请留言！

```
import java.awt.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
public class AwtTable extends Frame{

    AwtTable(){

        Panel p = new Panel();
        Color c = new Color(241, 216, 252);

        try {

            Class.forName("com.mysql.cj.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/database","root","password");

            PreparedStatement ps = con.prepareStatement("select * from table_name;");
            ResultSet rs = ps.executeQuery();

            TextField l1 =null,l2=null,l3=null,l4=null,l5=null,l6=null ;
            int row=1;
            while(rs.next()) {

                l1 = new TextField();
                l1.setText(rs.getString(1));
                l2 = new TextField();
                l2.setText(rs.getString(2));
                l3 = new TextField();
                l3.setText(Integer.toString(rs.getInt(3)));
                l4 = new TextField();
                l4.setText(rs.getString(4));
                l5 = new TextField();
                l5.setText(rs.getString(5));
                l6 = new TextField();
                l6.setText(Long.toString(rs.getLong(6)));

                Button add = new Button("Edit");
                Button delete = new Button("Delete");   
                add.setSize(70,20);
                delete.setSize(70,20);

                p.add(l1);p.add(l2);p.add(l3);p.add(l4);p.add(l5);p.add(l6);
                p.add(add);p.add(delete);
                p.setLayout(new GridLayout(row,8));
                row++;
            }
            p.setBackground(Color.white);
            p.setBounds(100,100,1000,400);
            add(p);

            setLayout(null);
            setVisible(true);
            setSize(700,500);
            setTitle("Employee Datas");
            setBackground(c);

        }catch(Exception e) {
            System.out.println(e);
        }   
    }
    public static void main(String[] args) {
        AwtTable at = new AwtTable();
    }
} 
```

# winrt-xaml - WinRT：如何为 gridview 中的元素设置不同的指针效果？

> ID：12447625
> 
> 赞同：0
> 
> 时间：2012-09-16T14:21:09.240
> 
> 标签：winrt-xaml

我需要为 gridview 中的元素设置不同的翻转效果。我创建了日历，需要背光已经过去的日子，并消除其他日子的翻转效果。我怎样才能做到这一点？

我发现了类似的问题 [Windows 8 GridView - 禁用项目点击可视化](https://stackoverflow.com/questions/10359197/windows-8-gridview-disabling-item-tap-visualization) ，但它没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:47:21.027

GridView 的翻转效果作为其 ItemContainerStyle 的一部分进行管理。

在 Visual Studio 中，右键单击左侧的 GridView，然后选择 Edit Additional Templates、Edit Generated Item Container (ItemContainerStyle)、Edit a Copy。

在生成的样式中，您会发现一个名为“Hover”的 VisualStateGroup。这些是当用户将鼠标悬停在项目上时对容器发生的更改。在模板的底部，您会找到项目容器和网格项目的默认包装器（带有复选框的边框）。您需要对此进行更改，然后根据需要修改 VisualStateGroups。

# java - JavaFX 和回调

> ID：12447626
> 
> 赞同：1
> 
> 时间：2012-09-16T14:21:13.510
> 
> 标签：java, scala, javafx-2

我正在尝试为 JavaFX 中的方法设置回调：[http](http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html#setControllerFactory(javafx.util.Callback) ://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html#setControllerFactory(javafx.util.Callback )

这是签名：

```
public void setControllerFactory(Callback<java.lang.Class<?>,java.lang.Object> controllerFactory) 
```

我尝试了不同类型的设置，这是最新的，我似乎根本无法编译它，总有一些与签名不匹配的东西：

```
val loader = new FXMLLoader()
loader.setControllerFactory(new Callback[Class[_], AnyRef] {

}) 
```

这个给了我：

```
error: object creation impossible, since method call in trait Callback of type (x$1: Class[_])AnyRef is not defined 
```

我将如何在 Scala 中编写该 Java 示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T15:23:20.027

正如错误消息所说，您需要在匿名类中定义该方法：

```
loader.setControllerFactory(new Callback[Class[_],Object] {
  def call(c: Class[_]): Object = {
    // your implementation
  }
}) 
```

# java-me - LWUIT ComboBox 的样式

> ID：12447629
> 
> 赞同：0
> 
> 时间：2012-09-16T14:21:59.337
> 
> 标签：java-me, combobox, styles, lwuit

我正在一个项目中工作并使用 LWUIT，我想为 Combobox 制作自定义样式，经过大量搜索后我成功地通过更改单元格渲染器和外观来更改箭头图标

现在的问题是我的物品周围的空白我想删除它们，请问我该怎么做

![组合框样式](../Images/4c5db971284e8a786cc697f255b160db.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:35:45.080

[您应该开始将各种样式的填充/边距条目设置为 0，我们在Codename One](http://www.codenameone.com/)处稍微更改了这里的样式，所以我不太记得所有内容，但尝试 PopupList、PopupItem、ComboBoxPopupList 等。

# c# - BackgroundWorker 仍然阻塞 IHttpHandler

> ID：12447636
> 
> 赞同：4
> 
> 时间：2012-09-16T14:22:26.327
> 
> 标签：c#, asp.net, sql-server

所以我有 UI 可以在我的应用程序中创建一个日历事件。创建新事件时，我会为我的所有用户（大约 3,000 个）创建通知。我新这需要一段时间，因为我需要为每个用户写入数据库来创建他们的通知，所以我创建了一个继承自`BackgroundWorker`. 我真的不在乎是否创建了通知（我这样做，但不是在为最终用户完成请求的上下文中）所以我认为这将是一种有效的方法。

然而，当我去实现它时，即使在调用之后`context.Response.End()`，`HttpHandler`仍然等待后台工作人员完成。我调试了线程并且`HttpHandler`有`BackgroundWorker`不同的线程ID。我不确定我是否在某种程度上抹黑了`HttpHandler`返回，或者我是否误解了这`BackgroundWorker`门课的用途。

```
class EventHandler : IHttpHandler
{
    ...
    public void ProcessRequest(HttpContext context)
    {
         ...
         // I need this to finish before the response ends
         CalendarEvent event = CreateCalendarEvent();
         List<int> users = GetUsersFromDB();
         if(event != null) // The event was created successfully so create the notifications
         {
             // This may take a while and does not effect the UI on
             // client side, so it can run in the background
             NotificationBackgroundWorker notificationWorker = new NotificationBackgroundWorker(notification, users);
             notificationWorker.RunWorkerAsync();
         } else {
            ...
            // Log Error and set status code for response
            ...
         }
         ...
         context.Response.End()
    }
    ...
}

class NotificationBackgroundWorker : BackgroundWorker
{
    private Notification notification;
    private List<int> users;

    public NotificationBackgroundWorker(Notification newNotification, List<int> usersToNotify) : base()
    {
        this.notification = newNotification;
        this.users = usersToNotify;
        this.DoWork += DoNotificationWork;
    }

    private void DoNotificationWork(object sender, DoWorkEventArgs args)
    {
        CreateUserNotifications(notification, users);
    }

    private void CreateUserNotifications(Notification notification, List<int> userList)
    {
        // This is where the bottleneck is occurring because there 
        // is one DB write per user
        foreach (int userId in userList)
        {
            ...
            // Create the notification for each user
            ...
        }
     }
} 
```

任何见解都会很棒。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T19:14:18.867

`BackgroundWorker`与当前集成`SynchronizationContext`。它的设计方式是在完成之前不会让当前请求结束`BackgroundWorker`。这是你大部分时间想要的。

我建议您通过启动一个新的`Task`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:42:58.247

在另一个线程中执行此操作，而不是使用 BackgroundWorker。我不确定 BackGroudWorker 是否会在这种情况下工作。

```
public void ProcessRequest(HttpContext context)
    {
         ...
       // I need this to finish before the response ends
       CalendarEvent event = CreateCalendarEvent();
       List<int> users = GetUsersFromDB();
       if(event != null) // The event was created successfully so create the notifications
       {

             Thread thread = new Thread(
            () =>
             {
                CreateUserNotifications(notification, users);
             });
             thread .IsBackground = true;
            thread.Start();

       } else {
            ...
            // Log Error and set status code for response
            ...
         }
         ...
         context.Response.End()
    } 
```

# jquery - 如何在数组上检索带有数组的json？

> ID：12447639
> 
> 赞同：0
> 
> 时间：2012-09-16T14:22:56.630
> 
> 标签：jquery, json

问题是我已经可以通过firebug看到我的json的值但是问题是将它附加到我的表中我尝试将我的json_encode从echo`json_encode(array('red'=>$red, 'blue'=>$blue));`更改`json_encode($blue);`为查看我的ajax是否真的有效然后`json_encode($blue);`我将其更改`toAppend += '<tr><td>'+data.red[i]['warrior_name']+'</td><td>Name</td><td>'+data.blue[i]['warrior_name']+'</td></tr>';`为`toAppend += '<tr><td>'+data[i]['warrior_name']+'</td></tr>';`然后它完美显示我的桌子，但只有蓝色阵列，我想要蓝色和红色阵列。所以我想知道出了什么问题或者我遗漏了什么？

这是我的 PHP 代码：

```
 //get blue_team attributes
$blue = array();

$blue_result = $db->dataWarrior($battle_id,$blue_name);

foreach($blue_result as $warrior){
    $blue[] = $warrior;
}

//get red_team attributes
$red = array();

$red_result = $db->dataWarrior($battle_id,$red_name);

foreach($red_result as $warrior){
    $red[] = $warrior;
}

    echo json_encode(array('red'=>$red, 'blue'=>$blue)); 
```

这是我的ajax代码：

```
$.ajax({
                url: "battle_review.php",
                type: "post",
                datatype: "json",
                data: { 
                    bname: blue_name,
                    btype: blue_type,
                    rname: red_name,
                    rtype: red_type },
                success: function(data){
                    var toAppend = '';
                    if(typeof data === "object"){
                        for(var i=0;i<data.length;i++){
                            toAppend += '<tbody>';
                            toAppend += '<tr><td>'+data.red[i]['warrior_name']+'</td><td>Name</td><td>'+data.blue[i]['warrior_name']+'</td></tr>';

                            toAppend += '</tbody>';
                        }
                        $("#battledata").append(toAppend);
                    }
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:35:13.503

您的输出结构对于对其进行适当的迭代非常糟糕。但是，假设`red`并且`blue`始终具有相同的元素计数，您可以这样做：

```
$.ajax({
    url: "battle_review.php",
    type: "POST", // uppercase
    dataType: "json", // uppercase T
    data: {
        bname: blue_name,
        btype: blue_type,
        rname: red_name,
        rtype: red_type
    },
    success: function(data) {
        var toAppend = '';
        for(var i = 0; i < data.red.length; i++) {
            toAppend += '<tbody>';
            toAppend += '<tr><td>' + data.red[i].warrior_name. + '</td><td>Name</td><td>' + data.blue[i].warrior_name + '</td></tr>';

            toAppend += '</tbody>';
        }
        $("#battledata").append(toAppend);
    }
}); 
```

像这样的数组会更干净：

```
[{"red": ..., "blue": ...},
 {"red": ..., "blue": ...},
] 
```

然后您可以简单地对其进行迭代并访问元素的`red`和`blue`属性：

```
$.each(data, function(i, row) {
    // row.red
    // row.blue
}); 
```

# python - 要列出的 Python 列表字符串

> ID：12447653
> 
> 赞同：3
> 
> 时间：2012-09-16T14:24:31.407
> 
> 标签：python

我有一个字符串：

```
s= "[7, 9, 41, [32, 67]]" 
```

我需要将该字符串转换为列表：

```
l= [7, 9, 41, [32, 67]] 
```

问题是，当我使用列表时，我得到了这个：

```
['[', '7', ',', ' ', '9', ',', ' ', '4', '1', ',', ' ', '[', '3', '2', ',', ' ', '6', '7', ']', ']'] 
```

我正在使用 python 3.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T14:26:07.760

您*可以*使用以下命令完全按照您的要求进行操作`ast.literal_eval()`：

```
>>> ast.literal_eval("[7, 9, 41, [32, 67]]")
[7, 9, 41, [32, 67]] 
```

但是，您可能首先希望使用像 JSON 这样的健全的序列化格式，而不是依赖 Python 对象的字符串表示。（附带说明一下，您拥有的字符串甚至可能是 JSON，因为此特定对象的 JSON 表示形式看起来与 Python 字符串表示形式相同。由于您没有提到 JSON，我假设这不是您以前使用的得到这个字符串。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T14:25:48.557

使用该`ast`模块，它有一个方便的[`.literal_eval()`功能](http://docs.python.org/library/ast.html#ast.literal_eval)：

```
import ast

l = ast.literal_eval(s) 
```

在 python 提示符下：

```
>>> import ast
>>> s= "[7, 9, 41, [32, 67]]"
>>> ast.literal_eval(s)
[7, 9, 41, [32, 67]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T14:25:51.790

你想使用`ast.literal_eval`：

```
import ast
s= "[7, 9, 41, [32, 67]]"
print ast.literal_eval(s)
# [7, 9, 41, [32, 67]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T15:24:08.347

使用：封装 ast：函数：literal_eval(node_or_string)

[http://docs.python.org/library/ast.html#module-ast](http://docs.python.org/library/ast.html#module-ast)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-11T04:22:19.767

这是另一个答案，但我不建议你。因为`exec`很危险。

```
>>> s= "[7, 9, 41, [32, 67]]"
>>> try:
...   exec 'l = ' + s
...   l
... except Exception as e:
...   e
[7, 9, 41, [32, 67]] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-12T01:47:04.910

为什么不使用`eval()`？

```
>>> s = "[7, 9, 41, [32, 67]]"
>>> eval(s)
[7, 9, 41, [32, 67]] 
```

# javascript - 如何使用 RCurl 使用 javascript 来抓取网页进行导航？

> ID：12447659
> 
> 赞同：2
> 
> 时间：2012-09-16T14:25:03.533
> 
> 标签：javascript, r, web-scraping, rcurl

我有一个这样的链接：

[http://webfund6.financialexpress.net/clients/zil/pricetable.aspx?User=PUBLIC&Region=ROW&Range=VISTA&Currency=HKD](http://webfund6.financialexpress.net/clients/zil/pricetable.aspx?User=PUBLIC&Region=ROW&Range=VISTA&Currency=HKD)

我想每天抓取基金价格，我可以在 R 中使用`XML`和`RCurl`打包来抓取第一页，但是对于第二页中的剩余资金，之后，它是由 javascript ( `javascript:SetPageIndex('1');`) 导航的。

如何抓取 javascript 导航页面？

# c# - 如何从 Visual Studio 2012 中的 resharper 测试会话窗口导航到功能文件？

> ID：12447674
> 
> 赞同：3
> 
> 时间：2012-09-16T14:26:37.917
> 
> 标签：c#, resharper, visual-studio-2012, specflow, acceptance-testing

对于验收测试，我在 Visual Studio 2012 中使用 TeckTalk SpecFlow。当我运行所有 specflow 场景时，打开了 resharper 单元测试会话窗口，我可以看到所有测试结果。就像下面的屏幕截图一样。

![在此处输入图像描述](../Images/cf13f2f71cc55217c28cd8198b00886e.png)

问题是，当我在某些功能文件中看到失败的测试（场景）时，如何从 resharper 会话窗口直接导航到该功能文件进行编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-22T15:41:53.577

仅在测试失败时才有效的部分解决方案是在 resharper 测试会话或单元测试窗口中双击测试名称。如果上次运行时测试失败，那么它可以完美运行，不幸的是，如果它最后一次通过/ignored/unknown，它会将您带到 feature.cs 文件。

您可以在 feature.cs 文件中使用快捷方式将解决方案资源管理器导航到当前打开的文件（默认为 shift+alt+l），然后在解决方案资源管理器中将功能文件作为所选文件上方的文件打开. 这并不理想，但总比没有好。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-19T10:03:15.173

如果通过新的 VS2012 测试资源管理器运行，它似乎工作得很好，它在我的机器上从项目菜单上的“运行 SpecFlow 场景”自动运行。我只能假设 Resharper 妨碍了你的机器。

尝试测试->运行->全部，然后您所要做的就是双击测试，它会将您直接带到有问题的场景。

![VS2012 SpecFlow 集成](../Images/5e0b5abc1d8a0c717bca17f3cae7a9d6.png)

# android - 如何更改安卓启动标志（u-boot-logo.data）？

> ID：12447685
> 
> 赞同：2
> 
> 时间：2012-09-16T14:27:46.487
> 
> 标签：android, u-boot

我正在尝试更改启动 android 设备后显示的 android 吉祥物启动启动画面。此映像的原始文件名为 u-boot-logo.data，位于 FirmwareInstall 文件夹中的固件安装文件中。如何编辑并将其更改为不同的图像？它的文件格式是什么？

# java - java并发map按值排序

> ID：12447689
> 
> 赞同：2
> 
> 时间：2012-09-16T14:28:34.953
> 
> 标签：java, hashmap, linkedhashmap, sortedmap, concurrentskiplistmap

我正在寻找一种方法来拥有可以按值而不是键排序的并发映射或类似的键->值存储。

到目前为止，我正在查看[ConcurrentSkipListMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)但我找不到按值排序的方法（使用[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)），因为`compare`方法只接收键作为参数。

该映射具有字符串形式的键和整数形式的值。我正在寻找的是一种检索具有最小值（整数）的键的方法。

我也在考虑使用 2 个映射，并使用整数键和字符串值创建一个单独的映射，这样我将有一个我想要的按整数排序的映射，但是可以有多个具有相同值的整数，这可能会导致我遇到更多问题。

例子

"user1"=>3 "user2"=>1 "user3"=>3

排序列表： "user2"=>1 "user1"=>3 "user3"=>3

有没有办法做到这一点，或者是否有任何第三方库可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:31:48.137

要按可以有多个“值”到“键”映射的值排序，您需要一个[MultiMap](http://guava-libraries.googlecode.com/svn/tags/release02/javadoc/com/google/common/collect/Multimap.html)。这需要同步，因为没有并发版本。

这并不意味着性能会很差，因为这取决于您调用此数据结构的频率。例如，它最多可以加起来 1 微秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:52:53.057

我最近不得不这样做并最终使用了一个`ConcurrentSkipListMap`键包含一个字符串和一个整数的位置。我最终使用了下面提出的答案。核心见解是，您可以构建代码以允许在删除前一个键之前复制具有不同值的键。

[在 ConcurrentSkipListMap / ConcurrentSkipListSet 中重新排序键的原子方式？](https://stackoverflow.com/q/15507418/586086)

问题是要保留一组动态的字符串，这些字符串与可以从不同线程同时更改的整数相关联，如下所述。这听起来与您想要做的非常相似。

[Redis 是否有可嵌入的 Java 替代方案？](https://stackoverflow.com/q/14805852/586086)

这是我的实现代码：

[https://github.com/HarvardEconCS/TurkServer/blob/master/turkserver/src/main/java/edu/harvard/econcs/turkserver/util/UserItemMatcher.java](https://github.com/HarvardEconCS/TurkServer/blob/master/turkserver/src/main/java/edu/harvard/econcs/turkserver/util/UserItemMatcher.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:33:16.590

a 的原理`ConcurrentMap`是它可以被同时访问——如果你想在任何时候对其进行排序，性能将会受到很大的影响，因为该映射需要完全同步（如哈希表），从而导致吞吐量下降。

因此，我认为您最好的选择是通过将所有元素放在不可修改的 TreeMap 中来返回地图的排序视图（尽管按值对 TreeMap 进行排序需要一些调整）。

# c# - Selenium C# Webdriver FindElements(By.LinkText) 正则表达式？

> ID：12447690
> 
> 赞同：6
> 
> 时间：2012-09-16T14:28:36.383
> 
> 标签：c#, regex, selenium, webdriver

是否可以通过使用类似 的模式搜索其文本来找到网页上的链接`A-ZNN:NN:NN:NN`，其中`N`是单个数字 (0-9)。

我在 PHP 中使用 Regex 将文本转换为链接，所以我想知道是否可以在 Selenium 中使用这种过滤器和 C# 来查找看起来都一样的链接，遵循某种格式。

我试过：

```
driver.FindElements(By.LinkText("[A-Z][0-9]{2}):([0-9]{2}):([0-9]{2}):([0-9]{2}")).ToList(); 
```

但这没有用。有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T00:13:22.007

总之，不，没有一个`FindElement()`策略支持使用正则表达式来查找元素。最简单的方法是使用`FindElements()`查找页面上的所有链接，并将它们的`.Text`属性与您的正则表达式匹配。

请注意，如果单击链接会导航到同一浏览器窗口中的新页面（即，单击链接时不会打开新的浏览器窗口），您需要捕获所有链接的确切文本'想点击以备后用。我之所以提到这一点，是因为如果您尝试保留对在初次`FindElements()`调用期间找到的元素的引用，那么在您单击第一个元素后它们将变得陈旧。如果这是您的场景，代码可能如下所示：

```
// WARNING: Untested code written from memory. 
// Not guaranteed to be exactly correct.
List<string> matchingLinks = new List<string>();

// Assume "driver" is a valid IWebDriver.
ReadOnlyCollection<IWebElement> links = driver.FindElements(By.TagName("a"));

// You could probably use LINQ to simplify this, but here is
// the foreach solution
foreach(IWebElement link in links)
{
    string text = link.Text;
    if (Regex.IsMatch("your Regex here", text))
    {
        matchingLinks.Add(text);
    }
}

foreach(string linkText in matchingLinks)
{
    IWebElement element = driver.FindElement(By.LinkText(linkText));
    element.Click();
    // do stuff on the page navigated to
    driver.Navigate().Back();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T15:20:30.863

不要使用正则表达式来解析 Html。

使用[htmlagilitypack](http://htmlagilitypack.codeplex.com/)

您可以按照以下步骤操作：

**Step1**用于`HTML PARSER`从特定网页中提取所有链接并将其存储到列表中。

```
HtmlWeb hw = new HtmlWeb();
 HtmlDocument doc = hw.Load(/* url */);
 foreach(HtmlNode link in doc.DocumentElement.SelectNodes("//a[@href]"))
 {
//collect all links here
 } 
```

**Step2**使用此正则表达式匹配列表中的所有链接

```
.*?[A-Z]\d{2}:\d{2}:\d{2}:\d{2}.*? 
```

**第 3 步**您将获得所需的链接。

# c++ - 这种数组声明合法吗？

> ID：12447697
> 
> 赞同：-1
> 
> 时间：2012-09-16T14:29:33.190
> 
> 标签：c++, arrays

我知道在 C++ 中你不能用运行时变量声明数组的大小，但我有兴趣确保以下内容是否合法：

```
#include directives 
const int SIZE=5;
double a[SIZE]; 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:32:32.813

是的，它在 C++ 和 C 中都是合法的。

`SIZE`需要是一个***常量表达式***，并且在 C++`const int SIZE=5;`中如此声明。
在 C99 中引入可变长度数组之前的 C 中，

```
const int SIZE=5;
double a[SIZE]; 
```

会产生错误，因为在这种情况下`SIZE`不是***常量表达式***，而只是***只读***的，并且它必须是常量表达式才能有效。

# assembly - 从键盘输入（TASM）

> ID：12447698
> 
> 赞同：0
> 
> 时间：2012-09-16T14:29:48.900
> 
> 标签：assembly, dos, x86-16

我已经有了从键盘获取输入并将其打印在屏幕上的程序，但是我在理解几行代码时遇到了问题，

这是代码，

```
 MOV DS, AX
      MOV ES, AX        ;Why Move AX content to ES ???

      MOV DX, OFFSET PNAME      ; PRINT NAME: 
      MOV AH, 09H               
      INT 21H                   

      MOV BYTE PTR SNAME, 21    

      MOV DX, OFFSET SNAME      
      MOV AH, 0AH
      INT 21H

      MOV SI, 0002              

      LEA DX, SNAME[SI]         ; PRINT NAME ENTERED
      MOV AH, 09H
      INT 21H 
```

为什么我们首先将 21 个大小字节移动到 SNAME ???? 键盘输入中断服务的结果如何自动存储在 SNAME 而不是 AL ???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T00:46:22.227

检查您最喜欢的 MSDOS 函数参考。

你可以在那里[找到](http://www.ctyme.com/intr/rb-2563.htm)：

```
Format of DOS input buffer:

Offset  Size    Description     (Table 01344)
00h    BYTE    maximum characters buffer can hold
01h    BYTE    (call) number of chars from last input which may be recalled
(ret) number of characters actually read, excluding CR
02h  N BYTEs   actual characters read, including the final carriage return 
```

因此，21 设置了您可以从键盘读取到缓冲区的最大字符数。

至于“ `How Result of Keyboard input interrupt service automatically stored in SNAME instead of AL ???`”，问题就不清楚了。

# scala - 是否可以使用 Scalaz 避开 Scala 将元组作为输入参数处理的混乱方式？

> ID：12447699
> 
> 赞同：3
> 
> 时间：2012-09-16T14:29:50.477
> 
> 标签：scala, scalaz

我想做这样的事情`List(1 -> 2, 4 -> 5).map(_ + _)`来得到`List(3, 9)`结果。但它不是那样工作的。

与 Scala 的原生“元组”或模式匹配不同，Scalaz 是否提供了一种方便的方式来处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T16:00:04.100

Scalaz 不会帮你的。

您可以使用纯 Scala 和@tylerweir 的答案（我真的很喜欢这个解决方案）：

```
scala> val a = List(1 -> 2, 4 -> 5).map(x => x._1 + x._2)
a: List[Int] = List(3, 9) 
```

或者你可以做一个更“通用”的东西（它适用于任何元组“大小”）：

```
scala> val a = List(1 -> 2, 4 -> 5, (1,2,3)).map(_.productElements.
    collect{case i:Int => i}.sum)
a:List[Int] = List(3,9,6) 
```

或者您可以使用 Shapeless（来自 Miles Sabin：[https](https://github.com/milessabin/shapeless) ://github.com/milessabin/shapeless ）：

```
scala> val a = List(1 -> 2, 4 -> 4).map(_.hlisted.toList.sum) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T16:39:27.533

我实际上认为以下内容非常方便 - 甚至比其他答案中的模式匹配版本更好：

```
List(1 -> 2, 4 -> 5) map Function.tupled(_ + _) 
```

但我会变态，并为稍微不同的问题提供一个 Scalaz 解决方案。假设我们使用的是流而不是列表，并且还假设我们通过压缩以下两个流来构建我们的对流：

```
val a = Stream(1, 4)
val b = Stream(2, 5) 
```

Scalaz 包含一个用于流的所谓[“zip list”应用函子的实例。](http://learnyouahaskell.com/functors-applicative-functors-and-monoids)它不是默认实例，但我们可以适当地“标记”我们的流并像这样使用它：

```
scala> import scalaz._, std.stream._
import scalaz._
import std.stream._

scala> streamZipApplicative(Tags.Zip(a), Tags.Zip(b))(_ + _).toList
res0: List[Int] = List(3, 9) 
```

你去吧！一个模糊相关问题的 Scalaz 解决方案。（我只是有点讽刺——我喜欢这些东西，zip list applicative functor 值得了解。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T14:46:07.033

你需要比这更通用的东西吗？

```
scala> val a = List(1 -> 2, 4 -> 5).map(x => x._1 + x._2)
a: List[Int] = List(3, 9) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T09:43:48.613

使用小型生产力库可以[做到](https://github.com/nikita-volkov/embrace)这一点：

```
List(1 -> 2, 4 -> 5).map(_ $$ (_ + _)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T07:42:16.817

如果您想使用 scalaz 来执行此操作，那么您可能希望使用 Lenses 来执行此操作。请参阅课程[学习 scalaz：第 11 天](http://eed3si9n.com/learning-scalaz-day11 "学习scalaz：第11天")，以及 Edward Kmett [Lenses](http://www.youtube.com/watch?v=efv0SQNde5Q "镜头是一个功能性命令")的讲座视频中捕获的功能命令。[在pdf 幻灯片的](https://docs.google.com/file/d/0ByK3AAy5ubqaMTQ3M2FiZTktODQyNi00OTc2LTkwNTgtNzQ2MWE0OWVlZWJk/edit?hl=en_US)第 42 页上，Edward 解释了使用带有地图的镜头来纯粹从功能上改变它们。

# python - 编译Python，为什么会忽略一些错误的东西？

> ID：12447703
> 
> 赞同：3
> 
> 时间：2012-09-16T14:30:29.350
> 
> 标签：python, compiler-construction, compilation, interpreter

我写了一个 Python 例程，其中有一个错误：`false`而不是`False`. 但是，在编译时没有发现它。该程序必须运行到此行才能通知错误行为。

为什么会这样？Python解释器/编译器中的什么东西使它如此工作？

你有一些参考吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T14:33:31.207

由于 Python 的动态特性，不可能在编译时检测到未定义的名称。只检查语法；如果语法正确，编译器生成字节码，Python 开始执行代码。

在给定的示例中，您将获得对全局名称的引用`false`。只有当字节码解释器试图真正访问这个全局名称时，你才会得到一个错误。

为了说明，这里有一个例子。你认为下面的代码执行得好吗？

```
globals()["snyfr".decode("rot13")] = 17
x = false 
```

实际上确实如此，因为第一行动态生成了一个名为`false`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T14:37:38.333

您可以将此视为解释器对于何时查找名称“懒惰”：它尽可能晚地这样做，因为程序的其他部分可以摆弄其已知变量的字典。

考虑程序

```
>>> def foo():
...     return false
... 
>>> def bar():
...     global false
...     false = False
... 
>>> foo()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in foo
NameError: global name 'false' is not defined
>>> bar()
>>> foo()
False 
```

请注意，第一次调用`foo`引发了 a `NameError`，因为当时`foo`运行 Python 不知道是什么`false`。但`bar`随后修改了全局范围并`false`作为`False`.

这种命名空间的混淆允许人们在编写程序时具有极大的灵活性。当然，它还删除了许多限制性更强的语言可以为您检查的内容。

# iis-7 - 邮件列表调度程序

> ID：12447705
> 
> 赞同：0
> 
> 时间：2012-09-16T14:30:39.523
> 
> 标签：iis-7, asp-classic, scheduled-tasks, scheduling, newsletter

我有一个 asp 脚本，我用它来将新闻通讯发送到不同的邮件列表。目前，我通过 html 单击发送按钮向邮件列表中的每个人发送邮件。相反，我希望能够安排时事通讯的发送，而不是立即发送。

我怎么能在 iis7 上做到这一点。我在其他语言编程方面经验丰富，因此我愿意接受所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:55:26.443

一种方法是在服务器上创建一个计划任务，该任务按定义的计划调用您的页面。

您可以创建一个 VBScript 来请求您的网页。然后创建一个以 URL 作为参数调用此脚本的计划任务。因此，如果您将以下脚本保存为 WEBEXEC.VBS，那么您将在计划任务中将其称为“WEBEXEC.VBS [http://www.test.com/mypage.asp](http://www.test.com/mypage.asp) ”。

```
Option Explicit
Dim objWinHttp, strURL
strURL = WScript.Arguments(0)
Set objWinHttp = CreateObject("MSXML2.ServerXMLHTTP")
objWinHttp.Open "GET", strURL
objWinHttp.Send
Set objWinHttp = Nothing 
```

如果您无权在服务器上创建计划任务，您可以在任何其他始终打开并连接到 Internet 的计算机上执行相同的操作。

另一种选择是使用 ASP.NET，它允许您在 Gobal.asax 中运行一个任务，该任务可以按计划调用您的 URL。这样做的问题是，如果您的网站在一定数量的不活动后被设置为关闭，然后在收到请求时重新启动（我认为这是默认设置），那么这只有在您全天候访问时才有效。

如果您需要有关如何执行此 ASP.NET 的示例，请告诉我。

# asp.net - Web 表单内联代码开始标签

> ID：12447707
> 
> 赞同：3
> 
> 时间：2012-09-16T14:30:43.927
> 
> 标签：asp.net, .net

我只是想知道为什么这些不同的开始标签存在，如果还有更多以及它们是否可以互换使用：

```
<%# Do.Something() %>
<%= Do.Something() %>
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T14:37:33.880

标签做不同的事情。例如`<%= %>`，将标签内表达式的结果写入输出，同时`<%# %>`将使用数据绑定表达式来引用来自数据源的数据。更完整的解释可以在[http://weblogs.asp.net/ahmedmoosa/archive/2010/10/06/embedded-code-and-inline-server-tags.aspx找到](http://weblogs.asp.net/ahmedmoosa/archive/2010/10/06/embedded-code-and-inline-server-tags.aspx)

# java - 将整数文本字段值与java中的mysql数据进行比较

> ID：12447719
> 
> 赞同：0
> 
> 时间：2012-09-16T14:32:27.323
> 
> 标签：java, mysql, jdbc

我想检查新输入的数据是否已经在表中

**代码：**

```
txtNo   = new JTextField();
{
    try {
        Class.forName("com.mysql.jdbc.Driver");
        String srcurl1      = "jdbc:mysql://localhost:3306/DB_name"; 
        Connection con      = DriverManager.getConnection(srcurl1,"root","paswrd");
        Statement stmt1     = con.createStatement();
        ResultSet rs1       = stmt1.executeQuery("select No from bank where No='"+txtNo.getText()+"' ");

        int ch =rs1.getInt("No");
        int ch4= Integer.parseInt(txtNo.getText());

        if(ch==ch4)    // input 58 == 58
         System.out.println("already exits");
    }
    catch(Exception e)
    {
        System.out.println("Exception:"+e);
    }
} 
```

**错误 ：** `Exception:java.sql.SQLException: Illegal operation on empty result set.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:34:54.187

您需要检查第`ResultSet`一个以检查它是否包含行：

```
if (rs1.next()) {
   int ch =rs1.getInt("No");
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T14:35:27.570

当 select 语句返回一个空集时，您会收到此异常。添加一个 try/catch 块，该块根据数据不在 catch 块中的表中的知识起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:35:35.550

您需要检查结果集是否包含元素：

```
while(rs1.next())
{
    int ch = rs1.getInt("No");
    // ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T15:46:14.663

检查数据库中是否存在特定记录的最简单方法可能如下：

```
Select 1 from bank where No = [your_supplied_value] 
```

如果此查询在您的数据库中找到包含所提供数据的行或返回空结果集，则该查询将返回 1。因此，您需要检查的是结果集中是否返回了 ANY 值，或者它是否为 emtpy。

这是一个示例代码，可帮助您入门：

```
txtNo   = new JTextField();
{
    try {
        String compareText = txtNo.getText().trim();

        if(compareText.length() > 0){
            Class.forName("com.mysql.jdbc.Driver");
            String srcurl1      = "jdbc:mysql://localhost:3306/DB_name"; 
            Connection con      = DriverManager.getConnection(srcurl1,"root","paswrd");
            Statement stmt1     = con.createStatement();
            ResultSet rs1       = stmt1.executeQuery("select 1 from bank where No='"+txtNo.getText()+"' ");

            boolean isPresent = rs1.next();

            if(isPresent){
                System.out.println("Already exists!!");
            }
        }
    }
    catch(Exception e)
    {
        System.out.println("Exception:"+e);
    }
} 
```

我希望这不是你的最终代码，因为它有几个问题：

*   你没有正确管理你的资源。完成对数据库的查询后，您应该考虑关闭结果集、语句和连接对象。

*   请注意，我检查了 JTextField 中的文本是否为空。当您知道文本字段中没有值时，这是防止调用数据库的好方法。

*   我建议使用 PreparedStatement 而不是 Statement 来查询您的数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T12:00:51.480

A`ResultSet`最初位于第一行**之前。**因此，在调用其中一个方法之前，您需要调用`next()`以将其移动到下一行（并检查它是否返回`true`）`getXXX()`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-14T04:32:58.023

```
JTextField input = new JTextField();
ArrayList < Integer > list = new ArrayList < Integer > ();
int integerv = Integer.parseInt(input.getText());
try {
    Class.forName("com.mysql.cj.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/DB_name", "root", "yourpassword");
    Statement stm = con.createStatement();
    ResultSet rs = stm.executeQuery("select column_name from table_name");

    while (rs.next()) {
        list.add(rs.getInt(1));
    }
    for (int a = 0; a < list.Size(); a++) {
        if (a.get(a) == integerv) {

            System.out.println("Match found");

            break;

        } else {
            System.out.println("Match not found");
            break;
        }
    }
} catch (Exception e) {
    System.out.println("Error :" + e.getMessage());
} 
```

# java - Java 小程序不再调用 public static void main()

> ID：12447722
> 
> 赞同：1
> 
> 时间：2012-09-16T14:32:34.873
> 
> 标签：java, applet, main

我有一个很久以前最初用 JBuilder 构建的小程序。我相信它直到最近都运行良好。它已停止工作。我已经将它导入到Eclipse中调试，发现 `public static void main()`没有调用。这可以解释小程序的崩溃。

我的预感是较新的 JVM 不需要`public static void main()`小程序。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:36:47.417

Java 小程序需要[小程序生命周期](http://docs.oracle.com/javase/tutorial/deployment/applet/lifeCycle.html)。没有任何`main`小程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:44:27.133

该`main()`方法通常用于应用程序。您需要在初始化时进行的任何调用都应该放在：

```
public void init() 
```

在你的小程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T03:18:01.943

> 我的预感是较新的 JVM 不会为 applet 调用 public static void main() 。任何人都可以对此有所了解吗？

据我所知，可以追溯到 1997 年，*没有*VM`main()`需要小程序。

# haskell - 构造函数中的类型变量？

> ID：12447723
> 
> 赞同：4
> 
> 时间：2012-09-16T14:32:42.453
> 
> 标签：haskell

我可以在数据构造函数中有一个函数吗？像：

```
data Something = (a->b) Something1 Something2 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-16T14:45:19.893

是的，你当然可以。唯一重要的是您（总是）需要为您的数据构造函数命名：

```
data <name> <para0> <param1> ... = <constructor> <arg0> <arg1> <arg2> ... 
```

所以对于我们的例子，它变成

```
data Something a b = Constructor (a -> b) Something1 Something2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T14:51:03.600

在命名构造函数时需要遵循一些规则。

*   以大写字母开头。
*   可以包含下划线、单引号、字母和数字。
*   构造函数可以是运算符名称，只要它们以 ':' 开头。

但是当然，您可以在数据定义中使用函数，例如

```
data Something a b = Something (a->b) a b 
```

# ios - AFNetworking 和 POST 请求

> ID：12447725
> 
> 赞同：14
> 
> 时间：2012-09-16T14:33:17.970
> 
> 标签：ios, afnetworking

我从 error.userInfo 发出 POST 请求时收到此响应`AFNetworking`。谁能告诉我缺少任何明显的东西或需要在我的服务器端修复的东西？

> 请求失败并出现错误：错误域 = AFNetworkingErrorDomain 代码 =-1016 “预期的内容类型 {(“text/json”、“application/json”、“text/javascript”)}，得到了 text/html”UserInfo=0x6d7a730 {NSLocalizedRecoverySuggestion=索引测试，AFNetworkingOperationFailingURLResponseErrorKey=，NSErrorFailingURLKey=http://54.245.14.201/，NSLocalizedDescription=预期内容类型{(“text/json”，“application/json”，“text/javascript”)}，得到文本/html，AFNetworkingOperationFailingURLRequestErrorKey =http://54.245.14.201/>}, { AFNetworkingOperationFailingURLRequestErrorKey = "http://54.245.14.201/>"; AFNetworkingOperationFailingURLResponseErrorKey = ""; NSErrorFailingURLKey = "http://54.245.14.201/" ; NSLocalizedDescription = "预期的内容类型 {(\n \"text/json\",\n \"application/json\",\n
> \"text/javascript\"\n)}, 得到了 text/html"; NSLocalizedRecoverySuggestion = "index test"; }

我正在使用这段代码；

```
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
[httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]];
[httpClient setDefaultHeader:@"Accept" value:@"application/json"];
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        @"Ans", @"name",
                        @"29", @"age",
                        nil];

NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"/" parameters:params];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSLog(@"Success");
        NSLog(@"%@",JSON);

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
        NSLog(@"Failure");
}];

[operation start];
[operation waitUntilFinished]; 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-04T12:01:14.200

默认情况下，`AFJSONRequestOperation`仅接受来自服务器的“text/json”、“application/json”或“text/javascript”内容类型，但您得到的是“text/html”。

在服务器上修复会更好，但您也可以在您的应用程序中添加“text/html”内容类型作为可接受的内容：

```
[AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"text/html"]]; 
```

它对我有用，希望这有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T14:51:21.373

您是否发送了此 POST 请求`AFHTTPClient`？如果是这样，您需要为其设置操作类：

```
AFHTTPClient * client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://localhost:8080"]];
// ...
[client registerHTTPOperationClass:[AFJSONRequestOperation class]];
[client setDefaultHeader:@"Accept" value:@"application/json"];
// ...

// EDIT: Use AFHTTPClient's POST method
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                         @"Ans", @"name",
                         @"29",  @"age", nil];

// POST, and for GET request, you need to use |-getPath:parameters:success:failure:|
[client postPath:@"/"
      parameters:params
         success:^(AFHTTPRequestOperation *operation, id responseObject) {
           NSLog(@"RESPONSE: %@", responseObject);
           // ...
         }
         failure:^(AFHTTPRequestOperation *operation, NSError *error) {
           if (error)
             NSLog(@"%@", [error localizedDescription]);
           // ...
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T15:29:08.607

在此代码中设置您的值并检查它是否适合您

```
 AFHTTPClient *httpClient = [[AFHTTPClient alloc]initWithBaseURL:[NSURL URLWithString:kBASEURL]];
        NSString *_path = [NSString stringWithFormat:@"groups/"];
        _path = [_path stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        NSLog(@"%s %@",__PRETTY_FUNCTION__,_path);
        NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" 
                                                                path:_path
                                                          parameters:postParams];
        [httpClient release];

        AFJSONRequestOperation *operation = [AFJSONRequestOperation 
                                             JSONRequestOperationWithRequest:request
                                             success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                                                 if ([JSON isKindOfClass:[NSArray class]] || [JSON isKindOfClass:[NSDictionary class]]) {
                                                     completed(JSON);
                                                 }
                                                 else {
                                                 }
                                                 [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];                                             

                                             } 
                                             failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                                 NSLog(@" response %@  \n error %@ \n JSON %@",response,error,JSON);
                                                 [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];                                         
                                                 errored(error);
                                             }];

        NSOperationQueue *queue = [[[NSOperationQueue alloc] init] autorelease];
        [queue addOperation:operation];
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES]; 
```

# python - Python：为什么导入时间不适用于 time() 但适用于 time.sleep()？

> ID：12447726
> 
> 赞同：9
> 
> 时间：2012-09-16T14:33:21.980
> 
> 标签：python, python-2.7

如果我使用`from time import time`，Python 2.7.3 不识别`time.sleep(60)`。但如果我用`import time`，那么 Python 不识别`t=time()`。为什么会这样？有什么方法可以在同一个程序中使用`time()`和吗？`time.sleep(x)`

```
from time import time
#import time

intervalInMinute = 1
t = time()
while 1:
    time.sleep(60) 
```

我得到的错误是：

> 回溯（最后一次调用）：文件“myProg.py”，第 9 行，在 time.sleep(60) 中 AttributeError: 'builtin_function_or_method' 对象没有属性 'sleep'

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-16T14:35:07.157

您需要决定您希望名称`time`引用什么，模块或模块中调用的函数`time`。你可以写：

```
>>> from time import time, sleep
>>> time()
1347806075.148084
>>> sleep(3)
>>> 
```

或者

```
>>> import time 
>>> time.time()
1347806085.739065
>>> time.sleep(2)
>>> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T14:35:36.543

`from time import time``time()`从模块导入方法`time`。`import time`，另一方面，导入模块`time`。`import time`并使用`time.time()`而不是`time()`.

# ios - 在特定条件下不会调用 scrollViewDidEndDecelerating 方法

> ID：12447727
> 
> 赞同：3
> 
> 时间：2012-09-16T14:33:24.227
> 
> 标签：ios

如果我一直快速滚动滚动视图，似乎不会调用这个委托方法，有没有办法解决这个问题？谢谢。

# visual-studio-2010 - Microsoft Visual Studio 2010 ADO.NET 实体框架工具错误

> ID：12447732
> 
> 赞同：0
> 
> 时间：2012-09-16T14:33:48.600
> 
> 标签：visual-studio-2010, entity-framework, ado.net

[![在此处输入图像描述](../Images/ee861dfc1d211a285f25384dc2169546.png)](https://i.stack.imgur.com/3UHF5.png)

嘿，每当我启动视觉工作室时，我都会弹出与这篇文章标题相关的错误。

错误消息说输入路径`ADONETEntityFrameworkTools_enu.msi`。在使用源框中它说

> c:\users\conor\appdata\local\temp\rar$exa0.270\wcu\eftools\

但是尝试找到它时没有文件夹。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T22:25:33.790

从 Microsoft Dreamsparks 下载时，就像我一样。软件安装程序会在 C 盘上创建一个临时文件夹。这就是该程序正在寻找的。它找不到它的原因是因为它是在另一台电脑上下载的。这意味着从未创建过临时文件夹。

# php - 无法将utf16编码文件导入mysql

> ID：12447733
> 
> 赞同：1
> 
> 时间：2012-09-16T14:33:51.593
> 
> 标签：php, mysql, utf-8, import

我有 txt 管道分隔文件（非英语 - 下面给出的是波兰语，但也涉及其他语言），编码为 utf16，类似于：

```
头1|头2|头3|头4
brytyjski wytwórca|z jakże bogatą|przedwojenną historią|zapowiedział wypuszczenie
dziś znamy|jedynie paletę kolorów|obejmującą aż|jedną pozycję

```

我尝试了很多不同的方法将其放入 mysql 表中：

*   使用php逐行

*   以我能想到的任何方式通过控制台使用 LOAD DATA INFILE，例如：

```

将数据输入文件“C:/\wamp/\www/\hmvc/\prop_tst.txt”装入表 hmvc.table 字符集“utf8”字段以“|”结尾 由 '\n' \g 终止的行

```

我总是得到：

*   乱码（错误编码）条目

*   没有输入任何内容（sql 写入默认值）

顺便提一下：我还在 utf8、utf16、latin2（用于东欧编码）...和 ​​nada 中设置了表格。

顺便说一句：当我更改编码时，例如在记事本中更改为 utf8，我可以导入 - 没问题，但是如果我有需要 utf16（亚洲）的字符，或者我想自动输入文件怎么办？

Php iconv 等似乎不能胜任这项工作。

任何帮助，链接到一些阅读等将不胜感激，因为我刚刚没有想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T14:46:13.640

如[`LOAD DATA INFILE`语法](http://dev.mysql.com/doc/en/load-data.html)中所述：

> ###  笔记
> 
> 无法加载使用`ucs2`、`utf16`或`utf32`字符集的数据文件。

UTF-8 可以表示与 UTF-16 相同的完整 Unicode 代码点集。也许只使用这种编码最简单（或者在导入其他语言之前对文件进行转码，例如通过 PHP 的`iconv()`函数）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-22T18:43:12.237

您**不能**将**UTF-16**格式的**.txt**文件（或微软称之为“ **UNICODE** ”文本文件）导入 MySQL。[您可以在此处](https://dev.mysql.com/doc/mysql-reslimits-excerpt/5.6/en/charset-restrictions.html)阅读该声明。我发现最好的选择是 - 下载[TextPad](https://www.textpad.com/download/)并打开您的文本文件，然后单击**Save As**并确保选择**ENCODING:** **UTF-8**。然后，您可以轻松地将该文件直接加载到您的 SQL 表中。我在不到 10 秒的时间内上传了大约 250 万条记录。

> **当前无法使用 LOAD DATA INFILE 来加载使用这些字符集的数据文件。**- [MySQL 文档](https://dev.mysql.com/doc/mysql-reslimits-excerpt/5.6/en/charset-restrictions.html)

# three.js - Three.js - 在平面上更新纹理

> ID：12447734
> 
> 赞同：0
> 
> 时间：2012-09-16T14:33:56.590
> 
> 标签：three.js, textures, auto-update

我正在尝试制作地形编辑器。所以我有一架上面有多种材料的飞机，我像这样初始化它：

```
var materials = [];
var grasstexture = THREE.ImageUtils.loadTexture('Img/grass.png', {}, function() { });
var rocktexture = THREE.ImageUtils.loadTexture('Img/rock.png', {}, function() { });
materials.push(new THREE.MeshPhongMaterial({color: 0xffffff, map: grasstexture}));
materials.push(new THREE.MeshPhongMaterial({color: 0xffffff, map: rocktexture}));
// Plane

this.geometry.materials = materials;
for(var i = 0; i <  this.geometry.faces.length; i++)
{
    this.geometry.faces[i].materialIndex = 0;
}

this.geometry.dynamic = true;
this.mesh = new THREE.Mesh( this.geometry, new THREE.MeshFaceMaterial(  ) );
this.mesh.receiveShadow = true; 
```

结果是一个带有两个纹理的方形平面。

现在，我似乎无法在运行时更新每个顶点的 materialIndex。我努力了：

```
face.materialIndex = 1;

for(var i = 0; i < geo.materials.length; i++){
    geo.materials[i].needsUpdate = true;
}

for(var i = 0; i <  this.geometry.faces.length; i++)
{
    geo.faces[i].materialIndex = 0;
}

for(var i = 0; i < geo.materials.length; i++){
    geo.materials[i].needsUpdate = true;
}
this.mesh.needsUpdate = true;
this.mesh.material.needsUpdate = true;

geo.verticesNeedUpdate = true;
geo.normalsNeedUpdate = true;
geo.colorsNeedUpdate = true;

geo.computeFaceNormals();
geo.computeVertexNormals();

geo.computeCentroids();
geo.computeTangents() ; 
```

我能够找到 Three.js 中的所有其他“materialIndex”和“needsUpdate”变量，但仍然没有任何反应。如何强制更新材料指数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T22:32:37.007

你不能。`materialIndex`仅在第一次渲染中用于将几何体划分为块，每个块具有相同的材质。此外，您不能重新分区块。

但是，您可以做的是更改`materials`阵列中的材料。

```
materials[ 0 ] = new THREE.MeshBasicMaterial(); 
```

这样做之后，您也不需要设置任何`needsUpdate`标志`true`。

您可以做的另一件事是从一开始就为每个面赋予它自己的材质，然后，例如，只需更改材质的纹理。

```
mesh.geometry.materials[ 0 ].map = texture;
texture.needsUpdate = true; 
```

# mysql - 将 CSV 数据导入 SQL 数据库

> ID：12447741
> 
> 赞同：0
> 
> 时间：2012-09-16T14:34:41.023
> 
> 标签：mysql, sql, database, csv

我有一个包含以下字段的表：

```
Name (varchar)
Ranking (int)
Age (int)
Favourite Court (varchar) 
```

和这样的 CSV 文件

```
name;age;current_ranking;favourite_court
sample1;22;5;Hard
sample2;21;6;Clay 
```

我尝试使用 MySQL 导入它：`LOAD DATA LOCAL INFILE 'c:/players.csv' INTO TABLE players FIELDS TERMINATED BY ';' LINES TERMINATED BY '\n';`or `LOAD DATA LOCAL INFILE 'c:/players.csv' INTO TABLE players FIELDS TERMINATED BY ';' LINES TERMINATED BY '\n' (name,age,current_ranking,favourite_court);`，带或不带文件头（即名称；年龄...）。它不起作用，字段被弄乱了。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:37:35.643

您需要命名表中的列，而不是文件中标题的列：

```
LOAD DATA LOCAL INFILE 'c:/players.csv' INTO TABLE players
FIELDS TERMINATED BY ';'
IGNORE 1 LINES
(Name, Age, Ranking, `Favourite Court`) 
```

此外，如[`LOAD DATA INFILE`语法](http://dev.mysql.com/doc/en/load-data.html)下所述：

> ### 笔记 
> 
> 如果您在 Windows 系统上生成了文本文件，则可能必须使用`LINES TERMINATED BY '\r\n'`才能正确读取文件，因为 Windows 程序通常使用两个字符作为行终止符。某些程序，例如**WordPad**，可能会`\r`在写入文件时用作行终止符。要读取此类文件，请使用`LINES TERMINATED BY '\r'`

# java - HTTP 404 请求的资源 (/ /) 不可用 - Tomcat 6

> ID：12447750
> 
> 赞同：2
> 
> 时间：2012-09-16T14:35:17.867
> 
> 标签：java, tomcat6

我在 Eclipse 中创建了一个小“动态 Web 项目”，并尝试显示/编辑/创建和删除我的数据库对象。Tomcat 服务器运行。但我收到 HTTP 状态 404 错误：请求的资源 (/TestDynWeb/) 不可用(http://localhost:8010/TestDynWeb)。我想显示我所有的代码文件。也许你知道出了什么问题。

## 网页内容/WEB-INF：

***Web.xml***

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
<display-name>TestDynWeb</display-name>

 <servlet>
  <servlet-name>action</servlet-name>
 <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>

  <init-param>
   <param-name>config</param-name>
   <param-value>/WEB-INF/struts-config.xml</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
 </servlet>

 <servlet-mapping>
  <servlet-name>action</servlet-name>
  <url-pattern>*.do</url-pattern>
 </servlet-mapping>

 <welcome-file-list>
  <welcome-file>index.html</welcome-file>
  <welcome-file>index.htm</welcome-file>
  <welcome-file>index.jsp</welcome-file>
  <welcome-file>default.html</welcome-file>
  <welcome-file>default.htm</welcome-file>
  <welcome-file>default.jsp</welcome-file>
 </welcome-file-list>

 <jsp-config>
  <taglib>
   <taglib-uri>/WEB-INF/struts-bean.tld</taglib-uri>
   <taglib-location>/WebContent/WEB-INF/struts-bean.tld</taglib-location>
  </taglib>
  <taglib>
   <taglib-uri>/WEB-INF/struts-html.tld</taglib-uri>
   <taglib-location>/WEB-INF/struts-html.tld</taglib-location>
  </taglib>
  <taglib>
   <taglib-uri>/WEB-INF/struts-logic.tld</taglib-uri>
   <taglib-location>/WEB-INF/struts-logic.tld</taglib-location>
  </taglib>
  <taglib>
   <taglib-uri>/WEB-INF/struts-nested.tld</taglib-uri>
   <taglib-location>/WEB-INF/struts-nested.tld</taglib-location>
  </taglib>
 </jsp-config>
</web-app> 
```

***struts-config.xml***

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE struts-config PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 1.3//EN"
"http://struts.apache.org/dtds/struts-config_1_3.dtd" >

<struts-config>
    <!-- Form Bean Definitions -->
    <form-beans>
        <form-bean name="ListForm" type="list.forms.ListForm"/>
    </form-beans>

    <!--  Action Mapping Definitions  -->
    <action-mappings>
        <action path="/showlist" type="list.misc.ShowList" validate="false" scope="session">
        <forward name="success" path="/jsp/listScreen.jsp"/>
    </action>

    <!-- Example of Struts Dispatch Action : has the extra attribute parameter-->
    <action path="/listaction" type="list.actions.ListAction" parameter="actionMethod" name="ListForm"
     validate="false" scope="session">
        <forward name="addObject" path="/jsp/createScreen.jsp"/>
        <forward name="editObject" path="/jsp/editScreen.jsp"/>
    </action>
    </action-mappings>
</struts-config> 
```

## 网页内容/jsp：

***listScreen.jsp***

```
<%@ page import="java.util.HashMap"%>
<%@ page import="java.util.Map"%>
<%@ page import="java.util.List"%>
<%@ page import="java.util.ArrayList"%>
<%@ page import="java.util.Iterator"%>
<html>
<body>
    <b>Available Data Base Objects</b>
    <form name="listform" action="/listaction.do">
        <table style="background-color: #82CAFA;">
            <tr style="color: white;">
                <th>&nbsp;</th>
                <th>Object ID</th>
                <th>Object Name</th>
                <th>Person ID</th>
                <th>Date (Dev)</th>
                <th>Version (Dev)</th>
            </tr>
            <%
                List objectsList = (ArrayList) request.getAttribute("objectsList");
                Iterator itr = objectsList.iterator();
                while (itr.hasNext()) {
                    Map map = (HashMap) itr.next();
            %>
            <tr>
                <td><input type="radio" name="dboId"
                    value='<%=map.get("dboId")%>'
                    onclick="javascript:enableEditDelete();"></td>
                <td><%=map.get("dboID")%></td>
                <td><%=map.get("dboDevName")%></td>
                <td><%=map.get("personId")%></td>
                <td><%=map.get("changedByTimestampDEV")%></td>
                <td><%=map.get("releaseVersionDev")%></td>
            </tr>
            <%
                }
            %>
        </table>
        </p>
        <p>
        <table>
            <tr>
                <td><input type="submit" name="actionMethod" id="editbutton"
                    value="Edit Object" disabled="true" style="color: black;" /></td>
                <td><input type="submit" name="actionMethod" id="deletebutton"
                    value="Delete Object" disabled="true" onclick="return checkDelete();" style="color: black;" /></td>
            </tr>
        </table>
    </form>
    </p>
    <script>
        function checkDelete() {
            return confirm("Are u sure to delete this object..?");
        }
        function enableEditDelete() {
            document.getElementById('editbutton').disabled = false;
            document.getElementById('deletebutton').disabled = false;
        }
    </script>
</body>
</html> 
```

***编辑屏幕.jsp***

```
<b>Edit Object</b>
<html:form>
    <p>
    </p><table style="background-color: #82CAFA;">
        <tr style="color: white;">
            <td>Object ID</td>
            <td><html:text property="dboId" disabled="true"/></td>
        </tr>
        <tr style="color: white;">
            <td>Object Name</td>
            <td><html:text property="dboDevName"/></td>
        </tr>
        <tr style="color: white;">
            <td>Person ID</td>
            <td><html:text property="personId"/></td>
        </tr>
        <tr style="color: white;">
            <td>Date (Dev)</td>
            <td><html:text property="changedByTimestampDEV"/></td>
        </tr>
        <tr style="color: white;">
            <td>Version (Dev</td>
            <td><html:text property="releaseVersionDev"/></td>
        </tr>
    </table>
    <p/>
    <p>
    </p><table>
        <tr>
            <td><input type="submit" name="actionMethod" value="Save Object" style="color: black;"/></td>
        </tr>
    </table>
</html:form>
<p/> 
```

**创建屏幕.jsp**

```
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html"%>
<html>
<body>

    <b>Add Object</b>
    <html:form>
        <table style="background-color: #82CAFA;">
            <tr>
                <td>Object ID</td>
                <td><html:text property="dboId" disabled="true" /></td>
            </tr>
            <tr>
                <td>Object Name</td>
                <td><html:text property="dboDevName" /></td>
            </tr>
            <tr>
                <td>Person ID</td>
                <td><html:text property="personId" /></td>
            </tr>
            <tr>
                <td>Date (Dev)</td>
                <td><html:text property="changedByTimestampDEV" /></td>
            </tr>
            <tr>
                <td>Version (Dev</td>
                <td><html:text property="releaseVersionDev" /></td>
            </tr>
        </table>
        </p>
        <p>
        <table>
            <tr>
                <td><input type="submit" name="actionMethod" value="Add Object" /></td>
            </tr>
        </table>
    </html:form>
    </p>
</body>
</html> 
```

## /配置：

***appContext.xml***

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:lang="http://www.springframework.org/schema/lang"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.1.xsd">

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="net.sourceforge.jtds.jdbc.Driver" />
        <property name="url"
            value="jdbc:jtds:sqlserver://localhost:1433;databaseName=NARTrackingDB" />
        <property name="username" value="abc" />
        <property name="password" value="xyz" />            
    </bean>

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="objDao" class="tracking.dao.DboDao">
        <property name="transactionManager" ref="transactionManager" />
    </bean>

</beans> 
```

## DAO类：

```
package tracking.dao;

import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Types;

import javax.sql.DataSource;

import org.objectweb.asm.Type;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowCallbackHandler;
import org.springframework.jdbc.datasource.DataSourceTransactionManager;

import tracking.bean.DboBean;

public class DboDao {
    private DataSourceTransactionManager transactionManager;
    private JdbcTemplate jdbcTemplate;
    private DataSource dataSource;  // either use @Autowire or provide xml config 

    //private String dboDevName;
    public DboDao() {
        // TODO Auto-generated constructor stub
        super();
    }

    public DboBean read(final int dboId) {//String dboId
        // TODO Auto-generated method stub
        String sql = "SELECT * FROM da_tracking " 
                        + "WHERE ins_ID = " + dboId;
        final Object[] params = new Object[] {};
        //Creating object being queried
        final DboBean dboBean = new DboBean();
        //Process query Results
        jdbcTemplate.query(sql, params, new RowCallbackHandler(){
            public void processRow(ResultSet rs) throws SQLException{
                dboBean.setDboId(rs.getString("ins_ID"));
                dboBean.setDboDevName(rs.getString("ins_name"));
            }           
        });
        return dboBean;//returns queried objects
    }

    public int save(DboBean record ) {
        // TODO Auto-generated method stub
    String sql = "UPDATE da_tracking" 
                + " SET ins_name= ?,"  
                + " ins_dev_scripted = ?" 
                + " WHERE ins_ID = ?" ;
    Object[] params = new Object[] { 
            record.getDboDevName(), 
            record.getDevScripted(), 
            record.getDboId()
    }; 
    int[] types = new int[]{
            Types.VARCHAR, 
            Types.BIT, 
            Types.INTEGER}; 
    return jdbcTemplate.update(sql, params, types); 

    }

    public int createInstance(DboBean record) {
        // TODO Auto-generated method stub
        String sql = "INSERT INTO da_tracking" 
                + "(ins_ID,ins_name,ins_deployed_to_uat, ins_dev_status,ins_dev_scripted,ins_dev_changed_by_timestamp"
                + "change_details,db_owner_ID,type_ID,person_ID,changeType_ID,ins_uat_changed_by_timestamp,release_version_dev"
                + "release_version_uat) VALUES"
                + "( ?,?,?,?,?,?,?,?,?,?,?,?,?,?)";

        Object[] params = new Object[] { 
            record.getDboId(),record.getDboDevName(),record.getDeployedToUAT(),record.getDevStatus(),record.getDevScripted(), 
            record.getChangedByTimestampDEV(),record.getChangeDetails(),record.getDbOwner(),record.getTypeId(),record.getPersonId(),
            record.getChangedByTimestampUAT(),record.getReleaseVersionDev(),record.getReleaseVersionUat()
        }; 

        int[] types = new int[]{
            Types.INTEGER, Types.VARCHAR, Types.BIT, Types.INTEGER, Types.BIT, 
            Types.TIMESTAMP, Types.VARCHAR, Types.INTEGER, Types.INTEGER, Types.INTEGER,
            Types.TIMESTAMP, Types.VARCHAR, Types.VARCHAR, Types.VARCHAR
            }; 
        return jdbcTemplate.update(sql, params, types); 
    }

    public void delete(String dboId) {
        // TODO Auto-generated method stub
        String sql = "DELETE FROM da_tracking "
                + "WHERE ins_ID = " + dboId;
        Object[] params = new Object[] {};
        //Process query Results
        jdbcTemplate.update(sql, params);       
    }

    public JdbcTemplate getJdbcTemplate() {
        return jdbcTemplate;
    }

    public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    public DataSource getDataSource() {
        return dataSource;
    }

    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
    }

    //Spring setter injector used
    public void setTransactionManager(DataSourceTransactionManager transactionManager){
        this.transactionManager = transactionManager;
        DataSource datatSource = transactionManager.getDataSource();  
        jdbcTemplate = new JdbcTemplate(datatSource); 
    }

} 
```

--DBOBean.java 包括 getter 和 setter--不需要在这里显示

***显示列表.java：***

```
package list.misc;

import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionMapping;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.Action;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ShowList extends Action {
    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) {
        System.out.println("Show Objects List");
        ListObjects l = ListObjects.getInstance();
        request.setAttribute("objectsList", l.getObjectList());
        return mapping.findForward("success");
    }
} 
```

***列表对象：***

```
package list.misc;

import java.util.Map;
import java.util.HashMap;
import java.util.List;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Set;

public class ListObjects {

    int objectIdCount = 1000;
    Map<Integer, StoreObject> objectMap = new HashMap<Integer, StoreObject>();
    private static ListObjects objects = null;

    private ListObjects() {
    }

    public static ListObjects getInstance() {
        if (objects == null) {
            objects = new ListObjects();
        }
        return objects;
    }

    public void storeObject(String dboDevName, int personId, String changedByTimestampDEV, String releaseVersionDev) {
        StoreObject so = new StoreObject();
        objectIdCount++;
        so.addObject(objectIdCount, dboDevName, personId, changedByTimestampDEV, releaseVersionDev);
        objectMap.put(objectIdCount, so);
    }

    public void updateObject(int dboId, String dboDevName, int personId, String changedByTimestampDEV, String releaseVersionDev) {
        StoreObject so = objectMap.get(dboId);
        so.updateObject(dboId, dboDevName, personId, changedByTimestampDEV, releaseVersionDev );
    }

      public Map searchObject(int dboId) { 
          return objectMap.get(dboId).getObject(); 
      }

    public void deleteObject(int dboIds) {
        objectMap.remove(dboIds);
    }

    // Inner Class used to persist the app data ie. object details.
    public class StoreObject {

        private String dboDevName;
        private String changeDetails;
        private String changedByTimestampDEV;
        String releaseVersionDev;
        private int personId;
        private int objectIdCount;
        private int dboId;

        StoreObject() {
        }

        public void addObject(int objectIdCount, String dboDevName, int personId, String changedByTimestampDEV, String releaseVersionDev) {
            this.objectIdCount = objectIdCount;
            this.dboDevName = dboDevName;
            this.personId = personId;
            this.changedByTimestampDEV = changedByTimestampDEV;
            this.releaseVersionDev = releaseVersionDev;
        }

        public void updateObject(int dboId, String dboDevName, int personId, String changedByTimestampDEV, String releaseVersionDev) {
            this.dboId = dboId;
            this.dboDevName = dboDevName;
            this.personId = personId;
            this.changedByTimestampDEV = changedByTimestampDEV;
            this.releaseVersionDev = releaseVersionDev;
        }

        @SuppressWarnings("unchecked")
        public Map getObject() {
            Map objects = new HashMap();
            objects.put("objectIdCount", this.objectIdCount);
            objects.put("dboDevName", this.dboDevName);
            objects.put("personId", this.personId);
            objects.put("changedByTimestampDEV", this.changedByTimestampDEV);
            objects.put("releaseVersionDev", this.releaseVersionDev);
            return objects;
        }
    }

    public List getObjectList() {
        List objectsList = new ArrayList();
        Set s = objectMap.keySet();
        Iterator itr = s.iterator();
        while (itr.hasNext()) {
            objectsList.add(objectMap.get((Integer) itr.next()).getObject());
        }
        return objectsList;
    }
} 
```

--ListForm.java 包括 getter & setter -- 这里不需要。

***ListAction.java：***

```
package list.actions;

import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionMapping;
import org.apache.struts.action.ActionForward;
import org.apache.struts.actions.DispatchAction;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import java.util.Map;

import list.forms.ListForm;
import list.misc.ListObjects;

public class ListAction extends DispatchAction {
    public ActionForward AddObj(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) {
        System.out.println("Add Object Page");
        return mapping.findForward("addObj");
    }

    public ActionForward EditObj(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) {
        System.out.println("Edit Object Page");
        int dboId = Integer.parseInt(request.getParameter("dboId"));

        ListObjects l = ListObjects.getInstance();
        @SuppressWarnings("rawtypes")
        Map objMap = l.searchObject(dboId);

        // Used form bean class methods to fill the form input elements with
        // selected object values.
        ListForm lf = (ListForm) form;

        lf.setDboId((Integer) objMap.get("dboId"));
        lf.setDboDevName(objMap.get("dboDevName").toString());
        lf.setTypeId((Integer) objMap.get("typeId"));
        lf.setChangeDetails(objMap.get("changeDetails").toString());
        lf.setChangeType((Integer) objMap.get("changeType"));
        lf.setDevScripted((Boolean) objMap.get("devScripted"));
        lf.setPersonId((Integer) objMap.get("personId"));
        lf.setChangedByTimestampDEV(objMap.get("changedByTimestampDEV").toString());
        lf.setChangedByTimestampUAT(objMap.get("changedByTimestampUAT").toString());
        lf.setReleaseVersionDev(objMap.get("releaseVersionDev").toString());
        lf.setReleaseVersionUat(objMap.get("releaseVersionUat").toString());

        return mapping.findForward("addObject");
    }

    public ActionForward SaveObj(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) {
        System.out.println("Save Object");
        // Used form bean class methods to get the value of form input elements.
        ListForm lf = (ListForm) form;
        int dbOwner = lf.getDbOwner();
        String dboDevName = lf.getDboDevName();
        int typeId = lf.getTypeId();
        String changeDetails = lf.getChangeDetails();
        int changeType = lf.getChangeType();
        Boolean devScripted = lf.isDevScripted();
        int personId = lf.getPersonId();
        String changedByTimestampDEV = lf.getChangedByTimestampDEV();
        String changedByTimestampUAT = lf.getChangedByTimestampUAT();
        String releaseVersionDev = lf.getReleaseVersionDev();
        String releaseVersionUat = lf.getReleaseVersionUat();

        ListObjects l = ListObjects.getInstance();
        l.storeObject(dboDevName, personId, changedByTimestampDEV, releaseVersionDev);
        return new ActionForward("/showlist.do", true);
    }

    public ActionForward CreateObj(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) {
        System.out.println("Update Object");
        ListForm lf = (ListForm) form;
        int dboId = lf.getDboId();
        String dboDevName = lf.getDboDevName();
        int typeId = lf.getTypeId();
        String changeDetails = lf.getChangeDetails();
        int changeType = lf.getChangeType();
        Boolean devScripted = lf.isDevScripted();
        int personId = lf.getPersonId();
        String changedByTimestampDEV = lf.getChangedByTimestampDEV();
        String changedByTimestampUAT = lf.getChangedByTimestampUAT();
        String releaseVersionDev = lf.getReleaseVersionDev();
        String releaseVersionUat = lf.getReleaseVersionUat();

        ListObjects l = ListObjects.getInstance();
        l.updateObject(dboId, dboDevName, personId, changedByTimestampDEV, releaseVersionDev);
        return new ActionForward("/showlist.do", true);
    }

    public ActionForward DeleteObject(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) {
        System.out.println("Delete Object");
        int dboId = Integer.parseInt(request.getParameter("dboId"));
        ListObjects lo = ListObjects.getInstance();
        lo.deleteObject(dboId);
        return new ActionForward("/showlist.do", true);
    }
} 
```

非常感谢您的每一次帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T08:15:55.843

转到项目右键单击并检查部署程序集。检查包含 web.xml 的文件夹是否正确包含。可能是您在不同的文件夹中配置了 web.xml，并在部署程序集 Webcontent 文件夹中添加了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:42:09.553

可能您尚未在 Tomcat 服务器上部署您的应用程序。您需要在“服务器”视图中右键单击服务器，然后按“添加和删除”，然后将您的项目添加到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:55:39.723

检查“Deployment Assemply”上是否有您的 WebContent 文件夹。如果没有，请添加它。

# python - 为什么两个相同长度的字符串之间的两个不同的相等性测试需要不同的时间

> ID：12447752
> 
> 赞同：2
> 
> 时间：2012-09-16T14:35:19.303
> 
> 标签：python, time, string-comparison

根据[Python 参考手册](http://docs.python.org/reference/expressions.html#comparisons)：

> 字符串使用其字符的数字等价物（内置函数 ord() 的结果）按字典顺序进行比较。Unicode 和 8 位字符串在此行为中是完全可互操作的。

意思是*散列*不用于此目的。

现在，假设在相等性测试期间，Python 在内部首先检查两个字符串的长度并继续进行字典比较，如果两者的长度相同（我想它对所有其他比较也一样）。

好吧，如果是这样，那么为什么以下两个不同的比较会消耗不同的时间？

```
>>> str1 = "foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge1"
>>> 
>>> str2 = "foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge2"
>>> 
>>> def compare():
     t1 = time.time()
     for x in xrange(100000000):
         str1 == str2
     print time.time() - t1

>>> 
>>> compare()
13.001019001
>>> 
>>> str2 = "foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge1"
>>> 
>>> compare()
7.41645097733 
```

在这两个比较中`str1`和`str2`是相同的长度。在第一个中，两者仅在*最后一个*字符上有所不同，而在第二个中则没有。

*PS：使用长字符串和大迭代来使差异明显。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:42:22.617

在 Python 中有一些字符串字面量，就像在许多语言中一样，在第二种情况下，两个字符串实际上是同一个对象，因此它们是通过引用而不是实际值进行比较的。

基于引用的语言中典型的字符串比较函数：

```
if (ref(a) == ref(b)) return true;
if (len(a) != len(b)) return false;
return compare_actual_data(a, b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:47:31.043

正如其他答案所推测的那样，[如果字符串相同，则比较确实是短路的](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Objects/stringobject.c#l1199)，具有相同内容的字符串文字就是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T14:49:49.563

在第二种情况下，这两个字符串实际上是同一个对象，具有相同的 id。

```
str1 = "foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge1"
str2 = "foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge2"

def compare():
    t1 = time.time()
    for x in xrange(100000000):
        str1 == str2
    print time.time() - t1

print "%d, %d" % (id(str1), id(str2))
compare()

str2 = "foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge_foo_bar_cruft_kludge1"

print "%d, %d" % (id(str1), id(str2))
compare() 
```

在第二种情况下，id 是相同的，因此 python 解释器不必逐字节比较整个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T14:41:14.317

如果两个字符串是['interned'，](https://stackoverflow.com/questions/1136826/what-does-python-intern-do-and-when-should-it-be-used)那么它们可以通过指针比较进行比较。也许在这种情况下，字节码生成器注意到字符串是常量并将它们实习？

您可以通过证明较小的时间在很大程度上独立于（或不）于字符串的长度来证明（或反驳）这一点。

事实上，我得到了这些结果：

```
$ ./test.py 
17.4877259731
8.61179995537
$ ./test_halflengthstrings.py 
12.6504788399
8.58732700348 
```

# php - 仅执行 1 次标头（“刷新”）。

> ID：12447755
> 
> 赞同：0
> 
> 时间：2012-09-16T14:35:32.330
> 
> 标签：php

我正在使用 PHP 并得到以下代码：

```
header("refresh:30;url=".$autoDownloadLink); 
```

它通过重定向到一个页面在 30 秒后开始自动下载，我希望它只执行 1 次。

我不能使用 Javascript 或向该代码重定向的页面添加任何代码，因为存储在 $autoDownloadLink 变量中的页面是另一方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:38:39.793

像这样：

```
header("refresh:0;url=".$autoDownloadLink); 
```

# image - ActionScript 3.0 中的 BitmapData 模式填充

> ID：12447756
> 
> 赞同：-1
> 
> 时间：2012-09-16T14:35:34.320
> 
> 标签：image, actionscript-3, drawing, fill, bitmapdata

如何在 3.0 中用其他图像模式填充一些 BitmapData 图像？例如，我有一个中间有黑色正方形的白色图像，它是“square:BitmapData”，另一个带有小（2x2）蓝色圆圈的图像，我称之为“circle:BitmapData”。我想用这个蓝色圆圈填充那个正方形，有什么办法吗？

**更新**

在这里，我找到了我需要做的示例：

*这是两张图片（左边是我的正方形，右边是蓝色圆圈）* [http://pix.samoucka.ru/img/content/graphics/thewebschedule/8/466.gif](http://pix.samoucka.ru/img/content/graphics/thewebschedule/8/466.gif)

*这就是填写* [http://pix.samoucka.ru/img/content/graphics/thewebschedule/8/467.gif后的样子](http://pix.samoucka.ru/img/content/graphics/thewebschedule/8/467.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:27:40.510

您可以尝试使用[`copyPixels()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#copyPixels%28%29)和迭代 x 和 y 来平铺整个事物，`copyPixels()`非常快。

或者

创建一个 Sprite 并使用正确的大小，然后[`graphics.beginBitmapFill()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#beginBitmapFill%28%29)使用正确位置的 BitmapData 可能会更简单。`graphics.drawRect()``draw()`

如果需要确定黑色方块的大小和位置，`getColorBoundsRect()`应该做的工作。

# mysql - 你能通过调整 my.cnf 来加速 mysqlcheck 吗？

> ID：12447760
> 
> 赞同：1
> 
> 时间：2012-09-16T14:35:53.660
> 
> 标签：mysql, performance

你能通过调整 my.cnf 来加速 mysqlcheck 吗？

如果是这样，人们可能想要调整的究竟是什么？

我有一张需要 1 多小时才能检查/修复的桌子。我的网站在那段时间关闭，因为在检查/修复时表被锁定。

如果我关闭站点，从而最小化 db-access，我可以通过调整 my.cnf 来影响检查/修复性能吗？

# xcode - XCode 4.2 自动添加合成和方法体

> ID：12447766
> 
> 赞同：2
> 
> 时间：2012-09-16T14:37:12.953
> 
> 标签：xcode

无论如何让xcode（4.2）自动将合成和空方法体添加到实现文件（对于接口中定义的属性和方法）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:40:35.597

4.2 中没有内置解决方案。您可以尝试创建一个 shell 脚本，在您的标头中搜索属性，然后在正确的位置添加 @synthesize 行。

为什么不使用最新的（4.4）版本呢？4.4可以自动为你合成ivars。您所要做的就是声明一个@property，Xcode 会处理剩下的事情。

# javascript - Highcharts - 删除日期时间 xaxis 类型的日期之间的时间

> ID：12447771
> 
> 赞同：9
> 
> 时间：2012-09-16T14:37:41.890
> 
> 标签：javascript, datetime, highcharts

我想让它只显示日期，而不是时间，在我的 Highcharts 图表上显示为标签。我怎样才能做到这一点？

![图片](../Images/0ae44240a158cca9e3ed622b99fcd354.png)

[这是一个示例 jsFiddle。](http://jsfiddle.net/Cople/5emac/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-16T15:43:41.327

你应该设置[xAxis.minTickInterval](http://api.highcharts.com/highstock#xAxis.minorTickInterval)

```
xAxis: {
        minTickInterval: 24 * 3600 * 1000
} 
```

[jsFiddle 1](http://jsfiddle.net/jugal/bv9ED/)
[js小提琴 2](http://jsfiddle.net/jugal/5emac/1/)

我强烈建议在发布问题之前阅读大量有用的[highcharts api 参考](http://api.highcharts.com/highcharts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:11:46.837

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/xaxis/type-datetime/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/xaxis/type-datetime/)

# android - Android关闭手机，但不是wifi

> ID：12447772
> 
> 赞同：3
> 
> 时间：2012-09-16T14:37:43.703
> 
> 标签：android

由于我将手机用作 XBMC 遥控器，所以我只需要 Wifi 连接，因此我想关闭“手机”功能以获得更好的电池时间，或者关闭任何不是 Wifi 的手机功能。有什么办法可以用 SDK 做到这一点？（即我不是要求飞行模式）

# jquery - Jquery Image zoom在Opera中无法正常工作

> ID：12447773
> 
> 赞同：0
> 
> 时间：2012-09-16T14:37:55.100
> 
> 标签：jquery, zooming, opera

我从 StackOverflow 得到这段代码：

```
$(document).ready(function() {
    $(function(){
        $('img').load(function() {
            $(this).data('height', this.height);
        }).bind('mouseenter mouseleave', function(e) {
            $(this).stop().animate({
                height: $(this).data('height') * 
                        (e.type === 'mouseenter' ? 1.5 : 1)
            });
        });
    });
}); 
```

它适用于 IE、Chrome、Firefox 和 Opera。但在 Opera 中，它仅在我第一次进入页面时才有效（如果我在地址栏中输入链接）。我有一个 4 页的网站，当我从另一个页面转到 Jquery 页面时，它不会在鼠标悬停时缩放图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:41:05.423

使用[.each](http://api.jquery.com/each/)方法而不是[.load](http://api.jquery.com/load/)：

```
$(function(){
    $('img').each(function() {
        $(this).data('height', this.height);
    }).on('mouseenter mouseleave', function(e) {
        $(this).stop().animate({
            height: $(this).data('height') * (e.type === 'mouseenter' ? 1.5 : 1)
        });
    });
}); 
```

* * *

[演示](http://jsfiddle.net/x3UfD/2/)

顺便说一句：`$(document).ready(function() {`等于`$(function() {`。

# android - 处理 Fragment 的状态

> ID：12447775
> 
> 赞同：1
> 
> 时间：2012-09-16T14:38:16.243
> 
> 标签：android, android-fragments

我在下面这个例子中制作了[Tabs The Fragment 方式](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

我正在`Fragment`使用`onSaveInstance`和保存每个的状态`onActivityCreate`

假设我有 4 个选项卡，每个选项卡都与一个相关联`Fragment`，

问题：如果我在`Fragment` `A`旋转设备，保存状态工作正常，如果我在`Fragment` `A`旋转设备然后移动到`Fragment` `B`旋转设备，然后返回到`Fragment` `A`不`Bundle`包含`Fragment` `A`任何机构中`Fragment` `A`存储的内容`onSaveInstance` 知道为什么那发生了？？？

# c# - 从字符串中检索和删除元素

> ID：12447776
> 
> 赞同：0
> 
> 时间：2012-09-16T14:38:19.760
> 
> 标签：c#

说我有一个字符串列表

```
List<string> lst=new List<string>(new string[]{"a","b","c","d"}); 
```

我希望从索引 0 到索引 2 的元素将其分配给另一个 List lst1（即 lst 的元素是`{"a","b"}`），然后将其从 lst 中删除（即 lst 变为`{"c","d"}`，这样做最快的方法是什么？我在想有没有命令之类的

```
List<string> lst=new List<string>();
lst1=lst.getElements(1,2);
lst.remove(1,2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:45:30.660

使用[GetRange()](http://msdn.microsoft.com/en-us/library/21k0e39c.aspx)复制一系列元素，并[使用 RemoveRange()](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)删除一系列元素。

**例子 ：**

```
List<string> lst = new List<string>(new string[] { "a", "b", "c", "d" });
List<string> lst1 = lst.GetRange(0, 2);
lst.RemoveRange(0, 2); 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T14:46:32.883

您可以使用[`AddRange`](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)和[`RemoveRange`](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)：

```
var range = lst.Take(2);
lst1.AddRange(range);
lst.RemoveRange(0, 2); 
```

演示：http: [//ideone.com/1X2cV](http://ideone.com/1X2cV)

# jquery - jQuery - 滑动

> ID：12447777
> 
> 赞同：2
> 
> 时间：2012-09-16T14:38:35.510
> 
> 标签：jquery

当我们单击下一个或上一个按钮时，我看到了[这个网站，它会滑动不同的网页。](http://www.mindthree.com/)我想要同样的效果，但我找不到办法。你能用 HTML、CSS 和 JQuery 或 Javascript 代码发布答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:52:47.737

在这里，只有一种方法！

**HTML**

```
<div id="item1" class="page"><a href="#item2">1</a></div>
<div id="item2" class="page"><a href="#item3">2</a></div>
<div id="item3" class="page"><a href="#item4">3</a></div>
<div id="item4" class="page"><a href="#item1">4</a></div> 
```

**CSS**

```
html, body {height:100%; margin:0; overflow-y:hidden}
.page {position:absolute; width:100%; height:100%}
#item1 {left:0%; background:#222}
#item2 {left:100%; background:#444}
#item3 {left:200%; background:#666}
#item4 {left:300%; background:#888} 
```

**JS**

```
$(function() {
    $('a[href*=#]').on('click', function(e) {
        var hash = $(this.hash).position();
        if (hash) {
            $('html, body').stop().animate({
                scrollLeft: hash.left
            }, 600, 'swing');
            e.preventDefault();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:42:05.600

只需制作一个**超宽**网站，然后使用**Javascript**滚动到下一部分。

使用框架可能是您的解决方案。检查此[**链接**](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)

# c++ - 为什么类实例可以更改 obj 的私有值？

> ID：12447782
> 
> 赞同：5
> 
> 时间：2012-09-16T14:38:55.407
> 
> 标签：c++

```
#include<iostream>
using namespace std;

class A
{
    private:
        int value;
    public:
        A(int init):value(init){}
        void changevalue(A &a){a.value = 100;}//why a's value can be changed?
        void printvalue(){cout << value << endl;}
};

int main(int argc , char *argv[])
{
    A a(2);
    A b(3);

    a.changevalue(b);
    b.printvalue();

    return 0;
} 
```

**a**是**A**类的一个实例，有一个名为**value**的私有值，但是为什么这个私有值可以改变呢？那是包含在类范围内的参数列表吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T14:42:56.833

因为类访问说明符适用于每个类而不是每个对象。

您始终可以在类函数中修改相同类型的对象。通常的示例是复制构造函数和复制赋值运算符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T14:43:34.390

`private`并不意味着“对象身份私有”，而是“类型（和朋友）私有”。

请注意，可访问性和能够写入类型是正交概念。您始终可以访问您自己类型的对象内的私有值，但是否可以写入它取决于该对象是否声明为`const`：

```
void f(A& a){ a.value = 4; } // OK: 'a' is not 'const'
void g(A const& a){ a.value = 4 } // error: 'a' is marked as ' const' 
```

# c# - 来自模型 mvc 2 的渲染控制

> ID：12447785
> 
> 赞同：0
> 
> 时间：2012-09-16T14:39:34.577
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我有一个模型，其中包含我在构造函数中生成的控制器。这个例子有点简化，但它应该解释模型的外观

```
public class ContactFormViewModel : ViewUserControl
{
    public ContactFormViewModel()
    {
        ContactCaptchaControl = new CaptchaControl()
        {
            CaptchaLength = 5
        };
    }

    [Required(ErrorMessage = "Please enter your name")]
    public string Name { get; set; }

    [Required(ErrorMessage = "Please enter the Captcha")]
    public string Captcha { get; set; }

    public CaptchaControl ContactCaptchaControl { get; set; }
} 
```

现在，视图看起来像这样

```
<%@ Control Language="C#" AutoEventWireup="true" Inherits="System.Web.Mvc.ViewUserControl<MVC.Models.Contact.ContactFormViewModel>" %>

<% Html.EnableClientValidation(); %>
<% using (Html.BeginForm("Add", "Contact", FormMethod.Post, new { id = "frmContact", OnSubmit = "return false;" }))
   {%>
Name:
    <%: Html.TextBoxFor(model => model.Name, new { @class = "BendsoftTextbox" }) %>
    <%: Html.ValidationMessageFor(model => model.Name) %>

Captcha:
    <%: Html.DisplayFor(model => model.ContactCaptchaControl) %>

<% } %>
<% Html.EndForm(); %> 
```

我的问题是控件（ContactCaptchaControl）没有按我想要的方式呈现，也许这对 mvc 来说是不好的做法？

有什么想法吗？

# php - 从 while 循环回显所有变量

> ID：12447787
> 
> 赞同：0
> 
> 时间：2012-09-16T14:39:48.130
> 
> 标签：php, mysql, sql, database

我有一个循环到数据库记录。像这样：

```
$query = mysql_query("SELECT * FROM table");
while($articles = mysql_fetch_array($query)){
     // something happen here
} 
```

如何在 while 循环中回显每个 $articles ？所以我不想有类似的东西

```
while(...){
    echo $articles['article_name'];
} 
```

如何将所有 $articles['article_name'] 保存到数组中并回显它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:42:15.480

这个怎么样：

```
$articleList = array();

while(...){
    $articleList[] = $articles['article_name'];
} 
```

这将为您将所有内容放入数组`$articleList`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T14:42:26.620

您可以执行以下操作：

```
$articles = array();
while ($art = mysql_fetch_array($query)) {
    $articles[] = $art;
}
print_r($articles); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:42:52.040

```
$i=0; $articles = array();
$query = mysql_query("SELECT * FROM table");
while($articles[] = mysql_fetch_array($query)){
     echo $articles['article_name'][$i];
     $i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T14:45:08.443

```
$query = mysql_query("SELECT * FROM table");

while($articles = mysql_fetch_array($query)){
     $names[] = $articles['article_name'];

}
echo 'array of names are :';
 print_r($names); 
```

# android - Android PhoneStateListener 在睡眠模式下不工作

> ID：12447789
> 
> 赞同：1
> 
> 时间：2012-09-16T14:39:58.247
> 
> 标签：android, phone-state-listener, sleep-mode

I'm writing an app, which listens to GSM signal strength. I've created a service, in which I put the PhoneStateListener. The problem is, that PhoneStateListener does not listen to any changes while phone is in sleep mode. I really need to solve that problem, could anyone help me with this? I tried to use that code in onCreate() method:

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "call_lock");
wakeLock.acquire(); 
```

but it doesn't solve my problem, listener is still not listening in sleep mode.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:52:43.047

您的解决方案没有解决方案。重新考虑您的代码。有关更多信息，请阅读本文[更多信息](https://stackoverflow.com/questions/6778698/check-for-wifi-networks-signal-in-sleep-mode)

# matrix - WebGL 矩阵深度无法正常工作

> ID：12447791
> 
> 赞同：0
> 
> 时间：2012-09-16T14:40:27.600
> 
> 标签：matrix, webgl, depth

我对 WebGL 很陌生，但我正在接近理解基础知识。

我正在按照[Jacob Seidelin 书中](http://blog.nihilogic.dk/2011/12/my-book-is-now-available.html)的说明进行操作，他解释了一些基础知识。我尝试重建他的一个例子（书中没有直接解释）。

由于某种原因，uModelView 矩阵中的深度在我的应用程序中不起作用。使用 WebGLDebugUtils 我也没有收到任何错误。

当我将`z`uModelView 矩阵的属性设置为 0 时，立方体的正面会填满屏幕。因为我在顶点工作`-1`过。`1`

**这是我的源代码：[已删除]**

着色器位于 index.html 中，它们不应该是问题。

我正在使用[gl-matrix](https://github.com/toji/gl-matrix)进行矩阵转换。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:28:45.270

您没有使用 mat4.perspective 正确。查看文档：

[https://github.com/toji/gl-matrix/blob/master/gl-matrix.js#L1722](https://github.com/toji/gl-matrix/blob/master/gl-matrix.js#L1722)

您应该将矩阵添加为最后一个参数（这是首选方式，因为它不会分配任何新对象）：

```
mat4.perspective(fov, aspect, near, far, matrix); 
```

或将其分配给矩阵：

```
matrix = mat4.perspective(fov, aspect, near, far); 
```

# c# - 如何使用泛型创建一种从枚举生成 IEnumerable 的方法？

> ID：12447799
> 
> 赞同：6
> 
> 时间：2012-09-16T14:41:46.073
> 
> 标签：c#

给定这样的枚举：

```
public enum City {
    London    = 1,
    Liverpool  = 20,
    Leeds       = 25
}

public enum House {
    OneFloor    = 1,
    TwoFloors = 2
} 
```

我正在使用以下代码给我一个 IEnumerable：

```
City[] values = (City[])Enum.GetValues(typeof(City)); 
var valuesWithNames = from value in values                       
   select new { value = (int)value, name = value.ToString() }; 
```

代码工作得很好，但是我必须为很多枚举这样做。有没有办法我可以创建一个通用的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T15:25:17.323

使用 Jon Skeet[无拘无束的旋律](http://code.google.com/p/unconstrained-melody/)。

```
using UnconstrainedMelody; 
```

* * *

您可以将枚举值放入 a 中`Dictionary<int, string>`，然后对其进行枚举：

```
var valuesAsDictionary = Enums.GetValues<City>()
                              .ToDictionary(key => (int)key, value => value.ToString()); 
```

* * *

但你可能甚至不需要这样做。为什么不直接枚举值：

```
foreach (var value in Enums.GetValues<City>())
{
    Console.WriteLine("{0}: {1}", (int)value, value);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T15:21:56.950

此功能可能会帮助您：

```
public static IEnumerable<KeyValuePair<int, string>> GetValues<T>() where T : struct
{
        var t = typeof(T);
        if(!t.IsEnum)
            throw new ArgumentException("Not an enum type");

        return Enum.GetValues(t).Cast<T>().Select (x => 
               new KeyValuePair<int, string>(
                   (int)Enum.ToObject(t, x), 
                    x.ToString()));
} 
```

用法：

```
var values = GetValues<City>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T15:10:22.123

为什么不：

```
 IEnumerable<object> GetValues<T>()
    {
        return Enum.GetValues(typeof (T))
                   .Cast<T>()
                   .Select(value => new {     
                                             value = Convert.ToInt32(value),
                                             name = value.ToString()
                                         });

    } 
```

所以你可以使用：

```
var result = GetValues<City>(); 
```

如果你想让约束泛型`T`为`enum`，因为`enum` *不能直接用作泛型*约束，但是[enum](http://msdn.microsoft.com/en-us/library/system.enum%28v=vs.85%29.aspx)继承自 interface `IConvertible`，相信这种方式是可以的：

```
IEnumerable<object> GetValues<T>() where T: struct, IConvertible
{} 
```

替换`IEnumerable<object>`为`Dictionary`：

```
Dictionary<int, string> GetValues<T>() where T :  struct, IConvertible
{
    return Enum.GetValues(typeof (T)).Cast<T>()
               .ToDictionary(value => Convert.ToInt32(value),
                             value => value.ToString());
} 
```

**编辑**：正如 Magnus 的评论，如果您需要确保项目的顺序，Dictionary 不是选项。定义自己的强类型会更好。

# java - Jar 文件无法运行

> ID：12447802
> 
> 赞同：-1
> 
> 时间：2012-09-16T14:42:09.603
> 
> 标签：java, jar

几天前，我安装了最新的 Java 更新。在此过程中，我相信可能出了问题，因为现在当我尝试打开一个 jar 文件（双击它）时，它只会弹出一个终端窗口，其中显示如下内容：

```
Cannot find main class "..." 
```

但是，如果我尝试直接从终端运行它：

```
java -jar foo.jar 
```

它会运行良好。我曾尝试完全重新安装 JRE 和 JDK，只是为了达到良好的效果，但这没有任何效果。有没有人有任何建议？

我正在使用带有 Java 7 更新 7 的 Windows XP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:08:48.173

**1.**首先`java -version`在命令提示符下输入，如果此命令显示已安装的 JDK 版本，那么您的 JDK 路径就可以了。

**2.**其次，也许你的文件关联搞砸了。在命令提示符下，尝试运行

`ftype | find "jarfile"`

`On my 64-bit Windows 7 computer, that shows`

`jarfile="C:\Program Files (x86)\Java\jre6\bin\javaw.exe" -jar "%1" %*`

**您也可以使用 ftype 更改它：**

`ftype jarfile="C:\Program Files (x86)\Java\jre6\bin\javaw.exe" -jar "%1" %*`

另外值得注意的是，应用程序安装可能会执行 JRE 的静默安装，这（当然是静默安装！）不会正确关联 .jar 文件。因此，您必须将主程序安装更改为不再进行静默安装，并清理文件关联。重新安装 JRE 后，您可以通过双击执行 .jar 文件

# android - batch.begin() LibgDDX 处的空指针异常

> ID：12447806
> 
> 赞同：1
> 
> 时间：2012-09-16T14:42:36.357
> 
> 标签：android, nullpointerexception, libgdx

我正在尝试在屏幕上绘制 .png，但我不断收到错误消息。我正在使用的类是 Screen 的子类。

这是我得到的错误：

```
FATAL EXCEPTION GLThread 1335 java.lang.NullPointerException  at SplashScreen.java.32 
```

这一行是：

```
batch.begin() 
```

这是我在 Screen 子类中的代码：

```
private SpriteBatch batch;
private Texture splashTexture;
private Camera camera;

 final int CAMERA_WIDTH = Gdx.graphics.getWidth();
static final int CAMERA_HEIGHT = Gdx.graphics.getHeight();

@Override
public void render(float delta) {
   Gdx.gl.glClearColor(0, 0, 0, 1);
   Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
   batch.begin();
   batch.draw(splashTexture, 0, 0);
   batch.end();

}

@Override
public void resize(int width, int height) {
   // TODO Auto-generated method stub

}

@Override
public void show() {
   splashTexture = new Texture(Gdx.files.internal("splash.png"));
   camera = new OrthographicCamera(CAMERA_WIDTH, CAMERA_HEIGHT);
    camera.position.set(CAMERA_WIDTH, CAMERA_HEIGHT, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T08:07:47.203

您的 SpriteBatch 为空，您创建了纹理和相机，但没有创建批次。你提到的断点与它无关。

```
private SpriteBatch batch;
private Texture splashTexture;
private Camera camera;

...

@Override
public void show(){
    splashTexture = new Texture(Gdx.files.internal("splash.png"));
    camera = new OrthographicCamera(CAMERA_WIDTH, CAMERA_HEIGHT);
    camera.position.set(CAMERA_WIDTH, CAMERA_HEIGHT, 0);

    batch = new SpriteBatch(); //create it like this.
}

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T13:32:29.457

```
batch=new spritebatch(); 
```

你的问题就解决了。

# jdbc - 类型 4 驱动程序问题 - 多个 SQL（复合 SQL）

> ID：12447811
> 
> 赞同：0
> 
> 时间：2012-09-16T14:42:56.950
> 
> 标签：jdbc, db2, weblogic

我在同一行中有多个调用的查询（请参见下面的代码）

Statement 对象由 JDBCTemplate 自动创建。

JDBCTemplate 被实例化为 new JDBCTemplate() 并且从 weblogic 服务器池中查找数据源。

A 类实现 org.springframework.jdbc.core.StatementCallback {

```
public Object doInStatement(Statement stmt) throws Exception {

String sql = "select * from a where pk = 'test';select * from b where pk = 'test';select * from c where pk = 'test'";

Statement stmt = 

ResultSet rs = stmt.executeQuery(sql);

rs = stmt.getResultSet();
...
rs = stmt.getMoreResults();
...
rs = stmt.getMoreResults();
... 
```

}

使用 IBM 的 Type 2 驱动程序，上述工作非常好。我们不得不将驱动程序更改为 Oracle 的 Type 4 JDBC 驱动程序，当我们这样做时，上面的内容就坏了。它不再起作用，我收到以下错误：

> [DAO.exec] 错误：java.sql.SQLException：[OWLS][DB2 JDBC Driver][DB2]ILLEGAL SYMBOL select * from a where pk ；有效的符号是声明的开始

有谁知道为什么 Type 4 驱动程序不支持上述内容？我需要在语句中使用不同的分隔符，以不同的方式使其工作吗？

注意：这段代码在 IBM 2 型 JDBC 驱动程序上没有任何问题，当我们切换到 Oracle 的 4 型驱动程序时它失败了。

我们使用 weblogic 作为应用服务器和 DB2 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:15:47.360

您需要分别执行多个语句，而不是复合成一个字符串。大多数驱动程序只允许执行一条语句。只有少数驱动程序允许在语句/执行中执行多个语句。

一般来说，您不应该依赖这种行为，因为它没有在 JDBC 规范中明确定义。如果您在 JDBC 规范的字里行间阅读，那么恕我直言，在 on statement/execute 中执行多个语句根本不应该得到支持，但这是值得商榷的。

为什么驱动程序不支持这一点：一些数据库系统根本不支持在一个语句/执行中准备、执行和检索多个语句的结果。因此，为了支持它，驱动程序实际上需要跳过各种障碍才能使其工作，即使它不是 JDBC 的要求（或者恕我直言：JDBC 不允许）。

为了证实我的主张，即在单个语句/执行中只应执行一个语句：

*   *用于执行静态 SQL 语句的**对象**（*来自[http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html)）
*   *在某些（不常见）情况下，**单个**SQL 语句可能会返回多个结果集和/或更新计数* [http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#execute(java .lang.String](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#execute(java.lang.String) )
*   ***同样，JDBC 规范在***谈论语句时总是谈论“*查询”*

# html - 为什么 CSS 表现得很奇怪？

> ID：12447812
> 
> 赞同：0
> 
> 时间：2012-09-16T14:43:16.290
> 
> 标签：html, css

我正在制作一个页面，并希望我的大纲如下：

![图片](../Images/f8f61fdc5cd2bfb56f0e0c2aed07bc24.png)

一切都很顺利，直到我开始添加正文和侧边栏。侧栏不会延伸到底部。我尝试使用`height: 100%`没有运气。当前站点：

![图2](../Images/ef2ee6e6f6e061185bdfd628443ae973.png)

CSS：

```
#wrapper
{
margin: auto auto auto auto;
text-align: center;
border: 10 Black;
background-color: Black;
width: 50%;
}

#left
{
    float: left;
border-right: 2px white;
width: 25%;
background-color: Black;
height: 100%;
}

#right
{
    float: right;
border-left: 2px white;
width: 25%;
background-color: Black;
height: 100%;
}

body 
{
color : Yellow;
background-color: #585858;
width: 960;
height: 100%;
}

.text
{
text-align: center;
margin-left: auto;
margin-right: auto;
float: none;
border: 10px White;
} 
```

HTML：

```
<div id="right">
<img class="sideimg" src="data/images/kinected logo.png" height="150" width="150"/>
</div>
<div id="left">
<img class="sideimg" src="data/images/kinected logo.png" height="150" width="150"/>
</div>
<div id="wrapper">
<h1>Main header goes here</h1>
<div id="text">
<p>Main text goes here</p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:45:59.777

添加以下内容：

```
html,body{height:100%} 
```

**[看一看](http://jsfiddle.net/mNR2Z/)**

# java - 如何安装休眠？

> ID：12447813
> 
> 赞同：-3
> 
> 时间：2012-09-16T14:43:22.080
> 
> 标签：java, eclipse, hibernate, installation

我是 Java 中的 Hibernate 新手。我已经从 Hibernate.org 站点下载了 Hibernate-release-4.1.7.Final.zip 文件。现在如何在我的 Java 代码中使用它？我使用的 IDE 是 Eclipse Indigo。PS：我目前使用的互联网连接不足以从 Hibernate 更新站点安装软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:57:25.437

将以下 jars 添加到类路径中，Hibernate 无需安装

```
antlr
asm-attrs
asm
cglib
dom4j
ejb3-persistence
hibernate-annotations
hiberate-common-annotations
hibernate-entitymanager
hibernate-validator
hibernate3
javassist
commons-beantils
commons-collections 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T14:47:32.097

只需在 Eclipse 中将休眠 jars 添加到 buildPath。

# php - Regex / Preg：不匹配，如果找到

> ID：12447818
> 
> 赞同：0
> 
> 时间：2012-09-16T14:44:27.087
> 
> 标签：php, regex, preg-replace, bbcode

我正在尝试做一些 PHP preg。但是，如果我想要一个没有任何东西的字符串，我似乎无法让它匹配。

例子：

```
Hello! My name is [b]Peter Jack[/b] 
```

如果找到 Peter Jack 的姓氏，它将不匹配，但如果找到“[b]Peter[/b]”，它将匹配。

任何我不太擅长解释的人，如果还有什么需要帮助我解决这个问题，请发表评论。

* * *

我可以说的另一种方式是，如果我有一个网站链接，它将匹配并执行 preg_replace 中的内容，但如果该网站的链接以 .png（图像）结尾，它将不匹配并且不会建立链接。

```
example.com/image.png 
```

将不匹配，因为它包含 .png

```
example.com/image 
```

将被匹配，因为它不**包含**.png

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:47:52.467

目前还不清楚你想找到什么。如果只是`[b]Peter[/b]`，那么您不需要正则表达式。

如果要查找由 BBCode 粗体标签包围的单个“单词”，请使用

```
preg_match('%\[b\]\w*\[/b\]%', $subject) 
```

如果您想在 BBCode 粗体标签中查找任何内容，只要它不包含`Jack`，请使用

```
preg_match(
    '%\[b\]     # Match [b]
    (?:         # Try to match...
     (?!Jack)   # (unless the word "Jack" occurs there)
     .          # any character
    )*?         # any number of times, as few as possible
    \[/b\]      # Match [/b]%x', 
    $subject) 
```

# java - s 在 Java 中占用 3 个字节吗？何时：字符串 s = "abc"; 爪哇

> ID：12447819
> 
> 赞同：5
> 
> 时间：2012-09-16T14:44:31.727
> 
> 标签：java, memory, compiler-construction, jvm

如果我用 Java 写这个：

```
String s = "abc"; 
```

s 是否只占用内存中的 3 个字节？
如果为真，JVM 如何找到 String 对象的结尾？
这会在内存中占用更多字节吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T14:48:58.147

它需要超过 3 个字节，请继续阅读[此页面的完整说明](http://www.javamex.com/tutorials/memory/string_memory_usage.shtml)

> 由于我们将在下面探讨的原因，Java 字符串（在 Hotspot Java 6 VM 中）的最小内存使用量通常如下：
> 
> ```
> Minimum String memory usage (bytes) = 8 * (int) ((((no chars) * 2) + 45) / 8) 
> ```
> 
> 或者，换一种说法：
> 
> *   将字符串的字符数乘以 2；
> *   增加38；
> *   如果结果不是 8 的倍数，则向上舍入到下一个 8 的倍数；
> *   结果通常是字符串在堆上占用的最小字节数。

[来自同一网站的此页面](http://www.javamex.com/tutorials/memory/string_saving_memory.shtml)还详细介绍了使用不同的类来节省内存的方法`String`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T14:53:25.050

简短的回答：不，不是很远。众所周知，JVM 字符串非常重。该对象不仅包含指向字符数组的指针，还包含其长度。并且内部存储使用 UTF-16 代码点，所以您的问题可能是“它需要 6 个字节吗？” :-)

对 JVM 的技术参考将为您提供字符串对象的确切大小。您还可以找到一些有趣的博客文章[，例如这篇](http://lingpipe-blog.com/2010/06/22/the-unbearable-heaviness-jav-strings/)文章和技术文章。

字符串对象的确切大小问题还有很多。我们可以进行对象指针的压缩、字符串实习等。还有一个事实是，由于字符串是不可变的，我们经常共享字符串内存，例如，当您调用时会发生这种情况`substring`。

但是，始终正确的是：它超过 3 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T14:50:29.957

最小字符串内存使用量（字节）= 8 * (int) ((((字符数) * 2) + 45) / 8)

# java - 算法动画

> ID：12447823
> 
> 赞同：1
> 
> 时间：2012-09-16T14:45:19.257
> 
> 标签：java, algorithm, swing

我正在做一个我遇到的小项目。关键是能够为对算法知之甚少或现在了解的人解释算法如何与动画一起工作。我相信这是杜克大学的一个项目。但是我想说这不是家庭作业，我这样做只是作为练习。所以第一张图片是我想要做的，第二张图片是我到目前为止所做的。我正在使用 Eclipse。所以我的问题是我怎样才能做一个像绿色背景的图像顶部的动画。因此，如果有人可以提供帮助，请不要害羞。这是第一张图片![在此处输入图像描述](../Images/386fc31a00d595b141b6ea5ef11ddfd9.png)

这是我的工作。![在此处输入图像描述](../Images/3470e164b7e7ed246390e6c5c0538a68.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T14:49:27.613

您必须覆盖您想要自定义`paintComponent(Graphics g)`的 s 的方法`JComponent`，您将无法使用标准摆动组件来完成它（例如，您不能为`JLabel`周围设置动画）。

此外，您可以使用可以帮助您绘制诸如[Processing](http://processing.org/)之类的东西的库。

# iis - IIS 7 配置比较

> ID：12447825
> 
> 赞同：1
> 
> 时间：2012-09-16T14:45:30.627
> 
> 标签：iis, iis-7

我有 2 个 IIS 7 环境，同一个应用程序在一台服务器上抛出错误，在另一台服务器上运行良好。代码完全相同，但应用程序有很多 IIS 配置，没有记录。有什么办法可以提取文件（XML 或类似文件）中的配置并在服务器之间进行比较以查看缺少的内容？

# java - box2d：在不使用 setTransform() 的情况下以特定角度定位 box2d 主体？

> ID：12447834
> 
> 赞同：1
> 
> 时间：2012-09-16T14:46:38.940
> 
> 标签：java, box2d, libgdx

我正在使用 libgdx api (java) 中包含的 box2d

我正在使用一个矩形 box2d 主体作为传感器，用于检测 4 个方向（向上、向下、向左、向右倾斜 90°）的剑刃碰撞（使用身体作为传感器）。因此，为了向上切割，我基本上创建了一个新的矩形 box2d 主体并每次设置其起始位置：

```
swordBodyDef.position.set(playerBody.getPosition().x, playerBody.getPosition().y + 4); 
```

仅此一项就会导致玩家将剑笔直向上（12 点钟方向）。但它应该从 12:10 开始（然后通过施加力移动到 11:50）所以为了在玩家面前将剑的天使设置为 12:10，我使用以下代码：

```
swordBody.setTransform(playerBody.getPosition().x, playerBody.getPosition().y + 4 ), (float)Math.toRadians(-125)); 
```

整个剑术有效，但每次我击中敌人时，命中计为 2。我有一种感觉，当我在 12:00（setPosition）创建剑时，它已经参与物理模拟并计为命中。因此，当我通过 setTransform 方法将其调整为正确的角度（12:10）时，它将再次命中。至少当我不通过 setTransform 方法更改天使时它可以工作。我认为如果有一种方法可以原子地设置剑的位置和天使，它会起作用。

任何关于我如何防止双重打击的想法都值得赞赏:)

**编辑：** 我在有关旋转关节的 box2d 手册中找到以下内容：“要指定旋转，您需要在世界空间中提供两个物体和一个锚点。*初始化函数假定物体已经在正确的位置。* ”这个与我所做的完全相反。首先，我创建了 RevoluteJoint，然后设置了剑身的位置（所需的天使）。所以很明显这会导致物理学上的麻烦，但我仍然不知道如何正确设置剑身的初始角度

**EDIT2：** 我使用了一些解决方法来解决 iforce2d 建议的问题。该问题仅出现在以下world.step所以我正在做的是通过禁用swordBody

```
swordBody.setActive(false); 
```

对于这个游戏循环，并在下一个游戏循环中将其设置为 true。这有点难看，但至少它有效。

***向上斜线的完整 box2d 代码（12:10 到 11:50）***：

```
 //if the sword is active (slashing)
    if(swordBody != null)
    {
        //destroy swordbody when it reaches a certain angel (11:50)
        if(swordBody.getAngle() >= (float)Math.toRadians(50)) 
        {                               
            for (Body box : swordBody_List)
                GameplayScreen.world.destroyBody(box);
            swordBody_List.clear();

            swordBody = null;                           
        }           
    }           
    //construct a sword, set its position over the player's head, join it to the player's body, set the sword's angel to 12:10 and the      
    else if (playerInput.getMoveDirection() == Action.HIT) 
    {       
        //start state of hitting
        hitUp = true;

        //a short delay before the next hit starts
        if (hitTestUpdateTimer < .50f)
        {
            hitTestUpdateTimer += Gdx.graphics.getDeltaTime();
        }           
        else
        {   
            //Player's sword (box2d collision detection) 
            BodyDef swordBodyDef = new BodyDef();           
            swordBodyDef.type = BodyDef.BodyType.DynamicBody;
            swordBodyDef.position.set(playerBody.getPosition().x, playerBody.getPosition().y + 4);                  

            swordBody = GameplayScreen.world.createBody(swordBodyDef);                      
            swordBody.setUserData(this);    

            PolygonShape swordShape = new PolygonShape();       
            swordShape.setAsBox(.1f , 1.3f); //sword size   

            FixtureDef swordFixtureDef = new FixtureDef();      
            swordFixtureDef.shape = swordShape;
            swordFixtureDef.density = 1f; 
            swordFixtureDef.isSensor = true;                
            swordBody.createFixture(swordFixtureDef);       
            swordShape.dispose();               

            swordBody_List.add(swordBody);  

            //Connection between sword & player
            swordJointDef = new RevoluteJointDef();     
            swordJointDef.initialize(playerBody, swordBody, playerBody.getPosition().sub(new Vector2(0, -2))); 
            @SuppressWarnings("unused")
            RevoluteJoint swordRevJointDef = (RevoluteJoint)GameplayScreen.world.createJoint(swordJointDef);                

            //set the angel of the sword to 12:10 when the hit starts
            swordBody.setTransform(new Vector2(playerBody.getPosition().x, playerBody.getPosition().y + 4 ), (float)Math.toRadians(-125)); 
            //rotate the sword (left-direction) 
            swordBody.applyTorque(1600f);               

            //Set update timer back to zero
            hitTestUpdateTimer = 0;                 
            hitUp = false; //state of hitting is finished       
        }               

    } 
```

# javascript - 用js水平滚动和改变颜色

> ID：12447836
> 
> 赞同：2
> 
> 时间：2012-09-16T14:46:47.530
> 
> 标签：javascript, portfolio

我正在尝试做一些单页投资组合。

所以我想出了一个解决方案，如何通过滚动将黑色固定文本更改为白色。唯一的问题是我不知道如何将其更改为水平滚动。

这是代码：http: [//jsfiddle.net/a5a7x/5/](http://jsfiddle.net/a5a7x/5/)

编辑：我想要一个水平滚动，这意味着颜色会随着水平滚动而不是垂直滚动而改变，就像我的情况一样。

![在此处输入图像描述](../Images/f6e67d983c387d4ea7c59af89f15ab5d.png)

# python - 我为快乐号码检查器编写的代码不起作用，有人可以检查一下吗？

> ID：12447837
> 
> 赞同：2
> 
> 时间：2012-09-16T14:46:46.557
> 
> 标签：python, python-2.7, set

```
a = int(raw_input("Enter a number to check if it is happy:"))
l = map(int, str(a))
c = 0
while 1:
    for i in l:
       b = i
       c = c + b **2
    if c == 1:
        print "Happy Number!"
        raw_input("Hit enter to end")
        break
    elif c == a:
        print ("Not a Happy number")
        raw_input("Hit enter to end")
        break
    else:
        l = map(int, str(c)) 
```

这是我用 Python 编写的代码，它适用于数字 1 和 0，但是我尝试过的任何其他数字都会让它无限循环。有人可以看看我做错了什么并提出解决方案吗？谢谢 ：）

供参考：[http ://en.wikipedia.org/wiki/Happy_number](http://en.wikipedia.org/wiki/Happy_number)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T15:03:39.807

试试这个：

```
a = int(raw_input("Enter a number to check if it is happy: "))
visited = set()
while 1:
    if a == 1:
        print "Number is happy!"
        break
    a = sum(int(c) ** 2 for c in str(a))
    if a in visited:
        print "Number is sad!"
        break
    visited.add(a) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T15:00:04.360

您应该保留在此过程中生成的所有值：

```
def is_happy_number(n):
     seen = set()
     while True:
           digits = [int(c) for c in str(n)]
           n = sum(digit**2 for digit in digits)
           if n == 1:
                return True
           elif n in seen:
                return False
           seen.add(n)

>>> is_happy_number(1)
True
>>> is_happy_number(7)
True
>>> is_happy_number(11)
False 
```

那是因为如果你有一个循环，这并不意味着循环将从你开始的地方开始。例如：

```
11 -> 2
2 -> 4
4 -> 16
16 -> 37
37 -> 58
58 -> 89
89 -> 145
145 -> 42
42 -> 20
20 -> 4 
```

如您所见，您从“11”开始，但循环以“4”开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T14:55:57.857

在 while 循环中放入 print 语句

```
while 1:
    print(l) 
```

看看当用户输入时发生了什么，比如说`2`。

您需要重置`c = 0`：

```
else:
    l = map(int, str(c))
    c = 0 
```

一个不愉快的数字的条件也需要改变。一旦你放入调试打印语句，我想你会看到需要做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-18T04:26:47.647

有两个问题，你需要重置“c”，它几乎从不循环回到自己身上。试试这个：

```
a = int(raw_input("Enter a number to check if it is happy:"))
l = map(int, str(a))
while 1:
    c = 0
    for i in l:
       b = i
       c = c + b **2
    if c == 1:
        print "Happy Number!"
        raw_input("Hit enter to end")
        break
    elif c == 4:
        print ("Not a Happy number")
        raw_input("Hit enter to end")
        break
    else:
        l = map(int, str(c)) 
```

我移动了“c = 0”命令并调整了 elif 语句

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T15:14:07.553

为什么如果 elif c == a: ？Wiki：“如果 n 不高兴，那么它的序列不会变为 1。相反，它会进入循环”

试试这个：

```
r=int(raw_input("Enter Number :"))
happy=[]
for _ in range(r):
    number=_
    l=[]
    s=0
    while not (s in l[:-1]) and s!=1:
        s=0
        for __ in str(number):
            s+= int(__)**2
        l.append(s)
        number=s
    if l[-1]==1:

        happy.append(_)

print ("Happy Numbers are :")
print happy 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-21T18:41:25.497

```
number=int(input("enter how many happy number to print"))
count=0
print("the first {} happy numbers are:".format(number))
for i in range(1,100000):#you can change the range if you want more happy numbers
    n=i
    while n!=1 and count!=number:
        num=n
        temp=0
        while num!=0:
            rem=num%10
            temp=temp+(rem**2)
            num=num//10
        n=temp
        if n==4:#condition to break the loop if it is no a happy number
            break    
    if n==1:
        count=count+1  
        print (i) 
```

# android - 如何在 Mac 10.7.4 上从 Android 模拟器卸载我的应用

> ID：12447839
> 
> 赞同：6
> 
> 时间：2012-09-16T14:47:06.293
> 
> 标签：android, emulation, uninstallation

我正在寻找从 mac book pro 上的 Android 模拟器卸载我的应用程序的正确方法。我看到的说明适用于 Windows 操作系统。

寻找在 Xcode 中重新创建重置模拟器过程的步骤。

谢谢，我很感激你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T15:08:22.887

要完全重置 Android 模拟器：

*   打开 Android AVD 管理器。
*   启动要重置的模拟器。
*   选中“擦除用户数据”框。
*   单击启动。

如果您只想删除应用程序：

*   启动模拟器。
*   打开安卓设置应用
*   选择“应用程序”（在 Android 4.0 或更高版本上称为“应用程序”）
*   选择“管理应用程序”（仅限 Android 3.2 或更低版本）
*   选择要卸载的应用程序
*   点击“卸载”

# c++ - 静态链接 wxWidgets 时的引用错误

> ID：12447842
> 
> 赞同：0
> 
> 时间：2012-09-16T14:47:30.703
> 
> 标签：c++, mingw, wxwidgets, static-libraries, premake

我在构建脚本中[为 wxWidgets 使用了这个 Premake4](http://wiki.wxwidgets.org/Premake4)脚本：

```
wx_config {Unicode="yes", Version="2.9", Libs="core,aui,media,html", WindowsCompiler="gcc", Static="yes"} 
```

但是 CodeBlocks 分别 MinGW 输出很多错误：

```
wx\lib\gcc_lib/libwxbase29u.a(baselib_filename.o):filename.cpp:(.text+0x5371): undefined reference to `CoCreateInstance@20'
wx\lib\gcc_lib/libwxbase29u.a(baselib_filename.o):filename.cpp:(.text+0x5390): undefined reference to `IID_IPersistFile'
wx\lib\gcc_lib/libwxmsw29u_core.a(corelib_window.o):window.cpp:(.text+0x7cc9): undefined reference to `wxEVT_POWER_SUSPEND_CANCEL'
wx\lib\gcc_lib/libwxmsw29u_core.a(corelib_window.o):window.cpp:(.text+0x7cf9): undefined reference to `vtable for wxPowerEvent'
wx\lib\gcc_lib/libwxmsw29u_core.a(corelib_window.o):window.cpp:(.text+0x7d55): undefined reference to `wxEVT_POWER_SUSPENDED'
wx\lib\gcc_lib/libwxmsw29u_core.a(corelib_window.o):window.cpp:(.text+0x7d61): undefined reference to `wxEVT_POWER_SUSPENDING'
wx\lib\gcc_lib/libwxmsw29u_core.a(corelib_window.o):window.cpp:(.text+0x7d6d): undefined reference to `wxEVT_POWER_RESUME'
wx\lib\gcc_lib/libwxmsw29u_core.a(corelib_window.o):window.cpp:(.text+0x7f18): undefined reference to `vtable for wxPowerEvent'
... 
```

您可以在此处查看所有链接器错误：http: [//pastebin.com/UGSRg4DX](http://pastebin.com/UGSRg4DX)

有人在 wxWidgets 错误报告[（链接丢失）]中提到库顺序导致了这个问题。但他没有说哪个图书馆必须放在第一位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:04:24.920

[这看起来与这个](https://stackoverflow.com/questions/12393322/wxwidgets-lots-of-undefined-refferences/12395262#12395262)问题完全相同。即，您需要以正确的顺序将库放入您的预制脚本中：（`aui,media,html,core`重要的是“核心”是最后一个）。另外，我不知道它是否可能是隐式附加的，但通常你最后还需要“base”。

# android - 通过 USB 端口传输数据

> ID：12447845
> 
> 赞同：2
> 
> 时间：2012-09-16T14:47:37.787
> 
> 标签：android, usb, serial-port, fpga

我可以通过 USB 端口将数据序列（不是文件）从 Android 设备传输到 FPGA 板吗？android 是否支持使用某些 API 顺序进行此类传输？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:04:17.093

根据您的 Android 硬件，最多可以使用三种不同的方式来执行此操作。从最广泛支持到最少，它们是 ADB 协议、USB 附件模式和 USB 主机模式。ADB 协议实际上是为调试 Android 设备而设计的，但 Android 支持在其上建立 TCP 连接隧道，并且诸如[microbridge](http://code.google.com/p/microbridge/)之类的各种项目都使用它在 Android 应用程序和外部硬件之间传输数据。其他人已经链接了另外两个的文档。

您实际可以使用哪些取决于您使用的是哪种 FPGA 板以及它具有哪种 USB 硬件。（我暂时假设您使用的是现成的板。）有些板只有 USB-to-JTAG 接口，通常是专有的和无证的，在这种情况下 USB Host 是唯一的方法与它交互，您将需要在 Android 端使用一些相当丑陋的代码。其他的，如 OsciPrime 和 Ztex 的板，使用 Cypress FX2 微控制器，它再次需要 USB 主机支持，但允许您在两者之间定义自己的 USB 协议。少数拥有飞利浦 ISP1362 芯片并支持 USB 主机模式，在这种情况下，您可以使用 ADB 或开放附件协议 - 您甚至可以[在其上启动 ucLinux 并使用 libusb 连接到您的手机](http://www.alterawiki.com/wiki/USBHost)。

如果您正在开发自己的硬件，这显然取决于个人品味、性能要求、BOM 成本和开发时间之间的权衡，以及您需要能够支持的 Android 设备范围有多大。例如，USB 收发器的 TUSB110x 系列非常便宜，并且可以支持 USB 主机模式，因此理论上您可以与现有的所有 Android 硬件进行接口，但它们需要在 FPGA 方面进行大量工作。

（由于新用户的两个超链接限制，此答案已剔除一些超链接。抱歉。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:42:13.897

这取决于您的 Android 设备。自 API 级别 12 以来，Android 开发人员已经[支持 USB 主机和 USB 附件](http://developer.android.com/guide/topics/connectivity/usb/index.html)。据我所知，USB 附件有点时髦，因为它旨在仅识别 USB 标准[“Android 开放附件协议”](http://developer.android.com/tools/adk/aoa.html)的 Android 专有扩展，

看看[瑞士的 Nexus Computing人员所做的工作](http://android.serverbox.ch/)

特别是，您会发现有关他们的[osciprime 开源示波器](http://www.osciprime.com/)的博客文章，其中包括与 XiLinx CPLD 的硬件接口，这至少接近于您正在尝试做的事情。

# android - 致命异常主要android

> ID：12447851
> 
> 赞同：0
> 
> 时间：2012-09-16T14:48:03.340
> 
> 标签：android, exception, main

我收到 FATAL Exception 主要错误。有什么帮助吗？

这是代码：

> 私人无效复制流（字符串资产文件名，字符串outFileName）抛出IOException {
> 
> ```
>  Process mSuProcess;
>       mSuProcess = Runtime.getRuntime().exec("su");
>       ContextWrapper myContext = null;
>                   InputStream myInput = myContext.getAssets().open(assetFilename);
> 
>       OutputStream myOutput = new FileOutputStream(outFileName);
> 
>       //transfer bytes from the inputfile to the outputfile
>       byte[] buffer = new byte[2048];
>       int length;
>       while ((length = myInput.read(buffer))>0){
>           myOutput.write(buffer, 0, length);
>       }
> 
>       //Close the streams
>       myOutput.flush();
>       myOutput.close();
>       myInput.close();
> 
>   }
> 
> public void copyon(View view) throws IOException
> {
>   copyStream("floaton.xml","/system/etc/excluded-input-devices.xml"); 
> 
> }
> 
> public void copyoff(View view) throws IOException
> {
>  copyStream("floatoff.xml","/system/etc/excluded-input-devices.xml");
> 
> } 
> ```

和logcat

> 09-16 19:52:26.654: E/AndroidRuntime(294):FATAL EXCEPTION: main 09-16 19:52:26.654: E/AndroidRuntime(294):java.lang.IllegalStateException: 无法执行活动 09 的方法-16 19:52:26.654: E/AndroidRuntime(294):at android.view.View$1.onClick(View.java:2144) 09-16 19:52:26.654:E/AndroidRuntime(294):at android. view.View.performClick(View.java:2485) 09-16 19:52:26.654: E/AndroidRuntime(294):at android.view.View$PerformClick.run(View.java:9080) 09-16 19: 52:26.654: E/AndroidRuntime(294):at android.os.Handler.handleCallback(Handler.java:587) 09-16 19:52:26.654:E/AndroidRuntime(294):at android.os.Handler.dispatchMessage (Handler.java:92) 09-16 19:52:26.654: E/AndroidRuntime(294):at android.os.Looper.loop(Looper.java:123) 09-16 19:52:26.654: E/AndroidRuntime (294): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.lang.reflect.Method.invokeNative(Native Method) 09-16 19:52:26.654: E/AndroidRuntime(294):在 java.lang.reflect.Method.invoke(Method.java:507) 09-16 19:52:26.654: E/AndroidRuntime(294):at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit. java:839) 09-16 19:52:26.654: E/AndroidRuntime(294):at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 09-16 19:52:26.654: E/ AndroidRuntime(294):at dalvik.system.NativeStart.main(Native Method) 09-16 19:52:26.654: E/AndroidRuntime(294):Caused by: java.lang.reflect.InvocationTargetException 09-16 19:52: 26.654: E/AndroidRuntime(294):at java.lang.reflect.Method.invokeNative(Native Method) 09-16 19:52:26.654:E/AndroidRuntime(294):at java.lang.reflect.Method.invoke(方法.java:507) 09-16 19:52:26。654: E/AndroidRuntime(294):at android.view.View$1.onClick(View.java:2139) 09-16 19:52:26.654: E/AndroidRuntime(294): ... 11 更多 09-16 19 :52:26.654: E/AndroidRuntime(294): 由: java.io.IOException: Broken pipe 09-16 19:52:26.654: E/AndroidRuntime(294): at org.apache.harmony.luni.platform 引起。 OSFileSystem.write(Native Method) 09-16 19:52:26.654: E/AndroidRuntime(294): at dalvik.system.BlockGuard$WrappedFileSystem.write(BlockGuard.java:171) 09-16 19:52:26.654: E /AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:300) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java: 256) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.DataOutputStream.writeBytes(DataOutputStream.java:167)2139) 09-16 19:52:26.654: E/AndroidRuntime(294): ... 11 更多 09-16 19:52:26.654: E/AndroidRuntime(294): 由: java.io.IOException: Broken pipe 09-16 19:52:26.654: E/AndroidRuntime(294): at org.apache.harmony.luni.platform.OSFileSystem.write(Native Method) 09-16 19:52:26.654: E/AndroidRuntime(294):在 dalvik.system.BlockGuard$WrappedFileSystem.write(BlockGuard.java:171) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:300) 09- 16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:256) 09-16 19:52:26.654:E/AndroidRuntime(294):at java.io。 DataOutputStream.writeBytes(DataOutputStream.java:167)2139) 09-16 19:52:26.654: E/AndroidRuntime(294): ... 11 更多 09-16 19:52:26.654: E/AndroidRuntime(294): 由: java.io.IOException: Broken pipe 09-16 19:52:26.654: E/AndroidRuntime(294): at org.apache.harmony.luni.platform.OSFileSystem.write(Native Method) 09-16 19:52:26.654: E/AndroidRuntime(294):在 dalvik.system.BlockGuard$WrappedFileSystem.write(BlockGuard.java:171) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:300) 09- 16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:256) 09-16 19:52:26.654:E/AndroidRuntime(294):at java.io。 DataOutputStream.writeBytes(DataOutputStream.java:167)断管 09-16 19:52:26.654: E/AndroidRuntime(294): at org.apache.harmony.luni.platform.OSFileSystem.write(Native Method) 09-16 19:52:26.654: E/AndroidRuntime(294 ): 在 dalvik.system.BlockGuard$WrappedFileSystem.write(BlockGuard.java:171) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:300) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:256) 09-16 19:52:26.654: E/AndroidRuntime(294):at java. io.DataOutputStream.writeBytes(DataOutputStream.java:167)断管 09-16 19:52:26.654: E/AndroidRuntime(294): at org.apache.harmony.luni.platform.OSFileSystem.write(Native Method) 09-16 19:52:26.654: E/AndroidRuntime(294 ): 在 dalvik.system.BlockGuard$WrappedFileSystem.write(BlockGuard.java:171) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:300) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:256) 09-16 19:52:26.654: E/AndroidRuntime(294):at java. io.DataOutputStream.writeBytes(DataOutputStream.java:167)E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:300) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java :256) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.DataOutputStream.writeBytes(DataOutputStream.java:167)E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java:300) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.FileOutputStream.write(FileOutputStream.java :256) 09-16 19:52:26.654: E/AndroidRuntime(294):at java.io.DataOutputStream.writeBytes(DataOutputStream.java:167)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T03:51:02.970

请使用 AsyncTask 或 Thread。如果您编写了自己的方法，则可以这样使用：

```
new Thread(
    new Runnable() {
        @Override
        public void run() {
            copyStream();
        }
    }
); 
```

或使用**AsyncTask**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:02:24.963

异常的基础似乎来自“FileOutputStream.write”，您是否将写入权限添加到您的清单？

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T15:06:12.483

在你的 mainfest 中添加这个权限。我希望它对你有用，你应该初始化这个对象。在你的代码中，你给上下文值 null 这就是它不起作用的原因。

/** 需要一些 Intilization 而不是 null

ContextWrapper myContext = null;

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-28T03:59:45.030

默认情况下，您没有对`/system/etc`, 的写入权限（除非您在设备上进行了一些破解）。将其更改为`Environment.getExternalStorageDirectory().getPath() + "/folderName/excluded-input-devices.xml"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-25T17:22:32.507

您正在线程内调用 onClick 方法。这是不可能的，因为视图位于主线程中，无法从任何其他线程访问它们。

# r - 从 nnet 包 R cran 绘制神经网络模型

> ID：12447852
> 
> 赞同：7
> 
> 时间：2012-09-16T14:48:25.217
> 
> 标签：r, plot, neural-network, cran

是否有任何软件包或其他软件可以从 nnet 软件包中绘制神经网络模型。

我使用 nnet 和 Rattle 训练了一个神经网络模型（3 个输入和 1 个输出）：

```
crs$nnet <- nnet(as.factor(Target) ~ .,
                 data=crs$dataset[crs$sample,c(crs$input, crs$target)],
                 size=10, skip=TRUE, MaxNWts=10000, 
                 trace=FALSE, maxit=100) 
```

这是模型的摘要：

```
Neural Network build options: skip-layer connections; entropy fitting.

In the following table:
   b  represents the bias associated with a node
   h1 represents hidden layer node 1
   i1 represents input node 1 (i.e., input variable 1)
   o  represents the output node

Weights for node h1:
 b->h1 i1->h1 i2->h1 i3->h1 
 -0.66   0.15   0.24  -0.31 

Weights for node h2:
 b->h2 i1->h2 i2->h2 i3->h2 
 -0.62   1.32   1.16   0.24 

Weights for node h3:
 b->h3 i1->h3 i2->h3 i3->h3 
 13.59 -10.44   0.78  -6.46 

Weights for node h4:
 b->h4 i1->h4 i2->h4 i3->h4 
  0.16  -0.46   2.09   0.23 

Weights for node h5:
 b->h5 i1->h5 i2->h5 i3->h5 
 -0.16  -0.55  -0.52   0.25 

Weights for node h6:
 b->h6 i1->h6 i2->h6 i3->h6 
 -1.49  -7.07   1.67  -0.21 

Weights for node h7:
 b->h7 i1->h7 i2->h7 i3->h7 
  2.00   1.67  -5.51   0.66 

Weights for node h8:
 b->h8 i1->h8 i2->h8 i3->h8 
  0.56   0.44   0.41   0.51 

Weights for node h9:
 b->h9 i1->h9 i2->h9 i3->h9 
  0.38   0.21   0.47  -0.41 

Weights for node h10:
 b->h10 i1->h10 i2->h10 i3->h10 
   0.53   -1.60    4.79   -0.04 

Weights for node o:
  b->o  h1->o  h2->o  h3->o  h4->o  h5->o  h6->o  h7->o  h8->o  h9->o 
  1.08   1.83   0.17   1.21   1.21   0.64  -0.13  -8.37   0.98   2.03 
h10->o  i1->o  i2->o  i3->o 
 -8.41   0.03   0.00   0.01 
```

非常感谢你

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-05T10:26:45.270

感谢“R 是我的朋友”，现在您可以轻松做到这一点：

[http://beckmw.wordpress.com/2013/11/14/visualizing-neural-networks-in-r-update/](http://beckmw.wordpress.com/2013/11/14/visualizing-neural-networks-in-r-update/)

我分叉了*fawda123*的功能，并添加了更改边框颜色的可能性。我的更改可在此处获得：

[https://gist.github.com/Peque/41a9e20d6687f2f3108d](https://gist.github.com/Peque/41a9e20d6687f2f3108d)

自定义边框颜色（黑色）的示例：

![神经网络绘图示例](../Images/0bf19045f11e921532c1157a2457ac8a.png)

这是上面示例的完整代码（请注意，您将需要包 'clusterGeneration'、'nnet' 和 'devtools'）：

```
library(clusterGeneration)
library(nnet)
library(devtools)

seed.val<-2
set.seed(seed.val)

num.vars<-8
num.obs<-1000

#input variables
cov.mat<-genPositiveDefMat(num.vars,covMethod=c("unifcorrmat"))$Sigma
rand.vars<-mvrnorm(num.obs,rep(0,num.vars),Sigma=cov.mat)

#output variables
parms<-runif(num.vars,-10,10)
y1<-rand.vars %*% matrix(parms) + rnorm(num.obs,sd=20)
parms2<-runif(num.vars,-10,10)
y2<-rand.vars %*% matrix(parms2) + rnorm(num.obs,sd=20)

#final datasets
rand.vars<-data.frame(rand.vars)
resp<-data.frame(y1,y2)
names(resp)<-c('Y1','Y2')
dat.in<-data.frame(resp,rand.vars)

#nnet function from nnet package
set.seed(seed.val)
mod1<-nnet(rand.vars,resp,data=dat.in,size=10,linout=T)

#import the function from Github
source_url('https://gist.githubusercontent.com/Peque/41a9e20d6687f2f3108d/raw/85e14f3a292e126f1454864427e3a189c2fe33f3/nnet_plot_update.r')

#plot each model
pdf('./nn-example.pdf', width = 7, height = 7)
plot.nnet(mod1, alpha.val = 0.5, circle.col = list('lightgray', 'white'), bord.col = 'black')
dev.off() 
```

# performance - 在用户空间与内核空间中实现协议 - 性能影响

> ID：12447862
> 
> 赞同：7
> 
> 时间：2012-09-16T14:49:58.110
> 
> 标签：performance, tcp-ip

我正在寻找一些关于将协议实现（例如 TCP/IP 堆栈从内核移动到用户空间）的影响的文章/论文。它显然会产生影响，但有多大？或者有任何关于上下文切换成本的文献。我意识到可能没有准确的答案，因为这取决于应用程序。因此假设它是一个网络堆栈，如果任何人都可以提供一些输入，那就太好了。我用谷歌搜索，但找不到任何好的东西，除了这个[用户空间与内核空间程序性能差异](https://stackoverflow.com/questions/11272478/user-space-vs-kernel-space-program-performance-difference) ，但它没有提供足够的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T14:41:38.407

据我所知，您可以看到文件系统比较 - 有许多不同的实现，如内核模块和熔丝模块。也许您可以在此类组件中找到有趣的信息。

同样在网络领域，我可以提到一些驱动程序利用网卡的能力来计算以太网帧的哈希值 - 并且有一些类似的东西。如果您在用户空间工作 - 您不能使用这种技巧。结果，您可以在使用诸如性能惩罚上限之类的技巧时获得性能的同情。

# css - 在css中创建凹角

> ID：12447865
> 
> 赞同：4
> 
> 时间：2012-09-16T14:50:20.653
> 
> 标签：css

**是否可以在css中创建这样的凹角？如果是，你会怎么做？**

![图片](../Images/afaf1f835518f5c5ed12e2d6dd85e6ca.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T15:05:18.817

Lea Verou[描述了如何做到这一点](http://lea.verou.me/2011/03/beveled-corners-negative-border-radius-with-css3-gradients/)：

> 通过使用径向渐变，您可以模拟具有负半径的圆角。您可以在没有任何额外元素支持的情况下执行此操作。它有点棘手。
> 
> 如果不支持 CSS 渐变，它也会退回到纯色背景。它将在 Firefox 3.6、最新的 Webkit 和 - 希望 - Opera 11.10 上运行（他们宣布即将支持渐变）。你也可以添加一个`-webkit-gradient()`背景，让它在当前使用的几乎所有版本的 Webkit 中工作，但我警告你：这并不容易，我个人拒绝花费超过 5 分钟的时间来搞乱那个非标准的东西。

***[这](http://jsfiddle.net/blasteralfred/sCBgk/3/)***是他们实现的现场演示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-16T14:56:02.147

这是我将如何解决这个问题的一个很好的例子：

[http://jsfiddle.net/x4wLf/](http://jsfiddle.net/x4wLf/)

HTML：

```
<div class='concave'>
    <div class='topleftconcave'></div>
    <div class='botleftconcave'></div>
</div> 
```

CSS：

```
 div.concave {
    background:blue;
    width:150px;
    height:120px;
    position:relative;
}
div.topleftconcave {
    position:absolute;
    background:white;
    width:25px;
    height:35px;
    border-bottom-right-radius:500px;
}
div.botleftconcave {
    position:absolute;
    background:white;
    width:25px;
    height:35px;
    bottom:0;
    left:0;
    border-top-right-radius:500px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T14:58:05.740

如果您不想在 HTML 中添加额外的元素，只需要设置两个角的样式*并且*能够使用生成的内容，我建议：

```
.concave {
    position: relative;
    width: 10em;
    height: 3em;
    line-height: 3em;
    margin: 1em auto;
    padding: 0.5em;
    background-color: #00f;
    color: #fff;
}

.concave::before {
    content: '';
    position: absolute;
    top: -1em;
    left: -1em;
    border: 1em solid #fff;
    border-radius: 1em;
}

.concave::after {
    content: '';
    position: absolute;
    bottom: -1em;
    left: -1em;
    border: 1em solid #fff;
    border-radius: 1em;
}
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FPsuW/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T14:55:47.863

我知道的唯一方法是在四个角添加四个 div，每个都有一个正边界半径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T15:38:19.957

CSS3 边框图像属性怎么样？好文章在这里：

[http://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

这将意味着不支持旧浏览器，例如 IE 7-8，但如果您可以忍受它或找到解决方法，这将很有效。

我最近自己用过边框图像来做这件事。

# wordpress - web.config 在 Azure 上不可写

> ID：12447869
> 
> 赞同：3
> 
> 时间：2012-09-16T14:50:53.903
> 
> 标签：wordpress, azure, web-config

我在 Windows Azure 平台上托管 wordpress，目前，我有一个空的 web.config，我需要配置规则以允许漂亮的永久链接。由于某种原因，web.config 似乎不可写，我尝试在 FileZilla 中手动更改它，但它说命令无法理解。所以我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T21:32:58.097

您不应该以可能导致应用程序出现问题的方式修改 web.config。发生的情况是，每当 web.config 发生更改时，它都会触发有关此更改的通知，从而导致您的 IIS 主机进程回收。在此通知之后，IIS 主机进程通过重新加载更新/修改的 web.config 重新启动，如果您进行了错误的修改，您的应用程序将无法正常运行。

在您建议 web.config 已“消失”的情况下，它实际上并没有消失，它存在但由于某些 ACL 问题（不确定原因）在您的 FileZilla 中不可见，因为我看到了同样的问题。尝试创建新的 FTP 会话并查看 web.config 是否再次可见。

您的另一种选择是在本地下载完整站点，然后在本地编辑后，您可以将其发布回来，其中包含更新的内容，并且该站点将按预期返回。

# cordova - PhoneGap 应用程序中的“插件未定义”

> ID：12447870
> 
> 赞同：4
> 
> 时间：2012-09-16T14:50:56.970
> 
> 标签：cordova, phonegap-plugins

我目前正在尝试使用**PhoneGap LocalNotification Plugin**，将 Android 4.1 与 Cordova 2.0.0 和 Sketcha（UI 库）一起使用。

**更新 #2 20/9/12：我使用了 Bozzzi 的代码并进行了一些修复：**

1.  将 }) 添加到 localnotification.js 的末尾（语法错误）。
2.  更改`cordova.define("cordova/plugin/LocalNotification", function(require, exports, module)`为: `cordova.define("cordova/plugin/LocalNotification", function(require, exports, module)`，因此模块名称将匹配此函数（在未找到模块之前）：

    > window.plugins.LocalNotification = cordova.require("cordova/plugin/LocalNotification");

3.  从此改变：

    > if (!window.plugins) { window.plugins = {}; } else if (!window.plugins.LocalNotification) { window.plugins.LocalNotification = cordova.require("cordova/plugin/LocalNotification"); }

对此：

```
if (!window.plugins) {
    window.plugins = {};
}

if (!window.plugins.LocalNotification) {
    window.plugins.LocalNotification = cordova.require("cordova/plugin/LocalNotification");
} 
```

在此更改之前，如果未找到 window.plugins，则会创建它，但不会创建 window.plugins.LocalNotification。

在所有这些修复之后，我收到了这个错误：

> ```
> > 09-20 01:22:27.355: D/CordovaLog(8297):
> > file:///android_asset/www/index.html: Line 21 : PAPA AMERICANO ready
> > 09-20 01:22:27.360: I/Web Console(8297): PAPA AMERICANO ready at
> > file:///android_asset/www/index.html:21 09-20 01:22:27.370:
> > D/CordovaLog(8297): Uncaught TypeError: Cannot call method 'add' of
> > undefined 09-20 01:22:27.375: D/CordovaLog(8297):
> > file:///android_asset/www/index.html: Line 35 : Uncaught TypeError:
> > Cannot call method 'add' of undefined 09-20 01:22:27.375: E/Web
> > Console(8297): Uncaught TypeError: Cannot call method 'add' of
> > undefined at file:///android_asset/www/index.html:35 09-20
> > 01:22:29.185: D/DroidGap(8297): onMessage(spinner,stop) 09-20
> > 01:22:30.255: E/SKIA(8297): FimgApiStretch:stretch failed 09-20
> > 01:22:41.755: E/SKIA(8297): FimgApiStretch:stretch failed 09-20
> > 01:22:52.565: D/CordovaWebView(8297): >>> loadUrlNow() 09-20
> > 01:22:52.565: D/webkit(8297): Firewall not null 09-20 01:22:52.565:
> > D/webkit(8297): euler: isUrlBlocked = false 
> ```

出于某种原因，`cordova.require("cordova/plugin/LocalNotification")`不设置`window.plugins.LocalNotification`值并且它一直未定义。这是我更新的 index.html（更新 #2）：

```
<!DOCTYPE HTML>
<html manifest="" lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>AndroidSencha</title>
    <script id="microloader" type="text/javascript" src="cordova-2.0.0.js"></script>
    <script id="microloader" type="text/javascript" src="LocalNotification.js"></script>
    <script id="microloader" type="text/javascript">

    function onDeviceReady() {
        if (!window.plugins) {
            window.plugins = {};
        } else if (!window.plugins.LocalNotification) {
            window.plugins.LocalNotification = cordova.require("cordova/plugin/LocalNotification");
        }
    }

    window.document.addEventListener("deviceready", appReady, false);

    function appReady() {
        console.log("PAPA AMERICANO ready");

        var d = new Date();
        d = d.getTime() + 2 * 1000; //60 seconds from now
        d = new Date(d);

        if (!window.plugins) {
            window.plugins = {};
        }

        if (!window.plugins.LocalNotification) {
            window.plugins.LocalNotification = cordova.require("cordova/plugin/LocalNotification");
        }

        window.plugins.localNotification.add({
            date: d,
            message: 'This is an Android alarm using the statusbar',
            id: 123
        });
    }

    </script>
    <style type="text/css">
         /**
         * Example of an initial loading indicator.
         * It is recommended to keep this as minimal as possible to provide instant feedback
         * while other resources are still being loaded for the first time
         */
        html, body {
            height: 100%;
            background-color: #1985D0
        }

    </style>

    <!-- The line below must be kept intact for Sencha Command to build your application -->
    <script id="microloader" type="text/javascript" src="sdk/microloader/development.js"></script>
        <style type="text/css">
.loadingText{
color: white;
font-family: "Avant Garde", Avantgarde, "Century Gothic", CenturyGothic, "AppleGothic", sans-serif;
text-align: center;
font-size: 20px;
padding-top: 10%;
}
</style>
</head>
<body>
    <div id="appLoadingIndicator">
    <div class="loadingText"><div style="margin-bottom: 10px;">Loading, Please wait..</div>
    <div><img src="resources\images\smileloading.gif"></div></div>
    </div>

</body>
</html> 
```

这是我修复后的 localnotificaiton.js（更新 #2）：

```
cordova.define("cordova/plugin/LocalNotification", function(require, exports, module) {      

var exec = require("cordova/exec");
var LocalNotification = function () {};

LocalNotification.prototype.add = function(options) {
            var defaults = {
                date : new Date(),
                message : '',
                ticker : '',
                repeatDaily : false,
                id : ""
            };
        if (options.date) {
                options.date = (options.date.getMonth()) + "/" + (options.date.getDate()) + "/"
                        + (options.date.getFullYear()) + "/" + (options.date.getHours()) + "/"
                        + (options.date.getMinutes());
            }

            for ( var key in defaults) {
                if (typeof options[key] !== "undefined")
                    defaults[key] = options[key];
            }

            cordova.exec(null, null, "LocalNotification", "add",  new Array(defaults));
};

LocalNotification.prototype.cancel = function(notificationId) {
    cordova.exec(null, null, 'LocalNotification', 'cancel', new Array({
        id : notificationId
    }));
};

LocalNotification.prototype.cancelAll = function() {
    cordova.exec(null, null, 'LocalNotification', 'cancelAll', new Array());
};

var LocalNotification = new LocalNotification();
module.exports = LocalNotification
}); 
```

**更新 #1：**我已经将插件添加到 plugins.xml 文件中：

```
<plugins>
...
  <plugin name="LocalNotification" value="com.phonegap.plugin.localnotification.LocalNotification"/>
...
</plugins> 
```

我已经完成了这里提到的步骤[，并替换了这里](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification)[提到](http://simonmacdonald.blogspot.co.il/2012/07/phonegap-android-plugins-sometimes-we.html)的损坏的 java 表达式。

不幸的是，当我运行应用程序时，出现以下错误（在模拟器和设备中）：

> 09-16 16:46:16.330：E/Web 控制台（27875）：未捕获的 ReferenceError：插件未在文件中定义：///android_asset/www/index.html:74

[这个人也面临同样的问题](https://stackoverflow.com/questions/10218745/trying-to-get-the-android-localnotification-plugins-for-phonegap-to-work-in-cord)，但我在 index.html 中引用了 cordova javascript 文件，但它仍然无法正常工作。

这就是我的包资源管理器的样子（您可能会发现缺少一些东西）： *我不确定我是否应该拥有 plugins.xml 或 config.xml 并在其中包含插件，我两者都有以防万一*

![包资源管理器](../Images/ca2eb4541665831dcc1525ba62fa814f.png)

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T01:58:42.203

我更改了 LocalNotification.js，以便您可以复制代码。它适用于cordova 2.0（经过测试！）

```
cordova.define("cordova/plugin/js/LocalNotification", function(require, exports, module) {      

var exec = require("cordova/exec");
var LocalNotification = function () {};

LocalNotification.prototype.add = function(options) {
            var defaults = {
                date : new Date(),
                message : '',
                ticker : '',
                repeatDaily : false,
                id : ""
            };
        if (options.date) {
                options.date = (options.date.getMonth()) + "/" + (options.date.getDate()) + "/"
                        + (options.date.getFullYear()) + "/" + (options.date.getHours()) + "/"
                        + (options.date.getMinutes());
            }

            for ( var key in defaults) {
                if (typeof options[key] !== "undefined")
                    defaults[key] = options[key];
            }

            cordova.exec(null, null, "LocalNotification", "add",  new Array(defaults));
};

LocalNotification.prototype.cancel = function(notificationId) {
    cordova.exec(null, null, 'LocalNotification', 'cancel', new Array({
        id : notificationId
    }));
};

LocalNotification.prototype.cancelAll = function() {
    cordova.exec(null, null, 'LocalNotification', 'cancelAll', new Array());
};

var LocalNotification = new LocalNotification();
module.exports = LocalNotification; 
```

});

*现在你可以调用通知了。和：*

```
 datum = '2012-09-20 15:51:00';  
tt1 = datum.split(/[- :]/);
    dd = new Date(tt1[0], tt1[1]-1, tt1[2], tt1[3], tt1[4], tt1[5]);

window.plugins.LocalNotification.add({ date: dd, message: "Some message", ticker : "Some ticker", repeatDaily : false, id: 1234 }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T23:36:20.400

该插件的 .js 尚未更新到 2.0.0 规范。看看我最近的一篇关于如何编写符合 2.0.0 规范的插件的博客文章。

[http://simonmacdonald.blogspot.ca/2012/08/so-you-wanna-write-phonegap-200-android.html](http://simonmacdonald.blogspot.ca/2012/08/so-you-wanna-write-phonegap-200-android.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T06:43:52.093

检查cordova 2.2 [LocalNotification 2.2的最新插件更新](https://github.com/moumen-o/phonegap-plugins/tree/master/Android/LocalNotification)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T15:14:12.967

使用 window.plugin 而不是单独使用插件，看看会发生什么。

# java - for循环忽略布尔if语句

> ID：12447872
> 
> 赞同：2
> 
> 时间：2012-09-16T14:51:14.193
> 
> 标签：java, android

foreach 循环完全忽略了我的 if 语句。

```
 for(InfoBox infoBox : mAbilities)
        {
            if(infoBox.CheckPressed(event));
            {
                //This is being outputted each time, even if the if statement returns false.
                System.out.println(infoBox.getName());
            }

            System.out.println(infoBox.CheckPressed(event));
            System.out.println(infoBox.getName());
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T14:52:23.103

您已经`if`用分号过早地终止了您的语句：

```
if(infoBox.CheckPressed(event));  // <-- remove the semicolon 
```

这使得下面的块成为一个永远执行的独立块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T14:54:18.327

我想这一定是你无意中所做的事情......

`if(infoBox.CheckPressed(event));`

请**删除**上述声明`semicolon`中的`if`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T15:11:40.423

您应该从 if 语句中删除分号

```
if(infoBox.CheckPressed(event)); 
```

# ios - 键盘和光标显示，但我无法在 UITextFields 和 UITextViews 内输入

> ID：12447875
> 
> 赞同：19
> 
> 时间：2012-09-16T14:51:48.907
> 
> 标签：ios, delegates, keyboard, uitextfield, uitextview

在装有 iOS 6 GM 的 iPad 上。我有 6 个 UITextFields、3 个 UITextViews 和一个触发弹出框/操作表的 UIButton。

当我选择其中一个 UITextFields 或 UITextViews 时，键盘会弹出并出现光标，但我无法输入文本。如果我按下 UIButton 以显示弹出框，然后在其外部点击以将其关闭并返回 UITextFields 或 UITextViews，它们就会起作用。

我有 UITextxxxx.delegate = self; 为所有人设置。在我的 .h 文件中的 xib、UITextFieldDelegate 和 UITextViewDelegate 中选中了“已启用”和“已启用用户交互”以及：

```
- (BOOL)disablesAutomaticKeyboardDismissal {
    return NO;
}

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {

    return YES;

}

- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {

    return YES;

}

- (IBAction)textFieldReturn:(id)sender {

    [sender resignFirstResponder];
}

- (BOOL)textViewShouldBeginEditing:(UITextView *)textView {

    if (textView == notestextView){
        [notestextView becomeFirstResponder];
    }
    if (textView == notestextViewTwo){
        [notestextViewTwo becomeFirstResponder];
    }
    if (textView == notestextViewThree){
        [notestextViewThree becomeFirstResponder];
    }

    return YES;

}

- (BOOL)textViewShouldEndEditing:(UITextView *)textView {

    return YES;

} 
```

我什至尝试 [xxxxxxx becomeFirstResponder]; 在 viewDidLoad 中。这会在运行时弹出键盘并将光标放在字段中，但我仍然无法输入它，直到我点击 UIButton 以显示弹出框。

任何人都知道为什么我不能在字段中输入以及为什么调用弹出框“修复它”？

更新 9/18：我在我的应用程序中推送了一个新视图，该视图只有一个带有文本字段和文本视图的视图。代表已全部成立。相同的行为。键盘和光标出现，但没有打字。这排除了 popovercontroller 搞砸的事情。

我强烈开始认为这是一个 iOS 6 错误。这与我在 iOS 4 和 5 上我的应用程序的 iPhone 版本中的视图几乎相同，而且我从来没有遇到过问题。iPhone 和 iPad 版本之间的唯一区别是图像选择器的呈现方式。您必须为 iPad 使用弹出框。这就是为什么我认为 popover 代表与它有关。

在 iOS 6 中实现 UITextFields 和 UITextViews 之间有什么我不知道的根本区别吗？似乎不太可能。

如果它有助于我的应用程序像这样流动：

> 带有 10 个按钮的主视图
> 
> *   每个按钮通过导航控制器推送一个表格视图
> *   tableviews 推送详细视图 - textfields 和 textviews 表现出上述行为
> *   tableview 也有一个添加按钮，用于推动模态视图以添加新项目 - 文本字段和文本视图表现出上述行为

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-20T00:16:19.950

这最初是基于 iOS 5 构建的 iPhone 应用程序。为了使其成为 iPad 应用程序，我只是复制了该项目并将所有版本升级`.xibs`到 iPad 版本。我不知道这是否是一个错误，或者它是否与升级到 iOS 6 有关，但这样做会使`MainWindow.xib`.

在 MainWindow xib 中，我输入`"MainViewController"`了标题（以前是空白的。）

![在此处输入图像描述](../Images/464f25f42bf1e4b7998565627f241d85.png)

并勾选了`"Visible at Launch"`。即使它在发射时已经可见，但没有检查它会搞砸一些事情。

![在此处输入图像描述](../Images/af3f5926406a139022dee0c0642049da.png)

现在我所有的文本视图和文本字段都可以工作了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-19T14:41:46.880

我遇到了同样的问题，请确保应用程序委托具有`[self.window makeKeyAndVisible]`. 这为我解决了它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T04:57:55.340

对我来说，你的解决方案不起作用，所以我找到了另一个。

我正在使用 Revmob 广告，因此在启动应用程序时会加载全屏视图和横幅视图。Revmob 使用一些人员在我认为这是问题的所有视图控制器中显示相同的横幅。当我禁用 revmob 时，我可以将文本添加到我的文本字段。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T10:08:21.860

这显然是 iOS 6 中的错误。只需放入`[searchBar becomeFirstResponder];`方法`searchBarTextDidBeginEditing`：

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    if (!self.window.isKeyWindow) {
        [self.window makeKeyAndVisible];
    }
} 
```

这个解决方案对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-23T01:33:35.297

为了澄清其他答案，您不能在未设置为关键窗口的窗口中输入文本。大多数应用程序只使用一个窗口，或者在其他窗口上没有文本输入，所以永远不会遇到这个问题。

处理多个窗口时，请确保在切换焦点时按`resignKeyWindow`+ `makeKeyWindow`，非常重要的是，事后恢复关键窗口！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-22T10:44:26.870

这些解决方案对我不起作用，但是在我删除了 中的派生数据文件夹后`~/Library/Developer/Xcode/DerivedData/AppName`，它就起作用了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-13T03:11:30.377

尝试成为FirstResponder`dispatch_async(dispatch_get_main_queue(),^{});`

# mysql - 外部连接问题

> ID：12447876
> 
> 赞同：0
> 
> 时间：2012-09-16T14:51:50.480
> 
> 标签：mysql

我想，我在理解外部联接时遇到了一些问题。这是一个与学校有关的问题；通常我不会在这里问那些，但我似乎无法让它发挥作用。

我有一张桌子`Customer`，其中包括`customerID`和其他客户信息。我还有一张名为 的表`Orders`，其中包括`customerID`、买了什么以及有多少。

现在，我只想列出所有没有购买任何东西的客户，（即他们的客户 ID 不在**Orders**表中。）

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:59:06.033

```
SELECT c.*
FROM Customer c
LEFT JOIN Order o USING (customerID)
WHERE o.customerID IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T14:59:25.037

在这种情况下不需要使用外连接。试试这个

```
Select * From Customer Where CustomerId not in (Select CustomerId in Order) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T15:10:35.533

根据您拥有的索引，有几种方法可以做到这一点：

外连接

```
SELECT a.customerid
FROM   customer a
       LEFT JOIN orders b
              ON ( a.customerid = b.customerid )
WHERE  b.customerid IS NULL 
```

子集查询

```
SELECT customerid
FROM   customer
WHERE  customerid NOT IN (SELECT customerid
                          FROM   orders) 
```

设置差异

```
SELECT customerid
FROM   customer
EXCEPT
SELECT customerid
FROM   orders 
```

第一种方法实际上在性能方面可能是最差的，第三种是我认为最简单的方法，但是您无法检索有关客户的其他信息，第二种方法在性能方面可能与第三种相同，但您仍然可以检索其他客户信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T15:13:16.023

```
Select Customer.* From Customer
Left Join Order on Customer.ID = Order.CustomerID
Where Order.CustomerID is Null 
```

基本上，您选择所有客户，无论他们是否有订单（直接外连接），然后使用 where 过滤掉所有订购了东西的客户。

尝试上面有和没有 where 子句的方法，你会看到的。

PS 不要使用关键字作为表名，这使得编写查询成为 PIA。

# database - 如何在自引用对象中获得最高父级

> ID：12447879
> 
> 赞同：2
> 
> 时间：2012-09-16T14:52:03.903
> 
> 标签：database, linq, entity-framework, entity-framework-4.1

**更新** 这是我与@Slauma讨论过的来自波纹管的评论：

> 因为我需要获取连接到传递的根类别的所有位置。如您所见，如果我通过 2 并且某个位置的类别为 44，而 44 是 32 的子级，即 2 的子级，我需要获取此位置。LocationCategory 是 Locations 和 PlaceCategories 之间的数据库中的 N:N 表。不重要，但可以提供更好的图片。我有一张地图和那张地图上的标记。我可以点击 Education(id:2) 链接，我需要获取位置类别根为“2”的所有标记（如foursquare.com地图上）

我在数据库中有一个自引用表。所以我创建了以下对象：

```
public class PlaceCategory
    {
        public int PlaceCategoryId { get; set; }
        public string Name{ get; set; }
        public int? ParentId { get; set; }

        public virtual PlaceCategory Parent { get; set; }
        public virtual ICollection<PlaceCategory> Children { get; set; }

        public string Icon { get; set; }
    } 
```

因为 Location 对象可以有多个类别，所以我有 LocationCategory 对象：

```
public class LocationCategory
    {
        [Key, Column(Order = 1)]
        public int LocationId { get; set; }
        [Key, Column(Order = 2)]
        public int PlaceCategoryId { get; set; }
        public Guid UserId { get; set; }
        public DateTime CreatedOnDate { get; set; }
        public bool IsPrimary { get; set; }

        public virtual Location Location { get; set; }
        public virtual PlaceCategory PlaceCategory { get; set; }
        public virtual User User { get; set; }
    } 
```

位置对象有：

```
public class Location
{
    ...
    public virtual ICollection<LocationCategory> LocationCategories { get; set; } 
    ... 
```

在自我参考表的数据库中，我有：

```
root: Education (id:2, parentId:null)
child1: School(id:32, parentId:2) 
child2: Elementary(id:42,parentId:32), High(id:43,parentId:32), Higher(id:44,parentId:32) etc. 
```

我必须根据传递的根类别获取位置列表。

```
var model = locationRepository.GetLocationss().Where(x => x.LocationCategories???); // but it's a list and don't know how to check top most parent here? 
```

所以如果我通过'2'，我应该得到所有类别为 2、32、42、43、44 的项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:09:54.737

实体框架不支持这一点，除非您在检索位置时添加`rootCategoryId`到每个`PlaceCategory`属性并过滤该属性，但是一旦您有更深的嵌套，这种方法将失败，您可能需要获取某个非根类别的所有位置（但有自己的父母）。在这种情况下，存储根将无济于事。

这个问题的概括称为分层或递归查询。那就是可以遍历层次结构并获取所有需要的嵌套记录的查询。可以通过使用[通用表表达式别名 CTE](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)（需要 SQL Server 2005 或更高版本）来使用 SQL 执行此操作。您可以创建这样的查询并直接执行它`dbContext.Database.SqlQuery`。

在 EF 5.0 与 .NET 4.5 和 EDMX（数据库优先）的情况下，您还可以在 SQL Server 中将查询实现为表值函数，将其映射到 EDMX 并在 Linq 查询中使用它。

# python - 寻找欧拉之旅

> ID：12447880
> 
> 赞同：8
> 
> 时间：2012-09-16T14:52:10.840
> 
> 标签：python, algorithm, graph, discrete-mathematics

我正在尝试解决 Udacity 上的一个问题，如下所述：

```
# Find Eulerian Tour
#
# Write a function that takes in a graph
# represented as a list of tuples
# and return a list of nodes that
# you would follow on an Eulerian Tour
#
# For example, if the input graph was
# [(1, 2), (2, 3), (3, 1)]
# A possible Eulerian tour would be [1, 2, 3, 1] 
```

我想出了以下解决方案，虽然不像某些递归算法那样优雅，但在我的测试用例中似乎确实有效。

```
def find_eulerian_tour(graph):
    tour = []

    start_vertex = graph[0][0]
    tour.append(start_vertex)

    while len(graph) > 0:
        current_vertex = tour[len(tour) - 1]
        for edge in graph:
            if current_vertex in edge:
                if edge[0] == current_vertex:
                    current_vertex = edge[1]
                elif edge[1] == current_vertex:
                    current_vertex = edge[0]
                else:
                    # Edit to account for case no tour is possible
                    return False

                graph.remove(edge)
                tour.append(current_vertex)
                break
    return tour

graph = [(1, 2), (2, 3), (3, 1)]
print find_eulerian_tour(graph)

>> [1, 2, 3, 1] 
```

然而，当我提交这个时，我被评分员拒绝了。我做错了什么？我看不到任何错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T11:12:47.200

这是您的算法失败的有效案例：

```
graph = [(1, 2), (2, 3), (3, 1), (3, 4), (4, 3)] 
```

使用 的力量`print`找出`graph`和发生了什么`current_vertex`。

另一个提示：`else`向下移动，使其属于`for`并且在`for`循环不中断时执行。像现在这样，它永远无法执行。**在那次更正之后，算法当然仍然失败。**

**当然，算法仍然失败。**

**当然，算法仍然失败。**

请不要评论说代码不起作用。它没有。即使下面的代码符合 OP 的想法，该算法仍然失败。关键是要表明 OP 的算法是错误的，而 OP 无法确定。为此，需要正确实现 OP 算法（见下文）。错误算法的正确实现仍然不是正确的解决方案。

我很抱歉写了所有这些冗长的解释使这个答案变得更糟，但是人们继续抱怨代码不起作用（当然，重点是表明它是错误的）。他们也对这个答案投了反对票，可能是因为他们希望能够复制代码作为解决方案。但这不是重点，重点是向 OP 表明他的算法存在错误。

**下面的代码没有找到欧拉之旅。寻找其他地方复制代码以传递你的assingments！**

```
def find_eulerian_tour(graph):
    tour = []

    current_vertex = graph[0][0]
    tour.append(current_vertex)

    while len(graph) > 0:
        print(graph, current_vertex)
        for edge in graph:
            if current_vertex in edge:
                if edge[0] == current_vertex:
                    current_vertex = edge[1]
                else:
                    current_vertex = edge[0]

                graph.remove(edge)
                tour.append(current_vertex)
                break
        else:
            # Edit to account for case no tour is possible
            return False
    return tour

graph = [(1, 2), (2, 3), (3, 1), (3, 4), (4, 3)]
print(find_eulerian_tour(graph)) 
```

输出：

```
[(1, 2), (2, 3), (3, 1), (3, 4), (4, 3)] 1
[(2, 3), (3, 1), (3, 4), (4, 3)] 2
[(3, 1), (3, 4), (4, 3)] 3
[(3, 4), (4, 3)] 1
False 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-15T23:56:06.210

我也在同一个讲座中，WolframH 的回答对我不起作用。这是我的解决方案（已被评分者接受）：

将所有可能的东西推`next node`入一个堆（`search`），然后在记录时搜索它们中的每一个。

```
def next_node(edge, current):
    return edge[0] if current == edge[1] else edge[1]

def remove_edge(raw_list, discard):
    return [item for item in raw_list if item != discard]

def find_eulerian_tour(graph):
    search = [[[], graph[0][0], graph]]
    while search:
        path, node, unexplore = search.pop()
        path += [node]

        if not unexplore:
            return path

        for edge in unexplore:
            if node in edge:
                search += [[path, next_node(edge, node), remove_edge(unexplore, edge)]]

if __name__ == '__main__':
    graph = [(1, 2), (2, 3), (3, 1), (3, 4), (4, 3)]
    print find_eulerian_tour(graph) 
```

> [1、3、4、3、2、1]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T15:36:21.457

这是您的算法无法处理的情况：4 个顶点上的完整图。在那里坚持一个`print tour`，你得到：

```
>>> cg4 = [(0, 1), (0, 2), (0, 3), (1, 2), (1, 3), (2, 3)]
>>> find_eulerian_tour(cg4)
[0]
[0, 1]
[0, 1, 2]
[0, 1, 2, 0]
[0, 1, 2, 0, 3]
[0, 1, 2, 0, 3, 1]
[0, 1, 2, 0, 3, 1]
[0, 1, 2, 0, 3, 1]
[etc.] 
```

我会让你找到你的方法的问题——你可以很容易地用谷歌搜索一个完整的实现，所以既然你没有，我假设你想要自己弄清楚它的乐趣。:^)

编辑：

嗯。我承认我认为这只是一开始就错过的失败案例。无论如何，@WolframH 击败了我更新的示例，但您也可以查看*5*个顶点的完整图，您的代码在其中给出

```
[0, 1, 2, 0, 3, 1, 4, 0] 
```

并错过了边缘 (2,3)、(2,4) 和 (3,4)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-08T18:47:12.330

这个问题比使用简单递归的上述解决方案更容易解决。

```
def find_eulerian_tour(graph):
    tour=[]
    find_tour(graph[0][0],graph,tour)
    return tour
def find_tour(u,E,tour): 
  for (a,b) in E:
    if a==u:
        E.remove((a,b))
        find_tour(b,E,tour)
    elif b==u:
        E.remove((a,b))
        find_tour(a,E,tour)
  tour.insert(0,u) 
```

此代码适用于任何输入的元组列表并返回游览列表。如果有的话，请发送建议和更改。谢谢@WolframH：如果图中存在任何循环并且输入元组只是为了使您的代码失败，您的代码将不起作用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-30T15:51:28.430

我在 Udacity 上同样的课程。在从 Wikipedia 阅读 Hierholzer 算法后，我实现了它。这是算法的链接[https://en.wikipedia.org/wiki/Eulerian_path](https://en.wikipedia.org/wiki/Eulerian_path)

下面是我的代码。毫无疑问，它被评分者接受了（在做了一些 Python3 到 Python2 的更改之后）。:)

```
#!/usr/bin/env python3
# Find Eulerian Tour
#
# Write a program that takes in a graph
# represented as a list of tuples
# and return a list of nodes that
# you would follow on an Eulerian Tour
#
# For example, if the input graph was
# [(1, 2), (2, 3), (3, 1)]
# A possible Eulerian tour would be [1, 2, 3, 1]

def get_a_tour():
    '''This function returns a possible tour in the current graph and removes the edges included in that tour, from the graph.'''
    global graph

    nodes_degree = {}       # Creating a {node: degree} dictionary for current graph.
    for edge in graph:
        a, b = edge[0], edge[1]
        nodes_degree[a] = nodes_degree.get(a, 0) + 1
        nodes_degree[b] = nodes_degree.get(b, 0) + 1

    tour =[]        # Finding a tour in the current graph.
    loop = enumerate(nodes_degree)
    while True:
        try:
            l = loop.__next__()
            index = l[0]
            node = l[1]
            degree = nodes_degree[node]
            try:
                if (tour[-1], node) in graph or (node, tour[-1]) in graph:
                    tour.append(node)
                    try:
                        graph.remove((tour[-2], tour[-1]))
                        nodes_degree[tour[-1]] -= 1     # Updating degree of nodes in the graph, not required but for the sake of completeness.
                        nodes_degree[tour[-2]] -= 1     # Can also be used to check the correctness of program. In the end all degrees must zero.
                    except ValueError:
                        graph.remove((tour[-1], tour[-2]))
                        nodes_degree[tour[-1]] -= 1
                        nodes_degree[tour[-2]] -= 1
            except IndexError:
                tour.append(node)
        except StopIteration:
            loop = enumerate(nodes_degree)

        if len(tour) > 2:
            if tour[0] == tour[-1]:
                return tour

def get_eulerian_tour():
    '''This function returns a Eulerian Tour for the input graph.'''
    global graph
    tour = get_a_tour()

    if graph:   # If stuck at the beginning, finding additional tour in the graph.
        loop = enumerate(tour[: -1])
        l = loop.__next__()
        i = l[0]
        node = l[1]
        try:
            while True:
                if node in list(zip(*graph))[0] or node in list(zip(*graph))[1]:
                    t = get_a_tour()    # Retreivng the additional tour
                    j = t.index(node)
                    tour = tour[ : i] + t[j:-1] + t[ :j+1] + tour[i+1: ]        # Joining the two tours.
                    if not graph:       # Found Eulerian Tour
                        return tour     # Returning the Eulerian Tour
                    loop = enumerate(tour[: -1])        # Still stuck? Looping back to search for another tour.
                l = loop.__next__()
                i = l[0]
                node = l[1]
        except StopIteration:   # Oops! seems like the vertices in the current tour cannot connect to rest of the edges in the graph.
            print("Your graph doesn't seem to be connected")
            exit()
    else:       # Found the Eulerian Tour in the very first call. Lucky Enough!
        return tour

# Sample inputs
# graph = [(1, 2), (1, 3), (2, 3), (2, 4), (2, 6), (3, 4), (3, 5), (4, 5), (4, 6)]
# graph = [(1, 2), (1, 3), (2, 3)]
# graph = [(1, 2), (1, 3), (2, 3), (2, 4), (2, 6), (3, 4), (3, 5), (4, 5), (4, 6), (9, 10), (10, 11), (11, 9)]
# graph = [(1, 2), (1, 3), (2, 3), (2, 4), (2, 6), (3, 4), (3, 5), (4, 5), (4, 6), (2, 7), (7, 8), (8, 2)]
# graph = [(1, 2), (1, 3), (2, 3), (2, 4), (2, 6), (3, 4), (3, 5), (4, 5), (4, 6), (1, 5), (5, 6), (1, 6)]
# graph = [(1, 2), (2, 3), (3, 1), (3, 4), (4, 3)]
# graph = [(0, 1), (0, 2), (0, 3), (1, 2), (1, 3), (2, 3)]
# graph = [(2, 6), (4, 2), (5, 4), (6, 5), (6, 8), (7, 9), (8, 7), (9, 6)]

# creating a {node: degree} dictionary
nodes_degree = {}
for edge in graph:
    a, b = edge[0], edge[1]
    nodes_degree[a] = nodes_degree.get(a, 0) + 1
    nodes_degree[b] = nodes_degree.get(b, 0) + 1

#checking degree
degrees = nodes_degree.values() # remember it return a view
for degree in degrees:
    if degree % 2:
        print("Your graph have one or more nodes with odd degrees. Hence an Eulerian Tour is impossible.")
        exit()

#finding Eulerian Tour
tour = get_eulerian_tour()
print(tour) 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-07T21:40:56.403

[这是](http://gregorulm.com/finding-an-eulerian-path/)Gregor Ulm 网页中的原始代码，它可以工作。

```
def find_eulerian_tour(graph):

def freqencies():
    # save all nodes of edges to my_list
    # e.g. [3,4,5,1,2,2,3,5]
    my_list = [x for (x, y) in graph]
    # get the max num of nodes-->create a list
    # set all to 0
    # for i in range(5) = 0 1 2 3 4
    # so range("5" +1) means
    # len=6, result=[0,0,0,0,0,0]
    # so that the index = the number itself
    result = [0 for i in range(max(my_list) + 1)]
    # nodes in my_list, increment
    # e.g. [0,1,2,2,1,2] 
    # 3appears 2times.
    for i in my_list:
        result[i] += 1
    return result
    # this is Frequencies of each nodes.

def find_node(tour):
    for i in tour:
        if freq[i] != 0:
            return i
    return -1

def helper(tour, next):
    find_path(tour, next)
    u = find_node(tour)
    while sum(freq) != 0:     
        sub = find_path([], u)
        # get the sub_path
        # add them together
        # when draw to u, turn to sub, and then come back to go on the original tour path
        # [:a], start to a; [a+1:] a+1 to end
        tour = tour[:tour.index(u)] + sub + tour[tour.index(u) + 1:]  
        u = find_node(tour)
    return tour

def find_path(tour, next):
    for (x, y) in graph:
        if x == next:
            # from "double-graph"
            # pop out the current one and its respondent one
            # actually it means we delete this edge
            current = graph.pop(graph.index((x,y)))
            graph.pop(graph.index((current[1], current[0])))
            # now add this "next" node into the tour
            tour.append(current[0])
            # decrement in frequency
            freq[current[0]] -= 1
            freq[current[1]] -= 1
            return find_path(tour, current[1])
    # if this "next" node is not connected to any other nodes
    # single one
    tour.append(next)
    return tour             

# in graph, all edges get reversed one and be added to graph
# can call it "double-graph"  
# it helps to calculate the frequency in find_path
# actually we can regard frequency as degrees for each node       
graph += [(y, x) for (x, y) in graph]
freq = freqencies()   
# set graph[0][0] as starting point
return helper([], graph[0][0])

graph = [(1, 2), (2, 3), (3, 1)]
print find_eulerian_tour(graph) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-28T21:58:11.260

尽管代码对于无向图失败，但在有向图上运行得非常好。从 Udacity 的角度来看，它仍然不能解决手头的问题，但可以被视为相同的低版本。请不要介意使用不当的 Python，因为我还是该语言的新手。

* * *

底部添加了两个相当复杂的测试场景。

* * *

```
initialNode = ''
nglength = 0
in_graphLength = 0
normalizedGraph = list()
path = []
node_dict = {}
mod_flag = ''

def find_eulerian_tour(graph):
    global in_graphLength
    in_graphLength = len(graph)
    graph = normalize_graph(graph,[],-1,len(graph))
    print (path)
    return path
def normalize_graph(graph,nG,remNode,length):
    counter = 0
    global path
    global initialNode
    global in_graphLength
    global nglength
    global normalizedGraph
    localGraph = list()
    path = []
    pathList = []
    if(remNode != -1):
        normalizedGraph = nG
    baseNode = 0
    if(len(normalizedGraph) != 0):
        ini1, ini2 = normalizedGraph[0]
        initialNode = ini1
        a1,b1 = normalizedGraph[len(normalizedGraph) - 1]
        baseNode = b1
        if(remNode != -2):
            graph.pop(remNode)
    if(remNode == -1):
        a,b = graph[0]
        baseNode = b
        normalizedGraph.append(graph[0])
        initialNode = a
        nglength = 1
        graph.pop(0)
    i = 0
    if(len(graph) != 0):
        for n1, n2 in graph:
            i = i + 1
            if(n1 == baseNode):
                localGraph = graph[:]
                if(isJunction((n1,n2),localGraph, nglength)):
                    graph.pop(i-1)
                    graph.append((n1,n2))
                    normalize_graph(graph, normalizedGraph, -2,in_graphLength)
                    break
                else:
                    normalizedGraph.append((n1, n2))
                    nglength = nglength + 1
                    normalize_graph(graph, normalizedGraph, i - 1,in_graphLength)
                    break

    else:
        if( counter == 0):
            counter = counter + 1
            a0, b0 = normalizedGraph[0]
            for n1, n2 in normalizedGraph:
                path.append(n1)
            path.append(a0)
            path = path
            return path

def isJunction((n1,n2), graph, nglength):
    global node_dict
    count = 0
    if(len(graph) > 1):
        for a1, a2 in graph:
            if (n1 == a1):
                count = count + 1
        if (count > 1):
            if(str(n1) not in node_dict):
                key = str(n1)
                node_dict[key] = count
            else:
                return handle_degree(n1)
            return modification_needed((n1, n2), graph, nglength)
        else:
            return False
    else:
        return False

def handle_degree(n1):
    global node_dict
    key = str(n1)
    if(node_dict.get(key) == 2):
        return False

def modification_needed((n1,n2),graph, tmplength):
    i = 0
    global mod_flag
    if( n2 == initialNode):
        return True
    if(len(graph) > 1):
        for b1, b2 in graph:
            if(n2 == b1):
                i = i + 1
                tmplength = tmplength + 1
                if (b1,b2) in normalizedGraph:
                    mod_flag = True
                    continue
                if(tmplength < in_graphLength and b2 == initialNode):
                    mod_flag = True
                    continue
                else:
                    graph.pop(i-1)
                    modification_needed((b1,b2),graph,tmplength)
    return mod_flag

#find_eulerian_tour([(1,2),(2,6),(7,2),(6,1),(2,3),(3,5),(3,4),(4,5),(5,7),(7,3),(5,6),(6,7)])
#find_eulerian_tour([(0,4),(1,0),(4,2),(4,8),(2,5),(9,5),(8,9),(5,4),(5,1),(7,1),(3,7),(1,6),(6,3)]) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-17T08:27:18.277

您可以模仿 BFS 算法的行为并搭载它。

注意：我没有尝试使用链表编写答案，因为链表需要定义 2 个类（一个定义节点及其行为，一个定义整个链表及其行为）。但是，为了提高（追加）​​和（删除）行为的效率，您应该使用链表而不是数组：

```
def find_eulerian_tour(graph):
    nodes = set()

    for i in graph:
        if not i[0] in nodes:
            nodes.add(i[0])
        if not i[1] in nodes:
            nodes.add(i[1])

    tour = []
    tempstack = []
    graphtemp = []

    current_vertex = graph[0][0]
    tour.append(current_vertex)
    tempstack.append(current_vertex)
    last_edge = ()
    count = 0

    while len(set(tempstack)) + 1 < len(nodes) or (count == 0 or tour[0] != tour[len(tour) - 1]):
        count += 1
        flag = False
        for edge in graph:
           if current_vertex in edge and edge != last_edge:
                if current_vertex == edge[0]:
                    current_vertex = edge[1]
                else:
                    current_vertex = edge[0]
                last_edge = edge
                graphtemp.append(edge)
                graph.remove(edge)
                tour.append(current_vertex)
                tempstack.append(current_vertex)
                flag = True
                break

        if flag == False:
            tour.remove(current_vertex)
            current_vertex = tempstack[0]
            tempstack.remove(tempstack[0])
            graph.append(graphtemp[0])
            graphtemp.remove(graphtemp[0])

    return tour

print find_eulerian_tour([(1,2), (2,3), (3,1)])
print(find_eulerian_tour([(0, 1), (1, 5), (1, 7), (4, 5), (4, 8), (1, 6), (3, 7), (5, 9), (2, 4), (0, 4), (2, 5), (3, 6), (8, 9)]))
print(find_eulerian_tour([(1, 13), (1, 6), (6, 11), (3, 13), (8, 13), (0, 6), (8, 9),(5, 9), (2, 6), (6, 10), (7, 9), (1, 12), (4, 12), (5, 14), (0, 1),  (2, 3), (4, 11), (6, 9), (7, 14),  (10, 13)]))
print(find_eulerian_tour([(8, 16), (8, 18), (16, 17), (18, 19), (3, 17), (13, 17), (5, 13),(3, 4), (0, 18), (3, 14), (11, 14), (1, 8), (1, 9), (4, 12), (2, 19),(1, 10), (7, 9), (13, 15), (6, 12), (0, 1), (2, 11), (3, 18), (5, 6), (7, 15), (8, 13), (10, 17)])) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-15T11:05:33.417

该解决方案针对**O(V+E)**复杂度进行了优化，即图中边和顶点的数量呈线性

对于那些直接希望查看代码的人：[https ://github.com/cubohan/py-algos/blob/master/eulerian_tour.py](https://github.com/cubohan/py-algos/blob/master/eulerian_tour.py)

请注意，代码主要违反了可读性和 DRY 设计，但在阅读说明后，您可以轻松制作自己的版本。

```
# eulerian_tour.py by cubohan
# circa 2017
#
# Problem statement: Given a list of edges, output a list of vertices followed in an eulerian tour
#
# complexity analysis: O(E + V) LINEAR

def find_eulerian_tour(graph):
    edges = graph
    graph = {}
    degree = {}
    start = edges[0][0]
    count_e = 0
    for e in edges:
        if not e[0] in graph:
            graph[e[0]] = {}
        if not e[0] in degree:
            degree[e[0]] = 0
        if not e[1] in graph:
            graph[e[1]] = {}
        if not e[1] in degree:
            degree[e[1]] = 0
        graph[e[0]][e[1]] = 1
        graph[e[1]][e[0]] = 1
        degree[e[0]] += 1
        degree[e[1]] += 1
        count_e += 1
    max_d = 0
    this_ = 0
    for v, d in degree.items():
        if not d%2 == 0:
            # Eulerian tour not possible as odd degree found!
            return False 
        if d>max_d:
            this_ = v
            max_d = d
    visited_e = {}
    def is_visited(i, j):
        key = str(sorted([i,j]))
        if key in visited_e:
            return True
        else:
            visited_e[key] = True
            return False
    start = this_
    route = [start]
    indexof = {}
    indexof[start] = 0
    while count_e>0:
        flag = False
        for to_v in graph[this_]:
            if not is_visited(to_v, this_):
                route.append([to_v])
                indexof[to_v] = len(route)-1
                degree[to_v] -= 1
                if degree[to_v] == 0:
                    del degree[to_v]
                degree[this_] -= 1
                if degree[this_] == 0:
                    del degree[this_]
                this_ = to_v
                flag = True
                count_e -= 1
                break
        if not flag:
            break
    for key, v in degree.items():
        if v <=0:
            continue
        try:
            ind = indexof[key]
        except Exception as e:
            continue
        this_ = key
        while count_e>0:
            flag = False
            for to_v in graph[this_]:
                if not is_visited(to_v, this_):
                    route[ind].append(to_v)
                    degree[to_v] -= 1
                    degree[this_] -= 1
                    this_ = to_v
                    flag = True
                    count_e -= 1
                    break
            if not flag:
                break
    route_ref = []
    for r in route:
        if type(r) == list:
            for _r in r:
                route_ref.append(_r)
        else:
            route_ref.append(r)
    return route_ref

if __name__ == "__main__":
    print find_eulerian_tour([(0, 1), (1, 5), (1, 7), (4, 5),(4, 8), (1, 6), (3, 7), (5, 9),(2, 4), (0, 4), (2, 5), (3, 6), (8, 9)]) 
```

**首先问题可以分为这些子任务：**

1.  将图形构建成比边列表更友好的结构，以便于处理，即（邻接列表）

2.  找到每个顶点的度数以首先检查是否可能进行欧拉之旅（是否只有偶数度？另外，将这些值存储在以顶点为键的字典中 => 以供以后使用）

3.  构建欧拉之旅

我的解决方案背后的概念很简单。

1.  您选择度数最高的顶点作为起点并将其设置为当前顶点。（注意：您在计算每个顶点的度数时同时完成此操作。您将所有这些度数存储在字典中。）

2.  您在路由列表中插入当前顶点，这是您的答案（注意：还要在路由列表中创建一个顶点字典及其索引。这将在稍后使用。）

3.  如果尚未访问，则访问当前顶点的第一条边。（注意：维护了访问边的字典，该字典的键是构成边的一对顶点的排序元组。访问边后，通过将其插入字典来标记它已访问。）

4.  您维护当前顶点和访问顶点的剩余度数（这将在以后证明很有用）（注意：您只需在每次选择边之前从生成的度数中减去 1）

5.  您将当前顶点切换到您决定访问的边的另一端的顶点。

6.  重复步骤 2-5，直到在当前顶点中找不到未访问的边。（注意：这意味着您已经返回到起始顶点）

现在考虑这一点：请注意，任何未访问的边/顶点将构成主图中的子图，这些子图具有与主图相同的属性，即欧拉之旅可以从子图中的任何顶点开始和结束于同一顶点。

因此，可以通过在这些子图中进行欧拉之旅来访问所有未访问的边。您只需要将这些子之旅与第一个之旅合并。

**下一个：**

1.  当且仅当此顶点的缩减度不为零时，您循环遍历图形的所有顶点并在与主游览列出的相同过程中构建子游览

2.  这些游览将与之前计算的路线列表合并的方式是，您将考虑从路线列表中开始子游览的顶点的位置替换为子游览输出列表，然后展平此路线列表

我们还没有完成！上面有什么问题？

当您得到一个尚未访问且不在路线列表中的非零度顶点时会发生什么？！

**警告：** 这是一个例外情况。

您可能会遇到以前未访问过的顶点，因此它们不会出现在主路由列表中。

循环时忽略这些！您已经访问过的具有非零缩减度的顶点之一是保证在您将从这些顶点开始创建的子游览中引导这些顶点。

**这怎么可能？？！！**

从代码链接中给出的测试用例中绘制图表，您就会明白。追踪您的算法在流程的每一步都在做什么。画出来！图像的理解复杂度为 log(N)，单词的复杂度为 O(n2)。

啊，请注意，只有当输入列表中的所有边都形成一个图而不是两个单独的不相交图时，这个保证才成立。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-16T09:12:19.347

如果我们这样做呢？（刚刚检查过，它通过了 udacity 测试！！）

```
import itertools
def create_tour(alist):
    return list(itertools.permutations(alist,2)) 
```

# jquery - jQuery | 用户滚动时显示 div

> ID：12447881
> 
> 赞同：0
> 
> 时间：2012-09-16T14:52:19.323
> 
> 标签：jquery, scroll, hide, show

我正在寻找一种解决方案，以在用户（水平）滚动时显示 div 并在用户停止滚动时隐藏 div。我发现一些代码显示了一个 div 但滚动后没有隐藏它。

```
 $(function(){
tiles = $("ul#tiles li").fadeTo(0, 0);

$(window).scroll(function(d,h) {
    tiles.each(function(i) {
        a = $(this).offset().top + $(this).height();
        b = $(window).scrollTop() + $(window).height();
        if (a < b) $(this).fadeTo(500,1);
    });
});

});//]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:51:15.880

因为您`fadeTo(0,0)`只运行一次，滚动完成后不再运行。

您可以为事件添加事件处理程序`scroll`并启动超时。就像是：

```
var timer = null;
$(window).addEventListener('scroll', function() {
    if(timer !== null) {
        clearTimeout(timer);        
    }
    timer = startTimeout(function() {
          // do something
    }, 150);
}, false); 
```

这将启动超时并等待 150 毫秒。如果在此期间发生了新`scroll`事件，则中止计时器并创建新事件。如果没有，该函数将被执行。您可能需要调整时间。

另请注意，IE 使用不同的方式附加事件侦听器，这应该是一个很好的介绍：[quirksmode - Advanced event registration models](http://www.quirksmode.org/js/events_advanced.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:10:26.913

我不太确定，但也许这会奏效？

```
 $(function(){
tiles = $("ul#tiles li").fadeTo(0, 0);

$(window).scroll(function(d,h) {
    tiles.each(function(i) {
        a = $(this).offset().top + $(this).height();
        b = $(window).scrollTop() + $(window).height();
        if (a < b) 
           $(this).fadeTo(500,1);
        else
          $(this).fadeOut();
    });
});

});//]]> 
```

# c++ - cout 没有输出正确的数据

> ID：12447883
> 
> 赞同：0
> 
> 时间：2012-09-16T14:52:26.300
> 
> 标签：c++, integer, cout, fibonacci

我用 C++ 编写了一个程序来输出你告诉它的斐波那契数列中的数字。它一直工作到大约第 47 个数字，之后它会打印出完全不同的数字，甚至是负数，而且它们都没有超过 9 或 10 个单独的整数。这是代码

```
#include <iostream>

int a = 0;
int b = 1;
int c;
int var = 0;
int num;

void fibonacci()
{
     using namespace std;
     c = a;          
     a = a + b;           
     b = c;
     var += 1;
}

void loop()
{    
    using namespace std;
    for (int iii=0; iii<num; iii++)
    fibonacci();
}

int main()
{
    using namespace std;
    cout << "What fibonacci number do you want to know? ";
    cin >> num;
    cin.get();
    loop();
    cout << "" << endl;
    cout << c << endl;
    cin.get();

    a = 0;
    b = 1;
    var = 0;

    return main();
} 
```

c++ 一次可以打印多少个字符是否有某种限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T14:55:19.293

`Fib(47) = 2971215073`大于`2147483647`。

`std::numeric_limits<int>::max() == 2^31 - 1 == 2147483647`在你的情况下。

因此，您的结果整数在 处溢出`num == 47`。

@jogojapan 补充说：

> sizeof(int) 是 4 字节（即在许多平台上），即 32 位。2^31-1 [numeric_limits::max()] 是可以使用 int 表示的最大数字（在那些平台上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:56:20.853

将您的数据类型大小/容量从 an`int`增加到 an`unsigned long`或`unsigned long long`。这些中的每一个都有一个大小，当超过该大小时，会创建一个位模式，这将创建一个几乎肯定不正确的值。此外，由于您的数字永远不会是负数，因此允许将数字的部分大小用于负值（有点）会浪费您可以表示的最大数字。

此外，您应该添加一个检查来检测这种情况。如果该算法中的某个值下降，则您显然超出了数据类型的限制。此时，打印一个礼貌错误，您无法计算该数字，因为它太大了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T14:55:28.887

你的整数溢出了。谷歌“整数溢出”和一个有符号整数的容量。尝试将其更改为无符号整数，您会注意到它会以更高的数字溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T17:42:35.323

这是我在 C 中输出 Fabonica 系列的代码：

```
 #include<stdio.h>
    int main(){
    int k,r;
    long int i=0l,j=1,f;

    //Taking maximum numbers form user
    printf("Enter the number range:");
    scanf("%d",&r);

    printf("FIBONACCI SERIES: ");
    printf("%ld %ld",i,j); //printing firts two values.

    for(k=2;k<r;k++){
         f=i+j;
         i=j;
         j=f;
         printf(" %ld",j);
    }

    return 0;
} 
```

*样本输出：*

输入数字范围：15

斐波那契系列：0 1 1 2 3 5 8 13 21 34 55 89 144 233 377

**在 c 中使用数组的斐波那契数列**

```
 #include<stdio.h>
int main(){
int i,range;
long int arr[40];

printf("Enter the number range: ");
scanf("%d",&range);

arr[0]=0;
arr[1]=1;

for(i=2;i<range;i++){
     arr[i] = arr[i-1] + arr[i-2];
}

printf("Fibonacci series is: ");
for(i=0;i<range;i++)
     printf("%ld ",arr[i]);

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-16T14:55:34.257

这不是因为 cout 可以处理的位数有限制。这是因为你的数字太大而无法适应`int`。尝试使用`long`or和。`long long`_ [这](http://www.cplusplus.com/doc/tutorial/variables/)是关于不同数据类型的一个很好的参考。`a``b``c`

# mongodb - 更改 Mongodb 的配置服务器：为什么要指定特定的顺序？

> ID：12447884
> 
> 赞同：1
> 
> 时间：2012-09-16T14:52:39.547
> 
> 标签：mongodb, config

所以我正在阅读有关更改配置服务器的文档：
[http ://www.mongodb.org/display/DOCS/Changing+Config+Servers](http://www.mongodb.org/display/DOCS/Changing+Config+Servers)

虽然我同意此操作的步骤顺序：
**重命名配置服务器 - 不同的主机名**
如果您希望在 --configdb 选项中使用不同的名称或 IP 地址，那么这适用于您。

1.  关闭要移动的配置服务器
2.  将数据移动到新机器
3.  启动新的配置服务器
4.  关闭所有进程（mongod、mongos、配置服务器）。
5.  *重新启动 mongod 进程。*

7.  *使用新的 --configdb 参数重新启动 mongos 进程。*

是否有任何具体原因需要颠倒最后两个步骤的顺序：
**从一个配置服务器升级到三个**
不幸的是，您需要关闭整个系统。

1.  关闭所有进程（mongod、mongos、配置服务器）。
2.  将数据子目录（dbpath 树）从配置服务器复制到新的配置服务器。
3.  启动配置服务器。
4.  *使用新的 --configdb 参数重新启动 mongos 进程。*

6.  *重新启动 mongod 进程。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T00:33:16.843

一般来说，我们建议在配置服务器启动`mongos`之后启动。`mongod`在这一点上，我们已经使文档保持一致。

# php - NetBeans PHP 内置 Web 服务器 - 重写

> ID：12447889
> 
> 赞同：3
> 
> 时间：2012-09-16T14:53:01.940
> 
> 标签：php, .htaccess, netbeans, url-rewriting, webserver

我在 Windows 7 上使用 NetBeans IDE 7.2。

我需要为我的网络项目设置一些重写规则。

我可以使用自定义`.htaccess`文件（或类似文件）`PHP built-in web server`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T15:03:55.690

开箱即用，内置服务器没有提供这些东西，它只是用于开发，而且还很年轻。

您仍然可以欺骗环境使其像那样运行。例如：[https ://gist.github.com/3057918](https://gist.github.com/3057918)

# android - 我对 Android 中的服务感到困惑

> ID：12447890
> 
> 赞同：0
> 
> 时间：2012-09-16T14:53:22.090
> 
> 标签：android, android-service, android-alarms

我有一个很大的程序，它有很多表格并且可以使用数据库等。我有一个警报作为我的程序的一部分。当我在 10-20 秒后发出警报并清理内存（在任务管理器中）时，警报会触发一个事件（即使时间尚未到来）。如果我将警报作为独立软件运行 - 它运行完美！

难道警报不能成为程序的一部分吗？或者可能是什么问题？

这就是我使用警报的方式：

```
 MY_Day=1;
    Intent myIntent = new Intent(MyService.this, MyAlarmService.class);
    pendingIntent = PendingIntent.getService(MyService.this, 0, myIntent, 0);
    AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.HOUR_OF_DAY, MY_Houre);
    cal.set(Calendar.MINUTE, MY_Minute);
    cal.set(Calendar.SECOND, 0);
    Total_Time = MY_Day * AlarmManager.INTERVAL_DAY;
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), Total_Time, 
pendingIntent); 
```

这是我的服务：

```
public class MyAlarmService extends Service {
@Override
public void onStart(Intent intent, int startId) {
super.onStart(intent, startId);
    Toast toast = Toast.makeText(getApplicationContext(), "MyEvent",   Toast.LENGTH_LONG);
   toast.setGravity(Gravity.CENTER, 0, 0);
   LinearLayout toastView = (LinearLayout) toast.getView();
   ImageView imageCodeProject = new ImageView(getApplicationContext());
   imageCodeProject.setImageResource(R.drawable.koko);
   toastView.addView(imageCodeProject, 0);
   toast.show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:11:11.080

重新考虑您的代码并阅读[Vogella 服务教程](http://www.vogella.com/articles/AndroidServices/article.html)以获取有关服务的更多信息。

# javascript - 为什么我不能解析这个 JSON？

> ID：12447892
> 
> 赞同：1
> 
> 时间：2012-09-16T14:53:23.930
> 
> 标签：javascript, jquery, json

我有以下 JSON 字符串：

```
var billjson = "({'posts' : [{'Id' :'      7553','Code' :'1186 ','Address' :' GGGG 39Α                    ','Name' : ' GGGG NAME 3                               ','Description' : ' G 3    ','EntrySeason' : ' GGGGG 08-09      ','Period' : ' 10/2009   ','Revenue' : '      4.10'},{'Id' :'      7553','Code' :'1186 ','Address' :' GGGG 39Α                    ','Name' : ' FFFF NAME 3                               ','Description' : ' F 3    ','EntrySeason' : ' FFFF 08-09      ','Period' : ' 10/2009   ','Revenue' : '      4.10'}]})" 
```

我正在尝试使用以下代码创建一个 JSON 对象：

```
var mybilljson = jQuery.parseJSON( billjson ); 
```

但控制台的结果是：

> 未捕获的无效 JSON：

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T14:54:38.017

字符串文字和属性名称必须在 JSON 中使用双引号，但您使用的是单引号。括号也不允许在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T14:59:42.123

删除括号以获得有效的 JSON。此外，您必须使用双引号：

```
var billjson= '{"posts": [{"Id": "7553","Code": "1186","Address": "GGGG39Α","Name": "GGGGNAME3","Description": "G3","EntrySeason": "GGGGG08-09","Period": "10/2009","Revenue": "4.10"},{"Id": "7553","Code": "1186","Address": "GGGG39Α","Name": "FFFFNAME3","Description": "F3","EntrySeason": "FFFF08-09","Period": "10/2009","Revenue": "4.10"}]}';
var mybilljson = jQuery.parseJSON( billjson ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T14:56:50.027

除了在字段名称和字符串值周围使用单引号而不是双引号之外，您的 JSON 字符串由于周围的括号而无效：`()`.

杀死周围的括号并将单引号更改为双引号：

```
var billjson = '{"posts" : [{"Id" :"      7553","Code" :"1186 ", ... 
```

# html - 在 Phonegap 中打包并在 WP7 上打开后的图像大小减半

> ID：12447897
> 
> 赞同：-1
> 
> 时间：2012-09-16T14:53:34.273
> 
> 标签：html, css, windows-phone-7, cordova, cordova-2.0.0

我使用以下代码排列了一系列图像。

每个图像的 HTML 类似于...

```
 <div class="hover panel">
    <div class="front">
        <img src="breeds/Bluefaced_Leicester.jpg" />
    </div>
    </div> 
```

CSS是...

```
 .panel {
        float: left;
        width: 220px;
        height: 220px;
        margin: 0px;
        padding: 7px;
        position: relative;
        font-size: .8em;
        margin-left: auto;
        margin-right: auto;
        -webkit-perspective: 600px;
    }
    .panel img {
        width: 100%;
    } 
```

这是我在 480x800 Web 窗口上预览时的样子...

![在此处输入图像描述](../Images/746f7880165ec5be8881a01c3a9b2295.png)

这是它在 WP7 模拟器上的样子......

![在此处输入图像描述](../Images/228e3334fffbd615d4d75704909e1a5a.png)

如何确保图像在 WP7 上显示为 220 像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:01:08.773

我对这个问题的解决方案是将应用程序中所有元素的像素大小加倍。不是最好的解决方案，但它有效。

# ruby-on-rails - 如何从 Ruby/非 ruby 混合字符串创建 link_to

> ID：12447898
> 
> 赞同：0
> 
> 时间：2012-09-16T14:53:38.000
> 
> 标签：ruby-on-rails, view

在我的视图文件 (*.html.erb) 中，我想创建一个显示两个模型数据点（名称和投票数）的链接。对于有五票的 Bobby，它在图形上看起来像： [Bobby(5)](http://bobbysurl.com)。

鉴于我要显示的字符串包含非红宝石括号，我如何使用 link_to 执行此操作？

在把它变成一个链接之前，代码是，

```
<%= user.name %>(<%= link.user.reputation_value_for(:votes).to_i %>) 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:07:19.877

`link_to`能够接受块，例如：

```
<%= link_to user do %>
    <%= user.name %>(<%= link.user.reputation_value_for(:votes).to_i %>)
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:07:49.867

尝试这个：

```
<%= link_to "#{user.name}(#{user.reputation_value_for(:votes).to_i})", whatever_path %> 
```

当构建一个包含 ruby​​ 代码的字符串时，只需正常输入并将所需的 ruby​​ 代码放在其中：#{}

当页面加载时，首先编译erb并在我上面的字符串中

```
#{user.name} 
```

将替换为 Bobby 和

```
#{user.reputation_value_for(:votes).to_i} 
```

将被替换为 8（如果那是他的声誉值）给你

[鲍比(8)](http://bobbysurl.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T15:08:47.023

您可能希望考虑一种 MVC 方法，将计算逻辑放在模型中并从控制器调用它。

这样，我将从模型开始。

我会考虑用户、链接和投票模型。投票将是连接表，并且需要一个迁移，将两个外键添加到它（`user_id`和`link_id`），

```
User
  has_many votes
  has_many :links, :through => :votes

Link
  has_many_votes
  has_many_users, :through => :votes
  def votes_by_user
    user.votes
  end

Vote
  belongs_to :user
  belongs_to :link 
```

然后在链接控制器中我会有

（在 1 个链接的显示方法中）

```
@link = Link.find(params[:id]) 
```

在显示视图中，我将拥有：

```
@link.users.each do |one_user|    
  link_to one_user, "#{link.user.name}(#{link.votes_by_user(one_user)}")
end 
```

对于链接的索引方法，将其全部包装在迭代中，例如

（指数法）

```
@links=Link.all 
```

（看法）

```
<%- @links.each do |one_link|  %>
  <%- one_link.users.each do |one_user| %>   
    <%= link_to one_user, "#{link.user.name}(#{link.votes_by_user(one_user)}") %>
  <%- end %>
<%- end %> 
```

# android - 我有一个关于 android listView 和 baseAdapter 的奇怪情况？

> ID：12447901
> 
> 赞同：1
> 
> 时间：2012-09-16T14:54:09.303
> 
> 标签：android, list, listview, baseadapter

这是我的代码：

```
public class MyAdapter extends BaseAdapter{
    private LayoutInflater mInflater;
    ViewHolder holder = null;

    public MyAdapter(Context context){
        this.mInflater = LayoutInflater.from(context);
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mData.size();
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        /**Original holder
         * 
         * 
         * */
        //ViewHolder holder = null;
        if (convertView == null) {

            holder=new ViewHolder();  
            convertView = mInflater.inflate(R.layout.country_list_row, null);
            holder.countryName=(TextView)convertView.findViewById(R.id.country_text);
            holder.check = (CheckBox)convertView.findViewById(R.id.country_check);
            convertView.setTag(holder);

        }else {                 
            holder = (ViewHolder)convertView.getTag();

        }
        holder.check.setTag(new Integer(position));

        Log.v("In CountryList","mData.get("+position+").get(country) = "+(String)mData.get(position).get("country"));       

        holder.countryName.setText((String)mData.get(position).get("country"));
        if (position == countryIndex){
            Log.v("In CountryList onCreate","before setChecked(true), countryIndex=="+countryIndex);       
            Log.v("In CountryList onCreate","before setChecked(true), position=="+position);       
            holder.check.setChecked(true);
        }else{
            Log.v("In CountryList onCreate","setChecked(false), countryIndex=="+countryIndex);       
            Log.v("In CountryList onCreate","setChecked(false), position=="+position);       
            holder.check.setChecked(false);
        }

        holder.check.setOnCheckedChangeListener(new myCheckBoxListener(position));

        return convertView;
    }

} 
```

我发现这个位置一直在从 0 到 8 循环。但是，我也可以使用 "(String)mData.get(position).get("country")" 从 mData 中获取正确的对象，而无需重复。谁能告诉我为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:39:09.010

看看这个：[绝对位置在 GrivView 的 BaseAdapter](https://stackoverflow.com/questions/8314859/absolute-position-in-baseadapter-of-grivview)

顺便说一句，您的列表视图一次显示大约 7-9 行吗？

# c - 未定义对 `__time32` ncurses 的引用

> ID：12447904
> 
> 赞同：1
> 
> 时间：2012-09-16T14:54:36.467
> 
> 标签：c, gcc, mingw, codeblocks, ncurses

**背景：**我正在学习如何使用ncurses来实现一个简单的roguelike游戏。

一开始，我一直在无耻地从教程网站复制代码，以便正确设置 IDE，但在所有示例中，我都遇到了同样的错误：

**lib\libncursesw.a(lib_twait.o):lib_twait.c|| 未定义的引用``__time32`'**

其他错误也在 libncursesw.a 中（twait.c 和 iterator.c）

**我尝试了什么：** -lncurses，-llibcurses --lcurses 切换链接器（MinGW with gcc）无济于事（错误说他们找不到-lxxxx）

我将 libncursesw.a 包含在库中（在 code::blocks 内）

如果您想知道我正在使用的代码是什么（或者无论如何它会有所帮助），那就是：

```
#include <stdlib.h>
#include <stdio.h>
#include <ncurses.h>

int main()
{
initscr();          /* Start curses mode */
printw("Hello World !!!");  /* Print Hello World*/
refresh();          /* Print it on to the real screen */
getch();            /* Wait for user input */
endwin();           /* End curses mode */

return 0;
} 
```

任何帮助将不胜感激 - 这些事情总是我无法跨越的唯一障碍......

**编辑**

这些是编译器调用：

对于 main.o：

`mingw32-gcc.exe -Wall -O2 -IC:\Users\User\CBProjects\rogue\include -c C:\Users\User\CBProjects\rogue\main.c -o obj\Release\main.o`

对于可执行文件：

`mingw32-g++.exe -o bin\Release\rogue.exe $(OBJS_RELEASE) -s lib\libncursesw.a lib\libncursesw.a`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:08:07.567

首先，您应该使用**gcc**而不是**g++**来生成 exe 文件。

__time32 是一个 Windows 系统函数。Ming 通常会找到必要的库，但有时确切的链接命令很重要。有关类似情况，请参见[http://www.digipedia.pl/usenet/thread/12692/4948/ 。](http://www.digipedia.pl/usenet/thread/12692/4948/)

# python - 使用用户提供的模式搜索和提取日期

> ID：12447907
> 
> 赞同：0
> 
> 时间：2012-09-16T14:55:18.783
> 
> 标签：python, regex, django, datetime, date-format

我正在编写一个 django 应用程序来收集和分析来自各种不同应用程序的日志文件。我希望用户能够提供日期格式或匹配日期格式的正则表达式，以便我可以跟踪文件的开始和结束时间。

我宁愿不让用户同时提供正则表达式和日期格式，但我认为没有办法解决它。

我想提取文件中的第一个和最后一个日期时间，并将其解析为 python 中的日期时间对象。正如我所说，日期的格式将以某种方式由用户提供。

有没有办法从日期格式构建正则表达式，反之亦然？还是我只需要格式和模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:59:54.250

如果您的用户可以提供[strptime](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)格式的日期格式，则也无需使用正则表达式。`strptime`足够灵活，可以处理大多数日期格式。

**编辑**

由于`strptime`不允许搜索任意文本，因此您可能需要一个正则表达式。将 strptime 模式转换为正则表达式并非易事，但 Fredrik Lundh 为您做到了。你可以在这里找到代码：http: [//effbot.org/librarybook/time.htm](http://effbot.org/librarybook/time.htm)

查找短语：“示例：strptime 实现”

# nsstring - 十六进制到 NSString 缩放 0x40 字节

> ID：12447912
> 
> 赞同：0
> 
> 时间：2012-09-16T14:55:35.670
> 
> 标签：nsstring, char, hex, byte

第二天试图从按 0x40 字节缩放的字节值中获取字符

我正在尝试从 Logic Pro/Mackie Control 获取十六进制值。

逻辑向我发送 0xE，这意味着这是“n”。如果它向我发送“4e”，则意味着我应该在显示屏上绘制“n”。（只需在末尾添加点）。

这是将字符转换为字节的公式。请帮我制作反之亦然的公式。

```
char translate_seven_segment( char achar )
{
    achar = toupper( achar );
    if ( achar >= 0x40 && achar <= 0x60 )
        return achar - 0x40;
    else if ( achar >= 0x21 && achar <= 0x3f )
        return achar;
    else
        return 0x00;
}

char s = 'N';
    Byte ad = translate_seven_segment( s ) + ( '.' == '.' ? 0x40 : 0x00 ); 
```

我还发现了以下代码（这似乎没有 topper()）：

```
def translate_seven_segment( char )                      
    case char                                       
      when 0x40..0x60                                   
        char - 0x40                                     
      when 0x21..0x3f                                    
        char                                         
      else                                        
        0x00                                         
    end                                        
  end 
```

我怎样才能扭转它？我知道 mackie 使用此代码从 char 构建十六进制。但我需要反之亦然，就是从十六进制中获取字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:19:22.050

好的，我看到你添加了关于想要反转序列的注释。如果是这样的话，那就很简单了：

```
BOOL haveDot = (the7Segment & 0x40) != 0;
char temp = the7Segment & 0xBF;
char theChar = (temp > 0x21) ? temp : (temp + 0x40); 
```

# .net - .NET 计划的方法调用

> ID：12447917
> 
> 赞同：0
> 
> 时间：2012-09-16T14:56:16.463
> 
> 标签：.net, wpf, .net-3.5

有一些运行时定义的一周时间表，例如：

```
<schedule>
    <s day="Monday", time="1:00:00"></s>
    <s day="Sunday", time="3:00:00"></s>
    <s day="Wednsday", time="16:00:00"></s>
    ...
    ...
</schdule> 
```

那时我必须调用一些方法。.net/wpf 中是否有为此目的的内置类？或者任何开源/免费控件？或者最好的方法是为每个元素初始化新的计时器？

**编辑：** WPF 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:07:26.577

我认为最好的解决方案可能是使用任务计划程序，这样 Windows 就可以管理任务，而无需您的软件在后台运行（作为服务？！？）。
一个好的起点可能是[.NET 的任务计划程序类库](http://www.codeproject.com/Articles/2407/A-New-Task-Scheduler-Class-Library-for-NET)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:14:10.457

没有任何内置的.NET。您可以为每个元素初始化一个[Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)。如果您正在寻找第三方组件，您可以[查看 Quartz.NET](http://quartznet.sourceforge.net/)。

# c# - 如何用新的 Linq 语法替换我的选择并添加正则表达式？

> ID：12447923
> 
> 赞同：0
> 
> 时间：2012-09-16T14:56:24.373
> 
> 标签：c#

我正在使用以下代码：

```
var valuesWithNames = from value in values1
   select new { 
      Value = (int)value.ToString("00"), 
      Text = value.ToString() 
  }; 
```

我如何更改它以使用新的 Linq 语法并更改它，以便我返回的文本应用了以下正则表达式？

```
".Select(n => Regex.Replace(n, "([A-Z])", " $1").Trim());" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:02:29.963

代码应该是这样的：

```
var valuesWithNames = from value in values1
select new { 
    Value = (int)value.ToString("00"), 
    Text =  Regex.Replace(value.ToString(), "([A-Z])", " $1").Trim() 
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:01:11.193

```
var valuesWithNames = from value in values1
    select new { 
        Value = (int)value.ToString("00"), 
        Text = value.ToString() 
    }; 
```

相当于：

```
var valuesWithNames = values1.Select
(
    value => new
    {
        Value = (int)value.ToString("00"),
        Text = value.ToString() 
    }
); 
```

您可以使用任何返回 a 的表达式初始化 Text `string`，因此对于您的正则表达式，您应该能够使用：

```
var valuesWithNames = values1.Select
(
    value => new
    {
        Value = int.Parse(value.ToString("00")),
        Text = Regex.Replace(value.ToString(), "([A-Z])", " $1").Trim()
    }
); 
```

# vim - 使用 .vimrc 在启动时垂直拆分窗口

> ID：12447924
> 
> 赞同：9
> 
> 时间：2012-09-16T14:56:33.977
> 
> 标签：vim

如标题所示，如何在启动时使用 .vimrc 垂直拆分页面？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-16T14:58:43.083

如果你想在 vim 启动时进行垂直分割，请在*.vimrc*中添加一个自动命令：

```
au VimEnter * vsplit 
```

请注意，如果您在命令行上打开多个文件，vim 将为您执行此操作：使用`-O`开关。

> -o[N] 打开 N 个窗口（默认：每个文件一个）
> 
> -O[N] 与 -o 类似，但垂直拆分

所以你可以像这样启动vim：

```
$ vim -O MyPage.html MyPage.css 
```

vim 将打开这两个文件，这两个文件都在垂直拆分中可见。

# python - 非常简单的python对峙

> ID：12447933
> 
> 赞同：2
> 
> 时间：2012-09-16T14:57:57.513
> 
> 标签：python

无法解决这样的问题，我感到非常愚蠢，但我是空白的。我需要想出一个简短而优雅的方法来做到这一点，但由于某种原因，我做不到！

这个概念很简单

我有一个清单，`[4,3,5,2,1]`我有五个人`A, B, C, D, E`

`A=4 B=3 C=5 D=2 E=1`

现在，我需要根据它们的数字按升序排列它们，这样它们就变成了

`['E', 'D', 'B', 'A', 'C']`

我真的不明白为什么我无法弄清楚这个 D：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T15:01:31.440

```
order  =  [4, 3, 5, 2, 1]
people = "ABCDE"

result = [x[1] for x in sorted(zip(order, people))] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T15:04:19.303

您可以创建一个字典，将数字与每个“个人”相关联：

```
>>> a = [4, 3, 5, 2, 1]
>>> b = ["A", "B", "C", "D", "E"]
>>> d = dict(zip(b, a))
>>> d
{'A': 4, 'C': 5, 'B': 3, 'E': 1, 'D': 2} 
```

使用此字典，您可以轻松地按值对键进行排序：

```
>>> sorted(d, key=d.get)
['E', 'D', 'B', 'A', 'C'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T15:00:22.997

使用`zip`将两个列表组合成一个元组列表，`[(A,1),(B,3),...,(E,5)]`然后使用 sort 和自定义`cmp`方法比较数字，然后使用`map`将字母拉回来。

# ruby-on-rails - 无法批量分配受保护的属性：用户

> ID：12447937
> 
> 赞同：3
> 
> 时间：2012-09-16T14:58:14.737
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在开发一个需要我提交表单的简单应用程序。我创建了两个模型。

**用户.rb**

```
class User < ActiveRecord::Base
  attr_accessible :email

  has_many :item
end 
```

**项目.rb**

```
class Item < ActiveRecord::Base
  attr_accessible :user_id

  belongs_to :user
end 
```

我没有使用**用户表单视图**创建用户，而是尝试使用**项目表单视图**创建用户。

**项目/_form.html.haml**

```
= nested_form_for @item do |form|

  = form.fields_for :user do |builder|
    = builder.text_field :email

  = form.submit "Save" 
```

我在这里错过了什么吗？我正在使用nested_form_for 顺便说一句。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:02:11.520

试试这个

```
attr_accessible :email :user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:31:55.890

试试这个代码

```
class Item < ActiveRecord::Base
  attr_accessible :user_id
  accepts_nested_attributes_for :user      # <--- This should help

  belongs_to :user
end 

class User < ActiveRecord::Base
  attr_accessible :email

  has_many :items                          # <--- Typofix
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T15:35:08.387

找到了我的问题的答案。

我更新了我的 items_controller.rb

```
def new
  @item = Item.new
  @item.user = User.new # I added this line.
end 
```

然后我更新了 item.rb

```
class Item < ActiveRecord::Base
  attr_accessible :user_attributes

  belongs_to :user
  accepts_nested_attributes_for :user
end 
```

# html - 上传并显示图片表单

> ID：12447938
> 
> 赞同：-2
> 
> 时间：2012-09-16T14:58:16.157
> 
> 标签：html, image, forms, upload, textarea

我将图像存储在文件夹中。那么我应该如何要求用户在表单中上传图片呢？

我的意思是用户将使用上传按钮上传图像。然后在填写表格后，用户将提交它。因此，当我再次显示表单的内容时，**如何检查哪张照片与哪个表单相关**。

另外如何将图像定位在文本区域中？我应该要求用户将代码`<img src="example.com/images/name_of_image"/>`放在他想要显示图像的文本区域中吗？向用户公开图像路径是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:15:18.103

无论如何，我正在回答我遇到的问题。由程序员编写完整的编程部分总是更好，如果用户只输入简单的英语总是更好。在我看来，如果您从用户那里获取输入，那么请使用此技术。**我正在考虑您有一个数据库，并且您可以轻松地使用它。**
`1\. Take input form a user and ask them to upload the image`
`2\. Make a PHP script to store the image in the webserver`
`3\. Create a table:`
+----+------------+-------------+
|slno|用户名|图像名|
+----+------------+-------------+
`4\. Now store the image name using $_FILES["file"]["name"]`
`5\. You can show your image form the user just by using a simple SELECT command.`
`6\. Make sure you have your unique id.`

参考：[很好的教程形式 w3schools。](http://www.w3schools.com/php/php_file_upload.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:25:30.337

您可以将图像上传到目录或文件夹中，并为其指定一个唯一的名称/编号（如 PHP `uniqid`）。将此编号与表单数据一起存储到数据库中，以便可以从数据库中检索并显示图像 ID。这样，数据库中的一个表行将仅包含有关单个表单的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T18:08:32.823

要跟踪图像，您可以在存储图像时将一些主键与图像名称关联。

当您要显示时，最简单的解决方法是在表单上使用一个图片框。最初可见 false 并在显示时将其设置为 true。

# assembly - 关于 x86 Prefetch 指令

> ID：12447939
> 
> 赞同：2
> 
> 时间：2012-09-16T14:58:17.587
> 
> 标签：assembly, x86, x86-64

PREFETCH 指令将多少字节带入缓存？？？它是否等于缓存行大小？是否可以预取长度大于缓存行大小的数据？

# ios - 按下按钮时在 mapView 上显示注释引脚

> ID：12447947
> 
> 赞同：0
> 
> 时间：2012-09-16T14:59:17.450
> 
> 标签：ios, xcode, mkmapview, mkannotation, mkannotationview

试图弄清楚当按下按钮时是否有可能转到mapView中的某个经度和纬度并放下一个按钮。我复制了以前工作的“newAnnotation”引脚的代码，但现在意识到它可能无法在我的按钮代码中工作。这是我的按钮代码：

```
-(IBAction)buttonPressed 
{
CLLocationCoordinate2D location;
MKCoordinateSpan span;
location.latitude = (double) 44.4758;
    location.longitude = (double) -73.2125;
span.latitudeDelta=0.2;
span.longitudeDelta=0.2;

    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"BCA" 
    andCoordinate:location];
[self.mapView addAnnotation:newAnnotation];
[newAnnotation release];

themapView = [[MapView alloc] initWithNibName:@"MapView" bundle:nil];
[self.view addSubview:themapView.view]; 
} 
```

我知道按钮 WORKS 并且它实际上进入了 mapView 并正在处理坐标，但它只是没有删除带有标题的图钉。目前我的代码没有错误。如果您需要查看其他代码，请告诉我。太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:04:38.653

我认为您的问题是您正在向尚不可见的地图视图添加注释。您必须**首先**将地图视图视图添加为子视图，**然后**添加注释。下面是代码的样子：

```
-(IBAction)buttonPressed 
{
CLLocationCoordinate2D location;
MKCoordinateSpan span;
location.latitude = (double) 44.4758;
    location.longitude = (double) -73.2125;
span.latitudeDelta=0.2;
span.longitudeDelta=0.2;

MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"BCA" 
andCoordinate:location];
[self.mapView addAnnotation:newAnnotation];
[newAnnotation release];

themapView = [[MapView alloc] initWithNibName:@"MapView" bundle:nil];
[self.view addSubview:themapView.view]; 

} 
```

更新：

我们能看到 MapViewAnnotation 的代码吗？它应该是一个`NSObject`采用`MKAnnotation`这样的类，`<MKAnnotation>`你应该声明和合成三个属性：标题，如果你喜欢的话，当然还有坐标

另一个问题可能是您将`MapView`' 的视图添加为子视图。将此代码放入`MapView`并呈现`MapView`为视图控制器可能会更好

我也不明白您为什么要向 self.mapView 添加注释，然后在其上添加子视图.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:44:08.533

您将注释添加到 self.mapview，然后制作单独的地图并将其视图添加为子视图，这很奇怪。

如果您的 self.mapview 已经在屏幕上，那么您可以删除函数的最后两行。如果不是，那么您的功能可能需要更改为更像这样

```
-(IBAction)buttonPressed 
{
    CLLocationCoordinate2D location;
    MKCoordinateSpan span;
    location.latitude = (double) 44.4758;
    location.longitude = (double) -73.2125;
    span.latitudeDelta=0.2;
    span.longitudeDelta=0.2;

    themapView = [[MapView alloc] initWithNibName:@"MapView" bundle:nil];
    [self.view addSubview:themapView]; 

    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"BCA" 
andCoordinate:location];
    [themapView addAnnotation:newAnnotation];
    [newAnnotation release]; 
```

}

重要的变化是您将注释添加到刚刚初始化的 mapView 中，并且您正在将 mapView（不是它的 .view）添加到当前的 .view 中。您可能还需要重新定位您的地图。

# c - 定义#define宏

> ID：12447952
> 
> 赞同：1
> 
> 时间：2012-09-16T14:59:50.510
> 
> 标签：c, c-preprocessor

我想知道 C 语言中是否有一种方法可以`#define`这样定义：

```
#define something #define
something a 42
something b 42 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T15:03:31.103

不，这在 C 中是不可能的。不允许在另一个宏中定义宏。

从[C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)：

> 6.10.3.4 重新扫描和进一步更换
> 
> 3 所得到的完全被宏替换的预处理标记序列即使与预处理指令相似，也不会作为预处理指令处理，但其中的所有 pragma 一元运算符表达式随后将按照下面 6.10.9 中的规定进行处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T15:03:44.037

不，没有。如果宏的扩展生成了一些看起来像预处理器指令的东西，它不会被当作一个处理，`#`在源代码中留下 a 被编译器正确看到，然后它将反对这`#`是一个意外的标记（语法错误） .

## ISO/IEC 9899:2011

> ### 6.10.3.4 重新扫描和进一步更换
> 
> ¶3 生成的完全被宏替换的预处理标记序列即使类似于一个预处理指令也不会被处理，但其中的所有 pragma 一元运算符表达式随后会按照下面 6.10.9 中的规定进行处理。

所指的“pragma unary operator”是`_Pragma()`采用字符串文字的运算符。

C99 中的写法非常相似，写法是 C89 相似但没有提及`_Pragma`操作符，因为它在 C89 中不存在。

* * *

您可以在 Open Standard 网站上找到 C2011 标准的草案：

*   [http://www.open-std.org/jtc1/sc22/wg14/](http://www.open-std.org/jtc1/sc22/wg14/)

连同工作文件、委员会会议的“邮件”等。

（JTC1 是 Joint Technical Committee 1；SC22 是 Standardization Committee 22，负责编程语言；WG14 是 Working Group 14，负责 C 标准 [。WG21](http://www.open-std.org/jtc1/sc22/wg21/)负责 C++ 标准。）

您可以以 30 美元的价格从[ANSI](http://webstore.ansi.org/RecordDetail.aspx?sku=INCITS%2fISO%2fIEC+9899-2012)获得您自己的标准 PDF 的个性化副本。我认为这是任何认真的 C 程序员的必要投资。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T15:04:51.787

不。预处理器只执行一次，所以最后，进入编译器的代码包含一个#define，这是一个语法错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T15:07:46.293

如果你想根据 other 的定义来定义一些东西，C 提供`#ifdef`了实现它

喜欢：-

```
#define something
#ifdef something
#define a 42
#else
#define b 42
#endif 
```

# php - 在 While 循环内部，在 MYSQL 中使用 Only Last Result in Array

> ID：12447953
> 
> 赞同：0
> 
> 时间：2012-09-16T14:59:52.243
> 
> 标签：php, mysql

我是新手`PHP`，所以如果我犯了一个愚蠢的错误，请耐心等待。我的问题是，如果 2 个用户打开了两个以上的对话，我的消息系统将显示来自第一个主题与第二个主题的对话。我不允许发布图片，所以我会尝试输入解释：现在我得到的结果看起来像这样：

> 对象1：你好-嘿，你今天好吗？- 我很好，谢谢！
> 
> * * *
> 
> 对象2：再见——嘿，你今天好吗？- 我很好，谢谢！- 和你聊天真是太好了！- 小心！
> 
> * * *

在上面的示例中，您可以看到来自第一个对话的消息也显示在第二个对话中。

我希望每个主题的对话只显示在其适当的主题中。我试图只获取每个循环中的最后一个主题以在我的`MySQL`查询中使用，但是当我从 foreach 循环中获取最后一个数组值时，它仍然返回`MySQL`. 如果我的请求或我的代码难以理解，我很抱歉。几天来，我一直在不停地工作，但离我的目标还很遥远。请帮忙！

这是我的代码片段：

```
$sql = mysql_query("SELECT * FROM private_messages WHERE to_id='$my_id' AND         recipientDelete='0' GROUP BY subject ORDER BY id DESC LIMIT 200");

$resultArrays2 = array();
while($row = mysql_fetch_array($sql)){
$resultArrays2 = array( 
$subject = $row['subject']);

foreach ($resultArrays2 as $value2 => $i2){
//foreach ($i as $second){
$array2[] = $i2;
    }

$my_uname = $row['message'];
$date = strftime("%b %d, %Y",strtotime($row['time_sent']));
if($row['opened'] == "0"){ 
        $textWeight = 'msgDefault';
} else {
        $textWeight = 'msgRead';
}
$fr_id = $row['from_id'];
$stringsubfirst = (end($array2));    
// SQL - Collect username for sender inside loop
$more = mysql_query("SELECT id, username FROM mymembers WHERE id='$p' LIMIT 1");
while($rz = mysql_fetch_array($more)){ $MEid = $rz['id']; $ME = $rz['username']; }
$ret = mysql_query("SELECT id, username FROM mymembers WHERE id='$fr_id' LIMIT 1");
while($raw = mysql_fetch_array($ret)){ $Sid = $raw['id']; $Sname = $raw['username']; }

$reachingsub = mysql_query("SELECT * FROM private_messages WHERE     subject='$stringsubfirst' AND recipientDelete !='1' LIMIT 100") or die(mysql_error());
$resultArrays = array();
while($rn = mysql_fetch_array($reachingsub)){
$resultArrays = array(
$finalsub = $rn["subject"]);    
foreach ($resultArrays as $value => $i){

$array[] = $i;
    }
}
$stringsub = (end($array));
$stringcur = (current($array));
$stringnext = (next($array));
$stringprev = (prev($array));
$stringfirst = (reset($array));

$reaching = mysql_query("SELECT * FROM private_messages WHERE subject='$stringsub' AND recipientDelete !='1' ORDER BY id DESC LIMIT 200") or die(mysql_error());
    $resultArrays2 = array();
while($rw = mysql_fetch_array($reaching)){
    $resultArrays2 = array(
    $subsub = $rw["subject"]);
        foreach ($resultArrays2 as $value2 => $i2){

        $array2[] = $i2;
        $array3[] = $value2;
        }
        $stringsub2 = (end($array2));
        $stringcur2 = (current($array2));
        $stringnext2 = (next($array2));
        $stringprev2 = (prev($array2));
        $stringfirst2 = (reset($array2));
    $subsub2 = $rw["subject"];
    $usingid = $rw["id"];
    $insidemessage = $rw["message"];
    $fi = $rw["from_id"];
    $ti = $rw["to_id"];
    $minutes = strftime("%b %d, %r",strtotime($rw['time_sent']));
    if($p !== $ti){$listname = $ME;}else{$listname = $Sname;}

    if($subject !== $stringsub2 || $stringcur2 !== $stringnext2){$othermessage .= '<div  style="display:none;">'.$ti.$subsub2.$subject.$stringsub2.$stringsubfirst.'</div>';}

    if($subject == $stringsub2 || $stringcur2 == $stringnext2){$othermessage .= '<br />'.'<div style="display:none;">'.$ti.$subsub2.$subject.$stringsub2.$stringsubfirst.'</div>'.
    '<div style="font-weight:bold;">'.$listname.': '.$minutes.'</div>'.$insidemessage.'<br />';}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:06:12.677

我不确定我是否正确理解了你的整个问题，但是......一个非常简单的解决方案是给每个对话一个唯一的标识符并使​​用它而不是可能不是唯一的主题进行选择

# php - jqGrid：如何使用单一搜索功能？

> ID：12447955
> 
> 赞同：0
> 
> 时间：2012-09-16T14:59:54.560
> 
> 标签：php, jquery, search, jqgrid, jqgrid-php

如何使用 jqGrid 的单一搜索功能？

我遵循“3.7 版中的新功能”下的示例“单一搜索”。[jqGrid 演示页面](http://www.trirand.com/blog/jqgrid/jqgrid.html)

我的脚本几乎完全保存了用于从数据库中检索数据的查询，但我的脚本不进行过滤。

谁能指出我使用 PHP 的单一搜索功能的完整示例？

我对演示页面中的脚本也有疑问。

1.  jQuery如何将条件传递给PHP来过滤结果？我在查询中注意到它有一个变量`$where`，但该变量没有在 PHP 脚本中声明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:58:17.520

我已经使用 MySQL 数据库编写了一个示例。
首先创建一个“test”数据库，一个“items”表，并插入一些记录：

```
CREATE DATABASE IF NOT EXISTS test;

CREATE TABLE IF NOT EXISTS `items` (
  `item_id` int(11) NOT NULL,
  `item` varchar(255) DEFAULT '',
  `item_cd` varchar(255) DEFAULT '',
  PRIMARY KEY (`item_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

LOCK TABLES `items` WRITE;
INSERT INTO `items` VALUES (1,'Lorem','575878');
INSERT INTO `items` VALUES (2,'Lorem','857450');
INSERT INTO `items` VALUES (3,'ipsum','292404');
INSERT INTO `items` VALUES (4,'dolor','814131');
INSERT INTO `items` VALUES (5,'sit','962077');
INSERT INTO `items` VALUES (6,'amet,','549801');
INSERT INTO `items` VALUES (7,'sed','166822');
INSERT INTO `items` VALUES (8,'in','616758');
INSERT INTO `items` VALUES (9,'id','550799');
INSERT INTO `items` VALUES (10,'dictum','763004');
INSERT INTO `items` VALUES (11,'velit','244985');
INSERT INTO `items` VALUES (12,'est','525127');
INSERT INTO `items` VALUES (13,'suspendisse,','351690');
INSERT INTO `items` VALUES (14,'mauris','655061');
INSERT INTO `items` VALUES (15,'eget','423779');
INSERT INTO `items` VALUES (16,'imperdiet','493615');
INSERT INTO `items` VALUES (17,'ut,','864029');
INSERT INTO `items` VALUES (18,'mauris','546065');
INSERT INTO `items` VALUES (19,'vestibulum,','562819');
INSERT INTO `items` VALUES (20,'sagittis','238043');
INSERT INTO `items` VALUES (21,'ac.','867508');
INSERT INTO `items` VALUES (22,'Mauris','674897');
INSERT INTO `items` VALUES (23,'id','288097');
INSERT INTO `items` VALUES (24,'quam,','889530');
UNLOCK TABLES; 
```

接下来，创建 html 页面“singlesearch.html”：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" media="screen" href="http://www.trirand.com/blog/jqgrid/themes/redmond/jquery-ui-custom.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://www.trirand.com/blog/jqgrid/themes/ui.jqgrid.css" />
    <script src="http://www.trirand.com/blog/jqgrid/js/jquery.js" type="text/javascript"></script>
    <script src="http://www.trirand.com/blog/jqgrid/js/i18n/grid.locale-en.js" type="text/javascript"></script>
    <script src="http://www.trirand.com/blog/jqgrid/js/jquery.jqGrid.js" type="text/javascript"></script>
    <script type="text/javascript">
    jQuery(document).ready(function(){
        jQuery("#single").jqGrid({
            url:'localset.php',
            datatype: "json",
            height: 255,
            width: 600,
            colNames:['Index','Name', 'Code'],
            colModel:[
                {name:'item_id',index:'item_id', width:65, sorttype:'int'},
                {name:'item'   ,index:'item'   , width:150},
                {name:'item_cd',index:'item_cd', width:100}
            ],
            rowNum:50,
            rowTotal: 2000,
            rowList : [20,30,50],
            loadonce: false,
            mtype: "GET",
            rownumbers: true,
            rownumWidth: 40,
            gridview: true,
            pager: '#psingle',
            sortname: 'item_id',
            viewrecords: true,
            sortorder: "asc",
            caption: "Single search on local data",
            loadError: function(jqXHR, textStatus, errorThrown) {
                /*
                alert('HTTP status code: ' + jqXHR.status + '\n' +
                      'textStatus: ' + textStatus + '\n' +
                      'errorThrown: ' + errorThrown);
                alert('HTTP message body (jqXHR.responseText): ' + '\n' + jqXHR.responseText);
                */
                alert(jqXHR.responseText);
            }
        });

        jQuery("#single").jqGrid(
            'navGrid',
            '#psingle',
            {del:false,add:false,edit:false},
            {},                        // default settings for edit
            {},                        // default settings for add
            {},                        // 
            {closeAfterSearch:true},   // search options
            {}                         // view parameters
        );
    });
    </script>
</head>
<body>
    <table id="single"></table>
    <div id="psingle"></div>
</body>
</html> 
```

然后创建一个 PHP 页面“localset.php”：

```
<?php

function myTrace($str) {
    // Adjust the log file name before uncommenting
    //@file_put_contents("/tmp/localset.log", $str."\n", FILE_APPEND);
}

myTrace(print_r($_REQUEST,true));

// connect to the database
$link = mysqli_init();

// Adjust host, user, password and dbname before use!
$db = mysqli_real_connect($link, "myhost", "myuser", "mypass", "test");
if (!$db) {
    die('Connect Error ('.mysqli_connect_errno().'): '.mysqli_connect_error());
}

mysqli_set_charset($link, "utf8");

$page  = isset($_REQUEST['page']) ? $_REQUEST['page'] : 0;          // get the requested page
$limit = isset($_REQUEST['rows']) ? $_REQUEST['rows'] : 50;         // get how many rows we want to have into the grid
$sidx  = isset($_REQUEST['sidx']) ? $_REQUEST['sidx'] : 1;          // get index row - i.e. user click to sort
$sord  = isset($_REQUEST['sord']) ? $_REQUEST['sord'] : "asc";      // get the direction

if ($_REQUEST["_search"] == "false") {
    $where = "where 1";
} else {
    $operations = array(
        'eq' => "= '%s'",            // Equal
        'ne' => "<> '%s'",           // Not equal
        'lt' => "< '%s'",            // Less than
        'le' => "<= '%s'",           // Less than or equal
        'gt' => "> '%s'",            // Greater than
        'ge' => ">= '%s'",           // Greater or equal
        'bw' => "like '%s%%'",       // Begins With
        'bn' => "not like '%s%%'",   // Does not begin with
        'in' => "in ('%s')",         // In
        'ni' => "not in ('%s')",     // Not in
        'ew' => "like '%%%s'",       // Ends with
        'en' => "not like '%%%s'",   // Does not end with
        'cn' => "like '%%%s%%'",     // Contains
        'nc' => "not like '%%%s%%'", // Does not contain
        'nu' => "is null",           // Is null
        'nn' => "is not null"        // Is not null
    ); 
    $value = mysqli_real_escape_string($link, $_REQUEST["searchString"]);
    $where = sprintf("where %s ".$operations[$_REQUEST["searchOper"]], $_REQUEST["searchField"], $value);
}

$SQL = "SELECT item_id, item, item_cd FROM items ".$where." ORDER BY $sidx $sord";
myTrace($SQL);
$result = mysqli_query($link, $SQL);
if (!$result) {
    myTrace(mysqli_error($link));
    die("Couldn't execute query: ".mysqli_error($link));
}

if ($limit < 0) $limit = 0;

$start = ($limit * $page) - $limit;
if ($start < 0) $start = 0;

$count = mysqli_num_rows($result);
if ($count > 0) {
    $total_pages = ceil($count / $limit);
} else {
    $total_pages = 0;
}

if ($page > $total_pages) {
    $page = $total_pages;
}

$responce->page    = $page;
$responce->total   = $total_pages;
$responce->records = $count;

mysqli_data_seek($result, $start);
for ($i = 0; $row = mysqli_fetch_assoc($result); $i++) {
    if (($limit > 0) && ($i >= $limit)) break;
    $responce->rows[$i]['id']   = $row['item_id'];
    $responce->rows[$i]['cell'] = array($row['item_id'], $row['item'], $row['item_cd']);
} 
echo json_encode($responce);

mysqli_close($link);

?> 
```

在 PHP.INI 文件中启用[PHP mysqli 扩展](http://php.net/manual/en/book.mysqli.php)，在“localset.php”脚本（第 15 行）中调整连接参数，最后在浏览器中打开“singlesearch.html”页面。

# facebook-like - 为什么我的 Facebook 页面会自动重定向到外部站点？

> ID：12447956
> 
> 赞同：0
> 
> 时间：2012-09-16T15:00:01.470
> 
> 标签：facebook-like, facebook-page, facebook-timeline

我有一个网站：www.coversfm.com

我为它制作了一个 Facebook 页面：[https ://www.facebook.com/pages/Covers-FM/139507146178187](https://www.facebook.com/pages/Covers-FM/139507146178187)

当我转到 FB 页面时，我看到一个黄色消息框：

"这是您网页的管理界面[http://www.coversfm.com/](http://www.coversfm.com/)。您可以看到 Insights 并发布给喜欢您网页的用户。只有网页的管理员可以查看此界面，其他用户是发送到网页。”

因此，当其他人（非管理员）喜欢此页面或从新闻源单击时，他们会自动重定向到外部站点 - 因此 Facebook 页面（Covers FM 的时间线）永远不会被除我之外的任何人看到。

更令人困惑的是，在页面的设置中，我看到诸如“每个人都可以发布到 Covers FM 的时间线”之类的选项——这表明普通用户实际上应该能够访问时间线视图？

我怎样才能解决这个问题？我想在 Facebook 上拥有一个页面/时间线！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:16:49.550

这个页面是您自己设置的，还是由 Facebook 自动创建的？

> “这是您网页的管理界面，网址为[http://www.coversfm.com/](http://www.coversfm.com/)。您可以查看 Insights 并发布给喜欢您网页的用户。[...]”

随着最近的类似迁移，如今后者甚至不再可能。

* * *

Graph API 为您的页面显示，

```
"app_id": 106418287839 
```

然后再为那个应用程序ID，

```
"link": "https://www.facebook.com/apps/application.php?id=106418287839" 
```

– 访问该链接会显示一条 Facebook 消息，

> 您将被重定向到 Covers FM 网络应用程序。

所以所有这一切让我觉得，你没有建立一个“正常”的粉丝页面，而是 Facebook 自动创建的（可能是一个应用程序页面），就像他们前一段时间所做的那样。

查看页面的管理菜单，如果您可以将页面类型更改为其他内容。如果没有，请尝试创建一个新的“真实”粉丝页面——然后查看是否可以将现有页面与该页面合并，以保留现有的喜欢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:01:06.220

我找到了解决方案，虽然相当令人沮丧的是，我创建了一个新页面，合并了旧页面的点赞，丢失了所有旧页面的帖子。我应该做的是：

[https://developers.facebook.com/docs/reference/plugins/like/migration/](https://developers.facebook.com/docs/reference/plugins/like/migration/)

基本上，正如 CBroe 所暗示的，最近的 Like 迁移使您能够将外部 Like 迁移到内部 Like（即人们可以看到和发布的真实 FB 页面等）。

1.  转到关联应用 ID 的高级设置。
2.  启用“外部页面迁移”设置
3.  转到我的页面，现在看到一个粉红色的迁移页面框，而不是我上面提到的黄色框。

很烦人。没有大量的内容丢失，但只需要开始用一些帖子、教授图片、封面图片等来构建页面。

哦，好吧，谜团解开了。希望它可以帮助别人！

# backgroundworker - 可以不断更新同一行的命令行工具背后是什么？

> ID：12447963
> 
> 赞同：0
> 
> 时间：2012-09-16T15:00:42.067
> 
> 标签：backgroundworker, stdout

我使用 RTMPDump 下载媒体流，我想将输出重定向到我可以控制的流，这样我就可以解析进度并做一些事情。但是该程序与许多命令行工具一样，在同一行中显示进度，然后在程序运行时不断更新。它看起来像这样？

```
44929.160 kB / 556.34 sec 
```

我的问题是：这是某种特殊字符，它删除了使程序能够重写同一行的字符或行吗？还是发生了其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:09:55.637

一个简单的方法是在每行的开头打印一个回车：

```
# Using bash as an example
for i in {0..10}; do
  printf "\r%s" $i
  sleep 1
done 
```

更复杂的格式可以使用 ANSI 转义码来更精确地定位光标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:07:19.573

如果要写同一行，则必须删除字符并用新字符覆盖它们。您可以通过提供适量的`backspaces`删除字符来做到这一点。另一种选择是清除整个控制台然后重写它。这可以通过`System("cls");`（Windows 上的 C++）来完成。

# php - 可以使用 post_content 拉类和 id 吗？

> ID：12447965
> 
> 赞同：0
> 
> 时间：2012-09-16T15:00:55.617
> 
> 标签：php, html, css, wordpress

只是简单解释一下我想做什么，我为当地足球队建立一个网站，在主页上有一个带有联赛表的 div 计划，我希望用户能够通过编辑轻松调整联赛表一个帖子。到目前为止，我的代码是这样的

```
<div class="teaminfo"> <?php
$post_id = 923;
$queried_post = get_post($post_id);
$title = $queried_post->post_title;
echo $title;
echo $queried_post->post_content;
?></div> 
```

但是在我的表格中，我有一个应用于行的各种类，因为我想要边框和背景颜色。我认为“post_content”只会从字面上提取内容，所以我只是想知道有没有人知道其他方法？我不能在上面的代码中应用类和 div，因为如果你得到我，同样的东西将一次性应用到所有内容。

谢谢您的帮助

编辑：只是再添加一件事，我不只是给 div 一个我想要的颜色的背景并将内容放在它上面的原因，是因为站点团队将突出显示不同的颜色，以便他们在表格中上下移动那颜色将不得不改变

# scala - 如何获得隐式转换以在集合内工作？

> ID：12447968
> 
> 赞同：20
> 
> 时间：2012-09-16T15:01:02.090
> 
> 标签：scala

假设我有一个隐式转换：

```
implicit def aToB(a: A):B={
...
} 
```

如何让这种隐式转换对 List 的元素起作用？

如果我有：

```
val listOfA: List[A] ... 
```

我有一个接受 B 列表的函数，是否可以让 Scala 将所有元素从 A 隐式转换为 B？

如果没有隐式转换，转换可能如下所示：

```
lisftOfA.map(a => new B(a.someValue, a.anotherValue)) 
```

但我希望这会像“魔术”一样发生……这要求太多了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-16T23:23:47.937

以下是您可能希望考虑的一些替代方案：

**1.使用视图绑定**

如果可以更改采用 B 列表的函数，这将是最简单的解决方案。修改它以接受可以转换为 Bs 的事物列表。那是，

```
def yourFn(l: List[B]) = ... 
```

会成为

```
def yourFn[X <% B](l: List[X]) = ... 
```

然后，您可以使用 listOfA 调用该函数：

```
yourFn(listOfA) 
```

**2.介绍一种转换方法**

这类似于 Rogach 的第一个解决方案，只是外部转换是非隐式的：

```
def convert[B, A <% B](l: List[A]): List[B] = l map { a => a: B } 
```

然后在你函数的调用点，你会写

```
yourFn(convert(listOfA)) 
```

像 Rogach 的第二个解决方案一样，这比引入隐式转换更安全。

**3.引入隐式转换**

这相当于 Rogach 的第一个解决方案，但表示法更好一些（IMO）。

```
implicit def convert[B, A <% B](l: List[A]): List[B] = l map { a => a: B } 
```

如果此转换在您的调用站点范围内，您可以使用 listOfA 调用您的函数：

```
yourFn(listOfA) 
```

**离别的思念**

考虑如何以一般方式解决这个问题很有趣。如果我想定义我的转换方法以便它可以处理实现该`map`方法的任何类型怎么办？IE，

```
def convert[B, A <% B, C[_]](c: C[A]): C[B] = c map { a => a: B } 
```

当然，这是行不通的，因为签名中没有任何内容表示`C`必须实现的约束`map`。据我所知，表达这个约束是相当复杂的，不能以一种为任何实现`map`. 请参阅[类型安全的 Scala 序列推导](http://tonymorris.github.io/blog/posts/type-safe-scala-sequence-comprehensions/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T15:15:07.850

以下是一个通用解决方案，如果隐式转换 A=>B 在范围内可用，则启用列表的隐式转换 (List[A] => List[B])：

```
scala> class A
defined class A

scala> class B
defined class B

scala> implicit def a2b(a:A) = new B
a2b: (a: A)B

scala> implicit def mapI[A,B](l: List[A])(implicit conv: A => B): List[B] = l.map(conv)
mapI: [A, B](l: List[A])(implicit conv: (A) => B)List[B]

scala> List(new A): List[B]
res0: List[B] = List(B@efa0bf4) 
```

这是你需要的吗？

此外，由于您已经进行了隐式转换，因此您可以编写：

```
listOfA.map(a2b) // List[B] 
```

它会更冗长一些，但可以让您更明确地控制代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T15:16:52.080

我认为最好的可能是

```
implicit def asToBs(as: List[A]): List[B] = as map aToB 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-22T22:21:26.537

为了完整起见，您可能希望考虑一种更通用的方法，使用[`CanBuildFrom`](http://docs.scala-lang.org/overviews/core/architecture-of-scala-collections.html).

这个程序：

```
import scala.collection.generic.CanBuildFrom
import scala.language.{higherKinds, implicitConversions}

implicit def implyConvertedTraversable[A, B, C[X] <: Traversable[X]](as: C[A])(implicit conversion: A => B, cbf: CanBuildFrom[C[A], B, C[B]]): C[B] = {
  val builder = cbf(as)
  builder.sizeHint(as)
  builder ++= as.map(conversion)
  builder.result()
}

implicit def implyString(a: Int): String = a.toString

val intList = List(1, 2, 3)
val intStream = Stream(1, 2, 3)

val stringList: List[String] = intList
val stringStream: Stream[String] = intStream 
```

产量：

```
intList: List[Int] = List(1, 2, 3)
intStream: scala.collection.immutable.Stream[Int] = Stream(1, ?)

stringList: List[String] = List(1, 2, 3)
stringStream: Stream[String] = Stream(1, ?) 
```

# c++ - QAction 无法连接到我的插槽

> ID：12447972
> 
> 赞同：0
> 
> 时间：2012-09-16T15:01:46.673
> 
> 标签：c++, qt, signals-slots, qmenu

我正在尝试使用 Qt 制作 IHM，我首先制作了一个基本菜单（文件、编辑...）。到目前为止，我的菜单包含“文件”，然后显示“新建项目，打开项目，退出”。看起来不错，但我的问题是我似乎无法触发这些动作（单击它们或通过快捷键）。

这是我的插槽：

```
void KoriganEngine::launchNewProjectWidget(){
   //External QWidget
   m_nwProj = new NewProjectWidget(NULL,Qt::MSWindowsFixedSizeDialogHint);
   m_nwProj->show();
} 
```

如果我在连接按钮的情况下使用此插槽，我的新 QWidget 将正确显示。然而，不可能用一个动作做同样的事情......

这是我的操作和菜单的代码：

```
 void KoriganEngine::KG_createMenus(){
//init actions
KG_createMenuActions();

//add menu to the bar
m_fileMenu = menuBar()->addMenu("File");
m_fileMenu->addAction(m_newProjAction);
m_fileMenu->addAction(m_openProjAction);
m_fileMenu->addSeparator();
m_fileMenu->addAction(m_quitAction);

m_editMenu = menuBar()->addMenu("Edit"); 
```

}

```
 void KoriganEngine::KG_createMenuActions(){
m_newProjAction = new QAction("New Project...", this);
m_newProjAction->setShortcuts(QKeySequence::New);
m_newProjAction->setStatusTip(QString("Create a new Project"));
connect(m_newProjAction, SIGNAL(trigerred()), this, SLOT(slottest()));

m_openProjAction = new QAction("Open Project...", this);
m_openProjAction->setShortcuts(QKeySequence::Open);
m_openProjAction->activate( QAction::Hover);
connect(m_openProjAction, SIGNAL(trigerred()), this, SLOT(launchNewProjectWidget())); //TODO replace the slots

m_quitAction = new QAction("Exit", this);
connect(m_quitAction, SIGNAL(trigerred()), this, SLOT(quit())); 
```

}

以及与按钮一起使用的代码：

```
connect(m_button, SIGNAL(clicked()), this, SLOT(launchNewProjectWidget())); 
```

所以我真的不明白为什么它不应该做出同样的反应，我一遍又一遍地阅读了 Qt 示例......我一定错过了一些东西，但如果有人作为一个想法，我将不胜感激，因为它开始让我讨厌生活：p

谢谢你们。

PS：好的，不确定我是否能很好地处理代码块业务，在我的辩护中，使用它真的很奇怪......：p

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T15:10:58.753

您在触发词中犯了一个错误：P 它应该是：

```
connect(m_quitAction, SIGNAL(triggered()), this, SLOT(quit()));
                                ------ 
```

触发了，不是触发了！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:11:48.647

如果我做对了，你的问题是 m_openProjAction->activate(QAction::Hover); 这导致 QAction 发出悬停（）而不是触发（）；

# jpa - 我们可以假设 IllegalStateException 是在 JPA 的数据库中未找到 ParentKey 吗？

> ID：12447973
> 
> 赞同：1
> 
> 时间：2012-09-16T15:01:51.137
> 
> 标签：jpa, jpa-2.0, eclipselink, spring-3

如何知道`Prent Reference Not Found`JPA 中的？

在 MyDAO 持久化员工记录期间，其他事务/流程删除该员工的参考部门记录。那个时候，我抓不到`PersistenceException`。系统抛出`java.lang.IllegalStateException`。这就是为什么。我无法检索 SQL 错误代码表单 SQLException。

在实体中；

```
@Entity
public class Employee implements Serializable {
    private static final long serialVersionUID = -3661270122068507264L;
    @Id
    private String id;
    private String name;
    @OneToOne
    @JoinColumn(name ="DEPARTMENT_ID", referencedColumnName = "ID")
    private Department department;

    public Employee() {
    }

    //getter setter
} 
```

在我的 DAO 中；

```
public void insert(Employee employee) throws DAOException {
    try {
        em.persist(employee);
        em.flush();
    } catch (PersistenceException pe) {
        throw DAOUtils.translateDAOException(pe);
    }
} 
```

`DAOUtils.translateDAOException`function 是自定义函数，用于从`PersistenceException`.

我将描述堆栈跟踪；

```
java.lang.IllegalStateException: During synchronization a new object was found through a relationship that was not marked cascade PERSIST: org.ace.java.support.comp.depar
tment.Department@d769e1ae.
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4174)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:793)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:771)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1662)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4177)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.discoverUnregisteredNewObjects(RepeatableWriteUnitOfWork.java:289)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.calculateChanges(UnitOfWorkImpl.java:701)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.writeChanges(RepeatableWriteUnitOfWork.java:415)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.flush(EntityManagerImpl.java:741)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
    at $Proxy16.flush(Unknown Source)
    at org.ace.java.support.comp.department.persistence.DepartmentDAO.insert(DepartmentDAO.java:26)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy17.insert(Unknown Source)
    at org.ace.java.support.comp.department.service.DepartmentService.addNewEmployee(DepartmentService.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy18.addNewEmployee(Unknown Source)
    at org.ace.java.support.comp.department.testcase.DepartmentServiceTestCase.testException(DepartmentServiceTestCase.java:116)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:117)
    at org.junit.runner.JUnitCore.runMain(JUnitCore.java:98)
    at org.junit.runner.JUnitCore.runMainAndExit(JUnitCore.java:53)
    at org.junit.runner.JUnitCore.main(JUnitCore.java:45)
    at org.ace.java.support.comp.department.testcase.DepartmentServiceTestCase.main(DepartmentServiceTestCase.java:124)
E
Time: 13.161
There was 1 failure:
1) testException(org.ace.java.support.comp.department.testcase.DepartmentServiceTestCase)
org.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Transaction rolled 
back because transaction was set to RollbackOnly.
    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:476)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy18.addNewEmployee(Unknown Source)
    at org.ace.java.support.comp.department.testcase.DepartmentServiceTestCase.testException(DepartmentServiceTestCase.java:116)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:117)
    at org.junit.runner.JUnitCore.runMain(JUnitCore.java:98)
    at org.junit.runner.JUnitCore.runMainAndExit(JUnitCore.java:53)
    at org.junit.runner.JUnitCore.main(JUnitCore.java:45)
    at org.ace.java.support.comp.department.testcase.DepartmentServiceTestCase.main(DepartmentServiceTestCase.java:124)
Caused by: javax.persistence.RollbackException: Transaction rolled back because transaction was set to RollbackOnly.
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:92)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)
    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:467)
    ... 41 more 
```

我们是否可以假设如果`java.lang.IllegalStateException`，父/引用记录已被其他事务或进程删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:39:22.113

如果一个`IllegalStateException`被抛出并且你想抓住它，那么就去做。

```
try {}
catch (IllegalStateException){} 
```

抛出的异常不是 的实例`PersistenceException`，因此不会被捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:32:55.747

它会抛出 IllegalStateException，因为 JPA 第 3.2.4 节要求在同步托管实体时抛出一个 IllegalStateException，该托管实体在未标记为级联持续或全部的关系上引用了新实体或已删除实体。没有要解析的 SQL，因此您需要捕获 IllegalStateException 并以不同于一般 PersistenceExceptions 的方式处理它。

# android - 在 Android 中使用 Google 地图绘制的简单方法

> ID：12447978
> 
> 赞同：0
> 
> 时间：2012-09-16T15:03:08.707
> 
> 标签：android, google-maps-markers, clickable-image

我正在寻找一种简单的方法来在 android 的 Google 地图活动上绘制小图标。没什么特别的，我只是想把经纬度和其他一些属性放在地图上的适当位置上作为一个可点击的小图标。单击时，它会在屏幕上显示一些其他数据，但首先，我需要一种将它们绘制到地图上的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:16:24.743

看看 Overlay 和 ItemizedOverlay 类。看来 ItemizedOverlay 符合您的要求。[这](https://developers.google.com/maps/documentation/android/hello-mapview?hl=en)是使用它的小教程。在 Overlay 上，您可以绘制更复杂的形状 - 只需用您的覆盖它的 draw() 方法。例如：

```
public class Road extends Overlay {
//some your code... 
```

@Override public void draw(Canvas canvas, MapView mapView, boolean shadow) { drawPath(mapView, canvas); }

```
private void drawPath(MapView mv, Canvas canvas) {
    int x1 = -1;  
    int y1 = -1;
    int x2 = -1;
    int y2 = -1;

    Point point = new Point();

    for (int i=0; i < list.size(); i++) {
        mv.getProjection().toPixels(list.get(i), point);
        x2 = point.x;
        y2 = point.y;

        if (i > 0) {
            canvas.drawLine(x1, y1, x2, y2, paint);
        }

        x1 = x2;
        y1 = y2;
    } 
```

}

# python - 没有内核的 IPython 嵌入式 QT 小部件

> ID：12447986
> 
> 赞同：1
> 
> 时间：2012-09-16T15:04:03.780
> 
> 标签：python, qt, pyqt, ipython, spyder

基于[此](https://stackoverflow.com/questions/12431555/enabling-code-completion-in-an-embedded-python-interpreter)的新问题。我认为 IPython 比普通解释器更适合我的目标

有谁知道我可以在不启动内核的情况下在 QT Widget 中实例化 IPython 嵌入式 shell 的类/代码？

我希望能够提供我的 PyQt 应用程序的解释器变量，就像在实例化原生 python 嵌入式解释器时所做的那样。我还希望解释器能够调用父应用程序（通过传递给解释器的本地人）。

我粗略地浏览了 spyderlib 的 IPython 解释器机制，它似乎将内核实例化为它的小部件初始化的一部分。

如果您想知道我想要实现什么，我正在创建一个用于文本分析的研究平台。因此，我通过 GUI 应用程序将存储在 postgres 数据库中的论坛数据连接到 python nltk 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:33:58.387

设计是 IPython Qt 控制台小部件只是内核的前端。目前，我们只编写了一种让内核和前端存在于两个独立进程中的方法。添加在同一进程中运行的内核的工作正在进行中，这应该使您想要的成为可能：

[https://github.com/ipython/ipython/pull/2397](https://github.com/ipython/ipython/pull/2397)

如果您想对此进行测试，欢迎提供任何反馈。这是您需要启动它的代码示例：

[https://gist.github.com/3659874#file_embedded_qtconsole.py](https://gist.github.com/3659874#file_embedded_qtconsole.py)

# android - 当我按下“addurl”按钮时强制关闭错误

> ID：12447988
> 
> 赞同：-1
> 
> 时间：2012-09-16T15:04:25.367
> 
> 标签：android, eclipse, android-emulator, dialog, android-dialog

这是我的活动，其中我有对话框的代码......我想做的是，当用户按下按钮时，必须出现一个对话框，询问用户是否要将该链接保存在数据库中。

```
public class Add_ink extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.websearch);

    Button btn = (Button)  findViewById(R.id.add_link);
    btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
               showDialog(0);           
        }
    });
    }
    @Override
    protected Dialog onCreateDialog(int id){
         switch (id){
         case 0:
        return new AlertDialog.Builder(this)
         .setIcon(R.drawable.help_ov)
         .setTitle("This is a dialog with simple text")
         .setPositiveButton("OK",new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int whichButton) {
                Toast.makeText(getBaseContext(), "OK Clicked", Toast.LENGTH_SHORT).show();              
            }
        })
        .setNegativeButton("Cancel",new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int whichButton) {
                Toast.makeText(getBaseContext(), "Cancel Clicked", Toast.LENGTH_SHORT).show();

            }
        })

        .create(); 
         }
        return null;

    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:24:11.140

```
Hi The Solutions is 

/*Code*/

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.websearch);

Button btn = (Button)  findViewById(R.id.add_link);
btn.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
           showDialog();           
    }
});

public void showDialog()
{
final AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Do you really want to finish ?? You haven't selected any security settings option to activate your app.");  

    builder.setCancelable(false)
                .setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(
                                    @SuppressWarnings("unused") final DialogInterface dialog,
                                    @SuppressWarnings("unused") final int id) {

                     Toast.makeText(getBaseContext(), "OK Clicked", Toast.LENGTH_SHORT).show();         
dialog.cancel();        
                            }
                        })
                .setNegativeButton("No", new DialogInterface.OnClickListener() {
                    public void onClick(final DialogInterface dialog,
                            @SuppressWarnings("unused") final int id) {

Toast.makeText(getBaseContext(), "Cancel Clicked", Toast.LENGTH_SHORT).show();
                        dialog.cancel();

                    }
                });
        final AlertDialog alert = builder.create();
        alert.show();

} 
```

# jquery - 使用 KnockoutJS 验证模型

> ID：12447991
> 
> 赞同：0
> 
> 时间：2012-09-16T15:04:42.930
> 
> 标签：jquery, knockout.js

我有一个表单（新的投票表单），我可以在其中使用 KnockoutJS 将多个项目（投票问题）添加到集合中。我想知道如何强制用户在添加新行之前在问题文本框中输入一个值...

![在此处输入图像描述](../Images/88ef94d20f7e1df99e2ba2c3512816e1.png)

```
var App = function (pollData, pollQuestionData) {
             var self = this;
             self.poll = new Poll(pollData);
             self.questions = ko.observableArray([new PollQuestion(pollQuestionData)]); // Put one question in by defaul

             // Add new question function... here should go validation I guess???

             self.addQuestion = function () {
                 self.questions.push(new PollQuestion(pollQuestionData))
             };

             // Remove question function
             self.removeQuestion = function (question) {
                 self.questions.remove(question)
             };
         }; 
```

这是我的 jsfiddle 代码（顺便说一句，我无法让它运行......）

[http://jsfiddle.net/AcE2V/3/](http://jsfiddle.net/AcE2V/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:42:35.160

这是一个小提琴，它使用计算出的 observable 仅`New Question`在所有问题都有值时才显示按钮：

[http://jsfiddle.net/jearles/AcE2V/5/](http://jsfiddle.net/jearles/AcE2V/5/)

# php - 带有 AJAX 的 PHP MSQL 应用程序

> ID：12447992
> 
> 赞同：0
> 
> 时间：2012-09-16T15:04:49.630
> 
> 标签：php, mysql, ajax

我用 PHP 和 MySQL 编写了一个小应用程序。我在读取和写入数据库时​​没有问题。但是，我想使用 AJAX，虽然我有一个通过 AJAX 提交的表单，但我在更新主页上的数据时遇到了问题

我的主页创建一个数据库连接，然后包含其他单独的 php 文件，这些文件显示来自数据库的数据。我不能通过 AJAX 调用这些来刷新它们，因为它们在自己运行时不包括与数据库的连接。我不能在这些文件中包含数据库连接，因为当它们包含在主页上时已经声明了它。

有针对这个的解决方法吗？我的代码可以在[https://github.com/robertkent87/debt-manager查看](https://github.com/robertkent87/debt-manager)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:51:20.207

修复了使用`include_once`而不是重新声明数据库的问题`include`

# bash - 如何删除名称小于...的文件夹？

> ID：12447994
> 
> 赞同：2
> 
> 时间：2012-09-16T15:05:00.627
> 
> 标签：bash, filesystems

在我的服务器上，我在日期之后有一堆存档文件夹名称：`yyyy-mm-jj`这允许轻松对文件夹进行排序并找到相关数据。

我想删除给定数据之前完成的所有档案。使用我的文件夹命名，自然排序顺序与常规排序相同，因此我可以依赖通常的 bash 构造：

```
if [ $foldername -lt "yyyy-mm-jj" ]; then
    rm -r $foldername
fi 
```

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T15:25:57.357

`[ $foldername -lt "yyyy-mm-jj" ]`将始终为假，因为`-lt`是数字运算符：您要比较的字符串不是数字，因此它们都被视为 0。请使用`<`or`>`运算符来比较字符串（这是 ksh/bash/zsh 功能） . 请注意，只有字符串运算符，没有`<=`or `>=`。

通配符扩展按字典顺序返回匹配的名称。因此，要对最旧的文件采取行动，请遍历文件并在发现太新的文件时中断。

```
for dir in [0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]; do
  if ! [[ $dir < $min_date_to_keep ]]; then break; fi
  rm -r "$dir"
done 
```

# bluetooth - 使用 Qt5 的 QtonPi 蓝牙

> ID：12447996
> 
> 赞同：0
> 
> 时间：2012-09-16T15:05:49.777
> 
> 标签：bluetooth, libraries, raspberry-pi, qt5, qtonpi

我正在尝试编译要在 Raspberry Pi 平台上使用的蓝牙聊天示例。我按照此过程[QtonPi App SDK安装了 QtonPi](http://qt-project.org/wiki/Create)

起初我加载了聊天示例项目并尝试立即编译它。缺少蓝牙库的错误。

我在文件夹中搜索，但没有 qtconnectivity ！

我试图自己编译缺少的库，但我被卡住了。

那么，我应该如何继续让这些库与树莓派 QT5 SDK 一起工作？

有什么建议吗？在添加库的时候，我不是一个经验丰富的程序员，我感到有点失落。

谢谢。

塞德里克

# logging - Scalaz 7：将 Either 中的值转换为普通值加上记录错误的惯用方式？

> ID：12447997
> 
> 赞同：2
> 
> 时间：2012-09-16T15:05:56.247
> 
> 标签：logging, scalaz, scalaz7

给定一个函数，在记录 s 时`f: A => E \/ B`收集`B`某些 s 列表结果的惯用方法是什么？`A``E`

我想出了以下内容（部分是在[回答这个 SO question](https://stackoverflow.com/questions/12447222/scala-can-for-yield-clause-yields-nothing-for-some-condition/12447920#12447920)时）：

```
import scalaz._, Scalaz._
type Logger[+A] = Writer[List[String], A]

def logged[A, E, B, F[_]](f: A => E \/ B)(implicit FM: Monoid[F[E]], FP: Pointed[F]): (A => Writer[F[E], Option[B]]) = 
  (a: A) => f(a).fold(e => Writer(FP.point(e), None), b => Writer(FM.zero, Some(b)))

def listLogged[A, E, B](f: A => E \/ B) = logged[A, E, B, List](f)

type W[+A] = Writer[List[String], A]

def keepOdd(n: Int): String \/ Int = 
  if (n % 2 == 1) \/.right(n) else \/.left(n + " was even")

scala> val x = List(5, 6).traverse[W, Option[Int]](listLogged(keepOdd))
x: W[List[Option[Int]]] = scalaz.WriterTFunctions$$anon$26@503d0400

scala> x.run
res11: (List[String], List[Option[Int]]) = (List(6 was even),List(Some(5), None))

scala> val (logs, results) = x.map(_.flatten).run
logs: List[String] = List(6 was even)
results: List[Int] = List(5) 
```

有没有更短/更好/限制更少/更通用的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:00:57.473

您可以使用`putWith`写出我认为更具可读性的`logged`方法：

```
def logged[A, E, B, F[_]: PlusEmpty: Pointed](f: A => E \/ B) = (a: A) =>
  WriterT.putWith(f(a).point[Id])(_.swap.toOption.orEmpty[F]).map(_.toOption) 
```

我还认为，`PlusEmpty`绑定的上下文`F`看起来比明确要求`F[E]]`成为一个幺半群要干净一些（当然，它完成了同样的事情）。遗憾的是，这`.point[Id]`一点是必要的——没有`Writer.putWith`——但我猜乞丐不能成为选择者。

我也会`keepOdd`这样写：

```
def keepOdd(n: Int) = Either.cond(n % 2 == 1, n, n + " was even").disjunction 
```

或者至少使用`n.right`代替`\/.right(n)`，但这只是口味问题。

# php - Mysql插入冲突

> ID：12447999
> 
> 赞同：2
> 
> 时间：2012-09-16T15:06:07.607
> 
> 标签：php, mysql

我有一个包含这些列的表：[user_id][game_id] 当两个玩家加入游戏时，我需要关闭游戏。我使用了这段代码：

```
if(mysql_num_rows(mysql_query("SELECT user_id FROM live_games WHERE game_id = '$gid'"))<2){
mysql_query("INSERT INTO live_games (user_id, game_id) VALUES ('$uid', '$gid')");
echo "You have joined the game";
}else{
echo "Table is full";
} 
```

该代码将只允许两个玩家注册，但有时当网站上的用户过多时，此条件将不起作用，并且会在表格中添加三个用户。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T15:15:00.993

你有几个选择：

1.  如果使用 InnoDB 存储引擎，请在与语句[`SELECT ... FOR UPDATE`](http://dev.mysql.com/doc/en/innodb-locking-reads.html)相同的事务中执行锁定读取。`INSERT`

    使用 PDO：

    ```
    $dbh = new PDO("mysql:dbname=$dbname;charset=utf8", $username, $password);
    $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

    $dbh->beginTransaction();
    $qry = $dbh->prepare('
      SELECT COUNT(*) FOR UPDATE FROM live_games WHERE game_id = ?
    ');
    $qry->execute([$gid]);

    if ($qry->fetchColumn() < 2) {
      $qry = $dbh->prepare('
        INSERT INTO live_games (user_id, game_id) VALUES (?, ?)
      ');
      $qry->execute([$uid, $gid]);
      if ($qry->rowCount() && $dbh->commit()) echo 'You have joined the game';
    } else {
      $dbh->rollBack();
      echo 'Table is full';
    } 
    ```

2.  更改表结构，使有两列，`player1`并且`player2`（最初`NULL`）和 perform `UPDATE live_games SET player2 = ? WHERE game_id = ? AND player2 IS NULL`，然后检查受影响的行数；或者

3.  更改表结构，以便有一个额外的`playerNumber`列，然后创建一个复合`UNQUE`索引`(game_id, playerNumber)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:11:14.820

您正在运行两个查询以查看是否有人可以进入游戏。

完全有可能三个玩家同时点击加入，并且 SELECT 查询返回游戏（当前）有 0 个玩家；所以他们都被允许进入 - 然后更新开始，并阻止其他玩家加入。

如果要修复它，则需要找到另一种方法-您可以添加文件锁，以便一次只运行一个 SELECT 查询，或者我相信将其包装在事务中也可以-这基本上将两个查询作为一个实体运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T15:14:35.910

您需要使用[**LOCK TABLES**](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)语句将查询括起来，如下所示：

```
mysql_query("LOCK TABLES live_games WRITE");

if(mysql_num_rows(mysql_query("SELECT user_id FROM live_games WHERE game_id = '$gid'"))<2){
mysql_query("INSERT INTO live_games (user_id, game_id) VALUES ('$uid', '$gid')");
echo "You have joined the game";
}else{
echo "Table is full";
}

mysql_query("UNLOCK TABLES"); 
```

这将强制对您的表进行串行访问，从而避免不同用户同时执行相同代码的并发问题。