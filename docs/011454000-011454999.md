# StackOverflow 问答 11454000-11454999

# c# - 从字符串计算 MD5 哈希

> ID：11454004
> 
> 赞同：179
> 
> 时间：2012-07-12T14:26:02.070
> 
> 标签：c#, md5

我使用以下 C# 代码从字符串计算 MD5 哈希。它运行良好并生成一个 32 个字符的十六进制字符串，如下所示： `900150983cd24fb0d6963f7d28e17f72`

```
string sSourceData;
byte[] tmpSource;
byte[] tmpHash;
sSourceData = "MySourceData";

//Create a byte array from source data.
tmpSource = ASCIIEncoding.ASCII.GetBytes(sSourceData);
tmpHash = new MD5CryptoServiceProvider().ComputeHash(tmpSource);

// and then convert tmpHash to string... 
```

有没有办法使用这样的代码来生成 16 个字符的十六进制字符串（或 12 个字符的字符串）？一个 32 个字符的十六进制字符串很好，但我认为客户输入代码会很无聊！

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2014-06-04T07:27:47.453

根据[MSDN](https://msdn.microsoft.com/en-us/library/system.security.cryptography.md5%28v=vs.110%29.aspx)

创建MD5：

```
public static string CreateMD5(string input)
{
    // Use input string to calculate MD5 hash
    using (System.Security.Cryptography.MD5 md5 = System.Security.Cryptography.MD5.Create())
    {
        byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(input);
        byte[] hashBytes = md5.ComputeHash(inputBytes);

        // Convert the byte array to hexadecimal string
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < hashBytes.Length; i++)
        {
            sb.Append(hashBytes[i].ToString("X2"));
        }
        return sb.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2012-07-13T19:54:56.697

```
// given, a password in a string
string password = @"1234abcd";

// byte array representation of that string
byte[] encodedPassword = new UTF8Encoding().GetBytes(password);

// need MD5 to calculate the hash
byte[] hash = ((HashAlgorithm) CryptoConfig.CreateFromName("MD5")).ComputeHash(encodedPassword);

// string representation (similar to UNIX format)
string encoded = BitConverter.ToString(hash)
   // without dashes
   .Replace("-", string.Empty)
   // make lowercase
   .ToLower();

// encoded contains the hash you want 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-07-20T01:45:11.127

试图使用 LINQ 创建 MD5 哈希的字符串表示，但是，没有一个答案是 LINQ 解决方案，因此将其添加到可用解决方案的大杂烩中。

```
string result;
using (MD5 hash = MD5.Create())
{
    result = String.Join
    (
        "",
        from ba in hash.ComputeHash
        (
            Encoding.UTF8.GetBytes(observedText)
        ) 
        select ba.ToString("x2")
    );
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-07-12T15:05:52.367

您可以使用`Convert.ToBase64String`将 MD5 的 16 字节输出转换为 ~24 字符字符串。在不降低安全性的情况下好一点。（`j9JIbSY8HuT89/pwdC8jlw==`对于你的例子）

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-07-12T14:28:30.837

完全取决于您要达到的目标。从技术上讲，您可以只从 MD5 散列的结果中获取前 12 个字符，但 MD5 的规范是生成一个 32 个字符的字符。

减小散列的大小会降低安全性，并增加冲突和系统被破坏的机会。

也许如果您让我们更多地了解您正在努力实现的目标，我们可能会提供更多帮助。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-02-24T21:40:24.017

我想最好在字符串 MD5 中使用 UTF-8 编码。

```
public static string MD5(this string s)
{
    using var provider = System.Security.Cryptography.MD5.Create();        
    StringBuilder builder = new StringBuilder();                           

    foreach (byte b in provider.ComputeHash(Encoding.UTF8.GetBytes(s)))
        builder.Append(b.ToString("x2").ToLower());

    return builder.ToString();        
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-03-29T14:15:05.817

支持字符串和文件流。

例子

```
string hashString = EasyMD5.Hash("My String");

string hashFile = EasyMD5.Hash(System.IO.File.OpenRead("myFile.txt")); 
```

-

```
 class EasyMD5
        {
            private static string GetMd5Hash(byte[] data)
            {
                StringBuilder sBuilder = new StringBuilder();
                for (int i = 0; i < data.Length; i++)
                    sBuilder.Append(data[i].ToString("x2"));
                return sBuilder.ToString();
            }

            private static bool VerifyMd5Hash(byte[] data, string hash)
            {
                return 0 == StringComparer.OrdinalIgnoreCase.Compare(GetMd5Hash(data), hash);
            }

            public static string Hash(string data)
            {
                using (var md5 = MD5.Create())
                    return GetMd5Hash(md5.ComputeHash(Encoding.UTF8.GetBytes(data)));
            }
            public static string Hash(FileStream data)
            {
                using (var md5 = MD5.Create())
                    return GetMd5Hash(md5.ComputeHash(data));
            }

            public static bool Verify(string data, string hash)
            {
                using (var md5 = MD5.Create())
                    return VerifyMd5Hash(md5.ComputeHash(Encoding.UTF8.GetBytes(data)), hash);
            }

            public static bool Verify(FileStream data, string hash)
            {
                using (var md5 = MD5.Create())
                    return VerifyMd5Hash(md5.ComputeHash(data), hash);
            }
        } 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-12-24T07:51:01.723

```
public static string Md5(string input, bool isLowercase = false)
{
    using (var md5 = MD5.Create())
    {
        var byteHash = md5.ComputeHash(Encoding.UTF8.GetBytes(input));
        var hash = BitConverter.ToString(byteHash).Replace("-", "");
        return (isLowercase) ? hash.ToLower() : hash;
    }
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-01-18T14:17:29.077

此解决方案需要 c# 8 并利用`Span<T>`. 请注意，如果需要，您仍然需要调用`.Replace("-", string.Empty).ToLowerInvariant()`以格式化结果。

```
public static string CreateMD5(ReadOnlySpan<char> input)
{
    var encoding = System.Text.Encoding.UTF8;
    var inputByteCount = encoding.GetByteCount(input);
    using var md5 = System.Security.Cryptography.MD5.Create();

    Span<byte> bytes = inputByteCount < 1024
        ? stackalloc byte[inputByteCount]
        : new byte[inputByteCount];
    Span<byte> destination = stackalloc byte[md5.HashSize / 8];

    encoding.GetBytes(input, bytes);

    // checking the result is not required because this only returns false if "(destination.Length < HashSizeValue/8)", which is never true in this case
    md5.TryComputeHash(bytes, destination, out int _bytesWritten);

    return BitConverter.ToString(destination.ToArray());
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-09-05T20:55:19.020

这是我的实用程序函数，如果需要`UTF8`，可以替换为`ASCII`：

```
 public static byte[] MD5Hash(string message)
    {
        return MD5.Create().ComputeHash(Encoding.UTF8.GetBytes(message));
    } 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-07-12T14:28:52.647

MD5 哈希是 128 位，所以你不能用少于 32 个字符的十六进制表示它......

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-05-02T08:32:05.610

```
System.Text.StringBuilder hash = new System.Text.StringBuilder();
        System.Security.Cryptography.MD5CryptoServiceProvider md5provider = new System.Security.Cryptography.MD5CryptoServiceProvider();
        byte[] bytes = md5provider.ComputeHash(new System.Text.UTF8Encoding().GetBytes(YourEntryString));

        for (int i = 0; i < bytes.Length; i++)
        {
            hash.Append(bytes[i].ToString("x2")); //lowerCase; X2 if uppercase desired
        }
        return hash.ToString(); 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-04-03T08:27:12.117

.NET Core 2.1 及更高版本的现有答案的更快替代方案：

```
public static string CreateMD5(string s)
{
    using (System.Security.Cryptography.MD5 md5 = System.Security.Cryptography.MD5.Create())
    {
        var encoding = Encoding.ASCII;
        var data = encoding.GetBytes(s);

        Span<byte> hashBytes = stackalloc byte[16];
        md5.TryComputeHash(data, hashBytes, out int written);
        if(written != hashBytes.Length)
            throw new OverflowException();

        Span<char> stringBuffer = stackalloc char[32];
        for (int i = 0; i < hashBytes.Length; i++)
        {
            hashBytes[i].TryFormat(stringBuffer.Slice(2 * i), out _, "x2");
        }
        return new string(stringBuffer);
    }
} 
```

如果您确定您的字符串足够小并用 unsafe int GetBytes(ReadOnlySpan chars, Span bytes) 替代 encoding.GetBytes 替换，您可以进一步优化它。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2020-04-21T10:56:10.793

Idk 任何关于 16 个字符的十六进制字符串....

```
using System;
using System.Security.Cryptography;
using System.Text; 
```

但这是我在一行中创建 MD5 哈希的方法。

```
string hash = BitConverter.ToString(MD5.Create().ComputeHash(Encoding.ASCII.GetBytes("THIS STRING TO MD5"))).Replace("-",""); 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2021-01-22T03:58:52.497

扩展[Anant Dabhi](https://stackoverflow.com/users/1460657/anant-dabhi)的[答案](https://stackoverflow.com/a/24031467/4490058)

辅助方法：

```
using System.Text;

namespace XYZ.Helpers
{
    public static class EncryptionHelper
    {
        public static string ToMD5(this string input)
        {
            // Use input string to calculate MD5 hash
            using (System.Security.Cryptography.MD5 md5 = System.Security.Cryptography.MD5.Create())
            {
                byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(input);
                byte[] hashBytes = md5.ComputeHash(inputBytes);

                // Convert the byte array to hexadecimal string
                StringBuilder sb = new StringBuilder();
                for (int i = 0; i < hashBytes.Length; i++)
                {
                    sb.Append(hashBytes[i].ToString("X2"));
                }
                return sb.ToString();
            }
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-03-05T08:23:16.547

[https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.md5?view=netframework-4.7.2](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.md5?view=netframework-4.7.2)

```
using System;
using System.Security.Cryptography;
using System.Text;

    static string GetMd5Hash(string input)
            {
                using (MD5 md5Hash = MD5.Create())
                {

                    // Convert the input string to a byte array and compute the hash.
                    byte[] data = md5Hash.ComputeHash(Encoding.UTF8.GetBytes(input));

                    // Create a new Stringbuilder to collect the bytes
                    // and create a string.
                    StringBuilder sBuilder = new StringBuilder();

                    // Loop through each byte of the hashed data 
                    // and format each one as a hexadecimal string.
                    for (int i = 0; i < data.Length; i++)
                    {
                        sBuilder.Append(data[i].ToString("x2"));
                    }

                    // Return the hexadecimal string.
                    return sBuilder.ToString();
                }
            }

            // Verify a hash against a string.
            static bool VerifyMd5Hash(string input, string hash)
            {
                // Hash the input.
                string hashOfInput = GetMd5Hash(input);

                // Create a StringComparer an compare the hashes.
                StringComparer comparer = StringComparer.OrdinalIgnoreCase;

                return 0 == comparer.Compare(hashOfInput, hash);

            } 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-11-27T01:11:18.943

我想提供一个替代方案，它在我的测试（.NET 4.7.2）中的执行速度至少比[craigdfrench 的答案快 10%：](https://stackoverflow.com/a/38471020/3258851)

```
public static string GetMD5Hash(string text)
{
    using ( var md5 = MD5.Create() )
    {
        byte[] computedHash = md5.ComputeHash( Encoding.UTF8.GetBytes(text) );
        return new System.Runtime.Remoting.Metadata.W3cXsd2001.SoapHexBinary(computedHash).ToString();
    }
} 
```

如果您更喜欢`using System.Runtime.Remoting.Metadata.W3cXsd2001;`放在顶部，可以使方法主体更易于阅读：

```
using ( var md5 = MD5.Create() )
{
    return new SoapHexBinary( md5.ComputeHash( Encoding.UTF8.GetBytes(text) ) ).ToString();
} 
```

很明显，但为了完整起见，在 OP 的上下文中，它将用作：

```
sSourceData = "MySourceData";
tmpHash = GetMD5Hash(sSourceData); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-03-31T05:23:04.070

```
StringBuilder sb= new StringBuilder();
for (int i = 0; i < tmpHash.Length; i++)
{
   sb.Append(tmpHash[i].ToString("x2"));
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-10-13T05:59:36.833

```
 public static string GetMD5(string encryptString)
    {
        var passByteCrypt = new MD5CryptoServiceProvider().ComputeHash(Encoding.UTF8.GetBytes(encryptString));

        return ByteArrayToString(passByteCrypt);
    }
    public static string ByteArrayToString(byte[] bytes)
    {
        var output = new StringBuilder(bytes.Length);

        foreach (var t in bytes)
        {
            output.Append(t.ToString("X2"));
        }

        return output.ToString().ToLower();
    } 
```

这是简单的 md5 ByteCrypt

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-11-01T16:14:58.607

这是一个精简版。

```
private string CreateMD5(string myText)
{
    var hash = System.Security.Cryptography.MD5.Create()
        .ComputeHash(System.Text.Encoding.ASCII.GetBytes(myText ?? ""));
    return string.Join("", Enumerable.Range(0, hash.Length).Select(i => hash[i].ToString("x2")));
} 
```

# iphone - 虚拟货币的应用程序内购买是如何被禁止但如此广泛使用的？

> ID：11454008
> 
> 赞同：9
> 
> 时间：2012-07-12T14:26:13.577
> 
> 标签：iphone, ios, in-app-purchase

[在Apple 的应用内购买指南](https://developer.apple.com/appstore/in-app-purchase/In-App-Purchase-Guidelines.pdf)第二页的底部，它说不允许通过应用内购买出售虚拟货币。然而，今天应用商店中的许多游戏都出售“硬币”或类似的东西，然后用户将其用于各种升级或权力。我正在设计一个应该做类似事情的应用程序，但我显然不希望它被拒绝。任何人都可以对这种情况有所了解吗？另外，如果通过信用购买的物品是非消耗品，Apple 会托管它们吗？如果通过信用购买，我可以跟踪哪些已购买以及购买了多少次？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T14:48:15.517

这是一个很好的问题。我认为虚拟货币应用程序就像放屁机和手电筒应用程序：它们最初被商店接受，但苹果最终意识到他们不希望在他们的商店中出现这种类型的应用程序。因此，那些被接受的应用程序仍在商店中，但从现在开始，不再存在。

至于你的第二个和第三个问题，Apple 不会托管你的游戏或应用程序的任何内容，除非你可以进入 iCloud。他们只记录人们买了哪些东西。因此，如果有人购买了 12 次 1000 个硬币，Apple 会知道这一点，但您必须通过 iCloud 或您自己的服务器跟踪客户留下了多少硬币。

**更新：**看起来 Apple 将根据[Apple Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)接受应用内购买虚拟货币。第 11.4 节规定：

> 使用 IAP 购买积分或其他货币的应用程序必须在应用程序内消耗这些积分

因此，只要货币可以在您的应用程序中兑换，就可以了。然而，就在介绍中，它确实说：

> 我们不再需要任何放屁应用程序。

屁应用都出来了，但虚拟货币还行！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:17:02.990

我认为 woz 关于现有应用程序如何通过虚拟“硬币”到达那里是正确的，它们是在 Apple 收紧指导方针之前提交的。后续更新可能会被拒绝。主要问题是虚拟货币意味着您可以更改汇率，因此如果用户不及时兑换，购买价值 5 美元的虚拟币随后可能会贬值至价值 2 美元的虚拟币。这与 Apple 的指导方针一致，即“让用户了解他们所购买的特定商品或服务非常重要”。

至于跟踪购买的物品，非消耗品是只能购买一次的东西：如果用户再次尝试购买，商店会告诉你购买成功，但不会导致第二次交易. 如果您想要可以多次购买的东西，那么您需要自己跟踪它，并使其成为消耗品。

# java - 为什么只有在做防御性副本后才检查有效性？

> ID：11454013
> 
> 赞同：0
> 
> 时间：2012-07-12T14:26:23.577
> 
> 标签：java

请注意此代码：

```
public Period(Date start, Date end) {
 this.start = new Date(start.getTime());
 this.end = new Date(end.getTime());
 if (this.start.compareTo(this.end) > 0)
  throw new IllegalArgumentException(start +" after "+ end); 
```

}

`compareTo()`如果在防御性地将可变参数复制到构造函数之前完成对参数有效性的检查（即调用），我不明白这有什么关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:29:21.477

在并发环境中，`start.getTime()`并且`end.getTime()`可以在该构造函数中间的任何地方更改。

特别是，如果首先完成检查，您可能有通过检查的输入，然后另一个线程使用无效值修改它们，然后防御性副本复制无效值。结果：世界末日。

这不太可能，也不是那么大的问题，但在谨慎方面犯错是有道理的——毕竟，这就是为什么它被称为防御性编程。

# php - 如何使用 preg_match_all 获取帖子的所有图像

> ID：11454015
> 
> 赞同：0
> 
> 时间：2012-07-12T14:26:30.650
> 
> 标签：php, regex, image, extract, preg-match-all

我有一个博客条目，其中包含多张图片（有时一张，有时两张，有时三张），看起来有点像这样：

```
<a href="http://xxx/" rel="attachment w133>
  <img class="yyy" title="title1" src="http://xxx/title1.jpg" alt="" width="650" height="487" />
</a>
<a href="http://xxx/" rel="attachment w134">
  <img class="yyy" title="title2" src="http://xxx/title2.jpg" alt="" width="650" height="487" />
</a>
<a href="http://xxx/" rel="attachment w135">
  <img class="yyy" title="title3" src="http://xxx/title3.jpg" alt="" width="650" height="487" />
</a> 
```

在此之后有一些文字。

现在，我想知道如何使用 preg_match_all 来提取第一部分。我现在对 PHP 编程有所了解，但从未使用过 preg_match_all。

这里的代码确实只提取最后一张图像，这还不够：

```
$output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $post_content, $matches); 
```

如果有人可以给我一个提示如何实现这一点，那就太好了，如果有可能的话。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:34:57.467

```
$post_content='<a href="http://xxx/" rel="attachment w133>
  <img class="yyy" title="title1" src="http://xxx/title1.jpg" alt="" width="650" height="487" />
</a>
<a href="http://xxx/" rel="attachment w134">
  <img class="yyy" title="title2" src="http://xxx/title2.jpg" alt="" width="650" height="487" />
</a>
<a href="http://xxx/" rel="attachment w135">
  <img class="yyy" title="title3" src="http://xxx/title3.jpg" alt="" width="650" height="487" />
</a>
';

preg_match_all('/<a\s[^>]*href=([\"\']??)([^\" >]*?)\\1[^>]*>(.*)<\/a>/siU', $post_content, $matches);
//print_r ($matches);//$matches - array which contains all your images
print $matches[0][0]; //first link with image
print $matches[0][1]; //second link with image
print $matches[0][2]; //third link with image 
```

输出：

```
<a href="http://xxx/" rel="attachment w133&gt;
  &lt;img class=" yyy"="" title="title1" src="http://xxx/title1.jpg" alt="" width="650" height="487">
</a>
<a href="http://xxx/" rel="attachment w134">
  <img class="yyy" title="title2" src="http://xxx/title2.jpg" alt="" width="650" height="487">
</a>
<a href="http://xxx/" rel="attachment w135">
  <img class="yyy" title="title3" src="http://xxx/title3.jpg" alt="" width="650" height="487">
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:35:41.863

尝试：

```
preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"][^\/>]*>/Ui', $post_content, $matches);
print_r($matches); 
```

# hadoop - Hadoop/Hbase 批量加载的性能提升

> ID：11454019
> 
> 赞同：0
> 
> 时间：2012-07-12T14:26:42.413
> 
> 标签：hadoop, mapreduce, hbase

我通过hadoop多节点集群的importsv工具将1000万条记录加载到Hbase表中。现在，这项任务需要 5 分钟。但我想知道如何提高这个性能。importtsv 工具似乎根本不像使用减速器。我想知道我是否可以强制它使用减速器，它可以提高性能或您认为可以提高性能的任何其他方式将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:55:38.623

尝试使用带 HfileOutPutFormat 的 Importtsv 和 completeBulkLoadTool。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:47:26.637

在性能方面，没有简单的答案。如果 5 分钟等于网络的速度，或者硬盘的速度，你必须将源数据移动到其他地方或更改硬件。

我不知道进口v。我建议你尝试多路加载。看看 Sqoop。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T15:27:26.933

您可以通过使用`HFileOutputFormat`和获得最佳的 HBase 批量加载性能`CompleteBulkLoad`

[在这里](http://databuff.blogspot.com/2013/11/bulk-load-data-in-hbase-table.html#.V3-BVut9744)检查。

# events - jQueryMobile 使整个页面可点击

> ID：11454024
> 
> 赞同：0
> 
> 时间：2012-07-12T14:26:50.927
> 
> 标签：events, jquery-mobile

我必须通过一个简单的示例来演示我在 Android 手机上遇到的问题：

```
<!doctype html>
<html class="no-js" lang="en"> 
    <head>
            <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css">

            <script src="http://code.jquery.com/jquery-1.7.2.js"><\/script>')</script>
            <script src="js/libs/jquery.mobile-1.1.0.min.js"></script>
    </head>
    <body>
            <div data-role="page" id="login">
                    <div data-role="content">
                        This is a TEST
                    </div><!-- /content -->
            </div><!-- /page -->
    </body>
</html> 
```

现在，当您在 android 浏览器中加载它并点击页面上的某个位置时，您将看到页面突出显示和单击声音。这有多烦人，我绝对想把它关掉，但这可能吗？

干杯卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:11:11.733

将以下内容放在您的 HTML 页面的头部。

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

# php - 用 PHP 提取和解析一个大字符串

> ID：11454025
> 
> 赞同：0
> 
> 时间：2012-07-12T14:26:53.663
> 
> 标签：php, string, parsing

我想使用 php 从字符串中提取标签和数据。字符串如下所示：

```
 Label: Info;
 Label1: Info1;
 Label2: Info2;
 Label3: Info3;
 .............. 
```

我的解决方案是对每个 label 使用 strpos ，将其保留在一个变量中，并为该标签提取数据，这太慢了。你能建议我另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:39:46.647

我当然不是 REGEX 专家，但这是我想出的有效解决方案。

```
$ptn = "/(Label[0-9]?):?.?(.+);/";
$str = "Label: Info;
Label1: Info1;
Label2: Info2;
Label3: Info3;";
preg_match_all($ptn, $str, $matches, PREG_SET_ORDER); 
```

现在使用`print_r`on`$matches`返回以下内容：

```
Array
(
    [0] => Array
        (
            [0] => Label: Info;
            [1] => Label
            [2] => Info
        )

    [1] => Array
        (
            [0] => Label1: Info1;
            [1] => Label1
            [2] => Info1
        )

    [2] => Array
        (
            [0] => Label2: Info2;
            [1] => Label2
            [2] => Info2
        )

    [3] => Array
        (
            [0] => Label3: Info3;
            [1] => Label3
            [2] => Info3
        )

) 
```

# geocoding - 地理编码器不起作用，无法在警报框中显示长和纬度

> ID：11454027
> 
> 赞同：0
> 
> 时间：2012-07-12T14:26:59.493
> 
> 标签：geocoding, google-geocoder

我是 javascript 和地理编码的新手，我正在尝试学习如何将两者结合使用。

我创建了一个表单来获取用户输入的邮政编码，然后我有代码将其转换为 long 和 lat。我已经包含并提醒显示邮政编码，以便我知道有多少工作（更多帮助我自学）

它返回带有输入邮政编码的警报框，但没有别的！？

我希望它在警报框中显示长和纬度。一旦我知道我有 long 和 lat，我会考虑将它们添加到 MySQL 表中，但是一旦我知道我已经检索了这些值，我就会担心

这是代码：

```
 <html>
<head>
<script type="text/javascript"> 
function getPostCode() {
var postcode = document.getElementById("pcode").value;
    alert("Your Post Code is: " + postcode);
var gc = new google.maps.Geocoder();
gc.geocode({'address' : postcode}, function(results, status){ 
if (status == google.maps.GeocoderStatus.OK) {
        alert( "latitude : " + results[0].geometry.location.lat() ); 
        alert( "longitude : " + results[0].geometry.location.lng() ); 
} else {
    alert("Geocode was not successful for the following reason: " + status);
}
}); 
}
</script>
</head>
<body>
 <form name="search" METHOD="GET" onsubmit="return getPostCode()">
 Post Code: <input type="text" name="pcode" />
 <input type="submit" value="Search"/>
 </form>
</body>
</html> 
```

任何帮助将非常感激

- - - - - - - - 更新 - - - - - - - - - -

马特感谢您到目前为止的帮助，我现在已经编辑了代码以将值输出到段落标签并删除了警告框，但它仍然不会显示经纬度，我的地理编码代码是否正确？它通过邮政编码而不是经纬度或错误。

```
 <html>
<head>
<script type="text/javascript"> 
function getPostCode() {
var postcode = document.getElementById("pcode").value;
    var postcode = "Your Post Code is: " + postcode;
    document.getElementById("p1").innerHTML=postcode;
var mygc = new google.maps.Geocoder();
mygc.geocode({'address' : postcode}, function(results, status){ 
if (status == google.maps.GeocoderStatus.OK) {
        var lat = results[0].geometry.location.lat();
document.getElementById("lat").innerHTML=lat; 
        var lat = results[0].geometry.location.lng();
document.getElementById("long").innerHTML=long; 
} else {
    var err = "Geocode was not successful for the following reason: " + status;
document.getElementById("error").innerHTML=err;
}
}); 
}
</script>
</head>

<body>

 <form name="search">
 Post Code: <input type="text" name="pcode" />
 <input type="button" value="Search" onclick="getPostCode()" />
 </form>

<p id="p1"></p>
<p id="long"></p>
<p id="lat"></p>
<p id="error"></p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:55:58.463

我不是 100% 确定你在做什么，因为你说你正在使用 API 的 v3，但你不需要为 v3 构建 google.maps.geocoder - 这是第 2 版的东西。除此之外，您甚至没有在带有`<script>`标签的页面中包含 Google 的 Javascript。查看您的 Javascript 控制台。它可能会引发错误。

要使用 v3 进行地理编码，只需向此 URL 发出请求，例如：

[http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false)

响应是可以解析的 JSON。不需要类、实例化等。

那是你想要做的吗？

# ruby-on-rails - 防止用户发布虚假 AJAX 请求（确保 AJAX 请求仅来自应用程序）

> ID：11454028
> 
> 赞同：10
> 
> 时间：2012-07-12T14:26:59.857
> 
> 标签：ruby-on-rails, ajax, security

我正在开发一个网络应用程序，其中某些操作会为用户赢得“业力”。业力增量是一个简单的 AJAX 请求，它增加数据库中的一个数字。现在有什么办法可以防止用户手动发出重复的 AJAX 请求并一次又一次地增加自己的分数？

编辑：获得用户业力的活动都是使用 javascript 在客户端发生的。因此，服务器无法知道它是来自应用程序的“真实”请求还是由用户在控制台上键入 $.post 创建的“假”请求。

Edit2：找到了一个[类似的 SO question](https://stackoverflow.com/questions/9240644/how-to-save-unauthorised-manipulation-in-a-javascript)来处理这个问题。听起来答案是，通过混淆来确保安全是最好的选择。保证安全是不可能的。因此，任何有关加密工具等的建议都会使 AJAX 调用的内容更难阅读，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T16:37:44.800

与其试图阻止人们作弊，不如专注于尽量减少作弊者对非作弊者的不利影响：

如果业力被用作“高分”并且您担心用户获得业力的速度比他们应该考虑保留他们最后一次获得业力的时间戳，如果太早拒绝请求和/或设置业力的每日限制，因此当他们不在键盘前时，他们无法自动化该过程。

如果为用户赚取业力的操作也对其他用户产生影响，那么它应该是一个触发这两种效果的 ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:20:14.410

您可以检查登录用户是否是业力所有者，如下所示：

```
if current_user.id == karma.user_id
  #... throw error
else
  karma.save
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:45:24.627

您的服务器应该跟踪客户端活动，以便推断 ajax 调用的执行是“逻辑”还是“假”。这可以通过会话（不推荐）来完成，因为也可以伪造（取决于某些因素），或者直接在数据库上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:37:22.587

*一般来说，我不太愿意提供安全建议，但因为这只是为了增加应用程序中的业力，所以我会试一试。*

使用[HMAC](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)摘要怎么样？您需要在客户端登录应用程序时为他们生成一个密钥，并且客户端在增加业力时需要发送三位数据：

1.  他们是谁（用户名）。
2.  他们想增加谁（用户名）。
3.  您在登录时提供给他们的密钥的 HMAC 摘要以及两个用户名的连接。

然后，服务器在上面 (1) 中查找用户名的密钥，并将加载的密钥的 HMAC 摘要和用户名的连接与上面 (3) 中提供的 HMAC 摘要进行比较。

您可以完全拒绝（1）和（2）中的用户名比较相同的情况 - 这将防止用户增加他们自己的业力。

您还可以拒绝摘要不匹配的情况 - 这将捕获用户试图欺骗业力增量请求的情况。

如果您在登录时共享的密钥被截获，其他用户可能会使用它来生成虚假的业力增量。

您应该能够找到 Ruby 和 JavaScript 的 HMAC 实现来实现这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T14:39:38.120

这个问题有几个解决方案。其中之一是“禁用”您的链接或按钮或您单击以发送 AJAX 请求的任何内容。
如果你使用 JQuery，你有一些回调：`beforeSend`和`success`. 您可以尝试在回调中“禁用”您的触发器，然后在（或）回调`beforeSend`中“启用”它。`success``complete`

```
$.ajax({
  url: "/example",
  beforeSend: function(){
    #disable trigger
  },
  complete: function(){
    #enable trigger
  }
}) 
```

但我认为这是一种 hack :)

# python - python：使用正则表达式删除特定字符的第一个实例

> ID：11454029
> 
> 赞同：0
> 
> 时间：2012-07-12T14:27:00.863
> 
> 标签：python, regex

我有一个脚本可以编译和 .exe 文件并运行该 .exe 文件`--tree=all`。这将返回存储文件的目录，我想使用该路径来运行它。

这是我得到的输出`--tree=all`

`| | +-out\windows-x86-MD-mbcs-vs2008-rel\bin\VisualStudio08-32bit.exe`

所以我用以下来摆脱特殊字符

`line = re.sub('[|+ -]','',lines)`，这行得通，但它会删除所有 insta`-`

但这导致了这个

`out\windowsx86MDmbcsvs2008rel\bin\VisualStudio0832bit.exe`

删除 的每个实例`-`，我如何确保只删除第一个实例？，剩下的就不用管了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:37:28.647

您需要将替换分成两部分，第二部分将替换的次数限制为一。

```
line = re.sub('[|+ ]','',lines)
line = re.sub('-','',line, 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:43:52.680

如果您可以依赖名称前的“-”并且您不坚持使用正则表达式：

```
s = '| | +-out\windows-x86-MD-mbcs-vs2008-rel\bin\VisualStudio08-32bit.exe'
print s.split('-', 1)[1]
# out\windows-x86-MD-mbcs-vs2008-relin\VisualStudio08-32bit.exe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:30:00.667

您可以使用`re.sub('^[|+ -]*', '', line)`删除行首的特殊字符。

# android - 如何将传感器数据转换为度数

> ID：11454033
> 
> 赞同：1
> 
> 时间：2012-07-12T14:27:06.640
> 
> 标签：android, geometry, android-sensors

我正在从我的设备（为 android 编程）获取各种传感器读数，我希望将滚动（似乎是数字 1-100）转换为以度为单位的角度，并将磁力计航向转换为度数..

任何简单的方程式都会受到赞赏..我的几何是短暂的记忆..

```
public void onSensorChanged(SensorEvent evt) {
            int type=evt.sensor.getType();
            if(type == Sensor.TYPE_ORIENTATION){
                azimuth = evt.values[0]; // azimuth rotation around the z-axis
                pitch = evt.values[1];   // pitch rotation around the x-axis
                roll = evt.values[2];    // roll rotation around the y-axis
            }

            //Smoothing the sensor data a bit seems like a good idea.
            if (type == Sensor.TYPE_MAGNETIC_FIELD) {
                orientation[0]=(orientation[0]*1+evt.values[0])*0.5f;
                orientation[1]=(orientation[1]*1+evt.values[1])*0.5f;
                orientation[2]=(orientation[2]*1+evt.values[2])*0.5f;
            } else if (type == Sensor.TYPE_ACCELEROMETER) {
                acceleration[0]=(acceleration[0]*2+evt.values[0])*0.33334f;
                acceleration[1]=(acceleration[1]*2+evt.values[1])*0.33334f;
                acceleration[2]=(acceleration[2]*2+evt.values[2])*0.33334f;
            }
            if ((type==Sensor.TYPE_MAGNETIC_FIELD) || (type==Sensor.TYPE_ACCELEROMETER)) {
                float newMat[]=new float[16];
                //Toast toast = Toast.makeText(ctx.getApplicationContext(), "accel", Toast.LENGTH_SHORT);
                //toast.show();
                SensorManager.getRotationMatrix(newMat, null, acceleration, orientation);
                if(displayOri==0||displayOri==2){
                    SensorManager.remapCoordinateSystem(newMat,SensorManager.AXIS_X*-1, SensorManager.AXIS_MINUS_Y*-1,newMat);
                }else{
                    SensorManager.remapCoordinateSystem(newMat,SensorManager.AXIS_Y, SensorManager.AXIS_MINUS_X,newMat);
                }
                matrix=newMat;
            }
        } 
```

我应该补充一点，我不确定我只是想滚动..我的应用程序锁定在横向模式，但显然用户可以在任何访问时将手机转到任何角度..所以我可能需要以上所有三个来获得角度 im寻找。

有问题的角度就像用户正在通过他们的手机看，无论他们如何拿着它，在现实世界中，我想要他们从地平线看的角度..

例如，如果他们正在看地平线，我希望返回 90 度，如果他们直视天空，我应该得到 180，直下 -180 .. 然后我还想要他们正在看的磁北度数..使用磁力计

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:11:10.773

`values[2]`应该已经包含程度值，在参考文献中[提到](http://developer.android.com/reference/android/hardware/SensorListener.html#onSensorChanged%28int,%20float%5B%5D%29)：

> values[2]：滚动，绕 Y 轴旋转（-90<=roll<=90），当 z 轴向 x 轴移动时为正值。

**更新**

看看这张图：http: [//developer.android.com/images/axis_device.png](http://developer.android.com/images/axis_device.png)

在这里您可以看到蓝色轴 - Y 轴。当你的手机转动它时，它被称为“滚动”。旋转的角度将包含在`values[2]`.

# windows - 如何将 stlport ifstream(HANDLE) 移植到 MS stl ifstream？

> ID：11454034
> 
> 赞同：0
> 
> 时间：2012-07-12T14:27:06.870
> 
> 标签：windows, stl, stlport

我目前正在使用 MSVS 2010 将代码从 stlport 5.1.3 移植到 stl。我遇到了一个问题，希望有人能帮助我。

代码中的某处是：

```
HANDLE lHandle = CreateFileW(...);

ifstream lStream( lHandle );

// more job here... 
```

这是使用 stlport 构建的，因为 basic_ifstream 有一个 cTor，它采用 void*。但标准 stl 没有。我应该写这样的东西：

```
ifstream lStream( /*FileName*/ ); 
```

...但我的文件名是**wchar_t** *. ifstream cTor 只需要**char** *...

你知道解决方法吗？

提前致谢，

多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:30:50.097

好吧，似乎 MSVC2010 中包含的 stl 提供了我需要的所有东西，但它不在文档中。

使用 CreateFile 是因为以前的 std::fstream 无法处理宽字符文件名。现在，它有一个 cTor 和一个 open() 成员。

此外，新版本的 ifstream 允许程序员设置共享保护模式。我也需要它，它是由 CreateFile 完成的......

因此，“新” stl 给了我所需的所有力量。只是文档中的一个小缺陷。

# c# - 有限状态机与 C# 中的另一种 UI 测试技术

> ID：11454035
> 
> 赞同：1
> 
> 时间：2012-07-12T14:27:11.120
> 
> 标签：c#, testing, user-interface, bots

我正在编写一个 UI 测试/机器人程序。该程序模拟一个人的行为。使用 FSM：当前窗口由状态表示，单击窗口按钮由转换。程序分析当前窗口并执行下一个转换。这里的问题。它可能会出现一个带有信息的意外窗口。一种解决方案是为每个状态定义一个转换，它描述了意外的窗口。

在启动程序之前，您需要选择所需的行为。因此，对于 FSM，我应该根据所选行为使用另一个过渡。Q1：你能用OOP方法解决这个问题吗？

我试图编写以下实现。每个状态都由一个类表示。在每个状态类中，都会调用一个重载方法，该方法决定应该选择下一个状态。我选择的语言是 C#。

Q2：我可以使用哪些编程方法来替代 FSM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:45:52.573

1) 对于改变行为/转换逻辑，您可以实现[Strategy Pattern](http://en.wikipedia.org/wiki/Strategy_pattern)，这是[C# 中的一个示例](http://www.codeproject.com/Articles/346873/Understanding-and-Implementing-the-Strategy-Patter)

2）您能否提供有关“程序模拟人的行为”的更多详细信息？你想要完成什么？浏览所有按钮？到达某个终点？

# c++ - C ++获取程序文件目录，附加额外路径并执行

> ID：11454036
> 
> 赞同：0
> 
> 时间：2012-07-12T14:27:11.367
> 
> 标签：c++, winapi

我正在尝试编写几行简单的代码来获取 XP 和 Vista/7 上的“程序文件”目录路径（在 vista/7 上我需要 x86 文件夹的路径），添加一些额外的路径到应用程序并执行它。

这是我到目前为止所拥有的，但它没有执行外部程序，也没有给出错误..

```
wchar_t localAppData[MAX_PATH];
STARTUPINFO sInfo;
PROCESS_INFORMATION pInfo;
SHGetFolderPath(NULL, CSIDL_PROGRAM_FILESX86, 0, NULL, localAppData);

std::wstringstream ss;
ss << localAppData << L"/MyApp/MyExe.exe";
LPCWSTR str = ss.str().c_str();
CreateProcess(str, NULL,NULL, NULL,FALSE,NULL,NULL,NULL,&sInfo,&pInfo);
return str; 
```

根据 hmjd 的建议，我已将代码更新为此：

```
wchar_t localAppData[MAX_PATH];
STARTUPINFO sInfo = { sizeof(STARTUPINFO), NULL, L"winsta0\\default" };
PROCESS_INFORMATION pInfo;
SHGetFolderPath(NULL, CSIDL_PROGRAM_FILESX86, 0, NULL, localAppData);
std::wstringstream ss;
ss << localAppData << L"/PacificPoker/bin/888poker.exe";
std::wstring ss_str = ss.str();
wchar_t* path = new wchar_t[ss_str.length() + 1]();
std::copy(ss_str.begin(), ss_str.end(), path);
CreateProcess(path, NULL,NULL, NULL,FALSE,NULL,NULL,NULL,&sInfo,&pInfo);
delete[] path;
return GetLastError(); 
```

仍然得到'3' `GetLastError`，但我可以确认`C:\Program Files\MyApp\MyExe.exe`存在..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:32:52.010

代码的几个问题：

*   `sInfo`没有初始化，你至少需要设置`cb`成员

    ```
    STARTUPINFO sInfo = { sizeof(STARTUPINFO),  // 'cb'
                          NULL,                 // 'lpReserved'
                          L"winsta0\\default" };// 'lpDesktop' 
    ```

有关[`STARTUPINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686331%28v=vs.85%29.aspx)更多详细信息，请参阅。

*   的第一个参数`CreateProcess()`应该是非常量，但是**如果它不是一个悬空指针，那么它**`c_str()`会被传递。该方法返回 a ，而 the正在返回一个指向该对象的指针，但它是一个临时对象，并在表达式 (the )的末尾被销毁，从而形成一个悬空指针。改成：`const` **`ss.str()``std::string``c_str()``std::string``;``str`**

     **```
    std::wstring ss_str = ss.str();
    wchar_t* path = new wchar_t[ss_str.length() + 1]();
    std::copy(ss_str.begin(), ss_str.end(), path);
    CreateProcess(path, ...);
    delete[] path; 
    ```** 

 **检查所有函数的返回值并查询`GetLastError()`以确定失败原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:04:26.180

您可能已经尝试过，但是`localAppData`如果您将 设置`CSIDL`为`CSIDL_PROGRAM_FILES`而不是`CSIDL_PROGRAM_FILESX86`?

如果您在 XP 下进行测试，我不知道`CSIDL_PROGRAM_FILESX86`会返回什么。**

# android - 安卓。ImageView 无法正确定位自身

> ID：11454037
> 
> 赞同：0
> 
> 时间：2012-07-12T14:27:12.563
> 
> 标签：android, imageview

我正在尝试放置一个填充屏幕宽度的图像，具有实际图像的高度（wrap_content）并位于布局的最底部。

我写了下面的代码，但是在第二个 ImageView（带有 drawable/user_board 的那个）和屏幕的最底部之间，有一个很小的空间。为什么是这样？我已经尝试将填充和边距设置为 0dp，但它似乎没有起到作用。有任何想法吗？

这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent" 
                android:layout_height="fill_parent"
                android:id="@+id/LayoutBoard"
                android:noHistory="true"
                android:padding="0dp" >
    <ImageView
        android:src="@drawable/game_interface_background"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="matrix" />
    <ImageView
        android:src="@drawable/user_board"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"        
        android:layout_alignParentBottom="true"
        android:layout_margin="0dp"
        android:padding="0dp" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:38:14.797

您的`user_board`图像底部没有一些透明空间吗？或者，也许您可​​以尝试在第二个的填充字段中设置负值`ImageView`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:34:52.130

使用`android:scaleType="fitXY"`并且包含在您的位图`ImageView`将调整大小以适合整个`ImageView`. 因此，在您的两个 imageViews 中使用此属性可能会隐藏该空白区域。但是请记住，这不会保持图像的纵横比。有关属性标签及其可能取值的更多信息，请参见[此处。](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)`android:scaleType`

# iphone - 对从服务器下载的 iPhone 图像使用 PNG 或 JPG

> ID：11454039
> 
> 赞同：1
> 
> 时间：2012-07-12T14:27:15.487
> 
> 标签：iphone, objective-c, image, cocoa-touch, png

我意识到 PNG 通常是 web 标准，但我可能有一些独特的情况。我正在构建一个从服务器下载大量图像的应用程序。下载需要尽可能快，尤其是通过 3G 连接。我一直在研究服务器上图像的最佳压缩方式。理想情况下，我使用的每张图片都可以使用某种拖放转换器快速调整应用程序的大小。当我将其中一张图片转换为 PNG 时，文件大小约为 130KB。然而，当转换为可接受的 JPG 质量时，文件大小远低于 50KB。我应该在应用程序中使用 JPG 吗？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:37:45.657

这实际上取决于图像的类型。基本规则是对照片使用 JPEG，对其他所有内容使用 PNG。

为什么会这样？JPEG 压缩是为照片设计的——照片可以处理有损压缩。另一方面，PNG 是为具有相似像素彼此接近的图像（直线、用一种颜色填充的区域、文本等）设计的压缩。如果您尝试在不是照片的图像上使用 JPEG，您会感到惊讶 - 它看起来不太好。

PNG 是一种标准 - 但用于图标、背景、图案等；不是为了照片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:28:54.233

是的，您可以使用 jpg。你不会遇到任何问题。这是质量和尺寸之间的权衡。Jpeg 通常更小，因为它被压缩以减小大小。Png是无损压缩的。

我已经制作了同时使用 png 和 jpeg 的应用程序，它们都像魅力一样工作。

编辑：您还可以查看此链接[PNG vs JPEG](http://www.labnol.org/software/tutorials/jpeg-vs-png-image-quality-or-bandwidth/5385/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:30:48.530

PNG图像尺寸很大，尽可能使用JPG（当您不需要透明度时）

# sql - Oracle中的查询超时

> ID：11454040
> 
> 赞同：1
> 
> 时间：2012-07-12T14:27:15.643
> 
> 标签：sql, database, oracle, stored-procedures

我想看看对公共汽车的预计到达时间所做的预测是否有实际的信息。我写了这个查询，它超时了。难道我做错了什么？有什么优化在这里有帮助吗？

```
SELECT
P.ROUTE,
P.CODE,
(
    SELECT  COUNT(*)
    FROM    MESSAGE M
    WHERE   M.SENTDATE BETWEEN P.ARRIVAL-(20/60/24) AND P.ARRIVAL+(2/60/24)
    AND TRIM(SUBSTR(M.LOCATIONINFO, 3, 10))  = P.ROUTE
    AND TRIM(SUBSTR(M.LOCATIONINFO, 25, 10)) = P.CODE
)
CNT
FROM
(
    SELECT  *
    FROM    PREDICTION P
    WHERE   P.ARRIVAL BETWEEN TO_DATE('2012/07/04 04:30:00', 'YYYY/MM/DD HH24:MI:SS')   
    AND TO_DATE('2012/07/04 04:30:10', 'YYYY/MM/DD HH24:MI:SS')
    AND P.ROUTE ='7'
    AND P.CODE  ='2179'
)
P 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:38:18.440

要真正了解发生了什么，我们需要查看查询计划。同时，尝试重写您的查询以获得显式连接：

```
SELECT COUNT(*) as cnt
FROM (SELECT  *
      FROM PREDICTION P
      WHERE P.ARRIVAL BETWEEN TO_DATE('2012/07/04 04:30:00', 'YYYY/MM/DD HH24:MI:SS') AND TO_DATE('2012/07/04 04:30:10', 'YYYY/MM/DD HH24:MI:SS')AND
            P.ROUTE ='7' AND
            P.CODE  ='2179'
     ) P join
     MESSAGE M
     on M.SENTDATE BETWEEN P.ARRIVAL-(20/60/24) AND P.ARRIVAL+(2/60/24) AND
        TRIM(SUBSTR(M.LOCATIONINFO, 3, 10)) = P.ROUTE AND
        TRIM(SUBSTR(M.LOCATIONINFO, 25, 10)) = P.CODE 
```

你正在做一个相当复杂的连接。两张桌子有多大？他们有任何索引吗？

我建议尝试：

```
SELECT COUNT(*) as cnt
FROM (SELECT  *
      FROM PREDICTION P
      WHERE P.ARRIVAL BETWEEN TO_DATE('2012/07/04 04:30:00', 'YYYY/MM/DD HH24:MI:SS') AND TO_DATE('2012/07/04 04:30:10', 'YYYY/MM/DD HH24:MI:SS')AND
            P.ROUTE ='7' AND
            P.CODE  ='2179'
     ) P join
     MESSAGE M
     on M.SENTDATE BETWEEN P.ARRIVAL-(20/60/24) AND P.ARRIVAL+(2/60/24) AND
        TRIM(SUBSTR(M.LOCATIONINFO, 3, 10)) = '7' AND
        TRIM(SUBSTR(M.LOCATIONINFO, 25, 10)) = '2179' 
```

这些是等价的。但是，在最初的情况下，Oracle 可能会看到一个复杂的三部分连接并且没有使用正确的索引。在第二种情况下，它应该使用 SENTDATE 索引，这应该会加快查询速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:44:39.497

除了将查询更改为使用联接而不是子查询（如已经建议的那样），您还可以尝试

*   在路由和代码的比较中去掉 trim(substr(...)) ，因为这会使 locationinfo 上的任何索引变得无用
*   去掉 7 和 2179 周围的引号（假设路线和代码是数字字段）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:35:14.420

试试这个，看看它是否能解决问题（并且结果是正确的！）：

```
SELECT COUNT(M.*) CNT
FROM
    PREDICTION P
INNER JOIN
    MESSAGE M
ON  M.SENTDATE BETWEEN P.ARRIVAL-(20/60/24) AND P.ARRIVAL+(2/60/24)
AND TRIM(SUBSTR(M.LOCATIONINFO, 3, 10))  = P.ROUTE                         
AND TRIM(SUBSTR(M.LOCATIONINFO, 25, 10)) = P.CODE  
WHERE P.ARRIVAL BETWEEN TO_DATE('2012/07/04 04:30:00', 'YYYY/MM/DD HH24:MI:SS') AND TO_DATE('2012/07/04 04:30:10', 'YYYY/MM/DD HH24:MI:SS')                         
AND P.ROUTE ='7'                         
AND P.CODE  ='2179' 
```

# bash - bash 如何重用找到的文件名？

> ID：11454041
> 
> 赞同：4
> 
> 时间：2012-07-12T14:27:16.173
> 
> 标签：bash

我想在目录中运行一个脚本，以便为每个找到的点文件生成一个 svg 文件。就像是：

```
find . -name "*.dot" -exec dot -Tsvg \{} \; 
```

这工作正常，但只是在标准输出上输出结果。通常我使用重定向来生成 svg 文件。如何获取点文件名以在重定向中使用它，例如

```
find . -name "*.dot" -exec dot -Tsvg > "$dotfilename".svg \{} \; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:45:44.410

您不需要输出重定向。使用 -O 保存到一个文件，该文件的名称是根据输入文件名和输出格式自动创建的。

```
find . -name "*.dot" -exec dot -Tsvg -O \{} \; 
```

只是指出您可以在 -exec 的参数中多次使用 {}：

```
find . -name "*.dot" -exec dot -Tsvg -o \{}.svg \{} \; 
```

第一个会从“foo.dot”产生“foo.svg”，第二个会产生“foo.dot.svg”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T14:30:16.640

以下：

```
for i in `find . -name "*.dot"`; do
   dot -Tsvg $i > $i.svg
done 
```

执行查找（在反引号中）并循环遍历结果，`dot`为每个结果执行。文件名在`$i`.

这使用[反引号替换](http://tldp.org/LDP/abs/html/commandsub.html)，并且是捕获命令输出以供随后在另一个命令中使用的有用机制。

要删除扩展名并添加另一个扩展名，请使用`${i%.*}.svg`. 有关更多信息，请参阅[此 SO 答案](https://stackoverflow.com/questions/965053/extract-filename-and-extension-in-bash)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T14:31:47.857

您不能在此处进行重定向。`find`确实使用`execvp(3)`或朋友执行，而不是外壳。相反，使用 shell glob，或制作一个脚本，然后您可以从中调用`find`

一个例子：

```
for i in ./*.dot
do
    svg=${i%.dot}.svg
    dot -Tsvg "$i" > "$svg"
done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T14:36:47.027

您遇到的问题是在 find 命令之前处理了重定向。您可以通过在 -exec 调用中生成另一个 bash 进程来解决此问题。这也使得使用参数扩展删除扩展变得容易。

```
find . -name "*.dot" -exec bash -c 'dot -Tsvg "$1" > "${1%.*}".svg' -- {} \; 
```

# php - PHP上传脚本 - 自动创建文件夹

> ID：11454053
> 
> 赞同：-3
> 
> 时间：2012-07-12T14:27:48.903
> 
> 标签：php, upload, directory

> **可能重复：**
> [检查目录是否存在（PHP）](https://stackoverflow.com/questions/5425891/check-if-directory-exists-php)

帖子已删除 - 帖子已删除 - 帖子已删除 - 帖子已删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:31:23.960

使用[file_exists](http://pt.php.net/manual/en/function.file-exists.php)函数检查文件夹或树是否存在，然后使用 PHP [mkdir](http://www.php.net/manual/en/function.mkdir.php)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:31:49.323

检查是否有[目录](http://de2.php.net/manual/en/function.is-dir.php)。

如果没有，[请创建一个](http://de2.php.net/manual/en/function.mkdir.php).

问题出在哪里？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:32:15.513

is_dir函数检查文件夹[是否](http://www.php.net/is_dir)存在，如果需要，[mkdir](http://www.php.net/mkdir/)将创建该文件夹。

# jquery - nyromodal : 提交表单时，提交按钮的名称属性及其值不会传输到服务器

> ID：11454054
> 
> 赞同：0
> 
> 时间：2012-07-12T14:27:51.213
> 
> 标签：jquery, nyromodal

我正在使用 Nyromodal，我需要在我的表单中有 2 个提交按钮（“保存”、“保存和添加”），根据我单击的按钮，我的服务器应该使用`name`属性在右侧页面上重定向我`<input type="submit" />`

我的问题是当我提交表单时，提交按钮的名称属性及其值不存在于`$_POST`变量中。

如果我不使用 nyroModal 显示我的表单，一切都会完美运行。

与 nyroModal ：

```
array (size=1)
  'form' => 
    array (size=2)
      'title' => string 'azerty' (length=5)
      'date' => string '12/07/2012' (length=10) 
```

没有 nyroModal ：

```
array (size=2)
  'form' => 
    array (size=2)
      'title' => string 'azerty' (length=30)
      'date' => string '12/07/2012' (length=10)
  'submit_button_name' => string 'OK' (length=7) 
```

任何人都知道如何使用 nyroModal 做到这一点

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:48:15.513

解决方案是在表单中放置一个并在单击提交按钮时`<input type="hidden" name="" />`为属性分配一个值。`name`

# maven - 在非 JAR maven 项目之间共享公共资源

> ID：11454061
> 
> 赞同：6
> 
> 时间：2012-07-12T14:28:30.037
> 
> 标签：maven, maven-3, jmeter

我有几个 Maven 项目，比如说，，，`a`继承自一个父项（我们称之为），并且也是模块（与不同的项目，我们称之为）。`b``c``parent``parent``super`

这些项目都有一个`pom`包装。这些项目中的每一个都有特定的配置，但它们也有一个共同的部分。更具体一点，每个项目有两个 JMeter 测试配置文件：一个专门用于给定项目，另一个对所有项目通用且相同。

**问题是 - 我应该如何配置 POM，以便在项目之间共享这个通用配置文件？**

一种解决方法是将它们全部合并到`super`, 并使用配置文件。但是，在这种情况下，我必须手动为每个配置单独构建（而现在我只能构建`super`）。

有类似的问题，比如[这个](https://stackoverflow.com/questions/2247199/share-test-resources-between-maven-projects)，但它们处理的是`jar`插件，这与这种情况无关。

结构，供参考：

*   POM 继承：

    ```
     parent
          |
    -------------
    |     |     |
    a     b     c 
    ```

*   文件结构：

    ```
    super
    |
    |-a
    |
    |-b
    |
    |-c 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T04:29:00.347

我出于类似目的使用了[maven-remote-resources-plugin 。](http://maven.apache.org/plugins/maven-remote-resources-plugin/)创建一个 jar 类型的单独资源项目 (com.company:resourceProj)。将 JMeter 资源文件放入`/src/main/resources`.

```
/src/main/resources/common.properties  (your filenames obviously)
/src/main/resources/a.properties
etc. 
```

按照[示例](http://maven.apache.org/plugins/maven-remote-resources-plugin/examples/sharing-resources.html)中的说明创建捆绑包。

现在，将此配置添加到您的父 POM（如果需要，可以在测试配置文件中）：

```
<properties>
  <shared.resources.dir>${project.build.directory}/shared-resources</shared.resources.dir>
</properties>

<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-remote-resources-plugin</artifactId>
  <executions>
    <execution>
      <id>load-resources</id>
      <phase>initialize</phase>
      <goals>
        <goal>process</goal>
      </goals>
      <configuration>
        <resourceBundles>
          <resourceBundle>com.company:resourceProj:version</resourceBundle>
        </resourceBundles>
        <attached>false</attached>
        <outputDirectory>${shared.resources.dir}</outputDirectory>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

现在，告诉 Maven 这些是测试资源。如果您的测试资源元素在模块之间是一致的，那么这也可以在父模块中，如果它们不同，则在模块 POM 中。（根据我在子项目中定义的 Maven 3 资源的经验，优先于父项目；它们没有被合并。）

```
<testResources>
    <testResource>
      <directory>${shared.resources.dir}</directory>
      <includes>
         <include>common.properties</include>
         <include>${module.file}.properties</include>
      </includes>
    </testResource>
    <!-- any other test resources here -->
  </testResources> 
```

在子模块中，定义资源模块属性（这是模块a）：

```
<properties>
  <module.file>a</module.file>
</properties> 
```

调整它以满足您的用例。

- - 编辑 - -

如果将配置放入父 POM，则父 POM 可能无法构建，具体取决于子 POM 提供的配置。当我们构建共享的基础/父项目时，我们不想要求定义所有应该由子项目（继承者）提供的属性。因此，我们在构建共享项目时激活此配置文件以绕过仅适用于儿童的任何内容。

为此，`pom-packaging.marker`向父项目的 basedir 添加一个空文件。然后将此配置文件添加到父 POM。构建父项目时，Maven 将找到标记文件，启用配置文件，并禁用配置文件中包含的所有执行。子项目构建时，marker文件不存在，所以POM主体部分的配置才会生效。

我也将这种技术与 Enforcer 插件一起使用 - 父级定义了应该应用于从父级继承的项目的执行器规则，但在构建时不能满足这些规则。如果插件提供“跳过”属性，您可以在此配置文件中启用它，而不是在插件配置中使用 phase = none。

```
<profile>
    <id>pom-packaging</id>
    <activation>
        <file>
            <exists>pom-packaging.marker</exists>
        </file>
    </activation>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-remote-resources-plugin</artifactId>
                <executions>
                    <execution>
                            <id>load-resources</id>
                            <phase>none</phase>    <!-- disables this execution -->
                        </execution>
                    </executions>
                </plugin>
          ....  other plugin executions here ....
         </plugins>
    </build>
</profile> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:32:58.303

范围依赖的想法`import`是您可以将共享资源放入一个单独的项目中，然后由许多其他项目导入；我在想你可以通过这种方式包含你的共享配置文件。

您创建一个带有包装的新项目`pom`（可能与父项目处于同一级别？），然后将其包含在父项目的`dependencyManagement`范围`import`中。然后，您的每个子项目都可以通过继承接收它。只为一个文件制作整个项目似乎有点矫枉过正，但我​​不会有问题。

我实际上并没有用`pom`-packaged 项目树尝试过这个，所以你可能需要玩一下，但我认为这种方法是合理的。这里有一个（非常广泛的）示例：

[导入依赖](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Importing_Dependencies)

# sql-server - SSIS：默认日志记录 OnError 不适用于 RetainSameConnection

> ID：11454062
> 
> 赞同：0
> 
> 时间：2012-07-12T14:28:30.777
> 
> 标签：sql-server, logging, ssis, onerror

我在连接管理器中使用 RetainSameConnection=true，因为我使用的是事务（如果成功/失败，最后是 BEGIN TRANSACTION、COMMIT 或 ROLLBACK）。

我还使用默认的 SQL Server 日志记录提供程序并选择了 OnError 事件（以及其他事件）。

问题是我看不到 sysssislog 表中记录的 OnError 事件（该表存在并且创建了默认插入 SP） - 我可以看到记录的其他类型的事件。

使用 SQL 探查器，我可以检查 sp_ssis_addlogentry 是否已执行：

> exec sp_executesql N'exec sp_ssis_addlogentry @P1，@P2，@P3，@P4，@P5，@P6，@P7，@P8，@P9，@P10，@P11'，N'@P1 nvarchar(4000)，@ P2 nvarchar(4000),@P3 nvarchar(4000),@P4 nvarchar(4000),@P5 唯一标识符,@P6 唯一标识符,@P7 datetime2(7),@P8 datetime2(7),@P9 int,@P10 varbinary( 8000),@P11 nvarchar(4000)',N'OnError',N'EWOIU027013096',N'ad\oiu099',N'Empty AF SINtemp','4CCEB32F-E884-483C-A02F-56D5C8438E44','15F585B3- AC6C-476F-8A2E-FC926438AC84','2012-07-12 14:46:15','2012-07-12 14:46:15',0,0x, N'违反主键约束''CIRNAGF0p0_AF' '。无法在对象“dbo.TIRNAGF0_AF”中插入重复键。

但未插入 OnError 事件。

当我将 RetainSameConnection 属性更改为 false 时，它​​可以工作，但是我不能依赖我的事务 SQL 任务。

注意：我什至尝试使用 RetainSameConnection=false 专门为 Logging 创建另一个连接管理器，但它没有奏效。

我可以毫无问题地登录到文本文件，但我们需要登录到表。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:24:00.587

我无法重现您的问题。根据您的描述，我假设您的包裹看起来像这样。SO_retain OLE 连接管理器指向我正在工作的数据库，并将 RetainConnection 属性设置为 True。

![通用控制流](../Images/3ec7caa8e0daba35bf4b373a868d99e6.png)

我为事件 OnError 和 OnPre/PostExecute 添加了日志记录。我跑了两次包裹。一次使用 SO_retain 连接管理器，一次使用 SO_no_retain。

![sql日志记录](../Images/e0bf1686a2d2c2ef76cc25503f0cb8bb.png)

执行后，我查询日志以查看发生了什么。`SELECT L.id, L.event, L.source, L.executionid FROM dbo.sysdtslog90 L ORDER BY 1;`如果您使用的是 2008/2008R2，请将表修改为 dbo.sysssislog。

我的结果是

```
1   PackageStart    so_Andre_LoggingTrxn    B2D17896-199F-4213-B800-E812CE95D45F
2   OnPreExecute    so_Andre_LoggingTrxn    B2D17896-199F-4213-B800-E812CE95D45F
3   OnPreExecute    Begin tran  B2D17896-199F-4213-B800-E812CE95D45F
13  OnPostExecute   Rollback    B2D17896-199F-4213-B800-E812CE95D45F
14  OnPostExecute   so_Andre_LoggingTrxn    B2D17896-199F-4213-B800-E812CE95D45F
15  PackageEnd  so_Andre_LoggingTrxn    B2D17896-199F-4213-B800-E812CE95D45F

16  PackageStart    so_Andre_LoggingTrxn    F6898ECA-46E7-4760-8885-898FADCBEFFD
17  OnPreExecute    so_Andre_LoggingTrxn    F6898ECA-46E7-4760-8885-898FADCBEFFD
18  OnPreExecute    Begin tran  F6898ECA-46E7-4760-8885-898FADCBEFFD
19  OnPostExecute   Begin tran  F6898ECA-46E7-4760-8885-898FADCBEFFD
20  OnPreExecute    Sequence Container  F6898ECA-46E7-4760-8885-898FADCBEFFD
21  OnPreExecute    Divide by zero  F6898ECA-46E7-4760-8885-898FADCBEFFD
22  OnError Divide by zero  F6898ECA-46E7-4760-8885-898FADCBEFFD
23  OnError Sequence Container  F6898ECA-46E7-4760-8885-898FADCBEFFD
24  OnError so_Andre_LoggingTrxn    F6898ECA-46E7-4760-8885-898FADCBEFFD
25  OnPostExecute   Divide by zero  F6898ECA-46E7-4760-8885-898FADCBEFFD
26  OnPostExecute   Sequence Container  F6898ECA-46E7-4760-8885-898FADCBEFFD
27  OnPreExecute    Rollback    F6898ECA-46E7-4760-8885-898FADCBEFFD
28  OnPostExecute   Rollback    F6898ECA-46E7-4760-8885-898FADCBEFFD
29  OnPostExecute   so_Andre_LoggingTrxn    F6898ECA-46E7-4760-8885-898FADCBEFFD
30  PackageEnd  so_Andre_LoggingTrxn    F6898ECA-46E7-4760-8885-898FADCBEFFD 
```

正如您所看到的，事情正在按照人们对交易的预期发生。在第一次执行中，包开始触发记录的事件（PackageStart、OnPreExecute）。源“Begin tran”的 OnPreExecute 是我们看到的最后一件事，直到“Rollback”的 OnPostExecute 触发。但是，ID 之间存在差距。该间隙是在事务下发生的所有插入。该事务被回滚，因此所有这些工作都被撤消，唯一的指标是消耗的身份值。

当我更改日志记录以将 SO_no_retain 用于连接管理器时，我看到正在记录 OnError 事件。

## 编辑

您在日志中看到了第一组条目，但希望看到第二组条目。

了解为什么会这样是[交易如何运作](http://www.sqlteam.com/article/introduction-to-transactions)的基础。一个事务将工作声明打包成一个单独的块，这些东西*都*可以工作，或者*都*将失败。在您的事务中，程序包正在发出 sp_ssis_addlogentry 命令。当前事务内部没有办法说“使这些语句比其他语句更持久”或“在当前事务之外保留这些语句”。全有或全无，这是交易上下文中的唯一选择。

鉴于此，您的选择是创建第二个专用于日志记录的连接管理器，正如我在 SO_no_retain CM 中展示的那样，或者编写您自己的错误日志记录系统。我真的，真的会提倡前者，因为它是原生行为。否则，您将花费大量时间

## 第三种选择

这件事让我印象深刻，也许你没有意识到这一点。您不需要 begin tran /commit/rollback 模式。SSIS 可以为您开箱即用地做到这一点。根据包运行的位置，它需要运行 MSDTC（MS 分布式事务协调器），但简而言之，你告诉包你想让这些组件在事务中登记，瞧，奇迹发生了，你不要不必管理它。SSIS 中的每个任务都有一个 TransactionOption 的属性。默认情况下，它设置为支持。

[交易选项设置](http://msdn.microsoft.com/en-us/library/ms137690.aspx)

*   **支持**如果事务存在，则任务将加入其中。它不会启动事务。
*   **必需**这将启动一个事务。如果一个已经存在，那么它将加入该事务
*   **NotRequired**这不会启动事务，也不会参与正在进行的事务。您*可以*通过尝试操作相同资源的必需和非必需对象来使自己陷入僵局，因此请注意您在做什么。

鉴于上述包，我会做的是

1.  删除协调事务的执行 SQL 任务，
2.  将 RetainSameConnection 属性保留为 False
3.  在控制流级别（或序列容器），我会将 TransactionOption 设置为 Required

完成，就是这样。当包运行时，“工作”被回滚，但日志记录，包括错误，将在那里。老实说，我写的每个包看起来都差不多。我从来没有理由尝试控制我自己的交易，因为我可能愚蠢地相信交易协调员会处理所有这些。不过，在与 SSIS 合作的 7 年中，我没有遇到 MSDTC 不处理它的问题。

# android - 如何显示 PreferenceScreen 的摘要

> ID：11454065
> 
> 赞同：0
> 
> 时间：2012-07-12T14:28:46.353
> 
> 标签：android

我想要一个带有标题和摘要的全屏 PreferenceScreen。但是，当我提供摘要文本时，它不会显示：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:settings="http://schemas.android.com/apk/res/com.android.settings"
    android:title="My Title"
    android:summary="My Summary">
......

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:36:32.940

在你有的地方添加这个......

```
<PreferenceCategory android:title="Title"
                    android:key="title_category_key">

    <PreferenceScreen
            android:key="my_title_key"
            android:title="Main Settings"
            android:persistent="false" >
    </PreferenceScreen>

        <EditTextPreference
                android:name="title"
                android:defaultValue="@string/title"
                android:title="title"
                android:key="title_key"
                android:editable="false"
                android:focusable="false"/>

 </PreferenceCategory> 
```

# virtual - 如何显示 Microsoft kinect 骨骼的衣服/布料

> ID：11454068
> 
> 赞同：0
> 
> 时间：2012-07-12T14:28:53.710
> 
> 标签：virtual, kinect

我正在尝试在 Microsoft kinectSDK 中开发一个虚拟试衣间应用程序。我想展示骷髅上的裙子。谁能告诉我以下哪一项更好。

1）在用户骨骼上绘制整件衣服 2）在骨骼的每个关节上绘制纹理

我尝试使用第一个选项，但如果用户向右或向左转，我想展示礼服或改变礼服。当他转身时，任何人都可以帮助在用户骨架上显示布料。因此，如果用户向右或向左转，布应该对齐。这可以通过普通的 jpeg 图像来完成吗？或者必须创建任何其他特殊类型的图像（不确定任何类型的 3D 图像）。

问候， Jayakumar Natarajan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:06:25.063

为了做你想做的事，你需要渲染一个[蒙皮](http://home.metrocast.net/~chipartist/SkinTute/)的、[骨骼动画](http://en.wikipedia.org/wiki/Skeletal_animation)的3D 模型，它可以附加与服装项目相对应的不同部分，类似于 XBox Live 头像所做的。

对于需要翻滚/对运动做出反应的柔性服装，您将不得不使用某种[布料物理](http://cg.skeelogy.com/introduction-to-soft-body-physics-in-xna/)来正确移动那一点点。

在这里不可能解释所有必要的概念。您可能必须通过显示蒙皮模型和基于 Kinect 骨架的动画来工作 - 根据服装轮廓附加不同的网格（并可能更改材料以启用颜色/材料变化） - 添加可以弯曲的元素/表现得现实一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:12:10.647

使用 XNA 绝对是最好的答案。Microsoft Kinect Developer Toolkit 中给出了一个非常好的示例，名为“Aveteering XNA”。看看它。此外，如果您需要一个骨架来为 3d 建模的衣服蒙皮，您可以在示例应用程序中尝试模型 (dude.FBX) 附带的骨架。您可以在此处下载 Kinect 工具包：http: [//www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)

# javascript - 有没有办法使用 javascript 中的对象进行简单的“类类”继承？

> ID：11454081
> 
> 赞同：0
> 
> 时间：2012-07-12T14:29:23.880
> 
> 标签：javascript

我遇到了一个我不知道如何解决的javascript问题。我将一堆变量和方法分组到一个 DocManager 对象中。在我的应用程序中与管理“文档”相关的所有内容都在这里。基本上，DocManager 就像一个具有单个实例的类。

前任：

```
var DocManager = {
    doc_list : [],  //Array of documents containing content and metadata
    doc_index : 0,  //Index of the currently visible document
    loadDocList : function( collection_id, csrf_token, seq_list ){
      ...
    },
    showDocument : function(seq_index){
      ...,
    },
   ...
}; 
```

现在我遇到了一种情况，我想将 DocManager 子类化，以便在具有不同控件的不同页面上使用。我需要添加一些方法并覆盖其他方法。对象的大部分功能将保持不变。

最简单的方法是什么？我知道 javascript 有一个完整的面向对象的类/原型语法，而其他人已经为 js 构建了 OOP 框架，但这对于这种情况来说似乎有点过分了。我宁愿不学习很多新语法来执行这种简单的面向对象。你会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:33:56.283

您可以简单地覆盖您分配给它的功能。

```
YourDocuManager.showDocument = function(index, newindex, whatever) {
....
} 
```

从那一刻起，它将使用分配的新功能。

# java - java.lang.nullpointerexception 没有认证头信息

> ID：11454082
> 
> 赞同：0
> 
> 时间：2012-07-12T14:29:29.873
> 
> 标签：java, gdata, gdata-api

当我使用 GData Java 客户端库的批处理功能时，会出现此异常。我们能够获取提要，但无法进行批量删除。

```
 com.google.gdata.client.GoogleAuthTokenFactory$OAuthToken@259e215b
     java.lang.NullPointerException: No authentication header information
        at
     com.google.gdata.util.AuthenticationException.initFromAuthHeader(AuthenticationException.java:96)
        at
     com.google.gdata.util.AuthenticationException.<init>(AuthenticationException.java:67)
        at
     com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:608)
        at
     com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
        at
     com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
        at
     com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
        at
     com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
        at com.google.gdata.client.Service.batch(Service.java:1454)     at
     com.google.gdata.client.GoogleService.batch(GoogleService.java:770) 
```

任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:44:57.163

我认为这个错误是关于访问空 getter 或 setter，这意味着它不存在！因此，您可以调试程序并查看`NullPointerException`当您尝试访问 getter/setter 时是否发生错误。

# javascript - 如何知道第一次打开窗口是什么时候？

> ID：11454083
> 
> 赞同：-2
> 
> 时间：2012-07-12T14:29:31.603
> 
> 标签：javascript, jquery, html

我有一个模态对话框窗口。是否有任何事件（或方式）如何知道第一次打开窗口的时间（不是刷新，不是 postBack 等）？清除 cookie 是必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:11:31.050

如果您只关心 cookie，

然后更改 cookie 密钥（如果您想丢弃旧 cookie）或
不为您的 cookie 设置任何过期时间（如果您希望它不与下一个新请求一起发送）默认为 session

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:34:39.587

我假设您是编码“打开窗口”行为的人。为什么不存储一些变量（标志）来指示以前是否打开过窗口？这可以是一个普通的验证或会话、cookie、本地存储等，用于长期存储。

# plone - Buildout 和 p4a.video 错误

> ID：11454089
> 
> 赞同：1
> 
> 时间：2012-07-12T14:29:48.683
> 
> 标签：plone, buildout

我正在开发旧版本的 Plone（Plone 3.3.6 的构建，来自 Plone 3.1）。

它包括一个依赖于 p4a.videoembed 的定制产品和一些其他 p4a 相关产品。当我运行“bin/buildout”时，出现以下错误：

```
Installing instance1.
While:
   Installing instance1.
Error: There is a version conflict.
We already have: p4a.video 1.3
but p4a.plonevideoembed 1.3 requires 'p4a.video>1.3'. 
```

我检查了 pypi 中没有 p4a.video > 1.3 所以，当然它不会检索更高版本的 p4a.video。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:52:51.873

解决方案是将 p4a.plonevideoembed 固定到旧版本。我在我的构建中添加了一个 [versions] 部分，并将 p4a.plonevideoembed “固定”到旧版本中。

```
[versions]
p4a.plonevideoembed = 1.1 
```

# nhibernate - 仅使用 NHibernate 保留基类

> ID：11454091
> 
> 赞同：2
> 
> 时间：2012-07-12T14:29:53.173
> 
> 标签：nhibernate, inheritance

我有一个像 Animal 和 Cat 这样的继承映射。两个类都有自己的表（映射为连接子类）。我现在尝试 NHibernate 只保存一个 Animal 对象，当我向 NHibernate 的保存（或持久）方法提供一个 Cat 对象时。

通过阅读文档，我认为`session.Save("Animal", catObject)`应该做我想做的事，但它的行为与`session.Save(catObject)`.

但是，创建一个新的 Animal 对象并从 Cat 对象复制值是可行的，但这会浪费时间和内存。

还有其他可能实现我想要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:41:56.183

你不能这样做，如果你需要，IMO 就会遇到设计问题。如果您需要保存一个，`Animal`那么您必须使用一个`Animal`实例，而不是一个`Cat`或任何其他类型的实例

同样正如@PaulPhillips 所说，创建一个对象的性能/内存成本在某些情况下可以忽略不计

# javascript - 使用 JS/jQuery 从表单字段中获取值的总和

> ID：11454092
> 
> 赞同：1
> 
> 时间：2012-07-12T14:29:57.113
> 
> 标签：javascript, jquery, html

我有动态形式，如：

```
<form id="formaa">
<div class="row">
  <input type="text" name="item" class="item"></input>
  <input type="text" name="quant" class="quant"></input>
  <input type="text" name="price" class="price" onkeyup="update();"></input>
  <input type="text" name="sum" id="suma" size="10" disabled="disabled"/>
</div>
<div class="row">
  <input type="text" name="item" class="item"></input>
  <input type="text" name="quant" class="quant"></input>
  <input type="text" name="price" class="price" onkeyup="update();"></input>
  <input type="text" name="sum" id="suma" size="10" disabled="disabled"/>
</div>    
<!-- ... many more rows -->
<input type="text" disabled id="total" name="tot"></input>
</form> 
```

我要做的是将项目数量和价格相乘，并分别在 sum 字段中为每个项目获取总和（不是所有项目的总和）。

我已经实现的是这个功能，但它似乎不是单独计算所有项目的总和，并且这与第一个默认字段行一起工作，当我添加新的字段集并用两个字段（以及其他后来添加的字段）填充它们时总和值变为 NaN ..如果我删除所有添加的字段集并保留第一个表单 fows 设置，数字再次起作用..这里有什么问题？

```
<script type="text/javascript">
function update() {
  var total = 0;
  $("#formaa div.row").each(function(i,o){
    total += $(o).find(".quant").val() *
        $(o).find(".price").val();
         if(!isNaN(total) && total.length!=0) {
                sum += parseFloat(total);
            }
  });
  $("#formaa div.row #suma").val(total);
}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:36:10.303

```
function update() {
  $("#formaa div.row").each(function(i,o){
     var total = $(o).find(".quant").val() * $(o).find(".price").val();
     if(!isNaN(total) && total.length!=0) {
         sum += parseFloat(total);
     }
     $(o).find('[name="sum"]').val(total);
  });
} 
```

您的代码中存在一些问题：

*   永远不要将相同的 id 赋予多个元素。这就是我在名称上定义选择器的原因
*   你没有重置总数，所以它是所有的总和
*   我没有解决这个问题，但是你在浮点解析*之前*的操作很奇怪（可能取决于我看不到的内容）

# extjs4 - 在网格上添加按钮

> ID：11454093
> 
> 赞同：1
> 
> 时间：2012-07-12T14:29:58.483
> 
> 标签：extjs4, extjs4.1

我有一个 3 列的网格，其中一列有一个`actioncolumn`, 上面有一个按钮；

我的场景；如果用户来自单击按钮，`friend view`那么我需要显示以下网格（带有操作列按钮），但是当用户来自单击按钮时`teacher view`，我需要在操作列中显示 2 个按钮。我怎样才能做到这一点 ？

```
Ext.create('Ext.grid.Panel', {
    title: 'Action Column Demo',
    store: Ext.data.StoreManager.lookup('friendStore'),
    columns: [
        {text: 'First Name',  dataIndex:'firstname'},
        {text: 'Last Name',  dataIndex:'lastname'},
        {
            xtype:'actioncolumn',
            width:50,
            items: [{
                icon: 'extjs/examples/shared/icons/fam/cog_edit.png',  // Use a URL in the icon config
                tooltip: 'Edit',
                handler: function(grid, rowIndex, colIndex) {
                    var rec = grid.getStore().getAt(rowIndex);
                    alert("Edit " + rec.get('firstname'));
                }
            }]
        }
    ],
    width: 250,
    renderTo: Ext.getBody()
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:08:08.433

您始终可以创建两个操作列，一个带有一个按钮，另一个带有两个按钮，并隐藏您不需要的一个。

```
...
xtype : 'actioncolumn',
hide  : this.fromTeacherView, //a boolean
... 
```

在`fromTeacherView`这种情况下，它是一个布尔值，它是在实例化网格时提供给网格的配置参数。

不确定这是否是您正在寻找的。

# coronasdk - corona sdk中android的动态图像显示

> ID：11454099
> 
> 赞同：-1
> 
> 时间：2012-07-12T14:30:04.297
> 
> 标签：coronasdk

```
imageSuffix =
            {
                ["-x2"] = 2,
                ["-x4"] = 4,--ipad3
            } 
```

我在该应用程序中为 iphone 创建了 corona 应用程序，我为动态图像 Resulation 写了一些类似的东西，就像我想知道 android 构建相同项目的程序，我想知道另外一件事，那就是我们提到构建中的任何前提。设置文件 android 有什么你向我解释过的吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:10:19.457

它的图像动态比例因子为 android 设置 config.lua .its 代码

```
imageSuffix =
        {
            ["-x15"] = 1.5,--android devices
            ["-x3"] = 3,--mid size tablet
        } 
```

# objective-c - "NSString stringWithFormat:" - 多次访问同一个参数？

> ID：11454103
> 
> 赞同：29
> 
> 时间：2012-07-12T14:30:14.080
> 
> 标签：objective-c, nsstring, string-formatting

当我使用字符串格式时，我可以多次访问一个参数而不再次传递它吗？

例子：

```
NSString *parameter1 = @"1";
NSString *parameter2 = @"2";

NSString *myString;
myString = [NSString stringWithFormat:@"I want to print parameter1 here: %@, parameter2 here: %@ and now access parameter1 again: %@ _without_ passing it again.",parameter1, parameter2, parameter1]; 
```

有没有办法再次访问第一个参数而无需再次写入“，parameter1”？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-12T14:39:32.363

是的，使用*位置参数*：

```
// prints: foo bar foo bar
NSLog(@"%@", [NSString stringWithFormat:@"%2$@ %1$@ %2$@ %1$@", @"bar", @"foo"]);

// NSLog supports it too
NSLog(@"%2$@ %1$@ %2$@ %1$@", @"bar", @"foo"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T14:41:38.033

```
NSString *parameter1 = @"1";
NSString *parameter2 = @"2";

NSString *myString;
myString = [NSString stringWithFormat:@"I want to print parameter1 here: %1$@, parameter2 here: %2$@ and now access parameter1 again: %1$@ _without_ passing it again.",parameter1, parameter2]; 
```

[字符串格式说明符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265-SW1)

# c - 如何将迭代算法转换为递归解决方案

> ID：11454105
> 
> 赞同：1
> 
> 时间：2012-07-12T14:30:17.967
> 
> 标签：c, recursion, for-loop

我有这个使用 for 循环迭代地解决问题的方法。我想使用使用递归的 if-else 语句将代码转换为使用递归算法。我已经尝试了几次，但我无法让它正常工作。

```
double A;
int B;
double previous=1; 
double answer;

double equation(double A,int B){
 for(int i=1; i<=B; i++){    
  answer= (A*previous)/(i+A*previous);    
  previous = answer;                  
 };
 return answer;                 
} 
```

编辑：这是我到目前为止所做的： http://pastebin.com/raw.php?i= [kyeq1v5u](http://pastebin.com/raw.php?i=kyeq1v5u)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:44:22.933

有一个公式。这是一个递归公式。它以递归方式定义您的问题

```
equation(A, B) =
    IF(B = 1) 
        A/(1+A)  
    ELSE
        (A*equation(B-1)) / (B+A*equation(B-1)) 
```

编辑：在伪代码中有完整的算法。你所要做的就是翻译成c。祝你好运。

提示： `previous`等于`equation(A, B-1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:49:41.180

伪代码（可能有一些小错误，但它应该让你朝着正确的方向思考

```
Equation A , B = Equation_internal( A, B , 1, 1)

Equation_internal (A , B , i , prev ) = 
  case i <= B   : return  Equation_internal ( A , B , i+1 , (A* prev )/(i+A*prev) )
  otherwise return prev. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T14:51:14.770

在考虑递归方法时，首先要提出结束递归的条件，记住在这种函数中，递归通常与迭代方法相反。

在您的情况下，函数签名可能是相同的，并且每个递归调用的 B 都比前一轮小。结束条件将是您可以轻松计算的东西，例如 B=1。

此外，您不需要在代码中声明的任何全局变量。改为使用局部变量，以便它们在每个递归函数调用中都可以具有不同的值。当您可以避免使用全局变量时，使用它们也是一个坏习惯。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-12T15:12:56.400

这是我的小代码

```
double equation(double A,int B);
double equation2(double A,int B, int curcount, double previous);

double A;
int B;
double previous=1; 
double answer;

int main (int argc, const char * argv[])
{

   double toto= equation(5,3);

   double toto2= equation2(5,3,0,1);

    return 0;
}

double equation(double A,int B){
    for(int i=1; i<=B; i++){    
        previous= (A*previous)/(i+A*previous);    
    };
    return previous;                 
}

double equation2(double A,int B, int curcount, double previous){

    if (curcount == B) {
        return previous;
    }else{
        curcount++;
        previous= (A*previous)/(curcount+A*previous); 

        return equation2(A,B,curcount,previous);
    }

} 
```

# c# - 简化 If 语句 c#

> ID：11454107
> 
> 赞同：-6
> 
> 时间：2012-07-12T14:30:19.867
> 
> 标签：c#, visual-studio-2010, object, if-statement

我正在尝试使用此语句

```
status_label.Text = err.Message + " || " + err.InnerException == null ? " " : err.InnerException.Message; 
```

基本上，如果有一个 InnerException 因为它不为空，则显示它，如果它为空则不输出任何内容。

这就像我认为我可以拥有的那样精简

```
 status_label.Text = err.Message;
 if (err.InnerException != null)
     status_label.Text += " || " + err.InnerException.Message; 
```

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:34:25.783

改用这个：

```
status_label.Text =  err.InnerException == null 
    ? err.Message
    : err.Message + " || " + err.InnerException.Message; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:38:05.247

您缺少三元运算符周围的刹车

```
status_label.Text = err.Message + " || " + (err.InnerException == null ? " " : err.InnerException.Message); 
```

或者，如果你不想要 || 在 null 内部异常的情况下

```
status_label.Text = err.Message + (err.InnerException == null ? "" : " || " + err.InnerException.Message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:34:39.773

这应该可以解决问题：

```
status_label.Text = string.Format("{0}{1}", err.Message, err.InnerException != null ? string.Format(" || {0}", err.InnerException.Message) : string.Empty); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:38:53.857

首先，你的 if 语句应该是这样的

```
status_label.Text = err.Message;
 if (err.InnerException != null)
     status_label.Text += " || " + err.InnerException.Message; 
```

至于使它比这更精简，您可以使用条件和/或空合并，但这是完全可读的。

但是，如果您愿意，也可以这样做。

```
status_label.Text = string.Concat(err.Message, err.InnerException == null ? string.Empty : " || " + err.InnerException.Message); 
```

是不是更简洁了？并不真地。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T14:42:26.657

只是一个想法，如果您不介意打印完整的异常，您可以这样做：

```
status_label.Text = err.ToString();
status_label.Text += err.InnerException; 
```

（请记住，这将在每个异常前面放置一个“系统异常：”或类似内容。）

否则，您的代码似乎已经足够精简。（可读性有时比紧凑性更可取。）

# android - Eclipse 到 Android 在部署时显示每个类的应用程序图标

> ID：11454110
> 
> 赞同：4
> 
> 时间：2012-07-12T14:30:28.977
> 
> 标签：android, eclipse, manifest, android-activity

我正在使用 Eclipse 开发一个 Android 应用程序，并且刚刚开始注意到一个奇怪的故障。

当我出于某种原因将应用程序部署到手机时，我的“应用程序”文件夹区域中会出现多个应用程序图标。当点击每个图标时，我会进入我的应用程序中的不同课程页面。有没有其他人也经历过这种情况？

这是从我的笔记本电脑上的模拟器运行应用程序时出现的问题的屏幕截图。

![奇怪的错误](../Images/12df400de414a021371af6a48141945f.png)

由于问题出现在模拟器中，我知道不是我的手机导致了错误。

您在该屏幕截图中看到的每个图标都代表我的清单文件中的不同活动。

这是我的清单中设置活动的方式。

```
 <activity android:name=".MainJava">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
         <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity android:name=".AppClass">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
         <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

你会说这个错误是由于我设置活动的方式引起的吗？如果是这样，你会如何建议我编辑活动来解决这个问题？

我从未在我之前构建的任何应用程序中看到过这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T14:35:02.140

只有`MainActivity(Launcher Activity) have intent filter with action as Main and category as Launcher`，

```
 <action android:name="android.intent.action.MAIN" />
  <category android:name="android.intent.category.LAUNCHER" /> 
```

**并删除这两条线用于其他活动。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:36:12.143

更改自：

```
<activity android:name=".MainJava">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
     <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>

<activity android:name=".AppClass">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
     <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

到：

```
<activity android:name=".MainJava">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
     <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>

<activity android:name=".AppClass">
     <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

应该只有一个`MAIN`和一个`LAUNCHER`

# python - 如何使用词性评估语义文本相似度？

> ID：11454113
> 
> 赞同：1
> 
> 时间：2012-07-12T14:30:48.030
> 
> 标签：python, nlp, nltk, semantic-analysis

我正在尝试编写一个程序来评估文本之间的语义相似性。我已经比较了文本之间的 n-gram 频率（词汇量度）。我想要一些比这更浅的东西，并且我认为在句子构造中查看相似性将是评估文本相似性的一种方法。

但是，我能想出的办法就是计算 POS（例如，每个文本 4 个名词、2 个动词等）。这类似于仅计算 n-gram（实际上效果不如 ngram）。

```
postags = nltk.pos_tag(tokens)
self.pos_freq_dist = Counter(tag for word,tag in postags)
for pos, freq in self.pos_freq_dist.iteritems():
    self.pos_freq_dist_relative[pos] = freq/self.token_count    #normalise pos freq by token counts 
```

很多人（Pearsons、ETS Research、IBM、学者等）使用词性来进行更深入的测量，但没有人说他们是如何做到的。词性如何用于“更深入”的语义文本相似度测量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T19:39:09.707

需要更复杂的标注器，例如[http://phpir.com/part-of-speech-tagging/](http://phpir.com/part-of-speech-tagging/)。您将需要编写算法并创建词库来确定句子的含义或意图。语义分析是人工智能。

名词和大写名词将成为内容的主题。形容词会暗示内容的极性。模糊，清晰，力量，弱点，使用的词语类型。可能性是无止境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:08:21.753

看看[NLTK Book](https://www.nltk.org/book/)的第 6 章。它应该为您提供大量可用于对文本进行分类的功能的想法。

# java - jtds连接如何使用字符数组密码

> ID：11454121
> 
> 赞同：0
> 
> 时间：2012-07-12T14:31:17.543
> 
> 标签：java, sql-server, security, tsql, jtds

使用 java 的 jtds 驱动程序，如何使用字符数组作为密码（出于安全原因而不是字符串）连接到 sql server 数据库。到目前为止，我只能在密码是字符串而不是字符数组的情况下进行连接。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:34:07.153

看来你不能...

[http://jtds.sourceforge.net/doc/net/sourceforge/jtds/jdbc/Driver.html](http://jtds.sourceforge.net/doc/net/sourceforge/jtds/jdbc/Driver.html)

但是，我不会太担心这个......您是否在同一个 JVM 中运行不受信任的代码？

是的，这是一个最佳实践，但是，就安全性而言，可能会有“更大的鱼要炸”。

# git - 受 .htaccess 完全保护的服务器会阻碍 $ git clone 吗？

> ID：11454132
> 
> 赞同：1
> 
> 时间：2012-07-12T14:32:04.563
> 
> 标签：git, apache, .htaccess

我有一个 Apache 服务器（MediaTemple (ve)，如果这很重要），其中每个目录都受密码保护。在浏览器中查看所述目录中的任何页面都需要用户名和密码。

我正在尝试在每个目录中设置一个 Git 存储库。我已经成功地安装了 Git、创建了 repos 和提交（通过终端）。当我尝试将 repo 克隆到我的本地机器上时，问题就出现了。

我输入以下内容（出于显而易见的原因进行了编辑）：

```
$ git clone ssh://root@website.com/path/to/.git 
```

我被问到这个作为回报：

```
root@website.com's password: 
```

我输入密码，它连接，然后我得到以下错误：

```
fatal: '/path/to/.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我知道该路径是一个 Git 存储库，因为我之前对其进行了提交。我唯一的想法是 .htaccess 可能导致问题。我不能把它拿下来测试，因为我们有隐藏在它后面的敏感文件。

解决此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:59:40.383

由于您使用的是 SSH，因此`.htaccess`根本不会发挥作用。发生的事情是 SSH 连接失败。可能缺少公钥/私钥对，或其他类似的。尝试`root`在服务器中输入 SSH 而不是`.htaccess`密码。

我建议*不要*使用`root`来执行用户级任务（例如设置 git repos 或其他类似的），因为权限`root`总是比任何其他用户严格得多。

而是为您创建一个用户，并使用该用户进行 SSH 登录。如果您需要，请使用`sudo`或`su root`, 来执行管理员级别的任务，但如果可以，请尽量避免使用它。

# oracle - Oracle：使用分隔符连接，但前提是两个操作数都不为空

> ID：11454136
> 
> 赞同：14
> 
> 时间：2012-07-12T14:32:16.357
> 
> 标签：oracle, oracle10g, concat

我想选择几个字段的串联，但它们之间有一个分隔符。仅当两个操作数都不为空时，分隔符才应存在。

因此，对于 的记录`a='foo', b=NULL, c='bar'`，我想得到结果`abc='foo;bar'`（不是`'foo;;bar'`）。

我想要一个这样的功能`concat_sep(a, b, ';')`，只添加';' 如果 a 和 b 都不为空，则介于两者之间。

当然，我可以像这样使用 nvl2：

```
select
  a, b, c, 
  substr(abc, 1, length(abc) - 1) as abc
from
  (select
    a, b, c, 
    nvl2(a, a || ';', '') || nvl2(b, b || ';', '') || nvl2(c, c || ';', '') as abc
  from
    Table1) 
```

但是正如你所看到的，这段代码很快就会变得阻塞，尤其是当你有超过 3 列并且你给它们取了合理的名称而不是 a、b 和 c 时。;-)

我找不到更短、更容易或更易读的方法，但我想在完全放弃之前我会在这里问一下（或者自己浪费时间编写这样的函数）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T14:39:59.820

我知道你用的是 10g，所以这行不通。但为了完整起见， “正确”[`LISTAGG()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)处理`NULL`值。不过，为此您必须更新到 11g2：

```
-- Some sample data, roughly equivalent to yours
with t as (
  select 'foo' as x from dual union all
  select null       from dual union all
  select 'bar'      from dual
)
-- Use the listagg aggregate function to join all values
select listagg(x, ';') within group (order by rownum)
from t; 
```

或者更简洁一点，如果您想列出表中的列：

```
-- I use SYS.ORA_MINING_VARCHAR2_NT as a TABLE TYPE. Use your own, if you prefer
select listagg(column_value, ';') within group (order by rownum)
from table(ORA_MINING_VARCHAR2_NT('foo', null, 'bar')); 
```

或针对实际表格：

```
select listagg(column_value, ';') 
       within group (order by rownum)
from Table1
cross join table(ORA_MINING_VARCHAR2_NT(Table1.a, Table1.b, Table1.c))
group by Table1.id; 
```

现在我不确定这是否比你原来的例子好得多（更具可读性）:-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-04-30T10:43:08.133

```
select trim(';' from REGEXP_REPLACE (a || ';' || b || ';' || c , ';+' , ';')) abc 
from Table1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T14:39:48.883

AFAIK，没有简洁的方法可以做到这一点。

过去，我曾求助于

```
SELECT a
||     DECODE(b
       ,      NULL, NULL
       ,      ';' || b)
||     DECODE(c
       ,      NULL, NULL
       ,      ';' || c)
||     DECODE(d
       ,      NULL, NULL
       ,      ';' || d)
...
FROM   table1 
```

但这并不比你的例子好。

# spring - 使用 EIP 和集成解决方案在云上分布层？

> ID：11454139
> 
> 赞同：0
> 
> 时间：2012-07-12T14:32:22.117
> 
> 标签：spring, cloud, apache-camel, mule, spring-integration

我想采用[EIP](http://www.eaipatterns.com/)的解决方案进行 Web 应用程序的云部署：

*   应用程序将以这样一种方法开发，即每一层（例如数据、服务、Web）都将作为一个单独的模块和工件出现。
*   每一层都有机会部署在云上的不同虚拟资源上。在这方面，Web 节点会以某种方式找到相关的服务节点，同样服务节点也会连接到数据节点。
*   服务层中的对象提供对应用程序中服务的 REST 访问。Web 层应该使用来自服务层的 REST 服务来完成对应用程序用户的请求。

[对于在云上交付“高度可扩展”应用程序的上述要求， Apache Camel](http://camel.apache.org)、[Spring Integration](http://www.springsource.org/spring-integration/)和[Mule ESB](http://www.mulesoft.org/)等解决方案似乎是重要的选择。

似乎还有其他讨论，例如关于此主题[的问题](https://stackoverflow.com/q/3034054/248082)或[博客文章，但我想知道是否有人对](http://www.kai-waehner.de/blog/2012/01/10/spoilt-for-choice-which-integration-framework-to-use-spring-integration-mule-esb-or-apache-camel/)*“云”*上的这种部署方案有具体经验？我会感谢任何想法和分享经验。TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:03:50.727

对我来说，这看起来有点像过度工程。是否有真正的理由需要分离所有这些层？您所描述的看起来很像几年前的 J2EE 应用程序。

如何将应用程序的所有层部署到每个节点上，然后使用简单的 Java 调用或 OSGi 服务进行通信。

这种方法有几个优点：

*   复杂性更低
*   没有序列化或 DTO
*   交易很容易/不需要分布式交易
*   负载平衡和故障转移更容易，因为您只能在 Web 层上进行操作
*   性能可能要高得多

您可以使用 spring 或 blueprint（在 OSGi 上）来实现这样的应用程序。

另一种选择是使用现代 JavaEE 服务器。如果您对此感兴趣，请查看 Adam Bien 的一些课程。他展示了如何以非常精简的方式使用 JavaEE。

对于节点之间的通信，我对 Camel 和 CXF 有很好的经验，但你应该尽量避免远程处理。

# python - Django 模板 - 有条件地为登录用户显示一个按钮

> ID：11454140
> 
> 赞同：4
> 
> 时间：2012-07-12T14:32:24.593
> 
> 标签：python, django, django-templates

我的 Django 应用程序中有一个页面，该页面需要执行以下操作之一，具体取决于登录用户相对于页面上表示的组（不是 Django 用户组；我的应用程序自定义）的状态：

1.  如果用户可以加入群组，则显示加入群组的链接。
2.  如果用户在群组中，则显示离开群组的链接。
3.  如果用户无法加入群组，请不要显示任何一个链接。

一种方法是创建三个模板（一个带有加入链接，一个带有离开链接，一个没有链接）并在视图中选择适当的一个。我觉得拥有三个仅在一行代码中有所不同的模板可能有点矫枉过正，所以我还没有走那条路。

仅使用模板显示条件 1 和 2 的正确内容是不可能的，如果是这样，我认为不建议这样做。用户到组是多对多的关系，确定组成员关系需要将用户传递给组或将组传递给用户。

由于 Django 模板不允许传递函数参数，我试图通过使用`get_context_data`.

```
def get_context_data(self, **kwargs):
    context = super(NetworkDetails, self).get_context_data(**kwargs)
    user = ???
    context['in_group'] = user.in_group(context['group_detail'])
    return context 
```

如果我这样做，我怎样才能在该方法中获取当前登录的用户？如果这是不可能的，我还能从哪里获得模板之外的信息？有没有一种可接受的方法来做这样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:38:04.157

> 一种方法是创建三个模板（一个带有加入链接，一个带有离开链接，一个没有链接）并在视图中选择适当的一个

这很有趣，因为如果您可以选择要包含的模板，您只需选择要显示的 html。代替：

```
{% if join_link %}
    {% include 'join_link.html' %}
{% endif %}
{% if leave_link %}
    {% include 'leave_link.html' %}
{% endif %}
{% if not join_link and not leave_link %}
    you can't join
{% endif %} 
```

你可以有：

```
{% if join_link %}
    <a href="{{ join_link }}">join</a>
{% endif %}
{% if leave_link %}
    <a href="{{ leave_link }}">leave</a>
{% endif %}
{% if not join_link and not leave_link %}
    you can't join
{% endif %} 
```

所以，我不明白你为什么要使用模板包含。

> 如果我这样做，我怎样才能在该方法中获取当前登录的用户？

```
self.request.user
self.request.user.is_authenticated() # return True if the user is logged in 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:40:31.177

您可以确定视图中的条件并使用上下文将适当的标志传递给模板。

如果有多个视图/模板需要此信息，您可以实现自定义上下文处理器，该处理器可以在上下文中添加此信息，并在每个模板中可用。

或者，如果您在应用程序中有任何`OneToOne`或任何此类关系`User`，您可以在该模型中实现方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:41:13.810

您可以通过检查权限 [https://docs.djangoproject.com/en/dev/topics/auth/](https://docs.djangoproject.com/en/dev/topics/auth/)来检查用户是否已登录，您也可以根据其他需要执行类似操作。

# javascript - 获取刚刚单击的按钮的 id

> ID：11454142
> 
> 赞同：1
> 
> 时间：2012-07-12T14:32:27.730
> 
> 标签：javascript

我正在尝试使用 JS 创建一个计算器 webapp，但遇到了一些问题。我查看了其他打开的线程并尝试了该代码，但它似乎不起作用。我目前只是试图记录被按下的按钮的 ID，但是当我按下一个按钮时，我得到的一切都`"undefined"`回来了。这是我的代码：

```
<html>
<head>
<title>Calculator</title>
</head>

<body>

<p id="text">
<table border="0" id="table">
  <tr>
  <td><input type="button" id="one" value="1" onClick="calculate();"></td>
  <td><input type="button" id="two" value="2" onClick="calculate();"></td>
  <td><input type="button" id="three" value="3" onClick="calculate();"></td>
  </tr>

  <tr>
  <td><input type="button" id="four" value="4" onClick="calculate();"></td>
  <td><input type="button" id="five" value="5" onClick="calculate();"></td>
  <td><input type="button" id="six" value="6" onClick="calculate();"></td>
  </tr>

  <tr>
  <td><input type="button" id="seven" value="7" onClick="calculate();"></td>
  <td><input type="button" id="eight" value="8" onClick="calculate();"></td>
  <td><input type="button" id="nine" value= "9" onClick="calculate();"></td>
  </tr>

  <tr>
    <td> </td>
    <td><input type="button" id="zero" value="0" onClick="calculate();"></td>
  </tr>

</table>

<script>
function calculate(){
console.log(this.id);
}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:39:35.113

试试这样：

```
function calculate(){
   var e = window.event,
       btn = e.target || e.srcElement;
   alert(btn.id);
} 
```

[**现场演示**](http://jsbin.com/ihajon/edit#preview)

*解释：*

[window.event](https://developer.mozilla.org/en/DOM/event)保存有关最后发生的事件的信息。在你的情况下，这是`'click'`事件。您可以从对象中检索`DOM Element`被单击的`event`。`target`or`srcElement`属性（取决于浏览器的类型）表示`DOM Element`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:40:34.207

```
<script type="text/javascript">
    function calc(e) {
        console.log(e.id);
    }
</script>

<input type="button" id="btn" onclick="calc(this)" /> 
```

您需要在自学上付出更多努力:-) 除非付出努力，否则永远不会获得知识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T14:38:16.840

您可以使用`event.target`来获取元素。

```
<input type="button" id="one" value="1" onclick="calculate(event);">
<script>
function calculate(event) {
  console.log(event.target.id);
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:34:44.267

如果您像上面那样硬写它们，则可以将 id 值作为参数传递给函数

```
onClick="calculate(one)";
onClick="calculate(two)";
onClick="calculate(three)"; 
```

ETC...

它的效率并不高，但应该适用于您的情况。然后你的功能可以是这样的：

```
function calculate(number){
alert(number);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T14:35:50.207

这很简单

```
onclick=alert(this.id) 
```

或者，在你的情况下：

```
onclick=calculate() 
```

脚本：

```
function calculate(){
  alert(this.id)
  //this.id - hold the value of the id of the button just click
} 
```

# php - PHP Sessions 的内部机制

> ID：11454143
> 
> 赞同：4
> 
> 时间：2012-07-12T14:32:32.333
> 
> 标签：php, session

从手册中，我得出，当设置 php session var 时，它会写入 session_save_path 文件夹中的文本文件。

我只是想知道这是否会在解释器使用会话变量到达该行时发生，还是在 PHP 解释器退出处理文件时发生（写入文本文件）？

例如，如果我要在两行连续的行中设置和更新会话变量（如下面的示例所示），PHP 解释器是否会背靠背两次保存文件？

换句话说，哪些代码片段有正确的注释？

```
$_SESSION['my_variable']=1; // writes to the session text file
$_SESSION['my_variable']=2; // writes to the session text file again
die();                      //   

versus 

$_SESSION['my_variable']=1; // updates the session file contents in the memory
$_SESSION['my_variable']=2; // updates the session file contents in the memory
die();                      // writes to the session text file 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:47:48.480

如果出现以下情况，数据将写入文件：

*   session_write_close() 被调用
*   脚本执行完成

所以只要你不做1），你的第二个假设是正确的。

每次变量更改时写入文件会非常昂贵，因为一般来说访问和写入磁盘很慢，因此 PHP 不会这样做。但是应该注意，缓存系统（如 memcache 或 redis ）*会在*更改发生时存储更改，因此当 PHP 会话在可靠性方面不够时，依赖它们可能是个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:37:34.937

第二个，`$_SESSION[...] = ...`他们只是在你的`$_SESSION`数组中设置值并`die()`触发这个函数：

> `session_write_close`
> 
> （PHP 4 >= 4.0.4，PHP 5）
> 
> session_write_close — 写入会话数据并结束会话
> 
> 报告错误描述
> 
> void session_write_close ( void ) 结束当前会话并存储会话数据。
> 
> **会话数据通常在脚本终止后存储，无需调用 session_write_close()**，但由于会话数据被锁定以防止并发写入，任何时候只有一个脚本可以对会话进行操作。将框架集与会话一起使用时，由于这种锁定，您将体验到一个一个加载的框架。您可以通过在会话变量的所有更改完成后立即结束会话来减少加载所有帧所需的时间。

[http://nl.php.net/manual/en/function.session-write-close.php](http://nl.php.net/manual/en/function.session-write-close.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T15:06:53.517

因此，我尝试通过执行以下操作来测试这一点。

`test_1.php`

```
session_start();
$_SESSION['my_variable']=1;
sleep(20);
exit; 
```

和

`test_2.php`

```
session_start();
var_dump($_SESSION); 
```

以下是我测试的案例：

*   执行`test_1.php`然后快速执行`test_2.php`。

**结果：** `test_2.php`冻僵到`test_1.php`睡完。

*   执行`test_1.php`，删除`PHPSESSID`cookie 然后执行`test_2.php`。

**结果：** `test_2.php`立即执行，没有冻结（`test_1.php`同时还在睡觉）并打印了一个空数组。

**新手总结：**

PHP 打开与该会话相关的文本文件的流，直到脚本完成执行，然后它“提交”更改。（我不是专家，所以我的说法可能不准确）

**编辑：**由于没有查阅[文档，又是一个无用的测试](http://nl.php.net/manual/en/function.session-write-close.php)

> 但是由于会话数据被锁定以防止并发写入，因此只有一个脚本可以随时对会话进行操作

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T14:46:15.053

只有在刷新 setter 页面后，会话才会写入 cookie 或您选择的任何存储中。前任：

> 有 pageA 和 pageB ：
> 
> 在 pageA 中设置：
> 
> session["foo"] = "bar";
> 
> **session["foo"] 只有在以下之后才能对 pageB 可用**：
> 
> 离开 pageA 到 pageB
> 或
> 离开 pageA 并刷新 pageB

考虑到这一点，恕我直言，最好的定义是第二个。

快乐编码！

# java - 通过 Jakson Java 使用嵌套多态对象反序列化

> ID：11454151
> 
> 赞同：0
> 
> 时间：2012-07-12T14:32:51.337
> 
> 标签：java, json, polymorphism, jackson

我有一个嵌套对象的容器，例如：

```
class A {
  private Type type;// can message or invite 
  private Notification notification; 
```

}

和班级

```
abstract class Notification {}

class Message extends Notification {}

class Invite extends Notification {} 
```

当我将 List 序列化为 JSON 时一切正常，但我可以使用 ObjectMapper 进行反序列化，因为杰克逊不知道存储在*type*字段中的 Notification 的实例类型。问题是否可以使用 ObjectMapper 反序列化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:39:52.263

我也为这个问题苦苦挣扎，但这里有一个不错的博客项目；

[http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html](http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html)

这应该解释一切

# php - 提取后使用 PHP 压缩文件生成 cpgz 文件

> ID：11454158
> 
> 赞同：6
> 
> 时间：2012-07-12T14:33:20.113
> 
> 标签：php, zip

我正在用 php 压缩文件夹和文件，但是当我尝试打开 zip 文件时，我得到了一个 cpgz 文件。提取该文件后，我得到另一个 zip 文件。它的作用是基本扫描当前文件夹以查找要压缩的文件和文件夹。这是我使用的代码：

```
function Zip($source, $destination)
{
if (!extension_loaded('zip') || !file_exists($source)) {
    return false;
}

$zip = new ZipArchive();
if (!$zip->open($destination, ZIPARCHIVE::CREATE)) {
    return false;
}

$source = str_replace('\\', '/', realpath($source));

if (is_dir($source) === true)
{
    $files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($source), RecursiveIteratorIterator::SELF_FIRST);

    foreach ($files as $file)
    {
        $file = str_replace('\\', '/', realpath($file));

        if (is_dir($file) === true)
        {
            $zip->addEmptyDir(str_replace($source . '/', '', $file . '/'));
        }
        else if (is_file($file) === true)
        {
            $zip->addFromString(str_replace($source . '/', '', $file), file_get_contents($file));
        }
    }
}
else if (is_file($source) === true)
{
    $zip->addFromString(basename($source), file_get_contents($source));
}

return $zip->close();
}

if($_GET["archive"]== 'true'){
$date = date("Ymd_Hi");
$dir = dirname(__FILE__);
$filename = $date.".zip";

Zip(getcwd(), $filename);

header("Content-disposition: attachment; filename=$filename");
header('Content-type: application/zip');
readfile($filename);
unlink($filename);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-07T09:50:41.287

我只是遇到了完全相同的问题，并了解到这两个函数调用可以提供帮助：

```
header("Content-disposition: attachment; filename=$filename");
header('Content-type: application/zip');

// Add these
ob_clean();
flush();

readfile($filename);
unlink($filename); 
```

通常设置 Content-Disposition 和 Content-Length 就足够了，但是在 PHP 中设置标头之前意外发送输出时，刷新 PHP 输出缓冲区和底层输出缓冲区（Apache 等）会有所帮助。

就我而言，注释掉 header() 和 readfile() 调试调用有助于看到，在发送文件之前输出了警告。

希望对将来的人有所帮助。

# image-processing - 如何使用 JavaCV 识别另一个轮廓内的轮廓？

> ID：11454160
> 
> 赞同：6
> 
> 时间：2012-07-12T14:33:22.443
> 
> 标签：image-processing, opencv, javacv

如何识别另一个轮廓内的轮廓？我试图通过许多 OpenCV 教程，但我无法识别它。请一些专家提供简单的代码来解释它吗？

这是我的输入文件

![在此处输入图像描述](../Images/037288d47a6474cd30559f62f565b899.png)

这个黑暗的部分是我需要识别的轮廓。

![在此处输入图像描述](../Images/3d4e729bc15df6a5fa626b6e764e4c47.png)

请善待与我分享您的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T04:23:13.237

对 JavaCV 不太满意，所以这就是我在 OpenCV 和 C（古老的东西）中解决这个问题的方法：

1.  使用`cvFindContours()`
2.  在这些轮廓上运行两个循环（迭代指针`h_next`或 JavaCV 中的任何内容）。对于外循环中的每个轮廓，将其与基于 检测到的每个其他轮廓匹配。. .
3.  计算每个轮廓的边界框。这将是一个`CvRect`结构。
4.  将两者传递`CvRects`给计算两个矩形之间相交（重叠）面积的函数。
5.  如果这个面积等于两个矩形中较小一个的面积，则较小矩形对应的轮廓完全被较大的矩形包围。

    这是查找相交区域的代码。它一定是在某个地方漂浮在网络上。

    `CvRect intersect(CvRect r1, CvRect r2) { CvRect intersection;`

    ```
    // find overlapping region
    intersection.x = (r1.x < r2.x) ? r2.x : r1.x;
    intersection.y = (r1.y < r2.y) ? r2.y : r1.y;
    intersection.width = (r1.x + r1.width < r2.x + r2.width) ?
        r1.x + r1.width : r2.x + r2.width;
    intersection.width -= intersection.x;
    intersection.height = (r1.y + r1.height < r2.y + r2.height) ?
        r1.y + r1.height : r2.y + r2.height;
    intersection.height -= intersection.y;    

    // check for non-overlapping regions
    if ((intersection.width <= 0) || (intersection.height <= 0)) {
        intersection = cvRect(0, 0, 0, 0);
    }

    return intersection; 
    ```

    `}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:40:49.250

这是 Python 代码中的一个简单方法。( `But as I stated in my comment below, It is not an universal answer applicable everywhere, It is just to show finding contour inside a contour can be done. And if your images are different, then you have to come with some different constraints other than i mentioned below`)

找到 Contours 后你要做的是，检查每个轮廓的面积是否小于指定值（我给了 10000，只是一个猜测），如果不是，它是更大的轮廓，避免它。如果小于指定值，它可能是我们旁边的正方形或矩形。

所以我们找到它的宽度和高度并检查纵横比是否接近1。如果是，它就是我们的正方形。

```
import cv2
import numpy as np

img = cv2.imread('sofcnt.jpg')
gray = cv2.imread('sofcnt.jpg',0)

ret,thresh = cv2.threshold(gray,127,255,1)

cont,hier = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)

for cnt in cont:
    approx = cv2.approxPolyDP(cnt,0.02*cv2.arcLength(cnt,True),True)
    if cv2.contourArea(cnt) < 10000:
        x,y,w,h = cv2.boundingRect(cnt)
        if w/float(h) < 2:
            cv2.drawContours(img,[cnt],0,255,-1)

cv2.imshow('a',img)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

结果 ：

![在此处输入图像描述](../Images/c2f7a74b4b6b6aeb0e097482c9507ee7.png)

# spring-mvc - Tomcat 6不断将URL重定向到旧的

> ID：11454162
> 
> 赞同：0
> 
> 时间：2012-07-12T14:33:25.450
> 
> 标签：spring-mvc, tomcat6, spring-webflow

我做了很多搜索，但没有找到类似的东西，但我可能没有使用正确的术语。我的问题是这样的：

在 Tomcat 6 服务器上，我最初部署了一个上下文根为 fred 的 Spring Webflow 应用程序——为了访问它，人们访问了 myserver.com:8080/fred

该应用程序中的 Spring 代码将所有请求更改为在上下文根之后具有 /spring - 因此上面的 URL 将变为 myserver.com:8080/fred/spring - 这将打开索引页面。

一切都很好，花花公子。

我重写了应用程序以使用 Spring MVC，因为这里太无聊了，所以我删除了执行 /spring 部分的代码。

我现在正在尝试将它部署到同一个 Tomcat 实例。它似乎部署得很好（在取消部署旧的之后）。

但是，当我尝试访问 myserver.com:8080/fred 以获取索引页面时，它会重定向到 myserver.com:8080/fred/spring，由于不支持该 URL，因此自然会失败。

我在 WAR 中检查了我的配置，还扫描了 Tomcat 中的以下位置：

conf 目录 conf/catalina 和子目录 webapps 和子目录 work 和子目录

我看不到任何涉及此 /spring url 重写的内容。它确实在我的本地版本的 Tomcat 上成功部署和工作。

有人可以提供任何建议吗？感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:45:30.390

听起来您的浏览器缓存了重定向。如果您的站点 myserver.com:8080 使用硬重定向（301 Moved Permanently）将用户从 /fred 发送到 /fred/spring，您的浏览器会在您下次访问应用程序时记住这一点。尝试清空浏览器缓存并重试。

这可以解释为什么你的本地机器上的一切都是花花公子

# c# - c# 中的 AES GCM 实现

> ID：11454166
> 
> 赞同：3
> 
> 时间：2012-07-12T14:33:43.797
> 
> 标签：c#, aes, aes-gcm

我在 C# 中以 GCM 模式实现 AES 密码。我的问题与“其他经过身份验证的数据”（AAD）有关。在以下代码中

[http://blogs.msdn.com/b/shawnfa/archive/2009/03/17/authenticated-symmetric-encryption-in-net.aspx](http://blogs.msdn.com/b/shawnfa/archive/2009/03/17/authenticated-symmetric-encryption-in-net.aspx)

目前还不清楚我应该从哪里获得 AAD，以及在解密期间我应该如何检索特定于该加密的 AAD：

```
// Authenticated data becomes part of the authentication tag that is generated during
// encryption, however it is not part of the ciphertext.  That is, when decrypting the
// ciphertext the authenticated data will not be produced.  However, if the
// authenticated data does not match at encryption and decryption time, the
// authentication tag will not validate.
aes.AuthenticatedData = Encoding.UTF8.GetBytes("Additional authenticated data"); 
```

任何有关如何使用此 AAD 的说明将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T20:56:50.893

AAD 代表 Additional Authenticated Data 或 Additional Associated Data。这是可以与密文一起以明文形式发送的数据。当您执行 AEAD 密码的组合验证和解密时，密文和 AAD 的完整性都会得到验证。

AAD 数据不是密钥，它只是您可以包含在协议中的纯数据，需要保护完整性，但不需要（或者更合乎逻辑地，对加密没有用处）。一个很好的例子是加密 IP 数据包的标头；如果你加密它，你就不能将它用于路由，如果你不保护它的完整性，攻击者可能会在接收者不知道的情况下更改消息长度或源地址。

请注意，AEAD 密码已经在身份验证标签的计算中包含了 IV / nonce。因此，没有必要将其包含在 AAD 中。AAD 通常用于包括发送者、接收者和可能的消息标识号 - 如果它存在于消息的加密部分之外。

# c# - 如何正确更新 M:N 关系？

> ID：11454171
> 
> 赞同：0
> 
> 时间：2012-07-12T14:33:54.050
> 
> 标签：c#, model

我在类之间有一个简单的关系 m:m `Thing`，`People`但是我的解决方案在更新记录时需要删除以前的记录，然后创建新的记录

例子：

### 我的桌子

*   人员（人员 ID、姓名）
*   事物（事物 ID、名称）
*   PeopleHasThing (PeopleId, ThingId)

### 我的模特

人模型.cs

```
 // The following method works!
    // I've tried but I have my doubts about deleting records
    public static void Update(PeopleModel p)
    {
        using (_context = new myDataContext())
        {
            var result = (from r in _context.People
                         where r.PeopleId == p.PeopleId
                         select r).SingleOrDefault();

            if (null == result) return;

            result.Name = p.Name;

            PeopleHasThing.DeleteAllByPeopleId(result.PeopleId);

            EntitySet<PeopleHasThing> set = new EntitySet<PeopleHasThing>();

            //HasThing = List<ThingModel>
            //ThingModel: { (Int32)ThingId, (bool)IsMarked. (string)Description }

            m.HasThing.ForEach(e =>
            {
                if (e.IsMarked)
                {
                    set.Add(new PeopleHasThing
                    {
                        ThingId = e.ThingId,
                        People = result
                    });
                }
            });

            result.PeopleHasThing = set;

            _context.SubmitChanges();
        }
    } 
```

啊，问题是**如何正确更新 M:N 关系？**

# php - PHP AES256 加密 - VB 解密

> ID：11454179
> 
> 赞同：1
> 
> 时间：2012-07-12T14:34:17.187
> 
> 标签：php, encryption, aes

我有一个正在进行的项目，要求我以加密格式将数据发送给第三方。我们选择 AES-256 作为数据加密。

我用的是PHP，对方用的是VB。我正在使用 MCrypt 库来做我的加密。

我似乎无法将我的加密与他们的加密相匹配。除了共享的关键短语之外，还需要共享的初始向量吗？是否有任何其他事情需要考虑才能让我的数据被对方解密？

此外，有人告诉我 VB 对 IV 使用字节数组。对于 MCrypt 库，示例使用常规字符串，例如 IV 的“1234567890123456”。我是否应该假设所需要的只是从上述字符串转换为字节数组并且一切都会好起来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:42:37.640

两端的一切都需要相同：IV、键、模式（使用 CBC 或 CTR）和填充（使用 PKCS#7）。如果其中任何一个不同，那么事情就会失败。如果出现任何问题，加密系统就会失败。

# ios - 在 iOS 的单独线程中创建 PDF 文件

> ID：11454181
> 
> 赞同：1
> 
> 时间：2012-07-12T14:34:20.370
> 
> 标签：ios, uikit

我在 iOS 中使用从用于假装文件布局的`UIKit`各种文件创建 PDF文件。`XIB`

我可以成功生成 PDF 文件。但是我在主线程中这样做，我想将它移动到一个单独的线程中，这样 UI 就不会“冻结”。

我曾尝试使用 GCD 这样做，但它不起作用，并且它抛出了一些错误。

我有这样的事情：

```
[MBProgressHUD showHUDAddedTo:self.view animated:YES];

__block NSData *pdfNote = nil;

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0),^{
    pdfNote = [self generatePdfFile];
    dispatch_sync(dispatch_get_main_queue(),^{
        [MBProgressHUD hideHUDForView:self.view animated:YES];
    });
}); 
```

我看到的错误是：

```
failed to find PDF header: `%PDF' not found.
failed to find PDF header: `%PDF' not found.
failed to find PDF header: `%PDF' not found.
failed to find PDF header: `%PDF' not found.
2012-07-12 15:31:15.427 IrmaosPeixoto-CRM[7601:1a03] bool _WebTryThreadLock(bool), 0x3404d0: Tried to obtain the web lock from a thread other than the main thread or the web thread. This may be a result of calling to UIKit from a secondary thread. Crashing now...
1   _ZL17_WebTryThreadLockb
2   WebThreadLock
3   -[UITextView setFrame:]
4   UIViewCommonInitWithFrame
5   -[UIView initWithCoder:]
6   -[UIScrollView initWithCoder:]
7   -[UITextView initWithCoder:]
8   UINibDecoderDecodeObjectForValue
9   UINibDecoderDecodeObjectForValue
10  -[UINibDecoder decodeObjectForKey:]
11  -[UIView initWithCoder:]
12  -[UIClassSwapper initWithCoder:]
13  UINibDecoderDecodeObjectForValue
14  -[UINibDecoder decodeObjectForKey:]
15  -[UIRuntimeConnection initWithCoder:]
16  UINibDecoderDecodeObjectForValue
17  UINibDecoderDecodeObjectForValue
18  -[UINibDecoder decodeObjectForKey:]
19  -[UINib instantiateWithOwner:options:]
20  -[NSBundle(UINSBundleAdditions) loadNibNamed:owner:options:]
21  +[UIView(Extensions) loadFromNib:owner:]
22  -[FinishOrderViewController generatePdfFile]
23  __43-[FinishOrderViewController buttonPressed:]_block_invoke_0
24  _dispatch_call_block_and_release
25  _dispatch_worker_thread2
26  _pthread_wqthread
27  start_wqthread 
```

附加说明：PDF 生成涉及对 Core Data 的一些访问以获取一些信息。

有没有更好的（工作）方式来实现我的需要？

**编辑**我弄错了，我使用`UIKit`而不是核心图形来生成 PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:29:39.500

如果您要从 XIB 文件加载内容，请在主线程的包中加载元素。

只需在主线程中加载 NSBundle 中的元素，然后在另一个线程中运行所有内容，我就能够成功生成 PDF 文件。

# forms - PHP邮件功能不起作用

> ID：11454184
> 
> 赞同：0
> 
> 时间：2012-07-12T14:34:36.890
> 
> 标签：forms, session, session-variables, php

我认为问题不在于邮件功能代码，而在于我对 $_SESSION 变量的方法。我有一个由 5 页组成的表单，第五个是预览页。最终提交后，在预览页面上，我希望将整个 $_SESSION 数据发送到两个不同的电子邮件地址。

我在预览页面上显示数据如下：

```
<?php
//retrieve session data
echo "<b>&nbsp;&nbsp;Varname: </b>". $_SESSION['varname'];
?> 
```

以 method="post" 和 action="mail.php" 的形式。

在 mail.php 中，我开始会话，然后：

```
 $_SESSION['email'] = $mail;
        $_SESSION['varname'] = $varname;

        $email_from = 'mail@company.de';

        $email_subject = "Mail";

        $email_body = "You have submitted the following data: $inhalt.\n";

        $to = "mymail@company.de, $mail";

        $headers = "From: Company";

        mail($to,$email_subject,$email_body,$headers); 
```

提交表单后，页面变为空白。我到底做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:44:35.200

我最终设法解决了这个问题，如下：

```
 $email_from = 'mail@company.de';

   $email_subject = "Mail"; 

   $to = ("myadress@work.de," . $_SESSION['email'] . "");
        mail($to,"Form submission","Form data:

    Inhalt: " . $_SESSION['inhalt1'] . " 

    "); 
```

正如我在问题中所说，问题在于我对`$_SESSION`变量的方法。而不是`$_SESSION['varname'] = $varname`，我只是直接用`. $_SESSION['varname'] .`'。

# iphone - 应用内购买的恢复按钮 - 与再次购买相同吗？

> ID：11454194
> 
> 赞同：0
> 
> 时间：2012-07-12T14:35:00.083
> 
> 标签：iphone, xcode, ipad, in-app-purchase

我为恢复按钮编写了一些代码；

```
-(IBAction)restore:(id)sender
{
[[MKStoreManager sharedManager]buyFeature]; 
}

-(void)productPurchased
{

for (UIView *view in self.view.subviews)
{
if (view.tag==2000)
{
[view removeFromSuperview];
}
} 

UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Thank you" message:@"Your restore was successful." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
[alert show];
[alert release];

}

// error restore
- (void)failed
{
for (UIView *view in self.view.subviews)
{
if (view.tag==2000)
{
[view removeFromSuperview];
}
}

UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Error" message:@"Your restore has failed." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
[alert show];
[alert release];

} 
```

但它会在用户按下它时提示用户“购买”？这个对吗？我知道基本上同样的事情正在发生，因为它不会再次向他们收费，但我不想将此代码提交给苹果，只是让他们拒绝它，因为它不够清楚吗？

还是我做错了代码？

您的帮助将不胜感激，

问候，

阿涅利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:36:58.560

我想你想调用的方法`restorePreviousTransactionsOnComplete:onError:`，不是`buyFeature`。

# sql - 如何根据前行的舍入值递归计算剩余金额的比率？

> ID：11454201
> 
> 赞同：2
> 
> 时间：2012-07-12T14:35:21.490
> 
> 标签：sql, recursion, oracle10g

我需要**将 1 个金额分成 2 个字段**。我知道结果字段的总和 = 分割第一行的比率，但我需要对**结果总和进行四舍五入，**然后才计算下一行的比率（因此四舍五入值的总和将是正确的）。

![在此处输入图像描述](../Images/36bd4fc07047212e0d946923f3c7aa24.png)

我如何在 Oracle 10g PL/SQL 中编写这个算法？我需要测试一些迁移的数据。这是我想出的（到目前为止）：

```
with temp as (
  select 1 id, 200 amount, 642 total_a from dual union all
  select 2, 200, 642 from dual union all
  select 3, 200, 642 from dual union all
  select 4, 200, 642 from dual union all
  select 5, 200, 642 from dual
)
select
  temp2.*,
  remaining_a / remaining_amount ratio,
  round(amount * remaining_a / remaining_amount, 0) rounded_a,
  round(amount - amount * remaining_a / remaining_amount, 0) rounded_b
from (
  select
    temp.id,  
    temp.amount,
    sum(amount) over (
      order by id
      range between current row and unbounded following
    ) remaining_amount,
    case when id=1 then total_a /* else ??? */ end remaining_a
  from temp
) temp2 
```

***更新***：如果您看不到上面的图像，则预期的**rounded_A**值为：

```
1 128
2 129
3 128
4 129
5 128 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:10:58.520

这是我的建议。它没有得到你想要的。. . 根据我的计算，129 直到第三排才出现。

这个想法是添加更多列。对于每一行，计算估计的拆分。然后，跟踪累积分数。当 cum 余数超过一个整数时，将 A 金额增加 1。一旦有了 A 金额，您就可以计算其余部分：

```
WITH temp AS (
     SELECT 1 id, 200 amount, 642 total_a FROM dual UNION ALL
     SELECT 2, 200, 642 FROM dual UNION ALL
     SELECT 3, 200, 642 FROM dual UNION ALL
     SELECT 4, 200, 642 FROM dual UNION ALL
     SELECT 5, 200, 642 FROM dual
)
select temp3.*,
       sum(estArem) over (order by id) as cumrem,
       trunc(estA) + (case when trunc(sum(estArem) over (order by id)) > trunc(- estArem + sum(estArem) over (order by id))
                          then 1 else 0 end)
from (SELECT temp2.*,
             trunc(Aratio*amount) as estA,
             Aratio*amount - trunc(ARatio*amount) as estArem
      FROM (SELECT temp.id, temp.amount,
                   sum(amount) over (ORDER BY id range BETWEEN CURRENT ROW AND unbounded following
                              ) remaining_amount,
                   sum(amount) over (partition by null) as total_amount,      
                   max(total_a) over (partition by null)as maxA, 
                   (max(total_a) over (partition by null) /
                    sum(amount) over (partition by null)
                   )  as ARatio
            FROM temp
           ) temp2
      ) temp3 
```

这不完全是分区问题。这是一个整数逼近问题。

如果您正在舍入这些值而不是截断它们，那么您需要对逻辑进行轻微调整。

```
 trunc(estA) + (case when trunc(sum(0.5+estArem) over (order by id)) > trunc(0.5 - estArem + sum(estArem) over (order by id)) 
```

该语句最初只是寻找超过整数阈值的累积余数。这应该进行舍入而不是截断。

# android - 如何在我的 Android 应用程序中使用天气 API 服务

> ID：11454205
> 
> 赞同：1
> 
> 时间：2012-07-12T14:35:30.040
> 
> 标签：android

我是 android 新手，我想开发一个示例应用程序来在我的 android 应用程序中显示天气，对于这个应用程序，我如何在我的 android 应用程序中使用天气 API 服务来开发我的天气应用程序。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:44:15.143

使用 JSON，

像这样[http://incho.net](http://inchoo.net/mobile-development/android-development/simple-android-json-parsing-example-with-output-into-listactivity/)

但是，正如您看到的，这是针对 twitter 的，但您应该能够找到一个支持 JSON 的良好天气 API。看看这个网站： http: [//www.programmableweb.com/](http://www.programmableweb.com/)

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:41:26.203

查找提供天气数据的服务。创建一个向服务发送请求并取回数据的应用程序。解析数据并在您的应用中显示给用户。对于不同的服务，使用天气 API 的规则是不同的。在他们的网站上了解如何使用他们的 API。

# c++ - 使用带有 LibCurl 的代理服务器，它可以读取默认的 IE 设置吗

> ID：11454217
> 
> 赞同：1
> 
> 时间：2012-07-12T14:36:05.540
> 
> 标签：c++, libcurl, proxy-server

我正在使用 LibCurl。我需要处理通过代理服务器的问题。根据我目前的发现，我发现了其他提供代理设置的帖子，例如...

[一种这样的解决方案/样品](https://stackoverflow.com/questions/4073404/curl-errno-35-help)显示如下。

```
curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, 1);
curl_setopt($ch, CURLOPT_PROXYAUTH, CURLAUTH_NTLM );
curl_setopt($ch, CURLOPT_PROXY, 'my.proxy');
curl_setopt($ch, CURLOPT_PROXYPORT, 'my.port');
curl_setopt($ch, CURLOPT_PROXYUSERPWD, 'domain\user:password'); 
```

我的问题。我已经阅读了其他地方，Windows API 可以读取从 Internet Explorer 中建立的任何“代理”设置，因此我们不必在我们的应用程序中跟踪它。客户端的安全技术人员将在 IE 中准备好他们的服务器、端口、用户、密码等，然后就可以了。

Libcurl 也支持这个吗？如果是这样，如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-23T03:04:03.613

这些线对我不起作用（我希望它击中提琴手）：

```
curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, 1);
curl_setopt($ch, CURLOPT_PROXYAUTH, CURLAUTH_NTLM );
curl_setopt($ch, CURLOPT_PROXY, "127.0.0.1");
curl_setopt($ch, CURLOPT_PROXYPORT, "8888");
//curl_setopt($ch, CURLOPT_PROXYUSERPWD, 'domain\user:password'); //none in my case 
```

相反，这一行有效：

```
curl_easy_setopt(curl, CURLOPT_PROXY, `"http://127.0.0.1:8888/"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:43:52.280

Libcurl 不会自动检测，但您可以使用 WinHttpGetIEProxyConfigForCurrentUser。请参阅：[如何找出浏览器的代理设置？](https://stackoverflow.com/questions/202547/how-do-i-find-out-the-browsers-proxy-settings)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:47:38.450

不，libcurl 不支持。

# asp-classic - ASP CDONTS 表格

> ID：11454223
> 
> 赞同：0
> 
> 时间：2012-07-12T14:36:38.873
> 
> 标签：asp-classic, cdonts

我有一个 ASP 经典表单，我使用 CDONTS 电子邮件对象，我将如何包含，所以当用户注册表单时，他们会得到确认，我可以使用 CC 但这会将电子邮件抄送给我，所以我希望它有所不同.

谢谢

# ios5 - Custom Objects and Storyboards

> ID：11454225
> 
> 赞同：0
> 
> 时间：2012-07-12T14:36:47.293
> 
> 标签：ios5, storyboard, custom-object

Are Custom Objects (the little orange cubes) still supported when using storyboards?

Details: I was making a sample iOS App using storyboards and I added a custom object mapping a class which only had a button and a method for that button and I started getting strange errors. I removed this custom object and added the button and the method to the view controller class and everything worked as expected; this lead me to believe that something changed in the way custom objects worked when using storyboards, am I correct?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:47:32.537

The orange cubes only instantiate objects at wake-up. They're not really meant to add views. For example I use a few orange cubes to instantiate extra UIViewControllers and then I link them to outlets in my parent UIViewController. This gives me a nice clean way to create a number of child UIViewControllers for the parent UIViewController. It was pretty much the same as pre-storyboard IB as well. If you wanted a view, the you would add the view. If you wanted an object you could instantiate it by IB or manually in the UIViewController.

Hope this helps.

# php - 使用 Ajax 查询的 joomla 组件开发

> ID：11454226
> 
> 赞同：2
> 
> 时间：2012-07-12T14:36:50.423
> 
> 标签：php, ajax, joomla, joomla2.5

我有一个用于 AJAX 查询的 PHP 脚本，但我希望它们能够在 Joomla (2.5) 框架的保护伞下运行，这样我就可以使用会话 ID、用户 ID 等。

例如：

```
$(function () {
 $.ajax({                                     
   url: 'ajax.php',   //the script to call to get data                     
   dataType: 'json'        //data format     
   ...
 });
}); 
```

ajax.php 的代码如下：

```
$user =& JFactory::getUser(); 
```

据我了解，最好让您的 AJAX/JSON 调用到标准 Joomla 组件。我对开发 MVC 组件知之甚少，但据我所知，这对于我想做的事情来说太过分了。

还有什么我可以使用的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T22:14:38.260

例如，如果您创建一个组件，您可以`view`为原始查询创建新组件`compoments/com_yourcomponent/views/ajax/view.raw.php`，并将所有逻辑和输出放在那里 url 将是`index.php?option=com_yourcomponent&view=ajax&format=raw`

或者

您可以在打印信息和 url 之后创建`controller.php`新`exit()`方法`index.php?option=com_yourcomponent&task=ajax`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:53:06.817

这完全可以通过[Joomla 平台](http://api.joomla.org/)实现。我将在下面给您的示例实际上是针对 J1.5，但通过对包含的文件进行一些调整，很容易适应 J2.5。

1.  创建一个 joomla 平台文件以包含如下所示：
2.  *在*脚本中包含该文件
3.  为您的功能使用现在可用的 Joomla 环境。

另一个**强烈**建议是实现一个 ReSTful API 而不是您的自定义脚本。使用[Luracast Restler](http://luracast.com/products/restler/)非常简单。我在大约 10 分钟内启动并运行了它，然后添加了如下所示的 Joomla 框架，并在不到一个小时的时间内为我的网站提供了一个*非常*灵活的基于 Joomla 的 API，使用 AJAX 调用！就我而言，*多年来*最好的开发时间。

**你的脚本.php**

```
require_once('joomla_platform.php');
/* Get some of the available Joomla stuff */
$config = new JConfig(); 
$db = &JFactory::getDBO(); 
$user =& JFactory::getUser();
if($user->gid <25) {
    die ("YOU CANT BE HERE");
}
echo "<pre>".print_r($config,true)."</pre>"; 
```

**joomla_platform.php**

```
<?php
    /* Initialize Joomla framework */
    if (!defined('_JEXEC')) {
        define( '_JEXEC', 1 );
        //        define('JPATH_BASE', dirname(__FILE__) );
        define ('JPATH_BASE', "c:\\wamp\\www");
        define( 'DS', DIRECTORY_SEPARATOR );
        /* Required Files */
        require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
        require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
        /* To use Joomla's Database Class */
        require_once ( JPATH_BASE .DS.'libraries'.DS.'joomla'.DS.'factory.php' );
        require_once ( JPATH_LIBRARIES.DS.'joomla'.DS.'import.php'); // Joomla library imports.
        /* Create the Application */
        global $mainframe;
        $mainframe =& JFactory::getApplication('site');
    }
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T16:45:01.423

您不需要创建任何自定义文件并将它们添加到 Joomla 脚本中。您只需要一个控制器来服务 ajax 请求。您甚至不需要视图（一种方式）。

你的 ajax 调用应该是这样的：

```
$(function () {
 $.ajax({                                     
   url: 'index.php?option=com_<component_name>&no_html=1task=<controller_name>.<controller_action>',  //not_html = 1 is important since joomla always renders it's default layout with menus and everything else, but we want the raw json output            
   dataType: 'json' //data format     
   ...
 });
}); 
```

和你的控制器：

```
 /*
    * @file admin/controller/<controller_name>.php
    */

class <component_name>Controller<controller_name> extends JController
{

        public function <controller_action>()
        {

         //do something
         $respnse['message'] = 'Your message for the view';
         die(json_encode($reponse));
        }
    }

... 
```

这只是如何做到这一点的示例之一。

# javascript - 如何在谷歌地图中设置缩放级别

> ID：11454229
> 
> 赞同：75
> 
> 时间：2012-07-12T14:36:57.557
> 
> 标签：javascript, google-maps, google-maps-api-3

这是我编写的通过提供纬度和经度向谷歌地图添加标记的代码。问题是我得到了一个高度放大的谷歌地图。我尝试将缩放级别设置为 1，但这对高度缩放的地图没有影响。

```
 <script src="http://maps.google.com/maps/api/js?v=3&sensor=false" type="text/javascript"></script>
     <script type="text/javascript">
        var icon = new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/blue.png",new google.maps.Size(32, 32), new google.maps.Point(0, 0),new google.maps.Point(16, 32));
        var center = null;
        var map = null;
        var currentPopup;
        var bounds = new google.maps.LatLngBounds();
        function addMarker(lat, lng, info) {
            var pt = new google.maps.LatLng(lat, lng);
            bounds.extend(pt);
            var marker = new google.maps.Marker({
                position: pt,
                icon: icon,
                map: map
            });
            var popup = new google.maps.InfoWindow({
                content: info,
                maxWidth: 300
            });
            google.maps.event.addListener(marker, "click", function() {
                if (currentPopup != null) {
                    currentPopup.close();
                    currentPopup = null;
                }
                popup.open(map, marker);
                currentPopup = popup;
            });
            google.maps.event.addListener(popup, "closeclick", function() {
                map.panTo(center);
                currentPopup = null;
            });
        }
        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
            center: new google.maps.LatLng(0, 0),
            zoom: 1,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
            },
            navigationControl: true,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.SMALL
            }
        });
        addMarker(27.703402,85.311668,'New Road');
        center = bounds.getCenter();
        map.fitBounds(bounds);

        }
</script>
</head>
<body onload="initMap()" style="margin:0px; border:0px; padding:0px;">
<div id="map"></div>
</body>
</html> 
```

在这种情况下，如何降低缩放级别？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-07-12T15:09:38.107

您下面的代码正在缩放地图以适应指定的范围：

```
addMarker(27.703402,85.311668,'New Road');
center = bounds.getCenter();
map.fitBounds(bounds); 
```

如果您只有 1 个标记并将其添加到边界，则可能会导致最接近的缩放：

```
function addMarker(lat, lng, info) {
  var pt = new google.maps.LatLng(lat, lng);
  bounds.extend(pt);
} 
```

如果您跟踪已“添加”到地图（或扩展边界）的标记数量，则只有在该数字大于 1 时才能调用 fitBounds。我通常将标记推入一个数组（供以后使用）并测试该数组的长度。

如果您只有一个标记，请不要使用 fitBounds。使用标记位置和所需的缩放级别`setCenter`调用。`setZoom`

```
function addMarker(lat, lng, info) {
  var pt = new google.maps.LatLng(lat, lng);
  map.setCenter(pt);
  map.setZoom(your desired zoom);
} 
```

```
html,
body,
#map {
  height: 100%;
  width: 100%;
  padding: 0;
  margin: 0;
}
```

```
<html>

<head>
  <script src="http://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk" type="text/javascript"></script>
  <script type="text/javascript">
    var icon = new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/blue.png", new google.maps.Size(32, 32), new google.maps.Point(0, 0), new google.maps.Point(16, 32));
    var center = null;
    var map = null;
    var currentPopup;
    var bounds = new google.maps.LatLngBounds();

    function addMarker(lat, lng, info) {
      var pt = new google.maps.LatLng(lat, lng);
      map.setCenter(pt);
      map.setZoom(5);
      var marker = new google.maps.Marker({
        position: pt,
        icon: icon,
        map: map
      });
      var popup = new google.maps.InfoWindow({
        content: info,
        maxWidth: 300
      });
      google.maps.event.addListener(marker, "click", function() {
        if (currentPopup != null) {
          currentPopup.close();
          currentPopup = null;
        }
        popup.open(map, marker);
        currentPopup = popup;
      });
      google.maps.event.addListener(popup, "closeclick", function() {
        map.panTo(center);
        currentPopup = null;
      });
    }

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(0, 0),
        zoom: 1,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false,
        mapTypeControlOptions: {
          style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
        },
        navigationControl: true,
        navigationControlOptions: {
          style: google.maps.NavigationControlStyle.SMALL
        }
      });
      addMarker(27.703402, 85.311668, 'New Road');
      // center = bounds.getCenter();
      // map.fitBounds(bounds);

    }
  </script>
</head>

<body onload="initMap()" style="margin:0px; border:0px; padding:0px;">
  <div id="map"></div>
</body>

</html>
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-12T14:40:16.200

`map.setZoom(zoom:number)`

[https://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-08-15T18:36:59.730

您正在寻找的是每个缩放级别的比例。数字以米为单位。使用这些：

20 : 1128.497220

19 : 2256.994440

18 : 4513.988880

17 : 9027.977761

16 : 18055.955520

15 : 36111.911040

14 : 72223.822090

13 : 144447.644200

12 : 288895.288400

11 : 577790.576700

10 : 1155581.153000

9：2311162.307000

8 : 4622324.614000

7 : 9244649.227000

6：18489298.450000

5 : 36978596.910000

4：73957193.820000

3：147914387.600000

2：295828775.300000

1：591657550.500000

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-07-05T13:57:46.727

要将地图放大两个级别，请添加这一小行代码，

```
map.setZoom(map.getZoom() + 2); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-12T14:41:58.043

这是我使用的一个功能：

```
var map =  new google.maps.Map(document.getElementById('map'), {
            center: new google.maps.LatLng(52.2, 5),
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            zoom: 7
        });

function zoomTo(level) {
        google.maps.event.addListener(map, 'zoom_changed', function () {
            zoomChangeBoundsListener = google.maps.event.addListener(map, 'bounds_changed', function (event) {
                if (this.getZoom() > level && this.initialZoom == true) {
                    this.setZoom(level);
                    this.initialZoom = false;
                }
                google.maps.event.removeListener(zoomChangeBoundsListener);
            });
        });
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-19T13:21:53.137

这些方法对我有用，它可能对任何人都有用： [MapOptions interface](https://developers.google.com/maps/documentation/javascript/reference/map#MapOptions)

**设置最小缩放：** `mMap.setMinZoomPreference(N);`

**设置最大缩放：** `mMap.setMaxZoomPreference(N);`

其中 N 可以等于：

20 : 1128.497220

19 : 2256.994440

18 : 4513.988880

17 : 9027.977761

16 : 18055.955520

15 : 36111.911040

14 : 72223.822090

13 : 144447.644200

12 : 288895.288400

11 : 577790.576700

10 : 1155581.153000

9：2311162.307000

8 : 4622324.614000

7 : 9244649.227000

6：18489298.450000

5 : 36978596.910000

4：73957193.820000

3：147914387.600000

2：295828775.300000

1：591657550.500000

# asp.net - Asp.Net 图表控件 - X 轴上的截断值

> ID：11454233
> 
> 赞同：0
> 
> 时间：2012-07-12T14:37:04.327
> 
> 标签：asp.net, microsoft-chart-controls

伙计，我真的被困住了。我一直在努力解决这个问题不到一个星期。

我正在绘制一个水平条形图，一个简单的（Y）小时与（X）平均。速度。小时数是固定的，我必须始终显示从 0h 到 23h，以保持其可读性。

不好的部分是，每当我在 0h 上绘制一个条形时，它的位置（X 轴右侧）都会被截断，如下图所示。

我已经得到了一些建议，但我无法完成：

1 - 从前一天的 23 小时开始的开始时间。这样我就可以隐藏第一个和最后一个值，实际的 0h（来自“今天”）会更高一些。但是我很难用最小和最大属性来实现这一点。

2 - 将 0h 画得高一点（哇，天才！）。但是我该怎么做呢？

有什么帮助吗？提前致谢。

Ps：好的，SOF 在我的第一篇文章中不能上传图片，所以这里是链接：http: [//i.stack.imgur.com/A6Bh2.png](http://i.stack.imgur.com/A6Bh2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:55:17.933

这就是我遇到类似问题时所做的

```
YAxis.Minimum = YourStartDate.AddSeconds(-1).ToOADate(); 
```

# django - Tastypie - 获取正在编辑的对象列表（PUT/PATCH）

> ID：11454234
> 
> 赞同：3
> 
> 时间：2012-07-12T14:37:11.930
> 
> 标签：django, api, rest, tastypie

我正在尝试授权，只有对象的所有者才能编辑它们。

如何在我的授权方法中获取 post 调用中正在编辑的对象的 ID？

例如：如果有人 PUT 到 url `/api/v1/resource_name/1`，我想得到 ' **1** '

此外，tastepie 允许一次性编辑一组对象。（[http://django-tastypie.readthedocs.org/en/latest/interacting.html#updating-a-whole-collection-of-resources-put](http://django-tastypie.readthedocs.org/en/latest/interacting.html#updating-a-whole-collection-of-resources-put)）
有没有办法让我获得正在编辑的对象列表在任何通话中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:10:44.777

我也一直在为此苦苦挣扎。现在，我通过解析request.path来确定对象。我相信更直接的方法（例如通过 Authorization() 中的对象参数）将在 0.9.12 及更高版本中可用。

您可能还会看到这个问题：[如何将详细对象传递给美味派中的自定义授权？](https://stackoverflow.com/questions/11423030/how-can-i-pass-a-detail-object-to-custom-authorization-in-tastypie).

祝你好运。

# wcf - 在循环中发出 WCF 请求会导致超时异常

> ID：11454235
> 
> 赞同：2
> 
> 时间：2012-07-12T14:37:13.480
> 
> 标签：wcf, entity-framework, rest, timeout

我有两个离线和在线数据库。

在存在离线数据库的系统上，我创建了一个计划的应用程序，它从离线数据库中提取记录并使用 WCF 和实体框架将它们推送到在线数据库。

应用程序一次提取 10 条记录的批次，然后推送它们。

大多数情况下，离线数据库上有大量记录需要放在在线数据库上。

所以一个循环执行

1.  从离线数据库中提取数据库。
2.  将它们推送到 WCF。
3.  WCF 调用 DAL 层，这些记录已插入在线数据库中。
4.  请求完成后，标记他们在离线数据库中上传的那批记录。

它运行良好几次，然后它给出了错误

> {“连接超时。在登录后阶段超时。连接可能在等待服务器完成登录过程并响应时超时；或者它可能在尝试创建多个活动连接时超时。尝试连接到此服务器所花费的持续时间为 - [登录前] 初始化 = 3977；握手 = 7725；[登录] 初始化 = 0；身份验证 = 0；[登录后] 完成 = 3019；“}

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:05:20.273

在您提到的第 3 点

> WCF 调用 DAL 层，这些记录已插入在线数据库中。

您如何在数据库中插入记录？

您必须处置您的上下文，以便它可用于您即将提出的下一个请求。

我更喜欢“使用”声明。像这样的东西

```
 using (var context = new YourContext())
       {
           context.methodThatIsUsedToInsertRecords();
       } 
```

试试这个

# qt - 如何排除 QFileSystemModel 中的目录？

> ID：11454248
> 
> 赞同：1
> 
> 时间：2012-07-12T14:37:58.147
> 
> 标签：qt, dir, qfilesystemmodel

我使用此代码。

```
 QFileSystemModel* fsModel = new QFileSystemModel(this);
 fsModel->setFilter(QDir::NoDotAndDotDot | QDir::Dirs ); 
```

我不明白如何排除某些文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:42:51.697

从标准模型子类化当然是可能的，但被认为是不好的风格。通过实现通用过滤器代理模型，您将获得一个很好的可重用组件。继承`QAbstractProxyModel`并实现过滤器代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-10T12:07:35.783

创建一个过滤器模型并将您的`QFileSystemModel`用作其来源。

对于您的过滤器，`QSortFilterProxyModel`拥有您需要的大部分内容 - 您只需提供重新实现`filterAcceptsRow`即可决定应通过哪些文件。

# cassandra - 用于评论的 Cassandra 架构

> ID：11454252
> 
> 赞同：1
> 
> 时间：2012-07-12T14:38:05.467
> 
> 标签：cassandra, phpcassa

我正在寻找一种在 cassandra 中存储评论的好方法。有人可以为我提供一个好的 Cassandra 数据模型来存储评论吗？

[数据模型应该允许我使用phpcassa](http://thobbs.github.com/phpcassa/tutorial.html)检索一定数量的这些评论。

这是我的想法：

```
Comments = {
    CommentId1:{
        CommentAuthor,
        Content,
        Timestamp
    },
    CommentId2:{
        CommentAuthor,
        Content,
        Timestamp
    }
    ...
}

CommentsLine = {
    EntryId1:{
        CommentId1: timestamp,
        CommentId2: timestamp,
        CommentId3: timestamp,
        ...
    }
    ...
} 
```

但我不确定这是更好的方法。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:18:42.920

您的解决方案似乎很酷，但最好将带有时间戳的键存储在 CF CommentsLine 中，这样您就可以订购您的评论。

```
CommentsLine = {
    EntryId1:{
        timestamp: CommentId1 ,
        timestamp: CommentId2 ,
        timestamp: CommentId3 ,
        ...
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:07:04.437

我曾经解决过这个问题。这是我如何解决这个问题的。一个单独的 ColumnFamily 评论，其中每一行都是评论的 ID（我的 ID 的形式为 {Parent Post ID}-{Comment author user ID}-{Comment Posted Timestamp}），然后有一个包含 Author、comment、posted 的列日期等

您可以拥有自己的格式并将它们分离到一个单独的列族中，以确保它们是分布式的。

完成链接后，您必须将每个评论链接到其父级，您可以通过保留可以具有 {Posted Timestamp} -> {{Comment author user ID} 和其他元数据作为 JSON} 的列名评论来做到这一点（这完全是特定的根据我的情况，你应该想一些你喜欢的东西）。

当您可以生成的某人评论从 PHP 发布微时间并相应地插入到 cassandra 中。这种格式确保 Cassandra 以环的形式分发评论，并且帖子中的行保持最少，仅包含所需的信息。

加载评论需要您选择列，然后对评论列族进行 MultiGet 调用。

# algorithm - 求二维矩阵中任意角度值的最长拉伸的算法

> ID：11454254
> 
> 赞同：0
> 
> 时间：2012-07-12T14:38:12.253
> 
> 标签：algorithm, matrix, computer-vision, blob, longest-path

我目前正在开发一个计算机视觉程序，该程序需要我确定图像中颜色斑点的“方向”。颜色斑点通常遵循椭圆形状，因此可用于随时间跟踪方向（相对于最初定义/确定的方向）。

我认为计算方向变化的方法描述如下：

1.  将可能的方向（360 度）量化为 N 个方向（可能为 8 个，以 45 度角为增量）。
2.  给定一个表示颜色 blob 的初始状态 (t0) 的存储矩阵，还获取一个表示 blob 当前状态 (tn) 的矩阵。
3.  遍历这 N 个方向并搜索该给定方向的颜色值的**最长延伸。**（例如，如果椭圆旋转 45 度，0 为垂直，则最长的长度应归因于 45 度标记/或 225 度）。

这个概念本身并不复杂，但我遇到了以下问题：

*   计算图像中任意角度的值的最长拉伸。这对于 0、45、90 等角度很简单，但对于中间角度则更困难。“量化”角度对我来说并不像听起来那么容易。

请不要担心区分角度（例如 0 和 90）的潜在问题。惯性可用于确定颜色斑点的最可能方向（换句话说，基于过去的方向状态）。

我主要关心的是确定矩阵中的“最长延伸”。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:41:08.667

您可以按照此处的建议使用图像矩：[Matlab - Image Momentum Calculation](https://stackoverflow.com/questions/6877482/matlab-image-momentum-calculation)。

在 matlab 中，您将使用`regionprops`属性“方向”，但上一个答案中的 wiki 文章应该为您提供以您选择的语言对其进行编码所需的所有信息。

# paypal - PayPal 自适应支付延迟链式支 付的接收方配置

> ID：11454255
> 
> 赞同：0
> 
> 时间：2012-07-12T14:38:13.487
> 
> 标签：paypal, paypal-adaptive-payments

我正在使用 PayPal 自适应支付延迟链式支​​付。这个过程是不直观的。

**Q1：如何处理向二级收款人的付款？**

API 调用如下：
1\. 使用 actionType=PAY_PRIMARY 进行支付 API 调用，它只会处理对主要收款人
的付款 2\. 显式处理对次要收款人的付款。

如何处理上述第 2 步？我是否使用 ExecutePayment API 操作？（这看起来不正确，因为在文档中它说要使用 payKey，但是 payKey 将在我需要处理对辅助接收方的付款时过期。）

**Q2：延迟链式支​​付可以使用 SECONDARYONLY 作为 feePayer 吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:22:15.660

**A1：**您将调用**ExecutePayment**，将 PayKey 作为参数传递。为了消除您的疑虑，PayKey在付款开始**前**的保质期为 3 小时。

一旦付款被客户批准（即链式付款的第一阶段完成），PayKey 将成为永久性的并且不会过期。

对于延迟的链式付款，PayPal 会给您 90 天的时间来明确完成第二阶段。之后，它将不允许您这样做，并且主要需要手动将钱发送到辅助接收者。

**A2：**是的，但您只能在有单个辅助接收器时使用此变量。

# design-patterns - 对象到 xml 转换的设计模式

> ID：11454260
> 
> 赞同：4
> 
> 时间：2012-07-12T14:38:37.357
> 
> 标签：design-patterns, xml-serialization

我们有一组不同的 POCO 实体，它们代表应用程序的域模型。现在我们需要提出一个 xml 表示来编译来自不同实体的数据，这些数据将被其他应用程序使用。我们有一个关于最终表示应该是什么样子的参考 xml。

基于上述，我有两个问题主要与最佳实践和优化有关：

*   给定目标 xml 结构，根据来自不同实体的数据创建 xml 文件的最佳和推荐方法是什么？我应该尝试使用 xsl 转换还是基于 xsd 生成目标类并使用自定义翻译等？
*   由于这是 POC 练习的一部分，XML 转换最终将被数据库中的数据持久性或/和到 JSON 对象的转换所取代。我想知道是否可以使用某种设计模式来抽象出目标实现，这样当 xml 生成例程被 DAL 调用或 JSON 翻译代码替换时，主代码就不会受到影响。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:51:58.220

[使用MS xsd 工具](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.100%29.aspx)基于目标 xsd 创建目标模型（POCO-ish），并通过隐藏翻译实现的外观在代码中进行转换。

为了简化转换，您可以使用例如[github 上的 Automapper](https://github.com/AutoMapper/AutoMapper)。

从目标模型可以很容易地生成 XML、JSON 或使用例如实体框架来持久化数据。

通用 JSON 序列化示例：

```
 public static string GetString<T>(T value)
    {
        using (var ms = new MemoryStream())
        {
            var ser = new DataContractJsonSerializer(typeof(T));
            ser.WriteObject(ms, value);
            byte[] json = ms.ToArray();
            ms.Close();
            return Encoding.UTF8.GetString(json, 0, json.Length);
        }
    } 
```

我过去曾尝试过 XSLT 路线，虽然它很强大，但它往往会很快变得复杂。使用上面的目标模型，您将能够在需要时调试您的转换，它还为您提供了一系列前进的机会。

**回复： AutoMapper**，在这种情况下，当目标结构很复杂并且可能与源不同时，很难让 AutoMapper 直接映射所有内容，我通常会创建一个 Orchestrator/SuperMapper 负责内部使用 AutoMapper 的整体结构/映射.

提示：如果一个目标需要多个值，可以将其设置为同一个对象的一系列映射，请参阅此[问题/答案](https://stackoverflow.com/a/5376066/1045728)。

如果没有考虑到特定的结构，很难给出一个好的通用答案。

**Re: Facade** Wikipedia 对这种模式有一个很好的定义 >> [Facade on Wikipedia](http://en.wikipedia.org/wiki/Facade_pattern) 但简而言之，为您的 Orchestrator/SupperMapper 定义最简单的接口，这样您就可以将翻译结构的内部工作与应用程序的其余部分分开。这样，当您的需求发生变化时，您可以轻松地将其换成其他东西。这样，您的应用程序的其余部分不需要了解 AutoMapper 或目标模型。它所知道的只是放入源模型并期望返回 Json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:49:30.557

您在此处寻找的设计模式是[数据传输对象 (DTO)](http://msdn.microsoft.com/en-us/library/ms978717.aspx)。这些是没有行为的简单类。然后，您将创建一个汇编程序以将应用程序的域模型转换为 DTO。

假设您使用的是 C# 或 VB.Net，则可以使用[xsd.exe](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.100%29.aspx)轻松创建 DTO 。我相信您可以找到其他语言的等价物。

一旦你完成了这个设置，你在 Assembler 中进行转换的内容就不那么重要了，因为它被很好地封装了。如果您需要，将来可以轻松更改它。然而，正如 Tommy 所说，我建议不要使用 XSLT。XSLT 仅真正允许您更改 XML 文档的形状，它不允许诸如替换值（id 的枚举名称）或计算（订单行的总和给出总数）之类的事情。

有关更多信息，请参阅：

[http://martinfowler.com/eaaCatalog/dataTransferObject.html](http://martinfowler.com/eaaCatalog/dataTransferObject.html)
[http://msdn.microsoft.com/en-us/library/ms978717.aspx](http://msdn.microsoft.com/en-us/library/ms978717.aspx)
[http://en.wikipedia.org/wiki/Data_transfer_object](http://en.wikipedia.org/wiki/Data_transfer_object)

# c - 如何为这个结构分配 malloc

> ID：11454261
> 
> 赞同：0
> 
> 时间：2012-07-12T14:38:37.913
> 
> 标签：c, malloc

```
typedef struct testMsg_ {
    unsigned char opCode;
    unsigned int  Count;
    char    *macsStrList[MAC_ADDR_STR_LEN];
} testMsg_t; 
```

macsStrList 中的元素数为 m_Count。

我知道以下是不正确的：

```
testMsg_t *pInput = (testMsg_t *) malloc(sizeof(testMsg_t) ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:51:12.723

鉴于您所做的结构，这**是正确的**

> testMsg_t *pInput = (testMsg_t *) malloc(sizeof(testMsg_t) );

但是，您可能`*arr[dimension]`对字符指针的数组长度维度的含义感到困惑-在行间读取，

> > MAC_ADDR_STR_LEN

可能是mac地址的字符串表示的长度（比如<20字节？）

但是，您的结构为您提供了 20 个字符指针，并且字符指针仍然必须初始化以指向有效内存。

```
testMsg_t *pInput = (testMsg_t *) malloc(sizeof(testMsg_t) );
pInput->macsStrList[0] = (char *) malloc( MAC_ADDR_STR_LEN+1 );
pInput->macsStrList[1] = (char *) malloc( MAC_ADDR_STR_LEN+1 );
pInput->macsStrList[2] = (char *) malloc( MAC_ADDR_STR_LEN+1 );
... 
```

或将您的结构重新定义为

```
typedef struct testMsg_ {
    unsigned char opCode;
    unsigned int  Count;
    char    macsStrList[NUMBER_OF_MAC_ADDRESSES][MAC_ADDR_STR_LEN];
} testMsg_t; 
```

避免不得不处理多个分配。

**添加**;

根据评论，鉴于mac地址的数量是动态确定的，您还可以将结构定义为；

```
typedef struct testMsg_ {
        unsigned char opCode;
        unsigned int  Count;
        char    macsStrList[1][MAC_ADDR_STR_LEN];
    } testMsg_t; 
```

然后使用分配它

```
testMsg_t *pInput = (testMsg_t *) malloc(sizeof(testMsg_t) + (countOfMacsAddresses * MAC_ADDR_STR_LEN) ); 
```

`realloc`如果您也需要这样做，那将添加一个带有指针的解决方案，您可以使用它来动态调整数组大小......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:01:13.103

我认为您正在寻找的可能是（好吧，Soren 首先进入，但我将展示一种分配单个连续块的方法）：

```
/* assuming we only need macStrList[0] ... [Count-1] */
struct testMsg
{
    unsigned char opCode;
    unsigned int  Count;
    char *macsStrList[];
};

struct testMsg *allocate_testMsg(int count)
{
    char *string_storage;
    struct testMsg *msg;

    size_t size = sizeof(struct testMsg)   /* base object */
                + (count * sizeof(char *)) /* char* array */
                + (count * (MAC_ADDR_STR_LEN+1)) /* char storage */
                ;

    msg = malloc(size);
    msg->Count = count;
    string_storage = (char *)&(msg->macStrList[count]);

    /* note msg->macStrList points to UNINITIALIZED but allocated storage.
       it might be sensible to zero-fill string_storage, depending on how you'll
       initialize it
    */
    for (count=0; count < msg->Count;
         ++count, string_storage += (MAC_ADDR_STR_LEN+1))
    {
        msg->macStrList[count] = string_storage;
    }

    return msg;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:45:56.760

当然是。您分配一个指向 a 的指针，`testMsg_t`它是 的别名`struct testMsg_`。但是，您需要自己初始化此对象。

（而且您不需要在 C 中强制转换分配的指针）。

# python - 如何修复 Apache mod_wsgi 的 Python 版本不匹配？

> ID：11454264
> 
> 赞同：3
> 
> 时间：2012-07-12T14:38:43.877
> 
> 标签：python, apache, mod-wsgi

我收到此错误：

```
[Thu Jul 12 14:31:36 2012] [error] python_init: Python version mismatch, expected '2.6.7', found '2.6.8'. 
```

在尝试启动 Apache 服务器时。在一个问题中，有人建议为正确版本的 Python 重建 mod_python。但是不再支持 mod_python 了。那么如何将 Python 2.7 或 2.6 与 mod_wsgi 一起使用并修复该错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:46:11.800

最后我从 python.conf 中删除了 mod_python 模块。并重建了 mod_wsgi。现在它正在工作。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:37:05.953

通常次要版本不需要重建，但在这种情况下，您可能需要重建 mod_wsgi。您可能需要卸载并重新安装该软件包。我认为建议您重建 mod_python 的人很困惑；这是为了支持 mod_wsgi 而弃用的包。

# c# - C# 无符号整数 96 位

> ID：11454265
> 
> 赞同：-1
> 
> 时间：2012-07-12T14:38:44.437
> 
> 标签：c#, class, int, unsigned

你能帮我实现一个代表 96 位无符号整数的类吗？

我把这个类叫做Flag96。

代码：

```
class Flag96
{
    private object array = new uint[3];

    public Flag96(uint a1, uint a2, uint a3)
    {
        uint[] _array = (uint[])array;

        _array[0] = a1;
        _array[2] = a2;
        _array[3] = a3;
    }
} 
```

但是当我尝试使用它时：

```
public Flag96[] example; 
```

不起作用。Microsoft 定义的最大整数大小是 64 位，所以我需要一个新类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T14:43:18.910

`decimal`基本上是一个带有比例因子的 96 位整数。使用`decimal`. 除此之外......你需要类似的东西[`BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)

当然，给定名称`Flag96`：如果您**只是**将它用于标志（即按位而不是整数处理），那么 a`ulong`和`uint`并排应该可以正常工作。只需选择适合您所追求的标志的字段和偏移量。

# ios5 - scrollViewWillEndDraggin:WithVelocity:targetContentOffset 委托方法错误

> ID：11454270
> 
> 赞同：0
> 
> 时间：2012-07-12T14:38:55.047
> 
> 标签：ios5, uiscrollview, xcode4.2, horizontal-scrolling, uiscrollviewdelegate

我正在 UIViewController 中实现 UIScrollView 及其委托。它以水平方式滚动。

我想要的是在视图被拖动并稳定时设置“磁性”。

为此，我正在听委托，特别是标题中提到的方法。它返回我最终目的地的偏移量。然后我使用 setContentOffset 或 setvisiblerect 方法使 scollview 显示与此目标相对应的视图。

我还 NSlog 整个方法以捕获错误。特别是在调用该方法之后，我有一个 nslog 确认我/或没有，如果该方法被触发。

问题：当我构建&运行时，第一个 nslog 通过拖动平均触发了 3 次。所以整个效果看起来很奇怪，我不知道它是否有效。

我在网上找到的关于这个的东西很少。因此，如果您有一些线索，那将是一个很大的帮助。干杯

我有点绝望：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:30:03.783

所以你想让滚动视图在用户完成拖动时捕捉到一个有效的选择？您应该能够使用

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)thisScrollView 
```

和

```
- (void)scrollViewWillDidScroll:(UIScrollView *)thisScrollView 
```

方法。在没有看到您的代码的情况下，我无法确切地告诉您如何进行此操作，但我建议您跟踪`thisScrollView.contentOffset.x`变量中的 ，并进行一些算术运算以使用

```
[UIView beginAnimations: @"anim" context: nil];
[UIView setAnimationBeginsFromCurrentState: YES];
[UIView setAnimationDuration: movementDuration];
self.view.frame = CGRectOffset(self.view.frame, 0, movement);
[UIView commitAnimations]; 
```

调用将其移动到适当的位置。

# sql - 如何使用 Wix 创建 SQL Server 数据库

> ID：11454274
> 
> 赞同：0
> 
> 时间：2012-07-12T14:39:09.303
> 
> 标签：sql, visual-studio-2010, wix

我正在尝试创建一个将安装 SQL Server 数据库的 .msi。我有以下代码，但是当我在虚拟机上运行 .msi 时，数据库没有显示在 VM 上的 SQL Server Management Studio 中。我错过了什么？

```
<Directory Id="TARGETDIR" Name="SourceDir" ComponentGuidGenerationSeed="MYGUID-AEAC-4fdf-86D0-05B33BAD4550">      
     <Component Id="SqlScripts" Guid="MyGUID-A87F-42D2-B6E7-BD8790548625">

        <util:User Id="SQLUser" Name="User" Password="password" CreateUser="yes" UpdateIfExists="no"/>

           <sql:SqlDatabase Id="SQLDatabase" Database="MyDatabase" User="SQLUser" Server=".\SQLEXPRESS"
         CreateOnInstall="no" CreateOnUninstall="no" CreateOnReinstall="no" ConfirmOverwrite="no"
         DropOnInstall="no" DropOnReinstall="no" DropOnUninstall="no" ContinueOnError="yes">
           <sql:SqlScript Id="MyDatabase" BinaryKey="MyDatabase" ExecuteOnInstall="yes" ExecuteOnReinstall="no" ExecuteOnUninstall="no" ContinueOnError="no" Sequence="4"/>
        </sql:SqlDatabase>

        <!-- stops and restarts World Wide Web Publishing Service (W3SVC) during the install or uninstall -->
        <ServiceControl Id="ServiceControlWebSite" Name="W3SVC" Start="both" Stop="both" Wait="yes" />
     </Component>
  </Directory>

  <Binary Id="MyDatabase" SourceFile="myDatabase.sql"/>

  <Feature Id="Complete" Title="Setup" Level="1">         
     <ComponentRef Id="SqlScripts" />
  </Feature> 
```

我不知道服务控制是什么，但我认为它没有任何问题。

Wix 应该创建数据库还是脚本应该这样做？目前该脚本创建表并插入数据。我也尝试使用创建数据库的脚本，但没有任何反应。我怀疑是否执行了任何代码，因为没有创建任何内容。

当我在 SQL Server Management Studio 中单独运行脚本时，会创建数据库，这进一步增加了我对 Wix 代码是否正常工作的怀疑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:39:13.193

我总是设置 CreateOnInstall="yes" 因为如果它不存在，它会为您创建数据库，或者如果它存在，它会给您一个参考。还要设置 ContinueOnError="no" 以便向用户显示任何错误。

最大的潜在问题是您用于运行脚本的用户。它正在创建中，除非您授予它管理员权限（看起来您不是），否则它将没有所需的权限。我以 sa 身份运行我的 sql 脚本，然后创建一个受限访问用户供应用程序使用。

至于服务控制，上面的评论告诉你它在做什么！;)

# php - uploadprogress 扩展：uploadprogress_get_info 总是返回 null

> ID：11454275
> 
> 赞同：2
> 
> 时间：2012-07-12T14:39:11.427
> 
> 标签：php, upload

我想在我的上传代码中添加一个进度条，所以我已经安装了 uploadprogress 扩展（实际上我已经将我的 wamp 服务器降级到 wamp 2.0，因为这个已经有扩展但新版本似乎有问题）

这是我的后端代码

/////////////////上传中

```
<?php

if (isset($_POST['upload'])) {
    echo 'UPLOADING . . . <br />';

    $location = './uploads';
    $new= uniqid().'.'.end(explode('.' , basename($_FILES['mailfile']['name']) ));  
    if(move_uploaded_file( $_FILES['mailfile']['tmp_name'],"$location/$new"))
       echo 'DONE !! ';
    else
       echo 'error';

} 
```

////////////// 获取上传信息

```
else if(isset($_GET['get_info']))
{
        if (function_exists("uploadprogress_get_info")) {

            $info = uploadprogress_get_info($_GET['get_info']);
        } else {
            $info = 'nofunc';
        }
        var_dump($info);
} 
```

//////////////上传表单

```
else
{           $uploadID = substr(md5(microtime(true)), 0, 10);
    ?>

            <form enctype="multipart/form-data" action="uploadprogress.php" method="post" >
                <input type="text" name="UPLOAD_IDENTIFIER"  value="<?php echo $uploadID; ?>" id="uploadIdentifier" />
                <input id="file" name="mailfile" type="file" />
                <input type="submit" value="Send File" id="btn" name="upload" />
            </form>

    <?php
} 
```

这是我在上传文件时的前面 html/jquery 代码，它从 iframe 获取 UPLOAD_IDENTIFIER 值并将其发送到 set() 函数，该函数假设通过 ajax 调用获取上传进度，但它总是返回 null

```
<html>
    <head>
    <script language="javascript" src="../../js/jquery.js"></script>
        <script>
        var val;
        $(function(){

            $('#progress_iframe').load(function() {
                var ifr = $(this);

              $(this)
                .contents()
                .find('#btn')
                .bind('click', function() {

                    val = ifr.contents().find('#uploadIdentifier').val();
                     set();

                    //  do stuff
                });
            });

        })

function set() { 
   $.get('uploadprogress.php' , {get_info : val} , function(data){
      data = $.trim(data);
     $('#info').html(data) ;
     if(data < 100  )
     set();
   })
  }

        </script>
    </head>
    <body>

<div>
<iframe id="progress_iframe" src="uploadprogress.php" frameborder="0">   </iframe>
<span id="info"></span>     
</div>
    </body>
</html> 
```

所以文件上传没有任何问题，我尝试了一个大文件，但仍然在上传文件时，uploadprogress_get_info 为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T06:51:37.780

1.  检查 UploadProgress tmp 目录是否可以在服务器上访问。这意味着“uploadprogress.file.filename_template”指的是 phpinfo 中正确的 tmp 文件夹。

2.  您可以运行以下代码来检查这一点。

    背景颜色：红色；"'；打印 ">问题。";

    if ($template == $templateini) {
    print "uploadprogress.file.filename_template ($templateini) 中没有用于制作唯一临时文件的 %s。请调整。<br/>";
    “
    _
    _ ;
    }
    } else {
    print 'background-color: green;">uploadprogress 扩展已安装，初始检查显示一切正常';
    }
    } else {
    ?>
    background-color: red;">未安装 uploadprogress 扩展。
    <

    </div>

3.  如果上面的代码出错，请在 php.ini 文件中指向正确的 tmp 目录。在 Windows localhost 机器上的 Xampp tmp 目录的 php.ini 文件中添加了以下行。uploadprogress.file.filename_template = C:\xampp\tmp\some_name_%s.txt

4.  现在你的代码应该可以工作了。

# sql-server-2008 - 我无法从 sql 中完全检索数据？

> ID：11454277
> 
> 赞同：-1
> 
> 时间：2012-07-12T14:39:13.627
> 
> 标签：sql-server-2008, c#-4.0

```
public string getString()
{

  con.ConnectionString = ConnString;
  con.Open();
  string sp = "select top 3 hotelid from hotel order by NEWID()";
  SqlCommand cmd = new SqlCommand(sp, con);

  SqlDataAdapter sa = new SqlDataAdapter(cmd);
  cmd.ExecuteNonQuery();
  reader = cmd.ExecuteReader();
  while (reader.Read()) //Call Read to move to next record returned by SQL //OR call --While(reader.Read()) 
  {
    det  = reader[0].ToString();

  }
  reader.Close();
  con.Close();
  return det;
} 
```

当我执行此代码时，我只能检索一项数据？但是当我执行 SQL 查询时，我能够随机检索 3 项数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:45:23.137

您正在覆盖每个循环`det`上的变量。`while`

您要么需要创建一个集合并添加到其中，要么连接字符串（注意`+=`）...

```
det += reader[0].ToString(); 
```

**更新**

如上所述，另一种选择是创建一个集合，例如...

```
public List<string> getString()
{
  ...
  List<string> ret = new List<string>;
  while (reader.Read())
    ret.Add(reader[0].ToString());
  ...
  return ret;
} 
```

# facebook - 脸书帖子的评论框

> ID：11454279
> 
> 赞同：1
> 
> 时间：2012-07-12T14:39:21.273
> 
> 标签：facebook, facebook-social-plugins

是否可以将评论框链接到 Facebook 上的（公开）帖子？

我为评论框尝试了几个网址：

*   graph.facebook.com/postid
*   永久链接
*   facebook.com/user/posts/postid

他们都没有工作。

我知道我可以使用 Graph API`get`并`post`代表用户发表评论，但这需要用户接受我的应用程序（这似乎有点矫枉过正，只是为了评论 Facebook 上的帖子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:41:48.847

评论插件仅适用于（Facebook 之外的）URL。Facebook 上的公开帖子无法使用该插件。

# android - 呼叫活动

> ID：11454281
> 
> 赞同：0
> 
> 时间：2012-07-12T14:39:30.693
> 
> 标签：android

我是 android 开发的新手，我对活动感到困惑（甚至不确定它们是否被称为活动大声笑）我将如何从一个内部开始另一个活动？

```
public void work(View v) {
     //does quite a bit of stuff in here
     //then goes back to csend() to check if this needs to be repeated
}

public void csend(View view) {  
     if (i  < x){   
         //does a little bit of stuff here
     work(); //i need to make this run the other code   
     }
} 
```

另外，（查看视图）是什么意思，有人可以给我一个教程的链接，该教程解释了android代码的不同部分吗？

谢谢编辑：感谢您的快速回复，我会去阅读所有内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:41:04.920

```
Intent showContent = new Intent(this, ActivityName.class);
startActivity(showContent); 
```

[http://www.androidcompetencycenter.com/2009/03/tutorial-how-to-start-a-new-activity/](http://www.androidcompetencycenter.com/2009/03/tutorial-how-to-start-a-new-activity/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:45:13.230

你也可以使用，

```
startActivity(new Intent(YourClassName.this, SecondActivity.class)); 
```

# .net - 是否可以将 Windows 工作流包装到 Web 服务中，以便任何类型的客户端都可以触发它？

> ID：11454285
> 
> 赞同：2
> 
> 时间：2012-07-12T14:39:34.593
> 
> 标签：.net, workflow-foundation-4, workflow-foundation

我在 .Net 平台上经验丰富，但从未使用过 Windows 工作流。

我现在需要了解一些有关它的信息，并且我正在尝试将工作流包装到一个简单的 Web 服务 (SOAP) 中。这可能吗？

我在网上找不到任何关于此的好例子或文章。如果您需要长时间运行的工作流程需要暂停一段时间（例如几天），我也不确定它是如何工作的。

正在使用最新的 .Net 4.0 框架..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:46:06.770

是的。[WF 和 WCF 使用Workflow Service](http://msdn.microsoft.com/en-us/vs2010trainingcourse_introtowfservices.aspx)很好地集成。

# asp.net - 在 asp.net 中继器中添加多个新行

> ID：11454287
> 
> 赞同：5
> 
> 时间：2012-07-12T14:39:37.620
> 
> 标签：asp.net, repeater

我正在开发一个允许用户输入/编辑多条记录的 asp.net 页面。我正在使用 Repeater 控件来显示每条记录的输入字段。我想要一个“添加”按钮，单击该按钮会插入一组新的空白输入字段。用户应该能够输入新记录，然后多次单击添加按钮并继续添加新记录。然后，当用户单击“保存”按钮时，这些新记录将与对现有记录的更改一起保存。如果用户没有点击保存，记录应该被丢弃并且不被写入数据库。

有没有办法用Repeater控件实现这个“添加”功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:58:38.330

有一个相当简单的解决方案。假设您有某种形式的视图模型临时保存用户输入的任何数据，您可以简单地向转发器用作数据源的集合添加一个额外的“空白”视图模型。保存时，您可以简单地将所有修改保存到视图模型中存在的数据库中。一个可能的例子是：

```
 protected void btnAdd_OnCommand(object sender, EventArgs e)
    {
        List<Item> items = (List<Item>)this.ItemRepeater.DataSource;
        items.Add(new Item() { Id = -1 });
        this.ItemRepeater.DataBind();
    }

    protected void btnSave_OnCommand(object sender, EventArgs e)
    {
        List<Item> items = (List<Item>)this.ItemRepeater.DataSource;

        foreach (Item itm in items)
        {
            if (itm.Id == -1)
            {
                //Save New Item
            }
            else
            {
                //Update existing item
            }
        }
    } 
```

这里的主要警告是，您必须使用用户所做的任何更改（您希望保留/显示）更新的视图模型重新填充 ItemRepeater 的数据源。

# linux - 需要脚本帮助

> ID：11454289
> 
> 赞同：-4
> 
> 时间：2012-07-12T14:39:38.387
> 
> 标签：linux, shell, scripting

我需要帮助编写脚本。

要求是：

将文件或目录（/tmp/somefile 或 /home/username/somefile）的绝对引用作为参数并显示以下内容的脚本：

1.  文件是文件还是目录？
2.  我对文件/目录有读取权限吗？
3.  我对文件/目录有写权限吗？
4.  文件是否可执行？
5.  文件的权限 - “ls -l”中的 rwx 内容将起作用。

如果您有任何我可以阅读的好资源，请随时发布它们，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:24:39.760

由于您到目前为止还没有展示您尝试过的内容，因此我不会直接回答您（只是因为我不知道这是家庭作业还是您还没有尝试过）。

您会发现[bash 手册页中的](http://linux.die.net/man/1/bash)[“条件表达式”](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions)部分很有用。

例如，在测试命令列表下：

> ```
> -r file
>       True if file exists and is readable. 
> ```

`if`在声明中应用它：

```
[me@home]$ if [ -r $HOME ]; then echo "readable"; else echo "not readable"; fi
readable
[me@home]$ if [ -r /root ]; then echo "readable"; else echo "not readable"; fi
not readable 
```

这应该回答您的第二个问题，即“我是否具有文件/目录的读取权限？”。

有类似的标志可以测试“是目录”、“可写”、“可执行”等，它们回答了您的大多数其他问题（除了最后一个问题）。

对于您的最后一个问题，这是从以下位置提取权限列的一种方法`ls -l`：

```
[me@home]$ ls -l $HOME/.bashrc | awk '{print $1}'
-rw-r--r-- 
```

祝你的剧本好运。

# c# - Form.ShowDialog() 和处置

> ID：11454291
> 
> 赞同：11
> 
> 时间：2012-07-12T14:39:46.480
> 
> 标签：c#, winforms, dispose, idisposable

如果我有这样的方法：

```
public void Show()
{
   Form1 f = new Form1();
   f.ShowDialog();
} 
```

**即使它超出范围，**我仍然需要在表单上调用 dispose ，这将有资格进行垃圾收集。****

 **从一些测试来看，多次调用这个 Show() .. 在某些时候，GC 似乎收集了它，因为我可以看到内存激增，然后它在某个时间点下降。

从 MSDN 看来，当不再需要表单时，您必须调用 dispose 。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T14:41:42.263

倾向于发生的情况是，如果项目具有纯**托管**资源，则不一定*需要*调用 dispose ，但***强烈建议***使用它，因为它使dispose 具有**确定性**。它并不总是需要（在技术意义上），因为这些托管资源现在很可能有资格进行 GC，或者默认情况下实际上没有什么可处理的，这是一个可扩展点。

对于**非托管**资源，[Dispose Pattern](http://www.codeproject.com/Articles/15360/Implementing-IDisposable-and-the-Dispose-Pattern-P)建议实现一个**终结**器，它将在 GC 上调用。如果类型没有实现终结器并且没有调用 dispose，那么有*可能*（嗯，很可能）资源将未被处理。终结器是运行时提供的最后一次清理你的东西的机会——它们也是有时间限制的。

请注意，它**不会**使 GC 或托管内存回收具有确定性，处置*不是* `delete`来自 C++。处置的物品可能距离实际收集还有很长的路要走。但是，在托管世界中，您不关心确定性收集，只关心资源管理 - 换句话说，处置。

也就是说，如果类型是一次性的，我总是确保调用 Dispose 或使用`using`语句，*无论*它使用托管资源还是非托管资源 - 这是预期的约定：

```
public void Show()
{
    using (var f = new Form1())
    {
        f.ShowDialog();
    } // Disposal, even on exceptions or nested return statements, occurs here.
} 
```

**更新：**

在与 Servy 讨论之后，我觉得我必须将这一点表达为我建议尽可能处置的理由。在 的情况下`MemoryStream`，它显然是一次性类型，但实际上目前不处理任何东西。

然而，依靠这一点，就是*依靠*. `MemoryStream`如果将其更改为包含非托管资源，那么这将意味着依赖`MemoryStream`没有任何东西可处置会成为问题。

在可能的情况下（与 情况一样`IDisposable`）我更喜欢依赖*公共合同*。在这种情况下违反合同意味着我可以免受底层实现更改的影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T14:42:35.627

尽管您很少需要在 C# imo 中手动处理，但您可以像这样尝试：

```
 public void Show()
    {
       using (Form1 f = new Form1())
       {
         f.ShowDialog();
       }
    } 
```

然后在使用部分的最后一个赞誉中，它将被自动处理掉。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T14:41:48.880

你可以简单地做：

```
using (var f = new Form1())
   f.ShowDialog(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-10T10:13:12.110

ShowDialog 具有使 GDI 对象保持活动状态的副作用。为了避免 GDI 泄漏，我们需要适当地处理 ShowDialog。其中 Show 方法没有任何含义，GDI 会适当释放。建议处置 showDialog，不要依赖垃圾收集器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-12T14:42:08.303

如果要显式处置，请使用

```
 using(Form1 f = new Form1()){

            f.ShowDialog();
        } 
```

这确保了 Dispose() 被调用，以及它立即发生

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T15:08:27.073

在您的具体示例中，不，它不太可能特别有用。表单不会占用大量资源，因此如果清理它的某些部分代码需要更长的时间，它不会导致问题。如果该表单恰好持有用于播放视频的控件，那么它实际上可能持有大量资源，并且如果您确实在 dispose 方法中处理了这些资源，那么它是值得的花时间打电话给处置。但是，对于 99% 的表单，它们的 Dispose 方法将为空，无论您是否调用它都不太可能对您的程序产生任何（或任何明显的）影响。

它存在的原因主要是为了能够在重要的 1% 的情况下处理资源。

还值得注意的是，当 a`Form`关闭时，它的`Dispose`方法已经被调用。如果您想在表单关闭之前处理表单资源，则只需要添加`using`或显式调用。`Dispose`（这对我来说听起来通常是个坏主意）。这很容易测试。只需创建一个具有两种形式的项目。让第二种形式将事件处理程序附加到`Disposing`事件并显示消息框或其他内容。然后，当您创建该表单的实例并将其显示（作为对话框或不作为对话框）时，您会看到当您关闭它时，消息框会立即弹出，即使您将“表单”实例保留在周围并且没有您曾经需要添加`using`或`Dispose`调用。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-09-22T17:25:43.627

**是的，您需要并且必须**调用`Dispose`或使用`using`语句，否则可以，该实例保留在内存中。

如果您将 a 放入`Timer`表单并在处理程序中设置断点，您可以检查它`Timer.Tick`。即使在没有`Dispose`处理程序的情况下关闭表单后也会被调用。**

# php - 放置 HTML 净化器库的最佳位置？

> ID：11454294
> 
> 赞同：0
> 
> 时间：2012-07-12T14:39:50.783
> 
> 标签：php, html, security, htmlpurifier

这可能是一个非常愚蠢的问题，但是放置 HTML 净化器库的最佳位置在哪里？

我假设如果我把它放在 public_html 中，那么有恶意的人可以很容易地访问它，我应该把它放在与 public_html 相同级别的文件夹中吗？也许为它制作一个特殊的文件夹？或者我应该将它完全放在文档根目录之外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:44:38.303

有几种方法可以做到这一点。你已经列举了一些。第一种方法是将其放置在 Web 根目录之外，这样任何人都无法访问它。第二个（我经常使用的）是为该文件创建一个新文件夹，并在其中放置一个 .htaccess，其中包含以下内容：

```
Deny from all 
```

这允许您将文件包含在 php 中，但不能直接从浏览器调用它。

如果您想了解有关第二种方法的更多信息，请查看此[链接](http://www.kavoir.com/2009/01/htaccess-deny-from-all-restrict-directory-access.html)。

# postgresql - JPA Postgres 浮点映射/排序

> ID：11454302
> 
> 赞同：0
> 
> 时间：2012-07-12T14:40:30.047
> 
> 标签：postgresql, sorting, jpa, natural-sort

我们开发了一个使用 Postgres 数据库作为持久性介质的 Java EE 应用程序。我们的一些实体属性被映射为浮点数。对这些列进行排序会导致以下结果：

```
  分数
  1.0
  100.2
  2.0
  20.0
  3.0

```

我预期的结果是：

```
  分数
  1.0
  2.0
  3.0
  20.0
  100.2

```

float 属性在 postgres 数据库中使用数据类型 float(8) 进行映射。使用以下普通 sql 查询排序按预期工作：

```
SELECT score FROM Evaluation ORDER BY score::float 
```

还将列类型更改为“真实”的作品。有什么方法（除了使用列定义）可以使用 jpa 来完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:47:25.043

对不起您的努力:(。我再次查看了域模型。他们将分数保存在两列中。一列是浮点数，另一列是 varchar。排序操作对 varchar 列进行排序，所以字母数字排序是可以的。

# javascript - MongoDB 组织我的 js 代码库的良好做法：javascript 预处理器？

> ID：11454306
> 
> 赞同：0
> 
> 时间：2012-07-12T14:40:45.357
> 
> 标签：javascript, mongodb

我正在寻找围绕 mongo 组织我的 js 代码的好主意，但 map reduce 函数无法使用客户端范围，因此必须将所有函数发送（或保存）到服务器（难以重用现有代码）。我可以使用服务器存储的函数，但是因为我们有一个 db/client 系统，所以范围太大，db 范围的函数似乎是不可能的。

其他想法是使用 javascript 预处理器，类似这样：

```
var mapFunction = function() {
    // @include lib.js
    Lib.foo(this.bar);
} 
```

lib.js：

```
var Lib = {
    foo : function(bar) {...}
} 
```

并在 mapReduce 命令中运行生成的 mapFunction。

在 mongodb map/reduce javascript 代码库中是否有任何好的做法/想法来实现良好的代码重用（没有系统存储函数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:08:09.317

MongoDB中的[服务器端函数](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside)**是**DB 范围的。但是，通常不鼓励使用在版本控制系统中与应用程序的其余部分一起维护的代码。

如果您从应用程序发送 map/reduce 命令，则不需要预处理器......您可以调用插入适当代码的变量或函数。

您没有提到特定的语言，但这是从[MongoDB PHP 文档](http://php.net/manual/en/mongodb.command.php)中借用的示例：

```
// construct map and reduce functions
$map = new MongoCode("function() { emit(this.user_id,1); }");
$reduce = new MongoCode("function(k, vals) { ".
    "var sum = 0;".
    "for (var i in vals) {".
        "sum += vals[i];". 
    "}".
    "return sum; }");

$sales = $db->command(array(
    "mapreduce" => "events", 
    "map" => $map,
    "reduce" => $reduce,
    "query" => array("type" => "sale"),
    "out" => array("merge" => "eventCounts"))); 
```

# r - 在 R 中管道两个 bash 命令：损坏的管道错误

> ID：11454309
> 
> 赞同：4
> 
> 时间：2012-07-12T14:40:48.613
> 
> 标签：r, bash, pipe

我正在尝试在 R 中传输两个 bash 命令，但出现管道损坏错误；任何建议表示赞赏。这就是我所在的位置：

```
#Create a long file (2GB on your drive...)
write.csv(rep(1,1E8),file="long.txt", row.names=FALSE)

system("grep 1 tmp.txt")    #This works
system("grep 1 tmp.txt| head -n 10")    #This gives a broken pipe error 
```

我得到 grep: writing output: broken pipe 用一个短文件可以正常工作。请问我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T16:37:32.917

`grep`正在抱怨，因为它的输出超过 10 行，并且`head`在完成之前将其切断。

我建议隐藏 grep 的 stderr 输出（这是打印损坏管道错误的地方）。

```
system("grep 1 tmp.txt 2>/dev/null | head -n 10") 
```

如果您需要从 grep 中查看其他错误，这将不起作用；在这种情况下，您将需要一个更复杂的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:48:36.080

或者，如果您的实现`grep`支持它，您可以使用

```
grep -m 10 PATTERN FILE 
```

部分描述来自：`man grep`在 Ubuntu 12.04 上

```
-m NUM, --max-count=NUM
      Stop reading a file after NUM matching lines. 
```

这个选项在我遇到类似问题的 Red Hat 5.8 机器上也可用。

# firefox-addon-sdk - 将 URL 加载到图像时出现错误

> ID：11454322
> 
> 赞同：0
> 
> 时间：2012-07-12T14:41:21.890
> 
> 标签：firefox-addon-sdk

我认为我在附加 SDK 中发现了一个错误。当我尝试加载一个标签做这样的事情：

```
 var t = tabs.open({
                 url: linkURL,
                 inBackground: true,
                 onReady: closeTab(this)                 
             }); 
```

URL 是一个图像。onReady 事件永远不会被触发。

这是预期的行为吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:21:49.080

我不确定这是否算作错误，但您可能应该[提交错误报告](https://bugzilla.mozilla.org/enter_bug.cgi?product=Add-on%20SDK)以了解开发人员对此的看法。问题是 SDK 等待`DOMContentLoaded`事件来识别选项卡已准备好 - 但 Gecko 不会为图像文档触发此事件。SDK 可以[使用 Web 进度侦听器](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIWebProgressListener)，无论文档类型如何，这些都可以工作。

# c# - 添加`Load_Event`时对象未加载

> ID：11454326
> 
> 赞同：0
> 
> 时间：2012-07-12T14:41:26.283
> 
> 标签：c#, asp.net, onload-event

我正在使用的对象是`<asp:Chart/>`. 我使用 Visual Web Developper 2010 的绑定工具构建了它：

![在此处输入图像描述](../Images/88b17e862fe2ea06e10f2ac5af1ee6ab.png)

`properties`我用面板和 CSS 表改变了外观和行为。一切都很好，直到我不小心双击了图表。这`myChart_Load`为我的代码添加了一个方法。现在，如果我使用空图表加载方法启动我的页面，我的图表会从屏幕上消失，就好像它只是在`chart_load`查看要做什么，什么都看不到，然后什么都不显示，忘记绑定工具和属性/CSS .

然后如果我删除

```
protected void myChart_Load(object sender, EventArgs e) {
} 
```

上面的空加载，编译器崩溃并说它需要一个加载方法。知道为什么它会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:43:56.620

我不知道为什么添加一个加载处理程序它不会回来，但它现在出错了，因为在标记中，它在那里添加了事件处理程序引用`OnLoad="myChart_Load"`，所以它寻找这个，找不到它，并抛出一个例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:51:04.930

您可以通过删除它来从后面的代码中删除该方法。您还必须删除在 .designer.cs 文件中找到的方法的引用。

# r - R 数字从 1 到 100

> ID：11454333
> 
> 赞同：57
> 
> 时间：2012-07-12T14:41:55.673
> 
> 标签：r

> **可能重复：**
> [如何生成包含数字序列的向量？](https://stackoverflow.com/questions/7133413/how-to-generate-a-vector-containing-a-numeric-sequence)

在 R 中，如何获取从 1 到 100 的数字列表？其他语言有一个功能“范围”来做到这一点。R 的范围完全不同。

```
> range(1,100)
[1]   1 100 
```

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-07-12T14:45:39.503

你的错误是寻找`range`，它给你`range`一个向量，例如：

```
range(c(10, -5, 100)) 
```

给

```
 -5 100 
```

相反，请查看`:`运算符以给出序列（步长为 1）：

```
1:100 
```

或者您可以使用该`seq`功能进行更多控制。例如，

```
##Step size of 2
seq(1, 100, by=2) 
```

或者

```
##length.out: desired length of the sequence
seq(1, 100, length.out=5) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T14:26:25.133

如果您需要该构造来快速使用示例，请使用 : 运算符。

但是，如果您要动态创建一个向量/数字范围，请改用 seq() 。

假设您正在使用 a:b 创建从 a 到 b 的向量/数字范围，并且您希望它是一个递增的系列。然后，如果 b 被评估为小于 a，您将得到一个递减序列，但您永远不会收到通知，并且您的程序将继续执行错误类型的输入。

在这种情况下，如果使用 seq()，则可以设置*by*参数的符号以匹配序列的方向，如果它们不匹配，则会引发错误。例如，

```
seq(a, b, -1) 
```

将引发 a=2, b=6 的错误，因为编码器期望一个递减序列。

# android - 在弹出窗口中单击时，textview背景颜色没有改变

> ID：11454340
> 
> 赞同：5
> 
> 时间：2012-07-12T14:42:15.923
> 
> 标签：android

我正在使用带有 textviews 的 PopUpwindow。问题是当我单击任何文本视图时，背景颜色没有改变，尽管它在文本视图聚焦但没有点击时发生变化。

单击后，我将关闭弹出窗口，如果我不关闭弹出窗口，则背景颜色会根据选择器发生变化：

这是我的 textview 背景选择器：

```
<item android:state_focused="true" android:drawable="@drawable/focused" />    
<item android:state_pressed="true" android:drawable="@drawable/pressed" />
<item android:drawable="@drawable/priornone" /> <!-- default --> </selector> 
```

在我的弹出窗口中，我正在做的就是：

```
TextView manage_list = (TextView)popupView.findViewById(R.id.manage_lists);
manage_list.setOnClickListener(new View.OnClickListener(){

public void onClick(View v) 
{

  Intent myIntent = new Intent(v.getContext(),ManageList.class);
      popupWindow.dismiss();
  startActivity(myIntent);

 }}); 
```

弹出窗口的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>

  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
  android:background="@drawable/pop_menu_bg"
 android:orientation="vertical"
    >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/manage_lists"
    android:text="Manage lists"
    android:background="@drawable/my_drawable"
 >
 </TextView>

</LinearLayout> 
```

如果我不关闭弹出窗口，它的非常奇怪的行为一切正常，但如果我关闭点击时的弹出窗口 textview 背景不会改变。

我究竟做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:49:05.033

我相信如果你使用上面的代码，你会没事的：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_focused="true" android:drawable="@drawable/focused" />
<item android:state_pressed="true" android:drawable="@drawable/activated" /> 
<item android:drawable="@drawable/priornone" />
</selector> 
```

您不能在一个项目中定义两种不同的状态。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T22:06:34.610

检查您是否有命名冲突。如果您的任何更改都没有出现，那么由于某种命名问题与导入的库冲突而导致它无法正常工作的可能性可能是您的主要问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:50:09.063

//你需要删除`android:state_pressed="true"`when`android:state_focused="true"`也是 true。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/button_pressed" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/button_focused" /> <!-- focused -->
    <item android:state_hovered="true"
          android:drawable="@drawable/button_focused" /> <!-- hovered -->
    <item android:drawable="@drawable/button_normal" /> <!-- default -->
</selector> 
```

[参考这里：](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

**编辑：**您需要将 Linearlayout 属性指定为 `android:clickable="false"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:50:27.233

你会像 Checkbox 一样使用你的 TextView，不是吗？

使用布尔标志来试试这个。

```
private boolean clicked = false;

// ...

mytextView.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v){
        clicked = !clicked;

        if(clicked){
            mytextView.setBackgroundColor(yourcolorclicked);
        }else{
            mytextView.setBackgroundColor(yourcolorunclicked);
        }
        mytextView.invalidate();
    }
}); 
```

# linux - 管道输出到 bash 函数

> ID：11454343
> 
> 赞同：88
> 
> 时间：2012-07-12T14:42:22.037
> 
> 标签：linux, bash, pipe

我在 bash 脚本中有同样简单的函数，我想将标准输出作为输入传递给它。

```
jc_hms(){
  printf "$1"
} 
```

我想以这种方式使用它。

```
var=`echo "teststring" | jc_hms` 
```

当然，我使用了冗余函数 echo 和 printf 来简化问题，但你明白了。现在我收到一个“未找到”错误，我认为这意味着我的参数定界错误（“$1”部分）。有什么建议么？

最初 jc_hms 函数是这样使用的：

```
echo `jc_hms "teststring"` > //dev/tts/0 
```

但我想先将结果存储在一个变量中以供进一步处理，然后再将其发送到串行端口。

编辑：所以澄清一下，我不是想将东西打印到串行端口，我想连接到我的 bash 函数应该是“|” 管道字符，我想知道这是否可能。

编辑：好的，这是完整的功能。

```
jc_hms(){
  hr=$(($1 / 3600))
  min=$(($1 / 60))
  sec=$(($1 % 60))

  printf "$hs:%02d:%02d" $min $sec
} 
```

我正在使用该函数来形成这行代码的字符串

```
songplaytime=`echo $songtime | awk '{print S1 }'`
printstring="`jc_hms $songplaytime`"  #store resulting string in printstring 
```

其中 $songtime 是一个字符串，表示为由空格分隔的“playtime totaltime”。

我希望我可以在一行中做到这一点，并在 awk 之后进行管道传输

```
printstring=`echo $songtime | awk '{print S1 }' | jc_hms` 
```

像这样。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-12T17:20:04.333

要回答您的实际问题，当 shell 函数位于管道的接收端时，标准输入会被函数中的*所有*命令继承，但只有实际从其标准输入读取的命令才会消耗任何数据。对于一个接一个运行的命令，后面的命令只能看到前面的命令没有消耗的内容。当两个命令并行运行时，哪些命令查看哪些数据取决于操作系统如何调度命令。

由于`printf`是函数中的第一个也是唯一一个命令，因此标准输入实际上被忽略了。有几种方法可以解决这个问题，包括使用`read`内置将标准输入读取到可以传递给的变量中`printf`：

```
jc_hms () {
    read foo
    hr=$(($foo / 3600))
    min=$(($foo / 60))
    sec=$(($foo % 60))
    printf "%d:%02d:%02d" "$hr" "$min" "$sec"
} 
```

但是，由于您对管道的需求似乎取决于您对使用的感知需求`awk`，因此让我建议以下替代方案：

```
printstring=$( jc_hms $songtime ) 
```

由于`songtime`由一对以空格分隔的数字组成，shell 对 的值执行分词`songtime`，并`jc_hms`看到两个单独的参数。这不需要更改 的定义`jc_hms`，也不需要通过标准输入将任何内容输入其中。

如果您仍然有其他阅读标准输入的理由`jc_hms`，请告诉我们。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-07-12T14:49:19.377

您不能将内容直接通过管道传输到这样的 bash 函数，但是您可以使用`read`将其拉入：

```
jc_hms() {
  while read -r data; do
      printf "%s" "$data"
  done
} 
```

应该是你想要的

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2016-02-19T18:44:27.750

1）我知道这是一个很老的帖子

2）我喜欢这里的大部分答案

但是，我发现这篇文章是因为我需要类似的东西。虽然每个人都同意 stdin 是需要使用的，但这里缺少的答案是 /dev/stdin 文件的实际用法。

使用 read 内置强制此函数与管道输入一起使用，因此它不能再以典型方式使用。我认为利用 /dev/stdin 是解决这个问题的一种更好的方法，所以我想加上我的 2 美分以保证完整性。

我的解决方案：

```
jc_hms() { 
  declare -i i=${1:-$(</dev/stdin)};
  declare hr=$(($i/3600)) min=$(($i/60%60)) sec=$(($i%60));
  printf "%02d:%02d:%02d\n" $hr $min $sec;
} 
```

在行动：

```
user@hostname:pwd$ jc_hms 7800
02:10:00
user@hostname:pwd$ echo 7800 | jc_hms 
02:10:00 
```

我希望这可以帮助某人。

快乐黑客！

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-07-12T15:26:00.413

或者，您也可以通过简单的方式进行操作。

```
jc_hms() {
    cat
} 
```

尽管到目前为止所有的答案都忽略了这不是 OP 想要的事实（他说功能被简化了）

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-04-05T17:16:52.637

我喜欢 user.friendly 使用`Bash`内置条件未设置替换语法的答案。这里有一个细微的调整，使他的答案更通用，例如参数计数不确定的情况：

```
function myfunc() {
    declare MY_INPUT=${*:-$(</dev/stdin)}
    for PARAM in $MY_INPUT; do
        # do what needs to be done on each input value
    done
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-19T17:12:48.703

嗯……

```
songplaytime=`echo $songtime | awk '{print S1 }'`
printstring="`jc_hms $songplaytime`"  #store resulting string in printstring 
```

如果您仍然调用 awk，为什么不使用它呢？

```
printstring=`TZ=UTC gawk -vT=$songplaytime 'BEGIN{print strftime("%T",T)}'` 
```

我假设您使用的是 Gnu 的 Awk，它是最好的而且也是免费的；这将适用于不一定使用最新 gawk 的常见 linux 发行版。最新版本的 gawk 允许您将 UTC 指定为 strftime() 函数的第三个参数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-05T10:34:40.187

提议的解决方案要求内容`stdin`或`read`仅被有条件地调用。否则，该函数将等待来自控制台的内容，并在继续之前需要一个`Enter`或`Ctrl`+ 。`D`

一种解决方法是使用`read`超时。例如`read -t <seconds>`

```
function test ()
{
  # ...
  # process any parameters
  # ...
  read -t 0.001 piped
  if [[ "${piped:-}" ]]; then
    echo $piped
  fi
} 
```

注意，`-t 0`对我不起作用。
您可能必须为超时使用不同的值。太小的值可能会导致错误，而太大的超时会延迟脚本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-04T03:02:40.637

似乎没什么用，但有解决方法

提到[了围绕 xargs ref 函数的工作](https://til.hashrocket.com/posts/1tqyvzsa6y-using-zsh-functions-with-xargs)

```
$ FUNCS=$(functions hi); seq 3 | xargs -I{} zsh -c "eval $FUNCS; hi {}" 
```

那么这也不起作用，因为您的函数可以引用另一个函数。所以我最终编写了一些接受管道输入的函数，如下所示：

```
somefunc() {
    while read -r data; do
        printf "%s" "$data"
    done
} 
```

# c# - 实现代码问题

> ID：11454344
> 
> 赞同：1
> 
> 时间：2012-07-12T14:42:23.220
> 
> 标签：c#, wpf, mvvm, parameters, mef

我使用 arcGIS、C#、WPF 和 MEF 创建了一个地图应用程序。我实际上对所有这些让我的项目相当困难的事情都很陌生。我以自己想要的方式拥有应用程序，然后在需要将其实现到代码中时遇到了问题。

这是我的应用程序的部分代码：

```
[Export]
    [PartCreationPolicy(CreationPolicy.NonShared)]
    public partial class EsriMapView : DialogWindowBase
    {

        string Comments;
        string MeterNumMessage;
        GraphicsLayer _candidateGraphicsLayer;
        private static ESRI.ArcGIS.Client.Projection.WebMercator _mercator =
                new ESRI.ArcGIS.Client.Projection.WebMercator();
        bool blnAddInformationClicked = false;
        bool blnEnterAddressClicked = false;
        string Specification = "Object Number: ";
        string addressCombined;
        string Object;
        string OComment;
        string OStreet;
        string OCity;
        string OState;
        string OZip;
        string OSpec;
        string GAttributes;
        string splitstring;
        int i = 0;
        string GStreet;
        string GObject;
        string GCity;
        string GState;
        string GZip;
        string GComment;
        string GSpec;
        Dictionary<string, string> Information = new Dictionary<string, string>();
        Locator locatorTask = new Locator("http://tasks.arcgisonline.com/ArcGIS/rest/services/Locators/TA_Streets_US/GeocodeServer");
        Locator AddlocatorTask = new Locator("http://tasks.arcgisonline.com/ArcGIS/rest/services/Locators/TA_Streets_US_10/GeocodeServer");

        class arcObject
        {
            public int ID { get; set; }
            public string Object_Num { get; set; }
            public string Comments { get; set; }
            public string Street { get; set; }
            public string City { get; set; }
            public string State { get; set; }
            public string Zip { get; set; }
            public string Spec { get; set; }
            public override string ToString()
            {
                return string.Format("Object Number: {0}, Comments: {1}, Street: {2}, City: {3}, State: {4}, Zip: {5}, Spec: {6}", Object_Num, Comments, Street, City, State, Zip, Spec);
            }
        }

        System.Data.SqlClient.SqlConnection con;

        List<arcObject> arcObjects = new List<arcObject>();

        public EsriMapView()
        {
            InitializeComponent();  

         AddressGrid.Visibility = Visibility.Collapsed;
            MeterLotGrid.Visibility = Visibility.Collapsed;
            InformationGrid.Visibility = Visibility.Collapsed;
            FindPortalGrid.Visibility = Visibility.Collapsed;
            InstructionGrid.Visibility = Visibility.Collapsed;
            AddPortalGrid.Visibility = Visibility.Collapsed;
            UpdateObjectGrid.Visibility = Visibility.Collapsed;
            UpdateInformationGrid.Visibility = Visibility.Collapsed;
            ViewInfoGrid.Visibility = Visibility.Collapsed;

            ESRI.ArcGIS.Client.Geometry.Envelope initialExtent =
                                     new ESRI.ArcGIS.Client.Geometry.Envelope(
                             _mercator.FromGeographic(
                                     new ESRI.ArcGIS.Client.Geometry.MapPoint(-88.320026, 36.607915)) as MapPoint,
                             _mercator.FromGeographic(
                                     new ESRI.ArcGIS.Client.Geometry.MapPoint(-88.320026, 36.607915)) as MapPoint);

            initialExtent.SpatialReference = new SpatialReference(102100);

            _candidateGraphicsLayer = MyMap.Layers["CandidateGraphicsLayer"] as GraphicsLayer;
        }

        private void FindAddressButton_Click(object sender, RoutedEventArgs e)
        {
            bool NoNulls;

            if ((Address.Text == "") | (City.Text == "") | (State.Text == "") | (Zip.Text == ""))
            {
                NoNulls = false;
                MessageBox.Show("All Fields Must Be Completed!");
            }
            else
            {
                NoNulls = true;
            }

            if (NoNulls)
            {
                Locator FindlocatorTask = new Locator("http://tasks.arcgisonline.com/ArcGIS/rest/services/Locators/TA_Streets_US_10/GeocodeServer");
                FindlocatorTask.AddressToLocationsCompleted += FindLocatorTask_AddressToLocationsCompleted;
                FindlocatorTask.Failed += FindLocatorTask_Failed;
                AddressToLocationsParameters addressParams = new AddressToLocationsParameters();
                Dictionary<string, string> address = addressParams.Address;

                if (!string.IsNullOrEmpty(Address.Text))
                    address.Add("Street", Address.Text);
                if (!string.IsNullOrEmpty(City.Text))
                    address.Add("City", City.Text);
                if (!string.IsNullOrEmpty(State.Text))
                    address.Add("State", State.Text);
                if (!string.IsNullOrEmpty(Zip.Text))
                    address.Add("ZIP", Zip.Text);

                FindlocatorTask.AddressToLocationsAsync(addressParams);
                PortalGrid.Visibility = Visibility.Visible;
                AddressGrid.Visibility = Visibility.Collapsed;
                InstructionGrid.Visibility = Visibility.Collapsed;
            }

        }

        private void AddMarkerButton_Click(object sender, RoutedEventArgs e)
        {
            InformationGrid.Visibility = Visibility.Visible;

        }

        private void FindLocatorTask_AddressToLocationsCompleted(object sender, ESRI.ArcGIS.Client.Tasks.AddressToLocationsEventArgs args)
        {
            _candidateGraphicsLayer.ClearGraphics();
            CandidateListBox.Items.Clear();

            List<AddressCandidate> returnedCandidates = args.Results;

            foreach (AddressCandidate candidate in returnedCandidates)
            {
                if (candidate.Score >= 80)
                {
                    CandidateListBox.Items.Add(candidate.Address);

                    Graphic graphic = new Graphic()
                    {
                        Symbol = AddressLayout.Resources["DefaultMarkerSymbol"] as ESRI.ArcGIS.Client.Symbols.Symbol,
                        Geometry = candidate.Location
                    };

                    graphic.Attributes.Add("Address", candidate.Address);

                    string latlon = String.Format("{0}, {1}", candidate.Location.X, candidate.Location.Y);
                    graphic.Attributes.Add("LatLon", latlon);

                    if (candidate.Location.SpatialReference == null)
                    {
                        candidate.Location.SpatialReference = new SpatialReference(4326);
                    }

                    if (!candidate.Location.SpatialReference.Equals(MyMap.SpatialReference))
                    {
                        if (MyMap.SpatialReference.Equals(new SpatialReference(102100)) && candidate.Location.SpatialReference.Equals(new SpatialReference(4326)))
                            graphic.Geometry = _mercator.FromGeographic(graphic.Geometry);
                        else if (MyMap.SpatialReference.Equals(new SpatialReference(4326)) && candidate.Location.SpatialReference.Equals(new SpatialReference(102100)))
                            graphic.Geometry = _mercator.ToGeographic(graphic.Geometry);
                        else if (MyMap.SpatialReference != new SpatialReference(4326))
                        {
                            GeometryService geometryService =
                                    new GeometryService("http://sampleserver3.arcgisonline.com/ArcGIS/rest/services/Geometry/GeometryServer");

                            geometryService.ProjectCompleted += (s, a) =>
                            {
                                graphic.Geometry = a.Results[0].Geometry;
                            };

                            geometryService.Failed += (s, a) =>
                            {
                                MessageBox.Show("Projection error: " + a.Error.Message);
                            };

                            geometryService.ProjectAsync(new List<Graphic> { graphic }, MyMap.SpatialReference);
                        }
                    }

                    _candidateGraphicsLayer.Graphics.Add(graphic);
                }
            }

            if (_candidateGraphicsLayer.Graphics.Count > 0)
            {
                CandidatePanelGrid.Visibility = Visibility.Visible;
                CandidateListBox.SelectedIndex = 0;
            }
        }

        void _candidateListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            int index = (sender as ListBox).SelectedIndex;
            if (index >= 0)
            {
                MapPoint candidatePoint = _candidateGraphicsLayer.Graphics[index].Geometry as MapPoint;
                double displaySize = MyMap.MinimumResolution * 30;

                ESRI.ArcGIS.Client.Geometry.Envelope displayExtent = new ESRI.ArcGIS.Client.Geometry.Envelope(
                        candidatePoint.X - (displaySize / 2),
                        candidatePoint.Y - (displaySize / 2),
                        candidatePoint.X + (displaySize / 2),
                        candidatePoint.Y + (displaySize / 2));

                MyMap.ZoomTo(displayExtent);
            }
        }

        private void FindLocatorTask_Failed(object sender, TaskFailedEventArgs e)
        {
            MessageBox.Show("Locator service failed: " + e.Error);
        } 
```

现在我将上面的代码和接收到的信息传递到以下代码（映射服务）中：

```
[Description("ESRI Mapping Service")]
    [Export(typeof(IMappingService))]
    [PartCreationPolicy(CreationPolicy.Shared)]
    public class EsriMappingService : IMappingService
    {
        #region Private Fields
        private readonly IUserInteractionService uis = AllianceApp.Container.GetExportedValue<IUserInteractionService>();
        #endregion

        #region IMapping Service Inteface

        void IMappingService.GetLatLong()
        {
            //TODO should look at reusing the implementation from the bing mapping service for getting current LatLong and should look at moving that out
            throw new NotImplementedException();
        }

        void IMappingService.ShowBlankMap(int? initialZoom, double? latitude, double? longitude)
        {
            throw new NotImplementedException();
        }

        void IMappingService.ShowPoints(string point, string pointTitle, string pointDetails, string pointLinkID, bool? zoomToBounds, bool? showLocation)
        {
            throw new NotImplementedException();
        }

        void IMappingService.ShowPoints(string point, string pointTitle, string pointDetails, string pointLinkID, bool? zoomToBounds)
        {
            throw new NotImplementedException();
        }

        void IMappingService.ShowPoints(bool? zoomToBounds)
        {
            this.ShowMap();
        }

        void IMappingService.ShowRoute(string start, string end, bool? showpoints, bool? showLocation)
        {
            throw new NotImplementedException();
        }

        void IMappingService.ShowRoute(string start, string end, bool? showpoints)
        {
            throw new NotImplementedException();
        }

        double? IMappingService.gpsLat
        {
            get
            {
                throw new NotImplementedException();
            }
            set
            {
                throw new NotImplementedException();
            }
        }

        double? IMappingService.gpsLong
        {
            get
            {
                throw new NotImplementedException();
            }
            set
            {
                throw new NotImplementedException();
            }
        }

        #endregion

        private void ShowMap()
        {
            EsriMapView mv = new EsriMapView();
            uis.ShowDialog(mv);
        }
    }
} 
```

代码是为我设置的，这让我陷入了循环。我只需要能够使用下面的代码行在地图上硬编码一个点，但它可能需要不同的参数：

```
mapService.ShowPoints("1409 Fleetwood Dr, Murray, KY", "test Location", "Details", "foo", true); 
```

我只需要知道是否需要向 EsriMapView（第一段代码）添加任何内容。我还为我设置了一个 ViewModel，但我也不知道它会如何发挥作用。这是 ViewModel 目前的样子：

```
[Export]
    [PartCreationPolicy(CreationPolicy.NonShared)]
    public class EsriMapViewModel : ViewModelBase
    {

    } 
```

在我看来有很多代码，所以如果您需要查看代码的其他部分，请告诉我。任何帮助将不胜感激。就像我说的，我以前从未真正做过这样的事情。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:50:33.103

如果您需要在服务中使用 EsriMapView 对象，则需要通过 MEF 导入它。您可以创建导入构造函数或创建所需类型的公共属性，并使用 Import 特性对其进行标记。

例如

```
 [Import]
    public EsriMapView MapView { get; set; } 
```

或者，如果您需要 EsriMapView 类中的服务，那么您将在该类中创建一个属性，导入该服务。

例如

```
[Import]
        public IMappingService MapViewService { get; set; } 
```

对于导入构造函数，您将执行以下操作

```
[ImportingConstructor]
    public EsriMapView([Import] IMappingService mappingService)
    {
    } 
```

理想情况下，您通常会在为导入和导出标记项目时使用接口。允许您换出不同的实现以进行测试等。

阅读 MEF 文档以获取有关此的更多信息。

[MEF](http://mef.codeplex.com/)

# neo4j - Neo4j REST 编码

> ID：11454352
> 
> 赞同：2
> 
> 时间：2012-07-12T14:42:51.827
> 
> 标签：neo4j, neo4jclient

我正在使用neo4jclient。当我尝试创建/更新节点时，像äöü 这样的特殊字符被替换为�。我是否必须设置特定的 http 标头，例如内容类型、内容编码？如果是，什么样的标头以及该标头的值是什么？

谢谢。

编辑：这是请求的样子：

```
POST http://...........:7474/db/data/batch HTTP/1.1

Accept: application/json;stream=true

User-Agent: RestSharp 103.1.0.0

Content-Type: application/json

Host: ............:7474

Content-Length: 267

Accept-Encoding: gzip, deflate

[

  {

"method": "POST",
"to": "/node",
"body": {
  "Name": "äöü",
  "State": "Active",
  "Id": 0,
  "CreateDate": "2012-07-12T18:48:45.3343526+02:00",
  "ChangeDate": "0001-01-01T00:00:00+00:00"
},
    "id": 0
  }
] 
```

还是批处理执行中的错误？如果是的话，我需要很快修复:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:15:27.667

**现在它可以工作了**

在分析完messages.log 后，我们发现file.encoding 不是utf-8。

--> 调试 [neo4j.diagnostics]: file.encoding = **Cp1252**

所以我们在 neo4j-wrapper.conf 文件中设置了这个属性：

wrapper.java.additional.3= **-Dfile.encoding=UTF-8**

现在可以了！！！:)

感谢我的兄弟！认识 Java 开发人员总是很高兴。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:49:43.720

代码库中对此进行了测试，因此应正确处理，请参阅[https://github.com/neo4j/community/blob/master/server/src/functionaltest/java/org/neo4j/server/rest/BatchOperationFunctionalTest .java#L322](https://github.com/neo4j/community/blob/master/server/src/functionaltest/java/org/neo4j/server/rest/BatchOperationFunctionalTest.java#L322)。但是，客户端中可能存在编码问题？

# java - 在java中解析带有“未封闭标签”的html

> ID：11454355
> 
> 赞同：3
> 
> 时间：2012-07-12T14:43:06.423
> 
> 标签：java, html, parsing

我的问题很简单：如果 htmlcontent 中有类似 img-tag 的标签，有没有办法将 java 中的 html 解析为 DOM-Document？

```
<p><img src="..."></p> 
```

这是解析这些元素时给我一个 SAXException 的 Codesnippet：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();

InputStream is = new ByteArrayInputStream( htmlcontent.getBytes());
Document dom = db.parse(is);
is.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:47:10.603

我不这么认为，但[jsoup](http://jsoup.org/)可以做到这一点。它不是 DOM API，但非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:46:53.933

您不能使用，`DocumentBuilder`因为它是一个 XML 解析器。

但是您需要一个 HTML 解析器，例如：

*   [Jericho HTML 解析器](http://jericho.htmlparser.net/docs/index.html)
*   [Neko HTML 解析器](http://nekohtml.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:06:21.793

其中之一可能会有所帮助：

*   [http://htmlparser.sourceforge.net/](http://htmlparser.sourceforge.net/)
*   [http://home.ccil.org/~cowan/XML/tagsoup/](http://home.ccil.org/~cowan/XML/tagsoup/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:47:12.437

HTML 不是 XML。

除非您使用 XHTML。

因此，XML 解析器没有理由解析您的 HTML。

使用像[HtmlCleaner](http://htmlcleaner.sourceforge.net/)这样的 HTML 解析器。

# python - 如何生成从另一个列表命名的空数组

> ID：11454356
> 
> 赞同：0
> 
> 时间：2012-07-12T14:43:11.527
> 
> 标签：python, arrays

我想要做的是获取一个列表并生成一个数组，其中包含另一个数组中的项目。这是我尝试过的：

```
def GenerateArray(pers):
    for item in pers:
        (newtest30 + str(item)) = []
        (newtest60 + str(item)) = []
        (newtest120 + str(item)) = []
        (newtest5min + str(item)) = []
        (newtest10min + str(item)) = []
        (newtest15min + str(item)) = []
        (newtest20min + str(item)) = []
        (newtest25min + str(item)) = []
        (newtest30min + str(item)) = []
        (newtest35min + str(item)) = []
        (newtest40min + str(item)) = []
        (newtest45min + str(item)) = []
        (newtest50min + str(item)) = []
        (newtest55min + str(item)) = []
        (newtest60min + str(item)) = [] 
```

例如对于这样的列表，`list = [1,2,3,4,5,6,7]`我希望生成名为的数组

```
newtest301
newtest302
newtest303
etc 
```

由于上面的代码不起作用，我该怎么做谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:49:51.630

动态创建变量名真的很难维护。（目前）在 Cpython 中是可能的（尽管其他实现可能会有所不同），并且不能保证总是在 Cpython 中工作。换句话说……这样做是个**坏主意**。但是，如果您必须：

```
globals()['a']='foo'
print(a)   #prints foo 
```

**一个更好的方法是只使用字典。**

```
def GenerateArray(pers):
    d={}
    for item in pers:
        d['newtest30' + str(item)] = []

    return d 
```

然后您可以通过以下方式获取您的列表：

```
d=GenerateArray([1,2,3])
test301=d['newtest301'] 
```

这样做的好处是，与动态命名它们相比，它允许您更轻松地迭代您的测试。（例如，你怎么知道你创建了多少新测试？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:54:36.260

您当然不想要动态命名的变量：这绝对是个**坏主意（tm）**

你可以做的是使用类似的`dict`东西：

```
from itertools import product

def generate_arrays(pers):
    blah = [
        'newtest30',
        'newtest60'
        # etc...
    ]
    my_dict = dict( ('{}{}'.format(a, b), list()) for a, b in product(blah, pers) )
    return my_dict 
```

但是，如果您发现自己这样做，那可能是设计缺陷。

# asp.net - Castle Active Record 会话范围与事务范围和连接管理

> ID：11454358
> 
> 赞同：3
> 
> 时间：2012-07-12T14:43:13.170
> 
> 标签：asp.net, nhibernate, database-connection, castle-activerecord

全部，

在 Nhibernate 中，我看到很多代码写成：

```
using(ISession sess = factory.OpenSession()) {
 using(ITransaction trans = sess.BeginTransaction()) {
    // query, or save
    trans.Commit(); 
```

}}

开始查询事务甚至单个实体更新总是让我感到困惑，为什么？然后在阅读后我了解到，如果您遵循此模式，您将获得 2 个好处：

1.  自动连接释放
2.  自动冲洗

很公平。我的问题是关于 Castle ActiveRecord 和连接池。

我在 ASP.NET 应用程序中使用 Active Record，常见的模式是为整个请求创建一个会话。

我的问题是：

1.我应该使用 SessionScope 还是 TransactionScope （并使用开始/结束事务来获取/释放我的连接），以便实现有效的连接池，即。我只想在我的持久性逻辑期间保持数据库连接（ADO.net 连接对象），而不是在请求的整个生命周期（使用上面提到的 nhibernate 事务实现的连接语义）？

2\. SessionScope 超出范围时是否会刷新（即在其 Dispose 方法中）？

LK（已回答）：是的，除非范围是只读的。

3\. TransactionScope 在超出范围时（即在其 Dispose 方法中）是否回滚？

LK（已回答）：取决于 onDispose 操作，但默认情况下它会提交。

4\. Castle Active Record 的官方文档在哪里？ - 我在各个站点和各个站点的链接断开的站点上看到了零碎的信息。是否有像 nhibernate 甚至一本书这样的官方 PDF 文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:36:41.350

您可以使用 SessionScope。它将为您处理常见的事务语义。当您需要对事务进行更细粒度的控制时，可以使用 TransactionScope。您甚至可以在 SessionScope 中打开 TransactionScope 来处理单个会话中的多个事务。

官方文档在这里：
[http ://docs.castleproject.org/Active%20Record.MainPage.ashx](http://docs.castleproject.org/Active%20Record.MainPage.ashx)

这不是很好。
旧文档在这里： http:
[//old.castleproject.org/activerecord/documentation/trunk/index.html](http://old.castleproject.org/activerecord/documentation/trunk/index.html)

对于某些主题，旧的东西更好。

# vba - 将 dotm 保存到docm - 在docm 中嵌入宏

> ID：11454362
> 
> 赞同：2
> 
> 时间：2012-07-12T14:43:22.920
> 
> 标签：vba, ms-word, word-2010

当我将`.dotm`带有宏的文件保存到`.docm`文件中时，宏不会嵌入到`.dotm`文件中。

当我将文件发送给同事时，他需要`.dotm`, 以及它才能使用宏。

我希望将代码嵌入到 中`.dotm`，因此可以将其用作独立文件。

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:50:35.940

我在使用双击打开 .dotm 并且默认情况下从 .dotm 创建新文档的情况下看到了这种情况。在这种情况下，新文档链接到模板中的宏，但不会将它们复制到文档中。当您将 .dotm 保存为 .docm 时，您打开的是原始模板而不是使用新文档，对吗？

# html - 谷歌在搜索结果中显示我的网站错误

> ID：11454364
> 
> 赞同：0
> 
> 时间：2012-07-12T14:43:32.170
> 
> 标签：html, search

我才意识到这一点。我在谷歌搜索我的网站，在搜索结果中，谷歌显示我的网站，**但奇怪的字符必须是重音词** 所以，我在索引的标签中添加了一个新的标签元，如下所示：

```
<meta charset="iso-8859-1" /> 
```

你怎么看？这个元能解决我的问题吗？问候，丹尼尔

编辑：我的索引中有：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->language; ?>" lang="<?php echo $this->language; ?>" dir="<?php echo $this->direction; ?>" > 
```

是一个用Joomla 制作的网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:06:43.133

该页面使用 HTTP 标头发送，这些标头指示内容为 UTF-8 编码。根据 HTML 规范，没有任何`meta`标签可以覆盖这一点，但 Google 可能会感到困惑，特别是因为该页面已经有一个`meta`指定 UTF-8 的标签。所以删除`<meta charset="iso-8859-1" />`.

实际内容似乎大部分是 UTF-8 编码的，但 JavaScript 代码中的一些注释以及一些 HTML 注释是 ISO-8859-1 编码的。原因可能是它们是从该编码的某个地方复制而来的。修复此问题，或（至少用于测试）删除评论。尽管搜索机器人在功能上会忽略评论，但它们可能会感到困惑。

（他们必须读取所有字符，并且由于 ISO-8859-1 编码的字符数据在 UTF-8 数据中通常根本无效，因此 Google 可能会在某些情况下“猜测”编码。）

# entity-framework - 我可以在不定义新实体的情况下使用 EF 从另一个表中提取值吗？

> ID：11454366
> 
> 赞同：1
> 
> 时间：2012-07-12T14:43:34.543
> 
> 标签：entity-framework

我有两张表 Jobs 和 JobGroups。乔布斯看起来像这样：

```
int Id  (PK)
varchar(30) Description
int GroupId  (FK) 
```

JobGroups 看起来像这样

```
int Id  (PK)
varchar(30) GroupName 
```

我知道使用 EF 和 fluent api 进行映射的唯一方法是定义以下类：

```
public class Job
{
   public int Id {get; set;}
   public string Description {get; set;}
   public int GroupId {get; set;}
   public JobGroup Group {get; set;}

   //what I would rather see is this
   public string GroupName {get; set;}
}

public class JobGroup
{
   public int Id {get; set;}
   public string Name {get; set;}
}

modelBuilder.Entity<Job>().HasKey(j => j.Id).HasRequired(j => j.JobGroup).WithMany(); 
```

但是，我想要的只是 JobGroup 名称。有什么方法可以简单地从 JobGroups 表中提取名称而不必拥有 JobGroup 类？几乎类似于实体拆分，只是 JobGroups 表中不存在 Job Id。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:55:55.177

否 - 实体框架与实体一起使用，并且必须映射实体 - 映射告诉 EF 如何生成 SQL 来查询数据库。如果要从未映射的表中获取某些列，则必须编写自己的 SQL。

如果您想`Job`直接映射`JobGroup.Name`而不是`JobGroupId`必须创建一个数据库视图，因为这种映射的结果不是实体 - 它是一个投影，EF 代码中唯一可用的映射投影首先是数据库视图。这种投影也是只读的，因为 EF 不知道如何让`Id`背面`JobGroup`正确持久化 a `Job`（它不知道视图是如何创建它的）。

# asp.net-mvc - 使用 Ajax.BeginForm 时设置 Content-Type

> ID：11454368
> 
> 赞同：1
> 
> 时间：2012-07-12T14:43:48.520
> 
> 标签：asp.net-mvc, asp.net-ajax

我有一个简单的 ViewModel：

```
public class CategoryViewModel
{
    [Display(Name = "Category ID")]
    [Editable(false)]
    public int CategoryId { get; set; }

    [Required(ErrorMessage = "Name is required")]
    [StringLength(100, MinimumLength = 2, ErrorMessage = "You must enter a category name of at least 2 and maximum 100 characters")]
    [Display(Name = "Name")]
    public string Name { get; set; }

    [HiddenInput(DisplayValue = false)]
    public int? ParentId { get; set; }
} 
```

我有一个控制器，它发送到视图和新的、未填充的视图模型，其中 CategoryId 和 ParentId 设置为 0。我的视图使用 @Html.EditorFor 使用 viewmodel（自定义 object.cshtml 编辑器模板），但为了让事情变得简单，我将其更改为以下简单内容：

```
var options = new AjaxOptions()
{
    Url = "/Api/Category/Post/"
    OnComplete = "onCategorySaveComplete(xhr, status)",
    OnBegin = "onCategorySaveBegin",
    OnFailure = "onCategorySaveFailure(xhr, status)",
};  
@using (Ajax.BeginForm(options))
{
    <div class="inputForm">
        <div class="header">@(Model.CategoryId == 0 ? "New Category" : "Edit "+Model.Name+" ("+Model.CategoryId+"/"+Model.ParentId+")")</div>
                <div class="section">
                    <input type="hidden" name="CategoryId" value="" data-bind="value: CategoryId" />
                    <input type="hidden" name="ParentId" value="" data-bind="value: ParentId" />
                    <div class="line">
                        <div class="label">
                            @Html.LabelFor(m => m.Name) *
                        </div>
                        <div class="input">
                            @Html.TextBoxFor(m => m.Name,null,new {@data_bind = "value: Name"})
                            @Html.ValidationMessageFor(m => m.Name)
                        </div>
                    </div>
                </div>
        @Html.ValidationSummary("Some data is not correct:")
        <div class="footer"> <input type="submit" id="btnSave" value="Save" /></div>
    </div>
} 
```

在我的 API 控制器中，我有：

```
public CategoryViewModel Post(CategoryViewModel value)
{
    value = CategoryService.AddOrUpdate(value);
    return value;
} 
```

我还有其他客户端函数，它们允许用户从 KendoUI 树视图中选择一个类别，它通过 API 调用加载 ViewModel，并使用 KnockOut 进行绑定，但这一切都很好，所以让我暂时跳过它。

现在，当我提交表单并查看发送到服务器的内容时​​，我看到以下内容：

```
Key Value
Request POST /Api/Category/Post/ HTTP/1.1
Accept  */*
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
X-Requested-With    XMLHttpRequest
Referer http://localhost:3709/Category/
Accept-Language en-GB,nl-BE;q=0.5
Accept-Encoding gzip, deflate
User-Agent  Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host    localhost:3709
Content-Length  71
Connection  Keep-Alive
Cache-Control   no-cache
Cookie  GUEST_LANGUAGE_ID=en_US; COOKIE_SUPPORT=true 
```

和请求正文：

```
CategoryId=1130&ParentId=4&Name=Sensors&X-Requested-With=XMLHttpRequest 
```

到目前为止，我猜一切正常。但是我在我的 API 控制器中添加了一个断点，在这里我看到我的 CategoryViewModel 值实际上只包含“Name”和“ParentId”，并且“CategoryId”为 0 我的服务然后认为它需要创建一个新的 Category ，返回一个新的 CategoryViewModel，然后返回给客户端的是 JSON 字符串。

我不明白为什么我的 CategoryId 没有读入我的 ViewModel。另外，我对尝试通过 JSON 字符串而不是 URLEcoded 方式提交数据感到头疼。我应该简单地远离助手并直接使用 jquery 吗？

非常感谢您的帮助

编辑夜间睡眠后：

我的 CategoryId 没有被读入我的 ViewModel 的原因很简单： CategoryId 有一个注释 [Editable(false)] 如果我删除它，就可以了。实际上，我仅将这些注释用于 EditorFor 和验证消息，而没有意识到它会阻止对该字段的实际写入。

所以我需要另一种方法来告诉 Edi​​torFor 将某些字段呈现为隐藏的 html 字段。有任何想法吗？以及为什么使用 @Ajax.BeginForm 不能配置为向服务器发送 JSON 字符串而不是 url 编码，这仍然存在。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:06:10.180

> 所以我需要另一种方法来告诉 Edi​​torFor 将某些字段呈现为隐藏的 html 字段。有任何想法吗？

您可以使用[`HiddenInput`](http://msdn.microsoft.com/en-us/library/system.web.mvc.hiddeninputattribute.aspx)将指示编辑器模板将其呈现为隐藏字段的属性：

```
[HiddenInput(DisplayValue = false)]
public int CategoryId { get; set; } 
```

# python - 如何安装 bzr 插件？

> ID：11454372
> 
> 赞同：1
> 
> 时间：2012-07-12T14:43:55.433
> 
> 标签：python, bazaar, bazaar-plugins

对于新手来说，安装 bzr 插件 push-and-update 所需的步骤并不清楚。

该插件[在 bzr 文档中进行了](http://doc.bazaar.canonical.com/plugins/en/push-and-update-plugin.html)描述，还有另一个[文档页面解释了如何安装插件](http://doc.bazaar.canonical.com/plugins/en/plugin-installation.html)

但是没有明确的安装指南。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:45:04.717

*   找到插件目录

    ```
    python
    >>> from bzrlib import plugin
    >>> list_of_bzr_plugin_paths = [os.path.abspath(p)
    ... for p in plugin.get_standard_plugins_path()] 
    ```

    库（在 ubuntu 上）是：

    *   `$HOME/.bazaar/plugins'`
    *   `/usr/lib/python2.7/dist-packages/bzrlib/plugins'`

~~* 从启动板安装~~

 ~~```
 bzr branch lp:bzr-push-and-update 
```~~  ~~*   从启动板安装，重命名目录以避免错误。

    ```
    bzr branch lp:bzr-push-and-update ~/.bazaar/plugins/push_and_update 
    ```~~

# python - wxPython 并在菜单栏中选择时添加选项菜单

> ID：11454374
> 
> 赞同：0
> 
> 时间：2012-07-12T14:43:58.323
> 
> 标签：python, dialog, wxpython, menubar

我已经设置了一个 wxpython GUI，它有一个菜单栏和菜单栏中的一些项目。我想做的是在我的菜单栏中选择一个项目（例如文件 - 选项），当我选择“选项”时，会弹出一个对话框，我可以在其中设置不同的代码参数。类似的行为是 wx.FontDialog 和 wx.FileDialog——但是，我希望我的行为是自定义的，因为我可以将单选按钮和复选框作为可选选项。我该怎么做呢？

我的代码片段是：

这是我设置部分主应用程序和 GUI 的地方（我在另一部分设置了布局和框尺寸器）：

```
class TMainForm(wx.Frame):

    def __init__(self, *args, **kwds):

            kwds["style"] = wx.DEFAULT_FRAME_STYLE
            wx.Frame.__init__(self, *args, **kwds)
            self.Splitter = wx.SplitterWindow(self, -1, style=wx.SP_3D|wx.SP_BORDER)
            self.PlotPanel = wx.Panel(self.Splitter, -1)
            self.FilePanel = wx.Panel(self.Splitter, -1)
            #self.SelectionPanel = wx.Panel(self.Splitter,-1)
            self.Notebook = wx.Notebook(self.FilePanel, -1)#, style=0)
            self.ReportPage = wx.Panel(self.Notebook, -1)
            self.FilePage = wx.Panel(self.Notebook, -1) 
```

这是我设置部分菜单栏的地方：

```
 self.MainMenu = wx.MenuBar()
            self.FileMenu = wx.Menu()
            self.OptimizeMenu = wx.Menu()
            self.HelpMenu = wx.Menu()
            self.OptimizeOptions= wx.MenuItem(self.OptimizeMenu, 302, "&Select Parameters","Select Parameters for Optimization",wx.ITEM_NORMAL)
            self.OptimizeMenu.AppendItem(self.OptimizeOptions)

            self.MainMenu.Append(self.OptimizeMenu, "&Optimization") 
```

这是我将事件绑定到菜单栏的“选项”部分的地方。当我单击它时，我希望显示一个弹出菜单对话框

```
self.Bind(wx.EVT_MENU, self.OnOptimizeOptions, self.OptimizeOptions) 
```

这是我希望定义弹出菜单的功能。如果可能的话，我想以这种格式来做（而不是做单独的课程）。

```
def OnOptimizeOptions(self,event):
        give me a dialog box (radio buttons, check boxes, etc) 
```

我只展示了片段，但我所有的代码都可以工作。我的 GUI 和菜单栏设置正确 - 我只是不知道如何获得像 wx.FileDialog 和 wx.FontDialog 菜单这样的弹出菜单。任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:11:16.103

您可能希望在处理程序 (OnOptimizeOptions) 中实例化一个对话框。基本上你会继承 wx.Dialog 并放入你想要的任何小部件。然后你会在你的处理程序中实例化它并调用 ShowModal。像这样的伪代码：

```
myDlg = MyDialog(*args)
myDlg.ShowModal() 
```

有关示例，请参见 zetcodes 站点上的自定义对话框部分：http://zetcode.com/wxpython/dialogs/ [（](http://zetcode.com/wxpython/dialogs/)靠近底部）。

**编辑**- 这是一个例子：

```
import wx

########################################################################
class MyDialog(wx.Dialog):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Dialog.__init__(self, None, title="Options")

        radio1 = wx.RadioButton( self, -1, " Radio1 ", style = wx.RB_GROUP )
        radio2 = wx.RadioButton( self, -1, " Radio2 " )
        radio3 = wx.RadioButton( self, -1, " Radio3 " )

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(radio1, 0, wx.ALL, 5)
        sizer.Add(radio2, 0, wx.ALL, 5)
        sizer.Add(radio3, 0, wx.ALL, 5)

        for i in range(3):
            chk = wx.CheckBox(self, label="Checkbox #%s" % (i+1))
            sizer.Add(chk, 0, wx.ALL, 5)
        self.SetSizer(sizer)

########################################################################
class MyForm(wx.Frame):

    #----------------------------------------------------------------------
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "wx.Menu Tutorial")

        # Add a panel so it looks the correct on all platforms
        self.panel = wx.Panel(self, wx.ID_ANY)

        menuBar = wx.MenuBar()
        fileMenu = wx.Menu()

        optionsItem = fileMenu.Append(wx.NewId(), "Options", 
                                      "Show an Options Dialog")
        self.Bind(wx.EVT_MENU, self.onOptions, optionsItem)

        exitMenuItem = fileMenu.Append(wx.NewId(), "Exit",
                                       "Exit the application")
        self.Bind(wx.EVT_MENU, self.onExit, exitMenuItem)

        menuBar.Append(fileMenu, "&File")
        self.SetMenuBar(menuBar)

    #----------------------------------------------------------------------
    def onExit(self, event):
        """"""
        self.Close()

    #----------------------------------------------------------------------
    def onOptions(self, event):
        """"""
        dlg = MyDialog()
        dlg.ShowModal()
        dlg.Destroy()

#----------------------------------------------------------------------
# Run the program
if __name__ == "__main__":
    app = wx.PySimpleApp()
    frame = MyForm().Show()
    app.MainLoop() 
```

# c - 将 void 指针转换为整数数组

> ID：11454376
> 
> 赞同：23
> 
> 时间：2012-07-12T14:44:02.117
> 
> 标签：c, memory, casting

我有一个问题，我有一个指向内存区域的指针。我想用这个指针来创建一个整数数组。

本质上这就是我所拥有的，指向大小为 100*300*2 = 60000 字节的内存地址的指针

```
unsigned char *ptr = 0x00000000; // fictional point in memory goes up to 0x0000EA60 
```

我想要实现的是将此内存检查为大小为 100*150 = 15000 ints = 60000 字节的整数数组，如下所示：

```
unsigned int array[ 100 ][ 150 ]; 
```

我假设它涉及一些铸造，但我不确定如何制定它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-12T14:45:25.153

您可以将指针转换为`unsigned int (*)[150]`. 然后可以将其用作2D 数组（“**好像**”，因为 的行为`sizeof`不同）。

```
unsigned int (*array)[150] = (unsigned int (*)[150]) ptr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-02T19:09:26.530

从您的 ptr 声明开始

```
unsigned char *ptr = 0x00000000; // fictional point in memory goes up to 0x0000EA60 
```

您可以将 ptr 转换为指向您将块视为的任何类型的指针，在本例中为 unsigned int 数组的数组。我们将声明一个新指针：

```
unsigned int (*array_2d)[100][150] = (unsigned int (*)[100][150])ptr; 
```

然后，通过取消引用然后索引来访问元素，就像普通的二维数组一样。

```
(*array_2d)[50][73] = 27; 
```

有些`typedef`s 也会帮助清理东西。

```
typedef unsigned int my_2d_array_t[100][150];
typedef my_2d_array_t *my_2d_array_ptr_t;
my_2d_array_ptr_t array_2d = (my_2d_array_ptr_t)ptr;
(*array_2d)[26][3] = 357;
... 
```

并且`sizeof`应该可以正常工作。

```
sizeof(array_2d); //4, given 32-bit pointer
sizeof(*array_2d); //60000, given 32-bit ints
sizeof((*array_2d)[0]); //600, size of array of 150 ints
sizeof((*array_2d)[0][1]); //4, size of 1 int 
```

# javascript - jQuery 可扩展菜单

> ID：11454382
> 
> 赞同：2
> 
> 时间：2012-07-12T14:44:35.177
> 
> 标签：javascript, jquery

```
<div id="firstDiv">
    <div id="secondDiv">
        <ul id="accordionMenu">
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a>
                <ul>
                    <li><a href="#">suboption 1</a></li>
                    <li><a href="#">suboption 2</a></li>
                </ul>
            </li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
        </ul>
    </div>
</div> 
```

如何使其可扩展？

我有以下 JavaScript 代码：

```
$(document).ready(function() {
    // Collapse everything but the first menu:
    $("#accordionMenu > li > a").not(":first").find("+ ul").slideUp(1);
    // Expand or collapse:
    $("#accordionMenu > li > a").click(function() {
        $(this).find("+ ul").slideToggle("fast");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:49:48.353

@Yoshi：谢谢。我将在这里添加答案，希望对其他人有所帮助

**HTML**

```
<div id="firstDiv">
    <div id="secondDiv">
        <ul id="accordionMenu">
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a>
                <ul>
                    <li><a href="#">suboption 1</a></li>
                    <li><a href="#">suboption 2</a></li>
                </ul>
            </li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
        </ul>
    </div>
</div> 
```

**jQuery** :

```
// Collapse everything but the first menu:
$("#accordionMenu > li > a").not(":first").find("+ ul").slideUp(1);

// Expand or collapse:
$("#accordionMenu > li > a").click(function() {
    $(this).find("+ ul").slideToggle("fast");
});​ 
```

不要忘记包含 jQuery 库:)

# jquery - AngularJS - 在 $(document).ready 上的 ng-repeat 循环内定位元素

> ID：11454383
> 
> 赞同：4
> 
> 时间：2012-07-12T14:44:38.130
> 
> 标签：jquery, angularjs

作为 AngularJS 的新手，我正在寻找一种方法来在被触发`ng-repeat`后在循环内定位元素。`$(document).ready`然而，他们似乎还没有准备好。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T15:25:23.523

这篇[博](http://www.aleaiactaest.ch/angular-js-and-dom-readyness-for-jquery/)文讨论了在你的控制器中监听`$viewContentLoaded`事件来调用你的函数，而不是使用`$(document).ready`：

```
function stuffController($scope) {
    $scope.$on('$viewContentLoaded', readyFunction);
} 
```

# objective-c - NSDate 日期方法返回错误的结果

> ID：11454387
> 
> 赞同：6
> 
> 时间：2012-07-12T14:44:44.580
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我知道有很多此类问题，但我没有找到适合我的案例的解决方案；我需要获取当前和正确的`NSDate`对象，而不是`NSString`！此代码返回错误的时间（+3 小时），因为我来自乌克兰。

```
NSDate *currentDate = [NSDate date]; 
```

如何从中获取当前`NSDate`对象`NSDateFormatter`？我只知道如何获取`NSString`，但我不需要它。

**编辑：**我正在使用此代码来比较 2`NSDates`使用`NSCalendar`对象，这里是代码：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSUInteger unitFlags = NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
NSDateComponents *components = [calendar components:unitFlags fromDate:nowDate toDate:endDate options:0]; 
```

并向`components.hour`我展示+3小时的差异

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T15:03:35.390

NSDates 始终以 UTC 格式存储，实际上日期本身并不了解时区或周、月、年。它们只是一个时间点。

要查看您在地球表面上的位置的正确时间，您需要使用代表您的时间模型的 NSCalendar。您可以直接使用它并弄乱您的日期，或者创建一个 NSDateFormatter 保持日期不变，但根据您的需要调整它们的外观。

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterFullStyle];
[formatter setTimeStyle:NSDateFormatterFullStyle];

NSLog(@"%@", [formatter stringFromDate: date1]); 
```

结果是

```
Thursday, July 12, 2012, 4:36:07 PM Central European Summer Time 
```

* * *

回应评论：

试试这个代码作为测试

```
NSDate *now = [NSDate date];
NSDate *startOfToday = nil;
NSDate *startOfThisWeek = nil;
NSDate *startOfThisMonth = nil;
NSDate *startOfThisYear = nil;
[[NSCalendar currentCalendar] rangeOfUnit:NSDayCalendarUnit startDate:&startOfToday interval:NULL forDate:now];
[[NSCalendar currentCalendar] rangeOfUnit:NSWeekCalendarUnit startDate:&startOfThisWeek interval:NULL forDate:now];
[[NSCalendar currentCalendar] rangeOfUnit:NSMonthCalendarUnit startDate:&startOfThisMonth interval:NULL forDate:now];
[[NSCalendar currentCalendar] rangeOfUnit:NSYearCalendarUnit startDate:&startOfThisYear interval:NULL forDate:now];

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterFullStyle];
[formatter setTimeStyle:NSDateFormatterFullStyle];

NSLog(@"%@", now);
NSLog(@"%@", [formatter stringFromDate:now]);

NSLog(@"%@", startOfToday);
NSLog(@"%@", [formatter stringFromDate:startOfToday]);

NSLog(@"%@", startOfThisWeek);
NSLog(@"%@", [formatter stringFromDate:startOfThisWeek]);

NSLog(@"%@", startOfThisMonth);
NSLog(@"%@", [formatter stringFromDate:startOfThisMonth]);

NSLog(@"%@", startOfThisYear);
NSLog(@"%@", [formatter stringFromDate:startOfThisYear]); 
```

您会意识到，日、周、月和年的开始将根据您的本地时间进行调整，因为每个 NSLog 对中的第一个将为您提供 UTC 日期和您当地时区的第二个日期。

* * *

在您发布此代码的聊天中

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init]; 
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm"]; 
[dateFormat setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]; 
NSDate *date = [dateFormat dateFromString:dateString]; 
[dateFormat release]; 
```

所以问题是，日期字符串实际上不是来自 GMT，而是 EET（东欧时间）

尝试

```
[dateFormat setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"EET"]]; 
```

但到目前为止，最优雅的解决方案是获取带有 UTC 偏移量的日期字符串，类似于`2012-07-12 12:23:00 +0300`如果有可能的话。
在这种情况下，您可以使用它来解析它
`[dateFormat setDateFormat:@"yyyy-mm-dd HH:mm:ss Z"];` 并且不需要进一步的时区处理，因为格式化程序通过`Z`-specifier 知道偏移量。
另请注意，如果您未设置任何时区，则应使用设备的当前时区。如果用户始终与日期字符串中的时间处于同一时区，这也应该有效。但是如果用户离开了那个区域，或者你想让它在世界范围内工作，你应该使用我给你的解决方案之一。使用第二个（在日期字符串中指定时区）作为首选。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:48:30.180

日期可能具有正确的值；也许您认为它不正确，因为当您记录它时它看起来是错误的？这是因为当您记录它时，它会以 UTC 显示日期。您可以[使用 NSDateFormatter](https://stackoverflow.com/questions/6229024/nsdate-format-outputting-wrong-date)获取本地时区中的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T15:14:09.953

如果第二个日期是 UTC，则答案是正确的。乌克兰目前比 UTC 时间早 3 小时，因此乌克兰的午夜 UTC 时间为 21:00。21:00 - 18:00 为 3 小时。因此，请检查您如何获得第二个日期。可能为它指定了错误的时区。

如果第一个日期真的是在乌克兰时间 18:00 通过

```
nowDate = [NSDate date]; 
```

那么第二个日期实际上是乌克兰时间 21:00，对应于 UTC 午夜。由于您声称现在是午夜，因此您必须使用 UTC 从字符串创建它 - 隐式或显式。向我们展示您是如何创建它的。

** 编辑 **

你在聊天时给我的代码是这样的：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init]; 
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm"]; 
[dateFormat setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]; 
NSDate *date = [dateFormat dateFromString:dateString]; 
[dateFormat release]; 
```

第三行将时区设置为 GMT，这在所有意图和目的上都与 UTC 相同。您的日期格式化程序可能已初始化为设备的正确区域设置，因此您可能只需忽略该行。

# c++ - 具有不同签名的功能特化

> ID：11454389
> 
> 赞同：0
> 
> 时间：2012-07-12T14:44:49.287
> 
> 标签：c++

假设我有以下类可以更改从其他接口接收到的数据。

```
template <class T>
class Updater
{
public:
    Updater():
        _db(Database<T>())
    {
    }

void append(T value)
{
    std::list<T> l = _db.get();
    l.push_back(value);
    _db.set(l);
}

void remove(T value)
{
    std::list<T> l = _db.get();
    l.remove(value);
            _db.set(l);
}

private:
    Database<T> _db;
}; 
```

所以我将它与整数和浮点数等一起使用。我得到一个链接列表并对其进行操作。

但是可以说我希望使用这个类来处理以下类型：

```
std::pair<std::string, std::shared_ptr<void>> 
```

也就是说，与名称相关联的内存块。

我可以按原样使用上面的 append 函数将更多内存附加到链表，然后再将其传递回 db。但是，如果我希望根据名称（对的字符串部分）删除一个块，我想我可以通过如下的专门化来解决这个问题：

```
template <>
void MultiValue<std::pair<std::string, std::shared_ptr<Block>>>::remove(std::string value)
{
} 
```

但它不会编译，抱怨与以前的定义不兼容。

关于我如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:52:44.067

当只在类模板上专门化一个方法时，您必须保持签名相同。

如果要更改签名，则需要专门化整个班级：

```
template<>
class Updater<std::pair<std::string, std::shared_ptr<Block>>>
{
   ...
} 
```

# iphone - CABasicAnimation CorePlot 缩放效果

> ID：11454390
> 
> 赞同：2
> 
> 时间：2012-07-12T14:44:49.957
> 
> 标签：iphone, objective-c, ios, core-animation, core-plot

我正在尝试缩放核心图散点图（如折线图），以便它可以缩放以查看。CorePlot 使用普通的 CALayer 来实现它的绘图。

我使用如下核心动画来实现这一点：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"affineTransform"];
animation.duration = 10;
animation.removedOnCompletion = YES;
animation.fillMode = kCAFillModeForwards;
CGAffineTransform start = CGAffineTransformMakeScale(1, 0.1);
CGAffineTransform end = CGAffineTransformMakeScale(1, 1);
animation.fromValue = [NSValue valueWithCGAffineTransform:start];
animation.toValue = [NSValue valueWithCGAffineTransform:end];

[plot addAnimation:animation forKey:@"animation"]; 
```

问题是这似乎不起作用。这是我第一次使用核心动画，所以我想我只是做错了什么？

**编辑** 好，所以我发现我使用了错误的密钥路径的问题。

我现在可以让它动画，但它看起来很奇怪：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform.scale.y"];
...
animation.fromValue = [NSNumber numberWithFloat:0.1];
animation.toValue = [NSNumber numberWithFloat:1]; 
```

我想做的是让动画“向上缩放”，这样它就可以伸展到位。现在它有点从中心长出来，这不是我想要的。知道如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:29:08.447

变换是相对于`anchorPoint`图层的。您可以通过将锚点设置为 (0.5, 1,0) 将锚点更改为位于底部。请注意，图层也相对于锚点进行绘制，因此当您更改它时，它可能会更改其在屏幕上的位置。要将其定位在应有的位置，您可以在更改锚点后设置框架或将位置设置为底部（它应该从哪里缩放）。

# c# - 从 CSV 文件外部创建 excel 图表

> ID：11454392
> 
> 赞同：3
> 
> 时间：2012-07-12T14:44:56.790
> 
> 标签：c#, excel, csv, graph

我有一堆数据要保存为 .csv（逗号分隔值）格式。在 excel 中，我可以通过手动选择数据并点击 Graph 轻松创建条形图。

但是，我想通过单击按钮在外部执行此操作。

理想情况下，我在 C# 中点击了一个按钮。这会调用一个生成我的 .csv 文件的方法，然后调用一个创建 excel 表的 excel 函数，并在其中创建图表。

不知道该怎么做，或者如果excel甚至支持这样的东西，更不用说来自csv文件了！

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T16:50:55.887

除了我的评论，这里是一个例子。无需使用第 3 方库。Excel 具备制作图表所需的所有功能。此外，打开 csv 不像在 Excel 中打开任何工作簿。

为了更好地理解，让我们创建一个`sample.csv`并将其放置在`C:`其中，如下所示

![在此处输入图像描述](../Images/c30e14525f61dc34024f9a0ae09de235.png)

在 C# 中创建一个新表单，放置一个按钮并设置对 Excel 对象库的引用。接下来将此代码粘贴到按钮的单击事件中

**久经考验**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel;

Namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        Public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            Microsoft.Office.Interop.Excel.Application xlexcel;
            Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;

            object misValue = System.Reflection.Missing.Value;
            xlexcel = new Excel.Application();

            var xlWorkBooks = xlexcel.Workbooks;

            xlexcel.Visible = true;

            xlWorkBooks.OpenText("C:\\Sample.csv", misValue, misValue, Excel.XlTextParsingType.xlDelimited,
                                 Excel.XlTextQualifier.xlTextQualifierNone, misValue, misValue,
                                 misValue, misValue, misValue, misValue, misValue, misValue, misValue,
                                 misValue, misValue, misValue, misValue);

            // Set Sheet 1 as the sheet you want to work with
            xlWorkSheet = (Excel.Worksheet)xlWorkBooks[1].Worksheets.get_Item(1);

            xlWorkSheet.Shapes.AddChart(misValue,misValue,misValue,misValue,misValue).Select();

            //~~> Make it a Line Chart
            xlexcel.ActiveChart.ApplyCustomType(Excel.XlChartType.xlLineMarkers);

            //~~> Set the data range
            xlexcel.ActiveChart.SetSourceData(xlWorkSheet.Range["$A$1:$B$6"]);

            //uncomment this if required
            //xlWorkBooks[1].Close(true, misValue, misValue);
            //xlexcel.Quit();

            //releaseObject(xlWorkSheet);
            //releaseObject(xlWorkBook);
            //releaseObject(xlexcel);
        }

        private void releaseObject(object obj)
        {
            try
            {
                System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
                obj = null;
            }
            catch (Exception ex)
            {
                obj = null;
                MessageBox.Show("Unable to release the Object " + ex.ToString());
            }
            finally
            {
                GC.Collect();
            }
        }
    }
} 
```

**输出**

![在此处输入图像描述](../Images/e090c710b03e50168b5775f76d137b9d.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T14:51:08.520

我会尝试使用[EPPlus 库](http://epplus.codeplex.com/)直接创建您的 excel 文件。

它支持图表，过去通常对我的项目非常有用。最简单的方法可能是在 Excel 中准备一个带有空白数据的“模板”文件（只是普通的 xlsx 文件）并插入所需的图表和任何其他必需的元素。然后，您可以在 C# 中使用该库打开模板文件，用数据填充数据表，然后将其保存为另一个带有实际数据的 xlsx 文件。

也许需要设置一些用于“重新计算”数据的标志，这在打开文件时发生。不确切知道该库，但我过去用于 xls 文件的另一个库需要它。

（我想您的应用程序中已经有数据，如果没有，请检查那些解析 CSV 的答案： [CSV parser/reader for C#?](https://stackoverflow.com/q/906841/127027) , [CSV parser/reader for C#?](https://stackoverflow.com/questions/906841/csv-parser-reader-for-c)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T15:12:39.333

如果您坚持在 Excel 中执行此操作，则需要有某种库来连接到它。您可以使用 VS Pro 中包含的 Office 工具或更好的工具，也可以使用一些开源库，如[NetOffice](http://netoffice.codeplex.com/)。然后你可以写这样的代码：

```
Excel.Application app = new Excel.Application();
Excel.Workbook wb = app.Workbooks.Open(<path to csv>);
Excel.Worksheet ws = (Excel.Worksheet)wb.Worksheets[1];
Excel.Chart chart = ((Excel.ChartObjects)ws.ChartObjects()).Add(0, 0, 100, 100).Chart; //the numbers are position and dimensions of the chart
chart.ChartWizard(); // here you have to format your chart, see link below
wb.SaveAs(<output path and format>); 
```

链接到[MSDN 文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._chart.chartwizard.aspx)。

但我认为使用像[Gnuplot](http://www.gnuplot.info/)这样的东西可能更直接。

# php - 为什么在 PHP 中调整上传图像的大小时我的图像会旋转？

> ID：11454394
> 
> 赞同：3
> 
> 时间：2012-07-12T14:45:00.930
> 
> 标签：php, file, upload, rotation

> **可能重复：**
> [当我不想要它时，上传时 php 调整图像大小会旋转图像](https://stackoverflow.com/questions/12774411/php-resizing-image-on-upload-rotates-the-image-when-i-dont-want-it-to)

我已经创建了我的第一个上传代码并正在对其进行测试，图像调整大小并上传正常。我唯一的问题是它会旋转。

这是代码：

```
$errors = array();
$message = "";

if(isset($_POST["test"])){

$name               = rand(1,999999) . $_FILES["uploadfile"]["name"];
$temp_name          = $_FILES["uploadfile"]["tmp_name"];
$size               = $_FILES["uploadfile"]["size"];
$extension          = strtolower(end(explode('.', $_FILES['uploadfile']['name'])));
$path               =   "testupload/" . $name;

$info               = getimagesize($temp_name);
$originalwidth      = $info[0];
$originalheight     = $info[1];
$mime               = $info["mime"];

$acceptedHeight     = 750;
$acceptedWidth      = 0;

$acceptedMimes = array('image/jpeg','image/png','image/gif');
$acceptedfileSize = 4102314;
$acceptedExtensions = array('jpg','jpeg','gif','png');
echo $size;
// check mimetype
if(!in_array($mime, $acceptedMimes)){$errors[] = "mime type not allowed - The file you have just uploaded was a: " . $extension . " file!";}
if(!$errors){if($size > $acceptedfileSize){$errors[] = "filesize is to big - Your file size of this file is: " . $size;}}
if(!$errors){if(!in_array($extension, $acceptedExtensions)){$errors[] = "File extension not allowed - The file you have just uploaded was a: " . $extension . " file!";}}

if(!$errors){

    // create the image from the temp file.
    if ($extension === 'png'){
        $orig = imagecreatefrompng($temp_name);
    }elseif ($extension === 'jpeg'){
        $orig = imagecreatefromjpeg($temp_name);
    }elseif ($extension === 'jpg'){
        $orig = imagecreatefromjpeg($temp_name);
    }elseif ($extension === 'gif'){
        $orig = imagecreatefromgif($temp_name);
    }

    // work out the new dimensions.
    if ($acceptedHeight === 0){
        $newWidth = $acceptedWidth;
        $newHeight = ($originalheight / $originalwidth) * $acceptedWidth;
    }else if ($acceptedWidth === 0){
        $newWidth = ($originalwidth / $originalheight) * $acceptedHeight;
        $newHeight = $acceptedHeight;
    }else{
        $newWidth = $acceptedWidth;
        $newHeight = $acceptedHeight;
    }

    $originalwidth = imagesx($orig);
    $originalheight = imagesy($orig);

    // make ssure they are valid.
    if ($newWidth  < 1){ $newWidth  = 1; }else{ $newWidth  = round($newWidth ); }
    if ($newHeight < 1){ $newHeight = 1; }else{ $newHeight = round($newHeight); }

    // don't bother copying the image if its alreay the right size.
    if ($originalwidth!== $newWidth || $originalheight !== $newHeight){

        // create a new image and copy the origional on to it at the new size.
        $new = imagecreatetruecolor($newWidth, $newHeight);
        imagecopyresampled($new, $orig, 0,0,0,0, $newWidth, $newHeight, $originalwidth, $originalheight);

    }else{

        // phps copy on write means this won't cause any harm.
        $new = $orig;
    }

    // save the image.
    if ($extension === 'jpeg' || $extension === 'jpg'){
        imagejpeg($new, $path, 100);
    }else if ($save_ext === 'gif'){
        imagegif($new, $path);
    }else{
        imagepng($new, $path, round(9 - (100 / (100 / 9))));
    }

    $message = $path; 
```

有人可以让我知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:53:56.670

检查原始图像实际上是否处于您期望的方向。我整天都在处理图像，大部分时间是 Windows 照片查看器以特定方向显示图像（读取 EXIF 中的方向变化），但如果你在 Photoshop 中打开它，情况就不同了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:45:17.353

我用两张图片测试了您的代码：一张是横向（宽度 > 高度），另一张是纵向（高度 > 宽度）。该代码有效。

问题似乎是@Tavocado 所说的：较新的相机有一个传感器，可以在拍摄照片时检测相机的方向，并将该信息存储在照片中。此外，较新的照片查看软件会从照片中读取该信息并在显示图像之前对其进行旋转。所以你总是看到正确方向的图像（天空向上，地球向下）。然而，PHP 函数（以及世界其他地方）不使用该信息并按原样显示图像。这意味着您将不得不旋转自己的肖像图像。

只需在浏览器中加载您的图像（将文件拖到地址栏上），您就会看到图像是如何真正存储在文件中的，无需任何自动旋转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T02:06:06.247

问题是图像嵌入了[EXIF](http://www.impulseadventure.com/photo/exif-orientation.html)数据，可能来自拍摄照片的设备。

使用 调查您的图像是否嵌入了旋转信息，[`exif_read_data`](http://www.php.net/manual/en/function.exif-read-data.php)然后使用[类似这样的函数](http://www.php.net/manual/en/function.exif-read-data.php#76964)自动更正旋转。

# matlab - 从 textread 更改为 textscan MATLAB

> ID：11454395
> 
> 赞同：3
> 
> 时间：2012-07-12T14:45:03.323
> 
> 标签：matlab, file-io, csv, readfile, textscan

我在将使用 textread 函数的代码更改为 textscan 时遇到问题。

data.txt 的内容：（注意：*我已将所有实际坐标更改为 dddd.mmmmmm,ddddd.mmmmmm*）

```
$GPGGA,104005.3,dddd.mmmmmm,N,ddddd.mmmmmm,W,1,05,4.4,73.4,M,48.0,M,,*7E
$GPGGA,104006.3,dddd.mmmmmm,N,ddddd.mmmmmm,W,1,05,2.1,73.5,M,48.0,M,,*7F
$GPGGA,104007.3,dddd.mmmmmm,N,ddddd.mmmmmm,W,1,05,2.1,74.0,M,48.0,M,,*70
$GPGGA,104008.3,dddd.mmmmmm,N,ddddd.mmmmmm,W,1,05,2.4,73.9,M,48.0,M,,*7C
$GPGGA,104009.3,dddd.mmmmmm,N,ddddd.mmmmmm,W,1,04,2.4,73.9,M,48.0,M,,*75 
```

代码：

```
fid = fopen('E:\data.txt','r');
Location=zeros(2,);
Block = 1;
while(~feof(fid))
   A=textscan(fid,'%*s %*s %s %*s %s %*s %*s %*s %*s %*s','delimiter',',','delimiter','\n');
   Location(:)=[%s %s]';
   x=Location(1,:);
   y=Location(2,:);
   Block = Block+1;
end
display(Location); 
```

新代码是错误的。我在这里使用了 2 个分隔符。如果它们不为空，我想从每行中取出纬度和经度值。我该如何纠正？另外，如果文本文件中有许多不同的行，我需要做什么才能仅从以 $GPGGA 开头的行中获取 Lat Long 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:47:06.770

此代码应满足您的要求并放入正确的标志（请检查）：

```
fid = fopen('data.txt','r');
A=textscan(fid,'%s %*s %f %s %f %s %*s %*s %*s %*s %*s %*s %*s %*s %*s','Delimiter',',');
fclose(fid);
Location = [A{[2, 4]}];
row_idxs = cellfun( @(s) strcmp(s, '$GPGGA'), A{1});
Location = Location(row_idxs, :);
LatSigns = -2*cellfun(@(dir) strcmp(dir, 'S'), A{3}(row_idxs))+1;
LongSigns = -2*cellfun(@(dir) strcmp(dir, 'W'), A{5}(row_idxs))+1;
Location = Location .* [LatSigns LongSigns];
display(Location); 
```

# php - 电子邮件附件中的错误，因为文件在接收方损坏

> ID：11454398
> 
> 赞同：1
> 
> 时间：2012-07-12T14:45:09.167
> 
> 标签：php

我正在尝试使用 php 发送带有附件的电子邮件。附件已发送，但附件数据在接收方已损坏。接收方适当接收文件大小，然后文件也损坏请帮助我

我的代码

```
<?php
    ini_set('memory_limit','256M');
    include "phpmailer/class.smtp.php";
    include "phpmailer/class.phpmailer.php";

    $Host = "mail.gmail.com";                       // SMTP servers
    $Username = "*******@gmail.com";    // SMTP password
    $Password = "******";                   // SMTP username

    $From = "*****@gmail.com";
    $FromName = "from";

    $str =$_SESSION['MailAll'];

$arr=explode(",",$str);

print_r ($arr);

    $Tos=$arr;  
//  $Tos=json_encode($Tos);
    $Ccs = array(
        "CC Name 1" => "cc-email-1@yahoo.com",
        "CC Name 2" => "cc-email-2@gmail.com"
    );

    $Subject ="Project Abstract";
    $Body =$_POST['mailcont'] ;;

    $mail = new PHPMailer();

    $mail->IsSMTP();                    // send via SMTP
    $mail->Host     = $Host; 
    $mail->SMTPAuth = true;             // turn on SMTP authentication
    $mail->Username = $Username;  
    $mail->Password = $Password; 

    $mail->From     = $From;
    $mail->FromName = $FromName;
    foreach($Tos as $key => $val){
        $mail->AddAddress($val , $key); 
    }

    //foreach($Ccs as $key => $val){
        //$mail->AddCC($val , $key); 
    //}

    $mail->WordWrap = 50;               // set word wrap
    $mail->Priority = 1; 
    $mail->IsHTML(true); 
/////attachment
    $str=trim($_SESSION['DOCFILE']);//eg-"Time Table Generator.docx","one_size_does_not_fir_all.pdf"

    $arr=explode(",",$str);

  for($i=0;$i<count($arr)-1;$i++){
     $mail->AddAttachment($arr[$i]);
    echo 'array size '.$arr[$i];
}

    $mail->Subject  =  $Subject;
    $mail->Body     =  $Body;

    if(!$mail->Send())
    {
        echo "Mailer Error: " . $mail->ErrorInfo;
    }
    else
    {
    //  header('location:../sendABS.php');
      echo 'Message has been sent.';
    }

?> 
```

# jquery - jQuery 推文插件 - 推文格式调整、时间戳和用户

> ID：11454400
> 
> 赞同：0
> 
> 时间：2012-07-12T14:45:12.293
> 
> 标签：jquery

我需要一些非常聪明的 jquery 技能，因为我不知道如何做到这一点。

我已经制作了这个[jsFiddle](http://jsfiddle.net/motocomdigital/L5uh4/)以寻求帮助[http://jsfiddle.net/motocomdigital/L5uh4/](http://jsfiddle.net/motocomdigital/L5uh4/)

![截屏](../Images/1839971873dc22eaf13e3af536688a9a.png)

**发生了什么...**

我在[云海中](http://tweet.seaofclouds.com/)使用这个 jquery 推文插件。

简而言之，下面是我的函数，它只显示**一条**推文。但来自一系列推特用户。我在下面的函数中添加了注释，所以你知道发生了什么......

```
$("#tweet").tweet({
    username: ["seaofclouds", "laughingsquid"],  // array of users
    count: 1,                                    // number of tweets
    loading_text: "loading tweet...",            // loading text
    template: "{avatar}{text}{time}",            // tweet format, in order it appears
    avatar_size: 32                              // avatar size

}).bind("loaded", function(){                    // stuff when loaded

    $("#tweet span.tweet_text").widowFix();

    $("#tweet span.tweet_time").prepend("tweeted by @username "); 

}); 
```

**我的问题**

如您所见，我添加了时间戳以显示在推文的末尾，使用`template: "{avatar}{text}{time}"`

但是在这个插件中没有选项`{user}`- 所以你可以看到我已经将这个文本“ *@username 推*文”添加到我的`span.tweet_time`

就是这样……*大约 13 小时前由@username 发布的推文*

我的问题是我无法让当前的推文用户名出现在“@username”出现的位置

**我的问题**

有人可以弄清楚如何从头像链接中获取当前的推文用户名，并将用户名（作为推特用户超链接）添加到下面出现@username 的位置...

```
$("#tweet span.tweet_time").prepend("tweeted by @username"); 
```

所以最终输出的代码将如下所示...

```
<a href="http://twitter.com/LaughingSquid" title="View @LaughingSquid on twitter" target="_blank">@LaughingSquid</a> 
```

请参阅下面输出的头像 html，您可以在 URL 末尾看到带有用户名的 twitter 链接。我希望有人可以使用 jquery 来提取该用户名？

```
<a class="tweet_avatar" href="http://twitter.com/LaughingSquid">
     <img src="http://a0.twimg.com/profile_images/340068086/laughing_squid_logo_normal.jpg" height="32" width="32" alt="LaughingSquid's avatar" title="LaughingSquid's avatar" border="0">
</a> 
```

提前非常感谢。这将是一个救生员。

乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:48:09.473

给你->

[工作的jsFiddle](http://jsfiddle.net/L5uh4/3/)

代码->

```
var username = $('.tweet_avatar img').attr('title');
username = username.split("'");
username = username[0];

$("#tweet span.tweet_time").prepend("tweeted by "+ username+" "); 
```

# c# - 传递与返回（网络）控件？

> ID：11454401
> 
> 赞同：0
> 
> 时间：2012-07-12T14:45:12.583
> 
> 标签：c#, asp.net, parameter-passing, return-value, web-controls

我想知道返回 webcontrol 和传递 webcontrol 之间的区别。我有一个 webcontrol，它在我的 aspx 代码中。喜欢

```
<asp:TableCell>
<telerik:RadComboBox runat="server" ID="rcbName"></telerik:RadComboBox>
</asp:TableCell> 
```

然后我想以编程方式填充组合框（不管它是什么类型的控件）。

所以我有这个返回组合框的函数：

```
private RadComboBox rcb CreateRcbSearchResults(DataSet ds)
{
    RadComboBox rcb = new RadComboBox();

    foreach (DataRow row in ds.Tables[0].Rows)
        rcb.Items.Add(new RadComboBoxItem(row["description"].ToString(), row["id"].ToString()));

    return rcb;
} 
```

然后我会设置组合框：

```
rcbName = CreateRcbSearchResults(ds); 
```

由于某种原因，这不起作用，它只会给我一个空的组合框（浏览器端），即使我在调试时看到它已被填充。

一位同事看了看，将我的函数更改为传递组合框：

```
private void CreateRcbSearchResults(RadComboBox rcb, DataSet ds)
{
    foreach (DataRow row in ds.Tables[0].Rows)
        rcb.Items.Add(new RadComboBoxItem(row["description"].ToString(), row["id"].ToString()));
} 
```

现在我这样做：

```
CreateRcbSearchResults(rcbName, ds); 
```

现在它可以工作了。我想知道这是为什么。有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:52:07.187

当组合框是页面的一部分时，在组合框上设置的属性比您设置的要多得多。您正在做的是创建一个全新的组合框实例，它没有 ID 和诸如此类的东西，然后替换由页面加载生成的实例。

您更改代码以将引用传递给页面创建的控件，然后您只需向其中添加项目。

# c# - c#.net 应用程序可以在打开文件夹时打开

> ID：11454403
> 
> 赞同：0
> 
> 时间：2012-07-12T14:45:17.297
> 
> 标签：c#, .net, passwords

我想创建 ac# 应用程序，它会在我自动打开文件夹时打开。我的 c# 应用程序打算像一个密码系统，这样文件夹中的内容只有在登录到我的应用程序后才能查看。一切准备就绪............但我很困惑如何在使用 ac# 脚本打开文件夹时直接打开我的应用程序？我现在创建了一个应用程序，它会在打开应用程序时询问用户名称和密码，现在我想通过要锁定的文件夹打开它，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:58:55.297

好的，首先，如果您希望文件夹安全，您应该对其进行加密，否则用户获得访问权限所要做的就是终止该进程。

我建议您改为创建一个加密文件。例如一个 zip 文件。然后你所要做的就是将文件与程序相关联并用密码解压它。然后当用户完成删除它并**覆盖临时文件夹**。覆盖它非常重要，否则加密是无用的。

如果您想避免与使用 zip 文件的其他程序发生冲突，您可以创建自己的文件类型，它不会以任何方式影响文件的内容。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:46:28.193

为了确保我理解......你想构建一个应用程序，当有人试图打开它时，只有在他们提供密码后才会打开。嗯……好吧。一个特定的文件夹，或任何文件夹？本地文件夹或网络共享文件夹？我最初在考虑一种文件系统观察器方法，但这仅适用于更改事件，例如复制、重命名、删除等。所以这行不通。最接近的方法是检查上次访问时间，但这是事后提醒，因此必须拒绝。我不确定你如何在 C# 中做到这一点。微软已经建立的强大安全选项有什么问题，比如全球组。这提供了灵活的访问限制。特别是在大量文件夹上。用户是否每个文件夹都有一个密码？太麻烦了。每个用户一个密码？使用 Windows 身份验证将其锁定。这个应用程序如何存储密码？

我建议在尝试重新发明轮子之前尝试利用现有技术来解决问题。你省略了这个的范围，以及你已经尝试过的内容，所以我们可能无法完全理解。

# ruby-on-rails - 模块化 Rails 3 应用程序

> ID：11454404
> 
> 赞同：1
> 
> 时间：2012-07-12T14:45:22.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, module

我想为几个应用程序构建一个控制面板（我们称之为“仪表板”）。每个应用程序都有一个仪表板将使用的 REST-API。仪表板应该为每个托管应用程序提供一个模块。

在 Rails 中，我可以使用[控制器命名空间](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)来实现这样的目标。模型和视图可以以类似的方式分离。这将导致以下目录结构：

*   控制器/app1/
*   型号/app1/
*   意见/app1/
*   控制器/app2/
*   型号/app2/
*   意见/app2/

但我不喜欢那样。我宁愿有这样的东西，让模块更好地分开：

*   模块/app1/控制器
*   模块/app1/模型
*   模块/app1/视图
*   模块/app2/控制器
*   模块/app2/模型
*   模块/app2/视图

Rails 3 可以实现这样的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:13:00.810

如果您想要这种分离，您应该研究使用[Rails 引擎](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)来组织应用程序的组件。引擎是一种主要是自包含的子应用程序。

# powershell - 不同的代码取决于计算机名称。最有效的流程？

> ID：11454411
> 
> 赞同：0
> 
> 时间：2012-07-12T14:45:33.817
> 
> 标签：powershell

我正在运行一个脚本，它将解析一个相对较大的 csv。根据它运行的机器，它会搜索不同的东西。

我对powershell相当陌生，所以我不确定最有效的方法是什么。最好将所有内容保存在一个文件中，因为我希望能够让所有机器调用相同的脚本。

我在想可能是一个 case 语句将 $env:computername 与我将运行它的机器的名称相匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:00:16.143

如果逻辑总是解析 .csv 文件并且不同的是匹配模式 ，我将使用基于[主机名的](http://technet.microsoft.com/en-us/library/bb490919.aspx)[switch 语句](http://technet.microsoft.com/en-us/library/ff730937.aspx)来设置我稍后将在脚本逻辑中使用的所有变量。如果逻辑也需要根据主机名进行更改，我将在 switch 语句中设置它们一些 [脚本块](http://technet.microsoft.com/en-us/library/hh847893.aspx)，以便稍后在脚本逻辑中调用。

例子：

```
$a = hostname
switch ($a) 
    { 
        "WS001" { $sb = {dir} ; $txt = "Computer name: " + $a  }
        "WS003" { $sb = { get-process } ; $txt = "Computer name: " + $a }

        default { $sb = $null ;  $txt = "This Computer can't run this script"}        
    }

if ($sb) { &$sb }
$txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:18:28.430

@Christian 对答案的一个小补充。

在每个主机名的脚本块的末尾，您可能需要考虑添加一个 break 语句。这样您就可以避免针对所有可能的主机测试 $a - 一旦您找到主机并执行主机特定的操作，Break 语句会将您跳出 Switch 的脚本块。

因此它可能看起来像这样：

```
$a = hostname
switch ($a) 
    { 
        "WS001" { $sb = {dir} ; $txt = "Computer name: " + $a ; break }
        "WS003" { $sb = { get-process } ; $txt = "Computer name: " + $a; break }

        default { $sb = $null ;  $txt = "This Computer can't run this script"}        
    }
... 
```

# asp.net-mvc-3 - 使用 MVC3 从 POST 请求设置请求对象属性的适当模式？

> ID：11454413
> 
> 赞同：0
> 
> 时间：2012-07-12T14:45:43.607
> 
> 标签：asp.net-mvc-3, c#-4.0, http-post

对于我的 MVC3 应用程序的传入 POST 请求，我想验证传入的请求参数。如果存在无效参数，则抛出异常。

给定以下对象：

```
public class ActionRequest
{
    public string ActionRequestPassword { get; set; }
    public bool EnableNewsfeedAppPool { get; set; }
} 
```

对于传入的发布请求，我想通过以下方式使用适当的属性初始化对象：

```
public class NewsfeedAppPoolController : Controller
{
    [ActionName("EnableAppPool"), AcceptVerbs(HttpVerbs.Post)]
    [ValidateInput(false)]
    [NoCache]
    public ActionResult EnableAppPool(FormCollection formCollection)
    {
        Models.ActionRequest actionRequest = ValidatePOSTRequest(formCollection);

        // do things with actionRequest

        return null;
    }

    private Models.ActionRequest ValidatePOSTRequest(FormCollection formCollection)
    {
        try
        {
            Type actionRequestType = typeof(Models.ActionRequest);
            System.Reflection.PropertyInfo propertyInfo = null;
            object systemActivatorObject = Activator.CreateInstance(actionRequestType);

            foreach (var key in formCollection.AllKeys)
            {

                propertyInfo = typeof(Models.ActionRequest).GetProperty(key);
                Type t = propertyInfo.PropertyType; // t will be System.String

                if (t.Name == "Int32")
                {
                    actionRequestType.GetProperty(key).SetValue(systemActivatorObject, Convert.ToInt32(formCollection[key]), null);
                }
                else
                {
                    actionRequestType.GetProperty(key).SetValue(systemActivatorObject, formCollection[key], null);
                }
            }

            return (Models.ActionRequest)systemActivatorObject;
        }
        catch (Exception ex)
        {
            throw ex;
        } 
    }
} 
```

我想知道是否可以对此进行任何改进，或者建议如何以有效的方式完成此任务。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:49:38.750

ASP.Net MVC 已经为您完成了所有这些工作。
只需`Models.ActionRequest actionRequest`为您的操作添加一个参数。

如果要添加其他验证逻辑，请使用`System.ComponentModel.DataAnnotations`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:51:44.427

只需使用默认模型绑定器，它将负责从请求参数实例化和绑定 ActionRequest：

```
public class NewsfeedAppPoolController : Controller
{
    [ActionName("EnableAppPool"), AcceptVerbs(HttpVerbs.Post)]
    [ValidateInput(false)]
    [NoCache]
    public ActionResult EnableAppPool(ActionRequest actionRequest)
    {
        // do things with actionRequest

        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:12:36.327

合适的模式是，

```
[HttpPost]
public ActionResult Save(Employee employee)
{
  if(ModelState.IsValid)
  {
     db.Save(employee);
     RedirectToAction("Index");
  }

  return View();
} 
```

笔记：

该`employee`实例由**默认模型绑定器**从请求中可用的值（表单、查询字符串、路由数据等）自动创建和填充

当**默认模型**绑定器将值绑定到模型时，它还会进行验证并将所有错误存储在`ModelState`字典中，因此通过检查`ModelState.IsValid`您可以知道验证是否成功。

要了解有关模型绑定的更多信息，请参阅[此](http://odetocode.com/blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx)。要了解有关模型验证的更多信息，请参阅[此](http://prideparrot.com/blog/archive/2012/4/model_validation_in_asp_net_mvc)。

# javascript - Highcharts 用 chart.renderer.path 画一条线

> ID：11454415
> 
> 赞同：1
> 
> 时间：2012-07-12T14:45:44.697
> 
> 标签：javascript, jquery, highcharts

我在看这个公式：

```
http://www.w3.org/TR/SVG/paths.html#PathDataMovetoCommands 
```

我是这样画的：

```
chart.renderer.path(['M', someNumber, 10, 'V', 1500, 0])
                .attr({
                    'stroke-width': 2,
                    stroke: 'red',
                    id: 'vert'
                })
                .add(); 
```

这条线被画了，但它穿过整个图表。我希望它很小。我认为要使它更小，我需要更改“10”，但无论我输入什么值（甚至是 10.000），线的长度都保持不变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T15:42:38.873

在路径属性中：

```
path(['M', someNumber, 10, 'V', 1500, 0]) 
```

'M' 表示 moveto，“someNumber”，10 是您要移动到的 x、y 坐标（这不会**绘制**只是将“笔”移动到您想要开始线条的位置）。'V' 表示画一条垂直线，1500 是停止绘制它的 y 位置。我不相信你需要 0（V 属性只需要一个参数）。

如果您希望线的长度更小，请调整 1500 参数。

# android - 如何让多个应用在 Android 中共享一个远程服务？

> ID：11454417
> 
> 赞同：2
> 
> 时间：2012-07-12T14:45:50.667
> 
> 标签：android, process, android-service

我必须为我公司的产品 API 编写一个 Android SDK，供客户的应用程序使用。SDK 将包含一个在独立进程中运行的后台服务（通过`android:process="com.my.sdk.process"`在 AndroidManifest.xml 中设置该服务）。

如果有多个应用在使用我的SDK，为了节省资源，如何保证服务进程只存在一个实例，而不是每个应用都拥有一个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-15T18:10:37.023

最简单的方法是将服务放在单独的 APK 中，但代价是让用户完成 APP 的安装过程。

但是，如果我理解正确，您希望避免这种情况，并在所有客户端应用程序中拥有相同服务的实例，并且在任何给定时间点选出其中一个，然后所有客户端将使用 AIDL 与该选择的服务通信.

我还没有尝试过，但我们可以尝试以下方法 1）在单独的进程中托管服务，但让它们共享相同 2）从所有客户端中存在的 SDK 中，使用意图绑定服务 Intent intent = new Intent("this .should.be.same.for.everybody");

希望您的每个应用程序中的所有服务代码都应该收到回调。您可以让他们基于 1) 最新版本 2) 第一个可用的版本 3) 功能......等等来实现选举/选择逻辑。

您还必须承担以下情况的开销 1) 如果托管正在运行的服务的应用程序未安装怎么办 2) 如果有更新怎么办 (a) 更新当前正在运行的服务 (b) 更新之前的服务未运行但更新后，成为选择的候选者。

让我知道它是否有效。

# javascript - Silverlight 视频播放器重叠 web 元素

> ID：11454419
> 
> 赞同：0
> 
> 时间：2012-07-12T14:46:01.220
> 
> 标签：javascript, css, silverlight-4.0

我在我们的网站上有一个嵌入式 silverlight 视频播放器，它是通过 iframe（托管在 Azure 上）加载的。

在我们的网站上，顶部导航有点长，实际上它出现在silverlight 播放器后面，您看不到菜单。

我查看了一些解决此问题的选项，看起来设置 windowless=true 属性应该可以工作（[http://msdn.microsoft.com/en-us/library/cc838156(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc838156(v=vs.95).aspx) ).. 该解决方案似乎在 IE 中有效，但在 Chrome 和 Firefox 中，如果无窗口设置为 true，它会尝试下载页面。有什么想法、想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:40:25.023

## 经过多次尝试，我们终于能够在 IE、Firefox 和 Chrome 中使用它。

* * *

**在对象数据集中以下标签：**

```
 <param name="background" value="transparent">
       <param name="windowless" value="true"> 
```

**还要在 initprams 中将 autoload 和 autoplay 设置为 true。**

```
 <AutoLoad>true</AutoLoad>
       <AutoPlay>true</AutoPlay> 
```

**这是我们工作的完整 html 的样子：**

* * *

```
 <object data="data:application/x-silverlight," type="application/x-silverlight" width="100%" height="100%">
        <param name="source" value="MediaPlayerTemplate.xap"/>
        <param name="background" value="transparent" />
        <param name="windowless" value="true" />
        <param name="onerror" value="onSilverlightError" />
        <param name="autoUpgrade" value="true" />
        <param name="minRuntimeVersion" value="3.0.40624.0" />            
        <param name="enableHtmlAccess" value="true" />
        <param name="enableGPUAcceleration" value="true" />
        <param name="initparams" value='playerSettings = 
                    <Playlist>
                        <AutoLoad>true</AutoLoad>
                        <AutoPlay>true</AutoPlay>
                        <DisplayTimeCode>false</DisplayTimeCode>
                        <EnableCachedComposition>true</EnableCachedComposition>
                        <EnableCaptions>true</EnableCaptions>
                        <EnableOffline>true</EnableOffline>
                        <EnablePopOut>true</EnablePopOut>
                        <StartMuted>false</StartMuted>
                        <StretchMode>None</StretchMode>
                        <Items>
                            <PlaylistItem>
                                <AudioCodec>WmaProfessional</AudioCodec>
                                <Description></Description>
                                <FileSize>90818591</FileSize>
                                <FrameRate>5</FrameRate>
                                <Height>384</Height>
                                <IsAdaptiveStreaming>false</IsAdaptiveStreaming>
                                <MediaSource>i201700-1.wmv</MediaSource>
                                <ThumbSource>201700-1_Thumb.jpg</ThumbSource>
                                <Title>201700-1</Title>
                                <VideoCodec>VC1</VideoCodec>
                                <Width>512</Width>
                            </PlaylistItem>
                        </Items>
                    </Playlist>'/>       
        <!--  unused valid silverlight init parameters
        <param name="enableFrameRateCounter" value="bool" />
        <param name="enableRedrawRegions" value="bool" />
        <param name="maxFrameRate" value="int" />
        <param name="allowHtmlPopupWindow" value="bool"/>
        <param name="background" value="colorValue"/>
        <param name="splashScreenSource" value="uri"/>
        <param name="fullScreen" value="bool"/>
        <param name="onFullScreenChanged" value="functionname"/>
        <param name="onResize" value="functionname"/>
        <param name="onSourceDownloadComplete" value="functionname"/>
        <param name="onSourceDownloadProgressChanged" value="functionname"/>
        <param name="windowLess" value="bool"/>
         --> 

         <div onmouseover="highlightDownloadArea(true)" onmouseout="highlightDownloadArea(false)">
                <img src="700-1_Thumb.jpg" style="position:absolute;width:100%;height:100%;border-style:none;" onerror="this.style.display='none'"/>
                <img src="Preview.png" style="position:absolute;width:100%;height:100%;border-style:none;" onerror="this.style.display='none'"/>                                            
                <div id="overlay" class="fadeLots" style="position:absolute;width:100%;height:100%;border-style:none;background-color:white;"/></div>
                <table width="100%" height="100%" style="position:absolute;"><tr><td align="center" valign="middle">                       
                <img src="http://go2.microsoft.com/fwlink/?LinkId=108181" alt="Get Microsoft Silverlight"> 
                </td></tr></table>                   
                <a href="http://go2.microsoft.com/fwlink/?LinkID=124807">
                    <img src="" class="fadeCompletely" style="position:absolute;width:100%;height:100%;border-style:none;" alt="Get Microsoft Silverlight"/>
                </a>                   
         </div>             
    </object> 
```

# javascript - D3 节点重叠

> ID：11454420
> 
> 赞同：1
> 
> 时间：2012-07-12T14:46:04.357
> 
> 标签：javascript, svg, graph, d3.js, collision-detection

我正在使用以下[示例](http://bl.ocks.org/950642)的修改版本，到目前为止一切正常。

我想要做的是让节点相互反弹而不是重叠，因为如果节点顶部有另一个节点，我看不到节点的文本和图标。有没有办法在不修改太多已经工作的代码的情况下实现这一点？也许添加诸如为节点启用碰撞之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:38:34.310

好的，我似乎将电荷设置为 .charge(-300)，通过将节点彼此推开来将它们分开。

# javascript - JavaScript：分析代码未加载

> ID：11454421
> 
> 赞同：-3
> 
> 时间：2012-07-12T14:46:06.437
> 
> 标签：javascript

有人可以告诉我为什么分析代码没有加载吗？对于美国游客，正在显示警报。

```
<script type="text/javascript">

$.getScript('http://www.geoplugin.net/javascript.gp', function() {
    $location =  geoplugin_countryName();

    if($location == "Canada" || $location == "United States") {
      alert("12");

    } else {

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-9240923-27']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();          
    }
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:57:56.987

刚刚在 JSFiddle 上测试了这个片段：http: [//jsfiddle.net/wDzBc/](http://jsfiddle.net/wDzBc/)

```
$.getScript('http://www.geoplugin.net/javascript.gp', function() {
    var location =  geoplugin_countryName();

    if(location == "Canada" || location == "United States") {
      alert("12");
    } else {
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-9240923-27']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        alert('ga');
      })();          
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:55:17.050

如果您希望分析仅适用于加拿大和美国，只需删除该 `} else {`声明，如评论中所述

编辑：好的然后：

```
$.getScript('http://www.geoplugin.net/javascript.gp', function() {
    $location =  geoplugin_countryName();

    if($location == "Canada" || $location == "United States") {
    // HERE INSERT THE CODE FOR LOADING ANALYTICS FOR USA
    } else {
        // HERE INSERT THE CODE FOR LOADING ANALYTICS FOR OTHER COUNTRY
      }          
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T14:52:35.787

由于您似乎想根据位置更改帐户，因此以下代码应该是您想要的：

```
$.getScript('http://www.geoplugin.net/javascript.gp', function() {
    var $location =  geoplugin_countryName();
    var account = "";

    if($location == "Canada" || $location == "United States")
        account = 'UA-9240923-27'
    else
        account = "otherAccount";

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', account]);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
}); 
```

**编辑**

您的 javascript 末尾有一个非法字符。这是我查看源代码时脚本末尾的样子：

```
});â€‹ 
```

您还缺少`type="text/javascript`on 您的第一个脚本标记，您应该使用 doctype、html、head 和 body 正确格式化您的 html 文件。

# perl - Perl - 如果多行匹配，则停止读取文件

> ID：11454427
> 
> 赞同：1
> 
> 时间：2012-07-12T14:46:25.710
> 
> 标签：perl, file-io

> **可能重复：**
> [如何在 Perl 中跳出循环？](https://stackoverflow.com/questions/303216/how-do-i-break-out-of-a-loop-in-perl)

我的数据看起来像你在下面看到的。我正在尝试创建一个将捕获选定文本的 perl 脚本。我的想法是说“如果前一行读取的都是 - 并且当前读取的行都是 = 则停止读取文件并且不要打印那些只有 = 和 - 的行.

但是，我不知道如何编码。我 3 天前才开始使用 perl。我不知道这是否是最好的方法。让我知道是否有更好的方法。无论哪种方式，如果您可以帮助编写代码，我将不胜感激。

到目前为止我的代码：

```
...
$end_section_flag = "true" # I was going to use this to signify 
                           # when I want to stop reading
                           # ie. when I reached the end of the
                           # data I want to capture

while (<$in-fh>)
{
    my $line = $_;
    chomp $line;

    if ($line eq $string)
    {
        print "Found it\n";
        $end_section_flag = "false";
    }

    if ($end_section_flag eq "false" )
    {
        print $out-fh "$line\n";
        // if you found the end of the section i'm reading
        // don't pring the -'s and ='s and exit
    }
} 
```

我的数据是什么样的

```
-------------------------------------------------------------------------------
===============================================================================
BLAH BLAH
===============================================================================
asdfsad
fasd
fas
df
asdf
a
\n
\n
-------------------------------------------------------------------------------
===============================================================================
BLAH BLAH
===============================================================================
... 
```

我想要捕捉的东西

```
-------------------------------------------------------------------------------
===============================================================================
BLAH BLAH
===============================================================================
asdfsad
fasd
fas
df
asdf
a
\n
\n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:12:28.947

逐行处理不太适合，因为您的边界跨越了行尾。Slurp 整个文件，然后使用匹配运算符提取中间部分。

```
use strictures;
use File::Slurp qw(read_file);
my $content = read_file 'so11454427.txt', { binmode => ':raw' };
my $boundary = qr'-{79} \R ={79}'msx;
my (@extract) = $content =~ /$boundary (.*?) $boundary/gmsx; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:17:04.017

看看这是否适合您的需求：

```
 perl -ne 'm/^---/...m?/---/ and print' file 
```

如果您只想要第一个块，请将分隔符从 更改`/`为`?`：

```
 perl -ne 'm?^---?...m?^---? and print' file 
```

请参阅[范围](http://perldoc.perl.org/perlop.html#Range-Operators)运算符讨论。

这将打印以“---”为界的行范围。您可以使用 shell 的重定向将输出重定向到您选择的文件中：

```
perl -ne 'm/^---/...m?/---/ and print' file > myoutput 
```

# php - php 类型转换构造函数

> ID：11454429
> 
> 赞同：1
> 
> 时间：2012-07-12T14:46:38.403
> 
> 标签：php, oop, constructor, clone

我想对 PHP 异常进行类型转换。考虑以下代码：

```
class myException extends Exception {
  function __construct( $mOrigin = "", $iCode = 0, Exception $oPrevious = null){
    if(is_string($mOrigin)){
      parent::__construct($mOrigin, $iCode, $oPrevious);
    } elseif ($mOrigin instanceof Exception) {
      parent::__construct($mOrigin->getMessage(),$mOrigin->getCode(),$mOrigin->getPrevious());
      $this->file = $mOrigin->getFile();
      $this->line = $mOrigin->getLine();
    } else {
      parent::__construct("\$mOrigin has wrong type", self::eFatal, $oPrevious);
    }
  } 
```

这个想法是将标准异常转换为 myException 保留**原始**堆栈跟踪。由于保存跟踪的变量是私有的，我无法立即复制这些值，CTOR 会为 myException 生成一个新值。

第一个想法当然是使用克隆，但我几乎无法重新分配 $this，可以吗？

所以我想做的是一个 C++ 风格的类型转换 CTOR。PHP中有一个合理的范例来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:56:54.897

为什么不以与文件和行相同的方式设置跟踪和先前？

```
class myException extends Exception {
  function __construct( $mOrigin = "", $iCode = 0, Exception $oPrevious = null){
    if(is_string($mOrigin)){
      parent::__construct($mOrigin, $iCode, $oPrevious);
    } elseif ($mOrigin instanceof Exception) {
      parent::__construct($mOrigin->getMessage(),$mOrigin->getCode(),$mOrigin->getPrevious());
      $this->file     = $mOrigin->getFile();
      $this->line     = $mOrigin->getLine();
      $this->trace    = $mOrigin->getTrace();
      $this->previous = $mOrigin->getPrevious();
    } else {
      parent::__construct("\$mOrigin has wrong type", self::eFatal, $oPrevious);
    }
  } 
```

编辑：

请参阅下面的评论，了解为什么我之前使用此代码逃脱了。

为什么不把你的 myException 类变成一个装饰器：

```
class myException extends Exception {
  private $_oException;

  function __construct( $mOrigin = "", $iCode = 0, Exception $oPrevious = null){
    if(is_string($mOrigin)){
      parent::__construct($mOrigin, $iCode, $oPrevious);
    } elseif ($mOrigin instanceof Exception) {
      $this->_oException = $mOrigin;
      parent::__construct($mOrigin->getMessage(),$mOrigin->getCode(),$mOrigin->getPrevious());
      $this->file     = $mOrigin->getFile();
      $this->line     = $mOrigin->getLine();
    } else {
      parent::__construct("\$mOrigin has wrong type", self::eFatal, $oPrevious);
    }
  }

  function getTrace()
  {
     return $this->_oException->getTrace();
  }

  function getPrevious()
  {
    return $this->_oException->getPrevious();
  }
} 
```

更多信息：

我已经跟进了 php-general ，结果证明这*是*预期的行为，它在 Java 等中也一样。您可以覆盖子类中的成员变量，并拥有一个单独的同名存储。这在java中编译得很好

```
public class PrivateAccess
{
    private Boolean isAccessible = true;

    public Boolean getAccessible()
    {
        return isAccessible;
    }
}
class PrivateAccessChild extends PrivateAccess
{
    private Boolean isAccessible = false;

    public Boolean getAccessible()
    {
        return isAccessible;
    }

    public Boolean getParentAccessible()
    {
        return super.getAccessible();
    }

    public static void main(String[] args)
    {   
        PrivateAccessChild pAccess = new PrivateAccessChild();

        if(!pAccess.getAccessible())
            System.out.println("we're hitting the child here...");

        if(pAccess.getParentAccessible())
            System.out.println("we're hitting the parent here...");

        System.out.println("we're done here...");
    }
} 
```

# wordpress - wordpress 多站点如何管理子域？

> ID：11454431
> 
> 赞同：0
> 
> 时间：2012-07-12T14:46:49.213
> 
> 标签：wordpress, .htaccess, subdomain

我安装了 Wordpress 多站点，并想了解子域的实际管理方式，即当浏览器请求 URL 时，我的 wordpress 多站点如何知道在哪里可以找到文件/数据`user1.domain.com`？

我检查了 DNS A 记录，只看到了通配符。

我检查了.htaccess，它看起来如下：

```
RewriteEngine On
RewriteBase /

# Protect the htaccess file
<Files .htaccess>
Order Allow,Deny
Deny from all
</Files>

# Protect wpconfig.php
<Files wp-config.php>
Order Allow,Deny
Deny from all
</Files>

# Disable directory browsing
Options All -Indexes

RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^files/(.+) wp-includes/ms-files.php?file=$1 [L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule . index.php [L] 
```

所以我认为 .htaccess 不管理子域，或者是吗？

那么，当浏览器请求 URL user1.domain.com 时，我的 wordpress 多站点如何知道在哪里可以找到文件/数据？

# jquery - 禁用提交按钮，直到表单有效

> ID：11454440
> 
> 赞同：0
> 
> 时间：2012-07-12T14:47:11.617
> 
> 标签：jquery, validation

我有一个使用[bassistance validate 插件](http://docs.jquery.com/Plugins/Validation)验证的表单。这一切都很好（顺便说一句很棒的插件），但我想禁用提交按钮，直到表单有效。

根据作者 Jörn Zaefferer（[在此处阅读评论](http://old.nabble.com/Questions-Validation-Plugin-%28bassistance%29-td18072977s27240.html#a18096153)）的说法，我必须跟踪所有字段的有效性，然后启用该按钮。

所以我假设我首先必须找到类名为“required”的所有字段，然后检查它们是否也有一个“valid”类，然后最后启用按钮......但我真的很难做到这个（我已经花了 3.5 个小时，这让我发疯了！）

我尝试使用此处提出的计时器技术绑定我的输入字段以侦听“有效”类，并[提出](https://stackoverflow.com/questions/4220126/run-javascript-function-when-user-finishes-typing-instead-of-on-key-up)以下建议：

```
function doneTyping () {

var requiredFields = $('input').hasClass('required');

$(requiredFields).each(function(){
    if ($(this).hasClass('valid')){
        console.log('form is valid, enable button here');
    } else {
        console.log('form is not valid yet');
    }
}); 
```

}

但是我的代码不起作用...有人可以告诉我我是否朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:51:09.153

```
function doneTyping () {

var requiredFields = $('input.required');

    if ($("input.required:not(:valid)").length){
        console.log('form is not valid, disable button here');
    } else {
        console.log('form is  valid ');
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:22:20.163

您可以根据您的插件使用以下想法检查表单是否有效

```
alert (($("#Form1").validationEngine('validate'))); 
```

这将为您提供一个 true 或 false 值，并且基于此您可以显示或隐藏按钮。

最初使用以下方法隐藏按钮：

```
$(document).ready(function() 
{
  $("#ButtonSubmit).hide();
} 
```

# python - Mac OS X 上的 pygettext.py 和 msgfmt.py

> ID：11454446
> 
> 赞同：8
> 
> 时间：2012-07-12T14:47:23.827
> 
> 标签：python, macos, localization, gettext

我想在我的 Mac OS X 10.7 上的 Python 应用程序中翻译字符串。我可以导入`gettext`模块，但找不到工具`pygettext.py`和`msgfmt.py`，根据 Python 文档，它应该在我的 Python 安装中的某个位置。

Mac OS X 10.7 上预装的 Python 版本是否缺少这些工具，如果是，我该如何获取它们？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-09-28T11:23:16.933

使用 python 3 和 MacOS >= 10.9，`gettext`通过自制软件安装不会链接库，这将产生错误`Can't find msgfmt`。

这有助于：

```
$ brew install gettext  # if not already done
$ brew link gettext --force 
```

感谢[https://stackoverflow.com/a/8785138/621690](https://stackoverflow.com/a/8785138/621690)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-12T17:22:52.680

这两个脚本都位于 Python 源代码的杂项工具目录中。该目录通常不包含在 Python 的二进制安装中，例如 Apple 在 OS X 中提供的那些。但是，很容易从 Python 源版本单独下载它们；[在此处](http://www.python.org/download/)查看最新版本。对于当前的 Python 2.7.3 版本，您可以执行以下操作：

```
$ curl -O http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tgz
$ tar -xf Python-2.7.3.tgz 
$ cd Python-2.7.3
$ cd Tools/i18n/
$ ls
makelocalealias.py  msgfmt.py*          pygettext.py* 
```

从 Python 3.2 开始，该`Tools`目录由 python.org OS X 二进制安装程序安装。你可以在 Python 框架中找到它：

```
/Library/Frameworks/Python.framework/Versions/3.2/share/doc/python3.2/examples/Tools 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-29T20:36:52.263

创建符号链接

```
sudo ln -s /Library/Frameworks/Python.framework/Versions/3.7/share/doc/python3.7/examples/Tools/i18n/pygettext.py /usr/local/bin/pygettext 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T03:18:46.073

如果您在 Linux 中正确安装了 Python，您应该能够从命令行访问二进制版本。因此，要制作 .pot 文件，您可以键入：

```
 $> pygettext [options] source_file_list 
```

我发现我有两个版本的 pygettext，一个用于 2.7，另一个用于 3.2，但它们的工作方式似乎几乎相同。要从 .po 文件创建 .mo 文件：

```
 $> msgfmt [options] file.po 
```

但您需要确保您不会意外使用 gnu 版本。msgfmt 的 Python 版本要简单得多。这两个命令都有帮助，因此您可以使用以下命令检查选项（和版本）：

```
 $> pygettext --help 
```

和

```
 $> msgfmt --help 
```

如果有疑问，按照上面的建议下载 Python 源代码是一种带大括号的方法。

我自己仍在寻找我自己的方式，所以如果有人知道更好，请添加您的评论:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-07T04:22:18.230

通过使用`find . -name pygettext.py/msgfmt.py`，我在macOS上找不到这两个文件，无论是在系统python安装（`/System/Library/Frameworks/Python.framework/Versions`）还是在Anaconda Python发行版中。

但是我们总是可以直接从 Python 源代码中下载这两个文件。此时，它们位于：[https ://github.com/python/cpython/tree/master/Tools/i18n](https://github.com/python/cpython/tree/master/Tools/i18n)

* * *

此外，`pygettext.py`和`msgfmt.py`是 GNU`gettext`工具集的模仿物：**`xgettext`**和**`msgfmt`**. 您还可以检查这些 GNU 工具集是否已经安装。( `type -a xgettext/msgfmt`)

如果没有，您可以使用[MacPort](https://macports.org)的`port`命令或[Anaconda](https://www.anaconda.com/)的`conda`命令进行安装。

```
port install gettext
conda install gettext 
```

# ios - 使用 AudioBufferList 为正弦波生成添加发布时间

> ID：11454447
> 
> 赞同：0
> 
> 时间：2012-07-12T14:47:24.987
> 
> 标签：ios, audio, core-audio

我一直在尝试在正弦波生成项目中添加释放（或衰减）时间，以[这个](https://stackoverflow.com/questions/10000552/ios-sine-wave-generation-audible-clicking)例子为基础。我基本上想要的不是声音被如此彻底地切断并在我停止生成它时添加一些释放。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:06:01.667

在您想要静音之前开始一些样本数量，例如 5 到 50 毫秒或您决定的释放时间，然后将您的正弦波样本乘以在该时间间隔内从 1.0 减小到 0.0 的斜坡。线性下降是可以的，但升余弦 (0.5 + 0.5 * cos(pi*t)) 可能会更好。

# android - SDK 管理器不显示示例包选项

> ID：11454448
> 
> 赞同：3
> 
> 时间：2012-07-12T14:47:36.443
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我按照 android[开发者链接安装示例](http://developer.android.com/tools/samples/index.html)包。

但是，当我展开 Android 平台的包列表时，没有“ **Sample for SDK** ”选项（复选框）可用。为什么？？

我已经安装了从版本 2.3.3(API10) 到 4.0.3(API 15) 的 Android，它们都没有包含下载示例包的选项。为什么？

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:56:16.427

//你需要下载它有一个选项。

如果它显示已安装，您需要转到名为的文件夹`<sdk>/samples/`

实际上它不在那个文件夹中`<sdk>/platforms/<android-version>/samples/`

![在此处输入图像描述](../Images/1a3a797da1543e7a249ce1e10ff37a41.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:20:57.830

您可能需要更新工具包。

安装更新（可能需要多次执行此操作）以获取最新版本。然后关闭 SDK 管理器，重新打开它，示例包应该可用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:08:54.407

我也遇到了同样的问题..我在这里找到了解决方案，转到此链接并下载所有版本 sdk 的示例

[http://www.hariadi.org/android/manual-download-of-android-sdk-components/](http://www.hariadi.org/android/manual-download-of-android-sdk-components/)

# android - 两个活动之间的闪屏

> ID：11454450
> 
> 赞同：0
> 
> 时间：2012-07-12T14:47:42.093
> 
> 标签：android, splash-screen

我想在我的第一个和第二个活动之间显示一个启动画面。这两个活动都使用了 AsyncTask。首先是一个简单的登录屏幕，用于检索整个应用程序的数据，其次是加载特定于活动的数据。目前，这两个活动都有自己的 ProgressDialogs，这很幼稚，但它们是单独开发的，然后我不打算将它们一个接一个地放置。

我试图实现启动画面只替换一个活动的加载过程。但是，为了在它们之间放置一个启动屏幕，我是否必须将所有加载过程转移到一个活动中？哪个活动应该包含启动屏幕的代码？我基本上想`ProgressDialog`用一个启动屏幕替换两个 s 。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:12:24.500

我认为最简单的方法就是制作一个显示启动屏幕的过渡活动，为下一个活动预加载数据，然后启动下一个活动。

Activity A 加载 Activity B，它在运行 AsyncTask 的同时显示初始屏幕。一旦 AsyncTask 完成加载 Activity C。

我希望我能正确理解你的问题:-)

# python - 在python中编写csv文件（文件在操作结束时留空）

> ID：11454453
> 
> 赞同：1
> 
> 时间：2012-07-12T14:47:52.600
> 
> 标签：python, csv, writer

我正在用 python 写入 csv，我想知道为什么程序完成运行时我的输出文件是空白的。首先，这是我的代码：

```
reader = csv.reader(open(location, 'rU'), delimiter = ',', quotechar = '"')
writer = csv.writer(open('temp.csv', 'wb'), delimiter = ',', quotechar = '"')

writer.writerow(["test", "test", "test", "test", "test", "test", "test"])

count = 0
for row in reader:
    if count != 0 and count < len(split):
        writer.writerow([row[0], row[1], row[2], row[3], row[4], row[5], split[count-1]])
    count = count + 1 
```

我知道一些关于它的事情：

*   当程序完成时，写入“temp.csv”的所有内容都是“测试”行。文档的其余部分为空。
*   如果我在运行过程中强制停止程序，实际上有文本被写入文件：它只是由于某种原因被擦除。
*   我做了一些研究，很多人发现“关闭” csv 文件可以解决他们的问题，但这似乎对我不起作用，除非我遗漏了一些明显的东西！

在此先感谢您的帮助！

编辑：这是我正在使用的一些更新代码：

```
infile = open(location, 'rU')
outfile = open('temp.csv', 'wb')
reader = csv.reader(infile, delimiter = ',', quotechar = '"')
writer = csv.writer(outfile, delimiter = ',', quotechar = '"')
split = email_text.split('NEW MESSAGE BEGINS HERE')

count = 0
for row in reader:
    if count != 0 and count < len(split):
        writer.writerow([row[0], row[1], row[2], row[3], row[4], row[5], split[count-1]])
        outfile.flush()
    count = count + 1

infile.close()
outfile.close() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:51:01.727

你没有关闭文件。如果您只是在读取文件，这可能会很好，但在写入文件时这样做绝对不是一个好主意。

使用上下文管理器：

```
with open(location, 'rU') as infile, open('temp.csv', 'wb') as outfile:
    reader = csv.reader(infile, delimiter = ',', quotechar = '"')
    writer = csv.writer(outfile, delimiter = ',', quotechar = '"')
    ... 
```

这确保了在`with`退出块时文件将被关闭（即使是因为异常）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:08:56.643

更改前两行以保存打开的文件句柄，然后包含关闭调用

```
reader_file = open(location, 'rU')
writer_file = open('temp.csv', 'wb')
reader = csv.reader(reader_file, delimiter = ',', quotechar = '"')
writer = csv.writer(writer_file, delimiter = ',', quotechar = '"')

# ... rest of code ...

reader_file.close()
writer_file.close() 
```

# size - Java NIO ByteBuffer：在读取完整消息之前先读取消息大小

> ID：11454457
> 
> 赞同：0
> 
> 时间：2012-07-12T14:48:05.303
> 
> 标签：size, nio, head, bytebuffer, socketchannel

我正在制作一个接收消息的java NIO服务器，每条消息在消息的头部都有它的大小，这就是为什么我首先读入一个默认大小（44）的缓冲区，然后从这个缓冲区中获取完整的大小，然后创建一个新缓冲区，该缓冲区应该获取消息（正文）的其余部分，然后使用 System.arrayCopy() 制作包含完整消息的数组。此操作运行良好，问题是第二个缓冲区（消息体）具有大小但不包含正确的数据。如果你有什么问题，请这是我的代码：

```
public void getMessageByMessageSize(SelectionKey key) {
    socket = (SocketChannel) key.channel();
    int nBytes = 0;
    byte[] message = null;
    try {
        nBytes = socket.read(headBuffer);
        if (nBytes < 0) {
            try {
                key.channel().close();
                key.cancel();
                return;
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
                    //size of the message body
        int corpMessageSize = MessageUtils.getMessageSize(headBuffer)
                - HEADER_SIZE;
        ByteBuffer corpsBuffer = ByteBuffer.allocate(corpMessageSize);
        headBuffer.flip();
        nBytes += socket.read(corpsBuffer);
        corpsBuffer.flip();
        byte[] corp=corpsBuffer.array();

        message = new byte[nBytes];
        System.arraycopy(headBuffer.array(), 0, message, 0, HEADER_SIZE);
        System.arraycopy(corpsBuffer.array(), 0, message, HEADER_SIZE,
                nBytes - HEADER_SIZE);
        System.out.println(nBytes);
        headBuffer.clear();
        corpsBuffer.clear();
    } catch (IOException e) {
        e.printStackTrace();
        try {
            key.channel().close();
            key.cancel();
            return;
        } catch (IOException ex) {
            e.printStackTrace();
        }
    }

    this.worker.verifyConnection(this,message, key);
    //this.worker.processData(this, socket, message, nBytes);
} 
```

我有一个简单的客户端，它发送创建一个字节消息，在头部确定它的大小，然后发送它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:18:01.123

> nBytes += socket.read(corpsBuffer);

您假设这会读取整个消息并填充缓冲区。TCP/IP 中没有任何东西可以保证这一点。你必须循环。如果您处于非阻塞模式，则必须重新选择是否获得零长度读取。

# iphone - 为什么我不能在不使用 self 的情况下初始化我的变量

> ID：11454466
> 
> 赞同：0
> 
> 时间：2012-07-12T14:48:27.357
> 
> 标签：iphone, objective-c, ios

我定义了以下变量：

```
@property (nonatomic, retain) NSMutableArray *arraySpeechSentences; 
```

我正在尝试通过以下方式对其进行初始化：

```
// Set the array of sentences to the stored array
NSMutableArray *speechSentences = [[NSMutableArray alloc] initWithArray:[tempDict objectForKey:key]];
arraySpeechSentences = speechSentences;
[speechSentences release]; 
```

当我尝试调用 [arraySpeechSentences count] 时，应用程序崩溃。但是，如果我按以下方式设置变量：

```
// Set the array of sentences to the stored array
NSMutableArray *speechSentences = [[NSMutableArray alloc] initWithArray:[tempDict objectForKey:key]];
self.arraySpeechSentences = speechSentences;
[speechSentences release]; 
```

我可以完美地调用 [arraySpeechSentences count]。我的印象是，如果你使用 self. 它只是检查变量是否已经设置，如果是，它将在分配新值之前释放对象。我是不是弄错了，如果是这样，我什么时候应该使用 self. 设定值？

感谢您的帮助，埃利奥特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T14:50:17.497

使用设置器（如`self.foo = ...`or `[self setFoo:...]`）确实会释放旧值，但它也会*保留新值*，这在您给出的示例中是必需的。

问题是你正在分配和初始化你的数组，然后释放它。这表明您不再需要它。因此，您应该使用 setter（通常更可取）或不要释放您的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:00:44.220

如果您不使用 ARC，则应键入

```
arraySpeechSentences = [speechSentences retain]; 
```

因为您是直接访问实例变量，这意味着实例变量的值`arraySpeechSentences`将是`speechSentence`您刚刚释放的对象的地址，所以这是一个无效的指针。您在属性中声明的语义对实例变量本身没有影响。

键入`self.arraySpeechSentences`时，实际上是在使用 setter 的快捷方式`[self setArraySpeechSentences:speechSentences]`，它实际上*保留*了作为参数传递的值（如果您合成了属性，则保留，因为您`retain`在属性声明中指定了；如果您自己编写访问器，则为您的工作，以确保您保留价值）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T15:14:46.273

我将尝试对此给出详细的答案。

首先，当您使用`@property/@synthesize`指令时，您会围绕变量创建 getter 和 setter 方法。

在您的情况下，变量被调用`arraySpeechSentences`（编译器将为您创建变量），您可以使用`self.`.

```
self.arraySpeechSentences = // something 
```

是相同的

```
[self setArraySpeechSentences:something]; // setter 
```

和

```
NSMutableArray* something = self.arraySpeechSentences; 
```

等于

```
NSMutableArray* something = [self arraySpeechSentences]; // getter 
```

在第一段代码中

```
NSMutableArray *speechSentences = [[NSMutableArray alloc] initWithArray:[tempDict objectForKey:key]];
arraySpeechSentences = speechSentences; 
```

`arraySpeechSentences`指向同一个对象`speechSentences`指向。但是当你这样做时，你会`[speechSentences release]`释放那个对象，现在`arraySpeechSentences`是一个悬空指针。我想您会收到一条发送到已释放实例的消息。尝试让僵尸看到它。

就保留计数而言，当您这样做时，数组的保留计数为 1 `alloc-init`。但是当你`release`这样做时，保留计数变为零，对象不再存在，当你尝试访问时你会崩溃`arraySpeechSentences`。

相反，当您处理属性时，应用于变量的策略很重要。由于属性使用`retain`策略，当您设置对象时

```
self.arraySpeechSentences = // something 
```

被引用对象的保留计数增加。在引擎盖下，说`self.arraySpeechSentences = // something`等于调用 setter

```
- (void)setArraySpeechSentences:(NSMutableArray*)newValue
{
    // pseudo code here...
    if(newValue != arraySpeechSentences) {

       [arraySpeechSentences release];
       arraySpeechSentences = [newValue retain]; 
    }
} 
```

第二个片段起作用，因为您的对象的保留计数在您执行时为 1 `alloc-init`，在您调用时变为 2，`self.arraySpeechSentences =`并在您执行释放时返回为 1。这一次，对象保持活动状态，因为它的保留计数为 1。

如果你有一个带有`retain`or`copy`策略的属性，不要忘记在`dealloc`like 中释放对象，否则你可能会有泄漏。

```
- (void)dealloc
{
    [arraySpeechSentences release];
    [super dealloc];
} 
```

要了解 Memory 的工作原理，我建议阅读[MemoryManagement Apple 文档](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html)。

*PS*从 iOS 5 开始，有一个新的编译器功能，称为**ARC**（自动引用计数），可以让您忘记`retain/release`调用。另外，由于它迫使您根据对象图进行思考，因此建议您看一下。

希望有帮助。

# java - 调用 Spring Web 服务

> ID：11454468
> 
> 赞同：0
> 
> 时间：2012-07-12T14:48:33.800
> 
> 标签：java, web-services, spring, spring-ws

我正在尝试调用 Spring Web 服务，在浏览器中使用下面的 url 服务“myservice”应该返回 XML，即基于 @RequestMapping 注释，下面的 URL 是否正确？

```
> http://localhost:8080/mywebapp/myservice/feeds/allFeeds.xml/

import org.springframework.http.MediaType;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@RequestMapping("myservice")
public class TheController {

    private TheService TheServiceWS;

    public TheController(TheService TheServiceWS) {
        this.TheServiceWS = TheServiceWS;
    }

    @RequestMapping(value = "feeds/allFeeds.xml", produces = MediaType.APPLICATION_XML_VALUE)
    @ResponseBody
    public String getValues() {
        return TheServiceWS.getAllFeeds();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:25:28.883

我的问题是：

@RequestMapping 注释值“myservice”不正确

应该是“mywebservice”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-24T16:05:01.233

如果 Web 服务以 XML 形式返回，则它是原始的 SOAP Web 服务。在这种情况下，您无法使用 @RequestMapping 构建 Web 服务。当您想要构建 REST Web 服务时使用 @RequestMapping。

在这种情况下，您应该使用 Spring WS。您必须使用 @Endpoint 注释该类以创建 Web 服务端点。在此端点中，您使用 @Payloadroot 创建请求映射。请参考[这个](http://docs.spring.io/spring-ws/docs/2.3.0.RELEASE/reference/htmlsingle/)

# php - PHP + APC：如何缓存最大 128M 的数据？

> ID：11454469
> 
> 赞同：4
> 
> 时间：2012-07-12T14:48:37.787
> 
> 标签：php, apc

我有大数据部分要缓存在 APC 中（普通文件缓存太慢）。`apc_store`函数总是返回`false`这个数据量：

我试图做这样的事情：

```
ini_set('apc.max_file_size', '128M');
die(ini_get('apc.max_file_size')); 
```

输出是`1M`！它不会抛出任何错误，但它根本不起作用。我拥有的所有其他 ini_sets（例如`memory_limit`）运行良好，所以这不是权限问题。

我的 APC 信息是：

```
Version 3.1.3p1
MMAP Support Enabled
MMAP File Mask no value
Locking type pthread mutex Locks
Revision $Revision: 286798 $
Build Date Apr 18 2010 06:56:17 
```

和设置是：

```
apc.cache_by_default On
apc.canonicalize On
apc.coredump_unmap Off
apc.enable_cli Off
apc.enabled On
apc.file_md5 Off
apc.file_update_protection 2
apc.filters no value
apc.gc_ttl 3600
apc.include_once_override Off
apc.lazy_classes Off
apc.lazy_functions Off
apc.max_file_size 1M
apc.mmap_file_mask no value
apc.num_files_hint 1000
apc.preload_path no value
apc.report_autofilter Off
apc.rfc1867 Off
apc.rfc1867_freq 0
apc.rfc1867_name APC_UPLOAD_PROGRESS
apc.rfc1867_prefix upload_
apc.rfc1867_ttl 3600
apc.shm_segments 1
apc.shm_size 128
apc.stat On
apc.stat_ctime Off
apc.ttl 0
apc.use_request_time On
apc.user_entries_hint 4096
apc.user_ttl 0
apc.write_lock On 
```

我应该设置什么来允许缓存这样的大数据药水？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T04:38:19.663

在@Ugo Meda 的评论之后，我想与您分享我对这个问题的解决方案。正如他正确指出的那样，我无法`apc.max_file_size`通过`ini_set`. 它只是返回`false`，而其他设置（即。`memory_limit`）运行良好！

所以我唯一能做的就是直接在apc.ini中设置。这个文件在 Ubuntu 上的位置是：

```
/etc/php5/conf.d/apc.ini 
```

有时您的 APC 设置位于 [APC] 部分的 php.ini 中 - 此文件在 Ubuntu 上的位置是：

```
/etc/php5/apache2/php.ini 
```

如果找不到，只需运行以下命令：

```
find / -name apc.ini 
```

如果没有这样的文件 (apc.ini) 尝试在那里寻找 php.ini 和 [APC] 部分：

```
find / -name php.ini 
```

找到正确的配置文件后，您就可以编辑它的选项了。我只是在那里添加了这两行：

```
apc.shm_size=512

apc.max_file_size=128M 
```

编辑后，保存并简单地重新启动您的 Apache (Ubuntu - `/etc/init.d/apache2 restart`)。如果由于某种原因您无法运行此命令，或者您没有提到的 *.ini 文件的权限，则在上述每个命令的开头添加 sudo 命令。

**关于 apc.shm_size 的另一个说明：**

如果你的 APC 版本低于 3.1.4，那么这个配置选项的值必须写成和我写的一样的格式（`M`最后没有''）。如果您的版本是 3.1.4 或更高版本，那么您需要以这种方式指定它：`512M`.

来源：[http ://e-mats.org/2010/10/apc_mmap-mmap-failed-cannot-allocate-memory/](http://e-mats.org/2010/10/apc_mmap-mmap-failed-cannot-allocate-memory/)

@Ugo Meda's - 再次感谢您向我指出这一点！

# mysql - 按行值对 MySQL 数据进行排序

> ID：11454472
> 
> 赞同：1
> 
> 时间：2012-07-12T14:48:45.947
> 
> 标签：mysql, sql

我有两个看起来像这样的表：

表：项目

```
id | itemId
---|------
0  | 1
1  | 2
2  | 3 
```

表：item_specs

```
id | itemId | key          | values
---|--------|---------------
0  | 1      | itemreceived | 2012-06-01
1  | 1      | modelyear    | 1992
2  | 1      | model        | 2
3  | 2      | itemreceived | 2012-06-05
4  | 2      | modelyear    | 2003
5  | 2      | model        | 1
6  | 3      | itemreceived | 2012-07-05
7  | 3      | modelyear    | 2000
8  | 3      | model        | 3 
```

我当前的查询如下所示：

```
SELECT items.*, item_specs.* FROM item_specs
INNER JOIN item_specs ON items.itemId = item_specs.itemId
WHERE itemId IN(1,2,3) 
```

如何按键值对结果进行排序，例如：模型？

我正在寻找的结果是这样的：（如果我按型号订购）

```
id | itemId | key          | values
---|--------|---------------
3  | 2      | itemreceived | 2012-06-05
4  | 2      | modelyear    | 2003
5  | 2      | model        | 1
0  | 1      | itemreceived | 2012-06-01
1  | 1      | modelyear    | 1992
2  | 1      | model        | 2
6  | 3      | itemreceived | 2012-07-05
7  | 3      | modelyear    | 2000
8  | 3      | model        | 3 
```

返回的内容按具有键模型的值排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:53:50.497

```
SELECT * FROM `table` WHERE `key` = 'model' ORDER BY `values` ASC 
```

您必须手动指定表类型/存储引擎。这在您提供的结构中看不到。[在这里](http://www.mysqltutorial.org/understand-mysql-table-types-innodb-myisam.aspx)
阅读更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T08:07:25.303

You need the model number for every row. You can do that with a join:

```
SELECT items.*, item_specs.* 
FROM item_specs
INNER JOIN item_specs ON items.itemId = item_specs.itemId
INNER JOIN item_specs aux ON (aux.key = 'model' and aux.itemID = item_specs.itemId)
WHERE item_specs.itemId IN(1,2,3)
ORDER BY aux.values/*this is the model*/, item_specs.id; 
```

or with a subselect:

```
SELECT items.*, 
       item_specs.*, 
       (select aux.values 
        from item_specs aux 
        where aux.key = 'model' and aux.itemID = item_specs.itemId
        ) as model
FROM item_specs
INNER JOIN item_specs ON items.itemId = item_specs.itemId
WHERE item_specs.itemId IN(1,2,3)
ORDER BY model, item_specs.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:08:26.840

看来您想使用 order by 子句。这将按您需要的列排序。你也可以在这里做一些偷偷摸摸的事情，比如为你首先订购的东西插入一个真/假值。

```
SELECT * FROM `table` 
   Order by (case When Key='model' then 0 else 1 end), values 
```

See, for instance, [http://blog.sqlauthority.com/2007/07/17/sql-server-case-statement-in-order-by-clause-order-by-using-variable/](http://blog.sqlauthority.com/2007/07/17/sql-server-case-statement-in-order-by-clause-order-by-using-variable/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:27:44.173

```
SELECT * FROM `table` 
WHERE `key` = 'model' 
ORDER BY `values`; 
```

# python - 将 Python 列表转换为向量 在赛通

> ID：11454476
> 
> 赞同：4
> 
> 时间：2012-07-12T14:49:19.317
> 
> 标签：python, cython

我需要在 cdef 函数中将整数的 Python 列表转换为 vector[int] 以调用另一个 C 函数。我试过这个：

```
cdef pylist_to_handles(hs):
    cdef vector[int] o_vect
    for h in hs:
        o_vect.push_back(h)
    return o_vect 
```

这应该可以工作，因为我只需要从其他 cdef 函数调用它，但我收到此错误：

> 无法将 'vector<int>' 转换为 Python 对象

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T17:39:17.567

[在使用libcpp.vector](http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#standard-library)的Cython 0.17 中，您可以这样做：

```
cdef vector[int] vect = hs 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T16:01:55.737

你真正拥有的是：

```
cdef object pylist_to_handles(hs):
    ...
    return <object>o_vect 
```

如果您没有明确设置类型，则假定它是 python 对象（代码中的“对象”）。正如您在代码中看到的，您正在尝试将 vector[int] 转换为一个对象，但 Cython 不知道如何处理它。

只需在 cdef 中添加一个返回类型：

```
cdef vector[int] pylist_to_handles(hs): 
```

# r - R图频率分布

> ID：11454479
> 
> 赞同：2
> 
> 时间：2012-07-12T14:49:20.400
> 
> 标签：r

如何在 R 中绘制频率分布？我不想对值进行分类。我只想绘制每个值的频率。该`hist`函数坚持对值进行分箱，除非我手动指定分箱（真的很乏味，因为我事先不知道这些值）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T14:58:22.683

你可以你`plot`的`table`数据：

```
xx<-sample(1:10,100,replace=TRUE)
plot(table(xx)) 
```

![直方图](../Images/eb35103f0bc880203cababc8edf329c4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:57:45.160

你试过 s.distri {ade4} 吗？[http://pbil.univ-lyon1.fr/ade4/ade4-html/s.distri.html](http://pbil.univ-lyon1.fr/ade4/ade4-html/s.distri.html)

```
 library(ade4)
  xy <- cbind.data.frame(x = runif(200,-1,1), y = runif(200,-1,1))
  distri <- data.frame(w1 = rpois(200, xy$x * (xy$x > 0)))
  s.value(xy, distri$w1, cpoi = 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T14:59:58.547

```
table(sample(1:10,20,replace=T)) 
```

# jquery - 简单的jquery ajax请求语法错误

> ID：11454483
> 
> 赞同：1
> 
> 时间：2012-07-12T14:49:32.013
> 
> 标签：jquery, ajax

我有一个简单的 ajax 请求函数，并且缺少一些语法错误。只需要第二双眼睛..谢谢

```
 function GetPaginationPage(array) {
        $.ajax({
            type: "POST",
            url: "includes/get_pagination_page.php",
            data: array,
            success: function(data){ function (data) {
            $('.contestants_list').append(data);
        }};
            });
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:56:28.510

试试这个

```
function GetPaginationPage(array) {
    $.ajax({
        type: "POST",
        url: "includes/get_pagination_page.php",
        data: array,
        success: function(data) {$('.contestants_list').append(data);}
    });
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:52:00.107

问题是您重新包装了成功事件的函数，并且您在函数末尾添加了一个分号

删除成功事件中的两个函数和末尾的分号，应该是这样的

```
$.ajax({
   type: "POST",
   url: "includes/get_pagination_page.php",
   data: array,
   success: function(data) {
     $('.contestants_list').append(data);
   }
});​ 
```

**笔记**

遇到此问题时的提示使用[http://jsfiddle.net/](http://jsfiddle.net/)并使用按钮测试您的 javascript 代码`JsLint`以检查错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:54:21.897

由于某种原因，您有两次函数（数据），请将其更改为：

```
function GetPaginationPage(array) {
        $.ajax({
            type: "POST",
            url: "includes/get_pagination_page.php",
            data: array,
            success: function(data){ 
                $('.contestants_list').append(data);
            }
        });
}; 
```

希望这可以帮助

# 3d - 3D 模型是否需要进行 UV 解包才能在 XNA 中使用？

> ID：11454486
> 
> 赞同：0
> 
> 时间：2012-07-12T14:49:38.997
> 
> 标签：3d, xna, xna-4.0

我正在研究在 XNA 应用程序中使用两种不同模型之一：

A) [http://www.turbosquid.com/3d-models/maya-airbus-economy-class-interior/445732](http://www.turbosquid.com/3d-models/maya-airbus-economy-class-interior/445732) 或 B) [http://www.turbosquid.com/3d-models/fbx-real-time/ 613987](http://www.turbosquid.com/3d-models/fbx-real-time/613987)

B 已被 UV 解包，而 A 没有。我更喜欢使用 A，但我不确定它是否可以由 XNA 处理，或者 XNA 是否要求您使用未包装的纹理。

XNA 对它可以使用的模型有哪些限制/规格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:35:00.717

如果你想在模型上映射纹理 - 那么它必须被解包和映射，是的。根据 UV 映射和/或模型的复杂程度，您可以选择自己制作并使用插件将其导出，以用于您使用的任何建模工具。

请注意，XNA 模型可以将纹理和非纹理部分作为部件（但我从未见过任何部分展开的模型，也许出口商不这样做？）。

理想情况下，您会得到一个最终的 FBX，该 FBX 由已经正确 UV 映射的[ModelMesh es 分解。](http://msdn.microsoft.com/en-us/library/bb198082)您的选项 B 看起来做得很好，甚至可以说它是“实时的”，这意味着 polycount 已经针对实时渲染进行了优化。

# javascript - 无法让 Bootstrap javascript 工作？

> ID：11454489
> 
> 赞同：2
> 
> 时间：2012-07-12T14:49:42.900
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap, tooltip

我是新来的轨道。

我有这个简单的代码：

```
<h1>Pages#home</h1>
<p>Find <a id="t" rel="tooltip" title="Click me!">me</a> in app/views/pages/home.html.erb</p> 
```

pages.js.coffee 文件：

```
jQuery ->
    $('a#t').tooltip(placement: 'bottom'); 
```

工具提示仍会在单词顶部弹出。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:53:09.613

您的 HTML 标记包含错误，请查看您的链接标题，它有 '>' 字符，必须在 HTML 中转义，请`&gt;`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:45:56.703

问题在于您如何使用选项。
试试这个。希望它有效

```
$('a#t').tooltip('placement': 'bottom'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:20:14.127

两件事情：

1.  那应该是`tooltip()`方法调用中的对象文字。

2.  如果您已经在元素上激活了工具提示，`tooltip()`再次调用该方法将无法更新选项。

鉴于此，尝试类似：

```
if ($('a#t').data('tooltip')) { // check for tooltip data first
  $('a#t').data('tooltip').options.placement = 'bottom';
} else { 
  $('a#t').tooltip({placement: 'bottom'});
} 
```

[*免责声明：我既不知道 Rails 也不知道 CoffeeScript，但我知道上面的代码在 JS 中有效。*]

# php - 将动态多维数组从 jQuery 传递到 php 并插入数据库

> ID：11454490
> 
> 赞同：0
> 
> 时间：2012-07-12T14:49:48.293
> 
> 标签：php, mysql, arrays

您好我正在尝试将动态数组从 jQuery 发布到 PHP 到 mysql 我从 jQuery 获取数据并能够序列化数据 php 获取变量并且它作为数组出现但是当我尝试为我的插入和依赖传递变量时我把它放在 foreach() 我要么只得到插入数据库的最后一个数组，要么得到所有东西的多个插入（即：name1、prob1、date1 name1、prob1、date2 等）。$name, $problem, $timedate 作为 jQuery 的数组发布。

在这个例子中，我只得到数组的最后一个

```
 <?php
$name = $_POST['name'];
$problem = $_POST['problem'];
$timedate = $_POST['timedate'];
$con = mysql_connect("localhost","wayko","b4v0e1jj");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
mysql_select_db("joinus", $con);
$seriname =  mysql_real_escape_string(serialize($name));
$seriprob =  mysql_real_escape_string(serialize($problem));
$seritd =  mysql_real_escape_string(serialize($timedate));
foreach($name as  $valname){
foreach($problem as  $valprob){
foreach($timedate as $valtd){
}
}
}
$sql="INSERT INTO roomchart (Name,TimeDate,Problem)
VALUES
('$valname','$valtd','$valprob')";
echo $sql;

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error(). "Actual query: " . $sql);
}

mysql_close($con);
?> 
```

在此示例中，我获得了相同数据的多个插入，因此 3 个插入变为 9

```
foreach($name as  $valname){
foreach($problem as  $valprob){
foreach($timedate as $valtd){
$sql="INSERT INTO roomchart (Name,TimeDate,Problem)
VALUES
('$valname','$valtd','$valprob')";
echo $sql;
}
}
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:00:15.533

就是这样`foreach`工作的。在您的第一个示例中，您的三个嵌套`foreach`循环中没有任何内容，因此 PHP 只是循环到这三个数组中每个数组的最后一个元素。然后，当您执行 SQL 语句时，您只需执行一次 - 使用这三个数组中每个数组的最后一个元素。

对于第二个示例，您将获取 的每个元素`$name`，将其与 的每个元素进行`$problem`匹配，并将这些组合中的每个元素与`$timedate`. 因此，假设您在每个数组中有 3 个元素，您已经从这三个数组中创建了 3x3x3 = 27 种不同的元素组合（然后将这些组合中的每一个 SQL 输入到您的数据库中）。

我假设您有 3 个大小相等的数组，并且您想`$name[0]`与`$problem[0]`with `$timedate[0]`、`$name[1]`with `$problem[1]`with`$timedate[1]`等配对。假设您的数组只有自动递增键（如上一句中所示），您可以使用：

```
foreach ($name as $key => $valname) {
    $sql = "INSERT INTO roomchart (Name, TimeDate, Problem)
    VALUES ('$valname', '$timedate[$key]', '$problem[$key]')";
    echo $sql;
} 
```

这将为您提供所需的正确配对。

编辑编辑：最后一次编辑不起作用。使用前面的代码。

# jquery - jquery插件在html页面上不起作用，但在site.master中不起作用？

> ID：11454494
> 
> 赞同：0
> 
> 时间：2012-07-12T14:49:53.347
> 
> 标签：jquery, asp.net

我正在使用 jQuery Banner Rotator 插件，并让它在 html 页面上正常工作。但是，当我将它复制到我的 site.master 时，我收到一个 javascript 错误，提示“对象不支持属性或方法“allinone_bannerrotator”。

两个文档的 head 部分是相同的：

```
<head>
<title></title>
<!--[if !IE 7]>
    <style type="text/css">
        #wrap {display:table;height:100%}
    </style>
<![endif]-->
<link href="Styles/Site.css" rel="stylesheet" type="text/css" />
<link href="Styles/allinone_bannerRotator.css" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css' />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-ui-1.8.16.custom.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.ui.touch-punch.min.js" type="text/javascript"></script>
<script src="Scripts/allinone_bannerRotator.js" type="text/javascript"></script>
<script>
    $(function () {

        $('#allinone_bannerRotator_classic').allinone_bannerRotator({
            skin: 'classic',
            width: 751,
            height: 229,
            thumbsFolder: 'images/classic/thumbs'
        });

    });
</script> 
```

除了 site.master 具有 runat="server" 标记和其中的内容占位符：

```
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder> 
```

这是横幅的代码：

```
<div id="allinone_bannerRotator_classic" style="display: none; margin: 0px">
                            <!-- IMAGES -->
                            <img src="images/classic/banner1.png" alt="" data-text-id="#allinone_bannerRotator_photoText1" />
                            <img src="images/classic/banner2.png" alt="" data-text-id="#allinone_bannerRotator_photoText2" />
                            <img src="images/classic/banner3.png" alt="" data-text-id="#allinone_bannerRotator_photoText3" />
                            <img src="images/classic/banner4.png" alt="" data-text-id="#allinone_bannerRotator_photoText4" />
                            <!-- TEXTS -->
                            <div id="allinone_bannerRotator_photoText1" class="allinone_bannerRotator_texts">
                                <div class="allinone_bannerRotator_text_line textElement12_attractive" data-initial-left="50"
                                    data-initial-top="10" data-final-left="50" data-final-top="40" data-duration="0.5"
                                    data-fade-start="0" data-delay="0">
                                    Broadoak students love to
                                </div>
                                <div class="allinone_bannerRotator_text_line textElement11_attractive" data-initial-left="50"
                                    data-initial-top="10" data-final-left="50" data-final-top="70" data-duration="0.5"
                                    data-fade-start="0" data-delay="0.3">
                                    get stuck in</div>
                            </div>
                            <div id="allinone_bannerRotator_photoText2" class="allinone_bannerRotator_texts">
                                <div class="allinone_bannerRotator_text_line textElement12_attractive" data-initial-left="550"
                                    data-initial-top="60" data-final-left="350" data-final-top="60" data-duration="0.5"
                                    data-fade-start="0" data-delay="0">
                                    16 transition effects<br />
                                    for images</div>
                                <div class="allinone_bannerRotator_text_line textElement12_attractive" data-initial-left="550"
                                    data-initial-top="125" data-final-left="350" data-final-top="125" data-duration="0.5"
                                    data-fade-start="0" data-delay="0.3">
                                    optional can set the transition<br />
                                    for each image</div>
                            </div>
                            <div id="allinone_bannerRotator_photoText3" class="allinone_bannerRotator_texts">
                                <div class="allinone_bannerRotator_text_line textElement11_attractive" data-initial-left="480"
                                    data-initial-top="60" data-final-left="50" data-final-top="60" data-duration="0.5"
                                    data-fade-start="0" data-delay="0">
                                    Animated text from any direction</div>
                                <div class="allinone_bannerRotator_text_line textElement12_attractive" data-initial-left="0"
                                    data-initial-top="75" data-final-left="50" data-final-top="75" data-duration="0.5"
                                    data-fade-start="0" data-delay="0.3">
                                    top, bottom, left and right</div>
                                <div class="allinone_bannerRotator_text_line textElement11_attractive" data-initial-left="50"
                                    data-initial-top="250" data-final-left="50" data-final-top="110" data-duration="1"
                                    data-fade-start="0" data-delay="0.5">
                                    Any color, CSS and HTML formated</div>
                            </div>
                            <div id="allinone_bannerRotator_photoText4" class="allinone_bannerRotator_texts">
                                <div class="allinone_bannerRotator_text_line textElement12_attractive" data-initial-left="50"
                                    data-initial-top="0" data-final-left="50" data-final-top="260" data-duration="0.5"
                                    data-fade-start="0" data-delay="0">
                                    Line One is here</div>
                                <div class="allinone_bannerRotator_text_line textElement11_attractive" data-initial-left="50"
                                    data-initial-top="384" data-final-left="50" data-final-top="240" data-duration="0.5"
                                    data-fade-start="0" data-delay="0.3">
                                    Line Two over there</div>
                            </div>
                        </div> 
```

此外，html 测试页面和站点主控都位于站点结构中的同一位置，所以我认为这不是路径问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:54:19.573

哎呀。我在页面中包含第二个 jQuery，其级别低于 site.master（例如在我的 default.aspx 页面上）

# caching - 使用 AppCache 和 window.applicationCache 清除缓存

> ID：11454498
> 
> 赞同：0
> 
> 时间：2012-07-12T14:50:18.570
> 
> 标签：caching

我可以使用 window.applicationCache 和通过 AppCache 的 updateready 事件检查整个缓存的状态。有没有办法查看我们关注的特定资源是否被缓存，如果是，是否有清除的编程解决方案缓存？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:48:42.457

从[API](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#application-cache-api)中看不到以这种方式检查缓存或清除它是可能的。我也没有看到这样做的专有方法，但它们可能存在。

# c++ - 如何通过 C++ 代码将控制字符存储在 MySQL DB 中？

> ID：11454499
> 
> 赞同：1
> 
> 时间：2012-07-12T14:50:24.023
> 
> 标签：c++

我有一个要求。在我的项目中，我需要存储控制字符（ASCII 字符范围从 0 到 31）。但是这里我需要以字符的形式存储。我写了ac代码，但它不起作用。我在这里发布我写的代码。我的 IDE 是 Visual Studio 2010，我正在使用 MySQL Connector C 6.0.2

```
 #include "stdafx.h"
     #include <iostream>
     #include <string>
     #include<my_global.h> 
     #include <mysql.h>

     using namespace std;

     MYSQL* Connection, MySQL;

int _tmain(int argc, _TCHAR* argv[])
{
int i;
string sData;
char SQLString[384];

for(i=0;i<=31;i++)
    sData+=i;

    char *Hostname="localhost", *Username="root", *Password="system123", *Database="file_data"; 

mysql_init(&MySQL);
Connection = mysql_real_connect(&MySQL, Hostname, Username, Password, Database, 0, 0, 0);

if (Connection == NULL)
    exit(1);

sprintf_s(SQLString,384,"set sql_mode='NO_BACKSLASH_ESCAPES';");    
mysql_query(Connection, SQLString );

sprintf_s(SQLString,384,"insert into file_values(first_data)values('%s')",sData.c_str());
mysql_query(Connection, SQLString );
    return 0;
    } 
```

在这里，在编写实际项目代码之前，我编写了一个示例应用程序来测试它是否能够存储，但是通过使用上面的代码，我无法将控制字符存储在 file_values 表的 first_data 列中。

first_data 的数据类型是大小为 33 的 varchar。

请让我知道我需要在上面的代码中做些什么来满足我的要求。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:34:29.163

您可能应该为此使用准备好的语句，而不是尝试将字符代码嵌入字符串中。使用 blob 数据类型而不是字符串可能会更好。

这是一个（未经测试的）示例，说明如何使用准备好的语句存储 blob：

```
MYSQL_STMT* statement = mysql_stmt_init(Connection);
std::string statementStr = "insert into file_values(first_data) values (?)";
mysql_stmt_prepare( &statement, statementStr.c_str(), statementStr.length() );

MYSQL_BIND parameter;

parameter[0].buffer_type= MYSQL_TYPE_BLOB;
parameter[0].buffer= (char*)sData.c_str();
parameter[0].is_null= 0;
parameter[0].length= sData.length();
mysql_stmt_bind_param( statement, &parameter );

mysql_stmt_execute(stmt);
mysql_stmt_close(statement); 
```

或者，如果您需要为列类型坚持使用 varchar，您可能只需将上面的 buffer_type 替换为`MYSQL_TYPE_STRING`

# c# - 使用 Linq2Sql 的流氓事务边界

> ID：11454501
> 
> 赞同：0
> 
> 时间：2012-07-12T14:50:28.150
> 
> 标签：c#, sql-server, sql-server-2008, linq-to-sql

我有一个在服务器端使用 Linq2Sql 的网站。

时不时地（尚未确定触发器）整个网站由于未完成的交易而锁定。中可以看到阻塞进程`master..sysprocesses`，从中可以识别出做加锁的进程ID是我网站的IIS进程，`open_tran`为1，使用`DBCC inputbuffer`可以看到查询，就是泛型`select ... from MyTable`，就是SQL加载对象时由 Linq2Sql 生成。无论如何，这肯定不是我写的任何 SQL。

我已经扫描了我的整个代码库以查找任何旧的“BeginTransaction .. Commit/RollbackTransaction”块。纳达。一切都使用`using (var ts = new TransactionScope()) { ... }`块。我已附加到 IIS 进程并在不同线程中的查询被阻止时捕获了超时异常。在事务块内我找不到其他线程。同时，阻塞过程根本不会消失。

有关如何进一步解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:09:49.840

首先确保您调查了明显的情况：当存在此类事务时，将调试器附加到您的 ASP 进程并检查所有线程，确保在事务范围内没有线程阻塞/旋转。如果您使用异步 ADO.Net 调用 ( [`.BeginExecuteReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.beginexecutereader.aspx)) 会更复杂，但鉴于您使用 LINQ，您不太可能使用异步 DB 调用。

恕我直言，最可能的原因是死锁链在客户端进程（在您的 ASP.Net 进程中）内完成的死锁情况。这需要在客户端中进行某种形式的锁定（例如 C# `lock`），并且当持有锁的线程进入 DB 并阻塞时会发生这种情况，而另一个拥有 DB 锁的线程阻塞第一个线程正在客户端中执行想要持有由第一个线程。是死锁，但是链式循环涉及到 SQL Server 中的一个锁和客户端进程中的另一个锁，因此无法被 SQL Server 的死锁监视器检测到。该[网站的作者遇到了这个问题](http://www.codinghorror.com/blog/2008/12/the-problem-with-logging.html)，所以它可能发生在任何人身上。好吧，任何在持有进程锁的同时进行昂贵的可能阻塞外部调用（如 DB 调用）的人，这是多线程编程中不要这样做的第一条规则......我分歧。即使您的应用程序中没有显式锁定，也有一些组件确实具有此类锁定，例如。Log4Net。如上所述，将调试器附加到进程会显示问题。

另一个可能的嫌疑人可能是将事务注册到分布式事务中。`TransactionScope`当在单个事务范围内使用多个连接（例如，多个 Linq 数据上下文）时，这种讨厌的习惯会提升为分布式事务，请参阅[System.Transactions Integration with SQL Server (ADO.NET)](http://msdn.microsoft.com/en-us/library/ms172070.aspx)。分布式事务反过来具有这种令人讨厌的特性，*即使在客户端提交*和断开连接之后仍然存在。它必须由事务协调器确认，然后 SQL Server 才能真正“永久”提交它。在这种状态下，您可以进行检查[`sys.dm_tran_active_transactions`](http://msdn.microsoft.com/en-us/library/ms174302)，它将显示为`dtc_state`2 ( `PREPARED`)。进一步调查，如果事实证明是这种情况，则需要 MSDTC 故障排除。

最后，提醒一句：*为什么*简单的 SELECT 会持有锁？您是否使用[有害的默认构造函数形式`new TransactionScope()`](http://blogs.msdn.com/b/dbrowne/archive/2010/06/03/using-new-transactionscope-considered-harmful.aspx)？这将使用默认的 SERIALIZABLE 隔离级别，这是 99% 的过度杀伤并且实际上是有害的。尝试使用显式[`TransactionOptions`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionoptions.aspx)并将隔离级别设置为[`ReadCommitted`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionoptions.isolationlevel.aspx).

# php - 执行 Javascript 服务器端

> ID：11454503
> 
> 赞同：2
> 
> 时间：2012-07-12T14:50:29.527
> 
> 标签：php, javascript, node.js, obfuscation, server-side

我对混淆我的 JS 代码很感兴趣，但我意识到它是无用的。无论如何，我想混淆我的代码。所以我想知道，是否可以在服务器端执行 JS 代码（例如使用 node.js 中的应用程序），只需通过带有上下文（如 dom 或其他东西）的 Ajax 函数调用，在服务器端执行，然后将结果返回给页面。

它对我来说可能非常有用，它可以只显示基本的 JS 功能，但不能显示我的应用程序的核心......

也许已经存在解决方案，但我在网上一无所获......

编辑 ：

我认为使用 node.js，一个解决方案是存在的。例如，我的意思是客户端中的一个简单的 JS 函数，例如： call_func('function_name', context); 使用 ajax 调用服务器端 JS 调度程序函数，该函数返回包含结果的 JS 对象。

也许我在做梦？:)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:02:16.280

您可以在 PHP 中重写您的计算，或者如果您需要动态使用它们/访问 DOM，您可以使用 AJAX 在服务器端使用 PHP 进行计算，然后接收 PHP 脚本的输出，而无需重新加载页面。

您可以在此处阅读有关 AJAX 的信息（我建议使用 jQuery，因为它比尝试理解 HTTP 请求要简单得多）：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:19:28.493

虽然我同意您可能应该使用服务器端语言并通过 ajax 从 dom 获取所需的信息，但您必须这样做是不正确的。您可以使用例如 jsdom 在服务器上模拟 dom，您可以在[https://github.com/tmpvar/jsdom](https://github.com/tmpvar/jsdom)找到nodejs。其他语言也存在类似的包。

您梦寐以求的调度可以使用 nowjs [http://nowjs.com/](http://nowjs.com/)来实现。

我没有使用这两种工具的经验，所以我无法评论它们的工作情况。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T15:32:57.683

AJAX 是要走的路。发送函数名`xhr.send('func=myfunc')`。
首先创建一个虚拟 div。

```
<div id="dummy"></div> 
```

然后在js代码中创建一个switch case，调用函数：

```
switch(<?echo $_POST['func'];?>){  
  case 'myfunc':  
    document.getElementById("dummy").innerHTML=myfunc();  
    break;  
} 
```

然后只需使用 xhr.responseText。

# oracle - oracle分区表能提高单盘性能吗？

> ID：11454504
> 
> 赞同：1
> 
> 时间：2012-07-12T14:50:32.597
> 
> 标签：oracle, database-partitioning

Oracle SQL 参考资料描述了分区：

`Partitioning allows a table, index, or index-organized table to be subdivided into smaller pieces, where each piece of such a database object is called a partition. Each partition has its own name, and may optionally have its own storage characteristics.`

然后我有一个问题，如果我只有一个硬盘，分区表只能放在一个磁盘上。分区表可以提高性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:06:30.203

在单个磁盘上进行分区仍然有助于某些查询。例如，Oracle 可以进行分区修剪：这是一种仅从所有分区的子集中进行选择以进行查询的能力。

假设您有一个包含过去 12 个月数据的表。如果您想查询某个特定月份的总数和平均值，Oracle 可能需要对整个表进行 FULL SCAN 或使用索引读取**大量数据。**使用按月分区的方案，Oracle 只需要读取 1/12 的数据，并且仍然能够对分区进行 FULL SCAN，就好像它是大表的较小版本一样。

# java - JComponent 和 ComponentUI 委托之间的绑定事件

> ID：11454506
> 
> 赞同：2
> 
> 时间：2012-07-12T14:50:33.913
> 
> 标签：java, swing, model-view-controller, events

我已经开始尝试创建普通的 MVC Swing 组件。我对 M 和 C 没有任何问题，但是 V 向我抛出了一个我通常无法解决的问题。问题是：Controller是组件的主类（例如MyComponent），它扩展了JComponent。View 是从 ComponentUI 类扩展的 ui 委托 (MyCompanentUI)。委托所做的只是在 MyCompanent 中添加 JTextField 并在 MyComponentModel 和该字段之间提供数据绑定。它工作得很好。但是如何将事件从 JTextField 绑定到 MyComponent？如果用户想要处理一些事件，他会向 MyComponent 添加侦听器，但所有真实事件（鼠标、焦点、键等）都会被 JTextField 拦截，而用户并不真正知道。那么有什么正常的方法可以做到这一点，除了捕获事件并手动将其转换为原始组件？还是有另一种方法来创建委托，而我真的做错了？

升级版：

谢谢你的回复，垃圾神。但我心里有一些不同的东西。我说的是“事件继承”之类的东西，例如“inheritsPopupMenu”方法。这样组件发生的按键、焦点或鼠标事件本身就不会处理它，而是直接将其传递给父组件。但这似乎是不可能的，因为我注意到 JSpinner 有完全相同的问题——你几乎无法从这个组件获得任何事件通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:49:59.710

如果您正在编写自己的`JComponent`子类并希望允许自定义 UI 委托，我将从 Kirill Grouchnikov 的[*How to Write a Custom Swing Component*](http://today.java.net/pub/a/today/2007/02/22/how-to-write-custom-swing-component.html)开始。

如果您正在编写包含现有`JComponent`子类的组合，例如`JTextField`，请查看您是否可以利用[*如何使用键绑定*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)`Action`中描述的现有实例。是一个例子。您可以从组件的源代码或使用文章[*Key Bindings*](http://tips4java.wordpress.com/2008/10/10/key-bindings/)[中看到的@camickr 的](https://stackoverflow.com/users/131872/camickr)方便实用程序了解此类操作的名称。[](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)*[`ScrollAction`](https://stackoverflow.com/a/7203419/230513)[](http://tips4java.wordpress.com/2008/10/10/key-bindings/)*

# c# - 在 C# 中发送电子邮件为什么信息发送不正确？

> ID：11454509
> 
> 赞同：1
> 
> 时间：2012-07-12T14:50:42.070
> 
> 标签：c#, asp.net, email, formatting

我有一个表格，我的网站的用户将填写该表格。一旦他们点击提交，他们填写的信息应该会发送到我的电子邮件。由于某种原因，他们填写的信息没有被发送。我在下面发布代码。有一段时间它可以工作，但是当我试图让代码的其他部分工作时，我一定改变了一些简单的东西，现在我无法弄清楚。

```
 protected void Submit_Click1(object sender, EventArgs e)
    {
        try
        {

            string strMessage = "Bug Name: " + txtBugName.Text.Trim() 
                                             + "<br/>" + "Module Name: " + ddlModule.SelectedValue 
                                             + "<br/>" + "Page Name: " + ddlPage.SelectedValue 
                                             + "<br/>" + "Description: " + txtComments.Text.Trim() 

                                             + "<br/>" + "Email is" + " " + txtemail.Text.Trim() 
                                             + "<br/>" + "The request was sent at" +   

            SendMessage(ConfigurationManager.AppSettings["EmailAddrTo"],
                ConfigurationManager.AppSettings["EmailAddrFrom"],
                txtBugName.Text.Trim(),
                strMessage, "", "");
        }
        catch 
        {

        }
    } 
```

如您所见，我有这段代码提取他们填写的信息，然后我正在为将要发送给我自己的电子邮件格式化它。但是现在我只是收到一封空白的电子邮件，或者实际上主题行会有一些东西，但电子邮件将是空白的。

同样在代码的底部，您可以看到我把这封电子邮件发送到 + dandt 我正在尝试在该部分发送日期和时间是否有任何代码我可以放在那里发送电子邮件的日期和时间发送到？就像有专门针对日期和时间的语法吗？

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:51:50.267

你正在吞下异常。删除 try/catch 以查看更改代码时可能发生的任何错误；仅在测试后应用异常处理。

在此处验证您的方法签名（参数），因为这就是错误所在：

更新：

您需要按以下顺序传递参数（阅读下面的链接）：

```
public void Send(
    string from,
    string to,
    string subject,
    string body
) 
```

[SmtpClient.Send 方法（字符串、字符串、字符串、字符串）](http://msdn.microsoft.com/en-us/library/h1s04he7.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:55:28.483

您写了以下内容，并剪断了额外的字符串：

```
string strMessage = "..." + ... + SendMessage(..., strMessage, ...); 
```

你`SendMessage()`在分配之前打电话`strMessage`。

# ios - 如何在游戏关卡之间配置 iPhone 应用内购买

> ID：11454510
> 
> 赞同：0
> 
> 时间：2012-07-12T14:50:47.677
> 
> 标签：ios, in-app-purchase

我还没有将我的游戏发布到应用商店。我想免费获得初始 X 级别和应用程序购买 (>X) 级别。我阅读了许多有关应用内购买的文档，但不知何故无法适合我的游戏模型。

我有这个级别的配置：

Start View -> Level N 的进入屏幕 - startviewcontroller - 用户点击此处进入 Level N。

主视图 -> N 级播放场景 - 主视图控制器。

播放完第 N 级后，mainviewcontroller 会增加第 N 级，并将用户返回到第 N+1 级的 startviewcontroller，依此类推。

所以我必须在主视图之后放置应用内购买，在用户玩了一些级别 X 之后。用户购买后，它应该引导用户开始视图 - 级别显示为“X + 1 级”。

过去有人做过这样的事情吗？我读了一些关于 Storekit 的文章，我想要指导我的上述设计中的每一部分代码应该放在哪里。

我将非常感谢任何指导方针。

（作为一个附带问题：我应该从一开始就考虑将它作为应用内发布，还是我应该先发布一个免费应用？什么更容易？在应用内发布或稍后集成它？非常感谢任何人的帮助出去...）

# html - 在 HTML5 中绘制背景网格

> ID：11454520
> 
> 赞同：-3
> 
> 时间：2012-07-12T14:51:22.423
> 
> 标签：html, css, html5-canvas

我想使用 HTML5 Canvas API 在背景上绘制一个矩形网格。请问，最简单的方法是什么？（不透明度应为 0.5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:36:21.733

正如我的头疼所指出的那样，这已经被问过了。

**这是：[代码/演示](http://jsfiddle.net/h2yJn/66/)。**

您还要求不透明度为 0.5。你可以这样做`fillstyle`：

```
ctx.fillStyle = 'rgba(0,0,0, 0.5)'; 
```

您可以在绘图调用之前添加它。但不要忘记在调用后将其设置回 1。另外，请确保`ctx`更改为您的上下文变量的名称。

注意：如果您通过添加您尝试过的内容或确保没有任何完全相同的重复帖子来表明您已经为自己寻找解决方案付出了一些努力，那么您下次可能会得到更好的接待。:)

# r - R：t.test 和pairwise.t.test 给出不同的结果？

> ID：11454521
> 
> 赞同：4
> 
> 时间：2012-07-12T14:51:23.460
> 
> 标签：r

我尝试对以下数据框使用 R 进行 t 检验。

```
df <- structure(list(freq = c(9, 11, 14, 12, 10, 9, 16, 10, 11, 15, 
13, 12, 12, 13, 13, 9, 16, 14, 12, 15, 16, 10, 11, 13, 14, 14, 
14, 16, 8, 10, 14, 14, 11, 11, 11, 11, 13, 7, 12, 13, 14, 11, 
11, 13, 10, 14, 10, 10, 12, 8, 9, 12, 14, 11, 12, 12, 14, 14, 
14, 15, 12, 13, 14, 8, 9, 11, 10, 14, 12, 12, 9, 10, 8, 14, 11, 
14, 9, 13, 13, 13, 10, 9, 13, 10, 13, 10, 13, 12, 11, 12, 10, 
12, 8, 11, 12, 15, 12, 12, 11, 13, 12, 10, 13, 9, 11, 9, 11, 
8, 12, 12, 12, 10, 11, 12, 9, 13, 14, 11, 11, 14, 13, 12, 14, 
15, 12, 12, 12, 14), class = structure(c(3L, 3L, 2L, 2L, 2L, 
2L, 2L, 3L, 2L, 3L, 4L, 4L, 4L, 4L, 3L, 2L, 3L, 2L, 1L, 4L, 1L, 
4L, 1L, 4L, 2L, 2L, 3L, 3L, 2L, 4L, 1L, 4L, 4L, 4L, 3L, 3L, 3L, 
2L, 1L, 4L, 3L, 3L, 1L, 4L, 1L, 2L, 2L, 3L, 3L, 4L, 2L, 2L, 3L, 
3L, 2L, 2L, 2L, 1L, 1L, 2L, 1L, 1L, 4L, 1L, 1L, 1L, 2L, 2L, 3L, 
2L, 3L, 2L, 3L, 3L, 4L, 2L, 1L, 4L, 1L, 1L, 3L, 2L, 2L, 2L, 3L, 
1L, 1L, 1L, 1L, 3L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 3L, 3L, 4L, 
4L, 3L, 4L, 4L, 4L, 4L, 3L, 3L, 1L, 4L, 4L, 1L, 4L, 4L, 1L, 3L, 
1L, 2L, 2L, 1L, 2L, 1L, 1L, 3L, 3L, 2L, 1L), .Label = c("ending", 
"mobile", "stem.first", "stem.second"), class = "factor")), .Names = c("freq", 
"class"), row.names = c(NA, -128L), class = "data.frame") 
```

正如我在上一篇文章中所读到的，[在](https://stackoverflow.com/questions/9661469/r-t-test-over-all-columns)R 中有不止一种方法可以做到这一点。我尝试使用`t.test`-function 和使用`pairwise.t.test`-function。

为了使用`t.test`，我通过要比较的类对数据框进行了子集化，并在子集上运行了后续的 t 检验。

```
ending.vs.mobile <- df[df$class=="ending"|df$class=="mobile",]
ending.vs.first <- df[df$class=="ending"|df$class=="stem.first",]
ending.vs.second <- df[df$class=="ending"|df$class=="stem.second",]
mobile.vs.first <- df[df$class=="mobile"|df$class=="stem.first",]
mobile.vs.second <- df[df$class=="mobile"|df$class=="stem.second",]
first.vs.second <- df[df$class=="stem.first"|df$class=="stem.second",]

t.test(ending.vs.mobile$freq ~ ending.vs.mobile$class, var.equal=T) 
t.test(ending.vs.first$freq ~ ending.vs.first$class, var.equal=T) 
t.test(ending.vs.second$freq ~ ending.vs.second$class, var.equal=T) 
t.test(mobile.vs.first$freq ~ mobile.vs.first$class, var.equal=T) 
t.test(mobile.vs.second$freq ~ mobile.vs.second$class, var.equal=T) 
t.test(first.vs.second$freq ~ first.vs.second$class, var.equal=T) 
```

据我了解（这里我可能错了），`pairwise.t.test`这里会更方便，因为我不需要创建所有子集并且可以在原始数据帧上运行它。

```
pairwise.t.test(df$freq, df$class, p.adjust.method="none", paired=FALSE, pooled.sd=FALSE) 
```

但是我在这里得到不同的结果，最明显的是比较结束与 stem.second: p=0.7 using`t.test`和 p=0.1 using `pairwise.t.test`。

这里有什么问题？我在哪里做过某事。错误的？

* * *

虽然问题本身解决了，但我认为它发生的原因让我有点偏执（不再相信自己）：只是通过打字`pooled.sd`而不是`pool.sd`我没有得到我期望的结果。这不是很容易出错吗？

在许多其他情况下，您可以键入变体，例如`bonf`or `bonferroni`、`fa()`or`factor()`等​​。但是这里`pooled.sd`完全被忽略了，尽管实际上是“pooled sd”。好的，如果你仔细阅读了输出的标题，你可以猜到它`pooled.sd`没有被识别，因为它仍然说“t tests with pooled SD”但是如果我什至不打印这个怎么办，例如当将输出管道传输到 self-写函数？有可能永远无法识别此错误。

我应该写信给 R 的一些开发人员，在未来的 R 版本中，两种拼写变体都应该有效吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T18:03:51.600

问题不在于 p 值校正，而在于（声明）方差假设。您已经`var.equal=T`在`t.test`通话和通话`pooled.sd=FALSE`中使用过`pairwise.t.test`。但是， 的论点`pairwise.t.test`是`pool.sd`，不是`pooled.sd`。更改此设置会产生与单个调用等效的 p 值`t.test`

```
pairwise.t.test(df$freq, df$class, p.adjust.method="none", 
                paired=FALSE, pool.sd=FALSE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:17:31.100

这里没有错。您正在进行不同的测试，因为`pairwise.t.test`对 p 值进行了更正 - 以调整您正在进行多重比较的事实。

（简而言之，如果您进行多重比较，则会增加发现虚假结果的机会。对此进行调整。）

的帮助`?pairwise.t.test`将指向您`?p.adjust`，您可以在其中找到更多详细信息。

（或者你可以阅读那种无懈可击的智慧字体：[http](http://en.wikipedia.org/wiki/Multiple_comparisons) ://en.wikipedia.org/wiki/Multiple_comparisons ）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:27:26.480

在获得显着结果后，您需要具有多重比较过程的单因素方差分析。此外，您的数据可能没有配对；例如在一个人内进行的测试前、测试后测量，每个人的数据都是配对的。

# c++ - 错误 LNK2019 简单链表实现

> ID：11454523
> 
> 赞同：0
> 
> 时间：2012-07-12T14:51:26.453
> 
> 标签：c++, lnk2019

我正在实现一个简单的链接列表，但我不断收到 LNK2019 错误，我将代码简化到最低限度以跟踪问题，但我不断收到它。我正在使用 Visual Studio 2010。我的头文件是：

```
#ifndef __TSLinkedList__H__
#define __TSLinkedList__H__

#if _MSC_VER > 1000
#pragma once
#endif // _MSC_VER > 1000

#include "LinkedNode.h"

template <class T>
class LinkedList
{
public:
LinkedList(void);
~LinkedList(void);
protected:
LinkedNode<T> * head;
}; 
```

实现文件为：

```
#include "StdAfx.h"
#include "LinkedList.h"

template <class T>
LinkedList<T>::LinkedList(void)
{
head = NULL;
}
template <class T>
LinkedList<T>::~LinkedList(void)
{
} 
```

主要功能是：

```
#include "stdafx.h"
#include "stdlib.h"
#include "LinkedList.h"

int _tmain(int argc, _TCHAR* argv[])
{
LinkedList<int> mList;
system("PAUSE");
return 0;
} 
```

我收到了这个错误：

错误 1 ​​错误 LNK2019: símbolo externo "public: __thiscall LinkedList::~LinkedList(void)" (??1?$LinkedList@H@@QAE@XZ) in function _wmain

我得到与构造函数相同的错误。有趣的是它指向了_wmain，而我的main函数叫做_tmain。我已经尝试将子系统链接器从 /SUBSYSTEM:WINODWS 更改为 /SUBSYSTEM:CONSOLE，但它已经设置为 /SUBSYSTEM:CONSOLE。显然我的实现远不止于此，但我把它全部撕掉来跟踪这个问题。帮助wpuld被欣赏，这让我发疯。我是 C++ 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:51:57.903

将函数实现移动到头文件。

为了生成专门化的代码，编译器必须具有可用于每个翻译单元的函数的定义。

```
#ifndef __TSLinkedList__H__
#define __TSLinkedList__H__

#if _MSC_VER > 1000
#pragma once
#endif // _MSC_VER > 1000

#include "LinkedNode.h"
template <class T>
class LinkedList
{
public:
    LinkedList(void);
    ~LinkedList(void);
    protected:
    LinkedNode<T> * head;
};

template <class T>
LinkedList<T>::LinkedList(void)
{
head = NULL;
}
template <class T>
LinkedList<T>::~LinkedList(void)
{
}

#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:02:33.073

编译器不会编译您的模板类成员定义，因为它们不包含在任何编译单元中。

但是，它*确实*看到使用了一些成员，因此它将为这些成员生成“未定义”符号。

然后是链接器，试图将未定义的符号与其中一个编译目标文件中定义的一些符号相匹配。

但是，`LinkedList::~LinkedLis()`析构函数尚未编译，因此它不在任何目标文件中，这就是链接器所抱怨的。

您可以通过以下方式解决此问题

*   包括主源文件中的定义文件，
*   或将定义粘贴到模板头文件中，
*   或者包括模板头文件底部的模板实现文件（我最喜欢的）

# android - 我应该如何为 qHD（540x960 分辨率，256 dpi）屏幕提供替代资源

> ID：11454524
> 
> 赞同：2
> 
> 时间：2012-07-12T14:51:27.637
> 
> 标签：android, android-layout

我为我的应用程序设计了附加屏幕。该应用程序针对 android 1.6 及更高版本。目前，该应用程序在大多数 hdpi 和 mdpi 设备上运行，少数设备具有一些奇怪的分辨率，例如 1024x600 和 169 dpi、1024x600 和 179 dpi、1024x600 和 240 dpi。我提供了替代布局来支持下面提到的文件夹中的多个屏幕。

**布局：**默认布局资源。
**layout-hdpi：**用于 hdpi 屏幕。我的项目中很少有布局需要为此专门优化。
**layout-mdpi：**用于 mdpi 屏幕。我的项目中很少有布局需要为此专门优化。
**layout-large：**大屏幕的默认布局资源。
**布局-大-hdpi：**分辨率为 1024x600 的 hdpi 屏幕的布局资源
**layout-sw400dp-v11：**这主要用于 7" 平板电脑。只有运行 Honeycomb 或更高版本的设备才能识别。

现在我还需要添加对 qHD 屏幕的支持（540x960 具有 256 dpi 或类似） . 下面是我需要设计和添加对 qHD 屏幕支持的示例屏幕。此屏幕截图是在 HTC Incredible S 上拍摄的，分辨率为 480x800，240 dpi。

![在此处输入图像描述](../Images/e8bfa2869902493c5e6a2c850fdf7e06.png)

我已经为 qHD 屏幕设计了布局，以便在这些屏幕上看起来也一样。

现在，我有以下问题：

1\. 考虑到我需要支持 hdpi、mdpi 和上面提到的奇数屏幕，我是否有正确的目录结构来提供替代资源？如果没有，我应该如何为这些屏幕提供替代资源？我真的需要设计单独的文件，以便 UI 在多个屏幕分辨率和密度下看起来都一样。

2\. qHD 屏幕具有 256 dpi。这意味着这些屏幕是 hdpi 屏幕。我已经有 hdpi 屏幕的资源，在大多数设备上看起来都如上。但是当我在 qHD 屏幕上查看它时，它看起来像下面的屏幕截图。那么，如何为 qHD 屏幕提供替代资源，使其不会影响我当前在大多数设备上显示良好的布局资源？

![在此处输入图像描述](../Images/c8c80038c295320d09fc4870c6ee04ca.png)

@Espiandev
一个 qHD、hdpi 设备具有 360x640 的独立于显示像素 (DIP) 的屏幕尺寸，而 Incredible S 的屏幕尺寸为 320x533，因此某些图像相对于其他图像而言在屏幕上方较高。所以本质上，qHD 设备可以在每个屏幕上显示比 Incredible S 更多的东西。有关 DIP 的解释和更多提示，请参见此处
——感谢您的洞察力。我知道这一点。我也读过 Dianne Hackborn 的帖子；“管理屏幕尺寸的新工具” - [http://android-developers.blogspot.in/2011/07/new-tools-for-managing-screen-sizes.html](http://android-developers.blogspot.in/2011/07/new-tools-for-managing-screen-sizes.html)

从它的样子来看，您目前正在使用目标/增益/去部分上方的一些边距或填充，我建议将它们的重力更改为底部（即将它们与屏幕底部对齐），然后使用项目下方的边距或填充。
-- 不，我没有为这些部分使用填充或边距。它是一种相对布局，其中目标/增益/多走按钮位于该仪表带按钮下方。正如您建议将重力设置为底部并具有底部填充；是的，我也试过了，但是那个米带按钮和这些圆圈之间的距离增加了，我必须修改这些眼镜之间的尺寸和边距，下面的按钮和创建不同布局文件的米带按钮。当您在小屏幕设备上查看此屏幕时，视图将重叠，因为小屏幕设备可以显示较少的视图。

但我会努力使您的应用程序适应屏幕，而不是像这样尝试划分屏幕尺寸，因为您不应该真的需要单独的 mdpi、hdpi 等布局资源
- 我同意通常我不应该需要mdpi 和 hdpi 屏幕的单独布局。但这里的要求是屏幕在所有屏幕上看起来应该完全相同。就像，那个黄色圆圈内的所有视图都不应该超出那个圆圈。中心的那个按钮应该总是在中心。此外，在米尺按钮顶部和下方的那三个小圆圈的相对大小应该相同。这让我别无选择，只能为 mdpi 和 hdpi 屏幕创建不同的布局。

我为 qHD 屏幕创建了不同的布局文件。现在我的问题是我应该把它放在哪里，以便 qHD 设备将使用该文件，而其他设备将继续像现在一样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:12:42.707

qHD、hdpi 设备具有 360x640 的显示独立像素 (DIP) 屏幕尺寸，而 Incredible S 的屏幕尺寸为 320x533，因此某些图像相对于其他图像位于屏幕上方。所以本质上，qHD 设备可以在每个屏幕上显示比 Incredible S 更多的东西。有关DIP 的说明和更多提示，请参见[此处。](http://developer.android.com/guide/practices/screens_support.html#overview)

在 Incredible S 和 qHD 设备上，没有真正的方法可以使 UI 看起来完全相同。与 iOS 设备不同，屏幕尺寸变化很大。从它的样子来看，您目前正在使用目标/增益/去部分上方的一些边距或填充，我建议将它们的重力更改为底部（即将它们对齐到屏幕底部），然后使用项目下方的边距或填充。这样，它有望与您的午餐/晚餐盒保持一致。如果您发布您的 XML 文件，这将有助于诊断问题。

在Android 3.2之前，我不相信有办法区分以上两种情况，但是在3.2之后，可以使用swXXXdp（最短宽度）属性。但我会努力让您的应用程序适应屏幕，而不是像这样尝试划分屏幕尺寸，因为您不应该真的需要单独的 mdpi、hdpi 等布局资源。

# sql - SQL Server 2000 Group By 在提供聚合函数时要求它

> ID：11454528
> 
> 赞同：0
> 
> 时间：2012-07-12T14:51:39.917
> 
> 标签：sql

我一定遗漏了一些明显的东西，但为什么会出现以下情况

```
SELECT     c.ContractID, max( cs.ContractStatusCreated)
FROM       dbo.NMPT_Contract AS c INNER JOIN
           dbo.NMPT_ContractStatus AS cs ON c.ContractID = cs.ContractID INNER JOIN
           dbo.CMSS_Status AS s ON cs.StatusID = s.StatusID
group by  c.ContractID
having cs.ContractStatusCreated = MAX(cs.ContractStatusCreated) 
```

从 SQL Server 2000 返回以下内容？

> 消息 8121，级别 16，状态 1，行 1 列 'cs.ContractStatusCreated' 在 HAVING 子句中无效，因为它既不包含在聚合函数或 GROUP BY 子句中。

不是`MAX`聚合函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:53:07.950

错误：

消息 8121，级别 16，状态 1，行 1 列 'cs.ContractStatusCreated' 在 HAVING 子句中无效，因为它既不包含在聚合函数**或 GROUP BY 子句**中。

MAX 是聚合函数

但 ContractStatusCreated 不在 Group By 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:53:09.637

因为`cs.ContractStatusCreated`不在 group-by 子句中，所以它不知道从哪里获取数据。

更好的是，如果你按它分组，你最终会遇到一个`HAVING 1=1`条件，你`max(cs.ContractStatusCreated)`不会做你想做的事。我认为您需要一个自联接或子查询来找到要比较的最大值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:02:37.200

还没有检查这个，但你可以把你的'max'写成一个像这样的子查询：

```
select     ContractID, ContractStatusCreated
FROM       dbo.NMPT_Contract AS x INNER JOIN            
           dbo.NMPT_ContractStatus AS y ON x.ContractID = y.ContractID
where (x.ContractID, y.ContractStatusCreated) = (
    SELECT     c.ContractID, max( cs.ContractStatusCreated) 
    FROM       dbo.NMPT_Contract AS c INNER JOIN            
               dbo.NMPT_ContractStatus AS cs ON c.ContractID = cs.ContractID INNER JOIN            
               dbo.CMSS_Status AS s ON cs.StatusID = s.StatusID 
    group by  c.ContractID
) 
```

# git - git bundle 应该如何与子模块一起使用？

> ID：11454539
> 
> 赞同：8
> 
> 时间：2012-07-12T14:52:08.970
> 
> 标签：git, git-submodules

我正在使用 git bundle 来备份 git 存储库。在最新版本的 git 中，子模块的存储库元数据存储在父存储库的 .git/modules 中，而不是之前存储在子模块中的 .git 目录中。

当 git-bundle 在子模块中运行时，它会创建父 repo 的捆绑包，省略子模块。

任何人都可以阐明这一点？
如何制作子模块的 git 包？

参考： [关于 git 邮件列表的问题](http://git.661346.n2.nabble.com/git-bundle-behaves-unexpected-with-submodules-td7562250.html)

**编辑**：

在阅读了 sschuberth 它的工作原理后，我编写了一个脚本来测试并验证它是否工作。我有一个备份脚本，它依赖于验证 .git**目录**的存在，以便知道它是否在存储库的顶级目录中，因此当子模块开始使用 .git**文件**时它会中断。如果有人知道推荐的方法是保证您位于存储库的顶级文件夹中，我很感兴趣。我不知道我是怎么错过的。

以防它可能对必须为子模块编写测试脚本的人感兴趣，这是我使用的脚本：

```
#!/bin/bash

git --version

mkdir super
mkdir subRemote

touch super/superFile.txt
touch subRemote/subFile.txt

cd super

   git init
   git add --all
   git commit -am"Initial commit"

cd ..

cd subRemote

   git init
   git add --all
   git commit -am"Initial commit"

cd ..

cd super

   git submodule add ../subRemote/.git
   git add --all
   git commit -am"added submodule"
   git submodule update
   echo -e "\ngit log in super:"
   git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative --all

   cd subRemote

      echo -e "\ngit bundle:"
      git bundle create ../../submoduleBundle --all --remotes

   cd ..

cd ..

git clone --mirror submoduleBundle bundledSub/.git

cd bundledSub

   git config core.bare false
   git config core.logallrefupdates true
   git remote rm origin
   git checkout

cd ..

#------------------------------------------------

cd super

   echo -e "\nfiles in super":
   ls -alh

cd ..

cd super/subRemote

   echo -e "\nfiles in super/subRemote":
   ls -alh

cd ../..

cd bundledSub

   echo -e "\nfiles in bundledSub":
   ls -alh

cd .. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:17:02.117

您确定运行`git submodule update`成功并且子模块中的`.git` **文件**（不是目录）存在吗？在我的测试中，捆​​绑子模块适用于 1.7.9.6 版本。

如果由于某种原因它仍然失败，解决方法是将子模块的存储库克隆到它自己的工作树中并`git bundle`从那里运行（对于超级项目中所示的提交`git submodule status`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:20:03.367

我不需要这样做，但是我怀疑您以与通常相同的方式执行此操作 - 捆绑子目录（如果它们有您需要发送的更改），然后捆绑父存储库。

子模块只是另一个 git 存储库。

# android - 退出phonegap/返回Android

> ID：11454540
> 
> 赞同：0
> 
> 时间：2012-07-12T14:52:11.977
> 
> 标签：android, cordova, exit-code

我的问题有点奇怪，但它真的让我很生气......

我有一个 Android 应用程序，当您点击按钮时，它会加载

```
 loadUrl("file:///android_asset/www/index.html"). 
```

现在一切都很好。在 Web 应用程序中完成我的工作后，我想回到我的 Android 应用程序，从该应用程序开始我的网站。
更具体地说，我希望当用户点击 html 页面中的按钮时，它会关闭该页面并返回：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setBooleanProperty("keepRunning", false);  
    setContentView(R.layout.activity_main); 
```

对不起，愚蠢的问题，但我不知道如何更好地形成它。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:13:50.990

您需要使用在 v1.9.0 [http://docs.phonegap.com/en/1.9.0/guide_cordova-webview_android.md.html#Embedding%20Cordova%20WebView%20on%20Android中发布的 Cordova WebView](http://docs.phonegap.com/en/1.9.0/guide_cordova-webview_android.md.html#Embedding%20Cordova%20WebView%20on%20Android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:58:55.720

这适用于 Android 和 iOS：

```
window.history.go( -( history.length - 1 ) ); 
```

但是，一旦你回来，结果是不可预测的。有时PhoneGap处于一种奇怪的状态，没有办法刷新它。

经过很多头痛和尝试很多事情后，我得出的结论是最好永远不要离开 PhoneGap `UIWebView`。相反，使用了[ChildBrowser Plugin](https://github.com/alunny/ChildBrowser)。

# eclipse - 使用 Eclipse，是否有“全部”宏/功能

> ID：11454541
> 
> 赞同：-2
> 
> 时间：2012-07-12T14:52:12.763
> 
> 标签：eclipse, eclipse-plugin

首先，PLEASE PLEASE PLEASE——这不是关于编辑的宗教讨论。我只想要一个“如何”的答案。

也就是说，在数据被视为矩阵的编辑器中（有时称为东正教编辑器，示例：SlickEdit、Xedit、E/PM 和 eclipse 中的 switch+alt+A 块模式）而不是分成行的长字符串（ Western Orthodox Editors）可以有一个函数，通常称为“ALL”，它接受一个搜索参数并只显示包含该搜索的所有行。因此，如果您有如下文件：

```
11 22 33 44 55
22 33 44 55 66
33 44 55 66 77
77 88 99 00 11 
```

并为“11”发出 ALL，您只会看到其中包含 11 的行：

```
11 22 33 44 55
77 88 99 00 11 
```

其他线将被隐藏，最重要的是，应用的任何编辑都只会作用于可见线，而不是隐藏线。

那么，是否有一个工具、插件、内置等等，可以为 Eclipse 做这件事？就此而言，MS/VS 和 NetBeans？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:00:34.787

我不知道这样的编辑器功能，但您可以指定字符串进行文件搜索，搜索视图将为您提供包含该字符串的行的列表。只是列表显示为树而不是纯文本块。

# graph - 创建具有优先级的二维堆积柱形图

> ID：11454544
> 
> 赞同：1
> 
> 时间：2012-07-12T14:52:26.017
> 
> 标签：graph, excel, excel-formula, vba

我要做的是创建一个 2d 堆叠图表，其中我的系列的位置意味着它们在队列中的位置（位置 1 - 作为堆叠列的最上面的部分是最后得到服务的，位置 2 - 是堆叠柱的底部将首先向上）。

我已将数据格式化为如下所示（但如果解决方案需要，可以轻松更改）：

> ```
> Task 1   Task 2   Task 3   <- x-axis  
> A  100   B 400    B 510    <- This row is position 1      
> B  200   A 200    A 300    <- This row is position 2   
> ^-Legend 
> ```

我遇到的问题是，我希望所有任务都在同一个图表上，而 Excel 并没有在每个 x 处识别 A 和 B 的位置。它只是从第 1 列假设第 2 行是 A，第 3 行是 B 和不会根据 A/B 键在每个后续列中进行调整。我想知道是否有办法做到这一点。

回顾一下，是否可以获得具有多个 x 值的 2d 堆叠图表，以识别每个唯一 x 值处的图例键的位置（无论它应该在列的顶部还是底部）。任何解决方案，无论是 VBA 还是表格内公式，我都没有运气。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:50:41.307

```
'Run this macro from the sheet containing your data, after highlightling the data.
Sub Macro3()

  'The below code assumes that you have already selected
  'the columns containing your data and that the first column,
  'and every 2nd column after that contains your legend keys.
  Dim rng As Range
  Set rng = Selection

  Dim colNum As Integer
  Dim rowNum As Integer
  Dim strLegend As String
  Dim rowStart As Integer
  Dim colStart As Integer
  Dim strSeries As String
  Dim i As Integer
  Dim seriesNum As Integer
  Dim shtName As String

  rowStart = rng.Row
  colStart = rng.Column
  shtName = ActiveSheet.Name & "!"

  'Creates an empty chart...
  ActiveSheet.Shapes.AddChart.Select
  '...of type StackedColumn.
  ActiveChart.ChartType = xlColumnStacked

  seriesNum = 0
  'Select all the cells that match the legend in the first column.
  For rowNum = 0 To rng.Rows.Count - 1
    strLegend = Cells(rowStart + rowNum, colStart).Value
    strSeries = "=" & shtName & Cells(rowStart + rowNum, colStart + 1).Address
    For colNum = 2 To rng.Columns.Count - 1 Step 2
        For i = 0 To rng.Rows.Count - 1
            If Cells(rowStart + i, colStart + colNum).Value = strLegend Then
                strSeries = strSeries & "," & shtName & Cells(rowStart + i, colStart + colNum + 1).Address
                Exit For
            End If
        Next
    Next
    'Create a new series.
    ActiveChart.SeriesCollection.NewSeries
    seriesNum = seriesNum + 1
    'Set the legend.
    ActiveChart.SeriesCollection(seriesNum).Name = strLegend
    'Set the X axis labels to nothing, so the default is used.
    ActiveChart.SeriesCollection(seriesNum).XValues = ""
    'Set the series data.
    ActiveChart.SeriesCollection(seriesNum).Values = strSeries
  Next
  'An extra series gets added automatically???
  'This code removes it.
  If ActiveChart.SeriesCollection.Count > rng.Rows.Count Then
    ActiveChart.SeriesCollection(rng.Rows.Count + 1).Delete
  End If
End Sub 
```

此代码要求您的图例值和数值分别位于单独的列中，如下所示。此示例中未使用标签“任务 1”等。

```
A | 100 | B | 400 | B | 510 
B | 200 | A | 200 | A | 300 
```

# jquery - jQuery Validate：覆盖预先存在的错误标签

> ID：11454548
> 
> 赞同：1
> 
> 时间：2012-07-12T14:52:42.663
> 
> 标签：jquery, validation

几个小时以来一直在用文档打破我的头脑！

侧面： [http ://adam-sites-for-clients.info/set-up/](http://adam-sites-for-clients.info/set-up/)

插件： [http ://docs.jquery.com/Plugins/Validation/](http://docs.jquery.com/Plugins/Validation/)

根据此处此插件的参考指南，我创建了要隐藏并在验证时显示的错误标签：docs.jquery.com/Plugins/Validation/Reference#Error_message_display

它说：“在标记中提供时，它们会相应地显示和隐藏，否则会按需创建。”

我已经在标记中提供了它们，那么为什么还要创建它们呢？为什么我现有的不切换？

谢谢！

PS。那是输入：

```
<input id="name" class="textbox required" type="text" name="name" /> 
```

和错误标签：

```
<label class="error" for="name">*נא להזין שם</label> 
```

# asp.net - 搜索动态 Label.ID 以匹配查询结果

> ID：11454550
> 
> 赞同：0
> 
> 时间：2012-07-12T14:52:49.740
> 
> 标签：asp.net, vb.net, sql-server-2005

我目前正在我的 ASP 网站上根据月份的日期动态生成标签 ID。

例如 labelSunday1.ID = "01/07/12"

我还从 SQL Server 中提取数据，并将各种值存储在字符串中。例如日期 = resultDate，股票 = resultStock

但是，我想在页面上进行查找，查找与查询结果匹配的任何标签 ID，然后在标签文本中显示库存数量。

无论如何我可以搜索整个页面以查看标签 ID 是否与 resultDate 字符串匹配？我宁愿动态地进行这种搜索，因为将来我希望在页面上动态生成许多标签。

我的思路是：

```
IF Me.Label.ID = resultDate then
me.label.text = resultStock 
```

但这不起作用：C

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T15:13:34.027

答案是使用“01_01_2013”​​作为标识符。

# java - Eclipse中的动态代码模板？

> ID：11454552
> 
> 赞同：2
> 
> 时间：2012-07-12T14:52:52.890
> 
> 标签：java, eclipse, templates

我的应用程序包含许多实现接口的对象。

这些对象都具有相同的功能，它们之间主要取决于类变量的数量及其类型。

我考虑创建一个通用模板，它可以只填充几个参数（类的名称、每个变量的名称及其类型）。

这是一个（非常）简单的例子（有两个参数）：

```
 public class myClass implements anotherClass {

    private int a;
    /** Image reference */
    private int myInt;    

    /** Security elements */
    private String myString;

    public myClass() {
    }

    public myObj getValueObject() {
        myObj value = new myObj();

        value.setmyInt(myInt);
        value.setmyString(myString);

        return value;
    }    

    public String getmyInt() {
        return myInt;
    }

    public void setmyInt(String myInt) {
        this.myString = myString;
        if (a == 10) {
            a =0;
        }
    }    

    public String getmyString() {
        return myInt;
    }

    public void setmyString(String myString) {
        this.myString = myString;
        if (a == 10) {
            a =0;
        }
    }    

    public int doIt() {
        int number = 0;
        number = number + toNumber(myInt);
        number = number + toNumber(myString);
        return number ;
    }    

} 
```

正如我所说，类之间的唯一区别是变量的数量、名称和类型。

我查看了 Eclipse 中的代码模板，但它似乎是简单（但有效）的字符串替换。我想要更多，因为它需要根据输入变量的数量编写或多或少的代码。

我可以自己用字符串替换在 Java 中硬编码一些东西，但我想知道是否没有工具可以帮助我完成任务。

我会用我的方法原型和输入变量来提供它。

任何提示表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:57:47.877

有许多模板和代码生成库。最流行的一种是[Apache Velocity](http://velocity.apache.org/)。许多 Eclipse 项目使用[JET](http://www.eclipse.org/articles/Article-JET/jet_tutorial1.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:52:02.447

我发现[JDynamiTe 可以满足](http://jdynamite.sourceforge.net/doc/jdynamite.html)我的要求。

我用它来动态生成给定输入列表的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T09:23:20.943

虽然已经晚了，但我认为它可能会帮助其他人。尝试使用带有模板的[Fastcode](http://3pintech.com/products/fast-code/templates.htm#typesofsnippets)插件，它可以帮助您生成这种代码。

# android - 将项目添加到列表时出现 NullPointerException

> ID：11454555
> 
> 赞同：0
> 
> 时间：2012-07-12T14:53:00.400
> 
> 标签：android

大家好，

当我想将一个项目添加到列表时，我遇到了 NullPointerException 的问题，如下所示：

```
public List<SearchResponse> sortMPGListViewForNA(List<SearchResponse> response)
    {
        List<SearchResponse> list = response;
        List<SearchResponse> tempMPG = null, tempPrice = null, tempRating = null;
        for(int i=0;i<response.size();i++)
        {
            if(response.get(i).years.get(0).mpg.equalsIgnoreCase("n/a"))
            {
                tempMPG.add(response.get(i));
                list.remove(i);
            }
            if(response.get(i).years.get(0).price.equalsIgnoreCase("n/a"))
            {
                tempPrice.add(response.get(i));
                list.remove(i);
            }
            if(response.get(i).years.get(0).rating.equalsIgnoreCase("n/a"))
            {
                tempRating.add(response.get(i));//NPE Occurs Here
                list.remove(i);
            }
        }
        response.addAll(tempMPG);
        response.addAll(tempPrice);
        response.addAll(tempRating);
        return response;
    } 
```

请向我建议任何有关相同的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:54:39.463

您需要初始化 tempMPG、tempPrice 和 tempRating：

```
tempMpg = new ArrayList<SearchResponse>();
tempPrice = new ArrayList<SearchResponse>();
tempRating = new ArrayList<SearchResponse>(); 
```

# javascript - 调用具有不同变量的递归函数

> ID：11454561
> 
> 赞同：2
> 
> 时间：2012-07-12T14:53:10.187
> 
> 标签：javascript

我是 JavaScript 新手。我正在做一个反馈表，其中有 12 个单选按钮需要单独验证，当我单击特定值时将显示一个文本区域。

在这里，当我单击该按钮时，应该强制输入我正在显示的文本区域（例如：当我在结果问题中单击失败选项时，我应该提及他在哪个主题中通过该文本区域失败。类似的东西） .

为此，我编写了代码，它与第一个单选按钮一起工作正常，但无法为剩余的按钮递归调用它。

我需要在函数中递归调用此代码，但我的变量每次都需要更改。就像第二次一样，我应该使用 option2，text2，同样在下一次调用 option3，text3 等。

```
var option = $("#form1 input[@name=radio1]:checked").val();
var text = document.getElementById("text1").value;

if (!$("#form1 input[@name=radio1]:checked").val()) {
    alert("Please fill all the fields");
    return false;
    errs++;
} else if (option == "3" && trim(text) == "") {
    alert("Please enter comments.");

    return false;

} 
```

需要为 var option1 到 option10 和相同的 text1 到 text10 调用这段代码。喜欢：

```
var option2 = $("#form1 input[@name=radio2]:checked").val();
var text2 = document.getElementById("text2").value; 
```

这应该在第一个单选按钮完成后立即调用。

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:07:02.440

“递归”在这里是错误的词。您只想遍历所有元素。

获取所有收音机，然后循环播放它们。然后获取 ID，以及与该 ID 关联的所有字段。

我假设你正在使用 jQuery，所以这里有一个例子：

```
// Note: The "@" is not needed in jQuery
var radios = $("#form1 input[name^='radio']"); // "^=" means "starts with"
radios.each(function(){
    var id = this.name.replace('radio', ''); // this will get the number, eg: 1
    var option = $(this).val();  // get radio's value
    var text = $('#text'+id).val();  // get textX's value

    if(!$(this).is(':checked')){ // check if radio is checked
        alert("Please fill all the fields");
        errs++;  // make sure to do this before "return false"
        return false;  // break the .each loop
    }
    else if (option == "3" && trim(text) == "") {
        alert("Please enter comments.");
        return false;
    }
}); 
```

# visual-studio-2008 - Crystal Reports 子报表分组

> ID：11454565
> 
> 赞同：0
> 
> 时间：2012-07-12T14:53:23.803
> 
> 标签：visual-studio-2008, crystal-reports, crystal-reports-2010

这个问题是关于水晶报告子报告分组我有大约 10 个子报告，每个报告都与一个表链接（这也是子报告）。

表格1

```
EMPID EmpName EmpSal EmpDesg
1     srik    12222  sssss
2     sri     22222  aaaaa
3     sss     3333   dddd 
```

表2

```
EMPID  Accontno  BankName  Bal
1      234444     HDFC     12
2      5555555    ABC       1
3      333333     jjj       1 
```

表3

```
EMPID  PrevOrg  Loc    EXp
1      ssss     Bang     2
2      ABC      Cal      3   
3      BCD      HYd      5 
```

我还有 7 个带有外键 EMPID 的表。我设计的每个表都作为子报告。

现在我想以这样一种方式显示我的报告，即一个地方的所有 EMPID 1 记录都遵循 EMPID 2 记录....

预期的O / P：离开标题

```
1     srik    12222  sssss(Table1)
1     234444  HDFC     12(Table2)
1     ssss     Bang     2(Table3)

2     sri       22222      aaaaa (Table1)
2     5555555    ABC       1     (Table2)
2     BC         Cal       3     (Table3)

3      sss       3333    dddd  (Table1)
3      333333    jjj       1   (Table2)
3      BCD       HYd      5   (Table3) 
```

如何以上述格式对来自不同子报告的表格进行分组。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:21:20.213

1.  将表 1 添加到主报告中。
2.  删除包含表 1 的子报表（您不需要它）
3.  将表 1 中的相关字段添加到主报告的详细信息部分
4.  为每个剩余的子报告添加详细信息部分（插入下面的部分）。部分详细信息 A 将包含您在步骤 3 中添加的字段。详细信息 B..详细信息 J 将包含每个剩余的子报告（每个部分中的一个）
5.  将主报表中的 EMPID 链接到每个子报表中的 EMPID
6.  在 EMPID 的主报告中插入一个组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:05:43.147

非常感谢克雷格解决方案正在工作

关闭线程前的小信息要将子报告链接到主链接，请按照以下步骤操作：

右键单击子报表，从对话框中选择“更改子报表链接”打开对话框 将我的案例中的公共字段“EMPID”从“可用字段”->“归档链接到：

除了这个，不要改变任何其他东西。

# python - 我的 Python 程序无法正常终止？

> ID：11454567
> 
> 赞同：0
> 
> 时间：2012-07-12T14:53:25.537
> 
> 标签：python, windows

当我使用命令终止程序时，它不会终止，而是假设我说“不”时要打开另一个程序这是我的代码：

```
import getpass
print 'Hello', getpass.getuser(), ', welcome!'
do = raw_input ('What program would you like to open? ')
if do.lower() == 'browser' or 'internet' or 'Chrome' or 'Google chrome':
    import webbrowser
    webbrowser.open ('www.google.com')
    oth = raw_input ('Are there any others? ')
    if oth.lower() == 'yes' or 'ye' or 'yeah':
        oth2 = raw_input ('Please name the program you would like to open! ')
else:
    import sys
    sys.exit() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:57:08.073

看着：

```
if do.lower() == 'browser' or 'internet' or 'Chrome' or 'Google chrome': 
```

在这里，您有几个始终评估为 True 的语句；'internet' 或 'Chrome' 或 'Google chrome' 中的每一个都是一个非空字符串。有什么价值观并不重要`do.lower()`。这意味着 python 将该行视为等效于 if something 或 True。

您想要做的是使用`in`运算符来测试是否`do`是几个选项之一：

```
if do.lower() in ('browser', 'internet', 'chrome', 'google chrome'): 
```

请注意，我将列表中的*所有*选项都小写了以进行测试；毕竟，你的输入也是小写的，所以它永远不会匹配“Chrome”；它将是“铬”或其他东西。

这同样适用于您的`if oth.lower() == 'yes' or 'ye' or 'yeah':`生产线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:55:23.217

```
if oth.lower() == 'yes' or 'ye' or 'yeah': 
```

你的问题在上面一行。

在python中，字符串的真值取决于它是否为空。例如`bool('')`是`False`。 `bool('ye')`是`True`。

你可能想要这样的东西：

```
if oth.lower() in ('yes','ye','yeah'): 
```

因此，您在浏览器检查中遇到了同样的问题。

# .net - .Net 应用程序的 Oracle.DataAccess dll

> ID：11454571
> 
> 赞同：0
> 
> 时间：2012-07-12T14:53:34.197
> 
> 标签：.net, oracle, odp.net

我有一个在 64 位 Windows 2008 服务器上运行并通过 ODP.net 访问 Oracle 11g 的 C# 控制台应用程序。它已经工作了大约6个月。

我在我的计算机上编译程序，将构建设置设置为“任何 CPU”。6 个月前，我在 Windows 服务器上安装了适当的 64 位 Oracle dll 并且从未替换它 - 我只替换了控制台应用程序的 exe。

我昨晚更新了它 - 现在我收到了一个 BadImageFormat 异常，并显示找不到 Oracle 程序集的消息，这通常意味着我有错误的 dll 编译包。我确认并且我仍在使用原始的 Oracle dll。我还确认我正在我的服务器上编译到“任何 CPU”。

我什至尝试过重新编译和重新加载并找到原始 Oracle dll 的来源并重新加载。

有没有人见过这个？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:10:43.177

所以我在反复试验后发现了这一点。

原来在某个时候我已经将我 PC 上的 ODP 版本更新到了版本 4 .. *，但服务器上的版本是 2* .. 虽然我正确计算了 32 位和 64 位，但它被编译为期望一个特定的版本。

出于某种原因，我不能只是将新的 DLL 复制到服务器上。我必须编译引用 4.* 64 位 dll 的应用程序，然后我可以将所有内容加载到服务器并让它工作。然后我必须删除引用并重新引用 32 位才能继续在我的 PC 上工作。烦人，但它有效。

# c# - C# 使用 Kinect 模拟多点触控

> ID：11454572
> 
> 赞同：4
> 
> 时间：2012-07-12T14:53:39.330
> 
> 标签：c#, kinect, multi-touch

我有一个 Kinect 应用程序，我可以生成 1-4 个不同的屏幕点（左/右手最多 2 人），我希望能够将每个`Point`点作为多点触控消息发送到应用程序。

我目前正在使用`SendInput`发送鼠标移动、鼠标按下和鼠标向上消息，但是 AFAIK，它不支持这些`WM_TOUCH`消息。

有谁知道在 C# 中发送多点触控消息的简单方法？作为测试，我希望能够在 MS Paint 中使用 Kinect，并用双手绘画（以及风的所有颜色）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:04:03.490

您想要的是[将消息发送](https://stackoverflow.com/questions/5083954/send-message-in-c-sharp)到相关窗口。您需要撰写的信息就是[`WM_TOUCH`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317341%28v=vs.85%29.aspx)信息。`WM_TOUCH` [您可以在此处](http://social.msdn.microsoft.com/Forums/en-US/tabletandtouch/thread/e5c87731-86e4-4c25-9278-86cb0dd4ff8a/)找到一个非常有用的讨论主题。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:38:44.387

我认为这行不通，除非您通过将画布放下，然后在其上放置图像，然后是 4 个椭圆，例如：![图像1](../Images/4d4eaf61902ea98921c04315923a6367.png)，然后缩放来保存每个人手的 x 和 y 坐标。它们与人们关节的位置，（有关如何执行此操作，请参见[第 9 频道）。](http://channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals)然后我会将坐标复制到 a`double`然后设置它们的像素。这样做。

```
double person1hand1x = Canvas.GetLeft(person1hand1);
double person1hand1y =  Canvas.GetTop(person1hand1); 
```

然后，我将使用 Image 控件根据这些操作更改画布的颜色。*将`System.Drawing`资源导入您的项目，您将需要它来设置像素*然后创建一个`Bitmap`并将其像素设置为 x 和 y 所在的位置。这样做：

```
 Bitmap b = new Bitmap((int)image1.Width, (int)image1.Height); //set the max height and width

        b.SetPixel(person1hand1x, person1hand1y, person1hand1.Fill); //set the ellipse fill so they can keep track of who drew what

        image1.Source = ToBitmapSource(b); //convert to bitmap source... see https://stackoverflow.com/questions/94456/load-a-wpf-bitmapimage-from-a-system-drawing-bitmap/1470182#1470182 for more details
    }

    /// <summary>
    /// Converts a <see cref="System.Drawing.Bitmap"/> into a WPF <see cref="BitmapSource"/>.
    /// </summary>
    /// <remarks>Uses GDI to do the conversion. Hence the call to the marshalled DeleteObject.
    /// </remarks>
    /// <param name="source">The source bitmap.</param>
    /// <returns>A BitmapSource</returns>
    public static BitmapSource ToBitmapSource(this System.Drawing.Bitmap source)
    {
        BitmapSource bitSrc = null;

        var hBitmap = source.GetHbitmap();

        try
        {
            bitSrc = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(
                hBitmap,
                IntPtr.Zero,
                Int32Rect.Empty,
                BitmapSizeOptions.FromEmptyOptions());
        }
        catch (Win32Exception)
        {
            bitSrc = null;
        }
        finally
        {
            NativeMethods.DeleteObject(hBitmap);
        }

        return bitSrc;
    }

    internal static class NativeMethods
    {
        [DllImport("gdi32.dll")]
        [return: MarshalAs(UnmanagedType.Bool)]
        internal static extern bool DeleteObject(IntPtr hObject);
    } 
```

希望这可以帮助！*注意：我`ToBitmapSource`从[Load a WPF BitmapImage from a System.Drawing.Bitmap得到](https://stackoverflow.com/questions/94456/load-a-wpf-bitmapimage-from-a-system-drawing-bitmap/1470182#1470182)*

# .net - 无法加载程序集的元数据

> ID：11454575
> 
> 赞同：3
> 
> 时间：2012-07-12T14:53:41.870
> 
> 标签：.net, wpf, visual-studio-2010, networking

在移动到新的公司发行的 Windows 7 机器（来自老化的 XP 机器）后，我在 Visual Studio 2010 中的项目出现问题。

我将我的项目复制到新机器上，但 Visual Studio 似乎在加载 WPF 设计器时遇到问题。我有一个包含多个项目的解决方案，它构建良好并且运行良好，但是当我尝试在设计器中打开 WPF 窗口时，我收到一大堆错误消息，如下所示：

```
"unable to load the metadata for assembly 'Foo'. This assembly may have been 
downloaded from the web.  See http://go.microsoft.com/fwlink/?LinkId=179545\.  
The following error was encountered during load: Could not load file or assembly
'Foo, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its 
dependencies. The system cannot find the file specified." 
```

（请注意错误消息中的链接似乎没有任何用处）

我认为这里的问题是我的公司 IT 人员已经设置了 Windows 7 机器，因此“我的文档”实际上是一个本地缓存的网络驱动器。这不是一件坏事，因为现在只要我在公司网络上，我的所有文件都会备份，但我认为这让 Visual Studio 感到不安。

是否有解决方案不涉及放弃同步的网络驱动器（我喜欢）并将所有内容复制到本地硬盘驱动器（将备份放回我身上）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T18:50:08.583

在stackoverflow上找到的解决方案：

[由于网络上的 DLL，无法在 VS2010 中查看设计器](https://stackoverflow.com/questions/4099028/unable-to-view-designer-in-vs2010-due-to-dll-over-the-network?rq=1)

> 这似乎对某些人有用
> 
> “打开 devenv.exe.config（在我的机器上的 C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE 中），然后添加这个”
> 
> ```
> <runtime>
>     <loadFromRemoteSources enabled="true" />
> </runtime> 
> ```

为我工作。在公司环境中工作，而不是在我自己的机器上，同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:07:29.320

检查您是否对安装在旧 XP 机器的本地驱动器上的 dll 有一些参考。例如，引用仅安装在旧机器的 GAC 上的 dll！

此处描述了定位和绑定到程序集的过程：

[http://msdn.microsoft.com/en-us/library/yx7xezcf(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yx7xezcf(v=vs.100).aspx)

我建议你：

1.  检查GAC（**但您的评论似乎放弃了这一点**）
2.  在配置文件中查找 Codebase 标签
3.  要阅读此[http://msdn.microsoft.com/en-us/library/15hyw9x3.aspx](http://msdn.microsoft.com/en-us/library/15hyw9x3.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T13:09:11.797

当我的程序集既不在网络上，也不在共享驱动器上，也没有从互联网上下载时，我遇到了这个问题。我意识到这个问题是由于程序集所在的文件夹路径很长。

我有一条 120 个字符长的路径。我将我的程序集路径减少到 30 个字符（并删除了文件夹名称中的一些点）并且它起作用了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-03T18:51:40.897

值得一提的是，如果您出于任何原因清理解决方案，您也会收到此错误。下次构建时，应该在这种情况下修复它。

# grails - 如何使用 JOSSO 和 Spring Security 从 Grails 应用程序中的 LDAP 获取自定义属性？

> ID：11454576
> 
> 赞同：3
> 
> 时间：2012-07-12T14:53:45.553
> 
> 标签：grails, spring-security, ldap, josso

我已经成功地将 JOSSO 和 Spring Security 应用程序集成到我的 Grails 应用程序中（使用 LDAP 进行用户控制）。

由于 JOSSO 已经管理身份验证，因此我使用“预身份验证场景”进行 Spring Security 集成。这是我`resources.groovy`与 Spring Security 配置相关的内容：

```
def developmentEnvironment = {
  if (grailsApplication.config.grails.plugins.springsecurity.active) {

    preAuthenticatedAuthenticationProvider(PreAuthenticatedAuthenticationProvider) {
      preAuthenticatedUserDetailsService = ref('preAuthenticatedUserDetailsService')
    }

    preAuthenticatedUserDetailsService(PreAuthenticatedGrantedAuthoritiesUserDetailsService) {
    }

    j2eePreAuthFilter(J2eePreAuthenticatedProcessingFilter) {
      authenticationManager = ref('authenticationManager')
      authenticationDetailsSource = {
        J2eeBasedPreAuthenticatedWebAuthenticationDetailsSource authenticationDetailsSource ->
        mappableRolesRetriever = {
          SimpleMappableAttributesRetriever mappableAttributesRetriever ->
            mappableAttributes = ['app_admin', 'app_user', 'app_report', 'app_access'] as Set
        }
        userRoles2GrantedAuthoritiesMapper = {
          SimpleAttributes2GrantedAuthoritiesMapper grantedAuthoritiesMapper ->
            convertAttributeToUpperCase = "true"
        }
      }
    }

    preAuthenticatedProcessingFilterEntryPoint(Http403ForbiddenEntryPoint) {
    }

    preAuthenticatedExceptionTranslationFilter(ExceptionTranslationFilter) {
      authenticationEntryPoint = ref('preAuthenticatedProcessingFilterEntryPoint')
    }
  }
} 
```

一切正常，我可以访问 Grails 端的默认属性（例如使用`springSecurityService`）。

但是现在我有一个从 LDAP 获取自定义属性的新要求（例如`ownership`）。因此，我在 LDAP 下将这些属性添加到我的用户，据我所知 JOSSO 会自动获取这些属性，但我无法在 grails 应用程序端获取这些属性。有没有办法在 grails 方面获得这些属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:56:10.770

此类自定义属性应放置在 UserDetails 接口的实现或 User 类的扩展中。在[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/preauth.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/preauth.html)你可以找到这个场景应该如何实现 AuthenticationUserDetailsS​​ervice。

完成此操作后，您可以查询 SecurityContextHolder 以获取您的 UserDetails 实现

```
SecurityContextHolder.getContext().getAuthentication().getPrincipal() 
```

# java - BodyTagSupport 和 jsp:forward 与静态资源

> ID：11454578
> 
> 赞同：0
> 
> 时间：2012-07-12T14:53:52.510
> 
> 标签：java, jsp, taglib

我有很多带有 scriptlet 的 JSP，所以我需要使用 BodyTagSupport。

问题是标签内部有`<jsp:forward ..>`一个 .htm 页面，我得到了这个：

> java.lang.IllegalStateException: getOutputStream() 已为此响应调用。

如果我使用 jsp 一切都很好。

你知道为什么会这样吗？

（我使用 Apache Tomcat 作为服务器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:31:39.940

该标记将请求重定向到另一个 jsp 或 servlet，而您的 jsp 不能写任何其他内容。在标记之后，您的 jsp 必须返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:38:12.227

这是一个 Tomcat 错误。它应该从 Tomcat 7.0.30 开始修复。

# android - Android App 中的 Facebook/Twitter 授权

> ID：11454580
> 
> 赞同：1
> 
> 时间：2012-07-12T14:53:57.030
> 
> 标签：android, facebook, twitter, webview

我使用 Facebook sdk 在我的代码中授权 Facebook 帐户，并使用 Twitter4J 授权 Twitter 帐户。使用 Twitter4J 我必须创建 webview 并将焦点更改为该视图，然后处理响应。我的问题似乎是，如果用户授权 Twitter 帐户并在完成后尝试授权 Facebook 帐户，则 Facebook 的 webview 会不断加载并阻止用户使用该应用程序。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:56:25.923

原来是因为我在为 Twitter 制作 webview 时关闭了浏览器的 cookie。只需确保在保存帐户信息之前重新启用即可。

# python - python list_comprehension 获取多个值

> ID：11454582
> 
> 赞同：1
> 
> 时间：2012-07-12T14:54:00.203
> 
> 标签：python, list-comprehension

我想做下面的事情。我想要列表理解中条件表达式的输出。列表理解可以吗？

```
def why_bad(myvalue): #returns a list of reasons or an empty list it is good
   ...
   return [ reason1, reason2 ..]

bad_values = [ (myvalue,reasons) for myvalue in all_values if (reasons = why_bad(myvalue)) ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:01:15.533

你可以像这样创建你的列表理解，它返回值及其原因（或一个空列表）为什么它不好：

```
def why_bad(value):
    reasons = []
    if value % 2:
        reasons.append('not divisible by two')
    return reasons

all_values = [1,2,3]

bad_values = [(i, why_bad(i)) for i in all_values]
print bad_values 
```

为了扩展该示例，您可以为每个不同的条件检查添加 elifs，以了解为什么值不正确并将其添加到列表中。

回报：

```
[(1, ['not divisible by two']), (2, []), (3, ['not divisible by two'])] 
```

但是，如果 all_values 只有唯一值，您可以考虑创建字典而不是列表推导：

```
>>> bad_values = dict([(i, why_bad(i)) for i in all_values])
>>> print bad_values
{1: ['not divisible by two'], 2: [], 3: ['not divisible by two']} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:57:52.427

您可以使用嵌套列表推导：

```
bad_values = [value_tuple for value_tuple in 
                  [(myvalue, why_bad(myvalue)) for myvalue in all_values]
              if value_tuple[1]] # value_tuple[1] == why_bad(myvalue) 
```

或使用[`filter`](http://docs.python.org/library/functions.html#filter)：

```
bad_values = filter(lambda value_tuple: value_tuple[1],
                    [(myvalue, why_bad(myvalue)) for myvalue in all_values]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:02:01.570

不漂亮，但您可以尝试嵌套列表推导：

```
bad_values = [(v, reasons) for v in all_values 
                           for reasons in [why_bad(v)] if reasons] 
```

# javascript - 在 Node.js 重新启动时保持 setTimeout 和 setInterval

> ID：11454587
> 
> 赞同：10
> 
> 时间：2012-07-12T14:54:16.767
> 
> 标签：javascript, node.js, settimeout, setinterval

我使用 setTimeout 和 setInterval 为每个连接的用户设置了相当多的服务器端超时，这些超时可以持续 10-30 秒。如果 Node.js 实例在这些超时之一的中间重新启动，它们显然会在重新启动时全部清除，这可能会给这些用户带来一些问题。我将如何坚持这些超时，或者是否有任何模块已经对此有所帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-06-10T04:11:50.390

`setTimeOut`将延迟作为参数，因此在设置超时时，捕获`currentServerTime + delay`说`serverTriggerTime`并将其保存在数据库中。然后，在服务器重新启动时，使用`serverTriggerTime`. 然后，`delay = serverTriggerTime - currentServerTime`使用这个延迟来设置新的计时器。

设置定时器时

```
const date = Date.now();
const serverTriggerTime = date + delay; // time in milliseconds 
```

服务器重启时：

```
serverTriggerTime = // retrieve from DB.
newDelay = serverTriggerTime - Date.now(); 
```

此外，仅当 newDelay >= 0 时才设置新计时器，这意味着尚未达到触发时间并将在 newDelay 时间之后发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:55:50.387

我会将开始时间和持续时间存储在 Redis 中，并在您的应用程序重新加载时重新启动不完整的计时器。一些 Redis 模块：

[https://github.com/joyent/node/wiki/modules#wiki-db-nosql-redis](https://github.com/joyent/node/wiki/modules#wiki-db-nosql-redis)

# javascript - Lawnchair.js 不更新数据

> ID：11454590
> 
> 赞同：0
> 
> 时间：2012-07-12T14:54:25.017
> 
> 标签：javascript, lawnchair

我有一个用于在本地存储数据的“LocalStore”对象。它基于一个 Lawnchair 对象。

```
var LocalStore = function(name) {
    var that = this;
    that.name = name;

    that.lawnchair = Lawnchair({ name: that.name }, function(store) {
        this.before('save', function(record){
            console.log("saving " + that.name);
            console.log(record);
        });

        this.after('save', function(record){
            console.log("saved " + that.name);
            console.log(record);
            that.getData(function(records){
                console.log("now it's this");
                console.log(records);
            });
        });
    });

    that.getData = function(callback) {
        that.lawnchair.get(that.name, callback);
    };
}; 
```

然后使用以下方法扩展 LocalStore `_.extend`（来自 Underscore.js 库）：

```
save: function(collection, callback) {
        this.lawnchair.save({ key:this.name, value: collection }, function(record) {
            callback(record);
        });
    } 
```

此代码用于将 Backbone.js Collection 对象更新为 Lawnchair。第一次为我的用户集合运行“保存”时，它正确保存并显示该对象是一个简单的键/值对，其中值是一个数组。

Later in my code when a User selects a Default Project, I modify the Users Collection and call "save" again with an updated "defaultProjectId" on the User. The code runs error free, but the `after('save')` code for Lawnchair runs and shows me that:
- The `record` object returned is a key/value pair where value is a full Backbone.js Collection with the defaultProjectId property set correctly.
- The `getData` method that grabs the latest from the Database still shows as a key/value pair with value a simple Array and defaultProjectId is set incorrectly.

I'm at a loss as what to do. It should just be simply calling "lawnchair.save" updates the record, but it just doesn't do it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:23:36.003

Could you try this jsfiddle?

[http://jsfiddle.net/QUgtg/1/](http://jsfiddle.net/QUgtg/1/)

I have recreated your code. Instead of a backbone collection, I am passing in an array of objects. This seems to work. You can see the logging output in Firebug.

I have used my own extend code to add the `save()`. Though honestly, I don't see why you would want to do it that way, instead of just adding a property to the prototype. Your code may differ in that aspect.

If what I have posted works on your end, could you modify that code to show what are you doing differently? If possible, recreate the issue on jsfiddle...

# java - 从 inputstream 读取并添加到 stringbuilder

> ID：11454591
> 
> 赞同：0
> 
> 时间：2012-07-12T14:54:33.283
> 
> 标签：java, inputstream, stringbuilder

```
private void readIncomingMessage() {
    try {
        StringBuilder builder = new StringBuilder();
        InputStream is = socket.getInputStream();
        int length = 1024;
        byte[] array = new byte[length];
        int n = 0;

        while ((n = is.read(array, n, 100)) != -1) {
            builder.append(new String(array));

            if (checkIfComplete(builder.toString())) {
                buildListItems(builder.toString(), null);
                builder = new StringBuilder();
            }
        }

    } catch (IOException e) {
        Log.e("TCPclient", "Something went wrong while reading the socket");
    }
} 
```

你好，

我想读取每块 100 个字节的流，将这些字节转换为字符串，然后查看该字符串是否符合某些条件。

但是当我调试时，我看到构建器的计数为 3072。
我看到一个字符串，如 (text, , , , , , , , , , text , , , , , , , , , text)
我怎样才能添加给字符串生成器的文本？

谢谢 ：）

```
 private void readIncomingMessage() {
    try {
        StringBuilder builder = new StringBuilder();
        InputStream is = socket.getInputStream();
        int length = 100;
        byte[] array = new byte[length];
        int n = 0;

        while ((n = is.read(array, 0, length)) != -1) {
            builder.append(new String(array, 0, n));

            if (checkIfComplete(builder.toString())) {
                buildListItems(builder.toString(), null);
                builder = new StringBuilder();
            }
        }

    } catch (IOException e) {
        Log.e("TCPclient", "Something went wrong while reading the socket");
    }
} 
```

这个解决方案对我有用。这个解决方案有什么缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:59:54.680

2个问题：

1.  `'n'`将字节转换为字符串时需要使用该值。具体来说，使用这个 String 构造函数`String(byte[] bytes, int offset, int length)`
2.  在将字节转换为任意边界上的字符串时，就像您正在做的那样，您有可能破坏多字节字符。如果和读取字符，你最好把它`InputStreamReader`放在上面。`'is'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:08:47.977

有关更多信息，请阅读文档`read(byte[], int, int)`，`new String(byte[])`以及`new String(byte[], int, int)`

n 将保存上次读取操作中读取的字节数 - 而不是读取的*总*字节数。如果您一次只想读取最多 100 个字节，则不需要大小为 1024 的字节数组，100 就可以了。当你从一个字节数组创建一个字符串时，它会使用整个数组（即使只有一半能够通过读取来填充），除非你告诉它你想使用数组的哪些部分。像这样的东西应该可以工作，但是您仍然可以进行改进：

```
private void readIncomingMessage() {
  try {
    StringBuilder builder = new StringBuilder();
    InputStream is = socket.getInputStream();
    int length = 100;
    byte[] array = new byte[length];
    int pos = 0;
    int n = 0;

    while (pos != length && ((n = is.read(array, pos, length-pos)) != -1)) {
        builder.append(new String(array, pos, n));
        pos += n;
        if (checkIfComplete(builder.toString())) {
            buildListItems(builder.toString(), null);
            builder = new StringBuilder();
            pos = 0;
        }
    }

} catch (IOException e) {
    Log.e("TCPclient", "Something went wrong while reading the socket");
} 
```

}

# ruby-on-rails - 过滤 Rails 数据库

> ID：11454592
> 
> 赞同：0
> 
> 时间：2012-07-12T14:54:35.640
> 
> 标签：ruby-on-rails

我创建了一个研究人员数据库以及他们在 Rails 中撰写的论文。我需要能够按作者过滤它，以便将信息从数据库中提取到个人姓名的页面上（例如，如果有一个名为 Dr. A. Researcher 的研究人员，我需要能够去到他的页面，并且该页面将填充他/她自动编写的论文）。我已经为此工作了一段时间，并且已经转了很多次，我不确定我在寻找什么（尽管我认为它可能会基于 AJAX）。过滤数据库似乎很简单，但我似乎找不到任何有关将该过滤器的结果发送到特定页面的信息。

正如我所说，我不完全确定我在这里寻找什么，所以有人可能已经遇到过类似的问题。如果是这样，我道歉。任何人对此的任何帮助都将非常感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:35:11.523

似乎您只想使用 show 动作。

在你的 controllers/researchers.rb 控制器中添加

```
def show
  @reseacher = Reseacher.find(params[:id])
end 
```

或者可能

```
def show
    @reseacher = Reseacher.find(params[:id], include: [:papers])
end 
```

然后在您的 views/show.html.erb 视图中，您可以添加

```
<% @reseacher.papers.each do |p| %>
    <%= p.title %>
    <%= p.otherattribute %>
<% end %> 
```

此外，您需要确保在模型中正确设置您的关系

在模型/researcher.rb

添加

```
has_many :papers 
```

到研究员级

并在模型/papers.rb

添加

```
belongs_to :researcher 
```

到纸课

localhost:3000/reseachers/1 其中 1 是研究人员的 id 然后应该返回该研究人员的论文

# css - 如何使用 div 滚动而不是正文滚动

> ID：11454594
> 
> 赞同：0
> 
> 时间：2012-07-12T14:54:36.517
> 
> 标签：css

我有这个简单`div`的，里面有一些文字，还有这个 css

```
#mydiv{
    width:100px ; 
    height :300px;
    border : 1px solid black ; 
    overflow : auto
} 
```

到目前为止`div`没有滚动，当我最小化窗口的高度时，身体滚动出现，所以你可以看到它的内容`div`

**看到这个[jsFiddle](http://jsfiddle.net/minagabriel/29JRB/)**

**问题** 我如何禁用正文滚动并使用 div 滚动，使 div 始终可见 ​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:58:19.343

只要确保有足够的内容来使 div 滚动……在您的示例中，它非常适合。这是调整：

```
#mydiv{
 width:300px ; 
 height :100px;
 border : 1px solid black ; 
 overflow : scroll;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:58:04.743

添加 overflow:hidden 到 body 和足够的内容来填充 div。

**[jsFiddle 示例](http://jsfiddle.net/j08691/29JRB/23/)**

```
#mydiv{
    width:100px ; 
    height :300px;
    border : 1px solid black ; 
    overflow : auto

}

body {
    overflow:hidden;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:55:57.113

```
body,html{
    overflow:none;
} 
```

应该够了

# jsf - 如何使用 在 JSF 中

> ID：11454599
> 
> 赞同：1
> 
> 时间：2012-07-12T14:55:03.083
> 
> 标签：jsf, html-lists, uirepeat

我可以显示普通数组列表的对象。

数组列表`<Object>`名称；

```
<ui:repeat  value="#{bean.names}" var="t">
                          <ul>
                              <li  render="" id="hm">  

                                   <a>#{t.name}</a>
                             </li>
                          </ul></ui:repeat> 
```

但如果我有`List<ArrayList<Object>> names2 = new ArrayList<ArrayList<Object>>();`

我尝试使用嵌套`<ui:repeat>`或`<c:forEach>`但它不起作用。我不想使用数据表，因为我想将它们显示为列表。

例如，我试图这样做，但它不起作用，也没有`<ui:repeat>`，我尝试做什么有可能吗？

```
 <ul>

                                        <li> 

                                              <c:forEach items="#{bean.names2}" var="row">
                                                <c:forEach items="#{row}" var="nested_row">

                                                    <c:forEach items="#{nested_row}" var="t">
                                                        <a>#{t.name}</a>
                                                    </c:forEach>

                                                </c:forEach>                                                
                                              </c:forEach>             

                                        </li>

                                    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:54:29.553

您尝试使用*3 个* `<c:forEach>`s 的代码需要一个 3D 数组/列表。摆脱那个`<c:forEach>`太多。

```
<c:forEach items="#{bean.names2}" var="row">
    <c:forEach items="#{row}" var="nested_row">
        #{nested_row.name}
    </c:forEach>
</c:forEach> 
```

这同样适用于`<ui:repeat>`.

# cakephp - 一个模型中的两个关系

> ID：11454600
> 
> 赞同：0
> 
> 时间：2012-07-12T14:55:08.110
> 
> 标签：cakephp, relationship

![数据库关系](../Images/4db9700803efb1742cd57edbd84c6cdc.png)

你好

我在上面创建了数据库关系，如您所见，一个人（员工）可以是多个组的成员。每个小组都有一个小组长。我如何正确管理这种关系？

我会感谢每一个提示

这是我之前尝试过的：

**员工模型：**

```
 /**
 * belongsTo associations
 *
 * @var array
 */
    public $belongsTo = array(
        'Staffgroup' => array(
            'className' => 'Staffgroup',
            'foreignKey' => 'Staffgroup_groupLeader',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );

/**
 * hasAndBelongsToMany associations
 *
 * @var array
 */
    public $hasAndBelongsToMany = array(
        'Staffgroup' => array(
            'className' => 'Staffgroup',
            'joinTable' => 'staff_staffgroups',
            'foreignKey' => 'staff_id',
            'associationForeignKey' => 'staffgroup_id',
            'unique' => 'keepExisting',
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'finderQuery' => '',
            'deleteQuery' => '',
            'insertQuery' => ''
        )
    );

} 
```

**模范员工组**

```
/**
 * hasOne associations
 *
 * @var array
 */
    public $belongsTo = array(
        'Staff' => array(
            'className' => 'Staff',
            'foreignKey' => 'groupLeader',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );

/**
 * hasAndBelongsToMany associations
 *
 * @var array
 */
    public $hasAndBelongsToMany = array(
        'Staff' => array(
            'className' => 'Staff',
            'joinTable' => 'staff_staffgroups',
            'foreignKey' => 'staffgroup_id',
            'associationForeignKey' => 'staff_id',
            'unique' => 'keepExisting',
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'finderQuery' => '',
            'deleteQuery' => '',
            'insertQuery' => ''
        )
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:29:58.547

`hasMany`您的模型中缺少一个关联来表示和`Staff`之间的“组长”关系。`Staff``StaffGroup`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:10:02.310

我认为你与belongsTo 有不必要的关系。使用 HABTM 应该足以处理“一个人可以是多个群体的一部分”的关系

有关更多信息，您可以查看[食谱](http://book.cakephp.org/1.3/view/1044/hasAndBelongsToMany-HABTM)

# ipad - Flex Mobile iPad - 软键盘仍显示在 textInput 组件上

> ID：11454601
> 
> 赞同：0
> 
> 时间：2012-07-12T14:55:10.180
> 
> 标签：ipad, apache-flex, mobile, android-softkeyboard

我正在创建一个 iPad 应用程序，其中我有一个 textInput 组件，当它处于焦点时，假设它调用一个带有微调器的标注。问题是每次我触摸 textInput 组件时都会显示软键盘。我已经尝试了所有我能找到的东西，其中包括：

```
 private function onActivating(event:SoftKeyboardEvent):void 
    {
       event.preventDefault();
    }           

    <s:TextInput softKeyboardActivating="onActivating(event)" /> 
```

和

```
 <s:TextInput needsSoftKeyboard = "False"/> 
```

这两个示例仍然显示软键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:32:09.330

您是否尝试过简单地禁用 TextInput 并更改样式以使其看起来不被禁用？触摸事件可能不会触发，但缺少样式标签 [如上所述] 你将不得不以一种或另一种方式做一些诡计。

# tridion - 页面上的多个动态 SiteEdit CP

> ID：11454604
> 
> 赞同：17
> 
> 时间：2012-07-12T14:55:22.093
> 
> 标签：tridion, siteedit

我们在 SDL Tridion 2009 SP1 中有 SiteEdit 2009 SP2，它适用于正常发布的页面。如果我们在页面中有单个动态组件表示（DCP），它也可以正常工作。但是当我们在页面上有多个 DCP 时，它只取第一个而忽略所有其他的。

这是我的代码

```
<xsl:variable name="SE_CP_MarkUP">
<![CDATA[ <!-- Start SiteEdit Component Presentation: {"ID" : "cp_%ID%", "ComponentID" : "%ID%", "ComponentTemplateID" : "tcm:XX-XXXXX-32", "Version" : 0, "IsQueryBased" : true  } -->]]> 
```

我在循环中使用这个变量

```
<xsl:value-of select="XXXX:RegexStringReplace($SE_CP_MarkUP,'%ID%',@ID)" disable-output-escaping="yes"/> 
```

请建议可能是什么问题？

更多详情：

生成的 HTML

```
 <div>
  <!-- Start SiteEdit Component Presentation: {"ID" : "cp_tcm:13-287142", "ComponentID" : "tcm:13-287142", "ComponentTemplateID" : "tcm:13-286965-32", "Version" : 3, "IsQueryBased" : true  } -->
  HTMLConent
</div>
<div>
  <!-- Start SiteEdit Component Presentation: {"ID" : "cp_tcm:13-287162", "ComponentID" : "tcm:13-287162", "ComponentTemplateID" : "tcm:13-286965-32", "Version" : 2, "IsQueryBased" : true  } -->
  HTMLConent
</div>
<div>
  <!-- Start SiteEdit Component Presentation: {"ID" : "cp_tcm:13-287204", "ComponentID" : "tcm:13-287204", "ComponentTemplateID" : "tcm:13-286965-32", "Version" : 1, "IsQueryBased" : true  } -->
  HTMLConent
</div>
<div>
  <!-- Start SiteEdit Component Presentation: {"ID" : "cp_tcm:13-287234", "ComponentID" : "tcm:13-287234", "ComponentTemplateID" : "tcm:13-286965-32", "Version" : 4, "IsQueryBased" : true  } -->
  HTMLConent
</div>
<div>
  <!-- Start SiteEdit Component Presentation: {"ID" : "cp_tcm:13-287251", "ComponentID" : "tcm:13-287251", "ComponentTemplateID" : "tcm:13-286965-32", "Version" : 3, "IsQueryBased" : true  } -->
  HTMLConent
</div> 
```

站点编辑设置

```
<!-- SiteEdit Settings: { "PageID" : "tcm:13-287332-64", "PageVersion" : 2, "TargetTypeID" : "", "ComponentPresentationLocation" : 1, "BluePrinting" : { "PageContext" : "tcm:0-8-1", "ComponentContext" : "tcm:0-13-1", "PublishContext" : "tcm:0-13-1"}} --> 
```

我在运行时超过了 html。在悬停在第一个 CP 上时，我只能使用 siteedit 打开第一个组件，如果我悬停在任何其他 CP 上，则不会发生任何事情。

页面上也没有JS错误。

谢谢，维卡斯库马尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T13:15:32.197

感谢您查看此内容，我刚刚意识到 SiteEdit 正在完成它的工作。所有 SiteEdit 标记 div 都具有相同的绝对位置，因此无论我将鼠标悬停在哪里，div 都会显示在顶部。

我正在与设计团队合作以对其进行排序。

谢谢，维卡斯库马尔

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T15:01:27.577

SiteEdit 组件表示标记应始终包含在 HTML 元素中，例如 DIV，这样 SiteEdit 可以区分组件表示的开头和结尾。

因此，在您的循环中，您应该输出如下内容：

```
<div>
    <xsl:value-of select="XXXX:RegexStringReplace($SE_CP_MarkUP,'%ID%',@ID)" disable-output-escaping="yes"/>
    <!-- output the content here -->
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T11:24:38.377

通常我会说这是因为没有给每个组件表示一个唯一的 ID。但看起来你已经得到了覆盖。

我假设您只是出于简洁的考虑而从您的问题中省略了设置注释，对吗？

你有没有机会给我们整个 HTML？当然，请删除任何敏感内容，但请确认您在这样做后仍然存在问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T14:25:25.680

我遇到了同样的问题，特别是如果您在 siteedit span/div 标签周围有任何 html5 标签。您是否检查过这篇文章（来自 Bart），它可能会有所帮助。它对我的情况有所帮助。

[http://www.sdltridionworld.com/articles/sdltridion2011/siteedit_zindex.aspx](http://www.sdltridionworld.com/articles/sdltridion2011/siteedit_zindex.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T12:41:02.357

您确定用户有权访问所有组件吗？它们都存在吗

检查浏览器的开发人员工具可能是最简单的方法。查找请求`GetComponentAndSchemas`。

在该请求的正文（即发送到服务器的部分）中，您将找到 SiteEdit 要求的所有组件。因此，如果这没有涵盖您的**所有**组件，它就会以某种方式在 HTML 中找不到它们。

然后在该请求的响应中，您应该找到被请求的组件以及它们所基于的模式。如果某些组件不存在，它们会以某种方式在服务器上被过滤掉。很可能是因为用户没有权限，但也可能是他们在出版物 13 中不存在。

# c# - 什么是第一位的 - 命令或事件处理程序？

> ID：11454609
> 
> 赞同：9
> 
> 时间：2012-07-12T14:55:46.407
> 
> 标签：c#, wpf, mvvm, event-handling, icommand

在*Microsoft 的 MVVM 模式*及其命令/事件处理方面的上下文中，考虑我正在将命令绑定到控件（例如按钮）并订阅控件的 Click 事件。

是否有任何一般规则首先发生什么动作 - 处理与命令相关联的代码或与相应事件处理程序相关联的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T15:14:47.573

EventHandlers 在绑定的 ICommand 之前触发。

# mule - Mule：过程表达式评估器

> ID：11454613
> 
> 赞同：0
> 
> 时间：2012-07-12T14:56:01.047
> 
> 标签：mule

我正在尝试`#[process:processName:valueToProcess]`在我的流程中使用该表达式。

这是我的流程配置：

```
<flow name="exampleFlow">
  <quartz:inbound-endpoint jobName="job1" cronExpression="0/5 * * * * ?" connector-ref="quartzConnector">
    <quartz:event-generator-job>
      <quartz:payload>foo</quartz:payload>
    </quartz:event-generator-job>
  </quartz:inbound-endpoint>

  <logger message="#[process:test:#[payload]]" level="INFO"/>
</flow>

<sub-flow name="test" doc:name="test">
  <component class="com.myComp.ComponentTest" doc:name="Java"/>
</sub-flow> 
```

这是我的 Java 组件：

```
package com.myComp;

public class ComponentTest
{
  public String test(String s)
  {
    return s + "bar";
  }
} 
```

当计算表达式时，问题就来了`#[process:test:#[payload]]`。它抛出这个异常：

```
java.lang.NullPointerException
    at org.mule.component.AbstractComponent.invokeInternal(AbstractComponent.java:112)
    at org.mule.component.AbstractComponent.process(AbstractComponent.java:156)
    at org.mule.processor.chain.DefaultMessageProcessorChain.doProcess(DefaultMessageProcessorChain.java:99)
    at org.mule.processor.chain.AbstractMessageProcessorChain.process(AbstractMessageProcessorChain.java:66)
    at org.mule.processor.chain.InterceptingChainLifecycleWrapper.doProcess(InterceptingChainLifecycleWrapper.java:56)
    at org.mule.processor.chain.AbstractMessageProcessorChain.process(AbstractMessageProcessorChain.java:66)
    at org.mule.processor.chain.InterceptingChainLifecycleWrapper.process(InterceptingChainLifecycleWrapper.java:87)
    at org.mule.api.processor.MessageProcessors$LifecyleAwareMessageProcessorWrapper.process(MessageProcessors.java:114)
    at org.mule.expression.MessageProcessorExpressionEvaluator.evaluate(MessageProcessorExpressionEvaluator.java:87)
    at org.mule.expression.DefaultExpressionManager.evaluate(DefaultExpressionManager.java:273)
    at org.mule.expression.DefaultExpressionManager.evaluate(DefaultExpressionManager.java:209)
    at org.mule.expression.DefaultExpressionManager$1.match(DefaultExpressionManager.java:399)
    at org.mule.util.TemplateParser.parse(TemplateParser.java:156)
    at org.mule.util.TemplateParser.parse(TemplateParser.java:133)
    at org.mule.expression.DefaultExpressionManager.parse(DefaultExpressionManager.java:395)
    at org.mule.expression.DefaultExpressionManager.parse(DefaultExpressionManager.java:379)
    at org.mule.api.processor.LoggerMessageProcessor.log(LoggerMessageProcessor.java:89)
    at org.mule.api.processor.LoggerMessageProcessor.process(LoggerMessageProcessor.java:71)
    at org.mule.processor.chain.DefaultMessageProcessorChain.doProcess(DefaultMessageProcessorChain.java:99)
    at org.mule.processor.chain.AbstractMessageProcessorChain.process(AbstractMessageProcessorChain.java:66)
    at org.mule.processor.AbstractInterceptingMessageProcessorBase.processNext(AbstractInterceptingMessageProcessorBase.java:105)
    at org.mule.interceptor.AbstractEnvelopeInterceptor.process(AbstractEnvelopeInterceptor.java:55)
    at org.mule.processor.AsyncInterceptingMessageProcessor.processNextTimed(AsyncInterceptingMessageProcessor.java:111)
    at org.mule.processor.AsyncInterceptingMessageProcessor$AsyncMessageProcessorWorker.doRun(AsyncInterceptingMessageProcessor.java:158)
    at org.mule.work.AbstractMuleEventWork.run(AbstractMuleEventWork.java:43)
    at org.mule.work.WorkerContext.run(WorkerContext.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

任何其他脚本组件也会发生同样的情况。我猜它与我的组件生命周期有关，但我找不到让它工作的方法。如果我用任何其他 Mule 处理器（例如 logger、stringAppend）替换我的组件，它就可以正常工作。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:48:49.880

当您说这是一个初始化问题时，您是对的：出于任何原因，子流中的组件的初始化方式与它们在流中的初始化方式不同，即。这有效：

```
<flow name="test" doc:name="test">
  <component class="com.myComp.ComponentTest" doc:name="Java"/>
</flow> 
```

我相信这是一个错误，因此[我报告了它](http://www.mulesoft.org/jira/browse/MULE-6334)。请为这个问题点赞。

要使用异步事件进行此操作，例如 Quartz 入站端点生成的事件，您需要添加`processingStrategy="synchronous"`到被调用流以便同步调用，否则默认情况下它将被异步调用（即使`process:test:#[payload]`期望同步响应） . 这是 Mule 3 中一个众所周知的怪癖。

所以最终的解决方案是：

```
<flow name="test" processingStrategy="synchronous" doc:name="test">
  <component class="com.myComp.ComponentTest" doc:name="Java"/>
</flow> 
```

# android - 给定一条线的起点和终点，如何获得所有的中间坐标？， 安卓

> ID：11454615
> 
> 赞同：1
> 
> 时间：2012-07-12T14:56:07.460
> 
> 标签：android, line, coordinate

**给出了一条线的起点和终点，如何获取android中的所有中间坐标？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:57:31.413

谷歌搜索 Bresenham 的直线算法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:06:46.327

你有两点。你所需要的只是斜坡。有一种用于获得斜率的两点形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:00:37.040

直线方程，两点形式：[http ://en.wikipedia.org/wiki/Linear_equation#Two-point_form](http://en.wikipedia.org/wiki/Linear_equation#Two-point_form)

# javascript - 如何编写模块化的客户端 Javascript？

> ID：11454619
> 
> 赞同：3
> 
> 时间：2012-07-12T14:56:25.133
> 
> 标签：javascript, module

我正在编写一个繁重的 Javascript 应用程序，最终将通过将一个脚本注入客户网站来使用它。

到目前为止，我正在将所有模块都写在一个 JS 文件中，但是我很快发现这样做是无效的，因为感觉非常混乱和混乱，而且我觉得模块应该都放在单独的文件中。

我的问题是，什么是管理这个的好方法。我应该将所有应用程序模块写在单独的文件中，然后在服务器上将它们编译成一个吗？

如果重要的话，我将 Node.js 用于我的服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:00:31.243

第一点：不要试图在一个文件中编写所有内容。大多数大型 javascript 应用程序包含几十个文件。

使用某种 makefile 来连接您的 js（和 css）文件。之后使用缩小器（我使用[Google Closure Compiler](https://developers.google.com/closure/compiler/)）。为了帮助调试，我的部署脚本总是并行创建两个版本：一个是非串联/缩小的，一个是串联/缩小的。解压版无需任何部署操作即可现场开发/测试。

这意味着，对于所有大型应用程序开发，您需要某种部署工具链来编排操作。这可能基于 shell 脚本、maven、ant 等。

其次：使用类（不要滥用，javascript 不是真正的 OOP）和命名空间来清楚地隔离你的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:59:13.893

是的，将所有文件在逻辑上分开，然后将它们缩小并合并为发布步骤或在提供它们时即时合并。Scott Hansleman 写了一篇非常好的博客文章，说明了为什么要在[此处](http://www.hanselman.com/blog/TheImportanceAndEaseOfMinifyingYourCSSAndJavaScriptAndOptimizingPNGsForYourBlogOrWebsite.aspx)执行此操作。

# c# - 从 listView 子项中打开默认浏览器单击

> ID：11454620
> 
> 赞同：0
> 
> 时间：2012-07-12T14:56:27.937
> 
> 标签：c#, listview

试图弄清楚如何通过单击 listView 子项来打开默认浏览器。

我像这样创建我的listView：

```
 string[] row1 = { username, "Start", proxy, "0", "0" };

                ListViewItem item = new ListViewItem();

                item.Text = numeret.ToString();
                item.Tag = numeret;
                listView1.Items.Add(item).SubItems.AddRange(row1); 
```

基本上我希望用户能够单击用户名，然后应该打开默认的网络浏览器并将用户带到某个 url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:12:40.520

检查这个答案：[Open a URL from Windows Forms](https://stackoverflow.com/questions/58024/open-a-url-from-windows-forms)

```
ProcessStartInfo sInfo = new ProcessStartInfo("http://mysite.com/");  
Process.Start(sInfo); 
```

# google-maps - 谷歌地图 API v3 字体问题

> ID：11454623
> 
> 赞同：1
> 
> 时间：2012-07-12T14:56:31.333
> 
> 标签：google-maps, fonts, shrink

我在我的网站上遇到了 Google Maps API V3 的问题。在加载地图的页面上，我网站上的字体缩小了。

下面链接上的图像显示了差异。第一个是在有谷歌地图的页面上，第二个是没有的。

这是一个已知的问题？以及如何解决？

图 1：[http](http://bit.ly/N9uH1b) ://bit.ly/N9uH1b 图 2：[http ://bit.ly/OA5etV](http://bit.ly/OA5etV)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T23:00:37.067

只要回答你的问题，如果像我这样的人会花几个小时进行搜索。将代码添加到您的 BODY 标记中：

```
-webkit-font-smoothing: subpixel-antialiased !important; 
```

这是由 Google 地图使用的 CSS 3D 转换引起的。

# visual-studio-2010 - IIS Express 或 Cassini

> ID：11454624
> 
> 赞同：6
> 
> 时间：2012-07-12T14:56:32.277
> 
> 标签：visual-studio-2010, iis-express, cassini

我对某事有点困惑。我正在使用 Visual Studio 2010，但有点不确定 VS 2010 在运行 Web 应用程序时是使用 IIS Express 还是 Cassini。有什么区别？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T06:08:28.353

**VS 2010 SP1**支持 IIS Express 和 Cassini（VS 2010 仅支持 cassini）。您可以将项目配置为使用 IIS Express 或 Cassini。

默认情况下 VS 2010 SP1 使用 Cassini 并更改右键单击您的网站/Web 应用程序并选择“使用 iis express”。（使用 IIS Express 时，您会发现 IIS Express 托盘图标，在那里您可以看到所有正在运行的站点）

[![IIS Express 托盘图标](../Images/222b4e995c861c2295be79122b70dc58.png)](https://i.stack.imgur.com/vViGN.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T15:08:05.160

我想[这个](http://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx)话题会回答你的大部分问题。简而言之：

*   使用 Cassini 还是 IIS Express 取决于项目的配置

*   IIS Express 具有更丰富的功能包。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T14:24:27.807

我会推荐 IIS Express，因为我已经花了 2 天多的时间来寻找在 Cassini 中运行良好的错误，这些错误现在在 IIS Express 中抬起了丑陋的脑袋（并试图发布到 IIS7.5）。（这些主要是 SimpleMembershipProvider 的配置错误）

# javascript - 使用 javascript/jQuery 基于 url 值的自动复选框

> ID：11454630
> 
> 赞同：2
> 
> 时间：2012-07-12T14:56:53.557
> 
> 标签：javascript, jquery, checkboxlist

有没有办法或者可以使用javascript/jQuery来做到这一点？

基于链接 URL：第一个将检查 Type A 和 Type B，第二个示例将检查 Type D

```
?type=A&type=C or ?type=D 
```

我现在的表格：

```
<form name="input" action="" method="post" ><br />
Select Type: <br />
<input type="checkbox" name = "type" value="A" /> A <br />
<input type="checkbox" name = "type" value="B"  /> B <br />
<input type="checkbox" name = "type" value="C"  /> C <br />
<input type="checkbox" name = "type" value="D" /> D <br /> <br />
<input type="submit" value="Submit" /> 
```

有什么建议和建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T15:04:48.807

像这样做：

```
var i = document.location.href.lastIndexOf('?');
var types = document.location.href.substr(i+1).replace(/type=/g,'').split('&');
$('input[name="type"]').prop('checked',function(){
     return $.inArray(this.value,types) !== -1;
}); 
```

*说明*：

考虑 url 是' `http://sample.com?type=A&type=C`'。然后：

*   `i`是 ' `?`' 的索引在那个 url
*   [**.substr()**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substr)将从 url 中删除`type=A&type=C`一部分。剪切后，我们将得到这个字符串：

    ```
    "type=A&type=C" 
    ```

*   [**.replace()**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)从上述字符串中删除“type=”部分：

    ```
    "A&C"   //after replace 
    ```

*   [**.split()**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)将该字符串拆分为数组：

    ```
     ["A","C"] 
    ```

*   [**$.inArray()**](http://api.jquery.com/jQuery.inArray/)检查当前值是否`checkbox`在`["A","C"]`数组中。如果是，则`checks`(`.prop('checked',true)`)`checkbox`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:09:21.957

此[问题](https://stackoverflow.com/questions/979975/how-to-get-the-value-from-url-parameter)显示了使用 javascript 检查查询字符串参数的解决方案。顶部还有一个指向可能[重复问题](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)的链接，该问题提供了使用 JQuery 的解决方案。

一旦确定了 querty 字符串参数，就可以使用 jQuery 来勾选复选框（详见[另一个问题](https://stackoverflow.com/questions/426258/how-do-i-check-a-checkbox-with-jquery-or-javascript)）：

```
$('input[value="A"]').prop("checked", true); 
```

# iphone - 使用 NSMutableURLRequest 将数据发布到 Web 服务器

> ID：11454632
> 
> 赞同：0
> 
> 时间：2012-07-12T14:56:55.973
> 
> 标签：iphone, objective-c, post, https, webserver

我正在使用`NSMutableURLRequest`将一些数据发布到受密码保护的 Web 服务器。我已经连接了一切，我可以很好地检索数据，但由于某种原因，我无法发布任何数据。

我用`NSURLCredentials`的是用户名和密码，连接没问题。

起始 URL 请求：

```
-(void)starting {
NSURL *url = [NSURL
URLWithString:@"http:myurl/myfile.txt"];
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url];
urlConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self]; //Calling NSURLConnection delegate methods
} 
```

转换`NSString`我想发布到`NSData`：

```
NSString *someString = @"Hello World";
NSData* theData=[someString dataUsingEncoding:NSUTF8StringEncoding];

NSURL *someUrl = [NSURL URLWithString:@"http://myurl/myfile.txt"]; 
```

写入网络服务器：

```
NSString *postLength = [NSString stringWithFormat:@"%d", [theData length]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:someUrl];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];    
[request setHTTPBody:theData]; 
```

允许任何 https 证书：

```
[NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[someUrl host]]; 
```

发送检索请求：

```
NSError *error;
NSURLResponse *response;
NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding]; 
```

检索数据的长度是否 = 0..

```
if ([data length] == 0) {

    UIAlertView *dataLengthNoneAlert = [[UIAlertView alloc] initWithTitle:@"No data" message:@"There is no data on the server" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];

    [dataLengthNoneAlert show];

} 
```

如果没有，请告诉我新数据..（应该是“Hello World”）

```
else {

    NSLog(data);

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Retrieved data" message:data delegate:nil cancelButtonTitle:@"Dimiss" otherButtonTitles:nil, nil];

    [alert show];

} 
```

因此，我“尝试”将数据发布到 Web 服务器，然后立即检索它。我发现我刚才写的数据的长度是 0。我什至检查了应用程序之外的服务器，没有任何变化。网址有效。这是我第一次使用 NSMutableURLRequest，我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:22:26.043

不是一个完整的专家，但有几件事对我有用。

将您的响应存储为类型可能会更好，`NSMutableData`而不是`NSData`因为这允许连续的动态响应

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)

^ 的苹果文档还`NSUrlconnection`建议使用 4 种方法，`didRecieveResponse, didRecieveData, didFailwithError`这些方法`didFinishLoading`有助于附加和解释数据。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:24:44.853

验证您的**url 字符串**是否以斜杠结尾：

这项工作：

```
http://your.url/ 
```

这**不起作用**：

```
http://your.url 
```

# python - 如何使用 beautifulsoup 获取原始文本？

> ID：11454633
> 
> 赞同：2
> 
> 时间：2012-07-12T14:56:58.947
> 
> 标签：python, xml, parsing, hyperlink, beautifulsoup

我有一个这样的xml：

```
<link>
www.link1.com
</link>
<link>
www.link2.com
</link> 
```

我试过这段代码：

```
from BeautifulSoup import BeautifulStoneSoup 
soup = BeautifulStoneSoup(results2)     #Beautiful Soup
linklist = soup.findAll('link')
print soup 
```

使用此代码，输出为

```
[<link>www.link1.com</link>,<link>www.link2.com</link>] 
```

但我想要这样的输出

```
[www.link1.com, www.link2.com] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T15:05:55.250

你有没有尝试过：

```
linklist = [el.string for el in soup.findAll('link')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:13:50.283

```
links = soup.find_all('link')
link_strings = [s.string for s in links.string] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:16:00.537

尝试这个：

```
from bs4 import BeautifulSoup

xml = """<html><link>
www.link1.com
</link>
<link>
www.link2.com
</link></html>"""

soup = BeautifulSoup(xml,features="xml")
linklist = soup.find_all('link')
linklist = map(lambda x: x.string, linklist) 
```

请注意，我已将构造函数更改为`BeautifulSoup`with`features="xml"`而不是`BeautifulStoneSoup`因为后者已被弃用。

# .htaccess - htaccess - 仅在根目录中重写 PHP $_GET

> ID：11454636
> 
> 赞同：0
> 
> 时间：2012-07-12T14:57:03.663
> 
> 标签：.htaccess, url, mod-rewrite

我正在尝试将我的 url 中的 $_GET['p'] 变量更改为它自己的变量，但没有？=。

示例：
www.example.com/?p=about 到 www.example.com/about

问题是我的 htaccess 代码也会对子文件夹做出反应。

如果我想访问我的图像文件夹作为示例，我会得到：
www.example.com/images/ ?p=images

如何确保我的 .htaccess 忽略任何子文件夹？

这是我目前正在使用的 .htaccess
`RewriteEngine on
RewriteBase /
# Rewrite page include
#RewriteRule ^(\w+)$ index.php?p=$1`

抱歉我的解释不好。

-香蕉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:42:26.660

```
RewriteEngine on

# ignore existing files (only apply to non-file)
RewriteCond %{REQUEST_FILENAME} !-f

#ignore folders (only apply to non-folder)
RewriteCond %{REQUEST_FILENAME} !-d

# here you might also want to exclude some specific locations...
RewriteCond %{REQUEST_URI} !^(images|css|js)/

# finally, apply the rule...
RewriteRule ^(\w+)$ index.php?p=$1 [L] 
```

所有`RewriteCond`条件都是链式的（只有当所有条件都通过时，才会应用规则）。

# database - db 如何锁定行并释放它们？

> ID：11454638
> 
> 赞同：1
> 
> 时间：2012-07-12T14:57:05.583
> 
> 标签：database, postgresql, deadlock

最近，我们遇到了一个死锁问题。我们系统的两个部分将在相似的时间更新同一个表，一个更新（命名为“UP1”）事务中的几行，另一个（命名为“UP2”）使用类似“update ... where id”的 sql在 （...）”。

似乎是因为 sql "update ... where id in (...)" 中的 id 乱序，例如 "5,6,2,3,4,1"; 并且在事务中，更新操作将按照“1,2,3,4,5,6”的顺序执行。当“UP1”更新id“1,2,3,4”，“UP2”更新id“5,6”时，“UP1”想要被“UP2”锁定的id 5，“UP2”想要被“UP1”锁定的id 2，所以死锁就出来了。

我的问题是，数据库是否会一一锁定行，只有在 sql 或事务完成时才释放它们？如果不是，为什么不能在事务开始时锁定所有行或“where id in (...)” sql，为什么不能一一释放更新的行？

期待任何有用的回复，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:30:29.273

你几乎走在正确的轨道上。使用默认的[Read Committed Isolation Level](http://www.postgresql.org/docs/current/interactive/transaction-iso.html#XACT-READ-COMMITTED) PostgreSQL 一路获取锁，并在事务提交或回滚时释放它们。

如果您可以确保所有 UPDATE 操作以相同的顺序更新行，您将永远不会遇到死锁。您是否尝试过`UP1`按升序更新行并以相同的方式对`IN`列表进行排序`UP2`？

如果你不能保证同步更新，你可能会对[Serializable Isolation Level](http://www.postgresql.org/docs/current/interactive/transaction-iso.html#XACT-SERIALIZABLE)感兴趣。它是最严格的隔离级别，可能会稍微减慢您的查询速度，尤其是在高并发的情况下。但它应该可以防止您看到的错误。此外，请准备好由于序列化失败而重试事务。

为此，请通过以下方式[开始您的交易](http://www.postgresql.org/docs/current/interactive/sql-begin.html)：

```
BEGIN ISOLATION LEVEL SERIALIZABLE; 
```

# mysql - MySQL - 在单个查询中获取事件和连接

> ID：11454641
> 
> 赞同：0
> 
> 时间：2012-07-12T14:57:10.863
> 
> 标签：mysql, select, join

我有这两个查询：

```
SELECT `a`.*, `b`.`id` AS host_id, SUM(CASE WHEN c.event_id IS NOT NULL THEN 1 ELSE 0 END) AS count_joins, SUM(CASE WHEN c.event_id IS NOT NULL AND c.user_id = 0 THEN 1 ELSE 0 END) AS joined
FROM (`events` AS a)
INNER JOIN `users` AS b ON `b`.`id` = `a`.`host_id`
LEFT JOIN `joins` AS c ON `c`.`event_id` = `a`.`id`
WHERE `a`.`date` > '2012-07-12 11:51:34'
GROUP BY `a`.`id`
ORDER BY `a`.`date` ASC
LIMIT 20 
```

和

```
SELECT `b`.`id`, `b`.`first_name`, `b`.`last_name`, `b`.`email`, `b`.`username`, `b`.`thumbnail`
FROM (`joins` AS a)
INNER JOIN `users` AS b ON `b`.`id` = `a`.`user_id`
WHERE `a`.`event_id` =  '1'
AND `a`.`user_id` != 0
ORDER BY  RAND()
LIMIT 8 
```

第一个获取所有事件，然后，使用 foreach 循环，我使用第二个查询获取每个事件的连接。

我的问题是，我怎样才能用一个查询来完成所有这些工作？

这是我的架构：

![图式](../Images/8bf78e617458d8ea2ba7a2b7cbb810e4.png)

我想返回一个多维数组，例如：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [title] => Title
            [description] => DescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescriptionDescription
            [segment] => title
            [thumbnail] => 356a192b7913b04c54574d18c28d46e6395428ab.jpeg
            [cover] => 356a192b7913b04c54574d18c28d46e6395428ab.jpeg
            [locale] => Locale
            [address] => Rua Afonso Pena, 22, Tijuca
            [list] => 0
            [date] => 2013-10-10 10:10:10
            [created] => 
            [host_id] => 1
            [count_joins] => 5
            [joined] => 0
            [joins] => Array
                (
                    [0] => Array
                        (
                            [id] => 4
                            [first_name] => Giovanna
                            [last_name] => Carneiro
                            [email] => gigi@gmail.com
                            [username] => gigi
                            [thumbnail] => 1b6453892473a467d07372d45eb05abc2031647a.jpg
                        )

                    [1] => Array
                        (
                            [id] => 5
                            [first_name] => Júlio
                            [last_name] => César
                            [email] => jujuba@gmail.com
                            [username] => jujuba
                            [thumbnail] => ac3478d69a3c81fa62e60f5c3696165a4e5e6ac4.jpg
                        )

                    [2] => Array
                        (
                            [id] => 3
                            [first_name] => Claudio
                            [last_name] => Cardozo
                            [email] => cazo66@gmail.com
                            [username] => cazo
                            [thumbnail] => 77de68daecd823babbb58edb1c8e14d7106e83bb.jpg
                        )

                    [3] => Array
                        (
                            [id] => 1
                            [first_name] => Claudius
                            [last_name] => Ibn
                            [email] => ibnclaudius@gmail.com
                            [username] => ibnclaudius
                            [thumbnail] => 356a192b7913b04c54574d18c28d46e6395428ab.jpeg
                        )

                    [4] => Array
                        (
                            [id] => 2
                            [first_name] => Elza
                            [last_name] => Virginia
                            [email] => elza.mosqueira@gmail.com
                            [username] => elzavirginia
                            [thumbnail] => da4b9237bacccdf19c0760cab7aec4a8359010b0.jpg
                        )

                )

        )

    [1] => Array
        (
            [id] => 2
            [title] => Another Title
            [description] => Description
            [segment] => another-title
            [thumbnail] => da4b9237bacccdf19c0760cab7aec4a8359010b0.jpeg
            [cover] => da4b9237bacccdf19c0760cab7aec4a8359010b0.jpeg
            [locale] => Locale
            [address] => Travessa Nestor Vitor, 117, Tijuca
            [list] => 0
            [date] => 2013-10-10 10:10:10
            [created] => 
            [host_id] => 3
            [count_joins] => 5
            [joined] => 0
            [joins] => Array
                (
                    [0] => Array
                        (
                            [id] => 1
                            [first_name] => Claudius
                            [last_name] => Ibn
                            [email] => ibnclaudius@gmail.com
                            [username] => ibnclaudius
                            [thumbnail] => 356a192b7913b04c54574d18c28d46e6395428ab.jpeg
                        )

                    [1] => Array
                        (
                            [id] => 4
                            [first_name] => Giovanna
                            [last_name] => Carneiro
                            [email] => gigi@gmail.com
                            [username] => gigi
                            [thumbnail] => 1b6453892473a467d07372d45eb05abc2031647a.jpg
                        )

                    [2] => Array
                        (
                            [id] => 3
                            [first_name] => Claudio
                            [last_name] => Cardozo
                            [email] => cazo66@gmail.com
                            [username] => cazo
                            [thumbnail] => 77de68daecd823babbb58edb1c8e14d7106e83bb.jpg
                        )

                    [3] => Array
                        (
                            [id] => 5
                            [first_name] => Júlio
                            [last_name] => César
                            [email] => jujuba@gmail.com
                            [username] => jujuba
                            [thumbnail] => ac3478d69a3c81fa62e60f5c3696165a4e5e6ac4.jpg
                        )

                    [4] => Array
                        (
                            [id] => 2
                            [first_name] => Elza
                            [last_name] => Virginia
                            [email] => elza.mosqueira@gmail.com
                            [username] => elzavirginia
                            [thumbnail] => da4b9237bacccdf19c0760cab7aec4a8359010b0.jpg
                        )

                )

        )

) 
```

第一个查询返回事件，第二个查询返回连接。如果可能的话，我想只用一个查询返回所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:03:41.010

纯 SQL 的问题之一是您无法在单个查询中创建嵌套结果。您只能返回包含所有字段的平面记录。然后，您将使用您的应用程序层将记录解析为嵌套行。

如果您使用的是 linq 或 Hibernate 之类的 ORM，所有工作都将在后台进行。

你可以得到如下结果：

事件.id| events.title| events.locale| 用户.id| users.first_name| users.last_name

在您的情况下，这将返回 10 条不同的记录，其中来自事件的字段将在每条记录中重复。然后，您的应用程序服务器会将其解析为嵌套数组。

我已经用两种方式编写了查询，我在哪里得到一个平面记录，我描述它的方式，并在应用程序服务器上解析它，我在哪里对事件进行初始查询，并为每个事件单独查询，再次从应用程序服务器。他们都工作，这只是一个问题，在你的情况下，获取事件，然后是他们的用户，或者获取所有数据然后解析它是否更简单/更快。

# java - Groovy Regex：字符类中的波浪号有什么作用？

> ID：11454643
> 
> 赞同：0
> 
> 时间：2012-07-12T14:57:18.530
> 
> 标签：java, regex, groovy, tilde, character-class

我有这个来自 groovy 代码的正则表达式：

```
(?:[^\p{Alnum}äöü**~D~V~\~_**]|^)

(?:sometext|s\.t\.)

(?:[^\p{Alnum}äöü**~D~V~\~_**]|$$) 
```

我唯一不明白的是这部分：

```
**~D~V~\~_** 
```

波浪号在那里做什么？这是一个错误吗？或者只是角色类的一些开关？

我的理解是第一行和第三行确实匹配单词边界，而第二行匹配有问题的文本（长短形式）。

我尝试用谷歌搜索（当然在这里搜索）但不幸的是，该图块属于 groovy 中的“匹配这个”运算符，所以我在这里找到的所有内容都是关于如何正则表达式的一般信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:46:04.457

波浪号在 groovy 或 Java 正则表达式中没有任何特殊含义。Groovy 根本不会改变 Java 对正则表达式的解释。的所有特殊字符都列在[`java.util.regex.Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html).

如果您删除`\p{Alnum}`字符类和转义的波浪号，您可以更容易地看到它`~`没有被特殊处理：

```
assert ("D" ==~ "(?:[^äöü~D~V~_])") == false
assert ("V" ==~ "(?:[^äöü~D~V~_])") == false
assert ("~" ==~ "(?:[^äöü~D~V~_])") == false
assert (" " ==~ "(?:[^äöü~D~V~_])") == true 
```

我会扔掉这些正则表达式。它们显然是错误的，并且被额外的字符混淆了。单词边界可以匹配，`\b`并且`\p{Alnum}äöü`几乎可以肯定是`\p{Alphabetic}\p{Digit}`正确处理 unicode。

# c# - 使用 ProcessStartInfo 执行批处理文件

> ID：11454644
> 
> 赞同：1
> 
> 时间：2012-07-12T14:57:22.817
> 
> 标签：c#, c#-4.0, c#-3.0

我正在使用 ProcessStartInfo 类来执行批处理文件。但我不太清楚如何正确使用它。当我执行批处理文件时，我们可以跟踪是否有任何错误。在我的场景中，批处理将启动另一个进程并成功启动它将继续执行。如果执行批处理文件有任何错误，它将退出。这是我正在使用的代码。

我还必须跟踪成功启动和失败。

```
internal bool ExecuteBatchFile(string fileName, int executionTime)
    {
        var exitCode = -1;
        var error = string.Empty;
        try
        {

            var hubStartInfo = new ProcessStartInfo
            {
                CreateNoWindow = false,
                FileName = fileName,
                UseShellExecute = false
            };

            var process = new Process { StartInfo = hubStartInfo };
            process.Start();
            process.WaitForExit(executionTime);

            if (process.HasExited)
            {
                exitCode = process.ExitCode;
                if (exitCode == 0)
                {
                    return true;
                }
                error = process.StandardError.ReadToEnd();
            }
            else
            {
                return true;
            }

            return false;
        }
        catch (Exception e)
        {
            return false;
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:11:30.347

有关启动进程的信息，请参见[此处](http://blogs.msdn.com/b/csharpfaq/archive/2004/06/01/146375.aspx)。示例 2 包含有关监视外部进程的信息

```
private void simpleRun_Click(object sender, System.EventArgs e)
{
  System.Diagnostics.Process.Start(@"C:\listfiles.bat");
} 
```

# rdlc - RDLC tablix 组页脚作为页脚

> ID：11454646
> 
> 赞同：1
> 
> 时间：2012-07-12T14:57:32.137
> 
> 标签：rdlc, ssrs-tablix

我正在尝试创建一份用于打印支票/付款确认的报告。检查本身位于页面顶部，在中间显示详细信息（1-N 条记录），并包含固定在页面底部的附加文本。底部的文本包含与支票本身相关的数据。

我尝试创建一个 tablix，使用检查本身的组标题和单个行详细信息的详细信息，但无法将 tablix 页脚与页面底部对齐。

尝试使用页脚部分时，我无法访问我的数据集。

我不认为我是第一个尝试类似功能的人，但我似乎找不到任何建议。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:37:35.423

Page Footer 是实现绝对页面底部定位的必要位置，但需要从当前数据访问数据的次要步骤。

页脚能够访问报告项目，但不能访问数据集，在我的情况下，这需要在主体中添加一个隐藏字段。然后页面页脚可以引用该隐藏字段的值。

**对象 1 / Tablix**

```
Name:  FieldRequiredByFooter
Value: DataSetProperty 
```

**对象 2/页脚**

```
Name:  FooterField
Expression: =ReportItems!FieldRequiredByFooter.Value 
```

如果您的页面包含数据列表，而不是单个项目，则需要修改表达式，类似于

```
=First(ReportItems!FieldRequiredByFooter.Value) 
```

[http://msdn.microsoft.com/en-us/library/ms252093(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms252093(v=vs.90).aspx)上的其他信息

# c - 在 C 语言中，如何使用作为字符串输入的函数名在运行时创建函数？

> ID：11454648
> 
> 赞同：2
> 
> 时间：2012-07-12T14:57:35.847
> 
> 标签：c, function-pointers, stringify

我正在阅读 c 中的**字符串化**运算符 (#)，它会粘贴任何附加到它的标记。我想知道是否可以使用字符串化运算符动态创建一个函数（带有 void 或非 void 参数）**（**和如果可能，宏 - #define) 。我想要以下代码结构：

```
#define #function_name(/*void or non void */)  void function_name(/*void or non void */)

char *function_name;
scanf("%s",function_name); 
```

像这样的东西。基本上我试图在运行时创建函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:05:39.650

做你需要的事情的一种hacky方式（你很可能不会对这个答案感到满意）如下：

1.  创建要编译的文本
2.  将其保存到文件中
3.  调用编译器（当然要确保它返回“成功”）
4.  调用链接器并生成 DLL（在 Windows 上）或共享库（在 *nix 上）
5.  动态加载该库并获取函数的入口地址
6.  通过指针调用你的函数

C/C++ 语言不提供将文本作为代码即时执行的机制（例如 JavaScript 的`eval("var i = 0;")`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:12:55.837

C 是一种静态编译的语言，因此它不会使在运行时创建函数变得容易，甚至通常是不可能的。您可以将所需的 C 代码写入 .c 文件，在系统上执行编译器，然后动态加载对象库。在写出初始 .c 文件的过程中，您可以将函数命名为您想要的任何名称。简而言之，使用宏不能做你想做的事。使用我刚才提到的方法是一个巨大的黑客攻击。可能，但不明智。

如果你只是想重命名一个函数，或者从你预先知道的有限的一组函数中选择并且可以编译到程序中，那么你可以使用函数指针。但这让我觉得与您尝试做的相反，因为函数指针为您提供了一个静态名称（符号），可用于调用变量函数。

如果您确实需要重命名函数指针，则可以保留一个函数指针数组，并使用字符串映射对它们进行索引。然后通过它们的字符串（名称）查找它们的指针来调用你的函数。该字符串当然是可变的，因此您可以更改函数的“名称”。但这是一条非常迂回的路线，老实说，我看不出这样做的充分理由。

最后，最有用和正确的解决方案是使用自己的符号表实现虚拟机。已经有实现了；[Python](http://docs.python.org/extending/embedding.html)和[Slang](http://www.jedsoft.org/slang/)浮现在脑海中。

# c# - ObjectDataSource 's' 找不到非泛型方法 GetAllUsers

> ID：11454649
> 
> 赞同：1
> 
> 时间：2012-07-12T14:57:43.677
> 
> 标签：c#, asp.net, sharepoint, sharepoint-2010, objectdatasource

我查看了网络并找到了很多答案，但没有一个可以帮助我解决这个问题！

我在数据项目中有一个方法。然后我有一个带有显示元素的项目。

代码隐藏：

```
public static DataTable GetAllobjs(SPWeb objWeb)
{
    DataTable tmpData = new DataTable();
    try
    {
        allProjects.Columns.Add(ColumnNames.1);
        allProjects.Columns.Add(ColumnNames.2);
        allProjects.Columns.Add(ColumnNames.3);
        allProjects.Columns.Add(ColumnNames.4);
        allProjects.Columns.Add(ColumnNames.5);
        allProjects.Columns.Add(ColumnNames.6);
        allProjects.Columns.Add(ColumnNames.7);
        allProjects.Columns.Add(ColumnNames.8);
        allProjects.Columns.Add(ColumnNames.9);

        //Get the raw project data 
        List<obj> data= DataAquisition.GetAllobj(objWeb);

        /// Loop through the raw data.
        foreach (obj currentInformation in data)
        {
            // Creates a new data row containing information required and adds it to the DATAtable
        }
    }
    catch (Exception exc)
    {
        // Logs errors here
    }
    return tmpData;
} 
```

在用户控件的后面（cs）页面中，我有一个调用 GetAllobjs（SPWeb objWeb）的方法

```
[DataObjectMethodAttribute(DataObjectMethodType.Select, true)]
public DataTable GetAllUsers()
{
    return Data.GetAllobjs(SPContext.Current.Web);
} 
```

然后页面加载：

```
ObjectDataSource d = new ObjectDataSource();
d.ID = "s";
d.SelectMethod = "GetAllUsers";
d.TypeName = SPGridView.GetType().AssemblyQualifiedName;
this.Controls.Add(d);
/// Apply a data source to the SPGrid View
SPGridView.DataSourceID = d.ID; 
```

然后在创建子控件上创建我的字段并将其绑定到 SPGridview 并调用数据绑定。

我认为这会起作用，但我得到了错误。我不确定我是否在某个地方遗漏了一些组件模型 [] 标签，我希望有人能指出我哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:04:26.687

改变：

```
d.TypeName = SPGridView.GetType().AssemblyQualifiedName; 
```

至：

```
 d.TypeName = this.GetType().AssemblyQualifiedName; 
```

示例：Default.aspx.cs

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

namespace Q11454649WebApp
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!this.IsPostBack)
            {
                ObjectDataSource d = new ObjectDataSource();
                d.ID = "s";
                d.SelectMethod = "GetAllUsers";
                //d.TypeName = SPGridView.GetType().AssemblyQualifiedName;
                d.TypeName = this.GetType().AssemblyQualifiedName;
                this.Controls.Add(d);
                /// Apply a data source to the SPGrid View
                SPGridView.DataSourceID = d.ID;
            }
        }

        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, true)]
        public string[] GetAllUsers()
        {
            return new string[] { "Joe", "Alan", "Michel" };
        }
    }                              
} 
```

默认.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" Codebehind="Default.aspx.cs" Inherits="Q11454649WebApp._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:GridView ID="SPGridView" runat="server" AutoGenerateColumns="False">
                <Columns>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text="<%# Container.DataItem %>"></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
        </div>
    </form>
</body>
</html> 
```

存档项目：[Q11454649WebApp.7z](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/Q11454649WebApp.7z)

# iphone - 在 UIAlertView 中为更多按钮腾出空间

> ID：11454652
> 
> 赞同：0
> 
> 时间：2012-07-12T14:57:48.320
> 
> 标签：iphone, xcode, uiscrollview, popup, uialertview

我可以在 UIAlertView 中实现一个滚动条来放置所有按钮吗？我有太多按钮无法放入弹出窗口。更好的解决方案？

```
- (IBAction)SortButton:(id)sender;

{
    UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle:@"" 
                          message:@""
                          delegate:self 
                          cancelButtonTitle:@"Cancel" 
                          otherButtonTitles:@"Name", @"Country", @"Popularity", @"Fill", @"Freshness", @"Price", @"Alcohol", nil];                                                                                                                                   
    [alert show];
    [alert release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:01:54.673

根据[iOS 人机界面指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html)使用[操作表](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006801)：

> 通常，使用双按钮警报... 包含三个或更多按钮的警报比两按钮警报复杂得多，应尽可能避免。事实上，如果你发现你需要为人们提供两个以上的选择，你应该考虑使用行动表来代替......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:01:58.607

最好的解决方案是使用弹出框（如果你是为 iPad 做的）。否则，创建一个看起来像警报的自定义视图。而且，是的，从技术上讲，您可以在 alertview 中添加Subview 滚动，但我不建议您这样做以显示一堆按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:00:54.470

更好的解决方案是没有那么多按钮。

除非您可以使用来自第三方的自定义警报视图，否则[这是一个不错的选择](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)。或者自己实现。

# c# - 报告问题

> ID：11454660
> 
> 赞同：0
> 
> 时间：2012-07-12T14:58:10.760
> 
> 标签：c#, sql-server-2008, ssrs-2008, crystal-reports-2010

我正在开发一个应用程序，该应用程序需要生成包含数据网格数据的报告（包括多个动态过滤器）。我的筛选当前从导致以下问题的 SQL 查询中获取结果集：我无法将多个 where 筛选器发送到 SSRS 或 Crystal 报表，因为它不允许我将字段绑定到动态生成的查询。

这是我的问题：有没有办法在 where 语句中创建具有无限条件的报告，或者创建一个带有动态 where 子句的存储过程，以便我可以将它与 CR 或 SSRS 一起使用？如果没有，是否有任何报告引擎可以让我在 where 子句中连接该过滤器？

注意：我使用 C# 4.0 以及 SQL Server 2008 Express（安装了 SSRS）和 SAP 的 Crystal Reports for Visual Studio 2010 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:43:51.103

在 Crystal Reports 中进一步挖掘之后，我发现使用命令和参数可以将 where 语句的一部分连接到查询中，这在一定程度上解决了我的问题。这不是报告应该如何完成的，所以我会尝试找到一种更清洁的方法来做到这一点。SSRS 只是不支持这一点，在存储过程的情况下，您必须使整个查询成为您执行的字符串，然后从该存储过程结果中查询，就好像它是一个表一样，坦率地说，这不值得麻烦.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:16:59.367

在定义过滤器时添加过滤器的一个简单技巧是在 where 子句中添加以下代码：

```
where (@param is null or @param = field) 
```

因此，如果`@param`未定义（空），则不应用过滤器。您可以构建更长的 where 子句，例如：

```
where (@param1 is null or @param1 = field1)
  and (@param2 is null or @param2 = field2)
  and (@param3 is null or @param3 = field3)
  and (@param4 is null or @param4 = field4)
  ... 
```

# linux - 如何在linux中读取鼠标向上和鼠标向下事件？

> ID：11454662
> 
> 赞同：0
> 
> 时间：2012-07-12T14:58:15.210
> 
> 标签：linux, events

我曾经在 Windows 中工作，如果在我的 C# wpf 应用程序中我想检测 mouse up 和 mouse down ，我使用 mouseup 事件来做到这一点。

现在我想用 C++ 开发一个简单的应用程序，它可以检测 Linux 中的鼠标向上和鼠标向下事件。我不知道如何进行，这是最好的方法以及使用哪些库。请指导我如何继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:26:15.363

你的问题太宽泛了......但无论如何我都会尝试。

您可以使用设备访问级别：

1.  您可以直接从`/dev/input/*`. 这并不难，但您的应用程序将需要 root 访问权限，否则您将不得不更改设备的权限。主要优点是您甚至无需创建与 X 服务器的连接即可读取鼠标。

2.  您可以作为 X 客户端工作：

    一个。你可以直接使用X访问，Xlib（不是很推荐）。

    湾。您可以使用工具包库，例如 GTK+、Qt 或 WxWidgets，仅举几例。

使用选项 2。如果您想从其他应用程序获取 Windows 中发生的事件，您可能会遇到困难。YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:28:07.827

一个非常简单快捷的解决方案可能是[libxdo](http://www.semicomplete.com/files/xdotool/docs/html/)。

# php - 域对象实例的水合

> ID：11454664
> 
> 赞同：2
> 
> 时间：2012-07-12T14:58:20.290
> 
> 标签：php, orm, doctrine-orm

我正在使用教义查询来接收域对象的单个实例：

```
$entity = $query->getSingleResult(); 
```

现在我想在收到 $entity 之后对其进行水合，以便 $entity 是一个数组（就像使用 \Doctrine\ORM\Query::HYDRATE_ARRAY 接收它时一样）。

我正在寻找这样的东西：

```
$doctrine->hydrate($entity, \Doctrine\ORM\Query::HYDRATE_ARRAY); 
```

有没有办法使用 Doctrine 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:56:57.533

我也在找同样的东西，但没有找到。
由于循环引用，序列化实体存在一些无限递归问题。

最后，我基于这个[例子推出了自己的序列化函数](https://gist.github.com/1034079#file_serializable_entity.php)

# couchdb - 如何查询 CouchDB 数据库中包含匹配值的所有文档？

> ID：11454672
> 
> 赞同：0
> 
> 时间：2012-07-12T14:58:48.013
> 
> 标签：couchdb

我对 CouchDB 的世界还很陌生，刚刚了解了整洁的视图世界。我做了一些阅读，但我不确定它是如何工作的。我的问题是如何查询数据库中的所有文档以获取匹配值？我想搜索一堆包含一个名为的对象的文档`username`，并且只返回包含该对象的文档的 ID...

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:12:18.840

应该是一个直截了当的地图功能，除非我误解或遗漏了什么。

```
function (doc) {
    if (doc.username) {
        emit(doc.username);
    }
} 
```

该文档`_id`已经成为您视图结果的一部分，因此您可以自己发出用户名。如果您添加`include_docs=true`到您的查询字符串，您也可以获得整个文档。

# java - 无论如何要将构造函数参数传递给 JAXB 适配器？

> ID：11454673
> 
> 赞同：11
> 
> 时间：2012-07-12T14:58:47.970
> 
> 标签：java, spring, jaxb, adapter

我在我编写的 Web 服务中使用 Spring 3 IOC 和 JAXB/JAX-WS。我现在在返回给消费者之前必须四舍五入的数据有一个小问题，因为它们无法处理值的完整精度。

为了尽量减少对 WS 设计和计算的影响，我选择使用 Jaxb XmlAdapter 在编组响应时对值进行舍入。一切正常。

我现在的问题是我想让它变得灵活。即：在某些情况下，我需要四舍五入到小数点后 2 位，有些是 4 位，等等。现在，我必须创建一个 TwoDecimalAdapter 和一个 FourDecimalAdapter 并在我的模型定义中必要时使用适当的一个。这意味着代码重复。

无论如何创建一个通用的舍入适配器，并将参数传递给它？例如，而不是：

```
@javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter(value=FourDecimalRoundingAdapter.class,type=java.math.BigDecimal.class) 
```

我希望能够做类似的事情：

```
@javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter(value=new RoundingAdapter(4),type=java.math.BigDecimal.class) 
```

显然，当 JAXB 实例化适配器本身时，这不起作用，但是我可以使用任何技术将参数传递给适配器吗？我很想能够在 Spring 中声明舍入适配器并以这种方式使用它，但同样，我无法设计出可重用的解决方案。

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-01-31T12:14:34.153

用法

```
import com.company.BigDecimalAdapter.X$XXXX;
...

@XmlElement(name = "QTY")
@XmlJavaTypeAdapter(X$XXXX.class)
private BigDecimal quantity; 
```

大十进制适配器

```
import static java.math.RoundingMode.HALF_UP;
import java.math.BigDecimal;
import java.text.DecimalFormat;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class BigDecimalAdapter extends XmlAdapter<String, BigDecimal> {

    public static final class X$XX extends BigDecimalAdapter {
        public X$XX() {
            super("#.##");
        }
    }

    public static final class X$00 extends BigDecimalAdapter {
        public X$00() {
            super("#.00");
        }
    }

    public static final class X$XXXX extends BigDecimalAdapter {
        public X$XXXX() {
            super("#.####");
        }
    }

    private final ThreadLocal<DecimalFormat> format;

    public BigDecimalAdapter(String pattern) {
        format = ThreadLocal.withInitial(() -> {
            DecimalFormat df = new DecimalFormat(pattern);
            df.setRoundingMode(HALF_UP);
            return df;
        });
    }

    @Override
    public String marshal(BigDecimal v) throws Exception {
        return format.get().format(v);
    }

    @Override
    public BigDecimal unmarshal(String v) throws Exception {
        return new BigDecimal(v);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:22:07.947

我不确定您如何将其与 Spring 挂钩，但下面是您可以利用的 JAXB 机制的描述。

如果您有以下情况：

```
@javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter(value=RoundingAdapter.class,type=java.math.BigDecimal.class) 
```

然后使用独立的 JAXB API，您可以执行以下操作。下面的代码意味着无论何时`RoundingAdapter`遇到 ，都应使用指定的实例。

```
marshaller.setAdapter(new RoundingAdapter(4));
unmarshaller.setAdapter(new RoundingAdapter(4)); 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/09/mixing-nesting-and-references-with.html](http://blog.bdoughan.com/2011/09/mixing-nesting-and-references-with.html)

# c# - 向未安装 SDK 的用户部署 Resharper 插件

> ID：11454674
> 
> 赞同：1
> 
> 时间：2012-07-12T14:58:49.513
> 
> 标签：c#, visual-studio-2010, visual-studio, resharper, resharper-plugins

我写了一个 Resharper 插件，它似乎只在用户安装了 Resharper SDK 时才起作用。有没有办法将所需的库打包到插件 dll 中，以便用户只需将 dll 放到他们的 Resharper 插件目录中，以便 Visual Studio 识别它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:17:35.183

你不需要打包库，只需要你的插件。如果它不起作用，请在`Plugins`选项页面上检查它，看看它是否已加载。页面底部有一个开发者日志链接。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-12T15:08:56.850

这可能不能完全解决您的问题，但是在项目的“参考”虚拟文件夹中，如果您转到其中一个参考的属性，则您具有“复制本地”的属性，这会将 DLL 复制到输出目录。如果您对来自 SDK 的所有引用执行此操作，它可能会起作用。

我为没有安装 asp.net MVC 的 Web 服务器执行此操作，但我的项目是。

编辑：将属性设置为*true*

# sql-server-2008 - 搜索存储过程和视图使用的表的简单方法？

> ID：11454678
> 
> 赞同：1
> 
> 时间：2012-07-12T14:59:00.207
> 
> 标签：sql-server-2008, tsql

我在 SQL Server 2008 中有几张表。我想查找使用该表的所有存储过程和视图的列表。我是 SQL Server 的新手，我认为必须有一种简单的方法，而不是打开每个视图和存储过程并搜索表名。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:59:43.400

```
SELECT OBJECT_SCHEMA_NAME(object_id),
  OBJECT_NAME(object_id)
FROM sys.sql_modules
WHERE [definition] LIKE '%table name%'; 
```

这比依赖视图更可靠一点，因为它们依赖于以正确顺序编译的对象。

但有一些警告：

* * *

当然，这有可能导致误报，因为您可能有

```
-- table name 
```

或者，您正在搜索的表名可能是在其他代码中自然出现的常用词，即使它没有引用该特定表。

* * *

这可能会丢失引用，例如，如果您动态构建字符串或将表名传递给动态 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:02:31.567

如果您使用的是 SSMS，只需右键单击对象资源管理器中的表并选择“查看依赖项”。

# c - 获取实验变量时使用变量

> ID：11454680
> 
> 赞同：0
> 
> 时间：2012-07-12T14:59:03.243
> 
> 标签：c

我在 ini 文件中有一个服务器端口列表。为了得到这些并将它们加载到一个列表中，我使用了一个 for 循环。我如何使用变量来使其工作。

```
ServerAmount = 8;
int z;
ServerPort[];
for ( z = 0; z < ServerAmount; z++ )
{
  if(getenv('SERVERPORT[z]') != NULL)
  {
      ServerPort[z] = getenv('SERVERPORT[z]');
  }
} 
```

所以简单地说，我如何让 z 作为数字传递。（即服务器端口[1]）

PS。对不起，如果这是菜鸟问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:03:32.397

你应该使用`sprintf`，让我知道这是否适合你：

```
ServerAmount = 8;
int z;
ServerPort[];
for ( z = 0; z < ServerAmount; z++ )
{
  char tmp[20];
  sprintf(tmp, "SERVERPORT[%i]", z);
  if(getenv(tmp) != NULL)
  {
      ServerPort[z] = getenv(tmp);
  }
} 
```

编辑：顺便说一句，`ServerPort[]`是无效的。你可能想写这样的东西：

```
char *ServerPort[8]; 
```

# css - 创建在 CSS 中出现的按钮

> ID：11454682
> 
> 赞同：2
> 
> 时间：2012-07-12T14:59:10.097
> 
> 标签：css

我正在将基于图像的按钮转换为我正在处理的应用程序的纯 CSS 按钮。这是当前图像的示例：

放大尺寸：

![放大图像](../Images/a75c16716ca6b74248ba93ae7fc055fb.png)

底座尺寸：

![基本尺寸](../Images/8fb8f7131de2d089c991fcfebff97eb4.png)

这就是我目前所处的位置：http: [//dabblet.com/gist/3098607](http://dabblet.com/gist/3098607)

我在复制时遇到的问题是按钮有一个阴影，使它看起来有点凸起。我没有运气尝试用`box-shadow`.

有人知道如何复制这种效果吗？任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:04:08.670

尝试使用[http://css3ps.com/](http://css3ps.com/) - 该服务可以尝试模仿您的 Photoshop 图层样式。还有替代 PS 插件[http://csshat.com/](http://csshat.com/)（但不是免费的），这对我有很大帮助。

**更新：**

[创建了 JSFiddle](http://jsfiddle.net/fedosov/xepX4/2/)，试图在 CSS3 中实现你的按钮。请写一些反馈——这些是你要找的机器人吗？

也许阴影必须向左移动 1px，但这不是重点。

**更新 2：**

或者，也许（我反复重读问题试图找出必要的行为），你会喜欢这样：[点击](http://jsfiddle.net/fedosov/xepX4/3/)。

           ![例子](../Images/72c861c52e07b9fa5d406a8385b58b99.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:02:47.937

看看这个： http: [//jsfiddle.net/xdWmd/4/](http://jsfiddle.net/xdWmd/4/)
它使用了一点 CSS 让它看起来有点凸起。

# java - a4j:commandLink 与 onClick 返回 true 或 false 不能正常工作

> ID：11454683
> 
> 赞同：3
> 
> 时间：2012-07-12T14:59:10.247
> 
> 标签：java, jsf, richfaces

我的代码如下所示，

```
<a4j:commandLink  oncomplete="openSignatureModel();" id="requestText"  reRender="sigPassword"  title="Send Prescription"
actionListener="#{patientNotePresBackingBean.sendPrescriptionId}"
onclick="return pharmacyCheck('#{row}');"> 
<f:param name="sendPrescriptionId" value="#{patientNotePrescriptionVar.id}" />
<f:param name="processOfPrescription" value="Send" />
<h:graphicImage value="/images/send-prescribe.png" style="border:0;"></h:graphicImage>
</a4j:commandLink> 
```

我的java脚本就像......

```
function pharmacyCheck(rowID) {
    var a = document.getElementById("prescriptionId:patientNotePresListId:"+rowID+":pharmacyRcopiaId");
    if(a.value == -1) {
        alert("Please select Pharmacy");
        return false;
    } else {
        return true;
    }

} 
```

实际上，当它返回 true 时，它​​应该调用**patientNotePresBackingBean.sendPrescriptionId** 对吗？

但它不一样......有什么理由吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T15:04:09.353

当您看到生成的 HTML 时，按钮/链接的 onclick 方法中会出现如下内容：

```
onclick="return pharmacyCheck('#{row}');;A4J.AJAX.Submit(..." 
```

所以onclick一开始就返回，不会发送ajax提交。要解决您的问题，请以这种方式使用您的 javascript 方法：

```
<a4j:commandLink onclick="if (!pharmacyCheck('#{row}')) return false;" ...> 
```

编辑：进一步解释：

当你有这样的 JavaScript 代码时：

```
function X() {
    return false;
    alert("this alert won't be shown =(");
} 
```

显然，警报永远不会触发。因此，检查为 onclick 生成的 HTML（特别格式化以查看相似之处）：

```
onclick="
    return functionX();
    alert('this alert will not display either X_x');
    A4J.AJAX.Submit(...
" 
```

onclick 代码不会触发，因为您在执行代码之前返回了一些内容。更改只会拦截`false`值并返回，如果您的方法返回`true`，其余代码将被执行。

注意：默认情况下，任何不返回任何内容的 javascript 方法都会返回 false。

# c# - 如何在 C# 中将 List 的项目拆分为两个？

> ID：11454684
> 
> 赞同：-4
> 
> 时间：2012-07-12T14:59:12.150
> 
> 标签：c#

我有一个 List<> 像这样填充：

```
ID mukey FieldID 类型 PercentOfField 英亩
-------------------------------------------------- -------------
1 1709649 191 未成年人 18 12.5181
2 1709641 191 未成年人 1 0.49621
3 1709620 191 严重、严重 72 49.4322
4 1709622 191 未成年人 9 5.89865

```

我想将第 3 项的主要类型为关键，并将其拆分为具有完全相同数据的两条记录，但其中一条记录的类型为主要，另一条记录的类型为关键。如果我使用 foreach 遍历列表，我可以将此记录分成两部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:05:29.920

您的意思是（未经测试且在我脑海中）：

```
var splitList = myList.SelectMany(x => x.Type.Split(", ").Select(t => new myClass(x.ID, x.mukey, x.FieldID, t, x.PercentOfField, x.Acres)).ToList(); 
```

当然，这会为内存中的每一行创建一个新副本，因此它可能不是长表的*最佳*解决方案......也许这更好（再次未经测试，但你明白了）：

```
var splitList = myList.SelectMany(x => x.Type.Contains(", ") ? x.Type.Split(", ").Select(t => new myClass(x.ID, x.mukey, x.FieldID, t, x.PercentOfField, x.Acres) : new myClass[] {x}).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:09:08.550

您只需要在该列中找到具有多个值的任何项目，然后将其删除并重新添加多次，每个值一次。例如，假设您的列表是一个制表符分隔的字符串列表，这样的事情应该可以工作：

```
List<string> records = "...";
foreach (string record in records.ToArray())
{
    string[] fields = record.Split('\t');
    string[] types = fields[3].Split(',');
    if (types.Length > 1)
    {
        records.Remove(record);
        foreach (string type in types)
        {
            fields[3] = type.Trim();
            records.Add(string.Join('\t', fields));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:23:28.057

我在一个应该可以解决问题的控制台应用程序中快速编写了这段代码......假设您正在处理一个具有类似于以下定义的强类型：

```
public class MyObject
{
    public int ID { get; set; }
    public string Mukey { get; set; }
    public int FieldID { get; set; }
    public string Type { get; set; }
    public int PercentOfField { get; set; }
    public double Acres { get; set; }
} 
```

使用以下内容将满足您的要求（如果我正确理解了这个问题）

```
var myList = new List<MyObject>()    {
    new MyObject { ID = 1, Mukey = "1709649", FieldID = 191, Type = "Minor", PercentOfField = 18, Acres = 12.5181 },
    new MyObject { ID = 2, Mukey = "1709641", FieldID = 191, Type = "Minor", PercentOfField = 1, Acres = 0.49621 },
    new MyObject { ID = 3, Mukey = "1709620", FieldID = 191, Type = "Minor, Critical", PercentOfField = 72, Acres = 49.4322 },
    new MyObject { ID = 4, Mukey = "1709622", FieldID = 191, Type = "Minor", PercentOfField = 9, Acres = 5.89865 }
};

for (int i = 0; i < myList.Count; i++)
{
    //check if the type is comma delimited
    if (myList[i].Type.Contains(","))
    {
        //get the separate types
        string[] types = myList[i].Type.Split(',');

        var item = myList[i];
        myList.RemoveAt(i);

        //for each type, add a new entry in the list
        foreach (string theType in types)
        {
            myList.Insert(
                i,
                new MyObject
                {
                    ID = item.ID,
                    Mukey = item.Mukey,
                    FieldID = item.FieldID,
                    Type = theType.Trim(),
                    PercentOfField = item.PercentOfField,
                    Acres = item.Acres
                }
            );
            // add to i to offset the count for the additional items 
            // (we want to skip the new items)
            i++;
        }
    }
} 
```

# internet-explorer - 如何使预先验证的 iframe 在 IE 中工作？

> ID：11454686
> 
> 赞同：1
> 
> 时间：2012-07-12T14:59:21.227
> 
> 标签：internet-explorer, iframe, internet-explorer-8, http-authentication

在[上一个问题](https://stackoverflow.com/questions/11439927/how-can-i-http-authentication-login-with-javascript-for-an-iframe)中，我询问了如何使 iframe 预先验证 http auth。事实证明我已经有了答案，但它似乎已经停止在 IE 8 或 9 中工作。这是我的精简 iframe，它在 chrome 和 firefox 中完美运行：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
  <head>
    <title>yay.</title>
  </head>
  <body>
    <iframe width="800" height="800" src="http://user:pass@10.6.1.99"></iframe>
  </body>
</html> 
```

我猜它必须是一些深奥的新 IE 安全设​​置才能使这项工作。谁能告诉我如何设置它以使此代码正常工作？

# java - 如何使 JDialog 无框架？

> ID：11454687
> 
> 赞同：0
> 
> 时间：2012-07-12T14:59:28.563
> 
> 标签：java, frame, jdialog

我的对话框示例如下：

```
public class DialogNotify extends JDialog{
   public DialogNotify() {
      setModal(true);
      setSize(200, 100);
      setVisible(true);
   }
} 
```

如何让它显示无框？无框，我的意思是右上角的“关闭”按钮或左上角的菜单栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:38:44.853

我发现了这个主题的博客条目：[制作自定义无框窗口](https://web.archive.org/web/20170510191837/http://www.stupidjavatricks.com/2005/09/making-a-custom-frameless-window/)

关键似乎是调用`setUndecorated(true)`来抑制框架和标题栏。

# matlab - 带有动画的 MATLAB 4D（3d + 颜色）绘图

> ID：11454688
> 
> 赞同：0
> 
> 时间：2012-07-12T14:59:33.177
> 
> 标签：matlab, animation, colors, 3d, avi

我有 3 组 30 个数据点 X、Y、Z。我想制作第四维颜色。然而，我想使用的第 4 个维度的长度与我的 X、Y、Z（133 对 30）不同。

这是在 MATLAB 中使用 scatter3 函数时的问题，因为颜色维度必须与 X、Y、Z 的大小匹配。

我还想以 .avi 格式为这个情节制作动画，并随着电影的进行而改变第 4 维（颜色）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:39:59.900

创建一个 2D 或 3D 矩阵来定义您的颜色：如果您使用索引到颜色图中的颜色，则为 2D，如果您想提供 RGB 值，则为 3D。

```
X=1:30;Y=randperm(30);Z=ones(size(X));
voltage_matrix = ...; %# 30 by 133 
cdata = voltage_matrix;
handle = scatter3(X,Y,Z);

colormap('jet')
set(gca,'clim',[min(voltage_matrix) max(voltage_matrix)])

for t=1:size(cdata,2) %# 1 to 133
    set(handle, 'cdata', cdata(:,t));
    pause(.1)
end 
```

编辑：注意颜色图和轴的“clim”属性。

# c++ - 如何更改 QTableView 的标题背景颜色

> ID：11454694
> 
> 赞同：14
> 
> 时间：2012-07-12T14:59:50.403
> 
> 标签：c++, qt, qtableview, qabstracttablemodel

以下是我目前尝试过的。标题文本正确更改颜色，但背景不会更改默认值。

```
template<typename T>
inline QVariant TableModel<T>::headerData(int section, Qt::Orientation orientation, int role) const
{
    //...
    else if(role == Qt::BackgroundRole) {
        return QBrush(m_display.headerBackground);
    }
    //...
} 
```

如何设置背景颜色？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-12T16:29:08.673

您可以在 QTableView 上设置样式表

```
ui->tableView->setStyleSheet("QHeaderView::section { background-color:red }"); 
```

有关更多信息，请参阅[http://doc.qt.io/qt-4.8/stylesheet-examples.html](http://doc.qt.io/qt-4.8/stylesheet-examples.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:47:03.743

这是一个替代解决方案。

```
MyTableView::MyTableView( QWidget* parent ) : QTableView( parent )
{
    ...
    // Make a copy of the current header palette.
    QPalette palette = horizontalHeader()->palette();

    // Set the normal/active, background color
    // QPalette::Background is obsolete, use QPalette::Window
    palette.setColor( QPalette::Normal, QPalette::Window, Qt::red );

    // Set the palette on the header.
    horizontalHeader()->setPalette( palette );
} 
```

# excel - 使用 VBA 在 Microsoft Office Excel 中操作嵌入的文本文件

> ID：11454695
> 
> 赞同：1
> 
> 时间：2012-07-12T14:59:51.833
> 
> 标签：excel, vba

**你好，**

我必须能够阅读嵌入在 Microsoft Office Excel 中的纯文本文件 (.txt) 的内容。（双击图标即可访问。）

根据我在网络上的研究，它存储为 OLEObject。但是，我找不到访问数据的方法！

我注意到，当我双击代表文本文件的图标时，后者是在我可以使用的临时文件夹中创建的。但是，我希望能够以编程方式使用该数据，而不必双击图标。

**我希望我的描述足够清楚，谢谢你的考虑。**

# mysql - 从触发器调用包含动态 SQL 的存储过程

> ID：11454699
> 
> 赞同：5
> 
> 时间：2012-07-12T15:00:05.270
> 
> 标签：mysql, stored-procedures, triggers, dynamic-sql

我从触发器调用存储过程，我收到以下错误：

> 存储函数或触发器中不允许使用动态 SQL

为什么会发生这种情况，动态SQL是在存储过程中执行的，该存储过程是从触发器调用的。也许这就是问题所在，如果是这样，有什么解决方法吗？

编辑（添加代码）：

这是来自主表的触发器：

```
-- Trigger DDL Statements
DELIMITER $$

USE `TestaDataBase`$$
CREATE TRIGGER `TestaDataBase`.`UpdateAuxilaryTable`
AFTER INSERT ON `MainTable` FOR EACH ROW  
BEGIN    
    /* Here we call stored procedure with parameter id of newly inserted row. */
    CALL TestProcedure('Year', 'Person', 'IdPerson', NEW.IdData);
END
$$ 
```

这是从触发器调用的存储过程：

```
DELIMITER $$
CREATE PROCEDURE `TestDataBase`.`TestProcedure` (IN attribute CHAR(64), IN tableName CHAR(64), IN IdTable CHAR(64), IN IdLastRow MEDIUMINT)
BEGIN
DECLARE selectedValue MEDIUMINT;

SET @statement = CONCAT('SELECT ', attribute, ' FROM ', tableName, ' WHERE ', IdTable, ' = ', IdLastRow, ' INTO selectedValue');
PREPARE statementExecute FROM @statement;
EXECUTE statementExecute ;
...
...
END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T12:05:15.280

您不能使用触发器中的准备好的语句调用存储过程

[http://dev.mysql.com/doc/mysql-reslimits-excerpt/5.1/en/stored-program-restrictions.html](http://dev.mysql.com/doc/mysql-reslimits-excerpt/5.1/en/stored-program-restrictions.html)

有一种可能的解决方法，但需要您编写一个 UDF 来为您执行动态 sql，然后从您的过程中调用 UDF。您可以在 mysql 的 src sql/udf_example.c 中找到示例 UDF。

# iphone - 如何在分离的 UITableViewCell 和另一个视图之间执行 segue

> ID：11454700
> 
> 赞同：1
> 
> 时间：2012-07-12T15:00:06.053
> 
> 标签：iphone, ios, xcode, uitableview, tableview

这是我所拥有的：

带有 A UIViewController 的情节提要，其中包含`UITableView`. 在它旁边，我有一个`UITabBarController`可以处理 5 个其他视图的视图。

`ViewController`我在和之间定义了一个“通用”segue `TabBarController`，以便能够在之后调用它。

这是我的故事板的子视图：

![在此处输入图像描述](../Images/5bcd4a8131db60d7ef071b41570c018e.png)

对于我的 UITableView，我`UITableViewCells`在单独的 .xib 文件中创建了两个自定义。

`performSegueWithIdentifier:`当我单击其中一个单元格时，我真的不知道如何告诉我的应用程序，因为我无法在 IB 中直接在单元格和目标视图之间设置 segue。

谁能给我一些有关如何正确执行此操作的提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:04:03.970

在您的`tableView:didSelectRowAtIndexPath:`（或类似方法）的实现中，您可以通过调用`-[UIViewController performSegueWithIdentifier:sender:]`. 您可以在情节提要中的 segue 上设置标识符。

对于发送者，您可以传递 UITableViewCell 实例，或您想要传递的任何其他对象。这将在视图控制器调用您的`prepareForSegue:sender:`方法时使用，并且是确定用户点击什么导致转场的好方法。然后你可以使用这个发送者/上下文准备下一个视图控制器。

# batch-file - 批处理脚本查找丢失的序列号

> ID：11454701
> 
> 赞同：0
> 
> 时间：2012-07-12T15:00:12.430
> 
> 标签：batch-file

我是批处理脚本的新手，

我正在获取格式为 ABC_CDEFG_HIJK_20120712105523_000001 的源文件（时间戳和序列都不会改变）它可以是单个文件或每 30 分钟的多个文件。我需要找出列表中是否缺少任何序列号并向用户发送警报。谁能帮我这个。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:00:40.320

假设没有扩展，

```
@echo off
setlocal enabledelayedexpansion

for /l %%a in (1,999999,1) do (
set test1=000000%%a
set test2=!test1:~-6!
if not exist *!test2! goto loopexit
)

:loopexit
echo %test2% missing 
```

如果有扩展名，请将其添加到该`if not exist`行，例如`if not exist *!test2!.txt goto loopexit`
它用于`test2`测试文件名，因为这是一个包含所有额外零的文件名，而您没有从循环中获得`%a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:59:49.540

**选项1**

我已经测试了以下内容，并且可以正常工作。*（我的原始代码没有测试最后一个基本文件名。此代码已修复）*

此版本以 alpha 顺序遍历文件并记住先前的文件名。当检测到碱基名称发生变化时，它会在先前的碱基名称序列中查找间隙。最后一个基本名称不在循环中测试，因此必须在循环之后进行测试。

```
@echo off
setlocal disableDelayedExpansion
set "ext=.txt"
set "lastName="
for /f "eol=: delims=" %%F in ('dir /b /a-d *%ext% ^| findstr /irec:"_[0-9][0-9][0-9][0-9][0-9][0-9]%ext%"') do (
  set "name=%%~nF"
  setlocal enableDelayedExpansion
  if defined lastName if "!lastName:~0,-6!" neq "!name:~0,-6!" (
    for /f "delims=0" %%I in ("!lastName:~-6!") do (
      for /l %%N in (1 1 %%I) do (
        set "n=000000%%N"
        set "test=!lastName:~0,-6!!n:~-6!!ext!"
        if not exist "!test!" echo "!test!" is missing
      )
    )
  )
  endlocal
  set "lastName=%%~nF"
)
setlocal enableDelayedExpansion
if defined lastname (
  for /f "delims=0" %%I in ("!lastName:~-6!") do (
    for /l %%N in (1 1 %%I) do (
      set "n=000000%%N"
      set "test=!lastName:~0,-6!!n:~-6!!ext!"
      if not exist "!test!" echo "!test!" is missing
    )
  )
) 
```

**选项 2**

这是另一个使用较少代码的版本（也经过测试和工作）。它以字母顺序遍历文件并构造一个变量，其名称中的基本名称和序列号作为值。星号用于分隔名称和值的部分。使用了一些技巧，以便`=`文件名中的 a 不会破坏代码。但是，如果名称中包含多个基本名称`=`，则它们必须在 之前进行区分，否则`=`只会测试这些名称中的一个。

循环完成后，每个基本名称都有一个变量，其值中具有最大序列号。第二个循环迭代并将变量解析为基本名称和最大序列号，然后查找序列号中的间隙。

```
@echo off
setlocal disableDelayedExpansion
set "ext=.txt"
for /f "delims==" %%A in ('2^>nul set file*') do set "%%A="
for /f "eol=: delims=" %%F in ('dir /b /a-d *%ext% ^| findstr /irec:"_[0-9][0-9][0-9][0-9][0-9][0-9]%ext%"') do (
  set "name=%%~nF"
  setlocal enableDelayedExpansion
  for /f "delims=" %%A in ("file*!name:~0,-6!*=*!name:~-6!") do (
    endlocal
    set %%A
  )
)
for /f "tokens=2,4 delims=*" %%A in ('set file*') do (
  set "name=%%A"
  setlocal enableDelayedExpansion
  for /l %%N in (1 1 %%B) do (
    set "n=000000%%N"
    set "test=!name!!n:~-6!!ext!"
    if not exist "!test!" echo "!test!" is missing
  )
  endlocal
) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-04T15:04:03.073

```
ls -1|awk -F "_" '{print $4}'|cut -d. -f1 >seq.txt

awk 'p && p != $1 { for( i = p; i < $1; i++ ) print i; } {p = $1 + 1 }'  seq.txt 
```

# git - 从 BitBucket 下载和合并文件

> ID：11454704
> 
> 赞同：3
> 
> 时间：2012-07-12T15:00:18.767
> 
> 标签：git, bitbucket

我是 Git 新手，所以请放轻松。

我正在与另一个人一起研究存储在 BitBucket 上的项目。因此，每当他进行任何更改时，我如何下载它们并将任何更改的文件合​​并到我的项目文件夹中？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T21:19:00.200

您首先需要您的同事在 bitbucket 上使用您的用户名共享存储库，一旦完成，您必须先克隆存储库：

例如：

```
git clone https://username@bitbucket.org/username/repository.git 
```

这将检查位桶中的代码。如果你已经做了这么多，你可以进入目录然后输入：

```
git pull 
```

这将拉取对 bitbucket 存储库的所有最新更改。

你真的需要有一天坐下来读一读:) [http://git-scm.com/book/](http://git-scm.com/book/)

希望对一些人有所帮助。

# javascript - 在客户端而不是在服务器上将 PDF 转换为字节

> ID：11454714
> 
> 赞同：0
> 
> 时间：2012-07-12T15:00:51.960
> 
> 标签：javascript, jquery, asp.net-mvc

我的 asp.Net MVC 应用程序需要存储一个字节数组，该数组表示数据库中每条记录的用户选择的 PDF 文件。SQL 列是 Varbinary(max)。

我正在考虑的方法是使用 Telerik 的（最棒的）KendoUI Upload 控件将选定的 PDF 异步上传到控制器方法。控制器方法使用 System.IO 命名空间中的类将 PDF 转换为字节，然后我在 Json 结果中返回该字节数组。我在页面上有一个等待此结果的事件处理程序，然后将该字节数组写入隐藏输入，然后当用户单击保存按钮时将其与记录的其余部分一起保存，将表单发送回服务器.

我的直觉是我在这里有一些令人讨厌的低效率......

1.  pdf 被发送到服务器（可能已经在上传控件创建的某种形式的字节数组中）。

2.  上传方法的结果返回一个字节数组回页面。

3.  然后页面提交表单回发，其中包含将保存到数据库的字节数组。

我的想法是第 3 步是这里唯一需要的网络流量。有没有什么方法可以在客户端上进行从 PDF 文档到字节数组的转换？什么聪明的 JavaScript/jQuery 会做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:04:51.600

这里：

> 控制器方法使用 System.IO 命名空间中的类将 PDF 转换为字节，然后我在 Json 结果中返回该字节数组。我在页面上有一个等待此结果的事件处理程序，然后将该字节数组写入隐藏输入，然后当用户单击保存按钮时将其与记录的其余部分一起保存，将表单发送回服务器.

将此逻辑更改为：

> 控制器方法使用 System.IO 命名空间中的类将 PDF 转换为字节，并将其保存到数据库并返回 Json 结果。指示此操作的成功或失败。没有更多的隐藏字段，没有更多的字节数组。当客户端提交表单时，文件不应再发送到服务器，因为它已经发送并存储在数据库中。因此，在将处理表单提交的控制器操作中，我将其他表单字段与数据库记录中的文件相关联。

# php - 有什么方法可以防止 Facebook::getLogoutUrl() 从 Facebook.com 注销？

> ID：11454717
> 
> 赞同：-1
> 
> 时间：2012-07-12T15:01:01.840
> 
> 标签：php, facebook

[当我使用Facebook::getLogoutUrl](https://developers.facebook.com/docs/reference/php/facebook-getLogoutUrl/)时，如何防止从 Facebook.com注销？

这是注销的代码：

```
$next = 'ABSOLUTE_URL_TO_MY_INDEX_PAGE'; 
$facebookApi->destroySession();
$logoutUrl = $facebookApi->getLogoutUrl(array(
        'next' => $next,
            ));
header('Location: ' . $logoutUrl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:03:54.487

> 当我使用 Facebook::getLogoutUrl 时，如何防止从 Facebook.com 注销？

此方法的**目的**也是使用户退出 Facebook。

根据[平台政策](https://developers.facebook.com/policy/)，您**需要**有一个链接来执行此操作：

> I. 特性和功能，6.：*您的网站必须提供明确的“注销”选项，该选项也会使用户退出 Facebook。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:03:55.390

`getLogoutUrl`不重定向您的用户...实际上重定向您的用户的是您的`header('location: ...')`命令。

消除 -

```
header('Location: ' . $logoutUrl); 
```

在变量中包含 URL 后`$logoutUrl`，您可以将其放置在锚标记中，并允许您的用户自行注销...

```
<?php
  echo '<a href="'.$logoutUrl.'"  >Log out</a>';
?> 
```

# java - Java：正则表达式与 if 语句

> ID：11454719
> 
> 赞同：3
> 
> 时间：2012-07-12T15:01:12.943
> 
> 标签：java, regex, if-statement

我有一个数组，我想在其中搜索以“test”开头的字符串（例如）；搜索这些集合前缀的最有效方法是什么？正则表达式还是 if 语句？

正则表达式：

```
 boolean found = false;
    for (String line: ArrayList){
                Pattern pattern = 
                Pattern.compile("^test"); //regex

                Matcher matcher = 
                pattern.matcher(line);

                while (matcher.find()) {
                    found = true;
                }
                if(found){
                    doSomething();
                         } 
                    }
                } 
```

if 语句：

```
for (String line : ArrayList) {
       if (line.startsWith("test"){
            doSomething();
            } 
```

哪个效率最高？

哪种方法对较长的字符串最有效？

如果我想找到以“test”开头的字符串，但只有在“test”之后有“foo”的字符串，哪种方法更好？

如果正则表达式是答案，那么正确的语法是什么，以“test”开头，后跟“foo”或“bar”，但不能同时使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T15:04:16.407

4 行代码与 16 行代码相比？没关系，哪个运行得更快，4 行版本编写效率更高，维护效率更高。

如果您有一些代码并对其进行了基准测试并确定了特定的瓶颈，那么可能会考虑使其更复杂，否则每次都使用更简单的版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T15:03:17.313

只需使用`startsWith`. 正则表达式有点矫枉过正，除非您想接受带有前导空格的字符串。

`startsWith`可以与“test”甚至“testfoo”一起使用。如果您的意思是它`"foo"`可以出现在`"test"`(ie `"testokokokfoonothing"`) 之后的输入中的任何位置，那么这里应该使用正则表达式。

您的正则表达式版本代码可以缩短为：

```
for (String line: ArrayList){
    if (line.matches("^test.*") {
        doSomething();
    }
} 
```

`matches()`检查整个输入是否与正则表达式匹配，因此需要对正则表达式进行一些修改。上面的代码稍微慢一些，因为`Pattern`是重新编译的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T15:03:24.300

正则表达式会产生相当大的开销；如果你正在做一些有“直接”实现的事情——比如`startsWith`——那几乎总是会更快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T15:03:17.003

我喜欢 IF 语句。就个人而言，我尽可能避免使用正则表达式。它们变得复杂且难以编码。在编码方面，最重要的事情之一是可维护性，而 Regex 不提供这一点。

继续使用 if 语句。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T15:08:08.197

你应该更喜欢startsWith()。它更惯用、更简洁，而且您不太可能更快地实现某些东西，尤其是使用 java.util.regex，因为编写低效的正则表达式相对容易。

通常，您应该只在 String 对象上的标准方法不够用时才使用 java.util.regex。

关于您的正则表达式代码的一些注意事项，如果您*要将*正则表达式用于其他内容，则不应在循环内运行 Pattern.compile。你可以通过说进一步简化你的代码：

```
if (matcher.find()) {
    doSoemthing();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T06:56:48.253

yopu 要做的第一件事：放在`Pattern pattern = Pattern.compile("^test"); //regex`外面，`for`因为编译吃时间，而且必须做一次且只有一次。

```
 Pattern pattern = Pattern.compile("^test.*"); //regex
   for (String line: ArrayList){
       if(patter.matches(line)){
            oSomething();
       }
   } 
```

# grails - 会话固定 - 在会话中访问值时出错

> ID：11454722
> 
> 赞同：0
> 
> 时间：2012-07-12T15:01:22.367
> 
> 标签：grails, spring-security

我正在编写一个使用 Spring Security 插件的 grails 应用程序。我为 spring security 插件打开了以下属性

> grails.plugins.springsecurity.useSessionFixationPrevention = true grails.plugins.springsecurity.SessionFixationPrevention.migrate = true grails.plugins.springsecurity.SessionFixationPrevention.alwaysCreateSession = true

我的 AuthenticationProvider 中有以下代码

> def session = RequestContextHolder.currentRequestAttributes().getSession()
> 
> session.key = "一些价值"

现在，在身份验证之后，我的 RememberMeService 类的 loginSuccess 方法中的代码被调用，当我尝试获取放置的会话中的值时，出现此错误

j

> ava.lang.IllegalStateException：getAttribute：会话已经在 org.apache.catalina.session.StandardSessionFacade.getAttribute(StandardSessionFacade.java:110) 的 org.apache.catalina.session.StandardSession.getAttribute(StandardSession.java:1014) 失效org.codehaus.groovy.grails.web.servlet.mvc.GrailsHttpSession.getAttribute(GrailsHttpSession.java:45) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39 ) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke( PojoMetaMethodSite.java:229) 在 org.codehaus.groovy.runtime。callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:52) at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40) at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite. java:54) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:124) at org.codehaus.groovy.grails.plugins.web.ServletsGrailsPlugin$_closure1_closure2.doCall(ServletsGrailsPlugin.groovy:44)在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method .invoke(Method.java:597) 在 org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88) 在 org.codehaus.groovy.runtime.InvokerHelper.getProperty 的 groovy.lang.ExpandoMetaClass.getProperty(ExpandoMetaClass.java:1109) 的 org.codehaus.groovy.runtime.metaclass.ClosureMetaMethod.invoke(ClosureMetaMethod.java:80) (InvokerHelper.java:161) 在 org.codehaus.groovy.runtime.callsite.PojoMetaClassGetPropertySite.getProperty(PojoMetaClassGetPropertySite.java:33) 在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGetProperty(AbstractCallSite.java:235) 在com.teslagovernment.security.TabulaeRememberMeServices.loginSuccess(TabulaeRememberMeServices.groovy:59) 在 org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.successfulAuthentication(AbstractAuthenticationProcessingFilter.java:294) 在 org.springframework.security.web.authentication。AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218) at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy. java:378) at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378) at org .springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378) at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:167) at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237) at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy. java:167) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.codehaus.groovy.grails .web.servlet.filter.GrailsReloadServletFilter.doFilterInternal(GrailsReloadServletFilter.java:104) 在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain .java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69) 在 org.springframework.web.filter。 OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org .codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:65) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at org.apache.catalina.core.ApplicationFilterChain .internalDoFilter(ApplicationFilterChain.java:235) 在 org。apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter. java:76) 在 org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237) 在 org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167) 在 org.apache.catalina.core .ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 在org.apache.catalina.core。StandardContextValve.invoke(StandardContextValve.java:191) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org .apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor .java:849) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)ErrorReportValve.invoke(ErrorReportValve.java:102) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) at org .apache.coyote.http11.Http11Processor.process(Http11Processor.java:849) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) 在 org.apache.tomcat.util.net.JIoEndpoint $Worker.run(JioEndpoint.java:454)ErrorReportValve.invoke(ErrorReportValve.java:102) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) at org .apache.coyote.http11.Http11Processor.process(Http11Processor.java:849) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) 在 org.apache.tomcat.util.net.JIoEndpoint $Worker.run(JioEndpoint.java:454)org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454) 上的 Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454) 上的 Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)

我的问题是为什么会发生这种情况，如何在我的 AuthenticationProvider 中设置可以在我的 RememberMeService 中访问的数据？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:01:17.003

尝试在验证后立即发出重定向，然后再访问任何复制的会话属性。身份验证后服务中的会话变量可能仍会引用请求上下文中的旧会话。重定向将刷新请求上下文。

否则，您可以在 AuthenticationProvider 中的 spring 安全主体对象中存储任何其他属性。在您的提供者之外，您可以通过 applicationContext 内部的 springSecurityService 访问主体：

```
MyPrincipalObject obj = springSecurityService.principal
def key = obj.key 
```

# facebook - 在不使用任何应用程序的情况下使用 facebook 发送对话框

> ID：11454726
> 
> 赞同：0
> 
> 时间：2012-07-12T15:01:29.980
> 
> 标签：facebook, dialog, share, send

我是 FB 开发的新手，我想通过 facebook 分享我的应用程序链接，我正在使用发送对话框。当我使用 facebook 文档中提到的 appID 时，它工作正常。加载时该应用程序显示“通过酷社交应用程序”消息。我不想显示该消息。可以做什么？

此外，我需要预先填充用户可以更改的自定义消息，如果他愿意的话。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:08:52.083

> 该应用程序在加载时显示“通过酷社交应用程序”消息。我不想显示该消息。可以做什么？

设置您自己的应用程序，并使用它的应用程序 ID。

如果您*不想*这样做，或者根本不希望出现*via appname*文本 - 那么您*不能*使用此对话框；您最多可以使用[发送按钮](https://developers.facebook.com/docs/reference/plugins/send/)。

> 我还需要预先填充自定义消息

不可能了。

# doxygen - Doxygen \cite 产生空的参考书目

> ID：11454727
> 
> 赞同：49
> 
> 时间：2012-07-12T15:01:33.597
> 
> 标签：doxygen

我正在尝试`\cite`在 Doxygen 中使用来生成参考书目页面以及我的文本中的参考。我的搜索路径中有 bibtex 和正确的`.bib`文件。我已将 .bib 文件添加到`CITE_BIB_FILES`并正在使用在文件中找到的正确 BibTex 标签`.bib`。Doxygen 正在创建一个参考书目页面，但它是空的。它还在文档文本中创建引用链接，但链接也是空的。知道如何显示引文信息吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T04:50:01.590

我面临着同样的问题。有一个 perl 依赖来生成引用。所以你必须在系统路径中同时拥有 perl 和 bibtex。

忽略上面的例子，它只适用于乳胶，用于 doxygen （注意：没有大括号）：

```
\cite Hale 
```

.bib 文件必须位于 doxygen 工作目录中。

参考书目参考 HTML 页面将由 doxygen 生成：

[1]JK 黑尔。*泛函微分方程理论*。Springer-Verlag，柏林-海德堡-纽约，1977 年。

对于以下围兜条目：

```
 @BOOK{Hale,
   author = "J. K. Hale",
   title = "Theory of functional--differential equations",
   publisher = "Springer--Verlag, Berlin--Heidelberg--New York",
   year = 1977
   } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-06T12:20:46.367

In order for `\cite` to work properly you need:

*   be sure to put your `file.bib` in the working directory where you call `doxygen Doxyfile`
*   `bibtex` executable must be in the search path
*   `perl` executable must be in the search path
*   the `RefName` used in `\cite RefName` must have a corresponding entry in `file.bib`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T15:13:45.380

也许有点晚了，但我遇到了同样的问题。Doxygen 为 LaTeX 输出生成了参考书目，但没有为 HTML 输出生成参考书目，并且没有一个建议的答案对我有用。

正如@Raffi 所建议的，这似乎是**Doxygen < 1.8.3 中的一个错误**。我使用了 Doxygen 1.8.1.1，但它不起作用。然后我安装了 Doxygen 1.8.3.1 没有改变任何其他东西，它工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T12:20:30.383

当您在 DoxyFile 中设置 CITE_BIB_FILES 时，您是否在文件名中包含 .bib 扩展名？Doxygen 声称它会自动添加 .bib 扩展名，但如果你省略它，doxygen 似乎会感到困惑并且无法正确生成 citelist.doc 文件。

在文件名中包含 .bib 应该可以正常工作，至少对我来说是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-30T09:42:30.933

为了创建参考书目，您需要安装 Perl，并将其与 bibtex 一起添加到搜索路径。在 CITE_BIB_FILES 的文档中它说：

“CITE_BIB_FILES ...要使用此功能，您需要在搜索路径中提供 bibtex 和 perl ...”

# java - 水平面板中的按钮不想右对齐

> ID：11454728
> 
> 赞同：1
> 
> 时间：2012-07-12T15:01:35.800
> 
> 标签：java, gwt

我有一个带有 3 个按钮的水平面板：返回、下一步和取消。我已将水平对齐到右侧，但只有“下一步”和“取消”按钮遵循此对齐方式。

这是代码：

```
HorizontalPanel buttons = new HorizontalPanel();
buttons.setWidth("100%");

cancel = new Button("Cancel");
next = new Button("Next");
back = new Button("Back");

buttons.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_RIGHT);
buttons.add(back);
buttons.setCellWidth(back, "98%");
buttons.add(nextBtn);
buttons.setCellWidth(next, "1%");
buttons.add(cancel);
buttons.setCellWidth(cancel, "1%"); 
```

问题在于这个面板宽度。但是如果我删除它，我所有的按钮都会左对齐。作为一种解决方法，我可以使用假按钮，它是不可见的，并且单元格宽度 = 97%，后退按钮的单元格宽度为 1%。但这不是我需要的，因为尽管这个隐形按钮消耗的内存很小，但它仍然是一个内存:)

这种对齐有什么问题？也许面板宽度有问题？希望得到您的帮助，在此先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T07:04:42.580

Horizo​​ntalPanel 中有**setCellHorizo** **​​ntalAlignment()**属性。有了它，您可以对齐它的小部件。

 **尝试以下操作：

```
buttons.setCellHorizontalAlignment(backButton, HasHorizontalAlignment.ALIGN_RIGHT);
buttons.setCellHorizontalAlignment(nextButton, HasHorizontalAlignment.ALIGN_RIGHT);
buttons.setCellHorizontalAlignment(cancelButton, HasHorizontalAlignment.ALIGN_RIGHT); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T21:17:11.280

您可以使用 css 更轻松地实现这一点：

```
FlowPanel panel = new FlowPanel();
panel.setWidth("100%");

cancel = new Button("Cancel");
cancel.getElement().getStyle().setFloat(Float.RIGHT);
next = new Button("Next");
next.getElement().getStyle().setFloat(Float.RIGHT);
back = new Button("Back");
back.getElement().getStyle().setFloat(Float.RIGHT);

panel.add(back);
panel.add(nextBtn);
panel.add(cancel); 
```**

# spring - 注销后 Spring Security 3.1 重定向

> ID：11454729
> 
> 赞同：4
> 
> 时间：2012-07-12T15:01:43.863
> 
> 标签：spring, redirect, spring-security

我正在阅读许多教程，但没有一个对我有用……我将 Spring 3.1.x 与 Spring Security 一起使用。我有一堆安全的 url 和许多不安全的。现在，当用户登录并尝试注销时，我希望他保持与以前相同的页面，所以我使用这个：

```
<beans:bean id="logoutSuccessHandler" class="org.springframework.security.web.authentication.logout.SimpleUrlLogoutSuccessHandler">
    <beans:property name="useReferer" value="true"/>
</beans:bean> 
```

这很好用，但是当用户从安全页面注销时，它会将他重定向到登录页面，我想重定向到主页.. 我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T16:02:06.683

由于您有自定义的重定向逻辑，因此您需要一个自定义的`LogoutSuccessHandler`. 在此处理程序中，您需要添加以下逻辑：

```
String refererUrl = request.getHeader("Referer");
String normalizedRefererUrl = ...; // "Normalize" (if needed) the URL so it is in the form that you need.

if (requiresAuthentication(normalizedRefererUrl, authentication)) {
    response.sendRedirect(request.getContextPath()); // home page
} else {
    response.sendRedirect(refererUrl); // or normalizedUrl
} 
```

在您的`requiresAuthentication()`方法中，您需要使用 Spring Security 的某些部分来确定 URL 是否需要身份验证。
您可以在那里使用`WebInvocationPrivilegeEvaluator`参考。您可以通过 Spring 通过按类自动装配来掌握它（因为将有一个 bean 实现`WebInvocationPrivilegeEvaluator`）。
评估器有一种方法可供您使用，`isAllowed(uri, authentication)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T15:20:40.433

```
<security:http auto-config="true">
    <security:form-login login-page="/spring/login" 
                         login-processing-url="/spring/loginProcess"
                         default-target-url="/spring/main" 
                         authentication-failure-url="/spring/login?login_error=1" />  
    <security:logout logout-url="/spring/logout" logout-success-url="/spring/logout-success" />
</security:http> 
```

[来自文档](http://static.springsource.org/spring-webflow/docs/2.0.x/reference/html/ch07s05.html)或[自定义 succeshandler](https://stackoverflow.com/q/5463105/106261)的logout-success-url

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:27:29.210

根据[spring security](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-namespace.html#nsa-logout)的文档，如果你没有指定 logout-success-url 那么它应该重定向 /. 检查此配置，您可能可以使用 SimpleRedirectInvalidSessionStrategy

# c++ - SOCI C++（SQL 包装器）致命：数据库“testDB”不存在

> ID：11454731
> 
> 赞同：0
> 
> 时间：2012-07-12T15:01:45.360
> 
> 标签：c++, postgresql, fatal-error, soci

Soci 的另一个问题......我想连接我刚刚创建的 testDB，但下面的代码显示了致命错误。

我这样做了：

在 PostgreSQL 上：

```
1) CREATE USER robert WITH ENCRYPTED PASSWORD 'pass'; 
2) CREATE DATABASE testDB; 
3) GRANT ALL PRIVILEGES ON DATABASE testDB TO robert; 
```

我的 C++ 代码：

```
#include <iostream>
#include <soci.h>
#include <string>
using std::string;
using std::cout;
#include <postgresql/soci-postgresql.h>

bool connectToDatabase(string databaseName, string user, string password)
{
        try
   { 
      soci::session sql(soci::postgresql, "dbname=" +databaseName + " user="+user + " password="+password);
   }
   catch (soci::postgresql_soci_error const & e)
   {
      std::cerr << "PostgreSQL error: " << e.sqlstate() << " " << e.what() << std::endl;
        return false;        
   }
   catch (std::exception const & e)
   {
      std::cerr << "Some other error: " << e.what() << std::endl;
        return false;   
        }
        return true;
}

int main(int argc, char **argv)
{
   cout << connectToDatabase("testDB", "robert", "pass"); 

   return 0;

} 
```

编译后我得到了这个：

```
Some other error: Cannot establish connection to the database.
FATAL:  database "testDB" does not exist 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:10:27.470

而是连接到数据库“testdb”。

PostgreSQL 中的大小写折叠通过将不带引号的标识符转换为小写来工作。因此`CREATE DATABASE testDB`创建了一个名为“testdb”的数据库，与`CREATE DATABASE "testDB"`.

（作为一般建议：要么习惯于使用全小写标识符，可能在单词之间使用下划线，要么习惯于一直引用标识符。前者对于 PostgreSQL 来说更自然，后者允许你坚持使用你的尽管有约定）。

# apache - Apache不会从Passenger开始

> ID：11454733
> 
> 赞同：1
> 
> 时间：2012-07-12T15:01:53.337
> 
> 标签：apache, centos, passenger

在 httpd.conf 上添加 ff 行后

```
LoadModule passenger_module /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.13/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.13
PassengerRuby /usr/local/bin/ruby 
```

Apache 将不再启动

```
[root@localhost ~]# service httpd restart
Stopping httpd:                                            [FAILED]
Starting httpd:                                            [FAILED] 
```

从日志中得到这个

```
[Thu Jul 12 11:26:58 2012] [error] *** Passenger could not be initialized because of this error: Unable to start the Phusion Passenger watchdog (/usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.13/agents/PassengerWatchdog): Permission denied (13)
[Thu Jul 12 11:26:58 2012] [notice] Digest: generating secret for digest authentication ...
[Thu Jul 12 11:26:58 2012] [notice] Digest: done
[Thu Jul 12 11:27:13 2012] [notice] SELinux policy enabled; httpd running as context root:system_r:httpd_t:s0
[Thu Jul 12 11:27:13 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[Thu Jul 12 11:31:56 2012] [notice] SELinux policy enabled; httpd running as context root:system_r:httpd_t:s0
[Thu Jul 12 11:31:56 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[Thu Jul 12 11:38:22 2012] [notice] SELinux policy enabled; httpd running as context root:system_r:httpd_t:s0
[Thu Jul 12 11:38:22 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:09:46.513

检查 /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.13/agents/PassengerWatchdog 上的文件权限，并确保您的 apache 用户有权运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T22:14:39.440

我不是 SELinux 方面的专家，但这就是你的问题的原因。（以 apache 用户身份访问看门狗进程的权限和访问权限）。

试试看这里：[Passenger/mod_rails failed to initialize in Fedora 12 when started Apache](https://stackoverflow.com/questions/2054554/passenger-mod-rails-fails-to-initialize-in-fedora-12-when-starting-apache/2429590#2429590)

# typo3 - 将内容页面转换为 tt_news (Typo3)

> ID：11454735
> 
> 赞同：0
> 
> 时间：2012-07-12T15:01:56.427
> 
> 标签：typo3, tt-news

在一个网站上，我有一个部分，我每周都会放一个新页面。我想将其转换为使用 tt_news 的系统。您如何建议我将页面（超过 100 页）导入 tt_news？我可以使用简单的 SQL 查询来完成，还是应该编写自定义 PHP 脚本来执行导入？是否已经存在可以帮助我执行此任务的扩展程序？

如果我只是简单地为现有页面构建喜欢的新闻，或者我是否将页面的内容转移到新闻的内容，这对我来说并不重要。如果我可以将页面标题转换为新闻发布日期，那就太好了，但我也可以使用页面发布日期。

您对执行此任务有何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:01:17.777

正如你已经提到的，我会通过 SQL 来完成。如果每页有多个内容元素需要合并到一个 tt_news-dataset 中，可能会变得棘手。

您还可以安装一个扩展，将 tt_content-elements 与 tt_news-records 链接。这样，您只需通过遍历页面来插入 tt_news-records 并将每页的内容链接到新的 tt_news-record。这是一些扩展，将 tt_news 与内容元素链接：

*   [ttnews_irre](http://typo3.org/extensions/repository/view/ttnews_irre)
*   [aba_ttnews_content_con](http://typo3.org/extensions/repository/view/aba_ttnews_content_con)

这里还有一个值得一看的扩展：content2news。

希望这对你有用。

最好的问候，彼得

# jquery - 带有图像的 div 标签的大小 - 带有 JQuery Mobile 的 html5

> ID：11454740
> 
> 赞同：0
> 
> 时间：2012-07-12T15:02:06.127
> 
> 标签：jquery, css, html

我使用这个语句来获取 div 标签内的背景图像。

```
 <div data-role="content" data-theme="a" style= "height:100%; background:url    
('./images/tankanzeige.png') center center no-repeat">  
</div> 
```

我想让 div 与图像的大小相同，但它的大小错误，它只显示图像的 20%。

我必须改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:20:15.393

**如果要调整大小`div`以适合图像：**

**1.**如果您知道图像的大小，那么您必须设置 div 的像素大小 - 例如 100px 高度和 200px 宽度：

```
<div data-role="content" data-theme="a" style= "height:100px; width: 200px; background:url('./images/tankanzeige.png') center center no-repeat">  
</div> 
```

那是因为`20%`意思是-“尝试占父母的20％”。

**2.**在 div 中使用图像标签要容易得多，`<img>`因为这将允许 div 自动扩展。

**3.**如果一定要用CSS背景图片，又不知道图片大小，需要用JavaScript来获取图片大小。首先，您需要创建一个新`Image`对象。

看到这个答案：[how-to-get-image-size-height-width-using-javascript](https://stackoverflow.com/a/626505/206614)

以及其中的代码：

```
var img = new Image();
img.onload = function() {
  alert(this.width + 'x' + this.height);
}
img.src = 'http://www.google.com/intl/en_ALL/images/logo.gif'; 
```

请注意，您需要该`onload`事件来允许首先加载图像。

* * *

**如果要调整 CSS 背景的大小以适应 div：**

您可以使用 CSS3 属性`background-size: 100%;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:09:28.133

只要图像小于窗口大小，整个图像就会显示在 div 中。div 以其简化形式（您问题中的代码）将占据整个窗口。

因此，如果您的图像未显示，则它太大而无法容纳可用空间。您可以在 div 上设置 a`min-height`和`min-width`属性，以使图像的全尺寸使页面根据需要滚动。

[看演示](http://www.cssdesk.com/FXHCT)

# ios - 在 Cocoa 中进行网络编程的方法

> ID：11454745
> 
> 赞同：2
> 
> 时间：2012-07-12T15:02:25.470
> 
> 标签：ios, cocoa, sockets, networking

在 Cocoa 中似乎有很多方法可以建立网络：Webkit、NSUrl、CFNetwork、BSD Sockets。是否还有其他通常用于网络的 API/框架？我试图了解在 Cocoa 中建立网络的所有方法，并了解每个人的长处和短处。

作为一个相关的问题，为什么有人会使用 CFSocket？似乎大多数事情都可以用 NSUrl 或 BSD 套接字来完成。CFSocket在实践中是否常用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T16:30:28.270

你可以观看 WWDC 视频*Network Apps for iPhone* ( [Part 1](https://developer.apple.com/videos/wwdc/2010/?id=207) , [Part 2](https://developer.apple.com/videos/wwdc/2010/?id=208) ) 和*[Networking Best Practices](https://developer.apple.com/videos/wwdc/2012/?id=706)*，他们建议将 NSURLConnection 用于 HTTP 和 HTTPS，CFSocket/CFStream/NSStream 系列用于其他 TCP 网络，当然还有 WebKit，如果你只是打算呈现网页内容。他们建议不要使用低级 BSD 套接字，除非您正在编写服务器。您使用的框架级别越高，为您处理的事情就越多（从 DNS 解析到蜂窝网络管理、身份验证、加密、运行循环集成......）并且它与 Cocoa 框架的其余部分集成得越多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:19:51.453

对于 iOS，最好的网络套件是[AFNetworking](https://github.com/AFNetworking/AFNetworking)。它正在积极开发中，并且拥有与任何网络一起为您的项目工作所需的一切。

# c# - jHtmlArea 不处理粘贴换行符

> ID：11454748
> 
> 赞同：0
> 
> 时间：2012-07-12T15:02:32.660
> 
> 标签：c#, asp.net-mvc, jhtmlarea

我正在使用[jHtmlArea](http://jhtmlarea.codeplex.com/)从用户那里获取一些 HTML，一切都很好，但是当我尝试从其他网站粘贴一些文本时，它不会将换行符解码为`<br/>`它们在框中。这只发生在粘贴的文本中，手动输入的文本很好。

因此，当我想正确显示文本时，我会使用以下内容：

```
@Html.Raw(Model.Text.Replace(Environment.NewLine, "<br/>")) 
```

但是当我需要在 jHtmlArea 中重新显示相同的文本以供用户编辑时，它会丢失所有换行符。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:51:25.523

我最后放弃了使用它，有太多的错误我没有时间修复..无论如何，这是我所做的让保存的文本用换行符正确显示（请在保存之前检查源是否良好如果您打算使用此“hack”，请将其发送给 db）

```
$(document).ready(function () {

//Initialize JhtmlArea 

    $(".editor").htmlarea({
        toolbar: [
                    ["bold", "italic", "underline"],
                    ["orderedList", "unorderedList"],
                    ["link", "unlink"],
                 ]
    });

//Set id (id will be same for all instances)

    $("iframe").attr("id", "editor");

// Style hack

$("#editor").contents().find('body').css({ "font-family": "MS Shell Dlg", "font-size": "12px", "font-weight": "100" });

// Finally to newlines hack

 var html = $(".editor").htmlarea("toHtmlString");

 // I would od something like $(".editor").htmlarea("html", "");
 // But there is a bug since this function calls "pastHtml" internally 
 // which is a typo instead of
 // "pasteHtml" so it won't work

 $("#editor").contents().find('body').html("");
 $(".editor").htmlarea("pasteHTML", html.replace(/\n/g, '<br\>'));

}); 
```

# jquery - 用于创建 ics 有效重复规则 (rrule) 的 jQuery 接口

> ID：11454750
> 
> 赞同：5
> 
> 时间：2012-07-12T15:02:34.423
> 
> 标签：jquery, jquery-plugins, icalendar, rrule

寻找用于创建 ics 有效 RRULE 字符串的接口，类似于 Google 日历的接口。我看过的大多数日历都处理 ics RRULE 非常相似，并且它们的界面几乎相同。如果存在，希望使用开源解决方案。

该界面将使用有效的 RRULE 字符串填充隐藏文本字段：`FREQ=WEEKLY;INTERVAL=1;BYDAY=SU`

谷歌日历的：

![在此处输入图像描述](../Images/fa20f665899f05380d05951ef3a1371b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-28T04:47:11.993

有点晚了，但由于数量不多，我将把它们写下来（也许会为任何寻找此类界面的人节省一些时间）。

经过一番研究，我发现了两个：

燃料用户体验：

[https://github.com/ExactTarget/fuelux](https://github.com/ExactTarget/fuelux)（已弃用，2021 年编辑）

jquery.recurrenceinput.js： [https ://github.com/collective/jquery.recurrenceinput.js/blob/master/README.rst](https://github.com/collective/jquery.recurrenceinput.js/blob/master/README.rst)

希望这对任何人都有帮助。

# iphone - 获取 UIWebView 的成功加载响应

> ID：11454752
> 
> 赞同：0
> 
> 时间：2012-07-12T15:02:37.293
> 
> 标签：iphone, uiwebview, nsurlrequest

我想在成功加载 url 时读取 UIWebView 响应中的数据。

用这种方法捕获这些数据并没有给我回应：

```
- (void) webViewDidFinishLoad:(UIWebView *)_webView { 
```

编辑：我想赶上 NSURLResponse

谢谢，努尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:32:41.130

你实施了`–webView:didFailLoadWithError:`吗？

加载 URL 时可能出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:38:17.593

我对您的应用程序的架构了解不多，无法真正说出，但知道您可以从 UIWebView 外部调用 UIWebView 页面上的任意 JavaScript 并获取响应，这可能对您有用：

```
NSString *script = @"$('#textInputField').value";
NSString *result = [webView stringByEvaluatingJavaScriptFromString:script]; 
```

如果您将响应存储在 JavaScript 变量中，您应该能够以这种方式将其读回您的 Obj-C。

# asp.net - 如何在视图中获取 IEnumerable<> 模型的通用参数的元数据？

> ID：11454753
> 
> 赞同：2
> 
> 时间：2012-07-12T15:02:42.060
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

如果我有一个声明为 Model 的视图，`@model IEnumerable<MyValueObject>`那么从 MyValueObject 访问元数据的最佳方式是什么？

我不能使用模板，所以在我的集合中迭代并使用 Model MyValueObject 调用模板不是一个选项，因为该集合是由第三方助手直接使用的。想想渲染网格的助手，我在这里能做的就是通过我想从 MyvalueObject 的 medatadata 恢复的每个属性（列）指定格式和其他属性。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:10:50.613

```
@foreach (var item in Model)
{
    var metaData = ModelMetadata.FromLambdaExpression(m => item, ViewData);
} 
```

# c# - 如何用鼠标选择组框中的所有文本？

> ID：11454760
> 
> 赞同：0
> 
> 时间：2012-07-12T15:03:13.097
> 
> 标签：c#, winforms, textbox

好的，所以我正在尝试做一些非常简单的事情，但结果却非常复杂。我希望能够为我的所有标签选择我的文本。由于你不能这样做，我不得不将它们全部转换为文本框。现在我已经完成了，我希望用户能够将他们的鼠标拖过表单上的一个区域并选择他们滚动的任何文本。一个很好的例子是网络浏览器。

编辑

好的，我需要让这个更清楚一点，还有什么比一些图像更好。

![在此处输入图像描述](../Images/fd52c69638f9ef963119d9041c6d776d.png)

看上面的图片。我无法在表单上拖动鼠标来选择文本。我必须在 TextBox 内单击，然后我只能选择该特定字段内的数据。我只想能够在我的选择区域内的任何文本框上单击并拖动鼠标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:17:56.677

您是否“将其 BorderStyle 设置为 none 并将背景颜色设置为表单的颜色。也不要忘记将 readonly 属性设置为 false”

来自[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/5ac4267d-2642-4d05-ae84-1562bf16d068/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/5ac4267d-2642-4d05-ae84-1562bf16d068/)

# java - 在 facebook 墙上张贴希伯来语 + 英语文本，单词混淆了

> ID：11454761
> 
> 赞同：0
> 
> 时间：2012-07-12T15:03:13.910
> 
> 标签：java, facebook

我正在使用我的 java 代码在我的 FB 墙上发帖：

```
FacebookType publishMessageResponse = facebookClient.publish(
    connection,
    FacebookType.class,
    Parameter.with(
        "message",
        fbMessageData.getRecipeOwnerName() +
            " posted " +
            fbMessageData.getRecipeName()
    )
); 
```

消息应该是：`Yoav posted מתכון`，但是，它会像这样发布：`מתכון Yoav posted`。`מתכון`是配方名称。配方名称可以是英文或希伯来文 (UTF-8)。

关于如何保持订单的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:17:03.607

您是否尝试过使用 Unicode BiDi_Control 字符之一？把它放在你的食谱名称前面或周围……</p>

[http://en.wikipedia.org/wiki/Bi-directional_text](http://en.wikipedia.org/wiki/Bi-directional_text)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:24:43.617

在发送到 fb 之前，您应该先 json_encode 然后 json_decode，它可以解决问题：

```
$album_details = array(
  'message'=> 'Live photos from our app',                      
  'name'=> $title, // This can be any non-english characters that can be in unicode
  'access_token'=>$pageAccessToken
);

$jsonStr = json_encode($album_details);
$decoded_album_settings = json_decode($jsonStr, true);

$create_album = $this->facebook->api('/'.$this->facebookPageId.'/albums', 'post', $decoded_album_settings); 
```

这个想法来自这里：[https ://stackoverflow.com/a/3806967/1200166](https://stackoverflow.com/a/3806967/1200166)

# chef-infra - Opscode Chef 请求实体太大注册节点

> ID：11454765
> 
> 赞同：2
> 
> 时间：2012-07-12T15:03:22.570
> 
> 标签：chef-infra

我正在注册一个在运行列表中搜索其他节点属性的节点。问题是当节点信息太大而无法通过 HTTP 放在服务器上时。

然后 chef-client 打印一个 'FATAL: Net::HTTPServerException: 413 "Request Entity Too Large"' 消息。

服务器位于 Opscode Hosted Chef 中。

任何人都可以帮助我解决这个问题吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T22:20:09.147

更改 nginx 配置对我不起作用。但是，我确实从 Chef 社区网站 IRC 日志（由 Joshua Timberman 提供）中找到了以下内容，它对我有用（Chef v11.4.4）：

```
 put this in /etc/chef/client.rb: Ohai::Config[:disabled_plugins] = ["passwd"] 
```

这是链接：http: [//community.opscode.com/chat/chef/2013-02-07](http://community.opscode.com/chat/chef/2013-02-07)

由于这是客户端，因此无论您使用的是什么厨师服务器类型，它都应该可以工作。

注意：在处理产生错误的食谱时，我在测试（厨师 v11.10.4）中没有看到这一点。这可能已在更新的 Chef 版本中得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:00:22.757

这与 http 服务器的上传大小限制有关。我之前听说有人在 Hosted Chef 上遇到过这个问题，我自己也曾在 OpenSource Chef 上经历过。然而，在 OpenSource Chef 上，我有能力做一些事情来增加限制。

并不是说这一定会帮助您使用 Hosted Chef，但我的 nginx.conf 需要我在 http 部分添加这一行：

```
client_max_body_size 2M; 
```

这在我重新加载 nginx 并为我解决问题后提高了限制。

（在 Apache 上，我相信这将是 .htaccess 或 httpd.conf 文件中的 LimitRequestBody 属性）

至于您的问题，我听到人们尝试的建议是减小节点信息的大小。在某些情况下这并不容易，但据说一些 OHAI 插件会导致这种情况发生，删除它们可以解决它。

我不知道这是否会对您的情况有很大帮助，但也许它会帮助遇到这种情况的使用 OpenSource Chef 的人。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-31T14:37:36.060

我也遇到了这个问题。似乎我们的客户正在将 1.17meg 发送回厨师服务器。这些答案很好，但他们并没有真正说明如何诊断问题，因为您会发现自己处于这种情况有多种原因。

1）*我的服务器发回多少。*

要查找此信息，您需要在调试模式下运行厨师运行。这使您可以访问从客户端发出的 HTTP 消息和响应消息。chef-client -r'recipe[run_awesome_resources]' **--log_level 调试**

方便的提示可以使用搜索词**http 1.1 413搜索消息**

*2）我把这些设置放在哪里？*

这些设置位于 chef 配置文件中。你很少接触这个文件，以至于你忘记了它的位置是可以原谅的。

**/etc/opscode/chef-server.rb**

您将需要运行重新配置命令来让厨师服务器进行设置。chef-server-ctl 重新配置

*3) 我必须更改什么设置？*

此链接提供了您可以使用的所有设置。

[https://docs.chef.io/config_rb_server_optional_settings.html](https://docs.chef.io/config_rb_server_optional_settings.html)

这个问题的一个是：**opscode_erchef['max_request_size']**

像这样在文件中

opscode_erchef['max_request_size'] = 3000000 # 产生 3 兆位的头部空间。

一些答案表明您应该删除一些 Ohia 插件。这有效，但不是问题的根源。通过删除插件，您实际上减少了对厨师服务器的请求大小。结果是它可以工作，但是可能会误导您将插件归咎于问题的根本原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-01T14:40:42.430

2019 年的另一个更新。

如果运行`chef-client`抛出错误`HTTPServerException: 413 "Request Entity Too Large"`检查：

*   该选项`ohai.disabled_plugins = [:Passwd]`存在于`/etc/chef/client.rb`服务器上
*   该选项`ohai.disabled_plugins = [:Passwd]`存在于`/etc/chef/client.rb`引发错误的客户端上

# wcf - 自托管 WCF 服务中的 HttpModules

> ID：11454770
> 
> 赞同：1
> 
> 时间：2012-07-12T15:03:34.050
> 
> 标签：wcf, httpmodule

我们有一个使用 DataServiceHost 类自承载 WCF 数据服务的 Windows 服务。一切正常，但如果可能的话，我们希望将一些 HTTPModules 连接到服务。其中一个 HTTP 模块用于自定义基本身份验证，另一个用于审核（包括响应，这就是为什么 HTTP 模块在此方面工作得如此出色的原因）。

请记住，我们作为常规 Windows 服务运行，因此我们没有 web.config，该服务不是由 IIS 托管的，也不是 ASP.Net 应用程序。

所以，我的问题是：

1.  是否可以让 HTTP 模块监听自托管的 WCF 数据服务？
2.  如果这是不可能的，我会有哪些类似于 HTTP 模块的功能的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:08:21.320

WCF 不会在与标准 ASP.NET 应用程序相同的请求管道上运行，但如果您将服务配置为与 ASP.NET 兼容，则可以利用许多 ASP.NET 功能（如会话）。

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)] 
```

但是，看起来您只需要一些可以让您像 HTTPModules 为 ASP.NET 应用程序所做的那样跳入管道的东西。既然如此，就有*很多*选择。您可以查看[此页面](http://msdn.microsoft.com/en-us/library/ms751420%28v=vs.90%29.aspx)以获取大量示例。

您提到了身份验证，并且 WCF 中内置了许多选项，可以避免您推出自己的解决方案。[在这里](http://msdn.microsoft.com/en-us/library/ff647503.aspx)查看。

# mysql - SQL join with where 并具有 count() 条件

> ID：11454772
> 
> 赞同：0
> 
> 时间：2012-07-12T15:03:35.447
> 
> 标签：mysql, sql, join, where, having

我有 2 张桌子

**Sleep_sessions** [id, user_id, (一些其他值)]

**Tones** [id, sleep_sessions.id (FK), (一些其他值)]

我需要选择 10 个 sleep_sessions，其中 user_id = 55，并且每个 sleep_session 记录至少有 2 个与之关联的音调记录。

我目前有以下内容；

```
SELECT `sleep_sessions`.*
FROM (`sleep_sessions`)
JOIN `tones` ON sleep_sessions.id = `tones`.`sleep_session_id`
WHERE `user_id` = 55
GROUP BY `sleep_sessions`.`id`
HAVING count(tones.id) > 4
ORDER BY `started` desc
LIMIT 10 
```

但是我注意到 count(tone.id) 基本上是整个色调表，而不是当前正在加入的 sleep_session

非常感谢您的帮助，

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:11:37.163

我不确定您的查询出了什么问题。也许，试试

```
HAVING count(*) 
```

以下查询可能更具可读性（理解起来可能有点痛苦）：

```
SELECT *
FROM (`sleep_sessions`)
WHERE `user_id` = 55
AND (SELECT count(*) FROM `tones` 
     WHERE `sleep_sessions`.`id` = `tones`.`sleep_session_id`) > 4
ORDER BY `started` desc
LIMIT 10 
```

这样做的好处是您不会弄乱在`GROUP BY`and`ORDER BY`子句之间创建的错误语义。只有 MySQL 会接受您的原始查询。这里有一些见解：

[http://dev.mysql.com/doc/refman/5.6/en/group-by-hidden-columns.html](http://dev.mysql.com/doc/refman/5.6/en/group-by-hidden-columns.html)

# php - 如何检索最大值

> ID：11454777
> 
> 赞同：-1
> 
> 时间：2012-07-12T15:03:44.547
> 
> 标签：php, mysql, oop

我使用 oop 和 mysql 在 php 中具有此功能，有人可以告诉我代码中的错误是什么，我对 oop 完全陌生，

```
private function add_img($whichimg) {

    $query = mysql_query("SELECT max(gallery_id) as maxi FROM gallery") or die(mysql_error());
    $row = mysql_fetch_assoc($query);
    $this->maximum = $row["maxi"];

    $add_to_db = $this->query("INSERT INTO gallery (title,gallery_id) VALUES('$whichimg','$this->maximum')") or die(mysql_error());
    return $add_to_db;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:07:10.960

错误在这里：`'$this->maximum'`

```
$this->query("INSERT INTO gallery (title,gallery_id) VALUES('$whichimg','".$this->maximum."')") or die(mysql_error()); 
```

或者

```
$this->query("INSERT INTO gallery (title,gallery_id) VALUES('$whichimg','{$this->maximum}')") or die(mysql_error()); 
```

甚至更好

$sql = sprintf("INSERT INTO gallery (title,gallery_id) VALUES('%s','%s')", $whichimg, $this->maximum); $this->query($sql) 或 die(mysql_error());

# java - 三次贝塞尔曲线：最大梯度和避免碰撞？

> ID：11454778
> 
> 赞同：6
> 
> 时间：2012-07-12T15:03:46.130
> 
> 标签：java, algorithm, math, bezier

我正在使用贝塞尔曲线作为我的宇宙飞船进入车站停靠时的路径。我有一个简单的算法来计算船舶在时间 t 沿三次贝塞尔曲线的位置：

```
public class BezierMovement{
    public BezierMovement(){
        // start docking straight away in this test version
        initDocking();
    }

    private Vector3 p0;
    private Vector3 p1;
    private Vector3 p2;
    private Vector3 p3;

    private double tInc = 0.001d;
    private double t = tInc;

    protected void initDocking(){

        // get current location
        Vector3 location = getCurrentLocation();

        // get docking point
        Vector3 dockingPoint = getDockingPoint();

        // ship's normalised direction vector
        Vector3 direction = getDirection();

        // docking point's normalised direction vector
        Vector3 dockingDirection = getDockingDirection();

        // scalars to multiply normalised vectors by 
        // The higher the number, the "curvier" the curve
        float curveFactorShip = 10000.0f;
        float curveFactorDock = 2000.0f;

        p0 = new Vector3(location.x,location.y,location.z);

        p1 = new Vector3(location.x + (direction.x * curveFactorShip),
                         location.y + (direction.y * curveFactorShip),
                         location.z + (direction.z * curveFactorShip));

        p2 = new Vector3(dockingPoint.x + (dockingDirection.x * curveFactorDock),
                         dockingPoint.y + (dockingDirection.y * curveFactorDock),
                         dockingPoint.z + (dockingDirection.z * curveFactorDock));

        p3 = new Vector3(dockingPoint.x, dockingPoint.y, dockingPoint.z);

    }

    public void incrementPosition() {

        bezier(p0, p1, p2, p3, t, getCurrentLocation());

        // make ship go back and forth along curve for testing              
        t += tInc;

        if(t>=1){
            tInc = 0-tInc;
        } else if(t<0){
            tInc = 0-tInc;
        }

    }

    protected void bezier(Vector3 p0, Vector3 p1, Vector3 p2, Vector3 p3, double t, Vector3 outputVector){

        double a = (1-t)*(1-t)*(1-t);
        double b = 3*((1-t)*(1-t))*t;
        double c = 3*(1-t)*(t*t);
        double d = t*t*t;

        outputVector.x = a*p0.x + b*p1.x + c*p2.x + d*p3.x;
        outputVector.y = a*p0.y + b*p1.y + c*p2.y + d*p3.y;
        outputVector.z = a*p0.z + b*p1.z + c*p2.z + d*p3.z;

    }
} 
```

曲线起点为飞船所在位置，终点为对接舱入口（图中红点）。宇宙飞船的方向有一个归一化向量，停靠舱有另一个归一化向量来指示飞船必须行进的方向，以便在它到达时直接对准停靠舱（图表上的黄线）

绿线是飞船的可能路径，紫色圆圈是飞船的半径。最后，黑框是车站的边界框。

![在此处输入图像描述](../Images/79df670e612df242cbd30ac4c2f8104d.png)

我有两个问题：

1.  宇宙飞船应该只能以每秒 r 弧度转动
2.  宇宙飞船无法飞过空间站

我假设这转化为：

一种）。找到“曲线因素”（控制点长度），这将给出一条船不必转弯太紧的路径

乙）。找到它无法避免与空间站相撞的宇宙飞船位置/方向（并创建一条路径将其引导出该状态，因此它可以继续进行 a））

但是，对于这两种情况，我没有太多运气找到解决方案。我已经有代码来检测向量、框、点和球体之间的交叉点，但还没有贝塞尔曲线。我还有一些功能可以让我找到两点之间的距离。

非常感激任何的帮助

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T06:42:46.303

找到三次贝塞尔曲线的精确交点涉及求解 5 次或 6 次多项式。更可行的解决方案是使用数值方法，或细分贝塞尔曲线。

```
protected void subdivide(
        Vector3 p0, Vector3 p1, Vector3 p2, Vector3 p3,
        Vector3 q0, Vector3 q1, Vector3 q2, Vector3 q3,
        Vector3 q4, Vector3 q5, Vector3 q6) {

    q0.x = p0.x; q0.y = p0.y; q0.z = p0.z;
    q6.x = p3.x; q6.y = p3.y; q6.z = p3.z;

    q1.x = (p0.x + p1.x) * 0.5;
    q1.y = (p0.y + p1.y) * 0.5;
    q1.z = (p0.z + p1.z) * 0.5;

    q5.x = (p2.x + p3.x) * 0.5;
    q5.y = (p2.y + p3.y) * 0.5;
    q5.z = (p2.z + p3.z) * 0.5;

    double x3 = (p1.x + p2.x) * 0.5;
    double y3 = (p1.y + p2.y) * 0.5;
    double z3 = (p1.z + p2.z) * 0.5;

    q2.x = (q1.x + x3) * 0.5;
    q2.y = (q1.y + y3) * 0.5;
    q2.z = (q1.z + z3) * 0.5;

    q4.x = (x3 + q1.x) * 0.5;
    q4.y = (y3 + q1.y) * 0.5;
    q4.z = (z3 + q1.z) * 0.5;

    q3.x = (q2.x + q4.x) * 0.5;
    q3.y = (q2.y + q4.y) * 0.5;
    q3.z = (q2.z + q4.z) * 0.5;
} 
```

`q1`..`q3`成为第一段。`q3`..`q6`成为第二段。

将曲线细分 2-5 次，并将控制点用作折线。

* * *

可以在每个段的端点计算[曲率：](http://en.wikipedia.org/wiki/Curvature#Local_expressions_2 "WP：曲率 - 空间曲线 - 局部表达式")

```
protected double curvatureAtStart(Vector3 p0, Vector3 p1, Vector3 p2, Vector3 p3) {
    double dx1 = p1.x - p0.x;
    double dy1 = p1.y - p0.y;
    double dz1 = p1.z - p0.z;

    double A = dx1 * dx1 + dy1 * dy1 + dz1 * dz1;

    double dx2 = p0.x - 2*p1.x + p2.x;
    double dy2 = p0.y - 2*p1.y + p2.y;
    double dz2 = p0.z - 2*p1.z + p2.z;

    double B = dx1 * dx2 + dy1 * dy2 + dz1 * dz2;

    double Rx = (dx2 - dx1*B/A)/A*2/3;
    double Ry = (dy2 - dy1*B/A)/A*2/3;
    double Rz = (dz2 - dz1*B/A)/A*2/3;

    return Math.sqrt(Rx * Rx + Ry * Ry + Rz * Rz);
} 
```

* * *

为了解决**问题 1**，将曲线细分几次，并计算每个线段端点处的曲率。这只是一个近似值，但您可以有选择地细分具有高曲率的段，以获得该区域更好的近似值。

* * *

要解决**问题 2**，您可以细分三个曲线：

*   一个在两个端点处的速度为零 ( `C0`)。这将产生一条直线。
*   一个在第一个端点处速度为零，另一个在第二个端点处 ( `C1`)。
*   第一个端点处的速度为 1，第二个端点处的速度为 0 ( `C2`)。

如果您以相同的方式细分所有曲线，您可以快速评估最终曲线的控制点。您混合相应的控制点，由端点处的速度参数化：

```
C[i] = C0[i] + (C1[i] - C0[i])*v1 + (C2[i] - C0[i])*v2 
```

您可以使用此找到有效的参数范围，以便没有线段（评估为直线段）与车站相交。（`v1`并且`v2`可以超过 1.0）。

# iphone - 将公开视频上传到 Facebook 并检索视频 ID

> ID：11454783
> 
> 赞同：1
> 
> 时间：2012-07-12T15:03:59.167
> 
> 标签：iphone, ios, facebook, mobile, sdk

我想通过允许用户将隐私设置为公开的视频上传到 Facebook 来扩展我当前的 IOS 应用程序。然后我想检索存储的视频 ID 并将其上传到我的服务器。

我的问题是当前的 Facebook SDK 可以做到这一点吗？我知道我可以将视频隐私设置为公开，但我不确定 SDK 是否会返回视频 ID。有没有人有这方面的经验？我还需要请求扩展权限来设置视频隐私吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:47:44.120

`user_videos`授予扩展权限后，您可以访问用户的视频数据。

**参考**：http: [//developers.facebook.com/docs/authentication/permissions/](http://developers.facebook.com/docs/authentication/permissions/)

从那里，您将能够访问可能适用于您的目标的属性，例如`id`, 。`embed_html``source`

**参考**：http: [//developers.facebook.com/docs/reference/api/video/](http://developers.facebook.com/docs/reference/api/video/)

享受和好运！

# python - python中的动态类型转换

> ID：11454784
> 
> 赞同：18
> 
> 时间：2012-07-12T15:04:01.967
> 
> 标签：python

我有 2 个字典：

```
dicts1 = {'field1':'', 'field2':1, 'field3':1.2}
dicts2 = {'field1':123, 'field2':123, 'field3':'123'} 
```

我想将 in 中的每个值转换`dict2`为与 in 中相应值相同的类型，`dict1`最快的 pythonic 方式是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-12T15:10:06.837

假设它们是兼容的类型：

```
for k, v in dicts1.iteritems():
    try:
        dicts2[k] =  type(v)(dicts2[k])
    except (TypeError, ValueError) as e:
        pass # types not compatible
    except KeyError as e:
        pass # No matching key in dict 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:12:57.637

这一个班轮会做到这一点 - 但它不检查类型错误：

```
dicts1 = {'field1':'', 'field2':1, 'field3':1.2}
dicts2 = {'field1':123, 'field2':123, 'field3':'123'}

print {k : type(dicts1[k])(dicts2[k]) for k in dicts2} 
```

这也可以做到 - 并且对于某些人来说可能更具可读性：

```
print {k : type(dicts1[k])(v) for (k,v) in dicts2.iteritems()} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-03T11:09:44.253

Pydantic 是动态类型转换的答案。

如果值的类型`dicts1`将成为 中值类型的引用，`dict2`则将 dicts1 转换为扩展为的类通常是个好主意`pydantic.BaseModel`

```
from pydantic import BaseModel

class dicts1(BaseModel):
    field1: str
    field2: int
    field3: float

dicts2 = dict(dicts1(**{'field1':123, 'field2':123, 'field3':'123'}))
print(dicts2) 
```

输出：{'field1'：'123'，'field2'：123，'field3'：123.0}

# postgresql - ETL 工具或临时解决方案？

> ID：11454789
> 
> 赞同：1
> 
> 时间：2012-07-12T15:04:12.457
> 
> 标签：postgresql, etl, data-warehouse, data-cleaning

我正在设计一个数据仓库系统，原始数据源有两个：文件（十六进制格式，记录结构已知）和PostgreSQL数据库。ETL 阶段必须读取两个源（文件和数据库）的内容并组合/集成/清理它们。在此之后，将数据加载到 DW 中。

为此目的，是更好的工具（例如 Talend）还是临时解决方案（使用编程语言编写临时例程）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:12:00.367

我建议您使用[Bulk Loader](http://wiki.pentaho.com/display/EAI/PostgreSQL+Bulk+Loader)将您的平面文件放入 DB。这允许您自定义加载规则，然后使用常规 SQL 处理/清理结果数据集（无需编写其他自定义代码）

# jquery - CSS3 / 后期 CSS2 跨浏览器兼容性（可能与 jQuery）

> ID：11454793
> 
> 赞同：0
> 
> 时间：2012-07-12T15:04:22.473
> 
> 标签：jquery, css, cross-browser

某个项目使用以下 CSS 功能产生了惊人的结果：

`box-shaddow; border-radius; RGBA`边框和背景上的颜色。

问题是前两个需要延迟`Firefox / Chrome / Safari`

浏览器和第二个在 IE8 及更低版本以及之前的版本`Firefox`和`Safari`.

所以其中一些特征可以用`PNG`图像来模拟，但这是解决问题的一种非常广泛的方法。

有没有`jQuery` `plugin / function / procedure`可以以合理的相似性模仿这三个属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:19:27.647

[CSS3 PIE](http://css3pie.com/)可能是您正在寻找的。但是，[HTML5 Please](http://html5please.com/)建议不要为这些功能使用 polyfill，而只是一个合理的后备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:38:03.913

如 HTML 所述，请：

> box-shadow 在大多数情况下都可以安全使用，除非您在大面积上应用它，因为这可能会在与页面交互时（滚动和悬停，以及过渡和动画）造成显着的性能影响。

当您同时使用 CSS3 PIE 修复相同元素（例如，带有悬停的菜单选项卡）上的其中一些（例如框阴影、圆角和渐变）时，性能影响是真实的。最好在旧浏览器上使用精灵，它们也会被缓存。

# android - 在android应用程序中将图像保存到本地数据库时出错

> ID：11454797
> 
> 赞同：0
> 
> 时间：2012-07-12T15:04:40.257
> 
> 标签：android

我正在开发一个 android 应用程序，其中我有一个自定义微调器 下面附上截图

我想要列表中显示的所有图像。想要将它们保存在本地，因为我正在实现警报应用程序

[http://postimage.org/image/3v8ht71b9/0c807e34/](http://postimage.org/image/3v8ht71b9/0c807e34/)

以前有没有人这样做过。

我希望当我的闹钟响起时，......这张图片应该伴随着它......

在此先感谢 酷 jatt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:09:45.167

我认为您应该将图像保存到`assets`而不是将它们存储到数据库以及如何通过该[检查](https://stackoverflow.com/questions/4336865/android-storing-image-into-project-directory-files)。

谢谢。

# validation - 如何使用 Selenium 检查页面中是否存在某些文本？

> ID：11454798
> 
> 赞同：50
> 
> 时间：2012-07-12T15:04:42.037
> 
> 标签：validation, selenium, webdriver, assert

我正在使用 Selenium WebDriver，如何检查页面中是否存在某些文本？也许有人向我推荐了有用的资源，我可以在其中阅读它。谢谢

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-12T15:49:38.397

使用[XPath](http://www.w3.org/TR/xpath/)并没有那么难。只需搜索包含给定文本的所有元素：

```
List<WebElement> list = driver.findElements(By.xpath("//*[contains(text(),'" + text + "')]"));
Assert.assertTrue("Text not found!", list.size() > 0); 
```

[官方文档](http://seleniumhq.org/docs/03_webdriver.html)不太支持此类任务，但它仍然是基本工具。

[JavaDocs](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)更强大，但需要一些时间才能了解所有有用和无用的内容。

要学习 XPath，只需[关注互联网](https://www.google.com/search?q=xpath%20tutorial)。该规范也是一个令人惊讶的好读物。

* * *

**编辑：**

或者，如果您不希望您的[隐式等待](http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits)使上述代码等待文本出现，您可以这样做：

```
String bodyText = driver.findElement(By.tagName("body")).getText();
Assert.assertTrue("Text not found!", bodyText.contains(text)); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-13T05:43:24.693

这将帮助您检查网页中是否存在所需的文本。

```
driver.getPageSource().contains("Text which you looking for"); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-12T20:17:03.747

您可以像这样检索整个页面的正文：

```
bodyText = self.driver.find_element_by_tag_name('body').text 
```

然后使用断言来检查它，如下所示：

```
self.assertTrue("the text you want to check for" in bodyText) 
```

当然，您可以特定并检索特定 DOM 元素的文本，然后检查它而不是检索整个页面。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-11T23:05:26.320

Selenium 2 webdriver 中没有 verifyTextPresent，因此您必须检查页面源中的文本。请参阅下面的一些实际示例。

### Python

在 Python 驱动程序中，您可以编写以下函数：

```
def is_text_present(self, text):
    return str(text) in self.driver.page_source 
```

然后将其用作：

```
try: self.is_text_present("Some text.")
except AssertionError as e: self.verificationErrors.append(str(e)) 
```

要使用正则表达式，请尝试：

```
def is_regex_text_present(self, text = "(?i)Example|Lorem|ipsum"):
    self.assertRegex(self.driver.page_source, text)
    return True 
```

请参阅：[`FooTest.py`文件](https://github.com/mycognitive/ads_tests/blob/master/selenium/FooTest.py)以获取完整示例。

或检查以下其他几个替代方案：

```
self.assertRegexpMatches(self.driver.find_element_by_xpath("html/body/div[1]/div[2]/div/div[1]/label").text, r"^[\s\S]*Weather[\s\S]*$")
assert "Weather" in self.driver.find_element_by_css_selector("div.classname1.classname2>div.clearfix>label").text 
```

^(资料来源：[另一种使用 Selenium Python 检查（断言）文本是否存在的方法](http://www.emalis.com/2013/08/another-way-to-check-assert-if-text-exists-using-selenium-python/))

### 爪哇

在Java中，以下函数：

```
public void verifyTextPresent(String value)
{
  driver.PageSource.Contains(value);
} 
```

用法是：

```
try
{
  Assert.IsTrue(verifyTextPresent("Selenium Wiki"));
  Console.WriteLine("Selenium Wiki test is present on the home page");
}
catch (Exception)
{
  Console.WriteLine("Selenium Wiki test is not present on the home page");
} 
```

^(来源：[在 Selenium 2 Webdriver 中使用 verifyTextPresent](http://www.seleniumwiki.com/webdriver/using-verifytextpresent-in-selenium-2-webdriver/))

* * *

### 贝哈特

对于 Behat，您可以使用[Mink 扩展](https://github.com/Behat/MinkExtension)。它在 中定义了以下方法[`MinkContext.php`](https://github.com/Behat/MinkExtension/blob/master/src/Behat/MinkExtension/Context/MinkContext.php)：

```
/**
 * Checks, that page doesn't contain text matching specified pattern
 * Example: Then I should see text matching "Bruce Wayne, the vigilante"
 * Example: And I should not see "Bruce Wayne, the vigilante"
 *
 * @Then /^(?:|I )should not see text matching (?P<pattern>"(?:[^"]|\\")*")$/
 */
public function assertPageNotMatchesText($pattern)
{
    $this->assertSession()->pageTextNotMatches($this->fixStepArgument($pattern));
}

/**
 * Checks, that HTML response contains specified string
 * Example: Then the response should contain "Batman is the hero Gotham deserves."
 * Example: And the response should contain "Batman is the hero Gotham deserves."
 *
 * @Then /^the response should contain "(?P<text>(?:[^"]|\\")*)"$/
 */
public function assertResponseContains($text)
{
    $this->assertSession()->responseContains($this->fixStepArgument($text));
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-17T21:17:36.053

在 c# 中，此代码将帮助您检查网页中是否存在所需的文本。

```
Assert.IsTrue(driver.PageSource.Contains("Type your text here")); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-24T11:22:47.103

您可以检查页面源中的文本，如下所示：

```
Assert.IsTrue(driver.PageSource.Contains("Your Text Here")) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-22T15:32:18.387

在python中，您可以简单地检查如下：

```
# on your `setUp` definition.
from selenium import webdriver
self.selenium = webdriver.Firefox()

self.assertTrue('your text' in self.selenium.page_source) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-03-12T19:15:42.093

**Python：**

```
driver.get(url)
content=driver.page_source
if content.find("text_to_search"): 
    print("text is present in the webpage") 
```

下载 html 页面并使用 find()

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-06T02:58:03.693

```
 boolean Error = driver.getPageSource().contains("Your username or password was incorrect.");
    if (Error == true)
    {
     System.out.print("Login unsuccessful");
    }
    else
    {
     System.out.print("Login successful");
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-02T18:42:23.543

JUnit+Webdriver

```
assertEquals(driver.findElement(By.xpath("//this/is/the/xpath/location/where/the/text/sits".getText(),"insert the text you're expecting to see here"); 
```

如果您的预期文本与 xpath 文本不匹配，webdriver 将告诉您实际文本与您期望的文本。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-24T10:38:44.943

string_website.py

网页中的搜索字符串

```
 from selenium import webdriver
    from selenium.webdriver.common.keys import Keys
    browser = webdriver.Firefox()
    browser.get("https://www.python.org/")
    content=browser.page_source

    result = content.find('integrate systems')
    print ("Substring found at index:", result ) 

    if (result != -1): 
    print("Webpage OK")
    else: print("Webpage NOT OK")
    #print(content)
    browser.close() 
```

**跑**

`python test_website.py`
在索引处找到子字符串：26722
网页正常

d:\tools>python test_website.py
在 index: -1 处找到子字符串；-1 表示没有找到
网页不正常

# javascript - 需要在运行 IOS 自动化脚本时发现崩溃

> ID：11454799
> 
> 赞同：0
> 
> 时间：2012-07-12T15:04:42.807
> 
> 标签：javascript, ios

我正在使用工具来测试 IOS 应用程序。有什么方法可以在我的脚本运行时找到有关应用程序崩溃的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:55:52.110

仍然应该生成一个崩溃日志，您可以使用 Organizer 获取它。无论如何，使用一些更高级的崩溃报告工具总是一个好主意，比如 HockeyApp 和 QuincyKit。它具有自动符号化、崩溃分组和分析的附加优势。

# java - BlazeDS 未异步执行或返回服务调用

> ID：11454802
> 
> 赞同：0
> 
> 时间：2012-07-12T15:04:58.767
> 
> 标签：java, actionscript, blazeds

我在我的远程配置中定义了一个 BlazeDS RemotingService，其中包含多个目的地。在我的场景中，我在 ActionScript 中进行了三个快速服务调用。两个呼叫对应一个目的地，而另一个呼叫对应另一个目的地。但是，所有三个调用都在服务器上同步执行，它们都在等待返回，直到最后一个服务请求完成。这是正常行为吗？是否可以使服务请求彼此独立地执行和返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:05:49.550

如果您同时进行三个服务调用，那么它们都将异步返回。他们不会等待最后一次服务调用完成。

但我不建议这样做，因为在同时拨打多个电话时，您很有可能遇到著名的“重复会话”问题。如果可能的话，一个接一个地打电话。

# php - PHP：使用准备好的语句并防止 SQL 注入与逃逸

> ID：11454804
> 
> 赞同：7
> 
> 时间：2012-07-12T15:05:11.943
> 
> 标签：php, prepared-statement, sql-injection, mysql-real-escape-string

我确实理解准备好的语句是寻求防止 SQL 注入的最终方法。但是，它们以有限的方式提供覆盖；例如，如果我让用户决定按操作的顺序（即，它是 ASC 还是 DESC？等），则准备好的语句没有覆盖。

我知道我可以将用户输入映射到一个预定义的白名单。但是，这只有在可以预先创建或彻底猜测白名单时才有可能。

例如，在我上面提到的情况下（ASC 或 DESC），这可以很容易地根据接受值列表进行映射和验证。但是不存在无法对照白名单验证部分 SQL 语句的情况吗？

如果存在这种情况，那么推荐的方法是什么？

如果我要使用底层数据库的内置转义实用程序（例如 mysql 的 mysql_real_escape_string）全面转义 user_input，我会在哪里失败？

我问这个问题的假设是我总是用引用的值构造我的 sql 语句——即使是整数......

让我们看看下面的例子并反思一下。

```
select {$fields} from {$table} where Age='{$age}' order by {$orderby_pref} 
```

假设所有变量都是用户提供的。

如果我要 mysql_real_escape_string 上面 SQL 中的所有变量（而不是使用准备好的语句，它只涵盖了我的一半，迫使我为另一半提供白名单，它无济于事），它不是同样安全吗（并且更容易编码）？如果不是，在哪种输入场景中转义实用程序会失败？

```
$fields       = mysql_escape($fields);
$table        = mysql_escape($table);
$age          = mysql_escape($age);
$orderby_pref = mysql_escape($orderby_pref);

select {$fields} from {$table} where Age='{$age}' order by {$orderby_pref} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:10:26.450

您可以使用 PDO，您的生活会变得更轻松......：

```
 #   Order
    switch(strtoupper($Order)){
        default:
        case 'ASC':
            $Order = 'ASC';
            break;

        case 'DESC':
            $Order = 'DESC';
            break;
    }

    #   ID
    $ID = 39;
    $Username = 'David';

    #   Query
    $Query = $this->DB->Main->prepare('SELECT * FROM Table WHERE ID = :ID AND Username = :Username ORDER BY HellBob '.$Order);
    $Query->bindValue(':ID', $ID, PDO::PARAM_INT);
    $Query->bindValue(':Username', $Username, PDO::PARAM_STR);

    #   All good ?
    if(!$Query->execute()){
        exit('Error');
    }

    // Results
    $Row = $Query->fetch(PDO::FETCH_ASSOC); 
```

您不必担心引号或 SQL 注入。您可以使用您提到的简单“白名单”将变量添加到查询中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:13:30.817

**无论您使用准备好的语句还是`mysql`转义函数，**您总是需要对表名或列名等内容使用白名单。****

 **问题是表名和列名没有用单引号或双引号引起来，所以如果你使用一个专门引用这些字符的函数（当然还有更多......），它不会对你的表名做任何事情。

考虑表名`my_table; DELETE * FROM mysql; SELECT * FROM my_table`。此字符串中的任何内容都不会被 mysql 的转义函数转义，但它绝对是您想要检查白名单的字符串。

除此之外，`mysql`转义函数在字符集方面存在问题，这会使它们变得无用，因此使用准备好的语句总是更好。**

# jquery - 将 id 分配给 gridview 表数据

> ID：11454810
> 
> 赞同：0
> 
> 时间：2012-07-12T15:05:44.140
> 
> 标签：jquery, gridview, html-table, rows

我有一个最初从数据表绑定的gridview。我需要为gridview中的某一行分配一个相应的id。我怎么能做到这一点？另一件事我有一个 jQuery 代码，可以使用以下代码为 gridview 添加另一个详细信息/行：

```
$('#addBtn').live("click", function () {

var fullname = $("#nameTxt").val();

var username = $("#usernameTxt").val();

var password = $("#passwordTxt").val();

var address = $("#addTxt").val();

var birthdate = $("#birthdatePickerbox").val();

var contactno = $("#contactTxt").val();

var jsonData = JSON.stringify({ fullname: fullname,
    username: username,
    password: password,
    address: address,
    birthdate: birthdate,
    contactno: contactno
});

$.ajax({

    type: "POST",

    url: "Admin.aspx/addUser",

    data: jsonData,

    contentType: "application/json; charset=utf-8",

    dataType: "json",

    success: function (mydata) {

        $.ajax({

            url: "Admin.aspx/GetAllUsers",
            data: "{}",
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (mydata) {

                clearAddData();

                alert("User successfully added");

                for (var i = 0; i < mydata.d.length; i++) {
                    $("#UserListGrid").append("<tr><td>" + mydata.d[i].userid +
                                              "</td><td>" + mydata.d[i].fullname +
                                              "</td><td>" + mydata.d[i].address +
                                              "</td><td>" + mydata.d[i].birthdate +
                                              "</td><td>" + mydata.d[i].contactno +
                                              "</td><td>" + mydata.d[i].username +
                                              "</td><td>" + mydata.d[i].password +
                                              "</td><td>" + mydata.d[i].usertype + "</td></tr>");
                }
                $("#tbl").append("</table>");

            }
        });

    },
    error: function () {
        clearAddData();

        alert("Failed to Add user");
    }
});
}); 
```

这会影响我的 ID 的初始分配吗？我需要使用从数据库收到的 id 重新分配表行的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:16:09.023

当我想在 GridView 中存储一行的 ID 时，我使用了一个不可见的模板字段，如下所示：

```
<asp:TemplateField Visible="false">
                    <ItemTemplate>
                        <asp:Label ID="MaterialID" Text='<%# Eval("MaterialID") %>' Visible="false" Enabled="false"
                            runat="server" />
                    </ItemTemplate>
                </asp:TemplateField> 
```

然后，当我想取回身份证时，

```
((Label)BillOfMaterials.Rows[e.RowIndex].Cells[1].FindControl("MaterialID")).Text 
```

我不熟悉 jQuery，所以我不知道它将如何与您的代码一起使用。

# ios5 - iOS 核心数据存储在 iCloud 中以与其他设备同步

> ID：11454813
> 
> 赞同：0
> 
> 时间：2012-07-12T15:05:58.930
> 
> 标签：ios5, core-data, xcode4.3, icloud

我一直在考虑让 Core Data 与 iCloud 一起工作，这样人们的数据就可以从多个设备上访问。我一直在尽可能地学习本教程 (http://timroadley.com/) 并使用我的应用程序，但我遇到了一些问题。

问题 1：当应用程序关闭（不仅仅是暂停）并重新打开时，表格中没有显示任何内容，因此之前的数据似乎没有被加载

问题 2：我不知道是 iCloud 还是应用程序，但同步更改需要时间。我在一台设备上进行了更改，在另一台设备上显示需要 2-3 分钟

谁能帮我解决这两个问题

此代码在我的 AppDelegate 中

```
- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
             // Replace this implementation with code to handle the error appropriately.
             // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
    {
    if((__persistentStoreCoordinator != nil)) {
        return __persistentStoreCoordinator;
    }

    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];
    NSPersistentStoreCoordinator *psc = __persistentStoreCoordinator;

    // Set up iCloud in another thread:

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // ** Note: if you adapt this code for your own use, you MUST change this variable:
        NSString *iCloudEnabledAppID = @"MF4HVVX5DS.Desbrina.Medicine-Tracker";

        // ** Note: if you adapt this code for your own use, you should change this variable:
        NSString *dataFileName = @"Medicine-Tracker.sqlite";

        // ** Note: For basic usage you shouldn't need to change anything else

        NSString *iCloudDataDirectoryName = @"Data.nosync";
        NSString *iCloudLogsDirectoryName = @"Logs";
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSURL *localStore = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:dataFileName];
        NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

        if (iCloud) {

            NSLog(@"iCloud is working");

            NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

            NSLog(@"iCloudEnabledAppID = %@",iCloudEnabledAppID);
            NSLog(@"dataFileName = %@", dataFileName);
            NSLog(@"iCloudDataDirectoryName = %@", iCloudDataDirectoryName);
            NSLog(@"iCloudLogsDirectoryName = %@", iCloudLogsDirectoryName);
            NSLog(@"iCloud = %@", iCloud);
            NSLog(@"iCloudLogsPath = %@", iCloudLogsPath);

            if([fileManager fileExistsAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]] == NO) {
                NSError *fileSystemError;
                [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]
                       withIntermediateDirectories:YES
                                        attributes:nil
                                             error:&fileSystemError];
                if(fileSystemError != nil) {
                    NSLog(@"Error creating database directory %@", fileSystemError);
                }
            }

            NSString *iCloudData = [[[iCloud path]
                                     stringByAppendingPathComponent:iCloudDataDirectoryName]
                                    stringByAppendingPathComponent:dataFileName];

            NSLog(@"iCloudData = %@", iCloudData);

            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
            [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
            [options setObject:iCloudLogsPath                forKey:NSPersistentStoreUbiquitousContentURLKey];

            [psc lock];

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:[NSURL fileURLWithPath:iCloudData]
                                    options:options
                                      error:nil];

            [psc unlock];
        }
        else {
            NSLog(@"iCloud is NOT working - using a local store");
            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

            [psc lock];

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:localStore
                                    options:options
                                      error:nil];
            [psc unlock];

        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [[NSNotificationCenter defaultCenter] postNotificationName:@"SomethingChanged" object:self userInfo:nil];
        });
    });

    return __persistentStoreCoordinator;
}

- (NSManagedObjectContext *)managedObjectContext {

    if (__managedObjectContext != nil) {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];

    if (coordinator != nil) {
        NSManagedObjectContext* moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];

        [moc performBlockAndWait:^{
            [moc setPersistentStoreCoordinator: coordinator];
            [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(mergeChangesFrom_iCloud:) name:NSPersistentStoreDidImportUbiquitousContentChangesNotification object:coordinator];
        }];
        __managedObjectContext = moc;
    }

    return __managedObjectContext;
}

- (void)mergeChangesFrom_iCloud:(NSNotification *)notification {

    NSLog(@"Merging in changes from iCloud...");

    NSManagedObjectContext* moc = [self managedObjectContext];

    [moc performBlock:^{

        [moc mergeChangesFromContextDidSaveNotification:notification];

        NSNotification* refreshNotification = [NSNotification notificationWithName:@"SomethingChanged"
                                                                            object:self
                                                                          userInfo:[notification userInfo]];

        [[NSNotificationCenter defaultCenter] postNotification:refreshNotification];
    }];
} 
```

这是在主视图控制器中

```
- (void)reloadFetchedResults:(NSNotification*)note {
    NSLog(@"Underlying data changed ... refreshing!");
    [self fetchedResultsController];
    NSLog(@"%@", note.object);
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(reloadFetchedResults:)
                                                 name:@"SomethingChanged"
                                               object:[[UIApplication sharedApplication] delegate]];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.

    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:22:33.697

> > 问题 1：当应用程序关闭（不仅仅是暂停）并重新打开时，表格中没有显示任何内容，因此之前的数据似乎没有被加载

检查您是否将所有数据保存到托管对象上下文中。这不应该是核心数据问题

> > 问题 2：我不知道是 iCloud 还是应用程序，但同步更改需要时间。我在一台设备上进行了更改，在另一台设备上显示需要 2-3 分钟

2-3分钟真的很好。有时可能需要数小时才能使数据处于完全同步状态。至少我半年前经历过。

请记住，iCloud 不适合在多个设备上同时使用。它宁愿提供诸如最终一致性之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:23:51.563

在您的示例中： NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil]; 使用你的 NSString *iCloudEnabledAppID = @"MF4HVVX5DS.Desbrina.Medicine-Tracker"; 作为 URLForUbiquityContainerIdentifier

它应该是这样的：

NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier: iCloudEnabledAppID];

# c# - Exocortex（Windows 7 更新）似乎干扰了 MediaElement

> ID：11454814
> 
> 赞同：0
> 
> 时间：2012-07-12T15:06:00.733
> 
> 标签：c#, windows-7, mediaelement

我有一个可以加载和播放视频文件的工作程序。它在视频上有一个画布，中断在其上绘制从单独的文本或 csv 文件加载的事件。这一切都运行得非常好，我已经使用它好几个星期了，但我想添加 fft 和视频分析功能。我将 Exocortex 添加到项目中，现在加载的视频不会播放，加载的事件也不会显示在画布上。

我想不出为什么这会产生任何影响，这是唯一的改变。该程序的其余部分似乎正常工作。Exocortex 是否有任何可能干扰 MediaElements 或 Canvases 的内容？

编辑：进一步调查表明问题不在于 Exocortex，而在于 mediaelement 和最近的 Windows 7 更新。解决方案仍然在逃避我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:47:30.837

使用新安装的 Windows 7 重新格式化我的计算机已经解决了这个问题。换句话说，我完全不知道什么坏了，什么不工作。Windows Media 播放器遇到了同样的问题。

# iphone - Retina-Display-iPhone 与普通 iPhone 的图像

> ID：11454815
> 
> 赞同：-2
> 
> 时间：2012-07-12T15:06:00.927
> 
> 标签：iphone, ios, retina-display

我想在我的 iPhone 应用程序中为我的 UIButtons、屏幕背景等提供图像。
如果我有，它是否适用于 Retina 显示屏和正常显示屏

1.  ButtonImage.png 和 ButtonImage@2x.png
2.  Background.png 和 Background@2x.png

或者，我应该做任何额外的编码以便它适用于两个显示器吗？

ButtonImage.png 在 Retina Simulator 上看起来很尴尬。所以，我应该有一个更高分辨率的图像。所以...请帮助我。

昌都

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:08:54.893

UIImage 的`imageNamed:`方法会自动在视网膜设备上查找@2x 图像（如果它们可用）；不需要额外的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:09:26.793

如果您将图像放在用户界面中的`.xib`文件中，或者如果您使用`+imageNamed:`类方法 for `UIImage`，那么 @2x 后缀足以加载 Retina 图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T10:11:18.210

这是正确的事情，我的意思是无论您使用或描述方式，但您需要做的第二件事是为按钮分配位置。如果您将位置分配为常量或通过声明 x,y 坐标来修复，那么它可能不起作用，因此请尝试以动态方式分配按钮的位置，以便在视网膜调用它时它将占据位置。谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:09:06.947

你无事可做，ios做选择合适的工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T15:11:36.460

简短的回答：是的，这是做你想做的事情的正确方法。 `UIImage`将为您解决所有问题。

**但是**，不要忘记您不能只复制和重命名给定的图像（例如，`Background.png`）。您需要获得与 相同`Background.png`但分辨率为 4 倍的图像（即宽度加倍，高度加倍）。然后，你可以命名它`Background@2x.png`，一切都会变得非常敏锐。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T15:14:35.587

在这里，您必须使用简单的图像，它适用于正常显示和视网膜显示。您只需在资源包中使用 ButtonImage.png 和 Background.png 指定简单图像，在资源包中指定视网膜图像 ButtonImage@2x.png Background@2x.png。

现在您只需要在代码中指定简单的图像，当在具有视网膜屏幕分辨率的设备（即 iPhone 4 及更高版本）上运行时，将自动拍摄视网膜图像。

backgroundImageView.image = [UIImage imageNamed:@"Background.png"];

相同的代码将起作用，当 iPhone 4 带有视网膜显示时，它会自动考虑来自资源包的图像 Background@2x.png。

如果您还有其他问题，请告诉我。

# java - 将 Maven 存储库添加到 settings.xml

> ID：11454819
> 
> 赞同：2
> 
> 时间：2012-07-12T15:06:16.227
> 
> 标签：java, maven, m2e

我正在尝试将存储库添加到我的 settings.xml 文件中，以便可以在我正在处理的项目中使用该存储库中的库。这是我当前的 settings.xml 文件。

```
<settings>
  .
  .

  <profiles>
    <profile>
      <id>standard-extra-repos</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      ...
      <repositories>

      <repository>
          <id>xuggle repo</id>
          <name>Xuggler Repository</name>
          <url>http://xuggle.googlecode.com/svn/trunk/repo/share/java/</url>
          <layout>default</layout>
          <releases><enabled>true</enabled><updatePolicy>never</updatePolicy></releases>
          <snapshots><enabled>true</enabled><updatePolicy>never</updatePolicy></snapshots>
        </repository>
      </repositories>
      <pluginRepositories>
      ...
      </pluginRepositories>

    </profile>
  </profiles>
  .
</settings> 
```

我想将 Xuggler 存储库添加到我的 settings.xml 中，这样我就可以在 M2E (Maven 2 Eclipse) 中搜索适当的依赖项并将它们添加到我的项目中。当 II 转到windo->show view->Maven->maven 存储库时，xuggle 存储库是可见的，但完全是空的。找不到我需要的罐子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:12:31.737

推荐的方法是使用 Maven 存储库管理器（例如 Nexus）来管理您需要的存储库。

请参阅此处如何配置设置文件：http: [//books.sonatype.com/nexus-book/reference/config-maven.html#ex-maven-nexus-simple](http://books.sonatype.com/nexus-book/reference/config-maven.html#ex-maven-nexus-simple)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:12:37.943

为了支持从 m2e[搜索](http://wiki.eclipse.org/M2E_FAQ#How_Search_Works)和浏览远程存储库，存储库必须提供 m2e 索引。这是[有些过时的文档](https://docs.sonatype.org/display/M2ECLIPSE/Nexus+Indexer)。

# javascript - 当 URL 哈希 # 更改时将 div 附加到正文

> ID：11454820
> 
> 赞同：1
> 
> 时间：2012-07-12T15:06:16.787
> 
> 标签：javascript, jquery, hash, append

我正在使用[窗帘.js](https://github.com/Victa/curtain.js)，并希望始终保持 DIV（包含导航）可见，除非用户正在查看第一个面板，即在页面顶部。

目前，DIV 位于面板二内

我正在考虑在滚动页面时使用哈希更改来触发对正文的附加。Curtain.js 为每个面板创建一个单独的 URL，并且每次面板进入视图时 URL 都会更改。

我可以将 div 附加到正文（如下），但我需要确定何时执行此操作，但我不确定如何操作？谁能帮帮我？

```
$("body").append($('.nav-wrap')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:10:12.440

你可以使用[`onhashchange`](https://developer.mozilla.org/en/DOM/window.onhashchange)事件：

> 当窗口的哈希值改变时触发 hashchange 事件

```
$(window).bind('hashchange', function() {
   $("body").append($('.nav-wrap'));
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:19:26.427

好吧，不是使用一些hacky解决方案，而是在插件文件中进行了大量挖掘之后，我只是添加了：

```
$("body").append($('.nav-wrap')); 
```

到第`setHash`491 行的函数。工作很享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:16:22.717

您可以使用 JQuery 来绑定事件

```
$(window).bind('hashchange', function(){ ... }); 
```

并在没有 onhashchange 事件时添加一些解决方法。 [jQuery - hashchange 事件](https://stackoverflow.com/questions/3090478/jquery-hash-change-event)

# java - 在 IntelliJ IDEA 中导入 Maven 依赖项

> ID：11454822
> 
> 赞同：227
> 
> 时间：2012-07-12T15:06:21.343
> 
> 标签：java, maven, intellij-idea, maven-3

我有一个关于 IntelliJ IDEA 11 的小问题。我刚刚从 subversion 导入了一个项目——它是一个 maven 项目。但是我在 maven 库依赖项中有一个问题，因此我无法自动包含所有 maven 依赖项 - 只有当我打开该类/这就是我在这里得到的内容时，IDEA 才会显示依赖项错误：

![在此处输入图像描述](../Images/d8c5da9da498b5d9fd241d448de315f8.png)

所以我希望自动添加所有依赖项 - 这可能还是我必须通过所有类文件来识别和添加 Maven 依赖项？！

更新：做了一些修改后，我发现如何以某种方式解决我的问题。这就是我所做的： ![在此处输入图像描述](../Images/daa4288ed3d98c34ce2c866b59fc5fd4.png)

但我认为从逻辑上讲它不会包含并检查新的依赖项？！... intelliJ 中是否有任何设置区域 - 自动将依赖项导出到类路径？！

* * *

## 回答 #1

> 赞同：307
> 
> 时间：2012-07-13T08:59:16.617

IntelliJ 应该自动下载所有依赖项并将其添加到项目的类路径中，只要您的 POM 兼容并且所有依赖项都可用。

将 Maven 项目导入 IntelliJ 时，通常会出现一个信息框，询问您是否要为 Maven 项目配置*自动导入*。这意味着如果您对 POM 进行任何更改，这些更改将自动加载。

您可以通过 File > Settings > Maven > Importing 启用此类功能，有一个复选框显示“自动导入 Maven 项目”。

如果这没有帮助，那么我建议进行全面清理并重新开始：

*   关闭您的项目窗口（和 IntelliJ）并删除所有`*.iml`文件和所有`.idea`文件夹（每个模块应该有一个）
*   `mvn clean install`从命令行运行
*   将项目重新导入 IntelliJ 并在它要求您启用自动导入时注意

**IntelliJ 2016 更新**：

*自动导入 Maven 项目*设置已移至IntelliJ 首选项中的**构建、执行、部署 > 构建工具 > Maven > 导入**。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2014-07-22T16:25:20.413

## 在 IntelliJ 14 之前修复

文件 [菜单] -> 设置 -> maven -> 导入并*取消选中*“使用 maven3 导入项目”

参考：http: [//youtrack.jetbrains.com/issue/IDEA-98425](http://youtrack.jetbrains.com/issue/IDEA-98425)（可能还有其他一些想法）

## 修复 IntelliJ 15+

再次遇到这个问题，这次是 IntelliJ 15，它不再提供“使用 maven3 导入”选项。原因是有时 IntelliJ“不能正确解析 maven 依赖项”，如果它不能正确解析其中一个，它显然会放弃*所有*这些。您可以通过打开 maven 项目工具窗口（查看菜单 -> 工具窗口 -> Maven 项目）来判断是否是这种情况。然后扩展您的一个 Maven 项目及其依赖项。如果依赖关系都用红色下划线，“休斯顿，我们有问题”。 [![在此处输入图像描述](../Images/ec886ad9ca3d82e64d15876ecfef7b3e.png)](https://i.stack.imgur.com/AeswW.png)

通过将鼠标悬停在项目名称本身上，您实际上可以看到*真正的失败。*

[![在此处输入图像描述](../Images/9c75569b99b16bf9cc9758377ccdcdb9.png)](https://i.stack.imgur.com/Ne5jy.png)

在我的例子中，它说“问题：没有可用于 XXX 的版本”或“无法读取工件 org.xy.z 的描述符”参考：[https](https://youtrack.jetbrains.com/issue/IDEA-128846) ://youtrack.jetbrains.com/issue/IDEA-128846 和 [https:// youtrack.jetbrains.com/issue/IDEA-152555](https://youtrack.jetbrains.com/issue/IDEA-152555)

在这种情况下，我似乎在处理一个没有关联 pom 文件的 jar（在我们的 maven nexus 存储库中，以及我的本地存储库中）。如果这也是您的问题，“当前的解决方法：如果您实际上不需要在自己的代码中使用该 jar 中的类（例如仅传递 maven 依赖项），您实际上可以从 pom 中注释掉它（暂时），maven项目重新加载，然后取消注释它。不知何故，在那之后IntelliJ“记住”它的旧工作依赖项。临时添加一个maven传递排除也可能这样做，如果你从传递依赖链中遇到它。 "

可能有帮助的另一件事是使用比捆绑的 3.0.5 的“更新版本”的 maven。为了将其设置为默认使用，关闭所有 intellij 窗口，然后打开首选项 -> 构建、执行和部署 -> 构建工具 -> maven，然后更改 maven 主目录，它应该说“默认项目”在您调整它时位于顶部，尽管您也可以针对特定项目调整它，只要您在调整后“重新导入”即可。

## 清除缓存

删除您的 intellij 缓存文件夹（Windows：HOMEPATH/.{IntellijIdea,IdeaC}XXX linux ~/.IdeaIC15）和/或卸载并重新安装 IntelliJ 本身。这也可以通过转到 File [menu] -> 来完成`Invalidate Caches / Restart...`。单击`invalidate and restart`。这将重新索引您的整个项目并解决 IntelliJ 的许多难以追踪的问题。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2015-11-13T04:30:49.160

导入项目时，选择`pom.xml`而不是项目目录。它应该工作。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-07-12T15:17:20.970

尝试从 IntelliJ IDEA 的 Maven 项目面板重新导入项目。它应该自动下载并配置您定义的所有依赖项`pom.xml`。

如果由于某种原因无法从 IDEA 下载，`mvn install`请从命令行尝试并查看是否可以获取依赖项。

当然，所有必需的依赖项和任何自定义存储库都必须直接在`pom.xml`文件中定义。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2016-10-18T01:43:19.740

对于 IntelliJ 2016-2.4（我相信其他新版本）：

查看 > 工具窗口 > Maven 项目

在新显示的工具栏中，选择 Maven 设置（工具集的图标）。

当此屏幕打开时，展开 Maven 菜单并单击“导入”

在这里，单击“自动导入 Maven 项目”。还要确保“JDK for Importer”选项与您要使用的 JDK 版本相匹配。

单击确定。现在转到 pom.xml 中的红色依赖项，选择红色灯泡，然后单击“更新 Maven 索引”。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-03-31T15:10:44.910

对我有什么帮助：

导航：设置 | 构建、执行、部署 | 马文

指定“Maven 主目录”——你安装 maven 的地方

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-06-18T09:07:24.467

如果某些 maven 模块未编译，请检查它们的 pom.xml 是否在“忽略的文件”列表中。在 IntelliJ 中转到

> 首选项 -> 项目设置 -> maven -> 忽略的文件

并检查相关的 pom.xml 是否被忽略。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2019-05-06T07:54:52.653

我遇到了同样的问题，并尝试了这里提到的所有答案，但都没有奏效。

简单的解决方案是转到您的项目文件夹并删除所有 .idea 和 .iml 文件并重新启动 IntelliJ ide。有用。无需对设置进行任何操作。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2014-09-26T16:00:42.073

打开`IntelliJ Idea`，转到 **File > Other Settings > Default Settings... > Maven (Preferences) > Importing** or| `Preferences > Maven > Importing`

![在此处输入图像描述](../Images/b9e798adc53b5ecf3db0380a09705e8e.png)

单击控制台中的**启用自动导入**。

![在此处输入图像描述](../Images/b4f22c9c82e4a65d63e99e14f4de4982.png)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-11-12T19:06:43.833

创建新项目时，您只需选择以下选项：

...
**从外部模型导入项目**
*在现有外部模型（Eclipse、Maven ...）上创建 IDEA 项目结构*
...

从那里你会发现它非常直接。
在您的情况下，您可以关闭您的项目并简单地创建一个新项目。选择您的项目目录，该目录将覆盖它，使其成为 Maven 项目。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-02-24T08:58:23.370

如果多次导入相同的路径，导入 Maven 依赖项可能不起作用。这可能会在导入现有的 Maven 项目后自动发生。我无法弄清楚为什么会发生这种情况，所以我倾向于认为这是一个错误。

例如，如果我的项目是

```
hibernate
  src/main
  src/test 
```

这三个路径可以作为顶部节点导入：

```
hibernate
src/main
src/test 
```

`src/main`如果是这种情况，则依赖项似乎是正确的，但在您删除多余的路径（在本例中为和`src/test`）之前，它们不会被使用。完成此操作后，刷新并单击 Build > Rebuild Project。IDEA 将获取依赖项。

此问题的一个症状是，当您手动检查库时，IDEA 会警告您路径重复（问题中的第二个屏幕截图）。

有几种方法可以在需要时重新读取依赖项。如果您转到“Maven Projects”选项卡，选项卡左上方有一个“Reimport All Maven Projects”图标。如果您怀疑 IDEA 感到困惑，您可以单击 File > Invalidate Caches。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2018-04-23T06:15:50.897

首先检查为**用户设置文件指定的路径：**在**Settings -> Build,Execution,Development -> Build Tools -> Maven**中。该字段应具有您的 Maven的**settings.xml的路径。**此外，settings.xml 应该具有正确的远程存储库路径。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2014-02-21T20:48:38.193

进入您的项目结构，在项目设置、模块下，选择依赖关系表。对于每个依赖项，将范围从“测试”更改为“编译”。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2014-09-04T00:04:00.320

如果在右下角显示“2 个进程正在运行...”或类似内容，您可能只需要等待它完成，因为下载所有 jar 可能需要一些时间。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2018-09-05T11:21:15.400

我有一个类似的问题，在我的情况下，我使用的`settings.xml`是不是从 IntelliJ 挑选的自定义。

**解决方案：（**
`File > Settings > Build, Execution, Deployment > Maven: User settings file`在这里选择我的自定义 settings.xml）。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2015-10-26T09:13:10.510

重新导入项目。如果你安装了 maven 插件，你可以使用它。

右键单击项目 -> Maven -> 重新导入

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-01-24T13:57:56.293

我遇到了一些子依赖项在 IntelliJ 2016.3.X 中无法解决的问题。这可以通过将`Maven home directory`Settings > Build, Execution, Deployment > Build Tools > Maven 从`Bundled (Maven 3)`更改为 来解决`/usr/share/maven`。

之后，所有子依赖项都像以前的 IntelliJ 版本一样得到解决。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2021-05-10T12:07:05.350

因此，我在组织的许多代码库中也面临着这个问题。除了上面建议的答案之外，我们还可以调整 jvm 的分配池内存。这是因为，大型代码库中引入的依赖项的数量可能会让 jvm for IDE 无法完全构建项目。因此尝试增加 XMX 值并且它起作用了！[添加 -Xmx3072 以解决 IntelliJ 中“未构建”我的 Java 项目的问题](https://i.stack.imgur.com/X2DSu.png)

[![在此处输入图像描述](../Images/47ca6714d1a94fd2cd32b346b06e0b11.png)](https://i.stack.imgur.com/xnoWj.png)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2018-10-30T15:47:19.277

从项目目录中删除 .idea 文件夹，然后将项目重新导入为 Maven 项目对我有用。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2018-09-01T03:42:15.683

我的 macbook 也有类似的问题，只是做了一点小改动`pom.xml`，它开始下载所有依赖项：

早期的依赖项为我的 Windows 机器编写如下：

```
<dependencies>
 <dependency>
  <groupId>javax.mail</groupId>
  <artifactId>mail</artifactId>
  <version>1.4</version>
</dependency>
</dependencies> 
```

我刚刚删除了`<dependencies>`and`</dependencies>`标签，它开始下载所有依赖项：

```
<dependency>
  <groupId>javax.mail</groupId>
  <artifactId>mail</artifactId>
  <version>1.4</version>
</dependency> 
```

我不确定它是否适合你..但对我来说很好。

谢谢

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2017-07-14T21:35:46.473

Maven - 重新导入对我不起作用。我在 STS（Eclipse）中有 Spring 项目，我的解决方案是将项目导入 IDEA，如下所示：

1）文件 - 新建 - 来自现有源的项目... - 选择目录 - 选择 Eclipse。
2) 在设置中将 Maven 自动导入设置为 true。
3) 然后右键单击 pom.xml 并选择 Add as Maven Project。

在此之后，它已经导入了所有内容。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2019-06-28T10:11:55.523

就我而言，MAVEN 使用的 JAVA 路径未设置为机器上配置的 JAVA_HOME。因此，它甚至没有尝试下载依赖项。我遵循的步骤解决了这个问题，

1.  检查 JAVA 路径，**设置 >> 构建 >> 构建工具 >> 导入 >> JDK for importer**。将其指向 JAVA_HOME。

2.  `mvn clean install -U`

    使用上述命令强制下载依赖项。

3.  重新导入 Maven 项目

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2014-12-08T07:18:55.133

我通过使用正确的镜像配置更新我的 settings.xml 文件解决了这个问题，似乎每次导入 maven 模块时，intellij 都会尝试从存储库下载元数据。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2015-08-14T14:29:48.897

劫持一点以添加最终对我有用的东西：

进入`Maven Projects`IDE 右侧的边栏，并验证您的依赖项是否正确列在您的模块下。假设它们是，只需让 IDEA 重新导入（顶部的第一个按钮，看起来像两个蓝色箭头形成一个逆时针圆圈）。

一旦我这样做了，并让 IDEA 为我重新加载项目，我所有的依赖项都被神奇地理解了。

供参考：这是与`IDEA 13.1.2`

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2019-06-25T10:22:50.273

您可能在公司的内部网络下工作。

如果是这样，要下载或添加外部 Maven 依赖项，您的`settings.xml`文件`user/<username>/.m2`夹下的文件可能需要更新。

请联系您的管理员以提供正确的`settings.xml`文件，然后将其粘贴到您的`.m2`文件夹中。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-01-28T13:04:19.363

就我而言，由于某种原因，其中一个模块被忽略了。要解决这个问题：右键单击有问题的模块并选择“Unignore Projects”。

[![忽略项目示例](../Images/0d576a44190c4e8b02f0416f4d788306.png)](https://i.stack.imgur.com/Z4Ky2.png)

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2016-04-12T20:30:02.707

我遇到了同样的问题并尝试了所有没有解决问题的建议，我使用的是 Intellij 版本 13.1.3

最后在花了几个多小时试图修复它之后，我决定尝试升级版本并在 14.1.4 版本中打开项目，最终解决了这个问题。我认为这可能是以前版本中的一个错误。

我希望这有帮助！

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2018-09-05T10:43:11.453

我能够通过从**项目设置-> 模块**列表中删除不必要的模块来解决它。

[![在此处输入图像描述](../Images/1f6e6b08455a25594c2f6f0fb008ba51.png)](https://i.stack.imgur.com/HtqZc.png)

事实证明，当我通过从项目文件夹（而不是打开 pom.xml）导入来创建 IntelliJ 项目时，IntelliJ IDEA 自动创建了这些附加模块。然后，在将项目声明为 Maven 项目后，创建了适当的模块，并且现有模块与它们发生冲突。也可以在项目创建期间排除这些模块。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2021-04-27T03:29:13.753

**无效缓存**对我有用：

**文件 > 使缓存无效**

检查：

清除文件系统缓存和本地历史
清除下载的共享索引

然后**无效并重新启动**

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-02-11T22:05:09.773

如果一切都失败了，请检查本地 .m2 存储库中的 jar 文件是否确实有效且未损坏。就我而言，该文件尚未完全下载。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2016-03-28T09:54:07.833

在 Maven 中，当我删除了dependencyManagement xml 部分并且直接在项目部分下有依赖项时，依赖项为我包括在内

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2020-11-03T20:36:30.000

此问题的一种可能模式是您没有与 Nexus 的连接，基本上您想在离线模式下构建项目。但是，当您导入项目时，Idea 会尝试自动下载 Maven 依赖项......但失败了。您在“设置”中设置了“脱机工作”复选框，但为时已晚：在初始下载尝试期间某些内容已损坏。此处列出的两个选项都不能帮助我解决这个问题。相反，我做了以下事情：

1.  首先创建空 Java（不是 Maven）项目
2.  选中 Maven 设置中的脱机工作选项
3.  将我的项目作为 Maven 模块添加到这个新项目中

这样它就起作用了。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2019-10-26T11:34:08.290

> re-import-maven **->** close-intellij **->** delete-the-entire - **`.idea`**-folder **->** re-open-the-project **->** build **->** build-project/build-module- *'你的父模块'*

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2019-06-20T15:06:34.047

我可以通过在 pom.xml 文件中的构建标记之后添加这行代码来修复我的问题，我将它与我正在运行的项目进行了比较，发现这就是区别，现在我一切都好。

```
<repositories>
        <repository>
            <id>spring-snapshots</id>
            <name>Spring Snapshots</name>
            <url>https://repo.spring.io/snapshot</url>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
        <repository>
            <id>spring-milestones</id>
            <name>Spring Milestones</name>
            <url>https://repo.spring.io/milestone</url>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>spring-snapshots</id>
            <name>Spring Snapshots</name>
            <url>https://repo.spring.io/snapshot</url>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </pluginRepository>
        <pluginRepository>
            <id>spring-milestones</id>
            <name>Spring Milestones</name>
            <url>https://repo.spring.io/milestone</url>
        </pluginRepository>
    </pluginRepositories> 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2019-12-05T22:02:01.030

1.  从 maven 选项卡单击 + 并选择 pom.xml
2.  从 Maven 选项卡单击下载源和文档
3.  在项目结构（您可以在其中查看项目文件/目录）上，右键单击您要构建的项目并选择构建模块项目名称。
4.  从选项卡运行 - 使用 + 添加应用程序编辑配置并填写以下字段： i. 主类 - 从项目选项卡中手动选择主类 ii。使用模块的类路径 - 选择应用程序名称 iii。缩短命令行 - 类路径文件
5.  现在只需运行该应用程序。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2017-10-14T08:32:11.287

问题似乎是尽管在 pom.xml 中列出了您的依赖项，但 IntelliJ IDEA 在您运行项目时不会重建这些依赖项。

对我有用的是：

转到“运行”->“编辑配置...”，找到您的应用程序，确保“启动前：”部分已展开，单击绿色加号，然后选择“构建项目”。

[![在此处输入图像描述](../Images/ff7bbb436af72e63716b9b91bb769844.png)](https://i.stack.imgur.com/QvqlB.png)

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2021-06-18T13:57:31.217

**IntelliJ 2020.3.3**

这个是为我做的。

构建、执行、部署 > 构建工具。

更改“在构建脚本更改后重新加载项目”：

*   从默认的“外部更改”到“任何更改”

[![在此处输入图像描述](../Images/82246596aef72487bd783b7b3f326f04.png)](https://i.stack.imgur.com/ARJE9.png)

有了这个，项目重建需要一段时间，但现在我可以在 IntelliJ 中看到 Maven 依赖项：

[![在此处输入图像描述](../Images/1030daab8c2a67bc1d91002b42ada1fb.png)](https://i.stack.imgur.com/OGkK0.png)

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2022-01-13T09:34:44.933

解决方案： -

1.  转到文件 -> 设置 -> maven -> maven 主路径
2.  在那里你会发现捆绑的（maven 3）类似的东西选择maven的适当主路径，其中maven文件存在于系统中（环境变量中给出的路径）
3.  点击申请
4.  刷新项目。

# c++ - 如何展平嵌套容器的迭代器？

> ID：11454825
> 
> 赞同：7
> 
> 时间：2012-07-12T15:06:22.803
> 
> 标签：c++, iterator

这是（但）詹姆斯对这个问题的回答的（另一个）后续行动：[Flattening iterator](https://stackoverflow.com/questions/3623082/flattening-iterator/3623597)

如何更改 flattenig_iterator 使其递归工作？假设我有更多级别的嵌套容器，并且我不想被限制在给定的嵌套深度。即 flattening_iterator 应该与

```
std::vector< std::vector < std::vector < int > > > 
```

以及与

```
std::vector< std::vector < std::vector < std::vector < int > > > > 
```

在我的实际代码中，我有一个对象数组，这些对象本身可能包含也可能不包含这样的数组。

**编辑**：

在尝试了通过不同类型的嵌套容器进行迭代的不同方式之后，我学到了一些其他人可能也会感兴趣的东西：

使用嵌套循环访问容器元素的执行速度比使用迭代器解决方案快 5 到 6 倍。

优点：

*   元素可以是复杂的对象，例如（在我的例子中）包含容器的类。
*   更快的执行

缺点：

*   每个容器结构都需要新的循环实现
*   标准库算法不可用

其他优点和缺点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T15:12:31.283

我将快速概述一个解决方案：

1.  编写一个`is_container`检测`begin()`和`end()`成员的特征，或者可能是一些更复杂的规则；
2.  编写一个`all_flattening_iterator<T>`模板，它只是一个`flattening_iterator<all_flattening_iterator<typename T::value_type>>`;
3.  编写`all_flattening_iterator<T>`for when的特化`T`不是容器（使用默认模板`bool`参数），它只是一个常规迭代器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T17:01:38.717

好的，所以这不是一个完整的解决方案 - 但我没时间了。所以这目前实现的不是一个完整的迭代器，而是一个简化的迭代器类，它定义了类似这个接口的东西，并且需要 C++11。我已经在 g++4.7 上对其进行了测试：

```
template<typename NestedContainerType, typename Terminator>
class flatten_iterator
{
    bool complete();
    void advance();
    Terminator& current();
}; 
```

嵌套容器类型在哪里`NestedContainerType`（令人惊讶），终结者是您想要摆脱扁平化的最里面的东西的类型。

下面的代码有效，但这肯定没有经过广泛的测试。把它完全包起来（假设你只对向前推进感到满意）不应该做太多的工作，特别是如果你使用[`boost::iterator_facade`](http://www.boost.org/doc/libs/1_50_0/libs/iterator/doc/facade-and-adaptor.html#iterator-facade).

```
#include <list>
#include <deque>
#include <vector>

#include <iostream>

template<typename ContainerType, typename Terminator>
class flatten_iterator
{
public:
    typedef flatten_iterator<typename ContainerType::value_type, Terminator> inner_it_type;
    typedef typename inner_it_type::value_type value_type;

    flatten_iterator() {}

    flatten_iterator( ContainerType& container ) : m_it( container.begin() ), m_end( container.end() )
    {
        skipEmpties();
    }

    bool complete()
    {
        return m_it == m_end;
    }

    value_type& current()
    {
        return m_inner_it.current();
    }

    void advance()
    {
        if ( !m_inner_it.complete() )
        {
            m_inner_it.advance();
        }
        if ( m_inner_it.complete() )
        {
            ++m_it;
            skipEmpties();
        }
    }

private:
    void skipEmpties()
    {
        while ( !complete() )
        {
            m_inner_it = inner_it_type(*m_it);
            if ( !m_inner_it.complete() ) break;
            ++m_it;
        }
    }

private:
    inner_it_type                    m_inner_it;
    typename ContainerType::iterator m_it, m_end;
};

template<template<typename, typename ...> class ContainerType, typename Terminator, typename ... Args>
class flatten_iterator<ContainerType<Terminator, Args...>, Terminator>
{
public:
    typedef typename ContainerType<Terminator, Args...>::value_type value_type;

public:
    flatten_iterator() {}

    flatten_iterator( ContainerType<Terminator, Args...>& container ) :
        m_it( container.begin() ), m_end( container.end() )
    {
    }

    bool complete()
    {
        return m_it == m_end;
    }

    value_type& current() { return *m_it; }
    void advance() { ++m_it; }

private:
    typename ContainerType<Terminator, Args...>::iterator m_it, m_end;
}; 
```

通过以下测试用例，它可以满足您的期望：

```
int main( int argc, char* argv[] )
{   
    typedef std::vector<int> n1_t;
    typedef std::vector<std::deque<short> > n2_t;
    typedef std::list<std::vector<std::vector<std::vector<double> > > > n4_t;
    typedef std::vector<std::deque<std::vector<std::deque<std::vector<std::list<float> > > > > > n6_t;

    n1_t n1 = { 1, 2, 3, 4 };
    n2_t n2 = { {}, { 1, 2 }, {3}, {}, {4}, {}, {} };
    n4_t n4 = { { { {1.0}, {},  {}, {2.0}, {} }, { {}, {} }, { {3.0} } }, { { { 4.0 } } } };
    n6_t n6 = { { { { { {1.0f}, {},  {}, {2.0f}, {} }, { {}, {} }, { {3.0f} } }, { { { 4.0f } } } } } };

    flatten_iterator<n1_t, int> i1( n1 );
    while ( !i1.complete() )
    {
        std::cout << i1.current() << std::endl;
        i1.advance();
    }

    flatten_iterator<n2_t, short> i2( n2 );
    while ( !i2.complete() )
    {
        std::cout << i2.current() << std::endl;
        i2.advance();
    }

    flatten_iterator<n4_t, double> i4( n4 );
    while ( !i4.complete() )
    {
        std::cout << i4.current() << std::endl;
        i4.advance();
    }

    flatten_iterator<n6_t, float> i6( n6 );
    while ( !i6.complete() )
    {
        std::cout << i6.current() << std::endl;
        i6.advance();
    }
} 
```

因此为每种容器类型打印以下内容：

```
1
2
3
4 
```

请注意，它还不能与s 一起使用，因为需要一些 foo 来处理迭代器返回 const 引用`set`的事实。`set`为读者练习... :-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-17T21:29:49.063

我到这里有点晚了，但我刚刚发布[了一个库（multidim）](https://github.com/AlbertoMarnetto/multidim)来处理这样的问题。查看[我对相关问题的回答以](https://stackoverflow.com/a/34843867/2453661)了解详细信息。

[我的解决方案从Alex Wilson 的](https://stackoverflow.com/a/11456880/2453661)使用“伸缩嵌套”迭代器的想法中获得灵感。不过，它增加了一些功能（例如，支持只读容器，如`set`s、向后迭代、随机访问）并提供更令人愉悦的界面，因为它自动检测“叶”元素的类型。

# android - 在 Intellij IDEA 中继承 Android 应用程序？

> ID：11454830
> 
> 赞同：1
> 
> 时间：2012-07-12T15:06:36.297
> 
> 标签：android, intellij-idea

我的 Android 项目中有自定义应用程序类，该类在清单中正确描述并且实际有效。

但是有一个小问题：我真的需要以这种方式调用我的`App`类中实现的方法吗：

`((App) getApplication()).callSomeMethod();`

因为 IDEA 不允许我运行应用程序：

`cannot find symbol method callSomeMethod()`

或者我可以避免它？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:09:11.460

您**必须**将结果从类型转换`getApplication()`为您的子类。这不是特定于 Android 的，而是 Java 语言的工作方式。

# sql-server - 将 XML 数据加载到 SQL Server 中，特殊的 XML 结构

> ID：11454833
> 
> 赞同：1
> 
> 时间：2012-07-12T15:06:51.303
> 
> 标签：sql-server, xml, xquery, bulkinsert

我正在尝试将 XML 数据加载到 SQL Server 表中。

XML 文件是：

```
<root>
   <Company ID="183">
      <User UserName="Kim" />
      <User UserName = "Joe" />
   </Company>
 <Company ID="123">
      <User UserName="George" />
      <User UserName = "Sal" />
   </Company>
</root> 
```

我想获得一个包含公司 ID 和用户名的用户名表。对于这个例子：

```
ID      UserName
---     --------
183     Kim
183     Joe
123     George
123     Sal 
```

我尝试了一些事情，例如遍历每个公司的所有用户名，但这非常复杂，特别是当我有超过 2 层来适应这个解决方案时。

我尝试的另一件事是：

```
SELECT
t.c.query('./UserName').value('.','varchar(20)') AS A ,
(
    SELECT
    t1.c1.value('@ID', 'varchar(10)')
    FROM @x.nodes('/root/Company')AS t1(c1)
)
FROM @x.nodes('/root/Company/User')AS t(c) 
```

但我收到一个错误，即子查询的值超过 1 个。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:10:43.077

假设你说的是*SQL*，但你的意思是**SQL Server** - 尝试这样的事情：

```
DECLARE @input XML = '<root>
   <Company ID="183">
      <User UserName="Kim" />
      <User UserName = "Joe" />
   </Company>
 <Company ID="123">
      <User UserName="George" />
      <User UserName = "Sal" />
   </Company>
</root>'

SELECT
    CompanyID = Comp.value('(@ID)[1]', 'int'),
    UserName = USerTbl.value('(@UserName)[1]', 'varchar(50)')
FROM 
    @input.nodes('/root/Company') T(Comp)
CROSS APPLY
    Comp.nodes('User') AS T2(UserTbl) 
```

这给了我你正在寻找的输出。

# c# - 使用 VSTO 更改 Outlook 设置

> ID：11454835
> 
> 赞同：4
> 
> 时间：2012-07-12T15:06:59.900
> 
> 标签：c#, outlook, vsto, application-settings, outlook-object-model

我刚刚花了大约 4 个小时试图弄清楚如何以编程方式检索/设置 Microsoft Outlook 2010 的 Outlook 设置。我所说的“设置”是文件/选项/邮件下的设置。我要做的是检索用户设置的设置列表，自动化我们需要每天在某些消息上运行的整个打印过程，然后恢复设置。到他们原来的。

我注意到在 Word 中，下面的代码可用于通过 Word.Application.Options 设置某些设置，但我只是在 Outlook 中找不到任何属性或方法来实现这一点。任何帮助都感激不尽。

```
Word.Application application = (Word.Application)initialiseApps(AppNames.Word);
Word.Options options = application.Options; 

wordSettings.PrintDrawingObjects = options.PrintDrawingObjects;
wordSettings.PrintBackgrounds = options.PrintBackgrounds;
wordSettings.PrintProperties = options.PrintProperties;
wordSettings.PrintHiddenText = options.PrintHiddenText;
wordSettings.UpdateFieldsAtPrint = options.UpdateFieldsAtPrint;
wordSettings.PrintFieldCodes = options.PrintFieldCodes;
wordSettings.MapPaperSize = options.MapPaperSize;

application.Quit();
Marshal.ReleaseComObject(options);
Marshal.ReleaseComObject(application); 
```

# erlang - Erlang noob 寻求快速代码审查

> ID：11454836
> 
> 赞同：1
> 
> 时间：2012-07-12T15:06:59.970
> 
> 标签：erlang, freeswitch

大家好，

Erlang 非常新，来自 C/C++/Java。一直在玩代码，让自己缩小到一个点，一秒钟的指导可能会节省我半天的时间。所以我有一个小 telnet 客户端，我打算连接到一个 freeswitch esl 端口，让我像在 fs_cli 中一样向该端口发出命令。（我想主要是......我正在尝试与我应该能够通过 telnet 通信的端口交谈）。当 Linux telnet 运行良好时，erlang 应用程序失败。我敢肯定这个问题很简单而且很微妙。任何帮助表示赞赏！

因此，这里是使用 Linux telnet 进行会话的方式：

```
$>telnet localhost 8021  
Trying localhost...  
Connected to localhost.  
Escape character is '^]'.  
Content-Type: auth/request  

auth password<ENTER>  
<ENTER>  
Content-Type: command/reply  
Reply-Text: +OK accepted  

log 1<ENTER>  
<ENTER>  
Content-Type: command/reply  
Reply-Text: +OK log level 1 [1] 
```

…好的，这是我的 telnet 客户端代码：

```
-module(getty).  
-export([s/0]).  

%-define(LISTEN_PORT, 9000).  
%-define(TCP_OPTS, [binary, {packet, raw}, {nodelay, true}, {reuseaddr, true}, {active, once}]).  

s() ->  
    case gen_tcp:connect( "localhost", 8021,[{active,false},{packet,2}]) of  
        {ok,Sock} ->   
            io:format("~p Connected to localhost 8021.~n", [erlang:localtime()] ),
            main_loop( Sock );  

        Error ->
             io:format("Error: ~p~n", [Error]) 
    end.

 main_loop( Sock ) ->
     Command = get_user_input( "Command> " ),

     spawn(fun() -> ex_cmd( Sock, Command ) end),
     main_loop( Sock ).

 ex_cmd(Sock, Command) ->
     B = gen_tcp:recv( Sock, 0 ),
    io:format( "Response: ~p~n", [B] ),
    gen_tcp:send( Sock, Command ),
    A = gen_tcp:recv( Sock, 0 ),
    %gen_tcp:close( Sock ),
    io:format( "Response: ~p~n", [A] ).     

get_user_input( Prompt ) ->
    A1 = string:concat(
        string:strip( % remove spaces from front and back
            string:strip( % remove line-feed from the end
                io:get_line( Prompt ), right, $\n)), "\r\n\r\n" ),
    io:format( "Command is: ~p~n", [A1] ),
    A1. 
```

...这是使用 erlang 客户端的运行：

```
$>erl  
Erlang R15B01 (erts-5.9.1) [source] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]  

Eshell V5.9.1  (abort with ^G)  
1> c(getty).  
{ok,getty}  
2> getty:s().  
{{2012,7,12},{10,15,0}} Connected to localhost 8021\.  
Command> auth password  
Command is: "auth password\r\n\r\n"  
Response: {error,closed}  
Response: {error,closed}  
Command> 
```

关于使用 erlang 客户端的不同结果的任何线索？蒂亚！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:36:07.840

通过使用 {packet,2}，您声称数据包将发送一个 2 字节的标头来声明数据包的大小，并且您希望服务器也发送此类标头。Telnet 不这样做，因此如果您尝试模拟 telnet 客户端，请不要将数据包模式指定为 2。相反，使用 0 或 raw 作为数据包类型以指定无标头。我相信离开数据包选项默认也没有标头。

# android - 有没有好的网站可以一起分享和优化代码？

> ID：11454842
> 
> 赞同：6
> 
> 时间：2012-07-12T15:07:20.540
> 
> 标签：android, ios

最近我在做Android应用开发，之前也做过iOS应用。到目前为止我不擅长Android，所以有时我发现该应用程序有点滞后，认为[stackoverflow.com](http://stackoverflow.com)是一个非常好的分享地方并发现了错误，但我想问一下是否有一些我可以分享的网站有关该应用程序的代码和详细信息，并且那里还有一些程序员可以阅读并指出我的应用程序出了什么问题？我不知道这个问题在这里是否合法，只是觉得最好有一个并了解更多..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:10:14.307

[您可以在https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)上发布代码并对其进行审核

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:10:23.173

最好的解决方案可能是将你的项目推送到像[Github](https://github.com/)这样的网站，那里有一个很好的基础设施可以让人们与你协作。

要求人们这样做是一个不同的问题，但最好通过 XDA 开发人员和同等论坛上的帖子来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:14:38.277

有很多地方可以发布整个源代码。这是我用过的两个：

*   谷歌代码：允许您公开发布您的代码以及有关下载的详细信息。您可以使用这个和谷歌论坛来获得审查和帮助。SVN 访问很容易配置。可以将其他人添加到项目中。

*   SourceForge：允许您公开和私下发布代码。SVN 再次简单。允许您将其他用户添加到具有读/写/编辑权限的项目中。

这两个可能不是获得审查和轻松帮助的最佳场所，但它们非常适合托管和源代码控制！

此外，这些确实有论坛，您可以在其中将其他人指向您的项目并提出问题！

# joomla - 用一些 PHP 渲染一个 Joomla 2.5 菜单模块

> ID：11454843
> 
> 赞同：3
> 
> 时间：2012-07-12T15:07:25.327
> 
> 标签：joomla, menu, module, render

尝试使用此代码在自定义模板上呈现菜单模块

```
jimport( 'joomla.application.module.helper' );
$module = JModuleHelper::getModule( 'menu' );
$attribs = array('style' => 'mainnav');
$module->params = "menutype=" .$mainmenu ."\nshowAllChildren=1";
echo JModuleHelper::renderModule($module, $attribs); 
```

该菜单仅在我发布了另一个菜单模块时才有效，因此我确信这只需要一行代码即可使其工作而无需发布菜单模块。

菜单存在，此菜单的模块不存在，我正在尝试使用此代码创建它。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T03:04:33.140

代码工作正常，我只是做了一个小的更正：

```
jimport( 'joomla.application.module.helper' );
$module = JModuleHelper::getModule( 'mod_menu' );
$attribs = array('style' => 'mainnav');
$module->params = "menutype=" .$mainmenu ."\nshowAllChildren=1";
echo JModuleHelper::renderModule($module, $attribs); 
```

在第二行，调用应该是“mod_menu”而不仅仅是“menu”，这使得代码可以完美运行:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:10:08.753

为什么不只使用包含模块？

```
<jdoc:include type="modules" name="mainnav" style="mainnav" /> 
```

这将允许您在该位置发布您不想发布的任何模块。

否则该`getModule`函数的工作方式如下：

```
JModuleHelper::getModule( 'position', 'title' ); 
```

根据 Joomla！API，因此您需要传递两个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:26:59.560

我使用此代码按 id 呈现其他模块

```
$mod_id = $params->get('mod_id');
if ($type == 'logout' && $mod_id != ''){
    $document   = &JFactory::getDocument();
    $renderer   = $document->loadRenderer('module');
    $db     =& JFactory::getDBO();

    if ($jVersion=='1.5') {
         $query = 'SELECT id, title, module, position, params'
        . ' FROM #__modules AS m'
        . ' WHERE id='.intval($mod_id);
    } else {
         $query = 'SELECT id, title, module, position, content, showtitle, params'
        . ' FROM #__modules AS m'
        . ' WHERE m.id = '.intval($mod_id);
    }
    $db->setQuery( $query );
    if ($mod = $db->loadObject()){
        $file                   = $mod->module;
        $custom                 = substr( $file, 0, 4 ) == 'mod_' ?  0 : 1;
        $modu->user     = $custom;
    // CHECK: custom module name is given by the title field, otherwise it's just 'om' ??
        $mod->name      = $custom ? $mod->title : substr( $file, 4 );
        $mod->style     = null;
        $mod->position  = strtolower($mod->position);
        echo $renderer->render($mod, array());
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T14:14:03.297

使用这个，100%，在这个位置渲染模块。

```
<?php
$document   = &JFactory::getDocument();
$renderer   = $document->loadRenderer('modules');
$options    = array('style' => 'xhtml');
$position   = 'article-banners';
echo $renderer->render($position, $options, null);
?> 
```

$position 指模块位置，可能不止一个... $style - none, rounded, xhtml...

# c++ - G++如何在Linux服务器上为FreeBSD编译

> ID：11454846
> 
> 赞同：0
> 
> 时间：2012-07-12T15:07:38.260
> 
> 标签：c++, linux, unix, freebsd, ld-preload

我为 linux/unix(ld_preload) 编写了一些代码，我如何使用 G++ 或其他编译器在我的 Ubuntu 服务器上为 FreeBSD 编译它？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:13:59.050

无需重新编译：[有一个针对差异的 shim，](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/linuxemu.html)它比一个兼容库更紧密地集成在一起。您需要避免一些仅限 linux 的设施，并且您确实需要“标记”带有 linux 二进制文件的 linux 二进制文件`brandelf`，您的起点就是那个链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:12:44.590

我的建议是创建一个 FreeBSD 虚拟机（使用 virtualbox 之类的软件）并在上面编译代码。

# export - 如何拍摄 Hbase 表快照？

> ID：11454847
> 
> 赞同：1
> 
> 时间：2012-07-12T15:07:45.717
> 
> 标签：export, backup, hbase, restore, snapshot

我是 Hbase 新手，我一直在寻找 Hbase 备份和恢复解决方案。您能否提及如何拍摄 Hbase 或 Hbase 表的快照并将其作为恢复解决方案的一部分进行恢复？

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-30T00:57:05.847

登录到 hbase shell
快照 'table_name','snapshot_name'

可以查看它是否
从 hbase shell 创建快照，输入 list_snapshots

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:31:08.810

目前还没有一种方法可以直接在 HBase 中执行此操作（尽管在我们说话的时候，这方面的工作仍在进行中：请参阅[HBASE-6055](https://issues.apache.org/jira/browse/HBASE-6055)。目标为 0.96，即 2012 年末或 2013 年初。

同时，如果您使用 HDFS 之外的另一个底层文件系统，其中一些（如闭源商业产品 MapR）提供快照功能（有偿）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-26T20:04:28.053

创建表的快照就像从 HBase shell 运行此命令一样简单：

```
hbase(main)>  snapshot 'myTable', 'MySnapShot' 
```

恢复就像从 shell 发出这些命令一样简单：

```
hbase(main)>  disable 'myTable'
hbase(main)>  restore_snapshot 'MySnapShot'
hbase(main)>  enable 'myTable' 
```

# c# - 检查存储在数据库中的时间，然后确保它在 15 分钟后运行更新任务

> ID：11454858
> 
> 赞同：0
> 
> 时间：2012-07-12T15:08:28.773
> 
> 标签：c#, asp.net

我想阻止人们不断地同步/更新数据库中的项目，因为这可能会导致潜在的问题。我有时间最后一次同步/更新发生在数据库中。我需要做的是禁止用户启动另一个更新/同步，直到自上次更新/同步后 15 分钟过去。

我该怎么做呢？

更新：由于某种原因，我在 DateTime lastUpdate 上收到错误“A new expression requires (), [], or {} after type”。任何想法为什么会这样？

```
 DataDataContext dc = new DataDataContext();

        DateTime lastUpdate = from t in dc.Settings
                              where t.id == 1
                              select t.lastSync;

        if ((DateTime.Now - lastUpdate).TotalMinutes >= 15)
        {

        }
        else { } 
```

更新：排序，我错过了（）；数据上下文！！*掌心*

最终更新：所有修复和工作！非常感谢您的所有帮助，对于那些认为这“闻起来很腥”或“不好”的人，这就是我所做的！

```
DateTime lastUpdate = (from t in dc.Settings
                               where t.id == 1
                               select t.lastSync).Single();

        if ((DateTime.Now - lastUpdate).TotalMinutes >= 15)
        {
            syncbuttons.Visible = false;
        }
        else { syncbuttons.Visible = true; } 
```

现在请解释一下我正在尝试做的事情有什么可疑之处？阻止用户敲击数据库？如果我有 30 个用户尝试更新/同步怎么办。不会那么好吧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:17:01.890

```
if (lastUpdateTime.AddMinutes(15)<DateTime.Now)
{
    // do update
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:07:31.710

导致错误的问题是您的 linq 表达式返回一个 (IQuerryable) 集合，但您正试图将其分配/转换为 DateTime。

尝试使用

```
 DateTime lastUpdate = (from t in dc.Settings
                     where t.id == 1
                     select t.lastSync).Single(); 
```

关于 Db 同步；我不是数据库专家，但我认为不应在任何接近重负载的地方考虑 30 个连接。如果是这样，那么优化数据库和事务会更好。

禁用同步按钮不会阻止用户点击重新加载按钮，这反过来可能会比定制的刷新过程产生更多的流量。

即使你解决了这个问题，如果你的用户群增加到每秒获得 30 个连接而没有人敲打同步按钮的程度怎么办。

所以我的建议是你回去看看你是否可以尽量减少同步的影响。一种方法可能是在您正在获取的记录上放置时间戳。比索引该列，因此它会快速查找并让数据库检查是否有任何行比用户 las 同步更新。

仅仅使您的应用程序无响应或滞后（在用户眼中）不应被视为可行的解决方案。

至少我会这样处理这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:19:05.870

```
DateTime lastUpdate = ...;  // Retrieve from DB
TimeSpan elapsed = DateTime.Now - lastUpdate;
if (elapsed.TotalMinutes >= 15)
{
} 
```

或者，在一行中：

```
if ((DateTime.Now - lastUpdate).TotalMinutes >= 15) 
```

# ios - 如何用glkit、opengl es2画出数千个正方形？

> ID：11454859
> 
> 赞同：2
> 
> 时间：2012-07-12T15:08:32.543
> 
> 标签：ios, opengl-es, opengl-es-2.0, glkit

我正在尝试在屏幕上绘制多达 200,000 个正方形。或者基本上很多正方形。我相信我只是在调用许多绘图调用，这会削弱应用程序的性能。方块只在我按下按钮时更新，所以我不必每帧都更新。

这是我现在拥有的代码：

```
- (void)glkViewControllerUpdate:(GLKViewController *)controller
{

//static float transY = 0.0f;
//float y = sinf(transY)/2.0f;
//transY += 0.175f;

GLKMatrix4 modelview = GLKMatrix4MakeTranslation(0, 0, -5.f);
effect.transform.modelviewMatrix = modelview;

//GLfloat ratio = self.view.bounds.size.width/self.view.bounds.size.height;
GLKMatrix4 projection = GLKMatrix4MakeOrtho(0, 768, 1024, 0, 0.1f, 20.0f);    
effect.transform.projectionMatrix = projection;
_isOpenGLViewReady = YES;
}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
if(_model.updateView && _isOpenGLViewReady)
{

    glClear(GL_COLOR_BUFFER_BIT);
    [effect prepareToDraw];
    int pixelSize = _model.pixelSize;
    if(!_model.isReady)
        return;
    //NSLog(@"UPDATING: %d, %d", _model.rows, _model.columns);
    for(int i = 0; i < _model.rows; i++)
    {
        for(int ii = 0; ii < _model.columns; ii++)
        {
            ColorModel *color = [_model getColorAtRow:i andColumn:ii];
            CGRect rect = CGRectMake(ii * pixelSize, i*pixelSize, pixelSize, pixelSize);
            //[self drawRectWithRect:rect withColor:c];
            GLubyte squareColors[] = {
                color.red, color.green, color.blue, 255,
                color.red, color.green, color.blue, 255,
                color.red, color.green, color.blue, 255,
                color.red, color.green, color.blue, 255
            };

            // NSLog(@"Drawing color with red: %d", color.red);

            int xVal = rect.origin.x;
            int yVal = rect.origin.y;
            int width = rect.size.width;
            int height = rect.size.height;
            GLfloat squareVertices[] = {
                xVal, yVal, 1,
                xVal + width, yVal, 1,
                xVal,  yVal + height, 1,
                xVal + width,  yVal + height, 1
            };    

            glEnableVertexAttribArray(GLKVertexAttribPosition);
            glEnableVertexAttribArray(GLKVertexAttribColor);

            glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 0, squareVertices);
            glVertexAttribPointer(GLKVertexAttribColor, 4, GL_UNSIGNED_BYTE, GL_TRUE, 0, squareColors);

            glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

            glDisableVertexAttribArray(GLKVertexAttribPosition);
            glDisableVertexAttribArray(GLKVertexAttribColor);

        }
    }   
    _model.updateView = YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:15:36.170

首先，你真的需要画20万个正方形吗？您的视口总共只有 786,000 像素。您可能能够减少绘制对象的数量，而不会显着影响场景的整体质量。

也就是说，如果这些是较小的正方形，您可以将它们绘制为像素大小足以覆盖正方形区域的点。这需要将顶点着色器中的 gl_PointSize 设置为适当的像素宽度。然后，您可以生成坐标并将它们全部发送为 GL_POINTS 一次绘制。这应该消除三角形的额外几何图形和您在此处使用的单个绘制调用的开销。

即使您不使用点，首先计算您需要的所有三角形几何图形仍然是一个好主意，然后在一个绘图调用中发送所有这些。这将显着减少您的 OpenGL ES API 调用开销。

您可以研究的另一件事是使用顶点缓冲区对象来存储此几何图形。如果几何图形是静态的，您可以避免在每个绘制的帧上发送它，或者只更新其中已更改的部分。即使您只是更改每帧的数据，我相信使用动态几何图形的 VBO 在现代 iOS 设备上具有性能优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:00:32.743

你不能尝试以某种方式优化它吗？我对图形类型的东西不是很熟悉，但我想如果你正在绘制 200,000 个方块，那么所有这些方块实际上都是可见的似乎不太可能。您不能为您的 mySquare 类添加某种 isVisible 标记，以确定您要绘制的正方形是否实际可见？然后显而易见的下一步是修改您的绘图函数，以便如果正方形不可见，则不要绘制它。

或者您是否要求有人尝试改进您现有的代码，因为如果您的性能像您说的那样糟糕，我认为对上述代码进行小的更改不会解决您的问题。您将不得不重新考虑如何进行绘图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T03:05:57.073

看起来您的代码实际上试图做的是拍摄一张`_model.rows`× `_model.columns`2D 图像并将其放大`_model.pixelSize`. 如果`-[ColorModel getColorAtRow:andColumn:]`一次从颜色值数组中检索 3 个字节，那么您可能需要考虑将该颜色值数组作为`GL_RGB`/`GL_UNSIGNED_BYTE`数据上传到 OpenGL 纹理中，并让 GPU 一次放大所有像素。

或者，如果放大内容是`ColorModel`您使用 OpenGL ES 和 GLKit 的唯一原因，您最好将颜色值包装到 CGImage 中并允许 UIKit 和 Core Animation 为您绘制。多久`ColorModel`更新一次颜色值？

# android - 多次旋转的碎片异常

> ID：11454860
> 
> 赞同：0
> 
> 时间：2012-07-12T15:08:34.720
> 
> 标签：android, android-fragments

我有一个应用程序，它的仪表板有 1 个或 2 个页面（根据用户配置文件）。

当应用程序第一次启动时，它只显示 3 个按钮，当信息到达时，它最多可以添加 3 个按钮（总共 6 个）。这些按钮有一个特定的顺序，应该保持：

*   按钮 1 是强制性的，应该是第一个；
*   按钮 2 是强制性的，应该是第二个；
*   按钮 6 是强制性的，应该是最后一个（当有 3、4、5 或 6 时）
*   按钮 3 到 5 不是强制性的，但应按其编号顺序显示。

为了产生这种效果，我有几个占位符来添加片段。每当一个新按钮到达（按钮 3 到 5）时，它就会进入 Button_6 的旧位置，该位置向前移动一个位置。

由于复杂的 UI 和行为，每个按钮都是一个片段。

该应用程序可以是纵向和横向的，纵向有 4 个按钮，横向有 3 个。每当应用程序旋转时，活动都会调用 refreshDashboard 方法来重绘 UI。

代码：

```
public class DashboardBuilder
{
    private final static String TAG_BUTTON_1 = "BUTTON_1";
    private final static String TAG_BUTTON_2 = "BUTTON_2";
    private final static String TAG_BUTTON_3 = "BUTTON_3";
    private final static String TAG_BUTTON_4 = "BUTTON_4";
    private final static String TAG_BUTTON_5 = "BUTTON_5";
    private final static String TAG_BUTTON_6 = "BUTTON_6";

    private int width = 0;
    private int height = 0;
    private int pages = 0;

    private int buttonsPerPage = 4;
    private int orientation = Configuration.ORIENTATION_PORTRAIT;

    public final String TAG = getClass().getSimpleName();

    public DashboardBuilder(DashboardPaginationActivity dashboard)
    {      
            FragmentManager.enableDebugLogging(false);   
    }

    //This is called each time there is a rotation. 
    public void rebuildDashboard(DashboardPaginationActivity dashboard, int orientation)
    {
        switch (orientation)
        {
            case Configuration.ORIENTATION_LANDSCAPE:
            case Configuration.ORIENTATION_SQUARE:
                buttonsPerPage = 3;
                break;
            default:
                buttonsPerPage = 4;
                break;
        }

        this.width = dashboard.getWidth();
        this.height = dashboard.getHeight();

        // Orientation changed
        if (this.orientation != orientation)
        {
            this.orientation = orientation;
            pages = 0;
        }
        rebuildDashboard(dashboard);
    }

    private synchronized void rebuildDashboard(DashboardPaginationActivity dashboard)
    {
        final Application application = (Application) dashboard.getApplication();
        final ArrayList<FragmentReference> fragmentsReferences = application.getFragmentsReferences();

        if (fragmentsReferences.size() == 0)
        {
            try
            {
                final String[] tags = new String[] { TAG_BUTTON_1, TAG_BUTTON_2, TAG_BUTTON_3, TAG_BUTTON_4, TAG_BUTTON_5, TAG_BUTTON_6 };
                for (String tag : tags)
                {
                    Fragment fragment = dashboard.getSupportFragmentManager().findFragmentByTag(tag);
                    if (fragment != null)
                    {
                        LOG.debug(LOG.TAG_ADAPTER, this, "rebuildDashboard : delete tag -> " + tag, null);
                        fragmentsReferences.add(new FragmentReference(tag, fragment.getId()));
                    }
                }

                final ViewGroup pages = (ViewGroup) dashboard.findViewById(R.id.dashboard_pages);
                pages.removeAllViews();

                final ViewGroup pagination = (ViewGroup) dashboard.findViewById(R.id.pagination);
                pagination.removeAllViews();
            }
            catch (Exception e)
            {
            }

            // Definitely a first run
            if (fragmentsReferences.size() == 0)
            {
                // add mandatory buttons + refresh layout
                fragmentsReferences.add(new FragmentReference(TAG_BUTTON_1, -1));
                fragmentsReferences.add(new FragmentReference(TAG_BUTTON_2, -1));
                fragmentsReferences.add(new FragmentReference(TAG_BUTTON_6, -1));
            }

            refreshDashboard(dashboard, false);
        }
        else
        {
            // refresh layout
            refreshDashboard(dashboard, true);
        }

    }

    public void refreshDashboard(DashboardPaginationActivity dashboard, boolean exitOnNewButton)
    {
        final Application application = (Application) dashboard.getApplication();
        final ArrayList<FragmentReference> fragmentsReferences = application.getFragmentsReferences();

        int buttonsCounter = fragmentsReferences.size();

        int pagesCounter = (buttonsCounter / (buttonsPerPage + 1)) + 1;
        for (int i = pages; i < pagesCounter; i++)
        {
            final View pageInflator = createPage(dashboard, i);
            if (pageInflator != null && i > 0)
            {
                swapIDs(i, pageInflator);
            }
        }

        final FragmentManager manager = dashboard.getSupportFragmentManager();
        final FragmentTransaction transaction = manager.beginTransaction();
        for (int i = fragmentsReferences.size() - 1; i >= 0; i--)
        {
            Fragment fragment = null;
            if (TAG_BUTTON_1.equalsIgnoreCase(fragmentsReferences.get(i).getTag()))
            {
                fragment = manager.findFragmentByTag(TAG_BUTTON_1);
                if (fragment != null)
                {
                    transaction.remove(fragment);
                }
                ButtonOneFragment button = new ButtonOneFragment();
                button.setRetainInstance(false);
                transaction.replace(getPlaceHolder(i), button, TAG_BUTTON_1);
                transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);

                fragmentsReferences.get(i).setPlaceHolder(getPlaceHolder(i));
            }
            else if (TAG_BUTTON_2.equalsIgnoreCase(fragmentsReferences.get(i).getTag()))
            {
                fragment = manager.findFragmentByTag(TAG_BUTTON_2);
                if (fragment != null)
                {
                    transaction.remove(fragment);
                }
                ButtonTwoFragment button = new ButtonTwoFragment();
                button.setRetainInstance(false);
                transaction.replace(getPlaceHolder(i), button, TAG_BUTTON_2);
                transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);

                fragmentsReferences.get(i).setPlaceHolder(getPlaceHolder(i));

            }
            else if (TAG_BUTTON_3.equalsIgnoreCase(fragmentsReferences.get(i).getTag()))
            {

                fragment = manager.findFragmentByTag(TAG_BUTTON_3);
                if (fragment != null)
                {
                    transaction.remove(fragment);
                }
                ButtonThreeFragment button = new ButtonThreeFragment();
                button.setRetainInstance(false);
                transaction.replace(getPlaceHolder(i), button, TAG_BUTTON_3);
                transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                fragmentsReferences.get(i).setPlaceHolder(getPlaceHolder(i));

            }
            else if (TAG_BUTTON_4.equalsIgnoreCase(fragmentsReferences.get(i).getTag()))
            {
                fragment = manager.findFragmentByTag(TAG_BUTTON_4);
                if (fragment != null)
                {
                    transaction.remove(fragment);
                }
                ButtonFourFragment button = new ButtonFourFragment();
                button.setRetainInstance(false);
                transaction.replace(getPlaceHolder(i), button, TAG_BUTTON_4);
                transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                fragmentsReferences.get(i).setPlaceHolder(getPlaceHolder(i));
            }
            else if (TAG_BUTTON_5.equalsIgnoreCase(fragmentsReferences.get(i).getTag()))
            {
                fragment = manager.findFragmentByTag(TAG_BUTTON_5);
                if (fragment != null)
                {
                    transaction.remove(fragment);
                }
                ButtonFiveFragment button = new ButtonFiveFragment();
                button.setRetainInstance(false);
                transaction.replace(getPlaceHolder(i), button, TAG_BUTTON_5);
                transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                fragmentsReferences.get(i).setPlaceHolder(getPlaceHolder(i));
            }
            else if (TAG_BUTTON_6.equalsIgnoreCase(fragmentsReferences.get(i).getTag()))
            {
                fragment = manager.findFragmentByTag(TAG_BUTTON_6);
                if (fragment != null)
                {
                    transaction.remove(fragment);
                }
                ButtonSixFragment button = new ButtonSixFragment();
                button.setRetainInstance(false);
                transaction.replace(getPlaceHolder(i), button, TAG_BUTTON_6);
                transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                fragmentsReferences.get(i).setPlaceHolder(getPlaceHolder(i));
            }

            if (exitOnNewButton)
            {
                // on first new button found
                if (fragmentsReferences.get(i).getPlaceHolder() < 0) break;
            }
        }

        buttonsCounter = fragmentsReferences.size();
        pagesCounter = (buttonsCounter / (buttonsPerPage + 1)) + 1;

        for (int i = pages; i > pagesCounter; i--)
        {
            // scroll to first if removing
            dashboard.changePage(0);
            removePage(dashboard, i - 1);
        }

        pages = pagesCounter;
        dashboard.setTotalScreens(pages);

        try
        {
            // we suspect that this is only required when a remove happens
            // keep it here in all cases to be on the safe site...
            transaction.commit();
            manager.executePendingTransactions();
        }
        catch (Exception e)
        {
            // ignore exception
            LOG.error(LOG.TAG_FRAGMENT, this, "refreshDashboard", e.getMessage());
            // e.printStackTrace();
        }
    }

    private View createPage(DashboardPaginationActivity dashboard, int index)
    {
        final View pageHolder = dashboard.getLayoutInflater().inflate(R.layout.dashboard_page, null);
        pageHolder.setLayoutParams(new LinearLayout.LayoutParams(getHorizontalScrollWidth(dashboard), getHorizontalScrollHeight(dashboard)));

        View existingView = null;

        final View page = pageHolder.findViewById(R.id.page);
        switch (index)
        {
            case 0:
                if (dashboard.findViewById(R.id.page1) == null)
                {
                    page.setId(R.id.page1);
                }
                existingView = dashboard.findViewById(R.id.page1);
                break;
            case 1:
                if (dashboard.findViewById(R.id.page2) == null)
                {
                    page.setId(R.id.page2);
                }
                existingView = dashboard.findViewById(R.id.page2);
                break;
            default:
                break;
        }

        if (existingView != null)
        {
            return null;
        }

        // add page holder to dashboard

        ViewGroup pages = ((ViewGroup) dashboard.findViewById(R.id.dashboard_pages));
        pages.addView(pageHolder);

        return pageHolder;
    }

    private void removePage(DashboardPaginationActivity dashboard, int index)
    {
        if (((ViewGroup) dashboard.findViewById(R.id.dashboard_pages)).getChildCount() > index)
        {
            ((ViewGroup) dashboard.findViewById(R.id.dashboard_pages)).removeViewAt(index);
        }
    }

          private void swapIDs(int index, View pageInflator)
    {
        if (orientation == Configuration.ORIENTATION_LANDSCAPE || orientation == Configuration.ORIENTATION_SQUARE)
        {
            swapLandscapeIDs(index, pageInflator);
        }
        else
        {
            swapPortraitIDs(index, pageInflator);
        }
    }

    private Integer getFragmentPlaceHolder(DashboardPaginationActivity dashboard, String tag)
    {
        if (tag != null)
        {
            final Application application = (Application) dashboard.getApplication();
            final ArrayList<FragmentReference> fragmentsReferences = application.getFragmentsReferences();

            for (int i = 0; i < fragmentsReferences.size(); i++)
            {
                final String fragmentTag = fragmentsReferences.get(i).getTag();
                if (tag.equalsIgnoreCase(fragmentTag))
                {
                    return fragmentsReferences.get(i).getPlaceHolder();
                }
            }
        }
        return null;
    }

    private Integer addFragmentReference(DashboardPaginationActivity dashboard, String tag)
    {
        int index = 0;
        if (tag != null)
        {
            final Application application = (Application) dashboard.getApplication();
            final ArrayList<FragmentReference> fragmentsReferences = application.getFragmentsReferences();

            if (tag.equalsIgnoreCase(TAG_BUTTON_1))
            {
                fragmentsReferences.add(0, new FragmentReference(TAG_BUTTON_1, -1));
                index = 0;
            }

            if (tag.equalsIgnoreCase(TAG_BUTTON_2))
            {
                fragmentsReferences.add(1, new FragmentReference(TAG_BUTTON_2, -1));
                index = 1;
            }

            if (tag.equalsIgnoreCase(TAG_BUTTON_3))
            {
                fragmentsReferences.add(2, new FragmentReference(TAG_BUTTON_3, -1));
                index = 2;
            }
            else if (tag.equalsIgnoreCase(TAG_BUTTON_4))
            {
                if (TAG_BUTTON_3.equalsIgnoreCase(fragmentsReferences.get(2).getTag()))
                {
                    fragmentsReferences.add(3, new FragmentReference(TAG_BUTTON_4, -1));
                    index = 3;
                }
                else
                {
                    fragmentsReferences.add(2, new FragmentReference(TAG_BUTTON_4, -1));
                    index = 2;
                }
            }
            else if (tag.equalsIgnoreCase(TAG_BUTTON_5))
            {
                if (fragmentsReferences.size() == 5 && TAG_BUTTON_4.equalsIgnoreCase(fragmentsReferences.get(3).getTag()))
                {
                    fragmentsReferences.add(4, new FragmentReference(TAG_BUTTON_5, -1));
                    index = 4;
                }
                else if (fragmentsReferences.size() == 4 && (TAG_BUTTON_3.equalsIgnoreCase(fragmentsReferences.get(2).getTag()) || TAG_BUTTON_4.equalsIgnoreCase(fragmentsReferences.get(2).getTag())))
                {
                    fragmentsReferences.add(3, new FragmentReference(TAG_BUTTON_5, -1));
                    index = 3;
                }
                else
                {
                    fragmentsReferences.add(2, new FragmentReference(TAG_BUTTON_5, -1));
                    index = 2;
                }
            }
        }
        return index;
    }

    private void removeFragmentReference(DashboardPaginationActivity dashboard, String tag)
    {
        if (tag != null)
        {
            final Application application = (Application) dashboard.getApplication();
            final ArrayList<FragmentReference> fragmentsReferences = application.getFragmentsReferences();

            // start at 2 means that button 1 and 2 will never be removed
            for (int i = 0; i < fragmentsReferences.size(); i++)
            {
                final String fragmentTag = fragmentsReferences.get(i).getTag();
                if (tag.equalsIgnoreCase(fragmentTag))
                {
                    fragmentsReferences.remove(i);
                    break;
                }
            }

            final FragmentManager manager = dashboard.getSupportFragmentManager();
            final Fragment fragment = manager.findFragmentByTag(tag);
            if (fragment != null)
            {
                final FragmentTransaction transaction = manager.beginTransaction();

                // remove store references and other resources
                // ((ButtonFragment) fragment).cleanup();

                transaction.remove(fragment);
                transaction.commit();

                try
                {
                    // we suspect that this is only required when a remove happens
                    // keep it here in all cases to be on the safe site...
                    manager.executePendingTransactions();
                }
                catch (Exception e)
                {
                    // ignore exception
                    LOG.debug(LOG.TAG_FRAGMENT, this, "removeFragmentReference", null);
                }
            }
        }
    }

    public boolean buttonExists(DashboardPaginationActivity dashboard, String tag)
    {
        if (tag == null) return false;

        final Application application = (Application) dashboard.getApplication();
        final ArrayList<FragmentReference> fragmentsReferences = application.getFragmentsReferences();

        for (int i = 0; i < fragmentsReferences.size(); i++)
        {
            final String fragmentTag = fragmentsReferences.get(i).getTag();
            if (tag.equalsIgnoreCase(fragmentTag))
            {
                return true;
            }
        }
        return false;
    }

    private int getPlaceHolder(int index)
    {
        switch (index)
        {
            case 0:
                return R.id.placeHolder01;
            case 1:
                return R.id.placeHolder02;
            case 2:
                return R.id.placeHolder03;
            case 3:
                return R.id.placeHolder04;
            case 4:
                return R.id.placeHolder05;
            case 5:
                return R.id.placeHolder06;
            case 6:
                return R.id.placeHolder07;
            case 7:
                return R.id.placeHolder08;
            case 8:
                return R.id.placeHolder09;
            case 9:
                return R.id.placeHolder10;
            case 10:
                return R.id.placeHolder11;
            case 11:
                return R.id.placeHolder12;
            default:
                return -1;
        }
    }

    private void swapPortraitIDs(int index, View pageInflated)
    {
        switch (index)
        {
            case 1:
                pageInflated.findViewById(R.id.placeHolder01).setId(R.id.placeHolder05);
                pageInflated.findViewById(R.id.placeHolder02).setId(R.id.placeHolder06);
                pageInflated.findViewById(R.id.placeHolder03).setId(R.id.placeHolder07);
                pageInflated.findViewById(R.id.placeHolder04).setId(R.id.placeHolder08);
                break;
            case 2:
                pageInflated.findViewById(R.id.placeHolder01).setId(R.id.placeHolder09);
                pageInflated.findViewById(R.id.placeHolder02).setId(R.id.placeHolder10);
                pageInflated.findViewById(R.id.placeHolder03).setId(R.id.placeHolder11);
                pageInflated.findViewById(R.id.placeHolder04).setId(R.id.placeHolder12);
                break;
            default:
                LOG.error(LOG.TAG_ACTIVITY, activity, "swapPortraitIDs", "Invalid page number: " + index);
                break;
        }

    }

    private void swapLandscapeIDs(int index, View pageInflated)
    {
        switch (index)
        {
            case 1:
                pageInflated.findViewById(R.id.placeHolder01).setId(R.id.placeHolder04);
                pageInflated.findViewById(R.id.placeHolder02).setId(R.id.placeHolder05);
                pageInflated.findViewById(R.id.placeHolder03).setId(R.id.placeHolder06);
                break;
            case 2:
                pageInflated.findViewById(R.id.placeHolder01).setId(R.id.placeHolder07);
                pageInflated.findViewById(R.id.placeHolder02).setId(R.id.placeHolder08);
                pageInflated.findViewById(R.id.placeHolder03).setId(R.id.placeHolder09);
                break;
            default:
                LOG.error(LOG.TAG_ACTIVITY, activity, "swapLandscapeIDs", "Invalid page number: " + index);
                break;
        }
    }

    public int[] getPagesIds(AbstractActivity activity)
    {
        switch (pages)
        {
            case 1:
                return new int[] { R.id.page1 };
            case 2:
                return new int[] { R.id.page1, R.id.page2 };
            default:
                LOG.error(LOG.TAG_ACTIVITY, activity, "getPagesIds", "Invalid page number: " + pages);
                return new int[0];
        }
    }

} 
```

我不得不接受 manager.executePendingTransactions(); 使用 try catch 因为它会“随机”抛出 java.lang.IllegalStateException: Recursive entry to executePendingTransactions 如果在短时间内发生大量旋转。

我认为这是由于 Fragments Manager 的异步特性造成的。

我已经“解决”了这些尝试捕获的问题..我仍然想知道是否有更正确的方法来解决它和/或建议。

**在 Try 捕获之前的 StackTrace：**

```
19:04:47.402 E/AndroidRuntime( 1352): FATAL EXCEPTION: main 
 19:04:47.402 E/AndroidRuntime( 1352): java.lang.IllegalStateException: Recursive entry to executePendingTransactions 
 19:04:47.402 E/AndroidRuntime( 1352): at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1388) 
 19:04:47.402 E/AndroidRuntime( 1352): at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420) 
 19:04:47.402 E/AndroidRuntime( 1352): at android.os.Handler.handleCallback(Handler.java:587) 
 19:04:47.402 E/AndroidRuntime( 1352): at android.os.Handler.dispatchMessage(Handler.java:92) 
 19:04:47.402 E/AndroidRuntime( 1352): at android.os.Looper.loop(Looper.java:123) 
 19:04:47.402 E/AndroidRuntime( 1352): at android.app.ActivityThread.main(ActivityThread.java:3683) 
 19:04:47.402 E/AndroidRuntime( 1352): at java.lang.reflect.Method.invokeNative(Native Method) 
 19:04:47.402 E/AndroidRuntime( 1352): at java.lang.reflect.Method.invoke(Method.java:507) 
 19:04:47.402 E/AndroidRuntime( 1352): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 
 19:04:47.402 E/AndroidRuntime( 1352): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
 19:04:47.402 E/AndroidRuntime( 1352): at dalvik.system.NativeStart.main(Native Method) 
 19:04:47.406 W/ActivityManager(  107):   Force finishing activity com.dashboard.tests/.activity.MainActivity
 19:04:47.402 E/AndroidRuntime( 1352): FATAL EXCEPTION: main 
 19:04:47.402 E/AndroidRuntime( 1352): java.lang.IllegalStateException: Recursive entry to executePendingTransactions 
 19:04:47.402 E/AndroidRuntime( 1352): at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1388) 
 19:04:47.402 E/AndroidRuntime( 1352): at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420) 
```

根据 Android 开发人员办公时间 (http://www.google.com/moderator/#15/e=1ac28e&t=1ac28e.51) 的要求，这里是 Android 团队可以查看的代码。

谢谢

Ps：对不起，代码片段很长。

# python - Google OAuth2 命令行示例

> ID：11454864
> 
> 赞同：7
> 
> 时间：2012-07-12T15:08:44.303
> 
> 标签：python, google-api, oauth-2.0, google-api-python-client

[谷歌在这里](https://code.google.com/p/google-api-python-client/wiki/OAuth2#Command-Line)有一个 OAuth2 客户端的例子

我对 OAuth2 完全陌生，我希望在将 OAuth2 与我的应用程序集成之前让这个示例正常工作。我所做的如下：

1.  注册一个测试应用程序
2.  获取客户端 ID 和客户端密码
3.  将这些值配置到 client_secrets.json
4.  运行测试应用程序：`python moderator.py`

该应用程序打开一个浏览器，我可以（作为用户）在其中授权该应用程序访问我的帐户。但谷歌是这样抱怨的（400 Bad Request）：

```
Error: redirect_uri_mismatch
The redirect URI in the request: http://localhost:8080/ did not match a registered redirect URI
Learn more
Request Details
from_login=1
scope=https://www.googleapis.com/auth/moderator
response_type=code
access_type=offline
redirect_uri=http://localhost:8080/
approval_prompt=auto
as=-xxxxxxxxxxxxx
pli=1
client_id=xxxxxxxxxxx.apps.googleusercontent.com
authuser=0
hl=en 
```

我猜 localhost:8080 来自由 moderator.py 启动的内部 Web 服务器。我的问题是：有人让这个例子起作用了吗？我还需要哪些其他组件（apache 配置、DNS、...）

我对 OAuth2 感到非常困惑，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T20:28:54.507

首先，对不起，如果我的回答不是很准确，因为我对 OAuth（甚至是 python）也很陌生……如果来得太晚，我也很抱歉，我通常不会访问这里。

您是否尝试过使用它（为我工作）：REDIRECT_URI = 'urn:ietf:wg:oauth:2.0:oob'

检查这个：[https ://developers.google.com/accounts/docs/OAuth2InstalledApp#choosingredirecturi](https://developers.google.com/accounts/docs/OAuth2InstalledApp#choosingredirecturi)

[在这里](https://stackoverflow.com/questions/14286402/google-drive-python-api-resumable-upload-error-401-after-2-hours/14320908#14320908)，我有一段代码可以运行完整的 OAuth 流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T03:56:36.750

也许尝试向 Google 注册您的外部 IP（可能需要在您的路由器上进行一些端口转发）？如果这失败了，也许你可以使用 Python 的 SimpleServer，注册你的 IP 并让这个服务器来处理重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:31:10.147

在 OAuth 2.0 中，redirect_uri 参数通常是向提供者注册的。提供者还应该强制执行 https-only redirect_uri。

您需要在此处向 Google 注册 redirect_uri：[https ://code.google.com/apis/console/?pli=1#access](https://code.google.com/apis/console/?pli=1#access)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-18T18:25:29.330

您的 redirect_uri 设置为“ [http://localhost:8080/](http://localhost:8080/) ”，因为您将默认（我不知道如何描述）标志参数传递给 run_flow(flow, storage, flags)

如果您查看 run_flow() 函数的定义，您会发现：

```
It presumes it is run from a command-line application and supports the
following flags:

    ``--auth_host_name`` (string, default: ``localhost``)
       Host name to use when running a local web server to handle
       redirects during OAuth authorization.

    ``--auth_host_port`` (integer, default: ``[8080, 8090]``)
       Port to use when running a local web server to handle redirects
       during OAuth authorization. Repeat this option to specify a list
       of values.

    ``--[no]auth_local_webserver`` (boolean, default: ``True``)
       Run a local web server to handle redirects during OAuth
       authorization. 
```

# powershell - 添加成员：如何传递脚本块？

> ID：11454865
> 
> 赞同：1
> 
> 时间：2012-07-12T15:08:46.163
> 
> 标签：powershell

我正在尝试使用 add-member 添加属性。这是我的代码：

```
$f = ""
$f = $f | select started, ended
$f | add-member scriptProperty IsFinished { $this.Started -gte $this.Ended } 
```

但是，最后一行代码引发了异常，我相信是因为我的脚本块表达式中的“-gte”。例外情况是：您必须在“-”运算符的右侧提供一个值表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:14:22.347

我认为您需要使用`-ge`（大于或等于）来避免错误。

采用 ：

```
get-help about_comparison_operators 
```

# c# - c#中的正则表达式用于带逗号的数字

> ID：11454866
> 
> 赞同：0
> 
> 时间：2012-07-12T15:08:46.783
> 
> 标签：c#, regex

我想使用正则表达式来验证输入是否

空 -> 到 100

示例：0 或 1 或 10,1 或 20.2 或 99

只有正值，0 或空值到 100，并接受点和逗号。任何人都可以给我正确的 C# 正则表达式吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:13:17.740

试试这个（如果有逗号或句号，至少需要一个以下数字）：

```
^\d*(?:(?:\.|\,)\d+)?$ 
```

这些请求的一个很好的工具：[http ://regexpal.com/](http://regexpal.com/)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:14:44.620

可以在此处找到大量数字正则表达式的示例

[正则表达式库](http://www.regexlib.com/?AspxAutoDetectCookieSupport=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:15:01.717

正则表达式是关于匹配字符。它不了解数字。

尝试使用 解析它`double.TryParse()`，如果由于字符串使用`,`as 而不是 而失败`.`，请替换`,`为`.`然后重试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:19:02.047

尝试这个：

```
(100|\d{1,2}[.,]\d+) 
```

但`Double.Parse()`在这里使用更正确。

```
string str = '10,1';
bool valid = false;
double num = -1;

str = str.Replace(",", ".");

if (String.IsNullOrEmpty(str)) {
    valid = true;
} else {
    try {
        num = Double.Parse(str);
    } catch (Exception ex) {
        valid = false;
    }

    if (num >= 0 && num <= 100) {
        valid = true;
    }
} 
```

*我为什么不`Double.TryParse()`改用？

可悲的是，解析失败会使结果`0`为有效条件。

# haskell - 将 Data.Text.Lazy.Text 转换为 Data.Text.Text 类型的行列表

> ID：11454869
> 
> 赞同：2
> 
> 时间：2012-07-12T15:08:48.437
> 
> 标签：haskell

我想知道首选的方法是将惰性文本转换为按行尾分隔的严格文本列表。我想出了类似下面的东西，但我不确定我是否保证每个严格的文本元素都会是一个完整的行（或者如果它还有其他问题）：

```
import qualified Data.Text.Lazy as LT

readLines filePath = do
    contents <- Data.Text.Lazy.IO.readFile filePath
    let lines = concat (map LT.toChunks (LT.lines contents))
    return lines 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:22:52.970

```
readLines filePath = do
    contents <- Data.Text.Lazy.IO.readFile filePath
    let lines = concat (map LT.toChunks (LT.lines contents))
    return lines 
```

不保证每个严格块都是完整的行。实际上，每次惰性块的块边界`Text`与行边界不一致时，都会得到一条包含至少两个严格块的行。

```
readLines filePath = do
    contents <- Data.Text.Lazy.IO.readFile filePath
    let lines = map (T.concat . LT.toChunks) (LT.lines contents)
    return lines 
```

但是，将每一行连接成一个严格的块。然而，进行连接可能比将每一行作为严格块列表分别处理要慢。一个懒惰的`Text`。

# javascript - 带有数组的 Javascript/jQuery 动画

> ID：11454871
> 
> 赞同：0
> 
> 时间：2012-07-12T15:08:48.980
> 
> 标签：javascript, jquery, html, css, arrays

我正在使用 HTML、CSS 和 Javascript 构建动画场景。目前，我对每条要制作动画的鱼都有 2 个函数。第一个将它发送到屏幕上，第二个在它离开屏幕后重置其位置。

这是2个功能的样子......

```
function fish1Swim1() {
    var ranNum = Math.round(Math.random() * 2.5);
    var speed = 6000 * ranNum;
    var screenW = screenWidth+350;
    $('#fish1').animate({
        left: -screenW,
    }, speed, function () {
        fish1Swim2();
    });
}

function fish1Swim2() {
    var ranNum = Math.round(Math.random() * 7);
    var top = ranNum * 100;
    var screenW = screenWidth+350;
    $('#fish1').css("left", screenW);
    $('#fish1').css("top", top);
    fish1Swim1();
} 
```

我对场景中的所有其他鱼也使用了非常相似的函数，但是我想在脚本的开头创建 2 个数组，一个用于 ID，一个用于速度，就像这样...

```
var fish=["#fish1","#fish2","#oldBoot"];
var speeds=["6000","7000","5000"]; 
```

然后让我早期编写的函数运行，但用数组中的项目替换鱼和速度。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:53:47.253

这个怎么样？这为所有动画/CSS 运动提供了通用功能。就动画而言，速度是从数组中读取的，如您所愿。

该函数需要两个参数 - 第一个是元素的 ID（减去 #）；第二个，阶段（就像在您的原始代码中一样 - 您有一个用于鱼 1 的阶段 1 函数，以及一个用于鱼 1 的阶段 2 函数）。

要使该函数适用于其他动画元素，只需扩展 switch 语句。

```
//element data and corresponding anim speeds
var speeds = {fish1: 6000, fish2: 7000, oldBoot: 5000};

//main animation/movement func
function do_action(id, phase) {

    var el, jq_method, method_data, after;

    //work out what it is we're doing, and to what, and set some details accordingly
    switch (id) {
        case 'fish1':
            el = $('#fish1');
            switch (phase) {
                case 1:
                    jq_method = 'animate';
                    method_data = [
                        {left: -screenWidth+350},
                        Math.round(Math.random() * 2.5) * speeds[id],
                        function() { do_action('fish1', 2); }
                    ];
                    break;
                case 2:
                    jq_method = 'css';
                    method_data = [
                        {top: Math.round(Math.random() * 700), left: screenWidth+350}
                    ];
                    after = function() { do_action('fish1', 1); };

                break;
            }
            break;
        break;
    }

    //do actions
    el[jq_method].apply(el, method_data);
    if (after) after();

}

//and off we go
do_action('fish1', 1); 
```

# objective-c - facebook sdk beta 中的对话框发生了什么？

> ID：11454875
> 
> 赞同：4
> 
> 时间：2012-07-12T15:08:56.423
> 
> 标签：objective-c, facebook-ios-sdk

旧的 SDK 具有对话框方法来为各种任务呈现简单的 UI。此调用已从 SDK 测试版中删除，似乎没有任何东西可以替代它。我们现在应该如何实现这些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T16:05:10.620

Are you referring to Facebook's [Dialogs](https://developers.facebook.com/docs/reference/dialogs/)?

if so, those are supported in the 3.0 version of the iOS SDK via the `DeprecatedHeaders`

There are more details here, the example is specifically for the Feed Dialog: [https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T01:08:41.097

Igy 的回答是正确的，当您需要[使用已弃用的 headers](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)时，他列出的链接是一个很好的起点。

根据我们的计划添加一些细节；如您所知，我们开始为 UI 提供更多原生实现，例如 FBFriendPickerViewController 等。同时，仍然需要基于 UIWebView 的对话框，我们将为原生和 webview 对话框添加额外的 SDK 支持。目前，我们依靠与以前的 SDK 的向后兼容性来支持对话。这使我们有机会收集有关我们采用 SDK 的方向的反馈，这将有助于通过对话框和 UI 功能来告知我们未来的方向。

希望这有助于澄清一些想法。我们渴望听到您对 SDK 中的新 UI 组件的任何反馈。谢谢！

# appharbor - AppHarbor - 我在哪里可以找到我的发票

> ID：11454880
> 
> 赞同：0
> 
> 时间：2012-07-12T15:09:02.750
> 
> 标签：appharbor

我在我的帐户中看到“帐户对帐单”，但没有看到我正在开具发票。AppHarbor 是否会发送包含发票的电子邮件？我的帐户是否有一个神奇的部分可以查看发票？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:32:30.263

Web 界面中目前不提供发票，但我们会在每个月开具发票时邮寄给您。

# python - SQLAlchemy 分解日期时间字段

> ID：11454895
> 
> 赞同：1
> 
> 时间：2012-07-12T15:09:35.077
> 
> 标签：python, orm, sqlalchemy

我有一个形式的模型：

```
class MyModel(base):
    # ...
    datetime = Column(DateTime)
    # ... 
```

并想创建一个`.date`与`.time`该列相对应的属性`.datetime`。SQLA 文档显示了一些*组合*属性的示例（例如`firstname + lastname => fullname`），但没有用于分解。

我认为使用`@hybrid_property`和朋友我可以进行初始分解，但不确定分配（所以如果`n = MyModel.query...one()`我希望能够做到`n.date = d`并让它更新`.datetime`字段。）

我的主要 RDBMS 是 MySQL。

（对于那些对我想要这样做的动机感兴趣的人：我有很多客户端代码，这些代码是鸭子类型的预期`.date`和`.time`字段，但是服务器上的许多存储过程和触发器都需要一个`.datetime`列。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:42:42.837

[文档明确说您可以这样做](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/hybrid.html#sqlalchemy.ext.hybrid.hybrid_property)，您需要使用`@hybrid.property`and`@value.setter`装饰器和您自己的代码以预期格式返回日期或时间：

```
from sqlalchemy.ext.hybrid import hybrid_property

class SomeClass(object):
    @hybrid_property
    def value(self):
        return self._value

    @value.setter
    def value(self, value):
        self._value = value 
```

完全披露：我使用了该`property`功能，但没有使用该`setter`功能。

# paypal - 更改现有订阅的 IPN url

> ID：11454900
> 
> 赞同：9
> 
> 时间：2012-07-12T15:09:46.830
> 
> 标签：paypal, paypal-ipn, paypal-subscriptions

我们计划为我们的服务更改域名。因此，我们需要为现有客户更新 IPN-url。我曾尝试在谷歌上搜索有关如何更改当前订阅的 IPN-url 的解决方案，但我找不到任何东西。

任何帮助表示赞赏。

最好的问候托马斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-30T20:33:04.497

我今天遇到了这个问题。

那些说您可以更改现有 Paypal 定期付款的 IPN URL 的人是不正确的；您不能，您只能更改 IPN URL 以获取将来的通知。

为了解决这个问题，我使用了 Apache 重写：

RewriteRule ^sites/all/modules/civicrm/extern/ipn.php$ [https://example.org/wp-content/plugins/civicrm/civicrm/extern/ipn.php](https://example.org/wp-content/plugins/civicrm/civicrm/extern/ipn.php) [R=307,L]

神奇的是R = 307。307 重定向表示 POST 请求必须作为 POST 重新发送。否则您会丢失 IPN 数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-03T13:37:08.383

我遇到了**完全相同**的问题....我不得不移动服务器，这意味着我的 IPN 网址发生了变化。我已经与 3 位不同的贝宝代表进行了交谈，甚至还与那里的技术支持人员进行了会面。

**不幸的是，没有办法更改现有客户/订阅的 IPN url。**

我被告知所有现有的客户/订阅都需要重新设置，然后您的客户需要根据新的 IPN url 开始新的订阅。这是一个正确的 PITA ......我需要为 1500 多个客户做这个，我可以保证我会因为这个麻烦而失去一些。

抱歉，这不是您要找的答案:(

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-08T13:06:48.127

如果您需要更改 IPN Url，请确保它仍然处于打开状态，从 History>IPN History 检查并打开它。

IPN 可以通过以下两种方式之一启用。

在 PayPal 帐户配置文件中，将 IPN URL 作为参数传递给 API 调用或按钮代码。要在您的帐户配置文件中启用 IPN，请执行以下步骤：

1.  [在https://www.paypal.com](https://www.paypal.com)登录您的帐户
2.  点击个人资料
3.  子选项卡 在“我的销售工具”中，单击即时付款通知部分中的更新。
4.  单击编辑按钮或选择 IPN 设置
5.  在通知 URL 字段中输入您的 IPN URL 确保选中“接收 IPN 消息（已启用）”单选按钮
6.  点击保存

IPN可以直接在账号这部分启用：[https](https://www.paypal.com/ie/cgi-bin/webscr?cmd=_profile-ipn-notify-edit) ://www.paypal.com/ie/cgi-bin/webscr?cmd=_profile-ipn-notify-edit （访问需要登录）

要将 IPN URL 作为代码级参数传递，您应该参考您正在实现的功能的文档。通常，您将传递的 API 变量是“NotifyURL”，但如果 API 是名称-值-对 (NVP) 或 SOAP 格式，或者您使用的是非托管 PayPal 标准按钮代码，它可能会因 API 调用而有所不同。对于标准按钮，变量是“notify_url”。

此配置文件设置经常被购物车覆盖。不过，应该在帐户中启用 IPN。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-01T06:19:37.443

现在是 2013 年 5 月 1 日，PayPal 更改了 IPN 的位置。

登录，转到个人资料 -> 我的销售工具 -> 即时付款通知...（更新）

这将显示您当前的 IPN URL，并且有一个 EDIT 按钮。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-10T11:42:54.820

在没有来自 Paypal 的解决方案的情况下，我鼓励任何人提交请求手动更改的支持票。如果我们中有足够多的人这样做，他们最终将不得不提供此选项。

[在此处](https://www.paypal-support.com/)联系 Paypal 技术支持。

编辑：我设法通过 Paypal 支持的票证成功更改了我以前的所有 IPN URL。他们告诉我必须手动完成，但答应了我的要求。花了大约一个星期。他们非常有帮助。希望这可以帮助某人。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-20T15:51:50.337

我刚刚做到了。

登录，转到个人资料 -> 我的帐户设置 -> 即时付款通知...（更新）

这显示了您当前的 IPN URL，并且有一个 EDIT 按钮，它可以工作。

这是 2013 年 4 月，因此自发布此问题以来 PayPal 可能已更改

# android - Android：从“下载”文件夹安装 apk 时出错

> ID：11454902
> 
> 赞同：1
> 
> 时间：2012-07-12T15:09:49.933
> 
> 标签：android, parsing, download, download-manager

我正在使用[此处](http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/)提到的 DownloadManager 类从服务器下载文件。下载的图像可以从android 上的*Downloads文件夹中访问。*当我从*Downloads*单击下载的图像时，会显示图像。但是，如果它尝试下载 apk 而不是图像，则无法从*Downloads*文件夹安装下载的 apk，出现`problem parsing the package`错误。为什么？

这是我正在做的事情（与上面链接中提到的相同）：

```
import android.app.Activity;
import android.app.DownloadManager;
import android.app.DownloadManager.Query;
import android.app.DownloadManager.Request;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;

public class DownloadManagerActivity extends Activity {
    private long enqueue;
    private DownloadManager dm;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        BroadcastReceiver receiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
                   /* long downloadId = intent.getLongExtra(
                            DownloadManager.EXTRA_DOWNLOAD_ID, 0);*/
                    Query query = new Query();
                    query.setFilterById(enqueue);
                    Cursor c = dm.query(query);
                    if (c.moveToFirst()) {
                        int columnIndex = c
                                .getColumnIndex(DownloadManager.COLUMN_STATUS);
                        if (DownloadManager.STATUS_SUCCESSFUL == c
                                .getInt(columnIndex)) {

                          /*  ImageView view = (ImageView) findViewById(R.id.imageView1);
                            String uriString = c
                                    .getString(c
                                            .getColumnIndex(DownloadManager.COLUMN_LOCAL_URI));
                            view.setImageURI(Uri.parse(uriString));*/
                        }
                    }
                }
            }
        };

        registerReceiver(receiver, new IntentFilter(
                DownloadManager.ACTION_DOWNLOAD_COMPLETE));
    }

    public void onClick(View view) {
        dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
        Request request = new Request(
                Uri.parse("http://xxx.xxx.x.xxx/MyApp.apk"));

        enqueue = dm.enqueue(request);

    }

    public void showDownload(View view) {
        Intent i = new Intent();
        i.setAction(DownloadManager.ACTION_VIEW_DOWNLOADS);
        startActivity(i);
    }
} 
```

# java - GPS激活时通知

> ID：11454905
> 
> 赞同：0
> 
> 时间：2012-07-12T15:10:03.303
> 
> 标签：java, android

> **可能重复：**
> [GPS 状态的广播接收器？](https://stackoverflow.com/questions/11446428/broadcast-reciever-for-gps-state)

是否有监听器可以在 GPS 激活时通知我？（当用户从​​通知栏中启用“GPS”按钮时）
我尝试使用`addGpsStatusListener`，但这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:27:14.343

好的，伙计，对不起，现在我知道你的意思了，你的问题在这里得到了回答:) [检测 Android 手机中](https://stackoverflow.com/questions/6368286/detecting-gps-on-off-switch-in-android-phones) 的 GPS 开/关开关唯一的问题是它只适用于 API 级别 9 及以上。我希望这能回答你的问题。

保持冷静，保持真棒。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:16:17.807

您必须实现`LocationListener`接口并使用该`onProviderEnabled`方法。

# jquery - 如何将 ui 主题用于 jquery 数据表？

> ID：11454907
> 
> 赞同：6
> 
> 时间：2012-07-12T15:10:04.497
> 
> 标签：jquery, user-interface, datatables, themeroller, jquery-ui-theme

我一直在尝试将“平滑度”主题添加到我的 jquery 数据表中，但没有成功。我的数据表只是没有样式。

这是我的标题代码：

```
<style type="text/css" title="currentStyle">
    @import "/DataTables/media/css/smoothness/jquery-ui-1.8.21.custom.css"
</style>
<script type="text/javascript" language="javascript" src="DataTables/media/js/jquery.js"></script>
<script type="text/javascript" language="javascript" src="DataTables/media/js/jquery.dataTables.js"></script>
<script type="text/javascript" language="javascript" src="DataTables/media/js/jquery-ui-1.8.21.custom.min.js"></script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        $('#join').dataTable( {
                "bJQueryUI": true,
                "sPaginationType": "full_numbers"
            } );
    } );    
</script> 
```

这是身体的形式：

```
<table id="join" cellpadding="0" cellspacing="0" border="0" class="display" width="80%">
<thead>
    <tr>
        <th>Column 1</th>
        <th>Column 2</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>Row 1 Data 1</td>
        <td>Row 1 Data 2</td>
    </tr>
    <tr>
        <td>Row 2 Data 1</td>
        <td>Row 2 Data 2</td>
    </tr>
</tbody> 
```

我到底在这里做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T16:00:22.600

您需要导入`jquery.dataTables_themeroller.css`文件，以便它可以与主题一起使用。或者，如果您不使用主题，则只需使用`jquery.dataTables.css`

您还应该尝试像这样导入您的 css

```
<link rel="stylesheet" href="DataTables/media/css/smoothness/jquery-ui-1.8.21.custom.css"/>
<link rel="stylesheet" href="DataTables/media/css/jquery.dataTables_themeroller.css"/> 
```

或者，如果您想保留导入语句 - 您错过了该`url`部分

```
<style type="text/css" title="currentStyle">
   @import url("DataTables/media/css/smoothness/jquery-ui-1.8.21.custom.css");
   @import url("DataTables/media/css/jquery.dataTables_themeroller.css");
</style> 
```

所以最后你的css没有被导入，因此你的表格没有应用格式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-20T11:41:44.193

即使这些天（3年后）这个问题仍然是实际的。我没有`theme_roller`按照建议使用。

在大多数情况下，问题是：

*   错误的**排序**样式或 javascript 文件，
*   **错过**加载任何必需的文件，
*   **与扩展样式冲突**或覆盖主题，
*   扩展**未初始化**（例如`dom: "Bfltip"`）。

要将 jQueryUI 主题与 DataTables（在当前版本 1.10.8 中）一起使用，下一个订单只对我有用：

**CSS**

1.  `dataTables.jqueryui.css`
2.  `smoothness/jquery-ui.css`

**JS**

1.  `jquery.js`
2.  `jquery-ui.js`
3.  `jquery.dataTables.js`
4.  `dataTables.jqueryui.js`

```
$(document).ready(function() {
  var table = $('#dataContainer');
  table.DataTable({});
});
```

```
@import url("//cdn.datatables.net/1.10.8/css/dataTables.jqueryui.css");
@import url("//code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css");
```

```
<html>

<head>
  <!-- link master.css -->
</head>

<body>
  <table id="dataContainer" class="display" cellspacing="0" width="100%">
    <thead>
      <tr><th>Position</th><th>Age</th><th>Start date</th></tr>
    </thead>

    <tr><td>batman</td><td>17</td><td>2015-12-26</td></tr>
    <tr><td>marko kraljevic</td><td>18</td><td>2015-12-26</td></tr>
    <tr><td>superman</td><td>1</td><td>2015-06-29</td></tr>
  </table>

  <script type="text/javascript" src="//code.jquery.com/jquery-2.1.4.js"></script>
  <script type="text/javascript" src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script type="text/javascript" src="//cdn.datatables.net/1.10.8/js/jquery.dataTables.js"></script>
  <script type="text/javascript" src="//cdn.datatables.net/1.10.8/js/dataTables.jqueryui.js"></script>

</body>

</html>
```

**扩展**

手册（[下载生成器](https://www.datatables.net/download/)）建议在末尾添加扩展（例如按钮/打印、选择）样式。

**CSS**

3.  `buttons.jqueryui.css`

**JS**

5.  `dataTables.buttons.js`
6.  `buttons.jqueryui.js`
7.  `buttons.print.js`

虽然按钮有效（不要忘记初始化它），但这**会破坏**样式。缺少的部分是（dataTables ver < v1.11）：

js

```
dom : '<"H"B<"dt-make-valign-center"lfr>>t<"F"ip>',
jQueryUI: true, 
```

css

```
.dt-make-valign-center {
    margin: 5px;
} 
```

带有按钮的工作代码：

```
$(document).ready(function() {
  var table = $('#dataContainer');
  table.DataTable({
    dom: '<"H"B<lfr>>t<"F"ip>',
    jQueryUI: true,
    buttons: [
      'print'
    ]
  });
});
```

```
@import url("//cdn.datatables.net/1.10.8/css/dataTables.jqueryui.css");
@import url("//code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css");
@import url("//cdn.datatables.net/buttons/1.0.0/css/buttons.jqueryui.css");
```

```
<html>

<head>
  <!-- link master.css -->
</head>

<body>
  <table id="dataContainer" class="display" cellspacing="0" width="100%">
    <thead>
      <tr>
        <th>Position</th>
        <th>Age</th>
        <th>Start date</th>
      </tr>
    </thead>

    <tr>
      <td>batman</td>
      <td>17</td>
      <td>2015-12-26</td>
    </tr>
    <tr>
      <td>marko kraljevic</td>
      <td>18</td>
      <td>2015-12-26</td>
    </tr>
    <tr>
      <td>superman</td>
      <td>1</td>
      <td>2015-06-29</td>
    </tr>
  </table>

  <script type="text/javascript" src="//code.jquery.com/jquery-2.1.4.js"></script>
  <script type="text/javascript" src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script type="text/javascript" src="//cdn.datatables.net/1.10.8/js/jquery.dataTables.js"></script>
  <script type="text/javascript" src="//cdn.datatables.net/1.10.8/js/dataTables.jqueryui.js"></script>
  <script type="text/javascript" src="//cdn.datatables.net/buttons/1.0.0/js/dataTables.buttons.js"></script>
  <script type="text/javascript" src="//cdn.datatables.net/buttons/1.0.0/js/buttons.jqueryui.js"></script>
  <script type="text/javascript" src="//cdn.datatables.net/buttons/1.0.0/js/buttons.print.js"></script>

</body>

</html>
```

# objective-c - objective-c 分配的两个对象具有相同的内存？

> ID：11454913
> 
> 赞同：0
> 
> 时间：2012-07-12T15:10:24.093
> 
> 标签：objective-c, cocoa-touch

我创建了 2 个对象：

```
NSNumber * index1 = [[[NSNumber alloc] initWithInt:0 autorelease];
NSNumber * index2 = [[[NSNumber alloc] initWithInt:0 autorelease]; 
```

并在分配后放置一个断点，但令人难以置信的是，我看到两个对象的地址相同：

![在此处输入图像描述](../Images/4c1a2765f71b071140ea973e7faabf19.png)

并且 [index1 isEqual: index2] 总是返回 TRUE ??? 为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:17:00.873

这是一个内部优化。NSNumber 是不可变的，因此，为了节省空间，如果您要求 NSNumber 表示 0（和其他一些小常量），您总是会返回相同的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:16:44.437

这是一种优化。NSNumber 是不可变的，一个与另一个具有相同 int 值的 NSNumber 将*始终*与另一个相同，因此将它们作为两个独立的对象是没有意义的。这使得比较两个 NSNumber 变得微不足道，因为您可以使用地址来检查等价性，而不是比较内部值。

# php - PHP mkdir() 函数 - 如果文件夹存在

> ID：11454917
> 
> 赞同：10
> 
> 时间：2012-07-12T15:10:32.227
> 
> 标签：php, forms

> **可能重复：**
> [PHP 上传脚本 - 自动创建文件夹](https://stackoverflow.com/questions/11454053/php-uploading-script-create-folder-automatically)

我有一个基于表单创建文件夹的 PHP 脚本。我想知道如果它已经存在，是否有办法不创建和替换该文件夹？

```
<?php 
mkdir("QuickLinks/$_POST[contractno]");
?> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T15:12:21.023

您可以使用[is_dir](http://php.net/manual/en/function.is-dir.php)：

```
<?php 
$path = "QuickLinks/$_POST[contractno]";
if(!is_dir($path)){
  mkdir($path);
}
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T15:12:35.593

一般来说：

```
$dirname = "whatever";
if (!is_dir($dirname)) {
    mkdir($dirname);
} 
```

特别是：在执行涉及用户输入的文件系统（或任何其他类型的敏感）操作时**要非常小心！**当前示例（创建目录）并没有留下太多开放的攻击面，但验证输入永远不会受到伤害。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T15:13:34.527

使用[is_dir](http://php.net/manual/en/function.is-dir.php)检查文件夹是否存在

```
$dir = "/my/path/to/dir";
if (!is_dir($dir)) {
    if (false === @mkdir($dir, 0777, true)) {
        throw new \RuntimeException(sprintf('Unable to create the %s directory', $dir));
    }
} 
```

注意不受控制的输入，很危险！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T15:13:04.463

你可以试试：

```
<?php 
    if (!is_dir("QuickLinks/$_POST[contractno]"))
        mkdir("QuickLinks/$_POST[contractno]");
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T15:12:07.140

你可以看看：

[http://php.net/manual/en/function.is-dir.php](http://php.net/manual/en/function.is-dir.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T15:13:01.880

使用 PHP 的 is_dir 函数检查是否已经存在目录，只有在没有目录时才调用 mkdir 函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T15:13:29.783

在使用 POST 变量创建目录之前，请在此处执行一些验证规则（正则表达式）！

```
if(!file_exists("QuickLinks/$_POST[contractno]"))
    mkdir("QuickLinks/$_POST[contractno]"); 
```

# mysql - InnoDB 不做索引合并

> ID：11454926
> 
> 赞同：0
> 
> 时间：2012-07-12T15:11:02.033
> 
> 标签：mysql, indexing, innodb

我有一张这样的桌子

```
CREATE TABLE values (
    id int(10) auto_increment NOT NULL, 
    molecule_id int(5) NOT NULL,
    descriptor_id int(5) NOT NULL,
    T double DEFAULT NULL,
    value double NOT NULL,
    PRIMARY KEY (id),
    KEY index1 (molecule_id, T),
    KEY index2 (descriptor_id, T)
) ENGINE=InnoDB; 
```

表的行是 3000 个descriptor_ids、600 个molecules_ids 和3500 个具有随机双值的Ts 的许多组合（约20 亿行）。

我的印象是，对于像这样的查询

```
SELECT T, value FROM values WHERE molecule_id = X AND descriptor_id = Y 
```

mysql 将使用两个键，然后与结果相交。但是`Explain extended`在这个查询上做一个告诉我它只使用了 index2，在 index1 和 index2 之间进行了选择。

分子 ID = X 命中大约 1/600 的表格。descriptor_id = Y 命中表的一小部分（如 0.001%）或大约 1/700，具体取决于 Y。

看起来相交会比仅使用 index2 并扫描超过 250 万行的其余部分更快。即使 3000 个descriptor_id 分布均匀，它仍然会平均留下 800,000 行要扫描。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:25:28.580

我相信`index_merge`只有在至少一个键上进行范围扫描时才会使用操作。您的示例查询只有相等谓词，MySQL 没有将其视为范围扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:40:38.643

spencer7593 说得对。index_merge 仅在范围情况下发生。如果你`AND`是一个`OR`它会触发一个 index_merge。但是，既然是`AND`，为什么不在`molecule_id`和上建立一个多列索引`descriptor_id`呢？这会给你带来更好的结果，更快。如果`descriptor_id`更独特（如您所述），请执行以下操作：

`ALTER TABLE values ADD INDEX descriptor_molecule (descriptor_id, molecule_id, T, value)`

只要您的查询在 where 子句中的两列都带有`AND`条件，它就会使用该索引。在这种情况下，我实际上会删除你的`index2`，因为如果查询只有`descriptor_id`where 子句中的列，它仍然可以使用`descriptor_molecule`索引作为前缀索引。另外，索引所有 4 列将为您提到的查询创建一个覆盖索引，从而大大加快您的查询速度。

# android - Facebook SDK 在 Android 上的 API LEVEL 10 之后无法工作

> ID：11454929
> 
> 赞同：0
> 
> 时间：2012-07-12T15:11:12.187
> 
> 标签：android, facebook, sdk, twitter4j, linkedin-j

我使用 Facebook SDK（和 Twitter、Linkedin）登录我的应用程序。如果我指定 minSdkVersion<10，它会完美运行。我需要升级应用程序才能使用 Fragment..

```
<uses-sdk android:minSdkVersion="10" /> 
```

对于 11 及更高版本，应用程序在收到令牌后崩溃！我需要帮助！看一下错误：

更新

`07-12 16:58:44.136: D/AndroidRuntime(18310): Shutting down VM`

```
 07-12 16:58:44.148: E/AndroidRuntime(18310): FATAL EXCEPTION: main
07-12 16:58:44.148: E/AndroidRuntime(18310): java.lang.NullPointerException: println needs a message
07-12 16:58:44.148: E/AndroidRuntime(18310):    at android.util.Log.println_native(Native Method)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at android.util.Log.d(Log.java:138)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at com.branchu1.Login$1$1.onComplete(Login.java:161)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at com.facebook.android.Facebook$1.onComplete(Facebook.java:312)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at com.facebook.android.FbDialog$FbWebViewClient.shouldOverrideUrlLoading(FbDialog.java:144)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java:224)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:324)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at android.os.Looper.loop(Looper.java:137)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at java.lang.reflect.Method.invokeNative(Native Method)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at java.lang.reflect.Method.invoke(Method.java:511)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-12 16:58:44.148: E/AndroidRuntime(18310):    at dalvik.system.NativeStart.main(Native Method) 
```

Twitter 和 Linkedin SDK 也是如此。如果我从清单中删除字段 android:minSdkVersion，它就可以工作。我真的不明白！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:23:06.400

“@Rawkode 第 161 行是 facebook sdk 的一个 lof。Log.d("Facebook", e.getMessage()); 看来，Facebook 没有发送任何内容，我从这行收到错误消息。”

您的问题是 e.getMessage() 是一个空字符串，当您尝试使用空字符串调用 Log.d(TAG, message) 时，它会因 NPE 而崩溃。我遇到了类似的问题，我花了一段时间才找到它：

有些错误没有 getMessage() 方法的任何数据，因为它不是必需的。我的解决方案是创建自己的方法，其中始终包含一些文本，并且您将永远不会再从中获得另一个 NPE：

```
private void logIt(String message){
    Log.d(TAG, "Logged: " + message);
} 
```

只需调用它而不是普通的 Log.d() 就不会遇到这个问题，因为总会有数据要记录（在你的情况下，它会说：“Logged: null”）。您还可以修改该方法以接受单个标签，但这不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:56:19.917

我有同样的错误.. 该应用程序在 9 或更低版本上完美运行，但在 android 3.0 或更高版本上不起作用。

尝试使用新的 facebook 的 api，它可以工作..

[https://developers.facebook.com/android/](https://developers.facebook.com/android/)

对不起我的英语不好！

# openssl - 生成通配符子域自签名证书？

> ID：11454930
> 
> 赞同：1
> 
> 时间：2012-07-12T15:11:12.617
> 
> 标签：openssl

任何人都可以指出一些关于openssl的好教程以及如何为开发应用程序生成正确的证书，因此它应该是通配符子域证书，据我所知。我在这里找到了一些很好的教程[http://www.akadia.com/services/ssh_test_certificate.html](http://www.akadia.com/services/ssh_test_certificate.html) 但我想要几个子域的真实示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:58:20.763

如果您想要一个简单的通配符 - 请按照该示例进行操作 - 但不要输入 {{{public.akadia.com}}}，而是输入 {{{*.akadia.com}}}。

应该是这样的。尝试。如果它对您的用户社区有效（通常有效），那么您就完成了。

如果您*还*希望主题备用名称中的此值作为 DNS 字段 - 那么您需要做更多的事情。[http://therowes.net/~greg/2008/01/08/creating-a-certificate-with-multiple-hostnames/](http://therowes.net/~greg/2008/01/08/creating-a-certificate-with-multiple-hostnames/)有一个很好的例子。

简而言之，您需要找到 openssl 安装随附的 openssl.conf 文件（找到 openss.cnf），然后编辑/确保它具有以下条目：

```
 ....
 [ v3_req ]
 basicConstraints = CA:FALSE
 keyUsage = nonRepudiation, digitalSignature, keyEncipherment
 ....
 subjectAltName          = @altdns

 ...
 [altdns]
 DNS.1   = *.arkadia.com
 DNS.2   = arkadia.com 
```

然后按照 akadia.com 的说明进行操作，前提是您传递参数

```
openssl req -config aboveedited.openssl.cf 
```

指向上面的openssl命令

# javascript - 测量 JavaScript 函数的内存使用、执行时间和性能

> ID：11454933
> 
> 赞同：3
> 
> 时间：2012-07-12T15:11:29.673
> 
> 标签：javascript, testing, profiling

我四处寻找我想要的现有库/解决方案，但找不到任何东西，所以我想自己做，并寻找一些指示。

我想创建一个 javascript 测试套件，对两个函数进行 a/b 测试，所以可以说我有

```
function foo(){ var x = new Object();} 
```

和

```
function bar(){var x = {};} 
```

我希望能够测量执行时间、内存使用情况和任何其他有用的统计数据（比如基准如何显示每秒的操作数）

有什么方法，使用javascript，来衡量上述

我知道一些，但最好从新鲜开始，看看还有什么，所以非常欢迎所有建议

谢谢

注意我不要求浏览器插件或 chrome 开发工具，测量需要在 js 中完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:12:45.587

性能/时间：jsperf.com

其他分析 - 试试 Chrome 的 Inspector

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:20:05.637

```
var start = new Date().getTime();
*Your Code*
var end = new Date().getTime(),
    time = end - start,
    execs = 1000 / time;

console.log('time in ms: '+time);
console.log('operations per second: '+execs); 
```

不知道如何获得执行的内存使用情况......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-16T14:43:46.883

如果您正在使用/可以使用 Node.js，另一个选项（用于执行时间）是 process.hrtime()

有关详细信息/示例，请参阅此链接：

[使用 process.hrtime() 进行测量](https://blog.abelotech.com/posts/measure-execution-time-nodejs-javascript)

对于内存使用：

[Sizeof.js](http://code.iamkate.com/javascript/finding-the-memory-usage-of-objects/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-08T12:46:40.497

对于内存使用，也许您可​​以像这样使用[window.performance.memory 之](https://developer.mozilla.org/en-US/docs/Web/API/Performance/memory)类的东西：

```
console.log(performance.memory.usedJSHeapSize);
```

结果以字节为单位。

# algorithm - 有没有办法避免不必要的递归？

> ID：11454936
> 
> 赞同：13
> 
> 时间：2012-07-12T15:11:31.597
> 
> 标签：algorithm, optimization, haskell

[我在 CodeReview 上](https://codereview.stackexchange.com/questions/13195/is-there-a-way-to-avoid-unnecessary-recursion)发布了这个问题，但我意识到这与其说是 Haskell 问题，不如说是算法问题。

Haskell 代码可以[在我的 github 存储库](http://github.com/linduxed/kalaha-solver)中找到，但我认为代码不如一般概念重要。

基本上，该程序会计算出卡拉哈游戏（瑞典变体）中的最佳第一组动作。只考虑第一个“回合”，因此我们假设您开始，并且从对手开始移动的点开始的任何事情都不会被计算。

[卡拉哈板 http://www.graf-web.at/mwm/kalaha.jpg](http://www.graf-web.at/mwm/kalaha.jpg)

棋盘一开始是空的商店和每个罐子里等量的弹珠。

你开始你的回合，选择你身边的一个非空罐子，从那个罐子里捡起所有的弹珠，然后在经过一个罐子时通过丢下一颗弹珠在棋盘上移动。如果您的最后一块大理石落在商店中，您将获得另一个回合。如果你降落在一个非空的、非商店的罐子里，你拿起罐子里的所有东西并继续。最后，如果你落入一个空底池，转牌就会传给对手。

到目前为止，我已经通过选择所有可能的路径然后根据商店中弹珠的数量对它们进行排序来解决这个问题。一条路径意味着从你的一个罐子开始，做所有必要的拾取和移动，看看你是落在商店还是空罐子里。如果你登陆商店，你可以继续，现在你身边的非空​​罐子一样多的新分店。

问题在于，如果你从花盆里的五颗弹珠开始，那已经是相当多的路径了。跳转到 6 并且 ghci 内存不足。

我无法弄清楚如何降低成本的原因是因为我认为在计算过程中每条路径都是必要的。虽然我最多只需要生成的数千个（或数百万个）路径中的三个路径（最好的路径），但其余的需要运行以查看它们是否实际上比以前的路径更好。
如果一个更长（通常更好），那么这很好但成本很高。如果它比以前的任何路径都短，那么程序仍然必须计算该路径才能找到它。

有什么办法可以解决这个问题，还是根据定义计算所有必要的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T14:42:48.163

您可以尝试使用此并行版本的地图进行并行化：

```
parMap :: (a -> b) -> [a] -> Eval [b]
parMap f xs = map f xs `using` parList rseq 
```

然后，您将为分支中的每个选择启动一个新线程。

如果你使用 as`parMap pathFunction kalahaPots`作为你的递归，它会激发很多线程，但它可能会更快，你可以将它分块，但我不是一个并行的 haskeller 好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:15:20.090

只需*按顺序*尝试它们，将您的移动序列记录为数字 1 到 6 的序列（代表您从中挑选弹珠的底池），每次都*从头开始重播整个序列*。只保留并更新三个获胜者，以及最后的一系列动作，这样您就知道下一步该尝试什么了。如果没有下一个合法的动作，就退回一个档次。

它可能会非常慢，但会使用很少的内存。您不存储结果位置，只存储从中挑选的底池数量，并且每次从起始位置重新播放序列，更改最后一步（而不是 2，下一次尝试 3、4 等；如果没有更多合法移动，回溯一级）。或者可能只为最后尝试的移动序列存储位置，以便更容易回溯。

这是一个典型的速度交易空间。

# .net - PDF比较检查

> ID：11454937
> 
> 赞同：2
> 
> 时间：2012-07-12T15:11:33.047
> 
> 标签：.net, pdf, binary

我知道有几种方法可以实现此解决方案，因此我希望任何可能以前实施过此类解决方案的人或任何有想法的人都能提供一些建议。

我需要将 PDF 验证为“明确”的正版。我目前倾向于在 Web 应用程序上提供一个上传部分，然后使用二进制检查对其进行身份验证。PDF 最初由 Web 应用程序生成，而 PDF 是动态生成/销毁的，因此我无法访问最初生成的确切 PDF，但我可以按需重新生成 PDF。

我的担忧是：

*   假设所有设置都相同，那么 PDF 生成软件理论上是否每次都会生成二进制相同的 PDF？
*   通过作为电子邮件发送 PDF 二进制文件是否会被更改（完全）？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:27:14.583

> 我需要将 PDF 验证为“明确”的正版

我认为不应该重新发明轮子。您可以使用为此目的创建的 PDF 数字签名。大多数 PDF 生成库都支持此功能。

> 假设所有设置都相同，那么 PDF 生成软件理论上是否每次都会生成二进制相同的 PDF？

这取决于“PDF生成软件”。在生成 PDF 文件时，有时需要唯一的 ID，这取决于生成这些 ID 的方式，您可能会或可能不会在二进制级别获得相同的文件。

> 通过作为电子邮件发送 PDF 二进制文件是否会被更改（完全）？

它不应该，如果这样做，它可能会腐败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:49:45.487

不，PDF 不会是二进制相同的：PDF 应该包含它们的创建时间（这将是不同的）和一​​个 ID（这也应该是唯一的）。

# magento-1.4 - 带有自定义字段的销售订单的 Magento Collection 加载

> ID：11454938
> 
> 赞同：1
> 
> 时间：2012-07-12T15:11:33.297
> 
> 标签：magento-1.4

我是 magento 的新手。我在 magento 管理面板中为产品添加了两个文本文件（自定义选项）。当客户购买产品时，这两个文本字段是必需的。我需要加载销售订单的集合来获取这两个字段。

客户字段即：1）域名2）激活码

任何人都可以给我指导吗？如何从 magento 销售订单中获取此文本字段？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:02:10.170

下面的集合将从销售订单中获取您的产品自定义字段，我已经尝试过自己并得到了最终结果。

注意：客户在产品详细信息页面中输入的这些产品自定义字段值。

```
$order = Mage::getModel('sales/order');
$orderItems = $order->getItemsCollection();
$orderItems->addFieldToFilter('product_options',array('like'=>'%'.$domain_name.'%'));
$data = $orderItems->getData(); 
```

# ios - 调用相机时iPhone随机崩溃？

> ID：11454942
> 
> 赞同：0
> 
> 时间：2012-07-12T15:11:40.883
> 
> 标签：ios, objective-c, memory-management, crash

我已经使用仪器测试了我的应用程序，它显示了以下泄漏。 ![在此处输入图像描述](../Images/99ce0fda722dcd674596ae995b63a1ba.png)

当我双击堆栈跟踪中的 CameraVC 时，它会在我的代码中引用以下行。 ![在此处输入图像描述](../Images/10a7796ce446e8f779f0c35cc12b221d.png)

当我调用相机时会发生这种情况，我使用以下代码调用它：-

```
 - (IBAction) getCamera
{
    // set up our camera overlay view   
    // tool bar - handy if you want to be able to exit from the image picker...
    UIToolbar *toolBar=[[UIToolbar alloc] initWithFrame:CGRectMake(0, 480-44, 320, 44)];

    UIBarButtonItem *spaceItem  = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace  target:nil action:nil] autorelease];
    UIBarButtonItem *spaceItem1  = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace  target:nil action:nil] autorelease];
    UIBarButtonItem *cancelItem = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel  target:self action:@selector(cancelPickingImag)] autorelease];
    UIBarButtonItem *cameraItem = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCamera  target:self action:@selector(finishedAugmentedReality)] autorelease]; 

    spaceItem.width  = 2.0;
    spaceItem1.width = 55.0;
    NSArray *items=[NSArray arrayWithObjects:spaceItem,cancelItem,spaceItem1,cameraItem,nil];
    [toolBar setItems:items];

    // create the overlay view
    overlayView=[[OverlayView alloc] initWithFrame:CGRectMake(0, 300, 320, 480-44)];

    // important - it needs to be transparent so the camera preview shows through!
    overlayView.opaque=NO;
    overlayView.backgroundColor=[UIColor clearColor];

    // parent view for our overlay
    UIView *parentView=[[UIView alloc] initWithFrame:CGRectMake(0,0,320, 480)];
    [parentView addSubview:overlayView];
    [parentView addSubview:toolBar];
    [parentView addSubview:lbl];
    [parentView addSubview:overlayGraphicView];

    // configure the image picker with our overlay view
    //UIImagePickerController *picker=[[UIImagePickerController alloc] init];

    if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypeCamera])
    {
        imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;

        // hide the camera controls
        imagePicker.showsCameraControls=NO;

        imagePicker.delegate = self;
        //imagePicker.allowsImageEditing = NO;

        // and put our overlay view in
        imagePicker.cameraOverlayView=parentView;
    }
    else
    {
        imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                  (NSString *) kUTTypeImage,
                                  nil];
        imagePicker.allowsEditing = NO;

    }

    [self presentModalViewController:imagePicker animated:YES];

    //Free memory 
    [imagePicker release];//,imagePicker =nil;
    [parentView release], parentView=nil;
    [overlayGraphicView release], overlayGraphicView= nil;
    [lbl release], lbl=nil;
    [overlayView release];//, overlayView =nil;
    [toolBar release], toolBar=nil;
} 
```

非常感谢任何帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:52:04.167

`parentView`正在被创建`[alloc [init...]]`，意味着它是`retain`ed。然后将它分配给 的`cameraOverlayView`属性`imagePicker`，这意味着它会`retain`再次被编辑。完成该任务后，您需要`release`它。

（这几乎可以肯定是“泄漏”的原因，但不会导致“崩溃”。你说你遇到了崩溃，但根本没有描述。）

# asp.net - 如何将变量或值从一个 asp.net vb.net 代码页传递到另一个？

> ID：11454943
> 
> 赞同：5
> 
> 时间：2012-07-12T15:11:42.270
> 
> 标签：asp.net, vb.net, variables, transfer

我在 ASP.net 和 VB.net 中创建了一个站点/门户。

我想知道如何在两个asp页面之间引用变量，而不是页面本身，我想直接将数据从页面的.aspx.vb位传输到另一个页面的.aspx.vb文件。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:18:12.687

asp.net/VB.net 中的一个简单方法是使用会话变量。

```
Session("myVariable") = "blah" 
```

您现在可以从另一个 .aspx.vb 页面使用此值。例子：

```
Dim strTest as String = ""
strTest = Session("myVariable") 
```

您可以通过引用在您的任何 .aspx 页面上访问此页面以访问此会话`Session("myVariable")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:19:22.187

如果它不是敏感数据，你可以做这样的事情，

原始页面：protected void Button1_Click(object sender, EventArgs e)

```
{
          string MyOccupation = "Software Developer";

          string url;
          url = "page2.aspx?occupation=" + MyOccupation;

          Response.Redirect(url);

} 
```

下一页：字符串 RetrievedValue;protected void Page_Load(object sender, EventArgs e)

```
{

          this.TextBox1.Text = Request.QueryString["occupation"];
          RetrievedValue = this.TextBox1.Text;

} 
```

取自[http://forums.asp.net/t/1223291.aspx](http://forums.asp.net/t/1223291.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:20:54.597

[如何在 Asp.net 中将值从一种形式传递到另一种形式的](https://stackoverflow.com/questions/6746860/how-can-i-pass-values-from-one-form-to-another-in-asp-net/6746960#6746960)重复

客户端技术：查询字符串

查询字符串：对于发送：

`string name="abc"; Response.Redirect(" Page2.aspx?name= "+name);`

获取：`On Page2.aspx string name=Response.QueryString.GetValue(" name ");`

服务器端技术：Session

对于设置：`Session["Name"] = "Abc";`

获取：`string str = Session["Name"].ToString();`

在 Session 中，您可以传递任何对象类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:49:50.413

由于没有人发布这个，这里是微软关于在页面之间传递值的页面。它提供了 C# 和 VB 示例：http: [//msdn.microsoft.com/en-us/library/6c3yckfw.aspx](http://msdn.microsoft.com/en-us/library/6c3yckfw.aspx)

# java - AlertDialog MultiChoice 没有给我正确的选择

> ID：11454945
> 
> 赞同：0
> 
> 时间：2012-07-12T15:12:01.563
> 
> 标签：java, android, android-alertdialog

我正在尝试使用动态数据构建多选 AlertDialog。

好的，一切都很好，等等，但是选择搞砸了。

这是我的代码：

```
new AlertDialog.Builder(this)
        .setTitle("Cities")
        .setMultiChoiceItems(_options, _selections, new DialogInterface.OnMultiChoiceClickListener(){

                @Override
                public void onClick(DialogInterface dialog, int clicked, boolean selected) {
                        Log.i("Database", _options[clicked] + " selected: " + selected);
                }

        })
        .setPositiveButton("OK", new DialogInterface.OnClickListener(){

                @Override
                public void onClick(DialogInterface dialog, int clicked) {
                    switch(clicked) {
                        case DialogInterface.BUTTON_POSITIVE:
                            for( int i = 0; i < _options.length; i++ ){
                                Log.i("Database", "id: " + _values[i] + " " + _options[i] + " selected: " + _selections[i]);
                            }
                            break;
                    }
                }
        })
        .create(); 
```

正如您在 LogCat 中看到的，我描述了我的问题：

```
** OPENED ALERTDIALOG VIA A BUTTON AND SELECTED THE FOLLOWING: **
07-12 16:06:51.347: I/Database(8034): Aveiro selected: true
07-12 16:06:53.936: I/Database(8034): Coimbra selected: true
07-12 16:07:00.116: I/Database(8034): Porto selected: true

** AFTER PRESSING THE OK BUTTON, THIS SHOWS UP, WHICH IS CORRECT: **
07-12 16:07:02.826: I/Database(8034): id: 1 Aveiro selected: true
07-12 16:07:02.826: I/Database(8034): id: 2 Coimbra selected: true
07-12 16:07:02.826: I/Database(8034): id: 3 Porto selected: true
07-12 16:07:02.826: I/Database(8034): id: 4 Minho selected: false

** I CLICKED THE BUTTON TO START THE DIALOG AGAIN DE UNSELECTED THE FOLLOWING: **
07-12 16:07:07.087: I/Database(8034): Coimbra selected: false

** AFTER PRESSING THE OK BUTTON, ALL SHOWS AS FALSE. 1 AND 3 SHOULD BE TRUE: **
07-12 16:07:08.097: I/Database(8034): id: 1 Aveiro selected: false
07-12 16:07:08.097: I/Database(8034): id: 2 Coimbra selected: false
07-12 16:07:08.097: I/Database(8034): id: 3 Porto selected: false
07-12 16:07:08.097: I/Database(8034): id: 4 Minho selected: false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:43:48.710

**编辑**

尝试了您的代码，它对我来说工作正常。逐步检查并确保您的值是正确的。

这是我的测试应用程序。唯一的区别是我不知道是什么`_values`，所以我把它拿出来了。

```
public class SandBoxActivity extends Activity {

    private Button testButton;

    private CharSequence[] _options = {"Aveiro", "Coimbra", "Porto", "Minho"};

    private boolean[] _selections = {true, true, true, false};

    private AlertDialog test;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        test = new AlertDialog.Builder(this)
        .setTitle("Cities")
        .setMultiChoiceItems(_options, _selections, new DialogInterface.OnMultiChoiceClickListener(){

                @Override
                public void onClick(DialogInterface dialog, int clicked, boolean selected) {
                        Log.i("Database", _options[clicked] + " selected: " + selected);
                }

        })
        .setPositiveButton("OK", new DialogInterface.OnClickListener(){

                @Override
                public void onClick(DialogInterface dialog, int clicked) {
                    switch(clicked) {
                        case DialogInterface.BUTTON_POSITIVE:
                            for( int i = 0; i < _options.length; i++ ){
                                Log.i("Database", "id: " + " " + _options[i] + " selected: " + _selections[i]);
                            }
                            break;
                    }
                }
        })
        .create();

        this.testButton = (Button) findViewById(R.id.color_button);
        this.testButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                test.show();
            }
        });
    }
} 
```

* * *

**旧帖子**

```
.setMultiChoiceItems(_options, _selections, new DialogInterface.OnMultiChoiceClickListener(){

                @Override
                public void onClick(DialogInterface dialog, int clicked, boolean selected) {
                        Log.i("Database", _options[clicked] + " selected: " + selected);
                }

        }) 
```

我没有看到您实际上正在处理它被点击的事实。`_selections`我看到您正在打印它被点击的日志，但您并没有改变它在您的阵列中被选中的事实。那可能是你的问题。

**试试这个：**

```
.setMultiChoiceItems(_options, _selections, new DialogInterface.OnMultiChoiceClickListener(){

                @Override
                public void onClick(DialogInterface dialog, int clicked, boolean selected) {
                        _selections[clicked] = selected;
                        Log.i("Database", _options[clicked] + " selected: " + selected);
                }

        }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:53:42.983

Silentw，请阅读[此](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setMultiChoiceItems%28java.lang.CharSequence%5B%5D,%20boolean%5B%5D,%20android.content.DialogInterface.OnMultiChoiceClickListener%29)

每次创建时，我们都必须为所选选项提供布尔数组

还更新您的代码如下

```
 public void onClick(DialogInterface dialog, int clicked, boolean selected) 
{                      
                     if(!_selections[clicked])
                        _selections[clicked] = true;
                    else
                        _selections[clicked]=false;

                        Log.i("Database", _options[clicked] + " selected: " + selected);

} 
```

# eclipse - 如何在 Eclipse 4.2 中隐藏工具栏？

> ID：11454949
> 
> 赞同：20
> 
> 时间：2012-07-12T15:12:16.430
> 
> 标签：eclipse, toolbar

工具栏对我没用，太占空间了，我用快捷键来实现工具栏提供的所有功能。在 Eclipse 3.7 中，我们可以右键单击工具栏并点击“隐藏工具栏”，但在 Eclipse 4 中如何做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T03:18:23.487

菜单不见了，但该命令现在似乎仍然可用。
Preferences > General > Keys
在过滤器文本中输入“toggle t”，然后会出现“Toggle Toolbar Visibility”。分配某些键时，它似乎起作用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-30T15:18:19.027

`> Window > Hide Toolbar`

（我正在运行 4.2.1。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-06T19:31:37.193

在 4.7.2 中，您可以使用菜单项：`Window -> Appearance -> Hide Toolbar`&`Window -> Appearance -> Show Toolbar`来切换工具栏的可见性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T18:14:10.267

您可以像这样以编程方式执行此操作：

```
@Override
public void postWindowOpen() {
    hideCoolbar();
    super.postWindowOpen();
}

private void hideCoolbar() {
    try {
        IHandlerService service = (IHandlerService) PlatformUI
                .getWorkbench().getActiveWorkbenchWindow()
                .getService(IHandlerService.class);
        if (service != null)
            service.executeCommand("org.eclipse.ui.ToggleCoolbarAction",
                    null);
    } catch (Exception e) {
        //handle error
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-18T10:26:45.743

`4.9.0`您可以通过`Window > Perspective > Customize Perspective`顶部菜单打开。在这里，您可以隐藏完整的工具栏组，甚至显示/隐藏单个图标。我，我把它缩小到只显示一行符号，这样我就有更多的空间给下面的编辑器。

该`Customize Perspective`功能在 Eclipse 中早就引入了，所以我想它适用于您的版本。

[![在此处输入图像描述](../Images/a1ea314d6bb836a3681782d66ef07d35.png)](https://i.stack.imgur.com/6m6pn.png)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-12T15:42:32.097

不确定这是否可行，但你为什么不看看这个。

[在 Eclipse RCP 应用程序 (Eclipse e4) 中隐藏 Coolbar/Toolbar 项/Preference 页面](https://stackoverflow.com/questions/10043190/hide-coolbar-toolbar-items-preference-pages-in-eclipse-rcp-application-eclipse)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-03-16T12:59:58.470

```
WorkbenchWindow w = (WorkbenchWindow)HandlerUtil
     .getActiveSite(event)
     .getWorkbenchWindow();
w.setPerspectiveBarVisible(false); 
```

# c++ - 用于生产服务器的重量 httpd

> ID：11454954
> 
> 赞同：3
> 
> 时间：2012-07-12T15:12:26.077
> 
> 标签：c++, wt

似乎有两种流行的方式来运行 Wt 应用程序：使用 Apache 之类的服务器的 FastCGI 或它们内置的 httpd。我熟悉前者，但不熟悉后者。

有没有人有*在生产*环境中使用 httpd 运行 Wt 应用程序的经验？这是一个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:09:23.740

所以我决定去 Wt 论坛向图书馆的创建者询问同样的问题。这是他们不得不说的：

> “内置的 httpd 在我们的套接字支持和使用同步 I/O 方面有一些好处。我们建议将它用于大多数部署，通常与反向代理（如 HAproxy）结合使用。”

# java - Java Swing Applet - 无法设置背景颜色

> ID：11454966
> 
> 赞同：3
> 
> 时间：2012-07-12T15:12:43.560
> 
> 标签：java, swing, applet

首先，我是 Swing 新手。我试图设置音频录制小程序的背景颜色，以使其与我的网页混合（白色而不是默认的灰色），但似乎永远不会改变。这是小程序初始化...

```
public void init()
{
    setLayout(null);
    setBackground(Color.white);
    JLabel recorder = new JLabel("Record");
    JLabel fileName = new JLabel("Please Enter File Name");
    JLabel status = new JLabel("Status...");
    fnametxt = new JTextField("FileNameHere");
    statustxt = new JTextField("");
    record = new JButton("Record");
    play = new JButton("Play");
    pause = new JButton("Pause");
    stop = new JButton("Stop");
    send = new JButton("Upload");
    listen = new JButton("Listen");
    save = new JButton("Save and Submit");
//A bunch of other stuff, event listeners and whatnot. 
```

我没有使用布局管理器，我手动设置了所有位置。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T15:18:54.763

您设置（大概）Applet 的背景，但该背景只会显示它没有被其他组件阻挡的位置。

根据您构建 GUI 的方式，可能会有内部面板或其他组件覆盖该区域。您还需要更改这些组件的颜色（或者使用 setOpaque(false) 将它们设置为透明）。

编辑： setOpaque() 仅适用于 Swing 组件，而不是 Applet 本身（因为那是普通的旧 AWT）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:22:48.243

您可能应该设置内容窗格的背景颜色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T16:39:21.707

如果您在小程序中使用 JPanel，则还必须为 JPanel 的内容窗格着色。以下代码将 JPanel 本身及其内容窗格的背景设置为白色：

```
setBackground(Color.white);
getContentPane().setBackground(Color.white); //Color JPanel 
```

# android - 您是否相信：我无法在 Eclipse 字符串编辑器中“复制”字符串项的定义/值

> ID：11454972
> 
> 赞同：0
> 
> 时间：2012-07-12T15:12:57.387
> 
> 标签：android, eclipse

我正在使用 Eclipse 3.7（靛蓝）。我有一些非常长的字符串项定义/值——例如，超过 1000 个字符，带有很多嵌入的 XML 段。复制功能在 strings.xml 选项卡中工作，其中 XML 字符被替换为它们的多字符等效项，而不是 Resources 选项卡。每当我选择定义/值文本时——无论是使用光标还是使用 shift 箭头键，我都不会激活“复制”或“剪切”命令。

有人知道这个秘密吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:19:31.253

你有什么版本的 Eclipse？我知道有些版本的键盘映射和快捷键有问题。

尝试查看这些快捷方式是如何定义的。请参阅“首选项”>“常规”>“键”（[图像](http://www.rblab.com/blog/wp-content/uploads/2009/07/pref_general_keys.jpg)）中的“时间”列。

检查这些快捷方式是否不适用于任何编辑器（它们是否适用于 Java 编辑器？）。如果它们适用于某些编辑器，而不适用于其他编辑器，那么问题可能是插件设置导致它们执行另一个命令。您可以尝试禁用所有不必要的插件。

**编辑**：

我还在Eclipse 网站上发现了一个影响 Eclipse 3.5的[错误报告。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=70077)看起来修复是转到 Window > Preferences > Java > Editor > Typing，然后取消选中“更新导入”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T23:28:46.097

一开始我习惯在资源选项卡上做所有事情，但是后来我开始遇到一些问题，当我粘贴信息时它没有显示在那里，但是由于某种原因它被粘贴在资源节点上，所以它做到了我的 XML 无效。所以我最好开始在 XML 选项卡上执行此操作，因为速度也更快。所以当你需要做一些又快又漂亮的事情时，你最好在 XML 选项卡上做，这样错误更少。

**更新：**

如果您的问题只是您想要解码带有 ''' 之类的值的文本。然后您可以从 XML 选项卡中复制文本并转到**[该](http://coderstoolbox.net/string/)**站点并在那里输入并单击解码，您将获得文本的解码版本。

# c# - C#中的哈希计算

> ID：11454976
> 
> 赞同：1
> 
> 时间：2012-07-12T15:13:01.460
> 
> 标签：c#, hash, md5, abstract-class, sha1

我正在计算所选文件的 MD5、MD4、SHA1、SHA256、SHA512、RIPEMD160 等。我创建了以下算法，但它有问题。

```
 string finalHash;
        byte[] buffer;
        byte[] oldBuffer;
        int bytesRead;
        int oldBytesRead;
        long streamSize;
        long totalBytesRead = 0;
        try
        {
            if (!String.IsNullOrEmpty(selectedFile))
            {
                _dataStream = File.OpenRead(selectedFile);
                selectedFile = string.Empty;
            }
            foreach (var hashObject in from Control ctrl in Controls where ctrl is CheckBox && ((CheckBox)ctrl).Checked select HashObject)
            {
                //totalBytesRead = 0;
                streamSize = _dataStream.Length;
                buffer = new byte[4096];
                bytesRead = _dataStream.Read(buffer, 0, buffer.Length);
                totalBytesRead += bytesRead;
                do
                {
                    oldBytesRead = bytesRead;
                    oldBuffer = buffer;
                    buffer = new byte[4096];
                    bytesRead = _dataStream.Read(buffer, 0, buffer.Length);
                    totalBytesRead += bytesRead;
                    if (bytesRead == 0)
                    {
                        hashObject.TransformFinalBlock(oldBuffer, 0, oldBytesRead);
                    }
                    else
                    {
                        hashObject.TransformBlock(oldBuffer, 0, oldBytesRead, oldBuffer, 0);
                    }
                    hashCalculationWorker.ReportProgress((int)((double)totalBytesRead * 100 / streamSize));
                } while (bytesRead != 0);
                e.Result = hashObject.Hash;
                finalHash = GenerateHex(hashObject.Hash);
                Invoke(new MethodInvoker(() =>
                                             {
                                                 // Get finalHash 
                                             }));
                hashObject.Dispose();
            }
        }
        catch (Exception)
        {
        }

        private HashAlgorithm HashObject
        {           
            get
            {
                if (isMD5Selected)
                {
                    _hashObject = MD5.Create();
                    isMD5Selected = false;
                }
                else if (isMD4Selected)
                {
                    _hashObject = MD4.Create();
                    isMD4Selected = false;
                }
                else if (isSHA1Selected)
                {
                    _hashObject = SHA1.Create();
                    isSHA1Selected = false;
                }
                ...
                return _hashObject;
                }
            } 
```

在上面的代码中，foreach 语句取决于选择的哈希算法的数量。它正确计算了第一个选择的哈希值，但在第二次和其他下一次迭代中它给出了错误的值。怎么了。有谁能够帮助我？提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:44:38.693

您没有重置流，以便您可以在循环中的每次迭代中重新读取其内容。您的缓冲区管理逻辑可以简化很多，并且最好`hashObject.Dispose`在一个`finally`块中调用，以便在抛出异常时释放资源。

```
 streamSize = _dataStream.Length;
        buffer = new byte[4096];  
        foreach (var hashObject in from Control ctrl in Controls where ctrl is CheckBox && ((CheckBox)ctrl).Checked select HashObject)  
        {  
            try
            {
                // reset stream position, progress
                _dataStream.Position = 0;
                _totalBytesRead = 0;

                do  
                {  
                    bytesRead = _dataStream.Read(buffer, 0, buffer.Length);  
                    totalBytesRead += bytesRead;  
                    if (_dataStream.Position == _dataStream.Length)  
                    {  
                        hashObject.TransformFinalBlock(buffer, 0, bytesRead);  
                    }  
                    else  
                    {  
                        hashObject.TransformBlock(buffer, 0, bytesRead, buffer, 0);  
                    }  
                    hashCalculationWorker.ReportProgress((int)((double)totalBytesRead * 100 / streamSize));  
                } while (_dataStream.Position < _dataStream.Length);  

                e.Result = hashObject.Hash;  
                finalHash = GenerateHex(hashObject.Hash);  
                Invoke(new MethodInvoker(() =>  
                                             {  
                                                 // Get finalHash   
                                             }));  
            }
            finally 
            {
                hashObject.Dispose();  
            }
        } 
```

**如果文件不大，更好的解决方案：**

一次将流中的所有数据读取到缓冲区中，然后重新使用它可能会更高效：

```
 if (!String.IsNullOrEmpty(selectedFile))  
        {  
            buffer = File.ReadAllBytes(selectedFile);  
            streamSize = buffer.Length;
            selectedFile = string.Empty;  
        }  

        foreach (var hashObject in from Control ctrl in Controls where ctrl is CheckBox && ((CheckBox)ctrl).Checked select HashObject)  
        {  
            int offset = 0;
            while (buffer.Length - offset >= streamSize)
            {
                offset += hashObject.TransformBlock(buffer, offset, streamSize, buffer, offset);
                hashCalculationWorker.ReportProgress((int)((double)offset * 100 / streamSize));  
            }

            hashObject.TransformFinalBlock(buffer, offset, buffer.Length - offset);
            hashCalculationWorker.ReportProgress(100);  

            e.Result = hashObject.Hash;  
            finalHash = GenerateHex(hashObject.Hash);  
            Invoke(new MethodInvoker(() =>  
                                         {  
                                             // Get finalHash   
                                         }));  
            hashObject.Dispose();  
        } 
```

# php - php FTP Wrapper 写入空文件（0 字节），FTP 扩展不写入

> ID：11454978
> 
> 赞同：0
> 
> 时间：2012-07-12T15:13:03.987
> 
> 标签：php, ftp

在运行 PHP 5.2.17 的服务器上，使用任何利用内置 ftp 包装器上传文件的函数，在服务器上创建一个空文件：

*   `file_put_contents()`返回准确的字节数
*   `copy()`也返回 true

两者都创建文件，但它是空的。

在尝试使用`ftp_put()`FTP 扩展时，无论是二进制模式还是 ascii 模式，它都运行良好。

在我的带有 PHP 5.3.10 的工作站上，它也可以与包装器一起使用。

在代码中：

```
$source = '/tmp/testfile';
$target = 'ftp://user:pass@example.com/testfile';

copy($source, $target); 
```

不给出错误或警告，但在服务器上留下一个空文件。

```
$source = '/tmp/testfile';
$target = 'testfile';

$ftp = ftp_connect('example.com');
ftp_login($ftp, 'user', 'pass');
ftp_put($ftp, $target, $source, FTP_ASCII);
ftp_close($ftp); 
```

在各个方面都有效。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T15:48:02.577

您是否尝试过 SSH2 库？下面的一些示例实现：

```
public function uploadSFTP($host_name, $port, $user, $publicSshKeyPath, $privateSshKeyPath, $remoteFile, $localFile, $fileOperation = 'w') 
{
    $ssh_conn = ssh2_connect($host_name, $port);

    if (ssh2_auth_pubkey_file($ssh_conn, $user, $publicSshKeyPath, $privateSshKeyPath)) 
    {
        $sftp_conn = ssh2_sftp($ssh_conn);
        $inputfileStream = @fopen('ssh2.sftp://' . $sftp_conn . $remoteFile, $fileOperation);

        try 
        {
            if (!$inputfileStream)
                throw new Exception('Could open remote file for writing: ' . $remoteFile);

            $localFileContents = @file_get_contents($localFile);

            if ($localFileContents === FALSE)
                throw new Exception('Could not open local file for reading :' . $localFile);

            if (@fwrite($inputfileStream, $localFileContents) === FALSE)
                throw new Exception('Could not SFTP file');
        } 
        catch (Exception $e) 
        {
            // Do something...
        }

        fclose($sftpInfileStream);
    }
} 
```

# javascript - 提交表单时，IE8 不会向请求添加属性，而不是来自输入的属性

> ID：11454981
> 
> 赞同：0
> 
> 时间：2012-07-12T15:13:22.297
> 
> 标签：javascript, jquery, forms, internet-explorer-8, submit

所有其他浏览器（包括 IE9，不包括古老的浏览器）都发送以下格式的正确请求：

```
<form class="form-submitter form-horizontal" enctype="multipart/form-data" name="Uploader" id="Uploader" action="MainServlet?module=general&action=add&Name=test">
<input class="input-file" name="testFormName" id="UploaderInput" type="file">
</form> 
```

那是：

```
http://localhost:8080/Project/MainServlet?module=general&action=add&Name=test&testFormName=%5Bobject+File%5D 
```

而在 IE8 中，我得到的是：

```
http://localhost:8080/Project/MainServlet?toSessionFormName=test.png 
```

我正在使用jQuery的提交，即：

```
$("#Uploader").submit() 
```

我很想得到任何可能导致我解决问题的建议或提示。IE8 有人遇到过这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:18:03.123

使用隐藏输入：

```
<form class="form-submitter form-horizontal"
    enctype="multipart/form-data" name="Uploader" id="Uploader"
    action="MainServlet">
    <input type=hidden name=module value="general">
    <input type=hidden name=action value="add">
    <input type=hidden name=Name value="test">
    <input class="input-file" name="testFormName" id="UploaderInput" type="file">
</form> 
```

这是正确的解决方案。您甚至可以避免编码问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:18:42.477

你可以这样改变你的代码：

```
<form class="form-submitter form-horizontal"
      enctype="multipart/form-data"
      name="Uploader" id="Uploader"
      action="MainServlet" method="get">
    <input class="input-file" name="testFormName" id="UploaderInput" type="file">
    <input type="hidden" name="module" value="general" />
    <input type="hidden" name="action" value="add" />
    <input type="hidden" name="Name" value="test" />
</form> 
```

最好通过 GET 而不是在 URL 中隐式发送参数。

# jasper-reports - Strings 类型中的方法 isNullOrEmpty(String) 不适用于参数（时间戳）

> ID：11454982
> 
> 赞同：0
> 
> 时间：2012-07-12T15:13:25.823
> 
> 标签：jasper-reports

当我将方法 isNullOrEmpty(String) 放入报告中时，我的报告出现问题。
我不知道是什么问题。
有人知道是什么问题吗？

这是我的 jrxml 文件：

```
 <jasperReport ....>
    <parameter name="TRUE" isForPrompting="false" class="java.lang.Boolean">
        <defaultValueExpression ><![CDATA[new Boolean(true)]]>
        </defaultValueExpression>
    </parameter>
    <parameter name="date_start" isForPrompting="true" class="java.sql.Timestamp">
        <parameterDescription><![CDATA[reports.helpdesk.startDate]]>
        </parameterDescription>
        <defaultValueExpression ><![CDATA[new java.sql.Timestamp(System.currentTimeMillis()-262800000)]]>
        </defaultValueExpression>
    </parameter>
    <parameter name="date_end" isForPrompting="true" class="java.sql.Timestamp">
        <parameterDescription><![CDATA[reports.helpdesk.endDate]]>
        </parameterDescription>
        <defaultValueExpression ><![CDATA[new java.sql.Timestamp(System.currentTimeMillis())]]>
        </defaultValueExpression>
    </parameter>
    <parameter name="CENTRIC_DICTIONARY" isForPrompting="false" class="java.util.Map"/>
    <parameter name="SCRIPT_DB_CONNECTION" isForPrompting="false" class="java.sql.Connection"/>
    <field name="enteredby" class="java.lang.Integer"/>
    <field name="description" class="java.lang.String"/>
    <field name="assigned_date" class="java.sql.Timestamp"/>
    <field name="max_score" class="java.lang.Integer"/>
    <field name="totalAnswer" class="java.lang.Integer"/>
    <field name="totalticketcreated" class="java.lang.Integer"/>
    <field name="totalfeedbackreceived" class="java.lang.Integer"/>
    <field name="score" class="java.lang.Integer"/>
    <background>
        <band height="0"  isSplitAllowed="true" >
        </band>
    </background>
    <title>
        <band height="0"  isSplitAllowed="true" >
        </band>
    </title>
    <pageHeader>
        <band height="108"  isSplitAllowed="true" >
            <staticText>
                <reportElement
                    x="0"
                    y="0"
                    width="802"
                    height="20"
                    key="staticText"/>
                <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                <textElement textAlignment="Center" verticalAlignment="Top" rotation="None" lineSpacing="Single">
                    <font fontName="SansSerif" size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Customer Feedback by Counter]]>
                </text>
            </staticText>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                <reportElement
                    x="0"
                    y="20"
                    width="802"
                    height="35"
                    key="textField"
                    isRemoveLineWhenBlank="true"/>
                <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                <textElement textAlignment="Center" verticalAlignment="Top" rotation="None" lineSpacing="Single">
                    <font size="12" isBold="true"/>
                </textElement>
                <textFieldExpression   class="java.lang.String"><![CDATA[" From ( " + $P{date_start} + " - " + $P{date_start} + " )"]]>
                </textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                <reportElement
                    x="0"
                    y="54"
                    width="802"
                    height="41"
                    key="textField"
                    isRemoveLineWhenBlank="true"/>
                <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                <textElement textAlignment="Left" verticalAlignment="Top" rotation="None" isStyledText="true" lineSpacing="1_1_2">
                    <font size="11" isBold="true"/>
                </textElement>
                <textFieldExpression   class="java.lang.String"><![CDATA[(!Strings.isNullOrEmpty($P{date_start})) ? "Date Ticket Created From : " + $P{date_start} +"\n" + "Date Ticket Created to : " + $P{date_end}
     : "Date Ticket Created From : " + $P{date_start} +"\n" + "Date Ticket Created to : " + $P{date_end}]]>
                </textFieldExpression>
            </textField>
        </band>
    </pageHeader>
</jasperReport> 
```

更新： - 为什么当我使用这个公式时结果不能显示：

```
new SimpleDateFormat("dd/MM/yyyy").format($P{date_start})!= null   &&  new SimpleDateFormat("dd/MM/yyyy").format($P{date_end})!=null  && ($P{lookup_department}==null) && ($P{lookup_assignedOfficer}==null) ? "Date Ticket Created From : " + new SimpleDateFormat("dd/MM/yyyy").format($P{date_start}) +"\n" + "Date Ticket Created to : " + new SimpleDateFormat("dd/MM/yyyy").format($P{date_end})
:new SimpleDateFormat("dd/MM/yyyy").format($P{date_start})!=null   &&  new SimpleDateFormat("dd/MM/yyyy").format($P{date_end})!=null  && ($P{lookup_department}!=null) && ($P{lookup_assignedOfficer}==null) ? "Division :"+$F{division} 
:new SimpleDateFormat("dd/MM/yyyy").format($P{date_start})!=null   &&  new SimpleDateFormat("dd/MM/yyyy").format($P{date_end})!=null  && ($P{lookup_department}==null) && ($P{lookup_assignedOfficer}!=null) ? "Ticket Created :"+$F{tickedcreted}
: $F{division} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:36:36.420

您的 date_start 参数是一个时间戳， isNullOrEmpty() 方法显然需要一个字符串。试试这个：

```
$P{date_start} != null 
```

整个文本字段表达式变为：

```
<textFieldExpression   class="java.lang.String"><![CDATA[($P{date_start} != null) ? "Date Ticket Created From : " + $P{date_start} +"\n" + "Date Ticket Created to : " + $P{date_end}
 : "Date Ticket Created From : " + $P{date_start} +"\n" + "Date Ticket Created to : " + $P{date_end}]]></textFieldExpression> 
```

# java - 将 JFileChooser 限制到某个目录

> ID：11454987
> 
> 赞同：2
> 
> 时间：2012-07-12T15:13:47.740
> 
> 标签：java, jfilechooser

我需要将我限制`JFileChooser`在一个目录及其子目录中，因为该文件只能保存在外部媒体上。我不会遇到外部存储器不存在的任何问题，这已经被处理了。

我是不是该...

*   覆盖`getCurrentDirectory()`？
*   使用`FileFilter`? 通常这些使用`String.endsWith()`，但我会获得绝对路径并根据外部设备的路径进行限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:09:03.573

我绝对会避免实施这样的限制。几乎不可能做到这一点（您如何*可靠地*确定什么是外部存储？）。它违背了用户的期望。

更好的方法是让用户选择他喜欢的任何目录，当您检测到该目录可能不合适时，显示一个*警告*，详细说明它不合适的原因。在警告中提供两个选项，例如“明白，继续”和“选择另一个目录”。可能还有一个选项可以在程序选项中的某处关闭警告。

# git - 切换到任意 git 存储库/分支的 Git 命令？

> ID：11454992
> 
> 赞同：1
> 
> 时间：2012-07-12T15:13:59.270
> 
> 标签：git

我有一些部署脚本可以自动将存储库克隆到本地目录。不幸的是，我还没有找到处理更新的好方法，所以我只是事先清除了本地目录。这显然是非常浪费的。

理想情况下，我想要一系列命令，以保证特定本地目录成为指定 repo/branch 的副本，并且所需的数据传输量最少。因此，如果 dir 已经在正确的 repo/branch 上，它将简单地更新它。如果它在正确的 repo 上，但不在正确的分支上，它只会切换到新的分支。

我确信有一种方法可以通过检查 .git 中的一些文件并根据找到的内容执行特定操作来做到这一点，但我希望有一种更简单的方法。

一个重要的注意事项是本地目录中的任何更改都可以始终被丢弃。

可能已经有一个问题可以回答这个问题，但我无法找到合适的措辞来找到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T15:23:32.207

```
$ git fetch <url> <branch>      # get the most up-to-date version of that branch
                                #  (only downloads needed objects)

$ git checkout -f FETCH_HEAD    # force the working tree to match fetched branch 
```

Note that this does leave old objects in the repo. If at any point you want to **irreversibly** delete the unreferenced objects and clean the repository, you can run

```
$ git reflog expire --expire=now --all
$ git gc --prune=now 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:30:03.150

> 一个重要的注意事项是本地目录中的任何更改都可以始终被丢弃。

所以你需要的第一件事是：

```
git stash
git stash drop 
```

> 如果目录已经在正确的仓库/分支上

我不确定您所说的“正确的回购”是什么意思，但我猜这将涉及检查`pwd`您想要的目录等`cd`。

然而，有趣的部分是分支。使用以下命令：

```
__git_ps1 "%s" 
```

您在当前存储库中获得了 git 的当前分支（如果不是 git 存储库，则没有）。.git 文件夹、裸存储库、合并中间等也有特殊输出。

然后，您可以使用此命令的输出检查您感兴趣的分支，以了解您是否在正确的分支上。虽然，如果您只是签出所需的分支，即使您已经在它上面，它也会简单得多。

# java - 如何从 EJB 计时器调用 @RolesAllowed 受保护方法？

> ID：11454993
> 
> 赞同：3
> 
> 时间：2012-07-12T15:14:00.503
> 
> 标签：java, glassfish, ejb-3.1

我有一个用 注释的方法`@RolesAllowed`，该方法需要从`@Schedule`位于另一个 Ejb 中的计时器 () 调用。但我只得到一个授权例外：`WARNUNG: javax.ejb.AccessLocalException: Client not authorized for this invocation`

```
 @RolesAllowed("user")
 @Stateless
 public class RatingService {
    public void recalculateRating() {...}
 }

 @Singleton
 @Startup     
 public class TimerService {

     @EJB private RatingService ratingService;

     @Schedule(minute = "0", hour = "*")
     public void timerTriggeredRecalculate() {        
          this.ratingService.recalculateRating();
     }
 } 
```

我接受这个异常，但是**如何`@RolesAllowed`从 Timer 调用受保护的方法？**

* * *

* * *

*我也尝试添加`@RunAs("user")`到`TimerService`类。但后来我得到了这个例外：*

```
SCHWERWIEGEND: SECEJB9000: Exception while running pre-invoke
java.lang.NullPointerException
    at java.util.Arrays$ArrayList.<init>(Arrays.java:3357)
    at java.util.Arrays.asList(Arrays.java:3343)
    at com.sun.enterprise.security.auth.realm.file.FileRealm.getGroupNames(FileRealm.java:291)
    at com.sun.enterprise.security.auth.login.LoginContextDriver.loginPrincipal(LoginContextDriver.java:294)
    at org.glassfish.ejb.security.application.EJBSecurityManager$2.run(EJBSecurityManager.java:825)
    at com.sun.enterprise.security.common.AppservAccessController.doPrivileged(AppservAccessController.java:61)
    at org.glassfish.ejb.security.application.EJBSecurityManager.loginForRunAs(EJBSecurityManager.java:823)
    at org.glassfish.ejb.security.application.EJBSecurityManager.preInvoke(EJBSecurityManager.java:791)
    at org.glassfish.ejb.security.application.EjbSecurityComponentInvocationHandler$1.beforePreInvoke(EjbSecurityComponentInvocationHandler.java:84)
    at org.glassfish.api.invocation.InvocationManagerImpl.preInvoke(InvocationManagerImpl.java:156)
    at com.sun.ejb.containers.AbstractSingletonContainer.createSingletonEJB(AbstractSingletonContainer.java:487)
    at com.sun.ejb.containers.AbstractSingletonContainer.access$100(AbstractSingletonContainer.java:79)
    at com.sun.ejb.containers.AbstractSingletonContainer$SingletonContextFactory.create(AbstractSingletonContainer.java:719)
    at com.sun.ejb.containers.AbstractSingletonContainer.instantiateSingletonInstance(AbstractSingletonContainer.java:451)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:216)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:177)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.doStartup(SingletonLifeCycleManager.java:155)
    at org.glassfish.ejb.startup.EjbApplication.start(EjbApplication.java:177)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662) 
```

*服务器是 Glassfish 3.1.2*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T14:38:05.683

您需要使用带注释的 EJB `@RunAs`。如果 timer 方法是`TimerService`EJB 公开的唯一方法，那么您可以`@RunAs`直接将其添加到该类。否则，您需要创建一个`PrivilegedRatingService`具有`@RunAs`.

（`TimerService`顺便说一句，考虑到与 . 的冲突，对于 EJB 类名可能是一个糟糕的选择`javax.ejb.TimerService`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:00:59.927

> 我还尝试将 @RunAs("user") 添加到 TimerService 类。但后来我得到了这个例外：..

该消息表明您尚未在文件领域中定义“用户”。例如，在 Glassfish 中，使用应用服务器控制台访问以下内容：

`Configuration->Security->Realms->file->Manage users`

并添加新用户“用户” - 错误消息应该消失。我有类似的问题，这就是解决方案，所以也许有帮助。

# .net - .Net：我的 RSA 密钥在 2012 年 8 月之后还能使用吗？

> ID：11454994
> 
> 赞同：8
> 
> 时间：2012-07-12T15:14:01.563
> 
> 标签：.net, cryptography, rsa, cryptoapi, rsacryptoserviceprovider

我刚刚阅读了这篇文章[RSA keys under 1024 bits are blocked](http://blogs.technet.com/b/pki/archive/2012/06/12/rsa-keys-under-1024-bits-are-blocked.aspx)，在我的 .NET 软件中我大量使用了 384bit 密钥。我的程序是否仍然能够使用 RSACryptoServiceProvider 从 MachineKeyStore 生成/存储/读取密钥？还是我会被迫发送补丁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T09:13:28.910

我收到了 Microsft (Kurt L Hudson) 的回复，这个更新应该只会影响链的构建，所以看起来 RSACryptoServiceProvider 将在 2012 年 8 月之后继续使用小密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:43:24.000

如果最小化签名大小是至关重要的，那么 RSA 是一个糟糕的选择。DSA 和[ECDSA](http://en.wikipedia.org/wiki/ECDSA)都产生更短的签名，其强度比 RSA 大得多。但是，DSA 或 ECDSA 都不会接近 RSA 384 的签名验证速度。

但是，如果您必须继续使用您拥有的密钥，那么您将不得不更改您的代码以避免使用 Microsoft 加密 API。例如，如果您使用 C#，则可以使用 Bouncycastle C# 库。最后，您可以就此向微软投诉。我怀疑它会有什么好处，但你总是可以尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:24:55.963

这是对评论中提出的问题的建议答案。

您可能会找到一种使用对称方法对客户端进行身份验证的方法。我假设您现在使用的是典型的 RSA 签名方案，其中消息哈希由客户端私钥签名，然后可以通过公钥进行验证。

您也许可以执行持久密钥的交换，然后使用该密钥而不是非对称密钥来加密消息摘要。您仍然可以保证发送消息的人知道密钥，尽管您无法验证消息是由客户端还是服务器发送的（因为两者都知道密钥）。如果客户端在身份验证期间挑战服务器，这将有助于防止中间人攻击（尽管客户端需要在本地嵌入服务器的公钥）

# ios - 如何从图像视图中显示的 plist 文件中检索图像数组？

> ID：11454998
> 
> 赞同：0
> 
> 时间：2012-07-12T15:14:29.113
> 
> 标签：ios, cocoa-touch

如何从 plist 检索图像数据并将该数据显示到图像视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:13:30.503

```
- (void)getImages {

    // Look in Documents for an existing plist file
    NSArray *paths = NSSearchPathForDirectoriesInDomains(
                                                         NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    myPlistPath = [documentsDirectory stringByAppendingPathComponent: 
                   [NSString stringWithFormat: @"%@.plist", plistName] ];
    [myPlistPath retain];

    // If it's not there, copy it from the bundle
    NSFileManager *fileManger = [NSFileManager defaultManager];
    if ( ![fileManger fileExistsAtPath:myPlistPath] ) {
        NSString *pathToSettingsInBundle = [[NSBundle mainBundle] 
                                            pathForResource:plistName ofType:@"plist"];
    }

    NSArray *paths = NSSearchPathForDirectoriesInDomains(
                                                         NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectoryPath = [paths objectAtIndex:0];
    NSString *path = [documentsDirectoryPath 
                      stringByAppendingPathComponent:@"myApp.plist"];
    NSMutableDictionary *plist = [NSDictionary dictionaryWithContentsOfFile: path];

    NSArray *imageArray = [plist objectForKey:@"imageArray"];

    for (NSString *imageString in imageArray) {
        DLog(@"Image Name: %@", imageString);
    }

} 
```

[从www.iphoneexamples.com](http://iphoneexamples.com)获取 plist 代码

# java - 在 Java 7 中关闭 ResultSet

> ID：11454999
> 
> 赞同：7
> 
> 时间：2012-07-12T15:14:31.487
> 
> 标签：java, jdbc

以下站点显示了使用 JDBC 的新“AutoClosable”功能：[链接](http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/jdbc_41.html)。该站点显示了语句将如何自动关闭，但结果集不在自动关闭的 try() 部分中。所以，我的问题是，我不需要直接在 Java 7 中关闭 ResultSets 吗？我一直使用这种模式：关闭结果集、关闭语句、关闭连接。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T15:21:58.413

从[ResultSet 的Javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)：

> 当生成它的 Statement 对象关闭、重新执行或用于从多个结果序列中检索下一个结果时，ResultSet 对象将自动关闭。