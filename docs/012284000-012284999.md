# StackOverflow 问答 12284000-12284999

# jquery - Ennui 的内容滑块：如何保持导航箭头可见

> ID：12284004
> 
> 赞同：0
> 
> 时间：2012-09-05T14:41:52.673
> 
> 标签：jquery, css

最近我一直在使用[Ennui 的 Content Slider](http://ennuidesign.com/demo/contentslider/)，因为它易于使用和编辑。

我不知道如何让左手箭头在最初和整个幻灯片中都出现，当你到达幻灯片结束时，右手箭头保持可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:15:18.240

你可以加

```
.cs_leftBtn, .cs_rightBtn {
    display: block !important;
    opacity: 1 !important;
} 
```

但问题是，如果用户单击幻灯片开头的左箭头或末尾的右箭头，则在页面刷新之前，幻灯片将不再起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:41:33.590

您还可以删除

```
if(b.attr('class')=='cs_leftBtn') {
    var thisBtn = $('#'+thisInstance+' .cs_leftBtn');
    var otherBtn = $('#'+thisInstance+' .cs_rightBtn');
} else {
    var thisBtn = $('#'+thisInstance+' .cs_rightBtn');
    var otherBtn = $('#'+thisInstance+' .cs_leftBtn');
}
if(m==0||m==x) {
    thisBtn.animate({ 'opacity':'0' }, o.speed, o.easing, function() { thisBtn.hide(); });
}
if(otherBtn.css('opacity')=='0') {
    otherBtn.show().animate({ 'opacity':'1' }, { duration:o.speed, easing:o.easing });
} 
```

和改变

```
.find('.cs_leftBtn')
    .css("opacity",0)
    .hide()
    .end() 
```

和

```
.find('.cs_leftBtn')
    .hide()
    .animate({ 'width':'show' }); 
```

(js/jquery.ennui.contentslider.js)

但不知道你是否也会遇到幻灯片停止工作的问题...

# c++ - 递归地构造一个 unsigned int 的可变参数模板

> ID：12284005
> 
> 赞同：3
> 
> 时间：2012-09-05T14:41:53.577
> 
> 标签：c++, templates, c++11, metaprogramming, variadic-templates

我在 C++ 2011 代码中需要一个棘手的东西。目前，我有这种元功能：

```
template<unsigned int N, unsigned int M> 
static constexpr unsigned int myFunction() 
```

此函数可以根据`N`和生成数字`M`。

我想用输入`N`和编写一个元函数`M`，它将通过递减递归构造一个可变参数模板`M`。例如，通过使用 调用此函数`M = 3`，它将构造一个称为`List`等于的可变参数模板：

```
List... = myFunction<N, 3>, myFunction<N, 2>, myFunction<N, 1>, myFunction<N, 0> 
```

怎么做（如果可能的话）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:31:35.647

使用现有的元组包生成器可能是最简单的：

```
// Idiomatic tuple pack generator using successor method
template<int... I> struct tuple_pack {
    using succ = tuple_pack<I..., sizeof...(I)>;
};
template<int N> struct make_tuple_pack {
    using type = typename make_tuple_pack<N - 1>::type::succ;
};
template<> struct make_tuple_pack<0> {
    using type = tuple_pack<>;
}; 
```

现在我们可以应用元组包生成器，委托给一个实现函数：

```
template<int N, int M, typename T> struct foo_impl {};
template<int N, int M, int... I> struct foo_impl<N, M, tuple_pack<I...>> {
    static void foo() {
        int arr[M] = { myFunction<N, M - I>()... };
    }
};
template<int N, int M> void foo() {
    foo_impl<N, M, typename make_tuple_pack<M>::type>::foo();
} 
```

如果您更喜欢函数参数推断而不是类模板专业化，这也可以写成：

```
template<int N, int M, int... I> void foo_impl(tuple_pack<I...>) {
    int arr[M] = { myFunction<N, M - I>()... };
}
template<int N, int M> void foo() {
    foo_impl<N, M>(typename make_tuple_pack<M>::type{});
} 
```

I had to specify the array size as `int arr[M]`; not sure whether that's required by the standard for pack expansion initializers or whether it's a bug in gcc; either way it's no big hassle.

# ajax - Ajax-solr 初始化加载

> ID：12284011
> 
> 赞同：0
> 
> 时间：2012-09-05T14:42:29.477
> 
> 标签：ajax, solr, init

我尝试使用 ajax-solr 和我的自动完成和结果工作。但我在第一次加载时遇到问题。我想删除所有索引上的第一个请求。因为我只想在我的页面上看到我的搜索栏。

没发现哪里有问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:47:43.553

如果您遵循 ajax-solr Reuters 教程，那么在初始化小部件等之后，您可能会有一个 Manager.doRequest() 调用。只需删除该行即可不发送第一个请求。

# ios - NSOperaionQueue 和 UIAlertView

> ID：12284016
> 
> 赞同：0
> 
> 时间：2012-09-05T14:42:48.183
> 
> 标签：ios, uialertview, nsoperation, nsoperationqueue

问题是，如果我创建并显示两个警报 - 第二个将覆盖第一个，并在它关闭后首先显示。所以不漂亮。

我正在尝试使用 NSOperationQueue 创建队列警报。您可以添加一些警报，它们会显示要关闭的序列。但我不能这样做会是我添加的操作是按顺序执行的，等待前一个。它们是并行执行的。

警报操作.h

```
#import <Foundation/Foundation.h>

@interface AlertOperation : NSOperation<UIAlertViewDelegate>

@property (nonatomic,assign) BOOL isFinishedAlert;

- (AlertOperation *)initWithAlert:(UIAlertView *)alert;

@end 
```

警报操作.m

```
#import "AlertOperation.h"

@interface AlertOperation()
{
    UIAlertView *_alert;
}

@end

@implementation AlertOperation

@synthesize isFinishedAlert     = _isFinishedAlert;

- (AlertOperation *)initWithAlert:(UIAlertView *)alert
{
    self = [super init];

    if (self)
    {
        _alert = alert;
        _alert.delegate = self;
        [_alert show];
    }

    return self;
}

- (void) main
{
    _isFinishedAlert = NO;

    do {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
    } while (!_isFinishedAlert);
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    _isFinishedAlert = YES;
}

- (BOOL) isConcurrent
{
    return NO;
}
@end 
```

这是运行代码

```
UIAlertView *u1 = [[UIAlertView alloc] initWithTitle:@"" 
message:@"Hello i am first alert" delegate:nil 
cancelButtonTitle:@"OK" otherButtonTitles:nil];

UIAlertView *u2 = [[UIAlertView alloc] initWithTitle:@"" 
message:@"Hello i am second alert" delegate:nil 
cancelButtonTitle:@"OK" otherButtonTitles:nil];

NSOperation *alertOp1 = [[AlertOperation alloc] initWithAlert:u1];
NSOperation *alertOp2 = [[AlertOperation alloc] initWithAlert:u2];

alertsQueue = [[NSOperationQueue alloc] init];
[alertsQueue setMaxConcurrentOperationCount:1];

[alertsQueue addOperation:alertOp1];
[alertsQueue addOperation:alertOp2]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:14:34.787

我将 [_alert show] 移至 -(void)main 方法，它起作用了！谢谢你，@phix23 的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:46:10.717

让自己更轻松。创建一个可变数组。当您有新的警报要显示时，然后将它们推送到阵列上。每次警报完成时（获取其委托消息），然后将下一个警报分派到主队列：

```
NSMutableArray *alerts;

... end of Alert Delegate message
if([alert count]) {
  UIAlert *alrt = [alerts objectAtIndex:0];
  [alerts removeObjectAtIndex:0];
  dispatch_async(dispatch_get_main_queue(), ^{ [alrt show]; } );
} 
```

# c# - 添加包含 Ajax Toolkit 对象的用户控件

> ID：12284018
> 
> 赞同：0
> 
> 时间：2012-09-05T14:42:55.290
> 
> 标签：c#, asp.net, ajax

我创建了一个用户控件：

```
<ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">  
</ajaxToolkit:ToolkitScriptManager>

   <table>
   <tr>
    <td>
      Start Date   
    </td>   
    <td>
      <asp:TextBox ID="StartDateTextBox" runat="server"></asp:TextBox>
      <ajaxToolkit:CalendarExtender ID="StartCal" OnClientDateSelectionChanged="dateSelectionChanged"
                runat="server" TargetControlID="StartDateTextBox">
      </ajaxToolkit:CalendarExtender>
      <asp:Button ID="PostBackButton" runat="server" Text="Button" Style="display: none"
                OnClick="PostBackButton_Click" />
    </td>
    <td>
       End Date
    </td>
    <td>
      <asp:TextBox ID="EndDateTextBox" runat="server"></asp:TextBox>

      <ajaxToolkit:CalendarExtender ID="EndCal" runat="server" OnClientDateSelectionChanged="dateSelectionChanged"
                TargetControlID="EndDateTextBox">
      </ajaxToolkit:CalendarExtender>
    </td>
    </tr>
    <tr>
    <td colspan="4">
      <asp:Chart ID="PlantRestarts" runat="server" Height="400px" Width="800px">
      <Series>
          <asp:Series Name="Series1" ChartType="Bar" Palette="BrightPastel" ChartArea="MainChartArea">
          </asp:Series>
      </Series>
      <ChartAreas>
          <asp:ChartArea Name="MainChartArea" Area3DStyle-Enable3D="true">
          </asp:ChartArea>
      </ChartAreas>
      </asp:Chart>
    </td>
    </tr>
    <tr>
    <td align="center" colspan="4">
      <asp:Button ID="PlantRestartsButton" runat="server" Text="Export To CSV" CommandName="Export"
                CommandArgument="PlantRestarts" OnClick="PlantRestartAttemptsButton_Click" />
    </td>
    </tr>
</table> 
```

我有一个使用此控件的简单页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="CustomTestPage.aspx.cs" Inherits="TrendReporting.CustomTestPage" %>
<%@ Register TagPrefix="UserCtrl" TagName="CustomControl"  Src="Controls/TestUserControl.ascx" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script type="text/javascript">

    function getSlide() {
        var i, x, y, ARRcookies = document.cookie.split(";");
        for (i = 0; i < ARRcookies.length; i++) {
            x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
            y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
            x = x.replace(/^\s+|\s+$/g, "");
            if (x == "slide") {
                return y;
            }
        }
    }

    var isPostBack = false;
    var current = getSlide();
    var slider2 = ['Books', 'Attempts', 'Attempt Book Comparison', 'Business Unit', 'Trend'];
    function formatText(index, panel) {
        return slider2[index - 1];
    }

    $(function () {

        if (!isPostBack) {
            slide = 1;
        }

        $('#slider2').anythingSlider({

            width: 800,       // if resizeContent is false, this is the default width  if panel size is not defined
            height: 400,       // if resizeContent is false, this is the default height if panel size is not defined
            buildArrows: true,
            startPanel: current,
            resizeContents: false,     // If true, solitary images/objects in the panel will expand to fit the viewport
            delay: 7000,    //7 seconds before transitioning to next slide
            autoPlay: true,     // This turns off the entire slideshow FUNCTIONALY, not just if it starts running or not
            navigationFormatter: formatText, // Format navigation labels with text
            forwardText: "&raquo;",
            backText: "&laquo;",
            onSlideComplete: function () {
                document.cookie = "slide=" +    $('#slider2').data('AnythingSlider').currentPage;
            }
        })
    });
</script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<ul id="slider2">
 <li class="panel1" style="width: 800px; height: 400px">
    <UserCtrl:CustomControl runat="server" />
</li>
</ul> 
```

当我加载页面时，什么都没有显示，只是一个空白页面。问题是它从ajax toolscriptmanager 将一个脚本标签注入到<li> 标签中。源代码显示了这一点：

```
 <ul id="slider2">
 <li class="panel1" style="width: 800px; height: 400px">
    <script type="text/javascript">
 //<![CDATA[
   Sys.WebForms.PageRequestManager._initialize('ctl00$MainContent$ctl00$ToolkitScriptManager1', 'ctl01', [], [], [], 90, 'ctl00');
 //]]>
 </script>

<table>
   <tr>
        <td>
            Start Date
        </td>
        <td>
            <input name="ctl00$MainContent$ctl00$StartDateTextBox" type="text" id="MainContent_ctl00_StartDateTextBox" />

            <input type="submit" name="ctl00$MainContent$ctl00$PostBackButton" value="Button" id="MainContent_ctl00_PostBackButton" style="display: none" />
        </td>
        <td>
            End Date
        </td>
        <td>
            <input name="ctl00$MainContent$ctl00$EndDateTextBox" type="text" id="MainContent_ctl00_EndDateTextBox" />

        </td>
    </tr>
    <tr>
        <td colspan="4">
            <img id="MainContent_ctl00_PlantRestarts" src="/ChartImg.axd?i=chart_bbf484b6c44a4372abba2bb2591a3fb6_5.png&amp;g=dbfe90c2079e4257937543c8dc544c65" alt="" style="height:400px;width:800px;border-width:0px;" />
        </td>
    </tr>
    <tr>
        <td align="center" colspan="4">
            <input type="submit" name="ctl00$MainContent$ctl00$PlantRestartsButton" value="Export To CSV" id="MainContent_ctl00_PlantRestartsButton" />
        </td>
    </tr>
</table>

</li>
</ul> 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:29:24.300

我不使用`ToolkitScriptManager`，但我经常`ScriptManager`在我的网站上使用通用的 ajax 功能。使用`ScriptManager`，我通常将它放在 MasterPage 中，因为在任何特定页面上只能有一个实例，并且通过将它放在表单标记中它不会干扰任何 HTML 呈现。

# c# - 处理 SQL Azure 数据库副本

> ID：12284023
> 
> 赞同：0
> 
> 时间：2012-09-05T14:43:12.550
> 
> 标签：c#, .net, azure, azure-sql-database

我正在编写一个服务，通过发出以下命令每隔一段时间创建某个 SQL Azure db 的副本：

```
CREATE DATABASE [copy] AS COPY OF [original] 
```

然后我会定期检查 sys.dm_database_copies 表以查看复制是否完成。基本上，如果 dm_database_copies 条目不存在，则复制完成。

我担心的是：如果复制失败了怎么办？dm_database_copies 条目是否被删除？我的感觉是不应该被删除，因为它包含有关错误的信息，但我不能确定，因为我实际上从未有过数据库复制失败。

所以底线问题是：特定数据库 id 的 dm_database_copies 条目是否会在成功复制之外的任何其他内容上被删除？

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:26:56.113

我在复制大型数据库（> 100 GB）时失败，并且记录没有被删除。

从[文档](http://msdn.microsoft.com/en-us/library/windowsazure/ff951634.aspx)中我读到：

> 当数据库复制成功完成并且新数据库变为 ONLINE 时，会自动删除 sys.dm_database_copies 视图中的行。

因此，根据我的经验，它隐含地指出，如果复制过程失败，则不会删除该行。

# iphone - 目标c：fb发表评论错误

> ID：12284024
> 
> 赞同：4
> 
> 时间：2012-09-05T14:43:13.747
> 
> 标签：iphone, objective-c, facebook, comments, http-post

我创建了一个 ios 应用程序，想对一篇文章和这篇文章的评论发表评论。但我无法让它工作。

*   评论文章：我使用在“对象调试”页面上找到的 post_id 对图表“post_id/comments”进行测试。当我通过 ios SDK 发布时出现错误“500”并且

    > {"error":{"message":"发生未知错误。","type":"OAuthException","code":1}}

当我发布时`https://graph.facebook.com/{post_id}/comments`

*   对评论发表子评论：我使用了图形“commentID/comments”，当我通过 ios sdk 发布时出现错误 400，并且

    > {"error":{"message":"(#100) 无效的 fbid。","type":"OAuthException","code":100}}

当我发布到`https://graph.facebook.com/{commentID}/comments`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:07:41.770

我认为您所做的是正确的，但您需要遇到的问题是身份验证。

在发表评论或发表任何帖子之前，您必须先登录，否则您的会话必须处于活动状态。检查天气您的会话是否处于活动状态。

首先调用`[myDelegate authenticateFacebookUser];`，然后调用方法来发表评论。

# algorithm - 在图像中合并一组矩形的最佳方法是什么？

> ID：12284025
> 
> 赞同：9
> 
> 时间：2012-09-05T14:43:14.563
> 
> 标签：algorithm, image-processing, geometry

这不是作业问题:)

我有一组散布在图像上的矩形。我想合并（创建一个联合）每组相交的矩形。如果一个矩形不与它的邻居相交，它保持不变。

问题是合并的矩形可以与以前没有考虑过的矩形相交；合并的矩形也可以与新合并的矩形相交。我想抓住那些案件。

因此，在我看来，它需要是迭代的（尝试每个矩形与集合中的每个其他矩形）和递归（再次尝试每个合并的矩形对集合，包括合并的矩形）。

我该怎么办？我正在使用 Java，但这更像是一个算法问题，而不是面向语言的问题。

谢谢！

编辑：添加相关代码以更好地说明我现在处理它的糟糕方式。

```
public static List<BinaryRegion> mergeRegions(List<BinaryRegion> regions)
{
    List<BinaryRegion> merged = new ArrayList<BinaryRegion>();
    geoModel = new GeometryFactory();

    Polygon polys[] = new Polygon[regions.size()];
    for (int i = 0; i < regions.size(); i++)
    {
        Polygon p = convertRectangleToPolygon(regions.get(i)
                .getBoundingBox());
        polys[i] = p;
    }

    System.out.println("Converted " + regions.size() + " polys");

    for (int i = 0; i < regions.size(); i++)
    {
        System.out.println("Sending in poly " + i);
        ArrayList<Polygon> result = mergePoly(polys[i], polys);
        System.out.println("After run, size=" + result.size());
    }
    return merged;

}

private static ArrayList<Polygon> mergePoly(Polygon p, Polygon[] polys)
{
    ArrayList<Polygon> merges = new ArrayList<Polygon>();

    for (int i = 0; i < polys.length; i++)
    {
        if (p.equals(polys[i]))
            System.out.println("found the exact match at " + i);
        else if (p.intersects(polys[i]))
        {
            System.out.println("Found intersection at " + i);
            System.out.println("Other poly is area "+polys[i].getArea());
            Polygon u = (Polygon) p.union(polys[i]);
            System.out.println("Merge size="+u.getArea());
            merges.add(u);
        }
        else
            merges.add(polys[i]);
    }
    return merges;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:45:44.423

不完全确定这种嵌套迭代方法是否真的是要走的路（特别是因为我看不到您在调用 后如何处理合并区域`mergePoly`）。与所有其他多边形相比，不是一次使用一个多边形，为什么不保留中间步骤并重新运行合并，直到不再有交叉点？类似于以下内容：

```
private static ArrayList<Polygon> mergePoly(Polygon[] polys)
{
    List<Polygon> polygons = new ArrayList<Polygon>(Arrays.asList(polys));
    boolean foundIntersection = false;
    do
    {
        foundIntersection = false;
        for (int i = 0; i < polygons.size(); i++)
        {
            Polygon current = polygons.get(i);
            for (int j = i + 1; j < polygons.size(); j++)
            {
                if (current.intersects(polygons.get(j)))
                {
                    foundIntersection = true;
                    current = (Polygon)current.union(polygons.remove(j--));
                    System.out.println("Merge size="+u.getArea());
                }
            }
            polygons.set(i, current);
        }
    } while(foundIntersection);
    return polygons;
} 
```

自从我使用 Java 以来已经有一段时间了，但是逻辑是不言自明的。您执行多边形的两次迭代。外部迭代是您的“当前”多边形，您将合并所有内部多边形（随着您的进行，将它们从集合中删除）。在每次外部迭代之后，您只需使用（可能）合并的多边形设置该索引处的元素，然后移动到系列中的下一个多边形。您将继续这样做，直到您不再获得合并。请记住，这是一个非常幼稚的实现，您最好将其分成“两半”并合并这些较小的子集（想想合并排序）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:05:16.790

You can use the sweep line algorithm to find the intersections of rectangles ([example1](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lineSweep), [example2](http://www.cs.princeton.edu/~rs/AlgsDS07/17GeometricSearch.pdf)) and the [union-find algorithm](http://en.wikipedia.org/wiki/Disjoint-set_data_structure) to effectively merge sets of rectangles.

# google-visualization - 使用 hAxis.logScale 的 Google 条形图 - 网格线定期出现

> ID：12284026
> 
> 赞同：2
> 
> 时间：2012-09-05T14:43:14.483
> 
> 标签：google-visualization

我正在创建一个谷歌条形图并且数据中有一个异常值。我想使用 logscale 选项来显示数据 - 否则，大数据结果会压倒较小的数据。对数刻度有效，但恐怕用户不会注意到它是对数刻度的事实，因为网格线是定期间隔的。如果仔细查看这些网格线上的标签，他们会意识到比例正在发生变化，但通常在对数刻度图表上，网格线会开始靠近（至少在对数刻度绘图纸上）。

我浏览了这些选项，找不到任何有用的东西。我可以指定 hAxis 中每条网格线的位置吗？有什么想法吗？

# java - 如何在 Java 中使用 Scala 单例对象？

> ID：12284028
> 
> 赞同：37
> 
> 时间：2012-09-05T14:43:18.193
> 
> 标签：java, scala, scala-java-interop

我有一个需要在 Java 类中使用的 Scala 对象。

这是 Scala 对象

```
object Person {
  val MALE = "m"
  val FEMALE = "f"
} 
```

如何在 Java 中使用这个 Scala 对象？

到目前为止，我已经尝试了以下但没有成功（编译错误）：

*   `Person.MALE()`//返回一个无用的字符串，因为我想要实际的 Person 对象

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-05T14:50:03.353

使用`Person$.MODULE$`. 也可以看看

*   [如何在 Java 中传递 Scala 对象引用？](https://stackoverflow.com/questions/3845737/how-can-i-pass-a-scala-object-reference-around-in-java)
*   [单例作为 Scala 中的综合类？](https://stackoverflow.com/questions/5721046/singletons-as-synthetic-classes-in-scala)

* * *

**编辑**：一个工作示例（我检查过，它编译并工作）：Scala：

```
object Person {
  val MALE = "m";
} 
```

Java对应：

```
public class Test {
    Person$ myvar = Person$.MODULE$;

    public static void main(String argv[]) {
        System.out.println(new Test().myvar.MALE());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-19T05:27:18.553

如果您使用 a `package object`，访问权限会有所不同

斯卡拉：

```
package my.scala.package

package object Person {
  val MALE = "m";
} 
```

Java对应：

```
public static void main() {
  System.out.println(my.scala.package.Person.package$.MODULE$.MALE);
} 
```

# android - Android GPS onLocationChanged 从未调用过

> ID：12284029
> 
> 赞同：3
> 
> 时间：2012-09-05T14:43:19.260
> 
> 标签：android, gps, locationlistener

我有一个 android 应用程序，我想获取位置。

为此，我遵循 android 文档，但它不起作用。永远不会调用 onLocationChanged 方法。

```
public class GPSTestActivity extends Activity
{   
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
    {
        Toast.makeText(this, "GPS available", 3000).show();
    }
    else
    {
        Toast.makeText(this, "GPS not available", 3000).show();
    }

    LocationListener locationListener = new LocationListener()
    {
        public void onLocationChanged(Location location)
        {
            System.out.println("RECEIVED LOCATION");
        }

        public void onStatusChanged(String provider, int status, Bundle extras)
        {
        }

        public void onProviderEnabled(String provider)
        {
        }

        public void onProviderDisabled(String provider)
        {
        }

    };

    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
}
} 
```

在 AndroidManifest.mf 我已经包含了权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

我正在尝试使用 DDMS 控制台中的模拟器测试应用程序。我设置了经度和纬度，然后按下发送按钮，但是没有调用 onLocationChanged 方法。

我做错了什么？

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:55:47.090

拨打电话：

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 10f, locationListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:17:26.333

我发现了问题。

我正在使用 Android 2.3.3 进行测试。并且有一个错误。使用 Google API（级别 10）进行测试非常完美。

# css - 如何查找与正则表达式不匹配的所有内容

> ID：12284037
> 
> 赞同：1
> 
> 时间：2012-09-05T14:43:43.457
> 
> 标签：css, regex, regex-negation

我想在数千个 HTML 代码中搜索高度、宽度或任何其他 CSS 的不良做法。

例如，我想获取所有未提供单位高度的地方，例如`height:40`应该找到但`height:40px`不应该找到。

为此，我正在使用搜索程序代理 ransack，我可以在其中放置正则表达式以在文件中进行搜索。

目前我的正则表达式是：

```
(height:)[\s]*[0-9]*\.?[0-9]+(px) 
```

这会找到所有类似的东西`height:40px`。（稍后我想添加宽度或其他东西）

我的问题是如何在所有这些之上做一个NOT？

或者有没有其他好的应用程序来搜索文件中的正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:48:46.803

使用负前瞻`(?!regex)`，例如：

```
height:\s*\d+(?:\.\d+)?(?!px|\d) 
```

`\d`需要防止回溯备选方案匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:45:03.833

以这种方式使用负前瞻：

```
(?!height:\s*\d+(?:\.\d+)?px)height:\s*\d+(?:\.\d+)? 
```

考虑到您正在使用 css，您可能希望将其他单位作为有效单位，如`pt`, `em`,`%`等... 就像下面的正则表达式

```
(?!height:\s*\d+(?:\.\d+)?(?:px|pt|em|%|cm|mm|in|ex|pc))height:\s*\d+(?:\.\d+)? 
```

您可以通过[Rubular对其进行测试](http://rubular.com/r/HhxmcY8MD1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:49:23.077

考虑使用已经执行此操作的程序，并添加您自己的规则。通常，修复源代码的做法称为“linting”。因此，您可以快速找到类似 CSSLint 之类的东西，它是开源的并允许自定义规则：

[https://github.com/stubbornella/csslint/wiki/Rules](https://github.com/stubbornella/csslint/wiki/Rules)

[http://csslint.net/](http://csslint.net/)

# android - HTML5 视频无法在 android 的默认浏览器中正确加载

> ID：12284041
> 
> 赞同：0
> 
> 时间：2012-09-05T14:43:51.547
> 
> 标签：android, html, video

我正在开发一个使用 HTML5 视频标签的网页。当我在默认浏览器中的华硕 eee pad 转换器中加载页面时，我看到一个灰色区域，中间有一个图标，而不是视频。

然后我必须单击视频区域才能加载它，然后才能播放视频。

这只发生在默认浏览器中。我已经在 Chrome、Firefox 和 Opera 上尝试过它，它总是可以正常工作，而无需我点击视频区域来加载它。

我的问题是。为什么会发生这种情况，无论如何我可以纠正这个问题吗？

我试过使用属性自动缓冲和预加载。

**更新：**

我设法解决了。我在页面加载时使用了 Javascript，视频不仅加载而且播放。所以我会看到一个灰色的矩形，我必须点击来加载视频的问题就解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:00:49.867

恐怕您无能为力，默认的 Android 浏览器对 HTML5 视频非常挑剔，您很幸运可以播放它！

# html - 如何将页面分成4等份？

> ID：12284044
> 
> 赞同：34
> 
> 时间：2012-09-05T14:44:05.803
> 
> 标签：html, css

我想将我的页面分成四个相等的部分，每个部分的高度和宽度都相同*(50-50%)*。

我不想使用 JavaScript。如果调整浏览器窗口的大小，我希望块*（`<div>`s）*自动*（并且相对）调整大小。*

我已经很长时间没有使用 CSS 了。我不知道如何处理这个。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-05T14:49:03.993

演示在[http://jsfiddle.net/CRSVU/](http://jsfiddle.net/CRSVU/)

```
html,
body {
  height: 100%;
  padding: 0;
  margin: 0;
}

div {
  width: 50%;
  height: 50%;
  float: left;
}

#div1 {
  background: #DDD;
}

#div2 {
  background: #AAA;
}

#div3 {
  background: #777;
}

#div4 {
  background: #444;
}
```

```
<div id="div1"></div>
<div id="div2"></div>
<div id="div3"></div>
<div id="div4"></div>
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-05T15:31:29.353

如果您想控制它们与源代码顺序分开的位置：

```
html, body { height: 100%; margin: 0; padding: 0 }

div { position: fixed; width: 50%; height: 50% }

#NW { top: 0;   left: 0;   background: orange }
#NE { top: 0;   left: 50%; background: blue }
#SW { top: 50%; left: 0;   background: green }
#SE { top: 50%; left: 50%; background: red }
```

```
<div id="NW"></div>
<div id="NE"></div>
<div id="SE"></div>
<div id="SW"></div>
```

[JSFiddle 演示](http://jsfiddle.net/NmL2W/)

注意：如果你想在你的区域上填充，你需要设置[`box-sizing`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)为`border-box`：

```
div {
  /* ... */
  padding: 1em;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
} 
```

…否则你的“50%”宽度和高度变成“50% + 2em”，这将导致视觉重叠。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T20:58:32.337

这里有一些很好的答案，但只是添加了一种不受边框和填充影响的方法：

```
html, body { width: 100%; height: 100%; padding: 0; margin: 0 }

div { position: absolute; padding: 1em; border: 1px solid #000 }

#nw { background: #f09; top: 0;   left: 0;   right: 50%; bottom: 50% }
#ne { background: #f90; top: 0;   left: 50%; right: 0;   bottom: 50% }
#sw { background: #009; top: 50%; left: 0;   right: 50%; bottom: 0}
#se { background: #090; top: 50%; left: 50%; right: 0;   bottom: 0}
```

```
<div id="nw">test</div>
<div id="ne">test</div>
<div id="sw">test</div>
<div id="se">test</div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-03T02:31:18.663

我不想为`<body>`标签和`<html>`标签添加样式。

```
.quodrant{
    width: 100%;
    height: 100vh;
    margin: 0;
    padding: 0;
}

.qtop,
.qbottom{
    width: 100%;
    height: 50vh;
}

.quodrant1,
.quodrant2,
.quodrant3,
.quodrant4{
    display: inline;
    float: left;
    width: 50%;
    height: 100%;
}

.quodrant1{
    top: 0;
    left: 50vh;
    background-color: red;
}

.quodrant2{
    top: 0;
    left: 0;
    background-color: yellow;
}

.quodrant3{
    top: 50vw;
    left: 0;
    background-color: blue;
}

.quodrant4{ 
    top: 50vw;
    left: 50vh;
    background-color: green;
}
```

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link type="text/css" rel="stylesheet" href="main.css" />
</head>
<body>

<div class='quodrant'>
    <div class='qtop'>
        <div class='quodrant1'></div>
        <div class='quodrant2'></div>
    </div>
    <div class='qbottom'>
        <div class='quodrant3'></div>
        <div class='quodrant4'></div>
    </div>
</div>

<script type="text/javascript" src="main.js"></script>
</body>
</html>
```

或者让它看起来更好。

```
.quodrant{
    width: 100%;
    height: 100vh;
    margin: 0;
    padding: 0;
}

.qtop,
.qbottom{
    width: 96%;
    height: 46vh;
}

.quodrant1,
.quodrant2,
.quodrant3,
.quodrant4{
    display: inline;
    float: left;
    width: 46%;
    height: 96%;
    border-radius: 30px;
    margin: 2%;
}

.quodrant1{
    background-color: #948be5;
}

.quodrant2{
    background-color: #22e235;
}

.quodrant3{
    background-color: #086e75;
}

.quodrant4{ 
    background-color: #7cf5f9;
}
```

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link type="text/css" rel="stylesheet" href="main.css" />
</head>
<body>

<div class='quodrant'>
    <div class='qtop'>
        <div class='quodrant1'></div>
        <div class='quodrant2'></div>
    </div>
    <div class='qbottom'>
        <div class='quodrant3'></div>
        <div class='quodrant4'></div>
    </div>
</div>

<script type="text/javascript" src="main.js"></script>
</body>
</html>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T14:51:41.387

试试这个......显然你需要将每个 div 设置为 25%。然后，您需要根据需要添加您的内容 :) 希望对您有所帮助。

```
body {
  margin: 0;
  padding: 0;
  height: 100%;
}

#top_div {
  height: 25%;
  width: 100%;
  background-color: #009900;
  margin: auto;
  text-align: center;
}

#mid1_div {
  height: 25%;
  width: 100%;
  background-color: #990000;
  margin: auto;
  text-align: center;
  color: #FFFFFF;
}

#mid2_div {
  height: 25%;
  width: 100%;
  background-color: #000000;
  margin: auto;
  text-align: center;
  color: #FFFFFF;
}

#bottom_div {
  height: 25%;
  width: 100%;
  background-color: #990000;
  margin: auto;
  text-align: center;
  color: #FFFFFF;
}
```

```
<div id="top_div">Top- height is 25% of window height</div>
<div id="mid1_div">Middle 1 - height is 25% of window height</div>
<div id="mid2_div">Middle 2 - height is 25% of window height</div>
<div id="bottom_div">Bottom - height is 25% of window height</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-03T07:44:17.783

与其他帖子类似，但有一个重要区别是在 div 中进行这项工作。更简单的答案不是很容易复制粘贴，因为它们直接修改 div 或在整个页面上绘制。

这里的关键是包含 div 的分隔框具有相对定位，允许它与其他元素很好地位于您的文档中，而其中的四分之一具有绝对定位，使您可以在包含 div 内进行垂直/水平控制。

作为奖励，文本响应地以四分之一为中心。

HTML：

```
<head>
  <meta charset="utf-8">
  <title>Box model</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h1 id="title">Title Bar</h1>
  <div id="dividedbox">
    <div class="quarter" id="NW">
      <p>NW</p>
    </div>
    <div class="quarter" id="NE">
      <p>NE</p>
    </div>
    <div class="quarter" id="SE">
      <p>SE</p>
    </div>​
    <div class="quarter" id="SW">
      <p>SW</p>
    </div>
  </div>
</body>

</html> 
```

CSS：

```
html, body { height:95%;} /* Important to make sure your divs have room to grow in the document */
#title { background: lightgreen}
#dividedbox { position: relative; width:100%; height:95%}   /* for div growth */
.quarter {position: absolute; width:50%; height:50%;  /* gives quarters their size */
  display: flex; justify-content: center; align-items: center;} /* centers text */
#NW { top:0;    left:0;     background:orange;     }
#NE { top:0;    left:50%;   background:lightblue;  }
#SW { top:50%;  left:0;     background:green;      }
#SE { top:50%;  left:50%;   background:red;        } 
```

[http://jsfiddle.net/og0j2d3v/](http://jsfiddle.net/og0j2d3v/)

# mysql - MYSQL JOIN 语法 如何连接三个表

> ID：12284045
> 
> 赞同：1
> 
> 时间：2012-09-05T14:44:07.630
> 
> 标签：mysql, join, syntax

下面的查询做我想要的。它返回 users 表中的所有结果，然后如果在 details 表中匹配，则返回相关数据

用户

```
id|username 
```

细节

```
id|userid|firstname|lastname

$sql = "SELECT u.*, d.*
FROM `users` u
LEFT JOIN `details` d on
u.id = d.userid
ORDER BY $strorder"; 
```

但是，当我尝试加入一个我想做同样事情的附加表时——返回用户表的所有结果，如果第三个表中有匹配项，则返回相关数据（此用户的总关注者） --它只返回一条记录。

第三张桌子

跟随

```
id|followerid|followedid

$sql = "SELECT u.*, d.*, COUNT(f.id)
FROM `users` u
LEFT JOIN `details` d on
u.id = d.userid
LEFT JOIN `follow` f on
u.id = f.followedid
ORDER BY $strorder"; 
```

谁能看到我做错了什么？在此先感谢您的任何建议。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:50:01.690

尽量避免 * 选择字段，分组数据会更清晰（即使 mysql 非常允许分组）。

当您有一个聚合函数（如 COUNT、SUM）时，其他“非聚合”请求字段应位于 GROUP BY 子句中。

Mysql 不会强迫您对所有字段进行 GROUP BY，但是...我认为“尽可能 ANSI”是一个很好的习惯（当您使用另一个 DBMS 时很有用）

```
SELECT u.id, u.username, d.firstname, d.lastname, count(*) as numberfollowers
FROM user u
LEFT JOIN details d on u.id = d.userid
LEFT JOIN follow f on u.id = f.followedid
GROUP BY u.id, u.username, d.firstname, d.lastname --or just GROUP BY u.id with Mysql
ORDER BY count(*) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:50:12.603

COUNT 是一个聚合函数，当与其他列一起选择时，需要您按选择列表中的其他列对结果进行分组。

您应该使用要从用户和详细信息中选择的列重写查询，并按这些列分组。

# javascript - 带有 Request.Form 的 JScript 数组

> ID：12284047
> 
> 赞同：1
> 
> 时间：2012-09-05T14:44:10.317
> 
> 标签：javascript, arrays, asp-classic, jscript, serverside-javascript

我有一个可能很愚蠢的问题，但我无法让它工作......

我正在提交一个包含如下输入的表单：

```
<input type="hidden" id="hidden0" name="Options2" value="0" />
<input type="hidden" id="hidden1" name="Options2" value="30" />
<input type="hidden" id="hidden2" name="Options2" value="4" />
<input type="hidden" id="hidden3" name="Options2" value="-1" />
<input type="hidden" id="hidden4" name="Options2" value="-1" />
<input type="hidden" id="hidden5" name="Options2" value="-1" />
<input type="hidden" id="hidden6" name="Options2" value="-1" />
<input type="hidden" id="hidden7" name="Options2" value="-1" /> 
```

请注意，这 8 个输入是动态创建的。单击提交时，我会使用 name="Options" 动态创建所有输入，并将这些值放入一些常规输入中。

```
var inputs = document.getElementsByName("Options"+cpt);
for( var g = 0; g < 8; g++ )
{
    document.all.Options[g].value = inputs[g].value;
} 
```

当我收到表格时，我得到了这一行：

```
var arrayOption = Request.Form("Options"); 
```

如果我 Response.Write(arrayOption)，我可以看到结果：0、30、4、-1 等...我试图在这样的循环中获取所有值：

```
for (var k = 0; k < arrayOption.count; k++) {
    Response.Write(arrayOption[k]);
} 
```

在这种情况下，arrayOption[k] 是未定义的，我不知道为什么。我还注意到 arrayOption.length 不起作用（这就是我使用 .count 的原因）。看起来arrayOption不是一个真正的数组，所以我尝试拆分，但是Object不支持这个属性或方法。这一切有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:47:34.967

好吧，这*看起来*像 ASP Classic + 服务器端 JScript，所以你需要一个`Enumerator()`遍历集合，例如

```
for (var e = new Enumerator(Request.Form); !e.atEnd(); e.moveNext())
     Response.Write(e.item() + "=" + Request.Form(e.item()) + "<br>"); 
```

枚举所有帖子数据

# html - 是否可以有两个可排序的 div 句柄？

> ID：12284049
> 
> 赞同：0
> 
> 时间：2012-09-05T14:44:20.677
> 
> 标签：html, css, jquery-ui

```
$( ".selector" ).sortable({ handle: '.panel' }); 
```

我还希望我的`.panel-text`css 类充当该选择器可排序的句柄。

如果有可能怎么做？提前致谢..

我最后在这里找到了解决方案：[Jquery Draggable with more than one handle](https://stackoverflow.com/questions/435446/jquery-draggable-with-more-than-one-handle) 以防万一有人想使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:50:12.213

您可以将`.panel`类添加到`.panel-text`元素。

或者，更好的是，`.handler`为所有应该作为处理程序的元素分配一个类，然后像这样重写你的行：

```
 $( ".selector" ).sortable({ handle: '.handler' }); 
```

# erlang - 如何正确使用 rpc:pmap？

> ID：12284052
> 
> 赞同：2
> 
> 时间：2012-09-05T14:44:27.927
> 
> 标签：erlang, rpc, pmap

我在模块`rpc`函数[pmap](http://www.erlang.org/doc/man/rpc.html#pmap-3)中找到了。我在尝试使用它时卡住了。

第一个问题 - 它是否需要与其他节点连接，或者它会像`lists:map`没有与其他节点的连接一样执行？

我尝试在`pmap`不连接其他节点的情况下执行，但出现异常：

```
7> rpc:pmap( { erlang, '+' }, [], [[1,1],[2,3]] ).          
** exception exit: badrpc
     in function  rpc:check/2 (rpc.erl, line 745) 
```

之后 - 我启动了另一个本地节点并将其与 current. 但仍然得到同样的错误。

请告诉我如何`rpc:pmap`正确使用。

谢谢

**PS** 以下代码可以正常工作（返回结果 3）：

```
70> erlang:apply( erlang, '+', [1,2] ).
3
71> erlang:'+'(1,2).
3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T06:37:27.337

rpc:map({Module, Function},ExtraArgs,List1) 对 List1 中的每个元素 Elem 并行计算 apply(Module, Function, [Elem|ExtraArgs])。

所以使用 erlang:'+' 的正确语法是：

> 1> rpc:pmap( { erlang, '+' }, [2], [1,2,3] )。
> 
> [3,4,5]
> 
> 2>

计算 [1+2,2+2,3+2]

语法 rpc:pmap( { lists, sum }, [], [[1,2],[4,5]] ) 将评估 [1+2,4+5] 并返回 [3,9]

帕斯卡

# oop - 得墨忒耳法则 - 数据对象

> ID：12284057
> 
> 赞同：10
> 
> 时间：2012-09-05T14:44:54.953
> 
> 标签：oop, theory, law-of-demeter

我正在尝试遵循得墨忒耳法则（参见[http://en.wikipedia.org/wiki/Law_of_Demeter](http://en.wikipedia.org/wiki/Law_of_Demeter)， http: [//misko.hevery.com/code-reviewers-guide/flaw-digging-into-collaborators/](http://misko.hevery.com/code-reviewers-guide/flaw-digging-into-collaborators/)）我可以看到好处，但是在涉及域对象时我变得有点卡住了。

领域对象自然有一个链，有时需要显示整个链的信息。

例如，一个购物篮：

每个订单包含一个用户、交货信息和一个项目列表每个订单项目包含一个产品和数量每个产品都有一个名称和价格。每个用户都包含一个姓名和地址

显示订单信息的代码必须使用有关订单、用户和产品的所有信息。

当然，通过订单对象（例如“order.user.address.city”）获取此信息比使用更高级别的代码来查询我上面列出的所有对象然后将它们分别传递到代码中更好，更可重用？

欢迎任何意见/建议/提示！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T18:03:17.187

使用链式引用（例如 ）的一个问题`order.user.address.city`是，高阶依赖被“嵌入”到类外的代码结构中。

理想情况下，当您重构类时，您的“强制更改”应仅限于被重构类的方法。当您在客户端代码中有多个链式引用时，重构会驱使您在代码的其他位置进行更改。

考虑一个例子：假设您想替换`User`为`OrderPlacingParty`一个抽象，它封装了可以下订单的用户、公司和电子代理。这种重构立即提出了多个问题：

*   该`User`属性将被称为其他名称，并且将具有不同的类型
*   如果订单是由电子代理下达的`address`，新财产可能没有`city`
*   与订单关联的人员`User`（假设您的系统出于法律原因需要一个）可能与订单间接相关，例如，在`OrderPlacingParty`.

这些问题的解决方案是直接传递订单表示逻辑它需要的所有内容，而不是让它“理解”传入的对象的结构。这样你就可以本地化对正在重构的代码的更改，无需将更改传播到其他可能稳定的代码。

```
interface OrderPresenter {
    void present(Order order, User user, Address address);
}
interface Address {
    ...
}
class PhysicalAddress implements Address {
    public String getStreetNumber();
    public String getCity();
    public String getState();
    public String getCountry();
}
class ElectronicAddress implements Address {
    public URL getUrl();
}
interface OrderPlacingParty {
    Address getAddress();
}
interface Order {
    OrderPlacingParty getParty();
}
class User implements OrderPlacingParty {
}
class Company implements OrderPlacingParty {
    public User getResponsibleUser();
}
class ElectronicAgent implements OrderPlacingParty {
    public User getResponsibleUser();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T17:04:39.297

我认为，当使用链接访问某些属性时，它是在两种（或至少两种）不同的情况下完成的。一种是您提到的情况，例如，在您的演示模块中，您有一个**Order**对象，您希望只显示所有者/用户的地址，或城市等详细信息。在这种情况下，我认为这样做没有太大问题。为什么？因为您没有对访问的属性执行任何**业务逻辑**，这可能（可能）导致紧密耦合。

但是，如果您使用这种链接来对访问的属性执行某些逻辑，情况就会有所不同。例如，如果你有，

```
String city = order.user.address.city;
...
order.user.address.city = "New York"; 
```

这是有问题的。因为，这个逻辑是/应该在更接近目标属性——城市的模块中执行。就像，在首先构造 Address 对象的地方，或者如果不是这样，至少在构造 User 对象时（如果说 User 是实体并且 address 是值类型）。但是，如果它走得更远，它走得越远，它就会变得越不合逻辑和成问题。因为源和目标之间涉及的中介太多了。

因此，根据得墨忒耳法则，如果你在一个类中的“城市”属性上执行一些逻辑，比如**OrderAssmebler**，它访问像 order.user.address.city 这样的链中的城市属性，那么你应该考虑将此逻辑移动到更接近目标的位置/模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:09:54.143

你是对的，你很可能会像这样为你的价值对象建模

```
class Order {
    User user;
}

class User {
    Address shippingAddress;
    Address deliveryAddress;
}

class Address {
    String city;
    ...
} 
```

当您开始考虑如何将这些数据保存到数据库（例如[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)）时，您是否开始考虑性能。考虑急切与延迟加载的权衡。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T20:25:46.083

一般来说，我遵守得墨忒耳法则，因为它有助于将更改保持在缩小的范围内，这样新需求或错误修复就不会遍布您的系统。还有其他设计指南可以帮助实现这个方向，例如[本文](http://alanknightsblog.blogspot.com.ar/2011/10/principles-of-oo-design-or-everything-i.html)中列出的指南。话虽如此，我认为得墨忒耳法则（以及设计模式和其他类似的东西）是有用的设计指南，它们有权衡取舍，如果你认为这样做是可以的，你可以打破它们。例如我一般不[测试私有方法](http://lassekoskela.com/thoughts/24/test-everything-but-not-private-methods/)，主要是因为它会创建[脆弱的测试](http://xunitpatterns.com/Fragile%20Test.html). 但是，在一些非常特殊的情况下，我确实测试了一个对象私有方法，因为我认为它在我的应用程序中非常重要，因为我知道如果对象的实现发生更改，该特定测试将受到更改。当然，在这些情况下，您必须格外小心，并为其他开发人员留下更多文档来解释您这样做的原因。但是，最后，您必须使用您的良好判断力:)。

现在，回到最初的问题。据我了解，您的问题是为一个对象编写（网络？）GUI，该对象是可以通过消息链访问的对象图的根。对于这种情况，我会以与您创建模型类似的方式模块化 GUI，为模型的每个对象分配一个视图组件。因此，您将拥有诸如`OrderView`、`AddressView`等知道如何为其各自模型创建 HTML 的类。然后，您可以组合这些视图来创建您的最终布局，或者通过将责任委托给它们（例如`OrderView`创建`AddressView`）或通过使用[调解器](http://www.oodesign.com/mediator-pattern.html)负责组合它们并将它们链接到您的模型。作为第一种方法的一个例子，你可以有这样的东西（我将使用 PHP 作为例子，我不知道你使用的是哪种语言）：

```
class ShoppingBasket
{
  protected $orders;
  protected $id;

  public function getOrders(){...}
  public function getId(){...}
}

class Order
{
  protected $user;

  public function getUser(){...}
}

class User
{
  protected $address;

  public function getAddress(){...}
} 
```

然后是意见：

```
class ShoppingBasketView
{
  protected $basket;
  protected $orderViews;

  public function __construct($basket)
  {
     $this->basket = $basket;
     $this->orederViews = array();
     foreach ($basket->getOrders() as $order)
     {
        $this->orederViews[] = new OrderView($order);
     }
  }

  public function render()
  {
     $contents = $this->renderBasketDetails();
     $contents .= $this->renderOrders();     
     return $contents;
  }

  protected function renderBasketDetails()
  {
     //Return the HTML representing the basket details
     return '<H1>Shopping basket (id=' . $this->basket->getId() .')</H1>';
  }

  protected function renderOrders()
  {
     $contents = '<div id="orders">';
     foreach ($this->orderViews as $orderView)
     {
        $contents .= orderViews->render();
     }
     $contents .= '</div>';
     return $contents;
  }
}

class OrderView
{
//The same basic pattern; store your domain model object
//and create the related sub-views

  public function render()
  {
     $contents = $this->renderOrderDetails();
     $contents .= $this->renderSubViews();
     return $contents;
  }

  protected function renderOrderDetails()
  {
     //Return the HTML representing the order details
  }

  protected function renderOrders()
  {
     //Return the HTML representing the subviews by
     //forwarding the render() message
  }
} 
```

在您的 view.php 中，您会执行以下操作：

```
$basket = //Get the basket based on the session credentials
$view = new ShoppingBasketView($basket);
echo $view->render(); 
```

这种方法基于组件模型，其中视图被视为可组合组件。在此模式中，您尊重对象的边界，并且每个视图都有一个单一的职责。

**编辑（根据 OP 评论添加）**

我假设没有办法在子视图中组织视图，并且您需要在一行中呈现购物篮 ID、订单日期和用户名。正如我在评论中所说，对于那种情况，我会确保在一个单独的、有据可查的地方执行“坏”访问，让视图不知道这一点。

```
class MixedView
{
  protected $basketId;
  protected $orderDate;
  protected $userName;

  public function __construct($basketId, $orderDate, $userName)
  {
    //Set internal state
  }

  public function render()
  {
    return '<H2>' . $this->userName . "'s basket (" . $this->basketId . ")<H2> " .
           '<p>Last order placed on: ' . $this->orderDate. '</p>';
  }
}

class ViewBuilder
{
  protected $basket;

  public function __construct($basket)
  {
    $this->basket = $basket;
  }

  public function getView()
  {
     $basketId = $this->basket->getID();
     $orderDate = $this->basket->getLastOrder()->getDate();
     $userName = $this->basket->getUser()->getName();
     return new MixedView($basketId, $orderDate, $userName);
  }
} 
```

如果稍后您重新排列域模型并且您的`ShoppingBasket`类无法再实现该`getUser()`消息，那么您将不得不更改应用程序中的一个点，避免该更改遍布您的系统。

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T15:25:47.227

得墨忒耳法则是关于调用方法，而不是访问属性/字段。我知道*从技术上讲*属性是方法，但从逻辑上讲，它们应该是数据。所以，你的例子`order.user.address.city`对我来说似乎很好。

这篇文章是有趣的进一步阅读：[http ://haacked.com/archive/2009/07/13/law-of-demeter-dot-counting.aspx](http://haacked.com/archive/2009/07/13/law-of-demeter-dot-counting.aspx)

# reporting-services - 如何使用唯一标识符创建多选参数？

> ID：12284059
> 
> 赞同：2
> 
> 时间：2012-09-05T14:44:56.637
> 
> 标签：reporting-services, parameters, uniqueidentifier

我正在开发一个 SSRS 2008 R2 RDL 文件。现在，我正在尝试添加一个应该是多选的报告参数。以前我使用过多选参数，但它们以前一直是 CHARACTER 数据类型。所以在我的主数据集中我的代码是：

```
;WITH Cte AS 
( 
    SELECT 
        1 as id, 
        CAST('<M>' + REPLACE( (select @IncidentType),  ',' , '</M><M>') + '</M>' AS XML) AS Names 
) 
SELECT 
    id, 
    Split.a.value('.', 'VARCHAR(MAX)') AS Names
INTO #incident_types     
FROM Cte 
CROSS APPLY Names.nodes('/M') Split(a) 
```

（在我的 RDL 文件中，这个 IncidentType 报告参数允许多选）

但是现在 IncidentType 是一个 UNIQUEIDENTIFIER 数据类型。我已经尝试过 SSRS JOIN 函数，但是当我运行它时，这仍然给我在 SSRS 中的相同错误：

```
An error has occurred during report processing. (rsProcessingAborted)
Query execution failed for dataset 'Incidents'. (rsErrorExecutingCommand)
Conversion failed when converting from a character string to uniqueidentifier. 
```

我如何通过传入多个唯一标识符来为此编码？

我尝试了您发布的以下解决方案：

```
CAST(Split.a.value('.', 'VARCHAR(MAX)') AS UNIQUEIDENTIFIER) AS Names 
```

但这现在给了我这个错误：

```
Msg 8169, Level 16, State 2, Line 62
Conversion failed when converting from a character string to uniqueidentifier. 
```

在我的 sproc 的顶部，我有：

```
declare
    @FacilityID varchar(MAX) = null,
    @ProgramID uniqueidentifier = null,
    @ServiceDateStart smalldatetime = null,
    @ServiceDateEnd smalldatetime = null,
    @IncidentType varchar(MAX) = null

SET @IncidentType = '864EA130-F36B-4958-B51F-EE9DBD35D804,671A8EB3-8298-40DB-BD66-93309904E463,ACA1EB55-3D66-467B-8388-CC42FCFB00F3
SET @FacilityID = '83B465B8-28DD-4F37-9F2D-A4D5E38EE7FB,3EC657F7-655F-43FB-8424-2A8914E7C725,B2064474-5C9B-4884-B1D7-4FCE1C804DF7' 
```

但导致此错误的行是：

```
 AND (@IncidentType is NULL OR event_definition_rv.event_definition_id in (SELECT Names FROM #incident_types)) 
```

因为我可以毫无错误地运行这些行：

```
select * from #incident_types
select * from #facilities 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:04:17.083

尝试将未拆分的值转换为 uniqueidentifier：

```
 ;WITH Cte AS 
( 
    SELECT 
        1 as id, 
        CAST('<M>' + REPLACE( (select @IncidentType),  ',' , '</M><M>') + '</M>' AS XML) AS Names 
) 
SELECT 
    id, 
    CAST(Split.a.value('.', 'VARCHAR(MAX)') AS UNIQUEIDENTIFIER) AS Names
INTO #incident_types
FROM Cte 
CROSS APPLY Names.nodes('/M') Split(a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T23:58:55.727

> *但导致此错误的行是：*
> 
> ```
> AND (@IncidentType is NULL OR event_definition_rv.event_definition_id in (SELECT Names FROM #incident_types)) 
> ```

由于@IncidentType 是一个**多值**报表参数，因此您不能`@IncidentType Is NULL`在报表的数据集查询中使用它，因为它会弄乱 sql 代码并且变得不可预测。

此外“*多值参数不能包含空值*”，因此检查参数是否为空是没有用的。您也许可以使用如下[可能的解决方法](https://stackoverflow.com/a/12931993/7794769)：

```
 AND ('NULL_FLAG' IN (@IncidentType) OR event_definition_rv.event_definition_id IN (@IncidentType)) 
```

请参阅[docs.microsoft.com](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2005/aa337292(v=sql.90)#writing-queries-that-map-to-multivalued-report-parameters)，其中说：

> *   查询必须使用 IN 子句来指定参数。
> 
> ## 笔记：
> 
> 报表服务器会**重写**无法将参数作为数组处理的数据源的查询。重写查询是产生预期结果的必要条件。当参数定义为多值并且查询使用 IN 语句指定参数时，将触发查询重写。如果您构建的查询不包含 IN 语句，**请注意您正在绕过报表服务器提供的支持多值参数的逻辑**。

# jquery - 一页上有多个谷歌地图

> ID：12284062
> 
> 赞同：3
> 
> 时间：2012-09-05T14:45:08.177
> 
> 标签：jquery, google-maps

在一页上显示多个实体。每个实体都有一个谷歌地图。这就是我处理仅显示一个实体的地图的方式：

```
var map;
var geocoder;

$(document).ready(function(){
    google.maps.event.addDomListener(window, 'load', initialize);
});

function initialize() {
    geocoder = new google.maps.Geocoder();
    var mapOptions = {
        zoom: 16,
        center: new google.maps.LatLng(50.317408,11.12915),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);
        codeAddress($('#entityID span#address').text());
}

function codeAddress(address) {

    geocoder.geocode( {
        'address': address
    }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
        } else {
            codeAddress('germany');
        }
    });
} 
```

现在我想显示多张地图，每张地图都有不同的位置。那会是什么样子？有任何想法吗？该算法应该能够处理动态数量的实体。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T14:47:57.853

创建一个地图数组，如下所示：

```
var maps = []; // array for now
var geocoder;

$(document).ready(function(){
    google.maps.event.addDomListener(window, 'load', initialize('map_1')); // two calls
    google.maps.event.addDomListener(window, 'load', initialize('map_2'));
});

function initialize(_id) { // Map id for future manipulations
    geocoder = new google.maps.Geocoder();
    var mapOptions = {
        zoom: 16,
        center: new google.maps.LatLng(50.317408,11.12915),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    maps[_id] = new google.maps.Map(document.getElementById('map_canvas_'+_id), // different containers
        mapOptions);
        codeAddress($('#entityID span#address').text());
}

function codeAddress(address, map_id) {

    geocoder.geocode( {
        'address': address
    }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: maps[map_id], // target nedded map by second parametr
                position: results[0].geometry.location
            });
        } else {
            codeAddress('germany');
        }
    });
} 
```

# windows-phone-7 - 将文本添加到 RichTextBlock 控件

> ID：12284064
> 
> 赞同：0
> 
> 时间：2012-09-05T14:45:13.650
> 
> 标签：windows-phone-7

我已经创建了这样的 RichTextBlock

```
RichTextBlock RTB = new RichTextBlock(); 
```

但我找不到将文本和 URL 添加到 RichTextBlock 的方法。
我在想，如果我需要特定的使用或类似的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T15:07:54.943

试试这个 ：

```
 // creat your RichTextBlock  
    RichTextBlock MyRTB = new RichTextBlock();

     // Create a Run of plain text and some bold text.
                Run myRun1 = new Run();
                myRun1.Text = "Some text here";
                myRun1.FontStyle = FontStyle.Oblique;
                myRun1.FontSize = 72;

                Run myRun2 = new Run();
                myRun2.Text = "Other text";
                myRun2.FontSize = 140;
                myRun2.Foreground = new SolidColorBrush(Colors.Red);

                // Create a paragraph and add the Run and Bold to it.
                Paragraph myParagraph = new Paragraph();
                myParagraph.Inlines.Add(myRun1);
                myParagraph.Inlines.Add(myRun2);

// add paragraphe to your RichTextBlock  blocks
                MyRTB.Blocks.Add(myParagraph);

// now, add RichTextBlock  to the grid (or any other controler in your page)    
                ParentGrind.Children.Add(MyRTB);
// update layoute
                ParentGrind.UpdateLayout(); 
```

这很适合我动态添加和格式化文本

# c++ - 在 Qt 中实现精确计时器

> ID：12284067
> 
> 赞同：3
> 
> 时间：2012-09-05T14:45:16.740
> 
> 标签：c++, multithreading, qt, timer

由于我需要一个比 Qt 更精确的计时器，其分辨率约为 15 毫秒，因此我尝试使用 windows api 中的 QueryPerformanceCounter() 来实现我自己的计时器。

我的第一个尝试是从 QObject 继承并构建一个带有无限循环的计时器，它每秒触发一个信号。我尝试使用 moveToThread() 将此计时器移动到它自己的线程，以便它每秒更新我的主窗口而不阻塞整个事情。然而，主窗口永远不会出现，删除无限循环 - > 主窗口会出现。

所以我尝试了单发的方法，基本思路是：

```
 connect( highPerformanceTimer, SIGNAL(timer_tick()), this, SLOT(timeOutSlot()) );
 connect( this,  SIGNAL(graphics_updated()), highPerformanceTimer, SLOT(timer_start())); 
```

因此，计时器滴答声，ui (opengl) 得到更新，在更新结束时会生成一个信号以重新启动计时器。

只要我不从 ui 更新代码的末尾删除计时器的重新启动，我的主窗口仍然不会显示。

在调试器中，我可以看到代码似乎可以正常工作，它从计时器跳转到 ui 并返回。如果没有断点，它将导致突然的分段错误。

如果有任何提示可能存在问题，或者是否有更好的方法在 Qt 中实现这一点，我将不胜感激。

编辑：更多代码

高性能定时器.h

```
#ifndef HIGHPERFORMANCETIMER_H
#define HIGHPERFORMANCETIMER_H

#include <QObject>
#include <windows.h>

class HighPerformanceTimer : public QObject
{
    Q_OBJECT
public:
    HighPerformanceTimer();

signals:
    void timer_tick();

public slots:
    void timer_start();

private:
    // some variables
    LARGE_INTEGER highPerformanceCounterValue, highPerformanceCounterFrequency, highPerformanceCounterValueOld;
    int interval;
    float value;
    float last_tick_value;

};

#endif // HIGHPERFORMANCETIMER_H 
```

高性能定时器.cpp

```
#include "highperformancetimer.h"
#include "windows.h"
#include "QThread"

HighPerformanceTimer::HighPerformanceTimer()
{

    QueryPerformanceFrequency(&highPerformanceCounterFrequency);
}

void HighPerformanceTimer::timer_start(){
    float i = 0;
// just burn some time
    while( i<1000000 ) i++;
    emit HighPerformanceTimer::timer_tick();   
} 
```

来自主要 OpenGL 小部件的一些代码：

```
HighPerformanceTimer *highPerformanceTimer;
protected slots:
    virtual void timeOutSlot();

NeHeChapter5( QWidget *parent=0, char *name=0 ) : NeHeWidget( 50, parent, name )
    {
        highPerformanceTimer = new HighPerformanceTimer();

        connect( highPerformanceTimer, SIGNAL(timer_tick()), this, SLOT(timeOutSlot()) );
        connect( this,  SIGNAL(graphics_updated()), highPerformanceTimer, SLOT(timer_start()));
        highPerformanceTimer->moveToThread(&timerThread);
        highPerformanceTimer->timer_start();
    }

void NeHeChapter5::timeOutSlot(){
    timeOut();
}

void NeHeChapter5::timeOut()
{
    updateGL();
}

void NeHeChapter5::paintGL()
{
//opengl code *snip*
emit graphics_updated();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:19:41.450

错误在这里：

```
NeHeChapter5( QWidget *parent=0, char *name=0 ) : NeHeWidget( 50, parent, name )
{
    highPerformanceTimer = new HighPerformanceTimer();

    connect( highPerformanceTimer, SIGNAL(timer_tick()), this, SLOT(timeOutSlot()) );
    connect( this,  SIGNAL(graphics_updated()), highPerformanceTimer, SLOT(timer_start()));
    highPerformanceTimer->moveToThread(&timerThread);
    highPerformanceTimer->timer_start();
} 
```

你打电话给 timer_start(); 它是在调用者线程中调用的，而不是在`timerThread`. 而且你甚至没有开始你的线程。先打电话`timerThread.start()`。要在您希望调用的线程中调用 timer_start()

```
QMetaObject::invokeMethod(highPerformanceTimer, "timer_start", Qt::QueuedConnection); 
```

它将在新启动的线程中调用 timer_start，而不是在调用者线程中。

此外，您不需要使用完全限定名称调用 timer_tick`emit HighPerformanceTimer::timer_tick();`可以替换为`emit timer_tick();`

# javascript - Phonegap symbian启动开发

> ID：12284068
> 
> 赞同：1
> 
> 时间：2012-09-05T14:45:19.040
> 
> 标签：javascript, cordova, symbian

我在开始为 Symbian 开发时遇到了问题，我已经为 android 准备了完整的应用程序，现在我需要在 Symbian 上启动它。我已经从[http://docs.phonegap.com/en/2.0.0/guide_getting-started_symbian_index.md.html#Getting%20Started%20with%20Symbian下载了所有内容](http://docs.phonegap.com/en/2.0.0/guide_getting-started_symbian_index.md.html#Getting%20Started%20with%20Symbian)

我试过了：但是当我尝试在模拟器上启动我的 .wgz 文件时，它会出现：“启用安装”..

你能告诉我从什么开始吗？或者给我一些指南或教程？

# c# - 正确的用户控件用法？

> ID：12284075
> 
> 赞同：0
> 
> 时间：2012-09-05T14:45:35.620
> 
> 标签：c#, winforms, user-controls

我刚刚开始将我的 GUI 应用程序分解为 UserControls。我有一个带有一堆 TagePages 的 TabControl。显然，我的 MainForm.cs 文件充满了大量的事件和控件等，而且很快就变得非常混乱。

所以之前的问题让我了解了如何创建用户控件。我打算为每个 TabPage 创建一个 UserControl，我想知道如何与主窗体或其他 UserControls 上的组件进行交互。

这是我使用 UserControl 制作的 TabPage 的示例，它需要根据当前选择的 TabPage 启用或禁用按钮。这是正确的用法还是有更好的方法？

```
public partial class TabDetails : UserControl
{
    private RequestForm fRequestForm;
    public TabDetails()
    {
        InitializeComponent();
    }

    public void CustomInitialization(RequestForm pRequestForm)
    {
        fRequestForm = pRequestForm;
        pRequestForm.TabControl_Main.SelectedIndexChanged += SelectedTabIndexChanged;
    }

    private void SelectedTabIndexChanged(object pSender, EventArgs pEvents)
    {
        fRequestForm.Button_SubmitRequest.Enabled = fRequestForm.TabControl_Main.SelectedTab != fRequestForm.Tab_Details;
    }
} 
```

在 MainForm.cs 构造函数中，我调用：

```
this.tab_Details1.CustomInitialization(this); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:57:44.747

这看起来不像是对用户控件的良好使用。当用户控件中的某些内容发生更改时，用户控件不应决定表单中的内容应如何表现。用户控件应该不知道它的容器，并且应该在任何容器中运行。

用户控件应该通知表单发生了一些变化，而不告诉表单内部实现是什么，并且表单应该决定做什么。

示例：名为“NameUserControl”的用户控件由 TitleComboBox、FirstNameTextBox 和 LastNameTextBox 组成。用户控件希望在其中一个值发生更改时发出通知。

**错误道：**

创建事件：

TitleComboBox - SelectedIndexChanged。FirstNameTextBox、LastNameTextBox - TextChanged。

这里的问题：

1.  您公开内部控制行为。如果要将 TitleComboBox 更改为 TextBox，会发生什么？您必须更改事件名称和实现。
2.  您暴露了您使用 3 个不同控件的事实。如果您想为名字和姓氏使用相同的文本框会发生什么？您必须删除一个事件并更改另一个事件的名称。

**好办法：**

仅创建一个事件：**NameChanged**并公开 FullName 的 1 个属性或值的三个不同属性。

无论哪种方式，表单都会订阅事件并决定下一步做什么。

另一件需要考虑的事情是：向用户控件添加的功能越多，要么降低其可重用性，要么使其代码更复杂。例如，如果您在用户控件中添加验证，您会发现有一天您需要它而不需要验证，因此您将添加一个属性“bool ValidateData”，否则它会非常复杂以至于您需要构建另一个控制。解决这个问题的一种方法是构建非常小的用户控件，但将它们组合成一个或多个更大的用户控件，以满足您当前的所有需求。

# sql - SQL 在分母中使用 SELECT 和 GROUP BY 计算 %

> ID：12284076
> 
> 赞同：0
> 
> 时间：2012-09-05T14:45:36.900
> 
> 标签：sql, ms-access, count

我有一个包含“系统”和“颜色代码”字段的表（详细信息）。我想通过 color_code 计算每个系统的项目百分比，每个系统都有一个 SQL 语句。我有这个：

```
SELECT system, color_code, Count(color_code) AS ColorCount, 
       Count(color_code)*100 /(select count(*) from Detail) AS ColorPercent
FROM Detail
GROUP BY system, color_code; 
```

“ColorPercent”中的结果是所有记录的结果。我希望“ColorPercent”基于每个“系统”的记录数。

我试过这个（将“GROUP BY system”添加到表达式中），但它不起作用，

```
SELECT system, color_code, Count(color_code) AS ColorCount, 
       Count(color_code)*100/(select count(*) from Detail 
                              GROUP BY system) AS ColorPercent
FROM Detail
GROUP BY system, color_code; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:49:56.720

怎么样：

```
 SELECT system, color_code, 
        Count(color_code) AS ColorCount, 
        Count(color_code)*100/(select count(*) from Detail d 
                               where d.system=detail.system) AS ColorPercent
FROM Detail
GROUP BY system, color_code; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:50:06.277

可能不起作用，因为您的子查询返回多个值。尝试添加 where 子句，以确保使用唯一的系统并获取计数

```
SELECT system, color_code, Count(color_code) AS ColorCount, 
Count(color_code)*100/(select count(*) from Detail where system = D.system) AS ColorPercent
FROM Detail D
GROUP BY system, color_code; 
```

这应该有效。如您所见，我正在根据主要查询中的组关联计数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:51:08.443

您需要限制在子查询中获得的记录。尝试：

```
SELECT system, color_code, Count(color_code) AS ColorCount, Count(color_code)*100 /(select count(*) from Detail where system = D.system) AS ColorPercent
FROM Detail D
GROUP BY system, color_code; 
```

我不确定你是否需要给你的表起别名

# php - 如何提交多个复选框值？

> ID：12284078
> 
> 赞同：1
> 
> 时间：2012-09-05T14:45:40.987
> 
> 标签：php, input

我想为复选框设置多个值。我怎么做？它只添加选择的第一个选项

```
 <input type="checkbox" name="fields[options]" value="option1[]">option1
<input type="checkbox" name="fields[options]" value="option2[]">option2 
<input type="checkbox" name="fields[options]" value="option3[]">option3 
```

有两个 PHP 文件。我将在下面发布它们。我对php没有那么有经验。

```
 /**************** GOOGLE.DOCS method ************************/
if($_SETTINGS['store_to_gdocs'])
{
    include_once("GoogleSpreadsheet/Google_Spreadsheet.php");

    $ss = new Google_Spreadsheet($_SETTINGS['gdocs']['user'],$_SETTINGS['gdocs']['password']);
    $ss->useSpreadsheet($_SETTINGS['gdocs']['spreadsheet_name']);
    $ss->useWorksheet($_SETTINGS['gdocs']['worksheet_name']);

    $row = array 
    (
        "Date" => date("m/d/Y H:i"),
    );

    foreach($_POST['fields'] as $k=>$v)
        $row[$k]=$v;

    if(!$ss->addRow($row))
        $ret['error']=1;
} 
```

第二个文件

```
<?php    
class Google_Spreadsheet
{
    private $client;

    private $spreadsheet;
    private $spreadsheet_id;

    private $worksheet = "Sheet1";
    private $worksheet_id;

    function __construct($user,$pass,$ss=FALSE,$ws=FALSE)
    {
        $this->login($user,$pass);
        if ($ss) $this->useSpreadsheet($ss);
        if ($ws) $this->useWorksheet($ws);
    }

    function useSpreadsheet($ss,$ws=FALSE)
    {
        $this->spreadsheet = $ss;
        $this->spreadsheet_id = NULL;
        if ($ws) $this->useWorksheet($ws);
    }

    function useWorksheet($ws)
    {
        $this->worksheet = $ws;
        $this->worksheet_id = NULL;
    }

    function addRow($row)
    {
        if ($this->client instanceof Zend_Gdata_Spreadsheets)
        {
            $ss_id = $this->getSpreadsheetId($this->spreadsheet);

            if (!$ss_id) throw new Exception('Unable to find spreadsheet by name: "' . $this->spreadsheet . '", confirm the name of the spreadsheet');

            $ws_id = $this->getWorksheetId($ss_id,$this->worksheet);

            if (!$ws_id) throw new Exception('Unable to find worksheet by name: "' . $this->worksheet . '", confirm the name of the worksheet');

            $insert_row = array();

            foreach ($row as $k => $v) $insert_row[$this->cleanKey($k)] = $v;

            $entry = $this->client->insertRow($insert_row,$ss_id,$ws_id);

            if ($entry instanceof Zend_Gdata_Spreadsheets_ListEntry) return TRUE;
        }

        throw new Exception('Unable to add row to the spreadsheet');
    }

    // http://code.google.com/apis/spreadsheets/docs/2.0/reference.html#ListParameters
    function updateRow($row,$search)
    {
        if ($this->client instanceof Zend_Gdata_Spreadsheets AND $search)
        {
            $feed = $this->findRows($search);

            if ($feed->entries)
            {
                foreach($feed->entries as $entry) 
                {
                    if ($entry instanceof Zend_Gdata_Spreadsheets_ListEntry)
                    {
                        $update_row = array();

                        $customRow = $entry->getCustom();
                        foreach ($customRow as $customCol) 
                        {
                            $update_row[$customCol->getColumnName()] = $customCol->getText();
                        }

                        // overwrite with new values
                        foreach ($row as $k => $v) 
                        {
                            $update_row[$this->cleanKey($k)] = $v;
                        }

                        // update row data, then save
                        $entry = $this->client->updateRow($entry,$update_row);
                        if ( ! ($entry instanceof Zend_Gdata_Spreadsheets_ListEntry)) return FALSE;
                    }
                }

                return TRUE;
            }
        }

        return FALSE;
    }

    // http://code.google.com/apis/spreadsheets/docs/2.0/reference.html#ListParameters
    function getRows($search=FALSE)
    {
        $rows = array();

        if ($this->client instanceof Zend_Gdata_Spreadsheets)
        {
            $feed = $this->findRows($search);

            if ($feed->entries)
            {
                foreach($feed->entries as $entry) 
                {
                    if ($entry instanceof Zend_Gdata_Spreadsheets_ListEntry)
                    {
                        $row = array();

                        $customRow = $entry->getCustom();
                        foreach ($customRow as $customCol) 
                        {
                            $row[$customCol->getColumnName()] = $customCol->getText();
                        }

                        $rows[] = $row;
                    }
                }
            }
        }

        return $rows;
    }

    // user contribution by dmon (6/10/2009)
    function deleteRow($search)
    {
        if ($this->client instanceof Zend_Gdata_Spreadsheets AND $search)
        {
            $feed = $this->findRows($search);

            if ($feed->entries)
            {
                foreach($feed->entries as $entry)
                {
                    if ($entry instanceof Zend_Gdata_Spreadsheets_ListEntry)
                    {
                        $this->client->deleteRow($entry);

                        if ( ! ($entry instanceof Zend_Gdata_Spreadsheets_ListEntry)) return FALSE;
                    }
                }

                return TRUE;
            }
        }

        return FALSE;
    }

    function getColumnNames()
    {
        $query = new Zend_Gdata_Spreadsheets_ListQuery();
        $query->setSpreadsheetKey($this->getSpreadsheetId());
        $query->setWorksheetId($this->getWorksheetId());
        $query->setMaxResults(1);
        $query->setStartIndex(1);

        $feed = $this->client->getListFeed($query);

        $data = array();

        if ($feed->entries)
        {
            foreach($feed->entries as $entry) 
            {
                if ($entry instanceof Zend_Gdata_Spreadsheets_ListEntry)
                {
                    $customRow = $entry->getCustom();

                    foreach ($customRow as $customCol) 
                    {
                        array_push($data,$customCol->getColumnName());
                    }
                }
            }
        }

        return $data;
    }

    private function login($user,$pass)
    {
        // Zend Gdata package required
        // http://framework.zend.com/download/gdata

        require_once 'Zend/Loader.php';
        Zend_Loader::loadClass('Zend_Http_Client');
        Zend_Loader::loadClass('Zend_Gdata');
        Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
        Zend_Loader::loadClass('Zend_Gdata_Spreadsheets');

        $service = Zend_Gdata_Spreadsheets::AUTH_SERVICE_NAME;
        $http = Zend_Gdata_ClientLogin::getHttpClient($user,$pass,$service);
        $this->client = new Zend_Gdata_Spreadsheets($http);

        if ($this->client instanceof Zend_Gdata_Spreadsheets) return TRUE;

        return FALSE;
    }

    private function findRows($search=FALSE)
    {
        $query = new Zend_Gdata_Spreadsheets_ListQuery();
        $query->setSpreadsheetKey($this->getSpreadsheetId());
        $query->setWorksheetId($this->getWorksheetId());

        if ($search) $query->setSpreadsheetQuery($search);

        $feed = $this->client->getListFeed($query);

        return $feed;
    }

    private function getSpreadsheetId($ss=FALSE)
    {
        if ($this->spreadsheet_id) return $this->spreadsheet_id;

        $ss = $ss?$ss:$this->spreadsheet;

        $ss_id = FALSE;

        $feed = $this->client->getSpreadsheetFeed();

        foreach($feed->entries as $entry) 
        {
            if ($entry->title->text == $ss)
            {
                $ss_id = array_pop(explode("/",$entry->id->text));

                $this->spreadsheet_id = $ss_id;

                break;
            }
        }

        return $ss_id;
    }

    private function getWorksheetId($ss_id=FALSE,$ws=FALSE)
    {
        if ($this->worksheet_id) return $this->worksheet_id;

        $ss_id = $ss_id?$ss_id:$this->spreadsheet_id;

        $ws = $ws?$ws:$this->worksheet;

        $wk_id = FALSE;

        if ($ss_id AND $ws)
        {
            $query = new Zend_Gdata_Spreadsheets_DocumentQuery();
            $query->setSpreadsheetKey($ss_id);
            $feed = $this->client->getWorksheetFeed($query);

            foreach($feed->entries as $entry) 
            {
                if ($entry->title->text == $ws)
                {
                    $wk_id = array_pop(explode("/",$entry->id->text));

                    $this->worksheet_id = $wk_id;

                    break;
                }
            }
        }

        return $wk_id;
    }

    function cleanKey($k)
    {
        return strtolower(preg_replace('/[^A-Za-z0-9\-\.]+/','',$k));
    }
} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T14:52:04.717

您的复选框名称和值混淆了。它应该是：

```
<input type="checkbox" name="fields[options][]" value="option1">option1
<input type="checkbox" name="fields[options][]" value="option2">option2 
<input type="checkbox" name="fields[options][]" value="option3">option3 
```

现在你可以`$_POST['fields']['options']`像这样操作：

```
$options = (is_array($_POST['fields']['options'])) ? $_POST['fields']['options'] : array(); 
```

然后你可以将它们内爆：

```
$options_string = implode(',', $options) // will return option1,option2,option3 etc 
```

或遍历它们：

```
foreach ($options as $option)
{
  echo $option.'<br>';
}

// produces option1<br>option2<br>option3 etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:51:41.633

不要在数组中给名称一个键 - 它应该设置为 name="fields[]"。

[看到这个帖子](https://stackoverflow.com/questions/4997252/get-post-from-multiple-checkboxes)。

# php - php、mysqli 和无法访问 ini 文件

> ID：12284079
> 
> 赞同：-1
> 
> 时间：2012-09-05T14:45:47.230
> 
> 标签：php, mysqli

如果我无权访问 php.ini 文件，是否可以使用新的 mysqli 函数？

我在一个不允许我访问 php.ini 文件的托管站点上，根据 php 文档，我需要在 ini 文件中添加条目以启用 mysqli 功能。有办法解决吗？

在 cpanel 中，我可以看到我有一个带有关联子目录的 php 目录，这些子目录看起来大多是空的。我还可以访问一个 PHP PEAR 安装程序，其中有一些文本说管理员已启用 PHP 扩展的自动加载，但除了 DB2 驱动程序 mysqli 之外，没有一个 PEAR 包说明有关 mysqli 的任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:50:04.210

在默认安装中，对于大多数共享主机，mysqli 已经成为交易的一部分。

您可以通过发出 phpinfo() 来检查它是否已安装并查看它是否存在。

使用默认设置就可以了。

![在此处输入图像描述](../Images/4e4fa77e29d2756f828a6e45a291a99a.png)

# jstl - 在 jstl if 标记中检查是否为空

> ID：12284080
> 
> 赞同：0
> 
> 时间：2012-09-05T14:45:48.830
> 
> 标签：jstl

我的代码迭代列表并显示行

```
<c:if test="${not empty ftp}">
    <c:forEach var="event" items="${ftp}">
                <tr><td><input type="text" name="hostName" id="hostName" value="${event.hostName}"size="30" maxlength="200"/></td>
                <td><input type="text" name="directory" id="directory" value="${event.directory}" size="30" maxlength="200"/></td>
                <td><input type="text" name="userName" id="userName" value="${event.userName}" size="20" maxlength="20"/></td>
                <td><input type="text" name="password" id="password" value="${event.password}" size="20" maxlength="20" onblur="checkEnableButton();"/></td>
                <td><input type="button" id="delete" onclick="if(confirm( 'Do you want to delete')) deleteRow(this);" value="-" /></td></tr>
            </c:forEach>
</c:if> 
```

这很好用..但是，如果我的列表是空的，我需要显示一个空白行..？如果我想从 JSP 页面动态删除和添加行，我该怎么办..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:43:14.997

`<c:if test="${not empty ftp}">...</c:if>`可以删除您当前使用的，因为`forEach`循环也将执行相同的检查并跳过任何处理，如果它确实是空的。

至于如果为空则显示一行，您可以执行以下操作：

```
<c:if test="${empty ftp}">
    ...display empty table row here...
</c:if> 
```

如果你想动态地做事，你需要开发一些 JavaScript。JSTL 在服务器上完成，但 JavaScript 将允许您进行动态客户端处理。

# object - 在 Java 中使用 Object 类

> ID：12284081
> 
> 赞同：0
> 
> 时间：2012-09-05T14:45:50.723
> 
> 标签：object, stack

我知道声明 Object 类型的变量或将 Object 变量作为参数传递给方法是为了让我们可以传递任何对象类型，例如 Integer 或 String 或数组。我只是想问一下我们是否也可以传递原始数据类型或转换为整数原始类型？

例如，如果我有一个 Stack 类，它允许我们推送和弹出 Object 类型的对象，那么我可以将这个类用于 Integer 对象但是我可以将它用于原始类型 int 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:47:33.730

是的，你可以，因为 Java 会“自动装箱”你的原始类型。换句话说，如果您将 an 传递`int`给您的方法，它将首先转换为 an `Integer`，然后`Integer`将其作为参数传递给您的方法。

[本教程](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)提供了有关其工作原理的更多详细信息。

# mysql - mysql 加入，似乎不起作用（Select_full_join）

> ID：12284084
> 
> 赞同：1
> 
> 时间：2012-09-05T14:46:00.097
> 
> 标签：mysql, phpmyadmin

我在加入我的桌子时遇到了一些问题。

进行查询时，我得到一个红旗：

> Select_full_join
> 
> 不使用索引的连接数。如果此值不为 0，则应仔细检查表的索引。

...我也得到了很多slow_queries

除了设置索引之外，我还需要做什么才能使其正常工作？我看到你可以在表之间添加关系，或者外键，也许这就是我需要的？

说到mysql，我是个菜鸟。

这是我的查询：

```
SELECT 
    m.numberOfPlayers as totalNumberOfPlayers,
    COUNT(p.userId) AS currentNumberOfPlayers 
FROM 
    matches_active m 
        LEFT JOIN matches_players p ON p.matchId = m.id 
WHERE 
    m.id = 5922; 
```

...这是我的桌子：

`matches_active`

```
id   int(11)
numberOfPlayers int(11)

PRIMARY  id 
```

`matches_players`

```
userId   int(11)
matchId  int(11)   

PRIMARY    userId 
           matchId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:19:03.460

当您的查询使用聚合函数时，您应该对`GROUP BY`所有未聚合的字段

```
SELECT 
    m.numberOfPlayers as totalNumberOfPlayers,
    COUNT(p.userId) AS currentNumberOfPlayers 
FROM 
    matches_active m 
        LEFT JOIN matches_players p ON p.matchId = m.id 
GROUP BY
    m.numberOfPlayers
WHERE 
    m.id = 5922; 
```

# c# - 使用 Linq.Expressions.Expression 排序

> ID：12284085
> 
> 赞同：2
> 
> 时间：2012-09-05T14:46:03.080
> 
> 标签：c#, .net, linq, sorting, expression-trees

我编写了这个`IQueryable<T>`按列排序的代码`sortColumn`。我想扩展它，以便将列值`BirthDate`等于的条目`DateTime.Today`放在排序的第一位，但我只是找不到或想不出如何完成这项工作。

```
public static IQueryable<T> OrderByField<T>(this IQueryable<T> q, string sortColumn, bool asc)
{
    var param = Expression.Parameter(typeof(T), "p");

    var prop = Expression.Property(param, sortColumn);

    var exp = Expression.Lambda(prop, param);

    string method = asc ? "OrderBy" : "OrderByDescending";

    Type[] types = new[] { q.ElementType, exp.Body.Type };

    var mce = Expression.Call(typeof(Queryable), method, types, q.Expression, exp);

    return q.Provider.CreateQuery<T>(mce);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T17:12:17.953

请参阅[处理 GridView.OnSorting() 并使用 LINQ 动态创建排序表达式](http://www.codeproject.com/Articles/246361/Handle-GridView-OnSorting-using-LINQ)

```
public static class SortExpressionBuilder<T>
{
    private static IDictionary<SortDirection, ISortExpression> directions =  new Dictionary<SortDirection, ISortExpression>
    {
        { SortDirection.Ascending, new OrderByAscendingSortExpression() },
        { SortDirection.Descending, new OrderByDescendingSortExpression() }
    };

    interface ISortExpression
    {
        Func<IEnumerable<T>, Func<T, object>, IEnumerable<T>> GetExpression();
    }

    class OrderByAscendingSortExpression : ISortExpression
    {
        public Func<IEnumerable<T>, Func<T, object>, IEnumerable<T>> GetExpression()
        {
            return (c, f) => c.OrderBy(f);
        }
    }

    class OrderByDescendingSortExpression : ISortExpression
    {
        public Func<IEnumerable<T>, Func<T, object>, IEnumerable<T>> GetExpression()
        {
            return (c, f) => c.OrderByDescending(f);
        }
    }

    public static Func<IEnumerable<T>, Func<T, object>, IEnumerable<T>> CreateExpression(SortDirection direction)
    {
        return directions[direction].GetExpression();
    }
}

public static IEnumerable<T> OrderBy<T>(this IEnumerable<T> collection, string columnName, SortDirection direction)
{
    ParameterExpression param = Expression.Parameter(typeof(T), "x"); // x
    Expression property = Expression.Property(param, columnName);     // x.ColumnName
    Func<T, object> func = Expression.Lambda<Func<T, object>>(        // x => x.ColumnName
       Expression.Convert(Expression.Property(param, columnName), 
       typeof(object)), param
    ).Compile();

    Func<IEnumerable<T>, Func<T, object>, IEnumerable<T>> expression = SortExpressionBuilder<T>.CreateExpression(direction);
    IEnumerable<T> sorted = expression(collection, func);
    return sorted;
} 
```

和底部的链接：

*   [使用 Lambda/Linq 对列表进行排序到对象](https://stackoverflow.com/questions/722868/sorting-a-list-using-lambda-linq-to-objects)
*   [GridView 排序：SortDirection 总是升序](https://stackoverflow.com/questions/250037/gridview-sorting-sortdirection-always-ascending)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T09:46:18.003

您可以尝试对类似于以下表达式的内容进行排序：

```
.OrderBy(x => BirthDate == DateTime.Now.Date ? 0 : 1).ThenBy(sortColumn); 
```

# javascript - GWT：有没有办法修改 Gwt 在编译中使用的 Cast.java 文件？

> ID：12284088
> 
> 赞同：0
> 
> 时间：2012-09-05T14:46:11.097
> 
> 标签：javascript, gwt

我试图将文件放在 com.google.gwt.lang 下，但它仍然在编译中使用旧实现而不是我修改后的实现。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:11:41.923

根据[http://code.google.com/searchframe#T04cSGC7sWI/trunk/dev/core/super/com/google/gwt/dev/jjs/intrinsic/Intrinsic.gwt.xml](http://code.google.com/searchframe#T04cSGC7sWI/trunk/dev/core/super/com/google/gwt/dev/jjs/intrinsic/Intrinsic.gwt.xml)

```
<!-- Fundamental types required by code generation and other basics.        -->
<!-- Do not inherit this module directly; inherit com.google.gwt.core.Core. -->
<!--                                                                        -->
<!-- Types from this module are not visible to nor imported into user code. -->
<!--                                                                        --> 
```

如果您真的需要在这里进行更改，我建议您从源代码重建 gwt-dev.jar 并将其放在类路径而不是当前路径中：

[https://developers.google.com/web-toolkit/makinggwtbetter#compiling](https://developers.google.com/web-toolkit/makinggwtbetter#compiling)

# composer-php - 使用 composer.json 安装时“无分支”

> ID：12284090
> 
> 赞同：1
> 
> 时间：2012-09-05T14:46:19.177
> 
> 标签：composer-php

我有自己的带有 composer.json 的包“MyBundle”：

```
{
    "name": "mybundle",
    "require": {
        "propel/propel-bundle": "1.1.3",
        "friendsofsymfony/user-bundle": "dev-master"
    },
    "autoload": {
        "psr-0": { "": "src\" }
    },
    "target-dir": "MyBundle/"
} 
```

当我试图用作曲家检查它时（“mybundle”：“dev-master”），一切都很好，但它在“无分支”分支上。

如何为已安装的捆绑包设置分支（“主”）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:20:15.353

由于 composer 安装工作的方式以及它需要能够安装特定版本的分支，这是不可能的。当你这样做时，git 最终会处于无头状态。

如果您需要在已安装的捆绑包中工作并推送一些提交，请在执行此操作之前确保您`git checkout master`这样做。如果您忘记并提交了您的更改，您也可以只签出 master，然后将您所做的更改合并到它上面。

**更新：**如果您签出的提交与分支的最后一次提交匹配，则 Composer 现在按名称签出分支。

# android - 无效的 APK 包。尝试了我发现的所有东西，没有任何效果

> ID：12284095
> 
> 赞同：0
> 
> 时间：2012-09-05T14:46:50.830
> 
> 标签：android, apk, adb

这是我尝试调试我的应用程序时的问题：

```
[2012-09-05 15:37:57 - Applicy] Installation failed due to invalid APK file!
[2012-09-05 15:37:57 - Applicy] Please check logcat output for more details.
[2012-09-05 15:37:57 - Applicy] Launch canceled! 
```

这是日志猫：

```
?:??: W/?(?): Unable to open log device '/dev/log/main': No such file or directory 
```

这是我所做的：

1.  启用对 ADB 和应用程序的根访问
2.  允许未知来源
3.  通过USB而不是通过网络进行了尝试。
4.  重新启动亚行，我的手机和日食。
5.  检查我的目标 SDK 是否正常。我的手机正在运行 Jelly Bean，应用程序是 API 级别 10

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T12:45:05.713

这个问题的答案很简单：LogCat 没有被激活，因此系统上没有日志文件夹。这可能是由于使用了非库存内核，例如 SpeedMod。他们出于性能原因停用日志记录。

您可以通过执行以下命令来激活日志记录：

> [如何启用 LOGCAT]
> 
> 如果您是开发人员或出于任何原因想要重新启用 logcat，请执行以下操作：

```
adb shell
su
mount -o remount,rw /system
echo ANDROIDLOGGER >> /system/etc/tweaks.conf
mount -o remount,ro /system 
```

重新启动您的设备，logcat 日志记录再次工作。错误将消失。（尽管其他人最终会出现）

[SpeedMod -> 第三篇文章](http://forum.xda-developers.com/galaxy-s2/orig-development/kernel-speedmod-sgs2-ics-t1574218)

# javascript - 大js包的构建脚本

> ID：12284099
> 
> 赞同：1
> 
> 时间：2012-09-05T14:47:14.697
> 
> 标签：javascript, node.js, d3.js, requirejs

我正在使用 d3.js 编写一个非常复杂的 js 图表库。代码被组织在多个文件中（准确地说是 17 个），每个文件都有一个或多个类。此外，代码有多个外部依赖，如 d3.js、jQuery、下划线、...

要加载图表，需要以适当的顺序加载不同的文件，以管理文件之间的相关性。

我想创建一个构建脚本来管理所有依赖项（内部和外部）以创建一个独立的库。我知道requirejs，喜欢它并想使用它。但是我没有找到一种方法让它在不添加客户端依赖的情况下编译服务器端代码。

这里的目标实际上是通过仅加载一个文件，使该库可以像任何其他库一样在任何项目中轻松使用。由于我也计划在服务器端使用该库，因此我希望该解决方案也与 node.js 兼容。

这是一个虚假的代码示例，显示了我的代码的样子。

```
//  in file1.js
var Foo = {}
Foo.Class1 = function(params){
    this.params = params;
    this.bar = function(){
        return this.params.bar || "bar";
    }
}

//  in file2.js
foo.Class2() = function(params){
   $.extend(this, new Foo.Class1(params));

   this.bar = function(){
        return this.params.bar || "BAR";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:20:44.020

有很多项目可以结合 JavaScript，例如[YUI Compressor](http://developer.yahoo.com/yui/compressor/)、[Grunt](http://gruntjs.com/)或[Brunch](http://brunch.io/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:30:48.937

我选择和Grunt一起去。没有真正的原因，只是它看起来有据可查且非常活跃。

所以在知道 Grunt 的存在后不到 15 分钟，这里有一个 grunt.js 文件可以解决我的问题。

```
module.exports = function(grunt) {

    // Project configuration.
    grunt.initConfig({
      concat: {
        dist: {
          src: ['file1.js', 'file2.js'],
          dest: 'built.js'
        }
      }
    });
}; 
```

真的很期待使用更多的 Grunt！

为安德烈亚斯·科伯勒干杯！

# php - 如何解压缩扩展名为 gzip 的文件夹

> ID：12284100
> 
> 赞同：-2
> 
> 时间：2012-09-05T14:47:15.630
> 
> 标签：php

我在客户端的扩展名为 .gz 的文件夹中遇到问题，其中包含 xml 文件。我必须将文件夹下载到本地目录，然后我需要提取文件夹。

我能够将 .gz 文件夹下载到本地，但无法提取该文件夹。

我尝试使用

```
ZipArchive::extractto($targetfolder); 
```

但它不接受.gz。

当我搜索堆栈溢出时，我只找到了 .gz 文件的答案，而不是 .gz 文件夹的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:56:25.217

尝试使用 PHP 的内置[gzfile()](http://php.net/manual/en/function.gzfile.php)函数。

这将以 4kB 块解压缩文件：

```
function uncompress($srcName, $dstName) {
    $sfp = gzopen($srcName, "rb");
    $fp = fopen($dstName, "w");

    while ($string = gzread($sfp, 4096)) {
        fwrite($fp, $string, strlen($string));
    }
    gzclose($sfp);
    fclose($fp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:54:27.213

[ZipArchive](http://php.net/manual/en/class.ziparchive.php)的文档没有说明能够打开`gz`格式文件（`zip`并且`gz`不*一样*）。你可能需要使用[Zlib](http://php.net/manual/en/book.zlib.php)来解压你的`gz`文件，如果它是一个`tar.gz`or`tgz`文件，你还需要一些东西来解压文件。

[这个问题](https://stackoverflow.com/questions/3781101/how-to-extract-a-tar-gz-archive-in-php-without-system)和[这个较新的问题](https://stackoverflow.com/questions/4878792/how-can-i-read-a-tar-gz-file-with-php)讨论了如何`tar.gz`在 PHP 中提取文件。

# java - 从 Safari (IOS) 访问文件系统

> ID：12284108
> 
> 赞同：2
> 
> 时间：2012-09-05T14:47:33.140
> 
> 标签：java, iphone, ios, ipad, safari

对于基于 Windows/Linux 的浏览器，我可以使用 Java 插件来访问文件系统。由于 IOS 不支持 Java，有没有其他方法可以完成它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:15:07.270

不，你不能。无法在 iOS Safari 中上传甚至下载文件。在 iCab 中，您可以上传，`<input type = 'file'>`但不能访问文件系统。从浏览器访问整个文件系统将是一场安全灾难。而且java插件也不能访问整个文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:55:14.907

这取决于你想做什么。如果您只想让用户导航到感兴趣的文件，然后将其上传到服务器进行处理，您可以`<input type='file'>`在 HTML 中使用。如果您需要更多功能，您必须在浏览器中实现原生插件或使用 Flash。

# jquery - 多次刷新css动画

> ID：12284111
> 
> 赞同：1
> 
> 时间：2012-09-05T14:47:46.137
> 
> 标签：jquery, html, css, css-animations

我有一个运行一次的非常复杂的动画，我不能使用“animation-iteration-count:infinite;” 多次重申。还有另一种方法可以做到这一点吗？比如刷新 div 会刷新动画吗？（如何刷新 div？）

这是html：

```
<div id="hold">
<p id="myname" class="small-caps">
<span id="layer0Go" class="drag">w</span>
<span id="layer1Go" class="drag">w</span>
<span id="layer2Go" class="drag">w</span>
<span id="layer3Go" class="drag">m</span>
<span id="layer4Go" class="drag">e</span>
<span id="layer5Go" class="drag">s</span>
<span id="layer6Go" class="drag">s</span>
<span id="layer7Go" class="drag">a</span>
<span id="layer8Go" class="drag">g</span>
<span id="layer9Go" class="drag">e</span>
<span id="layer10Go" class="drag">l</span>
<span id="layer11Go" class="drag">a</span>
<span id="layer12Go" class="drag">b</span>
<span id="layer13Go" class="drag">r</span>
<span id="layer14Go" class="drag">o</span>
<span id="layer15Go" class="drag ball"></span>
</p>
</div> 
```

一些CSS：

```
#layer0Go{ -webkit-animation: a0-translate 5s linear 0s 1 none, b0-translate 5s linear 5s 1 none, c0-translate 1.5s linear 10s 1 none, d0-translate 5s linear 11.5s 1 none, v0-translate 7s linear 16.5s 1 forwards; 
```

所有层都使用相同的 css。

如果我把动画迭代计数：无限；#hold 它什么都不做。当然，如果我把它放到 layer0Go 中，它会无限重复第一个动画而不运行其他动画。它们是从这里的项目更改的一些动画字母：[https](https://developer.mozilla.org/pt-PT/demos/detail/css-tricks) ://developer.mozilla.org/pt-PT/demos/detail/css-tricks 有 什么想法吗？我做了一个小提琴：http: [//jsfiddle.net/2AnEJ/](http://jsfiddle.net/2AnEJ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:07:17.423

要刷新 div 只需执行此操作...

```
$("#animatie").html($("#animatie").html()); 
```

You could use setInterval to reset it after each batch of animation is done.

[http://jsfiddle.net/2AnEJ/1/](http://jsfiddle.net/2AnEJ/1/)

(obviously that's an example - change the interval to the total time of the animations)

# powershell - 如何使用 powershell 从 S3 复制文件？

> ID：12284120
> 
> 赞同：1
> 
> 时间：2012-09-05T14:48:01.170
> 
> 标签：powershell, amazon-s3

我有以下脚本，它将所有文件从**c:\images**复制到**mybucket\myfolder**

我该如何做相反的事情并从**mybucket\myfolder**复制到**c:\images**？

```
$key = "mykey"
$secret = "mysecret"

$cbsnap = "CloudBerryLab.Explorer.PSSnapIn"
if ( (Get-PSSnapin -Name $cbsnap -ErrorAction SilentlyContinue) -eq $null )
{
    Add-PsSnapin $cbsnap
}

Set-CloudOption -PermissionsInheritance "inheritall"

$s3 = Get-CloudS3Connection -Key $key -Secret $secret

Set-Logging –LogPath c:\temp\sync.log -LogLevel info

$bucket = "mybucket\myfolder"
$local = "c:\images\"

#copy from local to S3
$s3selflhost = $s3 | Select-CloudFolder -path $bucket
$src = Get-CloudFilesystemConnection | Select-CloudFolder -path $local
$src | Copy-CloudItem $s3selflhost -filter "*" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:59:40.770

只需切换代表 S3 和本地磁盘上的文件夹的参数：

```
$s3selflhost | Copy-CloudItem $src -filter "*" 
```

实际上，这只是以下命令的流水线版本：

```
Copy-CloudItem -Destination $src -filter "*" -Folder $s3selflhost 
```

因此，您实际上切换了目标和源文件夹参数。

# ios - 检测 UIView 在另一个 UIView 中的移动

> ID：12284121
> 
> 赞同：1
> 
> 时间：2012-09-05T14:48:03.500
> 
> 标签：ios, xcode, uiview, key-value-observing

**是）我有的：**

当我移动 a`UIView`时，我通过执行以下操作来检测它的移动：

```
[myView.layer addObserver:self forKeyPath:@"position" options:NSKeyValueObservingOptionNew context:nil]; 
```

作为我正在移动`myView`的班级，我必须检测到不同的位置。`UIView``self``UIView`

**问题：**

当我放入`myView`另一个`UIView`并移动时`anotherView`：

```
[anotherView addSubview: myView]; 
```

方法：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context; 
```

不再被调用，尽管理论上`myView`也是移动的。`NSNotification`每次发生“运动”时，我都尝试使用被解雇，但我发现它很笨拙。这类问题有“优雅”的解决方案吗？

* * *

对于`UIView`我正在使用这种方法的运动：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:55:11.783

我在这里上传了一个示例项目，它可以干净地做到这一点：

[https://github.com/n9986/ObservingUIViewMovement](https://github.com/n9986/ObservingUIViewMovement)

我曾经有过类似的要求。这里的问题是，当您将 UIView 添加到另一个 UIView（称为 superView）时，它现在驻留在 superView 的坐标空间中。因此，superView 在其父坐标空间中的移动不会影响其子视图。

我将在这里稍微解释一下代码。

我们有`ViewController`,`MyView`和`InsideView`类来说明您的典型类。我想在 viewController 中观察 InsideView 是否移动了。所以在自定义类中，我添加了一个属性`positionInWindow`，并在 superView 移动时更新它。

所以在`InsideView.m`：

```
// Make sure this property exists in .h file to make the class KVC compliant
@synthesize positionInWindow;

// This method is called when the super view changes.
- (void)didMoveToSuperview
{
    // Drop a random log message
    NSLog(@"MAI SUPERVIEW HAS CHANGED!!!");

    // Start observing superview's frame
    [self addObserver:self 
           forKeyPath:@"superview.frame" 
              options: NSKeyValueObservingOptionNew 
              context:nil];
}

- (void)observeValueForKeyPath:(NSString *)keyPath 
                      ofObject:(id)object 
                        change:(NSDictionary *)change 
                       context:(void *)context
{
    // Here we update the positionInWindow because 
    // we know the superView.frame has changed
    CGPoint frameOrigin = self.frame.origin;
    [self setPositionInWindow:[[self window] convertPoint:frameOrigin
                                                 fromView:self]];
} 
```

以及您想要监控此视图的任何地方：

```
// On an instance of InsideView
[insideView addObserver:self 
             forKeyPath:@"positionInWindow" 
                options:NSKeyValueObservingOptionNew 
                context:nil]; 
```

这个解决方案的好处是`InsideView`不需要知道它是谁`superView`。即使`superView`稍后更改，此代码也将起作用。类没有修改`MyView`。并且任何类都可以独立于该事实来监视它的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:53:01.953

据我所知，UIView 不会“自行”移动，这意味着您可能有一些用于移动的代码

也许尝试在那里设置一些委托或通知，而不是使用 addObserver：

# excel - excel自定义函数

> ID：12284125
> 
> 赞同：-1
> 
> 时间：2012-09-05T14:48:19.487
> 
> 标签：excel, function

![excel表格](../Images/ce6a52233d7fc608aad2d949e1726884.png)

我有这个包含超过 6K 行的表。我需要一个函数，它将在每个“A”列的单元格上运行并检查 -> 如果“b”上的单元格是粗体而不是复制它，如果不是，复制它上面的单元格。

我在互联网上找到了这个函数，但我没有使用 VB，如果有人已经知道如何在 excel 中使用 VB 函数，那么从一开始就学习它会更容易。

如您所见，此代码将 G 列单元格替换为数字。

```
Sub BoldCells()
Dim TheRange As Range
Dim TheCell As Range
Set TheRange = Range("G1", Range("G65536").End(xlUp))
For Each TheCell In TheRange
If TheCell.Font.Bold = True Then
TheCell = 7
Else: TheCell = 0
End If
Next TheCell
End Sub 
```

非常感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:25:18.633

我不确定这有多有效，但看起来像是处理 10 行左右的数据。

```
Sub test()
    Dim rng As Range, str As String
    Set rng = Range("b1")
    str = ""
    Do
        If rng.Font.Bold Then
            str = rng.Value
        End If
        rng.Offset(0, -1).Value = str
        Set rng = rng.Offset(1, 0)
    Loop Until IsEmpty(rng)
End Sub 
```

# iphone - 从用户输入中分离多个项目

> ID：12284126
> 
> 赞同：2
> 
> 时间：2012-09-05T14:48:23.250
> 
> 标签：iphone, objective-c, ios, user-interface

我希望我的用户输入任意长的项目列表，然后在幕后将它们分离成我可以轻松存储在数据库中的格式。我对如何做到这一点有两个想法，但只有一个我可以开始工作（不太优雅的版本）。

想法 1（这是我可以开始工作的）：例如`UITextView`，为用户提供 a 并让他们输入由特殊字符分隔的项目`;`。当他们提交表单时，我用正则表达式解析它，然后相应地存储。从 UI/UX 的角度来看，这并不像我想要的那样优雅，但我可以让它工作。

想法2（这是我认为更好的方法）：提供一个`UITextField`带有`+`按钮的按钮。用户输入 1 个项目，然后单击`+`按钮使另一个项目`UITextField`出现。如果屏幕上有超过 1 个文本字段，它们每个都会获得一个`-`按钮来“删除”该字段。关于我如何去做这件事的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:23:06.827

选项 2 听起来使用 UITableView 会很容易。您可以在其上方有一个文本字段，这样您就不必显示新视图来输入数据。然后在他们输入数据后清除文本字段。您可以使用滑动删除表来删除条目。

```
/-----------------\
|Prompt text  | + |
|------------------
| User entry 1    |
| User entry 2    |
| User entry 3    |
| User entry 4    |
|                 |
\-----------------/ 
```

实现选项 1 的另一种方法是[TITokenField](https://github.com/thermogl/TITokenField)。它允许用户键入，直到他们按下令牌分隔符键（我认为默认情况下是'，'）。此时会根据用户输入的文本创建一个令牌。

可以使用各种回调，以便您可以在创建令牌之前验证它们的输入。处理用户输入的项目列表就像遍历令牌数组一样简单。额外功能：TITokenField 可以将数据源用作自动完成功能。演示应用程序显示的内容与您所描述的内容非常相似，带有一个加号按钮来添加新令牌。可以通过选择令牌然后按退格键来删除令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:58:07.307

查看 iPhone 上主/细节的 Xcode 模板。

它有一个表格视图，您可以通过按右上角的 + 按钮向其中添加新行。在这种情况下，每一行都是一个默认的 tableViewCell，但您可以轻松修改以添加一个`UITextField`

# android - 在同一窗口中获取 Eclipse 中的 XML 编辑器和 Android Common XML 编辑器

> ID：12284128
> 
> 赞同：0
> 
> 时间：2012-09-05T14:48:33.640
> 
> 标签：android, xml, eclipse

我试图为 Android 开发定制 Eclipse 并遇到了这个“问题”。

当您使用通用 Android XML 编辑器打开 XML 文件时，您会在底部看到 2 个选项卡，图形布局和常规文本源。

当您使用 XML 编辑器打开 XML 文件时，您会看到 2 个选项卡，即设计和源代码。设计是有时我觉得很有用的节点视图。

是否有可能以某种方式在 Common Android XML Editor 窗口中获取 Design 选项卡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:56:00.390

即使您不能在另一个编辑器中重用来自一个编辑器的选项卡（至少，正如 Konstantin 指出的那样，在没有编程的情况下并非如此），您可以同时在两个不同的编辑器中打开同一个文件并将它们并排放置。使用默认编辑器打开文件，然后右键单击文件，选择*Open With*，然后选择备用编辑器。在打开两个编辑器的情况下，您可以拖动其中一个的选项卡并移动它，使两者并排。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:23:16.457

作为用户，您不能从一个编辑器中获取页面并在另一个编辑器中使用它。根据编辑器页面的实现细节，插件开发人员可以创建一个重新使用现有页面的新编辑器实现。

# coding-style - 如何对源代码文档中的字段和方法进行排序？

> ID：12284130
> 
> 赞同：1
> 
> 时间：2012-09-05T14:48:36.043
> 
> 标签：coding-style, ide, code-formatting

在许多编程语言中，字段和方法可以自由排列，但顺序会影响代码的可读性。**您采用哪种订购策略？**

*背景：我们（特里尔大学的一组研究人员）已经查看了不同开源项目的代码，并试图弄清楚应用了哪些策略。但正如您可以想象的那样，很难从代码中提取这些信息。现在，我们对您应用的具体策略感兴趣，并希望在这里分享和讨论这些信息。请在我们的[项目页面](http://www.st.uni-trier.de/icsm12/)上找到更多信息。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:03:00.157

*   私有领域优先
*   公共领域（如果有）
*   属性（如果有的话，例如在 C# 中）或简单的 Getter/Setter

*   构造函数

*   公共方法
*   私有方法接近它们在公共方法中的出现（在函数式编程语言中，如果可能的话，甚至在公共方法中）

此外，我尝试从语义上或按照它们对班级的重要性对这些部分进行排序。我真的尝试构建我的代码，以便我可以快速了解所有重要的内容。然而，在非常大的课程中，我有我的问题要遵循我的策略，然后我经常使用大纲来获取字段或方法，而不是通过滚动来查找它们。

# java - JAXP XSLT 转换器默认使用错误的实现

> ID：12284131
> 
> 赞同：6
> 
> 时间：2012-09-05T14:48:42.360
> 
> 标签：java, xslt, tomcat, jaxp

我有一个 Tomcat 5.5 Web 应用程序，它使用 Apache Commons-Configuration 库在运行时生成 XML 配置文件。反过来，Commons-Configuration 使用`javax.xml.transform`JAXP API 来完成此操作。

由于升级到 Java 7，操作失败并显示以下错误消息：

```
Caused by: javax.xml.transform.TransformerFactoryConfigurationError: Provider org.apache.xalan.processor.TransformerFactoryImpl not found
    at javax.xml.transform.TransformerFactory.newInstance(Unknown Source) 
```

在过去的版本中，我从未捆绑 xalan.jar，而是依赖于平台默认的 XSLT 实现。

我检查过的一些事情：

*   `META-INF/services/javax.xml.transform.TransformerFactory`我的任何应用程序 JAR 文件、库 jar 或 Tomcat jar 中都没有条目
*   系统`javax.xml.transform.TransformerFactory`属性未设置（在运行时通过 JVisualVM 验证）
*   目录中没有`jaxp.properties`文件`jre/lib`

运行 with`-Djaxp.debug=1`产生以下输出：

```
JAXP: find factoryId =javax.xml.transform.TransformerFactory
JAXP: loaded from fallback value: org.apache.xalan.processor.TransformerFactoryImpl 
```

这个后备值来自哪里？Oracle 发布了 Xalan 转换器，但从 1.7 开始将其重新打包为`com.sun.org.apache.xalan.processor...`. *那*不应该是后备值吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T11:11:45.123

自己发现了问题。事实证明`apache-tomcat-5.5.23-compat`，当我从 Java 1.4.2 迁移时，我已经安装了这些文件。解决方案是删除`$CATALINA_HOME/common/endorsed`目录下的所有内容（特别是`xercesImpl.jar`and `xml-apis.jar`）和`bin/jmx.jar`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T08:03:27.057

Glassfish 服务器 V3.1 也遇到了同样的问题，通过将 xalan-2.7.0.jar 放在 $GLASSFISH_HOME\lib\endorsed 目录中，问题得到了解决。

# java - 从一个类运行两个方法

> ID：12284133
> 
> 赞同：-4
> 
> 时间：2012-09-05T14:48:47.987
> 
> 标签：java, multithreading

我有 A 类，其中我有两个方法定义 ValidateA 和 ValidateB

```
class A {
   ValidateA() {
        /////
    }

   ValidateB() {
        ////
    }
} 
```

我想同时并行运行这两个步骤并获得组合状态。我怎样才能继续使用线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:08:53.443

始终建议使用`Executors`Java 5 中引入的出色类。它们可以帮助您管理后台任务并隐藏`Thread`类中的代码。

像下面这样的东西会起作用。它创建一个线程池，提交 2 个`Runnable`类，每个类调用一个 validate 方法，然后等待它们完成并返回。它使用`Result`你必须弥补的对象。它也可以是`String`or`Integer`并且取决于 validate 方法返回的内容。

```
// reate an open-ended thread pool
ExecutorService threadPool = Executors.newCachedThreadPool();
// since you want results from the validate methods, we need a list of Futures
Future<Result> futures = new ArrayList<Result>();
futures.add(threadPool.submit(new Callable<Result>() {
    public Result call() {
       return a.ValidateA();
    } 
});
futures.add(threadPool.submit(new Callable<Result>() {
    public Result call() {
       return a.ValidateB();
    } 
});
// once we have submitted all jobs to the thread pool, it should be shutdown,
// the already submitted jobs will continue to run
threadPool.shutdown();

// we wait for the jobs to finish so we can get the results
for (Future future : futures) {
    // this can throw an ExecutionException if the validate methods threw
    Result result = future.get();
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:14:14.783

阅读有关[CyclicBarrier的信息](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html)

```
class A {
  public Thread t1;
  public Thread t2;
  CyclicBarrier cb = new CyclicBarrier(3);
  public void validateA() {
    t1=new Thread(){
       public void run(){
         cb.await();       //will wait for 2 more things to get to barrier
          //your code
        }};
    t1.start();
  }
  public void validateB() {
    t2=new Thread(){
       public void run(){
         cb.await();      ////will wait for 1 more thing to get to barrier
          //your code
        }};
    t2.start();
  }
  public void startHere(){
        validateA();
        validateB();
        cb.wait();      //third thing to reach the barrier - barrier unlocks-thread are                 running simultaneously
  }
} 
```

# java - 使用 GWT 在 DisclosurePanel 中调整大小布局面板

> ID：12284139
> 
> 赞同：1
> 
> 时间：2012-09-05T14:49:04.213
> 
> 标签：java, gwt

我在 DisclosurePanel 中使用 ResizeLayoutPanel 时遇到问题。

我在 ResizeLayoutPanel 中有一个 Datagrid，在 DisclosurePanel 中有一个 ResizeLayaoutPanel。问题是在加载数据时，如果 DisclosurePanel 已关闭，当用户打开closurePanel 时，它会发现表为空。如果用户在 DisclosurePanel 打开时执行此操作，则可以正常工作。

知道如何解决这个问题吗？

这是代码：

```
ResizeLayoutPanel resizeLayoutPanel = new ResizeLayoutPanel();

    resizeLayoutPanel.setWidth("100%");
    resizeLayoutPanel.setStyleName("gwt-resizeLayoutPanel-Example");

    /****CREATE COLUMNS [BEGIN] ***************************************************************************/
    // Create column.
    TextColumn<Object> column = new TextColumn<Object>() {
        @Override
        public String getValue(Object object) {
            return "Test";
        }
    };
    /******CREATE COLUMNS [END] ***************************************************************************/

    cellTable = new DataGrid<Object>();
    cellTable.addColumn(column, "Example");
    cellTable.setKeyboardSelectionPolicy(HasKeyboardSelectionPolicy.KeyboardSelectionPolicy.BOUND_TO_SELECTION);
    cellTable.setWidth("100%");
    cellTable.setEmptyTableWidget(new Label("Example table"));

    resizeLayoutPanel.add(cellTable);

    //Link dataProvider with CellTable
    dataProvider.addDataDisplay(cellTable);

    this.container = ModuleContainer.getAdvancedDisclosurePanel("Samples");
    this.container.setWidth("100%");
    this.container.setContent(resizeLayoutPanel);

    return this.container; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:28:17.900

ResizeLayoutPanel 提供resize（实现ProvidesResize）但不需要resize（不实现RequiresResize）。

由于普通状态下的 ResizeLayoutPanel 不听 resize，所以你必须故意调整它的大小，或者编写代码来调整它的大小。也许，将宽度和高度设置为 100%。

然后，为什么将表格放在 ResizeLayoutPanel 中？

ResizeLayoutPanel 为 RequiresResize 的小部件提供调整大小。您需要扩展单元格表以实现 RequiresResize，以便 ResizeLayoutPanel 能够调整它的大小。

在编程 GWT 时，任何人都需要学习的第一个概念是了解为什么/如何从根调整大小面板创建完整的 RequiresResize-RequiresResize 链/树。如果您的调整大小链/树的根不是 RootLayoutPanel，那么您必须故意调整该根的大小。

在这种情况下，您已将 ResizeLayoutPanel 设为 resize 不存在的调整大小链的根。使用另一个实现 RequiresResize 的面板，以便它可以由父级调整大小 - 以及确保父级可由用户或另一个可调整大小的父级手动调整大小。

我可以问你自己，使用 ResizeLayoutPanel 的原因是什么而不提供调整大小的方法，也没有将其用作调整大小链的根？

# phpstorm - 如何在 phpstorm 中使用 phalcon-devtools\ide\phpstorm？

> ID：12284141
> 
> 赞同：18
> 
> 时间：2012-09-05T14:49:10.020
> 
> 标签：phpstorm, phalcon

我正在尝试将 Phalcon 开发人员工具与 phpstorm 集成。这里有一个[视频](http://docs.phalconphp.com/en/0.5.0/reference/tools.html#integrating-tools-with-phpstorm-ide)，但由于我的位置，我无法观看。

我在文档中找不到任何其他可用的参考资料，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-05T15:36:42.927

以下是步骤。

*   确保您已安装 phalcon-devtools[说明](http://docs.phalconphp.com/en/latest/reference/tools.html)
*   使用 phalcon-devtools 创建一个项目（除非你已经有一个项目）
*   启动 PHPStorm 并在那里创建项目（除非你已经这样做了）。
*   单击文件设置 (Ctrl+Alt+S)（或 PHPStorm-Preferences for Mac）
*   单击第二个选项“命令行工具支持”
*   单击 + 图标，会出现一个新的弹出窗口。确保您选择了“自定义框架”
*   在新的弹出类型中：

    框架：Phalcon

    工具路径：/Applications/MAMP/htdocs/phalcon-tools/ide/phpstorm/phalcon.sh

    别名：法尔康

    描述：Phalcon 开发者工具

这假设您的 phalcon-tools 已安装在：

```
/Applications/MAMP/htdocs/phalcon-tools/ 
```

此外，如果您使用 Windows 环境，则应使用 phalcon.bat 而不是 phalcon.sh（请参阅上面的工具路径行）

*   单击应用，然后单击确定。
*   单击工具 - 运行命令 (Ctrl+Shift+X)
*   在命令输出窗口中，键入：

    phalcon 命令

您应该能够看到输出。如果有错误检查你的路径。键入任何 phalcon-tools 命令来为您的项目生成组件。

*   在 PHPStorm 中，您应该在项目资源管理器“外部库”中看到。右键单击并选择“配置 PHP 包含路径”
*   在新对话框中单击 + 并导航到 /Applications/MAMP/htdocs/phalcon-tools/ide/phpstorm/0.5.0 文件夹，然后单击确定。

现在，当您键入代码时，相关的帮助弹出窗口将显示所有相关功能。

[2012-09-07：这里](https://github.com/kenjikobe/phalcon-devtools/tree/master/ide/phpstorm/0.5.0/Phalcon)有 Phalcon PHPStorm 支持 0.5.0 的 beta 实现。在接下来的几周内，代码将成为框架的一部分，并包含在 0.5.0 版本中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-17T10:14:04.620

我在我的 Windows Dev 机器上执行 phalcon.bat 文件时遇到了一些问题，没有安装 PHP，所以我研究了一个更简单的 phpstorm 解决方案。

只需执行以下操作：

*   点击“外部库”
*   单击“配置 PHP 包含路径...”
*   点击添加
*   添加“phalcon-devtools\ide\[YOUR_VERSION_DIRECTORY]”

比你有 phalcon 的代码完成:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T12:46:41.077

如果您在 WAMP 服务器的 phpinfo 页面中看到加载了 Phalcon 模块，请执行以下操作以在 CLI 模式下加载该模块。

将 <WAMP INSTALATION >\bin\apache\<APACHE VERSION >\bin\php.ini 复制到 \bin\php\<PHP VERSION>\

将 php 路径设置为 <WAMP INSTALATION>\bin\php\<PHP VERSION>\

那应该可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-17T16:45:23.993

从此变了，

“作为我们重组的一部分，并致力于在功能和组织方面建立一个更强大的框架，我们已经从 Phalcon DevTools 存储库中删除了 IDE 存根，并移至它自己的存储库。”

新说明位于此处： [https ://blog.phalconphp.com/post/phalcon-ide-stubs-repository](https://blog.phalconphp.com/post/phalcon-ide-stubs-repository)

# xades4j - 关于 SignTTest 的更多提示

> ID：12284142
> 
> 赞同：1
> 
> 时间：2012-09-05T14:49:11.567
> 
> 标签：xades4j

请您向我建议更多有关更改提供商设置的提示吗？

我可以在 PKCS11KeyStoreKeyingDataProvider.java 中看到这一点：

```
 public class PKCS11KeyStoreKeyingDataProvider extends KeyStoreKeyingDataProvider
{
    /**
     *
     * @param nativeLibraryPath the path for the native library of the specific PKCS#11 provider
     * @param providerName this string is concatenated with the prefix SunPKCS11- to produce this provider instance's name
     * @param certificateSelector the selector of signing certificate
     * @param keyStorePasswordProvider the provider of the keystore loading password (may be {@code null})
     * @param entryPasswordProvider the provider of entry passwords (may be {@code null})
     * @param returnFullChain indicates of the full certificate chain should be returned, if available
     * @throws KeyStoreException
     */
    public PKCS11KeyStoreKeyingDataProvider(
            final String nativeLibraryPath,
            final String providerName,
            SigningCertSelector certificateSelector,
            KeyStorePasswordProvider keyStorePasswordProvider,
            KeyEntryPasswordProvider entryPasswordProvider,
            boolean returnFullChain) throws KeyStoreException
    { 
```

在我的 SignerTTest.java 中：

```
PKCS11KeyStoreKeyingDataProvider ptccKeyingDataProv = new PKCS11KeyStoreKeyingDataProvider
                ("D:\\pteidpkcs11.dll", 
                "pteidpkcs11",
                new FirstCertificateSelector(), null, null, false); 
```

但我不明白，通常我下载适当的.DLL所以这里库pteidpkcs11.dll位于D：（所以在java中我放了“\\”：“D：”\\“pteidpkcs11.dll”）

在我输入 .dll 的名称后，这里将 pteidpkcs11 作为参数。

“new FirstCertificateSelector()”之后就是选择keystore列表的第一个证书，不是吗？

第一个 null 是密钥库提供者的密码，不是吗？

第二个 null 是证书的密码，不是吗？

而 returnFullChain 究竟有什么作用呢？

而且我想了解有关如何配置提供程序的信息，因为在我搜索期间目前还不清楚。

谢谢，

威廉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:59:40.613

> new FirstCertificateSelector() 就是选择keystore列表的第一个证书，不是吗？

是的。您可以传入该`SigningCertSelector`接口的任何其他实现。

> 第一个 null 是密钥库提供者的密码，不是吗？第二个 null 是证书的密码，不是吗？

是的。它为空，因为特定的 PKCS#11 提供程序处理密钥存储条目的保护（它是带有 PIN 的智能卡）。

> 而 returnFullChain 究竟有什么作用呢？

密钥库中的条目可能包含密钥和具有完整证书链的相关证书。此参数控制该`getSigningCertificateChain`方法是返回完整链还是仅返回叶证书。

适当的配置和 DLL 将取决于您使用的 PKCS11 提供程序。在那次测试中，我使用的是葡萄牙公民卡和智能卡读卡器。请注意，这`PKCS11KeyStoreKeyingDataProvider`只是基于 sun 的 PKCS11 提供程序的 java 密钥存储的适配器。

# php - yii cactivedataprovider 默认排序是指定的，但是前台使用AJAX排序是无效的

> ID：12284147
> 
> 赞同：2
> 
> 时间：2012-09-05T14:49:25.387
> 
> 标签：php, yii

yii cactivedataprovider 默认排序是指定的，但是前台使用AJAX排序是无效的。使用 sortableattributes 排序无效

```
public function actionIndex()
{
    // renders the view file 'protected/views/site/index.php'
    // using the default layout 'protected/views/layouts/main.php'
    $article = new CActiveDataProvider('article',array(
        'criteria'=>array(
            'order'=>'id DESC',
        ),
        'pagination'=>array(
            'pageSize'=>15,
        ),

    ));
    $this->render('index',array('article'=>$article));
}

$this->widget('bootstrap.widgets.TbListView', array(
'dataProvider'=>$article,
'itemView'=>'_list',   // refers to the partial view named '_post'
'template'=>'{sorter}{items}{pager}{summary}',
'sortableAttributes' => array(
    'id',
    'date'
) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T07:18:51.033

默认顺序必须指定为 的[defaultOrder](http://www.yiiframework.com/doc/api/1.1/CSort#defaultOrder-detail)属性[`CActiveDataProvider::sort`](http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider#sort-detail)。

所以修改你的代码为

```
$article = new CActiveDataProvider('article',array(
        'sort'=>array(
            'defaultOrder'=>'id DESC',
        ),
        'pagination'=>array(
            'pageSize'=>15,
        ), 
```

# qt - 对全局属性 QML 的无效写入

> ID：12284151
> 
> 赞同：15
> 
> 时间：2012-09-05T14:49:44.867
> 
> 标签：qt, properties, qt4, qml, qtdeclarative

我有这个信号

```
class SystemUICfgScanner 
{
    /*code here*/
signals:
    void error(QString desc);
    /*more code*/
}; 
```

在 QML 中，我以这种方式使用 InfoBanner：

```
InfoBanner
{
    property string infodetails: ""
    id: systemuicfgErrorBanner
    text: "Error: " + infodetails
    Connections
    {
        target: cfgScanner
        onError: infodetails = desc
    }
} 
```

发出错误（QString）信号时，我收到此错误

```
Invalid write to global property "infodetails" 
```

我究竟做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T17:03:11.447

尝试`InfoBanner`通过 id 引用实例：

```
InfoBanner
{
    property string infodetails: ""
    id: systemuicfgErrorBanner
    text: "Error: " + infodetails
    Connections
    {
        target: cfgScanner
        onError: systemuicfgErrorBanner.infodetails = desc
    }
} 
```

# ruby-on-rails - 考拉如何在facebook中获取任何用户的好友列表

> ID：12284154
> 
> 赞同：1
> 
> 时间：2012-09-05T14:49:52.550
> 
> 标签：ruby-on-rails, facebook, koala

我正在使用 Koala 的 facebook api，当我尝试获取另一个用户的朋友列表时遇到问题（如果我有权限）

我的代码是：

```
@graph = Koala::Facebook::GraphAPI.new(@token)
@friends = @graph.get_connections("another user id", "friends") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:24:38.373

```
@graph.get_connections('me', 'friendlists') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-05T07:21:24.330

我也在使用 Koala 的 facebook api ......

但是你用单行得到你的 facebook 朋友列表......

并且不担心分页等......

```
@profile = @graph.get_object("me")
# perfectly get facebook friends count :)
@friends = @graph.get_connection("me", "friends",api_version:"v2.0").raw_response["summary"]["total_count"] 
```

# matlab - 使用 MATLAB 绘制平均光谱图

> ID：12284157
> 
> 赞同：1
> 
> 时间：2012-09-05T14:50:01.293
> 
> 标签：matlab, plot, average, spectral

我有四个 1xN 声音信号，我想查看以下链接中给出的平均频谱图：http: [//i1233.photobucket.com/albums/ff396/sakurayen/Plot/AMaximumLikelihoodApproachtoSinglechannelSourceseparationpdf-AdobeReader.jpg](http://i1233.photobucket.com/albums/ff396/sakurayen/Plot/AMaximumLikelihoodApproachtoSinglechannelSourceseparationpdf-AdobeReader.jpg)

我尝试使用 MATLAB 函数 PSD 来绘制光谱，但我得到了不同的图。请注意，用于两个图的数据是相同的。

在 MATLAB 中使用 PSD 函数获得的绘图：http: [//i1233.photobucket.com/albums/ff396/sakurayen/Plot/PowerSpectralDensityofRJMF.png](http://i1233.photobucket.com/albums/ff396/sakurayen/Plot/PowerSpectralDensityofRJMF.png)

谢谢！

# c# - 在列表列表中查找重复对象（使用 linq？）

> ID：12284162
> 
> 赞同：0
> 
> 时间：2012-09-05T14:50:07.463
> 
> 标签：c#, linq, list

我有一个使用 LINQ 创建的包含状态代码对象的列表列表：

```
List<List<StatusLookup>> statusList = new List<List<StatusLookup>>();

foreach(var action in DbmsReport.Actions){
    statusList.Add((from stat in MyFactory.CreateQueryable<StatusLookup>()
                    where stat.ActionTypes.Contains(action)
                    select stat).ToList());
} 
```

我现在需要以某种方式解析它`statusList`并找到每个列表中的所有 StatusLookup 对象，例如：

```
DbmsReport.Actions = ( sprint, fight );

StatusLookup = ( { id = 0, text = "exhausted", ActionTypes = ( sprint, fight ) }
                 { id = 1, text = "tired", ActionTypes = ( jog, sprint, fight ) }
                 { id = 2, text = "rested", ActionTypes = ( sleep ) }
               ); 
```

因此，在这种情况下，我需要获取一个包含`StatusLookup`“疲惫”和“疲倦”的列表，没有特定的顺序，获取此列表的最佳方法是什么？从这个例子中可以看出，每个可以有 1 个或多于 1`StatusLookup`个`DbmsReport`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:56:35.530

试试这个把它弄平，另外你可以根据需要添加 where 子句。

```
var r = from p in statusList
        from q in p
        select q; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:16:40.800

你不能不做吗？

```
var lookups= MyFactory.CreateQueryable<StatusLookup>()
             .Where(x=> DbmsReport.Actions.All(y=>x.ActionTypes.Contains(y))).ToList(); 
```

或者如果您想要一个或条件（即 Report= sprint,fight 并且您想查找所有具有 sprint 或战斗的查找）然后

```
var lookups= MyFactory.CreateQueryable<StatusLookup>()
             .Where(x=> DbmsReport.Actions.Any(y=>x.ActionTypes.Contains(y))).ToList(); 
```

# ubuntu - 无法在 Sublime text 2 中安装包控件

> ID：12284166
> 
> 赞同：17
> 
> 时间：2012-09-05T14:50:19.083
> 
> 标签：ubuntu, packages, sublimetext2

我正在使用 ubuntu 12.04。我按照网站上所说的做了，但我收到了这个错误：

```
import urllib2,os; pf='Package Control.sublime-package'; ipp=sublime.installed_packages_path(); os.makedirs(ipp) if not os.path.exists(ipp) else None; urllib2.install_opener(urllib2.build_opener(urllib2.ProxyHandler())); 
open(os.path.join(ipp,pf),'wb').write(urllib2.urlopen('http://sublime.wbond.net/'+pf.replace(' ','%20')).read()); print 'Please restart Sublime Text to finish installation'
Traceback (most recent call last):

File "<string>", line 1, in <module>
IOError: [Errno 13] Permiso denegado: u'/home/housepc/.config/sublime-text-2/Installed Packages/Package Control.sublime-package'

permiso denegado : "permission denied" 
```

我能做些什么来安装它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-14T22:53:26.490

只需打开终端并执行此行：

```
sudo chmod -R 777 "/home/{youruser}/.config/sublime-text-2/Installed Packages/" 
```

并尝试再次安装包控制。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-05-02T21:36:13.697

最简单的方法是简单地使用 sudo privalges 运行 sublime text。

`ctrl`我只是用++弹出一个`alt`终端`t`

确保您是目录的所有者，而不是 root

```
sudo chown -R {youruser}:{youruser}  "/home/{youruser}/.config/sublime-text-2"

sudo sublime 
```

之后用`ctrl`+打开 sublime text 控制台```并输入

```
import urllib2,os; pf='Package Control.sublime-package'; ipp=sublime.installed_packages_path(); os.makedirs(ipp) if not os.path.exists(ipp) else None; urllib2.install_opener(urllib2.build_opener(urllib2.ProxyHandler())); open(os.path.join(ipp,pf),'wb').write(urllib2.urlopen('http://sublime.wbond.net/'+pf.replace(' ','%20')).read()); print 'Please restart Sublime Text to finish installation' 
```

初始安装后，您可以正常运行 sublime text。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-23T19:08:10.710

我不相信`chmod -R 777`-ing 是解决这个问题的最佳方法。当然，它可以让您安装软件包，但我认为任何人都不应该养成在写访问被拒绝时只打开权限闸门的习惯。在这种情况下，这真的没什么大不了的。我不认为你的 sublime-text 包文件夹是一个高优先级，但仍然养成允许每个人写访问的习惯可能会在以后导致问题，特别是如果最终用户是新的 *nix用户并且不知道他们*为什么*要更改权限。

（请注意：我正在运行 sublime-text-3，但这无关紧要，因为这是权限问题，而不是 sublime-text 本身的问题）

就我而言，我有两个问题。

1.  **Sublime-Text 已安装到正确的目录，但归 root 所有。**

    第一个也是显而易见的解决方案是`sudo chown -R username:username /home/username/.config/sublime-text-3`. 这将目录的控制权交还给了我。

2.  **我的安装权限不知何故被设置为一些不稳定的东西。**（在某些时候，我一定是做错了事情。那会是什么，或者什么时候让我忘记了，但众所周知，我在期末考试期间睡眠不足时会做一些愚蠢的事情）

    解决这个问题也很简单。`chmod -R 755 /home/username/.config/sublime-text-3/`. 允许您写入目录，但不允许其他不应该已经准备好的人在那里写入。除非您有意授予每个人对某个目录的写入权限，否则您应该给予最多的是`775`允许同一组中的其他用户写入该目录。

就像我之前说的，如果您系统上的任何用户都可以写入您的 sublime-text 包文件夹，这不一定会成为问题。我看不出它本身有任何真正的问题，但是如果你不知道你的行为的后果，养成使某些东西完全可写的习惯可能会导致一个错误，使你的系统容易受到漏洞的影响。

进一步参考：[http ://www.linux.com/learn/tutorials/309527-understanding-linux-file-permissions](http://www.linux.com/learn/tutorials/309527-understanding-linux-file-permissions)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-01T09:11:41.707

最简单的事情是使 sublime-text 文件夹可写：

```
sudo chmod -R 777 "/home/{youruser}/.config/sublime-text-2/ 
```

或崇高的文字3：

```
sudo chmod -R 777 "/home/{youruser}/.config/sublime-text-3/ 
```

然后尝试再次安装包控制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-31T01:03:40.033

另外，请检查您是否不在代理网络上。我只能在切换到非代理网络后安装 Package Control。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-03T21:14:42.697

安装 sublime text 后尝试： `sudo /usr/bin/subl`

这适用于 Ubuntu 12.04 上的 sublime text 3

# javascript - 使用 jQuery 动态添加 onClick 事件

> ID：12284168
> 
> 赞同：153
> 
> 时间：2012-09-05T14:50:23.540
> 
> 标签：javascript, jquery, html

由于使用了插件，我无法像往常一样将“onClick”属性添加到 HTML 表单输入中。一个插件正在处理我网站中的表单部分，它没有提供自动执行此操作的选项。

基本上我有这个输入：

```
<input type="text" id="bfCaptchaEntry" name="bfCaptchaEntry" style=""> 
```

我想使用 jQuery onload 向它添加一个 onClick ，使其如下所示：

```
<input onClick="myfunction()" type="text" id="bfCaptchaEntry" name="bfCaptchaEntry" style=""> 
```

我该怎么做呢？

我知道这可能不是标准做法，但在我的情况下似乎是最简单的选择。

我是 jQuery 的新手，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-09-05T14:52:12.890

您可以使用该`click`事件并调用您的函数或将您的逻辑移动到处理程序中：

```
$("#bfCaptchaEntry").click(function(){ myFunction(); }); 
```

您可以使用该`click`事件并将您的函数设置为处理程序：

```
$("#bfCaptchaEntry").click(myFunction); 
```

* * *

**。点击（）**

> 将事件处理程序绑定到“单击”JavaScript 事件，或在元素上触发该事件。

[http://api.jquery.com/click/](http://api.jquery.com/click/)

* * *

您可以使用`on`绑定到的事件`"click"`并调用您的函数或将您的逻辑移动到处理程序中：

```
$("#bfCaptchaEntry").on("click", function(){ myFunction(); }); 
```

您可以使用`on`绑定到的事件`"click"`并将您的函数设置为处理程序：

```
$("#bfCaptchaEntry").on("click", myFunction); 
```

* * *

**。在（）**

> 将一个或多个事件的事件处理函数附加到选定元素。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2016-02-11T17:36:55.023

如果您知道您的对象客户端名称，请尝试这种方法（它是 Button 或 TextBox 并不重要）

```
$('#ButtonName').removeAttr('onclick');
$('#ButtonName').attr('onClick', 'FunctionName(this);'); 
```

如果您想使用 JQuery 将 onClick 事件添加到服务器对象，请尝试这些

```
$('#' + '<%= ButtonName.ClientID %>').removeAttr('onclick');
$('#' + '<%= ButtonName.ClientID %>').attr('onClick', 'FunctionName(this);'); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-09-05T14:51:54.190

试试下面的方法，

```
$('#bfCaptchaEntry').on('click', myfunction); 
```

或者如果 jQuery 不是绝对必要的，那么试试下面，

```
document.getElementById('bfCaptchaEntry').onclick = myfunction; 
```

但是，上述方法几乎没有缺点，因为它将 onclick 设置为属性而不是注册为处理程序...

阅读更多关于这篇文章[https://stackoverflow.com/a/6348597/297641](https://stackoverflow.com/a/6348597/297641)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-05T14:55:07.930

```
$("#bfCaptchaEntry").click(function(){
    myFunction();
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-09-14T22:56:04.677

或者您可以使用箭头函数来定义它：

```
$(document).ready(() => {
  $('#bfCaptchaEntry').click(()=>{

  });
}); 
```

为了更好的浏览器支持：

```
$(document).ready(function() {
  $('#bfCaptchaEntry').click(function (){

  });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-21T11:21:27.360

```
let a = $("<a>bfCaptchaEntry</a>");
a.attr("onClick", "function(" + someParameter+ ")"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-01T10:55:20.757

正如@Selvakumar Arumugam 所建议的那样，但注册时的函数调用也

`$('#bfCaptchaEntry').on('click', myfunction);`,

而不是使用

`$('#bfCaptchaEntry').on('click', () => { myfunction});`

# php - 使用 glob 排除 index.php 的 PHP 代码

> ID：12284170
> 
> 赞同：14
> 
> 时间：2012-09-05T14:50:29.200
> 
> 标签：php, arrays, glob

# **问题**

我试图从一个名为 ../health/ 的文件中显示一个随机页面。在这个文件中，有一个 index.php 文件和 118 个其他名为 php 文件的文件。我想随机显示健康文件夹中的一个文件，但我希望它排除 index.php 文件。

以下代码有时包含 index.php 文件。我还尝试更改 $exclude 行以显示 ../health/index.php 但仍然没有运气。

```
<?php
$exclude = array("index.php"); // can add more here later
$answer = array_diff(glob("../health/*.php"),$exclude);
$whatanswer = $answer[mt_rand(0, count($answer) -1)];
include ($whatanswer);
? 
```

我尝试过的另一个代码如下

```
<?php
$exclude = array("../health/index.php"); // can add more here later
$health = glob("../health/*.php");
foreach ($health as $key => $filename) {
foreach ($exclude as $x) {
if (strstr($filename, $x)) {
unset($whathealth[$key]);
}
}
}
$whathealth = $health[mt_rand(0, count($health) -1)];
include ($whathealth);
?> 
```

此代码还包括 index.php 文件，但它不显示页面，而是将页面显示为错误。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-05T14:54:16.913

首先想到的是`array_filter()`，实际上是`preg_grep()`，但这没关系：

```
$health = array_filter(glob("../health/*.php"), function($v) {
    return false === strpos($v, 'index.php');
}); 
```

使用`preg_grep()`排除`PREG_GREP_INVERT`模式：

```
$health = preg_grep('/index\.php$/', glob('../health/*.php'), PREG_GREP_INVERT); 
```

*它避免了必须使用回调，尽管实际上它可能具有相同的性能*

**更新**

适用于您的特定情况的完整代码：

```
$health = preg_grep('/index\.php$/', glob('../health/*.php'), PREG_GREP_INVERT);
$whathealth = $health[mt_rand(0, count($health) -1)];
include ($whathealth); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T14:59:10.003

为了恭维杰克的回答，`preg_grep()`您还可以这样做：

```
$files = array_values( preg_grep( '/^((?!index.php).)*$/', glob("*.php") ) ); 
```

这将返回一个包含所有不`index.php`直接匹配的文件的数组。这就是您可以在`index.php`没有`PREG_GREP_INVERT`标志的情况下反转搜索的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-01T12:09:17.743

我的目录文件列表是：

```
$ee = glob(__DIR__.DIRECTORY_SEPARATOR.'*',GLOB_BRACE); 
```

> 结果

```
Array
(
    [0] => E:\php prj\goroh bot\bot.php
    [1] => E:\php prj\goroh bot\index.php
    [2] => E:\php prj\goroh bot\indexOld.php
    [3] => E:\php prj\goroh bot\test.php
) 
```

> 我编写代码到 test.php 并运行它

像这样使用 glob：

```
$ee = glob(__DIR__.DIRECTORY_SEPARATOR.'[!{index}]*',GLOB_BRACE);

print_r($ee); 
```

将其用于排除文件和目录名称以**索引开头**

> 结果

```
(
    [0] => E:\php prj\goroh bot\bot.php
    [1] => E:\php prj\goroh bot\test.php
) 
```

> 这用于排除文件名以**旧结尾**

```
$ee = glob(__DIR__.DIRECTORY_SEPARATOR.'*[!{Old}].*',GLOB_BRACE);

print_r($ee); 
```

> 结果

```
Array
(
    [0] => E:\php prj\goroh bot\bot.php
    [1] => E:\php prj\goroh bot\index.php
    [2] => E:\php prj\goroh bot\test.php
) 
```

> 为你这个代码工作我在 php 8.0 中测试**排除文件 index.php**

```
$ee = glob(__DIR__.DIRECTORY_SEPARATOR.'*[!{index}].php',GLOB_BRACE);

print_r($ee); 
```

# c - 创建 PixelBuffer 时的 EGL_BAD_CONFIG

> ID：12284171
> 
> 赞同：0
> 
> 时间：2012-09-05T14:50:50.327
> 
> 标签：c, opengl-es, opengl-es-2.0, egl

我在 OpenGL ESv2 中创建 PixelBuffer 时遇到问题。

如果我的配置指定`EGL_WINDOW_BIT`我可以成功调用`eglCreateContext`. 但是，使用时`EGL_PBUFFER_BIT`我得到一个`EGL_BAD_CONFIG`.

我正在使用一个嵌入式系统，我将在其中调用 OpenGL ESv2 来执行一些 GPGPU。我没有要渲染的窗口系统，所以我觉得我必须使用 PixelBuffers。我的渲染调用直接渲染到带有附加 Texture2D 作为颜色缓冲区的 FBO。

我对我的配置有什么问题或如何调整它一无所知。任何建议都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:51:13.850

我最终编写了一个函数来打印出我所有可能的配置。事实证明，即使 glChooseConfiguration 返回 GL_TRUE，它也没有返回配置。

我没有得到任何配置。

OpenGL ES 模拟器显然不支持 OpenGL ES v2 的 PixelBuffers，仅支持 v1

# backbone.js - 如何设置 Express 以使用 Backbone 和 pushState？

> ID：12284172
> 
> 赞同：3
> 
> 时间：2012-09-05T14:50:50.550
> 
> 标签：backbone.js, routing, express, middleware, pushstate

我正在尝试将 Express 设置为与 Backbone 和 pushState 一起使用，但我不确定如何处理路由。我尝试添加一个中间件函数（基于[https://gist.github.com/3402977](https://gist.github.com/3402977)）通过将 插入到 url 来处理任何未定义的路由`#`，但似乎中间件永远不会被调用：

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('yadda yadda'));
  app.use(express.session());
  app.use(app.router);

  // This should handle undefined routes.
  app.use(function(err, req, res, next){
    // Isn't getting called.
    newUrl = req.protocol + '://' + req.get('Host') + '/#' + req.url;
    res.redirect(newUrl);
  });

  app.use(express.static(path.join(__dirname, 'public')));
}); 
```

目前，每当我访问我没有在 Express ( `http://localhost:3000/test/foo`) 中定义的路线时，它都会给我一个`Could not GET /test/foo`错误。我希望它重定向到，`http://localhost:3000/#/test/foo`以便 Backbone 可以处理永久链接等的路由。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:24:00.943

对于登陆这里的后代：答案是他的中间件应该`app.use(app.router);`在行之前。

# asp.net - 在 GridView 中编辑按钮文本

> ID：12284174
> 
> 赞同：1
> 
> 时间：2012-09-05T14:50:54.937
> 
> 标签：asp.net, gridview

**Q>**我想将 GridView 按钮的文本显示为硬编码，并在按钮单击时触发一个事件。如何做到这一点？

直到现在我已经能够走到这一步

![GridView 示例](../Images/cc84d07f5a54dcc996361f8d9fa5e3dd.png)

但我想将按钮文本显示为**读取**或**删除**，而不是读取/删除列中的值。我用过的代码

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
DataKeyNames="MID" DataSourceID="inbox" EnableModelValidation="True" 
onselectedindexchanged="GridView1_SelectedIndexChanged">
<Columns>
<asp:ButtonField ButtonType="Button" DataTextField="MID" HeaderText="Read" 
  Text="Read" />
<asp:BoundField DataField="MID" HeaderText="MID" InsertVisible="False" 
  ReadOnly="True" SortExpression="MID" />
<asp:BoundField DataField="sender" HeaderText="sender" 
  SortExpression="sender" />
<asp:BoundField DataField="subject" HeaderText="subject" 
  SortExpression="subject" />
<asp:BoundField DataField="on" HeaderText="on" SortExpression="on" />
<asp:ButtonField ButtonType="Button" DataTextField="MID" HeaderText="Delete" 
  Text="Delete" />
</Columns>
</asp:GridView>

<asp:SqlDataSource ID="inbox" runat="server" 
ConnectionString="<%$ ConnectionStrings:connectionString %>" 
SelectCommand="SELECT [MID], [sender], [subject], [on] FROM [mail]">
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:56:28.057

如果您希望文本显示为“删除”或“读取”，那么只需不要将`DataTextField`属性设置为使用`MID`结果的属性，而是将`CommandName`属性设置为：

```
<asp:ButtonField ButtonType="Button" CommandName='<%#Eval("MMID")%>' HeaderText="Delete" 
  Text="Delete" /> 
```

至于处理`OnClick`按钮的事件，您可以这样处理`OnRowCommand`GridView 上的事件：

```
<asp:GridView ID="GridView1" runat="server" OnRowCommand="GridView_RowCommand" AutoGenerateColumns="False" 
```

现在在后面添加代码：

```
protected void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
{

  string MMID = e.CommandName;
  if( (e.CommandSource as ButtonField).Text=="Delete")
  {
             //oh, I should delete this MMID
  }
} 
```

**更新**

上面的代码不起作用。ButtonField 就像乳头对男人一样有用。而是像这样使用 ItemTemplateField：

```
 <asp:TemplateField>
     <ItemTemplate>
         <asp:Button ID="btn" runat="server" CommandName="Delete" CommandArgument='<%#Eval("MID") %>'
                    Text="Delete" />
     </ItemTemplate>
 </asp:TemplateField> 
```

然后 GridView_RowCommand 变成这样：

```
protected void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
    {
        string mid = e.CommandArgument.ToString();
        // If multiple buttons are used in a GridView control, use the
        // CommandName property to determine which button was clicked.
        if (e.CommandName == "Delete")
        {

        }
    } 
```

# c# - WinForms 自定义控件颜色

> ID：12284177
> 
> 赞同：1
> 
> 时间：2012-09-05T14:51:02.063
> 
> 标签：c#, winforms

我正在尝试自定义 WinForms 数据库应用程序上的控件。

到目前为止，我只尝试使用以下代码自定义标签和按钮：

```
namespace MyNamespace
{
  public class CMSLabel : Label
  {
    private Color cmsLabelBackColor = aSystem.LabelBackColor;

    public CMSLabel()
    {
        this.BackColor = cmsLabelBackColor;            
    } 

    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]

    public new Color BackColor
    {
        get { return cmsLabelBackColor; }
        set { }
    }
  }

  public class CMSButton : Button
  {
    private Color cmsButtonColor = aSystem.ButtonColor;

    public CMSButton()
    {            
        base.BackColor = cmsButtonColor;
    }

    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]

    public new Color BackColor
    {
        get { return cmsButtonColor; }
        set { }
    }
  }
} 
```

Button 控件完美运行，但 Label 控件完全没有 BackColor，但我为每种控件类型使用了相同的代码。谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:02:10.997

您必须更改“基础”颜色：

```
public CMSLabel()
{
  base.BackColor = cmsLabelBackColor;            
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:01:25.523

在 CMSButton 中设置**基本**.BackColor，但在 CMSLabel 中设置**此**.BackColor，它在 setter 中没有代码。

# c# - WndProc 检测设备拔出和插入

> ID：12284183
> 
> 赞同：0
> 
> 时间：2012-09-05T14:51:34.130
> 
> 标签：c#, .net, wpf

我如何知道设备在 WPF 中是插入还是拔出？

我正在使用下面的代码来检测设备更改：

```
 private void OnSourceInitialized(object sender, EventArgs e)
            {
                IntPtr windowHandle = (new WindowInteropHelper(this)).Handle;
                HwndSource src = HwndSource.FromHwnd(windowHandle);
                src.AddHook(new HwndSourceHook(WndProc));
            }

            private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
            {
                // Handle WM_DEVICECHANGE... 
                if (msg == 0x219)
                {
                    InitHead();
                }

                return IntPtr.Zero;
            } 
```

谢谢你。

编辑：

我做了以下，仍然没有工作：

```
if (msg == 0x0219)
            {
                switch (wParam.ToInt32())
                {
                    case 0x8000:
                        {
                            InitHead();
                        }
                        break;
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T19:51:08.117

为了检测设备是否已插入，我们将钩子添加到我们的`Window_Loaded`方法中，如下所示

```
HwndSource source = HwndSource.FromHwnd(new WindowInteropHelper(this).Handle);
source.AddHook(new HwndSourceHook(this.WndProc)); 
```

处理程序如下所示：

```
private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
{
    if (msg == 0x0219 && (int)wParam == 0x8000)  // 0x8000 is DBT_DEVICEARRIVAL
    {
        ProcessConnected();
    }

    return IntPtr.Zero;
} 
```

不幸的是，拔出设备时不会触发任何 DBT_DEVICE 常量，而是在您尝试从 Windows 中弹出设备时调用它们。

# java - 如何修复“非法方法名称 $" GWT 中的错误？

> ID：12284184
> 
> 赞同：0
> 
> 时间：2012-09-05T14:51:36.590
> 
> 标签：java, gwt, jsni

[我遵循了http://google-web-toolkit.googlecode.com/svn/trunk/distro-source/core/src/doc/helpInfo/jsoRestrictions.html](http://google-web-toolkit.googlecode.com/svn/trunk/distro-source/core/src/doc/helpInfo/jsoRestrictions.html)上的所有建议，但仍然收到臭名昭著的`<init>$`错误。

以下语句触发错误：

```
final OpenCTM ctm = OpenCTM.create(); 
```

OpenCTM 在哪里：

```
public final class OpenCTM extends GObject {

    protected OpenCTM() {}

    public static native OpenCTM create() /*-{
        return new $wnd.GLGE.OpenCTM();
    }-*/;

    public native void setSrc(String url, String relativeTo) /*-{
        this.setSrc(url, relativeTo);
    }-*/;

} 
```

整个代码位于我的[GitHub 存储库](https://github.com/neothemachine/glge-gwt)中，并且仍然很小。我正在尝试为[GLGE](http://www.glge.org)框架编写一个包装库。

我真的不知道该怎么办了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:20:44.347

事实证明，该错误是后续错误，并且隐藏了根本原因。

解决方案是不时地实际编译整个事情，尽管理论上在开发模式下是不必要的。这导致：

```
Errors in 'file:/.../MaterialLayer.java'
       Line 90: missing formal parameter
> function (in) {
> ------------^ 
```

对应的Java代码是：

```
public native void setMapinput(int in) /*-{
    this.setMapinput(in);
}-*/; 
```

作为`in`JS 中的保留字，这可能会导致一些后续问题。长话短说，我将参数更改为`input`并使其正常工作...

令人沮丧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-04T15:24:01.937

I am no expert. I avoided this problem by moving my extended JavaScriptObject class outside of my EntryPoint:onModuleLoad() implemention.

# android - Android 使用 qt 库

> ID：12284186
> 
> 赞同：2
> 
> 时间：2012-09-05T14:51:40.647
> 
> 标签：android, qt

有必要在我的项目中使用 Qt 库，所以你建议我如何更好地使用纯 Qt 编写的源代码？我不需要 UI，只需要一些代码，是否有必要使用 Necessitas 或仅包含到项目构建 QtEverywhere 源中，仅此而已？只是 .so 使用 Qt 编写的代码，没有任何 UI 依赖项。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:52:51.127

这在很大程度上取决于您对 Qt 的需求。考虑为 Bionic 编译 Qt 的某些部分需要更改代码。您可以使用 Necessitas 编译的 Qt 库，但您仍然需要一个 QCoreApplication 实例才能使许多 qt 类工作，例如 QTimer。许多 Qt 类仅在 Qt 事件循环运行时才起作用。我为小代码尝试[了这个解决方案。](https://sites.google.com/site/lukeshq/engineering-articles/embedded-cross-platform-development)

在整个项目中使用 necessitas 可能会更简单，但这取决于您要编写的应用程序。我移植了完全用 C++ 编写的带有 QML 接口的应用程序：在这种特殊情况下，移植很简单，并且接口可以硬件加速。不幸的是，在这种情况下，如果您想访问 Android 类，则需要实现 JNI 绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:35:53.737

如果我在做这个项目，我会使用[Necessitas](https://necessitas.kde.org/)。它应该只带来你需要的部分。如果您不使用 / 链接到 GUI，则不需要安装它。

我认为 Necessitas 的最大优势是它得到了积极的维护，所有配置/调整东西以在 Android 上运行的工作都已经完成，并且它带有完整的工具链，而不仅仅是你必须构建的源。

# android - 什么是 GADMAdapterCustomEvents 类

> ID：12284188
> 
> 赞同：0
> 
> 时间：2012-09-05T14:51:44.030
> 
> 标签：android, admob, google-dfp

我正在我的应用中投放广告，我需要在我的应用中支持 AdMob 中介和 DFP（针对发布商的双击）广告。我认为我做的一切都是正确的，我包含了（新的）AdMob SDK，以及来自此网址的所有其他发布商 SDK 和适配器：

[https://developers.google.com/mobile-ads-sdk/ad-network-mediation](https://developers.google.com/mobile-ads-sdk/ad-network-mediation)

然后我创建了一个新`DfpAdView`的这样的：

```
final DfpAdView ad = new DfpAdView(this, AdSize.BANNER, /* my ad id here */);
adView.addView(ad);
ad.loadAd(new AdRequest()); 
```

当我提出广告请求时，出现以下异常：

```
09-05 09:16:00.703: E/Ads(10863): Cannot find adapter class 'GADMAdapterCustomEvents'. Did you link the ad network's mediation adapter? Skipping ad network.
09-05 09:16:00.703: E/Ads(10863): java.lang.ClassNotFoundException: GADMAdapterCustomEvents
09-05 09:16:00.703: E/Ads(10863):   at java.lang.Class.classForName(Native Method)
09-05 09:16:00.703: E/Ads(10863):   at java.lang.Class.forName(Class.java:217)
09-05 09:16:00.703: E/Ads(10863):   at java.lang.Class.forName(Class.java:172)
09-05 09:16:00.703: E/Ads(10863):   at com.google.ads.g.a(SourceFile:133)
09-05 09:16:00.703: E/Ads(10863):   at com.google.ads.i.run(SourceFile:116)
09-05 09:16:00.703: E/Ads(10863):   at android.os.Handler.handleCallback(Handler.java:615)
09-05 09:16:00.703: E/Ads(10863):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-05 09:16:00.703: E/Ads(10863):   at android.os.Looper.loop(Looper.java:137)
09-05 09:16:00.703: E/Ads(10863):   at android.app.ActivityThread.main(ActivityThread.java:4745)
09-05 09:16:00.703: E/Ads(10863):   at java.lang.reflect.Method.invokeNative(Native Method)
09-05 09:16:00.703: E/Ads(10863):   at java.lang.reflect.Method.invoke(Method.java:511)
09-05 09:16:00.703: E/Ads(10863):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-05 09:16:00.703: E/Ads(10863):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-05 09:16:00.703: E/Ads(10863):   at dalvik.system.NativeStart.main(Native Method)
09-05 09:16:00.703: E/Ads(10863): Caused by: java.lang.NoClassDefFoundError: GADMAdapterCustomEvents
09-05 09:16:00.703: E/Ads(10863):   ... 14 more
09-05 09:16:00.703: E/Ads(10863): Caused by: java.lang.ClassNotFoundException: GADMAdapterCustomEvents
09-05 09:16:00.703: E/Ads(10863):   at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
09-05 09:16:00.703: E/Ads(10863):   at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
09-05 09:16:00.703: E/Ads(10863):   at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
09-05 09:16:00.703: E/Ads(10863):   ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:51:44.030

AdMob 中介在每个平台（Android/iOS）中都有不同的广告 ID（中介 ID），当您将 iOS 广告 ID 传递到 Android DfpAdView 时，您会遇到此异常。

# c# - 带有Windows 8的singalR

> ID：12284189
> 
> 赞同：0
> 
> 时间：2012-09-05T14:51:45.153
> 
> 标签：c#, asp.net-mvc, signalr, signalr-hub

有没有人让 signalR 在 Windows 8 或 Server 2012 上运行？当我浏览到信号器 url 时，我收到以下错误：

```
Protocol error: Unknown transport.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: Protocol error: Unknown transport.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 
[InvalidOperationException: Protocol error: Unknown transport.]
SignalR.PersistentConnection.ProcessRequestAsync(HostContext context) +1052
SignalR.Hosting.AspNet.AspNetHandler.ProcessRequestAsync(HttpContextBase context) +746
SignalR.Hosting.AspNet.HttpTaskAsyncHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +97
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +12551795
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.17929 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:46:43.767

SignalR 在 Windows 8 和 Server 2012 上运行良好，您的问题似乎并非特定于操作系统。

# iphone - iOS：使用 CLGeocoder 的反向地理编码与。谷歌地理编码器 API

> ID：12284191
> 
> 赞同：3
> 
> 时间：2012-09-05T14:51:48.047
> 
> 标签：iphone, ios, google-maps, google-maps-api-3, clgeocoder

我正在构建一个 iOS 应用程序，它的一个功能实现了反向地理编码，以从地图上的用户手势点击获取街道地址。

使用 CLGeocoder 的反向地理编码功能运行应用程序时，我只能获取城市和国家/地区的详细信息。在某些情况下，在主要道路上，我能够获得主要道路名称。

我认为这个限制来自 Google Maps api。

但是当我测试这个例子时，（http://gmaps-samples.googlecode.com/svn/trunk/geocoder/reverse.html）我能够获得更准确和详细的信息，例如街道号码和名称以及邮政编码.

这是 CLGeocoder 的限制吗？如果是这样，我如何在我的应用程序上实现 Google Maps api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:01:33.653

据我了解，CLGeocoder 在过去一年左右没有使用 Google 获取数据；当它使用谷歌时，每天的用户数量受到很大限制。

您可能还想在 iOS6 模拟器中尝试相同的 CLGeocoder 调用，以查看是否获得更多数据。

您可以直接从您的应用程序使用 Google API 调用，但请仔细阅读 TOS 以了解有关用户的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:05:18.907

好吧，看起来是的，Apple 的`CLGeocoder`正向地理编码（地址-> 坐标）并不像 Google Maps Geocoding API 那样准确，尤其是在美国以外的地区。使用尽可能完整地填写所有字段的地址字典比简单的地址字符串要好得多，但它仍然远远不够好。谷歌（通常）会在街道编号的 5-10m 范围内为您提供坐标，如果幸运的话，Apple 会在正确街道的某处为您提供坐标。

找到 Apple Developer [Technical Note TN2289](http://developer.apple.com/library/ios/#technotes/tn2289/_index.html)，其中详细说明了`CLGeocoder`.

进一步 iOS6 将停止支持使用谷歌地图

# javascript - Firefox 上的 Javascript mozfullscreenchange

> ID：12284198
> 
> 赞同：0
> 
> 时间：2012-09-05T14:52:10.293
> 
> 标签：javascript, firefox, dom-events, fullscreen

我试图知道用户何时全屏显示 div 或不使用`fullscreenchange`Javascript。该脚本适用于 Chrome（设置全屏 div，显示警报，然后在关闭全屏时再次显示警报）但不适用于 Firefox。为什么？

```
<!DOCTYPE html>

<head>
<meta content="text/html; Charset=UTF-8" http-equiv="Content-Type" />
<title>test fullscreenchange </title>

</head>

<body>
<div id="macarte" class="csscarte"  style="color: green" >my div</div>
 <button onclick="goFullscreen('macarte'); return false">showfullscreen</button>    

<script type="text/javascript">

function fullscreenouinon() {alert("Full Screen Change !");};

function goFullscreen(id) {

    // Get the element that we want to take into fullscreen mode
    var thediv = document.getElementById(id);

    // These function will not exist in the browsers that don't support fullscreen mode yet, 
    // so we'll have to check to see if they're available before calling them.

   if (thediv.requestFullScreen) {
                //fonction officielle du w3c
                thediv.addEventListener("fullscreenchange", function() {fullscreenouinon()}, false); 
                thediv.requestFullScreen();
        } else if (thediv.webkitRequestFullScreen) {
                //fonction pour Google Chrome (on lui passe un argument pour autoriser le plein écran lors d'une pression sur le clavier)
                thediv.addEventListener("webkitfullscreenchange", function() {fullscreenouinon()}, false); 
                thediv.webkitRequestFullScreen(thediv.ALLOW_KEYBOARD_INPUT);
        } else if (thediv.mozRequestFullScreen){
                //fonction pour Firefox

                thediv.addEventListener("mozfullscreenchange", function() {fullscreenouinon()}, false); 

                thediv.mozRequestFullScreen();
        } else {
                alert('Votre navigateur ne supporte pas le mode plein écran, il est temps de passer à un plus récent ;)');
        }

  };
</script>
</body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:15:50.023

"When full-screen mode is successfully engaged, the document which contains the document receives a mozfullscreenchange event. When full-screen mode is exited, the document again receives a mozfullscreenchange event. Note that the mozfullscreenchange event doesn't provide any information itself as to whether the document is entering or exiting full-screen mode, but if the document has a non null mozFullScreenElement, you know you're in full-screen mode." Taken from here - [https://developer.mozilla.org/en-US/docs/DOM/Using_full-screen_mode](https://developer.mozilla.org/en-US/docs/DOM/Using_full-screen_mode)

So, you should addEventListener for the `mozfullscreenchange` event to `document`, not to the element (and check for a non `null` `mozFullScreenElement`?).

# c++ - 值如何存储在 char 中

> ID：12284199
> 
> 赞同：0
> 
> 时间：2012-09-05T14:52:11.443
> 
> 标签：c++, visual-studio, visual-c++

我将值作为字符串添加到组合框中。下面是我的代码。

**平台** Windows XP，我正在使用**Microsoft Visual Studio 2003**

**语言**C++

**遇到错误 ->** “运行时检查失败 #2 - 变量‘缓冲区’周围的堆栈已损坏。”

如果我将缓冲区的大小增加到 4 及以上，那么我将不会收到此错误。

我的问题与如何修复该错误无关，但我想知道如果缓冲区大小 = 2，为什么会出现此错误。

根据我的逻辑，我给出了缓冲区大小 = 2，因为 char[0] 将存储 char[1] = null 终止字符的阀门。

现在由于 char 可以存储从 0 到 255 的值，我认为这应该没问题，因为我插入的值是从 1 到 63，然后是从 183 到 200。

```
CComboBox m_select_combo;
const unsigned int max_num_of_values = 63;

m_select_combo.AddString( "ALL" );

for( unsigned int i = 1; i <= max_num_of_values ; ++i )
{
    char buffer[2];
    std::string prn_select_c = itoa( i, buffer, 10 ); 
    m_select_combo.AddString( prn_select_c.c_str() );
}

const unsigned int max_num_of_high_sats = 202 ;

for( unsigned int i = 183; i <= max_num_of_high_sats ; ++i )
{
    char buffer[2];
    std::string prn_select_c = itoa( i, buffer, 10 ); 
    m_select_combo.AddString( prn_select_c.c_str() );
} 
```

各位大佬能不能给个思路，我不明白什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:57:35.857

`itoa()`zero-terminate 它的输出，所以当你调用`itoa(63, char[2], 10)`它时，它会写三个字符`6`，`3`而`\0`. 但是您的缓冲区只有两个字符长。

`itoa()`函数最好避免使用`snprintf()`or `boost::lexical_cast<>()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:57:04.483

您正在将整数转换为 ASCII，就是`itoa`这样。如果你有一个像 183 这样的数字，它是四个字符的字符串，'1'，'8'，'3'，'\0'。

每个字符占用一个字节，例如字符 '1' 是 ASCII 中的值 0x31。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:01:40.033

您应该阅读`itoa`.

考虑以下循环：

```
for( unsigned int i = 183; i <= max_num_of_high_sats ; ++i ) 
{ 
    char buffer[2]; 
    std::string prn_select_c = itoa( i, buffer, 10 );  
    m_select_combo.AddString( prn_select_c.c_str() ); 
} 
```

第一次迭代将整数转换`183`为 3 个字符串“183”，外加一个终止空字符。那是 4 个字节，您试图将其塞入一个两字节数组中。文档专门告诉您确保缓冲区足够大以容纳任何值；在这种情况下，它应该*至少*是 long中的位数`max_num_of_high_sats`，加上终止 null 的位数。

您不妨让它足够大以容纳可以存储在无符号整数中的最大值，即 11（例如，4294967295 的 10 位数字加上终止的空值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:01:42.357

the ito function is used to convert a int to a C sytle string based on the 3rd parameter base. As a example, it just likes to print out the int 63 in printf. you need two ASII byte, one is used to storage CHAR 6, the other is used to storage CHAR 3\. the 3rd should be NULL. So in your case the max int is three digital. you need 4 bytes in the string

# textwrangler - 如何在 textwrangler 中禁用页面指南？

> ID：12284202
> 
> 赞同：0
> 
> 时间：2012-09-05T14:52:25.237
> 
> 标签：textwrangler

text-wrangler 中的页面指南非常分散注意力，我想禁用它。我将此工具与 textpad 进行比较，是否有任何标准的、已编译的设置列表可供我使用？如何禁用烦人的页面指南？

-多发性硬化症

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:28:56.897

您可以禁用页面指南，从工具栏中取消选择“文本选项”中的“显示页面指南”。

![文本管理员工具栏](../Images/0e485b6ef3560cf04e7d58544c666493.png)

# jquery - 在 IE9 中破解 jquery 手风琴

> ID：12284205
> 
> 赞同：0
> 
> 时间：2012-09-05T14:52:32.877
> 
> 标签：jquery, jquery-ui, internet-explorer-9, jquery-ui-accordion

我正在用 jquery 的手风琴编写一个嵌套菜单。最多有 2 层嵌套。每个标头必须响应两个事件：

1.  如果单击该区域的左半部分，则选择该项目
2.  如果单击该区域的右半部分，则打开/关闭项目并显示/隐藏子项

这两个事件是互斥的，每个事件都有自己的事件处理程序。

HTML 看起来像这样：

```
<div class="accordion">
  <h3>
    <a href="#">
       <span>some text</span>
       <span>more text</span>
    </a>
    <div class="lightning-rod"></div>
  </h3>
  <div>
     <!-- content goes here -->
  </div>
...
</div> 
```

带有类的 div`.lightning-rod`的样式使其覆盖元素的左半部分。处理程序绑定到“单击”事件并处理选择。如果用户单击右侧，则手风琴将捕捉到单击并进行子项的切换。

这适用于 chrome，但 IE9 给我带来了问题。在 IE9 中：

*   如果我单击右侧，jquery 会处理切换并调用切换处理程序。
*   如果我单击左侧，我的`lightning-rod`div 会捕获单击并调用选择处理程序。
*   **如果我单击 div 后面的 a 元素内的 span 中的文本，`.lightning-rod`我的两个处理程序都不会被调用，并且 jquery 会切换 children**。

我可以做些什么让`.lightning-rod`div 优先于 a 元素并像在 chrome 中一样捕捉点击？

谢谢

# openerp - 如何从javascript将值设置为openerp表单视图字段

> ID：12284208
> 
> 赞同：1
> 
> 时间：2012-09-05T14:52:48.617
> 
> 标签：openerp

这是我用来调用表单视图的代码：

```
get_view_form_dimension: function() {
    var self = this;
    var action_manager = new openerp.web.ActionManager(this);
    var dialog = new openerp.web.Dialog(this, {
        width: 800,
        buttons : [
            {text: _t("Cancel"), click: function() { $(this).dialog('destroy'); }},
            {text: _t("Save"), click: function() {
                var form_view = action_manager.inner_viewmanager.views.form.controller;

                form_view.do_save(function() {
                    $.jstree._reference("#new_tree").destroy();
                    self.get_tree_structure();
                });
                $(this).dialog('destroy');

            }}
        ]
    }).open();

    action_manager.appendTo(dialog.$element);
    action_manager.do_action({
        res_model : 'df.bi.dimension',
        res_id: self.process_id,
        views : [[false, 'form']],
        type : 'ir.actions.act_window',
        flags : {
            search_view: false,
            sidebar : false,
            views_switcher : false,
            action_buttons : false,
            pager: false
        }

    });

}, 
```

我如何将值设置为这种方法会上升的形式？或者如果存在其他解决方案，请告诉我？对不起我的英语不好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:25:01.000

使用默认值向 do_action 调用添加上下文字段，如下所示：

```
context: {'default_account_id': 5, 'default_name': 'hello'}, 
```

# jquery - 带有多个关键字、突出显示和部分匹配的 Jquery 自动完成

> ID：12284213
> 
> 赞同：2
> 
> 时间：2012-09-05T14:53:16.260
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我正在寻找一个 JQuery 自动完成功能，它将：

*   搜索部分匹配
*   突出显示所有出现的事件
*   允许多个单词
*   允许远程数据源（即 PHP 根据每次按键动态更新的查询字符串过滤数据库结果）

所以例如

搜索：“我回家”

返回：“告诉**我****回家**的**路**”

我很难找到可以提供此功能的东西，尽管人们普遍期望谷歌风格的自动完成功能。

jquery ui 自动完成的猴子补丁（[jQueryUI：如何自定义格式自动完成插件结果？](https://stackoverflow.com/questions/2435964/jqueryui-how-can-i-custom-format-the-autocomplete-plug-in-results)）接近，但似乎不提供动态远程数据源。

我也接近了以下脚本：

```
var termTemplate = "<span class='ui-autocomplete-term'>%s</span>";
$("#f input").autocomplete({
   source: "livesearch.php",
   open: function(e, ui) {
      var origKeyword = $("#f input").val();
      var acData = $(this).data('autocomplete');
      acData.menu.element.find('a').each(function() {
         var me = $(this);
         var regex = new RegExp(acData.term, "gi");
         me.html(me.text().replace(regex, function(matched) {
            return termTemplate.replace('%s', matched);
         }));
      });

   },
   select: function(event, ui) {
      var keyword = $("#f input").val();
      $("#f input").val('');
      window.location.href = 'MYURLHERE?VARIABLE=' + ui.item.value;
      return false;
   },
   focus: function(event, ui) {
      return false;
   }
}); 
```

但是，它不处理突出显示由空格分隔的多个单词。

如果有人有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:15:06.923

@user287212，我对带有多个关键字的 JQuery AutoComplete 进行了一些研究。[我在这个地址](http://demo.componentone.com/wijmo/InvExplorer/)找到了一个例子。这是一个复杂的示例，但有一个带有多个关键字的 JQuery AutoComplete 示例。如果您在符号输入中写入符号，程序将向您提供文件中的术语。[此链接](http://www.codeproject.com/Articles/424656/A-Stock-Portfolio-Application-Using-KnockoutJS)上的示例说明。你可以看看这个链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:29:31.730

这是我采用的解决方案：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<script type='text/javascript' src='http://code.jquery.com/jquery-1.6.2.js'></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.js"></script>

<style type='text/css'>
   .srchHilite {background-color: yellow;}
</style>

<script type='text/javascript'>
$(document).ready(function(){

var termTemplate = "<span class='ui-autocomplete-term'>%s</span>";
$("#tags").autocomplete({
 source: function(request, response) {
        $.getJSON("livesearch.php", request, function(data, status, xhr ) {

            var newmatchArry = new Array();
            var matchArry   = data.slice ();
            var srchTerms   = $.trim (request.term).split (/\s+/);

                //--- For each search term, remove non-matches.
                $.each (srchTerms, function (J, term) {
                    var regX    = new RegExp (term.value, "i");
                    matchArry   = $.map (matchArry, function (item) {
                        return regX.test (item)  ?  item  : null;
                    } );
                } );

            response(matchArry);

        });
    },

  open:   function (event, ui) {
                /*--- This function provides no hooks to the results list, so we have to trust the
                    selector, for now.
                */
                var resultsList = $("ul.ui-autocomplete > li.ui-menu-item > a");
                var srchTerm    = $.trim ( $("#tags").val () ).split (/\s+/).join ('|');

                //--- Loop through the results list and highlight the terms.
                resultsList.each ( function () {
                    var jThis   = $(this);
                    var regX    = new RegExp ('(' + srchTerm + ')', "ig");
                    var oldTxt  = jThis.text ();

                    jThis.html (oldTxt.replace (regX, '<span class="srchHilite">$1</span>') );
                } );
            }
} );

});
</script>
</head>

<body>
<input id="tags">

</div>
</body>

</html> 
```

# security - symfony2 - 具有多个用户提供程序的多种编码密码方法

> ID：12284214
> 
> 赞同：1
> 
> 时间：2012-09-05T14:53:17.523
> 
> 标签：security, symfony, symfony-2.1

我想用两种不同的编码密码方法链接两个用户提供程序（FosUserBundle 和一个自定义 DB 用户提供程序）

应用程序/配置/security.yml

```
安全：  

    编码器：
        FOS\UserBundle\Model\UserInterface: sha512
        我的\AuthBundle\模型\用户：sha1

    提供者：
        my_chain_providers：
            链：
                提供者：[“fos_userbundle”，“db_user”]
        fos_userbundle：
            id：fos_user.user_provider.username_email
        数据库用户：
            推进：
                类：我的\AuthBundle\模型\用户
                属性：用户名

    防火墙：
        主要的：
            模式：^/
            表单登录：
                提供者：my_chain_providers
            注销：真
            匿名：真实

```

我的问题：密码的哈希值遵循 fos_user 表中的 $password.'{'.$salt.'}' 和我的自定义 DB 用户提供程序中的 $salt.$password

这个要点[https://gist.github.com/1243080](https://gist.github.com/1243080)展示了如何自定义 mergePasswordAndSalt 方法，但是每个用户提供者可以有一个 mergePasswordAndSalt 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:19:58.683

您应该将多个编码器与`FOSAdvancedEncoderBundle`. 我遇到了同样的问题，[在这里回答得非常周到](https://stackoverflow.com/questions/12005004/migrating-legacy-users-to-symfony2/12075531#12075531)

# java - 如何理解java Socket-Permissions？

> ID：12284218
> 
> 赞同：6
> 
> 时间：2012-09-05T14:53:42.547
> 
> 标签：java, sockets, securitymanager

```
permission java.net.SocketPermission "192.168.1.1:31337", "connect, accept, resolve"; 
```

以下权限允许什么？我的应用程序是否允许仅接受来自 192.168.1.1:31337 的连接（可能是外部客户端）或接受到 192.168.1.1:31337 的连接（我的应用程序在 192.168.1.1:31337 上运行，与“听”的区别在哪里？ '？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:15:38.947

如果您的代码是小程序或在 java 安全管理器下运行，您需要明确授予它执行操作的权限。

> 为了允许对小程序（或使用安全管理器运行的应用程序）进行资源访问，必须将相应的权限显式授予尝试访问的代码。

默认情况下，您的代码没有套接字权限。您的许可表示您的代码有权接受连接、连接和解析**仅**`192.168.1.1`在 port 上具有 IP 的主机`31337`。

“接受”和“连接”动作是显而易见的。

> 当存在任何其他动作时，暗示“解决”动作。操作“resolve”是指主机/IP 名称服务查找。
> 
> “listen”操作仅在与“localhost”一起使用时才有意义。

听和接受的区别在于，听的意思是“准备连接，看看是否有连接等待”，而接受的意思是“好的，接受它”。

[有关 java 7.](http://download.java.net/jdk8/docs/technotes/guides/security/permissions.html)和[java.net.SocketPermission java 文档中的权限，请参阅文档](http://docs.oracle.com/javase/7/docs/api/java/net/SocketPermission.html)

# full-text-search - 在不同的大小写中查找所有出现的文本

> ID：12284219
> 
> 赞同：0
> 
> 时间：2012-09-05T14:53:46.000
> 
> 标签：full-text-search, replace, case-sensitive

我们有一个具有特定大小写的首字母缩写词。企业现在希望我们找到所有出现的套管错误并修复它。

正确大小写示例：`HtMl`
搜索操作将需要返回所有出现的 HTML、html、Html、HtML 等。然后我可以手动检查每个案例，看看它是否真的是我们的首字母缩略词。

我在想`Regular Expressions`，但我不确定如何写一个排除正确案例的方法。类似的东西：`\b((H|h)(T|t)(M|m)(L|l))&(~HTML)\b`。只有`&`as`AND`不存在（或存在？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:01:27.213

您可以将文本转换为小写，然后在小写文本中查找出现的单词（也小写）。现在，无论您在小写版本中找到它的任何位置，都将其替换为原始文本。

但是现在我想了想，使用正则表达式*要*简单得多。这里没有太多要添加的内容，但是如果您有很多这样的替换要做，这里有一个 Python 小脚本，它应该为您生成（并应用）这些正则表达式。

```
import re
def replaceAllVariants(acronym, text):
    regex = "".join("[%s%s]" % (c.lower(), c.upper()) for c in acronym)
    return re.sub(regex, acronym, text)
# usage
text = replaceAllVariants("HTML", "Bla bla html HTML HtMl hTMl foo bar.") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:52:12.923

使用 bash 脚本解决：

```
echo "Hello, I'm not HtmL, HTML or html, but not HtMl." | grep -o "[H|h][T|t][M|m][L|l]" | grep -v "HtMl" 
```

“异常”在“grep -v”部分。

# jquery - 如何使用jQuery获取具有特定类的元素的ID属性

> ID：12284222
> 
> 赞同：0
> 
> 时间：2012-09-05T14:53:54.080
> 
> 标签：jquery

我正在尝试获取具有当前类的锚的 ID 属性，或者它们的父 LI 具有当前类。

我试试这段代码：

```
 var terms = '';
    $('.product-tax li').each(function(){
        if ($(this).hasClass('current')) {
            terms += $(this).children('a').attr('id') + ':';
        } else if ($(this).children('a').hasClass('current')) {
            terms += $(this).children('a').attr('id') + ':';
        }
    }); 
```

但它不起作用，它给出了意想不到的结果。我想获取锚内的 ID，用于 LI 或锚的“当前”类。

基本上我正在使用每一个，因为有多个 .product-tax 并且用户进行了选择，但是可以将“当前”类添加到 LI 或锚点，这就是我需要检查的原因。此代码不起作用。

有什么建议么？

HTML：

```
<div class="product-tax product-color">
    <h3>Choose color</h3>
    <ul>
        <li><a href="#" id="color-pink" style="background: Pink;border: 1px solid Pink;"></a></li>
    </ul>
</div>

<div class="product-tax product-size">
    <h3>Choose size</h3>
    <ul>
        <li><a href="#" id="size-2s">2(s)</a></li>
        <li><a href="#" id="size-3m">3(m)</a></li>
        <li><a href="#" id="size-4l">4(l)</a></li>
        <li><a href="#" id="size-5xl">5(xl)</a></li>
        <li><a href="#" id="size-6xxl">6(xxl)</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:02:36.537

您可以选择 LI 元素的所有锚子元素，以及当前类的所有子元素，如下所示：

```
var terms = "";
$(".product-tax li.current > a, .product-tax li > a.current").each(function(){
    terms = terms + $(this).attr("id") + ":"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:57:27.667

试试这个

```
// get anchor with class current and anchor with parent li with class current
$('a.current,li.current > a').each(function(){
      alert(this.id);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:04:46.660

```
 var terms = '';
    $('.product-tax li').each(function(){
      if ($(this).hasClass('current')) {
        terms += $(this).attr('id') + ':';
      }
      var $anchors = $(this).children("a");
      $anchors.each(function(){
        if ($(this).hasClass('current')) {
          terms += $(this).attr('id') + ':';
        }
      });
    }); 
```

# c# - VB.NET 中“（字节）”的等价物是什么？

> ID：12284223
> 
> 赞同：7
> 
> 时间：2012-09-05T14:54:00.707
> 
> 标签：c#, vb.net, type-conversion

`(byte)`VB.NET中的等价物：

### C＃：

```
uint value = 1161;
byte data = (byte)value; 
```

数据 = 137

### VB.NET：

```
 Dim value As UInteger = 1161
  Dim data1 As Byte = CType(value, Byte)
  Dim data2 As Byte = CByte(value) 
```

例外：算术运算导致溢出。

如何获得与 C# 相同的结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T14:56:55.763

默认情况下，C# 不检查整数溢出，但 VB.NET 会。

如果您将代码包装在一个`checked`块中，您会在 C# 中得到相同的异常：

```
checked
{
    uint value = 1161;
    byte data = (byte)value;
} 
```

* * *

在您的 VB.NET 项目属性中，启用*Configuration Properties* => *Optimizations* => *Remove Integer Overflow Checks*，您的 VB.NET 代码将与您的 C# 代码完全相同。

然后对整个项目禁用整数溢出检查，但这通常不是问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T14:57:05.810

尝试首先从数字中删除最重要的字节，然后将其转换为字节：

```
Dim value As UInteger = 1161 
Dim data1 As Byte = CType(value And 255, Byte)
Dim data2 As Byte = CByte(value And 255) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:24:36.237

为了得到最重要的字节，你可以做相当hackalicious

```
Dim data1 = BitConvertor.GetBytes(value)(0) 
```

它是明确的，您不需要禁用溢出检查。

# html - 字体不工作

> ID：12284225
> 
> 赞同：1
> 
> 时间：2012-09-05T14:54:02.607
> 
> 标签：html, css

嗨，我正在尝试学习使用`font-face`向我的浏览器添加不同的字体，但我似乎在代码中遗漏了一些东西，因为样式不适用。这是我的代码：

```
<div id="logo">
      <img src="img/header/THANATHOS.png" alt="Logo"/>
      <p>a gamers community</p>
</div>

<style>
@font-face {
    font-family: 'HarlowSolid';
    src: url('Fonts/normal/HarlowSolid.eot'); /* IE9 Compat Modes */
    src: url('Fonts/normal/HarlowSolid.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('Fonts/normal/HarlowSolid.woff') format('woff'), /* Modern Browsers */
         url('Fonts/normal/HarlowSolid.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('Fonts/normal/HarlowSolid.svg#svgFontName') format('svg'); /* Legacy iOS */
}

div#logo p{
    font-family: HarlowSolid , Helvetica , sans-serif;
}
</style> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T14:59:38.660

确保您已将其包装在`<style> /* Code Here */</style>`标签中，或将其放入样式表中。

还要检查您编写该代码的文件的路径。因此，如果它在`/css/style.css`其中并且 harlowSolid.woff 位于名为 的根文件夹中`fonts`，那么您的代码需要是`url('../Fonts/normal/HarlowSolid.woff')`

还要检查您正在测试的浏览器是否[支持 font-face](http://caniuse.com/fontface)。尽管使用您包含的条件，但它应该不太可能遇到问题。

只是为了确认：您发布的实际代码是正确的，因此请检查您的文件是否存在/结构正确。

If you're using Chrome/Safari/FF, you can usually right click -> Inspect Element, look out for the red cog symbol in the bottom right corner which will denote coding/resource errors. (Click it to see the description of the problem.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:55:47.413

Are the second src right? Have a look at [http://www.w3schools.com/css3/css3_fonts.asp](http://www.w3schools.com/css3/css3_fonts.asp)

```
@font-face {
    font-family: 'HarlowSolid';
    src: url('Fonts/normal/HarlowSolid.eot'); /* IE9 Compat Modes */
    **src:** url('Fonts/normal/HarlowSolid.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('Fonts/normal/HarlowSolid.woff') format('woff'), /* Modern Browsers */
         url('Fonts/normal/HarlowSolid.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('Fonts/normal/HarlowSolid.svg#svgFontName') format('svg'); /* Legacy iOS */
} 
```

# python - 如何配置 PyDev 以调试运行嵌入式 python 脚本的外部应用程序？

> ID：12284227
> 
> 赞同：1
> 
> 时间：2012-09-05T14:54:10.290
> 
> 标签：python, debugging, aptana

我不确定这个问题是否已经得到解答，但我找不到任何答案。

我正在用 C++ 制作一个需要执行 python 代码的独立应用程序。所以，我正在嵌入 python 并运行它。

我的问题是，如何使用 PyDev 调试这个独立应用程序执行的 python 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:22:55.670

我认为您指的是[Pydev Remote Debugger](http://pydev.org/manual_adv_remote_debugger.html)。它允许您在“调试者”进程中创建服务器，使用：

```
import pydevd; pydevd.settrace() 
```

然后从 pydev 连接到它。

此外，[Winpdb](http://winpdb.org/)具有类似的功能。

# phpmailer - 垃圾邮件 HTML_IMAGE_ONLY

> ID：12284231
> 
> 赞同：6
> 
> 时间：2012-09-05T14:54:31.953
> 
> 标签：phpmailer, php, spamassassin

我的邮件从这条规则中得到 1.6 分（最多 2 分被垃圾邮件分类）：

SpamAssassin 规则：HTML_IMAGE_ONLY_24

标准描述：HTML：2000-2400字节字的图片

解释

这可能会使用图像而不是文字来指示消息，以避开基于文本的过滤。

我的邮件中嵌入了两张图片 - 这真的不可能吗？我什至如何理解“有 2000 个字节的单词”这句话。

如果您嵌入图像，它不应该不那么严格吗 - 随着邮件的大小越来越大并且不太可能成为垃圾邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T07:13:55.000

你应该看看[这里](http://help.campaignmonitor.com/topic.aspx?t=104)。如果您在邮件中嵌入图像，您将减少 HTML 代码，并且您应该获得较小的分数

# oracle-apex - Apex 交互式报告，用户订阅被删除

> ID：12284233
> 
> 赞同：1
> 
> 时间：2012-09-05T14:54:46.277
> 
> 标签：oracle-apex

我们在 Dev、Test、Prod 环境中安装了 Oracle Apex 4.0.2 版本实例。

我们在所有 3 个环境中使用相同的应用程序编号，例如：应用程序编号。200 用于所有 3 个环境。

将开发环境中的应用程序导入测试环境时。交互式报告的用户订阅将被删除。

有什么想法或建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:11:31.407

这实际上是一个已知功能（或错误，取决于您的观点）。[我自己遇到了这个问题，并在 Joel Kallman 出色的博客文章](http://joelkallman.blogspot.in/2010/07/where-did-my-saved-interactive-reports.html)的帮助下设法解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:01:40.897

我能够通过以下过程取回目标环境中的用户订阅。

在我的场景中，我将应用程序 200 从开发环境移动到测试环境。

1.  通过在 Export Preferences 选项卡中选择 Export interactive Report Subscriptions to Yes 从测试环境中导出应用程序 200
2.  从应用程序 200.sql 中仔细提取 wwv_flow_api.create_worksheet_notify 代码 *（如果有多个用户订阅，您将看到超过 1 个语句）* 。
3.  提取 wwv_flow.g_flow_id 和 wwv_flow_api.g_id_offset 初始化语句。

    **下面的例子：**

    在我的场景中，我正在使用 1 个交互式报告用户订阅进行测试

    ```
    begin
    wwv_flow.g_flow_id := nvl(wwv_flow_application_install.get_application_id,200);
    wwv_flow_api.g_id_offset := nvl(wwv_flow_application_install.get_offset,0);
    wwv_flow_api.create_worksheet_notify (
    p_id => 3351032625694541+wwv_flow_api.g_id_offset,
    p_flow_id => wwv_flow.g_flow_id,
    p_worksheet_id => 11045125897667191+wwv_flow_api.g_id_offset,
    p_report_id => 11046318922668871+wwv_flow_api.g_id_offset,
    p_owner => 'abc.def',
    p_email_subject => 'Primary Report test',
    p_email_address => 'abc.def@email.com',
    p_start_date => '2012.09.07.01:00:00',
    p_notify_interval => 'D');
    end; 
    ```

4.  将应用程序 200 从开发环境导入到测试环境。

5.  在Test环境下执行上面的Example pl/sql，sql提示符。

在测试环境中运行应用程序，您将看到用户订阅相关页面的交互式报告。

**注意：仅当您在所有环境中具有相同的应用程序 ID 时，此过程才适用**

# ruby - 如何在续集中重新加载表模式？

> ID：12284242
> 
> 赞同：5
> 
> 时间：2012-09-05T14:55:08.507
> 
> 标签：ruby, sequel

鉴于我有以下迁移：

```
Sequel.migration do
  up do
    alter_table :users do
      add_column :is_admin, :default => false
    end

    # Sequel runs a DESCRIBE table statement, when the model is loaded.
    # At this point, it does not know that users have a is_admin flag.
    # So it fails.

    @user = User.find(:email => "admin@fancy-startup.example")
    @user.is_admin = true
    @user.save!
  end
end 
```

然后 sequel 不会自动重新加载表结构（见内联注释）。

我正在使用这个丑陋的黑客来解决它：

```
# deep magic begins here. If you remove a single line, it will
# break the migration.

User.db.schema("users", :reload => true)
User.instance_variable_set(:@db_schema, nil)
User.columns
User.new.respond_to?(:is_admin=)
sleep 1 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T15:16:29.950

这个hack比你的hack简单得多：（重新）将数据集设置为表名：

```
User.set_dataset :users 
```

在行动中看到：

```
require 'sequel'
DB = Sequel.sqlite
DB.create_table :users do
  primary_key :id
  String :name
end

class User < Sequel::Model; end
User << { name:"Bob" }

DB.alter_table :users do
  add_column :is_admin, :boolean, default:false
end

p User.first       #=> #<User @values={:id=>1, :name=>"Bob", :is_admin=>false}>

p User.setter_methods    #=> ["name="]
User.set_dataset :users  # Make the magic happen
p User.setter_methods    #=> ["name=", "is_admin="]

@user = User.first
@user.is_admin = true
@user.save

p User.first       #=> #<User @values={:id=>1, :name=>"Bob", :is_admin=>true}> 
```

*[注意[没有`Sequel::Model#save!`方法](http://sequel.rubyforge.org/rdoc/classes/Sequel/Model/InstanceMethods.html)；我将其更改为，`save`以便它可以工作。]*

# asp.net - 如何根据内部数组使用 OData 进行过滤？

> ID：12284244
> 
> 赞同：5
> 
> 时间：2012-09-05T14:55:24.263
> 
> 标签：asp.net, asp.net-web-api, odata

所以我使用 mvc4 web api 创建了一个控制器，其中 url (Get) “/api/things” 返回以下数据：

```
 <ArrayOfThing>
   <Thing>
   <Id>1</Id>
   <Description>The Thing Desc</Description>
   <Categories>
           <Category><Id>1</Id></Category>
          <Category><Id>2</Id></Category>
   </Categories>
  </Thing>
  <Thing>
   <Id>2</Id>
   <Description>The Other Thing Desc</Description>
   <Categories>
           <Category><Id>1</Id></Category>
           <Category><Id>3</Id></Category>
   </Categories>
  </Thing>
</ArrayOfThing> 
```

*请注意，事物和类别具有多对多关系

我知道如果需要一个“事物”资源，我应该使用与以下路由 url (Get) “/api/things/{id}” 匹配的控制器。

但是，如果我想获取 url (Get) “/api/things” 返回的数据子集怎么办。我测试了修改控制器以返回 IQueryable 的 OData 协议，如果我想对“事物”的属性（如 Id 或描述）进行 $filter，它可以正常工作。不幸的是，当我想根据类别进行过滤时我没有解决，我相信是因为类别是一个内部数组。

那么，我应该怎么做才能根据类别进行过滤呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T06:11:43.650

OData V3 支持任何/所有操作，您可以按集合属性对其进行筛选。例如，要过滤包含 Category(1) 的事物，使用以下语法：

/api/things/?$filter=Categories/any(category: category/Id eq 1)

如果您使用的是 ASP.net Web Api RTM 位，则可以使用[odata 包](http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData)来支持任何/全部。有关更多示例，您可以查看可查询的示例代码：[http ://aspnet.codeplex.com/SourceControl/changeset/view/61dfed023e50#Samples%2fNet4%2fCS%2fWebApi%2fODataQueryableSample%2fProgram.cs](http://aspnet.codeplex.com/SourceControl/changeset/view/61dfed023e50#Samples%2fNet4%2fCS%2fWebApi%2fODataQueryableSample%2fProgram.cs)

# objective-c - Objective-C中的灯光动画

> ID：12284250
> 
> 赞同：2
> 
> 时间：2012-09-05T14:55:59.567
> 
> 标签：objective-c, ios

我正在尝试在objective-c中实现一个动画，其中我有一个纽约天际线插图作为附加图像。要求是实现城市灯光动画，其中天际线建筑物中的灯光（方形和矩形框）依次点亮......以吸引人的动画方式。实现这一点的一种方法是使用一组连续图像（UIImageView.animationImages = 图像数组），但我相信可能有更好、更有效的方法来实现这一点。如果有人能指出我正确的方向，我将不胜感激。

![在此处输入图像描述](../Images/26bf7ed43e140b41adea8129c6588395.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:03:50.483

```
[UIView animateWithDuration:1 delay:0 options:0 animations:^{
    light1.alpha = 1;
} completion:nil];

[UIView animateWithDuration:1 delay:0.5 options:0 animations:^{
    light2.alpha = 1;
} completion:nil];

[UIView animateWithDuration:1 delay:1 options:0 animations:^{
    light3.alpha = 1;
} completion:nil];

[UIView animateWithDuration:1 delay:1.5 options:0 animations:^{
    light4.alpha = 1;
} completion:nil]; 
```

创建灯光视图时将其 alpha 设置为 0，然后运行它`-viewDidAppear`可能...（这是假设每个灯光都是单独的`UIView`...）

如果你有很多视图，你可以这样做来为每个人的 alpha 值设置动画：

```
float n = 0; 
for (UIView* v in self.view.subviews) { 
    if (v.alpha < 0.5) { 
        [UIView animateWithDuration:1 delay:n options:0 animations:^{ 
            v.alpha = 1; 
        } completion:nil]; 
        n += 0.5;
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:34:46.027

为什么不拥有一个带有每个灯光坐标的 CGRect 数组。然后你可以简单地在矩形周围移动 1 个 UIView，或者如果一次照明超过 1 个，然后移动几个 UIView。

编辑------- 只是一些快速代码放在一起。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor blackColor];
    rects = [[NSMutableArray alloc] init];
    lit = [[NSMutableArray alloc] init];

    [rects addObject:[NSValue valueWithCGRect:CGRectMake(20, 20, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(60, 20, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(100, 20, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(140, 20, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(180, 20, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(220, 20, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(260, 20, 20, 20)]];

    [rects addObject:[NSValue valueWithCGRect:CGRectMake(20, 60, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(60, 60, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(100, 60, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(140, 60, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(180, 60, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(220, 60, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(260, 60, 20, 20)]];

    [rects addObject:[NSValue valueWithCGRect:CGRectMake(20, 100, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(60, 100, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(100, 100, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(140, 100, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(180, 100, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(220, 100, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(260, 100, 20, 20)]];

    [rects addObject:[NSValue valueWithCGRect:CGRectMake(20, 140, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(60, 140, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(100, 140, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(140, 140, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(180, 140, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(220, 140, 20, 20)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(260, 140, 20, 20)]];
}

- (void)viewDidAppear:(BOOL)animated
{
    [self lightRandomLight];
    [self performSelector:@selector(switchOffRandomLight) withObject:nil afterDelay:1.0];
}

- (void)lightRandomLight
{
    BOOL escape = NO;
    int rand;

    while (!escape) {
        BOOL alreadyLit = NO;
        rand = arc4random() % [rects count];
        // Check if already lit
        for (UIView *view in lit) {
            CGRect litRect = view.frame;
            CGRect ranRect = [[rects objectAtIndex:rand] CGRectValue];
            if (CGRectContainsRect(litRect, ranRect)) {
                alreadyLit = YES;
            }
        }

        if (!alreadyLit) {
            UIView *light = [[UIView alloc] initWithFrame:[[rects objectAtIndex:rand] CGRectValue]];
            light.backgroundColor = [UIColor yellowColor];
            [lit addObject:light];
            [self.view addSubview:light];
            escape = YES;
        }
    }

    [self performSelector:@selector(lightRandomLight) withObject:nil afterDelay:0.2];
}

- (void)switchOffRandomLight
{
    int rand = arc4random() % [lit count];
    UIView *light = [lit objectAtIndex:rand];
    [lit removeObject:light];
    [light removeFromSuperview];

    [self performSelector:@selector(switchOffRandomLight) withObject:nil afterDelay:0.5];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:41:16.253

这可能有点工作，但我可能会尝试将窗口颜色设置为 alpha，然后“翻转”图像后面的灯。

# python - Python __closure__ 变量和单元格

> ID：12284254
> 
> 赞同：4
> 
> 时间：2012-09-05T14:56:12.957
> 
> 标签：python, python-3.x

在探索[我之前](https://stackoverflow.com/questions/12265756/c-python-running-python-code-within-a-context)关于 Python 作用域内部工作原理的问题的一些解决方案时，我了解了该`__closure__`属性。似乎 Python 使用此属性从嵌套函数中访问在外部范围中定义的变量。

我们可以通过执行以下操作来看到这一点：

```
def foo():
    x = 5
    def bar(): 
        print(x)
        print(*(cell.cell_contents for cell in bar.__closure__))
    bar()
foo() 
```

这显示了两个封闭的值`5`和函数`bar`本身。

我不明白这是*如何*工作的 - 因为，该`__closure__`属性仅包含一个存储封闭*值*的单元格元组。但是没有关于封闭*变量名称*的信息- （即单元格存储在 a 中`tuple`，而不是 a `dict`）。那么 Python 是如何知道被括起来的变量的名称的呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T14:58:08.167

python编译的代码使用索引；这些变量与单元结构的索引相关联。

```
>>> def foo():
...     x = 5
...     def bar():
...         return x
...     return bar
... 
>>> bar = foo()
>>> import dis
>>> dis.dis(bar)
  4           0 LOAD_DEREF               0 (x) 
              3 RETURN_VALUE 
```

`LOAD_DEREF`字节码引用第一个单元格值。

# .net - 尝试登录 Sitecore 时出现 .net 访问被拒绝错误的典型原因是什么？

> ID：12284257
> 
> 赞同：2
> 
> 时间：2012-09-05T14:56:17.663
> 
> 标签：.net, sitecore, sitecore6

使用有效的 Sitecore 帐户，没有关联但标记为管理员的角色，我在尝试登录时收到以下错误。

1.  网站运行正常
2.  我能够使用类似的帐户登录。
3.  尝试使用不正确的密码登录会在登录页面上返回正确的“拒绝访问”消息。
4.  不久之后（大约一个小时），登录再次正常

Sitecore 以这种方式失败的典型原因是什么？

错误详情：

## “/”应用程序中的服务器错误。

应用程序访问被拒绝。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详情：

Sitecore.Exceptions.AccessDeniedException：应用程序访问被拒绝。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[AccessDeniedException: 应用程序访问被拒绝。] Sitecore.Diagnostics.Assert.HasAccess(Boolean accessAllowed, String message) +158 Sitecore.Shell.Applications.ShellForm.OnLoad(EventArgs e) +68

[TargetInvocationException：调用的目标已引发异常。] System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo 方法，对象目标，Object[] arguments，SignatureStruct& sig，MethodAttributes methodAttributes，RuntimeType typeOwner) +0 System.Reflection.RuntimeMethodInfo.Invoke （Object obj，BindingFlags invokeAttr，Binder binder，Object[] 参数，CultureInfo 文化，布尔型 skipVisibilityChecks）+640 System.Reflection.RuntimeMethodInfo.Invoke（Object obj，BindingFlags invokeAttr，BindingFlags 参数，CultureInfo 文化）+38 System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters) +35 Sitecore.Reflection.ReflectionUtil.CallMethod(Type type, Object obj, String methodName, Boolean includeNonPublic, Boolean includeInherited, Object[] parameters) +37 Sitecore。Reflection.ReflectionUtil.CallMethod(Object obj, String methodName, Boolean includeNonPublic, Boolean includeInherited, Object[] 参数) +66 Sitecore.Web.UI.Sheer.ClientPage.OnLoad(EventArgs e) +420 System.Web.UI.Control。 LoadRecursive() +71 System.Web.UI.Page.ProcessRequestMain(布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint) +3064

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.237

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:55:10.793

我有一个类似的问题，我在尝试定义一些自定义角色后锁定了所有用户。

问题是用户不再属于神奇角色**sitecore\Sitecore Client Authoring**。

其他**sitecore\Sitecore Client XXX**角色也很特殊。例如，属于**sitecore\Sitecore Client Publishing**会显示发布功能区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:44:43.333

真是奇怪的事情。启用管理员复选框会禁用 Sitecore 中的所有安全检查。在 6.5 上试过这个

# php - 使用 codeIgniter 对网站的旧页面进行 301 重定向

> ID：12284259
> 
> 赞同：1
> 
> 时间：2012-09-05T14:56:26.513
> 
> 标签：php, .htaccess, codeigniter

我刚刚将我的一个静态网站升级为启用 codeIgniter 的网站。我需要将旧网站的确切域名重定向到新网站以避免 404 错误。

*   旧页面 >`http://example.com/pagename.php`
*   新页面 >`http://example.com/index.php/home/category_images/9(cat_id)`

我没有很高的没有。直接对所有页面进行硬编码不会成为问题。我努力了 ：

```
RewriteEngine On
RewriteBase /
RewriteRule ^http://www.example.com/pagename.php$ http://example.com/index.php/home/category_images/9 [L,R=301] 
```

不工作，我不知道为什么。`mod_rewrite`在我的 apache 服务器上启用。

另外，为了确认，还请告诉我应该将该文件放在哪个文件夹中，我在根目录或应用程序文件夹之间感到困惑。

谢谢你。

版本 2：现在根据 Michael 先生的建议，我尝试使用如下所示的重定向功能来实现它：

默认控制器功能：home.php

```
function __construct()
{
    // Call the Model constructor
    parent::__construct();
    $this->load->model('common_model');
    $this->handle_redirects();
}

function handle_redirects () 
{
    $redirects = Array(
    'gorgeous-girls.php' => 'home/category_images/9'
    );
    $uri = implode('/', $this->uri->segments);
    foreach ($redirects as $from => $to)
    {
        $from = str_replace(':any', '.+', str_replace(':num', '[0-9]+', $from));
        if (preg_match("#^{$from}$#i", $uri))
        {
        if (strpos($to, '$') !== false and strpos($from, '(') !== false)
            $to = preg_replace("#^{$from}$#i", $to, $uri);
        redirect($to , 'location', 301);
        }
    }
} 
```

我的 .htaccess 看起来像：

```
RewriteEngine On
RewriteBase /
RewriteCond $1 !^(index.php|resources|robots.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

PS：我已经从我的域名结构中删除了 index.php。它看起来像：www.example.com/controller/function/uri/uri

现在我没有从主机收到错误页面，但我从 CodeIgniter 收到了错误页面。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T07:50:31.707

考虑到您的超文本访问文件无论如何都应该路由所有内容**`index.php`**，最好使用 CodeIgniter 的**`redirect()`**函数来处理您的重定向。

下面提供了一个示例，基于我在我的*页面*控制器中的内容，在我自己的框架扩展中（它可以在任何**`redirect()`**功能可用的地方使用，以及**`$this->uri->segments`**.

```
function handle_redirects () {
    $redirects = Array(
        'pagename.php' => 'home/category_images/9'
    );
    $uri = implode('/', $this->uri->segments);
    foreach ($redirects as $from => $to)
    {
        $from = str_replace(':any', '.+', str_replace(':num', '[0-9]+', $from));
        if (preg_match("#^{$from}$#i", $uri))
        {
            if (strpos($to, '$') !== false and strpos($from, '(') !== false)
                $to = preg_replace("#^{$from}$#i", $to, $uri);
            redirect($to , 'location', 301);
        }
    }
} 
```

如果您要在框架中将查询传递给您的**`pagename.php`**文件，您可以考虑以下内容（请注意，我不知道您的页面的意图是什么 - 这是一个通用的解决方案）：

```
$redirects = Array(
    'pagename.php?q=(:any)' => 'home/category_images/$1'
); 
```

例如：

```
http://example.com/pagename.php?q=9 
```

会将您重定向到：

```
http://example.com/home/category_images/9 
```

这个解决方案非常适合我，并且在跨浏览器兼容性方面非常有效。

请注意，您的 RewriteRules 应该是这样的，或者类似的东西：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule (xml|txt|css|js|jpg|png|gif)$ - [L]
RewriteRule .* index.php [L,QSA] 
```

> **编辑**：以上内容已更改以适应资产。基本上，它告诉 Apache 路由所有内容`index.php`，除非它是一个存在并且具有指定扩展名的文件。（出于安全目的，这是一种很好的做法。）
> 
> **编辑**：请注意，您不应包含在您的 URL 中，因为它无论如何`index.php`都会被文件剥离。`.htaccess`

请注意，我使用的是 PHP 5.3——尽管这个解决方案应该适合你。如果有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:02:31.440

您不会在重写规则的匹配部分中使用整个域名。尝试这个：

```
RewriteRule ^pagename.php$ /index.php/home/category_images/9 [L,R=301] 
```

当然，您可能需要其他规则让服务器了解 index.php 是要调用的文件，而不是 /image.php/home/category_images/9 中的文件

所以也许第二条规则像

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^index.php/(.*) /index.php?q=$1 [L] 
```

我刚刚注意到，在您更新的答案中，您试图从 www.example.com 重定向到 example.com。如果您确实想强制使用一个域，您可能应该在 .htaccess 中添加另一个规则，然后再像这样提到的其他任何规则：

```
RewriteCond %{HTTP_HOST} ^www.example.com$
Rewrite Rule ^(.*)$ http://example.com/$1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:04:07.117

你可以打开你 xampp/apache/conf/httpd.conf

然后检查下面的行

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

如果哈希 (#) 存在于行上方。然后删除它。

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

并重新启动您的 apache 服务器并检查您的站点。

之后网站无法正常工作，请告诉我。

# jquery - 来自facebook graph api的JSON返回太慢

> ID：12284263
> 
> 赞同：0
> 
> 时间：2012-09-05T14:56:32.970
> 
> 标签：jquery, json, facebook-graph-api

我现在正在玩 Facebook graph api。我正在获取所有用户朋友的个人资料图片和其他数据，并将它们放在谷歌地图上作为标记。

它正在工作，但它似乎要等待所有数据和图像在它开始出现之前返回。抱歉，如果这太笼统了，我是初学者。我尝试将 JSON 调用分解为几个回调函数，但这没有帮助。我希望在收到数据后立即放置每个朋友的图像。

我的代码如下（4 次调用以使用 jquery 获取 JSON）。首先调用获取朋友列表，然后为每个朋友获取图像和数据，然后获取位置数据。

```
$.getJSON("https://graph.facebook.com/" + userid + "/friends?access_token=" + token, function(data) {
                $.each(data.data, function(key, val) {
                    $.getJSON("https://graph.facebook.com/"+ val.id + "?fields=picture", function(idata) { 
                    var img = new Image();
                    img.src =  idata.picture;
                    $.getJSON("https://graph.facebook.com/"+ val.id + "?access_token=" + token, function(fdata) {
                        $.getJSON("https://graph.facebook.com/"+ fdata.location.id + "?access_token=" + token , function(ldata) {
                            $('#map_canvas').gmap('addMarker', {
                            'id': 'mark',
                            'position': ldata.location.latitude + ',' + ldata.location.longitude, 
                            'draggable': false, 
                            'bounds': false,
                            'icon' : image.src,
                            'title' : fdata.name,
                            'animation': google.maps.Animation.DROP,
                        }).click(function() {
                            $('#map_canvas').gmap('openInfoWindow', {'content': 'Name: ' + fdata.name  +  '</br>Location: ' + fdata.location.name }, this);
                        });
                    });
                    });
                });
                });     
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:52:14.263

速度慢的原因是您要进行大量查询：一个来获取您的好友列表，然后每个朋友再查询 3 个来获取他们的照片，？和位置。这些 API 调用中的每一个都需要时间。很多时间。

首先，减少查询次数。使用 Graph API，您可以通过以下两种方式获得所需的一切：

```
"https://graph.facebook.com/me/friends?fields=id,name,picture,location&access_token=" + token 
```

然后遍历此查询的结果并提取所有`location.id`值，例如放入一个名为`loc`. 现在运行这个查询：

```
"https://graph.facebook.com/?fields=location&ids=" + loc.join() + "&access_token=" + token 
```

现在您可以遍历第一个结果以获取名称、图片和位置 id，它们遍历第二个结果以获取位置的纬度和经度。

# android - 如何在 TextView 上一次将下划线和颜色设置为部分文本？

> ID：12284264
> 
> 赞同：0
> 
> 时间：2012-09-05T14:56:32.980
> 
> 标签：android, html, fonts, colors, textview

我的 EditText 中有一个字符串，并且这个字符串中有一个 URL 链接。

所以我想设置这个链接有下划线和蓝色作为常识。

现在我可以使用“u”标签和 Html.fromHtml() 添加下划线，但不能设置颜色，这是我的代码：

```
String text = "some string <u><font color=\"#0000FF\">some link</font></u>";
editText.setText(Html.fromHtml(text), TextView.BufferType.SPANNABLE); 
```

有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T16:42:24.073

我在运行 Android 2.2 的模拟器、运行 Android 3.2 的另一个模拟器以及运行 Android 4.0.3 的手机上尝试了此操作，您发布的代码在所有三个平台上都可以正常工作（文本“某些链接”带有下划线和蓝色）。

这是我使用的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:ems="10"
    android:hint="@string/hello_world" >

    <requestFocus />
</EditText> 
```

这是完整的活动代码：

`package com.example.andtest01;`

 ````
import android.app.Activity;
import android.os.Bundle;
import android.text.Html;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    EditText editText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        editText = (EditText) findViewById(R.id.editText1);

        String text = "some string <u><font color=\"#0000FF\">some link</font></u>";
        editText.setText(Html.fromHtml(text), TextView.BufferType.SPANNABLE);
    }

} 
````

# php - Symfony 将当前的 URI slugs 获取为数组？

> ID：12284270
> 
> 赞同：0
> 
> 时间：2012-09-05T14:56:42.220
> 
> 标签：php, symfony1, symfony-1.4

在 Symfony 中，如何将当前的 URI slugs 作为数组获取？

```
www.mysite.com/this/that/test/hello/world/7?whatever=true 
```

使用什么命令获取以下数组：

```
[0] => 'this',
[1] => 'that',
[2] => 'test',
[3] => 'hello',
[4] => 'world',
[5] => '7' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:05:26.503

尝试以下操作：

```
explode('/', $request->getPathInfo()); 
```

（我实际上不知道你会从哪里得到你的请求对象，所以你可能不得不重命名变量）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:05:00.783

这应该有效：

```
 explode('/',$this->getContext()->getRouting()->getCurrentInternalUri()); 
```

# ruby-on-rails - 如何在 Rails 中将 Squeel 与 hstore 一起使用

> ID：12284273
> 
> 赞同：2
> 
> 时间：2012-09-05T14:56:46.150
> 
> 标签：ruby-on-rails, ruby, postgresql, arel, hstore

我想为我的 Rails 应用程序（v 3.2.6）使用 Squeel gem（基于 Arel）。我的 hstore 列称为属性。

这些工作非常好：

```
User.where{(firstname == 'Ryan') & (lastname == 'Bates')}
User.where{"properties @> ('male' => '1')"} 
```

第二个例子是一个普通的 Postgres 查询，因为 Squeel 似乎不支持 hstore 函数。

这些不起作用：

```
User.where{"properties @> ('male' => '1')" & firstname == 'Ryan'}
User.where{("properties @> ('male' => '1')") & (firstname == 'Ryan')} 
```

错误：

```
NoMethodError: undefined method `&' for "properties @> ('male' => '1')":String 
```

我确实理解错误，但我不知道如何封装我的 hstore 查询。有没有更好的方法来使用 Squeel 或 Arel 构建 hstore 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:17:44.213

Squeel 通过使用反引号 (`) 来支持 SQL 文字。

像下面这样的东西可能会起作用：

```
Person.where{(id == my{@person.id}) & (`preferences @> send_me_junk_email=>yes`)} 
```

当使用反引号时，Squeel 会下拉一个抽象层并直接执行 SQL。

[http://erniemiller.org/2012/05/30/sql-literals-in-squeel-or-overriding-backticks-in-ruby/](http://erniemiller.org/2012/05/30/sql-literals-in-squeel-or-overriding-backticks-in-ruby/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T21:16:15.127

我只是深入研究了这一点。答案似乎在[这个文件](https://github.com/activerecord-hackery/squeel/blob/master/lib/squeel/nodes/operators.rb)中，基本上你可以在这里添加你自己的操作。

此示例用于`@>`搜索 PostgreSQL 数组（[在此演示文稿中进行了演示](http://slid.es/danmcclain/supercharging-activerecord-with-postgresql)）。

```
module Squeel
  module Nodes
    module Operators
      def within *list
        list = "{#{list.map(&:to_s).join(',')}}"
        Operation.new self, :'@>', list
      end
    end
  end
end 
```

放入这个猴子补丁后，假设有一个具有数组字段的`Note`模型，以下 Squeel 语句成为可能。`tags`

```
Note.where { tags.within 'first tag', 'second tag' } 
```

应该生成如下所示的 SQL：

```
"SELECT \"notes\".* FROM \"notes\"  WHERE \"notes\".\"tags\" @> '{first tag,second tag}'" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T19:06:46.607

尝试使用[sequel hstore gem](http://rubygems.org/gems/sequel-hstore)，这增加了对 hStore 到 Sequel 的支持

# c++ - Visual Studio Express 2010 的 PThreads

> ID：12284274
> 
> 赞同：0
> 
> 时间：2012-09-05T14:56:50.833
> 
> 标签：c++, visual-c++, parallel-processing, pthreads, visual-c++-2010

最近我开始使用 PThreads 学习并行编程，但是我在编译“**如何将库包含到 Visual Studio 中**”时遇到问题，请帮助

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:23:30.340

我不认为 Visual C++ 原生支持 Pthreads。您可以尝试使用[Pthreads-Win32](http://sources.redhat.com/pthreads-win32/index.html)

# python - 在美味派中实现业务逻辑规则的最佳方法？

> ID：12284276
> 
> 赞同：1
> 
> 时间：2012-09-05T14:56:53.157
> 
> 标签：python, django, tastypie

该项目的前端将使用 JS 内置业务规则，但该应用程序的后端将执行这些规则。将规则放入模型中似乎有点混乱，最好在每个`ModelResource`类的某个地方都有规则。

我应该覆盖哪些方法，我应该如何最好地报告限制和异常？

逻辑的类型将沿着

```
if field_x = 5 and request.user != 2:
    complain and don't process request
    send back error 
```

该`hydrate`方法看起来是进行检查的好地方，但我不确定如何正确引发异常并通过这些异常解释出了什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:37:05.733

我按字母顺序阅读了文档，最后遇到了： http: [//django-tastypie.readthedocs.org/en/latest/validation.html](http://django-tastypie.readthedocs.org/en/latest/validation.html)

# html - 我的内容 标记不出现在 JSF 视图中

> ID：12284277
> 
> 赞同：0
> 
> 时间：2012-09-05T14:56:53.720
> 
> 标签：html, css, jsf, facelets

我正在使用 JSF/Facelets 和样式表来装饰我的视图 JSF 的项目。我想在我的视图 XHTML 的内容中放置一些图形组件（例如：“h:inputText”和“h:commandButton”标签），但这无法实现，我不知道为什么！唯一出现的部分是我的模板“Template.html”的页眉和页脚。

无论如何，这是我的“styles.css”：

```
body { width: 750px; }

#header 
{
   width:              100%;
   font-size:          36px;
   font-weight:        bold;
   line-height:        48px;
   background-color:   navy;
   color:              white;
}

#footer
{
   width:              100%;
   font-weight:        bold;
   background-color:   navy;
   color:              white;
} 
```

这是主模板“Template.html”，包括“Header.html”和“Footer.html”，我在其中使用标签放置了“styles.css”：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets">
 <h:head>
      <h:outputStylesheet name="css/styles.css" />      
 </h:head>
 <h:body>
 <h:panelGroup id="page" layout="block">

 <h:panelGroup id="header" layout="block">
    <ui:insert name="header">
        <ui:include src="Header.html" />
    </ui:insert>
 </h:panelGroup>

 <h:panelGroup id="container" layout="block">
    <h:panelGroup id="content" layout="block">
        <ui:insert name="content"></ui:insert>
    </h:panelGroup>
 </h:panelGroup>

 <h:panelGroup id="footer" layout="block">
    <ui:insert name="footer">
        <ui:include src="Footer.html" />
    </ui:insert>
 </h:panelGroup>

 </h:panelGroup>

 </h:body>
 </html> 
```

Anf 最后是我的“Main.xhtml”，其中包括模板“Template.html”：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" template="Template.html">
 <h:body>
 <ui:define name="content">
    <h:form>
        <h:inputText title="inputText"></h:inputText>
        <h:commandButton value="OK"></h:commandButton>
    </h:form>
 </ui:define>
 </h:body>
 </ui:composition> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:18:21.237

你已经在你的作品中定义了 ah:body ，它看起来很奇怪。

这是一个类似问题的链接。 [如何包含-另一个-xhtml-in-xhtml-using-jsf-2-0-facelets](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets)

# exception-handling - Spring Integration - 在 Service Activator 组件中发生异常时写入错误队列

> ID：12284280
> 
> 赞同：3
> 
> 时间：2012-09-05T14:57:02.673
> 
> 标签：exception-handling, error-handling, routing, spring-integration

我开始使用 Spring 集成，如果可能的话，我不知道如何解决这种情况。

我想自动“捕获”我的应用程序的服务激活器中可能发生的每个异常，并将此错误发送到专用队列。网关不是解决方案，因为我需要一些自定义代码，所以如果我正确理解了原理，我必须使用服务激活器元素。

我认为类似的东西会没问题：

```
<jms:outbound-channel-adapter channel="errorChannel"
                                  connection-factory="jmsConnectionFactory" destination="oneErrorQueue"/> 
```

那是行不通的。我不知道spring集成是否使用errorChannel来确实放入错误。

* * *

谢谢，它似乎工作。

我让转换器监听入站组件的错误通道，启动流程，当服务激活器发生错误时，它会收到 MessagingException。现在的问题是这个错误没有到达我的队列。我让你看代码：

```
<jms:message-driven-channel-adapter
            channel="input-channel" concurrent-consumers="1"
            max-concurrent-consumers="3" connection-factory="jmsConnectionFactory"
            transaction-manager="jtaTransactionManager" destination="myQueue" error-channel="myErrorChannel"/>

<transformer input-channel="myErrorChannel" output-channel="create-error-channel" ref="errorTransporter" method="transform"/>

    <jms:outbound-channel-adapter channel="create-error-channel"
                                  connection-factory="jmsConnectionFactory" destination="creationErrorQueue" extract-payload="true"/>

... 
```

还有变压器：

```
public class ErrorTransporter {

    @Transformer
    public Message<CreateCustomerOrder> transform(MessagingException exception) {
        return (Message<CreateCustomerOrder>) exception.getFailedMessage();
    }
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:21:25.023

向启动流程的入站组件添加错误通道属性

```
error-channel="myErrorChannel" 
```

当上游组件（例如服务激活器调用的服务）抛出异常时，入站组件将在错误通道上放置错误消息。该消息的有效负载是一个 MessagingException，它有两个属性：

```
failedMessage
cause 
```

因此，在您的错误流程中，添加一个变压器...

```
<int:transformer input-channel="myErrorChannel"
    output-channel="toJmsChannel"
    expression="payload.failedMessage" 
```

其次是您的 jms 出站通道适配器。

# css - Firefox 是否支持 CSS 掩码？

> ID：12284286
> 
> 赞同：2
> 
> 时间：2012-09-05T14:57:14.640
> 
> 标签：css, svg

我在某处读到 css 掩码可以在带有 svg 文件的 Firefox 中使用，但我无法让它工作......它在 chrome 和 safari 中工作完美，但我对 Firefox 没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:16:46.660

[这就是您在 Firefox 中的操作方式](http://robert.ocallahan.org/2008/06/applying-svg-effects-to-html-content_04.html)。您将 SVG 剪辑路径和掩码应用于 html 内容。它与 webkit css 掩码的语法不同，但可以达到相同的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:59:02.283

编辑：根据[http://caniuse.com/#feat=css-masks应该支持 Firefox 54 CSS 掩码](http://caniuse.com/#feat=css-masks)

~~根据[http://caniuse.com/#feat=css-masks不支持](http://caniuse.com/#feat=css-masks)~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:00:07.120

[https://developer.mozilla.org/en-US/docs/CSS/mask](https://developer.mozilla.org/en-US/docs/CSS/mask)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T21:31:13.557

正在搜索 css 掩码，在这里找到了本教程，可能会对您有所帮助。展示了一种不同的方法，它适用于 Mozilla
[http://thenittygritty.co/css-masking](http://thenittygritty.co/css-masking)

示例 - [http://www.der-schepp.de/css-masking/mouse.html](http://www.der-schepp.de/css-masking/mouse.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-06T01:36:19.467

有这个jquery插件，我最终选择了这个解决方案，因为它也是跨浏览器的。

[http://almogbaku.github.io/imageMask/](http://almogbaku.github.io/imageMask/)

# html - 在设置尺寸内输入提交边框

> ID：12284287
> 
> 赞同：1
> 
> 时间：2012-09-05T14:57:22.253
> 
> 标签：html, css, cross-browser

请不要建议我停止使用`<input type="submit">`我需要支持非启用 javascript 的用户。

我有一个提交按钮，并在上面`:hover`应用边框。但是我注意到在 Firefox 15 和 IE7 中，边框被应用到元素的内部。这似乎是因为我已经为元素设置了一个 fixed`width`和 a `height`，并且一旦我删除它们就会正常运行。但是由于浏览器不一致，我需要宽度和高度来确保提交按钮在所有浏览器中的大小相同。

![提交按钮边框错误](../Images/6cd75ae8c4e21166f907301993bebc56.png)

有谁知道如何防止在元素内绘制边框？

相关CSS：

```
#searchform .submit {
    vertical-align: middle;
    float: right;
    height: 31px;
    width: 31px;
    position: relative;
    left: -4px;
    margin-right: -4px;
    background-image: url(library/images/search-icon.png);
    background-position: center center;
    background-repeat: no-repeat;
    background-color: #ffffff;
    border: none;
    -webkit-border-bottom-right-radius: 5px;
    -webkit-border-top-right-radius: 5px;
    -moz-border-radius-bottomright: 5px;
    -moz-border-radius-topright: 5px;
    border-bottom-right-radius: 5px;
    border-top-right-radius: 5px;
}
#searchform .submit:hover {
    margin: -2px -6px 0px 0px;
    border: 2px solid #000;
} 
```

相关HTML：

```
<input type="submit" value="" class="submit btn" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:32:11.300

想知道是否有一个`box-sizing`属性应用于此输入。`box-sizing: border-box`会导致边框和填充发生在宽度和高度内。我想知道您是否正在使用使用该`* { box-sizing: border-box; }`技术的 CSS 模板。尝试

```
#searchform .submit { box-sizing: content-box; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:21:25.543

**悬停**到按钮时尝试删除边距？

```
#searchform .submit:hover {
border: 2px solid #000; 
```

}

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-05T15:04:45.990

你为什么不使用这个：

```
border: 2px solid #3393B5; 
```

或者：

```
border: 2px solid #fff; 
```

代替：

```
border: 2px solid #000; 
```

# sql-server - 使用自定义 ConnectionString 和 DbProviderInfo 创建 DbContext

> ID：12284291
> 
> 赞同：1
> 
> 时间：2012-09-05T14:57:38.057
> 
> 标签：sql-server, entity-framework, ef-code-first, connection-string, dbcontext

我们有大量的数据库都共享相同的模式。它们分布在许多 SQL Server 上，一些是 2005 年，一些是 2008 年。在连接到 2005 年服务器后，我们首先连接到 2008 年服务器时遇到异常，说明如下：

> 更新条目时出错。有关详细信息，请参阅内部异常。更新条目时出错。有关详细信息，请参阅内部异常。正在使用的 SQL Server 版本不支持数据类型“datetime2”。

据我了解，正在发生的事情是模型是根据 2008 SQL 服务器提供程序信息创建的，因此当连接到 2005 服务器时，它不能使用 DateTime2 数据类型，因为那里不支持。

我们想针对 2005 服务器构建模型，但我不确定如何指定连接字符串和 DbCompiledModel。以前我有几个构造函数接受连接字符串（以及其他参数）......

```
 public ProjectContext(string ConnectionString) : base(ConnectionString)
    {

        // Get the ObjectContext related to this DbContext
        var objectContext = (this as IObjectContextAdapter).ObjectContext;

        // ... does some stuff with the ObjectContext
    } 
```

如何为所有上下文（最小公分母）指定针对 2005 服务器构建的编译模型并指定连接字符串？我只是暂时没有办法做到这一点。

任何帮助，将不胜感激。

编辑：我们使用的是 Entity Framework 4.3 Code First，因此，没有设计时 EDMX 文件可供编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:51:59.157

基类构造函数有重载！

我将 OnModelCreating 配置内容复制到一个新方法中，该方法返回名为 BuildModel 的 DbCompiledModel。当调用具有 ConnectionString 构造函数的构造函数时，我得到 dbModel 的值，这是一个私有只读属性，如果为 null，则将其设置为从 BuildModel 返回的值。属性值与连接字符串一起被馈送到基类构造函数。

我可以访问要连接的 SQL Server 版本。最终，我会将其引入并为 2005 年和 2008 年创建一个模型。

我将把它打开一段时间，以防万一有更好的方法来做到这一点。

```
public DbContext ProjectContext (string ConnectionString) 
    : base(ConnectionString, dbModel)
{

}

private DbCompiledModel _dbModel;
private DbCompiledModel dbModel;
{
    get
    {
        if (_dbModel == null)
        {
            _dbModel = BuildModel(new DbModelBuilder());
        }
        return _dbModel;
    }
}

    private DbCompiledModel BuildModel(DbModelBuilder builder)
    {
        //Some configuration stuff
        return builder.Build(new DbProviderInfo("System.Data.SqlClient", "2005"))
                      .Compile();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:48:25.593

要回答第一个问题，您需要直接编辑edmx xml 文件，然后 在文件顶部的元素`ProviderManifestToken`上将属性从2008 更改为2005 。`<Schema>`

AFAIK，您需要为每个 .edmx 文件执行此操作，更糟糕的是，模型更新向导将`ProviderManifestToken`根据 EF 连接使用的 SQL 版本，在您每次从数据库更新模型时恢复。AFAIK EF 向导使用包含 edmx 的本地程序集中的连接字符串，因此如果您将该连接字符串更改为指向 SQL 2005 DB，您应该可以继续前进。

# java - 插入键时自定义等于/哈希（番石榴缓存）

> ID：12284294
> 
> 赞同：10
> 
> 时间：2012-09-05T14:57:45.590
> 
> 标签：java, hash, equals, guava

简单地说，我必须重写缓存选择正确键的方式，因为在检索键时不应该考虑某些字段（例如，时间戳、消息 ID 等）。 **我无法修改**密钥对象的实际散列函数，因为它已用于在我的代码中进行识别。
Guava Caches 可以吗？并有解决方法？

这是我的配置：

```
CacheBuilder.newBuilder().maximumSize(CACHE_SIZE).recordStats().
    expireAfterWrite(DEFAULT_AGE, TimeUnit.DAYS).build(
    new CacheLoader<Request, Response>() {
        @Override
        public Response load(Request request) { 
            return request.getResponse();
        }
    }); 
```

这是我的哈希函数（在我的代码中的其他地方使用）：

```
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + code;
    result = prime * result + messageID; // <= **this one shouldn't evaluated**
    result = prime * result + Arrays.hashCode(payload);
    result = prime * result + (int) (timestamp ^ timestamp >>> 32); // <= **this one shouldn't evaluated**
    result = prime * result + (type == null ? 0 : type.hashCode());
    result = prime * result + version;
    return result;
} 
```

顺便说一句，这种缓存是使用自己的哈希函数实现（例如，通过自省）还是使用默认的？

****编辑：** **
正如回复中所指出的，实现此结果的最佳方法是包装类。
**我的解决方案**：

```
/**
 * Nested class to store a request as a key in the cache. It is needed to
 * normalize the variable fields of the normal requests.
 */
private static final class CachedRequest extends Request {

    private static CachedRequest fromRequest(Request request) {
        // set only the fields that cannot change between two same requests
        // ...
    }

    @Override
    public int hashCode() {
        HashFunction hashFunction = Hashing.md5();
        HashCode hashCode;
        // ...
        return hashCode.asInt();
    }

    @Override
    public boolean equals(Object obj) {
            // coherent with hashCode()
            // ...
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T15:21:29.557

您可以简单地将您的`Request`对象包装成`CachedRequest`对象，其中`CachedRequest`将实现`hashCode()`并`equals()`基于所需的字段，并提供对包装的`Request`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:24:26.127

我很确定，使用番石榴是不可能的。有一些使用自定义 Equivalence 的合法案例，但他们说它们太少了，无法由`CacheBuilder`and处理`MapMaker`。¹有 even `com.google.common.base.Equivalence`，但仅在内部使用（另请参见[此处](http://code.google.com/p/guava-libraries/issues/detail?id=1000)和[此处](https://stackoverflow.com/questions/9394251/does-guava-have-a-map-implementation-that-takes-custom-hash-equals-functions)）。

您需要从要用于查找的字段中创建自己的密钥，或者将您的密钥包装`Request`在另一个对象定义`equals`和`hashCode`您想要的方式中。

¹`equals`与默认/不同的唯一情况`hashCode`是使用`weakKeys`(`softKeys`不再存在)，然后是`==`/`System.identityHashCode`组合。在任何情况下，您都不能自由选择等价。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:21:44.440

如果您不能修改哈希函数（我仍然不明白为什么），那么您需要使用“包装器”键来缓存，例如：

```
public class RequestKey {
  private final Request _req;

  public int hashCode() {
    // use appropriate Request fields here
  }

  public boolean equals(Object o) {
    return ((this == o) || ((o != null) && (getClass() == o.getClass()) && _req.equals(((RequestKey)o)._req)));
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-02T00:33:16.547

如果您使用的是龙目岛：

有一个 Lombok Annotation`@EqualsAndHashCode`覆盖`hashCode`并`equals`基于对象的非静态、非瞬态属性。因此，对于下面的情况，如果您比较使用相同`name`、`age`和创建的两个员工`salary`，他们将`true`在比较时评估为。

```
@EqualsAndHashCode
public class Employee {

    private String name;
    private int age;
    private int salary;
} 
```

如果您有不想包含的属性，可以用 标记它们`@EqualsAndHashCode.Exclude`。

```
@EqualsAndHashCode
public class Employee {

    private String name;
    @EqualsAndHashCode.Exclude
    private int age;
    @EqualsAndHashCode.Exclude
    private int salary;
} 
```

您还可以专门包含以下字段：

```
@EqualsAndHashCode(onlyExplicitlyIncluded = true)
public class Employee {

    @EqualsAndHashCode.Include
    private String name;
    @EqualsAndHashCode.Include
    private int age;
    private int salary;
} 
```

Lombok 注释文档：[https ://projectlombok.org/features/EqualsAndHashCode](https://projectlombok.org/features/EqualsAndHashCode)

示例来自：[http ://www.javabyexamples.com/delombok-equalsandhashcode](http://www.javabyexamples.com/delombok-equalsandhashcode)

# .net - 如何配置 .Net 4.5 的 JIT 编译器？

> ID：12284301
> 
> 赞同：2
> 
> 时间：2012-09-05T14:58:14.197
> 
> 标签：.net, configuration, jit, .net-4.5

我在使用 .Net 4.5 JIT 编译器时遇到了一些问题。如果我在禁用 JIT 优化的情况下编译我的程序集，它运行良好。如果我不这样做，我会收到访问冲突、分段错误或其他一些奇怪的错误。（来自完全托管的代码）。它也只影响.Net 4.5

所以，因为我们直接与 IL 打交道，所以我们真的需要弄清楚是什么 IL 导致它崩溃（所以我们不生成它）。我怀疑（因为它是多线程代码）新的多核 JITting 可能是罪魁祸首。我想缩小范围并获取有关它的更多信息。

JIT 编译器有哪些配置选项？我可以在不完全禁用 JIT 编译的情况下禁用多核吗？我可以使用其他选项来尝试找出导致此问题的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:19:18.203

这是一个相当大的项目。我认为它纯粹是托管代码，但显然有一些非托管部分。问题最终是我们没有正确地将某些东西标记为编组，导致 .Net 4.5 使用内存，因为它更具侵略性，但在 .Net 4 及更低版本中，它会是保守的，不使用它“只是如果”

# asp.net-mvc-3 - 如何从控制器返回数组以在 MVC3 中查看？

> ID：12284302
> 
> 赞同：0
> 
> 时间：2012-09-05T14:58:25.183
> 
> 标签：asp.net-mvc-3

大家好，我正在尝试从控制器返回一个数组以查看。这是我的控制器：

```
public ActionResult Index()

        {
            TahakkukServicesClient client = new TahakkukServicesClient();
            client.ClientCredentials.UserName.UserName = "service_test";
            client.ClientCredentials.UserName.Password = "..";
            client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;
            MakbuzList[] liste = client.GetMakbuzListe(2);
            return View(liste);
        }

    }
} 
```

那么如何在视图中显示数组的值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:10:00.823

`MakbuzList[]`“是”一个`IEnumerable<MakbuzList>`（注意：现在，通用列表/集合通常比数组更受欢迎）

所以你可以像这样强烈地输入你的视图

```
@model IEnumerable<MakbuzList> 
```

并显示这样的值

```
@if (Model.Any()) {
  foreach (var makbuz in Model) {
     @Html.DisplayFor(x => makbuz.Property1)
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:11:03.910

假设视图已经配置了

```
@model IList<MakbuzList> 
```

然后你可以简单地做

```
@for (var i = 0; i < Model.Count; ++i) {
    @Html.DisplayFor(m => m[i]);
} 
```

# email - drupal_mail 和 drupal_send_email 不起作用？

> ID：12284304
> 
> 赞同：1
> 
> 时间：2012-09-05T14:58:40.547
> 
> 标签：email, drupal-6

我的情况如下：

我使用 ubercart 并安装了 3 个模块用于电子邮件（当客户进行购买时）确认购买。这些模块是：SMTP、MIMEMail 和 HTML MAIL。验证、发送适用于 HTML。但是，当产品过期时，我需要发送另一种类型的电子邮件。而我正在使用我自己的模块。但是，当我使用 drupal_mail 或 drupal_mail_send 的功能时，发送不正确。当我调试该功能时，显然一切都是正确的，但我没有收到任何电子邮件。

我的函数代码是 drupal_mail_send：

```
$message = array(
    'to' => $to,
    'from' => $from,
    'id' => 'cuponalcubo_mailing',
    'subject' => $subject,
    'body' => $body,
    'headers' => array(
        'MIME-Version' => '1.0',
        'Content-Type' => 'text/html; charset=UTF-8; format=flowed; delsp=yes',
        'Content-Transfer-Encoding' => '8Bit',
        'X-Mailer' => 'Pressflow',
    )
);
drupal_mail_send($message); 
```

该函数的代码是drupal_mail：

```
function ....(){
$params = array(
        'subject' => $subject,
        'body' => t($body)
    );
    drupal_mail('email_deal_vp', 'email_deal_vp_html_mail', $to, language_default(), $params, $from);
}

/*
 * Implements HOOK_MAIL
 */
function email_deal_vp_mail($key, &$message, $params) {
    $language = $message['language'];
    switch ($key) {
        case 'email_deal_vp_html_mail':
            $message['subject'] = t($params['subject'], $var, $language->language);
              $body = "<html><body>
                  {$params['body']}
                  </body></html>";
              $message['body'][] = $body;
              $message['headers']['Content-Type'] = 'text/html; charset=UTF-8; format=flowed';
              break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:07:00.663

Maybe this is a problem with your server (SMTP is not configured properly). Check with any existing mail code whether it is working. (If it was working before.)

# sql - 查询每个用户的最新记录包括 id

> ID：12284307
> 
> 赞同：1
> 
> 时间：2012-09-05T14:58:47.957
> 
> 标签：sql, ms-access

我有一个包含以下字段的表

ID、日期、用户

现在我想用每个用户的最新日期返回条目的 ID。

我有一个解决方案，我查询每个用户的最新日期，然后根据日期和用户获取 id。

但我想直接在一个查询中获取 ID，因为我认为让 JOIN 查询根据日期和用户识别 ID 是错误的。它不是打败了 ID 的整个概念吗？如果我有 2 个人在同一秒内编辑同一个用户怎么办？

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:12:58.013

试试这个，它使用子查询来获取每个用户的最新日期。

```
SELECT *
FROM tableNAme a INNER JOIN
    (
    SELECT  user, MAX(date) maxDate
    FROM    tableName
    GROUP BY user
    ) b ON a.user = b.user AND
            a.date = b.maxDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:00:50.207

您在哪里使用这些信息？将@@identity 与MS Access 一起使用是有效的。

```
Dim db As Database
Set db = CurrentDb

db.Execute "INSERT INTO Table2 (test) Values('abc')", dbFailOnError

Dim rs As DAO.Recordset

Set rs = db.OpenRecordset("select @@identity")
Debug.Print rs(0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:01:16.523

您的 ID 是连续的并在增加吗？

如果是这样的话

```
SELECT User, Max(ID), Max(date)
FROM table
GROUP BY user 
```

否则，加入没有错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:32:07.817

部分答案：

> 它不是打败了 ID 的整个概念吗？

ID（PK）是唯一标识一条记录。不能保证只有一条记录与给定的用户和日期匹配（因为同一用户的多个条目可能具有相同的日期）。您可能对用户/日期有唯一约束以避免这种情况，但在这种情况下，您不需要 ID，因为用户和日期足以唯一标识记录。因此，请在此处重新考虑您对 ID 列的需求。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-05T15:02:01.360

所以你想获取每个用户最近一次进入的 ID 和日期？

那将是这样的：

```
SELECT `ID`, `date`, `user`
FROM `table`
ORDER BY `date` DESC
GROUP BY `user` 
```

# java - Java 中的 SAX 解析器和 XML 转换器有什么区别？

> ID：12284308
> 
> 赞同：4
> 
> 时间：2012-09-05T14:58:51.440
> 
> 标签：java, xml, xslt, dom, sax

我可以使用 SAX 解析器或转换器实现 XML 从一种格式到另一种格式的转换吗？如果是这样，那么确切的区别是什么？

编辑:: 我的意思是我使用 SAXTransformerFactory 创建的变压器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:01:20.780

SAX 解析器允许您在 Java 中*解析*XML 文档。它会为每个元素、字符序列等回调您，使用它您可以构建一个表示部分/全部 XML 的对象树，或执行一些其他功能。

存在其他类型的解析器。DOM 解析器将为您提供 XML 文档的基于树的对象表示。每种解析器类型都有优点/缺点（DOM 通常被描述为内存密集型，但提供了 XML 的完整模型，而 SAX 是轻量级的，但您会被解析器本身回调并且无法导航任何模型XML 的）

我有点模糊wrt。您的 XML 转换器，但我假设您的意思是[XSLT](http://en.wikipedia.org/wiki/XSLT)。这是一个样式表转换，在更高级别上运行，将转换（样式表）应用于输入 XML 并给出输出（通常但不限于 XML）

编辑：根据您的评论，请参阅[这篇文章](http://www.petefreitag.com/item/445.cfm)：

> 最后，您可能希望将 xml 文档写入字符串或文件，这可以使用来自转换器工厂的 Transformer 对象来完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:09:58.607

相比：

***何时使用 SAX***： [http](http://docs.oracle.com/javase/tutorial/jaxp/sax/when.html) ://docs.oracle.com/javase/tutorial/jaxp/sax/when.html 和

***何时使用 DOM：*** [http ://docs.oracle.com/javase/tutorial/jaxp/dom/when.html](http://docs.oracle.com/javase/tutorial/jaxp/dom/when.html)

另请参阅：[http ://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPXSLT4.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPXSLT4.html)

我相信 SAX 将用于基于事件的 XML 读/写，而 Transformer 将用于操作已经解析的 XML。

# python - python tkinter：如何使用像素？

> ID：12284311
> 
> 赞同：20
> 
> 时间：2012-09-05T14:58:55.700
> 
> 标签：python, image, tkinter, pixel

使用谷歌（和这个网站）我看到了一些类似的问题，但我的问题仍然在这里：

“我想绘制图像（不读取文件），能够操纵该图像中每个像素的颜色。”

我看到了另一个问题，建议在哪里做这样的事情：

```
from tkinter import *
A=Tk()
B=Canvas(A)
B.place(x=0,y=0,height=256,width=256)
for a in range(256):
    for b in range(256):
        B.create_line(a,b,a+1,b+1,fill=pyList[a][b])#where pyList is a matrix of hexadecimal strings
A.geometry("256x256")
mainloop() 
```

事实上，这回答了我的问题，但是......它非常慢。我应该如何处理 1920x1080 图像？等我死？

所以我要求执行与上述代码相同但以更快的方式执行的操作

我找到了一种改进 jsbueno 建议的方法的方法，在链接的页面中有说明：

[为什么 Photoimage 放慢？](https://stackoverflow.com/questions/10417524/why-is-photoimage-put-slow)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-05T17:54:41.167

这确实很棘手——我认为您必须使用 Canvas 小部件，但它也无法访问 Pixels。不过，嵌入在画布中的图像项目确实有。Tkinter.PhotoImage 类确实有一个“put”方法，它接受十六进制格式的颜色和像素坐标：

```
from tkinter import Tk, Canvas, PhotoImage, mainloop
from math import sin

WIDTH, HEIGHT = 640, 480

window = Tk()
canvas = Canvas(window, width=WIDTH, height=HEIGHT, bg="#000000")
canvas.pack()
img = PhotoImage(width=WIDTH, height=HEIGHT)
canvas.create_image((WIDTH/2, HEIGHT/2), image=img, state="normal")

for x in range(4 * WIDTH):
    y = int(HEIGHT/2 + HEIGHT/4 * sin(x/80.0))
    img.put("#ffffff", (x//4,y))

mainloop() 
```

好消息是，即使以这种方式完成，更新也是“实时”的：您在图像上设置像素，然后看到它们出现在屏幕上。

* * *

这应该比在屏幕上绘制更高级别线的方式快得多 - 但对于大量像素，它仍然会很慢，因为每个像素都需要一个 Python 函数调用。任何其他直接操作像素的纯 Python 方式都会受到影响——唯一的出路是从 Python 代码中调用在本机代码中一次操作多个像素的原语。

Cairo 是一个不错的用于获取 2d 绘图的跨平台库，但文档记录也很差 - 它应该比 Tkinter 的 Canvas 或 PhotoImage 具有更好的图元。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-25T10:01:12.160

不要忘记在 canvas.create_image 之后保存参考。在某些情况下，尤其是在使用 PIL 模块时，python 会垃圾收集图像，即使它正在显示！语法类似于 `canvas.create_image((WIDTH/2, HEIGHT/2), image=img) canvas.image = img`

# configuration - Playframework 2 - 存储您的凭据

> ID：12284312
> 
> 赞同：4
> 
> 时间：2012-09-05T14:58:58.617
> 
> 标签：configuration, playframework-2.0, credentials

您在哪里存储您的凭据，如密钥、邮件密码、数据库密码？

我在[https://security.stackexchange.com/questions/19785/security-concerns-about-my-webapp/19786#19786上发了一个帖子](https://security.stackexchange.com/questions/19785/security-concerns-about-my-webapp/19786#19786)

似乎存储凭据的最佳方式是在外部服务器上。

但是 play2 使用 application.conf 来执行此操作。

*   那么你如何以及在哪里存储你的凭证在 play2 中？

**更新1：**

好的，我正在使用heroku。

我像这样设置我的环境变量：

```
heroku config:add test=ITWORKS 
```

在 application.conf 我添加

```
sometest=${test} 
```

我试图像这样访问它：

```
Logger.info(Play.application().configuration().getString("sometest")); 
```

但我收到以下错误：

```
UnresolvedSubstitution: conf\application.conf: 54: Could not resolve substitution to a value: ${test} 
```

所以我猜 play2 没有找到变量 test 因为它在 heroku 上。但后来我也在我的本地 Windows 环境中添加了它 -> 仍然是同样的错误。

知道有什么问题吗？

**更新2：**

好的，我只需要在添加环境变量后重新启动。

最后一个问题：

每次在我的本地机器上添加系统变量有点烦人。有开发模式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:06:05.520

`application.conf`支持环境变量，例如`db.default.user=${DB_USER}`. 您可以将其作为控制台参数传递（由于它出现在 中，因此不安全`ps`），或者更安全地将其设置为环境变量。

在 Heroku 上，通过设置环境变量`heroku config`，例如`heroku config:add DB_USER=MyDBAdmin`.

在本地，您可以通过 设置它们`export DB_USER=MyDBAdmin`，或将它们添加到您的`~/.bash_profile`（如果您使用 bash）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T22:01:11.527

**广告。3：** In Play`application.conf`无法通过任何`route`或其他方式访问，`path`因此不能视为“放置在 webroot 中”。Terry 的建议在 PHP 中是合适的，但不适合 Play（他警告说，他当然不了解框架）。他提供了一个 PHP 脚本示例，但相信我，访问`http://somdomain.tld/config.php`和 Play之间的差异`conf/application.conf`是巨大的。它们不能直接比较。

存储凭据`application.conf`是目前最安全（也是最快）的方式，我无法想象有一种方法可以在浏览器中反编译文件，即使解析器会死（这是不可能的，因为它不是 PHP）。如果您决定将凭据存储在某个遥远的位置，您将面临新的风险，因为您需要额外检查客户端是否有权获取配置，应用程序启动所需的时间会增加等。

**更新1：**

使用环境变量不是一种安全的方式——正如 Marius 所指出的，它会出现在进程列表中，所以你会向每个管理员显示你的凭据，我很确定你不想用 ie 这样做。你的邮件。

当然，在 Heroku 中，这是一种传递数据库连接 URL**的**方法，但其他凭据应存储在配置文件中。最后请记住，[Procfile 命令长度限制为](https://stackoverflow.com/a/10746180/1066240)255 个字符，因此将所有凭据放入其中会导致您的应用程序有一天无法启动。

这种情况下的解决方法是使用[替代配置文件](http://www.playframework.org/documentation/2.0.3/ProductionConfiguration)，场景非常简单

1.  在您`application.conf`保留生产数据库的 URL 如果它最有可能是 Heroku`db.default.user`并且`db.default.password`应该注释为 common heroku URL 在其中包含凭据。
2.  对于您的本地版本，创建一个文件，即：`conf/local_postgres.conf`在开头包含 application.conf 并将所有必需的配置密钥（如凭据）覆盖/添加到本地 Postgres DB。此外，您还可以设置其他内容、更改日志记录级别、启用`smtp.mock`等。
3.  使用此配置在本地运行您的应用程序。（注意，我遇到了一些问题，`-Dconfig.resource`所以我不得不改用`-Dconfig.file`语法，你必须找到哪种方法在你的系统中运行良好）即。

    ```
    play -Dconfig.resource=local_postgres.conf "~run 9123" 
    ```

    提示：使用非默认端口是“证明”您正在使用本地配置的最简单方法。如果您忘记了您有替代配置并且将使用通用`play ~run`命令启动您的应用程序，那么您所在位置的应用程序`http://localhost:9123`将不可用。

4.  创建一个 bash 脚本`run-local`（或`run-local.bat`Windows 中的文件）并将前一点的命令放在那里。`.gitignore`在文件中忽略它。

从现在开始，您将使用第 4 点中的脚本运行应用程序以进行本地开发。在推送到 Heroku 时，它将使用来自的值部署您的应用程序，`application.conf`因为您没有在 Procfile 中设置替代配置。更重要的是，您可以使用 Heroku 的 SQL 在本地运行您的应用程序以执行演进，而无需将其推送到部署，或检查最新的修复包。当然，您必须始终确保您在本地版本的数据库上进行开发，否则您可能会意外更改/破坏您的生活数据。

**更新 2：**

最后，使用`*.conf`文件比将其存储在单独的类中要好，以防您必须更改不同位置的配置（如前所述，团队处理相同的代码、开发/生产环境等）

当然可以简写为：

```
import play.Configuration;
import play.Play;

// ...
Configuration cfg = Play.application().configuration();

cfg.getString("smtp.password");
cfg.getBoolean("smtp.mock");
cfg.getInt("smtp.port"); 
```

# ios - performSegueWithIdentifier 正在泄漏内存弧

> ID：12284313
> 
> 赞同：4
> 
> 时间：2012-09-05T14:58:58.880
> 
> 标签：ios, xcode, ipad, memory-leaks, automatic-ref-counting

我对 iOS 开发非常陌生。我的应用程序似乎在堆积死记忆。我唯一可以追溯到的是`performSegueWithIdentifier`功能。

```
- (IBAction)segueNext:(id)sender {
       [self performSegueWithIdentifier:@"segueForward" sender:self];
} 
```

以下是我分析的一些截图。

![快照图像](../Images/26a0d0e136f0e6ae67b223c22803ae36.png)

![泄漏图像](../Images/560b91fb29624cb17a7d659823d2e832.png)

我没有正确执行此方法调用吗？或者当我使用 ARC 时如何释放它？感谢您的任何建议！

# asp.net - 将 ASP 包含添加到 HTML

> ID：12284320
> 
> 赞同：2
> 
> 时间：2012-09-05T14:59:44.187
> 
> 标签：asp.net, html, asp-classic, include

有没有办法使用 ASP 或 ASP.NET 在另一个 HTML 文件中使用 HTML 的包含？类似于您可以在 PHP 中使用包含 HTML 和 .htacess 中的 AddType 处理程序的方式？

我正在尝试找到一种更好的方法来更新某些导航，但该站点位于没有安装 PHP 的 Windows 服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:07:23.910

如果您要使用 asp.net，有许多选项可供您使用，我要提到的第一个是 Master Pages。

ASP.NET MVC 使用带有 Razor 视图引擎的布局，因此您可以更多地控制页面，我真的很喜欢 MVC 的做事方式，因为它在功能和演示方面保持简单。

另一种选择是服务器端包含（这是老式的，不是很好）：

```
<!-- #INCLUDE FILE="includeMe.html" --> 
```

如果您想将其保留为 html 页面，您可以在 IIS 中“破解”以使 html 页面与 SSI 一起工作，但这不是一种很好的处理方式。

提供信息的另一种方法是使用 jQuery 包含 html 片段供您的页面使用，如下所示（对不起，我没有测试过）：

```
$("#destination-container").load("sourcepage.htm #content-in-this-page"); 
```

同样，这可能不是最好的做事方式，但您可以使用它来快速获得结果。

我的建议是创建一个主页，无论是主页还是主页的变体，如果您决定走 MVC 路线，然后使用 PartialViews 或类似的东西。

当然，请查看 Alex K 提供的链接：[ASP.NET 等价于服务器端包括](https://stackoverflow.com/questions/894720/asp-net-equivalent-of-server-side-includes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:07:46.890

如果父/包含代码文件具有**.asp**扩展名，那么您可以使用以下代码来包含另一个文件。

```
<!-- #INCLUDE FILE="myfile.htm" --> 
```

# grails - 如何在 Grails 中通过过滤器查询所有用户的 LDAP？

> ID：12284321
> 
> 赞同：1
> 
> 时间：2012-09-05T14:59:49.630
> 
> 标签：grails, spring-security, ldap

我正在开发的 grails 应用程序要求允许用户从列表中选择用户。但是，此列表中的用户可能以前没有登录过。

由于用户选择不完整，我希望通过授予权限查询 LDAP 用户。问题是我在 API 文档的任何一个文档中都找不到参考资料来帮助我弄清楚。

SpringSource Security 中是否有允许我执行搜索的 API 方法？如何搜索用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:08:45.763

您可以使用`gldapo`lib 从`ldap`目录中获取信息：

[http://blog.zmok.net/articles/2009/02/10/configuration-and-usage-of-gldapo-in-a-grails-project](http://blog.zmok.net/articles/2009/02/10/configuration-and-usage-of-gldapo-in-a-grails-project)

[http://gldapo.codehaus.org/](http://gldapo.codehaus.org/)

# git - 如何逆转 git rebase？

> ID：12284322
> 
> 赞同：0
> 
> 时间：2012-09-05T14:59:57.120
> 
> 标签：git, version-control, git-rebase

我知道最简单的方法是调用`git reflog`找出分支的原始负责人，而不是调用`git reset`旧的提交。

但是某些情况下 reflog 不可用，例如在另一台 PC 的存储库上。

有什么方法可以逆转 git rebase 并设置为旧提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:08:09.543

我不确定我是否理解你的问题。如果我理解正确，您对存储库进行了一些修改，编辑了历史，推送，拉到另一个存储库并想从那里撤消历史编辑？那是做不到的，因为那里没有“原始”历史。

正如你所说，`git reflog`这是要走的路，我不知道为什么你不能使用它（除了我刚刚勾勒的场景）。您可以编辑您的帖子以提供更多信息吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:36:08.860

在这种情况下，无法自动“撤消”变基，但您可以手动执行另一个变基。例如，如果您有：

```
A---B---C   <-- master
 \
  D---E---F <-- feature 
```

并重新获得：

```
A---B---C---D'---E'---F' <-- master 
```

要将分支恢复到旧状态，请执行以下操作：

```
git checkout -b feature
git rebase --onto A C feature
git checkout master
git reset --hard C 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:11:58.723

只需使用（参考）ORIG_HEAD，它被设置为在变基的内部重置阶段之前指向分支的尖端。- 见[手册](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)

所以`checkout ORIG_HEAD`，为它创建一个新的分支名称（不要让它成为一个独立的头），你应该在路上（检查它是否都与`gitk`你最喜欢的漂亮的单线图命令连接）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:59:30.990

当你这样做时，`rebase`你正在改写历史。分支将指向不同的提交。旧的提交被丢弃。您可以列出它们`git fsck --lost-found`并尝试恢复。但是，它们可用于垃圾收集，因此如果您之前已经这样做了，它们可能会无法恢复地丢失。

# jquery - 在 ul list jquery 中查找每个 div

> ID：12284323
> 
> 赞同：3
> 
> 时间：2012-09-05T15:00:01.893
> 
> 标签：jquery, html, html-lists

我有一个模态弹出窗口，其中有不同的 div 用于不同的消息，现在我想隐藏每个 div 并只显示我需要显示的那个。而不是写出每个 div id 并将其设置为隐藏我想做一个循环，所以我把我的 div 放在一个 UL 列表中。但我似乎无法弄清楚如何仅隐藏该 UL 列表中的 div ..

```
$("#panels li").each(function (i) {
        $('div').toggle();
    });

<ul id="panels">
        <li><div id="dvError" class="hiddencol">this is div 1</div></li>
        <li><div id="dvconfirm" class="hiddencol">this is div 2</div></li>
</ul> 
```

出于某种原因，当我这样做时它会隐藏它们，但它会隐藏我页面上的每个 div :(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T15:02:14.480

你可以做

```
$("#panels").find('div').toggle(); 
```

或者

```
$("#panels div").toggle(); 
```

或者如果你想保持你的循环

```
$("#panels li").each(function (i) {
    $(this).find('div').toggle();
}); 
```

`$('div').toggle();`<-- 这将切换页面上的每个 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:24:03.823

如果你想隐藏 ul 列表中的所有 div，那么这只是选择器的问题。您不需要编写循环来选择元素。因为在 jQUery 中，当您编写选择器时，所有满足条件的元素都会被迭代和选择。

```
 $('ul#panels div').hide();
    $('ul div').hide();
    $('ul > li div').hide(); 
```

所有这三个选择器完成相同的事情。第一个和第二个选择器几乎相同。他们选择 ul 下的所有 div。我更喜欢第三个选择器，因为它只会选择直接的孩子，即在这种情况下是 li 并且只将 div 隐藏在其中......

还要检查这个小提琴[http://jsfiddle.net/sushanth009/P3xe6/1/](http://jsfiddle.net/sushanth009/P3xe6/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:02:29.937

选择合适的 div 并对其进行操作：

```
$("#panels li div").each(function (i) {
   // Do some other things on them here... with this context for the current div
   $(this).toggle();
}); 
```

编辑：

一样

```
$("#panels li div").toggle(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:03:28.050

尝试这个

```
$("#panels li").each(function (i) {
    $(this).find('div').toggle();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T15:03:34.310

原因很简单

```
$('div').toggle(); 
```

与您的第一个选择无关，它只是查找页面上的每个**div**。尝试

```
$('#panels * div').toggle(); 
```

反而

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T15:52:37.253

尝试这个。现在您可以通过`id`并仅显示所需的`div`

```
$(document).ready(function(){    
    showOnlyMe('dvError');
});

function showOnlyMe(myID){
    $("#panels li div").each(function () {    
        if($(this).attr('id') != myID) {
            $(this).hide();
        }
    });
} 
```

# logging - 重命名 log4j 日志级别

> ID：12284324
> 
> 赞同：2
> 
> 时间：2012-09-05T15:00:06.057
> 
> 标签：logging, log4j

是否可以让 log4j 打印 WARNING 而不是 WARN 而无需编写自定义代码？

**编辑：** 我不想更改成千上万行带有 log.warn(...) 的代码。我希望 log4j 为 log.warn 打印不同的日志级别文本。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:06:50.417

这很容易，按照本教程在 log4j 中创建一个新的日志记录级别（复制和粘贴）：

[http://jaikiran.wordpress.com/2006/07/12/create-your-own-logging-level-in-log4j/](http://jaikiran.wordpress.com/2006/07/12/create-your-own-logging-level-in-log4j/)

我成功地做到了;-)

# javascript - 动态重新加载 JS

> ID：12284326
> 
> 赞同：0
> 
> 时间：2012-09-05T15:00:09.767
> 
> 标签：javascript

我目前正在处理一个显示图表的页面，该图表可以通过单击某些按钮进行修改。为了显示图表，我使用 amCharts 脚本（参见[http://amcharts.com](http://amcharts.com)）。显示图表的代码是使用 ASP 动态生成的。但是，当用户单击其中一个按钮时重新加载图表时出现问题。我尝试清除写入图表的 div 并使用以下命令加载新的 JS 脚本：

```
document.getElementById("flashcontent").innerHTML = ""; 
var head = document.getElementsByTagName("HEAD")[0];
var node = document.createElement('script');
node.type = 'text/javascript';
node.async = true;
node.src = strQueryString;  
head.appendChild(node); 
```

我验证了很多时间`strQueryString`变量是正确的，并且 Firebug 说加载了正确的脚本。但是，div 被清除但我的 JS 没有执行。注意：当页面加载时，我所有的 JS 都是使用类似的代码动态加载的。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:11:11.250

它可能取决于您尝试执行的脚本，即，它可能只是未被调用但只是定义的函数。您可能还想尝试不同的方法，即在加载后发出 AJAX 请求，该请求返回 JavaScript，然后由浏览器执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:40:21.543

我解决了我的问题！这是由于 AmCharts 方面的一个事件，即为感兴趣的人准备的 AmCharts.ready 功能。

# java - MUPDF Android 最新源码 ndk-build Error NDK 8

> ID：12284335
> 
> 赞同：-1
> 
> 时间：2012-09-05T15:00:26.773
> 
> 标签：java, android, android-ndk, mupdf

我是使用 NDK8 的新手，我想为我的 PDF 查看器项目构建 MUPDF 库，我关注了 MuPdf Reader 集成在项目中，还有这个 ReadMe.txt，我遇到了这个错误：。

```
Terminal Ouput

Compile thumb  : mupdfthirdparty <= sfnt.c
Compile thumb  : mupdfthirdparty <= truetype.c
Compile thumb  : mupdfthirdparty <= type1.c
StaticLibrary  : libmupdfthirdparty.a
SharedLibrary  : libmupdf.so
./obj/local/armeabi/libmupdfcore.a(pdf_xref.o): In function `pdf_init_document':
/Users/durgaprasad/guna/mupdf/android/jni/../../pdf/pdf_xref.c:784: undefined     reference  to `pdf_new_js'
 /Users/durgaprasad/guna/mupdf/android/jni/../../pdf/pdf_xref.c:785: undefined reference to `pdf_js_load_document_level'
  ./obj/local/armeabi/libmupdfcore.a(pdf_xref.o): In function `pdf_close_document':
   /Users/durgaprasad/guna/mupdf/android/jni/../../pdf/pdf_xref.c:815: undefined reference to `pdf_drop_js'
 ./obj/local/armeabi/libmupdfcore.a(pdf_xref.o): In function `pdf_new_document':
/Users/durgaprasad/guna/mupdf/android/jni/../../pdf/pdf_xref.c:1298: undefined    reference     to `pdf_write_document'
./obj/local/armeabi/libmupdfcore.a(pdf_annot.o): In function `pdf_load_annots':
/Users/durgaprasad/guna/mupdf/android/jni/../../pdf/pdf_annot.c:371: undefined reference to `pdf_update_appearance'
/Users/durgaprasad/guna/mupdf/android/jni/../../pdf/pdf_annot.c:403: undefined reference to `pdf_field_type'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/libmupdf.so] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:10:00.777

根据您获取源副本的时间，您可能拥有一个不会在 Android 上构建的副本。昨天（9 月 6 日）有人注意到，添加一组新功能破坏了 Android 构建。自然，这很快就解决了。

我建议您从[官方 Git 存储库](http://git.ghostscript.com/?p=mupdf.git;a=tree)中提取一组新的源代码，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:59:19.177

阅读我的步骤

> 11) //删除了一些部分
> 
> 在 Windows（您使用 cygwin 的地方）或 linux/macos 上，这可以像在顶级目录中**运行“make”一样简单。**即使 make 过程失败，它也应该足够远来为您生成所需的“生成”目录，您可以继续执行这些说明。
> 
> 12) 进入 android 目录，将**local.properties 编辑** 到你喜欢的编辑器中。根据需要更改那里的 sdk 路径。这应该是您唯一需要做的本地化工作。
> 
> 13)**进入 android 目录**（注意，是 android 目录，而不是 android/jni 目录！），然后执行（在 Windows 上的 Cygwin 窗口中！）：
> 
> ```
>  ndk-build 
> ```
> 
> 14）然后执行：
> 
> ```
>  ant debug 
> ```

您可能正在运行 ndk-build 确保您位于正确的文件夹 mupdf_source/android

并且您已经执行了必须在 mupdf_source 文件夹中运行的第 11 步，从日志中我认为第 11 步有一些问题。

尝试再次运行它，然后运行 ​​ndk-build

**更新：**

我在 Ubuntu 上使用 r7，我可以按照说明进行编译，

*   确保环境已设置。通过构建具有本机代码的示例应用程序进行交叉检查，示例： http: [//marakana.com/forums/android/examples/49.html](http://marakana.com/forums/android/examples/49.html)
*   确保 android/local.properties.sample 已被编辑并重命名为 android/local.properties

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:31:24.690

看起来您缺少一些源文件或库。`pdf_new_js`定义了`pdf_js_load_document_level`和其他缺失符号的那个。

# iphone - 关于 NSDateFormatter 的困惑

> ID：12284336
> 
> 赞同：1
> 
> 时间：2012-09-05T15:00:43.357
> 
> 标签：iphone, ios, nsdate, nsdateformatter, ios5.1

更新：我能够将日期从服务器 json 转换为 2012/09/05 10:45

```
 NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

NSDateFormatter *df = [[NSDateFormatter alloc] init];
         [df setDateFormat:@"YYYY-MM-dd HH:mm:ss"];

    for (NSString *slotKey in myslots.allKeys) {
        NSDictionary *slot = [myslots valueForKey:slotKey];

        for (myDays in slot){

            if ([[self.myDays objectForKey:@"isReservable"] isEqualToNumber:[NSNumber numberWithInt:1]]){

                NSDate *newDate = [df dateFromString:[self.myDays objectForKey:@"begin"]];
                if (newDate){
                    [self.timesArray addObject:newDate];

                }
                NSLog(@"these are the returned newdates: %@",newDate);
                NSLog(@"This is the timesArray: %@", self.timesArray);
            }

        }        
    } 
```

我的 NSLog 这些仍然返回 null 而我的 This is the timesArray is () 我不明白出了什么问题。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:12:17.413

你确定你的输入是有效的吗？

此外，您的第一个日志仅表示已分配日期格式化程序 - 而不是它会为您的输入产生结果。

进行了快速测试，看来您的问题出在日期的时区部分。以下代码将返回：`date is 2012-10-04 16:15:00 +0000`

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"YYYY-MM-dd HH:mm:ss V"];
NSDate* date = [df dateFromString:@"2012-10-04 09:15:00 PT"];
NSLog(@"date is %@", date); 
```

您可以明确检查日期格式化程序是否可以从您的字符串中获取日期，如下所示：

```
 __autoreleasing NSDate* date2 = nil;
    NSRange dateRange = NSMakeRange(0, [@"2012-10-04 09:15:00 PT" length]);
    __autoreleasing NSError* err = nil;

    BOOL canMakeDate = [df getObjectValue:&date2 forString:@"2012-10-04 09:15:00 PT" range:&dateRange error:&err];
    NSLog(@"could get a date %@, from range %@. Got %@", canMakeDate ? @"YES" : @"NO", NSStringFromRange(dateRange), date2); 
```

由于日期字符串来自服务器端，我建议调查它如何发送时区并最终手动更改它们。不漂亮，但正则表达式是你的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:13:42.373

`dateFromString:``nil`当它无法将字符串转换为日期时返回。您的`V`格式与通用非位置格式的时区匹配，例如太平洋时间的“PT”。您提供的描述时区的内容完全不同，因此对于格式化程序来说是胡言乱语。

我相信这是一种可以`NSTimezone`理解的格式，因此您可以提取字符串，创建一个`NSTimezone`，使用它来获取 UTC 的偏移量，然后根据需要将“America/Los_Angeles”替换为“-0700”或“-0800”，然后使用“Z”格式说明符解析出来。

有关日期格式的更多信息，请参阅[ICU 用户指南部分](http://userguide.icu-project.org/formatparse/datetime)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:26:45.587

需要注意的一件事是`YYYY`在您的日期格式中使用。`YYYY`不一样`yyyy`。

`YYYY`= 年（在基于“一年中的一周”的日历中）。此年份名称用于 ISO 8601 定义的 ISO 年-周日历，但可用于需要处理周日期的非公历日历系统中。可能并不总是与日历年相同。

`yyyy`= 以 2012（公历）格式返回年份。

您还指定您的时区将采用短格式`V`(PT)，请尝试使用长格式`VVVV`美国（洛杉矶）

# java - 通过子查询缩小查询结果

> ID：12284337
> 
> 赞同：6
> 
> 时间：2012-09-05T15:00:48.163
> 
> 标签：java, hibernate, hibernate-criteria

我正在尝试通过另一个查询的结果来缩小 Hibernate Criteria 查询的结果集。我知道如何用 JPQL 解决这个问题：

```
FROM DocPackage p WHERE
  EXISTS (SELECT g
    FROM ObjectGroup g JOIN g.items i, Person per
    WHERE g=p.applicantGroup
      AND i.objectClass = 'org.cp.model.common.Person'
      AND i.objectId=per.id
      AND lower(concat(per.firstName,' ',per.lastName)) like :applicant
  ) 
```

但我无法想象如何使用 Criteria 进行这样的查询。任何想法如何使用标准实施此选择？使用休眠 3.3。

UPD：为了解决这个问题，我做了以下标准查询：

```
Criteria resultCriteriaQuery = this.hibernateSession.createCriteria(DocPackage.class, "pack");
        DetachedCriteria personSubquery = DetachedCriteria.forClass(Person.class, "pers").
            add(Restrictions.like("pers.loFstLstName", "%" + searchObject.getApplicant().toLowerCase() + "%")).
            add(Restrictions.eqProperty("itm.objectId", "pers.id"));
        DetachedCriteria applicantsSubquery = DetachedCriteria.forClass(ObjectGroup.class, "objGrp").
            add(Restrictions.eqProperty("pack.applcantGroup", "objGrp")).
            createAlias("objGrp.items", "itm").
            add(Restrictions.eq("itm.objectClass", "org.cp.model.common.Person")).
            add(Subqueries.exists(personSubquery));
        resultCriteriaQuery.add(Subqueries.exists(applicantsSubquery)); 
```

但它不起作用。我有一个`NullPointerException`。`resultCriteriaQuery.list()`这个查询有什么问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:44:45.250

`Criteria.createCriteria(String)`您可以使用该方法创建子标准。

假设以下场景：

B 类有一个名字：String。

A 类有一个元素：Set。

您现在只想要（除了其他限制）有一个名称为“X”的 B 的 A 对象：

```
Criteria crit = session.createCriteria(A.class);
<add your restrictions for A>

Criteria narrow = crit.createCriteria("elements");
narrow.add(Restrictions.eq("name", "X");

// This will respect the constraints applied to narrow
crit.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:02:04.293

为了更好地分析案例，它会打印从标准自动生成的 HQL 语句，您必须将连接属性放入 hibernate：

```
<property name="hibernate.show_sql" value="true" />
<property name="hibernate.format_sql" value="true" /> 
```

以及要调试的日志。

拥有它后，您可以比较要生成的内容并查看差异。

问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T19:36:02.840

Hibernate Criteria API 不支持非关联联接。这一行有问题：

```
FROM ObjectGroup g JOIN g.items i, Person per 
```

据我所知，您需要在 ObjectGroupItem 和 Person 之间创建一个显式映射。这可以通过 Hibernate @Any 注解来完成。看看[Hibernate Annotations](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)，第 2.4.5.2 段。当关联将被映射时，使用 Criteria#createCriteria() 或 Criteria#createAlias() 将必要的连接添加到子查询。您已经在使用正确的 API 向主查询添加子查询。

# php - Paypal IPN 覆盖字符集

> ID：12284341
> 
> 赞同：25
> 
> 时间：2012-09-05T15:01:04.123
> 
> 标签：php, utf-8, character-encoding, paypal, paypal-ipn

我有这个贝宝 IPN 的问题。我看到了，很多人都有。

我尝试以用户身份付款：Árvíztűrő Tükörfúrógép 在这个名称中，有所有特殊字符，即匈牙利语 ABC 中的字符。

我是一名匈牙利 PHP 开发人员。

好的，我试图在谷歌上搜索很多。首先是检查paypal语言设置：http: [//jlchereau.blogspot.hu/2006/10/paypal-ipn-with-utf8.html](http://jlchereau.blogspot.hu/2006/10/paypal-ipn-with-utf8.html)

每个设置都是 UTF-8。

当贝宝调用我的通知 URL 时，我（以前的开发人员）构建了请求 URL。当我记录这个 url 时，我看到字符集不是 UTF-8，所以我强制脚本使用它。

```
$req = 'cmd=_notify-validate';
foreach ($_POST as $key => $value) {
   if ($key == 'charset') {
      $req .= "&charset=utf-8";
   } else {
      $value = urlencode(stripslashes($value));
      $req .= "&$key=$value";
   } 
```

}

这是有趣的事情。我得到了一个完全畸形的用户名。所以我逐个字符地转储它。

名字将是：字符：193、114、118、237、122、116、26、114、26

吸。我想尽一切办法得到我真正的 utf-8 名称 mb_detect_encoding 是 UTF-8 的。

我尝试使用 iconv、mb_convert_encoding、utf8_encode 和解码。没有成功。尝试不对名称进行urlencode，再次没有成功。

有人可以告诉我，为什么会这样，我怎样才能找回真正的 utf8 名称？

我发送的 URL：cmd=_notify-validate&mc_gross=10.00&protection_eligibility=Eligible&address_status=confirmed&payer_id=JA3YMCJFKSCNJ&tax=0.00&address_street=1+Main+St&payment_date=07%3A41%3A40+Sep+05%2C+2012+PDT&payment_status=Completed ** UTF-8**&address_zip=95131&first_name=%C1rv%EDzt%1Ar%1A&mc_fee=0.59&address_country_code=US&address_name=%C1rv%EDzt%1Ar%1A+T%FCk%F6rf%FAr%F3g%E9p¬ify_version=3.6&custom=lolka_bolka%3Bfalse%3B%3B ％3B％3BHungary％3B％3B％3B％3B％3B％3B＆payer_status =验证的＆商务= vaso_1346830963_biz％40mydomain.hu＆ADDRESS_COUNTRY =美+国＆ADDRESS_CITY =圣+圣何塞和数量= 1＆verify_sign = AVVJjJNeVwHbYcMDVfj2N1DqWwUdAtNQIpb9KIP99gZ2PY-LPoOYzSCc＆PAYER_EMAIL = test_1346830232_per％40mydomain.hu＆txn_id = 4J747779YW528551F＆payment_type =即时与姓氏= T %FCk%F6rf%FAr%F3g%E9p&address_state=CA&receiver_email=vaso_1346830963_biz%40mydomain.hu&payment_fee=0.59&receiver_id=TGEHBCMG336WE&txn_type=web_accept&item_name=510+Silk&mc_currency=USD&item_number=&residence_country=test_ipn=1&handling_amount=0.00&transaction_subject=lolka_bolka%3Bfalse%3B%3B%3B%3BHungary%3B%3B%3B%3B%3B%3B&payment_gross=10.00&shipping=0.00&ipn_track_id=6fe12a7a34b74

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-05-11T13:16:45.037

您应该在 Paypal 更改您的设置。

*   转到您的[Paypal 个人资料](https://www.paypal.com/webapps/customerprofile/summary.view)
*   单击边栏中的**我的销售工具**
*   滚动到底部并单击[PayPal 按钮语言编码](https://www.paypal.com/cgi-bin/customerprofileweb?cmd=_profile-language-encoding)
*   单击**更多选项**并将编码设置为 UTF-8

![结束页面](../Images/adbbb28de1dda274e40af07b5901cbc1.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-19T14:52:40.257

Lenart 的答案很棒而且非常有用，但我想我会添加一些不适合评论的内容。

*   澄清：`charset`在您的网站上，在您的订单中设置（例如：通过隐藏输入）是不够的，您还需要**设置默认编码**- 如 Lenart 的回答中所述。
    *   这是因为该选项仅适用于您自己的数据，而默认设置适用于 PayPal 发送到您的 IPN 处理脚本的数据。
    *   例如：也许您`UTF-8`的订单中有隐藏输入，但 PayPal IPN 仍然在`windows-1252`. 您只能通过更改 PayPal 帐户中的默认设置来解决此问题。
*   出于测试目的，您还需要**为您的 Sandbox 商家帐户设置该编码选项**！（只需使用您的 Sandbox 商家详细信息登录[https://sandbox.paypal.com 。）](https://sandbox.paypal.com)
*   设置默认编码后，如果您再次返回设置检查其值，它将显示默认值而不是您设置的值。这是**一个错误**（并说明了 PayPal 的工作质量），您之前设置的值实际上仍然设置。
    *   因此，如果您想确定字符集到底是什么，请在您的 IPN 处理脚本中通过检查`charset`POST 消息中的值来执行此操作。
*   PayPal 使用的默认字符集无法正常工作。
    *   例如：`Western European Languages (including English)`会导致法语重音字符不起作用。
    *   您最好在任何地方使用 UTF8（将`UTF-8`在 IPN 中显示。）

§

编辑。最后但并非最不重要的：

**如果您想用特殊字符或重音字符测试您的 IPN 处理脚本**，您（理论上）有几个不同的选项，但大多数在实践中都不起作用。

这是一个回顾：

*   使用[IPN 模拟器](https://developer.paypal.com/developer/ipnSimulator/)将不起作用，因为它无法验证请求（它会产生虚假请求，而不是真实请求。）
*   遗憾的是，无法在名字或姓氏中使用特殊字符 [创建 PayPal Sandbox 客户帐户。](https://developer.paypal.com/developer/accounts/create)
    *   用户界面不支持它，并会要求您`Only enter letters`（原文如此）。
    *   批量帐户上传功能没有更好，导致`Something went wrong. One or more sandbox accounts could not be uploaded. Try again.`
*   一个可行的选项：使用 PayPal 沙盒服务器测试您的网站，然后选择**不使用 PayPal 帐户进行支付**。
    *   这样，您就可以为名字和姓氏输入重音/特殊字符。
    *   [（您将从`开发人员/沙盒帐户](https://developer.paypal.com/developer/accounts/) ›*您的客户帐户*› 个人资料 › 资金 - 任何数字都可以获取 CVV 值中获得信用卡号、类型和到期日期。）

几个月前我向 PayPal 报告了这个问题，但没有任何改变。

§

使用 PayPal 工作并不有趣，而且会浪费大量时间。我希望这可以帮助您节省一些时间。如果可以的话，把你的生意带到别处。

# php - 使用 PHP 三元运算符返回特定值

> ID：12284344
> 
> 赞同：-1
> 
> 时间：2012-09-05T15:01:19.447
> 
> 标签：php, operator-keyword, ternary

我用谷歌搜索并浏览了堆栈溢出。我正在尝试缩短我的代码，并且我在下面有这个工作方法，我想用三元样式重写。有人可以告诉我这是否可能，如果可以，我做错了什么。谢谢。

```
public function __get($field){ //refactor this using ternary method
    if($field == 'user_id'){
        return $this->uid;
    } else {
        return $this->fields[$field];
    }
} 
```

我从这个开始：

```
($field == 'user_id') return $this->uid : return $this->fields[$field]; 
```

它给了我一个意外的返回错误。

我尝试使用另一个堆栈溢出解决方案，该解决方案在值之前列出了返回值并且没有工作。

```
return $field == 'user_id' ? $this->uid : $this->fields[$field]; 
```

这给了我一些关于意外公共的其他错误，比如我的方法没有正确关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:17:10.350

我猜是这样的；您将代码重构为：

```
public function __get($field){ //refactor this using ternary method
        return $field == 'user_id' ? $this->uid : $this->fields[$field];
    }
}

public function otherfunction() { /* ... */ } 
```

大括号不匹配，因此它关闭了类定义，下一个解析器错误是`'unexpected public'`:)

# wordpress - wp-admin 页面只输出部分 html

> ID：12284348
> 
> 赞同：0
> 
> 时间：2012-09-05T15:01:26.130
> 
> 标签：wordpress, nginx

我尝试将博客从一台服务器上的 apache 迁移到另一台服务器上的 nginx。

首页和文章都很好（使用永久链接）。wp-login.php 很好。但是 /wp-admin 只输出部分 html，在该部分的某处停止

这是我的 nginx 配置：

```
server {
        listen   80; ## listen for ipv4; this line is default and implied
        listen   [::]:80; ## listen for ipv6

        root /home/someblog/www;
        index index.php index.html index.htm;

        #this isn't really example.com ;)
        server_name example.com;

location = /favicon.ico {
                log_not_found off;
                access_log off;
        }

        location = /robots.txt {
                allow all;
                log_not_found off;
                access_log off;
        }

        location / {
                # This is cool because no php is touched for static content.
                # include the "?$args" part so non-default permalinks doesn't break when using query string
                try_files $uri $uri/ /index.php?$args;
        }

        location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
                expires max;
                log_not_found off;
        }

        # I tried commenting this as well
        rewrite /wp-admin$ $scheme://$host$uri/ permanent;

       # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        location ~ \.php$ {
                try_files $uri =404;
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/tmp/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }
        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        location ~ /\.ht {
                deny all;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:53:13.583

是因为没有安装 php5-curl... apt-get install php5-curl 修复了它；）

# c# - 每 X 秒调用一次 WCF - Windows 服务或计划任务

> ID：12284350
> 
> 赞同：1
> 
> 时间：2012-09-05T15:01:32.480
> 
> 标签：c#, .net, wcf, wcf-data-services

我一直在寻找几个小时来寻找可能的解决方案和关于我的方案的建议。

我有一个 XML 文件，当我们从服务器请求它时会创建它。有几个服务会查看 XML 文件并使用它的数据。

我编写了一个 WCF，它将更新 XML 文件。我想做的是设置一个 Windows 服务以每 10 秒调用一次 WCF。这将强制 XML 文件每 10 秒更新一次。

我正在努力寻找如何创建 Windows 服务并安装它。这也是最好的方法吗？我以前在服务器上使用过计划任务 - 但这仅提供 1 分钟的间隔。我想我可以写脚本睡觉并每 10 秒重新调用一次自己？

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:07:33.057

有很多关于如何创建和安装 Windows 服务的教程。这是我几年前用来学习的：http: [//www.codeproject.com/Articles/106742/Creating-a-simple-Windows-Service](http://www.codeproject.com/Articles/106742/Creating-a-simple-Windows-Service)

最好的办法是试一试，当你遇到某些问题时，会带着具体的问题回到这里。

```
 protected override void OnStart(string[] args)
    {
        // this is where you'd put the logic that does the work (as per the example)
        // create a Timer object to execute your desired functionality 
        // every 10 seconds.
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:07:54.070

您说您有几个查看 XML 文件的服务。这些是什么？Windows 服务，还是前端 WCF 服务？如果您可以控制使用 XML 的服务，那么其中之一可能也可以负责获取和更新它。

[今天早些时候对一篇帖子的回答](https://stackoverflow.com/a/12282179/439024)包含一个很好的示例，说明如何以最小的麻烦创建 Windows 服务。但是，如果您需要安装程序，那么您将进入更复杂的领域。

# android - 如何在不膨胀视图的情况下获得布局属性？

> ID：12284351
> 
> 赞同：0
> 
> 时间：2012-09-05T15:01:32.343
> 
> 标签：android, android-layout

我想获得一些布局尺寸，例如特定项目的边距。是否可以直接从资源中获取？

当然，我可以使用该布局为视图充气，然后获取项目并询问其价值，但这是唯一的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:25:44.390

好吧，是的，但我不建议这样做，您可以找到屏幕的尺寸，然后在您的代码中进行数学运算，自己计算出尺寸：

```
Display display = this.getActivity().getWindowManager().getDefaultDisplay();
        int w = display.getWidth();
        int h = display.getWidth(); 
```

否则，您可以按常规方式进行操作：

```
LinearLayout ll = (findViewById) ...
int whatever = ll.getWhatever(); 
```

您是否有特定的原因避免这种方式？可能有助于找到解决方案

# objective-c - 带有按钮和视图更改的 iOS 奇怪错误

> ID：12284352
> 
> 赞同：0
> 
> 时间：2012-09-05T15:01:33.030
> 
> 标签：objective-c, ios

那是我第一次在这个网站上发帖。

我解释说，我必须在 ios 中处理一个已经很高级的项目。我是 Objective-c 的新手，当你来自 java 时，它是一种非常奇怪的语言。

我有一个奇怪的问题。

在应用程序中有一个登录屏幕，您输入邮件并通过，单击一个按钮，然后您进入主视图。这是完美的工作。

我想做的是自动登录。我为此使用钥匙串，存储它，检索它，填充我的用户并传递。它工作得很好。如果我的用户单击登录按钮，它也可以正常工作。

但是如果我自己用代码调用函数，它不会改变视图。我不明白为什么。

我把代码放在这里，我认为更改被调用。

```
if ([result isEqualToString:@"1"]) {

        NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
        [userDefaults setObject:Email.text forKey:@"email"];

        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Welcom back to FriendsCam!" message:@"Start sharing your video" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

        [alert show];
        //Email.text     = nil;
        //Password.text  = nil;

        UIStoryboard *MainStoryboard_iPhone=[UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil]; 
        self.view.window.rootViewController=[MainStoryboard_iPhone instantiateInitialViewController]; 
```

因此，此代码位于一个函数中，如果所有字段都正确填写，则按下按钮登录时调用的函数将调用该函数。它在用户手动单击按钮时起作用，但当我自己在代码中调用按钮的功能时不起作用，但在两种情况下都会显示良好登录的警报“欢迎回来”。只有故事板中的跳跃被打破了。

有人可以解释为什么吗？会很亲切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:08:07.153

Ok i find the solution.

I was firing my method to quickly, something related with loading time of the view i think.

I delay my call with a nstimer and all work perfectly.

# batch-file - 基于目录中文件数的填充

> ID：12284353
> 
> 赞同：1
> 
> 时间：2012-09-05T15:01:33.200
> 
> 标签：batch-file

```
@echo off
setlocal EnableDelayedExpansion
set i=0
for %%X in (*.jpg;*.png) do (
    set ext=%%~xX
    set /a i+=1
    set num=0000!i!
    set name=!num:~-3!
    copy "%%X" "!name!!ext!"
) 
```

这是我整理的一个批处理文件，用于重命名一些已填充为 3 位数字（001、002、...）的图像。如果文件夹中有超过 999 个文件，则只需进入并更改填充是微不足道的，但让脚本计算所需的填充可能会更有效。

我正在尝试执行以下操作

1 - 获取当前目录中的文件数
2 - 将其设置为填充并照常进行

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:10:56.697

你需要两个循环，在第一个循环中你只得到你的文件数和计数器的字符串长度。

然后将其设置为变量 ex。

```
set padLength=%stringLenOfCounter% 
```

然后你只需要将你的第二个循环更改为

```
for %%X in (*.jpg;*.png) do (
    ...
    set name=!num:~-%padLength%!
    ...
) 
```

# android - 在 onSaveInstanceState 期间创建的 SavedInstantState 未在 onCreate 中恢复

> ID：12284361
> 
> 赞同：1
> 
> 时间：2012-09-05T15:01:54.857
> 
> 标签：android, android-activity

我的应用程序是一个活动（现在是 FragmentActivity 的一个子类，尽管我认为这并不重要），我们称之为活动 A。

在其中，一个按钮导航到（比如说）Activity B，方法是使用 startActivity() 通过 Intent 启动它，没有特殊标志。

这两个活动在清单中都没有任何特殊标志（SingleTop）等，而不是调用完成（）等。即没有什么不寻常的。

Activity A 的方法 onSaveInstanceState() 被调用，我保存了一些状态信息。

在活动 BI 中，按 BACK 键并返回活动 A。

调用了 onCreate() 方法，但是“savedInstanceState”的 Bundle 为空，因此我无法重建之前保存的状态。

任何想法我做错了什么，以及如何确保我恢复状态。

顺便说一句：在配置更改（比如旋转）时，一切正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:55:56.173

`onCreate()`当您通过按返回键返回活动 A 时被调用似乎很奇怪。一般来说，它应该只显示现有活动而不尝试重新创建它。我也认为`onSaveInstanceState()`当你开始其他活动时被调用也很奇怪。事实上，文档说明它在启动 Activity B 时可能*不会*调用：`onSaveInstanceState()`

> 一个例子：当 onPause() 被调用而不是 onSaveInstanceState(Bundle) 是当活动 B 在活动 A 之前启动时：如果活动 A 在 B 的生命周期内没有被杀死，系统可能会避免在活动 A 上调用 onSaveInstanceState(Bundle)因为 A 的用户界面状态将保持不变。

从[这里](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)。

我认为还有其他事情正在发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:17:54.880

Activity A 从未被销毁，因此不应调用 onCreate()。你能放一些代码吗？

# ssis - 保持表达后优先约束不起作用

> ID：12284365
> 
> 赞同：0
> 
> 时间：2012-09-05T15:02:04.840
> 
> 标签：ssis, operator-precedence

我使用了两个连接到 foreach 循环任务的任务，它们都在执行，然后在保持约束和表达式不起作用之后执行 foreach 循环。

以下是示例场景：

![在此处输入图像描述](../Images/e59771575ec9a5836505ced9075d0441.png)

现在我创建了一个变量：

```
istrue value: false 
```

在其中一个优先约束中，我保持@istrue == false 和其他@istrue == true。

对于两个在场约束，我选择了*Contraints & Expression*

但现在它没有执行..下面是我现在看到的：

![在此处输入图像描述](../Images/e610d4fe53486b8a06ea48903df83bd1.png)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:05:22.503

如果您希望执行 foreach 循环硬币容器，如果其优先硬币约束之一将成功设置`Logical OR. One constaint must evaluate to True`在`Multiple constraint`其中之一的部分中。 ![在此处输入图像描述](../Images/234abe15ac24601bf534b5ecc273c3c2.png)

# django - django localsettings.py 给我从一个本地主机移动到另一个错误

> ID：12284369
> 
> 赞同：0
> 
> 时间：2012-09-05T15:02:17.923
> 
> 标签：django

我让我的网站在 django 本地环境中运行，它运行良好....但由于某些原因，我使用了来自另一个本地主机系统的 localsettings.py 文件运行同一网站...它开始给我 505 错误...当我追溯了......以下事情开始出现......

```
 Traceback (most recent call last):
      File "/usr/lib/python2.7/wsgiref/handlers.py", line 85, in run
        self.result = application(self.environ, self.start_response)
      File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/handlers.py", line 67, in __call__
        return self.application(environ, start_response)
      File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 219, in __call__
        self.load_middleware()
      File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 51, in load_middleware
        raise exceptions.ImproperlyConfigured('Middleware module "%s" does not define a "%s" class' % (mw_module, mw_classname))
    ImproperlyConfigured: Middleware module "django.middleware.csrf" does not define a "CsrfResponseMiddleware" class
    [05/Sep/2012 15:33:35] "GET / HTTP/1.1" 500 59 
```

任何帮助都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:11:28.263

`CsrfResponseMiddleware`在 Django 1.4 中被删除。您可能在一个环境中运行 Django 1.2-1.3，而在另一个环境中运行 Django 1.4-master。

# java - 在特定标记处显示弹出窗口

> ID：12284371
> 
> 赞同：2
> 
> 时间：2012-09-05T15:02:22.907
> 
> 标签：java, swing, jtextarea

显示弹出窗口，

如果特定标记不正确，我想显示显示所有可能值的弹出窗口。键入空格键时触发此事件。它工作正常。一个错误是，无论光标在哪里，弹出窗口都会弹出，我只想在正确的标记应该出现的位置显示弹出窗口。

```
 String str = Australia Canberra Dollar  
  String tokens = str.split("\\s+");

  private void editorTextAreaKeyTyped(java.awt.event.KeyEvent evt) {
     if ((evt.getKeyChar() == KeyEvent.VK_SPACE)) {
        if(!tokens[0].equals("Australia")){
          showPopup(editor, menu);
      }
     }
   }

 public void showPopUpMenu(JTextArea jTextArea, List menuItems) {

    JPopupMenu popup = new JPopupMenu();
    Point point = getPoint(jTextArea);
    Caret caret = getCaret(jTextArea);
    JMenuItem menuItem;

    ActionListener al = new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {                
            jTextArea.insert(e.getActionCommand(), jTextArea.getCaret().getDot());
        }
    };

    for (Object mi : menuItems) {
        menuItem = new JMenuItem(mi.toString());
        menuItem.addActionListener(al);
        popup.add(menuItem);
    }
    popup.show(jTextArea, point.x, point.y);
} 
```

# iphone - 没有立即调用 ClLocationManager 委托？

> ID：12284379
> 
> 赞同：0
> 
> 时间：2012-09-05T15:02:34.433
> 
> 标签：iphone, objective-c, ios

我正在尝试使用 cllocationmanager 获取我当前的位置。

**问题：**

委托方法

```
-(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

总是在 viewdidappear 之后运行。我在viewDidLoad 中startupdatingLocation。并在 viewdidLoad 的末尾调用方法 SetMapView 。

```
-(void)setMapView{

MKCoordinateRegion zoomIn = plotsMapView.region;
zoomIn.span.latitudeDelta  = 0.2;
zoomIn.span.longitudeDelta  = 0.2;

zoomIn.center.latitude =  self.currentLocation.coordinate.latitude;//[[[m_CityMarkerArray objectAtIndex:0] valueForKey:@"lat"] doubleValue];
zoomIn.center.longitude = self.currentLocation.coordinate.longitude;//[[[m_CityMarkerArray objectAtIndex:0] valueForKey:@"lng"] doubleValue];

NSLog(@"%f LAT",self.currentLocation.coordinate.latitude);

[plotsMapView setRegion:zoomIn animated:YES];

} 
```

LAT 返回 0.0000。

但是，如果我在 viewDidAppear 中调用相同的方法，它就可以正常工作。我在 viewdidload 中需要它，因为每次我回来查看时。如果我在 viewDidAppear 中调用该方法，我会将地图重新​​加载到基本位置。

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:13:51.630

**在didUpdateToLocation**方法中调用**setMapView**方法，前提是您将位置管理器委托设置为**self**并在 .h 文件中添加**CLLocationManagerDelegate 。**在您的 didUpdateToLocation 中，在调用 setMapView 方法之前，将 newLocation 坐标分配给您的 currentLocation 坐标。

# ruby-on-rails-3 - Rails 3.2 + minitest + sqlite3 :memory: = 失败

> ID：12284381
> 
> 赞同：0
> 
> 时间：2012-09-05T15:02:43.960
> 
> 标签：ruby-on-rails-3, sqlite, minitest

我无法在 Rails 3.2、sqlite3 和 minitest 中使用 :memory: 数据库。我在 database.yml 中有以下内容：

```
test:
  adapter: sqlite3
  database: ":memory:" 
```

并在执行时收到以下错误`rake minitest`

```
/home/hoffmanc/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/sqlite_adapter.rb:465:in  `table_structure': Could not find table 'apks' (ActiveRecord::StatementInvalid) 
```

（我的一个模型名为 Apk）

我错过了一步吗？

# android - iOS 和 Android 都支持 Boost C++ 线程吗？

> ID：12284382
> 
> 赞同：2
> 
> 时间：2012-09-05T15:02:49.187
> 
> 标签：android, ios, multithreading, boost

我正在尝试为移动应用程序编写一些多线程代码。我正在考虑适用于 iOS 和 Android 的 Boost C++ 线程库。但是有人知道两个平台是否都支持 Boost 线程吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:07:18.453

是的，我目前正在维护`boost::thread`在 iOS 和 Android 上运行的代码。

也就是说，除非您尝试在两个平台上运行相同的代码库，否则我建议您在 iOS 上使用[Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)而不是`boost::thread`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T15:06:37.757

我认为这些帖子可能会对您有所帮助：

[提升 C++ 和 Android 3](https://stackoverflow.com/questions/7711029/boost-c-and-android-3)

[iPhone 上的 C++ Boost](https://stackoverflow.com/questions/7361751/c-boost-on-iphone)

感觉安卓和IOS都可以

# search - Lucene 将 3.6.0 降级到 3.5.0

> ID：12284384
> 
> 赞同：0
> 
> 时间：2012-09-05T15:02:51.217
> 
> 标签：search, lucene, faceted-search, downgrade

我们在项目中使用 Lucene 版本 3.6.0。现在我们决定开始使用 Bobo Browse 进行分面搜索。但是当前版本的 Bobo Browse (3.1.0) 不支持 Lucene 3.6.0，因此我们决定降级回 3.5.0 版本。我正在阅读更改日志，但找不到任何提及索引结构更改的内容。有谁知道是否需要重建索引？这是我们想要避免的。非常感谢您的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:31:52.993

如果有人遇到同样的问题，我们设法在不重建索引的情况下将 Lucene 从 3.6.0 降级到 3.5.0。我只是更换了库，一切正常。

# mysql - 如果我想用 query.setParameter 在 jpa 中设置两个参数该怎么办？

> ID：12284386
> 
> 赞同：0
> 
> 时间：2012-09-05T15:02:54.997
> 
> 标签：mysql, jpa

更具体地说，我有 3 个实体（医生、患者、处方）。prescripts 实体有两个外键，分别代表医生和患者。所以我想做的是通过 patid 和 docid 找到处方。问题是我可以使用 query.setParameter 设置两个参数，那么我该怎么办？

```
public List<Prescripts> findByDocid(Doctors fbd) {

TypedQuery<Prescripts> query = em.createNamedQuery("Prescripts.findByDocid",
Prescripts.class);
List<Prescripts> prescripts = query.setParameter
("docid",fbd).getResultList();
return prescripts;
} 
```

如果您想要更多代码，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:06:54.043

```
List<Prescripts> prescripts = 
    query.setParameter("docid",fbd)
         .setParameter("patid", patId)
         .getResultList(); 
```

或者，如果您更喜欢避免链接调用：

```
query.setParameter("docid",fbd);
query.setParameter("patid", patId);
List<Prescripts> prescripts = query.getResultList(); 
```

# php - 用于在窗口加载时检查数据库的 URL 查询字符串

> ID：12284402
> 
> 赞同：0
> 
> 时间：2012-09-05T15:04:08.283
> 
> 标签：php, mysql, database

我正在为几个月后的聚会创建一个移动宾客名单。我发出的所有邀请都会有一个自定义二维码，嵌入他们的名字和姓氏。当他们参加聚会时，他们和我一起登记，我扫描他们的二维码并将它们放入数据库中。

我有核心元素工作，其中带有嵌入式查询字符串的自定义二维码预填充了一组用于名字和姓氏的文本输入，您填写一些其他信息，单击提交和 BANG，您重新在数据库中。

我想添加一些额外的功能来检查某人已经签入的数据库，以防止派对崩溃。

我需要编写什么代码来允许 onWindowLoad 对数据库检查名字和姓氏查询字符串以查看包含这些的条目是否已经存在？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:23:55.840

带有选择的 Ajax 调用。让自己轻松一点，使用 jQuery。这里有些例子：

[使用 jQuery 的 Ajax 示例](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

# android - 是否可以将 onclick 侦听器添加到 android 中的远程视图

> ID：12284409
> 
> 赞同：6
> 
> 时间：2012-09-05T15:04:36.037
> 
> 标签：android, notifications, buttonclick, remoteview

我创建了一个通知方法，如下所示：

```
NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    Notification notification;

        notification = new Notification(R.drawable.messageicon, "You have a new message",
                System.currentTimeMillis());
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        RemoteViews view = new RemoteViews(getPackageName(), R.layout.notification);
        view.setImageViewResource(R.id.image, R.drawable.ic_launcher);
        view.setTextViewText(R.id.title, "New Message");
        view.setTextViewText(R.id.text, message);
        notification.contentView = view;
        Intent intent = new Intent();
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
        PendingIntent activity = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        notification.contentIntent = activity;
        notificationManager.notify(0, notification); 
```

我想在状态栏上添加一个按钮，单击该按钮应显示一个弹出窗口。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T12:21:33.187

不能直接做，但是可以使用 RemoteViews.setOnClickPendingIntent(int viewId, PendingIntent pendingIntent)。

如果要在所有按钮的 onClick 事件上调用相同的 Activity，请确保添加具有不同字符串的 Intent.setAction(String action)，以便系统不会将所有意图合并到所有按钮中。

然后将您的活动主题为对话框，您将有一个弹出窗口。

# javascript - 如何使用 Socket.io 和 Node.js 开发大型聊天应用程序

> ID：12284411
> 
> 赞同：11
> 
> 时间：2012-09-05T15:04:41.143
> 
> 标签：javascript, node.js, websocket, chat, socket.io

在过去的几个月里，我一直在使用 Socket.io，开发了一个相当复杂的聊天应用程序，其中包含聊天室、踢/禁止/版主/朋友/等。

在开发过程中，我多次重写了该应用程序，但我仍在与我的代码作斗争。

我真的很喜欢 JavaScript，但我发现随着应用程序的增长，很难维护它。我已经阅读了大量关于如何编写聊天应用程序的“教程”，但它们都只涵盖了最基本的方面。GitHub 上的所有示例应用程序也是如此，甚至是我在网络上找到的大多数聊天应用程序（其中大多数只是简单的 IM，没有任何用户管理）。

有些用例对我来说似乎太荒谬了，例如将用户踢出房间。

*   主持人单击踢按钮 -> 向服务器发出事件
*   服务器将用户名与套接字配对（或仅向所有用户广播并在客户端过滤）-> 向他发出 kicked 事件
*   用户向服务器发出注销事件，并显示他被踢的消息（注销只是我的惩罚实现）
*   用户从聊天室的用户列表中删除 -> 将当前用户列表发送给房间中的所有用户

这似乎并不太复杂，但是当我添加客户端发生的所有回调来管理 UI 时（因为我使用 AngularJS，我使用事件在控制器之间进行通信），以及服务器端的大量回调，由于一切都是非阻塞的，我发现这真的很难测试。

客户端还有另一个问题，我必须在多个地方监听套接字事件，所以我必须有一种单例全局套接字对象，并在多个地方挂钩事件监听器。

**我做错了什么，还是这个回调地狱是使用 websockets 的结果而无法解决？**

有什么方法可以让开发这样的应用程序更容易吗？例如 Socket.io 的替代技术？到目前为止，我只找到了 5 个月前最后一次提交的[NowJS](https://github.com/Flotype/now)和[流星](http://meteor.com/)，这真的很酷，但是从网站上看，它似乎并不稳定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T17:47:19.187

只需使用我的朋友的承诺。`jQuery`内置了它们，但是在 nodejs 端，您可以使用[q](https://github.com/kriskowal/q)库。不要在没有它们的情况下编写异步代码！他们需要一点时间来适应，但是一旦你有了这种心态，编写异步代码就变得轻而易举了。

还有像[async](http://github.com/caolan/async)这样的库，可以为您提供有关回调代码的实用功能。但不要让人气欺骗了你。承诺是甜蜜的。

对于异步代码测试，您不需要比[nodeunit 走得更远](https://github.com/caolan/nodeunit)，它为您提供了一个简单的`done()`函数，您可以在测试完成时调用它，因此它可以运行任意长时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T00:24:33.427

哇，让我们将其分解为实际问题，因为我没有看到很多定义：

**将用户踢出房间：**

*   版主点击删除按钮（发射应包含房间ID和用户ID）
*   服务器代码将用户从 Room 对象中移除，并向房间中的每个用户发出 userID 已被踢出的消息。如果您之前有用户的 socket join(roomID)，那么服务器代码将如下所示：

    ```
    sio.sockets.to(roomID).emit('kicked', { userID: uid }); 
    ```

就这样。在客户端代码中，您应该收到此“被踢”事件并具有如下代码：

```
if (data.removedUserID == myUserID)
    alert('You have been kicked by moderator');
else
    removeUserFromList(userID); 
```

您不应该让客户端发出他要离开的消息，因为恶意用户可以编写一个忽略禁止的客户端。

**我必须在多个地方监听套接字事件**

为什么？“多个地方”究竟是什么意思？

**有什么方法可以让开发这样的应用程序更容易吗？**

*   不要只潜入代码。想想人们如何直接交流。客户端是发送消息的人，服务器是邮局。稍后在代码中翻译逻辑。
*   确保服务器是唯一的控制者，客户端只给出命令并显示状态而不做任何逻辑。

我开发了一个 4000 位置的多人游戏，其中聊天只是其中的一小部分。我每天有大约 60.000 名用户在玩它。一切都是简单的 socket.io 代码，带有一些 Express/EJS 来启动屏幕，我无法想象它会变得更简单。尤其是不要使用一些“魔法”库来隐藏我的所有通信，并肯定会引入它自己的一组等待被发现和修复的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:59:02.820

披露：我是[scoop](https://github.com/Luminger/node-scoop)的开发者。

我或多或少有同样的问题，它归结为通常的回调金字塔，可以用许多库来解决（有几十个，[看看](https://github.com/joyent/node/wiki/Modules#wiki-async-flow).

[在我发现一个主要缺点之前，我对step](https://github.com/creationix/step)非常满意：你不能嵌套它们（一个调用更多 step 的 step 调用）。这对我来说非常重要，我不太喜欢所有其他异步库，因为它们提供了太多我无论如何都不会使用的功能，所以我写了[scoop](https://github.com/Luminger/node-scoop)。

这是一个简单的库，它试图像所有其他异步库一样提供帮助，并以一些个人风格为模型。查看示例，它可能适合您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T10:21:56.137

你也可以看看[derby.js](http://derbyjs.com/)。[它是一个与meteor](http://meteor.com/)非常相似的框架，但建立在所有node.js“好东西”上，如npm、socket.io、express 等。Derby 包含一个强大的数据同步引擎，称为Racer，它可以自动在浏览器、服务器和一个数据库。他们甚至有一个[基本的聊天示例](http://chat.derbyjs.com/lobby)。

Meteor 使用了很多自己的技术（光纤、自己的包管理器）。就像流星德比还处于 alpha 阶段，但在最后一次获得了很多吸引力。Airbnb 最近宣布，他们将[考虑将 derby](http://hevets.com/post/32274463124/airbnb-tech-talk-recap)用于未来的实施。

更多信息：

*   [http://techcrunch.com/2012/07/27/move-over-meteor-derby-is-the-other-high-speed-node-js-framework-in-town/](http://techcrunch.com/2012/07/27/move-over-meteor-derby-is-the-other-high-speed-node-js-framework-in-town/)
*   [http://blog.derbyjs.com/2012/04/14/our-take-on-derby-vs-meteor/](http://blog.derbyjs.com/2012/04/14/our-take-on-derby-vs-meteor/)
*   [https://stackoverflow.com/questions/10374113/meteor-vs-derbyjs](https://stackoverflow.com/questions/10374113/meteor-vs-derbyjs)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T22:32:50.097

你的问题很难回答，但我可以向你保证，我能感受到你的痛苦......即使没有 node.js，回调也会很快变得棘手，而且异步测试真的很难做到。我想我应该说：很难做好，但这听起来像是我知道如何轻松做到，而我不知道。背景问题是异步开发很难，就像过去的并发编程一样。

我认为不同的 websocket 库不会帮助您，甚至完全避免使用 websocket。可能对您有所帮助的是使用一些技巧。上面的 Andy Ray 暗示了承诺；我没有广泛使用它们，但值得一试。

自我诊断是你的朋友。JavaScript 是一种动态语言，没有值得称道的类型系统，并且会屏蔽空对象；只有大量的自动测试才能保证质量。但正如你所说，测试可能真的很难。

另一个技巧：疯狂地检测您的应用程序。发送检测事件并在测试中检查它们。我们围绕无头浏览器 (PhantomJS) 构建了一个很酷的测试套件，我们在其中使用 JavaScript 检查客户端是否发送了正确的事件；它可能很难调试，但它可以工作。

当然，通常的设计技巧会有所帮助：KISS、YAGNI 等等，但我不会用它们侮辱你的智慧。祝你好运。

# java - 读取输入流并使用 if 语句比较输出

> ID：12284413
> 
> 赞同：0
> 
> 时间：2012-09-05T15:04:43.330
> 
> 标签：java

我想读取一个数据流，每次它读取某个单词或短语时，我都希望计数增加。我在下面的示例无法计算它。我也尝试寻找“回声百分比”。bat 文件所做的只是回显百分比。

```
try { 
    String ls_str;
    String percent = "percent";
    Process ls_proc = Runtime.getRuntime().exec("c:\\temp\\percenttest.bat"); 
    // get its output (your input) stream    
    DataInputStream ls_in = new DataInputStream(ls_proc.getInputStream()); 
    while ((ls_str = ls_in.readLine()) != null ) { 
        System.out.println(ls_str);
        progressBar.setValue(progress);
        taskOutput.append(String.format(ls_str+"\n", progress));
        if (ls_str == percent)  {
            progress++;   
        } 
    }
} catch (IOException e1) { 
    System.out.println(e1.toString());                 
    e1.printStackTrace();
}

setProgress(Math.min(progress, 100)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:15:38.897

`DataInputStream.readLine`已弃用。使用[`BufferedReader`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)和它的[`readLine`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)方法或[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)和[`nextLine`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)代替。此外，用于`.equals`比较两个字符串，而不是`==`.

比较`==`只做一个参考比较，问一个问题，“这两个字符串在内存中的同一个地方吗？” 通常，答案是“不”。另一方面，`equals`问问题：“这两个字符串中的字符是否相同？” 这称为深度比较，`==`运算符不执行深度比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:10:30.977

不要将字符串与 进行比较`==`，请使用该`equals`方法。

如果您将字符串与 进行比较`==`，您正在检查它们是否相同`String`。

如果将它们与 进行比较`equals`，您正在检查它们的内容是否相同。

代替：

`if (ls_str == percent)`

做这个：

`if (ls_str.equals(percent))`

如果你想忽略大小写，你可以这样做：

`if (ls_str.equalsIgnoreCase(percent))`

* * *

**编辑**

你的字符串格式也搞砸了。

改变：

`taskOutput.append(String.format( ls_str+"\n", progress));`

到：

`taskOutput.append(String.format( ls_str+"\n"), progress);`

注意括号的变化。

* * *

看看这些以获得更多解释：

[Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

[http://www.java-samples.com/showtutorial.php?tutorialid=221](http://www.java-samples.com/showtutorial.php?tutorialid=221)

# java - Icefaces 和 Tomcat 崩溃

> ID：12284422
> 
> 赞同：1
> 
> 时间：2012-09-05T15:05:07.003
> 
> 标签：java, tomcat, icefaces-1.8

我有一个使用 ICEfaces 制作并在 Tomcat 6 上运行的应用程序。当我尝试访问我选择用户的页面之一时，如果出现此错误。奇怪的是，在我收到错误消息后，我刷新了页面，它通常会转到我需要它去的地方。

有谁知道错误的实际含义，因为突出显示的代码行是关闭数据库连接、注释行（奇怪的大声笑）和其他一些不能有错误的语法内容。

```
exception

java.lang.RuntimeException: wrapped Exception: java.lang.NullPointerException
    com.icesoft.faces.webapp.http.servlet.MainServlet.service(MainServlet.java:156)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    com.icesoft.faces.webapp.xmlhttp.BlockingServlet.service(BlockingServlet.java:56)

    root cause

java.lang.NullPointerException
    crm.CRM_SA_enter.reload_Fees(CRM_SA_enter.java:3591)
    crm.CRM_SA_enter.gradeEval(CRM_SA_enter.java:3844)
    crm.CRM_SA_enter.apply_dropDown(CRM_SA_enter.java:3265)
    crm.CRM_SA_enter.load_function2(CRM_SA_enter.java:2314)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.apache.el.parser.AstValue.invoke(AstValue.java:191)
    org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
    com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    javax.faces.component.UICommand.broadcast(UICommand.java:380)
    com.icesoft.faces.component.panelseries.UISeries$RowEvent.broadcast(UISeries.java:617)
    com.icesoft.faces.component.panelseries.UISeries.broadcast(UISeries.java:285)
    com.icesoft.faces.component.panelseries.UISeries$RowEvent.broadcast(UISeries.java:617)
    com.icesoft.faces.component.panelseries.UISeries.broadcast(UISeries.java:285)
    com.icesoft.faces.component.paneltabset.PanelTabSet.broadcast(PanelTabSet.java:320)
    javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:475)
    javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:756)
    com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
    com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    com.icesoft.faces.webapp.http.core.JsfLifecycleExecutor.apply(JsfLifecycleExecutor.java:18)
    com.icesoft.faces.webapp.http.core.ReceiveSendUpdates.renderCycle(ReceiveSendUpdates.java:132)
    com.icesoft.faces.webapp.http.core.ReceiveSendUpdates.service(ReceiveSendUpdates.java:74)
    com.icesoft.faces.webapp.http.core.RequestVerifier.service(RequestVerifier.java:31)
    com.icesoft.faces.webapp.http.common.standard.PathDispatcherServer.service(PathDispatcherServer.java:24)
com.icesoft.faces.webapp.http.servlet.BasicAdaptingServlet.service(BasicAdaptingServlet.java:16)
    com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:23)
    com.icesoft.faces.webapp.http.servlet.SessionDispatcher.service(SessionDispatcher.java:53)
    com.icesoft.faces.webapp.http.servlet.SessionVerifier.service(SessionVerifier.java:26)
    com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:23)
    com.icesoft.faces.webapp.http.servlet.MainServlet.service(MainServlet.java:131)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    com.icesoft.faces.webapp.xmlhttp.BlockingServlet.service(BlockingServlet.java:56) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:38:17.117

```
crm.CRM_SA_enter.reload_Fees(CRM_SA_enter.java:3591) 
```

有NPE。看起来根本不像 IceFaces 代码，可能是您正在构建的代码。

# symfony - Symfony 2 bug 生成错误的缓存文件

> ID：12284423
> 
> 赞同：1
> 
> 时间：2012-09-05T15:05:06.680
> 
> 标签：symfony

我在安装 Symfony 2.0.16 时遇到了严重问题。为简单服务生成的缓存文件是错误的。

一种服务`replacer.factory`，一种工厂。我将只展示一个简化版本：

```
/**
 * @DI\Service("replacer.factory")
 */
class ReplacerFactory
{

    /**
     * @DI\InjectParams({"container" = @DI\Inject("service_container")})
     */
    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    public function getReplacer($object)
    {
        $replacer = new NewsletterReplacer($this->container);

        // Return the instance of NewsletterReplacer class
        return $replacer->setInstance($object);
    }

} 
```

这是返回的实例，再次简化了一点：

```
class NewsletterReplacer
{

    private $container;

    private $instance;

    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    public function setInstance(Newsletter $newsletter)
    {
        $this->instance = $newsletter;
    }
} 
```

由于某种原因，**生成的缓存文件是完全错误**的。

事实上，这是`appDevProjectContainer.php`文件的一部分，在命令之后`php app/console cache:clear --env=dev --no-debug`：

```
protected function getReplacer_FactoryService()
{
    return $this->services['replacer.factory']
        = new \Acme\HelloBundle\Service\Replacer\NewsletterReplacer();
} 
```

它应该是：

```
protected function getReplacer_FactoryService()
{
    return $this->services['replacer.factory']
        = new \Acme\HelloBundle\Service\Replacer\ReplacerFactory($this);
} 
```

那么，出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:33:08.683

这是一个带有注释的 PHP 错误以及 JMSDiExtraBundle，请参阅[此问题](https://github.com/schmittjoh/JMSDiExtraBundle/issues/55)。解决了更新 PHP 5.3.3-7 的问题。

# php - 无法将 JSON.parse 与来自 json_encode 的结果一起使用

> ID：12284424
> 
> 赞同：0
> 
> 时间：2012-09-05T15:05:08.987
> 
> 标签：php, javascript, json

在我的 php 文件中，我有以下代码

```
//create SQL to select schedule
 $sql = "SELECT * FROM `Schedule`";

 //create result set
 $result = mysql_query($sql);

 $result_array[] = "";
 while($row = mysql_fetch_assoc($result))
 {
    $result_array[$row['ID']] = $row;
 }

 echo json_encode($result_array); 
```

在我的 HTML 文件中，我有以下代码

```
xmlhttp.onreadystatechange=function()
  {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
   {
    var schedArray = JSON.parse(xmlhttp.ResponseText);

    alert(schedArray[0]["ID"]);
   }
  }
  xmlhttp.open("GET","getSchedule.php?q="+year,true);
  xmlhttp.send(); 
```

当我运行我的 HTML 代码时，出现此错误： Uncaught SyntaxError: Unexpected token u

我相信我的数据编码正确，因为运行

```
document.getElementById("txtHint").innerHTML=xmlhttp.responseText; 
```

在我准备好的状态下，检查为我提供了一个包含正确数据的数组：

```
{"0":"","1":{"ID":"1","Team":"Louisiana-Monroe","playDate":"2011-09-03","Conference":"Sun Belt","Rank":null,"Bowl":"0","Site":"H"},"3":{"ID":"3","Team":"Oklahoma","playDate":"2011-09-17","Conference":"Big 10","Rank":"1","Bowl":"0","Site":"H"},"4":{"ID":"4","Team":"Clemson","playDate":"2011-09-24","Conference":"ACC","Rank":"21","Bowl":"0","Site":"A"},"5":{"ID":"5","Team":"Wake Forest","playDate":"2011-10-08","Conference":"ACC","Rank":null,"Bowl":"0","Site":"A"},"6":{"ID":"6","Team":"Duke","playDate":"2011-10-15","Conference":"ACC","Rank":null,"Bowl":"0","Site":"A"},"7":{"ID":"7","Team":"Maryland","playDate":"2011-10-22","Conference":"ACC","Rank":null,"Bowl":"0","Site":"H"},"8":{"ID":"8","Team":"North Carolina State","playDate":"2011-10-29","Conference":"ACC","Rank":null,"Bowl":"0","Site":"H"},"9":{"ID":"9","Team":"Boston College","playDate":"2011-11-03","Conference":"ACC","Rank":null,"Bowl":"0","Site":"A"},"10":{"ID":"10","Team":"Miami (FL)","playDate":"2011-11-12","Conference":"ACC","Rank":null,"Bowl":"0","Site":"H"},"11":{"ID":"11","Team":"Virginia","playDate":"2011-11-19","Conference":"ACC","Rank":null,"Bowl":"0","Site":"H"},"12":{"ID":"12","Team":"Florida","playDate":"2011-11-26","Conference":"SEC","Rank":null,"Bowl":"0","Site":"A"},"13":{"ID":"13","Team":"Notre Dame","playDate":"2011-12-29","Conference":"IND","Rank":null,"Bowl":"1","Site":"N"},"14":{"ID":"14","Team":"Murray State","playDate":"2012-09-01","Conference":"Ohio Valley","Rank":null,"Bowl":"0","Site":"H"},"15":{"ID":"15","Team":"Savannah State","playDate":"2012-09-08","Conference":"MEAC","Rank":null,"Bowl":"0","Site":"H"}} 
```

我无法弄清楚为什么我会收到此错误。我没有使用 JQuery，并且在我的 JavaScript 中包含了 json2.js。有人可以提供的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:24:16.383

你的问题是，我认为，在这里：

```
var schedArray = JSON.parse(xmlhttp.ResponseText); 
```

它应该是`responseText`小写的“r”。发生的事情是字符串`"undefined"`是解析器实际试图解释的，并且以“u”开头的字符串不能是有效的 JSON。

您在填充调试元素以显示响应的代码中做对了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:15:47.983

构造结果的代码是错误的。它应该是：

```
$result_array = array();
while($row = mysql_fetch_assoc($result))
{
   $result_array[$row['id']] = $row;
} 
```

# java - 如何同时生成 UniqueID？

> ID：12284430
> 
> 赞同：0
> 
> 时间：2012-09-05T15:05:25.723
> 
> 标签：java

嗨，我有一个要求，我需要生成类似 SessionID 的东西，但这也是同时发生的。我正在考虑从tomcat 7源“SessionIdGenerator”中获取代码。但我不确定它是否会在没有任何修改的情况下同时生成 uniqueID。

类本身在这里：

公共类 SessionIdGenerator {

```
private Logger logger = LoggerFactory.getLogger();

/**
 * Queue of random number generator objects to be used when creating session
 * identifiers. If the queue is empty when a random number generator is
 * required, a new random number generator object is created. This is
 * designed this way since random number generators use a sync to make them
 * thread-safe and the sync makes using a a single object slow(er).
 */
private Queue<SecureRandom> randoms = new ConcurrentLinkedQueue<SecureRandom>();

/**
 * The Java class name of the secure random number generator class to be
 * used when generating session identifiers. The random number generator
 * class must be self-seeding and have a zero-argument constructor. If not
 * specified, an instance of {@link SecureRandom} will be generated.
 */
private String secureRandomClass = null;

/**
 * The name of the algorithm to use to create instances of
 * {@link SecureRandom} which are used to generate session IDs. If no
 * algorithm is specified, SHA1PRNG is used. To use the platform default
 * (which may be SHA1PRNG), specify the empty string. If an invalid
 * algorithm and/or provider is specified the {@link SecureRandom} instances
 * will be created using the defaults. If that fails, the {@link
 * SecureRandom} instances will be created using platform defaults.
 */
private String secureRandomAlgorithm = "SHA1PRNG";

/**
 * The name of the provider to use to create instances of
 * {@link SecureRandom} which are used to generate session IDs. If
 * no algorithm is specified the of SHA1PRNG default is used. If an invalid
 * algorithm and/or provider is specified the {@link SecureRandom} instances
 * will be created using the defaults. If that fails, the {@link
 * SecureRandom} instances will be created using platform defaults.
 */
private String secureRandomProvider = null;

/** Node identifier when in a cluster. Defaults to the empty string. */
private String jvmRoute = "";

/** Number of bytes in a session ID. Defaults to 16\. */
private int sessionIdLength = 16;

/**
 * Specify a non-default @{link {@link SecureRandom} implementation to use.
 * 
 * @param secureRandomClass The fully-qualified class name
 */
public void setSecureRandomClass(String secureRandomClass) {
    this.secureRandomClass = secureRandomClass;
}

/**
 * Specify a non-default algorithm to use to generate random numbers.
 * 
 * @param secureRandomAlgorithm The name of the algorithm
 */
public void setSecureRandomAlgorithm(String secureRandomAlgorithm) {
    this.secureRandomAlgorithm = secureRandomAlgorithm;
}

/**
 * Specify a non-default provider to use to generate random numbers.
 * 
 * @param secureRandomProvider  The name of the provider
 */
public void setSecureRandomProvider(String secureRandomProvider) {
    this.secureRandomProvider = secureRandomProvider;
}

/**
 * Specify the node identifier associated with this node which will be
 * included in the generated session ID.
 * 
 * @param jvmRoute  The node identifier
 */
public void setJvmRoute(String jvmRoute) {
    this.jvmRoute = jvmRoute;
}

/**
 * Specify the number of bytes for a session ID
 * 
 * @param sessionIdLength   Number of bytes
 */
public void setSessionIdLength(int sessionIdLength) {
    this.sessionIdLength = sessionIdLength;
}

/**
 * Generate and return a new session identifier.
 */
public String generateSessionId() {

    byte random[] = new byte[16];

    // Render the result as a String of hexadecimal digits
    StringBuilder buffer = new StringBuilder();

    int resultLenBytes = 0;

    while (resultLenBytes < sessionIdLength) {
        getRandomBytes(random);
        for (int j = 0;
        j < random.length && resultLenBytes < sessionIdLength;
        j++) {
            byte b1 = (byte) ((random[j] & 0xf0) >> 4);
            byte b2 = (byte) (random[j] & 0x0f);
            if (b1 < 10)
                buffer.append((char) ('0' + b1));
            else
                buffer.append((char) ('A' + (b1 - 10)));
            if (b2 < 10)
                buffer.append((char) ('0' + b2));
            else
                buffer.append((char) ('A' + (b2 - 10)));
            resultLenBytes++;
        }
    }

    if (jvmRoute != null && jvmRoute.length() > 0) {
        buffer.append('.').append(jvmRoute);
    }

    return buffer.toString();
}

private void getRandomBytes(byte bytes[]) {

    SecureRandom random = randoms.poll();
    if (random == null) {
        random = createSecureRandom();
    }
    random.nextBytes(bytes);
    randoms.add(random);
}

/**
 * Create a new random number generator instance we should use for
 * generating session identifiers.
 */
private SecureRandom createSecureRandom() {

    SecureRandom result = null;

    long t1 = System.currentTimeMillis();
    if (secureRandomClass != null) {
        try {
            // Construct and seed a new random number generator
            Class<?> clazz = Class.forName(secureRandomClass);
            result = (SecureRandom) clazz.newInstance();
        } catch (Exception e) {
            logger.debug("exception:"+e);
        }
    }

    if (result == null) {
        // No secureRandomClass or creation failed. Use SecureRandom.
        try {
            if (secureRandomProvider != null &&
                    secureRandomProvider.length() > 0) {
                result = SecureRandom.getInstance(secureRandomAlgorithm,
                        secureRandomProvider);
            } else if (secureRandomAlgorithm != null &&
                    secureRandomAlgorithm.length() > 0) {
                result = SecureRandom.getInstance(secureRandomAlgorithm);
            }
        } catch (NoSuchAlgorithmException e) {
            logger.debug("exception:"+e);
        } catch (NoSuchProviderException e) {
            logger.debug("exception:"+e);
        }
    }

    if (result == null) {
        // Invalid provider / algorithm
        try {
            result = SecureRandom.getInstance("SHA1PRNG");
        } catch (NoSuchAlgorithmException e) {
            logger.debug("exception:"+e);
        }
    }

    if (result == null) {

        // Nothing works - use platform default
        result = new SecureRandom();
    }

    // Force seeding to take place
    result.nextInt();

    long t2=System.currentTimeMillis();
    if( (t2-t1) > 100 )
      logger.debug("sessionIdGenerator algorithm:"+result.getAlgorithm()+"time taken:" +Long.valueOf(t2-t1));
    return result;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:08:42.833

我会`java.util.UUID.randomUUID()`改用。非常简单并保证唯一性。

# webview - Win8上透明Webview的库/解决方法？

> ID：12284431
> 
> 赞同：4
> 
> 时间：2012-09-05T15:05:28.750
> 
> 标签：webview, windows-8

我正在寻找一种在具有透明背景的 Win8（又名 Metro 风格应用程序）上创建 Webview 的方法。如果我在 HTML 中将背景设置为透明，则 Webview 的背景总是以白色呈现

在 Microsoft 论坛中，我读到此功能不可用的帖子：http: [//social.msdn.microsoft.com/Forums/nl-BE/winappswithcsharp/thread/c47c0f2e-b2c7-4691-8a20-929174504877](http://social.msdn.microsoft.com/Forums/nl-BE/winappswithcsharp/thread/c47c0f2e-b2c7-4691-8a20-929174504877)

是否有库或解决方法可以使 Webview 透明？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-27T14:38:42.550

只需在 XAML 中设置 WebView **DefaultBackgroundColor="Transparent"的属性：**

```
<WebView DefaultBackgroundColor="Transparent"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T12:27:03.280

有一个解决方法，它使用 WebViewBrush 将 webview 绘制成一个矩形。

首先把你的 webview 和一个矩形放在一起：

```
<Grid>
     <WebView x:Name="WebView6" />
     <Rectangle Opacity="0.5" x:Name="Rect1"/>
</Grid> 
```

在您的 webview 准备好并加载后（您可以使用 WebView 的 LoadComplete 事件），您可以运行以下代码：

```
WebViewBrush b = new WebViewBrush();
        b.SourceName = "WebView6";
        b.Redraw();
        Rect1.Fill = b;
        WebView6.Visibility = Windows.UI.Xaml.Visibility.Collapsed; 
```

它将 webview 绘制到矩形，然后折叠 webview。

现在剩下的应该是显示您的 webview 的透明矩形。

不幸的是，您不能以这种方式与 webview 交互！

编辑：我自己使用这个解决方法，它可以在 msdn 文档中找到：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.webviewbrush](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.webviewbrush)

# jquery - 如何获取两个活动 Twitter 引导选项卡的名称？

> ID：12284433
> 
> 赞同：1
> 
> 时间：2012-09-05T15:05:29.217
> 
> 标签：jquery, twitter-bootstrap

我有一组 twitter 引导选项卡，它们呈现如下：

```
<div class="span12">
    <div class="tab-pane" id="models">
        <ul id="model-tabs" class="nav nav-tabs">
            <li><a href="#model_1" data-toggle="tab">Model 1</a></li>
            <li class="active"><a href="#model_2" data-toggle="tab">Model 2</a></li>
        </ul>
        <div id="modelTabContent" class="tab-content">
            <div class="tab-pane" id="model_1"></div>
            <div class="tab-pane" id="model_2">
                <div class="span12">
                    <div class="tab-pane" id="firmware">
                        <ul id="firmware-tabs" class="nav nav-tabs">
                           <li class="active"><a href="#fw_1'" data-toggle="tab">FW 1</a></li>
                           <li><a href="#fw_2'" data-toggle="tab">FW 2</a></li>
                        </ul>
                    </div>
                </div>
            </div>  
        </div>
    </div>
</div> 
```

我如何获得活动标签的名称？在这种情况下，模型 2 => FW 1

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:37:28.253

要获取活动选项卡，您可以搜索活动 li 元素：

```
 $('li.active') 
```

这将返回一个 li 元素列表。这是一个获取活动选项卡并记录名称的示例：

```
$('li.active').each(function(index) {
   console.log($(this).find('a').html());       
}); 
```

这将导致：

> ```
> Model 2
> FW 1 
> ```

# java - Spring WebFlow2 JavaScript 没有提交页面？

> ID：12284435
> 
> 赞同：0
> 
> 时间：2012-09-05T15:05:34.950
> 
> 标签：java, spring, spring-mvc, spring-webflow, spring-js

Spring WebFlow2 JavaScript 没有提交页面？

如果用户单击其中一个单选按钮，我正在尝试使用 WebFlow2 附带的 Spring JavaScript 提交带有转换值的页面。我插入了我的javascript，但点击时页面没有提交？

JSP：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<html>
<head>
<title>Spring 3.0 MVC - Web Flow Example</title>

<script type="text/javascript"
    src="<c:url value="/resources/dojo/dojo.js" />">

</script>
<script type="text/javascript"
    src="<c:url value="/resources/spring/Spring.js" />">

</script>
<script type="text/javascript"
    src="<c:url value="/resources/spring/Spring-Dojo.js" />">

</script>

<link type="text/css" rel="stylesheet"
    href="<c:url value="/resources/dijit/themes/tundra/tundra.css" />" />
</head>
<body>
    <h2>Customer Registration</h2>

    <form:form commandName="customer" id="customer">
        <input type="hidden" name="_flowExecutionKey"
            value="${flowExecutionKey}" />
        <table>
            <tr>
                <td><font color=red><form:errors path="name" /></font><b>Name:
                </b></td>
                <td><form:input path="name" id="name" /> <script
                        type="text/javascript">
                    Spring
                            .addDecoration(new Spring.ElementDecoration(
                                    {
                                        elementId : "name",
                                        widgetType : "dijit.form.ValidationTextBox",
                                        widgetAttrs : {
                                            promptMessage : "This is the name you would like entered into the system."
                                        }
                                    }));
                </script> <br />
                    <p></td>
            </tr>
            <tr>
                <td><font color=red><form:errors path="phoneNumber" /></font>

                    <b>Phone number: </b></td>
                <td><form:input path="phoneNumber" id="phoneNumber" /><br />
                    <script type="text/javascript">
                        Spring
                                .addDecoration(new Spring.ElementDecoration(
                                        {
                                            elementId : "phoneNumber",
                                            widgetType : "dijit.form.ValidationTextBox",
                                            widgetAttrs : {
                                                promptMessage : "This is the phone number for the above name"
                                            }
                                        }));
                    </script></td>
            </tr>
            <tr>
                <td></td>
            </tr>
            <tr>
                <td><b>Row:</b></td>
                <td><form:radiobutton value="B" path="row" id="row" />Row: B<BR>
                    <form:radiobutton value="A" path="row" id="row" />Row: A<BR>
                    <script type="text/javascript">
                        Spring.addDecoration(new Spring.AjaxEventDecoration({
                            elementId : "row",
                            formId : "customer",
                            event : "onChange",
                            params : {
                                _eventId : "loadSchools",
                                fragments : "body"
                            }
                        }));
                    </script></td>
            </tr>
        </table>
        <input type="submit" name="_eventId_proceed" value="proceed"
            id="proceed" />
        <script type="text/javascript">
            Spring.addDecoration(new Spring.ValidateAllDecoration({
                elementId : 'proceed',
                event : 'onclick'
            }));
        </script>
        <input type="submit" name="_eventId_cancel" value="Cancel" />
    </form:form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:25:38.920

尝试为每一行设置一个不同的 id，如下所示：

```
 <td><form:radiobutton value="B" path="row" id="rowB" />Row: B<BR>
        <form:radiobutton value="A" path="row" id="rowA" />Row: A<BR>
        <script type="text/javascript">
              Spring.addDecoration(new Spring.AjaxEventDecoration({
                    elementId : "rowA",
                    formId : "customer",
                    event : "onChange",
                    params : {
                        _eventId : "loadSchools",
                        fragments : "body"
                        }
               }));
               Spring.addDecoration(new Spring.AjaxEventDecoration({
                    elementId : "rowB",
                    formId : "customer",
                    event : "onChange",
                    params : {
                        _eventId : "loadSchools",
                        fragments : "body"
                        }
               }));
        </script></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:01:12.227

这是我正在工作的代码的一部分（表单被提交），它使用选择而不是单选按钮，但想法相同。当您选择一个值时，它会自动提交表单并更新值：

```
<form:form commandName="dateRange">
...
    <select name="fyForDR" id="fyForDR" class='discretFont' style='margin-left:10px;margin-right:10px;'>
            <option value="" selected='selected'>Fiscal Year</option>
            <option value="2011" <c:if test="${fyForDR == '2011'}">selected="selected"</c:if> >FY11</option>
            <option value="2010" <c:if test="${fyForDR == '2010'}">selected="selected"</c:if> >FY10</option>
            <option value="2009" <c:if test="${fyForDR == '2009'}">selected="selected"</c:if> >FY09</option>
            <option value="2008" <c:if test="${fyForDR == '2008'}">selected="selected"</c:if> >FY08</option>
            <option value="2007" <c:if test="${fyForDR == '2007'}">selected="selected"</c:if> >FY07</option>
            <option value="2006" <c:if test="${fyForDR == '2006'}">selected="selected"</c:if> >FY06</option>
        </select>
        <script type="text/javascript">
            Spring.addDecoration(new Spring.AjaxEventDecoration({
                elementId: "fyForDR",
                event: "onchange",
                formId:"dateRange",
                params: {fragments:"body", _eventId: "setFy"}
            }));
        </script>
...
</form:form> 
```

这是流程定义的一部分：

```
<view-state id="dateRangeForm" model="dateRange">
...
    <transition on="setFy" validate="false" >
                <set name="viewScope.fyForDR" value="requestParameters.fyForDR"/>
                <evaluate expression="dateRange.setStartDate(dateRangeService.getFyStartDate(viewScope.fyForDR))"></evaluate>
                <evaluate expression="dateRange.setEndDate(dateRangeService.getFyEndDate(viewScope.fyForDR))"></evaluate>
    </transition>
...
</view-state> 
```

# javascript - 在window.onbeforeunload中完成按钮单击之前，光标不会停止？

> ID：12284437
> 
> 赞同：0
> 
> 时间：2012-09-05T15:05:44.023
> 
> 标签：javascript, jquery, asp.net

我有以下用于 window.onbeforeunload 的 javascript 代码。按下浏览器后退按钮时，我正在调用按钮单击方法后面的代码。

现在的问题是光标在`$("#buttonclientid").click()`完成之前不会停止。只需调用该方法并转到下一条语句。如何按住或停止光标直到`$("#buttonclientid").click()`完成然后移动到下一步？

```
var form_has_been_modified = 0;
  $(function () {

      $("input").keyup(function () {
          form_has_been_modified = 1;
      })
      window.onbeforeunload = function (e) {
          if (!form_has_been_modified) {
                  return;
          }
                doYouWantTo();
      }

   });

   function doYouWantTo(){
        doIt=confirm('Do you want to save the data before leave the page?');
        if (doIt) {
             var returnbutton;
             //cursor should stop here until click function completes.
             returnbutton = $("#buttonclientid").click();
        }
        else{

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:13:14.587

我相信您的问题在于您的`doYouWantTo`函数没有返回要传递回的值，`onbeforeunload`因此它在运行函数的同时离开页面，而不是等到它完成。

你最好的行动是这样的：

```
return doYouWantTo()
....
if(doIt) {
    $('#buttonclientid').click(function() { // unsure if you can attach callback to click but idea is same
        return true;
    });
} else {
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:15:30.730

将事件处理程序绑定到`onbeforeunload`事件时，它应该返回以下两种情况之一：

*   如果您想显示确认，您的处理程序应返回一个字符串
*   如果您不想显示确认（跳过处理程序），请返回`undefined`（或根本不返回，效果相同）

话虽如此，您的代码应如下所示：

```
var form_has_been_modified = false;
$("input").keyup(function () {
    form_has_been_modified = true; // use a boolean :P
});

window.onbeforeunload = function (e) {
    if (form_has_been_modified) {
        return 'Do you want to save the data before leave the page?';
    } else {
        return undefined; // this can be omitted if you prefer
    }
}; 
```

告诉用户在系统对话框上单击了什么的唯一方法是使用`setTimeout`. 有关该主题的详细信息，请参阅[此问题](https://stackoverflow.com/questions/4650692/way-to-know-if-user-clicked-cancel-on-a-javascript-onbeforeunload-dialog)。

# jsf - 文件出现在 jsf 应用程序的 xhtml 中的路径

> ID：12284438
> 
> 赞同：0
> 
> 时间：2012-09-05T15:05:46.513
> 
> 标签：jsf, xhtml, path

运行时找不到 canvas 标签中的 common.pde：

xhtml:

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>test</title>
    </h:head>
    <h:body>
        <h:outputScript library="js" name="processing-1.4.1.js" />
        <canvas data-processing-sources="common.pde"></canvas>

    </h:body>
</html> 
```

=> common.pde 位于我的 JSF 2.0 应用程序的“Web pages”文件夹中。指定其路径的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:09:41.830

HTML 源代码（由 JSF 生成）中的任何相对路径（即不以`http://`or开头的路径）都相对于当前请求 URI（如您在浏览器的地址栏中看到的那样）。`/`

因此，如果当前请求 URI 是：

```
http://example.com/contextname/somefolder/page.xhtml 
```

那么`common.pde`您所拥有的参考文献期望它位于：

```
http://example.com/contextname/somefolder/common.pde 
```

`/`将您带到域根目录的领先地位，如`/common.pde`预期的那样：

```
http://example.com/common.pde 
```

将一个文件夹向上移动`../`会`../common.pde`期望它位于：

```
http://example.com/contextname/common.pde 
```

位于子文件夹中，如`canvas/common.pde`预期它位于：

```
http://example.com/contextname/somefolder/canvas/common.pde 
```

我认为现在有意义吗？我猜您的具体问题是由于您的 JSF 页面位于子文件夹中，或者您已将其映射到`FacesServlet`前缀模式`/faces/*`而不是后缀模式（如`*.xhtml`.

# c# - 在执行任何其他代码之前需要完全等待报告加载

> ID：12284442
> 
> 赞同：1
> 
> 时间：2012-09-05T15:06:15.177
> 
> 标签：c#, asp.net, .net, reporting-services, webforms

我有这份关于 Reporting Services 的报告，我只需要打开一次，然后执行一些不会让它再次打开的数据库更新。发生的情况是，下面的代码在报告完全加载之前执行。有没有办法等到它被加载然后才执行其他代码？

```
 ReportViewer1.ServerReport.Refresh();
        modalPopupPrint.Show();

        foreach (GridViewRow row in grdSucess.Rows)
        {
            //Do some LINQ updates in the database here.
        } 
```

# joomla2.5 - Joomla - 检查我们是否在管理区域

> ID：12284450
> 
> 赞同：17
> 
> 时间：2012-09-05T15:06:57.700
> 
> 标签：joomla2.5

我正在为我的 joomla 网站创建一个新模板，并且我已经用 jQuery 替换了 joomla 的原生 Mootools，并且我正在将所有 moo 代码转换为 jQuery 代码。

不知何故，joomla 库中的代码是为管理和前端区域编写的，如果我用 jquery 代码替换它们，管理部分将无法正常工作。我想知道是否有办法确定我们是否在网站的管理部分，所以我可以根据这种情况使用 javascript 代码。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-06T15:12:02.877

它似乎适用于 Joomla 1.5、Joomla 2.x 和 3.x

```
$app = JFactory::getApplication();
if ($app->isSite())  echo 'Client is site';
if ($app->isAdmin()) echo 'Client is administrator'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-15T08:18:01.337

对于 Joomla 4.0 应该是

```
$app = Joomla\CMS\Factory::getApplication();
if ($app->getName() == 'administrator')   //since   3.2
    echo 'Client is administrator'; 
```

# mongodb - 在 MongoDB 中添加新的辅助节点以分配负载

> ID：12284451
> 
> 赞同：0
> 
> 时间：2012-09-05T15:06:58.560
> 
> 标签：mongodb, load, sharding, mongodb-java

我在三台机器上有两个分片（使用 mongodb 1.8.2）：

```
nodeI   including:   shard1(primary) and shard2(primary)
nodeII  including:   shard1(secondary) and shard2(secondary)
nodeIII including:   shard1(arbiter) and shard2 (arbiter) 
```

NodeII 负载变得非常高（CPU 和 IO），NodeI 也很高，但比 nodeII 好一点。

在我的 java 客户端中，我指定代码只查询 NodeII，而 NodeI 仅用于编写。

我计划将 nodeIII 从仲裁器转换为辅助节点，以分担 NodeII 上的读取负载。

你认为这是一个好主意吗？如果我这样做，我应该考虑什么，或者你有其他降低负载的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:21:08.150

从辅助节点读取数据并不一定会像您预期的那样“分配”负载。如果没有找到性能问题的根源，您可能只是在准备迎接更多挑战。

特别是，向现有服务器添加辅助服务器将：

*   增加添加辅助服务器的 I/O 负载（您现在正在复制和写入数据的完整额外副本）
*   为从辅助服务器同步的服务器读取提供更多争用
*   在繁重的读取活动期间，可能会导致辅助服务器落后于主服务器（如果您期望强一致性，这可能会引起关注）。

您还应该考虑在失败的情况下会发生什么。如果您的服务器在当前负载下苦苦挣扎，那么如果您的任何一个物理服务器出现问题并且所有流量最终都到达单个服务器，那么事情可能会急剧崩溃。

理想情况下，您应该运行[mongostat](http://docs.mongodb.org/manual/reference/mongostat/)或类似的[监控工具](http://www.mongodb.org/display/DOCS/Monitoring+and+Diagnostics)，以更好地了解服务器的性能特征以及可能导致负载的因素（内存压力、锁定百分比、I/O、网络......）。如果您可以将 mongostat 输出的样本发布到[PasteBin](http://pastebin.com/)或类似文件中，那将会很有帮助。

[您还应该使用explain()](http://www.mongodb.org/display/DOCS/Explain)查看常见查询以了解索引使用情况，并检查它们是否需要访问所有分片或被定向到特定分片。

如果所有 3 台服务器的硬件规格相同，作为短期改进，我会考虑：

*   移除仲裁器并用辅助节点替换它们。如果您的一台服务器出现故障，这将提供额外的数据冗余，并有助于防止所有负载落在一台服务器上。

*   将 NodeI 上的主节点降级，使 NodeI 和 NodeII 各有一个主节点和一个从节点（而不是 NodeI 上的两个主节点和 NodeII 上的两个从节点）。主备服务器具有不同的写入特性，因此可以更好地平衡负载。

*   检查您的分片键和常见查询以确认它们将合理地平衡读取和写入。潜在问题包括“热点”，即所有对集合的写入都命中单个分片.. 或查询命中所有分片以获得结果。

*   如果您*不*从辅助节点读取数据，则测试性能变化。这似乎违反直觉，但根据查询的性质，从辅助节点读取实际上可能会导致其他问题。

最后，您提到使用 1.8.2。MongoDB 2.0 和 2.2 中有显着的性能和锁定/屈服改进，以及其他错误修复。在您的开发环境中测试升级是值得的，因为这可能会解决您的一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:26:24.130

只要仲裁器硬件与您的辅助设备具有相似的规格，您建议的方法似乎是合理的，因为它将分发辅助读取。通常仲裁器的硬件规格非常低或使用共享硬件，但我假设您的配置不是这种情况。

如果副本集中有奇数个服务器，则不再需要仲裁器。

您可能想[查看 Read Preference here](http://docs.mongodb.org/manual/applications/replication/#read-preference)，特别是您可能对指定标签集以选择辅助节点感兴趣。

# java - EL中的解释。EL 是如何工作的？

> ID：12284452
> 
> 赞同：0
> 
> 时间：2012-09-05T15:06:58.030
> 
> 标签：java, el

为什么这行得通？

```
 <td><c:forEach items="${profileForm.cityOptions}" var="city">
                ....Some Code
    </c:forEach></td> 
```

在我的生活中，`profielForm`我只有一种`getCityOptions()`方法`cityOptions`。它的工作，但我需要一些解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:09:42.280

这就是EL的原理。它查找 Java bean 属性。bean 属性是公共 getter 可用的一些信息，遵循 JavaBeans 约定。它也可以使用 JavaBean setter 来设置，遵守 JavaBeans 约定：

```
public Foo getFoo();
public void setFoo(Foo foo);
public boolean isCool();
public void setCool(boolean cool); 
```

EL 不关心对象的字段。这是私有的，封装的东西。因此`getFoo()`可以触发返回`Foo`实例的复杂计算，或者简单地返回名为 的字段`foo`或`bar`其他任何内容。EL不在乎。

# jquery - 拖放 - 检查项目是否放置在正确的位置

> ID：12284456
> 
> 赞同：2
> 
> 时间：2012-09-05T15:07:12.150
> 
> 标签：jquery, drag-and-drop, jquery-ui-draggable

我正在自学 javascript/jquery，并决定作为一个辅助项目来创建拖放游戏。我已经根据我发现的其他教程进行了修改，并对其进行了真正的调整，所以在代码上放轻松——希望它不会太吓人。

我正在使用 jquery ui dropable 库来实现游戏，目前我检查一旦项目被丢弃是否在正确的位置，如果是，我将分数加一。

但是我遇到的问题是，当物品掉到错误的地方时，我无法让分数下降一分。

如果将一个正方形放置在正确的占位符上，它会将分数加 1，但如果从正确的占位符中删除同一个正方形，则它需要从分数中减去 1。

这是我到目前为止所做的演示 [http://creativelabel.co.uk/drag-and-drop/](http://creativelabel.co.uk/drag-and-drop/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:19:21.233

解决此问题的一种方法是在放置的元素中存储它是否放置在有效的正方形中。这意味着当它移动到无效方格时，您可以检查它以前是否在有效方格中，如果是这种情况，则将分数减一。

希望这很清楚！

有关现场演示，请参见[http://jsfiddle.net/pET3y/](http://jsfiddle.net/pET3y/)

相关代码：

```
 if ( slotNumber == imgNumber ) {
    ui.draggable.addClass( 'img-match' );
    ui.draggable.data("valid", true);

    imgMatch++;
  }  else {
      if(ui.draggable.data("valid")) {
         imgMatch--;
         ui.draggable.data("valid", false); 
      }
  } 
```

*`alert(ui.draggable.data("valid"));`注意：小提琴有调试警报*

--

**更改为拖动分数下降**

您现在要做的是监听*拖动*事件（称为`activate`），并在调用该事件时运行一个函数。该函数检查被拖动的元素之前是否处于正确的位置，如果是，则将其标记为不在正确的位置并降低分数。

见：http: [//jsfiddle.net/3NkwJ/1/](http://jsfiddle.net/3NkwJ/1/)

```
 drop: handleDropEvent,
      activate: handleDragEvent //add new event
} ); 
```

并添加以下内容：

```
 function handleDragEvent( event, ui ) {
    if(ui.draggable.data("valid")) {
             imgMatch--;
             $('input[name=Score]').val(imgMatch);
             $('#score h1').text(imgMatch);
             ui.draggable.data("valid", false); 
    }      
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:19:34.067

我只浏览了代码，但在这个块之后

```
if ( slotNumber == imgNumber ) {
    ui.draggable.addClass( 'img-match' );
    imgMatch++;
} 
```

你能添加一个 else 语句吗

```
else
    imgMatch--; 
```

# azure - Windows Azure 中的 ERROR_DESTINATION_INVALID

> ID：12284459
> 
> 赞同：2
> 
> 时间：2012-09-05T15:07:21.760
> 
> 标签：azure, asp.net-mvc-4

我按照本教程为 Windows Azure 创建了简单的 MVC4 网站：[https ://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)

在我应该“验证连接”的步骤 8 中，我收到 ERROR_DESTINATION_INVALID 错误。

编辑器：Visual Studio 2012（Winsows Azure 工具 SP1） 操作系统：Windows 7

尝试重新启动 Studio 并重新启动计算机选项。还尝试在 manage.windowsazure.com 中重新创建网站

**日志：**

开始 Web 部署 将应用程序/包发布到[https://waws-prod-bay-001.publish.azurewebsites.windows.net/msdeploy.axd?site=trackme](https://waws-prod-bay-001.publish.azurewebsites.windows.net/msdeploy.axd?site=trackme) ... 2>从源启动 Web 部署任务：manifest( C:\.SourceManifest.xml) 到目标：auto()。

C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets(4377,5)：错误 ERROR_DESTINATION_INVALID：Web 部署任务失败。（无法连接到远程计算机（“waws-prod-bay-001.publish.azurewebsites.windows.net”）。确保远程计算机名称正确并且您能够连接到该计算机。了解更多在： http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_DESTINATION_INVALID) ?LinkId=221672#ERROR_DESTINATION_INVALID 。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:12:44.590

由于此错误，您从 VS 的发布未完成，因此有几件事可能会出错。

根据错误信息，似乎与 Windows Azure 网站部署服务器的连接不成功。我刚刚 ping 了 waws-prod-bay-001.publish.azurewebsites.windows.net 部署服务器并获得了 IP 地址，所以请您检查并验证您是否得到相同的地址。此外，您可能需要验证是否没有可能导致此问题的网络问题。

此外，如果您使用发布配置文件配置了 SQL 数据库，则在部署期间需要连接两台服务器。那么，如果在您配置 SQL 数据库时或之前发生此错误？有时此错误是零星的，因此您可能也必须考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T16:34:24.010

如果 Web 部署失败，请使用 FTP 发布。您可以从 Azure 门户下载站点的发布设置，在仪表板下，单击“下载发布配置文件”。在 Visual Studio 中，当您发布时，选择配置文件，然后选择导入。导入设置文件。然后取消选择 Web 部署并选择 FTP 部署。当 Web Deploy 拒绝工作（即使使用下载的 Web 部署设置）时，这对我有用。

# visual-studio-2010 - visual studio 2010 - 用鼠标跳转到方法定义

> ID：12284460
> 
> 赞同：1
> 
> 时间：2012-09-05T15:07:23.643
> 
> 标签：visual-studio-2010, resharper

从多年的 intellij 工作转移到 VS2010（使用 resharper），我无法停止单击鼠标滚轮以跳转到函数或变量定义（如 intellij 或 F12），结果发现此功能不存在。

有没有办法设置这个功能？
用鼠标有不同的方法吗？谢谢。

编辑 - 谢谢大家 - 但我想设置鼠标滚动按下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:11:01.360

F12 将进入定义。强大的生产力工具附带一个 ctrl+click 以转到定义。

强大的生产力工具：http: [//visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:11:26.110

或 F12 ----------------------------------

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:14:00.523

右键单击变量，您将可以选择查看定义：-

![在此处输入图像描述](../Images/0a8568d26065bfc20444023000abbc34.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:29:43.510

如果你真的很坚持，你可以在这里查看[http://www.codeproject.com/Articles/25369/Forward-Backward-navigation-with-the-mouse-thumb-b](http://www.codeproject.com/Articles/25369/Forward-Backward-navigation-with-the-mouse-thumb-b)让你进入轨道自己动手的方法

# css - IE9 CSS浮动：左右下推内容

> ID：12284472
> 
> 赞同：1
> 
> 时间：2012-09-05T15:08:17.890
> 
> 标签：css, internet-explorer, internet-explorer-9, css-float

我`float`在 IE9 中处理CSS 时遇到问题。查看[partycypacjaobywatelska.pl](http://partycypacjaobywatelska.pl)。在 Firefox、Chrome、Opera 等中，主页正确显示，而 IE9 在标题和其余内容之间显示空白。

这个空间由 left 和 right 类的两个元素触发（它们在 DOM 中的位置：`body`-> `#wrapper`-> `#container`-> `.left`, `.right`）。他们分别拥有`float: left`和`float: right`设置，但是，在 IE9 中，他们将`.middle`div 向下推。设置`display: none`它们会有所帮助，但我无法完全控制这些 div 何时获得内容，因此这对我来说不是一个可行的解决方案。

我试图创建一个最小的示例，但[这个 jsFiddle](http://jsfiddle.net/FTMA5/)在 IE9 中运行良好。知道什么可能触发错误吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:16:21.857

使用 IE 的开发工具，.middle 实际上并没有被推送，它是里面的 .jimgMenu。如果你把overflow:hidden 去掉，那么你可以看到IE9 和Firefox 的行为是一样的。绝对是浮动内容区域的移动。您是否尝试过 clearfix 而不是使用溢出？

老实说，那些 .left 和 .right 可能应该绝对定位，如果它们像那样粘在侧面的话。它们甚至包含什么？为什么他们假设漂浮在内容后面？这可能不是构建 HTML 的最佳方式。

# clojure - 如何从 Clojure 中的地图列表中获取值

> ID：12284476
> 
> 赞同：3
> 
> 时间：2012-09-05T15:08:45.880
> 
> 标签：clojure

我有一个地图列表，我想从中检索给定某个“columnId”的“字段”的值。

```
(def field-to-column-mapping
   [{"field" "first_name", "columnId" "1"}
    {"field" "last_name", "columnId" "2"}
    {"field" "phone", "columnId" "3"}])

(defn get-field-given-column [id]
  ((some #(if (= id (get % "columnId")) %)
         field-to-column-mapping)
   "field"))

 ;; Gets "first_name"
 (get-field-given-column "1") 
```

这行得通，但我的直觉告诉我必须有一种更清洁的方法来做到这一点。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:20:29.913

使用 a 编写此`for`代码可能会更清晰，同时执行与您问题中的示例基本相同的操作：

```
(defn get-field-given-column [id] 
   (for [row field-to-column-mapping :when (= (row "columnId") id)] 
      (row "field")))

> (get-field-given-column "1")
("first_name") 
```

这将返回一系列答案，因为可能不止一行具有相同的键。如果真的只有一个，那么添加对`first`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T15:19:57.560

如果您在不更改的情况下进行大量查找`field-to-column-mapping`，则可能值得构建`"columnId" -> "field"`地图，例如

```
(def column-to-field
   (zipmap
     (map #(% "columnId") field-to-column-mapping)
     (map #(% "field") field-to-column-mapping)))
; {"3" "phone", "2" "last_name", "1" "first_name"} 
```

另一种定义`column-to-field`方式是（我不确定哪种方式更好/更有效）：

```
(def column-to-field
   (apply hash-map
      (mapcat
         #(vector (% "columnId") (% "field"))
         field-to-column-mapping))) 
```

现在`(column-to-field "1")`给出了想要的结果。

# php - 在 php 中的服务器上执行之前清理输入

> ID：12284478
> 
> 赞同：0
> 
> 时间：2012-09-05T15:08:53.257
> 
> 标签：php, javascript

我想让用户在表单中输入两个变量，名称和密码。我想禁用输入值中的任何 XSS 或脚本插入。我在表单方法中有以下代码：

```
<form name="form1" method="post" action="checkpw.php">
Your Name:
<table>
  <tr><td><input class="text" name="name" onBlur="capitalize(this);" maxlength=12 type="text" /></td></tr>
</table> 
Password:
<table>
  <tr><td><input class="text" name="passwd" maxlength=8 type="password" /></td></tr>
  <tr><td align="center"><br/>
     <input class="text" type="submit" name="submitbt" value="Login" />
  </td></tr>
</table> 
```

和以下 checkpw.php：

```
<?php

// Clean up the input values 
$post = filter_input_array(INPUT_POST, array(
    'name' => FILTER_SANITIZE_STRING,
    'pw' => FILTER_SANITIZE_STRING,
));

if (is_null($post) || in_array(null, $post)) {
    header("location:login.php");
    return; // missing fields (or failed filter)
} 

// pw is the password sent from the form 
$pw=$_POST['passwd'];
$name=$_POST['name'];

if($pw == 'testpass'){
    header("location:index.php");
} else {
    header("location:wrong.php");
}
?> 
```

这是确保表单发送到服务器并仅在输入值被清理后执行的安全方法吗？

另外，我想将 $name 值传递给 index.php 文件。我在 index.php 中插入如下代码：

```
<?php echo $name ?> 
```

但它是空的。知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:15:11.760

您正在发出`header( .. )`，这意味着您正在重定向到另一个页面并重新开始。

您有 3 个选项：

*   将您的 $name 放入会话中。
*   在标头函数中传递 $name ，例如 `header("location: index.php?name=$name");`
*   不要重定向，而是包含 php 文件。在这种情况下，您根本不需要会话。也会更快，因为您不需要往返浏览器。

至于消毒，一开始就可以。这取决于您以后将如何处理这些数据。我建议，如果将数据放入数据库中以更详细地查看该怎么做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:31:20.630

现在`magic_quotes_gpc`应该在大多数服务器上禁用；但是，请阅读[本文](http://www.php.net/manual/en/security.magicquotes.disabling.php)以了解禁用它们的其他方法。

此外，您可以[`filter_input_array()`](http://au2.php.net/filter_input_array)为此目的使用 (PHP >= 5.2)：

```
$post = filter_input_array(INPUT_POST, array(
    'name' => FILTER_SANITIZE_STRING,
    'pw' => FILTER_SANITIZE_STRING,
));

if (is_null($post) || in_array(null, $post)) {
    return; // missing fields (or failed filter)
}

// you can safely use $post['name'] and $post['pw'] here 
```

# java - Java .class 文件是否存储在 JVM 内存中

> ID：12284482
> 
> 赞同：5
> 
> 时间：2012-09-05T15:09:17.210
> 
> 标签：java, jvm

我阅读了 JVM 内存模型，但对以下内容感到困惑：

1.  JVM 是否将 .class 实例存储在其内存中。如果是，那么在哪个地区。
2.  是不是就像一旦加载了类，JVM就会生成机器级代码，然后开始执行机器代码指令，然后只在堆上创建对象并填充方法区。
3.  perm gen等区域存储字节码还是机器级码？
4.  烫发与方法区

我非常感谢有关该主题的任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T15:10:02.820

1)`.class`文件将在加载时存储在 permgen 内存区域中。

2) HEAP 上的对象将在程序运行时创建，当您显式创建时，而不是在加载时。JVM“惰性”编译方法，即它发出小的存根代替方法的已编译机器代码，这将触发每个方法的编译。这意味着永远不会编译未使用的方法。

3) perm gen 存储字节代码（将加载.class 文件），不确定机器级代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T15:13:18.700

> JVM是否将.class实例存储在其内存中。如果是，那么在哪个区域

永久代

> 是不是就像一加载类

您可以加载类而无需阅读`.class`

> ，JVM生成机器级代码，然后开始执行机器代码指令

字节码在一段时间后被解释或可能编译为本机机器码。

> perm gen等区域存储字节码还是机器级码？

两个都。他们是形影不离的。

# c# - 惰性依赖注入

> ID：12284487
> 
> 赞同：20
> 
> 时间：2012-09-05T15:09:42.367
> 
> 标签：c#, .net, design-patterns, inversion-of-control, ninject

我有一个项目，其中 Ninject 用作​​ IoC 容器。我担心的是很多类都有这样的构造函数：

```
[Inject]
public HomeController(
    UserManager userManager, RoleManager roleManager, BlahblahManager blahblahManager) {
   _userManager = userManager;
   _roleManager = roleManager;
   _blahblahManager = blahblahManager;
} 
```

如果我不想一次拥有这些类的所有实例怎么办？

当所有这些类都被包装`Lazy<T>`并传递给构造函数时，这种方式并不完全是我所需要的。`T`实例尚未创建，但实例`Lazy<T>`已存储在内存中。

我的同事建议我使用工厂模式来控制所有实例化，但我不确定 IoC 是否有如此出色的设计错误。

这种情况是否有解决方法，或者 IoC 的设计真的有这么大的缺陷？也许我应该使用另一个 IoC 容器？

有什么建议么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-05T16:01:43.100

在我看来，您正在做[过早的优化](http://c2.com/cgi/wiki?PrematureOptimization)：不要这样做。

您的服务的构造函数应该做的[只是](https://blog.ploeh.dk/2011/03/03/InjectionConstructorsshouldbesimple/)将它所接受的依赖项存储在私有字段中。在那种情况下，创建这样一个对象真的很轻。不要忘记 .NET 中的对象创建速度非常快。在大多数情况下，从性能的角度来看，这些依赖项是否被注入并不重要。尤其是在比较应用程序的其余部分（以及您使用的框架）吐出的对象数量时。真正的成本是当您开始使用 Web 服务、数据库或文件系统（或一般的 I/O）时，因为它们会导致更大的延迟。

如果创建真的很昂贵，您通常应该将创建隐藏在[虚拟代理](https://en.wikipedia.org/wiki/Proxy_pattern#Virtual_Proxy)后面，而不是在每个消费者中注入 a `Lazy<T>`，因为这允许常见的应用程序代码忽略存在延迟创建的机制这一事实（您的应用程序执行此操作时，代码和测试代码会变得更加复杂）。

[依赖注入](https://manning.com/seemann2)的第 8 章：原理、实践、模式包含关于惰性代理和虚拟代理的更详细讨论。

但是， a`Lazy<T>`只消耗 20 字节的内存（假设是 32 位进程，另外[24 字节](https://stackoverflow.com/a/5765949/264697)用于它的 Wrapped `Func<T>`），并且`Lazy<T>`实例的创建实际上是免费的。因此，无需担心这一点，除非您处于内存限制非常严格的环境中。

如果内存消耗是一个问题，请尝试注册生命周期大于瞬态的服务。您可以执行每个请求、每个 Web 请求或单例。我什至会说，当您处于创建新对象成为问题的环境中时，您可能应该[只使用单例服务](https://blogs.cuttingedge.it/steven/posts/2019/in-praise-of-the-singleton-object-graph/)（但您不太可能在这样的环境中工作，因为您正在构建一个 Web 应用程序） .

请注意，Ninject 是 .NET 中速度较慢的 DI 库之一。如果这让您感到困扰，请[切换到更快的容器](https://www.palmmedia.de/Blog/2011/8/30/ioc-container-benchmark-performance-comparison)。一些容器的性能接近于手动更新对象图。但无论如何，请对此进行分析，许多开发人员出于错误的原因切换 DI 库。

请注意，使用`Lazy<T>`as 依赖是一种[泄漏抽象](https://en.wikipedia.org/wiki/Leaky_abstraction)（违反[依赖倒置原则](https://en.wikipedia.org/wiki/Dependency_inversion_principle)）。请阅读[此答案](https://stackoverflow.com/questions/21709902/unit-mvc4-s-lazyt-is-not-working-in-asp-net-mvc-4-app)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-11T22:58:37.153

Steven 说这看起来像是过早的优化是正确的。这些对象的构建速度非常快，通常不会成为瓶颈。

然而，使用 Lazy 来表达你不需要的依赖是依赖注入框架中的常见模式。[Actofac](http://nblumhardt.com/2009/12/lazing-around-with-autofac2/)就是这样一种容器，它内置了对[各种包装类型](https://code.google.com/p/autofac/wiki/RelationshipTypes)的支持。我敢肯定 Ninject 也有一个扩展，也许看看这个[Ninject Lazy](https://github.com/ninject/ninject.extensions.factory/wiki/Lazy)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-27T08:20:01.267

您还可以使用以下语法注入操作方法。（我不确定这到底是什么版本）。

*构造函数是最佳实践，但是当我有一个服务正在*做一些昂贵的初始化时，我不得不故意这样做一次——事实上是偶然的——但它有一段时间没有被发现，而将它移到一个方法中是最简单的那*确实*需要它。

如果您只需要从一种操作方法访问服务，这可以使代码更清晰 - 但请记住，如果您将其注入到方法中，您将不得不到处传递它，因为它不再是 on `this`。绝对不要`this.service`在动作方法中分配 - 这太可怕了。

```
public IActionResult About([FromServices] IDateTime dateTime)
{
    ViewData["Message"] = "Currently on the server the time is " + dateTime.Now;

    return View();
} 
```

[https://docs.microsoft.com/en-us/aspnet/core/mvc/controllers/dependency-injection?view=aspnetcore-2.2#action-injection-with-fromservices](https://docs.microsoft.com/en-us/aspnet/core/mvc/controllers/dependency-injection?view=aspnetcore-2.2#action-injection-with-fromservices)

# ruby - 通过 Ant 运行 Ruby 测试（Rspec 和 Cucumber）

> ID：12284494
> 
> 赞同：0
> 
> 时间：2012-09-05T15:10:02.180
> 
> 标签：ruby, ant, rspec, cucumber, teamcity

我目前正在研究 TeamCity 以及如何让我们的 Ruby 测试运行。使用命令行或 Rake 构建器时，我可以很好地运行测试。我现在要解决的问题有两个：

在我之前的一项工作中，我们还依靠 TeamCity 来运行我们的 .NET 测试。为此，我们使用了 Nant，我们可以跟踪测试期间运行的查询数量以及这些查询的平均执行时间。

我现在正在尝试对我的 Ruby 项目做同样的事情。所以我要解决的第一个合乎逻辑的步骤是，**如何使用 Ant运行例如*RSpec*或*Cucumber测试？*** 我尝试查看 Ant 本身并稍微掌握它，但我找到的所有示例都是针对我们不使用的 jRuby 的。我们依赖 RVM 和正常的 Ruby 安装。

问题的第二部分是，**如何跟踪运行的查询数量及其执行时间？**我猜可能有一个宝石可以跟踪它或某种全局变量。希望以某种方式将此信息输出回 TeamCity。

**编辑**

好的，所以我设法让我的 TeamCity 服务器使用 Ant 运行。这是我正在使用 atm 的 XML：

```
 <?xml version="1.0"?>
   <project name="rubycas" default="init">
       <description>
           This buildfile is used to build the RubyCAS project under TeamCity and run the required tasks to validated
           whether the project is stable and fully functional.
       </description>
       <property name="test_type" value="cucumber" />

       <target name="init">
          <echo message="##teamcity[testStarted name='Rubycas']" />

          <condition property="cucumberBool">
               <equals arg1="${test_type}" arg2="cucumber" />
          </condition>

          <condition property="rspecBool">
               <equals arg1="${test_type}" arg2="rspec" />
           </condition>
       </target>

       <target name="rspec" if="rspecBool" depends="init">
           <exec executable="rspec" outputproperty="result">
               <arg value="--require teamcity/spec/runner/formatter/teamcity/formatter" />             <arg value="--format Spec::Runner::Formatter::TeamcityFormatter" />
           </exec>
           <echo message="${result}" />
       </target>

       <target name="cucumber" if="cucumberBool" depends="init">
           <exec executable="cucumber" outputproperty="result">
               <arg value="--format junit" />
               <arg value="--out results" />
               <arg value="features" />
           </exec>
           <echo message="${result}" />
       </target>
   </project> 
```

现在的问题是，我无法将 RSpec 的输出输入 TeamCity 以识别测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:37:13.737

您可以使用 ant 的 exec 任务来运行任意系统调用，在您的情况下可能是 rspec：

[https://ant.apache.org/manual/Tasks/exec.html](https://ant.apache.org/manual/Tasks/exec.html)

类似的东西

`<target name="rspec"> <exec executable="rake"> <arg value="spec"/> </exec> </target>`

不过，我不知道您的跟踪内容是否适用于此，因为它实际上是在 ant 之外执行命令。

# c# - 实体框架：无法创建类型为“System.Collections.Generic.IList`1”的常量值

> ID：12284497
> 
> 赞同：15
> 
> 时间：2012-09-05T15:10:02.623
> 
> 标签：c#, lambda, entity-framework-4, linq-to-entities

这给我今天带来了无穷无尽的问题。我有这个简单的查询

```
var result =
    DataContext.Accommodations.Where(a => 
        (criteria.MinPrice == null || a.AccommodationRates.Any(r => r.From >= criteria.MinPrice)) &&
        (criteria.MaxPrice == null || a.AccommodationRates.Any(r => r.To <= criteria.MaxPrice)) &&
        (criteria.Locations == null || criteria.Locations.Count == 0 || a.AccommodationPlaceJoins.Any(j => criteria.Locations.Contains(j.Place.PlaceName)))
); 
```

这个查询的最后一行给我带来了问题

```
(criteria.Locations == null ||
 criteria.Locations.Count == 0 ||
 a.AccommodationPlaceJoins.Any(j => criteria.Locations.Contains(j.Place.PlaceName))) 
```

它给出的错误是

> 无法创建类型为“System.Collections.Generic.IList`1”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

我什至没有尝试创建一个列表。我在这里要做的就是带回与一个地方相关联的住宿（地方表中的地名通过AccommodationPlaceJoin表链接到住宿表）等于条件中的任何一个地名.Locations（IList 类型）。

我试过把这条线改成这个，但没有用。

```
(criteria.Locations == null ||
 criteria.Locations.Count == 0 ||
 a.AccommodationPlaceJoins.Any(j => criteria.Locations.Any(l => l == j.Place.PlaceName))) 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-05T15:19:17.637

EF 无法创建的常量值`null`用于比较`criteria.Locations == null`。您需要将查询分成两种情况，并检查查询之外的空列表，例如：

```
var result = DataContext.Accommodations.Where(a => 
    (criteria.MinPrice == null || 
        a.AccommodationRates.Any(r => r.From >= criteria.MinPrice)) &&
    (criteria.MaxPrice == null ||
        a.AccommodationRates.Any(r => r.To <= criteria.MaxPrice)));

if (criteria.Locations != null && criteria.Locations.Count > 0)
{
    result = result.Where(a => a.AccommodationPlaceJoins
        .Any(j => criteria.Locations.Contains(j.Place.PlaceName)));
} 
```

**编辑**

顺便说一句：在我看来，编写整个查询会使其更具可读性，并将简化必须发送到数据库的 SQL：

```
IQueryable<Accommodation> result = DataContext.Accommodations;

if (criteria.MinPrice != null)
    result = result.Where(a => a.AccommodationRates
        .Any(r => r.From >= criteria.MinPrice));

if (criteria.MaxPrice != null)
    result = result.Where(a => a.AccommodationRates
        .Any(r => r.To <= criteria.MaxPrice));

if (criteria.Locations != null && criteria.Locations.Count > 0)
    result = result.Where(a => a.AccommodationPlaceJoins
        .Any(j => criteria.Locations.Contains(j.Place.PlaceName))); 
```

# java - 将 Jpanel 添加到 Jframe NetBeans

> ID：12284499
> 
> 赞同：2
> 
> 时间：2012-09-05T15:10:13.997
> 
> 标签：java, swing, user-interface, netbeans, jpanel

![在此处输入图像描述](../Images/c32a4fe1cf418ca6f79b3b6d7ef39a7e.png)

大家好，我正在开发我的大学迷你项目。这是一个图书馆管理系统，我应该使用 Net-beans IDE 在 Java swing 中完成。首先，我在进行手动编码。这需要时间。

在手动编码中，我使用菜单栏和项目创建单个 JFrame，在执行的所有操作中，我为所有 Jpanel 编写代码。它使文件和代码变得巨大。也很混乱。

现在我需要你的帮助。我创建了一个带有菜单 A JPanel 的 Main JFrame - ADD Book another Jpanel - 添加书籍成功时（演示！，用于 ADD Book 中发生的操作）

我做了动作监听器

```
addBook addbk = new addBook();
this.getContentPane().add(addbk); 
```

写了这段代码。我没有道理。朋友们，作为一个java新手，我需要学习的是

1.) 如何校准和显示外部 Jpanel 执行的操作 2.) 如果外部 JPanel 中发生任何事件，如何向同一根 JFrame 显示另一个 JPanel。

在某种程度上，HTML 中的 iframe 之类的东西 谢谢大家。

[http://compilr.com/abelkbil/openlib/OpenLibMainGUI.java](http://compilr.com/abelkbil/openlib/OpenLibMainGUI.java)

[http://compilr.com/abelkbil/openlib/addBook.java](http://compilr.com/abelkbil/openlib/addBook.java)

[http://compilr.com/abelkbil/openlib/bookAdded.java](http://compilr.com/abelkbil/openlib/bookAdded.java)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:13:22.537

[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)，正是您在这种情况下所需要的。并且学习[Java 命名约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)并坚持下去，因为您是初学者，所以从一开始就走在正确的轨道上总是好的。

这是一个示例，您可以查看：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CardLayoutExample
{
    private JPanel contentPane;
    private MyPanel panel1;
    private MyPanel panel2;
    private MyPanel panel3;
    private JComboBox choiceBox;
    private String[] choices = {
                                "Panel 1",
                                "Panel 2",
                                "Panel 3"
                               };

    private void displayGUI()
    {
        JFrame frame = new JFrame("Card Layout Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setBorder(
            BorderFactory.createEmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new CardLayout());

        choiceBox = new JComboBox(choices);        

        panel1 = new MyPanel(contentPane
                , Color.RED.darker().darker(), this);
        panel2 = new MyPanel(contentPane
                , Color.GREEN.darker().darker(), this);
        panel3 = new MyPanel(contentPane
                , Color.DARK_GRAY, this);   

        contentPane.add(panel1, "Panel 1"); 
        contentPane.add(panel2, "Panel 2");
        contentPane.add(panel3, "Panel 3");         

        frame.getContentPane().add(choiceBox, BorderLayout.PAGE_START);
        frame.getContentPane().add(contentPane, BorderLayout.CENTER);       
        frame.pack();   
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public JComboBox getChoiceBox()
    {
        return choiceBox;
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new CardLayoutExample().displayGUI();
            }
        });
    }
}

class MyPanel extends JPanel 
{

    private JButton jcomp1;
    private JPanel contentPane;
    private Color backgroundColour;
    private JComboBox choiceBox;

    public MyPanel(JPanel panel, Color c, CardLayoutExample cle) 
    {   
        contentPane = panel;
        backgroundColour = c;
        choiceBox = cle.getChoiceBox();

        setOpaque(true);
        setBackground(backgroundColour);

        //construct components
        jcomp1 = new JButton ("Show New Panel");
        jcomp1.addActionListener( new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                String changeToPanel = (String) choiceBox.getSelectedItem();
                CardLayout cardLayout = (CardLayout) contentPane.getLayout();
                cardLayout.show(contentPane, changeToPanel);
            }
        });

        add(jcomp1);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 500));
    }
} 
```

否则你也可以看看这个[例子](https://stackoverflow.com/a/12059031/1057230)。

# sql - 同一张表上的内连接和左连接

> ID：12284502
> 
> 赞同：-1
> 
> 时间：2012-09-05T15:10:21.453
> 
> 标签：sql

我有两个表（A 和 B），有两列共同（x 和 y）。我想在 x 上内连接 A 和 B，但只保留 A 的列 y 的值（左连接）。我正在寻找一种组合两个 y 列的方法（不能只在 select 语句中指定 Ay ）。我怎样才能做到这一点？

例子

表 A

```
x  y
1  2
3  4
5  6
7  8 
```

表 B

```
x  y
1  2
3  8
9  null
11 0 
```

我希望结果表看起来像

```
x  y
1  2
3  4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:11:26.453

```
select a.x, a.y
from TableA a
inner join TableB b on a.x = b.x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:12:30.347

你的意思是：

```
SELECT *
FROM A
INNER JOIN B b1 ON A.x = b1.x
LEFT JOIN B b2 ON a.y = b2.y 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:00:02.737

看看[SQL exclude a column using SELECT * [except columnA] FROM tableA?](https://stackoverflow.com/questions/729197/sql-exclude-a-column-using-select-except-columna-from-tablea) 第二个答案。不是最佳解决方案，但您可以将其用作解决方法。通常，您应该明确指定完整的列列表。

# autocad - 处理未转义的字符串

> ID：12284504
> 
> 赞同：2
> 
> 时间：2012-09-05T15:10:29.007
> 
> 标签：autocad, dde, autolisp

我写了一个替代函数来打开 AutoCAD 图纸。但是，当从 Windows 资源管理器运行文档时，AutoCAD 很难更改文档的打开方式（双击具有文件关联的文件）。我发现的唯一方法是更改​​注册表项“OpenDdeExec”。提供的参数 (%1) 为我提供了要打开的文件的非转义路径。

在将其解析为特殊字符之前，我需要忽略路径中的转义或用双反斜杠替换反斜杠。在 C# 中，您可以执行类似的操作`string s = @"I\Like random\backslashes";`，反斜杠将被视为实际的反斜杠字符。在 lisp 中，我发现的唯一等价物是`quote`它具有奇怪的行为（因为它的正常使用并不完全是我想要实现的）。

如果我写类似的东西`(quote (I\Like random\backslashes))`，结果将是`(I\\Like random\\backslashes)`我所需要的。但是，我必须摆脱括号。知道我怎么能做到这一点吗？

注意：这样做`(quote I\Like random\backslashes)`会因空间而中断。但是，它可以在`(quote I\Like\backslashes)`. 这会`I\\Like\\backslashes`像我想要的那样输出。

这是当前具有所述问题的 OpenDdeExec：

```
(OPENFROMSHELL (QUOTE (%1))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:45:36.840

遗憾的是，AutoCAD 有限的 LISP 无法做到这一点。

# jquery - 在所有浏览器中检测选择选项的鼠标悬停

> ID：12284510
> 
> 赞同：2
> 
> 时间：2012-09-05T15:10:47.413
> 
> 标签：jquery, drop-down-menu, jquery-hover

我试图让一个框弹出下拉菜单的一侧，以与当前悬停的选项内联。这不容易解释，所以这里是一个工作示例（仅适用于 Firefox）。 [http://jsfiddle.net/WJaVz/21/](http://jsfiddle.net/WJaVz/21/)

我已经在 Chrome 和 IE 中尝试过，但似乎都无法识别该选项的 mouseenter 事件，因此预览框永远不会出现。我尝试将事件更改为鼠标悬停并聚焦以防他们更喜欢它们，但它在 IE 和 chrome 中仍然不起作用。（尚未测试过歌剧或野生动物园。）

一个想法是可能使下拉列表成为无序列表并使其看起来像下拉列表，我想我可以检测到 li 何时具有 mouseenter 事件。

有谁知道这个问题的解决方案，所以它可以在大多数当前浏览器中运行，如果不是全部，而不需要重建大部分浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:11:09.573

感谢 mcpDESIGNS，我确实尝试了更多的东西，但无济于事。我最终将其重建为无序列表。我已经将列表样式设置为看起来像下拉菜单，然后我可以轻松检测用户何时将鼠标悬停在无序列表中的 li 上......它适用于所有浏览器 = WIN 8D

这是代码：http: [//jsfiddle.net/CJbeF/22/](http://jsfiddle.net/CJbeF/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T16:03:19.300

@SubstanceD 的解决方案是我找到的最好的解决方案，但它存在一些可访问性问题，因此我对其进行了重新设计以使用单选按钮字段集。

html:

```
<div id="colourlist">red</div>
<fieldset id="colours">
  <label for="red">red<input type="radio" name="foo" id="red"/></label>
  <label for="blue">blue <input type="radio" name="foo" id="blue"/> </label>
  <label for="green">green<input type="radio" name="foo" id="green"/></label>   
  <label for="orange">orange<input type="radio" name="foo" id="orange"/></label>       
</fieldset>
<div id="preview"></div> 
```

CSS：

```
body{
    margin: 0;
    padding: 50px;
}
input {
    opacity:0;
}
label {
    display:block;
    height:20px;
}
#colourlist{
    position: absolute;
    border: 1px solid #B5B0AC;
    width: 200px;
    height: 21px;
    background: url('http://www.thermaxindia.com/images/dropdown_arrow.JPG') 180px 0 no-repeat;    
}
label:hover{
    background-color: #3399FF;
}
#colours{
   display: none;
   position: relative;
   top: 22px;
   left: 0;
   width: 200px;
   position: relative;
   border: 1px solid #B5B0AC;
   overflow-y: scroll;
   height:60px;
}
#preview{
   display: none;
   position: relative;
   background-color: #fff;
   border: 1px solid #ccc;
   padding: 10px;
   width: 250px;
   height: 30px;  
} 
```

js：

```
$("#colours label").on('mouseenter', function(){
    var O = $(this).offset();
    var CO = $("#colours").offset();
    $("#preview").css("top", O.top-150).show();
    $("#preview").css("left", CO.left+160);
    var text = $(this).text();
    $("#preview").css("background-color", text);
});
$("#colours input").on('click', function(){
    var text = $(this).attr("id");
    $("#colourlist").text(text);
    $("#colours").hide();
    $("#preview").hide(); 
});
$("#colourlist").on('click', function(e){
    e.stopPropagation();
    $("#colours").show();   
});
$("body").on('click',function(e){
    $("#colours").hide();
}); 
```

这是小提琴：http: [//jsfiddle.net/MikeGodin/CJbeF/109/](http://jsfiddle.net/MikeGodin/CJbeF/109/)

# html - 反转 CSS 属性以更改为 RTL

> ID：12284514
> 
> 赞同：4
> 
> 时间：2012-09-05T15:10:57.250
> 
> 标签：html, css, web

要将网页 CSS 从 LTR 更改为 RTL，我必须设置或反转以下 CSS 属性：

身体{方向：rtl}

任何 float:left 应该是 float:right 反之亦然

任何关于左或右的填充或边距都应该颠倒

此外，任何图像都应水平反转。

我的问题是：是否应该更改更多 CSS 属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T15:27:38.270

`text-align`, `background-position`,`border`位置`left`和`right`位置，基本上是任何具有水平属性的东西。

如果您想手动完成，您可以查看 css 属性列表，例如[this](http://www.w3schools.com/cssref/default.asp)，但我个人会考虑使用其中一种在线工具来开始。

[CSSJanus](http://cssjanus.commoner.com/)通常非常好，但如果你用谷歌搜索的话，我相信还有更多。

祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T17:08:50.080

其他几个属性...

1.  **框阴影和文本阴影**

/* 将第一个值（阴影的水平偏移）乘以 -1 */

```
`box-shadow: 5px -5px 5px 5px #abc;` 
```

变成

```
box-shadow: -5px -5px 5px 5px #abc; 
```

和

```
text-shadow: 2px 2px #FF0000; 
```

变成

```
text-shadow: -2px 2px #FF0000; 
```

2：**边界半径**

您需要小心这一点，因为更改值以实现 rtl 在这里的工作方式不同

```
 border-radius:25px 0px 0 25px;

becomes

border-radius:0 25px 25px 0; (not border-radius:25px 25px 0 0;) 
```

此外，这里有几个提示：

1.  **以百分比表示的水平位置**

如果你有这样的风格：

```
.style
{
position: absolute;
top: 22%;
left: 32%;
...
} 
```

左边的属性会变成`100-32=68%`

**2\. background-position：以像素为单位的水平值**- 例如：

```
background-position: -34px -85px; 
```

在这种情况下，您将不得不手动解决此问题。（见[这篇](http://rtl-this.com/tutorial/background-images)文章）

作为参考：

这是一篇关于将网站转换为 rtl的[精彩文章](http://rtl-this.com/tutorial/3-different-ways-rtl-your-css)

实际上，整个网站[http://rtl-this.com](http://rtl-this.com)都处理 rtl 问题，因此可以在那里找到很多有用的东西

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T15:27:47.397

您只是尝试使用从右到左书写，还是尝试镜像网页？

```
body {
    transform: scaleX(-1);
    -ms-transform: scaleX(-1);
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
} 
```

这将生成网页的镜像，但一切仍然正常运行（例如，链接可以在其新位置单击）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T15:54:55.727

你可以试试；

```
body {
  -ms-transform: scaleX(-1);
  -moz-transform: scaleX(-1); /* Gecko */
  -o-transform: scaleX(-1); /* Operah */
  -webkit-transform: scaleX(-1); /* webkit */
  transform: scaleX(-1); /* standard */
  filter: FlipH; /* IE 6/7/8 */
} 
```

这将产生镜面效果。***[这](http://jsfiddle.net/blasteralfred/CdppB/1/)***是一个现场演示。

`rtl`如果您想将字母从右向左排列，您可以尝试，如果您`text-align: right`想将项目向右浮动，则可以使用。

如果你想让文本从右边开始，你可以试试；

```
body{
    unicode-bidi:bidi-override;
    direction:rtl;
    float: right;
} 
```

***[这](http://jsfiddle.net/blasteralfred/CdppB/2/)***是现场演示；

# ruby - em-websocket - *** 检测到缓冲区溢出 ***: ruby 终止

> ID：12284520
> 
> 赞同：1
> 
> 时间：2012-09-05T15:11:12.367
> 
> 标签：ruby, eventmachine, ubuntu-12.04, em-websocket

我尝试使用 eventmachine + em-websocket + redis 来构建通知服务器。完成几乎所有代码后，它看起来不错。但是，当我开始测试连接时，发生了一些事情。连接不能超过 1015（我不知道为什么是 1015）。

我尝试简化代码并找到问题，但我不知道我能做什么。

### 环境

*   RVM Ruby ruby​​-1.9.3-p194（也试过 ree）
*   服务器：Ubuntu 12.04（也试过 Mountain Lion）
*   客户：山狮

### 宝石

*   em-websocket 0.3.8
*   eventmachine 0.12.10（也试过 1.0.0.beta.4）
*   em-websocket-client 0.1.1

### 客户

```
require 'eventmachine'
require 'em-websocket-client'

EM.run do

  # If I create 1200 connections one time, server will crash. But there is no error message.
  # If I create 1000 connections (1000 connections are connecting) at first and create again, it'll show error message.

  1200.times do |i|

    Fiber.new do
      conn = EventMachine::WebSocketClient.connect("ws://0.0.0.0:8080?channel=channel#{i}")
      conn.callback do
        puts "Connected"
      end

      conn.errback do |e|
        puts "Got error: #{e}"
      end

      conn.stream do |msg|
        puts "got data:"
        puts msg
      end

      conn.disconnect do
        puts "gone"
        EM::stop_event_loop
      end
    end.resume
  end
end 
```

### 服务器

```
require 'eventmachine'
require 'em-websocket'

EventMachine.run do

  f1 = Fiber.new do
    EventMachine::WebSocket.start(:host => "0.0.0.0", :port => 8080) do |ws|
        ws.onopen do |data|
          puts "WebSocket connection open"
        end

        ws.onclose do
          puts "Connection closed"
        end

        ws.onmessage do |msg|
          puts "Recieved message: #{msg}"
        end
    end
  end

  f1.resume

end 
```

### 错误信息

```
*** buffer overflow detected ***: ruby terminated
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(__fortify_fail+0x37)[0x7fd7de40d007]
/lib/x86_64-linux-gnu/libc.so.6(+0x107f00)[0x7fd7de40bf00]
/lib/x86_64-linux-gnu/libc.so.6(+0x108fbe)[0x7fd7de40cfbe]
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/eventmachine-0.12.10/lib/rubyeventmachine.so(_ZN14EventMachine_t14_RunSelectOnceEv+0xac)[0x7fd7dcec33dc]
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/eventmachine-0.12.10/lib/rubyeventmachine.so(_ZN14EventMachine_t3RunEv+0x5c)[0x7fd7dcec61ec]
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/eventmachine-0.12.10/lib/rubyeventmachine.so(+0x1e419)[0x7fd7dceca419]
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9(+0x175941)[0x7fd7de836941]
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9(+0x16b609)[0x7fd7de82c609]
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9(+0x171a9a)[0x7fd7de832a9a]
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9(rb_iseq_eval_main+0xae)[0x7fd7de838c4e]
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9(+0x62e62)[0x7fd7de723e62]
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9(ruby_exec_node+0x1d)[0x7fd7de724c0d]
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9(ruby_run_node+0x1e)[0x7fd7de726cae]
ruby[0x4007fb]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7fd7de32576d]
ruby[0x400829]
======= Memory map: ========
00400000-00401000 r-xp 00000000 ca:00 155311                             /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby
00600000-00601000 r--p 00000000 ca:00 155311                             /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby
00601000-00602000 rw-p 00001000 ca:00 155311                             /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby
00c1c000-019ac000 rw-p 00000000 00:00 0                                  [heap]
7fd7db948000-7fd7db952000 r-xp 00000000 ca:00 184566                     /usr/local/rvm/gems/ruby-1.9.3-p194/gems/hiredis-0.4.5/lib/hiredis/ext/hiredis_ext.so
7fd7db952000-7fd7dbb51000 ---p 0000a000 ca:00 184566                     /usr/local/rvm/gems/ruby-1.9.3-p194/gems/hiredis-0.4.5/lib/hiredis/ext/hiredis_ext.so
7fd7dbb51000-7fd7dbb52000 r--p 00009000 ca:00 184566                     /usr/local/rvm/gems/ruby-1.9.3-p194/gems/hiredis-0.4.5/lib/hiredis/ext/hiredis_ext.so
7fd7dbb52000-7fd7dbb53000 rw-p 0000a000 ca:00 184566                     /usr/local/rvm/gems/ruby-1.9.3-p194/gems/hiredis-0.4.5/lib/hiredis/ext/hiredis_ext.so
7fd7dbb53000-7fd7dbb54000 r-xp 00000000 ca:00 156027                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest/sha1.so
7fd7dbb54000-7fd7dbd53000 ---p 00001000 ca:00 156027                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest/sha1.so
7fd7dbd53000-7fd7dbd54000 r--p 00000000 ca:00 156027                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest/sha1.so
7fd7dbd54000-7fd7dbd55000 rw-p 00001000 ca:00 156027                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest/sha1.so
7fd7dbd55000-7fd7dbd58000 r-xp 00000000 ca:00 156022                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest.so
7fd7dbd58000-7fd7dbf57000 ---p 00003000 ca:00 156022                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest.so
7fd7dbf57000-7fd7dbf58000 r--p 00002000 ca:00 156022                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest.so
7fd7dbf58000-7fd7dbf59000 rw-p 00003000 ca:00 156022                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest.so
7fd7dbf59000-7fd7dbf5a000 r-xp 00000000 ca:00 156025                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
7fd7dbf5a000-7fd7dc159000 ---p 00001000 ca:00 156025                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
7fd7dc159000-7fd7dc15a000 r--p 00000000 ca:00 156025                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
7fd7dc15a000-7fd7dc15b000 rw-p 00001000 ca:00 156025                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
7fd7dc15b000-7fd7dc171000 r-xp 00000000 ca:00 14677                      /lib/x86_64-linux-gnu/libz.so.1.2.3.4
7fd7dc171000-7fd7dc370000 ---p 00016000 ca:00 14677                      /lib/x86_64-linux-gnu/libz.so.1.2.3.4
7fd7dc370000-7fd7dc371000 r--p 00015000 ca:00 14677                      /lib/x86_64-linux-gnu/libz.so.1.2.3.4
7fd7dc371000-7fd7dc372000 rw-p 00016000 ca:00 14677                      /lib/x86_64-linux-gnu/libz.so.1.2.3.4
7fd7dc372000-7fd7dc387000 r-xp 00000000 ca:00 14632                      /lib/x86_64-linux-gnu/libgcc_s.so.1
7fd7dc387000-7fd7dc586000 ---p 00015000 ca:00 14632                      /lib/x86_64-linux-gnu/libgcc_s.so.1
7fd7dc586000-7fd7dc587000 r--p 00014000 ca:00 14632                      /lib/x86_64-linux-gnu/libgcc_s.so.1
7fd7dc587000-7fd7dc588000 rw-p 00015000 ca:00 14632                      /lib/x86_64-linux-gnu/libgcc_s.so.1
7fd7dc588000-7fd7dc66a000 r-xp 00000000 ca:00 1654                       /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fd7dc66a000-7fd7dc869000 ---p 000e2000 ca:00 1654                       /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fd7dc869000-7fd7dc871000 r--p 000e1000 ca:00 1654                       /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fd7dc871000-7fd7dc873000 rw-p 000e9000 ca:00 1654                       /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fd7dc873000-7fd7dc888000 rw-p 00000000 00:00 0 
7fd7dc888000-7fd7dc8da000 r-xp 00000000 ca:00 16804                      /lib/x86_64-linux-gnu/libssl.so.1.0.0
7fd7dc8da000-7fd7dcada000 ---p 00052000 ca:00 16804                      /lib/x86_64-linux-gnu/libssl.so.1.0.0
7fd7dcada000-7fd7dcadd000 r--p 00052000 ca:00 16804                      /lib/x86_64-linux-gnu/libssl.so.1.0.0
7fd7dcadd000-7fd7dcae3000 rw-p 00055000 ca:00 16804                      /lib/x86_64-linux-gnu/libssl.so.1.0.0
7fd7dcae3000-7fd7dcae4000 rw-p 00000000 00:00 0 
7fd7dcae4000-7fd7dcc83000 r-xp 00000000 ca:00 16817                      /lib/x86_64-linux-gnu/libcrypto.so.1.0.0
7fd7dcc83000-7fd7dce82000 ---p 0019f000 ca:00 16817                      /lib/x86_64-linux-gnu/libcrypto.so.1.0.0
7fd7dce82000-7fd7dce9d000 r--p 0019e000 ca:00 16817                      /lib/x86_64-linux-gnu/libcrypto.so.1.0.0
7fd7dce9d000-7fd7dcea8000 rw-p 001b9000 ca:00 16817                      /lib/x86_64-linux-gnu/libcrypto.so.1.0.0
7fd7dcea8000-7fd7dceac000 rw-p 00000000 00:00 0 
7fd7dceac000-7fd7dced4000 r-xp 00000000 ca:00 172584                     /usr/local/rvm/gems/ruby-1.9.3-p194/gems/eventmachine-0.12.10/lib/rubyeventmachine.so
7fd7dced4000-7fd7dd0d3000 ---p 00028000 ca:00 172584                     /usr/local/rvm/gems/ruby-1.9.3-p194/gems/eventmachine-0.12.10/lib/rubyeventmachine.so
7fd7dd0d3000-7fd7dd0d5000 r--p 00027000 ca:00 172584                     /usr/local/rvm/gems/ruby-1.9.3-p194/gems/eventmachine-0.12.10/lib/rubyeventmachine.so
7fd7dd0d5000-7fd7dd0d7000 rw-p 00029000 ca:00 172584                     /usr/local/rvm/gems/ruby-1.9.3-p194/gems/eventmachine-0.12.10/lib/rubyeventmachine.so
7fd7dd0d7000-7fd7dd0d9000 r-xp 00000000 ca:00 156000                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
7fd7dd0d9000-7fd7dd2d9000 ---p 00002000 ca:00 156000                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
7fd7dd2d9000-7fd7dd2da000 r--p 00002000 ca:00 156000                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
7fd7dd2da000-7fd7dd2db000 rw-p 00003000 ca:00 156000                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
7fd7dd2db000-7fd7dd2dd000 r-xp 00000000 ca:00 155966                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
7fd7dd2dd000-7fd7dd4dc000 ---p 00002000 ca:00 155966                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
7fd7dd4dc000-7fd7dd4dd000 r--p 00001000 ca:00 155966                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
7fd7dd4dd000-7fd7dd4de000 rw-p 00002000 ca:00 155966                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
7fd7dd4de000-7fd7dd7a7000 r--p 00000000 ca:00 43369                      /usr/lib/locale/locale-archive
7fd7dd7a7000-7fd7dd8a0000 r-xp 00000000 ca:00 14638                      /lib/x86_64-linux-gnu/libm-2.15.so
7fd7dd8a0000-7fd7dda9f000 ---p 000f9000 ca:00 14638                      /lib/x86_64-linux-gnu/libm-2.15.so
7fd7dda9f000-7fd7ddaa0000 r--p 000f8000 ca:00 14638                      /lib/x86_64-linux-gnu/libm-2.15.so
7fd7ddaa0000-7fd7ddaa1000 rw-p 000f9000 ca:00 14638                      /lib/x86_64-linux-gnu/libm-2.15.so
7fd7ddaa1000-7fd7ddaaa000 r-xp 00000000 ca:00 14625                      /lib/x86_64-linux-gnu/libcrypt-2.15.so
7fd7ddaaa000-7fd7ddcaa000 ---p 00009000 ca:00 14625                      /lib/x86_64-linux-gnu/libcrypt-2.15.so
7fd7ddcaa000-7fd7ddcab000 r--p 00009000 ca:00 14625                      /lib/x86_64-linux-gnu/libcrypt-2.15.so
7fd7ddcab000-7fd7ddcac000 rw-p 0000a000 ca:00 14625                      /lib/x86_64-linux-gnu/libcrypt-2.15.so
7fd7ddcac000-7fd7ddcdb000 rw-p 00000000 00:00 0 
7fd7ddcdb000-7fd7ddcdd000 r-xp 00000000 ca:00 14628                      /lib/x86_64-linux-gnu/libdl-2.15.so
7fd7ddcdd000-7fd7ddedd000 ---p 00002000 ca:00 14628                      /lib/x86_64-linux-gnu/libdl-2.15.so
7fd7ddedd000-7fd7ddede000 r--p 00002000 ca:00 14628                      /lib/x86_64-linux-gnu/libdl-2.15.so
7fd7ddede000-7fd7ddedf000 rw-p 00003000 ca:00 14628                      /lib/x86_64-linux-gnu/libdl-2.15.so
7fd7ddedf000-7fd7ddee6000 r-xp 00000000 ca:00 14665                      /lib/x86_64-linux-gnu/librt-2.15.so
7fd7ddee6000-7fd7de0e5000 ---p 00007000 ca:00 14665                      /lib/x86_64-linux-gnu/librt-2.15.so
7fd7de0e5000-7fd7de0e6000 r--p 00006000 ca:00 14665                      /lib/x86_64-linux-gnu/librt-2.15.so
7fd7de0e6000-7fd7de0e7000 rw-p 00007000 ca:00 14665                      /lib/x86_64-linux-gnu/librt-2.15.so
7fd7de0e7000-7fd7de0ff000 r-xp 00000000 ca:00 14662                      /lib/x86_64-linux-gnu/libpthread-2.15.so
7fd7de0ff000-7fd7de2fe000 ---p 00018000 ca:00 14662                      /lib/x86_64-linux-gnu/libpthread-2.15.so
7fd7de2fe000-7fd7de2ff000 r--p 00017000 ca:00 14662                      /lib/x86_64-linux-gnu/libpthread-2.15.so
7fd7de2ff000-7fd7de300000 rw-p 00018000 ca:00 14662                      /lib/x86_64-linux-gnu/libpthread-2.15.so
7fd7de300000-7fd7de304000 rw-p 00000000 00:00 0 
7fd7de304000-7fd7de4b7000 r-xp 00000000 ca:00 14622                      /lib/x86_64-linux-gnu/libc-2.15.so
7fd7de4b7000-7fd7de6b6000 ---p 001b3000 ca:00 14622                      /lib/x86_64-linux-gnu/libc-2.15.so
7fd7de6b6000-7fd7de6ba000 r--p 001b2000 ca:00 14622                      /lib/x86_64-linux-gnu/libc-2.15.so
7fd7de6ba000-7fd7de6bc000 rw-p 001b6000 ca:00 14622                      /lib/x86_64-linux-gnu/libc-2.15.so
7fd7de6bc000-7fd7de6c1000 rw-p 00000000 00:00 0 
7fd7de6c1000-7fd7de8d9000 r-xp 00000000 ca:00 155313                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9.1
7fd7de8d9000-7fd7dead8000 ---p 00218000 ca:00 155313                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9.1
7fd7dead8000-7fd7deadd000 r--p 00217000 ca:00 155313                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9.1
7fd7deadd000-7fd7deae1000 rw-p 0021c000 ca:00 155313                     /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9.1
7fd7deae1000-7fd7deafd000 rw-p 00000000 00:00 0 
7fd7deafd000-7fd7deb1f000 r-xp 00000000 ca:00 14613                      /lib/x86_64-linux-gnu/ld-2.15.so
7fd7dec02000-7fd7dec03000 rw-p 00000000 00:00 0 
7fd7dec03000-7fd7dec04000 ---p 00000000 00:00 0 
7fd7dec04000-7fd7ded18000 rw-p 00000000 00:00 0 
7fd7ded19000-7fd7ded1a000 ---p 00000000 00:00 0 
7fd7ded1a000-7fd7ded1f000 rw-p 00000000 00:00 0                          [stack:16253]
7fd7ded1f000-7fd7ded20000 r--p 00022000 ca:00 14613                      /lib/x86_64-linux-gnu/ld-2.15.so
7fd7ded20000-7fd7ded22000 rw-p 00023000 ca:00 14613                      /lib/x86_64-linux-gnu/ld-2.15.so
7fffe3620000-7fffe3641000 rw-p 00000000 00:00 0                          [stack]
7fffe3776000-7fffe3777000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted (core dumped) 
```

我认为有一些可能性：

1.  操作系统内核问题。我可以更改一些设置来修复它。
2.  红宝石问题
3.  事件机问题
4.  em-websocket 问题

谁能给我一些建议，谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:33:58.880

首先，请查看[此答案](https://stackoverflow.com/a/1504603/202914)以增加打开文件限制。其次，您不必将服务器和客户端都包装在 Fiber 中并在`EM.run`循环内运行它。

# java - 如何更改检票口 DatePicker 标记？

> ID：12284522
> 
> 赞同：1
> 
> 时间：2012-09-05T15:11:13.800
> 
> 标签：java, date, datepicker, wicket, markup

我正在尝试在 Apache Wicket 中更改 DatePicker 的 HTML 标记。我现在拥有的：

```
public CustomDateTextField(final String id, IModel<T> model, Class<T> type, String modelPath) {
        super(id, model, type, modelPath);
        addDatePicker();

} 
```

而这个使用默认标记。例如，为了初始化这个，我使用这个 Java 代码：

```
CustomDateTextField<?> textField = new CustomDateTextField(field, model.bind(field), pathPrefix + "." + field); 
```

还有这个 HTML 标记：

```
<input wicket:id="date" name="date" type="text"  size="10" maxlength="10" /> 
```

但是对于测试自动化，我希望在 UI 上提供唯一的 ID。我的意思是，如果我现在在 UI 上检查我的 datePicker，我将拥有：

```
<img style="cursor: pointer; border: none;" id="date53Icon" src="resources/org.apache.wicket.extensions.yui.calendar.DatePicker/icon1.gif" alt="" title=""> 
```

但我需要使这个特定的 datePicker 独一无二。例如，我可以添加到 html name="apocalypseDate"，但要做到这一点，我需要以某种方式提取标记。现在我很困惑如何做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:29:54.610

id*始终*是`date53Icon`在`DatePicker#getIconId`. 不幸的是，这个方法是最终的，所以你不能覆盖它。但是你可以设置 textField 的 id：

```
textField.setMarkupId("textField");
textField.setOutputMarkupId(true); 
```

然后图像的 id 将是`textFieldIcon`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:13:29.523

或者，您可以像这样设置名称属性：

```
textField.add(AttributeModifier.replace("name", "fixedValue")); 
```

# .net - 函数调用作为参数

> ID：12284529
> 
> 赞同：0
> 
> 时间：2012-09-05T15:11:30.883
> 
> 标签：.net, multithreading, asynchronous, function-pointers

我正在设计一个小型线程框架，我希望该线程框架对最终代码尽可能透明，这样它几乎不会影响线性代码的语法。我已经考虑了大部分内容，但有些事情让我很痒：如何定义一个参数，以便在我成功地将它们的上下文切换到一个新线程之前不会解析函数调用？

想法：

```
var myTask = new Transaction();
myTask < xyz.abc();
myTask < xyz.def();
...some more code...
var result = waitfornext myTask; 
```

本质上，myTask 会抓取 abc() 和 def() 调用并将它们流水线化到一个线程中，然后 waitfor 运算符将阻塞，直到 myTask 的流水线完成并且依赖于 abc() 和 def() 的代码可以继续。从某种意义上说，这是 .Net 的 await/async 模型，但我想以我自己的方式重新做它，以便它可以在所有 .Net 版本中使用，并且可能被移植到 Java/XYZ 语言。

问题： abc() 和 def() 调用将由编译器在将它们的返回值提供给 < 运算符之前进行评估，但我真正想要的是能够将这些函数调用提供给运算符，这样我就可以推迟它们的执行，直到管道线程准备好这样做。

基本原理：与 async/await 模型不同，您不必修改您的方法以便它们可以被异步化，并且您可以使用任何带有事务处理方法的方法。另一个优点是，通过删除几行代码，您的代码将恢复为线性（并不是说异步模型没有这个优势，但无论如何都值得一提）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:17:08.863

撇开使用`<`运算符将​​参数提供给对象的观察不符合普通读者的期望，您可以使用 lambdas 来表示您的函数。例如，[`Action`](http://msdn.microsoft.com/en-us/library/system.action.aspx)不返回值的委托可以这样使用：

```
Action abs = () => xyz.abc(); // The () => syntax creates a delegate from a piece of code
myTask.AddAction(abs); // Use a named function instead of operator `<`
myTask.AddAction(() => xyz.def()); // You do not need a variable
var result = myTask.Waitfornext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:18:17.053

而不是作为参数传递`xyz.abc()`，它将在那时和那里进行评估，而是传递**可以*成为* `xyz.abc()`**的东西，并修改目标方法以执行“成为”：

改变

```
var evaluatedNow = SomeMethod(GetParameterValue());

...

object SomeMethod(SomeType value)
{
    // Do something with value
} 
```

到

```
var evaluatedLater = SomeMethod(() => GetParameterValue());

...

object SomeMethod(Func<SomeType> valueGetter)
{
    SomeType value = valueGetter();
    // Do something with value
} 
```

# asp.net - ASP.NET 服务器不异步处理页面

> ID：12284530
> 
> 赞同：3
> 
> 时间：2012-09-05T15:11:39.397
> 
> 标签：asp.net, jquery, asynchronous, webforms

我有一个带按钮的页面，我想通过单击按钮异步加载 2 个数据网格。

这是页面的代码，我使用 jquery 调用其他 2 个页面，这将产生我的 html。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Test.aspx.cs" Inherits="Solutions_CashCenter_StockManagement_Test_Test" %>
<asp:Content ID="Content2" ContentPlaceHolderID="cphCenter" Runat="Server">
<style type="text/css">
    #wait {
    position:absolute;
    top:0px;
    right:10px;
    width:200px;
    z-index:1000;
    vertical-align:middle;
    text-align:center;
    background: #febf00;
    display:none;
}
</style>
<script src='<%= ResolveUrl("../../../../Scripts/jquery-1.4.1.js") %>' type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        $('#wait')
        .ajaxStart(function () { $(this).show(); })
        .ajaxStop(function () { $(this).hide(); });

        $('input:button').live('click', loadData);
    });

    function loadData() {
        $.get("Source.aspx", {},
        function (data) {
            $('#a1').html(data);
        },
        "html");

        alert('This alert is asynchronous (1st)');

        $.get("Source2.aspx", {},
        function (data) {
            $('#a2').html(data);
        },
        "html");

        alert('This alert is asynchronous (2nd)');
    }
</script>
<div id="test13">
    <input type="button" id="btnLoad" value="Load" />
</div>
<div id="a1"></div>
<div id="a2"></div>
<div id="wait">Please wait <img src="ajax-loading.gif" /></div>
</asp:Content> 
```

然后我有 2 个 aspx 页面，Source1.aspx 和 Source2.aspx。它们仅包含一个 gridDataView 和 OnLoad 事件中的少量代码。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Source.aspx.cs" Inherits="Solutions_CashCenter_StockManagement_Test_Source" %>
<form runat="server">
<cc1:GridDataView runat="server" ID="gridTest" >
</cc1:GridDataView>
<asp:SqlDataSource ID="dsTest" runat="server" ConnectionString="<%$ ConnectionStrings:WebPortalConnectionString %>"
    ProviderName="<%$ ConnectionStrings:WebPortalConnectionString.ProviderName %>">
</asp:SqlDataSource>
</form> 
```

服务器端：

```
Thread.Sleep(5000);
dsTest.SelectCommand = "SELECT 'test1', 'test2', 'test3'";
this.gridTest.DataSourceID = "dsTest";
this.gridTest.DataBind(); 
```

第二页相同，但网格的数据不同。

我的结果是两个警报同时发生，但是网格一个接一个地加载，即第一个网格在 5 秒后出现，然后第二个网格在 5 秒后出现。那就是服务器实际上并没有同时处理它们。

我做错了什么，我应该如何组织所有人按照我的需要工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:46:10.010

这是因为会话锁定了页面读取。
因此，当一个页面正在加载时，会话会锁定所有其余请求，直到完成并发送页面。

要使其工作，您需要 ether 禁用此页面上的会话，ether 使用默认情况下没有会话锁定的处理程序。

相关问题：

[尝试](https://stackoverflow.com/questions/11325150/trying-to-make-web-method-asynchronous)
[在共享同一会话时处理另一个 Web 应用程序时阻止 Web 方法异步 Web 应用程序](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)
[哪些性能计数器可用于识别 ASP.NET 瓶颈？](https://stackoverflow.com/questions/9056240/what-perfmon-counters-are-useful-for-identifying-asp-net-bottlenecks/9056650#9056650)
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)

# c# - 将两个 LINQ to SQL 实体组合成一个域模型

> ID：12284531
> 
> 赞同：1
> 
> 时间：2012-09-05T15:11:40.460
> 
> 标签：c#, asp.net-mvc-3, design-patterns, linq-to-sql

我开发了一个基于项目管理的 MVC3 应用程序。数据源部分来自现有的时间记录数据库（具有不可更改架构的单独应用程序），部分来自我创建的自定义项目管理数据库。这两个都驻留在同一台服务器上。

我创建了一个允许跨数据库查询的 Linq to Sql Classes 模型。我的数据模型由多个实体组成，但特别是具有相关属性的 Project 和 Job 实体。从域模型的角度来看，这种关系让我觉得它们应该驻留在一个域实体/类中，因为实际上项目是一个只有额外属性的工作。

我的问题是，我应该在应用程序的哪个点/层将这两个数据实体合并为一个域实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:21:47.650

您应该创建一个[数据访问层](https://en.wikipedia.org/wiki/Data_access_layer)，其中包含从您的（两个）数据源中检索的任何/所有数据。然后可以将处理合并数据的实现细节从项目中更高层的业务逻辑中抽象出来。在这种情况下，您将不再直接使用 LINQ-to-SQL 将数据检索到您的代码中 - 它将被推送到您的 DAL 层。

[请参阅本文](http://www.simple-talk.com/dotnet/.net-framework/.net-application-architecture-the-data-access-layer/)中的图表以获取更多参考。

# javascript - 定义 JavaScript“类”的方法之间的区别

> ID：12284533
> 
> 赞同：3
> 
> 时间：2012-09-05T15:11:42.987
> 
> 标签：javascript, prototype, function-prototypes

这两种在 JavaScript 中定义“类”的方法有什么区别？

### 方法一

在构造函数中定义方法：

```
function MyClass()
{
    this.foo = function() { console.log('hello world!'); };
} 
```

### 方法二

在原型上定义方法：

```
function MyClass()
{}

MyClass.prototype.foo = function() { console.log('hello world!'); }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:14:29.460

第一个将在对象的每个实例化上创建一个新的函数对象，第二个将为每个实例分配对原型方法的引用。简而言之：第二种效率更高，因为所有实例都将共享一个函数对象。

这只是原型链的逻辑，您可以*尝试*通过任何对象访问任何内容：

```
var objLiteral = {foo:'bar'}; 
```

访问`objLiteral.foo`JS时会先查看对象本身已经定义的属性，如果找到则返回值。如果 JS 找不到对象本身的属性，它会检查对象的原型，因此：

```
objLiteral.valueOf();//method defined @Object.prototype
objLiteral.valueOf === Object.prototype.valueOf //true 
```

但是，当您使用第一种方法时：

```
function SomeConstructor()
{
    this.methd = function()
    {
        return true;
    }
}
var f = new SomeConstructor();
var g = new SomeConstructor();
f.methd === g.methd;//FALSE! 
```

这表明我们正在处理 2 个单独的函数对象。将函数定义移动到原型中，`f.methd === g.methd;`这将是真的：

```
function SomeConstructor()
{
}
SomeConstructor.prototype.methd = function()
{
    return true;
}
var f = new SomeConstructor();
var g = new SomeConstructor();
f.methd === g.methd;//true! 
```

回应您的评论：

在原型级别定义方法允许您更改特定任务的方法，然后将其*“重置”*回其默认行为。假设您在创建 AJAX 请求的函数中：

```
someObject.toString = function(){ return JSON.stringify(this);}
//when concatinating this object you'll get its json string
//do a lot of stuff
delete (someObject.toString); 
```

JS 将再次检查对象是否具有在其*自身上*`toString`定义的属性，它具有。因此 JS 将删除您分配给该属性的功能。下次调用时，JS 将重新开始扫描原型链，并使用方法的第一次出现（在原型中）。让我们澄清一下：*`toString``toString`*

 *```
function SomeConstructor()
{
}
SomeConstructor.prototype.methd = function()
{
    return true;
}
var f = new SomeConstructor();
var g = new SomeConstructor();
f.methd = function(){return false;};
g.methd();//returns true, still <-- method is gotten from the prototype
f.methd();//returns false <-- method is defined @ instance level
delete (f.methd);
f.methd();//returns true, f doesn't have the method, but the prototype still does, so JS uses that. 
```

甚至更好的是，您甚至可以用另一个原型中的方法替换实例的方法：

```
f.methd = Object.prototype.valueOf;//for as long as you need 
```

最后一个例子是没有意义的，因为 f 已经有了`valueOf`方法：它的继承链看起来像这样：`var f ---> SomeConstructor ---> Object`，让你也可以访问所有 Object.prototype 方法！整洁，不是吗？

这些只是虚拟的例子，但我希望你看到这是使 JS 成为难以置信的灵活（有时太灵活，我必须承认）和富有表现力的语言的特性之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:13:52.903

在第一种情况下，将为每个实例创建函数并将其设置为`foo`对象中的属性。在第二种情况下，它是共享功能。当您调用`obj.prop`then 它在对象本身中查找它，如果它不存在，则它在`proto`对象中查找它等等，它被称为`chain of prototypes`。

例如，此代码提供`foo`：

```
function MyClass() {
  this.foo = function () {};
}

var myVariable = new MyClass();
for (var i in myVariable) if (myVariable.hasOwnProperty(i)) console.log(i); 
```

但这不是：

```
function MyClass() {
}

MyClass.prototype.foo = function () {};

var myVariable = new MyClass();
for (var i in myVariable) if (myVariable.hasOwnProperty(i)) console.log(i); 
```*

# firefox - 如何删除事件监听器？

> ID：12284539
> 
> 赞同：1
> 
> 时间：2012-09-05T15:12:23.590
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我使用 Mozilla 的 Add-on Builder。我正在寻找一种在 contentScript 中删除事件侦听器的方法。我使用端口方式在附加脚本代码和内容脚本代码之间进行通信。

问题是事件“响应”的回调被多次调用。我希望它被调用一次并在事件显示的回调中声明。

有人可以帮我吗？

`main.js`代码：

```
var Panel = require("panel").Panel;
var popup_panel = Panel({
    width: 286,
    height: 340,
    contentURL: require("self").data.url("popup.html"),
    allow: { script: true },
    contentScriptWhen: "end",
    contentScriptFile : [
        require("self").data.url("test.js")
    ],
    onShow: function(){
        this.port.emit("show");
        var pan = this;
        this.port.on("hide", function(){pan.hide();});
    }
});

var Widget = require("widget").Widget;
var widget = Widget({
    id: "mozilla-icon",
    label: "My Mozilla Widget",
    contentURL: "http://www.mozilla.org/favicon.ico",
    panel: popup_panel
});

popup_panel.port.on("get", function(){
    popup_panel.port.emit("response");
}); 
```

内容脚本（`test.js`）：

```
self.port.on("show", function(){
    console.log("show");
    function response(){
        console.log("reponse called");
    }

    self.port.emit("get");
    self.port.once("response", response);
    self.port.removeListener("response", response);
}); 
```

[完整的源代码](https://builder.addons.mozilla.org/package/151202/latest/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:03:00.103

最后我发现了问题。这是附加套件中的错误。在函数 removeListener 的文件 api-utils/lib/content/content-worker.js 中，索引始终为 -1。

indexOf 中给出的参数是事件的名称，它搜索一个函数。这是不正确的。

因此，为了解决问题，我将行替换`let index = listeners[name].indexOf(name);`为`let index = listeners[name].indexOf(callback);`.

**编辑**

该错误已得到修复。它将在 1.10 版本中发布，请参见[此处](https://bugzilla.mozilla.org/show_bug.cgi?id=788981)

# c# - 使用 C# 在 ASP.NET 中创建可单击的 GridView

> ID：12284545
> 
> 赞同：1
> 
> 时间：2012-09-05T15:12:35.670
> 
> 标签：c#, asp.net, gridview

我一直在尝试使用以下代码创建一个可点击的网格视图：

```
using System; 
using System.ComponentModel; 
using System.Configuration; 
using System.Web.UI; 
using System.Web.UI.WebControls; 

namespace CustomGridView 
{ 
 /// <summary> 
 /// Summary description for ClickableGridView 
 /// </summary> 
 public class ClickableGridView : GridView 
 { 
   public string RowCssClass 
   { 
     get 
     { 
       string rowClass = (string)ViewState["rowClass"]; 
       if (!string.IsNullOrEmpty(rowClass)) 
         return rowClass; 
       else 
         return string.Empty; 
     } 
     set 
     { 
       ViewState["rowClass"] = value; 
     } 
   } 

   public string HoverRowCssClass 
   { 
     get 
     { 
       string hoverRowClass = (string)ViewState["hoverRowClass"]; 
       if (!string.IsNullOrEmpty(hoverRowClass)) 
         return hoverRowClass; 
       else 
         return string.Empty; 
     } 
     set 
     { 
       ViewState["hoverRowClass"] = value; 
     } 
   } 

   private static readonly object RowClickedEventKey = new object(); 

   public event GridViewRowClicked RowClicked; 
   protected virtual void OnRowClicked(GridViewRowClickedEventArgs e) 
   { 
     if (RowClicked != null) 
       RowClicked(this, e); 
   } 

   protected override void RaisePostBackEvent(string eventArgument) 
   { 
     if (eventArgument.StartsWith("rc")) 
     { 
       int index = Int32.Parse(eventArgument.Substring(2)); 
       GridViewRowClickedEventArgs args = new GridViewRowClickedEventArgs(Rows[index]); 
       OnRowClicked(args); 
     } 
     else 
       base.RaisePostBackEvent(eventArgument); 
   } 

   protected override void PrepareControlHierarchy() 
   { 
     base.PrepareControlHierarchy(); 

     for (int i = 0; i < Rows.Count; i++) 
     { 
       string argsData = "rc" + Rows[i].RowIndex.ToString(); 
       Rows[i].Attributes.Add("onclick", Page.ClientScript.GetPostBackEventReference(this, argsData)); 

       if (RowCssClass != string.Empty) 
         Rows[i].Attributes.Add("onmouseout", "this.className='" + RowCssClass + "';"); 

       if (HoverRowCssClass != string.Empty) 
         Rows[i].Attributes.Add("onmouseover", "this.className='" + HoverRowCssClass + "';"); 
     } 
   } 
 } 

 public class GridViewRowClickedEventArgs : EventArgs 
 { 
   private GridViewRow _row; 

   public GridViewRowClickedEventArgs(GridViewRow aRow) 
     : base() 
   { 
     _row = aRow; 
   } 

   public GridViewRow Row 
   { 
     get 
     { return _row; } 
   } 
 } 

 public delegate void GridViewRowClicked(object sender, GridViewRowClickedEventArgs args); 
} 
```

来自：[http ://aspadvice.com/blogs/joteke/archive/2006/01/07/14576.aspx](http://aspadvice.com/blogs/joteke/archive/2006/01/07/14576.aspx)

我已将代码放入自定义服务器控件中，以创建我在主项目中引用的 .dll 文件。作为一个简单的测试，我只是在使用这条线

```
<cgv:ClickableGridView ID = "MyGridView" runat = "server" /> 
```

和

```
 MyGridView.DataSource = reader;
    MyGridView.DataBind(); 
```

以查看表格的外观。但是，当我编译主页时，我无法显示任何内容。

这个自定义控件与默认的 gridview 有什么不同吗？上面的代码显示默认的gridview没有问题，但是当使用clickablegridview时，什么都没有显示（没有编译错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:55:30.953

好的，问题似乎在于您不能在已经数据绑定到另一个元素的 sqldatareader 上使用数据绑定/数据源。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T05:38:09.273

请在此处找到解决方案， [可单击 GridView with Postback in ASP.NET 4.0](http://jgvimalan.wordpress.com/2012/09/15/clickable-gridview-with-postback-in-asp-net-4-0/)

# java - Java：抽象泛型类和方法重载顺序

> ID：12284547
> 
> 赞同：0
> 
> 时间：2012-09-05T15:12:42.967
> 
> 标签：java, generics, abstract-class, overloading

看看这堂课

```
abstract class LolCat<T> {
    T execute() throws Err, Arr {
        T lol = doSomething();
        if (lol == null)
            lol = doSomething();

        return lol;
     }

    abstract T doSomething();
    abstract T doSomething() throws Err, Arr;
} 
```

现在我们在某处的任何方法中都有一个匿名实现，像这样的 LolCat

```
final UhmLetsSayCat cat = new ImplLolCat<UhmLetsSayCat>() {
    @Override
    UhmLetsSayCat doSomething() {
        return null; // somehow a UhmLetsSayCat is returned for real sometimes null
    }

    @Override
    UhmLetsSayCat doSomething() throws Err,Arr {
        return null; // really it does right thing, whatever
    }
 }.execute(); 
```

现在我的问题是，为什么对 doSomething() 的第一次调用会转到不抛出 Err、Arr 的方法，但第二次调用（如果 lol 为空）会运行抛出 Err、Arr 的 doSomething 实现。如何区分要运行的方法！？

编辑：假警报。我的天啊。我一定是整个晚上都瞎了，doSomething实际上不是同一个方法名称，它们分别称为queryAll和QuerryAl1，我会找到这样做的人并打他。

EDIT2：谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:16:53.190

您不能在一个类中声明两个具有相同签名的方法。子句、`throws`注释和返回类型不计算在内。

```
abstract T doSomething();
abstract T doSomething() throws Err, Arr; // won't compile 
```

如果编译成功，则您的编译器中存在错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:18:30.627

你甚至不应该编译这个例子（错误：重复方法`doSomething()`）

# c# - Sitecore 电子商务模块 - 折扣/促销代码

> ID：12284549
> 
> 赞同：0
> 
> 时间：2012-09-05T15:12:48.910
> 
> 标签：c#, asp.net, e-commerce, sitecore, sitecore6

我正在开发一个项目，我必须使用 Sitecore 的电子商务模块（和 Sitecore 6.5 rev. 120706 - aka 'Update 5'）来创建一个网上商店。我正在尝试实现的功能之一是通用促销/折扣代码系统 - 客户在结账时输入一个代码，该代码授予“免费送货”、“20% 折扣”等折扣。目前，我正在寻找有关如何实现这一点的一些指导（高级解决方案、一些伪想法、一些审查参考等）。

**概括：**

我正在寻找一种方法来检测用户是否在结帐行的前一阶段输入了促销代码，并确定该促销代码是什么，如果他们这样做了。

**迄今为止的进展：**

我已彻底审查了所有 Sitecore 电子商务服务 (SES)[文档](http://sdn.sitecore.net/Products/SEFE/SES12/Documentation.aspx)，尤其是“SES 订单行扩展”文档（我认为必须对其进行修改/扩展才能完成此任务）。

此外，我已经彻底阅读了 Sitecore 社区文章 [Extending Sitecore E-Commerce - 定价](http://www.sitecore.net/Community/Technical-Blogs/Getting-to-Know-Sitecore/Posts/2011/01/Extending-Sitecore-Ecommerce-Pricing.aspx)，并相信它可能是静态应用折扣的有用指南，但对于动态应用折扣的方式并没有多说。

在查看了这些文档之后，我提出了以下可能的高级解决方案：

1.  我创建了一个模板来表示促销代码，其中包含与促销相关的所有数据（折扣、免费送货、代码等）。
2.  然后，我创建另一个模板（基于 Product Search Group 模板），其中包含指向全局“促销代码”项目文件夹中项目的链接。
3.  接下来，我使用新模板的产品搜索组功能来选择要应用折扣的产品。
4.  在结帐的源代码中，我创建了一个类来检查是否输入了代码，如果是，则以某种方式将其通过其余的结帐过程。*这就是我卡住的地方。*

**更多细节：**

*   不使用cookies
*   没有 GET 请求
*   结账过程中不得更改/创建/删除 Sitecore 数据库中的项目（例如，结账期间不得对折扣项目的字段进行操作以表明已应用折扣）
*   必须在 C# 的范围内

**最后注意事项：**

我将使用我发现/取得的任何更多信息来更新这篇文章。

*除了作为该问题的可行解决方案的任何高级答案之外，我升级了所有相关且详细、发人深省或对我有用且对其他人可能有用的答案；即使你的想法对我没有帮助，如果我认为它会帮助别人，我仍然会升级它。*

提前感谢您的所有帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:36:14.933

我在我的办公室周围发送了这个问题的链接，我的一位没有 Stack Overflow 帐户的同事建议了这个高级解决方案，我代表他发布：

> 如果您不能使用 cookie，那么我要做的就是以某种方式将输入的代码发布回服务器并将其存储在会话中。
> 
> 您可以使用 UpdatePanel 控件或一些 JS

请注意，***这不是我的答案***，我仍在寻找更多潜在的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T20:43:59.103

我正在与另一位过去有使用 SES 经验的同事一起工作，他和我设法`DiscountCode`在命名空间中找到了一个字段`Sitecore.Ecommerce.Orders`。我还没有找到任何实际使用该字段的方法（而且我知道该特定命名空间中没有任何方法），但它确实表明折扣代码功能至少在一小部分中内置于模块。

因为它不在文档中，而且我在 Google 中没有找到与此相关的结果，所以我将保留这个问题，而不是删除它。我会接受另一个答案，因为这是一个很好的解决方案，除非我们在 DLL 中找到更多宝藏，否则我们可能会实施它。

# c# - 为重负载任务设置低线程优先级

> ID：12284550
> 
> 赞同：3
> 
> 时间：2012-09-05T15:12:49.753
> 
> 标签：c#, .net, multithreading, cpu-usage, thread-priority

首先，感谢大家的回复！

我想更具体一点 - 我有一个网站，显示一些当前和历史报告。我希望能够允许用户删除全部或部分历史记录，同时仍在浏览网站。

因此，我想运行一个单独的线程来处理删除数据，但我想给这个线程一个低优先级，这样它就不会使网站变慢或无响应。

我现在正处于设计阶段，我会很感激一些策略建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:21:29.627

你应该没事。降低 CPU 密集型后台任务的优先级以允许来自 GUI 和/或其他应用程序的“正常”响应是更改线程优先级的更好用途之一。

请注意，降低线程优先级不会对除 CPU 之外的任何资源产生巨大影响，但仍然值得使用 IME。

如果您想在运行您的应用程序时继续使用 Firefox、Office、VLC 等，那么，是的，降低 CPU 密集型线程的优先级。然后，您应该能够浏览 SO，听一些专辑或看几部电影，同时等待您的结果最终出来 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:27:29.440

请注意，如果您想更改线程的优先级，您应该确保它是您自己创建的。更改线程池线程的优先级并不好。这意味着避免使用新的任务功能，除非您准备编写一个`TaskScheduler`不使用线程池的程序。

如果适合您的场景，还可以考虑设置流程优先级。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.priorityclass)。这将同样影响线程。

编辑：感谢您提供更多信息。听起来好像您的代码托管在 IIS 中。从[这个答案](https://stackoverflow.com/a/2642789/439024)中，我们可以确认 IIS 使用与[ThreadPool.QueueUserWorkItem](http://msdn.microsoft.com/en-us/library/kbf0f1ct.aspx)相同的线程池- 标准的 .NET 线程池。因此你不能改变线程池线程的优先级；这些线程属于 IIS。

您*可以*创建自己的线程。但似乎不建议尝试像这样在 IIS 中托管后台操作。例如，您永远不知道应用程序池何时会被回收。

*   最好考虑其他几个选项。可能长时间运行的后台操作的最佳解决方案似乎是[工作流服务](http://msdn.microsoft.com/en-us/library/dd456788.aspx)。与 AppFabric Server 一起使用时，这些功能非常强大且听起来好像它们可以处理您的情况。
*   一个更简单的替代方法是将进程移到 IIS 之外。也许用户的操作可以将项目标记为删除，然后可以运行 IIS 之外的计划任务来执行缓慢的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T11:17:31.887

我会使用 ThreadPool.UnsafeQueueUserWorkItem(new WaitCallback( *MyDeleteMethod* ), *itemsTobeDeleted* )

在*MyDeleteMethod*中，您可以考虑在不同的批量中中断删除过程。换句话说，您可以指定每次运行 delete 方法时要删除的最大行数。

如果您担心数据库池中可用连接的数量，您可以通过定义一个静态对象（带有计时器）并将*itemsTobeDeleted*添加到该列表（您需要使用锁进行同步访问）来提高性能。每当计时器 Elapsed 事件触发时，您都可以执行批量删除（例如，您有 5,000 条记录，您将删除它们 500 x 500 ）。

# jquery - 合并来自 json 的 2 个数据响应

> ID：12284551
> 
> 赞同：1
> 
> 时间：2012-09-05T15:12:53.677
> 
> 标签：jquery, json, twitter

如果我为了争论而这样做：

```
$.when(
    $.getJSON('http://myUrlOne/?format=json'),
    $.getJSON('http://myUrlTwo/?format=json')
).then(function () {
    // how can i merge the response from both json requests before processing them
}); 
```

这两个 url 都在 twitter api 上，但一个是关键字搜索，一个是常规用户时间线调用。

我正在尝试修改 twitter 插件，通过搜索 @username（在第二个 json 请求中）显示用户名时间线（在第一个 json 请求中）和 @username 提及

请参阅我要修改的当前函数以调用 2 个 url 并在处理数据之前合并数据：

```
 $.getJSON(build_api_url(), function(data){
    var tweets = $.map(data.results || data, extract_template_data);
    tweets = $.grep(tweets, s.filter).sort(s.comparator).slice(0, s.count);
    $(widget).trigger("tweet:retrieved", [tweets]);
  }); 
```

这不起作用：

```
 $.when(
  $.getJSON(build_api_url(),
  $.getJSON(build_user_url()
  ).done( function(json1, json2) {
 var data = $.extend(json1, json2)
      // json1 and json2 represent the returned json, so just combine them as needed here
      var tweets = $.map(data.results || data, extract_template_data);
      tweets = $.grep(tweets, s.filter).sort(s.comparator).slice(0, s.count);
      $(widget).trigger("tweet:retrieved", [tweets]);
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:17:29.833

```
$.when(
    $.getJSON('http://myUrlOne/?format=json'),
    $.getJSON('http://myUrlTwo/?format=json')
).then(function (a1, a2) {
    // First get the two objects from json
    // (you could check statusText in a1[1] if desired) :
    var obj1 = JSON.parse(a1[2].responseText);
    var obj2 = JSON.parse(a2[2].responseText);
    // Then, if you want to "merge" them you can do this :
    var obj = obj1;
    for (var key in obj2) {
        obj[key] = obj2[key]; // this will replace obj1[key] you have to know how you want to merge
    }
    // use obj
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:18:55.810

我将从探索[jQuery.extend()](http://api.jquery.com/jQuery.extend/)开始。类似的东西`$.extend(json1, json2)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:19:12.843

您可能希望使用`$.when().done()`这样的方法：

```
$.when(
    $.getJSON('http://myUrlOne/?format=json'),
    $.getJSON('http://myUrlTwo/?format=json')
).done( function(json1, json2) {
    // json1 and json2 represent the returned json, so just combine them as needed here
}); 
```

当然，如果您需要处理请求失败，那么您需要使用`$.when().then()`. 您没有在示例中显示使用失败回调，这就是我建议`done()`而不是`then()`.

# php - 寻找一种相对轻松的方式来卸载从我的应用程序发送的电子邮件通知

> ID：12284553
> 
> 赞同：0
> 
> 时间：2012-09-05T15:12:56.070
> 
> 标签：php, zend-framework, email, web-applications, smtp

我有一个基于 zend 构建的网络应用程序，可以为不同的事件（注册、有人关注你等）发送电子邮件通知。它正在使用php邮件。电子邮件作为在各种事件中触发的动作钩子的一部分发送出去。我正在寻找将接管电子邮件发送的服务的建议。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:16:53.670

亚马逊 SES 或[Sailthru](https://www.sailthru.com/)

我确实喜欢saithru，他们可以托管您的电子邮件模板、每封已发送电子邮件的日志（以便您可以重新发送）、打开率等。这是一个白名单服务，他们的PHP API 易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:26:37.773

[Postmark](http://www.postmarkapp.com)很不错，API 很强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:28:52.747

我们在我们的商店使用[http://sendgrid.com/](http://sendgrid.com/)。

# html - 页面填充窗口，内容填充空白

> ID：12284561
> 
> 赞同：1
> 
> 时间：2012-09-05T15:13:17.553
> 
> 标签：html, iframe, height, footer

我目前正在[http://grapevineiow.org/m_inspireblog.html](http://grapevineiow.org/m_inspireblog.html)建立一个网站。这个网站有页眉和页脚。我在上面链接到的页面以`iframe`. 显然，博客太长了，无法作为一个连续的内容放入页面，因此需要滚动条。

然而，这就是有问题的地方。我想在博客上保留滚动条（以便用户可以滚动浏览它），但我希望页面完全填满窗口，因此页眉和页脚占用所需的最小空间。页眉很好，但页脚是个问题。

我试过了：

*   在 CSS中设置`body`and`html`的高度。`100%`
*   `content`在 CSS中设置的高度`100%`，但这使得`content`填充窗口。
*   `height:auto 0`像在 CSS 中一样设置页脚样式。

...但这些都没有奏效。

如果可能的话，我希望能够只使用 CSS 来解决这个问题，但如果需要，我愿意使用 HTML。我想避免使用Javascript。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:54:49.180

如果您知道页眉和页脚的高度，则可以通过在中间区域设置顶部和底部来实现这一点，如下所示：

```
<style type="text/css">
html, body{
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}
#header{
    position: absolute;
    top: 0;
    width: 100%;
    height: 100px;
    background: #f09;
}
#content{
    position: absolute;
    width: 100%;
    top: 100px;
    bottom: 100px;
    background: #f90;
}
#content iframe{
    width: 100%;
    height: 100%;
}
#footer{
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100px;
    background: #90f;
}
</style>

<div id="header"></div>
<div id="content">
    <iframe src="http://en.wikipedia.org/wiki/Butterfly"></iframe>
</div>
<div id="footer"></div> 
```

# php - 如何通过套接字在 PHP 和 C++ 应用程序之间进行通信？

> ID：12284565
> 
> 赞同：1
> 
> 时间：2012-09-05T15:13:24.187
> 
> 标签：php, c++, sockets, ipc

如何使用套接字将消息从 PHP 客户端发送到 C 服务器。我需要简单的代码，一个 TCP 连接。

在 Windows 上客户端是用 PHP 编写的，服务器是用 C 编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:38:22.723

[请参阅此处](http://www.php.net/manual/en/function.socket-create.php)的第一个示例。

```
$socket = socket_create(AF_UNIX, SOCK_DGRAM, 0);  //AF_UNIX - it's important!
$socket_file = dirname(__FILE__) . '/socket_file.sock';
socket_bind($socket, $socket_file);
socket_recvfrom($socket, $some_buf, $input_buf_size, 0, $from);
socket_sendto($socket, $some_buf, $some_buf_len, 0, $from); 
```

[更多信息](http://php.net/manual/en/book.sockets.php)。

# cucumber - RubyMine - 转义序列太短（ArgumentError）

> ID：12284568
> 
> 赞同：1
> 
> 时间：2012-09-05T15:13:32.567
> 
> 标签：cucumber, rubymine

在 ruby​​mine 4.5.3 中，我尝试运行一个场景：

```
Scenario: I want to buy icecream, then watch a movie
  Given I am at a mall
  When I buy icecream
  Then I should be allowed to watch a movie 
```

该场景包含一个逗号，因此当我右键单击并点击播放时，元素名称过滤器如下所示：

```
I want to buy icecream\, then watch a movie 
```

但后来我得到了这个堆栈跟踪：

```
too short escape sequence (ArgumentError)
C:/ruby193/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/cli/options.rb:194:in `block (2 levels) in parse!'
C:/ruby193/lib/ruby/1.9.1/optparse.rb:1360:in `call'
C:/ruby193/lib/ruby/1.9.1/optparse.rb:1360:in `block in parse_in_order'
C:/ruby193/lib/ruby/1.9.1/optparse.rb:1347:in `catch'
C:/ruby193/lib/ruby/1.9.1/optparse.rb:1347:in `parse_in_order'
C:/ruby193/lib/ruby/1.9.1/optparse.rb:1341:in `order!'
C:/ruby193/lib/ruby/1.9.1/optparse.rb:1432:in `permute!'
C:/ruby193/lib/ruby/1.9.1/optparse.rb:1453:in `parse!'
C:/ruby193/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/cli/options.rb:119:in `parse!'
C:/ruby193/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/cli/configuration.rb:25:in `parse!'
C:/ruby193/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:55:in `configuration'
C:/ruby193/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:63:in `run_drb_client'
C:/ruby193/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:34:in `execute!'
C:/ruby193/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:20:in `execute'
C:/ruby193/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/bin/cucumber:14:in `<top (required)>'
C:/ruby193/bin/cucumber:23:in `load'
C:/ruby193/bin/cucumber:23:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>' 
```

为了解决这个问题，我更改了元素名称过滤器，并删除了反斜杠：

```
I want to buy icecream, then watch a movie 
```

现在场景运行正常。

难道我做错了什么？

编辑：刚刚确认双引号也会出现同样的问题

编辑：确认问题仍然存在于 RubyMine 4.5.4

# django - 生成不同的问题（Django 教程修改）

> ID：12284570
> 
> 赞同：0
> 
> 时间：2012-09-05T15:13:42.770
> 
> 标签：django

我想修改 Django 提供的教程投票。我有兴趣在每次用户选择答案时改变显示的问题。具体来说，从 .txt 文件中随机抽取问题，但保持答案选择相同。

我可以使用教程中的模型还是必须创建一个新模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:12:39.433

> 嗨，欢迎来到 SO。您可能希望查看此页面...[如何在 SO 上提出问题](https://stackoverflow.com/questions/how-to-ask)- 最好在此处提出具体问题而不是一般问题，并展示您迄今为止尝试过的内容。

话虽如此，这听起来不像是 django 的模型类的工作，这些模型类的设计目的是

> 模型的每个属性代表一个数据库字段。

[来源](https://docs.djangoproject.com/en/dev/topics/db/models/)

您最好使用现有的投票教程模型，但要构建一个视图，该视图采用文本文件并将其加载到数据库中。例如[像这样的 SO post](https://stackoverflow.com/questions/4086630/django-import-csv-file-and-handle-clash-of-unique-values-correctly)，[这](https://stackoverflow.com/questions/3506678/in-django-how-do-i-select-100-random-records-from-the-database)可能会让你开始。

# sql - 从 Excel 中的主工作表过滤到新工作表

> ID：12284571
> 
> 赞同：0
> 
> 时间：2012-09-05T15:13:45.187
> 
> 标签：sql, vba, excel, populate

我想知道这是否可以用excel。我有一个员工列表，其中有多个列计算他们在我公司的生产。它是一个包含大约 40 个名称的列表，并且有大约 10 列不同的任务，这些任务被统计以确定生产力。这些人被分成不同的团队，我用团队标记了他们的名字。例如，如果 joe smith 从事客户服务，他的名字会写为 CSR-Joe Smith。我希望能够一遍又一遍地使用这个 Excel 表格，这样我就可以简单地运行这个主报告并将数据放入一张表格中，以便为每个团队填充不同的表格。有没有办法通过查看我添加到每个人姓名的团队标签并从员工列表中提取同一团队中的团队成员来做到这一点？我在 excel 2010 上工作，并且对 excel 中的 VB 和 C 编码有一些了解，但没有大量的经验。我还想提取每列中每个团队成员的值。

这是一个例子，如果我的话没有意义，每个员工都有这样的一行。

```
name          status1   status 2    status 3    status 4    status 5
CSR-Joe Smith   251       358          12          58           9 
```

我应该提到，这些数据是从我想从 MS SQL 管理工作室中提取并复制到 excel 中的 SQL 查询中收集的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:57:37.873

综上所述，我对此类问题的解决方案及相关：

尽可能解决数据库中的数据库问题；）

在数据库中进行连接、选择和过滤比在 excel 中容易得多。

如果您必须在 excel 中执行此操作，请查看**subsum**、**pivotTable**或**vlookup**是否可以帮助您，因为这些很可能会帮助您。

当您开始尝试使用 vba 解决数据库问题时，请注意——通常会有更好的方法，或者至少应该有。当您拥有良好的数据源（例如 sql）时，这绝对应该是您第一次尝试在 sql 中创建更好的视图或表。

此外，您可以直接将**.odc**连接文件与 excel 一起使用。通过打开一个，您将创建一个新的工作簿，并将您的连接作为工作表打开。

# c# - WCF 数据服务集合加载

> ID：12284575
> 
> 赞同：1
> 
> 时间：2012-09-05T15:13:53.020
> 
> 标签：c#, asp.net-mvc-3, entity-framework, wcf-data-services

给定以下示例模型（它反映了我的实体框架实体，为简洁起见省略了属性）：

```
public class Company
{
    public string Name { get; set; }
    public IList<Department> Departments { get; set; }
}

public class Department
{
    public string Name { get; set; }
    public IList<Employee> Employees { get; set; }
}

public class Employee
{
    public string Name { get; set; }
} 
```

我正在使用我的 Web UI 中的 WCF 数据服务来获取这些实体。我基本上追求的是一种最佳实践/更优雅的加载方式，每一个`Company`都将有每一个响应，每`Department`一个都将各自`Employee`急切地加载。

目前我的代码看起来像这样：

```
var proxy = new MyWCFDataService(url);

var companies = proxy.Companies;

foreach (var company in companies)
{
    proxy.LoadProperty(company, "Departments");

    foreach (var dept in company.Departments)
    {
        proxy.LoadProperty(dept, "Employees");
    }
} 
```

如果我**必须**执行上述操作，那么我想在服务操作中执行此操作，这样我就可以从我的 UI 控制器中得到这个意大利面条的混乱。我试图用以下方法做到这一点：

```
[WebGet]
public IQueryable<Company> GetCompanies()
{
    var companies = this.CurrentDataSource.Companies.Include("Departments");

    return companies;
} 
```

我的`Company`收藏恢复得很好，但我又没有`Department`收藏，它只是一个空列表。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:17:22.460

```
var companies = proxy.Companies.Expand("Departments"); 
```

# vb.net - 在 VB.Net Winforms 中是否有防止子控件在父控件之外绘制的通用解决方案

> ID：12284580
> 
> 赞同：-1
> 
> 时间：2012-09-05T15:14:14.293
> 
> 标签：vb.net, winforms

我有一个包含 1...N 个子控件的父控件。当我水平滚动父控件时，子控件也会滚动。

我想将子控件剪辑到父控件的边界。当我将剪辑区域设置为父控件的边界时，子控件绘制仍然呈现在父控件之外。

有没有办法将子控件剪辑到父控件的边界？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:27:02.070

我现在有剪辑工作 - 但可能不是最佳实践方法。我使用的方法如下。

但我想知道 Paint 事件处理程序中 UserControl.Region 属性与同一处理程序中的 Graphics.SetClip 和 Graphics.Clip 的使用情况。UserControl.Region 属性似乎运行良好 - 但 Graphics.SetClip 和 Clip 没有效果。

我的猜测是 UserControl.Region 属性使用控件坐标，而 Graphics.SetClip 和 Clip 期望不同的坐标系。这个对吗？

方法：

1.  在控制坐标中计算一个剪切矩形。在我的情况下，我想将我的自定义控件剪辑到 DevExpress XtraChart XYDiagram（这样我的控件就不会溢出绘图区域之外）。

2.  在我的控件事件处理程序中，将 Region 属性设置为在步骤 1 中计算的剪切矩形。

我也很好奇在绘制事件期间最小化闪烁的方法。任何意见将不胜感激。

# macos - cx k 不会杀死 mac emacs 中的缓冲区

> ID：12284581
> 
> 赞同：-1
> 
> 时间：2012-09-05T15:14:15.703
> 
> 标签：macos, emacs

我一直在这个 repo [https://github.com/technomancy/emacs-starter-kit](https://github.com/technomancy/emacs-starter-kit)的 mac 中使用 emacs， 它帮助我轻松上手。但问题是，每当我尝试使用`C-x k`它杀死缓冲区时，它都会从缓冲区中隐藏文件，但它仍然可用。当我这样做时，`C-x b`我可以再次看到它，从中进行选择。

它出什么问题了？

ispell 与它有什么关系吗？但我已经安装了 ispell 使用`brew install ispell`

请让我知道我该如何解决这个问题。谢谢！

如下所示，显示 Cx k 绑定的内容，这是输出：

```
C-x k runs the command ido-kill-buffer, which is an interactive
compiled Lisp function in `ido.el'.

It is bound to C-x k.

(ido-kill-buffer)

Kill a buffer.
The buffer name is selected interactively by typing a substring.
For details of keybindings, see `ido-switch-buffer'. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:07:52.173

这是因为 starter-kit 设置`ido-use-virtual-buffers`为 t。缓冲区实际上已被杀死，但无论如何它都会由 ido 显示，作为最近使用的缓冲区的一部分，并且可以快速恢复。

如果你不喜欢它，只是

```
(setq ido-use-virtual-buffers nil) 
```

# match - 如果标题不完全匹配，我如何从 MediaWiki API 获取数据？

> ID：12284582
> 
> 赞同：1
> 
> 时间：2012-09-05T15:14:16.147
> 
> 标签：match, mediawiki, sql-like, wikipedia-api

我正在尝试从不同的 Wikipedia 页面获取一些信息，但在 MediaWiki 结果中，如果我在查询中使用的标题与页面标题不完全匹配，我不会从页面获取数据。有没有办法让这个标题最匹配？可能类似于 SQL LIKE 运算符？

这是一个例子。使用titles="Sankt-Jacobikirche" 我没有得到我正在寻找的页面。

[http://nl.wikipedia.org/w/api.php?action=query&prop=extracts|info&titles=Sankt-Jacobikirche&exintro=1&inprop=url](http://nl.wikipedia.org/w/api.php?action=query&prop=extracts|info&titles=Sankt-Jacobikirche&exintro=1&inprop=url)

有时至少我得到了正确的标题，这样我就可以提出新的请求并获得正确的页面，例如titles="Sankt-Jacobikirche_(Hamburg)"

[http://nl.wikipedia.org/w/api.php?action=query&prop=extracts|info&titles=Sankt-Jacobikirche_(Hamburg)&exintro=1&inprop=url](http://nl.wikipedia.org/w/api.php?action=query&prop=extracts|info&titles=Sankt-Jacobikirche_(Hamburg)&exintro=1&inprop=url)

并获得带有我在 REDIRECT 或 Normalized 部分中获得的标题的正确页面，就像使用正确的标题一样：titles="Sint-Jacobikerk (Hamburg)"

如何从 title="Sankt-Jacobikirche" 开始获得最终数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-01T10:08:04.603

您没有说您要达到的目标，但正如 svick 所说，猜测标题是一个例外，而不是规则。

您需要首先通过[标题搜索 API](https://www.mediawiki.org/wiki/API:Opensearch)或[全文搜索 API](https://www.mediawiki.org/wiki/API:Search)获得正确的标题。

# login - 容器重启后所有 glassfish 登录模块都停止工作

> ID：12284583
> 
> 赞同：0
> 
> 时间：2012-09-05T15:14:17.873
> 
> 标签：login, glassfish, glassfish-3, jdbcrealm

这是我遇到的[另一个登录模块问题](https://stackoverflow.com/questions/12110742/jdbcrealm-stopped-working-after-glassfish-reboot)的扩展版本。我诊断出一些更重要的细节，这些细节鼓励我开始新的话题。Glassfish 重新启动后，所有登录模块都停止工作。更有趣的是，Glassfish 报告了正确加载的模块。

```
[#|2012-09-05T16:40:59.698+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.RealmsManager;MethodName=createRealms;|Initializing configured realms from SecurityService in Domain.xml....|#]

[#|2012-09-05T16:40:59.710+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.file.FileRealm;MethodName=init;|FileRealm : file={glass_home}/glassfish/domains/domain1/config/admin-keyfile|#]

[#|2012-09-05T16:40:59.710+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.file.FileRealm;MethodName=init;|FileRealm : jaas-context=fileRealm|#]

[#|2012-09-05T16:40:59.711+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.file.FileRealm;MethodName=loadKeyFile;|Reading file realm: {glass_home}/glassfish/domains/domain1/config/admin-keyfile|#]

[#|2012-09-05T16:40:59.713+0200|INFO|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;|SEC1115: Realm [admin-realm] of classtype [com.sun.enterprise.security.auth.realm.file.FileRealm] successfully created.|#]

[#|2012-09-05T16:40:59.713+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.RealmConfig;MethodName=createRealms;|Configured realm: admin-realm|#]

[#|2012-09-05T16:40:59.714+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.file.FileRealm;MethodName=init;|FileRealm : file={glass_home}/glassfish/domains/domain1/config/keyfile|#]

[#|2012-09-05T16:40:59.714+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.file.FileRealm;MethodName=init;|FileRealm : jaas-context=fileRealm|#]

[#|2012-09-05T16:40:59.715+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.file.FileRealm;MethodName=loadKeyFile;|Reading file realm: {glass_home}/glassfish/domains/domain1/config/keyfile|#]

[#|2012-09-05T16:40:59.715+0200|INFO|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;|SEC1115: Realm [file] of classtype [com.sun.enterprise.security.auth.realm.file.FileRealm] successfully created.|#]

[#|2012-09-05T16:40:59.715+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.RealmConfig;MethodName=createRealms;|Configured realm: file|#]

[#|2012-09-05T16:40:59.717+0200|INFO|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;|SEC1115: Realm [certificate] of classtype [com.sun.enterprise.security.auth.realm.certificate.CertificateRealm] successfully created.|#]

[#|2012-09-05T16:40:59.718+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.RealmConfig;MethodName=createRealms;|Configured realm: certificate|#]

[#|2012-09-05T16:40:59.757+0200|FINEST|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.jdbc.JDBCRealm;MethodName=init;|JDBCRealm : jaas-context= jdbcRealm, datasource-jndi = jdbc/mysql-zus, db-user = null, digest-algorithm = MD5, encoding = Hex, charset = UTF-8|#]

[#|2012-09-05T16:40:59.758+0200|INFO|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;|SEC1115: Realm [ShibUserPassAuth] of classtype [com.sun.enterprise.security.auth.realm.jdbc.JDBCRealm] successfully created.|#]

[#|2012-09-05T16:40:59.758+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.RealmConfig;MethodName=createRealms;|Configured realm: ShibUserPassAuth|#]

[#|2012-09-05T16:40:59.758+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=1;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.realm.RealmConfig;MethodName=createRealms;|Default realm is set to: ShibUserPassAuth|#]

[#|2012-09-05T16:40:59.762+0200|INFO|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security|_ThreadID=1;_ThreadName=Thread-2;|SEC1011: Security Service(s) Started Successfully|#] 
```

但在基本身份验证期间，我无法使用任何安全领域。我用新用户尝试了自定义 jdbcRealm 和预配置的 fileRealm 它最终得到了这个：

```
javax.security.auth.login.LoginException: No LoginModules configured for jdbcRealm
at javax.security.auth.login.LoginContext.init(LoginContext.java:273) 
```

还有这个

```
javax.security.auth.login.LoginException: No LoginModules configured for fileRealm
at javax.security.auth.login.LoginContext.init(LoginContext.java:273) 
```

此外，我什至不能使用更复杂的 asadmin 命令，因为我在 server.log 中收到“未经授权的错误登录名或密码”

```
No LoginModule configured for fileRealm 
```

我检查了 LoginContext 实现，它看起来像这样

```
AppConfigurationEntry[] entries = config.getAppConfigurationEntry (name); 
```

一直走错路，返回null。

我不手动操作配置文件。我可以以某种方式破坏它们以阻止 LoginModules 吗？

上面的 ConfigurationEntry 正在读取哪个配置文件？

在这个不幸的 MySQL 数据库重启问题发生之前。Glassfish 连接池的可用空间比数据库允许的要多。从数据库中删除连接后，更改适当的连接号后，我重新启动了容器，一切都崩溃了。

login.conf 存在于域目录中，看起来没问题。

希望得到帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:32:29.987

在她之前解释凯瑟琳泽塔琼斯和丽莎明奈利，我会说

```
"and All that JAAS...". 
```

第三方应用程序之一正在为 JAAS 模块加载它自己的 login.conf 文件，这会破坏所有 Glassfish 登录模块。在加载辅助配置文件时容器重新启动后会出现这种情况。有趣的是，Glassfish 能够正确加载它自己的文件，在日志中炫耀......然后覆盖它的恶意配置。注意你的配置文件！

# makefile - 我可以只获得 GNU make 中的第二个先决条件吗？

> ID：12284584
> 
> 赞同：32
> 
> 时间：2012-09-05T15:14:18.400
> 
> 标签：makefile, gnu-make

> **可能重复：**
> [如何使用 Makefile 中的自动变量获取第二个依赖文件？](https://stackoverflow.com/questions/11424204/how-to-get-the-second-dependency-file-using-automatic-variables-in-a-makefile)

我正在使用 GNU make，并且正在使用诸如 at 等自动变量`$<`。`$^`我知道这`$<`只是第一个先决条件，并且`$^`是所有先决条件。 **有没有办法获得第二个先决条件？**

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-09-05T15:27:42.820

假设您的先决条件是常规令牌，

```
echo $(word 2,$^) 
```

我经常发现自己给第一个论点一个特殊的位置，并使用

```
echo $(filter-out $<,$^) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:28:40.367

我能想出的最好的方法是使用`echo $^ | cut -f2 -d' '`, à la:

```
output.txt: a.txt b.txt
    cat $< | ./something `echo $^ | cut -f2 -d' '` > $@ 
```

我很想听到比这更好的答案。:)

# r - ggplot2的图例标签问题

> ID：12284590
> 
> 赞同：0
> 
> 时间：2012-09-05T15:14:30.993
> 
> 标签：r, graph, ggplot2

这是一个挑剔的问题，但我无法在图表的图例中显示线条的颜色。在“Sabry Lee”旁边的框中，颜色应该是蓝色的，但出于某种原因它是空白的。

这是数据：

```
df2 <- structure(list(STRING = c("1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC"), time = structure(c(13239, 13422, 
13483, 13545, 13573, 13604, 13634, 13665, 13695, 13726, 13757, 
13787, 13818, 13848, 13879, 13910, 13939, 13970, 14000, 14031, 
14061, 14092, 14123, 14153, 14184, 14214, 14245, 14276, 14304, 
14335), class = "Date"), ee_qty = c(NA, 2302, 3434, 1800, 2766, 
4408, 6314, 2860, 2476, 1572, 4950, 1812, 14100, 7591, NA, NA, 
11823, NA, NA, 11829, 3836, 5378, 4804, 4356, 3655, 5955, 1345, 
4717, 8854, 11494), ee_amt = c(NA, 33815.88, 60107.4, 66279.2, 
66814.46, 129042.18, 151649.49, 58576.2, 61984.58, 61782, 102648.16, 
67844.4, 362371.82, 159274.66, NA, NA, 285847.62, NA, NA, 258045.26, 
82306.74, 119702.9, 113514.6, 118765.82, 86298.66, 155659.83, 
40246.14, 134675.59, 236084.63, 256467.56), elite_qty = c(NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, 1281, 3037, 2141, 1764, 1661, 
1838, 2780, 2627, 2498, 3137, 2238, 2470, 1107, 1886, 844, 798, 
NA, 1588, 1919, 2603), elite_amt = c(NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, 34956.08, 48618.37, 58880.59, 49141.23, 49067.42, 
40105.91, 89717.69, 78612.5, 40608.3599999999, 65893.38, 33706.66, 
77191.76, 45096.9, 55742.83, 29993.7600000000, 27171.22, NA, 
1427.23, 2466.64, 54500.19), Sabry_Qty = c(596, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA), Sabry_amt = c(17761.06, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), depo_qty = c(NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
902, 319, 883, 597, 854, 710, 911, 573, 447, 857, 795, 997, 822
), depo_amt = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, 31011.68, 13556.65, 32134.72, 23106.94, 36681.95, 
30220.74, 38051.93, 24941.85, 19337.46, 31360.4, 30182.18, 41363.71, 
34419.34), tyc_qty = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, 58, 116, 136), tyc_amt = c(NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, 3103.73, 7538.71, 7497.34), string2 = c("1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC")), .Names = c("STRING", 
"time", "ee_qty", "ee_amt", "elite_qty", "elite_amt", "Sabry_Qty", 
"Sabry_amt", "depo_qty", "depo_amt", "tyc_qty", "tyc_amt", "string2"
), row.names = c(NA, 30L), class = "data.frame") 
```

以及产生情节的代码：

```
p = ggplot(df2)
p = p + 
    geom_line(aes(time, ee_amt, colour="ee_amt"), size = 2) + 
    geom_point(aes(time, ee_amt, colour="ee_amt"), size = 2) + 
    geom_line(aes(time, elite_amt, colour="elite_amt"), size = 2) + 
    geom_point(aes(time, elite_amt, colour="elite_amt"), size = 2) +
    geom_line(aes(time, Sabry_amt, colour="Sabry_amt"), size = 2) + 
    geom_point(aes(time, Sabry_amt, colour="Sabry_amt"), size = 2) +
    geom_line(aes(time, depo_amt, colour="depo_amt"), size = 2) + 
    geom_point(aes(time, depo_amt, colour="depo_amt"), size = 2) +
    geom_line(aes(time, tyc_amt, colour="tyc_amt"), size = 2) + 
    geom_point(aes(time, tyc_amt, colour="tyc_amt"), size = 2) +
    ylab("Revenue (Dollars)") + 
    xlab("Time") + 
    labs(colour = "") + 
    opts(legend.position="right") + 
    opts(title = "Stuff") +
    scale_color_manual(name ="", 
                       values = c("red", "green", "blue", "purple", "yellow"),                 
                       breaks=c("ee_amt", "elite_amt", "Sabry_Amt", "depo_amt", "tyc_amt"), 
                       labels=c("Eagle Eyes", "E-lite", "Sabry Lee", "Depo", "TYC")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:31:27.383

你做错了。首先`melt`是您的数据，然后使用它来`ggplot`为您完成工作，这样您就不必对`geom_line`and进行 5 次调用`geom_point`。而且从关卡中获得休息通常更安全，打字更少，更不容易出错。

```
library(reshape2)

df2M <- melt(df2, measure.vars = c("ee_amt", "elite_amt", "Sabry_amt", "depo_amt", "tyc_amt"))

ggplot(df2M, aes(time, value, colour = variable, group = variable)) + 
  geom_line(size = 2) +
  geom_point(size = 2) +
 labs(colour = "", x = "Time", y = "Revenue (Dollars)") + 
 opts(legend.position="right", title = "Stuff") +
  scale_color_manual(name ="", values = c("red", "green", "blue", "purple", "yellow"), 
                     breaks= levels(df2M$variable), 
                     labels=c("Eagle Eyes", "E-lite", "Sabry Lee", "Depo", "TYC")) 
```

![在此处输入图像描述](../Images/98cef612be878d9fd571a6c2204f9c3c.png)

# google-chrome - 删除 Chrome 扩展程序窗口中的浏览器工具栏

> ID：12284597
> 
> 赞同：3
> 
> 时间：2012-09-05T15:15:03.473
> 
> 标签：google-chrome, browser, google-chrome-extension, toolbar

在开发 chrome 扩展程序时，当扩展程序显示为新的浏览器窗口时，所有浏览器工具栏（返回、刷新、书签等）都是可见的。我见过使用这种方法打开的扩展，但没有工具栏。有谁知道如何删除浏览器工具栏并显示一个精简的窗口？

例如，查看 Hootsuite 扩展。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T16:10:45.923

1.  Chrome API：（[`chrome.windows.create({type:'popup', url:'...'});`](http://developer.chrome.com/extensions/windows.html#method-create)请参阅文档了解更多选项，例如宽度、高度等）。
    要使用此 API，您需要在清单文件中指定“tabs”权限。
2.  Chrome 扩展 API 是 JavaScript 的超集。在 JavaScript 中，[`window.open`](https://developer.mozilla.org/en-US/docs/DOM/window.open)可以用来创建一个窗口。在 Chrome 扩展程序中，这也是可能的。Hootsuite 也使用这种方法，如源代码所示：

    ```
    window.open(address, "hootlet",'scrollbars=0,toolbar=0,location=0,resizable=0,status=0,width=550,height=280'); 
    ```

# javascript - jQuery find() Issue

> ID：12284604
> 
> 赞同：1
> 
> 时间：2012-09-05T15:15:31.497
> 
> 标签：javascript, jquery

I have the following Code

```
var page = '<h1>Hello!</h1><p>FOO</p><span class="username">this is ur name</span><p>sample text</p>'; 
```

when I alert `$(page).html()` i get Hello! and when I wrap the contents of the page in a div and alert `$(page).html()` I get the whole html contents.

What I am trying to accomplish here is I have a page string with html template and I am trying to find a class `username` in it and i am getting `null`.

I am confused with this happens

Here is a small fiddle of the issue

[http://jsfiddle.net/6TSuq/1/](http://jsfiddle.net/6TSuq/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:19:07.407

When you call `$(page)` you construct a jQuery object which contains 4 elements; for each of the HTMLElements that aren't nested in your string.

```
console.log($(page).map(function () {
   return this.nodeName;  
}).toArray());

// ["H1", "P", "SPAN", "P"] 
```

​ `html()` returns the `innerHTML` of the **first** element in this jQuery object; which is why you only see "Hello!".

To find the `.username` you should use the `filter()` method, which searches within the jQuery object for elements which match the given selector.

```
alert($(page).filter('.username').text()); // "this is ur name", kthx. 
```

See your updated fiddle here; [http://jsfiddle.net/6TSuq/15/](http://jsfiddle.net/6TSuq/15/)

Bare in mind that in future, you might have nested elements such as this;

```
var page = "<h1><span class='username'>Foo</span></h1>"; 
```

In this circumstance, `filter()`ing for `.username` will yeild no results; as the jQuery object `$(page)` does not contain the `.username` element; it contains a `h1`, which has a descendant which is a `.username`. Therefore here you'd need to use;

```
alert($(page).find('.username').text()); 
```

For reference, see [`find()`](http://api.jquery.com/find), [`filter()`](http://api.jquery.com/filter) and [`map()`](http://api.jquery.com/map)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:28:34.180

A very simple way to do this is:

```
var elem = $('<h1>Hello!</h1><p>FOO</p><span class="username">this is ur name</span><p>sample text</p>').filter('.username').get(0);
console.log($(elem).html()); // returns this is ur name 
```

**[​jsFiddle example](http://jsfiddle.net/j08691/yYHXr/)**

You need to convert your string to a jQuery object first in order to use any jQuery method on it.

# asp.net - asp.net web 应用程序和数据计划

> ID：12284605
> 
> 赞同：0
> 
> 时间：2012-09-05T15:15:33.720
> 
> 标签：asp.net, linq-to-sql, mobile

我有一个 asp.net 4.0 Web 应用程序，它使用 linqtosql 从 sql server 2005 数据库中插入/更新/删除数据。该应用程序具有弹性，因此适用于任何设备……手机、ipad 或台式机。在手机和 iPad 上，用户通常会有数据计划。我想知道的是，当用户连接到我的应用程序，但没有插入/更新/删除数据时，是否会影响数据使用？如果用户只是在查看页面，或者仅在插入/更新/删除数据时才发生数据使用，是否还有数据使用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:27:21.203

不知道你是不是在炒作……

但如果你不是，那么你就不会理解 Web 应用程序是如何工作的。如果它出现在浏览器窗口中，则表示用户代理（设备中的浏览器）从 Web 服务器下载了它，该下载占用了设备的数据限额。数据可能在服务器端移动的事实是无关紧要的。

当 Web 用户代理（即浏览器）将数据提交回服务器（通常通过 POST 请求）时，这也会消耗数据余量，但 HTML 表单在从客户端发送时通常消耗不到一千字节的数据（除非您要上传二进制文件或大型文本区域）。数据限额通常是双向的，因此您可能有 1GB 用于上游和下游 - 上传表单数据所使用的几 KB 远远超过了当今大多数网页的重量为几百 KB 的事实，如果不是更多的话。

当然，在这种情况下，正确的答案是“个人资料！” - 自己运行您的应用程序，查看您在执行常见任务时经历了多少数据，记录您的发现并采取相应措施。

# jquery - 使用 jQuery 选项卡的多个 Facebook 'like' 按钮

> ID：12284606
> 
> 赞同：2
> 
> 时间：2012-09-05T15:15:33.873
> 
> 标签：jquery, facebook, jquery-ui, tabs, facebook-like

我在 jQuery 选项卡中为我拥有的每个产品都放置了一个类似 Facebook[的按钮](http://en.wikipedia.org/wiki/Like_button)按钮。

我在我的[HTML](http://en.wikipedia.org/wiki/HTML)元素上添加了命名空间：

```
<html lang="fr" xmlns:fb="http://ogp.me/ns/fb#"> 
```

我包含了 SDK JavaScript：

```
<div id="fb-root"></div>
<script>
    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script> 
```

使用的 Facebook 赞按钮是：

```
<fb:like send="false" width="90" show_faces="false" layout="button_count" href="http://www.google11.fr"></fb:like> 
```

但似乎 95% 的时间，它没有显示按钮。

供您参考：我不使用 Ajax。当我将按钮放在默认选项卡中时，它运行良好。

我该如何解决这个问题？

# jquery - 复选框列表仅选择一项

> ID：12284607
> 
> 赞同：0
> 
> 时间：2012-09-05T15:15:35.833
> 
> 标签：jquery, asp.net

我试图从列表中只选择一个复选框。这是我正在尝试的代码，但它似乎不起作用。我可以使用 RadioButtonlist 但它不允许我取消选择单选按钮。请告诉我。

```
$(document).ready(function () {
var checkboxlistid = "#<%= chkLst.ClientID %>"; 
$(checkboxlistid + " input:checkbox").click(function () { 
 $(this).attr("checked",""); }); 
```

});

```
 <asp:CheckBoxList ID="chkLst" runat="server" RepeatDirection="Horizontal">
                        <asp:ListItem Value="U">Unknown</asp:ListItem>
                        <asp:ListItem Value="R">Ref</asp:ListItem>
                    </asp:CheckBoxList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:34:00.627

那应该不是问题..基本上，当您选择一项时，您需要清除所有选中的项目，然后检查当前项目..

试试这个代码..

```
$(function() {
    $('[id*=chkLst] input[type="checkbox"]').on('click' , function(){
        // Caching all the checkboxes into a variable
        var checkboxes =  $('[id*=chkLst] input[type="checkbox"]');
        // If one item is checked.. Uncheck all and
        // check current item..
        if($(this).is(':checked')){
            checkboxes.attr('checked', false);
            $(this).attr('checked', 'checked');        
        }
    });    
});​ 
```

这是一个工作示例.. [http://jsfiddle.net/sushanth009/hBSTC/2/](http://jsfiddle.net/sushanth009/hBSTC/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:17:44.453

复选框是此任务的错误 UI 元素。用户期望单选按钮和复选框的某些行为 - 不要弄乱它。最好添加一个 CLEAR 按钮，而不是尝试使复选框的行为类似于单选按钮。

# c# - 填充 XML 的正确/最佳方法是什么？

> ID：12284608
> 
> 赞同：0
> 
> 时间：2012-09-05T15:15:37.820
> 
> 标签：c#, xml

我有一个 XML：

```
<PolicyChangeSet schemaVersion="2.1" username="" description="">
  <Note>
    <Content></Content>
  </Note>
  <Attachments>
    <Attachment name="" contentType="">
      <Description></Description>
      <Location></Location>
    </Attachment>
  </Attachments>
</PolicyChangeSet> 
```

我有一个填充 XML 的方法：

```
public static void GeneratePayLoad(string url, string policyID)
        {
            string attachmentName = policyID.Split(new string[] { "REINSTMT" }, StringSplitOptions.None)[0] + "REINSTMT";

            XmlDocument xmlDoc = new XmlDocument();

            xmlDoc.Load(AppVars.pxCentralXMLPayloadFilePath);
            XmlNode node = xmlDoc.SelectSingleNode("/PolicyChangeSet");
            node.Attributes["username"].Value = AppVars.Username;
            node.Attributes["description"].Value = "Upload Documents";

            node = xmlDoc.SelectSingleNode("PolicyChangeSet/Note/Content");
            node.InnerText = "The attached pictures were sent by the producer.";

            node = xmlDoc.SelectSingleNode("/PolicyChangeSet/Attachments/Attachment");
            node.Attributes["name"].Value = attachmentName;
            node.Attributes["contentType"].Value = "image/tiff";

            node = xmlDoc.SelectSingleNode("/PolicyChangeSet/Attachments/Attachment/Description");
            node.InnerText = "Combined reinstatement picture file";

            node = xmlDoc.SelectSingleNode("/PolicyChangeSet/Attachments/Attachment/Location");
            node.InnerText = url;

            xmlDoc.Save(AppVars.pxCentralXMLPayloadFilePath);
        } 
```

我的问题是，填充 XML 的最佳方式是什么？我觉得有一种更简单的方法可以做到这一点。例如，我确信有一种方法可以消除多次选择单个节点的需要（我目前正在做的事情）。大家有什么推荐的？什么是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:53:44.630

使用序列化/反序列化策略可能是一种选择，但有时如果您不想为此使用 DTO 污染您的代码，则有时您希望避免这种情况。在最后一种情况下，您可以使用`XDocument`已经提到的 -related 东西，如下所示：

```
var doc = XElement.Parse(
    @"<PolicyChangeSet schemaVersion='2.1' username='' description=''>
    <Note>
        <Content></Content>
    </Note>
    <Attachments>
        <Attachment name='' contentType=''>
        <Description></Description>
        <Location></Location>
        </Attachment>
    </Attachments>
    </PolicyChangeSet>");

doc.Descendants("Note")
   .Descendants("Content").First().Value = "foo";

var attachment = doc.Descendants("Attachments")
                    .Descendants("Attachment").First();

attachment.Attributes("name").First().Value = "bar";
attachment.Attributes("contentType").First().Value = "baz";

...

doc.Save(...); 
```

您将使用该`Load`方法而不是，从文件`Parse`中加载您的。`xml`这是另一种选择。

# javascript - 无法从函数内的函数返回数组

> ID：12284612
> 
> 赞同：0
> 
> 时间：2012-09-05T15:15:55.287
> 
> 标签：javascript, arrays, variables, scope

请帮助使用以下代码。我无法在 selectCb 函数中返回“结果”变量。“结果”已分配并在 selectCb 范围内正常工作，但在范围之外我无法访问它。

```
function queryDB(client,queryString) {

    result = ''; //declare global variable

    client.query(queryString, function selectCb(error, results, fields) {

      if (results.length > 0) result = results[0]; 
          console.log(result['id']); //WORKS HERE

    });

    client.end();

    console.log(result['id']); //DOES NOT WORK - UNDEFINED

    return result; //return result array

};

var data = queryDB(client,"select id from table");

console.log(data['id']) //DOES NOT WORK - UNDEFINED; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:23:18.097

您需要将回调作为参数，并在有数据时调用它：

```
function queryDB(client, queryString, callback) {
    client.query(queryString, function selectCb(error, results, fields) {
        if (results.length > 0) {
            callback(results[0]);
        }
    });
};

var data = queryDB(client,"select id from table", function (data) {
  console.log(data['id']);
}); 
```

当回调变得过于嵌套时，诸如[async之类的库可以提供帮助。](https://github.com/caolan/async)

# javascript - 使用技巧在 javascript 中强制执行私有继承

> ID：12284614
> 
> 赞同：0
> 
> 时间：2012-09-05T15:16:12.660
> 
> 标签：javascript, oop, coding-style

所以我想出了一些 hackish 的方法来检查是否从对象本身调用了一个函数。有人可以给我一些很好的理由不做这样的事情吗？

```
function Poo(){
this.myFunc=function(){
    for(x in this)
    {
           if (this.myFunc.caller==this[x]) {
               alert(this.myFunc.caller==this[x]);
               return;}
     }
      alert(false);             
    }
    this.myFunc2=function(){this.myFunc();}
}
var mine=new Poo();
mine.myFunc(); //calling directly not allowed prints false
mine.myFunc2(); //called from a member function allowed prints true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:37:42.057

您可以做任何您想做的事情，但是，我可以向您展示您的方法不起作用的情况：

```
function Poo(){
  this.myFunc = function () {
    for(x in this) {
      if (this.myFunc.caller == this[x]) {
        console.info('internal call, accepted');
        return;
      }
    }
    console.error('no external calls allowed');
  };

  this.myFunc3 = function () {
    var self = this;
    // this is a standard way of
    // passing functions to callbacks
    // (eg, ajax callbacks)
    this.myFunc4(function() {
      self.myFunc();
    });
  }

  this.myFunc4 = function (callback) {
    // do stuff...
    callback();
  };
}

var mine = new Poo();

mine.myFunc3(); 
```

myFunc3 在对象内，因此我假设您希望在它提供给 myFunc4（也在对象中）的回调中对 myFunc 的调用起作用。但是，调用者在匿名函数方面表现不佳。

此外，在比较函数时遍历整个实例方法和属性绝对不是“面向对象”的方式。由于您正在尝试模拟`private`方法，因此我假设您正在寻找 OO。

您的方法没有利用 JS 提供的任何功能，您只是以一种不优雅的方式（重新）构建现有功能。尽管出于学习目的它可能很有趣，但我不建议使用这种思维方式来交付生产代码。

关于 stackover 的另一个问题有一个您可能感兴趣的答案： [为什么在 JavaScript 中不推荐使用 arguments.callee.caller 属性？](https://stackoverflow.com/questions/103598/why-was-the-arguments-callee-caller-property-deprecated-in-javascript)

编辑：我如何从回调中调用 myFunc 的小改动，在匿名函数`this`中不是实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:23:47.580

我不能给你一个很好的理由不这样做，但更简单的解决方案。

```
function Poo() {
     var myFunc = function() {
          alert('myfunc');
     };

     this.myFunc2 = function() {
         myFunc();
     }
}

var mine = new Poo();
var mine.myFunc();  // Won't work
var mine.myFunc2(); // Will work 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:24:23.940

为什么不使用模块模式之类的东西来隐藏“私有”方法的实现。

```
var poo = function(){
   var my = {},
       that = {};

   my.poo = function() {
      // stuff
   };
   that.foo = function(){
      my.poo(); //works
      // more stuff
   };
   return that;
};
poo.foo(); // works
poo.poo(); // error 
```

# iphone - 通用 Xcode 项目中的滚动视图

> ID：12284615
> 
> 赞同：1
> 
> 时间：2012-09-05T15:16:14.200
> 
> 标签：iphone, xcode, ipad, scrollview

我正在创建一个具有滚动视图的通用应用程序。

该应用程序在 iPhone 和 iPad 上运行良好。但是，滚动视图设置为 iPad 尺寸。因此，当我在 iPhone 上运行该应用程序时，仍然为 iPad 设置了滚动视图。

有什么办法可以改变吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:21:56.550

你可以使用这个：

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    [myScrollView setFrame:CGRectMake(0, 0, 320, 480)];
}else{
    [myScrollView setFrame:CGRectMake(0, 0, 768, 1024)];
} 
```

当然，您还必须调整滚动视图的内容大小。

# php - 记录未从 PHP 插入到 mySQL

> ID：12284616
> 
> 赞同：1
> 
> 时间：2012-09-05T15:16:17.923
> 
> 标签：php, mysql

我正在从 PHP 文件运行插入语句，然后运行一些代码来检查插入是否有效。PHP 告诉我“成功”。但是当我检查我的数据库以查看记录是否存在时，它不存在。此外，当我直接在 MySQL 管理员中运行 sql 语句时，它工作正常。我很确定我没有插入错误的数据库或表。这是代码的清理版本：

```
 $sql = "INSERT INTO companies (name, source_id, source_site, seeking_cf, currency, i_target, equity_offered, money_raised, num_investors, raised_pct, descr, city, state, country, categories_id, logo) VALUES (\"XYZ Widgets\", \"31\", 22, 1, \"£\", 250000, 0, 0, 0, 0, \"(Business Plan\", \"London\", \"\", \"UK\", 0, \"http://www.website.com/xyz.jpg\")";
  $rs = mysql_query($sql, $conn);  
  if(mysql_affected_rows($conn) == 0) { 
    $utoh = "fail"; 
  } else { 
    $utoh = "success";      
  }
  echo $utoh; 
```

所以结果显示“成功”，但记录不在数据库中。PHP 是 5.3 版。MySQL是5.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:20:29.180

尽管我讨厌使用`mysql_`，但您应该对`mysql_query`语句进行错误检查...

```
<?php

$sql = "INSERT INTO companies (name, source_id, source_site, seeking_cf, currency, i_target, equity_offered, money_raised, num_investors, raised_pct, descr, city, state, country, categories_id, logo) VALUES (\"XYZ Widgets\", \"31\", 22, 1, \"£\", 250000, 0, 0, 0, 0, \"(Business Plan\", \"London\", \"\", \"UK\", 0, \"http://www.website.com/xyz.jpg\")";
$rs = mysql_query($sql, $conn);  
if (!$rs)
{
    echo mysql_error();
}
else
{
    echo 'success';
} 
```

我们现在可以看到错误是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:18:12.080

使用`single quotes`而不是双引号。

您的代码容易发生**[SQL 注入](http://bobby-tables.com/)**。使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

使用 PDO 扩展的示例：

```
<?php

    $stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (?, ?)");
    $stmt->bindParam(1, $name);
    $stmt->bindParam(2, $value);

    // insert one row
    $name = 'one';
    $value = 1;
    $stmt->execute();

?> 
```

这将允许您使用单引号插入记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:20:29.953

尝试这个：

```
$sql = "INSERT INTO companies (name, source_id, source_site, seeking_cf, currency, i_target, equity_offered, money_raised, num_investors, raised_pct, descr, city, state, country, categories_id, logo) VALUES (\"XYZ Widgets\", \"31\", 22, 1, \"£\", 250000, 0, 0, 0, 0, \"(Business Plan\", \"London\", \"\", \"UK\", 0, \"http://www.website.com/xyz.jpg\")";
  $rs = mysql_query($sql, $conn);  
  if(!$rs) { 
    $utoh = "fail"; 
  } else { 
    $utoh = "success";      
  }
  echo $utoh; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:32:44.837

你试过了吗？：

1：

```
 mysql_query("set names utf8;");
    before mysql_query($insert)? 
```

2：

在查询中更改引号 " by '

# c# - Winforms - 从子表单更改 MDIParent 表单的名称

> ID：12284618
> 
> 赞同：1
> 
> 时间：2012-09-05T15:16:23.980
> 
> 标签：c#, winforms

我想根据用户在其中一个子表单上的输入来更改 MDI 父表单的名称（文本）标题。

我试过这段代码：

```
frmMain main = (frmMain)this.MdiParent;
main.Text = "New Name"; 
```

但我得到一个对象引用未设置错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:24:22.053

```
this.MdiParent.Text="New Name"; 
```

但我认为你正在尝试这样做

```
Form child = new Form();
String formText = "Child ";
child.Text = formText;
child.MdiParent = this; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:23:16.977

可能是因为您试图在子窗体的构造函数中这样做。在构造函数完成之前，无法设置 MdiParent 属性。

重载子窗体中的 OnLoad 方法并在那里更改父窗体的 Text 属性。

# jquery - 切换sidenav上的jquery切换类

> ID：12284629
> 
> 赞同：0
> 
> 时间：2012-09-05T15:16:58.577
> 
> 标签：jquery, toggle, toggleclass

基本上，如果您查看我的示例，您会看到您单击了一个链接，该链接启动了切换，然后您可以单击另一个链接，它将切换下一个面板。

我的问题是，实际上，我计划使用精灵作为图标，并且为了将背景位置减去到正确的位置，我需要一个“活动”类应用于激活切换的链接。我相信我在我的示例中看错了，因为我只是将一个类应用于单击的链接。我不确定如何以我希望的方式应用它，或者是否确实可能。

我的代码是：

[http://jsfiddle.net/visualdecree/4A23Z/5/](http://jsfiddle.net/visualdecree/4A23Z/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:34:16.480

希望我理解这个问题......

[http://jsfiddle.net/4A23Z/8/](http://jsfiddle.net/4A23Z/8/)

我添加了样式以突出显示活动的菜单项。添加了代码以在切换活动 LI 之前删除 LI 上的所有活动类。

```
ul.sidenav li.active { background:cyan; }

 $('.sn').click(function(){
    $('ul.sidenav li').removeClass('active');                 
    $(this).stop(true,true).toggleClass("active");
});​ 
```

**编辑：**

[http://jsfiddle.net/4A23Z/10/](http://jsfiddle.net/4A23Z/10/)

```
$('.sn').click(function(){
    $('ul.sidenav li').removeClass('active');                    
    $(this).stop(true,true).addClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:30:34.267

如果我理解正确 - 试试这个[jsfiddle](http://jsfiddle.net/4A23Z/7/)（或者[这个](http://jsfiddle.net/4A23Z/9/)定义了活动类）

```
$(".sn a").on('click',function(){
    var panID = $("#" + $(this).data('panel') );
    $("div[id*='sn-pan-']").hide({slide:'toggle'}, 1000);
    var link = this;
    $(panID).css("left","100px").animate({width:'toggle'}, 500, function()                      { 
        $(".sn a").removeClass("active");
        $(link).toggleClass("active");
    })
})

 ​ 
```

# django - Django以及如何检查对象是否有孩子

> ID：12284630
> 
> 赞同：1
> 
> 时间：2012-09-05T15:17:05.703
> 
> 标签：django, parent, foreign-key-relationship

作为 Django/python 世界中的新手，我无法找到检查对象是否有子对象的方法。

一个例子：

```
Class MyItems
        title = models.CharField(max_length=50)
        parent = models.ForeignKey('self',null=True, blank=True,related_name='subitems') 
```

然后在我的模板中：

```
{% for item in MyItems %}
<li> {{ item.title }} </li>
    {% if item **IS A PARENT OF CHILDREN** %}
        <p>This is what I want</p>
    {% endif %}
{% endfor %} 
```

我可以查看一个项目是否有父级没有问题，但是如何做其他方式，判断一个项目是否是另一个项目的父级？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:20:57.610

如果你想要你的对象之间的递归父子关系，你应该看看使用 MPTT

[http://django-mptt.github.com/django-mptt/](http://django-mptt.github.com/django-mptt/)

```
<ul class="root">
{% recursetree nodes %}
    <li>
        {{ node.name }}
        {% if not node.is_leaf_node %}
            <ul class="children">
                {{ children }}
            </ul>
        {% endif %}
    </li>
{% endrecursetree %}
</ul> 
```

在这里的食谱中谈到： [https ://code.djangoproject.com/wiki/ModifiedPreorderTreeTraversal](https://code.djangoproject.com/wiki/ModifiedPreorderTreeTraversal)

要了解 MPTT 在数据级别的工作原理，请查看[http://en.wikipedia.org/wiki/Nested_set_model](http://en.wikipedia.org/wiki/Nested_set_model)

显而易见的解决方案的问题是，对于每个附加级别的子级，都需要另一个查询 - 这变得非常低效。

```
# this is an additional query AND will not be recursive.
{% if item.child_set.all.count > 0 %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T14:38:26.857

如果我正确理解了这个问题，它应该像这样简单：

```
{% if item.subitems.exists %} 
```

# php - php日期不会插入mysql数据库

> ID：12284635
> 
> 赞同：-6
> 
> 时间：2012-09-05T15:17:36.127
> 
> 标签：php, mysql

这是一个奇怪的问题。

我有一个日期，它`mm-dd-yyyy` 在发布到 mysql 时转换为我已重新订购`yyyy-mm-dd` 但它仍然不会插入

```
$date = date("Y-m-d", strtotime($_POST['leaving_date']) ); 
```

有什么建议吗？干杯

**编辑**

实际查询：

```
mysql_query("INSERT INTO booking_info (customer_id, booking_ref, date_of_travel) VALUES (".mysql_real_escape_string($_POST['customer_id']).", ".mysql_real_escape_string($rnd).", ".mysql_real_escape_string($date).")"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:26:12.683

您的值不是用单引号引起来的。

```
mysql_query("INSERT INTO booking_info (customer_id, booking_ref, date_of_travel) 
             VALUES (
               '".mysql_real_escape_string($_POST['customer_id'])."',
               '".mysql_real_escape_string($rnd)."', 
               '".mysql_real_escape_string($date)."')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:36:34.060

应该提到的是，使用 PDO 不会给你这些问题；让我举例说明：

```
// assuming $db is a PDO instance to your database
// prepare the statement
$stmt = $db->prepare('INSERT INTO booking_info (customer_id, booking_ref, date_of_travel) VALUES (:customer, :ref, :date)');
// execute the statement with your variables
$stmt->execute(array(
    ':customer' => $_POST['customer_id'],
    ':ref' => $rnd,
    ':date' => $date,
)); 
```

正确的引用和转义是在后台完成的；整洁吧？:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:29:36.007

```
mysql_query("INSERT INTO booking_info (customer_id, booking_ref, date_of_travel) VALUES (".mysql_real_escape_string($_POST['customer_id']).", ".mysql_real_escape_string($rnd).", '$date')"); 
```

试试那个....应该可以解决问题，但不是编写sql的好方法...无需在$date变量上调用mysql_real_escape_string函数作为您的$date变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:23:45.843

您需要在日期周围加上单引号（如果这不是整数或其他类型的数字字段，则可能还有 booking_ref。

尝试这个：

```
mysql_query("INSERT INTO booking_info (customer_id, booking_ref, date_of_travel) VALUES (".mysql_real_escape_string($_POST['customer_id']).", ".mysql_real_escape_string($rnd).", '".mysql_real_escape_string($date)."')"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T15:22:19.123

查看您编辑的问题，您的日期似乎缺少单引号。此外，它可能会更慢，但您始终可以让 MySQL 为您进行格式化。根据您使用的扩展程序，您可以执行以下操作：

```
INSERT ... VALUES (STR_TO_DATE('$phpDate', '%m-%d-%Y')), col2, ...) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-05T15:21:51.823

添加日期时，请使用双引号将其括起来，如字符串。

```
mysql_query("INSERT INTO booking_info (customer_id, booking_ref, date_of_travel) VALUES (".mysql_real_escape_string($_POST['customer_id']).", ".mysql_real_escape_string($rnd).", \"".mysql_real_escape_string($date)."\")"); 
```

# ruby - 将一张图像合成到另一张图像上时，RMagick 透明度不起作用

> ID：12284637
> 
> 赞同：4
> 
> 时间：2012-09-05T15:17:37.677
> 
> 标签：ruby, image, imagemagick, rmagick

在下面的代码中，我试图在一些山脉的图像上覆盖一个透明的正方形。我认为它会起作用，但是通过设置 background_color = 'none' 它不会使图像透明！

结果是左上角的黑色方块 - 期望的结果是黑色方块应该是透明的。

```
require 'open-uri'
require 'RMagick'

image_url = 'http://farm9.staticflickr.com/8446/7937080514_62d7749860.jpg'

bg = Magick::ImageList.new
open(image_url, 'rb') do |f|
  bg.from_blob(f.read)
end

layer = Magick::Image.new(200, 200) {
  self.background_color = 'none'
}

bg.each do |frame|
  frame.composite!(layer, 0, 0, Magick::OverCompositeOp)
  frame.strip!
end

bg.write('out.jpg') 
```

这是我的输出图像：

![输出不透明的黑色方块](../Images/06fbcc40d0bd96bcd27f2f2ee678e11b.png)

编辑：我在 Mac、Lion、ruby 1.9.3p125、ImageMagick 6.7.5-7

编辑 2：这在 Heroku 上运行良好！但不在我的机器上。Heroku 具有相同版本的 ImageMagick。奇怪：|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T19:52:07.510

出于某种原因`layer.alpha? == false`。所以我做了`sq.alpha(Magick::ActivateAlphaChannel)`，然后它起作用了！

参考：[http ://www.imagemagick.org/RMagick/doc/image1.html#alpha](http://www.imagemagick.org/RMagick/doc/image1.html#alpha)

# machine-learning - 带约束的梯度下降（拉格朗日乘数）

> ID：12284638
> 
> 赞同：16
> 
> 时间：2012-09-05T15:17:40.410
> 
> 标签：machine-learning, gradient-descent

我正在尝试使用梯度下降在 N 个参数中找到函数的最小值。但是我想这样做，同时将参数的绝对值之和限制为 1（或 <= 1，没关系）。出于这个原因，我使用拉格朗日乘数法，所以如果我的函数是 f(x)，我将最小化 f(x) + lambda * (g(x)-1) 其中 g(x) 是参数的绝对值之和。

现在据我了解，当 g(x)=1 时，该函数的梯度仅为 0，因此找到局部最小值的方法应该找到我的函数的最小值，其中我的条件也满足。问题是这个添加我的函数是无界的，所以梯度下降只是找到越来越大的 lambdas 和越来越大的参数（绝对值）并且永远不会收敛。

目前我正在使用 CG 的 python (scipy) 实现，所以我真的更喜欢不需要我自己重写/调整 CG 代码但使用现有方法的建议。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-05T15:31:01.730

问题是当使用拉格朗日乘子时，临界点不会出现在拉格朗日的局部最小值处——而是出现在鞍点处。由于梯度下降算法旨在找到局部最小值，因此当您给它一个约束问题时，它无法收敛。

通常有以下三种解决方案：

*   使用能够找到鞍点的数值方法，例如牛顿法。然而，这些通常需要梯度和 Hessian 的解析表达式。
*   使用惩罚方法。在这里，您在成本函数中添加了一个额外的（平滑）项，当满足（或几乎满足）约束时它为零，而当它们不满足时非常大。然后，您可以像往常一样运行梯度下降。但是，这通常具有较差的收敛性，因为它会进行许多小的调整以确保参数满足约束条件。
*   与其寻找拉格朗日的临界点，不如最小化拉格朗日梯度的平方。显然，如果拉格朗日的所有导数都为零，那么梯度的平方将为零，并且由于某物的平方永远不会小于零，因此您将找到与拉格朗日极值相同的解。但是，如果要使用梯度下降，则需要拉格朗日梯度平方的梯度表达式，这可能不容易得到。

就个人而言，我会采用第三种方法，如果很难得到解析表达式，我会用数值方法找到拉格朗日梯度的平方的梯度。

另外，您的问题并没有说清楚-您使用的是梯度下降还是 CG（共轭梯度）？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-17T02:19:38.903

可能为时已晚，无法对 OP 有所帮助，但在相同情况下可能对其他人有用：

通过添加一些“辅助”变量，具有绝对值约束的问题通常可以重新表述为仅具有线性约束的等效问题。

例如，考虑问题 1：

在非线性约束 |x1|+|x2|<=10 下，找到使 f(x1,x2) 最小化的 (x1,x2)。

有一个线性约束版本，问题2：

求 (x1,x2,x3,x4) 在以下线性约束下最小化 f(x1,x2)：

1.  x1<=x3
2.  -x1<=x3
3.  x2<=x4
4.  -x2<=x4
5.  x3+x4<=10

笔记：

*   如果 (x1,x2,x3,x4) 满足问题 2 的约束，则 (x1,x2) 满足问题 1 的约束（因为 x3 >= abs(x1), x4 >= abs(x2) ）
*   如果 (x1,x2) 满足问题 1 的约束，那么我们可以通过设置 x3=abs(x1), x4=abs(x2) 扩展到 (x1,x2,x3,x4) 满足问题 2 的约束
*   x3,x4 对目标函数没有影响

因此，找到问题 2 的最优值将为您提供问题 1 的最优值，反之亦然。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-08-14T11:13:23.363

我发现一篇题为“约束差分优化”的旧论文写于 1988 年，解决了这个问题非常好和容易。

在那篇论文中，作者声称对于拉格朗日：L(x, b) = f(x) + bg(x)

通过在 x 上进行梯度下降，**同时在 b 上进行梯度“上升”**，您最终将收敛到 L(x, b) 的静止点，这是在约束 g(x)=0 下 f(x) 的局部最小值. 也可以结合惩罚法，使收敛更快更稳定。

通常只需反转 b 的梯度即可。

我已经在几个简单的案例中尝试过它并且它有效，但在阅读那篇论文后我真的不明白为什么。

# ruby-on-rails - 重新创建数据库+表（它不想使用 rake 命令）ROR 3

> ID：12284639
> 
> 赞同：0
> 
> 时间：2012-09-05T15:17:42.407
> 
> 标签：ruby-on-rails, database

我是 ror 的新手，我只是设法破坏了数据库......我试图用这 2 种方法重新创建但没有一个工作：

第一的：

```
rake db:reset
rake db:migrate 
```

第二：

```
rake db:drop
rake db:create
rake db:migrate 
```

但是没有一个工作......我不知道该怎么做，请帮助......

我的迁移文件夹是空的，如果我迁移没有任何反应，则没有创建表的通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:24:45.207

尝试使用：

```
rake db:migrate:reset 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:33:00.473

检查您的 database.yml 文件，它可能默认为 SQLITE，它基本上是一个文本文件。确保您使用的是具有正确名称的正确数据库。

# c# - 北风数据集

> ID：12284642
> 
> 赞同：2
> 
> 时间：2012-09-05T15:17:44.517
> 
> 标签：c#, dataset, northwind

`northwinddataset = (NORTHWNDDataSet)bsEmployees.DataSource;` 下面代码中的实际含义是什么？它是northwinddataset 实例的数据源？

```
 public partial class FormEdit : Form
 {
     BindingSource bsEmployees;
     NORTHWNDDataSet northwinddataset;                    
     EmployeesTableAdapter taEmployees;

     public FormEdit(BindingSource bsEmployees)            
     {
         InitializeComponent();

         this.bsEmployees = bsEmployees;
         taEmployees = new EmployeesTableAdapter();
         /***** This line *****/
         northwinddataset = (NORTHWNDDataSet)bsEmployees.DataSource;
         /*********************/

        }

        private void FormEdit_Load(object sender, EventArgs e)               
        {
            try
            {
                tbLastName.DataBindings.Add("Text", bsEmployees, northwinddataset.Employees.LastNameColumn.ColumnName);
                tbFirstName.DataBindings.Add("Text", bsEmployees, northwinddataset.Employees.FirstNameColumn.ColumnName);
                tbTitle.DataBindings.Add("Text", bsEmployees, 
            }
            catch (Exception ex)
            {
                MessageBox.Show(string.Format("Greska: {0}", ex.Message));
                Close();
            }
        }

        private void btnSnimi_Click(object sender, EventArgs e)                   
        {
            bsEmployees.EndEdit();   
            if (taEmployees.Update(northwinddataset.Employees)> 0)
             {
                 MessageBox.Show("Recorded");
                 Close();
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:29:17.750

这一行：

```
northwinddataset = (NORTHWNDDataSet)bsEmployees.DataSource; 
```

它基本上是将其转换`bsEmployees.DataSource`为一种`NORTHWNDDataSet`类型。这样你就可以使用/调用所有可用的函数/成员`NORTHWNDDataSet`。上可能不可用的函数和成员`bsEmployees.DataSource`。

这种操作称为[Casting (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/ms173105%28v=vs.110%29.aspx)。

# ruby-on-rails - 查找在 rails 模型中调用了哪个别名方法

> ID：12284643
> 
> 赞同：0
> 
> 时间：2012-09-05T15:17:46.820
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, meta-search

我是 Rails 开发的新手。我为一个方法创建了一些别名，我想知道调用了哪个别名。

我有这个代码。

```
alias_method :net_stock_quantity_equals :net_stock_quantity
alias_method :net_stock_quantity_gte :net_stock_quantity
alias_method :net_stock_quantity_lte :net_stock_quantity
alias_method :net_stock_quantity_gt :net_stock_quantity
alias_method :net_stock_quantity_lt :net_stock_quantity

def net_stock_quantity
  #some code here
end 
```

我想知道用户调用了哪个别名。就像用户打电话一样，`net_stock_quantity_equals`我应该知道用户没有`net_stock_quantity_equals`打电话`net_stock_quantity`。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T01:27:10.793

您可以覆盖 method_missing 来做到这一点。

```
def method_missing(method_name, *args, &block)
  if method_name.to_s =~ /^net_stock_quantity_/ 
    net_stock_quantity method_name
  else
    super
  end
end

def net_stock_quantity(alias_used = :net_stock_quantity)
  #some code
end 
```

这里有一个教程做类似的事情[http://net.tutsplus.com/tutorials/ruby/ruby-for-newbies-missing-methods/](http://net.tutsplus.com/tutorials/ruby/ruby-for-newbies-missing-methods/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:45:38.650

它认为您正在错误地解决问题-而不是使用别名方法，而是通过发送`:equals, :gte, :lte`等作为方法的参数，即：

```
def net_stock_quantity(type = :all)
  # do something with the type here
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:36:56.293

```
def net_stock_quantity(alias_used = :net_stock_quantity)
    method_called = caller[0]
    #some code
end 
```

将`method_called`包含被调用别名的名称。

# javascript - Pusher - 不接受来自同一来源的推送事件

> ID：12284646
> 
> 赞同：1
> 
> 时间：2012-09-05T15:17:58.757
> 
> 标签：javascript, asp.net-mvc, push, pusher

我正在使用 Pusher 将事件推送到我订阅的浏览器。

当我向我的服务器发送更新时，我的服务器会发送一个 Push 事件，并且我的客户端（发起请求）和任何其他订阅的客户端都会被触发。

我遇到的问题是事件发起的客户端也获得了 Pushed 事件。

有没有办法确定哪个客户端发起了 Push 事件？或阻止发起客户端接收推送或至少查询事件以获取发起者的迹象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:36:17.310

在解释如何排除收件人的文档中找到这篇文章。

[http://pusher.com/docs/server_api_guide/server_ exclude_recipients](http://pusher.com/docs/server_api_guide/server_excluding_recipients)

做这个

```
var socketId = null;
pusher.connection.bind('connected', function() {
  socketId = pusher.connection.socket_id;
}); 
```

获取当前连接的 SocketId。然后将其作为 JSON 数据的一部分发送到服务器。

然后，在您的服务器完成计算所需的任何内容并准备好触发 PUSH 事件后，将 SocketId 添加到 PUSH 请求中。

# core-foundation - CFArrayGetValueAtIndex：如何判断返回值是否为 CFType

> ID：12284647
> 
> 赞同：0
> 
> 时间：2012-09-05T15:18:04.323
> 
> 标签：core-foundation

这是来自 Apple Developers 网站：

const void * CFArrayGetValueAtIndex (CFArrayRef theArray, CFIndex idx);

返回值
theArray 中 idx 索引处的值。如果返回值为 Core Foundation 对象，则所有权遵循 Core Foundation 内存管理编程指南中的“获取规则”。

现在，如何测试返回值是否为 CFType？

编辑：

刚刚在 /usr/lib/system/libsystem_c.dylib 中找到了一个名为 __isctype 的函数，它正是我想要的。有人知道更多关于这个功能的信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:44:48.437

简而言之，您应该始终了解提供给您的对象系列。

如果它不是与 CF 兼容的类型（包括`NSObject`s），那么您应该只通过显式文档知道。要么您构造了一个非常不寻常的 CFArray，要么客户端会指出这一点（例如，通过指定数组包含指向某个结构的指针）。这是一个安全的默认假设，并且在其 CFArray 中不返回与 CF 兼容的对象的每个调用都应使其响亮而清晰。

如果有疑问，您总是可以在开发过程`CFRetain`中`CFRelease`返回一个对象（如果它不是 CF 类型，那应该会崩溃）。

# android - Android：限制横向标题宽度 - 可能吗？

> ID：12284653
> 
> 赞同：0
> 
> 时间：2012-09-05T15:18:21.180
> 
> 标签：android, android-layout, android-ui

我想将我的应用程序中的横向标题限制为左侧区域的 50%。是否有可能有类似的东西：

![标题仅在右侧（分别为左侧）](../Images/7d6a4b9e70f05b2d1881e3d876d6a7e1.png)

对于肖像模式，目前的情况很好。

目前标题已经是自定义标题，但会给用户更多空间会很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:22:28.150

该标题是屏幕右侧`View`（或？）的一部分。`Fragment`为此，只需将您的标题放在`View`位于屏幕左半部分的 a 中。您可以将现有布局用于纵向。

编辑：*根据提供的图像*，我认为该应用程序的布局如下所示：

```
_______________________________
|              |--------------|
|              ||   Title    ||
|              |--------------|
|    View A    |    View B    |
|              |              |
|              |              |
|              |              |
------------------------------- 
```

在分层布局方面，是这样的：

```
Layout
  View A
    Stuff
  View B
    Title
    More Stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:31:15.943

我建议您将 Android 标题栏设置为隐藏，并将您自己的 TextView 添加为更短的 TitleBar。
这样你就有更多的可能性来设计你的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:55:40.560

根据前面的答案，我找到了解决方案

```
_______________________________
|              |--------------|
|              || Title-View ||
|              |--------------|
|    View A    |    View B    |
|              |              |
|              |              |
|              |              |
------------------------------- 
```

以及禁用 app-title-header 的通用样式。一些副作用是：

*   由于标题视图组件不是持久的，我需要在设备旋转后立即重新初始化它们（在此之前这是不必要的）[但这是一个小努力]
*   在标题视图中，我设置`android:background="@android:drawable/title_bar"`了与常规 Android 标题相同样式的视图布局
*   我在标题视图的所有布局中都包含了硬编码

    ```
     <include
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/title_2_lines" /> 
    ```

    这也没什么大不了的，而且效果很好。

感谢您的支持，因为这两种不同的想法有助于找出如何正确实现它的方法:)

# cakephp - CakePHP 错误处理

> ID：12284665
> 
> 赞同：1
> 
> 时间：2012-09-05T15:19:14.670
> 
> 标签：cakephp, error-handling, cakephp-1.3

我正在使用 cakephp，我正在处理错误

我已经关注[http://book.cakephp.org/1.3/en/view/1188/Error-Handling](http://book.cakephp.org/1.3/en/view/1188/Error-Handling)

我创建了 AppError 我的代码是

应用程序/app_error.php

```
<?php

    class AppError extends ErrorHandler {

        function error404() {
            //$this->controller->set('file', $params['file']);
            $this->_outputMessage('error404');
        }

    }
    ?> 
```

我从我的控制器调用这个 error404

```
function userprofile($id = null) {
        $user = $this->Session->read('user');
        if($id != $user['User']['id'])
        {
            $this->cakeError('error404');
        }
} 
```

但我发现 Erro Fatal error: Call to undefined method UsersController::cakeError() in D:\wamp\www\survey\app\Controller\UsersController.php 在第 318 行

我想念一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:30:15.663

从错误消息中返回的文件夹路径判断，您使用的是 CakePHP 2，而您拥有的文档和示例是 CakePHP 1.3。

请参阅2.0 书中的[错误处理](http://book.cakephp.org/2.0/en/development/errors.html)和[异常](http://book.cakephp.org/2.0/en/development/exceptions.html)（说真的，阅读它们，有大量可用的异常），我认为它稍微复杂一些，但更灵活

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:39:37.450

**对于 CakePHP 2.X，`Object::cakeError()`已被删除。**相反，它已被许多例外所取代。以前称为 cakeError 的所有核心类现在都抛出异常。这使您可以选择处理应用程序代码中的错误，或者让内置的异常处理来处理它们。

在 CakePHP 2.0 中，对错误和异常处理的控制比以往任何时候都多。您可以使用 configure 配置要设置为默认错误处理程序和异常处理程序的方法。

这是[错误配置](http://book.cakephp.org/2.0/en/development/errors.html#error-configuration)的链接。您可以轻松实现所需的相同功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:00:33.137

我认为您正在使用 CakePHP 1.3 并扩展此处定义的 ErrorHandler ：

```
....\cake\libs\error.php 
```

并根据此error404定义为：

```
function error404($params) {
    extract($params, EXTR_OVERWRITE);

    if (!isset($url)) {
        $url = $this->controller->here;
    }
    $url = Router::normalize($url);
    $this->controller->header("HTTP/1.0 404 Not Found");
    $this->controller->set(array(
        'code' => '404',
        'name' => __('Not Found', true),
        'message' => h($url),
        'base' => $this->controller->base
    ));
    $this->_outputMessage('error404');
} 
```

在您的 ..../app/app_error.php 中，您已将其定义为

```
function error404() {
        //$this->controller->set('file', $params['file']);
        $this->_outputMessage('error404');
} 
```

并且在 php 中这种类型的方法重载是不允许的。我想你已经得到了答案。

您可以做的是您可以在扩展的 AppError 类中创建自己的函数，然后在其中传递错误名称或模板名称

```
function customeError($errorMessage){
     $this->_outputMessage($errorMessage);
} 
```

然后根据不同的模板名称，您可以在 _outputMessage() 函数中放置条件并将用户重定向到不同的页面。

# c# - 在 c# 的文本框中向 XML 添加属性的最简单方法是什么？

> ID：12284666
> 
> 赞同：1
> 
> 时间：2012-09-05T15:19:16.080
> 
> 标签：c#, xml, xmldocument

我有以下格式的 XML，可以手动或脚本输入到文本框中：

```
<instructions>
  <step index="1">Do this</step>
  <step index="2">Do that</step>
</instructions> 
```

我希望能够单击一个按钮以向指令元素添加一个属性，这样所有 XML 都将保持不变，但文本框中生成的 XML 将如下所示：

```
<instructions iterations="3">
  <step index="1">Do this</step>
  <step index="2">Do that</step>
</instructions> 
```

我能够将 XML 放入 XmlDocument，但在添加元素并将结果返回到文本框中时遇到了麻烦。

任何帮助，将不胜感激！

这是我迄今为止根据反馈获得的代码：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(textBoxInstructions.Text);

var attr = xmlDoc.CreateAttribute("iterations");
attr.InnerText = "3";
string strNewXML = xmlDoc.InnerXml;

textBoxInstructions.Text = strNewXML; 
```

然而，旧的和新的一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:33:01.810

尝试在按钮的单击事件上调用以下函数。

```
 public void populateNewXML()
        {
            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.LoadXml(textBoxInstructions.Text);
            var attr = xmlDoc.CreateAttribute("iterations");
            attr.InnerText = "3";
            xmlDoc.GetElementsByTagName("instructions")[0].Attributes.Append(attr);
            textBoxInstructions.Text = xmlDoc.InnerXml;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:23:38.923

您可以尝试使用此代码

```
XmlDocument doc = new XmlDocument(); 
doc .LoadXml(textBoxInstructions.Text); 

var attr = doc.CreateAttribute("iterations");
attr.InnerText = "3";
doc .Attributes.Append(attr);

 StringWriter sw = new StringWriter();
 XmlTextWriter xw = new XmlTextWriter(sw);
 doc.WriteTo(xw);
 yourTextBox.Text = sw.ToString(); 
```

对于元素

```
var xmlElement = doc.CreateElement("...");
xmlElement.SetAttribute("Name","Value"); 
```

# django - Django error - no module named

> ID：12284667
> 
> 赞同：4
> 
> 时间：2012-09-05T15:19:16.647
> 
> 标签：django, module

Here is my relevant directory structure (Windows 7, Python 2.7, virtualenv)

```
-userProf
-   -   manage.py
    -   -UserProfile
            -   sampleapp_db
            -   urls.py
            -   views.py
            -   wsgi.py
            -   __init__.py
            -   
            -libs
            -   -   __init__.py
            -   -allauth
            -       -   app_settings.py
            -       -   models.py
            -       -   tests.py
            -       -   urls.py
            -       -   utils.py
            -       -   __init__.py
            -       -   
            -       -account
            -       -   -   admin.py
            -       -   -   context_processors.py
            -       -   -   models.py
            -       -   -   urls.py
            -       -   -   __init__.py
            -       -socialaccount
            -       -   -   admin.py
            -       -   -   context_processors.py
            -       -   -   models.py
            -       -   -   urls.py
            -       -   -   views.py
            -       -   -   __init__.py
            -       -   -   
            -       -templates
            -           -account
            -           -   -   base.html
            -           -   -   email.html
            -settings
            -       base_settings.py
            -       dev.py
            -       __init__.py
            -       
            -static
                -css 
```

I get the following error when I try to run this django app **Error: No module named account**

I have read other posts on SO that refer to the syspath being the issue or that the appname matches the project name

[Django Shell No module named settings](https://stackoverflow.com/questions/7367577/django-shell-no-module-named-settings)

...as a result of this, I added the following statements in the base_settings.py file

```
import sys
base = os.path.abspath(os.path.dirname(os.path.dirname(__file__)))
base_parent = os.path.dirname(base)
sys.path.append(base)
sys.path.append(base_parent)
sys.path.append(os.path.join(base,'libs'))
sys.path.append(os.path.join(base,'libs','allauth','account')) 
```

I verified that the sys.path is correct by putting a break in PyCharm and evaluating sys.path

*Should I be putting this in manage.py?*

Some other SO postings referred to not being able to import the module but I can launch the python console and import UserProfile.libs.allauth.account without any exceptions being thrown!

My base_setings.py has the following relevant section

```
INSTALLED_APPS = (
    'UserProfile.libs.allauth.account',
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:35:49.843

looks like libs/allauth dir is missing the file;

```
__init__.py 
```

Based on comments the final solution was to update the sys.path file in the manage.py file

Making the changes in the settings.py were not being seeing as it was not able to get to the settings.py file, until changes were made to the manage.py file.

# text - 为什么这么短的代码不起作用？

> ID：12284673
> 
> 赞同：0
> 
> 时间：2012-09-05T15:19:28.963
> 
> 标签：text, applescript

只是一个简单的问题：以下 AppleScript 代码有什么问题？它应该做的是获取字符串中文本项（由用户提供的分隔符分隔）的位置。但到目前为止，它不起作用。脚本调试器简单地说，“无法继续 return_string_position”，没有任何具体错误。关于有什么问题的任何想法？

```
tell application "System Events"
    set the_text to "The quick brown fox jumps over the lazy dog"
    set word_index to return_string_position("jumps", the_text, " ")
end tell

on return_string_position(this_item, this_str, delims)
    set old_delims to AppleScript's text item delimiters
    set AppleScript's text item delimiters to delim
    set this_list to this_str as list
    repeat with i from 1 to the count of this_list
         if item i of this_list is equal to this_item then return i
    end repeat
    set AppleScript's text item delimiters to old_delims
end return_string_position 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:22:14.570

您的问题是系统事件认为该功能`return_string_position`是它自己的功能之一（如果您查看字典，您会发现它不是）。这很容易解决；只需`my`在调用之前添加`return_string_position`.

您的新代码：

```
tell application "System Events"
    set the_text to "The quick brown fox jumps over the lazy dog"
    set word_index to my return_string_position("jumps", the_text, " ")
end tell
... 
```

或者您可以使用 adayzdone 的解决方案。在这种情况下，他/她的解决方案非常适合这项工作，因为在处理简单的文本内容时确实不需要针对系统事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:53:10.973

tell system events 命令不正确，应排除。此外，您不需要使用“”的文本项目分隔符来制作单词列表，只需使用“every word of”即可。最后，您的代码将仅返回传递参数的最后一个匹配项，这将返回每个匹配项。

```
on return_string_position(this_item, this_str)
    set theWords to every word of this_str
    set matchedWords to {}
    repeat with i from 1 to count of theWords
        set aWord to item i of theWords
        if item i of theWords = this_item then set end of matchedWords to i
    end repeat
    return matchedWords
end return_string_position

return_string_position("very", "The coffee was very very very very very ... very hot.") 
```

# java - 从 Tumblr 解析 JSONObject

> ID：12284678
> 
> 赞同：1
> 
> 时间：2012-09-05T15:19:35.510
> 
> 标签：java, android, json, parsing, tumblr

我正在尝试自学制作 android 应用程序，因此我正在尝试创建一个应用程序，在列表视图中显示来自 tumblr 帐户的图像。

我在解析 JSONObject 时遇到了一些问题，并且我的应用程序由于 nullPointerException 而崩溃。

我的代码如下所示：

```
public class Example extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<Tweet> tweets;
    try {
        tweets = getTweets();
        ListView listView = (ListView) findViewById(R.id.ListViewId);
        listView.setAdapter(new UserItemAdapter(this, R.layout.listitem,
                tweets));
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public class UserItemAdapter extends ArrayAdapter<Tweet> {
    private ArrayList<Tweet> tweets;

    public UserItemAdapter(Context context, int imageViewResourceId,
            ArrayList<Tweet> tweets) {
        super(context, imageViewResourceId, tweets);
        this.tweets = tweets;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.listitem, null);
        }

        Tweet tweet = tweets.get(position);
        if (tweet != null) {

            ImageView image = (ImageView) v.findViewById(R.id.avatar);

            if (image != null) {
                image.setImageBitmap(getBitmap(tweet.image_url));
            }
        }
        return v;
    }
}

public Bitmap getBitmap(String bitmapUrl) {
    try {
        URL url = new URL(bitmapUrl);
        return BitmapFactory.decodeStream(url.openConnection()
                .getInputStream());
    } catch (Exception ex) {
        return null;
    }
}

public ArrayList<Tweet> getTweets() throws ClientProtocolException,
        IOException, JSONException {
    String searchUrl = "http://api.tumblr.com/v2/blog/www.richkidsofinstagram.tumblr.com/posts?api_key=API_KEY";

    ArrayList<Tweet> tweets = new ArrayList<Tweet>();

    HttpClient client = new DefaultHttpClient();
    HttpGet get = new HttpGet(searchUrl);

    ResponseHandler<String> responseHandler = new BasicResponseHandler();

    String responseBody = null;
    try {
        responseBody = client.execute(get, responseHandler);
    } catch (Exception ex) {
        ex.printStackTrace();
    }

    JSONObject jsonObject = new JSONObject(responseBody);

    JSONArray arr = null;

    try {
        arr = jsonObject.getJSONArray("results");
    } catch (Exception ex) {
        Log.v("TEST", "Exception: " + ex.getMessage());
    }

    for (int i = 0; i < arr.length(); i++) {
        Tweet tweet = new Tweet(arr.getJSONObject(i).getString("photos"));
        tweets.add(tweet);
    }

    return tweets;
}

public class Tweet {

    public String image_url;

    public Tweet(String url) {

        this.image_url = url;
    }
    }
    } 
```

nullPointerException 发生在第 124 行：

```
 for (int i = 0; i < arr.length(); i++) {
        Tweet tweet = new Tweet(arr.getJSONObject(i).getString("photos"));
        tweets.add(tweet);
    } 
```

我还通过 www.jsonlint.com 验证了地址，JSON 如下所示：

```
{
"meta": {
    "status": 200,
    "msg": "OK"
},
"response": {
    "blog": {
        "title": "Rich Kids Of Instagram",
        "posts": 154,
        "name": "richkidsofinstagram",
        "url": "http://richkidsofinstagram.tumblr.com/",
        "updated": 1346803265,
        "description": "They have more money than you and this is what they do.
        "ask": true,
        "ask_anon": true
    },
    "posts": [
        {
            "blog_name": "richkidsofinstagram",
            "id": 30900248446,
            "post_url":          "http://richkidsofinstagram.tumblr.com/post/30900248446/hamptons-are-good",
            "slug": "hamptons-are-good",
            "type": "photo",
            "date": "2012-09-04 23:58:45 GMT",
            "timestamp": 1346803125,
            "state": "published",
            "format": "html",
            "reblog_key": "2KosMjea",
            "tags": [
                "pool",
                "hamptons",
                "summer",
                "rich",
                "wealth"
            ],
            "highlighted": [],
            "note_count": 99,
            "caption": "<p><span>The Hamptons are…….. good. by matthewmorton</span></p>",
            "photos": [
                {
                    "caption": "",
                    "alt_sizes": [
                        {
                            "width": 500,
                            "height": 500,
                            "url": "http://24.media.tumblr.com/tumblr_m9uiqy9Mi71rb86ldo1_500.jpg"
                        },
                        {
                            "width": 400,
                            "height": 400,
                            "url": "http://25.media.tumblr.com/tumblr_m9uiqy9Mi71rb86ldo1_400.jpg"
                        },
                        {
                            "width": 250,
                            "height": 250,
                            "url": "http://25.media.tumblr.com/tumblr_m9uiqy9Mi71rb86ldo1_250.jpg"
                        },
                        {
                            "width": 100,
                            "height": 100,
                            "url": "http://25.media.tumblr.com/tumblr_m9uiqy9Mi71rb86ldo1_100.jpg"
                        },
                        {
                            "width": 75,
                            "height": 75,
                            "url": "http://25.media.tumblr.com/tumblr_m9uiqy9Mi71rb86ldo1_75sq.jpg"
                        }
                    ],
                    "original_size": {
                        "width": 500,
                        "height": 500,
                        "url": "http://24.media.tumblr.com/tumblr_m9uiqy9Mi71rb86ldo1_500.jpg"
                    }
                }
            ]
        }, 
```

我认为问题是我没有指定我想要的图片大小或类似的东西，但我不知道如何解决这个问题。

如果有人可以帮助我解决这个问题，那将是非常受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:39:53.667

请注意确定哪一行是 124，复制并粘贴您的代码，结果总共只有约 115 行？无论如何，这里是：

```
for (int i = 0; i < arr.length(); i++) { 
```

这通常应该没问题，因为如果没有名为“results”的数组，对 set 的调用`arr`应该引发异常。`JSONException`但是，您吃掉了该异常，然后将其记录下来，这可能会保留`arr`为`null`. 另外，我在您的 JSON 中没有看到任何“结果”，您的意思是“响应”吗？如果你得到一个`NullPointerException`.

如果您愿意，可以在这里停止阅读，但要解释为什么我猜接下来的两行不是 124 / 不是引发异常的那一行：

```
Tweet tweet = new Tweet(arr.getJSONObject(i).getString("photos")); 
```

这看起来很安全，因为如果 arr 不为 null`getJSONObject()`应该为您的`i`值返回一些东西。如果找不到“照片” ，`getString()`会抛出一个。`JSONException`（我不确定那个`Tweet`类到底是什么，所以如果“照片”返回 null 并且`Tweet`构造函数死于 null 参数，那可能是它，但我不知道......）

```
tweets.add(tweet); 
```

这看起来也很安全，因为您初始化`tweets`为null，`new ArrayList<Tweet>();`即使`tweet`为 null，`ArrayList()`也不会有问题。

# sql - 如何插入具有特定主键标识的表 (1,1)

> ID：12284680
> 
> 赞同：6
> 
> 时间：2012-09-05T15:19:37.483
> 
> 标签：sql, sql-server

像一张表一样，我们总是更喜欢像 identity(1,1) 这样将标识作为主键，这样，当添加新行时，该列将从 1 开始递增 1。

所以我可以问我是否可以手动添加一行指定数字，就像我可以添加一行主键 100

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T15:20:37.880

```
set Identity_Insert yourtable on 
```

然后进行插入

```
insert yourtable (id, field) values(100,'hello') 
```

然后再关掉

```
set Identity_Insert yourtable off 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T15:21:28.807

是的你可以。使用[`SET IDENTITY_INSERT [ database. [ owner. ] ] { table } { ON | OFF }`](http://msdn.microsoft.com/en-us/library/aa259221%28v=sql.80%29.aspx)：

```
SET IDENTITY_INSERT YourTable ON

INSERT YourTable(Id, OtherField)
VALUES (100, 'Other Value')

SET IDENTITY_INSERT YourTable OFF 
```

# c++ - 指向数据成员的指针如何分配/存储在内存中？

> ID：12284681
> 
> 赞同：1
> 
> 时间：2012-09-05T15:19:40.890
> 
> 标签：c++, class, memory-management

这是一个对我来说没有意义的话题。可以声明和使用指向类数据成员的指针。然而，

1.  支持这个想法的逻辑是什么？【我说的不是语法，而是这个特性的逻辑】

2.  另外，如果我正确理解这一点，这将意味着在指针初始化时分配的内存量是无限的/可变的，因为当时可能存在任意数量的对象。此外，新对象可能会在运行时创建和销毁。因此，实际上，单个语句将导致大量分配/解除分配。与语言的其他部分相比，这似乎相当违反直觉。还是我对此的理解不正确？我不认为有任何其他单一的初始化语句会隐式地影响程序的执行。

3.  最后，如何为这些指针分配内存？它们相对于对象放置在哪里？是否可以看到这些指针的物理内存地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:23:43.693

> 指向数据成员的指针的单个声明为该类的每个对象创建指针。

不，不是的。指向成员的指针是与指针非常不同的特殊对象；它更类似于偏移量。给定一个指向类对象的指针和一个成员指针，你就可以得到一个成员的值；没有指向类对象的指针，指向成员的指针是无用的。

问题 2 和 3 源于相同的基本误解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:17:05.727

> 指向数据成员的指针的单个声明为该类的每个对象创建指针。

不，它会创建一个指向成员的指针（尽管可以作为从对象基础的偏移量）
然后您可以将它与指向对象的指针一起使用以获取该成员。

```
struct S
{
    int  x;
    int  y;
};

int S::*  ptrToMember = &S::x;  // Pointer to a member.

S   obj;
int*      ptrToData   = &obj.x; // Pointer to object
                                // that happens to be a member 
```

请注意，在创建指向成员的指针时，我们不使用对象（我们只使用类型信息）。所以这个指针是类中的一个偏移量，用来获取一个特定的成员。

您可以通过指针或对象访问数据成员。

```
(obj.*ptrToMember)   = 5;   // Assign via pointer to member (requires an object)
*ptrToData           = 6;   // Assign via pointer already points at object. 
```

> 为什么会发生这种情况，而不是创建一个指向类的一个特定实例的指针？

这称为指针。
一个类似但平行的概念（见上文）。

> 支持这个想法的逻辑是什么？

愚蠢的例子：

```
 void addOneToMember(S& obj, int S::* member) { (obj.*member) += 1; }

 void addOneToX(S& obj)    { addOneToMember(obj, &Obj::x);}
 void addOneToY(S& obj)    { addOneToMember(obj, &Obj::y);} 
```

> 另外，如果我正确理解这一点，这将意味着在指针初始化时分配的内存量是无限的/可变的，因为当时可能存在任意数量的对象。

不，因为指向成员的指针只是对象的偏移量。您仍然需要实际对象来获取值。

> 最后，如何为这些指针分配内存？

与其他对象相同。就布局而言，它们没有什么特别之处。
但实际布局是实现定义的。因此，如果不参考编译器，就无法回答这个问题。但这对你来说真的没有用。

> 是否可以看到这些指针的物理内存地址？

当然。它们就像其他物体一样。

```
 // Not that this will provide anything meaningful.
 std::cout.write(reinterpret_cast<char*>(&ptrToMember), sizeof(ptrToMember));

 // 1) take the address of the pointer to member.
 // 2) cast to char* as required by write.
 // 3) pass the size of the pointer to member 

 // and you should write the values printed out.
 // Note the values may be non printable but I am sure you can work with that
 // Also note the meaning is not useful to you as it is compiler dependent. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:23:04.443

在内部，对于没有虚基的类，指向成员数据的指针只需要保存数据成员相对于该类型对象开头的偏移量。使用虚拟基地，它有点复杂，因为虚拟基地的位置可以改变，这取决于最衍生对象的类型。无论如何，都涉及少量数据，当您取消引用指向数据成员的指针时，编译器会生成适当的代码来访问它。

# c# - OleDb 异常。没有为一个或多个必需参数指定值

> ID：12284682
> 
> 赞同：4
> 
> 时间：2012-09-05T15:19:41.670
> 
> 标签：c#, excel

```
string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + Application.StartupPath + "\\a.xlsx" + ";Extended Properties='Excel 12.0 Xml;HDR=No'";
        OleDbConnection conn = new OleDbConnection(connString);
        OleDbCommand cmd = new OleDbCommand("Update [tablenameeee$] SET A1='15'", conn);
        conn.Open();
        cmd.ExecuteNonQuery();
        conn.Close(); 
```

我想访问 excel 中的特定单元格，并更改其值。但我有例外

OleDb 异常。没有为一个或多个必需参数指定值。解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:21:10.600

如果您使用 HDR=NO，则列名称为 F1、F2 F3 等......

```
OleDbCommand cmd = new OleDbCommand("Update [tablenameeee$] SET F1='15'", conn); 
```

但我认为您应该指定一个 WHERE 子句来分隔受影响的行。
请记住，使用 OleDb 您不应该考虑行/列，而是考虑记录。

作为替代方案，如果您确切知道要更新的行/列，您可以使用

```
OleDbCommand cmd = new OleDbCommand("Update [tablenameeee$A1:A1] SET F1='15'", conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:00:06.333

也许你需要一个 where 子句

```
Update [tablenameeee$] set [F1] = 15 where [F2] = 3 
```

或者，如果您想访问一个特定的单元格，并且您知道它是哪个单元格，那么史蒂夫的解决方案将像手套一样适合您。

# iis-7 - asp.net 本地化资源 dll 不在临时 asp.net 互联网文件中创建

> ID：12284686
> 
> 赞同：0
> 
> 时间：2012-09-05T15:20:05.273
> 
> 标签：iis-7, localization, 64-bit, application-pool, aspnet-compiler

我们将本地化资源存储在与 Web 应用程序不同的程序集中。在使用 xcopy 部署到我们的 Web 服务器后，aspnet_compiler 不会生成本地化的卫星 resources.dll 文件（在临时 asp.net 文件中）。

有时，如果我们启动/停止应用程序池，它们会被创建，但对于何时发生这种情况似乎没有任何一致性。

关于在哪里/寻找什么来解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:19:23.063

事实证明，问题是权限问题。位置：c:\windows\microsoft.net\framework\v4.0.30319\temporary asp.net files\ 没有足够的权限。事实证明，本地化文件是根据向应用程序发起第一个请求的人创建的。因此，如果请求应用程序的帐户没有此目录的权限，则除了本地化版本之外的所有文件都是由 asp.net 编译器生成的！

# jquery - jQuery ajax SOAP 多部分响应pdf

> ID：12284687
> 
> 赞同：2
> 
> 时间：2012-09-05T15:20:06.550
> 
> 标签：jquery, ajax, soap, mime, multipart

我正在发送一个 jQuery ajax 请求，`data:xml`并`Content-Type:text/xml`得到以下响应：

```
--MIME_boundary
Content-Type: text/xml; charset=utf-8
Content-Transfer-Encoding: binary
Content-ID: <SOAP-ENV:Envelope>

<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope> .............</SOAP-ENV:Envelope>
--MIME_boundary
Content-Type: application/pdf
Content-Transfer-Encoding: binary

.... pdf binary data ..... 
```

据我了解，响应是一个带有附件的多部分......但是我如何单独提取肥皂部分和 pdf 原始数据部分并使用二进制数据来构建这个 pdf？感谢任何帮助。

还要注意这一点：[http ://www.w3.org/TR/SOAP-attachments#SOAPReferenceToAttachements](http://www.w3.org/TR/SOAP-attachments#SOAPReferenceToAttachements)

更新：经过一番研究，总结了许多不同的回答，我遇到了以下问题：

*   Ajax - jquery .ajax() 函数 - 仅处理文本/xml 响应，这就是它不处理二进制数据的原因（在某处读取）。但是，如果我得到多部分 -> Content-Type: application/pdf -> 我正在获取其中的二进制数据。
*   二进制数据可以转换为 base64，然后使用 html5 数据：-> 但这存在复杂的问题，每个浏览器的行为都不同。

现在，我的结论是：

*   只需发出 ajax 请求，获取 URL 路径并使用 window.location.href 直接从服务器下载文件

如果我在这里错了，请纠正：jQuery Ajax cannot handle multipart MIME reponses??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:27:22.877

AJAX 使用 UTF-8 编码，因此不能支持二进制数据传输。您需要对二进制数据进行 Base64 编码，然后在另一端对其进行解码。您需要相应地设置标题。

```
Content-Transfer-Encoding: base64
Content-Description: somefile.pdf
Content-Disposition: attachment;
filename="somefile.pdf"

....then your Base-64 data blob ... 
```

# vb.net - 如何判断 TCP 连接中是否有另一条消息待处理

> ID：12284690
> 
> 赞同：0
> 
> 时间：2012-09-05T15:20:18.670
> 
> 标签：vb.net, sockets, tcp

我有一个使用 TCP 发送文件的发送应用程序。有时这些文件包含一条消息，有时文件可能包含多条消息。不幸的是，我无权访问发送应用程序的代码。

我正在编辑旧代码以接收这些消息。当发送一条消息时，我已经设法让旧版应用程序接受文件。但是，由于我在收到一条消息后断开了套接字，因此发件人给出了断开连接错误。

我写了一个小过程来帮助确定是否还有其他消息。如果它有效，我将把它合并到代码中，但结果好坏参半：

```
Dim check(1) As Byte
If (handler.Receive(check, SocketFlags.Peek) > 0) Then
   Dim bytesRec As Integer
   ReDim bytes(1024)
   bytesRec = handler.Receive(bytes)
End If 
```

如果有另一条消息正在发送，这将检测到它。但是，如果文件只有一条消息，它会锁定接收，直到我发送另一个文件，然后它被接受。

有没有办法判断如果流为空，是否还有另一条消息未锁定？

我不会发布所有接受消息的代码，因为它是一个遗留的老鼠窝，但总体思路如下：

```
s2 = CType(ar.AsyncState, Socket)
handler = s2.EndAccept(ar)
bytes = New Byte(1024) {}
Dim bytesRec As Integer = handler.Receive(bytes)
' Send Ack/Nak.  
numAckBytesSent = handler.Send(myByte) 
```

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:31:32.420

[`Socket.Select`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.select.aspx)可以用作轮询套接字以提高可读性的快速方法。传入 0 秒的超时，以及可读性列表中有问题的套接字，它会简单地检查并立即报告。

另外两个选项可能是[`Socket.ReceiveTimeout`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivetimeout.aspx)在您的套接字上设置，或者使用 使套接字非阻塞[`Socket.Blocking`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.blocking.aspx)，这样您就可以（作为`Receive`调用的一部分）查明是否有传入数据。但是，这些在 .NET 中看起来有点不方便，因为它们会引发异常而不是简单地返回一个值，这可能会使代码更长一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:48:13.713

继续阅读。如果什么都没有，您将获得某种流结束指示，具体取决于您的 API。

# c++ - C/C++ 中的字符串处理

> ID：12284702
> 
> 赞同：3
> 
> 时间：2012-09-05T15:20:58.540
> 
> 标签：c++, c, string, obfuscation, name-mangling

我正在寻找一种在 C/C++ 中进行字符串修饰的方法。该软件的要求是不存在纯文本字符串（不需要加密，只需修改），我正在尝试找出满足此要求的阻力最小的路径。类名的混淆和修改是通过相对容易获得的工具来解决的，但字符串修改似乎是一个更难跨越的障碍。

如果这是标准答案，我对软件的后处理感到满意。他们的工具是否已经为此编写了，还是我需要破解自己的脚本来处理字符串？

我也明白，对静止的琴弦进行修饰并不是真正的安全。我明白了，你可能也明白了，但是嘿，这是软件上的一个要求，所以我必须满足它。

谢谢！斯蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:56:01.443

一个简单的 ROT13 加密器/解密器。无需编写解密函数。它之所以称为 ROT13，是因为它只是将 13 个字符旋转回其原始状态。

```
#include <iostream>
using namespace std;

  //encrypt or decrypt string
void ROT13_Encrypt_Decrypt_String(char str[]){

for( int i=0; str[i] != '\0'; i++ ){
    if(str[i] >= 'a' && str[i] <= 'm'){
        str[i] += 13;
    }

    else if(str[i] > 'm' && str[i] <= 'z'){
        str[i] -= 13;
    }

    else if (str[i] >= 'A' && str[i] <= 'M'){
        str[i] += 13;
    }

    else if(str[i] > 'M' && str[i] <= 'Z'){
        str[i] -= 13;
    }

}
}

int main()
{
    char mystring [] = "Hello World!";
    cout << "Original string: " << mystring << endl;

    //encrypt   
    ROT13_Encrypt_Decrypt_String(mystring);   

    cout << "Encrypted string: " << mystring << endl;

    //decrypt  
    ROT13_Encrypt_Decrypt_String(mystring);

    cout << "Decrypted string: " << mystring << endl;

    return 0;
} 
```

输出：

```
Original string: Hello World!
Encrypted string: Uryyb Jbeyq!
Decrypted string: Hello World!
Press any key to continue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:59:58.117

如果您正在处理 ASCII 文本，只需将每个字符的第 7 位设置为去明文，然后取消设置以将其转换为明文。

# c++ - 访问硬盘的未分配空间

> ID：12284703
> 
> 赞同：1
> 
> 时间：2012-09-05T15:20:59.147
> 
> 标签：c++, windows, winapi, filesystems, operating-system

如何从 Windows 访问和写入硬盘驱动器的未分配空间？

未分配的硬盘空间是指创建分区后硬盘上剩余的空间，或者只是硬盘上尚未分配给分区的可用空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:24:58.210

您需要读取硬盘的分区表，找到未分配的空间，然后读取该空间。此类操作需要直接访问磁盘。在 Vista 之前，可以调用 CreateFile("磁盘本身的特殊名称") 来像打开文件一样打开磁盘。在 Vista 和 Windows 7 中，由于 Windows 的安全限制（至少对于非管理员帐户），它不再可能。您可以使用我们的[RawDisk](http://www.eldos.com/rawdisk/)产品访问磁盘扇区，以便在 Vista 和更高版本的系统中进行读写。请注意，RawDisk 包含需要安装管理权限的内核模式驱动程序（这些权限并不总是可用）。

# javascript - 将 html、js、css 打包为桌面应用程序

> ID：12284705
> 
> 赞同：9
> 
> 时间：2012-09-05T15:21:00.987
> 
> 标签：javascript, web-applications, package, desktop-application

我有一个在线工具，您可以在其中进行演示，然后直接在线预览或下载它们以供稍后在演示中使用。这已在 Flash 中完成。为演示文稿创建了一个 xml，然后 flash 使用它来显示所有内容。与可下载版本相同，您可以获得包含 Flash 投影文件、xml 和所有所需文件的包。效果很好。

我现在用 html、css 和 javascript 重新制作了它，因此它可以与移动/ipad 一起使用，并且在线预览效果很好，我还没有为可下载版本找到一个好的解决方案。

I have tried appjs which works, but it is a bit big and not stable enough yet (must be stable for the people using it). I have also tried Zinc from multidmedia where I create an app that displays a web browser where I put the presentation. However, since Zinc is using IE7 for the browser on windows it needs flash video which Zinc can't handle(weird, I know).

What I really would want is to be able to package everything (html, css, js, images, videos, xml) from my server into presentation.app or presentation.exe and it works, it would however be ok to have the presentation viewer (html, css, js) packaged togheter as an app and the presentation material in a seperate folder where the xml, images and videos for the presentation is.

Anyone have any tips?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:19:10.383

这里有 3 个开源解决方案：

1.  [http://appjs.com/](http://appjs.com/)
2.  [http://deskshell.org/](http://deskshell.org/)
3.  [http://www.tidesdk.org/](http://www.tidesdk.org/)

Adobe AIR 也可以是一个解决方案......

**编辑**：[最后一条推文](https://twitter.com/appjs)指出 AppJS 已在 2013 年被弃用，取而代之的是[node-webkit](https://github.com/nwjs/nw.js/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:19:03.997

如果您只能使用 Windows 8，则可以将 JS/HTML 应用程序嵌入为 WinRT 应用程序。我前段时间对此进行了测试，大多数 JS 库（例如 jQuery）在 WinRT shell 中工作都没有问题。参见例如：

[http://blogs.msdn.com/b/davrous/archive/2012/08/21/windows-8-html5-metro-style-app-how-to-create-a-small-rss-reader-in- 30min-part-1-2.aspx](http://blogs.msdn.com/b/davrous/archive/2012/08/21/windows-8-html5-metro-style-app-how-to-create-a-small-rss-reader-in-30min-part-1-2.aspx)

# caching - 如何清除我自己服务器上的所有 osm 切片缓存

> ID：12284707
> 
> 赞同：7
> 
> 时间：2012-09-05T15:21:11.330
> 
> 标签：caching, openstreetmap, mapnik

我目前正在开发一个基于 OpenStreetMap 的地图项目，使用 Mapnik、渲染和 mod_tile（就像他们网站上的 osm 一样）。我按照一些教程在我的个人计算机（Ubuntu 12.04）上构建了一个 osm 切片服务器。它运行良好，我已经加载了一个国家的许多地区（不是整个星球，只是地球的一部分）。

我意识到 mod_tile 正在为每个渲染的图块使用缓存，所以我决定研究**如何清除它**。 [到目前为止我发现的唯一解决方案](http://wiki.openstreetmap.org/wiki/Tile_expire_methods)是使用`render_expired`二进制文件，但我不明白如何通过这种方式将所有图块设置为过期（而且没有差异文件）......我试图找到这些图像的位置但是我没有找到他们。

我需要一些帮助，所以如果有人有想法......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-20T14:29:01.240

只需删除提到的`/var/lib/mod_tile/default`（`rm -rf`如果你敢的话就使用）并重新启动渲染的守护进程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-13T07:57:51.033

运行这个：

```
sudo rm -rf /var/lib/mod_tile/ajt
sudo service renderd restart 
```

ajt 是您的 tile 文件夹，它可能不同并且可能不止一个。

如果您不小心删除了您的 ajt（或任何其他）文件夹本身：

```
sudo mkdir /var/lib/mod_tile/ajt
sudo chown renderaccount /var/lib/mod_tile/ajt 
```

# linux - 如何在 POSIX 环境中分配大于 0 字节的文件而不写入内容？

> ID：12284712
> 
> 赞同：1
> 
> 时间：2012-09-05T15:21:23.683
> 
> 标签：linux, macos, unix, posix, createfile

我需要能够非常快速地创建大量文件，随机大小的 1k-64k 平均 32k。我发现的一种方法是使用 unix 命令**dd**将字节从 /dev/urandom 复制到新文件中。但是，我试图通过创建指向未分配空间的文件链接来节省时间，而不将随机字节写入磁盘。

这在类 Unix 环境中是否可行，如果可以，我将如何处理？

如果没有，这可以用一个小的 C 程序来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:00:37.680

从命令行，`mkfile`或`dd`任何数量的其他（不一定是 POSIX 标准）实用程序。我会注意到，从而`/dev/zero`不是复制`/dev/urandom`可以明显更快，尤其是在 CPU 速度较慢的旧系统上。

如果你想用 C 或 C++ 代码做一些事情，有`truncate()`和`ftruncate()`。可能大多数 Perl/Python/whatever 绑定也以某种方式公开了 system/libc 调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T15:25:09.827

所以你想`mkfile {size}[b|k|m|g] filename`在cwd？

# linq - LINQ 包含与加入。它们是等价的吗？

> ID：12284719
> 
> 赞同：45
> 
> 时间：2012-09-05T15:21:41.857
> 
> 标签：linq

我在 linq 中使用 join 来加入 2 个表。加入和包含有什么区别。据我所知，他们的行为都是一样的。

```
 Include vs. Join 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-05T18:22:44.460

Included 旨在保留原始对象结构和图形。需要一个 Join 来投影对象图的扁平表示或连接通过图不自然相关的类型（即，将客户的城市与运输设施的城市连接起来）。

比较以下内容： `db.Customers.Include("Orders")` 生成一个 IEnumerable，其中每个都可以在对象图中包含其对应的 Orders 列表，如下所示：

```
Customer 1
   Order
   Order
   Order
Customer 2
   Order
   Order 
```

相反，如果您对投影到匿名类型的连接执行相同操作，您可以获得以下结果：

```
 from c in db.Customers 
    join o in db.Orders on c.CustomerId equals o.CustomerId 
    select new {c, o} 
```

这会产生一个新`IEnumerable<Anonymous<Customer, Order>>`的客户为每个订单重复的地方。

```
{ Customer1, orderA }
{ Customer1, orderB }
{ Customer1, orderC }
{ Customer2, orderD }
{ Customer2, orderE }
{ Customer2, orderF } 
```

虽然两者都可能向数据库发出相同的请求，但结果类型可能完全不同。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-05T15:27:36.973

从某种意义上说，是的。Include 被实现为连接。根据所包含链接的可空性，它是内连接或左连接。

您始终可以使用联接自己构建包含，如下所示：

```
db.Users.Select(u => new { u, u.City }) 
```

这是用户所在城市的“包含”。它表现为 SQL 连接。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-08-31T04:45:57.900

如果您只需要`Orders`一些`Customers`. 博客应用程序的好例子总是`Comments`在下面显示`Articles`。然后`Include`是你的工作方式。

`Join`如果您需要一些并使用实体`Customers`中包含的一些数据过滤掉它们，则相反会更有帮助。`Orders`比如你想整理出含有粗俗词语的报警`Articles`。`Articles``Comments`

此外，如果您的`Orders`实体包含大量数据（许多列）占用大量内存并且您不需要所有这些数据，那么`join`效率会更高，但这里总是有一个问题，即“大量数据”或“多列”是什么意味着所以先测试将是最好的选择。

# html - 在所有现代浏览器中获得相同的阴影（IE 版本 9 除外）

> ID：12284725
> 
> 赞同：0
> 
> 时间：2012-09-05T15:21:51.317
> 
> 标签：html, firefox, google-chrome, css, cross-browser

我一直试图在所有现代浏览器中获得相同的阴影（IE 版本 9 除外）。不幸的是，例如 Google Chrome 并没有像 Firefox 那样模糊它。

这是我的代码..

**HTML：**

```
<div id="box">Every browser should see my shadow the same way!</div> 
```

**CSS：**

```
#box {
    box-shadow: 0 4px 4px -4px #000, 4px 0 0 0 #E8EBEF;
    padding: 10px;
    background-color: #E8EBEF;
    width: 200px;
} 
```

这是一个小提琴：http: [//jsfiddle.net/hLp8J/1/](http://jsfiddle.net/hLp8J/1/)

我该怎么做才能在至少最新版本的 Firefox、Google Chrome、Safari 和 Opera 中获得相同的阴影？谢谢你的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:09:18.003

不同的渲染引擎绘制阴影略有不同（例如，Firefox 的衰减比基于 Webkit 的浏览器更平滑，如果你问我看起来更好）

保证它在不同浏览器中看起来相同的唯一方法是对它保持沉默并使用图像。

否则，您需要找到一种方法来处理细微的差异，而不会对您的设计产生不利影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:09:33.290

您可以尝试在线**[CSS3 Generator](http://css3generator.com/)**或**[CSS3 Box Shadow Generator](http://css3gen.com/box-shadow/)**或**[CSS3 Maker](http://www.css3maker.com/)**

# html - 防止两个单词之间换行的破折号

> ID：12284726
> 
> 赞同：6
> 
> 时间：2012-09-05T15:21:52.870
> 
> 标签：html

有没有办法让破折号（ - ）在结束一行时不会破坏单词？（就像`&nbsp;`防止两个单词之间换行一样）

我目前遇到的问题是一篇博客文章（动态），其中包含 X-Ray 一词。可悲的是，它落在了一行的末尾，所以我得到了

```
Lorem ipsum dolor si amet X-
Ray 
```

我想防止这种情况，并得到这样的结果

```
Lorem ipsum dolor si amet
X-Ray 
```

我不能只是`<br />`一切，因为根据您在网站上的位置，它不会在任何地方都卡在那个位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:24:28.450

尝试不间断的连字符，`&#8209;`

[http://www.fileformat.info/info/unicode/char/2011/index.htm](http://www.fileformat.info/info/unicode/char/2011/index.htm)上的信息

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T15:26:49.127

您可以使用*[Unicode 字符 'NON-BREAKING HYPHEN' (U+2011)](http://www.fileformat.info/info/unicode/char/2011/index.htm)*。

```
HTML Entity (decimal)   &#8209;
HTML Entity (hex)   &#x2011;
How to type in Microsoft Windows    Alt +2011
UTF-8 (hex) 0xE2 0x80 0x91 (e28091)
UTF-8 (binary)  11100010:10000000:10010001
UTF-16 (hex)    0x2011 (2011)
UTF-16 (decimal)    8,209
UTF-32 (hex)    0x00002011 (2011)
UTF-32 (decimal)    8,209
C/C++/Java source code  "\u2011"
Python source code  u"\u2011" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:19:23.507

工作最广泛的方式是`<nobr>X-ray</nobr>`. 尽管不是任何 HTML 规范的一部分，但该`nobr`标签运行良好。

如今，使用不间断的连字符 U+2011（建议在其他答案中；如果您知道如何在编辑器中执行此操作并且您使用的是 UTF-8，您也可以直接输入它）几乎可以广泛使用。不过也有风险。[对 U+2011](http://www.fileformat.info/info/unicode/char/2011/fontsupport.htm)的支持在字体中并不普遍。这意味着除非您采取特殊措施来使用包含它的字体或使用合适的备份字体，否则不间断连字符很可能看起来与正常连字符不同（这主要是网络上的“Ascii 连字符”页）。

这意味着 foo-bar 和 foo-bar（带有不间断连字符）可能看起来不同，因为它们来自不同的字体。可能需要训练有素的眼睛或印刷师才能看到差异，但在某些字体组合中，差异是显而易见的。

使用`nobr`，你没有这个问题，因为使用了相同的字符。这同样适用于 using `<span style="white-space: nowrap">X-ray</span>`，但它有点笨拙并且有点不太可靠（当 CSS 被禁用时不起作用）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T15:24:31.003

[该站点](http://www.fileformat.info/info/unicode/char/2013/index.htm)将为您提供比您需要的更多的信息。

```
&#8211; 
```

是你所追求的。

# python - 如何将包含连字符的属性添加到 WTForms 字段

> ID：12284732
> 
> 赞同：11
> 
> 时间：2012-09-05T15:22:11.043
> 
> 标签：python, wtforms

例如，调用 WTForms 字段对象会生成呈现的字段，并且任何参数都被视为属性。

```
form.field(attribute='value') 
```

会返回类似的东西

```
<input attribute='value'> 
```

如何添加 HTML5 自定义数据属性，例如包含连字符的 data-provide，使它们在 python 中无法解析为单个关键字参数？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-05T16:20:33.167

使用相应的键值对创建一个字典，并使用 ** 将其传递给字段调用：

```
attrs = {'data-provide': "foo"}
form.field(**attrs) 
```

*编辑*：看起来@NiklasB 的评论应该是答案的一部分：对于那些使用带有[flask](http://flask.pocoo.org/) [-WTF](https://flask-wtf.readthedocs.org/en/latest/)`{{ form.field( **{'data-provide': 'foo'} ) }}`的烧瓶的人，请在模板中使用： 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-06T09:39:28.777

没有必要在 form.field 函数调用中使用这样的字典。** 将字典项解压缩为函数的命名参数，因此只需添加参数即可：

{{ form.field(data-provide='foo') }}

但是在该字段的任何必需参数之后执行此操作。换句话说，当您可以添加参数时，为什么要在此处解压缩字典？

# string - 在 python 字符串中查找重叠的 kmers

> ID：12284733
> 
> 赞同：2
> 
> 时间：2012-09-05T15:22:13.680
> 
> 标签：string, combinatorics, biopython

我试图在一个长二进制字符串中找到二进制 5-mers 的计数。也就是说，给定一个字符串 say: seq='000111100101101' ，我想计算每个 5-mer 出现的次数。我很容易生成了所有 32 次迭代的列表：

```
import re
from itertools import product  
combo = [ ''.join(x) for x in product('01', repeat=5) ] 
```

我现在的问题是计算重叠中每个组合的出现次数。（也就是说，我想检查长度为 5 的重叠窗口：0:4、1:5、2:6、3:7...（序列长度为 4 窗口的总和）。我不确定该怎么做所以以一种计算重叠窗口的方式。（combo[i] = seq.count(i) 似乎不起作用）。

谢谢！

示例 给定 seq 的期望输出：

```
seq: '11111101'
Combos: (11111 :2 ,  11101 :1 , 11110 :1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:09:20.120

简单的python实现`defaultdict`：

```
from collections import defaultdict
def C(s):
  d = defaultdict(int)
  for i in xrange(len(s)-4):
    d[s[i:i+5]] += 1
  return d

 C('010100101010101001111010000000001') 
```

# android - Android - 在单独的线程中手动停止服务

> ID：12284735
> 
> 赞同：0
> 
> 时间：2012-09-05T15:22:17.070
> 
> 标签：android, multithreading

我正在编写一个播放音频文件的应用程序，我希望它在最小化的同时继续这样做。我已经这样做了，但我希望音频播放在单独的线程上，因为根据 Android 开发者网站，CPU 密集型服务在单独的线程上工作得更好。

首先，我尝试使用 IntentService（这是完美的解决方案）。然而，由于一些愚蠢的原因，一旦代码执行，服务就会自行销毁——即在它**开始**播放文件之后。我无法阻止这一点。

然后我创建了一个运行服务的线程。但是，我不知道如何让线程在需要时停止服务——我能做的最好的事情是：

```
serviceThread = new Thread() {
        public void run() {
            while (true) {
                if (playAudio) {
                    startService(new Intent(getApplicationContext(),
                            MusicService.class));
                    playAudio = false;
                }
                if (stopAudio) {
                    stopService(new Intent(getApplicationContext(),
                            MusicService.class));
                    stopAudio = false;
                }
            }
        }
    }; 
```

显然，之后我将 startService 设置为 true 以启动服务，并将 stopService 设置为 true 以停止它。但是，我认为线程必须一直在做检查，因此一直在做很多无用的工作。我什至不确定为什么该应用程序正常工作，它不是每秒进行数百万次检查吗？

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:14:57.433

假设你不能阻塞服务运行所在的线程，如果你担心做太多的工作，你可以在循环的末尾添加一个 java.lang.Thread.Sleep。

您可能还想阅读线程调度和时间切片以了解您的应用程序仍在工作的原因（但可能使用了比必要更多的 CPU）。

# lucene - Lucene 中的否定查询问题

> ID：12284737
> 
> 赞同：0
> 
> 时间：2012-09-05T15:22:19.427
> 
> 标签：lucene

看看这个查询：

```
-HOSTNAME:ram AND SEVERITY:information 
```

上面的查询没有给我预期的结果。我知道我们需要将 * : * 附加到完全否定的查询中，我还发现可以通过将 * : * 附加到 HOSTNAME 搜索条件来解决上述情况，但这可能是一个严重的性能问题，因为我的应用程序直接从最终用户获取搜索查询。

我该如何解决这个问题并帮助我找到最佳解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:43:49.880

您的查询应该可以正常工作，但是，仅包括否定词不起作用：

```
-HOSTNAME:ram AND -SEVERITY:ERROR 
```

因为没有什么可以减去的（至少，我是这么认为的）。

# java - ArrayList 对象是否被复制或引用？

> ID：12284739
> 
> 赞同：0
> 
> 时间：2012-09-05T15:22:22.510
> 
> 标签：java

所以我正在阅读[这个](http://zetcode.com/tutorials/javagamestutorial/collision/)游戏教程，并且有代码可以让带有外星人/导弹的数组列表在碰撞时消失。

```
 ArrayList ms = craft.getMissiles();

    for (int i = 0; i < ms.size(); i++) {
        Missile m = (Missile) ms.get(i);

        Rectangle r1 = m.getBounds();

        for (int j = 0; j<aliens.size(); j++) {
            Alien a = (Alien) aliens.get(j);
            Rectangle r2 = a.getBounds();

            if (r1.intersects(r2)) {
                m.setVisible(false);
                a.setVisible(false);
            }
        }
    } 
```

在最后一个循环中，m.setVisible(false) 和 a.setVisible(false) 使特定的外星人/导弹不可见，但 'a' 和 'm' 不是 ArrayList 的一部分，它们是 ArrayList 对象被拉出并投射到 ' a' 和 'm' 但代码似乎可以正常工作，因为编码器没有将 'a' 或 'm' 对象插入回数组列表中的特定位置（或更新其在数组列表中的相应对象）。

这让我想到，'a' 和 'm' 是通过地址引用到数组列表中的第 i 个对象而不是副本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:24:00.550

是的。他们是参考。任何时候你说

```
A a = new A(); 
```

在 Java 中，`a`是一个引用，*而不是*实际的对象（常见的混淆来源）。

当您使用标准集合时，从该集合中获取元素将返回对包含对象的引用。因此，遍历集合并对包含的对象执行更改是微不足道的。

```
for(int i = 0; i < list.size(); i++) {
   list.get(i).clear(); // changes the object in the list...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T15:24:00.143

Java 中的对象总是通过引用复制，除非您克隆它们。因此，除非您使用原语，否则当您使用赋值运算符或从函数返回它时，它是通过引用复制的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:24:35.073

引用被复制，对象不会被复制，除非你调用像 clone() 这样的东西。

顺便说一句：ArrayList 包含引用。当您将对象的引用添加到 ArrayList 时，该对象不会被复制，并且不会在 ArrayList 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:24:19.560

`ArrayList.get()`为您提供对对象的引用，而不是副本。

# objective-c - UINavigationBar 不旋转

> ID：12284740
> 
> 赞同：0
> 
> 时间：2012-09-05T15:22:22.627
> 
> 标签：objective-c, ios, xcode, rotation, uinavigationbar

我遇到了一个小问题。我正在尝试使用 UINavigationController 栏开发一个应用程序，但它没有旋转，尽管我的 tableView 是。简单介绍一下，让您知道我现在的应用程序是什么：我有一个在 IB 中创建并在我的类 ViewController.h 中链接的 UITableView 和在 appDelegate.h 中创建的 UINavigationController。tableView 中的所有项目都可以点击，它会滑动到另一个 viewController 但这部分现在并不重要。我现在只是想在主视图中支持旋转。

我在我的 AppDelegate.h 中创建 UINavigationController，如下所示：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    UINavigationController *navigation;
}
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UIViewController *viewController; 
```

然后在 AppDelegate.m 我这样做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"MainViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

    return YES;
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    ViewController *viewController = [[ViewController alloc] init]; 
    viewController.title = @"Agrinuvo";
    [navigation pushViewController:viewController animated:NO];
    navigation = [[UINavigationController alloc] initWithRootViewController:viewController];
    navigation.navigationBar.tintColor = [UIColor darkGrayColor];
    [[UIBarButtonItem appearance] setTintColor:[UIColor orangeColor]];

    [_window addSubview:navigation.view];
} 
```

我在我的 ViewController.m viewDidLoad 方法中尝试了这些：

```
self.navigationController.navigationBar.autoresizesSubviews = YES;
self.navigationController.navigationBar.autoresizingMask =  UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

我可以调整 UINavigationBar 的大小，但我无法终生旋转它（仍在 ViewController.m 中）：

```
-(void) orientationChanged
{
CGRect frame = self.navigationController.navigationBar.frame;
if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationPortrait)
{
    self.view.transform = CGAffineTransformMakeRotation(0);
    frame.size.height = 44;
    frame.origin.y = 15;
}
if([[UIDevice currentDevice] orientation] == UIDeviceOrientationPortraitUpsideDown)
{
    self.view.transform = CGAffineTransformMakeRotation(M_PI * 1);
    frame.size.height = 44;
}
if([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight)
{
    self.view.transform = CGAffineTransformMakeRotation(M_PI * -0.5);
    frame.size.height = 32;
}
if([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft)
{
    self.view.transform = CGAffineTransformMakeRotation(M_PI * 0.5);
    frame.size.height = 32; 
}
self.navigationController.navigationBar.frame = frame;
} 
```

啊，是的，我也在我的所有控制器中尝试了这种方法，它在所有控制器中都返回 YES，但 NavigationBar 仍然没有旋转。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

所以我想知道是否真的可以旋转导航栏。我也像应该创建它一样创建它吗？我应该以这种方式启动我的 UINavigationController 还是应该在 IB 中创建它并将其链接到 .h 类？

很抱歉长时间阅读，感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:39:57.410

你应该让你的导航控制器成为窗口的根视图控制器。此外，在您的 applicationDidBecomeActive:method 中，您有这一行：[navigation pushViewController:viewController animated:NO]; 您在实例化导航之前使用它，因此该行没有做任何事情。

# visual-studio-2010 - 将 TOAD 的 SQL Tracker 与 Visual Studio 和 IIS 结合使用

> ID：12284743
> 
> 赞同：12
> 
> 时间：2012-09-05T15:22:37.007
> 
> 标签：visual-studio-2010, toad

我当前的项目使用 Visual Studio 2010 和 TOAD。它是一个带有 Oracle 11g 的 MVC 项目。我可以通过日志记录和/或调试获得我正在生成的 SQL，但是，由于我已经拥有 TOAD 许可证，我希望能够使用 Tools for Oracle 产品 SQL Tracker 在运行时获取 SQL，而无需使用日志记录或断点。

我假设我需要使用 devenv.exe（VS 可执行文件）进程，但我无法将它添加到 SQL Tracker 工具中。我得到错误：

```
cannot create process; error=[740] (the requested operation requires elevation.) 
```

任何谷歌搜索都说它与以管理员身份运行有关。我试图包含“RUNAS Administrator”的命令行参数（以及各种其他选项），但没有成功。

**更新：**

我现在可以开始监视 devenv.exe 进程。为此，我什至需要在启动 SQL Tracker 之前以管理员身份运行应用程序。但是，没有捕获任何输出。

我想我可能需要监视 IIS 进程（w3wp.exe）。当我单击开始监视此过程时，我现在收到错误：

```
Failed to create remote thread; error=8 (Not enough storage is available to process this command.) 
```

我相信监控 IIS 是正确的方法，但是，这个错误现在阻碍了我。谷歌再次没有帮助，我以管理员身份运行所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T04:10:37.187

根本原因可能有很多原因，但我怀疑一件事是缓存在 IIS 上。你可以从那里开始。

您可以尝试以下几件事。

[http://forums.iis.net/t/1150494.aspx?w3wp+exe+memory+usage+is+out+of+control](http://forums.iis.net/t/1150494.aspx?w3wp+exe+memory+usage+is+out+of+control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T10:22:56.477

以管理员身份运行 Studio 不一定也以管理员身份运行您的项目，想象一下安全漏洞。我相当有信心您可以通过修改清单使您的项目以管理员身份运行。[Forcing an application to Admin from config file](https://stackoverflow.com/questions/14800089/forcing-an-application-to-admin-from-config-file)有一篇文章，但没有人确认答案是否正确，但这并不意味着它不是。我注意到在很多情况下，C# 的答案比 stackoverflow 上的 VB.NET 更受欢迎。

# android - 如何检索有关在 android 中运行的应用程序的信息？

> ID：12284745
> 
> 赞同：2
> 
> 时间：2012-09-05T15:22:46.760
> 
> 标签：android, android-ndk

> **可能重复：**
> [如何获取我的设备中安装了多少应用程序以及名称或上次访问的信息？](https://stackoverflow.com/questions/8655477/how-can-get-how-many-apps-installed-in-my-device-and-there-names-or-last-accesse)

我想检索以下与在 android 中运行应用程序相关的信息。1.运行应用程序名称 2.与特定应用程序相关的数据文件（assets/res 文件夹中的文件）以及与应用程序相关的任何可能信息 第二点是与特定应用程序相关的最重要的 iedata 文件，请帮助我解决问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:06:47.030

您可以从 strings.xml(res/values/strings.xml) 中检索正在运行的应用程序的名称。[此链接](http://mgmblog.com/2008/12/12/listing-androids-drawable-resources/)可以帮助您获取可绘制文件夹中的所有图像名称。

# jquery - 使用 jQuery 在客户端添加 Jade 内容块

> ID：12284746
> 
> 赞同：1
> 
> 时间：2012-09-05T15:22:47.650
> 
> 标签：jquery, node.js, express, socket.io, pug

我有一些在页面加载时从 Jade 加载的内容（例如，连接的用户列表）。此内容是动态的，客户端通过 socket.io 消息收到其更改的通知。客户端的 jQuery 脚本**必须添加新内容**或删除旧内容。

问题是新内容可能非常复杂（例如，用户的所有信息），我必须在客户端脚本中重写 HTML 代码（而 jQuery 不是为此而设计的）。

我试图克隆和编辑现有结构（可以隐藏），但我认为这不是最好的方法。

# 例子

## 服务器端

```
#usersList
    each user in users
        .userBox
            .userName #{user.name}
            .userCountry #{user.country}
            .userMail #{user.mail} 
```

## 客户端

```
websocket.on('newUser', function(user) {
    $('<div class="userBox">'+
        '<div class="userName">' + user.name +'</div>'+
        '<div class="userCountry">' + user.country +'</div>'+
        '<div class="userMail">' + user.mail +'</div>'+
    '</div>').appendTo($('#usersList'));
}); 
```

客户端代码很糟糕。我想知道我是否可以在 Jade 中有一个内容块并执行此操作。

```
websocket.on('newUser', function(user) {
    $(jade.userBox(user)).apprendTo('#usersList');
}); 
```

如果不可能，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:41:36.040

我不会使用jade来呈现用户，因为我有两种插入用户的方法，一种用于加载页面，另一种用于更新。这对于处理用户的类来说太复杂了。所以我只是使用jade来创建页面模板（占位符）并将数据获取到客户端。

```
var local_data ={}
local_data.users =!{JSON.stringify(usersList)}
div#users(class="ui-bar ui-bar-h") 
```

js：

```
users.add(data); 
```

users.add() 实际上将用户数据和选项存储在一个数组中，并使用 jquery 进行一些 DOM 操作

这可以在加载和无缝更新时使用

# virtual-machine - 如何检查 USB 驱动器是否可启动？

> ID：12284748
> 
> 赞同：8
> 
> 时间：2012-09-05T15:22:51.487
> 
> 标签：virtual-machine, usb-drive

我刚刚创建了一个 USB 驱动器，并想在不重新启动我的实际计算机的情况下检查它是否可以正确启动。我应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:21:43.697

虽然它不会显示文件系统上的内容是否能够处理整个引导内容，但您可以`fdisk -l <drive>`在相当好的 *nix 上从 shell 中检查引导标志。（这基本上会告诉 BIOS 是否应该尝试启动东西。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T15:22:51.487

在 Linux 下，您必须知道哪个设备路径获得了驱动器，例如`dmesg | tail`插入后，假设它是`/dev/sdb`.

## 奇木

`sudo qemu -hda /dev/sdb`或`sudo qemu-system-x86_64 -hda /dev/sdb`64 位。

* * *

## 虚拟盒子

```
VBoxManage internalcommands createrawvmdk -filename ~/usb.vmdk -rawdisk /dev/sdb
sudo chmod 666 /dev/sdb* 
```

然后将 ~/usb.vmdk 添加为 VM 中的磁盘并在其上启动

* * *

不要犹豫，添加其他方法。

# php - 基于 url 参数的重定向（通过 PHP 或 cPanel）

> ID：12284751
> 
> 赞同：1
> 
> 时间：2012-09-05T15:22:54.897
> 
> 标签：php, apache, amazon-s3, cpanel

我刚开始使用 Amazon S3 来托管静态文件（图像、视频等）。为了访问上传的文件，会创建临时链接。一个临时链接如下所示：

```
http://zeebit.s3.amazonaws.com/stackoverflow-logo.png?AWSAccessKeyId=AKIAIXEHEYSBDWAAXVVA&Expires=1346888760&Signature=B%2BS%2FlUoRXno3UfSqf9Ua0RuCcBc%3D 
```

我想要的是通过我的网址提供这些文件，如下所示：

```
http://s3.mydomain.com/zeebit/stackoverflow-logo.png/AKIAIXEHEYSBDWAAXVVA/B%2BS%2FlUoRXno3UfSqf9Ua0RuCcBc%3D 
```

我知道我可以通过 PHP（例如）将请求重定向到`http://s3.mydomain.com`Amazon url，但我不希望地址栏发生变化。我可以创建一个 .htaccess 来将 url 转换为 Amazon url，但据我所知 .htaccess 不能重定向到外部资源。

那么，我该如何解决呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:05:31.417

有几个解决方案：

## .htaccess 解决方案 #1 - 重写规则

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^s3\.  # Hostname starts with "s3."
RewriteCond %{REQUEST_URI} !-f  # Not a file
RewriteCond %{REQUEST_URI} !-d  # Not a directory
RewriteRule ^/(.+)/(.+)/(.+)/(.+)/(.+)$    http://$1.s3.amazonaws.com/$2?AWSAccessKeyId=$3&Expires=$5&Signature=$4 [R=302,L] 
```

注意：您最初所需的 URL 缺少“Expires”值，因此上述方法适用于如下形式的 URL：

```
http://s3.yourdomain.com/[[S3_Bucket_Name]]/[[S3_Filename]]/[[AWSAccessKeyId]]/[[Signature]]/[[Expires]] 
```

所以：

```
http://s3.mydomain.com/zeebit/stackoverflow-logo.png/AKIAIXEHEYSBDWAAXVVA/B%2BS%2FlUoRXno3UfSqf9Ua0RuCcBc%3D/1346888760 
```

将重定向到

```
http://zeebit.s3.amazonaws.com/stackoverflow-logo.png?AWSAccessKeyId=AKIAIXEHEYSBDWAAXVVA&Expires=B%2BS%2FlUoRXno3UfSqf9Ua0RuCcBc%3D&Signature=1346888760 
```

## .htaccess 解决方案 #2 - 重定向

虽然不是上述灵活的解决方案，但您可以将以下内容放入您的*.htaccess*文件中

```
redirect 302 /s3/ http://zeebit.s3.mydomain.com/ 
```

使用此规则，请求

```
http://yourdomain.com/s3/stackoverflow-logo.png?AWSAccessKeyId=AKIAIXEHEYSBDWAAXVVA&Expires=B%2BS%2FlUoRXno3UfSqf9Ua0RuCcBc%3D&Signature=1346888760 
```

基本上会保留之后的所有内容，`/s3/`并简单地将其之前的所有内容替换为 Amazon S3 位置。

```
http://zeebit.s3.amazonaws.com/stackoverflow-logo.png?AWSAccessKeyId=AKIAIXEHEYSBDWAAXVVA&Expires=B%2BS%2FlUoRXno3UfSqf9Ua0RuCcBc%3D&Signature=1346888760 
```

# winforms - 具有 DataSource 继承的 DataGridView

> ID：12284755
> 
> 赞同：1
> 
> 时间：2012-09-05T15:23:13.463
> 
> 标签：winforms, inheritance, datagridview, generic-list

我正在尝试创建 WinForms DataGridView (ElementDataGrid) 的扩展版本以允许排序和过滤。由于这将是多个开发人员使用的小部件，因此我想在内部隐藏 SortableBindingList 类，并让用户只传入一个普通的 List，控件创建 SortableBindingList。

我创建了一个名为 Element 的基类，其他开发人员可以对其进行扩展，但是当我将列的 DataPropertyName 设置为不在 Element 中的属性时，该列中没有显示任何内容。例如，我有一个继承自 Element 的 Comment 类。我想在数据网格中显示评论日期和评论文本。这些列中都没有任何数据，但使用从 Element 继承的属性的列正确显示。

有没有一种简单的方法可以让网格显示继承自 Element 基类的类的属性值？或者，有没有办法让该属性采用通用列表？

更新：这是我用来将数据源设置为我的 SortableBindingList 的方法。正如我所说，当我想显示来自 Element 的属性时，它们会被填充到网格中，但继承自 Element 的 Comment 中的属性却不是。

```
public List<Element> DataElements
{
  set
  {
    bindingDataSource.Clear();

    SortableBindingList<Element> boundDataSource = new SortableBindingList<Element>();
    bindingDataSource.DataSource = boundDataSource;

    foreach (Element e in value)
    {
      bindingDataSource.Add(e);
    }

    this.DataSource = bindingDataSource;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:49:45.203

看看 Marc Gravell 对[这个 SO question](https://stackoverflow.com/questions/927383/c-sharp-grid-datasource-polymorphism)的回答。假设，正如他在回答中所说，数据是同质的（意味着您没有在元素列表中混合 Comments 和 SomeOtherClass）并且其中至少有一个元素（以便它能够推断出列表中数据的实际类型），我认为它适用于您的情况。

# java - 收到此错误：“javax.net.ssl.SSLHandshakeException：没有共同的密码套件”

> ID：12284756
> 
> 赞同：1
> 
> 时间：2012-09-05T15:23:13.930
> 
> 标签：java, c#, .net, ssl, jsse

我有一个用 C# 编写的客户端和一个用 JAVA 编写的服务器。因此，当我尝试连接时，我在服务器`javax.net.ssl.SSLHandshakeException: no cipher suites in common`和 C#“EOF 或 0 字节”中出现错误。

[C＃]：

```
 TcpClient tc = new TcpClient(server, 1337); 

            using (sslStream = new SslStream(tc.GetStream())){ } 
```

[JAVA]：

```
 SSLServerSocketFactory ssocketFactory = (SSLServerSocketFactory) SSLServerSocketFactory.getDefault();
   SSLServerSocket server = (SSLServerSocket) ssocketFactory.createServerSocket(1337);
   server.setEnabledCipherSuites(server.getEnabledCipherSuites()); 
```

和 JAVA 启动属性：

```
-Djavax.net.ssl.trustStore=Certificatename -Djavax.net.ssl.trustStorePassword=thereisapw -Djava.protocol.handler.pkgs=com.sun.net.ssl.internal.www.protocol -Djavax.net.debug=ssl TCPServer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:48:10.987

信任库定义了您将如何信任呈现给您的远程证书。密钥库用于您拥有的证书（以及您拥有私钥的证书）。[（这里](https://stackoverflow.com/a/6341566/372643)有更多关于差异的详细信息。关于“密钥库”的术语可能会令人困惑，因为它可以有两个含义）。

在这里，您尝试运行服务器，但尚未设置自己的证书。您需要在密钥库中导入/创建证书并将其用作密钥库。

如果您不指定密钥库，服务器将无法找到证书/密钥。因此，它将无法使用默认启用的任何密码套件。

* * *

我不确定你从哪里得到这个，但你不需要它：`-Djava.protocol.handler.pkgs=com.sun.net.ssl.internal.www.protocol`

# java - 任何使用 Smooks 或其他转换器的 Java 对象到映射转换？

> ID：12284760
> 
> 赞同：0
> 
> 时间：2012-09-05T15:23:18.857
> 
> 标签：java, transformation, smooks

我想要通用转换器，以便将任何 Java 对象转换为 Map 并将嵌套对象表示为嵌套 Maps。例如

```
class MyA {
  String a;
  Integer b;
  MyB c;
  List<MyD> d;
}
class MyB {
  Double a;
  String b;
  MyB c;
}
class MyD {
  Double a;
  String b;
} 
```

转化成：

```
Map {
  a:anyValue
  b:5
  c:Map {
    c:Map {
      a:asdfValue
      b:5.123    
      c:Map {
        a:fdaValue
        b:3.123
        c:null
      }
    }
  }
  d:Map {
    1:Map {
      a:aValue
      b:5.5
    }
    2:Map {
      a:bValue
      b:5.6
    }
  }
} 
```

请为任何转换框架发布您的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:29:29.510

您实际上可以自己轻松实现：

```
public Map<String, Object> convertObjectToMap(Object o) throws Exception {
    Map<String, Object> map = new HashMap<String, Object>();
    for (Field f : o.getClass().getDeclaredFields()) {
        f.setAccessible(true);
        Object value = f.get(o);
        if ((value instanceof Integer) || (value instanceof String) /* other primitives... */)
            map.put(f.getName(), value);
        else if (value instanceof Collection<?>) {
            int listindex = 0;
            for (Object listitem : (Collection<?>)value)
                map.put(f.getName() + "_" + listindex++, listitem);
        }
        else
            map.put(f.getName(), convertObjectToMap(value));
    }
    return map;
} 
```

# asp.net - checkbox.checked 在列表视图中不起作用

> ID：12284763
> 
> 赞同：0
> 
> 时间：2012-09-05T15:23:29.520
> 
> 标签：asp.net, checkbox

我有一个使用母版页和 .net 4 的 aspx。我在 4 种不同的表单上使用了相同的代码。我已经从其他有效的表格中复制并粘贴了它。这是代码。

列表视图名为 lvMisc_Attachment，这里是 Checkbox 代码

```
 <asp:CheckBox ID="chkChecked" runat="server" Checked='<%#eval("Checked") %>' /> 
```

这是当有人单击链接按钮时发生的代码，链接按钮调用了 MiscAttachment_ItemsChecked 函数。

```
 Private Function MiscAttachment_ItemsChecked() As String
    Dim mString As String = String.Empty
    For Each lv In Me.lvMisc_Attachment.Items
        If CType(lv.FindControl("chkChecked"), CheckBox).Checked = True Then
            If mString.Length = 0 Then
                mString = CType(lv.FindControl("hfMisc_AttachmentID"), HiddenField).Value
            Else
                mString = mString & "," & CType(lv.FindControl("hfMisc_AttachmentID"), HiddenField).Value
            End If
        End If
    Next
    Return mString
End Function 
```

该复选框不会显示为已选中。页面呈现后将对其进行检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:32:49.057

我发现了问题。我忘记在 page_Load 上执行 if page.ispost=true 了。列表视图正在重新填充，因此由于重新加载而未选中复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:28:05.097

将 AutoPostback="true" 添加到您的复选框，以便在他更改时发布控制

```
<asp:CheckBox ID="chkChecked" runat="server" Checked='<%#eval("Checked") %>' AutoPostback="true"/> 
```

# c++ - 编写代码将给定的数字转换为单词（例如 1234 作为输入应该输出 1234）

> ID：12284768
> 
> 赞同：3
> 
> 时间：2012-09-05T15:23:39.890
> 
> 标签：c++, c, data-structures, logic

编写 C/C++/Java 代码将给定的数字转换为单词。

例如：- 输入：1234

输出：一千二百三十四。

输入：10

输出：十

它是否需要一个完整的开关盒用于数字 0 到 10。

在从 14 到 19 的每个数字名称后添加“teen”（例如：14：四个“teen”。）。

而不是为 20 到 99 范围内的数字添加“ty”和数字名称。

等等。

我认为必须有一些更好的方法来解决这个问题。

首选 C 代码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T08:20:12.710

```
#include<iostream>
using namespace std;
void expand(int);
int main()
{
    int num;
    cout<<"Enter a number : ";
    cin>>num;
    expand(num);
}
void expand(int value)
{
    const char * const ones[20] = {"zero", "one", "two", "three","four","five","six","seven",
    "eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen",
    "eighteen","nineteen"};
    const char * const tens[10] = {"", "ten", "twenty", "thirty","forty","fifty","sixty","seventy",
    "eighty","ninety"};

    if(value<0)
    {
        cout<<"minus ";
        expand(-value);
    }
    else if(value>=1000)
    {
        expand(value/1000);
        cout<<" thousand";
        if(value % 1000)
        {
            if(value % 1000 < 100)
            {
                cout << " and";
            }
            cout << " " ;
            expand(value % 1000);
        }
    }
    else if(value >= 100)
    {
        expand(value / 100);
        cout<<" hundred";
        if(value % 100)
        {
            cout << " and ";
            expand (value % 100);
        }
    }
    else if(value >= 20)
    {
        cout << tens[value / 10];
        if(value % 10)
        {
            cout << " ";
            expand(value % 10);
        }
    }
    else
    {
        cout<<ones[value];
    }
    return;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T17:07:55.293

考虑使用由小值索引的字符串表，而不是 switch 语句。

```
const char * const ones[20] = {"zero", "one", "two", ..., "nineteen"};
const char * const tens[10] = {"", "ten", "twenty", ..., "ninety"}; 
```

现在把问题分解成小块。编写一个可以输出一位数的函数。然后编写一个可以处理两位数的函数（可能会使用前面的函数）。根据需要继续构建功能。

创建具有预期输出的测试用例列表，并编写代码来调用您的函数并检查输出，这样，当您为更复杂的用例解决问题时，您可以确保更简单的用例继续工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-27T07:12:21.323

如果您对现成的解决方案感兴趣，那么您可以查看 HumanizerCpp 库 ( [https://github.com/trodevel/HumanizerCpp](https://github.com/trodevel/HumanizerCpp) ) - 它是 C# Humanizer 库的一个端口，它完全符合您的要求。

它甚至可以转换为序数，目前支持 3 种语言：英语、德语和俄语。

例子：

```
const INumberToWordsConverter * e = Configurator::GetNumberToWordsConverter( "en" );

std::cout << e->Convert( 123 ) << std::endl;
std::cout << e->Convert( 1234 ) << std::endl;
std::cout << e->Convert( 12345 ) << std::endl;
std::cout << e->Convert( 123456 ) << std::endl;

std::cout << std::endl;
std::cout << e->ConvertToOrdinal( 1001 ) << std::endl;
std::cout << e->ConvertToOrdinal( 1021 ) << std::endl;

const INumberToWordsConverter * g = Configurator::GetNumberToWordsConverter( "de" );

std::cout << std::endl;
std::cout << g->Convert( 123456 ) << std::endl;

const INumberToWordsConverter * r = Configurator::GetNumberToWordsConverter( "ru" );

std::cout << r->ConvertToOrdinal( 1112 ) << std::endl; 
```

输出：

```
one hundred and twenty-three
one thousand two hundred and thirty-four
twelve thousand three hundred and forty-five
one hundred and twenty-three thousand four hundred and fifty-six

thousand and first
thousand and twenty-first

einhundertdreiundzwanzigtausendvierhundertsechsundfünfzig
одна тысяча сто двенадцатый 
```

在任何情况下，您都可以查看源代码并在项目中重用或尝试理解逻辑。它是用纯 C++ 编写的，没有外部库。

问候， 塞尔吉

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-04T11:05:50.573

```
/* This Program will convert Numbers from -999,999,999 to 999,999,999 into words */

#include <vector>
#include <iostream>
#include <stdexcept>
#include <string>

using namespace std;

const std::vector<std::string> first14 = { "zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten", "eleven", "twelve", "thirteen", "fourteen" };
const std::vector<std::string> prefixes = { "twen", "thir", "for", "fif", "six", "seven", "eigh", "nine" };

std::string inttostr(const int number)
{
    if (number < 0)
    {
        return "minus " + inttostr(-number);
    }
    if (number <= 14)
        return first14.at(number);
    if (number < 20)
        return prefixes.at(number - 12) + "teen";
    if (number < 100) {
        unsigned int remainder = number - (static_cast<int>(number / 10) * 10);
        return prefixes.at(number / 10 - 2) + (0 != remainder ? "ty " + inttostr(remainder) : "ty");
    }
    if (number < 1000) {
        unsigned int remainder = number - (static_cast<int>(number / 100) * 100);
        return first14.at(number / 100) + (0 != remainder ? " hundred " + inttostr(remainder) : " hundred");
    }
    if (number < 1000000) {
        unsigned int thousands = static_cast<int>(number / 1000);
        unsigned int remainder = number - (thousands * 1000);
        return inttostr(thousands) + (0 != remainder ? " thousand " + inttostr(remainder) : " thousand");
    }
    if (number < 1000000000) {
        unsigned int millions = static_cast<int>(number / 1000000);
        unsigned int remainder = number - (millions * 1000000);
        return inttostr(millions) + (0 != remainder ? " million " + inttostr(remainder) : " million");
    }
    throw std::out_of_range("inttostr() value too large");
}

int main()
{
    int num;
    cout << "Enter a number to convert it into letters : ";
    cin >> num;
    cout << endl << num << " = " << inttostr(num) << endl;
    system("pause");
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-08T03:32:07.940

适用于从**0**到**999999999 的任何数字。**

这个程序从用户那里得到一个数字，把它分成三部分，然后分别存储在一个数组中。这三个数字通过将它们转换为单词的函数传递。然后它在第一部分加上“百万”，在第二部分加上“千”。

```
#include <iostream>
using namespace std;
int buffer = 0, partFunc[3] = {0, 0, 0}, part[3] = {0, 0, 0}, a, b, c, d;
long input, nFake = 0;
const char ones[][20] = {"",       "one",       "two",      "three",
                         "four",    "five",      "six",      "seven",
                         "eight",   "nine",      "ten",      "eleven",
                         "twelve",  "thirteen",  "fourteen", "fifteen",
                         "sixteen", "seventeen", "eighteen", "nineteen"};
const char tens[][20] = {"",     "ten",   "twenty",  "thirty", "forty",
                         "fifty", "sixty", "seventy", "eighty", "ninety"};
void convert(int funcVar);
int main() {
  cout << "Enter the number:";
  cin >> input;
  nFake = input;
  buffer = 0;
  while (nFake) {
    part[buffer] = nFake % 1000;
    nFake /= 1000;
    buffer++;
  }
  if (buffer == 0) {
    cout << "Zero.";
  } else if (buffer == 1) {
    convert(part[0]);
  } else if (buffer == 2) {
    convert(part[1]);
    cout << " thousand,";
    convert(part[0]);
  } else {
    convert(part[2]);
    cout << " million,";

    if (part[1]) {
      convert(part[1]);
      cout << " thousand,";
    } else {
      cout << "";
    }
    convert(part[0]);
  }
  system("pause");
  return (0);
}

void convert(int funcVar) {
  buffer = 0;
  if (funcVar >= 100) {
    a = funcVar / 100;
    b = funcVar % 100;
    if (b)
      cout << " " << ones[a] << " hundred and";
    else
      cout << " " << ones[a] << " hundred ";
    if (b < 20)
      cout << " " << ones[b];
    else {
      c = b / 10;
      cout << " " << tens[c];
      d = b % 10;
      cout << " " << ones[d];
    }
  } else {
    b = funcVar;
    if (b < 20)
      cout << ones[b];
    else {
      c = b / 10;
      cout << tens[c];
      d = b % 10;
      cout << " " << ones[d];
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-14T06:00:21.147

```
#include<stdio.h>
#include<conio.h>
void main()
{
int len=0,revnum,i,dup=0,j=0,k=0;

 long int gvalue;

 char  ones[]  [10]={"one","Two","Three","Four","Five","Six","Seven","Eight","Nine","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen",""};

 char twos[][10]={"Ten","Twenty","Thirty","Fourty","fifty","Sixty","Seventy","eighty","Ninety",""};

clrscr();

 printf("\n Enter value"); 

 scanf("%ld",&gvalue);
 if(gvalue==10)

   printf("Ten");

 else if(gvalue==100)

   printf("Hundred");

 else if(gvalue==1000)

   printf("Thousand");

 dup=gvalue;

 for(i=0;dup>0;i++)
  {
   revnum=revnum*10+dup%10;

   len++;

   dup=dup/10;

  }

 while(j<len)

 {

 if(gvalue<10)

  {

   printf("%s ",ones[gvalue-1]);

   }

 else if(gvalue>10&&gvalue<=19)

  {

   printf("%s ",ones[gvalue-2]);

   break;

  }

 else if(gvalue>19&&gvalue<100)

  {

   k=gvalue/10;

   gvalue=gvalue%10;

    printf("%s ",twos[k-1]);

   }

  else if(gvalue>100&&gvalue<1000)

   {

    k=gvalue/100;

    gvalue=gvalue%100;

    printf("%s Hundred ",ones[k-1]);

     }

   else if(gvalue>=1000&&gvlaue<9999)

   {

    k=gvalue/1000;

    gvalue=gvalue%1000;

    printf("%s Thousand ",ones[k-1]);

    }

   else if(gvalue>=11000&&gvalue<=19000)

    {

    k=gvalue/1000;

    gvalue=gvalue%1000;

    printf("%s Thousand ",twos[k-2]);

    }

   else if(gvalue>=12000&&gvalue<100000)

   {

    k=gvalue/10000;

    gvalue=gvalue%10000;

    printf("%s ",ones[gvalue-1]);

   }

else

{

printf("");

}

 j++;

 getch();

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-14T06:43:27.957

```
import java.lang.*;
import java.io.*;
public class rupee
{
public static void main(String[] args)throws  IOException
{

int len=0,revnum=0,i,dup=0,j=0,k=0;
int gvalue;
 String[] ones={"one","Two","Three","Four","Five","Six","Seven","Eight","Nine","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen",""};
String[] twos={"Ten","Twenty","Thirty","Fourty","fifty","Sixty","Seventy","eighty","Ninety",""};
System.out.println("\n Enter value");
InputStreamReader b=new InputStreamReader(System.in);
BufferedReader br=new BufferedReader(b);
gvalue=Integer.parseInt(br.readLine());
if(gvalue==10)

   System.out.println("Ten");

else if(gvalue==100)

  System.out.println("Hundred");

else if(gvalue==1000)
  System.out.println("Thousand");

dup=gvalue;
for(i=0;dup>0;i++)
{
  revnum=revnum*10+dup%10;
  len++;
  dup=dup/10;
}
while(j<len)
{
 if(gvalue<10)
 {
  System.out.println(ones[gvalue-1]);
 }
else if(gvalue>10&&gvalue<=19)
 {
  System.out.println(ones[gvalue-2]);
  break;
 }
else if(gvalue>19&&gvalue<100)
 {
   k=gvalue/10;
   gvalue=gvalue%10;
   System.out.println(twos[k-1]);
 }
else if(gvalue>100&&gvalue<1000)
 {
   k=gvalue/100;
   gvalue=gvalue%100;
   System.out.println(ones[k-1] +"Hundred");
 }
else if(gvalue>=1000&&gvalue<9999)
 {
   k=gvalue/1000;
   gvalue=gvalue%1000;
   System.out.println(ones[k-1]+"Thousand");
}
else if(gvalue>=11000&&gvalue<=19000)
 {
  k=gvalue/1000;
  gvalue=gvalue%1000;
  System.out.println(twos[k-2]+"Thousand");
 }      
else if(gvalue>=12000&&gvalue<100000)
{
 k=gvalue/10000;
     gvalue=gvalue%10000;
 System.out.println(ones[gvalue-1]);
}
else
{
 System.out.println("");
    }
j++;
}
}
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-12T06:31:11.230

```
/*Maximum value that can be entered is 2,147,483,647
 * Program to convert entered number into string
 * */
import java.util.Scanner;

public class NumberToWords 
{

public static void main(String[] args) 
{
    double num;//for taking input number
    Scanner obj=new Scanner(System.in);
    do
    {
        System.out.println("\n\nEnter the Number (Maximum value that can be entered is 2,147,483,647)");
        num=obj.nextDouble();
        if(num<=2147483647)//checking if entered number exceeds maximum integer value
        {
            int number=(int)num;//type casting double number to integer number
            splitNumber(number);//calling splitNumber-it will split complete number in pairs of 3 digits
        }
        else
            System.out.println("Enter smaller value");//asking user to enter a smaller value compared to 2,147,483,647
    }while(num>2147483647);
}
//function to split complete number into pair of 3 digits each
public static void splitNumber(int number)
{   //splitNumber array-contains the numbers in pair of 3 digits
    int splitNumber[]=new int[4],temp=number,i=0,index;
    //splitting number into pair of 3
    if(temp==0)
        System.out.println("zero");
    while(temp!=0)
    {
        splitNumber[i++]=temp%1000;
        temp/=1000;
    }
    //passing each pair of 3 digits to another function
    for(int j=i-1;j>-1;j--)
    {   //toWords function will split pair of 3 digits to separate digits
        if(splitNumber[j]!=0)
            {toWords(splitNumber[j]);
        if(j==3)//if the number contained more than 9 digits
            System.out.print("billion,");
        else if(j==2)//if the number contained more than 6 digits & less than 10 digits
            System.out.print("million,");
        else if(j==1)
            System.out.print("thousand,");//if the number contained more than 3 digits & less than 7 digits
            }
            }       
}
//function that splits number into individual digits
public static void toWords(int number)
    //splitSmallNumber array contains individual digits of number passed to this function
{   int splitSmallNumber[]=new int[3],i=0,j;
    int temp=number;//making temporary copy of the number
    //logic to split number into its constituent digits

    while(temp!=0)
    {
        splitSmallNumber[i++]=temp%10;
        temp/=10;
    }
    //printing words for each digit
    for(j=i-1;j>-1;j--)
      //{   if the digit is greater than zero
        if(splitSmallNumber[j]>=0)
            //if the digit is at 3rd place or if digit is at (1st place with digit at 2nd place not equal to zero)
        {   if(j==2||(j==0 && (splitSmallNumber[1]!=1)))
            {
                switch(splitSmallNumber[j])
                {

                    case 1:System.out.print("one ");break;
                    case 2:System.out.print("two ");break;
                    case 3:System.out.print("three ");break;
                    case 4:System.out.print("four ");break;
                    case 5:System.out.print("five ");break;
                    case 6:System.out.print("six ");break;
                    case 7:System.out.print("seven ");break;
                    case 8:System.out.print("eight ");break;
                    case 9:System.out.print("nine ");break;

            }

        }
        //if digit is at 2nd place
        if(j==1)
        {       //if digit at 2nd place is 0 or 1
                if(((splitSmallNumber[j]==0)||(splitSmallNumber[j]==1))&& splitSmallNumber[2]!=0 )
                System.out.print("hundred ");
            switch(splitSmallNumber[1])
            {   case 1://if digit at 2nd place is 1 example-213
                        switch(splitSmallNumber[0])
                        {
                        case 1:System.out.print("eleven ");break;
                        case 2:System.out.print("twelve ");break;
                        case 3:System.out.print("thirteen ");break;
                        case 4:System.out.print("fourteen ");break;
                        case 5:System.out.print("fifteen ");break;
                        case 6:System.out.print("sixteen ");break;
                        case 7:System.out.print("seventeen ");break;
                        case 8:System.out.print("eighteen ");break;
                        case 9:System.out.print("nineteen ");break;
                        case 0:System.out.print("ten ");break;
                        }break;
                        //if digit at 2nd place is not 1
                    case 2:System.out.print("twenty ");break;
                    case 3:System.out.print("thirty ");break;
                    case 4:System.out.print("forty ");break;
                    case 5:System.out.print("fifty ");break;
                    case 6:System.out.print("sixty ");break;
                    case 7:System.out.print("seventy ");break;
                    case 8:System.out.print("eighty ");break;
                    case 9:System.out.print("ninety ");break;
                    //case 0:   System.out.println("hundred ");break;

            }                           
        }           
    }
  }

} 
```

# php - PHP以bitly url格式发布到twitter

> ID：12284770
> 
> 赞同：1
> 
> 时间：2012-09-05T15:23:43.103
> 
> 标签：php, json, twitter

我设法将以下脚本放在一起：

```
<?php

/* make a URL small */
function make_bitly_url($url,$login,$appkey,$format = 'xml',$version = '2.0.1')
{
    //create the URL
    $bitly = 'http://api.bit.ly/shorten?version='.$version.'&longUrl='.urlencode($url).'&login='.$login.'&apiKey='.$appkey.'&format='.$format;

    //get the url
    //could also use cURL here
    $response = file_get_contents($bitly);

    //parse depending on desired format
    if(strtolower($format) == 'json')
    {
        $json = @json_decode($response,true);
        return $json['results'][$url]['shortUrl'];
    }
    else //xml
    {
        $xml = simplexml_load_string($response);
        return 'http://bit.ly/'.$xml->results->nodeKeyVal->hash;
    }
}

//function to get the url of the event! 
function curPageURL() {
 $pageURL = 'http';
 if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
 $pageURL .= "://";
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL;
}

/* usage */
$short = make_bitly_url('http://site.com/viewEvent.php?id=2323232','bitlyuser','bitlyapikey','json');
echo 'The short URL is:  '.$short . "<br>"; 
echo "PATH: ". curPageURL();
// returns:  http://bit.ly/11Owun
?> 
```

现在此代码可以生成传递给它的任何内容的短 url。我的网站上有一个来自[twitter 开发者网站](https://dev.twitter.com/)的推文按钮。它的工作原理是它发布了它当前所在页面的完整链接......所以不是缩短版本。现在我想在按下该推特按钮时生成一个短网址，以便我可以在我的网站帐户上分享。这是怎么做的？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:41:32.263

您应该能够将`data-url`选项设置为 bitly url。例如

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="<?php echo make_bitly_url('http://'.$_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"],LOGIN,APPKEY); ?>">Tweet</a> 
```

# android - 下载时解析json

> ID：12284771
> 
> 赞同：0
> 
> 时间：2012-09-05T15:23:44.643
> 
> 标签：android, json, parsing

仍然下载时是否可以部分解析json？例如，我用一个非常慢的 Internet 加载了一个长的 json 数组。我可以下载一部分文本，解析它，添加到屏幕，下载下一部分等等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:26:44.930

查看以下[SO question](https://stackoverflow.com/questions/444380/is-there-a-streaming-api-for-json)它有一些答案，但通常的共识似乎是您可以根据您使用的软件包。我使用过 GSON（在答案中提到），但从未尝试过增量流功能。

[不过总的来说， GSON](https://sites.google.com/site/gson/)让很多事情变得更容易，所以我会先检查一下，如果 GSON 提供的其他东西看起来对你想做的任何事情都有好处。

# excel - 上个月在 pentaho 中显示的 Excel 输出

> ID：12284774
> 
> 赞同：0
> 
> 时间：2012-09-05T15:23:50.233
> 
> 标签：excel, sql-server-2000, pentaho, data-integration

我正在使用 PDI 4.1。我已经创建了转换和作业，并且我有一个包含数据库数据的 excel 文件。我的 excel 文件中的列是`name`,`date`和`hour`, 我需要带上上个月的数据。我可以做这样的事情吗？

```
Name_july_hour.xls==name_june_hour.xls 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T23:34:56.440

您现在可能已经想通了，但是您需要做的是通过 Microsoft Excel 输入步骤将数据从上个月的 Excel 文件中传输到转换中。然后你可以用它做任何你想做的事情（聚合它，将它与另一个文件连接，将它与数据库表连接，......无论如何），然后使用 Excel Writer Step 将其写入新月份的文件。

# validation - 用户输入的值在 JSF 中验证后消失

> ID：12284776
> 
> 赞同：3
> 
> 时间：2012-09-05T15:23:57.907
> 
> 标签：validation, jsf, jsf-2

我的页面中有 h:selectOneMenu 组件。用户必须在此处选择“是”或“否”，初始值为空（标记为“未知”）。在 bean 中它是布尔值，所以 null 是可能的。如果用户选择有效值，例如“是”，点击下一步，`true`将保存在 bean 中。

现在用户可以返回此页面，并选择“未知”，这是一个无效的值。当用户现在点击下一步时，会显示错误消息。没关系，但是值会更改为“是”。它是从 bean 更新的。这样它会改变用户输入的内容，这不是必需的行为。是否有可能保持用户的价值？

```
<h:form id="co">
  <h:selectOneMenu id="isCeded"
                   value="#{bean.boolValue}"
                   required="true"
                   requiredMessage="#{msgs.please_select_value}">
    <f:selectItem itemLabel="#{msgs.unknown}"/>
    <f:selectItem itemValue="true" itemLabel="#{msgs.yes}"/>
    <f:selectItem itemValue="false" itemLabel="#{msgs.no}"/>
    <f:ajax execute="@this" render="isCededMsg"/>
  </h:selectOneMenu>*
  <h:message id="isCededMsg" for="isCeded" errorClass="invalid"/>

  <h:commandButton id="submit" value="Next" action="#{bean.submit}" />
</h:form> 
```

奇怪的是，只有当用户在 null 不是有效值的字段中输入 null 时才会发生这种行为。例如，如果用户在某些经过验证的文本字段中输入了另一个无效值（例如，20 位数字，其中只允许 10 位），则用户输入的无效值在单击“下一步”后仍然存在。只有错误消息出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T20:00:18.043

这似乎是一个错误，看起来不像得到修复。请参阅此问题中提到的 JIRA 链接：[h:selectOneMenu with Please select 显示验证错误时的先前选择](https://stackoverflow.com/questions/17027134/hselectonemenu-with-please-select-displays-previous-selection-on-validation-err)

问题和JIRA问题都有解决方案。您需要扩展 MenuRenderer 并使用 JIRA 问题末尾提到的修补代码覆盖 renderOption 方法。

# c# - 如何将 c# 控制台转换为 Powershell？

> ID：12284781
> 
> 赞同：3
> 
> 时间：2012-09-05T15:24:03.353
> 
> 标签：c#, powershell, console-application

我正在尝试将以下 c# 控制台应用程序转换为 powershell 脚本。到目前为止，转换后的 power-shell 卡在 ExtractCabFiles 行上。我错过了转换后的代码中的任何内容吗？两者都已附加，因为我知道这可能会有所帮助。

这是控制台代码

```
 MethodInfo extractCab = typeof (SPSolutionLanguagePack).GetMethod("ExtractCabFiles",
                                    BindingFlags.Default |
                                    BindingFlags.Static |
                                    BindingFlags.NonPublic);

  //extract the wsp files to the temp folder
  extractCab.Invoke(null, newobject[] {Path.GetFullPath(filesFolder), Path.GetFullPath(solutionName)}); 
```

这是转换后的代码

```
MethodInfo $extractCab = typeof (SPSolutionLanguagePack).GetMethod("ExtractCabFiles",
                                    BindingFlags.Default |
                                    BindingFlags.Static |
                                    BindingFlags.NonPublic);

#extract the wsp files to the temp folder
$extractCab.Invoke(null, newobject[] {Path.GetFullPath($filesFolder), Path.GetFullPath($solutionName)}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:24:15.040

您的 powershell 语法在某些地方不正确。你要这个：

```
# you will need to specify the FULL namespace-qualified type name for SPSolutionLanguagePack, I don't know what that is from your post
$extractCab = [SPSolutionLanguagePack].GetMethod("ExtractCabFiles", [Reflection.BindingFlags] 'Default, Static, NonPublic')

#extract the wsp files to the temp folder
$extractCab.Invoke($null, @( [IO.Path]::GetFullPath($filesFolder), [IO.Path]::GetFullPath($solutionName))) 
```

# c# - 如何获取数据文本字段值

> ID：12284784
> 
> 赞同：0
> 
> 时间：2012-09-05T15:24:13.650
> 
> 标签：c#, asp.net, gridview, databound, buttonfield

我正在使用 asp.net、c# 在 Visual Studio 2012 中创建一个网站。我创建了一个网格视图，它从我的 sql 服务器获取数据，并创建了一个绑定到 id_p 的按钮字段，它是从数据库中获取的列之一。我正在尝试获取单击按钮所在行的 id_p 数据。

```
<asp:ButtonField ButtonType="Button" DataTextField="id_p" 
DataTextFormatString="Stavi u košaricu" Text="Button1" /> 
```

我需要的不是选定的行，只有 id_p 值，请问我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:59:34.833

您需要这样处理`OnRowCommand`gridview 上的事件：

```
<asp:GridView ID="GridView1" runat="server" OnRowCommand="GridView_RowCommand" 
```

并创建一个 ItemTemplateField 来显示常规`<asp:button>`而不是使用`ButtonField`列：

```
<asp:TemplateField>
     <ItemTemplate>
         <asp:Button ID="btn" runat="server" 
          CommandName="Something" CommandArgument='<%#Eval("id_p") %>'
          Text="Stavi u košaricu" />
     </ItemTemplate>
 </asp:TemplateField> 
```

现在您处理 RowCommand 事件：

```
protected void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
{
    string m_id = e.CommandArgument.ToString();
    if (e.CommandName == "Something")
    {
       //do something with m_id
    }
} 
```

# c# - 将所选文本放入我的应用程序的变量中

> ID：12284788
> 
> 赞同：-8
> 
> 时间：2012-09-05T15:24:17.307
> 
> 标签：c#, wpf, string, selected

在我的应用程序中，我有一个`textbox`. 我希望能够通过简单地突出显示文本并按下全局热键来从 Windows 中其他地方打开的网页或文档中复制文本 - 然后让该文本出现在`textbox`.

我坚持的是选择部分：我正在寻找一种在我的 WPF 应用程序中使用所选文本作为变量的方法，但我似乎无法以一种有意义的方式访问它。

现在，我正在使用剪贴板并`Clipboard.GetText()`获取我的变量：

```
private void OnHotKeyHandler(HotKey hotKey) {
    if (Clipboard.ContainsData(DataFormats.Text))
        tb_number.Text = Clipboard.GetText();
} 
```

`CTRL-C`但是每次我想获得这个值并使用选定的文本而不是复制的文本时，我都试图避免乏味。有什么想法可以做到这一点`on-select`，而不是通过访问剪贴板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:18:05.490

我相信这个问题现在更清楚了。感谢您的编辑。

我不认为您可以通过 .NET 应用程序以简单的方式修改剪贴板功能。但是您可能会通过名为 autohotkey 的第三方 Windows 应用程序获得所需的内容。

[http://www.autohotkey.com/docs/Tutorial.htm#Send](http://www.autohotkey.com/docs/Tutorial.htm#Send)

[https://superuser.com/questions/166270/change-ctrl-xc-and-v-hotkeys-in-windows-to-different-keys](https://superuser.com/questions/166270/change-ctrl-x-c-and-v-hotkeys-in-windows-to-different-keys)

# mongodb - 如何操作 MapReduce 的 value 字段？

> ID：12284793
> 
> 赞同：0
> 
> 时间：2012-09-05T15:24:24.267
> 
> 标签：mongodb, mapreduce

使用 MapReduce 时，每个生成的文档“结果”的结构如下：

```
{ '_id'   : 123, 'value' :{'sum_donations' 999, 'nbr_visitors':50 } 
```

我可以使用以下方法访问 _id 和 value 字段：

```
db.result.find() OR db.result.find({},{_id:1, value:1}) 
```

有没有办法在不选择 nbr_visitors 的情况下**选择****_ *id*** 和**sum_donations**？像这样的东西：

 **```
{'id': 123, 'sum_donation': 999} 
```

还是我应该创建另一个 MapReduce 函数来为我返回它？
我正在考虑拥有一个 MapReduce Collection 并对其进行操作以回答不同的问题。
我试过

```
db.result.find({},{_id:1, value.sum_donations:1})  but it didn't work. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:38:53.380

这样做有两个问题：

*   MR的`value`字段目前无法从 MR 本身的 atm 进行操作，它有一个 JIRA，但它并不完全在“列表”上：[https ://jira.mongodb.org/browse/SERVER-2517](https://jira.mongodb.org/browse/SERVER-2517)
*   Mongo 的查询语言无法自动将您的字段投影到顶级文档。子文档字段保留在子文档中。

您可以（如果您使用 MongoDB 2.2）在此处将聚合框架与`$project`操作员一起使用，但我认为这太过分了，并且会减慢您的系统和程序的速度。

因此，执行此操作的最佳方法是扩展您的编程以从该子文档中获取字段。这可能是执行此操作的最高效、最直接和最简单的方法，只需围绕它进行编码。**

# android - 如何在 Android 中使用 onDraw() 重新绘制所有现有线条的情况下绘制一些新线条？

> ID：12284796
> 
> 赞同：0
> 
> 时间：2012-09-05T15:24:27.203
> 
> 标签：android, ondraw

我想用android制作一个绘图面板。我现在要做的是我必须重新绘制每条现有线条和新线条，因此当画布上的线条过多时，它会使我的应用程序运行缓慢。有没有什么可能的方法可以让我在画布上添加一些新点而其他点不消失？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:26:23.007

利用

```
invalidate(r); 
```

在哪里

```
Rect r; // part of the screen 
```

# c# - 如何为常规事件实现计时器？

> ID：12284800
> 
> 赞同：1
> 
> 时间：2012-09-05T15:24:35.583
> 
> 标签：c#, wpf, events, timer

我想在我的应用程序中实现一些计时器。我的目标是提供一种简单的方法来每 x 秒/分钟执行一些功能，所以我考虑实现一个 1 秒、5 秒和 15 秒计时器。我想每 1 秒更新一次的第一件事是内置时钟（不知道在 c# 中是否有任何其他解决方案，在 c++ 中使用此方法）另一种用途是例如同步函数等，应执行每 xx 秒。

我的问题是是否有关于这个主题的任何有用的教程？这是我第一次想在我的一个应用程序中实现这样的计时器系统，我不知道是否有什么需要记住的。

提前感谢您的任何回答:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:27:46.820

您可以使用各种类型的 Timer 类。

在 WPF 中，如果这是为了更新与用户界面相关的内容，您通常会使用[`DispatcherTimer`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx).

您也可以使用[`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)or [`System.Threading.Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)，但要意识到这将在后台线程上触发，而不是在主用户界面线程上。这通常是有益的（如果 Timer 的事件或回调中发生“工作”，您无需等待或阻止您的 UI `Tick`），但您还必须记住将任何与 UI 线程相关的用户界面编组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:27:32.900

```
 // This timer runs on UI thread
    System.Windows.Threading.DispatcherTimer timer = new System.Windows.Threading.DispatcherTimer();
    timer.Interval = System.TimeSpan.FromSeconds(1);
    timer.Tick += timer_Tick;
    timer.Start();

    void timer_Tick(object sender, System.EventArgs e)
    {
        Title = System.Windows.Input.Keyboard.FocusedElement.GetType().ToString();
    } 
```

# jquery - jQuery覆盖函数

> ID：12284808
> 
> 赞同：0
> 
> 时间：2012-09-05T15:24:53.803
> 
> 标签：jquery

所以，首先是代码：

```
$("input").on("keyup", function() {
    var filled = $("input").filter(function() {
        return this.value.length > 0;
    }); 
```

第1部分

```
if (filled.length < 1) {                        
    var test= $('#test').val();
    if (test == ""){
        $('#test').css('border-color',green);
    }
} else { ... } 
```

第2部分

```
if (filled.length > 0 && filled.length <= 4) {                  
    $('#test').keyup(function() {
        var test = $('#test').val();
        if (test=="") {
            $('#test').css('border-color',red);
        }
    }
}); 
```

这是来自一个表单，其中有 4 个文本输入是可选的，但如果用户在其中一个字段中输入，他必须将它们全部输入。

因此，当filled.length 为 >0 且 <=4 时，字段是必需的，例如，我希望输入边框为红色。

但是当filled.length <1 (=0) 那么我希望所有的边框都是绿色的。

问题是，如果我在输入上写了一些东西然后全部擦除，它们应该会变成绿色，但 Part2 会覆盖 Part1，它们会显示为红色。

我的问题是：
-**我该如何解决？**
-**这个问题是从哪里来的？**（jQuery 理论）

我越接近“正确”代码，将第 1 部分替换为：

```
if(filled.length < 1)
{                       
     $('#test').keyup(function()
     {
         var test = $('#test').val();

         if(test=="")
         {
              $('#test').css('border-color',green);
         }
     }

} 
```

但是当输入为空时，我必须再擦除一次（向上键），以便第 1 部分启动并替换第 2 部分。

PS：如果需要更多代码或问题解释，请询问=）。

**编辑**
小提琴：http: [//jsfiddle.net/WzE9k/13/](http://jsfiddle.net/WzE9k/13/)。代码不完全相同，但要点是相同的。当该字段为空时，它应该显示“什么都没有写”，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:38:03.473

这是您可以执行的操作的示例

```
$('input').keyup(function() {
    // store how many textboxes are not empty
    var len = $('input').filter(function() {
        return $(this).val().length > 0
    }).length;
    $('input').css('border', function() {
        // if number is less than 4 and greater than zero
        // return red
        // else return green
        return len < 4 && len > 0 ? 'red solid 1px' : 'green solid 1px';
    });
});​ 
```

[http://jsfiddle.net/7mVLu/](http://jsfiddle.net/7mVLu/)

这是文本更改的小提琴

[http://jsfiddle.net/7mVLu/1/](http://jsfiddle.net/7mVLu/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:57:12.810

像这样的原生 JavaScript 可以在大量字段中工作并运行得更快。

[http://jsfiddle.net/TzqPT/](http://jsfiddle.net/TzqPT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:01:33.300

如果您想访问多个项目，那么我最好建议使用，`class`以便您可以区分同一父项中存在的任何其他相同元素。

check this [http://jsfiddle.net/GgzC5/](http://jsfiddle.net/GgzC5/)

# java - 未找到 ant junit 参考

> ID：12284810
> 
> 赞同：1
> 
> 时间：2012-09-05T15:24:57.117
> 
> 标签：java, ant

我正在尝试使用 ant 编译 junit java 文件，但我得到了，

```
package org.junit does not exist
[javac] import static org.junit.Assert.*;
... 
```

而且，这是我在 build.xml 中的一部分，

```
<javac debug="true" includeantruntime="false" debuglevel="${debuglevel}" destdir="bin" source="${source}" target="${target}">
        <src path="test"/>
        <classpath refid="MyProgram.classpath"/>
    </javac>

  <path id="MyProgram.classpath">
   ...
   <pathelement location="lib/junit.jar"/>
   ... 
```

这有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:01:44.850

而不是 pathelement 中的 location 使用路径，如下所示：

```
<path id="MyProgram.classpath">
     ...
    <pathelement path="lib/junit.jar"/>
</path> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:03:56.577

我在上面的摘录中注意到，该`<path>`元素似乎与该元素位于同一目标内`<javac>`。`<path>`元素是否可能放错了位置？（它需要放在 javac 之前，在同一目标中或目标元素之外。）

# android - 安卓 4.0 中的 https 帖子

> ID：12284812
> 
> 赞同：0
> 
> 时间：2012-09-05T15:25:06.813
> 
> 标签：android, https, httpurlconnection

我正在测试 android 上的 https 帖子，我有 2 个 android 设备，此代码在我的 2.3 设备上完美运行，但将在我的 4.1 设备中被阻止在“retcode=urlCon.getResponseCode();”，我也检查了数据包嗅探 post 请求已发送并且服务器确实回复了 https 响应，但它仍然被阻止直到超时。

```
private String GetHttpPage(HttpsURLConnection urlsCon,String host,String url,String reference,boolean type,String curcookie,String postparam){
 String query = postparam; 
     byte[] entitydata = query.getBytes();
     String line="";
     HttpURLConnection urlCon=urlsCon;
     try{
         String domain="";
         String fullurl=host+url;
         if(urlCon==null){
             if(host.indexOf("https")!=-1){
                 urlCon =GetHttpsConnect(fullurl);
                    domain=host.substring(8);    
            }
            else{
                 urlCon =GetHttpConnect(fullurl);
                domain=host.substring(7);
            }
         }
         urlCon.setConnectTimeout(30000);  
         urlCon.setReadTimeout(30000); 

          if(reference!=null)
              urlCon.setRequestProperty("Referer", reference);

          urlCon.setRequestProperty("Cache-Control", "no-cache"); 
          urlCon.setRequestProperty("User-Agent", "Mozilla/4.0 (compatible; MSIE 5.5; Windows 98)");  
          urlCon.setRequestProperty("Accept-Encoding", "identity");  
        urlCon.setRequestProperty("Accept", "image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, */*");  
        urlCon.setRequestProperty("Accept-Language", "zh-cn,zh;q=0.8,en-us;q=0.5,en;q=0.3");  
         urlCon.setRequestProperty("connection", "Keep-Alive");  
         urlCon.setRequestProperty("Host", domain);  
   //      

         if(curcookie.length()>0)
             urlCon.setRequestProperty("Cookie", curcookie);

         if(type){
             urlCon.setDoOutput(true);
             urlCon.setDoInput(true);
             urlCon.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
             urlCon.setRequestProperty("Content-Length",String.valueOf(entitydata.length));
             urlCon.setRequestMethod("POST");
         }
         else{

            urlCon.setDoOutput(false);
            urlCon.setDoInput(true);
            urlCon.setRequestMethod("GET");

         }

         urlCon.connect();

         if(type){

             OutputStream outStream = urlCon.getOutputStream();
             outStream.write(entitydata, 0, entitydata.length);
       //      outStream.write(entitydata);
             outStream.flush();
             outStream.close();
         }

         retcode=urlCon.getResponseCode();
         if(urlCon.getHeaderField("Location")!=null)
             redirect=urlCon.getHeaderField("Location");

         Map   m=urlCon.getHeaderFields();
         Set   set=m.entrySet();
         Iterator   it=set.iterator();
         while(it.hasNext())
         {
           Map.Entry   me=(Map.Entry)it.next();
           String skey=me.getKey()!=null?me.getKey().toString():"";
           String svalue=me.getValue()!=null?me.getValue().toString():"";
           if(skey.compareToIgnoreCase("Set-Cookie")==0){
               String tempcookie=svalue;
               tempcookie=tempcookie.substring(1, tempcookie.length()-1);
               cookie+=ProcessCookie(tempcookie);
               //cookie=cookie.substring(0, cookie.length()-2);
           }
         } 

 //        if(urlCon.getHeaderField("Set-Cookie")!=null)
   //        cookie=urlCon.getHeaderField("Set-Cookie");

         BufferedReader in = new BufferedReader(new InputStreamReader(urlCon.getInputStream()));

         String subline="";
         while ((subline = in.readLine()) != null) {

            line+=subline;
         }
         in.close();

     }
     catch(IOException e){
         String aaa=e.toString();
         Log.e("xx", aaa);
     }
     catch(Exception e){
         String aaa=e.toString();
         Log.e("xx", aaa);
     }

     if(urlCon!=null)
         urlCon.disconnect();
     return line;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:09:49.967

试着放

```
System.setProperty("http.keepAlive", "false"); 
```

在您的代码中的某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:53:59.427

我想您在清单中拥有 Internet 权限？我认为问题出在 setRequestProperty 之一或另一个中的“用户代理”中，但不在其余代码中。

# java - 如何使用 setMaxResults 使用更新休眠查询？

> ID：12284814
> 
> 赞同：6
> 
> 时间：2012-09-05T15:25:13.717
> 
> 标签：java, hibernate

我希望这是适当的部分，我对这段代码有疑问

```
Transaction transaction = session.beginTransaction(); 
Query query = session.createQuery("update database set floop= :ctrl1" +" where ctrl= :ctrl2 ").setMaxResults(2); 
query.setMaxResults(2);
query.setParameter("ctrl1",3);
query.setParameter("ctrl2", 5); 
```

我要求`setMaxResults(2)`只对前两个进行更新，然后他更新所有记录，因为我做错了什么？谢谢你的帮助

我想用`session.createSQLQuery`，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-16T12:34:38.077

这个答案是发布延迟，但它可以帮助其他用户在使用 HQL 的情况下查看数据库中的更新行数

> 不幸的是 setMaxResults() 不能更新和删除休眠查询。它仅适用于选择标准。

根据 HQL，没有可用的特定解决方案，您想更新具有限制数量的行，然后按照以下步骤操作

1.  编写一个 HQL 以使用setMaxResults选择具有条件或范围的所有行。它将返回一个有限制的 List 对象。
2.  然后通过 session.update() 方法更新特定属性（要更新的属性）并再次存储这些行的对象。

我假设 tablename 与 map **Database**类，并且有两个变量**ctrl**和**floop**与 getter 和 setter （***根据你的问题***）

```
 List<Database> list = new ArrayList<>();
            Transaction transaction = session.beginTransaction(); 

            //Fetching record with limit 2 using setMaxResults()
            int setlimit = 2;
            String hql_query = "from Database where ctrl = :ctrl2";
            Query select_query = session.createQuery(hql_query).setMaxResults(setlimit);
            select_query.setParameter("ctrl2", 5);
            list = select_query.list();

            //iterating list and setting new value to particuler column or property
            int result;
            if (list != null) {
                for (Database element : list) {
                    element.setFloop(ctrl1);
                    //Here is updating data in database
                    session.update(element);
                }
                result = list.size();
            } else {
                result = 0;
            }
            System.out.println("Rows affected: " + result);

            transaction.commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:37:18.380

`query.setMaxResults(2);`将用于`selection`查询，将被忽略`insertion/updation`。如果您将其用于`selection`查询，那么您将获得 2 条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:29:49.750

`setMaxResults`限制查询返回的结果数，而不是受影响的行数。

当您只想更新一组有限的行时，您应该在 where 条件中指定这些行。对更新的行数设置硬性限制没有多大意义，因为无法判断哪些行将被更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T07:40:53.320

`setMaxResults`仅适用于`select`。对于您的问题，我将执行`select`查询，然后使用`query.setMaxResults(2)`，这将返回最多 2 个元素的列表。然后循环返回的列表并对返回的一两个元素使用 session.update。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-11T16:08:37.727

我可以看到许多完全有效的用例，您只想更新有限数量的行，并且正如其他人已经回答的那样，Hibernate Query 无法处理此问题，因此您需要求助于本机 SQL。

您没有在问题中指定您使用的是哪种类型的数据库，因此**此答案仅适用于 MySql**：

```
Transaction transaction = session.beginTransaction(); 
Query query = session.createSQLQuery("UPDATE database SET floop= :ctrl1 WHERE ctrl= :ctrl2 LIMIT :max"); 
query.setParameter("ctrl1",3);
query.setParameter("ctrl2", 5);
query.setParameter("max", 2); 
```

请注意，上面的 sql 查询需要使用本机表和列名，而不是 ORM 模型中的。

# mstest - Mstest 名称而不是 Data Row 和数据驱动测试

> ID：12284816
> 
> 赞同：7
> 
> 时间：2012-09-05T15:25:19.093
> 
> 标签：mstest, data-driven

我使用 MsTests 和数据驱动方法进行测试。（Excel是用于测试的数据存储）

测试结果不提供有关测试数据的任何信息。例如：

结果如下所示：testname（数据行 5）。这对我来说还不清楚。

如何自定义输出测试结果？例如 testname（测试数据（单词、数字或行名））

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T23:39:32.633

我只找到了一种解决方案：

我有 1000 行的 MyData.xlsx 文件。简单的逻辑：“A”列=1，“B”列=A*2+2。

第 5、6、7 和 11、12、13 行包含零，表示结果失败。

我的测试的源代码：

```
public TestContext TestContext { get; set; }

    [TestMethod]
    [DataSource("System.Data.Odbc", "Dsn=Excel Files;dbq=|DataDirectory|\\TestData\\MyData.xlsx;", "TestDataSheet$", DataAccessMethod.Sequential)]
    public void ExcelDataSource1000Items()
    {
        var errorMessage = "Passed";

        int valueA = Convert.ToInt32(TestContext.DataRow["valueA"]);
        int valueB = Convert.ToInt32(TestContext.DataRow["valueB"]);
        try
        {
            Assert.AreEqual(valueA * 2 + 2, valueB);
        }
        catch (Exception exception)
        {
            errorMessage = exception.Message;
        }
        TestContext.WriteLine(string.Format("valueA: {0}, valueB: {1}, AssertResult: {2}", valueA, valueB, errorMessage));
    } 
```

从 MsTest 命令行（用于生成 *.trx 文件）执行测试后，使用参数：/testcontainer、/testsettings、/resultsfile 我们生成带有测试结果的 *.trx 文件。

如果我们打开这个 *.trx 文件，我们可以看到 TextMessages：

```
<Results>
<UnitTestResult executionId="cfc325a7-647f-4ef3-bb08-777f7bb3ca37" testId="1dbff80d-1f74-5ea7-35fa-f2ecd1f9b9e4" testName="ExcelDataSource1000Items" computerName="AMDX6" duration="00:00:00.5764248" startTime="2012-09-06T03:21:45.2070571+04:00" endTime="2012-09-06T03:21:46.1251096+04:00" testType="13cdc9d9-ddb5-4fa4-a97d-d965ccfc6d4b" outcome="Passed" testListId="8c84fa94-04c1-424b-9868-57a2d4851a1d" relativeResultsDirectory="cfc325a7-647f-4ef3-bb08-777f7bb3ca37" resultType="DataDrivenTest">
  <Output>
    <TextMessages>
      <Message>valueA: 1, valueB: 4, AssertResult: Passed</Message>
      <Message>valueA: 2, valueB: 6, AssertResult: Passed</Message>
      <Message>valueA: 3, valueB: 8, AssertResult: Passed</Message>
      <Message>valueA: 4, valueB: 0, AssertResult: Assert.AreEqual failed. Expected:&lt;10&gt;. Actual:&lt;0&gt;. </Message>
      <Message>valueA: 5, valueB: 0, AssertResult: Assert.AreEqual failed. Expected:&lt;12&gt;. Actual:&lt;0&gt;. </Message>
      <Message>valueA: 6, valueB: 0, AssertResult: Assert.AreEqual failed. Expected:&lt;14&gt;. Actual:&lt;0&gt;. </Message>
      <Message>valueA: 7, valueB: 16, AssertResult: Passed</Message>
      <Message>valueA: 8, valueB: 18, AssertResult: Passed</Message>
      <Message>valueA: 9, valueB: 20, AssertResult: Passed</Message>
      <Message>valueA: 10, valueB: 0, AssertResult: Assert.AreEqual failed. Expected:&lt;22&gt;. Actual:&lt;0&gt;. </Message>
      <Message>valueA: 11, valueB: 0, AssertResult: Assert.AreEqual failed. Expected:&lt;24&gt;. Actual:&lt;0&gt;. </Message>
      <Message>valueA: 12, valueB: 0, AssertResult: Assert.AreEqual failed. Expected:&lt;26&gt;. Actual:&lt;0&gt;. </Message>
      <Message>valueA: 13, valueB: 28, AssertResult: Passed</Message>
      <Message>valueA: 14, valueB: 30, AssertResult: Passed</Message>
      <Message>valueA: 15, valueB: 32, AssertResult: Passed</Message>
      <Message>valueA: 16, valueB: 34, AssertResult: Passed</Message>
      <Message>valueA: 17, valueB: 36, AssertResult: Passed</Message>
      <Message>valueA: 18, valueB: 38, AssertResult: Passed</Message>
      <Message>valueA: 19, valueB: 40, AssertResult: Passed</Message>
      <Message>valueA: 20, valueB: 42, AssertResult: Passed</Message> 
```

可以解析这些 TextMessage 以生成测试报告。（例如）

PS对不起，我不能添加截图，因为我没有10个或更多的声望=\

# php - PHP COUNT_RECURSIVE 和 SplFixedArray

> ID：12284818
> 
> 赞同：4
> 
> 时间：2012-09-05T15:25:30.557
> 
> 标签：php, spl

[与SplFixedArray](http://php.net/manual/en/class.splfixedarray.php)一起使用时，我看到 count( $arr, COUNT_RECURSIVE ) 出现一些奇怪的行为。以这段代码为例...

```
$structure = new SplFixedArray( 10 );

for( $r = 0; $r < 10; $r++ )
{
    $structure[ $r ] = new SplFixedArray( 10 );
    for( $c = 0; $c < 10; $c++ )
    {
        $structure[ $r ][ $c ] = true;
    }
}

echo count( $structure, COUNT_RECURSIVE ); 
```

结果...

```
> 10 
```

您会期望结果为 110。这是因为我嵌套了 SplFixedArray 对象而导致的正常行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:30:44.493

`SplFixedArray`实现`Countable`，但`Countable`不允许参数，因此您不能计算递归。[参数被忽略。](http://codepad.viper-7.com/cYRmFU)[`SplFixedArray::count`](http://php.net/manual/en/splfixedarray.count.php)您可以从and的方法签名中看到这一点[`Countable::count`](http://php.net/manual/en/countable.count.php)。

[在https://bugs.php.net/bug.php?id=58102](https://bugs.php.net/bug.php?id=58102)有一个为此打开的功能请求

* * *

您可以子类化`SplFixedArray`并使其实现`RecursiveIterator`，然后重载`count`要使用的方法，`iterate_count`但它总是会计算所有元素，例如它总是`COUNT_RECURSIVE`那么。不过也可以添加专用方法。

```
class MySplFixedArray extends SplFixedArray implements RecursiveIterator
{
    public function count()
    {
        return iterator_count(
            new RecursiveIteratorIterator(
                $this,
                RecursiveIteratorIterator::SELF_FIRST
            )
        );
    }

    public function getChildren()
    {
        return $this->current();
    }

    public function hasChildren()
    {
        return $this->current() instanceof MySplFixedArray;
    }
} 
```

[演示](http://codepad.viper-7.com/76Kcj4)

# html - HTML5 swipe.js css3 过渡；页面元素的屏幕外渲染和缓存

> ID：12284820
> 
> 赞同：12
> 
> 时间：2012-09-05T15:25:37.663
> 
> 标签：html, rendering, css-transitions, browser-cache, swipe

我正在使用 swipe.js ( [http://swipejs.com](http://swipejs.com) ) 为平板电脑和台式机构建 HTML5 杂志。

一切似乎都运行良好，在一个 HTML 页面中，我设置了彼此相邻的全屏列表元素。整本杂志都建立在一个静态 html 文件中。我可以通过在平板电脑上滑动和使用桌面版本的按钮来滑动页面（考虑 swipe.js 主页上的示例，然后使用全屏幻灯片）。

这些页面彼此相邻放置，并具有屏幕的尺寸。

```
[ |0||1||2| .. |i-1||i||i+1| .. |n| ] 
```

swipe.js 转换是在 css3 的帮助下完成的，使用 translate3d() css 函数。在这种情况下，使用硬件渲染。

在桌面（Chrome、Safari、FF）、iPad1 和（甚至更好）iPad2 上，这具有我想要的效果；平滑过渡。完美的！然而，在 iPad3 上，页面在第一次进入（通过转换）时似乎呈现“缓慢”。即使没有设置背景图像（只是颜色），过渡页面的“渲染”也被认为有点“慢”；该页面是由“闪烁”块构建的。

**假设**：我的假设是（在阅读主题之后），这是因为浏览器只渲染屏幕内的元素，并且只会缓存刷过的页面一段时间，然后清理缓存以控制内存管理。

**我的问题**：有没有办法控制屏幕外渲染和缓存，以便我可以强制（预）渲染页面元素 i-1、i+1（并刷新所有其他页面元素的缓存），以加快我的过渡渲染？

**注意**：*在 StackOverflow 的几个主题中，提到了 css3 转换的“闪烁”。我已经实现了建议的 CSS 技巧，但不能解决我的问题。*

```
-webkit-backface-visibility: hidden;
-webkit-transform:translate3d(0,0,0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-12T18:15:01.437

最后，解决方案是 Swipejs 的 hack，我在其中添加了一个方法“hideOthers()”，将样式可见性设置为“隐藏”，从硬件内存中卸载页面：

```
hideOthers: function(index) {
  var i = 0;
  var el;

  for( i in this.slides ) {
      el = this.slides[i];
      if ( el.tagName == 'LI' ) {
          // Show pages i-1, i and i+1
          if ( parseInt(i) == index
             || (parseInt(i) + 1) == index
             || (parseInt(i) - 1) == index
          ) {
              el.style.visibility = 'visible';
          }
          else {
              el.style.visibility = 'hidden';
          }
      }
   }
} 
```

..并将下面的触发器添加为“slide()”方法的最后一行

```
// unload list elements from memory
var self = this;
setTimeout( function() { self.hideOthers(index); }, 100 ); 
```

只需要 translate3d 来切换硬件加速（如我上面的问题所述）：

```
-webkit-transform:translate3d(0,0,0); 
```

[您可以在此处](http://weekblad.intermediair.nl "中介数字杂志")找到结果（包括用于垂直滚动的 iScroll）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T23:17:09.990

关于用于触发硬件加速的 webkit backface/translate3d 道具，我读到在 iOS 6+ 中，这些道具与以前的版本不太一样，而且（更重要的是）不需要应用硬件加速仅在正在动画的元素上，而且在它重叠/重叠的任何元素上。

参考资料（不多）：http: [//indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/](http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/)

公平地说，这是相当轶事，由于截止日期紧迫，我自己无法解决自己的闪烁问题，但这可能是朝着正确方向发展的一点。

# php - php GD画一条直线的角度

> ID：12284828
> 
> 赞同：2
> 
> 时间：2012-09-05T15:26:01.227
> 
> 标签：php, image, gd

我在 PHP GD 中制作了那张图片，但它的线条有一个小问题。

![](../Images/d1223d909f4bae19a838e6f1ce8127f2.png)

您看到的线条是由`imageline()`.

因此，当我使用它创建具有角度的线条时，线条会产生一些噪音。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:35:41.017

您可以尝试使用[`imageantialias()`](http://php.net/manual/en/function.imageantialias.php). 就像是

```
imageantialias($image, true); 
```

这将导致一条线*比*你的更好看。

# python - django 测试将灯具数据插入 mysql 失败

> ID：12284832
> 
> 赞同：1
> 
> 时间：2012-09-05T15:26:27.423
> 
> 标签：python, mysql, django, django-models

我想在运行测试用例之前将测试数据插入数据库。

从 django 的详细输出来看，它说它已经从固定装置加载了很多对象。但是测试数据库中的表仍然是空的。我在我的测试代码中设置断点，然后检查测试数据库的表。我什至调试了 django 代码，它确实执行了插入 sql 并返回了受影响的行。但我仍然无法在测试数据库中找到数据！

数据库服务器是mysql。

有什么解决办法吗？

**django 测试的详细输出**，

```
...
Loading 'goods_756399566_3my10' fixtures...
...
Trying '/Users/kane/git/blizzard_recommend/blizzard_recommend/src/web/fixtures' for goods_756399566_3my10.xml.zip fixture 'goods_756399566_3my10'...
No xml fixture 'goods_756399566_3my10' in '/Users/kane/git/blizzard_recommend/blizzard_recommend/src/web/fixtures'.
Trying '/Users/kane/git/blizzard_recommend/blizzard_recommend/src/web/fixtures' for goods_756399566_3my10.xml.bz2 fixture 'goods_756399566_3my10'...
No xml fixture 'goods_756399566_3my10' in '/Users/kane/git/blizzard_recommend/blizzard_recommend/src/web/fixtures'.
Trying '/Users/kane/git/blizzard_recommend/blizzard_recommend/src/web/fixtures' for goods_756399566_3my10.json fixture 'goods_756399566_3my10'...
Installing json fixture 'goods_756399566_3my10' from '/Users/kane/git/blizzard_recommend/blizzard_recommend/src/web/fixtures'.
Trying '/Users/kane/git/blizzard_recommend/blizzard_recommend/src/web/fixtures' for goods_756399566_3my10.json.gz fixture 'goods_756399566_3my10'...
No json fixture 'goods_756399566_3my10' in '/Users/kane/git/blizzard_recommend/blizzard_recommend/src/web/fixtures'.
Trying '/Users/kane/git/blizzard_recommend/blizzard_recommend/src/web/fixtures' for goods_756399566_3my10.json.zip fixture 'goods_756399566_3my10'...
...
Installed 117 object(s) from 2 fixture(s) 
```

**更新**：

我尝试转储与 initial_data.json 相同的数据，这个夹具中的数据可以插入到测试数据库中。我不知道为什么 django 在运行测试用例之前无法插入固定装置，但这是让我的工作继续进行的一种解决方法。

**解决方法**：

我不确定这是我的环境造成的。无论如何我在做测试时将数据库更改为SQLLite，将夹具数据导入内存数据库没有问题。在没有安装 mysql 的情况下运行单元测试也很有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-30T23:18:03.203

这已经很晚了，但是，我在研究自己的类似问题时发现了这个问题。答案是，每个 Django 测试都包含在一个事务中，所以如果你跳到其他程序来检查数据库，这就是你看不到它的原因。

这个问题指向相关文档：[Django Rest Framework testing save POST request data](https://stackoverflow.com/questions/29287012/django-rest-framework-testing-save-post-request-data?rq=1)

（可悲的是，这不是我自己问题的原因。）

# javascript - 未调用Javascript onscroll事件

> ID：12284834
> 
> 赞同：2
> 
> 时间：2012-09-05T15:26:33.810
> 
> 标签：javascript, ajax, events

我有一个使用 HTML5/CSS、Asynch 创建的即时聊天程序。Javascript 和 PHP。我有一个间隔是不断检查用户的聊天框`div`是否滚动到底部以方便用户使用。当用户希望向上滚动以查看以前的消息时，这成为一个问题，因此我尝试使用该`onscroll`事件来停止间隔。我无法让它工作，因此通过使用`onmouseover`and`onmouseout`事件开始和停止间隔走了更长的路。

这对于台式计算机来说非常适用，因为它们有一个可见的鼠标。然而，对于移动设备，例如我的 Windows 手机 - 该程序主要设计用于，存在一个问题，因为您首先必须点击消息框（大概是首先将不可见的移动鼠标移动到聊天框上）然后滚动手指移动滚动不受影响。

这不是主要问题，因为我可以通知移动用户先点击然后滚动，但我觉得成功使用该`onscroll`事件将与桌面用户的可用性相匹配。

活动是否存在已知问题`onscroll`？我敢说我熟悉 JS 事件并且可以适当地使用它们，但这是我在 FF 或 IE 中没有设法开始工作的唯一事件。

任何想法或帮助将不胜感激，李。

以下是管理滚动检查开/关的当前事件，其中 ScrollCheck() 是检查滚动位置并在不在底部时将其移动的函数，而 scrollInterval 是保存间隔 id 的全局变量。

```
document.getElementById('messages').onmouseover = function()
{
    clearInterval(scrollInterval);
}

document.getElementById('messages').onmouseout = function()
{
    scrollInterval = setInterval(ScrollCheck, 300);
} 
```

我只是将`onmouseover`事件替换为`onscroll`没有任何运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:30:08.753

当我创建一个聊天页面时，我只在添加新消息时检查滚动：

```
var currentScroll = elem.scrollTop, oldmaxScroll = elem.scrollHeight-elem.clientHeight;
// add new message(s) here
var newmaxScroll = elem.scrollHeight-elem.clientHeight;
if( currentScroll == oldmaxScroll) elem.scrollTop = newmaxScroll; 
```

# c# - 读取 Dll 参数

> ID：12284841
> 
> 赞同：0
> 
> 时间：2012-09-05T15:26:49.573
> 
> 标签：c#, windows, dll

我有一个包含四个函数的 DLL 文件，我需要访问这四个函数，但它们没有名称，只有我知道的入口点。我必须弄清楚这四个函数的作用。问题是，如何在 C#(.Net) 中调用这些未知函数？我怎样才能弄清楚它们的参数和返回值是什么？DLL 是`Sndvolsso.DLL`. 它的功能在互联网上无处可寻。（除非你能找到它们）如果有人知道我可以用来读取参数和返回值的工具，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:41:29.543

如果您的 DLL 未管理：-

使用[IDA](http://www.hex-rays.com/products/ida/index.shtml)

1.  反汇编dll，找到导出的函数。
2.  双击该函数，其声明将显示在 IDA 中。

IDA 中 user32.dll 的 MessageBoxA 示例：-

```
.text:77D6EA11
.text:77D6EA11 ; int __stdcall MessageBoxA(HWND hWnd, LPCSTR lpText, LPCSTR lpCaption, UINT uType)
.text:77D6EA11 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:46:16.780

您还可以使用[IDA 5.0](http://www.hex-rays.com/products/ida/support/download_freeware.shtml)的免费版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:34:19.953

参数/类型/签名信息不存储在非托管 DLL 文件中。您可以使用`LoadLibrary`and`GetProcAddress`和使用 ordinal 获取每个导出函数的地址。但你得到的只是地址；由您决定如何正确调用函数。

它将帮助您了解函数在二进制/机器代码级别的工作方式以及堆栈的工作方式。

以下是您的选择：

1.  正如您所说，从互联网等外部资源中查找信息。
2.  如果你能找到 PDB 文件，这就是调试信息文件，它是调试器如何知道如何将内存中的位置与代码行相关联的方式。它将包含您要查找的所有元数据。但是在您的情况下，我认为您无权访问它。
3.  如果您对汇编和理解二进制级别的可执行代码感到满意，请反汇编或调试 DLL。看看它期待什么，它如何使用堆栈。

否则你将不得不妥协：

1.  使用不同的库。最实用，因为老实说，如果你对此一无所知*，*`sndvolsso.dll`那么即使你让它“工作”，一旦出现任何问题，你也会迷失方向。
2.  雇用可以做到这一点的人。
3.  只需编写自己的代码，而不是使用这个。

但是仔细想想，你的问题并没有真正的意义。如果你不知道这些功能是什么，你怎么知道你需要它们？

# postback - 如何找到我的 C# 面板控件？

> ID：12284842
> 
> 赞同：1
> 
> 时间：2012-09-05T15:26:52.523
> 
> 标签：postback, findcontrol, data-persistence

我失去了我的 C# 面板控件....

我的面板的 asp 是

```
 <asp:Panel ID="pnlSett1" GroupingText="Contra Account 1" runat="server" 
            Width="400" >
 </asp:Panel> 
```

我已经在使用后面的代码中设置了控件

```
Label lblCompanyNumber = new Label();
lblCompanyNumber.Text = "ABCDEF";
lblCompanyNumber.ID = "CompanyNumber";
pnlSett1.Controls.Add(lblCompanyNumber); 
```

但是在面板被填充并且用户点击ContraUpdate按钮（回发）之后---

```
protected void btnContraUpdate_Click(object sender, EventArgs e)

        Control pnlCompanyNumber = pnlSett1.FindControl("CompanyNumber"); 
```

它找不到控件....返回空值

任何想法，我都尝试将 Find Control 放在初始 Control Add 之后，以证明它`FindControl`是正确的，但后来我在返回途中的 PageLoad 上尝试了它，这也带回了 Null 值...... ...

# wpf - 更改托管到 Winform 的依赖项属性（在 ViewModel 中）

> ID：12284845
> 
> 赞同：1
> 
> 时间：2012-09-05T15:27:06.787
> 
> 标签：wpf, winforms, mvvm, integration

我有`WinForm`托管在它`WPF`（`mvvm`）部分的应用程序。是否可以从我的`dependency property`中更改？`ModelView``WinForm`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:32:17.940

> 是否可以从我的 WinForm 更改 ModelView 中的依赖属性？

它是 - 但您的 Windows 窗体部分需要了解 WPF 类型才能做到这一点。您始终可以使用[在实现依赖属性时定义的包装器](http://msdn.microsoft.com/en-us/library/ms753358.aspx#checklist)从代码中调用它。

但是，如果您托管的是 Windows 窗体控件，则可能需要创建一个 WPF 包装器，该包装器订阅控件上的相应事件，并使用它们来设置依赖项属性。这样，您的 Windows 窗体部分将保持“纯”并且不需要修改，并且您的 WPF 部分可以适当地设置所有内容。

# python-3.x - 在一个值中列出理解和排除

> ID：12284846
> 
> 赞同：0
> 
> 时间：2012-09-05T15:27:14.613
> 
> 标签：python-3.x

我在 python3 中遇到问题。我想排除 0 作为值之一，但我似乎无法做到这一点。我尝试添加另一个“and if”参数，但结果仍然包含 0。

我想要 1 到 100 之间的 6 倍数的值。0 显然不是其中之一。

```
x for x in range(100) if x % 6 == 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:08:07.017

最直接的答案就是

```
range(6, 101, 6) 
```

但是，如果您执行以下操作，您的原始方法应该可以工作：

```
[x for x in range(101) if x % 6 == 0 and x != 0] 
```

（`and if`不需要，它只是一个`if`带有复合测试的子句）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:29:40.920

尝试：

```
x for x in range(100) if x%6 == 0 and x != 0 
```

或者简单地说：

```
x for x in range(1,100) if x%6 == 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:29:48.400

如果要排除 0，请不要首先包含它：

```
range(1, 100) 
```

# java - 为什么我在 Proguard 混淆后找不到这个资源？

> ID：12284860
> 
> 赞同：0
> 
> 时间：2012-09-05T15:27:54.143
> 
> 标签：java, obfuscation

在 Proguard Obfuscation 无法从 jar 中找到资源后，我收到以下错误

```
Caused by: java.lang.NoClassDefFoundError: Could not initialize class mypackege.MyClass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:40:56.380

可以在 [链接上找到](http://proguard.sourceforge.net/index.html#manual/ant.html)

`<adaptresourcefilenames filter = "file_filter" />`
`Rename the specified resource files, based on the obfuscated names of the corresponding class files.`

`<adaptresourcefilecontents filter = "file_filter" />`
`Update the contents of the specified resource files, based on the obfuscated names of the processed classes.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:32:29.337

目前我们必须定义不想被经常使用的 ofuscas 类和方法，因为它们会从 jar 外部调用

蚂蚁的例子：

```
<taskdef resource="proguard/ant/task.properties"
         classpath="/usr/local/java/proguard/lib/proguard.jar" />
<proguard>
  -libraryjars ${java.home}/lib/rt.jar
  -injars      in.jar
  -outjars     out.jar

  -keepclasseswithmembers public class * {
      public static void main(java.lang.String[]);
  }
</proguard> 
```

更多信息： http: [//proguard.sourceforge.net/index.html#manual/ant.html](http://proguard.sourceforge.net/index.html#manual/ant.html)

问候，

# r - 计算R中的移动新近加权平均值

> ID：12284869
> 
> 赞同：4
> 
> 时间：2012-09-05T15:28:45.043
> 
> 标签：r

在给定时间（天）和完成位置（位置）的情况下，我想计算一匹马参加的一系列比赛的移动新近加权平均完成位置。这样的统计数据在[障碍](http://en.wikipedia.org/wiki/Handicapping)方面很有用。

目前，我正在使用“循环内循环”方法。有没有更快或更优雅的 R 语言方法来解决这个问题？

```
#
# Test data
#

day <- c(0, 6, 10, 17, 21, 26, 29, 31, 34, 38, 41, 47, 48, 51, 61)
pos <- c(3, 5, 6, 1, 1, 3, 4, 1, 2, 2, 2, 6, 4, 5, 6)
testdata <- data.frame(id = 1, day = day, pos = pos, wt.pos = NA)

#
# No weight is given to observations earlier than cutoff
#

cutoff <- 30

#
# Rolling recency-weighted mean (wt.pos)
#

for(i in 2:nrow(testdata)) {
  wt <- numeric(i-1)
  for(j in 1:(i-1))
    wt[j] <- max(0, cutoff - day[i] + day[j] + 1)
    if (sum(wt) > 0)
      testdata$wt.pos[i] <- sum(pos[1:j] * wt) / sum(wt)
}

> testdata

   id day pos   wt.pos
1   1   0   3       NA
2   1   6   5 3.000000
3   1  10   6 4.125000
4   1  17   1 4.931034
5   1  21   1 3.520548
6   1  26   3 2.632911
7   1  29   4 2.652174
8   1  31   1 2.954128
9   1  34   2 2.436975
10  1  38   2 2.226891
11  1  41   2 2.119048
12  1  47   6 2.137615
13  1  48   4 3.030534
14  1  51   5 3.303704
15  1  61   6 4.075000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:14:50.760

我会去

```
# Calculate `wt` for all values of `i` in one go
wt <- lapply(2:nrow(testdata), function(i)
    pmax(0, cutoff - day[i] + day[1:(i-1)] + 1))

# Fill in the column
testdata$wt.pos[-1] <- mapply(
    function(i, w) if(sum(w) > 0) sum(pos[1:i]*w)/sum(w) else NA,
    1:(nrow(testdata)-1), wt) 
```

请注意，通过同时`max`为所有 的值计算第二个参数，`j`我们对计算进行了矢量化，这将速度提高了许多数量级。

我发现没有简单的方法来矢量化外部循环和`if`案例（除了用 C 重写它看起来有点过分），但是`lapply`,`mapply`和类似的仍然比`for`循环快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:57:11.413

该版本演示了如何计算 1 个或多个变量（例如，完成位置、速度等级等）和 1 个或多个主题（马）的移动新近加权平均值。

```
library(plyr)

day <- c(0, 6, 10, 17, 21, 26, 29, 31, 34, 38, 41, 47, 48, 51, 61)
pos <- c(3, 5, 6, 1, 1, 3, 4, 1, 2, 2, 2, 6, 4, 5, 6)
dis <- 100 + 0.5 * (pos - 1)
testdata1 <- data.frame(id = 1, day = day, pos = pos, dis = dis)
day <- c(0, 4, 7, 14, 22, 23, 31, 38, 42, 47, 52, 59, 68, 69, 79)
pos <- c(1, 3, 2, 6, 4, 5, 2, 1, 4, 5, 2, 1, 5, 5, 2)
dis <- 100 + 0.5 * (pos - 1)
testdata2 <- data.frame(id = 2, day = day, pos = pos, dis = dis)
testdata <- rbind(testdata1, testdata2)

# Moving recency-weighted mean
rollmean <- function(day, obs, cutoff = 90) {
  obs <- as.matrix(obs)
  wt <- lapply(2:nrow(obs), function(i)
    pmax(0, cutoff - day[i] + day[1:(i-1)] + 1))
  wt.obs <- lapply(1:(nrow(obs)-1), FUN =
    function(i)
      if(sum(wt[[i]]) > 0) {
        apply(obs[1:i, , drop = F] * wt[[i]], 2, sum) / sum(wt[[i]])
      } else {
        rep(NA, ncol(obs))
      }
  )
  answer <- rbind(rep(NA, ncol(obs)), do.call(rbind, wt.obs))
  if (!is.null(dimnames(answer)))
    dimnames(answer)[[2]] <- paste("wt", dimnames(answer)[[2]], sep = ".")
  return(answer)
}

x <- dlply(testdata, .(id), .fun =
  function(DF) rollmean(DF$day, DF[, c("pos", "dis"), drop = F])
)
y <- do.call(rbind, x) 
```

# ruby-on-rails - 使用 CouchRest 的 Couchdb 查找器

> ID：12284870
> 
> 赞同：0
> 
> 时间：2012-09-05T15:28:48.347
> 
> 标签：ruby-on-rails, couchdb, couchrest, findby

我只想知道如何在使用 couchdb 的同时在 Rails 中构建 find_all_by_action_and_author_id 方法。我的模型如下所示：

```
class Activity < CouchRest::Model::Base
  property :action,    String
  property :author_id, String
end 
```

如果我尝试构建这样的视图：

```
design do
  view :by_action_and_author_id
end 
```

我不知道如何得到正确的结果，我用这个试过：

```
Activity.by_action_and_author_id(:keys => [['action','foo'], ['author_id', '1']]).all 
```

但结果总是一个空哈希。做这个的最好方式是什么？有什么例子吗？

使用 PostgreSQL，它看起来像这样

```
Activity.where(action: 'foo', author_id: '1').all 
```

不可能这么复杂

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:59:59.140

看看生成的couchdb-view！您可以看到发出了哪些键。那里没有任何映射，所以我认为`[['action','foo'], ['author_id', '1']]`应该是公正`['foo', '1']`的。

我不确定 couchrest-models 如何处理视图，但您可以在此处找到更多信息：http: [//www.couchrest.info/model/view_objects.html](http://www.couchrest.info/model/view_objects.html)

看看标签示例。

# asp.net-mvc-3 - 如何避免重复返回 View/PartialView 的 ASP.NET MVC 3 控制器操作

> ID：12284872
> 
> 赞同：0
> 
> 时间：2012-09-05T15:28:55.323
> 
> 标签：asp.net-mvc-3, action, partial-views

我有一堆返回视图的控制器操作。现在我还需要为每个操作返回 PartialView，因为我想让我的程序集在具有父视图的父应用程序中可重用（我将在父视图中使用 Html.Action）。复制每个动作以返回部分视图有点麻烦。在父视图中嵌套控制器操作时，是否有更简洁的方法来禁用布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:55:33.897

您可以签`ControllerContext.IsChildAction`入您的操作方法，如果为真，则返回不同的视图。

```
if (ControllerContext.IsChildAction)
{
    return PartialView("_Index", model)
}
else 
{
    return View("Index", model)
} 
```

如果它对您的应用程序有意义，请在您的完整视图中加载部分视图，以便您可以重用标记。

# prolog - 压缩正 DNF

> ID：12284873
> 
> 赞同：2
> 
> 时间：2012-09-05T15:29:00.623
> 
> 标签：prolog, boolean-logic, conjunctive-normal-form

我想以析取范式（DNF）压缩**正命题公式。**

我暂时只假设没有否定文字的简单 DNF。逆过程，解压可以很容易地定义。对于仅由合取和析取组成的公式，以下重写规则将生成 DNF：

```
A & (B v C) --> (A & B) v (A & C)
(A v B) & C --> (A & C) v (B & C) 
```

下面是一个解压的例子：

```
Example: Decompression
Input:
  (p & (q v r) & s & (t v u)) v
  w.

Output:
  (p & q & s & t) v
  (p & r & s & t) v
  (p & q & s & u) v
  (p & r & s & u) v
  w. 
```

现在我想知道是否有一些算法可以从 DNF 生成单个公式。我已经研究过二元决策图。我对这些的问题是它们不能在途中结合所有的析取。

例如，使用共享的二元决策图算法，在打印过程中仍会显示类似的分支和/或引入新的介词变量，这两件事都是不希望的：

```
Example: Compression (Bad)
Input:
  (p & q & s & t) v
  (p & r & s & t) v
  (p & q & s & u) v
  (p & r & s & u) v 
  w.

Output:
  (p & ((q & s & (t v u)) v (r & s & (t v u)))) v
  w.

- or -

Output:
  (p & ((q & h) v (r & h))) & (h <-> s & (t v u))) v
  w. 
```

结果应该是一个公式，**不再是 DNF**，它比仅使用析取和合取的二元决策图算法以及原始 DNF 中已经找到的介词变量更紧凑。这是所需压缩的示例：

```
Example: Compression (Good)
Input:
  (p & q & s & t) v
  (p & r & s & t) v
  (p & q & s & u) v
  (p & r & s & u) v
  w.

Output:
  (p & (q v r) & s & (t v u)) v
  w. 
```

你会怎么做？首选 Prolog 实现。

再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:42:46.470

我认为您需要的是一种系统算法来计算两层中布尔表达式的最小值（输入变量的结合的析取，或输入变量的析取的结合）。

用于执行此操作的常用算法是[卡诺图](http://en.wikipedia.org/wiki/Karnaugh_map)和[Quine-McCluskey](http://en.wikipedia.org/wiki/Quine%E2%80%93McCluskey_algorithm)算法。

这些算法确实适用于否定变量。在任何情况下，至少如果您的输入是析取范式（DNF）并且没有出现否定变量，则表示为输入变量的结合析取的输出也不会有否定变量）。

# c++ - 如何最好地防止关闭文件的功能？

> ID：12284875
> 
> 赞同：2
> 
> 时间：2012-09-05T15:29:17.987
> 
> 标签：c++, file-io, stl, constants

因此，我一直在尝试更加严格地制作任何不应被函数触及的传递参数`const`。

我在一些 C++ 代码中遇到的一种情况是对象可能会更改，但我想“锁定”函数以防止访问对象的某些关键功能。例如，对于`std::ifstream`文件句柄，我可能希望阻止函数关闭文件。

如果我将它作为 a 传递`const &`，则该`const`部分似乎使我无法执行标准文件 i/o。

例如，我想要一些类似的东西

```
void GetTags(Arr<std::string> & tags, std::ifstream const& fileHandle) 
```

...但是以允许文件 i/o 但不允许打开/关闭操作的方式编写。

在 C++ 中有没有好的/可靠的方法来做到这一点？什么被认为是最佳实践？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:37:22.060

标准库设计已经为您完成了这项工作：改为传递对*基*类的引用`std::istream`，它没有打开或关闭的概念 - 它只公开*流*接口。

```
void stream_me(std::istream & is);

std::ifstream is("myfile.txt");
stream_me(is); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:38:10.080

在你的地方，我只是通过 a`std::istream`代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:33:07.147

您可以将 ifstream 包装在一个对象中，该对象仅公开您希望调用者能够使用的功能。

但是，如果你有一堆不同的函数，每个函数都有不同的 ifstream 功能子集，你最终会得到很多不同的包装类；所以我不认为这是一个通用的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:33:54.013

我认为最好的方法是将其包装在一个新类中，该类仅具有与您想要访问`ifstream`的功能相对应的成员函数。`GetTags`然后将其`ifstream`作为第二个参数传递给`GetTags`.

# deployment - 为 PHP/MySQL 应用程序设置开发和生产环境的最佳方法是什么？

> ID：12284876
> 
> 赞同：1
> 
> 时间：2012-09-05T15:29:19.660
> 
> 标签：deployment, version-control, hosting, git-svn

在过去的几个月里，我一直在本地 MAMP 计算机上本地开发 Web 应用程序。现在我准备启动它，同时继续添加增强/修复。所以，我想知道什么是实现开发和生产服务器的好方法，以便有效地管理更新、防止覆盖以及将其他开发人员无缝添加到工作流中。我还想要一些对我来说学习曲线最小的东西。就个人而言，无论出于何种原因，我从未能够完全掌握像 Git 或 SVN 这样的版本控制系统，所以我希望有一个更简单的解决方案，直到我能够投资更多的业务信息。

正如我所看到的，我拥有的选项是：

*   在启动之前花更多时间学习 Git。并希望我在进一步开发我的应用程序时不会破坏任何东西。

*   购买两个托管帐户。一个用于 Dev，一个用于 Prod，只有我可以在 Prod 中进行部署。我想我必须跟踪我们在电子表格中修改的所有文件，这些文件被认为可以部署。

*   在 FTP 上进行编辑（无开发服务器）。

您还有其他可以推荐的选择吗？我听说有一些新型的网络托管公司可以做繁重的工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:43:05.207

虽然就个人而言，我在多开发人员网站上使用 svn/git 有过很好的经验，但我可以理解你对开始依赖你并不完全熟悉的东西的沉默。不幸的是，我相信这是您最好的选择，但如果做不到这一点，您可能会尝试使用子域。我的前雇主会在磁盘上创建测试区域并指向*beta.thedomainname.com*。当错误修复或升级完成并验证可以在 beta 目录中运行时，整个目录将被复制到活动域中。不是最优雅的解决方案，但它确实有效。它肯定比购买两个托管帐户便宜。

# android - 设备无法获取封闭区域内的位置

> ID：12284877
> 
> 赞同：0
> 
> 时间：2012-09-05T15:29:22.453
> 
> 标签：android, service, gps

我的应用程序需要不断更新服务器的位置，以便它收到任何附近地点的通知。

我编写了一个后台服务来运行位置服务并将位置更新到服务器。一切正常，但问题是当我在封闭区域内（例如我在家里）时，它无法获取位置和连续运行的位置服务，这正在耗尽设备电池。

当我在天空下测试它时，它完美无缺。当我获得位置更新并再次开始获取时，我将删除更新。

如果有人遇到过这种问题，请在这方面帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:04:10.130

根据我的经验，这取决于您的位置提供商/来源

*   移动网络~500-1000m精度
*   WIFI ~25m 精度
*   GPS精度高达10m

您需要连接到您的移动网络才能从中获取位置，WIFI 网络相同，并且 GPS 通常不会工作，除非您在外面/可以看到天空！

# asp.net - Asp.Net WebAPI 和自定义 WebDav 处理程序

> ID：12284883
> 
> 赞同：3
> 
> 时间：2012-09-05T15:29:46.147
> 
> 标签：asp.net, asp.net-web-api, webdav

**上下文：** 当前系统有一个自定义的 WebDav HttpHandler 来处理文件上传、编辑等。网站是基于 WebFrom 的。新的 WebAPI 将建立在此之上。

使用 Asp.Net 提供的示例项目。集成工作正常，除了 WebDav 被破坏之外的所有 WebForms 和 WebAPI 方法。

**问题：** 在 global.asax 中注册 WebAPI 后，HTTP PUT 请求总是被发送到 WebAPI 路由，WebDav 的 PUT 请求不会匹配并得到 404 响应（异常？）。

根据这篇 [文章][1]，看起来 HTTPRouting 与 MVC 路由不同。HttpConfiguration.Routes 没有 ignore() 路由。

**要实现的目标：** PUT 请求能够被区分并相应地发送到 WebAPI 或 WebDav 处理程序。例如：任何与 WebAPI 路由模式不匹配的请求请求都将沿管道传递给处理程序，而不是获取异常响应。

WebDav put request 看起来像这样，它也是虚拟化的：

```
PUT /dav/{USERID}/{AUTH_TOKEN}/{PRAMS}/{PATHINFO}2.png 
```

--编辑

路由引擎的异常。我正在寻找的是一种在找不到控制器时传递请求的方法，让 IIS 管道中的其他处理程序/模块来处理请求而不是抛出错误响应。

响应由 WebAPI 生成，它不会传递给 CustomWebDavHandler：

> [HttpException]：路径 {my WebDav virtual path} 的控制器未找到或未实现 IController。在 System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) 在 System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) 在 System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& 控制器, IControllerFactory& factory)
> 在 System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) 在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication .ExecuteStep(IExecutionStep 步骤，布尔值&

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:34:14.753

好吧，我的同事和我已经想通了...

RouteConfig.cs 和 WebApiConfig.cs（这两个文件可以在 asp.net 的示例中找到）的注册顺序很重要。

在 global.asax 中，它是：

```
WebApiConfig.Register(GlobalConfiguration.Configuration);
RouteConfig.RegisterRoutes(RouteTable.Routes); 
```

以便 WebApi 路由首先进入 IIS。路由集合中没有忽略方法。

但是，通过首先注册 RouteConfig，您确实有 ignore 方法，然后可以忽略 dav 请求并传递到处理程序。

```
RouteConfig.RegisterRoutes(RouteTable.Routes);
        WebApiConfig.Register(GlobalConfiguration.Configuration); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:01:09.720

你能在路由上尝试 HttpMethod Constraint [http://msdn.microsoft.com/en-us/library/system.web.routing.route.constraints.aspx](http://msdn.microsoft.com/en-us/library/system.web.routing.route.constraints.aspx)

# javascript - Jquery live() 绑定对某些元素不起作用

> ID：12284886
> 
> 赞同：-3
> 
> 时间：2012-09-05T15:29:52.037
> 
> 标签：javascript, jquery

我这样做：

```
JQ('body').delegate('a','click',function() {alert('test');}) 
```

单击后所有链接都会显示警报。但是一个链接没有显示。你怎么看，为什么？什么会导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:41:15.413

我必须假设这样的事情：http: [//jsfiddle.net/uAgS4/](http://jsfiddle.net/uAgS4/)正在发生。

```
$('body').delegate('a', 'click', function(event) {
    alert('working');
    event.preventDefault();
});

$('.disabled').click(function () {
    return false;
}); 
```

​基本上，您正在其他地方捕获事件并防止传播。[jQuery.Event stopPropagation](http://api.jquery.com/event.stopPropagation/)实际上与返回相同`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:37:09.900

这取决于您到底要做什么。分配事件时，页面中的链接首先是什么。或者它是后来添加到您的 DOM 中的。同时发布您的代码和标记应该会有所帮助..

# java - XStream - 将具有相同标识符的对象视为一个

> ID：12284889
> 
> 赞同：0
> 
> 时间：2012-09-05T15:30:02.683
> 
> 标签：java, hibernate, xstream

我正在使用 XStream 序列化对象以保持两个数据库同步的遗留系统。一个新对象首先存储在一个数据库中，然后将存储的对象序列化并发送到另一个数据库中。

直到最近，有问题的对象的结构是这样的：

```
public class Project {
    List<Milestone> milestones;
    [...]
} 
```

但是，在改变需求之后，结构应该是这样的：

```
public class Project {
    List<Goal> goals;
}

public class Goal {
    List<Milestone> milestones;
} 
```

为了保留对目标一无所知的遗留数据的里程碑，项目的最终结构是这样的：

```
public class Project {
    List<Goal> goals;
    List<Milestone> milestones;
} 
```

因此，从项目到里程碑有两条路径，一条直接路径，另一条通过目标路径。当这个结构被反序列化和存储时，就会出现问题。当它被 XStream 反序列化时，直接连接到项目的里程碑对象与通过目标连接的对象成为不同的对象，即使它们具有相同的 id。

只要使用 Hibernate 的 Session#merge() 来持久化这个对象，就没有问题，因为只要 db 标识符相同，merge() 就不会关心对象标识符。

但是，我不能再为此使用 merge() ，而必须依赖 Session#save() 。并且 save() 确实关心对象标识符！所以现在我在尝试存储反序列化对象时得到一个 org.hibernate.NonUniqueObjectException 。

我认为解决这个问题的最不干扰的方法是，如果可能的话，让 XStream 为每个数据库 id 创建 1 个对象。但这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:54:37.053

经过一番考虑，在我看来问题不在于 XStream，因为它具有对象引用机制。问题是我正在处理的项目的另一个漂亮的“功能” - 每个域类有 2 个版本，一个用于与 Hibernate 通信，一个用于“逻辑使用”（不要问我为什么......）在这两个版本之间的转换中（基本上将值从一个对象移动到另一个对象），对象被不加批判地新建，导致相同的“Hibernate-object”被转换为多个“Java-objects”。然后，我真的不能责怪 XStream 不理解这些应该是相同的 :)

# android - Android电池信息，无需注册广播接收器？

> ID：12284892
> 
> 赞同：2
> 
> 时间：2012-09-05T15:30:10.820
> 
> 标签：android

有什么方法可以`BatteryManager`在不注册广播接收器的情况下使用（或类似的方法）获取有关电池充电水平和状态的信息？

我基本上想通过按一下按钮将电池信息（除其他外）发送到我的服务器。就一次。这可能吗？？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:45:03.380

在一些可能的情况下`Context`（例如，`Activity`有问题的按钮），调用：

```
Intent i=registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED)); 
```

You `Intent`get back 将是此操作的最后一次广播，就像`ACTION_BATTERY_CHANGED`粘性广播一样。然后，您将从返回的内容中读取额外内容`Intent`，就好像您通过`BroadcastReceiver`. 但是，由于您是`null`作为接收者传递的，因此您不会随着时间的推移注册接收广播。

# eclipse - 提交失败：从 Windows 上的 Eclipse 提交到 Google 代码时，“存储库 UUID '...' 与预期的 UUID '...' 不匹配”

> ID：12284894
> 
> 赞同：7
> 
> 时间：2012-09-05T15:30:19.017
> 
> 标签：eclipse, svn

我能够很好地处理我在 Google Code 上的所有项目，但现在我无法承诺其中任何一个。我得到错误：

> 一些选定的资源未提交。svn：提交失败（详细信息如下）：svn：存储库 UUID '2b3ccc6c-acbf-642b-775e-b44874e3cfdd' 与预期的 UUID '2b06ef8f-344e-f67a-312d-ecb7346c3921' 不匹配

（我在 Windows 上使用 Eclipse）

更新时出现同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-21T21:08:38.263

您可以通过更正本地 SQLite3 subversion 数据库中存储库的 UUID 来解决此问题。为此，请从此处下载 sqlite3：

[http://www.sqlite.org/download.html](http://www.sqlite.org/download.html)

并将其放在 PATH 上的某个位置，以便系统知道它。然后在包含存储库 .svn 目录的目录中打开命令提示符或终端（如果您使用的是 linux）。然后打开 subversion 数据库文件进行编辑，如下所示：

```
sqlite3 .svn/wc.db 
```

这将启动一个接受 SQL 命令的命令行。键入此命令，将 UUID 替换为错误消息中显示的 UUID：

```
update REPOSITORY set uuid="2b3ccc6c-acbf-642b-775e-b44874e3cfdd" where id=1 
```

按 Enter 和 CTRL+C 退出。现在你应该可以再次运行你的 svn commit 命令了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T03:20:12.500

您的工作副本链接到存储库，该存储库必须具有唯一标识符（UUID），该标识符作为元数据的一部分存储在工作副本中，并且存储的 UUID 的身份和联系的 Repo 的 UUID 在操作上进行测试，可以修改存储库

出于某种原因，您尝试不与创建 WC 的同一存储库进行通信（相同的 URL！= 相同的存储库）

`svn info WC-PATH`使用and验证当前 UUID `svn info REPO-URL`（如果使用了外部，则主 repo 和所有“外部”的 REPO-URL）

`Repository UUID`值**必须**相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T14:15:09.047

当我尝试一次提交两个属于单独的外部存储库的文件时，我遇到了这个问题。我尝试分别提交它们并成功了。

# php - PHP 的函数 date() 不能正常工作？（意外的输出）

> ID：12284895
> 
> 赞同：2
> 
> 时间：2012-09-05T15:30:22.427
> 
> 标签：php, datetime

我注意到我的一个依赖于函数 date() 的脚本陷入了无限循环。在调查造成这种情况的原因时，我想出了一个非常简单且令人惊讶的测试：

```
<?php
echo (date("Y-m-d H:i:s",1330221136)."\n\n");
echo (date("Y-m-d H:i:s",1330222036)."\n"); 
```

由于第一个时间戳小于第二个，因此第一行应该返回更早的日期时间。但是上面代码的输出是：

```
2012-02-25 23:52:16 

2012-02-25 23:07:16 
```

有人知道 PHP 5.3 中函数 date() 的任何故障吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:33:59.610

如果时钟恰好在当地时间 00:00 倒转一小时，这可能会合法地发生。所以：

1.  您的代码有错误，因为它不允许发生这种情况
2.  似乎在您当地的时区 DST 于 2012-02-26 00:00（当地时间）结束
3.  这让我们知道您位于巴西（**感谢 Fluffeh**的发现！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:35:34.047

结果是复制/粘贴到我的安装中：

```
2012-02-26 02:52:16
2012-02-26 03:07:16 
```

这对我来说似乎很好。

# php - php爆炸在javascript模板中不起作用

> ID：12284901
> 
> 赞同：1
> 
> 时间：2012-09-05T15:30:46.763
> 
> 标签：php, javascript, jquery, json, template-engine

我知道一些帖子已经在处理同一主题。

以下是链接：

[与 jQuery 一起使用的 Javascript 模板引擎](https://stackoverflow.com/questions/9520241/javascript-template-engine-use-with-jquery)

[什么是 x-tmpl？](https://stackoverflow.com/questions/10025856/what-is-x-tmpl)

我正在尝试将 php explode 函数合并到 javascript 模板中。该插件是我从 GitHub 下载的 blueimp @ [https://github.com/blueimp/jQuery-File-Upload/downloads的 jQuery-File-Upload。](https://github.com/blueimp/jQuery-File-Upload/downloads)

以下是我试图执行并使其工作的代码的一部分。

```
 <!-- The template to display files available for download -->
         <script id="template-download" type="text/x-tmpl">
         {% for (var i=0, file; file=o.files[i]; i++) { %}
             <tr>
                <td>
                     <?php echo "{%=file.name%}"; ?> //{%file.name%} contains a string seperated by underscores
                     <?php $file_name_long = '{%=file.name%}'; ?>
                     <?php $file_name = explode ('_' , $file_name_long); ?>
                     <?php print_r($file_name); ?>
                </td>
             </tr>
               ...
               ... 
```

我可以将 $file_name 作为数组打印出来，但我无法通过**file.name**中的下划线将其分隔。打印的数组包含按照**file.name**的整个字符串。

我不确定这是否可能。我整天都在努力。如果这不可行或逻辑上不正确，请告诉我，这样我就可以停止尝试使这项工作。感谢和赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:41:00.123

您正在尝试读取 php 代码中的 javascript 值。

`{%=file.name%}`只是 php 的一个字符串，并且当您的 php 呈现输出时不包含实际的文件名。所以你的 print_r() 会输出`{%=file.name%}`，然后在整个 php 处理完成后在浏览器中翻译成你的文件名。

尝试仅在 javascript 中实现这些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:40:24.993

您正在尝试在客户端（在您的 js 模板中）执行服务器端代码 (php)。在您的 php 代码尝试执行它时，该代码`{%=file.name%}`尚未被替换（因为它在服务器上）。

如果您混合使用服务器端和客户端代码，您确实需要管理您的逻辑以说明服务器在客户端之前执行。

# java - 在 SOAP Header 请求中添加元素以进行身份 验证

> ID：12284909
> 
> 赞同：5
> 
> 时间：2012-09-05T15:31:26.343
> 
> 标签：java, xml, web-services, soap, soapheader

我需要在我的新 Web 服务中加入一个身份验证标头（即作为 SOAP 标头请求的一部分）。该身份验证标头将验证用户 ID 和密码详细信息。我必须在我的 Web 服务中验证请求标头详细信息的内容以进行身份​​验证。如果经过身份验证，则将处理请求的 SOAP 正文，否则 Web 服务将向调用该服务的客户端应用程序发回无效身份验证消息。

我无法理解如何创建一个 Web 服务，其中 SOAP 标头将包含一些元素（在我的例子中，身份验证元素，如 userId 和密码）。

通常，服务中公开的任何方法都将作为 SOAP 主体的一部分。因此混淆了如何继续在 SOAP 标头中添加身份验证元素。

请帮忙

问候，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T11:11:46.903

最近我写了一个将用户凭据添加到`SOAP`标题的类。为此，您需要创建一个实现`SOAPHandler<SOAPMessageContext>`接口的类。例如：

```
public class MyHandler implements SOAPHandler<SOAPMessageContext> {

    private static final Logger LOGGER = LoggerFactory.getLogger(MyHandler.class);

    private String username;

    private String password;

    /**
     * Handles SOAP message. If SOAP header does not already exist, then method will created new SOAP header. The
     * username and password is added to the header as the credentials to authenticate user. If no user credentials is
     * specified every call to web service will fail.
     *
     * @param context SOAP message context to get SOAP message from
     * @return true
     */
    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        try {
            SOAPMessage message = context.getMessage();
            SOAPHeader header = message.getSOAPHeader();
            SOAPEnvelope envelope = message.getSOAPPart().getEnvelope();
            if (header == null) {
                header = envelope.addHeader();
            }
            QName qNameUserCredentials = new QName("https://your.target.namespace/", "UserCredentials");
            SOAPHeaderElement userCredentials = header.addHeaderElement(qNameUserCredentials);

            QName qNameUsername = new QName("https://your.target.namespace/", "Username");
            SOAPHeaderElement username = header.addHeaderElement(qNameUsername );
            username.addTextNode(this.username);
            QName qNamePassword = new QName("https://your.target.namespace/", "Password");
            SOAPHeaderElement password = header.addHeaderElement(qNamePassword);
            password.addTextNode(this.password);

            userCredentials.addChildElement(username);
            userCredentials.addChildElement(password);

            message.saveChanges();
            //TODO: remove this writer when the testing is finished
            StringWriter writer = new StringWriter();
            message.writeTo(new StringOutputStream(writer));
            LOGGER.debug("SOAP message: \n" + writer.toString());
        } catch (SOAPException e) {
            LOGGER.error("Error occurred while adding credentials to SOAP header.", e);
        } catch (IOException e) {
            LOGGER.error("Error occurred while writing message to output stream.", e);
        }
        return true;
    }

    //TODO: remove this class after testing is finished
    private static class StringOutputStream extends OutputStream {

        private StringWriter writer;

        public StringOutputStream(StringWriter writer) {
            this.writer = writer;
        }

        @Override
        public void write(int b) throws IOException {
            writer.write(b);
        }
    }

    @Override
    public boolean handleFault(SOAPMessageContext context) {
        LOGGER.debug("handleFault has been invoked.");
        return true;
    }

    @Override
    public void close(MessageContext context) {
        LOGGER.debug("close has been invoked.");
    }

    @Override
    public Set<QName> getHeaders() {
        LOGGER.debug("getHeaders has been invoked.");
        return null;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

请注意，我只是将凭据添加到标头并返回`true`. 你对整个消息做任何你想做的`false`事情，如果预期的事情失败，你就会返回。

我已经在客户端实现了这个：

```
<bean id="soapHandler" class="your.package.MyHandler">
    <property name="username" value="testUser"/>
    <property name="password" value="testPassword"/>
</bean>

<jaxws:client "...">
    <jaxws:handlers>
        <ref bean="soapHandler"/>
    </jaxws:handlers>
</jaxws:client> 
```

但它也可以在`endpoint`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T12:10:13.153

我们只能从信封中获取标题，而不能从肥皂消息中获取。

# c++ - 使用 Boost.Spirit.Qi 解析成向量

> ID：12284910
> 
> 赞同：0
> 
> 时间：2012-09-05T15:31:26.563
> 
> 标签：c++, parsing, boost, boost-spirit-qi

我对Spirit很陌生。我正在尝试使用 Qi 在我的嵌入式 Tcl 解释器中解析 CMD 命令的参数。由于某些参数可能会多次使用，因此我需要一个向量来存储相同类型的所有参数。

这是我的问题的一个简化示例，我尝试将整数存储到向量中。

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_fusion.hpp>
#include <boost/spirit/include/phoenix_stl.hpp>
#include <boost/spirit/include/support.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/variant/recursive_variant.hpp>

using std::string;
using std::vector;

namespace {
  namespace qi = boost::spirit::qi;
  namespace phoenix = boost::phoenix;
  namespace ascii = boost::spirit::ascii;

  struct Argument {
    vector<int> svDefine;    // macro definitions
  };
}

BOOST_FUSION_ADAPT_STRUCT
(
 Argument,
 (vector<int>, svDefine)
 )

namespace {
  typedef string::const_iterator SIter;

  struct ArgParser : qi::grammar<SIter, Argument(), ascii::space_type> {
    qi::rule<SIter, Argument(), ascii::space_type> start;

    ArgParser() : ArgParser::base_type(start) {
      using phoenix::at_c;
      using qi::int_;
      using phoenix::push_back;
      using namespace qi::labels;

      start = +("define" >> int_     [push_back(at_c<0>(_val), _1)]);

    }
  };
} 
```

用 g++ 4.5.1 boost 1.51 编译它会产生丢失的错误

```
In file included from /usr/include/boost/spirit/home/phoenix/container.hpp:10:0,
                 from /usr/include/boost/spirit/home/phoenix.hpp:12,
                 from /usr/include/boost/spirit/include/phoenix.hpp:13,
                 from qi_test.cpp:2:
.....
qi_test.cpp:43:64:   instantiated from here
/usr/include/boost/spirit/home/phoenix/stl/container/container.hpp:492:40: error: ‘struct boost::fusion::vector<int>’ has no member named ‘push_back’
/usr/include/boost/spirit/home/phoenix/stl/container/container.hpp:492:40: error: return-statement with a value, in function returning 'void'
qi_test.cpp: In static member function ‘static 
.....
qi_test.cpp:43:64:   instantiated from here
qi_test.cpp:28:509: error: invalid initialization of reference of type boost::fusion::vector<int>&’ from expression of type ‘std::vector<int>’ 
```

基本上我很困惑。不知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:37:45.167

您在这里混合了两种类型的矢量模板类：

```
std::vector 
```

和

```
boost::fusion::vector 
```

如果你只是省略（注释掉）

```
using std::vector; 
```

事情可能会变得很清楚

# python - Python 字典 - 在产生最小值的 2 个字符的字符串中查找第二个字符

> ID：12284913
> 
> 赞同：-1
> 
> 时间：2012-09-05T15:31:29.583
> 
> 标签：python, dictionary

我想提交密钥的第一部分并返回该密钥的剩余部分，以最小化该值（并从第一部分开始）。

例如：

```
d = {'ab': 100,
     'ac': 200,
     'ad': 500} 
```

如果我要传入`'a', I would like to return`'b'`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:35:42.717

```
min(((d[s],s) for s in d if s.startswith('a')))[1][1:] 
```

`min`找到对中的最小值，然后*我们*`(value, key)`取键（具有最小值），并显示它的后半部分。这使用了`min`, 最小化元组中的*第一个*值的事实。

我们可以概括以找到“以字符串开头”的最小值`a`：

```
def smallest_value_of_key_startswith(a, d):
    min(((d[s],s) for s in d if s.startswith(a)))[1][len(a):] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:49:34.297

用这个：

```
def f(d, key):        
    return min(((v, k[1]) for k, v in d.items() if k[0] == key))[1]

distance = {('a','b'):100,('a','c'):200,('a','d'):500}    
print f(distance, 'a')
>>> 'b'

distance = {('c','e'):200,('d','c'):100,('c','d'):500}    
print f(distance, 'c')
>>> 'e' 
```

# java - Android ViewGroup.setScaleX() 导致视图被裁剪

> ID：12284917
> 
> 赞同：8
> 
> 时间：2012-09-05T15:31:44.477
> 
> 标签：java, android, zooming, scale, viewgroup

我使用[NineOldAndroids](https://github.com/JakeWharton/NineOldAndroids)库来扩展我的自定义布局。

```
public class MyLayout extends FrameLayout {
  // LayoutParams.MATCH_PARENT and all.
  ...
  @Override
  public boolean setPositionAndScale(ViewGroup v, PositionAndScale pas, PointInfo pi) {
    ...
    mScale = pas.getScale();
    ViewHelper.setScaleX(this, mScale);
    ViewHelper.setScaleY(this, mScale);
  }
} 
```

我已经尝试过 FrameLayout 和 AbsoluteLayout。都有相同的效果。当`mScale < 1.0` **缩放/缩放有效**但部分布局被**剪裁**时。

`mScale = 1.0:`

![mScale = 1.0](../Images/ac78ffeba1c521089ef36ec988f36cf2.png)

`mScale < 1.0:` **缩放/缩放有效**，但布局被**剪裁**

![mScale < 1.0](../Images/0f5578f030de56091a677a8f173a0d88.png)

我该如何解决这个问题？

**编辑**：这张照片是在 ICS 上拍摄的。所以我不认为这是 NineOldAndroids 的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-14T10:19:27.570

您的视图的父级必须`android:clipChildren`禁用该属性（来自布局文件或使用`setClipChildren(false)`）。

但是使用这种方法，您不会在视图剪辑范围之外获得触摸事件。您可以通过从您的活动中发送它们或编写自定义`ViewGroup`父级来解决问题。

我正在使用另一种在我的情况下似乎可行的技巧，诀窍是维护自己的转换矩阵。然后，您必须重载很多`ViewGroup`' 方法才能使其工作。例如 ：

```
@Override
protected void dispatchDraw(Canvas canvas) {
    Log.d(TAG, "dispatchDraw " + canvas);
    canvas.save();
    canvas.concat(mMatrix);
    super.dispatchDraw(canvas);
    canvas.restore();       
}

@Override   
public boolean dispatchTouchEvent(MotionEvent ev) {
    Log.d(TAG, "dispatchTouchEvent " + ev);
    ev.transform(getInvMatrix()); // 
    return super.dispatchTouchEvent(ev);

}

private Matrix getInvMatrix()
{
    if(!mTmpMatIsInvMat)
        mMatrix.invert(mTmpMat);
    mTmpMatIsInvMat = true;
    return mTmpMat;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T22:12:06.843

万一有人遇到和我一样的情况。我最终使用了这种方法：

```
protected void setScale(float scale, boolean updateView) {
    mScale = scale;
    if (updateView) {
        LayoutParams params = getLayoutParams();
        onUpdateScale(scale, params);
        setLayoutParams(params);
    }
}

protected void onUpdateScale(float scale, LayoutParams params) {
    params.leftMargin = (int) (mModel.getX() * scale);
    params.topMargin = (int) (mModel.getY() * scale);
    params.width = (int) (mModel.getWidth() * scale);
    params.height = (int) (mModel.getHeight() * scale);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T05:42:35.387

从 API 级别 11 开始，`View`该类具有`setScaleX()`和`setScaleY()`方法，它们可以按预期工作，并且还可以缩放缩放视图的子视图。所以，如果这对你来说是一种方式，请放下图书馆，然后做

```
v.setScaleX(mScale);
v.setScaleY(mScale); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T18:35:04.960

如果我正确理解您的问题，您正在缩放视图组并期望包含的视图相应地缩放。它不是那样工作的：你缩放视图组，它会改变大小，但它的子视图不会。

只需缩放所有子视图。即便如此，我不确定文本和图像是否会自动缩放。你想要的是缩放，而不是缩放。试试[这个参考](http://myandroidnote.blogspot.com.es/2011/03/zooming-view-completely.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T15:10:55.743

使用 ViewGroup.layout。这可能是缩放（&移动）ViewGroup 的最简单方法。

# html - 第一个菜单项看起来不同，带有 :first-child 元素

> ID：12284919
> 
> 赞同：0
> 
> 时间：2012-09-05T15:32:06.850
> 
> 标签：html, css, css-selectors

我正在处理网页菜单，我想*.current-menu-item* - 当前项目，看起来不同。但是这个菜单的第一项应该有圆角（左上角，左下角）。我该怎么做，使用 :first-child 元素？谢谢。

好的，这是一个代码片段
HTML：

```
<ul id="navHead">
<li><a href="#">First</a></li>
<li><a href="#">Second</a></li>
<li><a href="#">Third</a></li>
</ul> 
```

CSS：

```
#navHead{
    border-radius: 5px;
    background: #454545 url('images/gradient.png') top left repeat-x;
}

#navHead li{
    float: left;
}

#navHead li a{
    display: block;
} 
```

最后，wordpress 在单击一个项目后创建一个新类 - `current-menu-item`。它被添加到当前列表项的类规范中。而且因为navHead是圆角的，点击第一项后，navHead的左边就变成了非圆角的，所以我想通过这段代码来解决这个问题：

```
#navHead li:first-child .current-menu-item a{      
    border-top-left-radius: 5px;      
    border-bottom-left-radius: 5px;  
} 
```

但什么也没发生。我必须以一种风格使用`.current-menu-item`和`li:first-child`。HTML 代码是由 wordpress 调整的，所以我只能在 CSS 中解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:38:16.683

编辑答案：

```
#navHead li.current-menu-item:first-child{
    border-top-left-radius: 5px;      
    border-bottom-left-radius: 5px;
} 
```

这将导致#navHead 的第一个li 元素具有圆角，如果它具有类'current-menu-item'。不过，我要补充一点，原始边框半径是在“#navHead”上设置的，而不是任何后续元素。

选择器语法和构造的一些参考读物：[w3c 规范](http://www.w3.org/TR/CSS2/selector.html)

# javascript - Ember.js - 如何使用 Ember.Router 实现所选项目？

> ID：12284921
> 
> 赞同：2
> 
> 时间：2012-09-05T15:32:07.363
> 
> 标签：javascript, ember.js

我想知道当用户单击/选择其中一个项目时，处理项目列表并显示项目详细信息的最佳方法是什么。这方面的一个示例是在左侧栏中显示电子邮件列表，并在用户单击其中一条消息时在主要内容区域中显示消息详细信息。

使用@pangrantz关于[如何使用路由器基础设施标记活动菜单项](https://stackoverflow.com/questions/11628489/emberjs-how-to-mark-active-menu-item-using-router-infrastructure#answer-11629977)的绝佳答案，我能够想出一个工作示例：[jsFiddle](http://jsfiddle.net/chrisconley/ydxw9/)

但是有几件事似乎不太正确：

首先，在`#connectOutlets`路由器的`show`状态下，我在控制器上设置选定的消息，并将插座与同一个对象连接起来。我想我可以做一个或另一个。

```
connectOutlets: function(router, context) {
    router.set('messagesController.selected', context);
    router.get('applicationController').connectOutlet('message-details', 'messageDetails', context);
} 
```

其次，我正在从`index`和状态转换到相同的`show`状态。我什至不确定我是否要过渡到一个新的状态——我只是想连接插座。

```
showDetails: Ember.Route.transitionTo('show') 
```

有什么我可以改变的，让这段代码更惯用吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:10:20.603

这段代码在我看来非常地道。你是对的，你不需要设置选中的消息。当您连接消息详细信息的出口时，它会将所选消息设置为消息详细信息控制器上的内容。

您应该将 IMO 从索引状态转换为显示状态，因为这是良好的 RESTful 实践，并且还允许用户为单个消息添加书签。我会将索引状态的 URL 设为“/messages”而不是“/”。

# charts - Kendo UI图表图例可以自动删除空系列吗？

> ID：12284928
> 
> 赞同：5
> 
> 时间：2012-09-05T15:32:34.827
> 
> 标签：charts, kendo-ui

我有 Kendo UI 图表（在剃刀视图中定义）。

我无法在文档中找到任何内容，是否可以设置图例以忽略图表数据中的空系列，或者我是否被迫仅将相关系列添加到图表数据中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:49:47.043

虽然不是图例中的选项，但系列对象中有一个选项：[visibleInLegend](http://docs.kendoui.com/api/dataviz/chart#configuration-series.visibleInLegend)，可以针对集合或其他逻辑测试动态设置，例如：

```
new {
    category = "Some Category",
    value = Model.SomeCollection.Count,
    color = "#FF9900", //Amber
    visibleInLegend = Model.SomeCollection.Count > 0
}, 
```

# json - RestSharp可以发送列表吗 在 POST 请求中？

> ID：12284931
> 
> 赞同：9
> 
> 时间：2012-09-05T15:32:46.397
> 
> 标签：json, serialization, restsharp

我试图让[RestSharp](https://github.com/restsharp/RestSharp)使用我拥有的宁静服务。一切似乎都工作正常，除非我通过的对象`POST`包含一个列表（在这种特殊情况下是一个列表`string`）。

我的对象：

```
public class TestObj
{
    public string Name{get;set;}
    public List<string> Children{get;set;}
} 
```

当它被发送到服务器时，`Children`属性将作为包含内容的字符串发送`System.Collections.Generic.List`1[System.String]`。

这就是我发送对象的方式：

```
var client = new RestClient();
var request = new RestRequest("http://localhost", Method.PUT);

var test = new TestObj {Name = "Fred", Children = new List<string> {"Arthur", "Betty"}};
request.AddObject(test);
client.Execute<TestObj>(request); 
```

我做错了什么，还是RestSharp中的错误？（如果有区别，我使用的是 JSON，而不是 XML。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-07T21:14:03.677

It depends on what server you're hitting, but if you're hitting an ASP.NET Web API controller (and probably other server-side technologies), it'll work if you add each item in the collection in a loop:

```
foreach (var child in test.Children) 
    request.AddParameter("children", x)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-16T08:37:43.633

使用**AddJsonBody**

```
var client = new RestClient();
var request = new RestRequest("http://localhost", Method.PUT);
request.AddJsonBody(new TestObj {
     Name = "Fred", 
     Children = new List<string> {"Arthur", "Betty"}
});
client.Execute(request); 
```

接口端

```
[AcceptVerbs("PUT")]
string Portefeuille(TestObj obj)
{
    return String.Format("Sup' {0}, you have {1} nice children", 
        obj.Name, obj.Children.Count());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T00:26:08.623

我在指南列表中遇到了类似的问题。我的帖子会起作用，但列表永远不会有正确的数据。我破解了它并使用 json.net 序列化对象

[我在另一个 stackoverflow 帖子上遇到的问题](https://stackoverflow.com/questions/12260465/serializing-an-object-with-restsharp-and-passing-it-to-webapi-not-serializing-li)

我知道这并不完美，但可以解决问题

# java - 是否可以在 Java 中使用 String 作为 Files.move(source,target..) 的参数？

> ID：12284935
> 
> 赞同：-2
> 
> 时间：2012-09-05T15:32:54.227
> 
> 标签：java, string, file, move

您能否以某种方式使用字符串来定义 files.move 的源和目标。

继承人文档[http://docs.oracle.com/javase/tutorial/essential/io/move.html](http://docs.oracle.com/javase/tutorial/essential/io/move.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:38:34.760

根据[javadoc](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29)，您不能使用字符串作为 Files.move 的参数。

对您来说似乎更好的解决方案是在 File.rename 上使用 rename 方法。像这样的东西：

```
File file = new File("/path/to/file/to/be/moved");
boolean moved = file.renameTo("/new/path/for/the/file");
if(!moved)
  //Handle the error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:39:22.543

简短的回答是**否定**的：[`Files.move`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29)需要[`Path`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)对象。也就是说，您可以使用[`Paths.get(str)`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html#get%28java.lang.String,%20java.lang.String...%29)简单地将 a`String`变成 a `Path`。

# asp.net-mvc-3 - Mvc3 IEnumerable 有一个列表 财产。当我发布时，我得到空列表

> ID：12284941
> 
> 赞同：2
> 
> 时间：2012-09-05T15:33:15.870
> 
> 标签：asp.net-mvc-3, list, post, ienumerable

我正在做一个调查申请。调查有问题，问题有 QuestionOption。这里有一个例子[。](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/) 我正在尝试以带有列表（列表）的大型形式使用此技术，但是当我回发时，应该包含项目和活动列表的 Viewmodel.Order 返回列表为空。

我的 QuestionModel.cs 就是这样。

```
 public int Id { get; set; }       
 public string QuestionText { get; set; }     
 public System.Nullable<bool> OptionType1 { get; set; }
 public System.Nullable<bool> OptionType2 { get; set; }
 public List<QuestionOptionModel> OptionList = new List<QuestionOptionModel>(); 
```

当我发回“IEnumerable questions”时，List OptionList 为空。我怎样才能做到这一点？

```
 public ActionResult CallSurvey()
    {
        IEnumerable<QuestionModel> questionModelList = (IEnumerable<QuestionModel>)SessionHelper.GetSessionObject(SessionKeys.SurveyKey);
       questionModelList = questionSrv.GetQuestionModel();
        return View(questionModelList);

    } 
```

questionModelList 包括我所有的调查问题和问题选项。当我发布它时，回发只带有空选项列表。

```
 [HttpPost]
    public ActionResult CallSurvey(IEnumerable<QuestionModel> questions)
    { ..... } 
```

CallSurvey.cshtml

```
 <body>
    @using ((Html.BeginForm()))
    {
        @ViewBag.Test
        <section class="slides layout-regular template-kendo">
        @foreach (var item in Model)
        {<article>

                @Html.Partial("QuestionEditor", item)
               </article>
        }
   <div class="slide-area" id="prev-slide-area"></div>
        <div class="slide-area" id="next-slide-area"></div>
      </section> 
    }
</body> 
```

QuestionEditor.cshtml

```
 @model LSMM.Business.Model.Survey.QuestionModel
@using LSMM.Web.Helpers
<div>
    @using (Html.BeginCollectionItem("Questions"))
    {

        <table id="table1">
            <tr>
                <td>
                    <div id="@Model.Id" class="hint">
                        @Html.HiddenFor(m => m.Id)
                        @Html.HiddenFor(m => m.QuestionText)
                        @Html.HiddenFor(m => m.OptionType1)
                        @Html.HiddenFor(m => m.OptionType2)

                        @for (int i = 0; i < Model.OptionList.Count; ++i)
                        {
                        @Html.LabelFor(m => m.OptionList[i].Id)
                        @Html.LabelFor(m => m.OptionList[i].QuestionId)
                        @Html.LabelFor(m => m.OptionList[i].Checked)
                        @Html.LabelFor(m => m.OptionList[i].Description)
                        @Html.LabelFor(m => m.OptionList[i])
                   }
                        <span id="sorular">@Model.Id. @Model.QuestionText</span>
                        <br />
                        <br />
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="hint2">
                        @Html.Partial("QuestionOptionEditor", Model)
                    </div>
                </td>
                <td>
                    <div id="@Model.Id-Img">
                        <h2 style="top: 200px; right: 0;">
                            <img src="../../Content/css/img/@Model.Id-Img.png"></h2>
                    </div>
                </td>
            </tr>
        </table> 
```

和 QuestionOptionEditor.cshtml

```
 @model LSMM.Business.Model.Survey.QuestionModel

 @using LSMM.Web.Helpers               

@foreach (var option in @Model.OptionList)
{

    <p>
        @if (@Model.OptionType1 == false)
        { 
            @Html.Partial("QuestionOptionModel", option)

        }
        else
        { 
            @Html.Partial("../Shared/DisplayTemplates/QuestionOptionModel", option)

        }
    </p>

} 
```

这里的 QuestionOptionModel 视图是这样的；

```
@model LSMM.Business.Model.Survey.QuestionOptionModel

      @(Html.RadioButtonFor(m => m.Id, true, new { Id = @Model.Id, Name = @Model.QuestionId })) @Html.Label("Evet")  
      <br /> 
      <br />
      @(Html.RadioButtonFor(m => m.Id, false ,new { Id=@Model.Id, Name = @Model.QuestionId})) @Html.Label("Hayır") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:33:08.550

根据默认 ModelBinder 使用的命名规则，单选按钮上的 name 属性不是“正确的”。这就是为什么你没有看到你期望的值，ModelBinder 找不到它正在寻找的东西。

这很容易解决，您最终应该使用更少的代码。利用该框架并让它为您工作：

1.  MVC 可以为您循环 IEnumerables。让它。如今，几乎没有理由在视图中编写 foreach 循环。
2.  摆脱那些部分。请改用 MVC 的[模板](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)功能。

那么你的观点可以很简单：

```
 <body>
        @using ((Html.BeginForm()))
        {
            @ViewBag.Test
            <section class="slides layout-regular template-kendo">
        <table id="table1">
            @* Table header goes here *@
            @Html.EditorFor(model => model.OptionList)
        </table>
       <div class="slide-area" id="prev-slide-area"></div>
            <div class="slide-area" id="next-slide-area"></div>
          </section> 
        }
</body> 
```

当您使用 EditorTemplate 或 DisplayTemplate 时，MVC 将自动修复表单字段上的 name 属性。它不会用部分来做到这一点。

另一个建议，如果你不介意的话。摆脱模型上的那些 nulla-bools 并编写不同的 QuestionOptionModel 类型。DisplayTemplate/EditorTemplates 对类型系统是明智的，MVC 将选择与其呈现的类型匹配的模板。

所以你可以有另一个派生自 QuestionOptionModel 的类：

```
public class ExtendedQuestionOptionModel : QuestionOptionModel
{
    //Stuff goes here.
} 
```

并且您可以`List<QuestionOptionModel>`悬挂您的模型，其中包含：

*   问题选项模型
*   扩展问题选项模型
*   问题选项模型

当你这样做时：

```
@Html.EditorFor(model => model.QuestionOptions) 
```

MVC 将遍历选项列表并呈现 QuestionOptionModel 的 Editor Template，然后是 ExtendedQuestionOptionModel 的 Editor Template，然后是 QuestionOptionModel 的 Editor Template。

你想玩的游戏是尽量减少视图中的 C# 代码，因为视图不能进行单元测试。未经单元测试的代码最终会回来并得到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:36:03.483

你的问题有点模棱两可。坦率地说，我希望这是您正在寻找的：
IEnumerable 可以转换为列表使用

```
 List<foo>listFoo =iEnumerableEntityFoo.toList() 
```

# ruby - 用 Prawn 将文本和图像分组为一个块？

> ID：12284946
> 
> 赞同：2
> 
> 时间：2012-09-05T15:33:27.083
> 
> 标签：ruby, pdf, prawn

我正在尝试从用户生成的内容构建 PDF，并且我有大量信息应该组合在一起。我知道`group`确保文本全部呈现在一起的方法，但这似乎不适用于文本和图像的混合。有什么东西可以用 Prawn 做到这一点，还是我需要尝试计算光标位置并手动换行？

编辑：为了说明我想要做什么：

```
pdf = PDF::Document.new
20.times do
  pdf.group do
    pdf.text "Something"
    pdf.image "path/to/image.jpg"
    pdf.text Time.now.to_s
  end
end 
```

而且我希望永远不会在一页上出现“某事”而在下一页上没有图像，但这就是我所看到的。有什么方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:17:28.480

好的，我已经想通了。Prawn 在分组时似乎没有考虑图像高度，但你可以绕过它：

```
pdf.group do
  pdf.text "Best regards, (...)"
  pdf.image "#{Rails.root}/vendor/signature.jpg", {
    :height => 30,
    :at => [0, pdf.y.to_i - @bottom_margin]
  }
  pdf.move_down(35)
  pdf.text " "
end 
```

诀窍是对图像使用绝对定位，并手动向下移动文本光标。

# https - 来自谷歌图表 api 的嵌入式二维码图像正在重定向到损坏的 https URL

> ID：12284948
> 
> 赞同：0
> 
> 时间：2012-09-05T15:33:33.793
> 
> 标签：https, google-visualization

我有一个从 Google Charts API 嵌入的 QR 码图像。最近它停止工作，但我没有更改我的代码中的任何内容。

这是页面（注意损坏的图像）：[编辑]

如您所见，图像嵌入为 http:// 但加载时，它们会重定向到 google 域上的 https:// URL，该 URL 已损坏。

为什么会发生这种重定向？

编辑：忘记添加——更奇怪的是，如果您在新选项卡中查看图像，然后将 http 更改为 https（实际上，使 url 与最初请求的完全相同），它加载得很好。

编辑 #2 删除了指向我的测试站点的链接，因为我已经解决了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:48:26.293

原来谷歌图表域已经改变。新的是：

`https://chart.googleapis.com`

不使用

`http://chart.apis.google.com`

# iphone - 带有 ARC 的 UIActionSheet 上的 EXEC_BAD_ACCESS

> ID：12284951
> 
> 赞同：0
> 
> 时间：2012-09-05T15:33:42.210
> 
> 标签：iphone, objective-c, xcode, automatic-ref-counting, exc-bad-access

刚刚将一个项目转换为 ARC，在我关闭 UIActionsheet 后现在得到一个 EXEC_BAD_ACCESS，它以前可以工作，我不确定这是否与 ARC 相关。Zombies 已启用，但什么也没显示，我尝试了仪器，但它也没有给我任何东西。

这是在模态视图控制器中呈现的，案例 0，退出按钮工作正常，但其他两个给我错误的访问错误。

这是我第一次转换为 ARC，我在这里遗漏了什么吗？

操作表创建：

```
-(IBAction)quitPressed:(id)sender {
    UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:@"Quit This Game?"    delegate:self cancelButtonTitle:@"Keep Playing" destructiveButtonTitle:@"Quit" otherButtonTitles:@"Quit and Reveal Answers",nil];
    [sheet showInView:self.view]; 
```

}

行动表代表：

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{

    switch (buttonIndex) {
        case 0:  //quit
            [self dismissViewControllerAnimated:NO completion:^{
            [self.delegate quitGame];
        }];
        break;
        case 1:  //quit and reveal
            NSLog(@"reveal");
            break;
        case 2: //cancel
            NSLog(@"cancel"); 
            break;
        default:
        break;
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:24:07.737

如果您在**.h**文件`delegate`中声明。您是否在**.m**文件中至少初始化了一次（最好）使用`strong`**`self.delegate`**`viewDidLoad`****

 ****`self.delegate = [[UIApplication sharedApplication] delegate];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:29:37.140

代表应该是`weak`or `assign`( `__weak`/ `__unsafe_unretained`for ivars) 以避免任何保留周期。

保留对您创建的工作表的引用。关闭工作表后，您可以清除该引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T01:20:10.973

感谢大家的帮助。我在 xcode 4.5 下运行项目时发现了问题。它给出了一个编译错误：`switch case is protected in scope`

我在 xcode 4.3 中没有收到该错误

在这个线程中解决了[当将项目转换为使用 ARC 时，“switch case is in protected scope”是什么意思？](https://stackoverflow.com/questions/7562199/when-converting-a-project-to-use-arc-what-does-switch-case-is-in-protected-scop)

我将每个案例都用大括号括起来，问题已得到解决。****

# google-chrome-extension - 访问其他页面上的扩展数据

> ID：12284952
> 
> 赞同：0
> 
> 时间：2012-09-05T15:33:43.937
> 
> 标签：google-chrome-extension

我想从我的扩展中保存一些值（比如用户 ID），然后想在其他页面上访问它。我不能使用 cookie 来做到这一点，因为我只能在扩展中访问 c​​ookie。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:23:25.063

对不起，这可能只是我很厚，但我仍然不明白你在做什么。

如果您想创建跨不同域持续存在的变量，则需要使用 chrome.storage。它类似于 HTML5 localStorage，但有一些显着的改进（跨域持续存在是我的主要改进）。您可以在此处阅读有关设置和获取值的更多信息：

[http://developer.chrome.com/extensions/storage.html](http://developer.chrome.com/extensions/storage.html)

如果这不是您所需要的，请尝试给出您正在尝试做的具体示例，我会再试一次。

编辑：请参阅下面的示例。

您可以像这样将变量设置为存储（该函数是可选参数）：

```
var storage = chrome.storage.local;
var myVal="foo";

storage.set({'myVar': myVal}, function() {
    alert('myVar has been saved in local storage');
}); 
```

您可以像这样检索它（功能不是可选的）：

```
storage.get('myVar', function(items) {
    if (items.myVar) {
        alert(items.myVar);
    }
}); 
```

当 storage.get({'myVar': ''}) 未定义 'myVar' 时，您可以返回默认值 - 这样可以节省使用“if (items.myVar) {”行的检查。

编辑：请参阅下文以了解需要注意的问题。

首先，这些方法是异步的。所以...

```
alert("1");
storage.get('myVar', function(items) {
    alert("2");
});
alert("3"); 
```

可能会输出 1，然后是 3，然后是 2。如果你事先知道的话，这没什么大不了的，但可以在以后节省很多重组。

其次，请注意您拥有的存储空间量是有限制的。对于 chrome.storage.sync（变量在所有用户浏览器之间自动同步），存储空间非常有限，大约为 100kb。（还有其他限制，例如最多 512 个单独的变量 - 请参阅上面的文档链接）。基本上， chrome.storage.sync 仅适用于一些小变量。

chrome.storage.local 有更多的存储空间，大约 5mb（除非您设置了无限存储权限）。与 chrome.storage.sync 不同，存储 chrome.storage.local 没有其他限制。

如果一个集合会让你超过存储限制，那么它就会失败。

第三，使用变量作为变量名不起作用：

```
var myVal="foo";
var myVarName='myVar';

storage.set({myVarName: myVal}, function() {
    alert('THIS WILL NOT WORK');
}); 
```

如果像我一样，你真的想要/需要做这样的事情，做这样的事情的方法是创建一个对象并将变量作为属性分配给它，然后将对象放入存储中。例如：

```
var myVarName='myVar';
var mySecondVarName='mySecondVar';

var myVal="foo";
var mySecondVal="bar";

var obj = {};
obj[myVarName] = myVal;
obj[mySecondVarName] = mySecondVal;
//add as many vars as you want to save to the storage 
//(as long as you do not exceed the max storage space as mentioned above.)

storage.local.set(obj); 
```

然后，您可以通过以下方式获取值：

```
chrome.storage.local.get(myVarName, function (items) {
    if (items[myVarName]) {
        alert('You got the value that was set to myVarName');
    }
}); 
```

或者，如果您想要 mySecondVarName 的值：

```
chrome.storage.local.get(mySecondVarName, function (items) {
    if (items[mySecondVarName]) {
        alert('You got the value that was set to mySecondVarName');
    }
}); 
```

这些可以嵌套。

# iphone - 应用更新的核心数据更新模型？

> ID：12284953
> 
> 赞同：2
> 
> 时间：2012-09-05T15:33:51.813
> 
> 标签：iphone, xcode

使用 Core Data 的每个人都知道“用于打开商店的模型与用于创建商店的模型不兼容”的消息。

然后我必须从模拟器中删除我的应用程序，然后再次重建它。

我的问题是，如果我提交了一个应用程序 v 1.0，然后在 v 1.1 中将一些实体添加到核心数据中，这是否意味着更新到 1.1 的 1.0 用户将清除他们的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:39:00.233

在您的情况下，这听起来像是对旧数据模型的简单扩展。如果您只是真的添加了一些新实体甚至新类，那么所谓的轻量级迁移是适合您的正确方法。

实际上，在这种情况下，您几乎不需要做任何事情，而是在原始模型的基础上创建您的第二个模型。重要的是，您拥有两个模型，然后该应用程序只会加载您的第一个版本而没有任何问题以及新版本。

不要忘记将您的新模型标记为新模型！

创建新模型时要小心，因为删除模型确实很麻烦。

您的代码将与此非常相似：

```
-(NSManagedObjectContext *)managedObjectContext {
        if (managedObjectContext != nil) {
            return managedObjectContext;
        }
        NSPersistentStoreCoordinator *lC = [self persistentStoreCoordinator];
        if (lC != nil) {
            managedObjectContext =[[NSManagedObjectContext alloc] init];
            [managedObjectContext setPersistentStoreCoordinator: lC];
        }   
        return managedObjectContext;
    }

- (NSPersistentStoreCoordinator *) persistentStoreCoordinator {
    if (persistentStoreCoordinator != nil) {
        return persistentStoreCoordinator;
    }
    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];

    // Allow inferred migration from the original version of the application.
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
    NSURL *storeUrl = [NSURL fileURLWithPath: [[self applicationDocumentsDirectory] stringByAppendingPathComponent: @"DBName.sqlite"]];

    NSError *error = nil;

    if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl 
                                                        options:options error:&error]){
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);

    }
    return persistentStoreCoordinator;
}

- (NSManagedObjectModel *) managedObjectModel {
    if (managedObjectModel != nil) {
        return managedObjectModel;
    }
    managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
    return managedObjectModel;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:40:35.300

您将需要为您的模型创建一个新的模型版本，并迁移数据库。如果您的模型更改在所需更改范围内，您可以进行轻量级迁移。如果没有，您将需要告诉核心数据如何迁移您的数据。检查迁移文档：http: [//developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)

# python - Google App Engine 的在线存储库

> ID：12284954
> 
> 赞同：-2
> 
> 时间：2012-09-05T15:33:52.500
> 
> 标签：python, google-app-engine, repository, online-repository

一段时间以来，我一直在为 Google App Engine 编写网络应用程序，并且我刚刚在该项目中找到了合作伙伴。我一直在 Eclipse 中工作并用 Python 编写代码，我需要与他分享这个项目。

您会建议使用哪种存储库，或者我可以使用哪种存储库与我的合作伙伴共享代码库？我已经查看了一些选项，例如 Mercurial 或 Git，但是有什么可以直接更新 Eclipse 开发文件夹中的文件的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:38:04.090

我建议您创建一个 Git 存储库并使用[Egit](http://www.eclipse.org/resources/resource.php?id=528)，这是一个非常好的 git Eclipse 插件。[您可以在Google Code](http://code.google.com)或您喜欢的任何其他网站中设置 repo 。我在[Bean Stalk App](http://www.beanstalkapp.com)和[bitbucket](http://www.bitbucket.org)中有资源。他们都可以在 git 上正常工作！

# ember.js - 我如何取回另一边的状态变量？

> ID：12284959
> 
> 赞同：0
> 
> 时间：2012-09-05T15:34:06.417
> 
> 标签：ember.js

如果我的状态有以下代码：

```
var year    = this.get('year').get('number');
var month   = this.get('month').get('label').toLowerCase();

App.get('router').transitionTo('volumeElaboration', { month: month, year: year }); 
```

一旦状态发生变化，我将如何获取月份和年份变量？我的状态本身是这样定义的：

```
volumeElaboration: Ember.Route.extend({
    route: '/volume/:month/:year',
    connectOutlets: function(router)
    {
        router.get('applicationController').connectOutlet('volumeElaboration');
    }
}), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:54:19.143

调用中实际上有第二个变量可用`connectOutlets`。该变量是上下文。

```
volumeElaboration: Ember.Route.extend({
    route: '/volume/:month/:year',
    connectOutlets: function(router, context)
    {
        router.get('applicationController').connectOutlet('volumeElaboration', context);
    }
}), 
```

# java - 将 MessageBodyReader 与泽西岛一起使用

> ID：12284963
> 
> 赞同：0
> 
> 时间：2012-09-05T15:34:18.363
> 
> 标签：java, jersey, jax-rs, deserialization

我正在使用 JAX-RS 在我的 Java 应用程序中提供 rest API，并且在反序列化包含其他对象的对象时遇到问题。对于此类对象（bean），在反序列化时，我收到错误消息“找不到 Java 类 ClassName 和 Java 类型类 ClassNAme2 和 MIME 媒体类型 application/json 的消息正文阅读器”。我用谷歌搜索了这个错误，发现“MessageBodyReader”应该有问题；但是，我不太确定发生了什么以及应该如何使用此界面来解决问题。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:06:45.097

@user1558274，确保您没有丢失 jersey-json-1.8.jar 或 jersey-server jar。你需要用@XmlRootElement 注释你的POJO。点击以下链接了解更多。

*   [资源 1](http://www.mkyong.com/webservices/jax-rs/json-example-with-jersey-jackson/)
*   [资源 2](https://stackoverflow.com/questions/5161466/how-do-i-use-the-jersey-json-pojo-support)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:46:32.597

至少尝试将 JAXB 的`@XmlRootElement`注释添加到涉及序列化的类中。看看这是否消除了错误，然后根据需要添加更多 JAXB 注释......

# c# - 使用 C# 的 SELECT 语句

> ID：12284965
> 
> 赞同：0
> 
> 时间：2012-09-05T15:34:26.043
> 
> 标签：c#, .net, sql-server, ado.net

我有以下代码：

```
SqlCommand cmd2 = new SqlCommand(
  "SELECT ClaimId FROM tblPayment WHERE PaymentId = " + PaymentID.ToString(),
  mvarDBConn);
SqlDataReader reader = cmd2.ExecuteReader();
reader.Read();
Int32 ClaimId = reader.GetInt32(0);
reader.Close(); 
```

如果我在 SQL 中运行 SELECT 语句，它返回的数字很好，但是当我使用 ExecuteReader 时，它返回的都是 0。我尝试了多种方法，包括 ExecuteScalar、ExecuteNonQuery、reader.GetString 然后将其转换为 int 等。

我错过了什么？谢谢。

编辑：这是我在 SQL Server 配置文件中得到的：

这是我回来的：

```
 exec sp_executesql N'SELECT ClaimId FROM tblPayment WHERE PaymentId = @paymentID',N'@paymentID nvarchar(5)',@paymentID=N'8392' 
```

不知道为什么当我之前的 SqlCommand 直接进入 SQL 时将它放入 SP_ExecuteSQL，与“N”相同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T15:36:21.490

更好地[`SqlCommand.ExecuteScalar()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)用于此：

```
int ClaimId = Convert.ToInt32(cmd2.ExecuteScalar()); 
```

此外，为避免可能的[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_Injection)，请使用带参数的 ADO 命令对象：

```
// create command
SqlCommand cmd2 = new SqlCommand(
  "SELECT ClaimId FROM tblPayment WHERE PaymentId = @paymentID",
  mvarDBConn);

// add parameter
cmd2.Parameters.AddWithValue("@paymentID", PaymentID);

// execute command and convert the result
int ClaimId = Convert.ToInt32(cmd2.ExecuteScalar()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T15:41:03.213

你可以试试

```
 new SqlCommand("SELECT ClaimId FROM tblPayment WHERE PaymentId = @param"); 
```

和

```
 cmd2.Parameters.AddWithValue("@param", PaymentID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T14:26:02.133

尝试在读取时运行 while 循环。

```
while (reader.Read())
{
    Int32 ClaimId = reader.GetInt32(0);
} 
```

虽然，您可能希望在 while 之外声明 ClaimId 变量。

# oracle - 建立连接时，Oracle JDBC 客户端是否加密密码？

> ID：12284970
> 
> 赞同：8
> 
> 时间：2012-09-05T15:34:44.683
> 
> 标签：oracle, jdbc

使用 Oracle JDBC 客户端库进行 Oracle 连接时，密码或安全握手是否默认加密？（想知道在使用 Oracle JDBC 客户端库建立连接时，密码是否存在通过网络嗅探的风险）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-05T16:21:31.617

密码在通过网络传输时始终被加密。

这并不是说它不受攻击。如果攻击者可以获得用户密码的*哈希值，***并且**可以监控合法客户端和数据库之间的网络流量，那么就有可能获得明文密码。

出于好奇，这里总结了跨不同版本的 Oracle 数据库软件的身份验证过程。处理加密密码传输的步骤**以粗体显示**。JDBC 驱动程序正在使用哪个版本的身份验证协议并不完全直观，因为它并不总是与其宣传的版本相匹配。这是因为客户端可以协商它希望使用的协议。例如，11g JDBC 驱动程序在连接到 11g 数据库时可能不一定使用 11g 身份验证协议（它可能会回退到 10g 身份验证协议）。我忘记了哪些驱动程序使用哪些协议。

## Oracle Database 8 中的身份验证协议

1.  客户端为特定用户请求服务器会话密钥。
2.  服务器生成服务器会话密钥。
3.  服务器使用请求的用户的密码哈希作为密钥来加密服务器会话密钥。
4.  服务器将加密的服务器会话密钥传输给客户端。
5.  客户端使用用户的密码哈希作为密钥来解密加密的服务器会话密钥。
6.  **客户端使用服务器会话密钥作为密钥加密用户的密码。（基于DES的专有算法）**
7.  **客户端将加密的密码传输到服务器。**
8.  服务器使用其服务器会话密钥作为密钥对加密密码进行解密。
9.  服务器计算解密密码的哈希值。
10.  如果计算的密码哈希（来自步骤 9）与存储在服务器上的副本匹配，则用户提供了正确的密码。

## Oracle Database 9i 中的身份验证协议

1.  客户端为特定用户请求服务器会话密钥。
2.  服务器生成服务器会话密钥。
3.  服务器使用请求的用户的密码哈希作为密钥来加密服务器会话密钥。
4.  服务器将加密的服务器会话密钥传输给客户端。
5.  客户端使用用户的密码哈希作为密钥来解密加密的服务器会话密钥。
6.  **客户端使用服务器会话密钥作为密钥加密用户的密码。（基于DES的专有算法）**
7.  **客户端将加密的密码传输到服务器。**
8.  服务器使用其服务器会话密钥作为密钥对加密密码进行解密。
9.  服务器计算解密密码的哈希值。
10.  如果计算的密码哈希（来自步骤 9）与存储在服务器上的副本匹配，则用户提供了正确的密码。

## Oracle 数据库 10g 中的身份验证协议

1.  客户端从服务器请求会话密钥，指定它希望连接的用户。
2.  服务器生成服务器会话密钥。
3.  服务器使用请求的用户的密码哈希作为密钥来加密服务器会话密钥。
4.  服务器将加密的服务器会话密钥传输给客户端。
5.  客户端使用请求的用户密码哈希作为密钥解密加密的服务器会话密钥。
6.  客户端生成客户端会话密钥。
7.  客户端将客户端会话密钥与服务器会话密钥组合在一起。
8.  客户端对用户的密码进行加盐。
9.  **客户端使用组合的会话密钥（来自步骤 7）作为其秘密密钥来加密用户的加盐密码。(AES-128)**
10.  客户端使用用户的密码哈希作为密钥对客户端会话密钥进行加密。
11.  **客户端将加密的客户端会话密钥和加密的、加盐的用户密码传输到服务器。**
12.  服务器使用请求的用户密码哈希解密加密的客户端会话密钥。
13.  服务器将客户端会话密钥与其服务器会话密钥相结合。
14.  服务器使用组合的会话密钥（来自第 13 步）作为密钥对加密的加盐密码进行解密。
15.  服务器取消加盐密码。
16.  服务器对解密的密码进行哈希处理。
17.  服务器将计算的密码散列（从第 16 步开始）与存储的密码散列进行比较。如果它们相等，则用户提供了正确的密码。

## Oracle 数据库 11g 中的身份验证协议

1.  客户端从服务器请求会话密钥，指定它希望连接的用户。
2.  服务器生成服务器会话密钥。
3.  服务器生成验证者数据。
4.  服务器使用请求的用户的密码哈希作为密钥来加密服务器会话密钥。
5.  服务器将加密的服务器会话密钥（“AUTH_SESSKEY”）和验证者数据（“AUTH_VFR_DATA”）传输给客户端。
6.  客户端使用验证者数据作为盐对用户的密码进行哈希处理。
7.  客户端使用用户的密码哈希作为密钥来解密加密的服务器会话密钥。
8.  客户端生成客户端会话密钥。
9.  客户端将客户端会话密钥与服务器会话密钥组合在一起。
10.  客户端对用户的密码进行加盐。
11.  **客户端使用组合的会话密钥（来自步骤 9）作为其秘密密钥来加密用户的加盐密码。(AES-192)**
12.  客户端使用用户的密码哈希作为密钥对客户端会话密钥进行加密。
13.  **客户端将加密的客户端会话密钥和加密的、加盐的用户密码传输到服务器。**
14.  服务器使用请求的用户密码哈希解密加密的客户端会话密钥。
15.  服务器将客户端会话密钥与其服务器会话密钥相结合。
16.  服务器使用组合的会话密钥（来自步骤 15）作为密钥解密加密的加盐密码。
17.  服务器取消加盐密码。
18.  服务器对解密的密码进行哈希处理。
19.  服务器将计算的密码散列（从第 18 步开始）与存储的密码散列进行比较。如果它们相等，则用户提供了正确的密码。

# asp.net-mvc-4 - 如何在 ASP.NET MVC 4 上使用 SimpleMembership 启用角色管理器

> ID：12284976
> 
> 赞同：13
> 
> 时间：2012-09-05T15:34:52.090
> 
> 标签：asp.net-mvc-4

我想知道如何将角色管理器功能与`SimpleMembership`ASP.NET MVC 4 中包含的系统一起使用，特别是如何构建一个控制器来管理与角色相关的所有数据，以及使用通过Internet 创建项目时创建的`webpage_Roles`表`SimpleMembership`模板。有没有办法在 AccountController 的登录/注册操作中自动执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-16T02:04:55.120

好吧，我不是 ASP.NET MVC4 方面的专家，但作为我为自己设定的任务，我想创建基于角色的站点访问。

ASP.NET MVC4 是一个极好的资源！我确实抱怨缺乏信息和难以在 MVC4 中实现角色。

要完成任务，可以实现 SimpleMembership 和 SimpleRoles。请参阅以下链接：

1.  Matthew M. Osborn[将 SimpleMembership 与 ASP.NET 网页结合使用](http://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp.net-webpages)
2.  [SimpleMembership、Membership Providers、Universal Providers 和新的 ASP.NET 4.5 Web 窗体和 ASP.NET MVC 4 模板](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)，作者 Jon Galloway

上面的两个链接解释了很多，并且有一些非常基本的代码示例，但不幸的是，第一个 URL 中没有解决方案下载。

除上述内容外：

1.  [自定义 ASP.NET MVC 4.0 中的 SimpleMembership](http://weblogs.asp.net/thangchung/archive/2012/11/15/customize-the-simplemembership-in-asp-net-mvc-4-0.aspx) by thangchung
2.  MSDN 上的[ASP.NET MVC 4 示例](http://code.msdn.microsoft.com/ASPNET-MVC-4-Sample-37924d68)

最后一篇文章更详细地介绍了它，并提供了源代码以供仔细阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T04:13:40.330

在 web.config 中添加以下内容

```
<profile defaultProvider="SimpleProfileProvider">
      <providers>
        <add name="SimpleProfileProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" connectionStringName="DNMXEntities" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="SimpleMembershipProvider">
      <providers>
        <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
      </providers>
    </membership>
    <roleManager defaultProvider="SimpleRoleProvider">
      <providers>
        <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData" />
      </providers>
    </roleManager> 
```

# email - Magento 自动发送跟踪邮件

> ID：12284979
> 
> 赞同：0
> 
> 时间：2012-09-05T15:35:04.447
> 
> 标签：email, magento, tracking

好的，一直在到处搜索，但什么都想不出来...我们正在通过 Dydacomp 邮购管理器软件中的同步程序在 Magento Community 1.7.0.2 中外部填充跟踪号码... - 它关闭了 Magento 中的订单并添加一个tracking number，但不会触发mage中的send tracking email功能。- 我进行了研究，发现有观察者等似乎可以做到这一点，但是经过 20 小时搜索我能找到的每个博客等后，无法提出任何可行的方法！

这个链接似乎真的是在正确的方向......但是把这段代码放在哪里？我试过把它放在各种地方，但没有一个工作： [在设置运输跟踪号时以编程方式发送电子邮件](https://stackoverflow.com/questions/8793824/programmaticly-send-email-when-shipping-tracking-number-is-set)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:47:23.710

我开发了类似的东西。我创建了一个由 cron 激活的模块（每天一次），它检查最后一个“已交付”的订单（完成状态）。

要在 cron magento 模块中运行函数，请添加到 config.xml

```
<crontab>
    <jobs>            
        <myModule_myFunction>
            <schedule><cron_expr>*/60 * * * *</cron_expr></schedule>
            <run><model>emailtracker/cron::myFunction</model></run>
        </myModule_myFunction>
    </jobs>
</crontab> 
```

为了获得供应，您可以使用以下代码片段

```
$orders = Mage::getModel('sales/order')->getCollection()
        ->addFieldToFilter('status', 'complete')
        ->addAttributeToFilter('created_at', array('gteq' => $dataForFilter)); 
```

请注意，我创建的订单集合是按日期过滤的，以避免检索所有已下达的订单​​。

凭借我收集的最近和完整的订单，这些订单可能是接收跟踪电子邮件交付的候选人，我实际上可以处理重要的订单。

我创建了一个 foreach 以在我的集合中运行，并在该循环中检索跟踪号。

```
foreach($orders as $order) {
    $trackings = Mage::getResourceModel('sales/order_shipment_track_collection')
            ->setOrderFilter($order)
            ->getData();

    for($i=0;$i<count($trackings);$i++) {
        $trackingNumber = $trackings[$i]['track_number'];
        //Make your php magic here
    }
} 
```

从这一点开始，您可以按照您想要的方式处理这些信息。您可以创建一个函数，通过 API 检查跟踪号的状态，并通过其交付服务发送电子邮件，或者您可以想象。

重要提示：请记住检查您的 magento cron 是否处于活动状态。注意：我是在 Magento 1.6.1.0 中完成的

# plsql - Oracle 报表布局问题？

> ID：12284980
> 
> 赞同：1
> 
> 时间：2012-09-05T15:35:10.187
> 
> 标签：plsql, report, oracle9i

我是 Oracle Report Builder 的新手，如果答案很明显，请原谅我。

我正在尝试运行 9i 报告，但我不断收到一个错误，看起来好像帧重叠存在问题。我有两个版本，两个版本都出现相同的错误。一个版本是我想要的报告。另一个是精简版，只有几个字段，以缩小可能导致它的原因。

```
Terminated with error: <br>REP-271187990: Virtual Memory System error. REP-0200: Cannot allocate enough memory. cavaa 22 REP-0002: Unable to retrieve a string from the Report Builder message file. REP-271187990: 
```

有时，当我尝试运行它时，它会弹出下面的消息，没有其他随附的详细信息。select 运行并返回所需的结果，函数按预期返回 ref 游标结果。该包有效且已编译，因此查询本身应该没问题。报告中只有一个查询，我尝试了各种方法，包括剥离报告以缩小错误来源，但没有运气。任何尝试的想法将不胜感激。

```
Terminated with error: <br>REP-1401: 'qr_1refcurds1': Fatal PL/SQL error occurred. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:15:43.163

事实证明，问题出在我的 refcursor 返回的数据上。

在包规范中，我在 table.field%type 声明中有一个字段错误的字段。

对于那些遇到类似错误的人，我建议：

1.  如果您在函数中有 SQL，而不是在报告中，请检查您的包规范以确保您的字段顺序与正文中的用法相匹配。
2.  如果您的报告中有任何重叠的框架，也会出现此消息。检查对象导航器是否有任何隐藏的框架。它们可能完全不可见，唯一确定的方法是查看导航器。提示 - 为您的字段和文本标签提供有意义的名称，以便您可以查看每个框架中包含的内容。还要检查容器框架的来源是......但这是另一个值得享受的 REP 错误。
3.  根据设置，第一次加载报告时，它可能会在引用您的一个查询时出错。这发生在编译之后。再试一次，每次前进都很好。
4.  如果您的 SQL 语句是动态的，请考虑上面提到的服务器补丁。

如果您知道其他人，请随时添加到此列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:57:34.103

根据[Oracle 支持](http://support.oracle.com)说明 430044.1 -

> MS Windows：使用 Ref Cursors 报告 10g 失败并出现 REP-200 和 REP-65 虚拟内存系统错误 [ID 430044.1]
> 
> 这是 MS Windows 平台的一个已知 Oracle Reports 错误。
> 
> 错误 5584001 动态参考光标在版本 10.1.2.0.2 报告生成器中不起作用

Oracle Note 中有逐步说明应用补丁来解决此问题。另请注意，此问题特定于 MS Windows。

建议的 Oracle One-off 补丁是 -

*   一次性补丁[4505133](https://updates.oracle.com/Orion/PatchDetails/process_form?patch_num=4505133)
*   一次性补丁[5634746](https://updates.oracle.com/ARULink/PatchDetails/process_form?patch_num=5634746)

登录到 Oracle Support，下载两个补丁并按照中提到的分步说明`Note 430044.1`应用补丁。

# apache - htaccess: 检查服务器是否将 PHP 作为 CGI 执行

> ID：12284984
> 
> 赞同：1
> 
> 时间：2012-09-05T15:35:28.970
> 
> 标签：apache, .htaccess, apache2, cgi

有没有办法限制`.htaccess`文件中的限制仅在服务器将 PHP（或其他东西）作为 CGI 运行时执行？

可能与此类似的东西？：

```
<IfModule mod_rewrite.c>
  # directives
</IfModule> 
```

# javascript - 调试一个简单的 jQuery 函数；想知道是否与其他代码冲突？

> ID：12284989
> 
> 赞同：0
> 
> 时间：2012-09-05T15:35:40.050
> 
> 标签：javascript, jquery, html

```
 jQuery(document).ready(function() {
     jQuery("#bfCaptchaEntry").on("click", function(){
         jQuery("#bfCaptchaEntry").css("background-color", "#FFFFFF"); 
     });
     jQuery("#bfCaptchaEntry").on("blur", function(){           
         jQuery("#bfCaptchaEntry").css("background-color", "#CC0000"); 
     });
 }); 
```

这是代码，它应该添加 onclick 和 onblur 函数来更改我的输入字段的背景颜色，但它不起作用。

jQuery 代码在此脚本之前加载，此脚本在其之后的 html 内的单独文件中加载。

我做错什么了？任何帮助表示赞赏。

编辑：在尝试了答案中的所有内容后，我在评论中尝试了 Chase 的建议。它就像一个魅力！所以最终代码现在是加载 jQuery 后的内联脚本，如下所示：

```
jQuery(document).ready(function() {
jQuery("#bfCaptchaEntry").bind("click", function(){ 
jQuery("#bfCaptchaEntry").css("background-color", "#FFFFFF"); });
jQuery("#bfCaptchaEntry").bind("blur", function(){ 
jQuery("#bfCaptchaEntry").css("background-color", "#CC0000"); });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:42:23.630

在加载 jQuery 之前，您正在加载依赖 jQuery 的脚本。

```
 <script src="/templates/e-pasaporthome/javascript/styleForms.js" type="text/javascript"></script>
  <script src="/media/mod_vt_nivo_slider/js/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
  <script src="/media/mod_vt_nivo_slider/js/jquery.nivo.slider.min.js" type="text/javascript"></script> 
```

相反，把jQuery放在第一位；

```
 <script src="/media/mod_vt_nivo_slider/js/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
  <script src="/templates/e-pasaporthome/javascript/styleForms.js" type="text/javascript"></script>
  <script src="/media/mod_vt_nivo_slider/js/jquery.nivo.slider.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:40:42.663

您是否首先包含了 jQuery 文件。如果您已经这样做了，那么在您的浏览器中按 F12 并检查您是否在浏览器的控制台部分看到任何错误。

您还在使用其他 javascript 库吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:15:10.560

我建议使用`.bind()`而不是`.on()`1.7 之前的版本。

`"As of jQuery 1.7, the .on() method provides all functionality required for attaching event handlers."`

[api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T16:10:46.467

在尝试了答案中的所有内容之后，我在评论中尝试了 Chase 的建议。它就像一个魅力！所以最终代码现在是加载 jQuery 后的内联脚本，如下所示：

```
jQuery(document).ready(function() {
jQuery("#bfCaptchaEntry").bind("click", function(){
jQuery("#bfCaptchaEntry").css("background-color", "#FFFFFF"); });
jQuery("#bfCaptchaEntry").bind("blur", function(){ 
jQuery("#bfCaptchaEntry").css("background-color", "#CC0000"); });
}); 
```

# git - 您可以将 Github 应用程序与 Beanstalk 一起使用吗？

> ID：12284994
> 
> 赞同：4
> 
> 时间：2012-09-05T15:35:55.060
> 
> 标签：git, github, github-for-windows

作为 Git 新手，我想使用 GUI（基于 Windows）并更喜欢 Github 应用程序。但是，我想将此站点与 Beanstalkapp 帐户集成。我很确定这是可能的，但我无法弄清楚。

在 Github 应用程序中，我导航到我的存储库。当我选择“**工具**>**设置...** ”时，我将Beanstalk 提供的存储库的*Git 克隆 URL*放入我的 Github 应用程序的“**主远程（来源） ”字段中。**

现在，当我单击“**发布**”（当我将鼠标悬停在它上面时显示“*单击以将此分支发布到服务器”时）它变​​为“发布...”。*几秒钟后，我收到此错误：

> **服务器故障**
> 
> 远程服务器断开连接。稍后再试，或者如果仍然存在，请联系 support@github.com

我很确定我正确设置了 SSH 密钥（以前从未这样做过）。我将密钥添加到 Beanstalkapp 和我的 Github 网络帐户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T13:43:11.097

**是的你可以。**

Github 在目录中创建一个 SSH 密钥`C:/Users/username/.ssh`（基于我的 Windows 7 设置）。您必须将 Github 创建`github_rsa`的密钥添加到 Beanstalk 中的密钥中。

**我做错了什么...**

我创建了一个 SSH 密钥*（这在几乎每个 Git 入门教程中都很常见）*，并将该密钥添加到 Beanstalk 中，认为我的计算机（或者可能是 Git）会自动使用该密钥（我是新手）。不。:) Github 应用程序创建并使用它自己的密钥，如果您想使用该应用程序，这就是您加载到 Beanstalk 中的内容。

# c# - MVC模型中的模型列表

> ID：12284999
> 
> 赞同：6
> 
> 时间：2012-09-05T15:36:16.647
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我有两个模型：

```
class ModelIn{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Address { get; set; }
}

class ModelOut{
    public ModelOut(){ People = new List<ModelIn>();}
    public List<ModelIn> People { get; private set;}
    public string Country { get; set; }
} 
```

我有控制器编辑 ModelOut：

```
public ActionResult People()
{
    ...
    return View(SomeModelOutInstanceWith3People);
}
[HttpPost]
public ActionResult(ModelOut items)
{
    ...
} 
```

鉴于我有这样的事情：

```
<% using (Html.BeginForm()) { %>
    <%: Html.EditorFor(m => Model.Country) %>
    <% for(int i = 0; i < Model.People.Count; ++i){ %>
        <%: Html.EditorFor(m => Model.People[i].FirstName) %>
        <%: Html.EditorFor(m => Model.People[i].LastName) %>
        <%: Html.EditorFor(m => Model.People[i].Address) %>
    <% } %>
    <input type="submit" />
<% } %> 
```

一切正常，但在后期操作中，我有空的 ModelOut 项目。我可以在日志中看到数据已正确发送。

我已经尝试了一切，没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:22:33.347

你试过简单`<%: Html.EditorFor(m => m.People) %>`吗？

MVC 应该自己循环遍历列表。

另外，注意你如何指定你的 lambda，它应该是`m => m`而不是`m => Model`.

*PS。我使用MVC3 ...*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:10:27.483

您的问题的原因可能是命名不匹配......据我所知，默认模型绑定器由于命名不匹配而无法正常工作......这意味着您需要为模型绑定器指定更多信息才能执行它的工作更好...尝试更新您的查看代码以对每个属性使用以下代码...

```
<%= Html.EditorFor(string.Format("People[{0}].FirstName", i), Model.People[i].FirstName) %> 
```

上面的视图代码会生成如下标记

```
<input id="People_0__FirstName" name="People[0].FirstName" type="text" /> 
```

我上面可能有一个语法问题，但我想你可以在 Visual Studio 的帮助下解决它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:55:48.730

@Dai 是对的。当它是 List 的实例时，MVC 允许我将项目用作模型实例名称，但不允许我将其用于 ModelOut。

重命名`items`后`model`它工作正常。