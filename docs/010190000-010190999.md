# StackOverflow 问答 10190000-10190999

# join - 我必须使用 UNION insted 的 JOIN 吗？

> ID：10190005
> 
> 赞同：0
> 
> 时间：2012-04-17T11:04:30.270
> 
> 标签：join, mysqli, union

一篇关于[优化 SQL 查询](http://hungred.com/useful-information/ways-optimize-sql-queries/)的文章建议使用 Union insted of OR `cause:

> 使用联合而不是 OR
> 
> 至少在 MySQL 的 OR 情况下使用索引时，索引失去了速度优势。因此，尽管正在应用索引，但这将无用
> 1 SELECT * FROM TABLE WHERE COLUMN_A = 'value' OR
> COLUMN_B = 'value'
> 
> 另一方面，像这样使用联合将利用索引。
> 1- SELECT * FROM TABLE WHERE COLUMN_A = 'value'
> 2- UNION 3- SELECT * FROM
> TABLE WHERE COLUMN_B = 'value'

这个建议在多大程度上是真的？我应该将我的 OR 查询转到 Union 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:16:24.157

我不建议将此作为一般规则。我这里没有安装 MySQL，所以无法检查生成的执行计划，但在 Oracle 中，计划肯定有很大不同，“OR”计划比“UNION”计划更有效。（基本上，'UNION' 必须执行两个 SELECT，然后合并结果 - 'OR' 只需执行一个 SELECT）。即使是“UNION ALL”计划的成本也高于“OR”计划。坚持“或”。

我强烈建议尽可能编写最清晰、最简单的代码。对我来说，这意味着你应该使用“OR”而不是“UNION”。多年来，我发现尝试“预先优化”某些东西，或者换句话说，猜测我会在哪里遇到性能问题，然后尝试围绕这些问题编写代码，是浪费时间。代码往往会在最糟糕的地方花费大量时间，并且只有在运行代码后才能找到它们。很久以前，我学到了三个我发现在这种情况下有用的规则：

1.  如果运行。
2.  让它正常运行。
3.  让它运行得很快。

优化实际上是您应该做的最后一件事。

分享和享受。

* * *

跟进：我没有注意到“或”正在查看不同的列（我的错），但我关于“保持简单”的建议仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:17:08.933

将索引想象成电话簿中的姓名会有所帮助。电话簿，你可以说，有一个按姓名自然排序的索引，这意味着，如果你想找到约翰史密斯的所有名字，你几乎不需要时间来找到它。您只需打开电话簿的 S 部分并开始查找 Smith。

现在，如果我告诉您在电话簿中查找姓名为 John Smith 或电话号码为 863-2253 的条目会怎样。没那么快，嗯？为了提供准确的答案，您需要一个电话簿来查找 John Smith，另一个是按电话号码排序的电话簿，以便通过他或她的电话号码查找姓名。

也许更复杂的引擎可以看到这种分离的需要并自动完成，但显然 MySQL 没有。因此，虽然这样做似乎很麻烦，但我向您保证，记录数较高的表的差异是显而易见的。

# mysql - 如何将值插入表中，如批量插入？

> ID：10190007
> 
> 赞同：0
> 
> 时间：2012-04-17T11:04:49.033
> 
> 标签：mysql, sql, sql-server-2005

我有像

```
 string a,b;
  a= "1,2,3,4";
  b="admin"; 
```

我将 a 和 b 传递给 SP，我想将它保存在 DB 中

```
a   b
1  admin
2  admin
3  admin
4  admin 
```

我怎样才能做到这一点？有人可以给我一些关于如何做的想法吗？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:06:32.777

SQL 没有数组的概念，所以这有点有趣。将列表作为字符串参数传递：

```
DECLARE @INSTR as VARCHAR(MAX)
SET @INSTR = '2,3,177,'
DECLARE @SEPERATOR as VARCHAR(1)
DECLARE @SP INT
DECLARE @VALUE VARCHAR(1000)
SET @SEPERATOR = ','
WHILE PATINDEX('%' + @SEPERATOR + '%', @INSTR ) <> 0 
BEGIN
   SELECT  @SP = PATINDEX('%' + @SEPERATOR + '%',@INSTR)
   SELECT  @VALUE = LEFT(@INSTR , @SP - 1)
   SELECT  @INSTR = STUFF(@INSTR, 1, @SP, '')
   INSERT INTO myTable (a, b) VALUES (@VALUE, 'admin')
END 
```

# jquery - 只需使用 CSS 或 jQuery 设置宽度

> ID：10190014
> 
> 赞同：1
> 
> 时间：2012-04-17T11:05:19.590
> 
> 标签：jquery, html, css, input

```
<table border="1">
    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td></tr>
    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td></tr>
    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td></tr>
    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td></tr>
    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td></tr>
    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td></tr>
    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td></tr>
</table> 
```

[http://jsfiddle.net/BUadD/](http://jsfiddle.net/BUadD/)

我想简单地为输入设置 witdh。对于第一列中的所有输入，我想要例如 30 像素，第二个 50 像素，第三个 20 像素和最后 40 像素。这对所有人来说都可以使用 CSS 或 jQuery 吗？我必须为每个输入添加这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:11:37.043

只需像这样添加`class="classname"`到输入中：

```
<input class="left_col" type="text"> 
```

然后将其添加到您的CSS：

```
input.left_col {
    width: 30px;
} 
```

你可以为你想要的所有列做这个，只要记住给他们不同的名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:23:12.003

大多数机械手适用于所有领域

```
$("table input[type=text]").css("width", "30px"); 
```

将为所有输入字段设置宽度。要使用最后一个或第一个字段，请使用 :first 或 :last 选择器：

```
$("input[type=text]:last").css("width", "30px"); 
```

如果要为每个字段设置自定义宽度，最好设置“输入ID”或“输入名称”，以简化操作：

```
$("#id1").css("width", "30px");
$("#id2").css("width", "20px"); 
```

Foreach 循环对您来说不是一个好的选择，例如，如果您有一个大小算法，例如每个字段的 size*2，那么您可以使用它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:29:24.640

下面的 CSS 将使输入的第一列宽 30 像素，第二列 50 像素，第三列 20 像素，最后 40 像素。正如 Rory 所指出的，选择器在所有浏览器中都不能按预期工作*咳嗽 IE*。

```
td:first-child input[type="text"] {
    width: 30px;
}
td:nth-child(2) input[type="text"] {
    width: 50px;
}
td:nth-child(3) input[type="text"] {
    width: 20px;
}
td:last-child input[type="text"] {
    width: 40px;
} 
```

​ 使用 jQuery，无论如何你都可以模拟这个，看一个例子：http: [//jsfiddle.net/BUadD/2/](http://jsfiddle.net/BUadD/2/)

```
$('td:first-child input[type="text"]').css('width', '30px');
$('td:nth-child(2) input[type="text"]').css('width', '50px');
$('td:nth-child(3) input[type="text"]').css('width', '20px');
$('td:last-child input[type="text"]').css('width', '40px'); 
```

它适用于我的 IE9。

# java - Appletviewer 未从命令提示符运行：java.security.AccessControlException：访问被拒绝（java.net.SocketPermission smtp.gmail.com 解决）

> ID：10190015
> 
> 赞同：0
> 
> 时间：2012-04-17T11:05:22.303
> 
> 标签：java, security, applet, appletviewer

我创建了一个简单的小程序，通过单击“发送邮件”按钮使用 smtp.gmail.com 发送邮件。它可以从 Eclipse 完美运行。从 eclipse 我将它作为 Java Applet 运行，它发送邮件没有任何错误。
但是当从appletviewer 运行时，在eclipse 之外它会抛出一个错误：**java.security.AccessControlException: access denied (java.net.SocketPermission smtp.gmail.com resolve)**
我已经签署了我的程序的JAR。签名后，如果 applet 从 Internet Explorer 运行，它会发送邮件，但如果 applet 从 Google Chrome 浏览器或 appletviewer 运行，则会抛出上述错误。

创建密钥库的命令：“c:\Program Files\Java\jre6\bin\keytool.exe”-genkey -alias -validity 365 -keystore -keyalg rsa

对 jar 进行签名的命令：\bin\jarsigner.exe -signedjar -keystore

JAR 是通过仅从 Eclipse 中导出相同的内容而形成的。

运行小程序的命令：“c:\Program Files\Java\jdk1.6.0_27\bin\appletviewer.exe”

请查看代码并让我知道我在哪里做错了......

小程序代码

```
package in.appletmail;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JTextField;

@SuppressWarnings("serial")
public class SendMailApplet extends JApplet
{
    boolean isStandalone = false;
    JPanel jPanel1 = new JPanel();
    JTextField jTextField1 = new JTextField();
    JButton jButton = new JButton("Send Mail");
    GridBagLayout gridBagLayout1 = new GridBagLayout();

    // Construct the applet
    public SendMailApplet()
    {
        // TODO Auto-generated constructor stub
    }

    // Initialize the applet
    public void init()
    {
        try
        {
            jbInit();
        } catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    // Initializing the components
    private void jbInit() throws Exception
    {
        this.setSize(new Dimension(500, 200));
        jPanel1.setLayout(gridBagLayout1);

        jTextField1.setText("First Applet");
        this.getContentPane().add(jPanel1, BorderLayout.CENTER);
        jPanel1.add(jTextField1, new GridBagConstraints(0, 0, 1, 1, 1.0, 0.0,
                GridBagConstraints.WEST, GridBagConstraints.HORIZONTAL,
                new Insets(140, 128, 139, 132), 77, 0));

        jPanel1.add(jButton, new GridBagConstraints(0, 0, 1, 1, 1.0, 0.0,
                GridBagConstraints.WEST, GridBagConstraints.HORIZONTAL,
                new Insets(140, 128, 200, 132), 77, 0));

        final String mailStatus = "Testing Applet Viewer";
        jTextField1.setText(mailStatus);

        jButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e)
            {
                try
                {
                    SendMail.mailVariable("Test mail from applet");
                    jTextField1.setText("Mail Send");
                } catch (Exception e1)
                {
                    jTextField1.setText(e1.toString());
                }

            }
        });
        // jTextField1.setText("Mail Send");
    }

    // Start the applet
    public void start()
    {

    }

    // Stop the applet
    public void stop()
    {

    }

    // Delete the applet
    public void destroy()
    {

    }

    // Fetch applet information
    public String getAppletInfo()
    {
        return "Applet-Information";
    }
} 
```

发送邮件的代码

```
package in.appletmail;

import java.util.Properties;

import javax.mail.Authenticator;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public final class SendMail
{
    private static final String SMTP_HOST_NAME = "smtp.gmail.com";
    private static final String SMTP_PORT = "587";
    private static final String SMTP_AUTH_USER = "username";
    private static final String SMTP_AUTH_PWD = "pass";

    private static final String emailMsgTxt = "Testing mail from Applet, Test again";
    private static final String emailSubjectTxt = "Test mail from Applet via Google";
    private static final String emailFromAddress = "test.mail@abc.in";

    // Add List of Email address to who email needs to be sent to
    private static final String[] emailList = { "To@gmail.com" };

    public static String testFunctionCall()
    {
        return "Mailing function will be called";
    }

    public static String mailVariable(String variableValue)
            throws MessagingException
    {
        SendMail smtpMailSender = new SendMail();
        return smtpMailSender.postMail(emailList, emailSubjectTxt, emailMsgTxt
                + "\n variable value:  " + variableValue, emailFromAddress);
    }

    public String postMail(String recipients[], String subject, String message,
            String from) throws MessagingException
    {
        StringBuffer status = new StringBuffer();
        boolean debug = false;

        // Set the host smtp address
        Properties props = new Properties();
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.host", SMTP_HOST_NAME);
        props.put("mail.smtp.port", SMTP_PORT);
        props.put("mail.smtp.auth", "true");

        Authenticator auth = new SMTPAuthenticator();
        Session session = Session.getDefaultInstance(props, auth);

        session.setDebug(debug);
        status.append("Session set;");
        // create a message
        Message msg = new MimeMessage(session);

        // set the from and to address
        InternetAddress addressFrom = new InternetAddress(from);
        msg.setFrom(addressFrom);

        InternetAddress[] addressTo = new InternetAddress[recipients.length];
        for (int i = 0; i < recipients.length; i++)
        {
            addressTo[i] = new InternetAddress(recipients[i]);
        }
        msg.setRecipients(Message.RecipientType.TO, addressTo);
        status.append("Recipients set;");

        // Setting the Subject and Content Type
        msg.setSubject(subject);
        msg.setContent(message, "text/plain");
        status.append("Subject and Content set;");
        Transport.send(msg);
        status.append("Mail send;");
        return status.toString();
    }

    /**
     * SimpleAuthenticator is used to do simple authentication when the SMTP
     * server requires it.
     */
    private class SMTPAuthenticator extends Authenticator
    {

        public PasswordAuthentication getPasswordAuthentication()
        {
            String username = SMTP_AUTH_USER;
            String password = SMTP_AUTH_PWD;
            return new PasswordAuthentication(username, password);
        }
    }
} 
```

调用小程序的 HTML：

```
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>ABC</title>
</head>
<body bgcolor="#CCCCCC">

<table border="0" cellpadding="0" cellspacing="0" width="144" >
  <tr>
    <td width="10%" height="25" style= "height:25">Powered by Xpace :)
    </td>
    <td width="90%"style= "height:25">
    <APPLET CODEBASE="E:\Gunjan\Workspace\TestAppletExecution\Signed\"
        ARCHIVE="TestApplet.jar, mail.jar"
        CODE="in.appletmail.SendMailApplet.class"
        NAME="Send Mail"
        MAYSCRIPT
        WIDTH="750"
        HEIGHT="350"
        HSPACE="0" VSPACE="0" ALIGN="top">        
    </APPLET>
    </td>
  </tr>
</table>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:23:33.173

Applet 在沙箱中运行，有一些限制，您必须配置文件 jre/lib/security/java.policy 添加以下行：

```
permission java.net.SocketPermission "smtp.gmail.com:587", "listen,resolve"; 
```

# jquery - 如果选中复选框，则获取 tr 元素的 id

> ID：10190017
> 
> 赞同：3
> 
> 时间：2012-04-17T11:05:27.077
> 
> 标签：jquery

通过下面的代码，我得到了`tr`元素`id`属性：

```
var IDs = [];
$(".head").each(function(){ IDs.push(this.id); });
alert(IDs); 
```

这些`tr`元素有复选框。

我想要的是，如果选中复选框，那么我就有这些`tr`id。我需要选中的复选框`tr`ID :)

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:12:00.950

您需要这个来获取选中复选框的父 ID...

```
 var IDs = [];
    $(".head input:checked").each(function(){ IDs.push($(this).parent().attr("id")); });
    alert(IDs); 
```

这是一个工作示例...

[http://jsfiddle.net/uMfe3/](http://jsfiddle.net/uMfe3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:11:06.670

你可以这样做...

```
var Ids = $('.head:has(:checkbox:checked)')
           .map(function() { return this.id })
           .get(); 
```

如果您希望通过在内部使用 jQuery 来更快地执行它`querySelectorAll()`，您可以使用...

```
var Ids = $('.head').filter(function() {
              return $(this).has('input[type="checkbox"]') && this.checked;
          }); 
```

...获取`.head`包含选中复选框的元素的 jQuery 集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:08:54.753

就像是

```
var IDs = [];
//iterate over your <tr>
$(".head").each(function(){ 
    //if there is atleas a checked checkbox
    if($('input:checkbox:checked', this).length > 0){ 
        //add the id of the <tr>
        IDs.push(this.id); 
    }
});

alert(IDs); 
```

或者你可以做

```
$(".head input:checkbox:checked").each(function(){ 
    IDs.push(this.id); 
}); 
```

# ajax - 使用 a4j:mediaOutput 传递参数

> ID：10190018
> 
> 赞同：1
> 
> 时间：2012-04-17T11:05:32.100
> 
> 标签：ajax, jsf, jakarta-ee, richfaces

我试图将一些参数从我的 a4j:mediaOutput 传递给我的 bean。我可以传递 OutputStream 参数和第二个参数（对组件的 value 属性的引用）。

但我还需要传递另外两个参数：mediaOutput 的高度和宽度。我用*f:param*和*a4j:actionparam*尝试过，但都没有工作。

```
<a4j:mediaOutput
       style="width: 200px; height:100px; max-width: 200px;max-height: 200px" 
           element="img" mimeType="image/jpeg" 
           createContent="# {bean.paint}"
           value="#{row}" cacheable="false" id="mediaOut">
    <a4j:param name="w" value="screen.height"
         assignTo="#{bean.screenHeight}"
         noEscape="true" />
</a4j:mediaOutput> 
```

知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:21:25.917

好吧，它适用于 f:param。我只是没有在我的 bean 中用 FacesContext 正确阅读它。

fe 宽度：

```
FacesContext fContext = FacesContext.getCurrentInstance(); 
width = Integer.valueOf((String) fContext.getExternalContext()
       .getRequestParameterMap().get("w")); 
```

# json - 从流星服务器发出 JSON API 请求

> ID：10190024
> 
> 赞同：1
> 
> 时间：2012-04-17T11:06:06.993
> 
> 标签：json, meteor

我有一个 Meteor 应用程序，我要从服务器上的另一个服务发出 JSON API 请求。

我尝试使用 JQuery 包和 $.getJSON 但由于 JQuery 包对服务器没有任何影响，我很快发现这不起作用。

如何让服务器发出 JSON 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:38:35.303

正如你所说......它在服务器上不可用。不过，您可以尝试更改流星文件夹中的 jQuery 包。

在 /packages/jquery/package.js 更改：

```
Package.on_use(function (api) {
  api.add_files('jquery.js', 'client');
}); 
```

至：

```
Package.on_use(function (api) {
  api.add_files('jquery.js', ['client', 'server']);
}); 
```

看看它是否在服务器端工作。您必须使用本地更改的流星副本调用服务器，对我来说，我使用 来执行此操作`../meteor/meteor`，您的路径可能会有所不同。

# sql - 获取表中记录之间的数据

> ID：10190028
> 
> 赞同：2
> 
> 时间：2012-04-17T11:06:22.537
> 
> 标签：sql, oracle, date-range

我有这样的数据：

![数据](../Images/6025015d30453eb2429b3a12b3e601de.png)

例如，今天是 2012 年 4 月。参考上面的数据，我想获取数据，`M_PER = 03-2012`因为这个月在范围内`03-2012 TO 06-2012`。

--已编辑
在这种情况下，我想获得使用货币代码的费率。因为今天仍然是四月，我想知道美元 (USD) 对印度尼西亚卢比 (IDR) 的汇率，我必须使用`M_PER = 03-2012`和获取数据`CRR_CURRENCY_CODE = USD`。

问题是什么查询可以检索这样的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:42:47.227

由于您似乎使用的是季度值，因此我会将 TRUNC 函数与`'Q'`格式模型一起使用。这会将日期截断为 1/1/YYYY、1/4/YYYY、1/7/YYYY 和 1/10/YYYY，即季度的第一天。

为了适合您的模型，即季度末的月份，您必须添加两个月。这假定该`MONTH_PERIOD`列是 SQL 日期而不是其他数据类型。

下面是一个示例，使用 SYSDATE 作为输入日期。

```
select *
from your_table
where add_months(trunc(sysdate, 'Q'),2) = month_period; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T11:29:44.353

我使用 rownum 和 order by 来获取值。
`SELECT * FROM tables WHERE m_per > '04-2012' AND ROWNUM = 1 ORDER BY month_period ASC`

# vb.net - 检查字符串是否为数字在 vb 中不起作用

> ID：10190029
> 
> 赞同：0
> 
> 时间：2012-04-17T11:06:31.210
> 
> 标签：vb.net

我正在尝试检查字符串是否为数字但徒劳无功。这是我的代码：

```
If Val(fnumField.Text.Trim) > 0 Or fnumField.Text.Trim = "0" Or Val(phnField.Text.Trim) > 0 Or phnField.Text.Trim = "0" Or Val(ophnField.Text.Trim) > 0 Or _
        ophnField.Text.Trim = "0" Or Val(treeField.Text.Trim) > 0 Or treeField.Text.Trim = "0" Then 
    messageBox.Show("number")
Else
    messageBox.Show("not number")
EndIf 
```

我遇到的问题是，当我运行程序并在像“fnumField”这样的文本字段之一中插入像“abcd”这样的字符串时，它仍然执行“if”中的代码而不是“else”中的代码。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:13:28.430

试试这个：

```
If (Val(fnumField.Text.Trim) > 0 Or fnumField.Text.Trim = "0") And (Val(phnField.Text.Trim) > 0 Or phnField.Text.Trim = "0") And (Val(ophnField.Text.Trim) > 0 Or
        ophnField.Text.Trim = "0") And (Val(treeField.Text.Trim) > 0 Or treeField.Text.Trim = "0") Then 
    messageBox.Show("number")
Else
    messageBox.Show("not number")
EndIf 
```

# c++ - OpenMP 不支持循环中断

> ID：10190032
> 
> 赞同：4
> 
> 时间：2012-04-17T11:06:36.330
> 
> 标签：c++, multithreading, openmp, multiprocess

我正在使用 OpenMP 优化一些代码。如果`NO_VALUE`在一个循环中遇到，我希望它打破。但是，编译器告诉我这在 openMP 中是不允许的。我怎么能处理这个？

```
#pragma omp parallel
{
     #pragma omp for  reduction(+:functionEvaluation)   schedule(dynamic)   nowait
     for (int j=m_colStart;j<m_colEnd+1;j++)
          {
               double d = command_->execute().toDouble();
               if(d==NO_VALUE)
               {
                    functionEvaluation  = NO_VALUE;
                                                   break;
                }
                else
                {
                    functionEvaluation += d;
                }
                delete command_;
            }
 } 
```

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T11:30:00.437

Qt没有问题。
您不能在使用 openMP 并行化的循环中中断。

这背后的原因：假设您有一个包含 10 次迭代的循环。现在，你想在第 5 次迭代中打破循环。你说，

```
if (iteration==5) 
    break; 
```

现在来到并行上下文，您已经创建了 10 个线程，并且每个线程都并行执行各自的迭代。因此，当 thread5 达到特定条件时，您希望所有其他线程

1.  确定这个
2.  撤消他们的输出
3.  不再处理迭代
4.  为所有不同的调度策略动态地执行此操作。

如您所见，在大多数情况下这是不可能的/不切实际的。因此 OpenMP 不允许在并行 for 循环中使用 break。

现在，假设您知道在您的循环中非常罕见的中断条件，并且您一心想要在并行循环中中断。

```
Thread i 
Check input condition
If input leads to breaking flag a marker break_loop
******** barrier across all threads *************
if flag break_loop is true
then
   discontinue this operation
   mark a variable
   discontinue all the remaining iterations
endif
do your normal work 
```

这只是一个框架。您将不得不查看极端情况、锁等。为此，您可以让每个线程在迭代之前检查它们的输入。如果他们的输入条件导致循环中断，他们会设置一个 con

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:43:52.567

openmp 不支持插入 for 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-28T23:43:27.647

我将此添加为正确答案；想一想：你有一个带有停止条件的循环，例如：`for(int a=0; a<10; a++) ...`

如果在循环中，您只是将 a 设置为 9，然后执行一条`continue`语句，它将隐式中断循环。

# c# - 指定的强制转换对 ip 地址无效

> ID：10190043
> 
> 赞同：0
> 
> 时间：2012-04-17T11:07:30.020
> 
> 标签：c#

![在此处输入图像描述](../Images/8758f370dd21f52beb1b0a5ef0bee0a1.png) 我收到了附加的异常值：“211.26.133.198”

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:16:35.957

不确定它究竟为什么会发生（看起来没有什么明显不正确的）......

尝试 Convert.ToString 而不是演员，看看会发生什么:)

# c++ - 基于范围的循环与 for-each 循环有何不同？

> ID：10190045
> 
> 赞同：5
> 
> 时间：2012-04-17T11:07:38.543
> 
> 标签：c++, for-loop, c++11

最新的 C++ 11 规范定义了一种新类型的 for 循环，称为“基于范围的 for 循环”。它的外观和机制似乎与其他语言中可用的 for-each 循环几乎相同。

如果有的话，他们两个有什么区别？如果没有差异，为什么要新名称？

**编辑：**为了澄清，我不是在寻找 c++ 的“基于范围”和其他语言的每个或 std::for_each 之间的实现差异。相反，我想知道他们决定将这个新的 c++“特性”（或语法、习语或任何你想称呼它的名称）称为“基于范围的 for 循环”而不是“for each”这一事实背后是否有一些隐藏的价值循环”，因为几乎所有其他人似乎都在调用这些东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T11:16:44.700

句法：

```
for ( range_declaration : range_expression) loop_statement 
```

产生相当于的代码：

```
{
    auto && __range = range_expression ; 
    auto __begin = begin_expr(__range); 
    auto __end = end_expr(__range); 
    for (;__begin != __end; ++__begin) { 
        range_declaration = *__begin; 
        loop_statement 
    } 
} 
```

而`std::for_each`将一元函数应用于指定范围。因此，有两个基本区别：

*   基于范围的 for 循环语法更简洁、更通用，但您不能在不同于 from `begin()`to的指定范围内执行循环中的代码`end()`。
*   `begin()`通过定义和`end()`函数，可以将基于范围的 for 循环应用于没有定义迭代器的容器。

您无法将其与“广义的 for-each 成语”进行比较，因为**没有标准的成语**。要进行比较，您必须指出具体的实现，而**差异通常隐藏在细节中**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T11:19:35.067

> 如果有的话，他们两个有什么区别？**如果没有差异，为什么要新名称？**

事实上，它是旧名称：`for`。

`foreach`如果您的意思是为什么 C++不像其他语言那样为语言添加新名称，例如，那么您告诉我们为什么在旧名称正常工作时添加*新名称？*

* * *

从您的评论中：

> 但据我所知，所有其他人都将这种类型的语法称为“for-each 循环”。这个概念的新名称让我问是否确实存在比我看到的更多的差异。

好的。它是关于术语的：*for-each-loop* vs. *range-based-for-loop*。

我认为这是因为 C++ 基于范围的循环基本上迭代了*std::begin(c)*和*std::end(c)*定义*的范围内的所有元素*。换句话说，*range-based-for-loop*这个名字强调了定义*range*的哲学和迭代器。***`begin``end`***

 ***为了进一步解释这一点，基于范围的循环仅适用于那些定义了`begin()`和的集合`end()`：

```
std::vector<int> v;
int a[100];
int *p = new int[100];

for(int i : v) {} // works :  begin(v) and end(v) are defined
for(int i : a) {} // works :  begin(a) and end(a) are defined
for(int i : p) {} // does not work :  begin(p) and end(p) are not defined 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-17T11:20:24.590

这是一个标准的 foreach 实现——只有语法糖——为了方便而添加。***

# iphone - 删除视图控制器

> ID：10190048
> 
> 赞同：0
> 
> 时间：2012-04-17T11:07:56.173
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller

在我的应用程序中，我有一个登录屏幕，我在启动时以模态方式呈现。成功登录后，用户被重定向到具有五个 UINavigationController（用于选项卡）的 UITabBarController。

在一个选项卡上，我有一个“注销”按钮，以便用户被重定向回登录屏幕。那工作正常。

但我想要做的是每次用户登录时加载 UITabBarController。这意味着，UITabBarController 不应该被重用。目前，选项卡中的内容（我从 Web 加载数据）保持不变，即使在完成新登录时也是如此。

我如何使用它的 UINavigationcontrollers 释放/pop/nil UITabBarController？

* * *

到目前为止我已经尝试过：

这就是当他按下“注销”按钮时我将用户推回到登录屏幕的地方：

```
[self.navigationController presentModalViewController:navigContrLogin animated:YES];

[[self navigationController] popToRootViewControllerAnimated:YES]; --> NOT WORKING
[self.navigationController popViewControllerAnimated:NO]; --> NOT WORKING
[self.tabBarController release]; ---> NOT WORKING 
```

有人可以帮我吗？

* * *

编辑：这就是我添加 UITabBarController 的方式。当用户单击登录按钮时，我会这样做：

```
[self.navigationController dismissModalViewControllerAnimated:NO];                    
[self.navigationController setNavigationBarHidden:YES]; 

[self.navigationController pushViewController:tabBarController animated:NO];       
[self.navigationController removeFromParentViewController]; 
```

* * *

EDIT2：我解决了。我正在做的是当用户单击注销按钮时，我从应用程序委托调用导航控制器并使用它来推送登录视图控制器。

```
MyAppDelegate *del = (MyAppDelegate*)[UIApplication sharedApplication].delegate;
    [del.navControllerLogin pushViewController:loginController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:36:58.107

您是否尝试将其从超级视图中删除然后释放？然后添加新的 ViewControllers？

```
for (UIView *view in self.window.subviews){
        if (view == tabBarController.view) {
            [view removeFromSuperview];            
        }
}
[tabBarController release];
UITabBarController *newTabBarController = [[UITabBarController alloc] init];
newTabBarController.viewControllers = nil; //ADD NEW VIEWCONTROLLERS
[self.window addSubview:newTabBarController.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:48:17.200

I'd add and remove both the modal view controller and tabbarcontroller from the appDelegate.

```
[myAppDelegate addLoginViewController];
[myAppDelegate removeLoginViewController];
[myAppDelegate addTabBarController];
[myAppDelegate removeTabBarController]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:16:36.973

我不会这样做。因为从子视图管理（释放/无）父视图不是一个好习惯。

1.  应用启动后初始化并显示标签栏控制器。
2.  如果用户未登录，则显示 loginviewcontroller。如果已经登录不需要。
3.  成功登录后发布通知并捕获它所需的位置。
4.  如果用户点击注销，请清除用户凭据、用户相关数据并再次显示 loginviewcontroller。

# facebook - 检查用户是否喜欢粉丝页面

> ID：10190049
> 
> 赞同：1
> 
> 时间：2012-04-17T11:07:57.030
> 
> 标签：facebook, facebook-graph-api

我使用了以下代码，并且仍然在我在 Facebook 中创建的旧应用程序中使用，以向用户隐藏内容，直到他们喜欢该应用程序驻留在选项卡中的粉丝页面。

```
$request = $_REQUEST["signed_request"];
list($encoded_sig, $load) = explode('.', $request, 2);
$fbData = json_decode(base64_decode(strtr($load, '-_', '+/')), true);
if (!empty($fbData["page"]["liked"]))
{
//Show Content
}else{
//Hide Content
} 
```

但是，当我现在开始使用此代码时，它不起作用。有谁知道为什么这仍然适用于我的旧应用程序，但在我创建新应用程序时不起作用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:03:35.213

该代码仍然有效。这是应用程序设置的问题，特别是我使用的 URL 结构。

# spring - Java Spring 配置和 Resteasy

> ID：10190050
> 
> 赞同：3
> 
> 时间：2012-04-17T11:07:57.270
> 
> 标签：spring, resteasy

我正在尝试整合 Resteasy 和 Spring；我已经关注了 Resteasy 的文档和这篇文章：[Inject Spring beans into RestEasy](https://stackoverflow.com/questions/9009660/inject-spring-beans-into-resteasy)。我让它在其余类上使用@Autowire 或其他 Spring 注释工作，但我想这样做使我的其余类不受 Spring（或 DI）依赖项的影响。我也想只通过java配置来配置spring。在 spring 配置中我添加了这个：

```
<context:component-scan base-package="package.where.spring.configuration.beans.are , package.where.rest.classes.are">
<context:include-filter type="annotation" expression="javax.ws.rs.Path"/>
</context:component-scan> 
```

当然我在 web.xml 中有，所以 SpringContextLoaderListener 会获取 spring 配置：

```
<context-param>
   <param-name>contextConfigLocation</param-name>
   <param-value>classpath:/spring-config.xml</param-value>
</context-param> 
```

删除 @Autowire 注释，如果我还删除了第一个包（我通过 Spring java config 配置了注入），则不会发生注入并且字段保持为空；如果我删除第二个包，resteasy 无法识别其余类的 url。

我想只在 Spring 配置中配置注入，有没有办法让 resteasy 识别来自外部配置的 spring bean 的路径？

编辑：我注意到我正在尝试使用 @Provider 带注释的类，前提是您正确配置了 Spring：

```
 <context:component-scan base-package="my.package1 , my.package2">
    <context:include-filter type="annotation" expression="javax.ws.rs.ext.Provider"/>
 </context:component-scan> 
```

但谜团比我最初想象的还要深……我更有信心，我走在了正确的轨道上，只是错过了一步！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T03:03:15.930

更好的方法是使用 JSR-330 注释。

而不是`@Autowired`，更喜欢使用`@Inject`. Spring 支持 JSR-330 注释，并将在后台使用 Autowire 实现。对于使用 , 注释的 Spring bean `@Component`，`@Service`只需将注释替换为 JSR-330 特定的`@Named`.

如果您使用的是 maven，只需在`pom.xml`文件中包含以下内容。

```
<dependency>
    <groupId>javax.inject</groupId>
    <artifactId>javax.inject</artifactId>
    <version>1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:09:21.070

使用 JSR-250 的 @Resource 代替 @Autowired 是向前迈出的一大步；它可以满足@Autowired 的需求，它是 JSR 而不是 Spring 特定的。

对于许多用途来说可能已经足够好了。

# iphone - 如何在iphone中录制语音和播放

> ID：10190052
> 
> 赞同：0
> 
> 时间：2012-04-17T11:08:17.677
> 
> 标签：iphone

我已经在我们的项目中实现了录音功能，但我无法控制停止和丢弃按钮。第二次点击放弃按钮后无法录制声音。单击丢弃后，音频文件也正在播放并且无法再次单击开始按钮。

请帮忙解决这个问题

这是源代码

```
.h file

@interface VoiceInput : UIViewController
                                 <AVAudioRecorderDelegate>
{
//Audio record

  float remainingDelayTime;
  float remainingRecordTime;
  UILabel *delayLabel;

  UIProgressView *progressView;
  AVAudioRecorder *recorder;
  NSTimer *delayTimer;
  NSTimer *recordTimer;
  BOOL toggle;
  NSURL *recordedTmpFile;
  NSError *error;
}
@property (nonatomic, retain) AVAudioRecorder *recorder;
@property (nonatomic, retain) NSTimer *delayTimer;
@property (nonatomic, retain) NSTimer *recordTimer;
@end

.m file

@implementation VoiceInput
@synthesize progressView;
@synthesize recorder;
@synthesize delayTimer;
@synthesize recordTimer;

- (void)viewDidLoad
{
    toggle = YES;
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:&error];
    [audioSession setActive:YES error:&error];
}

-(void)startPushed
{
   if (toggle)
    {
        remainingDelayTime = 4.0;
        delayTimer = [NSTimer scheduledTimerWithTimeInterval:1.0
                                                      target:self
                                                    selector:@selector(delayTimerFired:)
                                                    userInfo:nil
                                                     repeats:YES];
        toggle = NO;
        NSMutableDictionary *rs = [[NSMutableDictionary alloc] init];
        [rs setValue:[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
        [rs setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
        [rs setValue:[NSNumber numberWithInt:2] forKey:AVNumberOfChannelsKey];
        recordedTmpFile = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"%.0f.%@", [NSDate timeIntervalSinceReferenceDate] * 1000.0, @"caf"]]];
        NSLog(@"USING FILE CALLED: %@", recordedTmpFile);

        recorder = [[AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:rs error:&error];
        [recorder setDelegate:self];
        [recorder prepareToRecord];
        [recorder record];

    }
    else
    {
        toggle = YES;
        NSLog(@"Using File Called: %@", recordedTmpFile);
        [recorder stop];
    }

  self.discardButton.enabled = NO;
  self.startButton.enabled = NO;
  self.stopButton.enabled = YES;

}

-(void)stopPushed
{
if([self.recorder isRecording])
  {
    [self.recorder stop];

    if(remainingRecordTime >= 1.0)
    {
      [self.recordTimer invalidate];
    }
}
self.delayLabel.textColor = [UIColor darkGrayColor];
 self.delayLabel.text = [[NSString alloc] initWithFormat:@"Record in ..."];

  self.discardButton.enabled = YES;
  self.playbackButton.enabled = YES;
  self.startButton.enabled = NO;
  self.stopButton.enabled = NO;

}

-(void)playbackPushed
{ 
  AVAudioPlayer *avPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:recordedTmpFile    error:&error];
    [avPlayer prepareToPlay];
    [avPlayer play];

  self.discardButton.enabled = YES;
  self.playbackButton.enabled = YES;
  self.returnButton.enabled = YES;
  self.startButton.enabled = YES;
  self.stopButton.enabled = YES;

}

-(void)discardPushed
{
  [self.recorder deleteRecording];
  self.progressView.progress = 0;
  self.delayLabel.textColor = [UIColor darkGrayColor];
  self.delayLabel.text = @"Record in ...";

  self.discardButton.enabled = NO;
  self.playbackButton.enabled = NO;
  self.startButton.enabled = YES;
  self.stopButton.enabled = YES;

}

-(void)delayTimerFired:(NSTimer *)theDelayTimer
{
  self.progressView.progress = 0;
  remainingDelayTime -= 1.0;
  NSLog(@"fired %f", remainingDelayTime);
  self.delayLabel.textColor = [UIColor blackColor];
  self.delayLabel.text = [[NSString alloc] initWithFormat:@"Record in %2.0f",
                            remainingDelayTime];

  if(remainingDelayTime <= 0.0)
  {
    [self.delayTimer invalidate];
    self.delayLabel.text = [[NSString alloc] initWithFormat:@"Recording"];

    [self.recorder recordForDuration:TIME];
    remainingRecordTime = TIME;
    recordTimer = [NSTimer scheduledTimerWithTimeInterval:TIME_DECREMENT
                                             target:self
                                           selector:@selector(recordTimerFired:)
                                           userInfo:nil
                                            repeats:YES];
  }

}

-(void)recordTimerFired:(NSTimer *)theRecordTimer
{
  remainingRecordTime -= TIME_DECREMENT;
  NSLog(@"fired %f", remainingRecordTime);
  self.progressView.progress = (TIME - remainingRecordTime)/TIME;

  if(remainingRecordTime <= 0.0)
  {
    [self.recordTimer invalidate];
  }

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:35:36.830

看看这个。你可以通过这个开始录制：-

```
- (void) startRecording
{
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *err = nil;
    [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
    [audioSession setMode:AVAudioSessionModeVoiceChat error:&err];

    if(err)
    {
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }

    [audioSession setActive:YES error:&err];
    err = nil;

    if(err)
    {
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }

    recordSetting = [[NSMutableDictionary alloc] init];

    // We can use kAudioFormatAppleIMA4 (4:1 compression) or kAudioFormatLinearPCM for nocompression
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];

    // We can use 44100, 32000, 24000, 16000 or 12000 depending on sound quality
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];

    // We can use 2(if using additional h/w) or 1 (iPhone only has one microphone)
    [recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

    [recordSetting setObject:[NSNumber numberWithInt:12800] forKey:AVEncoderBitRateKey];
    [recordSetting setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSetting setObject:[NSNumber numberWithInt: AVAudioQualityMax] forKey: AVEncoderAudioQualityKey];  

    NSString *str;
    str = [NSString stringWithFormat:@"%@/MySound.caf",DOCUMENTS_FOLDER];

    NSLog(@"recorderFilePath: %@",str);

    NSURL *url = [NSURL fileURLWithPath:str];

    err = nil;
    recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];
    if(!recorder)
    {
        NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        UIAlertView *alert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: [err localizedDescription]
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [alert show];

        return;
    }

    //prepare to record
    [recorder setDelegate:self];
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;

    BOOL audioHWAvailable = audioSession.inputIsAvailable;
    if (! audioHWAvailable) {
        UIAlertView *cantRecordAlert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: @"Audio input hardware not available"
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [cantRecordAlert show];

        return;
    }

    // start recording
    [recorder recordForDuration:(NSTimeInterval) 20];
    } 
```

这将开始您的录制。之后您可以停止录制：-

```
- (void) stopRecording
{
[recorder stop];
} 
```

现在您可以通过以下方式播放录音：-

```
- (void)playRecordingSound
{
if(!recorderFilePath)
    recorderFilePath = [NSString stringWithFormat:@"%@/MySound.caf", DOCUMENTS_FOLDER] ;
    if(soundID)
{
    AudioServicesDisposeSystemSoundID(soundID);
}

//Get a URL for the sound file
NSURL *filePath = [NSURL fileURLWithPath:recorderFilePath isDirectory:NO];

//Use audio sevices to create the sound
AudioServicesCreateSystemSoundID((__bridge CFURLRef)filePath, &soundID);

//Use audio services to play the sound
AudioServicesPlaySystemSound(soundID); 
```

}

希望对您有所帮助谢谢:)

# c++ - RAII类设计

> ID：10190057
> 
> 赞同：0
> 
> 时间：2012-04-17T11:08:42.100
> 
> 标签：c++, raii

假设我有一个以 RAII 方式管理某些资源的类：

```
class C
{
   HANDLE hResource_;

   // prevent sharing the ownership over the resource among multiple instances of C
   C(const C&);
   C& operator=(const C&);

public:
   C() : hResource_(INVALID_HANDLE){}

   C(int arg1, const std::string& arg2,...)
   {
      ...
      allocResource(arg1, arg2, ...);
      ...
   }

   ~C
   {
      ...
      FreeResource(hResource_);
      hResource_ = INVALID_HANDLE;
      ...
   }

   void allocResource(int arg1, const std::string& arg2, ...)
   {
      if(hResource_ == INVALID_HANDLE)
      {
          hResource_ = AllocateResource(arg1, arg2,...);
      }
   }

   HANDLE handle() {return hResource_;}
}; 
```

它的构造函数需要一些资源分配所需的参数，我可以创建它的一个实例，使用它并让它存在于某个范围内：

```
// some global function 
void goo()
{
   C c(123, "test");
   UseResource(c.handle(),...);
   ... 
} 
```

假设我现在想要一个实例`C`成为某个类的成员，并且想要延迟在`C`的 c-tor 中发生的资源分配。这需要`C`' 默认 c-tor 和 some`C`执行资源分配的成员函数（例如`allocResource()`调用`AllocateResource()`）。

```
class A
{
   C c_;

public:
   void foo1()
   {
      ...
      c_.allocResource(123, "test"); 
      UseResource(c_.handle(),...);
      ...
   }   

   void foo2()
   {
      ...         
      UseResource(c_.handle(),...);
      ...
   }   
}; 
```

通过使用专用函数，我们`C`以某种我不喜欢的方式暴露了 的内部结构。

我的问题是：**这种方法是启用延迟初始化的常用方法吗？有没有其他选择？**

* * *

**编辑：**这是关于以下（MSalters'）建议的可能类设计：

```
class C
{
   HANDLE hResource_;

   // prevent sharing the ownership over the resource 
   // among multiple instances of C
   C(const C&);
   C& operator=(const C&);

public:      

   // prevent object creation if resource cannot be acquired
   C(int arg1, const std::string& arg2,...)
   {          
      hResource_ = AllocateResource(arg1, arg2,...);

      // assumption: AllocateResource() returns 
      // INVALID_HANDLE in case of failure
      if(hResource_ == INVALID_HANDLE)
         throw resource_acquisition_exception();
   }

   ~C
   {
      ...
      FreeResource(hResource_);
      hResource_ = INVALID_HANDLE;
      ...
   }

   HANDLE handle() {return hResource_;}
};

class A
{
   std::unique_ptr<C> c_;

public:
   void foo1()
   {
      try
      {
         ...
         c_ = std::unique_ptr<C>(new C(123, "test"));
         UseResource(c_->handle(),...);
         ...
      }
      catch(const resource_acquisition_exception& exc)
      {
         ...
      }
      catch(...)
      {
         ...
      }
   }   

   void foo2()
   {
      ...         
      UseResource(c_->handle(),...);
      ...
   }   
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:24:16.633

不，这不是执行 RAII 的常用方法。事实上，它根本不是 RAII。如果您无法为 a 分配必要的资源`C`，请不要创建`C`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:28:13.513

问题确实是您暴露了 C 的内部结构，但是您已经使用 handle() 函数这样做了，这已经限制了进行延迟实例化的机会。

如果实际上调用 C 来做某事而不是仅仅获取处理程序会更容易。但是，由于 handle() 是一个 getter，并且您已经可以在构造函数中传递所需的参数（无需实例化，而是通过存储参数），您可以在 handle() 中检查 hResource_ 是否有效，如果不是，则分配资源（如果分配失败则抛出异常）。

# asp.net - 将计算列绑定到 GridView

> ID：10190058
> 
> 赞同：0
> 
> 时间：2012-04-17T11:08:47.013
> 
> 标签：asp.net, sql-server-2008, asp.net-4.0

我正在使用 ASP.NET 4.0。我也在这个论坛上检查了几个链接，但没有找到适合我要求的解决方案。

我有一个使用方法中的查询填充的 GridView。查询如下：

```
SELECT district_name, count(record_id) FROM districts; 
```

我禁用了***自动创建列***选项并手动添加了两列，即：District 和 Count。很明显，第二列，即 Count 不在 DataSource 中，因为它是计算结果。

有人建议我使用 #Eval("count") ，所以我尝试了：

```
<asp:BoundField DataField=<%#Eval("count") %> /> 
```

但它也不起作用。我尝试创建 TemplateField，但没有失败。

如何在 GridView 中包含此计数列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:30:48.203

代替

```
SELECT district_name, count(record_id) FROM districts;

<asp:BoundField DataField=<% #Eval("count") %> /> 
```

和

```
SELECT district_name, count(record_id) as count FROM districts;

<asp:BoundField DataField="count" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-04T20:22:39.900

我在 BoundField 属性之间有逗号，就像一个白痴......

# asp.net - 在文本框中设置边距

> ID：10190060
> 
> 赞同：2
> 
> 时间：2012-04-17T11:08:56.187
> 
> 标签：asp.net, css, textbox, position, background-image

我有一个带有背景图像的普通 asp.net 文本框，其属性如下所示：

```
.userbackground
{
    background-image: url('../images/user.png');
    background-repeat: no-repeat;
    background-position: fixed;
    text-align:center;
    width:16px;
    height:16px;
} 
```

这是我的文本框的视图：

![在此处输入图像描述](../Images/fa19271afd9307b0ef8689337ff7ed54.png)

这是我的文本框：

```
 <asp:TextBox ID="UserName" runat="server" BorderStyle="Solid" BorderWidth="1px" 
 BorderColor="#0099CC" BackColor="#FAFFBD" MaxLength="0" 
 AutoCompleteType="Disabled" CssClass="userbackground"></asp:TextBox> 
```

现在我想知道是否有可能为内部文本设置边距或将光标位置放在该图像之后，如果用户清除光标内的文本应该在图像之前停止。

我尝试过使用 css 属性： text align:middle 但它从中心开始，我不希望这样，并且制作背景图像也不适合我的需要。在我的情况下，显示和隐藏图像也不是一个好的选择因为我有很多。除了这三个选项之外，任何人都可以选择我最好的方式，我真的很高兴听到它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:21:43.530

您可以将文本框放在 a`div`中`background-image`，并使用填充放置文本框，使其不与图像重叠：

```
​.textbox
{
 background-image:url('http://placehold.it/15/15');   
 background-repeat:no-repeat;
 background-position:3px 3px;
 border:solid 1px black;
 border-radius: 5px;
 padding-left:20px;
 width:200px;
}
.textbox input
{
 border:none;
 background:transparent;
 width:100%;     
 outline: none; //removes orange border in google chrome
} 
```

[**-- 看演示 --**](http://jsfiddle.net/Curt/frBdL/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:28:34.103

您可以在没有周围`<div>`元素的情况下执行此操作。但请记住，输入必须定义为块元素`display:block;`才能应用填充。

**[看演示](http://jsfiddle.net/frBdL/3/)**

```
<input type="text" />

input
{
    background-image:url('http://placehold.it/15/15');   
    background-repeat:no-repeat;
    background-position:3px 3px;
    border:solid 1px black;
    border-radius: 5px;
    width:200px;
    height:22px;
    display:block;
    padding-left:20px;
    outline: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:22:54.403

你应该`padding-left`在你的风格中使用 .plz 检查在线演示[http://jsfiddle.net/SJBbs/1/](http://jsfiddle.net/SJBbs/1/)。如果您的问题还没有解决，请留下您的意见..

# jpa - 如何让ebean不为ID生成任何值？

> ID：10190063
> 
> 赞同：1
> 
> 时间：2012-04-17T11:09:11.360
> 
> 标签：jpa, ebean, playframework-1.x

我正在使用 Ebean，并定义了这样一个模型：

```
@Entity
@Table(name = "users")
public class User extends Model {

    @Id
    public String id;

    public String email;

    public String name;

} 
```

您可以看到该字段`id`是`String`，并且有一个`@Id`注释。

现在我保存它：

```
User user = new User();
user.id = "abc";
user.email = "a@a.com";
Ebean.save(user); 
```

但是当我保存它时，我发现它的值`id`是：`1`，不是`abc`我指定的。

我检查了sql，发现表生成：

```
create table users (
  id                        varchar(255) not null,
  email                     varchar(255),
  name                      varchar(255),
  constraint pk_users primary key (id))
;

create sequence users_seq; 
```

您可以看到`users_seq`插入用户时使用了一个 seq。

如何定义模型或如何配置 Ebean 让它不对 @Id 字段做任何事情？让它使用我指定的值？

===========

**更新**

对不起，伙计们，我发现这种奇怪的行为是因为我的错误！

是的，我将它与 playframework 1 一起使用，并且我尝试为自己创建一个 play-ebean 模块。但是有一点不对：**当我保存模型时，我错误地清除了 id 值**！

因此缺少分配的值`abc`，然后 Ebean 将尝试使用 seq 为其获取新值。

感谢大家的帮助，再次抱歉，下次我提问的时候会更加小心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:32:16.183

创建另一个独特的字段并选择性地使用它不是更好的主意吗？`String userCode`或者其他的东西？

Play with Ebean 使用 ID 的自动递增来确保 ID 是唯一的，所以我个人没有更改这一点，因为所有文档都假设模型的 ID 是某种数字类型。

您可以考虑使用 Play 的路由通过其 string-id 查找用户，并且仍然使用 Long id 来执行基本操作。

（我是在 Play 的上下文中写的，因为我假设您在其中询问；））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:53:08.187

如果您想在自己的领域进行操作，则需要扩展`GenericModel`而不是。我也在 PlayFramework 上下文中谈论。`Model``@Id`

# android - 安卓应用程序的横向和纵向模式

> ID：10190073
> 
> 赞同：0
> 
> 时间：2012-04-17T11:09:43.287
> 
> 标签：android

我想为横向和纵向模式创建我的 android 应用程序。

我创建了两个文件夹布局和布局域，并为每个活动定义了两个 xml。

所有活动都运行良好。

在所有活动中，它会自动调整旋转，但在一项活动中，我使用了 onconfigurationchange 方法。

现在我的另一个活动是创建问题。我已经实现了谷歌地图并在该活动中调用了两个线程。线程调用了一个从服务器获取数据的 API。

在开始运行良好但在 8 或 10 方向应用程序崩溃后。请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:28:42.890

只需在清单中为您的活动尝试以下代码

```
<activity android:name=".YourActivity"
          android:configChanges="keyboardHidden|orientation"> 
```

让我知道

# opencv - 安装 open cv 和 python 一起运行

> ID：10190075
> 
> 赞同：0
> 
> 时间：2012-04-17T11:09:49.823
> 
> 标签：opencv

我已经在 (D:/BACKUP/install/opencv) 中安装了 Open CV 2.4.0 beta 并在 (D:/BACKUP/install/python) 中安装了 python 2.7.2、scipy 和 numpy fpr 2.7。现在我想知道我应该怎么做才能让它正常工作。帮助我制定清晰的分步指南，以设置我的环境变量和我应该进行的其他设置，以便我可以开始使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:12:33.740

谷歌搜索/阅读文档的一小部分怎么样？

[http://opencv.willowgarage.com/wiki/InstallGuide](http://opencv.willowgarage.com/wiki/InstallGuide)

[http://luugiathuy.com/2011/02/setup-opencv-for-python/](http://luugiathuy.com/2011/02/setup-opencv-for-python/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:06:39.200

我发现这种预编译二进制文件的编译非常有用。

[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

每次我在使用 pip 安装任何东西时遇到问题，这些似乎总能解决问题。

# android - 如何访问私有变量

> ID：10190077
> 
> 赞同：3
> 
> 时间：2012-04-17T11:09:52.287
> 
> 标签：android

有什么方法可以访问其他类的私有变量。实际上，我正在为我的库项目编写测试用例，以便在应用程序崩溃时测试所有可能的临界条件。我应该以这样的方式编写，即我的项目应该通过所有测试用例。现在我的问题是我应该检查在我的库项目中声明为私有的变量。有没有办法访问这些变量（声明为私有）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:11:08.277

使用[getter 和 setter](http://docs.oracle.com/javaee/6/tutorial/doc/gjbbp.html) .. 这是首选方式.. 在 setter 中确保您保留安全值并确保它们在任何情况下都不会破坏您的代码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T05:58:09.893

在 Android 上，您希望将活动的方法设为私有，以防止其他类认为他们可以访问它（片段可以，但这对我来说是错误的做法，最好使用可观察观察者模式）。然后，您将获得仅需要通过测试访问的私有字段和方法。

[**BoundBox**](https://github.com/stephanenicolas/boundbox)正是这样做的！下面是一个访问活动的 2 个私有字段以对其进行测试的测试示例：

```
@UiThreadTest
public void testCompute() {
    // given
    boundBoxOfMainActivity = new BoundBoxOfMainActivity(getActivity());

    // when
    boundBoxOfMainActivity.boundBox_getButtonMain().performClick();

    // then
    assertEquals("42", boundBoxOfMainActivity.boundBox_getTextViewMain().getText());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-05T12:45:51.317

在 java 中，我们可以使用 public 修饰符访问 Private 修饰符。公共修饰符可以是 getter / setter 或方法。

例如，有一个用户类有 id 和 show() 私有类型。这些私有修饰符我们可以在公共方法 display() 的帮助下访问外部类用户。

```
class user{
     private int id;
     private void show(){
      sysout.out.println("show called");
}

public void display(){

   System.Out.Println(" id ="+ id);
    show();

}

} 

public class Test{

Public Static Main(){

  User user = new User();

  //user.id;  //CE
  //user.show(); //CE

   user.display();
   }
} 
```

您还可以参考这篇文章了解更多详细信息： [如何在课堂外访问私有数据](http://www.javavogue.com/2015/11/access-and-non-access-modifiers-in-java.html)

# lotus-notes - 每个 xpage 中的错误 500

> ID：10190080
> 
> 赞同：1
> 
> 时间：2012-04-17T11:10:09.920
> 
> 标签：lotus-notes, xpages, lotus-domino

我在 xpages 中遇到一个奇怪的错误。每当我在 Internet Explorer 中预览任何 xpage 时，我都会收到错误 500。我已经用新的 nsf 尝试过，我只创建了一个没有元素的空白 xpage 并尝试预览，我得到了同样的错误。我还在应用程序属性部分的 xpages 选项卡中检查了“显示 Xpages 运行时错误页面”，但得到了相同的 500 错误。 **（我正在本地机器上工作）**

我的 xpage 的网址：

```
http://localhost/test/testdb.nsf/testxpage.xsp 
```

对于每次预览尝试，log.nsf 都有以下条目

```
04/17/2012 03:24:10 PM  HTTP Web Server: Command Not Handled Exception [/test/testdb.nsf/testxpage.xsp] Anonymous 
```

下面是ie上的错误。

```
Error 500
HTTP Web Server: Command Not Handled Exception 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T13:13:54.743

*   Step 1: Go to the application properties and tick "Show standard error page"
*   Step 2: Make sure that your application is build (default autobuild in project is ON, but you never know)
*   Step 3: Try project clean
*   Step 4: Check the errorlog in data/domino/workspace/log
*   Step 5: Post your code here to have a look

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:36:39.987

根据您的描述，最可能的原因是安全性：您无权在服务器上运行 XPages。使用正确的 ID 进行签名，或者设法进入服务器文档的“签署代理或 XPage 以代表调用者运行：”字段（在“安全”选项卡中）。

无论如何，您应该始终查找@Simon McLoughlin 提到的日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T14:15:55.630

尝试查看 C:/domino-Data-Directory/IBM_TECHNICAL_SUPPORT 中的堆栈跟踪和最新的 xpages_...log 文件，通常比您在其他地方遇到的单行错误更有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T16:29:01.440

如果您在 Windows Vista/7 上工作，则要启动 Lotus Notes，请右键单击 Lotus Notes 图标并单击“以管理员身份运行”。它在我的本地机器上以这种方式工作。我猜这是由于 UAC（用户帐户控制）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T18:08:38.710

检查您的服务器端口，可能是 80。所以您的某些应用程序使用端口 80，例如 Facebook、Skype……所以退出该进程并尝试 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T11:47:49.210

我猜这是您的 Notes 客户端。然后，您需要与您的管理员联系。

有时，我们对数据文件夹没有足够的权限。我也面临这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T08:59:10.683

您是否在应用程序中使用扩展库？然后您需要进行双重安装，设计器和客户端安装都能够预览。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-21T06:45:03.887

我的服务器遇到了同样的问题，我只做了@stwissel 建议的操作，然后重新启动了我的服务器，一切正常，但在你的情况下，你在本地运行它，尝试重新启动你的电脑，希望它能正常工作。你跑得更快吗？我发现这篇文章并认为它可能会有所帮助，[http://www.zarazaga.net/web/z.nsf/dx/getting-error-500-on-opening-an-xpage](http://www.zarazaga.net/web/z.nsf/dx/getting-error-500-on-opening-an-xpage)

# facebook-graph-api - 喜欢时间线页面选项卡内的详细信息页面

> ID：10190081
> 
> 赞同：1
> 
> 时间：2012-04-17T11:10:13.100
> 
> 标签：facebook-graph-api, redirect, facebook-like, facebook-apps, facebook-timeline

我有一个 Facebook 时间线页面选项卡应用程序，它在粉丝页面的 IFRAME 内运行。

在应用程序的主页上，我们显示了 10 个工作，用户可以点击进入一本书的详细信息页面。

我们想在这些详细信息页面上添加一个 LIKE 按钮，以便 facebook 上的用户可以在他们的信息流中喜欢和分享该工作。

该应用程序是完全动态的，因此不同的客户可以在他们的粉丝页面上安装该应用程序并列出他们自己的工作。（例如，可口可乐将它安装在他的可口可乐页面上并列出公司内的工作。然后微软也安装它并做同样的事情）

问题涉及 og:metatags 和喜欢的详细信息页面链接的重定向，就在正确的 facebook 公司页面和显示工作的相对正确的详细信息页面内。

我可以完成这两件事并正常工作，但不能同时完成：

A. Facebook 正确获取 head 部分中的 og:metatags，当我使用类似按钮的以下实现时，带有图像、标题、描述（没有“data-href”额外属性）

```
 <div class="fb-like"  
             data-send="false" 
             data-layout="button_count" 
             data-show-faces="false" 
             data-action="like" 
             data-font="arial">
    </div> 
```

问题是没有指定 data-href 属性（并且 og:url 元被完全忽略）这将创建一个指向当前页面的链接 => iframe 内的预期当前页面 => 所以结果将是当你单击 facebook 上的共享作业，您将不会被重定向到 facebook 应用程序 - 右侧页面 - 右侧详细信息页面内，而是重定向到托管应用程序的服务器上的详细信息页面。

B. 如果我改为指定 data-href 属性

```
 <div class="fb-like"  
             data-href=<%= "http://www.facebook.com/pages/:page/#{session[:fb_page_id]}?v=app_XXXXXXX&app_data=#{@job_details.job_id}" %> 
             data-send="false" 
             data-layout="button_count" 
             data-show-faces="false" 
             data-action="like" 
             data-font="arial">
    </div> 
```

这样做我可以获得在 facebook 上发布的正确链接（然后使用 &app_data 属性）我可以获得完美的重定向工作。但不利的一面是， og:metatags 完全被忽略了，而是 facebook 选择了页面选项卡元标记（托管 pagetab 应用程序的顶部 iframe），所以我在 facebook 上发布了一个废话链接，该链接讲述了 facebook 上带有页面应用程序的页面图片。更大的缺点是，当您喜欢应用程序上的工作时，所有工作似乎也都被喜欢（基本上 iFrame 应用程序成为喜欢页面......而不是被选为喜欢页面的工作详细信息页面）

有没有天才知道如何解决这个问题？我需要让 A 和 B 同时工作才能获得要求的结果！！！！

请帮忙！！！:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:28:29.903

我自己找到了解决方案。

*   Like button => 使用 href 和 ref 属性，尤其是在 ref 上放上你的 facebook 粉丝页面的 id。传递当前页面 url 也将正确加载和共享 og:metatags。

    ```
     <div class="fb-like" 
              data-send="false"
              data-show-faces="false"
              data-layout="button_count"
              data-font="arial"
              data-action="recommend"
              href=<%= "https://app.com/jobs/job_details.job_id" %>
              ref=<%= FB_PAGE_ID %>>
        </div> 
    ```

将 ref 属性传递给 facebook 后，facebook 将在墙上发布链接，并附加一个额外的查询字符串，特别是“fb_ref”参数：

例如带有参数的按钮： href=<%= "https://app.com/jobs/job_details.job_id" %> 和 ref=<%= 332325142248470 %>

变为： [https ://app.com/jobs/a0Ed000000a54bkEAA?fb_ref=332325142248470&fb_source=profile_multiline](https://app.com/jobs/a0Ed000000a54bkEAA?fb_ref=332325142248470&fb_source=profile_multiline)

*   当用户单击我们希望在正确的页面选项卡应用程序和正确的工作详细信息页面内重定向回的链接时。为了实现这一点，我们在 controller/show 操作（在 ruby​​ 中对应于 controller_name/id）中设置了一个新的重定向，记住 ref 将放在我们的 href 链接之后的查询字符串中：

    ```
     if params[:fb_ref]
        redirect_to "http://www.facebook.com/pages/:page/#{params[:fb_ref]}?v=app_xxxxx&app_data=#{params[:id]}"
     end 
    ```

如您所见，我们创建了一个新的动态 url，它将使用 facebook "signed_riquest" (http://developers.facebook.com/docs/authentication/signed_request/) 的 "app_data" 参数来传递给我们的应用程序要可视化的正确详细信息页面，并将我们重定向到正确的 Facebook 页面。

*   完成此操作后，我们只需正确管理 signed_request 随附的新 app_data 参数。在我的一个主控制器中，我使用过：

    ```
     if fb_signed_request[:app_data]             
            redirect_to "/jobs/#{session[:app_data]}"
          end 
    ```

我们将看到我们的应用程序加载了正确的页面和正确的工作详细信息页面！

希望会帮助其他人！

# android - 将事件从嵌套活动调度到容器活动

> ID：10190082
> 
> 赞同：0
> 
> 时间：2012-04-17T11:10:13.970
> 
> 标签：android, user-interface, android-activity, dispatchevent

我有下一个 UI 层次结构：

FragmentActivity > MapFragment（带有一个选项卡和 LocalActivityManager 的选项卡主机）> MapActivity

如何将搜索和返回键从 MapActivity 分派到 FragmentActivity？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:34:27.777

MapActivity 中的 getParent() 方法返回 FragmentActivity

# java - 如何实现一个获取所有复选框状态并将选中项的值添加到arraylist的按钮？

> ID：10190083
> 
> 赞同：1
> 
> 时间：2012-04-17T11:10:16.827
> 
> 标签：java, android, checkbox

我四处寻找解决我的问题的方法，但找不到，所以就在这里。

我有一个使用 textview 和复选框组合显示的数据数组列表。这是使用自定义适配器完成的，该适配器基本上逐行膨胀。到目前为止一切都很好，直到**我想检索检查的数据**。

我从其他人那里了解到，由于视图的回收，他们的选中框在滚动时变为未选中状态。**对我来说，复选框的状态仍然存在**，但我不知道如何在不滚动的情况下取消它们。当我选中一个框时，它是 UI 上的“选中”，但实际上直到我将选中的项目滚动出视图并再次返回时，它才会被识别。

目前，如果 list.get(position).isSelected() == true，我使用全局数组列表填充 list.get(position).getName()。但是你会看到这个数组列表仍然是空的，除非我将项目滚动出视图并再次返回。当未选中这些框时，这同样适用，它们保留在数组列表中，直到我滚动。我想到的是一个提交按钮，它在单击它时获取所有复选框的当前状态，然后构造数组列表。

知道如何创建这样的东西吗？

```
public View getView(int position, View convertView, ViewGroup parent) {
    View view = null;
    if (convertView == null) {
        LayoutInflater inflator = context.getLayoutInflater();
        view = inflator.inflate(R.layout.qlist, null);

        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.text = (TextView) view.findViewById(R.id.label);
        viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
        viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                Model element = (Model) viewHolder.checkbox.getTag();
                //
                if(isChecked){
                    selctionCount++;
                }
                else if (!isChecked){
                    selctionCount--;
                }
                if(selctionCount > 2)
                {
                     Toast.makeText(context, "error, you checked more than 2!", Toast.LENGTH_LONG).show();
                     element.setSelected(false);
                }
                else
                {
                    element.setSelected(buttonView.isChecked());
                }
                System.out.println(selctionCount);
            }
        });
        view.setTag(viewHolder);
        viewHolder.checkbox.setTag(list.get(position));

    } 
    else {
        view = convertView;
        ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
    }
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(list.get(position).getName());

    //This is the problem here! the selected arraylist (global) is empty even when i check the boxes, 
    //it only populates when i scroll the checked boxes out of view and back in! helphelp!
    holder.checkbox.setChecked(list.get(position).isSelected());
    if (list.get(position).isSelected() == true){
        selected.add(list.get(position).getName());
    }
    else if (list.get(position).isSelected() == false){
        selected.remove(list.get(position).getName());
    }
    return view;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:35:36.950

我已经搞砸了类似的问题。您最初可以在构造函数中调用一个函数，该函数将复选框的状态初始化为 false，并将所有状态保存在数组列表中。每当单击复选框时，只需选中该框并将其状态保存在布尔数组列表中。稍后您可以从 arraylist 中检索您的状态。如果您不明白，请告诉我，我会尝试发送一些代码行来帮助您...

这里有一些代码可以帮助你：我将创建一个布尔数组列表。

```
private ArrayList<Boolean> itemChecked      = null; 
```

然后我将在我的构造函数中将所有复选框的状态设置为 false：

```
 for (int i=0; i < no_of_elements.size(); i++) {
        itemChecked.add(i, false);
    } 
```

单击复选框时设置实际选中状态：

```
 holder.cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                                         boolean isChecked) {
                itemChecked.set(position, isChecked);

            }
        }); 
```

# php - PHP5 xsl 安装

> ID：10190086
> 
> 赞同：2
> 
> 时间：2012-04-17T11:10:34.677
> 
> 标签：php

只是一个简单的问题，我在我的 debian 服务器上运行 PHP5（挤压），由于一些 magento 扩展要求，我需要安装 php5-xls 模块，这是一个生产环境，所以，在“apt-get install php5- xls”，显然我得到：

阅读包裹清单...完成

构建依赖树

读取状态信息...完成

将安装以下额外软件包：

libapache2-mod-php5 libxslt1.1 php5-cli php5-common php5-curl php5-gd php5-mcrypt php5-mysql

推荐包：php-pear

**将安装以下新软件包： libxslt1.1 php5-xsl 将升级以下软件包： libapache2-mod-php5 php5-cli php5-common php5-curl php5-gd php5-mcrypt php5-mysql 7 个升级，2 个新安装, 0 删除，59 未升级。**

需要获得 6,953 kB 的档案。此操作后，将使用 606 kB 的额外磁盘空间。

您要继续 [Y/n] 吗？

我使用 Linux 已经有一段时间了，我已经看到像这样简单的事情崩溃了，我只想知道按“y”键我当前的 PHP 安装有多大风险......我们正在在线运行 -这里的商店..有更安全的方法吗？

提前致谢...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:12:56.517

然后安装开发服务器。我们不能向您保证事情会顺利进行。我个人认为，一切都会好起来的。它升级了以前的安装，并安装了 2 个新软件包。

# iphone - NSURLConnection 返回数据但我无法读取它

> ID：10190090
> 
> 赞同：2
> 
> 时间：2012-04-17T11:10:38.450
> 
> 标签：iphone, nsurlconnection

这是另一个简单的问题，在 Google 上一个小时后，我的答案让我无法理解……

用户在文本字段中输入内容，当该字段失去焦点时，我启动 NSURLConnection...。

```
NSString *usernameTry = [sender text];
NSLog(@"username field = %@",usernameTry);

NSString *content = [@"http://www.siebenware.de/Rhythm/user/checkusername.php?username=" stringByAppendingString:usernameTry];
content = [content stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:content] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:5.0];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[connection start];
NSLog(@"%@",content); 
```

那我就等回复吧。。。。

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
NSLog(@"Received Response");
if ([response isKindOfClass:[NSHTTPURLResponse class]]) {
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;
    int status = [httpResponse statusCode];

    if (!((status >= 200) && (status < 300))) {
        NSLog(@"Connection failed with status %@", status);
        [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    }
}

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
[resultsData appendData:data];
NSString *resultsString = [[NSString alloc] initWithData:resultsData encoding:NSUTF8StringEncoding];
NSLog(@"received data %@ %i",resultsString,[resultsString length]);

if ([resultsString isEqualToString: @"FAIL"]){
    NSLog(@"failed to retrieve data");
}else{    
    resultsObjects = [[resultsString componentsSeparatedByString:@":"] mutableCopy];

    if([resultsObjects objectAtIndex:0]==@"usernamecheck"){
        if ([resultsObjects objectAtIndex:1]==username.text) {
            if ([resultsObjects objectAtIndex:2]==@"NG"){
                //set the check marker to bad
                [usernameVer setImage:[UIImage imageNamed:@"redcross.png"]];
            }else{
                //set the check market to good
                [usernameVer setImage:[UIImage imageNamed:@"greentick.png"]];
            }
        }

    }
}
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {

NSLog([NSString stringWithFormat:@"Connection failed: %@", [error description]]);
UIAlertView *errorAlert = [[UIAlertView alloc] initWithTitle:@"Unable to retrieve data" message:[NSString stringWithFormat:@"Error code %i",[error code]] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

} 
```

我看到响应到达 didReceiveResponse 并获得 18 个字节的数据（这是正确的）。

但是 didReceiveData 说“数据”为空。我知道我遗漏了一些非常简单的东西，我保证一旦解决这个问题就会踢自己。

问候克里斯 H

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T11:15:26.760

如果您想将数据更改为 NSString，您可以这样做：

```
NSString *responsestring = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
NSLog(@"%@", responsestring); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:19:28.023

您需要在以下方面处理您的数据：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection; 
```

因为

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data; 
```

可以多次调用

你可以这样做：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [myData appendData:data];
}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // TODO: work with data
} 
```

**NSMutableData* myData**必须是实例变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:27:27.603

您需要使用以下代码将 NSURLConnection 委托方法接收到的 NSMutableData 转换为可读的 NSString

```
NSString *finalString = [[NSString alloc]initWithData:responseData encoding:NSUTF8StringEncoding];

```

那应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:15:51.633

尝试使用其他编码..可能是 ASCII 编码而不是 UTF-8..它可能会奏效

# c# - 在自定义 DesignSurface 中调整控件周围的边框

> ID：10190092
> 
> 赞同：0
> 
> 时间：2012-04-17T11:10:49.390
> 
> 标签：c#, designer, windows-forms-designer

当我控制我的自定义 DesignSurface 时，会绘制一个“调整边框”。这是 VS Designer 众所周知的标准边框 - 点缀着八个“锚点”来调整控件的大小。不幸的是，当我以编程方式更改控件的大小或位置时，此边框本身不会应用此更改。我必须取消选择，然后通过鼠标选择此控件以强制重绘。

我的问题是：如何从代码中访问此边框并以编程方式强制重绘？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:00:43.077

例如：更改控件的位置

不喜欢这样：

```
Control control = new Control();
control.Location=new Point(10,10); 
```

尝试这个：

```
Control control = new Control();
PropertyDescriptor propertyDescriptor = TypeDescriptor.GetProperties(control)["Location"];
if (propertyDescriptor != null)
{
  Point point = (Point)propertyDescriptor.GetValue(control);
  point.Offset(5, 5);
  propertyDescriptor.SetValue(control, point);
} 
```

PropertyDescriptor 的方法“SetValue”可以触发通知设计器重绘的“ComponentChanged”事件。

# javascript - 输入框验证

> ID：10190093
> 
> 赞同：0
> 
> 时间：2012-04-17T11:10:57.063
> 
> 标签：javascript, jquery, html

我想创建一个输入框来输入一个人的私人输入详细信息，第一个字符必须是 A 或 E，其余字符可以是字母数字，并且不允许特殊字符。我需要验证没有人输入任何特殊字符并且第一个字符必须是 A 或 E（都必须在客户端检查）

谁能指导我如何进行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:17:49.463

查看使用 JavaScript 的正则表达式以及`keydown`事件。您可以将函数附加到 keydown 事件，并在此函数内检查输入框匹配，然后按您的意愿继续。

像这样的东西：（未测试）

```
<script>
function checkInput() {
  var inputToCheck = document.getElementById('my_input');
  if (!inputToCheck.value.match(/[AE]\w+/)) {
    // do something here, like alert them or remove special characters with .replace
  }
}
</script>

<input id="my_input" onkeydown="checkInput();" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:33:33.450

如果这是唯一要验证的字段，我会用 js & regexp 编写我自己的字段，就像 Leonard Challis 写的那样（但在 keyup 事件上）。

如果网站上有很多字段，可能还有多个表单，我会考虑一个框架。这很好：[http ://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

如果您要使用那个，您可以为您的特殊需要编写一个自定义函数。[http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:25:52.927

这听起来像是一项家庭作业（因为从“E”或“A”开始听起来很不自然），所以我建议首先决定对任务的解释。是否应该不区分大小写地解释“E”和“A”？“字母数字”究竟是什么意思？例如，“Σ”或“Я”或“١”是字母数字吗？如果目的是在客户端进行检查，您应该尝试在禁用 JavaScript 时使页面完全不起作用，还是应该尽可能只在客户端进行*检查*？（在后一种情况下，请考虑`pattern`在 HTML 中使用该属性。在某些现代浏览器上，即使禁用了 JavaScript，也会导致执行检查。）

# jpa - 为什么可以 错误的 不能工作？

> ID：10190096
> 
> 赞同：8
> 
> 时间：2012-04-17T11:11:00.107
> 
> 标签：jpa, eclipselink

有了这个`persistence.xml`：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
                        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">

    <persistence-unit name="ODP_Server_Test"
        transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <!-- <non-jta-data-source>osgi:service/javax.sql.DataSource/(osgi.jndi.service.name=jdbc/ODPServerDataSource)</non-jta-data-source> -->
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:derby:memory:unit-testing;create=true" />
            <property name="javax.persistence.jdbc.user" value="" />
            <property name="javax.persistence.jdbc.password" value="" />
            <property name="eclipselink.ddl-generation" value="drop-and-create-tables" />
            <property name="eclipselink.target-database" value="DERBY" />
        </properties>
    </persistence-unit>

</persistence> 
```

和一个简单的测试：

```
public class RepositoryTest {
    private static Logger logger = LoggerFactory
            .getLogger(RepositoryTest.class);
    private static EntityManagerFactory emf;
    private EntityManager em;
    private RepositoryImpl repo = new RepositoryImpl();

    @BeforeClass
    public static void setUp() {
        try {
            logger.info("Starting in-memory DB for unit tests");
            @SuppressWarnings("unused")
            Class<?> cls = org.apache.derby.jdbc.EmbeddedDriver.class;
            DriverManager.getConnection(
                    "jdbc:derby:memory:unit-testing;create=true").close();
        } catch (Exception ex) {
            ex.printStackTrace();
            fail("Exception during database startup.");
        }
        try {
            logger.info("Building JPA EntityManager for unit tests");
            emf = Persistence.createEntityManagerFactory("ODP_Server_Test");
        } catch (Exception ex) {
            ex.printStackTrace();
            fail("Exception during JPA EntityManager instantiation.");
        }
    }

    @AfterClass
    public static void tearDown() throws SQLException {
        logger.info("Shutting down JPA");
        if (emf != null) {
            emf.close();
        }
        try {
            DriverManager.getConnection(
                    "jdbc:derby:memory:unit-testing;drop=true").close();
        } catch (SQLException ex) {
            if (ex.getSQLState().equals("08006")) {
                logger.info("DB shut down");
            } else {
                throw ex;
            }
        }
        fail("DB didn't shut down");
    }

    @Before
    public void setEM() {
        em = emf.createEntityManager();
        repo.setEntityManager(em);
    }

    @After
    public void flushEM() {
        if (em != null) {
            em.flush();
            em.close();
            em = null;
        }

    }

    @Test
    public void noBlocksInEmptyDB() {
        assertThat(repo.findFunBlock(1), is((FunctionalBlock) null));
    }
} 
```

我明白了

> [EL 警告]: 2012-04-17 15:08:18.476--元模型类型的集合为空。在对 Java SE 和某些 Java EE 容器管理的持久性单元进行实体搜索期间，可能未找到模型类。`<class>`请使用元素或全局`<exclude-unlisted-classes>false</exclude-unlisted-classes>`元素验证您的实体类是否在 persistence.xml 中引用

替换`<exclude-unlisted-classes>false</exclude-unlisted-classes>`很多`<class>`元素后，问题可以解决，但我不想`persistence.xml`每次需要添加新实体或删除旧实体时都必须记住进行编辑。为什么版本不`<exclude-unlisted-classes>`工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-19T17:42:31.393

我遇到过类似的情况

如果我生成 JPA 元模型，将其复制粘贴到正确的 pacakge 中并将其签入到 svn，然后禁用元模型生成，所有 junit 测试都很好

如果我在每次构建时生成元模型，在 junit 时间 - 嵌入式 glassfish 会发现所有 ejb 和元模型都很好，但非 ejb junit 会失败

我必须在我的 src/ **test** /resources/META-INF/ persistence.xml中执行此操作

```
<persistence-unit name="test-xxx" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <jar-file>file:../classes</jar-file>
    <shared-cache-mode>ALL</shared-cache-mode>
    <properties>
        <property name="eclipselink.target-database" value="org.eclipse.persistence.platform.database.oracle.Oracle11Platform"/>
        <property name="eclipselink.logging.timestamp" value="true"/>
        <property name="eclipselink.logging.thread" value="true"/>
        <property name="eclipselink.logging.level" value="FINE"/>
        <property name="eclipselink.logging.parameters" value="true"/>
        <property name="eclipselink.logging.logger" value="JavaLogger"/>
        <property name="javax.persistence.jdbc.url" value="jdbc:oracle:thin:@localhost:1521:xxx"/>
        <property name="javax.persistence.jdbc.password" value="xxx"/>
        <property name="javax.persistence.jdbc.driver" value="oracle.jdbc.OracleDriver"/>
        <property name="javax.persistence.jdbc.user" value="xxx"/>
    </properties>
</persistence-unit> 
```

# oracle - Oracle 中的批量更新给出错误 ORA-01779

> ID：10190110
> 
> 赞同：-1
> 
> 时间：2012-04-17T11:11:36.457
> 
> 标签：oracle

我有一个没有任何唯一键列的表，我想使用自联接执行批量更新。

```
Update 
(
select t1.Col1 col1, t2.col1 col2
from table t1
inner join table t2 on <join condtn>
where <condtn>
)
Set col1 = col2 
```

但由于表没有唯一的键列，它给出了错误：

> ORA-01779: 无法修改映射到非键保留表的列。

除了添加唯一约束之外还有其他解决方案吗:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:45:36.330

您应该能够重构查询以进行相关更新

```
UPDATE table t1
   SET col1 = (SELECT col1
                 FROM table t2
                WHERE t1.<<some column>> = t2.<<some column>>)
 WHERE EXISTS( SELECT 1
                 FROM table t2
                WHERE t1.<<some column>> = t2.<<some column>>) 
```

# android - Android 上的 WebKit 转换 3d 不起作用

> ID：10190113
> 
> 赞同：1
> 
> 时间：2012-04-17T11:11:41.230
> 
> 标签：android

我正在尝试在 Android 2.3.3 浏览器中打开以下网页...

[http://www.webkit.org/blog-files/3d-transforms/morphing-cubes.html](http://www.webkit.org/blog-files/3d-transforms/morphing-cubes.html)

但动画无法正常工作，因为 android 2.3.3 不支持 webkit transform 3d。

知道如何使它工作吗？

问候，桑德什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:29:02.917

尝试以下 polyfills 是否有效，不过它们特别适用于 Internet Explorer。

[https://github.com/pbakaus/transformie](https://github.com/pbakaus/transformie)

[http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/](http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:22:59.893

正如您[在此处](http://caniuse.com/transforms3d)看到的，您只能在蜂窝或更高版本上使用 3d css 变换。对于早期版本，除了做一个原生应用程序之外，您无能为力。

# php - HTTP 获取请求通信 js 到 PHP 不返回结果？

> ID：10190115
> 
> 赞同：0
> 
> 时间：2012-04-17T11:11:52.853
> 
> 标签：php, javascript, html, http, communication

所以我有一个在 HTML5 画布中运行的小 js 程序，我的 js 中有一个小的 http get 请求函数。该功能本身可以工作（在互联网上使用很多示例对其进行了测试，并且可以正常工作），但是当向它发送请求时，我自己的网络服务器没有返回正确的内容。

我的 PHP 看起来像这样：

> ```
> <?php echo VVV::getUser()->userID ?> 
> ```

当我在浏览器中打开它时，它会返回 getUser()->userID 返回的正确值。但是，当我从我的 js 发送 Http 请求时，它会得到一个空结果，但是在互联网上的各种测试页面上使用时它可以工作，所以它一定是我的 PHP 或我的服务器导致了这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:28:28.203

这听起来像是一个跨域 AJAX 请求问题。要解决这个问题，您实际上只有两个选择：

*   让 PHP 发出跨域请求。因此，任何使用您的 AJAX 的站点都会向它自己的服务器发出请求（就像它自己的 ajax.php 脚本一样），然后它会向您的服务器发出请求，然后将其返回给客户端。

*   尝试使用[easyXDM](http://easyxdm.net/wp/) JavaScript 库之类的东西来处理跨域 AJAX 请求，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:54:19.180

这是一个简单的跨域请求（JSONP 样式）的小示例：

1）在您的服务器端，将响应更改为：

```
<?php echo( 'callbackFunc(' . VVV::getUser()->userID . ');' ) ?> 
```

2）在客户端做类似的事情：

```
function callbackFunc( userId )
{
    // Do something with the userId
}

// Create a script tag which will load the call to the callback function
// with the user ID generated by the PHP code.

var s = document.createElement( "SCRIPT" );
s.src = "http://yourserver/yourpath/yourscript.php?maybesome=params";
document.body.appendChild( s ); 
```

从您的服务器加载的代码将使用用户 ID 调用 callbackFunc()。

# java - 将 ArrayList 字符串转换为字符？

> ID：10190116
> 
> 赞同：0
> 
> 时间：2012-04-17T11:11:54.207
> 
> 标签：java, string, arraylist, char, multidimensional-array

所以我有一个由用户估算的字符串数组列表。我还有一个二维字符数组：私人字符[][]拼图；我需要帮助将字符串更改为字符，以便我可以将它们输入到二维数组中有人可以帮忙吗？

```
public class WordSearchPuzzle
{
    private char[][] puzzle ;
    private ArrayList<String> puzzleWords ;
    private int letterCount = 0 ;
    private int gridDimensions;

    public WordSearchPuzzle(ArrayList<String> userSpecifiedWords)
    {
        this.puzzleWords = userSpecifiedWords ;

    }

    private void createPuzzleGrid()
    {
        int i;
        for(i = 0; i < puzzleWords.size() ; i++){
            letterCount = puzzleWords.size() + letterCount ;
        }
        gridDimensions = letterCount * 2;
        puzzle = new char[gridDimensions][gridDimensions] ;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:12:55.750

将每个字符串更改为[charArray](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#toCharArray%28%29)。

```
for(String item : ArrayList){
  item.toCharArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:27:54.120

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class WordSearchPuzzle {

    private char[][] puzzle ;
    private List<String> puzzleWords; //note: don't use a specific implementation (e.g. ArrayList) when you define a List  

    public WordSearchPuzzle(List<String> userSpecifiedWords)
    {
        this.puzzleWords = userSpecifiedWords ;

    }

    public void createPuzzleGrid()
    {
        puzzle = new char[puzzleWords.size()][];
        for(int i = 0; i < puzzleWords.size() ; i++){
            puzzle[i] = puzzleWords.get(i).toCharArray();
        }
    }   

    public void debugPuzzle(){
        System.out.println(Arrays.deepToString(puzzle));
    }
    /**
     * @param args
     */
    public static void main(String[] args) {
        List<String> userWords = new ArrayList<String>();
        userWords.add("word");
        userWords.add("longlongword");
        userWords.add("hello");

        WordSearchPuzzle puzzle = new WordSearchPuzzle(userWords);
        puzzle.createPuzzleGrid();
        puzzle.debugPuzzle();
    }

} 
```

结果

```
[[w, o, r, d], [l, o, n, g, l, o, n, g, w, o, r, d], [h, e, l, l, o]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:19:35.800

标记为家庭作业。就像你之前的问题一样，我会问：你尝试过什么了吗？你打算如何解决这个问题？你目前的问题是什么？

我给你一个主意。createPuzzleGrid() 方法为您初始化拼图数组。请注意他们如何从单词列表中计算维度。这应该为您指明正确的方向：如何将字符从单词列表复制到数组中。

# javascript - 更改 iFrame 的全部内容

> ID：10190118
> 
> 赞同：0
> 
> 时间：2012-04-17T11:12:02.910
> 
> 标签：javascript, jquery, html, iframe

我有一个文本区域，我不想在其中添加构成完整网页的 HTML 代码，并且当我键入时，此内容将呈现在 iframe 中

例如，在 textarea 中，我将编写以下代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Live generate</title>
        <style></style>
    </head>
    <body>
    </body>
</html> 
```

我的问题是我不知道如何访问 iFrame 以更改其全部内容，使其与上述内容匹配

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:18:23.010

您应该能够通过 document.getElementsById 或通过 jquery 的 id 获取 iframe，然后获取其文档，打开它并写入它。

喜欢：

```
var iframe = $("iframe"); // or by Id $("#myIframeId")
var doc = iframe.document;

doc.open();
doc.write($("#myTextArea").text());
doc.close(); 
```

# c# - 安装后启动exe

> ID：10190121
> 
> 赞同：0
> 
> 时间：2012-04-17T11:12:32.133
> 
> 标签：c#, visual-studio, setup-project

我在我的安装项目中添加了一些项目输出（产生一些 exes）。
在安装项目完成所有事情后，我要做的最后一件事是从项目输出中运行其中一个 exe。

如何才能做到这一点？`Launch after install`这与设置中的事物不完全相似，但非常相似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:34:31.610

我通常通过安装项目的构建后事件来做到这一点。这个[链接](http://blogs.msdn.com/b/astebner/archive/2006/08/12/696833.aspx)对你来说应该是一个好的开始

# c# - 在实体框架中添加+修改对象时出现奇怪的困难

> ID：10190129
> 
> 赞同：1
> 
> 时间：2012-04-17T11:12:56.347
> 
> 标签：c#, entity-framework, ef-code-first

我在使用 codefirst Entity Framework 时遇到了很多麻烦。

我有一个包含两个表的数据库 -`Users`和`Countries`. `Users`有一个外键为 的字段`CountryId`。当用户第一次添加到数据库时，FK 会更新得很好。但是，如果我尝试更新附加到新 DbContext 的用户的 FK，则不会发生任何更改。

我可以在最初创建用户的上下文中更新 FK。此外，我可以在从数据库中检索用户的上下文中更新 FK。但是，在我只是`Attach`用户的上下文中，即使正常`nvarchar`或`int`字段确实更新，FK 字段也不会更新。

这是我的 DbContext：

```
class DataContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Country> Countries { get; set; }
} 
```

这是我的模型：

```
public class User
{
    public int UserId { get; private set; }
    public string Name { get; set; }
    public virtual Country Country { get; set; }

}

public class Country
{
    public int CountryId { get; private set; }
    public string Name { get; set; }
} 
```

此方法演示了该问题。我将 3 个用户添加到我的数据库中，然后尝试以 3 种不同的方式修改它们 - 在添加用户的原始上下文中，在带有 的新上下文中`Attach`，以及在从数据库中检索回用户的新上下文中调整：

```
static void Main(string[] args)
{
    Country[] countries;

    using (var dc = new DataContext())
    {
        countries = dc.Countries.ToArray();
    }

    var u = new User();

    // FIRST ROW
    using (var dc = new DataContext())
    {
        u.Name = "First";
        u.Country = countries[0];
        dc.Users.Attach(u);
        dc.Entry(u).State = System.Data.EntityState.Added;
        dc.SaveChanges();

        u.Name = "FirstChanged";
        u.Country = countries[1];
        // defaults to 'added' once u is tracked.
        dc.Entry(countries[1]).State = EntityState.Unchanged; 
        dc.SaveChanges();
    }

    // SECOND ROW
    u = new User();
    using (var dc = new DataContext())
    {
        u.Name = "Second";
        u.Country = countries[0];
        dc.Users.Attach(u);
        dc.Entry(u).State = System.Data.EntityState.Added;
        dc.SaveChanges();
    }

    using (var dc = new DataContext())
    {
        u.Name = "SecondChanged";
        u.Country = countries[1];
        dc.Users.Attach(u);
        dc.Entry(u).State = System.Data.EntityState.Modified;
        dc.SaveChanges();
    }

    // THIRD ROW
    u = new User();
    using (var dc = new DataContext())
    {
        u.Name = "Third";
        u.Country = countries[0];
        dc.Users.Attach(u);
        dc.Entry(u).State = System.Data.EntityState.Added;
        dc.SaveChanges();
    }

    using (var dc = new DataContext())
    {
        u = dc.Users.Find(u.UserId);
        u.Name = "ThirdChanged";
        u.Country = countries[1];
        dc.Entry(countries[1]).State = EntityState.Modified;
        dc.SaveChanges();
    }
} 
```

此应用程序在数据库中生成以下结果：

```
UserId  Name    Country_CountryId   
------------------------------------------------------------------------
1   FirstChanged    2
2   SecondChanged   1
3   ThirdChanged    2 
```

如您所见，在所有情况下都已`Name`成功更新。在第一种情况和第三种情况下，`CountryId`更新。但是，在第二种情况下，CountryId 没有更新。不幸的是，这种情况与我最相关，因为我希望能够保留模型以供用户在 DataContext 之外进行编辑。

我不明白为什么会发生这种情况 - 如果该`Name`字段没有更新我可以理解，但只是`CountryId`我无法弄清楚为什么。在这两种情况下，`Country`对象都被跟踪并标记为`Unchanged`。我不明白为什么只有第二种情况不起作用。

请帮我弄清楚这里有什么。我能想到的唯一解决方案是在需要修改时使用第三种情况，这样当我保存时，我将数据从我的持久对象复制到从保存的数据库中检索到的新对象......但显然这是一个愚蠢的解决方案。

下面，我包含一个演示此问题的控制台应用程序。要运行它，您需要使用 NuGet（或类似方法）和如下连接字符串检索 EntityFramework：

```
<add name="DataContext" connectionString="DataSource=.\DataContext.sdf" providerName="System.Data.SqlServerCe.4.0" /> 
```

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Entity;
using System.Data;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Country[] countries;

            using (var dc = new DataContext())
            {
                countries = dc.Countries.ToArray();
            }

            var u = new User();

            // FIRST ROW
            using (var dc = new DataContext())
            {
                u.Name = "First";
                u.Country = countries[0];
                dc.Users.Attach(u);
                dc.Entry(u).State = System.Data.EntityState.Added;
                dc.SaveChanges();

                u.Name = "FirstChanged";
                u.Country = countries[1];
                // defaults to 'added' once u is tracked.
                dc.Entry(countries[1]).State = EntityState.Unchanged;
                dc.SaveChanges();
            }

            // SECOND ROW
            u = new User();
            using (var dc = new DataContext())
            {
                u.Name = "Second";
                u.Country = countries[0];
                dc.Users.Attach(u);
                dc.Entry(u).State = System.Data.EntityState.Added;
                dc.SaveChanges();
            }

            using (var dc = new DataContext())
            {
                u.Name = "SecondChanged";
                u.Country = countries[1];
                dc.Users.Attach(u);
                dc.Entry(u).State = System.Data.EntityState.Modified;
                dc.SaveChanges();
            }

            // THIRD ROW
            u = new User();
            using (var dc = new DataContext())
            {
                u.Name = "Third";
                u.Country = countries[0];
                dc.Users.Attach(u);
                dc.Entry(u).State = System.Data.EntityState.Added;
                dc.SaveChanges();
            }

            using (var dc = new DataContext())
            {
                u = dc.Users.Find(u.UserId);
                u.Name = "ThirdChanged";
                u.Country = countries[1];
                dc.Entry(countries[1]).State = EntityState.Modified;
                dc.SaveChanges();
            }
        }
    }

    class DataContext : DbContext
    {
        public DbSet<User> Users { get; set; }
        public DbSet<Country> Countries { get; set; }

        public DataContext()
        {
            Database.SetInitializer<DataContext>(new ModelInitializer());
            Database.Initialize(false);
        }
    }

    class ModelInitializer : DropCreateDatabaseAlways<DataContext>
    {
        protected override void Seed(DataContext context)
        {
            var jsds = new List<Country>
                {
                    new Country("United Kingdom"),
                    new Country("United States Of America")
                };

            jsds.ForEach(jsd => context.Countries.Add(jsd));
        }
    }

    public class User
    {
        public int UserId { get; private set; }
        public string Name { get; set; }
        public virtual Country Country { get; set; }

    }

    public class Country
    {
        public int CountryId { get; private set; }
        public string Name { get; set; }

        public Country() { }

        public Country(string name)
        {
            Name = name;
        }
    }
} 
```

感谢您查看此问题 - 任何帮助将不胜感激。我正在尝试修复它的第二天，我正在慢慢发疯......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:01:36.000

这是基于[外键关联与独立关联](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations/5282275#5282275)之间差异的棘手问题。如果您使用外键关联（您将`CountryId`在您的实体中拥有属性`User`），您的第二种情况也可以工作，但您使用的是独立关联，其中关联本身有自己的状态，必须设置为`Added`使其工作。`DbContext` [不提供 API](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/192f6f64-df77-4902-901b-c36e2b157ab6)来更改关联的状态，因此您必须使用`ObjectContext`.

```
u = new User();
using (var dc = new DataContext())
{
    u.Name = "Second";
    u.Country = countries[0];
    dc.Users.Attach(u);
    dc.Entry(u).State = System.Data.EntityState.Added;
    dc.SaveChanges();
}

using (var dc = new DataContext())
{
    u.Name = "SecondChanged";
    u.Country = countries[1];
    dc.Users.Attach(u);
    ObjectContext oc = ((IObjectContextAdapter)dc).ObjectContext;
    oc.ObjectStateManager.ChangeObjectState(u, EntityState.Modified);
    oc.ObjectStateManager.ChangeRelationshipState(u, countries[1], x => x.Country, EntityState.Added);
    dc.SaveChanges();
} 
```

当您使用独立关联时，您会发现[很多复杂情况](https://stackoverflow.com/questions/3635071/update-relationships-when-saving-changes-of-ef4-poco-objects/3635326#3635326)。

# php - HTTP PUT 文件上传进度

> ID：10190131
> 
> 赞同：1
> 
> 时间：2012-04-17T11:13:02.943
> 
> 标签：php, javascript, rest, file-upload, http-put

我目前正在尝试实现 RESTful API。

在 PHP 中使用 POST 和 $_FILES 系统时，有确定上传进度的机制（在旧版本的 PHP 和[`session.upload_progress`PHP 5.4 中](http://php.net/manual/session.upload-progress.php)使用 APC ）。

但是，当使用 HTTP PUT 上传文件时，我对 Google 的搜索并没有显示任何用于监控上传进度的结果。据我所知，上述机制不适用于 PUT。

进行 HTTP PUT 时是否可以监控上传进度？如果是这样，怎么办？

**ETA**：如果有一种方法可以在 Javascript 中完全在客户端执行此操作，那会很好（实际上可能会更好，如果它可以在上传过程中避免 AJAX 轮询服务器）。

# java - 选择排序从两端增加有序范围

> ID：10190132
> 
> 赞同：2
> 
> 时间：2012-04-17T11:13:09.377
> 
> 标签：java, sorting, duplicates, selection-sort

我写了一个修改版本的选择排序，我考虑了一个数组的最小值和最大值，并将它们放在两端

算法是这样工作的

```
1\. Find the minimum and the maximum value in the list.
2\. Swap the minimum value with the value in the first position.
3\. Swap the maximum value with the value in the last position.
4\. Repeat the steps above for the remainder of the list 
(starting at the second position and ending at the second to 
 last position and narrowing the range of positions examined 
 from both ends of the array each time). 
```

不幸的是，上面显示了具有重复值的数组的意外结果。

例如，

```
[9, 37, 12, 1, 13, 31, 5, 37, 36, 29, 19, 22, 20, 15, -1, 23] 
```

被排序到

```
[-1, 1, 5, 9, 12, 13, 15, 19, 20, 22, 23, 29, 31, 37, 36, 37] 
```

事实上，这里的主要问题是算法通常没有对数组后半部分的元素进行适当的排序，除了简单的重复。

这是我的伪代码

```
 int i=0;
    while(i<=(arr.length-i-1)) {
      int minIndex = i;
      int maxIndex=arr.length-i-1; 
      for (int j = i+1; j <=arr.length-i-1; j++) {

       if (arr[j] <=arr[minIndex]) {
         minIndex = j;      
         } 
       if(arr[j]>=arr[maxIndex]){
          maxIndex = j; 
         }
      }
      swap(arr, i, minIndex);
      swap(arr, (arr.length-i-1), maxIndex); 
    i++;
    } 
```

**编辑**这是我代码的交换部分，它是唯一与算法交互的东西。我认为它不会有任何区别，但无论如何我都会包含它

```
 private static void swap(int[] arr, int oldIndex, int newIndex){

    int temp=arr[oldIndex];
    arr[oldIndex]=arr[newIndex];
    arr[newIndex]=temp;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:55:32.290

当`i`恰好是`maxIndex`. 要解决这个问题，您需要添加：

```
swap(arr, i, minIndex);
if(i == maxIndex) {
     maxIndex = minIndex;
}
swap(arr, (arr.length-i-1), maxIndex); 
```

[**看到它@work**](http://ideone.com/XZFAc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:49:36.183

好的，问题是最大值从迭代的最小位置开始的情况。考虑第二次通过问题数组的循环：

```
-1,37,12,1,13,31,5,23,36,29,19,22,20,15,9,37 
```

i 为 1，len-i-1 为 14。循环后，maxindex 为 1，minIndex 为 3。

所以你交换 1 (i) 和 3 (minIndex)：

```
-1,1,12,37,13,31,5,23,36,29,19,22,20,15,9,37 
```

然后是 14 (len-i-1) 和 1 (maxIndex)：

```
-1,9,12,37,13,31,5,23,36,29,19,22,20,15,1,37 
```

哎呀。基本上，您需要同时进行两次交换。

**EDIT** Parallelism 在两个重叠交换的情况下并没有真正的帮助，因为每个交换都希望在其中一个数组槽中放置一个不同的值；你必须解决冲突。我认为@codaddict 的解决方案效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:26:23.497

您在内部 for 循环的终止条件中有一个错误。

```
 for (int j = i+1; j <=arr.length-i-1; j++) { 
```

那应该是 a `<`，而不是 a `<=`，出于同样的原因，你开始`i+1`而不是`i`。

作为文体建议，我还将值存储`arr.length - i - 1`在一个变量中，因为它在代码中出现了四次。

**编辑**：验证此错误不是问题的根源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:18:53.557

我认为您进行了太多交换 - 即无论您是否真的找到了新的最小值或最大值，您都在进行交换。此外，您不需要同时进行两个测试（最小和最大测试，因为您不能同时测试两者，除非在平凡的相等情况下，在这种情况下，它们的顺序无关紧要......）。

我认为以下是您算法的更好表示：

```
int arrayLength = arr.length;
for (int i=0; i<arrayLength; i++){
  for (int j=i+1; j<arrayLength; j++){
    int v = arr[j];
    if (v < arr[i]){
      swap(arr, i, j);
    } else if (v > arr[(arrayLength -1)]){
      swap(arr, (arrayLength -i-1), j);
    }
  }
} 
```

但是，您实际上不需要对最大值进行测试以将它们交换到最后，因为当您通过数组进行顶级迭代时，这些都将被搜索最小值捕获 - 即

```
int arrayLength = arr.length;
for (int i=0; i<arrayLength; i++){
  for (int j=i+1; j<arrayLength; j++){
    int v = arr[j];
    if (v < arr[i]){
      swap(arr, i, j);
    } 
  }
} 
```

会更有效率。

编辑：在查看了其他答案之后，这种类型的选择是对 Mark Reed 关于并行进行交换的回答——除此之外，我建议你按照你发现的需要进行交换。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-03-11T14:13:23.900

就像在评论中一样，您的第一次交换会做得很好，但您的第二次交换会产生问题。

在您的 maxindex 变量位于 i 的情况下，您正确放置了最小术语，但丢失了最大术语。这可以通过添加额外的检查来解决`if(i==maxterm)`，并通过正常进行第一次交换和第二次交换 maxterm 和 minterm 位置来处理这种特殊情况。你从 0 到遍历你的数组是没用的`array.length-1`

我建议，从 0 遍历到 (array.length-1)/2，因为你在两边排序。结束部分已经和开始部分一样排序，为什么要进行额外的迭代？我编写了一个完全相同的程序，其中包含我建议的更正，它还检查数字是否已经排序并立即终止循环。

# javascript - 复杂的 Javascript 字符串修改

> ID：10190135
> 
> 赞同：0
> 
> 时间：2012-04-17T11:13:16.187
> 
> 标签：javascript, string

我这里有这个字符串：

```
<br><br>|Me-Foo|: htht 
```

我想要做的是将其转换为：

```
<br><br>Me: htht 
```

基本上只更改两个“|”内的部分，记住“Foo”可能会更改为另一个名称，例如“john”或其他名称。..但我不知道怎么做！？任何人的快速解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:14:09.443

你可以用...删除它

```
str = str.replace(/\|(\w+)-\w+\|/, '$1'); 
```

您没有指定管道之间出现的约束。如果单词字符（`\w`）不够灵活，请根据需要进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:16:21.603

`indexOf`您可以使用、`lastIndexOf`和`substring`js 方法的组合轻松实现此目的...[文档](http://www.w3schools.com/jsref/jsref_obj_string.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:18:49.850

从您的示例中很难说出一般情况，但让我尝试一下：

```
str = str.replace(/\|([^|]+)-Foo\|/, '$1'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:20:39.857

这有帮助吗？

```
theString = theString.replace(/\|(.+)-.+\|/, "$1"); 
```

给出了几个答案。这个代替

```
"anything*& 45|anything8  \$-().?anything|  90fanything" 
```

和

```
"anything*& 45anything8  \$  90fanything" 
```

最好的答案取决于管道之间可能存在什么。

# grails - 将 Grails 项目从 Grails 1.3.6 升级到 Grails 2.0.1 的多个问题

> ID：10190143
> 
> 赞同：1
> 
> 时间：2012-04-17T11:13:44.317
> 
> 标签：grails, groovy, upgrade

我已经成功地将我的 grails 项目从版本 1.3.6 升级到 2.0.1，但是每当我尝试通过 grails run-app 命令运行我的项目时，我都会遇到以下问题：

> > | 错误 2012-04-17 15:44:52,038 [pool-6-thread-1] 错误 [localhost].[/blahblah] - 配置类 org.codehaus.groovy.grails.web.util.Log4jConfigListener 的应用程序侦听器时出错消息：org.codehaus.groovy.grails.web.util.Log4jConfigListener 行 | 方法->> 46 | org.grails.plugins.tomcat.ParentDelegatingClassLoader 中的 findClass | 307 | java.lang.ClassLoader 中的 loadClass | 248 | '' 中的加载类 |
> > 303 | java.util.concurrent.FutureTask$Sync 中的 innerRun | 138 | 跑 。. . 在 java.util.concurrent.FutureTask | 第886章 java.util.concurrent.ThreadPoolExecutor$Worker 中的 runTask | 908 | 跑 。. . 在'' ^ 662 | 在 java.lang.Thread 中运行 | 错误 2012-04-17 15:44:52,116 [pool-6-thread-1] 错误 [localhost].[/blahblah] - 由于先前的错误而跳过安装应用程序侦听器 | 错误 2012-04-17 15:44:52,117 [pool-6-thread-1] 错误 core.StandardContext - 错误 listenerStart | 错误 2012-04-17 15:44:52,120 [pool-6-thread-1] 错误 core.StandardContext - 上下文 [/blahblah] 由于以前的错误而启动失败

谷歌搜索后，我发现这是一个已知问题，此处建议解决方法： [Grails JIRA](http://jira.grails.org/browse/GRAILS-8364?page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#issue-tabs)

我已经完成了这项工作，但是当我尝试运行我的项目时它带来了另一个问题，日志粘贴在下面：

> | 错误 2012-04-17 15:59:57,849 [pool-6-thread-1] ERROR context.GrailsContextLoader - 执行引导程序时出错：java.l ang.NoClassDefFoundError: org/codehaus/groovy/grails/plugins/springsecurity/DummyResponse 消息: java.lang.NoClassDefFoundError: org/codehaus/groovy/grails/plugins/springsecurity/DummyResponse Line | 方法->> 736 | grails.spring.BeanBuilder中的invokeBeanDefiningClosure
> 
> * * *
> 
> | 第569章 ''中的豆子 | 511 | 调用方法。. . . . . 在''| 303 | java.util.concurrent.FutureTask$Sync 中的 innerRun | 138 | 跑 。. . . . . . . . . . 在 java.util.concurrent.FutureTask | 第886章
> java.util.concurrent.ThreadPoolExecutor$Worker 中的runTask | 908 | 跑 。. . . . . . . . . . 在'' ^ 662 | 在 java.lang.Thread 中运行
> 
> 由 NoClassDefFoundError 引起：org/codehaus/groovy/grails/plugins/springsecurity/DummyResponse ->> 169 | java.lang.Class 中的 forName

* * *

> | 第334章 SpringSecurityCoreGrailsPlugin$_closure2 中的 doCall | 第736章 grails.spring.BeanBuilder 中的invokeBeanDefiningClosure | 第569章 ''中的豆子 | 511 | 调用方法。. . . . . 在''| 303 | java.util.concurrent.FutureTask$Sync 中的 innerRun |
> 138 | 跑 。. . . . . . . . . . 在 java.util.concurrent.FutureTask |
> 第886章 java.util.concurrent.ThreadPoolExecutor$Worker 中的 runTask | 908 | 跑 。. . . . . . . . . . 在'' ^ 662 | 在 java.lang.Thread 中运行
> 
> 由 ClassNotFoundException 引起：org.codehaus.groovy.grails.plugins.springsecurity.DummyResponse ->> 202 | 在 java.net.URLClassLoader$1 中运行

* * *

> | 190 | java.net.URLClassLoader 中的 findClass | 307 | 负载类。. . . . . . . 在 java.lang.ClassLoader | 248 | '' 中的加载类 | 169 | 名称。. . . . . . . . 在java.lang.Class | 第334章 SpringSecurityCoreGrailsPlugin$_closure2 中的 doCall | 第736章 grails.spring.BeanBuilder 中的invokeBeanDefiningClosure | 第569章 ''中的豆子 | 511 | 调用方法。. . . . . 在''| 303 | java.util.concurrent.FutureTask$Sync 中的 innerRun |
> 138 | 跑 。. . . . . . . . . . 在 java.util.concurrent.FutureTask |
> 第886章 java.util.concurrent.ThreadPoolExecutor$Worker 中的 runTask | 908 | 跑 。. . . . . . . . . . 在'' ^ 662 | 在 java.lang 中运行。

任何人都可以在这里帮助我，我错过了什么？我确实尝试搜索其他一些论坛或尝试获得类似的帖子，但没有找到。有的话请给我看看。

谢谢

祖奈尔明哈斯

# javascript - JQuery/Javascript - 需要正则表达式来匹配多语言文本

> ID：10190144
> 
> 赞同：0
> 
> 时间：2012-04-17T11:13:48.920
> 
> 标签：javascript, jquery, regex

我正在使用下面的 jQuery 代码来搜索页面上的文本，但这不会搜索网页上的法语或其他语言文本。使用的jQuery代码如下 -

```
phrase = ["\\b(", phrase, ")"].join("");

//search for any matches
var count = 0;
$("#faq-container p").each(
    function (i, v) {
        //replace any matches
        var block = $(v);
        block.html(
            block.text().replace(
                //new RegExp(phrase, "gi"), function (match) { // properties used g , i => g -> global : Whether to test the regular expression against all possible matches in a string, or only against the first.
                // i -> ignoreCase : Whether to ignore case while attempting a match in a string.
                phrase, function (match) {
                    count++;
                    return ["<span class='highlight'>", match, "</span>"].join("");
                }
            )
        );
    }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:35:30.987

只需删除以下行即可解决该问题 -

短语 = ["\b(", 短语, ")"].join("");

我不知道这条线与其他语言文本（英语除外）不匹配....

# model-view-controller - CFWheels - 使用相同的模型验证两种不同的形式

> ID：10190145
> 
> 赞同：1
> 
> 时间：2012-04-17T11:13:49.507
> 
> 标签：model-view-controller, coldfusion, railo, cfwheels

我是车轮新手（我相信我会在这里发很多帖子）所以请耐心等待。

我在“用户”的控制器下有两种形式“注册”和“登录”。所以我的网址看起来像。

/用户/注册/ /用户/登录/

目前在我的模型文件夹中，我只是在 init 方法中使用 user.cfc 验证“注册”页面 - 这很好用。

所以基本上......我的问题是......关于我的登录表单的验证；我是否必须始终将验证放入 init 方法或其他方法中？如果是这样，我该怎么做？当然，每种形式都有不同的字段......所以我需要知道一些关于检测当前正在播放的形式的逻辑。

希望这是有道理的。作为参考，我的 user.cfc 模型目前看起来像这样：

```
<cfcomponent extends="Model" output="true">

    <cffunction name="init">

        <cfset validate( property='userName', method='validateAlphaNumeric') />
        <cfset validatesPresenceOf( properties='userName') />
        <cfset validatesUniquenessOf( properties='userName') />

        <cfset validatesFormatOf( property='userEmail', type='email', message="Email address is not in a valid format.") />
        <cfset validatesPresenceOf( properties='userEmail') />
        <cfset validatesUniquenessOf( properties='userEmail') />

        <cfset validatesPresenceOf( properties='userPassword') />
        <cfset validatesConfirmationOf( property='userPassword') />

        <cfset validatesLengthOf( property="userToken", allowBlank=true) />

    </cffunction>

    <cffunction name="validateAlphaNumeric" access="private">
        <cfif REFind("[^A-Za-z0-9]", this.userName, 1)>
            <cfset addError( property="userName", message="User name can only contain letters and numbers." ) />
        </cfif>
    </cffunction>

</cfcomponent> 
```

谢谢，迈克尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:49:07.423

迈克尔，

您确实需要将模型验证放在您的 init() 方法中；轮子需要这个。但是，我不确定您是否希望或需要对登录页面/调用使用模型验证。

除非我遗漏了什么，否则当用户登录站点时，您实际上并没有更改模型（即创建新用户或更新现有用户）。您只是根据您的数据库值对它们进行身份验证（检查他们的用户名/密码组合）。

如果是我，我会使用客户端验证进行登录（字段已完成等），并使用模型验证进行注册。

！克雷格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T21:05:30.667

转到此 URL 并向下滚动到：使用“何时”、“条件”或“除非”来限制验证范围 [http://cfwheels.org/docs/1-1/chapter/object-validation](http://cfwheels.org/docs/1-1/chapter/object-validation)

对于您的情况，您可能会选择 when="onCreate"

# android - Android 2.1GuessContentTypeFromName 不起作用

> ID：10190148
> 
> 赞同：0
> 
> 时间：2012-04-17T11:14:06.413
> 
> 标签：android

```
String filename = Environment.getExternalStorageDirectory()+"/word.docx";
try{
    File file = new File(filename);
    Uri path = Uri.fromFile(file);
    Intent viewDoc = new Intent(Intent.ACTION_VIEW);
        Log.i(TAG, "mime type "+URLConnection.guessContentTypeFromName(filename).toString());
    viewDoc.setDataAndType(path, URLConnection.guessContentTypeFromName(filename));

    PackageManager pm = getPackageManager();
    List<ResolveInfo> apps = 
        pm.queryIntentActivities(viewDoc, PackageManager.MATCH_DEFAULT_ONLY);

    if (apps.size() > 0){
        startActivity(viewDoc);
    }
}catch(Exception e){
    Log.i(TAG, "oh exception "+e.getMessage());
} 
```

那是我的代码，我在 Android 2.1 中没有得到 mime 类型，我在那个日志中得到了 null。

不过，我可以在 Android 2.3.3 中使用相同的代码相同的应用程序来获取它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:16:54.843

您需要将 url 传递给函数。尝试在它前面加上“file://”

更新：移动评论回答：您需要使用`MimeTypeMap`而不是`URLConnection`'s `guessContentTypeFromName`。有关示例，请参[见此 SO 线程](https://stackoverflow.com/questions/8589645/how-to-detemine-mime-type-of-file-in-android)

# asp.net - 将文件保存到“C:\Windows\System32\dns”会导致“找不到路径的一部分”错误

> ID：10190153
> 
> 赞同：2
> 
> 时间：2012-04-17T11:14:47.993
> 
> 标签：asp.net, windows, vb.net, winforms, dns

我编写了一个 Windows 窗体 (.net 4) 应用程序，需要将文件写入文件夹“C:\Windows\System32\dns”。当这行代码运行时：

```
File.WriteAllText(dnsFileLocation, luxDns) 
```

我收到以下错误，有人知道为什么吗？

注意：即使我以管理员身份运行应用程序也会发生这种情况！

****** *** ******异常文本******* *** ***********

 *****```
System.IO.DirectoryNotFoundException: Could not find a part of the path 'C:\Windows\System32\dns\lux2.dns'.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.StreamWriter.CreateFile(String path, Boolean append)
   at System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding, Int32 bufferSize)
   at System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding)
   at System.IO.File.InternalWriteAllText(String path, String contents, Encoding encoding)
   at System.IO.File.WriteAllText(String path, String contents)
   at DnsServerUpdater.Main.Main_Load(Object sender, EventArgs e)
   at System.EventHandler.Invoke(Object sender, EventArgs e)
   at System.Windows.Forms.Form.OnLoad(EventArgs e)
   at System.Windows.Forms.Form.OnCreateControl()
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.Control.CreateControl()
   at System.Windows.Forms.Control.WmShowWindow(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.Form.WmShowWindow(Message& m)
   at System.Windows.Forms.Form.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.261 (RTMGDR.030319-2600)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
DnsServerUpdater
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/web/dns/DnsServerUpdater.exe
----------------------------------------
Microsoft.VisualBasic
    Assembly Version: 10.0.0.0
    Win32 Version: 10.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/Microsoft.VisualBasic/v4.0_10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.dll
----------------------------------------
System
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.261 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Core
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.233 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
----------------------------------------
System.Windows.Forms
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.235 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.276 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Runtime.Remoting
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Runtime.Remoting/v4.0_4.0.0.0__b77a5c561934e089/System.Runtime.Remoting.dll 
```

* * *

****** *** ******即时调试******* *** ****** 要启用即时 (JIT) 调试，此应用程序或计算机 (machine.config) 的 .config 文件必须在 system.windows.forms 部分中设置 jitDebugging 值。还必须在启用调试的情况下编译应用程序。*****

 *****例如：

```
<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration> 
```

启用 JIT 调试后，任何未处理的异常都将发送到计算机上注册的 JIT 调试器，而不是由该对话框处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:39:09.937

你在运行 64 位 Windows 吗？如果是，那么这可能是您的问题，因为您将被重定向到另一个目录。

您将需要实施
[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365743%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365743%28v=vs.85%29.aspx)和 [http://msdn.microsoft.com/en-us /library/windows/desktop/aa365745%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365745%28v=vs.85%29.aspx) 以暂时禁用 64 位重定向以访问该文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:23:49.647

你能检查目录是否存在吗？由于 system32 是一个 windows 文件夹，在其中创建文件和文件夹需要特殊权限。运行 win forms 应用程序的用户是否有权在 system32 文件夹中创建文件夹/文件？**********

# cocoa - 从 NSBrowser 拖动并使用绑定？

> ID：10190154
> 
> 赞同：0
> 
> 时间：2012-04-17T11:14:56.030
> 
> 标签：cocoa, cocoa-bindings, nsbrowser

我已经实现了一个与 NSOutlineView 共享 NSTreeController 的浏览器，因此我可以轻松地在它们之间切换并保持状态同步。实现对 NSOutlineView 的拖动支持很简单，但似乎 NSBrowser 在使用绑定时不支持拖动。有没有人能够在使用绑定的同时支持从 NSBrowser 拖动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:28:49.790

我通过创建 、 和 的自定义子类解决了`NSBrowser`这个`NSMatrix`问题`NSBrowserCell`。我不得不通过在子类方法中设置此模式来强制`NSBrowser`使用`NSRadioModeMatrix`模式（单个单元格），因为它不断被重置。`NSBrowser``-mouseDown`

在`NSBrowserCell`子类中，我`trackMouse:inRect:ofView:untilMouseUp:`通过简单地让超类做这件事来实现，但返回`NO`所以会发生跟踪，这允许`mouseDragged:`在我的`NSMatrix`子类中调用。然后我`mouseDragged:`做了所有的事情来获取鼠标位置，构建鼠标图像，并使用`[self dragImage:at:offset:pasteboard:source:slideBack:]`.

我不确定这是否是最好的方法，但它确实有效。它仅在`NSBrowser`.

# php - 下拉列表中的动态数据

> ID：10190155
> 
> 赞同：0
> 
> 时间：2012-04-17T11:15:02.013
> 
> 标签：php, mysql, ajax

我想要一个包含数量的下拉列表，如果库存产品数量为 45，那么下拉列表将显示从 1-45 的下拉列表，如果假设 5 个产品已售罄，则下拉列表向下将显示 1-40

这怎么可能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:22:54.860

在您的 PHP 上，您将查询数据库以了解库存中的产品数量。

例如：

```
 select in_stock from products where id = '$id'; 
```

然后在你的php上你可以做类似的事情

```
$in_stock_q = mysql_query("select in_stock from products where id = '$id'");
$in_stock_r = mysql_fetch_assoc($in_stock_q);
$in_stock = $in_stock_r['in_stock'];

printf("<select name=\"in_stock\">");
for($i=1;$i<$in_stock;$i++) {
    printf("<option value=\"%s\">%s</option>", $i, $i);
}
printf("</select>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:19:37.830

假设您有存储在 $numInStock 中的产品数量，您可以生成如下下拉列表。

```
<select>
<?php
    for ($i = 0; $i < $numInStock; $i++){
        echo "<option value='$i'>$i</option>";
    }
?>
</select> 
```

# java - 针对大量小数据的 IPC 建议

> ID：10190156
> 
> 赞同：1
> 
> 时间：2012-04-17T11:15:06.203
> 
> 标签：java, ipc, rmi, multiprocessing

我们要实现一个*多进程*软件，我们正在寻找合适的 IPC。

事实：

*   我们将使用 Java（如果我们面临一些时间紧迫的问题，我们将使用 C）
*   所有进程都在一台 Unix 机器上。
*   这些进程每秒相互发送大量（大约 1000 个）小（大约 4k）数据。

您推荐什么 IPC 技术？Web 服务、RMI、TCP 套接字、Unix 套接字、管道……？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:45:55.140

以上都可以做到这一点。1000/s 不算多（即使是 4 KB）

我会将 Active MQ 和 ZeroMQ 添加到列表中。

我会使用[https://github.com/peter-lawrey/Java-Chronicle](https://github.com/peter-lawrey/Java-Chronicle)为什么？因为我写的。;) 你可能会尝试别的东西。

# java - 传递链表 对于构造函数，它会工作吗？

> ID：10190157
> 
> 赞同：1
> 
> 时间：2012-04-17T11:15:09.303
> 
> 标签：java, collections

我有如下的类 SpeexRunner，构造函数接受两个参数一个布尔变量和一个`LinkedList<short[]>`. 如下 ：-

```
public class SpeexRunner implements Runnable {
    public boolean stopThread;
    LinkedList<short[]> dataList;

    public SpeexRunner(boolean val_stopThread, LinkedList<short[]> dataRef){
        this.stopThread = val_stopThread;
        dataList = dataRef;
    }
    @Override
    public void run() {
     //add objects in dataList;
     // change / remove dataList Objects
    }
} 
```

我的问题是：-如果我更改 run() 中的 dataList，这些更改会反映到在其他地方声明的原始列表吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T11:16:44.773

> 如果我更改 run() 中的 dataList，这些更改是否会反映到在其他地方声明的原始列表中？

是的。您的构造函数接收对列表的*引用*，而不是它的副本。如果要复制它，则必须使用`LinkedList` [复制构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#LinkedList%28java.util.Collection%29)。然后，您将拥有*自己*的列表副本。但请注意，两个列表上的*条目*仍然是共享的，因为条目是数组 ( `short[]`)，并且数组是通过引用存储的。

这也许是最好的例子：

```
import java.util.*;

public class ListExample {
    public static final void main(String[] args) {
        List<short[]> list;

        // Direct use (no copies)
        list = new LinkedList<short[]>();
        list.add(new short[] { 0, 0, 0 });
        System.out.println("list.size() before direct use: " + list.size());
        System.out.println("list.get(0)[0] before direct use: " + list.get(0)[0]);
        new DirectUser(list).doSomething();
        System.out.println("list.size() after direct use: " + list.size());
        System.out.println("list.get(0)[0] after direct use: " + list.get(0)[0]);
        // Output, note how both the list and its contents have been changed:
        // list.size() before direct use: 1
        // list.get(0)[0] before direct use: 0
        // list.size() after direct use: 2
        // list.get(0)[0] after direct use: 1

        // Copying the list, but note that the entries are shared by both lists:
        list = new LinkedList<short[]>();
        list.add(new short[] { 0, 0, 0 });
        System.out.println("list.size() before copy-list use: " + list.size());
        System.out.println("list.get(0)[0] before copy-list use: " + list.get(0)[0]);
        new CopyListUser(list).doSomething();
        System.out.println("list.size() after copy-list use: " + list.size());
        System.out.println("list.get(0)[0] after copy-list use: " + list.get(0)[0]);
        // Output, note how our list didn't change (it doesn't have a new entry), but
        // the entry at index 0 *was* changed:
        // list.size() before copy-list use: 1
        // list.get(0)[0] before copy-list use: 0
        // list.size() after copy-list use: 1
        // list.get(0)[0] after copy-list use: 1

        // "Deep" copying, both the list and its entries:
        list = new LinkedList<short[]>();
        list.add(new short[] { 0, 0, 0 });
        System.out.println("list.size() before deep-copy use: " + list.size());
        System.out.println("list.get(0)[0] before deep-copy use: " + list.get(0)[0]);
        new DeepCopyUser(list).doSomething();
        System.out.println("list.size() after deep-copy use: " + list.size());
        System.out.println("list.get(0)[0] after deep-copy use: " + list.get(0)[0]);
        // Output, note that neither the list nor its entries was affected by the call:
        // list.size() before deep-copy use: 1
        // list.get(0)[0] before deep-copy use: 0
        // list.size() after deep-copy use: 1
        // list.get(0)[0] after deep-copy use: 0

        System.exit(0);
    }

    static class DirectUser {
        List<short[]> items;

        DirectUser(List<short[]> items) {
            // DirectUser doesn't copy the list
            this.items = items;
        }

        void doSomething() {
            this.items.get(0)[0] = 1;
            this.items.add(new short[] { 2, 2, 2 });
        }
    }

    static class CopyListUser {
        List<short[]> items;

        CopyListUser(List<short[]> items) {
            // CopyListUser copies the list, but both lists still share items
            this.items = new LinkedList<short[]>(items);
        }

        void doSomething() {
            this.items.get(0)[0] = 1;
            this.items.add(new short[] { 2, 2, 2 });
        }
    }

    static class DeepCopyUser {
        List<short[]> items;

        DeepCopyUser(List<short[]> items) {
            // DeepCopyUser copies the list AND each entry
            this.items = new LinkedList<short[]>();
            for (short[] entry : items) {
                this.items.add(Arrays.copyOf(entry, entry.length));
            }
        }

        void doSomething() {
            this.items.get(0)[0] = 1;
            this.items.add(new short[] { 2, 2, 2 });
        }
    }
} 
```

当`DirectUser`使用列表时，在我们的调用代码中，我们看到列表（因为它变长了）和它的内容（第一个条目的第一个插槽从 更改`0`为`1`）都发生了变化。

使用`CopyListUser`它时，它会*复制*列表，因此我们在调用代码中没有看到列表有任何变化（它没有变长）。但是我们*确实*看到了第一个条目的变化（因为两个列表共享同一个数组对象）——第一个插槽从`0`变为`1`再次。

使用`DeepCopyUser`它时，它会*复制*列表**和**每个条目的副本，因此事情完全完全断开。我们的调用代码没有看到列表或其项目的任何更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T11:16:53.853

> 如果我更改 run() 中的 dataList，这些更改是否会反映到在其他地方声明的原始列表中？

简短的回答：是的。

稍微长一点的答案：是的，因为在 Java 中参数总是通过引用传递。

（您可能会使用`LinkedList`禁止或忽略更改的（假设的）子类。在这种情况下，尝试的更改将导致异常或无效。但是，这将是不正当的......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T11:16:51.943

是的，它将作为线程引用列表，而不是列表的副本。请注意，`LinkedList`不**同步**：

> 如果多个线程同时访问一个链表，并且至少有一个线程在结构上修改了链表，则必须对外同步。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T11:17:02.557

如果您将元素添加到列表中/从列表中删除元素，则这些更改将从您的其余代码中可见。请注意，如果您使用多个线程，则需要使用同步来保证更改是可见的。

另一方面，如果您不希望更改逃离您的类，您可以在构造函数中创建一个新列表并将所有项目添加到原始列表中。在这种情况下，对列表的更改将不会从外部看到，但如果您对列表中的项目进行更改，这些更改将会显示。

# oracle - 如何避免 Oracle.sql.ARRAY 类型中的这种死锁？

> ID：10190158
> 
> 赞同：1
> 
> 时间：2012-04-17T11:15:16.520
> 
> 标签：oracle, jdbc, deadlock

在运行多个试图写入数据库的 Java EE MDB 实例时，我们遇到了以下死锁情况：

```
[deadlocked thread] [ACTIVE] ExecuteThread: '7' for queue: 'weblogic.kernel.Default (self-tuning)':
Thread '[ACTIVE] ExecuteThread: '7' for queue: 'weblogic.kernel.Default (self-tuning)'' is waiting to acquire lock 'oracle.jdbc.driver.T4CConnection@90106ee' that is held by thread '[ACTIVE] ExecuteThread: '8' for queue: 'weblogic.kernel.Default (self-tuning)''

Stack trace:
oracle.sql.ARRAY.toBytes(ARRAY.java:673)
oracle.jdbc.driver.OraclePreparedStatement.setArrayCritical(OraclePreparedStatement.java:5985)
oracle.jdbc.driver.OraclePreparedStatement.setARRAYInternal(OraclePreparedStatement.java:5944)
oracle.jdbc.driver.OraclePreparedStatement.setObjectCritical(OraclePreparedStatement.java:8782)
oracle.jdbc.driver.OraclePreparedStatement.setObjectInternal(OraclePreparedStatement.java:8278)
oracle.jdbc.driver.OraclePreparedStatement.setObject(OraclePreparedStatement.java:8868)
oracle.jdbc.driver.OraclePreparedStatementWrapper.setObject(OraclePreparedStatementWrapper.java:240)
weblogic.jdbc.wrapper.PreparedStatement.setObject(PreparedStatement.java:287)
org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:356)
org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:216)
org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:127)
org.springframework.jdbc.core.PreparedStatementCreatorFactory$PreparedStatementCreatorImpl.setValues(PreparedStatementCreatorFactory.java:298)
org.springframework.jdbc.object.BatchSqlUpdate$1.setValues(BatchSqlUpdate.java:192)
org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:892)
org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:1)
org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:586)
org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:614)
org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:883)
org.springframework.jdbc.object.BatchSqlUpdate.flush(BatchSqlUpdate.java:184)
com.csfb.fao.rds.rfi.common.dao.storedprocs.SaveEarlyExceptionBatchStoredProc.execute(SaveEarlyExceptionBatchStoredProc.java:93)
com.csfb.fao.rds.rfi.common.dao.EarlyExceptionDAOImpl.saveEarlyExceptionBatch(EarlyExceptionDAOImpl.java:34)
com.csfb.fao.rds.rfi.application.rulesengine.RulesEngine.saveEarlyExceptions(RulesEngine.java:302)
com.csfb.fao.rds.rfi.application.rulesengine.RulesEngine.executeRules(RulesEngine.java:209)
com.csfb.fao.rds.rfi.application.rulesengine.RulesEngine.onMessage(RulesEngine.java:97)
com.csfb.fao.rds.feeds.process.BaseWorkerMDB.onMessage(BaseWorkerMDB.java:518)
weblogic.ejb.container.internal.MDListener.execute(MDListener.java:466)
weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:371)
weblogic.ejb.container.internal.MDListener.onMessage(MDListener.java:327)
weblogic.jms.client.JMSSession.onMessage(JMSSession.java:4547)
weblogic.jms.client.JMSSession.execute(JMSSession.java:4233)
weblogic.jms.client.JMSSession.executeMessage(JMSSession.java:3709)
weblogic.jms.client.JMSSession.access$000(JMSSession.java:114)
weblogic.jms.client.JMSSession$UseForRunnable.run(JMSSession.java:5058)
weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:516)
weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

和...

```
[deadlocked thread] [ACTIVE] ExecuteThread: '8' for queue: 'weblogic.kernel.Default (self-tuning)':
Thread '[ACTIVE] ExecuteThread: '8' for queue: 'weblogic.kernel.Default (self-tuning)'' is waiting to acquire lock 'oracle.jdbc.driver.T4CConnection@b48b568' that is held by thread '[ACTIVE] ExecuteThread: '7' for queue: 'weblogic.kernel.Default (self-tuning)''

Stack trace:
oracle.sql.ARRAY.toBytes(ARRAY.java:673)
oracle.jdbc.driver.OraclePreparedStatement.setArrayCritical(OraclePreparedStatement.java:5985)
oracle.jdbc.driver.OraclePreparedStatement.setARRAYInternal(OraclePreparedStatement.java:5944)
oracle.jdbc.driver.OraclePreparedStatement.setObjectCritical(OraclePreparedStatement.java:8782)
oracle.jdbc.driver.OraclePreparedStatement.setObjectInternal(OraclePreparedStatement.java:8278)
oracle.jdbc.driver.OraclePreparedStatement.setObject(OraclePreparedStatement.java:8868)
oracle.jdbc.driver.OraclePreparedStatementWrapper.setObject(OraclePreparedStatementWrapper.java:240)
weblogic.jdbc.wrapper.PreparedStatement.setObject(PreparedStatement.java:287)
org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:356)
org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:216)
org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:127)
org.springframework.jdbc.core.PreparedStatementCreatorFactory$PreparedStatementCreatorImpl.setValues(PreparedStatementCreatorFactory.java:298)
org.springframework.jdbc.object.BatchSqlUpdate$1.setValues(BatchSqlUpdate.java:192)
org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:892)
org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:1)
org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:586)
org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:614)
org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:883)
org.springframework.jdbc.object.BatchSqlUpdate.flush(BatchSqlUpdate.java:184)
com.csfb.fao.rds.rfi.common.dao.storedprocs.SaveEarlyExceptionBatchStoredProc.execute(SaveEarlyExceptionBatchStoredProc.java:93)
com.csfb.fao.rds.rfi.common.dao.EarlyExceptionDAOImpl.saveEarlyExceptionBatch(EarlyExceptionDAOImpl.java:34)
com.csfb.fao.rds.rfi.application.rulesengine.RulesEngine.saveEarlyExceptions(RulesEngine.java:302)
com.csfb.fao.rds.rfi.application.rulesengine.RulesEngine.executeRules(RulesEngine.java:209)
com.csfb.fao.rds.rfi.application.rulesengine.RulesEngine.onMessage(RulesEngine.java:97)
com.csfb.fao.rds.feeds.process.BaseWorkerMDB.onMessage(BaseWorkerMDB.java:518)
weblogic.ejb.container.internal.MDListener.execute(MDListener.java:466)
weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:371)
weblogic.ejb.container.internal.MDListener.onMessage(MDListener.java:327)
weblogic.jms.client.JMSSession.onMessage(JMSSession.java:4547)
weblogic.jms.client.JMSSession.execute(JMSSession.java:4233)
weblogic.jms.client.JMSSession.executeMessage(JMSSession.java:3709)
weblogic.jms.client.JMSSession.access$000(JMSSession.java:114)
weblogic.jms.client.JMSSession$UseForRunnable.run(JMSSession.java:5058)
weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:516)
weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

查看 ARRAY.toBytes() 方法：

```
 public byte[] toBytes()
    throws SQLException
  {
    synchronized (getInternalConnection())
    {
      return this.descriptor.toBytes(this, this.enableBuffering);
    }
  } 
```

...，它在以下方法上同步（getInternalConnection() -> getPhysicalConnection()）：

```
 oracle.jdbc.internal.OracleConnection getPhysicalConnection()
  {
    if (this.physicalConnection == null)
    {
      try
      {
        this.physicalConnection = ((oracle.jdbc.internal.OracleConnection)new OracleDriver().defaultConnection());
      }
      catch (SQLException localSQLException)
      {
      }

    }

    return this.physicalConnection;
  } 
```

defaultConnection() 执行以下操作：

```
 public Connection defaultConnection()
    throws SQLException
  {
    if ((defaultConn == null) || (defaultConn.isClosed()))
    {
      synchronized (OracleDriver.class)
      {
        if ((defaultConn == null) || (defaultConn.isClosed()))
        {
          defaultConn = connect("jdbc:oracle:kprb:", new Properties());
        }
      }
    }

    return defaultConn;
  } 
```

所以连接实例和 OracleDriver.class 对象上有同步......我看不出这怎么会死锁。为了达到需要在 OracleDriver.class 上锁定的地步，线程将已经在连接实例上拥有锁定......显然我错过了一些东西。

我们正在使用以下代码创建 ARRAY 类型：

```
public ARRAY getOracleLongArray(DataSource ds, List<Long> vals, String typeName)
        throws SQLException {
    oracle.jdbc.OracleConnection conn = (oracle.jdbc.OracleConnection) ds
            .getConnection();
    Object[] data = vals.toArray(new Object[0]);

    ARRAY mddArray = conn.createARRAY(typeName, data);
    conn.close(); // Close the extra connection made here.
    return mddArray;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:42:12.187

看起来您正在与多个线程共享该连接（通过该`defaultConnection()`方法。不要那样做，确保一次只有一个线程使用一个连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:51:17.457

马克得到了答案：我们使用的是连接池，但传递了对它的 DataSource 引用 - 每次我们创建一个 New ARRAY 对象时，它都会从 Datasource 获得一个不同的 Connection 对象（与实际 db 调用使用的对象不同），从而创建一个新的数据库连接。

我们包装了 DataSource 以始终返回相同的连接，它解决了这个问题。

谢谢

# bash - bash：在文件比较期间忽略特定字段

> ID：10190162
> 
> 赞同：0
> 
> 时间：2012-04-17T11:15:34.380
> 
> 标签：bash

我有 2 个带有以下文本的文件：

旧文件：

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/vg_livecd-lv_root
                       18G  2.4G   15G  14% /
tmpfs                 590M  276K  590M   1% /dev/shm
/dev/sda1             485M   31M  429M   7% /boot 
```

新文件

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/vg_livecd-lv_root
                       18G  2.7G   15G  14% /
tmpfs                 590M  264K  590M   1% /dev/shm
/dev/sda1             485M   31M  429M   7% /boot
/dev/sdb1             3.8G  1.1G  2.8G  28% /media/9C6F-1ECD 
```

现在在输出文件中我只想要以下行。因为这是新添加的。

```
/dev/sdb1             3.8G  1.1G  2.8G  28% /media/9C6F-1ECD 
```

但相反，我得到了以下输出，因为一个数字也从 2.4 更改为 2.7。

```
 18G  2.7G   15G  14% /
/dev/sdb1             3.8G  1.1G  2.8G  28% /media/9C6F-1ECD 
```

所以这给我带来了问题。我只想要全新添加的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:48:29.550

这可能会让你接近你想要的，

```
diff -y --suppress-common-lines oldfile newfile 
```

主要问题是它还包括您要排除的小更改。如果可以安全地假设更改很小的行将不包含“|” 用空格包围，然后我们可以删除相应的差异输出，只留下那些添加或删除的行。

```
diff -y --suppress-common-lines oldfile newfile | sed '/[ TAB][ TAB]*|[ TAB][ TAB]*/ d' 
```

其中“TAB”应该是制表符。

这将显示添加和删除的行，但有一个**重要限制：**如果添加和删除的行相邻，则 diff 将报告更改的行（带有“|”），并且此输出将被 sed 过滤器丢弃。

如果您需要添加/删除的行在文件中显示，您可以使用附加的 sed 命令从差异输出中删除 < 和 >。例如，要去掉表示添加行的 >：

```
diff -y --suppress-common-lines oldfile newfile | sed -e '/[ TAB][ TAB]*|[ TAB][ TAB]*/ d' -e 's/^[ TAB][ TAB]*>[ TAB][ TAB]*\(.*$\)/\1/' 
```

但请注意，这也会从行中删除任何前导空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:51:52.190

仅查找没有相似性的行

```
diff -y --suppress-common-lines /yourfile1 /yourfile2 | grep "<" | sed 's/  .*//g' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T22:10:31.393

首先，将您想要比较的部分*放在*最后，如下所示：

```
df -P | awk 'NR > 1 {print $1 ":" $6 "\t" $0 }' | sort >comm-test.1
df -P | awk 'NR > 1 {print $1 ":" $6 "\t" $0 }' | sort >comm-test.2 
```

然后：

```
join -t $'\t' -j 1 -o 2.2 \
  <(comm -13 \
     <(cut -f1 comm-test.1) \
     <(cut -f1 comm-test.2)) \
  comm-test.2 
```

请注意`df -P`用于确保 df 的输出不会拆分为多行（如您的示例中所示）。

顺便说一句——掩盖你的问题是非常无益的。今后请不要这样做。

# wpf - IDataErrorInfo - 首次加载视图时最初忽略错误

> ID：10190164
> 
> 赞同：13
> 
> 时间：2012-04-17T11:15:41.003
> 
> 标签：wpf, validation, idataerrorinfo, wpf-4.0

我正在尝试使用 IDataErrorInfo 验证我的模型类，如下所示。

```
//Validators
public string this[string propertyName] {
    get {
        string error = null;

        if (propertyName == "Name") {
            error = ValidateName(); 
        }
        return error;
    }
} 
```

这工作正常，除了当视图第一次加载它已经包含验证错误。首次加载视图时是否可以忽略/抑制验证错误。此外，在视图加载时以及在用户开始模型属性的数据输入之前显示错误是否是一种常见的做法。

问候，尼尔文。

**编辑：** 这就是我设置 IDataErrorInfo 的方式。

```
<TextBox Text="{Binding Name, ValidatesOnDataErrors=True}" Grid.Row="1" Grid.Column="1" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:57:47.553

我采用了以下方法并且它有效。基本上，模型应该正确地记录错误并将它们列在字典中，即使对象刚刚被实例化并且用户还没有输入任何文本。所以我没有更改我的模型代码或 IDataErrorInfo 验证代码。相反，我最初只是将 Validation.Error 模板属性设置为 {x:Null}。然后有代码连接 TextBox 的 LostFocus 事件，将 Validation.Error 模板更改回我正在使用的模板。为了实现模板的交换并将 LostFocus 事件处理程序附加到我的应用程序中的所有 TextBox，我使用了几个依赖属性。这是我使用的代码。

**依赖属性和 LostFocus 代码：**

```
 public static DependencyProperty IsDirtyEnabledProperty = DependencyProperty.RegisterAttached("IsDirtyEnabled",
             typeof(bool), typeof(TextBoxExtensions), new PropertyMetadata(false, OnIsDirtyEnabledChanged));
    public static bool GetIsDirtyEnabled(TextBox target) {return (bool)target.GetValue(IsDirtyEnabledProperty);}
    public static void SetIsDirtyEnabled(TextBox target, bool value) {target.SetValue(IsDirtyEnabledProperty, value);}

    public static DependencyProperty ShowErrorTemplateProperty = DependencyProperty.RegisterAttached("ShowErrorTemplate",
             typeof(bool), typeof(TextBoxExtensions), new PropertyMetadata(false));
    public static bool GetShowErrorTemplate(TextBox target) { return (bool)target.GetValue(ShowErrorTemplateProperty); }
    public static void SetShowErrorTemplate(TextBox target, bool value) { target.SetValue(ShowErrorTemplateProperty, value); }

    private static void OnIsDirtyEnabledChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs args) {
        TextBox textBox = (TextBox)dependencyObject;
        if (textBox != null) {
            textBox.LostFocus += (s, e) => {
                if ((bool) textBox.GetValue(ShowErrorTemplateProperty) == false) {
                    textBox.SetValue(ShowErrorTemplateProperty, true);
                }
            };
        }
    } 
```

如果 IsDirtyEnabled 依赖属性设置为 true，它使用回调将 TextBox 的 LostFocus 事件附加到处理程序。处理程序只是将 ShowErrorTemplate 附加属性更改为 true，当 TextBox 失去焦点时，这反过来会在文本框的样式触发器中触发以显示 Validation.Error 模板。

**文本框样式：**

```
<Style TargetType="{x:Type TextBox}">
    <Setter Property="Validation.ErrorTemplate" Value="{StaticResource ValidationErrorTemplate}"/>
    <Setter Property="gs:TextBoxExtensions.IsDirtyEnabled" Value="True" />
    <Style.Triggers>
        <Trigger Property="gs:TextBoxExtensions.ShowErrorTemplate" Value="false">
            <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

对于一件简单的事情来说，这似乎代码太多了，但是对于我正在使用的所有文本框，我只需执行一次。

问候，尼尔文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T07:30:01.163

尝试在视图显示后设置数据上下文。

就我而言，这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T13:18:47.247

您在 ValidateName() 方法中设置规则。您的视图只显示错误:) 我建议 name 是必填字段，应由用户填写，但您不喜欢第一次加载视图时的红色边框？

我使用两种不同的控制模板进行验证。错误模板正常的一个和一个用于必填字段（红色 *）

[这就是](http://blindmeis.wordpress.com/2012/04/16/wpf-mvvm-idataerrorinfo-validation-errortemplate/)我上次做的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T12:19:01.800

你在get中抛出异常吗？

```
public string Name
{
    get { return _name; }
    set
    {
        _name = value;
        if (String.IsNullOrEmpty(value))
        {
            throw new ApplicationException("Customer name is mandatory.");
        }
    }
} 
```

# java - twitter4j：没有路由到主机相关异常发生

> ID：10190165
> 
> 赞同：2
> 
> 时间：2012-04-17T11:15:41.143
> 
> 标签：java, twitter, twitter4j

我的应用程序使用 twitter4j lib 发送推文。但是偶尔会出现以下异常。我不知道为什么。我没有使用代理。

> status code=-1, Exception detail:No route to host 相关讨论可以在 Internet 上： [http](http://www.google.co.jp/search?q=b2b52c28) ://www.google.co.jp/search?q=b2b52c28或 [http://www.google.co.jp /search?q=1b442895](http://www.google.co.jp/search?q=1b442895) TwitterException{exceptionCode=[b2b52c28-1b442895 b2b52c28-1b44286b], statusCode=-1, retryAfter=-1, rateLimitStatus=null, featureSpecificRateLimitStatus=null, version=2.2.5} 2012-04-17 17: 50:31,320 错误 [Thread-4135 - TwitterService.java:57] 错误堆栈跟踪：没有路由到主机相关讨论可以在 Internet 上： [http](http://www.google.co.jp/search?q=b2b52c28) ://www.google.co.jp/search?q=b2b52c28或 [http ://www.google.co.jp/search?q=1b442895](http://www.google.co.jp/search?q=1b442895) 在 twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.爪哇：200）

# c# - protobuf.net 和条件序列化

> ID：10190167
> 
> 赞同：1
> 
> 时间：2012-04-17T11:15:46.853
> 
> 标签：c#, serialization, deserialization, protobuf-net

我们正在使用 protobuf.net 来序列化移动设备和后端服务之间的类，但我们现在需要根据用户的“上下文”调整发送回客户端的内容。

我们通常会通过实现 ISerializable 接口并查看上下文值来决定要序列化的内容来做到这一点。同样在构造函数中，我们将反序列化提供的值。

但似乎 ISerializable 没有为 protobuf.net 实现/支持（我明白为什么），所以我们通过采用“ShouldSerialize*”和“OnSerializing”方法解决了这个问题。然而，这确实意味着我们最终不得不将 StreamingContext 存储在每个感觉不正确的类中。我们可能会将其粘贴在全球范围内，但这也感觉不对。

有没有更好的方法来实现我们想要的，例如仅使用 protobuf.net 格式的序列化，但序列化的内容受外部提供的上下文的影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:15:33.690

这是一个很好的问题。当前支持的模式（ShouldSerialize* 等）完全从 BCL 中“按原样”借用，因此没有上下文 - 但是没有理由不能像回调一样支持参数 - 实际上，对于它支持的回调几乎任何用法（有/无上下文等） - 所以我想不出一个很好的理由不在这里支持它们。

你说得对，目前不支持它，但它可能是 - 让我知道这会很有用。

# web-services - 许多不同平台将使用的 Web 服务中的时区格式

> ID：10190170
> 
> 赞同：1
> 
> 时间：2012-04-17T11:15:53.177
> 
> 标签：web-services, time, interop, timezone, dst

我目前正在使用 .NET 开发一个 Web 服务，该服务返回有关系统中用户的信息。这个 Web 服务必须足够通用，才能被其他用 Java、PHP 等编写的系统使用。我的问题是它必须返回默认时区，我不确定应该使用什么格式来返回时区，以便其他系统可以轻松使用它。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:30:39.967

描述时区最常用的方式是“Olson”时区信息数据库：[http](http://www.iana.org/time-zones) ://www.iana.org/time-zones 。

大多数编程语言和框架都有库来基于该 zoneinfo 数据库进行日期时间计算。在某些情况下，它甚至是内置的（我知道的 PHP），在 Python 中，默认实现称为[pytz](http://pytz.sourceforge.net/)。如果您正在寻找 JavaScript 实现，这里有一个时区[检测脚本](https://bitbucket.org/pellepim/jstimezonedetect)和一个[日期时间计算脚本](https://github.com/mde/timezone-js)。

只有当您使用非常晦涩的框架/语言时，您才需要自己围绕 zoneinfo 数据库实现日期时间逻辑。

由于您正在使用 .NET，您可能会发现这个问题很有帮助：[.NET TimeZoneInfo from Olson time zone](https://stackoverflow.com/questions/5996320/net-timezoneinfo-from-olson-time-zone)。考虑使用像[noda-time](http://code.google.com/p/noda-time/)这样的库，它放弃了 .NET 的 TimeZoneInfo 以支持 Olson 时区。

更多 .NET 信息：[TimeZoneInfo vs. Olson 数据库](https://stackoverflow.com/questions/2620282/timezoneinfo-vs-olson-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:12:35.053

我建议使用 UTC 时区作为日期/时间。大多数语言/库都有将 UTC 转换为所需时区的方法。

如果您需要为用户表示实际的默认时区，请使用与 UTC 的偏移量（例如：东部时间为 -5）。

# php - MySql 条件 SQL。我的情况可能吗？

> ID：10190171
> 
> 赞同：1
> 
> 时间：2012-04-17T11:15:55.590
> 
> 标签：php, mysql, sql, conditional

让我先设置一下情况。

我有一个带有 X 字段的“用户”表，除了“可见性”之外，这些字段对我的问题并不重要。Visibility 是一个 tinyint，值的含义如下（0 = 对所有人可见，1 = 仅对朋友可见，2 = 不可见）。

我也有一张朋友桌`(id, user_id, target_user_id)`。`user_id`是朋友`target_user_id`。到目前为止足够简单吧？

这是它变得粘稠的地方。我正在编写一个 PHP API，我的类方法看起来像这样：

```
public function getUsers($requester, $page, $num) {} 
```

*   这`$requester`是请求用户的人的用户 ID
*   是`$page`分页页码
*   这`$num`是每页的项目数

我想在 SQL 中做的是`$num`从 users 表中获取用户，如果他们的可见性字段为 = 0 或 1。但是，如果可见性标志为 1，我需要确保用户 id 和 $requester 是朋友表中的朋友并且只有当他们是朋友时才返回该用户。

我想在我得到结果后使用 PHP 过滤可见性，但是如果我要求 5 条记录并且一个或多个用户的可见性设置为 1 并且不是请求者的朋友，那么分页（限制）将会被搞砸. 这几乎必须完全通过 sql 完成。

可能的？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:46:24.670

尝试创建一个与用户具有相同结构的临时表“temp”。

```
select * into temp From users where visibility=0 or visibility=1;
Select * from temp, friends where (temp.visibility=0) or (temp.user_id = friends.target_user_id); 
```

不要忘记清空临时表。

我还没有尝试过第二个查询，让我知道你得到了什么输出。

```
select * from users, friends where (users.visibility=0) or (users.visibility=1 and users.user_id = friends.target_user_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:36:48.337

我认为您可以为此使用 LEFT JOIN .. 类似

```
"SELECT * 
FROM users t1 
LEFT JOIN friends t2 ON t2.user_id=t1.id AND t1.visibility=1
INNER JOIN user t3 ON t3.id=t2.target_user_id
WHERE t1.visibility=0 OR t1.visibility=1
LIMIT ".($page*$num).",".$num 
```

# php - 直接显示方法返回的数组的值

> ID：10190174
> 
> 赞同：2
> 
> 时间：2012-04-17T11:16:13.680
> 
> 标签：php, oop

是否可以在一行中调用返回 array() 的方法并直接获取该数组的值？

例如，而不是：

```
$response = $var->getResponse()->getResponseInfo();
$http_code = $response['http_code'];
echo $http_code; 
```

做这样的事情：

```
echo $var->getResponse()->getResponseInfo()['http_code']; 
```

此示例不起作用，我收到语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:18:12.813

如果您使用 >= PHP 5.4，则可以。

否则，您将需要使用新变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:34:39.670

您可以做的是将 直接传递给您的函数。你的函数应该是这样的，如果一个变量名被传递给它，它应该是那个变量的值，否则一个包含所有变量值的数组。

你可以这样做：

```
<?php
// pass your variable to the function getResponseInfo, for which you want the value. 
echo $var->getResponse()->getResponseInfo('http_code');
?> 
```

你的功能：

```
<?php
// by default, it returns an array of all variables. If a variable name is passed, it returns just that value.
function getResponseInfo( $var=null ) {
   // create your array as usual. let's assume it's $result
   /*
       $result = array( 'http_code'=>200,'http_status'=>'ok','content_length'=>1589 );
   */

   if( isset( $var ) && array_key_exists( $var, $result ) ) {
      return $result[ $var ];
   } else {
      return $result;
   }
}
?> 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:37:11.487

语言本身不支持数组。

**如果您可以更改`getResponseInfo()`返回的内容：**

您可以创建简单的类，它将数组作为构造函数参数。然后定义[神奇的getter](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)，它将只是从实例数组中提取键

```
function __get($key)
{
  return @content[$key]
} 
```

然后你就可以做

```
echo $var->getResponse()->getResponseInfo()->http_code;
// or
echo $var->getResponse()->getResponseInfo()->$keyWhichIWant; 
```

我写的只是提议。真正的`__get`方法应该有一些检查是否存在等等

# windows-phone-7 - 当我在 wp7 中第二次打开弹出窗口时没有清除列表框项目

> ID：10190176
> 
> 赞同：-2
> 
> 时间：2012-04-17T11:16:22.990
> 
> 标签：windows-phone-7

我在弹出窗口中使用了列表框。当我第二次导航到弹出窗口时，列表框项目未清除。如何清除列表框项目。请帮助我完成此查询。这是我用过的代码

```
 <ListBox Background="LightYellow" ItemsSource="{Binding Mode=OneWay, Path= MyPrintingSheetItems}"  Grid.ColumnSpan="2" Grid.Row="6"  Height="270" HorizontalAlignment="Stretch" Margin="0,0,0,0" Name="ListBox2" VerticalAlignment="Top" Width="440" >
          <ListBox.ItemContainerStyle>
                                   <Style TargetType="ListBoxItem">
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"></Setter>
                                    </Style>
                                </ListBox.ItemContainerStyle>
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderThickness="0,0,0,3" BorderBrush="pink" >

                                    <Grid >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="170"/>
                                    <ColumnDefinition Width="90"/>
                                    <ColumnDefinition Width="90"/>
                                    <ColumnDefinition Width="90"/>
                                </Grid.ColumnDefinitions>
                                        <TextBlock Name="lblps" Height="50" Text="{Binding PrintingSheet}" FontSize="26" Grid.Column="0"  VerticalAlignment="Center" Margin="0,0, 0, 0" HorizontalAlignment="Center" Foreground="Black" />
                                        <TextBlock Height="50" Name="lblnrml" Text="{Binding Normal}" FontSize="26" Grid.Column="1" Margin="0,0, 0, 0" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="Black" />
                                        <TextBlock Height="50" Name="lblhvy" Text="{Binding Heavy}" FontSize="26" Grid.Column="2" Margin="0,0, 0, 0" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="Black" />
                                        <TextBlock Height="50" Name="lblmetal" Text="{Binding Metal}" FontSize="26" Grid.Column="3" Margin="0,0, 0, 0" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="Black" />

                                        </Grid>
                                </Border>

                                </DataTemplate>

                            </ListBox.ItemTemplate>
                        </ListBox> 
```

按钮点击事件代码：

```
Private Sub btnAdd_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)

        PopUp.IsOpen = True
        btnAdd.IsEnabled = False
        btnBack.IsEnabled = False
        btnDelete.Visibility = Windows.Visibility.Collapsed
        txtLength.Text = ""
        txtwidth.Text = ""
        txtsize.Text = ""
        CheckBox1.IsChecked = False
        ListBox1.IsEnabled = False
        TitleLayOut.Opacity = 0.5
        LayoutRoot.Background = BrushFromColorName("#AA000000")
        txtSearch.IsEnabled = False
        btnSearch.IsEnabled = False
        ListBox1.Opacity = 0.5

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:29:39.207

当您打开弹出窗口时，请通过

```
listBox1.Items.Clear(); 
```

# wpf - 内容属性（绑定到布尔值）上的 WPF 触发器不起作用

> ID：10190178
> 
> 赞同：2
> 
> 时间：2012-04-17T11:16:35.280
> 
> 标签：wpf, binding

我有一个按钮控件，它的 Content 属性绑定到我的视图模型上的布尔属性。该按钮用于打开和关闭工业机器上的阀门，通过异步 WCF 调用执行。当服务返回时，它会更新布尔属性，进而触发按钮视觉状态的更改。这是按钮 xaml：

```
<Button Command="{Binding Path=OpenCloseValveCommand}"
        Content="{Binding Path=ValveIsOpen}"
        Style="{StaticResource ResourceKey=OnOffButtonStyle}"> 
```

阀门打开时按钮必须为绿色，阀门关闭时按钮必须为红色并带有十字。这是样式 xaml：

```
<Style TargetType="Button" x:Key="OnOffButtonStyle" >
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Canvas>
                    <Rectangle x:Name="_rect" Fill="Red" Stroke="Black" Width="30" Height="30"></Rectangle>
                    <Path x:Name="_path" Data="M0,0 L30,30 M0,30 L30,0" StrokeThickness="1" Stroke="Black" />
                </Canvas>
                <ControlTemplate.Triggers>
                    <Trigger Property="Content" Value="true">
                        <Setter TargetName="_rect" Property="Fill" Value="Lime" />
                        <Setter TargetName="_path" Property="Visibility" Value="Hidden" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

不幸的是，触发器似乎没有触发。我猜这与绑定到布尔类型的按钮内容有关 - 我是否需要使用“true”以外的东西作为触发值？（如果我将 viewmodel 属性更改为整数并使用 0 或 1，并且触发器值为“1”，则触发器会起作用）。

提前致谢

安迪

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T11:50:48.563

您可以明确指定类型：

```
<Window ...
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        ...>

<Trigger Property="Content">
    <Trigger.Value>
        <sys:Boolean>True</sys:Boolean>
    </Trigger.Value>
    <Setter TargetName="_rect" Property="Fill" Value="Lime" />
    <Setter TargetName="_path" Property="Visibility" Value="Hidden" />
</Trigger> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:46:06.357

使用 a `DataTrigger`：

```
<Button Command="{Binding Path=OpenCloseValveCommand}"
        Style="{StaticResource ResourceKey=OnOffButtonStyle}">

<Style TargetType="Button" x:Key="OnOffButtonStyle">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Canvas>
                    <Rectangle x:Name="_rect" Fill="Red" Stroke="Black" Width="30" Height="30"></Rectangle>
                    <Path x:Name="_path" Data="M0,0 L30,30 M0,30 L30,0" StrokeThickness="1" Stroke="Black" />
                </Canvas>
                <ControlTemplate.Triggers>
                    <DataTrigger Binding="{Binding ValveIsOpen}" Value="True">
                        <Setter TargetName="_rect" Property="Fill" Value="Lime" />
                        <Setter TargetName="_path" Property="Visibility" Value="Hidden" />
                    </DataTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# sql - 从 SQL Server 2008 中提取的 RTF

> ID：10190186
> 
> 赞同：2
> 
> 时间：2012-04-17T11:16:58.913
> 
> 标签：sql, sql-server-2008, rtf, bcp

我有一个要提取的列，但遇到了问题！该列存储为 ntext 类型并包含一个 RTF 文档，因此看起来像这样：

```
{\rtf1\ansi\ansicpg1252\uc1\deff0{\fonttbl  {\f0\fnil\fcharset0\fprq2 Arial;}  {\f1\fswiss\fcharset0\fprq2 Arial;}  {\f2\froman\fcharset2\fprq2 Symbol;}}  {\colortbl;\red0\green0\blue0;\red255\green255\blue255;}  {\stylesheet{\s0\itap0\nowidctlpar\f0\fs24 [Normal];}{\*\cs10\additive Default Paragraph Font;}}  {\*\generator TX_RTF32 15.0.530.502;}  \deftab1134\paperw11909\paperh16834\margl1138\margt1138\margr1138\margb1138\widowctrl\formshade\sectd  \headery720\footery720\pgwsxn11909\pghsxn16834\marglsxn1134\margtsxn1134\margrsxn1134\margbsxn1134\pard\itap0\nowidctlpar\plain\f1\fs20 Stephan Bos  28/11/2011 11:19:55\par\par Sold in guy. He likes him, feedback this afternoon.\par Will send him the CV and also our terms.\par Made him aware of our fees.\par } 
```

但我希望将其提取回（rtf 或 txt，我并不介意）我尝试使用 BCP，它已成功提取文档，但它们最终与列完全相同，但在每个字符而不是我所期望的（上面的例子最终会读到类似的内容：

```
Stephan Bos  28/11/2011 11:19:55
Sold in guy. He likes him, feedback this afternoon.
Will send him the CV and also our terms.
Made him aware of our fees. 
```

我正在使用（正在提取）的 BCP 提取如下：

```
set nocount on;
Declare @sql varchar(1000);
declare @noteid int;
declare xx1 cursor for select nic.NotebookItemId from NotebookItemContent nic
inner join NotebookLinks nl on nl.NotebookItemId = nic.NotebookItemId
inner join NotebookItems ni on ni.NotebookItemId = nic.NotebookItemId
where nl.clientid = 1235074
AND ni.NotebookTypeId = 56;
open xx1;
fetch xx1 into @noteid;
while (@@fetch_status = 0)
begin
set @sql = 'BCP "SELECT memo FROM Monarch_Pronet_ITOIL.dbo.notebookitemcontent where notebookitemid=' + cast(@noteid as varchar) + 
'" QUERYOUT \\bhamws475\docs\' + cast(@noteid as varchar) + '.rtf -T -f \\bhamws475\docs\bcp.fmt -S ' + @@SERVERNAME
EXEC master.dbo.xp_CmdShell @sql
fetch xx1 into @noteid;
end;
close xx1;
deallocate xx1; 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:37:10.017

我想我现在明白了 - 问题是 BCP 保存的 RTF 不被 Word 识别为 RTF 文件 - 它作为纯文本文件打开。

这是因为导出的文件是 Unicode 格式（您可以看到，屏幕截图中每个字符后面都有一个空格）。

解决方案是告诉 bcp 不要以 Unicode 格式保存 - 我认为这可以通过`-c`开关或在格式文件中指定所需的字符集来完成。

# c# - 实体框架代码优先 ASP.Net 和 DbContext

> ID：10190196
> 
> 赞同：4
> 
> 时间：2012-04-17T11:17:21.370
> 
> 标签：c#, asp.net-mvc, entity-framework, code-first, dbcontext

论坛潜伏已久，有一个问题基于MVC音乐商店教程（http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4）我我正在关注。

本教程使用 EF Code First 设置 CE 数据库。然而，作为类文件有专辑、流派和艺术家三个模型。现在 1 Album 可以有很多 Artists 但是代码只提到了流派和艺术家：

```
using System.Data.Entity;

namespace MvcMusicStore.Models
{
    public class MusicStoreEntities : DbContext
    {
        public DbSet<Album> Albums { get; set; }
        public DbSet<Genre> Genres { get; set; }
    }
} 
```

为什么这段代码没有提到：

```
public DbSet<Artist> Artists { get; set; } 
```

感谢阅读。我希望我不会太愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:22:15.340

因为专辑中有艺术家，所以我们可以按专辑访问艺术家：

```
namespace MvcMusicStore.Models
{
    public class Album
    {
        public int      AlbumId     { get; set;
}
        public int      GenreId     { get; set; }
        public int      ArtistId    { get; set; }
        public string   Title       { get; set; }
        public decimal  Price       { get; set; }
        public string   AlbumArtUrl { get; set; }
        public Genre    Genre       { get; set; }
        public Artist   Artist      { get; set; }
    }
} 
```

# sql-server - 生成脚本时出错

> ID：10190198
> 
> 赞同：-1
> 
> 时间：2012-04-17T11:17:36.433
> 
> 标签：sql-server, sql-server-2008

我已经在 sqlserver2008 r2 中创建了我的数据库，我想将其降级为 sqlserver2005。我在生成脚本时将“服务器版本的脚本”选项设置为 2005，但是我在包含日期数据类型的列的表中出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:30:20.013

只需手动将脚本从 更改`date`为`datetime`或`smalldatetime`。不幸的是，SQL Server 不会自动为数据类型执行此操作。

# matlab - 极线几何中的预期点不正确

> ID：10190199
> 
> 赞同：0
> 
> 时间：2012-04-17T11:17:39.803
> 
> 标签：matlab, geometry, computer-vision, projection, perspectivecamera

我有 2 台摄像机（摄像机 2 正在平移摄像机 1）及其投影矩阵**P1**和**P2**。他们拍摄了一张图像，**I1**（相机 1）和**I2**（相机 2）512x512。

```
P1 =

-510.0686  -12.9401 -259.3765 -130.4363
-7.6701 -517.0217 -257.2912  -66.5024
-0.0325   -0.0518   -1.0108   -0.4847

P2 =

-736.7330  -13.5206 -388.4970 -828.1644
-12.1721 -749.3048 -375.2760 -560.6533
-0.0291   -0.0623   -1.4690   -3.2141 
```

我计算基本矩阵 F：

```
F =

1.0e+003 *

0.0000    0.0033   -0.6047
-0.0033    0.0000    0.7938
0.5973   -0.8252    5.9205 
```

**然后我使用 RANSAC、 point1**和**point2**找到了两个带有 SURF 的图像之间的匹配点。

```
point1 =

235.3386
135.3108
1.0000

point2 =

242.7049
133.9451
1.0000 
```

我试图计算极线并通过point2

```
epLineCam2 = F * punto1;

epLineCam2 =

1.0e+004 *

-0.0158
0.0028
3.4824 
```

所以**point2**应该与 I2 中的预期点**epoint**非常相似，使用极线几何计算（因为 SURF 使用了很多近似值）。

正如您在 8.2 页上看到的那样。223 在[Hartley & Zisserman 的书](http://www.robots.ox.ac.uk/~vgg/hzbook/hzbook2/HZepipolar.pdf)上，

```
x' = Hπ * x; 
```

其中 x' 是*epoint*，而 x 是*point1*。

我的*Hπ*是：

```
Hpi = P2 * pinv(P1); 

Hpi =

1.4397   -0.1502  296.2940
-0.0008    1.3476  206.4950
-0.0001   -0.0006    2.5772 
```

所以*epoint*是：

```
epoint =

614.7787
388.6410
2.4873 
```

我记得，图像大小是 512x512，所以*epoint.x*在图像之外......正如你所看到的，epoint 与 point2 不同（很多不同）

```
point2 =

242.7049
133.9451
1.0000 
```

我的问题是，**为什么？我在哪里犯了一些错误？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T02:04:50.710

由于您还没有发布任何 matlab 代码，因此很难说出您到底在哪里犯了错误，但我可以给您一些建议：

一方面，SURF 找到的匹配点不一定是正确的点。您是否检查过是否`point1`实际匹配`point2`，例如仅将它们绘制到图像上？

此外，我确实知道您是如何获得投影矩阵的，但如果它们是正确的，则以下条件确实应该成立：

```
x' = P2 * pinv(P1) * x 
```

您可以通过绘制 x 和 x' 轻松验证您的投影矩阵是否正确，并查看它们是否匹配点。注意 x' 和 x 是[齐次坐标](http://en.wikipedia.org/wiki/Homogeneous_coordinates)。本说明还让您了解为什么`epoint`与`point2`. 如果将向量 epoint 除以其 z 坐标，您将得到更类似于 point2 的结果：

```
 614.7787     247.1671
epoint = 388.6410  =  156.2502
         2.4873       1.0000 
```

# mysql - 正确分发带有数据库的 Java 应用程序

> ID：10190202
> 
> 赞同：4
> 
> 时间：2012-04-17T11:17:56.293
> 
> 标签：mysql, distribution, java

我有这个 Java 应用程序，它使用我想要分发的 MySql 数据库。我担心的是，为了分发这个应用程序，我需要假设目标系统同时安装了 JRE 和 MySql Server。

有什么方法可以将我的应用程序与 JRE 和 MySql 服务器捆绑在一起，以便如果它们尚未出现在系统上，我的应用程序可以安装它们然后运行应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T11:22:28.023

不，由于许可，您不应该捆绑它们并将它们作为安装的一部分提供。
这适用于 Oracle JRE 和 MySQL。

**在@Stephen C 发表评论后更新。**
在某些情况下，似乎可以重新分配 JRE。尽管出于 Stephen C 回答中解释的原因，这是不明智的。我已经看到这些问题在实践中出现。
**结束更新**

我不确定什么是“最安全”的路径（与许可问题相关的最安全）。
也许安装程序将它们作为所需组件的一部分当场下载是可以的。如果我在这方面错了，这里的朋友可以纠正我

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T11:26:47.780

只要您遵循某些条件，您就可以将 JRE 与 Java 应用程序捆绑在一起。（如果我没记错的话，这包含在您下载 JRE 时同意的标准 Sun/Oracle 许可证中。我认为该短语是“二进制分发”或“二进制重新分发”。）

**更新**

我刚刚查了一下，我的记忆是正确的。[请参阅“Java SE 平台产品和 JavaFX 的 Oracle 二进制代码许可协议”的](http://www.oracle.com/technetwork/java/javase/terms/license/index.html)补充许可条款部分。（C 段最直接适用于您的场景。）正如我上面所说，条件适用。

**结束更新**

我不相信你被允许捆绑免费版本的 MySQL。

* * *

就个人而言，我建议 AGAINST 对 Java 执行此操作，因为：

1.  它夸大了可分发的大小。
2.  它用额外的 JRE 副本填充用户的光盘。
3.  如果需要修补用户（无意中）安装的捆绑 JRE，则会出现问题。
4.  您让（老练的）用户难以选择要使用的 Java 版本。

# facebook - 为什么用户必须是管理员才能添加选项卡？

> ID：10190203
> 
> 赞同：2
> 
> 时间：2012-04-17T11:17:57.673
> 
> 标签：facebook

是否可以在不成为页面管理员的情况下添加选项卡。我有一个应用程序，我希望用户能够从选项卡添加和打开应用程序。我想我需要的只是

[https://www.facebook.com/dialog/pagetab?app_id=1234567890&redirect_uri=https://myiframelocation.site.com](https://www.facebook.com/dialog/pagetab?app_id=1234567890&redirect_uri=https://myiframelocation.site.com)

但这总是会出现，`You must be the admin of at least one Facebook Page to perform the requested action.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:35:41.317

该[对话框](https://developers.facebook.com/docs/reference/dialogs/add_to_page/ "https://developers.facebook.com/docs/reference/dialogs/add_to_page/")仅用于将应用程序（app_id）添加到 facebook 页面，而不是个人（个人）时间线/配置文件。

如果您查看文档，您会看到出现的对话框要求您选择要添加应用程序的[Facebook 页面](https://www.facebook.com/help?page=255100294550008 "https://www.facebook.com/help?page=255100294550008")，因此您需要成为至少一个 Facebook 页面的管理员才能添加应用程序。

# matlab - 拜耳模式 - 双线性插值 - 如何？

> ID：10190209
> 
> 赞同：0
> 
> 时间：2012-04-17T11:18:28.133
> 
> 标签：matlab

我有一个拜耳模式，我必须通过编写自己的双线性插值实现来用 matlab 去马赛克。到目前为止，我所读到的内容往往是不准确的。所以我想问一下我是否做对了（我的拜耳模式的结果朝着正确的方向发展，但它仍然有一些颜色缺陷，所以我认为我的算法不正确）

我认为当它位于绿色值的字段上时出现错误。

```
If I am on green:
red = value of the field over and below my current pixel divided by 2
blue = the pixel to my left and to my right divided by 2 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:30:04.687

您是否考虑到绿色像素实际上有两种不同的情况？如果像素位于红色行上，则红色像素将位于绿色像素的左侧和右侧。如果它在蓝色行上，则红色像素将位于绿色像素的上方和下方。如果您的算法总是假设红色像素在上方和下方，您将混合蓝色列的蓝色和红色通道。

# node.js - Heroku Logs - 错误消息中提到的打开日志

> ID：10190213
> 
> 赞同：1
> 
> 时间：2012-04-17T11:18:49.403
> 
> 标签：node.js, logging, error-handling, heroku

我正在将 node.js 应用程序部署到 heroku（雪松堆栈）

我已经像这样设置了 NODE_ENV：

> heroku 配置：添加 NODE_ENV=production

然后我做：

> git推heroku

但是，启动后（我有一个 console.log 生成第一个日志条目）应用程序崩溃。

我跑：

> heroku 日志

并得到以下错误。

如何打开它所指的 /app/log/production.log？

```
app[web.1]: listening on port 32168 within production environment
app[web.1]: 
app[web.1]: events.js:48
app[web.1]:         throw arguments[1]; // Unhandled 'error' event
app[web.1]:                        ^
app[web.1]: Error: ENOENT, open '/app/log/production.log'
heroku[web.1]: Process exited with status 1
heroku[web.1]: State changed from starting to crashed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:09:37.547

您收到的错误意味着它正在尝试打开“/app/log/production.log”并且无法这样做。因此，找出正在尝试此日志记录的位置并禁用或更改它。

根据 Heroku 的说法，您应该只是将您的应用程序日志发送到 STDOUT：

[https://devcenter.heroku.com/articles/logging](https://devcenter.heroku.com/articles/logging)

所以一个 console.log 就足够了。

# url-routing - 什么是客户端路由以及如何使用它？

> ID：10190215
> 
> 赞同：22
> 
> 时间：2012-04-17T11:18:55.550
> 
> 标签：url-routing, client-side

如果有人能回答以下问题，我会很高兴

1.  它是如何工作的？
2.  为什么有必要？
3.  它有什么改进？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-06T18:58:52.390

客户端路由与服务器端路由相同，但它是在浏览器中运行的。

在一个典型的 Web 应用程序中，您有几个页面映射到不同的 URL，每个页面都有一些逻辑和一个模板，然后呈现。

客户端路由只是在浏览器中运行此过程，使用 JavaScript 作为逻辑和一些基于 JS 的模板引擎或其他此类方法来呈现页面。

通常它用于单页应用程序，其中服务器端代码主要用于提供客户端代码通过 Ajax 使用的 RESTful API。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-06T09:42:34.817

我试图构建一个单页应用程序并开始了解客户端路由。

通过实现客户端路由，我能够实现以下目标

1.  浏览器中的前后按钮开始适用于我的单页 JavaScript 应用程序。这在从移动浏览器访问页面时非常重要。
2.  用户能够添加书签/共享以前不可能的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-09T08:12:01.200

我知道现在已经很晚了，但我有一些关于客户端路由（CSR）如何工作的信息。这个答案并没有尝试提供客户端路由的完整 js 实现，而是试图阐明哪些概念将帮助您实现自己的一个。确实，当用户单击锚标记时，浏览器会向服务器发送请求。但是我们将能够拦截事件并阻止它的默认行为，即使用“event.preventDefault();”向服务器发送请求。下面是 React 路由器网页的片段。

```
<a
  href="/contact"
  onClick={event => {
    // stop the browser from changing the URL and requesting the new document
    event.preventDefault();
    // push an entry into the browser history stack and change the URL
    window.history.pushState({}, undefined, "/contact");
  }}
/> 
```

聆听前进/后退按钮的点击也很重要。这可以通过，

```
window.addEventListener("popstate", () => {
  // URL changed!
}); 
```

但是看看上面的两个片段，您可以想象如何实现 CSR。还有更多。这就是为什么存在像 React Router 这样的库并且像 Angular 这样的 Web 框架默认提供 CSR 的原因。

如果您想了解更多信息，请访问下面的链接，它将进入您的 react 路由器的概念页面。

[https://reactrouter.com/docs/en/v6/getting-started/concepts](https://reactrouter.com/docs/en/v6/getting-started/concepts)

此外，如果您想更深入地了解该主题，您可以查看 Angular 路由器的代码。比较这两种实现将提供更多的见解。

# embed - html4视频嵌入

> ID：10190222
> 
> 赞同：2
> 
> 时间：2012-04-17T11:19:28.610
> 
> 标签：embed, html4

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head></head>
<body>
<embed width="420" height="345" src="video.wmv" type="application/x-shockwave-flash"></embed>
</body>
</html> 
```

我正在尝试在 html 页面中嵌入视频，视频文件位于本地文件夹中，并且是 wmv 格式。它不工作。我已经使用了上面提到的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T09:00:26.243

使用任何转换器将视频转换为 SWF 格式。然后给出那个视频的链接。它会工作

# android - SoundCloud Explicit Intent 共享：设置“客户端 ID”

> ID：10190229
> 
> 赞同：1
> 
> 时间：2012-04-17T11:20:11.697
> 
> 标签：android, soundcloud

我目前正在使用 SoundCloud Explicit Intent 共享机制，如下所述：

```
https://github.com/soundcloud/android-intent-sharing/wiki 
```

我尝试模拟此处提供的示例代码中可以看到的内容：

```
https://github.com/soundcloud/android-intent-sharing/blob/master/src/com/soundcloud/android/examples/intent/Record.java 
```

一切正常，**但这** [部分](https://github.com/soundcloud/android-intent-sharing/blob/master/src/com/soundcloud/android/examples/intent/Record.java#L167)。

发生的事情是字符串

```
 "soundcloud:created-with-client-id=" + CLIENT_ID 
```

bit 只是在轨道的标签中结束，最终没有 CLIENT_ID 被轨道页面上的实际应用程序名称替换（应用程序已经注册并且我有一个 client_id）。

有任何想法吗？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:34:45.853

我们需要标签中的客户端 ID，这样我们就不会丢失“真实”的 client_id 信息 - 但是它并不用于在界面中实际显示应用程序的名称。不过，这可能会改变。

请参阅[https://github.com/soundcloud/android-intent-sharing/wiki/Explicit-intent-sharing#wiki-preserving_client_id](https://github.com/soundcloud/android-intent-sharing/wiki/Explicit-intent-sharing#wiki-preserving_client_id)

# jquery-mobile - 滚动导航栏

> ID：10190236
> 
> 赞同：2
> 
> 时间：2012-04-17T11:20:54.077
> 
> 标签：jquery-mobile, navigation, horizontal-scrolling, blackberry-webworks

我是移动 Web 框架开发的新手，希望获得有关为我的 BlackBerry 应用程序实现导航栏的建议。我需要在屏幕顶部有一个固定的导航栏，但是是滚动的。我查看了 jQuery Mobile，但它最多允许 5 个项目。如果更多，则在下面添加另一行。我需要这样的东西：

[http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Paged-navbar-at-the-top-of-the-page/td-p/1671709](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Paged-navbar-at-the-top-of-the-page/td-p/1671709)

提前致谢。

# machine-learning - 使用 WEKA API 的 ID3 可视化

> ID：10190241
> 
> 赞同：-4
> 
> 时间：2012-04-17T11:21:10.067
> 
> 标签：machine-learning, data-mining, weka

如何使用 WEKA API 生成 ID3 的图形可视化？我的意思是以编程方式，使用 Java 和 WEKA API，而不是使用 WEKA 应用程序本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:32:00.493

Weka API 可以与 Java 一起使用，检查[这个](http://www.cs.waikato.ac.nz/~ml/weka/)

在这个网站上检查页面左侧的杂项代码链接。

不仅如此，您还可以将 Weka 与其他语言一起使用。

# mysql - SQL - 如何从内部语句中选择 TOP 5

> ID：10190244
> 
> 赞同：0
> 
> 时间：2012-04-17T11:21:14.520
> 
> 标签：mysql, sql, select

我有以下查询正常工作。

```
 SELECT * 
    FROM (
         SELECT * 
         FROM table 
         WHERE name IS NULL 
         ORDER BY date DESC 
         LIMIT 20
         ) AS T 
    ORDER BY date ASC; 
```

我想要的是选择该 sql 选择查询的前 5 条记录。因此，根据我阅读的帖子，我只需要添加 TOP 5。请参见下文：

```
 SELECT TOP 5 * 
        FROM (
             SELECT * 
             FROM table 
             WHERE name IS NULL 
             ORDER BY date DESC 
             LIMIT 20
             ) AS T 
        ORDER BY date ASC; 
```

不幸的是，mysql 告诉我存在语法错误，但我不明白。预先感谢您的回复。干杯。马克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:25:08.347

只需添加另一个限制..

```
 SELECT * 
    FROM (
         SELECT * 
         FROM table 
         WHERE name IS NULL 
         ORDER BY date DESC 
         LIMIT 20
         ) AS T 
    ORDER BY date ASC
    LIMIT 5; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T11:25:47.863

并非所有数据库都支持 TOP 子句

因为它只是为了限制结果的数量，你可以使用 LIMIT

```
 SELECT  * 
    FROM (
        SELECT * 
        FROM table 
        WHERE name IS NULL 
        ORDER BY date DESC 
        LIMIT 20
    ) AS T 
    ORDER BY date ASC
    LIMIT 5; 
```

# c# - 网页浏览器控制文件似乎不完整

> ID：10190245
> 
> 赞同：0
> 
> 时间：2012-04-17T11:21:19.343
> 
> 标签：c#, vb.net

我在我的程序中使用 webbrowser 控件，但是当导航到一个站点后，我尝试使用 webbrowser 的文档获取一些元素（如 getelementbyid ...）我注意到缺少一些元素。

我知道元素是由一些 javascript 动态插入到页面中的。

我搜索了获取这些元素的方法，并尝试让它们注入要在页面中执行的 javascript，并通过 window.external 方法返回一些元素（或仅通过警报尝试），但即使执行此脚本，它们也只会返回结果与原始代码中文档上的方法相同。

有一种方法可以以某种方式访问​​我的程序中的这个“不可见”元素，就像我在 Internet Explorer 中按 F12 访问它们一样？谢谢你的回答，对不起我的床英语。

这是我的代码：

```
 private void button2_Click(object sender, EventArgs e)
    {
        //injecting and executing my javascript code
        HtmlElement head = webBrowser1.Document.GetElementsByTagName("head")[0];
        HtmlElement scriptEl = webBrowser1.Document.CreateElement("script");
        IHTMLScriptElement element = (IHTMLScriptElement)scriptEl.DomElement;
        element.text = "function sayHello() {  window.external.f1(document.getElementsByTagName('html')[0].innerHTML); }";
        head.AppendChild(scriptEl);
        webBrowser1.Document.InvokeScript("sayHello");

        String  v;
        System.IO.StreamWriter file = new System.IO.StreamWriter("c:\\test.txt");
        foreach (HtmlElement k in webBrowser1.Document.GetElementsByTagName("html"))
        {
          v=  k.OuterHtml;
          file.WriteLine(v);
        }

        file.Close();

    }
    [ComVisible(true)]
    public class MyScript {
    //function called by the javascript    
    public void f1(string s)
    {
        System.IO.StreamWriter file = new System.IO.StreamWriter("c:\\test2.txt");
        file.WriteLine(s);
        file.Close();
    }
    } 
```

在执行结束时，test 和 test2 都具有相同的 html，但缺少某些元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:57:21.220

您应该更具体地提出您的问题，并在此处列出您遇到问题的代码。也许您没有访问文档的正确部分

# asp.net-mvc-3 - MVC DDD 和业务逻辑抛出错误

> ID：10190252
> 
> 赞同：3
> 
> 时间：2012-04-17T11:22:01.203
> 
> 标签：asp.net-mvc-3, domain-driven-design, try-catch, business-logic, business-rules

我已经阅读了 scott millett 的专业 asp.net 设计模式一书，在他的示例中，他在 Validate() 方法中验证了他的业务逻辑，如果任何破坏的规则被破坏，它们将被添加到集合中，并且服务层调用一个方法该模型称为 GetBrokenRules()。

现在我还阅读了几本关于 DDD 的书籍、博客和论坛，其中说在 DDD 中对象永远不应该进入无效状态。

我看到的所有关于 DDD 的示例都在业务规则被破坏时抛出错误，而不是传回一组被破坏的规则。我什至下载了 scott millett 的最新源代码，他现在更改了他的代码，该代码现在抛出错误，而不是传回被破坏的规则列表。我还看到了与其他 DDD 代码示例相同的方法。

我正在与一个团队成员进行辩论，他认为抛出错误是耗费资源的，我们不应该**抛出**错误，而是像我们目前所做的那样返回一组被破坏的规则。然而，通过这样做，我们传递了一个无效的对象，因为它有不可靠的数据，我们只在最后检查它的破坏规则。

我只是在想其他人对这个问题的看法。我们是否应该在业务规则失败时立即抛出错误？如果是这样，您能否强调这样做的任何利弊。我不知道 .net 中抛出错误的资源成本有多大，所以我不能反对这一点，但我想知道这是否也是个人意见而不是编码标准的问题。

麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:26:43.120

*异常只有在实际*抛出时才昂贵。

由于您应该事先验证逻辑，因此异常应该很少见。如果不是这种情况，那么你做错了。

到目前为止，异常是通知模型处于无效状态的最佳机制。如果应用程序不终止，它们需要显式处理。

使用错误集合/返回值不是一个好习惯，因为这些*可以*（并且很多时候）被使用代码忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:34:23.020

@Oded 所说的完全正确。

然而，还有另一种处理验证的方法，不会抛出异常，也不会传递无效对象。简单地说，您总是通过工厂方法创建对象。如果一切正常，则返回一个实例，否则返回 null。当然，这意味着您必须在创建对象时检查一次 null ，但仅此而已。工厂方法（可以是服务的一部分）可以将 IValidationDictionary（不是 BCL 接口）作为参数，工厂可以在其上设置错误。但是我们在这里只讨论来自用户的输入数据（格式验证）。这里没有商业规则。如果对象将在其状态无效的上下文中使用，则它必须抛出异常。

您可以通过在对象上或其聚合根上使用方法（如 CanDoThat()）来避免 99%。如果 object.CanDoThat(context) 这样做并避免异常。如果由于并发性而同时发生变化，则可能会触发异常。

我通常有以下工作流程：

*   控制器层的用户输入验证（这是应用程序的反腐败层）。这里只处理数据格式。
*   一旦数据有效，就会向前发送以进行处理（通常通过命令处理程序）
*   在处理时，我询问聚合根是否可以执行特定操作。如果可以，一切都会向前发展。
*   如果不能，则有2种情况：

    1.  很可能出现了错误，例如错误，因此此处适合例外（这是 99% 的情况）。
    2.  在这种情况下，这是一个有效的响应，所以它被简单地忽略了。
*   当然，您可能会遇到聚合根级别一切正常的情况，但由于数据库约束，它在存储库级别失败。这意味着存储库会抛出一个异常，我会处理它（因为我预计这种情况会发生）。如果用户期望得到响应，那么我将抛出一个特定的异常来发出错误信号，该错误将设置 View 的 ModelState。

现在这是一个棘手的情况，因为看起来我正在使用异常来控制代码流，但事实并非如此。虽然我希望数据库抛出一个违反约束的异常，但它仍然是一个例外情况，因为这种情况并非每次都发生，而且这不是用户可以避免的情况。我接下来抛出特定异常，因为第一个异常与持久性相关，但我的控制器不知道它，所以我必须以它理解的方式传达该异常状态。

好的，很长的答案，但想法是一些错误，而预期的仍然是异常，它们需要被这样对待。但是，如果 ipnut 数据存在格式验证错误或输入数据以特定方式无效，则应在第一反腐败层中处理，控制器本身不需要异常。控制器不应让无效输入继续进行。如果它继续前进，那么它就是一个错误，一个特殊的情况。

希望，我不是很困惑:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:23:20.480

很好的讨论。它唤醒了旧的讨论主题。我测试了几种方法，发现混合使用是一个不错的选择。我在验证服务方法或 ctor 的输入参数时使用异常。如果验证知识不是实体责任的一部分，我将验证器与访问者模式一起使用来检查域实体。如果您是 Persistence-ignorance-religion（我是）的一部分，您可以使用位于基础设施层的验证器并验证它是否可以持久化（或者可能通过适配器导出到另一个系统......）。但是，我在我的实体上使用了很少的公共自动属性，只是为了使实体处于无效状态变得困难。我还让实体验证它自己的域范围/责任（尝试在此处遵循 SRP ......）。

抛出异常作为通知其他部分/层的一般解决方案可能并非对每种情况都是最佳的，但对于某些情况可能是最佳的。

/干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T02:07:23.200

为什么不对破坏规则列表抛出异常？

与构建规则、弄清楚如何处理它们、告诉用户错误以及介于两者之间的所有网络流量的成本相比，异常几乎没有成本。

# jquery - 获取所选下拉列表的值

> ID：10190254
> 
> 赞同：-1
> 
> 时间：2012-04-17T11:22:27.040
> 
> 标签：jquery

我需要获取所选下拉列表的值而不是文本。例如：下拉列表中的 IN 代表印度。

```
<select id="country">
<option val="IN">India</option>
<option val="CN">China</option>
<option val="AU">Australia</option></select>

<div id ="get"></div> 
```

​ 脚本：

```
 $("#get").text($("#country").val());​ 
```

请参考[http://jsfiddle.net/yxMSK/3/](http://jsfiddle.net/yxMSK/3/)

我在某个地方犯了一个愚蠢的错误，但找不到它。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T11:24:40.500

HTML 是错误的：

```
<option value="AU">Australia</option></select> 
```

您需要将 val="" 替换为 value=""

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:24:27.400

尝试这个：

```
$("#country").change(function(){
 $("#get").text(($(this).val()));
}) 
```

[http://jsfiddle.net/yxMSK/18/](http://jsfiddle.net/yxMSK/18/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:24:47.743

你去[http://jsfiddle.net/cGt5N/](http://jsfiddle.net/cGt5N/)

您需要进行连接，`.change event`以便每次更改文本时都会更改。

**在文本字段中获取所选值的**代码****

 **```
 $("#country").change(function(){
    $("#get").text($("#country option:selected").text());
});
​
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:24:51.950

在您的 HTML 上，它应该`value`是`val`：

```
<select id="country">
  <option value="IN">India</option>
  <option value="CN">China</option>
  <option value="AU">Australia</option>
</select> 
```**

# javascript - 处理javascript的错误

> ID：10190264
> 
> 赞同：0
> 
> 时间：2012-04-17T11:23:03.940
> 
> 标签：javascript, jquery

我的浏览器网页中出现以下错误

```
script may be busy or not responding 
```

我想避免它发生所以我该怎么做，

请给我一个解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:26:27.473

你的循环可能是一个无限循环。您使用的条件将始终为真，那么它将永远不会导致错误。

# json - Scala Lift - 将模型返回为 json 对象

> ID：10190266
> 
> 赞同：0
> 
> 时间：2012-04-17T11:23:10.423
> 
> 标签：json, scala, lift

我有以下内容：

```
object API_Chat extends RestHelper {

    serve {

        var response = Chat.findAll(

            ("room" -> "aroom")
            ~
            ("handle" -> "ahandle")

        ).map(_.asJValue)

        JsonResponse(write(response(0)) :: Nil)

    }

} 
```

我想要做的是返回一个 json 对象，其中包含模型 Chat 中的所有值。

当我收到回复时，它看起来像这样：

```
["{\"name\":\"J1M\",\"_id\":\"4f8d55b240d41dcad5c3f982\",\"target\":\"all\",\"time\":1334662578,\"room\":\"jroom\",\"value\":\":)\",\"user\":\"j1m\",\"handle\":\"f1aaa95db5150a6330552e30918728b5\",\"level\":\"_1\"}"] 
```

显然我试图只返回一个项目，所以不确定为什么它包含在一个数组中，而且它似乎已经逃脱了 json 字符串。

任何人都可以对如何使这项工作有所了解吗？

非常感谢任何帮助，在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:13:58.410

我不确定您要作为 JsonResponse 发送什么，但您的响应 val 是 List[JValue]。调用 write(response(0)) 会将 List 中的第一个 JValue 序列化为 String。然后，您将该 String 与 Nil 连接以创建一个包含单个元素的 List[String]。JsonResponse.apply 的单参数版本采用 JValue，因此将调用将 Seq[A] 转换为 JArray 的 net.liftweb.json.JsonDSL (seq2jvalue) 中的隐式转换.....这就是为什么将 JSON 数组视为响应。

如果您只想返回第一个元素，您应该可以使用：

```
JsonResponse(response(0)) 
```

# java - 如何使用 ctrl + 空格在 Eclipse 中插入 System.out.println()

> ID：10190268
> 
> 赞同：7
> 
> 时间：2012-04-17T11:23:15.467
> 
> 标签：java, eclipse

`System.out.println()`当我在看一段关于 java 的视频时，一个男人立即插入了屏幕。我该怎么做。他只写“S”字……

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T11:25:51.797

我这样做：写`syso`并按`ctrl+space`。我相信你可以配置这些东西：`window -> preferences -> java -> editor -> content assist`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T11:24:33.683

`Syso`并点击 `CTRL`+`SPACE`它将在 Eclipse 中工作....

如果你想改变它，，，

> 窗口 > 首选项 > Java > 编辑器 > 模板。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-19T21:27:44.723

键入`syso`并按`ENTER`。

* * *

**无需**按`CTRL`+ `Space`。_ 每当您键入字母时，您都可以调出内容帮助：

1.  导航到`Window > Preferences > Java > Editor > Content Assist`。
2.  输入`.abcdefghijklmnopqrstuvwxyz`标题*为 Java 的自动激活触发器*的字段。

现在，无论您何时键入，都会出现代码完成建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T11:24:38.690

键入`Syso`，然后按`CTRL`+`Space`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-17T11:45:59.450

如果您的窗口 7 有多个语言输入选择，这将出现问题。因为`CTRL + SPACE`将触发语言更改而不是 insert `System.out.println()`；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-17T13:39:23.770

我喜欢用模板框`Ctrl+Alt+Space`，这样你可以快速

1.  选择并突出显示要打印的内容
2.  `Ctrl+Alt+Space`
3.  类型 ：`syso`
4.  进入

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-27T09:48:20.600

其实我发现你甚至不必写`syso`，在eclipse中甚至

`yso`+`Ctrl+Space`

就足够了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-12T17:52:44.583

在 Eclipse Neon 中，它是`sysout` `Ctrl+Space`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-16T19:11:14.230

syso CTRL+空格键的快捷方式适用于所有版本的eclipse，如果设置的问题已更改，则不应更改设置，因此您可以通过执行以下步骤使其正确 1）更改快捷方式的绑定 2）确保已检查在模板下 3) 自动完成

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-13T21:27:04.720

因此，如果您是 mac 用户，请键入 sysout 并尝试 control+space，使用 control 键是指 mac 键盘中 fn 键旁边​​的那个。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-22T06:39:20.743

对我来说，它在我签`Template Proposals`入后开始工作`Eclipse`-> `Preferences`-> `Java`-> `Editor`-> `Content Assist`。`default`我在和`cycling`部分都打开了它。

# regex - 在 Excel 中拆分大写单词

> ID：10190269
> 
> 赞同：19
> 
> 时间：2012-04-17T11:23:22.167
> 
> 标签：regex, vba, excel, excel-formula

我想用大写字母拆分单元格中的所有单词，例如：

原始值：

```
MikeJones
RinaJonesJunior
MichealSamuelsLurth 
```

预期输出：

```
Mike Jones
Rina Jones Junior
Micheal Samuels Lurth 
```

这可以在不使用 VBA 的情况下完成吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-18T02:39:52.847

承认 Excellll 卓越的公式后，最有效的代码解决方案将`RegExp`基于此。这避免了长循环。

![在此处输入图像描述](../Images/ddc6ff01d325d0fe15c3547bc1942c4a.png)

```
Function SplitCaps(strIn As String) As String
Dim objRegex As Object
Set objRegex = CreateObject("vbscript.regexp")
With objRegex
    .Global = True
    .Pattern = "([a-z])([A-Z])"
    SplitCaps = .Replace(strIn, "$1 $2")
End With
End Function 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-17T14:37:01.880

这是一个工作表功能解决方案。它不是很漂亮，但如果你完全反对使用 VBA，那么我认为你只能选择丑陋的选项。对于 中的文本`A1`，将以下内容粘贴到`B1`并按`Ctrl`+ `Shift`+`Enter`以将公式作为数组公式输入：

```
=IFERROR(INDEX(IF(CODE(MID(D1,ROW(INDIRECT("A2:A"&LEN(D1))),1))<=90,IF(CODE(MID(D1,ROW(INDIRECT("A2:A"&LEN(D1))),1))>=65,IF(MID(D1,ROW(INDIRECT("A1:A"&LEN(D1)-1)),1)<>" ",REPLACE(D1,ROW(INDIRECT("A2:A"&LEN(D1))),1," "&MID(D1,ROW(INDIRECT("A2:A"&LEN(D1))),1)),D1),D1),D1),MIN(IF(CODE(MID(D1,ROW(INDIRECT("A2:A"&LEN(D1))),1))<=90,IF(CODE(MID(D1,ROW(INDIRECT("A2:A"&LEN(D1))),1))>=65,IF(MID(D1,ROW(INDIRECT("A1:A"&LEN(D1)-1)),1)<>" ",ROW(INDIRECT("A1:A"&LEN(D1)-1)),2000000),2000000),2000000))),D1) 
```

我告诉过你这很丑！

对于所有这些努力，这只会拆分名字和第二个名字。如需更多拆分，请将公式填入右侧。因此，例如，如果您在 中有一个名称列表`A1:A10`，并且您认为任何名称中最多的单词是四个，您可以在中输入公式`B1`（作为数组公式！），向下填写到`B10`，然后向右填写到`E10`。您的拆分名称列表将位于`E1:E10`.

![公式的示例使用](../Images/962079c9c908619adcbdb85b78b0df9b.png)

如果您倾向于跳下兔子洞，这里简要解释一下公式的作用：

1.  检查每个字符以查看它是否在大写字母的 ASCII 范围内并且前面没有空格。名称的第一个字符被跳过。
2.  一个大小等于字符串长度（减 1）的数组按如下方式填充：如果找到匹配项，则存储该字符串，匹配的字符被其前面的空格替换。如果未找到匹配项，则存储原始字符串。
3.  返回此数组中与匹配项对应的第一个元素。如果未找到匹配项，则返回原始字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T13:29:32.127

既然你说你不想使用 VBA 宏，但问题需要 VBA，我认为 UDF 对你来说是一个很好的解决方案。这是您可以使用的 UDF（用户定义函数）。将此代码放在您拥有数据的同一文件的通用模块中。

```
Function splitbycaps(inputstr As String) As String

Dim i As Long
Dim temp As String

If inputstr = vbNullString Then
    splitbycaps = temp
    Exit Function
Else
    temp = inputstr
    For i = 1 To Len(temp)
        If Mid(temp, i, 1) = UCase(Mid(temp, i, 1)) Then
            If i <> 1 Then
                temp = Left(temp, i - 1) + " " + Right(temp, Len(temp) - i + 1)
                i = i + 1
            End If
        End If
    Next i
    splitbycaps = temp

End If
End Function 
```

您现在可以直接在单元格中使用该函数。假设您在 A1 -> "MikeJones" 中有数据并且您想在单元格 A2 中回答。所以在 A2 中，你输入

```
=splitbycaps(A1) 
```

你会得到你的输出。HTH。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T13:03:38.680

你必须用 VBA 来做到这一点。

```
Sub insertspaces()
Range("A1").Select
Do
    Row = ActiveCell.Row
    Column = ActiveCell.Column
    vlaue = ActiveCell.Value
    If vlaue = "" Then Exit Do
        Length = Len(vlaue)
        If Length > 1 Then
            For x = Length To 2 Step -1
            par = Mid(vlaue, x, 1)
            cod = Asc(par)
            If (cod > 64 And cod < 91) Or (cod > 191 And cod < 222) Then
            vlaue = Left(vlaue, x - 1) + " " + Mid(vlaue, x)
            End If
        Next
        ActiveCell.Value = vlaue
        End If
    Row = Row + 1
    Cells(Row, Column).Select
Loop
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T17:55:08.400

这将作为用户定义的函数工作。

```
Function SplitOnCapital(str As String) As String
    Dim letter As Byte, result As String

    For letter = 2 To Len(str)
        If Asc(VBA.Mid$(str, letter, 1)) < 90 Then //65 to 90 are char codes for A to Z
            result = WorksheetFunction.Replace(str, letter, 0, " ")
            letter = letter + 1
        End If
    Next letter

    SplitOnCapital = result
End Function 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-09-19T15:06:59.847

```
Sub caps_small()

strIn = InputBox("Enter a string:")

For i = 1 To Len(strIn)

    If Mid(strIn, i, 1) Like "[A-Z]" Then
        cap = Mid(strIn, i, 1)
        capstr = capstr & cap

    ElseIf Mid(strIn, i, 1) Like "[a-z]" Then
        sml = Mid(strIn, i, 1)
        smlstr = smlstr & sml
    End If
Next

MsgBox capstr

MsgBox smlstr

End Sub 
```

# css - 如何将元数据添加到 WOFF 文件？

> ID：10190271
> 
> 赞同：3
> 
> 时间：2012-04-17T11:23:34.800
> 
> 标签：css, fonts, font-face, webfonts

我需要将 metadata.xml 添加到使用 font-squirrel 创建的 WOFF 文件中，以便将其与 @font-face 一起使用。

我想将 metadata.xml 添加到 WOFF 文件中，如下所示（解释了所有相关内容）：

[http://www.w3.org/TR/WOFF/#appendix-a](http://www.w3.org/TR/WOFF/#appendix-a)

有人告诉我我可以用这个 sfnt2woff 做到这一点，但它**不是用户友好的而且相当复杂**。我想知道是否还有其他方法可以做到这一点（字体松鼠？其他字体转换器？）

谢谢， 阿隆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:20:18.977

我不确定你为什么需要将元数据添加到字体中，没有 metadata.xml 它工作得很好

xml 文件仅为字体设计者或供应商添加信息以包括许可或其他信息。

css文件的顶部：

```
@font-face {
font-family: font_name";
src: url('fonts/font_name.eot');
src: url('fonts/font_name.woff') format('woff'),  url('fonts/font_name.ttf') format('truetype'),  url('fonts/font_name.svg') format('svg');
font-style: normal;
font-weight: normal;
} 
```

然后例如：

```
body {
font-family: "droid sans", Verdana;
} 
```

编辑1：

在该文件夹中创建一个名为 myfonts 的文件夹，将您的*metadata.xml*、*font.ttf*（源字体）和*sfnt2woff.exe*（位于此处：[http](http://people.mozilla.org/~jkew/woff/sfnt2woff.exe) ://people.mozilla.org/~jkew/woff/sfnt2woff.exe ）

创建一个文本文件打开它，把它放在里面

```
sfnt2woff -v 1.0 -m metadata.xml droid_sans.ttf 
```

将其保存到该文件夹​​并调用它：do-it-now.bat

完成后转到文件夹并单击。应该出现一个 font.woff 并添加了 metadata.xml。

sfnt2woff 的用法：

```
sfnt2woff [-v <maj>.<min>] [-m <metadata.xml>] [-p <private.dat>] <otffile>
package OpenType <otffile> as WOFF, creating <otffile>.woff
Options:
-v <maj>.<min>     set font version number (major and minor, both integers)
-m <metadata.xml>  include metadata from <metadata.xml> (not validated)
-p <private.dat>   include private data block 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:07:12.603

我也有 WOFF 字体。我尝试了以下两个命令：

1.  `sfnt2woff -v 1.0 -m metadata.xml <fontfile>.ttf`
2.  `sfnt2woff samagana.ttf`

字体比第一个字体大 1k。但是，Firefox → 工具 → 页面信息 → 字体不显示包含的元数据。可能是字体信息扩展或此程序中的错误。

# maven - 如何在项目中生成jar和war

> ID：10190272
> 
> 赞同：5
> 
> 时间：2012-04-17T11:23:36.913
> 
> 标签：maven, maven-2, maven-plugin, maven-3

我们有两个不同的项目。并且控制器在两个项目中几乎相同。

项目 A 里面有控制器。所以为它制造战争不是问题。

但是项目 B 需要控制器的项目 A 控制器的 jar。

任何人都可以告诉我如何从项目 A 的控制器生成可以在项目 B 中使用的 jar 文件吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T11:25:54.743

这种事情的默认解决方案是有两个独立的模块，一个用于战争，一个用于控制器模块。不要开始与 Maven 战斗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T10:48:58.923

正如@Shashank 指出的那样，您可以让maven 也执行maven-jar-plugin。但这只会创建一个 JAR，其中仅包含已编译的类，但不包含 webapp 源。

有一种简单的方法可以在多模块项目中使用一个简单的`mvn clean install`命令来完成它，而无需显式调用`mvn clean install jar:jar`：

只需添加`maven-jar-plugin`到`>build>plugins`并在“包”阶段调用它：

```
<project>
  <packaging>war</packaging>
  <!-- .. -->
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-jar-plugin</artifactId>
        <configuration>
          <classifier>classes</classifier>
        </configuration>
        <executions>
          <execution>
            <id>package-jar</id>
            <phase>package</phase>
            <goals>
              <goal>jar</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
      </plugin>
    </plugins>
  </build>
</project> 
```

这将创建一个大的 .war 和一个较小的 -classes.jar 工件。

*2017 年 6 月 15 日更新*：另一方面，如果您需要 war 文件的*精确副本*（不仅是打包的 java 类），它有点*被屏蔽为 JAR 文件*，您可以使用`maven-dependency-plugin`和的组合`maven-install-plugin`创建 WAR 的 JAR 副本。（我恰好需要这样的解决方案——不要问为什么；））

创建一个依赖于war模块的新模块：

```
<project>
  <!-- ... -->
  <dependencies>
    <!-- ... -->
    <dependency>
      <groupId>your-group-id-here</groupId>
      <artifactId>your-war-artifact-id-here</artifactId>
      <version>${project.version}</version>
      <type>war</type>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <executions>
          <execution>
            <id>copy</id>
            <phase>package</phase>
            <goals>
              <goal>copy</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <artifactItems>
            <artifactItem>
              <groupId>your-group-id-here</groupId>
              <artifactId>your-war-artifact-id-here</artifactId>
              <version>${project.version}</version>
              <type>war</type>
              <overWrite>true</overWrite>
              <destFileName>jar-copy-of-war.jar</destFileName>
            </artifactItem>
          </artifactItems>
          <overWriteReleases>false</overWriteReleases>
          <overWriteSnapshots>true</overWriteSnapshots>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-install-plugin</artifactId>
        <executions>
          <execution>
            <id>install-copy-of-war</id>
            <phase>install</phase>
            <goals>
              <goal>install-file</goal>
            </goals>
            <configuration>
              <packaging>jar</packaging>
              <classifier>copy-of-war</classifier>
              <artifactId>${project.artifactId}</artifactId>
              <groupId>your-group-id-here</groupId>
              <version>${project.version}</version>
              <file>${project.build.directory}/dependency/jar-copy-of-war.jar</file>
              <generatePom>true</generatePom>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

这将创建一个战争副本，将其命名为“--copy-of-war.jar”，而“copy-of-war”是该模块的分类器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-03T14:04:30.623

保持项目 A 的包装为战争。将 maven jar 插件添加到项目 A 的 pom.xml 中。使用“mvn clean package jar:jar”构建项目。它将创造一个罐子和战争。

# javascript - jQuery 元素操作不会刷新元素

> ID：10190274
> 
> 赞同：0
> 
> 时间：2012-04-17T11:23:47.117
> 
> 标签：javascript, jquery, jquery-plugins, refresh

我编写了一个 jQuery 插件用于练习，它应该像[unwrongest 的“Airport”](http://unwrongest.com/projects/airport/)一样工作。

**对它应该如何操作的简短描述**

1.  获取某个元素的文本，遍历它。
2.  对于找到的每个字符，遍历字母表，将字符与字母表中的每个字符进行比较...
3.  ...直到 text-char = alphabet-char （或直到“字母”-数组没有更多元素。
4.  在比较时，以一定的延迟更改实际文本。

因此，例如，在 hi 上使用插件会将单词从 hi（开始）更改为 ai、bi、ci、[...]、ha、hb、hc、hd、[...]、hi，有点翻转通过这。同样，如果您不知道我的意思，您可以查看链接。

**问题**

用 firebug 检查控制台，它确实改变了目标文本，***但它直到它到达 end 才更新***。首先我认为它根本没有做任何事情，但是当我更改代码以将每个字符转换为“A”（例如）时，它会在最后将文本更新为“AAAAAAA”。不过，我需要插件做的当然是在每次更改后更新它。

**编码**

```
(function( $ ){

  $.fn.myAirport = function() {
        var text = this.text();
        var length = text.length;
        var alphabet = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "!", "?"];
        var possibilities = alphabet.length;

        function changeCharAt(string, index, char) {
            var length = string.length;
            if(index > length-1) return string;

            var before = string.substr(0,index);
            var after = string.substr(index+1);
            result = before + char + after;
            return result;
        }

        for (var i = 0; i < length; i++) {
            var letter = text[i];
            console.log("looking for: "+letter);

            for (var j = 0; j < possibilities; j++) {
                var test = alphabet[j];
                if (letter == test) {
                    console.log("Done, "+letter+" (letter # "+i+") is # "+j+" in the Alphabet-string");
                    j = possibilities;
                }
                else {}

                text = changeCharAt(text, i, test);
                $(this).text(text).delay(100);              
                console.log("Trying "+$(this).text());
            }
        }
  };
})( jQuery ); 
```

该插件是这样调用的：`$("#element").myAirport();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:52:10.833

浏览器倾向于等到 for 循环完成后再更新。而不是使用

```
 $(this).text(text).delay(100) 
```

尝试 setTimeout 函数。

[如何在 Javascript 循环中重新绘制 HTML 元素？](https://stackoverflow.com/questions/584370/how-do-i-make-an-html-element-repaint-within-a-javascript-loop)

# jquery - Jquery选择所有元素进一步向下

> ID：10190287
> 
> 赞同：0
> 
> 时间：2012-04-17T11:24:46.243
> 
> 标签：jquery

我有一个包含各种选择元素的页面。

如果我改变一个选择（比如第三个），我想从那时起选择所有元素（选择）：

我试过：

```
$j(id).nextAll('select').each(function(index) {} 
```

但这不起作用（什么都不选）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:27:48.497

它不起作用，因为`.nextAll`获取了jQuery 对象中跟随 DOM 元素的**兄弟姐妹。**您的 HTML 很可能是结构化的，因此没有同级选择元素。

您应该提供有关您正在尝试执行的操作的更多信息，包括准确的示例 HTML，以便我们提供可行的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:27:50.327

这是你的意思吗？

```
$('select#id option:selected').nextAll().each(function(index) {

   //other options

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:28:15.343

如果以下`<SELECT>`元素是 的同胞`$j(id)`：

```
$j(id).nextAll('input:select').each(function(index) { ... }) 
```

如果以下元素属于其他容器（如`<DIV>`元素）：

```
$j(id).parent().nextAll().find('input:select').each(function(index) { ... }) 
```

# jquery - 像fancybox jquery一样制作一个div pop onclick

> ID：10190290
> 
> 赞同：1
> 
> 时间：2012-04-17T11:24:54.243
> 
> 标签：jquery, html, css, fancybox

我需要弹出一个像jquery [fancybox](http://fancybox.net/)这样具有弹性效果的div 我正在使用下面的编码，但它不起作用......

HTML：

```
<a href="#" id="LoginAnchorLink">ClickME</a>
<div id="dialog" class="Popup" style="display:none;">
    content of the div have to be popup
</div> 
```

CSS：

```
.Popup {
    position: fixed;
    background-color: #ffffff;
    width: 100px; 
    height:100px;
} 
```

jQuery：

```
jQuery(document).ready(function () {
    $("#LoginAnchorLink").click(function () {
        $("#dialog").fancybox();
    });
}); 
```

我错过了什么还是出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:50:06.027

重新阅读后，我决定编辑帖子。这应该更清楚。

不要忘记附上fancybox 的css 和javascript 文件。

您的登录表格

```
<div style="display: none;">
    <div id="logindiv" style="width:400px;height:100px;overflow: hidden;">
        You div with login data and input fields
    </div>
</div> 
```

登录链接

```
<a id="loginbutton" href="#logindiv" title="enter your login details here">Login Here</a> 
```

jQuery

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#loginbutton").fancybox({
            'titleShow'     : true,
            'transitionIn'  : 'elastic',
            'transitionOut' : 'elastic',
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T12:11:36.937

你的 HTML 应该像 dis 一样改变

```
<a href="#" id="LoginAnchorLink">ClickME</a>
<div style="display:none;">
<div id="dialog" class="Popup">
    content of the div have to be popup
</div>
</div> 
```

确保jquery库和fancybox js文件的路径

# java-me - 如何在 lwit 中获取 Midlet 版本？

> ID：10190292
> 
> 赞同：3
> 
> 时间：2012-04-17T11:24:57.100
> 
> 标签：java-me, lwuit, midp

我有以下描述的 jad 文件

```
MIDlet-Jar-Size: 404071
MIDlet-Jar-URL: test.jar
MIDlet-Name: test
MIDlet-Vendor: Vendor
MIDlet-Version: 1.0.1
MicroEdition-Configuration: CLDC-1.1
MicroEdition-Profile: MIDP-2.0
MicroEdition-test: test 
```

如何`MIDlet-Version`通过代码？

我试过 System.getProperty("MIDlet-Version")，但它返回 null。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T13:13:57.007

从您的 MIDlet 子类

```
String version = getAppProperty("MIDlet-Version"); 
```

摘自：

[http://www.developer.nokia.com/Community/Discussion/showthread.php?153128-MIDlet-Version](http://www.developer.nokia.com/Community/Discussion/showthread.php?153128-MIDlet-Version)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:46:49.497

System.getProperty("MIDlet-Version") 仅适用于 midlet 或通过从 midlet 实例调用。

# c++ - 在任何 PC 上编译 .cpp 文件的批处理文件

> ID：10190293
> 
> 赞同：0
> 
> 时间：2012-04-17T11:24:58.300
> 
> 标签：c++, windows, compiler-construction, command-line, batch-file

我正在创建一个程序，我需要在其中编译和运行新生成的 .cpp 文件，为此我必须创建一个批处理文件，该文件编译和运行 .cpp 文件，并且可以通过 .cpp 轻松访问`system("run_cpp.cpp")`。我可以通过命令行轻松运行 .cpp 文件，但这只是在我使用 MS Visual Studio 命令行或使用“VCVARS32.bat”设置环境时。但目标是制作一个可以在任何计算机上运行的程序，而任何计算机都没有 MS Visual Studio 2010。

**所以我的问题是：**

如何使用命令行（批处理文件）在任何计算机上编译 .cpp 文件。是否有一些免费软件编译器可以轻松添加到项目中？请帮帮我！

提前致谢！

编辑：我提到 run_cpp.BAT 不是 run_cpp.cpp 抱歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:34:47.693

你可以使用[gcc / gpp](http://gcc.gnu.org/)来编译你的程序。但是，您还必须将 gnu 工具链与您的程序捆绑在一起。或安装它。

简而言之，这不太可行，并且在运行时运行生成的代码会带来很多安全风险。这样做从来都不是一个好主意。总是有其他方法可以解决您的问题。
您也将遇到环境设置问题

# sencha-touch - 我想知道有关 kitchensink 示例的一些信息以了解逻辑

> ID：10190297
> 
> 赞同：0
> 
> 时间：2012-04-17T11:25:05.227
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我想了解的是，当程序加载时，它会在左侧的容器中出现嵌套列表结构，当用户触摸嵌套列表部分时，程序会在右侧加载一个新的嵌套列表结构。第二个嵌套列表结构是属于第一个还是属于全新的？

我需要创建类似的结构，当程序运行时，程序左侧必须列出至少 10 个不同的食物类别，当用户选择一个类别时，用户必须在右侧看到与该类别相关的所有食谱程序，然后他/她可以触摸并查看该食谱的详细信息。

[http://docs.sencha.com/touch/2-0/#!/example/kitchen-sink](http://docs.sencha.com/touch/2-0/#!/example/kitchen-sink)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:00:38.427

我不确定厨房水槽是否是一个很好的样品。您可以阅读有关 Sencha MVC 以及如何构建应用程序的信息：[http ://docs.sencha.com/touch/2-0/#!/guide/apps_intro](http://docs.sencha.com/touch/2-0/#!/guide/apps_intro)

关于您要创建的结构：左侧就像一个主菜单。当用户在菜单项上单击 s 时，它会向控制器发送一个事件，该控制器将特定视图呈现到中央面板中。然后你有中央视图的其他控制器。但是主菜单（左侧面板）和主视图之间没有关系。如果稍后，您想更改应用程序的布局并为左侧菜单使用其他小部件怎么办？当然，您不想全部重写。

# javascript - 为什么我的 javascript 函数只有在我手动输入输入时才有效？

> ID：10190299
> 
> 赞同：0
> 
> 时间：2012-04-17T11:25:17.863
> 
> 标签：javascript, function

当手动设置值时，我有一个可以完美运行的功能

```
function doSomeMath(array,number){
  some math here.....
} 
```

仅当我手动设置每月账单时才有效

```
function customer(){
 this.monthlyBill = 300;
} 
```

当我这样做时，它工作正常：

```
var someArray = [.2,.3,.6];
var customerData = new customer();
doSomeMath(someArray,customerData.monthlyBill); 
```

问题是我不想手动设置它，我想从表单输入元素中获取值。

当我这样做时，它搞砸了：

```
function customer(){
 this.monthlyBill = $('#monthly_bill').val(); 
} 
```

我转到#monthly_bill 表格并输入 300，我得到一个完全不同的值。

我打字有什么区别

```
this.monthlyBill = 300 
```

和

```
this.monthlyBill = $('#monthl_bill').val();    // and then typing 300 into a form. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:26:49.330

在第二种情况下

```
this.monthlyBill = $('#monthl_bill').val(); 
```

它被认为是一个字符串。您需要将其解析为整数

所以基本上：

```
this.monthlyBill = parseInt($('#monthl_bill').val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:32:05.560

发表我的评论和演示

300 是一个数字 - xxx.val() 是一个字符串 - 尝试 parseInt( $('#monthl_bill').val(),10);

如果有人输入前导 0，则需要 ,10 基数，因为这表示八进制

[演示](http://jsfiddle.net/mplungjan/f3wyW/)

# msdeploy - msdeploy Visual Studio 2010 数据库项目 (dbproj)

> ID：10190302
> 
> 赞同：0
> 
> 时间：2012-04-17T11:25:25.757
> 
> 标签：msdeploy, database-project, dbproj

我知道您可以从 Visual Studio 打包/部署数据库项目，但是，数据库项目是否产生可以使用 msdeploy 部署的输出，或者它们完全不相关？例如 msdeploy.exe -deploy mydatabaseproject

或者，也许 dbproj 只输出可以包含在“包/发布 SQL”选项卡中的脚本，这些脚本将包含在 Web 部署包中，随后作为 Web 部署的一部分执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:48:46.403

DB 项目的构建输出将是一个可以使用 MSDeploy 部署的 SQL 文件。在项目设置中查看“部署”页面，它将引导您朝着正确的方向前进。如果您选择创建脚本并部署它的部署操作，MSDeploy 将在您的构建过程中使用。

# symfony - 根据用户角色将一个路由绑定到不同的控制器

> ID：10190305
> 
> 赞同：8
> 
> 时间：2012-04-17T11:25:29.020
> 
> 标签：symfony

在我的 Symfony 2 应用程序中，我有 3 个不同的用户角色可以访问后端管理部分：

```
role_hierarchy:
    ROLE_STAFF:     ROLE_USER
    ROLE_MODERATOR: ROLE_STAFF
    ROLE_ADMIN:     ROLE_MODERATOR 
```

对于像这样的路由`http://example.org/admin/post/`，我希望我的应用根据用户角色显示不同的信息，这意味着**3 个控制器**绑定到**唯一的路由**。

处理此问题的最佳方法是什么？

我正在考虑一些解决方案，但似乎没有一个对我有好处：

1.  一个控制器，在每个操作中我只测试用户角色：

    ```
    <?php

    /**
     * @Route("/admin/post")
     */
    class PostController extends Controller
    {
        /**
         * Lists all post entities.
         *
         * @Route("/", name="post_index")
         * @Template()
         * @Secure(roles="ROLE_STAFF")
         */
        public function indexAction()
        {
            $user = $this->get('security.context')->getToken()->getUser();

            if ($this->get('security.context')->isGranted('ROLE_STAFF')) {
                // Do ROLE_STAFF related stuff
            } else if ($this->get('security.context')->isGranted('ROLE_MODERATOR')) {
                // Do ROLE_MODERATOR related stuff
            } else if ($this->get('security.context')->isGranted('ROLE_ADMIN')) {
                // Do ROLE_ADMIN related stuff
            }

            return array('posts' => $posts);
        }
    } 
    ```

    即使这样做了，IMO 显然这不是一个好的设计。

2.  一个 BackendController 分派给 3 个不同的控制器：

    ```
    <?php

    /**
     * @Route("/admin/post")
     */
    class PostBackendController extends Controller
    {
        /**
         * Lists all post entities.
         *
         * @Route("", name="admin_post_index")
         * @Template("AcmeBlogBundle:PostAdmin:index.html.twig")
         * @Secure(roles="ROLE_STAFF")
         */
        public function indexAction()
        {
            if ($this->get('security.context')->isGranted('ROLE_STAFF')) {
                $response = $this->forward('AcmeBlogBundle:PostStaff:index');
            } else if ($this->get('security.context')->isGranted('ROLE_MODERATOR')) {
                $response = $this->forward('AcmeBlogBundle:PostModerator:index');
            } else if ($this->get('security.context')->isGranted('ROLE_ADMIN')) {
                $response = $this->forward('AcmeBlogBundle:PostAdmin:index');
            }

            return $response;
        }
    } 
    ```

    和一号一样。

3.  我试图让控制器相互扩展：

    ```
    <?php

    /**
     * @Route("/admin/post")
     */
    class PostStaffController extends Controller
    {
        /**
         * Lists all post entities.
         *
         * @Route("/", name="post_index")
         * @Template()
         * @Secure(roles="ROLE_STAFF")
         */
        public function indexAction()
        {
            $user = $this->get('security.context')->getToken()->getUser();

            // Do ROLE_STAFF related stuff

            return array('posts' => $posts);
        }
    }

    <?php

    /**
     * @Route("/admin/post")
     */
    class PostModeratorController extends PostStaffController
    {
        /**
         * Lists all post entities.
         *
         * @Route("/", name="post_index")
         * @Template()
         * @Secure(roles="ROLE_MODERATOR")
         */
        public function indexAction()
        {
            $user = $this->get('security.context')->getToken()->getUser();

            // As PostModeratorController extends PostStaffController,
            // I can either use parent action or redefine it here

            return array('posts' => $posts);
        }
    }

    <?php

    /**
     * @Route("/admin/post")
     */
    class PostAdminController extends PostModeratorController
    {
        /**
         * Lists all post entities.
         *
         * @Route("/", name="post_index")
         * @Template()
         * @Secure(roles="ROLE_ADMIN")
         */
        public function indexAction()
        {
            $user = $this->get('security.context')->getToken()->getUser();

            // Same applies here

            return array('posts' => $posts);
        }
    } 
    ```

    IMO 这是一个更好的设计，但我无法让它工作。路由系统在它匹配的第一个控制器上停止。我想让它自动成为级联风格的王者（即，如果用户是员工，则转到 PostStaffController，否则如果用户是版主，则转到 PostModeratorController，否则转到 PostAdminController）。

4.  在我的 BlogBu​​ndle 中为 kernel.controller 添加一个监听器，它的工作与数字 2 相同吗？

我正在寻找最好的设计和更灵活的解决方案，我们有机会在未来增加更多的角色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-09T08:12:04.083

恕我直言，您不应根据角色为同一路线触发不同的控制器。只是职责不同而已。路由用于选择控制器，角色用于特权。一年后，您将不记得诀窍，即。当您尝试添加新角色时。

当然，不同角色不同内容的问题是很常见的，所以在这种情况下我最喜欢的解决方案是：

1.  当不同角色的控制器有很大不同时，我会在需要时使用不同的路由和重定向。
2.  当控制器相似但内容不同时，即。不同的数据库查询条件，我使用与您类似的解决方案 2\. 但不是转发，而是使用来自同一控制器的私有/受保护方法来完成作业。有一个技巧-您必须从上到下检查角色，即。首先检查 ROLE_ADMIN，下一个 ROLE_OPERATOR 和最后一个 ROLE_STAFF，因为当您的 ROLE_ADMIN 从 ROLE_STAFF 继承时，然后阻止用户捕获它。
3.  当差异仅在于应该为不同角色显示/隐藏的某些信息块时，我会使用一个控制器并检查模板中的角色以确定哪个块呈现与否。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:19:46.347

第二个解决方案的自动化版本怎么样？喜欢：

```
 // Roles ordered from most to least significant (ROLE_ADMIN -> ROLE_MODERATOR -> etc)
    $roles = $myUserProvider->getRoles();
    foreach ($roles as $role) {
        // add a check to test, if the function you're calling really exists
        $roleName = ucfirst(strtolower(mb_substr($role, 0, 5)));
        $response = $this->forward(sprintf('AcmeBlogBundle:Post%s:index', $roleName))

        break;
    }

    // Check that $response is not null and do something with it ... 
```

因为我没有你的设置，所以我没有测试上面的代码。顺便说一句：发布内容的不同方法有什么区别？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T03:04:28.737

见[http://symfony.com/doc/current/book/internals.html#kernel-controller-event](http://symfony.com/doc/current/book/internals.html#kernel-controller-event)

应该做的伎俩，并确保注入 security.context 服务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-02T12:10:22.653

在`vendor/symfony/symfony/src/Symfony/Component/Routing/Router.php`

有一个选项可以`matcher_class`替换`config.yml`.

如果您`UrlMatcher`继承和 overRide`matchRequest`将优先于路径匹配（仅限 url）。

`matchRequest`接受一个参数 $request （请求对象）

Request 对象应包含提供安全提供程序侦听器在路由器侦听器之前运行的用户信息，并允许您通过组合 URL 和用户角色来选择路由。路由存储在一个按名称索引的数组中，因此名称需要不同。

你可以使用像这样的名字`post_index[USER]` `post_index[STAFF]` `post_index[MODERATOR]`

为了生成 URL，`{{ path('post_index', {...}) }}`您还需要替换子类`URLGenerator`并将其注入到带有`generator_class`选项的路由器中。

# php - 为我的用户提供 Amazon S3 上托管的文件的唯一下载链接

> ID：10190308
> 
> 赞同：1
> 
> 时间：2012-04-17T11:25:45.947
> 
> 标签：php, amazon-s3, soundmanager2

我有一个存储 MP3 文件的 Amazon S3 帐户。我在我的网络应用程序的音乐播放器上播放这些文件。我希望用户能够从我的网站下载歌曲。我怎样才能给他们一个临时链接来下载文件？我需要向他们提供 AS3 上文件的路径吗？我不希望与其他人共享链接。怎么可能呢？PS 我正在用 PHP 和 SoundManager 2 中的音乐播放器构建应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:53:31.000

您可以创建在特定时间过期的 url。

生成它们的最简单方法是使用[SDK for PHP](http://aws.amazon.com/sdkforphp/)及其[`get_object_url`](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/get_object_url)方法。

```
// Instantiate the class
$s3 = new AmazonS3();

// Get the URL
$url = $s3->get_object_url('aws-php-sdk-test', 'mårkér wîth spåcés ånd întl/åéîøü.txt', '5 minutes', array(
    'response' => array(
        'content-type' => 'text/plain',
        'content-language' => 'en-US',
        'expires' => gmdate(DATE_RFC2822, strtotime('1 January 1980'))
    )
)); 
```

如果您是 S3 新手，您需要花一些时间阅读 Amazon 的在线文档。

# python - Google 日历 V3 和命令行应用程序

> ID：10190315
> 
> 赞同：1
> 
> 时间：2012-04-17T11:26:14.827
> 
> 标签：python, google-calendar-api

我正在尝试开发一个不使用 webserver / appserver 等的简单 python 应用程序，它是一个普通的 vanilla CLI 应用程序。

根据我在 Google 日历客户端 API V3 上阅读的内容，由于 OAuth 2.0，如果不使用浏览器，确实无法对 CLI 应用程序进行身份验证。

我正在构建一个理想情况下希望在后台运行的应用程序并更新我的日历。当身份验证需要浏览器干预时，我该怎么做？我理解错了吗？请帮忙。

PS：API 的 V2 具有到端点 ClientLogin 的 web 服务，这似乎可以做到这一点，但如果可以的话，我真的想使用最新的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:16:21.877

如果您在此处遵循示例：[https](https://developers.google.com/google-apps/calendar/instantiate) ://developers.google.com/google-apps/calendar/instantiate ，则在找到“calendat.dat”（或任何名称）后，您只需使用浏览器进行一次身份验证您选择）文件，该文件将包含 oauth 令牌信息并将用于进一步的通信。

# c# - 如何使用 Fluent Validation 对列表中的每个字符串进行验证？

> ID：10190316
> 
> 赞同：19
> 
> 时间：2012-04-17T11:26:16.567
> 
> 标签：c#, asp.net-mvc-3, fluentvalidation

我有一个 MVC3 视图模型定义为：

```
[Validator(typeof(AccountsValidator))]
public class AccountViewModel
{
    public List<string> Accounts { get; set; }
} 
```

使用 FluentValidation (v3.3.1.0) 定义的验证为：

```
public class AccountsValidator : AbstractValidator<AccountViewModel>
{
    public AccountsValidator()
    {
        RuleFor(x => x.Accounts).SetCollectionValidator(new AccountValidator()); //This won't work
    }
} 
```

并且可能会定义帐户验证：

```
public class AccountValidator : AbstractValidator<string> {
    public OrderValidator() {
        RuleFor(x => x).NotNull();
        //any other validation here
    }
} 
```

我希望列表中的每个帐户都按照[文档](http://fluentvalidation.codeplex.com/wikipage?title=CreatingAValidator&referringTitle=Documentation&ANCHOR#Collections)中的说明进行验证。但是，调用`SetCollectionValidator`不起作用，因为在使用 a 时这不是一个选项，`List<string>`尽管如果将选项定义为`List<Account>`. 我错过了什么吗？我可以更改要使用的模型`List<Account>`，然后定义一个 Account 类，但我真的不想更改模型以适应验证。

作为参考，这是我正在使用的视图：

```
@model MvcApplication9.Models.AccountViewModel

@using (Html.BeginForm())
{
    @*The first account number is a required field.*@
    <li>Account number* @Html.EditorFor(m => m.Accounts[0].Account) @Html.ValidationMessageFor(m => m.Accounts[0].Account)</li>

    for (int i = 1; i < Model.Accounts.Count; i++)
    {
        <li>Account number @Html.EditorFor(m => m.Accounts[i].Account) @Html.ValidationMessageFor(m => m.Accounts[i].Account)</li>
    }

    <input type="submit" value="Add more..." name="add"/>
    <input type="submit" value="Continue" name="next"/>
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-17T11:52:06.143

以下应该有效：

```
public class AccountsValidator : AbstractValidator<AccountViewModel>
{
    public AccountsValidator()
    {
        RuleFor(x => x.Accounts).SetCollectionValidator(
            new AccountValidator("Accounts")
        );
    }
}

public class AccountValidator : AbstractValidator<string> 
{
    public AccountValidator(string collectionName)
    {
        RuleFor(x => x)
            .NotEmpty()
            .OverridePropertyName(collectionName);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-12T15:28:26.010

尝试使用：

```
public class AccountsValidator : AbstractValidator<AccountViewModel>
{
   public AccountsValidator()
   {
       RuleForEach(x => x.Accounts).NotNull()
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-17T09:15:41.800

你可以使用`RuleForEach` There is an easy class with a list of string

```
 public class Request
    {
        public IEnumerable<string> UserIds { get; set; }      
        public string  Body { get; set; }        
    } 
```

我创建了下一个验证器

```
public class RequestValidator : AbstractValidator<Request>
    {
        public RequestValidator()
        {        
            RuleForEach(x => x.UserIds).NotNull().NotEmpty();            
            RuleFor(x => x.Body).NotNull().NotEmpty();      
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-27T17:20:42.007

**验证类：**

```
using FluentValidation;
using System.Collections.Generic;

namespace Test.Validator
{

    public class EmailCollection
    {
        public IEnumerable<string> email { get; set; }

    }

    public class EmailValidator:  AbstractValidator<string>
    {
        public EmailValidator()
        {
            RuleFor(x => x).Length(0, 5);
        }

    }

    public class EmailListValidator: AbstractValidator<EmailCollection>
    {
        public EmailListValidator()
        {
            RuleFor(x => x.email).SetCollectionValidator(new EmailValidator());
        }

    }

} 
```

注意：我使用了最新的 MVC 5 (Nuget) 版本的 fluentvalidation。

# javascript - 实例化多个 Mootools 类的性能开销

> ID：10190317
> 
> 赞同：5
> 
> 时间：2012-04-17T11:26:16.677
> 
> 标签：javascript, performance, dom, mootools

我今天有个想法，也许一些javascript前辈可以回答。

在 Mootools 中创建多个类时估计的 DOM 开销是多少？

好的 OO 设计要求任何可重用的代码都应该放在一个类中。但是由于 mootools 中创建的每个类都显式地继承自“类”，因此它当然会得到很多额外的实例化。

所以我的 - 或多或少的哲学问题是，与简单对象相比，这对浏览器中的性能有多大影响，因为所有代码都是在加载时实例化的，例如使用 DTO 模式在数组中包含数百或数千个类。

沉思地，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:51:05.803

正确的。这是我的看法。首先，引用@keeto 的一句话：

# 保持优雅

''*最后一部分很重要。虽然类是实现模块化代码的一种非常好的方法，但它们并不是唯一的方法。我发现现在有些开发人员有一种令人反感的倾向，即对所有事物都使用类。就像众所周知的锤子一样，每个编码钉都使用类——这是不幸的，因为并非所有事物都应该是类。*

*类非常适合创建可跨项目使用的可重用代码，我个人坚持这一标准。除非我确定我正在构建的东西会被多次使用，否则我不会把它变成一个类。如果您没有注意到，您可以使用 MooTools 而无需定义单个自定义类。毕竟，**仅仅因为 MooTools 有类并不意味着您必须像使用 Java 一样使用 JavaScript 编写代码。******** ''

* * *

资料来源：http: [//keetology.com/blog/2010/10/01/modules-and-callbacks-going-hollywood-with-mootools](http://keetology.com/blog/2010/10/01/modules-and-callbacks-going-hollywood-with-mootools)

这是非常主观的，因为它在很大程度上取决于您通常如何编写类和 javascript。

使用类并非没有惩罚和开销。根据您实例化的类的类型，这会有所不同。例如，如果您的类是一个简单的数据抽象，不接触其他对象或输出到 DOM，那么制作实例相对便宜。成本将围绕处理选项对象和（有时）将属性复制到您的实例构造函数中。

在类定义本身期间，MooTools 会循环遍历所有构造函数对象属性并尝试处理所有特殊属性和突变体（例如，、、、`initialize`（`Implements`来自-more）等）`Extends`。`binds`不过，这是一次性的。创建构造函数后，您可以快速使用它。

它还会做其他事情——它将包装所有具有函数值的属性，以便您可以将它们装饰为私有（通过`.protect()`在当前 API 中），这样您运行的任何函数都会为您进行柯里化。此外，您通常也倾向于使用`.bind()`方法装饰器，这意味着运行的实际代码有 2 个包装器。

您的类越复杂（从不同的类原型扩展和实现），创建类实例的工作就越多。实际上，您需要创建一个绝对的怪物才能开始注意到这不是内存分配（启动延迟或垃圾收集）。当然，构造函数中的 cpu-heavy 或异步/阻塞的东西也不会很好，如果你做很多......

事件、事件监听器等也可以叠加。保存的对对象的引用会随着时间的推移而堆积起来。

然后，有类绑定到 DOM 元素，添加事件，监听事件，导出自己的事件......

将它们放在一起，它可能会变得有些昂贵。您正在创建从许多地方继承（希望通过原型链引用）的对象。即便如此，类构造函数本身的定义还是很快的，直到您创建了 1000 个实例，事情才会开始变得有趣，并对现代浏览器进行测试。

# css - 如何为 IE8 浏览器赋予渐变色？

> ID：10190318
> 
> 赞同：0
> 
> 时间：2012-04-17T11:26:21.873
> 
> 标签：css

我想通过 CSS 给渐变色。有什么方法可以给 IE8 渐变色。
目前以下代码适用于 IE10 但不适用于 IE8。

```
/* IE10 */ 
background-image: -ms-linear-gradient(top left, #FFFFFF 0%, #00A3EF 100%);

/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(top left, #FFFFFF 0%, #00A3EF 100%);

/* Opera */ 
background-image: -o-linear-gradient(top left, #FFFFFF 0%, #00A3EF 100%);

/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, right bottom, color-stop(0, #FFFFFF), color-stop(1, #00A3EF));

/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(top left, #FFFFFF 0%, #00A3EF 100%);

/* Proposed W3C Markup */ 
background-image: linear-gradient(top left, #FFFFFF 0%, #00A3EF 100%); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:29:19.450

看一下这个：

[css3pie](http://css3pie.com/)

它有一些问题，如果您尝试做很多事情，它可能会有点慢，但它是在 IE8 + 7 中使用 css3 的最佳方式。

# java - Java接口与模块化的正确用法是什么？

> ID：10190320
> 
> 赞同：1
> 
> 时间：2012-04-17T11:26:26.617
> 
> 标签：java, inheritance, interface, module

我正在尝试模块化遗留代码，这样做我遇到了这个问题：

我有两个属于同一个模块的类 - 以及许多其他类 - 每个类都有一个或多个在其他地方使用的公共方法。我想为模块创建一个通用接口，但我不确定如何去做。如果我为模块创建一个接口，我最终将不得不在所有使用该接口的类中实现空白方法，这听起来不太好。但是，如果我创建多个可由模块中的特定类使用的接口，我将把它们全部组合在一个仅用于类型引用的接口中：

```
/-------------\     /-------------\
| Interface A |     | Interface B |
\-------------/     \-------------/
/-------------\     /-------------\
|   Class A   |     |   Class B   |
\-------------/     \-------------/

/-------------\     /-------------\
| Interface A |     | Interface B |
\-------------/     \-------------/
            ^         ^
            |         |
        /------------------\
        | Module Interface |
        \------------------/ 
```

是否有任何设计模式可以帮助我解决这个问题，或者将构成特定模块的接口组合成一个子接口来表示模块类型，以正确的方式实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:35:48.867

我不确定我是否真的理解您的问题，但您可以通过继承将接口组合成一个接口。那就是接口支持多重继承。

可能适用于您的模式是适配器模式：[http ://en.wikipedia.org/wiki/Adapter_pattern](http://en.wikipedia.org/wiki/Adapter_pattern)

也尽量不要为了制作接口而制作接口。Java 在尝试为永远不会有其他实现的东西创建接口方面有着悠久的历史。除非您制作 API 考虑 KISS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:33:10.680

如果您创建一个通用接口，该接口的用户将期望它的所有方法都可以工作（除非在文档中明确说明如何使用）。

如果您最终不得不在接口级别上指定如何使用它的复杂规则，以便两个模块都能正常工作，那么您就会遇到创建自定义接口*不是*最佳主意的情况。

但是，如果两个模块中只有几个方法不同，并且调用时差异不会破坏模块，则可以创建自定义接口，然后提供每个模块接口的默认抽象实现，从中可以实际模块派生。抽象实现可以为公共接口中的所有方法定义一个默认（例如什么都不做）实现，因此具体模块类不必专门实现它们

```
interface AIface {
  void methodA();
}

interface BIface {
  void methodB();
}

interface CommonIface extends AIface, BIface {
}

abstract class CommonAbstract implements CommonIface {
  @Override
  void methodA() {}
  @Override
  void methodB() {}
}

class ModuleA extends CommonAbstract {
  @Override
  void methodA() {
    // A's implementation
  }
}

class ModuleB extends CommonAbstract {
  @Override
  void methodB() {
    // B's implementation
  }
} 
```

# perl - Perl 写入路径文件，然后使用 unix 的邮件发送

> ID：10190332
> 
> 赞同：0
> 
> 时间：2012-04-17T11:27:36.690
> 
> 标签：perl, email

我正在尝试编写一个写入文件的 Perl 脚本，然后使用 linux 的 mail 命令将 Perl 脚本写入文件的任何内容发送。我的代码如下：

```
my $pathfile='some_pathfile';
open(W_VAR,">>$pathfile");
print W_VAR 'hello';
close W_VAR;

my $email_command='mail -s'." header".' some_email_address'.' <'." $pathfile";
system($email_command); 
```

问题是路径文件中的内容永远不会被发送。如果我亲自填写该文件，一切都很好，但是 perl 写的任何内容都不会发送。当我检查时，内容在文件中。

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:27:35.043

我怀疑问题是您的程序没有用换行符终止该行`"\n"`。毫无疑问，您在手动编辑文件时将其放入文件中？

像这样的东西可能会解决它，但我手头没有 Linux 机器，所以我无法测试它。

```
use strict;
use warnings;

my $pathfile = 'path/to/file';
open my $w_var, '>>', $pathfile or die $!;
print $w_var "Hello\nWorld!\n";
close $w_var;

my $email_command = "mail -s header some\@emailaddress.com < $pathfile";
system $email_command; 
```

* * *

**编辑**

[但是使用Mail::Sendmail](https://metacpan.org/module/Mail%3a%3aSendmail)之类的东西会好得多。[Email::Sender](https://metacpan.org/module/Email%3a%3aSender)是迄今为止最好的，但连同它的依赖项一起，它是一个用于如此简单任务的巨大模块，我不愿在这里推荐它。

要使用的代码`Mail::Sendmail`如下所示：

```
use strict;
use warnings;

use Mail::Sendmail;

my $pathfile = 'path/to/file';

open my $w_var, '>>', $pathfile or die $!;
print $w_var "Hello\n", "World!\n";

my $message = do {
  open $w_var, '<', $pathfile or die $!;
  local $/;
  <$w_var>;
};

sendmail(
  To => 'some@emailaddress.com',
  From => 'my.address@email.com',
  Message => $message,
)
or die $Mail::Sendmail::error; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:14:50.653

我敢打赌，您的命令格式不正确：

尝试：

```
my $header = "My Subject";
my $some_email_address = "myaccount@myemail.com";
my $email_command="mail -s \"$header\" $some_email_address < $pathfile"; 
```

# iphone - 如何在视频上添加叠加文本，然后重新编码？

> ID：10190333
> 
> 赞同：8
> 
> 时间：2012-04-17T11:27:40.173
> 
> 标签：iphone, objective-c, ios, ipad, video-editing

我想从我的 iOS 应用程序中编辑视频。我想要一些关于语言字幕的源视频文本。然后我想保存覆盖了该文本的视频。文字不仅仅是显示目的。但是当我打开编辑的视频时，它会显示更新的视频。

这在 iOS 应用程序中是否可行？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T07:08:32.357

```
- (void)addAnimation
{       
    NSString *filePath = [[NSBundle mainBundle] pathForResource:videoName ofType:ext];

    AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:[NSURL fileURLWithPath:filePath]  options:nil];

    AVMutableComposition* mixComposition = [AVMutableComposition composition];

    AVMutableCompositionTrack *compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

    AVAssetTrack *clipVideoTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

    [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) ofTrack:clipVideoTrack atTime:kCMTimeZero error:nil];

    [compositionVideoTrack setPreferredTransform:[[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] preferredTransform]];

    CGSize videoSize = [clipVideoTrack naturalSize];

    UIImage *myImage = [UIImage imageNamed:@"29.png"];
    CALayer *aLayer = [CALayer layer];
    aLayer.contents = (id)myImage.CGImage;
    aLayer.frame = CGRectMake(videoSize.width - 65, videoSize.height - 75, 57, 57);
    aLayer.opacity = 0.65;
    CALayer *parentLayer = [CALayer layer];
    CALayer *videoLayer = [CALayer layer];
    parentLayer.frame = CGRectMake(0, 0, videoSize.width, videoSize.height);
    videoLayer.frame = CGRectMake(0, 0, videoSize.width, videoSize.height);
    [parentLayer addSublayer:videoLayer];
    [parentLayer addSublayer:aLayer];

    CATextLayer *titleLayer = [CATextLayer layer];
    titleLayer.string = @"Text goes here";
    titleLayer.font = CFBridgingRetain(@"Helvetica");
    titleLayer.fontSize = videoSize.height / 6;
    //?? titleLayer.shadowOpacity = 0.5;
    titleLayer.alignmentMode = kCAAlignmentCenter;
    titleLayer.bounds = CGRectMake(0, 0, videoSize.width, videoSize.height / 6); //You may need to adjust this for proper display
    [parentLayer addSublayer:titleLayer]; //ONLY IF WE ADDED TEXT

    AVMutableVideoComposition* videoComp = [AVMutableVideoComposition videoComposition];
    videoComp.renderSize = videoSize;
    videoComp.frameDuration = CMTimeMake(1, 30);
    videoComp.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer inLayer:parentLayer];

    AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [mixComposition duration]);
    AVAssetTrack *videoTrack = [[mixComposition tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    AVMutableVideoCompositionLayerInstruction* layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];
    instruction.layerInstructions = [NSArray arrayWithObject:layerInstruction];
    videoComp.instructions = [NSArray arrayWithObject: instruction];

    AVAssetExportSession *assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];//AVAssetExportPresetPassthrough
    assetExport.videoComposition = videoComp;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* VideoName = [NSString stringWithFormat:@"%@/mynewwatermarkedvideo.mp4",documentsDirectory];

    //NSString *exportPath = [NSTemporaryDirectory() stringByAppendingPathComponent:VideoName];
    NSURL *exportUrl = [NSURL fileURLWithPath:VideoName];

    if ([[NSFileManager defaultManager] fileExistsAtPath:VideoName])
    {
        [[NSFileManager defaultManager] removeItemAtPath:VideoName error:nil];
    }

    assetExport.outputFileType = AVFileTypeQuickTimeMovie;
    assetExport.outputURL = exportUrl;
    assetExport.shouldOptimizeForNetworkUse = YES;

    //[strRecordedFilename setString: exportPath];

    [assetExport exportAsynchronouslyWithCompletionHandler:
     ^(void ) {
         dispatch_async(dispatch_get_main_queue(), ^{
             [self exportDidFinish:assetExport];
         });
     }
     ];
}

-(void)exportDidFinish:(AVAssetExportSession*)session
{
    NSURL *exportUrl = session.outputURL;
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

    if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:exportUrl])
    {
        [library writeVideoAtPathToSavedPhotosAlbum:exportUrl completionBlock:^(NSURL *assetURL, NSError *error)
         {
             dispatch_async(dispatch_get_main_queue(), ^{
                 if (error) {
                     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Video Saving Failed"
                                                                    delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                     [alert show];
                 } else {
                     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Video Saved" message:@"Saved To Photo Album"
                                                                    delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                     [alert show];
                 }
             });
         }];

    }
    NSLog(@"Completed");
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"AlertView" message:@"Video is edited successfully." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:39:26.000

一种方法是将您的文本覆盖创建为 CoreAnimation CATextLayer，将其附加到 AVAssetExportSession 的 videoComposition，然后导出您的视频。生成的视频将在其上渲染叠加层。

这带来了一些好处：

1.  您不必停留在 CATextLayer - 您可以构建包含 CAGradientLayer、CAShapeLayer 等的 CALayer 树。
2.  作为核心*动画*层，它们的许多属性都是可动画的，因此您可以免费在视频中获得流畅的 iOS 风格动画。

听起来不错，对吧？有*一点*副作用：根据您使用的导出预设，您的视频将不可避免地以恒定帧速率重新编码 - 对我来说是 30fps。为了保持较小的文件大小，我故意通过省略冗余帧来降低帧速率，所以为了静态横幅，这对我来说是个大问题。

有一些名为 AVEditDemo 的 Apple 示例代码演示了此功能等。这里有找到它的[说明](https://stackoverflow.com/questions/7419343/iphone-aveditdemo-or-any-video-processing-examples "这里")。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-05T08:35:55.593

使用 Chaitali Jain 代码，新视频将在没有音频的情况下保存。有人对这个问题有想法吗？谢谢！

# python - 与 Python 2.7 等效的 gae-sessions

> ID：10190340
> 
> 赞同：3
> 
> 时间：2012-04-17T11:27:59.983
> 
> 标签：python, google-app-engine, session, python-2.7

我想知道 AppEngine 上的“新”Python（2.7）是否有 gae-sessions 端口（https://github.com/dound/gae-sessions）。或任何其他可比较的库。

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:44:08.123

如果您使用的是 webapp2，它具有内置的会话机制：

[http://webapp-improved.appspot.com/api/webapp2_extras/sessions.html](http://webapp-improved.appspot.com/api/webapp2_extras/sessions.html)

# jquery - 在带有 ids 的 jquery 中滑动向上

> ID：10190351
> 
> 赞同：0
> 
> 时间：2012-04-17T11:28:39.627
> 
> 标签：jquery

```
var Ids = $('.head:has(:checkbox:checked)')
               .map(function() { return this.id })
               .get(); alert(Ids); 
```

我有上面代码的ID。但是，我不能用这些ID向上滑动

为什么这不起作用？

```
function(response){
        alert("Başarıyla silindi");
         $('#'+Ids).each('slow', function() {
    }).slideUp(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:35:17.947

```
$.each(Ids, function() {
   $('#'+this).slideUp('slow');
}); 
```

这几乎是一样的：

```
var Ids = $('.head:checked');

$.each(Ids, function() {
   $('#'+this.id).slideUp('slow');
});​ 
```

要不就：

```
$('.head:checked').slideUp('slow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:30:52.543

首先`Ids`是一个数组，所以不能直接使用`$("#"+Ids)`.

接下来，即使 Ids 不是数组并且引用到字符串变量`$("#"+Ids)`也会返回一个`HTML element`，它没有`.each()`函数。

正确的方法是

```
$.each(Ids, function(v) {
  $("#"+v).slideUp("slow"):
}); 
```

# c# - UIElementCollection 不能为空。预期从 UIElement 派生的对象？

> ID：10190356
> 
> 赞同：0
> 
> 时间：2012-04-17T11:28:51.373
> 
> 标签：c#, wpf, xaml, custom-controls, uielement

我试图从后面的代码中创建一个按钮，该按钮具有与此相同的属性：

```
<Button Content="Find Student" Tag="FindStudent" HorizontalAlignment="Right" x:Name="btnFindStudent" Click="btnGeneral_Click" /> 
```

后面的代码：

```
 Button btnFindStudent = new Button();
            btnFindStudent.Click += this.btnGeneral_Click;
            btnFindStudent.Name = Convert.ToString("btnFindStudent");
            btnFindStudent.Tag = Convert.ToString("FindStudent");
            btnFindStudent.Content = Convert.ToString("View");
            btnFindStudent.HorizontalAlignment = HorizontalAlignment.Right;
            btnFindStudent.Height = 20;
            btnFindStudent.Width = 36; 
```

问题是当我单击按钮时出现错误

```
Value cannot be null.
Parameter name: Children of 'System.Windows.Controls.UIElementCollection' cannot be null. Object derived from UIElement expected. 
```

而且我不太确定缺少什么，这是完整的代码：

```
public partial class FindStudent : UserControl
{
    private Dictionary<string, UserControl> _userControls = new Dictionary<string, UserControl>();
    public Dictionary<string, UserControl> GetUserControls()
    {
        return _userControls;
    }
    private static readonly Random rand = new Random();
    public FindStudent()
    {
        InitializeComponent();

        List<string> userControlKeys = new List<string>();
        userControlKeys.Add("FindStudent");
        Type type = this.GetType();
        Assembly assembly = type.Assembly;
        foreach (string userControlKey in userControlKeys)
        {
            string userControlFullName = String.Format("{0}.AppPages.{1}", type.Namespace, userControlKey);
            UserControl userControl = (UserControl)assembly.CreateInstance(userControlFullName);
            _userControls.Add(userControlKey, userControl);
        }
        for (int i = 1; i <= 10; i++)
        {
            Button btnFindStudent = new Button();
            btnFindStudent.Click += this.btnGeneral_Click;
            btnFindStudent.Name = Convert.ToString("btnFindStudent");
            btnFindStudent.Tag = Convert.ToString("FindStudent");
            btnFindStudent.Content = Convert.ToString("View {0}", i);
            btnFindStudent.HorizontalAlignment = HorizontalAlignment.Right;
            btnFindStudent.Height = 20;
            btnFindStudent.Width = 36;

            StackPanel stackPanel = new StackPanel();
            stackPanel.Children.Add(btnFindStudent);
            MainArea.Children.Add(stackPanel);
        }
    }
    private void btnGeneral_Click(object sender, RoutedEventArgs e)
    {
        PanelMainContent.Children.Clear();
        Button button = (Button)e.OriginalSource;
        Type type = this.GetType();
        Assembly assembly = type.Assembly;

        PanelMainContent.Children.Add(_userControls[button.Tag.ToString()]);
        // error on above line. 
    }
} 
```

xml:

```
<UserControl x:Class="WpfApplication4.AppPages.FindStudent"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <DockPanel HorizontalAlignment="Stretch" >
        <ScrollViewer VerticalScrollBarVisibility="Hidden">

            <DockPanel x:Name="PanelMainWrapper" Margin="10,20,0,0">
                <DockPanel x:Name="PanelMainContent" HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="0,30,0,0">
                    <ScrollViewer VerticalScrollBarVisibility="Hidden">
                        <WrapPanel x:Name="MainArea" VerticalAlignment="Bottom" HorizontalAlignment="Left">

                        </WrapPanel>
                    </ScrollViewer>
                </DockPanel>
            </DockPanel>

        </ScrollViewer>
    </DockPanel>
</UserControl> 
```

它应该只是重新加载我当前使用的页面，我可以在以后设置 appPage，但它不想玩球。**这在我的主窗口中有效，只是不在我的控件上**，但我没有从后面的代码中设置按钮，我使用了我在主窗口中首先提到的 xaml。这告诉我我在单击按钮时遗漏了一些东西（我认为设置正确），标签设置正确但我不确定名称是否会像我的 xaml 代码一样是 x:Name。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:49:11.690

尽管您的代码确实让我感到困惑，但这是行不通的。您通过以下方式构建完全限定的类型名称

```
String.Format("{0}.AppPages.{1}", type.Namespace, userControlKey) 
```

其中`type.Namespace`已经包含所讨论类型的完整命名空间，因此“AppPages”部分是不必要的。相反，你应该写

```
String.Format("{0}.{1}", type.Namespace, userControlKey) 
```

为什么不干脆做

```
assembly.CreateInstance(type.FullName); 
```

当您只想创建一个新实例时`FindStudent`（我猜这就是您想要做的）。

# emacs - 如何在根文件上使用 emacsclient，使用 sudo 和单个守护程序

> ID：10190358
> 
> 赞同：15
> 
> 时间：2012-04-17T11:28:57.043
> 
> 标签：emacs, permissions, emacsclient

我总是将 emacs 作为守护进程运行，但是当我想做类似的事情时

```
sudo emacsclient /etc/make.conf 
```

我不能这样做，因为 root 正在使用另一个 emacs，我真的不想运行 2 个守护程序或等待通常的 emacs 加载简单文件。

我需要一些类似的解决方案`emacsclientsudo /etc/make.conf`:) 使用用户 emacs 客户端编辑系统文件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-17T12:40:17.410

添加到您的`~/.profile`：

```
alias E="SUDO_EDITOR=\"emacsclient\" sudo -e" 
```

然后

```
E /etc/hosts 
```

您应该可以使用`sudoedit`代替`sudo -e`，但我在我的 Mac 上找不到前者。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-17T11:36:16.097

我不确定，但这是一个技巧

```
emacsclient -e '(find-file "/sudo::/etc/passwd")' 
```

使用 tramp 和 sudo 方法以`/etc/passwd`root 身份打开。

你可以给它取别名并直接从你的 shell 中使用它。

# cxf - 如何通过 Mule ESB 中的单个 http:inbound-endpoint 公开多个 cxf:jaxws-service

> ID：10190362
> 
> 赞同：1
> 
> 时间：2012-04-17T11:29:13.823
> 
> 标签：cxf, esb, mule, endpoint

我正在尝试按照此配置通过 mule 中的单个端点公开多个服务接口：每个服务接口都有一个稍微不同的 url (1) [http://localhost/services/Login](http://localhost/services/Login) (2) [http://localhost/services/行政](http://localhost/services/Admin)

但是我收到错误“Soap 1.1 端点已在地址上注册”

关于如何做到这一点的任何提示？我只想使用 cxf 服务在 SOAP 和 Java 之间编组/解组，并在以后提供 ws-security。

```
<flow name="flow_Services">
    <http:inbound-endpoint address="http://localhost/services" exchange-pattern="request-response">

    <choice>
        <when expression="inbound:http.request=/services/Login" evaluator="header">
            <cxf:jaxws-service serviceClass="com.ws.client.generated.Login" />
            <component><spring-object bean="Login"/></component>
        </when>

        <when expression="inbound:http.request=/services/Admin" evaluator="header">
            <cxf:jaxws-service serviceClass="com.ws.client.generated.Admin" />
            <component><spring-object bean="Admin"/></component>
        </when>
    </choice> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:57:16.587

您可以拥有多个具有相同主机名和端口但路径不同的 http 入站端点。这是我测试的一个简单示例：

```
<flow name="Flow" doc:name="EchoFlow">
    <http:inbound-endpoint exchange-pattern="request-response" 
         host="localhost" port="8084" path="services/hello" />
    <cxf:jaxws-service port="80" serviceClass="mypackage.ServiceInterface" />
    <component class="mypackage.ServiceClass" />
</flow>
<flow name="Flow2" doc:name="EchoFlow2">
    <http:inbound-endpoint exchange-pattern="request-response" 
         host="localhost" port="8084" path="services/goodbye" />
    <cxf:jaxws-service port="80" serviceClass="mypackage.ServiceInterfaceTwo" />
    <component class="mypackage.ServiceClassTwo" />
</flow> 
```

在这里，我们托管了两个 Web 服务；两个端点 URL 都开始

```
http://localhost:8084/services/ 
```

但有不同的结局（你好和再见）。ServiceInterface 类如下所示：

```
package mypackage;
import javax.jws.WebMethod;
import javax.jws.WebService;

@WebService
public interface ServiceInterface {
    @WebMethod
    String sayHello(String name);
} 
```

ServiceClass 看起来像这样：

```
package mypackage;
import javax.jws.WebService;

@WebService(endpointInterface = "mypackage.ServiceInterface")
public class ServiceClass implements ServiceInterface {
    public String sayHello(String name) {
        return "Hello "+name;
    } 
} 
```

ServiceInterfaceTwo 和 ServiceClassTwo 是相同的，但它不是 sayHello()，而是 sayGoodbye()。

# c++ - 创建脚本扩展器

> ID：10190363
> 
> 赞同：2
> 
> 时间：2012-04-17T11:29:14.970
> 
> 标签：c++, hook

我想在 C/C++ 中为一个小游戏创建一个脚本扩展器，非常类似于[Skyrim Script Extender](http://skse.silverlock.org/)和[FalloutNV Script Extender](http://nvse.silverlock.org/)，因为它从游戏自己的语言中挂钩脚本命令并为其添加功能甚至全新的方法。

不幸的是，我不知道从哪里开始。有谁知道我可以去的任何地方或任何可以帮助我学习的谷歌？我已经尝试阅读上述程序的源代码，但无济于事。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-06T13:45:40.730

这些允许扩展游戏的工具中的大多数都或多或少地像计算机病毒一样工作。他们修改原始代码以注入自己的代码，除了代码做了一些好事，比如给你的角色更好的盔甲，而不是像破坏你的电脑这样卑鄙的事情。但是，原则上，使用的技术是*相同*的。

不幸的是，详细解释如何编写计算机病毒显然违反了堆栈溢出的服务条款。即使是改装本身也可能存在可疑的法律问题。

**逆向工程法律问题常见问题解答：**
[https ://www.eff.org/issues/coders/reverse-engineering-faq](https://www.eff.org/issues/coders/reverse-engineering-faq)

但是，我可以给你一些概括性的建议，希望你能指出正确的方向而不会被禁止。

修改别人的编译软件基本上是调试目标代码的艺术。如果您可以理解代码的作用，那么您可以更改代码的作用。**因此，最好的起点是阅读 C 调试器的文档。**作为学习调试器的一部分，您还应该学习汇编代码。您不需要成为这方面的专家，但您需要了解基础知识。如果你能真正掌握你的调试器，剩下的就是小菜一碟了。

所以，事不宜迟……

* * *

## Modder的禁读清单

垫片（计算）：
[http://en.wikipedia.org/wiki/Shim_(计算)](http://en.wikipedia.org/wiki/Shim_(computing))

DLL 注入：
[http ://en.wikipedia.org/wiki/DLL_injection](http://en.wikipedia.org/wiki/DLL_injection)

依赖步行者：
[http ://en.wikipedia.org/wiki/Dependency_Walker](http://en.wikipedia.org/wiki/Dependency_Walker)

动态链接库搜索顺序： http:
[//msdn.microsoft.com/en-us/library/windows/desktop/ms682586 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586(v=vs.85).aspx)

PE 文件格式：(Windows)
[http://en.wikipedia.org/wiki/Portable_Executable](http://en.wikipedia.org/wiki/Portable_Executable)

Microsoft PE 和 COFF 规范：http:
[//msdn.microsoft.com/en-us/windows/hardware/gg463119.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463119.aspx)

ELF 文件格式：（Linux、一些游戏机和投币操作）
[http://en.wikipedia.org/wiki/Executable_and_Linkable_Format](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)

名称修改：
[http ://en.wikipedia.org/wiki/Name_mangling](http://en.wikipedia.org/wiki/Name_mangling)

不要在你的 DllMain 中做任何可怕的事情的一些原因：（除了你的情况......）
[http://blogs.msdn.com/b/oldnewthing/archive/2004/01/27/63401.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/01/27/63401.aspx)

GetProcAddress 函数：http:
[//msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)

手动遍历堆栈： http:
[//msdn.microsoft.com/en-US/library/windows/hardware/ff552143 (v=vs.85).aspx](http://msdn.microsoft.com/en-US/library/windows/hardware/ff552143(v=vs.85).aspx)

Windows 调试工具 (DDK)： http: [//msdn.microsoft.com/library/windows/hardware/ff551063 (v=vs.85).aspx](http://msdn.microsoft.com/library/windows/hardware/ff551063(v=vs.85).aspx)

内存窗口：（查看内存内容）
[http://msdn.microsoft.com/en-us/library/s3aw423e (v=vs.120).aspx](http://msdn.microsoft.com/en-us/library/s3aw423e(v=vs.120).aspx)

或者使用 dll 进入地址空间......

缓冲区溢出：（如今，越狱 ROM 比软件更多）
[http://en.wikipedia.org/wiki/Buffer_overflow](http://en.wikipedia.org/wiki/Buffer_overflow)

指令重定位：（“老派”）
[http://en.wikipedia.org/wiki/Relocation_%28computing%29](http://en.wikipedia.org/wiki/Relocation_%28computing%29)

变基：（“老派”）
[http://en.wikipedia.org/wiki/Rebasing](http://en.wikipedia.org/wiki/Rebasing)

* * *

## 可访问性 API

**我想推荐一个干净的、合法的、尽管更有限的替代方案：可访问性挂钩。任何有能力的程序员都可以实现可访问性功能，而无需巫术或巫术。**

Windows 辅助功能 API：http:
[//msdn.microsoft.com/en-us/library/windows/desktop/dd373592%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373592%28v=vs.85%29.aspx)

Android 无障碍服务：http:
[//developer.android.com/reference/android/accessibilityservice/AccessibilityService.html](http://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html)

辅助功能是操作系统放置的“钩子”，允许残疾用户（例如盲人或瘫痪者）使用一般“修改”软件的工具。这是为了添加诸如屏幕阅读器之类的功能，这些功能可以大声朗读用户界面，因为用户看不到。

虽然这些钩子专门用于响应按钮按下之类的事情，但您可以以许多创造性的方式滥用它们。例如，您可以创建一个可访问性挂钩，将热键添加到没有内置热键功能的程序中。

可访问性挂钩是最干净和最负责的方式。它不需要修改程序二进制文件，可访问性挂钩*旨在*允许您更改软件的行为。最重要的是，按设计使用的可访问性挂钩不需要对原始软件进行逆向工程，也不需要违反 EULA *。*

但是，有一些限制。一些（许多）游戏直接绘制到屏幕上，而无需通过操作系统对按钮进行后端处理；或者他们直接访问硬件而不通过鼠标事件等。有残障意识的公司通常会提供一种模式来关闭它或替代。例如，AMD Cataylst 可以让你关闭 CCC 控制面板上的橱窗装饰，让它与辅助工具一起工作。有些游戏直接绘制到屏幕上，但会通过按钮事件和文本标签向操作系统发出信号，因此屏幕阅读器仍然可以正常工作。虽然 Valve 可以直接访问，但他们实现了自己的隐藏式字幕。这是代码质量的事情。不幸的是，很多人没有想到残疾人。这真的取决于游戏。

*因此，如果*可以，请在游戏支持的情况下使用操作系统的辅助功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:19:48.370

不幸的是，SKSE 和相关程序使用的技术并不简单，而且很难完全掌握，所以如果您没有立即“掌握”，请不要担心。我非常基本的理解是，它会在内存中找到 Skyrim 的功能、方法和数据，并根据需要对其进行修改。为了添加新代码，游戏的数据结构和类需要从反汇编和 EXE 中留下的调试信息进行逆向工程。

最终，最好的信息来源将是源代码本身。如果您真的有兴趣了解它是如何完成的，我将大致按如下方式处理该问题：

1.  快速复习所有SKSE类并绘制类结构。
2.  对于每个课程，基本了解它的用途。
3.  找到 SKSE 的起点并手动跟踪程序的执行。通过“手动跟踪”，我的意思是实际阅读代码并尝试了解它在做什么。
4.  一旦您认为您对代码有很好的理解，请尝试使用 SKSE 代码创建一些测试项目。

其他选择是查看更成熟但使用类似技术的[Oblivion](http://obse.silverlock.org/)或[Morrowind脚本扩展器。](http://sourceforge.net/projects/mwse/)[如果您有时间，另一个选择是在Skyrim Mods](http://forums.bethsoft.com/forum/183-skyrim-mods/)官方论坛中查看所有“ianpatt”和其他 SKSE 开发者论坛主题，因为他不时讨论各种低级主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:24:50.380

您提到的两个项目都是开源的，它们的源代码将是最好的起点。您尝试扩展的脚本语言确实在一定程度上改变了需要做的事情，那些开源的（如 Lua、v8 等）比专有的闭源语言（如 SC2 Galaxy 脚本或 NWNScript）更容易扩展）。

您可能还想研究您尝试扩展的游戏脚本，因为其他人可能已经完成了所需的部分（例如使用 NWNScript）。

如果您确实陷入了最坏的情况，最好的起点是您的汇编程序和调试/逆向工程技能，使用 OllyDBG 或 IDA 等工具。

# javascript - 在 WatiN 中运行 JavaScript 失败

> ID：10190371
> 
> 赞同：1
> 
> 时间：2012-04-17T11:29:48.440
> 
> 标签：javascript, watin

我正在尝试通过 FireEvent() 方法单击 span 元素（通常 click() 不起作用）：

```
IE.Span(Find.ById("ueiwo-r")).FireEvent("onmouseclick"); 
```

但我收到一个错误：

> 异常：RunScriptException，RunScript 失败内部：HRESULT 异常：0x80020101

有谁知道如何解决这个问题？

这是html片段：

```
<td class="urMnuTxt">
<span style="white-space: nowrap;">Add New Item 
```

我有 Win7、IE8 和 WatiN 2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:41:39.480

我找到了解决方案：在单击之前，我先单击`FireEvent("onmousemove")`，然后单击以下代码：

```
IE.Span(Find.ById("ueiwo-r")).FireEvent("onmousemouve");
IE.Span(Find.ById("ueiwo-r")).click(); 
```

这对我行得通。

# regex - 对电子邮件正则表达式的一点修正

> ID：10190373
> 
> 赞同：0
> 
> 时间：2012-04-17T11:30:03.137
> 
> 标签：regex

这是我的表情

```
(\w+\.)*\w+\s*(@|\({1}\s*at\s*\){1}|\s+at\s+){1}\s*(\S{2,3}\.)?(\w+)(\s*dot\s*|\s*\.*\s*)(com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum|ru)\b 
```

从**l@ombe@cs.name.edu**给出**ombe@cs.name.edu**这是错误的

 **我需要从可能的变体中排除**l@ombe@cs.name.edu**

作为我家庭作业的一部分，我开发了这个正则表达式来从各种混淆字符串中提取电子邮件，而不是进行验证。坚持**l@ombe@cs.name.edu**测试。

你能帮帮我吗？

**重新定义：**

表达：

```
(\w+)@(\w+)\.name\.edu 
```

2个字符串：

*   name@name1@cs.name.edu
*   name2@cs.name.edu

结果得到：

*name1@cs.name.edu*和*name2@cs.name.edu*

1部分根本不能包括在内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:35:28.977

您可以使用 ^ 和 $ 将正则表达式锚定到字符串的开头和结尾。这会强制匹配整个字符串，而不是仅匹配其中的一部分。

在你的情况下：

```
^(\w+\.)*\w+\s*(@|\({1}\s*at\s*\){1}|\s+at\s+){1}\s*(\S{2,3}\.)?(\w+)(\s*dot\s*|\s*\.*\s*)(com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum|ru)\b$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:56:55.033

**[RFC 2822](http://www.ietf.org/rfc/rfc2822.txt?)**

```
(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/ =?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\ [\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0 -9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0- 5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0 -4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\ x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])

```**

# ruby-on-rails - [弃用] MultiJson.decode 已弃用

> ID：10190376
> 
> 赞同：3
> 
> 时间：2012-04-17T11:30:04.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我有一个简单的类，当用户请求服务器时，我想将其输出为 JSON。

```
class GeoName

include ActiveModel::Validations
include ActiveModel::Serialization

validates :country_name, :presence => true, :length => {:minimum => 1}
validates :country_code, :presence => true, :length => {:minimum => 1}
validates :province, :presence => true, :length => {:minimum => 1}
validates :district, :presence => true, :length => {:minimum => 1}
validates :zip_code, :presence => true, :length => {:minimum => 1}
validates :city, :presence => true, :length => {:minimum => 1}
validates :street, :presence => true, :length => {:minimum => 1}

attr_accessor :country_name, :country_code, :province, :district, :zip_code, :city, :street

def attributes
 @attributes ||= {'country_name' => country_name, 'country_code' => country_code, 'province' => province,'district' => district,'zip_code' => zip_code,'city' => city, 'street' => street}
end

end 
```

在控制器中，我执行以下操作：

```
def index
    geoname = GeoName.new 
    geoname.street = "blablabla"
    geoname.city = "blablabla" 
    render :json => geoname.to_json
  end 
```

在路线.rb

```
controller :testcontroller do
    match 'testme', :to => :index
  end 
```

当我请求 url localhost:3000/testme 时，我收到一个有效的 JSON 响应。但是控制台中存在弃用警告

```
rvm/gems/ruby-1.9.3-p125@geo/gems/activesupport-3.1.0/lib/active_support/json/decoding.rb:12:in `decode': [DEPRECATION] MultiJson.decode is deprecated and will be removed in the next major version. Use MultiJson.load instead. 
```

Ruby 版本 1.9.3-p125 和 rails - 3.1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:53:50.607

一个快速的谷歌会显示这是一个警告`MultiJSON`，应该在进一步的版本中消失（当不推荐使用的代码及其消息从 gem 代码中删除时）。基本上，这是对`MultiJSON.decode`在其代码中使用的开发人员的警告。如果您不在`MultiJSON.decode`代码中使用，请忽略它。

一旦依赖的 gem 被更新并且您将更新的 gem 捆绑到您的项目中，该消息可能会消失。

# iphone - 在表格视图中的选择行上添加行

> ID：10190377
> 
> 赞同：0
> 
> 时间：2012-04-17T11:30:12.010
> 
> 标签：iphone, objective-c

我需要在表格视图的 do select 方法上添加更多行。我通过 Web 服务在表格视图上显示数据，当单击一行时，根据另一个 Web 服务添加更多行。当点击另一行时，隐藏第一行所有行。

实际上，我想做与 iPhone 应用中的 Linked 相同的操作

你们能帮帮我吗..欣赏你的想法

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:35:46.930

如果要使用**insertRowsAtIndexPath**插入新单元格，则必须首先更新表的数据源。此外，此方法应在以下之间调用：

**[表开始更新]；**

和

**[表格结束更新]；**

由此：

请注意在 beginUpdates 和 endUpdates 方法定义的动画块中调用此方法时的行为。UITableView 将任何行或节的插入推迟到它处理了行或节的删除之后。无论插入和删除方法调用的顺序如何，都会发生这种情况。这与在可变数组中插入或删除项目不同，其中操作会影响用于连续插入或删除操作的数组索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:41:58.013

```
- (void)AddButtonAction

{

[arry addObject:@"Tutorial "];//in your array add json data after parsing and than call this method..

[Table reloadData];

}

- (void)DeleteButtonAction

{

[arry removeLastObject];

[Table reloadData];

} 
```

[有关教程或示例代码，请访问此参考站点。](http://www.roseindia.net/tutorial/iphone/examples/iphone-DeleteandaddrowfromTableView.html)

希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:13:29.177

您应该从此链接下载苹果源代码

```
[http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html][1] 
```

# php - 带有多复选框选择的 jQuery UI 对话框。在触发对话框之前，无法保存帖子数组以进行多选

> ID：10190382
> 
> 赞同：0
> 
> 时间：2012-04-17T11:30:45.460
> 
> 标签：php, javascript, jquery, html, jquery-ui

### HTML

```
<td class="cell">
    <a class="opener"
       id="opener_'.$iterator.'"
       href="#"
       rel="#type_dialog_<?= $iterator; ?>">Select</a>
    <div id="type_dialog_<?= $iterator; ?>"
         name="type"
         class="dialog"
         style="display:none"> 
```

### jQuery代码

```
$('.dialog').bind('dialogclose', function(event, ui) {
    $(this).closest('div.ui-dialog').appendTo('#mlsForm');
});

$('.opener').click(function(event) {
    $(".dialog").dialog("close");
    var top = $(event.target).offset().top + 15;
    var left = $(event.target).offset().left;
    $( ".dialog" ).dialog( "option", "position", [left, top] );
    $(event.target.rel).dialog("open");
    return false;
}); 
```

问题是，除非用户单击“选择”，否则我的更新查询会收到一个空的 POST 数组！我查了一下，没有设置。PHP 运行以填充现有的“选中”复选框，但如果没有用户首先单击“选择”以触发对话框，我无法让它保存现有的复选框。

为了澄清，选择数据存在于对话框下方，其`div`工作方式如下：

```
$input_name = "listing[$iterator][ptid][]";
if (!empty ($numptc1)) {
    $tbl_links .= "<td><label><input type='checkbox' name='".$input_name."' value='".$ptid[$i]."' checked />$ptname[$i]</label></td>\n";
}
else {
    $tbl_links .= "<td><label><input type='checkbox' name='".$input_name."' value='".$ptid[$i]."' />$ptname[$i]</label></td>\n";
} 
```

当对话框被触发时，我得到了一个预期的数组，但不是：

```
[ptid] => Array
    (
        [0] => 3
        [1] => 30
        [2] => 18
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:33:56.430

您可以在[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)准备好后[触发（）](http://api.jquery.com/trigger/)点击事件：

```
$(document).ready(function() {
    $('.opener').trigger("click");
}); 
```

# c# - 存储库模式实现

> ID：10190384
> 
> 赞同：17
> 
> 时间：2012-04-17T11:30:49.577
> 
> 标签：c#, design-patterns

似乎我发现的存储库模式的每个示例，在某些方面的实现都是不同的。以下是我主要找的两个例子。

```
interface IProductRepository
{
    IQueryable<Product> FindAll();
} 
```

然后通常会有另一层与存储库对话并调用 FindAll() 方法并执行任何操作，例如查找以字母 's' 开头的产品或获取特定类别中的产品。

我发现很多其他示例将所有查找方法放入存储库

```
interface IProductRepository
{
    IEnumerable<Product> GetProductsInCategory(int categoryId);
    IEnumerable<Product> GetProductsStartingWith(string letter);
    IEnumerable<PromoCode> GetProductPromoCodes(int productId);
} 
```

你建议我走哪条路？或者彼此有什么优点/缺点？

根据我阅读[http://martinfowler.com/eaaCatalog/repository.html](http://martinfowler.com/eaaCatalog/repository.html)的理解，第一种方法似乎最能反映这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T11:34:53.943

第一个太可怕了。`IQueryable`就像一个[上帝的对象](http://en.wikipedia.org/wiki/God_object)。很难找到 100% 完整的实现（即使在所有 OR/M 中）。您可以直接公开您的 ORM 而不是使用它，因为否则您可能会得到一个[泄漏的抽象层](http://en.wikipedia.org/wiki/Leaky_abstraction)。

乔尔说得最好（文字来自[维基百科文章](http://en.wikipedia.org/wiki/Leaky_abstraction)）：

> 在 Spolsky 的文章中，他提请注意许多在大多数情况下都有效的抽象示例，但其中的底层复杂性的细节不容忽视，从而将复杂性推向了本应由抽象本身简化的软件

[乔尔斯博客条目](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)

***第二种方法更容易实现并保持抽象完整。***

**更新**

您的存储库违反了单一职责原则，因为它有两个更改理由。第一个是 Products API 是否更改，另一个是 PromoCode API 是否更改。您应该恕我直言使用两个不同的存储库，例如：

```
interface IProductRepository
{
    IEnumerable<Product> FindForCategory(int categoryId);
    IEnumerable<Product> FindAllStartingWith(string letter);
}

interface IPromoCodeRepository
{
    IEnumerable<PromoCode> FindForProduct(int productId);
} 
```

改变的事情：

*   我倾向于在`Find`返回多个项目以及返回`Get`单个项目时开始方法。
*   更短的方法名称 = 更容易阅读。
*   单一责任。更容易判断使用存储库的类具有哪些依赖项。

定义良好的小型接口可以更容易地发现违反 SOLID 原则的行为，因为违反原则的类往往会导致构造函数臃肿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:00:09.547

共识正在建立：一直是第二个选项。除了 IQueryable 的查询逻辑到处泄漏，很难正确实现之外，很难测试和模拟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:35:11.390

我个人建议使用第二个示例，这样您就可以将搜索逻辑封装在一个地方，并且调用者的意图由他们调用的方法的名称明确定义。如果您使用第一个示例，您的查询代码将在整个应用程序中泄漏，并且您最终会重复查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:37:13.327

我建议避免重复。这是第一个目标。如果您的逻辑可以在多个地方找到以某个字母开头的产品，那么这是一种特殊情况，值得将其提取到单独的方法中（它也为您的具体情况提供了很好的描述）。没有重复的代码更容易更改、理解和维护。

因此，我倾向于使用一种通用搜索方法`IQueryable`和一组多次使用的方法：

```
interface IRepository<T>
{
    IQueryable<T> FindAll();
}

interface IProductRepository : IRepository<Product>
{
    IEnumerable<Product> GetProductsInCategory(int categoryId);
    IEnumerable<Product> GetProductsStartingWith(string letter);
    IEnumerable<PromoCode> GetProductPromoCodes(int productId);
} 
```

还要考虑单元测试。特定方法比 IQueryable 更容易模拟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T12:00:01.460

其实我觉得第一个更好。我假设我的决定基于以下因素：

1.  如果产品结构将被重构：

    *   IQueryable 方法 - 您只需要更改代码中的调用方法。
    *   IEnumerables - 您还需要更改方法名称。

2.  如果许多人要派生您想要以多态方式迭代的接口：

    *   IQueryable 方法 - 通用统一方法名称的好处
    *   IEnumerables - 某些名称可能未描述您需要的方法。

3.  弹性

    *   IQueryable 方法 - 容易分为 IEnumerables 方法。
    *   IEnumerables 方法 - 很难转换回 IQueryable 方法。

*因此，我建议您从 IQueryable 作为默认选择开始，随着您的代码的进行，您可以随时更改为您需要的更具体的 IEnumerables 方法。*

# c++ - 生产者/消费者使用提升线程和循环缓冲区挂起

> ID：10190388
> 
> 赞同：0
> 
> 时间：2012-04-17T11:31:42.663
> 
> 标签：c++, boost, producer-consumer

我想到了。我犯了一个愚蠢的错误，我实际上并没有从队列中删除元素，我只是在读取第一个元素。我修改了代码，下面的代码不起作用。谢谢大家的帮助。

我正在尝试使用 boost 来实现生产者消费者问题，这实际上是一个更大项目的一部分。我已经从互联网上的示例中实现了一个程序，甚至还有一些我在这里找到的帮助。但是目前我的代码只是挂起。基于一些好的建议，我决定使用 boost ciruclar 缓冲区在生产者和消费者之间保存我的数据。那里有很多类似的代码，我能够从中汇集想法并自己编写一些东西。但是，我似乎仍然遇到与以前相同的问题（这是我的程序只是挂起）。我以为我没有像以前那样犯同样的错误..

我的代码在下面给出，我已经取出了我之前的代码，我只是我自己的单链接列表。

缓冲区头：

```
#ifndef PCDBUFFER_H
#define PCDBUFFER_H

#include <pcl/io/pcd_io.h>
#include <boost/thread/mutex.hpp>
#include <boost/thread/condition.hpp>
#include <boost/circular_buffer.hpp>

class pcdBuffer
{
    public:
        pcdBuffer(int buffSize);
        void put(int data);
        int get();
        bool isFull();
        bool isEmpty();
        int getSize();
        int getCapacity();
    private:
        boost::mutex bmutex;
        boost::condition_variable buffEmpty;
        boost::condition_variable buffFull;
        boost::circular_buffer<int> buffer;
};

#endif 
```

缓冲源（仅相关部分）：

```
#include "pcdBuffer.h"
#include <iostream>

//boost::mutex io_mutex;

pcdBuffer::pcdBuffer(int buffSize)
{
    buffer.set_capacity(buffSize);
}

void pcdBuffer::put(int data)
{
    {
        boost::mutex::scoped_lock buffLock(bmutex);
        while(buffer.full())
        {
            std::cout << "Buffer is full" << std::endl;
            buffFull.wait(buffLock);
        }
        buffer.push_back(data);
    }
    buffEmpty.notify_one();
}

int pcdBuffer::get()
{
    int data;
    {
        boost::mutex::scoped_lock buffLock(bmutex);
        while(buffer.empty())
        {
            std::cout << "Buffer is empty" << std::endl;
            buffEmpty.wait(buffLock);
        }
        data = buffer.front();
            buffer.pop_front();
    }
    buffFull.notify_one();
    return data;
} 
```

代码的主要驱动程序：

```
#include <iostream>
#include <boost/thread/mutex.hpp>
#include <boost/thread/thread.hpp>
#include <unistd.h>
#include "pcdBuffer.h"

pcdBuffer buff(100);

void producer()
{
    int i = 10;
    while (true)
    {
        buff.put(i);
        i++;
    }
}

void consumer()
{
    int i;
    while(true)
    {
        i = buff.get();
        std::cout << "Data: " << i << std::endl;
    }
}

int main(int argc, char** argv)
{
    std::cout << "Starting main...." << std::endl;
    std::cout << "Buffer Details: " << std::endl;
    std::cout << "Capacity: " << buff.getCapacity() << ", isEmpty: " << buff.isEmpty() << ", isFull: " << buff.isFull() << std::endl;
    boost::thread cons(consumer);
    sleep(5);
    boost::thread prod(producer);
    prod.join();
    cons.join();
    return 0;
} 
```

我的缓冲区容量已正确初始化为 100。消费者线程等待并报告“缓冲区为空”5 秒，但之后我从 put 方法和“数据：10”中获取“缓冲区已满”消费者函数在标准输出上交替。如您所见，10 是我放入的第一个元素。似乎缓冲区已满，并没有通知消费者，但我检查了我的锁，并认为它们是正确的。非常感谢您对此的任何帮助。

这是我编写此代码的参考链接：

[http://www.boost.org/doc/libs/1_49_0/libs/circular_buffer/doc/circular_buffer.html#classboost_1_1circular__buffer_19ba12c0142a21a7d960877c22fa3ea00](http://www.boost.org/doc/libs/1_49_0/libs/circular_buffer/doc/circular_buffer.html#classboost_1_1circular__buffer_19ba12c0142a21a7d960877c22fa3ea00)

[http://www.drdobbs.com/article/print?articleId=184401518&siteSectionName=cpp](http://www.drdobbs.com/article/print?articleId=184401518&siteSectionName=cpp)

[循环缓冲区的线程安全实现](https://stackoverflow.com/questions/9743605/thread-safe-implementation-of-circular-buffer)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:05:37.883

首先，与其编写自己的列表，不如直接换行而不是编写自己的`std::list`列表`pcdQueue`。这是正确的，这`std::list`不是线程安全*的原样*，但无论如何你都在你的类中提供了必要的同步原语。

您的程序挂起的原因：您保留锁定并填充队列直到它已满。您通过消费者的通知`notify_one`是无用的，因为您的消费者将再次锁定，因为互斥锁已被占用（由生产者中的锁定）。

当您最终通过等待释放锁（当队列已满）时 `condition_variable`，您不会唤醒您的消费者，因此您的消费者和生产者都被阻塞并且您的程序挂起。

将其更改为：

```
void pcdQueue::produce()
{
    int i=0;
    while(true)
    {
        {
            boost::mutex::scoped_lock lock(qmutex);
            while( ! qlen < buffSize ) {
                std::cout << "Queue is full" << std::endl;
                full.wait(lock);
            }

            enqueue(i); // or myList.push_back(i) if you switch to std::list
        }

        empty.notify_one();

    }
} 
```

你的`consume()`方法也有同样的问题。将其更改为：

```
pcdFrame* pcdQueue::consume()
{
    pcdFrame *frame;

    {
        boost::mutex::scoped_lock lock(qmutex);
        while( qlen == 0 ) {
            std::cout << "Queue is empty" << std::endl;
            empty.wait(lock);
        }

        frame = dequeue();
    }
    full.notify_one();

    return frame;
} 
```

通常，请注意并注意通知仅在有人等待时才有效。否则，他们就会“迷失”。此外，请注意，您不需要在调用时保持互斥锁锁定`notify_one`（实际上，这可能会导致额外的上下文切换开销，因为您唤醒了另一个线程，然后该线程将等待当前（仍然）的互斥锁锁定（由你）。所以首先，释放互斥锁，然后告诉另一个线程继续。

请注意，两个线程都是无限运行的，所以你的主程序仍然会在第一次挂起`join()`并且永远不会退出。您可以在 -loops 中包含一个停止标志，`while`以告诉您的线程完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T03:39:34.530

Boost 现在在它的 lockfree 部分提供了一种生产者/消费者队列类型，虽然它可以在队列填满时锁定，但它基本上是无锁的。

您可以在此处找到文档：

[http://www.boost.org/doc/libs/1_54_0/doc/html/lockfree.html](http://www.boost.org/doc/libs/1_54_0/doc/html/lockfree.html)

这是一个相当新的添加，所以我认为它还不是许多标准包的一部分。另一方面，这看起来主要是标题，所有这些都依赖于相当低级的系统东西，这些东西已经被提升了很长时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T19:04:39.883

我遇到了同样的悬挂问题。多亏了 Johannes 的回答，我才能让它完全发挥作用。但是，我不得不使用 full.wait_for(lock, boost::chrono::milliseconds(100)); 在使用非常短的循环缓冲区（3-4 个元素）时，在消费者和生产者中防止挂起。

另外，我用 while (buffer->empty() 代替了 while (true)。

最后，一切都可靠且快速地运行。

# php - MySQL 从一张表插入到另一张表

> ID：10190389
> 
> 赞同：0
> 
> 时间：2012-04-17T11:31:42.857
> 
> 标签：php, mysql, mysql-error-1064

我正在尝试从一个表中选择一个随机地址并将其添加到另一个表的其中一列中，但它一直说“未选择数据库”

```
if ($_SESSION[address] == "")
{
    $db = @mysql_select_db($db_bitcoins,$connection)
        or die(mysql_error());
    $sql = "SELECT Count(*) FROM address";
    $result = @mysql_query($sql, $connection) or die(mysql_error());
    $rnum = mysql_num_rows($result);
    $rrr=rand(1,rnum);
    $sql = "SELECT * FROM address WHERE id = '$rrr'";
    $result = @mysql_query($sql, $connection) or die(mysql_error());
    while ($sql = mysql_fetch_object($result)) {
        $_SESSION[address]  = $sql -> ads;
        $db = @mysql_select_db($db_name,$connection)
                        or die(mysql_error());
        $sql = "UPDATE $table_name SET bitaddress = $_SESSION[address] WHERE username = '$user' and password = password('$pass')";
        $result = @mysql_query($sql, $connection) or die(mysql_error());
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:38:21.360

检查您是否正确提供了数据库名称（SID）、端口和主机 IP 以及数据库是否可访问（如果不在您的 PC 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:23:55.173

编辑：我发现 $db_bitcoins 没有设置，谢谢大家的帮助！`"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1"`这次我又遇到了一个例外

# jquery - Jquery过滤器类并设置为变量

> ID：10190390
> 
> 赞同：0
> 
> 时间：2012-04-17T11:31:44.490
> 
> 标签：jquery

我正在尝试获取单击元素的类，例如。'.thumbs1' 并将其设置为变量，但删除除数字 '1' 之外的所有内容。

我找到了一种使用以下代码删除除数字之外的所有内容的方法，但我不知道将其存储为变量的语法。

```
$(this).attr('class').replace(/[^\d]/g, ''); 
```

我想做类似的事情：

```
var i = $(this).attr('id').replace(/[^\d]/g, ''); 
```

这显然是错误的，但你明白了。塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:34:15.427

为什么不使用`data`属性呢？这就是他们设计的目的：

```
<a href="#" data-id="1" class="thumbs">#1</a>
<a href="#" data-id="2" class="thumbs">#2</a> 
```

```
$(".thumbs").click(function() {
    var id = $(this).data("id"); // = 1 or 2 in this case
}); 
```

正如您现在发现的那样，尝试解析`id`属性或`class`名称以获取存储在其中的值会适得其反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:40:55.173

不，这是正确的，你试试

```
var id = $("div").attr('id').replace(/[^\d]/g, ''); 
```

或查看此[页面](https://stackoverflow.com/questions/2427853/jquery-get-number-from-id)

# c++ - 如何使 CoCreateInstanceEx、CoInitializeSecurity、CoSetProxyBlanket、WMI 调用失败

> ID：10190391
> 
> 赞同：0
> 
> 时间：2012-04-17T11:31:51.307
> 
> 标签：c++, unit-testing, com, wmi

我正在执行测试作为我的单元测试项目的一部分。我想知道是否有任何方法使以下调用失败：

CoCreateInstance CoInitializeSecurity CoSetProxyBlanket WMI 调用

我想以管理员用户身份执行此操作，而无需访问任何代码，例如停止任何服务或删除任何 dll

我必须这样做才能增加负代码覆盖率。

谁能帮帮我吗 ：）

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:36:21.037

`CoCreateInstance`: 修改注册表很容易失败。例如，如果您正在初始化 WMI 类，请在注册表中找到该类并重命名其键和值。请务必先进行备份。

`CoInitializeSecurity`: 我还没有尝试过，但我很确定您可以使用权限较低的用户使其失败。例如，没有管理员访问权限的用户将无法获得 HDD 序列号。

`CoSetProxyBlanket`: 再说一次，我认为您可能会因特权较低的用户而失败。但我不确定这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T16:54:24.390

`CoInitializeSecurity`只需连续调用两次即可轻松失败。第二次调用将失败，出现 0x80010119 (RPC_E_TOO_LATE)。

# javascript - 用 Qunit 断言函数抛出异常

> ID：10190392
> 
> 赞同：10
> 
> 时间：2012-04-17T11:31:51.543
> 
> 标签：javascript, jquery, unit-testing, qunit

我是 Qunit 和单元测试的新手。

我试图弄清楚什么以及如何测试以下功能。目前它并没有做太多，但我想断言，如果我传递不正确的值，则会引发错误：

```
function attrToggle (panel, attr) {
    'use strict';

    if (!panel) { throw new Error('Panel is not defined'); }
    if (!attr) { throw new Error('Attr is not defined'); }
    if (typeof panel !== 'string') { throw new Error('Panel is not a string'); }
    if (typeof attr !== 'string') { throw new Error('Attr is not a string'); }
    if (arguments.length !== 2) { throw new Error('There should be only two arguments passed to this function')}

}; 
```

如果不满足这些条件中的任何一个，我该如何断言将引发错误？

我试图查看 Qunit 的“加注”断言，但认为我误解了它。我的解释是，如果抛出错误，则测试通过。

所以如果我测试这样的东西：

```
test("a test", function () {
    raises(function () {
        throw attrToggle([], []);
    }, attrToggle, "must throw error to pass");
}); 
```

测试应该通过，因为错误被抛出。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T11:54:40.080

有一些问题，一个工作示例位于[http://jsfiddle.net/Z8QxA/1/](http://jsfiddle.net/Z8QxA/1/)

主要问题是您将错误的东西作为第二个参数传递给`raises()`. 第二[个参数](http://docs.jquery.com/QUnit/raises)用于验证是否抛出了正确的错误，因此它需要一个正则表达式、一个错误类型的构造函数，或者一个允许您自己验证的回调。

因此，在您的示例中，您传递`attrToggle`的是将引发的错误类型。您的代码实际上抛出了一个`Error`类型，因此检查实际上失败了。`Error`作为第二个参数传递可以按您的意愿工作：

```
test("a test", function () {
    raises(function () {
        attrToggle([], []);
    }, Error, "Must throw error to pass.");
}); 
```

`throw`其次，调用`attrToggle()`inside时不需要关键字`raises()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:53:41.283

是的，你几乎是对的。[`raises()`](http://docs.jquery.com/QUnit/raises)测试代码时预计会抛出错误。

通常我用`try-catch`我的函数来捕捉不正确的参数类型。我`raises()`用来测试`throw`. 如果我放置了一个不正确的值作为参数，并且测试不符合，`raises()`那么就没有捕获到某些东西。

# database - 如何了解 DB2 中的空闲连接？

> ID：10190393
> 
> 赞同：1
> 
> 时间：2012-04-17T11:31:57.337
> 
> 标签：database, db2

我在 db2 中有大量非活动会话，我想知道这些连接属于哪个应用程序/用户。反正有吗？我不确定这一点。请帮忙解决这个问题。

问候，

拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:41:30.133

从 DB2 命令行，您可以使用[`LIST APPLICATIONS`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0001958.html)：

```
db2 list applications show detail 
```

您必须对数据库实例拥有适当的权限（最常见的是`SYSADM`或`SYSCTRL`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:04:23.670

DB2 具有有用的 FUNCTION，可用于从数据库中获取快照信息。例如，列出连接到 TEST 并已空闲 24 小时的应用程序：

```
db2 "connect to TEST"
db2 "select execution_id, appl_id, appl_status, status_change_time from table(snap_get_appl_info('TEST')) snap where status_change_time < current timestamp - 24 hours" 
```

有关更多详细信息，请参阅 [http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.rtn.doc%2Fdoc%2Fr0021987.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.rtn.doc%2Fdoc%2Fr0021987.html) 。

**编辑**

忘了提到您需要打开 UOW 监视器以获取“状态更改时间”信息。

例如级别：

```
db2 update dbm cfg using DFT_MON_UOW ON 
```

对于分贝级别：

```
db2 update monitor switches using UOW ON 
```

# mysql - MySQL 命令未从 Bash 文件运行

> ID：10190395
> 
> 赞同：0
> 
> 时间：2012-04-17T11:31:58.603
> 
> 标签：mysql, bash

我有以下命令

```
 mysql -u root -ppass myDB -e "select * from table limit 10;" 
```

当我从 linux 服务器运行它时，它可以正常工作（显示 10 个元组）

在 bash 文件中添加以下内容时

```
 echo 'mysql -u root -ppass myDB -e select * from table limit 10;' >> /root/test.log 
```

没发生什么事。在日志文件中，仅显示回显字符串。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:34:40.090

那是因为您只是`echo`将命令作为字符串并将 echo 的输出重定向到日志文件。你什么都不做;-)

只需像在命令行上一样运行命令并将命令的输出`mysql`（而不是`echo`）重定向到您的日志文件：

```
#!/bin/sh
mysql -u root -ppass myDB -e "select * from table limit 10;" >> /root/test.log 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T11:34:44.980

这是因为

```
mysql -u root -ppass myDB -e "select * from table limit 10;" 
```

不一样

```
mysql -u root -ppass myDB -e select * from table limit 10; 
```

尝试使用这个：

```
echo 'mysql -u root -ppass myDB -e "select * from table limit 10;"' >> /root/test.log 
```

然后实际调用命令

```
mysql -u root -ppass myDB -e "select * from table limit 10;" >> /root/test.log 
```

# javascript - 如何中止java脚本中的调用？

> ID：10190397
> 
> 赞同：1
> 
> 时间：2012-04-17T11:32:04.553
> 
> 标签：javascript

认为，

我在我的页面上显示了 5 个选项。我在每个选项单击时调用了相同的函数。但是，现在我想在用户第二次点击时中止第一次通话。

我怎样才能做到这一点？？

将不胜感激帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:37:19.430

根据您提供的信息，您所要求的无法完成，因为 JavaScript 是单线程的。

# spring - SWF + Primefaces 在 URL 和 AJAX 中重复上下文路径不起作用

> ID：10190403
> 
> 赞同：1
> 
> 时间：2012-04-17T11:32:38.993
> 
> 标签：spring, spring-mvc, jsf-2, primefaces, spring-webflow

该项目是在 Spring 3、Spring web flow 2.3、Spring security 3 和 Primefaces 3.2 中开发的。当我使用 JSF2 的调度程序 servlet 时，视图会完美地使用 AJAX 重新加载，我可以使用标签 h:link。但由于我使用 SWF 的调度程序 servlet，我在上述两种情况下开始遇到问题。

例如，当我使用*h:link*标记及其属性*output="listActivities*，结果是*href="WEB-INF/views/WEB-INF/views/listActivities.xhtml"*。我可以使用*h:outputlink*解决这个问题标记，因为结果是 href="listActivities" 并且我已将 SWF 配置为使用 UrlBasedViewResolver。

在使用 AJAX 的情况下，应用程序无法正常工作并且消息是 serverError: class com.sun.faces.context.FacesFileNotFoundException **/WEB-INF/views/WEB-INF** /views/comunes/registro.xhtml Not Found in ExternalContext 作为资源。与使用 h:link 相同的问题。

web.xml

```
 <!-- Extensión por defecto para el uso de Facelets -->

<context-param>
  <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
  <param-value>.xhtml</param-value>
</context-param>

<context-param>
  <param-name>javax.faces.PROJECT_STAGE</param-name>
  <param-value>Development</param-value>
</context-param>

<!-- Archivo de configuración de Spring -->

<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

  <filter>
   <filter-name>charEncodingFilter</filter-name>
   <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
  <init-param>
    <param-name>encoding</param-name>
    <param-value>UTF-8</param-value>
  </init-param>
  <init-param>
    <param-name>forceEncoding</param-name>
    <param-value>true</param-value>
  </init-param>
  </filter>
  <filter-mapping>
    <filter-name>charEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <!-- Carga el spring web application context -->

  <listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
  </listener>

 <listener>
   <listener-class>org.springframework.web.context.ContextLoaderListener</listener-..
 </listener>

  <listener>
    <listener-class>
      org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>

    <!-- Servlet para los recursos de la aplicación -->

   <servlet>
 <servlet-name>Resources Servlet</servlet-name>
 <servlet-class>org.springframework.js.resource.ResourceServlet</servlet-class>
 <load-on-startup>0</load-on-startup>
   </servlet>

   <servlet-mapping>
 <servlet-name>Resources Servlet</servlet-name>
 <url-pattern>/resources/*</url-pattern>
   </servlet-mapping>

   <!-- FronController de la aplicación, maneja todas las request -->

  <servlet>
<servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value></param-value>
</init-param>
<load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
<servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
<url-pattern>/spring/*</url-pattern>
  </servlet-mapping>

<servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
</web-app> 
```

webflow-config.xml

```
<!-- Configuración Spring webflow para JSF 2 -->

<bean id="flowController"
           class="org.springframework.webflow.mvc.servlet.FlowController">  
      <property name="flowExecutor" ref="flowExecutor"/>  
    </bean>  

<!-- Configure Web Flow to be able to recognize JSF 2 Ajax requests -->

<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
    <property name="flowExecutor" ref="flowExecutor" />
    <property name="ajaxHandler">
        <bean class="org.springframework.faces.webflow.JsfAjaxHandler"/>
    </property>
</bean>

<!-- Executes flows: the central entry point into the Spring Web Flow system -->

<webflow:flow-executor id="flowExecutor">
    <webflow:flow-execution-listeners>
        <webflow:listener ref="facesContextListener"/>
        <webflow:listener ref="securityFlowExecutionListener" />
    </webflow:flow-execution-listeners>
    <webflow:flow-execution-attributes>
        <webflow:redirect-in-same-state value="false"/>
    </webflow:flow-execution-attributes>
</webflow:flow-executor>

<!-- The registry of executable flow definitions -->

<webflow:flow-registry id="flowRegistry" 
          flow-builder-services="facesFlowBuilderServices" base-path="/WEB-INF/flows">
    <webflow:flow-location-pattern value="/**/*-flow.xml" />
</webflow:flow-registry>

<!-- Configures the Spring Web Flow JSF integration -->

<faces:flow-builder-services id="facesFlowBuilderServices" development="true" />

<!-- Installs a listener that creates and releases the FacesContext for 
            each request. -->

<bean id="facesContextListener"
         class="org.springframework.faces.webflow.FlowFacesContextLifecycleListener"/>

<!-- Installs a listener to apply Spring Security authorities -->

<bean id="securityFlowExecutionListener"
         class="org.springframework.webflow.security.SecurityFlowExecutionListener" />

    <!-- configuración MVC para JSF 2 -->

<faces:resources/>

<!-- Dispatches requests mapped to flows to FlowHandler implementations -->

<bean class="org.springframework.faces.webflow.JsfFlowHandlerAdapter">
    <property name="flowExecutor" ref="flowExecutor" />
</bean>

<!-- Maps request paths to flows in the flowRegistry -->

<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
    <property name="order" value="1"/>
    <property name="flowRegistry" ref="flowRegistry" />
    <!-- If no flow match, map path to a view to render; e.g. the "/intro" path 
             would map to the view named "intro"    -->
    <property name="defaultHandler">
<bean  class="org.springframework.web.servlet.mvc.UrlFilenameViewController" />
    </property>
</bean>

<!-- Maps logical view names to Facelet templates in /WEB-INF (e.g. 'search' to 
     '/WEB-INF/search.xhtml' -->

<bean id="faceletsViewResolver" 
          class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.faces.mvc.JsfView"/>
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".xhtml" />
</bean>

<!-- Dispatches requests mapped to org.springframework.web.servlet.mvc.Controller
         implementations -->

<bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter" />
   </beans> 
```

部分代码视图

```
 <ui:define name="content">
    <div class="registroUsuario">
    <h:form id="registroForm">
        <h:panelGrid columns="3">

    <h:outputLabel for="distrito" value="Distrito" styleClass="labelInput" />

    <h:selectOneMenu id="distrito" required="true" requiredMessage="Debe seleccionar un
       distrito" value="#{registro.idDistrito}" title="Seleccione su distrito">

     <f:selectItem itemLabel="Seleccione distrito" itemValue="0"
              noSelectionOption="true"></f:selectItem>
    <f:selectItems var="distrito" value="#{registro.distritos}" itemLabel="#
          {distrito.nombre}" itemValue="#{distrito.idDistrito}">
    </f:selectItems>

    <f:ajax update="barrio calle messageDistrito" render="barrio calle messageDistrito" 
          listener="#{registro.updateBarrio}" event="blur" />

    <f:validateBean for="idDistrito" />
    </h:selectOneMenu>

      <h:message id="messageDistrito" for="distrito" styleClass="messageError" />           

    <h:outputLabel for="barrio" value="Barrio" styleClass="labelInput" />
    <h:selectOneMenu id="barrio" effect="fade" required="true" requiredMessage="Debe
     seleccionar un barrio" value="#{registro.idBarrio}" title="Seleccione su barrio ">

  <f:selectItem itemLabel="Seleccione barrio" itemValue="0" noSelectionOption="true" />     

<f:selectItems var="barrio" value="#{registro.barrios}" itemLabel="#{barrio.nombre}"
               itemValue="#{barrio.idBarrio}">
</f:selectItems>

<f:ajax render="calle messageBarrio" listener="#{registro.updateCalle}" 
         event="valueChange" />
<f:validateBean for="idBarrio" />
</h:selectOneMenu>
<h:message id="messageBarrio" for="barrio" styleClass="messageError" /> 
```

**检测到的问题是：**当我具体在 URL */spring/.....*

1- f:ajax 标签不调用侦听器属性中的方法，但“重新加载”视图和第二点发生。

*2- 在 URL /WEB-INF/views/WEB-INF/views/*中重复上下文路径，当我使用 h:link 标记或更改 ah:selectOneMenu 中的值时会发生这种情况。

3- h:comammdbuton 不起作用，侦听器属性不调用该方法。

**当我**在 URL */faces/......*中使用时，上述步骤工作正常。

为什么会出现这种行为？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T10:07:07.587

我认为，您必须在流程中修改您的视图。在示例中：

```
<view-state id="idView" view="remove your prefix /WEB-INF/view/ so only the folder under that prefix"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:23:35.223

faceletsViewResolver 中的前缀必须设置为

```
<property name="prefix" value="/WEB-INF/" /> 
```

并且您的 *.xhtml 文件应该与您的流程定义进入同一文件夹

# objective-c - UISwipGestureRecognizer 崩溃

> ID：10190404
> 
> 赞同：0
> 
> 时间：2012-04-17T11:32:42.593
> 
> 标签：objective-c, ios5, uiswipegesturerecognizer

我正在寻求您的帮助，因为我认为这是一个简单的问题，但我无法理解我的观点发生了什么。我正在显示由我的 UIViewController 启动的 OpenGL 视图，如下所示：

```
 //OpenGL view init
CGRect mainframe=CGRectMake(0,0,768,708);
GLView= [[OpenGLView alloc] initWithFrame:mainframe]; 
```

所以它显示得很好，但我试图添加一个滑动手势识别器来调用这个视图上的一个函数：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        ...  

        oneFingerSwipeRight =[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(transitionCubeRight:)];
        oneFingerSwipeRight.direction=UISwipeGestureRecognizerDirectionRight;

        oneFingerSwipeLeft =[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(transitionCubeLeft:)];
        oneFingerSwipeLeft.direction=UISwipeGestureRecognizerDirectionLeft;

        [self addGestureRecognizer:oneFingerSwipeRight];
        [self addGestureRecognizer:oneFingerSwipeLeft];

        ...
    }
    return self;
} 
```

然后当视图出现时，我正在做向右或向左滑动的动作，这会出现在终端中：

**2012-04-17 12:00:15.735 MultipleViewsApp[4372:f803]-[OpenGLView transitionCubeLeft:]：无法识别的选择器发送到实例 0xcd38bd0 2012-04-17 12:00:15.736 MultipleViewsApp[4372:f803]****由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[OpenGLView transitionCubeLeft:]: unrecognized selector sent to instance 0xcd38bd0”* ****第一掷调用堆栈：（0x1764052 0x18f5d0a 0x1765ced 0x16caf00 0x16cace2 0x622e39 0x622143 0x6233cf 0x625a31 0x62598c 0x61e3e7 0x386812 0x386ba2 0x36d384 0x360aa9 0x293dfa9 0x17381c5 0x169d022 0x169b90a 0x169adb4 0x169accb 0x293c879 0x293c93e 0x35ea9b 0x2518 0x2475）*****

 ***我的函数“transitionCubeLeft”/“transitionCubeLeft”只包含一个 NSLOG，但与此无关。如果有人能帮助我理解这个问题，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:41:17.170

我猜你还没有定义**transitionCubeLeft**方法。根据您使用的选择器，尝试找出它是否已定义并且方法的参数计数为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:54:50.930

看起来您已经`transitionCubeLeft`/`transitionCubeRight`定义了没有参数。

改变

```
 oneFingerSwipeRight =[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(transitionCubeRight:)];
 oneFingerSwipeRight.direction=UISwipeGestureRecognizerDirectionRight;

 oneFingerSwipeLeft =[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(transitionCubeLeft:)];
 oneFingerSwipeLeft.direction=UISwipeGestureRecognizerDirectionLeft;

 [self addGestureRecognizer:oneFingerSwipeRight];
 [self addGestureRecognizer:oneFingerSwipeLeft]; 
```

到

```
 oneFingerSwipeRight =[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(transitionCubeRight)];
 oneFingerSwipeRight.direction=UISwipeGestureRecognizerDirectionRight;

 oneFingerSwipeLeft =[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(transitionCubeLeft)];
 oneFingerSwipeLeft.direction=UISwipeGestureRecognizerDirectionLeft;

 [self addGestureRecognizer:oneFingerSwipeRight];
 [self addGestureRecognizer:oneFingerSwipeLeft]; 
```***

# maven - 在 jar 文件中管理密钥库

> ID：10190406
> 
> 赞同：0
> 
> 时间：2012-04-17T11:32:48.927
> 
> 标签：maven, keystore, jarsigner

我有一个需要签名的 Maven 项目。

为了签署 jar 文件，我创建了一个别名。这将存储在我的 .keystore 中。每次创建新版本时，我都会使用别名对 jar 进行签名。

是否可以使密钥库独立于我的主目录中存在的 .keystore ，例如将密钥库文件存储在 Jar 文件本身中？如果是这样，该怎么做？

在项目中使用 jar signer 插件的 pom 中要使用的插件详细信息是什么？

# php - 检查数组中的数字是否除以同一数组中的另一个数字

> ID：10190408
> 
> 赞同：0
> 
> 时间：2012-04-17T11:33:18.687
> 
> 标签：php, math

我需要完成的是，

我有一个数组，2 3 4 5 6 7 8 9 10

我需要检查数组中的任何数字是否完美地除以数组中的任何其他数字。(%=0) 如果是，请取消设置数字。

它在我头上，我无法让它工作，我尝试的一切都给了我无限循环，它让我生病了。（哈哈）

我没有包含任何代码，因为我能想到的只是一个不起作用的嵌套 forloop :(

所以这是一个示例：

输入数组：2 3 4 5 6 7 8

输出 = 5 6 7 8

有什么想法吗？

更新：

通过更多的调试，我自己破解了坚果。（以防将来对某人有帮助。）

```
// use array_unique, array_values and $size = sizeof($array)
for ($i = 0; $i < $size; $i++)
{
for ($j = $size - 1; $j > $i; $j--)
    if ($numbers[$j] % $numbers[$i] == 0)
    {
        unset($numbers[$i]);
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:45:05.553

我*不会*在真正的代码中这样做，只是因为我认为你想自己这样做。

```
LoopA iterating the intput array:
  LoopB iterating the input array:
    check division of loopA value and loopB value, and add the value of loopA to a new array accordingly
  End loopB
End loopA
Print the new array 
```

注意：这并不完整，但它肯定会让您开始了解如何继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:50:24.490

对于已排序的序号

```
$arr = array(2,3,4,5,6,7,8,9,10,11,12,13,14);

$half_c = ceil(count($arr)/2) - 1;
$result_array = array_slice($arr, $half_c); 
```

**编辑：**对于随机数组，您可以再次减半，并仅迭代数组的第一部分。素数理论还可以帮助为数组的第一部分编写更快的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:36:34.247

怎么样：

```
$arr = range(2,20);
$size = count($arr);
for ($i=0; $i<$size; $i++) {
    for ($j=$size-1; $j>$i; $j--) {
        if ($arr[$j]%$arr[$i]) continue;
        unset($arr[$i]);
        break;
    }
}
print_r($arr); 
```

**输出：**

```
Array
(
    [9] => 11
    [10] => 12
    [11] => 13
    [12] => 14
    [13] => 15
    [14] => 16
    [15] => 17
    [16] => 18
    [17] => 19
    [18] => 20
) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-17T11:44:19.220

尝试这个：

```
for($i = 0; $i < count($arr); $i++)
{
    for($j = 0; $j < count($arr); $j++)
    {
        if($arr[$i] != $arr[$j] && $arr[$i] % $arr[$j] === 0)
        {
            unset($arr[$j);
            break;
        }
    }
} 
```

# mysql - 复制具有 n:m 关系的数据集

> ID：10190409
> 
> 赞同：3
> 
> 时间：2012-04-17T11:33:32.540
> 
> 标签：mysql, sql, postgresql, insert, many-to-many

我想使用单个 SQL 语句

```
insert into T (...) select ... from T where ... 
```

复制大量数据集。我的问题是从表到其他表存在 N:M 关系`T`，这些也必须复制。如果我不知道哪个原始数据集属于哪个复制数据集，我该怎么做？让我举例说明。

### 之前的数据库内容：

表`T`：

```
ID  | COL1 | COL2    
-----------------
1   | A    | B
2   | C    | D 
```

N:M 表从表 T 中引用表 U（表 U 未显示）：

```
T   | U              
---------
1   | 100
1   | 101
2   | 100
2   | 102 
```

我的复制操作 [???] 是我不知道的部分：

```
insert into T (COL1, COL2) select COL1, COL2 from T
insert into NM (T, U) select [???] 
```

### 之后的数据库内容：

表`T`：

```
ID  | COL1 | COL2
-----------------
1   | A    | B
2   | C    | D
3   | A    | B
4   | C    | D 
```

N:M-表：

```
T   | U
---------
1   | 100
1   | 101
2   | 100
2   | 102
3   | 100
3   | 101
4   | 100
4   | 102 
```

注意：

*   我有数千个数据集（不仅仅是两个）
*   我想使用“插入...选择”来获得更好的性能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T00:59:27.363

如果您有幸运行当前的**PostgreSQL 9.1**，那么有一个优雅而快速的解决方案，使用新的[**数据修改 CTE**](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)*的单个命令*。[](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)

 **不支持[通用表表达式 (CTE)的](http://www.postgresql.org/docs/current/interactive/queries-with.html)**MySQL**就没有这样的运气，更不用说数据修改 CTE。

假设`(col1, col2)`最初是唯一的：

### 查询 1

*   在这种情况下，您可以轻松地从表中选择任意切片。
*   `t.id`不会浪费任何序列号。

```
WITH s AS (
    SELECT id, col1, col2
    FROM   t
--  WHERE  some condition
    )
    ,i AS (
    INSERT INTO t (col1, col2)
    SELECT col1, col2   -- I gather from comments that id is a serial column
    FROM   s
    RETURNING id, col1, col2
    )
INSERT INTO tu (t, u)
SELECT i.id, tu.u
FROM   tu
JOIN   s ON tu.t = s.id
JOIN   i USING (col1, col2); 
```

如果`(col1, col2)`不是**唯一的**，我看到了另外两种方式：

### 查询 2

*   使用[窗口函数`row_number()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)使非唯一行唯一。
*   `INSERT``t.id`就像上面的查询一样，空间中没有空洞的行。

```
WITH s AS (
    SELECT id, col1, col2
         , row_number() OVER (PARTITION BY col1, col2) AS rn
    FROM   t
--  WHERE some condition
    )
    ,i AS (
    INSERT INTO t (col1, col2)
    SELECT col1, col2
    FROM   s
    RETURNING id, col1, col2
    )
    ,r AS (
    SELECT *
         , row_number() OVER (PARTITION BY col1, col2) AS rn
    FROM   i
    )
INSERT INTO tu (t, u)
SELECT r.id, tu.u
FROM   r
JOIN   s USING (col1, col2, rn)    -- match exactly one id per row
JOIN   tu ON tu.t = s.id; 
```

### 查询 3

*   这是基于@ypercube 已经提供的相同想法，但都在一个查询中。
*   如果 current 的数字空间中存在漏洞，`t.id`则将相应地为新行烧录序列号。
*   不要忘记**将您的序列重置**为超出新的最大值，否则您将在从序列中提取`t`默认值的新插入中得到重复的键错误。`id`我将此作为最后一步集成到命令中。这种方式最快最安全。

```
WITH s AS (
    SELECT max(id) AS max_id
    FROM   t
    )
    ,i AS (
    INSERT INTO t (id, col1, col2)
    SELECT id + s.max_id, col1, col2
    FROM   t, s
    )
    ,j AS (
    INSERT INTO tu (t, u)
    SELECT tu.t + s.max_id, tu.u
    FROM   tu, s
    )
SELECT setval('t_id_seq', s.max_id + s.max_id)
FROM   s; 
```

[手册中有关setval()](http://www.postgresql.org/docs/current/interactive/functions-sequence.html)的详细信息。

### 测试设置

进行快速测试。

```
CREATE TEMP TABLE t (id serial primary key, col1 text, col2 text);
INSERT INTO t (col1, col2) VALUES 
 ('A', 'B')
,('C', 'D');

CREATE TEMP TABLE tu (t int, u int);
INSERT INTO tu VALUES
 (1, 100)
,(1, 101)
,(2, 100)
,(2, 102);

SELECT * FROM t;
SELECT * FROM tu; 
```

[最近](https://stackoverflow.com/q/7391090/939860)有一个类似的问题，我提供了一个类似的答案。加上不带 CTE 和窗口函数的**8.3**版的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:31:41.593

步骤 1\. 锁定（两个）表或确保只有此脚本在运行。禁用 FK 检查。

步骤 2\. 按以下顺序使用这两个`INSERT`语句：

```
INSERT INTO NM 
    (T, U) 
  SELECT 
      T + maxID, U
  FROM 
      NM
    CROSS JOIN
      ( SELECT MAX(ID) AS maxID 
        FROM T
      ) AS m

INSERT INTO T 
    (ID, COL1, COL2) 
  SELECT 
      ID+maxID, COL1, COL2 
  FROM 
      T
    CROSS JOIN
      ( SELECT MAX(ID) AS maxID 
        FROM T
      ) AS m 
```

步骤 3\. 重新启用 FK。**

# azure - Azure ServiceDefinition 文件 - ProgramEntryPoint、运行时 IP 地址和端口

> ID：10190417
> 
> 赞同：4
> 
> 时间：2012-04-17T11:33:56.717
> 
> 标签：azure, azure-worker-roles

我正在使用 ProgramEntryPoint 在 Windows Azure Worker Role 中运行命令行程序（可能是 Redis），如下所示

```
 <WorkerRole name="Worker" vmsize="Small">
    <Runtime executionContext="limited">
      <Environment>
        <Variable name="ADDRESS">
          <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/Endpoints/Endpoint[@name='Redis']/@address" />
        </Variable>
        <Variable name="PORT">
          <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/Endpoints/Endpoint[@name='Redis']/@port" />
        </Variable>
      </Environment>
      <EntryPoint>
        <ProgramEntryPoint commandLine="redis-server.exe" setReadyOnProcessStart="true" />
      </EntryPoint>
    </Runtime>
    <Endpoints>
      <InternalEndpoint name="Redis" protocol="tcp" port="6379" />
    </Endpoints>
  </WorkerRole> 
```

到目前为止，一切都很好（它有效）。我现在想在另一个 WorkerRole 中运行服务器的从属实例

```
<WorkerRole name="SlaveWorker" vmsize="Small">
    <Runtime executionContext="limited">
      <EntryPoint>
        <ProgramEntryPoint commandLine="echo slaveof %ADDRESS% %PORT% | redis-server.exe -"   setReadyOnProcessStart="true" />
      </EntryPoint>
    </Runtime>    
    <Imports>
      <Import moduleName="Diagnostics" />
      <Import moduleName="RemoteAccess" />
    </Imports>
    <Endpoints>
      <InternalEndpoint name="Redis" protocol="tcp" port="6379" />
    </Endpoints>    
  </WorkerRole> 
```

你可以看到我需要告诉从服务器它的主服务器在哪里使用IP地址和端口；在 Azure 为该角色分配网络资源之前我不知道的东西。我已经[看到@smarx 沿着这些思路做了一些事情](http://blog.smarx.com/posts/tutorial-running-the-mongoose-web-server-in-windows-azure)。

但是我认为在我的情况下可能有一些问题

1.  我在一个角色中设置环境变量，并希望在另一个角色中使用它们 - 不会工作。

2.  即使正确的数据可用，我需要将其传递给 redis-server.exe 的方式也不会被识别为有效的入口点，开头有回显

* * *

1.  是通过代码了解另一个工作角色的运行时 IP 地址和端口的唯一方法，还是我在配置文件中缺少语法？
2.  如果我设法获得 IP 和端口，是让我的命令行工作以将其推送到 powershell 脚本或批处理文件的唯一方法吗？

谢谢你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:57:52.720

一个实例知道另一个实例的 IP 地址的唯一方法是 a.) 它以编程方式获取它，或者 b.) 另一个实例将它发布到一个众所周知的位置（例如表存储）。在您的情况下，让从属角色运行一个启动任务来访问 RoleEnvironment（可能是通过 Powershell）并使用主控的 IP 地址设置一个环境变量可能是最简单的。如果您将其作为“简单”类型执行，我相信它将在您的 ProgramEntryPoint 运行（阻塞）之前运行，您可以在命令行中使用 env var。

然而，这里有几个想法：

1.  您如何处理角色中的多实例？您是否只计划运行单个实例？
2.  你需要两个不同的角色吗？为什么不使用具有 2 个实例的单个角色通过选举决定哪个是主控？

# sql-server-2008 - 使用动态列名进行 sql 更新

> ID：10190422
> 
> 赞同：1
> 
> 时间：2012-04-17T11:34:20.787
> 
> 标签：sql-server-2008, dynamic-sql, information-schema

编辑：为简单起见，已修改数据库名称

我正在尝试获取一些动态 sql，以将一些关键生产表的*静态*副本更新到另一个数据库**(sql2008r2)**中。这里的目的是允许数据（来自“静态”数据库）在一段时间内持续传播，因为我们的生产数据库几乎每天都在更新。

我正在使用 a`CURSOR`循环遍历包含要复制到“静态”数据库中的对象的表。这些`prod`表不会经常更改，但我想使它有点“面向未来”（如果可能的话！）并从`INFORMATION_SCHEMA.COLUMNS`每个对象中提取列名（而不是使用`SELECT * FROM ...`）

*   1）从我在其他帖子中读到的内容来看，**`EXEC()`**似乎是有限的，所以我相信我需要使用**`EXEC sp_executesql`**，但我很难理解这一切。

*   2）作为额外的额外内容，如果可能的话，我还想排除特定表的某些列（“静态”数据库中的结构略有不同）

这是我到目前为止所拥有的。执行时，`@colnames`返回 NULL，因此`@sql`返回 NULL...

有人可以指导我到哪里可以找到解决方案吗？
非常感谢有关此代码的任何建议或帮助。

```
CREATE PROCEDURE sp_UpdateRefTables 
    @debug bit = 0
AS
declare @proddbname varchar(50),
    @schemaname varchar(50),
    @objname    varchar(150),
    @wherecond  varchar(150),
    @colnames   varchar(max),
    @sql        varchar(max),
    @CRLF       varchar(2)

set @wherecond = NULL;
set @CRLF = CHAR(10) + CHAR(13);

declare ObjectCursor cursor for
select  databasename,schemaname,objectname
from    Prod.dbo.ObjectsToUpdate

OPEN    ObjectCursor ;

FETCH NEXT FROM ObjectCursor
INTO @proddbname,@schemaname,@objname ;

while @@FETCH_STATUS=0
begin

if @objname = 'TableXx'
    set @wherecond = ' AND COLUMN_NAME != ''ExcludeCol1'''
if @objname = 'TableYy'
    set @wherecond = ' AND COLUMN_NAME != ''ExcludeCol2'''

--extract column names for current object
select  @colnames = coalesce(@colnames + ',', '') + QUOTENAME(column_name) 
from    Prod.INFORMATION_SCHEMA.COLUMNS
where   TABLE_NAME = + QUOTENAME(@objname,'') + isnull(@wherecond,'')

if @debug=1 PRINT '@colnames= ' + isnull(@colnames,'null')

--replace all data for @objname
--@proddbname is used as schema name in Static database
SELECT @sql = 'TRUNCATE TABLE ' + @proddbname + '.' + @objname + '; ' + @CRLF
SELECT @sql = @sql + 'INSERT INTO ' + @proddbname + '.' + @objname + ' ' + @CRLF
SELECT @sql = @sql + 'SELECT ' + @colnames + ' FROM ' + @proddbname + '.' + @schemaname + '.' + @objname + '; '

if @debug=1 PRINT '@sql= ' + isnull(@sql,'null')

EXEC sp_executesql @sql

FETCH NEXT FROM ObjectCursor
INTO    @proddbname,@schemaname,@objname ;

end
CLOSE ObjectCursor ;
DEALLOCATE ObjectCursor ; 
```

PS我已经阅读过关于sql注入的信息，但由于这是一项内部管理任务，我猜我在这里很安全！？对此的任何建议也表示赞赏。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:47:54.250

在针对`information_schema`. 在`QUOTENAME`where 子句中也不需要，并且实际上会阻止匹配，因为 SQL Server 将`column_name`, not存储`[column_name]`在元数据中。最后，我将其更改为，`sys.columns`因为这是[我们应该在 SQL Server 中派生元数据](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)的方式。尝试：

```
SELECT  @colnames += ',' + name 
  FROM Prod.sys.columns
  WHERE OBJECT_NAME([object_id]) = @objname
  AND name <> CASE WHEN @objname = 'TableXx' THEN 'ExcludeCol1' ELSE '' END
  AND name <> CASE WHEN @objname = 'TableYy' THEN 'ExcludeCol2' ELSE '' END;

SET @colnames = STUFF(@colnames, 1, 1, ''); 
```

# hibernate - 具有重复列名的 Hibernate Table-Per-Subclass

> ID：10190428
> 
> 赞同：2
> 
> 时间：2012-04-17T11:34:43.573
> 
> 标签：hibernate

我有一个使用 Hibernate table-per-subclass 设置的应用程序。不幸的是，出于审计目的，每个表都有两列：

*   LASTUPDATEDBY VARCHAR(16)
*   上次更新时间时间戳

映射在父类和子类中创建一些东西，如下所示：

```
@Column(name="LASTUPDATEDBY")
public String getLastUpdatedBy() {
    returh this.getLastUpdatedBy;
} 
```

该字段在父类和子类中的名称相同。更改列不是一种选择。

为了完整起见，这会导致 MappingException：

```
Caused by: org.hibernate.MappingException: Repeated column in mapping for entity:
com.myapp.domain.subclass1 column: LASTUPDATEDBY (should be mapped with 
insert="false" update="false") 
```

任何人都可以帮忙吗？

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:13:26.073

Remove

```
 @Column(name="LASTUPDATEDBY")
public String getLastUpdatedBy() {
    returh this.getLastUpdatedBy;
} 
```

in the sub-class

# php - 快速将虚拟数据插入mysql

> ID：10190431
> 
> 赞同：4
> 
> 时间：2012-04-17T11:34:47.970
> 
> 标签：php, mysql, codeigniter, records

我的调试模型中有 1 个函数，我想使用它来向我的应用程序添加虚拟数据以测试它的速度等......

问题是它需要将记录添加到 2 个不同的表中，并在将每条记录添加到数据库之前检查重复的用户名等，因此需要一些时间......

这个过程也重复了关于 $total 不同的虚拟记录，我想在 for 循环中一次添加......

例如，对于 100 个新用户，我想添加它大约需要 5 秒才能继续。

这次很好还是我需要优化它？

如果我想一次添加 1000,10000 个用户怎么办？是否可以？

**编辑：** 调用插入数据的函数：

```
public function registerRandomUsers($total = 1){
    $this->load->model("misc_model");
    $this->load->model("encryption_model");
    $this->load->model("signup_model");

    for ($i=1;$i<=$total;$i++){
        $username = $this->misc_model->generateRandomString(15);
        $flag = false;
        while ($flag == false){
            if ($this->user_model->usernameExist($username)){
                $username = $this->misc_model->generateRandomString(15);
            }else{
                $flag = true;

                $password = 'Test123';
                $email = $username.'@email.com';
                $data = array(
                    'username' => $username,
                    'password' => $password,
                    'email' => $email
                );
                $this->signup_model->submitRegistration($data);
                $userdata = $this->user_model->getUserData($username, "username");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:58:57.100

如果您不担心将随机字符串作为用户名，只需设置`$email = 'user'.$i.'@email.com';` *(这样您就不必担心冲突)*。这将运行缓慢的主要原因是因为您在循环的每次迭代中都向数据库发送新查询 - 生成批量插入字符串会快得多，例如：

```
INSERT INTO user (email,pass)
VALUES ('user1@email.com','Test123')
,      ('user2@email.com','Test123')
,      ('user3@email.com','Test123')
,      ('user4@email.com','Test123')
,      ('user5@email.com','Test123'); 
```

这样，您可以避免向数据库发送 10000 个查询的 tcp 流量开销，并一次性完成所有操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:01:08.423

我认为如果你真的在寻找一些真实的样本/测试数据，你应该使用[generateata.com](http://www.generatedata.com/)。

[http://www.generateddata.com/](http://www.generatedata.com/)

这是迄今为止我见过的最好的之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:09:20.887

像这样构建您的查询

```
$conjuctions = str_repeat("('dummy@email.com','test pass'),", 20); // 20 dummy datas
$query = "INSERT INTO user (email,pass) VALUES ".substr($conjunctions,0,str_len($conjuctions).";"
                                               // ^ This is to remove the last comma 
```

# java - 将库路径添加到 jar 文件

> ID：10190433
> 
> 赞同：2
> 
> 时间：2012-04-17T11:34:56.710
> 
> 标签：java, netbeans, path, jar

我有一个带有 dll 文件的外部库，我使用的是 netbeans 和 java。我想在我的 jar 文件中添加一个库路径，例如：“java -Djava.library.path="bin"”，我该怎么做？我必须添加相对路径，而且我必须添加它，因为它将是一个供用户使用的程序，我希望它根本不需要安装。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:43:06.093

您可以为 DLL 使用绝对路径。如果您知道应该从哪里加载库，则无需更改路径。

```
System.load("C:/my/path/to/dll/my.dll"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:37:25.153

您需要指定完整的 JAR 路径：

```
java -Djava.library.path="bin/my.jar" 
```

# php - 将 POST 数组拆分为多个变量

> ID：10190436
> 
> 赞同：1
> 
> 时间：2012-04-17T11:35:15.040
> 
> 标签：php, jquery

我现在正在使用 jQuery .post 编写一个表单，负责处理的文件具有以下代码：

```
print_r($_POST); 
```

它返回以下动态输出：

```
Array ( [data] => capacity=50-1000+people&bookingdate=17%2F04%2F2012&grade=1+star ) 
```

我试图把这个数组分成三个变量，即**容量**、**预订日期**和**等级**，但我真的不知道怎么做。知道怎么做吗？我试过使用**echo $_POST["capacity"];** 但它不起作用。

提前致谢！

**编辑**

这是我正在使用的 jQuery：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#postData").click(function() {
        $("#last-step").hide(600);

       $.post('resources/process2.php', { data: $("#task5_booking").serialize() }, function(data) {
            $("#result").html(data);
      });

        return false;
    });
});
</script> 
```

它使用以下形式：

[http://jsfiddle.net/xSkgH/93/](http://jsfiddle.net/xSkgH/93/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:48:47.073

我认为你应该改变这一行：

```
$.post('resources/process2.php', { data: $("#task5_booking").serialize() }, function(data) { 
```

至

```
$.post('resources/process2.php', $("#task5_booking").serialize(), function(data) { 
```

请注意，我将第二个参数从对象文字更改为（url 编码的）字符串。这会将表单中的每个变量作为单独的变量发布（就像直接发布一样）。`$_POST`在服务器端，每个变量都应该在数组中单独可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:38:19.690

试试parse_str [()](http://www.php.net/manual/en/function.parse-str.php)

就像是：

```
parse_str($_POST['data'] , $output);

$capacity = $output['capacity'];
$bookingdate = $output['bookingdate'];
$grade = $output['grade']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:38:42.063

你必须为此使用爆炸。

```
$data = array();  // A array to store the extracted value
$temp = explode("&", $data); // First of all explode by "&" to get the each piece
foreach($temp as $tval) {
   $t = explode('=', $tval); // Next explode by "=" to get the index and value
   $data[$t[0]] = $t[1];  //Add them to the array
} 
```

另一种选择是使用[parse_str()](http://www.php.net/manual/en/function.parse-str.php)：

```
$data = array();
parse_str($_POST['data'], $data); 
```

在此之后，所有值都将映射到`$data`

# java - idea和tomcat不匹配代码和执行路径

> ID：10190440
> 
> 赞同：1
> 
> 时间：2012-04-17T11:35:37.147
> 
> 标签：java, debugging, tomcat, intellij-idea

我在工作中使用 Idea 10.5.4 进行 Java 开发。目前我在 Ubuntu 11.10 上工作，并使用 Java6 和 Tomcat 7。

当我尝试调试应用程序并逐步移动时，出现了一个问题：一段时间后，代码和执行路径开始不同。所以我无法追踪应用程序的特定问题。

我使用 Ant，当我从 IDEA 开始调试时，IDEA 会构建 ant 并将代码部署到 Tomcat。所以服务器上的代码和类之间必须没有区别。

什么可能导致这种差异？某种不应该在调试模式下进行的优化？

感谢您提前提供任何信息。

# c# - 以编程方式在 c# 中的 excel 中插入行时，图表和形状不会移动

> ID：10190445
> 
> 赞同：2
> 
> 时间：2012-04-17T11:35:55.940
> 
> 标签：c#, charts, excel-2007, excel-interop

当我在 Excel 图表中插入一行时，其他形状不会随其单元格移动。
假设我在 A5:D:10 有一个图表，然后我在第二行下方插入一行，所以现在图表应该在 A6:D:11，但图表保留在那里并隐藏了第 5 行。

我设计了一个包含图表和形状的模板，然后在运行时向图表提供数据并更改形状的一些属性。现在我的图表在其前 5 行中包含一些数据，我在第 2 行之后插入一行，然后一切都应该向下一行，但这没有发生。

在设计时，我检查了图表的属性`move and size with cells`是否设置为 true。然而，这并没有在运行时以编程方式发生。尽管在设计时插入行没有问题。

请帮我解决我的问题
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-31T07:53:41.437

我遇到了这个问题，设置图表的任何属性都没有区别。我追踪了我的问题，这是由于我的工作簿中有多个工作表。我在许多工作表中插入单元格，但只有第一个工作表处于活动状态。

如果我添加 currentsheet.Activate(); 在我插入单元格之前，图表会按照您的预期移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:15:47.543

我遇到了同样的问题并设法通过解锁图表来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:22:15.277

我用解决方法解决了它，以防有人来看 -
图表和形状仍然没有移动，但现在我`TopLeftCell`在运行时分配图表和形状的属性并强制它们移动，尽管现在我有保持其位置的开销。

# linux - 在 Linux Cluster 中跨机器共享大型 mmaped 数据文件

> ID：10190447
> 
> 赞同：4
> 
> 时间：2012-04-17T11:36:06.553
> 
> 标签：linux, memory-management, network-programming, cluster-computing, mmap

假设我有一个 1 TB 的数据文件，从本地安装的“主”Linux 系统的硬盘文件系统读/写到在同一“主”系统上运行的进程的虚拟地址空间。

我有 20 台专用的“从”Linux 服务器通过千兆交换机连接到“主”系统。我想通过将这些“从”服务器上的 1 TB 以只读方式映射到它们的进程地址空间来随机读取它。

我的问题是将数据集从主系统同步（也许是懒惰）到从系统的最有效方法是什么？（例如，是否可以通过 NFS 挂载文件，然后从那里对其进行映射？如果是，这是最好的解决方案吗？如果不是，什么是解决方案？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-08T22:19:40.293

我最近在工作中一直在玩这样的想法（当然这是文件大小要小得多）。我相信 NFS 可以很好地读取，但您可能会遇到并发写入的问题。如果您只有一个“作家”，那么您的想法应该可以很好地发挥作用。如果数据文件是结构化的，我建议使用一些描述的分布式缓存并允许数据的多个副本分布在集群中（以实现冗余）。

最后，我们选择了 SAN 和集群文件系统解决方案（在我们的案例中是 Symantec VCS，但任何通用集群文件系统都可以）。我们这样做的原因是我们无法通过使用纯 NFS 获得所需的性能。您选择的集群文件系统需要正确支持 mmap 和分布式缓存。

# menu - 将项目添加到所有视图菜单

> ID：10190450
> 
> 赞同：0
> 
> 时间：2012-04-17T11:36:21.393
> 
> 标签：menu, eclipse-rcp

在 Eclipse 中，可以使用以下特殊位置 URI 扩展到任何弹出菜单：

```
popup:org.eclipse.ui.popup.any 
```

是否可以对视图菜单（每个视图中的小三角形）做同样的事情？（我正在开发一个 Eclipse RCP 应用程序，而不是扩展 IDE。这个项目的目的是帮助调试和测试应用程序。）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:09:19.490

简短的回答：不，这是不可能的，除非您为所有视图手动添加项目。

稍长的答案：是的，如果你

*   手动浏览视图注册表
*   `AbstractContributionFactory`使用位置 URI “menu:<view-id>” 以及`createContributionItems(...)`您想要的任何内容创建一个新的。（或者，您可以创建`AbstractMenuAdditionCacheEntry`甚至更好`MenuAdditionCacheEntry`- 尽管这些是内部的并且需要一些额外的工作......最后一个允许您拥有一个集中定义的菜单扩展点，用于所有这些添加。）
*   `IMenuService.addContributionFactory(AbstractContributionFactory factory)`使用（用于`IWorkbenchWindow.getService(IMenuService.class)`获取菜单服务）将这些添加到工作台。

我没有测试过上面的配方，但我在应用程序中使用了非常相似的东西......

# concurrency - 如何在 Jmeter 中生成并发用户负载

> ID：10190455
> 
> 赞同：11
> 
> 时间：2012-04-17T11:36:32.633
> 
> 标签：concurrency, jmeter, load-testing

我有一个测试，用户将登录并在搜索字段中输入搜索关键字并获得结果。终于登出。

现在我想使用 Jmeter 测试并发性。所以这就是我想出的。

```
Test plan
  Thread group
  + Login request
    + Synchronizing Controller
  + Search string 
    + Synchronizing Controller
  + Logout 
```

我添加了 10 个线程。我在同步控制器中添加了 5 个。那么当我运行测试时，我会得到 5 个用户的并发吗？其余5个用户将是同时用户吗？

当登录页面加载时，我也依赖请求。因此，为了实现登录并发，我在事务控制器中添加了所有请求，并将同步控制器作为子级添加到事务控制器。如果我做得对，请告诉我。

另外请让我知道是否有另一种方法可以实现特定操作的并发（例如：5 个用户同时点击登录按钮）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T12:58:32.350

首先，您应该尝试区分“并发”和“同时”。它们通常是非常相似的术语，但在负载测试中它们具有不同的含义。同时是指同时有两个或多个请求。并发是两个或更多线程（脚本）并行运行。

因此，您所说的是尝试配置 JMeter 以模拟多个同时请求。但实际上，有比这更好的方法。您应该将测试设置为您希望应用程序支持的负载类型的真实表示，而不是专注于尝试同时满足相同的请求，这在 JMeter 中很繁琐。如果你做得好，使用随机等待时间、吞吐量控制器和实际数量的线程，那么你将自动测试并发性，同时运行真正、有效和有用的性能测试。

因此，基本上，放弃同步计时器，改用恒定吞吐量计时器，配置等待时间，然后计算正确的线程数以生成所需的负载。

这种方法的额外好处是您将不太可能提出假阴性。例如，如果您使用 5 个同时登录请求访问您的服务器，那么您可能会发现此调用是单线程的，并且响应时间会增加。但也许这无关紧要，也许同时两次登录调用的机会太小，以至于不值得花时间更改代码。这是负载测试中一个非常非常重要的概念——也许是最重要的——你必须有现实的目标，没有这些你可能会运行测试、发现错误的错误并且通常会永远浪费时间。

# wcf - HTTPHandler 和 svc

> ID：10190456
> 
> 赞同：1
> 
> 时间：2012-04-17T11:36:32.673
> 
> 标签：wcf, routing, httphandler, svc

我有一个现有的 Web 应用程序，它安装在多台机器上。脚本客户端和 .net 客户端通过一台机器使用“.asmx”服务，将所有调用路由到其他机器。

客户端----> |网站\虚拟目录(HttpHandler)| ----> |其他服务器\真正的.asmx|

我添加了一个执行相同功能的新 .svc 服务，并为它添加了一个处理程序（目录的配置）：

```
<system.webServer>
<handlers>
  <add name="MY_ASMX" verb="*" path="*.asmx" type="MY.AO.HttpProxy, Astea.AO.HttpProxy" resourceType="Unspecified" preCondition="integratedMode" />
  <add name="MY_ASPX" verb="*" path="*.aspx" type="MY.AO.HttpProxy, Astea.AO.HttpProxy" resourceType="Unspecified" preCondition="integratedMode" />
  <add name="MY_WSDL" verb="*" path="*.wsdl" type="MY.AO.HttpProxy, Astea.AO.HttpProxy" resourceType="Unspecified" preCondition="integratedMode" />
  <add name="MY_SVC" verb="*" path="*.svc" type="MY.AO.HttpProxy, Astea.AO.HttpProxy" resourceType="Unspecified" preCondition="integratedMode" /> 
```

虽然 asmx 请求路由正常，但我在终端服务器上的新 .svc 没有被调用，甚至 Httphandler 也被跳过。如果我直接在另一台机器上调用 .svc 就可以了。

我得到的错误是：

```
WebHost failed to process a request.
Sender Information: System.ServiceModel.Activation.HostedHttpRequestAsyncResult/26458746
 Exception: System.Web.HttpException (0x80004005): The service '/Mysite/MyDirectory/settings.svc' does not exist. ---> System.ServiceModel.EndpointNotFoundException: The service '/Mysite/MyDirectory/settings.svc' does not exist. 
```

我已经尝试了以下

1.  将“buildProviders”添加到删除 .svc 的编译部分
2.  单击 MimeTypes 并输入“.svc”和“application/octet-stream”并保存
3.  添加处理程序：

没有任何帮助，没有调用 http 处理程序

ps 我正在使用 AppPool .net 4.0 Integrated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:51:58.587

.svc 扩展默认被视为 WCF 服务，并且它们已经存在处理程序/模块。您可以通过在元素之前放置一个元素来删除现有的处理程序/模块`<add>`：

```
<remove name="svc-ISAPI-4.0_32bit" /> 
```

（或者，如果在 win64 上：）

```
<remove name="svc-ISAPI-4.0_64bit" /> 
```

并且，在`<modules>`元素中：

```
<remove name="ServiceModel-4.0" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:53:01.437

我已经找到了。添加：

```
<compilation debug="true" >
  <buildProviders>
    <remove extension=".svc"/>
  </buildProviders>
</compilation> 
```

导致了一个错误，让我第一次退缩：“~/ServiceManagement.svc”要求“.svc”的 buildProvider 将打开

安装 MS AppFabric 时，会在计算机根配置中自动创建“~/ServiceManagement.svc”。由于我将该文件夹仅用于重定向，因此我不需要 Appfabric，因此我将其删除：

```
<system.serviceModel>
<serviceHostingEnvironment>
  <serviceActivations>
    <remove relativeAddress="~/ServiceManagement.svc"/>
  </serviceActivations>
</serviceHostingEnvironment> 
```

# javascript - 如何在ckeditor对话框中使输入只读

> ID：10190457
> 
> 赞同：3
> 
> 时间：2012-04-17T11:36:33.593
> 
> 标签：javascript, html, css, input, ckeditor

我正在尝试找到一种在 ckeditor 对话框中以只读方式进行输入的方法。

我已经初始化了这样的元素：

```
type: 'hbox',
widths: ['25%', '75%'],
children:
    [{
        type: 'text',
        id: 'moduleId',
        label: 'Module', 
```

查看[文档](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.dialog.definition.uiElement.html)我猜唯一的方法是应用一些 CSS 样式来输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:07:15.523

我在 ckeditor 源代码中找到了解决方案。只需要将它添加到元素初始化

```
onLoad : function()
{
    this.getInputElement().setAttribute( 'readOnly', true );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:05:36.220

我不确定您是否可以在定义中将元素设置为禁用，但您可以在加载对话框后获取该元素并将其禁用：[http ://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.ui .dialog.uiElement.html#disable](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.ui.dialog.uiElement.html#disable)

# mysql - 在单个 SQL 查询中修剪、转换和比较来自 SQL DB 的字符串

> ID：10190464
> 
> 赞同：1
> 
> 时间：2012-04-17T11:37:03.010
> 
> 标签：mysql, sql, sql-server-2008, sql-server-2005

我想从 varchar 类型的数据库中检索数据，例如 size: 100mm,100 ,20mm, 500, 450mm 并从字符串中修剪“mm”，然后将其转换为整数，然后从同一列进行比较：例如@Size1 <= size_column 和 @size2 >= size_column：

这是我要修剪和转换的查询，但它给了我错误。

```
SELECT DEVICE_NO,
CASE [Rms_Size]
WHEN
(SELECT RMS_SIZE FROM DW_DATA.DBO.DIM_DEVICE WHERE
Ltrim(Rtrim(Rms_Size)) LIKE '%mm')
THEN
(SELECT SUBSTRING(Rms_Size,1,LEN(rms_size)-2)
FROM DW_DATA.DBO.DIM_DEVICE
where Ltrim(Rtrim(Rms_Size)) LIKE '%mm')
ELSE
RMS_SIZE
END
AS RMS_SIZE
FROM
DW_DATA.DBO.DIM_DEVICE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:38:37.240

试试这个 -：

```
SELECT 
   DEVICE_NO,
   CASE 
      WHEN
         LTRIM(RTRIM(Rms_Size)) LIKE '%mm'
      THEN
         SUBSTRING(Rms_Size,1,LEN(rms_size)-2)
      ELSE
         RMS_SIZE
      END
      AS RMS_SIZE
FROM DW_DATA.DBO.DIM_DEVICE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:54:36.820

```
create table mytable(
mystring varchar(100))

insert into mytable values('100mm')
insert into mytable values('100')

create Function removeChars(@mainString VarChar(100))
Returns VarChar(1000)
AS
BEGIN
    WHILE PatIndex('%[^0-9]%', @mainString) > 0 BEGIN
        Set @mainString = Stuff(@mainString, PatIndex('%[^0-9]%', @mainString), 1, '')
    END

    Return @mainString
END

select * 
from mytable
where dbo.removeChars(mystring) >50 
```

# actionscript-3 - 在 as3 中发送应用内短信

> ID：10190466
> 
> 赞同：1
> 
> 时间：2012-04-17T11:37:09.340
> 
> 标签：actionscript-3, adobe, air-native-extension

如何使用 as3 在 iphone 和 android 应用程序中发送短信。我在谷歌搜索时发现了这段代码：

```
var callURL:String="sms:0-123-456-7890";
var targetURL:URLRequest = new URLRequest(callURL);
navigateToURL(targetURL); 
```

它可以工作，但它正在将应用程序导航到短信窗口控制器。可以在不打开短信控制器窗口的情况下完成吗？是否有任何东西可以在应用程序本身中打开一个窗口。是否有任何空气原生扩展可以为 android 和 iphone 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:12:10.607

是的，使用 navigateToURL 会将您弹出到手机默认的 SMS 应用程序。要解决这个问题，您将需要使用本机扩展。

我知道一个适用于[Android](http://www.smallscreendesign.com/2011/09/29/air-native-extensions-rock/)的：

[https://github.com/mr-archano/Android-AIR-Extensions](https://github.com/mr-archano/Android-AIR-Extensions)

如果您有 Android 手机，您可以在[AIRexplorer](https://play.google.com/store/search?q=AIRExplorer)应用程序中查看此 ANE 的演示。从列表中选择 SMS ANE 版本（该应用程序包括扩展以及 navigateToURL）

我现在不知道适用于 iOS 的，所以你可能需要做一些挖掘工作

哦，另外，想添加评论，因为我不确定您的意图。

**如果您的目标是在没有任何**用户交互的情况下发送短信，那是不可能的。ANE与否

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:40:19.503

我非常怀疑 ios 或 android（如果你的设备是 root 的话？）是否允许在未经用户明确同意的情况下发送 SMS。

# c# - 如何用#替换数字

> ID：10190469
> 
> 赞同：-7
> 
> 时间：2012-04-17T11:37:21.243
> 
> 标签：c#, asp.net

您好，我有一个 8 位数字的帐号。我怎样才能遍历它并用#替换数字并且只显示最后一个数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:43:11.317

```
int number = 12345678;
String strNumber = number.ToString();
String result = "#######" + strNumber[strNumber.Length - 1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:45:57.300

8 位数字 - 显示最后一位。

```
string acctNumber = "12345678".Substring(7, 1).PadLeft(8, '#'); 
```

ToString() 也是一个不错的选择：

```
acctNumber.ToString("\\#\\#\\#\\#\\#\\#\\#0"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:40:44.263

```
acct = Regex.Replace(acct, @"\d{7}", "#######"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T11:40:57.320

你可以使用一个`Regex.Replace`.

```
 var input = "12345678";
    var pattern = new Regex(@"\d{7}");
    var result = pattern.Replace(input, "#######"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T11:41:11.737

```
var result = Regex.Replace("01234567", "\\d{7}", "#######") 
```

将您的帐号替换为`"01234567"`

但是，这样做可能会更快

```
var result = "#######" + acct.Substring(7) 
```

（`acct`作为字符串的帐号在哪里 - 如果是`int`然后使用`acct.ToString().Substring(7)`）

如果你能保证`acct`是8个字符长。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-17T11:45:10.537

**[字符串构造函数（Char，Int32）](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)**

> 将 String 类的新实例初始化为由重复指定次数的指定 Unicode 字符指示的值。

```
string Number = "12345678";
string str = new string('#', 7) + Number.Substring(Number.Length - 1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T11:50:34.460

如果帐号是`int`

```
int accountNumber = 12345678;
String result = "#######" + accountNumber .ToString()[7]; 
```

正如[蒂姆](https://stackoverflow.com/questions/10190469/how-to-replace-numbers-with/10190549#10190549)建议的那样。但是如果帐号是`string`

```
string accountNumber = "12345678";
string result = "#######" + acc.ToCharArray()[accountNumber.Length - 1]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-17T11:49:21.550

您可以将数字格式化为字符串，然后使用`string.remove(0,7)`“#######”作为前缀从字符串中删除前 7 个字符。例如：

```
 int accNumber = 10085697;

        string strAccountNumber=accNumber.ToString();

        string truncatedAccountNumber="#######"+strAccountNumber.Remove(0,7); 
```

# java - 使用 .getResource() 从 .jar 获取文件

> ID：10190470
> 
> 赞同：0
> 
> 时间：2012-04-17T11:37:21.977
> 
> 标签：java, file, jar, getresource

我正在尝试访问 .jar 中的文件。在 Netbeans 中，这是：

```
System.out.println(new File(this.getClass().getResource("Image.jpg").getFile()).exists()); 
```

打印出来：

```
true 
```

然而，在构建之后，它打印错误。

该文件肯定在 .jar 中，在 .class 文件旁边，如下所示：

```
new Frame(){
        @Override
        public void paint(Graphics g){
            try{
                g.drawImage(ImageIO.read(this.getClass().getResource("Image.jpg")), 0, 0, this);
            } catch(Exception e){e.printStackTrace();}
        }
    }.setVisible(true); 
```

确实在构建后绘制图像。

如何将 Image.jpg 作为 File 对象访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:57:17.323

文件已打包，试试

```
resource.getInputStream() 
```

或者

```
InputStream streamOfYourImg = this.getClass().getRessourceAsStream("com/package/resources/image.jpeg"); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:52:45.807

你没有得到一个 File 对象。它是 JAR 中的条目，而不是文件系统上的文件。你有几个选择。通过将 InputStream 复制到文件系统来创建文件，找到使用 InputStream 的方法，或者始终扩展您的 JAR。

# php - 如何获取链接的名称？

> ID：10190472
> 
> 赞同：0
> 
> 时间：2012-04-17T11:37:40.027
> 
> 标签：php, mysql

我已经从两个不同的表中获取数据是这样的。但现在，我想要以下结果及其原始名称，而不是像状态 1 表示好的数字，user_id=1 表示“Mike”。

![紧迫的 ？](../Images/ffa591ff2065f2903e82bb8c8c94bb13.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:40:30.907

要使用 userID 选择用户名，请尝试使用[内部连接](http://www.w3schools.com/sql/sql_join_inner.asp)

和/或你可以这样说 1 = 好：

```
if($status == 1)
{
    echo "Good";
} 
```

（虽然这也可以通过内部连接来完成，如果你有另一个表中的值当然）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:45:03.900

只是`JOIN`你的桌子，比如：

```
SELECT f.FollowDate, s.StatusName, u.UserName
FROM Folowers f
INNER JOIN Users u    ON f.UserId = u.ID
INNER JOIN Statuses s ON f.StatusID = s.ID 
```

# iphone - iphone上传图片

> ID：10190475
> 
> 赞同：-4
> 
> 时间：2012-04-17T11:37:57.750
> 
> 标签：iphone, ios, xcode

我是 Iphone 开发的新手。我想将图像从 Iphone 库上传到服务器。我想在屏幕上点击一个按钮，通过点击按钮用户可以看到图像文件并选择一个用户想要的文件。选择文件后，我想在图像视图中显示图像。
怎么做。如何使用 ImageViewController？

谢谢，
阿维纳什·帕蒂尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:46:09.943

使用 UIImagePickerController 及其委托方法，并在控制器的 .h 文件中实现 UIImagePickerControllerDelegate

只需为您的按钮单击编写此代码

```
-(IBAction)btnTapped:(id)sender
{
        UIImagePickerController *imgPicker = [[UIImagePickerController alloc] init];
        imgPicker.delegate = self;
        imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        [self presentModalViewController:imgPicker animated:YES];
} 
```

当您单击此按钮时，UIImagePickercontroller 将加载，选择您想要的任何图像，UIImagePickerController 的此委托方法将被调用

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [picker dismissModalViewControllerAnimated:YES];
    [picker release];
    //This is selected image
    UIImage *img = [info objectForKey:UIImagePickerControllerOriginalImage];
    YOURIMAGEVIEW.image = img;
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker dismissModalViewControllerAnimated:YES];
    [picker release];
} 
```

现在搜索`ASIHttpRequest`如何将图像上传到网络服务器......尝试一些谷歌搜索......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:50:54.983

首先，您必须获取用于以下代码的图像表单照片库。

```
 - (IBAction)BrowseImage:(id)sender {

if ([UIImagePickerController isSourceTypeAvailable:
     UIImagePickerControllerSourceTypeSavedPhotosAlbum])
{
    UIImagePickerController *imagePicker =
    [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = 
    UIImagePickerControllerSourceTypePhotoLibrary;
    imagePicker.mediaTypes = [NSArray arrayWithObjects:
                              (NSString *) kUTTypeImage,
                              nil];
    imagePicker.allowsEditing = NO;
    [self presentModalViewController:imagePicker animated:YES];
    //newMedia = NO;

  }

  }
         -(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
         {
       [self dismissModalViewControllerAnimated:YES];

         } 
```

选择图像后，您已使用 http post 方法将该图像发送到服务器

这是代码

```
 NSString *urlString = @"your Url";
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSMutableData *body = [NSMutableData data];

NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];

// file
NSData *imageData = UIImageJPEGRepresentation([self scaleAndRotateImage:Mainimage.image],90);

[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// [body appendData:[[NSString stringWithString:@"Content-Disposition: attachment; name=\"user_photo\"; filename=\"photoes.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\"; filename=\"%@.jpg\"\r\n",@"ImageNmae"] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

// Text parameter1
// NSString *param1 = @"parameter text";
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"title\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:ImageTitel.text] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

// close form
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// set request body
[request setHTTPBody:body]; 
```

# c# - TPL 启动进程失败

> ID：10190484
> 
> 赞同：0
> 
> 时间：2012-04-17T11:38:22.640
> 
> 标签：c#, process, cmd, task-parallel-library

下面的代码出了什么问题？我喜欢在压缩完成后启动一个进程并更新 UI。

错误是指定的可执行文件不是此操作系统平台的有效应用程序。

```
 string sArgs = "a all.zip a.txt b.txt c.txt";
    ProcessStartInfo psi = new ProcessStartInfo("7z.exe", sArgs);
    psi.UseShellExecute = false;
    psi.CreateNoWindow = false;
    psi.LoadUserProfile = false;
    Process proc = new Process();

    Task t1 = new Task(() =>
        {
            proc = Process.Start(psi);
        }
    );

    button13.Enabled = false;
    Task t2 = t1.ContinueWith((antecedent) =>
        {
            button13.Enabled = true;
        }, TaskScheduler.FromCurrentSynchronizationContext()
    );

    t1.Start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:28:16.217

*   你在windows上运行吗？
*   是`7z.exe`在系统`PATH`吗？
*   文件是`7z.exe`64 位的，而您的操作系统是 32 位的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:01:13.597

请注意：此代码将立即启用 button13，因为您的主任务不会等待进程退出。这段代码应该可以解决问题：

```
string sArgs = "a all.zip a.txt b.txt c.txt";
ProcessStartInfo psi = new ProcessStartInfo("7z.exe", sArgs);
psi.UseShellExecute = false;
psi.CreateNoWindow = false;
psi.LoadUserProfile = false;
Process proc = new Process();

Task t1 = new Task(() =>
    {
        proc = Process.Start(psi);
        proc.WaitForExit();
    }
);

button13.Enabled = false;
Task t2 = t1.ContinueWith((antecedent) =>
    {
        button13.Enabled = true;
    }, TaskScheduler.FromCurrentSynchronizationContext()
);

t1.Start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:29:42.903

7z 在你的道路上吗？您可以通过psi的[EnvironmentVariables属性进行设置](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.environmentvariables.aspx)

# android - 有没有办法制作嵌套的 ExpandableListView

> ID：10190485
> 
> 赞同：1
> 
> 时间：2012-04-17T11:38:24.933
> 
> 标签：android, android-layout, expandablelistview

通过遵循[本](http://en.wikicode.org/index.php/Custom_ExpandableListView#Custom_ExpandableListView.java)教程，我能够做出大致如此布局的视图：

```
Group1
   child1
   child2
group2
   child1
   child2 
```

但我想要更多的嵌套：

```
group1
   child1
       superchild1 
```

关于如何做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:41:50.570

这是一个想法：

添加您的子视图，其中包括两者 `child, superchild1`并最初使其`superchild1`不可见。然后单击时`child1`使其可见。如果您制作一个复选框并为其提供一些您想要的背景，那么您应该很容易编写代码`child1`，这也可以避免状态维护。

# r - R聚合部分列表

> ID：10190490
> 
> 赞同：1
> 
> 时间：2012-04-17T11:38:43.013
> 
> 标签：r, aggregate, data.table

我有一个大数据框（base_cov_norm_compl_taxid3），每一行代表一个基因组区域，每一列代表样本中该区域的覆盖率。每个taxed有多个基因组区域（类似于基因组），我想使用聚合来查找相同类型的所有基因组区域的均值和标准差等。

```
 base_cov_norm_compl_taxid3[1:10,1:10]
                               geneid_stst attr   taxid
1  1001585.66299.NC_015410_1089905_1090333 mrkg 1001585
2  1001585.66299.NC_015410_1090348_1090740 mrkg 1001585
3  1001585.66299.NC_015410_1215751_1216851 mrkg 1001585 
4  1001585.66299.NC_015410_2346036_2347421 mrkg 1001585
5  1001585.66299.NC_015410_2354962_2429569 PFPR 1001585
6  1001585.66299.NC_015410_2610633_2611913 mrkg 1001585
7  1001585.66299.NC_015410_3224232_3225248 mrkg 1001585
8  1001585.66299.NC_015410_3682375_3683115 mrkg 1001585
9  1001585.66299.NC_015410_4101816_4103195 mrkg 1001585
10 1001585.66299.NC_015410_4141587_4142873 mrkg 1001585
                       locus X765560005.stool1 X764224817.stool1       MH0008
1  NC_015410_1089905_1090333                 0                 0 0.0000000000
2  NC_015410_1090348_1090740                 0                 0 0.0000000000
3  NC_015410_1215751_1216851                 0                 0 0.0000000000
4  NC_015410_2346036_2347421                 0                 0 0.0281385281
5  NC_015410_2354962_2429569                 0                 0 0.0005361355
6  NC_015410_2610633_2611913                 0                 0 0.0000000000  
7  NC_015410_3224232_3225248                 0                 0 0.0000000000
8  NC_015410_3682375_3683115                 0                 0 0.0000000000 
9  NC_015410_4101816_4103195                 0                 0 0.0000000000
10 NC_015410_4141587_4142873                 0                 0 0.0000000000
       V1.CD9.0 X764062976.stool1 X160643649.stool1
1  0.0000000000                 0                 0
2  0.0000000000                 0                 0
3  0.0000000000                 0                 0
4  0.0000000000                 0                 0
5  0.0004557152                 0                 0
6  0.0000000000                 0                 0
7  0.0000000000                 0                 0
8  0.0000000000                 0                 0
9  0.0000000000                 0                 0
10 0.0000000000                 0                 0 
```

该`mrkg`类型总是有多个基因组区域，有时每个基因组有多个 PFPR 区域。我想通过`taxid`和进行汇总`attr`，但仅适用于`attr=mrkg`. 我不知道该怎么做。下面的代码可以通过taxid 和attr 聚合，但是我想先写`list(base_cov_norm_compl_taxid3$taxid,base_cov_norm_compl_taxid3$attr=mrkg)`一些子集？

任何帮助表示赞赏，

```
base_cov_mean<-aggregate(base_cov_norm_compl_taxid3[,5:266],
  list(base_cov_norm_compl_taxid3$taxid,
  base_cov_norm_compl_taxid3$attr),mean) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T23:24:55.053

你可以使用`data.table`

*   它经过优化，`mean`因此速度非常快。
*   `subset`在调用内定义也很容易。
*   它具有@Dwin`with`解决方案的所有优点，不必用大量`$`'s污染代码

这是一个例子

```
library(data.table)
DT <- data.table( base_cov_norm_compl_taxid3)
# the columns of which you want the eman
columns_of_interest <- names(DT)[5:266]
DT[attr %in% 'mrkg', lapply(.SD, mean), by = list(taxid, attr), .SDcols = columns_of_interest] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:19:51.417

```
 subdf <- subset(base_cov_norm_compl_taxid3, attr %in% "mrkg")
 base_cov_mean <- with(subdf,    aggregate(subdf[5:266], 
                                   by=list(taxid, attr),
                                   FUN=mean)  
                        ) 
```

我没有使用`attr == "mrkg"`，因为它也不能概括。

# datetime - 可空日期时间字段未在 Store (Ext.Net) 中呈现

> ID：10190491
> 
> 赞同：2
> 
> 时间：2012-04-17T11:38:43.107
> 
> 标签：datetime, store, ext.net, jsonreader

```
<ext:Store ID="StoreSample" runat="server" RemotePaging="true" RemoteSort="true"           AutoLoad="true"
    ShowWarningOnFailure="false" >   
 <Proxy>
        <ext:HttpProxy Url="~/Samples/OpenEdit/GetSampleList" Json="true">               
        </ext:HttpProxy>
</Proxy>    
<Reader>
        <ext:JsonReader IDProperty="Id" Root="data">
            <Fields>
              <ext:RecordField Name="Id" Type="Int">
              </ext:RecordField>
              <ext:RecordField Name="SampleDescription" Mapping="Description">
              </ext:RecordField>
              <ext:RecordField Name="SampleStartDate" Mapping="StartDate" Type="Date">
              </ext:RecordField>
              <ext:RecordField Name="SampleEndDate" Mapping="EndDate" Type="Date" >
              </ext:RecordField>
            </Fields>
        </ext:JsonReader>
</ext:Store> 
```

在此存储中，字段 SampleStartDate 和 SampleEndDate 在模型中属于 Nullabe Datetime (Datetime?) 类型。在控制器中，我获得了每个字段的值，并且我在函数 GetSampleList 中将其转换为 StoreResult。但是在商店中，我总是在这两个字段中将值设为“未定义”。但是，如果我从 Datetime 更改数据类型？在模型中的 DateTime 中，我正在获取存储中的所有值。

任何人都可以帮助我在商店中获取可为空的日期时间值吗？

我在 GridPanel 中使用这家商店

```
<Sample:GridPanel ID="GridPanelSample" runat="server" StoreID="StoreSample" Header="false"
                    AnchorHorizontal="right" AnchorVertical="96%" StandardPager="true" MonitorResize="true" TabIndex="15">
                    <TopBar>
                    </TopBar>
                    <ColumnModel>
                        <Columns>    
                            <ext:Column runat="server" ColumnID="SampleDescription" Header="Description"
                                DataIndex="SampleDescription">
                            </ext:Column> 
                            <ext:DateColumn runat="server" ColumnID="SampleStartDate" Header="StartDate"
                                DataIndex="SampleStartDate" Format="d MMM Y">                                    
                            </ext:DateColumn>
                            <ext:DateColumn runat="server" ColumnID="SampleEndDate" Header="EndDate"
                                DataIndex="SampleEndDate" Format="d MMM Y">
                            </ext:DateColumn> 
                        </Columns>
                    </ColumnModel>
                    <SelectionModel>
                        <ext:RowSelectionModel ID="RowSelectionModel1" runat="server" SingleSelect="true"
                            MoveEditorOnEnter="true">
                        </ext:RowSelectionModel>
                    </SelectionModel>
                    <View>
                        <ext:LockingGridView runat="server" ID="gridview1" />
                    </View>
                    <Listeners>                         
                        <ViewReady Handler="openEdit.setOpenEditGridColumnWidths();"></ViewReady>                           
                    </Listeners>
                </Sample:GridPanel> 
```

但 SampleStartDate 和 SampleEndDate 列始终为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:45:23.907

我认为您需要配置`.DateFormat`.`<ext:RecordField>`

**例子**

```
<ext:RecordField Name="lastChange" Type="Date" DateFormat="M$" /> 
```

设置 .DateFormat="M$" 会自动将`"/Date(123...)/"`值解析为 JavaScript Date 对象。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:47:30.113

最后我找到了解决方案。

这是因为我没有隐藏日期类型。它总是返回 Microsoft AJAX 序列化日期（例如“/Date(1313467512730+0530)/”）。这个日期我需要像“2011-08-15T00:00:00:000”一样转换。为此，我使用了转换处理程序。

代码就像

```
 <ext:RecordField Name="SampleStartDate" Mapping="StartDate" Type="Date">
        <Convert Handler="return new Date(parseInt(value.substr(6)))" />
 </ext:RecordField> 
```

然后我在存储中获取可为空的日期时间字段值。

希望对你也有帮助

谢谢

# jquery - 单击另一个按钮后如何将导航菜单按钮返回到以前的样式

> ID：10190492
> 
> 赞同：0
> 
> 时间：2012-04-17T11:38:47.213
> 
> 标签：jquery, html, css

我有一个带有 5 个按钮的水平导航菜单，我需要更改单击按钮的状态。这是我用来实现这一点的代码：

**HTML：**

```
<div id="tab_menu">

<ul>
<li class="li_class"><a href="#">Link 1</a></li>
<li class="li_class"><a href="#">Link 2</a></li>
<li class="li_class"><a href="#">Link 3</a></li>
<li class="li_class"><a href="#">Link 4</a></li>
<li class="li_class"><a href="#">Link 5</a></li>
</ul>

</div> 
```

**CSS：**

```
#tab_menu {
        position:relative;
        width:800px;
        margin:0px auto;
        padding:20px;
        background-color:#fff;
    }

    ul {
        position:absolute;
        top:0px;
        margin:0px;
        background-color:#fff;
        list-style:none;
        overflow:auto;
    }

    ul li {
        float:left;
        width:150px;
        background-color:#1227B0;
        border:1px dashed #fff;
        border-radius:0px 0px 10px 10px;
        height:30px;
    }

    ul li a {
        color:#fff;
        width:150px;
        text-align:center;
        text-decoration:none;
        display:block;
        font-size:14px;
        line-height:30px;
    } 
```

**查询：**

```
$(document).ready(function() {
    $('.li_class').click(function() {
        $(this).css('background-color', '#7787F1');
    });
});​ 
```

问题是，按钮的样式更改为单击时指定的颜色，但是当我单击另一个按钮时，我需要恢复按钮的原始样式，我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:40:50.790

将所有按钮设置回默认颜色（假设`#1227B0`来自您的代码），然后再更改`$(this)`。

```
$(document).ready(function() {
    $('.li_class').click(function() {
        $('.li_class').css('background-color', '#1227B0');
        $(this).css('background-color', '#7787F1');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:42:39.697

尝试`class`通过 jQuery 使用名称而不是直接的 CSS 样式。因此，当您需要将按钮标记为已单击时，您可以添加一个带有 的类名`.addClass('clicked');`，并在您不希望它被设置样式时将其删除：`.removeClass('clicked');`。

当然你需要创建你的 CSS 声明：

```
.clicked {
  background-color: #7787F1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:43:25.073

您可以`data-`为此使用属性：

**HTML：**

```
<ul>
<li data-default-color="#1227B0" class="li_class"><a href="#">Link 1</a></li>
<li data-default-color="#1227B0" class="li_class"><a href="#">Link 2</a></li>
<li data-default-color="#1227B0" class="li_class"><a href="#">Link 3</a></li>
<li data-default-color="#1227B0" class="li_class"><a href="#">Link 4</a></li>
<li data-default-color="#1227B0" class="li_class"><a href="#">Link 5</a></li>
</ul> 
```

**jQuery：**

```
$('.li_class').click(function() {
    $(this).css('background-color', '#7787F1').siblings().each(function() {
        $(this).css("background-color", $(this).data('default-color'));
    });
});​ 
```

[**现场演示**](http://jsfiddle.net/wpzQj/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:44:12.870

每次点击重置颜色：

```
$(document).ready(function(){
           $('.li_class').click(function(){
               $('.li_class').css('background-color', '#1227B0');
               $(this).css('background-color', '#7787F1');
               return false;
           });
        });​ 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/wpzQj/5/](http://jsfiddle.net/wpzQj/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T11:45:05.017

嗨尝试以下代码

```
 <script>
   $(document).ready(function(){
           $('.li_class').click(function(){
           $('.li_class').css('background-color', '#1227B0');
               $(this).css('background-color', '#7787F1');
           });
        });

    </script> 
```

在这里尝试演示[http://jsfiddle.net/wpzQj/8/](http://jsfiddle.net/wpzQj/8/)

# ios - 适用于 iOS 应用程序的 VNC 服务器 API

> ID：10190493
> 
> 赞同：0
> 
> 时间：2012-04-17T11:38:56.283
> 
> 标签：ios, iphone-privateapi

我正在尝试开发一个将作为 VNC 服务器在后台运行的 iPhone 应用程序。请建议我应该使用哪些私有 API。我不是为 App Store 开发这个应用程序，所以我想我可以为此使用一些私有 API。

由于某些原因，我也不想越狱。

请建议我应该实现哪些 API 和概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:54:20.180

看看文森。他们使用有根/越狱的 IOS，它应该给你一个起点。它在 Cydia 下，但它不适用于 IOS 6。仅供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:21:23.937

我认为没有任何“API”。也许您可以开始查看“airplay” api。

# c - 覆盖 glibc 崩溃

> ID：10190500
> 
> 赞同：3
> 
> 时间：2012-04-17T11:39:37.000
> 
> 标签：c, stack-trace, glibc

所以当 glibc 崩溃时，它有一个***glibc detected *** crash 消息。然后它会打印一堆回溯，比如

```
*** glibc detected *** ./odin: free(): invalid pointer: 0xbfba4444 ***
======= Backtrace: =========
/lib/tls/i686/cmov/libc.so.6(+0x6b161)[0xb75f9161]
/lib/tls/i686/cmov/libc.so.6(+0x6c9b8)[0xb75fa9b8]
/lib/tls/i686/cmov/libc.so.6(cfree+0x6d)[0xb75fda9d]
/usr/lib/libstdc++.so.6(_ZdlPv+0x1f)[0xb77da2ef] 
```

一切都很好，但是当事情崩溃的其他情况下，我一直在做 backtrace() 然后使用系统调用 addr2line 并打印函数中的实际点。但是当它是 glibc 崩溃时，它会退出绕过我调用的任何信号处理程序。

有没有办法解决这些 glibc 崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:11:23.957

IIRC，glibc 实际上调用`abort()`，因此处理`SIGABRT`和打印回溯应该可以为您提供所需的信息。

但是，我建议尝试 valgrind：您收到的消息表明您有内存损坏问题。

旁注（对不起，如果这是多余的；-)）：核心转储有时比回溯更有用。它们可以通过例如`ulimit -c unlimited`在 bash 中设置来启用。当程序崩溃时，它会生成一个名为的文件`core.`（或者只是- 这取决于您正在运行的系统；如果您的系统运行 abrtd 核心文件，如果我没记错的话`core`，会放入其中）。`/var/cache/abrt`然后您可以通过运行使用 gdb 检查核心文件`gdb -c core a.out`；gdb 会话看起来就像进程刚刚崩溃一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T11:48:12.563

这是记忆功能的一个选项，您可以使用[`mallopt`](http://man7.org/linux/man-pages/man3/mallopt.3.html). 通过它的声音，您希望将其设置`M_CHECK_ACTION`为零以允许继续执行，除非您希望程序立即退出，在这种情况下查看是否`2`允许您执行您想要的操作。

这个小程序产生正常的glibc错误：[test1.c](http://ideone.com/wfgsT)
这个 忽略错误继续进行：[test2.c](http://ideone.com/RFB46)
这个就错误中止：[test3.c](http://ideone.com/lRlA0)

# perl - Net::LDAP::Bind 中的错误文件描述符

> ID：10190503
> 
> 赞同：3
> 
> 时间：2012-04-17T11:39:51.283
> 
> 标签：perl, ldap, certificate, starttls

我正在与 Net::LDAP 建立以下 LDAP 连接：

```
my $ldap = Net::LDAP->new( $ldap_host, version => 3 );
my $mesg = $ldap->start_tls(
    verify => 'none',
);

$mesg = $ldap->bind( $dn, password => $ldappass ); 
```

这将起作用，甚至让我稍后进行查询以检查用户的凭据。但是如果我尝试验证服务器证书：

```
my $ldap = Net::LDAP->new( $ldap_host, version => 3 );
my $mesg = $ldap->start_tls(
    verify => 'require',
    cafile => '/var/certs/Certificate_Bundle.pem'
);

$mesg = $ldap->bind( $dn, password => $ldappass ); 
```

它将成功建立连接并~~验证服务器证书~~，但在尝试绑定操作时，我得到以下 LDAP 消息参数：

```
 'resultCode' => 82,
    'pdu' => '0O`J3cn=foo1,ou=foo2,dc=foo3Passwd',
    'errorMessage' => 'Bad file descriptor' 
```

我很惊讶，因为结果代码 82 被定义为 LDAP_LOCAL_ERROR，但所有证书位似乎都有效。如果我将“cafile”参数更改为错误值，它将失败并显示“I/O 错误连接由对等方重置”错误消息。

有任何想法吗？提前致谢。

**更新：**我刚刚意识到证书验证不成功。LDAP 服务器使用的证书不是我被告知的证书。我意识到通过使用 openssl 来监控握手过程：

```
openssl s_client -connect *server:port* -showcerts -state 
```

在那里你可以看到服务器正在有效使用的证书。

# sql - MSSQL 使用 sum 函数对结果进行分页

> ID：10190505
> 
> 赞同：0
> 
> 时间：2012-04-17T11:39:54.550
> 
> 标签：sql, sql-server, pagination

我有一个表格，其中的行在特定日期内对某个类别有多次点击。像这样：

```
ID  CatID   Date                 Count
1   DADB    2011-11-04 00:00:00      3
2   DCBC    2011-11-04 00:00:00      9
3   DADH    2011-11-04 00:00:00      9 
```

因此，要显示两个日期之间每个类别的总数，我会执行以下操作：

```
SELECT WebClicksCategory.CatID, sum(WebClicksCategory.Count) as Count
FROM [Web].[dbo].[WebClicksCategory]
WHERE Date >= '2011-04-17 00:00:00.000'
AND Date <= '2012-04-17 00:00:00.000'
GROUP BY WebClicksCategory.CatID
ORDER BY Count desc 
```

但是，如果我想对这些结果进行分页并执行以下操作：

```
SELECT * FROM 
( SELECT  row_number() OVER (order by Count) AS rownum, 
WebClicksCategory.CatID, sum(WebClicksCategory.Count) as Count 
FROM [Web].[dbo].[WebClicksCategory]
WHERE Date >= '2011-04-17 00:00:00.000'
AND Date <= '2012-04-17 00:00:00.000'
GROUP BY WebClicksCategory.CatID
) AS A
WHERE A.rownum BETWEEN (50) AND (200) 
```

但是我得到一个'Column WebClicksCategory.Count 在选择列表中无效，因为它既不包含在聚合函数也不包含在 GROUP BY 子句中'错误。是否有另一种方法对结果进行分页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:03:28.407

问题不在于将聚合包含在 中，而实际上是将其包含在 OVER 子句中：

```
( SELECT  row_number() OVER (order by Count) AS rownum, 
```

所以我可能建议的是：

```
SELECT rownum, CatID, Count FROM 
( SELECT  row_number() OVER (order by Count) AS rownum, CatID, Count
FROM 
  ( SELECT WebClicksCategory.CatID, sum(WebClicksCategory.Count) as Count 
    FROM [Web].[dbo].[WebClicksCategory]
    WHERE Date >= '2011-04-17 00:00:00.000'
    AND Date <= '2012-04-17 00:00:00.000'
    GROUP BY WebClicksCategory.CatID
  ) AS B
) AS A
WHERE A.rownum BETWEEN (50) AND (200) 
```

# javascript - ExtJS 4加载满足特定条件的列

> ID：10190506
> 
> 赞同：0
> 
> 时间：2012-04-17T11:40:01.247
> 
> 标签：javascript, extjs

所以我有一个为日历事件和视图模型加载数据的商店。问题是我有一个管理面板和用户界面，我希望用户只看到即将发生的事件，但将旧事件保留在数据库中。所以我现在有这个：

```
columns: [{
        header: 'Date of event',
        width: 125,
        dataIndex: 'event_time',
        renderer: this._renderExactDate,
        field: {
            type: 'textfield'
        }
        } 
```

我有这个功能

```
_renderExactDate: function(date) {
        var currentDate = new Date()
        var value = date;
        value = Ext.Date.parse(value,"Y-m-d H:i:s");

        if (currentDate < value) {
            return //something;
        }
        else {
            return //something;
        }

    } 
```

它成功检查日期是否早于当前日期但是当检查完成时我不知道如何防止整个列被渲染以便呈现一个只有即将发生的事件的网格

谢谢

勒隆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:57:35.273

您可以过滤附加到您的网格的商店以仅显示未来的事件。不需要改变`renderer()`功能。还是我没看懂你的问题？

更新：加载商店后，请执行以下操作：

```
store.filter(
    Ext.create('Ext.util.Filter', {filterFn: function(r) { 
       var currentDate = new Date();
       return r.get("date") > currentDate; 
    }})
]); 
```

# oracle10g - ORA-01841: 需要将转换后的字符串与 sysdate 进行比较

> ID：10190522
> 
> 赞同：0
> 
> 时间：2012-04-17T11:41:11.913
> 
> 标签：oracle10g

这是我正在使用的查询

```
select * from (
select table_name, to_number(to_char(trunc(to_date(substr(table_name,instr(table_name,'_',-1,2)+1,8),'yyyymmdd')),'J')) as t_date, to_number(to_char(trunc(sysdate),'J')) as s_date
  from user_tables
 where table_name like 'WORLD_RI%' and table_name not like 'WORLD_RI_ERROR%' )
where t_date < s_date; 
```

我明白了

> ORA-01841: （完整）年份必须介于 -4713 和 +9999 之间，而不是 0

包含最后一个 where 子句 ( `where t_date < s_date`) 的错误。另外仅供参考，table_name 通常类似于`WORLD_RI_1234_20120301_1`.

任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:46:00.820

我建议只运行这部分

```
select table_name
, substr(table_name,instr(table_name,'_',-1,2)+1,8) as t_date
from user_tables
where table_name like 'WORLD_RI%' 
and table_name not like 'WORLD_RI_ERROR%' 
```

然后手动检查数据中的奇怪值

编辑：

如果该部分有效 - 然后尝试这部分

```
select table_name
, to_date(substr(table_name,instr(table_name,'_',-1,2)+1,8),'yyyymmdd')   
from user_tables
where table_name like 'WORLD_RI%' 
and table_name not like 'WORLD_RI_ERROR%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:49:23.400

我想我明白了！！

这段代码就像一个魅力......在日期字符串上添加一个翻译就可以了！感谢您的所有帮助。

```
select * from (
select table_name , to_date(substr(table_name,instr(table_name,'_',-1,2)+1,8),'yyyymmdd') as T_DATE , trunc(sysdate) s_date
  from user_tables
 where table_name like 'WORLD_RI%' and table_name not like 'WORLD_RI_ERROR%'
   and translate(substr(table_name,instr(table_name,'_',-1,2)+1,8),'0123456789','$$$$$$$$$$') = '$$$$$$$$'
) where T_DATE < s_date ; 
```

# maven - maven构建在linux中失败

> ID：10190524
> 
> 赞同：2
> 
> 时间：2012-04-17T11:41:18.537
> 
> 标签：maven, maven-plugin, maven-war-plugin

对于有经验的开发人员来说，这可能是微不足道的。但是，我在尝试在 linux 环境（Red Hat）中构建我的项目时遇到了这个问题。它给了我以下错误。

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.1.1:war (default-war) on project ABC: Error assembling WAR: webxml attribute is required (or pre-existing WEB-INF/web.xml if executing in update mode) -> [Help 1] 
```

但是，它在 windows 环境下完美运行。

这是我的Pom

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.abc</groupId>
    <artifactId>ABC</artifactId>
    <name>ABC</name>
    <packaging>war</packaging>
    <version>1.0.0</version>
    <url>http://maven.apache.org</url>  
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.9</org.aspectj-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
        <java-simplified-encryption-version>1.9.0</java-simplified-encryption-version>
        <mysql-version>5.1.19</mysql-version>
    </properties>

    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>       

        <!-- Jackson JSON Mapper -->        
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.7.1</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>compile</scope>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- Mail -->
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.1</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>

        <!-- ~~~~ -->
        <!-- Java Simplified Encryption -->
        <!-- ~~~~ -->
         <dependency>
              <groupId>org.jasypt</groupId>
              <artifactId>jasypt</artifactId>
              <version>${java-simplified-encryption-version}</version>
              <scope>compile</scope>
        </dependency>

        <!-- ~~~~~ -->
        <!-- UTILS -->
        <!-- ~~~~~ -->

        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <!-- Replace with the version of the MySQL driver you want to use -->
            <version>${mysql-version}</version>
        </dependency>

        <!-- MemCache -->
         <dependency>
            <groupId>spy</groupId>
            <artifactId>spymemcached</artifactId>
            <version>2.7</version>
            <scope>compile</scope>
        </dependency>

    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>${java-version}</source>
                    <target>${java-version}</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <warName>ABC</warName>
                </configuration>
                <version>2.1.1</version>
            </plugin>

        </plugins>
    </build>

    <repositories>

        <!--  Memcache -->
        <repository>
            <id>spy</id>
            <name>Spy Repository</name>
            <layout>default</layout>
            <url>http://files.couchbase.com/maven2/</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>

        <repository>
            <id>Maven Cetral Repo</id>
            <name>Maven Cetral Repository</name>
            <url>http://repo1.maven.org/maven2/</url>
        </repository>

        <repository>
            <id>spring security</id>
            <name>spring security Repository</name>
            <url>http://http.git.springsource.org/spring-security/spring-security.git</url>
        </repository>

        <!-- Obtaining Spring Releases From The Enterprise Bundle Repository (EBR) -->
        <repository>
            <id>com.springsource.repository.bundles.release</id>
            <name>EBR Spring Release Repository</name>
            <url>http://repository.springsource.com/maven/bundles/release</url>
        </repository>

        <repository>
            <id>com.springsource.repository.bundles.external</id>
            <name>EBR External Release Repository</name>
            <url>http://repository.springsource.com/maven/bundles/external</url>
        </repository>

        <repository>
            <id>org.springframework.maven.milestone</id>
            <name>Spring Maven Milestone Repository</name>
            <url>http://maven.springframework.org/milestone</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>

    </repositories>
</project> 
```

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>ABC</display-name>    
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/rest-servlet.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>rest</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>rest</servlet-name>
        <url-pattern>/api/*</url-pattern>
    </servlet-mapping>

    <!-- Un-comment following section when deploy with tomcat -->

    <!-- <resource-ref>
      <res-ref-name>jdbc/abctDB</res-ref-name>
      <res-type>javax.sql.DataSource</res-type>
      <res-auth>Container</res-auth>
    </resource-ref> -->

</web-app> 
```

这是我的rest-servlet

```
 <?xml version="1.0" encoding="UTF-8"?> 
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"      
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans         
                           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd         
                           http://www.springframework.org/schema/context         
                           http://www.springframework.org/schema/context/spring-context-3.1.xsd                          
                           http://www.springframework.org/schema/mvc
                           http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">  

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

    <bean id="jsonViewResolver" class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
    <bean id="viewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver" />

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <ref bean="jsonConverter" />
            </list>
        </property>
    </bean>

    <bean id="jsonConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
            <property name="supportedMediaTypes" value="application/json" />
    </bean> 

    <bean name="ABCController" class="com.abc.mvp.controller.ABCController" />

    <mvc:annotation-driven />
</beans> 
```

感谢有人能告诉我为什么我不能在 linux 环境中构建我的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T05:29:00.247

好的，我找到了原因。只是我错过了在 war 插件中包含 web.xml 配置

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>               
            <version>2.1.1</version>
            <configuration>
                 <webXml>src\main\webApp\WEB-INF\web.xml</webXml>
            </configuration>
        </plugin> 
```

奇怪的...

# c++ - 如何为 cuda 编程设置 Visual Studio 2005

> ID：10190526
> 
> 赞同：1
> 
> 时间：2012-04-17T11:41:24.387
> 
> 标签：c++, cuda, nvidia, gpu

我试图设置我的 Visual Studio 环境以使用 cuda 进行编程，但由于 cudaMemcpy 无法解决，我仍然收到错误。

如果你们中的任何人请帮助我设置环境。我正在用 C++ 编码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:53:30.077

查看[此答案](https://stackoverflow.com/a/2047892/214473)以获取有关 Visual Studio 2005 和 2008 的说明（对于 VS2010，请参阅[此答案](https://stackoverflow.com/a/7285235/214473)）。

特别是，请参阅有关将 CUDA 运行时库添加到链接依赖项的内容。

# facebook - Facebook 页面的帖子提要

> ID：10190529
> 
> 赞同：8
> 
> 时间：2012-04-17T11:41:41.403
> 
> 标签：facebook, rss, feed, posts, facebook-feed

有谁知道现在如何获取 facebook 页面的 rss-feed？当我作为页面登录并转到[http://www.facebook.com/feeds/notifications.php?id=xx&viewer=xx&key=xx&format=rss20](http://www.facebook.com/feeds/notifications.php?id=xx&viewer=xx&key=xx&format=rss20)时，我得到一个空的提要。是否有包含页面帖子的相应“页面”提要？

谢谢，/M

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T11:51:40.520

下面 URL 中的 ID 是您创建 RSS 提要时需要找到的 ID。

[http://www.new.facebook.com/feeds/notifications.php?id=](http://www.new.facebook.com/feeds/notifications.php?id=) **YOUR_FACEBOOK_ID** &viewer= **YOUR_FACEBOOK_ID** &key= **YOUR_INTERNAL_KEY** &format=rss20

此 URL 中有 3 个数字。“id”后面的数字是您的 Facebook ID 号。这个数字出现两次。最后一个数字是您的 Facebook 内部密钥。复制这些数字并将它们放在一边。

步骤#03：转到您的 Facebook 好友页面： [http ://www.facebook.com/friends/?ref=tn](http://www.facebook.com/friends/?ref=tn)

步骤#04：点击页面上的“好友状态”链接。

您现在应该会看到您朋友活动的 RSS 提要。URL 将如下所示：

[http://www.new.facebook.com/feeds/friends_status.php?id=](http://www.new.facebook.com/feeds/friends_status.php?id=) **your_facebook_id** &key= **your_friends_key** &format=rss20

第二个数字是您的 Facebook 好友密钥。复制此号码并将其放在一边。

步骤＃05：创建RSS URL

获得 3 个 Facebook 号码（facebook_id、your_internal_key 和 your_friend_key）后，您就可以制作自定义 RSS 源了。您所要做的就是将它们复制并粘贴到下面的链接结构中。

* * *

*   状态提要

[http://www.new.facebook.com/feeds/status.php?id=](http://www.new.facebook.com/feeds/status.php?id=) **your_facebook_id** &viewer= **your_facebook_id** &key= **your_internal_key** &format=rss20

*   通知提要

[http://www.new.facebook.com/feeds/notifications.php?id=](http://www.new.facebook.com/feeds/notifications.php?id=) **your_facebook_id** &viewer= **your_facebook_id** &key= **your_internal_key** &format=rss20

*   朋友状态提要

[http://www.new.facebook.com/feeds/friends_status.php?id=](http://www.new.facebook.com/feeds/friends_status.php?id=) **your_facebook_id** &key= **your_friends_key** &format=rss20

*   朋友链接提要

[http://www.new.facebook.com/feeds/share_friends_posts.php?id=](http://www.new.facebook.com/feeds/share_friends_posts.php?id=) **your_facebook_id** &key= **your_friend_key** &format=rss20

*   好友列表提要

[http://www.new.facebook.com/feeds/friends_status.php?id=](http://www.new.facebook.com/feeds/friends_status.php?id=) **your_facebook_id** &key= **your_friend_key** &format=rss20

*   RSS 2.0

[http://www.facebook.com/feeds/page.php?format=rss20&id=](http://www.facebook.com/feeds/page.php?format=rss20&id=)**页面 ID**

*   替代选项

[脸书RSS](http://fbrss.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-27T11:55:14.287

请注意，Facebook 在 2015 年 6 月 23 日弃用了他们的页面 RSS 提要。fbrss.com 似乎仍然有效。

有关更多信息，请参阅：[https ://developers.facebook.com/docs/apps/changelog#v2_3_90_day_deprecations](https://developers.facebook.com/docs/apps/changelog#v2_3_90_day_deprecations)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-29T11:31:01.760

第 1 步：找到您的 Facebook ID 页面： http: [//findmyfacebookid.com/](http://findmyfacebookid.com/)

第 2 步：在以下 url 字符串的末尾添加 ID

[http://www.facebook.com/feeds/page.php?format=rss20&id=](http://www.facebook.com/feeds/page.php?format=rss20&id=) “仅在此处添加 ID 号”

例如 facebook.com/feeds/page.php?format=rss20&id=100001463662167

# properties - 在 soapUI groovy 脚本中使用 testname 作为属性

> ID：10190533
> 
> 赞同：0
> 
> 时间：2012-04-17T11:41:56.587
> 
> 标签：properties, groovy, soapui

我想将测试名称附加到结果日志中。

我在“TestCase 属性”中看到“名称”

但是，当我右键单击 groovy 脚本并尝试获取数据时，我找不到测试名称..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:41:47.140

我不确定你在哪里尝试这样做，但如果你要添加一个新的“Groovy 脚本测试步骤”来测试用例，添加名称的日志就像：

```
log.info(context.testCase.name) 
```

# javascript - 从值文件上传器中删除拖放

> ID：10190535
> 
> 赞同：2
> 
> 时间：2012-04-17T11:42:03.613
> 
> 标签：javascript, jquery, drag-and-drop

嘿，伙计们，在我最近的项目中，我使用 valums 文件上传器进行基于 ajax 的文件上传，因为我发现它最符合我的要求，但现在我被困在一个点上，那就是我想删除我拥有的拖放功能在互联网上搜索了几个小时，但没有发现任何有用的信息。有没有办法从插件中删除这部分？这是我的代码

```
uploader = new qq.FileUploader({
        element:        $('#file-uploader')[0],
        action:         base_url + 'assets/scripts/server-side/server-side-uploader.php',
        debug:          true,
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T08:52:13.417

您可以在没有拖放部分的情况下定义自己的模板，例如我有：

```
template: '<div class="qq-uploader">' +
                '<div class="qq-upload-drop-area"><span>Drop files here to upload</span></div>' +
                '<div class="qq-upload-button">Upload Proof</div>' +
                '<ul class="qq-upload-list"></ul>' +
             '</div>', 
```

从模板中删除以下行以禁用拖放功能

```
'<div class="qq-upload-drop-area"><span>Drop files here to upload</span></div>' + 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T09:35:09.133

我不同意这个问题的公认答案。在删除线的情况下

```
'<div class="qq-upload-drop-area"><span>Drop files here to upload</span></div>' + 
```

qq 上传器给出`throw new error('element not found ' + type)`，所以这肯定不是解决方案 - 没有人想在页面上看到 javascript 错误（至少我是这样）。

我认为，摆脱该放置区域的最简单方法是使用 css 隐藏 div：只需执行

```
.qq-upload-drop-area {
    display: none;
} 
```

这对我来说很好。没有错误，没有 div 块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-10T05:05:45.193

```
var uploader = new qq.FileUploader({
....
});

qq.attach(document, 'dragenter', function(e) {
    $('.qq-upload-drop-area').hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T23:56:01.643

请改用 FileUploaderBasic。qq.FileUploader 实际上扩展了 FileUploaderBasic，并添加了列表支持和拖放内容。FileUploaderBasic 仅实现按钮和验证。

```
var uploader = new qq.FileUploaderBasic({
    // pass the dom node (ex. $(selector)[0] for jQuery users)
    element: document.getElementById('file-uploader'),
    // path to server-side upload script
    action: '/server/upload'
}); 
```

如果您想使用 FileUploaderBasic 没有的其他一些功能（如列表），只需在 fileupoader.js 之后引用的单独 JavaScript 文件中扩展 qq.FileUploaderBasic，如下所示：

```
var qq = qq || {};

qq.extend(qq.FileUploaderBasic.prototype, {
 //override uploader stuff by just creating a function with the same name,
 //like this function that creates the upload button
 _createUploadButton: function(element){
    var self = this;
    //make whatever modifications you want here
    return new qq.UploadButton({
        element: element,
        multiple: this._options.multiple && qq.UploadHandlerXhr.isSupported(),
        onChange: function(input){
            self._onInputChange(input);
        }        
    });           
}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-07T21:50:37.850

这对我有用

```
jQuery('.qq-upload-drop-area').remove(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-16T04:20:15.943

只需使文本颜色透明

```
.ajax__fileupload_dropzone {color:transparent;} 
```

# c# - C# ASP.net 变量超出 if 语句的范围

> ID：10190536
> 
> 赞同：0
> 
> 时间：2012-04-17T11:42:09.400
> 
> 标签：c#, asp.net

我正在从数据库打印计划并使用循环。我已经在 asp 中完成了此操作，但我正在更改为 c# asp.net 并且遇到了麻烦。

首先我打印时间表标题

时间|法庭|法庭|法庭

根据球场的数量，它会打印游戏。接下来 ff 当前记录日期与最后一个日期不同，它将在整个表格行上打印日期。然后检查当前记录的时间是否与上一次相同，如果不是，则打印时间，然后是游戏记录，如果是，则仅打印游戏记录。

我的问题是我在 if 语句中声明了 TableRow，所以当我尝试在另一个语句中使用它时，它超出了范围。如果我将 tablerow 放在 if 语句之外，它就不能正确打印。

这就是我所拥有的。

```
for (int i = 0; i < GameCount; i++) 
    { 
        DateTime currentdatetime = (DateTime)Schedules.Tables["Schedule"].Rows[i]["datetime"]; 
        string ndate = currentdatetime.ToString("MM/dd/yyy"); 
        string ntime = currentdatetime.ToString("HH:mm"); 
        string nextdate = currentdatetime.ToString("MM/dd/yyy"); 
        if (i + 1 != GameCount) 
        { 
            DateTime nextdatetime = (DateTime)Schedules.Tables["Schedule"].Rows[i + 1]["datetime"]; 
            nextdate = nextdatetime.ToString("MM/dd/yyy"); 
        } 
        string TeamA = Schedules.Tables["Schedule"].Rows[i]["teamA"].ToString(); 
        string TeamB = Schedules.Tables["Schedule"].Rows[i]["teamB"].ToString(); 
        //check to see if date is current 
        if (LastDate != ndate) 
        { 
            TableRow daterow = new TableRow(); 
            TableCell datecell = new TableCell(); 
            datecell.ColumnSpan = 7; 
            datecell.Controls.Add(new LiteralControl(ndate)); 
            daterow.Cells.Add(datecell); 
            ScheduleTable.Rows.Add(daterow); 
            LastDate = ndate; 
        } 
        //print the games 

        if (currentdatetime != LastDateTime)
        {
            TableRow gamerow = new TableRow();
TableCell timecell = new TableCell();
            timecell.Controls.Add(new LiteralControl(ntime));
            gamerow.Cells.Add(timecell);

            if (i + 1 != GameCount & ndate != nextdate)
            {
                ScheduleTable.Rows.Add(gamerow);
            }
        }//check to see if next game is part of the current row  
        else
        {
            TableCell gamecell = new TableCell();
            gamecell.Controls.Add(new LiteralControl(TeamA + ".vs." + TeamB));
            gamerow.Cells.Add(gamecell);
        } 

    } 
```

如果有帮助的话，我也可以在 asp 中发布我目前拥有的内容……你可以去 www.swgc.ca/volleyball/2011/schedules.asp 看看我想要完成什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:48:51.060

将最后一点更改为：

```
 TableRow gamerow = new TableRow();

        if (currentdatetime != LastDateTime)
        {

            TableCell timecell = new TableCell();
            timecell.Controls.Add(new LiteralControl(ntime));
            gamerow.Cells.Add(timecell);

        }//check to see if next game is part of the current row  
        else
        {
            TableCell gamecell = new TableCell();
            gamecell.Controls.Add(new LiteralControl(TeamA + ".vs." + TeamB));
            gamerow.Cells.Add(gamecell);
        } 

        if (i + 1 != GameCount & ndate != nextdate)
         {
                ScheduleTable.Rows.Add(gamerow);
         } 
```

我强烈建议查看网格视图和中继器/列表控件，因为这就是它们的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:00:02.077

最简单的解决方案是将您的实例化拉到 for 循环之外。试试这个（未经测试的代码）：

```
 TableRow gamerow = new TableRow();
    TableCell timecell = new TableCell();
    TableCell gamecell = new TableCell();
    TableRow daterow = new TableRow();
    TableCell datecell = new TableCell();
    for (int i = 0; i < GameCount; i++)
    {
        DateTime currentdatetime = (DateTime)Schedules.Tables["Schedule"].Rows[i]["datetime"];
        string ndate = currentdatetime.ToString("MM/dd/yyy");
        string ntime = currentdatetime.ToString("HH:mm");
        string nextdate = currentdatetime.ToString("MM/dd/yyy");
        if (i + 1 != GameCount)
        {
            DateTime nextdatetime = (DateTime)Schedules.Tables["Schedule"].Rows[i + 1]["datetime"];
            nextdate = nextdatetime.ToString("MM/dd/yyy");
        }
        string TeamA = Schedules.Tables["Schedule"].Rows[i]["teamA"].ToString();
        string TeamB = Schedules.Tables["Schedule"].Rows[i]["teamB"].ToString();
        //check to see if date is current 
        if (LastDate != ndate)
        {
             daterow = new TableRow();
             datecell = new TableCell();
            datecell.ColumnSpan = 7;
            datecell.Controls.Add(new LiteralControl(ndate));
            daterow.Cells.Add(datecell);
            ScheduleTable.Rows.Add(daterow);
            LastDate = ndate;
        }
        //print the games 

        if (currentdatetime != LastDateTime)
        {
             gamerow = new TableRow();
             timecell = new TableCell();
            timecell.Controls.Add(new LiteralControl(ntime));
            gamerow.Cells.Add(timecell);

            if (i + 1 != GameCount & ndate != nextdate)
            {
                ScheduleTable.Rows.Add(gamerow);
            }
        }//check to see if next game is part of the current row  
        else
        {
             gamecell = new TableCell();
            gamecell.Controls.Add(new LiteralControl(TeamA + ".vs." + TeamB));
            gamerow.Cells.Add(gamecell);
        } 
```

这是您问题的非优化答案。我觉得可能有更好的面向对象方法来实现您的目标，但不想回答您没有提出的问题。

# c++ - VC++ 错误 - 语法错误：枚举上的“常量”

> ID：10190537
> 
> 赞同：-2
> 
> 时间：2012-04-17T11:42:11.267
> 
> 标签：c++, enums, syntax-error

我正在使用立体视觉的源代码，它给出了一个错误

```
1>  StereoMain.cpp
1>c:\opencv2.2\include\opencv2\highgui\highgui_c.h(171): error C2059: syntax error : 'constant'
1>c:\opencv2.2\include\opencv2\highgui\highgui_c.h(171): error C3805: 'constant': unexpected token, expected either '}' or a ','
1>  StereoGrabber.cpp
1>c:\opencv2.2\include\opencv2\flann\logger.h(66): warning C4996: 'fopen': This function or variable may be unsafe. Consider using fopen_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1>          e:\program files\microsoft visual studio 10.0\vc\include\stdio.h(234) : see declaration of 'fopen'
1>c:\opencv2.2\include\opencv2\highgui\highgui_c.h(171): error C2059: syntax error : 'constant'
1>c:\opencv2.2\include\opencv2\highgui\highgui_c.h(171): error C3805: 'constant': unexpected token, expected either '}' or a ','
1>  StereoFunctions.cpp
1>c:\opencv2.2\include\opencv2\flann\logger.h(66): warning C4996: 'fopen': This function or variable may be unsafe. Consider using fopen_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1>          e:\program files\microsoft visual studio 10.0\vc\include\stdio.h(234) : see declaration of 'fopen'
1>c:\opencv2.2\include\opencv2\highgui\highgui_c.h(171): error C2059: syntax error : 'constant'
1>c:\opencv2.2\include\opencv2\highgui\highgui_c.h(171): error C3805: 'constant': unexpected token, expected either '}' or a ','
1>c:\documents and settings\giga\desktop\vision\source 
```

源代码

```
CVAPI(int) cvCreateTrackbar2( const char* trackbar_name, const char* window_name,
                              int* value, int count, CvTrackbarCallback2 on_change,
                              void* userdata CV_DEFAULT(0));

/* retrieve or set trackbar position */
CVAPI(int) cvGetTrackbarPos( const char* trackbar_name, const char* window_name );
CVAPI(void) cvSetTrackbarPos( const char* trackbar_name, const char* window_name, int pos );

enum
{
    CV_EVENT_MOUSEMOVE      =0,
    CV_EVENT_LBUTTONDOWN    =1,
    CV_EVENT_RBUTTONDOWN    =2,
    CV_EVENT_MBUTTONDOWN    =3,
    CV_EVENT_LBUTTONUP      =4,
    CV_EVENT_RBUTTONUP      =5,
    CV_EVENT_MBUTTONUP      =6,
    CV_EVENT_LBUTTONDBLCLK  =7,
    CV_EVENT_RBUTTONDBLCLK  =8,
    CV_EVENT_MBUTTONDBLCLK  =9
};

enum
{
    CV_EVENT_FLAG_LBUTTON   =1,
    CV_EVENT_FLAG_RBUTTON   =2,
    CV_EVENT_FLAG_MBUTTON   =4,
    CV_EVENT_FLAG_CTRLKEY   =8,
    CV_EVENT_FLAG_SHIFTKEY  =16,
    CV_EVENT_FLAG_ALTKEY    =32
};

typedef void (CV_CDECL *CvMouseCallback )(int event, int x, int y, int flags, void* param);

/* assign callback for mouse events */
CVAPI(void) cvSetMouseCallback( const char* window_name, CvMouseCallback on_mouse,
                                void* param CV_DEFAULT(NULL)); 
```

谢谢 [http://pastebin.com/dpbCxLgK](http://pastebin.com/dpbCxLgK)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T12:27:16.073

我猜你的一个枚举之前已经在某个地方定义过。例如，以下代码片段在 VC++ 2010 中复制了该错误消息：

```
 #define CV_GUI_NORMAL 0x00000010

 enum
 {
    CV_GUI_EXPANDED   = 0x00000000,
    CV_GUI_NORMAL     = 0x00000010
 }; 
```

解决方案显然是只定义 CV_GUI_NORMAL 一次。

# iphone - 使用 colorWithPatternImage 时为 UIView 设置动画背景颜色

> ID：10190540
> 
> 赞同：4
> 
> 时间：2012-04-17T11:42:25.767
> 
> 标签：iphone, objective-c, ios, core-animation

`backgroundColor`当我为 a 的属性设置动画时，我正在使用以下代码片段`UIView`：

```
 [UIView beginAnimations:@"fade" context:nil];
     [UIView setAnimationDuration:1];
    [[self view] setBackgroundColor: [UIColor greenColor];
    [UIView commitAnimations]; 
```

这适用于基本颜色（红色，绿色，灰色等......），但是，当我尝试使用这样的颜色时：`[UIColor colorWithPatternImage:[UIImage imageNamed:@"img1.png"]];`动画将不起作用，视图将设置其新背景但没有所需的淡入淡出动画.

我怎样才能让我`UIView's backgroundColor`接受`colorWithPatternImage`？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:57:07.163

**我已经更改了我的代码..使用它，它可以 100% 工作...我测试了它..**

```
 //Function which will give you RGB color from your image..(copy and add this function in your code before calling it)
- (UIColor*)getRGBAsFromImage: (UIImage*)image atX: (int)xx andY: (int)yy count: (int)count
{
NSMutableArray *result = [NSMutableArray arrayWithCapacity:count];

// First get the image into your data buffer
CGImageRef imageRef = [image CGImage];
NSUInteger width = CGImageGetWidth(imageRef);
NSUInteger height = CGImageGetHeight(imageRef);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
unsigned char *rawData = malloc(height * width * 4);
NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = bytesPerPixel * width;
NSUInteger bitsPerComponent = 8;
CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                             bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);

CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
CGContextRelease(context);

// Now your rawData contains the image data in the RGBA8888 pixel format.
int byteIndex = (bytesPerRow * yy) + xx * bytesPerPixel;
UIColor *acolor;
for (int ii = 0 ; ii < count ; ++ii)
{
    CGFloat red = (rawData[byteIndex] * 1.0) / 255.0;
    CGFloat green = (rawData[byteIndex + 1] * 1.0) / 255.0;
    CGFloat blue = (rawData[byteIndex + 2] * 1.0) / 255.0;
    CGFloat alpha = (rawData[byteIndex + 3] * 1.0) / 255.0;
    byteIndex += 4;

    acolor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];
    [result addObject:acolor];
}

free(rawData);
return acolor;
}

// Here, the code for animation that you want..use it and enjoy..
UIImage *image = [UIImage imageNamed:@"Black.png"];
    UIColor *color=  [self getRGBAsFromImage:image atX:100 andY:100 count:1];
    [UIView beginAnimations:@"fade" context:nil];
    [UIView setAnimationDuration:1];
    [[self view] setBackgroundColor: color];
    [UIView commitAnimations]; 
```

效果很好……希望对你有帮助……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:00:07.200

我猜动画所需的步骤中使用的所有颜色都是在起始 RGB 颜色和结束 RGB 颜色之间具有分量 RGB 值的颜色...

但是，如果您使用图像，那当然是不可能的...

所以尝试一种解决方法，就像第二个临时 uiview 一样，它以 alpha = 0 到 alpha = 1 淡入改变值......

# android - 根据条件选择微调器值

> ID：10190553
> 
> 赞同：0
> 
> 时间：2012-04-17T11:43:29.600
> 
> 标签：android, spinner

我有以下代码：

```
private void spinnerValue(){
    spinnerwho=(Spinner)findViewById(R.id.spinnerWho);
    ArrayAdapter<String> adapter=new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    adapter.add("A");
    adapter.add("B");
    spinnerwho.setAdapter(adapter);

    spinnerwho.setOnItemSelectedListener(spinnerlistener);
}
private OnItemSelectedListener spinnerlistener= new OnItemSelectedListener(){
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        if(arg0.getSelectedItem().toString().contentEquals("A")){
            if (imagechanged){
                displayalert();
            }
            else{
                // Do some operation
            }
        }

        if(arg0.getSelectedItem().toString().contentEquals("B")){
            // do some operation            
        }
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
    }
};

private void displayAlert(DialogInterface.OnClickListener listener) {
    AlertDialog dlgAlertBox;
    AlertDialog.Builder dlgAlert = new AlertDialog.Builder(this);
    dlgAlert.setMessage("data will be lost if you change value without saving. Continue?");
    dlgAlert.setPositiveButton("Yes", listener);
    dlgAlert.setNegativeButton("No", listener);
    dlgAlert.setCancelable(true);           
    dlgAlertBox = dlgAlert.create();
    dlgAlertBox.show();
}
protected DialogInterface.OnClickListener BackButtonListenerforengineer = new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) 
    {
        switch (which){
        case DialogInterface.BUTTON_POSITIVE:
            // do some operation
            break;
        case DialogInterface.BUTTON_NEGATIVE:
            dialog.dismiss();
// revert to previous selection
            /*Signature.this.spinnerwho.getAdapter();
            ArrayAdapter<String> adapter=new ArrayAdapter<String>(Signature.this, android.R.layout.simple_spinner_item);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            adapter.clear();
            adapter.add("Tenant");
            adapter.add("Engineer");
            spinnerwho.setAdapter(adapter);
            spinnerwho.setSelection(1,true);

            spinnerwho.setOnItemSelectedListener(null);*/

            break;
    } 
```

我选择微调器的值并检查条件。当我尝试更改微调器项目时，它会显示带有是和否按钮的警报对话框。单击“是”将更改微调器的值。如果用户单击“否”，则它应该将微调器恢复为先前的选择。我尝试清除微调器适配器并用新值填充它。但不工作。任何人都可以通过指出我哪里出错来帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:49:47.547

请遵循以下方法来使用微调器值。

```
private void addListenerOnSubjectSpinner() 
{
    spiSubject.setOnItemSelectedListener(new mySpinnerListener());      
}

class mySpinnerListener implements Spinner.OnItemSelectedListener
{
    @Override
    public void onItemSelected(AdapterView parent, View v, int position,
            long id) 
    {
        Toast.makeText(parent.getContext(), "Subject is " +
                  parent.getItemAtPosition(position).toString(), Toast.LENGTH_LONG).show();
        owq.setSubjectName(parent.getItemAtPosition(position).toString());
    }

    @Override
    public void onNothingSelected(AdapterView parent) 
    {
        // Do nothing.
    }

} 
```

在 onCreate() 中调用这两个方法。

```
addListenerOnSubjectSpinner(); 
```

# android - onActivityResult 不适用于相机 -Tab ActivityGrup

> ID：10190554
> 
> 赞同：1
> 
> 时间：2012-04-17T11:43:32.007
> 
> 标签：android

我想捕获图像并将其保存到 SD 卡。现在它工作正常。我的问题是 1）在捕获 `OK and Cancel`按钮可用后。当我单击确定时，只需将图像保存到 SD 卡中。

2）它没有`onActivityResult`方法。我`onActivityResult`在`ActivityGroup`课堂上写了我的。

此代码用于当用户单击相机按钮时，它将打开相机并保存

```
 //Camera
    Button btnCamera =(Button)findViewById(R.id.btnCamera);
    btnCamera.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
             selectedImagePath = Environment.getExternalStorageDirectory()+"/"+retailerCode+"-"+count+".jpg";
             imgName =retailerCode+"-"+count+".jpg";
             count++;
             File file = new File(selectedImagePath);
             Uri outputFileUri = Uri.fromFile(file);
             Intent intent = new Intent (android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
             Bundle b = new Bundle();
             b.putString("Activity", "RetailerOrderSActivity");
             b.putString("RetailerName", seletctedRetailer);
             b.putString("RetailerCode", retailerCode);
             intent.putExtras(b);
             intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
             startActivityForResult(intent, CAMERA_PIC_REQUEST);
             onPhotoTaken();

        }
    });

    protected void onPhotoTaken() {
         _taken = true;
         DBAdapter dbAdapter = DBAdapter.getDBAdapterInstance(CameraMainActivity.this);
         dbAdapter.openDataBase();
         boolean status = dbAdapter.saveImageInfo(retailerCode,strExecutive,strBusinessUnit,strTerritoryCode,imgName,visitNumber);
         if(status) {
          Toast.makeText(SalesActivityGroup.group.getApplicationContext(), "Image has been saved successfully" , Toast.LENGTH_SHORT).show();
         }else {
           Toast.makeText(SalesActivityGroup.group.getApplicationContext(), "Image has not been saved successfully" , Toast.LENGTH_SHORT).show();
         }
        dbAdapter.close();
        lstCaptures = getAllImage(imgDateVal.getText().toString());
        imageViewTable.removeAllViews();
        loadTableLayout();  
     } 
```

这是 ActivityGroup 的代码

```
 public class SalesActivityGroup extends ActivityGroup {
          @Override
          protected void onActivityResult(int requestCode, int resultCode, Intent data) {
       System.out.println("===REQUEST=====" +requestCode);
         System.out.println("==resultCode==" +resultCode); } } 
```

实际上我需要`onPhotoTaken` 从`onActivityResult`. 根据当前我的代码，如果用户也单击取消，它将信息保存到数据库。图片没拍到。。

这是我的应用图像：

![在此处输入图像描述](../Images/0247e7e2ecd5b640cfad8deb1ae9902b.png)

这是捕获图像后显示的按钮：

![在此处输入图像描述](../Images/0297ab540ca020446862b352b23429d8.png) 请任何人解决这个问题..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:04:00.753

检查以下答案

假设我有一个按钮**Select** & 当用户点击按钮时，相机屏幕将打开。

```
btn_select.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

          String fileName = new StringBuilder(String.valueOf(System.currentTimeMillis())).append(
                                                        ".jpg").toString();
                  ContentValues values = new ContentValues();
                  values.put(MediaStore.Images.Media.TITLE, fileName);
                  mCapturedImageURI = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                  values);
                  Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                  intent.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI);
                  startActivityForResult(intent, IShipdocsMobileConstants.CAMERA_ACTION);
                }
    }); 
```

用户拍照并单击“保存/确定”按钮（取决于移动设备）后，使用以下代码获取捕获图像的数据。

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);
        if (requestCode == IShipdocsMobileConstants.CAMERA_ACTION) {
            if (resultCode == RESULT_OK) {
                String[] projection = { MediaStore.Images.Media.DATA };
                Cursor cursor = managedQuery(mCapturedImageURI, projection, null, null, null);
                int column_index_data = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                cursor.moveToFirst();
                String capturedImageFilePath = cursor.getString(column_index_data);
                SelectedFileInfo selectedFileObj = null;
                ArrayList<SelectedFileInfo> cameraArrList = new ArrayList<SelectedFileInfo>();
                File fileObj = new File(capturedImageFilePath);
                String fileSize = String.valueOf(fileObj.length()); //File Size
                String fileName = Utils.getFileName(capturedImageFilePath); //File Name
                }else if (resultCode == RESULT_CANCELED) {
         // handle the condition in which the user didn't save the image
                }
            } else {
                // handle the condition in which the request code was not CAMERA_ACTION , maybe send the user to the home/default screen
            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:31:24.337

问题是打电话的地方我需要打电话 `getParent().startActivityForResult(intent, CAMERA_PIC_REQUEST);` 更多细节[见这里](https://stackoverflow.com/questions/6677466/stuck-with-getting-camera-pic-when-using-the-tab-activity/6679665#6679665)

# lotus-notes - DXLExporter 没有导出设计元素 sin Xpage？

> ID：10190555
> 
> 赞同：1
> 
> 时间：2012-04-17T11:43:32.443
> 
> 标签：lotus-notes, xpages, lotusscript

```
 **I am using the following code,**

    var db=session.getCurrentDatabase()
    var nc:NotesNoteCollection=db.createNoteCollection(true);
    nc.selectAllDesignElements(true);
    nc.buildCollection()
    var filename = "d:\\dxl\\xpDXL.dxl";
    var stream:NotesStream=session.createStream()
    if (stream.open(filename)) {
            stream.truncate(); // Any existing file is erased
            var exporter:NotesDxlExporter = session.createDxlExporter();
            stream.writeText(exporter.exportDxl(db))
    } 
```

** 它不导出设计元素。但在 DXL 中，它有文档集合。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:10:51.430

您正在创建一个名为 nc 的 NotesNoteCollection，但最终导出了 db。所以`stream.writeText(exporter.exportDxl(db))`改为：

```
stream.writeText(exporter.exportDxl(nc)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:31:58.163

也许这是一个安全问题：您至少需要设计人员访问您的数据库才能通过 XPage 在 DXL 导出中获取设计元素。

甚至公共访问元素也**不会**导出。

希望这有助于
斯文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:08:05.647

DXL 中的 XPages 设计元素使用起来令人头疼。您最好使用 OpenNTF 的导入/导出插件。它使用 Eclipse VFS 来处理本地格式的数据。所以图像就是图像，表单是 DXL，XPage 是它们的来源。该插件包含源代码，因此您可以看到它是如何完成的。另一种选择是将 NSF 链接到 onDisk 项目（版本控制所需的步骤），然后查看目录内部。如果您想在设计器之外处理 XPages 设计元素，则会出现一些问题：如果您将源代码注入到其他地方，那么您将缺少编译后的 Java。如果您正在查看文档或变体管理 Designer 和 VFS（虚拟文件系统，Java 接口 IResource）是我们最好的选择

# c# - 更改表单大小时如何自动调整控件的大小？

> ID：10190557
> 
> 赞同：0
> 
> 时间：2012-04-17T11:43:44.070
> 
> 标签：c#, winforms, gridview, uiview

我有两列：

C1 和 C2。

C1 有一个 250px 的固定值，C2 应该自动调整自己的大小。C2 包含网格视图。因此，如果大小更改为 1200px，gridview 应该自动占用 950px。

凭借 Grid 控件，在 WPF 中这很容易，但我如何在 Winforms 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:50:52.707

执行以下操作：

*   将 C1 放入表格中。
*   将其宽度设置为 250 像素。
*   将其`Dock`属性设置为`Left`（或`Right`，由您决定）。
*   将 C2 放入表格中。
*   将其`Dock`属性设置为`Fill`。
*   把你的`GridView`里面C1。
*   将其`Dock`属性设置为`Fill`。

完毕。

作为替代方案，您可以使用`TableLayoutPanel`控件（它的工作方式或多或少类似于 WPF 对应项）。看看[这篇关于 SO 的帖子以](https://stackoverflow.com/questions/9581424/windows-forms-app-autoscale-controls-with-form/9582015#9582015)获取更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:49:49.760

通常最好让控件使用 Anchor 或 Dock 属性调整自身大小。

如果出于某种原因您喜欢手动执行此操作，那么您将需要处理表单调整大小事件并在其中更改 gridview 的大小和位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:51:26.447

在设计器中将 C1.Width 设置为 250，将 C1.Dock 设置为 Left。然后将 C2.Dock 设置为 Fill。

# c# - 数组中数组的排列

> ID：10190566
> 
> 赞同：0
> 
> 时间：2012-04-17T11:44:25.397
> 
> 标签：c#, arrays, linq, multidimensional-array

我正在做一个项目，我需要找到一个数组的所有可能排列。

我有这个工作，在一定程度上

```
var geneticsArray = new[] { new[] { "M", "V" }, new[] { "M", "V" }};
var perms = from a in geneticsArray[0]
            from b in geneticsArray[1]

            select new { a, b }; 
```

这为我提供了所有选项：

*   毫米
*   虚拟机
*   MV
*   维维

这是正确的，但这不是我想要实现的，因为我的意图和目的 VM 和 MV 是相同的。

如何将 MV 转换为 VM？

这个例子非常简单，只包含 2 个分组，可能有无限的分组，这是我稍后会处理的事情，但只是想让你知道，所以回复不是简单地反转结果。

对此的任何帮助都会很棒。

**进一步编辑**

使用以下代码，我可以看到每个排列的计数：

```
var permCounts = from perm in perms group perm by perm into b select new { b.Key, Count = b.Count() }; 
```

这将告诉我上述每个选项都出现一次，这不太正确，因为在这种情况下，上面的 MV 和 MV 的概述是相同的。我需要代码来理解这一点。

这就是我要寻找的，而不是如何使它能够处理未知数量的组合。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:35:32.030

这个怎么样？

```
 var perms = from a in geneticsArray[0]
                    from b in geneticsArray[1]

                    select new string[] { a, b };

        var dict = new Dictionary<string, int>();
        foreach (var ent in perms)
        {
            Array.Sort(ent);
            var _ent = string.Join(",", ent);
            if (dict.ContainsKey(_ent))
            {
                dict[_ent]++;
            }
            else
            {
                dict.Add(_ent, 1);
            }
        }

        return dict; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:12:30.067

这将做我们的欺骗：

```
var geneticsArray = new[] { new[] { "M", "V" }, new[] { "M", "V" } };
var perms = from a in geneticsArray[0]
            from b in geneticsArray[1]
            where a.CompareTo(b) >= 0
            select new { a, b }; 
```

此外，使用递归处理不同大小的列表也更容易（看看 Eric Lippert 的这篇文章 - [http://ericlippert.com/2010/06/28/computing-a-cartesian-product-with-linq/](http://ericlippert.com/2010/06/28/computing-a-cartesian-product-with-linq/) )

# java - 网络不可达？

> ID：10190568
> 
> 赞同：0
> 
> 时间：2012-04-17T11:44:45.657
> 
> 标签：java, sockets, exception

我想运行一个 cyc (openencyc) Java 类，但是当我运行这个类时，我收到一个错误，提示网络无法访问。我正在开发 NetBeans 7.0 和 opencyc 2.0 win 32 版本。我正在使用 localhost (127.0.0.1) 进行测试。错误如下。

```
Network is unreachable: connect
java.net.SocketException: Network is unreachable: connect
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:519)
at java.net.Socket.connect(Socket.java:469)
at java.net.Socket.<init>(Socket.java:366)
at java.net.Socket.<init>(Socket.java:180)
at org.opencyc.api.CycConnection.initializeApiConnections(CycConnection.java:223)
at org.opencyc.api.CycConnection.<init>(CycConnection.java:199)
at org.opencyc.api.CycAccess.<init>(CycAccess.java:121)
at org.opencyc.api.CycAccess.<init>(CycAccess.java:61)
at org.opencyc.api.ApiDemo.<init>(ApiDemo.java:50)
at org.opencyc.api.ApiDemo.main(ApiDemo.java:147)
Exception in thread "main" java.lang.NullPointerException
at org.opencyc.api.ApiDemo.<init>(ApiDemo.java:56)
at org.opencyc.api.ApiDemo.main(ApiDemo.java:147)
Interruption while waiting Cyc connection establishment, closing sockets
Exception in thread "Thread-1" java.lang.NullPointerException
at org.opencyc.api.CycConnection$TaskProcessorBinaryResponseHandler.access$002(CycConnection.java:988)
at org.opencyc.api.CycConnection.close(CycConnection.java:268)
at org.opencyc.api.CycConnection$ConnectionTimer.run(CycConnection.java:1351) 
```

为什么会这样？如何连接到 cyc？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:14:11.337

问题是您的网络设置不允许您连接到这台机器。这不是 Java 问题本身。

尝试

```
ping {hostname} 
```

在此工作之前，您无法在 java 中做任何事情来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:59:46.297

如果您有与我相同的版本，它会尝试使用定义的主机名和端口建立与 Cyc 映像的连接

CycConnection.DEFAULT_HOSTNAME
CycConnection.DEFAULT_BASE_PORT

您可以通过评估 Cyc 图像中的以下内容来找到要使用的正确值：

```
（获取机器名称）
*BASE-TCP-PORT*

```

希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-16T20:02:24.310

我团队的一个开发人员今天遇到了这个问题，只有他们的机器在团队中的许多人中看到了这个问题。

通过大量调试，我们最终发现`localhost`由于某种原因无法解决。它可以在某些 JVM 上下文中工作而在其他上下文中失败，因此它完全不一致。

替换`localhost`为明确`127.0.0.1`修复了该问题。我的预感是本地网络和 IPv6 可能有所不同，但我们仍然不明白为什么这是修复。

# ios - 子视图控制器必须有一个共同的父视图控制器？

> ID：10190577
> 
> 赞同：4
> 
> 时间：2012-04-17T11:45:11.733
> 
> 标签：ios, ios5, view, uiviewcontroller, transition

在我的应用程序中，我试图切换视图，每个视图都是它们自己的 XIB，同时使用自定义动画来做到这一点。我制作了一个基本视图控制器作为父视图来保存所有代码，但我似乎无法让它工作。

我为我的应用程序和界面构建器中的所有视图控制器制作了一个 IBOutlet，我将插座连接到正确的控制器。每个控制器也加载正确的 XIB，所以这些都不是问题。问题是以下更改视图代码。

这是我的代码：

```
-(void)changeViews {
    CGRect frame = self.view.frame;
    frame.origin.x = CGRectGetMaxX(frame);
    theView4.view.frame = frame;

    [self.view addSubview:theView4.view];
    [self addChildViewController:theView4];

    [self transitionFromViewController:theView1 
                      toViewController:theView4 
                              duration:1 
                               options:UIViewAnimationOptionTransitionNone
                            animations: ^{
                                CGRect frame = self.view.frame;
                                theView4.view.frame = frame;
                                frame.origin.x -= frame.size.width;
                                self.view.frame = frame;
                            }
                            completion:completion:nil]; 
```

这是控制台崩溃：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Children view controllers <MyGameViewController: 0x1dd25210> and <Settings: 0x1dd249d0> must have a common parent view controller when calling -[UIViewController transitionFromViewController:toViewController:duration:options:animations:completion:]' 
```

有谁知道如何解决这一问题？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:01:15.243

你可以使用这个：

> 当您使用`addChildViewController:`将子视图控制器添加到周围的控制器时。您还必须通过`didMoveToViewController:`它已被放入另一个控制器来通知子控制器。您还可以使用 `transitionFromViewController:toViewController:`将一个视图控制器交换为另一个，可选地提供动画。

这是从[此处](https://stackoverflow.com/questions/8084050/when-to-use-addchildviewcontroller-vs-pushviewcontroller)获取的（我建议您完全阅读已接受的答案）。

长话短说，您还需要告知它确实移入了该父视图控制器。

# database - 图形数据库：独立于 java api

> ID：10190582
> 
> 赞同：0
> 
> 时间：2012-04-17T11:45:25.190
> 
> 标签：database, graph

我正在研究图形数据库系统，但它们中的大多数似乎是嵌入的或可通过 html 请求访问的。我正在寻找一个独立的服务器，可以通过 java api 访问，它支持酸（和集群），最好是开源的。

我喜欢 neo4j，但我不想嵌入我的数据库或使用（慢）html 请求访问它，它必须可由多个系统访问。如果我完全错了，neo4j 是一个超级选择，请提供一个合适的驱动程序的链接或名称，如果你知道的话。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:47:32.967

查看[InfiniteGraph](http://www.infinitegraph.com)。它不是开源的，但有一个免费版本，最多可容纳 100 万个节点和边。

# android - 如何播放无缝视频片段？

> ID：10190585
> 
> 赞同：1
> 
> 时间：2012-04-17T11:45:38.243
> 
> 标签：android, video, segment

如何播放 seg1.mp4、seg2.mp4、...等无间隙视频片段？这可以在4.0.3完美实现，而在4.0.3下显示短黑屏。我已经搜索了整个互联网，没有人给出解决方案，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:19:35.243

好像是不治之症？ [Android：MediaPlayer 无缝或无缝视频播放](https://stackoverflow.com/questions/3877119/android-mediaplayer-gapless-or-seamless-video-playing)

# sql - 检查列是否包含模式？

> ID：10190596
> 
> 赞同：-1
> 
> 时间：2012-04-17T11:46:13.597
> 
> 标签：sql, sql-server, sql-server-2008, tsql

![在此处输入图像描述](../Images/af5048c572c8f2e8e49a37ca26d95f02.png)

我正在编写一个查询以在以下查询中从 user_name_n 列中获取 fname 我正在使用 pathindex 来查找空间，因为`'% %'`将 pathindex 返回值传递给左侧并且它工作正常，但我还记录了`,`如何编写一个查询也照顾`,`。

有些记录像`Bellian`没有，`space or ,`但我仍然希望它们在 fname 中，但它不适用于以下查询。

```
SELECT top 100 user_name_n,left(user_name_n,(patindex('% %',user_name_n)))
from SFCHA10_04_02_2012; 
```

谁能告诉我如何才能达到预期的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:13:25.473

```
Select user_name_n,
       left(user_name_n,patindex('%[, ]%',user_name_n + ' ')-1)
From   SFCHA10_04_02_2012; 
```

请注意，您可以使用 '%[, ]%' 来搜索空格或逗号。另请注意，我在第二个参数中添加了 + ' '。即使数据不包含空格，这也会导致匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:58:08.707

```
SELECT TOP (100) user_name_n,
    SUBSTRING(
        user_name_n,
        COALESCE(CHARINDEX(',',user_name_n)+1,1), 
        COALESCE(NULLIF(CHARINDEX(' ',user_name_n),0),255))
from SFCHA10_04_02_2012; 
```

如果您在表单中有逗号时想要姓氏而不是名字`lname,fname`（不知道为什么这个奇怪的要求），那么：

```
SELECT TOP (100) user_name_n,
    SUBSTRING(user_name_n, 1, 
  COALESCE(NULLIF(CHARINDEX(',',user_name_n)-1,-1),
        NULLIF(CHARINDEX(' ',user_name_n),0),255))
from SFCHA10_04_02_2012; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:22:04.017

因此，首先您将逗号和点替换为 CTE 上的空白，然后将名称从开头剪切到第一次出现的空格（或在没有空格的情况下为整个长度）：

```
with aux_query as(
select 
replace(REPLACE(user_name_n,',',' '),'.',' ')  as name
from SFCHA10_04_02_2012
)
select SUBSTRING (name,1, case CHARINDEX(' ',name) when null then LEN(name) else LEN(name) end)
from aux_query 
```

# android - 单击列表视图项时自定义列表视图未突出显示

> ID：10190598
> 
> 赞同：1
> 
> 时间：2012-04-17T11:46:24.203
> 
> 标签：android, android-listview

我需要使用自定义标题栏，所以我更改了清单并创建了我的自定义主题。到这里为止，一切都很好，但是同样的活动有一个列表视图，所以我使用了自定义列表视图并进行了相应的更改。一切都很好，**但是单击列表视图中的任何项目时，项目都没有突出显示**。我浏览了各种链接，但没有找到解决方案。我已经浏览了[这个](https://stackoverflow.com/questions/4621675/custom-listview-not-highlighting-listviewitem-on-click)有类似问题的链接，但解决方案在我的情况下不起作用。如果有任何机构可以提供帮助。

**我的尝试：**我的 list_bg.xml 是

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item 
    android:drawable="@color/grey" />
<item android:state_pressed="true" 
    android:drawable="@color/blue" />
<item android:state_selected="true"
    android:state_pressed="false" 
    android:drawable="@color/blue" />
</selector> 
```

我已经在颜色文件夹中添加了上面的代码，并`android:background="@color/list_bg"`在列表视图项 xml 中给出了参考。

任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:41:56.440

安卓：listSelector="#000000"

在列表视图中使用此属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:05:20.607

放

```
<item 
android:drawable="@color/grey" /> 
```

在您的 XML 的末尾。从上到下遍历状态列表，并使用与当前状态匹配的第一项

# groovy - 如何在不超过堆大小的情况下解析 Groovy 中的大文件？

> ID：10190606
> 
> 赞同：11
> 
> 时间：2012-04-17T11:47:08.580
> 
> 标签：groovy

解析大文件时出现以下错误`Caught: java.lang.OutOfMemoryError: Java heap space`

如何在不超过堆大小的情况下解析 Groovy 中的大文件？

因大文件而失败的示例代码...

```
import java.io.File

def inputFile = new File("c:/dev/test.txt")
    inputFile.getText().eachLine{ it, i ->
            ... do something with each line
        } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-17T11:47:32.900

确保您以不会将整个文件加载到内存中的方式迭代文件...

*   在这种情况下，专门将**inputFile.getText().eachLine**变成**inputFile.eachLine**
*   不要使用**.readLines()**，因为它会尝试将整个文件加载到内存中，. 应该使用**eachLine{..}**
*   您还可以使用 jvm 标志扩展堆大小，例如使用 1GB`groovy -Xmx1024M myscript.groovy`另请参阅[此处回答](https://stackoverflow.com/questions/5459317/how-do-i-increase-groovys-jvm-heap-size)

有关更多信息和进一步讨论，请参阅 groovy 邮件列表上的此[页面](http://groovy.329449.n5.nabble.com/Reading-the-contents-of-a-File-without-impacting-heap-space-Reading-the-file-into-memory-td4582259.html)

没有堆空间错误的代码......

```
def inputFile = new File("c:/dev/test.txt")
inputFile.eachLine{ it, i ->
        ... do something with each line
    } 
```

# javascript - (jQuery) Nivo Slider 加载幻灯片时出错 - 它只加载第一张图片并保持原样

> ID：10190607
> 
> 赞同：0
> 
> 时间：2012-04-17T11:47:13.343
> 
> 标签：javascript, jquery, wordpress, nivo-slider

我正在本地开发一个 WordPress 主题（用于网站重新设计）。我使用并设置了 Nivo Slider 的 jQuery 版本，一切运行良好。但是，一旦我将站点移至服务器，它就停止了工作。第一张幻灯片加载并保持不变。而且子弹根本不装弹。我只是不明白我做错了什么。有人可以帮忙吗？

如果有人想查看代码，则该网站是实时的。网址是[www.media-soft.info](http://www.media-soft.info)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:46:04.330

将[Firebug](http://getfirebug.com/)与 Firefox 一起使用，或者在 Chrome、Safari 或 IE8 中使用，使用开发人员工具查看您的网站上加载的 JS 以及您现在遇到的三个错误`tvjava.js`和`jquery.nivo.slider.pack.js`

`TypeError: 'undefined' is not a function`错误通常是 jquery 无冲突模式错误。

请参阅[将 jQuery 与其他库一起使用 - jQuery JavaScript 库](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)和[函数参考/wp enqueue 脚本 « WordPress Codex](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)，了解如何在 WP 主题中正确包含 javascript 库而不会发生冲突和重复。

# facebook - 对非粉丝隐藏 Facebook 粉丝页面视频标签

> ID：10190611
> 
> 赞同：0
> 
> 时间：2012-04-17T11:47:21.043
> 
> 标签：facebook, facebook-graph-api, facebook-page

我想将视频添加到我的 Facebook 粉丝页面，但我只想让粉丝观看它们。我在网上搜索了很多关于如何向非粉丝隐藏内容的信息，但没有找到关于隐藏视频标签的信息。此外，我看到的所有东西都使用了 FBML，它现在已经过时，将于 6 月 1 日消失。

有人可以帮忙吗？我真的很感激谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:21:20.863

我会看看这篇[文章](http://www.daddydesign.com/wordpress/how-to-use-a-fan-gate-on-your-iframe-tab-to-hide-content-until-someone-likes-your-facebook-fan-page/)。它告诉您如何使用 CSS 向不是您页面粉丝的用户隐藏某些内容。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:34:03.030

没有办法真正向非粉丝隐藏应用程序。您最好的选择是获得一个自定义标签，然后将视频嵌入该标签中作为仅限粉丝的内容。然后将视频的应用程序移出时间轴的视图。当您将鼠标悬停在应用程序上时，您会看到一个小铅笔出现，它会说与另一个应用程序交换。如果您的页面上有足够的应用程序，您可以将视频应用程序移动到应用程序溢出区域。如果你喜欢我，我会换掉我所有的 Facebook 应用程序，所以我只显示我的自定义应用程序，这些应用程序让我可以控制向非粉丝显示和隐藏内容。查看[http://Tabbed.co](http://Tabbed.co)他们全职做这件事。[请参阅http://fb.com/tabbedco](http://fb.com/tabbedco)上的示例

# google-chrome-extension - Chrome 扩展程序后台页面

> ID：10190613
> 
> 赞同：0
> 
> 时间：2012-04-17T11:47:25.577
> 
> 标签：google-chrome-extension, browser-action

我正在创建我的第一个 chrome 应用程序（浏览器操作）。我相信后台页面应该一直在后台执行。例如，如果我写类似

```
window.setTimeout(getFeed, 30000); 
```

此方法应每 30 秒自动调用一次并刷新提要数据。但似乎只有当我通过单击浏览器中的扩展程序图标打开扩展程序的弹出页面时才会执行该方法。这是理想的行为还是我在这里遗漏了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:28:15.433

首先，您需要`setInterval`周期性事件，而不是`setTimeout`仅触发一次的事件。

也就是说，`getFeed`后台页面中的函数可能无法访问您希望它更新的元素。背景页面不能访问其他上下文中的元素或变量，例如选项卡、弹出窗口或内容脚本。可能需要在您的背景页面和您希望更新的提要的页面之间使用[消息传递。](https://code.google.com/chrome/extensions/messaging.html)

在包含提要的扩展页面上，使用该功能设置消息侦听器`chrome.extension.onRequest.addListener`，并在您的后台页面中，使用`chrome.extension.sendRequest`. 您只需要编写一个函数，使用消息侦听器捕获的数据更新提要。

在没有看到更多代码的情况下，我无法为您提供更具体的建议，但[消息传递](https://code.google.com/chrome/extensions/messaging.html)几乎可以肯定是解决问题的一种方法。

# delphi - 自定义组件和标签顺序

> ID：10190615
> 
> 赞同：8
> 
> 时间：2012-04-17T11:47:34.553
> 
> 标签：delphi, components, delphi-xe, vcl

我有一个自定义组件（继承自`TCustomPanel`），它由两个其他组件（假设是两个编辑）组成。使用组件时如何正确获取标签顺序？

在标签顺序设计器中，我只能访问无法获得焦点的组件本身，因为它是一个面板。运行时发生的情况是，我可以使用 tab 键访问编辑，但只有在组件下方的两个按钮获得焦点之后。

在这种情况下如何更改标签顺序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T15:54:05.510

组件中这些嵌套控件的 Tab 键顺序与组件所在表单的 Tab 键顺序不同。表单的 Tab 键顺序列表中组件的 Tab 键顺序在您选择嵌套控件时决定。一旦所有的标签顺序列表组合在一起，它们就会产生最终的循环：

*   窗体上的控件 ( `TabOrder=0`)
*   窗体上的另一个控件 ( `TabOrder=1`)
*   您的面板组件 ( `TabOrder=2`)
    *   编辑 1 ( `TabOrder=0`)
    *   编辑 2 ( `TabOrder=1`)
*   窗体上的另一个控件 ( `TabOrder=3`)

* * *

为了能够设置面板组件设计时的 Tab 键顺序：

*   使用设计器中的跳位顺序编辑器（右键单击组件的父级）并使用编辑器中的箭头更改跳位顺序，或
*   发布`TabOrder`组件的属性并在对象检查器中设置它：

    ```
    type 
      TMyPanel = class(TCustomPanel) 
      published 
        property TabOrder; 
      end; 
    ```

在运行时，总是可以设置组件的 Tab 键顺序，因为该`TabOrder`属性在`TWinControl`.

> ...因为它是一个面板，所以不能有焦点。

不，面板可以很好地获得焦点，但默认情况下不会。这由默认情况下的`TabStop`属性处理。`False`您不想为您的组件`TabStop`进行设置`True`，因为 (1) 面板没有具有焦点的指示器，并且 (2) 不需要（我想）。

* * *

更改嵌套控件的选项卡顺序最好在组件的构造函数中或在运行时完成。

为了能够在设计时设置组件内嵌套控件的 Tab 键顺序，需要做更多的工作。*我认为您不希望这样，但是由于我之前的回答（已删除）是垃圾（并且奇怪地投票了），因此我已经制定了一个示例作为补偿。*

首先，请注意在设计器中使用标签顺序编辑器设置这些编辑的标签顺序（右键单击面板组件）将更改标签顺序，但不会持续。这是因为这些更改不会流式传输到 DFM。

为了能够流式传输/保存控件的设计时更改，您需要发布它们：

```
type
  TMyPanel = class(TCustomPanel)
  private
    FEdit1: TEdit;
    FEdit2: TEdit;
  public
    constructor Create(AOwner: TComponent); override;
  published 
    property Edit1: TEdit read FEdit1;
    property Edit2: TEdit read FEdit2;
  end;

constructor TMyPanel.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FEdit1 := TEdit.Create(Self);
  FEdit1.SetBounds(10, 10, 100, 21);
  FEdit1.Name := 'Edit1';
  FEdit1.Parent := Self;
  FEdit1.SetSubComponent(True);
  FEdit2 := TEdit.Create(Self);
  FEdit2.SetBounds(10, 41, 100, 21);
  FEdit2.Name := 'Edit2';
  FEdit2.Parent := Self;
  FEdit2.SetSubComponent(True);
end; 
```

当然，这会发布这些控件的所有属性，现在用户可以更改他们想要的任何内容。为防止这种情况，请考虑限制`TEdit`控件的已发布属性：

```
unit MyPanelEdit;

interface

uses
  DesignEditors, Unit2, DesignIntf, SysUtils, Classes, TypInfo, StdCtrls;

type
  TEditProperty = class(TComponentProperty)
  private
    function FilterFunc(const ATestEditor: IProperty): Boolean;
  public
    function GetAttributes: TPropertyAttributes; override;
    procedure GetProperties(Proc: TGetPropProc); override;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterPropertyEditor(TypeInfo(TEdit), TMyPanel, '', TEditProperty);
end;

{ TEditProperty }

function TEditProperty.FilterFunc(const ATestEditor: IProperty): Boolean;
begin
  Result := ATestEditor.GetName = 'TabOrder';
end;

function TEditProperty.GetAttributes: TPropertyAttributes;
begin
  Result := [paSubProperties];
end;

procedure TEditProperty.GetProperties(Proc: TGetPropProc);
var
  LComponents: IDesignerSelections;
  LDesigner: IDesigner;
begin
  LComponents := GetSelections;
  if LComponents <> nil then
  begin
    if not Supports(
        FindRootDesigner(LComponents[0]), IDesigner, LDesigner) then
      LDesigner := Designer;
    GetComponentProperties(LComponents, [tkInteger], LDesigner, Proc,
      FilterFunc);
  end;
end;

end. 
```

这将已发布`TEdit`属性的属性限制为仅显示`TabOrder`。

# inno-setup - 以管理员身份运行应用程序而不提示提升

> ID：10190616
> 
> 赞同：1
> 
> 时间：2012-04-17T11:47:40.083
> 
> 标签：inno-setup, uac, elevation

我正在使用 Innosetup 安装我的应用程序，以便在用户使用 SOFTWARE\Microsoft\Windows\CurrentVersion\Run 登录时启动。如何在没有 UAC 提示的情况下像右键单击并选择以管理员身份运行一样启动应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:03:28.317

启用 UAC 后，任何需要提升的应用都会导致提示无法绕过（忽略允许 MS 签名应用自动提升的设置）

您总是可以让您的应用程序仅在需要时提升，无论是通过[再次运行自身](https://stackoverflow.com/search?q=shellexecute+%22runas%22)还是通过[COM 提升](https://stackoverflow.com/search?q=com+elevation)。

作为旁注，“一般应用程序”不需要提升/管理员访问权限。

# c# - 如果查询未参数化，如何在查询中传递对象（字节数组）？

> ID：10190622
> 
> 赞同：0
> 
> 时间：2012-04-17T11:47:55.643
> 
> 标签：c#, mysql, binary, .net-2.0, parameterized-query

我有这个查询要运行：

```
string query = @"SELECT *
                 FROM   hint 
                 WHERE  addedSessionId IN (x, y, z, ............)";

if (_connSource.State != ConnectionState.Open)
    _connSource.Open();

MySqlCommand cmd = new MySqlCommand(query, _connSource);
MySqlDataReader r = cmd.ExecuteReader();

List<Hint> lstHint = new List<Hint>();
while (r.Read())
{
    Hint h = new Hint(Convert.ToInt32(r[0]), Convert.ToInt32(r[1]), 
                      Convert.ToString(r[2]), Convert.ToInt32(r[3]), 
                      Convert.ToInt32(r[4]));
    h.addedSessionId = (Guid)r[5];

    lstHint.Add(h);
}

r.Close(); //important 
```

在上面的代码中，如何将值传递`x, y, z etc`给查询本身？`x, y, z etc`不是整数或字符串，而是字节数组。在我的代码中，它们是 .net Guid 字段，但我通过将其转换为字节数组将其作为二进制值保存在 db 中。

我可以通过以参数化方式执行此操作来实现我想要的，如下所示：

```
string query = @"SELECT *
                 FROM   hint 
                 WHERE  addedSessionId = @newSessionId";

if (_connSource.State != ConnectionState.Open)
    _connSource.Open();

List<Hint> lstHint = new List<Hint>();
foreach (List<Guid> myGuid in lstGuid)
{
    MySqlCommand cmd = new MySqlCommand(query, _connSource);
    cmd.Parameters.AddWithValue("newSessionId", myGuid.ToByteArray());
    MySqlDataReader r = cmd.ExecuteReader();

    while (r.Read())
    {
        int id = Convert.ToInt32(r[0]);

        if (IsThisEntryAlreadyAdded(id, lstHint))
            continue;

        Hint h = new Hint(id, Convert.ToInt32(r[1]),
                          Convert.ToString(r[2]), Convert.ToInt32(r[3]),
                          Convert.ToInt32(r[4]));
        h.addedSessionId = (Guid)r[5];

        lstHint.Add(h);
    }

    r.Close(); //important
} 
```

第二种方法的问题是它相对慢得多。这里不仅查询必须多次运行到数据库，而且每次我都需要通过运行此`IsThisEntryAlreadyAdded`函数来确保该特定条目是否尚未添加。

我的问题是如何在非参数化查询中传递对象（在我的情况下是字节数组）？如果不可能，我的问题是有没有其他方法可以让我的查询更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:18:17.043

这是示例（未仅测试伪代码）我想如何做到这一点：

```
string query = @"SELECT * FROM   hint  WHERE  addedSessionId IN (";
MySqlCommand cmd = new MySqlCommand(query, _connSource);
int i = 0;
foreach (List<Guid> myGuid in lstGuid)
{
    query = string.Format("{0}@param{1}", query, i);
    cmd.Parameters.AddWithValue(string.Format("@param{0}", i), myGuid.ToByteArray());
    i++;
    if(i != lstGuid.Count) query = string.Format("{0},", query);
}
query = string.Format("{0})", query);
cmd.CommandText = query;
//Here you have command with constructed query and params 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:55:52.813

@Reinuz 的回答回答了我的问题，但在我的情况下它很痛苦。当我有非常多的`IN (`子句值时，我可以超过允许的最大数据包大小，因此查询根本不会运行。

*所以这就是我最终得到的结果，这对于大表*来说要快得多：

```
string query = @"SELECT * 
                 FROM   hint 
                 WHERE  addedSessionId IN (" + GetStringValuesFromGuidList()  + ")";

void GetStringValuesFromGuidList()
{
    string guids = null;
    for (int i = 0; i < lstGuid.Count; i++)
    {
        guids += "'" + UTF8Encoding.Default.GetString(lstGuid[i].ToByteArray()).Replace("\\", "\\\\").Replace("'", "''") + "'";
        if (i < lstGuid.Count - 1)
            guids += ", ";
    }

    return guids;
} 
```

我将 Guid 转换为其字符串表示形式，然后将其传递给 MySQL 可以在哪里进行等效字符串搜索的查询。

对于有限数量的条目，参数化查询（Reinuz 的答案）是最好的。对于非常大的值，请进行字符串搜索

**Edit:** The `UTF8Encoding` one should use here depends on the character set of the database whether its unicode etc. I had success with `.Default` in most cases. Furthermore the string representation of binary will have reserved characters. So escape it with `'` or `\`

# ruby - Ruby 从基类访问派生类“类方法”

> ID：10190623
> 
> 赞同：3
> 
> 时间：2012-04-17T11:47:59.710
> 
> 标签：ruby, oop, inheritance, derived-class, base-class

我在 Ruby 中有一个基类，它有一个继承的类方法。我想在基类中调用此方法，但将其传递给派生类指定的选项，如下所示：

```
class Base < SuperDuperClass
  super_duper_class_method :option => my_option_value

  def self.my_option_value
    raise "Method my_option_value must be overridden by all subclasses"
  end
end

class Derived < Base
  def self.my_option_value
    "My Derived Option Value"
  end
end 
```

但是，这是行不通的。我相信是因为基类中的顶层代码在派生类中的顶层代码之前执行，所以调用 super_duper_class_method 时没有定义派生方法。我宁愿不必在所有派生类中调用 super_duper_class_method，而只需指定选项即可。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:35:20.983

当你说它不起作用时，你没有具体说明。我相信您会在定义 Base 类时引发异常（而不是在调用 my_option_value 时）。

建议你把方法名作为符号传递，在SuperDuperClass中调用send on self调用派生方法。

```
class SuperDuperMethod
  def self.some_code
    self.class.__send__(options[:option])
  end
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:42:48.720

只是为了关闭它，我的解决方案是调用`super_duper_class_method`子类。这是我试图避免的，但在这种情况下，如果没有一些非常疯狂的元编程，我认为不可能得到我想要的东西。

# sql - 结果一行中的多行

> ID：10190625
> 
> 赞同：0
> 
> 时间：2012-04-17T11:48:02.003
> 
> 标签：sql, oracle, select

我希望结果行与逗号分隔值在一行中，所以我应用了

```
rtrim(xmlagg(xmlelement(e, column_name|| ',')).extract('//text()').extract('//text()'),',') 
```

在以下查询的结果行上

```
SELECT 
    TO_DATE('01-04-2012','dd-MM-yyyy') - 1 + rownum AS d
FROM all_objects
WHERE TO_DATE('01-04-2012','dd-MM-yyyy') - 1 + rownum 
    <= TO_DATE('30-04-2012','dd-MM-yyyy')
    MINUS
SELECT TS_DATE  
FROM TS_DTL where emp_id=3 and TS_DATE BETWEEN TO_DATE('01-04-2012','dd-MM-yyyy') 
AND TO_DATE('30-04-2012','dd-MM-yyyy') 
```

当我这样做时：

```
SELECT 
    rtrim(xmlagg(xmlelement(e, TO_DATE('01-04-2012','dd-MM-yyyy') - 1 + rownum || ','))
        .extract('//text()')
        .extract('//text()') ,',') AS d
FROM all_objects
WHERE TO_DATE('01-04-2012','dd-MM-yyyy') - 1 + rownum 
    <= TO_DATE('30-04-2012','dd-MM-yyyy')

MINUS

SELECT 
    rtrim(xmlagg(xmlelement(e, TS_DATE || ','))
        .extract('//text()')
        .extract('//text()') ,',') 
FROM TS_DTL 
WHERE emp_id=3 
AND TS_DATE 
    BETWEEN TO_DATE('01-04-2012','dd-MM-yyyy') 
    AND TO_DATE('30-04-2012','dd-MM-yyyy') 
```

它不减去第二个查询结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:00:53.407

我猜这是由于一些数据格式问题。`MINUS`用 a替换`UNION ALL`并比较结果行。

或者将原始选择用作子选择，并在外部选择中应用您的`xmlagg`魔法：

```
SELECT rtrim(xmlagg ....))
FROM (
    SELECT
    FROM
    WHERE

    MINUS

    SELECT
    FROM
    WHERE 
```

)

# jquery - jquery将XML值作为一个字符串而不是单独的值返回

> ID：10190627
> 
> 赞同：0
> 
> 时间：2012-04-17T11:48:12.160
> 
> 标签：jquery, xml

我有一个通过 jQuery 加载的 XML 文件，一旦加载了 XML，我就会通过 XML 读取值。我遇到的问题是 XML 有一个称为 VAL 的元素，其中有一个也称为 VAL 的子元素。所以当我使用：

```
var val = $(loadedElements[i]).find('val').text();
console.log("val = ", val); 
```

我将所有 val 元素作为一个字符串，而不是作为父项和子项分开。

这是我正在使用的 XML 示例：

```
<e>
    <name>myElement</name>
    <type>TEXT</type>
    <val>text to display</val>
    <acts>
        <act>
            <type>CLICK</type>
            <val>http://www.example.com</val>
        </act>
    </acts>
</e> 
```

在此示例 XML 中，当我使用`console.log("val = ", val);`我看到的输出 val 时：val = 'text to display [http://www.example.com](http://www.example.com) '。

如何分离出两个 VAL 元素？

谢谢

斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:53:07.890

试试这个，应该让你走上正确的道路：

```
$(loadedElements[i]).find('val').each(function() {
    console.log(this);
}); 
```

或这个：

```
var val = $(loadedElements[i]).find('val');
console.log($(val[0]).text());
console.log($(val[1]).text());​ 
```

[小提琴](http://jsfiddle.net/adeneo/kvXvd/)

# python - 在孟加拉语单词中查找音节的正则表达式

> ID：10190633
> 
> 赞同：4
> 
> 时间：2012-04-17T11:48:32.103
> 
> 标签：python, regex, unicode, nlp

这是代码：

```
BanglaAlphabet = {
    'Consonant'                   : '[\u0995-\u09B9\u09CE\u09DC-\u09DF]',
    'IndependantVowel'            : '[\u0985-\u0994]',
    'DependantVowel'              : '[\u09BE-\u09CC\u09D7]',
    'Nukta'                       : '[\u09BC]'
}
BanglaWordPattern = ur"""(
    ({DependantVowel}{Nukta}{Consonant}) |
    ({DependantVowel}{Consonant}) |
    {IndependantVowel} |
    {Consonant} |
)+""".format(**BanglaAlphabet)
BanglaWordPattern = re.compile(BanglaWordPattern, re.VERBOSE) 
```

匹配是通过以下方式完成的：

```
re.match(BanglaWordPattern, w[::-1]) 
```

这意味着在从右到左匹配时匹配有效的孟加拉语单词。

但是，它会匹配无效的单词，例如 োগাড় 和 িদগ。

可能是什么问题呢？

### 编辑

在@GarethRees 和@ChrisMorgan 建议的多次更正之后，我最终得到：

```
bangla_alphabet = dict(
    consonant         = u'[\u0995-\u09b9\u09ce\u09dc-\u09df]',
    independent_vowel = u'[\u0985-\u0994]',
    dependent_vowel   = u'[\u09be-\u09cc\u09d7]',
    dependent_sign    = u'[\u0981-\u0983\u09cd]',
    virama            = u'[\u09cd]'
)
bangla_word_pattern = re.compile(ur'''(?:
    {consonant}
    ({virama}{consonant})?
    ({virama}{consonant})?
    {dependent_vowel}?
    {dependent_sign}?
    |
    {independent_vowel}
    {dependent_sign}?
)+ 
```

现在的匹配是：

```
bangla_word_pattern.match(w) 
```

这段代码不仅纠正了错误，而且比以前解释了更多的字符和有效的结构。

我很高兴地报告它按预期工作。因此，此代码现在用作验证孟加拉语单词语法的**非常基本**的正则表达式。

有几个特殊规则/例外未实施。我将研究这些并将它们逐步添加到这个基本结构中。

许多 ''.format(**bangla_alphabet), re.VERBOSE)

现在的匹配是：

*xCodexBlockxPlacexHolderx*

这段代码不仅纠正了错误，而且比以前解释了更多的字符和有效的结构。

我很高兴地报告它按预期工作。因此，此代码现在用作验证孟加拉语单词语法的**非常基本**的正则表达式。

有几个特殊规则/例外未实施。我将研究这些并将它们逐步添加到这个基本结构中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:56:58.833

您的字符串`কয়া`由以下字符组成：

```
>>> import unicodedata
>>> map(unicodedata.name, u'কয়া')
['BENGALI LETTER KA', 'BENGALI LETTER YA', 'BENGALI SIGN NUKTA', 'BENGALI VOWEL SIGN AA'] 
```

U+09BC BENGALI SIGN NUKTA 与您的正则表达式不匹配。

查看[孟加拉语代码表](http://www.unicode.org/charts/PDF/U0980.pdf)，您似乎可能遗漏了一些其他字符。

* * *

好的，回答您更新的问题。你犯了三个错误：

1.  您在字典中的字符串`BanglaAlphabet`缺少`u`(Unicode) 标志。这意味着 Unicode 转义序列`\u0995`不会被翻译成 Unicode 字符。你只会得到反斜杠、字母和数字。

2.  在`BanglaWordPattern`正则表达式中，靠近末尾有一个竖线`|`，后面没有任何内容。这意味着整个正则表达式看起来像`(stuff1|stuff2|stuff3|stuff4|)+`. 所以真的有*五种*选择，最后一种是空的。当然，空的正则表达式匹配任何东西。

3.  您实际上并没有查看程序的结果来查看它实际匹配的内容。如果您编写`m = re.match(BanglaWordPattern, w[::-1]); print m.group(0)`，您会看到实际匹配的是空字符串。

我认为以下也是错误，但是您还没有解释您要做什么，所以我不太自信：

1.  您正在向后进行匹配，这是不必要的。如果您将模式翻转并向前匹配，将会更简单、更容易理解。

2.  您正在正则表达式中使用捕获括号。如果您不需要结果，请改用非捕获括号`(?:...)`。

3.  无论如何，内部的括号是不必要的。

4.  您没有将正则表达式的末尾锚定在单词边界或字符串的末尾。

我会写这样的东西：

```
import re

bangla_categories = dict(
    consonant         = u'[\u0995-\u09B9\u09CE\u09DC-\u09DF]',
    independent_vowel = u'[\u0985-\u0994]',
    dependent_vowel   = u'[\u09BE-\u09CC\u09D7]',
    nukta             = u'[\u09BC]',
)

bangla_word_re = re.compile(ur"""(?:
    {consonant}{nukta}{dependent_vowel} |
    {consonant}{dependent_vowel} |
    {independent_vowel} |
    {consonant}
)+(?:\b|$)""".format(**bangla_categories), re.VERBOSE) 
```

但我也会查看您省略的代码图表中的其他孟加拉语标志。U+0981 BENGALI SIGN CANDRABINDU 和 U+0982 BENGALI SIGN ANUSVARA（使元音鼻化）呢？U+09CD BENGALI SIGN VIRAMA（取消元音）怎么样？等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:37:04.643

你所拥有的有几个问题：

*   您的正则表达式最终会在其中包含文字`\u0995`等，因为它们不是 Unicode 字符串；您需要包含实际的 Unicode 字符。

*   您希望`$`在正则表达式的末尾，以便它只匹配整个字符串。

*   您的组中有一个空字符串是有效的（通过用管道结束第一组，留下一个空选项）。这与缺少`$`符号相结合，意味着它不起作用。

*   它不完整（正如 Gareth 所观察到的）。

另请注意，您也可以在获得已编译的正则表达式对象后`bengali_word_pattern.match(s)`代替。`re.match(bengali_word_pattern, s)`

```
bengali_alphabet = {
    'consonant': u'[\u0995-\u09B9\u09CE\u09DC-\u09DF]',
    'independent_vowel': u'[\u0985-\u0994]',
    'dependent_vowel': u'[\u09BE-\u09CC\u09D7]',
    'nukta': u'\u09BC'
}

bengali_word_pattern = ur'''^(?:
    (?:{dependent_vowel}{nukta}{consonant}) |
    (?:{dependent_vowel}{consonant}) |
    {independent_vowel} |
    {consonant}
)+$'''.format(**bengali_alphabet)
bengali_word_pattern = re.compile(bengali_word_pattern, re.VERBOSE) 
```

现在，

```
>>> bengali_word_pattern.match(u'বাংলা'[::-1]) 
```

由于“ং”字符U+0982，这个不起作用；它不在您的任何范围内。不确定该位属于哪个类别；如果我们只是取出冒犯性的角色，它就可以工作。（谷歌翻译告诉我，结果词可以翻译成“手镯”——我不知道，我需要问我姐姐；我能如实说的大约是আমি বাংলা বলতে পারি না。几乎我所知道的都是方便মুরগি চোর 之类的日常用语。而且它的第一个单词还包含一个迄今为止遗漏的元音。无论如何，这无关紧要。）

```
>>> bengali_word_pattern.match(u'বালা')
<_sre.SRE_Match object at 0x7f00f5bf9620> 
```

它也适用于“鸡贼”短语。

```
>>> [bengali_word_pattern.match(w[::-1]) for w in u'মুরগি চোর'.split()]
[<_sre.SRE_Match object at 0x7f00f5bf9620>, <_sre.SRE_Match object at 0x7f00f5bf97e8>] 
```

它不匹配这两个不完整单词的例子：

```
>>> bengali_word_pattern.match(u'োগাড়'[::-1])
>>> bengali_word_pattern.match(u'িদগ'[::-1]) 
```

在这一点上，我也会承认自己对为什么要向后解析字符串感到困惑；我会认为向前完成它是有意义的（这个正则表达式工作正常，那么你不需要使用`[::-1]`）：

```
^(?:
    {consonant}
    (?:
        {nukta}?
        {dependent_vowel}
    )?
    |
    {independent_vowel}
)+$ 
```

在每个连词/字母处，获得一个独立元音或一个辅音，可能后跟一个从属元音，它们之间可能有一个元音。

我所做的其他更改：

*   变量/项目命名，以适应标准 Python 编码风格；
*   `(...)`将（匹配组）替换为`(?:...)`（非匹配组）以提高性能（参见文档）；
*   更正了“依赖”的拼写；
*   将“bangla”改为“bengali”，因为英语是孟加拉语；在说英语时，我更喜欢使用标准的英语名称而不是母语发音，如有必要，可以使用英语——例如法语而不是*le français*。另一方面，我确实意识到孟加拉语经常被说英语的人称为孟加拉语。

# c# - FormsAuthentication.SetAuthCookie() 是否需要重定向？

> ID：10190634
> 
> 赞同：9
> 
> 时间：2012-04-17T11:48:34.457
> 
> 标签：c#, asp.net, forms-authentication

在检查用户的凭据并确认它们是好的之后，我正在使用`FormsAuthentication.SetAuthCookie("Username", false);`对用户进行身份验证。

然后，在母版页中，我`Page.User.Identity.IsAuthenticated`用来确保我们处理的是登录用户而不是访客。

问题在于首先设置 auth cookie。当我设置 auth cookie 后，我立即运行一个方法，该方法用于`Page.User.Identity.IsAuthenticated`将欢迎消息从通用的“欢迎，客人！”中更改。向更个人化的消息“欢迎，用户名！” 信息。这在我转到另一个页面之前不起作用，所以我知道登录过程已经成功，但似乎在刷新或重定向发生之前我无法访问我需要的信息。

设置 auth cookie 后是否需要重定向用户`Page.User.Identity.IsAuthenticated`才能更改消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-06T18:55:42.800

我想指出实际上有一种方法可以解决这个问题（因为我从来没有在任何其他类似的问题中看到过这样的说法）。您无需重定向即可检索 User.Identity 信息的来源 cookie 及其数据。问题是，cookie 还没有发送到浏览器。

它只是从 Response.Cookies 对象中获取 FormsAuthentication 生成的 cookie：

```
HttpCookie EncryptedCookie = Response.Cookies.Get(FormsAuthentication.FormsCookieName);
FormsAuthenticationTicket DecryptedCookie;
try {
    DecryptedCookie = FormsAuthentication.Decrypt(EncryptedCookie.Value);
} catch (ArgumentException) {
    // Not a valid cookie
    return false;
}
// DecryptedCookie.Name: The Username
// DecryptedCookie.UserData: Any additional data, as a string. This isn't normally used
return !DecryptedCookie.Expired; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T11:51:52.267

我以前见过这个，所以我知道答案是肯定的。（如，是的，您确实需要重定向用户才能正确使用`Page.User.Identity.IsAuthenticated`）

我想象的原因是因为`IsAuthenticated`评估当前请求，当当前请求第一次进来时，它被记录为未经过身份验证。

您需要做的是在不检查的情况下应用您在所述方法中拥有的任何逻辑`IsAuthenicated`（使其假设为真）。

现在我不知道您的方法的详细信息，以建议如何对其进行重构以应对此问题，但是您可以将“Do Stuff”部分拆分为一个单独的函数，然后您可以直接从您的登录函数中调用该函数绕过身份验证检查。

* * *

**编辑**：要支持我的假设，您可以[阅读此页面](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx)。

有趣的部分：

> forms-authentication ticket 为浏览器发出的下一个请求提供表单认证信息。

# php - JSON数组中的最后一个逗号到android

> ID：10190635
> 
> 赞同：0
> 
> 时间：2012-04-17T11:48:35.577
> 
> 标签：php, android, mysql, json

当我使用 PHP 将 JSON Array 回显到 android 时，我遇到了最后一个逗号的问题

这是我的代码

```
If ($commentResult>0) 
echo "[";
    { 
    while ($row = mysql_fetch_array($commentResult)) {

    echo json_encode($row).",";
    }
echo "]"; 
```

Android 无法读取，它打印出 JSONException:Vale at 3 is null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:54:20.990

你为什么要重新发明轮子？如果您想提供整个数组，则将 json_encode 放在整个数组上，而不是尝试手动构建它。

```
$comments=array();
if($commentResult>0){
    while($row=mysql_fetch_array($commentResult)){
        $comments[]=$row;
    }
}
echo json_encode($comments); 
```

*另外，一个小提示，不要使用 mysql_ 函数。而是使用 PDO 或 mysqli，它们得到更好的支持，让您摆脱整个 while($row) 业务。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:54:57.510

你形成json的方式真的很奇怪。不知道这是否是一个问题，但您可以以更干净的方式尝试：

```
if ($commentResult) {
    for ($data = array(); $row = mysql_fetch_array($commentResult); $data[] = $row);
    echo json_encode($data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:59:23.753

无论您使用 PHP 生成什么 JSON，只需在[http://jsonlint.com/](http://jsonlint.com/)中验证即可。如果输出错误，它不会从 PHP 端验证它是否正常。

# performance - 偶数路径算法

> ID：10190643
> 
> 赞同：5
> 
> 时间：2012-04-17T11:49:06.880
> 
> 标签：performance, algorithm, depth-first-search

我被要求写一个有效的算法来找到有向图中的所有顶点，这些顶点从给定顶点到它们的路径*长度是均匀的。*

这是我想到的：

（与 DFS 的“访问”算法非常相似）

```
Visit(vertex u)

     color[u]<-gray
     for each v E adj[u]
       for each w E adj[v]
            if color[w] = white then
                     print w
                     Visit(w) 
```

我认为它有效，但我很难计算它的效率，特别是当图表带有周期时。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T12:16:39.390

如果我可以提出替代方案 -**我会减少问题并使用 DFS 而不是修改 DFS**。

给定一个图`G = (V,E)`，创建一个图`G' = (V,E')`，其中`E'={(u,v) | there is w in V such that (u,w) and (w,v) are in E)`
换句话说 - 我们正在创建一个图 G'，当且仅当从 u 到 v 的路径长度为 2 时，它具有边 (u,v)。

鉴于该图，我们可以推导出以下**算法[高级伪代码]**：

1.  从 G 创建 G'
2.  从源运行 DFS on G' `s`，并标记相同的节点 DFS 标记。

* * *

解的正确性和时间复杂度分析：

**复杂性：** 复杂性显然是`O(min{|V|^2,|E|^2} + |V|)`，因为第 1 部分 - 因为`min{|E|^2,|V|^2}`G' 中最多有边，所以第 2 步的 DFS 运行在`O(|E'| + |V|) = O(min{|V|^2,|E|^2} + |V|)`

**正确性：**
如果算法发现有一条从v0到vk的路径，那么从DFS的正确性来看——在G'上有一条路径v0->v1->...->vk，所以有一条`v0->v0'->v1->v1'->...->vk`偶数的路径G 上的长度。 如果从到
上存在一条长度相等的路径，就让它成为。then是 上的路径，将由 DFS 找到 - 从 DFS 的正确性来看。`G``v0``vk``v0->v1->...->vk``v0->v2->...->vk``G'`

**附带说明：**
减少问题而不是修改算法通常不易受到错误的影响，并且更容易分析和证明正确性，因此您通常应该尽可能选择这些而不是修改算法。

**编辑：**关于您的解决方案：嗯，分析它表明它们几乎相同 - 除了我`E'`作为预处理生成，而您在每次迭代中动态生成它。
由于您的解决方案正在动态生成边缘 - 它可能会不止一次地做一些工作。然而，`|V|`由于每个顶点最多被访问一次，所以它在大多数情况下更多地被限制在工作中。
为简单起见，为您的解决方案 `|E| = O(|V|^2)`提供运行时间的总上限。它也是一个下界，看一个[clique](http://en.wikipedia.org/wiki/Clique_%28graph_theory%29)的例子，在每个节点的每个节点，算法都会生成所有的可能性，并且`O(|V|^3)`
`visit()``O(|V|^2)``visit()`一种可能性，因为我们准确地访问`|V|`节点，我们得到总运行时间`Omega(|V|^3)`
因为我们发现解决方案是`O(|V|^3)`和`Omega(|V|^3)`，所以总运行时间是`Theta(O(|V|^3))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-22T20:41:33.103

对于每个无向图 G(V,E)，我们应该在以下情况下将上述图重建为二分图 G'(V',E')：

*   V' = V1 ∪ V2
*   E'={(u1,v2):(u,v)∈E, u1∈V1, v2∈V2}
*   V1={v1: v∈V}
*   V2={v2: v∈V}

例如图表

[![给定图](../Images/df6d7e3f1d821ee138d235a3e9cbf468.png)](https://i.stack.imgur.com/y8EDU.png)

变成

[![二分图](../Images/f94124b88b50fe4be71c217f7a785f90.png)](https://i.stack.imgur.com/sHrHA.png)

在这个图（二分图）上，我们应该运行 BFS 算法 - BFS(G',S1')。运行 BFS(G',S1') 后，我们应该返回包含最短偶数路径长度 δ(s1,u1) 的数组 d

# logging - 温莎城堡按名称获取记录器

> ID：10190645
> 
> 赞同：1
> 
> 时间：2012-04-17T11:49:12.627
> 
> 标签：logging, castle-windsor, log4net

我正在尝试按名称获取记录器实例。目前，我有一个带有温莎城堡和 log4net 日志记录设施的遗留项目。从配置文件中我发现工厂使用根级别记录器。但是对我来说使用不同的名称记录器会更方便。是否可以实施？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:18:16.073

猜猜没有办法以这种方式获取记录器。但是我发现了一些奇怪的方法来控制日志记录级别。例如，按程序集名称设置日志记录：

```
 <logger name="MyProject.Workers.DBWorker">
     <level value="WARN" />
  </logger> 
```

在 DBWorker 中获得这个严格的 worker。

PS：这个记录器可以通过以下类型获得：

```
ILog _logger = LogManager.GetLogger(typeof(DBWorker)); 
```

# javascript - 如果在 Chrome 上运行 createObjectURL 不起作用

> ID：10190647
> 
> 赞同：12
> 
> 时间：2012-04-17T11:49:27.340
> 
> 标签：javascript, html, canvas, websocket

大家好，

我试图从 websocket 服务器（在 .NET 中）检索图像我将图像作为字节发送，然后在客户端检索它，用于在客户端检索的代码（使用画布和 JavaScript）：

```
var c=document.GetElementById("myCanvas");
var ctx=c.getContext("2d");
ws.onmessage=function(evt)
{
    var image=new Image();
    image.src=URL.createObjectURL(evt.data);
    ctx.drawImage(image,0,0);
} 
```

它在 Firefox 上完美显示图片，但在 Chrome 上，它只是返回未定义并且不会通过 createObjectURL 加载图像我使用的是 Chrome 18.0.1025.162

任何的想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T17:07:46.657

来自[MDN](https://developer.mozilla.org/en/Document_Object_Model_(DOM)/window.URL.createObjectURL)：

> 此方法在 Chrome 和 Webkit 中的前缀为`window.webkitURL.createObjectURL()`.

您应该测试是否`URL`存在，然后使用适当的对象：

```
(window.URL ? URL : webkitURL).createObjectURL(evt.data); 
```

# facebook - 网站无效 - 但它是

> ID：10190649
> 
> 赞同：5
> 
> 时间：2012-04-17T11:49:35.187
> 
> 标签：facebook, url, dns, blocked

所以，我正在建立一个名为“dagbok.nu”的网站，这是瑞典语中“现在的日记”的意思:)

无论如何，在创建 Facebook 应用程序时，它声称站点 URL 以及应用程序域都无效。对于站点 url，我使用了“ [http://dagbok.nu](http://dagbok.nu) ”，对于站点域，我使用了“dagbok.nu”。请不要回复（正如我看到其他人在类似问题上所做的那样）我应该输入带有方案的站点 url 和没有域的域 - 这正是我正在做的。

对，所以根据此处的另一个问题，可以使用 FB 自己的 URL 抓取工具来解决此功能，所以我就是这样做的：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fdagbok.nu](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fdagbok.nu)

回复： 解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取 对，所以现在我可以假设它被认为无效的原因是因为 FB 无法抓取 URL。但为什么？

根据[这个问题](http://facebook.stackoverflow.com/questions/9100115/site-url-is-not-a-valid-url)，其中一个原因似乎是 FB 认为 URL 不安全或“垃圾邮件”。我从以前的所有者那里获得了这个域，所以这并不是不可能的。但是，当在那个帖子中做与 Matthew 相同的事情时 - 即尝试使用域“ [http://dagbok.nu](http://dagbok.nu) ”在我的时间线中发布，我没有得到任何信息。状态框展开后好像包含一个缩略图和有关链接的信息，但它只包含一个“（无标题）”文本，仅此而已。![截屏](../Images/39bbdd09022ef614717e415c90a5593c.png)

所以现在我不知道该怎么办。我尝试从网络上的多个服务器检查 DIG 和 NS 记录，每个人似乎都正确解决了它，我也让朋友仔细检查了各州的 URL。我不明白出了什么问题，我不知道如何询问 FB 的人如何解决这个问题。这里有人对此有什么好的建议吗？提前致谢！:)

**编辑** 将域更改为指向完全相同的 Web 服务器和 document_root 的另一个域时，它可以工作！所以这绝对是域“dagbok.nu”的问题，而不是该页面上的代码。

**编辑** 使用上面的调试功能时 - 我在服务器日志中没有看到任何活动。Facebook 甚至不联系服务器。当使用备用 url - 来自上次编辑的那个时，它会按原样弹出在日志中。

**编辑** 我向 Facebook 提交了一份[错误报告](http://developers.facebook.com/bugs/455103071170761)，他们的第一反应是他们将跟进。现在，一个月后，我收到一封电子邮件，上面写着“我们正在根据对开发者社区的影响来确定错误的优先级。由于这个错误报告没有得到其他开发者的太多关注，我们将关闭它以便更好地关注顶部问题”，然后他们告诉我去 stackoverflow 尝试解决我的问题 - 但问题出在他们身上，当然没有其他人报告说我的网站无法正常工作，它只影响我，而且我因为这个bug还没打开！

**编辑** 我想提交一个新的错误报告，但现在我什至不能这样做，因为他们也阻止了这个 URL 的错误报告！

我不得不编辑 URL -[这是](http://developers.facebook.com/bugs/527265697329693)新的错误报告

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T11:39:06.303

当 Facebook 试图废弃您的网站以获取信息时，他们会使用名为“ [facebookexternalhit](https://www.facebook.com/externalhit_uatext.php) ”的特定用户代理向您的服务器发送调用...

> Facebook 需要抓取您的页面以了解如何在网站周围显示它。
> 
> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。
> 
> 刮板的用户代理是：“facebookexternalhit/1.1(+ [http://www.facebook.com/externalhit_uatext.php](http://www.facebook.com/externalhit_uatext.php) )”

1.  确保它没有被您的服务器防火墙阻止
2.  如果它甚至试图访问您的站点，请查看您的服务器日志
3.  如果您认为这是防火墙问题，请查看此[链接](https://developers.facebook.com/docs/ApplicationSecurity/#facebook_scraper)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T19:40:58.913

您的问题似乎与您的字符编码字符串有关。您的 Apache 服务器当前正在发送不受支持的字符串`latin1`。你已经定义了你的`meta:content-type`as `iso-8859-1`。查看[w3c 验证器](http://validator.w3.org/check?uri=dagbok.nu&charset=%28detect+automatically%29&doctype=Inline&group=0)

据我所知，如果 Facebook 解析器遇到[无法识别的字符编码字符串](http://facebook.stackoverflow.com/questions/12321015/could-not-retrieve-data-from-url/12321244#12321244)或标题和元标记之间的[字符编码字符串不匹配，它将立即停止。](http://facebook.stackoverflow.com/questions/12320890/facebook-lint-error-could-not-retrieve-data-from-url/12321378#12321378)

问题可能源自您的文件`httpd.conf`或`php.ini`文件。更改这些以匹配您`meta`并重新启动 Apache。由于问题似乎是特定于域的，所以我先检查一下`httpd.conf`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T07:37:53.590

您的域会被列入黑名单吗？您能否尝试将您的网址发送给某人，并查看 Facebook 是否给您“此消息包含被阻止的内容...”错误？

例如：

![消息失败框](../Images/b427d0e0e569656fc22bce961a66656e.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T01:33:03.607

如果您没有在您的页面上提供特定的最低 Facebook 标记，它将响应“解析 URL 错误：解析输入 URL 时出错，没有数据被抓取”。我只看了主页，但似乎 dagbok.nu 不包含 Facebook 标记。我不确定至少必须存在哪些内容，但在我的实现中，我假设 fb:app_id 元标记和 JavaScript SDK 脚本必须存在。您可能想看看[http://developers.facebook.com/docs/guides/web/#plugins](http://developers.facebook.com/docs/guides/web/#plugins)，尤其是身份验证部分。

我发现了你的问题，因为我今天遇到了同样的错误，原因不明。我发现这是因为我的 og:image 元标记的内容对我尝试使用的图像使用了不正确的 URL。因此，当您将 Facebook 标记添加到您的页面时，请确保您的值正确，否则您可能会继续收到此消息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-11T12:46:45.377

有同样的问题，我发现我的域的 AAAA 记录中的 IPv6 地址不正确。IPv4 记录是正确的，因此该站点在浏览器中运行，但 FB 显然检查了 IPv6 记录！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T11:21:14.417

如果你看看我发现了什么，这似乎不是 Facebook 的问题。

**[使用W3C 在线验证工具](http://validator.w3.org/check?uri=dagbok.nu%2F&charset=%28detect+automatically%29&doctype=Inline&ss=1&outline=1&group=0&verbose=1&user-agent=W3C_Validator%2F1.3)**对其进行测试时的结果是 2 个结果中的 1 个。

使用：**dagbok.nu**进行测试，但请注意**http://dagbok.nu**的测试结果没有差异。删除测试之间的最后一个正斜杠。

**测试：** 1
**结果：** 72 错误 0 警告
**注意：**此处显示的是源**框架**集DOCTYPE 网页的片段。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<NOSCRIPT><IMG SRC="http://svs.bystorm.se/rv?java=off"></NOSCRIPT><SCRIPT SRC="http://svs.bystorm.se/rvj"></SCRIPT>
<HTML STYLE="height:100%;">
<HEAD>
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=iso-8859-1"> 
```

**测试：** 2
**结果：** 4 错误 1 ​​警告
**注意：**此处显示的是源**过渡**DOCTYPE 网页的片段。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html >
<head>
<title>Dagbok: Framsida</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<meta name="author" content="Jonas Eklundh Communication (http://jonas.eklundh.com)">
<meta name="author-email" content="jonas@eklundh.com">
<meta name="copyright" content="Jonas Eklundh Communication @2012">
<meta name="keywords" content="Atlas,Inneh&aring;llssystem,Jonas Eklundh">
<meta name="description" content="">
<meta name="creation-time" content="0,079s">
<meta name="kort" content="DGB"> 
```

重复测试会在间隔几秒钟后循环这些结果，这表明正在发生页面重定向。

**使用以下安全 URL 访问您的网站时，在 Firefox 和 Chrome 中会看到**安全警告：**
[https://dagbok.nu](https://dagbok.nu)
[https://www.dagbok.nu](https://www.dagbok.nu)** 

 **浏览器指示该站点不应被信任，因为它使用来自***.loopiasecure.com的无效安全证书来模拟另一个站点**

**建议：**检查您的 .htaccess 文件、CMS 设置、页面重定向和安全设置。使用上面的源网页来实现那些正在提供的文件位置/文件名，以发现设置不正确的内容。

完成后，我认为 Facebook 会很乐意调试您的网页并提供其他建议。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-15T21:44:19.510

使用 Cloudflare 时也可能出现此问题。这是因为 Cloudflare 保护该页面免受 Facebook 的攻击，然后 Facebook 无法收集数据，这反过来又使 Facebook 认为该页面无效。

我的解决方法是：

1.  关闭页面的 Cloudflare。
2.  使用 Facebook 的开发工具抓取页面：[https ://developers.facebook.com/tools/debug/og/object](https://developers.facebook.com/tools/debug/og/object)
3.  单击并运行“获取新的抓取信息”按钮。
4.  为页面重新启用 cloudflare 保护。

然后，您应该能够继续在需要的位置添加页面。**

# sweave - Sweave：如何在源代码中获得空行？

> ID：10190657
> 
> 赞同：1
> 
> 时间：2012-04-17T11:49:58.727
> 
> 标签：sweave

如何在以下 .Rnw 文件的 PDF 文件中的第二条评论之前获得一个空行？我尝试使用`keep.source`and `strip.white`，但我仍然没有得到空白行——所有块都“粘贴”在一起。

```
\documentclass{article}

\usepackage{fancyvrb}
\usepackage{Sweave}

\begin{document}

<<setup, eval=FALSE>>=
## some comment
a <- 1
b <- 2

## some comment (there is no newline before this comment...)
c <- 3
d <- 4
@

\end{document} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:01:44.123

我不知道保留空白行的任何选项。你可以做什么：

(1) 如果您需要将命名的块保持在一起，您可以简单地在所谓的空白行的开头放置一个 # ：

```
<<setup, eval=FALSE>>=
## some comment
a <- 1
b <- 2
#
## some comment (there is no newline before this comment...)
c <- 3
d <- 4
@ 
```

不太吸引人，但你至少有类似于空白行的东西，并保留你的块。

（2）如果您不关心将块保持在一起，则可以将其分成两个块：

```
\documentclass{article}

\usepackage{fancyvrb}
\usepackage{Sweave}

\begin{document}

<<setup, eval=FALSE>>=
## some comment 
a <- 1
b <- 2 
@

<<eval=FALSE>>=
## some comment (there is no newline before this comment...)
c <- 3
d <- 4
@
\end{document} 
```

这会给你你喜欢的外观，代价是失去你的块的结构。

希望这会有所帮助，雷纳

# c# - 如何在 Web 应用程序中跟踪应用程序池回收？

> ID：10190660
> 
> 赞同：1
> 
> 时间：2012-04-17T11:50:07.103
> 
> 标签：c#, iis-7

一旦应用程序池被重置/回收，是否有任何 global.asax 事件被触发？在这种情况下，待处理的请求会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:54:32.753

事情按以下顺序发生：

1.  应用程序的一个新副本被启动，所有*新*请求都被路由到它。
2.  旧副本完成处理在回收开始之前正在进行的所有请求。
3.  旧副本关闭

您应该在正在关闭的 appdomain 的回收期间的某个时间点收到 Application_End 事件。

# java - 使用数据预填充 jQuery Autocomplete

> ID：10190662
> 
> 赞同：0
> 
> 时间：2012-04-17T11:50:09.807
> 
> 标签：java, javascript, jquery

使用默认功能：

```
<script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
</script>

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags" />
</div> 
```

我想知道如何`availabletags`使用 Java 中的 String 数组预先填充，而不是手动输入每个标签？所以，当我打字时，它会建议一个清单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:07:59.683

在选择的模板文件（JSP、Freemarker 等）中编写 javascript。

或者，如果您想将其余的 javascript 保留在外部文件中，则只需在模板文件中写入 availableTags 变量。一定要正确命名它，不要污染全局命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:02:43.510

我相信这个概念是您应该构建数组并将其回显/打印到您的标记中`availableTags`（或定义它的位置）。然后当页面构建时，javascript应该有它需要的东西。

查看源代码以了解它是否成功。

```
var availableTags = [ /* output a comma-separated and quoted list */ ]; 
```

抱歉，我不确定语法，但我相信这是您应该采用的方法。

**编辑：**这个[匿名的人](http://forums.devshed.com/javascript-development-115/how-to-assign-java-arraylist-to-javascript-array-693444.html)认为你可能需要使用 javascript`eval()`来使它对 javascript 更友好。（但在下面的评论中不鼓励）

**编辑：**这是[另一个 Stack Overflow 帖子](https://stackoverflow.com/questions/516565/how-to-transfer-java-array-to-javascript-array-using-jsp)，提出了一个类似的问题，可能会对您有所帮助。还有[一个](https://stackoverflow.com/questions/9693130/push-java-array-in-javascript-array)。

[这](http://www.webdeveloper.com/forum/archive/index.php/t-57329.html)似乎也可以帮助您。

# ios - NSMutablearray 从最后一个元素而不是第一个元素开始打印

> ID：10190664
> 
> 赞同：0
> 
> 时间：2012-04-17T11:50:32.663
> 
> 标签：ios, arrays, for-loop, nsmutablearray, objective-c-blocks

我正在使用这个方法来初始化一个 nsmutablearray

```
- (void)getAllContacts
{
Contact *contact = [[Contact alloc] init];
self.allContacts = [[NSMutableArray alloc] init];

int i=0;

for (i=0; i<5; i++) 
{
    contact.nome = [[NSString alloc] initWithFormat:@"Bruno %d", i];    
    [self.allContacts insertObject:contact atIndex:i];
    }
} 
```

很简单！但是之后，我做了一个 for 来打印它的元素，例如：

```
for (int i=0; i<[self.allContacts count]; i++)
{
    Contact *c = [self.allContacts objectAtIndex:i];
    NSLog(@"i=%d\nNome:%@", i, c.nome);
} 
```

它会向我显示最后一个元素“Bruno 4”的 5 次。它不是从 0 开始并递增。我应该怎么做才能从0开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:52:30.207

试试这个：

```
 - (void)getAllContacts
    {
    Contact *contact = nil;
    self.allContacts = [NSMutableArray array];

    int i=0;

    for (i=0; i<5; i++) 
    {
        contact = [Contact new];
        contact.nome = [NSString stringWithFormat:@"Bruno %d", i];    
        [self.allContacts addObject:contact];
        [contact release]
        }
    } 
```

请看一下：[内存管理](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T11:53:01.520

因为您在数组中插入了 5 次相同的对象。您需要`Contact`在每次执行`for`循环时创建一个新对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:02:32.230

您正在做的是实际上在数组中添加了一个 Contact 类的实例 5 次，并且只更改了`nome`属性。这是执行此操作的正确方法：

```
- (void)getAllContacts
{
     //alloc init returns a retained object and self.allContacts calls the setter, which    additionally retains it.
    self.allContacts = [[[NSMutableArray alloc] init] autorelease]; 
    int i=0;

    for (i=0; i<5; i++) 
    {
        //Create the Contact object
        Contact *contact = [[Contact alloc] init];
        //Set the nome property
        contact.nome = [NSString stringWithFormat:@"Bruno %d", i];
        //Add the instance to the array
        [self.allContacts addObject:contact];
        //Release the instance because the array retains it and you're not responsible for its memory management anymore.
        [contact release];
    }
} 
```

# php - PHP：给出 404 不起作用

> ID：10190665
> 
> 赞同：0
> 
> 时间：2012-04-17T11:50:32.847
> 
> 标签：php, http-headers, http-status-code-404

如果找不到请求的页面，我将使用以下代码显示 404：

```
if($page_exists)
{
    //...
}
else
{
    header('HTTP/1.0 404 Not Found', true, 404);

    $ui->title = '404 Not Found';

    $o .= '<h1>Not found!</h1>' . "\n";
    $o .= '<p>The requested page could not be found.</p>' . "\n";
}

echo $ui->top();
echo $o;
echo $ui->bottom(); 
```

但由于某种原因，我从来没有得到我的 404 状态码——它给出的是 200。我已经检查并仔细检查了 header() 之前没有实际的输出，当我检查 PHP 错误代码时，除了一些通知之外什么都没有。我还测试了一个位置标题，但它也不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:55:29.023

正如 Jared 所说，对于 FastCGI，您必须使用另一种形式

`header("Status: 404 Not Found");`

我会从那里开始。

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:16:26.790

好的，问题解决了 - 出于某种原因，文件与 BOM 一起保存。

# c# - 加载位图需要很长时间

> ID：10190668
> 
> 赞同：0
> 
> 时间：2012-04-17T11:50:38.523
> 
> 标签：c#, .net, performance, graphics, bitmap

我有一张正在调整大小、drawString 和`FillEllipse`.
有很多点（FillEllipse）需要显示`n`位图，所以我使用`for`循环。
这是代码：

```
using (System.Drawing.Graphics Gfx = System.Drawing.Graphics.FromImage(OrginalBitmap))
{
      Gfx.SmoothingMode = SmoothingMode.HighQuality;
      Gfx.CompositingQuality = CompositingQuality.HighQuality;
      Gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;
      Gfx.PixelOffsetMode = PixelOffsetMode.HighQuality;

     foreach (var points in SelectedPoints)
      {
          Gfx.FillEllipse(
              Brushes.Yellow,new Rectangle(points.X , points.Y, 8, 8));
          Gfx.DrawString("M", new Font("Arial",8), 
              Brushes.Yellow, points.X, points.Y); 
          //points.X and points.X are the points that needs to be drawn on bitmap(particular location).
      }      
  }
((IDisposable)OrginalBitmap).Dispose; 
```

如果 SelectedPoints 中有很多点，则加载绘制的位图需要很长时间。性能急剧下降，加载占用了太多内存。请让我知道该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:11:04.020

即使在最高质量设置下，仅绘制 200 点也不会导致任何性能问题。使用您的代码，我可以在一秒钟内在我的系统上绘制大约 40000 个点。

假设 SelectedPoints 是`Point[]`或`List<Point>`其他有效类型，我会怀疑这个`FontFacade.Large`电话。每次都会创建一个新的 Font 实例吗？

编辑：

在我的系统上使用 200 点运行修改后的代码`new Font("Arial", 8)`大约需要 20 毫秒，因此必须有其他原因导致您的问题。在您的系统上运行代码需要多长时间？

```
Stopwatch timer = Stopwatch.StartNew();
[...]
Debug.WriteLine(timer.ElapsedMilliseconds); 
```

完成后应该处理创建的字体对象，我还将它移到循环之外，以便只创建一个实例，尽管这似乎不是问题的根源。

```
using(Font font = new Font("Arial", 8))
{
  foreach(var point = SelectedPoints)
  {
    [...]
  }
} 
```

OriginalBitmap 是什么尺寸，PixelFormat 是什么？

SelectedPoints 是什么类型的？

# ruby-on-rails - 如何通过用户选择开始时间、时区、结束时间来实施请勿打扰 (DND)

> ID：10190671
> 
> 赞同：0
> 
> 时间：2012-04-17T11:50:49.927
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, time, drag-and-drop

我有一个在 Rails 服务器上运行的 cron 作业。当某些事件触发时，此 rake 任务向订阅者发出呼叫/短信。现在，当此事件在用户选择的免打扰时间之间触发时，我想将其存储在队列中。如何检查时间是否在用户选择的免打扰时间之间。

[我尝试在指定范围之间](https://stackoverflow.com/questions/9738781/time-between-specified-range)的时间中回答提及

但是当用户选择免打扰时间为 6 到 9 时它会失败

```
Note:- 1] Every user has its own timezone.. Which I have in the database
2] Every user can select his/her own DND Time. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:19:43.237

我认为以下将起作用如果

```
start_hour = Hour when DND Time Starts
end_hour = Hour when DND Time Ends
current hour = Hour of the current time 
```

然后

```
if start_hour > end_hour
  current hour > start_hour || current hour < end_hour
else
  current hour > start_hour && current hour < end_hour
end 
```

或者

```
start_hour > end_hour ?  (current hour > start_hour || current hour < end_hour) : 
                         (current hour > start_hour && current hour < end_hour) 
```

# video-streaming - 通过 Skype 捕获视频或在网络中打开数据包

> ID：10190674
> 
> 赞同：0
> 
> 时间：2012-04-17T11:51:05.860
> 
> 标签：video-streaming, p2p, wireshark, skype, networkstream

我有一个问题，假设两个人通过 Skype 进行实时视频通话。第三人`(may be ISP)`是否可以监控视频通话？虽然 Skype 视频通话是 P2P。

1.  此外，我想查看将我连接到被调用方的对等计算机的链。tracert 只允许我检查到指定目的地的路线。
2.  我可以使用 Wireshark 或任何其他软件在网络中打开一个数据包吗？假设两个人正在进行实时视频通话，我可以捕获两个人之间的数据包并解密它们以查看原始消息吗？当我们花时间在互联网上时，这些事情真的很重要任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T22:33:53.473

即使信息通过多个节点，密码学仍然有效。因此，您的问题的答案是否定的，因为知道 Skype 会加密通信。

是的，总是可以捕获数据包，但话又说回来，如果您没有密钥，您将无法解密通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:53:31.367

我认为这是不可能的，因为每个软件 Skype 等都有自己的安全算法，如果这是可能的，那么人们很容易去捕获其他人的信息。阅读 Skype 架构以获取更多信息

# c# - 使用 Microsoft Chart Control 创建图表

> ID：10190675
> 
> 赞同：3
> 
> 时间：2012-04-17T11:51:18.620
> 
> 标签：c#, asp.net, asp.net-mvc, charts, mschart

我从 Microsoft 下载了示例，以便使用 Microsoft Chart Control 在我的 MVC 应用程序中创建图表。

问题是我发现在 MVC 中使用图表控件的所有示例都使用图像并且与 Google Charts、HighCharts 等相比缺乏交互性。

我错过了什么还是是这种情况？我可以使用 ASP.NET MVC 和 Microsoft Chart Controls 创建交互式图表吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:45:14.510

您实际上可以使用 MVC 3 和 Microsoft 图表控件创建交互性。我正在这样做并且它正在工作。

要添加交互性，您需要将 imageMap 与图表图像一起呈现。别担心，这并不难。

请参考这个[链接](http://geekswithblogs.net/DougLampe/archive/2011/01/23/charts-in-asp.net-mvc-2-with-drill-down.aspx)

在视图中，使用 HTMLAction 而不是 html.RenderAction

```
 <img src="<%= Url.Action("Chart", new { id = Model.Id }) %>" usemap="#MyMap" />
 @Html.Action("ChartMap", new { id = Model.Id, name = "MyMap" }); 
```

如果您有任何困惑，请告诉我。

如果它解决了您的查询，请不要忘记标记为答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:35:59.500

根据我的理解（和使用），MS Charts 最终会生成图像。所以不行。例如，您不会拥有与 highcharts 相同的交互性。您可能进行的交互是添加有助于操作数据和重新生成图表的控件（复选框、下拉菜单等）。有些人还使用图像映射，但如果您正在寻找交互性/花哨的动画，那么我想不适合您。

# c++ - 绑定到函数参数的引用会延长该临时变量的生命周期吗？

> ID：10190677
> 
> 赞同：10
> 
> 时间：2012-04-17T11:51:21.463
> 
> 标签：c++, reference, object-lifetime, function-parameter

我有这个代码（简化版）：

```
const int& function( const int& param )
{
     return param;
}

const int& reference = function( 10 );
//use reference 
```

我不能完全确定 C++03 标准 $12.2/5 措辞的程度

> 引用绑定到的临时对象或作为临时对象绑定的子对象的完整对象的临时对象在引用的生命周期内持续存在...

在这里适用。

`reference`上面代码中的变量是有效的还是悬空的？调用代码中的引用会延长作为参数传递的临时变量的生命周期吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T15:17:11.143

*完整表达式*是不是另一个表达式的子表达式的表达式。在这种情况下，包含调用的完整表达式`function( 10 )`是赋值表达式：

```
const int& reference = function( 10 ); 
```

为了`function`使用参数进行调用`10`，为临时整数对象创建了一个临时 const-reference 对象`10`。临时整数和临时 const-reference 的生命周期通过赋值扩展，因此尽管赋值表达式有效，但尝试使用所引用的整数`reference`是未定义的行为，因为`reference`不再引用活动对象。

我认为 C++11 标准澄清了这种情况：

> 引用绑定到的临时对象或作为引用绑定到的子对象的完整对象的临时对象在引用的生命周期内持续存在，但以下情况除外：
> 
> ...
> 
> — 在函数调用 (5.2.2) 中对引用参数的临时绑定一直持续到包含调用的完整表达式完成为止。

“引用绑定到的临时......在引用的生命周期内持续存在”。在这种情况下，引用的生命周期在赋值表达式的末尾结束，临时整数的生命周期也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:55:27.077

这将编译，但您最终会得到一个悬空引用。`param`返回后被释放`function`。

1.  函数是通过引用临时的匿名对象来调用的
2.  函数返回引用
3.  现在该函数已返回临时参数已释放
4.  由于对象被破坏，引用现在悬空

如果您将其设为非常量，那么它就不会编译，因为您无法将非常量引用传递给匿名对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T14:51:43.553

从 C++11 的观点来看，函数返回的引用*不是*临时的：

**12.12.1 类类型的临时对象在各种上下文中创建：将引用绑定到纯右值 (8.5.3)、返回纯右值 (6.6.3)、创建纯右值的转换 (4.1、5.2.9、5.2.11 , 5.4)、抛出异常 (15.1)、进入处理程序 (15.3) 以及在某些初始化中 (8.5)。**

返回引用的函数不会返回纯右值（“纯右值”），因此它不是临时的。这似乎很自然：编译器无法管理引用对象的生命周期，这是程序员的责任

因此，编译器不为 const int& 引用提供任何提升时间保证，因为它不受临时限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T11:55:56.903

这部分很重要

> 引用绑定的临时对象

在这种情况下，参数绑定到临时的，并在调用后被销毁。

您不能通过传递引用来进一步延长生命周期。

# android - 对话框中的事件处理

> ID：10190678
> 
> 赞同：0
> 
> 时间：2012-04-17T11:51:23.077
> 
> 标签：android

我正在单击按钮创建一个对话框。为此，我创建了一个扩展 Dialog 的类。我为每个文本视图创建了一个 XML 文件，其中包含该 XML 文件中的选项（都是文本视图 [7 文本视图]）我定义了一个标签 android:onClick="imageProcessingHandler"。当我单击活动中的按钮时，它会打开一个很好的对话框。现在，当我单击任何文本视图时，我收到一个错误，即未定义函数。我在类中将此函数定义为扩展 Dialog 的 public。有人可以帮忙吗？

如果我想访问 Imageview，还有一件事；在扩展对话框的类中，从打开对话框的活动中，我该怎么做呢？我正在尝试执行以下操作： ImageView imgView = (ImageView) findViewById(R.id.fullphoto); 但在这种情况下 imgView 包含空值:(

代码：

从按钮上的活动“MyActivity”单击我正在创建一个对象：

```
ShowOptionsInDialog displayDialog = new ShowOptionsInDialog(this, passedData);
displayDialog.show(); 
```

ShowOptionsInDialog 类：

```
public class ShowOptionsInDialog extends Dialog{

private Context context;

public ShowOptionsInDialog(Context context, ArrayList<String> data) {
    super(context);
    this.context = (Context) context;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.imageprocessingoptions);
    setTitle("Try options");
}

public void imageProcessingHandler(View view){
ImageView photo = (ImageView) findViewById(R.id.fullphoto);
} 
```

图像处理选项.XML

```
<TextView
    android:id="@+id/invertColorText"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:cursorVisible="false"
    android:paddingLeft="10dp"
    android:paddingBottom="5dp"
    android:gravity="bottom"
    android:text="Invert Color"
    android:textSize="15dp"
    android:clickable="true"
    android:onClick="imageProcessingHandler" /> 
```

活动代码：

```
public class PhotoHandler extends Activity {
private Bundle intentExtra;
private String photoID;

private CommomObject _commonObject;
private Facebook facebook;

private ImageView photo;
private DownloadImageTask downlaodImageTask;

private ProgressDialog progDialog;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.photohandler);

    intentExtra = getIntent().getExtras();
    photoID = intentExtra.getString("PHOTO_ID");

    displayPhoto();
}

private void displayPhoto() {
    _commonObject = CommomObject.getInstance();
    facebook = _commonObject.getFacebookInstance();
    String imageURL = "https://graph.facebook.com/"+photoID+"/picture?type=normal&access_token="+facebook.getAccessToken();
    photo = (ImageView) findViewById(R.id.fullphoto);
    photo.setTag(imageURL);
    photo.setScaleType(ScaleType.FIT_CENTER);
    downlaodImageTask = new DownloadImageTask();
    progDialog = new ProgressDialog(this);
    progDialog.setMessage("Fetching photo...");
    progDialog.show();
    downlaodImageTask.execute(photo);
}

public class DownloadImageTask extends AsyncTask<ImageView, Void, Bitmap>{
    ImageView imageView = null;

    @Override
    protected Bitmap doInBackground(ImageView... imageViews){
        this.imageView = imageViews[0];
        return downloadImage((String)imageView.getTag());
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        imageView.setImageBitmap(result);
    }

    private Bitmap downloadImage(String url) {

        Bitmap photo = null;

        try {

            URL u = new URL(url);
            URLConnection c = u.openConnection();
            c.connect();
            BufferedInputStream stream = new BufferedInputStream(c.getInputStream());
            photo = BitmapFactory.decodeStream(stream);
            stream.close();

        } catch (MalformedURLException e) {
            Log.e("PhotoHandler", "malformed url: " + url);
        } catch (IOException e) {
            Log.e("PhotoHandler", "An error has occurred downloading the image: " + url);
        }
        progDialog.dismiss();
        return photo;
    }
}

public void footerHandler(View view){
    switch(view.getId()){
    case R.id.useButton:
        break;
    case R.id.saveButton:
        break;
    case R.id.shareButton:
        break;
    case R.id.photoEffect:
        ArrayList<String> passedData = new ArrayList<String>();
        ShowOptionsInDialog displayDialog = new ShowOptionsInDialog(this, passedData);
        displayDialog.show();
        break;
    }
}

public void imageProcessingHandler(View view){
    switch(view.getId()){
    case R.id.invertColorText:
        Bitmap newBitmap = ImageProcessing.doInvert(photo.getDrawingCache());
        photo.setImageBitmap(newBitmap);
        break;
    case R.id.greyScaleText:
        break;
    case R.id.gammaCorrectionText:
        break;
    case R.id.sepiaEffectText:
        break;
    case R.id.embossingEffectText:
        break;
    case R.id.reflectionEffectText:
        break;
    case R.id.contrastText:
        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:54:30.957

我在我的代码中实现 onCliclk 监听器为：

```
TextView invert = (TextView) findViewById(R.id.invertColorText);
invert.setOnClickListener(new View.OnClickListener() {

@Override
public void onClick(View v) {
 // do your work here
}); 
```

为了在 Dialog 上获取 ImageView，我从活动中将它传递给 Dailog。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:02:23.307

1 - 你需要把你`public void abcFunction(View view)`的 Dialog 课。

2 - 使用`yourdialog.findViewById(R.id.fullphoto);`

# sql - SQL 多个计数，按月分组

> ID：10190684
> 
> 赞同：0
> 
> 时间：2012-04-17T11:51:41.487
> 
> 标签：sql, db2

我有表：

```
STATUS  DEFECT   DATE

CLOSED  IP       01.01.2012 
CLOSED  TV       03.03.2012
CLOSED  ADSL     05.05.2012
CLOSED  ADSL     11.01.2012 
CLOSED  TV       15.01.2012
NEW     TV         
NEW     TV 
```

我想按月份对每个特定缺陷的计数进行分组。被认为是 CLOSED 的状态

结果表我想成为：

```
MONTH     TV  ADSL  IP
January   1   1     1
March     1   0     0
May       0   1     0 
```

我正在使用 db2 数据库，所以显示月份的部分是：

```
select case month(timestamp_iso(DATE))
        when 1 then 'January'
        when 2 then 'February'
        when 3 then 'March'
        when 4 then 'April'
        when 5 then 'May'
        when 6 then 'Jun'
        when 7 then 'July'
        when 8 then 'August'
        when 9 then 'September' 
        when 10 then 'October'
        when 11 then 'November'
        when 12 then 'December'
    end as Month

from TABLE
where  STATUS='CLOSED'
group by month(timestamp_iso(DATE))
order by month(timestamp_iso(DATE)) 
```

所以我只需要添加这部分来计数。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:00:12.363

您可以使用另一种将计数限制为一个类别中的缺陷的 case 语句来计算缺陷类别：

```
select case month(timestamp_iso(DATE))
        when 1 then 'January'
        when 2 then 'February'
        when 3 then 'March'
        when 4 then 'April'
        when 5 then 'May'
        when 6 then 'Jun'
        when 7 then 'July'
        when 8 then 'August'
        when 9 then 'September' 
        when 10 then 'October'
        when 11 then 'November'
        when 12 then 'December'
    end as Month,
    count (case when defect = 'TV' then 1 end) TV,
    count (case when defect = 'ADSL' then 1 end) ADSL,
    count (case when defect = 'IP' then 1 end) IP
from TABLE
where  STATUS='CLOSED'
group by month(timestamp_iso(DATE))
order by month(timestamp_iso(DATE)) 
```

# objective-c - iOS - 为圆角矩形创建 UIView 子类

> ID：10190685
> 
> 赞同：11
> 
> 时间：2012-04-17T11:51:43.427
> 
> 标签：objective-c, ios, uiview, storyboard, subclass

我正在尝试为带有圆角的矩形创建和使用一个非常简单的 UIView 子类。我创建了一个新类，如下所示：

圆角矩形.h

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface RoundedRect : UIView
@end 
```

圆角矩形

```
#import "RoundedRect.h"

@implementation RoundedRect

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [[self layer] setCornerRadius:10.0f];
        [[self layer] setMasksToBounds:YES];
    }
    return self;
}
@end 
```

我正在使用带有故事板的 iOS 5.1，并将 IB 检查器窗口中的自定义类属性设置为“RoundedRect”，但是当我运行应用程序时，矩形仍然有方角。我错过了什么明显的东西吗？

谢谢乔纳森

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-30T02:16:17.293

在 iOS 5 及更高版本中，绝对不需要子类化 - 您可以从 Interface Builder 中完成所有操作。

1.  选择要修改的 UIView。
2.  转到身份检查器。
3.  在“用户定义和运行时属性”中，在关键路径中添加“layer.cornerRadius”，类型应为“数字”以及您需要的任何设置。
4.  还将“layer.masksToBounds”添加为布尔值。
5.  完毕！没有子类化，全部在 IB 中。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-17T12:03:32.417

其他人已经回答了这个问题，但我会像这样重构它，以便在笔尖和代码中使用

```
#import "RoundedRect.h"

@implementation RoundedRect

- (id)initWithFrame:(CGRect)frame;
{
    self = [super initWithFrame:frame];
    if (self) {
        [self commonInit];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder;
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self commonInit];
    }
    return self;
}

- (void)commonInit;
{
    CALayer *layer = self.layer;
    layer.cornerRadius  = 10.0f;
    layer.masksToBounds = YES;
}

@end 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-17T11:55:26.267

`initWithFrame`当视图从 XIB 文件实例化时，不会调用该方法。相反，`initWithCoder:`会调用初始化程序，因此您需要在此方法中执行相同的初始化。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-17T11:55:52.267

对于从 NIB 文件加载的视图，指定的初始化程序是`initWithCoder:`. `initWithFame:`在这种情况下不调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-18T03:23:04.747

如果 UIView 从 Nib 加载，你应该使用方法

```
- (void)awakeFromNib 
```

# javascript - 两个几乎相等的 jQuery 函数；一个适用于 IE，一个不适用

> ID：10190686
> 
> 赞同：1
> 
> 时间：2012-04-17T11:51:45.530
> 
> 标签：javascript, jquery

[我在我的主页](http://www.umiwebservice.com/)中包含了两个几乎相同的 jQuery 函数，它们应该会增加或减少字体大小。

它们都可以在 FireFox 上正常工作，但 increaseFont 功能在 Internet Explorer 上不起作用（它实际上只工作一次，但不是多次）。

通常我会说我犯了一个错误，但由于它适用于 FireFox，我猜它与 Internet Explorer 相关。当然，我做了通常的研究，但没有发现任何相关的东西。

我的问题是：问题是什么，是否有解决方案或解决方法？

这是我使用的代码：

```
jQuery(document).ready(function() {
    // Reset Font Size 
    var originalFontSize = jQuery('html').css('font-size');
    jQuery(".resetFont").click(function() {
        jQuery('div#mainContainer').css('font-size', originalFontSize);
    });
    // Increase Font Size
    jQuery(".increaseFont").click(function() {
        var currentFontSize = jQuery('div#mainContainer').css('font-size');
        var currentFontSizeNum = parseFloat(currentFontSize, 10);
        var newFontSize = currentFontSizeNum * 1.05;
        jQuery('div#mainContainer').css('font-size', newFontSize);
        return false;
    });
    // Decrease Font Size
    jQuery(".decreaseFont").click(function() {
        var currentFontSize = jQuery('div#mainContainer').css('font-size');
        var currentFontSizeNum = parseFloat(currentFontSize, 10);
        var newFontSize = currentFontSizeNum * 0.95;
        jQuery('div#mainContainer').css('font-size', newFontSize);
        return false;
    });
});​ 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:11:09.940

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var originalFontSize = $('html').css('font-size');

            $('.resetFont').live('click', function () {
                $('div#mainContainer').css('font-size', originalFontSize);
            });

            $('.increaseFont').live('click', function () {
                $('div#mainContainer').css('font-size', (parseFloat($('div#mainContainer').css('font-size'), 10) * 1.05));
            });

            $('.decreaseFont').live('click', function () {
                $('div#mainContainer').css('font-size', (parseFloat($('div#mainContainer').css('font-size'), 10) * 0.95));
            });
        });
    </script>
    <style type="text/css">
        a
        {
            font-size: larger;
            font-weight: bolder;
            color: Green;
            margin: 0 10px;
        }
    </style>
</head>
<body>   
    <div>
        <a class="decreaseFont">A-</a> <a class="resetFont">A</a> <a class="increaseFont">A+</a>
    </div>
    <div id="mainContainer">
        Hi.. How r u? Testing... Teasting...
    </div>
</body>
</html> 
```

# ruby - Ruby rails - ajax 定期更新

> ID：10190691
> 
> 赞同：0
> 
> 时间：2012-04-17T11:52:01.097
> 
> 标签：ruby, ruby-on-rails-3

我试图每 5 秒获取一次最近项目的列表。该列表必须在该控制器下的每个视图上呈现。在 rails3 中完成它的最佳方法是什么？类似股票的东西。任何有一个很好的解决方案/例子吗？

所以我正在尝试我在论坛上找到的这三个 javascript。并且它们都不会向服务器生成任何请求。知道为什么吗？

```
$(document).ready(
  function(){
    setInterval(function(){
      $('#item_list').load('/item/item_list');
    }, 3000);
  });

$(document).ready(function worker() {
  $.ajax({
    url: '/item/item_list',
    success: function(data) {
      $('#item_list').html(data);
    },
    complete: function() {
      setTimeout(worker, 500);
    }
})();

function startTimer()
{
   new Ajax.PeriodicalUpdater('#item_list', '/item/item_list', {
     method: 'get', frequency: 3, decay: 2
   });
}();
$(document).ready(startTimer();); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:00:06.040

我有类似这样的答案，请查看此 URL。

[使用 Rails 以实时刻度格式在页面上显示当前时间](https://stackoverflow.com/questions/9361052/show-current-time-on-page-in-real-ticks-format-using-rails/9411835#9411835)

# multithreading - 多线程程序的输出显示不正确

> ID：10190694
> 
> 赞同：0
> 
> 时间：2012-04-17T11:52:18.670
> 
> 标签：multithreading, delphi, delphi-xe

我写了一个程序，一直被网络困扰。它用于多线程。问题是线程输出。该计划是混合的。并且输出无法正确显示。

我编写了两个示例程序，但都不能正常工作。

**程序 1**

```
unit Unit1;

interface

uses
  Windows, Classes, IdBaseComponent, IdComponent, IdTCPConnection, IdTCPClient,
  IdRawBase,IdRawClient, IdIcmpClient, Messages, SysUtils, Variants, Graphics, Controls, Forms,
  Dialogs,StdCtrls,ExtCtrls;

type
  TPSThread=class(TThread)
  protected
    procedure execute; override;
end;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Edit1: TEdit;
    Edit2: TEdit;
    Edit3: TEdit;
    Edit4: TEdit;
    Edit5: TEdit;
    Memo1: TMemo;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
  Procedure WndProc(var Message: TMessage); Override;
    { Public declarations }
  end;

var
  Form1: TForm1;
  PortG:Integer;
  HostG:string;
  FormG:TForm;
  WM_Msg_PS:DWORD;
implementation

{$R *.dfm}

procedure TPSThread.execute;
var
  IcmpClient:TIdIcmpClient;
  TCPClient:TIdTCPClient;
  HostT:string;
  PortT:Integer;
  ActiveServer:Boolean;
begin
  inherited;
  HostT:=HostG;
  PortT:=PortG;

  IcmpClient:= TIdIcmpClient.Create();
  try
    with IcmpClient do
    begin
      ReceiveTimeout := 5000;
      Protocol := 1;
      ProtocolIPv6 := 0;
      PacketSize := 1024;
      Host:=HostT;
    end;
    IcmpClient.Ping(HostT,Random(1024));
    if IcmpClient.ReplyStatus.BytesReceived=0 then
    begin
      SendMessage(FormG.Handle, WM_Msg_PS, Integer(HostT+'*'+IntToStr(1)+'#'), 0);
      ActiveServer:=False;
    end
    else
      ActiveServer:=True;
  finally
    IcmpClient.Free;
  end;

  if ActiveServer then
  begin
    TCPClient:=TIdTCPClient.Create(nil);
    try
      with TCPClient do
      begin
        Host:=HostT;
        Port:=PortT;
        try
          Connect;
          try
            IOHandler.WriteLn('salam');
            SendMessage(FormG.Handle, WM_Msg_PS, Integer(HostT+'*'+IntToStr(2)+'#'), 0);
          finally
            Disconnect;
          end;
        except
          SendMessage(FormG.Handle, WM_Msg_PS, Integer(HostT+'*'+IntToStr(3)+'#'), 0);
        end;
      end;
    finally
      TCPClient.Free;
    end;
  end;
end;

procedure PS_System(FormNameForMessage:TForm;HostP:string;PortP:Integer);
var
  PSThread:TPSThread;
begin
  HostG:=HostP;
  PortG:=PortP;
  FormG:=FormNameForMessage;
  PSThread:=TPSThread.Create(false);
  PSThread.FreeOnTerminate:=true;
  PSThread.Resume;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  Memo1.Clear;
  PS_System(form1,Edit1.Text,4321);
  PS_System(form1,Edit2.Text,4321);
  PS_System(form1,Edit3.Text,4321);
  PS_System(form1,Edit4.Text,4321);
  PS_System(form1,Edit5.Text,4321);
end;

procedure TForm1.WndProc(var Message: TMessage);
var Id:byte;
    Ip:string;
begin
  if Message.Msg= WM_Msg_PS then
  begin
    Ip:=copy(String(Message.WParam),1,pos('*',String(Message.WParam))-1);
    id:=strtoint(copy(String(Message.WParam),pos('*',String(Message.WParam))+1,(pos('#',String(Message.WParam))-pos('*',String(Message.WParam))-1)));
    case id of
      1:
        begin
          Memo1.Lines.Add(' Server '+ip+' Is inactive ');
          //ShowMessage(' Server '+ip+' Is inactive ');
        end;
      2:
        begin
          Memo1.Lines.Add(' Message was sent successfully to server '+ip);
          //ShowMessage(' Message was sent successfully to server '+ip);
        end;
      3:
        begin
          Memo1.Lines.Add(' Send message to the server fails '+ip);
          //ShowMessage(' Send message to the server fails '+ip);
        end;
    end;
  end;
  inherited;
end;

end. 
```

**节目二**

```
unit Unit1;

interface

uses
  Windows, Classes, IdBaseComponent, IdComponent, IdTCPConnection, IdTCPClient,
  IdRawBase,IdRawClient, IdIcmpClient, Messages, SysUtils, Variants, Graphics, Controls, Forms,
  Dialogs,StdCtrls,ExtCtrls;

type
  TPSThread=class(TThread)
  protected
    procedure execute; override;
end;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Edit1: TEdit;
    Edit2: TEdit;
    Edit3: TEdit;
    Edit4: TEdit;
    Edit5: TEdit;
    Memo1: TMemo;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  PortG:Integer;
  HostG:string;
  WM_Msg_PS:DWORD;
implementation

{$R *.dfm}
procedure IsInactiveServer(M:string);
begin
  Form1.Memo1.Lines.Add(' Server '+M+' Is inactive ');
  //ShowMessage(' Server '+M+' Is inactive ');
end;

procedure SentSuccessfullyToServer(M:string);
begin
   Form1.Memo1.Lines.Add(' Message was sent successfully to server '+M);
   //ShowMessage(' Message was sent successfully to server '+M);
end;

procedure SendMessageFails(M:string);
begin
  Form1.Memo1.Lines.Add(' Send message to the server fails '+M);
  //ShowMessage(' Send message to the server fails '+M);
end;

procedure TPSThread.execute;
var
  IcmpClient:TIdIcmpClient;
  TCPClient:TIdTCPClient;
  HostT:string;
  PortT:Integer;
  ActiveServer:Boolean;
begin
  inherited;
  HostT:=HostG;
  PortT:=PortG;

  IcmpClient:= TIdIcmpClient.Create();
  try
    with IcmpClient do
    begin
      ReceiveTimeout := 5000;
      Protocol := 1;
      ProtocolIPv6 := 0;
      PacketSize := 1024;
      Host:=HostT;
    end;
    IcmpClient.Ping(HostT,Random(1024));
    if IcmpClient.ReplyStatus.BytesReceived=0 then
    begin
      IsInactiveServer(HostT);
      ActiveServer:=False;
    end
    else
      ActiveServer:=True;
  finally
    IcmpClient.Free;
  end;

  if ActiveServer then
  begin
    TCPClient:=TIdTCPClient.Create(nil);
    try
      with TCPClient do
      begin
        Host:=HostT;
        Port:=PortT;
        try
          Connect;
          try
            IOHandler.WriteLn('salam');
            SentSuccessfullyToServer(HostT);
          finally
            Disconnect;
          end;
        except
          SendMessageFails(HostT);
        end;
      end;
    finally
      TCPClient.Free;
    end;
  end;
end;

procedure PS_System(HostP:string;PortP:Integer);
var
  PSThread:TPSThread;
begin
  HostG:=HostP;
  PortG:=PortP;
  PSThread:=TPSThread.Create(false);
  PSThread.FreeOnTerminate:=true;
  PSThread.Resume;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  Memo1.Clear;
  PS_System(Edit1.Text,4321);
  PS_System(Edit2.Text,4321);
  PS_System(Edit3.Text,4321);
  PS_System(Edit4.Text,4321);
  PS_System(Edit5.Text,4321);
end;

end. 
```

* * *

谢谢 但是我的问题不是ping 我的问题是发送消息。它们还会干扰线程发送消息。如果有零件，我会删除我的 ping。还有一个额外的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:32:59.287

这能编译吗？TThread.Execute() 是抽象的 - 您不能在后代“TPSThread.execute”中调用“继承”。你没有从编译器得到错误吗？

将“CreateSuspended”设置为 false 创建 TPSThread 意味着线程可以“立即”运行。创建调用后设置字段可能无效。

不断地创建和销毁线程是浪费、低效且容易出错的。努力不去做。

如果您希望您的四个“PS_System”调用在不同的线程中执行网络 ping 操作（以免阻塞主线程），但按顺序，您应该将输出请求排队到一个正在等待的线程一个生产者-消费者队列来执行它们。

由于 ICMP 没有套接字层，因此在单独的线程上并行执行 ICMP 操作可能会出现问题。PING 回复可能不会返回到发出请求的同一线程。有一种解决方法——ping 有效负载可能包含请求线程 ID，并且 ICMP 组件中的“路由”层可以确定哪个等待线程做好准备。我不知道 Indy ICMP 是否已经实现了这一点。

从线程调用的帮助程序直接将文本添加到 GUI 线程。你不能那样做——你必须正确地发出信号。

多线程 PING 示例，（TCP 连接显然失败 - 我没有服务器）：

```
unit foPinger;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Buttons, ExtCtrls, SyncObjs,Contnrs, IdBaseComponent,
  IdComponent, IdRawBase, IdRawClient, IdIcmpClient, IdTCPConnection,
  IdTCPClient;

type

EthreadRequest=(EtcDoPing,EtcReport,EtcError,EtcSuicide);

TpingRequest=class(TObject)  // a thread comms object
  command:EthreadRequest;
  hostName:string;
  port:string;
  reportText:string;
  errorMess:string;
end;

pObject=^Tobject;

TsemaphoreMailbox=class(TobjectQueue)  // Producer-consumer queue
private
  countSema:Thandle;
protected
  access:TcriticalSection;
public
  property semaHandle:Thandle read countSema;
  constructor create; virtual;
  procedure push(aObject:Tobject); virtual;
  function pop(pResObject:pObject;timeout:DWORD):boolean;  virtual;
  function peek(pResObject:pObject):boolean;  virtual;
  destructor destroy; override;
end;

TPSThread=class(TThread)   // The thread to try the network comms
  private
    FinQueue:TsemaphoreMailbox;
    IcmpClient:TIdIcmpClient;
    TCPClient:TIdTCPClient;
    ActiveServer:Boolean;
    FmyForm:TForm;
  protected
    procedure execute; override;
  public
    constructor create(myForm:TForm;inputQueue:TsemaphoreMailbox);
    procedure postToMain(mess:TpingRequest);
    procedure postReport(text:string);
end;

  TpingerForm = class(TForm)                    // main form
    Panel1: TPanel;
    sbPing1: TSpeedButton;
    ebHostName: TEdit;
    Memo1: TMemo;
    ebPort: TEdit;
    Label1: TLabel;
    Label2: TLabel;
    ebThreadCount: TEdit;
    Label3: TLabel;
    procedure sbPing1Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure ebThreadCountChange(Sender: TObject);
  private
    threadCount:integer;
    queueToThreads:TsemaphoreMailbox;
  protected
    procedure WMAPP(var message:Tmessage); message WM_APP;
  public
    { Public declarations }
  end;

var
  pingerForm: TpingerForm;

implementation

{$R *.dfm}

{ TsemaphoreMailbox }

constructor TsemaphoreMailbox.create;
begin
   inherited Create;
  access:=TcriticalSection.create;
  countSema:=createSemaphore(nil,0,maxInt,nil);
end;

destructor TsemaphoreMailbox.destroy;
begin
  access.free;
  closeHandle(countSema);
  inherited;
end;

function TsemaphoreMailbox.pop(pResObject: pObject;
  timeout: DWORD): boolean;
// dequeues an object, if one is available on the queue.  If the queue is empty,
// the caller is blocked until either an object is pushed on or the timeout
// period expires
begin // wait for a unit from the semaphore
  result:=(WAIT_OBJECT_0=waitForSingleObject(countSema,timeout));
  if result then // if a unit was supplied before the timeout,
  begin
    access.acquire;
    try
      pResObject^:=inherited pop; // get an object from the queue
    finally
      access.release;
    end;
  end;
end;

procedure TsemaphoreMailbox.push(aObject: Tobject);
// pushes an object onto the queue.  If threads are waiting in a 'pop' call,
// one of them is made ready.
begin
  access.acquire;
  try
    inherited push(aObject); // shove the object onto the queue
  finally
    access.release;
  end;
  releaseSemaphore(countSema,1,nil); // release one unit to semaphore
end;

function TsemaphoreMailbox.peek(pResObject: pObject): boolean;
begin
  access.acquire;
  try
    result:=(Count>0);
    if result then pResObject^:=inherited pop; // get an object from the queue
  finally
    access.release;
  end;
end;

{ TPSThread }

constructor TPSThread.create(myForm:TForm;inputQueue:TsemaphoreMailbox);
begin
  inherited create(true);
  FmyForm:=myForm;
  FinQueue:=inputQueue;
  FreeOnTerminate:=true;
  Resume;
end;

procedure TPSThread.postToMain(mess:TpingRequest);
begin
  PostMessage(FmyForm.Handle,WM_APP,integer(FmyForm),integer(mess));
end;

procedure TPSThread.postReport(text:string);
var reportMess:TpingRequest;
begin
  reportMess:=TpingRequest.Create;
  reportMess.command:=EtcReport;
  reportMess.reportText:=text;
  postToMain(reportMess);
end;

procedure TPSThread.execute;
var inMess:TpingRequest;
  ActiveServer:Boolean;

    procedure tryConnect;
    begin
        with IcmpClient do
        begin
          ReceiveTimeout := 5000;
          Protocol := 1;
          ProtocolIPv6 := 0;
          PacketSize := 1024;
          Host:=inMess.hostName;
        end;
        IcmpClient.Ping(inMess.hostName,Random(1024));
        if IcmpClient.ReplyStatus.BytesReceived=0 then
        begin
          inMess.errorMess:=('PING failed');
          ActiveServer:=False;
        end
        else
          ActiveServer:=True;

      if ActiveServer then
      begin
          with TCPClient do
          begin
            Host:=inMess.hostName;
            Port:=strToInt(inMess.port);
            try
              Connect;
              try
                IOHandler.WriteLn('salam');
                inMess.reportText:='Message was sent successfully to server';
              finally
                Disconnect;
              end;
            except
              on e:exception do
              begin
                inMess.errorMess:=('TCP connection failed : '+e.Message);
              end;
            end;
          end;
      end;
    end;

begin
  postReport('PING thread started');
  IcmpClient:= TIdIcmpClient.Create();  // make Indy components
  TCPClient:=TIdTCPClient.Create(nil);
  try
    while FinQueue.pop(@inMess,INFINITE) do  // wait for message
    begin
      try
        case inMess.command of               // switch on command in message
          EtcDoPing: tryConnect;
          EtcSuicide: begin
                        inMess.command:=EtcReport;
                        inMess.reportText:='Thread exit';
                        exit;
                      end;
        else
          begin
            inMess.command:=EtcError;;
            inMess.errorMess:='Command not understood in PSThread';
          end;
        end;
      finally
        postToMain(inMess);                  // send message back with results
      end;
    end;
  finally
    IcmpClient.Free; // free off all the stuff made in ctor
    TCPClient.Free;
  end;
end;

{ TpingerForm }

procedure TpingerForm.ebThreadCountChange(Sender: TObject);
var newThreads:integer;
    suicideMess:TpingRequest;
begin
  try
    newThreads:=strToInt(ebThreadCount.Text);
    while threadCount<newThreads do
    begin
      TPSThread.create(self,queueToThreads);
      inc(threadCount);
    end;
    while threadCount>newThreads do
    begin
      suicideMess:=TpingRequest.Create;
      suicideMess.command:=EtcSuicide;
      queueToThreads.push(suicideMess);
      dec(threadCount);
    end;
  except;
  end;
end;

procedure TpingerForm.FormCreate(Sender: TObject);
var editThreadCount:integer;
begin
  queueToThreads:=TsemaphoreMailbox.create;
  editThreadCount:=strToInt(ebThreadCount.Text);
  while(threadCount<editThreadCount) do // make initial number of threads
  begin
    TPSThread.create(self,queueToThreads);
    inc(threadCount);
  end;
end;

procedure TpingerForm.sbPing1Click(Sender: TObject);
var outMess:TpingRequest;
begin
  outMess:=TpingRequest.Create;  // make a thread comms object
  outMess.command:=EtcDoPing;    // fill up
  outMess.hostName:=ebHostName.Text;
  outMess.port:=ebPort.Text;
  queueToThreads.push(outMess);
end;

// Message-handler for messages from thread
procedure TpingerForm.WMAPP(var message: Tmessage);
var inMess:TpingRequest;

  procedure messReport;
  begin
    memo1.Lines.Add(inMess.reportText);
  end;

  procedure messError;
  begin
    memo1.Lines.Add('>*Error*< '+inMess.errorMess);
  end;

  procedure messPing;
  var reportOut:string;
  begin
    reportOut:='Host '+inMess.hostName+', port: '+inMess.port+', ';
    if (inMess.errorMess='') then
       reportOut:=reportOut+'comms OK'
    else
      begin
        reportOut:=reportOut+'comms failed: '+inMess.ErrorMess;
      end;
      memo1.Lines.Add(reportOut);
      memo1.Lines.Add('');
  end;

begin
  inMess:=TpingRequest(message.LParam);
  try
    case inMess.command of
      EtcReport: messReport;
      EtcError: messError;
      EtcDoPing:messPing;
    end;
  finally
    inMess.Free;
  end;
end;

end. 
```

![Pinger 使用 10 个线程](../Images/bc31c25c2164fd2a80ee56db8e7fa13c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:07:40.173

使用线程编写代码时，您需要了解执行顺序是不能保证的，事实上，在多线程中编程时，您应该知道未锁定（同步）的代码可能会被执行并导致不安全调用并导致数据行为不如预期。

请阅读有关线程的更多信息并了解[临界区线程同步](http://www.delphicorner.f9.co.uk/articles/op4.htm)的情况是一个很好的起点。

如果您需要执行顺序，则在打印之前进行所有计算，等待所有线程完成，然后进行所有打印。此命令的缺点不是实时打印，但是，您可以获得干净的输出。

# javascript - 如何在 xhtml 中使用 marquee 标签

> ID：10190695
> 
> 赞同：0
> 
> 时间：2012-04-17T11:52:22.483
> 
> 标签：javascript, xhtml, validation, marquee

我在用着

```
<script type="text/javascript" >
    document.write("<marquee scrollamount='5' onMouseOver='this.stop()' onMouseOut='this.start()'><img alt='ibm' src='images/ibm.png' width='100px' height='100%' /><img alt='tcs' src='images/tcs.jpg' width='100px' height='100%' /><img alt='hp' src='images/hp.png' width='100px' height='100%' /><img alt='hcl' src='images/hcl.jpg' width='100px' height='100%' /><img alt='cts' src='images/cts.jpg' width='100px' height='100%' /><img alt='accenture' src='images/Accenture.png' width='100px' height='100%' /></marquee>");
    </script> 
```

对于我网站中的选框图片，但是当我将我的网页检查到[W3 Validator](http://validator.w3.org) 时，上面的代码出现错误。

*   元素“选框”未定义
*   没有属性“onMouseOver”
*   没有属性“scrollamount”
*   没有属性“onMouseOut”

需要帮助解决上述问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:54:54.590

您的问题中解释了这些问题。

*   `marquee`是微软的老东西，不*应该*使用。
*   `onMouseOver`也不是一个定义的属性。您可以使用`onmouseover`，而是使用不显眼的事件处理程序。
*   其他问题可以通过上面来解释。

一些奖金提示...

*   `document.write()`在当今时代，您使用或使用该`marquee`元素的原因很少。两者都可以使用 JavaScript 中更优雅、更强大的方法来实现。
*   `img`元素`width`和`height`属性永远不应包含`px`.
*   如果您使用的是 HTML5 文档类型，`type`并且`script`脚本类型为`text/javascript`.

# android - 在 Android 设备/模拟器上加载 NPAPI 插件

> ID：10190697
> 
> 赞同：3
> 
> 时间：2012-04-17T11:52:26.290
> 
> 标签：android, c++, plugins, npapi

我编译了从这个链接[http://code.google.com/p/npapi-sdk/获得的示例 NPAPI 插件](http://code.google.com/p/npapi-sdk/)

使用 NDK 编译后，我得到了 .so 文件 libs/armeabi/libBasicPlugin.so

在谷歌上搜索后，我遇到了以下建议：

1.  将 .so 文件放入 /data/data/com.android.browser/app_plugins/
2.  将 .so 文件放入 /data/data/com.android.browser/assets/plugins/

但这些都不适用于模拟器（尚未在设备上尝试过）

我在 Gingerbread 和 ICS 上试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:37:35.803

webkit 的插件不能再工作了。PluginManager.java 文件中有一个测试（framework/core/java/webkit 之类的），只允许加载 flash 的插件（仅当 ro.secure = 1 时）。如果你想加载插件，你必须root你的设备。

# uilabel - 为标签文本设置 RGB 值

> ID：10190700
> 
> 赞同：8
> 
> 时间：2012-04-17T11:52:31.897
> 
> 标签：uilabel, rgb

我的颜色代码为 R:38 G:171 B:228 ，但是当我将值设置为 .38f 的**颜色为 Red : Green : Blue:**时，我无法获得所需的颜色：

```
[CategoryLbl setTextColor:[UIColor colorWithRed:.38f green:.171f blue:.226f alpha:1.0f]]; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-17T12:08:53.867

您混合了两个比例： UIColour 看起来使用浮点值 0-1，而通常的 RGB 值是 0-255。相反，你想要

```
 38 / 255 = 0.1491f
171 / 255 = 0.6706f
226 / 255 = 0.8863f 
```

所以

```
[CategoryLbl setTextColor:[UIColor colorWithRed:0.1491f green:0.6706f blue:0.8863f alpha:1.0f]]; 
```

可能有更好的方法来做到这一点，例如使用 0-255 值 - 我不太了解 OSX / iPhone 开发。

实际上，您似乎可以这样做：

```
[CategoryLbl setTextColor:[UIColor colorWithRed:(38/255.f) green:(171/255.f) blue:(226/255.f) alpha:1.0f]]; 
```

这更容易理解（尽管我给了你足够的 dp 第一个应该是准确的）。

# c - 计算结果为零且可用作语句的函数宏

> ID：10190701
> 
> 赞同：7
> 
> 时间：2012-04-17T11:52:37.283
> 
> 标签：c, c-preprocessor

我们有一个`#define FOO(arg) foo(arg)`带有`int foo(const char* bar);`. 当 NDEBUG 被定义时，FOO 被定义为`#define FOO(arg) 0`，但是这会导致许多编译器警告，因为在许多情况下 FOO 的返回值没有被使用。该解决方案应与 ANSI C 编译器一起使用并且不会导致警告。我试过了：

`(void)0`: 不能分配给变量

`static int foo(const char* bar) { return 0; }`: 在某些模块中导致未使用的静态函数警告

`static inline int foo(const char* bar) { return 0; }`: 仅适用于 C99 编译器

谢谢你的帮助！

edit1：它有点像跟踪宏，在整个项目中都使用。大多数情况下，它只是用作声明`FOO("function x called");`，但在少数情况下我看到了`if (FOO("condition a")) { /* some more debug output */ }`。定义了 NDEBUG 并启用了优化后，FOO 应该不会留下任何东西。我没有想出这个，但我必须清理这个烂摊子:)。

edit2：我应该补充一点，对于 gcc 发布版本，使用了这些标志：-O3 -Wall -ansi

编辑3：现在我要使用`__inline int dummy() { return 0; }`. __inline 在 ansi 模式下与 VisualC 和 GCC 一起工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:15:47.940

I *guess* it's a little bit compiler dependent but this should work:

```
#ifndef NDEBUG
    #define FOO(arg) foo(arg)
#else
    #define FOO(arg) ((int)0)
#endif 
```

It prevents the "expression has no effect" warning, it does nothing and its value when used is still 0.

**EDITED**
It seems it's something not so portable so (now) you have these conditions:

*   `(0)` or `((int)0)` work at least on VC 2010.
*   `__noop` should work on any version of VC after 2003.

VC6 is not a problem because it doesn't emit the C4555 warning at all. For other compilers you may use:

*   `((void)0, 0)` It may work on a lot of compilers (maybe it's the more portable one?).
*   `inline int foo(const char* bar) { return 0; }` works with any other C99 compiler (as you wrote you may need to declare it as `static` on gcc).

For any other prehistoric C compiler use the solution pointed by @Jobs: `abs(0)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:06:39.450

您*可以*采取以下措施来防止警告：

```
#ifndef NDEBUG
    #define FOO(arg) foo(arg)
#else
    #define FOO(arg) abs(0)
#endif 
```

我并不是说这是理想的（例如，您必须确保`stdlib.h`在任何地方都包含在内），但它确实可以防止警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:48:20.257

我会做一些依赖于 C 版本的事情。在头文件中：

```
#if __STDC_VERSION__ > 199900L
inline int foo(const char* bar) { return 0; }
#else
int foo(const char* bar);
#endif 
```

在一个编译单元中

```
#if __STDC_VERSION__ < 199900L
int foo(const char* bar) { return 0; }
#else
int foo(const char* bar);
#endif 
```

或用于旧的 C 版本，例如 Job's answer，这是一个肯定会被优化但不会产生警告的函数。

# c++ - 标准：：字符串到标准：：数组？

> ID：10190702
> 
> 赞同：12
> 
> 时间：2012-04-17T11:52:40.310
> 
> 标签：c++, c++11

将字符串转换为数组的推荐方法是什么？我正在寻找类似的东西：

```
template<class T, size_t N, class V>
std::array<T, N> to_array(const V& v)
{
    assert(v.size() == N);
    std::array<T, N> d;
    std::copy(v.begin(), v.end(), d.data());
    return d;
} 
```

C++11 或 Boost 是否提供类似的功能？其他人如何做到这一点？每次我在项目中需要它时都必须自己复制/粘贴这个功能似乎很愚蠢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T11:56:11.350

这似乎很好。C++11 中没有这样的东西，我认为 Boost 中也没有。如果您不想将其粘贴到所有地方，则可以将其放在标题`#include`中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-18T14:00:49.043

简单地调用：

```
std::copy(v.begin(), v.end(), d.data()); 
```

是将字符串转换为数组*的方式。*我看不出将其包装成专用的“实用程序”功能有什么好处。

此外，除非编译器对其进行优化，否则性能可能会随着您的函数而降低：返回数组时数据将被第二次复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:47:18.777

如果您真的只想将*字符串*转换为数组，只需使用`.c_str()`（并处理`char*`）。它不完全是，`array<>`但可能适合您的需求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T15:49:45.437

没关系，也许在 C++11 中稍作修改。

```
template<class T, size_t N, class V>
std::array<T, N> to_array(const V& v)
{
    assert(v.size() == N);
    std::array<T, N> d;
    using std::begin; using std::end; 
    std::copy( begin(v), end(v), begin(d) ); // this is the recommended way
    return d;
} 
```

这样，如果您删除断言，即使 v 是原始数组，此函数也将起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-05T14:57:17.720

它不适用于 std::string，但如果您使用 C 字符串文字 (char const *)，C++20`std::to_array`仅针对此类事物引入：

```
std::array arr {"Hello, world!"}; 
```

[https://en.cppreference.com/w/cpp/container/array/to_array](https://en.cppreference.com/w/cpp/container/array/to_array)

# c++ - 没有在opengl中绘制的顶点

> ID：10190703
> 
> 赞同：0
> 
> 时间：2012-04-17T11:52:41.460
> 
> 标签：c++, opengl, vertex-shader, perspectivecamera

我一直无法使用着色器绘制一个简单的顶点指定（类似盒子）的茶壶模型，并带有一些用于平移和旋转的输入。我一遍又一遍地检查了我的 gl 代码和矩阵（-z 上的对象位置、原点处的相机等），但不明白为什么我仍然只是得到一个空白屏幕。为了保持代码简短，我刚刚为我的模型的基本立方体输入了代码（一旦我至少知道我会没事的）。

```
namespace TeapotViewer{

class TeapotViewer{

private:
    void intitialize();
    void draw();
    void reshape(int h, int w);
    void keyHandle(unsigned char key, int x, int y);
    void initCamera();
    void reset();
    void changeAxis();
    void rotateOnAxis(float rot);
    int createCube(int i);

public:

}; 
```

}

```
#include "TeapotViewer.h"

using namespace glm;

const int S_WIDTH = 800;
const int S_HEIGHT = 600;
const float FOV = 100;
const float P_NEAR = 0.2;
const float P_FAR = 20.0;
const float SPOUT_WIDTH = 0.025;
const float HANDLE_WIDTH = 0.15;
const float ZERO = 0.0;
const int numberOfVertices = 104;
const int noCubeSide = 10;
const int noCubeFace = 4;
const int noLine = 2;

mat4 modelxViewMatrix, projMatrix, viewMatrix, rotationMatrix, translationMatrix;
vec3 rotationAxis;
vec3 teapotPosition  = vec3(0.0, 0.0,-3.0);

const vec3 cameraPosition = vec3(0.0, 0.0, 0.0);
const vec3 cameraDirection = vec3(0.0, 0.0, -1.0);
const vec3 cameraUp = vec3(0.0, 1.0, 0.0);

vec4 vertices[numberOfVertices];
GLuint refVertexArray;
GLuint refVertexBuffer;
GLuint refUniformModelxView;
GLuint refUniformProjection;

const vec4 body[] = {

    vec4(-1.0,-1.0, 1.0, 1.0), vec4(-1.0, 1.0, 1.0, 1.0),
    vec4( 1.0,-1.0, 1.0, 1.0), vec4( 1.0, 1.0, 1.0, 1.0),
    vec4( 1.0,-1.0,-1.0, 1.0), vec4( 1.0, 1.0,-1.0, 1.0),
    vec4(-1.0,-1.0,-1.0, 1.0), vec4(-1.0, 1.0,-1.0, 1.0)
};

const vec3 xAxis = vec3(1.0, 0.0, 0.0);

const vec3 yAxis = vec3(0.0, 1.0, 0.0);

const vec3 zAxis = vec3(0.0, 0.0, 1.0);

// draw callback
void draw(){

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    translationMatrix = translate(mat4(), teapotPosition);

    modelxViewMatrix = viewMatrix*translationMatrix*rotationMatrix;

    glUniformMatrix4fv(refUniformModelxView, 1, &modelxViewMatrix[0][0]);
    glUniformMatrix4fv(refUniformProjection, 1, &projMatrix[0][0]);
    void drawTeapot();

    glutSwapBuffers();
}

void drawTeapot(){

    int bufferIndex = 0;
    // draw cube
    glDrawArrays(GL_TRIANGLE_STRIP, bufferIndex, noCubeSide);
    bufferIndex += noCubeSide;
    glDrawArrays(GL_TRIANGLE_STRIP, bufferIndex, noCubeFace);
    bufferIndex += noCubeFace;
    glDrawArrays(GL_TRIANGLE_STRIP, bufferIndex, noCubeFace);
    bufferIndex += noCubeFace;

    // draw the axis of rotation
    if (rotationAxis == xAxis){

        glDrawArrays(GL_LINES, bufferIndex, noLine);
        bufferIndex += noLine;
    }
    if (rotationAxis == yAxis){

        bufferIndex += noLine;
        glDrawArrays(GL_LINES, bufferIndex, noLine);
        bufferIndex += noLine;
    }
    if (rotationAxis == zAxis){

        bufferIndex += noLine*2;
        glDrawArrays(GL_LINES, bufferIndex, noLine);
        bufferIndex += noLine; 

    }  
}

// reset back to the start
void reset(){

    teapotPosition = vec3(0.0, 0.0,-3.0);

    rotationMatrix = mat4();

}

void changeAxis(){

    if(rotationAxis == xAxis)
        rotationAxis = yAxis;
    else
    if(rotationAxis == yAxis)
        rotationAxis = zAxis;
    else
        rotationAxis = xAxis;
}

void rotateOnAxis(float rot){

    rotationMatrix = rotate(rotationMatrix, rot, rotationAxis);
}

// handle keypress
void keyHandle(unsigned char key, int x, int y){

    switch(key){

        case 033:
            exit(EXIT_SUCCESS);
            break;
        case '0':
            reset();
            break;
        case 'a':
            teapotPosition = teapotPosition + vec3(-0.1, 0.0, 0.0);
            break;
        case 'd':
            teapotPosition = teapotPosition + vec3(0.1, 0.0, 0.0);
            break;
        case 'w':
            teapotPosition = teapotPosition + vec3(0.0, 0.1, 0.0);
            break;
        case 's':
            teapotPosition = teapotPosition + vec3(0.0, -0.1, 0.0);
            break;
        case 'q':
            teapotPosition = teapotPosition + vec3(0.0, 0.0, -0.1);
            break;
        case 'e':
            teapotPosition = teapotPosition + vec3(0.0, 0.0, 0.1);
            break;
        case 'j':
            changeAxis();
            break;
        case 'k':
            rotateOnAxis(-5.0);
            break;
        case 'l':
            rotateOnAxis(5.0);
            break;
    }

    glutPostRedisplay();
}

void reshape(int h, int w){

    glViewport(0, 0, h, w);

}

void initCamera(){

    viewMatrix = lookAt(cameraDirection, cameraPosition, cameraUp);
    projMatrix = perspective(FOV, (float)S_WIDTH/(float)S_HEIGHT, P_NEAR, P_FAR);
    reset();
}

int createCube(int i){

    // sides of the cube
    vertices[i++] = body[0];
    vertices[i++] = body[1];
    vertices[i++] = body[2];
    vertices[i++] = body[3];
    vertices[i++] = body[4];
    vertices[i++] = body[5];
    vertices[i++] = body[6];
    vertices[i++] = body[7];
    vertices[i++] = body[0];
    vertices[i++] = body[1];

    // top
    vertices[i++] = body[0];
    vertices[i++] = body[2];
    vertices[i++] = body[4];
    vertices[i++] = body[6];

    //bottom
    vertices[i++] = body[1];
    vertices[i++] = body[3];
    vertices[i++] = body[5];
    vertices[i++] = body[7];

    std::cout << i << '\n';

    return i;

}

int createAxes(int i){

    // X axis
    vertices[i++] = vec4( 2.0, 0.0, 0.0, 1.0);
    vertices[i++] = vec4(-2.0, 0.0, 0.0, 1.0);

    // Y axis
    vertices[i++] = vec4( 0.0, 2.0, 0.0, 1.0);
    vertices[i++] = vec4( 0.0,-2.0, 0.0, 1.0);

    // Z axis
    vertices[i++] = vec4( 0.0, 0.0, 2.0, 1.0);
    vertices[i++] = vec4( 0.0, 0.0,-2.0, 1.0);

    std::cout << i << '\n';

    return i;
}

// Initialize 
void initialize(){

    // generate vertex data
    int i = 0; 
    i = createCube(i);
    i = createAxes(i);

    if(i != numberOfVertices){

        std::cout << "Error creating vertex data: check vertex count\n";
        std::exit(0);
    }

    // set 
    initCamera();

    // load shader and activate shader
    GLuint refVertexShader = Angel::InitShader("Vertex_Shader.glsl", "Fragment_Shader.glsl");
    glUseProgram(refVertexShader);

    // create and activate a new vertex array object (vao)
    glGenVertexArrays(1, &refVertexArray);
    glBindVertexArray(refVertexArray);

    // create and activate a new buffer array object in the vao
    glGenBuffers(1, &refVertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, refVertexBuffer);

    // load vertex data into the buffer array
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

    // load postion pipeline variable
    GLuint refVec4Position = glGetAttribLocation(refVertexShader, "Position");
    glEnableVertexAttribArray(refVec4Position);
    glVertexAttribPointer(refVec4Position, 4, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));

    // get pointers for uniform variables in shader program
    refUniformModelxView = glGetUniformLocation(refVertexShader, "ModelxView");
    refUniformProjection = glGetUniformLocation(refVertexShader, "Projection");

    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LESS); 

    glClearColor(0.0, 0.0, 0.0, 1.0);
}

int main(int argc, char* argv[]){

    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
    glutInitWindowSize(S_WIDTH, S_HEIGHT );
    glutCreateWindow("TeapotViewer");

    glewInit();

    initialize();

    glutDisplayFunc(draw);
    glutReshapeFunc(reshape);
    glutKeyboardFunc(keyHandle);

    glutMainLoop();
    return 0;
} 
```

顶点着色器

```
#version 150
uniform mat4 ModelxView;
uniform mat4 Projection;
in vec4 Position;

void main()
{
    gl_Position = Projection*ModelxView*Position;
} 
```

片段着色器

```
 #version 150
out vec4 fColor;

void main()
{
    fColor = vec4(1.0, 1.0, 0.0, 1.0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:57:01.573

不确定这一点，因为我不确定 Angel:: 在幕后发生了什么，但是`fColor`从片段着色器输出是否正确？我认为在 glsl 150 中它需要特殊变量`gl_FragColor`，除非 Angel 做了一些特定的事情来缓解这种情况。

我看了一会儿，但我没有看到任何其他会导致问题的东西。不幸的是，我认为如果你真的被卡住了，你可能不得不开始写一个更简单的例子（没有函数，只是通过渲染三角形进行初始化的直接概述）。

还要确保每个 draw() 循环至少调用一次 glGetError 以确保它没有丢失任何内容。Angel 是否会在链接/编译失败时抛出异常？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:47:24.547

嗯，这个怎么样：

`viewMatrix = lookAt(cameraDirection, cameraPosition, cameraUp);`

这是否与 gluLookAt 相同？在该函数中，原型是`(position, lookAtPoint, cameraUp)`，这与您所拥有的相反。

# mysql - 聊天系统的 MySQL 数据库安装程序语法错误

> ID：10190705
> 
> 赞同：1
> 
> 时间：2012-04-17T11:52:43.160
> 
> 标签：mysql, syntax

在过去的一周里，我一直在考虑这个单一的 MySQL 文档，但没有弄清楚错误是什么/在哪里导致它无法正确安装它，因此我可以让聊天系统启动并运行。我会去找开发商，但他基本上已经一年多没有回应了，所以我放弃了他的帮助。我在尝试安装它时遇到的错误如下：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器对应的手册 >version 以在第 1 行的 '(14) NOT NULL, userid int(11) default NULL, >banneduserid int(11) default NULL, r' 附近使用正确的语法

MySQL 文件内容如下：

```
#--------------------------------------------------------------------------
# Table structure for table `bans`
#--------------------------------------------------------------------------

CREATE TABLE `bans` (
       `created` timestamp(14) NOT NULL,
       `userid` int(11) default NULL,
       `banneduserid` int(11) default NULL,
       `roomid` int(11) default NULL,
       `ip` varchar(16) default NULL,
       KEY `userid` (`userid`),
       KEY `created` (`created`)
     ) ENGINE=MyISAM;

#--------------------------------------------------------------------------
# Table structure for table `connections`
#--------------------------------------------------------------------------

CREATE TABLE `connections` (
       `id` varchar(32) NOT NULL default '',
       `updated` timestamp(14) NOT NULL,
       `created` timestamp(14) NOT NULL,
       `userid` int(11) default NULL,
       `roomid` int(11) default NULL,
       `state` tinyint(4) NOT NULL default '1',
       `color` int(11) default NULL,
       `start` int(11) default NULL,
       `lang` char(2) default NULL,
       `ip` varchar(16) default NULL,
       `tzoffset` int(11) default '0',
       `chatid` int(11) NOT NULL default '1',
       PRIMARY KEY  (`id`),
       KEY `userid` (`userid`),
       KEY `roomid` (`roomid`),
       KEY `updated` (`updated`)
     ) ENGINE=MyISAM;

#--------------------------------------------------------------------------
# Table structure for table `ignors`
#--------------------------------------------------------------------------

CREATE TABLE `ignors` (
       `created` timestamp(14) NOT NULL,
       `userid` int(11) default NULL,
       `ignoreduserid` int(11) default NULL,
       KEY `userid` (`userid`),
       KEY `ignoreduserid` (`ignoreduserid`),
       KEY `created` (`created`)
     ) ENGINE=MyISAM;

#--------------------------------------------------------------------------
# Table structure for table `messages`
#--------------------------------------------------------------------------

CREATE TABLE `messages` (
       `id` int(11) NOT NULL auto_increment,
       `created` timestamp(14) NOT NULL,
       `toconnid` varchar(32) default NULL,
       `touserid` int(11) default NULL,
       `toroomid` int(11) default NULL,
       `command` varchar(255) NOT NULL default '',
       `userid` int(11) default NULL,
       `roomid` int(11) default NULL,
       `txt` text,
       PRIMARY KEY  (`id`),
       KEY `touserid` (`touserid`),
       KEY `toroomid` (`toroomid`),
       KEY `toconnid` (`toconnid`),
       KEY `created` (`created`)
     ) ENGINE=MyISAM AUTO_INCREMENT=14 ;

#--------------------------------------------------------------------------
# Table structure for table `rooms`
#--------------------------------------------------------------------------

CREATE TABLE `rooms` (
       `id` int(11) NOT NULL auto_increment,
       `updated` timestamp(14) NOT NULL,
       `created` timestamp(14) NOT NULL,
       `name` varchar(64) NOT NULL default '',
       `password` varchar(32) NOT NULL default '', 
       `ispublic` char(1) default NULL,
       `ispermanent` int(11) default NULL,

       PRIMARY KEY  (`id`),
       KEY `name` (`name`),
       KEY `ispublic` (`ispublic`),
       KEY `ispermanent` (`ispermanent`),
       KEY `updated` (`updated`)
     ) ENGINE=MyISAM AUTO_INCREMENT=5 ;

#--------------------------------------------------------------------------
# Table structure for table `users`
#--------------------------------------------------------------------------

CREATE TABLE `users` (
       `id` int(11) NOT NULL auto_increment,
       `login` varchar(32) NOT NULL default '',
       `password` varchar(32) NOT NULL default '',
       `roles` int(11) NOT NULL default '0',
       `profile` text,
       PRIMARY KEY  (`id`),
       KEY `login` (`login`)
     ) ENGINE=MyISAM AUTO_INCREMENT=2 ; 
```

我的猜测是，有一个较旧的调用/请求已过时，不再用于我在主机上安装的 MySQL 版本（版本：5.5.19）。我真的很感谢我能得到的任何帮助，这样我终于可以停止运行一个平面文件（这个东西有另一个安装选项）并将它集成到我的 CMS 中。感谢您的时间！

-雷兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:58:55.367

`(14)`像这样从所有时间戳类型中删除

```
... column_name timestamp NOT NULL ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:01:46.697

在 MySQL 4.1 之后的版本中，`timestamp`数据类型没有在括号中添加属性。

[MySQL 文档 4.1](http://dev.mysql.com/doc/refman/4.1/en/timestamp-pre-4-1.html)

[MySQL 文档 5.1](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

因此，在您的情况下，只需删除sql 中的`(14)`所有外观。`timestamp`所以，例如，改变这个

```
 `created` timestamp(14) NOT NULL, 
```

对此

```
 `created` timestamp NOT NULL, 
```

# android - 如何在android的mapView中隐藏灰色/白色区域

> ID：10190708
> 
> 赞同：1
> 
> 时间：2012-04-17T11:52:48.043
> 
> 标签：android, android-mapview

在以下屏幕截图中，您可以看到默认情况下每个地图视图中都会出现一个白色区域（以红色突出显示）。我知道 android 中的 mapView 具有此默认行为，但是当在设备中启动本机 Google Maps 应用程序时，它不会显示白色区域。我希望看到这种行为。但我没有选择。地图上是否应该有任何滚动侦听器将停止在白色区域上的平移。任何帮助都是可观的。

谢谢，

![检查此图像中突出显示的区域](../Images/826d26e8b375c870349724757e513790.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:06:27.797

> 在以下屏幕截图中，您可以看到默认情况下每个地图视图中都会出现一个白色区域（以红色突出显示）。

它不会“默认出现在每个地图视图中”。[例如，这个示例应用程序](https://github.com/commonsguy/cw-android/tree/master/Maps/NooYawk)没有这些区域，至少在合理的缩放级别上是这样。

由于墨卡托投影的纵横比，您的问题很可能纯粹是缩放级别为 1。自从我为缩放级别 1 烦恼已经有好几年了。

> 但是当在设备中启动原生谷歌地图应用程序时，它不显示白色区域

这是因为 Google 地图应用程序的缩放级别不是 1。但是，如果您通过捏合缩放以达到其最低缩放级别，然后平移，您将看到上方和下方的空白区域地图。同样，这很可能是由于墨卡托投影的纵横比。

> 地图上是否应该有任何滚动侦听器将停止在白色区域上的平移。

我对此表示怀疑。

# php - 如何在不使用 importcsv 扩展的情况下将数据导入数据库

> ID：10190709
> 
> 赞同：-1
> 
> 时间：2012-04-17T11:52:52.253
> 
> 标签：php, codeigniter, yii

我在将数据导入数据库时​​遇到了一个问题。我想问一下，如何在yii框架中不使用importcsv扩展将数据导入数据库？因为那个扩展没有用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:38:05.997

有时我以这种方式在迁移中从 csv 加载数据：

```
public function safeUp()
{
    $handle = fopen('/path/to/csv.csv', "r");
    if (false !== $handle) {
        fgetcsv($handle, 1000); // Skip header row
        while (false !== ($row = fgetcsv($handle, 1000))) {
            $this->insert('table_name', array(
                'column1' => $row[0], 
                'column2' => $row[1],
            ));
        }
        fclose($handle);
    }
} 
```

# git - 你如何设置 cgit 并通过 http 进行拉取和推送？

> ID：10190711
> 
> 赞同：3
> 
> 时间：2012-04-17T11:52:53.937
> 
> 标签：git, http, cgit

我正在尝试设置一个 cgit 实例，您可以从中推送或拉取 http。但是，我可以通过 cgit 通过 http 浏览我的 repos，但是当我尝试推送到这个 repo 时，我收到一个错误：

> 致命，/info/refs 无效，这是一个 git 存储库吗？

该路径存在于服务器上，这是一个空文件。我创建了一个更新后挂钩，它自动执行 git update-server-info（来自 repo 的 post-update.example）。但是当我尝试通过 http 查看 /info/refs 文件时，cgit 有一个通知，这是一个空存储库。

我可以做些什么来通过 http 访问这个文件，所以我可以使用 cgit 提供给我的 url 推送或拉取？

我在共享托管服务提供商上有我的仓库，所以我无法访问 apache.conf，只能访问 .htaccess 文件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:35:27.613

据我所知，cgit 不支持推送到 Git 存储库（通过查看他们的[功能列表](http://hjemli.net/git/cgit/about)）。

您可能需要设置类似[`git-http-backend`](http://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html)能够推送的东西。该`git-http-backend`手册页包含 Apache 2.x 的示例配置，用于匿名读取和经过身份验证的写入，以及经过身份验证的读取和写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:09:53.587

如果您想要一个功能更丰富的后端`git-http-backend`，我会推荐[gitolite](http://gitolite.com/gitolite)。它有一些非常好的功能：

*   在服务器上使用单个 unix 用户（“真实”用户）
*   为许多 gitolite 用户提供访问权限：
    *   他们不是“真正的”用户
    *   他们没有获得 shell 访问权限
*   控制对许多 git 存储库的访问：
    *   在回购级别控制读取访问
    *   在分支/标签/文件/目录级别控制写访问，包括谁可以倒带、创建和删除分支/标签
*   可以在没有 root 访问权限的情况下安装，假设已经安装了 git 和 perl
*   身份验证最常使用 sshd 完成，但如果您愿意，也可以使用 http（这可能需要 root 访问权限）
*   将所有配置存储在管理员 git 存储库中

这只是一些更重要的功能。此外，使用您自己的脚本很容易扩展其行为。

# android - 触发 onSaveInstanceState 事件时重新启动 Activity

> ID：10190713
> 
> 赞同：0
> 
> 时间：2012-04-17T11:52:57.823
> 
> 标签：android, android-activity

当用户尝试通过按下主页按钮启动主屏幕时，我尝试了以下代码来重新启动我的活动。

```
@Override
public void onSaveInstanceState(Bundle state){
    try{
        Intent i = new Intent(this, LockerAppActivity.class);
        startActivity(i);
    }catch(Exception ex){
        Toast.makeText(this, ex.getMessage(), Toast.LENGTH_LONG);
    }
} 
```

不会发生异常并且代码会触发。但是活动没有开始。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:01:07.887

第 1 步：删除您的`onSaveInstanceState()`实施。

步骤＃2：不要尝试“当用户尝试通过按下主页按钮启动主屏幕时重新启动[您的]活动”，因为那是不必要的。

步骤#3：修复你认为你遇到的任何导致你尝试这种“重启”技术的问题。

例如，给定类名`LockerAppActivity`，我猜您正在尝试创建那些容易被击败的“锁屏”之一。考虑到任何人都可以通过他们，你为什么要打扰，这超出了我的范围。无论如何，确保您的应用程序在用户按下 HOME 时运行的正确方法是作为主屏幕。

# wcf - 通过 WCF 使用高可用性 RabbitMQ 服务器对

> ID：10190716
> 
> 赞同：5
> 
> 时间：2012-04-17T11:53:03.093
> 
> 标签：wcf, message-queue, rabbitmq, high-availability, failover

我试图找出通过 wcf 使用 rabbitmq 集群的最佳解决方案是什么。

当前设置：

1.  2 个 IIS Web 服务器（作为消息生成并通过 amqp wcf 客户端将消息发布到队列）。
2.  2台带有rabbitmq代理的服务器（集群镜像队列，rabbit1和rabbit2）
3.  Windows 服务（工作人员），带有监听传入消息的托管 amqp wcf 服务。

Web角色向rabbit1节点发布消息，worker也监听rabbit1节点。如果 rabbit1 节点出现故障，系统（web 和 worker）应该切换到 rabbit2。这就是问题所在，如何以更优雅的方式实现这一点，而不是在应用程序代码中处理连接失败。

我现在看到的第一个也是唯一的方法是使用 wcf4 路由备份端点功能。这种方式只能解决客户端（Web 角色）的问题，但不能解决 wcf 服务端（工作者角色）的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:57:02.387

一种方法是围绕您的服务主机创建一个包装器，用于存储连接字符串列表（可以来自配置）。

将处理程序添加到服务故障事件，您可以在其中使用不同的连接字符串关闭和重新打开主机。

# web-services - 使用 CRM SDK 和 Web 服务将与 MS CRM Dynamis 在线集成的自定义应用程序托管到 Windows Azure 上

> ID：10190721
> 
> 赞同：2
> 
> 时间：2012-04-17T11:53:19.707
> 
> 标签：web-services, azure, assemblies, wif, dynamics-crm-online

我开发了一个自定义应用程序，它能够使用 CRM Web 服务并从自定义 .NET 页面在 CRM 中执行 Windows Live Id 身份验证、创建、读取和更新操作。当我在 Visual Studio 2010 中调试应用程序时，它运行得非常好，但是当我部署相同的应用程序并尝试对其进行身份验证时，它显示以下错误：

> 无法加载文件或程序集“Microsoft.IdentityModel，Version=3.5.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

我无法理解问题发生在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:08:49.387

这是因为您的实例上未安装**Microsoft.IdentityModel 。**您需要使用启动任务来安装程序集。

按照本指南安装 WIF 运行时（包含 Microsoft.IdentityModel）：http: [//blogs.msdn.com/b/sriharsha/archive/2012/04/07/windows-azure-unable-to-find-assembly-microsoft -identitymodel.aspx](http://blogs.msdn.com/b/sriharsha/archive/2012/04/07/windows-azure-unable-to-find-assembly-microsoft-identitymodel.aspx)

# jquery - 具有相等高度的ui块的jquery mobile ui-grid

> ID：10190723
> 
> 赞同：1
> 
> 时间：2012-04-17T11:53:23.847
> 
> 标签：jquery, jquery-mobile

我正在尝试使用 jquery mobile 中的内置 ui-grid 进行 3 列布局。

问题是 ui 块内的 ui 条具有不同的高度。我想让所有 3 列都具有与最高列相同的高度。

有谁知道这个问题的简单解决方案？我想只用 CSS 来解决它，但我没有管理它。JS真的是解决这个问题的唯一方法吗？

JsFiddle：http: [//jsfiddle.net/zHbuC/466/](http://jsfiddle.net/zHbuC/466/)

代码：

```
<div data-role="page" id="station" class="type-home">
    <div data-role="header"><h1>Header Page 1</h1></div>

    <div data-role="content" data-theme="b">
        <div class="ui-grid-b" style="text-align:center">
            <div class="ui-block-a">
                <div class="ui-bar ui-bar-c">A</div>
            </div>
            <div class="ui-block-b">
                <div class="ui-bar ui-bar-c">B</div>
            </div>
            <div class="ui-block-c">
                <div class="ui-bar ui-bar-c">
                    <p>B with alot of text</p>
                    <p>with lots of lines</p>
                    <p>another line</p>
                </div>
            </div>
        </div>
    </div>

    <div data-role="footer"><h4>Footer</h4></div>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T12:13:06.093

以我的经验，唯一“可靠”的解决方案是使用简单的 jquery 高度比较。它只需要几行。

```
var tallest = 0;
$('.ui-grid-b > div').each(function() {
    var thisHeight = $(this).height();
    if(thisHeight > tallest) {
        tallest = thisHeight;
    }
});
$('.ui-grid-b .ui-bar').height(tallest); 
```

或者作为一个函数来做，见[http://www.cssnewbie.com/equal-height-columns-with-jquery/](http://www.cssnewbie.com/equal-height-columns-with-jquery/)

另一方面，如果您不想使用 CSS，则使用 box-model 有一个错误/不可靠的方法。见：[http ://www.css3.info/introducing-the-flexible-box-layout-module/](http://www.css3.info/introducing-the-flexible-box-layout-module/)

否则，还有一些 HTML/CSS hacks，它们可以工作，但会产生“丑陋”的代码。请参阅：[http ://buildinternet.com/2009/07/four-methods-to-create-equal-height-columns/](http://buildinternet.com/2009/07/four-methods-to-create-equal-height-columns/)

* * *

jQuery 示例：http: [//jsfiddle.net/zHbuC/468/](http://jsfiddle.net/zHbuC/468/)

还有一个缩小的示例（仅当内容始终在 中时才有效`.ui-bar`）

```
var tallest = 0;
$('.ui-grid-b .ui-bar').each(function() {
    if($(this).height() > tallest) {tallest = $(this).height();}
}).height(tallest); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:54:13.467

我遇到了同样的问题——我的解决方案可能比上面的解决方案更通用一些——应该适用于任何网格。

[http://jsfiddle.net/zHbuC/816/](http://jsfiddle.net/zHbuC/816/)

我对网格中的网格有疑问——这是我的 jsFiddle

[http://jsfiddle.net/48uce/](http://jsfiddle.net/48uce/)

您可以更改网格中的内容，高度将调整大小。

这是我的实用程序类，它完成了这一点——它可能有点矫枉过正：

```
var ekJqm = {};

ekJqm.utilities = {
    fixGrids: function (container) {
        $("[class^=ui-block-]").each(function () {
            $(this).removeAttr("style");
            $(">div", this).removeAttr("style");
        });
        var fixBlocks = function (blocks) {
            blocks = $(blocks);
            var heights = [];
            blocks.each(function () {
                if ($.inArray($(this).height(), heights) == -1)
                    heights.push($(this).height());
            });
            if (heights.length == 1)
                return;
            var maxHeight = 0;
            blocks.each(function () {
                if ($(this).height() > maxHeight)
                    maxHeight = $(this).height();
            });
            blocks.each(function () {
                $(this).height(maxHeight);
                var adjust = $(">div", this).outerHeight() - $(">div", this).height();
                $(">div", this).height(maxHeight - adjust);
            });
        };

        $("[class^=ui-grid-]", container).each(function () {
            var maxHeight = 0;
            var blocks = $(">[class^=ui-block-]", this);
            var set = [];
            var tempSet = [];
            blocks.each(function (index) {
                var _class = $(this).attr("class");
                if ($.inArray(_class, tempSet) >= 0) {
                    fixBlocks(set);
                    tempSet = [];
                    set = [];
                }
                set.push(this);
                tempSet.push(_class);
                if (index == blocks.length - 1)
                    fixBlocks(set);
            });
        });
    }
}; 
```

# html - div 的大小 (.well) - Twitter Bootstrap

> ID：10190725
> 
> 赞同：1
> 
> 时间：2012-04-17T11:53:40.553
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Twitter Bootstrap、流畅的布局构建一个网站。我在左边有我的内容，在右边有一个小菜单，我希望菜单在井中。

```
<div class="row-fluid">
    <div class="span9">...</div>
    <div class="span3">
        <div class="well" style="height: 100%;">
            <a href="/project/add" class="btn btn-small span2" style="text-align: left;"><i class="icon-plus"></i>   Een project toevoegen</a>
            <a href="/project/allindex" class="btn btn-small span2" style="text-align: left;"><i class="icon-list"></i>   Alle projecten bekijken</a>
            <a href="#" class="btn btn-small span2" style="text-align: left;"><i class="icon-print"></i>   Deze lijst afdrukken</a>
        </div>
    </div>
</div> 
```

问题是井没有足够的高度来包含菜单中的所有链接。我不想手动设置高度，因为菜单是由 PHP 生成的，我不希望它比必要的大。

```
<div class="row-fluid">
    <div class="span9">...</div>
    <div class="span3 well">
        <a href="/project/add" class="btn btn-small span2" style="text-align: left;"><i class="icon-plus"></i>   Een project toevoegen</a>
        <a href="/project/allindex" class="btn btn-small span2" style="text-align: left;"><i class="icon-list"></i>   Alle projecten bekijken</a>
        <a href="#" class="btn btn-small span2" style="text-align: left;"><i class="icon-print"></i>   Deze lijst afdrukken</a>
    </div>
</div> 
```

这使得井足够大以包含所有链接，但它使 span3 div 太大，它不再适合 span9 div 旁边。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:20:36.567

您`.well`的包装不正确，因为按钮正在浮动。只需将它们定义为`float:none`您的样式表（而不是 bootstrap.css 样式表），它应该可以工作。

**HTML**

```
<div class="row-fluid">
    <div class="span9">...</div>
    <div class="span3">
        <div class="well menu">
            <a href="/project/add" class="btn btn-small span2" style="text-align: left;"><i class="icon-plus"></i>   Een project toevoegen</a>
            <a href="/project/allindex" class="btn btn-small span2" style="text-align: left;"><i class="icon-list"></i>   Alle projecten bekijken</a>
            <a href="#" class="btn btn-small span2" style="text-align: left;"><i class="icon-print"></i>   Deze lijst afdrukken</a>
        </div>
    </div>
</div> 
```

**CSS**

```
.menu .btn {
   float:none;
} 
```

**注意：**我定义了一个`.menu`类来定位您的`.well`部分，这样您从引导程序修改的任何 css 都将仅适用于该部分，而不适用于文档的其余部分。

# qt - 使用 mkdir() 在 QFileSystemModel 中创建目录

> ID：10190728
> 
> 赞同：1
> 
> 时间：2012-04-17T11:54:02.037
> 
> 标签：qt

我制作了一个简单的程序，使用 QFileSystemModel 在 QTreeView 中显示目录列表。

使用 QPushButton，程序正在调用正在创建新目录的插槽，但它从不创建新目录。

这是创建新目录的插槽：

```
QModelIndex index=viewTreeForModel->currentIndex();

if (!index.isValid()) return;

QString filename=QInputDialog::getText(this, "Enter Name Dialog", "Enter name");

modelFile->mkdir(viewTreeForModel->currentIndex(), filename); 
```

程序运行时我没有收到错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:01:47.400

检查`QModelIndex`mkdir 返回的是否有效。

你也可以试试

```
const bool success = QDir(modelFile->filePath(index)).mkdir(string); 
```

然后检查 的值`success`。

顺便说一句，我建议将变量重命名为`string`，`newfilename`这将使代码更具可读性。

# php - REST Web 服务：Symfony 2 与 silex

> ID：10190732
> 
> 赞同：7
> 
> 时间：2012-04-17T11:54:13.577
> 
> 标签：php, rest, symfony, silex

我们将在 PHP 中实现一组 REST Web 服务。为此，我们选择了 2 个框架：Symfony 2 和 Silex（作为 phar 存档的微框架，基于 Symfony2）。

目前，只有少数服务，少数资源以 GET 形式返回，但方法集最终会增长并包括其他休息操作（put/post/delete）。

这是迄今为止我对这两个框架的优缺点列表

***Symfony2***

优点：

*   更有力
*   学说 ORM
*   可以用 XDebug 调试
*   YML 中的配置
*   更多用于社区
*   更多支持
*   IDE中的自动完成
*   快速地

缺点：

*   需要 FOSBundle 来做 REST（？）（实际上，我想知道这是否真的有用）

**硅橡胶**

优点：

*   轻的
*   似乎更容易创建 REST url (?)
*   更易于部署（phar 存档）

缺点：

*   没有教义 ORM
*   无法调试（phar 存档）
*   IDE中没有自动完成
*   配置必须是硬编码的
*   可能会慢一点，因为它在 phar 存档中？

你认为哪一个是最好的？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T06:38:06.780

真的取决于你的项目的大小，既然你说它很小，我会选择 Silex。

[当您通过 composer 包含](http://packagist.org/packages/silex/silex)Silex 时，几乎排除了您为 Silex 列出的所有缺点。然后它只是在供应商内部加载 Silex 依赖项，您没有 phar 的开销，也没有 IDE 中缺少代码完成的问题。事实上[，PHAR 分布已被弃用](http://silex.sensiolabs.org/download)。

至于 Doctrine，Silex 有一个[内置的 Doctrine ServiceProvider](http://silex.sensiolabs.org/doc/providers/doctrine.html)，可以在您的 Silex 项目中无缝加载 Doctrine DBAL。您可以自己轻松添加 DoctrineORM，也可以使用github 上的[第 3 方 serviceProviders之一。](https://github.com/search?q=silex%20doctrine&type=Everything&repo=&langOverride=&start_value=1)

我正在使用 Silex 构建一个相当大的 REST API，并且从 Silex 开始没有后悔任何事情。您可以获得 Symfony2 组件的许多优势，因为 silex 是用它们构建的，并且具有非常轻量级的 rest-ready 微框架，而无需经历数小时的 yaml 配置和设置。

老实说，我必须承认我不是注释的忠实粉丝，注释很好，但我认为@mcfedr 的例子有点过头了，但这只是个人品味。

我希望我已经揭穿了您对 Silex 的一些偏见。给它一个摇摆，你不会后悔的。另一方面，你可能也不会后悔 Symfony2 :)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-17T12:11:13.047

就我个人而言，我真的很喜欢 symfony 2，它很容易使用注释语法创建 REST url，在你的控制器中你可以放一些类似的东西

```
/**
 * @Route("/user/{id}", requirements={"id" = "\d+"}, defaults={"_format"="json"})
 * @Method({"GET"})
 */
 public function getUser($id) {
     ...
 }
 /**
 * @Route("/user", defaults={"_format"="json"})
 * @Method({"PUT"})
 */
 public function putUser() {
     ...
 } 
```

# wpf - 动画不使用 WPF VisualStateManager 播放

> ID：10190733
> 
> 赞同：1
> 
> 时间：2012-04-17T11:54:16.227
> 
> 标签：wpf, animation, triggers, visualstatemanager

我希望添加到我的 ItemsControl 的项目在添加时为高度设置动画。以下示例使用触发器完成了这项工作，但我无法让它与项目的非固定高度（在本例中为 50）一起工作。

```
<ItemsControl ItemsSource="{Binding Notifications}">
<ItemsControl.Resources>
    <DataTemplate DataType="{x:Type Notifications1:Notification}">
        <Button x:Name="ItemButton"
                ClipToBounds="True"
                Height="0">
            <Button.Template>
                <ControlTemplate>
                    <Notifications:NotificationTile />
                </ControlTemplate>
            </Button.Template>
        </Button>
        <DataTemplate.Triggers>
            <EventTrigger RoutedEvent="FrameworkElement.Loaded"
                            SourceName="ItemButton">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetProperty="Height"
                                            Storyboard.TargetName="ItemButton"
                                            Duration="0:0:0.5"
                                            To="50" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
</ItemsControl.Resources> 
```

然后我尝试使用 VisualStateManager 来执行动画，这样图块就会增长到它们需要的任何高度。在下面的示例中，项目以正确的大小添加，但不执行动画。我假设 EventTrigger 甚至没有被解雇？

任何想法都非常感谢！

```
<ItemsControl ItemsSource="{Binding Notifications}"
            Width="230"
            ScrollViewer.HorizontalScrollBarVisibility="Hidden"
            HorizontalContentAlignment="Stretch">

<ItemsControl.Resources>
    <DataTemplate DataType="{x:Type Notifications1:Notification}">
        <Button x:Name="ItemButton"
                ClipToBounds="True"
                Command="{Binding DataContext.ItemClicked, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"
                CommandParameter="{Binding}"
                Visibility="{Binding IsVisible, Converter={StaticResource boolToVisibilityConverter}}">
            <Button.Template>
                <ControlTemplate>
                    <Notifications:NotificationTile />
                </ControlTemplate>
            </Button.Template>

            <VisualStateManager.CustomVisualStateManager>
                <is:ExtendedVisualStateManager />
            </VisualStateManager.CustomVisualStateManager>
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup is:ExtendedVisualStateManager.UseFluidLayout="True">
                    <VisualStateGroup.Transitions>
                        <VisualTransition GeneratedDuration="0:0:2" />
                    </VisualStateGroup.Transitions>
                    <VisualState x:Name="Collapsed">
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(FrameworkElement.Height)"
                                                Storyboard.TargetName="ItemButton"
                                                Duration="0"
                                                To="0" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Expanded">
                        <Storyboard>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)"
                                                            Storyboard.TargetName="ItemButton">
                                <DiscreteDoubleKeyFrame KeyTime="0"
                                                        Value="NaN" />
                            </DoubleAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>

            <i:Interaction.Triggers>
                <i:EventTrigger SourceName="ItemButton"
                                EventName="(FrameworkElement.Loaded)">
                    <is:GoToStateAction StateName="Expanded" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button>
    </DataTemplate>
</ItemsControl.Resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:04:20.387

也许这有点离题，对此感到抱歉。我不确定我是否完全理解你的问题。无论如何，一般不建议使用只有“To”的动画，因为“From”最初设置为 Double.NaN，而 DoubleAnimation 在这种情况下不起作用。

# php - 验证失败时突出显示的输入字段

> ID：10190735
> 
> 赞同：0
> 
> 时间：2012-04-17T11:54:17.137
> 
> 标签：php, javascript, jquery

我有三个下拉字段我想在验证失败后突出显示这三个字段，但在验证后只突出显示一个字段并且在选择该字段表单后提交，对于其他两个字段脚本不起作用

```
$("#inputSubmit").click(function(){

    var pColor = $("#select").val();
    var pSize = $("#select2").val();
    var pQuantity = $("#select3").val();

    if((pColor == '') || (pColor == 'color')) 
    {

        $("#select").css("border-color", "red");
        $("#error").show();

    } 
    if((pSize == '') || (pSize == 'size')) 
    {
        alert(1);
        $("#select2").css("border-color", "red");

    }

   if((pQuantity = '') || (pQuantity == 'quantity')) 
    {
        $("#select3").css("border-color", "red");
    }

    if( (pColor != 'color') && (pSize != 'size') && (pQuantity != 'quantity'))
    {       

        $("#InputForm").submit();
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:58:41.617

尝试这样的事情：

```
var isValid = $('select').filter(function() {
    return !this.value || this.value == $(this).data('default-value');
}).css("border-color", "red").length​ == 0;

if (isValid)
    $("#InputForm").submit(); 
```

对于每个`<select>`元素，放置一个`data-default-value`具有默认值的属性，并且......**它是用五行而不是 20 完成的**！

# bash - Bash 脚本，数组未按预期创建

> ID：10190738
> 
> 赞同：4
> 
> 时间：2012-04-17T11:54:22.643
> 
> 标签：bash, shell

我对 bash 脚本很陌生，我显然缺少一些相当基本的理解，因为我无法弄清楚为什么这个脚本没有像我预期的那样运行。我做了一个简单的例子来重现这个问题，它应该制作 3 个文件夹，里面有 3 个文件夹，然后`test`在每个文件夹中触摸一个文件。

这是脚本：

```
#!/bin/sh
DIR_LEVEL_1=("1" "2" "3")
for DIR_1 in ${DIR_LEVEL_1[@]}; do
  mkdir $DIR_1
  DIR_LEVEL_2=("$DIR_1/a" "$DIR_1/b" "$DIR_1/c")
  echo $DIR_LEVEL_2
  for DIR_2 in ${DIR_LEVEL2[@]}; do
    mkdir $DIR_2
    touch "$DIR_2/test"
  done
done 
```

我遇到的问题是它没有进入第二个 for 循环，我输入了那个 echo，看起来第二个数组没有正确创建，因为脚本的输出是：

```
1/a
2/a
3/a 
```

这只是数组的第一个元素。

使用`-xv`标志运行我得到了这个，这表明它没有注意到嵌套的 for 循环（我猜是因为数组没有按照我的意愿创建？）

```
#!/bin/sh
DIR_LEVEL_1=("1" "2" "3")
+ DIR_LEVEL_1=("1" "2" "3")
for DIR_1 in ${DIR_LEVEL_1[@]}; do
  mkdir $DIR_1
  DIR_LEVEL_2=("$DIR_1/a" "$DIR_1/b" "$DIR_1/c")
  echo $DIR_LEVEL_2
  for DIR_2 in ${DIR_LEVEL2[@]}; do
    mkdir $DIR_2
    touch "$DIR_2/test"
  done
done
+ for DIR_1 in '${DIR_LEVEL_1[@]}'
+ mkdir 1
+ DIR_LEVEL_2=("$DIR_1/a" "$DIR_1/b" "$DIR_1/c")
+ echo 1/a
1/a
+ for DIR_1 in '${DIR_LEVEL_1[@]}'
+ mkdir 2
+ DIR_LEVEL_2=("$DIR_1/a" "$DIR_1/b" "$DIR_1/c")
+ echo 2/a
2/a
+ for DIR_1 in '${DIR_LEVEL_1[@]}'
+ mkdir 3
+ DIR_LEVEL_2=("$DIR_1/a" "$DIR_1/b" "$DIR_1/c")
+ echo 3/a
3/a 
```

所以它只创建第一级文件夹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:09:54.140

您在这里遇到三个问题：

1.  `#!/bin/bash`如果你想使用 bash，脚本应该以 bash 开头，而不是`#!/bin/sh`
2.  `echo $ARRAY`将只输出数组的第一个元素，而不是整个数组，这就是为什么它看起来只在做第一个元素 - 它不是，但它只是打印第一个元素。用于`echo ${ARRAY[@]}`输出整个数组。
3.  当您迭代第二个数组时，您的变量名错误。您的数组是`DIR_LEVEL_2`，但您正在迭代`${DIR_LEVEL2[@]}`，它是空的（因此没有迭代）。您在`2`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T12:07:19.263

好吧，您的脚本的真正问题是您创建`DIR_LEVEL_2`了 ，但您迭代了`DIR_LEVEL2`. （注意下划线的区别）。但是，您也忽略了 quote `"${array[@]}"`，这意味着它不会正确拆分单词。除此之外，我是否建议您使用大括号扩展来使整个事情变得更好？

```
#!/bin/bash

dirs=( {1,2,3}/{a,b,c} )
mkdir -p "${dirs[@]}"
for d in "${dirs[@]}"; do
    touch "$d/test"
done 
```

编辑/后记：我注意到你上面的脚本使用了`#!/bin/sh`，但你已经标记了这篇文章`bash`。它们不是同一件事。除非您确定要以 bash 的更大功能集换取 sh 的更大可移植性，否则请使用`#!/bin/bash`.

# mysql - 如何使用 E/R 图绘制以下数据库模式？

> ID：10190743
> 
> 赞同：1
> 
> 时间：2012-04-17T11:54:37.633
> 
> 标签：mysql, sql, database-design, entity-relationship, diagram

**如何使用 E/R 图绘制以下数据库模式？（草图或最终图像会有所帮助）。**如果您能指导我学习有关实体关系的易于理解的教程，我也将不胜感激，这样我就可以先学习如何在纸上绘制它们。

1.  CD 有标题、制作年份和 CD 类型。（CD 类型可以是任何类型：mini-CD、CD-R、CD-RW、DVD-R、DVD-RW...）
2.  一张 CD 通常在不同的轨道上有多首歌曲。每首歌都有一个名字、一个艺术家和一个曲目编号。实体集 Song 被认为是**弱**的，需要实体集 CD 的支持。
3.  CD 由具有名称和地址的生产者制作。
4.  一张 CD 可能由多个供应商提供，每个供应商都有名称和地址。
5.  客户可以租用多张 CD。需要记录客户信息，例如社会安全号码 (SSN)、姓名、电话。还应记录租用的日期和期限（以天为单位）。
6.  客户可以是普通会员，也可以是VIP会员。VIP 会员拥有其他信息，例如 VIP 身份的开始日期和折扣百分比。

这个实体图正确吗？这真是令人困惑。我只是根据直觉而不是他们在教科书中教授的系统方法构建了这个图表。我仍然无法理解多对一关系、弱实体、外键。

![在此处输入图像描述](../Images/3695be3276ae090d4dc82da719257c46.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:04:42.563

[维基百科](http://en.wikipedia.org/wiki/Entity_relationship_diagram)上有一篇关于 ERD 的公平文章。

当您开始一个新的 ERD 时 - 无论是手绘还是计算机绘制 - 您应该首先关注实体（*实体集*）。添加关系，然后担心充实您的非关键谓词。当您获得一些 ERD 的经验时，您将达到不需要更多工作来实现规范化的地步。它会开始自然而然地出现在你身上。

您可能需要对图表进行很多更改。由于这可能是家庭作业，我会给你一个可供考虑的替代图表：

![在此处输入图像描述](../Images/3f9840dc4b9780b45af7d93d5ec42c52.png)

此模型采用更复杂的规则视图，例如：

*   歌曲可以在同一张 CD 和不同的 CD 上多次出现。
*   一首歌曲可以由给定曲目中的多个艺术家演奏。
*   制作人可以在 CD 上进行合作。

这些都不一定适合您的模型。这取决于您的业务规则。

将您的模型与此模型进行比较，并问自己有什么不同以及为什么您可能要采用一种方法或另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:11:18.373

取所有主要概念，为每个概念画一个框

在方框中输入主要概念的名称，如 SONG，然后加下划线

在主要概念下，列出名称等所有属性

从一个盒子到另一个盒子画线，这些概念是链接的（通常通过一个属性），比如从 CD 到 SONG 的线

# python - python 2.7 处理 zip 文件

> ID：10190744
> 
> 赞同：2
> 
> 时间：2012-04-17T11:54:39.773
> 
> 标签：python, zip

在使用 zip 文件时，我遇到了一个有趣的问题。使用一个 zip 文件一切正常，而另一个 zip 文件假设是相同的（其中的文件与在十六进制视图中查看它们的点相同）。

但是有一个文件我得到一个错误

`(<type 'exceptions.UnicodeDecodeError'>, UnicodeDecodeError('utf8', '\xef\xbb\xbbegin penalites....)`

我在用`python 2.7`

这是代码

```
 dtacont  = unicode(z.read(datoteka),'utf-8').replace("\r","").split("\n"). 
```

这是程序停止的地方。我正在使用 zipfile 包。如果您想要这些文件，请告诉我在哪里托管它们。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:12:06.657

这不是读取 zip 的问题，但您的 zip 文件的内容似乎包含非 utf-8 字符，因此 decode(unicode(...)) 失败。

# php - 在使用 php 交付的 Android 设备上通过 JWPlayer 查看 mp4 视频

> ID：10190750
> 
> 赞同：0
> 
> 时间：2012-04-17T11:54:56.190
> 
> 标签：php, android, mobile, jwplayer

这让我难过了好几天。我正在尝试在 Android 手机上查看并使用 php 传递文件时通过 JWPlayer 播放 mp4 视频。

到目前为止，我已经确定当我将 JWPlayer 直接链接到文件时，mp4 确实可以工作，但当我尝试在 php 中使用 fread 时却不行。虽然如果我在使用相同的 fread 功能时在我的 PC 上观看视频，它可以工作。所以mp4适用于手机和PC，fread功能只适用于PC。是什么阻止了它的工作？

我已经尝试过[这里](https://stackoverflow.com/questions/5924061/using-php-to-output-an-mp4-video)的功能，甚至添加了评论中提到的建议的“session_write_close()”，在移动设备上不行，在 PC 上很好。我在 Mobiforge 使用了指向同一个问题的答案 2 的功能，再次在 PC 上工作而不是在移动设备上工作。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:46:24.840

我发现脚本中抛出了一个错误，阻止了请求的完成。现在一切正常，谢谢。

# mysql - MySQL选择分页限制

> ID：10190763
> 
> 赞同：-1
> 
> 时间：2012-04-17T11:56:04.223
> 
> 标签：mysql, select, join, pagination, unique

我有从我的表中选择的结果：

```
id  tag
1   hey
1   wow
2   cry
87   game
87   bmw
6   lady
7   wow 
```

但是我通过 JOIN 得到了这个结果。我的完整 SQL 查询：

```
SELECT sites.id, sites.host, sites.url, sites.password, sites.status, sites.pr, sites.tyc, sites.alexa, sites.lastcheck, sites.comment, tags.tagname, tags.tagid FROM sites
LEFT JOIN sites_tags ON sites_tags.shellid = sites.id 
LEFT JOIN tags ON sites_tags.tagid = tags.tagid 
```

对于分页，我需要来自查询的 3 个实际数据。

如果我的查询 - LIMIT 3，我想得到

```
1   hey
1   wow
2   cry
87   game
87   bmw 
```

但不是

```
 1   hey
 1   wow
 2   cry 
```

例如，我需要所有受 ID 限制的结果，而不是行。

抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:05:25.537

```
SELECT 
    s.id, 
    s.host, 
    s.url, 
    s.password, 
    s.status, 
    s.pr, 
    s.tyc, 
    s.alexa, 
    s.lastcheck, 
    s.comment, 
    tags.tagname, 
    tags.tagid 
FROM (
    SELECT
        id, 
        host, 
        url, 
        password, 
        status, 
        pr, 
        tyc, 
        alexa, 
        lastcheck, 
        comment
    FROM sites
    LIMIT 3
) s
LEFT JOIN sites_tags ON sites_tags.shellid = s.id 
LEFT JOIN tags ON sites_tags.tagid = tags.tagid 
```

这假设您想要的是与 3 个站点相关的标签。这将选择 3 个站点的站点信息，然后还将选择任何标记（如果有）。

但是它不会准确地返回您想要的内容，您最好按一个查询来选择所有字段`sites`

```
SELECT
    id, 
    host, 
    url, 
    password, 
    status, 
    pr, 
    tyc, 
    alexa, 
    lastcheck, 
    comment
FROM sites
LIMIT 3 
```

然后第二次执行以下操作以获取这些站点的标签。

```
SELECT 
    sites_tags.shellid AS id, 
    tags.tagname, 
    tags.tagid 
FROM sites_tags
INNER JOIN tags ON sites_tags.tagid = tags.tagid
WHERE sites_tags.shellid IN (..... your ids go here ......) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:05:04.383

（猜测`id`指的是`sites.id`）

替换`FROM sites`为：

```
FROM ( SELECT * 
       FROM sites 
       ORDER BY whatever 
       LIMIT 3
     ) AS sites 
```

# javascript - 文件转换 vtk 到 obj 或其他格式

> ID：10190764
> 
> 赞同：0
> 
> 时间：2012-04-17T11:56:04.993
> 
> 标签：javascript, ruby, three.js, webgl, vtk

我想将 .vtk 文件转换为 .obj 或 .json。

由于[vtk](http://www.vtk.org/VTK/resources/software.html)提供[vtkOBJExporter](http://www.vtk.org/doc/release/5.6/html/a01223.html)类，因此可以进行转换。但我如何做到这一点？我安装了可视化工具包，但是当我打开它时，只显示了一个控制台。我怎样才能调用转换方法？

我想要实现的是从 ruby​​ 调用 vtk.exe 并将所有给定的 vtk 文件转换为可以显示在 webgl 画布中的文件，我不想使用 [xtk](http://www.goxtk.com)。相反，我想使用[three.js](http://www.threejs.org)。

有人在做类似的事情吗？或者有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:57:16.787

Three.js (r49) 现在有一个 vtk 加载器。

问题：[https ://github.com/mrdoob/three.js/issues/1721](https://github.com/mrdoob/three.js/issues/1721)

示例： http: [//mrdoob.github.com/three.js/examples/webgl_loader_vtk.html](http://mrdoob.github.com/three.js/examples/webgl_loader_vtk.html)

源代码： [https ://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_vtk.html](https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_vtk.html)

# c# - 从 C# 中的函数中获取当前正在执行的函数的名称

> ID：10190773
> 
> 赞同：2
> 
> 时间：2012-04-17T11:56:31.803
> 
> 标签：c#, reflection, methods

有没有办法以编程方式获取当前代码正在执行的方法或属性的名称？

`void Test() { MessageBox.Show("This is a message from " + GetNameOfCurrentMethod); }`

我想过抛出一个异常，捕获它并解析堆栈跟踪，但应该有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:58:54.873

尝试：

```
MethodInfo.GetCurrentMethod().Name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:58:51.410

```
System.Reflection.MethodBase.GetCurrentMethod().Name; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:00:10.740

你搜索过吗？[C#如何从代码中获取当前方法的名称](https://stackoverflow.com/questions/2652460/c-sharp-how-to-get-the-name-of-the-current-method-from-code%20Stackoverflow)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:18:33.813

目前不相关，但对于未来的读者，.NET 4.5 引入了一个`CallerMemberNameAttribute`可应用于可选方法参数以获取调用者信息的方法（前提是它不会从 Beta 版删除到 RTM！）。[http://msdn.microsoft.com/en-us/library/hh534540(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh534540(v=vs.110).aspx)

# .net - 在与数据库无关的架构中处理不同的 DbType 枚举，如何处理？

> ID：10190779
> 
> 赞同：1
> 
> 时间：2012-04-17T11:57:06.843
> 
> 标签：.net, vb.net, design-patterns, ado.net

这是我目前的设置：

```
Public Interface IDatabase
   Function CreateParameter(name as String, dbType as <dbTypeEnumeration>)
End Interface

Public Class OracleDatabaseRepository
    Implements IDatabase
    Public Function CreateParameter(ByVal name As String, ByVal dbtype As <dbTypeEnumeration>) As Object
    End Function
End Class

Public Class SQLServerRepository
    Implements IDatabase
    Public Function CreateParameter(ByVal name As String, ByVal dbtype As <dbTypeEnumeration>) As Object
    End Function
End Class

Public Class DatabaseService
    Private _rep As IDatabase
    Sub New(ByRef rep As IDatabase)
        _rep = rep
    End Sub
    Public Function CreateParameter(ByVal name As String, ByRef dbtype As <dbTypeEnumeration>) As Object
       _rep.CreateParameter(name, dbtype)
    End Function
End Class 
```

这里的问题是 dbTypeEnumeration 到底是什么。在上面的示例中，它只是我的问题所在的占位符。由于我们同时使用 Oracle 和 SQL Server 数据库，因此 DbType 因所使用的数据库而异。对于 Oracle，OracleClient 对象有自己的 OracleDbType 枚举类型。SQL Server 也有自己的枚举。

我的问题是：是否可以根据注入 DatabaseService 构造函数的存储库来显示那些特定于数据库的枚举？如果没有，最好的方法是什么？我想分离两个数据库，共享逻辑，并允许未来的开发，将接口作为该开发的代码契约。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:40:39.427

撇开存储库实现的正确性不谈，我会更改`DbType`抽象级别。

这`interface`与数据库无关。

```
Public Interface IDatabase
    Function CreateParameter(ByVal name As String, ByVal type As Type) As Object
End Interface 
```

db 约束的实现应该在你的具体`Repository`本身中。您还希望如何保持其通用性但在两种类型之间仍然存在差异？

```
Public Class SqlServerRepo : Implements IDatabase

    Private Shared typeLookup As Dictionary(Of Type, Data.SqlDbType) = New Dictionary(Of Type, SqlDbType)

    Shared Sub New()
       (...Fill the dict according to your specification ...)
    End Sub

    Public Function CreateParameter(name As String, type As Type) As Object Implements IDatabase.CreateParameter
        Dim concreteDbType = typeLookup(type)
        (.. your parameter creation here ..)
    End Function
End Class

Public Class OracleServerRepo : Implements IDatabase

    Private Shared typeLookup As Dictionary(Of Type, OracleType) = New Dictionary(Of Type, OracleType)

    Shared Sub New()
        (...Fill the dict according to your specification ...)
    End Sub

    Public Function CreateParameter(name As String, type As Type) As Object Implements IDatabase.CreateParameter
        Dim concreteDbType = typeLookup(type)
         (.. your parameter creation here ..)
    End Function
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:24:10.523

尽管您的类中有存储库一词，但它们并没有真正遵循存储库设计模式。看看这个[MSDN 对 Repository Design Pattern 的详细描述](http://msdn.microsoft.com/en-us/library/ff649690.aspx)。存储库应返回代表应用程序域的实体/对象，而不是数据库特定信息（即 dbType）。存储库从数据库详细信息中封装用户，并将处理将 DB 类型转换为适当的 .NET 类型。

# c# - 正确的程序结构

> ID：10190781
> 
> 赞同：3
> 
> 时间：2012-04-17T11:57:14.683
> 
> 标签：c#, oop

我的应用程序用于与电子设备通信。它从传感器读取一些识别数据（如设备固件版本）、一些配置数据和周期性数据。程序分为三层：

1.  数据层 - 描述数据如何存储在设备内存中的简单结构。

2.  业务层 - 用于与设备通信的类。它们包含来自数据层的结构，并在读取和写入设备时使用它们来存储数据。

3.  表示层 - 用户界面（WinForms）；使用业务层类。

**假使，假设：**

数据结构如下所示：

```
public struct Configuration
{
 public int Option1;
 public int Option2;
}

public struct Visualization
{
 public int Temperature;
 public int Pressure;
} 
```

业务层类包装了这些结构并包含通信逻辑：

```
public abstract class BaseEntity<DataStructureType>
{
 protected DataStructureType dataStructure;
 public BaseEntity()
 {
  this.dataStructure = new DataStructureType();
 }
 /*
  device communication logic
 */
 public abstract bool GetAllData();
}

public class ConfigurationEntity : BaseEntity<Configuration>
{
 public override bool GetAllData()
 {
  //getting configuration data from device
 }
 public int Option1
 {
  get { return this.dataStructure.Option1; }
  set { this.dataStructure.Option1 = value; }
 }
 public int Option2;
 {
  get { return this.dataStructure.Option2 * 100; }
  set { this.dataStructure.Option1 = value / 100; }
 }
}

public class VisualizationEntity : BaseEntity<Visualization>
{
 public override bool GetAllData()
 {
  //getting visualization data from device
 }
 public int Temperature
 {
  get { return this.dataStructure.temperature; }
 }
 public float Pressure;
 {
  get { return Conversions.IntToPressure(this.dataStructure.pressure); }
 }
} 
```

而用于转换二进制数据的 Conversions 类：

```
public static class Conversions
{
 public static float IntToPressure(int parameter)
 {
  return PressureAlgorithmA(parameter);
 }
 private static float PressureAlgorithmA(int parameter)
 {
  //some algorithm (called A) to convert binary pressure to pressure in bars
 }
} 
```

**问题是**新的固件版本，因为应用程序应该处理两个设备版本（旧的和新的）。新版本已经更新了几个新的结构，新的转换算法，新的配置选项。看起来像：

```
public struct Configuration
{
 /*
  old options are here
 */
 //and updated goes here:
 public int Option3;
 public int Option4;
}

public class ConfigurationEntity : BaseEntity<Configuration>
{
 /*
  old code is here
 */
 //and updated goes here
 public int Option3
 {
  get { return this.dataStructure.Option3; }
  set { this.dataStructure.Option3 = value; }
 }
 public int Option4;
 {
  get { return this.dataStructure.Option4 * 20; }
  set { this.dataStructure.Option4 = value / 20; }
 }
} 
```

转换也已更改：

```
public static class Conversions
{
 public static float IntToPressure(int parameter)
 {
  return PressureAlgorithmB(parameter);
 }
 private static float PressureAlgorithmB(int parameter)
 {
  //some algorithm (called B) to convert binary pressure to pressure in bars
 }
} 
```

现在我必须在每次需要使用新功能时检查设备版本（从配置更改选项 3 或选项 4 时，或者当我需要使用新数据实体或向用户显示压力时使用哪种算法时）。

我的问题是如何使用 OOP 实践来做到这一点？在 C# 中执行此操作的正确方法是什么？

我在考虑工厂模式，但是配置中的新选项或新数据实体呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:11:09.447

如果您需要为不同版本的外部组件（在您的情况下为设备）维护相同的架构，基于插件的架构可以帮助您。

例如，您可以：

每个`BusinessLayer`类都应该实现`IPluginInterface`（比如说），因为这是应该与设备进行实际通信的层。

应该有一些`Communicator`类，他们读取设备版本信息并从可用的集合中挑选`BusinessLayers`，能够管理所需版本的类。

只是给你一个想法。

# android - 关于inject_events securityexception 异常

> ID：10190784
> 
> 赞同：1
> 
> 时间：2012-04-17T11:57:19.573
> 
> 标签：android, exception, permissions

我正在尝试通过在有根的 Sumgsung P1000 上调用 injectMotionEvent 来模拟触摸点击

我参考链接： [Android INJECT_EVENTS 权限](https://stackoverflow.com/questions/5383401/android-inject-events-permission) 虽然我成功将apk文件推送到/system/app，但仍然获得INJECT_EVENTS异常。

此外，我检查了我的应用程序的运行权限并意识到它仍在以非 root 权限运行：

app_105 2814 2394 212416 23468 ffffffff 00000000 S

我的问题是：除了[Android INJECT_EVENTS 权限](https://stackoverflow.com/questions/5383401/android-inject-events-permission)中提到的项目，我还想念什么？

我是否需要以编程方式将我提升为 root ，例如：

```
try {
        Log.v("investigation","try to boost itself") ; 
        Runtime.getRuntime().exec("su");
      //Runtime.getRuntime().exec("reboot");
    } catch (IOException e) {
        Log.v("investigation" , "Failed to get su priviledge\n") ; 
        e.printStackTrace();
    } 
```

本质上，这个片段实际上并没有让我兴奋。

请帮助启发我。非常感谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:04:15.350

只有 root 权限是不够的`INJECT_EVENTS`，您必须使用**固件签名密钥**对您的应用程序进行签名。

对于普通的 SDK 应用程序，您不能注入事件。

# javascript - 如何正确地将我的嵌入音频和 javascript 转换为 HTML5 音频？

> ID：10190790
> 
> 赞同：0
> 
> 时间：2012-04-17T11:57:35.503
> 
> 标签：javascript, html5-audio

目前，我在我的网站上使用带有嵌入标签和 javascript 的旧技术使用声音。我想将这些转换为 HTML5，但我没有成功。

这是我目前的代码：

HTML：

```
<div class="au">
    <embed src="audio/tileSelect.wav" autostart="false" width="1" height="1" hidden="true" id="sound1" enablejavascript="true">
    <embed src="audio/tileRemove.wav" autostart="false" width="1" height="1" hidden="true" id="sound2" enablejavascript="true">
</div> 
```

JS：

```
//Sounds
function playSound(soundobj) {
    if (document.getElementById('sound').checked) { //if this checkbox is checked, play sounds
        var thissound=document.getElementById(soundobj);
        thissound.Play();
    }
} 
```

JS在其他函数中用于触发声音：

```
playSound('sound1');
playSound('sound2'); 
```

所以上述所有工作。现在将其转换为 HTML5。HTML 部分很简单，我认为它应该是这样的：

HTML5：

```
<!--HTML5 audio-->
<audio id="sound1" preload="auto">
    <source src="audio/tileSelect.wav" type="audio/wav" />
</audio>
<audio id="sound2" preload="auto">
    <source src="audio/tileRemove.wav" type="audio/wav" />
</audio> 
```

但是对于 JS 部分，我有点卡住了。有人对此有任何想法吗？试图更改`soundobj`为`soundid`，但没有运气。

非常感谢，莫里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:21:31.527

您发布的代码有两个问题。

第一个可能是这样的标记：

```
<audio id="sound1" src="audio/tileSelect.wav" preload="auto"></audio>
<audio id="sound2" src="audio/tileRemove.wav" preload="auto"></audio> 
```

您使用的`<video>`-like 源符号在任何地方都没有记录（尽管我不得不承认它并没有*感觉*错 - 但是我还从未使用过 HTML5 音频），请参阅**[MDN 文档](https://developer.mozilla.org/en/Using_HTML5_audio_and_video)**

* * *

**编辑：**显然可以在`source`元素内使用`audio`元素：

> **允许的内容：**透明内容，包含一个 src 属性或一个或多个元素，后跟流程内容或短语内容，没有或元素。

请参阅：[https ://developer.mozilla.org/en/HTML/Element/audio](https://developer.mozilla.org/en/HTML/Element/audio)

您仍然不需要它，因为您只有一个源文件。

* * *

第二个问题是您使用的是`.Play()`（大写 P）不存在的方法，应该称为`.play()`. 所以你的 JS 应该是这样的：

```
function playSound(soundobj) {
    if (document.getElementById('sound').checked){
        document.getElementById(soundobj).play();
    }
}
playSound('sound2'); //should play 'audio/tileRemove.wav' 
```

# java - 用 Java 解析 ASN.1 二进制数据

> ID：10190795
> 
> 赞同：23
> 
> 时间：2012-04-17T11:57:57.687
> 
> 标签：java, parsing, asn.1

我有二进制 ASN.1 数据对象，需要解析到我的 Java 项目中。我只想要 ASN.1 结构和数据，例如由 BER 查看器解析：

![BER 查看器中显示的 ASN.1 结构](../Images/a8af0133be6c48fa744905d7f6f25bee.png)

BouncyCastle 的 ASN.1 解析器无法解析此结构（仅返回应用程序特定的二进制数据类型）。

**我可以使用什么 ASN.1 库来获得这样的结果？有人有演示如何解析 ASN.1 对象的示例代码吗？**

顺便说一句：我还尝试了几个免费的 ASN.1 Java 编译器，但没有一个能够生成给定 ASN.1 规范的工作 Java 代码。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-11T11:57:21.363

我必须纠正自己 - 可以使用 BouncyCastle 中包含的 ASN.1 解析器读取数据 - 但是过程并不那么简单。

如果您只想打印 ASN.1 结构中包含的数据，我建议您使用[org.bouncycastle.asn1.util.ASN1Dump](http://grepcode.com/file/repo1.maven.org/maven2/org.bouncycastle/bcprov-jdk14/1.46/org/bouncycastle/asn1/util/ASN1Dump.java)类。它可以被以下简单的代码片段使用：

```
ASN1InputStream bIn = new ASN1InputStream(new ByteArrayInputStream(data));
ASN1Primitive obj = bIn.readObject();
System.out.println(ASN1Dump.dumpAsString(obj)); 
```

它打印结构但不打印数据 - 但是通过将 ASN1Dump 复制到自己的类中并修改它以打印出例如 OCTET_STRINGS 这可以很容易地完成。

此外，ASN1Dump 中的代码演示了解析 ASN.1 结构。例如，我的问题中使用的数据可以使用以下代码进行更深层次的解析：

```
DERApplicationSpecific app = (DERApplicationSpecific) obj;
ASN1Sequence seq = (ASN1Sequence) app.getObject(BERTags.SEQUENCE);
Enumeration secEnum = seq.getObjects();
while (secEnum.hasMoreElements()) {
    ASN1Primitive seqObj = (ASN1Primitive) secEnum.nextElement();
    System.out.println(seqObj);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-16T07:06:47.967

只需使用“true”打印值

```
 ASN1InputStream ais = new ASN1InputStream(
        new FileInputStream(new File("d:/myfile.cdr")));
    while (ais.available() > 0) {
        ASN1Primitive obj = ais.readObject();
        System.out.println(ASN1Dump.dumpAsString(obj, true));
    }
    ais.close(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T21:58:10.777

从您的问题中不清楚您是否具有您尝试解析的 BER 的 ASN.1 规范。请注意，在没有 ASN.1 规范的情况下，如果在生成数据的 ASN.1 规范中使用了显式标签，则只能部分理解数据。一些工具，例如来自[OSS Nokalva](http://www.oss.com)的工具，有一个名为 JIAAPI 的库（jar 文件），它允许您在不了解 ASN.1 规范的情况下遍历和操作 BER 编码。

如果您确实有 ASN.1 规范，那么任何 ASN.1 Java 编译器都应该能够处理这个问题。

[您可以从http://www.oss.com/asn1/products/asn1-download.html](http://www.oss.com/asn1/products/asn1-download.html)下载 OSS ASN.1 Tools for Java 的免费试用版，看看是否比您尝试失败的其他工具更适合您。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T12:13:22.963

我需要能够解析 krypt 中任何类型的 ASN.1 数据。虽然 krypt 是一个 Ruby 项目，但您可能想看看[JRuby 扩展](https://github.com/emboss/krypt-core-java)- 处理 ASN.1 解析/编码的代码完全用 Java 编写，并且足够模块化以便于提取。

我还制作了一个[纯 Java 版本](https://github.com/emboss/asn1pull-java)，但它缺少前者的一些高级功能。但既然它很简洁，也许这是一个让你开始的好机会。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T12:24:47.520

如果您只想解码 BER 编码的数据，则有许多解析器。你试过吗？Sun JDK 中甚至还有两个 - [com.sun.jmx.snmp.BerDecoder](http://www.docjar.com/docs/api/com/sun/jmx/snmp/BerDecoder.html)和[com.sun.jndi.ldap.BerDecoder](http://www.docjar.com/docs/api/com/sun/jndi/ldap/BerDecoder.html)。

# silverlight-4.0 - Silverlight 中的字符串格式

> ID：10190801
> 
> 赞同：0
> 
> 时间：2012-04-17T11:58:24.783
> 
> 标签：silverlight-4.0

我正在尝试绑定到 silverlight 中的文本块，但是当我编写 StringFormat 时，我收到了这个错误 - 在类型 'Binding' 中找不到属性 'StringFormat'，这是我的代码：

Text="{绑定文本, ElementName=FirstNameTxt, StringFormat='Hi {0}!'}"

（我正在使用 Silverlight 4）顺便说一句，有人可以推荐我学习 Silverlight 的好景点吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:48:51.293

[点击这里](http://www.designersilverlight.com/2010/05/28/silverlight-4-binding-and-stringformat-in-xaml/)

单击上面的链接，您将轻松了解如何在 Silverlight 中使用字符串格式

# php - php jquery telnet CLI 应用程序

> ID：10190802
> 
> 赞同：0
> 
> 时间：2012-04-17T11:58:26.867
> 
> 标签：php, jquery, telnet

我正在为我的应用程序使用以下类，它工作得非常好：

```
class Telnet
{
    /* (c) thies@thieso.net */

    var $sock = null;

    function telnet($host, $port)
    {
        $this->sock = fsockopen($host, $port);
        socket_set_timeout($this->sock, 2, 0);
    }

    function close()
    {
        if ($this->sock)
            fclose($this->sock);
        $this->sock = null;
        return "Disconnected";
    }

    function write($buffer)
    {
        $buffer = str_replace(chr(255), chr(255) . chr(255), $buffer);
        fwrite($this->sock, $buffer);
    }

    function getc()
    {
        return fgetc($this->sock);
    }

    function read_till($what)
    {
        $buf = '';
        while (1) {
            $IAC = chr(255);

            $DONT = chr(254);
            $DO = chr(253);

            $WONT = chr(252);
            $WILL = chr(251);

            $theNULL = chr(0);

            $c = $this->getc();

            if ($c === false)
                return nl2br($buf);

            if ($c == $theNULL) {
                continue;
            }

            if ($c == "\021") {
                continue;
            }

            if ($c != $IAC) {
                $buf .= $c;

                if ($what == (substr($buf, strlen($buf) - strlen($what)))) {
                    return nl2br($buf);
                } else {
                    continue;
                }
            }

            $c = $this->getc();

            if ($c == $IAC) {
                $buf .= $c;
            } else
                if (($c == $DO) || ($c == $DONT)) {
                    $opt = $this->getc();
                    //echo "we wont ".ord($opt)."\n";
                    fwrite($this->sock, $IAC . $WONT . $opt);
                } elseif (($c == $WILL) || ($c == $WONT)) {
                    $opt = $this->getc();
                    //echo "we dont ".ord($opt)."\n";
                    fwrite($this->sock, $IAC . $DONT . $opt);
                } else {
                    //echo "where are we? c=".ord($c)."\n";
                }
        }

    }
} 
```

然后我为 CLI 添加了另一个页面（它将通过 jquery 与此类进行交互）：

```
<html>
  <head>
    <title>Simple CLI</title>
    <script src="./../../script/jquery-1.7.1.min.js"></script>
  </head>
  <body>
    <div>
      User:<input id="username" type="text" />Password:<input id="password" type="text" />
      <input id="connect" type="button" value="Connect" />
      <div id="out">Welcome: Type 'connect' to connect to the terminal server.<br /></div>
      <input id="in" type="text" />
      <input id="disconnect" type="button" value="Disconnect" />
    </div>
    <script type="text/javascript">
      $('#connect').click(function(e){
        var user = $('#username').val();
        var pass = $('#password').val();
        if( user != "" && pass != "" ){
            $.post('abc.php', {cmd:"connect",user:user,pass:pass}, function(data) {
              $('#out').append(data);
            });
        }
      });
      $('#disconnect').click(function(e){
        $.post('abc.php', {cmd:"disconnect"}, function(data) {
          $('#out').append(data);
        });
      });
      $('#in').keyup(function(e) {
        if (e.which !== 13)
          return; 
        var cmd = { cmd: $(this).val() };
        $(this).val('');
        $.post('abc.php', cmd, function(data) {
          $('#out').append(data);
        });
      });
    </script>
  </body>
</html> 
```

该类由以下人员使用：

```
if($_POST['cmd']){
    $command = $_POST['cmd'];
    switch($command){
        case 'connect':
            $output = '';
            if( !empty($_POST['user']) && !empty($_POST['pass']) ){
                $tn = new telnet("127.0.0.1", 23);
                $output = $tn->read_till("ogin:");
                $tn->write($_POST['user'] . "\r\n");
                $output .= $tn->read_till("word: ");
                $tn->write($_POST['pass'] . "\r\n");
                $output .= $tn->read_till(":> ");
                echo $output;                
            }
            break;
        case 'disconnect':
            echo $tn->close();
            break;
        default:
            $tn->write($command."\r\n");
            echo $tn->read_till(":> ");
            break;
    }
} 
```

问题是我如何以及在哪里保存类对象，以便每当我通过 jquery 调用类对象时，它应该具有相同的对象，而不是每个命令都会首先打开与 telnet 服务器的新连接。

# jquery - 即使在调整浏览器大小后如何水平居中模态 div？

> ID：10190811
> 
> 赞同：0
> 
> 时间：2012-04-17T11:58:56.147
> 
> 标签：jquery, css

我正在尝试使用 jquery 向 DOM 添加一个项目。我希望它覆盖所有其他内容的顶部（z-index）（已经设置了数百个 z-indices）并且它应该始终居中对齐。

在将此 div 添加到 DOM 时，我将其“左”属性设置为 $(window).width()/2 - 971/2。971 是我要添加的 div 的宽度。这是它的 CSS

```
width: 971px;
height: 669px;
background-image: url(/path/to/image/);
position: absolute;
margin: 0px auto;
z-index: 2500; 
```

问题是，调整浏览器大小后 div 不会保持居中。我什至尝试过 left: 50% 和一些以像素为单位的负左边距。如果我设置与“屏幕”相关的“左”属性，那么只有当用户最大化浏览器窗口时它才会居中。

用高 z-index 定位这个绝对定位的 div 以使其始终居中的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:02:39.683

首先，`margin: 0px auto;`足以使 div 水平居中。因此，只需删除该`left`属性就可以解决问题。

* * *

**如果不是**，由于您使用的是 jQuery，因此您可以控制一个`.resize()`事件`window`来再次修复外观。

例如

```
function resizeMyBox() {
  //code to resize
}       
$(function() {
   resizeMyBox();  // Resize on DOM ready
});
$(window).resize(function() {
   resizeMyBox(); //Resize again on every resize
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:13:07.557

```
#someId{
    width: 971px;
    height: 669px;
    padding: 0;
    border: 0;

    margin-left:-486px; /* 971/2 */
    margin-top:-335px; /* 669/2 */

    position: fixed;
    left: 50%;
    top: 50%;

    background-image: url(/path/to/image/);
    z-index: 2500;
} 
```

我知道你说过你尝试过这个 - 但这在任何以标准兼容模式运行的浏览器中一直对我有用（即使是 ie）它可能会因为不考虑边框或填充而被抛弃。这是一个工作示例：http: [//jsfiddle.net/U3RrT/](http://jsfiddle.net/U3RrT/)

我刚刚意识到这可能是因为您在其上方设置了一个具有不同`position`属性的元素；试试`position:fixed;`。

# c# - 如何删除 ListView 中显示的特定文本/消息？

> ID：10190813
> 
> 赞同：0
> 
> 时间：2012-04-17T11:59:02.110
> 
> 标签：c#, .net, listview

嘿！

我将尝试在这里更好地解释我的问题和我的情况:)

`ListView`我的应用程序中有一个，`ListView`它用于输出错误，所以它有点用于错误日志。

我的程序主要是一个计时器，用于检查 int 值的变化。

当发生错误时，我想在我的列表中显示它。问题是错误将被添加 3-4 次，甚至更多。

如果我检查 if(exist.in.listbox) 我将无法第二次添加相同的错误。我想要做的是删除特定的消息/错误，然后在其“修复”或不再对系统构成威胁时将其删除。这是代码片段：

```
 if (Convert.ToInt32(x) == 1 && Convert.ToInt32(y) == 1)
                {

                    found = false;
                    ListViewItem item = new ListViewItem(message);
                    foreach (ListViewItem z in listView1.Items)
                    {
                        if (z.Text == message)
                        { found = true; }
                    }

                    if (found == false)
                    {
                        item.SubItems.Add(now.ToString());
                        listView1.Items.Add(item);
                        listView1.EnsureVisible(item.Index);
                    }
                }
                else
                {
                    foreach (ListViewItem z in listView1.Items)
                    {
                        if (z.Text == message)
                        {
                           //no longer a threat, delete the message added aboue
                        }
                    }
                } 
```

找不到任何关于此的信息。仅“选择时->删除该行”

可以把它想象成视觉上的错误窗口，当你得到一个红色错误时，你可以修复代码。它会破坏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:23:25.793

您应该遵循与添加项目时相同的方法。首先，检查是否要执行删除，然后删除该项目。

如果这不能很好地执行（在每次计时器迭代中遍历列表两次），您还可以将“添加/删除”逻辑移出 ListView（即，可能保留一个字典以便更快地查找）。

```
void DeleteIfNecessary(string message)
{
    ListViewItem listViewItem = FindListViewItemForMessage(message);
    if (listViewItem == null)
    {
        // item doesn't exist
        return;
    }

    this.listView1.Items.Remove(listViewItem);
}

private ListViewItem FindListViewItemForMessage(string s)
{
    foreach (ListViewItem lvi in this.listView1.Items)
    {
        if (StringComparer.OrdinalIgnoreCase.Compare(lvi.Text, s) == 0)
        {
            return lvi;
        }
    }

    return null;
} 
```

# .net - .NET 中的 Guid 字节顺序

> ID：10190817
> 
> 赞同：22
> 
> 时间：2012-04-17T11:59:16.343
> 
> 标签：.net, guid

我正在创建这样的 GUID

```
Guid g = new Guid(new byte[] { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0xA, 0xB, 0xC, 0xD, 0xE, 0xF });
Console.WriteLine(g); 
```

这输出

```
03020100-0504-0706-0809-0a0b0c0d0e0f 
```

根据[维基百科](http://en.wikipedia.org/wiki/Guid)，指南中有四个部分，这解释了为什么字节顺序在四组中切换。但是，Wikipedia 文章还指出，所有部分都以 Big Endian 格式存储。显然前三部分不是Big Endian。guid 的 GetBytes() 方法以与创建时相同的顺序返回字节。这种行为的解释是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T12:23:14.587

似乎 MS 将这五个部分存储在一个结构中。前 4 部分的长度为 2 或 4 个字节，因此可能以小端格式存储为本机类型（即 WORD 和 DWORD）。最后一部分是 6 个字节长，因此处理方式不同（可能是一个数组）。

规范是否说明 GUID 以大端顺序存储，或者部分的存储是按该顺序存储的，但个别部分可能是特定于实现的？

编辑：

来自[UUID 规范](http://www.ietf.org/rfc/rfc4122.txt)，第 4.1.2 节。布局和字节顺序（强调我的）：

> 为了最大程度地减少八位字节中位分配的混淆，UUID
> 记录定义仅根据
> 八位字节的整数字段来定义。首先显示最
> 重要的字段。
> 
> ...
> 
> **相反，在没有明确的应用程序或表示协议规范**的**情况下** ，UUID 被编码为 128 位对象，如下所示：
> 
> 这些字段被编码为 16 个八位字节，具有上面定义的字段的大小和顺序，并且每个字段首先以最高有效字节编码（称为网络字节顺序）。

可能是 MS 以正确的顺序存储了字节，但没有打扰网络到主机订购 WORD 和 DWORD 部分以进行演示（根据规范，至少通过我不熟练的阅读它。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-17T12:16:34.500

我在这里不是专家，但是您提到的Wiki页面也说：

> 但是，该数据类型的常用 [4] 结构的参考并未提及字节顺序

该引用 ([4]) 指向[http://msdn.microsoft.com/en-us/library/aa373931(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa373931%28VS.85%29.aspx)，它随后确定了 Microsoft 如何将 GUID 实现为

```
typedef struct _GUID {
  DWORD Data1;
  WORD  Data2;
  WORD  Data3;
  BYTE  Data4[8];
} GUID; 
```

由于最后 8 个字节存储为字节数组，我认为这可以识别您所看到的行为。

# c# - 为什么 `String.Trim()` 不修剪对象本身？

> ID：10190818
> 
> 赞同：4
> 
> 时间：2012-04-17T11:59:21.187
> 
> 标签：c#

不经常但有时我需要用它`String.Trim()`来删除字符串的空格。
如果自上次修剪编码以来的时间较长，我会写：

```
string s = " text ";
s.Trim(); 
```

并惊讶为什么 s**没有**改变。我需要写：

```
string s = " text ";
s = s.Trim(); 
```

为什么是~~一些~~以这种（不是很直观）方式设计的字符串方法？字符串有什么特别之处吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T12:00:14.700

字符串是不可变的。任何字符串操作都会在不改变原始字符串的情况下生成一个新字符串。

来自[MSDN](http://msdn.microsoft.com/en-us/library/362314fe.aspx)：

> 字符串是不可变的——字符串对象的内容在创建对象后不能更改，尽管语法使它看起来好像您可以这样做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-17T12:11:47.627

`s.Trim()`创建原始字符串的新修剪版本并将其返回，而不是将新版本存储在`s`. 因此，您要做的就是将修剪后的实例存储在变量中：

```
 s = s.Trim(); 
```

所有字符串方法和扩展方法都遵循这种模式。

字符串是不可变的这一事实与使用此模式的决定无关，而是与字符串如何保存在内存中的事实有关。此方法可以设计为在内存中创建新的修改字符串实例并将变量指向新实例。

还要记住，如果您需要对字符串进行大量修改，最好使用 an `StringBuilder`，它的行为类似于“可变”字符串，并且执行此类操作更有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T12:04:11.887

正如它在 MSDN 库中所写：

> String 对象被称为不可变（只读），因为它的值在创建后无法修改。看似修改 String 对象的方法实际上会返回一个包含修改的新 String 对象。
> 
> 因为字符串是不可变的，所以重复添加或删除看似单个字符串的字符串操作例程可能会导致显着的性能损失。

请参阅此[链接](http://msdn.microsoft.com/en-us/library/system.string.aspx#Immutability)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T12:59:35.373

除了所有好的答案外，我还觉得原因是 Threadsafty。

让我们说

`string s = " any text ";` `s.Trim();`

当您这么说时，没有什么可以阻止其他线程修改 s. 如果修改了相同的字符串，假设另一个线程从 s 中删除 'a'，那么 s.Trim() 的结果是什么？

但是当它返回新字符串时，虽然它正在被其他线程修改，但`trim`可以使本地副本修改它并返回修改后的字符串。

# c++ - 使用 T::Type typedef 默认模板参数

> ID：10190821
> 
> 赞同：0
> 
> 时间：2012-04-17T11:59:50.570
> 
> 标签：c++, templates

是否有可能做这样的事情：

```
template <typename T, typename Comparator = std::less<typename T::Key>>
struct Container
{
    std::map<typename T::Key, T*, Comparator> m;
}; 
```

这是问题的一部分：`typename Comparator = std::less<typename T::Key>`

即在 T 的实现中有一个 typedef 用于比较器的专业化。是否总是需要将比较器使用的东西 (T::Key) 指定为模板的显式参数？

我意识到通过更改 T 类还有其他方法可以解决这个问题（例如，需要一个显式的 T::compareKey 方法），但问题更多的是是否可以使用模板语法来实现这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:17:55.087

我确信这是有效的，只要在模板实例化时所有必要的定义都可用，而且它肯定[对我有用。](http://ideone.com/XWu3I)

你包括`<map>`吗？您可能还需要包含`<functional>`for `std::less`，尽管我确信它必须包含在`<map>`.

您的编译器是否支持 C++11，并且您是否启用了该支持？较旧的编译器（或为严格遵守 C++03 而配置的编译器）会因使用`>>`关闭两个模板参数列表而感到困惑；他们会将其解释为右移运算符。在这种情况下，您可以通过在它们之间添加空格来解决问题。

如果这些都不是问题，请提供一个最小的、完整的示例来演示问题、确切的错误消息以及它所引用的代码行，并让我们知道您正在使用哪个编译器。

# php - 使用 PHP 在推文中添加语言参数

> ID：10190822
> 
> 赞同：0
> 
> 时间：2012-04-17T11:59:57.873
> 
> 标签：php, tweets

我想添加一个语言参数。假设用户点击英文，他只会得到英文的推文。现在我`en`默认使用，但我希望支持多种语言

```
function twitter_class()
{
    $this->realNamePattern = '/\((.*?)\)/';

    $this->searchURL = 'http://search.twitter.com/search.atom?lang=en&q=';
}

$ch= curl_init($this->searchURL . urlencode($q));

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']); 
```

我想从用户那里获得语言输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:03:18.547

您可以制作`searchURL`一些参数化的字符串函数：

```
$this->searchURL = function($language, $query) {
    $vars = array_map('urlencode', func_get_args() + array('', ''));        
    return vsprintf('http://search.twitter.com/search.atom?lang=%s&q=%s', $vars);
} 
```

当你调用它时，这样做：

```
$ch = curl_init($this->searchURL($lang, $q)); 
```

希望这会有所帮助。

* * *

如果您没有 PHP 5.3，只需将其编写为标准类函数即可：

```
class twitter_class
{
    ...

    function twitter_class()
    {
        $this->realNamePattern = '/\((.*?)\)/';
    }

    function searchURL($language, $query) {
        $vars = array_map('urlencode', array($language, $query));
        return vsprintf('http://search.twitter.com/search.atom?lang=%s&q=%s', $vars);
    }

    ...

        $ch = curl_init($this->searchURL($lang, $q));
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:11:48.263

```
function twitter_class($lang="en")
{
    $this->realNamePattern = '/\((.*?)\)/';

    $this->searchURL = 'http://search.twitter.com/search.atom?lang='.$lang.'&q=';

} 
```

# selenium - 一台 linux 服务器上的 selenium rc

> ID：10190832
> 
> 赞同：0
> 
> 时间：2012-04-17T12:00:20.053
> 
> 标签：selenium, selenium-rc, selenium-webdriver

我想让 selenium 在 ubuntu、centos 等一台服务器上运行，并在该 linux（centos 或 ubuntu 服务器）上运行所有浏览器检查。所以检查ie6、ie7、ie8、ie9、chrome、firefox等。

但后来我认为这是不可能的，因为 ie 我们需要 windows 机器。或者如果我们删除 ie 并且只想在 chrome 和 firefox 上进行测试，我们可以在 ubuntu 或 centos 上的 selenium rc 上这样做吗？然后我想在那个服务器版本上我需要安装firefox。

我认为主要是我不明白 selenium 服务器如何在没有安装浏览器的情况下工作，或者它不能？

谁能给我一些指导，我确实阅读了一些文档和不错的教程，但这对我来说不是很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:15:43.957

Selenium Server 只是一个可以向 Web 浏览器发送命令的应用程序。但是，当然，您需要一个浏览器。如果没有浏览器并且您在 Selenium 2 (WebDriver) 中编写测试，您可以使用[HtmlUnitDriver](http://code.google.com/p/selenium/wiki/HtmlUnitDriver) ( [JavaDoc](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/htmlunit/HtmlUnitDriver.html) )，它是内置的，实际上不会打开任何浏览器。您可以将其阅读为“内存中的浏览器”。

您还可以通过以下方式检查浏览器是否存在

```
WebDriver driver;
try {
    driver = new InternetExplorerDriver();
catch (WebDriverException e) {
    System.out.print("IE not found.");
    try {
        driver = new FirefoxDriver();
    } catch (WebDriverException e) {
        System.out.print("FF not found.");
    }
    // etc.
} 
```

# wireshark - 在wireshark的巨大pcap中立即选择主要流

> ID：10190834
> 
> 赞同：1
> 
> 时间：2012-04-17T12:00:35.750
> 
> 标签：wireshark, wireshark-dissector

我有一个超过 1000 个 tcp 流的大型 pcap。我想过滤大于 100 的数据包的主要流。如果我去对话并右键单击这些流，我可以过滤这些流，但是我必须做几次，因为我有巨大的 pcap，它可能会超过100\. 有没有我可以使用的其他快速显示过滤器，它会给我的数据包数> n（n 是任何+ve 整数）的流。

说一些过滤器，例如：

```
flow.num_pkt > 100 
```

这可以给我所有这样的流量。

多谢，

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:08:00.797

[Bro](http://www.bro-ids.org)是面向连接分析的合适工具。要查找每个流的数据包数，您只需在跟踪上运行 Bro 并从日志中提取值：

```
bro -r trace.pcap
bro-cut id.orig_h id.orig_p id.resp_h id.resp_p orig_pkts resp_pkts < conn.log \
    | awk '$5+$6 > 100 {print $1,$2,$3,$4,$5,$6}' \
    | sort -rn -k 5 \
    | head 
```

这给出了以下输出：

```
192.168.1.105 49325 137.226.34.227 80 73568 146244
192.168.1.105 49547 198.189.255.74 80 16764 57098
192.168.1.105 49531 198.189.255.74 80 5186 14843
192.168.1.105 49255 198.189.255.73 80 4749 32164
192.168.1.104 1422 69.147.86.184 80 2657 2656
192.168.1.105 49251 198.189.255.74 80 2254 13854
192.168.1.1 626 224.0.0.1 626 2175 0
192.168.1.105 49513 198.189.255.82 80 2010 3852
192.168.1.103 2026 151.207.243.129 80 1953 2570
192.168.1.105 49330 143.166.11.10 64334 1514 3101 
```

该工具`bro-cut`与 Bro 一起提供，并提供了一种从日志中提取某些命名列的便捷方法。对于此任务，您需要：

*   `id.orig_h`：连接发起者的IP（源）
*   `id.orig_p`：连接发起者的传输层端口（源）
*   `id.resp_h`：连接响应者的IP（目标）
*   `id.resp_p`：连接响应者的传输层端口（源）
*   `orig_pkts`: 发起方发送的数据包数
*   `resp_pkts`: 响应者发送的数据包数

注意`awk`过滤器表达式：

```
awk '$5+$6 > 100 {print ...}' 
```

它将输出限制为数据包总数大于 100 的连接。

除非您有固定大小的数据包，否则我鼓励您也调查其他指标，例如数据包大小（IP 或 TCP 有效负载）。这些很容易通过`orig_bytes`和`resp_bytes`列在连接日志中。

# html - 文本下划线并居中对齐

> ID：10190844
> 
> 赞同：-13
> 
> 时间：2012-04-17T12:01:23.777
> 
> 标签：html, css

我希望以下文本带有下划线并居中对齐。这是我尝试过但无法找到解决方案的方法。

```
<p style="border-bottom:thick dashed #F00">Hi Friends </p> 
```

我尝试使用段落标签

我需要为文本加下划线，而不是点或虚线并居中对齐

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:03:09.233

```
text-align: center;
text-decoration: underline; 
```

# jquery - 如何在用户控制中运行 ClientScript？

> ID：10190859
> 
> 赞同：4
> 
> 时间：2012-04-17T12:02:39.867
> 
> 标签：jquery, asp.net, user-controls

我正在使用代码：

```
 ClientScript.RegisterStartupScript(typeof(Page), "message", message); 
```

此代码在 ASP.NET 页面中可以正常工作，但在 UserControl 中无法正常工作。我需要在 UserControl 中使用此功能。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T12:12:45.317

你可以试试：

```
 string script = "<script language='JavaScript'>alert('hello');</script>";
    Page.RegisterStartupScript("myscript", script); 
```

或者

```
 ScriptManager.RegisterStartupScript(Page, Page.GetType(), "key", "<script>alert('Hello.')</script>", false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-19T12:02:52.157

我在我的用户控件中使用它：

```
Page.ClientScript.RegisterStartupScript(typeof(Page), "message", message) 
```

# sharepoint - 查找列以在 SharePoint 2010 中打开 URL 而不是相关项目？

> ID：10190863
> 
> 赞同：0
> 
> 时间：2012-04-17T12:02:47.060
> 
> 标签：sharepoint, lookup

我有一个包含两列的列表；两者都是单行文本。第一个用作 URL 标题，第二个包含实际 URL。同样，两列都是单行文本类型。

接下来，我有另一个包含一些列的列表，包括一个查找。该查找针对第一个列表中的第二列，即包含实际 URL 的单行文本。现在，当我单击某个列表项的查找字段时，会打开一个显示表单，显示第一个列表中的相关项。这是默认的 SharePoint 行为。

我希望能够打开实际的 URL 而不是打开查找项。那可能吗？与编码相比，我更喜欢 SharePoint Designer 中的解决方案，但此时我会采取任何措施 :) 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:12:50.097

您可以添加一个计算列来生成带有链接的 HTML，看看这些文章： http: [//blog.pathtosharepoint.com/2008/09/01/using-calculated-columns-to-write-html/](http://blog.pathtosharepoint.com/2008/09/01/using-calculated-columns-to-write-html/) http: //blog.pathtosharepoint.com/2008/09/01/apply-color-coding-to-your-sharepoint-lists/

# javascript - 在 jqgrid 中应用内联导航器面临困难

> ID：10190865
> 
> 赞同：2
> 
> 时间：2012-04-17T12:03:07.690
> 
> 标签：javascript, jqgrid

我正在使用 jqgrid 以表格格式显示数据。

我试图在 jqgrid 中实现内联导航器，但它让我在 firebug 控制台中出现以下错误：

> 'jqGrid - 没有这样的方法：inlineNav' 调用方法时：[nsIDOMEventListener::handleEvent]

我添加了以下代码片段，用于在 .js 文件中应用内联导航器：

```
 jQuery("#contactlist").jqGrid('navGrid','#contacttoolbar',{view:false,edit:false,add:false,del:false,search: false});
   jQuery("#contactlist").jqGrid('inlineNav',"#contacttoolbar"); 
```

那么我该怎么做才能应用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:51:08.330

根据[jqGrid 内联编辑文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing)，这应该是你所要做的。

您确定它`inlineNav`包含在您下载的 jqGrid 版本中吗？我的意思是，在[下载页面](http://www.trirand.com/blog/?page_id=6)上，您可以选择要包含在网格中的组件。如果`inlineNav`被遗漏，那将解释错误消息。您应该能够通过打开缩小的 jqGrid 文件并搜索字符串来验证这一点`inlineNav`。如果找不到，则需要使用该组件再次下载 jqGrid。

否则，我建议发布一个更大的代码示例，以便我们缩小问题范围。

# asp.net - 服务器对 PDF 表单提交的响应

> ID：10190870
> 
> 赞同：3
> 
> 时间：2012-04-17T12:03:20.290
> 
> 标签：asp.net, pdf, acrobat

我有一个带有提交按钮的 PDF 表单，http 将 pdf 提交到 ASP.NET 应用程序。应用程序响应应该是什么？我发现我需要将 pdf 发送回输出响应流中。这使得 Adob​​e Reader 打开一个带有 pdf 服务器版本的新窗口。我怎样才能让阅读器简单地保持相同的文档打开而不打开任何新的东西？如果我不发回任何东西，阅读器就会崩溃。

# java - Java OOP 问题 - 与接口/抽象类相关

> ID：10190874
> 
> 赞同：1
> 
> 时间：2012-04-17T12:03:44.270
> 
> 标签：java, oop

我被Java OOP问题困住了。我想出了一些玩具代码来解释这个问题。这是我的课-

第 1 类 - Car.java

```
public class Car {

    public void reportProblem(String problem){
        ReportUtil.reportVehicleInfo("Car", 4, problem); //4 is number of wheels
    }

    //bunch of other methods
} 
```

第 2 类 - Truck.java

```
public class Truck {
    public void reportProblem(String problem){
        ReportUtil.reportVehicleInfo("Truck", 6, problem);
    }

    //bunch of other methods
} 
```

第 3 类 - ReportUtil.java

```
public class ReportUtil {
    public static void reportVehicleInfo(String name, int wheels, String problem){
        System.out.println(String.format("%s %s %s", name, wheels, problem));
    }
} 
```

第 4 类 - Test.java

```
public class Test {
    public static void main(String[] args) {
        Car c = new Car();
        c.reportProblem("puncture");

        Truck t = new Truck();
        t.reportProblem("engine missing");
    }
} 
```

我想将“Car”和“Truck”中的“reportProblem”方法实现抽象到父类。这就是我所做的 -

第 1 类 - Vehicle.java

```
public abstract class Vehicle {
    public String mName;
    public int mNumWheels;

    public void reportProblem(String problem){
        ReportUtil.reportVehicleInfo(mName, mNumWheels, problem);
    }

    public void setName(String name){
        mName = name;
    }

    public void setNumWheels(int numWheels){
        mNumWheels=numWheels;
    }
} 
```

第 2 类 - Car.java

```
public class Car extends Vehicle {

    //bunch of other methods
} 
```

第 3 类 - Truck.java

```
public class Truck extends Vehicle {

    //bunch of other methods
} 
```

第 4 类 - ReportUtil.java（未对此类进行更改）。

```
public class ReportUtil {   
    public static void reportVehicleInfo(String name, int wheels, String problem){
        System.out.println(String.format("%s %s %s", name, wheels, problem));
    }
} 
```

第 5 类 - Test.java

```
public class Test {
    public static void main(String[] args) {
        Car c = new Car();
        c.setName("Car"); //NOTE : Can be missed!
        c.setNumWheels(4); //NOTE : Can be missed!
        c.reportProblem("puncture");

        Truck t = new Truck();
        t.setName("Truck"); //NOTE : Can be missed!
        t.setNumWheels(6); //NOTE : Can be missed!
        t.reportProblem("engine missing");
    }
} 
```

这达到了我想要的（我已经抽象了“reportProblem”的实现）。但我知道这不是最好的方法。一个原因是不应该调用“reportProblem”方法而不调用“setName”和“setNumWheels”方法。否则将传递“null”。有没有一种方法可以在调用 reportProblem 之前使用一些 OOP 技术来执行两种方法调用（setName 和 setNumWheels）？

我希望我已经说清楚了。如果我不是，请告诉我你会怎么做，这样我就可以从中学习。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T12:09:04.553

是的，在构造函数中 make`name`和`numWheels`final 并赋值。所以...

第 1 类 - Vehicle.java

```
public abstract class Vehicle {
  public final String mName;
  public final int mNumWheels;

  protected Vehicle(String name, int numWheels){
    this.mName = name;
    this.mNumWheels = numWheels;
  }

  public void reportProblem(String problem){
    ReportUtil.reportVehicleInfo(mName, mNumWheels, problem);
  }
  ...
} 
```

第 2 类 - Car.java

```
public class Car extends Vehicle {

   public Car(){
     super("Car", 4);
   }
 //bunch of other methods
} 
```

第 3 类 - Truck.java

```
public class Truck extends Vehicle {

   public Truck(){
     super("Truck", 6);
   }
//bunch of other methods
} 
```

此外，`public`字段也不是好的 OO 实践，因为它们暴露了类的实现的细节，这些细节可以被类的用户修改。那些字段应该是`private`. 如果类的客户需要了解它们（或更改它们），那么您应该允许公共 getter（或 setter）方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:07:49.980

如果要设置“必填”字段，可以将它们设置为 Truck/Car 构造函数中的参数，并且不为这些类提供默认构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:15:42.600

如果成员是对象状态/功能的必需品，请将它们作为构造函数的一部分，因此如果不为这些成员提供适当的值，就不可能创建对象（并调用相关方法）。
但是您也不应该提供无参数构造函数。
如果需要太多参数，请考虑查看 Builder idion

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:15:56.140

除了@Tony 的回答 (+1)，如果您必须使用 bean 表示法（默认构造函数和设置器）并且仍然不想在初始化对象之前允许使用任何业务方法，您可以执行以下操作。

`checkInitalized()`在您的`Vehicle`类中定义抽象方法。`Car`为您的和实现此方法`Truck`。顺便说一句，此方法可能会在`Vehicle`. 在这种情况下，不要忘记从其覆盖的版本中调用 super。

`checkInitalized()``IllegalStateException`如果未初始化所有必需字段，则应抛出异常（例如）。现在在每个业务方法的开头调用这个方法。这将阻止您使用尚未初始化的对象。

这种技术有点冗长。可能在这里使用包装器模式或 AOP（例如 AspectJ）可能有用。

# java - Java 开发者友好的 IPC

> ID：10190875
> 
> 赞同：-1
> 
> 时间：2012-04-17T12:03:48.797
> 
> 标签：java, ipc, remoting

我需要将**一个对象的实例**从一个进程发送到另一个进程（均为 Java）并取回更改后的版本。会有**很多**这样的远程功能。（实际上，其中一个过程类似于DataBase wrapper）

对开发人员最**友好的**方式是什么？即**添加**和**调用**这些函数应该很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:08:41.870

对开发人员最友好的方式是使用一个进程。除非您有充分的理由这样做，否则您不会使用多个进程。

可能最简单的使用是 RMI，但它会按值传递，而不是引用，因此您必须返回更改的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:13:19.637

在 Java 中解决问题的最简单方法是使用 RMI。在 Java 中使用 RMI 是非常透明的，您可以调用远程对象的方法，并且可以像使用本地对象一样向它们传递值。

这是来自官方文档的简单[教程。](http://docs.oracle.com/javase/tutorial/rmi/index.html)

# c# - 从大型数据库中检索行时优化灵活 Linq to Entity 标准的性能

> ID：10190881
> 
> 赞同：5
> 
> 时间：2012-04-17T12:04:05.753
> 
> 标签：c#, sql-server, entity-framework, linq-to-entities

我有包含数十亿行的数据库。我创建了从用户数量的参数接收并通过这些参数切割数据库的函数。这对我来说很适合小 DB（30000 行），但是当我尝试在大 DB 上使用这个函数时，我得到了`TIMEOUTEXCEPTION from SQLSERVER`.

这是我的代码：

```
public static IQueryable<LogViewer.EF.InternetEF.Log> ExecuteInternetGetLogsQuery(FilterCriteria p_Criteria, ref GridView p_Datagrid)
{
    IQueryable<LogViewer.EF.InternetEF.Log> internetQuery = null;

    using (InternetDBConnectionString context = new InternetDBConnectionString())
    {
        internetQuery = context.Logs;
        if ((p_Criteria.DateTo != null && p_Criteria.DateFrom != null))
        {
            internetQuery = internetQuery.Where(c => c.Timestamp >= p_Criteria.DateFrom && c.Timestamp < p_Criteria.DateTo);
        }
        else if (p_Criteria.DateFrom != null && p_Criteria.DateFrom > DateTime.MinValue)
        {
            internetQuery = internetQuery.Where(c => c.Timestamp >= p_Criteria.DateFrom);
        }
        else if (p_Criteria.DateTo != null && p_Criteria.DateTo > DateTime.MinValue)
        {
            internetQuery = internetQuery.Where(c => c.Timestamp < p_Criteria.DateTo);
        }
        if (!string.IsNullOrEmpty(p_Criteria.FreeText))
        {
            internetQuery = internetQuery.Where(c => c.FormattedMessage.Contains(p_Criteria.FreeText));
        }

        if (p_Criteria.Titles.Count > 0)
        {
            internetQuery = internetQuery.AsEnumerable().Where(c => p_Criteria.Titles.Contains(c.Title)).AsQueryable();
        }
        if (p_Criteria.MachineNames.Count > 0)
        {
            internetQuery = internetQuery.AsEnumerable().Where(c => p_Criteria.MachineNames.Contains(c.MachineName)).AsQueryable();
        }
        if (p_Criteria.Severities.Count > 0)
        {
            internetQuery = internetQuery.AsEnumerable().Where(c => p_Criteria.Severities.Contains(c.Severity)).AsQueryable();
        }
        internetQuery= internetQuery.OrderByDescending(c=>c.LogID);
        if (internetQuery.Count() > p_Criteria.TopValue)
        {
            internetQuery = internetQuery.Take(p_Criteria.TopValue);
        }
        p_Datagrid.DataSource = internetQuery;
        p_Datagrid.DataBind();
        return internetQuery;

    }  
} 
```

我的 SQL 版本是 2005。我`p_Datagrid.DataBind();`在行上遇到了异常。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:13:43.343

我可以看到您有以下选择：

*   增加超时时间（Bad idé只是在将来移动问题）
*   而不是进行 linq 查询。通过存储过程获取数据
*   制作网格页面。因此，您只需检索目标页面的数据。
*   查看查询计划，看看您是否可以在您正在执行`where`语句的列上执行任何索引 和`order by`。
*   为什么需要在数据网格中有数十亿行。有什么要求？也许你可以只显示`top 1000`或`top 10000`。因为从用户那里我看不到任何看到十亿行网格的优点。

那只是我的想法。

**编辑**

如果我有这个功能，我会开始查看这部分代码：

```
if (p_Criteria.Titles.Count > 0)
{
     internetQuery = internetQuery.AsEnumerable().Where(c => p_Criteria.Titles.Contains(c.Title)).AsQueryable();
}
if (p_Criteria.MachineNames.Count > 0)
{
      internetQuery = internetQuery.AsEnumerable().Where(c => p_Criteria.MachineNames.Contains(c.MachineName)).AsQueryable();
}
if (p_Criteria.Severities.Count > 0)
{
      internetQuery = internetQuery.AsEnumerable().Where(c => p_Criteria.Severities.Contains(c.Severity)).AsQueryable();
} 
```

这实际上使结果成为 IEnumerable，然后您`where`使用数据库调用执行内存中的语句。您可能还会遇到问题，因为当您调用相关表时，它会调用数据库。也许您可以获取行，然后`contains`使用`IQueryable`. 这样做时有`IQueryable`尿布的所有优点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:17:30.110

一般来说，像这样的“瑞士军刀”规范或标准模式很难优化（即 SQL 级别的索引），因为客户端/用户可以指定大量的过滤器组合排列。因此，如果您可以以某种方式强制用户指定至少一个强制性标准，从而显着减少行数，例如通过强制日期范围且不超过一个月，我会从那里开始，因为至少我们有一些东西当我们查看索引时开始。

由于可能存在大量行，我会断言或验证`p_Criteria.TopValue`用于限制行的值始终存在，并且是一个合理的数字，例如`Take(1000)`. 如果达到此阈值，您始终可以警告用户缩小他/她的搜索范围。

主要问题可能是过滤`Titles`,`MachineNames`和`Severities`each 调用`AsEnumerable()`，这使查询具体化，因此您在内存中评估这 3 个过滤器，而不是在 SQL 中，可能有大量记录。所有最新版本的 EF 都能够将形式的谓词转换`Where(c => IEnumerable<X>.Contains(c.Column))`为 SQL `WHERE c.Column IN (X1, X2, X3)`。

即您应该删除`AsEnumerable()`这 3 个过滤器上的 （然后您不需要转换回`AsQueryable()`），即

```
 if (p_Criteria.Titles.Any())
    {
        internetQuery = internetQuery
            .Where(c => p_Criteria.Titles.Contains(c.Title));
    }
    if (p_Criteria.MachineNamesAny())
    {
        internetQuery = internetQuery
            .Where(c => p_Criteria.MachineNames.Contains(c.MachineName));
    }
    if (p_Criteria.Severities.Any())
    {
        internetQuery = internetQuery
            .Where(c => p_Criteria.Severities.Contains(c.Severity));
    } 
```

检查中的另一个问题是，通过在检查`Take`中运行`.Count()`，您正在具体化查询（如果您还没有这样做的话）。您应该`Take()`直接运行 - 无需检查我们是否超过了行数。如果行数少于`p_Criteria.TopValue`行数，则它将返回尽可能多的行数，即删除 if 检查并保留以下内容：

```
internetQuery = internetQuery.Take(p_Criteria.TopValue); 
```

出于性能原因，我会考虑的另一件事是您是否可以将 FreeText 字符串检查更改为使用`StartsWith`而不是`Contains`. SQL 数据库 char 列上的索引仅在字符串的开头有效。如果`%filter%`不需要通配符，那么这显然与 OP 的代码不同，但将使用能够在`FreeText`列上使用索引：

```
if (!string.IsNullOrEmpty(p_Criteria.FreeText))
{
    internetQuery = internetQuery
        .Where(c => c.FormattedMessage.StartsWith(p_Criteria.FreeText));
} 
```

小问题，不会影响数据库性能，但您可以将日期过滤的分支数量减少到以下：

```
if (p_Criteria.DateFrom != null && p_Criteria.DateFrom > DateTime.MinValue)
{
    internetQuery = internetQuery.Where(c => c.Timestamp >= p_Criteria.DateFrom);
}
if (p_Criteria.DateTo != null && p_Criteria.DateTo > DateTime.MinValue)
{
    internetQuery = internetQuery.Where(c => c.Timestamp < p_Criteria.DateTo);
} 
```

从命名标准的角度来看，我还将您的 Object/DbContext 的名称从`*ConnectionString`更改为`*Context`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:13:51.053

由于具体架构不可用，您可以尝试以下操作。

1.  使用所有过滤条件编写存储过程并从代码中发送参数。然后从代码中执行存储过程并检查是否仍然超时。要检查如何从实体框架调用 SP，请阅读[此](http://msdn.microsoft.com/en-us/library/bb896334.aspx)

2.  如果您在第 1 步中没有成功。您可能需要检查您的表设计并添加索引和/或额外的过滤器。要检查有关如何索引 SQL Server 数据库的指南，请阅读[此](http://www.codeproject.com/Articles/59093/Defining-Indexes-with-SQL-Server-2005)

3.  您可能还想创建表的“影子”副本以保留存档的数据库行。存档的意思是到目前为止没有用的行，但不能永久删除。

**编辑：**我同意@Arion 关于使用分页网格而不是获取所有行的观点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T12:09:56.070

经过一周的解决方案搜索后，我找到了这篇[文章](http://blogs.msdn.com/b/alexj/archive/2009/03/26/tip-8-writing-where-in-style-queries-using-linq-to-entities.aspx)。这适用于超过十亿行的索引数据库。这是我的代码解决方案：

```
public static IQueryable<LogViewer.EF.InternetEF.Log> ExecuteInternetGetLogsQuery(FilterCriteria p_Criteria, ref GridView p_Datagrid)
        {

            IQueryable<LogViewer.EF.InternetEF.Log> internetQuery = null;
            List<LogViewer.EF.InternetEF.Log> executedList = null;
            using (InternetDBConnectionString context = new InternetDBConnectionString())
            {
                internetQuery = context.Logs;
                if ((p_Criteria.DateTo != null && p_Criteria.DateFrom != null))
                {
                    internetQuery = internetQuery.Where(c => c.Timestamp >= p_Criteria.DateFrom.Value && c.Timestamp < p_Criteria.DateTo.Value);
                }
                else if (p_Criteria.DateFrom != null && p_Criteria.DateFrom > DateTime.MinValue)
                {
                    internetQuery = internetQuery.Where(c => c.Timestamp >= p_Criteria.DateFrom);
                }
                else if (p_Criteria.DateTo != null && p_Criteria.DateTo > DateTime.MinValue)
                {
                    internetQuery = internetQuery.Where(c => c.Timestamp < p_Criteria.DateTo);
                }
                if (!string.IsNullOrEmpty(p_Criteria.FreeText))
                {
                    internetQuery = internetQuery.Where(c => c.FormattedMessage.Contains(p_Criteria.FreeText));
                }

                if (p_Criteria.Titles.Count > 0)
                {
                    internetQuery = internetQuery.Where(BuildOrExpression<LogViewer.EF.InternetEF.Log, string>(p => p.Title, p_Criteria.Titles));
                }
                if (p_Criteria.MachineNames.Count > 0)
                {
                    internetQuery = internetQuery.Where(BuildOrExpression<LogViewer.EF.InternetEF.Log, string>(p => p.MachineName, p_Criteria.MachineNames));
                }
                if (p_Criteria.Severities.Count > 0)
                {
                    internetQuery = internetQuery.Where(BuildOrExpression<LogViewer.EF.InternetEF.Log, string>(p => p.Severity, p_Criteria.Severities));
                }

                internetQuery = internetQuery.Take(p_Criteria.TopValue);
                executedList = internetQuery.ToList<LogViewer.EF.InternetEF.Log>();
                executedList = executedList.OrderByDescending(c => c.LogID).ToList<LogViewer.EF.InternetEF.Log>(); ;

                p_Datagrid.DataSource = executedList;

                p_Datagrid.DataBind();

                return internetQuery;

            }
        }

public static Expression<Func<TElement, bool>> BuildOrExpression<TElement, TValue>(
        Expression<Func<TElement, TValue>> valueSelector,
        IEnumerable<TValue> values )
        {
            if (null == valueSelector)
                throw new ArgumentNullException("valueSelector");

            if (null == values)
                throw new ArgumentNullException("values");

            ParameterExpression p = valueSelector.Parameters.Single();

            if (!values.Any())
                return e => false;

            var equals = values.Select(value =>
                (Expression)Expression.Equal(
                     valueSelector.Body,
                     Expression.Constant(
                         value,
                         typeof(TValue)
                     )
                )
            );

            var body = equals.Aggregate<Expression>(
                     (accumulate, equal) => Expression.Or(accumulate, equal)
             );

            return Expression.Lambda<Func<TElement, bool>>(body, p);
        } 
```

我希望这对我们的社区有用谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T12:18:54.447

问题是您试图将所有结果加载到您的数据网格中。真的有必要吗？您可以使用诸如分页之类的东西来仅读取第一行，例如 100 行，其余的仅按需读取吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T12:27:32.687

```
internetQuery = internetQuery.AsEnumerable().Where(c => p_Criteria.Severities.Contains(c.Severity)) 
```

EF 是否足够聪明，可以将这样的查询作为连接进行，还是会导致 SELECT N + 1 问题？

否则，您可能会丢失某些内容的索引。

我会先检查生成的 SQL。

# sql-server-2008 - 计算sql中时间数据类型的总和

> ID：10190882
> 
> 赞同：-2
> 
> 时间：2012-04-17T12:04:05.973
> 
> 标签：sql-server-2008, tsql

我需要在 sql 中计算 time 数据类型，以便计算员工的每月工作时间，这显然会超过 24 小时（应该至少 132 小时）。但是 time 数据类型不支持大于 23:59:59.9999999 。但我需要计算每月的工作时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:06:59.047

`DATEDIFF`您可以使用该函数减去日期。

结果可以乘以你的薪水。

```
SELECT DATEDIFF(minute, '12:00:00', '12:30:00') / 60.0 * 100.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:34:23.793

你确定`Total working time`是作为`Time`数据类型给出的吗？您的示例输入是“时间”数据类型不支持的“32:23:00”，因为它的范围是`00:00:00.0000000 through 23:59:59.9999999`。

如果它是`Time`数据类型，那么您可以按照 juergen 所述计算薪水：

```
select cast(cast (100.00 as money) * datediff(second, 0, '23:23:00') / (60.0 * 60.0) as money) 
```

*我将这些值转换为货币数据类型以表明，可以将它与 datediff() 函数返回值相乘。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:35:13.940

我已尝试使用此代码，现在问题已解决。

```
sum(datediff(second, 0, timeYouWantToSum)) / 3600.0 
```

会给你工作小时数作为小数。现在我可以通过圆形/地板/天花板修改这个总工作时间，也可以乘以每小时工资。谢谢

# wpf - 基于成员变量的不同视图/数据模板

> ID：10190887
> 
> 赞同：23
> 
> 时间：2012-04-17T12:04:14.757
> 
> 标签：wpf, xaml, data-binding, datatemplate

我有一个名为的视图模型

```
 ViewModelClass 
```

其中包含一个布尔值。

我有另一个视图模型，其中包含

```
ObservableCollection<ViewModelClass> m_allProjects; 
```

然后我认为：

```
<DataTemplate>
   <views:ProjectInfoView x:Key="ProjectInfoDetailTemplate"/>
</DataTemplate>

<ItemsControl Grid.Row="1" Grid.Column="0"
              ItemsSource="{Binding AllProjects}"
              ItemTemplate="{StaticResource ProjectInfoDetailTemplate}"
              Margin="10,28.977,10,10">
</ItemsControl > 
```

我希望根据 AllProjects-collection 中的布尔值使用不同的数据模板。做这个的最好方式是什么？

我知道我可以使用不同的 ViewModel 来做到这一点，并使用一种基于 ViewModel 的对象，但我更喜欢只使用一个视图模型。

编辑：

我想用数据触发器来做到这一点。有人可以给我一些代码吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-17T12:58:58.400

我通常使用 a来显示数据，并根据更改的属性在触发器中`ContentControl`换出。`ContentTemplate`

[这是我在博客](http://rachel53461.wordpress.com/2011/05/28/switching-between-viewsusercontrols-using-mvvm/)上发布的一个示例，它基于绑定属性交换模板

```
<DataTemplate x:Key="PersonTemplate" DataType="{x:Type local:ConsumerViewModel}">
     <TextBlock Text="I'm a Person" />
</DataTemplate> 

<DataTemplate x:Key="BusinessTemplate" DataType="{x:Type local:ConsumerViewModel}">
     <TextBlock Text="I'm a Business" />
 </DataTemplate>

<DataTemplate DataType="{x:Type local:ConsumerViewModel}">
     <ContentControl Content="{Binding }">
         <ContentControl.Style>
             <Style TargetType="{x:Type ContentControl}">
                 <Setter Property="ContentTemplate" Value="{StaticResource PersonTemplate}" />
                 <Style.Triggers>
                     <DataTrigger Binding="{Binding ConsumerType}" Value="Business">
                         <Setter Property="ContentTemplate" Value="{StaticResource BusinessTemplate}" />
                     </DataTrigger>
                 </Style.Triggers>
             </Style>
         </ContentControl.Style>
     </ContentControl>
 </DataTemplate> 
```

A`DataTemplateSelector`也可以工作，但前提是确定要显示哪个模板的属性没有更改，因为`DataTemplateSelectors`不响应更改通知。如果可能，我通常会避免使用它们，因为我也更喜欢视图中的视图选择逻辑，这样我就可以看到发生了什么。

# bash - 忽略最后一列时两个文件中的不同行-在bash中

> ID：10190889
> 
> 赞同：1
> 
> 时间：2012-04-17T12:04:23.477
> 
> 标签：bash, comparison, diff

我有两个文件，越来越大，越来越大，包含所有较小的行。这些行几乎相同，只是最后一列不同。

```
file_smaller
  A NM 0
  B GT 4

file_bigger
  A NM 5 <-same as in file_smaller according to my rules
  C TY 2
  D OP 6
  B GT 3 <-same as in file_smaller according to my rules 
```

我想写下两个文件不同的行，这意味着：

```
wished_output
  C TY 2
  D OP 6 
```

你能帮我这样做吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:23:16.270

您可以执行以下操作：

```
cat file_bigger file_smaller |sed 's=\(.*\).$=\1='|sort| uniq -u > temp_pat
grep -f temp_pat file_bigger ; rm temp_pat 
```

这将（以相同的顺序）

*   合并文件
*   删除最后一列
*   排序结果
*   仅打印 temp_pat 中的唯一行
*   在 file_bigger 中找到原始行

总而言之，预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:50:37.173

```
grep -vf <(cut -d " " -f 1-2 file_smaller| sed 's/^/^/') file_bigger 
```

进程替换导致：

```
^A NM
^B GT 
```

然后，`grep -v`从“file_bigger”中删除这些模式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:31:36.470

```
awk 'FILENAME==file_bigger {arr[$1 $2]=$0}
     FILENAME==file_smaller { tmp=$1 $2;  if( tmp in arr) {next} else {print $0}}
    ' file_bigger file_smaller 
```

看看能不能满足你的需求

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:45:42.480

使用关联数组的 Bash 4：

```
#!/usr/bin/env bash

f() {
    if (( $# != 2 )); then
        echo "usage: ${FUNCNAME} <smaller> <bigger>" >&2
        return 1
    fi

    local -A smaller
    local -a x

    while read -ra x; do
        smaller["${x[@]::2}"]=0
    done <"$1"

    while read -ra x; do
        ((${smaller["${x[@]::2}"]:-1})) && echo "${x[*]}"
    done <"$2"
}

f /dev/fd/3 /dev/fd/0 <<"SMALLER" 3<&0 <<"BIGGER"
A NM 0
B GT 4
SMALLER
A NM 5
C TY 2
D OP 6
B GT 3
BIGGER 
```

# android - 为什么 Intent 在调用 Activity 时不重定向？

> ID：10190892
> 
> 赞同：0
> 
> 时间：2012-04-17T12:04:45.833
> 
> 标签：android, android-intent, android-listview, android-activity

我有 ListView 包含两个 TextViews（比如 t1，t2），并且 ListView 是由 xml 创建的，它在 Activity 中膨胀。
我的要求是，如果用户单击包含 t1 的 ListView 项目，则应该创建一个新的 Activity，并且当单击包含 t2 的项目时，应该启动另一个 Activity。
但问题是，当我单击任何 ListView 项目时它不起作用，在这两种情况下它都会移动到相同的 Activity。

我的代码（作为 - 在 getView() 方法中）：

```
mylayout.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                try {
                    if (listType == 1) {
                        Log.v("active", "On Click " + (position));
                        Intent intent = new Intent(VoucherActiveScreen.this,MyVoucherDetailPage.class);
                        intent.putExtra("selectedIndex", position);
                        intent.putExtra("listType", listType);
                        startActivity(intent);
                    }
                    else if (listType == 3) {
                                 //String str = offerPrice.getText().toString();
                                 //System.out.println(str);
                                 if (voucherOffer.getIs_redeem().toString().equals("1"))
                                 {
                                    System.out.println(voucherOffer.getIs_redeem().toString()+"if Rate"); //its working when click listview which contains Rate

                                    Intent  intratedeal=new Intent(getBaseContext(),RateDeal.class);
                                    intratedeal.setClass(getBaseContext(), RateDeal.class);
                                    startActivityForResult(intratedeal, 1);
                                 }
                                 else
                                     {
                                     System.out.println(voucherOffer.getIs_redeem().toString()+"else View"); //its working when click listview which contains View
                                     Intent  intratevendor=new Intent(getBaseContext(),RateVendor.class);
                                     //intratevendor.setClass(getBaseContext(), RateVendor.class);
                                        startActivityForResult(intratevendor, 1);
                                     }
                             /*Intent intent = new Intent(
                                        VoucherActiveScreen.this,
                                        MyVoucherDetailPage.class);
                                intent.putExtra("listType", listType);
                                intent.putExtra("selectedIndex", position);*/
                                Log.v("inactiveeeeeeeeeeeeeeeeee", "On Click " + (position));

                                //startActivity(intent); 

                    }
                } catch (Exception e) {
                    // TODO: handle exception
                }
            }
        }); 
```

请任何人帮助...如果-else块控制正常，但意图未重定向相同的活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:36:46.807

您可以像这样在您的意图中设置标志：

```
Intent intent = new Intent(VoucherActiveScreen.this,MyVoucherDetailPage.class);
intent.putExtra("selectedIndex", position);
intent.putExtra("listType", listType);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

上面的代码片段将启动一个新的活动任务。请参阅此链接：

[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)

# linux - 在另一个进程中使用 GC（X11 图形上下文）

> ID：10190893
> 
> 赞同：0
> 
> 时间：2012-04-17T12:04:56.113
> 
> 标签：linux, x11, graphicscontext

是否可以将 GC 从 process1 传递到 process2 并在那里使用它（我需要更新剪辑区域）？

我试图通过窗口属性传递 GC。但是我在那个 GC 上的 XSetRegion 调用上有 SEGFAULT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:06:01.687

是的，有可能。这是示例（抱歉，在 JavaScript 中，使用[node-x11](https://github.com/sidorares/node-x11)），您可以在其中创建 gc 在一个进程中并将其作为命令行参数传递给另一个进程。对 gc（本例中的前景色）的所有更改在另一个进程中都是可见的。请注意，当第一个进程退出时，GC 在服务器上被销毁，如果您尝试继续使用它，您将在第二个进程中看到“Bad GContext”错误。

```
var x11 = require('x11');

var gc;
x11.createClient(function(display) {
    var X = display.client;
    var root = display.screen[0].root;

    var wid = X.AllocID();
    X.CreateWindow(wid, root, 0, 0, 400, 300);

    var _gc = parseInt(process.argv[2]);
    if (_gc != 0)
       gc = _gc;
    else {
       gc = X.AllocID();
       X.CreateGC(gc, root);
       console.log('GC created: ' + gc);
       setInterval(function() {
           X.ChangeGC(gc, { foreground: parseInt(Math.random()*0xffffff) });
           console.log('gc updated!');
       }, 500);
    }
    X.MapWindow(wid);
    setInterval(function() {
       X.PolyText8(wid, gc, 50, 50, ['Hello, Node.JS!', ' Hello, world!']);
       console.log(gc);
    }, 100);
    X.on('error', function(err) {
        console.log(err);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-17T19:57:23.423

有可能***但是...***

这是 Xlib 手册所说的：

“Xlib 为 GC 的所有不是资源 ID 的元素实现回写缓存，以允许 Xlib 实现对 GC 更改的透明合并。例如，调用 GC 的 XSetForeground 然后调用 XSetLineAttributes 会导致只向服务器请求单次更改的 GC 协议。既不期望也不鼓励客户端应用程序之间共享 GC，因此这种写回缓存应该没有问题。应用程序无法在没有外部同步的情况下共享 GC。因此，应用程序之间共享 GC 是高度灰心。”

# java - JavaFX 2.0 窗口到托盘

> ID：10190902
> 
> 赞同：6
> 
> 时间：2012-04-17T12:05:44.100
> 
> 标签：java, windows, javafx-2

我想使用 JavaFX UI（一体机）开发服务。当用户单击关闭按钮时，我想将应用程序移动到系统托盘并在所有侦听器处于活动状态时保持打开状态。

目前，我实现的是当有人点击关闭按钮时，应用程序会被最小化。

任何人都知道如何将应用程序移动到托盘（至少在 Windows 系统中）？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T12:14:41.453

请参阅[此讨论](https://forums.oracle.com/forums/thread.jspa?threadID=2311451)。总之：

*   目前，最简单的解决方案似乎是将您的应用程序嵌入 AWT 并[使用 AWT 将您的应用程序放置到系统托盘](https://stackoverflow.com/questions/758083/how-do-i-put-a-java-app-in-the-system-tray)
*   根据[当前路线图，该功能针对 JavaFX 3.0，即 2013](http://www.oracle.com/technetwork/java/javafx/overview/roadmap-1446331.html)
*   该讨论中的 OP 使用了一种我尚未测试但可能会满足您需要的迂回方法。

# c# - 计数器是单个实例，实例名称“WebDev.WebServer40”对此计数器类别无效

> ID：10190903
> 
> 赞同：1
> 
> 时间：2012-04-17T12:05:44.647
> 
> 标签：c#, .net, performance, performancecounter

我正在尝试使用内存性能计数器：

```
System.Diagnostics.PerformanceCounter theMemCounter = 
    new System.Diagnostics.PerformanceCounter("Memory", "Available MBytes",
    System.Diagnostics.Process.GetCurrentProcess().ProcessName, true);

var memStart = theMemCounter.NextValue(); 
```

但在第二行中，我收到以下错误：

```
Counter is single instance, instance name 'WebDev.WebServer40' is not valid for this counter category. 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:26:24.453

Ottoni，我认为您不能为这个特定的性能计数器指定一个进程，因为它监视整个系统上的可用内存。

也许您正在寻找的 perfcounter 是“.NET CLR Memory(INSTANCE)# Bytes in all Heaps”或 .NET CLR Memory 类别中的其他一些，它能够监视所有或指定的 .net 应用程序的内存使用情况。

有关此类别的更多信息：http: [//msdn.microsoft.com/en-us/library/x2tyfybc.aspx](http://msdn.microsoft.com/en-us/library/x2tyfybc.aspx)

- 编辑

**解决方案：**

```
System.Diagnostics.PerformanceCounter theMemCounter =
    new System.Diagnostics.PerformanceCounter("Process", "Working Set",
    System.Diagnostics.Process.GetCurrentProcess().ProcessName);

var memStart = theMemCounter.NextValue() / 1024 / 1024; 
```

# c# - 如何从 mp4、wmv、flv、mov 视频中获取视频时长

> ID：10190906
> 
> 赞同：24
> 
> 时间：2012-04-17T12:05:57.757
> 
> 标签：c#, .net, video, mp4, duration

好的。实际上，我主要需要 mp4 格式。但是，如果也有可能获得其他类型，那就太好了。我只需要读取文件的持续时间。我怎么能用 C# 4.0 做到这一点？

所以我需要的是这个视频是这样的：`13 minutes 12 seconds`

我也可以使用 3 个第三方 exe。就像他们将有关文件的信息保存到文本文件中一样。我可以解析那个文本文件。

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-16T00:51:00.610

[这个](https://stackoverflow.com/a/10406221/110776)关于 P/Invoke for Shell32 的答案让我想起了[Windows API 代码包](http://archive.msdn.microsoft.com/WindowsAPICodePack)来访问常见的 Windows Vista/7/2008/2008R2 API。

使用包含的示例中的 PropertyEdit 演示非常容易，找出 Shell32 API 来获取各种媒体文件属性，例如持续时间。

我假设相同的先决条件适用于安装正确的解复用器，但它非常简单，因为它只需要添加对`Microsoft.WindowsAPICodePack.dll`and`Microsoft.WindowsAPICodePack.Shell.dll`和以下代码的引用：

```
using Microsoft.WindowsAPICodePack.Shell;
using Microsoft.WindowsAPICodePack.Shell.PropertySystem;

using (ShellObject shell = ShellObject.FromParsingName(filePath))
{
    // alternatively: shell.Properties.GetProperty("System.Media.Duration");
    IShellProperty prop = shell.Properties.System.Media.Duration; 
    // Duration will be formatted as 00:44:08
    string duration = prop.FormatForDisplay(PropertyDescriptionFormatOptions.None);
} 
```

* * *

# 其他的东西

MPEG-4/AAC 音频媒体文件的一些常见属性：

```
System.Audio.Format = {00001610-0000-0010-8000-00AA00389B71}
System.Media.Duration = 00:44:08
System.Audio.EncodingBitrate = ?56kbps
System.Audio.SampleRate = ?32 kHz
System.Audio.SampleSize = ?16 bit
System.Audio.ChannelCount = 2 (stereo)
System.Audio.StreamNumber = 1
System.DRM.IsProtected = No
System.KindText = Music
System.Kind = Music 
```

如果您正在寻找可用的元数据，很容易遍历所有属性：

```
using (ShellPropertyCollection properties = new ShellPropertyCollection(filePath))
{
    foreach (IShellProperty prop in properties)
    {
        string value = (prop.ValueAsObject == null) ? "" : prop.FormatForDisplay(PropertyDescriptionFormatOptions.None);
        Console.WriteLine("{0} = {1}", prop.CanonicalName, value);
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-17T12:19:39.943

您也可以使用 windows 媒体播放器，尽管它不支持您请求的所有文件类型

```
using WMPLib;

public Double Duration(String file)
    {
        WindowsMediaPlayer wmp = new WindowsMediaPlayerClass();
        IWMPMedia mediainfo = wmp.newMedia(file);
        return mediainfo.duration;
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-17T12:27:22.360

`MediaDet`您可以通过 DirectShow.NET 包装库使用 DirectShow API对象。有关代码示例，请参阅[获取视频长度，](https://stackoverflow.com/questions/6215185/getting-length-of-video)[`get_StreamLength`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd406887%28v=vs.85%29.aspx)以秒为单位获取持续时间。这假设 Windows 已安装 MPEG-4 解复用器（需要 Windows 7 之前的第三方组件，我相信这同样适用于[cezor 的另一个答案](https://stackoverflow.com/a/10191125/1518265)，尽管可以免费重新分发组件）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-17T12:09:02.147

恕我直言，您可以使用[MediaInfo](http://mediainfo.sourceforge.net/en)为您提供有关媒体文件的大量信息。
它有一个 CLI，因此您可以从代码中使用它并获取所需的信息。
你可以看看[这个链接](http://mediainfo.sourceforge.net/en/Support/SDK)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-17T12:09:25.097

我认为您正在寻找 FFMPEG - [https://ffmpeg.org/](https://ffmpeg.org/)

还有一些免费的替代品，您可以在这个问题中阅读它们 - [Using FFmpeg in .net?](https://stackoverflow.com/questions/2527963/using-ffmpeg-in-net)

> ```
>  FFMpeg.NET
>    FFMpeg-Sharp
>    FFLib.NET 
> ```

您可以查看此链接以获取使用 FFMPEG 和查找持续时间的示例 - [http://jasonjano.wordpress.com/2010/02/09/a-simple-c-wrapper-for-ffmpeg/](http://jasonjano.wordpress.com/2010/02/09/a-simple-c-wrapper-for-ffmpeg/)

```
 public VideoFile GetVideoInfo(string inputPath)
        {
            VideoFile vf = null;
            try
            {
                vf = new VideoFile(inputPath);
            }
            catch (Exception ex)
            {
                throw ex;
            }
            GetVideoInfo(vf);
            return vf;
        }
        public void GetVideoInfo(VideoFile input)
        {
            //set up the parameters for video info
            string Params = string.Format("-i {0}", input.Path);
            string output = RunProcess(Params);
            input.RawInfo = output;

            //get duration
            Regex re = new Regex("[D|d]uration:.((\\d|:|\\.)*)");
            Match m = re.Match(input.RawInfo);

            if (m.Success)
            {
                string duration = m.Groups[1].Value;
                string[] timepieces = duration.Split(new char[] { ':', '.' });
                if (timepieces.Length == 4)
                {
                    input.Duration = new TimeSpan(0, Convert.ToInt16(timepieces[0]), Convert.ToInt16(timepieces[1]), Convert.ToInt16(timepieces[2]), Convert.ToInt16(timepieces[3]));
                }
            }
       } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-29T06:58:39.507

FFMPEG 项目有一个名为 ffprobe 的工具，它可以为您提供多媒体文件所需的信息，并以格式良好的 JSON 格式输出信息。

以[这个答案](https://stackoverflow.com/a/16802769/1006863)为例。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-09-02T01:11:00.693

也使用 Windows Media Player 组件，我们可以获得视频的持续时间。
以下代码片段可能会对你们有所帮助：

```
using WMPLib;
// ...
var player = new WindowsMediaPlayer();
var clip = player.newMedia(filePath);
Console.WriteLine(TimeSpan.FromSeconds(clip.duration)); 
```

> 并且不要忘记添加**`wmp.dll`**将出现在**`System32`**文件夹中的引用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-11-13T13:55:54.923

我发现[NReco.VideoInfo 库](http://www.nrecosite.com/video_info_net.aspx)是最好的选择，而且比上面的一些库要简单得多。这是一个简单的为库提供文件路径并吐出元数据：

```
var ffProbe = new FFProbe();
var videoInfo = ffProbe.GetMediaInfo(blob.Uri.AbsoluteUri);
return videoInfo.Duration.TotalMilliseconds; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-26T21:34:44.487

我遇到了同样的问题，我们为 ffprobe [Alturos.VideoInfo](https://github.com/AlturosDestinations/Alturos.VideoInfo)构建了一个包装器。您只需安装`nuget`软件包即可使用它。还需要[ffprobe](https://ffmpeg.org/download.html)二进制文件。

```
PM> install-package Alturos.VideoInfo 
```

**例子**

```
var videoFilePath = "myVideo.mp4";

var videoAnalyer = new VideoAnalyzer("ffprobe.exe");
var analyzeResult = videoAnalyer.GetVideoInfo(videoFilePath);

var duration = analyzeResult.VideoInfo.Format.Duration; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-19T10:26:53.790

```
StreamReader errorreader;
string InterviewID = txtToolsInterviewID.Text;

Process ffmpeg = new Process();

ffmpeg.StartInfo.UseShellExecute = false;
ffmpeg.StartInfo.ErrorDialog = false;
ffmpeg.StartInfo.RedirectStandardError = true;

ffmpeg.StartInfo.FileName = Server.MapPath("ffmpeg.exe");
ffmpeg.StartInfo.Arguments = "-i " + Server.MapPath("videos") + "\\226.flv";

ffmpeg.Start();

errorreader = ffmpeg.StandardError;

ffmpeg.WaitForExit();

string result = errorreader.ReadToEnd();

string duration = result.Substring(result.IndexOf("Duration: ") + ("Duration: ").Length, ("00:00:00.00").Length); 
```

# java - 如何判断 Proguard 是否完成了它的工作

> ID：10190907
> 
> 赞同：24
> 
> 时间：2012-04-17T12:06:06.137
> 
> 标签：java, android, eclipse

我下载了封装在一个 zip 文件中的 proguard 并将其解压缩到我的硬盘上。我没有以任何方式*安装*它（因为我不知道如何安装）。然后我添加`proguard.config=proguard.cfg`到我的 project.properties 文件中。然后我做了一个“导出android应用程序”，完全期待eclipse抱怨它不知道我的proguard安装在哪里，但没有抱怨。实际上，我的密钥库中出现了一个新的 apk 文件，并且我的应用程序的 proguard 子目录中出现了一组文件（dump.txt 等）。mapping.txt 看起来像是从我的长变量名到一个和两个字母变量的一个很好的映射列表。这应该都是 proguard 以某种方式起作用的有力证据——我唯一担心的是 apk 几乎没有比以前小了。有什么方法可以检查 apk 是否包含 proguard'

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-17T12:33:44.997

通常，大小将指示 ProGuard 是否有效，但您可以：-

1.  使用[Dex2Jar](http://code.google.com/p/dex2jar/)将 apk 转换为 jar 文件
2.  [使用Jd-Gui](http://jd.benow.ca/)打开生成的 Jar 文件，查看其中包含的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:46:41.367

@Kuffs 方法的替代方法是将您的新 APK 与旧 APK 进行比较。打开它们（使用 7zip 或您喜欢的工具）并比较它们中的 classes.dex 文件的大小。

您可能看不到尺寸节省很多的几个直接原因：

*   未混淆的 classes.dex 能够比经过混淆的类压缩得多。这在某种程度上总是正确的。
*   您没有进行发布构建。Proguard 只能在发布版本上运行，因为调试混淆代码是一场噩梦。
*   您使用的 Proguard 设置对您的项目没有多大好处（至少在代码大小方面）。我之前实际上已经看到 proguard 的代码内联设置增加了 jar 文件的大小！

# c# - C# XML 反序列化 xmlns

> ID：10190915
> 
> 赞同：2
> 
> 时间：2012-04-17T12:06:33.000
> 
> 标签：c#, xml, xml-deserialization

我的代码：

```
CampaignList myObject;
XmlSerializer mySerializer = new XmlSerializer(typeof(CampaignList));
**myObject = (CampaignList)mySerializer.Deserialize(xmlDoc.CreateReader());** 
```

错误：

```
<CampaignListXml xmlns='api.paycento.com/1.0'> werd niet verwacht.
 [InvalidOperationException: <CampaignListXml
 xmlns='api.paycento.com/1.0'> werd niet verwacht.]   
 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderCampaignList.Read4_CampaignListXml()
 +214 
```

xml响应：

```
<CampaignListXml xmlns="api.paycento.com/1.0" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<Allcampaign>
</Allcampaign>
</CampaignListXml> 
```

我尝试将编码参数添加到 Deserialize 方法，但它给出了错误“XMLSerializer 不支持 UTF8”。我尝试了 UTF8、UTF-8 和 System.Text.Encoding.UTF8.EncodingName；

这是整个代码，如果您想遵循它。

```
 public IEnumerable<Campaign> GetCampaigns()
    {
        return GetCampaigns("active", 0, 50, "", "");
    }
    public IEnumerable<Campaign> GetCampaigns(string status, int startIndex, int pageSize, string orderby, string sort)
    {
        return GetCampaigns(status, startIndex, pageSize, orderby, sort, SessionKey);
    }
    public IEnumerable<Campaign> GetCampaigns(string status, int startIndex, int pageSize, string orderby, string sort, string sessionKey)
    {
        if (string.IsNullOrEmpty(sessionKey) || sessionKey.Length != 34)
            throw new ArgumentException("Session key must be 34 chars long. " + sessionKey.Length);
        string suffix = String.Format("campaigns/all/?status={0}&start={1}&psize={2}&orderby={3}&sort={4}&session={5}", status, startIndex, pageSize, orderby, sort, sessionKey);
        string uri = BASE_URL + suffix;
        string response = PerformAndReadHttpRequest(uri, "GET", "");
        string xml = "<CampaignListXml " + response.Substring(response.IndexOf('>'));      
        CampaignList myObject;
          XmlReaderSettings settings = new XmlReaderSettings();
          using (StringReader textReader = new StringReader(xml))
          {
              using (XmlReader xmlReader = XmlReader.Create(textReader, settings))
              {
                  XmlSerializer mySerializer = new XmlSerializer(typeof(CampaignList));
                  myObject = (CampaignList)mySerializer.Deserialize(xmlReader);
              }
          }
        return myObject.Campaign;
    }
    #endregion
    #region util methods
    private HttpWebResponse DoHttpWebRequest(String uri, String method, string data)
    {
        HttpWebRequest req = WebRequest.Create(uri) as HttpWebRequest;
        req.KeepAlive = false;
        req.ContentType = "application/xml";
        req.Method = method;
        if ((method.Equals("POST") || method.Equals("PUT")) && data != null)
        {
            byte[] buffer = Encoding.UTF8.GetBytes(data);
            Stream PostData = req.GetRequestStream();
            PostData.Write(buffer, 0, buffer.Length);
            PostData.Close();
        }
        return req.GetResponse() as HttpWebResponse;
    }
    private string ReadHttpResponse(HttpWebResponse response)
    {
        Encoding enc = System.Text.Encoding.UTF8;
        StreamReader loResponseStream = new StreamReader(response.GetResponseStream(), enc);
        string returnVal = loResponseStream.ReadToEnd();
        loResponseStream.Close();
        response.Close();
        return returnVal;
    }
    private string PerformAndReadHttpRequest(String uri, String method, string data)
    {
        return ReadHttpResponse(DoHttpWebRequest(uri, method, data));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:17:45.547

您的**CompaignList**类应该用 XmlRootAttribute 装饰，如下所示

```
[XmlRoot("CampaignListXml", Namespace = "api.paycento.com/1.0")]
public class CampaignList
{
} 
```

然后你可以从xml反序列化它，如下所示

```
using (StringReader reader = new StringReader(xml))
{
    XmlSerializer serializer = new XmlSerializer(typeof(CampaignList));
    CampaignList x1 = serializer.Deserialize(reader) as CampaignList;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:52:14.503

用这个：

```
 XmlReaderSettings settings = new XmlReaderSettings();
    using (StringReader textReader = new StringReader(xml))
    {
       using (XmlReader xmlReader = XmlReader.Create(textReader, settings))
       {
         myObject =(CampaingList)mySerializer.Deserialize(xmlReader);
       }
    } 
```

这样，您可以使用中间文本阅读器直接反序列化 xml 字符串。

当您不再需要它们时，这些使用可以关闭/处理流。如果你觉得更舒服，你可以明确地重写它。

# git - Jenkins - 无法从从节点克隆。SSH 密钥

> ID：10190919
> 
> 赞同：11
> 
> 时间：2012-04-17T12:06:45.817
> 
> 标签：git, ssh, hudson, jenkins, slave

我刚刚设置了我的第一个 Jenkins 奴隶。我运行构建，但遇到了 SSH 密钥问题。主 Jenkins 服务器在用户“jenkins”下运行。我已经设置了 SSH 密钥，这样我就可以在没有密码的情况下从主机 SSH 到从机。

例如来自主人：

```
jenkins@master:~$ ssh slave
Last login: Tue Apr 17 10:30:22 2012 from masterjenkins.com
$ whoami
jenkins 
```

这样就证明从节点也在'jenkins'用户下运行。（我已将公共 ssh 密钥从 jenkins@slave 复制到远程 git 服务器）。而且我可以从从站手动发出 git clone，但是当我从主站开始构建时，我会收到以下消息：

```
 ERROR: Error cloning remote repo 'origin' : Could not clone git@host:abc
hudson.plugins.git.GitException: Could not clone git@host:abc
Caused by: hudson.plugins.git.GitException: Error performing command: git clone --progress -o origin git@host:abc /var/lib/jenkins/workspace/abc_build
Command "git clone --progress -o origin git@host:abc /var/lib/jenkins/workspace/abc_build" returned status code 128: Initialized empty Git repository in /var/lib/jenkins/workspace/abc_build/.git/
Host key verification failed.
fatal: The remote end hung up unexpectedly
Caused by: hudson.plugins.git.GitException: Command "git clone --progress -o origin git@host:abc /var/lib/jenkins/workspace/abc_build" returned status code 128: Initialized empty Git repository in /var/lib/jenkins/workspace/abc_build/.git/
Host key verification failed.
fatal: The remote end hung up unexpectedly
Trying next repository
ERROR: Could not clone repository
FATAL: Could not clone 
```

所以它仍然暗示我的 SSH 密钥设置不正确。谁能告诉我需要将哪些密钥复制到哪里？

非常感谢， **ns**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:17:19.180

根据克隆 URL，您似乎正在混合两种不同的身份验证方法。您正在尝试以非用户身份 SSH 进入`git`主机`jenkins`。通常，当您托管自己的 GIT 存储库并使用 git@servername:reponame 进行克隆时，您会使用 gitolite 之类的东西。

你有没有设置像gitolite这样的东西？

以 jenkins 用户身份尝试像这样 ssh'ing。

```
ssh git@slave 
```

然后看看返回什么。这是一个更符合`git@host:abc`您正在做的 SSH。

如果您没有在服务器计算机上设置任何其他内容，则将您的克隆 url 更改为`jenkins@host:pathtorepo`

**更新**

`/home/git/.ssh/authorized_keys`

应该有这样的条目：（这都在一行上）

```
# gitolite start
command="/home/git/bin/gl-auth-command jenkins",no
-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAIEAt3+od84Gc9NBVrVb3MKjekHcBDwXXONnVYMNVpuRadoz/FPJTkOIxozKVPJDPI670O252giYpF59sOKqAJL0xEVUrhq8cDFuFwQsSAp0ed1kp/GRxx+pwytL58rcVJEHAy2DkD1z5HlNaZyvIxQyfLTnYfuL1Hx6Qe7dal7mXO0= keycomment
# gitolite end 
```

在 gitolite 中向 jenkins 添加存储库权限：（您可能必须在托管存储库的同一台机器上克隆，作为 gitolite 用户）

```
git clone git@host:gitolite-admin 
cd gitolite-admin
cd conf
vi gitolite.conf 
```

现在找到'abc'的条目，如果不存在则添加一个

```
repo    abc
  RW+            = jenkins 
```

现在提交并推送更改

```
git commit -a -m "Adding user jenkins to repo abc"
git push 
```

现在再做`ssh git@host`一次，看看 gitolite 是否告诉你你的新权限。

# android - 转换视频格式

> ID：10190924
> 
> 赞同：0
> 
> 时间：2012-04-17T12:07:16.183
> 
> 标签：android, android-emulator, video-conversion

在安卓手机中，如果我们拍摄视频，视频将是 3gp 格式。但我的应用程序不接受 3gp 视频，我想将 3gp 转换为 mp4 或 flv 或 swf。我需要在我的 android 模拟器中安装 FFMPEG 以将 3gp 转换为 mp4。怎么做？如果有人知道，请帮助我。

问候
桑达尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:50:40.323

[user1004789 又名 Sundar](https://stackoverflow.com/users/1004789/user1004789)

```
> "But my application will not accept 3gp video"
> I need to convert the video and upload it to php server.. 
```

或者你使用[视频转换器](https://play.google.com/store/search?q=video%20converter&c=apps) 或配置你的服务器，[谷歌是你的朋友](https://www.google.pt)

[http://blog.bounceweb.com/installing-ffmpeg-mencoder-gpac-for-3gp-video-conversion-server-for-centos/](http://blog.bounceweb.com/installing-ffmpeg-mencoder-gpac-for-3gp-video-conversion-server-for-centos/) [http://documentation.hwdmediashare.co.uk/wiki/Setting_up_your_server_for_hwdVideoShare](http://documentation.hwdmediashare.co.uk/wiki/Setting_up_your_server_for_hwdVideoShare)

# c# - 使用用户控制页面调用 App_code 文件夹中的类文件？

> ID：10190926
> 
> 赞同：-2
> 
> 时间：2012-04-17T12:07:29.683
> 
> 标签：c#, asp.net

我想在`App_code folder`使用`Usercontrol`页面里面调用一个类怎么办呢？

```
namespace Project.Folder
{
     public partial class DefaultMenu2 : System.Web.UI.UserControl
     {
        public void Page_Load(object sender, EventArgs e)
        {
           Util.Function();/*this is what i wan to call but cannot call it in my project */
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:19:55.153

> 这是因为函数不是静态的。

你现在的情况如下。

```
public class Class1
{
    public void abc()
    {
    }
} 
```

在这种情况下，为了调用`abc() function`，类必须是`Instantiated`第一个。然后对象将提供功能`Accessibility`。

例子

```
Class1 c = new Class1();
c.abc(); 
```

* * *

您还可以更改功能

```
public class Class1
{
    public static void abc()
    {
    }
} 
```

现在你可以调用`static function`without `class instantiation`。

```
Class1.abc(); 
```

# php - PHP将GET变量添加到链接

> ID：10190928
> 
> 赞同：1
> 
> 时间：2012-04-17T12:07:31.417
> 
> 标签：php, variables, get

我有一个带有如下链接的页面：

```
<a href="http://mysite.com/page.php">...</a> 
```

我也可能在当前 url 中有一个 GET 变量**?lang=en 。**如何将 GET 变量 ?lang=en 添加到页面中的所有链接，而无需手动添加它们或向每个链接添加变量？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:19:10.853

您可以使用输出缓冲或 Apache 过滤器来解析您的输出以自动将 lang 查询字符串参数添加到所有链接，但是，这并不是非常有效。

如果您真的不想手动将其添加到每个链接，那么我建议您将其存储在会话变量中。

在每个页面的开头（可能在一个通用的包含脚本中）你可以有类似的东西：

```
<?php
define('DEFAULT_LANG', 'en_GB');

session_start();

// check if a new lang has been specified.
if (isset($_GET['lang'])) {

    // yes, so use the requested lang
    $_SESSION['lang'] = $_GET['lang'];

    // otherwise, check if a lang was previously set
} else if ( ! isset($_SESSION['lang']) ) {

    // no, so use default lang:
    $_SESSION['lang'] = DEFAULT_LANG;

}
?> 
```

然后，您应该在页面的其余部分使用`$_SESSION['lang']`而不是。`$_GET['lang']`此外，您可能希望添加某种验证以确保请求的语言有效且可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:13:10.233

在`$_ENV['lang'] = 'en'`您的基本（假设**config.php**）文件中设置

`getenv('lang')`并通过or检索 `$_ENV['lang']`

[`Refernece`](http://php.net/manual/en/reserved.variables.environment.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:15:30.637

将**lang=en**添加到会话变量中`$_SESSION['lang']='en'`，并在每个页面中对其进行初始化。

# erlang - 二进制位的参数匹配

> ID：10190929
> 
> 赞同：2
> 
> 时间：2012-04-17T12:07:31.807
> 
> 标签：erlang

我在匹配二进制中的可变位数时遇到问题，我将其缩小到以下玩具示例以提取二进制的前几位：

```
f(<<H:Bits, _/binary>>, Bits) ->
    H. 
```

编译器（R15B01）告诉我`variable 'Bits' is unbound`。另一方面，这很好用：

```
f(X, Bits) ->
    <<H:Bits, _/binary>> = X,
    H. 
```

它符合我的预期，例如`f(<<1,2,3,4>>, 8)`产量为 1，`f(<<1,2,3,4>>, 16)`产量为 258。

为什么第一种形式不起作用？不应该是等价的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T13:07:43.273

在您的第一个示例中`f(<<H:Bits, _/binary>>, Bits) -> H`，变量 Bits 之前未绑定 - 它同时出现第一个和第二个参数模式，但它们未按任何特定顺序匹配，因此二进制文件中的 Bits 被认为是未绑定的。在第二个示例中`f(X, Bits) -> <<H:Bits, _/binary>> = X`，Bits 在 的匹配`<<...>> = X`开始之前被绑定。

第一个示例可以读作“取第二个参数中给出的位数，并从二进制文件中提取那么多位作为 H”（你想要的），但也可以读作“获取任意数量的位（也许尽可能多的）从二进制作为 H，然后检查它是否恰好与第二个参数中传递的数字相同”。为了避免这种歧义，编译器拒绝该程序。

# uml - 活动图指南

> ID：10190934
> 
> 赞同：0
> 
> 时间：2012-04-17T12:07:54.450
> 
> 标签：uml, activity-diagram

谁能指导我如何改进和更改我的活动图，以便它是正确的格式。

[http://imageshack.us/photo/my-images/857/activitydiagram.png/](http://imageshack.us/photo/my-images/857/activitydiagram.png/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:38:55.633

我没有链接它，我会细分为更小的部分，以便更好地理解和查看......

```
ex:Camera Activated, gallery, favorites.... 
```

你应该解释一下你在做什么......

反正...

```
- your main menu just have menus? don't have any thing else?
- Gallery menu, goes to database but doesn't receive any thing
- Camera menu? what it does? the same as Gallery menu? is better to sub divide that
- if you already have it in the Favorite list, i would think better in what to do that.. 
```

我建议看这个 [http://www.agilemodeling.com/artifacts/activityDiagram.htm](http://www.agilemodeling.com/artifacts/activityDiagram.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:35:59.813

图表的某些部分更适合状态图，而其他部分则更适合类或组件图。我确实了解您要传达的信息，但是作为活动图它不起作用。

对于活动图，您应该按照“首先发生这种情况，然后发生这种情况”的方式进行思考。发生的事情应该由活动来表示，而不是由它们之间的连接器来表示；这些只是为了显示活动的顺序。活动名称应该是动词短语。

“地图菜单”、“画廊”，这些都是名词短语——你指的是存在的东西，而不是正在发生的东西。“Camera Activated”，这是一种状态；再次，不是发生的事情。（状态*改变*是发生的事情，但*处于*状态中不是。）

活动应该有“应用程序启动”、“用户选择打开画廊”、“用户激活地图”、“应用程序从数据库中检索地图数据”之类的名称——它们应该是发生的事情。执行活动的事物（用户、应用程序、数据库）在活动图中并不重要。

如果您不想用这些术语来思考，那么只需使用不同类型的图表。

# javascript - 单击输入时使用jQuery忽略表单提交

> ID：10190935
> 
> 赞同：2
> 
> 时间：2012-04-17T12:07:58.243
> 
> 标签：javascript, jquery

我有一个带有提交输入的表单，我需要在单击按钮时，我的脚本执行一些 Ajax 操作。我还需要在 Ajax 请求期间禁用该按钮。所以我需要一个 jQuery 命令来避免在单击输入时提交真正的表单。我试着用这个：

```
$('input.searchplease').click(function () {
    $(this).attr('disabled', 'disabled');

    alert('Yep');
    //Do Ajax
}); 
```

这没有奏效。我的意思是，警报显示正确，但表单已提交。那么你的建议是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T12:09:49.217

试试这个：

```
$('input.searchplease').click(function (e) {
   $(this).attr('disabled', 'disabled');

   alert('Yep');
   //Do Ajax

   e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:10:09.217

```
$('input.searchplease').click(function () {
    alert('yep');
    return false;
}); 
```

这应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:10:02.937

你可以这样做：

```
$('form').submit(function(){
    ... ajax things

    return false;
}); 
```

我宁愿不禁用按钮（然后启用它），除非我必须这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:16:29.390

试试这种方式：

```
$("#id-of-your-form").submit(function() {

    $("#id-of-your-submit-input").attr("disabled", true);

    // do-ajax
    // you can use jquery's ajax complete handler to enable the submit button again

    return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T12:33:31.113

我认为这可以解决问题：

```
$('form').submit(function(event) {
    event.preventDefault();
    $('#submit-button-ID').attr('disabled', 'disabled');
    $.ajax({
        ...,
        success: function() {
                $('#submit-button-ID').removeAttr('disabled');
              }
    });
}); 
```

# excel - 将oracle数据库中的数据排序到不同的工作表中

> ID：10190946
> 
> 赞同：1
> 
> 时间：2012-04-17T12:09:01.447
> 
> 标签：excel, oracle10g, vba

以下是从 oracle 数据库中获取数据到 excel 的 VBA 代码。我希望将与 collabname 301_CBCompanySync_SAP_to_HHT 相关的数据放入名为 301_CBCompanySync_SAP_to_HHT 的表中，而不是将数据放入某个随机表中

与 collabname 302_CBCustomer_SAP_to_HHT 相关的数据将进入名为“302_CBCustomer_SAP_to_HHT”的工作表中......等等

我该如何修改下面的代码

```
 Sub Load_data()

        Dim cn As ADODB.Connection
        Dim rs As ADODB.Recordset
        Dim col As Integer
        Dim row As Integer
        Dim Query As String
        Dim mtxData As Variant

        Set cn = New ADODB.Connection
        Set rs = New ADODB.Recordset

     cn.Open ( _
    "User ID=xxxx" & _
    ";Password=xxxxx" & _
    ";Data Source=xx.xx.xx.xxx:xxxx/xxxxxx" & _
    ";Provider=OraOLEDB.Oracle")

Dim arrayCollabName As Variant
Dim idx As Integer
idx = 0
arrayCollabName = Array("301_CBCompanySync_SAP_to_HHT", "302_CBCustomer_SAP_to_HHT", "303_CustomerExclusionList_SAP_to_HHT")

  For idx = 0 To 2

    Sheets("Sheet1").Select
    Sheets.Add

    rs.Open "select COLLABNAME,DATETIME,TOTALFLOWS,SUCCFLOWS,FAILEDFLOWS from EWS_COLLAB WHERE COLLABNAME like '" & arrayCollabName(idx) & "'", cn

        col = 0
        Do While col < rs.Fields.Count
            .Cells(1, col + 1) = rs.Fields(col).Name
            col = col + 1
        Loop
        mtxData = Application.Transpose(rs.GetRows)
        .Range("A2").Resize(UBound(mtxData, 1) - LBound(mtxData, 1) + 1, UBound(mtxData, 2) - LBound(mtxData, 2) + 1) = mtxData

    End With
    rs.Close

  Next

cn.Close
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:51:46.610

所以，希望它没事。

```
Sub Load_data()
    Dim cn As ADODB.Connection
    Dim rs As ADODB.Recordset
    Dim col As Integer
    Dim row As Integer
    Dim Query As String
    Dim mtxData As Variant
    Dim arrayCollabName As Variant
    Dim idx As Integer

Set cn = New ADODB.Connection
Set rs = New ADODB.Recordset
idx = 0
'array with all collab names
arrayCollabName = Array("301_CBCompanySync_SAP_to_HHT", "302_CBCustomer_SAP_to_HHT", "303_CustomerExclusionList_SAP_to_HHT")

'connect to Database
 cn.Open ( _
"User ID=xxxx" & _
";Password=xxxxx" & _
";Data Source=xx.xx.xx.xxx:xxxx/xxxxxx" & _
";Provider=OraOLEDB.Oracle")

'loop for inserting the Data from the SQL
For idx = 0 To 2
    Sheets("Sheet1").Select
    Sheets.Add
    'Rename the new added sheet
    If Len(arrayCollabName(idx)) > 31 Then
        ActiveSheet.Name = Left(arrayCollabName(idx), 31)
    Else
        ActiveSheet.Name = arrayCollabName(idx)
    End If
    'database query
    rs.Open "select COLLABNAME,DATETIME,TOTALFLOWS,SUCCFLOWS,FAILEDFLOWS from EWS_COLLAB WHERE COLLABNAME like '" & arrayCollabName(idx) & "'", cn

    col = 0
    Do While col < rs.Fields.Count
        .Cells(1, col + 1) = rs.Fields(col).Name
        col = col + 1
    Loop
    mtxData = Application.Transpose(rs.GetRows)
    .Range("A2").Resize(UBound(mtxData, 1) - LBound(mtxData, 1) + 1, UBound(mtxData, 2) - LBound(mtxData, 2) + 1) = mtxData

    End With
    'database query with the search results closing
    rs.Close
Next
'database connection closed
cn.Close
End Sub

    Sub deletSheets()
        Dim idx As Integer
        Application.DisplayAlerts = False
        For idx = 0 To ActiveWorkbook.Sheets.Count
            If Not ActiveSheet.Name = "Sheet1" Then
                ActiveWindow.SelectedSheets.Delete
            End If
        Next idx
        Application.DisplayAlerts = True
    End Sub 
```

# android - 停用滑动 SeekBar（或使用拇指创建进度条......）

> ID：10190950
> 
> 赞同：1
> 
> 时间：2012-04-17T12:09:08.733
> 
> 标签：android, view, android-widget, seekbar, android-progressbar

我在代码中使用 SeekBar 时遇到问题...

我想要一个 SeekBar，其值由我设置，而不是由用户设置。我建立但我不喜欢的唯一解决方案是将启用设置为 false，但搜索栏的颜色变为灰色......（所以当用户滑动拇指时我无法做任何事情......）

我会得到类似的东西，但没有可触摸的事件！

![在此处输入图像描述](../Images/b21c3adc4b750f11aec692945ef2d511.png)

解决了：

正如@CommonsWare 所说，我解决了这个问题：

```
public class TaskListProgressBar extends SeekBar {

public TaskListProgressBar(Context context) {
    super(context);
 }

public TaskListProgressBar(Context context, AttributeSet attrs) {
        super(context, attrs);
   }

   public TaskListProgressBar(Context context, AttributeSet attrs, int defStyle) {
       super(context, attrs, defStyle);
   }

   @Override
   public boolean onTouchEvent(MotionEvent event) {
       return true;
   }

   @Override
   public boolean onTrackballEvent(MotionEvent ev) {
       return false;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:18:09.407

您可以对其进行子类化并覆盖`onTouchEvent()`and `onTrackballEvent()`（吃掉所有试图滑动拇指的尝试）并使用`android:focusable="false"`（以防止它获得焦点，因此箭头键无法修改拇指位置）。

话虽如此：

*   我从来没有试过这个，所以YMMV。

*   请仅在您根据上面的屏幕截图更改默认拇指图像时执行此操作。否则，用户会期望拇指是可移动的，而当他们无法移动时，他们会感到沮丧。

# actionscript-3 - Flex、creationComplete 和 Rotation

> ID：10190953
> 
> 赞同：0
> 
> 时间：2012-04-17T12:09:14.630
> 
> 标签：actionscript-3, apache-flex, flex3

首先，我不是 Flex 方面的专家，所以以下可能是 101 个陷阱。

我的第一个问题是我试图将包含在画布中的一组对象旋转 90 度，每个对象的大小都是统一的，包含文本和图像。我的第一个问题是旋转对象会导致它们调整到自身的范围。例如，如果对象为 200 x 250，图像从 0 像素拉伸到 250 像素，则旋转后内容将调整为 200 像素，这意味着图像现在为 200 像素。我随后可以将对象的大小重新调整到适当的尺寸，但感觉很尴尬和笨拙。有没有更好的方法来执行这种旋转，它可以旋转对象而不受对象边界的限制？

其次，理想情况下，我需要此代码在 creationComplete 事件中运行。当它这样做时，对象的定位/居中被忽略并且在屏幕上呈现时是不同的（例如，如果我在单击事件中运行以下代码，它会在其中心点上完美旋转；通过 creationComplete 它偏移对象像中心点不存在）？

任何指针？

我的轮换代码...

```
<mx:Script>
    <![CDATA[
        // Capture the init for the application
        private function InitialRotate( e:Event ):void{ 
            var offsetWidth:Number = (this.width / 2);
            var offsetHeight:Number = this.y + (this.height / 2);
            // Rotates on the center (but resizes)
            var tempMatrix:Matrix = this.transform.matrix;                
            tempMatrix.translate(-offsetWidth,-offsetHeight);
            tempMatrix.rotate(90 * (Math.PI / 180));
            tempMatrix.translate(+offsetWidth,+offsetHeight);
            this.transform.matrix = tempMatrix;
            // Adjusts the objects position and width to size appropriately
            this.y -= 5.5;
            this.width = 256;
        }
    ]]>
</mx:Script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:07:20.113

我使用 spark rect 类（recently.spark.primitives.supportClasses.GraphicElement.rotation）的旋转属性，它就像

```
line.rotation=90; 
```

也许这个博客有帮助：[http ://blog.flexexamples.com/2007/09/14/rotating-images-using-the-matrix-class/](http://blog.flexexamples.com/2007/09/14/rotating-images-using-the-matrix-class/)

# android - 应用程序卡住并给出 ANR keydispatchingtimedout 错误

> ID：10190954
> 
> 赞同：0
> 
> 时间：2012-04-17T12:09:15.800
> 
> 标签：android, cocos2d-iphone, sprite, cocos2d-android

我正在使用 cocos2d 开发一款游戏，其中有一些平铺图像。完成触摸和拖动任务后，我再次加载同一组精灵。但是，为了避免内存泄漏，我将删除所有精灵并将它们重新添加到同一个场景对象中。我在游戏中有大约 100 个谜题，但在 25-30 个谜题结束后，它停止工作卡住了，当我多次按下返回按钮时，它会出现 ANR keydispatchingtimedout 错误。请建议我... TIA

# iphone - 有没有办法将 TabBarItem 图像默认显示为选中状态？

> ID：10190961
> 
> 赞同：0
> 
> 时间：2012-04-17T12:09:58.303
> 
> 标签：iphone, uitabbaritem

在我的应用程序中登录成功后，我的日程安排屏幕打开。它具有以下 3 个 TabbarItems 和 My Schedule 选项本身。当我来到这个屏幕时，我的日程安排项目图像应该突出显示，其他 2 r 正常。我怎么能做到这一点？请尽快帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:12:47.227

您可以使用的`selectedIndex`属性来做到这一点`UITabBarController`

```
 tabBarController.selectedIndex = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:53:49.103

@Python

您使用此代码，我认为这将对您有所帮助，并且它还突出显示了您选择的选项卡 bat 项目。

```
UITabBarController *tabbar1 = [[UITabBarController alloc] init];

onecontroller  *second = [[onecontroller alloc] initWithNibName:nil bundle:nil];
second.title=@"Leaderboard";

secondcontroller *third=[[secondcontroller alloc]initWithNibName:nil bundle:nil];
third.title=@"Scorecards";

thirdcontroller *one=[[thirdcontroller alloc]initWithNibName:nil bundle:nil];
 one.title=@"Compete";

tabbar1.viewControllers = [NSArray arrayWithObjects:one, second,third,nil]; 
tabbar1.view.frame=CGRectMake(0, 0, 320, 460);
[self.view addSubview:tabbar1.view]; 
```

并在您的 viewdidload 中添加这一行，您首先突出显示哪个视图

tabBarController.selectedIndex = 0;

或者也可以在上面添加，但是如果您想要更改它，那么它总是会突出显示，然后每个视图控制器视图都会加载您使用 chage 索引值编写此代码。

# grails - Grails：将服务注入命令对象

> ID：10190968
> 
> 赞同：5
> 
> 时间：2012-04-17T12:10:23.053
> 
> 标签：grails, grails-2.0

我有一个需要调用服务的命令类。

```
import org.codehaus.groovy.grails.commons.ApplicationHolder as AH

class FilterVisitCommand {

    def accessRightsService = AH.application.mainContext.accessRightsService
    def customerService = AH.application.mainContext.customerService
...
} 
```

这种通过应用程序持有者定义的服务正在工作，但已被弃用。还有另一种方法可以让服务被注入吗？只有“def accessRightsService”不适用于命令类。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T03:50:27.323

如果您将服务注入到命令对象中进行验证，您可能需要通过命令对象引用该服务。

```
class FilterVisitCommand {

    def accessRightsService

    static constraints = {
        foo(validator: { foo, cmd ->
            cmd.accessRightsService.bar()
        })
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:52:02.917

[Grails 富域](http://grails.org/plugin/rich-domain)插件支持常规 Groovy 类的服务注入、验证等。

# c# - ashx 处理程序仅从 ascx 页面调用一次

> ID：10190971
> 
> 赞同：1
> 
> 时间：2012-04-17T12:10:30.553
> 
> 标签：c#, asp.net, ashx, ascx

在 .ascx 页面中，我有如下图像按钮：

```
"<asp:Image ID="imgPhotos" runat="server" Width="102" Height="82"/>" 
```

在其背后的代码中，我有：

```
this.imgPhotos.ImageUrl = "~/lib/services/GetSpaceImage.ashx"; 
```

在 GetSpaceImage.ashx 中，我正在动态生成图像。但问题是，它第一次运作良好。但是，第二次等等它永远不会生成新图像。调试器仅在第一次（应用程序加载时）命中处理程序。我试过使用：“context.Response.Cache.SetCacheability(HttpCacheability.NoCache);”

在 ProcessRequest 的开头。但这也无济于事。我错过了什么吗？请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:25:04.637

浏览器缓存了这个请求，为每个 ashx url 添加唯一的参数，如下所示：

```
this.imgPhotos.ImageUrl = "~/lib/services/GetSpaceImage.ashx?param=" + DateTime.Now.Ticks.ToString(); 
```

# google-maps-api-3 - 天气图层弹出窗口上的符号不正确

> ID：10190973
> 
> 赞同：0
> 
> 时间：2012-04-17T12:10:34.077
> 
> 标签：google-maps-api-3

当用户单击天气图层上的天气位置符号时，提供的弹出窗口似乎有错误。

对于每个站点，无论实际情况或预报如何，当前和预报天数都会出现阴雨符号。

据推测，当信息来自那里时，weather.com 会引入此错误。无论报告或预测情况如何，我在世界各地检查过的每个站点都会出现错误符号

[地图上弹出窗口的屏幕截图](http://www.flickr.com/photos/79158563@N02/7087070143/in/photostream)

# drupal-views - Drupal 7 Views Distinct 选项

> ID：10190975
> 
> 赞同：2
> 
> 时间：2012-04-17T12:10:52.727
> 
> 标签：drupal-views, distinct, option

我正在使用drupal 7。我创建了将按其分类术语过滤的视图，如果多个节点选择相同的分类术语，则视图将重复分类术语值。如何避免视图中的重复值并仅显示将从分类术语创建的最新节点。

提前致谢

萨蒂什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T13:59:42.650

创建过滤条件时，选择“内容：有分类术语：”，然后选择分类，第三步有一个“减少重复项”字段，如果选中它，则视图不应显示两次同一个节点。![在此处输入图像描述](../Images/b108607c2e56cf39e9aed96f45c2efb8.png)

# google-analytics - 谷歌分析如何保存推荐信息

> ID：10190979
> 
> 赞同：-1
> 
> 时间：2012-04-17T12:11:05.617
> 
> 标签：google-analytics

谷歌分析如何跟踪发布在社交网站上的网页。这些帖子有指向第三方缩短工具的链接，该工具重定向到主网页。

例如：

让网站提供链接缩短服务。如果用户使用该服务缩短了他的链接，它会将其发布在 twitter、facebook 等社交网站上。

该链接将被重定向到服务提供商网页，并从那里再次重定向到原始位置。那么谷歌将如何跟踪它。如果我的问题不清楚，请发表评论。我会详细说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:38:57.823

即使对我来说并不完全清楚，我也会尝试回答这个问题。

大多数较短的服务将创建一个 30 倍的 HTTP 重定向到最终目的地。例如，下面的链接是一个 301 重定向到我的个人博客。浏览器遵循 30X 重定向，但将原始引用保留为 HTTP 标头，并且可通过 javascript API 在页面上访问。

[http://goo.gl/fbFsu](http://goo.gl/fbFsu)

当您登陆我的站点`document.referrer`时，在控制台上执行，您应该看到 stackOverflow 作为引用者，即使您通过 goo.gl 进行重定向也是如此。

不过，并非所有服务都使用 HTTP 重定向。例如，Twitter 的 t.co 就没有。因此 twitter.com 永远不会作为推荐来源出现在 Google Analytics（分析）报告中。相反，您会看到 t.co。

这是有充分理由的。在 twitter 推出 t.co 之前，很难衡量 twitter 的受众。这是因为 twitter 用户经常使用客户端应用程序（例如：TweetDeck），在这种情况下没有推荐，这些访问被视为直接访问。

既然 twitter 有 t.co，所有在 twitter 上发布的链接都围绕 t.co 重定向，并在 Web 分析工具上报告为来自 t.co 的推荐，无论用户使用的是客户端还是通常的 Twitter 网站。

对于其他网络，如 Google Plus 或 facebook，这不是问题，因为用户总是通过网站访问界面。

# spring - Spring 和 Tika 集成：我的方法是线程安全的吗？

> ID：10190980
> 
> 赞同：12
> 
> 时间：2012-04-17T12:11:07.203
> 
> 标签：spring, thread-safety, apache-tika

我对 Spring 和 Apache Tika 集成感兴趣。这种方法是线程安全的吗？

```
<bean id="tika" class="org.apache.tika.Tika"/> 
```

我可以安全地`detect()`从不同的线程调用方法吗？

是否有任何 Spring-Tika 集成模式？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T20:49:44.217

根据这个 [http://comments.gmane.org/gmane.comp.apache.tika.user/677](http://comments.gmane.org/gmane.comp.apache.tika.user/677)

和这个

[http://issues.liferay.com/browse/LPS-15824](http://issues.liferay.com/browse/LPS-15824)

和这个

[http://web.archiveorange.com/archive/v/99aTkiOCyApHaqASS5CS](http://web.archiveorange.com/archive/v/99aTkiOCyApHaqASS5CS)

它会建议是的。

尽管线程安全存在错误

[https://issues.apache.org/jira/browse/TIKA-599](https://issues.apache.org/jira/browse/TIKA-599)

# python - 获取python多处理池中worker的唯一ID

> ID：10190981
> 
> 赞同：64
> 
> 时间：2012-04-17T12:11:09.280
> 
> 标签：python, multiprocessing

有没有办法为python多处理池中的每个工作人员分配一个唯一的ID，以便池中特定工作人员运行的作业可以知道哪个工作人员正在运行它？根据文档， a`Process`有一个`name`但是

> 该名称是一个仅用于识别目的的字符串。它没有语义。多个进程可以被赋予相同的名称。

对于我的特定用例，我想在一组四个 GPU 上运行一堆作业，并且需要为应该运行作业的 GPU 设置设备号。因为作业的长度不均匀，所以我想确保在前一个作业完成之前尝试在 GPU 上运行的作业不会在 GPU 上发生冲突（因此这排除了将 ID 预先分配给工作单元提前）。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-04-17T13:53:11.433

看起来你想要的很简单：`multiprocessing.current_process()`. 例如：

```
import multiprocessing

def f(x):
    print multiprocessing.current_process()
    return x * x

p = multiprocessing.Pool()
print p.map(f, range(6)) 
```

输出：

```
$ python foo.py 
<Process(PoolWorker-1, started daemon)>
<Process(PoolWorker-2, started daemon)>
<Process(PoolWorker-3, started daemon)>
<Process(PoolWorker-1, started daemon)>
<Process(PoolWorker-2, started daemon)>
<Process(PoolWorker-4, started daemon)>
[0, 1, 4, 9, 16, 25] 
```

这将返回进程对象本身，因此进程可以是它自己的身份。您也可以调用`id`它以获得唯一的数字 id——在 cpython 中，这是进程对象的内存地址，所以我*认为*没有任何重叠的可能性。最后，您可以使用进程的`ident`或`pid`属性——但这仅在进程启动后设置。

此外，查看源代码，在我看来，自动生成的名称（如`Process`上面 repr 字符串中的第一个值所示）很可能是唯一的。为每个进程`multiprocessing`维护一个对象，该对象用于为它产生的任何子进程生成一个元组。因此顶级进程产生具有单值 id 的子进程，它们产生具有双值 id 的进程，依此类推。然后，如果没有将名称传递给构造函数，它会简单地根据 _identity[自动生成名称](http://hg.python.org/cpython/file/ed954d11dadd/Lib/multiprocessing/process.py#l111)，使用. 然后使用[更改](http://hg.python.org/cpython/file/ed954d11dadd/Lib/multiprocessing/pool.py#l223)进程的名称，使自动生成的 id 保持不变。`itertools.counter`[`_identity`](http://hg.python.org/cpython/file/ed954d11dadd/Lib/multiprocessing/process.py#l98)`Process``':'.join(...)``Pool` `replace`

这一切的结果是，虽然两个`Process`es*可能*具有相同的名称，因为您*可能*在创建它们时为它们分配相同的名称，但如果您不触摸 name 参数，它们是唯一的。此外，理论上您可以`_identity`用作唯一标识符；但我认为他们将这个变量设为私有是有原因的！

上面的一个例子：

```
import multiprocessing

def f(x):
    created = multiprocessing.Process()
    current = multiprocessing.current_process()
    print 'running:', current.name, current._identity
    print 'created:', created.name, created._identity
    return x * x

p = multiprocessing.Pool()
print p.map(f, range(6)) 
```

输出：

```
$ python foo.py 
running: PoolWorker-1 (1,)
created: Process-1:1 (1, 1)
running: PoolWorker-2 (2,)
created: Process-2:1 (2, 1)
running: PoolWorker-3 (3,)
created: Process-3:1 (3, 1)
running: PoolWorker-1 (1,)
created: Process-1:2 (1, 2)
running: PoolWorker-2 (2,)
created: Process-2:2 (2, 2)
running: PoolWorker-4 (4,)
created: Process-4:1 (4, 1)
[0, 1, 4, 9, 16, 25] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-15T18:30:39.020

您可以使用`multiprocessing.Queue`来存储 id，然后在池进程初始化时获取 id。

优点：

*   您不需要依赖内部结构。
*   如果您的用例是管理资源/设备，那么您可以直接输入设备编号。这也将确保没有设备被使用两次：如果池中的进程多于设备，则额外的进程将阻塞`queue.get()`并且不会执行任何工作（这不会阻塞您的 porgram，或者至少在我测试过）。

缺点：

*   您有额外的通信开销，并且生成池进程需要更长的时间：没有`sleep(1)`示例中的所有工作可能由第一个进程执行，因为其他进程尚未完成初始化。
*   你需要一个全球性的（或者至少我不知道如何解决它）

例子：

```
import multiprocessing
from time import sleep

def init(queue):
    global idx
    idx = queue.get()

def f(x):
    global idx
    process = multiprocessing.current_process()
    sleep(1)
    return (idx, process.pid, x * x)

ids = [0, 1, 2, 3]
manager = multiprocessing.Manager()
idQueue = manager.Queue()

for i in ids:
    idQueue.put(i)

p = multiprocessing.Pool(8, init, (idQueue,))
print(p.map(f, range(8))) 
```

输出：

```
[(0, 8289, 0), (1, 8290, 1), (2, 8294, 4), (3, 8291, 9), (0, 8289, 16), (1, 8290, 25), (2, 8294, 36), (3, 8291, 49)] 
```

请注意，只有 4 个不同的 pid，尽管池包含 8 个进程并且一个 idx 仅由一个进程使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-05T15:10:25.587

我用线程做到了这一点，最终使用[队列](https://docs.python.org/2/library/queue.html#queue-objects)来处理作业管理。这是基线。我的完整版本有一堆`try-catches`（特别是在工作人员中，以确保`q.task_done()`即使在失败时也会调用）。

```
from threading import Thread
from queue import Queue
import time
import random

def run(idx, *args):
    time.sleep(random.random() * 1)
    print idx, ':', args

def run_jobs(jobs, workers=1):
    q = Queue()
    def worker(idx):
        while True:
            args = q.get()
            run(idx, *args)
            q.task_done()

    for job in jobs:
        q.put(job)

    for i in range(0, workers):
        t = Thread(target=worker, args=[i])
        t.daemon = True
        t.start()

    q.join()

if __name__ == "__main__":
    run_jobs([('job', i) for i in range(0,10)], workers=5) 
```

我不需要使用多处理（我的工作人员只是用于调用外部进程），但这可以扩展。用于多处理的 API 稍微改变了一点，以下是您可以适应的方式：

```
from multiprocessing import Process, Queue
from Queue import Empty
import time
import random

def run(idx, *args):
    time.sleep(random.random() * i)
    print idx, ':', args

def run_jobs(jobs, workers=1):
    q = Queue()
    def worker(idx):
        try:
            while True:
                args = q.get(timeout=1)
                run(idx, *args)
        except Empty:
            return

    for job in jobs:
        q.put(job)

    processes = []
    for i in range(0, workers):
        p = Process(target=worker, args=[i])
        p.daemon = True
        p.start()
        processes.append(p)

    for p in processes: 
        p.join()

if __name__ == "__main__":
    run_jobs([('job', i) for i in range(0,10)], workers=5) 
```

两个版本都会输出如下内容：

```
0 : ('job', 0)
1 : ('job', 2)
1 : ('job', 6)
3 : ('job', 3)
0 : ('job', 5)
1 : ('job', 7)
2 : ('job', 1)
4 : ('job', 4)
3 : ('job', 8)
0 : ('job', 9) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-05T14:10:08.547

我不确定它会如何工作`Pool`，但打印`Process`会提供一些独特的输出：

```
x = Process(target=time.sleep, args=[20])
x.start()
print(x)  # <Process name='Process-5' pid=97121 parent=95732 started> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-25T08:08:25.803

我设法通过使用 获取函数句柄来映射到类方法`getattr`，然后使用包装器来打包和解包尽可能多的参数，因为我想传递给被映射的方法。在我的例子中，我从启动池的同一个类中传递方法，但您也可以传递一个对象以映射到不同的类。

这是代码：

```
import multiprocessing
from multiprocessing import Pool

def warp(args):
    func = args[0]
    frame = args[1]
    left_over = args[2:]
    func(frame, *left_over)

class MyClass:

    def __init__(self):
        self.my_flag = 5

    def exec_method(self, method, int_list, *args):
        obj = getattr(self, method.__name__)

        packed = list()
        for i in int_list:
            pack = list()
            pack.append(obj)
            pack.append(i)
            for arg in args:
                pack.append(arg)
            packed.append(pack)

        print("Start")
        pool = Pool(processes=multiprocessing.cpu_count())
        pool.map(warp, packed)
        print("End")

    def method1(self, my_str):
        print(self.my_flag, my_str)

    def method2(self, i, print_str, bool_flat):
        print(multiprocessing.current_process(), self.my_flag, i, print_str, str(bool_flat))

cls: MyClass = MyClass()
cls.my_flag = 58
cls.exec_method(cls.method2, [1, 5, 10, 20, 30], "this is a string", True) 
```

这是输出：

```
Start
<ForkProcess(ForkPoolWorker-1, started daemon)> 58 1 this is a string True
<ForkProcess(ForkPoolWorker-2, started daemon)> 58 5 this is a string True
<ForkProcess(ForkPoolWorker-4, started daemon)> 58 20 this is a string True
<ForkProcess(ForkPoolWorker-5, started daemon)> 58 30 this is a string True
<ForkProcess(ForkPoolWorker-3, started daemon)> 58 10 this is a string True
End 
```

# indexing - 在迭代 Ember 集合时访问索引值

> ID：10190986
> 
> 赞同：0
> 
> 时间：2012-04-17T12:11:23.973
> 
> 标签：indexing, each, ember.js

在迭代 ember 集合时尝试访问索引值，可以像这样访问索引值：

```
{{_parentView.contentIndex}} 
```

但是当尝试在比较助手中访问相同的索引值时，看不到该值。任何有关如何访问助手内部索引的帮助将不胜感激。

**代码：**

```
{{#each App.SampleController}}
    {{#view App.HomeView contentBinding="this"}}
        Index : {{_parentView.contentIndex}}
        {{#compare _parentView.contentIndex "0" operator="=="}} 
        {{/compare}
    {{/view}} 
{{/each}} 
```

输出：

```
Index: 0 and the value getting passed into compare helper is `_parentView.contentIndex` as a string! 
```

**比较助手看起来像这样：**

```
 Ember.Handlebars.registerHelper('compare', function(lvalue, rvalue, options) {

   if (arguments.length < 3)
    throw new Error("Handlerbars Helper 'compare' needs 2 parameters");

 operator = options.hash.operator || "==";

 var operators = {
    '==':       function(l,r) { return l == r; },
    '===':      function(l,r) { return l === r; },
    '!=':       function(l,r) { return l != r; },
    '<':        function(l,r) { return l < r; },
    '>':        function(l,r) { return l > r; },
    '<=':       function(l,r) { return l <= r; },
    '>=':       function(l,r) { return l >= r; },
    'typeof':   function(l,r) { return typeof l == r; }
};

if (!operators[operator])
    throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+operator);

console.log("operator is "+ lvalue +" and "+rvalue);
var result = operators[operator](lvalue,rvalue);
console.log("result from compare registerHelper is "+ result);

if( result ) {
    return options.fn(this);
} else {
    return options.inverse(this);
} 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:55:34.723

传递给您的助手的第一个参数实际上是一个字符串，它表示应解析的属性的路径。因此，要让您`lvalue`必须按照这些方式做一些事情，请参阅[http://jsfiddle.net/pangratz666/DLPgN/](http://jsfiddle.net/pangratz666/DLPgN/)：

```
Ember.Handlebars.registerHelper('compare', function(path, compareValue, options) {

    ...

    // options.contexts[0] is the passed context
    // path is the path to the property of the context
    var lvalue = Ember.getPath(options.contexts[0], path);
    var rvalue = parseInt(compareValue, 10); // convert to number since it's a string

    ...

    var result = operators[operator](lvalue, rvalue);

});​ 
```

# iphone - 如何从 iPhone 获取生日列表联系人

> ID：10190988
> 
> 赞同：6
> 
> 时间：2012-04-17T12:11:29.800
> 
> 标签：iphone, addressbook

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef nameArray = ABAddressBookCopyArrayOfAllPeople (addressBook);

m_SourceContactsUserArray = [[NSMutableArray alloc] init];
for (int i = 0; i<CFArrayGetCount(nameArray); i++) {
    ABRecordRef person = CFArrayGetValueAtIndex(nameArray, i);
    NSString *personName = (NSString*)ABRecordCopyValue(person,kABPersonFirstNameProperty);
    [m_SourceContactsUserArray addObject:personName];
}
CFRelease(addressBook);
CFRelease(nameArray); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-01T10:33:59.413

试试这个代码：

```
ABAddressBookRef myAddressBook = ABAddressBookCreate();
NSArray *allPeople = (NSArray *)ABAddressBookCopyArrayOfAllPeople(myAddressBook);

for (id record in allPeople) {
    NSMutableDictionary *newRecord = [[NSMutableDictionary alloc] init];
    CFTypeRef bDayProperty = ABRecordCopyValue((ABRecordRef)record, kABPersonBirthdayProperty);

    if (ABRecordCopyValue((ABRecordRef)record, kABPersonBirthdayProperty)) 
           {
        NSDate *date=(NSDate*)bDayProperty;
        [newRecord setObject:date forKey:@"birthDate"];
        date=nil;
        [date release]; 
    }
   CFRelease(myAddressBook);
 } 
```

它会帮助你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T12:40:40.497

使用以下方法获取`CFDateRef`此人的生日：

```
CFDateRef date = ABRecordCopyValue(person, kABPersonBirthdayProperty); 
```

# css - 无法在 Chrome 中调整 Facebook 评论和其他一些文本的大小

> ID：10190990
> 
> 赞同：2
> 
> 时间：2012-04-17T12:11:30.950
> 
> 标签：css, facebook, google-chrome, text, resize

在此先感谢您的帮助！我注意到，当我使用 Chrome 浏览时，某些文本不会调整大小，包括嵌入式 Facebook 评论、Mailchimp 应用程序以及我遇到的其他文本。例如，查看[Inc.com 的此页面](http://www.inc.com/geoffrey-james/linkedin-vs-facebook-which-will-survive.html)并滚动到 Facebook 评论应该加载的底部。作为用户，除了在 Windows 中调整默认文本的大小之外，我能做些什么来使这些评论正常显示吗？

谢谢！

# ruby-on-rails - 如何在模型中调用 ApplicationController 中定义的方法

> ID：10190995
> 
> 赞同：13
> 
> 时间：2012-04-17T12:11:50.113
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我在 ApplicationController 中定义了方法

```
class ApplicationController < ActionController::Base
   helper_method :get_active_gateway
   def get_active_gateway(cart)
     cart.account.gateways
   end
end 
```

当我在模型中调用此方法时

```
class Order < ActiveRecord::Base
   def transfer
     active= get_active_gateway(self.cart)
   end
end 
```

它抛出错误`undefined local variable get_active_gateway`。

所以我写了

```
class Order < ActiveRecord::Base
   def transfer
    active= ApplicationContoller.helpers.get_active_gateway(self.cart)
   end
end 
```

然后它被扔了`error undefined method nil for Nilclass`。

我在 Rails 3.2.0 中工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T12:14:00.530

你为什么需要这样的东西？模型不应该知道它的控制器。在这种情况下，也许重新设计您的系统会更合适。

这是一个类似[线程](https://stackoverflow.com/a/2420015/1108032)的链接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T12:14:35.507

作为一种设计选择，不建议从您的模型中调用控制器助手。

您可以简单地将所需的详细信息作为参数传递给您的模型方法。

```
def 传输（active_gateway）
  活动 = 活动网关
结尾

```

# javascript - 更改 iframe 源中加载的锚属性内容

> ID：10190997
> 
> 赞同：0
> 
> 时间：2012-04-17T12:11:53.113
> 
> 标签：javascript, iframe

我有一个弹出 iframe 内容，iframe 的源（src）是从另一台服务器生成的 html 响应。内容包括链接和文本。锚标记没有任何目标属性，因此当我们单击链接时，它会在同一个 iframe 中打开。我需要将 target="_parent" 添加到锚点，使用 javascript.so 它可以加载到父页面中。

有什么方法可以使用 javascript 更改锚属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:13:16.170

出于安全原因，完全不可能与来自另一个域的内容进行交互（除非它合作）。

您需要修改其他代码。

# c++ - MFC 对话框在失去焦点时冻结

> ID：10190998
> 
> 赞同：1
> 
> 时间：2012-04-17T12:12:01.910
> 
> 标签：c++, windows, multithreading, mfc

我是 MFC 的新手，所以请多多包涵。我有一个在双屏显示器上全屏显示的对话框。此对话框在另一个非模态对话框中实例化（单击按钮时）。就像是：

```
void MyCParentDlg::OnBnClickedButton1()
{
        dlg2 = new MyChildNonModalDlg();
        dlg2->ShowWindow(SW_SHOW);
} 
```

在`OnInitDialog()`of 中`MyChildNonModalDlg`，`ShowWindow(SW_MAXIMIZE)`被调用以使其成为无边框全屏对话框。现在，里面有一个按钮回调事件`MyChildNonModalDlg`：

```
void MyChildNonModalDlg::onBnClickedBut2() {
    // Display images on the dialog one by one for a very long time 
} 
```

在`onBnClickedBut2`运行并且对话框不断更新时，如果我在对话框外（比如在另一个屏幕上）用鼠标单击，这意味着当对话框**失去焦点**时，它会冻结！

我知道这也许可以通过多线程来解决，其中内部的进程`OnBnClickedBut2()`必须在线程内运行，但是作为对线程知之甚少的人，有人可以为我指出正确的方向或提供可以做的代码示例这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:46:28.817

用于`AfxBeginThread`在内部创建新线程`onBnClickedBut2`。您不应该阻止 UI 事件处理程序。希望你现在明白了。

# jpa - 使用 playframework 1.2.4 将 BLOB 存储在 DB 中

> ID：10190999
> 
> 赞同：0
> 
> 时间：2012-04-17T12:12:02.540
> 
> 标签：jpa, playframework, blob, playframework-1.x

我知道默认情况下，JPA 实现使用 DB 来存储对存储在文件系统中的 BLOB 的引用，到目前为止，我还没有找到任何切换这种行为的方法。- 有可能吗？如果是，如何？

我的特定用例需要将大型文本文件的内容存储在数据库中，以便尽可能快地访问它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:58:19.550

正确的方法是使用`@javax.persistence.Lob`注解。

提出了一个[错误](https://play.lighthouseapp.com/projects/57987/tickets/987)，即文档未涵盖将数据保存到数据库而不是文件系统的用例。该错误的解决方案是将提问者指向以下源代码......

[https://gist.github.com/1275419](https://gist.github.com/1275419)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:50:38.173

我的图像解决方案基于此要点，并且效果很好。

[https://gist.github.com/660937](https://gist.github.com/660937)

如果需要，您还可以存储字节，请查看其他 SO question。

[在 Hibernate 中如何注释 blob 列？](https://stackoverflow.com/questions/939673/how-is-a-blob-column-annotated-in-hibernate)

希望能帮助到你。