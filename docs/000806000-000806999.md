# StackOverflow 问答 000806000-000806999

# html - 如何使用 CSS 为文本或图像赋予透明背景？

> ID：806000
> 
> 赞同：2434
> 
> 时间：2009-04-30T09:00:02.460
> 
> 标签：html, css, opacity

是否可以仅使用 CSS 使`background`元素的 半透明但元素的内容（文本和图像）不透明？

我想在不将文本和背景作为两个独立元素的情况下完成此操作。

尝试时：

```
p {
  position: absolute;
  background-color: green;
  filter: alpha(opacity=60);
  opacity: 0.6;
}

span {
  color: white;
  filter: alpha(opacity=100);
  opacity: 1;
}
```

```
<p>
  <span>Hello world</span>
</p>
```

看起来子元素受其父元素的不透明度影响，因此`opacity:1`相对于`opacity:0.6`父元素。

* * *

## 回答 #1

> 赞同：2355
> 
> 时间：2009-04-30T09:52:43.940

使用半透明的[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics)或[SVG](https://en.wikipedia.org/wiki/Scalable_Vector_Graphics)图像或使用 CSS：

```
background-color: rgba(255, 0, 0, 0.5); 
```

这是一篇来自 css3.info、*[Opacity、RGBA 和折衷](http://www.css3.info/opacity_rgba_and_compromise)*的文章(2007-06-03)。

* * *

```
<p style="background-color: rgba(255, 0, 0, 0.5);">
  <span>Hello, World!</span>
</p>
```

* * *

## 回答 #2

> 赞同：482
> 
> 时间：2009-05-21T04:07:56.310

在 Firefox 3 和 Safari 3 中，您可以像[Georg Schölly 提到](https://stackoverflow.com/questions/806000/css-semi-transparent-background-but-not-text/806189#806189)的那样使用 RGBA 。

一个鲜为人知的技巧是，您可以在 Internet Explorer 中使用它，也可以使用渐变过滤器。

```
background-color: rgba(0, 255, 0, 0.5);
filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr='#7F00FF00', EndColorStr='#7F00FF00'); 
```

第一个十六进制数定义颜色的 alpha 值。

完整解决方案所有浏览器：

```
.alpha60 {
    /* Fallback for web browsers that doesn't support RGBa */
    background: rgb(0, 0, 0) transparent;
    /* RGBa with 0.6 opacity */
    background: rgba(0, 0, 0, 0.6);
    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
    /* For IE 8*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
} 
```

这是来自*[CSS 背景透明度而不影响子元素，通过 RGBa 和过滤器](http://robertnyman.com/2010/01/11/css-background-transparency-without-affecting-child-elements-through-rgba-and-filters/)*。

## 结果截图证明：

这是使用以下代码时：

```
 <head>
     <meta http-equiv="X-UA-Compatible" content="IE=edge" >
    <title>An XHTML 1.0 Strict standard template</title>
     <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <style type="text/css" media="all">
         .transparent-background-with-text-and-images-on-top {
             background: rgb(0, 0, 0) transparent;   /* Fallback for web browsers that doesn't support RGBa */
            background: rgba(0, 0, 0, 0.6);   /* RGBa with 0.6 opacity */
             filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);  /* For IE 5.5 - 7*/
            -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";  /* For IE 8*/
         }
     </style>
 </head>

 <body>
     <div class="transparent-background-with-text-and-images-on-top">
         <p>Here some content (text AND images) "on top of the transparent background"</p>
        <img src="http://i.imgur.com/LnnghmF.gif">
     </div>
 </body>
 </html> 
```

![铬-33](https://i.stack.imgur.com/BgkgK.png) ![IE11](https://i.stack.imgur.com/KsGgH.png) ![IE9](https://i.stack.imgur.com/6Zscy.png) ![IE8](https://i.imgur.com/EyiPD0M.png)

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2010-07-13T20:51:05.177

这是我能想到的最好的解决方案，不使用 CSS 3。据我所知，它在 Firefox、Chrome 和 Internet Explorer 上运行良好。

将一个容器`div`和两个children`div`放在同一层，一个用于内容，一个用于背景。并使用 CSS，自动调整背景大小以适应内容，并使用 z-index 将背景实际放在后面。

```
.container {
  position: relative;
}
.content {
  position: relative;
  color: White;
  z-index: 5;
}
.background {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 100%;
  height: 100%;
  background-color: Black;
  z-index: 1;
  /* These three lines are for transparency in all browsers. */
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  filter: alpha(opacity=50);
  opacity: .5;
}
```

```
<div class="container">
  <div class="content">
    Here is the content.
    <br/>Background should grow to fit.
  </div>
  <div class="background"></div>
</div>
```

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2010-05-24T16:07:51.950

对于简单的半透明背景颜色，上述解决方案（CSS3 或 bg 图像）是最佳选择。但是，如果你想做一些更花哨的事情（例如动画、多背景等），或者你不想依赖 CSS3，你可以尝试“窗格技术”：

```
.pane, .pane > .back, .pane > .cont { display: block; }

.pane {
    position: relative;
}

.pane > .back {
    position: absolute;
    width: 100%; height: 100%;
    top: auto; bottom: auto; left: auto; right: auto;
}

.pane > .cont {
    position: relative;
    z-index: 10;
} 
```

```
<p class="pane">
    <span class="back" style="background-color: green; opacity: 0.6;"></span>
    <span class="cont" style="color: white;">Hello world</span>
</p> 
```

该技术通过在外部窗格元素内部使用两个“层”来工作：

*   一个（“背面”）适合窗格元素的大小而不影响内容的流动，
*   还有一个（“cont”）包含内容并帮助确定窗格的大小。

上`position: relative`窗格很重要；它告诉后层适合窗格的大小。（如果您需要`<p>`标签是绝对的，请将窗格从 a 更改`<p>`为 a`<span>`并将所有内容包装在绝对位置`<p>`标签中。）

与上面列出的类似技术相比，该技术的主要优点是窗格不必是指定的大小。如上所述，它将适合全宽（正常块元素布局）并且仅与内容一样高。外部窗格元素可以任意调整大小，只要它是矩形的即可（即 inline-block 可以使用；plain-old inline 不行）。

此外，它还为您提供了很大的背景自由度；您可以自由地将任何东西放在后面的元素中，并且不会影响内容的流动（如果您想要多个全尺寸子层，只需确保它们也有位置：绝对，宽度/高度：100%，和上/下/左/右：自动）。

允许背景插入调整（通过上/下/左/右）和/或背景固定（通过删除左/右或上/下对之一）的一种变体是使用以下 CSS 代替：

```
.pane > .back {
    position: absolute;
    width: auto; height: auto;
    top: 0px; bottom: 0px; left: 0px; right: 0px;
} 
```

正如所写，这适用于 Firefox、Safari、Chrome、IE8+ 和 Opera，尽管 IE7 和 IE6 需要额外的 CSS 和表达式、IIRC，上次我检查时，第二个 CSS 变体在 Opera 中不起作用。

需要注意的事项：

*   不会包含 cont 层内的浮动元素。您需要确保它们被清除或以其他方式包含，否则它们会从底部滑出。
*   边距在窗格元素上，填充在 cont 元素上。不要使用相反的内容（cont 上的边距或窗格上的 padding），否则您会发现页面总是比浏览器窗口稍宽的奇怪现象。
*   如前所述，整个事情需要是块或内联块。随意使用`<div>`s 而不是`<span>`s 来简化您的 CSS。

* * *

`display: inline-block`一个更完整的演示，通过与, 以及`auto`& 特定`width`的 s/ s一起使用来展示这种技术的灵活性`min-height`：

```
.pane, .pane > .back, .pane > .cont { display: block; }
.pane {
	position: relative;
	width: 175px; min-height: 100px;
	margin: 8px;
}

.pane > .back {
	position: absolute; z-index: 1;
	width: auto; height: auto;
	top: 8px; bottom: 8px; left: 8px; right: 8px;
}

.pane > .cont {
	position: relative; z-index: 10;
}

.debug_red { background: rgba(255, 0, 0, 0.5); border: 1px solid rgba(255, 0, 0, 0.75); }
.debug_green { background: rgba(0, 255, 0, 0.5); border: 1px solid rgba(0, 255, 0, 0.75); }
.debug_blue { background: rgba(0, 0, 255, 0.5); border: 1px solid rgba(0, 0, 255, 0.75); }
```

```
<p class="pane debug_blue" style="float: left;">
	<span class="back debug_green"></span>
	<span class="cont debug_red">
		Pane content.<br/>
		Pane content.
	</span>
</p>
<p class="pane debug_blue" style="float: left;">
	<span class="back debug_green"></span>
	<span class="cont debug_red">
		Pane content.<br/>
		Pane content.<br/>
		Pane content.<br/>
		Pane content.<br/>
		Pane content.<br/>
		Pane content.<br/>
		Pane content.<br/>
		Pane content.<br/>
		Pane content.
	</span>
</p>
<p class="pane debug_blue" style="float: left; display: inline-block; width: auto;">
	<span class="back debug_green"></span>
	<span class="cont debug_red">
		Pane content.<br/>
		Pane content.
	</span>
</p>
<p class="pane debug_blue" style="float: left; display: inline-block; width: auto; min-height: auto;">
	<span class="back debug_green"></span>
	<span class="cont debug_red">
		Pane content.<br/>
		Pane content.
	</span>
</p>
```

这是该技术被广泛使用的[现场演示：](http://christmas-card-2009.slippyd.com/?f=s&n=RXhhbXBsZSBmb3IgdGhlIFN0YWNrIE92ZXJmbG93IENvbW11bml0eQ%3D%3D%0A&sn=T3ZlcmZsb3dpYW5z%0A)

[![圣诞贺卡 2009.slippyd.com 截图](https://i.stack.imgur.com/BoDSo.png)](http://christmas-card-2009.slippyd.com/?f=s&n=RXhhbXBsZSBmb3IgdGhlIFN0YWNrIE92ZXJmbG93IENvbW11bml0eQ%3D%3D%0A&sn=T3ZlcmZsb3dpYW5z%0A)

* * *

## 回答 #5

> 赞同：58
> 
> 时间：2009-04-30T20:42:08.480

**最好使用半透明的`.png`**。

只需打开[Photoshop](http://en.wikipedia.org/wiki/Adobe_Photoshop)，创建一个`2x2`像素图像（[选择`1x1`会导致 Internet Explorer 错误！](https://stackoverflow.com/questions/7764751/ie8-shows-gradient-instead-of-background-image/7765128#7765128)），用绿色填充它并将“图层选项卡”中的不透明度设置为 60%。然后保存并使其成为背景图像：

```
<p style="background: url(green.png);">any text</p> 
```

当然，它很酷，但在可爱的[Internet Explorer 6](http://en.wikipedia.org/wiki/Internet_Explorer_6)中除外。有更好的修复可用，但这里有一个快速破解：

```
p {
    _filter: expression((runtimeStyle.backgroundImage != 'none') ? runtimeStyle.filter = 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src='+currentStyle.backgroundImage.split('\"')[1]+', sizingMethod=scale)' : runtimeStyle.filter,runtimeStyle.backgroundImage = 'none');
} 
```

* * *

## 回答 #6

> 赞同：58
> 
> 时间：2014-10-05T08:15:14.567

有一个技巧可以最小化标记：使用**伪元素**作为背景，你可以设置它的不透明度而不影响主元素及其子元素：

**[演示](http://jsfiddle.net/webtiki/7uw3sa7s/)**

输出：

![带有伪元素的背景不透明度](https://i.stack.imgur.com/8lK67.jpg)

相关代码：

```
p {
  position: relative;
}
p:after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #fff;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  opacity: .6;
  z-index: -1;
}
/*** The following is just for demo styles  ***/

body {
  background: url('http://i.imgur.com/k8BtMvj.jpg') no-repeat;
  background-size: cover;
}
p {
  width: 50%;
  padding: 1em;
  margin: 10% auto;
  font-family: arial, serif;
  color: #000;
}
img {
  display: block;
  max-width: 90%;
  margin: .6em auto;
}
```

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed a ligula ut nunc dignissim molestie.
  <img src="http://i.imgur.com/hPLqUtN.jpg" alt="" />
</p>
```

浏览器支持[Internet Explorer 8](http://en.wikipedia.org/wiki/Internet_Explorer_8)及更高版本。

*   [伪元素](http://caniuse.com/#feat=css-gencontent)
*   [不透明度](http://caniuse.com/#feat=css-opacity)

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2009-04-30T09:11:16.007

最简单的方法是使用半透明背景**PNG 图像**。

如果需要，您可以使用 JavaScript 使其在[Internet Explorer 6](http://en.wikipedia.org/wiki/Internet_Explorer_6)中运行。

*[我使用Internet Explorer 6 中的透明 PNG 中](http://24ways.org/2007/supersleight-transparent-png-in-ie6)*概述的方法。

除此之外，您可以使用*两个并排的兄弟元素*来伪造它- 使**一个 semi-transparent**，然后*将另一个绝对定位在 top 上*。

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2012-01-14T00:14:59.007

此方法允许您在背景中拥有图像而不仅仅是纯色，并且可用于在其他属性（例如边框）上具有透明度。不需要透明的PNG图像。

在 CSS 中使用`:before`(or `:after`) 并赋予它们 opacity 值以使元素保持其原始不透明度。因此，您可以使用 :before 制作一个人造元素并为其提供所需的透明背景（或边框），并将其移动到您想要保持不透明的内容后面`z-index`。

一个例子（[小提琴](http://jsfiddle.net/frozenkoi/6bTEX/)）（注意`DIV`with 类`dad`只是为了提供一些上下文和颜色对比，这个额外的元素实际上是不需要的，红色矩形向下和向右移动了一点，使后面的背景可见`fancyBg`元素）：

```
<div class="dad">
    <div class="fancyBg">
        Test text that should have solid text color lets see if we can manage it without extra elements
    </div>
</div> 
```

使用这个 CSS：

```
.dad {
    background: lime; border: 1px double black; margin: 1ex 2ex;
    padding: 0.5ex; position: relative; -k-z-index: 5;
}
.fancyBg {
    border: 1px dashed black; position: relative; color: white; font-weight: bold;
    z-index: 0; /*background: black;*/
}
.fancyBg:before {content:'-'; display: block;
    position: absolute; background: red; opacity: .5;
    top: 2ex; right: -2ex; bottom: -2ex; left: 2ex;
    /*top: 0; right: 0; bottom: 0; left: 0;*/
    z-index: -1;
} 
```

在这种情况下`.fancyBg:before`，具有您希望具有透明度的 CSS 属性（在此示例中为红色背景，但可以是图像或边框）。它被定位为绝对移动它`.fancyBg`（使用零值或更适合您需要的值）。

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2009-04-30T09:14:40.770

问题是，在您的示例中，文本实际上*完全*不透明。它在`p`标签内完全不透明，但`p`标签只是半透明的。

您可以添加一个半透明的 PNG 背景图像而不是在 CSS 中实现它，或者将文本和 div 分成两个元素并将文本移动到框上（例如，负边距）。

否则就不可能了。

就像 Chris 提到的：如果您使用具有透明度的 PNG 文件，您必须使用 JavaScript 变通方法才能使其在讨厌的 Internet Explorer 中工作......

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2011-01-26T16:36:16.837

几乎所有这些答案都假设设计师想要纯色背景。[如果设计师真的想要一张照片作为背景，那么目前唯一真正的解决方案是 JavaScript，比如其他地方提到](https://stackoverflow.com/questions/806000/css-semi-transparent-background-but-not-text/4015240#4015240)的 jQuery Transify 插件。

我们需要做的是加入 CSS 工作组讨论，让他们给我们一个 background-opacity 属性！它应该与多背景功能齐头并进。

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2009-08-04T22:07:55.580

这是我这样做的方法（它可能不是最佳的，但它有效）：

创建`div`您想要半透明的。给它一个类/ id。将其*留空*，然后将其关闭。给它一个设定的高度和宽度（比如，300 像素 x 300 像素）。给它一个 0.5 或任何你喜欢的不透明度和背景颜色。

然后，在该 div 的*正下方，创建另一个具有不同类/id 的 div。*在其中创建一个段落，您将在其中放置文本。给出`div`位置：相对和顶部：（`-295px`即*负*295 像素）。给它一个 2 的 z-index 以获得良好的度量，并确保它的不透明度为 1。根据需要为你的段落设置样式，但要确保尺寸小于第一个的尺寸，`div`这样它就不会溢出。

而已。这是代码：

```
.trans {
  opacity: 0.5;
  height: 300px;
  width: 300px;
  background-color: orange;
}
.trans2 {
  opacity: 1;
  position: relative;
  top: -295px;
}
.trans2 p {
  width: 295px;
  color: black;
  font-weight: bold;
}
```

```
<body>
  <div class="trans">
  </div>
  <div class="trans2">
    <p>
      text text text
    </p>
  </div>
</body>
```

这适用于 Safari 2.x，但我不了解 Internet Explorer。

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2010-10-25T13:55:41.300

这是一个 jQuery 插件，它将为您处理所有事情，Transify（*[Transify - 一个 jQuery 插件，可以轻松地将透明度/不透明度应用于元素的背景](http://jorenrapini.com/blog/css/transify-a-jquery-plugin-to-easily-apply-transparency-opacity-to-an-elements-background)*）。

我时不时地遇到这个问题，所以我决定写一些能让生活更轻松的东西。该脚本小于 2 KB，只需要一行代码即可运行，如果您愿意，它还可以处理背景不透明度的动画。

* * *

## 回答 #13

> 赞同：11
> 
> 时间：2009-04-30T09:52:06.017

不久前，我在[Cross Browser Background Transparency With CSS](http://www.unintentionallyblank.co.uk/2007/05/07/cross-browser-background-transparency-with-css/)中写到了这个。

奇怪的是 Internet Explorer 6 将允许您使背景透明并保持顶部的文本完全不透明。对于其他浏览器，我建议使用透明的 PNG 文件。

* * *

## 回答 #14

> 赞同：11
> 
> 时间：2014-08-07T02:39:32.783

如果您是[Photoshop](http://en.wikipedia.org/wiki/Adobe_Photoshop)专家，您还可以使用：

```
 #some-element {
  background-color: hsla(170, 50%, 45%, 0.9); // **0.9 is the opacity range from 0 - 1**
 } 
```

### 或者：

```
#some-element {
  background-color: rgba(170, 190, 45, 0.9); // **0.9 is the opacity range from 0 - 1**
} 
```

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2009-04-30T09:13:16.313

*[背景不透明，但不是文字](https://stackoverflow.com/questions/637921/opacity-of-background-not-text)*有一些想法。要么使用半透明图像，要么覆盖附加元素。

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2013-05-20T23:36:50.987

CSS 3 可以轻松解决您的问题。利用：

```
background-color:rgba(0, 255, 0, 0.5); 
```

在这里，`rgba`代表红色、绿色、蓝色和 alpha 值。绿色值是因为 255 而获得的，而半透明度是通过 0.5 alpha 值获得的。

* * *

## 回答 #17

> 赞同：8
> 
> 时间：2016-06-03T12:09:42.040

为了使元素的背景半透明，但元素的内容（文本和图像）不透明，您需要为该图像编写 CSS 代码，并且必须添加一个名为`opacity`最小值的属性。

例如，

```
.image {
   position: relative;
   background-color: cyan;
   opacity: 0.7;
} 
```

// 值越小越透明，或者值越小越透明。

* * *

## 回答 #18

> 赞同：7
> 
> 时间：2013-01-08T20:00:39.570

**背景颜色：rgba(255, 0, 0, 0.5);** 如上所述，简单地说就是最好的答案。说使用 CSS 3，即使在 2013 年，也并不简单，因为各种浏览器的支持水平随着每次迭代而变化。

虽然`background-color`所有主要浏览器都支持（不是 CSS 3 的新功能）[1]，但 alpha 透明度可能会很棘手，尤其是对于 9 版之前的 Internet Explorer 和 5.1 版之前的 Safari 上的边框颜色。[2]

使用[Compass](http://compass-style.org)或[SASS 之](http://sass-lang.com)类的东西可以真正帮助生产和跨平台兼容性。

* * *

[1] [W3Schools：CSS background-color 属性](http://www.w3schools.com/cssref/pr_background-color.asp)

[2] [Norman 的博客：浏览器支持清单 CSS3（2012 年 10 月）](http://www.normansblog.de/demos/browser-support-checklist-css3/)

* * *

## 回答 #19

> 赞同：7
> 
> 时间：2015-06-03T07:28:45.563

如果您使用的是[Less](https://en.wikipedia.org/wiki/Less_%28stylesheet_language%29)，则可以使用`fade(color, 30%)`.

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2014-09-14T19:21:50.677

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2013-12-06T14:40:49.627

您可以通过（ab）使用渐变语法为[Internet Explorer 8](http://en.wikipedia.org/wiki/Internet_Explorer_8)解决此问题。颜色格式为 ARGB。如果您使用的是[Sass](http://en.wikipedia.org/wiki/Sass_%28stylesheet_language%29)预处理器，您可以使用内置函数“ie-hex-str()”转换颜色。

```
background: rgba(0,0,0, 0.5);
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000', endColorstr='#80000000')"; 
```

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2014-11-18T10:47:44.457

```
<div align="center" style="width:100%;height:100%;background:white;opacity:0.5;position:absolute;z-index:1001">
    <img id="search_img" style="margin-top:20%;" src="../resources/images/loading_small.gif">
</div> 
```

[http://jsfiddle.net/x2ukko7u/](http://jsfiddle.net/x2ukko7u/)？

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2018-05-22T06:10:43.460

你可以`rgba color code`像下面给出的这个例子一样使用 CSS 来做到这一点。

```
.imgbox img{
  height: 100px;
  width: 200px;
  position: relative;
}
.overlay{
  background: rgba(74, 19, 61, 0.4);
  color: #FFF;
  text-shadow: 0px 2px 5px #000079;
  height: 100px;
  width: 300px;
  position: absolute;
  top: 10%;
  left: 25%;
  padding: 25px;
}
```

```
<div class"imgbox">
<img src="http://www.bhmpics.com/wallpapers/little_pony_art-800x480.jpg">
  <div class="overlay">
    <p>This is Simple Text.</p>
  </div>
</div>
```

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2018-12-12T07:29:47.363

根据我的观点，使用具有不透明度的背景颜色的最佳方法如下。如果我们使用它，那么我们不会失去其他元素的不透明度，比如测试颜色、边框等。

```
background-color: rgba(71, 158, 0, 0.8); 
```

**使用具有不透明度的背景颜色**

```
background-color: rgba(R, G, B, Opacity); 
```

[![在此处输入图像描述](https://i.stack.imgur.com/kjq1s.png)](https://i.stack.imgur.com/kjq1s.png)

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2017-10-20T02:41:59.840

您可以在**CSS中使用****RGBA** 。像这样的东西：`(red, green, blue, alpha)`

 **所以简单地做这样的事情就可以在你的情况下工作：

```
p {
  position: absolute;
  background-color: rgba(0, 255, 0, 0.6);
}

span {
  color: white;
} 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2014-12-29T16:25:56.813

有一个更简单的解决方案可以在同一个 div 上的图像上叠加。这不是正确使用此工具。但是使用 CSS 进行叠加就像一个魅力。

使用这样的嵌入阴影：

```
box-shadow: inset 0 0 0 1000px rgba(255, 255, 255, 0.9); 
```

就这样 ：）

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-04-21T13:44:21.277

您可以使用附加到十六进制值的不透明度值：

```
background-color: #11ffeeaa; 
```

**在这个例子`aa`中是不透明度。不透明`00`意味着透明，`ff`意味着纯色。**

不透明度是可选的，因此您可以像往常一样使用十六进制值：

```
background-color: #11ffee; 
```

您还可以使用旧方式`rgba()`：

```
background-color: rgba(117, 190, 218, 0.5); 
```

`background`如果您想确保背景没有其他样式（例如图像或渐变），则简写：

```
background: #11ffeeaa; 
```

来自 Mozilla 的规范（[https://developer.mozilla.org/en-US/docs/Web/CSS/background-color](https://developer.mozilla.org/en-US/docs/Web/CSS/background-color)）：

```
/* Keyword values */
background-color: red;
background-color: indigo;

/* Hexadecimal value */
background-color: #bbff00;    /* Fully opaque */
background-color: #bf0;       /* Fully opaque shorthand */
background-color: #11ffee00;  /* Fully transparent */
background-color: #1fe0;      /* Fully transparent shorthand  */
background-color: #11ffeeff;  /* Fully opaque */
background-color: #1fef;      /* Fully opaque shorthand  */

/* RGB value */
background-color: rgb(255, 255, 128);        /* Fully opaque */
background-color: rgba(117, 190, 218, 0.5);  /* 50% transparent */

/* HSL value */
background-color: hsl(50, 33%, 25%);         /* Fully opaque */
background-color: hsla(50, 33%, 25%, 0.75);  /* 75% transparent */

/* Special keyword values */
background-color: currentcolor;
background-color: transparent;

/* Global values */
background-color: inherit;
background-color: initial;
background-color: unset; 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-02-11T08:00:03.723

我通常在我的工作中使用这个类。这个很不错。

```
.transparent {
  filter: alpha(opacity=50); /* Internet Explorer */
  -khtml-opacity: 0.5;       /* KHTML and old Safari */
  -moz-opacity: 0.5;         /* Firefox and Netscape */
  opacity: 0.5;              /* Firefox, Safari, and Opera */
}
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-10-27T21:03:47.370

我同意上述所有答案，并且 rgba 是要走的路。就我而言，我以编程方式获得了十六进制背景，因此我必须根据十六进制代码生成自己的 rgba。我创建了唐先生[答案](https://stackoverflow.com/a/5624139/227353)的修改版本，将十六进制转换为 rgba

```
function hexToRgba(hex,alpha) {
    // Expand shorthand form (e.g. "03F") to full form (e.g. "0033FF")
    var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
    hex = hex.replace(shorthandRegex, function(m, r, g, b) {
      return r + r + g + g + b + b;
    });

    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    if(result!=null){
      const r = parseInt(result[1], 16);
      const g = parseInt(result[2], 16);
      const b = parseInt(result[3], 16);
      //
      return `rgba(${r},${g},${b},${alpha})`;

    }
    return null;
  } 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-03-12T08:01:18.903

使用格式时它对我有用，`#AARRGGBB`所以对我有用的是`#1C00ff00`. 试一试，因为我已经看到它对某些人有效，而对其他人无效。我在 CSS 中使用它。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-11-29T07:16:44.560

我认为这会给你想要的输出：

```
div {
  width: 200px;
  height: 200px;
  display: block;
  position: relative;
}

div::after {
  content: "";
  background: url(image.jpg);
  opacity: 0.5;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  position: absolute;
  z-index: -1;   
} 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-07-03T10:55:46.283

由于很多人会来到这里想知道如何**调整*任何*元素**（不仅仅是背景）的不透明度，它就像添加`opacity: 0.2`（或您想要的任何介于 0 和 1 之间的数字）到该元素的 CSS 一样简单。

### 例子

```
.myclass {
  color: #eb4746;
  opacity: 0.2;
} 
```

这可以用于背景***和***标题、段落等。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2020-08-22T17:41:55.313

这给出了预期的结果 -

```
body {
    background-image: url("\images\dark-cloud.jpg");
    background-size: 100% 100%;
    background-attachment: fixed;
    opacity: .8;
} 
```

设置背景的不透明度。

# javascript - Coda：页面重新加载时自动清除 JavaScript 控制台？

> ID：806006
> 
> 赞同：3
> 
> 时间：2009-04-30T09:00:44.440
> 
> 标签：javascript, logging, console, coda

Coda 中是否有任何设置或可破解的解决方案，以使 JavaScript 控制台日志在页面重新加载后自动清除？

当我在日志中看到旧错误时，我经常会绊倒，这些错误仍然不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-09-08T21:11:53.797

利用：

```
console.clear(); 
```

如果你想删除所有以前的日志并显示新的 - 把它放在你的 JavaScript 文件的顶部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-02-22T18:16:47.990

如果你使用 jQuery 试试

```
$(function(){ console.clear(); }); 
```

或者试试

```
window.onload = function(){ setTimeout("console.clear()",3000) } 
```

# wcf - 使用 WCF 连接到使用用户名/密码进行身份验证的 WebService

> ID：806007
> 
> 赞同：19
> 
> 时间：2009-04-30T09:00:46.170
> 
> 标签：wcf, wcf-security, wcf-authentication

我使用 Visual Studio 2008 创建了一个 Web 服务代理，它在 app.config 中为我创建了以下条目：

```
<system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="MyNameHandlerSoapBinding" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
          <endpoint address="http://www.***/***/***"
              binding="basicHttpBinding" bindingConfiguration="MyNameHandlerSoapBinding"
              contract="***.MyNameHandler" name="MyName">
          </endpoint>
        </client>
    </system.serviceModel> 
```

该网络服务具有用户名/密码身份验证，因此我需要在此处添加它。

我有点迷失在 WCF 文档的海洋中，我想我必须从 basicHttpBinding 更改为 wsHttpBinding 或 customBinding 才能添加身份验证元素，但我不太了解。任何人都可以提供任何快速提示或任何有用的链接来说明如何这样做吗？

**编辑：**

我将安全部分更改为：

```
<security mode="Transport">
    <transport clientCredentialType="Basic" proxyCredentialType="None"
         realm="" />
</security> 
```

并在代码中添加：

```
ws.ClientCredentials.UserName.UserName = "";
ws.ClientCredentials.UserName.Password = ""; 
```

现在看来它可能正在使用凭据，但它给了我错误：

*提供的 URI 方案“http”是无效的 URI 应为“https”*

我什至不知道这是否是正确的方法......

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-04-30T16:28:12.930

我在这里为未来的读者发布解决方案：

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="MyHandlerSoapBinding" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Basic"  />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://www.***/***/***/MyHandler"
          binding="basicHttpBinding" bindingConfiguration="MyHandlerSoapBinding"
          contract="***.MyHandler" name="MyHandler">
      </endpoint>

    </client>
  </system.serviceModel> 
```

最后我可以使用默认的basicHttpBinding。与问题中发布的代码的唯一区别是**安全节点**。

另请注意*mode="TransportCredentialOnly"*选项，这允许您使用`http`而不是发送用户名/密码`https`。这对于我正在使用的测试环境是必要的。稍后显然您会更喜欢`https`发送您的凭据。

然后在代码中输入您的用户名/密码：

```
var ws = new ***.MyHandlerClient("MyHandler");
ws.ClientCredentials.UserName.UserName = "myUsername";
ws.ClientCredentials.UserName.Password = "myPassword";
var result = ws.executeMyMethod(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-30T10:30:56.767

错误信息是正确的。WCF 将不允许通过不受保护的协议传输用户名和密码。您的网络服务**必须**使用 HTTPS（附带 SSL 证书）

拥有 SSL 证书后，您有两个关于如何发送凭据的选项、传输或安全选项以及用于凭据类型的多个选项。MSDN对所有各种选项都有[很好的指南。](http://msdn.microsoft.com/en-us/library/ms731925.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T09:04:38.753

I had the same problem and tried the solution above Somehow this didn't work for me I was keep getting the message "No WS-Security header found"

After a long time of testing and trying I manage to get it work I added the header code in the client as below and then it works!

```
<client>
    <endpoint address="http://your.service.com" binding="basicHttpBinding" bindingConfiguration="XXXBinding" contract="contract.XXX" name="XXXPort">
        <headers xmlns:wsse="http://your.xsd">
            <wsse:Security mustUnderstand="1">
                <wsse:UsernameToken>
                    <tenant>XXX</tenant>
                    <wsse:Username>XXX</wsse:Username>
                    <wsse:Password Type="http://www.xxxx.com/wss#PasswordText">XXX</wsse:Password>
                </wsse:UsernameToken>
            </wsse:Security>
        </headers>
    </endpoint>
</client> 
```

# php - 存储 PHP 类属性的最佳方式是什么？

> ID：806013
> 
> 赞同：5
> 
> 时间：2009-04-30T09:02:33.513
> 
> 标签：php, design-patterns, oop, class

> **重复：** [在 PHP 中存储类变量的最佳方法是什么？](https://stackoverflow.com/questions/546403/whats-the-best-way-to-store-class-variables-in-php)

一段时间以来，我一直在与一位同事讨论应该如何在 PHP 类中存储属性。

那么你认为应该使用哪一个。像这样的东西：

```
Class test{
    public $attr1;
    public $attr2;
    .............. 
    public function __construct(){
        $this->attr1 = val;  
        $this->attr1 = val;
        ...................   
    }
} 
```

相对：

```
Class test{
    public $data;

    public function __construct(){
        $this->data['attr1'] = val;
        $this->data['attr2'] = val;
        ..........................       
    }
} 
```

当您拥有具有许多必须经常在其中存储和检索的属性的对象时，这一点很重要。

在处理具有许多属性的对象时也很重要，您是对每个属性使用 getter 和 setter，还是使用一种方法来设置所有属性和一种方法来获取所有属性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-30T09:36:41.297

版本 1 是更“经典”的做事方式。您的对象几乎与您所说的完全一样。

我不能说哪个严格“更好”，但我可以说哪个更方便。

我使用了第二个版本（通常用于 CodeIgniter 中的数据库模型，特别是在早期开发期间）与自定义 PHP5 getter 和 setter 方法结合使用，以允许您动态重载类。IE

```
<?php
    class foo{
        private $data = array();

        function __construct()
        {
            # code...
        }

        public function __get($member) {
            if (isset($this->data[$member])) {
                return $this->data[$member];
            }
        }

        public function __set($member, $value) {
            // The ID of the dataset is read-only
            if ($member == "id") {
                return;
            }
            if (isset($this->data[$member])) {
                $this->data[$member] = $value;
            }
        }
    }

    $bar = new foo()
    $bar->propertyDoesntExist = "this is a test";
    echo $bar->propertyDoesntExist; //outputs "this is a test"
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-30T09:27:16.233

**当且仅当**数据作为一个整体来自外部源（例如 BD 查询）时，我才会使用第二个版本。在这种情况下，当然建议使用通用[`__get()`/`__set()`](http://www.php.net/manual/en/class.iteratoraggregate.php)来访问`$this->data`. 您也可以考虑实现[IteratorAggregate 接口](http://www.php.net/manual/en/class.iteratoraggregate.php)返回`new ArrayIterator($this->data)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T12:31:22.797

第一种方法非常标准。它清楚地定义了属性是什么，并允许 IDE 和代码文档工具获取可用的对象属性。

第二种方法非常适合需要将数据保存在单独范围内的受保护和私有级别属性。我在各种模型类中结合使用这两种方法，或者跟踪配置选项和默认值。但是，我总是会预先填充这些数组，并确保严格遵守其中的数据。

我永远不会提倡对公共属性使用第二种方法，因为它表明缺乏对对象属性和变量范围的理解，并且可能会在代码中引入问题（如果有人用字符串覆盖该根数组怎么办？）

getter 和 setter 的使用使得调用代码需要更改的属性。并非每个属性都应该是可访问的，因此由定义对象的开发人员决定。显然，getter/setter 模式对公共属性没有意义，但它适用于可能需要一些验证或清理的受保护和私有属性。它们在依赖注入的上下文中也很有意义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T09:28:20.037

除非任何一个版本都有真正令人信服的论据（取决于上下文），否则我总是选择让我的 ide/工具提供关于类型、类、关系等的更好信息的格式……直到现在，这是第一种格式。
还有其他方法可以“类数组”访问数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-11-18T16:02:15.933

最好的方法肯定是标准的方法，但第二种方法肯定更舒服....

我使用第一个，我在类中使用这个函数来动态地工作：

```
 public function GET__Attributes_in_Array(){
     $Prova = get_class_vars(get_class($this));
     print_r($Prova);

     return $Prova;
} 
```

此函数返回一个包含类的所有属性和值的数组...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-30T14:15:28.130

使用版本 1 的原因是版本 2 发生在对象内。您的对象已经是 varnames 到值的映射。通过添加您自己的数组映射，您添加了不必要的间接级别。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-30T09:32:02.133

我个人使用版本 1，因为我认为它更正确，支持 IDE 中的自动完成并使调试更容易。

我还对我的几乎所有成员变量（我在大多数情况下定义私有/受保护）使用 getter 和 setter，因为设置一个值会经常触发其他值的更改。创建 g&s 的一个缺点是随着时间的推移会积累大量丑陋、愚蠢的代码，如果你定义了 getter/setter，即使是那些不会在其他地方触发更改的属性。我仍然这样做是为了保持一致的界面——我永远不知道我何时引入了额外的功能或错误修复，这些功能或错误修复会引入更多的现场更改。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-30T09:59:10.460

我也更喜欢版本 1。如果您不需要动态成员（Chris 提供的版本），您应该定义您的成员。在大多数情况下，动态方式会导致可怕的结构，使您的代码难以理解。想象一下，有人可能需要调试您的代码并且不知道您的代码^^。我们有一个更大的项目，它使用动态成员来镜像 db 表中的字段。在不知道桌子的情况下很难使用。

除此之外，您的 IDE 不适用于 dyn。成员，您不能对这些成员使用 PHPDoc，并且 PHPUnit 不能对这些属性使用反射。那只是糟糕的编码风格。

问候，马里奥

# asp.net - 如何处理 ASP.NET 中的临时文件？

> ID：806014
> 
> 赞同：5
> 
> 时间：2009-04-30T09:02:45.793
> 
> 标签：asp.net, temporary-files

请注意，我不是在谈论编译器生成的“临时 ASP.NET 文件”。

我的 Web 应用程序 (ASP.NET MVC) 使用 Graphviz 生成图像，然后将这些图像提供给客户端。这需要创建临时文件。

处理这些问题的最佳方法是什么？有没有办法在发送后立即删除它们？我应该使用后台线程吗？Application_Start 或 Application_End 中的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T09:14:52.097

Graphviz 创建客户端，并将它们作为链接添加到页面中。所以你不能直接删除它们。

有几种方法：

*   在应用程序启动时，任何人都不应使用这些图像之一。所以你可以删除它
*   您将图像的引用（例如路径）添加到缓存中，并添加一个 CacheItemRemovedCallback，这将删除您的图像。（很好地限制了 HD 上的图像数量
*   做一个计时器，定期删除项目

请注意，您不应删除一秒钟前创建的图像。因为它们可以使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-30T09:17:58.127

你不能通过控制器或使用 ASHX ( [http://www.marklio.com/marklio/CommentView,guid,df8d6471-83fd-4f66-a799-ef8274979f0e.aspx](http://www.marklio.com/marklio/CommentView,guid,df8d6471-83fd-4f66-a799-ef8274979f0e.aspx) ) 流出内容并删除写完流后的临时文件？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-05-13T17:33:08.757

使用[其他用户描述的方法，](https://stackoverflow.com/a/1050321/1065525)但要求浏览器再次使用其缓存，方法是在响应中设置 Last-Modifed 标头，然后在图像处理程序中设置 If-Modified-Since 标头，处理程序应回复使用 StatusCode 304“未修改”，只要客户端浏览器未清除其缓存，图像仍会显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-26T17:29:40.747

我喜欢处理由生成它们的同一操作中的操作创建的临时文件。例如：（在 MVC 中，但这可以适用于任何框架）

```
public ActionResult Foo()
{
    FooCleanup(); // deletes files in "~/temp/Foo/" older than a day or so

    string filename = CreateTemporaryFile(); // Creates a temporary file like "~/temp/Foo/{timestamp}.foo"
    return File(filename);
} 
```

如果 Foo() 被多次调用，您可以添加一些逻辑以仅每隔一段时间调用一次清理。这有点像穷人的 cron 工作，但效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T09:12:20.120

我们将 application_start 与计时器一起使用，每隔 24 小时运行一次，并每天清理/删除临时文件夹。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-26T17:39:19.550

您可以创建一个处理程序 (.ashx) 并通过它流式传输临时文件。这样你就会知道文件已经传输到客户端，你可以在处理程序的末尾删除临时文件。

一个可能的问题是客户端将无法下载该文件两次，因为您要立即删除它。（然后可以使用页面输出缓存来缓解......）

尽管**最好的办法是，如果您可以完全避免临时文件问题**，并通过在处理程序中生成文件来根据请求流式传输文件...

# sql - sql 查询连接多个表 - 太慢（8 个表）

> ID：806015
> 
> 赞同：37
> 
> 时间：2009-04-30T09:02:49.397
> 
> 标签：sql, performance, join

我正在尝试将 8 个表合并为一个以创建其他应用程序使用的索引，我的查询是这样的：（我的 mysql 技能非常业余）

```
SELECT t1_id, t2_name, t3_name, t4_name, t5_name, 
       t6_name, t7_name, t8_name, t9_name 
FROM t1 
  LEFT JOIN t2 ON (t1_id = t2_id) 
  LEFT JOIN t3 ON (t3_id = t1_id) 
  LEFT JOIN t4 ON (t4_id = t1_id)
  LEFT JOIN t5 ON (t5_id = t1_id)
  LEFT JOIN t6 ON (t6_id = t1_id) 
  LEFT JOIN t7 ON (t7_id = t1_id)
  LEFT JOIN t8 ON (t8_id = t1_id)
  LEFT JOIN t9 ON (t9_id = t1_id) 
```

执行时我什至看不到查询结果，有什么方法可以加快速度吗？:) 任何形式的帮助都值得赞赏，但最好只有一个查询（在应用程序规则之外）

提前致谢

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-06-16T16:32:20.213

我有一个类似的问题，几个查找表连接到一个所有 id 字段都被索引的大表。为了监控联接对查询时间执行的影响，我多次运行查询（限制为前 100 行），每次都将联接添加到附加表中。加入 12 个表后，查询执行时间没有明显变化。当我加入第 13 个表时，执行时间跃升至 1 秒；第 14 台 4 秒，第 15 台 20 秒，第 16 台 90 秒。

Keijro 建议使用相关子查询而不是连接，例如

```
SELECT t1_id, 
        (select t2_name from t2 where t1_id = t2_id), 
        (select t3_name from t3 where t1_id = t3_id), 
        (select t4_name from t4 where t1_id = t4_id), 
        (select t5_name from t5 where t1_id = t5_id), 
        (select t6_name from t6 where t1_id = t6_id), 
        (select t7_name from t7 where t1_id = t7_id), 
        (select t8_name from t8 where t1_id = t8_id), 
        (select t9_name from t9 where t1_id = t9_id)  FROM t1 
```

极大地提高了查询性能。事实上，子查询似乎并没有延长执行查询的时间（查询几乎是即时的）。

I am a little suprised as I thought correlated subqueries perform worse than joins.

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-04-30T09:14:47.247

根据表中的数据量，您可能需要在要连接的列上放置索引。查询速度慢通常归结为在正确的位置缺少索引。

还：

LEFT JOINs 比 INNER JOINs 慢（尽管这取决于你在做什么）——你能用内部连接完成你正在寻找的东西吗？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-30T09:13:02.227

如果您可以发布查询的解释计划，这将有所帮助。

但是，首先，您对连接中使用的所有字段都有索引？就像是`CREATE INDEX ix_t2_id on t2 (t2_id, t2_name);`

而不是连接，你可以做类似的事情

```
SELECT t1_id, 
    (select t2_name from t2 where t1_id = t2_id), 
    (select t3_name from t3 where t1_id = t3_id), 
    (select t4_name from t4 where t1_id = t4_id), 
    (select t5_name from t5 where t1_id = t5_id), 
    (select t6_name from t6 where t1_id = t6_id), 
    (select t7_name from t7 where t1_id = t7_id), 
    (select t8_name from t8 where t1_id = t8_id), 
    (select t9_name from t9 where t1_id = t9_id) 
FROM t1 
```

但是，对于一个好的查询规划器，这应该与连接没有什么不同。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-30T09:31:00.873

我们在谈论多少数据？可能是您有大量数据，并且由于 where 子句在查询过程结束时运行，您在过滤之前加入了大量数据。

在这种情况下，最好尽快过滤数据，因此如果您可以在第一个内部选择中限制来自 T1 的数据，则所有其他连接将连接到更有限的数据集。

```
Select <your fields> from
(
Select * from t1 where t1_id = t1_value
) t1

Inner join t2
on t1.ID = t2.ID
... 
```

如果不是大量数据；检查您的索引是否正确，然后检查服务器类型；索引碎片；磁盘队列等

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T09:41:36.197

如果你需要t1的所有行，并且在其他表的主键（我猜也是聚集索引）上留下join，就没有办法提高查询速度。

为了提高性能，您要么需要减少结果集，要么执行一个讨厌的技巧（例如，制作数据的非规范化副本）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-03T21:47:59.233

从您的查询计划中，我可以得出结论，这些表称为`s`，`n`并且`q`在它们正在连接的字段上没有索引。

由于这些表中有很多行（关于`400,000`他们的笛卡尔积中的行）并且`MySQL`唯一`JOIN`的方法是使用`NESTED LOOPS`，这真的需要很长时间。

在这些表上创建索引或将连接字段定义为`PRIMARY KEY`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-30T09:18:16.690

正如我所看到的，t1 表是与所有表连接的表，而不是将它们放在具有如此多连接的单个查询中，您可以尝试类似这样的不同查询的联合。

```
SELECT  t1_id, t2_name 
FROM    t1 LEFT JOIN t2 ON (t1_id = t2_id)
union 
SELECT  t1_id, t3_name 
FROM    t1 LEFT JOIN t3 ON (t1_id = t3_id) 
```

但是，在这种情况下，您将获得的结果将不是 8 列，而是只有 1 列。不确定这是否是您可用的选项。

在您实施的任何解决方案中，您必须做的另一件事是 - 在所有表上创建适当的索引。索引列的最佳实践是在最常用于连接或 where 子句的列上创建它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-23T14:39:18.037

当您使用的数据集太大以至于在执行连接时超出了工作内存时，连接可能会显着减慢。然后，Postgres 将在运行过程中将其工作保存到磁盘。这就是为什么无论您要加入哪些表，或者您是否正确配置了索引，您可能只会在第 n 次加入后看到速度变慢。

就我而言，`EXPLAIN`只显示了几万行，没什么可写的。但我了解到，即使在加入期间发生减速，加入也可能不是问题。在我的例子中，罪魁祸首原来是一个非常大的 uuid[] 列，其中包含很多条目。我从我的查询中排除了那一列，它加快了一切。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-06-16T16:57:40.363

根据您的 SQL Server 版本，简单地将查询放入存储过程可能会产生很大的不同。先尝试其他优化后再试试这个。（是的，我知道有缓存的执行计划和其他内部服务器优化，但根据我的实际经验，存储过程可以更快地执行。）

# windows-vista - 为什么我会收到来自程序兼容性助手的消息？

> ID：806017
> 
> 赞同：1
> 
> 时间：2009-04-30T09:03:03.497
> 
> 标签：windows-vista, installation, launch4j

我自己的程序的设置在完成“程序兼容性助手”的一条消息后产生，该程序没有正确安装，但一切都正确。

卸载程序也有同样的问题。在 Vista 下会出现这些问题。我使用launch4j。

为什么会出现这个消息？如何消除我的客户看不到的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-07-25T15:58:33.233

如果您不更改注册表和/或目录“程序文件”中的任何内容，则会出现问题。要解决此问题，您需要对系统进行一些更改。或者您将清单添加到您的 setup.exe 中，如[Program Compatibility Assistant think my app is an installer](https://stackoverflow.com/questions/1577412/program-compatibility-assistant-thinks-my-app-is-an-installer/2160444#2160444)中所述。另请参阅[如何以编程方式防止 Vista（和 Windows 7）中的“程序兼容性助手”出现？](https://stackoverflow.com/questions/1587962/how-do-i-prevent-programmatically-the-program-compatibility-assistant-in-vista)

# c# - C# == 操作符具体做了什么？

> ID：806020
> 
> 赞同：15
> 
> 时间：2009-04-30T09:03:44.743
> 
> 标签：c#, java, operators, equals-operator

在 c# 中，当您在两个对象上与“==”运算符进行比较时，在后台究竟会发生什么？它只是比较地址吗？还是类似于 Equals() 或 CompareTo() ？

PS：java中的“==”操作符呢？它的行为是否相同？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-30T09:06:15.457

我所知道的：

*   它按值（相等）比较值类型
*   它按引用（身份）比较引用类型
*   除非 == 运算符重载，否则它会调用该运算符。

Equals 在对象中实现，也可以被覆盖。Object 中的默认实现对引用类型执行引用比较。所以默认情况下，Equals 和 == 做同样的事情。

我认为在 java 中你不能重载 == 操作符。但是我的 Java 知识已经过时了。

**编辑：** 请注意，`==`运算符是静态方法。它在编译时绑定，基于变量或字段的类型。`Equals`是基于实际运行时类型在运行时找到的虚拟方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-30T09:18:28.563

作为[Stefan 出色答案](https://stackoverflow.com/questions/806020/c-what-does-the-operator-do-in-detail/806027#806027)的扩展- 另一个例外是操作数是否涉及`Nullable<T>`- 在这种情况下，“提升”运算符适用（ECMA 334v4 中的 14.2.7）：

> 对于等式运算符 == !=
> 
> 如果操作数类型都是不可为空的值类型并且结果类型是 bool，则存在运算符的提升形式。提升的形式是通过添加单个 ? 每个操作数类型的修饰符。提升的运算符认为两个空值相等，一个空值不等于任何非空值。如果两个操作数都不为空，则提升的运算符解开操作数并应用底层运算符来生成 bool 结果。

这意味着：因为（比如说）之间有一个相等运算符：

```
int i = ..., j = ...;
bool eq = i == j; 
```

因此有一个形式的隐式运算符（虽然做的不同）：

```
int? i = ..., j = ...;
bool eq;
if(i.HasValue) {
    if(j.HasValue) { // both have values; compare
       eq = i.GetValueOrDefault() == j.GetValueOrDefault();
    } else { // one null; always false
       eq = false;
    }
} else { // true if both null, else false
    eq = !j.HasValue;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-30T09:06:56.220

[来自 MSDN](http://msdn.microsoft.com/en-us/library/53k8ybth(VS.80).aspx)：

> 对于预定义的值类型，相等运算符 (==) 如果其操作数的值相等则返回 true，否则返回 false。对于字符串以外的引用类型，== 如果它的两个操作数引用同一个对象，则返回 true。对于字符串类型，== 比较字符串的值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-30T09:07:22.037

不... == 运算符在 java 和 c# 中的行为并不总是相同。

例如字符串；Java == 确实比较了字符串对象的引用...（如果您使用原始类型， == 在 java 中比较值）。这就是为什么

```
// returns FALSE in JAVA
(new String("test") == "test") 
```

在java中不会返回true...

相比之下，在 C# 中， == 运算符在字符串上的行为确实不同。例如，它会在以下情况下返回 true：

```
// returns TRUE in C#
(new String("test".ToCharArray()) == "test") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T09:06:43.113

它的作用取决于上下文。

[http://en.csharp-online.net/ECMA-334:_14.9_Relational_and_type-testing_operators](http://en.csharp-online.net/ECMA-334:_14.9_Relational_and_type-testing_operators)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-17T15:10:55.333

== 运算符的行为取决于您应用它的变量的声明方式（不是对象的类，我将添加一个示例）。

对于值类型，它将比较它们的值。

对于引用类型，如果 a 与 b 是同一个对象，则 a == b 返回 true，除非 == 运算符被重载。没有像其他人所说的那样被覆盖，你不能在 c# 中覆盖运算符，因为它们不是虚拟的。

`object obj_a, obj_b; string str_a, str_b;`

 ````
 str_a = "ABC";
        str_b = new string("ABC".ToCharArray());
        obj_a = str_a;
        obj_b = str_b;

        Console.WriteLine("str_a == str_b = {0}", str_a == str_b); // in string == operator is overloaded
        Console.WriteLine("str_a.Equals(str_b) = {0}", str_a.Equals(str_b)); // string overrides Object.Euqals
        Console.WriteLine("obj_a == obj_b = {0}", obj_a == obj_b); // in object == operator is not overloaded
        Console.WriteLine("obj_a.Equals(obj_b) = {0}", obj_a.Equals(obj_b)); // Object.Equesl is virtual and overridden method from string will be executed.
        Console.ReadKey(); 
````  `该程序的输出是

```
str_a == str_b = 真
str_a.Equals(str_b) = True
obj_a == obj_b = 假
obj_a.Equals(obj_b) = True

```

# php - cakePHP 表单错误

> ID：806025
> 
> 赞同：0
> 
> 时间：2009-04-30T09:05:56.923
> 
> 标签：php, forms, cakephp

我正在创建一个在 cakephp 中创建的注册表单。在我看来使用以下代码时

```
<?php echo $form->create('User', array('url' => array('action' => 'register'))); ?>
<?php echo $form->input('User.name', array('type'=>'text')); ?>
<?php echo $form->end(); ?> 
```

我会收到这样的错误

```
$model = "Form"</pre><pre>sprintf - [internal], line ??
FormHelper::hidden() - CORE/cake/libs/view/helpers/form.php, line 1021
FormHelper::create() - CORE/cake/libs/view/helpers/form.php, line 214
    include - APP/views/forms/index.ctp, line 5
    View::_render() - CORE/cake/libs/view/view.php, line 662 
```

帮助我理解问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T18:38:56.563

This also works:

```
echo $form->create('User', array('action' => 'register')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T15:22:14.507

尝试这个：

```
echo $form->create('User', array('url' => '/users/register')); 
```

# iphone - iphone：缓存和更新 xml 字段

> ID：806030
> 
> 赞同：0
> 
> 时间：2009-04-30T09:06:50.993
> 
> 标签：iphone, oop

谢谢你的帮助。这里我还有一个问题。我通过 XMLParsing 获取数据，现在我想将其存储在 iphone 的缓存中，并且 XML 字段每 12 小时更新一次。如何检查 XML 字段是否更改？以及如何将数据存储在 iphone 的缓存中，这样它就不必与网络交互。有人可以帮我吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T09:17:02.637

我刚刚在另一个帖子上回答了他们。 [iPhone 3.0 的 Safari 缓存大小](https://stackoverflow.com/questions/805891/safari-cache-size-for-iphone-3-0/806010#806010)

可以在此处阅读如何在客户端存储值

[苹果开发者连接](https://developer.apple.com/safari/library/documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Introduction/chapter_1_section_1.html#//apple_ref/doc/uid/TP40007256-CH1)

[PDF版](https://developer.apple.com/safari/library/documentation/iPhone/Conceptual/SafariJSDatabaseGuide/SafariJSDatabaseGuide.pdf)

# version-control - 无法在 SourceOffsite 中递归地签入文件夹

> ID：806034
> 
> 赞同：1
> 
> 时间：2009-04-30T09:08:07.107
> 
> 标签：version-control, sos

我正在尝试签入其中包含更多文件夹的文件夹。如何使用 SourceOffsite 以递归方式检查它们？如果我选择父文件夹，则只有文件会被签入。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T14:16:27.533

在客户端触发的 AddFiles 对话框中，选择要添加的文件夹，不要从列表中选择单个文件。点击确定。在下一个屏幕（评论）上，您将有一个“递归”复选框[隐藏它的好地方]。检查它，它将导入您主要文件夹下的所有文件夹和文件。

sourceOffSite 版本 4.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-29T14:36:58.887

是不是你没有选择递归处理的选项？按住 shift 键并右键单击您的节点并按住 shift 键并选择签入。这应该会带您进入一个对话框，您可以在其中选择以递归方式执行操作，顺便说一下，仅在按下 shift 键时才显示对话框，我倾向于将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T11:02:21.340

我们也看到了这种行为，所以我猜这是一个错误。对我们来说，它不会一直发生。我们很少使用 SOS，因此我们没有将其上报给他们。也许他们有更新或补丁？

# sql-server - 在 SQL 查询中将变量传递给完全限定名称作为数据库

> ID：806036
> 
> 赞同：1
> 
> 时间：2009-04-30T09:08:16.870
> 
> 标签：sql-server

我想在 SQL Server 中跨多个数据库进行查询，所以我想我可以创建一个名为 @DBNAME 的变量并将其传递给查询，如下所示（但它不起作用）。

这将在一个循环中，其中 DBNAME 作为 dbid 的计数被单步执行。我的计数有效，它打印出 @DBNAME 作为所有生产数据库。但我无法让它跨多个数据库进行查询！

如果存在（从@DBNAME.INFORMATION_SCHEMA.TABLES 中选择 1

WHERE TABLE_TYPE='BASE TABLE' AND TABLE_NAME='DataArea') SELECT 'GETIN' AS res ELSE SELECT 'aaargh' AS res --SELECT * From DataArea AS res ELSE SELECT NULL AS res;

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-30T09:14:35.513

你可以用这样的动态sql来做到这一点

```
declare @tablename as sysname, @dbname as sysname
select 
@dbname = 'master', 
@tablename = 'dbo.spt_fallback_db'
declare @script nvarchar(4000)
select @script = 'select top 10 * from ' + @dbname + '.' + @tablename
exec sp_executesql @script 
```

根据需要替换您的数据库和表名称。只是为了测试目的使用了一个表格母版。

# asp.net - 将 ObjectDataSource 绑定到 Web 服务

> ID：806038
> 
> 赞同：0
> 
> 时间：2009-04-30T09:08:45.263
> 
> 标签：asp.net, web-services

这可能吗，有谁知道任何好的例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T09:14:18.947

您可能需要某种数据访问类，它包含对 Web 服务调用结果的引用并对该属性进行数据绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-30T11:07:24.363

ObjectDataSource 需要任何特定的 Object，它至少向 INSERT、UPDATE、DELETE 和 SELECT 公开四种基本方法中的一种。

您需要在一个类中环绕 Web 服务结果。您不能直接将 Web 服务与 ObjectDataSource 绑定。

# php - 从 PHP 代码差异中，你能分辨出哪些类和函数发生了变化吗？

> ID：806045
> 
> 赞同：1
> 
> 时间：2009-04-30T09:12:09.250
> 
> 标签：php, svn, diff, phpdoc

背景：

PHPDoc ( [http://www.phpdoc.org/](http://www.phpdoc.org/) ) 是一个出色的工具，用于从文件中的注释中提取类或方法的 html 文档。添加 PHPDoc 注释还有其他优点 - 如果您使用 Zend 或 Netbeans 之类的 IDE，它将使用 PHPDocs 向您显示自动完成提示。

大多数问题跟踪器都有一个功能，您可以使用特殊注释提交到您的版本控制系统，它会自动将该提交链接到该问题。

所以这就是我想要的系统：我提交了一些带有特殊注释的代码，我的问题跟踪器将它链接到一个问题。然后它查看提交并计算出我更改了​​哪些方法和类。然后它说“如果您正在寻找有关此问题的文档，请尝试 PHPDoc 的这些位：ClassX.FunctionY, ClassZ.VariableP”。它会自动将用户指向可能相关的文档。我认为这将是一个很棒的功能。

问题：

因此，缺少的部分是获取 PHP 代码差异，并计算出哪些类和方法发生了变化。有人对一些可以做到这一点的代码有任何指示吗？

在此先感谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T16:02:27.587

如果您使用的是[subversion](http://subversion.tigris.org/)，您可以看到项目中所有已更改文件的差异。看看它们有什么不同。

有些软件具有集成的颠覆支持，例如[Trac。](http://trac.edgewall.org/)

[这是 TracDiff 的图片](http://tracker.moodle.org/secure/attachment/12747/trac_diff.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:33:39.390

你需要一个深入理解 PHP 结构的工具，也就是能够像 PHP 引擎一样解析 PHP 源文本。

我们的“Smart Diff”做到了这一点，可以比较一对你知道是原始版本和更改版本的 PHP 文件。它比较 AST 并找到将一个映射到另一个的最小编辑。如果旧方法和新方法完全相似，它会发现并告诉您如何编辑一种方法以获得另一种方法。请参阅[http://www.semdesigns.com/Products/SmartDifferencer/index.html](http://www.semdesigns.com/Products/SmartDifferencer/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-25T09:22:55.073

[http://uk3.php.net/reflection](http://uk3.php.net/reflection)

PHP5 有方法可以将一个类分开并检查所有方法，包括给我需要与差异匹配的行号。使用它，我可以开始手动推出我自己的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-25T09:51:57.760

您可以编写一个提交后脚本来接收修改后的文件并查看它们以执行您想要的操作

# c# - x64 的新 .net 浮点类型？

> ID：806064
> 
> 赞同：1
> 
> 时间：2009-04-30T09:17:46.270
> 
> 标签：c#, .net, 64-bit

有人知道有吗？我会对具有双精度（或更大）范围以及小数（或更大）精度的 .net 浮点类型感兴趣。有没有计划？有人有兴趣推测 x64 上新的高精度、大范围浮点类型的实用性或实用性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T09:22:38.957

x64 仍然具有与 x86 相同的核心 .NET 库（尽管可能存在一些内部更改，尤其是在 CLI 本身中）。所以不：x64 没有得到任何额外的东西。

[`BigInteger`](http://blogs.msdn.com/bclteam/archive/2008/11/04/what-s-new-in-the-bcl-in-net-4-0-justin-van-patten.aspx)不过在 4.0 中有。

# c# - 将自定义行动态添加到 GridView

> ID：806065
> 
> 赞同：0
> 
> 时间：2009-04-30T09:17:55.397
> 
> 标签：c#, asp.net, gridview

我有一个数据绑定的gridview，我想动态添加一行包含我定义的数据并且远离数据绑定数据，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T09:31:10.467

**在客户端** 使用 DOM 或 jQuery 添加新行。

**在服务器端** 您必须继承 GridView 控件并覆盖 Render 函数才能修改输出 HTML。

但我不建议你这样做。因为它破坏了 OOP 编程的魅力，并且在发生错误时很难调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T09:23:06.977

为此，您只需要在原始数据源中添加一个项目，因为没有其他方法可以做到这一点。对于添加到数据源的新项目，您可以添加所需的数据。

# struts2 - Struts2中动作类的复选框ID和值

> ID：806071
> 
> 赞同：0
> 
> 时间：2009-04-30T09:19:56.157
> 
> 标签：struts2

我正在研究 struts2 应用程序。在一个 jsp 页面中，我有一些复选框和 onclick 复选框页面提交。它运作良好。请参阅下面的代码 -

```
<s:form action="authority" method="POST" theme="simple">
<table>
<tr><td><s:checkbox name="originatorName" id="originatorId" value="originatorValue" onclick="submit();"/></td></tr>
<tr><td><s:checkbox name="evaluatorName" id="evaluatorId" value="evaluatorValue" onclick="submit();"/></td></tr>
</table>
</s:form> 
```

下面展示了 struts.xml 如何处理动作 -

```
<action name="authority" class="power.AuthorityCheck">
        <result name="input">login.jsp</result>
        <result name="originator">originatorMain.jsp</result>
        <result name="evaluator">evaluatorMain.jsp</result>
</action> 
```

在我的操作类（AuthorityCheck.java）中，我得到了来自复选框标记的“名称”属性的用户单击的复选框的布尔值（真/假）。现在我还需要在我的操作类中单击的复选框的“id”和“value”。谁能帮我得到这个？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-03-16T17:48:18.443

您的“id”和“value”被硬编码到您的 jsp 文件中的复选框中。
只需使用布尔值将它们硬编码到您的 AuthorityCheck.java 中。

```
if ( originatorName == true) {
id="originatorId" value="originatorValue"
}
if ( evaluatorName == true) {
id="evaluatorId" value="evaluatorValue"
} 
```

# c# - c#正则表达式查找和替换重用部分匹配文本

> ID：806072
> 
> 赞同：3
> 
> 时间：2009-04-30T09:19:59.260
> 
> 标签：c#, regex

我需要对长文本字符串进行搜索和替换。我想找到所有看起来像这样的断开链接的实例：

```
<a href="http://any.url.here/%7BlocalLink:1369%7D%7C%7CThank%20you%20for%20registering">broken link</a> 
```

并修复它，使其看起来像这样：

```
<a href="/{localLink:1369}" title="Thank you for registering">link</a> 
```

文本字段中可能有许多此类断开的链接。我的困难是弄清楚如何重用匹配的 ID（在本例中为 1369）。在内容中，这个 ID 会随着链接的变化而变化，url 和链接文本也是如此。

谢谢，

大卫

编辑：为了澄清，我正在编写 C# 代码来运行数百个长文本字段以修复其中的损坏链接。每个单独的文本字段都包含可以在其中包含任意数量的断开链接的 html - 正则表达式需要找到它们并用正确版本的链接替换它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T09:34:00.740

我假设您已经解析了元素和属性。因此，要处理 URL，请使用以下内容：

```
 string url = "http://any.url.here/%7BlocalLink:1369%7D%7C%7CThank%20you%20for%20registering";
    Match match = Regex.Match(HttpUtility.UrlDecode(url), @"^http://[^/]+/\{(?<local>[^:]+):(?<id>\d+)\}\|\|(?<title>.*)$");
    if (match.Success) {
        Console.WriteLine(match.Groups["local"].Value);
        Console.WriteLine(match.Groups["id"].Value);
        Console.WriteLine(match.Groups["title"].Value);
    } else {
        Console.WriteLine("Not one of those URLs");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T09:34:08.853

要在替换字符串中包含匹配项，请使用`$&`.

在替换字符串中可以使用许多其他替换标记，[请参见此处的列表](http://msdn.microsoft.com/en-gb/library/ewy2t5e0.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T09:36:28.143

对此持保留态度，HTML和Regex不能很好地结合在一起：

```
(<a\s+[^>]*href=")[^"%]*%7B(localLink:\d+)%7D%7C%7C([^"]*)("[^>]*>[^<]*</a>) 
```

当应用于您的输入并替换为

```
$1/{$2}" title="$3$4 
```

产生以下内容：

```
<a href="/{localLink:1369}" title="Thank%20you%20for%20registering">broken link</a> 
```

这与单独使用正则表达式一样接近。您需要使用[`MatchEvaluator`委托](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator.aspx)从替换中删除 URL 编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T08:56:50.687

感谢大家的帮助。这是我最后使用的：

```
const string pattern = @"(<a\s+[^>""]*href="")[^""]+(localLink:\d+)(?:%7[DC])*([^""]+)(""[^>]*>[^<]*</a>)";
// Create a match evaluator to replace the matched links with the correct markup
var myEvaluator = new MatchEvaluator(FixLink);

var strNewText = Regex.Replace(strText, pattern, myEvaluator, RegexOptions.IgnoreCase);

internal static string FixLink(Match m)
    {
        var strUrl = m.ToString();
        const string namedPattern = @"(<a\s+[^>""]*href="")[^""]+(localLink:\d+)(?:%7[DC])*([^""]+)(""[^>]*>[^<]*</a>)";
        var regex = new Regex(namedPattern);

        //const string strReplace = @"$1/{$2}"" title=""$4";
        const string strReplace = @"$1/{$2}"" title=""$4";

        HttpContext.Current.Response.Write(String.Format("Replacing '{0}' with '{1}'", strUrl, regex.Replace(strUrl, strReplace)));
        return regex.Replace(strUrl, strReplace);
    } 
```

# c# - 为什么即使没有设置任何期望，我的部分模拟也会模拟所有虚拟方法？

> ID：806073
> 
> 赞同：2
> 
> 时间：2009-04-30T09:20:21.240
> 
> 标签：c#, .net, mocking, rhino-mocks, partial-mocks

我有一个用户控件，它在我想测试的 ValidateChildren 方法中进行一些验证。我创建了用户控件的部分模拟，但是虽然我没有对 ValidateChildren 方法设置任何期望，我只是简单地调用它，它只是被跳过并且方法中的代码永远不会执行。为了尝试了解发生了什么，我创建了一个简单的测试，如下所示：

```
public class Foo
{        
    public virtual bool Method1()
    {
        throw new NotImplementedException();
    }

    public virtual bool Method2()
    {
        return Method1();
    }
} 
```

并用它来测试它：

```
[Test]
public void TestFooMethods ()
{
    MockRepository m = new MockRepository();
    Foo foo = m.PartialMock<Foo>();

    RhinoMocksExtensions.Expect<Foo,bool>(
                             foo, 
                             delegate (Foo obj)
                             {
                                 return obj.Method1();
                             }
                         ).Return(true);

    Assert.IsTrue (foo.Method2());
} 
```

现在我希望 foo.Method1 会被嘲笑，而 foo.Method2 不会。但这总是返回 false，如果我尝试在调试器中单步执行，则 foo.Method2() 会被单步执行，我无法介入。

任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T09:36:23.713

如果您模拟一个对象，它将覆盖所有抽象/虚拟方法，而不管模拟的类型如何。不过，您可以做的是对您的方法做出期望，并告诉它执行它所覆盖的原始方法，方法是：

```
CallOriginalMethod(OriginalCallOptions.CreateExpectation); 
```

您没有按照设计的方式使用 Rhino Mocks，这也可能给您带来麻烦。我已经按照应该使用 C# 3.0 和 lambda 和扩展方法编写的方式重新编写了您的测试：

```
[TestMethod]
public void TestFooMethods()
{
    //Generate a new Mock to test against
    Foo foo = MockRepository.GenerateMock<Foo>();

    //Expect a call to Method1 on object foo and return true
    foo.Expect(f => f.Method1()).Return(true);
    //Expect a call to Method2 on object foo and call the original method
    foo.Expect(f => f.Method2()).CallOriginalMethod(OriginalCallOptions.CreateExpectation);

    Assert.IsTrue(foo.Method2());

    //Verify all our expectations on foo
    foo.VerifyAllExpectations();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T09:44:02.777

好的，经过更多的尝试（也许只是把问题写下来帮助我更清楚地思考它）我想我已经找到了解决方案。

看来我需要打电话：

```
RhinoMocksExtensions.Replay (foo); 
```

在我打电话之前

```
Assert.IsTrue (foo.Method2 ()); 
```

当使用虚拟方法而不是设置期望值时，可能需要明确告知 Rhino 模拟。不知道为什么。如果有人知道这背后的原因，我很想知道。

无论如何，一切似乎都在工作，所以快乐的日子。

# xml - 通过xml加载组件

> ID：806074
> 
> 赞同：0
> 
> 时间：2009-04-30T09:20:58.773
> 
> 标签：xml, apache-flex, actionscript

如何通过xml加载flex组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T10:20:05.840

在加载组件之前，您必须使用 mxmlc 编译组件。然后，您可以使用 SWFLoader 控件加载组件。SWFLoader 控件可以加载通过编译 Flex 项目生成的任何 swf。（至少在 AS3 中）。

# asp.net - asp.net 中的高性能数据库访问层

> ID：806075
> 
> 赞同：0
> 
> 时间：2009-04-30T09:21:12.283
> 
> 标签：asp.net

我正在开发一个曾经有超过 5000 个用户的应用程序。我使用 ASP.NET 3.5 框架进行开发。我想使用 linq、ADO.NET 实体、ADO.NET 数据服务等最新技术开发高性能 DAL 层。我还想确保它对所有未来的开发都是通用的。任何人都可以让我知道我应该使用哪种模式来开发该数据库访问层。我也想为此使用微软企业库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T09:38:31.430

我认为你应该看看 NHibernate 和 Fluent NHibernate。

通过不编写自己的 DAL，您可以节省大量时间。只有您知道您对性能的非功能性需求，以及您是否正在针对读取、更新或其他内容进行优化，因此请编写一些测试、原型，看看它是如何进行的。

我个人的看法是，Microsoft Ent Lib 和 perf 并不是最好的伙伴，但同样，您应该在开发周期的早期进行原型设计并证明这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T09:24:41.730

您可以使用[Linq to SQL](http://msdn.microsoft.com/en-us/library/bb425822.aspx)。

您还可以查看[这篇文章系列](http://krisvandermotten.wordpress.com/2006/11/19/creating-a-data-access-layer-with-linq-to-sql-part-1/)，了解使用相同技术创建实际 DAL。

# wpf - WPF 使用 BitmapSource 渲染性能

> ID：806083
> 
> 赞同：7
> 
> 时间：2009-04-30T09:24:09.970
> 
> 标签：wpf, performance, bitmap, rendering

我创建了一个 WPF 控件（从 FrameworkElement 继承），它显示一个可以平移的平铺图形。每个图块为 256x256 像素，24bpp。我已经覆盖了 OnRender。在那里，我加载任何新的图块（作为 BitmapFrame），然后使用drawingContext.DrawImage 绘制所有可见的图块。

现在，只要每个渲染周期有多个新图块，帧率就会从 60fps 下降到零大约一秒钟。这不是由加载图像（以毫秒为单位）引起的，也不是由 DrawImage 引起的（它根本不需要时间，因为它只是填充了一些中间渲染数据结构）。

我的猜测是，每当渲染线程获得大量（~20）新的 BitmapSource 实例（即，它尚未缓存的实例）时，它本身就会阻塞。要么花费大量时间将它们转换为某些内部 DirectX 兼容格式，要么可能是缓存问题。它不能用完视频 RAM；Perforator 显示峰值低于 60MB，我有 256MB。此外，Perforator 说所有渲染目标都是硬件加速的，所以也不是这样。

任何见解将不胜感激！

提前致谢

丹尼尔

@RandomEngy：
BitmapScalingMode.LowQuality 稍微减少了问题，但并没有摆脱它。我已经在以预期的分辨率加载图块。而且它不能是最新的图形驱动程序（Nvidia）。
得知缩放需要这么多时间，我有点惊讶。按照我的理解，位图（无论其大小）只是作为 Direct3D 纹理加载，然后进行硬件缩放。事实上，一旦位图第一次被渲染，我可以改变它的旋转和缩放，而不需要进一步的冻结。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T23:23:51.383

这不仅仅是大量的图像。仅一张大图像就足以在加载之前保持渲染，当您的图像尺寸开始增加数千时，这可能会非常明显。

我同意你的观点，它可能是渲染线程：我做了一个测试，UI 线程仍然很高兴地发送消息，而这个渲染延迟是由于试图显示一个完全预缓存的 BitmapImage 而发生的。

它必须对图像进行某种转换或准备，就像您推测的那样。我试图通过“渲染”但隐藏图像，然后在我需要显示它时显示它来在我的应用程序中缓解这种情况。然而，这并不理想，因为无论如何都会发生渲染冻结。

（编辑）

一些后续行动：在讨论了 MS WPF 别名后，我发现了导致延迟的原因。在我的 Server 2008 机器上，它是不支持新 WDDM 驱动程序模型的旧视频驱动程序和调整图像大小的延迟的组合。

如果源图像大小与显示大小不同，则会在图像显示之前延迟渲染线程。默认情况下，图像设置为最高质量，但您可以通过调用更改缩放选项以进行渲染`RenderOptions.SetBitmapScalingMode(uiImage, BitmapScalingMode.LowQuality);`。一旦我这样做了，在显示图像之前的神秘冻结就消失了。如果您不喜欢缩放中的质量下降，另一种方法是加载 BitmapImage，其 DecodePixelWidth/Height 等于它将显示的大小。然后，如果您在后台线程上加载 BitmapImage，您应该不会延迟显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-26T14:50:17.450

也试试这些；

```
/* ivis is declared in XAML <Image x:Name="iVis" UseLayoutRounding="True" SnapsToDevicePixels="True" /> */

iVis.Stretch = Stretch.None;
RenderOptions.SetBitmapScalingMode(iVis, BitmapScalingMode.NearestNeighbor);
RenderOptions.SetEdgeMode(iVis, EdgeMode.Aliased);
VisualBitmapScalingMode = BitmapScalingMode.NearestNeighbor;
iVis.Source = **** your bitmap source **** 
```

当使用大量“A”通道颜色时，我在性能方面遇到了一些问题，等到图像渲染后缩放它对我来说效果更好。

另外，正如您所说，您使用平铺图形？

您通常会使用[TileBrush](http://msdn.microsoft.com/en-us/library/aa970682.aspx)来简单地设置为 FrameworkElement 上的画笔。如果您正在为它们设置动画或动态添加新的，您可以生成画笔，然后在手动操作时将它们应用于您的对象，如果可以，请务必冻结它们。此外，VisualBitmapScalingMode 是任何 Visual 的属性。

# php - PDF 文件中的直接打印网页

> ID：806084
> 
> 赞同：0
> 
> 时间：2009-04-30T09:24:27.987
> 
> 标签：php, mysql, pdf, printing, directshow

在我的网站中，我使用 PHP 获取我的 mysql 数据。当我单击 pdf 打印按钮时，我想在 pdf 文件中打开该数据，可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T09:26:59.133

首先，如果您想要一个高质量的专业产品来做到这一点。你想要[王子 XML](http://www.princexml.com/)

如果你正在寻找一些开源工具来实现类似的东西。您可以查看[这个 SO question。](https://stackoverflow.com/questions/733219/converting-html-to-pdf-using-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-01T08:54:51.700

PHP 中的 FPDF 模块非常简单，可以将数据放在一起。这是一个安全的选择，因为您知道要传递给 PDF 引擎的数据。有一些流式 pdf 选项可以接收一堆 html，然后将其输出到 pdf，但是它们可能会在您不知情的情况下弄错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T18:36:14.883

I've used TCPDF in the past, it's a little kludgy but can definitely get the job done. ([http://www.tecnick.com/public/code/cp_dpage.php?aiocp_dp=tcpdf](http://www.tecnick.com/public/code/cp_dpage.php?aiocp_dp=tcpdf))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T13:13:37.987

I used, on Linux machines, [WKHTMLTOIMAGE/WKHTMLTOPDF](http://code.google.com/p/wkhtmltopdf/) a number of times, on many projects. It workes like a charm, easy to use, just a script that you run.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T17:01:48.323

将数据转换为 XML 后，您可以使用 Apache FOP 处理数据。( [http://xmlgraphics.apache.org/fop/](http://xmlgraphics.apache.org/fop/) )。

如果您的页面是基于模板的，您可以创建一个生成 xml 输出并对其进行处理的模板。您将对 pdf 结构有非常好的控制。权衡是它不是一个“插入并可以工作”的解决方案，但我已经做到了，一旦它设置好，就像魅力一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-30T09:34:29.257

您可以准备静态 PDF 表单文件，只需使用 PHP 的[FDF 模块](http://www.php.net/manual/en/book.fdf.php)填写值即可。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-30T09:38:32.197

这取决于您使用的是哪个平台。如果您在 grails 上使用 Groovy，这将是一件容易的事。有一些插件可以促进 pdf 报告，例如 jasper-plugin。

路易斯

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-30T09:52:49.353

查看[jsPDF](http://code.google.com/p/jspdf/)，这是一个仅使用 JavaScript 即可生成 PDF 文档的开源库。

# html - 修复了 div 和 iframe 元素内部

> ID：806086
> 
> 赞同：1
> 
> 时间：2009-04-30T09:25:01.340
> 
> 标签：html, css, iframe

我的 html 代码有问题。我已经尝试了很多解决方案，但我还没有解决我的问题。我的问题是；如果我在 html 页面中使用了两个 div 并且两个 div 都必须包含 iframe 元素，我从未在浏览器中看到正确的 html 页面。

注意：每个 div 必须有 position:fixed css 属性。

示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title></title>
    <style>
     body{margin:0px;}

     .modalWrapper
     {
        position:fixed;
        display:block;
        width:500px;
        height:300px;
        background-color:#000;
        color:#fff;
        margin:0px; 
        top:50px;
        left:500px;
        z-index:100;
     }

     .modalHeader{ width:100%; height:80px; }
     .modalNavigator { background-color:#ccc; height:220px; }

     .bottomWrapper
     {
        position:fixed;
        display:block;
        width:100%;
        height:300px;
        background-color:#000;
        color:#fff;
        margin:0px; 
        bottom:0px;
        z-index:99;
     }

     .bottomHeader{ width:100%; height:80px; }
     .bottomNavigator{ background-color:#ccc; height:220px; }

    </style>

</head>
<body>

<div>       
    <div class="modalWrapper">
       <div class="modalHeader">
        Modal       
       </div>
       <div class="modalNavigator">

         <iframe frameborder="0" src="http://www.yahoo.com" id="Iframe1"
                style="height: 220px; width: 100%;" scrolling="no"/>    
       </div>
    </div>

    <div class="bottomWrapper">
       <div class="bottomHeader">
        Bottom       
       </div>
       <div class="bottomNavigator">
         <iframe frameborder="0" src="http://www.google.com.tr" id="Iframe2"
                style="height: 220px; width: 100%;" scrolling="no"/>
       </div>
    </div>   
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T15:37:28.087

代替：

```
<iframe [...]/> 
```

尝试：

```
<iframe [...]></iframe> 
```

我会查看这个问题以获取有关为什么这会有所帮助的更多信息：[为什么自闭合脚本标签不起作用？](https://stackoverflow.com/questions/69913/why-dont-self-closing-script-tags-work)

# c# - 我应该在我的设计中将项目或应用程序范围的 TraceSwitch 放在哪里？

> ID：806089
> 
> 赞同：3
> 
> 时间：2009-04-30T09:26:31.163
> 
> 标签：c#, diagnostics, traceswitch

我正在尝试使用由`System.Diagnostics`. 由于我的解决方案包含多个项目，因此我想为整个应用程序创建一个开关，并为每个项目创建一个开关。

现在的问题是，我怎样才能做到这一点，我应该把开关定义放在哪里？

从应用程序范围的开关开始，由于我理解的 C# 中没有全局变量之类的东西，我怎么能做到这一点？

会放

```
static TraceSwitch ApplicationSwitch = new TraceSwitch("Application", "Enables logging in the whole application."); 
```

在每个类中解决这个问题，还是宁愿创建与类一样多的开关，每个类都具有相同的名称？（我猜是后者）

或者我应该把初始化放在一个单独的类中吗

```
static class GlobalSwitch
{
    static TraceSwitch Application = new TraceSwitch("Application", "Enables logging in the whole application.");
} 
```

并像这样从其他所有类中引用它

```
public OtherClass
{
    static TraceSwitch Application = GlobalSwitch.Application;
} 
```

这将解决为整个项目使用 1 个开关的问题，但这是一个好习惯吗？

关于应用程序范围的开关，我必须`GlobalSwitch`在每个其他项目中引用包含该类的项目，如果可能的话我想避免这种情况。

非常感谢有关如何以智能方式完成此操作的一些线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T09:37:24.820

我通常将跟踪开关（和日志函数）包装到一个中央日志程序集中，向开关公开一个静态接口以及调用正在使用的底层日志功能的静态日志方法（通常是 Trace.Write-functions）。

# c# - 如何将对象序列化为 XDocument？

> ID：806095
> 
> 赞同：25
> 
> 时间：2009-04-30T09:28:48.850
> 
> 标签：c#, xml-serialization

我有一个标有 DataContract 属性的类，我想`XDocument`从该类的对象创建一个。这样做的最佳方法是什么？

我可以通过 an 来做到这一点，`XmlDocument`但这似乎是一个不必要的步骤。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-04-30T11:20:54.133

您可以直接在 XDocument 中创建 XmlWriter：

```
XDocument doc = new XDocument();
using (var writer = doc.CreateWriter())
{
    // write xml into the writer
    var serializer = new DataContractSerializer(objectToSerialize.GetType());
    serializer.WriteObject(writer, objectToSerialize);
}
Console.WriteLine(doc.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-11T09:48:20.700

我就是这样做的，它提供了干净的 xml，其中没有所有命名空间的东西，

```
 XDocument xdoc = new XDocument(new XDeclaration("1.0", "utf-8", "yes"));

        using (var writer = xdoc.CreateWriter())
        {
            System.Xml.Serialization.XmlSerializer x =
            new System.Xml.Serialization.XmlSerializer(objecttoserialize.GetType());

            x.Serialize(writer, objecttoserialize);
        }

        Debug.WriteLine(xdoc.ToString()); 
```

# nhibernate - Fluent Nhibernate 组合实体，指定父键

> ID：806097
> 
> 赞同：0
> 
> 时间：2009-04-30T09:29:56.727
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

在[这个问题](https://stackoverflow.com/questions/796949/fluent-nhibernate-composed-entity-specify-foreign-key)中，我回答得很热，可以从表的主键映射一个组合实体。所以给出：

```
public UserMap()
{
    WithTable("aspnet_Users");
    Id(x => x.Id, "UserId")
        .GeneratedBy.Guid();
    Map(x => x.Name, "UserName");
    Map(x => x.Login, "LoweredUserName");
    WithTable("LdapUsers", m => {
          m.Map(x => x.FullName, "FullName");
          m.WithKeyColumn("UserId");
    });
} 
```

如果在“LdapUser”和“aspnet_Users”中有一个名为“UserId”的列，那么一切都有效。

如果我想同时指定外键表的列名和主表中键的列名，因为这不是 pk 所以使用另一列进行连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-01T17:20:09.940

看起来 NHibernate 目前根本不支持这一点。NHibernate 的 JIRA 上有一个[未解决](http://nhjira.koah.net/browse/NH-1272)的问题。实际上，我认为这适用于收藏，但可能也适用于您正在做的事情。这个想法是您将在元素`property-ref`上添加一个属性，`<key>`该属性指向您要引用的属性而不是主键。

假设 NHibernate 2.1.0 的 Alpha2 版本中已经提供了更改。当然，它可能是在 NH2.1 成为一般版本之后的某个时间，然后才会将其添加到 FNH 中。如果可以的话，我建议您获取 Alpha2 版本并根据您的情况进行尝试。如果它不适用于您的组合实体，仅适用于集合，您可能希望在 JIRA 上提交另一个问题，以便将其添加。

# c# - 如何从 WPF 应用程序中的相对路径加载？

> ID：806098
> 
> 赞同：8
> 
> 时间：2009-04-30T09:30:17.753
> 
> 标签：c#, windows, path

我正在读取一个 xml 文件，并希望根据应用程序的位置从相对目录中创建它，类似于带有 Server.MapPath 或使用 tilda 的 ASP.NET。

如何获取 WPF 中的相对路径？

```
WORKS: XDocument xmlDoc = XDocument.Load(@"c:\testdata\customers.xml");
DOES NOT WORK: XDocument xmlDoc = XDocument.Load(@"~\Data\customers.xml");
DOES NOT WORK: XDocument xmlDoc = XDocument.Load(@"~/Data/customers.xml"); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-30T10:04:31.040

```
XDocument xmlDoc = XDocument.Load(
    Path.Combine(
        AppDomain.CurrentDomain.BaseDirectory, 
        @"Data\customers.xml")); 
```

我假设该`Data`目录将与您的应用程序一起部署，与您的 EXE 位于同一根目录中。这通常是安全的，除非涉及到卷影复制；例如，当您使用 NUnit 测试此代码时。（使用卷影复制，构成您的应用程序的程序集会被复制到一个临时目录，但这样的文件会被遗忘。）

假设您不打算`customers.xml`在部署后进行修改，处理此问题的最安全方法是将文件作为资源嵌入到您的程序集中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-30T09:36:12.233

```
XDocument xmlDoc = XDocument.Load(@"Data\customers.xml"); 
```

或者

```
XDocument xmlDoc = XDocument.Load(@".\Data\customers.xml"); 
```

顺便说一句，这与 WPF 无关，与 Windows 路径有关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T10:18:25.340

试试看`File.Create("./HiImHere.txt")`点目录在哪里；之后尝试相对于 where 的路径`HiImHere.txt`。

# asp.net - ASP.NET 面向服务的体系结构

> ID：806099
> 
> 赞同：1
> 
> 时间：2009-04-30T09:30:26.333
> 
> 标签：asp.net, architecture

我被要求研究使用面向服务架构的 ASP.NET（不是 MVC）应用程序的设计。

这似乎有点笨拙，可能意味着很多事情。我正在寻找有关此主题的一些指导/文章以帮助我入门。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T09:40:40.273

谷歌肯定会提供丰富的文章。我不认为我可以改善这一点。

但我认为服务的重要本质是在设计时将 UI 与后端分开。通过考虑 UI 表单来划分问题，将数据从文本框收集到数据传输对象中，或者可能将它们直接绑定到表中的列，将为您提供一种系统。

但是面向服务的视图首先查看您尝试完成的业务问题，然后将其分解为粗粒度的功能，方法是跨越事务边界的工作单元。您将更多地担心客户端和服务之间的合同和接口。

一旦你得到正确的接口，客户端和服务就可以独立实现。只要您不更改接口或违反合同，您就可以更改服务实现而不影响客户端。

SOA 是关于一种思维方式，而不是像 SOAP 这样的工具或标准。

# php - Drupal 6 不会发送电子邮件，用于帐户激活等

> ID：806103
> 
> 赞同：1
> 
> 时间：2009-04-30T09:31:43.350
> 
> 标签：php, email, drupal-6, smtp, send

我在本地运行自己的 LAMP 服务器。

我需要设置什么？

它是否能够使用 php-mail 发送电子邮件，而无需配置 smtp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T09:45:42.570

检查您的 phpinfo() 信息以获取 STMP 和端口。做一个 test.php 文件并尝试执行它。

```
mail('email@example.com', 'My Subject', 'Hello World'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T10:06:10.070

[http://drupal.org/node/11570](http://drupal.org/node/11570)

该线程将帮助您。

Drupal 基本上对 php 邮件功能进行了修补，因此您需要在本地安装一个邮件服务器并安装您的 Lamp 设置，或者将 apache 指向您的 php.ini 文件中的外部或 smtp 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T10:44:01.477

啊修好了，我没有 - 我们的开发人员之一。

显然 Drupal 只使用“发送邮件”，所以你必须安装它，不会使用 php-mail。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-03-25T05:22:04.950

供将来参考/研究：尝试 Drupal 模块[SMTP Authentication Support](http://drupal.org/project/smtp)。我还没有测试它。

# c# - 数据网格视图很慢

> ID：806106
> 
> 赞同：1
> 
> 时间：2009-04-30T09:33:42.940
> 
> 标签：c#, datagridview

我有一个不断更新的数据网格视图。它没有按照我想要的方式执行。

你们能建议任何您认为可以更快地处理更新的替代控件吗？

谢谢。

////////////

没有约束力。当我使用数据源时，情况更糟。

我更新了一个元素，例如 DepthGridBid.Rows[i].Cells[j].Value = .. i 和 j 索引我从我收到的更新中知道。

* * *

实现了虚拟模式。与旧版本相比。测量时间。它不是更快。

大家还知道其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T10:39:31.987

如果您不想绑定数据，并且您的数据正在迅速变化，那么虚拟模式应该适合您。

```
 // set the VirtualMode property to true
 dataGridView.VirtualMode = true;

 // handle the CellValueNeeded event
 dataGridView.CellValueNeeded += new
    DataGridViewCellValueEventHandler(dataGridView_CellValueNeeded); 
```

如果你的数据长度始终相同，你只需要设置一次行列，然后在收到新数据时调用 Invalidate()，通知 DataGridView 需要重新绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-19T12:26:44.477

您还必须及时查询数据。
请看[这个](http://msdn.microsoft.com/en-us/library/ms171624.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-04-19T12:39:56.637

为了获得最大的性能，`DataGridView`您还应该查看[DataGridView 常见问题解答](http://www.windowsclient.net/Samples/Go%20To%20Market/DataGridView/DataGridView%20FAQ.doc)。

# asp.net - asp.net：从使用嵌入式资源的控件和 me.GetType() 继承

> ID：806112
> 
> 赞同：1
> 
> 时间：2009-04-30T09:34:36.497
> 
> 标签：asp.net, vb.net

我在尝试继承使用嵌入式资源的控件时遇到了一些麻烦。问题是 - 这个控件使用 me.GetType() 而不是 GetType(ControlName)。现在，当我尝试使用派生控件时，它会在派生控件的程序集中而不是基本控件程序集中查找资源，并且显然 - 没有找到它们。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-12-28T04:20:41.707

由于调用在基本控件的定义中，因此如果不能覆盖调用它的方法，则无能为力；如果可能，您可以复制资源文件，或者尝试覆盖调用资源的方法。当您无法控制基类时，这很难。

当我不知道代码是什么样子时，也很难给出建议。如果您可以发布相关课程部分的签名并在您的问题中提及这一点，那将有所帮助。

HTH。

# generics - 如何使用委托退出通用列表 ForEach？

> ID：806113
> 
> 赞同：0
> 
> 时间：2009-04-30T09:34:55.230
> 
> 标签：generics, list, foreach, delegates

如何与代表一起退出通用列表 ForEach？中断或返回不起作用。

例子：

```
 Peoples.ForEach(delegate(People someone)
        {
            if(someone.Name == "foo")
               ???? What to do to exit immediatly ?
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T09:37:29.797

您无法使用[ForEach](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)实现此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T09:39:24.627

就这样写出来

```
foreach(People someone in Peoples)
{
    if(someone.Name == "foo") break;
    // rest of code below for != "foo"...
} 
```

跳过 foo 并且仍然为其他人做你可以做的动作

```
if(someone.Name == "foo") continue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T09:49:59.923

您可以执行以下操作：

```
 Peoples.TakeWhile(p=> p.Name != "foo")
            .ToList().ForEach(p => Console.WriteLine(p.Name)); 
```

但这在性能方面是矫枉过正和糟糕的......

只需使用一个简单的`foreach`循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T09:52:29.540

`ForEach()`虽然不建议您在满足条件时从内部抛出异常。

# objective-c - 免费桥梁

> ID：806115
> 
> 赞同：31
> 
> 时间：2009-04-30T09:36:01.140
> 
> 标签：objective-c, iphone, macos

作为 iPhone 开发和 Objective-C 的新手，在过去的几周里，我多次提到 CF 和 NS 框架之间的“免费桥梁”。

一个特别的例子是 CFStream 和 NSStream。

是否存在记录所有这些桥梁以及如何使用它们的资源？它就像从一种类型的对象转换为另一种类型一样简单吗？

我问目前我正在使用 iPhone SDK 中不允许的 NSStream 调用，并且我知道我应该使用 CFStream 调用。

[编辑：一篇关于TFB 如何工作](http://www.mikeash.com/pyblog/friday-qa-2010-01-22-toll-free-bridging-internals.html)的有用文章

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-04-30T09:45:07.220

免费桥接意味着数据结构是可互换的。它就像铸造一样简单——这就是“免费”部分。任何可以在桥的一侧使用类型的地方，您都可以使用另一侧。因此，例如，您可以创建一个 CFString 然后向它​​发送 NSString 消息，或者您可以创建一个 NSArray 并将数组传递给 CFArray 函数。

Apple在其网站上保留了[受支持的免费桥接类型的列表。](http://developer.apple.com/library/mac/documentation/CoreFoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html#//apple_ref/doc/uid/20002401-767858)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-30T11:18:27.090

免费电话桥接虽然是一个有趣的名字，但却是 CoreFoundation 类的一个非常酷的特性。从本质上讲，它归结为这样一个事实，即您可以在 CoreFoundation 和 NextStep 同名类之间进行转换（CFString<->NSString、CFData<->NSData、CFDictionary<->NSDictionary...只是列举一些最常用的.)

|K<

# iphone - 真正的 iPhone 设备上有类似“getStreamsToHost”的东西吗？

> ID：806116
> 
> 赞同：3
> 
> 时间：2009-04-30T09:36:06.897
> 
> 标签：iphone, objective-c, stream

我想用苹果的示例代码将 NSOutputStream 写入服务器：

```
 NSURL *website = [NSURL URLWithString:str_IP];
NSHost *host = [NSHost hostWithName:[website host]];
[NSStream getStreamsToHost:host port:1100 inputStream:nil outputStream:&oStream];
[oStream retain];
[oStream setDelegate:self];
[oStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[oStream open]; 
```

这些代码在 iPhone 模拟器上运行良好，但是当我将它构建到真实设备时。弹出两个警告。问题是：

1) NSHost 类不属于 iphone os 库

2）getStreamsToHost 也没有找到

对于可在真实设备上使用的替代方法或类有什么建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-30T16:56:42.377

由于 CFWriteStream 是[免费桥](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/Streams/Articles/CocoaStreamsOverview.html)接到 NSOutputStream 的，因此您可以使用 CFStreamCreatePairWithSocketToHost 来获取您的流对：

```
CFReadStreamRef readStream = NULL;
CFWriteStreamRef writeStream = NULL;
CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, (CFStringRef)host, port, &readStream, &writeStream);
if (readStream && writeStream) {
    CFReadStreamSetProperty(readStream, kCFStreamPropertyShouldCloseNativeSocket, kCFBooleanTrue);
    CFWriteStreamSetProperty(writeStream, kCFStreamPropertyShouldCloseNativeSocket, kCFBooleanTrue);

    inputStream = (NSInputStream *)readStream;
    [inputStream retain];
    [inputStream setDelegate:self];
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [inputStream open];

    outputStream = (NSOutputStream *)writeStream;
    [outputStream retain];
    [outputStream setDelegate:self];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream open];
}

if (readStream)
    CFRelease(readStream);

if (writeStream)
    CFRelease(writeStream); 
```

# apache-flex - Flex 3 全局异常处理

> ID：806118
> 
> 赞同：2
> 
> 时间：2009-04-30T09:36:12.280
> 
> 标签：apache-flex, flex3, error-handling

我想在我的 Flex 应用程序中创建某种全局错误处理。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T13:24:46.927

目前没有办法做到这一点。所以请为这个功能请求投票：http: [//bugs.adobe.com/jira/browse/FP-1499](http://bugs.adobe.com/jira/browse/FP-1499)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-06-23T00:54:44.090

Flash Player 10.1（2010 年 6 月发布）现在提供全局错误处理。有关如何使用它的详细信息，请参阅

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/UncaughtErrorEvents.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/UncaughtErrorEvents.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T01:26:42.190

James 是对的……您可以首先将异常路由到如下所示的一个静态工具，以使更改和调试更容易。

```
package 
{
    import mx.rpc.Fault;

    public class FlexException
    {
        public function FlexException()
        {
        }

        public static function faultHandler(fault:Fault):void{
            //Do stuff
        }

    }
} 
```

# excel - Excel图表组件推荐

> ID：806124
> 
> 赞同：1
> 
> 时间：2009-04-30T09:37:20.530
> 
> 标签：excel, charts, business-intelligence, dashboard

我必须用 Excel 构建一个分析仪表板，想知道是否有您推荐的图表库。

图表应该有吸引力并且易于标准用户使用。

我尝试过[Microcharts](http://www.bonavistasystems.com/index.html)，它们看起来很有希望，但我想在做出决定之前评估更多选项。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T02:33:32.737

如果您在 Excel 中寻找自定义图表，我首先求助的两个资源是：

*   [Peltier 技术服务](http://peltiertech.com/index.html)的 Jon Peltier
*   [尖](http://chandoo.org/wp/)毛呆伯特的钱多

对于仪表板，我特别推荐 Robert 的六部分系列“[在 Microsoft Excel 中创建 KPI 仪表板](http://chandoo.org/wp/2008/08/20/create-kpi-dashboards-excel-1/)”（Robert 还有一个博客，[Clearly and Simply](http://www.clearlyandsimply.com/)，其中包含大量内容和其他站点列表，您可能会在侧边栏下发现这些站点有用“博客和链接”）

对于仪表板背后的理论，[Stephen Few](http://www.perceptualedge.com/)有一本书《信息仪表板设计：数据的有效视觉传达》详细介绍了最佳实践。他还撰写了[关于仪表板的文章，](http://www.tdwi.org/print.aspx?id=7487)重点关注好与坏的设计。

如果您希望最终用户/决策者制作自己的仪表板，您也可以考虑查看[Tableau 。](http://www.tableausoftware.com/)

# sql-server - 为小数（x，y）选择适当的精度

> ID：806126
> 
> 赞同：2
> 
> 时间：2009-04-30T09:37:28.627
> 
> 标签：sql-server, database-design

我目前正在重新设计一个旧数据库以在 SQL Server 2005 上运行，并且我想用小数替换大多数旧的浮点列。

Decimal(15,4) 足以满足我的需要，但[SQL Server 文档](http://msdn.microsoft.com/en-us/library/ms187746(SQL.90).aspx)指出这将使用与 Decimal(19,4) 相同的存储空间（9 个字节）。在相同的存储空间中拥有更大的数字似乎是个好主意。那么：有什么理由我不应该*使用*（19,4）的最大精度？也许是性能缺陷？请注意，我不会在数据库中进行大量计算，只会在查询中进行一些 SUM 或乘法运算。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T11:59:13.903

尽管使用相同数量的存储空间，但使用较小数据精度的主要原因是向系统的未来用户传达意义。这也是为什么使用适当的数据类型很重要的原因——例如 DECIMAL(15,4) 表示数字，MONEY 表示金钱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T10:12:14.627

小数点后 4 位，尽可能用钱

原因：它比小数更快，但准确

[金钱、浮点数、小数](http://sqlcat.com/technicalnotes/archive/2008/09/25/the-many-benefits-of-money-data-type.aspx)文章

编辑：基于评论

有趣的论点。我关注这两个博客。

请注意此处的示例：基于数据类型和优先级的不同精度

```
declare @d decimal(19,4), @ddiv decimal(19,4)

set @d = 12.39
SET @ddiv = 1000

select (@d/@ddiv)*@ddiv, (@d/1000)*1000
--Gives   12.390000    12.390000000 
```

[通过我对“ T-SQL 十进制除法精度](https://stackoverflow.com/questions/423925/t-sql-decimal-division-accuracy/424052#424052)”的回答进行了解释

现在，这很有趣。十进制，不同的答案

```
declare @d decimal(19,4), @ddiv decimal(19,4)

set @d = 12.39
SET @ddiv = 1001

select (@d/@ddiv)*@ddiv, (@d/1001)*1001
--Gives   12.390000    12.389999622 
```

回到金钱：每个人的答案相同

```
declare @d money, @ddiv money

set @d = 12.39
SET @ddiv = 1001

select (@d/@ddiv)*@ddiv, (@d/1001)*1001
--Gives   12.3123    12.3123 
```

**道德：以 SQL 存储，以客户端语言处理......**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T20:28:08.833

在性能方面，没有理由不使用小数（19,4）。我个人认为仅仅为了“传达意义”而使用不同的精度是没有意义的，不仅因为适当的文档（甚至是对该领域的评论）会解决这个问题，而且尤其是因为业务规则确实发生了变化。

如果使用 MONEY 是首选，请注意潜在的准确性缺陷：[https ://groups.google.com/forum/?hl=en#!topic/microsoft.public.sqlserver.server/4ZvwaOII3Vs](https://groups.google.com/forum/?hl=en#!topic/microsoft.public.sqlserver.server/4ZvwaOII3Vs)

# java - 如何实施 SAML SSO

> ID：806131
> 
> 赞同：39
> 
> 时间：2009-04-30T09:38:52.430
> 
> 标签：java, security, single-sign-on, saml

SAML SSO 通常是如何实现的？

我已经阅读[了这篇](https://developers.google.com/google-apps/sso/saml_reference_implementation_web)（nb obsolete）关于将 SAML 与 Google Apps 一起使用的内容，以及关于[SAML](http://en.wikipedia.org/wiki/SAML)的维基百科条目。

维基百科条目讨论了使用包含 SAMLRequest 和 SAMLResponse 详细信息的表单进行响应。这是否意味着用户必须亲自提交表单才能继续进行单点登录？

谷歌条目谈到使用重定向，这对我来说似乎更无意义。然而，它也谈到了使用表单作为用户必须提交的响应（尽管它确实谈到了使用 JavaScript 自动提交表单）。

这是这样做的标准方式吗？使用重定向和 JavaScript 提交表单？

有谁知道有关如何在 Windows 域和 J2EE Web 应用程序之间实现 SSO 的任何其他好的资源。Web 应用程序位于单独的网络/域上。我的客户想要使用[CA Siteminder](http://www.ca.com/us/internet-access-control.aspx)（带有 SAML）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-02T23:29:09.250

其工作方式是，在对用户进行身份验证后，SAML 身份提供者 (IdP) 将包含 SAML 响应的表单呈现给浏览器 - 表单的“操作”（即目标）是服务提供者 (SP)。在 HTML 中，有一个提交表单的 JavaScript onLoad 事件，因此最终效果是用户被自动从 IdP 带到 SP，SAML 响应在手。

唯一一次用户必须点击任何东西来提交表单是如果他们禁用了 JavaScript。在这种情况下，SAML 实现通常会提供带有按钮的消息，以便在`<noscript>`标签中按下。

有关更多详细信息，请参阅[我几年前写的这篇文章](http://www.oracle.com/technetwork/java/lightbulb-140176.html)- 但请注意，“灯泡”现在早已过时 - 对于 PHP SAML，请参阅[simpleSAMLphp](http://rnd.feide.no/simplesamlphp)。

很遗憾您的客户想要使用 CA SiteMinder - 开源[OpenAM](http://forgerock.com/openam.html)（以前称为 OpenSSO）很容易做到这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-12-07T15:59:47.000

[这篇文章](https://web.archive.org/web/20120122063550/http://support.onelogin.com/entries/20186386)解释的很好。也有针对不同平台的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T12:24:12.030

如果 Siteminder 是依赖方，那么您需要编写一个自定义代理来获取 SAML 工件并创建一个 SM-Session。否则，您将需要购买已构建此功能的产品。

# exchangewebservices - Exchange Web 服务和属性集

> ID：806132
> 
> 赞同：6
> 
> 时间：2009-04-30T09:38:54.660
> 
> 标签：exchangewebservices, ews-managed-api

我需要通过调用 BPOS 中的 Exchange Web 服务来检索日历信息。我正在使用 a`CalendarView`来`PropertySet`检索尽可能少的数据。但是，属性集似乎是有限的。我需要`EmailAddress`进行日历约会的那个，所以我想我可以`AppointmentSchema.Organizer`在`PropertySet`.

在获取整个约会时，我可以通过`appt.Organizer.EmailAddress`. 但是下面的代码`Organizer.EmailAddress`总是空的。我启用了跟踪并检查了它，只`Organizer.Name`发送了属性，没有别的。有没有人有关于如何`EmailAddress`在使用时获得的解决方案`PropertySet`？

```
CalendarView view = new CalendarView(dtFrom, dtTo);
view.PropertySet = new PropertySet(ItemSchema.Subject);
view.PropertySet.Add(ItemSchema.Id);
view.PropertySet.Add(AppointmentSchema.Start);
view.PropertySet.Add(AppointmentSchema.End);
view.PropertySet.Add(AppointmentSchema.Organizer); // This should contain EmailAddress but it doesn't

Mailbox mailbox = new Mailbox("myemail@test.ab");
FolderId id = new FolderId(WellKnownFolderName.Calendar, mailbox);
CalendarFolder folder = CalendarFolder.Bind(service, id);
FindItemsResults<Appointment> findResults = folder.FindAppointments(view); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-07-20T18:25:27.000

这应该有效（对我有用）：

```
service.FindAppointments(WellKnownFolderName.Calendar, new CalendarView(start, end)).Where(s => DateTime.Now < s.Start);
service.LoadPropertiesForItems(appointments, PropertySet.FirstClassProperties); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-04-08T07:22:24.643

据我所知，EWS 在填充完整的 EmailAddress 详细信息时，无论是在“组织者的约会”还是“EmailMessage.From”等其他内容中，都存在一些问题。当您查询*多个*项目时，不会完全填充 EmailAddress 属性。例如使用以下 API：

```
Folder.FindItems
ExchangeService.FindAppointments 
```

我发现*只有*EmailAddress 字段中的显示名称被填充。

为了让 EmailAddress 完全填充，我发现我需要加载/绑定到特定项目并指定相关的 EmailAddress 属性，例如 AppointmentSchema.Organizer 在您的情况下。因此，尽管您指定要加载的属性完全相同，但您正在使用单个项目调用而不是批量查询进行加载。例如使用：

```
ServiceObject.Load 
```

这对于 Appointment 和 EmailMessage 都可用，因为它们都派生自 ServiceObject。使用 Item.Bind 并定义适当的属性集也应该有效。

顺便说一句，我在查看此处提到的 EwsEditor 的代码时发现了这一点：

[http://blogs.msdn.com/webdav_101/archive/2009/11/10/ews-has-more-happy-now-ews-managed-api-and-ewseditor.aspx](http://blogs.msdn.com/webdav_101/archive/2009/11/10/ews-has-more-happy-now-ews-managed-api-and-ewseditor.aspx)

EwsEditor 的可用性相当糟糕，代码需要一些搜索才能弄清楚，但至少它确实显示了使用许多 API 的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:20:01.720

```
service.FindAppointments(WellKnownFolderName.Calendar, new CalendarView(start, end)).Where(s => DateTime.Now < s.Start);
service.LoadPropertiesForItems(appointments, PropertySet.FirstClassProperties); 
```

它对我有用。

# c# - 从查询字符串中获取 U+fffd/65533 而不是特殊字符

> ID：806133
> 
> 赞同：1
> 
> 时间：2009-04-30T09:39:07.997
> 
> 标签：c#, .net, flash, encoding, url-encoding

我有一个 C# .net web 项目，它的全球化标签设置为：

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="nb-no" uiCulture="no"/> 
```

当这个 URL 是 Fl​​ash 应用程序时（在浏览器中手动输入 URL 时会遇到同样的问题）：c_product_search.aspx?search=kjøkken（或者：c_product_search-aspx?search=kj%F8kken

两者都返回以下字符代码：

```
k U+006b 107
j U+006a 106
� U+fffd 65533
k U+006b 107
k U+006b 107
e U+0065 101
n U+006e 110 
```

我对字符编码不太了解，但似乎 ø 被赋予了 unicode 替换字符，对吧？

我试图将全球化标签更改为：

```
<globalization requestEncoding="iso-8859-1" responseEncoding="utf-8" culture="nb-no" uiCulture="no"/> 
```

这使得请求工作。但是，现在，我页面上的其他搜索停止工作。

我还尝试了以下类似结果：

```
NameValueCollection qs = HttpUtility.ParseQueryString(Request.QueryString.ToString(), Encoding.GetEncoding("iso-8859-1"));
string search = (string)qs["search"]; 
```

我应该怎么办？

亲切的问候，

尼泰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-02T13:42:16.650

问题来自 Firefox/Asp.Net 的组合。当您在 Firefox 的地址栏中手动输入 URL 时，如果 url 包含法语或瑞典语字符，Firefox 将默认使用“ISO-8859-1”对 url 进行编码。

但是当asp.net收到这样的url时，它认为它是utf-8编码的......并且编码的字符变成了“U+fffd”。我在 asp.net 中找不到检测 url 是“ISO-8859-1”的方法。Request.Encoding 设置为 utf-8 ... :(

存在几种解决方案：

*   放入`<globalization requestEncoding="iso-8859-1" responseEncoding="iso-8859-1"/>`您的 Web.config。但是您可能会遇到其他问题，并且您的应用程序将不再是标准的（它不适用于日语等语言）......无论如何，我更喜欢使用 UTF-8 ！

*   在 Firefox 中转到 about:config 并将值设置`network.standard-url.encode-query-utf8`为 true。现在它将为您工作（Firefox 将使用 utf-8 对您的所有 url 进行编码）。但不是给别人...

*   我能想到的最糟糕的解决方案是用代码处理这个问题。如果默认解码不起作用，我们使用 iso8859-1 重新解析 QueryString ：

    ```
    string query = Request.QueryString["search"];
    if (query.Contains("%ufffd"))
        query = HttpUtility.ParseQueryString(Request.Url.Query, Encoding.GetEncoding("iso-8859-1"))["search"];
    query = HttpUtility.UrlDecode(query); 
    ```

它适用于法文、英文或日文的超链接和手动输入的网址。但我不知道它将如何处理其他编码，如 ISO8859-5（俄语）......

有没有人有更好的解决方案？

这只解决了手动输入url的问题。在您的超链接中，不要忘记在服务器上使用 HttpUtility.UrlEncode 对 url 参数进行编码，或者在 javascript 代码上使用 encodeURIComponent 。并使用 HttpUtility.UrlDecode 对其进行解码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-01T19:17:40.243

```
 public string GetEncodedQueryString(string key)
    {
        string query = Request.QueryString[key];
        if (query != null)
            if (query.Contains((char)0xfffd))
                query = HttpUtility.ParseQueryString(Request.Url.Query, Encoding.GetEncoding("iso-8859-1"))[key];
        return query;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T14:10:44.830

如果应用程序期望 URL 编码的请求基于 UTF-8，则字符“ `ø`”应该是“ `%C3%B8`”，而不是“ `%F8`”。无论您使用什么函数来转义/编码该请求，您可能都需要将底层字符编码的名称“UTF-8”传递给它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T09:50:13.963

我认为您的问题出在闪存上，而不是.net。它以一种奇怪的方式发送特殊字符。尝试在将搜索字符串发送到服务器之前对其进行 urlencode。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T12:45:34.930

事实证明，ActionScript 2.0 将发送使用 UTF-8 编码/转义的 URL，而 ActionScript 3.0 使用 ISO-8859-1。如果在 URL 中指定了编码，则解决此问题的方法是更改​​ Global.asax 中的 Request.Encoding 值：

```
void Application_BeginRequest(object sender, EventArgs e)
{
    HttpContext ctx = HttpContext.Current;

    // encoding specified?
    if (!String.IsNullOrEmpty(Request["encoding"]))
    {
        ctx.Request.ContentEncoding = System.Text.Encoding.GetEncoding(ctx.Request["encoding"]);
    }        
} 
```

可以做得不同吗？

问候， 尼泰克

# gmail - 使用php从gmail联系人导入联系人列表的问题

> ID：806136
> 
> 赞同：1
> 
> 时间：2009-04-30T09:39:30.057
> 
> 标签：gmail

我正在尝试使用 libgmailer.php 从 gmail 导入联系人列表，但出现此错误。

```
Fail to connect because: Gmail: Invalid request. (libgmailer: Gmail seems to have changed the URL again.) 
```

谁能告诉我我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T09:41:44.373

谷歌现在有一个 API 来获取信息。[http://code.google.com/apis/contacts/](http://code.google.com/apis/contacts/)试图从屏幕上抓取数据充其量是过时的。

# java - nextLine() 在 for 循环后不起作用

> ID：806139
> 
> 赞同：0
> 
> 时间：2009-04-30T09:40:50.070
> 
> 标签：java

有谁知道为什么我`nextLine()`在以下代码中的 for 循环后无法工作？它总是跳过`nextLine()`并直接进入`if`语句。

```
int[] a = new int[3]

for(int i=0; i<3;i++)
{
  a[i] = nextInt();
}

String b = nextLine();

if(b == "go")
{
  .......
}
else
{
  ..... 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T17:59:31.413

I am guessing that maybe what you are doing is asking for the user to input the integers and then press enter. When it parses the integers, it just parses and removes the integers. But of course the newline that they pressed is still in the stream. And then when you ask for `nextLine()`, it returns immediately because there is already a line in the stream (the one that ends in the newline that was pressed for the integers). And maybe you had actually expected the `nextLine()` to wait for an additional line after the integers had been entered, but that is not what is happening. Is this right?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T09:43:16.130

不工作是什么意思？你的意思是说 nextLine() 方法没有被调用。根据您粘贴的代码，它将 100% 调用 nextLine() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T09:46:43.627

涉及的语句`nextLine`应该总是在那里执行（除非抛出异常）。您没有显示`nextLine`. 你确定它没有被执行。一些`System.err.println("blah")`分散的可能会有所帮助。

顺便说一句：字符串比较几乎可以肯定是`b.equals("go")`. If`b`可能是`null`明确检查或编写表达式`"go".equals(b)`。

# math - 如何在 Visual C++ 2008 中访问数学常量（例如 M_PI）？

> ID：806145
> 
> 赞同：23
> 
> 时间：2009-04-30T09:42:29.770
> 
> 标签：math, visual-c++, constants

我想在 Visual C++ 2008 中使用数学常量，例如 M_PI 和 M_E。我假设它们是在 cmath 标头中定义的。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-04-30T09:49:35.430

[他们是](http://msdn.microsoft.com/en-us/library/4hwaceh6(v=vs.90).aspx)，但你也需要`#define _USE_MATH_DEFINES`在你之前`#include <cmath>`

# ruby-on-rails - 对 AssetTagHelper 进行自定义更改到插件中

> ID：806149
> 
> 赞同：0
> 
> 时间：2009-04-30T09:43:44.553
> 
> 标签：ruby-on-rails, plugins

我编写了一些自定义代码，对 ActionView::Helpers::AssetTagHelper 中的一些方法进行了更改，例如：

```
module ActionView
  module Helpers
    module AssetTagHelper
      alias old_existing_method existing_method

      def existing_method
        puts "Does foobar"
        return old_existing_method
      end
    end
  end
end 
```

现在通常我会将此代码保留在 RAILS_ROOT/config/initializers/asset_helper_overrides.rb 这按预期工作。

现在我想把它变成一个插件。

我将此文件复制到插件位置，并且我需要在 init.rb 文件中使用它。但是，这似乎不起作用。我不确定为什么这不起作用。

我猜可能是因为在需要 ActionView::Helpers 之前需要该文件。没有把握。

有人可以帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T12:37:22.093

我建议为此创建一个模块，并将您的模块包含在帮助程序中。这是一个例子：

```
module AssetTagExtensions
  def self.included(base)
    base.alias_method_chain :existing_method, :added_cleverness
  end

  def existing_method_with_added_cleverness
    puts "Does foobar"
    existing_method_without_added_cleverness
  end
end 
```

然后，在您的 init.rb 文件中，您应该执行以下操作：

```
ActionView::Helpers::AssetTagHelper.module_eval do
  include AssetTagExtensions
end 
```

重要的是在`ActionView::Helpers::AssetTagHelper`类上调用 module_eval（或发送）而不是重新打开它，以确保您不会阻止它正确加载。

# python - 如何在 Python 中散列一个大对象（数据集）？

> ID：806151
> 
> 赞同：27
> 
> 时间：2009-04-30T09:43:57.253
> 
> 标签：python, hash, numpy, sha1, pickle

我想计算一个包含机器学习数据集的 Python 类的哈希值。哈希是用来缓存的，所以我在想`md5`or `sha1`。问题是大部分数据都存储在 NumPy 数组中；这些不提供`__hash__()`成员。目前我`pickle.dumps()`为每个成员做一个并根据这些字符串计算一个哈希值。但是，我发现以下链接表明同一个对象可能导致不同的序列化字符串：

*   [无哈希值因机器而异](http://www.gossamer-threads.com/lists/python/python/735907)
*   [Pickle.dumps 不适合散列](http://www.aminus.org/blogs/index.php/2007/11/03/pickle_dumps_not_suitable_for_hashing?blog=2)

为包含 Numpy 数组的 Python 类计算哈希的最佳方法是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-04-30T10:42:19.843

感谢 John Montgomery，我想我找到了一个解决方案，而且我认为它比将可能*巨大的*数组中的每个数字转换为字符串的开销更少：

我可以创建数组的字节视图并使用它们来更新哈希。不知何故，这似乎给出了与使用数组直接更新相同的摘要：

```
>>> import hashlib
>>> import numpy
>>> a = numpy.random.rand(10, 100)
>>> b = a.view(numpy.uint8)
>>> print a.dtype, b.dtype # a and b have a different data type
float64 uint8
>>> hashlib.sha1(a).hexdigest() # byte view sha1
'794de7b1316b38d989a9040e6e26b9256ca3b5eb'
>>> hashlib.sha1(b).hexdigest() # array sha1
'794de7b1316b38d989a9040e6e26b9256ca3b5eb' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-30T10:17:59.403

数组中数据的格式是什么？您不能只遍历数组，将它们转换为字符串（通过一些可重现的方式），然后通过更新将其输入您的散列吗？

例如

```
import hashlib
m = hashlib.md5() # or sha1 etc
for value in array: # array contains the data
    m.update(str(value)) 
```

不要忘记尽管 numpy 数组不会提供`__hash__()`，因为它们是可变的。因此，请注意不要在计算哈希后修改数组（因为它将不再相同）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-03-28T21:27:04.053

有一个用于记忆函数的包，它使用 numpy 数组作为输入[joblib](http://packages.python.org/joblib/memory.html)。从[这个](https://stackoverflow.com/questions/5362781/numpy-ndarray-memoization)问题中找到。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-28T10:50:28.247

使用 Numpy 1.10.1 和 python 2.7.6，如果数组是 C 连续的（如果不是，则使用），您现在可以使用 hashlib 简单地散列 numpy 数组`numpy.ascontiguousarray()`，例如

```
>>> h = hashlib.md5()
>>> arr = numpy.arange(101)
>>> h.update(arr)
>>> print(h.hexdigest())
e62b430ff0f714181a18ea1a821b0918 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-03-28T19:14:09.130

这是我在[水罐](http://luispedro.org/software/jug "水壶主页")中的做法（回答时为 git HEAD）：

```
e = some_array_object
M = hashlib.md5()
M.update('np.ndarray')
M.update(pickle.dumps(e.dtype))
M.update(pickle.dumps(e.shape))
try:
    buffer = e.data
    M.update(buffer)
except:
    M.update(e.copy().data) 
```

原因是它`e.data`仅适用于某些数组（连续数组）。同样的事情`a.view(np.uint8)`（如果数组不连续，则会失败并出现非描述性类型错误）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-18T19:08:40.357

最快的似乎是：

> > > 哈希（迭代（a））

a 是一个 numpy ndarray。

显然不安全散列，但它应该有利于缓存等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-22T08:29:55.553

array.data 始终是可散列的，因为它是一个缓冲区对象。容易:)（除非您关心具有完全相同数据的不同形状数组之间的差异等。（即这是合适的，除非形状、字节顺序和其他数组“参数”也必须计入散列）

# c# - 有没有办法在c#中获得两组对象之间的差异

> ID：806152
> 
> 赞同：25
> 
> 时间：2009-04-30T09:43:58.360
> 
> 标签：c#, .net, linq, hashset

我想得到 c# 中两组整数之间的区别。给定 s1 和 s2 我想返回那些在 s1 中而不是在 s2 中的整数。我可以做一些事情，例如：

```
 List<int> s1 = new List<int>();
    List<int> s2 = new List<int>();

    foreach (int i in s1)
    {
        if (s1.Contains(i))
        {
            //
        }
        else
        {
            //
        }
    } 
```

但我想知道是否有人可以指出任何更清洁的东西。我想做一些事情，比如

```
List<int> omitted = s1.Difference(s2); 
```

不确定是否存在任何人都可以指出的现有方法或 LINQ 构造？谢谢你。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-04-30T09:54:10.147

```
IEnumerable<T> a, b;

var added = a.Except(b);
var removed = b.Except(a); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-04-30T09:45:49.510

我想你想要[HashSet.Except](http://msdn.microsoft.com/en-us/library/bb908036.aspx)。也就是不使用Lists，使用HashSets，然后操作就可以了。如果您所代表的确实是一个“集合”，那么这是一种更好的类型。（如果您已经有一个列表，您可以从中创建一个“新 HashSet”。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-17T22:49:17.727

另一个有用的 API，得到对称的差异：

[HashSet.SymmetricExceptWith()](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.hashset-1.symmetricexceptwith)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-30T09:49:48.893

```
List<int> s1 = new List<int>();
List<int> s2 = new List<int>();

return sl.FindAll( i => !s2.Contains(i) ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T09:49:42.573

```
来自 s1 中的 x
在哪里 ！s2.包含（x）
选择 x

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-28T15:03:08.167

当您需要找到两个 IEnumerable 之间的无序差异时，这两种扩展方法可能会派上用场（它或多或少与 leppie wrapper 对扩展方法给出的答案相同）：

```
public class EnumerableDifferences<T>
{
    public IEnumerable<T> Added { get; }
    public IEnumerable<T> Removed { get; }

    public EnumerableDifferences(IEnumerable<T> added, IEnumerable<T> removed)
    {
        Added = added;
        Removed = removed;
    }
}

public static class EnumerableExtensions
{
    public static HashSet<TSource> ToHashSet<TSource>(this IEnumerable<TSource> source, IEqualityComparer<TSource> comparer)
    {
        return new HashSet<TSource>(source, comparer);
    }

    public static IEnumerable<TSource> ExceptBy<TSource, TKey>(this IEnumerable<TSource> first, IEnumerable<TSource> second, Func<TSource, TKey> keySelector, IEqualityComparer<TKey> keyComparer = null)
    {
        return first
            .ExceptBy(keySelector, second.Select(keySelector), keyComparer);
    }

    public static IEnumerable<TSource> ExceptBy<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey> keySelector, IEnumerable<TKey> keys, IEqualityComparer<TKey> keyComparer = null)
    {
        var secondKeys = keys.ToHashSet(keyComparer);

        foreach (var firstItem in source)
        {
            var firstItemKey = keySelector(firstItem);

            if (!secondKeys.Contains(firstItemKey))
            {
                yield return firstItem;
            }
        }
    }

    public static EnumerableDifferences<TSource> DifferencesBy<TSource, TKey>(this IEnumerable<TSource> first, IEnumerable<TSource> second, Func<TSource, TKey> keySelector, IEqualityComparer<TKey> keyComparer = null)
    {
        keyComparer = keyComparer ?? EqualityComparer<TKey>.Default;

        var removed = first.ExceptBy(second, keySelector, keyComparer);
        var added = second.ExceptBy(first, keySelector, keyComparer);

        var result = new EnumerableDifferences<TSource>(added, removed);

        return result;
    }

    public static EnumerableDifferences<TSource> Differences<TSource>(this IEnumerable<TSource> first, IEnumerable<TSource> second, IEqualityComparer<TSource> comparer = null)
    {
        return first
            .DifferencesBy(second, x => x, comparer);
    }
}

public static class Program
{
    public static void Main(params string[] args)
    {
        var l1 = new[] { 'a', 'b', 'c' };
        var l2 = new[] { 'a', 'd', 'c' };

        var result = l1.Differences(l2);

        Console.ReadKey();
    }
} 
```

# c - 无堆栈 VM 实现会出现哪些 C 集成问题？

> ID：806154
> 
> 赞同：7
> 
> 时间：2009-04-30T09:44:07.160
> 
> 标签：c, binding, vm-implementation, stackless

我所说的无堆栈VM是指在堆上维护自己的堆栈而不是使用系统“C-stack”的实现。这有很多优点，如延续和可序列化状态，但在涉及 C 绑定时也有一些缺点，尤其是 C-VM-C 类型的回调（或 VM-C-VM）。

问题是这些缺点到底是什么？任何人都可以举一个真正问题的好例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T10:40:41.470

听起来您已经熟悉了一些缺点和优点。

其他一些：a）即使底层实现没有任何支持，也可以支持适当的尾调用优化 b）更容易构造诸如语言级别“堆栈跟踪”之类的东西 c）更容易添加适当的延续，因为你指出

我最近用 C# 编写了一个简单的“Scheme”解释器，它最初使用 .NET 堆栈。然后我重写了它以使用显式堆栈 - 所以以下内容可能会对您有所帮助：

第一个版本使用隐式 .NET 运行时堆栈...

最初，它只是一个类层次结构，不同的形式（Lambda、Let 等）是以下接口的实现：

```
// A "form" is an expression that can be evaluted with
// respect to an environment
// e.g.
// "(* x 3)"
// "x"
// "3"
public interface IForm
{
    object Evaluate(IEnvironment environment);
} 
```

IEnvironment 看起来如您所料：

```
/// <summary>
/// Fundamental interface for resolving "symbols" subject to scoping.
/// </summary>
public interface IEnvironment
{
    object Lookup(string name);
    IEnvironment Extend(string name, object value);
} 
```

为了向我的 Scheme 解释器添加“内置”，我最初有以下界面：

```
/// <summary>
/// A function is either a builtin function (i.e. implemented directly in CSharp)
/// or something that's been created by the Lambda form.
/// </summary>
public interface IFunction
{
    object Invoke(object[] args);
} 
```

那是它使用隐式 .NET 运行时堆栈的时候。代码肯定更少，但不可能添加诸如适当的尾递归之类的东西，最重要的是，我的解释器在运行时错误的情况下能够提供“语言级别”堆栈跟踪是很尴尬的。

所以我将它重写为有一个显式的（堆分配的）堆栈。

我的“IFunction”接口必须更改为以下内容，这样我才能实现“map”和“apply”之类的东西，它们会回调到 Scheme 解释器中：

```
/// <summary>
/// A function that wishes to use the thread state to
/// evaluate its arguments. The function should either:
/// a) Push tasks on to threadState.Pending which, when evaluated, will
///   result in the result being placed on to threadState.Results
/// b) Push its result directly on to threadState.Results
/// </summary>
public interface IStackFunction
{
    void Evaluate(IThreadState threadState, object[] args);
} 
```

IForm 更改为：

```
public interface IForm
{
    void Evaluate(IEnvironment environment, IThreadState s);
} 
```

其中IThreadState如下：

```
/// <summary>
/// The state of the interpreter.
/// The implementation of a task which takes some arguments,
/// call them "x" and "y", and which returns an argument "z",
/// should follow the following protocol:
/// a) Call "PopResult" to get x and y
/// b) Either
///   i) push "z" directly onto IThreadState using PushResult OR
///   ii) push a "task" on to the stack which will result in "z" being
///       pushed on to the result stack.
/// 
/// Note that ii) is "recursive" in its definition - that is, a task
/// that is pushed on to the task stack may in turn push other tasks
/// on the task stack which, when evaluated, 
/// ... ultimately will end up pushing the result via PushResult.
/// </summary>
public interface IThreadState
{
    void PushTask(ITask task);
    object PopResult();
    void PushResult(object result);
} 
```

ITask 是：

```
public interface ITask
{
    void Execute(IThreadState s);
} 
```

我的主要“事件”循环是：

```
ThreadState threadState = new ThreadState();
threadState.PushTask(null);
threadState.PushTask(new EvaluateForm(f, environment));
ITask next = null;

while ((next = threadState.PopTask()) != null)
    next.Execute(threadState);

return threadState.PopResult(); // Get what EvaluateForm evaluated to 
```

EvaluateForm 只是一个在特定环境中调用 IForm.Evaluate 的任务。

就个人而言，我发现这个新版本从实现的角度来看更“好”——很容易获得堆栈跟踪，很容易让它实现完整的延续（虽然......我还没有这样做——需要使我的“堆栈”持久链表而不是使用 C# 堆栈，并且 ITask “返回”新的 ThreadState 而不是对其进行变异，以便我可以有一个“调用继续”任务）......等等等等。

基本上，您对底层语言实现的依赖较少。

关于我能找到的唯一缺点是性能......但就我而言，它只是一个解释器，所以我并不关心性能。

我还将向您指出这篇非常好的文章，该文章介绍了将递归代码重写为带有堆栈的迭代代码的好处，作者是 KAI C++ 编译器的作者之一：[考虑递归](http://www.ddj.com/architect/184404036)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T16:38:07.507

在与 Steve Dekorte（Io 编程语言的作者）和 Konstantin Olenin 进行电子邮件交谈后，我发现了一个问题和一个（部分）解决方案。想象一下从 VM 到 C 函数的调用，它回调 VM 方法。在 VM 执行回调期间，VM 状态的一部分位于 VM 之外：在 C 堆栈和寄存器中。如果您此时保存 VM 状态，则可以保证下次加载 VM 时无法正确恢复状态。

解决方案是将 VM 建模为消息接收参与者：VM 可以向本机代码发送异步通知，而本机代码可以向 VM 发送异步通知。也就是说，在单线程环境中，当 VM 获得控制权时，不会在其外部存储任何其他状态（与 VM 运行时无关的数据除外）。

这并不意味着您可以在任何情况下正确恢复 VM 状态，但至少，您可以在其之上构建自己的可靠系统。

# c# - 写一个纸牌游戏

> ID：806158
> 
> 赞同：1
> 
> 时间：2009-04-30T09:45:12.350
> 
> 标签：c#, windows-mobile, playing-cards

我希望使用 .Net C# 为 Windows Mobile 6 编写纸牌游戏。是否有一个可以使用的包含卡片的良好托管库？例如图像，甲板等。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T09:57:36.550

[有史以来第一个 SVG 卡片组](http://david.bellot.free.fr/svg-cards/)

# linq - 切换到 LINQ

> ID：806159
> 
> 赞同：6
> 
> 时间：2009-04-30T09:45:13.583
> 
> 标签：linq, oop

我正在考虑花时间学习和使用 LINQ to SQL，但经过多年建议不要嵌入 SQL 的最佳实践，我很难改变范式。

为什么现在似乎可以接受在编译代码中嵌入查询？在某些方面，这对我来说几乎是倒退了一步。

切换到 LINQ 后，是否有人遇到过修复查询/编译/部署周期的问题？

我想我仍然可以等待完成的实体框架。

你怎么看？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-30T10:13:45.857

Linq to Sql 的优势在于它并没有真正将查询嵌入到编译代码中——不是真的。Linq 语句意味着您的 .Net 代码实际上具有构建嵌入的 Sql 语句所需的逻辑，而不是原始 Sql。

让 .Net 代码直接转换为 Sql 来执行确实很有意义，而不是一长串带有相关文档的存储过程。Linq 方式更容易维护和改进。

我认为我不会将现有项目切换到 Linq - 实际上它是整个数据层的替代品，它可以改变对该层的所有访问方式。除非您从非常相似的模型转换，否则成本对于任何潜在收益来说都太高了。

Linq to Sql 的真正强大之处在于快速创建新应用程序——它允许您非常快速地创建数据层代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-30T10:37:46.140

我理解你的意思，这确实看起来有点倒退......

实际上，我可能会远离 LINQ to SQL 并更多地关注 LINQ to Entities，您的实体为您的概念数据模型建模，我个人觉得在我的代码中嵌入查询而不是概念模型更舒服。实体框架将实际的物理模型从您那里抽象出来。

此链接（请原谅双关语）讨论 LINQ to Entities 和实体框架：http: [//msdn.microsoft.com/en-us/library/bb386992.aspx](http://msdn.microsoft.com/en-us/library/bb386992.aspx)

这是一篇有趣的文章，讨论了两种方法的优缺点：http: [//dotnetaddict.dotnetdevelopersjournal.com/adoef_vs_linqsql.htm](http://dotnetaddict.dotnetdevelopersjournal.com/adoef_vs_linqsql.htm)

**编辑**另一个想法，如果你不想等待 EF，看看 NHibernate，你也可以 LINQ 到那个......见[http://www.hookdonlinq.com/LINQToNHibernate.ashx](http://www.hookedonlinq.com/LINQToNHibernate.ashx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T10:28:03.823

您需要将 LINQ to SQL 视为自己直接编写 SQL 之上的抽象。如果你能解决这个问题，那么你就朝着正确的方向迈出了一步。您还需要放弃一些长期持有的信念，例如编译的存储过程总是更快，SQL 帐户不应该具有数据读取器/写入器权限。

我发现，只要有明确的 DAL，并且您只是在不影响使用代码的合同的情况下更改实现，就可以开始逐步将现有解决方案转向 LINQ to SQL。参考列表是一个简单的候选者，因为它们影响小，只读数据集。如果您已经手动对它们进行了编码以对数据库进行建模，那么如果改造是潜在的模棱两可的类名，那么您需要注意的主要事情是。

鉴于将 LINQ to SQL 带入大型企业（自 CTP 时代以来）的事后诸葛亮，我会立即再做一次。它并不完美，也存在一些问题，但有巨大的好处，特别是在开发速度和可维护性方面。这是一个新的范式，绝对是向前迈出的一步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T11:43:50.213

LINQ to SQL 的实现不仅适用于 SQL Server 数据库，因此非 SQL Server 开发人员也可以利用这种高效的 ORM。我们已经添加了对查询级别的LaodWith( ) 的支持并扩展了错误处理。我们还计划支持所有三种继承模型（TPH、TPT、TPC）和关键字段生成。您可以在[此处找到支持的数据库列表](http://www.devart.com/dotconnect)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-01T22:16:19.220

我不认为它是在你的代码中嵌入 SQL，而不是在你的代码中嵌入一个 Stored Proc 名称。无论如何，对 Proc 的更改通常都会涉及对代码的更改。例如，您通常需要添加新的 in/out 参数或更新 getter/setter 方法以引用新列。

它所做的是消除了编写两倍代码以将代码中的属性和方法与数据库中的过程和列对齐的大量工作。

# iphone - Interface Builder 的“Simulate Interface”和“Build and Go in Xcode”菜单命令

> ID：806161
> 
> 赞同：0
> 
> 时间：2009-04-30T09:45:18.640
> 
> 标签：iphone, interface-builder

如何将“Simulate Interface”和“Build and Go in Xcode”菜单项变成可用于 iPhone 开发的东西？现在，Simulate 命令以黑屏显示模拟器，并且 Build & Go 给出“No architectures to compile for (ONLY_ACTIVE_ARCH=YES, active arch=i386, VALID_ARCHS=armv6)”。错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-14T05:53:08.513

将您的 UIView 嵌套在 UIWindow 中，您的控件就会显示出来。

除了 UIImageViews 和放置在按钮内的图像之外的所有内容。

# javascript - JSLint：在定义错误之前使用函数

> ID：806163
> 
> 赞同：75
> 
> 时间：2009-04-30T09:45:31.803
> 
> 标签：javascript, jslint

我正在使用 JSLint 来验证我的大多数外部 Javascript 文件，但我得到的最大错误数来自于在定义之前使用的函数。

**这真的是我应该担心的问题**吗？

似乎 Firefox、IE7 和 Chrome 不在乎。根据 JSLint 的说法，像流行的`init()`（我经常使用的）这样的函数通常贴在顶部，因为这对我来说很有意义（我喜欢假装它类似于），需要将其推到文件的底部。`main()`

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-03-01T07:35:32.293

由于这是评价最高的 google hit 并且其他人可能一开始在 jslint 工具中看不到它，因此有一个名为“Tolerate misordered definitions”的选项允许您隐藏此类错误。

```
/*jslint latedef:false*/ 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2009-04-30T10:47:55.510

如果使用`function`关键字声明函数，则可以在声明之前使用它们。但是，如果您通过其他方法声明函数（例如使用函数表达式或`Function`构造函数），则必须在使用之前声明该函数。有关更多信息，请参阅Mozilla 开发人员网络上的[此页面。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions#Function_constructor_vs._function_declaration_vs._function_expression)

假设您使用`function`关键字声明所有函数，我认为这将成为一个编程风格的问题。就个人而言，我更喜欢以一种看起来合乎逻辑的方式来构建我的函数，并使代码尽可能地可读。例如，像你一样，我会`init`在顶部放置一个函数，因为它是一切的起点。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2014-05-28T16:08:34.603

如果您使用的是 jshint，您可以设置`latedef`为`nofunc`，这将仅忽略后期函数定义。

文档 - [http://www.jshint.com/docs/options/#latedef](http://www.jshint.com/docs/options/#latedef)

示例用法：

```
/* jshint latedef:nofunc */

noop();

function noop() {} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-07-18T15:09:38.727

从 jslint 的网站 ( [http://www.jslint.com/lint.html](http://www.jslint.com/lint.html) )，您可以了解 /*global*/ 指令，该指令允许您设置假定在其他地方声明的变量。

这是一个示例（将其放在文件顶部）：

```
/*global var1,var2,var3,var4,var5*/ 
```

根据我的经验，实际上并不需要 :true :false ，但从我在网站上阅读的内容来看，它似乎是推荐的。

确保初始全局语句与 位于同一行`/*`，否则它会中断。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-21T16:58:46.877

要为所有文件禁用此警告`jshint`，请将其放在您的`.jshintrc`文件中：

```
{
   "latedef": false
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-06T04:16:45.693

在您的`.jshintrc`文件中，设置：

```
 "latedef": "nofunc", 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-21T03:45:20.280

很不幸，latedef 选项被删除了。当试图创建一个顶部有接口的“类”时，这是必不可少的，即

```
function SomeClass() {
   var self = this;
   self.func = func;

   function func {
      ...
   }
} 
```

这种风格很常见，但不会通过 jsLint，因为 func 在定义之前已“使用”。必须为每个“成员”功能使用全局是一件非常痛苦的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-04T14:35:50.993

您始终可以在顶部声明有问题的函数

例如：变量初始化；

....但是当您进一步了解真实定义时，您将不得不删除“var”：

初始化 = 函数（） { };

# flash - 一种使用 ActionScript 3.0 以编程方式生成背景的方法？

> ID：806164
> 
> 赞同：0
> 
> 时间：2009-04-30T09:45:32.443
> 
> 标签：flash, actionscript-3

我正在连接到一个 XML 后端来为 Flash 网站创建不同的“页面”。（我知道。）我想知道是否有一种方法可以以编程方式生成背景，该背景将自动成为每个“页面”中内容的正确高度。我的背景采用无缝平铺图形的形式。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T11:23:53.130

我不确定我是否理解。

如果你有 xml 生成页面，你不能有页面尺寸的属性吗？

例如

```
<pages>
<page title="bla bla" width="760" height="600">
<!-- content nodes etc. -->
</page>
</pages> 
```

您将从 xml 中获得正确的宽度、高度值。

至于瓷砖，请查看文档中的[beginBitmapFill()](http://livedocs.adobe.com/flash/9.0/main/00001895.html)方法。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T01:07:06.370

您还可以查看[Degrafa](http://www.degrafa.org/) 的[位图填充](http://www.degrafa.org/source/BitmapFill/BitmapFill.html)。

# asp.net-mvc - ASP.net MVC：在哪里保存应用程序数据？

> ID：806167
> 
> 赞同：3
> 
> 时间：2009-04-30T09:46:08.153
> 
> 标签：asp.net-mvc, singleton

我刚刚开始将应用程序移植到 ASP.net MVC，并且我有一个对象保存应用程序状态（它跟踪机器上运行的某些进程，根据需要启动和停止以及发送/接收 MSMQ 消息）。

我应该把这个对象放在哪里？在我当前的应用程序（基于 HttpListener）中，它是一个单例，但是我知道单例使测试变得困难。至少在 MVC 应用程序本身的上下文中，很难模拟或测试这个对象，而且无论如何它在应用程序之外都有自己的一组测试。但是，它可能需要用存根替换以进行测试。

该对象需要对多个控制器可用。我应该在哪里存储这个对象，我应该如何让它对控制器可用？在我见过的任何 ASP.net MVC 示例中，我从未见过这样的案例。

更新：

我想我需要解释为什么我不能将这些数据存储在数据库中。首先，我必须解释一下应用程序的作用：

该应用程序提供由许多“引擎”动态生成的图像，这些“引擎”是在服务器上运行的进程，通过 MSMQ 进行通信。让我们调用我正在询问有关 EngineManager 问题的对象。这个过程是这样的：

1.  客户端向服务器发送一个 XML 请求，给出要使用的“引擎”的名称，以及一些描述图像的参数。
2.  应用程序检查 EngineManager 以查看该引擎是否正在运行。如果没有，它会启动它。
3.  应用程序向引擎发布一条 MSMQ 消息并等待响应。
4.  应用程序将生成的图像发送回客户端。
5.  如果引擎在任何时候关闭或崩溃，应用程序必须意识到这一点，以便它可以在下一次对该引擎的请求时重新启动。
6.  当应用程序关闭时，所有引擎也会关闭。

有几个控制器处理这些请求，每个控制器的工作略有不同。它们都需要与同一个 EngineManager 通信，因为它也需要在某些情况下同步对其他资源的访问。

如您所见，它不是典型的数据库支持的网络服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T10:19:21.380

您应该将对象传递给每个`Controller`实例的构造函数，并且控制器操作方法应该都使用传递给`Controller`实例构造函数的对象实例。

ASP.NET MVC 附带的默认设置`ControllerFactory`不允许您执行此操作。但是，有一些免费的插件框架（我喜欢的一个是 Autofac）确实允许这种编程风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T10:30:23.727

如果您希望此对象可供所有用户使用，即它不是特定于会话的，您可以查看将其存储在应用程序状态中：

[http://msdn.microsoft.com/en-us/library/bf9xhdz4(VS.71).aspx](http://msdn.microsoft.com/en-us/library/bf9xhdz4(VS.71).aspx)

但是，应用程序状态有几个缺点，如上面链接的页面中列出的那样，因此在您走这条路之前，请确保这些问题不会影响您。一般来说，我会避开 Applciation 状态并将应用程序数据存储在后端数据库中。由于您不想走这条路线，因此应用程序状态对您来说可能没问题。

# java - SSO 对会话超时的影响

> ID：806169
> 
> 赞同：3
> 
> 时间：2009-04-30T09:47:06.653
> 
> 标签：java, windows, security, single-sign-on

我需要在 Windows 域和 J2EE Web 应用程序之间实现 SSO。

我一直在思考这会对 Web 应用程序的会话超时产生什么影响。我们有 2 小时的休息时间。

如果我们实现一个无缝的 SSO，那么我认为它可能会让用户感到困惑。

SSO 将使 Web 应用程序看起来立即可用。

我担心他们会开始填写表格然后去吃午饭（或其他东西）并在他们的会话超时后回来。但是，这可能不会立即明显发生，因为 SSO 只会再次签署它们（但现在有一个新会话）。

有没有人有这样的经历以及如何处理它？我们是否只需要实现某种形式的额外消息来告诉用户他们之前的会话已经超时并且他们的工作已经丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T10:01:35.293

我认为如果用户的会话被重置，你肯定需要弹出某种警报框。让他们单击消息上的“确定”并将他们重定向到主页。

另外，如果你按照我的想法去做，我认为 2 小时的超时听起来是个坏主意。您的意思是用户在会话超时之前有 2 个小时从登录到工作？设置类似 10 分钟的超时时间不是更有意义，但是每当用户在该会话中发送新请求时计时器就会重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T10:19:59.553

超时不是从登录开始测量的静态固定时间，而是对不活动的动态测量。

在我们拥有此功能的网站上，大约 10 分钟后，网页会返回登录页面（使用 JS），用户可以根据需要重新开始。

如果他们忙于一个漫长的过程，他们正在审查结果或其他事情，那么检查鼠标移动或类似的一些微妙的键，表明他们仍然很忙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T15:52:29.003

老问题，但万一有人遇到它：

努力在服务器会话中不存储任何状态。客户，很好；后端服务器持久性（如数据库），很好。只是没有任何东西会丢失。当用户被无缝地重新认证时，他们不会注意到这个开关。超时的持续时间变得无关紧要。

六年后的今天，这个答案实际上更加可行，因为有几个前端框架可以为您存储数据。您仍然可以在服务器上使用[Spring Security](http://projects.spring.io/spring-security/)（比如说），因为新会话的身份验证仍然存在；它应该即时重新生成您的安全信息（SecurityContext、UserDetails 等）。无论请求获取或发送数据，都应该“正常工作”。

# asp.net - ADO.NET Command.Prepare 和 SQL Server 2005

> ID：806171
> 
> 赞同：1
> 
> 时间：2009-04-30T09:48:33.467
> 
> 标签：asp.net

如果查询被重复调用，我想使用 ADO.NET Prepare 命令将提高性能。我知道 sql server 7.0 它将使用存储过程来准备命令，但是 SQL 2005 呢？任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T16:20:08.067

`Command.Prepare`应该在 2005 上使用相同的语法，但您不会注意到性能的改进，因为从 SQL2000 开始（这意味着这对 2005 也有效）命令由您的数据源自动优化，从而使对 SqlCommand 的 Prepare 调用变得多余。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:47:17.477

IIRC，“准备”部分不会在数据库连接中持续存在，并且由于大多数应用程序都使用数据库连接池。正如 JohnIdol 所提到的，这通常不值得费心。

# c# - 如何在 WPF 应用程序中使用 App.config 文件？

> ID：806174
> 
> 赞同：73
> 
> 时间：2009-04-30T09:49:28.003
> 
> 标签：c#, .net, wpf, configuration

我在我的 WPF 应用程序中创建了一个 App.config 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appsettings>
    <add key="xmlDataDirectory" value="c:\testdata"/>
  </appsettings>
</configuration> 
```

然后我尝试用这个读出值：

```
string xmlDataDirectory = ConfigurationSettings.AppSettings.Get("xmlDataDirectory"); 
```

但它说这是过时的，我应该使用我找不到的 ConfigurationManager，甚至在类视图中搜索。

有谁知道如何在 WPF 中使用这样的配置文件？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2009-04-30T09:56:39.937

您必须引用`System.Configuration`GAC 中的程序集。

的使用`ConfigurationManager`不是 WPF 特定的：它是访问任何类型应用程序的配置信息的特权方式。

有关详细信息，请参阅[Microsoft Docs -`ConfigurationManager`类](https://docs.microsoft.com/en-us/dotnet/api/system.configuration.configurationmanager)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-04-15T16:13:46.270

就我而言，我按照以下步骤操作。

应用程序配置

```
<configuration>  
   <startup> 
       <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>

 <appSettings>
   <add key="POCPublishSubscribeQueueName" value="FormatName:Direct=OS:localhost\Private$\POCPublishSubscribe"/>
 </appSettings>

</configuration> 
```

添加`System.Configuartion`到我的项目中。

`using System.Configuration`在顶部的文件中添加了语句。

然后使用了这个语句：

```
string queuePath = ConfigurationManager.AppSettings["POCPublishSubscribeQueueName"].ToString(); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-04-30T10:06:08.713

在您的`app.config`中，将您的 appsetting 更改为：

```
<applicationSettings>
    <WpfApplication1.Properties.Settings>
        <setting name="appsetting" serializeAs="String">
            <value>c:\testdata.xml</value>
        </setting>
    </WpfApplication1.Properties.Settings>
</applicationSettings> 
```

然后，在代码隐藏中：

```
string xmlDataDirectory = WpfApplication1.Properties.Settings.Default.appsetting.ToString() 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-02-14T22:13:00.233

您必须`System.Configuration`通过资源管理器引用（不仅是 append `using System.Configuration`）。然后你可以写：

```
string xmlDataDirectory = 
    System.Configuration.ConfigurationManager.AppSettings.Get("xmlDataDirectory"); 
```

用 VS2010 测试（感谢 www.developpez.net）。希望这可以帮助。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2010-10-29T18:06:06.770

您必须`System.configuration`在解决方案中添加对的引用。此外，包括`using System.Configuration;`. 完成此操作后，您将可以访问所有配置设置。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-04-09T02:51:03.897

这也有效

```
WpfApplication1.Properties.Settings.Default["appsetting"].ToString() 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-05-10T14:08:13.470

**`DotNetConfig.xsd`**您可以通过文件的属性将配置文件架构更改回`app.config`。要找到所需架构的目标，您可以按名称搜索它或创建一个 WinForms 应用程序，添加到项目配置文件，在它的属性中，您将找到文件的完整路径。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-07-22T22:44:20.937

我有一个类库 WPF 项目，我使用：

```
'Read Settings
Dim value as string = My.Settings.my_key
value = "new value"

'Write Settings
My.Settings.my_key = value
My.Settings.Save() 
```

# jquery - jquery ajax post阻塞表单提交

> ID：806184
> 
> 赞同：0
> 
> 时间：2009-04-30T09:51:39.280
> 
> 标签：jquery

场景：在 html 输入控件的 onblur 事件中，我将异步 http post 发送到资源 ietaspx。

我不在乎它是否会返回，但是如果用户单击提交，我希望表单提交。

我从使用我们的模拟器中看到的是，当我将 t.aspx 减慢到需要 10 秒（page_load Thread.Sleep(10000)）时，当我单击提交时，它会继续等待 10 秒的剩余时间然后提交。

我需要立即提交表格。下面是ajax代码片段

var _requestData = "{ " + "\"subject\": { " + "\"param1\": \"" + $("#param1").val() + "\", " + "\"param2 \": \"" + $("#param2").val() + "\" " + "}" + " }";

$.ajaxSetup({ url: "t.aspx", type: "POST", processData: false, contentType: "application/json", dataType: "json", success: sucessfulCallback, error: unsucessfulCallback });

$.ajax({ 数据：_requestData });

我也尝试过 var myAjax = $.ajax ..... 并在表单提交中调用 myAjax.abort() 。那里也没有运气。

任何帮助将非常感激...

问候大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T10:06:28.400

您没有提及您正在运行的 Jquery 版本。旧版本有一个已知错误，正如您所描述的那样：http: [//dev.jquery.com/ticket/2935](http://dev.jquery.com/ticket/2935)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T10:09:40.920

**在服务器端**，您需要检查用户是否仍然与服务器连接。通过使用以下命令。

```
if (!Response.IsClientConnected)
{
   // process user request
} 
```

# xml - XSD 模式允许字符串元素标记中的特殊/保留字符

> ID：806191
> 
> 赞同：1
> 
> 时间：2009-04-30T09:52:53.253
> 
> 标签：xml, parsing, xsd

在字符串元素标记中，如果 XML 解析器发现以下字符，它会*感到困惑*

'
"
<
>

&

（即假设公司名称已从数据库字段中检索到，它看起来像这样：“Smith & Sons”）

问题是 - 如果在元素中找到这些字符，您如何设计您的 XSD 以忽略这些字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T10:01:55.603

你不能让它忽略这些字符。

它们在 XML 中*无效*，因此需要转义或包装在 CDATA 部分中。*除非*您使用不正确的方式（即：字符串连接）构建XML，否则这些字符无法在 XML 中显示。

如果您使用适当的方式（某种 XML 库）构建您的 XML，这些字符将被它们的 XML 转义对应物透明地替换，并且没有解析器会抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T09:58:53.223

答案是你没有。

XML 内容的创建者应将它们放在 CDATA 部分中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T10:02:19.377

如果您从数据库中提取“Smith & Sons”，则在插入 XML 时应该对其进行转义

例如，上面将变成'Smith & 儿子们

对于上面的其他字符也是如此。

这将如何发生取决于您如何构建 XML 内容。如果使用诸如 DOM 之类的 API，那么这应该会自动发生。如果您手动组装 XML，那么您必须担心这一点（以及其他问题，如字符编码 - 这意味着使用 API 是这里的首选选项）。

# hibernate - Hibernate 复杂类型保存

> ID：806196
> 
> 赞同：1
> 
> 时间：2009-04-30T09:55:05.730
> 
> 标签：hibernate, enums

我需要持久化一个其属性之一是枚举的对象。整个结构必须保存在一个表中。枚举定义了可能的性别

`public enum Gender { MALE,FEMALE }`

主要课程是

`public Person { String name; Gender gender; }`

如果这个Person类要持久化在一个表中，hbm映射应该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T11:21:42.417

您没有提到您使用的是 Java 还是 .Net，但我将为您提供我为 .Net 找到的解决方案，因此您可以在需要时将其转换为 Java。我发现一篇文章建议使用泛型类型，它允许您将枚举声明为表中的字段作为文本，以便您可以在表中看到值的名称。

[点击我！](http://orand.blogspot.com/2006/12/generic-nhibernate-enum-string-mapping.html)

我稍微改变了我的以限制列的长度。

```
/// <summary>
/// This class allows enums to be stored as a string in the database
/// </summary>
/// <typeparam name="T">The Enum Type</typeparam>
public class EnumMapper<T> : EnumStringType
{
    /// <summary>
    /// The default constructor which defines that the maximum length of
    /// an enum string column in the datbase is 30 characters.
    /// </summary>
    public EnumMapper() : base(typeof(T), 30)
    {
    }
} 
```

这在很多方面对我很有用。如果您更改枚举中元素的顺序，它仍然有效，这也意味着您可以看到数据库中的值意味着什么，从而更容易编写临时查询！:)

# static - 静态库依赖

> ID：806197
> 
> 赞同：3
> 
> 时间：2009-04-30T09:55:22.000
> 
> 标签：static, dependencies

我在 Windows 平台上有一个静态库（.lib 文件），我想知道构建 lib 时 CRT 库的依赖版本。我没有 .lib 文件的源代码，有什么想法吗？

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T10:02:12.140

静态库没有那种依赖。构建库时，它不会以任何方式与运行时链接，它所知道的只是实现头文件中的函数声明，不提供任何版本信息。

但是，假设库是 MS 格式，您应该能够通过在文本编辑器中打开它来查看构建库的标志（在执行此操作之前进行备份）。您正在寻找这样的一行：

```
cl.exe cmd -nologo -MTd -W3 -Gm -GX -ZI -DWIN32 -D_DEBUG  (more stuff) 
```

-MTd 标志告诉您该库是使用多线程调试支持编译的。.

# macos - 如何解决 Mac Os x 上 iconv 的奇怪问题

> ID：806199
> 
> 赞同：8
> 
> 时间：2009-04-30T09:55:50.423
> 
> 标签：macos, shell, iconv

我在**Mac Os X** 10.5 上（但我在 10.4 上重现了这个问题）

我正在尝试使用**iconv**将**UTF-8 文件转换为 ASCII**

utf-8 文件包含像“éàç”这样的字符

我希望将重音字符变成最接近的 ascii 等价物

所以

我的**命令**是这样的：

**iconv -f UTF-8 -t ASCII//TRANSLIT//IGNORE myutf8file.txt**

*在 Linux 机器上运行良好*

但在我本地的 Mac Os XI 上，例如：

**è => 'e**

**à => `一个**

我真的不明白为什么 iconv 在 mac os x 上返回这个奇怪的输出但在 linux 上一切都很好

有什么帮助吗？或方向？

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2010-03-27T00:56:23.217

问题在于 Mac OSX 使用了另一个名为 libiconv 的 iconv 实现。大多数 Linux 发行版都有一个 iconv 的实现，它是 libc 的一部分。不幸的是，libiconv 将 ö、è 和 ñ 等字符音译为“o、`e 和 ~n。解决此问题的唯一方法是下载源代码并修改 lib 目录中的 translit.h 文件。查找如下所示的行：

2, '"', 'o',

并用这样的东西替换它们：

1, 'o',

我在谷歌上花了几个小时试图找出这个问题的答案，最后决定下载源代码并破解它。希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-14T18:00:39.537

我找到了一个适合我需要的解决方法（只是为了澄清一下：脚本获取一个字符串并将其转换为“永久链接”URL。

`iconv`我的解决方法包括将输出通过管道传输到`sed`过滤器：

```
echo á é ç this is a test | iconv -f utf8 -t ascii//TRANSLIT | sed 's/[^a-zA-Z 0-9]//g' 
```

OS X Yosemite 中的上述结果是：

```
a e c this is a test 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T14:44:29.573

我的猜测是，在您的 linux 机器上，语言环境设置不同......据我所知，iconv 使用当前语言环境来翻译 UTF-X，默认情况下，macos 将语言环境设置为“C”（显然) 不处理重音和特定语言的字符......也许在运行 iconv 之前尝试这样做：

```
setLocale( LC_ALL, "en_EN"); 
```

|K<

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-12T19:26:51.840

另一种选择是使用`unaccent`安装的`brew install unac`：

```
$ unaccent utf-8<<<é
e 
```

`unaccent`不转换分解形式的字符（例如`LATIN SMALL LETTER E`后跟`COMBINING ACUTE ACCENT`），但您可以使用`uconv`将字符转换为组合形式：

```
$ unaccent utf-8<<<$'e\u0301'
é
$ uconv -f utf-8 -t utf-8 -x NFC<<<$'e\u0301'|unaccent utf-8
e 
```

`brew install icu4c;ln -s /usr/local/opt/icu4c/bin/uconv /usr/local/bin`安装`uconv`.

# c# - 如何在 Linq-to-SQL 类上捕获 Save 或 Load 事件？

> ID：806202
> 
> 赞同：5
> 
> 时间：2009-04-30T09:57:21.870
> 
> 标签：c#, linq, linq-to-sql

我有一个 Linq-to-SQL 类，我想在记录保存到数据库之前执行一些预保存验证。另外，一旦保存，我想要一些保存后的处理代码。

同样，当一条记录被删除时，我希望有将被调用的 pre- 和 post- 方法，无论从哪里进行`context.SubmitChanges()`调用。

我在生成的代码中看不到任何可以覆盖的方法。部分方法`OnValidate()`可能足以进行预处理，但是如果不满足某些条件，我希望能够取消保存，并且我根本看不到任何用于后处理的钩子。

我错过了什么吗？或者你能推荐另一种达到预期效果的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-30T10:01:47.647

对于插入：

1.  为您的实体创建一个基类。

2.  添加一些虚拟方法。

3.  覆盖`DataContext.SubmitChanges`。

4.  调用`DataContext.GetChangeSet()`并迭代应用您之前定义的函数的插入。

要恢复更改，请查看我的[扩展方法](http://xacc.wordpress.com/2009/02/17/datacontextrevertchanges/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-30T10:00:12.177

好吧，抛出异常将有效地取消更改……尽管可能有点苛刻。

另一个扩展点是通过覆盖`SubmitChanges`数据上下文，以获取待处理的更改（`GetChangeSet`），进行任何最终更改（也许是审计），然后调用`base.SubmitChanges`. *您可以在此之后*放置任何保存后操作（使用您在保存之前获得的更改集）。

# iphone - 是否可以设置线之间的 UILabel 距离？

> ID：806204
> 
> 赞同：4
> 
> 时间：2009-04-30T09:58:12.943
> 
> 标签：iphone, uilabel, line-spacing

是否可以在行之间设置 UILabel 的距离，因为我的 UILabel 包含 3 行，而 linebreakmode 是自动换行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-06-17T18:02:15.893

如果您指的是“领先”，它指的是类型行之间的间隙 - 您不能在 UILabel 上更改它。这是从标签本身的前面推断出来的。有些人试图创建类别来覆盖标签的 UIFont 的“前导”属性，但它在渲染时实际上不起作用。

如果你真的需要控制文本行之间的垂直间距，那么你最好的选择是以编程方式在固定宽度的每行中放置 1 个 UILabel 并自己控制垂直间距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-12T13:28:17.607

以下是如何使用界面生成器和以编程方式设置行距。

**从界面生成器：**

![在此处输入图像描述](https://i.stack.imgur.com/UmKYm.gif)

**以编程方式：**

**斯威夫特 4**

使用标签扩展

```
extension UILabel {

    // Pass value for any one of both parameters and see result
    func setLineSpacing(lineSpacing: CGFloat = 0.0, lineHeightMultiple: CGFloat = 0.0) {

        guard let labelText = self.text else { return }

        let paragraphStyle = NSMutableParagraphStyle()
        paragraphStyle.lineSpacing = lineSpacing
        paragraphStyle.lineHeightMultiple = lineHeightMultiple

        let attributedString:NSMutableAttributedString
        if let labelattributedText = self.attributedText {
            attributedString = NSMutableAttributedString(attributedString: labelattributedText)
        } else {
            attributedString = NSMutableAttributedString(string: labelText)
        }

        // Line spacing attribute
        attributedString.addAttribute(NSAttributedStringKey.paragraphStyle, value:paragraphStyle, range:NSMakeRange(0, attributedString.length))

        self.attributedText = attributedString
    }
} 
```

现在呼叫分机功能

```
let label = UILabel()
let stringValue = "is\nit\npossible\nto\nset\nthe\nUILabel\ndistance\nbetween\nthe\nline?"

// Pass value for any one argument - lineSpacing or lineHeightMultiple
label.setLineSpacing(lineSpacing: 2.0) .  // try values 1.0 to 5.0

// or try lineHeightMultiple
//label.setLineSpacing(lineHeightMultiple = 2.0) // try values 0.5 to 2.0 
```

或使用标签实例（只需复制并执行此代码即可查看结果）

```
let label = UILabel()
let stringValue = "is\nit\npossible\nto\nset\nthe\nUILabel\ndistance\nbetween\nthe\nline?"
let attrString = NSMutableAttributedString(string: stringValue)
var style = NSMutableParagraphStyle()
style.lineSpacing = 24 // change line spacing between paragraph like 36 or 48
style.minimumLineHeight = 20 // change line spacing between each line like 30 or 40

// Line spacing attribute
attrString.addAttribute(NSAttributedStringKey.paragraphStyle, value: style, range: NSRange(location: 0, length: stringValue.characters.count))

// Character spacing attribute
attrString.addAttribute(NSAttributedStringKey.kern, value: 2, range: NSMakeRange(0, attrString.length))

label.attributedText = attrString 
```

# c++ - 是否有用于 C++ 的 TeX API？

> ID：806208
> 
> 赞同：18
> 
> 时间：2009-04-30T09:59:36.297
> 
> 标签：c++, image, formula, tex

我想在我的用户界面中预览 TeX 公式。经过长时间的搜索，在我看来，除了

*   将公式写入 .tex 文件
*   用 system() 调用 tex 并编写一个 dvi 文件
*   用 system() 调用例如 dvipng 并编写一个 png 文件
*   将此文件加载到 GUI
*   清理（​​删除所有这些文件）。

我认为这样做的性能不是问题，因为只有公式可以渲染，而不是整个文档。但是为 TeX 系统自动设置环境似乎是一个更大的问题。那么，是否有可能将 TeX 作为 API 包含在我的程序中？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-06-02T11:43:43.073

有一个用于 TeX 的 C API，称为[MimeTeX](http://www.forkosh.dreamhost.com/source_mimetex.html)，但生成的图像......不是很好。

如果你对 Java 没问题，那就是[JLatexMath](http://forge.scilab.org/index.php/p/jlatexmath/)

如果你想要一个 WPF 版本，[WPFMath正在开发一个版本](https://launchpad.net/wpf-math)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T11:17:51.520

您不能将这些步骤封装在单个 shell 脚本中（即，将公式和 png 文件名作为参数）吗？然后该脚本还可以处理设置 TeX 的环境。您的程序只需使用 system() 调用来调用脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-30T07:19:48.420

对于 Edoboard 和 Tutorsbox.com，我们执行以下操作：

保留 LaTeX 命令的黑名单以避免：

```
TEX_BLACKLIST = ["\\def", "\\let", "\\futurelet",
    "\\newcommand", "\\renewcommand", "\\else", "\\fi", "\\write",
    "\\input", "\\include", "\\chardef", "\\catcode", "\\makeatletter",
    "\\noexpand", "\\toksdef", "\\every", "\\errhelp", "\\errorstopmode",
    "\\scrollmode", "\\nonstopmode", "\\batchmode", "\\read", "\\csname",
    "\\newhelp", "\\relax", "\\afterground", "\\afterassignment",
    "\\expandafter", "\\noexpand", "\\special", "\\command", "\\loop",
    "\\repeat", "\\toks", "\\output", "\\line", "\\mathcode", "\\name",
    "\\item", "\\section", "\\mbox", "\\DeclareRobustCommand", "\\[", "\\]"]; 
```

然后我们进行系统调用“latex and textopng”。

作为一个 API REST 加上一些缓存，你就可以了 :) 作为升级，我们将很快将这些 LaTeX 图像转换为 SVG。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-04-01T21:12:13.850

我不确定，但认为 MathType 的组件会矫枉过正。

还可以查看[sideshare](http://www.slideshare.net/coulix/gui-input-tools-for-math-ukmc09)并查看 flash 视频，以获取有关 sitmo、mathMagig、Edoboard 及其 API 工具的更多信息。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T16:39:39.190

[LyX](http://www.lyx.org/)是一个*基于 TeX 的文档处理器*。由于该应用程序是开源的，您可以检查 C++ 代码以了解它们如何处理您描述的问题。

# git - 如何在日志中没有额外的“committer:”行的情况下转换为 Mercurial？

> ID：806209
> 
> 赞同：2
> 
> 时间：2009-04-30T10:00:02.567
> 
> 标签：git, mercurial

将存储库从 Git 转换为 Mercurial 会导致每条日志消息中出现大量虚假的“提交者：”行。我想不出一种不生成这些的方法。如果我转换 SVN 存储库，则不会添加这些行。它似乎只是一个 git 的东西。

这很容易测试。以下是在 Linux 上的方法：

```
mkdir repo && cd repo
git init
echo hello > foo.txt
git add foo.txt
git commit -m"Initial import"
cd ..
hg convert repo
cd repo-hg
hg log -v 
```

日志会这样说：

> ```
> changeset:   0:077135a87f99
> tag:         tip
> user:        Your Name <you@example.com>
> date:        Mon Jan 01 12:04:46 2001 
> files:       foo.txt
> description:
> Initial import
> 
> committer: Your Name <you@example.com> 
> ```

那么，我怎样才能避免多余的“提交者：”行呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T17:22:46.073

这是特定于 git 的东西，hg convert 正在添加它，因为 hg 无法表示此信息。在 git 中，提交者和作者不必是同一个人（git，IMO 的真正伟大功能）。

似乎没有任何关于此的特定文档，并且它不是可配置的功能。我相信他们会高兴地接受补丁。:)

# asp.net - ASP.Net 变量的范围

> ID：806210
> 
> 赞同：3
> 
> 时间：2009-04-30T10:00:09.400
> 
> 标签：asp.net, variables, scope

我有一个与变量范围有关的奇怪问题。我已经通过以下方式声明了一个变量：

```
public partial class MyClass: System.Web.UI.Page
{
    protected static int MyGlobalVariable;

    protected void MyFunction()
    {
        MyGlobalVariable = 1;
    }
} 
```

这在我的页面上运行良好。但是，当两个用户使用同一个页面时，我发现我正在越界。如果一个用户将变量设置为 5，而另一个用户访问该变量，它将被设置为 5。我如何设置该变量，以便它只能由最初设置它的用户访问？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-30T10:04:47.000

如果您声明`MyGlobalVariable`为静态，则该类的所有实例将仅存在一个实例，因此正如您所说，同一页面的多个实例上的多个用户将访问相同的值。

要么声明不带修饰符的 int，`static`要么如果您需要它为该用户保留，请考虑使用`Viewstate`（对于页面范围）或`Session`（对于会话范围）

例如

```
protected int MyGlobalVariable
{
    get
    {
        return ViewState["MyGlobalVariable"] != null ? Convert.ToInt32(ViewState["MyGlobalVariable"] : 0;
    }
    set
    {
        ViewState["MyGlobalVariable"] = value;
    }
} 
```

或者

```
protected int MyGlobalVariable
{
    get
    {
        return Session["MyGlobalVariable"] != null ? Convert.ToInt32(Session["MyGlobalVariable"] : 0;
    }
    set
    {
        Session["MyGlobalVariable"] = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T10:01:53.123

删除静态声明：

```
protected int MyGlobalVariable; 
```

更多关于[静态变量](http://en.wikipedia.org/wiki/Static_variable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T10:02:37.863

永远不要在页面中使用 STATIC 变量。

静态变量在内部使用相同的内存地址。因此，所有用户都将获得相同的存储值。

好吧，如果您使用它需要“公共”变量。然后您将需要使用一些技巧，例如视图状态或会话。

# jquery - 基于 MVC 框架的项目的 Outlook 样式事件日历

> ID：806212
> 
> 赞同：12
> 
> 时间：2009-04-30T10:00:49.070
> 
> 标签：jquery, asp.net-mvc, calendar

我需要能够安排事件并在日历上显示它们的大型日历（不是 jQuery datepicker）。日历必须支持月/周/日视图。当视图更改（AJAX 刷新）时，日历不重新加载整个页面是非常可取的。它必须易于定制（CSS 主题）和本地化。它应该支持拖放（用于预定事件）。此类日历必须从 JSON 数据片段在客户端呈现。

我知道要找到与它们匹配的日历有太多要求，但它们都很重要。我找到了一些免费的开源日历控件，但几乎所有控件都针对 ASP.NET 而不是 MVC 进行了严格调整，或者具有非常“重”的 JavaScript 代码库。理想情况下，我将其视为 jQuery 扩展，而*不是*服务器端 ASP.NET 控件。我发现最好的即用型解决方案是 Adam Shaw 的 FullCalendar ( [http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/) )。它是 jQuery 插件，我可以更改其源代码以满足我的需要。

如果您能提出一些更好的现有解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-06-11T11:20:06.957

其他选项：

*   [全日历](http://arshaw.com/fullcalendar/)（免费）

它使用 jQuery 和相同的事件对象类型。Fullcalendar 也支持很多自定义钩子。我已经很容易地添加了基于标签和其他功能的颜色编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-06-03T03:01:01.723

你可以试试我们的 jquery 日历插件。wdCalendar 是一个基于 jquery 的谷歌日历克隆。它涵盖了大多数谷歌日历功能。[http://www.web-delicious.com](http://www.web-delicious.com)

```
* Day/week/month view provided.
* create/update/remove events by drag & drop.
* Easy way to integrate with database.
* All day event/more days event provided. 
```

它完全免费（LGPL 许可证）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-06-09T00:32:30.510

我最近使用 Web2Cal 来表示一大组数据。事件/回调结构与大多数日历不同。如果您是像我这样的 Java 开发人员（JavaScript 专业知识较少），您会喜欢 Web2Cal。它没有相当神秘的 javascript 语法和代码风格。更多基于事件和函数。此外，这是一个更完整的解决方案，如 Recurring 等。如果代码更开放，我会更高兴。我相信，他们的高端版本有可用的代码，但没有低版本。

但他们在一些良好的支持下弥补了这一点。但我确实喜欢 fullCalendar，但它仍然不是我们产品所必需的完整解决方案。

但是很高兴看到更多的发展和竞争

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T10:50:28.377

也许内置在 ExtJs 中的[E2CS 日历](http://e2cs.mm-mendez.com/?language=en)会满足您的需求。

# c# - c# 中可用的访问说明符有哪些？默认的是什么？

> ID：806222
> 
> 赞同：6
> 
> 时间：2009-04-30T10:02:26.227
> 
> 标签：c#

c# 中可用的访问说明符有哪些？默认的是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-30T10:03:42.760

可能的访问修饰符是：

*   私人的
*   受保护
*   内部的
*   受保护的内部
*   上市

使用的默认修饰符取决于元素。

*   对于类，默认说明符是“内部”
*   对于类成员，默认说明符是 private
*   对于嵌套类型（内部类），默认为私有

您也可以在[MSDN上找到它](http://msdn.microsoft.com/en-us/library/wxh6fsc7(VS.71).aspx)

你可能会发现看看[这个也很有趣](http://msdn.microsoft.com/en-us/library/ba0a1yw2(VS.71).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-01T16:10:40.887

安装 Visual Studio（至少在 2008 年）时包含 C# 语言规范的副本，位于`*VSRoot*\VC#\Specifications\1033\CSharp Language Specification.doc`. 当然，这是最值得一看的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T00:17:56.453

访问修饰符（Access Specifiers）描述为一个对象及其成员的可访问范围。所有 C# 类型和类型成员都具有可访问性级别。我们可以使用访问说明符来控制类成员对象的范围。我们使用访问修饰符来提供应用程序的安全性。当我们指定类型或成员的可访问性时，我们必须使用 CSharp 语言提供的任何访问修饰符来声明它。

C#提供**了五个**访问说明符，它们如下：

**公共、私有、受保护、内部和受保护内部**。

**上市 ：**

public 是 C# 中最常见的访问说明符。它可以从任何地方访问，这意味着对可访问性没有限制。可访问性的范围在类内部和外部。类型或成员可以由同一程序集或引用它的另一个程序集中的任何其他代码访问。

**私人的 ：**

可访问性的范围仅限于声明它们的类或结构内。私有成员不能在类外访问，它是最不许可的访问级别。

**受保护：**

可访问性的范围仅限于类或结构以及从此类派生（继承）的类。

**内部的 ：**

内部访问修饰符可以在包含其声明的程序内访问，也可以在同一程序集级别内访问，但不能从另一个程序集访问。

**受保护的内部：**

受保护的内部是受保护和内部的相同访问级别。它可以访问同一程序集和同一类中的任何位置，也可以访问从同一类继承的类。

# c# - try 语句中的问题

> ID：806227
> 
> 赞同：0
> 
> 时间：2009-04-30T10:02:50.860
> 
> 标签：c#, exception-handling, try-catch, finally

这是我用来设置 TCP 服务器的代码

```
 internal void Initialize(int port,string IP)
    {
        IPEndPoint _Point = new IPEndPoint(IPAddress.Parse(IP), port);
        Socket _Accpt = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        try
        {
            _Accpt.Bind(_Point);
        }
        catch (SocketException exc)
        {
            System.Windows.Forms.MessageBox.Show(exc.Message);

        }
        finally
        {
            _Accpt.Listen(2); //Second exception is here after the code continues after the catch block
            _Accpt.BeginAccept(null, 0, new AsyncCallback(Accept), _Accpt);
        }
    } 
```

如果你在同一个目的地调用 Bind，你会得到一个异常，因为端口已经在使用中，所以当我调用该函数两次时，我会得到那个异常。

问题 - 在 Catch{} 语句之后，即使我捕获了异常，代码仍继续遵循 finally{}，为什么会发生这种情况？我希望它在消息框之后退出函数。我尝试使用“return”，但它仍然继续跟随 finally{} 块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T10:06:38.947

finally 块总是执行，无论是否抛出异常或方法是否从 try/catch 块中退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T10:07:39.973

finally 块是放置代码的地方，无论 try 块是成功还是失败，都必须运行。这是您放置可能处理对象等的“清理”代码的地方。

因此，无论发生什么，此代码都会运行是设计使然。如果您只希望在 Bind 良好时运行该代码，则可能需要将该代码移动到 Try 块中。

看看这个页面...

[http://msdn.microsoft.com/en-us/library/6dekhbbc(VS.80).aspx](http://msdn.microsoft.com/en-us/library/6dekhbbc(VS.80).aspx)

...有关其工作原理的详细信息。

下面是一个示例 try/catch/finally（通过 C# 取自 Jeffery Richter 的 CLR，这应该是您需要阅读的内容）...

```
FileStream fs = null;

try
{
  fs = new FileStream(...)

  // process the data

}
catch (IOException)
{
  // inside this catch block is where you put code that recovers
  // from an IOException
}
finally
{
  // make sure the file gets closed
  if (fs != null) fs.Close();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T10:10:58.453

正如其他人指出的那样，`finally`无论抛出异常，该块都会始终发生。

将您的代码更改为

```
 try
    {
        _Accpt.Bind(_Point);
        _Accpt.Listen(2); //Second exception is here after the code continues after the catch block
        _Accpt.BeginAccept(null, 0, new AsyncCallback(Accept), _Accpt);
    }
    catch (SocketException exc)
    {
        System.Windows.Forms.MessageBox.Show(exc.Message);

    }
    finally
    {
        //Final logging
        //Disposal of initial objects etc...
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T10:06:49.477

整个想法`finally`是它将始终运行 - 异常或没有异常。用于清理等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T10:07:10.707

finally 块总是被执行。这就是finally的重点。

听起来您在“终于”中的线条可能属于尝试？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-30T10:08:50.143

finally 总是被执行。

只有在抛出异常的代码行之后存在的代码才会被执行，直到遇到可以捕获异常的catch异常。

# c# - Thread being aborded error

> ID：806229
> 
> 赞同：2
> 
> 时间：2009-04-30T10:03:33.307
> 
> 标签：c#, asp.net, multithreading, abort

We have an application that can create e-books. This application has an export module that creates an AIR file but this can take a while (some books have 2500 pages). If we export we get the following error:

```
Thread was being aborted. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Threading.ThreadAbortException: Thread was being aborted.

Source Error: 
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 

Stack Trace: 

[ThreadAbortException: Thread was being aborted.]
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +501
   System.Web.ApplicationStepManager.ResumeSteps(Exception error) +564
   System.Web.HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +141
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +436 
```

I've changed my runtime executiontimeout to 3600 secs but it keeps crashing arround 3 minutes. so it is time related ... everytime we approach the 3 minutes it crashes, I hope someone can help me out.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T14:45:54.193

I think Paul is right about the cause of the exception. Both IIS and ASP.NET have settings that limit the maximum amount of time a request can take. For ASP.NET it's in the Machine.Config file (look for the httpRuntime element, executionTimeout attribute). It's set to 90 seconds on my development machine.

I would however not advise you to change that setting as it's there to make sure your application doesn't hang on a bad request.

Long running tasks should use asynchronous execution. With async execution, the actual work is handled on a separate thread. This frees the thread that handles the request to handle other requests which is good for the overall performance of your application.

There are some good articles on this available. For example : [http://msdn.microsoft.com/en-us/magazine/cc163725.aspx](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T10:04:39.123

Quite often, this error actually occurs from an OutOfMemory exception. Is there an InnerException available?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T10:07:10.567

IIS has a 'run-away' thread protection that will kill a thread/appdomain if it runs for too long.

# paypal - 如何实现向多个供应商付款

> ID：806234
> 
> 赞同：2
> 
> 时间：2009-04-30T10:04:26.783
> 
> 标签：paypal, google-checkout

我正在尝试将支付机制集成到我的网站。我需要的场景并不简单，可以通过以下示例进行解释：

1.  用户为订阅程序（即接收 Netflix）预付费用。用户可以更改订阅（即将每次签出的电影数量从 4 个更改为 2 个）
2.  用户可以通过第三方提供的提供商网站 (Netflix) 购买额外的一次性购买。这些项目（即爆米花、零食）与订阅一样通过同一张信用卡计费，而无需通过重新提交信用卡信息的过程。

当然，我的网站也会收取少量交易费用 :-)

我想知道这是否受到 PayPal、Google Checkout 或其他人的支持。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T10:09:29.593

Paypal api 可以处理所有这些过程。

我似乎已经放弃了你想要什么样的答案，所以我会留在那里。

如果您有一些反馈，更直接的问题，我会尽量回答

--

这笔钱最好先通过你，除非你能以某种方式说服你的客户按项目计费是正常的。此外，如果他们通过信用卡付款，您应该只向他们收费一次，因为每次付款都会产生费用。我不知道无论如何要开单，但要分配付款。

至于贝宝[文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_reference)..

很好的资源，还有一些大多数主要网络语言的[示例代码](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/library_code)

如果您没有开发人员登录名，这也可以帮助您[入门](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_testing_sandbox_get_started)

他们的开发人员支持也很好。很多人在开始使用 paypal api 时似乎搞砸的一件事是没有在配置中设置最新版本，所以不要忘记将其更新到最新版本。:)

免责声明.. 是的，我知道有很多关于贝宝和疯狂事情的​​负面新闻，但他们大部分时间都完成了工作，客户喜欢使用它不是我的错。

# c++ - 如何在 C++ 中计算文件的 sha1sum？

> ID：806238
> 
> 赞同：4
> 
> 时间：2009-04-30T10:06:03.470
> 
> 标签：c++, checksum

我尝试了系统调用，但由于它不是最好的解决方案，我认为应该有其他计算校验和的方法。

是否有任何库或函数可以使用各种算法在 C++ 中计算文件的校验和？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T10:08:42.840

很明显，他们会有很多。[Crypto++](http://www.cryptopp.com/)是我快速搜索后发现的第一个，看起来还不错。最新发布日期为 2009 年 3 月中旬，因此它看起来“还活着”。

# asp.net - ASP.NET - 从自定义控件跨页发布

> ID：806244
> 
> 赞同：0
> 
> 时间：2009-04-30T10:07:02.737
> 
> 标签：asp.net, postback, user-controls

我可以从自定义控件中获得跨不同页面发布的帮助吗？我创建了一个自定义按钮，通过以下代码引发它自己的点击事件：

```
Private Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Const EventName As String = "button_click"
    Const ArgName As String = "__EVENTARGUMENT"

    If Page.IsPostBack _
    AndAlso Request.Params IsNot Nothing _
    AndAlso Request.Params(ArgName).Trim = EventName Then
        Me.OnClick(Me.this_button, New EventArgs)
    Else
        Me.this_button.Attributes.Add("OnClick", Page.ClientScript.GetPostBackEventReference(Me.this_button, EventName))
    End If

End Sub 
```

我将如何修改它以让我发布到不同的页面？

我希望它尽可能接近 System.Web.UI.WebControls.Button 属性 PostBackUrl。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T10:16:08.533

您可以使用[跨页回发](http://www.developerfusion.com/code/4687/cross-page-postbacks-in-aspnet-20/)。

您还可以使用[WebForm_DoPostBackWithOptions](http://anuraj.wordpress.com/2007/11/02/webform_dopostbackwithoptions/) js 方法将当前页面回发到另一个页面。

# c# - 在 C# 中导入格式怪异的文本文件

> ID：806247
> 
> 赞同：0
> 
> 时间：2009-04-30T10:07:38.040
> 
> 标签：c#, .net, import

我有一些奇怪的（这个行业的标准！）格式的导出文件，我需要将其导入我们的数据库。该文件基本上如下所示：

```
DATRKAKT-START
  KAKT_LKZ  "D"
  KAKT_DAT_STAMM    "1042665"

  DATRKAIB-START
    KAIB_AZ "18831025"
    KAIB_STATUS_FM  2
    KAIB_KZ_WAE "E"
  DATRKAIB-END

  DATRKARP-START
    KARP_MELD   "831025"
    KARP_ST_MELD    "G"
  DATRKARP-END

...
DATRKAKT-END 
```

共有 56 个部分，共有 1963 个不同的行，所以我真的不喜欢创建 56 个具有 1963 个属性的类……你将如何处理这个文件，以便你可以访问一些属性，就像它是一个对象一样？

```
Datrkaib.Kaib_Status_Fm
Datrkarp.karp_St_Meld 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T10:11:52.273

它看起来像结构化数据 - 我会运行搜索和替换并将其转换为简单的 xml。然后导入。

如果您想从中生成代码文件 - 考虑[codesmith](http://www.codesmithtools.com/) - 我认为它可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T10:34:28.753

除非您的编程语言允许您在运行时向类添加方法或让类响应对未定义方法的调用，否则您无法做到这一点。问题是，即使 C# 允许你这样做，你也会失去类型安全和 Intellisense 帮助（大概是希望它像那样工作的原因之一），那么为什么不直接把它读入一些数据结构呢？我的倾向是一个可以包含值或其他散列的散列，所以你会得到像（VB）这样的调用：

```
Datrkakt("Lkz")
Datrkakt("Dat_Stam")
Datrkakt("Kaib")("Az")
Datrkakt("Kaib")("Status_Fm") 
```

或者，如果您知道所有数据项在您的示例中都是唯一命名的，则只需使用一个哈希：

```
Datr("Kakt_Lkz")
Datr("Kakt_Dat_Stam")
Datr("Kaib_Az")
Datr("Kaib_Status_Fm") 
```

您可以通过创建所有数据项名称的枚举并获取以下信息来获取 Intellisense 帮助：

```
Datr(DatrItem.KAKT_LKZ)
Datr(DatrIrem.KAIB_STATUS_FM) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T10:11:09.247

我会使用`<name, list>`各种对象的列表，它可以是元组`<name, value>`或对象的命名列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T10:17:04.817

没有它会自动为您执行此操作。

我将创建一个包含所有适当属性的类（例如 DatrDocument），并创建一个 DatrReader 类（类似于 XmlDocument/XmlReader 类的想法）。

DatrReader 将需要读取文件或流的内容，并将其解析为 DatrDocument。

您可能还想编写一个 DatrWriter 类，该类将采用 DatrDocument 并将其写入流。

# seo - “URL 友好的标题”的好名字？

> ID：806250
> 
> 赞同：9
> 
> 时间：2009-04-30T10:08:31.967
> 
> 标签：seo, friendly-url, slug

我正在创建一个包含文章的动态网站。每篇文章都有一个标题，例如“一个人如何吃狗并与它一起生活？”，还有一些我现在称之为“URL 友好标题”的标题，例如“吃狗”。

我正在为“URL Friendly Title”寻找一个更好的词，因为它很拗口。Wordpress 称它们为“Post Slug”，但我非常不喜欢它。这些东西的好名字是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-30T10:11:50.977

我很遗憾地说“蛞蝓”似乎确实是标准术语。[这是](http://writerway.blogspot.com/2007/04/slugs-on-web.html)该术语的[词源](http://en.wikipedia.org/wiki/Etymology)，它似乎来自（老派，印刷）[新闻业务](http://en.wikipedia.org/wiki/Slug_%28production%29)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-30T11:06:17.477

您可以尝试不给它命名，而是展示它的使用方式。所以不要有这样的东西：

```
Title              : _______
URL Friendly Title : _______ 
```

你可以有

```
Title : _______
URL   : http://yourdomain.com/articles/______ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-09T14:18:23.347

我要找“标识符”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T10:15:41.733

你可以有

自然名称 = “一个人如何吃掉一只狗并与它一起生活？” 和 URL 名称 = “吃狗”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T10:17:20.887

“简称”呢？在输入字段附近，通过举例说明短名称如何出现在 url 中来明确这是什么是一个好主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-10-06T09:06:39.207

我认为选择应该由系统的最终用户类型决定。如果它会被懂俚语的人使用，请选择*slug*，它在许多 CMS 中使用。

如果该软件是为那些以编写文本为使命且不熟悉技术语言的人设计的，那么“slug”是一个糟糕的选择，因为它没有敲响该功能的含义。只有通过阅读手册、询问其他人或（很可能）通过反复试验才能弄清楚。

所以我的观点是，你应该选择一个能够表达功能*含义*的名称，例如：

*   友好的网址
*   可记忆的网址
*   永久链接（永远存在的东西，所以最好是好的）

我还会考虑将“URL”更改为“链接”或“地址”，因为“URL”对新手来说毫无意义。

无论您的选择如何，您都应该：

*   用相当好的默认值填充它（从输入的标题生成）
*   显示预览

这使人们能够理解该字段的用途，而无需提交文章然后观察发生了什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-10-06T09:16:40.747

我认为最好的方法是将其显示为

**网址**：site.com/article/_

 **如果 URL 适当/描述性/SEO 友好真的很重要，您可以在标签 URL 旁边放置一个红色感叹号或醒目的东西，当用户将鼠标悬停在它上面时，您可以弹出一个小气泡（例如）解释如何编写 slug（如果他们不使用适当的 SEO 友好 URL，甚至可能会发出警告）。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-04-30T10:36:40.620

“SEO标题”怎么样？

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-04-30T10:51:35.343

我称之为“友好的名字”。

# c# - 路由中的空间给出 404

> ID：806254
> 
> 赞同：3
> 
> 时间：2009-04-30T10:08:58.190
> 
> 标签：c#, asp.net-mvc, routing, asp.net-mvc-routing

我目前定义了这条路线（除其他外）：“ **{controller}/{action}/{id}/{designation}** ”是：

*   “id”我的主键
*   “指定”仅用于 SEO，不考虑在内。

现在我的问题是：“ [http://server/Home/Index/1/teste](http://server/Home/Index/1/teste) ”有效，但**最后有空格的“** [http://server/Home/Index/1/teste](http://server/Home/Index/1/teste) ”无效。

 **IIS 给了我一个**404**并且 mvc 甚至没有为这个请求启动。

有人经历过这种行为吗？我需要改变什么吗？

最诚挚的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T10:55:08.440

空格不能用作 url 中的纯文本字符。您必须将其编码为：

**`%20`**

例如

```
http://www.testDomain.com/test%20page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T10:49:08.390

空格是 URL 中的无效字符。浏览器甚至不应该发送它。

如果您在代码中调用它，请尝试`HttpUtility.UrlEncode( path )`在发送/重定向之前使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-01-31T12:40:32.200

看看这个帖子：

[“没有找到您要查的资源。” url 末尾有“点”时出错](https://stackoverflow.com/questions/429963/the-resource-cannot-be-found-error-when-there-is-a-dot-at-the-end-of-the-url)

它与“。”讨论类似的问题。网址末尾的（点）字符。认为这与您的问题相同。

# windows - 运行对话框和命令行中的 Inetmgr(iis6)

> ID：806260
> 
> 赞同：1
> 
> 时间：2009-04-30T10:11:01.197
> 
> 标签：windows

如何更改运行任务的行为 - inetmgr - 使其运行 IIS6 兼容版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T10:20:27.447

我只是挖了一下，发现输入“inet”可以解决问题

# php - 我可以将两个不同的按钮指向具有 CakePHP 中相同视图的控制器中的相同功能吗？

> ID：806262
> 
> 赞同：2
> 
> 时间：2009-04-30T10:11:38.793
> 
> 标签：php, cakephp

我的 cakephp 页面中有两个按钮，一个用于注册新用户，另一个用于登录。两个按钮的动作都可以指向控制器中的相同功能并具有相同的 view.ctp 文件吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-10T10:16:45.940

是的，只需在按钮中设置正确的 URL。但我不知道你为什么要这样做。如果只是重新使用 view.ctp，那么您不需要使用单个操作来使用相同的视图。例子：

```
<?php
class FoobarController extends AppController
{
    function view()
    {
        // This will render views/foobar/view.ctp because the action
        // is named "view"
    }

    function register()
    {
        // Normally this would render views/foobar/register.ctp but you can
        // call the render() function manually and render something else. The
        // following call will render views/foobar/view.ctp
        $this->render('view');
    }

    function login()
    {
        // Same thing here...
        $this->render('view');
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T20:23:28.100

我在我的 CRUD 管理页面中创建了允许“确认（编辑/删除/创建/等）”或“取消”的按钮。我通过在表单中​​创建 2 个提交按钮并给每个按钮一个唯一的名称来做到这一点。例如：

查看代码：

```
...
$form->submit('Delete', array('name' => 'delete'));
$form->submit('Cancel', array('name' => 'cancel'));
... 
```

动作逻辑：

```
function admin_delete( ... ) {

  // Bail if cancel button pressed
  if (isset($this->params['form']['cancel'])) {
    $this->redirect('/');
  }

  // Delete if delete button pressed
  if (isset($this->params['form']['delete'])) {
    // delete stuff
    ...
  }
  ...
} 
```

另一方面，为了重用视图，您实际上是将 2 个动作组合成一个动作。 [Sander Marechal 的解决方案](https://stackoverflow.com/questions/806262/cakephp-contollers/845052#845052)更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T11:15:10.903

嗯，是的，为什么不呢？这不只是在表单操作中设置适当的 URL 的问题吗？还是我错过了什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T21:38:37.487

您可以使用隐藏的表单值来表示它是哪个操作。

```
$form->create('User', array('action' => 'process');
$form->hidden('User.signup', array('value' => '1'));
$form->end('Signup');

$form->create('User', array('action' => 'process');
$form->hidden('User.login', array('value' => '1'));
$form->end('Login'); 
```

不过，目前还不清楚为什么您不想使用 2 个函数。你基本上将不得不手动检查它是哪个动作，而不是让蛋糕为你做。

在您的控制器中

```
function process()
{
    if ($this->data['User']['signup'] == 1)
    {
        // process signup
    }
    if ($this->data['User']['login'] == 1)
    {
        // process login
    }
} 
```

# ruby - 如何触发并忘记子进程？

> ID：806267
> 
> 赞同：22
> 
> 时间：2009-04-30T10:12:23.440
> 
> 标签：ruby, unix, process, fork

我有一个长时间运行的进程，我需要它来启动另一个进程（也将运行一段时间）。我只需要启动它，然后完全忘记它。

我设法通过从 Programming Ruby 书中获取一些代码来做我需要的事情，但我想找到最好/正确的方法，并了解正在发生的事情。这是我最初得到的：

```
exec("whatever --take-very-long") if fork.nil?
Process.detach($$) 
```

~~那么，这是这样的方式，还是我应该怎么做？~~

*检查下面的答案后，我最终得到了这段代码，这似乎更有意义：*

```
(pid = fork) ? Process.detach(pid) : exec("foo") 
```

我会很感激一些关于如何`fork`工作的解释。[已经知道了]

分离`$$`对吗？我不知道为什么会这样，我真的很想更好地了解情况。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-30T10:35:12.183

阿尔尼塔克是对的。这是一种更明确的编写方式，没有 $$

```
pid = Process.fork
if pid.nil? then
  # In child
  exec "whatever --take-very-long"
else
  # In parent
  Process.detach(pid)
end 
```

分离的目的只是说，“我不在乎孩子何时终止”以避免[僵尸进程](http://en.wikipedia.org/wiki/Zombie_process)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-04-30T10:19:36.433

该`fork`功能将您的流程分成两部分。

*然后两个*进程都会收到函数的结果。孩子收到零值/ `nil`（因此知道它是孩子），父母收到孩子的PID。

因此：

```
exec("something") if fork.nil? 
```

将使子进程开始“某事”，而父进程将继续进行。

请注意，将当前进程`exec()` *替换为“某物”，因此子进程将永远不会执行任何后续 Ruby 代码。*

调用`Process.detach()`看起来可能不正确。我本来希望它里面有孩子的PID，但是如果我正确地阅读了你的代码，它实际上是在分离父进程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T12:37:53.730

分离`$$`是不对的。从 p。348 镐（第 2 版）：

> `$$`Fixnum 正在执行的程序的进程号。[转/转]

“Ruby 语言”一章中的“变量和常量”这一部分，对于解码各种 ruby​​ 短常量非常方便`$`- 但是在线版（第

所以你实际上在做的是将程序与自身分离，而不是与它的子程序分离。就像其他人所说的那样，与孩子分离的正确方法是使用从`fork()`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-13T20:36:02.730

如果您确定要分离子进程，其他答案很好。但是，如果您不介意，或者希望保持子进程的连接（例如，您正在为 Web 应用程序启动子服务器/服务），那么您可以利用以下速记

```
fork do
    exec('whatever --option-flag')
end 
```

提供一个块告诉 fork 在子进程中执行该块（并且只执行该块），同时在父进程中继续执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-29T18:46:37.363

我发现上面的答案破坏了我的终端并弄乱了输出。这是我找到的解决方案。

```
 system("nohup ./test.sh &") 
```

以防万一有人遇到同样的问题，我的目标是登录 ssh 服务器，然后让该进程无限期地运行。所以 test.sh 就是这个

```
#!/usr/bin/expect -f
spawn ssh host -l admin -i cloudkey  
expect "pass"
send "superpass\r"
sleep 1000000 
```

# java - 生成和可视化决策树

> ID：806274
> 
> 赞同：1
> 
> 时间：2009-04-30T10:14:25.277
> 
> 标签：java, jsp, visualization, decision-tree

我想知道是否有人能够提供以下帮助或建议；我必须能够从数据源中获取数据，并且能够将这些数据可视化为网页上的决策树。这将是一个对最终用户无缝的单一过程。

这将使用 JSP 和 Java servlet 来完成，但我关心的是底层产品。我正在考虑将数据传递给 Weka 分类器，然后使用它创建的 .dot 文件做一些事情，即将它提供给 GraphViz 或尝试使用 Google Visualization API 来呈现交互式显示。

但是，谁能告诉我这是否是一种可行的方法或建议替代方案？

谢谢

马丁奥谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T10:36:16.690

对于 UI，我们添加了来自[http://www.mxgraph.com/](http://www.mxgraph.com/)的 JS 内容，以向用户显示更大的图表。

但是，您的方法是可行的。GraphViz 是一个很好的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T10:26:04.390

我在使用 graphviz 创建数据流图方面取得了很多成功（我使用脚本将它们上传到 MoinMoin wiki 并使用了 graphviz 插件）。该插件甚至允许在图表中包含链接，因此我们可以将各个图表保持小。

# php - 我将如何创建像 Zend_tool 或 symfony.bin 这样的批处理文件？

> ID：806276
> 
> 赞同：0
> 
> 时间：2009-04-30T10:15:18.677
> 
> 标签：php, frameworks, batch-file

我想为我自己的 php 框架编写批处理文件。例如，我将使用它来创建控制器或模块。如果您已经使用过 Zend 或 symfony，您可能知道如何使用框架的 .bin 文件。我只知道用 php 编码，所以我需要清楚地描述如何编写批处理文件。我查看了 symfony.bin 的源代码，但代码非常简单，我认为有一个东西可以将命令发送到 php 文件并返回响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T10:17:14.520

如果您只知道 PHP，那么也可以在其中执行设置脚本。PHP 为编写[CLI 应用程序](http://se2.php.net/CLI)（命令行界面）提供了出色的支持。与 shell 脚本解决方案相比，这也为您提供了一些优势，例如访问反射类，您可以使用反射类自动提取抽象类和接口的结构并生成代码模板。

# java - CXF & SSL：超时问题

> ID：806281
> 
> 赞同：0
> 
> 时间：2009-04-30T10:16:36.207
> 
> 标签：java, web-services, cxf

我有以下代码，我正在尝试使用 Apache CXF 通过 HTTPS 访问 Web 服务。但是，每当我的消息发出时，在我的代码超时之前，我什么也得不到。有人可以给我的代码一次，让我知道我是否做错了什么。我尝试通过 SoapUI 访问该服务，这很好，所以它一定是我的 CXF 代码中的某些内容，但我只是不知道是什么！

谢谢你的帮助

```
DepositImplService ss = new DepositImplService(WSDL_LOCATION,
    SERVICE_NAME);
PortType port = ss.getPortTypePort();

Client client = ClientProxy.getClient(port);

HTTPConduit conduit = (HTTPConduit) client.getConduit();
HTTPClientPolicy httpClientPolicy = conduit.getClient();
httpClientPolicy.setConnectionTimeout(30000);
httpClientPolicy.setReceiveTimeout(30000);
conduit.setClient(httpClientPolicy);

AuthorizationPolicy authPolicy = new AuthorizationPolicy();
authPolicy.setUserName("foo");
authPolicy.setPassword("bar");
conduit.setAuthorization(authPolicy);

TLSClientParameters parameters = new TLSClientParameters();
parameters.setSecureSocketProtocol("SSL");
conduit.setTlsClientParameters(parameters);

client.getInInterceptors().add(new LoggingInInterceptor());
client.getOutInterceptors().add(new LoggingOutInterceptor());

UploadRequestT doc = new UploadRequestT();
BufferedReader reader = new BufferedReader(new FileReader(new File(
    "C:\\rawmessage.txt")));
String documentStr = "";
String currLine = "";
while ((currLine = reader.readLine()) != null) {
  documentStr += currLine;
}

doc.setDoc(documentStr);
doc.setOwner("43");
port.upload(doc); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T10:47:39.767

SoapUI 的响应时间是多少？

您是否通过监视器运行它以查看它正在发送到正确的位置？

我的 CXF 代码如下所示：

```
 PService phsService = new PService(url, SERVICE_NAME);
      P p = phsService.getPHSPort();
      LOG.info("Calling Web Service : getHs");

      StringArray ar = p.getHs();

      for (String hn: ar.getItem()) {
         LOG.info("Calling : getHName : " + hn);
         Dto nDto = p. getHName (hn);

         // process the result   

      } 
```

此服务大约需要 90 秒才能返回并运行良好

# java - 在 Java 中实现事件生成器惯用语

> ID：806282
> 
> 赞同：0
> 
> 时间：2009-04-30T10:16:56.487
> 
> 标签：java, design-patterns, event-handling

我正在尝试实现事件生成器成语（[http://www.javaworld.com/javaworld/jw-09-1998/jw-09-techniques.html](http://www.javaworld.com/javaworld/jw-09-1998/jw-09-techniques.html)）。不过，当谈到可观察类时，我发现事情有点“奇怪”。假设我有以下课程：

```
接口 BakeryListener  
+ orderReceived(BakeryEvent 事件)  
+ orderProcessing(BakeryEvent 事件)  
+ orderFinished(BakeryEvent 事件)  
+ orderDelivered(BakeryEvent 事件)  

LogView、OrderReadyView 等实现 BakeryListener  
为每个用户创建一个 GUI

命令  
VO / DTO 对象，在 BakeryEvent 中用作源

BakeryDAO（可观察的）  
- 订单：矢量  
- 听众：矢量  
+ takeOrder、cancelOrder、bake 等常规 DAO 方法，
通过调用 fireEvent 触发事件
+ addBakeryListener(BakeryEvent 事件)  
+ removeBakeryListener(BakeryEvent 事件)  
- fireEvent(订单来源, EVENTTYPE????)

面包店GUI  
创建/获取对 BakeryDAO 的引用。创建并附加 LogView、OrderReadyView 作为 BakeryDAO 上的侦听器。

```

在我最初给出的链接中，他建议“将事件传播器方法命名为 fire[listener-method-name]。”。我发现这是多余的：制作快照并在每个触发方法中迭代侦听器，而唯一改变的是在接口上调用哪个方法。因此，我制作了一个 fireEvent 方法，并且它正在工作。问题是要保持 fireEvent 中事件参数的数据类型与 BakeryListeners 中定义的方法“同步”。目前，fireEvent 看起来像这样（摘录）：

```
for（BakeryListener 监听器：copyOfListeners）{
    if(eventType.equals("received")) listener.orderReceived(event);
    else if(eventType.equals("processing")) listener.orderProcessing(event);
}

```

...等等。我想我可以使用枚举而不是字符串来使无法使用不存在的 eventType 调用 fireEvent，但我仍然必须将 Type.RECEIVED 映射到 listener.orderReceived 等？

fireEvent 方法是否可以将 BakeryListeners 方法作为参数？即（伪代码）方法声明：

```
fireEvent(BakeryListeners.methods eventType, Order source) 
```

然后直接在fireEvent中调用适当的方法（没有if/switching）：

```
call(listener, eventType( source)) 
```

那么创建一个未在接口 BakeryDAO.takeOrder() -> fireEvent(eventWhoDoesntExist) -> 异常中定义的事件也是不可能的？

在Java中可以做到这一点吗？或者如果我理解错了更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T16:59:12.387

我认为枚举事件类型并在事件中包含事件类型更清晰，每个事件类型一个方法。

首先，您避免所有面包师侦听器都必须实现所有方法，然后如果他们只对一个事件感兴趣，则将它们留空。（你有没有实现过 MouseListener？）

其次，您可以稍后在确定需要 orderBilled 和 orderPaied 时添加 Enum，而无需向所有不需要处理该类型事件的侦听器添加更多方法。

```
public class BakeryEvent {
  public enum Type { Received, Processing,Finished,Delivered,Billed,Paied };

  private Type myType;
  private Order myOrder;

  BakeryEvent( Order order, BakeryEvent.Type bet ) {//...

  }
  //...
}

public interface BakeryListener {
  public void handleBakeryEvent( BakeryEvent be );
} 
```

然后

```
public class OvenScheduler implements BakeryListener {

  public void handleBakeryEvent( BakeryEvent be ){
    if ( BakeryEvent.Type.Received.equals(be.getEventType() ) {
      scheduldeOven( be.getOrder() );
    }
  }
  // hey look I don't have to implement orderBilled() and then do nothing!

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T14:04:39.933

为每个“事件”创建一个方法会导致源代码更简洁，因此更易于阅读。不要将太多信息放入事件对象中，而是依赖于事件侦听器接口中的方法定义。试图通过减少定义方法的数量来“优化”你的源代码是没有意义的。

此外，这样您就不会遇到可能调用未知事件的问题。

（完全不同的东西：不要在每次触发事件时克隆侦听器列表，而是使用[CopyOnWriteArrayList](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)，它会为您处理。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T10:25:37.840

在我对这类系统的实现中，我让事件（上面的 BakeryEvent）携带一些关于发生的事情的信息，然后让侦听器在收到事件时决定要做什么（如果有的话）。这导致了一个简单的界面，例如

```
for (Listener l : registeredListeners) {
  l.processEvent(event);
} 
```

在 Java 中，没有通用方法可以支持您不幸地调用“默认”方法的方案。

伦

# .net - 在 F# 中对元组进行排序

> ID：806295
> 
> 赞同：6
> 
> 时间：2009-04-30T10:21:44.057
> 
> 标签：.net, sorting, f#

我有一个表示点坐标的元组列表。如何按第一个或第二个值对它们进行排序，以便我可以先从左到右，然后从上到下排序我的点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-30T10:29:29.983

听起来你想要例如

```
myList |> List.sortBy fst 
```

[http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/FSharp.Core/Microsoft.FSharp.Collections.List.html](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/FSharp.Core/Microsoft.FSharp.Collections.List.html)

但是元组支持结构相等和比较，所以默认排序（字典式）可能会做你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T16:51:30.407

边注：

这与排序无关，但如果您使用元组坐标，您可能希望使用[Set](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/FSharp.Core/Microsoft.FSharp.Collections.type_Set-1.html)而不是 List。使用 Set 确实帮助我简化了[Tetris](http://gradbot.blogspot.com/2009/04/tetris-in-xna-with-f.html)的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T11:16:18.467

```
 let sorted = List.sort_by (fun (a,b) -> a,b) myList 
```

如果您需要其他方式，请更改 a,b

# parameters - T4 混乱

> ID：806296
> 
> 赞同：3
> 
> 时间：2009-04-30T10:22:45.710
> 
> 标签：parameters, t4, host

我想我了解 T4 的基本原理，但我很难弄清楚如何将其应用于我的特定情况。

我有一个显示某种对象列表的应用程序 - 没关系。我想允许用户选择一个或多个这些对象并将它们提交到任何模板。例如，模板可以生成描述对象的 html 文件或以某种方式或其他方式操作它们的 powershell 脚本。

我想不通的是如何将选定的对象传递到我的自定义主机中。

我可以创建一个扩展的 tt 包含文件，该文件调用我自己的 api 来从它们的存储中检索这些对象，但是当我已经在范围内拥有对象的实例并且我只想检查它们以产生一些文本输出时，这似乎很愚蠢。

我希望这是有道理的...

我尝试向主机添加属性，然后使用主机特定设置，我认为我可以通过这些属性使用对象，但我得到的只是关于序列化和此类内容的错误。

如何做到这一点的一个非常好的例子会很棒:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T10:52:35.310

也许这篇[文章](http://www.olegsych.com/2008/04/t4-template-design/)会回答你的问题。“独立模板”可能是最好的设计选项。其他选项是环境变量和外部文件。但是，我希望您决定不使用自定义主机（除非您想拥有自己独特的 T4 风格，可能与任何其他 T4 主机不兼容）并改用 TextTransform.exe。

# c++ - VS 中的优化设置

> ID：806300
> 
> 赞同：0
> 
> 时间：2009-04-30T10:24:29.807
> 
> 标签：c++, visual-studio

我正在开发使用 Win32/ATL 创建的应用程序/GUI。所以有 UI 字段（文本字段）可以正常工作，如调试构建中设计的那样。在发布版本中，它会出现格式错误，并且看起来文本字段的宽度是无限的。它在调试版本中运行良好，但在发布版本中创建问题。所以我的问题是相同的代码如何在调试版本中工作而不在发布版本中工作。是否有可能与发布版本中的优化设置有关？在发布版本中，我们将优化设置设置为最小大小，支持小代码。此外，当我尝试调试发布版本时，它再次正常工作。发布版本中的调试是否会删除优化？

我想在发布版本中调试时重现该问题，或者如果可能在调试版本中重现该问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T11:26:37.443

VC++ 在调试模式下用特殊值填充它的运行时内存。但它不确保任何固定或零初始化。有关详细信息，请阅读此 SO 线程。[未初始化的内存块](https://stackoverflow.com/questions/65724/uninitialized-memory-blocks-in-vc)。这些值可能不会每次都使应用程序崩溃。

我曾经遇到过类似的情况。一个常见的例子是越过数组边界访问是一个错误。很多时候，这在调试模式下并不明显，但在发布版本中崩溃了。一般来说，运行时在调试模式下是宽松的，并为程序员的错误提供了更多的掩护。

正如其他人指出的那样，代码肯定存在一些问题；很可能是未初始化的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T11:27:14.120

**尝试使用s**选项启用[/RTC（运行时错误检查](http://msdn.microsoft.com/en-us/library/8wtf2dfz(VS.80).aspx)编译器标志。这会将局部变量初始化为非零值，这有助于诊断未初始化的变量。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T10:42:23.900

在我的脑海中：确保`ASSERT`您使用的 s 不包含任何逻辑，因为这些在发布版本中被丢弃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T10:45:32.270

这与优化无关。在调试版本中，编译器通常会将变量初始化为已知值，而在发布版本中则不会。您描述的症状可能是由于代码中未初始化的变量或指针。

# visual-studio - 大型项目中的资源 (resx) 维护

> ID：806305
> 
> 赞同：7
> 
> 时间：2009-04-30T10:26:05.577
> 
> 标签：visual-studio, visual-studio-2008, resources, maintenance, resx

在一个拥有大量资源 (resx) 的大型项目中，为了节省时间，什么是正确的翻译方法和/或工具，同时保持一切井井有条，不留下任何东西。

更准确地说，如何找到（就翻译而言）整个 .NET 应用程序从以前的版本到另一个版本的修改（添加和删除很容易）？resx 技术会帮助你吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T10:40:07.727

我个人觉得管理多个 ResX 文件非常令人沮丧。在其中一个项目中，我们开发了一个看起来很像这样的工具：

[![替代文字](https://i.stack.imgur.com/lrgED.png)](https://i.stack.imgur.com/lrgED.png)
[（来源：[rsdn.ru](http://www.rsdn.ru/projects/janus/article/tech/Localization/StrLoc1.png)）]

它允许在单个网格中编辑所有文化的资源。

此特定应用程序可[在此处](http://www.rsdn.ru/projects/janus/article/tech/Localization/Localization.xml)获得（它是俄语，抱歉）。

SVN repo 在这里，寻找`LocalizationUtil`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T10:59:26.400

我在这个答案中写了一些关于它的内容：

[resx 文件是否适合国际化？](https://stackoverflow.com/questions/805922/are-resx-files-suitable-for-internationalization/805938#805938)

概括：

您应该使用本地化工具。它会注意到原始文本是否更改以及是否添加了新文本，因此您始终知道需要翻译什么。

注意：本地化工具只管理翻译，而不是原始语言。

# ms-access - 拆分 Access DB 后性能下降

> ID：806307
> 
> 赞同：0
> 
> 时间：2009-04-30T10:27:58.457
> 
> 标签：ms-access

我们有一个 Access 数据库应用程序。（免责声明：我们更喜欢不同的技术，但事情发生了......）。为了并行使用和开发数据库，​​我们将数据库拆分为“数据”（后端）和“应用程序”部分，这似乎是 Access DB 的最佳实践。

现在性能已经下降，以前是即时的查询现在需要几秒钟。这有点令人惊讶，因为“更好的性能”应该是拆分数据库的优点之一。我们可以做些什么来让性能恢复到原来的水平甚至更好？

* * *

更新

我们做了更多的测试来解决这个问题。问题似乎是由永久访问的工作组文件（.mdw）引起的，并导致相当多的网络流量（不可避免的延迟问题）。当我将 .mdw 复制到本地文件并改用它时，性能非常好。显然，复制文件不是一个好的解决方案（因为我们想让 Access DB 在网络上对未知数量的用户可用）。有更好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-01T21:14:59.533

值得关注的是生产应用程序是否只是在更新链接表连接字符串。有时，Access 会在链接表中缓存元数据，这会导致数据查询效率极低。解决方案是在这种情况下完全删除链接表并从头开始创建它们。

不过，这可能只在您拥有与生产服务器不同的测试台服务器的情况下才有意义。如果两者都在同一台服务器上，则这种可能性要小得多，尽管很长的路径可能会导致性能瓶颈。

这是[Tony 的性能常见问题解答](http://www.granite.ab.ca/access/performancefaq.htm)中的建议之一，但让我指出，后端放置的位置会有所不同。我避免使用长路径名并尝试将所有后端 MDB 存储在服务器上的顶级存储中。也就是说， \Server\Databases 而不是 \Server\Data Files\My Workgroup\My 带有空格和内容的长路径名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T11:41:53.007

您需要确保每个用户都有一份前端副本。您还需要确保到后端的路径很短。[Tony Toews，MVP](http://www.granite.ab.ca/access/performancefaq.htm)有更多的表现技巧。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2009-04-30T10:43:20.463

唯一好的答案是从使用 Access 切换到使用其他一些技术。

# winforms - 将我的代码包含到 Windows 窗体应用程序中

> ID：806317
> 
> 赞同：0
> 
> 时间：2009-04-30T10:31:34.503
> 
> 标签：winforms, console-application

主要问题如下：我在控制台应用程序中编写了代码，但我不知道如何将我的代码包含到 WinForms 应用程序中。

我正在使用 Visual Studio 2008。

我需要知道我应该在哪里粘贴我的代码。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T10:40:51.517

您需要提供更多信息 Thaier。

您当前的代码到底是做什么的。例如，如果您的控制台应用程序使用写入文本，`Console.WriteLine();`您可能希望将其更改为写入 GUI 版本中的文本框或列表框。

同样，控制台应用程序中是否有任何用户输入，或者命令行参数（字符串 [] args）是否传递给主方法。

如果是这样，您可能希望更改在您的 WinForms 应用程序中接受此用户输入的方式。

如果您只有一个片段需要在应用程序启动时立即运行，请查看在应用程序启动时将立即`Form.Loaded`执行您的代码的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-01T19:35:57.150

转到项目属性并将输出类型从控制台应用程序更改为 Windows 应用程序。您还需要查看 Eoin Campbell 提到的内容，并确保您选择了正确的启动对象。

如果我正确理解您的问题，这应该是您需要做的所有事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-30T10:35:28.690

您可以将这两个项目添加到 VS 中的单个解决方案中。然后，只需从您的 Winforms 项目中引用您的控制台项目。这样，您的控制台和 Winforms 项目都可以共享代码。

您还可以将代码从控制台项目复制到 Winforms 项目。您可以简单地在 Visual stuio 中复制和粘贴，或者在解决方案资源管理器中右键单击项目，选择添加，然后选择现有项目。导航到选择器中的 .vb 或 .cs 文件并选择您的旧文件。

如果您正在寻找“代码”在 winforms 应用程序中的位置，只需双击表单上的空白区域。“代码隐藏文件”将出现。Form.Loaded 事件处理程序几乎等同于控制台应用程序中的 main 方法。

# mysql - 如何计算 MySQL 中的 URL 域？

> ID：806333
> 
> 赞同：2
> 
> 时间：2009-04-30T10:37:34.580
> 
> 标签：mysql, regex, url

我有一个 MySQL 表，其中有一列格式正确的 URL。我想得到一个列中唯一域名的表格，以及每个域出现的次数。是否有可以执行此操作的 MySQL 查询？

我想过做类似的事情......

```
SELECT COUNT(*)
FROM log
GROUP BY url REGEXP "/* regexp here */" 
```

...但这不起作用，因为 REGEXP 返回 0 或 1 而不是匹配的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T10:42:32.777

返回某个域的计数：

```
SELECT  SUM(url REGEXP '^http://example.com')
FROM    log 
```

不幸的是，`MySQL`不会在正则表达式上返回匹配的字符串。

如果您的日志记录总是看起来像`http://example.com/*`，您可以发出：

```
SELECT  SUBSTRING_INDEX(url, '/', 3), COUNT(*)
FROM    log
GROUP BY
        1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T10:48:23.213

好吧，如果它们是完整的网址，您可以先`replace("http://", "")`在第一次出现之后替换所有内容`/`

所以

```
http://www.domain.com/page.aspx 
```

会成为

```
www.domain.com 
```

我不确定 Replace 的 MySQL 语法，但在 MSSQL 中会。

```
DECLARE @url nvarchar(50)
SET @url = 'http://www.domain.com/page.aspx'
SELECT LEFT(REPLACE(@url, 'http://', ''), CharIndex('/', REPLACE(@url, 'http://', '')) - 1) 
```

从中您可以获得所有域名的子表，然后对它们进行计数/分组。

```
SELECT
    Count(*),
    DomainOnly
FROM
(
    SELECT 
        LEFT(REPLACE(urlColumn, 'http://', ''), CharIndex('/', REPLACE(urlColumn, 'http://', '')) - 1) as DomainOnly
    FROM 
        TABLE_OF_URLS
) as Domains
GROUP BY 
    DomainOnly 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T11:01:04.243

如果通过域您的意思是 TLD（因此您想将`www.example.com`、`corp.example.com`、`www.local.example.com`和计`example.com`为一个域），那么正则表达式将是：

```
 '[[:alnum:]-]+\.[[:alnum:]-]+/' 
```

我假设这是格式正确的 URL，形式为`schema://host/[path]`

# php - 在 zendframework 中呼吁采取行动

> ID：806336
> 
> 赞同：1
> 
> 时间：2009-04-30T10:38:46.420
> 
> 标签：php, zend-framework

我是 zendframework 的新手，我尝试运行示例快速入门，如果我提供不带 /pubilc 的 url，它不起作用但是如果我添加 /public，当我发送 from 以获取下一页时，我会得到第一个 html 页面我得到错误 在此服务器上找不到请求的 URL /QuickStart/public/extract。请问我如何开始在 url 中不公开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T11:51:27.307

您的文档根配置（可能在 Apache 中）应该以 ..../QuickStart/public/ 结尾，并且在该目录中是 .htaccess 和 index.php 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T18:48:59.220

The quickstart is written assuming that you set up an Apache Virtual host which points to the public/ directory.

If you can't do that, then try my tutorial: [http://akrabat.com/zend-framework-tutorial](http://akrabat.com/zend-framework-tutorial) which doesn't make that assumption.

In all cases, it is very important that you have mod_rewrite enabled for your Apache server along with AllowOveride All, so that .htaccess files work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T06:53:33.330

您需要将文档根目录设置为 public/ 目录。

如果您在可能无法使用的共享服务器上。在这种情况下，请使用[Lorenzo Alberton](http://www.alberton.info/zend_framework_mod_rewrite_shared_hosting.html)的以下 .htaccess 文件：

这里是：

```
RewriteEngine On

RewriteRule ^\.htaccess$ - [F]

RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ /public/index.php [NC,L]

RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]

RewriteRule ^public/.*$ /public/index.php [NC,L] 
```

把它放在你的文档根目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T11:10:12.523

没有足够的细节可以肯定地说，但看起来您将“公共”文件夹放在您的网络根目录中。

ZF 只需要**来自**web 根目录内公共文件夹的文件，其余的则放在外部 - 文件夹结构中的较高位置。

# c++ - 防止链接器删除全局变量

> ID：806348
> 
> 赞同：14
> 
> 时间：2009-04-30T10:44:25.033
> 
> 标签：c++, linker, global-variables

我使用静态全局变量构造函数来方便地注册函数，这个想法是这样的：

```
typedef int (*FuncPtr)(int);

struct RegHelper
{
    RegHelper(const char * Name, FuncPtr Func)
    {
        Register(Name, Func);
    }
}

#define REGISTER(func) RegHelper gRegHelper_ ## func (#func, func); 
```

现在我可以通过这种方式注册函数（我用它来实现某种反射）：

```
int Foo(int a)
{
    return a * 123;
}

REGISTER(Foo)

int Bar(int a)
{
    return a * 456;
}

REGISTER(Bar) 
```

问题是，如果我在静态库中使用它，有时链接器会检测到编译单元没有被使用，它会丢弃整个东西。所以没有构造全局变量，也没有注册函数……

我的问题是：我能做些什么来解决这个问题？在初始化期间在每个编译单元中调用虚拟函数似乎会触发全局变量的构造，但这感觉不是很安全。还有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T11:55:31.070

要解决这个问题：

*   Visual Studio（在同一解决方案中）：链接器>常规>使用库依赖输入=是
*   Gcc：直接与 .o 文件链接

我还没有找到我真正喜欢的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-31T15:28:26.113

在此处查看答案：[强制视觉工作室链接 lib 文件中的所有符号](https://stackoverflow.com/questions/599035/force-visual-studio-to-link-all-symbols-in-a-lib-file)

这个实际上对我有用。其他建议没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T15:23:42.163

查看[“构建每种类型数据列表的最佳方法”的答案](https://stackoverflow.com/questions/401621/best-way-to-build-a-list-of-per-type-data)

其中有两个关键的重要概念。第一的：

```
(void) register_object; 
```

使用该对象来确保链接器不会剥离它，并且，

```
template<typename D> typename automatic_register<D>::exec_register 
    automatic_register<D>::register_object; 
```

确保为每个实例分配一个静态全局变量。您应该将数据保存在此对象中。它有点不同，因为它是每个对象而不是每个类，但是如果你调整你的宏来创建

```
// Global list of objectsh
struct FpList
{
   FpList( FuncPtr func ) :
      func(func)
   {
      head = next;
      next = this
   }
   FpList* next;
   FuncPtr func;

   static FpList* head;
};
// In .cxx:
FpList* FpList::head = 0; 
```

然后修改您的注册宏，以便 REGISTER(Foo)，以便它创建：

```
struct register_Foo : FpList
{
   register_Foo( FuncPtr fn ): FpList(fn)
   {
      (void) register_object;  
   }
   static register_Foo register_object;
}; 
```

我认为这还不够。您仍然需要实例化模板，传递 if &Foo 并确保

```
register_Foo register_Foo::register_object 
```

实例是在某处创建的。automatic_register 的模板代码显示了如何在标题中执行此操作。如果您可以将宏放在 .cxx 中，只需声明：

```
register_Foo register_Foo::register_object( &Foo ); 
```

作为宏的一部分。我认为它可能会奏效。（全凭记忆，谁知道呢）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T20:37:09.867

如果您在 UNIX 环境中调用带有 whole-archive 选项的 ld 将强制所有对象文件包含在静态库中，无论使用如何。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T10:50:24.847

是的，我也遇到过这个问题。我发现的唯一可靠的方法是：

*   将库变成 DLL

或者：

*   将注册对象移动到可执行文件中

这些都不是完美的，尽管如果你不介意使用 DLLS，DLL 解决方案是可以的，我也很想听听其他解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-26T11:22:13.963

同一问题的另一种可能的解决方案。通过函数调用获取常量值。像这样：

常数.h

```
const char blah[10];

extern const char *get_blah(); 
```

常数.c

```
#include "header.h"

const char *get_blah()
{ return blah; } 
```

这帮助我做到了！

# asp.net - 您将如何通过向 ASP.Net 开发人员提问或具体问题来检查他的真实性

> ID：806349
> 
> 赞同：2
> 
> 时间：2009-04-30T10:44:38.840
> 
> 标签：asp.net

您将如何通过向 ASP.Net 开发人员提问或具体问题来检查他的真实性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T11:27:10.140

以下是我脑海中的一些话题，我可能会根据面试问题：

向他们询问页面生命周期事件——您希望他们能够谈论 Page_load、Pre_Render 等以及他们可能使用它们的原因。

向他们询问他们从事的 ASP.NET 项目的种类——这通常会阻止那些没有真正使用过 ASP.NET 的人。

询问他们使用过或讨厌使用过的框架（Microsoft UIP 浮现在脑海中）。他们最喜欢的功能是什么。

让他们谈论 ViewState，如果他们知道这是什么，那么就向他们询问 ControlState。请他们描述不同版本的 ASP.NET 中发生了哪些变化。

还要问他们对 ASP.NET MVC 的看法。如果他们没有听说过这一点，那么他们可能不会关注该技术的最新发展。

询问他们是否使用过 ASP.NET AJAX 框架。他们听说过 JQuery 吗？

还问他们是否阅读过任何博客——Scott Gu 的博客是 ASP.NET 开发人员的最爱。

询问他们将如何构建 ASP.NET 应用程序。

向他们询问有关 SQL Server 的信息。他们是否知道读者会阻止作者（仅对高点击率网站真正有用）？

向他们询问提供者模式以及为什么它在 ASP.NET 中有用。还有关于成员资格/角色 API 等的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T10:59:04.623

我很想给他们一个简单的数据访问数据库的任务，也许是一个回发表单，如果你想多测试一下，也许让他们实现一个简单的接口，或者继承从您为测试创建的东西中引入他们必须使用的更多功能。这涵盖了我猜想的基础知识，但基础知识远不止上述内容。

你可能很残忍并且禁止访问互联网，但我知道我忘记语法的次数远远超过我愿意承认的程度，并且经常在谷歌上搜索语法/功能提醒，所以这取决于你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T10:47:02.483

要求他只使用代码隐藏（C# 或 VB 风格）编写一个完整的网页。

添加回发能力的奖励积分:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T10:51:50.570

如果你的意思是[真诚](http://dictionary.reference.com/dic?q=genuineness&search=search)。只需问他有关会话和动态数据的问题......问他从数据库中生成一个带有表单和网格视图的简单页面需要多长时间。如果花费超过 10 分钟或者该人开始使用设计器窗口，他不是 asp.net 的专业人士......对不起 GUI 爱好者。如果你不理解代码并且不得不从 GUI 中作弊来构建一些东西……你就迷路了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T10:55:35.990

[这似乎有一些很好的面试风格问题和答案](http://blogs.crsw.com/mark/articles/254.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-30T11:05:53.047

你应该用简单的问题问他。但是这个问题显示了他的想法（+对asp.net框架的理解）。请不要问他技术性很强的问题。因为他将成为文本框阅读器而不是 asp.net 开发人员。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-30T11:16:56.577

网上面试题很多，我就随便挑了自己喜欢的。

当我被要求编写一个简单的应用程序并在面试后通过电子邮件发送时，我喜欢它。甚至像编写页面命中计数器这样简单的事情。

当雇主对程序员进行全面的面试时，这让我更想要这份工作。

# ms-access - 如何在 Access 表中插入列描述？

> ID：806362
> 
> 赞同：2
> 
> 时间：2009-04-30T10:50:22.397
> 
> 标签：ms-access

如何使用 SQL 为 Access 表中的列插入描述？

我愿意：

```
CREATE TABLE TAB_A (COLUMN1 TEXT(30), COLUMN2 REAL, PRIMARY KEY (COLUMN1) 
```

但是如何为每一列插入描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T11:42:26.440

你不能在 SQL 中做到这一点。

KB210314：[ACC2000：如何使用 ADO 或 DAO 检索字段的描述](http://support.microsoft.com/kb/210314)

我认为它可以设置为与可以检索相同的方式：

```
Function SetFieldDesc_ADO(ByVal MyTableName As String, ByVal MyFieldName As String, ByVal Description As String)

   Dim MyDB As New ADOX.Catalog
   Dim MyTable As ADOX.Table
   Dim MyField As ADOX.Column

   On Error GoTo Err_SetFieldDescription

   MyDB.ActiveConnection = CurrentProject.Connection
   Set MyTable = MyDB.Tables(MyTableName)
   MyTable.Columns(MyFieldName).Properties("Description").Value = Description

   Set MyDB = Nothing

Bye_SetFieldDescription:
   Exit Function

Err_SetFieldDescription:
   MsgBox Err.Description, vbExclamation
   Resume Bye_SetFieldDescription
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T11:40:55.163

```
Dim col As ADOX.Column = New ADOX.Column
With col
  .Name = name
  .Type = type
  .DefinedSize = size
  .ParentCatalog = cat
  .Properties("Description").Value = description
End With 
```

# .net - Webform 中的 UserControl 事件

> ID：806368
> 
> 赞同：1
> 
> 时间：2009-04-30T10:52:17.590
> 
> 标签：.net, asp.net

我有一个包含 3 个按钮和 7 个文本框的用户控件。我正在使用 LoadControl 在我的网络表单中动态调用该用户控件。

但我的问题是

1.如何知道我的页面上点击了哪个按钮（用户控件）？

2.如何发起这些事件？

谢谢卡维莎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T10:59:39.303

在您的用户控件中创建事件并在单击按钮时触发它。因此，您可以从主页管理此事件。

有关更多信息，请查看[从 ASP.NET ASCX 用户控件轻松引发事件](http://codebetter.com/blogs/brendan.tompkins/archive/2004/10/06/Easily-Raise-Events-From-ASP.NET-ASCX-User-Controls.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T19:30:16.663

在您的用户控件 (WebUserControl1.ascx) 中，您可能有一个带有单击处理程序的 Button1，其行为如下：

```
Event Button1Click(ByVal button As Button)

Private Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
  RaiseEvent Button1Click(sender)
End Sub 
```

然后您可以在父控件中动态地将 EventHandler 附加到 this 上，如下所示：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim buttonControl As WebUserControl1 = LoadControl("WebUserControl1.ascx")
    AddHandler buttonControl.Button1Click, AddressOf ControlEventHandler
End Sub

Private Sub ControlEventHandler(ByVal ctl As Control)
    'We now have access to this control's properties
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T11:00:32.983

您可以在自己的代码隐藏文件中处理用户控件上的控件事件，并在用户控件上引发事件，这些事件又可以由页面的代码隐藏文件处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T11:01:12.247

最好的办法是让用户控件将控件封装在其中，然后引发有意义的事件。例如，我编写了一个日期选择器用户控件，它有一个 RadioButtonList 可以在“过去 12 个月”、“年初至今”或“自定义日期”以及开始日期和结束日期文本框之间进行选择。我的用户控件公开了一个 DateChanged 事件，如果进行了新的单选按钮选择，或者进行了“自定义”选择并且输入日期发生更改，则会引发该事件。

这样，控件的用户就不需要知道控件的复杂实现。它只是订阅 DateChanged 事件。

# wcf - 输入字符串的格式不正确

> ID：806370
> 
> 赞同：2
> 
> 时间：2009-04-30T10:53:33.717
> 
> 标签：wcf

我只是创建了一个正在打印的 wcf 服务`"hello world"`。创建了一个顺序控制台工作流，向工作流添加了发送活动和代码活动。在这里引用了服务。配置发送活动。为返回值创建依赖属性。

现在当我运行应用程序时。`program.cs`它在该行的文件中引发格式异常

```
WorkflowInstance instance = workflowRuntime.CreateWorkflow(typeof(Using_SendActivity.Workflow1)); 
```

我哪里出错了？

```
System.FormatException was unhandled
  Message="Input string was not in a correct format."
  Source="mscorlib"
  StackTrace:
       at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
       at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
       at System.Int32.Parse(String s, IFormatProvider provider)
       at System.Diagnostics.PerformanceCounterLib.GetStringTable(Boolean isHelp)
       at System.Diagnostics.PerformanceCounterLib.get_NameTable()
       at System.Diagnostics.PerformanceCounterLib.get_CategoryTable()
       at System.Diagnostics.PerformanceCounterLib.CategoryExists(String machine, String category)
       at System.Diagnostics.PerformanceCounterCategory.Exists(String categoryName, String machineName)
       at System.Diagnostics.PerformanceCounterCategory.Exists(String categoryName)
       at System.Workflow.Runtime.PerformanceCounterManager.SetInstanceName(String instanceName)
       at System.Workflow.Runtime.WorkflowRuntime.StartRuntime()
       at System.Workflow.Runtime.WorkflowRuntime.InternalCreateWorkflow(CreationContext context, Guid instanceId)
       at System.Workflow.Runtime.WorkflowRuntime.CreateWorkflow(Type workflowType)
       at Using_SendActivity.Program.Main(String[] args) in C:\Documents and Settings\as73043\My Documents\Visual Studio 2008\Projects\Using SendActivity\Using SendActivity\Program.cs:line 28
  InnerException: 
```

我正在使用的 wcf 文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace WcfServiceForSendActivity
{
    // NOTE: If you change the class name "Service1" here, you must also update the reference to "Service1" in App.config.
    public class Service1 : IService1
    {
        #region IMyService Members

        public string GetResponse()
        {
            return string.Format("Hello World !!!");
        }

        #endregion

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-06-05T18:44:01.633

请参阅[PerformanceCounterCategory.Exists 抛出“输入字符串的格式不正确。”](https://stackoverflow.com/questions/1152428/performancecountercategory-exists-throwing-input-string-was-not-in-a-correct-for) 对于类似的例外。

解决方案是执行注册表清理，解释如下：http: [//support.microsoft.com/default.aspx ?scid=kb;en-us;300956](http://support.microsoft.com/default.aspx?scid=kb;en-us;300956)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-08T22:31:20.007

在 Win7 上，从提升的命令提示符运行“lodctr /R”并重新启动以重新加载性能计数器。

此 KB 包含有关旧操作系统的更多详细信息。 [http://support.microsoft.com/kb/300956](http://support.microsoft.com/kb/300956)

# ajax - ExtJs 级联组合问题

> ID：806371
> 
> 赞同：1
> 
> 时间：2009-04-30T10:53:36.320
> 
> 标签：ajax, extjs, cascadingdropdown

我有一个问题（可能是我错误地使用了 ExtJs，我希望这样做）使用 ExtJs 在表单中执行级联组合。这是这种情况：

1.  我有 3 个组合，区域，地区，城市
2.  当我按顺序单击其中一个时，相关的将被更新，使用 Json 作为数据格式发出 ajax 请求（所以即使我认为它没有用，序列是正常序列 Zones -> Regions -> Cities ）
3.  即使它不是那么重要，我在 ASP.NET MVC 后端

当我作为我做的第一个操作时，问题出现了..但没有任何反应。在这种情况下，ajax 请求也正确完成，并且返回的结果 Json 数据与“如果我尊重点击顺序（区域 - > 区域）”返回的结果相同。

让我说，当我第一次进入页面时，我做了一个正常的点击顺序，一切都很顺利，但是当我改变点击顺序时，就像我之前说的那样，事情就不会再起作用了。

我们用来执行此操作的代码是：

```
var RegionsStore = new Ext.data.JsonStore({
                              url:'/mypath/blabla',
                              fields:['Value','Text']
                   });
Ext.onReady(function() {
    Ext.getCmp('ext-Area').on('select', function(sender, item) {
        var target = Ext.getCmp('ext-Regions');
        target.setDisabled(true);
        target.setValue('');
        target.store.removeAll();
        target.displayField = 'Text';
        target.valueField = 'Value';
        target.store = RegionsStore;
        target.store.reload({
               params: { 
                  data: 'regions', 
                  discriminator: 'area', 
                  value: sender.getValue()
               }
        });
        target.setDisabled(false);
    });
}); 
```

在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-17T09:03:43.283

对于可能会发现此问题的其他人，这里有一个关于如何编码链接组合的教程：

[http://extjs.com/learn/Tutorial:Linked_Combos_Tutorial_for_Ext_2](http://extjs.com/learn/Tutorial:Linked_Combos_Tutorial_for_Ext_2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-01T10:24:11.953

`combo-2.store.clearFilter();`在更新之前调用第一个组合选择处理程序以清除第二个组合内部过滤器。

# pdflatex - 投影仪中带有文本的圆角框

> ID：806372
> 
> 赞同：3
> 
> 时间：2009-04-30T10:55:06.850
> 
> 标签：pdflatex

我想在乳胶中有几个文本，它们被装在一个圆形或更多的圆形框中。我尝试使用：

```
\pgfnodecircle{Node1}[stroke]{\pgfxy(1,1)}{0.5cm}
\pgfnodecircle{Node2}[strokel]{\pgfxy(3,0.5)}{0.25cm}
\pgfnodecircle{Node3}[fill]{\pgfxy(5,1)}{0.25cm}  
\pgfnodeconnline{Node1}{Node2}  
\pgfnodeconnline{Node2}{Node3} 
```

但是这个`\pgfnodecircle`命令不允许我在 nodecircle 内写文本。我可以添加文本，`\pgfnodebox`但我真的希望文本被圆角框而不是矩形框包围。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-10-17T02:26:59.920

也许您想要块环境：块、定理、证明和示例？然后，您可以找到一种 Beamer 样式来使它们变圆。

```
\begin{block}{Block title}
text here
\end{block} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-30T21:41:21.757

命令`\ovalbox`和`\Ovalbox`定义的包*fancybox*可能会有所帮助：

```
\documentclass{article}
\usepackage{fancybox}
\begin{document}
  \ovalbox{hello}
  \Ovalbox{world}
  bye
  \doublebox{important}
\end{document} 
```

请查看[fancybox 包的文档以](ftp://ctan.tug.org/tex-archive/macros/latex/contrib/fancybox/fancybox.pdf)获取更多详细信息。

其他有趣的命令：`\boxed`在*amsmath*包`\shabox`中定义和在*shadow*包中定义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-08-31T07:56:08.200

尝试这个：

```
\setbeamercolor{uppercolgreen}{fg=white,bg=green!35}
\setbeamercolor{lowercolgreen}{fg=black,bg=green!10}
...
\begin{beamerboxesrounded}[upper=uppercolgreen,lower=lowercolgreen,shadow=true]
{Definition - What is A:} 
$A:= 2 + 5$.
\end{beamerboxesrounded} 
```

# iphone - iPhone - 初始化图像的最节省内存的方法？

> ID：806374
> 
> 赞同：4
> 
> 时间：2009-04-30T10:55:12.807
> 
> 标签：iphone, memory-management

我读过 imageNamed: 在尝试初始化图像时很糟糕。但是，最好的方法是什么？我正在使用 imageWithContentsOfFile: 并在我的资源文件夹中传递图像的路径

```
[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:imageName ofType:@"jpg"] 
```

此调用在 for 循环中进行了大约 30 次。

现在，当我使用 Instruments 运行我的应用程序时，我看到 NSString 为上面使用字符串文字 (@"jpg") 的操作耗尽了很多内存，Instruments 将负责的调用者显示为 [NSBundle mainBundle]当我使用字符串文字作为类型时，反过来又指向该行。

那么在不使用太多内存的情况下初始化图像的最有效方法是什么？

我将声明更改为

```
img = [UIImage imageWithContentsOfFile:[bndl pathForResource:fileName ofType:extn]] 
```

其中`extn`是静态的并初始化为`@"jpg"`. `fileName`for 循环的每次迭代都在不断变化。但即便如此，最大的使用`NSString`是因为`[NSBundle mainBundle]`并`[NSBundle pathForResource:OfType:]`根据 Instruments。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T14:56:03.807

我会避免在循环中使用自动释放的对象。如果 Instruments 在 NSBundle pathForResource:ofType: 调用上报告了很多命中，我会将其中的一些处理拉到循环之外。

我建议的实现看起来像这样：

```
NSString *resourcePath = [[[NSBundle mainBundle] resourcePath] retain];

for (int i = 0; i < 1000; ++i) 
{   
    ...

    NSString *pathForImageFile = [resourcePath stringByAppendingPathComponent:fileName];
    NSData *imageData = [[NSData alloc] initWithContentsOfFile:pathForImageFile];

    UIImage *image = [[UIImage alloc] initWithData:imageData];
    [imageData release];

    ... 

    [image release];
}

[resourcePath release]; 
```

您将累积一个自动释放的字符串 (pathForImageFile)，但这不应该那么糟糕。您可以在循环中创建和释放一个自动释放池，但我建议最多每 10 或 100 次循环执行一次，而不是每次执行。此外，在 resourcePath 上的保留和释放可能是多余的，但我把它放在那里以防你想在这里的某个地方使用自己的自动释放池。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T12:04:07.353

`imageNamed:`在某些情况下很糟糕，因为它会在加载后缓存图像。因此，如果您要重用图像（很可能是您的应用程序包中的某些内容），则使用`imageNamed:`非常好。但是，如果您有很多不同的图像，并且您只会偶尔加载特定的图像，那么您会想要避免它。

如果你不想使用`imageNamed:`，第一段代码就可以了。如果您担心循环中创建的临时字符串，请将其放在循环之前：

```
NSAutoreleasePool * pool = [NSAutoreleasePool new]; 
```

而这之后：

```
[pool release]; 
```

这将确保一旦循环退出，循环内的任何临时对象都会被释放。但是，请确保保留您要*保留*的任何临时对象。（例如，图像本身需要添加到将保留它们的数据结构中，例如数组、字典或集合，或者手动保留。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T12:01:19.763

您可以做的是确保在循环中释放自动释放的对象

前：

```
for (int i = 0; i < 1000; ++i) 
{   
   UImage* img = [UIImage imageWithContentsOfFile:
        [bndl pathForResource:fileName ofType:extn]];  
   ... 
} 
```

后：

```
for (int i = 0; i < 1000; ++i) 
{   
   NSAutoreleasePool* ap = [[NSAutoreleasePool alloc] init];
   UImage* img = [UIImage imageWithContentsOfFile:
        [bndl pathForResource:fileName ofType:extn]];  
   ... 
   [ap release];
} 
```

但我怀疑那些 NSString 实例会造成太多麻烦：

1.  UIImages 应该比字符串（> = 100x）占用更多的内存。
2.  如果您的循环只有 30 次迭代，并且您到达事件循环，则自动释放池将被释放，因此您不应看到超过 30 个字符串。（循环中没有 AP 的事件）

你确定你正确地解释了 Instruments 的输出吗？您确定代码的其他部分没有泄漏这些字符串吗？（有问题的代码看起来不错）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T17:01:33.193

我还没有看到有人提到它，但是您看到该行创建了多个 NSString 实例的原因是因为 pathForResource:ofType: 必须将字符串连接在一起以从各种组件（目录名、文件名， 延期）。

我也坚定地站在“别担心”阵营中。与即使是非常小的图像所占用的内存相比，几十个 NSString 实例也只是噪声。如果您的循环从 30 个图像变为几千个，或者其他什么，那么您可能需要考虑在循环内创建一个 NSAutoreleasePool。

# keypress - 在未激活的应用程序中模拟鼠标移动/单击/按键

> ID：806376
> 
> 赞同：1
> 
> 时间：2009-04-30T10:55:40.623
> 
> 标签：keypress, simulate

我知道如何模拟鼠标和键盘事件，但它们的行为就像用户做了它们一样，所以它们会影响活动的窗口。我需要的是模拟其中一个输入，但在一个不活动的窗口中。

我并不是说它被最小化了，例如，想象一下，你有 msPaint 和记事本。记事本在油漆前面。并且您想在绘图窗口的某些坐标中模拟鼠标单击，但不将其设置为活动状态，从而使用户可以继续使用位于绘图前的记事本。

这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T11:31:21.333

您可以执行以下操作：

1）获取`HWND`要在其中模拟事件的窗口。为此，您可以使用该`FindWindow`函数，该函数接受两个参数，一个是窗口的类名（您可以使用`NULL`），另一个是窗口的名称（有关详细信息，请参阅 MSDN 文档）；

`SendMessage`2) 使用函数向所需窗口发送消息。参数为：之前获取的窗口句柄`HWND`（消息（在这种情况下非常复杂，您应该查看 MSDN 了解详细信息）。`WM_KEYDOWN``WM_MOUSEMOVE``WM_LBUTTONDOWN``WPARAM``WM_KEYDOWN``LPARAM``WM_KEYDOWN`

在我看来，这对于您打算做的事情已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T11:06:58.833

好吧，如果您了解 JAVA，您可以使用 robots 类。

> 此类用于生成本地系统输入事件，用于测试自动化、自运行演示和其他需要控制鼠标和键盘的应用程序

[Java 机器人类](http://java.sun.com/j2se/1.4.2/docs/api/java/awt/Robot.html)

也许.net中有一些类似的东西？

# objective-c - @property 和 @synthesize 有什么区别？

> ID：806379
> 
> 赞同：3
> 
> 时间：2009-04-30T10:56:36.003
> 
> 标签：objective-c, cocoa-touch, uikit, properties

据我了解，@synthesize 实际上正在生成 Getter 和 Setter。但是@property 然后在做什么呢？它只是为那个很酷的@synthesize 魔术函数设置参数吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-30T11:34:45.537

`@property`将名称声明为属性。这意味着，它将可以通过点语法 ( `object.value`) 访问。

`@synthetize`可以看作是一个宏，它创建了 getter 和 setter 方法。知道您可以覆盖这些方法是很有用的，即使您键入了这些方法`@synthetize`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-30T11:17:10.883

你在头文件中写@property

```
@property float value; 
```

相当于：

```
- (float)value; 
- (void)setValue:(float)newValue; 
```

它获取其他类的信息，您的类具有此方法

@synthesize phisicaly 在类实现中创建这些方法

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-30T15:07:12.063

`@property`声明 getter 和/或 setter

`@synthesize`实现它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-14T11:10:14.817

有一个常见的误解，即需要 @synthesize 指令才能实现使用 @property 指令创建的 setter 和 getter，但事实并非如此。在不使用 @synthesize 的情况下使用 @property 指令仍会生成 setter/getter 并允许您使用点表示法。但是，省略@synthesize 指令将导致编译器生成带有前导下划线字符的相应实例变量，例如属性myVar 将具有_myVar 的实例变量。

使用前导下划线是一种常见约定，可让您区分属性和实例变量。属性和实例变量共享相同名称也很常见，这是 @synthesize 默认所做的。

# .net - How to change the loading path of references in .NET?

> ID：806383
> 
> 赞同：1
> 
> 时间：2009-04-30T10:59:09.740
> 
> 标签：.net, visual-studio, dll, reference

I want a setup like this:

```
+- /ApplicationFolder
  -- App.exe
  -- Core.dll
  -- AnotherShared.dll
  +- /PluginsFolder
    -- plugin1.dll
    -- plugin2.dll 
```

But because plugin1.dll references to Core.dll and Shared.dll when I compile the application it drops a copy of "Copy.dll" and "Shared.dll" to plugins folder as well and if I remove them it doesn't work any more.

How can I solve this problem?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T11:04:12.317

When you create an AppDomain you can define a path for loading assemblies. Set [`AppDomainSetup.PrivateBinPath`](http://msdn.microsoft.com/library/system.appdomainsetup.privatebinpath. "MSDN") and pass to AppDomain.Create domain.

Using an AppDomain is a good idea for plugins (allows different CAS and unloading).

To avoid VS/msbuild copying referenced assemblies to the output directory, change "Copy Local" to false in the properties of the reference.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T11:33:42.560

My MEF application is set up so that plugin projects compile to their own folder (as the is the default), then I use a post-build command to copy specific files to the output extensions folder.

The other way is to have the project build directly into the appropriate output folder and, as the other poster said, open the "Properties" panel for each relevant reference in your plugin project and set "Copy Local" to false.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-19T11:04:32.230

you can try this: [How can I set PrivateBinPath in MEF?](https://stackoverflow.com/questions/806467/how-can-i-set-privatebinpath-in-mef)

or you can try handling the Appdomain.AssemblyResolve event that is raised anytime .net cant locate an assembly. there you can implement custom logic to locate and load assemblies from anywhere.

the AssemblyResolve eventhandler jsut returns either the assembly that is beeing looked for or null, so you could return the already loaded Core.dll from available from the AppDomain.GetAssemblies() method.

however in your case it should be ok to simply not include Code.dll with plugin1.dll, .net should already realize that Core.dll is loaded and use that instance

# mod-rewrite - 如何正确重写 url？

> ID：806399
> 
> 赞同：0
> 
> 时间：2009-04-30T11:02:52.837
> 
> 标签：mod-rewrite, url-rewriting

在将php中的url从动态重写为静态时......假设`story.php?id=12`现在在故事页面中重写url时我将阅读`$_GET['id']`它将返回null......

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T11:08:55.490

确保在重写规则中添加参数...

例如，如果新地址是 /Story/12/ 而不是 story.php?id=12 它看起来像这样：

```
RewriteRule ^Story/([^/\.]+)/?$ story.php?id=$1 [L,NC,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T11:09:34.007

嗯......你的重写规则看起来如何？您是否可能误解了 URL 重写的要点？

目标通常是向用户呈现“静态” URL，这些 URL 被重写为 GET 参数，以便您可以在脚本中使用它们。听起来您正在做相反的事情-但是为什么呢？

与往常一样，要为您的问题获得好的答案，您需要准确地说

1.  你做了什么
2.  你期望发生的事情
3.  反而发生了什么事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T11:12:12.907

你的重写检查了吗？如果不尝试使用类似下面列出的东西：

```
RewriteRule    ^story/(.+)/$ story.php?id=$1 [QSA] 
```

# installation - 选择新的设置工具

> ID：806400
> 
> 赞同：1
> 
> 时间：2009-04-30T11:03:03.787
> 
> 标签：installation

我们有一个包含多个应用程序的项目，包括 Web 应用程序、Web 服务、Windows 服务和 Windows 应用程序。我们还有 SQL Server Express、.NET 2.0 等先决条件。在设置过程中我们没有太多的用户交互，但我们希望为其添加更多智能。

我们目前正在使用 Visual Studio 为所有这些生成集成设置。但是我们一直在努力让它像我们想要的那样工作。

我们希望将我们的设置工具更改为足够简单和灵活的工具。

我们还在为升级程序寻找更好的解决方案，它必须在已部署的系统上运行升级 sql 脚本。也许这可以与设置集成。

我们正在考虑使用 InstallShield，但有人说它会带来很多复杂性。您认为完成这项工作的最佳工具是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-19T18:17:34.940

在阅读了这些答案后，我们最终决定使用 Advanced Installer，它具有遵守 MSI 标准并且使用起来非常简单的优点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T11:05:49.600

WiX 是您的朋友。

[http://wix.sourceforge.net/](http://wix.sourceforge.net/)

WiX 是一种非常灵活的设置技术，由 xml 驱动，并具有大量工具和知识。

有许多与 WiX 相关的博客。查看：

[http://www.joyofsetup.com/](http://www.joyofsetup.com/)

[http://robmensching.com/blog/](http://robmensching.com/blog/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-19T18:34:41.457

我使用过[Installshield](http://www.acresso.com/products/is/installshield-overview.htm)、[NSIS](http://nsis.sourceforge.net/)、 Visual Studio 和[WiX](http://wix.sourceforge.net/)。Installshield 总是为我制作一个臃肿的安装程序，而且成本很高。Visual Studio 在它可以做的一些事情上可能会受到限制，但总的来说它还是不错的。NSIS 绝对是一个不错的小型安装系统，因为我已经将它用于一些产品（一个已经下载并安装了大约 75 万次的产品），但是当我使用它时，它并没有遵循 MSI 规则。WiX 很棒，也为您提供了很多功能，但它是基于脚本的，但现在也有 GUI。

当然，看起来您已经决定使用 Advanced Installer。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T11:12:42.983

由于您提到了 Visual Studio 和 .net，我假设您正在部署到基于 Windows 的服务器，但即使您仍然可能想看看[fabric](http://www.nongnu.org/fab/)。它是一个基于 python 的部署工具。您可以编写和启动脚本来部署和设置您的服务器、Web 服务等。唯一的问题是我不确定它与 Windows 作为目标服务器的性能如何。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T11:26:51.360

如果您想或必须遵守 Windows 平台的 MSI 标准安装，我会支持 Martin Peck 对 WiX 的推荐。它与 VS-setup 项目和 Installshield 使用的技术基本相同——各有利弊。

如果您不需要**在**MSI 火车上，您还可以查看更简单的替代方案 - 我最喜欢的是[InnoSetup](http://www.jrsoftware.org/isinfo.php)。它是免费的，它完全易于使用，它是开源的（Pascal/Delphi），它可以在几分之一秒内安装您的应用程序，它只是工作！:)

马克

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-30T13:40:28.353

我不喜欢 InstallShield 的三件事：

1.  似乎过于复杂
2.  没有办法（据我所知）从命令行生成，你总是必须使用 GUI，这是自动构建的障碍。
3.  这似乎增加了过多的开销。

我已经使用了相当多的[NSIS](http://nsis.sourceforge.net/)，它是开源的。InstallShield 对事物的看法几乎太高了，而 NSIS 几乎是太低了。例如，您必须编写代码来插入注册表项，以便通过添加/删除程序进行卸载。但是，您将能够完成工作，并完全控制它将做什么，并且它将打包成一个非常紧凑的单个可执行文件。

我没有使用[InnoSetup](http://www.jrsoftware.org/isinfo.php)或[WiX](http://wix.sourceforge.net/)的经验- 它们中的任何一个都可能在 InstallShield 和 NSIS 两个极端之间引导路线。两者都是免费提供的，也值得一看。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-19T18:49:12.910

我们也选择了 WiX。请注意，您仍然需要了解有关 Windows Installer 机制的所有信息。WiX 版本控制友好且非常透明

如果您需要自定义操作并且想用 .NET 语言编写，那么请使用 CustomActionAttribute 方法。您可以使用 WinForms 编写设置对话框。

这个站点也是一个很好的来源[InstallSite.org](http://www.installsite.org/)

# jquery - 如何获取body元素的高度

> ID：806402
> 
> 赞同：18
> 
> 时间：2009-04-30T11:03:29.620
> 
> 标签：jquery, css

这里所有 's 的总高度为`<div>`900 像素，但 jQuery 函数返回正文的高度为 577 像素。（如果我删除 body CSS，它就可以工作）。

这个问题有解决方案吗？

```
$j(function() {
    alert($j("body").height());
})

html, body {
    height:100%;
}

<div style="height:200px">header</div>
<div style="height:500px">content</div>
<div style="height:200px">footer</div> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-04-30T12:16:28.307

只需使用

```
$(document).height() // - $('body').offset().top 
```

和/或

```
$(window).height() 
```

代替`$('body').height();`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-04-30T11:15:52.993

放

```
html { height: 100%; }
body { min-height: 100%; } 
```

而不是`height: 100%`.

jQuery 返回的结果是正确的，因为您已将主体的高度设置为 100%，而这可能是视口的高度。这三个 DIV 导致溢出，因为 BODY 元素中没有足够的空间供它们使用。要了解我的意思，请为 BODY 标签设置边框并检查边框的结束位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-11-27T15:45:24.190

$(document).height() 似乎可以解决问题，并给出总高度，包括仅通过滚动可见的区域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T11:16:42.960

我相信返回的身高是可见高度。如果您需要总页面高度，您可以将 div 标签包装在包含 div 中并获取其高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-23T02:43:34.563

我们试图避免使用 IE 特定的

```
$window[0].document.body.clientHeight 
```

并发现以下 jQuery 不会始终产生相同的值，但最终会在我们的页面加载场景中的某个时刻产生，这对我们有用并保持了跨浏览器支持：

```
$(document).height() 
```

# flash - Magento 1.3 - Flash 的图片上传问题

> ID：806405
> 
> 赞同：0
> 
> 时间：2009-04-30T11:04:50.100
> 
> 标签：flash, magento

在大多数情况下，magento 1.3.0 中的图像上传功能都失败了。我们在 Windows 服务器上运行我们的 magento 实例。我试图切换浏览器使用的 plash 插件的版本，但没有成功。人们还尝试过哪些其他解决方法来使其始终如一地工作？问候，P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T11:10:25.457

这是 Flash Player 10 的一个已知问题。

有一个用于 Firefox 的插件，可让您切换到不同版本的 flash player (9)。

[http://www.sephiroth.it/weblog/archives/2006/10/flash_switcher_for_firefox.php](http://www.sephiroth.it/weblog/archives/2006/10/flash_switcher_for_firefox.php)

试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-01T11:05:32.867

[Magento 1.3.0 安装指南](http://www.magentocommerce.com/knowledge-base/entry/magento-installation-guide)底部的这条小线go me!。

> 已知的问题
> 
> Magento 是在 Linux 上开发的，因此在这个平台上测试最多。以下是使用其他操作系统可能导致的一些已知问题。
> 
> 1.  在 Windows 下，此时无法上传图像。因此，管理员将无法上传产品图片。

默认管理员用户不能上传图片。我创建了一个新的角色权限，但遇到了同样的问题。我的解决方案是备份我的数据库并在 Linux 上运行的 magento 实例中重新导入它。也许他们应该说 magento 只能在 Linux 上运行！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-08T14:09:35.893

您是否查看过文件和文件夹权限？我有一个客户的网站，我移到了新的服务器上，但文件夹权限并没有保持不变。图像会上传到 100%，但什么也不会发生。后来我不得不重置所有文件夹权限。

# php - 访问 Session 变量和性能

> ID：806414
> 
> 赞同：1
> 
> 时间：2009-04-30T11:08:21.090
> 
> 标签：php, performance, session

我有一个 Web 应用程序，我需要检查用户是否有足够的权限/角色/权限来访问该页面。我已经在一个表中设置了用户权限`USER_ID`，`ROLE_ID`. 当用户登录应用程序时，我将读取该用户的记录并构造一个字符串并分配给一个会话变量。当登录用户访问每个页面时，我将从会话变量中读取值，然后解析字符串，然后检查该用户是否具有足够的权限分配给它。

现在我担心在每个页面加载时访问会话变量是否会影响性能。有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T11:12:45.433

您应该会看到性能的净收益。

加载会话需要一些资源，但这通常比从数据库中检索记录所需的资源少得多，这可能涉及创建连接、身份验证、解析查询、检索记录并将其发送到网络。与此相比，从硬盘驱动器中取出会话文件要快得多。

听起来您确实在尝试过早地进行优化。您应该等待一段时间，然后监控您的瓶颈到底在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T12:06:49.453

不，它不会以明显的方式影响您网站的性能（除非您每秒有数百个用户）。

但我注意到了一些事情：

> (...) 我将读取该用户的记录并构造一个字符串并分配给一个会话变量。当登录用户访问每个页面时，我将从会话变量中读取值，然后解析字符串 (...)

啊哈！看，会话只不过是经过编码和解析的字符串（`session_start()`通常用于此目的）。您不需要手动编码要存储在会话中的数据，它已经为您完成（并且定义比任何自定义方法都更快，因为这些功能是在核心中实现的）。`serialize()``unserialize()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T11:26:51.000

如果您使用[PHP](http://docs.php.net/manual/de/ref.session.php)的本机会话处理程序，则会话数据可能会*在每次*使用会话的请求时被检索，无论您是否访问会话数据。并且由于[默认会话处理程序使用文件](http://docs.php.net/manual/de/session.configuration.php#ini.session.save-handler)来存储数据，它也会导致在每次请求时读取文件。

如果您想对此进行优化，您可以使用某种缓存来存储会话。也许是像[APC](http://docs.php.net/apc)或[Memcache](http://docs.php.net/memcache)之类的内存缓存（另请参阅[该`session_set_save_handler`函数](http://docs.php.net/session_set_save_handler#83096)的注释）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T11:25:39.410

补充格雷格上面所说的。

php中有两种类型的会话。存储在数据库中的会话和存储在文件中的会话（通常在 /tmp/session_something 中）；

数据库选项在创建套接字和发送/检索数据方面有开销。它具有诸如会话能够跨多个服务器/机器持久性等优点。

将会话信息存储到文件中的第二个选项可能是性能最佳的选择，因为像 Linux 这样的操作系统可以缓存/缓冲对内存中文件的读写操作。

所以简短的回答是，甚至不用担心开销什么的，不是为了引诱，但如果你真的关心性能，你就不会使用 PHP。

# c# - C#如何在用户控件上显示一个文本气泡？

> ID：806420
> 
> 赞同：6
> 
> 时间：2009-04-30T11:11:14.297
> 
> 标签：c#, .net, winforms, user-interface

我正在.NET 3.5 中开发用户控件。作为对某些事件的反应，我想在此控件上显示一个包含简短文本的简单气泡，类似于众所周知的系统托盘通知气泡。我敢肯定这是一个非常容易的任务，你能给我一个快速的提示吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-30T11:33:52.200

使用[工具提示](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.aspx)

```
System.Windows.Forms.ToolTip myToolTip = new System.Windows.Forms.ToolTip();
myToolTip.IsBalloon = true;
myToolTip.Show("Some text", this.WhereToShow); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-30T11:35:56.580

使用`ToolTip`类 --set `IsBalloon`=`true`来获得气泡效果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-30T11:37:31.707

**将NotifyIcon**控件拖放到窗体上，然后调用控件的**ShowBalloonTip**方法。

```
System.Windows.Forms.NotifyIcon myIcon; // generated by the designer
// more designer code, then your code:
myIcon.ShowBalloonTip(3000, "My Title", "My Text", someIconReference); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T11:18:10.973

您可以为此使用弹出控件（在 WPF 中）

[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup(VS.95).aspx)

# c++ - 什么是 C++ 基于策略的类设计的好教程？

> ID：806429
> 
> 赞同：4
> 
> 时间：2009-04-30T11:15:08.657
> 
> 标签：c++, templates, policy-based-design

我刚刚开始阅读[Modern C++ Design Generic programming 和 Design Patterns Applied](https://stackoverflow.com/questions/655997/modern-c-design-generic-programming-and-design-patterns-applied)并且我想知道在我深入研究之前是否需要阅读一些关于基于策略的类设计的非常基本的教程。第 1 章会提供我需要遵循的所有内容吗？

我已经熟悉模板使用（STL/boost/Poco）和编写模板类/方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-30T11:21:25.490

以我的经验，它几乎是一本独立的书，只要你熟悉 C++。
这是一个愚蠢的问题。直接看书吧，有什么不清楚的可以查。当您可以阅读并找出答案时，为什么要问有关第 1 章的问题？
恐惧是心灵的杀手。

# .net - MySQL & .NET：System.ArgumentException：初始化字符串的格式不符合从索引 0 开始的规范

> ID：806435
> 
> 赞同：2
> 
> 时间：2009-04-30T11:16:19.810
> 
> 标签：.net, asp.net, subsonic

我想使用 SubSonic，因为它说它易于使用且节省时间。

在尝试获取 MySQL 的连接字符串 3 小时后，我即将放弃它。

```
Building configuration from C:\Documents and Settings\user\My Documents\Visual Studio 2

008\Projects\ConfigurationItems\ConfigurationItemsMVC\Web.config
Adding connection to MySqlDataProvider
ERROR: Trying to execute generate
Error Message: System.ArgumentException: Format of the initialization string does not conform to specification starting at index 0. 
```

我不能改变这个：错误消息：System.ArgumentException：初始化字符串的格式不符合从索引 0 开始的规范。

每次我尝试运行 subsonic.exe /generate 时都会得到它

一切看起来都那么简单！！！

这是我的 Web.Config

```
<!-- connectionString="Persist Security Info=False;database=config;server=localhost;user id=config;Password=config" -->
  <connectionStrings>
    <remove name="ConfigConnectString"/>
    <add name="ConfigConnectString" connectionString="Persist Security Info=False;database=config;server=localhost;user id=userid;Password=password" providerName="MySql.Data.MySqlClient"
      />
    </connectionStrings>

  <SubSonicService defaultProvider="ConfigDatabase">
      <providers>
        <add type="SubSonic.MySqlDataProvider, SubSonic" 
             name="MySqlDataProvider" 
             generatedNamespace="Config" 
             connectionStringName="ConfigConnectString" 
             />

      </providers>
  </SubSonicService> 
```

我尝试了几件事：

1.  在外部工具路径上使用 /config 指定 webconfig 的路径。
2.  根据示例从 6.0 .NET MySQL 连接器降级到最新的 5.2 版本。
3.  将 MySQL.Data 作为引用直接从 SubSonic 文件夹添加到其中的 DLL。
4.  尝试各种格式的连接字符串，基于[http://www.connectionstrings.com/mysql#28](http://www.connectionstrings.com/mysql#28)

（其他连接字符串：“Server=localhost;Database=config;Uid=user;Pwd=password;”- “blah”/“anything”也会抛出同样的错误......）

没有欢乐！非常接近放弃 SubSonic。如果可以的话请帮忙！

顺便说一句，我正在使用 Subsonic 2.2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-30T12:25:18.643

我是个白痴：

```
 <SubSonicService defaultProvider="ConfigDatabase"> 
```

应该：

```
 <SubSonicService defaultProvider="MySqlDataProvider"> 
```

嗬！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T11:35:13.350

我猜它在`{0}`某处需要一个''，因为这是你忘记时得到的错误（IIRC）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-06-29T06:39:16.050

查看此博客以获取有关初始化字符串格式的更多信息

[http://menononnet.wordpress.com/2008/02/23/format-of-the-initialization-string-does-not-conform-to-specification-starting-at-index-0/](http://menononnet.wordpress.com/2008/02/23/format-of-the-initialization-string-does-not-conform-to-specification-starting-at-index-0/)

# asp.net-mvc - 验证地点

> ID：806439
> 
> 赞同：0
> 
> 时间：2009-04-30T11:17:16.047
> 
> 标签：asp.net-mvc, validation, architecture

在我的应用程序中，我使用这种结构：

**控制器 -> 服务 -> 存储库**

我将存储库 + 过滤器创建为 dal 层。但是我将验证方法（例如对于必填字段）放在服务层中。它是否正确？或者如果我在存储库层替换验证会更好？

第二个问题。在这种架构中，服务可以与许多存储库一起运行。允许服务与其他服务一起运行或者只有我需要与存储库一起运行会很好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T12:07:13.710

这里有一个关于 MVC 中验证的非常好的教程......

[http://stephenwalther.com/blog/archive/2009/03/04/new-asp.net-mvc-validation-tutorials-posted-at-www.asp.netmvc.aspx](http://stephenwalther.com/blog/archive/2009/03/04/new-asp.net-mvc-validation-tutorials-posted-at-www.asp.netmvc.aspx)

你应该看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T14:44:40.027

有几个库可以帮助您进行验证。

第一个（我个人使用的）是 FluentValidation，它允许您为模型对象创建验证器。它可以在[http://www.codeplex.com/FluentValidation找到](http://www.codeplex.com/FluentValidation)

还有另一个库专门用于 ASP.NET MVC 应用程序，它提供服务器端和客户端验证，称为 xVal。 [http://www.codeplex.com/FluentValidation](http://www.codeplex.com/FluentValidation)

我通常按​​照您提到的方式设置我的项目，并且我的大部分逻辑和/或验证发生在服务层中，而存储库层仅用于查询。

# sockets - Linux 中原始套接字上的 ioctl FIOREAD

> ID：806443
> 
> 赞同：0
> 
> 时间：2009-04-30T11:18:18.493
> 
> 标签：sockets, ioctl

我有一个实现，它使用 ioctl(FIONREAD) 来确定 Linux 中原始套接字接收缓冲区中未决八位字节的数量，然后对其调用 recv。

我在某处读到，Linux 中原始套接字的 ioctl 接口实际上并没有返回实际的待处理八位字节。它是否正确？

我之所以问，是因为我时不时地在高负载下丢失一些消息，到目前为止还无法弄清楚在哪里。他们是找出原始套接字中待处理八位字节数的更好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T16:42:39.117

如果您的应用程序无法跟上数据包速率（因为内核缓冲区不是无限的），内核总是有可能丢弃数据包。

顺便说一句，你为什么还需要知道八位字节的数量？由于这些是数据包套接字，数据包的长度将始终受到网络接口的最大帧大小的限制，因此只需将足够大的缓冲区传递给 recv。

话虽如此，如果性能至关重要，您应该研究Linux 上的[PACKET_MMAP](http://www.kernel.org/doc/Documentation/networking/packet_mmap.txt)支持。

# asp.net - 使用 asp.net(vb2008) 的移动 web 应用程序

> ID：806446
> 
> 赞同：2
> 
> 时间：2009-04-30T11:20:44.010
> 
> 标签：asp.net, mobile-website

先生，感谢您的重播，我想如何创建一个特定于每个移动浏览器的页面，以及如何使用移动控件，先生，我想了解更多关于该移动应用程序的想法，以及示例编码先生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T11:55:38.653

Scott Hanselman 就这个确切的主题做了很好的介绍：[http ://www.hanselman.com/blog/MixMobileWebSitesWithASPNETMVCAndTheMobileBrowserDefinitionFile.aspx](http://www.hanselman.com/blog/MixMobileWebSitesWithASPNETMVCAndTheMobileBrowserDefinitionFile.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T12:17:08.600

不再支持 ASP.NET 移动控件。

[http://mdbf.codeplex.com/](http://mdbf.codeplex.com/)是最接近的等价物。

# asp.net - asp.net “已达到网络 BIOS 命令限制” ASP.NET 2.0 + 3.5

> ID：806449
> 
> 赞同：10
> 
> 时间：2009-04-30T11:21:30.590
> 
> 标签：asp.net, web-config

我正在尝试在 ASP.NET 2.0 + 3.5 中运行 tinyMCE 文本编辑器，但在我的 web.config 文件中出现以下错误。

加载配置文件时出错：无法开始监视对“###\Visual Studio 2005\WebSites\TinyMCE\tinymce\jscripts\tiny_mce\langs”的更改，因为已达到网络 BIOS 命令限制。有关此错误的详细信息，请参阅 Microsoft 知识库文章 810886。Windows XP 平台不支持在 UNC 共享上托管。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-08-26T13:35:55.630

我遇到了同样的错误：无法开始监视对 '\xxx\yyy\zzz' 的更改，因为已达到网络 BIOS 命令限制。有关此错误的详细信息，请参阅 Microsoft 知识库文章 810886。Windows XP 平台不支持在 UNC 共享上托管。

当时我打开了几个 Visual Studio 窗口。因此，对我有用的最简单的解决方案是关闭那些 Visual Studious 并只打开我正在处理的那个。

然后错误消失了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-24T14:10:59.023

[这篇博文](http://www.garrypassarella.co.uk/2012/03/21/network-bios-command-limit-has-been-reached-hosting-on-a-unc-share-is-not-supported-for-the-windows-xp-platform/)帮助了我。它会引导您完成一些不同的尝试...

> ### 1.添加注册表值
> 
> 在系统注册表中找到以下项 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET 添加一个 DWORD FCNMode 并将值设置为十进制值 1。重新启动 Visual Studio 以确保找到新设置。
> 
> ### 2.添加注册表值
> 
> 另一个注册表编辑在这里。在系统注册表中找到以下项 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\ASP.NET 添加一个 DWORD FCNMode 并将该值设置为具有值 2 的小数。重新启动 Visual Studio 以确保找到新设置。
> 
> ### 3.项目存储在内网
> 
> 根据您公司网络的配置方式，Visual Studio 可能会将项目存储在网络驱动器上。已知将项目移动到计算机上的本地驱动器并尝试再次运行它可以解决此问题。
> 
> ### 4\. MSDN 修复
> 
> 这直接来自MSDN上的这篇文章；[http://support.microsoft.com/kb/810886/en-us](http://support.microsoft.com/kb/810886/en-us) - 我已经把它剪掉了一点。验证 MaxCmds 和 MaxMpxCt 注册表值是否设置为 50 或更多。为此，请按照下列步骤操作：
> 
> 1.  单击开始，单击运行，键入 regedit，然后单击确定。
> 2.  在注册表中找到并单击以下项：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\lanmanworkstation\parameters
> 3.  在右窗格中，双击 MaxCmds 值。
> 4.  在数值数据框中，验证该值是否为 50 或更大。
> 5.  找到并单击注册表中的以下项：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\lanmanserver\parameters 注意确保对 lanmanserver\parameters 注册表项进行此更改，而不是对步骤 2 中提到的 lanmanworkstation\parameters 注册表项进行此更改.
> 6.  在右窗格中，双击 MaxMpxCt 值。注意在运行早于 Windows 2000 的 Windows 版本的 SMB 服务器上，MaxMpxCt 注册表项名为 MaxMpxCount，但具有相同的功能。
> 7.  在数值数据框中，验证该值是否为 50 或更大。注意 MaxMpxCt 值确定服务器允许来自单个客户端的最大同时活动请求数。
> 8.  退出注册表编辑器。
> 9.  重新启动服务器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-04-20T16:19:04.147

我遇到了同样的问题，问题出在我的 web.config 文件中。我在尝试让自定义控件工作时复制了其他人，并且他们一直在 IIS 7 上运行，而我仍在 IIS 6 上。以下是违规行：

```
<system.webServer>
  <validation validateIntegratedModeConfiguration="false"/>
  <modules>
    <remove name="ScriptModule" />
    <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral />
  </modules>
  <handlers>
    <remove name="WebServiceHandlerFactory-Integrated"/>
    <remove name="ScriptHandlerFactory" />
    <remove name="ScriptHandlerFactoryAppServices" />
    <remove name="ScriptResource" />
  </handlers>
</system.webServer> 
```

几乎，只需要删除标签之间的所有内容。希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-02-20T19:46:44.210

在构建 asp.net 部署项目时，您可能经常收到 ASPNETCOMPILER 错误“已达到网络 BIOS 命令限制”。正如微软所描述的，发生错误的原因如下：

如果客户端计算机对使用服务器消息块 (SMB) 协议的文件服务器同时提交长期请求，则可能会出现此问题。长期请求的一个示例是客户端计算机使用 FindFirstChangeNotification 函数来监视服务器共享的更改。如果客户端上的 MaxCmds 注册表值设置小于 50，或者服务器上的 MaxMpxCt 注册表值设置小于 50，则可能会出现此问题。要解决此问题，请验证 MaxCmds 和 MaxMpxCt 注册表值是否设置为 50 或更多的。为此，请按照下列步骤操作：

点击开始 -> 运行 -> “regedit” 导航到以下注册表项：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\lanmanworkstation\parameters

在右侧列表视图中打开 MaxCmds 条目。在数值数据中，输入 50 或更大的值。导航到以下注册表项：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\lanmanserver\parameters

在右侧列表视图中打开 MaxMpxCt 条目。在数值数据中，输入 50 或更大的值。重新启动计算机以使更改生效。注意 MaxCmds 和 MaxMpxCt 注册表项是 REG_DWORD 十进制项。如果它们在您的计算机上不存在，您可以将它们创建为新的 REG_DWORD 值。这些注册表项的值范围在 0 到 65535 之间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-22T21:07:41.937

当我遇到同样的错误时，我发现的最简单的解决方案是关闭所有 Visual Studio 解决方案（通常在有超过三个打开的​​解决方案时会出现问题）然后重新打开一个失败的解决方案，仅此而已。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-21T05:30:03.667

博客文章中提到的注册表编辑通常是不够的，正如我们在生产环境中使用 win2k8 服务器看到的那样。

我在这里对这个问题做了一个非常详细的回答：[https ://stackoverflow.com/a/20710473/705198](https://stackoverflow.com/a/20710473/705198)

这个答案是我能找到的关于这个主题的所有 technet、msdn 和博客参考资料的积累，以及我们最终必须做些什么来解决这个问题。禁用巨型帧（HP 服务器 NIC 问题导致另一个错误）和 SMB2+ 与注册表编辑相结合，最终为我们节省了高流量 IIS 站点。仅注册表编辑就可以做到这一点，因此网络 BIOS 限制错误在正常负载下不会显示得那么快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-01T04:05:54.897

这个错误开始突然出现。关闭 Visual Studio 2012 中所有打开的文件并退出应用程序。之后没有看到错误。

# linux - Linux 可执行文件中的目标文件

> ID：806451
> 
> 赞同：8
> 
> 时间：2009-04-30T11:21:42.993
> 
> 标签：linux, executable, object-files

有没有办法找到在 Linux 中生成当前可执行文件的目标文件（具体是 RHEL）。我知道可以使用“nm”来查找导出的符号，“ldd”来查找依赖的共享对象。

但是我找不到命令来找出可执行文件组成的对象（.o）文件的名称。可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-04-13T14:45:10.220

目标文件的原始名称不存储在 DWARF 调试信息中。

每个目标文件在该部分中都有一个`DW_TAG_compile_unit`条目。`.debug_info`此条目包含对“派生编译单元的主要源文件”的引用，但不包含目标文件的名称。[DWARF 标准](http://dwarfstd.org/doc/DWARF4.pdf)包含可以为每个编译单元存储的属性列表（第 3.1.1 节，第 44 页，pdf 第 58 页）。

您可以使用以下命令查看存储的信息：

```
$ readelf --debug-dump=info --dwarf-depth=1 hw 
```

输出：

```
Contents of the .debug_info section:
<some compilation units removed>       
  Compilation Unit @ offset 0x133:
   Length:        0x8b (32-bit)
   Version:       4
   Abbrev Offset: 0x64
   Pointer Size:  4
 <0><13e>: Abbrev Number: 1 (DW_TAG_compile_unit)
    <13f>   DW_AT_producer    : (indirect string, offset: 0x131): GNU C11 5.3.0 -mtune=generic -march=pentiumpro -g
    <143>   DW_AT_language    : 12      (ANSI C99)
    <144>   DW_AT_name        : (indirect string, offset: 0x163): hw.c
    <148>   DW_AT_comp_dir    : (indirect string, offset: 0x168): /home/mikel/src/hw
    <14c>   DW_AT_low_pc      : 0x80483db
    <150>   DW_AT_high_pc     : 0x2e
    <154>   DW_AT_stmt_list   : 0xea
 <1><158>: ...
<some compilation units removed> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-30T11:39:06.977

如果它已经用调试信息编译过，是的。使用 gdb (man gdb) 查找信息。

如果它没有在没有调试信息的情况下编译。你运气不好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-09T12:14:13.393

您还可以使用`objdump`（只要可执行文件和对象是使用调试信息编译的）：

```
# gcc -g -c -o /tmp/some_object.o /tmp/some_object.c
# gcc -g -o /tmp/file /tmp/file.c /tmp/some_object.o
# objdump -g /tmp/file | awk 'BEGIN{out=0} /Directory Table/{out=1} /Line Number Statements/{out=0} {if(out){print $0}}'
 The Directory Table (offset 0x1b):
  1     /tmp

 The File Name Table (offset 0x21):
  Entry Dir     Time    Size    Name
  1     1       0       0       file.c

 The Directory Table (offset 0x5a):
  1     /tmp

 The File Name Table (offset 0x60):
  Entry Dir     Time    Size    Name
  1     1       0       0       some_object.c 
```

`awk`仅用于提取相关信息（如果不使用，您将在可执行文件和对象中获得完整的调试信息）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-08T14:30:04.277

除了 nullptr，“共享对象”是指其他共享库（链接），而不是原始对象（未链接）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-13T20:37:04.027

目标文件在链接后转换为可执行文件。如果链接是共享的，那么您可以通过共享库 ( `ldd`) 获得它。但是，如果链接是静态的，那么只有通过调试信息的方式。您可以在 RHEL（或 Fedora）中安装 debuginfo 包。这是说明

*   [https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Developer_Guide/intro.debuginfo.html](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Developer_Guide/intro.debuginfo.html)
*   [https://access.redhat.com/solutions/9907](https://access.redhat.com/solutions/9907)

然后按照此处所述使用 gdb `info sources`：

*   [GDB：如何列出用于编译的所有源文件](https://stackoverflow.com/questions/22821344/gdb-how-to-list-all-source-files-used-for-compilation)

这将为您提供源文件列表。但要真正获得目标文件，您需要深入了解构建工具 ( `rpmbuild`)。要实际运行 rpmbuild，您需要 Source RPM 包，您可以使用此处列出的说明获取该包：

*   [http://www.cyberciti.biz/faq/yum-download-source-packages-from-rhn/](http://www.cyberciti.biz/faq/yum-download-source-packages-from-rhn/)

现在您可以自己构建包，并剖析`.o`生成可执行文件的文件。

我希望这会有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-18T08:54:37.923

我没有足够的声誉来添加评论，但要扩展 Mikel Rychliski 使用 readelf 的建议，您可以使用 awk 提取源文件的路径：

```
readelf --debug-dump=info --dwarf-depth=1 hw exe_to_examine | awk '/DW_AT_name/ {file=$8} /DW_AT_comp_dir/ {print $8 "/" file}' 
```

这会输出源文件（在我的情况下为 .cpp 文件）的完整路径，这些文件可能与目标文件非常匹配（取决于您的构建系统）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-05T17:53:33.777

类似于 Mikels 的答案，但使用不同的工具（可能）为您提供更清晰的输出。

过去，我有幸使用名为 DIVA 的调试信息分析工具。它是免费和开源的，你可以在这里找到它：

[https://github.com/SNSystems/DIVA](https://github.com/SNSystems/DIVA)

虽然 DIVA 无法找到链接到哪些目标文件以生成可执行文件，但您可以使用它来找出编译单元。

我赶紧整理了一个小例子如下

a.cpp

```
int a() {
  return 1;
} 
```

啊

```
int a(); 
```

b.cpp

```
int b() {
  return 2;
} 
```

bh

```
int b(); 
```

cpp

```
#include "a.h"
#include "b.h"

int main() {
  return a + b;
} 
```

使用以下选项使用 clang 编译它们

```
$ clang a.cpp b.cpp c.cpp -o test.elf -g -O0 
```

使用以下选项在 test.elf 上运行 DIVA：

```
$ diva --show-none test.elf 
```

应该产生以下输出

```
{InputFile} "test.elf"
   {CompileUnit} "a.cpp"
   {CompileUnit} "b.cpp"
   {CompileUnit} "c.cpp" 
```

# asp.net - 在 Asp.net 中，您会在 Global.asax 中的 Session_Start 和 Session_End 事件中添加什么？

> ID：806452
> 
> 赞同：0
> 
> 时间：2009-04-30T11:22:18.420
> 
> 标签：asp.net, session

如果不是代码，您能否提供一些通用的解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T11:28:31.090

在 Session_Start 中，您可以设置与会话相关的任何内容，这在很大程度上取决于应用程序。

一般来说，如果可能的话，你应该避免使用 Session_End，它不仅会触发很晚（在会话超时之后），而且在多服务器配置中它根本不会触发。

有关详细信息，请参阅 Web.config 中的 SessionState 标记

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-30T11:49:43.910

提醒自己为什么我们永远不应该使用 Session_End 总是好的

[了解会话状态模式 + 常见问题解答](http://forums.asp.net/p/7504/7504.aspx)的摘录

* * *

1.  Session_End 事件仅在 InProc 模式下受支持。
2.  如果您关闭浏览器，则不会触发 Session_End。HTTP 是无状态协议，服务器无法知道浏览器是否关闭。
3.  Session_End 只会被触发：
    (a)。在 n 分钟不活动后（n = 超时值），
    或
    (b)。如果有人调用 Session.Abandon()。

4.  对于情况（a）（第 3 点），Session_End 将由后台线程运行，这意味着：（a）。您在 Session_End 中的代码正在使用工作进程帐户运行。如果您正在访问数据库等资源，您可能会遇到权限问题。(b)。如果 Session_End 发生错误，它将静默失败。
5.  对于情况 (b)（第 3 点），为了触发 Session_End，您的会话状态必须首先存在。这意味着您必须在会话状态中存储一些数据并且已经完成了至少一个请求。
6.  同样对于情况 (b) (Point3)，只有在实际找到放弃的会话时才会调用 Session_End。因此，如果您在同一个请求中创建和放弃会话，由于该会话尚未保存，因此无法找到，则不会调用 Session_End。这是 .NET Framework 1.0 和 1.1 中的一个错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T11:26:36.243

**Session_Start** 收集所有用户信息并存储在数据库中。为用户准备系统，如临时文件、缓存文件。

**Session_End** 在数据库中保存用户状态。清洁系统等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T11:26:11.750

最常见的例子是统计在线用户。递增计数 on`Session_Start`和相反 on `Session_End`。

# captcha - Sitefinity 使用内置的验证码

> ID：806453
> 
> 赞同：0
> 
> 时间：2009-04-30T11:23:03.317
> 
> 标签：captcha, sitefinity

有谁知道如何将自定义控件（简单的 ASP.net 表单）与 sitefinity 的验证码控件联系起来？

似乎无法在 SiteFinity.Web.UI 中找到控件（在拖放意义上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-22T14:57:23.690

我一直在寻找完全相同的东西，经过大量搜索，我找到了这个解决方案。

在表单/用户控件的源视图中添加此引用：

```
<%@ Register Assembly="Telerik.Cms.Web.UI" Namespace="Telerik.Web.UI.SpamProtection" TagPrefix="sfWeb" %> 
```

然后你可以使用这样的东西：

```
<sfWeb:SpamProtector
    ID="SpamProtector1" 
    runat="server" 
    ValidationGroup="ctl00$PasswordRecovery1" 
    CaptchaImageWidth="180" 
    CaptchaImageHeight="50" 
    CapcthaInvalidInputMsg="The code you entered doesn't match the code in the image. Please try again." 
    EnableCaptcha="true" 
    CaptchaTextBoxLabel="Please type in the code shown in the image above." 
    CaptchaBackgroundNoise="Medium" 
    CaptchaLineNoise="Low"
    CaptchaFontWarp="Medium"
    CaptchaLength="5" 
    CaptchaPossibleChars="Numbers" 
    CaptchaMaxTimeout="5" 
    ErrorMessageCssClass="validation-error"></sfWeb:SpamProtector> 
```

在这篇文章中发现了这个解决方案[http://blogs.sitefinity.com/Ivan/Posts/08-10-29/How_to_associate_Image_Gallery_with_content_item_e_g_news_item_-_finishing_touches.aspx](http://blogs.sitefinity.com/Ivan/Posts/08-10-29/How_to_associate_Image_Gallery_with_content_item_e_g_news_item_-_finishing_touches.aspx)

唯一的问题是生成的验证码图像的位置是指您的用户控件的位置，即 localhost/MyWebsite/UserControls/Login/CaptchaImage.axd?guid=a2b92290-1bad-450a-a58b-7c813a228d62

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T12:57:01.563

一个快速的谷歌搜索结果： [http ://www.sitefinity.com/help/developer-manual/built-in-spam-protector-strategies.html](http://www.sitefinity.com/help/developer-manual/built-in-spam-protector-strategies.html)

确保您添加了正确的引用。根据[API Reference](http://www.telerik.com/help/sitefinity/developer-manual/telerik.cms.web.ui-telerik.web.ui.spamprotection.captcha.captchaprotector.html)，您可能需要添加对 Telerik.Web.UI 库的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T00:46:15.667

为什么不能通过 Sitefinity 页面编辑器将 Captcha 控件拖放到页面上？这就是我会做的

# windows - IE WebBrowser 控件：防止 URL 进入 IE 地址栏 URL 历史记录

> ID：806462
> 
> 赞同：0
> 
> 时间：2009-04-30T11:26:50.267
> 
> 标签：windows, internet-explorer, webbrowser-control

我有一个嵌入 IE WebBrowser 控件的 Windows 应用程序，并运行本地网络服务器来提供内容。我加载的 URL 仅在应用程序内有意义，在应用程序退出后无效。用户永远看不到它们。它们看起来像这样：

```
http://127.0.0.1:1234/something.html 
```

其中`1234`是该会话的随机端口号。

但是这些 URL 出现在 IE 浏览器的地址栏历史记录中 - 当我在 Internet Explorer 的地址栏中键入“1”时，会出现一个下拉列表，其中包含我所有的 URL。在这种情况下，它们毫无用处。

所以，我的问题是：如何防止我的 URL 污染该下拉列表？

更多信息：我正在使用 加载 URL `window.location.href = URL`，而不是通过该`Navigate`方法，所以`navNoHistory`不是一个选项（我认为无论如何这指的是后退/前进历史）。

我也尝试在使用 之后删除 URL `IUrlHistoryStg::DeleteUrl()`，但它不起作用（它返回成功但没有效果） - 任何有关使该工作的提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T13:47:16.607

我现在已经完成了这项工作`IUrlHistoryStg::DeleteUrl()`- 如果您在要求控件加载 URL 后立即调用它，它就不起作用。我猜这是因为控件在完成加载文档之前不会将 URL 添加到历史记录中。

`IUrlHistoryStg::DeleteUrl()`通过稍后调用，我可以从历史记录中删除这些 URL。

不过，我还是宁愿他们一开始就没有到达那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T11:36:51.647

我最初的答案与您想要的完全相反。

我无法复制您的体验，但我没有使用浏览器控件。

我会尝试将脚本添加到 html 或隐藏的框架/iframe 并包装调用，以便浏览器在包装脚本中执行它。

基于脚本的导航不应输入历史记录，我花了一段时间才想出一种方法来破解 IE，以便使用我原始答案中的 click() 事件触发器实际添加历史记录项。

```
<script>
    function GoTo(url) {
        location = url;
    }
</script> 
```

# dll - 如何在 MEF 中设置 PrivateBinPath？

> ID：806467
> 
> 赞同：2
> 
> 时间：2009-04-30T11:27:44.570
> 
> 标签：dll, plugins, mef

如何在 MEF 中设置 PrivateBinPath？

这就是我想要做的：[如何更改 .NET 中引用的加载路径？](https://stackoverflow.com/questions/806383/how-to-change-the-loading-path-of-references-in-net)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-30T11:33:51.733

您可以通过应用程序配置文件执行此操作：[assemblyBinding](http://msdn.microsoft.com/en-us/library/twy1dw1e.aspx)元素，更准确地说 -[探测](http://msdn.microsoft.com/en-us/library/823z9h8w.aspx)：

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <probing privatePath="bin;bin2\subbin;bin3"/>
      </assemblyBinding>
   </runtime>
</configuration> 
```

这将强制运行时在 、 和 目录中查找程序集`bin`，所有`bin2`这些都是应用程序基目录的子目录。`bin2\subbin``bin3`

# windows - Windows 网络浏览器 - 权威列表

> ID：806481
> 
> 赞同：0
> 
> 时间：2009-04-30T11:34:22.307
> 
> 标签：windows, browser

我正在寻找以下 Windows 浏览器的替代品：

*   [IE浏览器](http://www.microsoft.com/ie)
*   [火狐](http://www.getfirefox.com)
*   [铬合金](http://www.google.com/chrome)
*   [苹果浏览器](http://www.apple.com/safari)
*   [歌剧](http://www.opera.com)

特别是那些轻量级的，**可以显示图像**并且速度快的，比如 Chrome/Safari 4 或 Firefox 是 1.5 之前的版本——尽管这不是先决条件。谁能给我一份清单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T11:37:43.283

我听说过的最轻量级的浏览器是[Lynx](http://en.wikipedia.org/wiki/Lynx_browser) :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T11:49:46.420

[K Meleon](http://kmeleon.sourceforge.net/)非常轻巧，[Amaya](http://www.w3.org/Amaya/Overview.html)绝对不是，[SeaMonkey也不是](http://www.seamonkey-project.org/)

有一个很长的列表，包括所有 IE 包装器[。](http://www.webdevelopersnotes.com/design/browsers_for_windows.php3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T11:51:00.660

如果 Lynx 由于不显示图像而不够好，您仍然可以将[Arachne](http://sourceforge.net/projects/arachne-browser/)用于 DOS（我相信它也可以在 Windows 中工作）；）

**编辑**：SourceForge 页面没有下载，[这里](http://www.glennmcc.org/arachne/)是 DOS 的 1.95（2008 年 11 月）和 Linux 的 1.93 的下载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T11:54:47.377

与往常一样，维基百科有一个[网络浏览器列表](http://en.wikipedia.org/wiki/List_of_web_browsers)。我相信您可以在那个金矿中找到一些东西，但[Links](http://en.wikipedia.org/wiki/Links_(web_browser))是我选择的轻量级浏览器。:)

Windows 支持的网络浏览器列表：[http ://www.webdevelopersnotes.com/design/browsers_for_windows.php3](http://www.webdevelopersnotes.com/design/browsers_for_windows.php3)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T12:05:42.187

“特别是那些轻量级、可以显示图像并且速度快的设备，例如 Chrome/Safari 4 或 Firefox 1.5 之前的版本——尽管这不是先决条件。有人可以给我一份清单吗？”

Opera 符合这些标准，只是它在您的列表中。嗯。不，真的：我在 90 MHz Pentium 和 128 MB RAM 上运行 Opera 9.5，它运行得很好（关闭了 Flash 和 Java，但那是另一场激烈的战争）。

# flash - 是否可以从 Flash 打开 JqModal 弹出 iframe

> ID：806483
> 
> 赞同：1
> 
> 时间：2009-04-30T11:34:50.543
> 
> 标签：flash, jqmodal

我在 Flash 中有一个链接，我想用 JqModal 弹出窗口打开它。我尝试在 flash 变量中传递字符串，但这没有用。

var flashvars = { testURL: "contact-us.html?q=jqmodal&go=&form=QBLH&width=781&height=400" };

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T12:32:07.410

你的问题不是很清楚。据我了解，当在 Flash 小部件中单击链接时，您希望打开一个 JqModal 对话框。那是对的吗？如果是，您可能必须使用 ActionScript 来调用将打开 JqModal 对话框的 JavaScript 函数。我不确定您要对您提到的 URL 做什么。

# sql - SSAS 2005 多维数据集中的维度安全性

> ID：806497
> 
> 赞同：0
> 
> 时间：2009-04-30T11:40:01.547
> 
> 标签：sql, sql-server, ssas

我正在尝试在 SSAS 2005 多维数据集中实现安全性。到目前为止，我已经取得了成功，能够创建一个角色并将 ALLOWED 和 DENIED 集应用于我想对其应用安全性的成员。现在开始问题 -

如果我在 Analysis Services 中浏览并选择角色，则安全性按预期工作。但是当我以我创建的角色成员的用户身份登录时（基本上无权访问某些成员），安全性不适用于当前用户属性。

不过我明白原因——我还没有为此设置检查。我知道有一个函数 USERNAME 可用于检查用户的身份，但我不想将其与包含有效登录名的表进行比较，而是想检查我刚刚创建的角色。是否有可能做到这一点？如果是怎么办？

PS - 我不想创建另一个表来存储所有有效用户及其各自的角色信息，并希望动态完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T14:24:44.583

好吧，我想我自己想通了。有两种方法可以做到这一点 -

1.  使用用户名和关联角色创建一个表。然后在应用拒绝/允许集时，使用 MDX 表达式查找与用户关联的角色，然后应用限制。例如 IIF(IIF(User_Name = [DIM USER].[DIM USER].[Domain Name].CurrentMember,[DIM USER].[DIM USER].[Role].CurrentMember, "Admin") = "RestrictedRole", True ， 错误的）

True - 可见，False - 不可见

这只是一个例子，可能需要继续努力。

2.  在您的多维数据集上创建一个数据源，其中包含一个名为“角色”的附加属性。

例如 DataSource = ;初始目录 = ; 角色=受限角色

使用此数据源的任何内容都会自动应用限制。显然，这要求您保留两份数据源副本——一份受限制，另一份不受限制。

干杯！！

# multithreading - 线程与并行，它们有何不同？

> ID：806499
> 
> 赞同：57
> 
> 时间：2009-04-30T11:40:47.143
> 
> 标签：multithreading, parallel-processing

线程和并行有什么区别？

哪一个比另一个有优势？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-04-30T11:42:07.890

[Daniel Moth（我的前同事）- 线程/并发与并行](http://www.danielmoth.com/Blog/2008/11/threadingconcurrency-vs-parallelism.html)文章解释了这一切。

引：

> 为了利用我们软件的多个内核，最终必须使用线程。由于这个事实，一些开发人员陷入了将多线程等同于并行的陷阱。那不准确...您可以在单核机器上进行多线程处理，但您只能在多核机器上进行并行处理
> 
> 快速测试：如果您在单核机器上使用线程并且它对您的场景非常有意义，那么您不是在“做并行”，您只是在做多线程。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-30T12:03:15.500

线程通常是指在单个 CPU 上同时工作的多个进程（实际上，您认为它们不会，但它们之间的切换速度非常快）。

并行性是让多个进程同时在多个 CPU 上工作。

两者都有其优缺点，很大程度上取决于您的操作系统使用的调度程序。通常，创建线程的计算成本比在另一个 CPU 上生成进程要低得多，但是为自己拥有一个“完整”的 CPU 会提高该进程的整体速度。但话又说回来，如果该进程需要与另一个 CPU 上的另一个进程通信，您需要解决 IPC（进程间通信）问题，这可能是一种开销，因此在同一个 CPU 上使用线程实际上更好。

大多数操作系统都知道多个 CPU/Cores 并且可以使用它们，但这使得调度程序通常非常复杂。

如果您正在使用使用 VM（虚拟机）的语言进行编程，请注意他们需要实现自己的调度程序（如果有的话）。例如，Python 使用 GIL，它几乎表明在该 VM 上运行的所有内容始终保持在同一个 CPU 上。尽管某些操作系统能够将繁重的进程迁移到另一个目前不那么忙的 CPU，但这当然意味着在执行此操作时需要暂停整个进程。

像 DragonFlyBSD 这样的一些操作系统采用完全不同的方法来调度，然后是目前的“标准”方法。

我认为这个答案为您提供了足够的关键字来搜索更多信息:-)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-11-22T08:47:18.070

有两种不同的并发：

1.  线程：CPU在不同线程之间切换非常快，给人一种并发的假象。关键点：**在任何给定时间只有一个线程在运行。**当一个线程运行时，其他线程被阻塞。你可能会想，这比程序运行有什么用？好吧，把它想象成一个优先队列。可以安排线程。CPU调度器可以给每个线程一定的运行时间，暂停它们，将数据传递给其他线程，然后给它们不同的优先级以在以后运行。对于**非即时运行的相互交互的进程来说，**这是必须的。它广泛用于服务器：数以千计的客户端可以同时请求某些内容，然后在稍后获取他们请求的内容（如果按程序完成，一次只能为一个客户端提供服务）。**理念：一起做不同的事情。**它不会减少总时间（服务器的争议点，因为一个客户端不关心其他客户端的总请求）。
2.  Parallelism：线程是并行运行的，通常在不同的CPU核心，真正的并发。关键点：**多线程在任何给定时间运行。**它对于繁重的计算、**超长时间运行的进程**很有用。单核机器也是如此，将数据拆分为部分供每台机器计算，最后将它们汇集在一起​​。不同的机器/内核很难相互交互。**理念：用更少的时间做一件事。**

如您所见，它们解决了完全不同类型的问题。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-30T12:29:20.617

并行是一种使用多个指令流来完成计算的通用技术。所有并行技术的关键方面是在流之间进行通信以协作最终答案。

线程是并行性的具体实现。每个指令流都有自己的堆栈来记录局部变量和函数调用，并通过共享内存与其他流进行隐式通信。

一个例子可能是让一个线程简单地将磁盘请求排队并将其传递给工作线程，从而有效地并行化磁盘和 CPU。传统的 UNIX 管道方法是将它们拆分为两个完整的程序，在命令中说“cat”和 grep：

```
cat /var/log/Xorg.0.log | grep "EE" 
```

可以想象，线程可以降低将磁盘 I/O 从 cat 进程复制到 grep 进程的通信成本。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-30T11:49:44.517

线程是一种技术，并行性是一种可以使用线程实现的范例（但也可以很容易地在多个处理器上使用单个线程来完成）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-30T12:18:50.000

线程是穷人的并行。

编辑：更准确地说：

线程与并行性无关，反之亦然。线程是关于让一些进程并行运行的感觉。但是，这不会使流程总体上更快地*完成*所有操作。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-05-16T06:56:29.657

这是消除任何人对并行性和线程相关的疑虑的最佳答案。

> 线程是一种软件结构。即使在旧的单核处理器上，我也可以启动任意数量的 pthread。所以多线程不一定是并行的：只有硬件可以支持它才是并行的。因此，如果您有多个内核和/或超线程，您的多线程将变为并行。而这些天实际上是大部分时间。
> 
> 并发是关于没有明确时间顺序的活动。同样，如果硬件支持，它们可以并行完成，如果不支持，则不支持。
> 
> 因此，传统上多线程几乎是并发的同义词。并且它们只有在硬件支持的情况下才会并行。即使这样，您也可以启动比硬件支持更多的线程，并且您还剩下并发性。

来自[Victor Eijkhout 在 Quora 上的回答](https://www.quora.com/Is-multithreading-concurrent-or-parallel)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-30T12:00:32.200

你如何定义“并行”？多线程是并行程序执行概念的具体实现。

链接到的文章 RichardOD 似乎主要关注线程是否实际在具体机器上并行执行。

但是，您的问题似乎将多线程和并行性视为对立面。您可能是指使用多个*进程*而不是多个线程的程序吗？如果是这样，差异是：

*   创建线程比创建进程便宜得多。这就是为什么使用线程而不是进程会导致 Web 应用程序的巨大加速 - 这被称为“FastCGI”。
*   同一台机器上的多个线程可以访问共享内存。这使得线程之间的通信变得更加容易，但也非常危险（很容易产生难以诊断和修复的竞态条件等错误）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-09T05:59:50.117

如果我们把**CPU 看作一个公司，把线程看作它的工人**，那么它有助于我们更容易地理解线程和并行性。

就像一个公司有很多工人一样，CPU 也有很多线程。

也可能有不止一家公司，因此可能有不止一个 CPU。

因此，当工人（线程）在公司（CPU）中工作时，它被称为**线程**。

当两个或多个公司（CPU）独立或一起工作时，称为**并行**。

# .net - 什么破坏了 .net 二进制 (dll) 接口

> ID：806500
> 
> 赞同：4
> 
> 时间：2009-04-30T11:40:49.390
> 
> 标签：.net, dll, interface, binary

考虑两个 .net dll。首先，“application.dll”包含主要的业务逻辑和数据访问代码。第二个，“webservice.dll”主要由 WebMethods 组成，这些 WebMethods 使用 application.dll 链接到对象和方法，目的是提供对现有代码的 webservice 调用。

在不需要重新编译 webservice.dll 的情况下，可以和不能对 application.dll 进行哪些更改（例如，添加新类、向现有类添加新字段或方法等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T11:44:23.000

大多数事情都会好起来的；一些会破坏它的东西：

*   删除使用的*类型（除非您使用类型转发）
*   删除使用的*方法（包括构造函数）
*   更改方法的签名（使用的）
*   将公共字段更改为属性（已使用）
*   如果使用序列化，则更改序列化内部
*   向接口添加方法，其中第二个 dll 具有实现该接口的类型
*   将抽象方法添加到在第二个 dll 中继承的基类
*   如果（ab）使用 hacky 反射，几乎所有内部​​的东西
*   向泛型类型/方法添加约束
*   将类型标记为`sealed`在第二个 dll 中继承的时间
*   `struct`如果调用者使用成员初始化而不是构造函数初始化，则向 a 添加字段

（删除包括将可访问性更改为非公开内容）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T11:44:36.417

从技术上讲，名称会破坏它（在强命名程序集的情况下，名称和版本以及密钥标记）。否则，框架将*尝试*加载和使用 DLL，这或多或少会正常工作，直到它遇到不同的类型或方法签名、丢失的类型等。但请注意，重用名称会直接回到DLL 地狱（或其问题）。

我建议阅读有关[程序集版本控制](http://msdn.microsoft.com/en-us/library/51ket42z.aspx)的更多信息，以了解如何解决此类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T11:46:01.330

只要您不调用新的类、函数[在 application.dll 中添加]，您就可以对 application.dll 进行任何更改而无需重新编译 webservice.dll。如果您想使用 webservice.dll 中的任何 application.dll 更改，则必须重新编译 webservice.dll

当然，如果您更改 websrvice.dll 使用的 application.dll 中任何方法或属性的签名或访问级别，它会破坏您在 webservice 中的代码。

# c# - 部署项目未更新 .exe

> ID：806501
> 
> 赞同：11
> 
> 时间：2009-04-30T11:40:51.090
> 
> 标签：c#, winforms, deployment

我有一个带有单个 .exe 文件作为主要输出的 Winforms 项目。我正在使用部署项目来分发它，但是安装新版本时.exe文件没有更新，这意味着我必须要求用户手动卸载然后安装新版本。

这就是我正在做的事情：

*   我在输出项目上增加程序集版本（这是部署项目的主要输出）
*   我增加了部署项目的版本（并在出现提示时更新产品代码）
*   部署项目设置为删除以前的版本
*   .exe 上的“永久”属性设置为 False

我确信我以前成功地做到了这一点，但我现在似乎做不到。我究竟做错了什么？

编辑：我通过更改项目属性中的*文件版本来使其工作，如*[this answer](https://stackoverflow.com/questions/511789/how-do-i-persuade-a-vs2005-msi-to-upgrade/1510353#1510353)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-30T11:54:20.997

很难说是什么原因造成的。您如何安装不删除以前版本的 MSI？我建议运行不使用详细日志记录的安装。我会像这样从命令行运行它：

```
msiexec /i "project.msi" /l*v "c:\install.log" 
```

/l 告诉 msiexec（它是安装程序服务）创建一个日志，* 告诉它记录所有内容，v 告诉它使用详细模式。

运行它，并查看日志文件，它应该会告诉您失败的原因和原因。您也可以在此处发布该日志文件，我敢打赌我们可以一起找到一些东西。

**附加问题：**日志文件使安装程序看起来像是认为无事可做。当您声明更新文件版本时，您在更新什么？您如何部署要包含的文件？您是否将它们作为“主要输出”包含在安装项目中，还是直接包含程序集？您是否有它确定依赖关系并自动包含它们，或者您是否包含了项目输出？

**更新** 请参阅这篇文章，了解自动升级 MSI 需要更改的内容。 [问题 511789](https://stackoverflow.com/questions/511789/how-do-i-persuade-a-vs2005-msi-to-upgrade/513169#513169)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-12-03T19:26:24.293

在把我的头撞在墙上几个小时后，终于想通了。

我的问题与这个问题相同，最终解决起来非常简单。上面的两个答案使我朝着正确的方向前进，并帮助我找出了问题，但简而言之。

如果您将 RemovePreviousVersion 设置为 true，则问题很可能出在程序集信息按钮下的应用程序设置中。

我按照***mohlsen***在上面的答案中显示的那样运行日志**msiexec /i "project.msi" /l*v "c:\install.log"**并最终得到相同的响应，**不会覆盖；不会打补丁；现有文件的版本相同**

***Inverse***为我指明了正确的方向，但也让我对 MFC 参考感到有点失望。我正在编写一个 Windows 应用程序，最后将两个和两个放在一起，然后转到应用程序选项卡下我正在编写的应用程序的属性。有一个名为“程序集信息”的按钮，它指向程序集版本和文件版本。我增加了这些，现在我的 .exe 文件更新了。

所以你必须做两件事，增加你正在编写的应用程序中的实际程序集版本以及安装包的版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-10-14T01:32:29.373

您的应用程序的可执行文件可能不会更新，因为您没有增加 MFC 项目中的 VERSION 信息资源。

仅仅增加安装项目版本是不够的。见下文：

[http://msdn.microsoft.com/en-us/library/6fkzft86.aspx](http://msdn.microsoft.com/en-us/library/6fkzft86.aspx)

“设置 API 也使用版本信息。”

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-23T01:46:24.350

另一个提示：如果您打开项目的 AssemblyInfo.cs 文件，并将 AssemblyVersion 更改为

[程序集：AssemblyVersion("1.0.*")]

然后每次构建项目时都会自动更新程序集版本信息。然后从同一文件中注释掉或删除 AssemblyFileVersion 条目，因此文件版本默认与程序集版本相同。这意味着文件版本会在您每次构建时自动更新，因此您只需更新安装程序版本即可按预期覆盖文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T12:08:14.100

您是否在应用程序运行时尝试更新？如果是这样，那将是不可能的。你需要想一个更好的方法，比如使用一个小的外部应用程序来杀死当前正在运行的进程，然后安装更新，然后重新启动新版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-30T15:08:23.400

您可以尝试对解决方案进行重建。您也可以在使用时清洁它。如果您更改的只是内容文件，我可以看到会发生这种情况。如果不是，则无视。

# svn - SVN 维护

> ID：806503
> 
> 赞同：3
> 
> 时间：2009-04-30T11:41:01.123
> 
> 标签：svn, maintenance

我们已经在我的工作场所使用 SVN 几年了，自从我们安装它以来，除了更新和备份之外，我们真的没有对其进行任何维护。我们还应该做些什么来维护 SVN，或者我们已经完成了我们真正需要做的所有事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-30T11:49:54.703

请参阅svnbook 中的[存储库维护，尤其是](http://svnbook.red-bean.com/en/1.1/ch05s03.html)[清理](http://svnbook.red-bean.com/en/1.1/ch05s03.html#svn-ch-5-sect-3.2)部分。

> 一旦根据您的喜好进行配置，您的 Subversion 存储库通常不需要太多关注。但是，有时可能需要管理员提供一些手动帮助。svnadmin 实用程序提供了一些有用的功能来帮助您执行诸如
> 
> *   修改提交日志消息，
> *   删除死交易，
> *   恢复“楔形”存储库，以及
> *   将存储库内容迁移到不同的存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T12:00:55.613

如果您在后端使用 FSFS，Subversion 基本上是免维护的。BDB 后端有点棘手。

如果您在服务器上使用 1.6（相当新），您应该考虑进行转储/重新加载，然后运行`svnadmin pack`以利用 FSFS 中的服务器端改进，从而使存储库更节省空间。

# language-agnostic - 在定义了 UML 用例之后对系统建模

> ID：806515
> 
> 赞同：1
> 
> 时间：2009-04-30T11:48:55.300
> 
> 标签：language-agnostic, database-design, uml

...下一步是什么？

在你定义了哪些演员做什么动作之后，你会走哪条路？您是对数据库建模还是更喜欢从类开始？

我认为更好的方法是从类建模图开始，专注于对象之间的关系。这已被证明是错误的，因为我在详细类上走得太深了，即使系统“似乎工作”，当我进行数据库建模时，一切都不会自然地适合我在前一阶段选择的位置。

我读到有人说应该将应用程序逻辑放入数据库并利用其检索数据的速度，而不是在内存中构建大型对象以进行查询并提供底层数据库的抽象。我一直认为数据库是用来存储我的数据并提供一种快速访问它的方法。但也许我错了，我的意思是，我真的必须建立一个数据库，它的内部逻辑与我放在一组类上的逻辑相同吗？数据库不是缺少实现这一点的工具吗？

我认为我无法确定从哪里开始的正确点，如果我选择从数据库开始，我发现很难不只是将其视为“存储数据的地方，让我们在更高级别上执行应用程序逻辑“事情，如果我从类开始，数据库最终看起来像是类的不自然表示，我会感觉错过了一些重要的东西，比如没有为正确的工具分配正确的目的。

你如何处理这个问题？在决定是从数据库还是类建模开始时，根据您的经验，哪种方法已被证明可以导致自然而干净的实现？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T12:39:46.830

我使用[Robustness Analysis](http://www.ddj.com/architect/184414712)取得了成功。

> 本文侧重于健壮性分析，包括分析用例的叙述性文本并识别将参与每个用例的初步猜测对象集，然后将这些对象分为三类：
> 
> 1.  边界对象，参与者用于与系统通信。
> 2.  实体对象，通常是来自域模型的对象（“驱动设计：问题域”的主题，2001 年 1 月）。
> 3.  控制对象（我们通常称为控制器，因为它们通常不是真实对象），充当边界对象和实体对象之间的“粘合剂”。图 1 显示了这三种对象的可视化图标。

实体对象是（通常）最终在数据库中的对象/

关于类和数据库之间的映射，我会推荐[S.Lott 的文章“The ORM Problem”](http://homepage.mac.com/s_lott/iblog/architecture/C20070522153704/E20090325060144/index.html)（他也是 StackOverflow 的参与者）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T12:00:55.053

如果使用测试驱动开发，请先编写单元测试。您的课程将在您进行时进行概述。

您可以选择在没有数据库（模拟或存根对象）的情况下开发业务逻辑，或者在继续测试时开发数据库。

请记住，您的数据库和域模型不应彼此一对一地映射。

# php - 文件/终端输出格式的 PHP 语法是什么？

> ID：806521
> 
> 赞同：7
> 
> 时间：2009-04-30T11:50:42.550
> 
> 标签：php, file, command-line

我想使用 PHP 创建一个命令行程序。如何设计程序的 I/O？我可以将输出作为文本发送。我想知道具体的输出语法。例如：在 HTML 中，我使用`<br/>`传递到新行。如何使用终端/文件输出来做到这一点？PHP中是否有面向终端/文件的编程参考？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-30T13:10:13.047

实际上，编写命令行 PHP 脚本非常简单。您以与通常完全相同的方式输出文本：`print`并且`echo`都将文本打印到控制台。这里唯一的区别是您不能使用 HTML 标记进行格式化，因为您的代码不会被 Web 浏览器解释（即`"\n"`实际上会创建一个可见的换行符，而不是`<br />`）。

从标准输入读取输入有点棘手，但它真正涉及的只是使用一些文件读取函数（例如，、、`fgets()`）`fgetc()`并作为文件路径`fscanf()`传入（或者，取决于您的 PHP 版本的新程度）。`STDIN``php://stdin`

是的，在 php.net 上有一个[PHP 命令行编程参考。](http://us2.php.net/manual/en/features.commandline.php)它几乎涵盖了在命令行环境中使用 PHP 所需了解的所有内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-01-14T13:38:01.043

在编写 CLI 脚本时，请考虑以[PHP_EOL](http://www.php.net/manual/en/reserved.constants.php)结尾的行，这样它将与 UNIX ( `\n`)、Windows ( `\n\r`) 和 Mac ( `\r`) 跨平台兼容。当您想将其打印为 html 时，请使用 PHP 的[nl2br](http://php.net/manual/en/function.nl2br.php)函数。

# asp.net - 如何使用自己的 HttpHandler 抢占 IIS StaticFileHandler

> ID：806525
> 
> 赞同：1
> 
> 时间：2009-04-30T11:51:14.157
> 
> 标签：asp.net, iis-7, httphandler

我正在构建一个网站，引用一个包含多个 js 脚本作为嵌入式资源的程序集、一些使用这些脚本的控件和一个知道如何在被要求时检索这些嵌入式脚本的“HttpResourcesHandler”。

在 web.config 中，我在部分中有一个条目，内容为

```
<add verb="*" 
     path="/embedded/controlscripts/*" 
     validate="false" 
     type="CWeb.Controls.Web.HttpResourcesHandler, CWeb.Controls.EditBox" /> 
```

在使用 Visual Studio Web 开发服务器进行调试时，此控件和网站工作得非常好，但是如果我随后将网站切换为在 IIS 下运行（v7 - 我正在运行 Vista，使用 IIS 调试网站似乎没有问题5 或 6)，控件无法再访问脚本。我收到一个 HTTP 404.0 错误屏幕，指示 StaticFileHandler 找不到该文件。我知道 - 它是嵌入式的。

因此，StaticFileHandler 似乎在我自己之前获取脚本请求并返回 404。我如何告诉 IIS 将我自己的资源处理程序用于嵌入/控制脚本目录而不是 staticfilehandler？顺便说一句，我正在以经典模式运行网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-30T09:39:37.900

我也偶然发现了这一点。我的错误是我在 system.web 而不是 system.webserver 下注册了处理程序。

[查看此帖子了解详情](https://stackoverflow.com/questions/355261/whats-the-difference-between-system-web-and-system-webserver)

# iphone - 横向模式下的 iPhone UITextField

> ID：806529
> 
> 赞同：1
> 
> 时间：2009-04-30T11:52:04.310
> 
> 标签：iphone, cocoa, touch

如果您处于横向模式，如何让键盘（用于编辑 UITextField）以正确的方向出现？

我在横向模式下用openGL做游戏。

当用户输入他们的名字以获得高分时，我会添加一个 UITextField。我可以旋转 UITextField（感谢 CGAffineTransformMakeRotation），但是当用户点击 TextField 时，键盘会以纵向模式弹出。不是风景。

我知道键盘可以在横向模式下出现（它在 Safari 中出现）所以我该如何设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T16:32:42.747

您是在横向模式下启动应用程序，还是在使用转换？听起来您正在使用转换 - 如果您只是在横向中运行所有内容，它可能会让您的生活更轻松，尽管我根本没有玩过 OGL，所以不知道那里是否有并发症。

您需要使用 UIApplication setStatusBarOrientation （是的，即使您的状态栏是隐藏的）。这也控制了键盘的方向。

例如，当您启动您的应用程序时执行此操作（不是在您显示键盘之前，您需要在它生效之前将控制权返回给操作系统，IIRC）。

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeRight animated:NO] 
```

# sharepoint-2007 - 共享点 SPSite

> ID：806533
> 
> 赞同：3
> 
> 时间：2009-04-30T11:54:42.040
> 
> 标签：sharepoint-2007, spsite

我正在尝试为共享点搜索创建一个对象的 spsite，但由于找不到网站，我在生产中遇到异常

```
SPSite site = new SPSite("sitename");
ServerContext scon = ServerContext.GetContext(site);
SearchContext srchcontext = SearchContext.GetContext(scon);
Scopes sc = new Scopes(srchcontext); 
```

它抛出未找到的异常站点我已经检查了它退出的站点的名称。

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-04-27T22:21:33.793

检查您是否针对正确的目标进行构建。即 x86 与 x64。当我针对 x86 构建并尝试针对 x64 运行时，出现此错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-30T12:16:29.697

您的权限设置是否正确？看看这个对话...

[http://social.msdn.microsoft.com/Forums/ja-JP/sharepointdevelopment/thread/4d923b6a-d423-4c42-82dd-3315872db9cc](http://social.msdn.microsoft.com/Forums/ja-JP/sharepointdevelopment/thread/4d923b6a-d423-4c42-82dd-3315872db9cc)

您需要确保（取自上述内容）：

1.  用户是服务器场管理员。
2.  用户对内容数据库具有读取和写入权限。
3.  用户是网站集管理员。
4.  用户有权访问代码循环通过的 Windows SharePoint Services 站点或 SharePoint Server 2007 站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T12:40:20.043

您还应该确保您使用的 IP 地址可以从本地机器和运行程序的服务器上访问。

在执行程序之前，从 cmd 提示符 ping 网址。另一种测试它的方法是在浏览器中从您正在执行程序的框中打开确切的网址。

您可能试图从不在同一域中的服务器访问内部站点。

最后，正如[MSDN 文档](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsite.aspx)中所说，您不应使用“SiteName”，而应确保使用“SiteAbsoluteUrl”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-11T06:27:47.060

如果您创建一个控制台应用程序并在那里尝试相同的代码，则相同的代码可以工作。您必须将应用程序添加到 IIS 并更改应用程序池标识。我做了同样的事情，它对我有用。

# delphi - Delphi：F2084 内部错误 T2575

> ID：806534
> 
> 赞同：5
> 
> 时间：2009-04-30T11:54:44.473
> 
> 标签：delphi

有人知道这个错误是什么意思吗？

它在我的一个单位中来来去去。添加空格或换行有时会解决它，有时不会...

我正在使用德尔福 2007。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-30T12:00:58.390

这是一个[Delphi 内部错误指南](https://web.archive.org/web/20131023045517/http://www.stevetrefethen.com/wiki/Default.aspx?Page=InternalErrors&AspxAutoDetectCookieSupport=1)，可能会对您有所帮助。内部错误通常可以通过删除 DCU 文件、重新启动 IDE 或不使用加速 Delphi 启动的工具（如 DelphiSpeedUp）来解决。

但是在大多数情况下，这是 Delphi 编译器中的一些奇怪的错误，如果您知道要解决它并且这不会很昂贵，那么请这样做并感到高兴。当我用 Inc 增加一个变量并使用加法而不是 Inc 解决问题时，我曾经让控制台版本 dcc32 崩溃（IDE 编译良好）...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-30T13:23:35.337

最好的办法是将此报告给 CodeGear。如果您能找到一种方法来持续故意导致错误，这真的很有帮助，这样他们就可以更容易地追踪它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T17:23:39.267

获得内部错误的一种简单方法是使用剪切和粘贴来创建新例程。我将 IF 块中的所有代码移动到一个新过程，并在新过程结束时出现内部错误 T2335（在 Delphi 7 中）。

该错误是由“If (Something) then Break;”行引起的。问题是，这段代码不再在循环中，所以没有什么可以打破的。将“Break”更改为“Exit”解决了这个问题。

所以寻找 Break and Continue 语句。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-05-18T08:25:31.533

我也遇到过这个问题，我测试了很多解决方案，但没有一个对我有帮助。然后我发现了这个错误原因：在发生错误的函数中，我有一个 Inc() 函数试图增加一个字符串变量！所以我已经修复了那个错误，一切都恢复正常了:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-16T09:19:01.453

我今天遇到了另一个案例（D2010），自从良好的涡轮帕斯卡时代以来，一切都是完全合法的语法：

```
type
  TValueRec = record
    selector : (int,str,unk);   
    intVal : Integer;
    strVal : WideString;
    unkVal : IUnknown;  
  end; 
```

在基于泛型的类的方法中使用此记录给我带来了另一个单元中间某处的“F2084 内部错误：AV0661CFEF-R0000000C-0”。

以这种方式改变它对我有用：

```
type
  TValueRecSelector = (int,str,unk);   

  TValueRec = record
    selector : TValueRecSelector;
    intVal : Integer;
    strVal : WideString;
    unkVal : IUnknown;  
  end; 
```

但是，非常烦人的是，这样的事情会在代码中完全不相关的地方产生这样的错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-30T20:25:33.497

所有内部错误都是不应该发生但确实发生的事情。检查[QC](http://qc.embarcadero.com/wc/qcmain.aspx)，如果没有，请报告。如果您可以提供一种重现它的方法，那么他们更有可能修复它。

通常对于**内部错误**，我会进行完整构建或重新启动 Delphi。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-11-03T13:01:03.677

我在一个实例中遇到了这个错误：

```
procedure TDMData.SetValue(AValue: Word);
var
  prevValue: Word;
  method: TMethod;
begin
  if FValue = AValue then
    Exit;
  prevValue := FValue;
  FValue := AValue;
  for method in FValueChangeEvent.Notifications do
    TDMDataValueChangeNotification(method)(Self, AValue, prevValue);
end; // <--- Fatal: F2084 Internal Error: T2575 
```

GetNotifications 返回的记录的 GetNotifications Notifications 属性和 GetEnumerator 方法都有一个内联指令。只有从 GetEnumerator 中删除内联，问题才会消失。

注意：类似的功能不会导致此内部错误！

# tfs - TeamBuild - 是否可以在构建时选择要编译的项目？

> ID：806540
> 
> 赞同：1
> 
> 时间：2009-04-30T11:56:31.537
> 
> 标签：tfs, build, build-automation

我正在使用 TeamFoundation 自动化我的构建过程，我需要根据构建中的 .proj 文件选择要编译的项目。这是完整的场景：

我有一个 .proj 文件，它使用 .sln 文件来编译包含 2 个网站的解决方案。.sln 文件配置为在发布配置中编译这两个网站。

我的目标是每个构建类型只编译 1 个网站，即我希望 BuildType1 编译网站 1 和 BuildType2 编译网站 2。

是否可以“修改” .sln 以使我可以取消标记要编译的网站之一？由于它是一个自动化的过程，我无法在每次只想编译一个网站时手动更改 .sln。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T12:06:28.080

查看 TFSBuild.proj 文件中的 SolutionToBuild 部分。

```
<SolutionToBuild Include="$(BuildProjectFolderPath)/path/MySolution.sln">
   <Targets>MyCustomTarget1;MyCustomTarget2</Targets>
   <Properties> Configuration=Release</Properties>
</SolutionToBuild> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-11T07:00:11.660

您可以通过两种主要方式控制构建：

*   在您的团队资源管理器中创建一个单独的构建类型。这将拥有自己完全独立的 TFSBuild.proj 文件，因此它可以以完全不同的方式构建相同的代码库。设置 SolutionToBuild 以构建您想要的内容（如接受的答案中所述）。

*   使用一种构建类型，并将其 TFSBuild.proj 设置为使用属性来控制构建的内容（这需要更深入地了解 MSBuild 脚本）。在 Queue New Build 对话框中，您可以使用 /p: 命令行标志根据需要设置属性。例如“/p:IncrementalGet=false;IncrementalBuild=false;ForceGet=true”将强制正常增量构建进行完全重建。这对于偶尔的情况很有用，但对于日常构建来说不是一个好主意，因为您每次都必须手动设置参数。

# c++ - C++ 宏：操作参数（具体示例）

> ID：806543
> 
> 赞同：5
> 
> 时间：2009-04-30T11:56:57.747
> 
> 标签：c++, c, c-preprocessor

我需要更换

```
GET("any_name") 
```

和

```
String str_any_name = getFunction("any_name"); 
```

困难的部分是如何修剪引号。可能的？有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-30T12:02:02.477

怎么样：

```
#define UNSAFE_GET(X) String str_##X = getFunction(#X); 
```

或者，为了防止嵌套宏问题：

```
#define STRINGIFY2(x) #x
#define STRINGIFY(x) STRINGIFY2(x)
#define PASTE2(a, b) a##b
#define PASTE(a, b) PASTE2(a, b)

#define SAFE_GET(X) String PASTE(str_, X) = getFunction(STRINGIFY(X)); 
```

用法：

```
SAFE_GET(foo) 
```

这就是编译的内容：

```
String str_foo = getFunction("foo"); 
```

关键点：

*   使用 ## 将宏参数组合成单个标记（标记 => 变量名等）
*   和 # 对宏参数进行字符串化（在 C/C++ 中进行“反射”时非常有用）
*   为您的宏使用前缀，因为它们都在同一个“命名空间”中，并且您不希望与任何其他代码发生冲突。（我根据你的用户名选择了MLV）
*   如果您嵌套宏，包装宏会有所帮助，即从另一个带有其他合并/字符串化参数的宏调用 MLV_GET（根据下面的评论，谢谢！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T12:02:36.560

一种方法是在调用宏时不引用名称：

```
#include <stdio.h>

#define GET( name ) \
    int int##name = getFunction( #name );   \

int getFunction( char * name ) {
    printf( "name is %s\n", name );
    return 42;
}

int main() {
    GET( foobar );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T12:06:04.587

在回答您的问题时，不，您不能“剥离”C++ 中的引号。但正如其他答案所示，您可以“添加它们”。由于无论如何您将始终使用字符串文字（对吗？），您应该能够切换到新方法。

# c# - 在 ObservableCollection 中识别和替换对象的最有效方法是什么？

> ID：806548
> 
> 赞同：4
> 
> 时间：2009-04-30T11:59:24.150
> 
> 标签：c#, wpf, observablecollection

我有一个方法可以接收已更改属性的客户对象，我想通过替换该对象的旧版本将其保存回主数据存储中。

有谁知道在下面编写伪代码的正确 C# 方法？

```
 public static void Save(Customer customer)
    {
        ObservableCollection<Customer> customers = Customer.GetAll();

        //pseudo code:
        var newCustomers = from c in customers
            where c.Id = customer.Id
            Replace(customer);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T12:08:00.947

最*有效*的方法是避免 LINQ ;-p

```
 int count = customers.Count, id = customer.Id;
    for (int i = 0; i < count; i++) {
        if (customers[i].Id == id) {
            customers[i] = customer;
            break;
        }
    } 
```

如果您想使用 LINQ：这并不理想，但至少可以：

```
 var oldCust = customers.FirstOrDefault(c => c.Id == customer.Id);
    customers[customers.IndexOf(oldCust)] = customer; 
```

它通过 ID（使用 LINQ）找到它们，然后用于`IndexOf`获取位置，并使用索引器对其进行更新。有点风险，但只有一次扫描：

```
 int index = customers.TakeWhile(c => c.Id != customer.Id).Count();
    customers[index] = customer; 
```

# apache - Apache 基本身份验证是否防御暴力攻击？

> ID：806549
> 
> 赞同：4
> 
> 时间：2009-04-30T11:59:49.500
> 
> 标签：apache, basic-authentication, brute-force

它会在重复尝试错误密码后关闭并锁定，和/或它会在重试之间增加滞后吗？还是这取决于您或您的提供商安装了​​哪些模块？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T12:19:59.203

默认的 Apache 安装不这样做。

通常这最好由您的 Web 应用程序（例如 PHP/JSP）来完成，以进行帐户攻击。

对于网络攻击，最好不要用于 Web 服务器，因为由于匿名/透明代理/VPN/NAT 的东西太多，很难识别来源。一旦你实现了这一点，你通常会收到很多“为什么我无法连接”的抱怨......

# c++ - C++ 中的接口

> ID：806561
> 
> 赞同：5
> 
> 时间：2009-04-30T12:02:14.550
> 
> 标签：c++

我想在 c++ 中使用接口，例如在 java 或 c# 中。我决定使用具有多重继承的纯抽象类，但是当我专门化接口时出现了严重错误：

```
class Interface
{
public:
  virtual int method() = 0;
};

// Default implementation.
class Base: virtual public Interface
{
public:
  virtual int method() {return 27;}
};

// specialized interface
class Interface2: public Interface
{
public:
  virtual int method() = 0;
// some other methods here
};

// concrete class - not specialised - OK
class Class: public virtual Interface, public virtual Base
{
};

// concrete class - specialised
class Class2: public Interface2, public Base
{
};

int main()
{
  Class c;
  Class2 c2;
return 0;
} 
```

警告 1 警告 C4250: 'Class' : 通过支配 30 继承 'Base::Base::method'

错误 2 错误 C2259：“Class2”：无法实例化抽象类 42

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T12:12:48.470

Class2 继承自一个抽象类（Interface2），但没有实现纯虚方法，所以它仍然是一个抽象类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-30T13:10:58.037

基于此评论

```
如果方法没有在 Class2 或 Class 中重新实现（它不在
这种情况下） Base::method() 将被调用。否则重新实现
将被调用。有一个具有共同基础的接口层次结构
愚蠢的实施。

– danatel 16 分钟前

```

那不是你得到的，你没有共同的基础，你有

```
Interface -> Interface2 -> Class2
Interface -> Base -> Class2 
```

接口在派生树中没有“合并”，interface2 不会从接口虚拟继承，因此它将有自己的接口超类。就像纯虚`method()`在 Class2 中存在两次，一次通过 Class 实现，一次未实现。

即使你虚拟继承了，公共基础（接口）仍然没有实现

如果 Base 包含应该在整个层次结构中可用的琐碎操作，那么为什么不将 Base 作为您的起点呢？（即使仍然是纯虚拟的实现）。

如果这只是一个非常简单的例子来简化问题，那么像[桥模式](http://en.wikipedia.org/wiki/Bridge_pattern)这样的东西可能更有用。但是如果不了解更多信息，很难进一步指导您。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-30T15:54:42.340

嘿嘿，这个问题让我深埋在我脑海中的某个地方发痒。我不能完全理解它，但我认为这与定义接口层次结构然后继承接口和实现有关。然后，您不必通过将调用转发到基类来实现所有功能。我认为。

我认为这个简单的例子展示了同样的东西，但可能更容易理解，因为它使用了可以很容易可视化的东西：（请原谅结构的懒惰）

```
#include <iostream>
using namespace std;

struct Vehicle
{
    virtual void Drive() = 0;
};

struct VehicleImp : virtual public Vehicle
{
    virtual void Drive() 
    {
        cout << "VehicleImp::Drive\n";
    }
};

struct Tank : virtual public Vehicle
{ 
    virtual void RotateTurret() = 0;
};

struct TankImp : public Tank, public VehicleImp
{
    virtual void RotateTurret() 
    {
        cout << "TankImp::RotateTurret\n";
    }
    // Could override Drive if we wanted
};

int _tmain(int argc, _TCHAR* argv[])
{
    TankImp myTank;
    myTank.Drive();         // VehicleImp::Drive
    myTank.RotateTurret();  // TankImp::RotateTurret
    return 0;
} 
```

TankImp 基本上继承了 Tank 接口和 Vehicle 实现。

现在，我很确定这是 OO 圈子中众所周知且可以接受的事情（但我不知道它是否有一个花哨的名字），所以在这种情况下可怕的钻石事情是可以的，你可以放心地压制优势警告，因为这是你想要在这种情况下发生的事情。

希望能以某种方式帮助您指出正确的方向！

顺便说一句，您的代码没有编译，因为您没有在 Class2 中实现纯虚拟“方法”。

**编辑：**

好的，我想我现在更好地理解了您的问题，并且我认为错误出在 Interface2 中。尝试将其更改为：

```
// specialized interface
class Interface2: public virtual Interface // ADDED VIRTUAL
{
public:
    //virtual int method() = 0;   COMMENTED THIS OUT
    // some other methods here
}; 
```

Interface2 不应该有方法的纯虚拟定义，因为它已经在 Interface 中。

Interface 的继承必须是虚拟的，否则当您从 Interface2 和 Class2 中的 Base 派生时，您将与 Base::method 产生歧义。

现在你应该会发现它会编译，可能带有优势警告，当你调用 c2.method() 时，你会得到 27。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-30T12:23:46.450

**关于`Class`：**您需要做的就是源自`Class`-`Base`它实现的事实`Interface`是隐含的，实际上是不可避免的：

```
class Class: public Base  // virtual inheritance is unnecessary here
{
}; 
```

`Class`将根据需要继承`method()`自`Base`。

**关于`Class2`：**

**免责声明：前面的负面结果**

根据您对[汤姆回答](https://stackoverflow.com/questions/806561/interfaces-in-c/806604#806604)的评论，我**认为我有**以下答案`Class2`：

```
// concrete class - specialised
class Class2: public Interface2, public Base
{
public:
    using Base::method;    // "Imports" all members named "method" from Base
}; 
```

但实际上，这是行不通的。浏览 C++ 标准揭示了第 7.3.3 节第 14 段解释说`using`不能用于解决对继承成员的模棱两可的访问：

> ... [注意：因为 using-declaration 指定基类成员（而不是成员子对象或基类子对象的成员函数），所以 using-declaration 不能用于解决继承的成员歧义。...]

似乎获得所需行为的唯一方法`Class2`是手动转发该方法：

```
// concrete class - specialised
class Class2: public Interface2, public Base
{
public:
     virtual int method() { return Base::method(); }
}; 
```

**关于`virtual`继承：** '声明*不需要*它`Class`，但 ' 声明可能*确实*需要它，`Interface2`以确保`Class2`只有一个类型的子对象`Interface`——就目前而言，每个`Class2`对象都有两个这种类型的子对象。（虽然如果它实际上是一个纯接口，缺少成员变量，这不会引起问题`Interface`。）如果有帮助，请画一个图：每次出现没有关键字的基类时`virtual`，它都显示为一个不同的对象；所有带有关键字的基类`virtual`都被压缩成一个对象。

**[更新：[markh44 的出色回答](https://stackoverflow.com/questions/806561/interfaces-in-c/807643#807643)表明，上述方法（*虚拟*`Interface2`继承自）实际上将允许自动继承from的实现！问题解决了！]*`Interface``Class2``method()``Base`***

 ** * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-30T12:45:09.673

如果您可能使用接口或基指针进行删除，您还应该考虑在接口中定义虚拟析构函数。

如果没有虚拟析构函数，如果您执行以下操作，您将遇到问题：

```
Base *b = new Class2();
delete b; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-30T14:07:26.683

[另一个论坛中的这个答案](http://www.velocityreviews.com/forums/showpost.php?p=3783768&postcount=6)似乎可以解决您提到的确切问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-30T13:19:22.167

一般来说，你应该避免菱形继承模式：

```
 Interface
            /      \
          Base   Interface2
            \      /
             Class2 
```

如果您不小心，这将导致您在路上遇到各种悲伤。模棱两可会咬你。

在您的特定实例中，Interface2 不需要从 Interface 继承。Interface2 不需要指定“方法”，因为它是抽象的。删除 Interface 和 Interface2 之间的继承以打破菱形。然后你的层次结构看起来像：

```
 Interface                Interface  Interface2
           |                          |       |
          Base                      Base      |
           |                           \      /
         Class                          Class2 
```

你的实现看起来像：

```
// concrete class - not specialised - OK
class Class: public Base
{
};

// concrete class - specialised
class Class2: public Base, public Interface2
{
    virtual int method() {return 35;}

    virtual void Inteface2Method { ... }
}; 
```

# c# - C# 应用程序范围的颜色管理

> ID：806564
> 
> 赞同：2
> 
> 时间：2009-04-30T12:03:13.970
> 
> 标签：c#, colors, themes

我正在编写一个大型 C# 应用程序。关键是控件的颜色应该可以由应用程序的用户进行调整。如果有任何解决方案可以覆盖（仅针对此应用程序的上下文）System.Drawing.SystemColors，那就太好了，这样我就不必手动设置每个控件的值。有人知道我的问题的解决方案就这么简单吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T12:20:42.417

我认为您最好的方法是继承每个控件并设置其默认显示属性。这将为您提供一个标准 WinForms 控件库，您可以轻松地自定义和重复使用这些控件。更多信息[在这里](http://msdn.microsoft.com/en-us/library/w2a8y03d.aspx)（在 VB 中，我在 C# 中找不到示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T12:09:53.143

查看应用程序设置绑定。不确定如何对所有控件执行此操作，但只需通过控件树递归就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T12:34:25.783

我写了下面的代码来做这样的事情。我对它不是特别满意，因为它需要对任何不寻常的控件进行专门处理，但它确实完成了工作。我保留了一个 Painter 实例，并在每次创建表单时调用 Apply，并将表单作为参数传递。它通过所有子控件递归，改变它们的外观

```
public class Painter
{
    Color foreColor;
    Color backColor;
    Color altBackColor;
    Color buttonColor;
    Font font;

    public Painter(Color foreColor, Color backColor, Color altBackColor, Color buttonColor, Font font)
    {
        this.foreColor=foreColor;
        this.backColor=backColor;
        this.altBackColor=altBackColor;
        this.buttonColor=buttonColor;
        this.font=font;
    }    

    public void Apply(Control c)
    {
        if(c==null)
            return;

        c.ForeColor = foreColor;

        c.BackColor = (c is Button ) ? buttonColor
                                     : backColor;

        if (c is DataGridView)
        {
            var dgv = (DataGridView) c;
            dgv.BackgroundColor = BackColor;
            dgv.AlternatingRowsDefaultCellStyle.BackColor = altBackColor;
            dgv.ColumnHeadersDefaultCellStyle.BackColor = buttonColor;
        }

        c.Font = font;

        foreach(Control child in c.Controls)
            Apply(child);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T12:09:42.193

您不需要覆盖系统默认值，但您可以定义自己的颜色。

```
Color NastyColour = Color.FromArgb(1, 2, 3); 
```

1 = 红色 2 = 绿色 3 = 蓝色

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T12:12:10.797

不幸的是，不能仅为您的应用程序修改 Windows 配色方案。

Winforms 可以更改窗体上所有控件的背景颜色等内容，但对于许多区域（例如按钮上的斜角颜色或窗口标题栏），您可能需要自己绘制控件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-30T12:38:20.580

花费 1000 美元即可获得一份 DevExpress。我们正在使用他们的框架编写一个大型应用程序，并且皮肤功能很棒。

我知道这听起来不是最好的答案，但如果您正在寻找应用程序范围的皮肤功能，第三方库可能是合适的。

# sqlite - SQLite - 删除具有最低 id 的行

> ID：806567
> 
> 赞同：1
> 
> 时间：2009-04-30T12:03:57.790
> 
> 标签：sqlite

如何从具有最低 rowid 的表中删除一行？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-30T12:06:10.127

```
DELETE FROM
  MyTable
WHERE
  Id = (SELECT MIN(Id) FROM MyTable); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-02-13T20:04:50.253

在大多数情况下，rowid 是一个索引列。如果是这种情况，**更快**的解决方案是：

```
DELETE FROM 
  tablename
WHERE
  rowid= (SELECT rowid FROM tablename order by rowid limit 1) 
```

如果 rowid 没有被索引，那么：

```
DELETE FROM 
  tablename
WHERE
  rowid= (SELECT MIN(rowid) FROM tablename) 
```

我仍然会测试第一个，因为它通常会更快，即使 rowid 没有被索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-01-27T20:17:14.497

```
DELETE FROM 
  tablename
WHERE
  rowid= (SELECT MIN(rowid) FROM tablename) 
```

# multithreading - “尴尬平行”的反义词是什么？

> ID：806569
> 
> 赞同：37
> 
> 时间：2009-04-30T12:04:20.660
> 
> 标签：multithreading, concurrency, terminology, parallel-processing, multicore

根据 Wikipedia 的说法，“令人尴尬的并行”问题是将问题分成多个并行任务只需很少或根本不需要努力的问题。光线追踪通常被用作示例，因为原则上每条光线都可以并行处理。

显然，有些问题更难并行化。有些甚至可能是不可能的。我想知道这些更难的情况使用了哪些术语以及标准示例是什么。

我可以提出“令人讨厌的顺序”作为可能的名称吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-04-30T12:17:52.623

**本质上是顺序**的。

例子：女性的数量不会减少怀孕的时间。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2010-08-23T19:08:54.597

“令人尴尬的并行”问题的对立面不止一个。

## 完全顺序

一个相反的问题是**不可并行化**的问题，即不能通过使用多个处理器来实现[加速的问题。](http://en.wikipedia.org/wiki/Speedup)已经发布了一些建议，但我会提出另一个名称：一个**完美的顺序**问题。

示例：[I/O-bound](http://en.wikipedia.org/wiki/I/O_bound)问题，“计算 f ^(1000000) (x [0] )”类型的问题，计算某些[加密哈希函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function)。

## 沟通密集型

另一个相反的问题是需要大量并行通信的可并行化问题（**通信密集型**问题）。此类问题的实现只能在具有高带宽、低延迟互连的超级计算机上正确扩展。将此与令人尴尬的并行问题进行对比，即使在互连非常差的系统（例如[农场](http://en.wikipedia.org/wiki/Server_farm)）上，这些问题的实现也能高效运行。

一个通信密集型问题的显着例子：求解`A x = b`哪里`A`是一个大而密集的矩阵。事实上，这个问题的一个实现是用来编译[TOP500](http://en.wikipedia.org/wiki/TOP500)排名的。这是一个很好的基准，因为它强调了单个 CPU 的计算能力*和*互连的质量（由于通信强度）。

在更实际的术语中，任何使用离散时间步长求解规则网格上的偏微分方程系统的数学模型（想想：天气预报，[计算机](http://en.wikipedia.org/wiki/In_silico)碰撞测试）都可以通过[域分解](http://en.wikipedia.org/wiki/Domain_decomposition_methods)并行化。这意味着，每个 CPU 负责网格的一部分，并且在每个时间步长结束时，CPU 会在区域边界上与“邻居”CPU 交换它们的结果。这些交流使这类问题成为交流密集型的。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-04-30T12:19:45.973

我很难不发布这个...因为我知道它不会在讨论中添加任何内容..但是对于那里的所有南方公园粉丝

“超级连载！”

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-04-30T12:17:26.293

“固执连载”？

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-04-30T14:43:50.527

与令人尴尬的并行相反的是[阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)，它说某些任务不能并行，并且完全并行任务所需的最短时间由该任务的纯顺序部分决定。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2010-07-19T20:28:54.133

顺序过程的“标准示例”：

*   生孩子：“​​速成计划之所以失败，是因为它们的理论基础是，如果有九名妇女怀孕，一个月就能生一个孩子。” ——归功于维尔纳·冯·布劳恩
*   将 pi、e、sqrt(2) 和其他无理数计算到数百万位：大多数算法是顺序的
*   导航：从A点到Z点，必须先经过一些中间点B、C、D等。
*   牛顿法：您需要每个近似值才能计算下一个更好的近似值
*   质询-响应认证
*   重点加强
*   哈希链
*   哈希现金

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-04-30T13:27:27.230

P-complete（但这还不确定）。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-06-06T02:57:04.787

我使用“羞辱顺序”

保罗

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-30T12:09:12.053

“格拉登利顺序”

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-04-30T12:24:38.023

这一切都与数据依赖性有关。令人尴尬的并行问题是解决方案由许多独立部分组成的问题。与这种性质相反的问题将是具有大量数据依赖性的问题，其中几乎没有什么可以并行完成。 **退化依赖**?

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-06-25T02:44:47.750

我最常听到的术语是“紧密耦合”，因为每个进程必须经常交互和通信才能共享中间数据。基本上，每个进程都依赖于其他进程来完成它们的计算。

例如，矩阵处理通常涉及在每个数组分区的边缘共享边界值。

这与令人尴尬的并行（或松散耦合）问题形成对比，其中问题的每个部分都是完全独立的，不需要（或很少） IPC。考虑主/从并行性。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-06-25T02:46:37.233

吹嘘顺序。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-06-25T02:47:18.137

我一直更喜欢“可悲的顺序”，即快速排序中的分区步骤。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-09-25T10:21:35.440

如果有人应该推测遇到自然的、不可救药的顺序问题会是什么样子，请尝试

***幸福的顺​​序***

反击'*尴尬的平行*'。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-30T12:11:14.060

“完全连载？”

科学家们更多地考虑可以做的事情而不是不能做的事情，这不应该让你感到惊讶。特别是在这种情况下，并行化的替代方法是像往常一样做所有事情。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-30T13:59:45.453

完全不可并行？几乎可并行化？

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-11-02T10:08:43.860

相反的是“令人不安的连续”。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-07-28T01:25:47.797

考虑到并行性是在同一时间步 t 中完成许多工作的行为。相反的可能是时间顺序问题

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2010-08-31T01:48:24.463

一个固有顺序问题的示例。这在 CAD 软件包和某些类型的工程分析中很常见。

具有节点之间数据依赖关系的树遍历。

想象一下遍历一个图并添加节点的权重。

你只是不能并行化它。

CAD 软件将零件表示为一棵树，要渲染到对象，您必须遍历树。出于这个原因，cad 工作站使用更少的内核和更快的速度，而不是许多内核。

谢谢阅读。

* * *

## 回答 #20

> 赞同：-4
> 
> 时间：2009-04-30T12:16:14.843

你当然可以，但是我认为这两个“名字”都不是问题。从函数式编程的角度来看，您可以说“令人讨厌的顺序”部分是算法中或多或少独立的最小部分。

虽然“令人尴尬的并行”（如果没有真正采用并行方法）是不好的编码实践。

因此，如果良好的编码习惯总是将您的解决方案分解为独立的部分，即使您当时没有利用并行性，我认为给这些东西一个名字是没有意义的。

# internet-explorer - IExplorer：在 IExplorer 的文件下载对话框的保存按钮上弹出我自己的对话框

> ID：806571
> 
> 赞同：1
> 
> 时间：2009-04-30T12:04:52.873
> 
> 标签：internet-explorer, visual-c++

嗨，我想在 IExplorer 的文件下载对话框的保存按钮上弹出我自己的对话框。antbody 可以告诉我这怎么可能。我正在为本地应用程序工作，而不是为 Web 应用程序工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T14:15:22.280

例如，如果您托管的是[IWebBrowser2](http://msdn.microsoft.com/en-us/library/aa752127(VS.85).aspx)控件，我希望您可以通过附加到[DWebBrowserEvents2 Interface](http://msdn.microsoft.com/en-us/library/aa768283(VS.85).aspx)上的事件来捕获和阻止标准行为。特别是，[FileDownload](http://msdn.microsoft.com/en-us/library/aa768284(VS.85).aspx)可能是一个很好的起点。

# xml - 自定义和查看 Amazon Web Service 使用报告的最佳方式是什么？

> ID：806579
> 
> 赞同：0
> 
> 时间：2009-04-30T12:06:49.517
> 
> 标签：xml, csv, amazon-web-services, usage-statistics

有谁知道用于查看亚马逊网络服务使用报告的最佳工具？我已将以前的报告下载为 .csv 并在 Excel 中打开。但是，我希望能够使用数据生成自定义报告，因此认为 XML 是一个更好的选择，并使用带有样式表的 Altova XMLspy 之类的东西来生成自定义报告。有没有办法用 excel 做到这一点 - 创建一个模板，以我每次需要的方式格式化 csv？

感谢您的任何指点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-12-17T10:09:05.873

如果您碰巧找到忍者，Excel 可能是一种方法...... 两种产品可以做到这一点： [CloudRows](http://www.cloudrows.com/)和[CloudSplit](http://www.cloudsplit.com/)

- 免责声明：我是 CloudRows 的创始人 :)

# c# - VS2005/VS2008 DataSet 设计器，在具有自动生成的 guid 列的表中插入一行

> ID：806590
> 
> 赞同：3
> 
> 时间：2009-04-30T12:09:18.293
> 
> 标签：c#, visual-studio-2005, insert, dataset, dataadapter

我有一个使用 VS2005/VS2008 数据集设计器创建的强类型数据表。

该表有一个主键列，它是一个 guid，由 SQL 服务器填充。问题是当我想向我的 DataTable 添加一行（或多行）然后调用[DataAdapter.Update](http://msdn.microsoft.com/en-us/library/z1z2bkx2.aspx)方法（传入 DataTable）时。当调用[DataAdapter.Update](http://msdn.microsoft.com/en-us/library/z1z2bkx2.aspx)时，我收到一条 SQL 异常，提示我无法将 NULL 插入主键列。

如何告诉设计人员这是一个自动生成的列，我不想为新行提供值？我只想要 SQL 生成的值。

我在这里遗漏了什么，或者这是 DataSet 设计器的限制？

我知道如何使用 LINQ to SQL 来实现这一点，但不幸的是，我无法为这个项目使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T18:19:36.763

可能是其中之一：

*   如果您的应用不需要 DataSet 中的列，请将其删除。
*   如果您想要该列但不关心给它一个值，则将其更改为允许 DBNull。
*   您始终可以关闭约束强制（可能是个坏主意）： DataSet.EnforceConstraints = false
*   您可以使用不会发送到数据库的代理键填充该列。

对于前两个选项，如果您想让设计人员方便地使您的结构与数据库保持同步，那么您可以删除列或以编程方式允许 null，也许就在“// HACK：”注释旁边，解释原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T14:25:10.510

您可能在 SQL Server 表定义中使用了 DEFAULT NEWID()，因此问题可能是数据集设计器没有将此列视为自动生成的。

也许在您的应用程序代码中生成 guid 可能是一个解决方案？如果没有，那么您可以在 Dataset 中设置默认值，但您可能还必须更改 DataAdapter 插入/更新语句，以便此默认值不会插入到 Sql Server 表中。

也可能有其他一些我不知道的解决方案......

# php - 将标签指向由 PHP 动态生成的图像？

> ID：806599
> 
> 赞同：3
> 
> 时间：2009-04-30T12:11:14.920
> 
> 标签：php, mod-rewrite

是否可以将图像重定向到动态生成的图像（使用 PHP）？

我有一个动态创建的图像，它有一个扩展名“.PHP”（显然），并且该服务器不在我的控制之下。所以我想将“somename.jpg”（在我的服务器上）重定向到“remoteserver/dynamicimage.php”（在一些不受我控制的远程服务器上），以便我可以立即链接它`<img src="somename.jpg"/>`并显示动态生成的图像。

请让我知道这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T12:14:57.453

尝试将这样的内容添加到您的 .htaccess 文件中

```
RewriteEngine on
RewriteRule ^(.*)\.jpg$ /scripts/$1.php 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T12:15:38.107

浏览器遵循图像的重定向。创建一个名为“somename.jpg”的 php 文件并添加：

```
<?php
header('Location: http://www.otherserver.com/image.php'); 
```

在 .htaccess 文件中使用 Apache 指令[ForceType](http://httpd.apache.org/docs/1.3/mod/mod_mime.html#forcetype)来告诉服务器将 .jpg 文件作为 php 处理：

```
<Files somename.jpg>
    ForceType application/x-httpd-php
</Files> 
```

或者，如果您真的不需要 .jpg 扩展名，只需调用文件 somename.php。

您也可以使用[mod_alias](http://httpd.apache.org/docs/1.3/mod/mod_alias.html#redirect)来完成此操作，尽管我还没有尝试过：

```
Redirect somename.jpg http://www.otherserver.com/image.php 
```

这也会出现在 .htaccess 文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T12:21:50.947

header 函数控制 HTTP 标头，这是浏览器用来确定文件类型（或者无论如何应该）的。它可以用来告诉浏览器脚本正在生成要下载的图像文件，而不是HTML 脚本输出：

```
header('Content-type: image/jpeg');
header('Content-Disposition: attachment; filename="somename.jpg"'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T12:16:05.127

这是可能的，但会导致 HTTP 重定向：

```
RewriteEngine on
RewriteRule ^somename\.jpg$ http://remoteserver/dynamicimage.php [L] 
```

另一种方法是使用[代理](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)（请参阅[`P`flag](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)），以便您的服务器请求远程资源并将其传递回客户端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T13:33:04.003

另一种更复杂但令人难以置信的强大方法是编写一些处理程序代码，这些代码会为此本地图像位置 url 激活。

这个将从外部 url 获取数据并以正确的 mime 类型输出数据。

你还可以编写一些代码来缓存这些数据，基于任何可行的方法。

这样，您将永远不会泄露图像的真实位置，您甚至可以使用不应出现在您的网站上的一些秘密凭据，例如登录数据或第三方 cookie。

所有这一切都很难做到，然后在 apache 配置中简单地配置重定向。如果 url 会泄露私人信息，我们会这样做。

# subsonic - 删除绑定到 datagridview 的集合中的多个项目需要永远

> ID：806605
> 
> 赞同：3
> 
> 时间：2009-04-30T12:13:09.500
> 
> 标签：subsonic

这不是问题，因为我已经回答过了。但它也可能对其他人有帮助。

这是发生的事情：

1.  使用 Datagridview 创建一个 WinForm 并绑定一个 Subsonic ...Collection，其中加载了 500 多个对象
2.  将一些列添加到数据网格并至少设置一个 autosizemode = fill
3.  添加逻辑以删除所有选定的列（即在按键上 -> 删除）
4.  标记所有记录并删除它们

这大约需要 30 秒。在高端 PC 上（并按比例放大：1 分钟 1000 ...）

原因：

每次删除一行时，集合 ListChanged 事件都会触发，这会导致 datagridview 重新计算自动调整列所需的空间（如果有人对“内部”感兴趣，我会附上一个调用图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-11T11:25:22.513

解决方案：

删除时，禁用 ListChangedEvent：

```
mycollection.RaiseListChangedEvents = false;

// Delete multiple rows
foreach(DataGridViewRow row In dataGridView.SelectedRows) {
   dataGridView.Rows.Remove(row);
}

// After that you can re-enable the event:
mycollection.RaiseListChangedEvents = true;

// But you have to call
mycollection.ResetBindings();
//to let the datagridview perform at least one redraw. 
```

同样的任务现在只需要眨眼

# business-process-management - BPM 和应用程序之间的区别。工作流程？

> ID：806606
> 
> 赞同：2
> 
> 时间：2009-04-30T12:14:14.287
> 
> 标签：business-process-management

我知道现在有很多关于 BPM 的讨论，而且我意识到有些人可能会认为它是一种狂热，而不是一个根本上重要的软件。

作为大多数人称之为“业务”的人，我一直在尽我最大的努力了解 BPM，以确保我们继续做出不仅对业务有意义，而且对 IT 也有意义的决策。

我在阅读时注意到，有时在讨论 BPM 时会提到应用程序工作流。直到最近我才考虑这么多。

因此，有什么区别？你什么时候用一个而不用另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-25T21:49:23.677

BPM 是关于流程和改进它，它考虑到用户和潜在的多个应用程序，例如，ERP 系统可能有多个应用程序，尽管该术语可能有其他用途。请注意，可以在不使用什么应用程序或技术的情况下查看该过程。

应用程序工作流是如何使用应用程序从 a 转到 b。这里是使用的一组特定代码，以及在应用程序从 a 到 b 的过程中发生的情况。在这种情况下，应用程序是前端和中心，而不是进程。

这是否提供了答案？另一种思考方式是，多个应用程序工作流可以组成一个系统，该系统用于可以应用 BPM 的流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-29T18:43:05.840

游戏迟到了，但工作流程之于数据库，就像 BPMS 之于 DBMS。（方便字母如何排列，是吧？）

IOW，BPM(S) 传统上是指允许您管理业务流程的特定框架/应用程序：定义它们、存储它们、对其进行版本控制、测量它们等。这类似于 DBMS 管理数据库的方式。

现在，工作流是一个定义，就像数据库是一个定义一样。在前一种情况下，它是操作/工作的定义（Fufill Order）、其步骤（发送发票）和工作的规则/约束（如果没有库存，发送通知）。在后一种情况下，类似情况，它是数据结构（CREATE TABLE）和约束（InvoiceTotal 必须 > $0.00）的定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T15:38:17.510

我认为这是一个可能令人困惑的主题，特别是因为某些开发环境使用一种流程模型来生成面向用户的应用程序（例如，我在这里考虑的是 Outsystems）。

但是，对我来说，区别是非常清楚的。正如人们所说的，应用程序工作流是指用户通过应用程序的路径，即他们完成/访问的页面、他们输入的数据等，以完成某种交易。虽然应用程序orkflow 是一个糟糕的术语，但我认为应用程序流会更有意义。

另一方面，BPM 是关于建模和执行工作流过程的。在这种情况下，我所说的工作流是指一系列离散的步骤（或任务），这些步骤（或任务）必须以一定的顺序完成（以编程方式或通过人工交互）才能完成流程。这些任务可以实现为单独的应用程序模块（每个都有自己的“应用程序工作流程”，见上文）。工作流引擎的工作是确保将这些单独的步骤以正确的顺序分配给正确的人（一组人），并且整个过程以有序的方式完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-10T12:48:21.533

我认为根本没有明确的答案。这些是文字，与理论概念相反。如果您将“清单”一词添加到组合中-结果只是流程的线性版本（但是您可以在清单中包含条件-使它们成为工作流程）。

我不知道如何帮助重新构建这个问题，但几乎就像永远不可能有答案一样。我自己的想法在[https://tallyfy.com/improving-efficiency-workflow-vs-business-process-management/](https://tallyfy.com/improving-efficiency-workflow-vs-business-process-management/)

# php - URL 重写页面未找到错误

> ID：806607
> 
> 赞同：0
> 
> 时间：2009-04-30T12:14:18.920
> 
> 标签：php, url, mod-rewrite, url-rewriting

为了将我的动态 URL 即 www.3idiots.co.in/index.php 转换为静态 URL 即 www.3idiots.co.in/index.html，我编辑了我的 .htccess 文件并将以下代码放入其中：

```
RewriteEngine On
RewriteRule ^index.php$ /index.html [R] 
```

当我将此文件上传到根目录并尝试打开页面时，出现错误

> 404 页面未找到错误，未找到 www.3idiots.co.in/index.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-01T16:45:26.980

您实际上必须有一个名为 index.html 的文件。现在你没有。重写/重定向工作正常，您只是重定向到一个不存在的页面/文件。

我对您实际尝试做的事情感到有些困惑。如果您只想将 index.php 移动到 index.html，请重命名该文件。重写使得如果有人试图打开 index.php，他们将被重定向到 index.html，但您仍然必须有一个 index.html 文件才能将他们重定向**到**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-01T16:53:33.797

您确定 mod rewrite 已启用并正常工作吗？

1）创建一个名为 found.html 的 html 页面，其中包含您想要的任何内容，但有一些文本以确保它已加载（基本上不是空白页面）并将其放入名为 ".htaccess" 的文件中：

RewriteBase上的 RewriteEngine
/
RewriteRule ^find.html$ /found.html [L]

2) 在您的域的根目录中上传您的 .htaccess 和 found.html 文件

3）只需尝试加载 -www.example.com/find.html （当然使用您的真实域）。如果 mod_rewrite 可用，您应该在浏览 find.html 时看到 found.html 的内容（顺便说一下，它实际上并不存在）。

如果它不起作用，请尝试：

RewriteBase上的 RewriteEngine
/
RewriteRule ^find.html$ found.html [L]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T15:46:40.467

重写引擎开启

重写规则 ^index.html$ index.php

RewriteRule ^$index.htm/$index.php [L]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T12:19:57.613

试试这些规则：

```
RewriteCond %{THE_REQUEST} ^GET\ /index\.php
RewriteRule ^index\.php$ /index.html [L,R=301]

RewriteRule ^index\.html$ index.php [L] 
```

第一条规则将`/index.php`外部的每个直接请求重定向到`/index.html`. 第二条规则将`/index.html`内部的请求重写为`/index.php`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T12:17:17.883

```
RewriteEngine On

# Send the user to index.html
RewriteRule ^index.php$ /index.html [R]

# Tell the server that index.html really means index.php
RewriteRule ^index.html$ /index.php 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-02-10T10:48:44.490

选项 +FollowSymLinks
RewriteEngine on
RewriteRule ^index.html$ index.php

试试这个代码...

它会解决你的问题/..

祝你好运
，如果它解决了您的问题..
访问我的网站

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-13T05:01:05.723

在 Apache Conf 文件中，您还需要确保将 AllowOverride 设置为允许处理 .htaccess 的值。

通常它是 AllowOverride all

# c++ - 如何在 VC++ 6 中跟踪某个对象

> ID：806614
> 
> 赞同：0
> 
> 时间：2009-04-30T12:16:11.443
> 
> 标签：c++, visual-c++, object, trace

我想知道如何在 VC++6 中跟踪某个对象。在更新版本的 Visual Studio 中，可以通过使用“跟踪点”跟踪唯一对象 ID 来完成。我还没有弄清楚如何在 VC++ 6 中做到这一点。也许你们可以指出我正确的方向。

提前致谢！

最好的祝福，

正补

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T12:07:09.357

单击对象，转到断点并选择跟踪点:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-26T08:19:09.630

在我的业余时间，我继续研究我的日志包，它将与 VC6 一起使用。几个月前我将它切换到 ETW，因此开销在每个跟踪语句 0.8 微秒的范围内。
这在短期内对你没有用，但不要完全失去希望。

# .net - 在使用 XSLT 和 XML 生成的网页中异步加载 HTML 片段

> ID：806621
> 
> 赞同：0
> 
> 时间：2009-04-30T12:17:19.180
> 
> 标签：.net, xml

技术：点网、ASP.Net

*   我们将文章存储在 XML 存储库中，并且文章包含多个部分。

*   使用 XSLT 将这些 XML 文件转换为 HTML 以进行浏览器呈现。

*   新要求是允许用户评论每个部分（而不是文章！），当文章显示时，我们也会显示评论（但基于他的角色/权限和可折叠/可展开的小部件）

*   由于评论与文章没有直接关系，并且同一篇文章可以在多个站点中显示；我们将无法将评论与文章 XML 一起存储。

*   我们计划通过将评论存储在带有引用的单独数据库中来解决这个问题，并且在使用 XSLT 转换文章 ​​XML 时，我们将在生成的 html 中嵌入评论的 URL。

*   当用户点击评论小部件时，我们使用嵌入式 URL 使用来自 Web 服务器的异步调用来获取评论并将其显示在展开的 div 区域中

这对我们来说听起来很复杂，不确定这是否可行。

请问这个可以存档吗？或提出更好的存档方式。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T12:31:44.433

It can certainly be done that way. You needn't even wait for a user to click the comment widget. Look at jQuery ([http://www.jquery.com](http://www.jquery.com)). It has ajax routines for loading pages piecemeal like a mashup (see [http://docs.jquery.com/Ajax](http://docs.jquery.com/Ajax) and [http://docs.jquery.com/Ajax/load#urldatacallback](http://docs.jquery.com/Ajax/load#urldatacallback)).

However, why not add a second transformation for pages with comments that includes the comments data? Most XSLT libraries worth their salt let you set parameter and variable values.

I would not (as the previous poster suggested) use an iframe. They are ugly and a pain to work with in javascript. If you go the async route, use something akin to jQuery's load method, injecting HTML into a page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T12:29:43.907

它可以工作。

嵌入的 url 可以有一个 onclick 属性，该属性写入一个 iframe，该 iframe 在您的服务器上提供一个页面，该页面显示文章该片段的评论以及提交新评论的表单（如果需要）。

我建议使用 iframe，因为您的声明“同一篇文章可以在多个站点中显示” - 我假设您无法控制所有这些。

# .net - 堆栈跟踪中带有 ThreadExceptionDialog 的通用 GDI+ 错误

> ID：806633
> 
> 赞同：0
> 
> 时间：2009-04-30T12:21:01.900
> 
> 标签：.net, winforms, exception, gdi+

我们收到了一些难以重现的错误报告。用户收到“发生错误。应用程序现在将退出”。消息框，然后应用程序退出。

在 Main() 我将异常写入日志文件：

```
System.Runtime.InteropServices.ExternalException: A generic error occurred in GDI+.
at System.Drawing.Image.FromHbitmap(IntPtr hbitmap, IntPtr hpalette)
at System.Drawing.Image.FromHbitmap(IntPtr hbitmap)
at System.Drawing.Icon.ToBitmap()
at System.Windows.Forms.ThreadExceptionDialog..ctor(Exception t)
at System.Windows.Forms.Application.ThreadContext.OnThreadException(Exception t)
at System.Windows.Forms.Control.WndProcException(Exception e)
at System.Windows.Forms.Control.ControlNativeWindow.OnThreadException(Exception e)
at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)
at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
at System.Windows.Forms.Application.Run(Form mainForm)
at Wfm.AppMain.Main() 
```

让我感到困惑的是 ThreadExceptionDialog 在堆栈跟踪中。我想那是显示“发生错误。应用程序现在将退出”的对话框。信息。

这是一个不相关的错误还是对话框重新抛出异常？如何获得原始异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T12:39:28.720

看起来 OnThreadException 方法已被调用，这意味着您应该能够为[Application.ThreadException](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)事件设置事件处理程序，以便更详细地检查异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T12:33:21.323

您需要一个转储文件，然后使用 SOS 获取堆栈上的所有异常对象。
顺便说一句，那台机器上的资源情况如何？看起来应用程序无法将图标转换为位图，这可能会在极端资源压力下发生。

看到异常窗口[后，您可以在挂起模式下使用 ADPlus](http://support.microsoft.com/kb/286350)创建转储。

# rule-engine - 基于规则的数据库引擎

> ID：806634
> 
> 赞同：1
> 
> 时间：2009-04-30T12:21:02.897
> 
> 标签：rule-engine

我想在 Oracle 中为 PeopleSoft 时间输入应用程序设计一个基于规则的数据库引擎。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T12:35:13.223

基于规则的系统需要几个关键组件： - 一组定义为数据的规则 - 一组要操作的统一输入 - 规则执行器 - 主管层次结构

1.  写出一系列用例——有人试图使用该系统完成什么？
2.  确定您的规则可以将哪些内容作为输入，以及将哪些内容作为输出
3.  将您的用例中的规则描述为一系列数据，从而确定您的规则格式。为此根据需要展开 2。
4.  创建基本规则执行器，并测试它将获取规则数据并正确处理它
5.  扩展上述以处理具有不同优先级的多个规则
6.  学习足够的规则引擎理论和图论来理解常见的基于规则的问题——循环性、冲突规则等——以及如何使用（节点）图来查找它们的案例
7.  编写一个能够管理规则集并根据上述可能问题做出决策的主管层次结构。这部分很重要，因为它可以防止规则创建者的愚蠢行为导致整个系统运行时失败。
8.  利润！

从广义上讲，规则引擎是一种管理复杂性的练习。如果您不管理它，您很容易以彼此级联的规则结束，从而导致循环循环、竞争条件和其他问题。很容易意外地构造这些：考虑一个电子邮件程序，如果它包含神奇的单词“beta”，则将邮件从文件夹 A 移动到 B，如果它包含单词“alpha”，则从 B 移动到 A。包含两者的电子邮件将来回穿梭，直到出现问题，从而阻止处理所有其他规则。

我在这里假设您*想*了解理论并自己构建引擎。[alphazero 提出了](https://stackoverflow.com/questions/806634/rules-based-database-engine/806680#806680)使用现有规则引擎库的重要建议，这是明智的——这是一种从学术理论中受益的学科。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T12:34:59.837

我自己没有尝试过，但一个明显的方法是在 Oracle 数据库中使用 Java 过程，并在该代码中使用 Java 规则引擎库。

尝试：

[http://www.oracle.com/technology/tech/java/jsp/index.html](http://www.oracle.com/technology/tech/java/jsp/index.html)

[http://www.oracle.com/technology/tech/java/java_db/pdf/TWP_AppDev_Java_DB_Reduce_your_Costs_and%20_Extend_your_Database_10gR1_1113.PDF](http://www.oracle.com/technology/tech/java/java_db/pdf/TWP_AppDev_Java_DB_Reduce_your_Costs_and%20_Extend_your_Database_10gR1_1113.PDF)

和

[http://www.jboss.org/drools/](http://www.jboss.org/drools/)

或者

[http://www.jessrules.com/](http://www.jessrules.com/)

--

基本上，您需要捕获数据事件（插入、更新、删除），将它们映射到您的规则空间的事件，并应用规则。

# php - php问题中html中的引号问题

> ID：806636
> 
> 赞同：1
> 
> 时间：2009-04-30T12:21:16.580
> 
> 标签：php, html

我正在尝试根据文件的存在生成一个特定的链接和随附的 html depednant。我用来这样做的代码：

```
if(file_exists('../images/'. $pk . '.jpg'))
    {
    $imageSrc = "../images/". $pk . ".jpg";
    $imagehtml = htmlentities(json_encode("<img src=\"".$imageSrc."\" >"));
    $screenshotLink =  "<p><a href=\"#\" onclick=\"makewindows(\"$imagehtml\"); return false;\">View Screenshot</a>";
       } 
else {
    $screenshotLink = '';
     } 
```

这会导致以下无用的 html：

```
<a href="#" onclick="makewindows(" &quot;&lt;img="" src="%5C%22..%5C/images%5C/160329461329.jpg%5C%22" &gt;&quot;="" );="" return="" false;="">View Screenshot</a> 
```

我不明白这一点，因为上面的代码基本上与以下代码相同：

```
$html = htmlentities(json_encode($ARTICLE_DESC));

$imagehtml = htmlentities(json_encode("<img src='".$imageSrc."' >"));

echo "<a href='#' onclick=\"makewindows(" . $imagehtml . "); return false;\">

<img src='".$imageSrc."' width='".$imageSize["width"]."' height='".$imageSize["height"]."'></a>

<p><a href='#' onclick=\"makewindows(" . $html . "); return false;\">Click for full description </a></p>"; 
```

它产生以下工作正常的html：

```
<a href="#" onclick='makewindows("<img src=\"..\/images\/160329461329.jpg\" >"); return false;'>
<img src="../images/160329461329.jpg" width="199" height="300"></a> 
```

我知道它与引号有关，但我不确定到底是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-30T12:27:05.660

试试这个：

```
$imagehtml = htmlspecialchars(json_encode("<img src=\"".$imageSrc."\" >"), ENT_QUOTES);
$screenshotLink =  "<p><a href=\"#\" onclick=\"makewindows($imagehtml); return false;\">View Screenshot</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T15:02:50.700

```
$imagehtml = htmlspecialchars(json_encode('<img src="'.$imageSrc.'" >'), ENT_QUOTES);
$screenshotLink = '<p><a href="#" onclick="makewindows($imagehtml); return false;">View Screenshot</a>'; 
```

为什么不使用刻度？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T13:07:05.003

在 php 手册中查找 ENT_NOQUOTES 参数

和 htmlspecialchars() != htmlentities() 顺便说一句。

# ms-access - 如何部署多用户 ms access 2007 DB

> ID：806637
> 
> 赞同：1
> 
> 时间：2009-04-30T12:21:30.573
> 
> 标签：ms-access, ms-access-2007

我在 access 2007 中创建了一个需要 3 个用户使用的数据库。我被卡住了，因为我不知道是将副本放在每个用户的计算机上还是放在他们的 SQL 服务器上。将它放在服务器上意味着一个访问点对于数据一致性来说是可取的，但我不知道我是否需要 ActiveX。也不知道怎么用。如果我在每台计算机上放置一个，我该如何解决主文件更新问题？有人可以分解一下吗，我是新手！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-01T21:22:02.183

你的问题对我来说似乎很困惑。您提到了 SQL Server，但没有说您的应用程序使用 SQL Server 进行数据存储。

因此，我只能假设您有一个 MDB 或 ACCDB 文件，其中包含您的数据表、表单和报告都在一个文件中。

分发此应用程序的唯一正确方法是：

1.  将其拆分为前端（表单/报告/等），并带有指向后端的链接表（仅限数据表）。

2.  将后端放在文件服务器上并重新链接表以指向后端的新位置。

3.  将前端的副本提供给 3 个用户中的每一个，他们将从他们的台式计算机上运行它。如果您担心将更改分发到前端，[Tony Toews 的前端更新](http://www.granite.ab.ca/access/autofe.htm)器之类的东西非常有用。

其他人跳进来说您应该将数据放在 SQL Server 中，但大多数 3 用户 Access 应用程序不需要 SQL Server 的强大功能。如果您没有获得 SQL Server 的管理权限，则可能很难继续更改应用程序的数据库。

另一方面，如果您的数据库要增长到 1GB 或更多，或者如果您有严格的安全要求，或者如果您的数据库中的数据非常重要以至于需要完全防故障备份，那么 SQL Server*将*是一个合理的数据店铺。

对于大多数本土应用程序而言，并非如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T12:25:47.287

我解决这个问题的“最佳”方法是使用 Access 中的链接表来访问 SQL Server（因为你说你有那个......？）。

在这种情况下，将访问用作前端并不是您能做的最好的事情，但是在 2007 中，它比使用几个版本时要好一些。查看这篇文章以获取有关将 Access 链接到 SqlServer 的信息：

[导入或链接到 SQL Server 数据](http://office.microsoft.com/en-us/access/HA102004941033.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-05T04:10:36.810

一种简单的方法是使用 EQL Data 插件：[http://eqldata.com](http://eqldata.com)

这样，您可以为每个用户提供数据库的副本，但用户可以随时与其他用户同步数据库。您还可以在 Web 上访问您的表格和查询。

# java - 转换错误：“当前事件不是 START_ELEMENT 而是 2”

> ID：806647
> 
> 赞同：2
> 
> 时间：2009-04-30T12:24:45.433
> 
> 标签：java, xml, web-services, jax-ws

[与较早的帖子](https://stackoverflow.com/questions/578431/accessing-the-content-of-a-jax-ws-dispatch-response)类似，我正在尝试使用 JAX-WS 访问 Web 服务：

```
Dispatch<Source> sourceDispatch = null;
sourceDispatch = service.createDispatch(portQName, Source.class, Service.Mode.PAYLOAD);
Source result = sourceDispatch.invoke(new StreamSource(new StringReader(req)));
System.out.println(sourceToXML(result)); 
```

在哪里：

```
private static String sourceToXML(Source result) {
    Node rootNode= null;
    try {
        TransformerFactory factory = TransformerFactory.newInstance();
        Transformer transformer = factory.newTransformer();
        DOMResult domResult = new DOMResult();
        transformer.transform(result, domResult );
        rootNode = (Node) domResult.getNode();
  } catch (TransformerException e) {
        e.getMessage();
  }

    return rootNode.getFirstChild().getNodeValue();
} 
```

但我**收到错误“当前事件不是 START_ELEMENT null 而是 2”**（我认为在变压器上）

我究竟做错了什么 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T12:31:29.893

大概来自解析器。我会说堆栈跟踪会有所帮助，但 Xerces/Xalan 有把它们搞砸的倾向。

采取的明显步骤：

*   尝试将结果视为字符串。
*   尝试使用解析器进行解析，暂时忽略转换器。
*   尝试找出究竟是什么错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T12:37:37.990

你应该修改你的陈述

```
e.getMessage() 
```

实际打印错误消息:-)这应该会有所帮助。

```
System.err.println(e.getMessage()); 
```

或者最好

```
e.printStackTrace(); 
```

# cakephp - 如何在 CakePHP 中跨多个表编写连接查询？

> ID：806650
> 
> 赞同：15
> 
> 时间：2009-04-30T12:25:30.813
> 
> 标签：cakephp, join

谁能告诉我，如何从 cakePHP 中的多个表中检索连接结果（使用 cakePHP mvc 架构）。例如，我要加入三个表（tbl_topics，tbl_items，tbl_votes。它们的关系定义如下：一个主题可以有很多项目，一个项目可以有很多票。现在我想检索一个主题列表，其计数为对每个主题的所有项目的所有投票。对此的 SQL 查询如下所示：

```
SELECT Topic.*, count(Vote.id) voteCount 
FROM 
tbl_topics AS Topic 
LEFT OUTER JOIN tbl_items AS Item 
ON (Topic.id = Item.topic_id)
LEFT OUTER JOIN tbl_votes AS Vote
ON (Item.id = Vote.item_id); 
```

我的问题是我可以使用`$this-><Model Name>->query`函数轻松完成，但这需要在控制器中编写我不想要的 sql 代码。我试图找出任何其他方法来做到这一点（如`find()`）。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-05-10T15:20:27.850

```
$markers = $this->Marker->find('all', array('joins' => array(
    array(
        'table' => 'markers_tags',
        'alias' => 'MarkersTag',
        'type' => 'inner',
        'foreignKey' => false,
        'conditions'=> array('MarkersTag.marker_id = Marker.id')
    ),
    array(
        'table' => 'tags',
        'alias' => 'Tag',
        'type' => 'inner',
        'foreignKey' => false,
        'conditions'=> array(
            'Tag.id = MarkersTag.tag_id',
            'Tag.tag' => explode(' ', $this->params['url']['q'])
        )
    )
))); 
```

正如 nate abele 的文章中提到的：[链接文本](http://bakery.cakephp.org/articles/view/quick-tip-doing-ad-hoc-joins-in-model-find)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T13:37:25.197

老实说，如果你只是在模型中创建一个函数，比如 getTopicVotes() 并在那里调用 query()，你可能会更开心。我能想到的所有其他解决方案只会使它更复杂，因此更丑陋。

编辑：

根据您的数据大小，并假设您已正确设置模型关系（主题 hasMany Items hasMany Votes），您可以执行包含*所有*项目和投票的简单 find('all')，然后执行类似的操作这个：

```
foreach ($this->data as &$topic)
{
    $votes = Set::extract('/Topic/Item/Vote', $topic);
    $topic['Topic']['vote_count'] = count($votes);
} 
```

这里有两件事很重要：

1.  如果您有大量数据，您可能应该忘记这种方法，它会非常慢。
2.  我是根据我的记忆写的，它在现实生活中可能看起来不像这样和/或它可能根本不起作用:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-09T10:01:24.583

您可以轻松地在 find() 查询上设置“递归”属性。

```
$result = $this->Topic->find('all', array('recursive' => 2)); 
```

或者，您可以在模型中使用 Containable 行为。然后你可以使用：

```
$this->Topic->contain(array(
    'Item',
    'Item.Vote',
));

$result = $this->Topic->find('all'); 
```

或者

```
$result = $this->Topic->find('all', array(
    'contain' => array(
        'Item',
        'Item.Vote',
    ),
)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T23:04:18.420

您需要的是递归关联支持，这在现有的 CakePHP 中是不可能的。
尽管可以使用一些[bindModel 技巧](http://mark-story.com/posts/view/using-bindmodel-to-get-to-deep-relations)
或实验性的[RecursiveAssociationBehavior](http://lloydhome.com/blog/development/2009/recursive-association-support-cakephp-12)来实现。

这两种解决方案都需要您使用额外的代码或依赖应用程序中的行为，但如果您抵制编写纯 SQL 代码的诱惑，您将获得能够使用 Cake 的分页、自动条件、模型魔术等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-29T09:15:41.563

我认为这个答案已经提交，但我在这里为那些仍在寻求这个答案的人发帖。可以使用 find() 方法完成连接，如下所示

```
$result = $this->ModelName1->find("all",array(
'fields' => array('ModelName1.field_name','Table2.field_names'), // retrieving fileds 
'joins' => array(  // join array
    array(
        'table' => 'table_name',
        'alias' => 'Table2',
        'type' => 'inner',
        'foreignKey' => false,
        'conditions'=> array('ModelName1.id = Table2.id') // joins conditions array
    ),
    array(
        'table' => 'table_name3',
        'alias' => 'Table3',
        'type' => 'inner',
        'foreignKey' => false,
        'conditions'=> array('Table3.id = Table2.id')
    )
))); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-04-30T14:24:38.263

你应该学习 HaBTM（拥有并属于许多） [http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

# c# - 如何检测 C# 函数中的突变？

> ID：806655
> 
> 赞同：4
> 
> 时间：2009-04-30T12:28:54.890
> 
> 标签：c#, functional-programming

我一直在阅读有关如何在 C# 中以函数式（即 F#）样式进行编程的文章，例如，前述循环用于递归并始终返回值/对象的副本，而不是返回具有新状态的相同变量。

例如，我应该注意什么样的代码检查？有什么方法可以判断 BCL 类上的方法是否会导致突变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-01T10:05:12.670

[NDepend](http://www.NDepend.com)工具可以告诉你哪里有副作用。它还可以自动确保类是不可变的（即对其对象实例没有副作用）或方法是纯的（即在方法执行期间没有副作用。*免责声明：我是该工具的开发人员之一。*

简而言之，技巧是定义一个属性，例如 MyNamespace.ImmutableAttribute 并标记您希望不可变的类。

```
[Immutable]class MyImmutableClass {...} 
```

如果类不是不可变的，或者更有可能的是，如果有一天开发人员修改了它并破坏了它的不可变性，那么下面[的 LINQ 查询代码规则 (CQLinq)](http://www.ndepend.com/Features.aspx#CQL)将突然发出警告：

```
warnif count > 0 
from t in Application.Types
where !t.IsImmutable && t.HasAttribute("MyNamespace.ImmutableAttribute")
select t 
```

在旁注中，我写了一篇关于不变性/纯度/副作用和 NDepend 用法的文章： [不可变类型：理解它们并使用它们](http://codebetter.com/blogs/patricksmacchia/archive/2008/01/13/immutable-types-understand-them-and-use-them.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T13:06:36.063

这里有两件事可以帮助您找到值正在发生变化的变量和字段。当然，可变性比这更复杂（例如，这些不会找到添加到集合的调用），但取决于您要查找的内容，它们可能会有所帮助。

1.  将所有字段设为只读；那么它们只能从构造函数中设置，之后不能更改。

2.  拿起一份[ReSharper](http://www.jetbrains.com/resharper/)。[它扩展了 Visual Studio 的语法高亮，并提供了为可变局部变量](http://resharper.blogspot.com/2008/05/functional-style-highlight-mutable.html)设置自定义高亮的选项。这将使您一目了然地看到是否正在修改本地人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T12:59:47.640

不幸的是，目前在 C# 中没有简单的方法可以做到这一点。如果幸运的话，文档会告诉你，但通常情况并非如此。

使用 Reflector 检查代码（假设我们正在谈论托管代码）可以揭示*当前*实现是否有任何副作用，但由于这是一个实现细节，因此不能保证它将来不会改变，所以基本上你必须每次更新相关代码时重复验证。

诸如 NDepend 之类的工具可以帮助您找出类型之间的依赖关系——即您在哪里也需要寻找副作用。

对于您自己的类型，您可以通过确保实例永远不会泄漏对内部的引用来实现不变性。确保复制用于实例化对象的引用类型实例的内容，否则可能会保留对内部状态的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T12:30:48.460

如果不测试该方法，您将无法判断它是否有任何副作用。如果文档提到方法或函数的任何副作用，那会很方便，但不幸的是它没有。

请记住，您必须进行一些广泛的测试以确保不会发生副作用。如果您愿意，您可以随时反汇编程序集并阅读代码以了解副作用。

# azure - Azure 工具使用错误的证书进行发布

> ID：806660
> 
> 赞同：1
> 
> 时间：2009-04-30T12:30:28.133
> 
> 标签：azure, certificate

我正在开发一个使用 HTTPS 而不是 HTTP 的 Windows Azure 演示站点。因此，我将我的 Azure 项目配置为使用一个自签名证书进行本地开发，并使用另一个（非自签名）证书将其发布到云中，就像[这个描述](http://msdn.microsoft.com/en-us/library/dd203056.aspx)所说的那样。

但是，每当我将网站发布到 Azure 门户时，都会包含我的开发证书，而不是我为发布指定的证书。有没有人经历过同样的行为？

我对证书做错了什么还是一个错误？我的证书是由我们自己公司的本地 CA 颁发的，但不是由 Thawte 或 VeriSign 或类似机构颁发的，但 Visual Studio 中没有显示关于此的警告，所以我认为这不是问题。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T19:52:59.630

这是 2009 年 1 月 CTP 中的一个错误，已在 2009 年 3 月 CTP 中修复。您使用的是哪个版本的 Windows Azure 工具？

# svn - 我应该将已编译的二进制文件添加到我的 Subversion 存储库吗？

> ID：806669
> 
> 赞同：10
> 
> 时间：2009-04-30T12:32:23.527
> 
> 标签：svn

我正在与分布式团队一起开发一些类库。我们使用 Subversion 进行源代码控制。其中一位开发人员希望将他的**bin**和**obj**目录提交到存储库，这对我来说从来都不是标准做法。最佳做法是什么？优缺点都有什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-30T12:37:39.037

我的规则是排除所有生成的文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-30T12:39:07.300

您当然不应该将任何编译文件添加到主分支。您无法将它们与通常的工具进行比较，它们会减慢一切。

在版本的版本分支中，您可以将它们包含在原始编译文件中，这样就不会因为编译器更改或类似情况而产生差异。但是您很可能会将所有二进制版本都存储在其他地方，而 Subversion 并不是真正的正确位置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-30T12:36:05.373

我可以理解为什么您可能想要提交这些垃圾箱，例如，如果您需要维护需要特定版本的 DLL 的应用程序的不同版本。但即使在这种情况下，您也可以随时在标签/分支上构建新的垃圾箱。

至于提交 obj 文件，我想不出有什么好的理由这样做..

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-30T12:39:03.667

除非您没有源代码，否则我不会将已编译的库添加到源代码管理中。

例如：

我没有源代码的第 3 方库/控件 = 进入某种“依赖项”文件夹下的源代码控制。

我们编写的任何库 = 只有源代码在存储库中，而不是二进制文件。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-30T12:44:33.950

通常我从不将 bin 目录绑定到源代码控制系统。原因是它必须是自动可重现的，因此将生成的 dll 添加到源代码管理中没有任何价值。

生成的源文件也是如此，但有一个例外：如果需要时间或者您必须有基础设施来生成源文件，那么我将它们添加到源代码管理中。

当您想管理不同的版本时，分支方法将是我最喜欢的一种。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-30T12:35:24.360

我们不会提交 bin 和 obj 文件，因为它们是在您编译时创建的，因此没有真正的需要。不知道这是否是最佳做法，更多的是个人意见。

我想你可以有一个单独的文件夹来存放“完成的 dll”，或者如果它是一个 dll 的完成版本？

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-30T12:34:58.357

我们也将这些文件排除在外，因为它们会随着时间的推移以某种方式“污染”您的更改。因此，在每次提交中，您都会更改大量其他文件，但您只会对更改的源代码感兴趣，而不会对编译文件感兴趣。

因此，假设您正在尝试检查 XYZ 修订版中出了什么问题，并且您在以下更改中看到...

一个.dll

b.dll

c.dll

d.cs

e.dll

…………

但是您可能只对源代码感兴趣，因此对这些文件进行版本控制而不是污染也没有多大意义，因为无论如何您都不能因为二进制文件内部发生了变化..

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-30T12:39:10.233

除非有充分的理由您没有提及，否则不要将您的 bin 目录添加到源代码管理中。我看不出有什么好的理由来提交你的 obj 目录。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-30T12:55:58.150

我尽量不在我们的源代码控制系统中存储任何二进制文件——甚至是我们没有源代码的库。将二进制文件放在存储库中会使存储库膨胀并使检出速度变慢。

我们使用[Maven](http://maven.apache.org/)来构建我们的 Subversion 项目。在 Maven 中，您的应用程序所需的所有二进制文件（但不是由您的应用程序创建）都存储在 subversion 之外的所谓 Maven 存储库中。Maven 使用约定将“版本”附加到应用程序使用的二进制文件。这些文件很容易被应用程序和开发人员共享（每个人一份）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-30T13:07:59.853

我看到有价值的唯一情况是在 n 层应用程序中，其中一些二进制文件从一层分布到另一层。

例如，部分代码表示所有层使用的公共对象。然后每一层实际上是它自己的子项目，它使用作为二进制文件引用的公共对象，但仅在该层上工作仅依赖于二进制文件。在这种情况下，即使在整个项目中都有源代码，但实际上二进制文件是项目的一部分，在某种程度上就像第三方库一样。

在这种情况下，通过在源代码控制中冻结正确版本的二进制文件而不总是从源代码构建来确保层继续成功编译可能是有意义的。

话虽如此，如果您可以取消该范式，并在每一层的构建中包含所有依赖项，生活将会轻松得多。将项目的一个部分的二进制文件放在另一个源后面并不漂亮，而且可能导致灾难。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-30T13:08:45.950

我们不提交 bin 或 obj 文件夹，我们过去在存储库根目录上创建了一个名为 library 的新文件夹，我们将所有重要的 dll 文件都放在那里，例如使用的第三方工具，例如 ajaxtoolkit、fckeditor、... . 和其他 dll 文件，我们认为它对这个项目很重要。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-30T13:23:17.257

好吧，让我们扮演魔鬼的拥护者……这是一个将 DLL 存储在存储库中的案例。

A 公司在任何给定时间点都有 6 个以上的团队。这些团队中的大多数都使用 C# 开发至少部分产品。鉴于 A 公司的特殊性质，标准的 DateTime 类没有足够的功能，因此他们开发了自己的从 DateTime 派生的类，并在 DLL 中提供这些类。

6+ 组中的每一个在存储库中都有自己的目录，并且大多数都需要 DateTime DLL，因此他们在每个产品目录中都有一个已编译 DLL 的副本，并且只有当有可用的新功能时才会将新副本推送到目录中该目录中的项目需要。

是否有另一种解决方案可以提供以下好处？： 1）防止开发人员签出两个目录以处理单个项目。（在现实生活中不止两个，但为了这个例子，我们称它为两个。） 2) 当只有一个产品需要更改 DateTime 类时，防止 QA 必须重新测试所有产品。

# sql - DB2 中的 generate_series() 等效项

> ID：806689
> 
> 赞同：8
> 
> 时间：2009-04-30T12:36:59.210
> 
> 标签：sql, db2, auto-generate

我正在尝试搜索与[generate_series()](http://www.postgresql.org/docs/8.3/static/functions-srf.html)等效的 DB2 （PostgreSQL 生成行的方式）。我显然不想用[VALUES](http://www.postgresql.org/docs/8.3/static/sql-values.html)语句对行进行硬编码。

```
select * from generate_series(2,4);

    generate_series
    -----------------
                    2
                    3
                    4
    (3 rows) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-14T05:38:42.430

where 子句需要更明确地说明递归的界限，以便 DB2 抑制警告。这是一个略微调整的版本，不会触发警告：

```
with dummy(id) as (
    select 2 from SYSIBM.SYSDUMMY1    
    union all
    select id + 1 from dummy where id < 4
)
select id from dummy 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-30T13:01:11.303

我设法编写了一个适合的递归查询：

```
with dummy(id) as (
    select 2 from SYSIBM.SYSDUMMY1    
    union all
    select id + 1 from dummy where id + 1 between 2 and 4
)
select id from dummy 
```

查询可以适应任何你能想到的 for(;;) 。

# xml - 使用 xml 加载 flex 组件

> ID：806696
> 
> 赞同：1
> 
> 时间：2009-04-30T12:38:34.400
> 
> 标签：xml, apache-flex, actionscript

如何使用 XML 加载 flex 组件。场景很简单，就像这样，我需要三个按钮出现在我的面板中，但是否出现的选项 true 或 false 应该在 xml 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T00:47:24.170

你的问题不是很清楚，所以我会从两个方面回答：

**1.你需要有一个外部的MXML**

在这种情况下，您需要使用 mxmlc.exe 编译 XML 文件（或者只是将其重命名为 .mxml 并将其包含在 Flex Builder 中）并使用 SWFLoader 组件来访问该文件。我没有太多使用 SWFLoader 的经验，所以我会留给您自己查找。

**2.需要通过外部XML设置组件的属性**

创建一个 HTTPService，为其分配一个 ID，并使用 url 属性将其指向您的 XML 文件。不要指定结果格式。然后，使用结果事件并指向将在您的 XML 加载完成时执行的函数。它应该如下所示：

```
<mx:HTTPService id="service" url="myXml.xml" result="Foo (event)" /> 
```

假设 myXml 看起来像这样：

```
<properties>
    <button1Enabled>false</button1Enabled>
    <button2Visible>true</button2Visible>
    <button3Text>"TEXT"</button3Text>
</properties> 
```

这就是你的函数 Foo 应该是什么样子。它将在 HTTPServices 完成加载 myXml.xml 时执行。

```
private function Foo (e : ResultEvent) : void {
    myButton.enabled = e.result.properties.button1Enabled; // false
    myOtherButton.visible = e.result.properties.button2Visible; // true
    myLastButton.label = e.result.button3Text; // "TEXT"
} 
```

此函数获取服务的结果并为各种按钮分配 XML 中定义的一些属性。或者，您也可以使用 service.lastResult 从脚本中的任何位置访问最新结果。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T01:41:24.527

查看[appcorelib](http://code.google.com/p/appcorelib/)以获得一些不错的 XML 操作工具，用于加载静态 xml 并将 xml 转换为对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T10:54:16.357

//动作脚本代码

> 导入 mx.controls.Menu；导入 flash.events.MouseEvent；
> 
> ```
>  private var menu12:Menu;
> 
>         private function init():void {
>             menu12 = new Menu();
>             menu12.labelField = "@label";
>             menu12.dataProvider = xmlDP;
>             menu12.showRoot = false;
>             menu12.width = popUpButton.width;
>             popUpButton.popUp = menu12;
>         } 
> ```

// XML 信息

```
 <menu1 label="Some introduction" />
        <menu2 label="Disabled State (disabled)." enabled="false" />
        <sep1 type="separator" />
        <menu3 label="parent">
            <menu4 label="child1" />
        </menu3>
        <menu5 label="parent (disabled)" enabled="false">
            <menu6 label="child1" />
            <menu7 label="child2" />
            <menu8 label="child3" />
        </menu5>
        <menu9 type="separator" />
        <menu10 type="separator" />
        <menu11 id="leftButton" label="Left" type="radio" groupName="radioGroup" toggled="true" enabled="true"  />
        <menu12 id="rightButton" label="Right" type="radio" groupName="radioGroup" enabled="false" />
        <menu13 id="popupButton" label="Popup" type="radio" groupName="radioGroup" enabled="false" />

    </root> 
```

// 零件

```
<mx:PopUpButton id="popUpButton"
            label="Please select an item"
            openAlways="true"
            creationComplete="init();" /> 
```

感谢您的帮助。现在我怎么会在 popupButton 的菜单中添加事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T23:13:37.443

我不确定你的意思，但你想在菜单中添加事件监听器吗？

在这种情况下，只需添加：

```
menu12.addEventListener (event, eventHandlerFunction); 
```

例子：

```
menu12.addEventListener (MouseEvent.CLICK, menu12Clicked); 
```

Flex 自动将事件作为参数传递给 menu12Clicked 函数。如果你想有多个参数，你会使用：

```
menu12.addEventListener (MouseEvent.CLICK, function (e : MouseEvent) : void {
    menu12Clicked (e, "argument");
}); 
```

我没有使用 PopUpButtons 的经验，但是您在代码中的内容*应该可以*工作，尽管我假设 xmlDP 指向标签 menu12。我还假设“@label”指向 menu12 中定义的标签字段。就个人而言，我喜欢嵌套我的 XML，所以我不知道“@label”应该做什么。如果您将标签嵌套在 menu12 标记内，您将使用 xmlDP.label。

# php - URL重写-重写代码

> ID：806697
> 
> 赞同：1
> 
> 时间：2009-04-30T12:38:58.113
> 
> 标签：php, url-rewriting

我正在为一个网站工作，它在 php 中.....我想重写 url

```
e.g www.3idiots.co.in/stories.php?id=17 
```

如果我想将其重写为

`www.3idiots.co.in/stories/17.html`

谁能告诉我在 .htaccess 文件中写入的代码。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-07T10:23:33.503

我假设您正在使用带有 mod_rewrite 的 Apache。就像是

```
RewriteEngine On
RewriteRule ^/stories/([0-9]+)\.html /stories.php?id=$1 
```

应该做的伎俩。当然，您需要确保该目录中允许使用 RewriteRule。有关更多信息，请参阅[此 wiki 页面](http://wiki.apache.org/httpd/RewritePathInfo)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-07T10:50:37.957

mod_rewrite 只能重写/重定向请求的 URI，而不是 HTML 文档中的那些。因此，您应该首先确保您的 PHP 应用程序正在打印正确的 URI，`/stories/17.html`而不是`/stories.php?id=17`.

之后，您可以使用 José Basilio 建议的规则：

```
RewriteRule ^stories/([0-9]+)\.html$ stories.php?id=$1 
```

尽管可以将请求从`/stories.php?id=17`外部重定向到`/stories/17.html`然后从内部重定向回`/stories.php?id=17`，但这不是一个好的做法，因为这会导致请求数量增加一倍。但这里的规则是：

```
RewriteCond %{THE_REQUEST} ^GET\ /stories\.php[?\s]
RewriteCond %{QUERY_STRING} ^(([^&]*&)*)id=([0-9]+)&*([^&].*)?$
RewriteRule ^stories\.php$ /stories/%3.html?%1%4 [L,R=301] 
```

# wpf - wpf应用程序中的图像拖放

> ID：806704
> 
> 赞同：6
> 
> 时间：2009-04-30T12:39:50.730
> 
> 标签：wpf, image, drag-and-drop

我想在 wpf 申请表上拖放图像。谁能提供我的代码和其他链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T13:11:58.097

如果您想在单个 WPF 应用程序中进行 D&D；那么这段代码应该可以帮助您：

[在 WPF 中拖放](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/942d19a8-b862-48aa-883a-d59ad6acaa2a)

如果您想在 WPF 应用程序之间或另一个非 WPF 应用程序之间进行 D&D，您有一些选择，但可能最简单的方法是使用位图传输（它需要更多代码，所以请告诉我，我会发布它）。

# java - 没有拖放设计器的 swt 简介？

> ID：806708
> 
> 赞同：2
> 
> 时间：2009-04-30T12:40:40.433
> 
> 标签：java, user-interface, swt

我对使用 SWT 编写一个小型 Java 应用程序很感兴趣。我是一个盲人，所以不能在 IDE 方法中使用典型的拖放控件。指向 SWT 介绍的指针以及通过代码创建接口的示例将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T12:47:59.353

[SWT Snippets](http://www.eclipse.org/swt/snippets/)可以为您提供一个很好的起点。这些片段是独立的 SWT 程序，展示了 SWT 的典型功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-10-05T14:45:37.993

该站点[java2s 还](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/CatalogSWT-JFace-Eclipse.htm)列出了许多 swt 和 jface 示例（以及其他示例）。

# f# - 我如何知道一个函数是否在 F# 中是尾递归的

> ID：806712
> 
> 赞同：16
> 
> 时间：2009-04-30T12:44:05.790
> 
> 标签：f#, recursion, tail-recursion, tail-call-optimization

我写了以下函数：

```
let str2lst str =
    let rec f s acc =
      match s with
        | "" -> acc
        | _  -> f (s.Substring 1) (s.[0]::acc)
    f str [] 
```

我怎么知道 F# 编译器是否把它变成了循环？有没有办法在不使用 Reflector 的情况下找出答案（我没有使用 Reflector 的经验，也不懂 C#）？

编辑：另外，是否可以在不使用内部函数的情况下编写尾递归函数，或者循环是否必须驻留在其中？

此外，F# std lib 中是否有一个函数可以多次运行给定函数，每次都将最后一个输出作为输入？假设我有一个字符串，我想在字符串上运行一个函数，然后在结果字符串上再次运行它，依此类推......

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-30T13:23:42.640

不幸的是，没有简单的方法。

阅读源代码并使用类型并通过检查确定某事是否是尾调用（是“最后一件事”，而不是在“尝试”块中）并不难，但人们会猜测自己和犯错误。没有简单的自动化方法（例如检查生成的代码除外）。

当然，您可以在大量测试数据上尝试您的功能，看看它是否会爆炸。

F# 编译器将为所有尾调用生成 .tail IL 指令（除非使用编译器标志来关闭它们 - 用于当您想要保留堆栈帧以进行调试时），但直接尾递归函数将被优化成循环。（编辑：我认为现在 F# 编译器在可以证明没有通过此调用站点的递归循环的情况下也无法发出 .tail ；这是一种优化，因为 .tail 操作码在许多平台上有点慢。）

'tailcall' 是保留关键字，其想法是 F# 的未来版本可能允许您编写例如

```
tailcall func args 
```

如果不是尾调用，则收到警告/错误。

只有不是自然尾递归的函数（因此需要一个额外的累加器参数）才会“强制”你进入“内部函数”习语。

这是您所要求的代码示例：

```
let rec nTimes n f x =
    if n = 0 then
        x
    else
        nTimes (n-1) f (f x)

let r = nTimes 3 (fun s -> s ^ " is a rose") "A rose"
printfn "%s" r 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T11:48:44.987

*我喜欢 Paul Graham 在On Lisp*中制定的经验法则：如果还有**工作要做**，例如操作递归调用输出，那么调用就不是尾递归的。

# jquery - 在页面完全加载之前阻止 UI：jquery，blockUI 插件

> ID：806713
> 
> 赞同：7
> 
> 时间：2009-04-30T12:44:21.873
> 
> 标签：jquery, blockui

当页面仍在使用 jquery 和 blockUI 插件加载时，如何阻止 UI？如果页面是使用 AJAX 调用加载的，我知道解决方法，但是当页面使用回发加载时，如何阻止 ui 直到页面完全加载完成？

请帮忙。非常感谢您的努力和时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-30T12:55:17.840

输出 body 标签后，您需要立即触发 blockUI 插件。

而不是传统的：

```
<script type="text/javascript">
  $(function (){
    $("body").blockUI(options);
  });
</script> 
```

您需要忘记封闭`$(function (){})`或`$(document).ready(function (){})`您的脚本立即触发：

```
<script type="text/javascript">
  $("body").blockUI(options);
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-12-03T23:12:48.767

建立并纠正 Seb 的答案。如果您要阻止 UI，请使用 .blockUI()，如果针对对象，请使用 .block()。我不相信你需要以 body 为目标，本质上这就是 blockUI 本身的功能。您确实需要在主体标签之后调用该函数......否则没有`<body>`标签。如果您真的想在加载每个图像之前一直阻止 UI，请参阅最后一行。如果您只想加载页面内容，可以将解锁功能放在您熟悉的底部`$(document).ready(function().`

```
<script type="text/javascript">  
$("body").block(options);   
//--or--  
$.blockUI(options);  
</script>

<script type="text/javascript">   
$(document).ready(function() {  
   $(window).load(function() { $.unblockUI(); }); //load everything including images.  
//--or--  
   $.unblockUI(); //only make sure the document is full loaded, including scripts.  
});  
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T13:15:23.813

您可以尝试在禁用所有组件的情况下启动页面，然后在 PageLoad 事件中启用它们。另一个想法是放置一个隐藏所有页面的 CSS 类，并在加载时使用 JQuery 更改它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-26T12:10:42.727

问题在于引用 javascript 文件。

如果需要在 ASP.NET Ajax 页面中添加块 UI，请尝试在 ScriptManager 中包含 javascript 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-08-04T15:20:26.430

你试过这个吗？

```
<script type="text/javascript">
    $(document).ready(function () {
        $.blockUI(options);
    });
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-03T20:20:54.177

最终对我有用的完整代码如下：

```
$("body").block({ message: '<h2>Loading...</h2>' });

$(document).ready(function () {
     $("body").unblock();
}); 
```

# wpf - 如何让 ItemsSource 刷新其绑定？

> ID：806714
> 
> 赞同：11
> 
> 时间：2009-04-30T12:44:26.697
> 
> 标签：wpf, mvvm, binding

我有一个视图，它显示了一个绑定到**GetAll()**的列表框：

```
<DockPanel>
    <ListBox ItemsSource="{Binding GetAll}"
             ItemTemplate="{StaticResource allCustomersDataTemplate}"
             Style="{StaticResource allCustomersListBox}">
    </ListBox>
</DockPanel> 
```

**GetAll() 是**我的 ViewModel 中的 ObservableCollection 属性：

```
public ObservableCollection<Customer> GetAll
{
    get
    {
        return Customer.GetAll();
    }
} 
```

进而**调用 GetAll() 模型方法**，该方法读取 XML 文件以填充 ObservableCollection。：

```
public static ObservableCollection<Customer> GetAll()
{
    ObservableCollection<Customer> customers = new ObservableCollection<Customer>();

    XDocument xmlDoc = XDocument.Load(Customer.GetXmlFilePathAndFileName());
    var customerObjects = from customer in xmlDoc.Descendants("customer")
                          select new Customer
                          {
                              Id = (int)customer.Element("id"),
                              FirstName = customer.Element("firstName").Value,
                              LastName = customer.Element("lastName").Value,
                              Age = (int)customer.Element("age")
                          };
    foreach (var customerObject in customerObjects)
    {
        Customer customer = new Customer();

        customer.Id = customerObject.Id;
        customer.FirstName = customerObject.FirstName;
        customer.LastName = customerObject.LastName;
        customer.Age = customerObject.Age;

        customers.Add(customer);
    }

    return customers;
} 
```

这一切都很好，除非用户转到另一个视图，**编辑 XML 文件**并返回到***仍然显示旧数据的***视图。

**我怎样才能告诉这个视图“刷新它的绑定”，以便它显示实际数据。**

感觉就像我在这里用太多的 HTML/HTTP 隐喻来讨论 WPF，我觉得有一种更自然的方法可以让 ObservableCollection 自我更新，因此它的名字，但这是我能让用户了解的唯一方法目前能够在 WPF 应用程序中编辑数据。因此，这里感谢任何级别的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-30T12:55:34.767

An`ItemsControl`请求其绑定一次，然后缓存该引用。

如果集合对象的内容被修改，并且它实现`INotifyCollectionChanged`（如`ObservableCollection`所做的那样），它将拾取任何添加或删除的对象。

现在，如果您希望绑定为 提供一个新的集合对象`ListBox`，您可以让您的视图模型实现`INotifyPropertyChanged`并 raise `PropertyChanged`，`GetAll`作为属性名称传入。这将具有警告属性值已更改的绑定的效果（有一个新的`ObservableCollection`准备好被拾取），它将提供给`ListBox`将重新生成其项目的 。

因此，只要您对应用程序进行更改，处理`ObservableCollection`返回的 by `GetAll`，您就可以添加和删除，并且列表将保持同步。当您想要获取外部修改时（您可能在某处有一个刷新按钮，或者重新加载整个文件有意义的自然点），您可以让您的视图模型引发`PropertyChanged`事件，这将自动调用属性 getter ，它将调用静态方法，该方法将返回一个新的集合。

Nitpicker 注意：为什么要为属性提供方法名称？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-10T16:24:01.073

下面的行工作与我们删除以在集合中添加对象时相同：

```
CollectionViewSource.GetDefaultView(CustomObservableCollection).Refresh(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T12:52:19.530

保留对您`ObservableCollection`和 XML 文件在加载时的最后修改时间的引用。每当窗口获得焦点时，检查磁盘文件上的时间戳。如果已更改，请清除并重新填充`ObservableCollection`. GUI 会自动侦听来自 的更改事件，`ObservableCollection`并在您修改集合的内容时自动重新填充。

# c# - C# LINQ - 读取 XML

> ID：806724
> 
> 赞同：2
> 
> 时间：2009-04-30T12:48:24.517
> 
> 标签：c#, xml, linq

我需要将xml中的所有信息存储在一个数组中。我的代码不起作用，因为我总是从 xml 中获取第一项。

有谁知道如何解决这一问题？

```
 XDocument xdoc = XDocument.Load("http://www.thefaxx.de/xml/nano.xml");
        var items = from item in xdoc.Descendants("items")
                    select new
                    {
                        Title = item.Element("item").Element("title").Value,
                        Description = item.Element("item").Element("description").Value
                    };

        foreach (var item in items)
        {
            listView1.Items.Add(item.Title);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T12:50:38.723

怎么样：

```
 var items = from item in xdoc.Descendants("item")
                select new
                {
                    Title = item.Element("title").Value,
                    // *** NOTE: xml has "desc", not "description"
                    Description = item.Element("desc").Value
                }; 
```

如果没有示例 xml，这*有点*难以确定 - 但看起来您打算遍历所有`<item>...</item>`元素 - 这就是上面所做的。您的原始代码循环遍历（单个？）`<items>...</items>`元素，然后从其中获取第一个`<item>...</item>`。

* * *

查看xml后进行编辑；这会更有效：

```
 var items = from item in xdoc.Root.Elements("item")
                select new {
                    Title = item.Element("title").Value,
                    Description = item.Element("desc").Value
                }; 
```

# c# - 在 C# 中对 dataGridView 列进行排序？（Windows 窗体）

> ID：806725
> 
> 赞同：58
> 
> 时间：2009-04-30T12:49:39.350
> 
> 标签：c#, winforms, datagridview, sorting, grid

我有一个从 sql 表绑定的 datagridview，在该 dv 中我有这些属性：Id、Name 和 Price。当我将名称列的 SortMode 设置为自动并单击此列的标题时，我可以根据名称的第一个字母对该 dv 进行排序，这样我可以根据产品的第一个字母（Acumulator、Boat、可口可乐、发动机等）。

有没有办法在不单击列名称的标题的情况下发生这种情况。我正在寻找一些可以在表单加载时完成这项工作的代码。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2009-04-30T13:05:29.687

DataGridView 上有一个名为“Sort”的方法：

```
this.dataGridView1.Sort(this.dataGridView1.Columns["Name"], ListSortDirection.Ascending); 
```

这将以编程方式对您的 datagridview 进行排序。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2010-08-22T06:43:08.817

```
dataGridView1.Sort(dataGridView1.Columns[0],ListSortDirection.Ascending); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-30T12:58:20.157

您可以通过对返回的数据进行排序来控制从 SQL 数据库返回的数据：

```
orderby [Name] 
```

如果您从应用程序执行 SQL 查询，请对返回的数据进行排序。例如，创建一个调用过程或执行 SQL 的函数，并给它一个获取 orderby 条件的参数。因为如果您订购从数据库返回的数据，它会消耗时间，但是会订购它，因为它是按照您所说的那样执行的，您希望它不是从 UI 订购的，您希望它在运行时订购，所以在执行 SQL 时订购它询问。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-22T08:50:39.363

这个更简单:)

```
dataview dataview1; 
this.dataview1= dataset.tables[0].defaultview;
this.dataview1.sort = "[ColumnName] ASC, [ColumnName] DESC";
this.datagridview.datasource = dataview1; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-05-24T21:56:09.403

最好的方法是在绑定数据源之前对列表进行排序。

`cars = cars.OrderBy(o => o.year).ThenBy(o => o.color).ToList(); adgCars.DataSource = cars;`

对不起，我的英语不好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-30T12:57:38.833

使用`Datatable.Default.Sort`属性，然后将其绑定到 datagridview。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-02T23:33:11.630

我知道这个问题的 2 个解决方案。

**1.排序（DataGridViewColumn列，ListSortDirection方向）函数**

此函数可用于按字母或数字或日期的降序或升序对列进行排序。

例子：

```
dataGridView.Sort(dataGridView1.Columns[5],ListSortDirection.Ascending); 
```

**2.排序（IComparer比较器）功能**

此功能可用于所有其他情况，如

以不同于数字顺序的特定顺序对列进行排序（例如：仅使用绝对值对可以为负数或正数的金额进行排序）

以不同于字母顺序的特定顺序对列进行排序（例如：使用不区分大小写的排序对文本进行排序）

使用 AMOUNT 列作为第一列，将 DATE 列作为第二列，将多个列排序为对表进行排序。

VB.Net 示例：

```
Private Sub pbSort_Click(sender As Object, e As EventArgs) _ 
    Handles pbSort.Click

    grid.Sort(New AmountDateComparer(Me))
End Sub

Private Class AmountDateComparer : Implements IComparer

    Private frm As FrmSearch

    Public Sub New(frm As FrmSearch)
        Me.frm = frm
    End Sub

    Public Function Compare(x1 As Object, x2 As Object) As Integer _
        Implements IComparer.Compare

        Dim row1 As DataGridViewRow = x1
        Dim row2 As DataGridViewRow = x2

        ' compare AMOUNT values of columns

        Dim nAmount1 = Convert.ToDecimal(row1.Cells(frm.Col_AMOUNT.Index).Value)
        Dim nAmount2 = Convert.ToDecimal(row2.Cells(frm.Col_AMOUNT.Index).Value)

        Dim iCompareResult As Integer 
            = System.Decimal.Compare(nAmount1, nAmount2)

        If iCompareResult = 0 Then
            'compare DATE values of columns
            Dim d1 = Convert.ToDateTime(row1.Cells(frm.Col_DATE.Index).Value)
            Dim d2 = Convert.ToDateTime(row2.Cells(frm.Col_DATE.Index).Value)

            iCompareResult = System.DateTime.Compare(d1, d2)
        End If

        Return iCompareResult
    End Function
End Class 
```

# perl - 如何美化 Perl 生成的 Perl 代码？

> ID：806727
> 
> 赞同：6
> 
> 时间：2009-04-30T12:50:18.460
> 
> 标签：perl, code-formatting

我有一个用 Perl 编写的测试生成器。它生成连接到模拟器的测试。这些测试本身是用 Perl 编写的，并通过其 API 连接到模拟器。我希望生成的代码是人类可读的，这意味着我希望它能够正确缩进和格式化。有什么好的方法吗？

详细信息如下，或者您可以跳到下面的实际问题。

这是一个例子：

```
 my $basic =  ABC
        TRIGGER        => DELAY(
            NUM            => 500,
            ),
        )
BASIC

my $additional =  STATE_IS(
        STATE          => DEF,
        INDEX          => 0,
        ),

ADDITIONAL 
```

我希望`ABC`在我调用 500 后延迟执行命令（单位现在不相关）`&event`，并且索引 0 的状态是`DEF`. 有时我还想等待索引 1、2、3 等...

只有一个索引我想在我的测试中看到这个：

```
 &event(
        CMD            => ABC
        TRIGGER        => DELAY(
            NUM            => 500,
            TRIGGER        => STATE_IS(
                STATE          => DEF,
                INDEX          => 0,
                ),
            ),
        ) 
```

对于两个indeces，我想看看：

```
 &event(
        CMD            => ABC
        TRIGGER        => DELAY(
            NUM            => 500,
            TRIGGER        => STATE_IS(
                STATE          => DEF,
                INDEX          => 0,
                TRIGGER        => STATE_IS(
                    STATE          => DEF,
                    INDEX          => 1,
                    ),
                ),
            ),
        ) 
```

所以基本上我要添加一个块：

```
 TRIGGER        => STATE_IS(
                STATE          => DEF,
                INDEX          => 0,
                ), 
```

对于每个索引，索引号都会更改。

这是我的做法：

```
 for $i (0..$num_indeces) {
    # update the index number
    $additional =~ s/(INDEX\s*=>\s*)\d+,/$1 $i,/;

    $basic =~ s/(
                (\),\s*)  # capture sequences of ),
                +         # as many as possible 
                \)\s*     # end with ) without a , 
}               )/$additional $1/sx; # replace with the additional data 
```

**这是实际的问题**

这里的问题是代码缩进很差。我想`$basic`通过这样的美化器运行结果：

```
&prettify($basic, "perl"); 
```

这将根据 Perl 的最佳实践很好地格式化它。有什么好的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-30T13:04:12.543

[PerlTidy](http://perltidy.sourceforge.net/)使您的代码不仅整洁，而且非常漂亮。您可以根据当地的编码标准轻松调整它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-30T14:47:59.970

我用过这个：

```
use Perl::Tidy;
sub Format {
    my $source = shift;
    my $result;
    Perl::Tidy::perltidy(
        source      => \$source,
        destination => \$result,
        argv        => [qw(-pbp -nst)]
    );
    return $result;
} 
```

# javascript - IE 不允许我用 javascript 设置 textarea 值

> ID：806736
> 
> 赞同：0
> 
> 时间：2009-04-30T12:53:31.713
> 
> 标签：javascript, html, internet-explorer, dom, textarea

`value`我正在尝试更改`<textarea>`元素。此代码在 Firefox 中运行良好，但 IE 声称存在错误`onblur`并且没有设置值。

```
<textarea 
    name="comment" 
    id="comment" 
    rows="8" 
    cols="80"
    style="color:grey;" 
    onfocus="if(this.value=='Add a comment...') {this.style.color='black'; this.value='';}"
    onblur="if(this.value=='') {this.style.color='grey'; this.value='Add a comment...';}">Add a comment...</textarea> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T12:58:19.157

这是否会导致问题 -

> this.style.color='灰色'

?

```
this.style.color='gray'; 
```

完整代码：

```
<textarea name="comment" id="comment" rows="8" cols="80" style="color: gray;" onfocus="if(this.value=='Add a comment...') {this.style.color='black'; this.value='';}"
        onblur="if(this.value=='') {this.style.color='gray'; this.value='Add a comment...';}">Add a comment...</textarea> 
```

# actionscript-3 - Flex 3 自定义组件定位——弹窗

> ID：806738
> 
> 赞同：0
> 
> 时间：2009-04-30T12:54:01.337
> 
> 标签：actionscript-3, apache-flex, popup, flex3

我创建了一个自定义 TitleWindow，我将其用作弹出窗口。弹出窗口的内容是根据用户从数据网格中所做的选择动态创建的。

我的问题是，我的数据网格位于另一个自定义组件中，该组件位于页面底部，因此当用户单击其中一个项目时，会显示弹出窗口，但其中一半在页面底部看不见。

有没有办法定位弹出窗口，使其显示在页面顶部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T09:31:20.987

我知道至少有两件事可以用来定位弹出窗口，尽管可能还有更多。

放置弹出窗口时，您可以选择将弹出窗口放置在哪个父组件中：

```
PopUpManager.createPopUp(this.parent, TitleWindowComponent); 
```

在组件本身中：

```
PopUpManager.centerPopUp(this); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-04-16T21:07:02.997

我想要一个帮助工具提示类型弹出窗口（带有帮助文本）出现在打开它的图标旁边。最后，我使用 move(x,y) 将窗口移动到我想要的位置。要获取放置它的坐标，请使用 globalToLocal：

```
var globalX:Number = localToGlobal(new Point(myIcon.x, myIcon.y)).x;
var globalY:Number = localToGlobal(new Point(myIcon.x, myIcon.y)).y;

toolTip.move(globalX + myIcon.width, globalY); 
```

这会将窗口放在图标 myIcon 的右侧。

# python - 我可以使用 python 默认库集加密电子邮件并将其解密回来吗？

> ID：806739
> 
> 赞同：8
> 
> 时间：2009-04-30T12:54:26.843
> 
> 标签：python, encryption

当然，在 stackoverflow 中也提出了类似的问题，但我不想使用任何第三方库，如 Crypto 之类的。因此，我需要从用户电子邮件中生成密文并将其解密回明文。我怎样才能在python中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T12:59:17.800

是的你可以。阅读[http://www.amk.ca/python/code/crypto.html](http://www.amk.ca/python/code/crypto.html) 你会在那里找到答案；）

你的问题不够具体，不能多说。您可能想阅读[http://en.wikipedia.org/wiki/Cryptography#Modern_cryptography](http://en.wikipedia.org/wiki/Cryptography#Modern_cryptography)

干杯，Tuergeist

更新：不，你不能。（由于出口限制，内置功能，请参阅[http://docs.python.org/library/crypto.html](http://docs.python.org/library/crypto.html)）但是，如果您正在实施自己的算法（坏主意），您可以。因此，最好的解决方案是使用 python 核心开发人员推荐的扩展。见上面的帖子。

再次欢呼。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-30T13:38:11.497

第三方系统是您最好的选择。
如果您真的不能/不想使用第三方，也许简单的事情就足够了。

一种更简单的算法是[微型加密算法](http://en.wikipedia.org/wiki/Tiny_Encryption_Algorithm)(TEA)。 [这是您可以开始使用的 Python 实现示例。](http://code.activestate.com/recipes/496737/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T16:47:55.017

如果您的意思是您想推出自己的加密系统，您可以尝试使用内置`hmac`和`hashlib`模块。（`hashlib`对于 2.5 来说是新的，所以如果你必须使用更早的 Python，你的哈希选择是旧的`md5`和`sha`模块。）

如果您反对（或被阻止）*安装*第三方库，但可以使用第三方算法甚至“轻量级”第三方算法实现（例如，驻留在单个 .py 中的已发布 Python 源代码）文件，您可以在不使用`setup.py`或任何其他*正式*安装的情况下自行合并或导入），那么我强烈建议您这样做，因为这些可能比您自己想出的要好。

我所知道的其中最小且用户最友好的被称为**p3**，由密码学家 Paul Rubin 编写。原始链接不再有效，但您可以搜索它。谷歌搜索目前产生[了一个近乎精确的副本](https://github.com/zhangchunlin/gitldapacl/blob/master/p3.py)以及[对 Python 3 的改编](https://sourceforge.net/p/treeline/devel/ci/default/tree/source/p3.py)。

您还可以尝试几个单模块、纯 Python [Rijndael (AES)](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard)实现之一，例如[this](http://fastcrypto.org/umac/2004/src/rijndael.py)或[this](http://www.bjrn.se/code/rijndaelpy.txt)。（同样，不能保证链接是永久性的，因此您可能需要进行一些搜索。）

# c# - 用于将 POCO 实例公开给其他 AppDomain 的通用容器 - 它是如何工作的？

> ID：806744
> 
> 赞同：1
> 
> 时间：2009-04-30T12:55:32.300
> 
> 标签：c#, generics, appdomain, poco, marshalbyrefobject

我对另一个 SO 线程的[这个](https://stackoverflow.com/questions/439173/message-pumps-and-appdomains/442316#442316)答案很感兴趣，我希望有人可以帮助我阐明这个概念。

假设我有一个主 AppDomain 和一堆由主 AppDomain 创建和初始化的子 AppDomain。在伪代码中：

主要应用程序域：

```
class Parent
{
    public void InitChildren(IList<ChildInfo> children)
    {
        foreach (var childInfo in children)
        {
            var ad = CreateNewChildAppDomain();
            var child = (Child)ad.CreateInstanceAndUnwrap(typeof(Child));
            child.Init(this);
        }
    }

    public void Register(BasePoco info)
    {
        // Do something with info.
    }
} 
```

子应用域：

```
class Child : MarshalByRefObject
{
    public void Init(Parent parent)
    {
        parent.Register(new Container<MyInfo>(new MyInfo()));
    }
}

class MyInfo : BasePoco // <- not a MarshalByRefObject!
{
    public MyInfo() { ... }
} 
```

在 Init() 期间，子 AppDomain 实例化一个 POCO 对象，根据定义，该对象是不可编组的。我们还假设我们不能在这方面修改它。

链接的答案表明，将它包装在一个`Container<T>`（它本身*是可*编组的）中应该允许它被传递回主 AppDomain。我理解这一点，因为它`Container<MyInfo>`是真正被传递的实例的代理。

我不明白的是主 AppDomain 怎么可能通过容器的**代理**访问容器中的 POCO 实例。我看到了重载的隐式转换运算符`Container<T>`，我知道它返回包含的 POCO 实例。但是该实例本身并没有被代理 - 它仍然在子 AppDomain 中！那么，这不应该中断吗？

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T13:31:03.823

一旦容器返回存在于另一个 AppDomain 中的实例（无论是通过 Value 属性还是隐式转换运算符发生），该对象就会被编组。如果是 MarshalByRefObject，则会生成一个新的代理，以便您访问它。否则，对象将被复制（按值编组、序列化）到当前应用程序域中。

该问题中显示的 Container 类唯一可以帮助的事情是，如果您想保留另一个不应编组的对象的代理。但在这种情况下，您不能从代理所在的 AppDomain 访问 Value 属性或使用隐式转换运算符，因为这会导致容器中的对象被封送。尽管如此，您仍然可以将容器用作与 Container 对象位于同一 AppDomain 中的对象的方法中的参数，因此基本上允许您保留对不可编组对象（不可序列化且不可 MarshalByRef 或类型）的引用在无法使用代理等加载到 AppDomain 的程序集中）并像“句柄”一样传递它。

# java - 避免在 jstl 中循环 xml

> ID：806748
> 
> 赞同：2
> 
> 时间：2009-04-30T12:56:07.587
> 
> 标签：java, xml, jsp, jstl

我想做这样的事情：

```
<x:out select="$productXML/product/sizes/size[<c:out value='${param.sizeIndex}'/>]" escapeXml="false"/> 
```

但我认为唯一的方法是这样的：

```
<x:forEach var="size" begin="${param.sizeIndex}" end="${param.sizeIndex+1}" select="$productXML/product/sizes/*">  
    <x:out select="$size" escapeXml="false"/>
</x:forEach> 
```

有没有办法让它更像我想要的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-01T14:13:27.940

不确定您要解决什么问题，但是您确定需要`<c:out value='${param.sizeIndex}'/>`'[]' 内部吗？JSTL 应该同时处理，你应该能够编写如下内容：

```
<x:out select="$productXML/product/sizes/size[param.sizeIndex]" escapeXml="false"/> 
```

或者也许使用 `<c:set var="sIdx" value="${param.sizeIndex}" />`

但我并不完全熟悉 JSTL XML 标记以 100% 确定......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T03:30:12.767

我想我在这里找到了你要找的[东西](http://java.sun.com/j2ee/1.3/docs/tutorial/doc/JSTL6.html)：

```
<x:set var="abook"
select="$applicationScope.booklist/
        books/book[@id=$param:bookId]" />
  <h2><x:out select="$abook/title"/></h2> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T02:15:35.043

感谢 GClaramunt [用户 98867] 让我走上了正确的道路，我发现了正确的答案：

```
<x:out select="$productXML/product/sizes/size[$param:sizeIndex]" escapeXml="false"/> 
```

# java - 在 IDE 中编程时如何停止使用鼠标？

> ID：806753
> 
> 赞同：25
> 
> 时间：2009-04-30T12:56:48.723
> 
> 标签：java, .net, visual-studio, eclipse, ide

我喜欢使用 IDE，因为我获得了一些巨大的生产力提升。但是，我有几个理由停止在 IDE 中使用鼠标：

1.  更快地编码 - 当我的打字被所有恒定点和点击打断时，它肯定会减慢我的编码速度。
2.  减轻疼痛 - 我从来没有因为键盘而感到疼痛，但我会因为鼠标而患上肌腱炎。

我已经打印了我的 IDE 备忘单，现在我准备好了。

*   摆脱鼠标的最佳方法是什么？
*   我会遇到什么障碍吗？
*   是否有针对特定 IDE（Visual Studio、Eclipse 等）的提示？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-30T13:01:16.560

将其移到错误的一侧（例如，如果您是右手，则将其放在键盘的左侧）。这样，您仍然可以在必要时使用它，但您会发现您并没有不必要地使用它。

如果换边不足以让你的大脑感到困惑，那么将它移动到一个可以访问的地方，但你必须在到达它之前考虑一下。只要你不假思索就够不着鼠标，那么你会发现用键盘快捷键来代替它更容易。本质上，您希望鼠标是一种选择，但键盘是一种更好/更容易/更方便的选择！

至于陷阱，您可能会发现，如果您必须测试任何界面（基于 Web 或 dektop），您需要恢复使用鼠标。我还发现，如果我必须在 IDE 之外工作，那么没有鼠标就没有效率了。我们经常将 Word 用于规范和文档，并且试图在没有鼠标的情况下使用它是很棘手的（根据我的经验）。

另一个令人烦恼的潜在来源是，在应用程序（Eclipse、VS 等）之间切换时，您会发现它们经常使用不同的键盘快捷键，因此可能需要一段时间才能再次恢复速度，或者您必须花费一些时间时间重新配置快捷方式以保持一致。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-30T12:58:18.377

拔掉它。

如果您的鼠标完全消失了，那么您将被迫学习如何在没有它的情况下生活，因此在没有它的情况下将变得富有成效。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-30T12:59:11.917

每当您要使用鼠标时，请强行停止自己并查找该操作的键盘快捷键。每次手术做几次，很快你的肌肉记忆就会启动，你甚至不必再考虑它了。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-30T13:03:02.970

学习键盘快捷键:)

还有一些编辑器更适合无鼠标操作。我将 ViEmu 与 Visual Studio 一起使用，这帮助我减少了，但并没有消除使用鼠标的需要。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-30T12:59:18.283

得到一个轨迹球。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-30T13:06:22.773

*   尽可能使用命令行（安装 Powershell）
*   切换到 vim 或 emacs 进行代码编辑（如果你*真的*需要智能感知，也可以使用 ViEmu）
*   如果您开发 Web 应用程序和/或在 Web 上花费大量时间，请获取 Vimperator 或 Firemacs 扩展
*   了解其他所有内容的键盘快捷键。
*   ？？？
*   利润！！！（来自您提高的生产力）

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-30T13:08:33.487

你真正的问题是关于痛苦和生产力，鼠标只是你环境的副产品。我会改写问题以反映您的真正目的。

检查手腕支架。我从人们那里听说它有很大的不同。

对于 VS，请查看 Sara Ford 的博客。

*   [将宏绑定到键盘快捷键](http://blogs.msdn.com/saraford/archive/2008/06/20/did-you-know-you-can-bind-macros-to-keyboard-shortcuts-or-how-to-quickly-increase-decrease-your-text-editor-font-size-242.aspx)
*   [用于导航任务列表的键盘快捷键](http://blogs.msdn.com/saraford/archive/2008/03/25/did-you-know-you-can-create-keyboard-shortcuts-to-navigate-among-keyboard-shortcuts-view-nexttask-and-view-previoustask-178.aspx)

在她的博客中搜索大量其他提示和技巧。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-04-30T13:08:14.377

将鼠标隐藏在备忘单副本下。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-30T13:10:04.760

对于 Visual Studio，我使用[ViEmu](http://www.viemu.com/)插件，它允许您在 Visual Studio 中使用 vi 命令。掌握它有点困难，但是一旦你完成了，你就只能在设计器上使用鼠标了。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-04-30T13:34:00.023

获取网络摄像头和眼动追踪软件。然后你可以通过查看它们来修复错误。它让你感到无所不能。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-06T08:05:56.890

我在我的博客中总结了一些可以让你更快地使用 Visual Studio 的快捷方式。

[我建议你从这篇文章开始，它向你展示了我建议你应该首先了解的快捷方式......](http://blog.einbu.no/2009/03/your-first-handfull-of-vs2008-keyboard-shortcuts/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-30T13:00:40.963

切换到**emacs**。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-04-30T13:01:58.073

打开最近的抽屉并将其推入并关闭抽屉。那样，当你真的需要它的时候，使用它会很不方便！！！

此外，如果您使用多个 IDE，则需要配置它们之间通用的键绑定，以便您可以轻松地在它们之间切换。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-30T13:05:12.870

将您的按键更改为 Emacs setup ，Learn the Keyboard Shortcuts。我很少在eclipse中使用鼠标，如果有的话。我发现使用 emacs 快捷键要容易得多。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-04-30T13:07:09.200

当我在纽约与一家投资银行签约时，有一个不会使用鼠标的人。他是一个 java/kdb 开发人员，只是使用 vim。我曾经认为他的电脑上没有鼠标是最奇怪的事情，但是该死的……那个人很有生产力。可能**是**我合作过的最有效率的人。

所以是的，如果你真的想走那条路，你可以尝试使用 vim 或类似的东西。您将失去您在 IDE 中习惯使用的功能，但它对他有用......

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-04-30T13:14:14.470

1.  成为更好的打字员。作为一个慢速打字员，我发现自己会使用鼠标，所以我不必打字。如果我打字效率更高，我就不会更倾向于使用鼠标。

2.  如果您使用的是笔记本电脑和鼠标，请移除鼠标并将触控板作为唯一选择。这将非常痛苦，以至于您将被迫学习更多键盘快捷键。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-04-30T13:57:13.057

上面有一些很好的答案。

我用 RSI 受伤了一段时间，鼠标是个问题。我已经使用了很多快捷方式。但是严格使用键盘进行编码肯定会更慢，尤其是在代码中导航时。

当我当时使用 vi 时，我主要通过在我想去的位置搜索文本来在屏幕上移动；假设您选择明确的文本，这非常快。保留行号然后转到行号是另一种快速导航的方法。明智地使用代码折叠（在许多 IDE 中可用）也有帮助。

最后，考虑一个备用指针设备。触控板不适合玩游戏，但更容易用于编码，尤其是如果您将它放在按键容易触及的地方（例如，如果您使用分体式键盘，则在两只手之间）。尝试在两种或多种类型的设备之间切换，以免因某一特定设备而受伤。不要忽视手腕疼痛！在它变得更糟之前治疗它，你最终会在一年左右没有生产力。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-04-30T13:59:31.337

改变你的[键盘](https://stackoverflow.com/questions/687/keyboard-for-programmers/324241#324241)：

[![替代文字](https://i.stack.imgur.com/0SZ9c.jpg)](https://i.stack.imgur.com/0SZ9c.jpg)
[（来源：[datahand.com](http://www.datahand.com/images/DatahandTabletop.JPG)）]

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-04-30T14:50:44.270

将您的 IDE 配置为**使用 VI 或 EMACS 键盘控件**（并学习它们。）这两个选项都允许您在不移动主行的情况下完成大多数任务。您会在学习曲线期间看到您的工作效率下降，但之后会大幅提升，因为您无需移动键盘的手来使用鼠标即可节省大量时间。

附带说明一下，学习使用基于终端的编辑器是一项很好的技能，以防您需要远程管理 *nix 机器。总有一天它**会**拯救你的培根。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-05-01T18:56:13.937

MouseFeeds 插件将在 Eclipse 中为您提供帮助： [http ://www.mousefeed.com/installation](http://www.mousefeed.com/installation)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-05-06T15:52:39.203

所有这些编码人员，没有人建议编写一些代码来在 IDE 的窗口处于活动状态时隐藏指针？

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2010-09-07T13:20:04.937

好问题...一位同事向我建议[Launchy](http://www.launchy.net/)作为减少鼠标使用/提高工作效率的一种方式。它会在您的“开始”菜单（或非 Windows 等效项）中搜索应用程序、文档、快捷方式等。键入 alt+空格键可在您键入要启动的内容的位置显示其提示。以下是一些示例 - 您键入的内容取决于“开始”菜单中的其他内容。

*   ch 代表 Chrome，f 代表 Firefox
*   ca 计算器
*   用于 Windows 资源管理器的 expl

高级用户可以调整其设置以从中获得更多收益，但即使是基本用户也会从中受益。希望能帮助到你。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-04-30T12:59:21.013

隐藏你的鼠标 - 至少一臂的距离 - 这样你就可以在紧急情况下把它拿回来

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-04-30T13:02:50.800

将它移得足够远以至于使用起来不方便，而您的备忘单足够近，可以在您对如何做某事有疑问时轻松查找。我不建议拔掉它，因为它是一些操作的有用工具，例如移动文件。我发现在文件系统视图之类的树中拖放比其他方法容易得多。但是，一旦您记住它们，大多数编辑操作都可以通过击键快速完成。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-04-30T16:02:58.870

我正在使用 IntellijIDEA IDE。有一个非常烦人的插件——“关键推动者”。
对于每个鼠标启动的操作，它都会显示带有键盘快捷键的烦人警报，您可以使用它来执行相同的操作。

好吧，我花了大约 2 到 3 周的时间才完全停止使用鼠标。很难不关闭它（插件），但非常有用:)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-04-30T16:31:57.193

恕我直言，最好的答案是两个已经给出的答案的组合：

*   打印出 IDE 的键盘快捷键备忘单，并将其粘贴到屏幕旁边的墙上。
*   拔掉它。此外，通过在另一个窗口中切换到 SO，这使得拖延变得有点困难......

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2009-04-30T16:39:48.143

您可能还想考虑在 Macbook/Macbook pro 上进行编码。我通常*讨厌*触摸板，但我不得不在飞机上进行一些编码，而且新的触摸板实际上非常方便。例如，您可以通过滑动两个歌手来执行诸如滚动之类的操作，并且更加准确。

它可能并不完美，但它可能对您的双手有所帮助。

我认为完全避免鼠标是不切实际的（你需要像悬停这样的东西）

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2009-05-06T07:52:15.457

首先，不要试图用键盘做所有事情，首先强迫自己使用键盘来完成你一直做的前三件事。获得最大的收益/努力，您很快就会想要使用更多。

1.  在你写下你使用的键盘快捷键的地方附近放一张纸。（或者，将其添加到公司 wiki，以便其他人受益。）

2.  注意菜单项，它们经常有键盘快捷键。

3.  找出显示所有其他键盘快捷键的键盘快捷键。

我一直在使用 Eclipse，有几个我觉得非常宝贵的键盘快捷键：

1.  `CTRL`+ `SPACE`- 内容辅助
2.  `CTRL`+ `3`- 通过键入在 Eclipse 中打开任何 UI 元素
3.  `CTRL`+ `SHIFT`+ `T`- 按类型打开（使用大写字母进行单词搜索和 * 用于通配符，例如 NuPoEx 会找到 NullPointerException）
4.  `ALT`+ `SHIFT`+ `R`- 重命名当前选择
5.  `ALT`+ `SHIFT`+ `T`- 重构菜单

并且`CTRL`++`SHIFT`为`L`您提供所有键盘快捷键的列表

# asp.net-mvc - 如果使用 LINQ to SQL 是否有充分的理由再学习 SQL 查询/语法？

> ID：806763
> 
> 赞同：3
> 
> 时间：2009-04-30T12:58:45.880
> 
> 标签：asp.net-mvc, linq, linq-to-sql

由于以前使用 ASP.NET Web 表单和存储过程的工作，我确实了解 SQL 查询和语法，但我不会称自己为其中的“专家”。

由于我一直在使用 ASP.NET MVC 和 LinqToSql 似乎已经为我完成了很多繁重的工作并在 SQL 端进行了封装，我质疑继续补充我的知识是否有任何好处SQL 查询，或者我是否最好将“学习时间”集中在其他事情上。

你的意见？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-30T13:02:32.033

您应该绝对了解 SQL 并保持您的知识是最新的。ORM 旨在减轻您知道如何做的乏味事情的痛苦，就像图形计算器旨在做一些您可以手动完成的事情（并且应该知道如何做）。

您开始让 ORM 在数据库中执行您不完全理解的事情的那一刻，就是您失去对模型的控制的那一刻。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-30T13:02:18.773

在我看来，了解 SQL 比任何供应商特定的技术都更有价值。在某些情况下，那些漂亮的预打包框架将无法解决特定情况，并且需要高级 SQL 知识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T13:01:54.390

学习 SQL 查询/语法仍然很重要。原因是您至少需要了解 Linq to SQL 如何在幕后转换为数据库。

这将在您发现问题时为您提供帮助，例如无法正确更新的问题。或者查询性能需要提高。

您需要了解什么是汇编语言以及它最终如何成为机器语言。但是，总而言之，您不必成为专家，但至少能够写并理解它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T13:04:38.567

即使您使用 LinqToSql 或任何其他 OR/M，了解 SQL 及其背后的范式（基于集合）以创建高效的 SQL 语句仍然很重要。

在某些情况下，您会希望在本机 SQL 中编写查询，因为不可能在 LinqToSql / HQL / 任何东西中编写它，或者 LinqToSql 无法为其生成高性能查询。

在某些情况下，您将希望使用本机 sql 等在数据库上执行临时查询......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T13:06:44.380

我认为 LinqToSQL（或其他 Linq to SQL 提供程序）不应该阻止您了解 SQL。

当您的查询没有返回您期望的结果，或者在生产数据库上运行需要 30 分钟时，您最好能够了解 LTS 生成了什么以及它失败的原因。

我知道，这是一个重新讨论过的话题，它可能不适用于您所做的事情（永远不会遇到此类问题的“小型”数据库等），但有时不要忘记抽象层是值得的。

另一个原因是，Linq 没有你可以在 SQL 中做的全部范围，所以你可能不得不求助于编写“原始”SQL，即使结果被物化为对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-30T13:07:40.383

这取决于你在做什么，从你所说的来看，专注于其他领域可能更有意义。

话虽如此，我发现了解 SQL 允许以下操作：

*   编写查询以轻松从系统中提取数据的能力。用于临时查询或检查。
*   编写复杂的存储过程的能力，这使我可以将复杂的数据处理分组到一个地方，它应该在数据库中的一个地方。
*   通过添加索引和了解 SQL/查询计划的 it 过程来微调 LinqToSql 的能力。

其中大多数对更复杂的系统更有帮助，因此如果您不从事这些工作，则可能没有多大帮助。

在您的情况下，列出可能有用的技术可能会有所帮助，然后确定它们的优先级。
换句话说，为自己制定一个发展计划，这可能不仅仅包括学习技术知识，而是允许更广泛的关注点，如设计模式、沟通技巧和其他领域。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-02T21:40:47.247

SQL 是一种工具。Linq to SQL 也是一个工具。拥有更多工具是一件好事。在解决问题时，它会给你更多的视角。

考虑一个场景，您可能希望在一次操作中对数据库执行多个查询或多次更新。如果您可以编写 TSQL，您可能会为自己节省大量往返数据库的时间。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-08T14:23:02.670

我会说你肯定需要深入了解你的 SQL，因为你需要知道你的 Linq 表达式生成什么代码，以及如果你想要高性能查询，这些代码会产生什么影响。当然，在大多数情况下您可能会完成工作，但有时在 Linq 语法中非常细微的差异会导致性能上的巨大差异。

实际上，我今天早上遇到了这个问题，在那里我做了 .Any(d => d.Id == (...).First().Id) 而不是做 where (...).Any(i => i.Id == d.Id)。这导致查询的执行速度慢了五倍。

有时您需要分析实际的 Sql-query 以了解您所犯的错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-30T13:01:06.937

学习诸如 Linq To SQL 之类的底层语言总是一个好主意。SQL 几乎是标准化的，它将帮助您理解编程的新范式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-30T13:03:09.910

*   您可能并不总是在 .NET 中工作。
*   了解基本概念并没有什么坏处。
*   不再维护 LINQ to SQL 以支持实体框架

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-30T13:04:44.883

您迟早会遇到需要至少具备 SQL 工作知识才能解决的问题。迟早你会遇到在数据库中最能实现的需求（无论是在 SP-s 中还是在触发器或视图中或 whaterver 中）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-30T13:07:03.613

LINQ To SQL 仅适用于 .NET。如果您碰巧找到了另一份不使用 .NET 的工作，那么您将不得不重新编写存储过程。

了解 SQL 还可以让您更好地了解服务器的运行方式，并可能使您成为更好的数据库设计者。

# c# - 如何在 C# 中以编程方式将 xlsx 文件转换为 2003 xls 文件？

> ID：806771
> 
> 赞同：2
> 
> 时间：2009-04-30T13:00:48.573
> 
> 标签：c#, xls, xlsx

我发现[ExcelPackage](http://www.codeplex.com/ExcelPackage)是一个比 Excel Interop API 更好的库，可以以编程方式创建和维护 Excel 工作表，但它们是在 .xlsx 中生成的。大多数会看到这些文件的人只安装了 office 2003，所以我需要在我的 C# 代码中将最终结果转换为 .xls 文件。

你知道**用 C# 代码**做这件事的任何方法吗？

****更新我正在尝试使用 SaveAs 方法，但它不起作用，它什么也不做，或者返回错误 0x800A03EC 。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T13:31:38.297

我怀疑这不会是一个流行的答案，但我不认为将文件从 .xlsx 转换为 .xls 是可取的（我打算建议没有必要，但不幸的是，这是一个概括太远）。

“Microsoft Office 兼容包”可免费下载，并为 Office XP 和 Office 2003 添加了对新格式的支持 - 因此，至少在一般情况下，说服您的用户使他们的系统符合规范要好得多，而不是陷入困境你自己不得不处理办公室互操作（这基本上会给你，很可能是你的用户带来很多痛苦）。同样，我相信 Open Office 3 支持新格式。

我确实理解在某些情况下不允许人们将这种功能添加到他们的系统中，但在大多数情况下，添加上述工具将使人们的生活更轻松，因为它会减少使用 Office 2007 的人和使用旧版 Office 的人之间的摩擦版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T13:17:27.397

您可以尝试使用 Microsoft.Office.Interop.Excel。您需要在尝试进行转换的机器上安装 Excel。您可以从 COM 选项卡添加引用并使用 Microsoft Excel 12.0 对象库组件。

基本上，您将使用 Workbook.Open() 打开现有工作簿，创建一个新工作表并复制现有数据。然后您可以使用 Workbook.SaveAs() 方法，这将让您在第二个参数中设置文件格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-03T17:49:54.333

试试这个代码：

```
 try
        {
            Microsoft.Office.Interop.Word.ApplicationClass oWord = new ApplicationClass();
            object oMissing = Type.Missing;
            object fileName = @"c:\test.docx";
            Document oDoc = oWord.Application.Documents.Open(ref fileName, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing);
            object fileName2 = @"c:\test2.doc";

            object fileFormat = WdSaveFormat.wdFormatDocument97;
            oDoc.SaveAs(ref fileName2, ref fileFormat, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing);

            oDoc.Close(ref oMissing, ref oMissing, ref oMissing);
            oWord = null;
            Console.WriteLine("Done");

        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
        Console.Read(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-15T19:22:17.867

这是我的 IBM iSeries 项目中的一段代码。它将任何 Excel 文件转换为 Excel 2003：

```
string MOVE_DOWNLOADED(string FILENAME)
{
  string Path = FILENAME;
  Microsoft.Office.Interop.Excel.ApplicationClass app = new Microsoft.Office.Interop.Excel.ApplicationClass();           
  Microsoft.Office.Interop.Excel.Workbook workBook = app.Workbooks.Open(Path,
    0,
    true,
    5,
    "",
    "",
    true,
    Microsoft.Office.Interop.Excel.XlPlatform.xlWindows,
    "\t",
    false,
    false,
    0,
    true,
    1,
    0);

  string retval = System.Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "\\" + "_tmp_" + ".xlsx";

  try
  {
    workBook.SaveAs(retval, 
      Microsoft.Office.Interop.Excel.XlFileFormat.xlExcel9795, 
      null, 
      null, 
      false, 
      false, 
      Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlShared, 
      false, 
      false,
      null,
      null,
      null);
  }
  catch (Exception E)
  {
    MessageBox.Show(E.Message);
  }

  workBook.Close(null, null, null);
  System.Runtime.InteropServices.Marshal.ReleaseComObject(workBook);
  workBook = null;
  GC.Collect(); // force final cleanup!

  return retval;    
} 
```

# sql-server - 使用 UPDLOCK 的 LinQ To SQL

> ID：806775
> 
> 赞同：1
> 
> 时间：2009-04-30T13:01:18.060
> 
> 标签：sql-server, linq-to-sql

有没有办法将 UPDLOCK 与 LinQ To SQL 一起使用？我有一个需要它的场景。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T13:08:16.980

Linq2SQL 目前不支持发出 UPDLOCK

更多信息[在这里](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/24890e00-f224-4f6a-a596-f9b2f524aa39)和[这里](https://stackoverflow.com/questions/190666/linq-to-sql-and-concurrency-issues)

如果您需要这样做，您可以将自己的 SQL 包装在 SPROC 中，并让 L2S 执行 SPROC

# .net - WPF - 如何在 WrapPanel 中居中所有项目？

> ID：806777
> 
> 赞同：34
> 
> 时间：2009-04-30T13:01:49.663
> 
> 标签：.net, wpf, layout, center, wrappanel

我正在使用 a`WrapPanel`作为a`ItemsPanel`的`ItemsControl`。现在，控件中的项目如下所示：

```
|1234567  |
|890      | 
```

我希望他们像这样包装：

```
| 1234567 |
|   890   | 
```

从概念上讲，布局过程应该对齐每行项目，使其在`WrapPanel`' 范围内居中。

有人可以解释一下这是怎么可能的吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2011-10-12T21:44:18.953

内置`WrapPanel`将不允许您对齐其内容 - 只有它自己。这是一种允许您设置的技术`HorizontalContentAlignment`：

```
using System;
using System.Windows;
using System.Windows.Controls;

public class AlignableWrapPanel : Panel
{
    public HorizontalAlignment HorizontalContentAlignment
    {
        get { return (HorizontalAlignment)GetValue(HorizontalContentAlignmentProperty); }
        set { SetValue(HorizontalContentAlignmentProperty, value); }
    }

    public static readonly DependencyProperty HorizontalContentAlignmentProperty =
        DependencyProperty.Register("HorizontalContentAlignment", typeof(HorizontalAlignment), typeof(AlignableWrapPanel), new FrameworkPropertyMetadata(HorizontalAlignment.Left, FrameworkPropertyMetadataOptions.AffectsArrange));

    protected override Size MeasureOverride(Size constraint)
    {
        Size curLineSize = new Size();
        Size panelSize = new Size();

        UIElementCollection children = base.InternalChildren;

        for (int i = 0; i < children.Count; i++)
        {
            UIElement child = children[i] as UIElement;

            // Flow passes its own constraint to children
            child.Measure(constraint);
            Size sz = child.DesiredSize;

            if (curLineSize.Width + sz.Width > constraint.Width) //need to switch to another line
            {
                panelSize.Width = Math.Max(curLineSize.Width, panelSize.Width);
                panelSize.Height += curLineSize.Height;
                curLineSize = sz;

                if (sz.Width > constraint.Width) // if the element is wider then the constraint - give it a separate line                    
                {
                    panelSize.Width = Math.Max(sz.Width, panelSize.Width);
                    panelSize.Height += sz.Height;
                    curLineSize = new Size();
                }
            }
            else //continue to accumulate a line
            {
                curLineSize.Width += sz.Width;
                curLineSize.Height = Math.Max(sz.Height, curLineSize.Height);
            }
        }

        // the last line size, if any need to be added
        panelSize.Width = Math.Max(curLineSize.Width, panelSize.Width);
        panelSize.Height += curLineSize.Height;

        return panelSize;
    }

    protected override Size ArrangeOverride(Size arrangeBounds)
    {
        int firstInLine = 0;
        Size curLineSize = new Size();
        double accumulatedHeight = 0;
        UIElementCollection children = this.InternalChildren;

        for (int i = 0; i < children.Count; i++)
        {
            Size sz = children[i].DesiredSize;

            if (curLineSize.Width + sz.Width > arrangeBounds.Width) //need to switch to another line
            {
                ArrangeLine(accumulatedHeight, curLineSize, arrangeBounds.Width, firstInLine, i);

                accumulatedHeight += curLineSize.Height;
                curLineSize = sz;

                if (sz.Width > arrangeBounds.Width) //the element is wider then the constraint - give it a separate line                    
                {
                    ArrangeLine(accumulatedHeight, sz, arrangeBounds.Width, i, ++i);
                    accumulatedHeight += sz.Height;
                    curLineSize = new Size();
                }
                firstInLine = i;
            }
            else //continue to accumulate a line
            {
                curLineSize.Width += sz.Width;
                curLineSize.Height = Math.Max(sz.Height, curLineSize.Height);
            }
        }

        if (firstInLine < children.Count)
            ArrangeLine(accumulatedHeight, curLineSize, arrangeBounds.Width, firstInLine, children.Count);

        return arrangeBounds;
    }

    private void ArrangeLine(double y, Size lineSize, double boundsWidth, int start, int end)
    {
        double x = 0;
        if (this.HorizontalContentAlignment == HorizontalAlignment.Center)
        {
            x = (boundsWidth - lineSize.Width) / 2;
        }
        else if (this.HorizontalContentAlignment == HorizontalAlignment.Right)
        {
            x = (boundsWidth - lineSize.Width);
        }

        UIElementCollection children = InternalChildren;
        for (int i = start; i < end; i++)
        {
            UIElement child = children[i];
            child.Arrange(new Rect(x, y, child.DesiredSize.Width, lineSize.Height));
            x += child.DesiredSize.Width;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-30T13:23:57.380

不幸的是，股票 WrapPanel 不会满足您的要求，因为它的目的是在包装之前水平（或垂直）填充所有可用空间。您可能必须设计自己的 WrapPanel 来处理这种情况。您可以从[显示如何创建自己的 WrapPanel 的示例](http://msdn.microsoft.com/en-us/library/ms771773.aspx)开始。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-10T11:47:56.250

带有 VerticalContentAlignment 的版本（用于垂直面板）：

```
public class AlignableWrapPanel : Panel {
    public AlignableWrapPanel() {
        _orientation = Orientation.Horizontal;
    }

    private static bool IsWidthHeightValid(object value) {
        var v = (double)value;
        return (double.IsNaN(v)) || (v >= 0.0d && !double.IsPositiveInfinity(v));
    }

    public static readonly DependencyProperty ItemWidthProperty = DependencyProperty.Register("ItemWidth", typeof(double),
            typeof(AlignableWrapPanel), new FrameworkPropertyMetadata(double.NaN, FrameworkPropertyMetadataOptions.AffectsMeasure),
            IsWidthHeightValid);

    [TypeConverter(typeof(LengthConverter))]
    public double ItemWidth {
        get { return (double)GetValue(ItemWidthProperty); }
        set { SetValue(ItemWidthProperty, value); }
    }

    public static readonly DependencyProperty ItemHeightProperty = DependencyProperty.Register("ItemHeight", typeof(double),
            typeof(AlignableWrapPanel), new FrameworkPropertyMetadata(double.NaN, FrameworkPropertyMetadataOptions.AffectsMeasure),
            IsWidthHeightValid);

    [TypeConverter(typeof(LengthConverter))]
    public double ItemHeight {
        get { return (double)GetValue(ItemHeightProperty); }
        set { SetValue(ItemHeightProperty, value); }
    }

    public static readonly DependencyProperty OrientationProperty = StackPanel.OrientationProperty.AddOwner(typeof(AlignableWrapPanel),
            new FrameworkPropertyMetadata(Orientation.Horizontal, FrameworkPropertyMetadataOptions.AffectsMeasure, OnOrientationChanged));

    public Orientation Orientation {
        get { return _orientation; }
        set { SetValue(OrientationProperty, value); }
    }

    private static void OnOrientationChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) {
        var p = (AlignableWrapPanel)d;
        p._orientation = (Orientation)e.NewValue;
    }

    private Orientation _orientation;

    private struct UvSize {
        internal UvSize(Orientation orientation, double width, double height) {
            U = V = 0d;
            _orientation = orientation;
            Width = width;
            Height = height;
        }

        internal UvSize(Orientation orientation) {
            U = V = 0d;
            _orientation = orientation;
        }

        internal double U;
        internal double V;
        private readonly Orientation _orientation;

        internal double Width {
            get { return (_orientation == Orientation.Horizontal ? U : V); }
            private set { if (_orientation == Orientation.Horizontal) U = value; else V = value; }
        }

        internal double Height {
            get { return (_orientation == Orientation.Horizontal ? V : U); }
            private set { if (_orientation == Orientation.Horizontal) V = value; else U = value; }
        }
    }

    protected override Size MeasureOverride(Size constraint) {
        var curLineSize = new UvSize(Orientation);
        var panelSize = new UvSize(Orientation);
        var uvConstraint = new UvSize(Orientation, constraint.Width, constraint.Height);
        var itemWidth = ItemWidth;
        var itemHeight = ItemHeight;
        var itemWidthSet = !double.IsNaN(itemWidth);
        var itemHeightSet = !double.IsNaN(itemHeight);

        var childConstraint = new Size(
                (itemWidthSet ? itemWidth : constraint.Width),
                (itemHeightSet ? itemHeight : constraint.Height));

        var children = InternalChildren;

        for (int i = 0, count = children.Count; i < count; i++) {
            var child = children[i];
            if (child == null) continue;

            //Flow passes its own constrint to children 
            child.Measure(childConstraint);

            //this is the size of the child in UV space 
            var sz = new UvSize(
                    Orientation,
                    (itemWidthSet ? itemWidth : child.DesiredSize.Width),
                    (itemHeightSet ? itemHeight : child.DesiredSize.Height));

            if (curLineSize.U + sz.U > uvConstraint.U) {
                //need to switch to another line 
                panelSize.U = Math.Max(curLineSize.U, panelSize.U);
                panelSize.V += curLineSize.V;
                curLineSize = sz;

                if (!(sz.U > uvConstraint.U)) continue;
                //the element is wider then the constrint - give it a separate line
                panelSize.U = Math.Max(sz.U, panelSize.U);
                panelSize.V += sz.V;
                curLineSize = new UvSize(Orientation);
            } else {
                //continue to accumulate a line
                curLineSize.U += sz.U;
                curLineSize.V = Math.Max(sz.V, curLineSize.V);
            }
        }

        //the last line size, if any should be added 
        panelSize.U = Math.Max(curLineSize.U, panelSize.U);
        panelSize.V += curLineSize.V;

        //go from UV space to W/H space
        return new Size(panelSize.Width, panelSize.Height);
    }

    protected override Size ArrangeOverride(Size finalSize) {
        var firstInLine = 0;
        var itemWidth = ItemWidth;
        var itemHeight = ItemHeight;
        double accumulatedV = 0;
        var itemU = (Orientation == Orientation.Horizontal ? itemWidth : itemHeight);
        var curLineSize = new UvSize(Orientation);
        var uvFinalSize = new UvSize(Orientation, finalSize.Width, finalSize.Height);
        var itemWidthSet = !double.IsNaN(itemWidth);
        var itemHeightSet = !double.IsNaN(itemHeight);
        var useItemU = (Orientation == Orientation.Horizontal ? itemWidthSet : itemHeightSet);

        var children = InternalChildren;

        for (int i = 0, count = children.Count; i < count; i++) {
            var child = children[i];
            if (child == null) continue;

            var sz = new UvSize(
                    Orientation,
                    (itemWidthSet ? itemWidth : child.DesiredSize.Width),
                    (itemHeightSet ? itemHeight : child.DesiredSize.Height));

            if (curLineSize.U + sz.U > uvFinalSize.U) {
                //need to switch to another line 
                ArrangeLine(finalSize, accumulatedV, curLineSize, firstInLine, i, useItemU, itemU);

                accumulatedV += curLineSize.V;
                curLineSize = sz;

                if (sz.U > uvFinalSize.U) {
                    //the element is wider then the constraint - give it a separate line 
                    //switch to next line which only contain one element 
                    ArrangeLine(finalSize, accumulatedV, sz, i, ++i, useItemU, itemU);

                    accumulatedV += sz.V;
                    curLineSize = new UvSize(Orientation);
                }

                firstInLine = i;
            } else {
                //continue to accumulate a line
                curLineSize.U += sz.U;
                curLineSize.V = Math.Max(sz.V, curLineSize.V);
            }
        }

        //arrange the last line, if any
        if (firstInLine < children.Count) {
            ArrangeLine(finalSize, accumulatedV, curLineSize, firstInLine, children.Count, useItemU, itemU);
        }

        return finalSize;
    }

    private void ArrangeLine(Size finalSize, double v, UvSize line, int start, int end, bool useItemU, double itemU) {
        double u;
        var isHorizontal = Orientation == Orientation.Horizontal;

        if (_orientation == Orientation.Vertical) {
            switch (VerticalContentAlignment) {
                case VerticalAlignment.Center:
                    u = (finalSize.Height - line.U) / 2;
                    break;
                case VerticalAlignment.Bottom:
                    u = finalSize.Height - line.U;
                    break;
                default:
                    u = 0;
                    break;
            }
        } else {
            switch (HorizontalContentAlignment) {
                case HorizontalAlignment.Center:
                    u = (finalSize.Width - line.U) / 2;
                    break;
                case HorizontalAlignment.Right:
                    u = finalSize.Width - line.U;
                    break;
                default:
                    u = 0;
                    break;
            }
        }

        var children = InternalChildren;
        for (var i = start; i < end; i++) {
            var child = children[i];
            if (child == null) continue;
            var childSize = new UvSize(Orientation, child.DesiredSize.Width, child.DesiredSize.Height);
            var layoutSlotU = (useItemU ? itemU : childSize.U);
            child.Arrange(new Rect(
                    isHorizontal ? u : v,
                    isHorizontal ? v : u,
                    isHorizontal ? layoutSlotU : line.V,
                    isHorizontal ? line.V : layoutSlotU));
            u += layoutSlotU;
        }
    }

    public static readonly DependencyProperty HorizontalContentAlignmentProperty = DependencyProperty.Register(nameof(HorizontalContentAlignment), typeof(HorizontalAlignment),
            typeof(AlignableWrapPanel), new FrameworkPropertyMetadata(HorizontalAlignment.Left, FrameworkPropertyMetadataOptions.AffectsArrange));

    public HorizontalAlignment HorizontalContentAlignment {
        get { return (HorizontalAlignment)GetValue(HorizontalContentAlignmentProperty); }
        set { SetValue(HorizontalContentAlignmentProperty, value); }
    }

    public static readonly DependencyProperty VerticalContentAlignmentProperty = DependencyProperty.Register(nameof(VerticalContentAlignment), typeof(VerticalAlignment),
            typeof(AlignableWrapPanel), new FrameworkPropertyMetadata(VerticalAlignment.Top, FrameworkPropertyMetadataOptions.AffectsArrange));

    public VerticalAlignment VerticalContentAlignment {
        get { return (VerticalAlignment)GetValue(VerticalContentAlignmentProperty); }
        set { SetValue(VerticalContentAlignmentProperty, value); }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-30T13:25:12.790

简单的答案是您无法将 WrapPanel 的内容居中对齐。您可以将面板本身居中对齐，但最后一行仍将在面板内左对齐。

替代建议：

将网格与行和列一起使用。如果您没有动态地将项目添加到集合中，这可能会很好地工作。

创建您自己的 WrapPanel 版本，按照您需要的方式工作。[此 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms754152.aspx#Panels_custom_panel_elements)描述了面板的工作原理，并包含有关创建自定义面板的部分。它还具有指向示例自定义面板的链接。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-03T13:04:33.923

这是 Silverlight 版本

特别感谢`@DTig`，

```
using System.Windows.Controls;
using System.Windows;
using Telerik.Windows;
using System;
using System.Linq;

public class AlignableWrapPanel : Panel
{
    public HorizontalAlignment HorizontalContentAlignment
    {
        get { return (HorizontalAlignment)GetValue(HorizontalContentAlignmentProperty); }
        set { SetValue(HorizontalContentAlignmentProperty, value); }
    }

    public static readonly DependencyProperty HorizontalContentAlignmentProperty =
        DependencyProperty.Register("HorizontalContentAlignment", typeof(HorizontalAlignment), typeof(AlignableWrapPanel), new FrameworkPropertyMetadata(HorizontalAlignment.Left, FrameworkPropertyMetadataOptions.AffectsArrange));

    protected override Size MeasureOverride(Size constraint)
    {
        Size curLineSize = new Size();
        Size panelSize = new Size();

        UIElementCollection children = base.Children;

        for (int i = 0; i < children.Count; i++)
        {
            UIElement child = children[i] as UIElement;

            // Flow passes its own constraint to children
            child.Measure(constraint);
            Size sz = child.DesiredSize;

            if (curLineSize.Width + sz.Width > constraint.Width) //need to switch to another line
            {
                panelSize.Width = Math.Max(curLineSize.Width, panelSize.Width);
                panelSize.Height += curLineSize.Height;
                curLineSize = sz;

                if (sz.Width > constraint.Width) // if the element is wider then the constraint - give it a separate line                    
                {
                    panelSize.Width = Math.Max(sz.Width, panelSize.Width);
                    panelSize.Height += sz.Height;
                    curLineSize = new Size();
                }
            }
            else //continue to accumulate a line
            {
                curLineSize.Width += sz.Width;
                curLineSize.Height = Math.Max(sz.Height, curLineSize.Height);
            }
        }

        // the last line size, if any need to be added
        panelSize.Width = Math.Max(curLineSize.Width, panelSize.Width);
        panelSize.Height += curLineSize.Height;

        return panelSize;
    }

    protected override Size ArrangeOverride(Size arrangeBounds)
    {
        int firstInLine = 0;
        Size curLineSize = new Size();
        double accumulatedHeight = 0;
        UIElementCollection children = this.Children;

        for (int i = 0; i < children.Count; i++)
        {
            Size sz = children[i].DesiredSize;

            if (curLineSize.Width + sz.Width > arrangeBounds.Width) //need to switch to another line
            {
                ArrangeLine(accumulatedHeight, curLineSize, arrangeBounds.Width, firstInLine, i);

                accumulatedHeight += curLineSize.Height;
                curLineSize = sz;

                if (sz.Width > arrangeBounds.Width) //the element is wider then the constraint - give it a separate line                    
                {
                    ArrangeLine(accumulatedHeight, sz, arrangeBounds.Width, i, ++i);
                    accumulatedHeight += sz.Height;
                    curLineSize = new Size();
                }
                firstInLine = i;
            }
            else //continue to accumulate a line
            {
                curLineSize.Width += sz.Width;
                curLineSize.Height = Math.Max(sz.Height, curLineSize.Height);
            }
        }

        if (firstInLine < children.Count)
            ArrangeLine(accumulatedHeight, curLineSize, arrangeBounds.Width, firstInLine, children.Count);

        return arrangeBounds;
    }

    private void ArrangeLine(double y, Size lineSize, double boundsWidth, int start, int end)
    {
        double x = 0;
        if (this.HorizontalContentAlignment == HorizontalAlignment.Center)
        {
            x = (boundsWidth - lineSize.Width) / 2;
        }
        else if (this.HorizontalContentAlignment == HorizontalAlignment.Right)
        {
            x = (boundsWidth - lineSize.Width);
        }

        UIElementCollection children = Children;
        for (int i = start; i < end; i++)
        {
            UIElement child = children[i];
            var rect = new System.Windows.Rect(x, y, child.DesiredSize.Width, lineSize.Height);
            child.Arrange(rect);
            x += child.DesiredSize.Width;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-21T20:42:36.113

我需要一个可以拉伸其内容的 WrapPanel，因此基于[https://stackoverflow.com/a/7747002/121122](https://stackoverflow.com/a/7747002/121122)和一些摆弄我想出了这个：

```
public class AlignableWrapPanel : Panel
{
    public HorizontalAlignment HorizontalContentAlignment
    {
        get => (HorizontalAlignment)GetValue(HorizontalContentAlignmentProperty);
        set => SetValue(HorizontalContentAlignmentProperty, value);
    }

    public static readonly DependencyProperty HorizontalContentAlignmentProperty = DependencyProperty.Register(
        nameof(HorizontalContentAlignment),
        typeof(HorizontalAlignment),
        typeof(AlignableWrapPanel),
        new FrameworkPropertyMetadata(HorizontalAlignment.Left, FrameworkPropertyMetadataOptions.AffectsArrange));

    protected override Size MeasureOverride(Size constraint)
    {
        var curLineSize = new Size();
        var panelSize = new Size();

        var children = InternalChildren;

        for (var i = 0; i < children.Count; i++)
        {
            var child = children[i];

            // flow passes its own constraint to children
            child.Measure(constraint);
            var sz = child.DesiredSize;

            if (curLineSize.Width + sz.Width > constraint.Width) // need to switch to another line
            {
                panelSize.Width = Math.Max(curLineSize.Width, panelSize.Width);
                panelSize.Height += curLineSize.Height;
                curLineSize = sz;

                if (sz.Width > constraint.Width) // if the element is wider then the constraint - give it a separate line                    
                {
                    panelSize.Width = Math.Max(sz.Width, panelSize.Width);
                    panelSize.Height += sz.Height;
                    curLineSize = new Size();
                }
            }
            else // continue to add to the line
            {
                curLineSize.Width += sz.Width;
                curLineSize.Height = Math.Max(sz.Height, curLineSize.Height);
            }
        }

        // the last line size, if any need to be added
        panelSize.Width = Math.Max(curLineSize.Width, panelSize.Width);
        panelSize.Height += curLineSize.Height;

        return panelSize;
    }

    protected override Size ArrangeOverride(Size arrangeBounds)
    {
        var firstInLine = 0;
        var curLineSize = new Size();
        var accumulatedHeight = 0D;
        var children = InternalChildren;

        for (var i = 0; i < children.Count; i++)
        {
            var desiredSize = children[i].DesiredSize;

            if (curLineSize.Width + desiredSize.Width > arrangeBounds.Width) // need to switch to another line
            {
                ArrangeLine(accumulatedHeight, curLineSize, arrangeBounds.Width, firstInLine, i);

                accumulatedHeight += curLineSize.Height;
                curLineSize = desiredSize;

                if(
                    desiredSize.Width > arrangeBounds.Width || 
                    children[i] is FrameworkElement element && element.HorizontalAlignment == HorizontalAlignment.Stretch)
                {
                    // the element is wider then the constraint or it stretches - give it a separate line
                    ArrangeLine(accumulatedHeight, desiredSize, arrangeBounds.Width, i, ++i);
                    accumulatedHeight += desiredSize.Height;
                    curLineSize = new Size();
                }
                firstInLine = i;
            }
            else // continue to add to the line
            {
                curLineSize.Width += desiredSize.Width;
                curLineSize.Height = Math.Max(desiredSize.Height, curLineSize.Height);
            }
        }

        if (firstInLine < children.Count)
        {
            ArrangeLine(accumulatedHeight, curLineSize, arrangeBounds.Width, firstInLine, children.Count);
        }

        return arrangeBounds;
    }

    private void ArrangeLine(double y, Size lineSize, double boundsWidth, int start, int end)
    {
        var children = InternalChildren;

        var x = 0D;
        if (HorizontalContentAlignment == HorizontalAlignment.Center)
        {
            x = (boundsWidth - lineSize.Width) / 2;
        }
        else if (HorizontalContentAlignment == HorizontalAlignment.Right)
        {
            x = boundsWidth - lineSize.Width;
        }

        var stretchChildren = new List<UIElement>();
        for (var i = start; i < end; i++)
        {
            var child = children[i];
            if (child is FrameworkElement element && element.HorizontalAlignment == HorizontalAlignment.Stretch)
            {
                stretchChildren.Add(child);
            }
        }

        var spaceAvailableForStretchChildren = boundsWidth - lineSize.Width;
        var spaceAvailablePerStretchChild = 0D;
        if (stretchChildren.Any())
        {
            x = 0; // all available space will be filled so start at 0
            spaceAvailablePerStretchChild = spaceAvailableForStretchChildren / stretchChildren.Count;
            spaceAvailablePerStretchChild = spaceAvailablePerStretchChild >= 0 ? spaceAvailablePerStretchChild : 0;
        }

        for (var i = start; i < end; i++)
        {
            var child = children[i];
            double itemWidth;
            if(stretchChildren.Contains(child))
            {
                itemWidth = child.DesiredSize.Width + spaceAvailablePerStretchChild;
            }
            else
            {
                itemWidth = child.DesiredSize.Width;
            }

            child.Arrange(new Rect(x, y, itemWidth, lineSize.Height));
            x += itemWidth;
        }
    }
} 
```

# asp.net - 使用 ADAM 验证 DMZ 区域中的用户

> ID：806786
> 
> 赞同：0
> 
> 时间：2009-04-30T13:03:56.320
> 
> 标签：asp.net, active-directory, adam

国际空间站和 ASP.NET。

在我的设置中，我有一个必须可以从以下位置访问的 Web 应用程序：

1.  一个拥有 3000 名用户的组织

2.  200 个外部用户

该解决方案托管在组织 DMZ 中。

最初我希望为 3000 个组织用户进行基于 AD 的身份验证，这样他们就不需要记住更多的密码。

现在托管服务提供商告诉我，由于安全限制，我无法访问 AD。

我有哪些选择？

ADAM 是一种可行的方法吗？即从 org AD 同步到 ADAM？它有效吗？

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T21:01:01.570

假设您不想要自定义代码解决方案，您可能正在寻找像[AdamSync](http://technet.microsoft.com/en-us/library/cc786455.aspx)这样的东西来让您的 AD 用户进入 ADAM。

# security - 避免在 Web 应用程序的源代码中暴露主键？

> ID：806787
> 
> 赞同：26
> 
> 时间：2009-04-30T13:03:57.990
> 
> 标签：security, database-design, architecture, web-applications, data-modeling

我经常遇到通过选择框等表单公开内部数据库主键的 Web 应用程序。有时我会看到 javascript 与切换逻辑的 int 或 guid 魔术值匹配。

这是避免泄露 Web 应用程序中行的所有内部标识符的最佳实践，以防止外人过多地了解您的系统并可能使用它来利用您的系统。如果是这样，解决此问题的最佳方法是什么？

您是否应该向 Web 应用程序公开一些可以转换回主键的其他值？

谢谢

**编辑**

在一个完美的世界里，你的应用程序将是 100% 安全的，所以如果你把事情弄得模糊不清也没关系。显然情况并非如此，所以我们是否应该谨慎行事而不公开这些信息？

有人指出 Stackoverflow 可能会在 Url 中公开一个键，这可能很好。但是，企业应用程序的考虑因素是否不同？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-04-30T13:13:16.640

我不同意公开主键是一个问题的立场。如果你让它们对用户可见，这可能是一个问题，因为它们在系统之外被赋予了意义，这通常是你试图避免的。

但是使用 ID 作为组合框列表项的值？去吧，我说。与某个中间值进行转换有什么意义？您可能没有要使用的唯一密钥。这样的翻译引入了更多潜在的错误。

只是不要忽视安全。

如果说你向用户展示了 6 个项目（ID 1 到 6），永远不要假设你只会从用户那里得到这些值。有人可能会尝试通过发回 ID 7 来破坏安全性，因此您仍然必须验证您返回的内容是否被允许。

但完全避免这种情况？没门。没必要。

正如对另一个答案的评论所说，请查看此处的 URL。这包括毫无疑问是 SO 数据库中问题的主键。将密钥公开用于技术用途是完全可以的。

此外，如果您确实使用了一些代理值，那不一定更安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-30T13:07:37.560

是的，你所有的问题。我同意您的主张，即您应该“*向 Web 应用程序公开一些其他可以转换回主键的值*”

否则，您可以向潜在的问题敞开心扉。

**编辑**

关于“*没有理由为微不足道的键受到惩罚。现在查看浏览器的 URL，我敢打赌你会看到一个键！* ”的评论。

我明白你在说什么，是的，我确实在 SO URL 中看到了密钥，并同意它可能确实引用了数据库 PK。我承认在这样的情况下，如果没有更好的选择可能没关系。

我仍然更愿意公开 PK 以外的东西——具有语义价值的东西。问题的标题也在 URL 中，但由于这很难验证是唯一的（或在用户之间口头传递），它不能单独可靠地使用。

然而，当查看“标签”URL（即[https://stackoverflow.com/questions/tagged/java+j2ee](https://stackoverflow.com/questions/tagged/java+j2ee)）时，不会公开 PK，而是使用标签名称。就个人而言，我更喜欢这种方法，并会为此而努力。

我还想补充一点，PK 指向的数据有时会随时间而变化。我在一个系统上工作过，其中一个表填充了来自离线进程的信息 - 即每月统计数据，其中数据库表内容在月底下降并重新填充了新数据。

如果数据以不同的顺序添加到数据库中，特定数据点的 PK 将发生变化，并且从上个月保存到该数据的任何书签现在将指向不同的数据集。

这是公开 PK 会“破坏”与应用程序安全性无关的应用程序的一个实例。生成的密钥并非如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-30T13:08:05.670

是的，暴露密钥是可以用作攻击的信息。特别是如果它们是可预测的。

如果您认为信息很敏感，请使用不同的键/列。

例如，为了避免显示您拥有的用户数量，请考虑：

site.com/user/123 与 site.com/user/username

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T13:38:51.433

一如既往，“这取决于”。如果某人可以通过知道您每（小时/天/月）执行多少交易来获得价值（例如），并且您将交易 ID 公开为单调递增的数字，那么这是一种风险。

正如其他人所说，对于值的下拉列表，通常没有问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T13:55:17.353

公开除主键之外的其他值不会避免您检查安全性的负担。事实上，如果您的安全存在漏洞，“邪恶”用户可能仍会通过更改 url 中的值来访问他们不打算访问的对象。他们可能对使用哪些值没有多少线索，但随机选择值，他们可能会很幸运。

如果您想以这种方式提高安全性，您将不得不在 url 中使用大随机字符串（以使猜测变得困难），而不是 id，并在后台使用将随机值与好的 id 匹配的间接表。

我认为大多数时候不值得麻烦。

也就是说，这对于您想要“隐蔽安全”的情况很有用，例如当您公开更改用户密码的页面时，不需要登录（对于丢失密码的用户）。在这种情况下，您还应该将限制有效日期与您的密钥相关联。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-02T11:35:11.133

主键与代理键或内部键不同，尽管有一些重叠。与内部密钥相反的是自然密钥。很多时候自然键被用作主键。一般来说，没有理由隐藏自然密钥，除非我们正在处理隐私问题。

我认为，您真正的问题是是否应该向用户公开内部密钥。答案是“视情况而定”。对于大多数用户社区，公开内部密钥将导致该密钥被用作自然密钥。当内部键和表行的主题之间的一对一映射发生故障时，这可能并且通常会导致一些混乱。

这种故障只会由于数据管理不善而发生。然而，大多数时候，您必须对现实世界中发生的一些数据管理不善进行计划。你不会计划一个供水系统，只要有水管理不善就会崩溃。您不会计划一个每次出现数据管理不善时都会崩溃的信息系统。

话虽如此，如今大多数数据库设计人员都在为软件供应商工作，并没有看到他们产品的用户因数据管理不善而导致的问题。

# c# - 带有 OLEDB 的 C# 中的 Excel 前缀字符导致更新时出现“条件表达式中的数据类型不匹配”错误

> ID：806813
> 
> 赞同：3
> 
> 时间：2009-04-30T13:08:27.557
> 
> 标签：c#, excel, oledb

从 C# 使用 OLEDB 更新 Excel 文件时，如果原始文件具有隐藏的 PrefixCharacter（在我的情况下为撇号），则会收到错误“标准表达式中的数据类型不匹配”。如果我从原始文件中的单元格中删除撇号，我的应用程序将按预期工作，并且数据会更新而不会出现任何错误。除了在处理文件之前手动删除 PrefixCharacter 之外，有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-05-07T13:52:17.157

几个月前，我也遇到了 OLEDB/Excel 自动化问题：然后我碰巧找到了 EPPlus [http://epplus.codeplex.com/](http://epplus.codeplex.com/)，从那时起我就没有使用过 OLEDB 或与 Excel 的互操作。

它不需要安装 Excel，但它仅适用于 Open Office Xml 格式 (xlsx)，如果这不是您的限制，我会推荐它。

PS：我在 12 月的 SO 上发现了它，当时我遇到了与 Excel [Create Excel (.XLS and .XLSX) file from C#](https://stackoverflow.com/questions/151005/create-excel-xls-and-xlsx-file-from-c)类似（和其他）问题。

# django - Django Admin中的ManyToManyFields

> ID：806815
> 
> 赞同：0
> 
> 时间：2009-04-30T13:08:45.857
> 
> 标签：django, django-admin

我在我的应用程序中使用 Photologue，我真的很喜欢`ManyToManyField`出现在管理应用程序中的选择器（两个多选框带有箭头，用于在选定和非选定状态之间移动项目，以及“全选”和“清除全部”选项）。

我在自己的模型中使用了非常相似的代码，但我的`ManyToManyField`选择器只是显示为普通`<select multiple="multiple" ...>`字段。`admin.py`我在 Photologue 的or中看不到任何特别之处`models.py`，并且这两个应用程序在同一个项目中运行。

我的模型：

```
class Portfolio(models.Model):
    images      = models.ManyToManyField(Photo, related_name='portfolios')
    ... 
```

Photologue的相关型号：

```
class Gallery(models.Model):
    ....
    photos = models.ManyToManyField('Photo',
                                    related_name='galleries',
                                    verbose_name=_('photos'),
                                    null=True, blank=True) 
```

Photologue 的管理员：

```
class GalleryAdmin(admin.ModelAdmin):
    list_display = ('title', 'date_added', 'photo_count', 'is_public')
    list_filter = ['date_added', 'is_public']
    date_hierarchy = 'date_added'
    prepopulated_fields = {'title_slug': ('title',)}
    filter_horizontal = ('photos',) 
```

有人知道我错过了什么吗？如果有帮助，我会发布屏幕截图。

谢谢，

多姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T13:27:49.743

请参阅 django 文档了解[filter_horizo​​ntal](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.filter_horizontal)

> 一个漂亮的不显眼的 JavaScript“过滤器”界面，而不是管理表单中的可用性挑战 <select multiple>。

# wix - 用于编辑 WiX 源文件的 Resharper 实时模板

> ID：806817
> 
> 赞同：1
> 
> 时间：2009-04-30T13:09:08.790
> 
> 标签：wix, resharper, votive

我今天正在编写一些 WiX 文件，其中涉及大量重复输入，因此在我看来，Resharper 的实时模板在这里非常有用。有人知道吗？

我知道编写新的实时模板并不难，所以我可能会在几个小时内回答我自己的问题，但如果有人能指出我已经存在的那些，那就太好了。

作为旁白，任何其他 WiX 编辑技巧将不胜感激:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T15:07:12.763

我实际上只需要几个非常简单的......

用于创建文件组件：

```
 <Component Id="C_$COMP_ID$" Guid="$GUID$">
        <File Id="F_$FILE_ID$" Name="$FILENAME$" />
 </Component> 
```

我将 $GUID$ 连接到“生成新的 guid”宏。

然后是一个更简单的用于创建目录条目的方法：

```
<Directory Id="D_$DIR_NAME$" Name="$NAME$" /> 
```

我在 Live Templates 中发现的方便之处在于能够将其中一个字段分配给剪贴板值，因此在添加新文件时，我可以突出显示文件名并将 ctrl-C 突出显示到剪贴板，然后运行模板，但是它只节省了一点点打字。

下次我编辑 WiX 文件时，我可能会再写一些，我很乐意分享，但它们很容易编写和根据个人喜好进行定制，我不确定是否会有巨大的需求：- )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T13:30:16.820

你在用还愿吗？因为在 wxs 上工作时你会得到 InteliSense。
如果您不使用 Votive，则可以将[Wix XSD 放入 Visual Studio XSD 存储库以获取 InteliSense](http://www.wintellect.com/CS/blogs/jrobbins/archive/2007/10/18/wix-hints-for-new-users-part-1-of-3.aspx)。

# xaml - XAML 缩略图？

> ID：806829
> 
> 赞同：2
> 
> 时间：2009-04-30T13:12:55.253
> 
> 标签：xaml, thumbnails

我可以为 xaml 内容创建缩略图吗？考虑到我有一个幻灯片 xaml 文件：Canvas、ScrollView 等，我想创建一个缩略图（如在 PowerPoint 中）以及我在幻灯片上所做的一切（添加文本块、按钮等）以反映（查看) 在我的缩略图上。

请注意，安德烈。

# c++ - 动态捕获 CPU 和内存使用情况

> ID：806830
> 
> 赞同：6
> 
> 时间：2009-04-30T13:13:07.577
> 
> 标签：c++, performance, shell, memory-management, cpu-usage

我正在运行一个 shell 脚本来执行一个 c++ 应用程序，它可以测量 api 的性能。我可以捕获 api 的延迟（返回给定参数集的值所花费的时间），但我也希望以 5-10 秒的间隔捕获 CPU 和内存使用情况。

有没有办法在不影响系统性能的情况下做到这一点，而且在同一个脚本中也是如此？我发现了许多可以在我们正在运行的脚本之外（独立）执行的示例；但不是我们可以在同一个脚本中做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-09T08:10:04.450

如果您正在寻找动态捕获整个 linux 机器的 CPU 和 Mem 利用率，那么以下命令也可以帮助您：

**中央处理器**

```
vmstat -n 15 10| awk '{now=strftime("%Y-%m-%d %T "); print now $0}'> CPUDataDump.csv & 
```

`vmstat`用于收集 CPU 计数器

`-n`对于延迟值，在本例中为 15，这意味着每 15 秒后，将收集一次统计信息。

然后`10`是间隔的数量，在这个例子中会有 10 次迭代

`awk '{now=strftime("%Y-%m-%d %T "); print now $0}'`这将转储每次迭代的时间戳

最后，转储文件与`&` 继续

**记忆**

```
free -m -s 10 10 | awk '{now=strftime("%Y-%m-%d %T "); print now $0}'> DataDumpMemoryfile.csv & 
```

`free`用于 mem stats 收集

`-m`这是内存单位（您可以使用`-b`字节，`-k`千字节，`-g`千兆字节）

然后`10`是间隔数（在本例中将有 10 次迭代）

`awk'{now=strftime("%Y-%m-%d %T "); print now $0}'`这将转储每次迭代的时间戳

最后，转储`&`继续

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T13:24:32.620

我建议使用 ' [time](http://unixhelp.ed.ac.uk/CGI/man-cgi?time) ' 命令和 ' [vmstat](http://unixhelp.ed.ac.uk/CGI/man-cgi?vmstat) ' 命令。第一个将给出可执行执行的 CPU 使用率和第二个 - 系统的 CPU/内存/IO 的定期（即每秒一次）转储。

例子：

```
time dd if=/dev/zero bs=1K of=/dev/null count=1024000
1024000+0 records in
1024000+0 records out
1048576000 bytes (1.0 GB) copied, 0.738194 seconds, 1.4 GB/s
0.218u 0.519s 0:00.73 98.6%     0+0k 0+0io 0pf+0w <== that's time result 
```

# version-control - 多个项目是否应该有多个 TFS 工作区？

> ID：806833
> 
> 赞同：5
> 
> 时间：2009-04-30T13:13:59.387
> 
> 标签：version-control, tfs

大约 6 个月前，我们从 VSS 迁移到了 TFS。我们存储项目的方式是按类别（Windows 应用程序、Web 应用程序、Infopath、SQLScripts、已弃用）对它们进行分组。在“Windows App”工作区下，我们可能有 3 个 .NET 项目。“Web App”可能有 3 个等等。VSS 更多地用于存储代码存储库，而不是 VSS 可能提供的任何实际功能。

Windows 应用程序（$/Windows 应用程序/工作区）
-->App1
-->App2
-->App3

Web App（$/Web App/工作区）
-->App1
-->App2
-->App3

我的问题是每个项目都有 1 个工作区会更好吗？我认为“是”的原因之一是，如果我在同一个工作区中处理多个项目，当我执行检查未决更改之类的操作时，它将向我显示所有未决更改，包括我目前可能没有工作的其他项目在。

Web App/App1（$/Web App/App1 工作区）
Web App/App2（$/Web App/App2 工作区）
Web App/App3（$/Web App/App3 工作区）

我想我正在寻找最佳实践响应。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-30T13:18:26.927

在我正在处理的项目中，我们有几个分支用于不同版本的应用程序，我（个人）为每个分支创建不同的工作区。每个分支本身就是一个“项目”。

这很好，因为它将您的待定更改本地化到该工作区 - 所以当我在分支 2 上工作时，我对分支 1 的待定更改不会出现。

**编辑：**我刚刚阅读了您答案的最后一部分 - 是的，每个工作区的待处理更改是一个非常好的功能，我认为以这种方式做事是最佳实践。

# python - Django：登录后重定向到上一页

> ID：806835
> 
> 赞同：186
> 
> 时间：2009-04-30T13:14:14.860
> 
> 标签：python, django

我正在尝试建立一个简单的网站，其登录功能与 SO 上的非常相似。用户应该能够以匿名用户的身份浏览该站点，并且每个页面上都会有一个登录链接。单击登录链接时，用户将被带到登录表单。成功登录后，用户应返回到他首先单击登录链接的页面。我猜我必须以某种方式将当前页面的 url 传递给处理登录表单的视图，但我无法真正让它工作。

编辑：我想通了。我通过将当前页面作为 GET 参数传递到登录表单，然后使用“下一步”重定向到该页面。谢谢！

编辑 2：我的解释似乎不清楚，所以这里要求的是我的代码：假设我们在页面 foo.html 上并且我们没有登录。现在我们希望在 foo.html 上有一个链接登录.html。在那里我们可以登录，然后被重定向回 foo.html。foo.html 上的链接如下所示：

```
 <a href='/login/?next={{ request.path }}'>Login</a> 
```

现在我编写了一个自定义登录视图，看起来有点像这样：

```
def login_view(request):
   redirect_to = request.REQUEST.get('next', '')
   if request.method=='POST':
      #create login form...
      if valid login credentials have been entered:
         return HttpResponseRedirect(redirect_to)  
   #...
   return render_to_response('login.html', locals()) 
```

login.html 中的重要行：

```
<form method="post" action="./?next={{ redirect_to }}"> 
```

所以是的，差不多就是这样，希望能说清楚。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2009-11-10T22:09:23.130

您不需要为此创建额外的视图，该功能已经内置。

首先每个带有登录链接的页面都需要知道当前路径，最简单的方法是在settings.py中添加请求上下文预处理器（前4个是默认的），那么请求对象就会在每个请求中可用：

**设置.py：**

```
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.core.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.request",
) 
```

然后添加您想要登录链接的模板：

**base.html：**

```
<a href="{% url django.contrib.auth.views.login %}?next={{request.path}}">Login</a> 
```

这将向指向当前页面的登录页面添加一个 GET 参数。

然后登录模板可以像这样简单：

**注册/login.html：**

```
{% block content %}
<form method="post" action="">
  {{form.as_p}}
<input type="submit" value="Login">
</form>
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-27T23:33:01.107

要支持带有参数/值的完整网址，您需要：

```
?next={{ request.get_full_path|urlencode }} 
```

而不仅仅是：

```
?next={{ request.path }} 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-04-30T17:22:31.020

这可能不是“最佳实践”，但我之前已经成功使用过：

```
return HttpResponseRedirect(request.META.get('HTTP_REFERER','/')) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-04-30T13:30:58.660

Django 的内置身份验证以您想要的方式工作。

他们的登录页面包含一个`next`查询字符串，该字符串是登录后要返回的页面。

看看[http://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.login_required](http://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.login_required)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T13:58:45.783

我通过将当前页面作为 GET 参数传递到登录表单，然后使用“下一步”重定向到该页面。谢谢！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-03-05T16:00:32.097

我遇到了同样的问题。此解决方案允许我继续使用通用登录视图：

```
urlpatterns += patterns('django.views.generic.simple',
    (r'^accounts/profile/$', 'redirect_to', {'url': 'generic_account_url'}),
) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-02-02T09:59:51.307

在`registration/login.html`（嵌套在`templates`文件夹中）中，如果您插入以下行，该页面将呈现为 Django 的原始管理员登录页面：

```
{% include "admin/login.html" %} 
```

**注意：该文件应仅包含上述行。**

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-04-30T13:31:30.590

请参阅 django 文档以获取[views.login()](http://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.views.login)，您在输入表单上提供“下一个”值（作为隐藏字段）以在成功登录后重定向到。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-05-16T20:42:24.123

你也可以这样做

```
<input type="hidden" name="text" value="{% url 'dashboard' %}" /> 
```

# javascript - 将 JS 对象发送到 JSP 页面

> ID：806838
> 
> 赞同：0
> 
> 时间：2009-04-30T13:15:27.713
> 
> 标签：javascript, string, json, jsp, object

我在 JavaScript 文件中有一个 JS 对象。我必须将此对象传递给 JSP 页面。页面拾取该对象并对其进行处理。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T13:19:34.427

与从 Web 浏览器获取任何其他数据到 HTTP 服务器的方式相同。

通过提交表单 / 设置窗口位置 / 使用 XMLHttpRequest / 等将其编码到 HTTP 请求中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T19:23:49.170

您需要首先解决几个问题，您是否以 AJAX 风格的请求执行此操作？这是表单提交吗？在客户端/服务器之间来回传递 JSON 对象的页面会话中是否会有持续的交互？

让我们来解决表单提交的简单案例，一旦你知道了，你应该能够让其余的案例继续下去，因为它们只是这个基本案例的“扩展”。假设您有一些表单可以在某个字段中提交数据：

```
<form name='my_form' id='my_ford_id'>
  <input type='hidden' name='my_input_field' />
</form> 
```

然后在某个时间点你有一段代码可以执行并且你有你的 JSON 对象

```
function myFunction() {
  var json_data = getJsonData();
  document.forms['my_form']['my_input_field'].value = json_data;
  document.forms['my_form'].submit();
} 
```

然后，您将在 JSP 端接收这些数据作为表单字段内的 JSON 字符串，此时您需要处理它，假设您有某种可用的 JSON 库，代码可能看起来像这样：

```
<%
  String myInputField = request.getParameter("my_input_field");
  if(myInputField != null) {
    try {
      JSONObject myObject = new JSONObject(myInputField);
    }
    catch(JSONException e) {

    }
  }
%> 
```

如果您需要“AJAX”样式的交互，您将在页面中发出许多这样的请求，但从根本上讲，它会退回到提交数据的原始问题。由于您在此示例中使用表单和 JSP，因此您不必担心任何编码问题，浏览器/服务器会为您处理这些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-10-11T23:16:57.510

当您发送 json 对象时，servlet 以与接收提交表单发送的数据相同的方式接收它，例如，如果您发送一个带有 value="getCountries" 的变量“action”

```
var option = {
  "action": "getCountries"
};
$.getJSON('YourServlet', option, function() {
  //hadle the result returned by servlet
}); 
```

默认方法是 GET，在 servlet 中处理请求就像处理普通请求一样

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

  String action = request.getParameter("action");
  if (action != null) {
    if (action.equals("getCountries")) {

      List coutries = getAllICountries(request); //get the countries
      String json = new Gson().toJson(coutries);
      response.setContentType("application/json");
      response.setCharacterEncoding("utf-8");

      response.getWriter().write(json);
      return;
    }
  }
} 
```

注意我们如何将结果从 servlet 返回到 javascript，我们返回一个 json 对象。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-08-19T11:28:05.963

[“JSON”](http://www.json.org/)站点帮助您在 JSp/java 中管理 Json 对象。您必须将从 javascript 获得的字符串转换为 json 对象。然后轻松管理它。

# visual-studio - 为 VS 2008 添加解决方案文件夹？

> ID：806842
> 
> 赞同：0
> 
> 时间：2009-04-30T13:16:27.180
> 
> 标签：visual-studio, visual-studio-2008, visual-studio-2005

我刚开始使用 VS 2008 Express。我注意到我无法像 VS 2005 Prof. 那样在解决方案中添加新的解决方案文件夹。不确定此功能是否在 Express 版本中被禁用。

在 VS 2005 中，我还可以在虚拟解决方案文件夹中添加项目。这使我的项目在一个组织良好的树中。但是，我无法在 VS 2008 的解决方案中添加虚拟文件夹（表达？）。我不确定是否可以在虚拟文件夹中添加项目（如果可能的话在教授中）。

我什至尝试使用文本编辑器在 sln 文件中添加文件夹结构，如 VS 2005 sln 文件。但是 VS 2008 抱怨虚拟文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T14:08:12.890

我在您的帖子中找不到问题，但是是的，快速版禁用了此功能。认为这是为更高级别掏钱的另一个原因。

# c++ - 在 C++ 中查询类的静态成员变量

> ID：806846
> 
> 赞同：1
> 
> 时间：2009-04-30T13:17:31.920
> 
> 标签：c++, class, variables, static

对不起，如果这个问题对这里的许多人来说似乎微不足道。

在 C++ 代码中有如下内容：

```
class Foo
{
public:
   static int bands;
   ...
   ...
private:
   ...
   ...

}//class definition ends

int Foo::bands; //Note: here its not initialized to any value! 
```

1.  当“bands”在类中声明为静态时，为什么再次需要上述语句？

2.  静态变量也可以在任何类中声明为私有成员变量吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T13:23:16.960

*C++ 注意到声明*和*定义*之间的区别。 `bands`在类中声明，但未定义。

当您定义该类型的对象时，将定义一个非静态数据成员，但由于静态成员不是任何特定对象的一部分，它需要它自己的定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T13:20:20.010

a) 它是必需的，因为这是语言的设计方式。

b) 静态变量由它们的默认构造函数初始化，或者对于内置类型初始化为零。

c) 是的，它们可以（并且通常是）私有的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T13:27:36.780

看看[这个问题。](https://stackoverflow.com/questions/743203/accessing-static-class-variables-in-c/743205#743205)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T13:29:55.930

它与 obj 文件、它们的使用方式以及最终如何通过链接过程发现全局范围变量的内存地址有关。目标文件包含相应 cpp 中定义的所有全局数据和函数的地址。他们以相对的方式布局一些内存，以告诉喜欢者在该文件中的何处可以找到这些全局变量/函数。所以例如

```
function doFoo can be found 0 bytes from beginning of this file
int foo::bands can be found 12 bytes from beginning of this file
etc 
```

如果你以前做过直接的 C，它几乎更容易思考。在纯 C 世界中，您将在更传统的模块化编程意义上做事。您的模块将使用标头和 cpp 定义。标头将使用 extern 关键字定义如下所示的“公共”变量，然后在 cpp 中实例化它。

foo.h

```
extern int bands; 
```

foo.cpp

```
#include "foo.h"
int bands; 
```

foo.obj：

```
int bands can be found 0 bytes from the beginning of this file 
```

“extern”关键字表明该名称是有效的，并且它的地址将在链接时得到解析。每个包含“foo.h”并想使用“bands”全局变量的人现在都可以使用它。在链接时，**链接器**会发现 foo.obj 中存在带。如果您忘记在 foo.obj 中放入“int Bands”，您会得到一个链接器错误，并且必须去解决它。

在 C++ 中，在类声明中使用 static 我类似。您是在告诉用户存在一个名为“foo::bands”的东西，它的存在位置将在链接时得到解决。稍后，链接器看到 foo.obj 中存在 foo::bands，并且所有对 foo::bands 的引用都可以解析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T13:52:09.280

我的理解是，如果您计划在创建类的实例之前使用它，则只需要声明 Foo::bands 。基本上，当您在 C++ 类中声明一个静态变量时，该类的所有实例只存在该变量的一个副本。但是，在声明类的实例之前，您通常不能访问 Foo::bands。

例如：

[指向成员的指针](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v7v91/index.jsp?topic=/com.ibm.vacpp7l.doc/language/ref/clrc13cplr034.htm)

```
#include <iostream>
using namespace std;

class X {
public:
  int a;
  void f(int b) {
    cout << "The value of b is "<< b << endl;
  }
};

int main() {

  // declare pointer to data member
  int X::*ptiptr = &X::a;

  // declare a pointer to member function
  void (X::* ptfptr) (int) = &X::f;

  // create an object of class type X
  X xobject;

  // initialize data member
  xobject.*ptiptr = 10;

  cout << "The value of a is " << xobject.*ptiptr << endl;

  // call member function
  (xobject.*ptfptr) (20);
} 
```

# sql - 从 SQL Server 表中选择具有最大日期的不同行？

> ID：806849
> 
> 赞同：2
> 
> 时间：2009-04-30T13:17:57.270
> 
> 标签：sql, sql-server, tsql, distinct

我需要为一个表获取一组不同的记录以及所有重复项的最大日期。

前任：

```
Select distinct a,b,c, Max(OrderDate) as maxDate
From ABC
Group By a,b,c 
```

问题是我得到了每个不同日期的记录。

前任：

```
aaa, bbb, ccc, Jan 1 2009
aaa, bbb, ccc, Jan 28 2009 
```

我该如何限制这一点，所以我最终只得到：

```
aaa, bbb, ccc Jan 28 2009 
```

我认为问题是团队相处得不好。

编辑：找到导致问题的问题，查询结果符合预期，而不是如上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T13:22:14.357

您的查询或示例结果有问题，因为您描述的内容不应该是可能的。一些实际的 SQL 和实际结果怎么样？

无论如何，您不需要`distinct`那里，因为您选择的只是三个分组列和一个聚合，因此根据定义，您最终会得到所有不同的行。我从来没有尝试过这个，所以在使用这两种方法时可能会有一些不当行为。你试过删除`distinct`吗？是什么让你把它放在那里？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-30T13:22:33.873

```
WITH q AS (
        SELECT  abc.*, ROW_NUMBER() OVER (PARTITION BY a, b, c ORDER BY orderDate DESC) AS rn
        FROM    abc
        )
SELECT  *
FROM    q
WHERE   rn = 1 
```

有一个索引`(a, b, c, orderDate)`（按此顺序）将大大改进此查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T13:29:45.713

如果您运行此查询：

```
select 'ab' as Col1, 'bc' as col2, 'cd' as col3, getdate() as Date
into #temp
insert into #temp
values ('ab','bc','cd','1/15/09')
insert into #temp
values ('aa','bb','cc','1/1/09')
insert into #temp
values ('aa','bb','cc','1/22/09')

select col1,col2,col3,max(date)
from #temp
group by col1,col2,col3 
```

你应该回来：

> aa, bb, cc, 2009-01-22 00:00:00.000
> ab, bc, cd, 2009-04-30 09:23:07.090

您的查询也可以正常工作，因此确实有问题，或者您没有正确传达代码的确切性质。

# asp.net - 在 ASP.NET 项目中与网页设计师合作（使用 SVN）

> ID：806852
> 
> 赞同：3
> 
> 时间：2009-04-30T13:18:33.510
> 
> 标签：asp.net, collaboration

在 ASP.NET 项目中与网页设计师（精通 CSS 和 HTML）协作，同时使用 SVN 保持一切同步的好方法是什么？

*   我们不希望源存储库中的已编译 DLL（即“bin”文件夹）（反正不在主干中）
*   我们不要求设计人员拥有 Visual Studio 或工作构建环境
*   我们希望设计人员能够运行网站（本地或远程）
*   我们希望设计师的更改与 SVN 主干同步

（我们有一个运行 TeamCity 的构建服务器，因此可以进行某种自动化过程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T13:30:08.910

鉴于此评论：

> 是的，但是编译后的应用程序在主干中不可用，我们不希望设计人员必须进行编译

然后我认为您最好的解决方案是使用[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)，这样您就可以拥有一个每小时/每天/但经常构建站点/应用程序的系统，然后是任何“非技术”资源（即那些没有能力的资源或者您不想编译本地版本的人）拥有他们可以随时访问的最新版本的站点。

单独的 CI 并不能解决让您的设计师能够针对“当前开发站点”测试他们的更改的问题 - 也许您可以让 CI 构建脚本构建并发布设计师可以的站点的 zip 或可部署版本然后下载并运行以能够对某些页面/文件等进行更改？

在 stackoverflow 上有[很多与 CI 相关的问题](https://stackoverflow.com/questions/tagged/continuous-integration)，[持续集成服务器](https://stackoverflow.com/questions/140453/continuous-integration-servers)对特定服务器的建议进行了很好的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T13:24:10.610

让他们在同一个房间......这是迄今为止最好的做法。他们应该是同一个“团队”

否则，使用 .net MVC 并让他们设计 .aspx 文件。与您的架构师一起设计概念（页面/主控/控件）

您不需要发布/编译 Web 项目。您也可以复制完整的源代码。所以他们可以解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T13:27:15.283

带有 WebForms 的 ASP.NET 对于设计人员来说非常难以使用，因为 ASPX 试图变得太聪明，这不是必需的。我的意思是，看看`DataGrid`：这真是一团糟，HTML 输出更加混乱。没有设计师会同意使用一些奇怪的属性`Font.Overline = true`来代替真正的旧 CSS。而且，如果您决定放弃所有花哨的控件而使用简单`Repeater`的 . 这带来的是...

ASP.NET MVC，在 OOP 设计和图形/信息设计方面都*更好*。

# spell-checking - 在编写拼写检查器时我们应该考虑哪些事项？

> ID：806861
> 
> 赞同：2
> 
> 时间：2009-04-30T13:22:04.030
> 
> 标签：spell-checking

我想写一个非常简单的拼写检查器。拼写检查器将尝试将输入单词与字典中的等效单词进行匹配。

可以做些什么来找到那些“等价词”？可以对两个单词进行什么分析以将它们标记为等效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-30T13:25:53.647

在投入太多试图解开之前，我首先要看一下已经存在的实现，比如[Aspell](http://aspell.net/)或[netspell](http://www.codeproject.com/KB/string/netspell.aspx)，主要有两个原因

1.  重新发明轮子没有多大意义。拼写检查比最初看起来要复杂得多，并且在已经完成的工作的基础上进行构建是有意义的
2.  如果您的兴趣是找出如何去做，如果您决定实现自己的源代码和社区将是一个很大的好处

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-30T13:47:48.167

很大程度上取决于您的用例。例如：

*   你的字典是不是很小（大约二十个字）？在这种情况下，最好预先计算附近所有可能的错误单词并使用表/哈希查找。
*   你的错误模型是什么？Aspell 至少有两个（一个用于由键盘上附近的字母引起的拼写错误，另一个用于由单词发音方式引起的拼写错误）。
*   你的字典有多动态？你能负担得起为了获得有效的检索而做大量的准备工作吗？
*   除了编辑距离之外，您可能还需要像[Double Metaphone这样的“词等效”度量。](http://en.wikipedia.org/wiki/Double_Metaphone)
*   您可以通过阅读[Peter Norvig 对拼写更正的精彩描述](http://norvig.com/spell-correct.html)获得一些感受。
*   当然，只要有可能，就窃取代码。不要无缘无故地重新发明轮子——原因可能是一个非常特殊的领域，你的用户犯拼写错误的特殊方式，或者只是为了了解它是如何完成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T13:27:02.850

[编辑距离](http://en.wikipedia.org/wiki/Edit_distance)是编写拼写检查器所需的理论。你还需要一本字典。大多数 UNIX 系统都带有已经为您的语言环境安装的字典。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T13:50:08.987

我刚刚完成了一个拼写检查器，并使用了以下组合来获取“建议”单词的列表

*   “拼写错误”单词的语音散列以查找相同字典散列真实单词的散列（对于 java，请查看 Apache Commons Codec 以获取合适的库）。可以预先计算字典文件的语音散列。
*   编辑输入和电位之间的距离（这相当昂贵，因此您需要首先使用语音哈希之类的东西来减少列表，假设更高的容量负载 - 在我的情况下，是基于服务器的拼写检查）
*   一个已知的常见拼写错误列表，例如receive 与receive。
*   英语中最常见单词的有序列表

本质上，我主要根据编辑距离和共性对每个潜在单词进行加权。例如，如果单词概率是一个百分比，那么

```
weight = edit-distance *  100 / probability 
```

（权重越小越好）

但是我也用已知的常见拼写错误覆盖任何结果（即这些总是浮动到建议的结果顶部）。

可能有更好的方法，但这工作得很好。

您可能还希望忽略所有大写单词、首字母等，因此选择要忽略的内容也是需要考虑的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T13:43:31.873

在 linux/unix 下你有 ispell。为什么要彻底改造。

# xml - 在 Flash cs3 中从 xml 文件创建动态导航

> ID：806864
> 
> 赞同：0
> 
> 时间：2009-04-30T13:22:32.970
> 
> 标签：xml, flash, actionscript-3

我想将 xml 文件交给 swf 并让 swf 为 xml 文件中的每个链接生成一个动态文本框和按钮

基本的导航

这是xml

```
<?xml version="1.0" encoding="UTF-8"?>
    <page>
    <page name="Page Name 1" url="/page-1/" />
    <page name="Page Name 2" url="/page-2/" />
    <page name="Page Name 3" url="/page-3/" />
    <page name="Page Name 4" url="/page-4/" />
    </page> 
```

在我的 fla 我的库中有一个名为“nav_button”的按钮

有一个名为 actions 的层，在第 1 帧中我有这个

```
var xml:XML;
var xmlList:XMLList;
var xmlLoader:URLLoader = new URLLoader();

var button:Button = new Button();

xmlLoader.load(new URLRequest("links.xml"));

xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);

function xmlLoaded(event:Event):void
{
xml = XML(event.target.data);
xmlList = xml.children();
trace(xml.length());

for(var i:int = 0; i < xmlList.length(); i++)
{
    button = new Button();
    button.x = 25;
    button.y = i * 50 +25; 
    addChild(button);
}
} 
```

xml 导入很好，但是当涉及到 for 循环并将按钮和文本框添加到舞台时，我很高兴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T13:29:34.810

您的 xml 文件无效。它只能包含一个根节点。

试试这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<pages>
<page name="Page Name 1" url="/page-1/" />
<page name="Page Name 2" url="/page-2/" />
<page name="Page Name 3" url="/page-3/" />
<page name="Page Name 4" url="/page-4/" />
</pages> 
```

这是您的第一帧的代码：

```
var xmlLoader:URLLoader = new URLLoader();
xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);
xmlLoader.load(new URLRequest("links.xml"));

function xmlLoaded(event:Event):void {
    var pages:XML = new XML(event.target.data);
    var i:int = 0;
    for each (var page:XML in pages.page) {
        var button:LinkButton = new LinkButton();
        button.x = 25;
        button.y = i * 50 + 25; 
        button.label = page.attribute("name");
        button.url = page.attribute("url");
        addChild(button);
        trace(i++);
    }
} 
```

你需要一个自定义按钮类：

```
package {
    import fl.controls.Button;
    import flash.events.MouseEvent;
    import flash.net.URLRequest;
    import flash.net.navigateToURL;

    public class LinkButton extends fl.controls.Button {
        public var url:String;
        public function LinkButton(){
            super();
            this.addEventListener(MouseEvent.CLICK, clickHandler);
        }
        private function clickHandler(mouseEvent:MouseEvent) {
            flash.net.navigateToURL(new URLRequest(url), "_blank");
        }
    }
} 
```

也许我需要更详细地解释一下：

1.  创建一个新的 Flash 文件 ( `Ctrl-N`)
2.  打开组件面板 ( `Ctrl-F7`)
3.  打开库面板 ( `Ctrl-L`)
4.  将组件 > 用户界面 > 按钮拖动到库
5.  选择第一帧
6.  打开操作面板 ( `F9`)
7.  在此处粘贴第一段代码
8.  保存您的文件 ( `Ctrl-S`)
9.  创建一个新的 ActionScript 文件 ( `Ctrl-N`)
10.  在此处粘贴第二段代码
11.  将文件保存在与“LinkBut​​ton.as”相同的文件夹中 ( `Ctrl-S`)
12.  返回您的电影 ( `Ctrl-Tab`)
13.  测试电影 ( `Ctrl-Enter`)

我强烈建议你多参加一些培训。[Lee Brimelows 网站](http://www.gotoandlearn.com)是一个不错的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-03-11T00:08:46.293

我意识到这是旧的，但今天对我来说是新的。

我不明白您为什么要创建自定义按钮类。我认为没有必要完成你想做的事情。

```
function xmlLoaded(event:Event):void {
    var pages:XML = new XML(event.target.data);
    var i:int = 0;
    for each (var page:XML in pages.page) {
        var button:LinkButton = new LinkButton();
        button.x = 25;
        button.y = i * 50 + 25; 
        button.label = page.attribute("name");
        button.url = page.attribute("url");
        addChild(button);
        trace(i++);
    }
} 
```

就目前而言，上面的函数很好，但为什么不在 for 循环中添加事件侦听器呢？添加行：

```
button.addEventListener(MouseEvent.CLICK, gotoURL); 
```

在 for 循环中，然后添加函数：

```
function gotoURL(e:MouseEvent):void
{
    navigateToURL(new URLRequest(e.target.url));
} 
```

这将消除创建外部文件和自定义类的需要。

# .net - IE8 中关于 WebBrowser 控件的新功能是什么？

> ID：806866
> 
> 赞同：2
> 
> 时间：2009-04-30T13:22:38.430
> 
> 标签：.net, internet-explorer-8, browser, webbrowser-control

IE8 中关于*通过接口或直接 API 调用*的 WebBrowser Control 有哪些新功能？是否有任何新的可扩展性功能或新的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T13:49:10.503

考虑到没有新的 .NET 版本，我不希望对 API 进行任何直接更改。

一些已经暴露的接口可能仍然存在增强。

# sharepoint - WSS 3.0 上的 Active Directory 身份验证

> ID：806871
> 
> 赞同：1
> 
> 时间：2009-04-30T13:23:28.940
> 
> 标签：sharepoint, authentication, active-directory, wss

我们的客户希望使用他们现有的活动目录在新的 WSS 3.0 服务器上对用户进行身份验证。该公司正在使用多个域。

我已阅读此线程[sharepoint-wss-authentication-across-multiple-domains](https://stackoverflow.com/questions/766904/sharepoint-wss-authentication-across-multiple-domains)但它没有给我有关如何设置同步连接的信息。我在很多地方看到 AD 同步仅在 MOSS 2007 中可用，但这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T03:38:33.837

对于身份验证，只要域都是受信任的，您就不会有问题 - 基本上，如果 Windows 服务器将接受来自该域的登录，sharepoint 也将使用它。

对于配置文件信息，开箱即用的导入进入 mysites，这是 MOSS 独有的功能。但是，您没有理由不能编写自己的代码来将数据从 AD 提取到 WSS 用户配置文件。

# java - Strut2 验证，覆盖 css_xhtml 主题

> ID：806877
> 
> 赞同：0
> 
> 时间：2009-04-30T13:23:51.140
> 
> 标签：java, javascript, validation, struts2, struts-validation

嗨伙计，

我正在使用 Struts 2 验证。为了显示自定义错误消息，我将覆盖 css_xhtml.. 和用于客户端验证的 validation.js。一切进展顺利，但验证是在表单提交上进行的。我可以为所有表单字段 Onblur 事件执行此操作吗？任何建议都非常感谢

提前感谢

干杯，Vinayak VB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T13:51:39.687

您可以使用[jquery 插件](http://jquery.bassistance.de/validate/demo/)对表单进行 onblur（客户端）验证。

此外，您可以对 struts2 使用 DWR 验证。您将不得不经历一些涉及在配置文件中添加 DWR.xml 的设置过程，但是一旦完成所有这些，您将能够在表单上进行 AJAX 验证。[例子](http://www.javaworld.com/javaworld/jw-10-2008/jw-10-struts2validation.html?page=5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T16:25:56.380

您可以通过 onblur 处理程序调用表单 onsubmit 函数。就像是：

```
<script language=javascript">
  function callOnsubmit(form) {
    var code = form.getAttribute("onsubmit");
    eval(code);
</script>

<s:textfield name="foo" onblur="callOnsubmit(this.form);"/> 
```

# mysql - 使用 LEFT JOIN 更新 MySQL 中的多个表

> ID：806882
> 
> 赞同：178
> 
> 时间：2009-04-30T13:25:00.327
> 
> 标签：mysql, sql-update

我有两个表，并且想为左连接中的所有行更新 T1 中的字段。

举个简单的例子，更新以下结果集的所有行：

```
SELECT T1.* FROM T1 LEFT JOIN T2 ON T1.id = T2.id WHERE T2.id IS NULL 
```

[MySQL手册](http://dev.mysql.com/doc/refman/5.6/en/update.html)指出 ：

> 多表 UPDATE 语句可以使用 SELECT 语句中允许的任何类型的连接，例如 LEFT JOIN。

但是我在记录的多表更新中找不到正确的语法。

什么是正确的语法？

* * *

## 回答 #1

> 赞同：335
> 
> 时间：2009-04-30T13:32:38.060

```
UPDATE  t1
LEFT JOIN
        t2
ON      t2.id = t1.id
SET     t1.col1 = newvalue
WHERE   t2.id IS NULL 
```

请注意，对于 a ，使用/语法`SELECT`会更有效：`NOT IN``NOT EXISTS`

```
SELECT  t1.*
FROM    t1
WHERE   t1.id NOT IN
        (
        SELECT  id
        FROM    t2
        ) 
```

有关性能详细信息，请参阅我博客中的文章：

*   [**查找不完整的订单**](http://explainextended.com/2009/03/13/finding-incomplete-orders/)：`LEFT JOIN`比较的`NOT IN`

不幸的是，`MySQL`不允许在`UPDATE`语句的子查询中使用目标表，这就是为什么您需要坚持使用效率较低的`LEFT JOIN`语法。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2011-03-07T19:31:00.100

这同样适用于数据已被规范化的场景，但现在您希望一个表具有在第三个表中找到的值。以下将允许您使用第二个表喜欢的第三个表中的信息更新表。

```
UPDATE t1
LEFT JOIN
 t2
ON 
 t2.some_id = t1.some_id
LEFT JOIN
 t3 
ON
 t2.t3_id = t3.id
SET 
 t1.new_column = t3.column; 
```

这在您有用户和组的情况下很有用，并且您希望用户能够添加他们自己的组名称变体，因此最初您希望将现有组名称导入用户所在的字段将能够修改它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T04:49:40.950

```
Table A 
+--------+-----------+
| A-num  | text      | 
|    1   |           |
|    2   |           |
|    3   |           |
|    4   |           |
|    5   |           |
+--------+-----------+

Table B
+------+------+--------------+
| B-num|  date        |  A-num | 
|  22  |  01.08.2003  |     2  |
|  23  |  02.08.2003  |     2  | 
|  24  |  03.08.2003  |     1  |
|  25  |  04.08.2003  |     4  |
|  26  |  05.03.2003  |     4  | 
```

我将更新表 A 中的字段文本

```
UPDATE `Table A`,`Table B`
SET `Table A`.`text`=concat_ws('',`Table A`.`text`,`Table B`.`B-num`," from                                           
",`Table B`.`date`,'/')
WHERE `Table A`.`A-num` = `Table B`.`A-num` 
```

得出这个结果：

```
Table A 
+--------+------------------------+
| A-num  | text                   | 
|    1   |  24 from 03 08 2003 /  |
|    2   |  22 from 01 08 2003 /  |       
|    3   |                        |
|    4   |  25 from 04 08 2003 /  |
|    5   |                        |
--------+-------------------------+ 
```

仅接受表 B 中的一个字段，但我会得出以下结果：

```
Table A 
+--------+--------------------------------------------+
| A-num  | text                                       | 
|    1   |  24 from 03 08 2003                        |
|    2   |  22 from 01 08 2003 / 23 from 02 08 2003 / |       
|    3   |                                            |
|    4   |  25 from 04 08 2003 / 26 from 05 03 2003 / |
|    5   |                                            |
+--------+--------------------------------------------+ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-20T14:36:42.807

```
UPDATE `Table A` a
SET a.`text`=(
        SELECT group_concat(b.`B-num`,' from ',b.`date` SEPARATOR ' / ') 
        FROM `Table B` b WHERE (a.`A-num`=b.`A-num`)
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-06T12:01:46.170

```
 DECLARE @cols VARCHAR(max),@colsUpd VARCHAR(max), @query VARCHAR(max),@queryUpd VARCHAR(max), @subQuery VARCHAR(max)
DECLARE @TableNameTest NVARCHAR(150)
SET @TableNameTest = @TableName+ '_Staging';
SELECT  @colsUpd = STUF  ((SELECT DISTINCT '], T1.[' + name,']=T2.['+name+'' FROM sys.columns
                 WHERE object_id = (
                                    SELECT top 1 object_id 
                                      FROM sys.objects
                                     WHERE name = ''+@TableNameTest+''
                                    )
                and name not in ('Action','Record_ID')
                FOR XML PATH('')
            ), 1, 2, ''
        ) + ']'

  Select @queryUpd ='Update T1
SET '+@colsUpd+'
FROM '+@TableName+' T1
INNER JOIN '+@TableNameTest+' T2
ON T1.Record_ID = T2.Record_Id
WHERE T2.[Action] = ''Modify'''
EXEC (@queryUpd) 
```

# sql-server-2005 - SQL Server 2005 工作组版用户？

> ID：806886
> 
> 赞同：0
> 
> 时间：2009-04-30T13:25:59.187
> 
> 标签：sql-server-2005

Sql Server 2005 工作组版有多少并发用户？

1个数据库？

整个服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T13:29:10.410

没有内置限制 - 从[SQL Server 2005 Workgroup Edition 开始](http://www.microsoft.com/Sqlserver/2005/en/us/workgroup.aspx)：

> **Workgroup Edition 是适用于需要不受大小或用户数量限制**的数据库的小型组织的数据管理解决方案。Workgroup Edition 可以用作前端 Web 服务器或用于部门或分支机构的操作。它包括 SQL Server 产品线的核心数据库功能，并且易于升级到标准版或企业版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T13:41:00.880

用户数量没有限制。限制主要是：

1.  不在 64 位模式下运行（如果安装在 64 位操作系统上，则在 Windows 上使用 Windows） - 因此它有 3GB 内存限制
2.  仅限于 2 个 CPU

话虽如此，我还发现引擎上缺少集成服务（您可以将其作为与 Windows 调度程序一起运行的文件来实现）有点痛苦。

# terminal-services - 终端服务服务器信息

> ID：806891
> 
> 赞同：0
> 
> 时间：2009-04-30T13:27:40.303
> 
> 标签：terminal-services

我想知道是否有人对 Windows 终端服务及其工作方式有一些好的一般信息。我在想：

*   如果将 DLL 加载到内存中，它是对所有用户可用还是为每个用户重新加载。（或者它是否取决于其他东西）
*   示例服务器的规范以及它在一般用途中支持多少并发用户....
*   他们有任何问题，我前一阵子用过，我们每隔一段时间就会偶尔冻结几秒钟。这无法追踪到网络问题，有人建议与连接到系统的远程打印机有关。进入开始菜单时，似乎经常会发生这种惹恼用户的事情。
*   2008 年在性能方面比 2003 年有很大提升吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T13:44:10.810

终端服务就像一个具有多个“远程桌面”的服务器。

*   DLL 不会在会话之间共享，就像序号进程一样。
*   如果要使用标准 Windows 服务器，则需要特殊许可证
*   我建议在您想使用它时删除所有打印机（您也可以在客户端禁用它们），但这不是一个大问题
*   2008 的性能和安全性要好得多，但您还需要更新的 RDP 客户端。

# c# - 使商业软件更难破解的惯例？

> ID：806894
> 
> 赞同：6
> 
> 时间：2009-04-30T13:28:26.480
> 
> 标签：c#, drm

如果我想让我的应用程序更难破解，有哪些好的约定可以遵循？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-30T13:30:29.410

只要您的整个应用程序是客户端，就完全不可能保护它不被破解。保护应用程序不被破解的唯一方法是让它必须连接到服务器才能运行（例如在线游戏）。

即便如此，我也看到了一些模拟服务器并向程序发送虚拟确认的裂缝，因此它认为它正在与一个真实的、合法的服务器通信（在这种情况下，我说的是“回拨”验证策略，而不是一个游戏）。

另外，请记住，有志者事竟成。如果有人非常想要你的产品，他们会得到它。最后，您将实施可能会给您的诚实客户带来麻烦的保护措施，并且只会被视为对饼干的挑战。

另外，请参阅[此线程](https://stackoverflow.com/questions/109997/how-do-you-protect-your-software-from-illegal-distribution)以获取有关此主题的非常彻底的讨论。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-30T14:38:13.647

很多答案似乎都忽略了问题是如何让它变得更难，而不是如何让它变得不可能。

混淆是该过程中的第一个关键步骤。如果代码没有被混淆，任何进一步的事情都太容易解决了。

在那之后，它确实有点取决于你试图避免什么。无许可证安装？限时审判炸了？在不支付额外费用的情况下增加软件的使用（例如在更多 CPU 上）？

在当今的虚拟机世界中，长期的反破解策略必须涉及一些归属感。环境太容易变得原始了。话虽如此，如果您必须回到原始状态才能使用某些类型的软件，它们将毫无用处。如果那是您的软件类型，那么在注册表中放置东西以跟踪定时试验的地方相当隐蔽。通常是一种难以伪造的许可证密钥方案。

不过要注意一件事-不要太花哨。很多时候，许可方案获得的 QA 最少，并且在生产中遇到严重问题，合法客户被拒之门外。不要因为害怕被人抄袭而赶走真正的付费客户，否则他们很可能不会付给你一毛钱。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-30T13:31:39.453

书籍：[编写安全代码 2](http://www.microsoft.com/learning/en/us/Books/5957.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-30T13:31:55.053

有 3rd 方工具可以混淆您的代码。Visual Studio 自带一个。

但是，首先，您应该认真考虑一下您为什么要打扰。如果您的应用程序足够好并且足够受欢迎，以至于希望被破解，那么尽管您付出了所有努力，它还是会成功。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-30T16:22:38.510

这里有一些提示，并不完美，但可能会有所帮助：

*   经常更新您的软件
*   如果您的软件连接到某处的某个服务器，请不时更改协议。您甚至可以拥有许多协议并根据某些算法在它们之间交替
*   将部分软件存储在每次运行软件时都会下载的服务器上
*   当你启动你的程序时，对你加载的 dll 进行 crc 检查，即有一个 crc 列表，用于批准的 dll
*   有一项服务可以忽略您的主应用程序，不时进行 crc 检查并监视您的其他依赖 dll 的/程序集。

不幸的是，你花在复制保护你的软件上的钱越多，你在功能上花的钱就越少，一切都是为了平衡。

另一种方法是廉价出售您的软件，但经常进行廉价的升级/更新，这样破解就不会有利可图。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-30T13:33:17.780

.NET 代码的问题是使用[.NET Reflector](http://www.red-gate.com/products/reflector/)等工具进行逆向工程相对容易。代码混淆可以提供帮助，但仍然可以解决。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-30T13:35:38.523

如果你想要一个快速的解决方案（当然，不能保证你不会被破解——这只是一些“保护”），你可以搜索一些工具，如[Themida](http://www.oreans.com/)或[Star Force](http://www.star-force.com/)。这些都是著名的保护壳。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-30T14:17:42.820

这真的是不可能的。只需经常发布补丁，然后更改加密中的盐。但是，如果您的软件被破解了，那么它一定非常好:-)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-04-30T13:31:26.363

除非您的客户很少，否则这几乎是不可能完成的任务。

想想看——你见过没有破解的 Windows 版本吗？

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-04-30T13:34:40.180

如果您发明了一种保护它的方法，那么有人可以发明一种破解它的方法。花费足够的精力，以便当人们以“非法”方式使用它时，他们会意识到这一点。除此之外的大多数事情都有浪费时间的风险；o)

# objective-c - BOOL Obj-C 2 属性的命名约定？

> ID：806900
> 
> 赞同：22
> 
> 时间：2009-04-30T13:29:38.223
> 
> 标签：objective-c, cocoa

我有一个只读的 BOOL 属性。这里的主要命名模式是什么？

背景：对于普通的旧方法声明，接受的模式

```
- (BOOL)isEditable;
- (void)setEditable:(BOOL)flag; 
```

在@property 世界中，这通常表示为

```
@property(getter=isEditable) BOOL editable; 
```

然而，也有相反的例子。比如在 CalStore/CalCalendar.h

```
@property(readonly) BOOL isEditable; 
```

（这里 CalCalendar 是错误的，还是只读 BOOL 属性也是可接受的命名模式？）

我有一个管理视图的控制器，它可能会或可能不会调整大小。该属性是只读的。

```
@property(readonly) BOOL viewIsResizable;
@property(readonly) BOOL isViewResizable;
@property(readonly, getter=isViewResizable) BOOL viewResizable; 
```

哪种图案最自然或最像可可？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-30T14:10:44.727

引用自[ADC](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282)

> 如果属性表示为形容词，格式为：
> 
> ```
> - (void)setAdjective:(BOOL)flag;
> - (BOOL)isAdjective; 
> ```
> 
> 例如：
> 
> ```
> - (void)setEditable:(BOOL)flag;
> - (BOOL)isEditable; 
> ```
> 
> 如果属性表示为动词，格式为：
> 
> ```
> - (void)setVerbObject:(BOOL)flag; 
> - (BOOL)verbObject; 
> ```
> 
> 例如：
> 
> ```
> - (void)setShowsAlpha:(BOOL)flag;
> - (BOOL)showsAlpha; 
> ```
> 
> 动词应该是一般现在时。

|K<

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-30T13:51:50.433

我认为这并不重要，因为 KVO 会同时查看`is<Key>`和`<Key>`。

查看 iPhone 类，我见过的最常见的模式是：

> @property(nonatomic, getter=isHidden) BOOL 隐藏；

这让您可以通过以下方式访问该属性：

```
obj.hidden = YES; // (1)
BOOL hidden = obj.hidden; // (2)
BOOL hidden = [obj isHidden]; // (3) 
```

但不是：

```
BOOL hidden = obj.isHidden; // (4) 
```

CalStore 不遵循该约定。您将不得不使用第 4 行而不是第 2 行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-30T13:45:55.830

你会想要使用与 KVO、KVC 和绑定等一起工作的那个。

我记得在 KVO 等人的文档中读到了这一点。会寻找，以及和许多其他人一样`is*<key>*``set*<key>*``get*<key>*``countOf<*key>*`

[KVC 合规检查表](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/KeyValueCoding/Compliant.html#//apple_ref/doc/uid/20002172)对它的解释比我做的要好得多。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-30T13:58:30.043

CalStore 示例似乎违反了约定。我会坚持属性名称，而不是方法名称，其中没有“是”。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-04-30T13:47:03.830

该约定绝对`is...`适用于 BOOL getter。您在 CalStore 中看到这样的属性集的原因很可能是因为它是只读的，并且为了头文件的基本可读性而以这种方式编写，因为：

```
@property(readonly) isEditable; 
```

通常比以下内容更容易阅读：

```
@property(readonly, getter=isEditable) editable; 
```

对于第一种类型的属性，在您的实现中，您可以执行以下任一操作：

```
@synthesize isEditable = editable; 
```

或者简单地定义访问器：

```
- (BOOL)isEditable(void) { return editable; } 
```

这使潜在用户更容易阅读接口文件（标题）。

# .net - Is there a way to display less than 4 numbers in the assembly version?

> ID：806903
> 
> 赞同：2
> 
> 时间：2009-04-30T13:29:54.293
> 
> 标签：.net, version, assemblyinfo

I need to display only 3 numbers for my assembly versions, to comply with our internal guidelines

I tried removing the last digit from the AssemblyInfo file to look like this

```
[assembly: AssemblyVersion("0.5.0")]
[assembly: AssemblyFileVersion("0.5.0")] 
```

And I display it like this

```
Assembly.GetExecutingAssembly().GetName().Version.ToString(); 
```

However, it renders all four version numbers (0.5.0.0)

Is there a way to limit it to 3 **without** changing the code?

ie: only by editing the AssemblyInfo.cs or web.config file

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-30T14:00:25.763

Without code, no.

You can use Reflector to see the implementation of [`Version.ToString()`](http://msdn.microsoft.com/library/e31ax1a7.aspx), and it always shows all four elements.

*But* there is an overload [`Version.ToString(int)`](http://msdn.microsoft.com/library/bff8h2e1.aspx) that will show a specified number of components.

To choose dynamically you will need to write a method (possible an extension method) yourself.

# linux - 如何测试变量是否是 Bash 中的数字？

> ID：806906
> 
> 赞同：748
> 
> 时间：2009-04-30T13:30:16.100
> 
> 标签：linux, bash, shell

我只是不知道如何确保传递给我的脚本的参数是一个数字。

我想做的就是这样的：

```
test *isnumber* $1 && VAR=$1 || echo "need a number" 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1005
> 
> 时间：2009-04-30T13:32:20.760

一种方法是使用正则表达式，如下所示：

```
re='^[0-9]+$'
if ! [[ $yournumber =~ $re ]] ; then
   echo "error: Not a number" >&2; exit 1
fi 
```

如果值不一定是整数，请考虑适当修改正则表达式；例如：

```
^[0-9]+([.][0-9]+)?$ 
```

...或者，处理带符号的数字：

```
^[+-]?[0-9]+([.][0-9]+)?$ 
```

* * *

## 回答 #2

> 赞同：355
> 
> 时间：2010-10-16T22:56:11.417

没有 bashisms（即使在 System V sh 中也可以），

```
case $string in
    ''|*[!0-9]*) echo bad ;;
    *) echo good ;;
esac 
```

这拒绝空字符串和包含非数字的字符串，接受其他所有内容。

负数或浮点数需要一些额外的工作。一个想法是在第一个“坏”模式中排除`-`/并添加更多包含它们的不当使用的“坏”模式（ / ）`.``?*-*``*.*.*`

* * *

## 回答 #3

> 赞同：228
> 
> 时间：2009-04-30T19:55:52.337

以下解决方案也可用于基本的 shell，例如 Bourne，而不需要正则表达式。基本上，任何使用非数字的数值计算操作都会导致错误，在 shell 中将被隐式视为错误：

```
"$var" -eq "$var" 
```

如：

```
#!/bin/bash

var=a

if [ -n "$var" ] && [ "$var" -eq "$var" ] 2>/dev/null; then
  echo number
else
  echo not a number
fi 
```

您也可以测试 $? 更明确的操作的返回码：

```
[ -n "$var" ] && [ "$var" -eq "$var" ] 2>/dev/null
if [ $? -ne 0 ]; then
   echo $var is not number
fi 
```

标准错误的重定向是为了隐藏 bash 打印出来的“预期整数表达式”消息，以防我们没有数字。

**注意事项**（感谢以下评论）：

*   带小数点的数字*未被*识别为有效的“数字”
*   使用`[[ ]]`代替`[ ]`将始终评估为`true`
*   大多数非 Bash shell 将始终将此表达式计算为`true`
*   Bash 中的行为未记录在案，因此可能会在没有警告的情况下更改
*   如果值在数字后包含空格（例如“1 a”）会产生错误，例如`bash: [[: 1 a: syntax error in expression (error token is "a")`
*   如果该值与 var-name 相同（例如 i="i"），则会产生错误，例如`bash: [[: i: expression recursion level exceeded (error token is "i")`

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2012-10-26T14:52:31.420

没有人建议 bash 的[扩展模式匹配](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)：

```
[[ $1 == ?(-)+([0-9]) ]] && echo "$1 is an integer" 
```

或使用[新的 POSIX 风格](https://www.grymoire.com/Unix/Regular.html#uh-13)：

```
[[ $1 == ?(-)+([:digit:]) ]] && echo "$1 is an integer" 
```

* * *

## 回答 #5

> 赞同：50
> 
> 时间：2010-04-24T14:19:05.340

这会测试一个数字是否为非负整数。它独立于 shell（即没有 bashisms）并且仅使用 shell 内置函数：

```
[ ! -z "${num##*[!0-9]*}" ] && echo "is a number" || echo "is not a number"; 
```

* * *

该答案的先前版本提出：

```
[ -z "${num##[0-9]*}" ] && echo "is a number" || echo "is not a number"; 
```

但这是不正确的，因为它接受任何以数字开头的字符串，正如**jilles**[所建议](https://stackoverflow.com/questions/806906/how-do-i-test-if-a-variable-is-a-number-in-bash/2704760#comment4220661_2704760)的那样。

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2020-05-16T11:03:50.727

（2）完全重写此答案：2021 年 6 月 27 日。

# 一些性能和兼容性提示

对于不同类型的测试，有一些非常不同的方法。

我回顾了最相关的方法并建立了这个比较。

## 无符号整数`is_uint()`

这些函数执行代码来评估表达式是否为无符号整数，即完全由数字组成。

*   使用***参数扩展***

    （这是我之前的方法！）

    ```
    isuint_Parm() { [ "$1" ] && [ -z "${1//[0-9]}" ] ;} 
    ```

*   使用***叉子`grep`***

    ```
    isuint_Grep() { grep -qE '^[0-9]+$' <<<"$1"; } 
    ```

    我只测试这种方法一次，因为它非常慢。这只是为了显示不该做什么。

*   使用***[bash](/questions/tagged/bash "显示标记为“bash”的问题")整数功能***

    ```
    isuint_Bash() { (( 10#$1 >= 0 )) 2>/dev/null ;} 
    ```

*   使用***`case`***

    ```
    isuint_Case() { case $1 in ''|*[!0-9]*) return 1;;esac;} 
    ```

*   使用***[bash](/questions/tagged/bash "显示标记为“bash”的问题")的正则表达式***

    ```
    isuint_Regx() { [[ $1 =~ ^[0-9]+$ ]] ;} 
    ```

## 有符号整数`is_int()`

这些函数实现代码来评估一个表达式是否是一个有符号整数，即如上所述，但允许在数字前有一个可选的符号。

*   使用***参数扩展***

    ```
    isint_Parm() { local chk=${1#[+-]}; [ "$chk" ] && [ -z "${chk//[0-9]}" ] ;} 
    ```

*   使用***[bash](/questions/tagged/bash "显示标记为“bash”的问题")整数功能***

    ```
    isint_Bash() { (( 10#$1 )) 2>/dev/null ;} 
    ```

*   使用***`case`***

    ```
    isint_Case() { case ${1#[-+]} in ''|*[!0-9]*) return 1;;esac;} 
    ```

*   使用***[bash](/questions/tagged/bash "显示标记为“bash”的问题")的正则表达式***

    ```
    isint_Regx() { [[ $1 =~ ^[+-]?[0-9]+$ ]] ;} 
    ```

## 数字（无符号浮点数）`is_num()`

这些函数实现代码来评估表达式是否为浮点数，即如上所述，但允许可选的小数点和其后的附加数字。这并不试图涵盖科学记数法中的数字表达式（例如 1.0234E-12）。

*   使用***参数扩展***

    ```
    isnum_Parm() { local ck=${1#[+-]};ck=${ck/.};[ "$ck" ]&&[ -z "${ck//[0-9]}" ];} 
    ```

*   使用***[bash](/questions/tagged/bash "显示标记为“bash”的问题")的正则表达式***

    ```
    isnum_Regx() { [[ $1 =~ ^[+-]?([0-9]+([.][0-9]*)?|\.[0-9]+)$ ]] ;} 
    ```

*   使用***`case`***

    ```
    isnum_Case() { case ${1#[-+]} in ''|.|*[!0-9.]*|*.*.*) return 1;; esac ;} 
    ```

## 概念测试

（您可以在之前声明的函数之后复制/粘贴此测试代码。）

```
testcases=(
    1 42 -3 +42 +3\. .9 3.14 +3.141 -31.4 '' . 3-3 3.1.4 3a a3 blah 'Good day!'
);printf '%-12s %4s %4s %4s %4s %4s %4s %4s %4s %4s %4s %4s %4s\n' Function \
       U{Prm,Grp,Bsh,Cse,Rgx} I{Prm,Bsh,Cse,Rgx} N{Prm,Cse,Rgx}; \
for var in "${testcases[@]}";do
    outstr='';
    for func in isuint_{Parm,Grep,Bash,Case,Regx} isint_{Parm,Bash,Case,Regx} \
                       isnum_{Parm,Case,Regx};do
        if $func "$var"
        then outstr+='  num'
        else outstr+='  str'
        fi
    done
    printf '%-11s %s\n' "|$var|" "$outstr"
done 
```

应该输出：

```
Function     UPrm UGrp UBsh UCse URgx IPrm IBsh ICse IRgx NPrm NCse NRgx
|1|           num  num  num  num  num  num  num  num  num  num  num  num
|42|          num  num  num  num  num  num  num  num  num  num  num  num
|-3|          str  str  str  str  str  num  num  num  num  num  num  num
|+42|         str  str  num  str  str  num  num  num  num  num  num  num
|+3.|         str  str  str  str  str  str  str  str  str  num  num  num
|.9|          str  str  str  str  str  str  str  str  str  num  num  num
|3.14|        str  str  str  str  str  str  str  str  str  num  num  num
|+3.141|      str  str  str  str  str  str  str  str  str  num  num  num
|-31.4|       str  str  str  str  str  str  str  str  str  num  num  num
||            str  str  num  str  str  str  str  str  str  str  str  str
|.|           str  str  str  str  str  str  str  str  str  str  str  str
|3-3|         str  str  num  str  str  str  str  str  str  str  str  str
|3.1.4|       str  str  str  str  str  str  str  str  str  str  str  str
|3a|          str  str  str  str  str  str  str  str  str  str  str  str
|a3|          str  str  str  str  str  str  str  str  str  str  str  str
|blah|        str  str  str  str  str  str  str  str  str  str  str  str
|Good day!|   str  str  str  str  str  str  str  str  str  str  str  str 
```

我希望！（注：`uint_bash`看起来并不完美！）

## 性能比较

然后我建立了这个测试功能：

```
testFunc() {
    local tests=1000 start=${EPOCHREALTIME//.}
    for ((;tests--;)) ;do
        "$1" "$3"
    done
    printf -v "$2" %u $((${EPOCHREALTIME//.}-start))
}
percent(){ local p=00$((${1}00000/$2));printf -v "$3" %.2f%% ${p::-3}.${p: -3};}
sortedTests() {
    local func NaNTime NumTime ftyp="$1" nTest="$2" tTest="$3" min i pct line
    local -a order=()
    shift 3
    for func ;do
        testFunc "${ftyp}_$func" NaNTime "$tTest"
        testFunc "${ftyp}_$func" NumTime "$nTest"
        order[NaNTime+NumTime]=${ftyp}_$func\ $NumTime\ $NaNTime
    done
    printf '%-12s %11s %11s %14s\n' Function Number NaN Total
    min="${!order[*]}" min=${min%% *}
    for i in "${!order[@]}";do
        read -ra line <<<"${order[i]}"
        percent "$i" "$min" pct
        printf '%-12s %9d\U00B5s %9d\U00B5s  %12d\U00B5s  %9s\n' \
               "${line[@]}" "$i" "$pct"
    done
} 
```

我可以这样跑：

```
sortedTests isuint "This is not a number." 31415926535897932384 \
            Case Grep Parm Bash Regx ;\
sortedTests isint  "This is not a number." 31415926535897932384 \
            Case Parm Bash Regx ;\
sortedTests isnum "This string is clearly not a number..." \
            3.141592653589793238462643383279502884  Case Parm Regx 
```

在我的主机上，这显示：

```
Function          Number         NaN          Total
isuint_Case       6762µs      8492µs         15254µs    100.00%
isuint_Bash      13478µs     12739µs         26217µs    171.87%
isuint_Parm      11324µs     18807µs         30131µs    197.53%
isuint_Regx      20777µs     27616µs         48393µs    317.25%
isuint_Grep    1516390µs   1491751µs       3008141µs  19720.34%
Function          Number         NaN          Total
isint_Case        8630µs      8042µs         16672µs    100.00%
isint_Bash       14254µs     12272µs         26526µs    159.10%
isint_Parm       16445µs     20491µs         36936µs    221.54%
isint_Regx       23661µs     28287µs         51948µs    311.59%
Function          Number         NaN          Total
isnum_Case        9579µs     10328µs         19907µs    100.00%
isnum_Parm       21115µs     28983µs         50098µs    251.66%
isnum_Regx       35552µs     58453µs         94005µs    472.22% 
```

# 结论

*   `case`方式显然是最快的！*`regex`*比使用*参数扩展*快3 倍 和 2 倍。
*   **`grep`不需要时应避免***分叉***（到**

 ****`case`方法已成为我的首选：**

```
is_uint() { case $1        in '' | *[!0-9]*              ) return 1;; esac ;}
is_int()  { case ${1#[-+]} in '' | *[!0-9]*              ) return 1;; esac ;}
is_unum() { case $1        in '' | . | *[!0-9.]* | *.*.* ) return 1;; esac ;}
is_num()  { case ${1#[-+]} in '' | . | *[!0-9.]* | *.*.* ) return 1;; esac ;} 
```

## 关于兼容性

为此，我[根据之前的测试编写了一个小测试脚本](https://f-hauri.ch/vrac/isnum_test.sh.txt)，其中：

```
for shell in bash dash 'busybox sh' ksh zsh "$@";do
    printf "%-12s  " "${shell%% *}"
    $shell < <(testScript) 2>&1 | xargs
done 
```

由此可见：

```
bash          Success
dash          Success
busybox       Success
ksh           Success
zsh           Success 
```

正如我所知，其他基于[bash](/questions/tagged/bash "显示标记为“bash”的问题")的解决方案（如***regex***和***[bash](/questions/tagged/bash "显示标记为“bash”的问题")的整数***）在许多其他 shell 中不起作用，并且***fork***资源昂贵，我更喜欢这种*`case`*方式（就在***参数扩展***之前，它也大多兼容）。

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2012-07-14T00:01:56.300

我对直接在 shell 中解析数字格式的解决方案感到惊讶。shell 不太适合这种情况，它是用于控制文件和进程的 DSL。有足够的数字解析器稍微低一点，例如：

```
isdecimal() {
  # filter octal/hex/ord()
  num=$(printf '%s' "$1" | sed "s/^0*\([1-9]\)/\1/; s/'/^/")

  test "$num" && printf '%f' "$num" >/dev/null 2>&1
} 
```

将 '%f' 更改为您需要的任何特定格式。

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2013-05-04T13:38:40.180

我正在查看答案并且......意识到没有人考虑过浮点数（带点）！

使用 grep 也很棒。
-E 表示扩展正则表达式
-q 表示安静（不回显）
-qE 是两者的组合。

直接在命令行中测试：

```
$ echo "32" | grep -E ^\-?[0-9]?\.?[0-9]+$  
# answer is: 32

$ echo "3a2" | grep -E ^\-?[0-9]?\.?[0-9]+$  
# answer is empty (false)

$ echo ".5" | grep -E ^\-?[0-9]?\.?[0-9]+$  
# answer .5

$ echo "3.2" | grep -E ^\-?[0-9]?\.?[0-9]+$  
# answer is 3.2 
```

在 bash 脚本中使用：

```
check=`echo "$1" | grep -E ^\-?[0-9]*\.?[0-9]+$`

if [ "$check" != '' ]; then    
  # it IS numeric
  echo "Yeap!"
else
  # it is NOT numeric.
  echo "nooop"
fi 
```

要匹配 JUST 整数，请使用以下命令：

```
# change check line to:
check=`echo "$1" | grep -E ^\-?[0-9]+$` 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2014-02-28T21:36:20.650

只是对@mary 的跟进。但是因为我没有足够的代表，所以不能将此作为对该帖子的评论。无论如何，这是我使用的：

```
isnum() { awk -v a="$1" 'BEGIN {print (a == a + 0)}'; } 
```

如果参数是数字，该函数将返回“1”，否则将返回“0”。这适用于整数和浮点数。用法类似于：

```
n=-2.05e+07
res=`isnum "$n"`
if [ "$res" == "1" ]; then
     echo "$n is a number"
else
     echo "$n is not a number"
fi 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2014-11-05T16:19:46.537

```
test -z "${i//[0-9]}" && echo digits || echo no no no 
```

`${i//[0-9]}``$i`用空字符串替换值中的任何数字，请参阅`man -P 'less +/parameter\/' bash`. `-z`检查结果字符串的长度是否为零。

如果您还想排除`$i`为空的情况，您可以使用以下结构之一：

```
test -n "$i" && test -z "${i//[0-9]}" && echo digits || echo not a number
[[ -n "$i" && -z "${i//[0-9]}" ]] && echo digits || echo not a number 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2018-10-20T11:16:16.633

这可以通过使用`grep`来查看有问题的变量是否与扩展的正则表达式匹配。

### 测试整数`1120`：

```
yournumber=1120
if echo "$yournumber" | grep -qE '^[0-9]+$'; then
    echo "Valid number."
else
    echo "Error: not a number."
fi 
```

输出：`Valid number.`

### 测试非整数`1120a`：

```
yournumber=1120a
if echo "$yournumber" | grep -qE '^[0-9]+$'; then
    echo "Valid number."
else
    echo "Error: not a number."
fi 
```

输出：`Error: not a number.`

* * *

## 解释

*   ,开关允许我们使用扩展`grep`的`-E`正则表达式`'^[0-9]+$'`。此正则表达式意味着变量应仅`[]`包含从变量开头到结尾的数字`0-9`0 到 9，并且应至少包含一个字符。`^``$``+`
*   ，安静开关会关闭任何输出`grep`，`-q`无论它是否找到任何东西。
*   `if`检查 的退出状态`grep`。退出状态`0`意味着成功，任何更高的状态都意味着错误。该`grep`命令的退出状态为`0`是否找到匹配项以及`1`何时未找到匹配项；

因此，将它们放在一起，在`if`测试中，我们`echo`将变量`$yournumber`和`|`管道`grep`通过`-q`switch 静默匹配`-E`扩展的正则表达式`'^[0-9]+$'`表达式。的退出状态`grep`将是`0`如果`grep`成功找到匹配项，`1`如果没有。如果匹配成功，我们`echo "Valid number."`. 如果匹配失败，我们`echo "Error: not a number."`.

* * *

## 对于花车或双打

我们可以将正则表达式从`'^[0-9]+$'`to更改`'^[0-9]*\.?[0-9]+$'`为浮点数或双精度数。

### 测试浮动`1120.01`：

```
yournumber=1120.01
if echo "$yournumber" | grep -qE '^[0-9]*\.?[0-9]+$'; then
    echo "Valid number."
else
    echo "Error: not a number."
fi 
```

输出：`Valid number.`

### 测试浮动`11.20.01`：

```
yournumber=11.20.01
if echo "$yournumber" | grep -qE '^[0-9]*\.?[0-9]+$'; then
    echo "Valid number."
else
    echo "Error: not a number."
fi 
```

输出：`Error: not a number.`

* * *

## 对于负数

要允许负整数，只需将正则表达式从 更改`'^[0-9]+$'`为`'^\-?[0-9]+$'`。

要允许负浮点数或双精度数，只需将正则表达式从 更改`'^[0-9]*\.?[0-9]+$'`为`'^\-?[0-9]*\.?[0-9]+$'`。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2019-04-04T11:40:33.610

对于我的问题，我只需要确保用户不会意外输入一些文本，因此我尽量保持简单易读

```
isNumber() {
    (( $1 )) 2>/dev/null
} 
```

根据手册页，这几乎可以满足我的要求

> 如果表达式的值非零，则返回状态为 0

为了防止“可能是数字”的字符串出现令人讨厌的错误消息，我忽略了错误输出

```
$ (( 2s ))
bash: ((: 2s: value too great for base (error token is "2s") 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2013-08-22T18:47:52.667

老问题，但我只是想解决我的解决方案。这个不需要任何奇怪的 shell 技巧，或者依赖于一些从未存在过的东西。

```
if [ -n "$(printf '%s\n' "$var" | sed 's/[0-9]//g')" ]; then
    echo 'is not numeric'
else
    echo 'is numeric'
fi 
```

基本上它只是从输入中删除所有数字，如果你留下一个非零长度的字符串，那么它不是一个数字。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2011-10-21T14:10:56.997

```
[[ $1 =~ ^-?[0-9]+$ ]] && echo "number" 
```

不要忘记`-`包含负数！

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2012-10-08T22:43:41.040

我会试试这个：

```
printf "%g" "$var" &> /dev/null
if [[ $? == 0 ]] ; then
    echo "$var is a number."
else
    echo "$var is not a number."
fi 
```

注意：这将 nan 和 inf 识别为数字。

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2015-03-06T11:52:47.850

@charles Dufy 和其他人已经给出了明确的答案。纯 bash 解决方案将使用以下内容：

```
string="-12,345"
if [[ "$string" =~ ^-?[0-9]+[.,]?[0-9]*$ ]]
then
    echo $string is a number
else
    echo $string is not a number
fi 
```

[虽然对于实数来说，小数点](http://en.wikipedia.org/wiki/Radix_point)前不一定要有数字。

为了提供对浮点数和科学记数法的更彻底的支持（C/Fortran 中的许多程序，否则将以这种方式导出浮点数），对这一行的有用补充如下：

```
string="1.2345E-67"
if [[ "$string" =~ ^-?[0-9]*[.,]?[0-9]*[eE]?-?[0-9]+$ ]]
then
    echo $string is a number
else
    echo $string is not a number
fi 
```

因此，如果您正在寻找任何特定类型，则会导致一种区分数字类型的方法：

```
string="-12,345"
if [[ "$string" =~ ^-?[0-9]+$ ]]
then
    echo $string is an integer
elif [[ "$string" =~ ^-?[0-9]*[.,]?[0-9]*$ ]]
then
    echo $string is a float
elif [[ "$string" =~ ^-?[0-9]*[.,]?[0-9]*[eE]-?[0-9]+$ ]]
then
    echo $string is a scientific number
else
    echo $string is not a number
fi 
```

注意：我们可以列出十进制和科学记数法的语法要求，其中之一是允许逗号作为小数点，以及“.”。然后我们会断言必须只有一个这样的小数点。[Ee] 浮点数中可以有两个 +/- 符号。我从 Aulu 的工作中学到了更多规则，并针对诸如 '' '-' '-E-1' '0-0' 之类的错误字符串进行了测试。这是我的 regex/substring/expr 工具，它们似乎一直在坚持：

```
parse_num() {
 local r=`expr "$1" : '.*\([.,]\)' 2>/dev/null | tr -d '\n'` 
 nat='^[+-]?[0-9]+[.,]?$' \
 dot="${1%[.,]*}${r}${1##*[.,]}" \
 float='^[\+\-]?([.,0-9]+[Ee]?[-+]?|)[0-9]+$'
 [[ "$1" == $dot ]] && [[ "$1" =~ $float ]] || [[ "$1" =~ $nat ]]
} # usage: parse_num -123.456 
```

* * *

## 回答 #17

> 赞同：7
> 
> 时间：2015-03-24T13:59:53.213

还不能发表评论，所以我将添加我自己的答案，这是对 glenn jackman 使用 bash 模式匹配的答案的扩展。

我最初的需要是识别数字并区分整数和浮点数。函数定义扣除为：

```
function isInteger() {
    [[ ${1} == ?(-)+([0-9]) ]]
}

function isFloat() {
    [[ ${1} == ?(-)@(+([0-9]).*([0-9])|*([0-9]).+([0-9]))?(E?(-|+)+([0-9])) ]]
} 
```

我使用单元测试（使用 shUnit2）来验证我的模式是否按预期工作：

```
oneTimeSetUp() {
    int_values="0 123 -0 -123"
    float_values="0.0 0\. .0 -0.0 -0\. -.0 \
        123.456 123\. .456 -123.456 -123\. -.456
        123.456E08 123.E08 .456E08 -123.456E08 -123.E08 -.456E08 \
        123.456E+08 123.E+08 .456E+08 -123.456E+08 -123.E+08 -.456E+08 \
        123.456E-08 123.E-08 .456E-08 -123.456E-08 -123.E-08 -.456E-08"
}

testIsIntegerIsFloat() {
    local value
    for value in ${int_values}
    do
        assertTrue "${value} should be tested as integer" "isInteger ${value}"
        assertFalse "${value} should not be tested as float" "isFloat ${value}"
    done

    for value in ${float_values}
    do
        assertTrue "${value} should be tested as float" "isFloat ${value}"
        assertFalse "${value} should not be tested as integer" "isInteger ${value}"
    done

} 
```

注意：可以修改 isFloat 模式，使其对小数点 ( `@(.,)`) 和 E 符号 ( `@(Ee)`) 的容忍度更高。我的单元测试仅测试整数或浮点值，但不测试任何无效输入。

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2013-10-27T03:45:01.790

我使用[expr](http://man.cx/expr)。如果您尝试将零添加到非数字值，它将返回非零：

```
if expr -- "$number" + 0 > /dev/null 2>&1
then
    echo "$number is a number"
else
    echo "$number isn't a number"
fi 
```

如果您需要非整数，可能可以使用[bc](http://man.cx/bc)，但我不认为`bc`具有完全相同的行为。将零添加到非数字会使您为零，并且它也返回零值。也许你可以结合`bc`和`expr`。用于`bc`将零添加到`$number`。如果答案是`0`，则尝试`expr`验证它`$number`不为零。

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2015-07-27T17:21:51.117

一种简单的方法是检查它是否包含非数字字符。您用任何内容替换所有数字字符并检查长度。如果有长度，则不是数字。

```
if [[ ! -n ${input//[0-9]/} ]]; then
    echo "Input Is A Number"
fi 
```

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2016-09-08T20:13:13.867

因为我最近不得不篡改这个并且最喜欢*karttu的*单元测试方法。我修改了代码并添加了一些其他解决方案，自己尝试一下看看结果：

```
#!/bin/bash

    # N={0,1,2,3,...} by syntaxerror
function isNaturalNumber()
{
 [[ ${1} =~ ^[0-9]+$ ]]
}
    # Z={...,-2,-1,0,1,2,...} by karttu
function isInteger() 
{
 [[ ${1} == ?(-)+([0-9]) ]]
}
    # Q={...,-½,-¼,0.0,¼,½,...} by karttu
function isFloat() 
{
 [[ ${1} == ?(-)@(+([0-9]).*([0-9])|*([0-9]).+([0-9]))?(E?(-|+)+([0-9])) ]]
}
    # R={...,-1,-½,-¼,0.E+n,¼,½,1,...}
function isNumber()
{
 isNaturalNumber $1 || isInteger $1 || isFloat $1
}

bools=("TRUE" "FALSE")
int_values="0 123 -0 -123"
float_values="0.0 0\. .0 -0.0 -0\. -.0 \
    123.456 123\. .456 -123.456 -123\. -.456 \
    123.456E08 123.E08 .456E08 -123.456E08 -123.E08 -.456E08 \
    123.456E+08 123.E+08 .456E+08 -123.456E+08 -123.E+08 -.456E+08 \
    123.456E-08 123.E-08 .456E-08 -123.456E-08 -123.E-08 -.456E-08"
false_values="blah meh mooh blah5 67mooh a123bc"

for value in ${int_values} ${float_values} ${false_values}
do
    printf "  %5s=%-30s" $(isNaturalNumber $value) ${bools[$?]} $(printf "isNaturalNumber(%s)" $value)
    printf "%5s=%-24s" $(isInteger $value) ${bools[$?]} $(printf "isInteger(%s)" $value)
    printf "%5s=%-24s" $(isFloat $value) ${bools[$?]} $(printf "isFloat(%s)" $value)
    printf "%5s=%-24s\n" $(isNumber $value) ${bools[$?]} $(printf "isNumber(%s)" $value)
done 
```

所以*isNumber()*包括破折号、逗号和指数符号，因此在整数和浮点数上返回 TRUE，而另一方面*isFloat()*在整数值上返回 FALSE，*isInteger()*同样在浮点数上返回 FALSE。为了您的方便，全部作为一个衬垫：

```
isNaturalNumber() { [[ ${1} =~ ^[0-9]+$ ]]; }
isInteger() { [[ ${1} == ?(-)+([0-9]) ]]; }
isFloat() { [[ ${1} == ?(-)@(+([0-9]).*([0-9])|*([0-9]).+([0-9]))?(E?(-|+)+([0-9])) ]]; }
isNumber() { isNaturalNumber $1 || isInteger $1 || isFloat $1; } 
```

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2010-06-12T14:52:19.410

[http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_04_03.html](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_04_03.html)

您还可以使用 bash 的字符类。

```
if [[ $VAR = *[[:digit:]]* ]]; then
 echo "$VAR is numeric"
else
 echo "$VAR is not numeric"
fi 
```

数字将包括空格、小数点和表示浮点的“e”或“E”。

但是，如果您指定 C 风格的十六进制数，即“0xffff”或“0XFFFF”，[[:digit:]] 将返回 true。这里有点陷阱，bash 允许您执行“0xAZ00”之类的操作，并且仍然将其计为一个数字（这不是来自 GCC 编译器的一些奇怪的怪癖，它允许您对 16 以外的基数使用 0x 表示法吗？ )

如果您的输入完全不受信任，您可能需要在测试它是否为数字之前测试“0x”或“0X”，除非您想接受十六进制数字。这将通过以下方式实现：

```
if [[ ${VARIABLE:1:2} = "0x" ]] || [[ ${VARIABLE:1:2} = "0X" ]]; then echo "$VAR is not numeric"; fi 
```

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2015-03-09T17:05:21.447

我使用 printf 作为提到的其他答案，如果您提供格式字符串“%f”或“%i”，printf 将为您进行检查。比重新发明检查更容易，语法简单而简短，并且 printf 无处不在。所以在我看来这是一个不错的选择——你也可以使用下面的想法来检查一系列的东西，它不仅对检查数字有用。

```
declare  -r CHECK_FLOAT="%f"  
declare  -r CHECK_INTEGER="%i"  

 ## <arg 1> Number - Number to check  
 ## <arg 2> String - Number type to check  
 ## <arg 3> String - Error message  
function check_number() { 
  local NUMBER="${1}" 
  local NUMBER_TYPE="${2}" 
  local ERROR_MESG="${3}"
  local -i PASS=1 
  local -i FAIL=0   
  case "${NUMBER_TYPE}" in 
    "${CHECK_FLOAT}") 
        if ((! $(printf "${CHECK_FLOAT}" "${NUMBER}" &>/dev/random;echo $?))); then 
           echo "${PASS}"
        else 
           echo "${ERROR_MESG}" 1>&2
           echo "${FAIL}"
        fi 
        ;;                 
    "${CHECK_INTEGER}") 
        if ((! $(printf "${CHECK_INTEGER}" "${NUMBER}" &>/dev/random;echo $?))); then 
           echo "${PASS}"
        else 
           echo "${ERROR_MESG}" 1>&2
           echo "${FAIL}"
        fi 
        ;;                 
                     *) 
        echo "Invalid number type format: ${NUMBER_TYPE} to check_number()." 1>&2
        echo "${FAIL}"
        ;;                 
   esac
} 
```

`>$ var=45`

`>$ (($(check_number $var "${CHECK_INTEGER}" "Error: Found $var - An integer is required."))) && { echo "$var+5" | bc; }`

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2015-09-30T09:34:40.183

我喜欢 Alberto Zaccagni 的回答。

```
if [ "$var" -eq "$var" ] 2>/dev/null; then 
```

重要的先决条件： - 没有产生子 shell - 没有调用 RE 解析器 - 大多数 shell 应用程序不使用实数

但是如果`$var`很复杂（例如关联数组访问），并且如果数字是非负整数（大多数用例），那么这可能更有效？

```
if [ "$var" -ge 0 ] 2> /dev/null; then .. 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2013-10-27T09:57:37.447

你也可以像这样使用“let”：

```
[ ~]$ var=1
[ ~]$ let $var && echo "It's a number" || echo "It's not a number"
It\'s a number
[ ~]$ var=01
[ ~]$ let $var && echo "It's a number" || echo "It's not a number"
It\'s a number
[ ~]$ var=toto
[ ~]$ let $var && echo "It's a number" || echo "It's not a number"
It\'s not a number
[ ~]$ 
```

但我更喜欢使用 "=~" Bash 3+ 运算符，就像这个线程中的一些答案一样。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2021-06-30T20:40:21.163

几乎就像你想要的语法一样。只需要一个功能`isnumber`：

```
#!/usr/bin/bash

isnumber(){
  num=$1
  if [ -z "${num##*[!0-9]*}" ]; 
    then return 1
  else
    return 0
  fi
}

$(isnumber $1) && VAR=$1 || echo "need a number";
echo "VAR is $VAR" 
```

测试：

```
$ ./isnumtest 10
VAR is 10
$ ./isnumtest abc10
need a number
VAR is 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2013-03-04T17:10:49.100

要捕获负数：

```
if [[ $1 == ?(-)+([0-9.]) ]]
    then
    echo number
else
    echo not a number
fi 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2016-01-06T09:27:16.040

```
printf '%b' "-123\nABC" | tr '[:space:]' '_' | grep -q '^-\?[[:digit:]]\+$' && echo "Integer." || echo "NOT integer." 
```

`-\?`如果您不接受负整数，请删除in grep 匹配模式。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2018-05-06T21:27:31.103

在这里用一个正则表达式做同样的事情，测试整个部分和小数部分，用点分隔。

```
re="^[0-9]*[.]{0,1}[0-9]*$"

if [[ $1 =~ $re ]] 
then
   echo "is numeric"
else
  echo "Naahh, not numeric"
fi 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-05-04T12:50:42.060

我使用以下（对于整数）：

```
## ##### constants
##
## __TRUE - true (0)
## __FALSE - false (1)
##
typeset -r __TRUE=0
typeset -r __FALSE=1

## --------------------------------------
## isNumber
## check if a value is an integer 
## usage: isNumber testValue 
## returns: ${__TRUE} - testValue is a number else not
##
function isNumber {
  typeset TESTVAR="$(echo "$1" | sed 's/[0-9]*//g' )"
  [ "${TESTVAR}"x = ""x ] && return ${__TRUE} || return ${__FALSE}
}

isNumber $1 
if [ $? -eq ${__TRUE} ] ; then
  print "is a number"
fi 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2010-10-16T22:37:30.350

我尝试了 Ultrasawblade 的配方，因为它对我来说似乎最实用，但无法让它发挥作用。最后，我设计了另一种方法，与其他参数替换一样，这次使用正则表达式替换：

```
[[ "${var//*([[:digit:]])}" ]]; && echo "$var is not numeric" || echo "$var is numeric" 
```

它删除了 $var 中的每个 :digit: 类字符，并检查我们是否留下了一个空字符串，这意味着原始字符串只有数字。

我喜欢这个的是它的小尺寸和灵活性。在这种形式下，它仅适用于非定界的、以 10 为基数的整数，但您当然可以使用模式匹配来满足其他需求。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2010-12-24T06:02:38.293

Quick & Dirty：我知道这不是最优雅的方式，但我通常只是在其中添加一个零并测试结果。像这样：

```
function isInteger {
  [ $(($1+0)) != 0 ] && echo "$1 is a number" || echo "$1 is not a number"
 }

x=1;      isInteger $x
x="1";    isInteger $x
x="joe";  isInteger $x
x=0x16 ;  isInteger $x
x=-32674; isInteger $x 
```

如果 $1 不是整数，$(($1+0)) 将返回 0 或炸弹。例如：

```
function zipIt  { # quick zip - unless the 1st parameter is a number
  ERROR="not a valid number. " 
  if [ $(($1+0)) != 0 ] ; then  # isInteger($1) 
      echo " backing up files changed in the last $1 days."
      OUT="zipIt-$1-day.tgz" 
      find . -mtime -$1 -type f -print0 | xargs -0 tar cvzf $OUT 
      return 1
  fi
    showError $ERROR
} 
```

注意：我想我从没想过检查会导致整个脚本炸弹的浮点数或混合类型......在我的情况下，我不希望它更进一步。我将尝试使用 mrucci 的解决方案和 Duffy 的正则表达式 - 它们似乎是 bash 框架中最强大的......

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2012-02-13T13:17:20.790

我发现了一个很短的版本：

```
function isnum()
{
    return `echo "$1" | awk -F"\n" '{print ($0 != $0+0)}'`
} 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2012-08-14T19:40:00.373

*   要检查的变量

    `number=12345`或`number=-23234`或`number=23.167`或`number=-345.234`

*   检查数字或非数字

    `echo $number | grep -E '^-?[0-9]*\.?[0-9]*$' > /dev/null`

*   根据上述退出状态决定进一步的行动

    `if [ $? -eq 0 ]; then echo "Numeric"; else echo "Non-Numeric"; fi`

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2016-04-26T15:20:04.083

从 13 年 10 月开始跟进[David W 的回答](//stackoverflow.com/a/19614406)，如果使用`expr`它可能会更好

```
test_var=`expr $am_i_numeric \* 0` >/dev/null 2>&1
if [ "$test_var" = "" ]
then
    ...... 
```

如果是数字，乘以 1 会得到相同的值（包括负数）。否则你会得到`null`你可以测试的

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2021-07-13T17:28:16.210

易于理解和兼容的解决方案，带有`test`命令：

```
test $myVariable -eq 0 2>/dev/null
if [ $? -le 1 ]; then echo 'ok'; else echo 'KO'; fi 
```

如果 myVariable = 0，则返回码为 0
如果 myVariable > 0，则返回码为 1
如果 myVariable 不是整数，则返回码为 2

* * *

## 回答 #36

> 赞同：-1
> 
> 时间：2019-06-02T19:55:56.073

在所有情况下，接受的答案对我都不起作用 BASH 4+ 所以：

```
# -- is var an integer? --
# trim leading/trailing whitespace, then check for digits return 0 or 1
# Globals: None
# Arguments: string
# Returns: boolean
# --
is_int() {
    str="$(echo -e "${1}" | sed -e 's/^[[:space:]]*//' -e 's/[[:space:]]*$//')"
    case ${str} in ''|*[!0-9]*) return 1 ;; esac
    return 0
} 
```

如何使用它 ？

有效（将返回 0 = true）：

```
is_int "100" && echo "return 0" || echo "return 1" 
```

无效（将返回 1 = false）：

```
is_int "100abc" && echo "returned 0" || echo "returned 1"
is_int ""  && echo "returned 0" || echo "returned 1"
is_int "100 100"  && echo "returned 0" || echo "returned 1"
is_int "      "  && echo "returned 0" || echo "returned 1"
is_int $NOT_SET_VAR  && echo "returned 0" || echo "returned 1"
is_int "3.14"   && echo "returned 0" || echo "returned 1" 
```

输出：

```
returned 0
returned 1
returned 1
returned 1
returned 1
returned 1
returned 1 
```

请注意，在 Bash 中，1 = 假，0 = 真。我只是把它打印出来，而不是像这样的东西更有可能：

```
if is_int ${total} ; then
    # perform some action 
fi 
```

* * *

## 回答 #37

> 赞同：-3
> 
> 时间：2014-03-26T13:27:09.627

接受的答案在这里不起作用，我在 MacOS 上。以下代码有效：

```
if [ $(echo "$number" | grep -c '^[0-9]\+$') = 0 ]; then 
    echo "it is a number"
else
    echo "not a number"
fi 
```

* * *

## 回答 #38

> 赞同：-3
> 
> 时间：2016-09-25T16:26:50.850

堆栈弹出一条消息，问我是否真的要在 30 多个答案后回答？但是当然！！！使用 bash 新功能，这里是：（评论后我做了更改）

> ~~函数 isInt() { ([[ $1 -eq $(( $1 + 0 )) ]] 2>/dev/null && [[ $1 != '' ]] && echo 1) || 回声''}~~

```
function isInt() {
   ([[ $1 =~ ^[-+0-9]+$  ]] && [[ $1 -eq $(( $1 + 0 )) ]] 2>/dev/null && [[ $1 != '' ]] && echo 1) || echo ''
} 
```

支持：

```
===============out-of-the-box==================
 1\. negative integers (true & arithmetic),
 2\. positive integers (true & arithmetic),
 3\. with quotation (true & arithmetic),
 4\. without quotation (true & arithmetic),
 5\. all of the above with mixed signs(!!!) (true & arithmetic),
 6\. empty string (false & arithmetic),
 7\. no value (false & arithmetic),
 8\. alphanumeric (false & no arithmetic),
 9\. mixed only signs (false & no arithmetic),
================problematic====================
 10\. positive/negative floats with 1 decimal (true & NO arithmetic),
 11\. positive/negative floats with 2 or more decimals (FALSE & NO arithmetic). 
```

**只有当**与进程替换结合使用时，才能从函数中获得真/假，因为bash`[[ $( isInt <arg> ) ]]`中没有*逻辑类型，也没有函数的**返回*值。

当测试表达式的结果错误时，我使用大写，而应该是相反的！

通过“算术”，我的意思是 bash**可以**像以下表达式一样进行数学运算：`$x=$(( $y + 34))`.

当在数学表达式中参数按预期运行时，我使用“算术/无算术”，当它与预期相比行为不端时，我使用“无算术”。

如您所见，只有没有 10 和 11 是有问题的！

完美的！

PS：请注意，**最**流行的答案在案例 9 中**失败！**

* * *

## 回答 #39

> 赞同：-4
> 
> 时间：2009-04-30T15:25:37.870

这有点粗糙，但对新手更友好。

```
if [ $number -ge 0 ]
then
echo "Continue with code block"
else
echo "We matched 0 or $number is not a number"
fi 
```

如果 $number 不是数字，这将导致错误并打印“Illegal number:”，但它不会跳出脚本。奇怪的是，我找不到一个测试选项来测试一个整数。这里的逻辑将匹配任何大于或等于 0 的数字。

* * *

## 回答 #40

> 赞同：-5
> 
> 时间：2011-09-04T09:46:15.763

下面是我编写的一个脚本，用于与 Nagios 的脚本集成，到目前为止它工作正常

```
#!/bin/bash
# Script to test variable is numeric or not
# Shirish Shukla
# Pass arg1 as number
a1=$1
a=$(echo $a1|awk '{if($1 > 0) print $1; else print $1"*-1"}')
b=$(echo "scale=2;$a/$a + 1" | bc -l 2>/dev/null)
if [[ $b > 1 ]]
then
    echo "$1 is Numeric"
else
    echo "$1 is Non Numeric"
fi 
```

例如：

```
# sh isnumsks.sh   "-22.22"
-22.22 is Numeric

# sh isnumsks.sh   "22.22"
22.22 is Numeric

# sh isnumsks.sh   "shirish22.22"
shirish22.22 is Non  Numeric 
```

# php - 使用带有文件上传脚本的表单变量

> ID：806910
> 
> 赞同：1
> 
> 时间：2009-04-30T13:30:38.770
> 
> 标签：php, html, forms

我将此表单用作文件上传表单（作为更大的 php 脚本的一部分，$pk 已在实际中进行了清理）：

```
<?php

if (isset($_GET["pk"]))
 { $pk = $_GET["pk"];}
echo '<form action="up.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<input type="hidden" name="pk" value="$pk">
<br />
<input type="submit" name="submit" value="Submit" />
</form>';
?> 
```

我正在使用以下（非常修剪的）代码来处理上传。任何语法错误都是我使用的制表符的结果。

```
<?php
 if (isset($_GET["pk"])) {
    $pk = $_GET["pk"];
}
$con = mysqli_connect("localhost","x","x", "x");
echo "Upload: " . $_FILES["file"]["name"] . "<br />";
echo "Type: " . $_FILES["file"]["type"] . "<br />";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";
move_uploaded_file($_FILES["file"]["tmp_name"],
      "./" . $_FILES["file"]["name"]);
echo "Stored in: " . "./" . $_FILES["file"]["name"];
$fileQuery = "INSERT INTO FILES VALUES (?, ?)";
if ($fileInsert = $con->prepare($fileQuery)) {
    $fileInsert->bind_param("ss", $pk, $_FILES["file"]["name"]);
    $fileInsert->execute();
    $fileInsert->close();
} else {
    print_r($con->error);
}
?> 
```

我想知道的是如何访问 $pk。它是否已经通过表单传递给处理代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T13:34:05.983

```
$_POST['pk'] 
```

但`$pk`我猜你会看到，因为你使用单引号来回显字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T13:37:41.433

建议：`$pk`不设置。

所以尝试使用`$_REQUEST['pk']`而不是`_GET`

此外，您的回声中的单引号不会评估 $pk。改变

```
input type="hidden" name="pk" value="$pk" 
```

到

```
input type="hidden" name="pk" value="' . $pk . '" 
```

干杯，T。

# c# - 这是工厂方法创建模式吗？

> ID：806911
> 
> 赞同：43
> 
> 时间：2009-04-30T13:30:43.743
> 
> 标签：c#, design-patterns, factory-pattern, creation, static-factory

我已经使用工厂方法创建模式有一段时间了。我最近才被告知：

```
public static class ScheduleTypeFactory
{
    public static IScheduleItem GetScheduleItem(ScheduleTypeEnum scheduleType)
    {
        IScheduleItem scheduleItem = null;

        switch (scheduleType)
        {
            case ScheduleTypeEnum.CableOnDemandScheduleTypeID:
                {
                    scheduleItem = new VODScheduleItem();
                    break;
                }
            case ScheduleTypeEnum.BroadbandScheduleTypeID:
                {
                    scheduleItem = new VODScheduleItem();
                    break;
                }
            case ScheduleTypeEnum.LinearCableScheduleTypeID:
                {
                    scheduleItem = new LinearScheduleItem();
                    break;
                }
            case ScheduleTypeEnum.MobileLinearScheduleTypeID:
                {
                    scheduleItem = new LinearScheduleItem();
                    break;
                }
        }

        return scheduleItem;
    }
} 
```

不是我的“技术”负责人的工厂方法创建模式，没有告诉我原因或给我她的解释。我恳请解释，她告诉我她没有时间。我被告知只需重命名它。如果我错了，那么我无疑会接受我多年来一直错误地实施这一点。这是您将如何实现工厂方法创建模式的方式吗？提前致谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-01T14:40:53.707

我同意将该方法称为“工厂方法”，尽管该设计并非严格意义上的“工厂方法模式”。
这是一个关键点（来自维基百科）：

> ...Factory 方法允许类将实例化推迟到子类。”

由于您的类是静态的并且方法是静态的（因此是非虚拟的），因此不可能“推迟”。

从概念上讲，还要注意，这种实现虽然提供了封装，但不会解耦/延迟任何决策。

话虽如此，同一篇维基百科文章确实将此模式呈现为“工厂方法模式” 的**变体。**

摘要摘要：在我看来，这个片段不是“工厂方法OO设计模式”的*正确*实现，因为它不满足“类延迟实例化到子类”。不过，我个人会将此解决方案自由地称为“工厂方法”。

要使其成为*真正的*工厂方法模式，您需要允许该方法被子类覆盖。即工厂类（ScheduleTypeFactory）需要是可扩展的（即非静态的），GetScheduleItem需要是虚拟的。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-04-30T13:32:34.503

对我来说，当然看起来像工厂模式。我认为您的实施没有任何问题。

从[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)：

> 工厂模式的本质是“定义一个用于创建对象的接口，但让子类决定实例化哪个类。工厂方法让一个类将实例化推迟到子类。”

这正是你正在做的。

作为旁注：一个好的经验法则是，每当有人告诉您某事并且无法或不愿意为其陈述提供理由时，他们很有可能根本没有资格发表陈述。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-04-30T13:34:00.023

是的，这是工厂模式。我唯一的评论是，对于您没有专门处理的枚举值，您会默默地失败。这可能是意料之中的，但我喜欢在这样的语句末尾添加以下内容

```
default:
  throw new InvalidOperationException("Invalid Enum Value"); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-09-13T23:35:38.983

您的代码片段在[Head First Design Patterns](https://rads.stackoverflow.com/amzn/click/com/0596007124)中被称为“简单工厂”（第 117 页）。[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)
的主要区别是*ConcreteCreator*（比较右上角的图表），在您的情况下这是一个简单的类。在“真实模式”中，工厂类是带有抽象工厂类的抽象类。因此，还有一个抽象级别。但是，对于许多用例，您的*简单工厂*就足够了。

 **简单工厂 [简单工厂 http://yuml.me/7221a4c9](http://yuml.me/7221a4c9) 工厂方法模式 [工厂方法模式 http://yuml.me/3d22eb4e](http://yuml.me/3d22eb4e)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-12-07T11:36:50.320

**您的线索是正确的** （抱歉格式化，但这个答案需要一些它才能在说明线索是白痴的主线之间看到）：GOF 书和 Head First 都不是工厂方法。

高飞：

> “定义一个用于创建对象的接口，但让子类决定要实例化哪个类。工厂方法让类将实例化推迟到子类。”</p>

在您的示例中，它**不是决定**.

这些年来，您是否错误地实施了它？不，您只是没有实现工厂模式，但有时被称为“简单工厂模式”，它可能已经很好地完成了这项工作。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-04-30T13:37:51.637

我认为它传统上被称为简单工厂模式，以区别于“真正的”[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory_pattern)模式。可能是您没有遵守某种内部命名惯例。不过，她真的应该解释一下自己。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-05-01T13:05:47.807

我很惊讶这么多人说这是工厂模式。（所以很可能我想错了，所以请告诉我。）

在我看来，你所拥有的只是设计的一部分。如果您从客户那里调用它，它被称为“简单”工厂，但它并不真正被视为设计模式。（不要误会我的意思，我一直这样做）。

工厂设计模式将声明您的工厂继承/实现抽象工厂/工厂接口。

然后，在需要使用工厂（客户端）的类中，将工厂的类型设置为抽象/接口，创建一个具体工厂：即 --> IFactory factory = new ConcreteFactory();

然后，具体工厂将创建您的 IScheduleItem（留给工厂实际创建具体类型）。

最后，我认为重点在于松散耦合。虽然“简单”工厂将产品的构建与客户松散地耦合在一起，但它并没有将工厂解耦。工厂模式也解耦了工厂。

话又说回来，现在还早，我还没有喝咖啡，而且我有一个讨厌的习惯，即发布绝对可怕的回复，错过了问题的全部要点。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-04-30T13:34:07.030

对我来说看起来像一个（基本）工厂......在许多工厂中，实现更复杂（可能涉及在运行时解析的类型），但这不是（AFAIK）要求。我要添加的唯一其他批评是结合案例，如果您不认识类型，请做一些更戏剧性的事情......

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-04-30T14:23:46.783

这就是工厂模式，但它不一定是最可维护的变体。 **一个更易于维护的变体**`ScheduleTypeEnum`将在值和实际具体子类型之间维护某种全局映射`IScheduleItem`——这样，您可以用`switch`查找映射来替换语句。

**为什么它更易于维护？***因为子类作者可以在他们派生类的位置* 向地图添加对，而不是在`GetScheduleItem()`工厂函数本身中。因此后者永远不需要更新；它不断更新。

在 C++ 中，您可以使用全局来做到这一点`std::map`——对于每个具体的子类，子类的作者添加了一个虚拟全局变量，该变量实际上只是在其构造函数中注册该类（通过添加到映射中），该构造函数在程序启动时运行。我确信在 C# 中有一种方便的方法可以做同样的事情。

（C++ 大师 Herb Sutter 在[这里有一个有趣的描述](http://www.ddj.com/cpp/184403786)，但它相当 C++-heavy。）

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-04-30T14:31:25.860

对我来说看起来像工厂模式。告诉你的技术主管你没有时间解释她为什么错了。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-04-30T13:35:25.980

好吧，维基百科说[这是](http://en.wikipedia.org/wiki/Factory_method#Encapsulation)一种工厂方法：

```
public class ImageReaderFactory 
{
    public static ImageReader getImageReader( InputStream is ) 
    {
        int imageType = figureOutImageType( is );

        switch( imageType ) 
        {
            case ImageReaderFactory.GIF:
                return new GifReader( is );
            case ImageReaderFactory.JPEG:
                return new JpegReader( is );
            // etc.
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-04-30T13:34:53.673

`IScheduleItem`它确实是一个“工厂”，因为您有一个基于某种逻辑返回特定实例的方法；但是，考虑到您使用的是 switch 语句，它可能不是最好的实现或最可维护的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-30T14:02:50.330

技术主管的想法可能是工厂模式是替换同一个对象中的构造函数，而不是返回子类，或者可能只返回超类的子类，而不是不相关的对象。这是错误的，但可能是这样的想法。

Wikipedia 将您的模式列为示例这一事实表明它是正确的工厂模式。这些模式被定义为为通用解决方案提供通用语言，因此很明显，如果 Wikipedia 将其作为示例显示，它就是通用语言的一部分。关于抽象意义上的“工厂模式”是什么的学术辩论忽略了模式的重点。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-30T14:23:49.187

马上夺回权力！只需从措辞中删除“类型”即可。ScheduleFactory FTW。等等，这是“Schedules”还是“ScheduleItems”的工厂？如果是 scheduleitems，那么工厂应该被称为“ScheduleItemFactory”。表现力！！！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-30T13:34:30.333

是的，这就是工厂模式。你的技术主管错了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-30T13:36:00.800

对我来说，这看起来像是一个基本的工厂模式。我很想知道为什么您的技术主管不认为这是一种模式。

我也很失望她不会花时间解释事情。之前在团队中担任过技术主管，花时间解释你的决定是很重要的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-04-30T13:36:09.520

它是工厂方法模式，至少根据维基百科： [http ://en.wikipedia.org/wiki/Factory_method_pattern](http://en.wikipedia.org/wiki/Factory_method_pattern)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-05-01T14:20:34.037

我从模式和实践课程中学到的对工厂模式的最简单解释是，如果您依赖另一个类来创建您的类的实例，那么您就是在使用工厂模式。

当然，通常你想通过使你的类抽象或接口来添加一个间接层。

这是非常简化的视图，但无论哪种方式，您都在使用工厂模式。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2010-10-29T04:47:39.213

您的技术在重命名该方法时是正确的：

```
public static IScheduleItem GetScheduleItem(ScheduleTypeEnum scheduleType) 
```

方法的作用不是获取某物，而是**创造**某物。你如何决定应该创建哪个 scheduleType？似乎应该封装逻辑而不是类型的开关。

另外为什么类上的**静态**？你从哪里使用它？

```
public class ScheduleTypeFactory
{
    public static IScheduleItem createScheduleFrom(ScheduleTypeEnum scheduleType)
    {

        switch (scheduleType)
        {
            case ScheduleTypeEnum.CableOnDemandScheduleTypeID:
            case ScheduleTypeEnum.BroadbandScheduleTypeID:
                 return new VODScheduleItem();
             case ScheduleTypeEnum.LinearCableScheduleTypeID:
             case ScheduleTypeEnum.MobileLinearScheduleTypeID:
                    return new LinearScheduleItem();
        }

       raise InvalidSchedule;
    }
} 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2009-04-30T15:11:14.347

那是教科书的工厂模式。

一些文本称其为简单工厂模式，但我从未见过任何标准来说明“简单”的含义。

在我的实践中，工厂模式是对应于所需接口的具体类的任何智能创建。

但是，为什么要与您的技术负责人争夺命名方法。重新命名，继续你的生活。

# bde - BDE 管理员的奇怪行为

> ID：806913
> 
> 赞同：1
> 
> 时间：2009-04-30T13:30:59.780
> 
> 标签：bde

使用我的普通用户帐户（具有本地管理员权限）登录到我的 Windows XP SP2 计算机，当我从控制面板或直接从 BDEADMIN.EXE 启动 BDE 管理员时，我从来没有得到 GUI。它显示在我的任务栏上，并显示在任务管理器中，但 GUI 从未出现。我可以通过右键单击任务栏并选择关闭来关闭程序。（注意“从不”是指不在启动程序的 5 分钟内）

如果我使用不同的用户帐户（也具有本地管理员权限）登录到同一台计算机，当我启动 BDE 管理员时，它会在几秒钟内加载 GUI。

我以前可以在以我的普通用户帐户登录时使用 BDE 管理员，所以这并不是一直存在的问题。

虽然这个问题可能与编程没有直接关系，但当我不得不注销并重新登录几次以更改我的 BDE 配置时，它确实让开发和测试变得很痛苦。

我完全被难住了。知道什么可能导致这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T17:17:52.357

一种想法是，您可能在此框上运行了两个屏幕并将窗口拖离屏幕。

只需搜索控制窗口打开位置的注册表项并删除它们。或者，您应该能够右键单击任务栏中的程序并选择移动。然后使用箭头键将其恢复。

无论如何，我投票结束。

# javascript - 点击后如何禁用链接一段时间？

> ID：806914
> 
> 赞同：2
> 
> 时间：2009-04-30T13:31:00.810
> 
> 标签：javascript, html

为了防止不耐烦的用户过于频繁地单击指向 webstart 应用程序的链接，我尝试在第一次调用超链接后将其禁用几秒钟。

```
<a href="file.jnlp" onclick="if (!this.clicked){this.clicked = true; setTimeout('this.clicked = false' ,10000); return true;} return false"> 
```

上面的代码仅适用于禁用链接，但在 10 秒超时后不会重新启用。

当我在 setTimeout 调用中检查“this.clicked”变量时，我发现它不是真的（它应该是）。也许我在这里缺少一些基本的 JS 知识..

或者也许有不同的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-30T13:40:09.260

首先将 this 函数添加到 Javascript 脚本块

```
function Debounce()
{

    var self = this
    if (this.clicked) return false;

    this.clicked = true;
    setTimeout(function() {self.clicked = false;}, 10000);

    return true;
} 
```

现在将您的 onclick 更改为：-

```
onclick="return Debounce.call(this)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T13:36:23.730

使用您的代码只修改一小部分它可能会起作用

```
<a href="file.jnlp" onclick="if (!this.clicked){this.clicked = true; setTimeout(function(){this.clicked = false;} ,10000); return true;} return false"> 
```

看起来人们说这不起作用，并且没有围绕“这个”形成封闭

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T13:56:49.860

该`this`对象未在正在评估的代码中定义，该代码`setTimeout`在全局范围内完成。

给链接一个ID，然后使用`getElementById`例如

```
<a href="file.jnlp" id='my_link' onclick="if(!this.clicked){this.clicked = true; setTimeout('document.getElementById(\'my_link\').clicked = false;' ,10000); return true;} return false;"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T13:34:43.220

给这个锚点一个 ID，然后将你的超时调用更改为：

```
setTimeout('document.getElementById("<id>").clicked = false;' , 10000); 
```

我认为当计时器到来时，不会对“this”进行任何评估。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T13:37:25.337

```
var a=this;
setTimeout(function(){a.clicked = false} ,10000); 
```

# asp.net - 如何捕捉 ModalPopupExtenders JavaScript Hide 调用？

> ID：806926
> 
> 赞同：1
> 
> 时间：2009-04-30T13:32:56.843
> 
> 标签：asp.net, javascript, asp.net-ajax, modalpopupextender

我有一个奇怪的情况，当通过 JavaScript 打开模式弹出窗口时（通过执行 a`.open`或`.click`在打开按钮上执行 a ），它会自动隐藏。使用打开按钮（即 ）时一切正常`TargetControl`。

重新表述这个问题 - 我应该使用哪些关键字来搜索`ScriptResource.axd`或任何其他脚本文件以找到放置断点的正确位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T14:02:23.730

了解如何捕获隐藏调用 - 它位于生成的 ScriptResource.axd 文件之一中。只需启用脚本调试并打开您的页面，VS 将加载页面和所有 JS 文件，然后您可以搜索 hide 或 for `this._hideImplementation()`. 在单独的说明中，我仍然不知道为什么要关闭弹出窗口，但我有预感它与 UpdatePanel 有关。

# visual-studio-2008 - MSTest 中是否可以有多个“TestClass”？

> ID：806929
> 
> 赞同：1
> 
> 时间：2009-04-30T13:33:32.710
> 
> 标签：visual-studio-2008, mstest

我正在尝试在 MSTest 中编写单元测试，并且创建了两个 TestClass。当我查看测试列表编辑器时，显示的唯一测试是出现在其中一个类中的测试。

我不知道如何从这两个类中运行测试。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-08-29T23:57:31.453

（对于下一个通过谷歌到达这里寻找答案的人）

就我而言，以上均不适用。

使所有测试文件（以及其中的类）显示在测试资源管理器（VS2019）中的关键元素是**将`public`关键字添加到每个测试类**。以前用 Nunit 不需要它，但我们搬到了 MSTest，然后测试就*消失了*。添加`public`使它们再次出现：

```
[TestClass]
public class TestBibTeX    // <-- +public+
{
  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T14:24:27.983

我们的一些项目中有数百个测试用例。这不仅是可能的，而且是必不可少的。您很可能缺少测试类的类和/或方法的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T14:18:11.120

是的，这绝对是可能的，奇怪的是你所有的测试都没有出现。您的两个测试类都具有 [TestClass()] 属性吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-03T10:47:41.573

如果您的类和方法仅是**公开**的，那么它将在测试资源管理器中查看。我遇到了同样的问题，只有当我在类和方法前面应用**public关键字时才被删除。**

```
[TestClass]
    public class Class1
    {
        [TestMethod]
        public void Method1()
        {
}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-01T21:14:45.447

似乎清理解决方案、关闭 Visual Studio、删除所有 TestResults、删除 .vsmdi 文件、删除 .ncb 文件并重建解决方案已经解决了问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-02T20:03:08.853

我们在一个解决方案中有两个测试项目，测试列表显示了两个项目的所有测试。

我记得我过去遇到过这个问题，测试列表中缺少一些测试方法，我怀疑它与 .vsdmi 文件的错误有关。如果您使用源代码管理并允许多次签出，则可能会发生这种情况。

确保： 您的所有测试类都具有正确的属性。您所有的方法都具有适当的属性。

如果它仍然发生备份您的 .vsdmi 文件，请将其放在其他位置并删除项目树中的文件（很可能是根目录）。然后关闭并重新打开您的项目/解决方案并点击测试/窗口/测试视图...

希望这可以帮助！

# c - 结构中的 C 变量范围

> ID：806931
> 
> 赞同：0
> 
> 时间：2009-04-30T13:33:40.947
> 
> 标签：c, struct

我最近遇到了三种不同的情况`C`，我会在以下方面提供帮助：

1.  我的`C`代码有一个全局变量：

    ```
    int ref_buf; //declared in a header file 
    ```

    在函数定义中，我使用与参数相同的名称：

    ```
    void fun(int ref_buf, param2, param3)
    {
    } 
    ```

    它会覆盖最初定义的全局变量并导致错误吗？

2.  我可以`C`像这样在数据结构中声明一个静态变量吗？：

    ```
    struct my
    {
        int a;
        static int b;
    }; 
    ```

    它有效吗？是否有任何特定情况需要它？

3.  我可以按如下方式初始化单个结构变量：

    ```
    struct my
    {
        int a;
        int b = 4;
    }; 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-30T13:37:50.513

## 问题 1

该函数中对 ref_buf 的所有引用都将绑定到参数而不是全局变量。

## 问题2

这在 C 中是不合法的，但在 C++ 中是合法的。C 中的关键字 static 只能用于文件范围变量或局部变量。

## 问题 3

不，这在 C（或 C++）中是不合法的。您将需要创建一个工厂方法来处理这个问题。

```
my create_my() {
  my m;
  m.b = 4;
  return m;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-30T13:46:52.333

在 Q3：GCC 允许您初始化这样的结构（根据 C99 标准的要求）：

```
struct
{
    int a;
    int b;
} my = { .b = 4 }; 
```

[关于指定初始化程序的 GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T17:16:25.793

**1a)**局部变量和全局变量是独立的实体，因此局部变量不会覆盖全局变量。但是，在函数内部将无法访问全局变量（另请参见下面的注释）。

**1b)**它实际上并没有错，但肯定会引起混淆，而混淆会导致错误，因此最好为每个使用不同的名称。

**2)**不，这不合法 C。但是，您可以将整个结构设为静态。

**3）**不。你这样做：

```
struct my
{
    int a;
    int b;
} = {0, 4}; 
```

* * *

注 1：变量应在 .c 文件中声明，而不是在 .h 文件中。如果您需要使变量在多个文件中可访问，请在头文件中放置一个 extern 声明。

注 2：尽可能避免使用全局变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T13:48:06.043

1）局部变量总是优先，例如

```
int ref = 10;

void fun(int ref)
{
  printf("\n%d\n", ref);
}

int main()
{
 fun(252);
 return 0;
} 
```

显示：`252`

Qs 2 和 3 在 C 中不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T13:49:38.253

1.  是的，它会在技术上覆盖，但是一个好的编译器会警告你这种情况，并且你会在编译时出现“警告=错误”，所以这实际上不会编译。

2.  不需要，因为“我的”结构已经声明为静态的，因此它是为整个结构声明的。这为整个结构分配了内存，因此无需说“将已经是静态的结构的一部分并使其成为静态”。

3.  不，不在定义中，但是您可以在创建“实例”时，例如：

    ```
    struct my MY =
    {
        {0, 4}
    }; 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-30T13:36:42.170

问题1：我认为在本地范围内声明的变量需要优先考虑，它不应该覆盖它，但在声明变量的范围内它将被使用。

那是假设它可以编译。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-30T14:06:15.890

在第一季度：

不要在头文件中声明变量。如果您将该头文件包含在两个源文件中并将源文件一起编译，那么您就会遇到问题。也许你的链接器会让你摆脱它们，也许不会。

如果你真的需要全局变量，而且这种情况比典型的初学者想象的要少得多，请将类似的东西`extern int ref_buf;`放在头文件和`int ref_buf;`源文件中。这意味着有一个`ref_buf`，并且所有其他源文件都可以找到它。

函数参数本质上是一个新的同名变量，函数中的所有引用都会指向它。您将无法从该函数中访问全局变量。该函数创建了一个内部作用域，并且在内部作用域中声明的变量与在外部作用域中声明的变量不同。这可能会造成混淆，并且很容易创建错误，因此通常不鼓励使用相同名称和不同范围的变量。（不同结构定义中的同名变量通常不会混淆，因为您必须指定哪个结构包含该变量。）

编译器会编译函数，但是好的编译器会发出警告信息。如果它因为一个变量遮蔽另一个同名变量而拒绝编译，那么它就不是真正的 C 编译器。

# language-agnostic - 一切都是流？

> ID：806941
> 
> 赞同：5
> 
> 时间：2009-04-30T13:34:55.653
> 
> 标签：language-agnostic

我最近从事的一些 Web 项目使用流引擎作为演示和/或（或多或少）业务层的中央抽象。回顾我的经历，老实说，我不喜欢以流程为中心的方法。甚至相反。我看到在使用流作为中心抽象的项目中会出现相同的症状。

*   **一切都是流动的。**你不只是启动一个应用程序，不，你“进入主流程”，即使它只是为了显示一个带有巨大调度程序的菜单。我并不反对这样的流动。一些用例不断出现，需要在其他用例（LookupCustomer，...）的各个点包含，但对于以流为中心的人来说，*一切*都是流，即使是......不是流的东西。

*   **碎片化。**基于流的应用程序往往有许多分散在整个代码中的逻辑（动作、命令、准备视图的代码片段......）。映射进出这些操作会增加开销、乏味并且会使代码膨胀。尽管遵循抽象流程很容易，但实际上弄清楚这些小（或大）代码块中发生了什么是另一回事。虽然每种应用程序风格都允许人们编写糟糕且不一致的代码，但以流为中心的应用程序使这样做变得特别容易。

*   **配置文件。**大多数应用程序使用一些 XML 格式来声明伴随状态变化的流和动作。编写应用程序所使用的语言（比如 Java、C#、Ruby 等）可能比 XML 格式更加丰富和富有表现力。何苦？

*   **流打破了封装。**如果给我一个组件，里面有一定的内嵌流逻辑，那么流应该是组件的一部分，而不应该是外部抽象。换句话说：流是组件的一部分，组件是自包含的。这是一个细节。当然，它可以参数化和填充，但组件应该“正常工作”。编写 Swing、GWT 或任何胖或丰富的接口应用程序的人不会为显式流抽象而烦恼。为什么我的 Web 应用程序应该有一个？给我GMail的流程图。

*   （编辑）**流程是程序性的。**如果您查看诸如 MVC 之类的“丰富”模式，其中包含事件和所有内容，相比之下，流程就显得苍白无力。您*正在*使用一种现代且富有表现力的语言来实现您的应用程序，对吧？因此，您*可以*比打孔卡和汇编器流行时的死板的“做这个，那个，那个，然后……”的方式做得更好。

促进以流为中心的开发的框架示例有 Struts、BTT、Spring Webflow 和 JSF。我还遇到过建立在普通 servlet 之上的国产流引擎。

这也是一篇有趣的文章：[http ://chillenious.wordpress.com/2006/07/16/on-page-navigation/](http://chillenious.wordpress.com/2006/07/16/on-page-navigation/)

您（仍然）认为 Web 应用程序（前端）的以流为中心的方法是一个好主意吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-16T11:05:03.997

一般来说，对于一个相对简单的问题，流似乎是一种不必要的企业化方法：我们希望确保用户通过我们的应用程序采用几个特定路径之一。更有启发性和洞察力的是检查*为什么*我们需要这条路径发生。是不是因为...

*   ...我们不希望他们与我们的应用程序交互，除非以严格预定义的方式？然后我们限制了应用程序的实用性，使我们的应用程序更难更改和使用。

*   ...如果人们偏离常规，我们担心我们的应用程序处理意外输入或处理我们没有预料到的状态的能力？然后，这说明了我们对验证框架的技术选择。

*   ...我们无法想象除了预定义的场景之外有人会使用该网站的场景吗？然后我们隐含地假设只有我们知道如何最好地使用它；我们限制了用户控制其交互的能力。

请注意，这些中的每一个都强调了应用程序开发和团队成员固有的问题，并且不是用户的错。所以我支持你的一般前提，即基于流程的方法往往存在许多问题。

主要问题是**流动不必要地增加了已经被其他机制更好地抽象的脆性。**例如，要实现“您需要在确认结帐前填写订单”之类的规则，不要制作工作流；有一个更好的`CustomerOrder`模型，它知道什么时候它没有所有必要的信息来允许`OrderConfirmation`. 如果您尝试向前跳过，您的模型和控制器应该处理下一个验证失败的问题`POST`。

本质上，流提取每个参与控制器的不同片段，并将它们收集到特定于每个流的新“流控制器”中。这不一定是一个坏主意，但它表明如果这种路径很容易单独定义，那么最初的控制器可能已经承担了太多的责任。例如，如果您以前有`OrderConfirmation`、`CustomerOrder`和`OrderCheckout`控制器，并且您正在考虑`Order`将所有三个链接在一起的流，**那么您可能应该考虑的是`Order`控制器**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T23:22:55.220

我认为定义流在 Web 应用程序中很有用。回答您的主要观点：

> 一切都是流。

这没有本质上的错误，它只是一个名字。流程可以是短的也可以是长的——我同意有一个“主要”流程来启动一切有点奇怪，但它在实践中并没有真正引起任何问题。

> 碎片化

您在这里有一些有效的观点，尽管我觉得对此做出最大贡献的是 DSL 的设计。例如，Spring WebFlow v2 在可读性和可理解性方面比 SWF v1 有了巨大的改进。

> 配置文件

我强烈不同意这一点。我觉得xml**是**表达这段代码的最好方式。如果您考虑一下 - 管理控制器、视图、状态更改和操作实际上只是“配置”而不是“代码”。而xml（在我看来）是表达配置的最佳方式。想想“控制器”这个词。控制器所做的只是直接和配置事物 - 调用服务、返回视图和模型等。不需要 Java 的任何丰富性或表现力来定义基本上只是 Web 应用程序的配置。

> 流打破封装

GMail 可以用一系列流程来表示。想想撰写和发送电子邮件所需的步骤数。流实际上只是定义了应用程序如何工作的连接——当然，您可以拥有许多相互交互的组件，但是您将它们配置为一起工作的方式本质上是您在应用程序中定义的流。在一个单独的 DSL 中明确显示这个流程对我来说似乎是个好主意，因为从根本上说它**是**分开的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T22:35:40.507

应该回答的第一个问题是流框架是否真的是您特定 Web 应用程序的最佳工具。我自己是 Spring Web Flow 的粉丝，但我只会在我的 Web 应用程序可以轻松分解为流并且应该严格控制导航的情况下使用它。如果导航非常松散，您可以从任何其他页面访问几乎任何页面，那么 SWF 就不是适合这项工作的工具。

正如您所提到的，流框架还有其他缺点。它们通常不是 RESTful，因此不可收藏。如果这与您想要的应用程序相冲突，那么 SWF 可能不适合您。

也就是说，SWF 和其他一些流框架提供了一些其他 Web 框架很少提供的功能。这包括双重提交问题和浏览器后退按钮和历史处理的完整解决方案。SWF 对这些功能的实现提供了一些额外的安全性。由于每个页面的流执行 ID 会随着应用程序的使用而变化，因此您可以免受强制浏览和跨站点请求伪造的一些保护。

在我看来，流的概念非常好，因为流倾向于反映用例。将数据范围限定为流或对话可以免除开发人员清理数据的责任，我认为这是一件非常好的事情。这就像手动内存管理和垃圾收集之间的区别。它不仅减少了我的工作量，而且消除了在我忘记清理属性时引入错误的可能性。我讨厌 Struts 的一件事是我需要在多个操作中复制我的清理代码以确保正确性。将数据范围限定为用例要容易得多。

流还为相关的操作和视图提供了上下文。如果我查看一个 struts-config 或 faces-config 文件，我可以看到各种导航规则或操作映射，但是我没有直接的上下文来将相关项目组合在一起。我必须手动跟踪配置，即使这样有时我也会卡住。使用 Struts，我需要查看特定的网页，以确定可以从视图中调用哪些操作。

使用 SWF，我可以清楚地看到与流相关的所有操作、视图和模型。使用 Eclipse 插件，我可以将其视为状态图。即使您不使用 eclipse，也很容易将流定义转换为状态图。这些图表对我自己、我的项目经理以及几乎任何想要了解用例如何执行的高级别的人都很有用。简而言之，将相关的事物分块在一起可以更容易理解，并且学习曲线更浅。这就是 OOP 如此受欢迎的原因之一。对于 Web 应用程序，将这些元素组合在一起形成一个用例的想法感觉很自然。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T07:20:42.467

> 一切都是流

一切真的都是一种流动。计算机程序一直是一个流程，并且将永远是一个包含这些过程的流程：

**输入 -> 过程 -> 输出**

MVC 设计模式其实与此相对应。

**控制器 -> 模型 -> 视图**

> 碎片化

你是对的。但我认为这个“问题”可能会因 IDE 的良好支持而减少。

> 配置文件

毫无疑问，xml 是表达配置的最佳方式。

> 流打破封装

我不同意这一点。您可以使用流程制作黑盒，然后在其他流程中使用这些黑盒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T09:46:36.943

恕我直言，最好将网络应用程序开发为独立模块，而不是“受流程约束”的模块。

由于当今大多数 Web 应用程序都是 ajaxy 应用程序，因此在页面上拥有独立的模块会有很大帮助。

配置可以由 XML 或 JSON 文件处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T17:42:45.673

Web 2.0 对“一切都是流”的概念提出了严峻挑战。当表示层完全转置到客户端层时，我们将回到基于事件处理的坚实且熟悉的（来自过去的 GUI）的基础上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-21T18:38:39.557

流的出现是由于传统应用程序交互与 Web 应用程序实际工作方式之间的继承不匹配。流只是一种方便的方式来描述更传统的建模为一系列 GUI 对话框（思考向导）的方式，其方式与网页的交付和交互方式兼容。想象一下，如果您正在编写一个传统程序，但每次用户运行该程序时，您只能显示一个对话框，并且当用户单击“确定”（或“取消”、“下一步”或“ Previous") 您的程序将终止。在这种情况下，您将如何对程序的预期行为进行建模（使问题进一步复杂化，假设许多用户在不同时间运行程序）？我想你会发现你宁愿很快达到类似于流的东西。

I think perhaps what you're really asking is, "Why are most flow frameworks so easy to abuse?", which naturally leads to the followup question "What can be done to fix that?".

# c# - C# 中的转义引号用于 javascript 消费

> ID：806944
> 
> 赞同：64
> 
> 时间：2009-04-30T13:35:52.640
> 
> 标签：c#, escaping

我有一个 ASP.Net Web 处理程序，它以 JSON 格式返回查询结果

```
public static String dt2JSON(DataTable dt)
{
    String s = "{\"rows\":[";
    if (dt.Rows.Count > 0)
    {
        foreach (DataRow dr in dt.Rows)
        {
            s += "{";
            for (int i = 0; i < dr.Table.Columns.Count; i++)
            {
                s += "\"" + dr.Table.Columns[i].ToString() + "\":\"" + dr[i].ToString() + "\",";
            }
            s = s.Remove(s.Length - 1, 1);
            s += "},";
        }
        s = s.Remove(s.Length - 1, 1);
    }
    s += "]}";
    return s;
} 
```

问题是有时返回的数据中有引号，我需要对这些进行 javascript 转义，以便可以正确地将其创建到 js 对象中。我需要一种方法来在我的数据中查找引号（不是每次都有引号）并在它们前面放置一个“/”字符。

示例响应文本（错误）：

```
{"rows":[{"id":"ABC123","length":"5""},
{"id":"DEF456","length":"1.35""},
{"id":"HIJ789","length":"36.25""}]} 
```

我需要逃避 " 所以我的回答应该是：

```
{"rows":[{"id":"ABC123","length":"5\""},
{"id":"DEF456","length":"1.35\""},
{"id":"HIJ789","length":"36.25\""}]} 
```

另外，我对 C# 很陌生（实际上是一般的编码），所以如果我的代码中的其他内容看起来很愚蠢，请告诉我。

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2011-11-29T13:07:30.640

对于 .net 4.0 + 有标准 `HttpUtility.JavaScriptStringEncode`

对于 Lone Coder 描述的早期西风解决方案非常好

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2010-04-21T06:39:27.733

这是我在[http://www.west-wind.com/weblog/posts/114530.aspx找到的一种有效且强大的方法](http://www.west-wind.com/weblog/posts/114530.aspx)

```
/// <summary>
/// Encodes a string to be represented as a string literal. The format
/// is essentially a JSON string.
/// 
/// The string returned includes outer quotes 
/// Example Output: "Hello \"Rick\"!\r\nRock on"
/// </summary>
/// <param name="s"></param>
/// <returns></returns>
public static string EncodeJsString(string s)
{
    StringBuilder sb = new StringBuilder();
    sb.Append("\"");
    foreach (char c in s)
    {
        switch (c)
        {
            case '\"':
                sb.Append("\\\"");
                break;
            case '\\':
                sb.Append("\\\\");
                break;
            case '\b':
                sb.Append("\\b");
                break;
            case '\f':
                sb.Append("\\f");
                break;
            case '\n':
                sb.Append("\\n");
                break;
            case '\r':
                sb.Append("\\r");
                break;
            case '\t':
                sb.Append("\\t");
                break;
            default:
                int i = (int)c;
                if (i < 32 || i > 127)
                {
                    sb.AppendFormat("\\u{0:X04}", i);
                }
                else
                {
                    sb.Append(c);
                }
                break;
        }
    }
    sb.Append("\"");

    return sb.ToString();
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2010-04-21T07:33:18.323

我认为您应该看一下 JavaScriptSerializer 类。它更加稳定，可以正确处理任何类型的数据或转义字符等。此外，您的代码看起来会更干净。

在您的情况下，您的课程可能如下所示：

```
public static String dt2JSON(DataTable dt) {
    var rows = new List<Object>();
    foreach(DataRow row in dt.Rows)
    {
        var rowData = new Dictionary<string, object>();
        foreach(DataColumn col in dt.Columns)
            rowData[col.ColumnName] = row[col];
        rows.Add(rowData);
    }
    var js = new JavaScriptSerializer();
    return js.Serialize(new { rows = rows });
} 
```

此方法将返回正确序列化的 json 字符串...例如，像这样：

```
{"rows":[{"id":1,"name":"hello"},{"id":2,"name":"bye"}]} 
```

玩得开心！:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-30T14:54:08.193

要正确转义 Javascript 的字符串文字，您首先转义所有反斜杠字符，然后转义引号（或撇号，如果您将它们用作字符串分隔符）。

所以，你需要的是：

```
value.Replace("\\","\\\\").Replace("\"","\\\"") 
```

还有什么让我感到惊讶的是，您正在循环中使用字符串连接。这很糟糕，因为它的扩展性非常差。+= 运算符不会在现有字符串的末尾添加字符（因为字符串是不可变的并且永远无法更改），而是将字符串和添加的字符复制到新字符串中。随着您每次复制越来越多的数据，每增加一行，该方法的执行时间就会大致增加一倍。改为使用 StringBuilder 来构建字符串。

使用`ColumnName`属性来获取列的名称而不是`ToString`方法。如果设置了该`ToString`方法，则返回`Expression`属性值，仅当未设置时才返回该`ColumnName`属性。

```
public static String dt2JSON(DataTable dt) {
   StringBuilder s = new StringBuilder("{\"rows\":[");
   bool firstLine = true;
   foreach (DataRow dr in dt.Rows) {
      if (firstLine) {
         firstLine = false;
      } else {
         s.Append(',');
      }
      s.Append('{');
      for (int i = 0; i < dr.Table.Columns.Count; i++) {
         if (i > 0) {
            s.Append(',');
         }
         string name = dt.Columns[i].ColumnName;
         string value = dr[i].ToString();
         s.Append('"')
            .Append(name.Replace("\\","\\\\").Replace("\"","\\\""))
            .Append("\":\"")
            .Append(value.Replace("\\","\\\\").Replace("\"","\\\""))
            .Append('"');
      }
      s.Append("}");
   }
   s.Append("]}");
   return s.ToString();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-22T17:15:02.480

这是@Bryan Legend 对 Linq 的回答的返工：

```
public static string EncodeJavaScriptString(string s)
    => string.Concat(s.Select(c => {
        switch (c)
        {
            case '\"': return "\\\"";
            case '\\': return "\\\\";
            case '\b': return "\\b";
            case '\f': return "\\f";
            case '\n': return "\\n";
            case '\r': return "\\r";
            case '\t': return "\\t";
            default: return (c < 32 || c > 127) && !char.IsLetterOrDigit(c) ? $"\\u{(int)c:X04}" : c.ToString();
        }})); 
```

[在线尝试！](https://dotnetfiddle.net/PoL4BM)

变更日志：

*   删除双引号包装，因为我在 js 中这样做
*   使用表达式主体
*   使用更清洁的开关
*   使用 Linq
*   添加对 Letter 的检查以允许`é`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-30T13:40:03.427

你为什么不这样做：

```
string correctResponseText = wrongResponseText.Replace("\"", "\\\""); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-30T13:41:08.557

```
string.Replace(<mystring>, @"\"", @"\\""); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-25T13:56:52.647

当我需要将字符串从 C# 发送到 html 标记时工作。

```
<buton onlick="alert('<< here >>')" />

HttpUtility.HtmlEncode 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-04-30T13:43:05.073

好吧，对于初学者来说，您不需要在键周围加上引号。

```
{rows:[,]} is valid.

and you could dt.Table.Columns[i].ToString().Replace("\","") 
```

但是如果你想保留双引号，单引号的工作方式与双引号在 JS 中的工作方式相同

否则你可以做

```
String.Format("{name: \"{0}\"}",Columns[i].ToString().Replace("\","")) 
```

# asp.net - 将报告呈现为 pdf 后，将 pdf 添加到 Reporting Services 报告

> ID：806961
> 
> 赞同：0
> 
> 时间：2009-04-30T13:40:01.243
> 
> 标签：asp.net, vb.net, reporting-services, pdf-generation, reportingservices-2005

我们正在使用 Reporting Services 生成采购订单，该订单在屏幕上显示之前呈现为 pdf。该报告运行良好，只是现在我们必须为每个 PO 添加条款和条件页面。我尝试将它放在页脚中，将其设置为仅显示在最后一页上——这不起作用。我也尝试将它添加到正文中，将“Page Break Before”属性设置为“true”。这可行，只是看起来仍然为页眉保留空间（即页眉的“在最后一页显示”属性设置为 false）。我无法获得填写页面的条款和条件。

有谁知道我如何将报告服务生成的 pdf 与条款和条件表的 pdf 版本附加或绑定？

注意：我们使用的是 ASP & VB.NET 2.0、Visual Studio 2005 和 SQL Server 2005。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T19:49:05.830

今天晚些时候发布并回答了一个可能满足您要求的类似问题：

[合并两个（或更多）PDF](https://stackoverflow.com/questions/808670/combine-two-or-more-pdfs)

查看 PDFSharp ......看起来很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-15T02:19:19.200

iTextSharp（java 版本 iText 的一个端口）是一个很好的开源库，我们正在使用它来做这件事。

# wpf - WPF ItemsControl 数据绑定 - 添加额外的初始控件

> ID：806967
> 
> 赞同：0
> 
> 时间：2009-04-30T13:40:52.393
> 
> 标签：wpf, data-binding, itemscontrol, wrappanel

我有以下 XAML 用于数据绑定项控件以显示组列表，其中包含一个标签和按钮以添加一个新组，首先出现：

```
<WrapPanel Orientation="Horizontal">
    <Label Content="Groups" />
    <Button x:Name="btnGroupAdd" Click="btnGroupAdd_Click" Content="+" />
    <ItemsControl ItemsSource="{Binding}" x:Name="_groupList" >
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal">
                </WrapPanel>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Border Padding="3" BorderThickness="1">
                    <WrapPanel>
                        <CheckBox x:Name="_groupEnabled" Click="GroupEnabled_Click" IsChecked="{Binding Path=Checked}">
                            <TextBlock x:Name="_groupName" Text="{Binding Path=Group.Name}" ></TextBlock>
                        </CheckBox>
                        <Button x:Name="_deleteGroup" FontStyle="Normal" Click="DeleteGroup_Click" />
                    </WrapPanel>
                </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

对于少数组，所有内容都显示在一行上。

> 组 + 组 1 组 2 组 3

当我添加更多组时，包含项目的换行面板会换行，但添加新组的初始标签和按钮位于其自己的行上，数据绑定组从下一行开始。

> 组 + 组
> 1 组 2 组 3组 4 组
> 5

我可以理解为什么会发生这种情况，因为包装面板是嵌套的。我的问题是：如何在内部包装面板中包含第一个标签和按钮，以使它们不单独排成一行？

> 组 + 组 1 组 2 组 3 组 4 组
> 5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T14:22:36.133

如果您对此感到满意：

> 组 + 组 1 组 2 组 3 组 4 组
>                 5

然后我建议使用 external`Grid`和 inner `WrapPanel`。否则，您的选择是：

1.  在您绑定到的集合中包含其他控件（`Label`和）或表示这些控件的视图模型。`Button`
2.  自己写`Panel`。

# oracle - 如何复制 Oracle 实例？

> ID：806968
> 
> 赞同：0
> 
> 时间：2009-04-30T13:40:55.233
> 
> 标签：oracle

如何复制 Oracle 实例？有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T15:47:16.320

对您的术语的一个小评论-“实例”实际上是在数据库服务器主机上运行的一组进程，您想要复制“数据库”。

正如其他人提到的，最好的方法是从原始数据库的 RMAN 备份开始。但是，由于 Oracle 9 RMAN 具有“DUPLICATE DATABASE”命令，如果您只是通过恢复生产备份（例如，重置 DBID、更改数据和日志文件位置）来制作副本，则该命令会处理很多以前需要的内务处理在控制文件中，设置数据库 GLOBAL_NAME 等）。

如果您不使用 RMAN，并且数据库较小，您可以编写脚本将每个表空间置于热备份模式，将该表空间的数据文件复制到备份位置，然后将该表空间从热备份中取出模式。您现在拥有一个可恢复的备份，可以将其移动到另一台主机以用于归档日志应用程序。这肯定会对原始数据库产生性能影响，应该是您最后的手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T14:34:42.577

好吧，大概你有一个备份（当然！），所以只需在你的测试服务器上测试你的备份恢复。

稍微严肃一点，这取决于您使用的版本，我相信较新版本的 RMAN 很容易，旧版本，您基本上将其作为备份恢复。

我过去是如何做到的，基本上是

1.  复制备份数据文件
2.  创建初始化文件
3.  创建一个新的控制文件是命令'CREATE CONTROLFILE SET DATABASE“TEST”RESETLOGS ARCHIVELOG'
4.  应用归档日志，然后使用 resetlogs 打开

这是一篇[文章](http://knol.google.com/k/parikshit-paul/clone-an-oracle-database/h9tmwul1rnso/2#)，它更详细地解释了该过程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T13:43:12.263

假设您希望复制模式和数据，请使用 exp 和 imp 命令导出数据库，然后使用 FROMUSER 和 TOUSER 参数将其作为另一个用户导入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T13:46:44.657

根据现有实例创建模板。然后，您可以创建其他实例。

# svn - Subversion 跨文件关键字替换

> ID：806974
> 
> 赞同：1
> 
> 时间：2009-04-30T13:42:12.237
> 
> 标签：svn

我的问题是：我不想在文件“A”中显示文件“B”的最新修订号。

Subversion 有一个名为“[关键字替换](http://svnbook.red-bean.com/en/1.4/svn.advanced.props.special.keywords.html#id2568644)”的功能。它用于在提交时将文件内容中的替换关键字替换为实际值。

但是是否可以在文件中添加一个关键字，将其替换为与其他文件相关的值？如果不是，我上面的原始问题状态的解决方案是什么？

我猜 Jeff Atwood 做到了，就在 StackOverflow 网站上。如果我没记错的话，他甚至在之前的播客中对此发表了评论。

```
<script type="text/javascript" src="/content/js/master.js?v=3067"></script> 
```

“v=3067”似乎是“master.js”的最新修订号。杰夫，你能帮帮我吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T14:08:17.180

我最近问了一些类似的问题-

*   [任何允许自定义 $Keywords$ 的源代码控制系统？](https://stackoverflow.com/questions/703746/any-source-control-systems-that-allow-custom-defined-keywords)
*   [使用 SVN 将一些模板文本包含到源文件中的好解决方案？](https://stackoverflow.com/questions/699778/a-good-solution-to-include-some-template-text-into-a-source-file-using-svn)

简短的回答是，使用 SVN，你不能这样做。

您唯一真正的选择是实施构建时解决方案来进行替换，例如使用 make 或 Ant（无论您使用什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T14:17:25.677

好吧，这个数字可以是以下两种情况之一：

1.  站点仓库的 HEAD 修订号
2.  对该特定文件的最后更改的修订号

在任何一种情况下，它都有一个特定的目的，以确保当用户获得一个引用 CSS 或 javascript 文件的网页时，如果版本号自用户上次访问以来发生了变化在同一页面，Web 浏览器将忽略该文件的本地缓存，并重新下载它。

除非您想将该引用固定到较旧的工作版本，否则我会说您可以使用 HEAD 修订号对其进行更新。从某种意义上说，这将是“安全的”，因为它会为您提供所需的内容，但可能会浪费带宽，因为它会强制重新下载可能已更改或未更改的文件。

如果您确实需要该链接的其他文件的修订号，那么我会说您应该使用小程序、自定义关键字系统和解析日志文件来推出自己的解决方案。

例如，您可以这样做：

```
rc="/content/js/master.js?v=#Rev(master.js)#" 
```

并有一个寻找这个的正则表达式：

```
#Rev\((?<filename>[^)])\)# 
```

然后你必须从 Subversion 读取日志文件，你可以用 XML 输出它。

# c++ - 如何解决这个 bad_alloc 问题？

> ID：806976
> 
> 赞同：0
> 
> 时间：2009-04-30T13:42:28.227
> 
> 标签：c++, poco, bad-alloc

我正在开发一个需要通过 FTP 进行交互的应用程序。对于这种交流，我目前在 Windows 上使用 C++、Visual Studio 和 Poco。

以下行导致 bad_alloc 异常...

```
ftp = new FTPClientSession("127.0.0.1", 21); 
```

所以我下去尝试先初始化一个StreamSocket，也失败了......

```
StreamSocket ss = new SocketAddress("127.0.0.1", 21); 
```

当走得更远时，bad_alloc 似乎来自：

```
IPAddress * ip = new IPAddress("127.0.0.1"); 
```

该构造函数包含：（我在调试器中看到 _pImpl 未初始化）

```
IPAddress::IPAddress(const std::string& addr)
{
_pImpl = IPv4AddressImpl::parse(addr);

if (!_pImpl) throw InvalidAddressException(addr);
} 
```

IPv4AddressImpl::parse 包含：

```
static IPv4AddressImpl* parse(const std::string& addr)
{
if (addr.empty()) return 0;     
#if defined(_WIN32) 
    struct in_addr ia;
    ia.s_addr = inet_addr(addr.c_str());
    if (ia.s_addr == INADDR_NONE && addr != "255.255.255.255")
        return 0;
    else
        return new IPv4AddressImpl(&ia);
#else
#if __GNUC__ < 3
    struct in_addr ia;
    ia.s_addr = inet_addr(addr.c_str());
    if (ia.s_addr == INADDR_NONE && addr != "255.255.255.255")
        return 0;
    else
        return new IPv4AddressImpl(&ia);
#else
    struct in_addr ia;
    if (inet_aton(addr.c_str(), &ia))
        return new IPv4AddressImpl(&ia);
    else
        return 0;
#endif
#endif
} 
```

以下带有来自 Winsock2.h (ws2_32.lib) 的 inet_addr 的代码会导致“SOMETHING ELSE”。

```
unsigned long ulAddr = INADDR_NONE;
ulAddr = inet_addr("91.183.48.210");
if (ulAddr == INADDR_NONE)
    msg("NONE");
else
    msg("SOMETHING ELSE"); 
```

我看不出这里出了什么问题......有没有办法进一步调试这个问题或者有人知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T13:50:59.500

我不是火箭科学家，但看起来你必须`IPv4AddressImpl()`使用`ia.s_addr`指向 string 的指针进入`"127.0.0.1"`。

只是出于兴趣，当您使用真实 IP 地址而不是环回时，您是否会收到错误消息。

并且，您在那台机器上运行 FTP 服务器吗？

而且，您*绝对*确定字符串是`"127.0.0.1"`吗？

**更新：**

只有三件事会导致异常。

*   `addr.empty()`为真，如果 addr 为 ，则不太可能`"127.0.0.1"`。
*   `is.s_addr`是`INADDR_NONE`，同样不太可能，因为`inet_addr()`127.0.0.1 应该没有问题（正如你所测试的那样）。
*   的构造函数`IPv4AddressImpl()`返回 NULL（或`bad_alloc`自身抛出异常）。

最后一个似乎最有可能，当您编写自己的代码来执行此操作时会发生什么？

```
struct in_addr ia;
ia.s_addr = inet_addr("127.0.0.1");
IPv4Address *x = new IPv4AddressImpl(&ia); 
```

此外，如果您在该`"if (!_pImpl) throw..."`行上设置断点并检查`_pImpl`：

*   零表示 ::parse 返回 NULL 并且它是`IPAddress()`构造函数 throwing `bad_alloc`。
*   非零意味着 ::parse 本身抛出了一个只能来自`IPv4AddressImpl()`构造函数的异常。

您可能*需要*进一步调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T13:47:39.477

看起来唯一可能的原因是调用

```
inet_addr 
```

在线上

```
ia.s_addr = inet_addr(addr.c_str()); 
```

返回 INADDR_NONE，这会导致返回 0/NULL，从而引发异常。

你能打电话给 inet_addr("127.0.0.1") 看看结果如何吗？如果结果是 INADDR_NONE，那么您需要为 inet_addr 找到一个让您的系统满意的好地址。

这是MSDN 文档中指向[inet_addr的链接。](http://msdn.microsoft.com/en-us/library/ms738563(VS.85).aspx)

**观察** 您正在调用构造函数

```
 IPAddress("127.0.0.1"); 
```

使用 const char*，但构造函数采用 const 引用

```
 IPAddress::IPAddress(const std::string& str); 
```

编译器足够聪明来创建那个临时的吗？我用VS 2003试了一下，好像没问题。我怀疑语言应该足够聪明来处理这个问题，但我想我会指出来。

# javascript - 基于轻量级原型的浮动/可调整大小的弹出窗口

> ID：806981
> 
> 赞同：2
> 
> 时间：2009-04-30T13:43:17.270
> 
> 标签：javascript, prototypejs

实现 Meebo 风格的浮动窗口的最佳方法是什么？我更喜欢使用 Prototype（但如果有一个好的 Jquery 实现，我也很乐意研究它）。我希望窗口可以拖动/调整大小，并且通常是“轻量级”和响应式的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T15:05:09.087

You might want to check out the [dialog component](http://jqueryui.com/demos/dialog/) in jQuery UI. It is part of the official UI Library provided by jQuery. Download the [jQuery](http://docs.jquery.com/Downloading_jQuery) and [jQuery UI](http://jqueryui.com/download) and then make sure you have references to both scripts in your page. Then, it is as simple as calling dialog() on a jQuery object. Check out the [dialog documentation](http://docs.jquery.com/UI/API/1.7.1/Dialog) for more information.

```
<script type="text/javascript">
$(function() {
   $("#dialog").dialog();
});
</script>

<div id="dialog" title="Basic dialog">
    <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div> 
```

# mysql - 如何找到所有具有引用特定 table.column 的外键并具有这些外键值的表？

> ID：806989
> 
> 赞同：294
> 
> 时间：2009-04-30T13:45:47.953
> 
> 标签：mysql, foreign-keys

我有一个表，其主键在其他几个表中作为外键引用。例如：

```
 CREATE TABLE `X` (
    `X_id` int NOT NULL auto_increment,
    `name` varchar(255) NOT NULL,
    PRIMARY KEY  (`X_id`)
  )
  CREATE TABLE `Y` (
    `Y_id` int(11) NOT NULL auto_increment,
    `name` varchar(255) NOT NULL,
    `X_id` int DEFAULT NULL,
    PRIMARY KEY  (`Y_id`),
    CONSTRAINT `Y_X` FOREIGN KEY (`X_id`) REFERENCES `X` (`X_id`)
  )
  CREATE TABLE `Z` (
    `Z_id` int(11) NOT NULL auto_increment,
    `name` varchar(255) NOT NULL,
    `X_id` int DEFAULT NULL,
    PRIMARY KEY  (`Z_id`),
    CONSTRAINT `Z_X` FOREIGN KEY (`X_id`) REFERENCES `X` (`X_id`)
  ) 
```

现在，我不知道数据库中有多少表包含 X 的外键，例如表 Y 和 Z。是否有一个 SQL 查询可以用来返回：

1.  在 X 中具有外键的表的列表
2.  以及哪些表实际上在外键中有值

* * *

## 回答 #1

> 赞同：410
> 
> 时间：2009-07-15T19:27:30.787

干得好：

```
USE information_schema;
SELECT *
FROM
  KEY_COLUMN_USAGE
WHERE
  REFERENCED_TABLE_NAME = 'X'
  AND REFERENCED_COLUMN_NAME = 'X_id'; 
```

如果您有多个具有相似表/列名称的数据库，您可能还希望将查询限制为特定数据库：

```
SELECT *
FROM
  KEY_COLUMN_USAGE
WHERE
  REFERENCED_TABLE_NAME = 'X'
  AND REFERENCED_COLUMN_NAME = 'X_id'
  AND TABLE_SCHEMA = 'your_database_name'; 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2010-07-22T17:23:50.027

MySQL 5.5 参考手册：[“InnoDB 和 FOREIGN KEY 约束”](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

```
SELECT
  ke.REFERENCED_TABLE_SCHEMA parentSchema,
  ke.referenced_table_name parentTable,
  ke.REFERENCED_COLUMN_NAME parentColumnName,
  ke.TABLE_SCHEMA ChildSchema,
  ke.table_name childTable,
  ke.COLUMN_NAME ChildColumnName
FROM
  information_schema.KEY_COLUMN_USAGE ke
WHERE
  ke.referenced_table_name IS NOT NULL
  AND ke.REFERENCED_COLUMN_NAME = 'ci_id' ## Find Foreign Keys linked to this Primary Key
ORDER BY
  ke.referenced_table_name; 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-09-16T10:35:10.803

此解决方案不仅会显示所有关系，还会显示约束名称，这在某些情况下是必需的（例如删除约束）：

```
SELECT
    CONCAT(table_name, '.', column_name) AS 'foreign key',
    CONCAT(referenced_table_name, '.', referenced_column_name) AS 'references',
    constraint_name AS 'constraint name'
FROM
    information_schema.key_column_usage
WHERE
    referenced_table_name IS NOT NULL; 
```

如果要检查特定数据库中的表，请添加以下内容：

```
AND table_schema = 'database_name'; 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-04-30T13:57:38.203

`information_schema`您可以在明智命名的表中找到所有与架构相关的信息。

您可能需要检查表格`REFERENTIAL_CONSTRAINTS`和`KEY_COLUMN_USAGE`. 前者告诉你哪些表被其他人引用；后者会告诉你他们的领域是如何相关的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-09-15T08:40:38.277

列出数据库中的所有外键，包括描述

```
 SELECT  
    i1.CONSTRAINT_NAME, i1.TABLE_NAME,i1.COLUMN_NAME,
    i1.REFERENCED_TABLE_SCHEMA,i1.REFERENCED_TABLE_NAME, i1.REFERENCED_COLUMN_NAME,
    i2.UPDATE_RULE, i2.DELETE_RULE 
    FROM   
    information_schema.KEY_COLUMN_USAGE AS i1  
    INNER JOIN 
    information_schema.REFERENTIAL_CONSTRAINTS AS i2 
    ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME 
    WHERE i1.REFERENCED_TABLE_NAME IS NOT NULL  
    AND  i1.TABLE_SCHEMA  ='db_name'; 
```

限制到表中的特定列

```
AND i1.table_name = 'target_tb_name' AND i1.column_name = 'target_col_name' 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-03-11T10:23:53.660

我写了一个小*bash onliner*，您可以将其写入脚本以获得友好的输出：

mysql_references_to：

```
mysql -uUSER -pPASS -A DB_NAME -se "USE information_schema; SELECT * FROM KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_NAME = '$1' AND REFERENCED_COLUMN_NAME = 'id'\G" | sed 's/^[ \t]*//;s/[ \t]*$//' |egrep "\<TABLE_NAME|\<COLUMN_NAME" |sed 's/TABLE_NAME: /./g' |sed 's/COLUMN_NAME: //g' | paste -sd "," -| tr '.' '\n' |sed 's/,$//' |sed 's/,/./' 
```

所以执行：（`mysql_references_to transaccion`其中*transaccion*是一个随机表名）给出如下输出：

```
carrito_transaccion.transaccion_id
comanda_detalle.transaccion_id
comanda_detalle_devolucion.transaccion_positiva_id
comanda_detalle_devolucion.transaccion_negativa_id
comanda_transaccion.transaccion_id
cuenta_operacion.transaccion_id
... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-01T20:59:35.537

SELECT TABLE_NAME, COLUMN_NAME FROM information_schema.KEY_COLUMN_USAGE WHERE `CONSTRAINT_SCHEMA`LIKE 'your_database' AND `TABLE_SCHEMA`LIKE 'your_database' AND `REFERENCED_TABLE_SCHEMA`LIKE 'your_database' AND `REFERENCED_TABLE_NAME`LIKE 'your_table' AND `REFERENCED_COLUMN_NAME`LIKE 'your_column';

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2017-12-01T07:15:04.667

最简单：
1\. 打开 phpMyAdmin
2\. 在左侧单击数据库名称
3\. 在右上角找到“设计器”选项卡

所有约束都将显示在那里。

# ruby-on-rails - 使用 ActiveRecord 和关系获取 NameError

> ID：806999
> 
> 赞同：0
> 
> 时间：2009-04-30T13:46:56.357
> 
> 标签：ruby-on-rails, ruby, activerecord

我在使用一对多关系时遇到了问题。我想让每个系列都有一个出版商，一个出版商有很多系列。

这是我的发布者模型：

```
class Publisher < ActiveRecord::Base
  validates_presence_of :name
  has_many :series
end 
```

这是我的 Serie 模型：

```
class Serie < ActiveRecord::Base
  belongs_to :publisher
end 
```

这是失败的测试：

```
test "a publisher should have a list of series" do
  @publisher = Publisher.new :name => "Standaard Uitgeverij"
  @series = [ Serie.new(:name => "De avonturen van Urbanus", :publisher => @publisher),
              Serie.new(:name => "Suske en Wiske", :publisher => @publisher) ]
  assert_equal @series, @publisher.series
end 
```

测试在最后一行失败，出现 NameError: uninitialized constant Publisher::Series。

我试图保存出版商和系列，但这没有用。我只用一个系列尝试过，但这给出了同样的错误。

因为我刚刚开始使用 Rails 和 Ruby，所以我在这里不知所措。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T14:18:14.147

要解决您在评论中提到的实际问题（**如何将我的模型命名为“系列”？**），您需要让 Rails 的[Inflector](http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html)了解其默认复数规则的此异常。

将以下内容添加到`config/environment.rb`：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.uncountable 'series'
end 
```

这将让您将模型命名为`Series`. 您可以使用以下方法测试它是否有效`script/console`：

```
>> "series".pluralize    #=> "series"
>> "series".singularize  #=> "series" 
```

——我不得不说我刚刚尝试过使用[The Pluralizer](http://nubyonrails.com/tools/pluralize)，而且看起来 Rails 知道如何处理内置的单词*系列。*[自己试试吧](http://nubyonrails.com/tools/pluralize/series)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T14:27:00.723

我相信约翰的回答是最好的。

也可以直接在 has_many 声明中指定类名

```
has_many :series, :class_name => 'Serie' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T14:32:39.180

您的 has_many 关系名称很好，但您的模型名称错误。

由于系列的单数和复数都是系列，因此您需要将模型从系列重命名为系列。在那之后，一切都应该没问题。***********`**