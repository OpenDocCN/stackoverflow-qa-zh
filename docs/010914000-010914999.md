# StackOverflow 问答 10914000-10914999

# iphone - 如何用动画缩放视图

> ID：10914000
> 
> 赞同：2
> 
> 时间：2012-06-06T12:13:43.917
> 
> 标签：iphone, objective-c, ipad

当事件发生时，我使用下面的代码来缩放我的视图。但我希望通过动画放大或缩小视图，而不是直接看到缩放的结果。我怎样才能达到这种效果？

```
view.transform = CGAffineTransformMakeScale(scaleFactor, scaleFactor) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:17:30.320

您可以使用 UIViewAnimations

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelay:1.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

view.transform = CGAffineTransformMakeScale(scaleFactor, scaleFactor); 

[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T12:30:27.260

您也可以使用块动画。

```
[UIView animateWithDuration:0.3 animations:^{
    view.transform = CGAffineTransformMakeScale(scaleFactor, scaleFactor) 
}]; 
```

# android - 在多行 TextView 的最后一个单词之后放置一个视图

> ID：10914006
> 
> 赞同：1
> 
> 时间：2012-06-06T12:14:01.220
> 
> 标签：android, textview

我想在（可能）多行 TextView 的最后一个单词之后找到一个视图。

例如，TextView 可能是两行，第二行大约是 TextView 宽度的一半。如何在最后一个单词之后找到视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:19:54.383

您可以使用[StaticLayout](http://developer.android.com/reference/android/text/StaticLayout.html)来测量文本行的宽度，并将其他视图放置在第二行长度的绝对位置。

或者，您可以在 TextView 中使用 HTML 在视图中放置一些元素。

```
myTextView.setText(Html.fromHtml("<h2>Title</h2><br><p>Description here</p>")); 
```

支持的html标签：[http ://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

# sql-server - PDO DBLib 不工作

> ID：10914008
> 
> 赞同：1
> 
> 时间：2012-06-06T12:14:11.913
> 
> 标签：sql-server, pdo

我与 DBLIB PDO 驱动程序建立了连接，并且在连接时没有收到任何错误，但是当我运行查询时，会引发异常并出现以下错误。我也玩过查询的语法。我正在连接到 MS SQL 服务器：

```
 SQLSTATE[HY000]: General error: 208 General SQL Server error: Check messages from the SQL Server [208] (severity 16) [SELECT PCO_INBOUNDLOG.PHONE FROM PCO_INBOUNDLOG] 
```

编码：

```
 $sql = "SELECT PCO_INBOUNDLOG.PHONE FROM PCO_INBOUNDLOG";
 foreach($this->mssql->query($sql) as $row) {
      print_r($row);
 } 
```

这是我第一次对 MS SQL 服务器进行查询，所以我的语法可能是错误的，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:18:45.750

首先，找出错误208是什么意思：

```
select * from sys.messages where message_id = 208 
```

其次，检查[FROM 语法](http://msdn.microsoft.com/en-us/library/ms177634.aspx)（包括示例！）和[对象标识符规则](http://msdn.microsoft.com/en-us/library/ms187879%28v=sql.105%29.aspx)。

三、正确编写查询：

```
SELECT PHONE FROM PCO_INBOUNDLOG 
```

或者，可能更好（因为最好包含架构名称）：

```
SELECT PHONE FROM dbo.PCO_INBOUNDLOG 
```

甚至：

```
SELECT p.PHONE FROM dbo.PCO_INBOUNDLOG p 
```

# c# - 如何在 C# 中比较本地化字符串

> ID：10914011
> 
> 赞同：0
> 
> 时间：2012-06-06T12:14:28.193
> 
> 标签：c#, localization

我正在为 ASP.NET Web 应用程序进行本地化，当用户输入本地化字符串“XXXX”并且我将该字符串与本地化资源文件中的值进行比较时。

例子 ：

```
 if ( txtCalender.Text == Resources.START_NOW)
 {
      //do something
 } 
```

但是当我这样做时，即使两个字符串（本地化字符串）相等，它也会返回 false。IE。

```
txtCalender.Text ="இப்போது தொடங்க"
Resources.START_NOW="இப்போது தொடங்க" 
```

这是泰米尔语本地化的。

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:15:41.333

使用[`string.Equals`](http://msdn.microsoft.com/en-us/library/system.string.equals.aspx)带[`StringComparison`](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)值的重载之一 - 这允许您使用当前区域性进行比较..

```
if ( txtCalender.Text.Equals(Resources.START_NOW, StringComparison.CurrentCulture))
{
     //do something
} 
```

或者，如果您想要不区分大小写的比较：

```
if ( txtCalender.Text.Equals(Resources.START_NOW,
                             StringComparison.CurrentCultureIgnoreCase))
{
     //do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:24:06.167

我找到了答案并且它有效。这是解决方案，

当我从 Chrome 浏览器尝试时它不起作用，它适用于 Firefox。实际上，当我将两个字符串都转换为 char 数组时，

txtCalender.Text 返回 40 个字符，Resource.START_NOW 返回 46。所以我尝试使用 Normalize() 方法对字符串进行规范化

```
if(txtCalender.Text.Normalize() == Resources.START_NOW.Normalize()) 
```

当我没有使用 normalize 方法时，它会将一个字符解释为两个不同的字符。

它运行良好。感谢您的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:16:59.080

您可以与`InvariantCulture`in `String.Equals`（statis 方法）进行比较：

```
String.Equals("XXX", "XXX", StringComparison.InvariantCulture); 
```

不确定这是否有帮助，其他人可以评论吗？我从来没有遇到过你的实际错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T12:17:21.470

你可能需要使用`.Equals`

```
if(txt.Calendar.Text.Equals(Resources.START_NOW))
{ //... 
```

如果不区分大小写的比较是您所追求的（通常是）`StringComparison.OrdinalIgnoreCase`用作调用的第二个参数`.Equals`。

如果这不起作用 - 那么我可以建议你断点该行并检查实际值`Resources.START_NOW`- 这种相等比较失败的唯一可能原因是如果两个字符串真的不一样。所以我的猜测是你的文化管理工作不正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T12:21:59.567

使用`String.Equals`或`String.Compare`。

这两者之间存在一些性能差异。String.Compare 比 String.Equal 快，因为 String.Compare 是静态方法，而 String.Equals 是实例方法。

String.Equal 返回一个布尔值。当字符串相等时，String.Compare 返回 0，但如果它们不同，则返回正数或负数，具体取决于第一个字符串是在第二个字符串之前（小于）还是之后（大于）。因此，当您需要知道它们是否相同时使用 String.Equals，或者当您需要基于不只是相等性做出决定时使用 String.Compare。

# debugging - 将 Fiddler 与 Google Chrome 一起使用

> ID：10914014
> 
> 赞同：0
> 
> 时间：2012-06-06T12:14:37.693
> 
> 标签：debugging, google-chrome, fiddler

我在 IE 和 Firefox 中使用 Fiddler 2 调试工具。现在我正在尝试使用谷歌浏览器中的提琴手分析 Http 请求。但是没有办法在 Chrome 中开始使用 fiddler，因为 chrome 中没有图标或入口点。谁能告诉我如何使用 fiddler 和 chrome。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-03T08:15:06.020

如果您安装了“FoxyProxy”或“SwitchySharp”扩展，请尝试禁用它们。他们干扰提琴手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:26:34.703

我得到了答案。由于谷歌浏览器正在使用 Internet Explorer 代理设置。我可以从开始菜单或 IE 工具->fiddler2 启动它。并且可以分析流量..谢谢克里斯..

# iphone - iphone 使用 smtp 服务器发送电子邮件？

> ID：10914020
> 
> 赞同：5
> 
> 时间：2012-06-06T12:14:52.210
> 
> 标签：iphone, objective-c, xcode, ios4

在我的应用程序中，我可以使用 smtp 服务器发送电子邮件，因为我输入了正确的电子邮件 ID 和密码。但是当我输入我的 gmail 或 yahoo 帐户详细信息时，我无法发送邮件。因为我已经设置了我的 relayHost = @"smtp.gmail.com"; 然后我也无法发送邮件。

请帮我解决这个问题。

以下是我的代码：

```
-(void)sendEMAIL{

   SKPSMTPMessage *testMsg = [[SKPSMTPMessage alloc] init];

    testMsg.fromEmail = str_uname;
    NSLog(@"str_Uname=%@",testMsg.fromEmail);

    testMsg.toEmail = str_info;

    NSLog(@"autoemail=%@",testMsg.toEmail);

    testMsg.relayHost = @"smtp.gmail.com";

    testMsg.requiresAuth = YES;

    testMsg.login = str_uname;
    NSLog(@"autoelogin=%@",testMsg.login);

    testMsg.pass = str_password;
    NSLog(@"autopass=%@",testMsg.pass);

   testMsg.subject = @"Schedule Sms And Email";

   testMsg.wantsSecure = YES; 

   NSString *sendmsg=[[NSString alloc]initWithFormat:@"%@",str_info2];
   NSLog(@"automsg=%@",sendmsg);

   testMsg.delegate = self;

   NSDictionary *plainPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/plain",kSKPSMTPPartContentTypeKey,
                           sendmsg, kSKPSMTPPartMessageKey,@"8bit",kSKPSMTPPartContentTransferEncodingKey,nil];

    testMsg.parts = [NSArray arrayWithObjects:plainPart,nil];
    [testMsg send];
}

-(void)messageSent:(SKPSMTPMessage *)message{ 
   [message release];     
}

-(void)messageFailed:(SKPSMTPMessage *)message error:(NSError *)error{
   [message release];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:38:17.460

您还可以从[https://github.com/kailoa/iphone-smtp](https://github.com/kailoa/iphone-smtp)获取源代码，这是一个使用 smtp 服务器的很棒的代码。

[http://iphonesdksnippets.com/send-email-with-attachments-on-iphone.html](http://iphonesdksnippets.com/send-email-with-attachments-on-iphone.html) 使用这个链接也不错....只需从那里下载框架并使用该代码。它也很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-13T13:36:49.860

您可以通过这种方式管理 yahoo、gmail、hotmail 等的中继主机-

```
 NSArray *arr1 = [fromEmail componentsSeparatedByString:@"@"];
NSArray *arr2 = [[arr1 objectAtIndex:1] componentsSeparatedByString:@"."];

if ([arr2 containsObject:@"gmail"]) {
    smtp_message.relayHost = @"smtp.gmail.com";
}
else if ([arr2 containsObject:@"yahoo"]) {
    smtp_message.relayHost = @"smtp.mail.yahoo.com";
}
else if ([arr2 containsObject:@"hotmail"] || [arr2 containsObject:@"live"]) {
    smtp_message.relayHost = @"smtp.live.com";
}
else
{
    NSString *smtpRelay = [[NSString alloc]init];
    smtpRelay = [NSString stringWithFormat:@"smtp.%@.com",[arr2 objectAtIndex:0]];
      smtp_message.relayHost = smtpRelay;
} 
```

# git - 如何使用“git submodule”检查子模块的特定版本？

> ID：10914022
> 
> 赞同：174
> 
> 时间：2012-06-06T12:14:54.813
> 
> 标签：git, version-control, git-submodules

我将如何为特定标签或提交添加 Git 子模块？

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2012-06-06T14:34:36.493

子模块存储库处于指向特定提交的分离 HEAD 状态。更改该提交只需签出不同的标签或提交，然后将更改添加到父存储库。

```
$ cd submodule
$ git checkout v2.0
Previous HEAD position was 5c1277e... bumped version to 2.0.5
HEAD is now at f0a0036... version 2.0 
```

`git-status`在父存储库上现在将报告脏树：

```
# On branch dev [...]
#
#   modified:   submodule (new commits) 
```

添加子模块目录并提交以存储新指针。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-06-06T12:18:16.503

> 第一步：添加子模块
> 
> ```
>  git submodule add git://some_repository.git some_repository 
> ```
> 
> 第 2 步：将子模块修复为特定的提交
> 
> 默认情况下，新子模块将跟踪主分支的 HEAD，但不会在您更新主存储库时更新。为了更改子模块以跟踪特定的提交或不同的分支，请将目录更改为子模块文件夹并像在普通存储库中一样切换分支。
> 
> ```
>  git checkout -b some_branch origin/some_branch 
> ```
> 
> 现在子模块固定在开发分支上，而不是 master 的 HEAD。

*来自[两个人争论——将 Git 子模块与特定的提交或分支联系起来](https://twoguysarguing.wordpress.com/2010/11/14/tie-git-submodules-to-a-particular-commit-or-branch/)。*

# c++ - C++11初始化列表+函数指针让我头疼

> ID：10914023
> 
> 赞同：2
> 
> 时间：2012-06-06T12:14:55.157
> 
> 标签：c++, c++11, g++, initializer-list

我正在尝试创建一个将字符串映射到工厂函数的全局映射。这使我可以让构建器函数从 ini 文件中读取密钥，然后将该 ini 文件及其相关部分传递给正确的工厂函数。这是带有全局映射的标题中的代码：

```
typedef Primitive* (*factory_func_t)(const ::INI&, const std::string&);

const std::map<std::string, factory_func_t> factory_funcs = {
    { SphereFactory::ID,     &SphereFactory::create_sphere },
    { QuadFactory::QUAD_ID,  &QuadFactory::create_quad },
    { QuadFactory::PQUAD_ID, &QuadFactory::create_pquad }
}; 
```

这是其中一个工厂类的示例：

```
class SphereFactory
{
  public:
    static const std::string ID;

    static Sphere* create_sphere(const ::INI&, const std::string& section);

    SphereFactory() = delete;

  private:
    static const std::string CENTER_KEY;
    static const std::string RADIUS_KEY;
};

const std::string SphereFactory::ID = "Sphere";

const std::string SphereFactory::CENTER_KEY = "Center";
const std::string SphereFactory::RADIUS_KEY = "Radius"; 
```

所有这些都在编译时给了我一个错误：

```
error: could not convert `{{cg::prim::factory::SphereFactory::ID,
 cg::prim::factory::SphereFactory::create_sphere}, 
 {cg::prim::factory::QuadFactory::QUAD_ID, 
 cg::prim::factory::QuadFactory::create_quad}, 
 {cg::prim::factory::QuadFactory::PQUAD_ID, 
 cg::prim::factory::QuadFactory::create_pquad}}'
 from `<brace-enclosed initializer list>'
 to `const std::map<std::basic_string<char>, cg::Primitive* (*)(const INI&, 
 const std::basic_string<char>&)>' 
```

以上所有代码都在`cg::prim::factory`命名空间中，以防万一。两者都`Quad`继承`Sphere`自`Primitive`. 我是`g++ -O3 -Wall -Wextra -pedantic -std=c++11`用来编译的。

为什么这不编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:16:38.100

您正在尝试使用协变返回类型：`typedef`is for`Primitive *`但工厂 return`Sphere *`等。您可能包括返回基本类型的替代包装工厂函数。

事实上，C++ 认为返回基指针和派生指针的函数之间没有任何关系。只`virtual`允许以这种方式“转换”函数，工厂不能是虚拟的。（或者至少，在 C++ 中不鼓励使用具有虚函数的工厂对象。这在 Java 中很常见，但这里使用包装函数会更好。）

由于初始化列表仍处于起步阶段，一种调试方法（并解决可能仍然存在的潜在编译器错误）是尽可能手动转换：

```
const std::map<std::string, factory_func_t> factory_funcs = {
    { SphereFactory::ID,     (factory_func_t) &SphereFactory::create_sphere },
    { QuadFactory::QUAD_ID,  (factory_func_t) &QuadFactory::create_quad },
    { QuadFactory::PQUAD_ID, (factory_func_t) &QuadFactory::create_pquad }
}; 
```

# iphone - MKPinAnnotationView 标题未显示

> ID：10914035
> 
> 赞同：1
> 
> 时间：2012-06-06T12:15:28.020
> 
> 标签：iphone, google-maps, mkmapview

我想在每次添加注释时显示图钉的标题（MKAnnotation）。我为此添加了以下代码。但它不起作用。请帮我找出答案。我刚刚添加了这样的引脚。

```
ann = [[DisplayMap alloc] init];
ann.title = @"aaa";
ann.subtitle = @"bbbn";
[mapView addAnnotation:ann]; 
```

之后我在这个方法中添加了以下代码

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation
{

    if(annotation != mapView.userLocation) 
    {
        static NSString *defaultPinID = @"com.invasivecode.pin";
        pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if ( pinView == nil ) 
            pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];

        pinView.pinColor = MKPinAnnotationColorRed; 
        pinView.canShowCallout = YES;
        pinView.animatesDrop = YES;
        pinView.selected = YES;
        [mapView selectAnnotation:annotation animated:YES];

        //[pinView setImage:[UIImage imageNamed:@"user.png"]];

    }
} 
```

我犯了什么错误？

# ios - 为什么 MKMapView 在初始应用程序启动时不加载叠加层？

> ID：10914043
> 
> 赞同：2
> 
> 时间：2012-06-06T12:15:53.377
> 
> 标签：ios, deployment, delegates, mkmapview, overlays

为什么不`MKMapView`加载覆盖，如果它是应用程序的初始启动（部署后）并且`MKMapView`在第一个视图中？

之后一切正常，即使它是应用程序的初始启动并且`MKMapView`不是第一个视图。

未调用以下代表：

`mapView: viewForOverlay:`

`mapView: viewForAnnotation:`

我正在为 UI 使用 SDK 5.1 和 Storyboard。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:34:09.957

由于覆盖的数据在初始启动后不可用，因此也不能用于绘图。

**更新方法：**

我不只是在 viewDidLoad 中添加对象，而是将其切换为更动态的方法。

最明显的方法是使用`NSFetchedResultController`，从`UITableViewController`. 它有一个方便的委托，如果发生变化，它会调用我的视图控制器。

所以从现在开始，我只实现委托方法，然后从`MKMapView`.

# windows-phone-7 - DataBindind 不适用于 DataTemplateSelector (Windows Phone 7)

> ID：10914045
> 
> 赞同：1
> 
> 时间：2012-06-06T12:15:58.130
> 
> 标签：windows-phone-7, data-binding

我有这个 xaml 部分的代码

```
<ListBox Margin="0,0,-12,0" Visibility="Visible" ItemsSource="{Binding QuestionsCurrent.Answers}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <local:TemplateSelectorPollPage Content="{Binding QuestionsCurrent.Answers}">
                            <local:TemplateSelectorPollPage.RadioButtonField>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Width="400" Margin="10">
                                        <RadioButton></RadioButton>
                                        <TextBlock Text="{Binding pavalue}" ></TextBlock>
                                    </StackPanel>
                                </DataTemplate>
                            </local:TemplateSelectorPollPage.RadioButtonField>
                            <local:TemplateSelectorPollPage.RadioButtonTextField>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Width="400" Margin="10">
                                        <RadioButton></RadioButton>
                                        <TextBox Text="{Binding pavalue}" ></TextBox>
                                    </StackPanel>
                                </DataTemplate>
                            </local:TemplateSelectorPollPage.RadioButtonTextField>
                            <local:TemplateSelectorPollPage.CheckBoxField>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Width="400" Margin="10">
                                        <CheckBox></CheckBox>
                                        <TextBlock Text="{Binding pavalue}" ></TextBlock>
                                    </StackPanel>
                                </DataTemplate>
                            </local:TemplateSelectorPollPage.CheckBoxField>
                            <local:TemplateSelectorPollPage.CheckBoxTextField>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Width="400" Margin="10">
                                        <CheckBox></CheckBox>
                                        <TextBox Text="{Binding pavalue}" ></TextBox>
                                    </StackPanel>
                                </DataTemplate>
                            </local:TemplateSelectorPollPage.CheckBoxTextField>
                        </local:TemplateSelectorPollPage>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

我有两个类用于实现数据模板选择器：

```
public abstract class TemplateSelectorBase : ContentControl
            {
                public virtual DataTemplate SelectTemplate(object item, DependencyObject container)
                {
                    return null;
                }
                protected override void OnContentChanged(object oldContent, object newContent)
                {
                    base.OnContentChanged(oldContent, newContent);
                    ContentTemplate = SelectTemplate(newContent, this);
                }
            }

public class TemplateSelectorPollPage : TemplateSelectorBase
        {
            public DataTemplate CheckBoxField { get; set; }

            public DataTemplate RadioButtonField {get;set;}

            public DataTemplate CheckBoxTextField { get; set; }

            public DataTemplate RadioButtonTextField { get; set; }

            public override DataTemplate SelectTemplate(object item, DependencyObject container)
            {
                var answer = item as Answer;
                if (answer != null)
                {
                    var question = DataAccess.UtilsAccessDb.PpaDataAccessLib.Instance.RowsGet<Question>().Where(x => x.pqid == answer.pqid).FirstOrDefault();

                    if (question != null)
                    {
                        return question.pqtype == 1
                                   ? (answer.patype == 1 ? RadioButtonField : RadioButtonTextField)
                                   : (answer.patype == 1 ? CheckBoxField : CheckBoxTextField);
                    }
                }
                return base.SelectTemplate(item, container);
            }
        } 
```

在 OnNavigatedTo 方法处调用绑定

```
App.PollViewModel.LoadData(firstQuestion.pid, firstQuestion.pqid);
DataContext = App.PollViewModel; 
```

当我运行应用程序时，列表框没有任何项目。这段代码有什么不正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:48:14.487

你第二次狂欢失败了。

只需在 Content="{Binding}" 上替换 Content="{Binding QuestionsCurrent.Answers}

# nginx - 如何测量我的 nginx 服务器上的延迟？

> ID：10914053
> 
> 赞同：0
> 
> 时间：2012-06-06T12:16:20.913
> 
> 标签：nginx, scalability, passenger, latency

我不确定我是否使用了正确的术语。我有几个 Nginx（乘客插件）工作人员渲染我的 Web 应用程序（Ruby on Rails）。

问题是我不知道什么时候应该启动新的工作人员/服务器。如果我的用户使用了过多的资源，我猜这些请求将开始堆积在 nginx 上，并且在它们被 nginx 工作人员处理之前会有延迟（取决于可用性）。那么有没有一种简单的方法来获取那些延迟值，可以让我了解何时需要扩大或缩小规模？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:21:18.793

Nginx 工作人员不会渲染您的 RoR 应用程序。但是乘客会。所以，你应该调整它的选项：“ [Phusion Passenger 用户指南：资源控制和优化选项](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#_resource_control_and_optimization_options)”

# android - FragmentActivity 选项卡屏幕停电

> ID：10914056
> 
> 赞同：6
> 
> 时间：2012-06-06T12:16:30.517
> 
> 标签：android, android-fragments

我正在使用 android 示例[FragmentTabs](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)。

比如说，有 4 个选项卡（A、B、C、D）。我使用此代码将选项卡片段（A）替换为另一个（E）

```
FragmentTransaction transaction = getFragmentManager()
                .beginTransaction();

        transaction.replace(R.id.realtabcontent, newFragment);
        transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        transaction.addToBackStack(null);

        // Commit the transaction
        transaction.commit(); 
```

在另一个选项卡 C 中，当我按下返回按钮时，选项卡 (A) 屏幕变黑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T05:01:26.980

嗨，Ashish，这个问题正在发生，因为当您按下返回键时，片段无法像正常活动中的正常返回活动那样理解，最近使用的活动将自动打开，但在片段中，当您按下返回按钮时它不会发生，所以我们必须维护片段中的返回事件在这里我正在分享我正在处理我的片段活动的代码，所以你可以检查一下

```
public void onListItemClick(ListView l, View v, int position, long id) {
        showDetail(position);

    }

    void showDetail(int position) {
        this.position=position;
        if(isDualPane){
            getListView().setItemChecked(position, true);
            DetailFragment detailFragment = (DetailFragment)
                    getFragmentManager().findFragmentById(R.id.detail);

            if (detailFragment == null || detailFragment.getIndex() != position ) {
                detailFragment = new DetailFragment(position);
                FragmentTransaction ft =getFragmentManager().beginTransaction();
                ft.replace(R.id.detail, detailFragment);
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                ft.commit();
            }

        }
        else {
            Intent intent =new Intent();
            intent.setClass(getActivity(),DetailActivity.class);
            intent.putExtra("position", position);
            startActivity(intent);

        } 
```

看到其他部分表明意图正在维护我的片段

请查看我在这里为所有片段用户分享的示例（带有 Gridview 的片段），您会从中发现一些有用的东西

在此链接上查看我的答案：[如何在片段中显示不同的布局](https://stackoverflow.com/questions/10942959/how-to-show-different-layout-in-fragments/10943192#10943192)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:19:22.393

您很可能将第一个 Fragment 事务添加到后台堆栈。将事务添加到后台堆栈时，这意味着当用户回击时，最后一个事务将被撤消。因此，如果您添加了 Fragment A 并删除了 Fragment B，则按下返回将删除 Fragment A 并添加 Fragment B（并恢复 Fragment B 的某些已保存状态）。

对于您的第一笔交易，您只是在 Activity 中添加一个 Fragment，因此反向操作将删除 Fragment，因此什么也不显示。所以不要将第一个事务添加到后台堆栈（假设你这样做了......我无法知道，因为你只粘贴了一小段代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:24:04.217

我通常使用 android 示例[FragmentTabs](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)来管理选项卡，我还没有遇到过这个问题。如果没有看到完整的源代码，很难确切地说出它发生了什么。但是，如果您不使用`FragmentTabs`，那么您可以尝试迁移到它，因为它已经过全面测试；）

# background - 如何加快特征背景计算？

> ID：10914057
> 
> 赞同：1
> 
> 时间：2012-06-06T12:16:33.733
> 
> 标签：background, subtraction, eigen, eigenvector, background-foreground

我正在尝试优化此算法以**使用移动摄像机视频进行自适应背景检测**：

[http://www.springerlink.com/content/4j2m3885r3133202/fulltext.pdf](http://www.springerlink.com/content/4j2m3885r3133202/fulltext.pdf)

该算法加快了背景模型的升级（SVD 对于实时应用来说太重了）。我可以管理 3 个属性来加速算法。属性是：

1.  **N**第一次 SVD 计算的帧数
2.  **M**描述背景模型的特征向量个数（M<=N）
3.  **P**等待批量更新的帧数

> 你知道我怎样才能找出处理时间和这三个属性之间的关系吗？
> 
> 你知道如何找出最优值吗？

该算法的主要部分是在批量更新期间对传入帧进行正交归一化的 QR 分解。这个功能需要很多时间。

> 你知道计算正交化的更快算法吗？

这里是我正在使用的 m_cT 的函数 QR（论文中的矩阵*U'=[U|E] ）：*

```
 for (int i = m_iNFrame; i < m_iNFrame+m_iNUpdate; i++)
    {
    m_cT.col(i).copyTo(m_cQ.col(i));
    for(int j = 0; j < i; j++)
    {
      m_cR.at<double>(j,i) = m_cQ.col(j).dot(m_cT.col(i));
      m_cQ.col(i) = m_cQ.col(i) -  m_cR.at<double>(j,i)*m_cQ.col(j);
    }
    m_cR.at<double>(i,i)=norm(m_cQ.col(i));
    m_cQ.col(i)=m_cQ.col(i).mul(1.0/m_cR.at<double>(i,i));
  } 
```

在测试过程中，我注意到帧中的高频细节在相机运动过程中会产生大量误报。

> 你认为在 SVD 计算之前应用一个平滑滤波器可以得到更好的检测 BG/FG 吗？

谢谢您的帮助。

# javascript - 在javascript中的主干js中使用时如何创建模型对象

> ID：10914067
> 
> 赞同：0
> 
> 时间：2012-06-06T12:17:03.243
> 
> 标签：javascript, backbone.js, javascript-objects

我的问题是我想在 javascript 中创建模型对象。我使用backbone.js 我想在全球范围内共享模型对象，因为我需要在许多 js 文件中使用该对象

```
 (function(){
     this.mymodel=Backbone.Model.extend({
            ----
            ----
     });
  return{
            var colobj = new mymodel;
  }
}) 
```

我在另一个 js 文件中共享“colobj”对象，如下所示

```
(function(){
     var collectionobj = new colobj;
 }); 
```

但这给了我错误这个例子有什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:18:32.997

在我看来，你不明白什么是闭包，以及如何使用[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。

你有几个选择去做你想做的事。

起初，您可以只使用全局对象来跨文件共享对象。像这样：

```
// model.js
(function(exports, Backbone, undefined) {
    var Model = Backbone.Model.extend({});

    exports.Model = Model;
})(window, Backbone);

// collection.js
(function(exports, Backbone, _, undefined) {
    var Model = exports.Model;
    var Collection = Backbone.Collection.extend({
        model: Model
        // ...
    });

    exports.Collection = Collection;
})(window, Backbone, _); 
```

或这个：

```
// model.js
Model = (function(Backbone, undefined) {
    var Model = Backbone.Model.extend({});

    return Model;
})(Backbone);

// collection.js
Collection = (function(Backbone, _, undefined) {
    var Collection = Backbone.Collection.extend({
        model: Model
        // ...
    });

    return Collection;
})(Backbone, _); 
```

或者，您可以在全局空间中创建一个对象并将其用作命名空间。

```
// model.js
(function(App, Backbone, undefined) {
    var Model = Backbone.Model.extend({});

    App.Model = Model;
})(App = (window.App || {}), Backbone);

// collection.js
(function(App, Backbone, _, undefined) {
    var Model = App.Model;
    var Collection = Backbone.Collection.extend({
        model: Model
        // ...
    });

    App.Collection = Collection;
})(App = (window.App || {}), Backbone, _); 
```

或者您可以将您的对象定义为[AMD 模块](http://requirejs.org/docs/whyamd.html)，然后使用任何 AMD 加载程序。例如，如果你想使用 require.js，你可以这样写：

```
// main.js
require.config({
    paths: {
        'jquery': '/js/vendor/jquery.js',
        'underscore': '/js/vendor/underscore.js',
        'backbone': '/js/vendor/backbone.js',
        'model': '/js/model.js',
        'collection': '/js/collection.js'
    },
    shim: {
        backbone: {
            deps: ["underscore", "jquery"],
            exports: "Backbone"
        },

        underscore: {
            exports: "_"
        }
    }
});

// model.js
define([
    'jquery', 
    'underscore',
    'backbone'
], function($, _, Backbone){
    var Model = Backbone.Model.extend({});
    return Model;
});

// collection.js
define([
    'jquery', 
    'underscore',
    'backbone',
    'model'
], function($, _, Backbone, Model){
    var Collection = Backbone.Collection.extend({
        model: Model
    });
    return Collection;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:33:38.703

首先，你应该改变这一行：

```
var colobj = new mymodel; 
```

到

```
var colobj = new this.mymodel; 
```

事情是`mymodel`未定义的，这可能是您问题的根源。

此外，您的第一个`colobj`是模型的实例，因此它是一个对象而不是构造函数。这就是为什么您第二次尝试实例化它的原因：

```
var collectionobj = new colobj; 
```

它会引发错误，因为浏览器认为您正在执行以下操作：

```
var collectionobj = new (new mymodel); 
```

我建议您仅将模型定义从一个闭包传递到另一个闭包：

```
//...
return{
        var colobj = this.mymodel;
}
//... 
```

**更新**
我很惊讶我以前错过了这个。
您正在返回一个无效的对象：

```
{var colobj = new mymodel;} 
```

我认为您可能打算返回一个对象，该对象`colobj`使用模型的值对属性进行哈希处理。如果是这种情况，您所要做的就是返回这个对象：

```
{colobj : this.mymodel}; 
```

# javascript - getCurrentPosition 不会调用 iOS 下 PhoneGap 中的任何回调

> ID：10914068
> 
> 赞同：2
> 
> 时间：2012-06-06T12:17:12.437
> 
> 标签：javascript, ios, iphone, cordova

我的程序有一个方法，它使用错误和成功回调调用 getCurrentPosition。在 Android 上它可以完美运行。在 iOS 上，它不会调用任何回调——错误和成功都不会。

欢迎任何想法为什么会发生。

PS我正在使用Phonegap 1.4，升级前一段时间证明有问题，但如果它可能有帮助，我可以花时间将phonegap升级到最新版本。

谢谢。

编辑：这是一些代码，虽然不确定它会有什么帮助：

```
getLocation: function(successCallback, errorCallback){
    navigator.geolocation.getCurrentPosition(
            function(position){
                var itmPosition = JSITM.gps2itm(new JSITM.LatLng(position.coords.latitude, position.coords.longitude)); 
                geolocationHandler.reverseGeocode(itmPosition ,successCallback, errorCallback);
            },
            function(error){
                alert("error getting position: " + error.message);
                errorCallback("some error message");
            },
            { maximumAge: 10000, timeout: 30000, enableHighAccuracy: true });
} 
```

没有调用任何回调。

# java - 递归搜索数组中的字符（Java）

> ID：10914069
> 
> 赞同：4
> 
> 时间：2012-06-06T12:17:12.933
> 
> 标签：java, recursion

我被要求写一些东西来确定一个数组是否是另一个更大数组的子集。我决定从一个更简单的问题开始，并编写了一个函数来确定字符数组中是否存在字符。我想出了这段代码：

```
private static boolean findSequenceRecHelper(char [] findIn, char c, int index) {
    boolean result = false;
    if(index<findIn.length) {
        if(findIn[index] == c) {
            result = true;
        }
        else {
            findSequenceRecHelper(findIn,c,index+1);
        }
    }
    return result;
} 
```

我做了一些调试，发现该函数遍历整个`char[]`数组，当数组中的元素等于所需值时，`result`变为`true`. 但话又说回来，它`false`实际上`false`是返回的，这是不正确的。

我在这里找不到错误 - 有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T12:19:38.783

在递归步骤中：

```
else
findSequenceRecHelper(findIn,c,index+1); 
```

您应该`return`递归调用返回的值。否则 - 什么都不做，递归调用实际上是多余的。

```
private static boolean findSequenceRecHelper(char [] findIn, char c, int index)
{
boolean result = false;
if(index<findIn.length)
{
    if(findIn[index] == c)
        result = true;
    else
    return findSequenceRecHelper(findIn,c,index+1);
    //^ 
    //added return here
}
return result;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T12:22:03.170

当您递归调用您的方法时，您不会存储其返回值，从而有效地丢失指示符，无论是否找到该字符。您真正想要做的是将结果返回*到*当前调用之上的递归调用。

尝试这个：

```
private static boolean findSequenceRecHelper(char [] findIn, char c, int index)
{
    boolean result = false;
    if(index<findIn.length)
    {
        if(findIn[index] == c)
            return true;
        else
            return findSequenceRecHelper(findIn,c,index+1);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:18:15.163

改变这个：

```
if(index<findIn.length)
{
    if(findIn[index] == c)
        result = true;
    else
        return findSequenceRecHelper(findIn,c,index+1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T12:20:24.413

您没有对递归调用做任何事情。相反，您需要设置它返回的结果，以便您可以递归地返回它，即。`result = findSequenceRecHelper(findIn,c,index+1);`在您的`if`声明中。

# asp.net - 更新面板和 AJAX 计时器 - 删除每个 Tick 事件的所有控件

> ID：10914075
> 
> 赞同：1
> 
> 时间：2012-06-06T12:17:40.157
> 
> 标签：asp.net

我有一个 ASP.NET UpdatePanel 根据定时器的 Tick 事件触发刷新。

该页面解析自定义 XML 文件并动态插入 UserControls（包含 GridViews）。这是从`Page_Load`方法执行的。

```
if(!Page.IsPostBack)
  parseXmlFile(); 
```

第一次加载页面时，所有控件都按预期显示。问题是第一次`Tick`触发计时器事件时，所有用户控件都消失了。

如果`Tick`我调用一个自定义方法`RefreshData()`，该方法又通过 SqlDataSource 将数据重新绑定到 GridView。

```
 public void RefreshData() {
       GridView1.DataBind();
   ... 
```

也许我不明白 AJAX 在 ASP.NET 中是如何工作的。

我只想解析一次 XML 文件（这会在页面中创建所有 UserControl）。从这一点来说，我只想刷新GridView中包含的数据，改变GridView的Visibility状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:24:19.913

这一点是你必须关注的。

```
if(!PostBack)
  parseXmlFile(); 
```

您仅在第一次创建控件，因此在回发控件时，当 Tick 触发时，控件不会再次显示。

两种解决方案。
1\. 再次解析 XmlFile
2\. 保存视图状态上的所有控件，因此回发控件是从视图状态重新创建的。

我更喜欢保留 xmlfile 并像第一次一样重新创建它们。

如果你想知道为什么控件不再存在，因为它们没有写在页面数据端的任何地方，只是呈现在 html 部分，但是 html 部分从后面的代码中是未知的，只有数据和帖子像视图状态这样的数据可以通过后面的代码来识别。所以在回发时，后面的代码必须再次渲染页面，但是这个控件现在对于后面的代码是未知的，需要重新创建它们，以太通过首先创建它们的相同函数，以太通过保存它们视图状态。

# mysql - MySQL 从内部连接中选择 1 行

> ID：10914079
> 
> 赞同：1
> 
> 时间：2012-06-06T12:17:53.643
> 
> 标签：mysql, select, row, limit

我不知道这个问题的术语，标题可能有点误导。

我正在尝试创建一对多表的概述，但只想选择关系表的 1 个示例。

车桌

```
name
id 
```

汽车颜色

```
car_id
color 
```

一辆车可以有许多不同的颜色。但是，我只想为“概览”选择一种颜色。我怎样才能做到这一点？我的尝试产生了很多结果，同一车排有多种颜色。

如果可能的话，最好在一个查询中。

提前致谢

**编辑：**

我认为我的问题含糊不清。我正在尝试选择汽车表中的所有汽车，但只有一种颜色（它遇到的第一个颜色）。

```
Foo     blue
Bar     blue
Barfoo  yellow 
```

ETC

然而 Foo 有颜色，蓝色，黄色，红色，黑色等。

至于表创建查询，这是一个“虚拟”版本。我只是想学习如何通过朝着正确的方向努力来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:22:52.163

您需要这样的查询：

```
SELECT * FROM car
INNER JOIN car_color ON car.id = car_color.car_id 
LIMIT 1 -- this will limit the results to only one row 
```

编辑：要为汽车获得一种颜色，您可以使用组：

```
SELECT * FROM car
INNER JOIN car_color ON car.id = car_color.car_id 
GROUP BY car.id -- this will group all the rows with the same car to only one row per car 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:25:38.240

```
How about this.

    CREATE table car(name varchar(10),id int primary key);
    CREATE table car_details(car_id int foreign key references car(id), color varchar(20));

    INSERT into car values('BMW',1);
    INSERT into car_details values(1,'Blue');

    INSERT into car values('toyota',2);
    INSERT into car_details values(2,'pink');

    SELECT * FROM
    car c INNER join car_details cd
    on c.id = cd.car_id
    limit 1;

    Results in.    

    name       id          car_id      color
---------- ----------- ----------- --------------------
    BMW        1           1           Blue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:31:46.617

子查询

```
select cc.color from CarColours cc,Car c where cc.car_id = c.id and c.id = 1 limit 1 
```

# c# - 如何为 DataGridViewLinkColumn 中的每一行设置不同的文本？

> ID：10914083
> 
> 赞同：0
> 
> 时间：2012-06-06T12:18:08.550
> 
> 标签：c#

我有一个从数据库绑定数据的 DataGridView。我将 DataGridViewLinkColumn 添加到 DataGridView，这样我就可以单击一些链接来编辑或删除每个数据。但有些数据不需要编辑或删除。我想禁用或设置 DataGridViewLinkColumn 中的某些单元格为空。我尝试了很多方法，但我无法为每个单元格设置不同的文本。我只能将所有单元格设置为相同的文本。有什么简单的方法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:47:45.717

您需要为网格创建一个 RowDataBound 事件。在这种情况下，您可以进行所需的条件格式。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

# sitefinity - Sitefinity - 创建一个新的博客文章

> ID：10914092
> 
> 赞同：-1
> 
> 时间：2012-06-06T12:18:29.787
> 
> 标签：sitefinity

我们正在尝试将 Sitefinity 作为创建简单博客的可能解决方案。创建站点很简单，但现在我需要我的用户能够添加自己的博客文章，而无需登录管理站点。

我们没有看到什么？我们是否必须编写自定义代码以允许注册用户添加博客或博客文章？我已经看过有关如何执行此操作的文档，但我认为您只需要更改一个设置。

提前致谢，

兰迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:59:30.453

我不太清楚您要完成什么，因为创建博客文章的主界面位于后端。

您可以探索的一种选择是使用 Windows Live Writer，它受 Sitefinity 支持，允许您的用户从 Sitefinity 外部发表博客。他们仍然需要一个后端帐户来对其进行身份验证，但 WLW 将负责通过 API 发布它。

我希望这是有帮助的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:24:10.033

作为管理员，您可以创建用户并为其分配内置角色，例如作者、编辑和管理员。您可以编辑这些内置角色的权限以允许或禁止对各种功能的权限，例如发布到博客。如果适合您的目的，您还可以构建自定义角色并将它们分配给您的用户。

# java - 尝试初始化 vm_args 时出错

> ID：10914095
> 
> 赞同：5
> 
> 时间：2012-06-06T12:18:35.037
> 
> 标签：java, c, java-native-interface

`JDK1_1InitArgs`当我使用`JDK1_1InitArgs vm_args`编译器初始化时给我错误。我需要初始化这个变量才能使用该函数`JNI_CreateJavaVM`。

```
 JavaVM *jvm;
            JNIEnv *env;
            jmethodID mid;
            JDK1_1InitArgs vm_args; // Line 47
            vm_args.version = 0x00010001; // Line 48
            JNI_GetDefaultJavaVMInitArgs(&vm_args);
            vm_args.classpath = "C:/Program Files/Java/jdk1.7.0/lib;.;";

            JNI_CreateJavaVM(&jvm, &env, &vm_args);
            env = (*jvm)->AttachCurrentThread(jvm,&env,NULL);
            jclass cls = (*env)->GetObjectClass(env,Obj);
            mid = (*env)->GetMethodID(env,cls,"callBack","(Ljava/lang/String;)V");
            (*env)->CallVoidMethodA(env,Obj,mid,(*env)->NewStringUTF(env,"1B")); 
```

[参考](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/invocation.html)

*错误：*

![在此处输入图像描述](../Images/4712991108da22242c2ae96f6c0c57ea.png)

为什么我会收到这些错误？我怎样才能摆脱它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:14:15.217

不再支持 JNI 1.1。请参阅 HotSpot 的评论`jvm.h`，就在定义之前`struct JDK1_1InitArgs`：

> 启动器使用此结构使用 1.1 版本的 JNI_GetDefaultJavaVMInitArgs() 从 VM 获取默认线程堆栈大小。由于其他方面不支持，因此已从 jni.h 中删除

*来源：[http](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/tip/src/share/vm/prims/jvm.h) ://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/tip/src/share/vm/prims/jvm.h ，第 1673 行*

在 JDK 7 中创建 1.1 版的 JVM 似乎是不可能的——这意味着您可能想要使用更高的版本，例如 1.2，或者使用较旧的 JDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-16T12:54:34.523

在您的情况下，您可以简单地将其替换为 struct

```
JavaVMInitArgs 
```

但是，请确保也正确初始化版本成员，例如

```
vm_args.version = JNI_VERSION_1_6; 
```

# objective-c - 为什么我的 for 循环泄漏？

> ID：10914097
> 
> 赞同：3
> 
> 时间：2012-06-06T12:18:53.763
> 
> 标签：objective-c, ipad, instruments, memory-leaks

我已经通过仪器运行了我的程序，它报告了这段代码中的泄漏：

![在此处输入图像描述](../Images/4c1078f81ea02e2999b0127b16cb47e6.png)

这是为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:20:29.380

这部分代码没有泄漏。尝试运行分析器，它可能会告诉您泄漏的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:24:39.953

正如我之前所说，我在这里看不到泄漏，但是一些代码更改可能有助于消除可能的泄漏，因为您假设`substringWithRange:`正在产生泄漏。

以下代码使用基于块的枚举。另一个积极的影响：它知道如何处理组合的非 ascii 字符。

```
NSMutableArray *characters = [NSMutableArray array];
NSString *answer = @"Hello, Wørld!";
[answer enumerateSubstringsInRange:NSMakeRange(0, [answer length]) 
                           options:NSStringEnumerationByComposedCharacterSequences 
                        usingBlock:^(NSString *substring, 
                                     NSRange substringRange,
                                     NSRange enclosingRange, 
                                     BOOL *stop) 
{
    [characters addObject:substring];
}
 ];

[characters enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSLog(@"%@", obj);
}]; 
```

# tsql - 这个 SQL 语句的目的是什么？

> ID：10914099
> 
> 赞同：0
> 
> 时间：2012-06-06T12:18:58.237
> 
> 标签：tsql

```
SELECT * 

FROM 
    daaddress ad, 
    (daname nam LEFT OUTER JOIN daenttonam etn on nam.entity_id = etn.entity_id) 
```

我不明白用逗号分隔且没有 JOIN 语句的两个“表”应该做什么。是满的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:22:04.507

`daadress`它输出和之间`LEFT JOIN`的笛卡尔积。`daname``daenttonam`

使用`JOIN`语法，它可以重写为：

```
SELECT  * 
FROM   daaddress ad
CROSS JOIN
(
       daname nam
LEFT OUTER JOIN
       daenttonam etn
ON     nam.entity_id = etn.entity_id
) 
```

括号可以省略：

```
SELECT  * 
FROM   daaddress ad
CROSS JOIN
       daname nam
LEFT OUTER JOIN
       daenttonam etn
ON     nam.entity_id = etn.entity_id 
```

在不了解模型细节的情况下很难说出它的目的。

# facebook - facebook 扩展访问令牌

> ID：10914103
> 
> 赞同：1
> 
> 时间：2012-06-06T12:19:03.873
> 
> 标签：facebook, oauth, facebook-access-token, extending

嗨，我在这里看到了答案 [http://facebook.stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation](http://facebook.stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation) 并试了一下，但我是无法让它工作。

我有一个过期的令牌 - 但显然只需要一种自动更新它的方法。这可能吗有人可以给我一些代码吗

目前我正在尝试这个

```
try {
$result = $facebook->api(
                '/me/permissions/',
                'get',
                array('access_token' => $token)
        );
}
catch(FacebookApiException $e) {

    echo "token invalid";
    $facebook->setAccessToken($token);
    echo $facebook->getExtendedAccessToken();
} 
```

但我仍然得到

```
token invalid{"error":{"message":"Error validating access token: Session has expired at unix time 1338858000\. The current unix time is 1338985046.","type":"OAuthException","code":190,"error_subcode":463}} 
```

任何帮助。谢谢理查德

* * *

嗨，感谢您的帮助 我仍然登录到 facebook，并且我已经授予了我的应用程序的权限，所以我只需要一个新密钥。

我试过这个

```
$facebook = new Facebook(array(
                'appId'  => FACEBOOKAPPID,
                'secret' => FACEBOOKSECRET,
                'cookie' => true,
            ));

$url = $facebook->getLoginUrl(array('canvas'=>1,'fbconnent'=>1,'scope'=>'offline_access,publish_stream,email,user_about_me,user_birthday,user_website'));
file_get_contents($url);
$fb_session = $facebook->getUser();
echo $fb_session.'<br />';

$token = $facebook->getExtendedAccessToken();           
echo $token.'<br />'; 
```

您似乎需要“登录”到 facebook 才能再次获取详细信息，但您似乎不能使用 file_get_contents，因为 facebook 需要您机器上的 cookie。我正在尝试即时执行此操作，以免通过任何弹出窗口打扰用户，而且他们已经授予了应用程序权限。

有任何想法吗？理查德

哦，只是这样做似乎也不起作用。

```
$facebook = new Facebook(array(
    'appId'  => $this->fbApiKey,
    'secret' => $this->fbSecretKey,
    'cookie' => true,
));
$token = $facebook->getAccessToken(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:25:25.853

试试这个代码

```
$facebook = new Facebook(array(
    'appId'  => $this->fbApiKey,
    'secret' => $this->fbSecretKey,
    'cookie' => true,
));
$token = $facebook->getAccessToken(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:18:09.960

根据[删除offline_access权限](http://developers.facebook.com/roadmap/offline-access-removal/)：

> **场景 4：客户端 OAuth 和通过新端点延长 Access_Token 过期时间**
> 
> 使用下面的新端点，您将能够延长**现有的、未过期的、短期用户 access_token**的过期时间。请注意，端点只能用于扩展短期用户 access_tokens。如果您传递具有长期过期时间的 access_token，端点将简单地将相同的 access_token 传递回您，而不会更改或延长过期时间

长期访问令牌过期后，您需要获取一个新的短期令牌，然后对其进行扩展。
至于“如何扩展它”，它在同一篇文章中：

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

# c# - c# double 到字符数组或替代

> ID：10914105
> 
> 赞同：3
> 
> 时间：2012-06-06T12:19:05.897
> 
> 标签：c#, memory, tostring

我有一个程序，它存储了一堆包含许多 double 类型成员的结构实例。我经常将这些转储到一个文件中，我正在使用字符串生成器进行此操作，例如：

```
 StringBuilder builder = new StringBuilder(256);

 builder.AppendFormat("{0};{1};{2};", x.A.ToString(), x.B.ToString(), x.C.ToString()); 
```

其中“x”是我的类型的一个实例，A、B、C 是双精度类型 X 的成员。我在每一个上调用 ToString() 以避免装箱。但是，这些对 ToString 的调用仍会在我的应用程序上下文中分配大量内存，我想减少这种情况。我在想的是有一个字符数组，并将每个成员直接写入其中，然后从该字符数组创建一个字符串并将其转储到文件中。几个问题：

1）我想做的事情听起来合理吗？有没有人知道已经实现了类似的东西？

2）是否已经内置了一些东西来将双精度转换为字符数组（我想这将达到一些参数化的精度？）。理想情况下想要传入我的数组和一些索引并让它开始写入那里。

我尝试这样做的原因是在我的应用程序运行时减少内存中的大峰值，因为我运行许多实例并且经常发现自己受到内存的限制。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:29:39.080

文件是否需要某种文本格式？

如果没有，到目前为止最有效的方法是使用 BinaryWriter（和 BinaryReader 来读回它们）。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:56:22.823

如果可以直接写入文本文件，则可以使用 steamwriter 编写强类型结构。我没有测试内存使用情况，但我认为它们应该是有效的

```
 using (var tw = new System.IO.StreamWriter("filename", true)) //(true to append to file)
        {
            tw.Write(x.A);
            tw.Write(';');
        } 
```

如果需要字符串生成器，也可以使用以下方法调用强类型重载：

```
 builder.Append(x.A) //strongly typed as long as the field is a system type
            .Append(';')
            .Append(x.B)
            .Append(';'); 
```

当然，这两种方法在实现某种循环或委托时看起来会更好，但这在装箱逻辑之外。

**编辑**在其他答案中发布的自定义双写：[c# double to character array or alternative](https://stackoverflow.com/questions/10914105/c-sharp-double-to-character-array-or-alternative/10914673#10921319)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:12:38.367

您确定可能是多次调用`Double.ToString`导致您的记忆问题吗？每个字符串都应该在下一代 0 收集中收集，而 .NET 垃圾收集器在这方面非常有效。

如果您创建的字符串超过 85K，它们将在大对象堆上创建，这可能会增加您的应用程序所需的总内存，即使大字符串只是暂时存在（大对象堆碎片）。

您可以使用性能监视器来了解有关应用程序如何使用托管堆的更多信息。您使用了 CLRProfiler，它是一种更高级的工具，因此您可能不会学到任何新东西。

`StringBuilder`是在内存中构建字符串的正确类，但如果您只在内存中构建字符串以便稍后将其写入文件，您应该使用`StreamWriter`.

`StringBuilder`将不得不扩展用于存储字符串的缓冲区，您可以通过`StringBuilder`提前设置容量来避免这种额外的开销（您已经在示例代码中这样做了）。

无论您调用什么重载将 a 格式化`Double`为 a`StringBuilder`调用最终都会导致`Double.ToString`被调用。`StringBuilder.AppendFormat`直接格式化到缓冲区中，而不分配额外的格式化字符串，因此就内存使用而言，`StringBuilder.AppendFormat`这`StringBuilder.Append`和两个重载都将分配一个格式化字符串`Double`作为格式化过程的一部分。但是，`StringBuilder.AppendFormat`会装箱，`Double`因为它接受一个`params Object[]`数组。使用`StringBuilder.Append`接受 a 的重载`Double`不会遇到这个问题。

如果您确定这`Double.ToString`是内存问题的根源，我相信您最好的选择是编写自己的浮点格式化代码，该代码可以直接将浮点数写入`StringBuilder`. 这项任务很重要，但您可以从开源 C 库中获得灵感。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T12:56:54.747

您应该直接写入文件流以减少内存利用率。

```
using(var writer = new StreamWriter(...))
{
   writer.Write(x.A);
   writer.Write(";");
   writer.Write(x.B);
   writer.Write(";");
   writer.Write(x.C);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T20:02:06.297

出于对如何进行的纯粹好奇，我忍不住尝试创建一个可以直接编写双打的场景。下面是结果。我没有对它或任何东西进行基准测试，但它在我运行的（有限）测试中确实按预期工作。

```
 double[] test = { 8.99999999, -4, 34.567, -234.2354, 2.34, 500.8 };
        using (var sw = new FileStream(@"c:\temp\test.txt", FileMode.Create))
        {
            using (var bw = new BinaryWriter(sw))
            {
                const byte semicol = 59, minus = 45, dec = 46, b0 = 48;

                Action<double> write = d =>
                {
                    if (d == 0)
                        bw.Write(b0);
                    else
                    {
                        if (d < 0)
                        {
                            bw.Write(minus);
                            d = -d;
                        }

                        double m = Math.Pow(10d, Math.Truncate(Math.Log10(d)));
                        while(true)
                        {
                            var r = ((decimal)(d / m) % 10); //decimal because of floating point errors
                            if (r == 0) break;
                            if (m == 0.1)
                                bw.Write(dec); //decimal point
                            bw.Write((byte)(48 + r));         
                            m /= 10d;
                        }
                    }

                    bw.Write(semicol);
                };

                foreach (var d in test)
                    write(d);
            }
        } 
```

# magento - 如何在magento中创建pdf？

> ID：10914108
> 
> 赞同：4
> 
> 时间：2012-06-06T12:19:12.277
> 
> 标签：magento, pdf, admin

我想在后端/管理员的产品列表的 magento 中创建一个 pdf。我不知道该怎么做，而且我在互联网上找到的东西没有那么有用。希望有人能帮助我。

克

*编辑*

```
class Wouterkamphuisdotcom_Web_Adminhtml_WebController extends Mage_Adminhtml_Controller_action {

protected function _initAction() {
    $this->loadLayout()
            ->_setActiveMenu('web/items')
            ->_addBreadcrumb(Mage::helper('adminhtml')->__('Items Manager'), Mage::helper('adminhtml')->__('Item Manager'));

    return $this;
}
public function exportPdfAction(){
    $fileName = 'customers.pdf';        
    $content = $this->getLayout()->createBlock('Web/Web_Grid')->getPdfFile();
    $this->_prepareDownloadResponse($fileName, $content);
} 
```

这是我的控制器

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T14:01:37.760

请注意：

*   这不是一个**好方法**，因为它覆盖了 Magento 核心文件，你必须在你的模块中覆盖这些文件。
*   这不是一个**完整的解决方案**，而是一个提示，可以让您自己理解并走得更远。（这将只打印标题，不打印数据）

我将指导您向客户添加 PDF 导出功能（默认有 CSV 和 Excel）

编辑**app/code/core/Mage/Adminhtml/Block/Widget/Grid.php**，添加如下函数

```
 public function getPdfFile(){
    $this->_isExport = true;
    $this->_prepareGrid();
    $this->getCollection()->getSelect()->limit();
    $this->getCollection()->setPageSize(0);
    $this->getCollection()->load();
    $this->_afterLoadCollection();

    $pdf = new Zend_Pdf();
    $page = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
    $font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_TIMES);
    $page->setFont($font, 12);
    $width = $page->getWidth();
    $i=0;
    foreach ($this->_columns as $column) {
        if (!$column->getIsSystem()) {
            $i+=10;
            $header = $column->getExportHeader();                
            $page->drawText($header, $i, $page->getHeight()-20);                
            $width = $font->widthForGlyph($font->glyphNumberForCharacter($header));
            $i+=($width/$font->getUnitsPerEm()*12)*strlen($header)+10;
        }
    }
    $pdf->pages[] = $page;
    return $pdf->render();
} 
```

Edit **app/code/core/Mage/Adminhtml/controllers/CustomerController.php**, add the following function

```
public function exportPdfAction(){
    $fileName = 'customers.pdf';        
    $content = $this->getLayout()->createBlock('adminhtml/customer_grid')->getPdfFile();
    $this->_prepareDownloadResponse($fileName, $content);
} 
```

Edit **app/code/core/Mage/Adminhtml/Block/Customer/Grid.php**, locate

```
 $this->addExportType('*/*/exportCsv', Mage::helper('customer')->__('CSV'));
    $this->addExportType('*/*/exportXml', Mage::helper('customer')->__('Excel XML')); 
```

Add the PDF Export

```
 $this->addExportType('*/*/exportCsv', Mage::helper('customer')->__('CSV'));
    $this->addExportType('*/*/exportXml', Mage::helper('customer')->__('Excel XML'));
    $this->addExportType('*/*/exportPdf', Mage::helper('customer')->__('PDF')); 
```

Now refresh the admin, you can export customers as PDF.

# python - python lxml解析html

> ID：10914109
> 
> 赞同：1
> 
> 时间：2012-06-06T12:19:18.860
> 
> 标签：python, html-table, html-parsing, lxml

我正在尝试解析 html 文档。它包含几个表。我能够找到正确的表并从中获取数据

```
for cell in doc.xpath('//table[@class="CE_13"]')[0]:
    for a in cell:
        print a.text_content() 
```

表由 6 列组成。我只需要第五列。是否可以在 dict 中获取所有值（例如：`{ column1 : values_of_clm1 ;column2 : values_of_clmn2; .....})`以及如何？然后读取 dict 形式，或者您是否提出不同的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T12:26:05.430

这篇文章可能对您尝试做的事情有用：[python、lxml 和 xpath - html 表解析](https://stackoverflow.com/questions/1577487/python-lxml-and-xpath-html-table-parsing)。

然后阅读你的字典，你可以选择不同的策略。如果您确切知道键是什么，那么您可以直接通过键访问您的值，如下所示：`my_dict['a_key_string']`

否则，您可以像这样遍历您的字典：

```
for key,val in my_dict.items():
   do_stuff(key,val) 
```

**编辑**

获取所有第 5 个`td`元素：

```
tds = root.xpath("//table//td[position()=5]") 
```

遍历`td`元素：

```
for td in tds:
    print "tag %s" % td.tag
    print "inner %s" % td.text 
```

基本上你在这里不需要字典，因为你只能直接获取组成你的第 5 个表格列的 td 元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:50:11.967

我通过使用以下代码解决了我的问题：

```
en_array = []
for cell in doc.xpath('//table[@class="CE_13"]')[0]:
    for a in cell:
        en_array.append(a.text_content())

print en_array
#Print the 6th column of table
for a,element in enumerate(en_array):
    if a % 9 == 5:
        print en_array[a] 
```

如果有人有更好的解决方案，请告诉我。谢谢你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:38:09.963

如果您只需要单元格内容列表，您可以使用：

```
[c.text for c in doc.xpath('//table[@class="CE_13"][1]//tr/td[5]')] 
```

如果您确实需要任意字典键并使用 Python2.7：

```
l = doc.xpath('//table[@class="CE_13"][1]//tr/td[5]')
{'column%d' % (i+1): l[i].text for i in range(0,len(l))} 
```

# javascript - symfony jQuery keyup 奇怪的情况

> ID：10914110
> 
> 赞同：0
> 
> 时间：2012-06-06T12:19:20.607
> 
> 标签：javascript, jquery, symfony1, symfony-1.4

我有简单的评论表格。我把 char-counter 。当我创建新评论时一切正常。当我尝试编辑评论时，字符计数器不起作用。我尝试了 Live()，但结果是一样的。编辑页面中的其他 Js 工作正常，只是这个 keyup 功能死了。我试图发出警报以查看 keyup 是否有效，但没有回应。这是我的代码：

*   html

    ```
     <?php echo form_tag_for($form, '@comments',array('class' => 'nice'));?>

            <?php echo $form->renderHiddenFields() ?>
            <?php echo $form->renderGlobalErrors() ?>
            <?php echo $form['_csrf_token']; ?>
            <input type="hidden" name="comments[users_id]" id="comments_users_id" value="1" />
            <input type="hidden" name="comments[tests_id]" id="comments_users_id" value="<?php echo $testId?>" />

            <?php echo $form['comment']->renderError() ?>

              <div class="count">remaining symbols : 250</div>
              <div class="barbox"><div class="bar"></div></div>

            <?php echo $form['comment']->render(array('class' => 'comments_comment')) ?>

            <?php  echo $form['captcha']->renderLabel(null,array('class' => 'label-login-down ')) ?>
            <?php echo $form['captcha']->renderError() ?>
            <?php echo $form['captcha']->render(array('class' => 'normal  input-text ' , 'placeholder'=>"Въведете символите")) ?>

            <input type="submit" name="addComment" value="Изпрати" />          
        </form> 
    ```

*   jQuery

    ```
    $(".comments_comment").keyup(function()
    {       
      var box=$(this).val();
      var main = box.length *100;
      var value= (main / 250);
      var count= 250 - box.length;

      if(box.length <= 250)
      { 
        if(box.length <=210)
        {
         $('.count').html('remaining symbols : '+count);            
        }
        else
        {          
       $('.count').html('<div class="commentAlertSymbols">remaining symbols :    '+count+'</div>'); 
        }
      $('.bar').animate(
      {
      "width": value+'%',
      }, 1);

    }
    else
    {
      $('.count').html('<div class="commentRedSymbols">remaining symbols : '+count+'</div>');
    }
    return false;
    }); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:16:18.933

很高兴看到实际的表单 HTML 输出而不是所有那些 PHP 帮助函数，但我会试一试：

```
$('.comments_comment').keyup(function() {
    // Get the number of characters, percent used, and number left
    var $count = $('.count');
    var chars = $(this).val().length;
    var percent = (chars / 250) * 100;
    var left = 250 - chars;

    // Update the counter
    $count.html('Remaining Symbols: ' + left);

    // Add classes based on how many are left
    if (chars > 210 && chars <= 250) {
        $count.addClass('commentAlertSymbols');
    } else if (chars > 250) {
        $count.addClass('commentRedSymbols');
    }

    // Animate the bar
    $('.bar').css({
        width: chars <= 250 ? percent + '%' : '100%'
    });
}); 
```

我使代码更加干燥。另外，我将`$('.bar').animate`行更改为`$('.bar').css`，因为我没有看到在一秒钟内设置动画的意义。

[您可以在http://jsfiddle.net/KjTrj/](http://jsfiddle.net/KjTrj/)看到一个有效的 JSFiddle 。

# php - Mac OSX 上的 MAMP 和 Pecl 安装，用于设置 PHP 扩展

> ID：10914114
> 
> 赞同：3
> 
> 时间：2012-06-06T12:19:49.390
> 
> 标签：php, osx-lion, mamp, pecl

我在 Mac OSX 上的 MAMP 1.9 上运行 pecl 时遇到了很大的问题，在花了一天的时间解决了整个问题之后，我解决了它，所以我想我会与其他人分享它。如果您知道更好的方法来做到这一点，也许您可​​以告诉我？

基本上，问题是我需要在我的 MAMP 系统上安装一些 PHP 扩展，为了做到这一点，我需要 pecl 或编译器才能工作。但没有一个在运作。所以我做的第一件事就是升级到 MAMP 2。然后我将 MAMP 的 pecl 的路径添加到 ./profile 输入终端：

```
echo "export PATH=/Applications/MAMP/bin/php/php5.3.6/bin:$PATH" >> ~/.profile 
```

然后，您可以通过键入以下内容来检查您对 pecl 的调用是否指的是“正确”版本（而不是 Mac Osx 的内部版本）：

```
which pecl 
```

现在为了能够使用 pecl 构建扩展，我们需要准备构建环境以便它们正确编译。[这个页面给出了一个很好的建议](http://www.lullabot.com/articles/installing-php-pear-and-pecl-extensions-on-mamp-mac-os-x-107-lion)。简而言之，您需要从他们的网站下载 MAMP 的库，然后选择与您当前激活的版本相对应的 PHP 文件夹（在我的情况下是 php-5.3.6）并将其复制到 /Applications/MAMP/bin/php /php5.3.6/include 文件夹。之后，您应该进入终端中的该文件夹并运行

```
./configure 
```

现在，这只有在您安装了 XCode 时才有效。问题在于，即使已安装，较新版本的 XCode 默认不包含命令行工具，例如 gcc 编译器（您需要的）。因此，您需要做的是通过 XCode 或从 Apple 的网站下载它。下载这些命令行工具后，您应该已经安装了 gcc，并且 ./configure 命令应该可以正常工作。

如果不是这样，您还可以安装 MacPort，然后使用它来安装 gcc 和 autoconf——编译所需的工具。

```
port install autoconf 
```

尽管它们可能已经作为 XCode 命令行工具的一部分工作。

无论如何，完成所有这些之后，您终于可以在您的 php 源文件夹中运行 ./configure 了，为以后的工作做好准备，您可以通过输入以下内容来检查它是否正常工作：

```
pecl install uploadprogress 
```

（为了初始化该扩展，您可能需要将 extensions=uploadprogress.so 添加到您的 php.ini 文件中）

就是这样，我只是想我会把它全部列出来，因为我花了几个小时才找到正确的动作顺序，我希望它会为其他人节省时间。如果您对如何更有效地完成它有想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T08:02:29.527

我在安装时遇到了困难，因为 MAMP 库不再公开可用。

但是你可以在这里下载最新的 php 版本 -: [http://php.net/releases/index.php](http://php.net/releases/index.php)，提取它的内容并插入到这里。

对我来说，路径看起来像这样 /Applications/MAMP/bin/php/php5.5.3/include/php 。我手动创建文件夹include，然后把解压出来的下载内容放到php文件夹里。

之后 ./configure 工作，然后我只是做了 pecl install uploadprogress。将该扩展名添加到相关的 php.ini 文件（用于版本） -: extensions=uploadprogress.so 到您的 php.ini

干杯普拉蒂克

# android - Min3d 不显示任何内容（来自 min3d wiki 的示例）

> ID：10914120
> 
> 赞同：0
> 
> 时间：2012-06-06T12:20:02.140
> 
> 标签：android, opengl-es

我正在尝试使用[min3d 库创建一个简单的 Android 应用程序](http://code.google.com/p/min3d)

以前我从市场上下载了带有 min3d 库示例的 apk 文件。此应用程序中的每个示例都可以在真实手机上正常运行。这意味着手机没有3d问题。

我已经用示例检查了 min3d 的源代码，并创建了简单的 Android 应用程序，其中包含从示例中复制粘贴的单个活动：

```
import min3d.core.Object3dContainer;
import min3d.core.RendererActivity;
import min3d.objectPrimitives.Box;
import min3d.vos.Light;

public class ExampleMostMinimal extends RendererActivity {
    Object3dContainer _cube;

    public void initScene() 
    {
        scene.lights().add( new Light() );
        _cube = new Box(1,1,1, null, true,true,false);
        _cube.colorMaterialEnabled(false);
        scene.addChild(_cube);
    }

    @Override 
    public void updateScene() 
    {
        _cube.rotation().y++;
    }
} 
```

但是当应用程序启动时，它会显示标题栏和黑屏。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:39:05.347

我解决了这个问题。

原因在于 min3d 文件的来源。我从[nyARToolkit](http://nyatla.jp/nyartoolkit/wp/)框架的示例中获得了框架文件。

当我用从 min3d 谷歌存储库中签出的文件替换文件时，问题得到了解决。

p.s. I copied files from example because min3d in example of nyARToolkit works fine.

# javascript - ASP.NET 使用单个和数组反序列化 Json 对象

> ID：10914123
> 
> 赞同：2
> 
> 时间：2012-06-06T12:20:16.050
> 
> 标签：javascript, asp.net, json

我对json很陌生，请帮帮我！假设我有以下 json 对象

```
{
    "Table": "",
    "Id": "",
    "Column": [
        {
            "ColumnText": "",
            "ColumnSqlName": ""
        },
        {
            "ColumnText": "",
            "ColumnSqlName": ""
        }
    ]
} 
```

我想使用asp.net来反序列化上面的json，最好的方法是什么？谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:24:54.800

我建议使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)库将对象序列化和反序列化为 json

例如：它将 json 对象反序列化为 C# 对象...

```
string json = @"{
  ""Name"": ""Apple"",
  ""Expiry"": new Date(1230422400000),
  ""Price"": 3.99,
  ""Sizes"": [
    ""Small"",
    ""Medium"",
    ""Large""
  ]
}";

JObject o = JObject.Parse(json);

string name = (string)o["Name"];
// Apple

JArray sizes = (JArray)o["Sizes"];

string smallest = (string)sizes[0];
// Small 
```

![在此处输入图像描述](../Images/b5d3b9208d7fd4d7e2f5061ca7a5e5e1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:25:11.320

[MSDN](http://msdn.microsoft.com/en-us/library/bb412179.aspx)有一个简单的示例供您学习。如果它是一项服务，那么使用 WCF 简单地使用它可能会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:38:03.033

您可以使用内置类`JavaScriptSerializer`this。`MyClass`是一个匹配json结构的类

```
var serializer = new JavaScriptSerializer();
MyClass instance = serializer.Deserialize<MyClass>(myJson); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T03:53:06.093

```
 Public Class JsonObj
    Private _Table As String
    Public Property Table() As String
        Get
            Return _Table
        End Get
        Set(ByVal value As String)
            _Table = value
        End Set
    End Property
    Private _Id As String
    Public Property Id() As String
        Get
            Return _Id
        End Get
        Set(ByVal value As String)
            _Id = value
        End Set
    End Property

    Private _Column As JsonSetting()
    Public Property Column() As JsonSetting()
        Get
            Return _Column
        End Get
        Set(ByVal value As JsonSetting())
            _Column = value
        End Set
    End Property
End Class

Public Class JsonSetting
    Private _ColumnText As String
    Public Property ColumnText() As String
        Get
            Return _ColumnText
        End Get
        Set(ByVal value As String)
            _ColumnText = value
        End Set
    End Property

    Private _ColumnSqlName As String
    Public Property ColumnSqlName() As String
        Get
            Return _ColumnSqlName
        End Get
        Set(ByVal value As String)
            _ColumnSqlName = value
        End Set
    End Property
End Class 
```

用法：

```
Dim o As New JavaScriptSerializer
Dim instance As JsonObj = o.Deserialize(Of JsonObj)(json_str) 
```

感谢您的所有回复，但上面的代码可能会很好用。

# web-services - 使用 Adob e Livecycle Designer 连接到 https 安全 Web 服务时遇到问题

> ID：10914133
> 
> 赞同：1
> 
> 时间：2012-06-06T12:21:09.217
> 
> 标签：web-services, forms, https, adobe, livecycle-designer

我正在尝试使用 Adob​​e Livecycle Designer ES2 在 XFA 表单中创建与安全 (https) Web 服务的数据连接，但遇到了一些困难。

我是 Livecycle 新手，曾尝试在线搜索答案，但 Adob​​e 帮助不是很清楚，我能找到的唯一在线教程是连接到非 https 服务的教程。

我尝试连接的 WSDL 是：[https ://uk.ws.ondemand.qas.com/ProOnDemand/V3/ProOnDemandService.asmx?WSDL](https://uk.ws.ondemand.qas.com/ProOnDemand/V3/ProOnDemandService.asmx?WSDL)

我的问题是：
Q1。Adobe Livecycle 是否支持 https Web 服务连接？以下链接表明这是不可能的：http: [//books.google.co.uk/books ?id=yOOcM3Bn4BAC&pg=PA179&lpg=PA179&dq=secure+web+service+with+adobe+livecycle&source=bl&ots=jm1GIZflOJ&sig=uLfv5Xda4eXXJl5o_7vBViwU -w0&hl=en&sa=X&ei=WLvIT5P4OujW0QWmv7nDAQ&ved=0CI4BEOgBMAk#v=onepage&q=secure%20web%20service%20with%20adobe%20livecycle&f=false](http://books.google.co.uk/books?id=yOOcM3Bn4BAC&pg=PA179&lpg=PA179&dq=secure+web+service+with+adobe+livecycle&source=bl&ots=jm1GIZflOJ&sig=uLfv5Xda4eXXJl5o_7vBViwU-w0&hl=en&sa=X&ei=WLvIT5P4OujW0QWmv7nDAQ&ved=0CI4BEOgBMAk#v=onepage&q=secure%20web%20service%20with%20adobe%20livecycle&f=false)

Q2。我设法使用了 WSDL，但只能看到特定 SOAP 操作的 XML 请求的正文。我在哪里可以添加用户名/密码凭据？我在新连接向导中选择了“需要消息级身份验证”，但它根本没有提示我提供这些详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:22:11.587

您可以从 LC adminUi 添加用户名和密码凭证。我相信设置/信任存储下有一个用户名和密码凭据设置页面。

# c# - 使用“Windows 资源管理器”在两个 SharePoint 2007 库之间移动文件时出现奇怪的行为

> ID：10914134
> 
> 赞同：0
> 
> 时间：2012-06-06T12:21:13.640
> 
> 标签：c#, sharepoint-2007

我创建了一个功能，在其中继承 SPItemEventReceiver 以向 ItemAdded 方法添加一些自定义代码。该解决方案按预期工作，除了在一种情况下：当我在“Windows 资源管理器”中打开两个文档库并将文件从一个库拖到另一个库时，自定义代码只会**偶尔**执行。

为了调查这种行为，我尝试了调试，但是当我这样做时，自定义代码**每次**都会被执行。

我已使用此过程来避免 properties.ListItem 为空：[http ://social.msdn.microsoft.com/Forums/en/sharepointdevelopment/thread/8712648e-cf09-4f7b-ab13-1c6aacdf588a](http://social.msdn.microsoft.com/Forums/en/sharepointdevelopment/thread/8712648e-cf09-4f7b-ab13-1c6aacdf588a)

您对可能是什么问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:57:38.517

ItemAdded 事件是一个异步事件。这意味着之前的操作可能尚未完全完成。它很可能总是在调试模式下工作，因为这是一个时序问题。您可以尝试 itemAdding 事件或如下所述的解决方法：[this blog](http://www.thorntontechnical.com/tech/sharepoint/sharepoint-event-receivers-itemadded-null-columns-fun)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:31:42.410

我不确定是什么导致了这个问题，但是在 ItemAdded 方法中添加了以下行之后，它就可以工作了：

```
 System.Threading.Thread.Sleep(200); 
```

# excel - 有没有办法使用 VBA 创建一个带有链接的滚动条和按钮，然后按一下按钮删除？

> ID：10914136
> 
> 赞同：0
> 
> 时间：2012-06-06T12:21:33.320
> 
> 标签：excel, vba

我正在通过创建一个具有三个按钮而不是要查看三个选项卡的工作表来简化工作表。

这是工作簿。

[https://dl.dropbox.com/u/3327208/Excel/Archives.xlsx](https://dl.dropbox.com/u/3327208/Excel/Archives.xlsx)

我试图做的是，每个按钮对应一个特定的选项卡，它最终会调整每个字段以适应每个选项卡中的每个对应列。由于存档 1 需要与存档 2 或 3 不同的格式。

现在这将是一个简单的复制和粘贴概念，但我想做的是让这比基本脚本更复杂一点的两件事，因为我可以创建一个删除列并将数据粘贴到单元格的脚本，但我会正在使用滚动条，据我所知，它不能被相同的命令删除，或者可以吗？这就是我要找的...

~~- 如何创建一个滚动条，所有数据都与它对应，因此它将与所述活动数据一起使用，所以如果我按下第一个按钮，屏幕上的所有数据都将对应于存档 1，滚动条也将对应。如果我按下按钮 2，数据和滚动条将对应于存档 2，等等...~~

*   拥有它，这样滚动条与之交互的相关行数将始终对应于最后一行，因此当滚动条到达底部时，最后没有“空”数据。

*   如何也删除所述滚动条，以便它可以被其他人替换。

~~- 这是一种需要，而不是需要，但要使输入数据的单元格与滚动条交互，并且滚动条只会下降到可见工作表的高度。所以在英语中，如果工作表显示 20 行，那就是条和数据的距离。~~

再次感谢。

我决定尝试使用 lastrow 概念来制作它，以便脚本将“lastrow”输入到 .Max 中，因为滚动条不会超过最后一行数据，这里是代码：

```
 Sub scrollbar()

    Dim lastrow As Long
    Dim wsJAR As Worksheet 'JL Archive
    Dim wsARC As Worksheet 'JL Archive
    Set wsJAR = Sheets("JL Archive")
    Set wsARC = Sheets("Archives")

    With wsARC
    lastrow = wsJAR.Range("B" & .Rows.Count).End(xlUp).Row
    ActiveSheet.ScrollBars.Add(1107, 44, 15, 404).Select

        With Selection
            .Max = lastrow
            .LinkedCell = "Lists!$G$3"
        End With
    End With
End Sub 
```

没有错误，它接受 lastrow 作为数字，但即使没有理由这样做，它也会继续通过单元格。

最后一行是 36，现在如果我从 36 中删除 13，它可以完美运行，但我无法想象这就是答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:46:52.123

改变

```
With wsARC
    lastrow = wsJAR.Range("B" & Rows.Count).End(xlUp).Row
    wsARC.FreezePanes = False
    Range("A1:Q13").Select
    Range("Q1").Activate
    wsARC.FreezePanes = True
End With 
```

到

```
With wsARC
    lastrow = wsJAR.Range("B" & .Rows.Count).End(xlUp).Row
    .Activate
    ActiveWindow.FreezePanes = False
    .Range("A1:Q13").Select
    .Range("Q13").Activate
    ActiveWindow.FreezePanes = True
End With 
```

**最终代码**

```
Sub freezecells()
    Dim lastrow As Long
    Dim wsJAR As Worksheet 'JL Archive
    Dim wsARC As Worksheet 'Archive

    Set wsJAR = Sheets("JL Archive")
    Set wsARC = Sheets("Archives")

    With wsARC
        lastrow = wsJAR.Range("B" & .Rows.Count).End(xlUp).Row
        .Activate
        ActiveWindow.FreezePanes = False 
        .Range("A1:Q13").Select
        .Range("Q13").Activate
        ActiveWindow.FreezePanes = True
    End With
End Sub 
```

# asp.net - 指定 Crystal 报表中的列数

> ID：10914137
> 
> 赞同：0
> 
> 时间：2012-06-06T12:21:40.543
> 
> 标签：asp.net, crystal-reports

我正在尝试在我的水晶报表详细信息部分中设置多个列。我至少需要三列，但它总是只给我两列。如何指定列数

在我的详细信息部分中，我检查了“多列格式”并在布局选项卡中详细信息大小：宽度 - 2.5 详细信息之间的间隙：水平 - 0.5

此报告用作子报告

![在此处输入图像描述](../Images/94368fd952e86aa1e4b4842b1c5ad2ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:36:18.473

您不能明确指定列数；您将需要调整`width`和`gap`属性以满足您的需求。

传奇：

*   PW：页面宽度
*   M：页边距
*   C：列数
*   CW：列宽
*   G：列之间的间隙

使用此公式作为指导：

`PW = 2M + C*CW + (C-1)*G`

替换您的值：

`3 * 2.5" + 2 * 0.5" = 8.5"`

您没有在计算中考虑利润。您可以通过以下方式解决此问题：

*   将边距设置为 0（不是一个好主意）
*   减小列大小
*   减少你的差距大小
*   这些的任何组合

# azure - 计算模拟器上的窗口 Azure 服务

> ID：10914139
> 
> 赞同：2
> 
> 时间：2012-06-06T12:21:58.250
> 
> 标签：azure, cloud, azure-worker-roles

我创建了一个 Windows Azure 项目作为**Worker Role** ..它有一个简单的 WCF 服务。当我在本地系统上运行它时，**Compute Emulator**会给我以下错误...

我安装了最新的 Azure SDK 工具包。请告诉我为什么会发生此错误。

```
在 Microsoft.WindowsAzure.Diagnostics.ControlChannel.GetControlContainer()
[诊断]：获得互斥锁  
【诊断】信息：C:\Users\kashif\AppData\Local\dftmp\Resources\85b2b7f8-61ec-499d-a473-b39674855c21\directory\DiagnosticStore\Monitor    
[诊断] 信息：C:\Users\kashif\Downloads\WCFWorkerRole\WCFWorkerRole\WCFWorkerRole\csx\Debug\roles\WCFWorker\diagnostics\x64\monitor\MonAgentHost.exe -LocalPath "C:\Users\kashif\AppData\Local \dftmp\Resources\85b2b7f8-61ec-499d-a473-b39674855c21\directory\DiagnosticStore\Monitor"-StaticConfigFile "C:\Users\kashif\AppData\Local\dftmp\Resources\85b2b7f8-61ec-499d-a473-b39674855c21\directory \DiagnosticStore\Monitor\Configuration\mastaticconfig.xml" -ConfigFile "C:\Users\kashif\AppData\Local\dftmp\Resources\85b2b7f8-61ec-499d-a473-b39674855c21\directory\DiagnosticStore\Monitor\Configuration\maconfig.xml " -ShutDownEvent WADDM-ShutDown-f615698470fe491ea136287908faa42c -InitializedEvent WADM-StartUp-f615698470fe491ea136287908faa42c -parent 11516 -events
[MonAgentHost] 输出：当发出 WADDM-ShutDown-f615698470fe491ea136287908faa42c 信号时，代理将退出。    
[MonAgentHost] 输出：代理初始化后将发出 WADM-StartUp-f615698470fe491ea136287908faa42c 信号。       
[MonAgentHost] 输出：注册为事件消费者。    
[MonAgentHost] 输出：当父进程 11516 退出时，代理将退出。    
[MonAgentHost] 输出：监控代理已启动    
[诊断]：创建配置通道服务器    
[诊断]：启动配置通道轮询    
[运行时] 角色入口点。已完成 OnStart()    
[运行时] 角色入口点。调用运行（）    
信息：WCFWorker 入口点调用    
信息：工作    
信息：工作    
[MonAgentHost] 错误：MA 事件：2012-06-04T13:40:32.487Z    
[MonAgentHost] 错误：2    
[MonAgentHost] 错误：11292    
[MonAgentHost] 错误：7264    
[MonAgentHost] 错误：NetTransport    
[MonAgentHost] 错误：0    
[MonAgentHost] 错误：x:\btsdx\215\services\monitoring\shared\nettransport\src\netutils.cpp    
[MonAgentHost] 错误：OpenHttpSession    
[MonAgentHost] 错误：749    
[MonAgentHost] 错误：0    
[MonAgentHost] 错误：2f94    
[MonAgentHost] 错误：    
[MonAgentHost] 错误：WinHttpGetProxyForUrl(http://127.0.0.1) 失败 ERROR_WINHTTP_AUTODETECTION_FAILED (12180)    
[MonAgentHost] 错误：MA 事件：2012-06-04T13:40:32.504Z    
[MonAgentHost] 错误：2    
[MonAgentHost] 错误：11292    
[MonAgentHost] 错误：7264    
[MonAgentHost] 错误：NetTransport    
[MonAgentHost] 错误：0    
[MonAgentHost] 错误：x:\btsdx\215\services\monitoring\shared\nettransport\src\xblobconnection.cpp    
[MonAgentHost] 错误：XBlobConnection::SendBytesRequestAndGetHttpStatus    
[MonAgentHost] 错误：1980    
[MonAgentHost] 错误：ffffffff80050006

```

### 工人角色 OnStart：

```
ServicePointManager.DefaultConnectionLimit = 12; 
ServiceHost host; 
IPEndPoint ip = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["port"].IPEndpoint; 
Uri baseAddress = new Uri(String.Format("http://{0}/MyService", ip)); 
try { host = new ServiceHost(typeof(MessengerService), baseAddress); host.Open(); }
catch (Exception ex) { Trace.WriteLine(ex.Message, "Error"); throw; } 
return base.OnStart(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T16:24:25.230

要摆脱这种情况，您需要在控制面板 -> 网络和 Internet -> Internet 选项 -> 连接 -> LAN 设置中禁用“自动检测设置”选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:30:43.613

大多数情况下，此异常与您的 Azure 开发存储启动过程直接相关。无法启动 Azure 开发存储可能有多种原因。Azure 开发存储依赖于本地 SQL Server Express 组件，因此有时与 SQL Server 组件相关的任何问题都可能导致此问题。

要确保您的 Azure 开发存储正在运行，请尝试以管理员模式启动 C:\Program Files\Windows Azure Emulator\emulator\csmonitor.exe，然后验证您是否可以手动运行计算模拟器和开发存储。

一旦上述测试没有任何问题，请测试您的 Worker Role + WCF 应用程序，这应该让您没有任何问题，如果您在 Azure 存储运行正常时仍然看到问题，请在 onStart() 代码中显示您的 Worker 角色。（我还建议只创建一个非常简单的 web 或工作角色 hello world 示例，看看这是否会给您带来任何错误。这将证明您的 SDK 安装是否有任何问题）

**添加更多：**

您提供为“[MonAgentHost] 错误：WinHttpGetProxyForUrl(http://127.0.0.1) failed ERROR_WINHTTP_AUTODETECTION_FAILED (12180)
”的错误消息是良性的，如我的[这篇博客](http://blogs.msdn.com/b/avkashchauhan/archive/2011/01/20/winhttpgetproxyforurl-failed-error-winhttp-autodetection-failed-12180-error-message-in-windows-azure-infrastructure-log.aspx)中所述。

接下来根据您上面的代码（和示例链接），我真的没有看到任何显示错误的异常：

您是否尝试过使用访问服务：

```
http://{0}/MyService
it would be http://127.0.0.1:9001/MyService if you have followed the sample code provided in the link? 
```

此外，您的 OnStart() 函数与您提供的链接中的函数大不相同，我希望您知道您在代码中在做什么，因为您在上面提供的信息完全不同，所以除非您知道自己在做什么，否则它最好完全按照文章来匹配结果。

# json - jQuery getJSON 没有输出

> ID：10914146
> 
> 赞同：0
> 
> 时间：2012-06-06T12:22:16.510
> 
> 标签：json, jquery

我尝试使用 jQuery 在 html 文件中显示 JSON 数据。

**但是在html中我什*`null`*至没有任何输出*`unindefied`***

我尝试使用来自 Flickr 的外部 JSON 数据，我至少看到了`[Object]`

我也尝试在本地服务器上测试这两个文件 - HTML 和 JSON - 再次没有

我在我的服务器上为 application/json 添加 MIME 类型

我检查了 JSON-它是有效的

在 Firebug 我看到 JSON 响应（见下图）

如果重要的话，我在同一页面上使用 jQuery mobile 和 DW Fluid 网格布局。

**我的 JSON 是用 PHP json_encode 生成的：**

```
({ "title": "Art and Culture",
"items": [
{"id":"kunst-im-tunnel","lat":"51.219917"},
{"id":"kunsthalle","lat":"51.227568"},
{"id":"kunstsammlung-nordrhein-westfalen","lat":"51.22841"}]
}) 
```

**JSON 的 PHP 代码**

```
<?php
header('Cache-Control: no-store, no-cache, must-revalidate, private, post-check=0, pre-check=0');
header('Pragma: no-cache'); 
header('Expires: Sat, 26 Jul 1997 05:00:00 GMT'); 
header('Content-type: application/json; charset=utf-8');
$out = json_encode($post);
echo "({ \"title\": \"Art and Culture\",\"items\": " .$out." })";
?> 
```

**我的 JavaScript 代码是：**

```
$.getJSON("http://example.com/app.php?cat=category&jsoncallback=?",
{format: "json"},
function(data){
    $.each(data.items, function(i,item){

        $('<li>' +  item.id + '</li>').appendTo("#list");

    });

}); 
```

萤火虫截图： ![Firebug 净结果](../Images/5618f024c7c7e59126623ad3f1c196f1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:29:27.910

```
({ "title": "Art and Culture",
"items": [
{"id":"kunst-im-tunnel","lat":"51.219917"},
{"id":"kunsthalle","lat":"51.227568"},
{"id":"kunstsammlung-nordrhein-westfalen","lat":"51.22841"}]
}) 
```

**不是有效的 JSON。**

但是这个是 Valid JSON

```
 { "title": "Art and Culture",
   "items": [
              {"id":"kunst-im-tunnel","lat":"51.219917"},
              {"id":"kunsthalle","lat":"51.227568"},
              {"id":"kunstsammlung-nordrhein-westfalen","lat":"51.22841"}]
 } 
```

它会很好地工作。这是工作示例[http://jsfiddle.net/cqfQp/1/](http://jsfiddle.net/cqfQp/1/)

使用[jsonlint](http://www.jsonlint.com)验证 JSON。

另一个建议是，尽量避免`append`在循环中调用函数。创建一个变量并只调用一次函数。像这样的东西

```
 var strItems="";
     $.each(data.items, function(i,item){
         strItems+='<li>' +  item.id + '</li>';
     });
     $("#list").html(strItems); 
```

**编辑：确保在文档**[就绪](http://api.jquery.com/ready/)函数 上调用 getJSON

```
 $(function(){
      $.getJSON("http://example.com/app.php?cat=category&jsoncallback=?",function(data){
        var strItems="";
        $.each(data.items, function(i,item){
            strItems+='<li>' +  item.id + '</li>';
        });
        $("#list").html(strItems);    
     });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:26:20.657

您正在生成无效的 JSON — 包含整个 JSON 表达式的括号不应该在那里。

# sql - 报表生成器 - 条件分组

> ID：10914149
> 
> 赞同：2
> 
> 时间：2012-06-06T12:22:42.307
> 
> 标签：sql, sql-server, reporting-services

我有一个 Sql 查询：

```
SELECT
  [Order].Quantity
 ,[Order].Refund
 ,[Order].Price
 ,[Order].Archive AS [Order Archive]
 ,[Order].Handled
 ,[Order].[Date] AS [Order Date]
 ,[Order].OrderNum
 ,[Order].SecondaryID
 ,SUM((Quantity - (ISNULL(Refund, 0))) * Price) As Total
 ,Product.CatalogNum
 ,Product.ProductName
 ,Customer.CustomerName
 FROM
 [Order]
 INNER JOIN Customer
 ON Customer.CustomerID = [Order].CustomerID
 INNER JOIN Product
 ON Product.ProductID = [Order].ProductID
 WHERE [Order].OrderNum In (@order) 
 Group By [Order].Quantity,
 [Order].Refund
,[Order].Price
,[Order].Archive
,[Order].Handled
,[Order].[Date]
,[Order].OrderNum,Product.CatalogNum
,Product.ProductName
,Product.ProductPrice
,Customer.CustomerName,Customer.CustomerID
,[Order].SecondaryID Order by Customer.CustomerID,[Order].Quantity 
```

我使用它在 Report Builder 3.0 中构建报告。对于 SQL，我得到了我想要的结果。但是当使用报告工具时，当同一产品的价格不同时（特价销售等）我就有问题了。我没有得到产品的总数量。如果同一产品的所有行都具有相同的价格，我会做一个 SUM - 一切都很好。如果价格不同，我需要为同一产品的每个价格组获取一个 SUM。

知道如何进行吗？

我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:43:14.867

在您的 GROUP BY 子句中，删除该行

```
,Product.ProductPrice 
```

这导致它在不同的价格上进行不同的分组。无论价格如何，删除它都会使其按产品名称分组。

# macos - 获取 NSWindow 的接收器类无效

> ID：10914151
> 
> 赞同：0
> 
> 时间：2012-06-06T12:22:44.810
> 
> 标签：macos, cocoa, nswindow

我知道这必须是非常简单的事情，但我一生都无法弄清楚。我无法让 XCode 将 NSWindow 识别为 Objective-c 类。我有以下简单的代码：

HelloWorldAppDelegate.h

```
#import  <Cocoa/Cocoa.h>
#import "EAGLView_mac.h"

@interface HelloWorldAppDelegate : NSObject <NSApplicationDelegate> {
    NSWindow    *window;
    EAGLView    *glView;
}

@property (assign) IBOutlet NSWindow    *window;
@property (assign) IBOutlet EAGLView    *glView;

@end 
```

HelloWorldAppDelegate.m

```
#import "HelloWorldAppDelegate.h"
#import "EAGLView_mac.h"

@implementation HelloWorldAppDelegate
@synthesize window, glView;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    NSRect frame = NSMakeRect(0, 0, 480, 320);

    window = [[NSWindow alloc] initWithContentRect: frame styleMask:NSBorderlessWindowMask backing:NSBackingStoreBuffered defer:YES];

    //EAGL init code cut for brevity      

    [window setContent:glView];
    [window makeKeyAndOrderFront:self];
}

@end 
```

当我尝试编译 XCode 时抱怨 NSWindow 是接收器类型“void”而不是 Objective-c 类。当我输入代码时，也没有弹出任何自动完成功能。我在调用 NSWindow alloc 时收到一个实际错误，并且在其他两个调用“window”时收到警告，都抱怨 window 和/或 NSWindow 是接收器类型 void。它还抱怨找不到“setContent”和“makeKeyAndOrderFront”方法？我在某处缺少包含吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:08:30.693

尝试将 NSWindow 和 EAGLView 插座的属性属性更改为

*   `(nonatomic, retain)`, 如果你**不使用 ARC**
*   `(weak)`, 如果你**使用 ARC**

[Objective-C 编程语言：声明的属性](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)解释了这一点并指出：

> assign
> 指定 setter 使用简单赋值。此属性是默认值。您可以将此属性用于**标量**类型，例如 NSInteger 和 CGRect。

希望这可以帮助。

# android - 在 Eclipse 中将 ADT 16.0.1 更新为 ADT 18.0 后，转换为 Dalvik 失败并出现错误 1

> ID：10914152
> 
> 赞同：0
> 
> 时间：2012-06-06T12:22:44.660
> 
> 标签：android, eclipse, adt

这真的很神秘。到目前为止，当 ADT 为 16.0.1 时，工作区中的所有 android 项目都可以正常工作。我决定将其更新到 ADT 18.0 并重新启动 Eclipse 以使更改生效。但令我惊讶的是，当我尝试运行该项目时，它给了我

**转换为 Dalvik 格式失败，出现错误 1** **​​Unknown Android Packaging Problem**

它还在我的项目中自动创建了“Android Dependencies”。谁能告诉我最快的解决方案？它该死的紧急.. :( 我还卸载了 ADT 18 并尝试安装 ADT 16，但它不起作用。请建议我的方式，以便我可以在我的工作区中恢复正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:33:35.773

更新到 ADT 18 后我也遇到了问题，我必须重新安装我的 android eclipse 插件。也许这也可以帮助你

# prolog - 可在线搜索的 Prolog 语言描述

> ID：10914155
> 
> 赞同：9
> 
> 时间：2012-06-06T12:22:58.763
> 
> 标签：prolog, standards, iso-prolog

是否有在线可用的 Prolog 语言（语法和语义）的描述？

有很多实现参考手册。但这些都不是语言描述。例如 SWI Prolog 手册[状态](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%271.1%27,swi%28%27/doc/Manual/swiprolog.html%27%29%29)

> 本手册没有描述 Prolog 的完整语法和语义。

又[指](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%271.1%27,swi%28%27/doc/Manual/swiprolog.html%27%29%29)一套印在纸上的书籍，出版于十九世纪八十年代。而对于 ISO 标准，这是为了钱和“应该从我国的 ISO 代表处获得”的胡言乱语。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T12:37:06.950

ISO 标准可[从 ANSI 网上商店以非常低的价格（目前为](http://webstore.ansi.org/FindStandards.aspx?SearchString=INCITS/ISO/IEC%2013211-1-1995%20%28R2007%29&SearchOption=0&PageNum=0&SearchTermsArray=null%7CINCITS/ISO/IEC%2013211-1-1995%20%28R2007%29%7Cnull)~~30~~ 60 美元）作为 INCITS 文档获得。在那里，您还可以免费获得两个勘误表。查看所有当前文档的[iso-prolog 标签信息](https://stackoverflow.com/tags/iso-prolog/info)。[这是对所有内置谓词](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/prologue#status_quo)的全面概述，包括 Cor.1 和 Cor.2。

如果您想要打印输出版本，最好还是自己打印在 INCITS 文档上方，同时注意缺少第 10 页（故意留白的页面）——否则左侧会出现奇数页。该文档是 A4 扫描文件，每页两列。非正式的附件 A 在单独的绑定中会更好。相反，添加两个更正！

或者，[SAI](http://infostore.saiglobal.com/EMEA/results2.aspx?searchType=simple&publisher=All&keyword=prolog)出售硬拷贝。

# dojo - Dojox DataGrid：仅通过复选框实现行选择

> ID：10914157
> 
> 赞同：0
> 
> 时间：2012-06-06T12:23:08.623
> 
> 标签：dojo, dojox.grid.datagrid

如教程中所示，我使用 CheckboxSelector 创建了一个 DOJO 1.6 DataGrid。现在，如果单击行，我想禁用行的 onSelectionChanged 事件。仅当单击复选框时才应触发此事件。

怎样才能做到这一点？有没有我错过的构造函数属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:26:12.963

您需要覆盖该`onRowClick`方法以不执行选择逻辑。

```
var grid = new dojox.grid.DataGrid({
    store: store,
    structure: layout,
    onRowClick: function(e){
       this.edit.rowClick(e);
       //this.selection.clickSelectEvent(e);
    }
  },
  node
); 
```

[http://jsfiddle.net/cswing/byfaf/](http://jsfiddle.net/cswing/byfaf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-23T10:55:28.023

" **SelectionChanged** "` 甚至可用。所以像这样的代码： -

```
grid.on("SelectionChanged", function(event)
    { 
        var rowId = event.rowIndex;
        grid.selection.setSelected(rowId, true);
        grid.render();
     } 
```

例如请看[这个](https://dojotoolkit.org/documentation/tutorials/1.10/working_grid/demo/selector.html)

# java - t:datatable 在行上应用 css

> ID：10914158
> 
> 赞同：1
> 
> 时间：2012-06-06T12:23:15.543
> 
> 标签：java, jsf, tomahawk

我`t:datatable`在我的 JSF 应用程序中使用。

**我可以根据条件更改特定行**的CSS吗？条件意味着使用数据表变量渲染。是否可以？我正在使用 jsf 1.2（尽管除了我之外的所有人都升级到了 jsf 2.0 :/）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:31:36.107

尝试使用`rowStyleClass`或`rowStyle`

> rowStyleClass="css 样式类"
> 
> rowStyle="内联css样式"

像这样

```
<t:datatable id="myID" var="data" value="#{myBean.data}" rowStyleClass="#{data.someproperty eq 'someStringValue' ? 'someClass' : 'otherClass'}"> 
```

# sharepoint - Sharepoint 2010。使用 FBA 创建用户

> ID：10914159
> 
> 赞同：0
> 
> 时间：2012-06-06T12:23:24.713
> 
> 标签：sharepoint, sharepoint-2010, fba

我正在尝试使用 FBA（基于表单的身份验证）在 SharePoint 2010 中创建用户。我按照本文中的步骤配置 FBA：[http ://donalconlon.wordpress.com/2010/02/23/configuring-forms-base-authentication-for-sharepoint-2010-using-iis7/](http://donalconlon.wordpress.com/2010/02/23/configuring-forms-base-authentication-for-sharepoint-2010-using-iis7/)

然后我上传了 FBA 包[http://sharepoint2010fba.codeplex.com/](http://sharepoint2010fba.codeplex.com/)。Web 部件正常加载，但未创建用户。如果您尝试创建用户，则会出现未知错误。

之后，我尝试自己创建授权表。下面的代码处理注册事件：

```
 MembershipCreateStatus mcs = new MembershipCreateStatus();
    SPSecurity.RunWithElevatedPrivileges(delegate()
    {
       using (SPSite site = new SPSite("http://makovkasp:30763/"))
       using (SPWeb spWeb = site.OpenWeb())
       { 
          try
          {

             MembershipUser membershipUser =
Membership.Providers["FBAMembershipProvider"].CreateUser(txtLogin.Text,
                                   txtPassword.Text,
                                   txtEmail.Text,
                                   txtSecretQuestion.Text,
                                   txtAnswer.Text, true, null, out mcs);

             spWeb.AllowUnsafeUpdates = true;
             SPUser spUser = spWeb.EnsureUser(txtLogin.Text);
             SPGroup spGroup = spWeb.Groups[2];
             spGroup.AddUser(spUser);
             spGroup.Update();

          }
          catch (Exception ex)
          {
             System.Console.WriteLine(ex.ToString());
          }
       }
    }); 
```

执行此代码后，用户在 SharePoint 中创建（我可以在 FBA UserManagement 中看到它）。但它不是在 FBA 数据库中创建的。所以，我无法使用它的帐户登录。有谁知道该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:02:45.383

`mcs`您应该在代码执行后询问参数值。它可能指示未创建用户帐户的原因。[MembershipCreateStatus](http://msdn.microsoft.com/en-us/library/system.web.security.membershipcreatestatus.aspx)枚举应显示成员资格提供程序未成功保存用户的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:15:49.673

注册用户时的未知错误通常意味着发送电子邮件时出错。您可以查看 SharePoint ULS 日志以了解更多详细信息。我会检查您的 SharePoint 外发邮件设置。

如果您可以在 FBA UserManagement 中看到该用户 - 则该用户已在会员数据库中创建。您是否检查过 aspnetdb 数据库以查看用户是否存在？

您可以使用其他 FBA 用户的帐户登录吗？如果不是，则您的 FBA 设置可能存在问题。确保成员资格条目位于您的 STS 和 Central Admin Web 配置中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-09T08:21:38.783

这可能应该是一个评论，但我还没有代表这样做。这适用于发现此问题的任何人，因为他们对所有其他仅说要使用的答案感到困惑

```
Membership.CreateUser() 
```

在启用 FBA 的 SharePoint 网站中创建用户。

当您的 Web 应用程序启用了多个身份验证提供程序时，您需要使用以下方式指定提供程序：

```
Membership.Providers[MembershipProvider].CreateUser() 
```

要获取`MembershipProvider`，您可以将其指定为像 OP 那样的硬编码字符串，或者您可以使用以下方法动态获取它：

```
SPSite.WebApplication.IisSettings[SPUrlZone].FormsClaimsAuthenticationProvider.MembershipProvider() 
```

# delphi - Delphi 中的“Clipbrd”已损坏

> ID：10914161
> 
> 赞同：0
> 
> 时间：2012-06-06T12:23:46.190
> 
> 标签：delphi, clipboard, delphi-2009

使用本机`Clipbrd`时，有人知道会发生文本损坏吗？

访问位图后

```
 bitmap.Assign(Clipboard); 
```

剪贴板中的文本似乎已损坏。使用英语它可以正常工作，但是它会变成奇怪的字符，例如 `ã`

这是一个“开放的错误”吗？

有没有办法处理这个问题并将剪贴板恢复到正常操作而无需重新启动计算机？

### 编码

```
Clipboard.Open;
bitmap.Assign(Clipboard);
Clipboard.Close; 
```

结果相同。

我的猜测是它会通过编码到达某个地方。

他们对剪贴板的破坏是为了软件之外的用户体验。剪贴板无法用于非英语语言。

任何图片提取后，即使关闭Delphi或软件，剪贴板也无法传输非英文。

我正在测试：

> 大日本帝国</p>

复制粘贴结果：

```
?????

unit Unit4;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, Clipbrd, StdCtrls;

type
  TForm4 = class(TForm)
    img1: TImage;
    btn1: TButton;
    procedure btn1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form4: TForm4;

implementation

{$R *.dfm}

procedure TForm4.btn1Click(Sender: TObject);
var
bitmap : TBitmap;
begin
  bitmap := TBitmap.Create;
  bitmap.Assign(Clipboard);
  img1.picture.Assign(bitmap);
  FreeAndNil(bitmap);
end;

end. 
```

dfm：

```
object Form4: TForm4
  Left = 0
  Top = 0
  Caption = 'Form4'
  ClientHeight = 282
  ClientWidth = 418
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object img1: TImage
    Left = 168
    Top = 64
    Width = 105
    Height = 105
  end
  object btn1: TButton
    Left = 184
    Top = 232
    Width = 75
    Height = 25
    Caption = 'btn1'
    TabOrder = 0
    OnClick = btn1Click
  end
end 
```

*   编译并执行。
*   开始→*运行*
*   然后输入（不要从这里复制！）

> 雅加达

然后粘贴回来，你会得到

> éâãëìçéìãâçëé

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:55:16.067

`TClipboard`将对象传递给`TBitmap.Assign()`只会从剪贴板中读取。它不会向剪贴板写入任何内容或以任何方式更改剪贴板的内容。

所以问题不在于您显示的代码。我现在能想到的唯一可能性是，无论哪个应用程序首先将位图存储在剪贴板上，都可能在启用延迟渲染的情况下存储它，并且当`TBitmap.Assigns()`询问时存储现在渲染的位图时，它会以错误的方式更新剪贴板剪贴板。

# php - PHP - 正则表达式

> ID：10914162
> 
> 赞同：-3
> 
> 时间：2012-06-06T12:23:49.240
> 
> 标签：php, regex

如何使用 PHP 用给定的字符串替换 4 位字符串

```
$original_string = "test343443test34demo55555"
$replace_string = "TEST" 
```

**输出**

```
$output = testTESTtest34demoTEST 
```

如何使用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:32:04.453

```
$new_string = preg_replace("/(\d){5,}/","TEST",$original_string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:26:44.390

```
$output = preg_replace('/\d{5,}/', $replace_string, $original_string); 
```

不过，这确实很基本；因此，您应该先阅读 PHP 的文档，然后再提出此类问题。请记住，[Stack Overflow 不是您的个人研究助理](https://meta.stackexchange.com/questions/128548/what-stack-overflow-is-not/128553#128553)，编程需要您付出努力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:26:50.597

```
echo preg_replace("@\\d{5,}@", "TEST", "test343443test34demo55555");
//                       ^-------- note: no digits after comma 
```

# javascript - 使用接收到的 JSON 数据创建主干模型

> ID：10914166
> 
> 赞同：18
> 
> 时间：2012-06-06T12:24:03.313
> 
> 标签：javascript, json, backbone.js

我知道如何创建一个新的主干模型。但是如何使用从 Web 服务接收到的数据创建主干模型呢？

例如，您正在从 Web 服务接收 JSON 数据。我想使用这个 JSON 作为主干模型。我怎么能这样做？

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-06T12:47:37.917

```
 MyModel = Backbone.Model.extend({});

var data = { /* some data you got from the ajax call */};

var m = new MyModel(data); 
```

或者，如果您不需要特定类型的模型，则可以使用通用 Backbone.Model

```
 var data = { /* some data you got from the ajax call */};

var m = new Backbone.Model(data); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T12:26:15.227

目前尚不清楚您是在尝试创建模型定义还是模型实例。
无论哪种方式，如果您的服务返回一个 json 对象，类似的东西应该可以工作：

```
var data = {/*received data*/};

// for a new model definition
var newModelDefinition = Backbone.Model.extend(data);
// that you can instantiate later on:
var model1 = new newModelDefinition(),
    model2 = new newModelDefinition(someData);

// for a new model instance
var newModelInstance = new Backbone.Model(data); 
```

# iphone - 将 iPhone 应用程序上传到 appStore 时出错

> ID：10914168
> 
> 赞同：2
> 
> 时间：2012-06-06T12:24:04.723
> 
> 标签：iphone, app-store, application-loader

> **可能重复：**
> [Icon.png 问题（在顶级应用程序包装下找不到 Info.plist 中指定的图标：Icon.png (-19007)）](https://stackoverflow.com/questions/4627697/problem-with-icon-png-icon-specified-in-the-info-plist-not-found-under-the-top)

我已经构建了一个 iPhone 应用程序，并在真实设备上对其进行了测试，一切都很好。但是，当我使用 Application Loader 将其上传到 appStore 时，我总是收到以下错误。

**在顶级应用程序包装下找不到 Info.plist 中指定的图标：Icon.png iPhone/iPod touch：Info.plist 无法验证图标尺寸，未找到图标。您必须定义 CFBundleIconFile、CFBundleIconFiles，或者提供一个默认的 Icon.png，即 57*57。**

我不知道为什么会出现这个错误，但我已将图标放在资源文件夹中

非常感谢任何帮助。

# javascript - 无论浏览器缩放比例如何，如何保持元素对齐？

> ID：10914174
> 
> 赞同：3
> 
> 时间：2012-06-06T12:24:23.123
> 
> 标签：javascript, css

我有一个“绘制”网格的页面，如下所示：

![在此处输入图像描述](../Images/d03747d3549dd0173f596552711d2d24.png)

它通过使用绝对定位的 div 来做到这一点。每个网格的宽度为 237x237 像素，因此第一个网格将放置在**top:0；左：0；**，第二个网格将放置在**顶部：0；左：237px；**，第三个网格将放置在**顶部：0；左：474px；**等等。

但是，当用户放大或缩小（使用浏览器键`Ctrl``+`/ `Ctrl``-`）时，框没有正确对齐。当页面的背景颜色渗透时，这一点很明显：

![在此处输入图像描述](../Images/092d9022fb0d6cd51a008003e862fcb0.png)

无论浏览器的缩放比例如何，保持框“并排”的最佳方式是什么？

* * *

PS 这些盒子必须绝对定位，因为它们需要动态移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:00:20.580

不同的浏览器以不同的方式对“像素的百分比”进行舍入 - 请参阅[CSS 子元素的均匀分布高度](https://stackoverflow.com/questions/5115637/evenly-distributed-height-of-child-elements-with-css)

正如评论中所建议的那样，使用背景图像会有很大帮助 - 它应该由 4 个“正方形”或网格组成，如您所说，并水平和垂直重复。

这样，您仍然可以保留 div`position: absolute`并将其背景保留为透明 - 但是，如果在制作动画时需要显示平铺背景，则可能必须在动画开始时将其设置为背景颜色，然后设置一旦动画结束，它就会恢复透明 - 但为了使它起作用，我假设你正在移动一个灰色方块代替另一个灰色方块，白色方块也是如此。

根据您的评论进行编辑：

这将是非常棘手的实现，不同的浏览器提供不同级别的缩放，并且很难确定在所有情况下都能很好地缩小（没有任何“半像素”）的 div 的大小。但是，只要不影响功能，放大/缩小时的外观和感觉上的一点差异通常是可以接受的，我希望是这样！

作为最后一个想法，您可以尝试使用 % 定位而不是像素 - 这可能会在缩放时更好地适应，但我不能保证，因为我没有测试过 - 但它可能值得一试！祝你好运！

# php - 使用 Selenium 上传文件

> ID：10914178
> 
> 赞同：0
> 
> 时间：2012-06-06T12:24:34.597
> 
> 标签：php, testing, automation, automated-tests, selenium-rc

如何在自动化测试中使用 Selenium 工具上传文件？我尝试使用以下代码：

```
selenium.attachFile(//*[@id='file-uploader']/div/div[1]",
    "C:\\Users\\Public\\Pictures\\Sample Pictures\Desert.jpg"); 
```

这是我得到的错误：

```
Malformed URL C:\\Users\\Public\\Pictures\\Sample Pictures\\Desert.png. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:03:03.857

它必须采用以下格式：

```
file://C:\Users\Public\Pictures\Sample%20Pictures\Desert.jpg 
```

我们正在处理 Windows 世界，所以斜线是倒着的。

试试这个：

```
selenium.attachFile(//*[@id='file-uploader']/div/div[1]",
"file://C:\\Users\\Public\\Pictures\\Sample Pictures\\Desert.jpg"); 
```

# php - 将整个应用程序封装在数据库事务中

> ID：10914179
> 
> 赞同：0
> 
> 时间：2012-06-06T12:24:46.390
> 
> 标签：php, mysql

在数据库事务中运行整个 php 应用程序的理论和实际缺点是什么，以确保脚本中导致的任何意外错误或异常都会恢复数据库中所做的每一个更改，从而避免由于未完成脚本而导致的状态有些表已更新，有些则没有？这显然不是也不会被推荐为好的做法，但我想详细了解原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:55:04.383

数据库事务确保多个操作遵守 ACID 属性：

*   **原子**的-这是您在问题中提到的属性，即事务中的每个操作都成功或全部失败；

*   **一致**——这个属性确保数据库状态在任何时候都是有效的；

*   **隔离**- 此属性确保并发事务（即来自不同连接）的发生就像它们是串行执行的一样；和

*   **持久**- 一旦提交，更改是永久性的。

为了确保**Isolation**的第三个属性，像 MySQL 这样的 RDBMS 系统执行*锁定*以确保，例如，一个事务不写入记录而另一个正在读取记录（当记录被锁定时，其他事务必须等待在他们能够继续之前释放锁）。

如果您的事务不必要地过长，它们将导致过度锁定和过度等待。它甚至可能导致不必要的死锁，即事务正在等待彼此持有的锁，并且在至少一个回滚之前无法继续。

出于性能（和持久性）的原因，因此您应该努力将事务保持在保持一致性绝对必要的程度。

# c# - .net 在文本框中大写名称

> ID：10914181
> 
> 赞同：1
> 
> 时间：2012-06-06T12:25:01.510
> 
> 标签：c#, asp.net, textbox

将名称输入文本框时，有没有办法将名称的第一个字母大写？

例如，当键入 john doe 时，文本框应显示 John Doe。

我知道它可以在 c# 代码中完成，但只是想知道是否有更简单的方法通过属性或正则表达式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T12:27:13.607

如果您愿意，自己应该不难做，除了有一个 ToTitleCase() 可能会满足您的目的。

[http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T12:42:40.550

您可以使用 CSS 在标记中执行此操作 - 如果您将 CSS 属性添加`text-transform`到您的文本框，其值为`capitalize`，它将使每个单词的第一个字符大写，例如

```
<asp:textbox runat="server" id="NameTextBox" style="text-transform:capitalize;" /> 
```

无需代码:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T12:28:27.340

使用`ToTitleCase()`available in将其大写`System.Globalization Namespace`。

# ssrs-2008 - 定义日期参数

> ID：10914185
> 
> 赞同：2
> 
> 时间：2012-06-06T12:25:11.483
> 
> 标签：ssrs-2008, dynamics-crm-2011, fetchxml

我对创建自定义报告非常陌生。我需要在 crm 中向用户提示开始日期和结束日期，以便结果是仅在这两个日期之间创建的数据。

我有三个参数来预过滤我的数据（帐户、事件、合同），并在 Visual Studio 中添加了两个日期参数。

但现在我几乎被困住了......

任何帮助都会很棒！

编辑 1：这是我基于 FETCH Xml 的查询的片段：

```
<?xml version="1.0"?><fetch distinct="false" mapping="logical" output-format="xml-platform" version="1.0">
       <entity name="incident" enableprefiltering="1">
       <attribute name="overriddencreatedon"/>
      <attribute name="new_dateclotureincident"/>
      <attribute name="title"/><attribute name="createdon"/>
      <attribute name="new_travaileffectue"/>
      <attribute name="ticketnumber" />
      <attribute name="new_dureecumuleeactivites"/>
      <order descending="true" attribute="createdon"/>
      <filter type="and"> 
      <condition attribute="createdon" value="@Date-Debut" operator="on-or-after"/> 
      <condition attribute="createdon" value="@Date_Fin" operator="on-or-before"/> 
      </filter>
      <link-entity name="new_contrats" alias="aa" to="new_contrat" from="new_contratsid" enableprefiltering="1">
    <attribute name="new_referencecontrat"/>
    </link-entity>
    <link-entity name="new_lignecontrat" alias="ab" to="new_lignecontrat" from="new_lignecontratid">
    <attribute name="new_unitesrestantes"/><attribute name="new_unitesrestantes"/>
    </link-entity>
    <link-entity name="account" alias="ac" to="customerid" from="accountid" enableprefiltering="1"><attribute name="name"/>
    </link-entity></entity></fetch> 
```

在执行报告时提示日期没有问题，但是在我选择它们后数据没有正确排序。我刚刚创建了两个简单的日期参数，所以我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:48:15.263

问题解决了 ！

日期格式的简单问题。

将日期格式表达式与我的参数相关联后，它可以完美运行！

```
=Format(Parameters!YourDateParameterName.value,"yyyy-MM-dd") 
```

# jquery - JQuery：鼠标悬停打开一个灯箱，但鼠标悬停无法正确关闭它

> ID：10914186
> 
> 赞同：1
> 
> 时间：2012-06-06T12:25:15.777
> 
> 标签：jquery, colorbox

我在我的一个网站上使用 colorbox 作为灯箱。当我的鼠标悬停在图片上时，我可以让它打开一个灯箱，但是当我的鼠标离开同一张图片时，我不能让它关闭灯箱。

如果我移动鼠标，一旦打开灯箱，mouseleave 事件就会触发事件是我的鼠标仍在图片上。

这是一个 JSfiddle 向您展示我的问题：http: [//jsfiddle.net/8ByeT/1/](http://jsfiddle.net/8ByeT/1/)

您对如何解决这个问题有任何想法吗？

谢谢和问候， 埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:51:45.797

这是一个工作小提琴：http: [//jsfiddle.net/8ByeT/15/](http://jsfiddle.net/8ByeT/15/)

更新：

css：覆盖 div 显示设置为无，因此不会触发鼠标离开事件

JS：为颜色框添加了初始宽度和高度，因此出现的图像不会覆盖您的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:44:12.707

好吧，您的小提琴中加载了两个 jQuery 副本。

您有两个就绪事件处理程序：

`$(function() {`

和

`$(document).ready(function() {`

但真正的问题似乎是您有一个 mouseleave 事件处理程序，当它上面出现某些东西时会触发它，然后触发另一个事件，使其再次出现并以某种方式循环。

很难说，但你可能有一些包含在你的小提琴中的 JavaScript。我将把深入研究留给你。

我必须假设 unmatched tag:`</section>`是小提琴中的某种粘贴问题。

# css - 无法居中图像（css）

> ID：10914190
> 
> 赞同：0
> 
> 时间：2012-06-06T12:25:35.143
> 
> 标签：css, image, center

```
.photospace .slideshow-container {
    position: relative;
    clear: both;
    height: 450px; 
```

我有一个具有各种图像尺寸但不大于 530 x 549 的幻灯片。对于较小的图像，我如何输入它们？我想做什么的图片。我可以添加边距/填充，但它会强制屏幕下方已经是 530x549 的图像。

我的网站

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:38:02.290

给出与 DIV相同的**行高。**`height`像这样写：

```
 .photospace .slideshow a.advance-link {
        line-height: 549px;
        width: 530px;
    }
.photospace .slideshow img{
 vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:37:35.107

您可以使用`display:table-cell`然后`vertical-align:middle`.

我可以看到您目前正在`.gal_content` `display:block`使用 jQuery，因此您需要将其更改为`table-cell`

```
.photospace .gal_content{
    display:table-cell;
    vertical-align:middle;
    float: right;
    width: 530px;
    height: 549px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:30:04.260

如果您的意思是您希望将其垂直对齐到中心，那么仅使用 DIVS 和 CSS是不可能的*（至少在所有浏览器中） 。*您将需要使用 Javascript 来正确定位它。

或者，如果您不熟悉旧浏览器，请查看名为[Flexbox](http://www.html5rocks.com/en/tutorials/flexbox/quick/)的新 Webkit CSS3 属性。

这是一个将图像放入 800x800px 盒子并使用 Flexbox 自动对齐的示例：http: [//jsfiddle.net/7rFEn/embedded/result/](http://jsfiddle.net/7rFEn/embedded/result/)

# forms - 验证 symfony2 中的数字字段

> ID：10914193
> 
> 赞同：4
> 
> 时间：2012-06-06T12:25:49.247
> 
> 标签：forms, validation, symfony

我有以下情况：在我的 FormType 类中：

```
... 
$builder->add('fieldToValidate', 'number', array('required' => false))
... 
```

在模型类中：

```
...
use Symfony\Component\Validator\Constraints as Assert;
...
/**
 * @var float $fieldToValidate
 *
 * @ORM\Column(name="fieldToValidate", type="float", nullable=true)
 * @Assert\Type(type="float", message="Must be a number.")
 */
private $fieldToValidate; 
```

在控制器的动作中：

```
$entity = $this->getService('my_service')->findMyEntity($entityId);
$editForm = $this->createForm(new MyEntityType(), $entity, $myOptions);
$request = $this->getRequest();
$editForm->bindRequest($request);
if ($editForm->isValid()){ 
```

当我在 fieldToValidate（例如“foo”）中提交带有一些无效数据的表单时，出现异常： `Expected argument of type "numeric", "boolean" given` 在控制器中调试我的代码我注意到它在行中引发了 异常我`$editForm->bindRequest($request);` 如何才能使用`$editForm->isValid()`来控制异常。不是为了这个我在模型和形式上验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T18:02:14.360

```
/**
 * @Assert\Regex(pattern="/\d+/")
 */ 
```

# c++ - 无法在 C++ 中使用 MSXML 从子节点获取值

> ID：10914195
> 
> 赞同：2
> 
> 时间：2012-06-06T12:25:57.787
> 
> 标签：c++, msxml

我想从 xml 文件中读取。我有这个代码：

```
IXMLDOMDocument *pXMLDom=NULL;
IXMLDOMNodeList *pXMLDomNodeList=NULL;
VARIANT varFileName;
VARIANT_BOOL varStatus;
BSTR bstrNodeValueParent = NULL;
BSTR bstrNodeValueChild = NULL;

CreateAndInitDOM(&pXMLDom);
VariantFromString(L"file.xml", varFileName);
pXMLDom->load(varFileName, &varStatus)
if (varStatus == VARIANT_TRUE){

        long lengthNodeList;
        BSTR bstrQueryTemp=SysAllocString(L"//parent_tag");
        pXMLDom->selectNodes(bstrQueryTemp,&pXMLDomNodeList);
        pXMLDomNodeList->get_length(&lengthNodeList);
        for(int j=0; j < lengthNodeList; j++){
            IXMLDOMNode *pNodeParent = NULL;
            IXMLDOMNode *pNodeChild = NULL;
            BSTR bstrNodeValueChild;

            pXMLDomNodeList->get_item(j, &pNodeParent);     
            pNodeParent->get_xml(&bstrNodeValueParent);
            printf("\n Parent Node: %S",bstrNodeValueParent);

            pNodeParent->selectSingleNode(L"//child1_tag",&pNodeChild);
            pNodeChild->get_xml(&bstrNodeValueChild);
            printf("\n Child Node: %S",bstrNodeValueChild);

            SysFreeString(bstrNodeValueParent);
            SysFreeString(bstrNodeValueChild);
            SAFE_RELEASE(pNodeParent);
            SAFE_RELEASE(pNodeChild);
        }
} 
```

第一个 printf 在每个迭代情况下返回正确的值，但第二个没有，实际上它返回第一个子元素的值，情况 j==0。为什么？

文件.xml 示例：

```
<?xml version="1.0"?>
<!--xml file created using XML DOM object.-->
<root created="using dom">
    <parent_tag>
        <child1_tag>Child1-1</child1_tag>
        <child2>Child1-2</child2>
    </parent_tag>
    <parent_tag>
        <child1_tag>Child2-1</child1_tag>
        <child2>Child2-2</child2>
    </parent_tag>
    <parent_tag>
        <child1_tag>Child3-1</child1_tag>
        <child2>Child3-2</child2>
    </parent_tag>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:36:11.373

从[XPath 规范](http://www.w3.org/TR/xpath/)（强调我的）：

> `//para`选择*文档根的*`para`所有后代，因此选择同一文档中的*所有元素作为上下文节点。* **`para`**

 **您在循环中传递`"//child1_tag"`到`selectSingleNode()`，但此表达式将始终匹配`child1_tag`文档中的第一个元素，而不是当前父元素。

请尝试：

```
pNodeParent->selectSingleNode(L"child1_tag", &pNodeChild); 
```**

# javascript - 读取 .JS HTML 中的变量包括

> ID：10914199
> 
> 赞同：0
> 
> 时间：2012-06-06T12:26:13.500
> 
> 标签：javascript, html

> **可能重复：**
> [获取执行 JavaScript 文件的 URL（主要是 IE6-7 问题）](https://stackoverflow.com/questions/3019112/getting-url-of-executing-javascript-file-ie6-7-problem-mostly)

嗨，我的页面有这一行：

```
<script type="text/javascript" src="pixel.js?name=Test&age=21"></script> 
```

我需要 pixel.js 来访问变量名称和年龄，这怎么可能？我尝试使用地址栏变量（获取 POST 数据）方法，但结果未定义，因为我想这在技术上不在地址栏中...

谢谢克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:31:32.950

我认为只要 pixel.js 是静态文件，您就不能这样做。如果你想做这样的事情，你必须使用一些服务器处理程序来提供 javascript 文件并读取查询字符串参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:32:29.103

您是否需要将变量从您的 HTML 页面传递给 JavaScript，或者您在做什么？

如果您真的需要这样做，请查看本教程： [http ://feather.elektrum.org/book/src.html](http://feather.elektrum.org/book/src.html)

我居然找到了类似的讨论，刷了user378221的回答： [Passing parameters to JavaScript files](https://stackoverflow.com/questions/2190801/passing-parameters-to-javascript-files)

我建议在单独的脚本标签中声明您的变量，然后包含该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:54:53.460

免责声明：未经测试

只需在脚本元素上放置一个 ID，然后从包含的脚本中获取它（它们存在于同一个 DOM 上，所以它应该可以工作）

HTML：

```
<script id="blah" type="text/javascript" src="foo.js?key=value" /> 
```

foo.js：

```
console.log(document.getElementById('blah').src);​ 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T12:39:37.920

你只能通过使用你的文件名找到脚本标签然后解析`src`属性来做到这一点......像这样：

```
var scripts = document.getElementsByTagName('script'),
    scriptTest = /^pixel\.js/,
    pixelScript, params,
    getScriptParams = function(scriptSrc){
        var qSplit = scriptSrc.split('?'),
            aSplit = qSplit[1].split('&'),
            retVals = {}, pSplit;

        for (var i = 0, il = aSplit.length; i < il; i++) {
            pSplit = aSplit[i].split('=');
            retVals[pSplit[0]] = pSplit.length > 1 ? pSplit[1] : null;
        }

        return retVals;
    };

for (var i = 0, il = scripts.length; i < il; i++) {
    if (scriptTest.test(scripts[i].src)) {
        pixelScript = scripts[i];
    }
}

params = getScriptParams(pixelScript.src); 
```

# php - 如何更改 fb 评论帖子中的缩略图？

> ID：10914203
> 
> 赞同：1
> 
> 时间：2012-06-06T12:26:25.707
> 
> 标签：php, facebook, image, facebook-graph-api

当我通过我创建的网页发表评论时，Facebook 会尝试从该特定页面检索一些图像，并根据需要选择帖子的缩略图。如何选择此缩略图的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:34:08.400

您应该[使用 facebook 开放图元标记](https://developers.facebook.com/docs/opengraph/keyconcepts/)。

```
<meta property="og:image" content="http://davidwalsh.name/wp-content/themes/klass/img/facebooklogo.png"/> 
```

不要忘记你需要让你的 html 标签看起来像这样：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://developers.facebook.com/schema/"> 
```

这里还有（在[davidwalsh.name 上](http://davidwalsh.name/facebook-meta-tags)）一篇关于这个主题的好文章

正如[这个答案](https://stackoverflow.com/a/7183138/461989)中所写：数据可以由facebbok缓存，你可以在这里通过特殊的facebook调试工具检查它：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:31:57.397

向页面添加 og:image 元标记。有关更多信息，请参阅[https://developers.facebook.com/docs/opengraph/reference/](https://developers.facebook.com/docs/opengraph/reference/)

# wcf - 查询 wcf ria 服务调用

> ID：10914204
> 
> 赞同：0
> 
> 时间：2012-06-06T12:26:25.697
> 
> 标签：wcf, silverlight-4.0, wcf-ria-services, wcf-client

我有一个域服务类，其中包含一个简单的 POCO 对象和一个包含 2 个变量 a 和 b 的类以及对其求和的方法。

```
public class DomainService1 : DomainService
    {
        abc obj = new abc(10, 20);
        public int sum1()
        {
            return (obj.a + obj.b); 

        }

    }
    public class abc {
        public int a { get; set; }
        public int b { get; set; }

        public abc(int c, int d)
        {
            a = c;
            d = b;

        }

        }
} 
```

我想了解一下，如何在 silverlight 的 mainPage 上调用这个 wcf ria 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:08:17.760

您可以通过以下方式在 silverlight 端调用您的服务：

```
DomainService1 domainService = new DomainService1();
domainService.sum1((op) => 
{
    //op.Value has the result
}, null); 
```

或者

```
DomainService1 domainService = new DomainService1();
domainService.sum1(Sum1Completed, null);

(...)

void Sum1Completed(InvokeOperation<int> op)
{
    //op.Value has the result
} 
```

# git - 是否有一个 Git 服务器端挂钩来为存储库大小设置配额？

> ID：10914208
> 
> 赞同：8
> 
> 时间：2012-06-06T12:26:36.203
> 
> 标签：git

我四处搜索，发现了一些相关主题，但它们都与限制文件大小或存在配额有关。

我用 Gitolite 构建了一个 Git 服务器，供学生分享课程项目。这一切都在服务器上的一个用户名 git 下使用通配符存储库“projects/Creator/[a-zA-Z0-9].*”运行。存储库定义了 WRITERS 和 READERS，因此用户可以修改谁可以写入和读取其存储库。

实现了 SSH 密钥文件，因此用户可以通过以下方式创建存储库：

git clone git@servername.edu:projects/bob/project1 git clone git@xervername.edu:projects/bob/someotherproj

等等。“bob”文件夹是在他们第一次执行 git clone 时创建的（这是他们的用户名）。

我的问题是，作为学生，会有滥用行为，我需要限制“bob”文件夹的大小。磁盘配额不起作用，因为所有文件夹和文件都归 git 所有，而这已经受到限制。

我可能可以重新设计它以从他们的 Linux 主文件夹为他们的项目提供服务，从而能够使用磁盘配额，但是，我宁愿不必重新设计这个服务器，因为我已经让它工作了。

本质上，我一直在寻找一个类似于这个粗略的 shell 脚本的钩子：

```
foldersize=`du -s $GITPATH/projects/$USERNAME`
if [ $foldersize > 250000 ]; then
     echo "Quota Exceeded"
     exit 1
fi 
```

我知道可以编写服务器端钩子，我想在开始雕刻之前查看轮子是否已经创建。那么，有任何限制存储库大小的钩子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:36:31.260

git`pre-receive`挂钩可用于实现配额。从`githooks(5)`手册页：

```
This hook is invoked by git-receive-pack on the remote repository,
which happens when a git push is done on a local repository. Just
before starting to update refs on the remote repository, the
pre-receive hook is invoked. Its exit status determines the success or
failure of the update. 
```

因此，您可以将配额检查逻辑放在此脚本中，并根据结果允许或拒绝传入的更新。实际执行配额管理将是您的工作；有很多方法可以做到这一点，最简单的方法是依靠文件系统对用户配额的支持。

您当然可以使用您的`du`示例，尽管随着存储库大小的增加，这将为每次更新带来大量延迟（和 i/o 负担）。将此脚本的结果缓存一段时间可能会有所帮助，尽管这里的权衡显然是如果有人在缓存过期之前推送更新，他们可能会超过他们的配额。

根据您的存储的组织方式，您可以查看 git 存储库的每个目录配额（如果您的存储来自支持此功能的东西，例如大多数企业文件服务器），或者使用每个存储库的 LVM 卷（如建议的[here](https://serverfault.com/questions/100596/linux-quota-per-directory)）。

尽管有相反的建议，但为远程存储库实施配额是相当普遍的。大多数 git 托管服务会限制您的磁盘存储，并且一旦达到限制就会拒绝更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:12:09.293

git 没有任何实现配额的功能。我不认为有任何理智的方式可以做到。当你达到配额时会发生什么？您将不再能够提交、从远程存储库获取更新或任何数量的其他维护类型活动。几乎“达到配额”===“存储库功能立即死亡”......

# javascript - 遍历列表并获取元素图像ID？

> ID：10914213
> 
> 赞同：0
> 
> 时间：2012-06-06T12:26:54.240
> 
> 标签：javascript, jquery

```
$('#newsImageGallery li').each(function() { 
    alert($(this));
}); 
```

在我的每个 li 中，我都有一个带有 id 的图像，我怎样才能提醒该图像 id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:27:33.377

```
$('#newsImageGallery li').each(function() { 
    alert($(this).find("img").attr("id"));
}); 
```

或者当然，没有找到：

```
$('#newsImageGallery li img').each(function() { 
    alert($(this).attr("id"));
}); 
```

正如 Pointy 在下面提到的，如果你使用 jQuery 1.6+，你最好使用 .prop 而不是 .attr：

```
$('#newsImageGallery li img').each(function() { 
    alert($(this).prop("id"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:28:04.510

```
alert( $(this).find('img').attr('id') ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:28:18.180

试试这个：

```
$('#newsImageGallery li').each(function() { 
    alert($(this).find('img').attr('id'));
}); 
```

# android - Android XYPlot 设置线宽、点大小和禁用图例

> ID：10914216
> 
> 赞同：1
> 
> 时间：2012-06-06T12:27:01.470
> 
> 标签：android, jfreechart, point, legend

我正在尝试更改 XYPlot 中的线宽和点的大小，有什么建议吗？

还有另一个问题 - 我如何禁用 SimpleXYSeries 的图例？设置为 null 导致错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:35:53.580

> 我正在尝试更改线的宽度`XYPlot`和点的大小。有什么建议吗？

[如此处](https://stackoverflow.com/a/52896516/230513)所示，您可以使用`setSeriesStroke()`或`setBaseStroke()`在您选择的渲染器中更改线条粗细。假设，您可以使用[此处](https://stackoverflow.com/a/6669529/230513)显示的方法`XYLineAndShapeRenderer`更改渲染。`Shape`

> 我如何禁用图例？

您可以将参数传递`false`给`legend`您选择的`ChartFactory`方法或`JFreeChart`构造函数。

# git - Git 在从同一个 master 克隆的两个存储库中同步相同的分支

> ID：10914218
> 
> 赞同：1
> 
> 时间：2012-06-06T12:27:08.180
> 
> 标签：git, git-branch, git-remote

我正在尝试在我的公司中实施 Git。我决定实现这个模型[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

main repo 中包含三个分支，即 master、develop 和 feature1。有两个开发者叫 Alice 和 Bob。两位开发人员都在研究主仓库的克隆。他们俩都在 feature1 分支中工作。Alice 定义了一个名为 bob 的 Git 遥控器，指向 Bob 的存储库，反之亦然。

我怎样才能让 Bobs 在功能分支上对 Alice 进行更改，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:52:42.837

“[一个成功的 Git 分支模型 » nvie.com](http://nvie.com/posts/a-successful-git-branching-model/) ”在您的默认 git 安装之上附带了一组称为“ [git-flow ”的工具。](https://github.com/nvie/gitflow "混帐流")

该实用程序提供[了一些有趣的命令](https://github.com/nvie/gitflow/wiki/Command-Line-Arguments)来处理功能。因此 Bob 或 Alice 或其他任何人都可以创建一个新功能并将其发布到主存储库：

```
git flow feature start <name>
git flow feature publish <name> 
```

然后 Bob 和 Alice 必须跟踪并提取新创建的特征：

```
git flow feature track <name>
git flow feature pull <remote> [<name>] 
```

然后 Bob 和 Alice 可以使用日常的 git 基础知识从（resp. to）主存储库中提取（resp.push）更改。

功能完成后，您必须告诉它 git-flow 并从主存储库中删除功能分支：

```
git flow feature finish <name>
git push origin :<name> 
```

# java - 如何将存储在数据库中的日期排除到某个范围内？

> ID：10914222
> 
> 赞同：0
> 
> 时间：2012-06-06T12:27:16.127
> 
> 标签：java, date, range

我的数据库中有一个“假期”表，其中包含假期的日期范围，用两列定义：开始和结束。

```
Holidays (id, name, start, end) 
```

现在，如果我输入两个日期（从和到），我想列出所有不在节假日的日期。

假设假期是从**2012/06/05**到**2012/06/20**，我要求：

1.  从=2012/06/01，到=2012/06/10；结果将是**01、02、03、04**
2.  从=2012/06/01，到=2012/06/22；结果将是**01、02、03、04、21、22**
3.  从=2012/06/15，到=2012/06/22；结果将是**21, 22**

但是我无法弄清楚如何在不访问数据库的情况下获取这个“开放”天的列表，而不是在从->到的范围内请求的每一天。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:59:42.600

有很多解决方案，但这在很大程度上取决于您在数据库中有多少条目以及您执行了多少请求。如果您提出很多请求，则可以执行以下操作：

```
-> create a boolean array that will determine if a day is holiday or not;
   first element points to some predefined date (e.g. 1.1.2012), 
   second element to 2.1.2012, etc.
-> initialize an array to 0
-> for each holiday you do
  -> make a for loop initialized with holiday start date and
     expression for each pass: current date = holiday start date + 1 day
    -> covert the current date to index (number of days since start date - 1.1.2012)
    -> set the array[index] to 1 
```

现在你应该有一个简单的数组，其中 0 代表非节假日，1 代表节假日

对于您现在执行的每个查询（请求）

```
-> for loop that goes from request start date to request end date
   -> convert the current date to index (number of days since 1.1.2012)
   -> check if array[index] is 0 or 1 
```

但请记住，该解决方案适用于许多查询（请求）。如果您必须为每个请求执行第一部分，那么此解决方案没有意义，最好编写一个 sql 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:42:24.127

这是我最终如何做到的，它似乎有效：

```
SELECT start, end FROM holidays WHERE
(start > :START AND end < :END) OR
(start < :START AND end > :END) OR
(start BETWEEN :START AND :END) OR
(end BETWEEN :START AND :END); 
```

这仅返回我`:START`/`:END`日期至少接触一个假期的行。它涵盖了这些可能性：

1.  start 在假期开始之前，如果在假期结束之前结束（之前，在）
2.  start 在假期开始之前，如果在假期结束之后结束（之前，之后）
3.  start 在假期开始之后，如果在假期结束之前结束（in，in）
4.  start 在假期开始之后，如果在假期结束之后结束（in，after）

我想我涵盖了所有的可能性。

然后我遍历结果并为每一行构建一个从`start`到的日期数组。`end`

最后，我循环遍历我的初始范围日期，如果其中一个日期在数组中，我将它们删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:42:26.350

这是一个解决方案，可以在单个（尽管有点复杂）SQL 语句（这是 Oracle）中为您提供解决方案：

```
with all_days as (
  select :start_date + (level - 1) dt
   from dual
  connect by :start_date + (level - 1) <= :end_date
)
select a.dt 
  from all_days a
 where not exists (
    select 1 
      from holidays h
     where h.start_dt <= a.dt and h.end_dt >= a.dt
)
order by a.dt 
```

例如，假设以下假期表：

```
NAME           START_DT                  END_DT                    
-------------- ------------------------- ------------------------- 
Test Holiday 1 07-JUN-12                 13-JUN-12                 
Test Holiday 2 17-JUN-12                 18-JUN-12 
```

并使用 5th June as`:start_date`和 20th June as `:end_date`，您将获得以下输出：

```
DT                        
------------------------- 
05-JUN-12                 
06-JUN-12                 
14-JUN-12                 
15-JUN-12                 
16-JUN-12                 
19-JUN-12                 
20-JUN-12 
```

（它提供了一个范围内的日期减去假期表中一个范围内指定的任何日期）。

希望有帮助。

# user-interface - 使用 SWT 的桌面应用程序用户界面

> ID：10914225
> 
> 赞同：0
> 
> 时间：2012-06-06T12:27:28.037
> 
> 标签：user-interface, swt

我正在使用 SWT 开发桌面应用程序。我需要使 UI 看起来和感觉像 Skype 的界面。有人可以建议我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:57:52.047

[演示包](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/presentations/package-summary.html)允许自定义 SWT 应用程序的外观。

这是一个一般介绍，包括很多链接：http: [//jroller.com/mpermar/date/20050619#eclipse_presentations_jlibrary_and_vs](http://jroller.com/mpermar/date/20050619#eclipse_presentations_jlibrary_and_vs)

当然，如果您找不到适合您需要的现有皮肤，您将有很多工作要做。

# php - Mysql - 如何根据特定条件从两个表中检索字段？

> ID：10914229
> 
> 赞同：2
> 
> 时间：2012-06-06T12:27:37.317
> 
> 标签：php, mysql, select, join

我正在尝试从一个表中检索 post_id、post_year、post_desc、post_title、post_date 和从 post_id 相等且 is_thumb 为 1 的另一表中检索 img_filename（我已选择该图像作为帖子缩略图）

这是我没有运气的情况：

```
SELECT post_id, post_year, post_desc, post_title, post_date,
FROM mjbox_posts
JOIN mjbox_images
USING (img_is_thumb)
WHERE img_is_thumb = 1
AND mjbox_images.post_id = mjbox_posts.post_id 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:29:05.750

```
SELECT  p.post_id, post_year, post_desc, post_title, post_date, img_filename
FROM    mjbox_posts p
JOIN    mjbox_images i
ON      i.post_id = p.post_id
        AND i.img_is_thumb = 1 
```

或者，如果您更喜欢`USING`语法，

```
SELECT  post_id, post_year, post_desc, post_title, post_date, img_filename
FROM    mjbox_posts p
JOIN    mjbox_images i
USING   (post_id)
WHERE   i.img_is_thumb = 1 
```

不同之处在于第一个查询`post_id`从两个表中返回，您需要为它取别名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:29:30.287

```
SELECT post_id, post_year, post_desc, post_title, post_date,
FROM mjbox_posts
INNER JOIN mjbox_images on mjbox_images.post_id = mjbox_posts.post_id
WHERE img_is_thumb = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:37:44.247

```
SELECT post_id, post_year, post_desc, post_title, post_date, if(img_is_thumb, img_filename, null)
FROM mjbox_posts a,
mjbox_images b
WHERE a.post_id= b.post_id; 
```

如果 img_is_thumb 为 1，它将返回 img_filename，否则返回 null。

# mysql - 加入循环关系（初学者）

> ID：10914231
> 
> 赞同：0
> 
> 时间：2012-06-06T12:27:57.557
> 
> 标签：mysql

我是查询的初学者，我正在努力解决其中一个问题。这是涉及的两个表：

![用户和添加朋友](../Images/9d7b51d992be17238d9453e2adbe9659.png)

askstobefriends 表允许用户在我正在开发的应用程序中添加朋友。它的关系形式是：

AskToBeFriends（ID（长），#UserAsker（长），#UserAsked（长），接受（tinyInt））

因此，通过这张表，我们可以看到谁要求成为朋友以及是否被接受......

我试图实现的查询将允许从他的 ID 中列出所有用户的朋友，并返回友谊状态（接受字段 ==> 等待答案，接受或拒绝）。

Speretaly，它会是这样的：

```
SELECT Accept, UserAsker, UserAsked
FROM askstobefriends        
WHERE UserAsker = '".$userID."' OR UserAsked = '".$userID."' "; 
```

==> 第一个问题：它可以是要求与某人成为朋友的用户，也可以是反对者，这就是我放置和 OR 的原因。在那之后，我希望每个创建的朋友都有这些信息：

```
SELECT colUserID, colUserLogin, colUserName, colUserFirstname
FROM userTable
WHERE colUserID == FRIEND 
```

所以我想我需要做一个联接查询，并且在我的联接中，我必须确保我对每种情况都使用了 asktobefriends 表中的正确外键！（一次密钥可能是 UserAsked 而另一次是 UserAsker 取决于谁要求成为朋友：S）

有没有人有线索请：S？谢谢 ;-） ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:35:20.820

您可以使用确保只返回朋友的标准[加入](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)`:userID`表格。例如：

```
SELECT u.*, a.Accept
FROM   askstobefriends a JOIN userTable u ON (:userID, u.colUserID) IN (
         (a.UserAsker, a.UserAsked),
         (a.UserAsked, a.UserAsker)
       ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:46:12.407

你的设计是错误的。一个用户请求成为另一个用户的朋友，所以“Ask_to_be_friend”是关系，并且基数是多对多的，所以设计将如下所示：

User_User_ID 是 UserAsker。

User_USer_ID1 是 UserAskedtobefriend

![在此处输入图像描述](../Images/32bdd1a18c3579d21d16437b75434fea.png)

并且查询可能像（您将获得 user_user_ID 要求成为朋友的所有用户）：

```
Select U.* from User as U
Join Ask_to_be_friend as A on
U.user_ID = A.User_user_ID 
--where a.accept=1  if you add this, this will give 
--you all the friends ID of the user_ID table User 
```

如果您想获得被邀请的朋友的姓名或额外信息，您需要额外的加入

```
Select U.* from User as U
Join Ask_to_be_friend as A on
U.user_ID = A.User_user_ID
Join User as U2 on
A.User_User_ID1=u2.User_ID 
 --where a.accept=1 ,with this you'll with get only the friends 
```

# java - ï»¿ 字符在我使用 HttpUnit 时发生错误

> ID：10914232
> 
> 赞同：1
> 
> 时间：2012-06-06T12:27:58.263
> 
> 标签：java, http-unit

我正在使用 HttpUnit 来模拟设计成指定 url 的表单的提交按钮单击。（我正在使用[http://stu21.kntu.ac.ir/Login.aspx](http://stu21.kntu.ac.ir/Login.aspx)）。我使用如下代码来获取响应页面。

```
WebConversation conversation = new WebConversation();
WebRequest request = new GetMethodWebRequest("http://stu21.kntu.ac.ir/Login.aspx");
WebResponse response = conversation.getResource(request);       

WebForm loginForm = response.getForms()[0]; //Form has been got successfully
request = loginForm.getRequest();
request.setParameter("txtusername", "8810103" );
request.setParameter("txtpassword", "8810103" );
response = conversation.getResponse( request ); //error while getting the .js 
```

想要获取java脚本文件时出现问题，错误是

> 线程“主”com.meterware.httpunit.ScriptException 中的异常：脚本 'ï»¿var shuffleArray = new Array();

那么，我怎样才能摆脱这个问题呢？它阻止我的程序加载结果页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:23:15.237

JS 文件 (public.js) 有一个“字节顺序标记”。默认情况下`HTTPUnit`将访问[ISO-8859-1](http://httpunit.sourceforge.net/doc/api/com/meterware/httpunit/HttpUnitOptions.html#setDefaultCharacterSet%28java.lang.String%29)中的页面。通过调用`setDefaultCharacterSet`并将`HTTPUnitOptions`字符集更新为`UTF-8`，`HTTPUnit`将请求解释为`UTF-8`，前提是请求开始时没有指定字符集。[可以在此处](http://massapi.com/class/ge/GetMethodWebRequest.html)找到更多使用 HTTPUnit 的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:54:19.327

正如您[在此处](http://en.wikipedia.org/wiki/Byte_order_mark)看到的，它是 ISO-8859-1 表示形式的 UTF-8 字节顺序标记。您应该使用文本编辑器（例如 Notepad++）将其删除。

# java - JAXB：如何在运行时从编组中排除特定字段？

> ID：10914233
> 
> 赞同：1
> 
> 时间：2012-06-06T12:27:59.363
> 
> 标签：java, rest, jaxb, cxf, jettison

我正在使用 JAXB+Jettison 来提供多格式 RESTful（无模式）服务。 `@XmlTransient`注释对我根本不想序列化的那些属性很有用。但这还不够。

如何**在运行时**从编组中排除特定字段？

我可以以某种方式预初始化编组上下文并定义要排除的字段吗？

我需要根据当前用户的角色有选择地序列化对象字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:43:06.720

我以前做过类似的事情，在一个层次结构中有许多 DTO，从瘦到全脂，每个都有不同的 JAXB 映射。然而，这仅适用于少数角色。

[MOXy](http://www.eclipse.org/eclipselink/moxy.php)确实允许运行时绑定更改，似乎适合您的用例。

但是，请注意篡改您的服务合同，它可能会导致奇怪的实时错误，这是一个难以追踪的问题。

# php - 为什么我在php中得到这个错误？

> ID：10914234
> 
> 赞同：0
> 
> 时间：2012-06-06T12:28:03.403
> 
> 标签：php

我正在使用以下代码循环访问数据库中的几个链接，以检查每个链接的标题状态

```
$con = mysql_connect("localhost","root","");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("tracker", $con);

$result=mysql_query
        ("

        SELECT id,ziel_url FROM wm_mapping WHERE ziel_url LIKE '%websale7%'");

if (!$result)
{
    echo 'Could not run query: ' . mysql_error();
    exit;
}

$rows=array();
while ($row=mysql_fetch_assoc($result))
{
    $rows[] = $row;
}
$fp = fopen('url.csv', 'a+');
$csv=array();
foreach ($rows as $row){

        file_get_contents($row['ziel_url']);
        $response =$http_response_header[29];
        $csv[] = trim($row['id']).','.trim($row['ziel_url']).','.trim($response);

}
file_put_contents('url.csv', implode("\r\n", $csv), FILE_APPEND); 
```

对于我的行， `$response =$http_response_header[29];`我得到一个错误未定义的偏移量：

这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:46:11.167

```
$response =isset($http_response_header[29])?$http_response_header[29]:SOMETHING_ELSE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:36:10.950

`$http_response_header`可能是因为数组中没有 30 个元素。尝试查看数组内容`var_dump($http_response_header);`以查看要使用的元素。

# google-app-engine - Google App Engine 上的自定义域

> ID：10914237
> 
> 赞同：1
> 
> 时间：2012-06-06T12:28:18.823
> 
> 标签：google-app-engine, dns

我正在尝试将我的（裸）域映射到应用程序。

我找到了这个。

> 我想将我的应用映射到[http://myurl.com](http://myurl.com)（也称为裸域）。
> 
> 由于最近的更改，Google App Engine 不再支持将您的应用映射到裸域。如果您的域名注册商支持 URL 重定向，您可以从[http://yourdomain.com](http://yourdomain.com)重定向 到您的应用程序，该应用程序可以从[http://www.yourdomain.com](http://www.yourdomain.com)或 [http://appid.yourdomain.com](http://appid.yourdomain.com)等域提供。
> 
> 有关如何为您的 Google Apps 域配置重定向的说明，请参阅有关 URL 转发的文章。

现在我不想诉诸重定向。我了解 udacity.com 托管在 appengine 上，他们似乎使用裸域。

所以，我希望这只是典型的错误文档或没有更新。有没有人知道 Udacity 如何解决这个问题或者我怎么能产生这样的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:46:17.757

AFAIK AppEngine 不能映射到裸域，您可以在裸域上映射一个代理，它们将代理到应用程序中。

大多数应用程序所做的就是从裸域转发到应用程序映射的 www。GoDaddy 支持 GoogleApps 支持，其他各种免费和付费 DNS 服务也支持。

# apache - Apache 基本身份验证、mod_authn_dbd 和密码 salt

> ID：10914239
> 
> 赞同：0
> 
> 时间：2012-06-06T12:28:31.320
> 
> 标签：apache, authentication, basic-authentication

使用 Apache [mod_auth_basic](http://httpd.apache.org/docs/current/mod/mod_auth_basic.html)和[mod_authn_dbd](http://httpd.apache.org/docs/current/mod/mod_authn_dbd.html)，您可以通过在数据库中查找该用户的密码来验证该用户。如果密码保持清晰，我看到它可以工作，但是如果我们使用随机字符串作为盐（也存储在数据库中）然后存储连接的散列怎么办？

mod_authn_dbd 要求您指定一个查询以选择该密码，而不是决定用户是否经过身份验证。因此，您不能使用该查询将用户提供的密码与盐连接，然后与存储的哈希进行比较。

```
AuthDBDUserRealmQuery "SELECT password FROM authn WHERE user = %s AND realm = %s" 
```

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:20:00.403

查看基本身份验证的[密码格式，如果使用](http://httpd.apache.org/docs/current/misc/password_encryptions.html)[apr_md5_encode](http://svn.apache.org/viewvc/apr/apr/trunk/crypto/apr_md5.c?view=markup)函数完成哈希，我似乎可以完成这项工作。

发现[另一个](https://stackoverflow.com/questions/2469197/how-to-generate-a-hash-like-apaches-htpasswd-using-java)与此相关的问题并链接到[Java 实现](https://stackoverflow.com/questions/2469197/how-to-generate-a-hash-like-apaches-htpasswd-using-java)。我使用该实现稍作改动来计算我的网站正常用户创建流程中的数据库哈希。在此之后我可以使用 mod_authn_dbd 这个查询：

```
AuthDBDUserRealmQuery "SELECT CONCAT('$apr1$',password_salt,'$',password_hash) FROM users WHERE user = %s AND realm = %s" 
```

# apache-flex - Flash builder + Zend amf | 第二次调用时插入功能不起作用

> ID：10914243
> 
> 赞同：1
> 
> 时间：2012-06-06T12:28:52.143
> 
> 标签：apache-flex, insert, zend-amf

我正在使用由 Flash Builder 4.6 自动生成的标准 createOrders 函数。使用一次时效果极佳。这是代码：

```
protected function okButton_clickHandler():void
            {
                var orders2:Orders = new Orders();
                //setting values
                createOrdersResult.token = ordersService.createOrders(orders2);
                ordersService.commit();                 
            } 
```

**当第二**次单击相同的按钮并因此启动 okButton_clickHandler 时，数据不会插入到数据库中。我添加了带有*trace("saved"); 的结果处理程序；*我看到的是“保存”是在第一次点击时写的，但不是第二次。

我还使用**查尔斯**查看是否第二次发送请求。不，不是。

**编辑** 刚刚尝试生成自动生成表单。只需要添加 commit(); 因为 else 请求没有被发送。这是保存问题——请求仅在第一次单击按钮时发送。

**编辑 2** 所以所有的问题实际上是 ordersService.createOrders(orders2); 只工作一次。因为如果我尝试

```
createOrdersResult.token = ordersService.createOrders(orders2);
                ordersService.commit();
                createOrdersResult.token = ordersService.createOrders(orders2);
                ordersService.commit();
OR
            createOrdersResult.token = ordersService.createOrders(orders2);             
            createOrdersResult.token = ordersService.createOrders(orders2);
            ordersService.commit(); 
```

数据库中只添加了一行。有任何想法吗？

# c# - Transact SQL 日期查询不返回任何结果

> ID：10914245
> 
> 赞同：3
> 
> 时间：2012-06-06T12:29:02.263
> 
> 标签：c#, sql, sql-server-2008, tsql, datetime

从我的代码中，我使用以下命令调用 SP：

```
using (var cmd = new SqlCommand("sp_getnotes"))
{
  cmd.Parameters.Add("@ndate", SqlDbType.SmallDateTime).Value
                  = Convert.ToDateTime(txtChosenDate.Text);
  cmd.CommandType = commandType;
  cmd.Connection  = conn;

  var dSet = new DataSet();
  using (var adapter = new SqlDataAdapter { SelectCommand = cmd })
  {
    adapter.Fill(dSet, "ntable");
  }
} 
```

存储过程本身运行一个简单的查询：

```
SELECT * FROM tblNotes WHERE DateAdded = @ndate 
```

问题是没有返回记录！`DateAdded`是一`smalldatetime`列。

当我将查询更改为以下内容时，它可以工作：

```
SELECT * FROM tblNotes WHERE CONVERT(DATETIME, FLOOR(CONVERT(FLOAT, DateAdded))) = @ndate 
```

为什么会这样？此更改会影响整个应用程序，我想在更改每个查询之前找到根本原因......我们所做的唯一更改是使用参数化查询并从 SQL Server 2005 升级到 2008。

TIA。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T12:33:43.080

`smalldatetime`有一个时间部分也需要匹配。

用这个：

```
SELECT  *
FROM    tblNotes
WHERE   dateAdded >= CAST(@ndate AS DATE)
        AND dateAdded < DATEADD(day, 1, CAST(@ndate AS DATE)) 
```

`SQL Server 2008`及以上还可以让你使用这个：

```
SELECT  *
FROM    tblNotes
WHERE   CAST(dateAdded AS DATE) = CAST(@ndate AS DATE) 
```

高效地转换为优化器执行的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:40:04.737

SQL Server 2008 现在有一个 DATE 数据类型，它不像 SMALLDATETIME 那样保留时间部分。如果您无法更改列的数据类型，则在进行比较时必须截断，或者简单地转换为 DATE：

```
SELECT  * 
FROM    tblNotes 
WHERE   cast(dateAdded as date) = @ndate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:36:59.740

我不知道 SQL Server，但根据 Oracle 的经验，我怀疑您正在将日期时间与日期进行比较，例如 01/01/2012 01:01:01 与 01/01/2012。

# php - 使用有效的 mysqli_result 对象获取错误“调用非对象上的成员函数”

> ID：10914250
> 
> 赞同：0
> 
> 时间：2012-06-06T12:29:20.773
> 
> 标签：php, mysqli

我在扩展 mysqli 的类中有以下 PHP 代码。

```
 $queryString = 'SELECT ' . ID_UBICACION . ' FROM ' . TABLE_UBICACION_EVENTO . ' WHERE ' . ID_EVENTO . '=' . $id;        
    $queryResult = $this->query($queryString);
    var_dump($queryResult);      
    while ( $row = $queryResult->fetch_assoc() ) { //This is line 1090!!!!!! 
        $queryString = 'DELETE FROM ' . TABLE_UBICACION . ' WHERE ' . ID_UBICACION . '=' . $row[ID_UBICACION]; 
        $queryResult = $this->query($queryString);    
    } 
```

输出显示：

```
object(mysqli_result)#36 (0) { } 
Fatal error: Call to a member function fetch_assoc() on a non-object in /var/www/vhosts/davidcasillas.es/subdomains/aem/httpdocs/BaseDatos.php on line 1090 
```

如果 $queryResult 是有效的 mysqli_result 对象，为什么会出现错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:34:08.613

您在循环中覆盖 $queryResult ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:31:32.620

您正在替换`$queryResult`循环体内的值。`DELETE`查询不返回有效的结果资源，它们只返回一个布尔成功标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:32:23.900

`$queryResult`您正在`while`循环中重置。

# excel - 碧玉报告中的下拉元素

> ID：10914254
> 
> 赞同：0
> 
> 时间：2012-06-06T12:29:32.270
> 
> 标签：excel, drop-down-menu, jasper-reports, ireport

我有一个要求，当导出为 excel 格式时，我需要在我的报告中添加下拉元素。Dropdown 有 2 个值是或否。生成报告后，用户可以查看下拉列表并从下拉列表中选择是或否。有没有办法在 jasper 报告或 iReport 中添加下拉元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:16:48.260

如果您在 HTML 页面上显示报告，比如通过 JSP，那么是的，您当然可以添加一个下拉列表。很大程度上取决于您如何呈现报告。

# php - Codeigniter / Active Record 类生成空白 IN()

> ID：10914267
> 
> 赞同：0
> 
> 时间：2012-06-06T12:30:08.300
> 
> 标签：php, codeigniter

我在 Codeigniter 中有一些代码，如下所示：

```
$this->db->select('email_account_id');
$this->db->where('TRIM(LOWER(email_account_incoming_username))',trim(strtolower($email_address)));
$query = $this->db->get($this->users_db.'email_account'); 
```

引发此错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') AND TRIM(LOWER(email_account_incoming_username)) = 'email@server.co.uk'' at line 3
SELECT `email_account_incoming_username`, `email_account_id` FROM (`crmuat_users`.`email_account`) WHERE `email_account_id` IN () AND TRIM(LOWER(email_account_incoming_username)) = 'email@server.co.uk' 
```

现在我一辈子都不明白“IN()”是怎么进来的？

有人能看吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:51:17.570

您一定在`$this->db->where_in()`某处调用了该方法。CodeIgniter Active Record 不可能生成`IN()`子句，除非您告诉它这样做。在进行选择之前，请尝试查看您是否偶然调用了该方法。另请注意，由于 Active Record 类在生成查询时具有这种奇异性，因此您可能在其他地方使用另一个使用 Active Record 类的方法调用了该方法。

例如，以下将导致`IN()`在最终查询中生成子句。

```
function a()
{
    ...
    $this->db->where_in();
    ...
    $this->b();
}

function b()
{
    // Produces the same error as stated in the question because the call of 
    // where_in() beforehand.
    $this->db->select(...)->where(...)->get(...);
} 
```

PS：你为什么要修剪两次字符串并将其转换为小写？这对我来说似乎是多余的。

# java - prepareStatement() 似乎正在剥离分号

> ID：10914269
> 
> 赞同：0
> 
> 时间：2012-06-06T12:30:11.113
> 
> 标签：java, prepared-statement

我正在尝试使用以下内容执行准备好的语句：

```
dbaBean.setPrepStmt(dbaBean.getConn().prepareStatement(
    "SELECT id, author, title, url, article_text, date_created " +
            "FROM articles WHERE " +
            "(EXTRACT(YEAR FROM date_created) = ? OR ? is null) " +
            "AND (EXTRACT(MONTH FROM date_created) = ? OR ? is null) " +
            "AND (EXTRACT(DAY FROM date_created) = ? OR ? is null) AND " +
            "(url = ? OR ? is null) " +
            "ORDER BY date_created DESC;"));

dbaBean.getPrepStmt().setString(1, year);
dbaBean.getPrepStmt().setString(2, year);
dbaBean.getPrepStmt().setString(3, month);
dbaBean.getPrepStmt().setString(4, month);
dbaBean.getPrepStmt().setString(5, day);
dbaBean.getPrepStmt().setString(6, day);
dbaBean.getPrepStmt().setString(7, URL);
dbaBean.getPrepStmt().setString(8, URL);

System.out.println(dbaBean.getPrepStmt().toString()); 
```

dbaBean 是一个提供连接和准备好的语句的对象。它根本不做任何操作。

我已经非常成功地将上述代码用于其他方法，并且完全没有遇到任何问题。现在这个函数似乎在末尾剥离分号，例如这是 System.out 行的输出：

```
SELECT id, author, title, url, article_text, date_created FROM articles WHERE (EXTRACT(YEAR FROM date_created) = NULL OR NULL is null) AND (EXTRACT(MONTH FROM date_created) = NULL OR NULL is null) AND (EXTRACT(DAY FROM date_created) = NULL OR NULL is null) AND (url = 'someurl' OR 'someurl' is null) ORDER BY date_created desc 
```

注意缺少的分号。

我尝试添加第二个分号，它也被“吃掉”了。

其他更改被很好地传播（例如要选择的另一个字段）。

如果重要的话，这是 postgresql。

编辑：我在乎，因为我在运行此查询时出错，我认为删除分号是潜在的罪魁祸首。下面的答案似乎表明情况并非如此，我需要在别处寻找它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:18:00.243

我花了几分钟浏览 Postgresql JDBC 驱动程序源代码，看来发生的事情如下：

*   创建准备好的语句时，驱动程序会进行部分解析以将 SQL 拆分为语句，查找占位符并（我认为）删除任何注释。

*   解析的结果存储在`PreparedStatement`对象中的片段序列。

*   如果您调用`toString()`该语句，该方法将重构 SQL，插入占位符的值，并在每个语句*之间*添加分号……如果有多个语句。

所以，消失的分号是一个特性，而不是一个错误。JDBC 规范中的任何内容都没有要求该`toString()`方法应以其原始形式为您提供查询……或任何形式。此外，在为 JDBC 编写 SQL 时，通常使用（至少对于 Postgresql）来省略尾随分号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T12:43:45.580

`preparedStatement(String sql)`方法接受输入字符串并创建一个`CallableStatement`用于调用数据库存储过程的对象。

在CallableStatement对象的初始化过程中，sql字符串被jdbc驱动转换成系统原生的SQL语法。

由于分号是 Postgresql 的分隔符，您可以假设它已被 jdbc 驱动程序删除，并且如果使用其他 jdbc 驱动程序实现可能会有所不同。所以最好的选择是从你的 SQL 字符串中删除它。

# c - OpenGL 2.1 绘制具有不同缓冲区索引的对象

> ID：10914271
> 
> 赞同：0
> 
> 时间：2012-06-06T12:30:22.053
> 
> 标签：c, api, opengl

我正在使用 OpenGL 2.1 处理 OBJ 文件。这是 OBJ 规范： http: [//www.martinreddy.net/gfx/3d/OBJ.spec](http://www.martinreddy.net/gfx/3d/OBJ.spec) 据此，面表示为顶点/纹理/法线，其中顶点，纹理和法线不同，这是顶点的平均索引，每个缓冲区中的纹理坐标和法线索引是不同的。

**问题：**如何绘制为每个顶点、纹理和法线数组提供不同指示缓冲区的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:56:24.263

可悲的答案，这在 OpenGL 中是不可能的。在 OpenGL（以及许多其他此类系统，尤其是 Direct3D）中，顶点在概念上是所有顶点属性的联合，例如位置、法线或纹理坐标（不幸的是，术语*顶点*通常仅用于位置属性）。因此，具有相同位置但不同法线向量的两个顶点在概念上是两个不同的顶点。

这就是为什么您必须对所有属性使用相同的顶点索引的原因。因此，要使用 OpenGL 或类似库绘制 .OBJ 文件，您无需在加载后处理数据。

最简单的方法是完全删除索引，并使用从面规范中读取的索引一个接一个地存储每个三角形角的所有顶点数据，因此有`3*F`顶点而没有索引。然而，这是相当低效的，因为您可能仍然有许多重复的顶点，即使从整体上考虑所有属性。

另一种选择是将索引三元组（由顶点、texcoord 和普通索引组成）插入哈希表并将其映射到组合索引。每当索引三元组已经存在时，将其替换为哈希表中的一个索引，当它不存在时，将一个新顶点（由位置、法线和 texCoords 组成）添加到最终渲染的顶点数组中，索引文件的使用索引三元组的顶点数组（当然，并将这个新的顶点数组大小作为唯一索引插入到哈希表中）。

# ios - monotouch 上 system.net.sockets 的 nullreference

> ID：10914278
> 
> 赞同：1
> 
> 时间：2012-06-06T12:30:55.123
> 
> 标签：ios, mono, xamarin.ios, system.net, system.net.sockets

我有同一个应用程序的三个版本：iPhone、Mono Console、Windows 控制台应用程序。它们都包含完全相同的代码（通过 MonoTouch C#）。在 Mono(Touch) 框架上，我从程序集浏览器中得到以下异常：（Windows 完美运行）

```
System.NullReferenceException: Object reference not set to an instance of an object
  at System.Net.Sockets.Socket+SocketAsyncResult.Complete () [0x00000] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System/System.Net.Sockets/Socket_2_1.cs:240
  at System.Net.Sockets.Socket+SocketAsyncResult.Complete (System.Exception e) [0x00007] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System/System.Net.Sockets/Socket_2_1.cs:304
  at System.Net.Sockets.Socket+Worker.Accept () [0x00077] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System/System.Net.Sockets/Socket_2_1.cs:510
  at System.Net.Sockets.Socket+Worker.DispatcherCB (System.Net.Sockets.SocketAsyncResult sar) [0x0009e] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System/System.Net.Sockets/Socket_2_1.cs:432 
```

在 MonoTouch 上使用 System.Net.Sockets 是否存在任何已知问题？有谁知道这个异常意味着什么（除了明显的 NullReference 之外）？我对这个领域很陌生。希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:48:07.940

这不是 MonoTouch 的问题，而是 MonoDevelop 的问题。

我建议在这里提交一个错误：http: [//bugzilla.xamarin.com](http://bugzilla.xamarin.com)，以便相关人员可以查看它。

此错误不会阻止您使用 MonoTouch（只是不要对导致此错误的程序集使用程序集浏览器，您可以直接在此处查看源代码：[https ://github.com/mono/mono/tree/mono -2-10](https://github.com/mono/mono/tree/mono-2-10) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:22:13.427

与您的问题相似的错误已在 Mono 的 bugzilla 中注册，网址为[https://bugzilla.xamarin.com/show_bug.cgi?id=2965](https://bugzilla.xamarin.com/show_bug.cgi?id=2965)。在撰写本文时，有针对 Mono 框架的建议修复，但该错误仍未标记为已关闭或已解决。

# regex - 正则表达式 - 最短匹配

> ID：10914279
> 
> 赞同：0
> 
> 时间：2012-06-06T12:30:56.617
> 
> 标签：regex

我需要通过正则表达式解析一个 HTML 字符串，如果 KEY 位于我需要提取的 VALUE 之后。

示例原始字符串：

```
<TR><TD>VAL1</TD><TD>KEY1</TD></TR><TR><TD>VAL2</TD><TD>KEY2</TD></TR> 
```

当我尝试使用以下方法提取 VAL2 时：

```
<TD>(.*?)</TD><TD>KEY2</TD> 
```

我实际上得到

```
VAL1KEY1VAL2 
```

假设键是恒定的并且值在变化，我该如何解决这个问题？

在此先感谢，迈克尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T12:33:07.757

利用

```
<TD>([^<]*)</TD><TD>KEY2</TD> 
```

反而。您的惰性量词*将*确保最短匹配*但从第一个匹配位置开始*。在这种情况下，从第一个`<TD>`. 上面的解决方案通过限制可以出现在一个值中的字符来回避这个问题，因此它永远不会跨越多个标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:56:08.497

我不知道您使用的是什么语言，但如果是 PHP，我认为您最好使用[DOM](http://ca.php.net/dom)，而不是使用正则表达式解析它。

这是一种方法：

```
<?php

$html="<TR><TD>VAL1</TD><TD>KEY1</TD></TR><TR><TD>VAL2</TD><TD>KEY2</TD></TR>";

$doc = new DOMDocument();
$doc->loadHTML($html);

print_r($doc->getElementById(1)->tagName);

$output=array();
$n=0;
while ($val = $doc->getElementsByTagName('td')->item($n++)) {
  $key = $doc->getElementsByTagName('td')->item($n++);
  $output[$key->textContent]=$val->textContent;
}

print_r($output); 
```

这是我运行它时显示的内容。

```
Array
(
    [VAL1] => KEY1
    [VAL2] => KEY2
) 
```

# android - 在 myandriod 应用程序中从 gmail 帐户接收电子邮件的代码

> ID：10914281
> 
> 赞同：1
> 
> 时间：2012-06-06T12:31:01.857
> 
> 标签：android, gmail

我的 android 应用程序需要与 gmail 服务器通信以接收来自其他 gmail 帐户的电子邮件，以便我可以在我的 android 应用程序中显示电子邮件.. 任何人都可以建议我一个 API 或文档或教程来完成这个....谢谢提前.....

问候， HONY

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:33:39.523

您很可能希望与[IMAP](https://en.wikipedia.org/wiki/Imap)或[POP](https://en.wikipedia.org/wiki/Post_Office_Protocol)邮件服务器交互。只需在谷歌上查找。我确信已经有 Java 库（也许也适用于 Android）可用。

这个 SO [question 讨论](https://stackoverflow.com/questions/61176/getting-mail-from-gmail-into-java-application-using-imap)了如何在桌面 Java 应用程序中连接到 Gmail 服务器，但我认为你也可以将它移植到 android。

# c# - C# XNA 4.0 全屏鼠标移动到第二个显示器

> ID：10914289
> 
> 赞同：2
> 
> 时间：2012-06-06T12:31:33.497
> 
> 标签：c#, xna-4.0

标题几乎说明了一切。我从 XNA Game 类派生，并设置 IsMouseVisible = true。我有一个双屏设置，辅助显示器从主显示器扩展。我将游戏设置为全屏模式（GraphicsDeviceManager.IsFullScreen = true）。一切正常，全屏模式已初始化。我唯一的问题是鼠标不会在全屏游戏中保持绑定。一旦它到达全屏游戏的边缘，它就会无缝地移动到辅助显示器上。这是预期的行为吗？

我执行 Mouse.GetState() 以在我的游戏运行的同一线程上检索每一帧的鼠标信息。

我什至尝试在每次调用 GetState 之前设置 Mouse.WindowHandle = GameWindowHandle，但它并没有改变任何东西。

有任何想法吗？或者这是预期的行为，我需要自己将鼠标夹在全屏区域？

问候， 瑞安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:03:33.330

是的，确切地说，将鼠标夹在您希望它停留的屏幕上。这类似于我（和许多其他人）在为我的游戏实现精灵光标时使用的方法。我隐藏了系统鼠标，并将它夹在屏幕中央，这样它就不会出现在其他显示器上。

唯一的缺点是，如果您将游戏最小化等，您必须松开鼠标。否则它会一直卡住，这真的很烦人。

# spring - Spring + Hibernate + DAO + SessionFactory + Inject

> ID：10914295
> 
> 赞同：0
> 
> 时间：2012-06-06T12:32:08.800
> 
> 标签：spring, hibernate, sessionfactory

我将 Spring 与 Hibernate 一起使用，并始终为 sessionFactory 对象获取 NPE。

我的配置文件：

```
@Configuration
public class HibernateConfiguration {

@Bean
public AnnotationSessionFactoryBean sessionFactory() {
    Properties props = new Properties();
    props.put("hibernate.dialect", MySQL5InnoDBDialect.class.getName());
    props.put("hibernate.format_sql", "true");
    props.put("hibernate.connection.driver_class", "com.mysql.jdbc.Driver");
    props.put("hibernate.connection.password", "xxx");
    props.put("hibernate.connection.url", "jdbc:mysql://localhost/Market");
    props.put("hibernate.connection.username", "philipp");

    AnnotationSessionFactoryBean bean = new AnnotationSessionFactoryBean();
    bean.setAnnotatedClasses(new Class[] { xxx.class, xxx.class, xxx.class });
    bean.setHibernateProperties(props);
    bean.setSchemaUpdate(true);
    return bean;
}

@Bean
public HibernateTransactionManager transactionManager() {
    return new HibernateTransactionManager(sessionFactory().getObject());
}

@Bean
public PersistenceExceptionTranslationPostProcessor persistenceExceptionTranslationPostProcessor() {
    return new PersistenceExceptionTranslationPostProcessor();
} 
```

}

我的 DAOImpl 课程：

```
@Repository("xxx")
public class xxxDAOImpl implements xxxDAO {

private SessionFactory sessionFactory;

@Autowired
public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
}

private Session currentSession() {
    return sessionFactory.getCurrentSession();
}
... 
```

测试用例：

```
@ContextConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
public class TestxxxDAOImpl {

@Test
@Transactional
public void testInsertxxx() throws Exception {

    xxxDAO xxxDAO = new xxxDAOImpl();
    xyz xyz = new xyz();
    xxxDAO.insert(xyz);
    assertNotNull(xyz.getId());
    } 
```

}

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx"   xmlns:jdbc="http://www.springframework.org/schema/jdbc"
xsi:schemaLocation="
    http://www.springframework.org/schema/jdbc   http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
    http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<tx:annotation-driven transaction-manager="transactionManager" />
<context:component-scan base-package="xxx.config" />
<context:component-scan base-package="xxx.dao" />
<context:annotation-config></context:annotation-config> 
```

测试上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<import resource="classpath:/META-INF/spring/app-context.xml" /> 
```

当测试调用 insert 方法时，我总是从 currentSession 获得 NPE。

```
public void insert(xxx xxx) {
    currentSession().save(xxx);
}

private Session currentSession() {
    return sessionFactory.getCurrentSession();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:16:22.950

使用 Spring 时首先要了解的是，Spring 依赖注入仅适用于从应用程序上下文获取的 bean，不适用于使用`new`.

在启用 Spring 的单元测试中，您可以使用 配置应用程序上下文`@ContextConfiguration`，例如，如下所示（在 Spring 3.1 中工作，在以前的版本`@ContextConfiguration`中不`@Configuration`直接使用类，因此您必须创建 XML 配置文件）：

```
@Configuration 
public class HibernateConfiguration { 
    // Add your DAO to application context
    @Bean
    public xxxDAO xxxDAO() {
        return new xxxDAOImpl();
    }
    ...
}

// Configure application context using the given @Configuration class
@ContextConfiguration(classes = HibernateConfiguration.class)   
@RunWith(SpringJUnit4ClassRunner.class)
public class TestxxxDAOImpl {
    // Obtain DAO from the application context    
    @Autowired xxxDao xxxDao;
    ...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T12:47:28.610

使用 sessionFactory.openSession() 代替 xxxDAOImpl 类的 currentSession() 函数中的 sessionFactory.getCurrentSession()。

由于在您的第一次通话中，会话工厂中不会有任何当前会话，因此您需要打开会话。

希望这对您有所帮助。干杯。

# axapta - 从 Ax 2012 更新活动目录

> ID：10914296
> 
> 赞同：1
> 
> 时间：2012-06-06T12:32:22.753
> 
> 标签：axapta, x++

如何从 Axe 2012 更新 Active Directory？

例如，如何从 Ax 2012 更新 Active Directory 中用户的用户名/电话号码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:04:15.810

使用 X++ 的[.NET 互操作功能](http://msdn.microsoft.com/en-us/library/cc598160.aspx)调用托管代码，然后按照此处的示例进行操作：

[http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C)

基本上，我会编写自己的 C# 库，其中包含更新 Active Directory 的逻辑，然后从 X++ 调用此库中的方法。

# android - Android：无法启动活动组件信息：java.lang.NullPointerException

> ID：10914301
> 
> 赞同：0
> 
> 时间：2012-06-06T12:32:37.950
> 
> 标签：android, audio-recording, seekbar, mediastore

我正在尝试在录制音频时运行搜索栏。

这是我的代码。

```
public class ServerAudioSendActivity extends Activity {

private Button buttonPlayStop;
private MediaPlayer mediaPlayer;
private SeekBar seekBar;

private final Handler handler = new Handler();

// Here i override onCreate method.
//
// setContentView() method set the layout that you will see then
// the application will starts
//
// initViews() method i create to init views components.
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    initViews();

}

// This method set the setOnClickListener and method for it (buttonClick())
private void initViews() {
    buttonPlayStop = (Button) findViewById(R.id.ButtonPlayStop);
    buttonPlayStop.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            buttonClick();
        }
    });

    // mediaPlayer = MediaPlayer.create(this, R.raw.sound41772);

    seekBar = (SeekBar) findViewById(R.id.SeekBar01);
    seekBar.setMax(mediaPlayer.getDuration());
    seekBar.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            seekChange(v);
            return false;
        }
    });

}

public void startPlayProgressUpdater() {
    seekBar.setProgress(mediaPlayer.getCurrentPosition());

    if (mediaPlayer.isPlaying()) {
        Runnable notification = new Runnable() {
            public void run() {
                startPlayProgressUpdater();
            }
        };
        handler.postDelayed(notification, 1000);
    } else {
        mediaPlayer.pause();
        buttonPlayStop.setText(getString(R.string.play_str));
        seekBar.setProgress(0);
    }
}

// This is event handler thumb moving event
private void seekChange(View v) {
    if (mediaPlayer.isPlaying()) {
        SeekBar sb = (SeekBar) v;
        mediaPlayer.seekTo(sb.getProgress());
    }
}

// This is event handler for buttonClick event
private void buttonClick() {
    if (buttonPlayStop.getText() == getString(R.string.play_str)) {
        buttonPlayStop.setText(getString(R.string.pause_str));
        try {
            mediaPlayer.start();
            startPlayProgressUpdater();
        } catch (IllegalStateException e) {
            mediaPlayer.pause();
        }
    } else {
        buttonPlayStop.setText(getString(R.string.play_str));
        mediaPlayer.pause();
    }
}
 } 
```

在 logcat 中给出这个错误

```
06-06 17:57:33.522: W/dalvikvm(1068): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-06 17:57:33.542: E/AndroidRuntime(1068): FATAL EXCEPTION: main
06-06 17:57:33.542: E/AndroidRuntime(1068): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sendaudiotoserver/com.sendaudiotoserver.ServerAudioSendActivity}: java.lang.NullPointerException
06-06 17:57:33.542: E/AndroidRuntime(1068):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-06 17:57:33.542: E/AndroidRuntime(1068):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at android.os.Handler.dispatchMessage(Handler.java:99)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at android.os.Looper.loop(Looper.java:137)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at android.app.ActivityThread.main(ActivityThread.java:4424)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at java.lang.reflect.Method.invokeNative(Native Method)
 0 6-06 17:57:33.542: E/AndroidRuntime(1068):   at java.lang.reflect.Method.invoke(Method.java:511)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 0 6-06 17:57:33.542: E/AndroidRuntime(1068):   at dalvik.system.NativeStart.main(Native  Method)
 06-06 17:57:33.542: E/AndroidRuntime(1068): Caused by: java.lang.NullPointerException
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at com.sendaudiotoserver.ServerAudioSendActivity.startPlayProgressUpdater(ServerAudioSendActivity.java:60)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at com.sendaudiotoserver.ServerAudioSendActivity.onCreate(ServerAudioSendActivity.java:32)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at android.app.Activity.performCreate(Activity.java:4465)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
 06-06 17:57:33.542: E/AndroidRuntime(1068):    ... 11 more 
```

请让我知道我要去哪里错了..

非常感谢拉胡尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:35:26.620

你已经评论了这一行：

```
// mediaPlayer = MediaPlayer.create(this, R.raw.sound41772); 
```

因此，您会在以下位置获得 NullPointerException：

```
mediaPlayer.getDuration() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:39:27.257

`buttonPlayStop = (Button) findViewById(R.id.ButtonPlayStop);` 甚至在您的 seekbar 未初始化并因此发生 NPE 之前调用此方法`seekBar.setProgress(mediaPlayer.getCurrentPosition());`。

# magento - magento中不同付款方式的运费金额

> ID：10914304
> 
> 赞同：0
> 
> 时间：2012-06-06T12:32:46.730
> 
> 标签：magento

如何在magento中为每种付款方式应用不同的运费？现在我目前使用两种付款方式。

1) 信用卡 2) 货到付款。

当客户选择信用卡购物车付款方式时，运费是免费的。当客户选择货到付款方式时，运费为 100。仅供参考：我的默认运费为 100。

谁能简要解释一下？

感谢普拉卡什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:25:12.233

问题是付款方式是根据运输方式选择的，所以选择付款方式后无法更改运输方式。

一种可能性是提供不同的运输方式，在选择后限制付款方式。

我创建了一个执行此操作的 magento 模块，请随时查看源代码它如何根据运费限制付款方式。这就是我要走的路。

[https://github.com/thebod/Thebod_Shippingrates](https://github.com/thebod/Thebod_Shippingrates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T10:34:53.647

***您可以使用购物车价格规则***为特定付款方式创建**促销**规则。

 *[![特定付款方式的购物车价格规则](../Images/77c7d36c51820be40b1fb7f3ab078244.png)](https://i.stack.imgur.com/7dX0h.png)*

# android - 在设备上使用 Facebook SDK 时登录失败无效密钥错误

> ID：10914305
> 
> 赞同：0
> 
> 时间：2012-06-06T12:32:51.723
> 
> 标签：android, facebook

我已经浏览了这些链接

[使用 Facebook SDK 登录失败的无效密钥错误](https://stackoverflow.com/questions/4848067/login-failed-invalid-key-error-with-facebook-sdk)

和

[http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/](http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/)

但我不明白哈希键到底是什么？？？我的应用程序在哪里使用？在教程中，他说我们需要将此密钥哈希添加到 Facebook 应用程序...在我的情况下，我有一个 Facebook Web 应用程序，这是否足够或者我应该在 Facebook 上创建一个移动应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:43:45.900

最好的起点是官方[教程](http://developers.facebook.com/docs/mobile/android/build/)。

这部分在[第 5 步中进行了说明：将您的应用签名添加到 Facebook 应用设置](http://developers.facebook.com/docs/mobile/android/build/#sig)：

> Facebook 需要以应用程序签名的形式为移动应用程序提供额外的安全层。您需要将您的 Android 应用程序签名放入您的 Facebook 应用程序设置中。

只需按照他们的指示，这一切都非常简单直接。

# grails - 通过ajax调用防止会话刷新（grails）

> ID：10914309
> 
> 赞同：3
> 
> 时间：2012-06-06T12:33:13.447
> 
> 标签：grails, spring-security

我有一个基于 Grails 的 Web 应用程序，它使用 Spring Security 来处理用户登录等。我遇到了一些障碍，希望更有经验的人能够为我指出正确的解决方案方向。

该应用程序具有消息的概念，可以从用户发送到用户以提供即时消息传递功能。整个系统中都有一个定时 Ajax 调用，用于提醒用户任何新的传入消息。

我的问题是，由于我已经实现了这一点，每次执行 ajax 调用时，当然会刷新用户会话，因此永远不会超时。因此，手动“注销”是他们可以注销的唯一方式，而在会话到期之前会将他们重定向到登录页面。

有谁知道我如何仍然可以在计时器正常工作的同时完成自动注销？

我希望我可以设置某种带有弹簧安全性的过滤器，或者我可以在定期调用的方法上使用一个注释来指示它不要刷新用户会话。

一如既往地感谢任何帮助和评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:43:33.103

感谢 Long 用他的评论为我指明了不同的方向，我相信我现在有了一个更好、更直观的用户友好解决方案。

我没有尝试在后端进行更改，而是使用了一个非常容易配置的小 jQuery 脚本，并且非常适合我已经使用 jQuery 和 jQuery UI 的应用程序。

在特定时间后，会弹出一个 jQuery 对话框，模态地使背景变暗，并通知用户由于不活动，他们很快就会被注销。如果用户没有单击我的“继续工作”按钮，则会显示一个进度条，直到它为空，然后我将窗口位置更改为 spring 安全注销控制器 URL，将它们带回登录页面. 它工作得很好，而且很容易配置。

说明可以在这里找到：http: [//kenbrowning.blogspot.co.uk/2010/04/are-you-still-there.html](http://kenbrowning.blogspot.co.uk/2010/04/are-you-still-there.html)

感谢 Ken Browning 的图书馆。

# liferay-6 - 组织成员不允许访问组织站点的私人页面

> ID：10914312
> 
> 赞同：1
> 
> 时间：2012-06-06T12:33:34.610
> 
> 标签：liferay-6

在 Liferay 6.1 CE 中，当组织成员尝试访问组织站点的私有页面时，他会收到以下错误：

> 您无权查看此页面。

在日志文件 liferay.2012-06-06.log 中，我们可以看到以下消息：

> 13:54:42,149 INFO [PortalImpl:4890] 不允许用户 524603 访问组 503050 的私有页面

有关信息，该组织的*Membership*类型是*private*。如果我们将*站点管理员*角色添加到成员，则允许访问组织站点的私有页面。

似乎该错误也出现在组织站点的公共页面上。

> 14:11:46,782 INFO [PortalImpl:4890] 不允许用户 524603 访问组 503050 的公共页面

即使在删除组织站点并重新创建它之后，这两个错误也会出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:10:35.513

将用户作为站点成员添加到站点，并将用户添加到组织。

# .net - 在 Linq to Nhibernate 中使用 QueryOver<> 获取大型数据时出现 OutOfMemory 异常

> ID：10914318
> 
> 赞同：0
> 
> 时间：2012-06-06T12:33:51.740
> 
> 标签：.net, linq-to-nhibernate, nhibernate-3

我有一个在 NHibernate 3.0 中使用 Linq to NHibernate 的 asp.net Web 应用程序。

在一个函数中，我需要从一个包含 20 列的 1000 万条记录的表中获取大约 20000 条记录。

我正在使用 Session.QueryOver<>() 方法来获取记录。

功能代码为：

```
public IList<BatchDetails> GetBatchRecordsOnBatchId_BatchSize(int batchId,int stratingRowdId,int batchSize)
    {
        // If the stratingRowdId will be 0 than frist count of the Batch Records equivlent to the batchSize will be return

        //If the batchSize will be 0 than all the Batch Records starting from the RowId equivlent to the stratingRowdId will be return

        // If both the stratingRowdId & batchSize are 0 than all the BatchReocrds for the BatchId will be return

        if (batchId <= 0)
        {

            throw new ArgumentException();
        }
        using (var session = _sessionFactory.OpenSession())
        {
            using (var transaction = session.BeginTransaction())
            {
                try
                {
                    //Get Batch data from the Database for the BatchId
                    var batchData = from batchRecords in session.QueryOver<BatchDetails>()
                                        .Where(x => x.BatchId == batchId)
                                        .List().Skip(stratingRowdId).Take(batchSize)
                                    select batchRecords
                        ;

                    transaction.Commit();
                    return batchData.ToList();
                }
                catch (ArgumentException ex)
                {
                    if (transaction != null) transaction.Rollback();

                    throw;
                }
                catch (Exception exception)
                {
                    if (transaction != null) transaction.Rollback();

                    throw;
                }
                finally
                {
                    session.Flush();
                }
            }

        }
    } 
```

此代码一直有效，直到表有 2 条 lac 记录。

但是在表中添加 10 条 lac 记录后，此方法会抛出错误：

> NHibernate.Util.ADOExceptionReporter| 引发了“System.OutOfMemoryException”类型的异常。
> 
> NHibernate.Util.ADOExceptionReporter| 引发了“System.OutOfMemoryException”类型的异常。
> 
> NHibernate.Util.ADOExceptionReporter| 引发了“System.OutOfMemoryException”类型的异常。
> 
> PaymentCurrency 作为 Payment19_2_0_，this_.PaymentDate 作为 Payment20_2_0_，this_.TransactionId 作为 Transac21_2_0_，this_.BatchId 作为 BatchId2_0_ FROM TIOTestDB.dbo.BatchDetails this_WHERE this_.BatchId = ? ] 位置参数：#0>3 [SQL: SELECT this_.RefereId as Referenc1_2_0_, this_.AccNumber as AccountN2_2_0_, this_.AcStatus as AccountS3_2_0_, this_.AcType as AccountT4_2_0_, this_.AccSubType as AccountS5_2_0_, this_.AccountDescription as AccountD6_2_0_, this_. ActivationDate as Activati7_2_0_, this_.CombinedBilling as Combined8_2_0_, this_.PlanAmount as PlanAmount2_0_, this_.PlanCode as PlanCode2_0_, this_.CustomerName as Custome11_2_0_, this_.Email as Custome12_2_0_, this_.Phone as Custome13_2_0_, this_.Address as Custome14_2_0 Custome15_2_0_，this_.State 为 Custome16_2_0_，this_.ZipCode 为 Custome17_2_0_，this_。

当我在 foreach() 迭代中执行此函数时，虽然查询执行 1 或 2 次并检索数据，但之后它会引发 Out of memory 异常。

作为一名经验丰富的 NHibernate 开发人员，我可以理解我需要重组 LINQ 查询以优化其性能。

我也在互联网上搜索过，但我无法获得太多信息。

尽早答复将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:58:00.267

首先，您的查询：

```
from batchRecords in session.QueryOver<BatchDetails>()
    .Where(x => x.BatchId == batchId)
    .List().Skip(stratingRowdId).Take(batchSize)
select batchRecords 
```

可以简化为：

```
session.QueryOver<BatchDetails>()
    .Where(x => x.BatchId == batchId)
    .List().Skip(stratingRowdId).Take(batchSize) 
```

它的行为将完全相同。`from`您所做的所有`select`有效的工作就是`.Select(x => x)`在查询末尾添加。

现在，你的问题是你打电话`List()`太早了。所做的是`List()`将查询的所有结果检索到内存中。如果您在那之后使用 LINQ 方法（就像您使用`Skip()`and一样`Take()`），它们将在内存中执行，这不是您想要的。

你应该做的是移动`List()`到查询的末尾：

```
session.QueryOver<BatchDetails>()
    .Where(x => x.BatchId == batchId)
    .Skip(stratingRowdId).Take(batchSize)
    .List() 
```

这样，两者都`Skip()`将`Take()`被转换为 SQL，这意味着您不会将所有数据检索到内存中，而只会检索您实际需要的数据。这应该可以解决您的 OOM。

# ant - JaCoCo 报告看起来正确但无法查看源代码

> ID：10914320
> 
> 赞同：2
> 
> 时间：2012-06-06T12:33:56.520
> 
> 标签：ant, code-coverage, emma, jacoco

我是 JaCoCo 的新手，并试图弄清楚为什么我生成的 html 报告没有与我的源链接。

覆盖数字看起来是正确的，我可以浏览到每个类，然后是每个方法，但我看不到源。我在 sourcefiles 标签中尝试了许多不同的东西，但没有任何效果。其他人遇到过这个问题吗？这是我的 ant 脚本的片段：

...

```
 <test name="test.fw.UITestSuite" todir="${logdir}"/>
    </junit>
    </jacoco:coverage>
    <fail if="TestFailed" status="1" message="UI junit test failure detected"/>
    <echo message="${src}"/>
    <jacoco:report>                                
        <executiondata>
            <file file="jacoco.exec"/>
        </executiondata>                            
        <structure name="UI">
            <classfiles>
                <fileset dir="${build}/fw"/>
            </classfiles>
            <sourcefiles encoding="UTF-8">
                <fileset dir="fw" includes="**./*.java"/>
            </sourcefiles>
        </structure>                                
        <html destdir="report"/>                                
    </jacoco:report>
</target> 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:02:46.973

你的`fileset`定义似乎很奇怪。

包含必须是（第一个 . 放错了位置）：

```
includes="**/*.java 
```

尝试简单地将其指向您的 src 目录的根目录（不需要包含）

```
<fileset dir="fw"  /> 
```

但是 fw 必须是您的源代码的根目录，即它包含包文件夹，例如：

```
src
 -org
   -module
     -MyClass1.java
     -MyClass2.java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-28T03:57:25.050

我在使用 Scala 风格的包目录名称时看到了这种中断，例如，

```
src/main/java/com.example.foo.bar/Foo.java 
```

与标准相比，嵌套层次更少、自动完成速度更快等

```
src/main/java/com/example/foo/bar/Foo.java 
```

大多数工具都很好地支持第一个版本，但通常如果您尝试并一切正常，当您注意到类似 jacoco 报告不再显示源代码时，您早就忘记了目录名称更改......</p >

# iphone - iphone中的删除语句不起作用

> ID：10914321
> 
> 赞同：1
> 
> 时间：2012-06-06T12:34:01.067
> 
> 标签：iphone, sql, ios, sqlite, ios5

我正在使用以下代码片段从表中删除所有数据

```
NSString *deleteStatementNS = [NSString stringWithFormat:
                               @"DELETE FROM %@",[tableNames objectAtIndex:i]];

const char *prepareDelete ="DELETE FROM '?'";
const char *tbleName = [[tableNames objectAtIndex:i] UTF8String];
if (sqlite3_prepare_v2(dBase, prepareDelete, -1, &dbpreprdstmnt, NULL) == SQLITE_OK) 
{
    dbrc = sqlite3_bind_text(dbpreprdstmnt, 1, tbleName, -1, SQLITE_TRANSIENT);
    dbrc = sqlite3_step(dbpreprdstmnt);

    sqlite3_finalize(dbpreprdstmnt);
    dbpreprdstmnt = NULL;
} 
else 
{
    NSLog(@"Error %@",[NSString stringWithCString:sqlite3_errmsg(dBase) encoding:NSUTF8StringEncoding]);
} 
```

但不幸的是，删除没有发生我收到错误，因为`Error no such table: ?` 我无法仅准备语句。但是如果我使用下面的准备语句

```
const char *prepareDelete =[deleteStatementNS UTF8String]; 
```

这工作得很好。我无法绑定变量来阻止 SQL 注入攻击。请问我知道这个错误背后的原因。我发现很多地方都报告了这个代码片段，因为它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:40:04.960

> 我无法绑定变量来阻止 SQL 注入攻击。

表名不能绑定为变量。

为避免 SQL 注入攻击，不要让您的用户指定将删除哪些表名。确保表名来自受信任的来源（例如在您的程序中硬编码）。

事实上，当表名来自不受信任的来源时，删除表中的所有数据是一个非常糟糕的主意。即使您阻止了 SQL 注入攻击，攻击者仍然可以删除您不希望他们删除的数据。

# cuda - CUDA Visual Profiler v4.1，可以制作计数器图并查找有关内核的详细信息

> ID：10914322
> 
> 赞同：0
> 
> 时间：2012-06-06T12:34:07.480
> 
> 标签：cuda, profiler

在 Visual Profiler v4.1 中

1.  是否可以像在旧 v3.2 中一样制作计数器条形图？
2.  我有一个具有许多设备功能的内核。是否可以查看每个设备功能需要多长时间？要查看我可以对哪个设备功能进行一些优化。

# ios - NSTImer 值计算

> ID：10914325
> 
> 赞同：0
> 
> 时间：2012-06-06T12:34:11.600
> 
> 标签：ios

我正在为音频播放器开发一个 ios 应用程序。

现在我必须移动一个代表歌曲当前播放曲目的滑块

例如，我的歌曲持续时间为 6 秒，现在我必须将滑块从 x 点 = 0 移动到 x = 480 到音频播放的时间，芬兰应该支付一个循环。我正在移动基于 Nstimer。现在我需要 nstime 间隔让 nstimer 正确移动滑块以结束，即 x=480。

myTimer = [NSTimer scheduleTimerWithTimeInterval:timeinterval target:self selector:@selector(updatplayer) userInfo:nil repeats:YES]; 这里我需要这个时间间隔值

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:00:55.830

您可以将时间间隔设置为类属性并从那里访问它。例如：

```
@interface YourClass ()

@property (nonatomic, assign) NSTimeInterval myTimeInterval);

@end

@implementation YourClass

- (void)methodWithYourTimerInIt {

    // ... Do stuff
    self.myTimeInterval = 6.0;
    myTimer = [NSTimer scheduledTimerWithTimeInterval:self.myTimeInterval target:self selector:@selector(updatePlayer) userInfo:nil repeats:YES];
}

- (void)updatePlayer {

    NSLog(@"My time interval is: %f", self.myTimeInterval);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:12:25.953

您可以将计时器用作：

```
myTimer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(updatplayer) userInfo:nil repeats:YES];

- (void)updatplayer {
     long currentPlaybackTime = moviePlayer.currentPlaybackTime;
     playSlider.value = currentPlaybackTime / moviePlayer.duration;
} 
```

# ios - ios - 使 UIScrollView 平滑滚动

> ID：10914328
> 
> 赞同：1
> 
> 时间：2012-06-06T12:34:26.817
> 
> 标签：ios, uiscrollview, scroll

在我的 iPad 应用程序中，我有一个滚动视图，其中列出了 20 个视频专辑的图像。服务器将发送 20 张图像的列表。
现在，当用户到达滚动视图的末尾时，我必须发送请求以获取接下来的 10 个视频详细信息。
获取数据后，我想将它们添加到最后的滚动视图中。但我想删除一开始的10个视频。因此，一次滚动视图将始终只显示 20 个视频细节。
当用户再次滚动到末尾时，我将向服务器发送请求，获取下一个 10 个视频详细信息并将它们添加到滚动视图中，从滚动视图中删除 10 个开始视频详细信息......当用户滚动到开始我将获取 10 个以前的视频并重复相同的内容。
在这里，我想确保滚动必须平滑并且不想在滚动视图中有闪烁。有人可以建议使用更好的滚动视图编码来满足我的要求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T10:23:00.890

如果您的代码包含`scroll.pagingEnabled = YES;`Then 请删除这部分代码。它肯定会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:37:57.463

如果您以网格视图的形式呈现，我建议您看一下[AQGridView](https://github.com/AlanQuatermain/AQGridView)。该网格视图支持单元格排队和出队，这正是您所描述的。

您还可以使用委托方法 scrollViewDidScroll: 来确定您是否在滚动视图的底部并触发下一组专辑的下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:44:03.817

这里真正的问题是设置电池回收。这并不难，我有几个例子，你可以看看，一个在[这里](https://github.com/jeremytregunna/JTrackView)。当然，您需要对该代码进行一些更改，它是在“页面”中设置的——任何时候屏幕上只有一个视图，我认为这不是您想要的。

除此之外...

您在这里的关键部分是以允许删除旧项目和添加新项目而不跳过项目的方式设计您的数据源。

例如，我可能采用的方法是在滚动视图中呈现“最后一个”项目，就像您希望滚动视图中的第一个项目一样。当用户到达最后一项时，将您的内容偏移设置为没有动画的滚动视图的开头（实际上还没有尝试过，所以可能会有您不想要的颠簸，测试并查看）。这将产生无限滚动的外观。您的数据源将在添加新项目时简单地覆盖旧索引，而不是添加到例如数组的末尾。

# objective-c - 从文件系统或 URL 解析 iPhone 的 Objective-C 中的 m3u 文件

> ID：10914330
> 
> 赞同：4
> 
> 时间：2012-06-06T12:34:34.303
> 
> 标签：objective-c, cocoa-touch

下面的示例应该从 m3u 播放列表中获取一个链接并将其添加到 anArray。（所以我会得到`NSArray(NSMutableArray)`其中的某些链接）

```
NSString *fileContents = [NSString stringWithContentsOfFile:@"myfile.m3u" encoding:NSUTF8StringEncoding error:NULL];
NSArray *lines = [fileContents componentsSeparatedByString:@"\n"];
NSLog (@"%@",lines); 
```

我在 NSLog 消息中一直有 (null)。一直以来，当我尝试使用 NSLog 或 if/else 语句来检查数组中是否存在链接时，它都会给我其中的空对象。

之后我认为问题出在 m3u 类型中，我尝试更改 txt 中的类型并阅读。（对于那些不知道的人，M3U 只是 UTF-8 编码的文本，更改类型应该会给出结果）然后我尝试了 .txt 文件，但它也不起作用。所以有它的代码。

```
//Check if there is my file
NSString *addPath = [[NSBundle mainBundle]  pathForResource:@"somefile" ofType:@"m3u" ];
if ([fileMgr fileExistsAtPath:addPath] ) {
    NSLog(@"Yes.We see the file");
}
else {
    NSLog(@"Nope there is no file");
}
//Rename
NSString *path1 = addPath;
NSString *theNewFilename = [path1 stringByReplacingOccurrencesOfString:@"m3u" withString:@"txt"];
NSLog(@"Renamed file adress is %@", theNewFilename); 

//Check if there is our renamed file(file manager was allocated before) 
NSString *addPath1 = [[NSBundle mainBundle]  pathForResource:@"somefile" ofType:@"txt" ];
if ([fileMgr fileExistsAtPath:addPath1] ) {
    NSLog(@"Yes we had the renamed file");
}
else {
    NSLog(@"No we don't");
} 
```

检查是否有 m3u 文件工作正常。我也有重命名文件的地址。但是当它检查是否有重命名文件时，没有文件（NSLog 中为空）。毕竟这些东西，并且没有任何希望到达我的目的地，我试图逐行读取 txt 文件，以 /n 分隔，其中包含 5 个链接。

```
NSString *fileContents1 = [NSString stringWithContentsOfFile:@"myfile.txt" encoding:NSUTF8StringEncoding error:NULL];
NSArray *lines1 = [fileContents1 componentsSeparatedByString:@"\n"];
NSLog (@"%@",fileContents1);
NSLog (@"%@",lines1); 
```

两条消息都是 NULL 我试图在 -(IBAction)fileRead { } 中制作的所有这些东西都链接到按钮（是的，我每次都按下按钮来检查我的 NSLog）程序在 iPhone 模拟器中进行了检查。如果有人说有什么麻烦会很高兴。另外，如果有更简单的方法可以使用 url 进行此操作。（用 NSUrl 试了几次，结果只有 null ）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:45:35.457

仅仅因为您更改了路径并不意味着您已经重命名/移动/复制了一个项目，路径只是一个字符串。使用`NSFileManager`方法如

`– moveItemAtURL:toURL:error:`或者

`– moveItemAtPath:toPath:error:`.

此外，NSString 不关心扩展名，因此将 m3u 文件读取到 NSString 是完全安全的，无需重命名。

```
NSString *addPath = [[NSBundle mainBundle]  pathForResource:@"somefile" ofType:@"m3u" ];
if ([fileMgr fileExistsAtPath:addPath] ) {
    NSLog(@"Yes.We see the file");
    NSString *fileContents1 = [NSString stringWithContentsOfFile:addPath encoding:NSUTF8StringEncoding error:NULL];
    NSArray *lines1 = [fileContents1 componentsSeparatedByString:@"\n"];
    NSLog (@"%@",fileContents1);
    NSLog (@"%@",lines1);
}
else {
    NSLog(@"Nope there is no file");
} 
```

# ios - 学习如何制作更好看的 iPhone 应用程序的好方法是什么？

> ID：10914334
> 
> 赞同：4
> 
> 时间：2012-06-06T12:34:57.993
> 
> 标签：ios, user-interface

因此，我使用内置 SDK 控件构建了一个 iPhone 应用程序，只是想知道如何制作更好看的应用程序，例如[http://pttrns.com/上显示的应用程序](http://pttrns.com/)

书籍或教程的方向以及任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:48:35.670

看看[Scoutzie](http://www.scoutzie.com/)。这是一个寻找移动设计师和设计理念的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:37:42.277

学习图形设计的艺术，构建您的图像资产，并将它们拼接到您的视图中。您可以通过多种方式做到这一点，其中最重要的是自定义绘图、图像视图、图案颜色……或者，您可以像我们大多数人一样聘请设计师。:)

重点是，好的 iPhone 界面通常是由设计师或具有设计经验的开发人员设计的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:41:17.263

查看好的应用程序并尝试重新创建体验。当 UI Layout 等好的时候，真的没有什么比学习如何创建复杂的动画和学习 Photoshop 了！

此外，苹果在 UI 主题中有几个指南。在开发中心环顾四周，有很多发现！

# jquery - 关于从静态方法 asp.net 4.0 访问页面控制的问题

> ID：10914336
> 
> 赞同：0
> 
> 时间：2012-06-06T12:35:06.983
> 
> 标签：jquery, asp.net

我通过 jquery 调用我的服务器端方法，并尝试从该方法访问文本框数据。这是我的示例代码

```
 [WebMethod]
    public static PayPalCart CreatePayPalFields()
    {
        Page CurPage = HttpContext.Current.Handler as Page;
        string tt = ((TextBox)CurPage.FindControl("txtBillAddress1")).Text; 
    } 
```

我从静态方法访问控件时遇到错误，错误消息是**对象引用未设置为对象的实例**。然后我搜索谷歌以找到更好的解决方案，然后我得到了一个扩展方法，它将遍历控件集合并在找到时返回控件。代码就像

```
public static T BetterFindControl<T>(this Control root, string id) where T : Control
{
    if (root != null)
    {
        if (root.ID == id) return root as T;

        var foundControl = (T)root.FindControl(id);
        if (foundControl != null) return foundControl;

        foreach (Control childControl in root.Controls)
        {
            foundControl = (T)BetterFindControl<T>(childControl, id);
            if (foundControl != null) return foundControl as T;

        }
    }

    return null;
} 
```

我也从静态方法中使用上述例程，例如

```
 [WebMethod]
    public static PayPalCart CreatePayPalFields()
    {
        Page CurPage = HttpContext.Current.Handler as Page;
        string sData = CurPage.BetterFindControl<TextBox>("txtDeliveryFName").Text; 
    } 
```

但仍然没有运气......仍然从静态方法访问控件时遇到相同的错误，并发现**CurPage**没有控制权。请建议我该怎么做。告诉我从静态方法访问控制的出路，因为方法必须是静态的原因我通过 jquery 调用该方法............需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:43:39.323

您无法从此 ajax 调用访问该页面，这很简单，因为发生此调用时该页面不存在于任何地方。

您可以做的是通过 ajax 调用发送您喜欢检查的参数，并使用 javascript 获取它们并发送它们。

多说几句关于 call 的作用。

```
string sData = CurPage.BetterFindControl<TextBox>("txtDeliveryFName").Text; 
```

这是对 .Form 发布数据的最终调用，以读取由 id 为 txtDeliveryFName 的控件发送的内容。在您的 ajax 调用中，没有发布整个页面，另一方面，您可以控制哪些数据将通过 javascript 发布到 webmethod。

# wpf - 资源字典没有延迟加载

> ID：10914341
> 
> 赞同：3
> 
> 时间：2012-06-06T12:35:20.990
> 
> 标签：wpf, xaml, initialization, lazy-loading, eager-loading

WPF / XAML 中是否有可能急切加载资源字典？我在我的 XAML 中定义了一个资源字典：

```
<s:SurfaceWindow.Resources>
    <local:SomeConverter x:Key="SomeConverter"/>
    <local:SomeView x:Key="SomeView" />
</s:SurfaceWindow.Resources> 
```

在加载事件发生之前我需要这些资源 - 有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:46:36.780

如果您在创建控件之前放置 ResourceDictionaries，那么您应该没问题。如果您真的很渴望，那么将您的资源放入 App.xaml 文件中

# themes - 如何在 Magento 中激活新的 adminhtml 主题？

> ID：10914343
> 
> 赞同：4
> 
> 时间：2012-06-06T12:35:32.497
> 
> 标签：themes, magento

我在 Magento 下开发了一个新模块，效果很好。我设计了一个新的 adminhtml 主题，但是我找不到从哪里激活它。我浏览了所有后端，发现只有 [design change] 改变了商店主题..

有没有办法告诉 Magento 使用我的主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:51:25.907

在模块的**etc**文件夹下的**config.xml**中，添加以下内容

 **```
 <stores>
        <admin>
            <design>
                <package>
                    <name>NameSpace</name>
                </package>
                <theme>
                    <default>theme</default>
                </theme>
            </design>
        </admin>
    </stores> 
```

假设您在**app/design/adminhtml/NameSpace/theme下创建了主题****

# iphone - 获取 iPhone 应用程序的磁盘使用情况

> ID：10914347
> 
> 赞同：0
> 
> 时间：2012-06-06T12:35:39.023
> 
> 标签：iphone, disk, diskspace

我正在尝试查找我的 iPhone 应用程序的磁盘使用情况。所以我试图找到我的应用程序主目录的大小。但是，当我与 iPhone 4S 设置->使用选项卡中显示的相同应用程序的使用情况进行比较时，它并没有给出正确的值。我使用了以下几行代码。甘蔗有人说我是否在任何地方出错了，或者任何人都可以帮助我找到相同的地方。

NSString *path = NSHomeDirectory(); NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfItemAtPath:path error: &error]; NSNumber *appDiskSpaceInBytes = [字典 objectForKey: NSFileSize];

float appDiskSpace = ([appDiskSpaceInBytes floatValue]/1024.0);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:41:56.237

使用 1000 而不是 1024。然后它将与 Usage 显示的内容同步。

# python - 在 Python 中更好地定位小部件按钮和输入框

> ID：10914349
> 
> 赞同：1
> 
> 时间：2012-06-06T12:35:48.353
> 
> 标签：python, tkinter

好的，所以我使用 Python 的 Tkinter 模块，我想要 5 个输入框，每个输入框都是一个变量，组合成一个变量，并用作 Office 自动安装程序的序列号（在其他软件中，用于中型办公室的安装脚本）。

除了让您了解内容之外，这些都不是真正相关的。

我试图将所有的输入框放在一个小空间中，最好是一列或两列（我目前使用 4-6 列，我可以检查）。

Tkinter 有可能吗？

到目前为止，这是脚本这一部分的代码：

```
Label(app, text="Office Serial Key").grid(row=3, column=0)
entries = ["e1", "e2", "e3", "e4", "e5"]
colnum = 1
for item in entries:
    item = Entry(app, width=10)
    item.grid(row=3, column=colnum)
    colnum = colnum + 1 
```

我想看起来更专业/像 Microsoft 安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:40:36.353

您可以做很多事情来完全按照您想要的方式进行布局。我认为完成这样的事情的方法是将您的`Label`+ `Entry`s 放入另一个`Frame`中，然后当您对其进行网格化时`Frame`，使用`columnspan`关键字设置它应该相对于“ `app`”中的其他小部件的宽度。

( [http://effbot.org/tkinterbook/grid.htm](http://effbot.org/tkinterbook/grid.htm) )

这是一个愚蠢的例子：

```
import Tkinter as tk

root=tk.Tk()

for i in range(7):
    tk.Label(root,text='%d'%i,width=12).grid(row=0,column=i)

myframe=tk.Frame(root)

tk.Label(myframe, text="Office Serial Key").grid(row=0, column=0)
entries = ["e1", "e2", "e3", "e4", "e5"]
for column,item in enumerate(entries,start=1):
    item = tk.Entry(myframe, width=10)
    item.grid(row=0, column=column)

myframe.grid(row=1,column=0,columnspan=3)
root.mainloop() 
```

# javascript - Jquery timepicker 插件无法正常工作

> ID：10914351
> 
> 赞同：0
> 
> 时间：2012-06-06T12:35:56.957
> 
> 标签：javascript, jquery, asp.net-mvc-3, datetimepicker, timepicker

我的视图中有这段代码（JS）：

```
$("#mydivelement").timepicker(); 
```

它不仅显示时间选择器，还显示日期时间选择器。如果重要，我在布局页面中设置了日期选择器默认值：

```
$.datepicker.setDefaults({
        dateFormat: 'dd/mm/yy',
        yearRange: '1930:2012',
        changeYear: true,
        changeMonth: true,
        autoSize: true,
        showAnim: 'slideDown',
        firstDay: 1
    }); 
```

更新：使用的库-jquery-ui-timepicker-addon.js

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T13:06:13.533

你缺少添加`{}`到里面`.timepicker()`

**jQuery**

```
$(function() {
    $( "#mydivelement" ).datepicker({
     dateFormat: 'dd/mm/yy',
        yearRange: '1930:2012',
        changeYear: true,
        changeMonth: true,
        autoSize: true,
        showAnim: 'slideDown',
        firstDay: 1
    });
    $('#timepicker').timepicker({}); // it shows only timepicker without datepicker
}); 
```

[jsFiddle 示例](http://jsfiddle.net/f9xc7/3/)

# json - 如何在通过 actionscript 上传文件后检索 JSON 结果

> ID：10914363
> 
> 赞同：1
> 
> 时间：2012-06-06T12:36:38.017
> 
> 标签：json, web-services, actionscript-3, file-upload, actionscript

我知道如何使用动作脚本上传文件

有关详细信息，请参阅[通过 actionscript 3.0 使用 HTTP POST 上传 zip 文件](https://stackoverflow.com/questions/10772616/upload-a-zip-file-using-http-post-via-actionscript-3-0)。

此处复制的代码：

```
var urlRequest:URLRequest = new URLRequest(PUBLISH_ZIP_FILE_URL);
// set to method=POST
urlRequest.method = URLRequestMethod.POST;

var params:URLVariables = new URLVariables();

params['data[File][title]'] = 'Title1';
params['data[File][description]'] = 'desc';

// this is where we include those non file params and data
urlRequest.data = params;

// now we upload the file
// this is how we set the form field expected for the file upload
file.upload(urlRequest, "data[File][filename]"); 
```

负责接受文件上传的 Web 应用程序将返回一个 JSON 字符串，其中包含文件大小、ID 号等详细信息。

如何在我的动作脚本中访问此 JSON 结果字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:58:29.687

从[`FileReference`文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#event%3auploadCompleteData)中，您需要为事件添加一个处理程序到您的`FileReference`实例`uploadCompleteData`：

```
import flash.events.*;

// now we upload the file
// this is how we set the form field expected for the file upload
file.addEventListener(DataEvent.UPLOAD_COMPLETE_DATA, uploadCompleteDataHandler);
file.upload(urlRequest, "data[File][filename]");

private function uploadCompleteDataHandler(event:DataEvent):void  
{
     trace("uploadCompleteData data: " + event.data);
} 
```

# c++ - 原始类型比 C++ 中的用户类型慢？

> ID：10914367
> 
> 赞同：3
> 
> 时间：2012-06-06T12:36:49.137
> 
> 标签：c++, performance, profiling, primitive-types, usertype

我很好奇并做了一个小基准测试来确定原始类型（例如`int`or`float`和用户类型）之间的性能差异。

我创建了一个模板类`Var`，创建了一些内联算术运算符。测试包括为基元和`Var`向量循环这个循环：

```
for (unsigned i = 0; i < 1000; ++i) {
    in1[i] = i;
    in2[i] = -i;
    out[i] = (i % 2) ? in1[i] + in2[i] : in2[i] - in1[i];
} 
```

我对结果感到非常惊讶，事实证明我的`Var`课程大部分时间都更快，int 平均该循环在课程中花费了大约 5700 纳秒。在 3000 次运行中，int 快 11 倍，而`Var`后者快 2989 倍。与 类似的结果`float`，其中`Var`15100 nsec 比 floatin 2991 的运行快 15100 纳秒。

原始类型不应该更快吗？

编辑：编译器是一个相当古老的 mingw 4.4.0，构建选项是 QtCreator 的默认值，没有优化：

```
qmake call: qmake.exe C:\...\untitled15.pro -r -spec win32-g++ "CONFIG+=release" 
```

好的，发布完整源代码，平台是 64 位 Win7，4 GB DDR2-800，Core2Duo@3Ghz

```
#include <QTextStream>
#include <QVector>
#include <QElapsedTimer>

template<typename T>
class Var{
public:
    Var() {}
    Var(T val) : var(val) {}

    inline T operator+(Var& other)
    {
        return var + other.value();
    }

    inline T operator-(Var& other)
    {
        return var - other.value();
    }

    inline T operator+(T& other)
    {
        return var + other;
    }

    inline T operator-(T& other)
    {
        return var - other;
    }

    inline void operator=(T& other)
    {
        var = other;
    }

    inline T& value()
    {
        return var;
    }

private:
    T var;
};

int main()
{
    QTextStream cout(stdout);
    QElapsedTimer timer;

    unsigned count = 1000000;

    QVector<double> pin1(count), pin2(count), pout(count);
    QVector<Var<double> > vin1(count), vin2(count), vout(count);

    unsigned t1, t2, pAcc = 0, vAcc = 0, repeat = 10, pcount = 0, vcount = 0, ecount = 0;
    for (int cc = 0; cc < 5; ++cc)
    {
        for (unsigned c = 0; c < repeat; ++c)
        {
            timer.restart();
            for (unsigned i = 0; i < count; ++i)
            {
                pin1[i] = i;
                pin2[i] = -i;
                pout[i] = (i % 2) ? pin1[i] + pin2[i] : pin2[i] - pin1[i];
            }
            t1 = timer.nsecsElapsed();
            cout << t1 << endl;

            timer.restart();
            for (unsigned i = 0; i < count; ++i)
            {
                vin1[i] = i;
                vin2[i] = -i;
                vout[i] = (i % 2) ? vin1[i] + vin2[i] : vin2[i] - vin1[i];
            }
            t2 = timer.nsecsElapsed();
            cout << t2 << endl;;
            pAcc += t1;
            vAcc += t2;
        }

        pAcc /= repeat;
        vAcc /= repeat;
        if (pAcc < vAcc) {
            cout << "primitive was faster" << endl;
            pcount++;
        }
        else if (pAcc > vAcc) {
            cout << "var was faster" << endl;
            vcount++;
        }
        else {
            cout << "amazingly, both are equally fast" << endl;
            ecount++;
        }

        cout << "Average for primitive type is " << pAcc << ", average for Var is " << vAcc << endl;

    }
    cout << "int was faster " << pcount << " times, var was faster " << vcount << " times, equal " << ecount << " times, " << pcount + vcount + ecount << " times ran total" << endl;
} 
```

相对而言，使用浮点数的 Var 类比浮点数快 6-7%，使用整数大约 3%。

我还使用向量长度为​​ 10 000 000 而不是原来的 1000 进行了测试，结果仍然一致并且有利于该类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:37:01.997

`QVector`替换为`std::vector`, 在优化`-O2`级别，GCC 为这两种类型生成的代码完全相同，指令对指令。

如果没有替换，生成的代码会有所不同，但这并不奇怪，考虑到`QtVector`原始类型和非原始类型的实现方式不同（查找`QTypeInfo<T>::isComplex`in `qvector.h`）。

**更新**看起来`isComplex`不影响linner oop，即测量部分。这两种类型的循环代码仍然不同，尽管差别很小。看起来差异是由于 GCC 造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T16:11:41.317

我对 QVector 和 float* 的运行时间和内存分配进行了基准测试，两者之间的差异很小

# arrays - 在不丢失索引的情况下对关联数组进行排序

> ID：10914370
> 
> 赞同：0
> 
> 时间：2012-06-06T12:37:06.497
> 
> 标签：arrays, actionscript-3

我有以下数组：

```
packages    Array (@24ff99c1)   
                [99767] Array (@24ff9809)   
                    forceUpload false   
                    length  0   
                    name    "testdocument.indd" 
                    packageId   "99767" 
                    progressStatus  "allowed"   
                    singleItemSize  50582294 [0x303d316]    
                    singleItemUploadedSoFar 17296352 [0x107ebe0]    
                    sortIndex   1338984578952 [0x137c1b33f88]   
                    status  "upload busy"   
                    totalSize   431203849 [0x19b3a609]  
                    uploadedAtm "37015918"  
                    uploadedSoFar   "19719566"  
                [94854] Array (@24ff7fd9)   
                    forceUpload false   
                    length  0   
                    name    "testdocument.indd" 
                    packageId   "16842" 
                    progressStatus  "allowed"   
                    singleItemSize  6344704 [0x60d000]  
                    singleItemUploadedSoFar 6344704 [0x60d000]  
                    sortIndex   1338984606428 [0x137c1b3aadc]   
                    status  "upload busy"   
                    totalSize   862407698 [0x33674c12]  
                    uploadedAtm "6344704"   
                    uploadedSoFar   ""  
                length  2 
```

现在我想根据 sortIndex 对其进行排序。我这样尝试过：

```
packageData.data.packages.sortOn("sortIndex"); 
```

它已排序，但问题是我的索引更改为 0, 1, 2, ... 如下所示：

```
packages    Array (@24ff99c1)   
                [0] Array (@24ff9809)   
                    forceUpload false   
                    length  0   
                    name    "testdocument.indd" 
                    packageId   "99767" 
                    progressStatus  "allowed"   
                    singleItemSize  50582294 [0x303d316]    
                    singleItemUploadedSoFar 17296352 [0x107ebe0]    
                    sortIndex   1338984578952 [0x137c1b33f88]   
                    status  "upload busy"   
                    totalSize   431203849 [0x19b3a609]  
                    uploadedAtm "37015918"  
                    uploadedSoFar   "19719566"  
                [1] Array (@24ff7fd9)   
                    forceUpload false   
                    length  0   
                    name    "testdocument.indd" 
                    packageId   "16842" 
                    progressStatus  "allowed"   
                    singleItemSize  6344704 [0x60d000]  
                    singleItemUploadedSoFar 6344704 [0x60d000]  
                    sortIndex   1338984606428 [0x137c1b3aadc]   
                    status  "upload busy"   
                    totalSize   862407698 [0x33674c12]  
                    uploadedAtm "6344704"   
                    uploadedSoFar   ""  
                length  2 
```

如何在不丢失索引的情况下对数组进行排序？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:51:15.510

你不能。排序改变数组的顺序。您唯一的选择是添加一个包含您希望它拥有的索引的数组项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:18:04.937

这里的问题是您的数组键是整数。
因为它们是 int ，所以它充当常规数组而不是关联数组。
当您执行 packages[99767] 时，您正在查看索引 99767 处的元素。
通过对数组进行排序，它将从 0 开始您的索引
。您需要更改的是将它们转换为字符串的键。

# magento - 将 magento log_url_info 表链接到产品

> ID：10914374
> 
> 赞同：0
> 
> 时间：2012-06-06T12:37:17.977
> 
> 标签：magento

我想为在我的商店中查看的商品创建一份报告。我有相关的报告编写和 SQL 技能，但对 log_url_info 表中的数据有点困惑。

我了解 url 字段中具有值的条目（例如“http://www.mystore.com/catalog/product/view/id/526”）表明访问了 ID 为 526 的产品，但看不到简单的方法将此数据链接回相关产品表中的单个产品记录，特别是考虑到也存储在此表中的附加数据。

有人有什么想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:56:37.340

拉出`id`网址，然后加载相应的产品。

```
if (preg_match('%/catalog/product/view/id/([0-9]+)%', $url, $match)) {
    $id = $match[1];
    $product = Mage::getModel('catalog/product')->load($id);
    echo $product->getName(), ', ', $product->getSku(), PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T21:10:53.307

Magento 中的 URL 方案基于： `[magento-url]/module/controller/action/arg1/val1/arg2/val2/arg3/val3/.../argn/valn`

如果向客户展示产品，他会使用`/catalog/product/view/`参数访问`id=[product-id]`（或者，以 Magento 的 URL 处理方式）`/id/[product-id]`。

因此，您可以解析`log_url_visitor`表中的 URL，或者编写一个小 Magento 模块来跟踪对产品视图页面的访问并将其保护在某个地方。

# objective-c - 使用 UTF-8 时字符错误的 NSString

> ID：10914375
> 
> 赞同：0
> 
> 时间：2012-06-06T12:37:22.103
> 
> 标签：objective-c, ios, encoding, utf-8, nsstring

我从 UTF-8 编码的 XML 文件中获取数据，并且我想显示 UITableView 中的每个元素。我希望我的单元格具有相同的大小并显示具有最多数据的前 2 个文本行，因此我尝试删除回车符。

在我的 cellForRow 方法中，我改变了这个：

```
[[myCell textLabel] setText:data]; 
```

经过 ：

```
[[myCell textLabel] setText:[self correctData:data]]; 
```

这是我的正确数据方法：

```
- (NSString *) correctData : (NSString *) str
{
    NSMutableString *res = [NSMutableString stringWithFormat:@""];
    for(int i = 0 ; i < [str length] ; i++)
    {
        char car = [str characterAtIndex:i];
        if(car != 10 && car != 13) 
           [res appendString:[NSString stringWithFormat:@"%c",car]];
    }
    return res;
} 
```

这正确地删除了回车，但它也改变了 UTF-8 字符。例如，一些初始字符串 (str) ：

> Diplômé(e) d'Etat

有了这个功能，它就变成了：

> DiplÙmÈ(e) d'Etat

我该怎么办 ？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:49:14.430

`NSString`适用于`unichar`存储在 16 位上而`char`只有 8 位长的字符。将 an 转换`unichar`为 a`char`将更改所有具有上述代码点的字符`U+00FF`。

您可以通过替换`char`和`unichar`来解决此`%c`问题`%C`。

**编辑：**但这并不是很有效。您最好使用正则表达式一次替换所有换行符：

```
str = [str stringByReplacingOccurrencesOfString:@"[\r\n]+"
                                     withString:@""
                                        options:NSRegularExpressionSearch
                                           range:NSMakeRange(0, str.length)]; 
```

# jquery-mobile - Jquery mobile：添加元素后页面大小未刷新

> ID：10914378
> 
> 赞同：2
> 
> 时间：2012-06-06T12:37:27.027
> 
> 标签：jquery-mobile

所以，我正在努力解决的问题是，在我的 jquery 移动页面的内容部分添加元素后，我“松散”了页面的某些部分。然后我无法向下滚动查看页面底部。

到目前为止，我已经尝试了几种解决方案。

```
$('#<pageId>').trigger('create'); after adding the elements. 
```

并放置

```
$.support.touchOverflow = true;
$.mobile.touchOverflowEnabled = true; 
```

在 pageinit 事件中。

有谁知道我在这里想念什么？

问候

编辑：

我也有显示/隐藏一些 div 的按钮。单击这些会更新页面大小，然后我可以一直向下滚动。

在android模拟器/设备上使用phonegap会遇到问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:39:18.823

所以，出于某种原因，这对于 android 来说是开箱即用的。但我想出了另一个解决方案。

将元素添加到 DOM 后，我将主体大小设置为包含所有元素的 div。

```
$('body').css({'height' : $('#<div id>').height()}); 
```

希望有人节省时间:-)

# tsql - 比较表中的数据

> ID：10914384
> 
> 赞同：1
> 
> 时间：2012-06-06T12:37:42.400
> 
> 标签：tsql, datetime, sql-server-2008-r2

我有一张包含与紧急事件相关的数据的表格。我希望比较有多少事件重叠（按时间）。我知道数据库本质上是无序的，但我有事件的开始（和结束）时间，所以我可以按时间对记录进行排序。

我认为最终结果将是一个包含每条记录和一个额外字段的结果集，该字段指示它是否与任何事件重叠（0 表示没有事件，1 表示一个重叠，2 表示两个重叠......）。从历史上看，重叠的数量是有限的（6 是当前的最大值），但可能会有更多。

目前，我在 Excel 中进行此类分析，使用辅助列将当前记录与以前的记录进行比较，以确定是否存在重叠（或重叠数量）并且工作正常，但似乎我应该能够完成这个严格在 SQL 内。

编辑：这是来自 Excel 的示例，但数据保存在单个 SQL 表中。我拥有数据库的管理员权限，因此我几乎可以实施任何解决方案——除了更改数据库结构（它是一个 COTS 系统）。我已经包含了重叠列的公式。此外，我在 2 个重叠处停止了示例公式，但是当我实现答案时，我会考虑更多。

```
Incident    Start               End          Overlap    Overlap Formula
    1   2012-01-01 07:00    2012-01-01 08:00        
    2   2012-01-02 07:00    2012-01-02 08:00    0   =IF(C2>B3,1,0)
    3   2012-01-02 07:30    2012-01-02 08:30    1   =IF(C3>B4,IF(C2>B4,2,1),0)
    4   2012-01-03 07:00    2012-01-03 08:00    0   =IF(C4>B5,IF(C3>B5,2,1),0)
    5   2012-01-04 07:00    2012-01-04 08:00    0   =IF(C5>B6,IF(C4>B6,2,1),0)
    6   2012-01-04 07:30    2012-01-04 08:30    1   =IF(C6>B7,IF(C5>B7,2,1),0)
    7   2012-01-04 07:45    2012-01-04 08:45    2   =IF(C7>B8,IF(C6>B8,2,1),0)
    8   2012-01-04 08:45    2012-01-04 09:45    0   =IF(C8>B9,IF(C7>B9,2,1),0)
    9   2012-01-05 07:00    2012-01-05 08:00    0   =IF(C9>B10,IF(C8>B10,2,1),0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:01:18.393

我的英语很差，所以我不完全理解你的问题

如果这是我的想法，您可以在 sql [http://www.w3schools.com/sql/sql_groupby.asp中使用 group by](http://www.w3schools.com/sql/sql_groupby.asp)

```
select incident, count(*)
from your table
group by incident 
```

此外，如果您有日期，则可以将此查询指定为日期范围

```
select incident, count(*)
from your table
where startDate >= @startDate  and endDate <= @finishDate
group by incident 
```

仅当您想在两个日期之间执行此操作时

对不起英语不好，如果这不是你想要的，对不起！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:07:05.903

如果我理解了您的问题，并假设您的事件有一个简单的表，其中包含`Id`, `StartDate`，`EndDate`那么您可以使用带有 的子查询找到每个事件的重叠数`APPLY`，例如：

```
SELECT I.Id, O.Overlaps
FROM Incidents I
CROSS APPLY (
    SELECT COUNT(*) AS Overlaps
    FROM Incidents C
    WHERE C.Id <> I.Id
    AND  (C.StartDate BETWEEN I.StartDate AND I.EndDate OR
          C.EndDate BETWEEN I.StartDate AND I.EndDate)
) O 
```

# jquery - jQuery 设置样式

> ID：10914387
> 
> 赞同：0
> 
> 时间：2012-06-06T12:37:57.080
> 
> 标签：jquery, html, css

我对以下 jQuery 脚本有疑问：

```
$('span').click(function(){
    var info = $(this).attr("rel");
    var reference = this;
    if ($(this).hasClass('listed')) {
        // alert('follow');
        $(".unlisted").addClass("unlisted-bw");
        $(".special").addClass("special-bw");
    }

    if ($(this).hasClass('special')) {
        // alert('follow');
        $(".unlisted").addClass("unlisted-bw");
        $(".listed").addClass("listed-bw");
    }   

    if ($(this).hasClass('unlisted')) {
        // alert('follow');
        $(".listed").addClass("listed-bw");
        $(".special").addClass("special-bw");
    }            
}); 
```

我希望它的工作方式是，如果我单击一个跨度（`special`或`listed`）`unlisted`，其他跨度将处于非活动状态。我怎么能用 jQuery 做到这一点？

我创建了这个脚本，但无法正常工作。 [http://jsfiddle.net/3nsrd/](http://jsfiddle.net/3nsrd/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:43:58.847

您可以使用 选择所有其他跨度`.siblings()`。这是一个例子：

```
$('span').click(function(e) {   
    $(this).removeClass('special-bw')
            .siblings("span")
            .addClass('special-bw');
});​ 
```

**演示[http://jsfiddle.net/3nsrd/4/](http://jsfiddle.net/3nsrd/4/)**

这不包括添加它们各自的悬停类，这可以通过`$.each`对每个兄弟姐妹执行 a 并使用它们的标题（或其他属性）来完成

```
$('span').click(function(e) {
    //get the name of the selected span
    selectedSpan = $(this).attr("title");

    //remove class of selected span -bw (i.e. special-bw);
    $(this).removeClass(selectedSpan+'-bw')
           .siblings("span").each(function(){
            //foreach of the other spans, add their name + bw
           $(this).addClass($(this).attr("title")+'-bw');
        });
});​ 
```

**演示：http: [//jsfiddle.net/3nsrd/6/](http://jsfiddle.net/3nsrd/6/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:50:11.037

我已经整理了一些快速简单的 javascript，它可以满足您的需求，我相信：

```
$(document).ready(function() { //When the DOM is ready
    $('span').on('click', function() {
        $this = $(this);
        if (!$this.hasClass("disabled")) {
            $this.siblings().addClass("disabled");
        }
    });
});​ 
```

基本上，我向兄弟姐妹添加了一个禁用的类，然后可以对其进行样式设置：

```
.disabled {
    background:#ccc;
    cursor:default;
} 
```

在行动中看到它：http: [//jsfiddle.net/uBSX6/](http://jsfiddle.net/uBSX6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:43:28.170

我认为这个小提琴将满足您的需求：

[http://jsfiddle.net/3nsrd/3/](http://jsfiddle.net/3nsrd/3/)

```
$('span').click(function(){
    var parent = $(this).parent();

    var classes = ['listed', 'special', 'unlisted'];

    for (var i = 0; i < classes.length; i++) {
        if ($(this).hasClass(classes[i])) {
            for (var j = 0; j < classes.length; j++) {
                if (classes[j] != classes[i]) {
                    $(parent).find('.' + classes[j]).addClass(classes[j] + '-bw');
                }
            }
            $(this).removeClass(classes[i] + '-bw');
            break;
        }
    }          
});​ 
```

或者更短的版本没有嵌套循环：

```
$('span').click(function(){
    var parent = $(this).parent();

    var classes = ['listed', 'special', 'unlisted'];

    for (var i = 0; i < classes.length; i++) {
        if ($(this).hasClass(classes[i])) {
            $(parent).find(':not(.' + classes[i] + ')').each(function() {
                $(this).addClass($(this).prop('class') + '-bw');
            });
            $(this).removeClass(classes[i] + '-bw');
            break;
        }
    }          
});​ 
```

# iphone - UIStatusBar 与方向更改不一致

> ID：10914390
> 
> 赞同：0
> 
> 时间：2012-06-06T12:38:00.247
> 
> 标签：iphone, ios

我有一个单视图应用程序（从 iOS 模板创建，没什么特别的）

有1个按钮：

```
- (IBAction)buttonWasTapped:(id)sender {
    // Toggle status bar hidden property
    BOOL hidden = [[UIApplication sharedApplication] isStatusBarHidden];
    [[UIApplication sharedApplication] setStatusBarHidden:!hidden withAnimation:UIStatusBarAnimationFade];
} 
```

我首先加载应用程序。

![在此处输入图像描述](../Images/39c34f0a16760dfea0c73211190c0280.png)

然后按下按钮。

![在此处输入图像描述](../Images/8d40c4c2e4f5b5ba1f9e70124f1d8ffd.png)

**这可以。** 我可以在顶部的黑色空间周围工作。接下来再次点击按钮并旋转到横向。然后再次点击按钮。它应该看起来像这样。

![在此处输入图像描述](../Images/3ce478bca768e88092b72cf633a22410.png)

最后旋转回纵向并点击按钮。

![在此处输入图像描述](../Images/5a39056648598c76ee1438f39f920d20.png)

总而言之，问题是：

1.  隐藏状态栏
2.  交换方向（纵向或横向）
3.  显示状态栏
4.  现在状态栏覆盖了 UI

我做了一个非常[老套的解决方法](https://gist.github.com/ce4f0cbbc84494c9b586)，但我不喜欢它，我相信如果 Apple 解决它，它会坏掉。

*   有没有人见过这个？
*   有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:43:05.767

我遇到了类似的问题，我的修复是打开将旋转到方向我会重新显示栏，并将它隐藏在确实旋转到方向（或使用延迟时使用 performselector 再次隐藏它）发生在你身上的是，当设备旋转时，视图占用所有可用空间，它还将填充用于包含状态栏的空间

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // A workaround to stop the rotation filling up the status bar space
    // Show the status bar and then hide it straight after, (there is no flicker)
    if ([[UIApplication sharedApplication] isStatusBarHidden]) 
    {
        [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone];

        double delayInSeconds = 0.0;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];
        });
    }

    if (!_controlsHidden) [self resetFadeoutTimer];

    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:57:39.643

您是否使用 Xcode 的 Interface Builder（图形 xib 编辑器）通过搜索栏定义您的视图？如果是这样，在界面生成器中，选择视图并在右侧栏中，选择属性检查器（图标看起来像一个滑块）。在 Simulated Metrics 部分中，将 Status Bar 值设置为不为“None”，在本例中为 Gray 以模拟您的应用程序的外观。这将调整视图的大小以适应状态栏。

# android - 如何在我的 android 上获取 SQLite

> ID：10914393
> 
> 赞同：0
> 
> 时间：2012-06-06T12:38:09.960
> 
> 标签：android

我在我的 cmd 提示符和我的 adb shell 中。当我尝试运行 sqlite3 时，它会显示此错误。请帮忙..

```
cd /system/xbin/sqlite
sh: cd: /system/xbin/sqlite - No such file or directory
1|shell@android:/system/xbin # cd /system/xbin/sqlite3
cd /system/xbin/sqlite3
sh: cd: /system/xbin/sqlite3 - No such file or directory
1|shell@android:/system/xbin # 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:45:53.973

您不是在尝试“运行 sqlite3”。您正在尝试切换到一个目录——这就是该`cd`命令在 Linux 中的含义。

在模拟器上，`sqlite3`要从 运行命令`adb shell`，只需键入`sqlite3`，然后按`<Enter>`：

```
# sqlite3
SQLite version 3.7.4
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> 
```

请注意，该`sqlite3`命令在生产设备 AFAIK 上不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:49:22.900

在命令提示符下转到此路径或设置为类路径 F:\PROJECTS\ANDROID\android-sdk_r10-windows\android-sdk-windows\tools

然后输入

亚行外壳

你会看到

#

类型

# sqlite3 /data/data/com.yourpackage/databases/yourdbname

您将进入 sqlite 数据库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:52:51.090

您是否正在尝试为您正在开发的应用程序运行 sqlite 数据库？这是我在运行模拟器时使用的命令。

亚行外壳

cd 数据/数据/app_name/数据库

sqlite3 数据库名称

# java - Hudson 构建的 Eclipse Java 项目缺少 Tomcat 的库

> ID：10914394
> 
> 赞同：0
> 
> 时间：2012-06-06T12:38:13.993
> 
> 标签：java, tomcat, hudson, jenkins, war

我有一个 Java Eclipse 项目，一个为 Tomcat 构建的 webapp。在 Project-->Properties-->Java Build Path--> Libraries 下我添加了 Apache Tomcat 7.0 库，它们位于我的系统上的 C:\dev\apache-tomcat-7.0.14\lib ... 在我的系统上该项目运行良好。

但是：我想在远程服务器上使用 Hudson 和 Ant 构建项目。当 Hudson 发现 SVN 发生变化时，它会检查项目并尝试构建和打包它。遗憾的是，它无法从 Tomcat 中找到这些库，这些库位于远程服务器上的 C:\xampp\tomcat\lib 中。当我找到它们时，构建的 .war 文件被导出到另一台服务器上的另一个 tomcat，其中 tomcat 库放置在 /opt/tomcat/lib 中。

我该如何解决这个问题？

更新：来自我的 build.xml

```
<path id="Apache Tomcat v7.0 [Apache Tomcat v7.0].libraryclasspath">
    <pathelement location="../../apache-tomcat-7.0.14/lib/annotations-api.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/catalina-ant.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/catalina-ha.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/catalina-tribes.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/catalina.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/ecj-3.6.2.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/el-api.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/jasper-el.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/jasper.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/jsp-api.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/servlet-api.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/tomcat-api.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/tomcat-coyote.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/tomcat-dbcp.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/tomcat-i18n-es.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/tomcat-i18n-fr.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/tomcat-i18n-ja.jar"/>
    <pathelement location="../../apache-tomcat-7.0.14/lib/tomcat-util.jar"/>
</path> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:22:49.053

最后我这样做了：

我在本地系统、Hudson 系统和目标服务器系统上设置了环境变量 TOMCAT_HOME。使用以下构建脚本让我们在 Hudson 中的 ANT 正确编译代码，因此我的 .war 构建在 Hudson 服务器上。

```
<path id="Apache Tomcat v7.0 [Apache Tomcat v7.0].libraryclasspath">
    <pathelement location="${env.TOMCAT_HOME}/lib/annotations-api.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/catalina-ant.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/catalina-ha.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/catalina-tribes.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/catalina.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/ecj-3.6.2.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/el-api.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/jasper-el.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/jasper.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/jsp-api.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/servlet-api.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/tomcat-api.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/tomcat-coyote.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/tomcat-dbcp.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/tomcat-i18n-es.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/tomcat-i18n-fr.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/tomcat-i18n-ja.jar"/>
    <pathelement location="${env.TOMCAT_HOME}/lib/tomcat-util.jar"/>
</path> 
```

现在唯一缺少的是我使用 Hudson 的一些集成插件在我的目标系统上发布构建的工件（.war 文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:52:29.983

我想这只是一个路径问题（所以 ../../ 并不总是tomcat安装的父目录）。有几种方法可以解决这个问题，其中两种可以在这里找到：[Hudson dependencies](https://stackoverflow.com/questions/4430252/hudson-dependencies)

# gmail - 为什么从我的网络应用程序发送的所有邮件都被标记为垃圾邮件？

> ID：10914395
> 
> 赞同：0
> 
> 时间：2012-06-06T12:38:15.890
> 
> 标签：gmail, sendmail, spam, spf

我是网站[http://crowdculture.eu](http://crowdculture.eu)的开发人员，所有来自应用程序所在服务器的邮件都被标记为垃圾邮件。我正在使用 sendmail 从服务器发送电子邮件。

*   我已检查，域或我的服务器 IP 均不在任何类型的黑名单中
*   我已经完成并为域配置了一个 spf（发件人策略框架），以将我的服务器 IP 识别为原始发件人。(v=spf1 ip4:69.194.224.168/16 ~all) 我用可用的在线工具对其进行了测试，它说 SPF 工作正常 - [http://www.openspf.org/Why?id=user%40crowdculture.eu&ip =69.194.224.168&receiver=tools.bevhost.com:%2069.194.224.168/16](http://www.openspf.org/Why?id=user%40crowdculture.eu&ip=69.194.224.168&receiver=tools.bevhost.com:%2069.194.224.168/16) 仍然测试说我的电子邮件被拒绝：“域 crowdculture.eu 已授权 69.194.224.168 代表它发送邮件，所以邮件应该有被接受了。我们不可能说为什么它被拒绝了。

Gmail 有什么方法可以向我揭示为什么所有邮件仍被标记为垃圾邮件，以便至少我对接下来要尝试的内容有一些指导？

出于某种原因，反向 DNS 对我的服务器 IP 不起作用，域配置存储在不同的位置可能是因为 rDNS 吗？现在我正在等待访问配置 rDNS，但这对我来说是在黑暗中拍摄的，我更容易知道确切的原因。

这是原始垃圾邮件：

```
Delivered-To: janis.kesteris3@gmail.com
Received: by 10.236.24.231 with SMTP id x67csp74923yhx;
        Wed, 6 Jun 2012 02:20:14 -0700 (PDT)
Received: by 10.68.130.9 with SMTP id oa9mr57938587pbb.95.1338974413769;
        Wed, 06 Jun 2012 02:20:13 -0700 (PDT)
Return-Path: <user@crowdculture.eu>
Received: from crowdculture.eu ([69.194.224.168])
        by mx.google.com with ESMTPS id qn6si1844885pbc.225.2012.06.06.02.20.13
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 06 Jun 2012 02:20:13 -0700 (PDT)
Received-SPF: pass (google.com: domain of user@crowdculture.eu designates 69.194.224.168 as permitted sender) client-ip=69.194.224.168;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of user@crowdculture.eu designates 69.194.224.168 as permitted sender) smtp.mail=user@crowdculture.eu
Received: from crowdculture.eu (localhost [127.0.0.1])
    by crowdculture.eu (8.14.3/8.14.3/Debian-9.2ubuntu1) with ESMTP id q569LFcH003157
    for <janis.kesteris3@gmail.com>; Wed, 6 Jun 2012 09:21:15 GMT
Received: (from user@localhost)
    by crowdculture.eu (8.14.3/8.14.3/Submit) id q569LEJ9003156
    for janis.kesteris3@gmail.com; Wed, 6 Jun 2012 09:21:14 GMT
Date: Wed, 6 Jun 2012 09:21:14 GMT
From: user <user@crowdculture.eu>
Message-Id: <201206060921.q569LEJ9003156@crowdculture.eu>
Subject: test weee 111 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-28T15:07:16.597

似乎有一个中间人正在重建包以欺骗 UPS,com 作为来源（标题指示 IP 拒绝失败）然后通过 senseoffashion.com 退回邮件（除了尝试之外什么都不做获取您的 pii。最终产品电子邮件来自“UPSquantum.com”，这不是什么社会工程技巧。这封电子邮件应该很
容易过滤，但会成为本地管理员测试的绝佳测试用例他们的用户对此类攻击的认识。

# c# - NUnit 测试中属性的 MissingMethodException

> ID：10914396
> 
> 赞同：4
> 
> 时间：2012-06-06T12:38:23.430
> 
> 标签：c#, asp.net, .net, asp.net-mvc, nunit

我在测试时遇到问题。出于某种原因，我还没有弄清楚，我无法访问对象的公共属性。

我的班级如下：

```
public class FakeSMTPConnector : ISMTPConnector
{
    private bool _MailSent = false;
    public bool MailSent
    {
        get { return _MailSent; }
        set { _MailSent = value; }
    }

    private MailMessage _Message = null;
    public MailMessage Message
    {
        get { return _Message; }
        set { _Message = value; }
    }

    public FakeSMTPConnector()
    {

    }

    public void SendMail(MailMessage mail)
    {
        _MailSent = true;
        _Message = mail;
    }
} 
```

我正在使用它来模拟 SMTPConnection 并发送电子邮件。然后，处理电子邮件的类将使用此 SMTP 连接器来伪造传递。

我的测试如下：

```
[Test]
    public void EnviarMensagemContactoSentTest()
    {
        //arrange
        FakeSMTPConnector connector = new FakeSMTPConnector();
        EmailManager manager = new EmailManager(connector);

        //act
        manager.SendMessage("a@a.com", "abc", "def", "ghi");

        //assert
        Assert.IsNotNull(manager, "Manager instance not created");
        Assert.IsTrue(connector.MailSent, "Message not sent");
        Assert.IsNotNull(connector.Message);
    } 
```

当 Nunit 尝试访问 Message 属性的最后一个断言时，它会失败并出现一个没有多大意义的异常：

```
System.MissingMethodException : Method not found: 'System.Net.Mail.MailMessage Project.FakeSMTPConnector.get_Message()'. 
```

我做错什么了吗？我开始添加测试并对一个项目进行一些重构，所以很多这都是新的，可能是我在脑海中对一些真正基本的东西感到困惑......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:22:07.993

我知道这是旧的，但我有同样的问题。清洁解决方案然后进行重建对我不起作用。

从 GAC (C:\Windows\assembly) 中删除有问题的 dll 为我修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-08T21:37:10.683

重新启动 Visual Studio 为我做到了。

# c# - gridview_RowCommand 触发两次

> ID：10914397
> 
> 赞同：1
> 
> 时间：2012-06-06T12:38:23.903
> 
> 标签：c#, asp.net

我通过单击位于 gridview 上的按钮来执行数据库更新调用。它工作正常，可以正确更新数据库，但问题是当我刷新页面时，它再次执行相同的操作（数据库更新），即再次调用 Gridview 的 RowCommand 事件。

这是我的简短代码视图：

```
protected void gridview_RowCommand(object sender, GridViewCommandEventArgs e)
        {   
            if (e.CommandName == "lnkBtn1")
            {
                 userDetails obj=new userDetails();
                 bool flag=obj.Updatuser();
                 if (flag)
                 {
                    lblSucess.Visible = true;

                  //this will binds updated table to grid 
                    this.BindGrid();
                 }
                  else
                 {
                 lblError.visible=true;
                 }
            }
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:41:42.367

似乎有一个错误，有解决方法

[http://connect.microsoft.com/VisualStudio/feedback/details/102115/gridview-rowcommand-event-firing-twice](http://connect.microsoft.com/VisualStudio/feedback/details/102115/gridview-rowcommand-event-firing-twice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:54:41.293

我遇到了同样的问题。我通过在gridview 中使用Button 的OnClick 事件而不是RowCommand 来解决它。

访问以下链接： [GridView RowCommand 事件在 UpdatePanel 中触发两次](https://stackoverflow.com/questions/12364671/gridview-rowcommand-event-is-firing-twice-in-updatepanel/12366746#12366746)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:06:40.877

似乎每次加载页面时都会调用网格绑定函数....

# java - 读取文本文件将其存储到数组中

> ID：10914401
> 
> 赞同：0
> 
> 时间：2012-06-06T12:39:11.720
> 
> 标签：java

以下代码在 jgrasp 中编译，但它读出的是`You null null`. 我不知道如何让我的文本文件读取并存储到他们的数组中？

```
import java.io.*; 
import java.util.Scanner;
import java.util.Random;
public class InsultGenerator {

//randomly picks an adjective and a noun from a list of 10 random nouns and adjectives
//it then creates a random insult using one adjective and one noun
public static void main (String [] args)throws IOException
{
    String[]adjectives = new String [10];
    String[]nouns = new String [10];
    int size = readFileIntoArray (adjectives);
    int size2 = readFileIntoArray2 (nouns);
        String adjective = getAdjective(adjectives, size);
    String noun = getNoun(nouns, size2);
    printResults(adjectives, nouns, adjective, noun );
}

public static int readFileIntoArray (String[] adjectives)throws IOException
{  
    Scanner fileScan= new Scanner("adjectives.txt");
    int count = 0;  
    while (fileScan.hasNext()) 
    {
        adjectives[count]=fileScan.nextLine();
        count++;
    }
    return count;
}
public static int readFileIntoArray2(String[] nouns)throws IOException
{
    Scanner fileScan= new Scanner("nouns.txt");
    int count = 0;  

    while (fileScan.hasNextLine()) 
    {
        nouns[count]=fileScan.nextLine();
        count++;
    }   
    return count;
}
public static String getAdjective(String [] adjectives, int size)
{
    Random random = new Random();
    String adjective = "";
    int count=0;
    while (count < size)
    {
        adjective = adjectives[random.nextInt(count)]; 
        count ++;
    }
    return adjective;
}
public static String getNoun(String[] nouns, int size2)
{
    Random random = new Random();
    String noun = "";
    int count=0;
    while (count < size2)
    {
        noun = nouns[random.nextInt(count)]; 
        count ++;
    }
    return noun;
}
public static void printResults(String[] adjectives, String[] nouns, String adjective, String noun) 
{
    System.out.println("You " + adjective + " " + noun);
}
} 
```

老师希望我们使用 run 参数并将每个文本文件放在那里。所以我的运行参数说`adjectives.txt`，`nouns.txt`（每个文件都是 10 个名词或形容词的列表）。
我想将它们存储到数组中，然后让程序从每个列表中随机选择一个并发表声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:46:39.027

你应该使用`new Scanner(new File("adjectives.txt"))`. 此外，您需要使用命令参数 - 使用它们！写入文件名并返回字符串数组的方法：

```
public String[] readLines(String filename) throws IOException {
    String[] lines = new String[10];
    Scanner fileScan= new Scanner(new FIle(filename));
    // read lines
    // ...
    return lines;
} 
```

这样你就不需要有 2 个几乎相同的方法`readFileIntoArray(2)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:03:01.250

如另一个答案中所述，请为您的扫描仪使用正确的语法。

另外，检查您的 getNoun() 和 getAdjective() 方法。我不确定它们是否会产生预期的结果，如果确实如此，它们似乎有点复杂。尝试这样的事情：

```
public static String getString(String[] str) {      
    Random rand = new Random();

    String retVal = str[rand.nextInt(str.length)];

    return retVal;
} 
```

Java 数组的大小存储在实例变量`length`中。`nextInt(int upperBound)`还需要一个上限。

# sql - 实现此 SQL 查询的最简单方法是什么？

> ID：10914404
> 
> 赞同：2
> 
> 时间：2012-06-06T12:39:30.997
> 
> 标签：sql, sql-server

我有一个excel函数：=Max(0, -Min(A1-B1, C1-B1))

和 A1,B1,C1 是表中的 Value 列：

日期、键、值

现在假设日期无关紧要，A1,B1,C1 的密钥是 A,B,C

如何实现这个excel函数？我最初这样做的方式是我有两个连接（在同一行的不同列中获取所有值），但这似乎有点矫枉过正，必须有更聪明的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:46:01.317

您可能可以将其减少为一个连接，因为您只需要`B`以下`A`部分：

```
select  case 
        when min(Value - isnull(yt2.Value,0)) > 0 then 0
        else -min(Value - isnull(yt2.Value,0))
        end
from    YourTable yt1
join    YourTable yt2
on      yt1.Key = 'A' and yt2.key = 'B'
        or
        yt1.Key = 'B' and yt2.key = 'C' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:03:05.220

您的问题是为每一行建议一个单独的值。如果是这样，那么这是查询：

```
select t.*
       (case when -leastval < 0 then 0
             else -lesatval
        end) as TheValue
    end
from (select t.*,
             (case when A1 - B1 < C1 and A1 - B2 < B1 then A1 - B1
                   when C1 < B1 then C1
                   else B1
              end) as leastval
      from table t
     ) t 
```

现在我正确地阅读了这个问题，让我假设每个日期都有一个 A、B 和 C 值。然后你可以使用上面的变体，首先简单地对数据进行去特征化：

```
select t.*
       (case when -leastval < 0 then 0
             else -leastval 
        end) as TheValue
    end
from (select t.*,
             (case when A - B < C and A - B < B then A - B
                   when C < B then C
                   else B
              end) as leastval
      from (select date, 
                   min(case when key = 'A' then value end) as A,
                   min(case when key = 'B' then value end) as B,
                   min(case when key = 'C' then value end) as C
            from table t
            group by date
           ) t
     ) t 
```

还有其他方法来制定这一点。我试图合理地接近 Excel 公式。

顺便说一句，其他一些数据库提供 Greatest() 和 Least() 函数，这样的公式可能更容易创建。

# jquery - 是否可以将 setInterval 设置为全局变量，以便可以通过单独的函数访问它？

> ID：10914410
> 
> 赞同：2
> 
> 时间：2012-06-06T12:39:52.883
> 
> 标签：jquery

起初我以为是这样。但显然，它不会`clearInterval`。

为了使其可访问，我设置了一些命名空间的全局变量。

```
 $.faux_download = {};
    $.faux_download._counter = 0; 
```

然后，我将悬停动作的每个细节都放在单独的可共享方法中。

```
 init_hover_handler: function($this, evt) {
    $this = $($this);
    $.faux_download._counter = setInterval(function(){ SSK.calendar.check_load_popup($this) }, 1000);
  },
  init_hover_out_handler: function() {
    clearInterval($.faux_download._counter);
  }, 
```

现在这一切都在这里工作，**直到我动态添加要共享相同功能的对象**

我使用`live`事件绑定到它：

```
 $(".extended-cell-popup:last .job a, .extended-cell-popup:last .task a").live('hover', function(evt){
      SSK.calendar.init_hover_handler(this, evt);
    }, function(){
      SSK.calendar.init_hover_out_handler();
    }); 
```

现在鼠标悬停在这里工作，但清除间隔似乎不适用于这些新创建的动态项目。

但是，如果我将鼠标悬停在与页面一起加载的某些内容上，**它们**将成功清除间隔并正常工作。

有人知道为什么会这样吗？

**jQuery 1.4.4（只是因为，不要恨我。）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:48:09.197

通常我会删除它，但它实际上是一个有趣的答案。

**你不能绑定`hover`。您必须绑定`mouseenter`和`mouseleave`。**

# ffmpeg - 如何在没有 vhook 的情况下使用 ffmpeg 向视频添加文本？

> ID：10914411
> 
> 赞同：0
> 
> 时间：2012-06-06T12:40:00.153
> 
> 标签：ffmpeg

我认为问题很简单。如何使用 ffmpeg vhook 添加文本已被弃用，我找不到任何更简单的解决方案。

使用 ubuntu 并安装最新的 ffmpeg 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:26:08.050

来自 Ubuntu 10.04 的 FFmpeg 似乎不支持过滤器，因此您必须获得更新的版本。您可以按照分步[指南在 Ubuntu 上编译 ffmpeg](https://trac.ffmpeg.org/wiki/UbuntuCompilationGuide)，或者您可以简单地下载[ffmpeg 的 Linux 版本](http://ffmpeg.gusari.org/static/)。

请注意，如果您遵循编译指南，您将需要另外安装`libfreetype6-dev`作为依赖项，然后添加`--enable-libfreetype`到您的 ffmpeg `./configure`。

此示例命令将在视频中添加单词“Stack Overflow”，背景为白色，并位于视频中间：

```
ffmpeg -i input -filter:v "drawtext=fontsize=30:box=1:fontfile=/usr/share/fonts/TTF/Vera.ttf:text='Stack Overflow':x=(w-text_w)/2:y=(h-text_h-line_h)/2" output 
```

![绘制文本示例](../Images/4553769e3a2064c8f3f0fee85b692c81.png)

有关其他参数的更多详细信息，请参阅[`drawtext`文档](https://ffmpeg.org/ffmpeg-filters.html#drawtext-1)。

# mfc - CDialog 派生类中的块转义键

> ID：10914415
> 
> 赞同：0
> 
> 时间：2012-06-06T12:40:04.870
> 
> 标签：mfc, cdialog

我有一个列表控件和一些 CDialog 派生的无边框窗体。当用户单击特定列表项时 - 将显示特定表单。我使用 CDialog 类作为这些表单的基类。一切正常，但是当我在列表和这些控件所在的主窗口中按 Escape 键时 - 当前表单隐藏。如何阻止转义键？我应该在表单的类中定义 OnCancel 方法并防止对话框关闭，还是可以设置一些标志来解决我的问题？我主要选择 CDialog 类作为基类，以便在表单类中包含 DoDataExchange。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:31:59.983

我不确定您所说的形式。我只是假设您正在使用对话框。

当你按下 Esc 时对话框不会隐藏；它被 IDCANCEL 退出代码解除。按下 RETURN 时也会发生同样的情况。不同之处在于退出代码设置为 IDOK。

不要更改 Cancel 处理程序行为。您需要它知道用户实际上使用取消按钮终止了对话框。

相反，在资源编辑器中创建加速器表并向其添加 Esc (VK_ESCAPE) 键。将 HACCEL 类型成员变量添加到您的应用程序。在 InitInstance 调用中：

```
m_hAccel = LoadAccelerators(AfxGetInstanceHandle(), MAKEINTRESOURCE(IDR_ACCELERATOR1)); 
```

将虚拟 PreTranslateMessage 添加到您的应用程序。将以下代码放在覆盖中：

```
BOOL CYourApp::PreTranslateMessage(MSG* pMsg)
{
    if(TranslateAccelerator(pMsg->hwnd, m_hAccel, pMsg))
    {
        return TRUE;
    }

    return CWinAppEx::PreTranslateMessage(pMsg);
} 
```

这就对了。您甚至不必为此加速器插入处理程序，除非您想在按下 Esc 时阻止对话框关闭之外做其他事情。

# python - 使用 tweepy 搜索和提取热门转推

> ID：10914416
> 
> 赞同：1
> 
> 时间：2012-06-06T12:40:10.830
> 
> 标签：python, tweets, tweepy, python-twitter

我需要提取给定搜索标签的热门转推。为此，我这样做了

```
search = []
page = 1
while(1):
    tweets = api.search(tag,page = page)
    for tweet in tweets:
        search.append(tweet)
    page = page + 1 
```

然后从使用正则表达式的搜索中，我设法提取了热门转发。

但问题是循环在 330 条推文后停止，并且转发仅来自这 330 条推文。

我的方法是否正确，有没有办法刮掉更多的推特，或者有没有更直接的方式来访问转推？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T00:23:13.837

您在一小时内可以收到的推文数量似乎是有限制的：根据我从[dev twitter](https://dev.twitter.com/docs/rate-limiting/faq#checking)了解到的信息，350 条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:13:03.503

您限制为每小时 350 次 API 调用。我的理解是每次通话最多可以收到 100 条推文。

# ruby-on-rails - Rails 控制台中的 I18n 翻译不显示正确的中文（或任何其他语言）

> ID：10914420
> 
> 赞同：3
> 
> 时间：2012-06-06T12:40:23.317
> 
> 标签：ruby-on-rails, internationalization, i18n-gem

所以我们使用 I18n 将我们的网站本地化为繁体中文

我在 config/locales 目录下有一个 zh-TW.yml 文件

我试图看到翻译在 Rails 控制台中有效。

所以我尝试了：

```
1.9.3-p0 :001 > I18n.default_locale
 => :zh
1.9.3-p0 :008 > I18n.t 'users.account_header'
 => "zh, users.account_header" 
1.9.3-p0 :009 > I18n.t "x_days", :count => 10
 => "zh, x_days" 
```

为什么它没有返回正确的中文翻译？所以我们知道它可以工作并得到正确的翻译。

我还尝试了一些垃圾字符串，例如

```
1.9.3-p0 :011 > I18n.t "dfkjafkjadf", :count => 10
 => "zh, dfkjafkjadf" 
```

它甚至没有抱怨翻译丢失！

我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:46:35.093

这可能听起来很傻，但可能只是您的默认语言环境是`zh`，但您的翻译存储在 下`zh-TW`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-03T15:57:31.480

我在我的应用程序中使用相同的中文翻译。

我的中文语言环境`zh-CN.yml`

```
zh-CN:
  go: '进行'
  Log out: '退出' 
```

Rails 控制台：

```
Loading development environment (Rails 3.2.13)
1.9.3p392 :001 > I18n.default_locale
 => :en 
1.9.3p392 :002 > I18n.locale = 'zh-CN'
 => "zh-CN" 
1.9.3p392 :003 > helper.t('Go')
 => "进行" 
1.9.3p392 :004 > helper.t('Log out')
 => "退出" 
```

# c# - 如何获取人员数组中每个人的年龄

> ID：10914423
> 
> 赞同：-1
> 
> 时间：2012-06-06T12:40:41.600
> 
> 标签：c#

我的课是：

```
public class Person
{
    private string _firstname;
    private string _lastname;
    private DateTime _birthdate;

    public Person(string firstname, string lastname, DateTime birthdate)
    {
        _firstname = firstname;
        _lastname = lastname;
        _birthdate = birthdate;
    }

    public string Firstname
    { get { return _firstname; } }

    public string Lastname
    { get { return _lastname; } }

    public DateTime Birthdate
    { get { return _birthdate; } } 
```

这是我为获取每个人的年龄而访问的方法：

```
public int getAge()
{
    TimeSpan ts =DateTime.Now - _birthdate;
    int year = (int)ts.TotalDays / 365;
    return year;
} 
```

我的表格：

```
namespace May22_StructClassObj_HW
{
    public partial class Form1 : Form
    {
        DateTime[] birth = new DateTime[20];
        Person[] People = new Person[20];

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // Create a class Person with the following fields _firstname, _lastname, _birthDate(DateTime Type) Add constructor, properties (get only) and a method GetAge that returns the age (int) of a person. 
            // In Form1, Create an array of Person objects to hold 20 people
            // In Form1_Load: Populate the array with 20 Person objects

            // Add Gui to display all the people in the list (first and last names, birthdate, and age
            // Add Gui 
            //people[0] = new Person("John","Stockton", DateTime.)

            string[] first = new string[20] { "Scott", "Ramona", "Todd", "Melissa", "Naomi", "Leland", "Conor", "Julie", "Armondo", "Leah", "Frank", "Peter", "Ila", "Mandy", "Sammy", "Gareth", "Garth", "Wayne", "Freddy", "Mark" };

            string[] last = new string[20] { "Kennedy", "Kennedy", "Kennedy", "Kennedy", "Kennedy", "Kennedy", "Carrel", "MaloyTheBeautiful", "Johnson", "Smith", "Sinatra", "Clemens", "Eels", "Johnson", "Eels", "Thompson", "Brooks", "World", "Crugar", "Thomas" };

            birth[0] = new DateTime(1987, 2, 7);
            birth[1] = new DateTime(1962, 5, 9);
            birth[2] = new DateTime(1984, 1, 4);
            birth[3] = new DateTime(1977, 4, 1);
            birth[4] = new DateTime(1983, 2, 8);
            birth[5] = new DateTime(1979, 4, 1);
            birth[6] = new DateTime(1965, 9, 9);
            birth[7] = new DateTime(1968, 1, 2);
            birth[8] = new DateTime(1980, 2, 7);
            birth[9] = new DateTime(1982, 2, 7);
            birth[10] = new DateTime(1984, 12, 4);
            birth[11] = new DateTime(1968, 11, 9);
            birth[12] = new DateTime(1968, 2, 8);
            birth[13] = new DateTime(1975, 5, 2);
            birth[14] = new DateTime(1945, 5, 3);
            birth[15] = new DateTime(1969, 4, 6);
            birth[16] = new DateTime(1987, 1, 4);
            birth[17] = new DateTime(1976, 3, 5);
            birth[18] = new DateTime(1989, 8, 6);
            birth[19] = new DateTime(1988, 2, 9);

            // Populate Array Person[] People = new Person[20];   
            for (int i = 0; i < People.Length; i++)
            {
                People[i] = new Person(first[i], last[i], birth[i]);
            }

        }

        private void btnDisAll_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < People.Length; i++)
            {
                richTxtDisplay.AppendText("Name: " + People[i].Firstname + "\t" + People[i].Lastname + "\t" + " BirthDate: " + People[i].Birthdate + "\n\n");
                //richTxtDisplay.AppendText(People[i].ToString());
                //richTxtDisplay.AppendText(People[i].Firstname + People[i].Lastname + People[i].Birthdate + "\n");
            }
        }
    } 
```

这里的问题：

这是我用来调用该方法的按钮，并让它告诉我 Person 数组中每个人的年龄。但我知道这是错误的。所以有人请指导我完成它。

```
private void btnGetAge_Click(object sender, EventArgs e)
{
    for (int i = 0; i < People.Length; i++)
    {
        Person Per = 
            new Person(People[i].Firstname, People[i].Lastname, People[i].Birthdate);
        Per.getAge();
    }
} 
```

我已经列出了我的问题所在。基本上我想做的就是调用该方法并在我的 Person 数组中显示每个人的所有年龄。有二十个人，我想显示他们的年龄。我确实相信我的代码非常适合在我的班级中获得我的方法的年龄，但我不确定我是否正确地创建了一个新实例以便使用该方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:45:17.140

您可以使用 LINQ 来获取所有人的年龄。但由于您没有告诉我们您想在哪里显示此信息以及您想如何加入所有年龄段，我假设您想在 TextBox （或其他地方）中将其显示为字符串并将行拆分为`Environment.NewLine`：

```
var allPersonAge = People.Select(p => p.GetAge());
richTxtDisplay.Text = string.Join(Environment.NewLine, allPersonAge); 
```

顺便说一句，这是计算年龄的更准确的方法：

```
public int getAge()
{
    DateTime now = DateTime.Today;
    int age = now.Year - _birthdate.Year;
    if (_birthdate> now.AddYears(-age)) age--;
    return age;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:43:11.197

```
for (int i = 0; i < Person.Length; i++)
{
   Person[i].getAge();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:46:25.530

```
foreach(Person person in People)
{
int age = person.getAge();
//Do something with the age
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T12:47:16.440

如何使用 LINQ

```
List<int> result = People.Select(p => p.GetAge()).ToList(); 
```

# android - 匹配意图过滤器中的特定路径，而不是站点上的每个页面

> ID：10914424
> 
> 赞同：3
> 
> 时间：2012-06-06T12:40:47.780
> 
> 标签：android, android-intent

所以我正在为一个网站构建一个 android 应用程序，并且需要在浏览器中打开文章和类别链接直接发送到我的应用程序的相应活动。url 结构是这样的：

**文章网址**

```
http://example.com/2012/06/sample-article/ 
```

**类别网址**

```
http://example.com/category/sample-category/ 
```

这是我尝试过的 Android 清单中的 xml：

```
<activity
    android:name=".ArticleView"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />

        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />

        <data android:scheme="http" />
        <data android:host="www.example.com" />
        <data android:host="example.com" />
        <data android:pathPattern="..../../.*" />
    </intent-filter>
</activity> 
```

...

```
<activity
    android:name=".CategoryView"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />

        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />

        <data android:scheme="http" />
        <data android:host="www.example.com" />
        <data android:host="example.com" />
        <data android:pathPattern="category/.*" />
    </intent-filter>
</activity> 
```

这行不通。对我做错了什么有任何帮助吗？

# c# - C# ExcelDNA 从动态数组中读取

> ID：10914427
> 
> 赞同：0
> 
> 时间：2012-06-06T12:41:06.563
> 
> 标签：c#, excel-dna

我第一次在这里发帖。通常，我发现人们可能需要的所有内容都已得到解答。在这种情况下，对于我的生活，我无法弄清楚这一点，所以就这样吧。

我尝试使用 ExcelDNA 读取 excel 中的一系列值。这个范围总是有 2 列，但行数是动态的，如下所示：

n-行数

字符串、浮点数 字符串、浮点数...第 n 行

现在我可以使用 ExcelDNA 和 ExcelReference 读取范围，如下所示：

```
object[,] bencharray = ExcelData.ReadArrayValue(0, 10, 0, 1, "Sheet1");

    public static class ExcelData
{
            public static dynamic ReadArrayValue(int rf, int rl, int cf, int cl, string sheet)
        {
            //This reads an array with 4 co-ordinates from the specified sheet
            ExcelReference readarray = new ExcelReference(rf, rl, cf, cl, sheet);
            return readarray.GetValue();
        }
} 
```

因此，这将静态读取从单元格 A1 开始的 2 列的 11 行范围。

我正在寻找类似于 VBA 的 xlDown 或 UsedRange 的东西。理想情况下，当范围的底部为空白时，这将停止，并允许工作表下方的单元格仍然可以使用。

我不确定我是否应该使用 Interop.Excel 或如何使用它。

任何帮助，将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:12:20.527

您可以使用 C API 来完成。您需要该`xlcSelectEnd`功能，该功能可在其中一个方向上扩展选择。所以你会打电话

```
XlCall.Excel(XlCall.xlcSelectEnd, 4); 
```

方向是：

*   1 - 左
*   2 - 右
*   3 - 向上
*   4 - 向下

这意味着您必须设置一个选择 ( `xlcSelect`)，然后扩展它 ( `xlcSelectEnd`)，然后获取当前选择 ( `xlfSelection`)。

关于 Google 小组的讨论也可能很有用：[https](https://groups.google.com/group/exceldna/browse_frm/thread/cc87114539c78f53) ://groups.google.com/group/exceldna/browse_frm/thread/cc87114539c78f53 。

所有这些听起来有点复杂，让我觉得你也应该考虑 COM API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T01:16:41.233

使用 Govert 的示例 ExcelSelectionHelper，您可以执行以下操作：

给定以下枚举：

```
public enum DirectionType
{
    Up = 3,
    ToRight = 2,
    Down = 4,
    ToLeft = 1
} 
```

你可以这样：

```
public static ExcelReference End( this ExcelReference reference, DirectionType direction )
{
    ExcelReference end = null;

    using ( new ExcelSelectionHelper( reference ) )
    {
        // myReference is selected now...
        XlCall.Excel( XlCall.xlcSelectEnd, (int)direction );

        var selection = XlCall.Excel( XlCall.xlfSelection ) as ExcelReference;
        var row = selection.RowFirst;
        var col = selection.ColumnFirst;

        end = new ExcelReference( row, row, col, col, selection.SheetId );
    }

    return end;
} 
```

# xml - 验证 XML 内容时出错：元素不能包含空格。内容模型为空

> ID：10914431
> 
> 赞同：0
> 
> 时间：2012-06-06T12:41:16.407
> 
> 标签：xml, validation, xsd

嗨，当我尝试验证 qti xml 文档时，我一直遇到此错误。这是xml文档：

```
 <respcondition title="Correct" >
      <conditionvar>
       <not>
         <varequal respident="1">A</varequal>
       </not>
       <varequal respident="1">B</varequal>
       <not>
            <varequal respident="1">C</varequal>
       </not>
      <varequal respident="1">D</varequal>
      </conditionvar>
        <setvar action="Set">1</setvar>
       <displayfeedback linkrefid="Correct"/>
     </respcondition> 
```

这是验证 xml 的 xsd 片段

```
 <!-- ******************* -->
            <!-- ** respcondition ** -->
             <!-- ******************* -->
               <xs:complexType name="respconditionThirdPartyType">
               <xs:sequence>
                 <xs:element name="conditionvar" type="conditionvarThirdPartyType"   maxOccurs="1"/>
                 <xs:element name="setvar" type="setvarThirdPartyType" minOccurs="0" maxOccurs="unbounded"/>
                <xs:element name="displayfeedback" type="displayfeedbackThirdPartyType" minOccurs="0" maxOccurs="unbounded"/>
              </xs:sequence>
            <xs:attribute name="title" type="xs:string"/>
      </xs:complexType>

     <!-- ****************** -->
      <!-- ** conditionvar ** -->
       <!-- ****************** -->
       <xs:complexType name="conditionvarThirdPartyType">
          <xs:sequence>
           <xs:choice>
              <xs:element name="not" type="notThirdPartyType" minOccurs="0" maxOccurs="unbounded"/>
             <xs:element name="or" type="orThirdPartyType" minOccurs="0" maxOccurs="unbounded"/>
             <xs:element name="other" type="otherThirdPartyType" minOccurs="0" maxOccurs="unbounded"/>
           </xs:choice>
        <xs:element name="varequal" type="varequalThirdPartyType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
       </xs:complexType>

      <!-- ********* -->
        <!-- ** not ** -->
       <!-- ********* -->
      <xs:complexType name="notThirdPartyType">
          <xs:sequence>
             <xs:element name="varequal" type="varequalThirdPartyType"  minOccurs="0" maxOccurs="unbounded" />
         </xs:sequence>
       </xs:complexType>

      <!-- ************** -->
      <!-- ** varequal ** -->
      <!-- ************** -->
      <xs:complexType name="varequalThirdPartyType">
         <xs:simpleContent>
            <xs:extension base="xs:string">
               <xs:attribute name="respident" type="xs:string" use="optional"/>
               <xs:attribute name="case" default="No">
               <xs:simpleType>
           <xs:restriction base="xs:NMTOKEN">
               <xs:enumeration value="Yes"/>
              <xs:enumeration value="No"/>
          </xs:restriction>
         </xs:simpleType>
       </xs:attribute>
      </xs:extension>
     </xs:simpleContent>
     </xs:complexType> 
```

命名空间“test.xsd”中的元素“conditionvar”在命名空间“test.xsd”中具有无效的子元素“varequal”。预期的可能元素列表：'not'。元素不能包含空格。内容模型为空。元素不能包含空格。内容模型为空。命名空间“test.xsd”中的元素“conditionvar”在命名空间“test.xsd”中具有无效的子元素“not”。预期的可能元素列表：'varequal'。

请问有人可以帮忙吗？这几天我一直在努力解决这个问题。谢谢干杯

找到了答案：

好的，我找到了答案。我已经改变了 conditionvar 的定义。现在它正在工作。谢谢大家的帮助

```
 <!-- ****************** -->
 <!-- ** conditionvar ** -->
  <!-- ****************** -->
 <xs:complexType name="conditionvarThirdPartyType">
 <xs:sequence minOccurs="0" maxOccurs="unbounded">
  <xs:choice  minOccurs="0" maxOccurs="unbounded">
    <xs:element name="not" type="notThirdPartyType" />
    <xs:element name="or" type="orThirdPartyType" />
    <xs:element name="other" type="otherThirdPartyType" />
  </xs:choice>
  <xs:element name="varequal" type="varequalThirdPartyType"   minOccurs="0" maxOccurs="unbounded" />
</xs:sequence>
</xs:complexType> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:42:24.067

根据您的架构，在您的`<conditionvar>`元素中，要么`<not>`或`<or>`要么`<other>`是预期的。无论是哪种情况，它都可能出现零次或多次（`minOccurs="0" maxOccurs="unbounded"`）。但是，该`<choice>`元素必须恰好存在一次，`minOccurs`并且`maxOccurs`没有为其设置（默认值为`1`每个）。接下来是零个或多个`<varequal>`元素。

由于我不确定您打算认为什么是有效的，因此我无法提供明确的更正架构片段，但我认为您实际上想`minOccurs="0" maxOccurs="unbounded"`为您的`<sequence>`元素设置 in `conditionvarThirdPartyType`，如下所示：

```
<xs:complexType name="conditionvarThirdPartyType">
    <xs:sequence minOccurs="0" maxOccurs="unbounded">
        <xs:choice>
            <xs:element name="not" type="notThirdPartyType"/>
            <xs:element name="or" type="orThirdPartyType"/>
            <xs:element name="other" type="otherThirdPartyType"/>
        </xs:choice>
        <xs:element name="varequal" type="varequalThirdPartyType"/>
    </xs:sequence>
</xs:complexType> 
```

# php - 处理具有空维度的多维数组

> ID：10914433
> 
> 赞同：0
> 
> 时间：2012-06-06T12:41:24.707
> 
> 标签：php, arrays

处理此数组时，每次引用该数组时都会给出通知，直到向其中添加某些内容。无论如何，所有输出都按预期工作。

通知截图：http: [//imgur.com/75RGA](http://imgur.com/75RGA)

```
function create_round(&$arrTeam)
{
    $numTeams = 4;

    $used = array();

    for ($i = 0; $i < $numTeams; $i++) {
        if (!in_array($i, $used)) { //if i isnt already scheduled to play
            for ($u = $numTeams-1; $u > $i; $u--) {
                if (!in_array($u, $used) && !in_array($u, $arrTeam[$i]["games"])) { //if u isnt already scheduled to play and u hasnt been played by i before
                    $arrTeam[$i]["games"][sizeof($arrTeam[$i]["games"])] = $u;
                    $arrTeam[$u]["games"][sizeof($arrTeam[$u]["games"])] = $i;

                    $used[sizeof($used)] = $i;
                    $used[sizeof($used)] = $u;

                    echo($arrTeam[$i]["name"] . " VS " . $arrTeam[$u]["name"] . "<br>");
                    break;
                }
            }   
        }
    }

    var_dump($arrTeam);
}

function round_robin()
{
    $numTeams = 4;

    //Create array
    $arrTeam = array(
        $team = array(
            "name" => "",
            "games" => array()
        )
    );

    //TEMP ASSIGNING NAMES
    for ($i = 1; $i < $numTeams+1; $i++)
        $arrTeam[$i-1]["name"] = "Team $i"; 

    //Echo Round numbers
    for ($i = 1; $i < $numTeams; $i++) {
        echo("<br>Round $i<br>");
        create_round($arrTeam);
    }
}

round_robin(); 
```

应该禁用通知还是有更好的处理方法？

我尝试填充它，但代码长度增加了一倍而且非常混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:48:59.013

你到处检查这个：

```
$arrTeam[$i]["games"] 
```

没有测试它的存在。改成：

```
if (isset($arrTeam[$i]["games"]) && ..more checking.. ) { ..do stuff.. } 
```

或者您可以禁用通知：

```
error_reporting(E_ALL ^ E_NOTICE); 
```

**编辑：**

在 round_robin() 函数中执行一次：

代替：

```
$numTeams = 4;

//Create array
$arrTeam = array(
    $team = array(
        "name" => "",
        "games" => array()
    )
); 
```

做：

```
$numTeams = 4;
for($x=0;$x<$numTeams;$x++) {
   $arrTeam[$x] = array("name"=>"","games"=>array());
} 
```

# ios - 在滚动视图中捏放大

> ID：10914444
> 
> 赞同：1
> 
> 时间：2012-06-06T12:41:57.973
> 
> 标签：ios, uiscrollview, zooming, pinch

我正在制作一个包含 UIImageView 的滚动视图中的单视图应用程序，因为图像视图是杂志页面，我需要做的就是使其能够正确缩放并滚动，所以我设置了缩放点击（感谢苹果的 tapToZoom 示例），一切正常。

问题是我想包括通过捏缩放这有点难以实现，我成功了，但缩放不是那么正确，它似乎是跳跃的比例，当我缩小时，imageView 可以去这么少它不再可见了？

您可以在这里查看控制器：

[https://github.com/HosniD/pinchzoom-iphone/blob/master/scroll/scroll/TestViewController.m](https://github.com/HosniD/pinchzoom-iphone/blob/master/scroll/scroll/TestViewController.m)

有谁知道如何让它变得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T05:49:22.763

Answer from apple documentation

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView

{

    return self.imageView;

}
- (void)viewDidLoad {

    [super viewDidLoad];

    self.scrollView.minimumZoomScale=0.5;

    self.scrollView.maximumZoomScale=6.0;

    self.scrollView.contentSize=CGSizeMake(1280, 960);

    self.scrollView.delegate=self;

} 
```

[Check my answer](https://stackoverflow.com/questions/16877807/pinch-to-zoom-effect-on-uiimageview-inside-scrollview/20321643#20321643)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:54:07.550

您想要的是Apple 编写的这个[PhotoScroller 演示。](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)我自己用过，效果很好。

特别检查 ImageScrollView 模块。它处理缩放。

这是 UIScrollView 标题中关于缩放的代码：

```
/*
 the following properties and methods are for zooming. as the user tracks with two fingers, we adjust the offset and the scale of the content. When the gesture ends, you should update the content
 as necessary. Note that the gesture can end and a finger could still be down. While the gesture is in progress, we do not send any tracking calls to the subview.
 the delegate must implement both viewForZoomingInScrollView: and scrollViewDidEndZooming:withView:atScale: in order for zooming to work and the max/min zoom scale must be different
 note that we are not scaling the actual scroll view but the 'content view' returned by the delegate. the delegate must return a subview, not the scroll view itself, from viewForZoomingInScrollview:
 */

@property(nonatomic) float minimumZoomScale;     // default is 1.0
@property(nonatomic) float maximumZoomScale;     // default is 1.0\. must be > minimum zoom scale to enable zooming 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T05:58:59.960

使用我的演示应用程序获得指导：[http](http://rexstjohn.com/facebook-like-ios-photo-modal-gallery-swipe-gestures/) ://rexstjohn.com/facebook-like-ios-photo-modal-gallery-swipe-gestures/ 。

包括对故事板和自动布局的支持。

# php - 尝试 SSL 连接时 PHP 的 FTP 功能

> ID：10914445
> 
> 赞同：2
> 
> 时间：2012-06-06T12:42:00.823
> 
> 标签：php

我已经建立了所有可能的连接来验证 FTP 服务器是否正常工作，甚至可以使用 file_put_contents() 上传文件，但 PHP 的 FTP 函数在尝试 SSL 连接时对我不起作用。服务器配置为不允许非 SSL 的连接，因此没有回退。没关系，一切仍然有效，但我真的很想使用 ftp_ssl_connect() 和 ftp_login() 来工作！

看这个例子：

```
<?php

$username    = 'someuser';
$password    = 'SeCrEtPassWd';
$hostname    = '192.168.1.10';
$filename      = 'whatever.txt';
$string_data  = 'This is the text content of the file. Pretty fancy eh?';

// USE file_put_contents W/ stream_context_create - WORKS !!!!
$url = 'ftps://' . $username . ':' . $password . '@' . $hostname . '/';
$opts = array('ftp' => array('overwrite' => true));
$context = stream_context_create( $opts );
file_put_contents( $url . $filename, $string_data, 0, $context ); 
```

**// 有效的代码结束 ------------------------------------**

```
// USE PHP's FTP functions - DOES NOT WORK !!!
$conn_id = @ftp_ssl_connect( $hostname );
$login_result = ftp_login( $conn_id, $username, $password );
ftp_put( $conn_id, $filename, $filename, FTP_ASCII );
ftp_close( $conn_id ); 
```

**// 不工作的代码结束 ---------------**

```
/*
****ERRORS PERTAINING TO THE PROBLEM ----------------------------****

Warning: ftp_login() [function.ftp-login]: SSL/TLS handshake failed in C:\xampp\htdocs\script-library\ftps.php on line 20
Warning: ftp_login() [function.ftp-login]: Proceed with negotiation. in C:\xampp\htdocs\script-library\ftps.php on line 20
*/ 
```

这是PHP中的错误吗？我只是不明白为什么其他一切都有效，而不是 PHP FTP 功能。我的问题是我真的需要能够列出远程服务器上的文件，因为我不想覆盖它们。我想将文件重命名为不存在的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:47:02.817

您可以使用 phpseclib 来执行此操作，它对我来说非常有效：http: [//phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:31:23.097

我需要：

```
ftp_pasv($conn_id, true); 
```

登录后让我的工作。

# c# - 如何从小程序设置 Windows 应用程序的用户名密码

> ID：10914451
> 
> 赞同：-2
> 
> 时间：2012-06-06T12:42:31.233
> 
> 标签：c#, windows, applet

我正在尝试从小程序启动 Windows 应用程序（使用 C# 编写的应用程序）。

Web 应用程序是用 javascript 编写的，所以我使用小程序来调用 Windows 应用程序。

我已经使用小程序完成了应用程序的启动部分。

但是不是我写的windows应用程序需要用户名和密码才能登录。

我可以从 Web 应用程序中获取这两个值。通过数据库查询。

现在我需要为该 Windows 应用程序设置用户名和密码，无需任何用户交互并从 Web 应用程序内部启动该应用程序。

请给我说明如何执行此操作。

——最好的问候，兰加纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:43:37.990

尝试在命令行上传递它。启动应用程序时，使用以下命令行启动您的应用程序

```
app.exe user=??? password=??? 
```

并在您的程序中读取这些参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:48:03.460

您的 Windows 程序应该能够从命令行访问传递的参数

```
call program.exe username password 
```

例子

```
 class Program
{
    static void Main(string[] args)
    {

               username = args[1]
               password = args[2]

              //validate

      }
 } 
```

# android - 如何获得在父级中心对齐的图像的左填充？

> ID：10914455
> 
> 赞同：1
> 
> 时间：2012-06-06T12:42:44.620
> 
> 标签：android

我有一个RelativeLayout，其中有一个在RelativeLayout 内对齐的imageView 中心。

如何获得居中对齐的图像的左填充？

谢谢，卡提克

# google-maps - Google Maps API v3 中的 removeOverlay

> ID：10914460
> 
> 赞同：4
> 
> 时间：2012-06-06T12:43:27.593
> 
> 标签：google-maps, google-maps-api-3, google-api, google-maps-markers, google-maps-api-2

如何将其移植到 v3？removeOverlay 不包含在 v3 中。

```
if( mapElements[lMapElementIndex]['marker'] != 0 ){
  //map.removeOverlay(mapElements[lMapElementIndex]['marker']); V2
} 
```

V3？

```
if( mapElements[lMapElementIndex]['marker'] != 0 ){
  //map.removeOverlay(mapElements[lMapElementIndex]['marker']);
  mapElements(mapElements[lMapElementIndex]['marker']).setMap(null);
} //but throws an error mapElements is not a function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:49:35.773

您需要使用`setMap`覆盖的方法。[从文档](https://developers.google.com/maps/documentation/javascript/overlays#RemovingOverlays)：

> 要从地图中删除叠加层，请调用叠加层的`setMap()`方法，传递`null`.

假设`mapElements`是一个对象数组，并且该`marker`属性引用了一个覆盖实例，那么您需要做的就是：

```
mapElements[lMapElementIndex]['marker'].setMap(null); 
```

您的尝试会引发错误，因为您试图`mapElements`作为函数调用（当它看起来是一个数组时）。没有必要这样做。只需摆脱函数调用，它应该可以正常工作。

# java - JAR 中 InputStream 的不同行为

> ID：10914473
> 
> 赞同：3
> 
> 时间：2012-06-06T12:44:14.753
> 
> 标签：java, inputstream

我发现自己要解决我的软件中的一个奇怪错误：问题是它只有在我将我的应用程序打包成可运行的 JAR 时才会出现。

问题出在这个简单的代码中：我添加了 loopCounter 来计算循环的次数

```
private static byte[] read(InputStream source) {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    int loopCounter = 0;
    int bytesRead;

    try {
        byte[] buffer = new byte[4096]; 

        while ((bytesRead = source.read(buffer)) != -1) {
            out.write(buffer, 0, bytesRead);
            loopCounter++;
        }

    } catch (IOException e) {
        e.printStackTrace();
    }

    return out.toByteArray();
} 
```

一个例子：

```
source = ClassLoader.class.getResourceAsStream("file.lol");

loopCounter in Eclipse = 1366
loopCounter in JAR     = 1405 
```

我的问题是：为什么同一个 InputStream 会有这么大的差异？

编辑：我用正确的代码更改了我的代码，但 loopCounters 仍然不同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T13:02:35.000

`InputStream.read()`不保证一次填满整个缓冲区，因此您需要跟踪实际读取的字节数：

```
byte[] buffer = new byte[4096];
int bytesRead = 0;
while ((bytesRead = source.read(buffer)) != -1) {
    out.write(buffer, 0, bytesRead);
    loopCounter++;
} 
```

因此，每次迭代读取的字节数可能会`InputStream`因 .

实际上，特定调用读取的字节数`InputStream.read()`取决于许多因素。

第一个因素是实现`InputStream`：当您从 Eclipse 运行应用程序时，您使用`InputStream`它直接从文件系统读取资源，而当您从 jar 文件运行它时，您使用它从 jar 文件`InputStream`中提取资源。显然，jar 文件的一些解压算法内部可能会影响您获得的块的大小。

另一个因素是底层环境的行为。例如，从文件系统读取文件的系统调用也可能返回不同大小的块，这取决于操作系统的某些内部行为，等等。

# c# - DropDownList 的扩展方法导致错误

> ID：10914476
> 
> 赞同：0
> 
> 时间：2012-06-06T12:44:21.557
> 
> 标签：c#, extension-methods

我有一个扩展方法，`DropDownList`它会抛出`Extension method can only be declared in non-generic, non-nested static classes`关键字`this`。我不太清楚为什么，因为我已经看到很多关于扩展方法的例子`DropDownList`

```
public static class DropDownListExtensions {
    public static void populateDropDownList(this DropDownList source, Action delegateAction) {
        source.DataValueField = "Key";
        source.DataTextField = "Value";
        source.DataSource = delegateAction;
        source.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:46:10.870

可能您的`DropDownListExtensions`类声明为嵌套在其他类中。将其移至命名空间级别。

# c# - 将 JNI AndroidJNI.GetMethodID 与字符串参数结合使用

> ID：10914479
> 
> 赞同：5
> 
> 时间：2012-06-06T12:44:51.670
> 
> 标签：c#, unity3d, java-native-interface

我正在使用android java插件进行统一我试图从java统一调用函数并且它成功运行。

```
 cls_Activity = AndroidJNI.FindClass("com/unity3d/player/UnityPlayer");
        fid_Activity = AndroidJNI.GetStaticFieldID(cls_Activity, "currentActivity", "Landroid/app/Activity;");

        obj_Activity = AndroidJNI.GetStaticObjectField(cls_Activity, fid_Activity);
        kdataActivityClass = AndroidJNI.FindClass("com/kdata/unitytest/UnityUrlPlugin");
startAdsMethod = AndroidJNI.GetMethodID(kdataActivityClass,"getURL","(I)Ljava/lang/String;");

        jvalue[] myArray = new jvalue[1];
        myArray[0].i =testvalue;
        gui.text=   AndroidJNI.CallStaticStringMethod(obj_Activity, startAdsMethod, myArray); 
```

使用上面的代码，我可以将`int`value 传递给我的 java 函数并接收`string`value 。当我试图传递一个字符串值时，它对我不起作用。问题出在此处，因为 JNI 中没有字符串类型

```
jvalue[] myArray = new jvalue[1];
myArray[0].i =testvalue; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:22:11.083

您要查找的数据类型是 jstring，在 JNI 中您可以使用`newString`或创建它`newStringUTF`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T11:50:52.310

我解决了兄弟，这就是我想要的 myArray[0].l=AndroidJNI.NewStringUTF(credentials);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-14T01:45:35.783

> there is no string type in JNI

Yes there is. It's called 'jstring'.

# php - PHP PCRE：匹配大括号内容

> ID：10914482
> 
> 赞同：0
> 
> 时间：2012-06-06T12:45:01.947
> 
> 标签：php, regex, pcre

我正在尝试将字符串中大括号内的内容替换为`preg_replace_callback`. 这是一个示例字符串：

```
230|321;312|123;{413|333;413|334;413|335};583|221 
```

我想要做的是能够用其他东西替换大括号 ( `{413|333;413|334;413|335}`) 里面的东西，但我不太清楚如何去`regex expression`. 我尝试了一些但没有结果。

一点帮助？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:50:49.463

如果要匹配从左大括号到右大括号的所有内容：

```
/{[^}]+}/ 
```

# c# - 使用 DLR 运行使用 CompileAssemblyFromSource 生成的代码？

> ID：10914484
> 
> 赞同：5
> 
> 时间：2012-06-06T12:45:09.097
> 
> 标签：c#, .net, codedom, dynamic-language-runtime

跟进这个[出色的答案](https://stackoverflow.com/questions/3188882/compile-and-run-dynamic-code-without-generating-exe/3188953#3188953)，我想知道使用`dynamic`关键字的 DLR 是否可以允许以不那么冗长的方式为生成的程序集编写代码。

例如，上述答案的代码是否可以：

```
using (Microsoft.CSharp.CSharpCodeProvider foo = 
           new Microsoft.CSharp.CSharpCodeProvider())
{
    var res = foo.CompileAssemblyFromSource(
        new System.CodeDom.Compiler.CompilerParameters() {  
            GenerateInMemory = true 
        }, 
        "public class FooClass { public string Execute() { return \"output!\";}}"
    );

    var type = res.CompiledAssembly.GetType("FooClass");
    var obj = Activator.CreateInstance(type);
    var output = type.GetMethod("Execute").Invoke(obj, new object[] { });
} 
```

变成这样的东西：

```
using (Microsoft.CSharp.CSharpCodeProvider foo = 
           new Microsoft.CSharp.CSharpCodeProvider())
{
    var res = foo.CompileAssemblyFromSource(
        new System.CodeDom.Compiler.CompilerParameters() {  
            GenerateInMemory = true 
        }, 
        "public class FooClass { public string Execute() { return \"output!\";}}"
    );

    var type = res.CompiledAssembly.GetType("FooClass");
    dynamic obj = Activator.CreateDynamicInstance(type);
    var output = obj.Execute();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T13:26:24.173

是的，你可以这样做，而且效果很好。然而，虽然使用 dynamic 关键字更方便，但它利用了后期绑定，并且在这个意义上仍然与显式使用反射一样不安全。如果您的设计允许，最好使用共享接口或基类进行早期绑定。您可以通过在您的程序集中或在第三个共享程序集中创建一个公共类型来做到这一点，然后从您正在动态编译的新程序集中添加对该程序集的引用。然后，在生成的代码中，您可以从引用程序集中的共享类型继承。例如，创建一个接口：

```
public interface IFoo
{
    string Execute();
} 
```

然后像这样动态编译程序集：

```
using (Microsoft.CSharp.CSharpCodeProvider foo = new Microsoft.CSharp.CSharpCodeProvider())
{
    var params = new System.CodeDom.Compiler.CompilerParameters();
    params.GenerateInMemory = true;

    // Add the reference to the current assembly which defines IFoo
    params.ReferencedAssemblies.Add(Assembly.GetExecutingAssembly().Location);

    // Implement the IFoo interface in the dynamic code
    var res = foo.CompileAssemblyFromSource(params, "public class FooClass : IFoo { public string Execute() { return \"output!\";}}");
    var type = res.CompiledAssembly.GetType("FooClass");

    // Cast the created object to IFoo
    IFoo obj = (IFoo)Activator.CreateInstance(type);

    // Use the object through the IFoo interface
    obj.Execute();
} 
```

根据您对动态代码的控制程度，这可能会也可能不会，但是如果可以，最好进行编译时类型检查。例如，如果您尝试执行：

```
IFoo obj = (IFoo)Activator.CreateInstance(type);
obj.Execcute(); 
```

第二行将立即无法编译，因为它拼写错误，而使用 dynamic 关键字或反射，该行将成功编译，但会导致运行时异常。例如，以下不会出现编译时错误：

```
dynamic obj = Activator.CreateDynamicInstance(type);
obj.Execcute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:52:10.607

这是 DLR 设计的场景之一。您可以通过这种方式使用它来调用动态加载类型的成员，同时避免手动调用`.GetMethod()`和`.Invoke()`.

# ruby-on-rails - 使用 Datamapper ORM 通过 Rails 更新关系

> ID：10914486
> 
> 赞同：1
> 
> 时间：2012-06-06T12:45:12.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datamapper

我同时使用 Rails 3 和 Datamapper，一切都很好，除非我设置了多对多关系。

如果我试图通过 Rails 控制器**更新用户，我运行：**

```
@user.update(params[:user]) 
```

在 params 中是一个 role_ids 集合。但是，当我通过它时，我收到以下消息：

```
The attribute 'role_ids' is not accessible in User 
```

模型用户端的关系如下：

```
has n, :roles, :through => Resource 
```

我看不出这里有什么问题 - 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:43:04.470

这意味着您的用户模型中没有“role_ids”字段 - 这是真的，因为您的用户模型中很可能有“resource_id”。如果您有一个表单可以在用户创建/修改中接受角色创建/修改，则必须在 User 中声明，如下所示：

```
class User
  accepts_nested_attributes_for :roles
  attr_accessible :role_attributes 
```

# android - Phonegap 文件传输

> ID：10914489
> 
> 赞同：1
> 
> 时间：2012-06-06T12:45:24.613
> 
> 标签：android, jquery, cordova

在我的 android 应用程序中，我想向服务器发送请求并上传照片。这是我的代码

```
function uploadPhoto(imageURI) {

    var options = new FileUploadOptions();
    options.fileKey="file";
    options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
    var params = new Object();
    params.value1 = "test";
    params.value2 = "param";

    options.params = params;
    options.chunkedMode = false;

    var ft = new FileTransfer();

    ft.upload(imageURI,  "http://192.168.1.4:3000/api/upload/", win, fail, options);

} 
```

我还想在标题上设置值。为了更清楚，我想设置一些关于它的代码，它是由 Jquery Ajax 完成的。我想在 FileTransfer 上做类似的事情。

```
$.ajax({

        type: "POST",
        beforeSend: function (jqXHR) {
            jqXHR.setRequestHeader(KEY1, _key1);
            jqXHR.setRequestHeader(KEY2, _key2);
        } 
```

我想知道我可以使用 FileTransfer() 在标头上设置一些值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:47:52.980

对在 FileTransfer 中设置标题的支持将包含在 1.9 版本中。预计这将在六月底附近发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:31:09.257

西蒙是1.9.0rc1中的这个功能吗？这是我们目前真正需要的将图像上传到 Twitter 的东西。

# java - 在 Java 项目中放置文本文件的位置以及如何引用文件夹

> ID：10914490
> 
> 赞同：1
> 
> 时间：2012-06-06T12:45:28.120
> 
> 标签：java, android, text-files, directory

在我的项目中，我想从几个文本文件中读取数据，因此我将它们组织到以下文件夹中：

1.  文本文件
    *   文件夹1
        *   子文件夹1
            *   文件.txt
        *   子文件夹2
    *   文件夹2
        *   子文件夹3

我的问题是我不知道将文件夹放在哪里或如何引用我的文本文件。我已经阅读[了在哪里放置我想在 Eclipse 中使用的文本文件？](https://stackoverflow.com/questions/2850674/where-to-put-a-textfile-i-want-to-use-in-eclipse) 并进行如下设置：
文件夹位置：
workspace/porjectX/src/textfiles
代码：

```
FileInputStream fis= new FileInputStream("/textfiles/folder1/subfolder1/file.txt"); 
```

我得到的结果是“FileNotFoundException”...

我检查了拼写，一切都是小写的，没有空格。有什么想法吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:02:20.523

首先，您必须确保文件夹 testfiles 在您的构建路径上（Project->Properties->Java Build Path）。然后您可以通过以下方式获取文件的输入流：

```
this.getClass().getClassLoader().getResourceAsStream("folder1/subfolder1/file.txt"); 
```

另请参阅：[getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)

# ndepend - NDepend 如何计算代表的参数数量？

> ID：10914491
> 
> 赞同：2
> 
> 时间：2012-06-06T12:45:28.713
> 
> 标签：ndepend

我们使用 NDEPEND CQL 请求对我们的代码设置了一些质量约束：

> WARN IF Count > 0 IN SELECT TOP 10 METHODS WHERE NbParameters > 6

当定义一个有 5 个参数的委托时，例如：

```
delegate void MyDelegate(IArg arg1, IArg arg2, IArg arg3, IArg arg4, IArg arg5); 
```

然后质量约束在源代码中不存在（但可能在编译代码中）并具有 2 个附加参数的函数上中断：

```
BeginInvoke(IArg, IArg, IArg, IArg, IArg, AsyncCallback,Object) 
```

如何解决这个障碍？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:24:21.700

CQL 不能轻易解决这个问题，但是NDepend v4 之后发布[的基于 LINQ 的代码规则 (CQLinq)可以。](http://www.ndepend.com/Features.aspx#CQL)

CQLinq 带有定义什么是**JustMyCode**的工具，因此消除了像*BeginInvoke(IArg, IArg, IArg, IArg, IArg, AsyncCallback,Object)*这样的生成方法。这在：[Defining the code base view JustMyCode with notmycode prefix](http://www.ndepend.com/Doc_CQLinq_Syntax.aspx#NotMyCode)

基本上，默认和可自定义的代码规则[Discard 从 JustMyCode 生成的 Types](http://www.ndepend.com/DefaultRules/webframe.html?Q_Discard_generated_Types_from_JustMyCode.html)丢弃委托类型及其方法，因为它们总是被生成的。

```
// <Name>Discard generated Types from JustMyCode</Name>
// --- Make sure to make this query richer to discard generated types from NDepend rules results ---
notmycode
from t in Application.Types where

  // Resources, Settings, or typed DataSet generated types for example, are tagged with this attribute
  t.HasAttribute ("System.CodeDom.Compiler.GeneratedCodeAttribute".AllowNoMatch()) ||

  // Delegate types are always generated
  t.IsDelegate ||

  // Discard ASP.NET page types generated by aspnet_compiler.exe
  // See: http://www.ndepend.com/FAQ.aspx#ASPNET
  t.ParentNamespace.Name.EqualsAny("ASP", "__ASP") ||

  // Discard generated type ContractException
  t.Name == "__ContractsRuntime+ContractException" ||
  t.FullName == "System.Diagnostics.Contracts.RuntimeContractsAttribute" ||
  t.FullName == "System.Diagnostics.Contracts.__ContractsRuntime" ||

  // Discard all types declared in a folder path containing the word "generated"
  (t.SourceFileDeclAvailable &&
   t.SourceDecls.All(s => s.SourceFile.FilePath.ParentDirectoryPath.ToString().ToLower().Contains("generated")))

select new { t, t.NbILInstructions } 
```

# java - 可以确定要下载的文件的大小吗？

> ID：10914494
> 
> 赞同：6
> 
> 时间：2012-06-06T12:45:42.070
> 
> 标签：java, android, android-asynctask

我目前有以下代码读取位于网络上的文件并将其写入手机上的文件：

```
InputStream inputStream = new URL(sourceFileWebAddress).openStream();
BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);
FileOutputStream fileOutputStream = new FileOutputStream(targetFile);

int count;
byte buffer[] = new byte[1024];

while ((count = bufferedInputStream.read(buffer, 0, buffer.length)) != -1)
  fileOutputStream.write(buffer, 0, count); 
```

有谁知道是否有可能（使用上面的设置或其他方式）确定在开始下载之前要读取的字节总数（以便在下载进行时向用户发布百分比进度）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T12:52:51.267

使用`getContentLength`方法`URLConnection`

```
URL url = new URL(sourceFileWebAddress);
URLConnection connection = url.openConnection();
connection.connect();

int fileLenth = connection.getContentLength();

InputStream inputStream = url.openStream();
BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T12:53:00.533

使用**[URLConnnection试试这个](http://developer.android.com/reference/java/net/URLConnection.html)**

```
URLConnection connection = new URL(sourceFileWebAddress).openStream();
InputStream stream = connection.getInputStream();

System.out.println("total size: "+connection.getContentLength();//size

BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);
FileOutputStream fileOutputStream = new FileOutputStream(targetFile);

int count;
byte buffer[] = new byte[1024];

while ((count = bufferedInputStream.read(buffer, 0, buffer.length)) != -1)
  fileOutputStream.write(buffer, 0, count); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T13:33:59.313

要确定在开始下载**之前**要读取的字节总数，一种方法是仅通过发送**HTTP HEAD请求来***获取响应标头*，如下所示：

 **```
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.ProtocolException;
import java.net.URL;

public class SimpleHTTPRequest {

  public static void main(String[] args) {
      HttpURLConnection connection = null;
      URL serverAddress = null;

      try {
          String sourceFileWebAddress = "http://localhost:8080/mycontents";
          serverAddress = new URL(sourceFileWebAddress);
          //set up out communications stuff
          connection = null;

          //Set up the initial connection
          connection = (HttpURLConnection)serverAddress.openConnection();

          //HEAD request will make sure that the contents are not downloaded.
          connection.setRequestMethod("HEAD");  

          connection.connect();
          System.out.println("========"+connection.getContentLength());

      } catch (MalformedURLException e) {
          e.printStackTrace();
      } catch (ProtocolException e) {
          e.printStackTrace();
      } catch (IOException e) {
          e.printStackTrace();
      }
      finally
      {
          //close the connection, set all objects to null
          connection.disconnect();

          connection = null;
      }
  }
} 
```

这将打印要下载的内容的大小，而**无需实际下载**内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T12:52:18.673

您可以向服务器发送请求以返回文件大小。在进度条中使用该文件大小并启动​​下载。因此，这是两个单独的请求，但您可以将它们捆绑在同一个 asyc 任务中。因此，您首先获取 fielszie，调用`progressUpdate`您设置进度条值的位置，然后通过定期调用来继续下载`progressUpdate()`以更改进度条的状态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T13:22:38.743

`getContentLength`的方法`URLConnection`应该给你要下载的文件的大小。从此，您可以随意绘制 ProgressBar，并在您的 fileOutputStream 处理新数据时更新它（在 onProgressUpdate 中，假设您在 AsyncTask 中执行此操作。您是，对吗？）。

如果服务器没有在 getContentLength 中为您提供值（在大多数情况下为-1，但至少检查它是否小于或等于零），只需让您的 ProgressBar 不确定。**

# git - 在 Git 中清理未暂存的已删除文件的简单方法

> ID：10914496
> 
> 赞同：43
> 
> 时间：2012-06-06T12:45:51.013
> 
> 标签：git

我经常使用我的 IDE 或通过命令行（而不是通过 git mv）在 git 存储库中移动文件。

结果，我最终在下一次提交时删除了几个未暂存的文件，如下所示：

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   modified:   test.html
#
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    css/bootstrap.css
#   deleted:    css/bootstrap.min.css
#   deleted:    img/glyphicons-halflings-white.png
#   deleted:    img/glyphicons-halflings.png
#   deleted:    js/bootstrap.js
#   deleted:    js/bootstrap.min.js 
```

我通常会选择所有已删除的文件并在文本编辑器中编辑它们以生成如下内容：

```
git rm  css/bootstrap.css
git rm  css/bootstrap.min.css
git rm  img/glyphicons-halflings-white.png
git rm  img/glyphicons-halflings.png
git rm  js/bootstrap.js
git rm  js/bootstrap.min.js 
```

然后我把它扔回控制台。

有没有办法做到这一点而不必复制/粘贴？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-06T12:53:22.830

如果我正确理解您的问题，您希望提交删除...也就是说，您希望对显示为已删除 `git rm`的*所有文件执行等效的操作。*`git clean`不会这样做。

您可以运行`git add -u`：

> 仅与索引中已跟踪的文件而不是工作树匹配。这意味着它永远不会暂存新文件，但它将暂存已修改的跟踪文件的新内容，并且如果工作树中的相应文件已被删除，它将从索引中删除文件。

这将获取对跟踪文件的所有更改，包括删除。所以如果你从这个开始：

```
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    file2
#   deleted:    file3
#   deleted:    file4
#   deleted:    file5 
```

跑步`git add -u`会让你做到这一点：

```
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    file2
#   deleted:    file3
#   deleted:    file4
#   deleted:    file5 
```

此时的提交将做正确的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T12:56:34.927

我通常会提交我更改的文件。

如果我删除了多余的文件，我会在此之后执行以下操作：

```
git commit -a -m 'deleted redundant files' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T12:53:33.647

`git add -u`将更新跟踪文件的状态。

# mysql - MySQL“不在”不工作

> ID：10914497
> 
> 赞同：18
> 
> 时间：2012-06-06T12:45:51.790
> 
> 标签：mysql, notin

奇怪的事情发生了。我在 Windows ***NOT IN***查询上安装的 MySQL Community Server 5.1 有问题。当我执行此查询时：

```
select * 
  from table1 
  where date >= "2012-01-01"; 
```

返回 582 行

```
select * 
  from table1 
  where date >= "2012-01-01" 
    and the_key in (select some_key from table2); 
```

返回 15 行

所以我希望以下查询将返回 582 - 15 = 567 行

```
select * 
 from table1 
 where date >= "2012-01-01" 
 and the_key not in (select some_key from table2); 
```

返回 0 行

为什么最后一个查询没有返回任何行？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-06T12:49:18.900

试试这个。

```
select * 
 from table1 
 where date >= "2012-01-01" 
 and `key` not in (select some_key from table2 where some_key is not null); 
```

或使用不存在

```
 select * 
 from table1 
 where date >= "2012-01-01" and not exists ( select some_key from table2 where table2.some_key = table1.key 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-06T12:50:01.357

很可能您的“键”列中有一些 NULL 值。NULL 比较总是返回 null，它的计算结果为 false。这可能与直觉相反。例如

```
SELECT * FROM MyTable WHERE SomeValue <> 0 
```

不会返回 SomeValue = NULL 的值。即使直观地，NULL 也不等于零。因此，要修复您的查询，您可能应该执行以下操作。

```
select * from table1 where date >= "2012-01-01" 
and (key not in (select some_key from table2) OR key IS NULL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:49:13.063

```
select * 
 from table1 
 where date >= "2012-01-01" 
 and `key` not in (select some_key from table2); 
```

# jquery - Drop() 使用 Sortable/Droppable 调用两次

> ID：10914503
> 
> 赞同：5
> 
> 时间：2012-06-06T12:46:12.620
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-droppable

我这里有这段代码。我有两个问题：

1.  在接收函数中，我们如何获取刚刚放入可排序的元素？不是用于删除新的那个，而是实际被删除到列表中的那个？
2.  既然找不到，我决定使用 drop() 函数，但是现在，为什么该函数被调用了两次？！我不想要那个！

    ```
    $( "#sortable" ).droppable({

        activeClass: "ui-state-default",
        hoverClass: "ui-state-hover",
        drop: function( event, ui ) {
            $(ui.draggable).editable(function(value, settings) { 
                 return(value);
                 },{
                 tooltip     : "Click to edit"
              });
        }
    }).sortable({

        revert: true,
        receive: function(event, ui) {
            $(this).children("li").each(function(index) {
                $(this).attr("id", "content-" + index);
                });
        }

    }); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:51:06.213

我很好奇，所以我做了一些玩弄这个。

在我的测试中，我没有看到'receive'事件触发了一个droppable。鉴于此，我查看了您的代码，似乎您想在新删除的代码上设置 id。所以，我确实把这个放在了一起：http: [//jsfiddle.net/ER5Jd/](http://jsfiddle.net/ER5Jd/) - 使用它来查看它添加 ID 并列出最后一个列表项 ID 的操作。
排序并在排序后显示列表中新的最后一个。我希望它可以帮助你。注意：“drop”中的 ui.helper 是在屏幕上拖动的辅助项（可拖动克隆集），但实际克隆来自可拖动。

我的标记：

```
<ul id='firstOne'>First
    <li class='listItem'>oneF</li>
    <li class='listItem'>twoF</li>
</ul>
<ul id='secondOne'>Second<span></span>
    <li class='listItem'>oneS</li>
    <li class='listItem'>twoS</li>
</ul> 
```

我的代码：

```
$('#firstOne .listItem').draggable({
    helper: 'clone'
});
giveId($('#secondOne'));// initial ids set

$("#secondOne").droppable({
    activeClass: "ui-state-default",
    hoverClass: "ui-state-hover",
    drop: function(event, ui) {
        $(ui.draggable).clone().css('background-color', 'pink')
          .attr('id', 'content-' + ($(this).find('.listItem').length + 1))
          .appendTo(this).siblings().css('background-color', 'yellow');
        showId($(event.target));
    },
    accept: '#firstOne .listItem'
}).sortable({
    revert: true,
    update: function(event, ui) {
        showId($(event.target));
    },
    receive: function(event, ui) {
        alert('receipt');
    }
});

function giveId(list) {
    list.find(".listItem").each(function(index) {
        $(this).attr("id", "content-" + index);
    });
    showId(list)
}
// show the last items id
function showId(list) {
    list.find('span').text(list.find('.listItem:last').attr('id'));
} 
```

# mysql - MyISAM 表使用带有 ORDER BY 的文件排序，为什么？

> ID：10914510
> 
> 赞同：0
> 
> 时间：2012-06-06T12:46:42.910
> 
> 标签：mysql, myisam

为什么当我用 排序我选择的行时 mysql 使用文件排序`ORDER BY x`？

我的桌子看起来像这样：

```
CREATE TABLE `test` (
 `sdf` varchar(100) NOT NULL,
 `sdf33` varchar(100) NOT NULL,
 KEY `sdf_2` (`sdf`),
 FULLTEXT KEY `sdf33` (`sdf33`),
 FULLTEXT KEY `sdf` (`sdf`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

跑步时

```
EXPLAIN SELECT * 
FROM  `test` 
ORDER BY sdf 
```

mysql说它正在使用`filesort`，为什么？我需要改变什么才能让它不使用`filesort`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:58:55.643

该`FULLTEXT`索引不保留排序，不能用于`ORDER BY`.

但即使你有一个`BTREE`索引`sdf`，它也很可能不会被使用，因为在循环中查找表通常比按顺序扫描表并对其进行排序更昂贵。

该索引将用于`ORDER BY / LIMIT`：

```
CREATE INDEX ix_test_sdf ON test (sdf);

SELECT  *
FROM    test
ORDER BY
        sdf
LIMIT   10 
```

有一个特定的`LIMIT`阈值，之后优化器会更喜欢文件排序。

您可以强制优化器使用索引：

```
SELECT  *
FROM    test FORCE INDEX (ix_test_sdf)
ORDER BY
        sdf 
```

如果你真的不想有一个文件排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:53:53.747

您的全文索引`sdf`不能用于`ORDER BY`操作（它们只能用于`MATCH() ... AGAINST`查询），这就是它在表上使用文件排序的原因。

`sdf`解决方案是在全文索引之外添加另一个常规索引。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T12:53:45.083

在 sdf 上添加索引。并再次运行查询。

# node.js - socket.io - 什么会导致“客户端不握手客户端应该重新连接”？

> ID：10914515
> 
> 赞同：0
> 
> 时间：2012-06-06T12:47:05.187
> 
> 标签：node.js, socket.io

我使用 socket.io 0.9.6，我`client not handshaken client should reconnect`从真实用户那里得到了很多日志，但我自己永远无法重现它。

我尝试了很多浏览器（IE8-9、FF3.6-13、Chrome、Opera 11），我尝试模拟高 ping（最多 4s），但无事可做，我从来没有得到这个日志。

我能做些什么来重现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:40:50.243

This may be caused by antivirus software or firewall on the client side. I had the same problem with avast antivirus.

Possible solution: Use several commonly known ports such as 80, 25, 443, 843, 110, 5190, 5222, 5223, etc. using port forwarding on the server side. If connection fails on client side, try to change port and connect again. It works for me.

# php - 用户墙上的 Facebook 帖子在 IE 中不起作用

> ID：10914516
> 
> 赞同：0
> 
> 时间：2012-06-06T12:47:10.087
> 
> 标签：php, facebook, facebook-graph-api, azure

我正在尝试在 facebook 应用程序中的用户墙上发帖，这在 Internet Explorer 中不起作用，在其他浏览器中它正在工作。显示此错误：OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。在 IE 和其他浏览器中的 token 是不同的。

```
 try{
            $access_token = $facebook->getAccessToken();
            $attachment = array('access_token '=>$access_token ,
    'message' => $pageUrl,'name' =>"Test Name",
'link' => $pageUrl,'description'=>$desc,'picture'=>$img,'caption'=>'test '                                                              );
                $facebook->api('/me/feed', 'POST', $attachment);                                                                    }
        catch (FacebookApiException $e){ 
         echo $e;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:49:37.783

它的 php 代码不是 js，浏览器无关紧要，检查用户是否登录或者您是否正在获取访问令牌

```
var_dump($access_token); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T21:19:02.597

为了在这里帮助其他人，我正在回答您的问题。

由于这是 IE 问题，您可能需要在响应中添加 p3p 标头，以便允许 3rd 方 cookie。

请参阅：[http ://www.hanselman.com/blog/TheImportanceOfP3PAndACompactPrivacyPolicy.aspx](http://www.hanselman.com/blog/TheImportanceOfP3PAndACompactPrivacyPolicy.aspx)

或用于 php 特定编码

[http://www.sitepoint.com/p3p-cookies-ie6/](http://www.sitepoint.com/p3p-cookies-ie6/)

# php - mysqli, sha1/salt 密码有效校验

> ID：10914522
> 
> 赞同：0
> 
> 时间：2012-06-06T12:47:37.140
> 
> 标签：php, mysql

所以我正在创建一个登录表单。验证用户输入以检查电子邮件格式是否正确并且密码是否超过 6 个字符，如果这些是有效的，那么检查登录凭据是否有效并且它们是否与存储的电子邮件/密码匹配users 表。在注册表单中，我使用 sha1 和给定的 salt 对密码进行加密。当我检查密码是否正确时，我会写同样的检查，但即使我输入了正确的登录凭据，似乎也无法验证登录。所以这是我的代码：用户登录功能：

```
function user_login($email, $password){
    global $db;
    $salt='%#@#@**#_-!';
    $userid = id_from_email($email);
    $email = sanitize($email);
    $password  = sha1($password.$salt);
    $query="SELECT UserId FROM users WHERE Email= '".$email."' and UserPass= '".$password."' ";
    $result=$db->query($query);
    $valid = $result->num_rows;
    return ($valid >1) ? $userid : false;
} 
```

这是 login.php 中检查登录是否有效的部分：

```
else if(empty($errors) == true) {
        $userlogin=user_login($email, $password);
        if ($userlogin==false){
        $errors[]='Wrong email/password combination.';
        } else {
        //set the user session
        session_start();
        $_SESSION['UserId']=$userlogin;
        header('Location:success.php');
        } 
```

不管我是否输入了正确的密码和电子邮件。它总是输出“错误的电子邮件/密码组合”这是我将密码存储在 register.php 数据库中的方式

```
$salt='%#@#@**#_-!';
$password = sha1($password.$salt); 
```

如果您能帮助我，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:55:48.140

使用适当的电子邮件变量修改对数据库的调用：

```
$query="SELECT UserId FROM users WHERE Email= '".$useremail."' and UserPass= '".$password."' "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:07:09.720

你真正想要的是：

```
return ($valid >= 1) ? $userid : false; 
```

代替

```
return ($valid > 1) ? $userid : false; 
```

除非您希望至少 2 行与给定的电子邮件和密码哈希匹配。

我更喜欢这个：

```
return ($valid == 1) ? $userid : false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:04:14.507

您正在`UserId`从数据库中选择，但从未实际使用该结果；您的`user_login()`函数返回结果`id_from_email($email)`而不是从数据库收到的 ID。检查你的`id_from_email()`返回值，或者更好——从数据库查询中返回 ID。

# c++ - 使用gsoap、eclipse和ubuntu开发C++ WCF客户端

> ID：10914528
> 
> 赞同：0
> 
> 时间：2012-06-06T12:47:59.563
> 
> 标签：c++, eclipse, eclipse-cdt, gsoap

我正在尝试访问已经在 C# 中实现并在服务器上运行的 WCF 服务。我必须在客户端使用 C++，在 Linux 上运行。我在 Eclipse 中用 C++ 开发（使用 CDT 插件）。

我已经使用 gsoap 生成了存根并编译了它们

```
wsdl2h -s -o Server.h http://192.168.1.89:8080/hello?wsdl

soapcpp2 Server.h 
```

当我在 eclipse cdt projekct 中将文件包含到我的 src 文件夹中时，我收到超过 130 个错误。

我包含了 /usr/local/include 文件夹（包含 stdsoap2.h）。

在我的主文件中，我包括

```
#include "soapBasicHttpBinding_USCOREIHelloWorldServiceProxy.h"
#include "BasicHttpBinding_USCOREIHelloWorldService.nsmap" 
```

我究竟做错了什么？

谢谢你的帮助！

# tfs - TFS 合并算法问题

> ID：10914529
> 
> 赞同：2
> 
> 时间：2012-06-06T12:47:59.603
> 
> 标签：tfs, merge

我们使用 TFS 2010 并拥有三个分支：Dev -> QA -> Production。

在这个特定示例中，我们决定将方法参数类型和名称从“Guid reportGuid”更改为“int reportId”。我们在 QA 分支中进行了此更改并将其签入。现在我正尝试将此更改从 QA 拉到 Dev 分支。通常它是在相反的方向完成的，但在这种特殊情况下，我们做了我们所做的。[这](http://i45.tinypic.com/2cokmmb.jpg)是合并工具的屏幕截图。正如您从屏幕截图中看到的那样，Dev 分支中文件的最后一次签入获得了变更集编号 30282 和 QA - 31002（比 30282 更新）。至于我，很明显新的变化应该覆盖旧的变化。但是 TFS 合并的作用恰恰相反。它将 Dev 分支 (30282) 中的旧代码应用到 QA 分支 (31002) 中的新代码上，结果不会发生变化。

有人可以解释为什么 TFS 合并会这样吗？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T16:11:19.663

您正在发布 3-way 合并工具的屏幕截图 - 我怀疑您将许多智能归因于它。TFS 使用任何 3 路合并工具来解决冲突 - 默认情况下，它包括图中的那个，但是您可以将其配置为使用[您选择的任何 3 路合并工具](https://stackoverflow.com/questions/170309/best-three-way-merge-tool-for-windows)。

当 TFS 检测到冲突时（在这种情况下，合并冲突，文件在两个分支中都被编辑然后合并），它将尝试自动合并[文件](http://www.ericsink.com/scm/scm_merge_branches.html)的内容。如果无法自动合并，则需要您使用配置的 3 路合并工具来解决冲突。TFS 只需将该工具提供 3 个路径：“source”（分支中的文件，即合并的源）、“target”（分支中的文件，即合并的目标）和“base”或 common祖先。

共同祖先是在两个分支之间合并的文件的最后一个版本。如果没有执行合并，则共同祖先是文件分支所在的变更集。在您第一次将更改从源合并到目标之前，情况将一直如此。例如，考虑`$/Main/A.txt`分支到`$/Branch/A.txt`变更集 2。如果在`$/Main/A.txt`（作为变更集 3）上发生编辑，并且在`$/Branch/A.txt`（作为变更集 4）上发生编辑，那么当您尝试合并`$/Branch`到 时`$/Main`，您将在 上发生合并冲突`A.txt`。在这种情况下，共同祖先将是变更集 2（分支的版本。）

如果您要在合并工具中解决该冲突并签入结果（作为变更集 5），那么下次您从`$/Branch`to合并时`$/Main`，共同祖先`A.txt`将是变更集 5。（实际上，如果您调用“比较源在 TFS 冲突解决过程中 to base”或“compare target to base”，您应该能够看到共同的祖先及其版本信息。）

在任何情况下，一旦调用了合并工具，最终将由该工具负责提示您处理这些更改。工作流程依赖于工具，但典型的合并工具将逐行比较文件并将每一行标识为以下之一：

*   **Unchanged**：源代码和目标代码中未更改的行
*   **Common**：从共同祖先改变的行，但同样如此
*   **冲突**：在源和目标中都已更改且内容不同的行
*   **仅源**：仅在源中更改的行（目标与共同祖先相同）
*   **仅目标**：仅在目标中更改的行（源与共同祖先相同）

*如果不*存在冲突的行，则可以执行“自动合并”，这意味着通过从源中获取仅源行，从目标中获取仅目标行以及来自任一文件的公共行来修改共同祖先产生合并输出。（如果可能，TFS 将把它作为“自动合并”选项提供。）

请注意，仅仅因为自动合并是可能的（并且通常在实践中有效），它就像取行一样天真并且不执行语法检查，因此您的[自动合并输出可能不是您真正想要](http://www.edwardthomson.com/blog/conflict-resolution-in-teamprise)的。

一些 3 路合并工具可能会提供一种模式，在这种模式下它们会进行部分自动合并——默认情况下在打开时或在某些交互之后——采用通用、仅源和仅目标行，然后要求您手动解决冲突。

屏幕截图中的合并工具是与 Visual Studio ALM 捆绑的默认工具。TFS 2012 中的工具比该版本*显着*改进。[无论如何，使用第三方合并工具](https://stackoverflow.com/questions/572237/whats-the-best-three-way-merge-tool)可能会有更好的体验。

请注意，尽管有标签，但合并工具实际上并不知道哪个文件按时间顺序更新。（TFS 为合并工具提供标签以提供有关这些文件的一些上下文，合并工具只是将它们视为不透明的字符串。）“按时间顺序更新”也不一定是所有分支策略中的最佳合并策略。（我在一个使用特性分支策略的团队中工作 - 我的特性分支具有相对较高的速度，我合并来自主分支的更改，该分支以相对较慢的节奏从所有特性分支中获取经过良好测试的更改。在这种情况下，年表相当不重要，无论如何我都需要合并我的冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T16:05:22.367

看起来您在此屏幕截图上遇到了合并冲突，对吧？

首先，不要使用visual studio/TFS的merge工具，它真的没有效果，也不是很直观。使用免费的 KDiff3 或 Beyond Compare 以获得更好的自动合并和更用户友好的界面。

其次，据我所知，在 TFS 中合并不存在时间连贯性（我可能错了，但我从未听说过）。您提到的两个变更集不在同一个分支中，因此 TFS 不关心哪个变更集在另一个之后发生以及这意味着什么。

第三，合并的方向不会改变从 branch1 到 branch2 或从 branch2 到 branch1 的任何内容。唯一改变的是两个分支是否直接相关。

对我来说，您的问题主要是基于 GUI 的问题，或者您可能使用了自动合并功能，在发生冲突时这根本不智能。

1.  [按照James Manning 的帖子](http://blogs.msdn.com/b/jmanning/archive/2006/02/20/diff-merge-configuration-in-team-foundation-common-command-and-argument-values.aspx)更改您的合并工具
2.  远离自动合并

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T01:25:59.900

似乎 TFS 不支持间接集成，即从一个分支合并到另一个分支。您必须合并回父分支，然后合并到您的其他分支（DEV）请参阅此帖子：[http ://social.msdn.microsoft.com/forums/en-US/tfsversioncontrol/thread/85c4ce74-59bc-4bec- a6e9-32b6e875a15a/](http://social.msdn.microsoft.com/forums/en-US/tfsversioncontrol/thread/85c4ce74-59bc-4bec-a6e9-32b6e875a15a/)

# image - 将“http:”添加到 img src 的 innerHTML

> ID：10914537
> 
> 赞同：0
> 
> 时间：2012-06-06T12:48:17.847
> 
> 标签：image, innerhtml

如何在innerHTML 的img src 开头添加'http:'？图片未正确获取，因为 img src 是这样的“//upload/image.jpg”

提前感谢您提出的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:18:08.163

src 是 img 标签的一个属性，所以你不会使用 innerHTML。

您可以执行以下操作：

```
var myImage = document.getElementById('myImage');
myImage.src = 'http:' + myImage.src; 
```

# android - 我们可以限制Android中SearchView的edittext中的字符数吗？

> ID：10914539
> 
> 赞同：10
> 
> 时间：2012-06-06T12:48:33.923
> 
> 标签：android, android-widget

是否有任何api来设置限制号。SearchView 中的字符数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-04-11T11:59:24.850

我正在使用以下代码片段：

```
TextView et = (TextView) searchView.findViewById(R.id.search_src_text);
        et.setFilters(new InputFilter[]{new InputFilter.LengthFilter(10)}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-22T23:54:40.103

```
EditText et = (EditText)searchView.findViewById(searchView.getContext().getResources()
            .getIdentifier("android:id/search_src_text", null, null));
    et.setFilters(new InputFilter[] { new InputFilter.LengthFilter({max_text_length}) }); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-16T09:28:50.253

***使用此代码，仅当长度小于或等于 5 时才会进行搜索。您可以使其相应更改，例如当 text>5 时从 onQueryTextChange() 返回 true。***

```
 final SearchView searchView = (SearchView) mSearchMenuItem.getActionView();     
          searchView.setSearchableInfo(searchManager.getSearchableInfo(mActivity.getSearchComponentName()));
          searchView.setIconifiedByDefault(true);
          searchView.setSubmitButtonEnabled(true);
          searchView.setOnQueryTextListener(new OnQueryTextListener() {

            @Override
            public boolean onQueryTextSubmit(String arg0) {
                // TODO Auto-generated method stub
                return false;
            }

            @Override
            public boolean onQueryTextChange(String arg0) {
                if(arg0.length()>5){
                    System.out.println("Text character is more than 5");
                    searchView.setQuery(arg0.substring(0,5), false);
                }
                return false;
            }
        }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-06T12:51:35.023

```
EditText et = new EditText(this);
int maxLength = 3;
InputFilter[] FilterArray = new InputFilter[1];
FilterArray[0] = new InputFilter.LengthFilter(maxLength);
et.setFilters(FilterArray); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-06-06T13:01:12.357

在 xml 布局中试试这个..

```
 android:maxLength="20" //20 is number of characters. 
```

它可能会帮助你..

# automapper - 具有全局自动映射器但仅适用于特定地图的客户价值解析器？

> ID：10914544
> 
> 赞同：3
> 
> 时间：2012-06-06T12:48:40.687
> 
> 标签：automapper

对于映射中特定类型的每个成员，我想使用我的特定自定义值解析器。

我现在的做法是为每个需要它的成员定义这个自定义值解析器。这是当前代码：

我只想为特定地图指定这个，但是对于我所有的谷歌搜索和搜索，我都找不到解决方案。有任何想法吗？注意：它不是所有映射的全局，仅适用于特定的映射！

这是当前代码：

```
Mapper.CreateMap<csp_CheckSLAForPeriodByHour_Result, CheckSlaItem>()
    // make doubles into 0 instead of null
    .ForMember(p => p.Avg_ms, opt => opt.ResolveUsing<DoubleValueOrZeroResolver>().FromMember(p => p.avg_ms))
    .ForMember(p => p.Mdn_ms, opt => opt.ResolveUsing<DoubleValueOrZeroResolver>().FromMember(p => p.mdn_ms))
    .ForMember(p => p.Sla_i_wefu, opt => opt.ResolveUsing<DoubleValueOrZeroResolver>().FromMember(p => p.sla_i_wefu))
    .ForMember(p => p.Sla_iw_efu, opt => opt.ResolveUsing<DoubleValueOrZeroResolver>().FromMember(p => p.sla_iw_efu))
    .ForMember(p => p.Std_ms, opt => opt.ResolveUsing<DoubleValueOrZeroResolver>().FromMember(p => p.std_ms))
    // make ints into 0 instead of null
    .ForMember(p => p.Min_ms, opt => opt.ResolveUsing<IntValueOrZeroResolver>().FromMember(p => p.min_ms))
    .ForMember(p => p.Max_ms, opt => opt.ResolveUsing<IntValueOrZeroResolver>().FromMember(p => p.max_ms))
    ; 
```

我想要一些简单的东西：

```
Mapper.CreateMap<csp_CheckSLAForPeriodByHour_Result, CheckSlaItem>()
.ForAllMembers().OfType(double?).ResolveUsing<DoubleValueOrZeroResolver>() 
```

将不胜感激任何解决方案！

Brgds 里卡德·罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T19:24:56.327

实际上有一种方法在 2 年前可能不是这样。
所以你可以替换这个：

```
Mapper.CreateMap<csp_CheckSLAForPeriodByHour_Result, CheckSlaItem>()
    // make doubles into 0 instead of null
    .ForMember(p => p.Avg_ms, opt => opt.ResolveUsing<DoubleValueOrZeroResolver>().FromMember(p => p.avg_ms))
    .ForMember(p => p.Mdn_ms, opt => opt.ResolveUsing<DoubleValueOrZeroResolver>().FromMember(p => p.mdn_ms))
    .ForMember(p => p.Sla_i_wefu, opt => opt.ResolveUsing<DoubleValueOrZeroResolver>().FromMember(p => p.sla_i_wefu))
    .ForMember(p => p.Sla_iw_efu, opt => opt.ResolveUsing<DoubleValueOrZeroResolver>().FromMember(p => p.sla_iw_efu))
    .ForMember(p => p.Std_ms, opt => opt.ResolveUsing<DoubleValueOrZeroResolver>().FromMember(p => p.std_ms))
    // make ints into 0 instead of null
    .ForMember(p => p.Min_ms, opt => opt.ResolveUsing<IntValueOrZeroResolver>().FromMember(p => p.min_ms))
    .ForMember(p => p.Max_ms, opt => opt.ResolveUsing<IntValueOrZeroResolver>().FromMember(p => p.max_ms))
    ; 
```

有了这个：

```
Mapper.CreateMap<csp_CheckSLAForPeriodByHour_Result, CheckSlaItem>()
    // make doubles into 0 instead of null
    .ForAllMembers(opt => opt.ResolveUsing<DoubleValueOrZeroResolver>()); 
```

映射到 时，所有成员都`csp_CheckSLAForPeriodByHour_Result`将使用转换器进行转换。`DoubleValueOrZeroResolver``CheckSlaItem`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T12:57:17.243

答案是——你不能这样做！您必须为每个属性编写上述代码。

我的解决方案是删除 AutoMapper 并且不再触摸它。不值得麻烦并且调试起来太困难。

# android - Android焦点相关问题

> ID：10914548
> 
> 赞同：0
> 
> 时间：2012-06-06T12:48:52.707
> 
> 标签：android, android-relativelayout

我有一个`RelativeLayout`有 5 个按钮的按钮，我`RelativeLayout`在屏幕超时后将其隐藏（如果没有用户活动），当用户执行某些活动时，我将其设置为可见。

但问题是，当我将其设置`RelativeLayout`为不可见时，它会从其孩子身上移除焦点，而当我将其设置回可见时，它只会将焦点设置为第一个孩子。

`RelativeLayout`当我将其设置为可见或不可见时，我需要将焦点设置为要维护的先前聚焦的子级。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:01:55.647

```
//Global Variable.. 
  View v;

//beore you hiding the buttons 
v = getCurrentFocus ();

//after you showing the buttons 
 if(null!=v && v. isFocusable ())
    v.requestFoucs(); 
```

# java - 通过jdbc访问大型机时如何克服词法错误？

> ID：10914552
> 
> 赞同：0
> 
> 时间：2012-06-06T12:49:04.587
> 
> 标签：java, sql, jdbc, mainframe

我能够连接到 IMS 段并使用 where 子句中的主键执行 sql 查询并选择 * 查询。但是，每当我尝试对另一列进行选择时，都会出现词汇错误。

```
Select * from table where column-name='something' 
```

这会给我异常**“线程“主”com.ibm.ims.jdbc.TokenMgrError 中的异常：第 1 行第 42 列的词法错误。遇到：“-”（45），之后：“”'**。如果我将列名作为名字，那么在名字中连字符的位置会出现词汇错误。我已经尝试通过 Prepared Statement 执行此操作，但它仍然无法正常工作。

进行以下更改后，我仍然遇到异常。Select * from table where 'column-name'='something' **Caused by: com.ibm.ims.jdbc.ParseException: Encountered ""\'column-name\' "" at line 1, column 36\. 期待其中之一: ... "("** ...

Select * from table where column+'-'+name='something' 带有'-'的词法错误异常

无效的转义序列（有效的是 \b \t \n \f \r \" \' \ ），这是我尝试添加反引号或一些转义序列时收到的消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T13:42:38.560

在大多数 SQL 方言中，该`-`字符不是（未定界的）标识符中的合法字符。例如，[SQL-92 规范](http://www.andrew.cmu.edu/user/shadow/sql/sql1992.txt)说：

```
 <identifier> ::=
          [ <introducer><character set specification> ] <actual identifier>

     <actual identifier> ::=
            <regular identifier>
          | <delimited identifier>

     <SQL language identifier> ::=
          <SQL language identifier start>
            [ { <underscore> | <SQL language identifier part> }... ]

     <SQL language identifier start> ::= <simple Latin letter>

     <SQL language identifier part> ::=
            <simple Latin letter>
          | <digit> 
```

（TL；DR - 字母、数字和下划线）

（我不敢说*所有*方言，因为 SQL 语言寓言中充斥着与各种标准的偏差。）

* * *

> 这是否也适用于 %,_，我可以看到一些允许使用 %,_ 转义序列的解决方案。提到的解决方案仍然不适用于连字符。参考：myitforum.com/cs2/blogs/jnelson/archive/2008/08/27/121684.aspx

首先，您找到的参考适用于字符串文字中的转义，而不是标识符名称中的转义。它不适用于这个问题。（它适用于您的 SQL 方言吗？）

其次，根据上面的语法，标识符中应该允许使用下划线......如果您使用的 SQL 方言遵循标准。

第三，标准谈到“分隔标识符”（使用双引号字符作为分隔符）。我不知道这在真正的 SQL 方言中得到了多么广泛的支持，但我想即使是这样，你可以使用的字符也会受到限制......以及其他警告。

第四，不管 SQL 标准怎么说，您所使用的特定方言的记录语法都是您应该查看的。（我只是用它来说明 SQL 的*一般*属性......在没有你实际使用的方言的任何细节的情况下。“大型机”SQL 可能有很多东西。）

最后，最好不要尝试在标识符中使用“时髦字符”。使用拉丁字母、数字和下划线……如果您的 SQL 方言甚至不允许这样做，那么请坚持使用它所允许的内容。

并阅读供应商 SQL 文档！！！

> @Rob我都试过了，但没有奏效。

仔细阅读供应商 SQL 文档。它应该告诉你什么会起作用。如果它说你不能这样做......好吧，你不能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:54:03.233

我怀疑您所说的连字符被您的数据库解释为减号。

删除 - 或引用它，使其不会被解释为减号。

# dynamics-crm - 在 CRM 2011 中增加 SiteXML（仪表板中的左侧导航窗格）的默认宽度

> ID：10914565
> 
> 赞同：2
> 
> 时间：2012-06-06T12:49:47.727
> 
> 标签：dynamics-crm, dynamics-crm-2011, sitemap

有什么方法可以增加 CRM 2011 SiteMap 的默认宽度，即仪表板中的左侧导航窗格？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:05:47.910

才知道这是不支持的。

# rest - 三个不同平台上的数据库同步

> ID：10914567
> 
> 赞同：1
> 
> 时间：2012-06-06T12:49:52.697
> 
> 标签：rest, core-data, sqlalchemy, cocoa-design-patterns, iphonecoredatarecipes

我目前有一个使用cherryPy、PostgreSQL 和SQLalchemy 的基于Web 的应用程序。我多年来一直在使用它，但我正在考虑开发一个 iOS 应用程序，该应用程序在设备上带有一个数据库，用于无线网络连接不佳或没有无线网络连接的位置。

在 iPhone 或 iPad 上，Core Data 似乎是要走的路。

我的数据库有 20 个表，最大的一个有 75k 行。小组用户，四个用户。

我正在思考在哪里以及如何进行同步以及主数据库应该是什么。

答：在我的 Mac 上创建一个 Core Data 应用程序，通过 iCloud 与每个 iPad 或 iPhone 同步。优势：我可以在每台 iOS 设备上使用 iCloud，让 Apple 想办法优化 iOS 设备上的通信。在 Mac 上，我可以使用与 iOS 设备相同的 Core Data 模型。缺点：试图编写一个可以与四个不同用户的 iCloud 帐户通信的 Mac App。围绕 Core Data 的单用户设计工作。还必须在 Mac 和 Postgresql 数据库之间进行同步。

B：保留在线PostgreSQL数据库作为主数据库。在服务器上编写某种 REST 应用程序以与每台设备上的 Core Data 应用程序同步。但是使用什么样的格式呢？JSON？XML？当我认为 iOS 设备上有良好的网络连接和/或充电设备时，我会保存同步。

C： ？？？

以前做过这件事的人有什么建议吗？

# objective-c - Objective-C：将 int 返回到 BOOL 方法

> ID：10914573
> 
> 赞同：5
> 
> 时间：2012-06-06T12:50:41.467
> 
> 标签：objective-c, methods, integer, boolean

我是 Objective-C 的新手，我想知道为什么这个方法可以编译，谁能解释我为什么？

谢谢

```
-(BOOL) isEnabled{
   return 56;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T12:56:36.193

`BOOL`Objective-C 中的A`typedef`是`signed char`. 由于`56`适合该类型，因此从文字进行的隐式转换不会`int`导致数据丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:53:40.700

您可以将 Objective-c 中的 BOOL 视为

```
false === 0 === nil   //Anything that is zero or nil is false
true = !false         //Anything that is NOT zero or nil is true. 
```

56 因此返回真，因为它不为零

# c# - 实体名称枚举

> ID：10914575
> 
> 赞同：3
> 
> 时间：2012-06-06T12:50:50.593
> 
> 标签：c#, enums, entity, dynamics-crm-2011

为了对 Microsoft Dynamics CRM 进行查询，必须传递某些实体名称来过滤结果。但是，使用 .NET Framework 4，我没有 EntityName 枚举，尽管它应该是公共的。这是为什么？

这些是我想念的枚举：http: [//msdn.microsoft.com/en-us/library/bb959317.aspx](http://msdn.microsoft.com/en-us/library/bb959317.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T14:13:57.017

在 CRM 2011 中已弃用。来自 SDK：

> 在 Microsoft Dynamics CRM 的早期版本中，有一个名为 EntityName 的枚举，它表示每个实体的实体类型代码。对于 Microsoft Dynamics CRM 2011，这两个值已更改为每个实体类上的常量。

请参阅 SDK 主题“版本之间的更改摘要”

（您提供的示例来自 CRM 4.0 SDK）

# sql - T-SQL 拆分字符串

> ID：10914576
> 
> 赞同：162
> 
> 时间：2012-06-06T12:50:52.330
> 
> 标签：sql, sql-server, tsql, sql-server-2008, split

我有一个 SQL Server 2008 R2 列，其中包含一个我需要用逗号分隔的字符串。我在 StackOverflow 上看到了很多答案，但没有一个在 R2 中有效。我已确保我对任何拆分函数示例都具有选择权限。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2012-06-06T12:52:24.217

我之前使用过这个 SQL，它可能对你有用：-

```
CREATE FUNCTION dbo.splitstring ( @stringToSplit VARCHAR(MAX) )
RETURNS
 @returnList TABLE ([Name] [nvarchar] (500))
AS
BEGIN

 DECLARE @name NVARCHAR(255)
 DECLARE @pos INT

 WHILE CHARINDEX(',', @stringToSplit) > 0
 BEGIN
  SELECT @pos  = CHARINDEX(',', @stringToSplit)  
  SELECT @name = SUBSTRING(@stringToSplit, 1, @pos-1)

  INSERT INTO @returnList 
  SELECT @name

  SELECT @stringToSplit = SUBSTRING(@stringToSplit, @pos+1, LEN(@stringToSplit)-@pos)
 END

 INSERT INTO @returnList
 SELECT @stringToSplit

 RETURN
END 
```

并使用它：-

```
SELECT * FROM dbo.splitstring('91,12,65,78,56,789') 
```

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-11-12T17:13:33.990

有没有人考虑过一种更基于集合的方法，而不是递归 CTE 和 while 循环？请注意，此函数是针对问题编写的，它基于 SQL Server 2008 和**逗号作为分隔符**。在 SQL Server 2016 及更高版本（以及兼容级别 130 及更高版本）中，[`STRING_SPLIT()`是更好的选择](http://sqlperformance.com/2016/03/t-sql-queries/string-split)。

```
CREATE FUNCTION dbo.SplitString
(
  @List     nvarchar(max),
  @Delim    nvarchar(255)
)
RETURNS TABLE
AS
  RETURN ( SELECT [Value] FROM 
  ( 
    SELECT [Value] = LTRIM(RTRIM(SUBSTRING(@List, [Number],
      CHARINDEX(@Delim, @List + @Delim, [Number]) - [Number])))
    FROM (SELECT Number = ROW_NUMBER() OVER (ORDER BY name)
      FROM sys.all_columns) AS x WHERE Number <= LEN(@List)
      AND SUBSTRING(@Delim + @List, [Number], DATALENGTH(@Delim)/2) = @Delim
    ) AS y
  );
GO 
```

如果您想避免字符串长度限制为 <= 中的行数`sys.all_columns`（SQL Server 2017 中为 9,980 `model`；在您自己的用户数据库中要高得多），您可以使用其他方法来获取数字，例如建立自己[的数字表](https://dba.stackexchange.com/a/11564/1186)。如果您不能使用系统表或创建自己的表，您也可以使用递归 CTE：

```
CREATE FUNCTION dbo.SplitString
(
  @List     nvarchar(max),
  @Delim    nvarchar(255)
)
RETURNS TABLE WITH SCHEMABINDING
AS
   RETURN ( WITH n(n) AS (SELECT 1 UNION ALL SELECT n+1 
       FROM n WHERE n <= LEN(@List))
       SELECT [Value] = SUBSTRING(@List, n, 
       CHARINDEX(@Delim, @List + @Delim, n) - n)
       FROM n WHERE n <= LEN(@List)
      AND SUBSTRING(@Delim + @List, n, DATALENGTH(@Delim)/2) = @Delim
   );
GO 
```

但是您必须将`OPTION (MAXRECURSION 0)`(or `MAXRECURSION <longest possible string length if < 32768>`) 附加到外部查询，以避免字符串 > 100 个字符的递归错误。如果这也不是一个好的选择，那么请参阅评论中指出的[这个答案](https://stackoverflow.com/a/69541144/61305)，或者如果您需要一个*有序*的拆分字符串函数，请查看[这个答案。](https://stackoverflow.com/a/39595834/61305)

 *（此外，分隔符必须是`NCHAR(<=1228)`。仍在研究为什么。）

更多关于拆分函数、为什么（并证明）while 循环和递归 CTE 无法扩展，以及更好的替代方案，如果您要拆分来自应用程序层的字符串：

*   [拆分字符串](https://sqlblog.org/split)

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2016-03-30T10:32:15.717

终于在**SQL Server 2016**中等待结束了，他们引入了拆分字符串功能：[**`STRING_SPLIT`**](https://msdn.microsoft.com/en-gb/library/mt684588.aspx)

```
select * From STRING_SPLIT ('a,b', ',') cs 
```

所有其他拆分字符串的方法，如 XML、Tally 表、while 循环等，都被这个`STRING_SPLIT`函数所震撼。

这是一篇具有性能比较的优秀文章：[**Performance Surprises and Assumptions：STRING_SPLIT**](http://sqlperformance.com/2016/03/t-sql-queries/string-split)

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2015-01-26T15:28:23.940

最简单的方法是使用`XML`格式。

**1\. 将字符串转换为没有表的行**

**询问**

```
DECLARE @String varchar(100) = 'String1,String2,String3'
-- To change ',' to any other delimeter, just change ',' to your desired one
DECLARE @Delimiter CHAR = ','    

SELECT LTRIM(RTRIM(Split.a.value('.', 'VARCHAR(100)'))) 'Value' 
FROM  
(     
     SELECT CAST ('<M>' + REPLACE(@String, @Delimiter, '</M><M>') + '</M>' AS XML) AS Data            
) AS A 
CROSS APPLY Data.nodes ('/M') AS Split(a) 
```

**结果**

```
 x---------x
 | Value   |
 x---------x
 | String1 |
 | String2 |
 | String3 |
 x---------x 
```

**2\. 从表中转换为每个 CSV 行都有一个 ID 的行**

**源表**

```
 x-----x--------------------------x
 | Id  |           Value          |
 x-----x--------------------------x
 |  1  |  String1,String2,String3 |
 |  2  |  String4,String5,String6 |     
 x-----x--------------------------x 
```

**询问**

```
-- To change ',' to any other delimeter, just change ',' before '</M><M>' to your desired one
DECLARE @Delimiter CHAR = ','

SELECT ID,LTRIM(RTRIM(Split.a.value('.', 'VARCHAR(100)'))) 'Value' 
FROM  
(     
     SELECT ID,CAST ('<M>' + REPLACE(VALUE, @Delimiter, '</M><M>') + '</M>' AS XML) AS Data            
     FROM TABLENAME
) AS A 
CROSS APPLY Data.nodes ('/M') AS Split(a) 
```

**结果**

```
 x-----x----------x
 | Id  |  Value   |
 x-----x----------x
 |  1  |  String1 |
 |  1  |  String2 |  
 |  1  |  String3 |
 |  2  |  String4 |  
 |  2  |  String5 |
 |  2  |  String6 |     
 x-----x----------x 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-01-23T18:33:38.157

我需要一种快速摆脱**邮政编码**`+4`的方法。

 **```
UPDATE #Emails 
  SET ZIPCode = SUBSTRING(ZIPCode, 1, (CHARINDEX('-', ZIPCODE)-1)) 
  WHERE ZIPCode LIKE '%-%' 
```

没有 proc……没有 UDF……只有一个紧凑的小内联命令，它可以做它必须做的事情。不花哨，不优雅。

根据需要更改分隔符等，它将适用于任何事情。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-11-08T19:31:38.740

如果你更换

```
WHILE CHARINDEX(',', @stringToSplit) > 0 
```

和

```
WHILE LEN(@stringToSplit) > 0 
```

您可以在 while 循环之后消除最后一个插入！

```
CREATE FUNCTION dbo.splitstring ( @stringToSplit VARCHAR(MAX) )
RETURNS
 @returnList TABLE ([Name] [nvarchar] (500))
AS
BEGIN

 DECLARE @name NVARCHAR(255)
 DECLARE @pos INT

 WHILE LEN(@stringToSplit) > 0
 BEGIN
  SELECT @pos  = CHARINDEX(',', @stringToSplit)

if @pos = 0
        SELECT @pos = LEN(@stringToSplit)

  SELECT @name = SUBSTRING(@stringToSplit, 1, @pos-1)

  INSERT INTO @returnList 
  SELECT @name

  SELECT @stringToSplit = SUBSTRING(@stringToSplit, @pos+1, LEN(@stringToSplit)-@pos)
 END

 RETURN
END 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-02-02T10:43:21.710

经常使用的 XML 元素方法会在出现禁止字符的情况下中断。这是一种将此方法用于任何类型的字符的方法，即使使用分号作为分隔符也是如此。

诀窍是，首先使用`SELECT SomeString AS [*] FOR XML PATH('')`正确转义所有禁止字符。这就是为什么我将分隔符替换为*魔法值*以避免`;`作为分隔符出现问题的原因。

```
DECLARE @Dummy TABLE (ID INT, SomeTextToSplit NVARCHAR(MAX))
INSERT INTO @Dummy VALUES
 (1,N'A&B;C;D;E, F')
,(2,N'"C" & ''D'';<C>;D;E, F');

DECLARE @Delimiter NVARCHAR(10)=';'; --special effort needed (due to entities coding with "&code;")!

WITH Casted AS
(
    SELECT *
          ,CAST(N'<x>' + REPLACE((SELECT REPLACE(SomeTextToSplit,@Delimiter,N'§§Split$me$here§§') AS [*] FOR XML PATH('')),N'§§Split$me$here§§',N'</x><x>') + N'</x>' AS XML) AS SplitMe
    FROM @Dummy
)
SELECT Casted.ID
      ,x.value(N'.',N'nvarchar(max)') AS Part 
FROM Casted
CROSS APPLY SplitMe.nodes(N'/x') AS A(x) 
```

结果

```
ID  Part
1   A&B
1   C
1   D
1   E, F
2   "C" & 'D'
2   <C>
2   D
2   E, F 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-01-29T14:32:48.813

所有使用某种循环（迭代）的字符串拆分函数的性能都很差。它们应该替换为基于集合的解决方案。

这段代码执行得很好。

```
CREATE FUNCTION dbo.SplitStrings
(
   @List       NVARCHAR(MAX),
   @Delimiter  NVARCHAR(255)
)
RETURNS TABLE
WITH SCHEMABINDING
AS
   RETURN 
   (  
      SELECT Item = y.i.value('(./text())[1]', 'nvarchar(4000)')
      FROM 
      ( 
        SELECT x = CONVERT(XML, '<i>' 
          + REPLACE(@List, @Delimiter, '</i><i>') 
          + '</i>').query('.')
      ) AS a CROSS APPLY x.nodes('i') AS y(i)
   );
GO 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-07-17T03:46:32.583

我最近不得不写这样的东西。这是我想出的解决方案。它适用于任何分隔符字符串，我认为它的性能会稍好一些：

```
CREATE FUNCTION [dbo].[SplitString] 
    ( @string nvarchar(4000)
    , @delim nvarchar(100) )
RETURNS
    @result TABLE 
        ( [Value] nvarchar(4000) NOT NULL
        , [Index] int NOT NULL )
AS
BEGIN
    DECLARE @str nvarchar(4000)
          , @pos int 
          , @prv int = 1

    SELECT @pos = CHARINDEX(@delim, @string)
    WHILE @pos > 0
    BEGIN
        SELECT @str = SUBSTRING(@string, @prv, @pos - @prv)
        INSERT INTO @result SELECT @str, @prv

        SELECT @prv = @pos + LEN(@delim)
             , @pos = CHARINDEX(@delim, @string, @pos + 1)
    END

    INSERT INTO @result SELECT SUBSTRING(@string, @prv, 4000), @prv
    RETURN
END 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-06-05T02:50:27.270

如果您需要以最少代码处理常见情况的快速临时解决方案，那么这个递归 CTE 两行代码可以做到：

```
DECLARE @s VARCHAR(200) = ',1,2,,3,,,4,,,,5,'

;WITH
a AS (SELECT i=-1, j=0 UNION ALL SELECT j, CHARINDEX(',', @s, j + 1) FROM a WHERE j > i),
b AS (SELECT SUBSTRING(@s, i+1, IIF(j>0, j, LEN(@s)+1)-i-1) s FROM a WHERE i >= 0)
SELECT * FROM b 
```

要么将其用作独立语句，要么将上述 CTE 添加到您的任何查询中，您将能够将结果表`b`与其他表连接起来以用于任何进一步的表达式。

## 编辑（Shnugo）

如果你添加一个计数器，你会得到一个位置索引和列表：

```
DECLARE @s VARCHAR(200) = '1,2333,344,4'

;WITH
a AS (SELECT n=0, i=-1, j=0 UNION ALL SELECT n+1, j, CHARINDEX(',', @s, j+1) FROM a WHERE j > i),
b AS (SELECT n, SUBSTRING(@s, i+1, IIF(j>0, j, LEN(@s)+1)-i-1) s FROM a WHERE i >= 0)
SELECT * FROM b; 
```

结果：

```
n   s
1   1
2   2333
3   344
4   4 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-07-19T10:29:36.897

使用 CTE 的解决方案，如果有人需要的话（除了我，他显然做了，这就是我写它的原因）。

```
declare @StringToSplit varchar(100) = 'Test1,Test2,Test3';
declare @SplitChar varchar(10) = ',';

with StringToSplit as (
  select 
      ltrim( rtrim( substring( @StringToSplit, 1, charindex( @SplitChar, @StringToSplit ) - 1 ) ) ) Head
    , substring( @StringToSplit, charindex( @SplitChar, @StringToSplit ) + 1, len( @StringToSplit ) ) Tail

  union all

  select
      ltrim( rtrim( substring( Tail, 1, charindex( @SplitChar, Tail ) - 1 ) ) ) Head
    , substring( Tail, charindex( @SplitChar, Tail ) + 1, len( Tail ) ) Tail
  from StringToSplit
  where charindex( @SplitChar, Tail ) > 0

  union all

  select
      ltrim( rtrim( Tail ) ) Head
    , '' Tail
  from StringToSplit
  where charindex( @SplitChar, Tail ) = 0
    and len( Tail ) > 0
)
select Head from StringToSplit 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-11-14T21:11:43.277

这是更严格的定制。当我这样做时，我通常有一个以逗号分隔的唯一 ID（INT 或 BIGINT）列表，我想将其转换为一个表，以用作另一个主键为 INT 或 BIGINT 的表的内部连接。我想要返回一个内联表值函数，以便我拥有最有效的连接。

示例用法为：

```
 DECLARE @IDs VARCHAR(1000);
 SET @IDs = ',99,206,124,8967,1,7,3,45234,2,889,987979,';
 SELECT me.Value
 FROM dbo.MyEnum me
 INNER JOIN dbo.GetIntIdsTableFromDelimitedString(@IDs) ids ON me.PrimaryKey = ids.ID 
```

[我从http://sqlrecords.blogspot.com/2012/11/converting-delimited-list-to-table.html](http://sqlrecords.blogspot.com/2012/11/converting-delimited-list-to-table.html)窃取了这个想法，将其更改为内联表值并转换为 INT。

```
create function dbo.GetIntIDTableFromDelimitedString
    (
    @IDs VARCHAR(1000)  --this parameter must start and end with a comma, eg ',123,456,'
                        --all items in list must be perfectly formatted or function will error
)
RETURNS TABLE AS
 RETURN

SELECT
    CAST(SUBSTRING(@IDs,Nums.number + 1,CHARINDEX(',',@IDs,(Nums.number+2)) - Nums.number - 1) AS INT) AS ID 
FROM   
     [master].[dbo].[spt_values] Nums
WHERE Nums.Type = 'P' 
AND    Nums.number BETWEEN 1 AND DATALENGTH(@IDs)
AND    SUBSTRING(@IDs,Nums.number,1) = ','
AND    CHARINDEX(',',@IDs,(Nums.number+1)) > Nums.number;

GO 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-02-12T18:03:16.917

这里有一个正确的版本，但我认为添加一点容错会很好，以防万一它们有尾随逗号，并制作它，这样你就可以不将其用作函数，而是将其用作更大代码的一部分. 以防万一您只使用一次并且不需要功能。这也适用于整数（这是我需要的），因此您可能必须更改数据类型。

```
DECLARE @StringToSeperate VARCHAR(10)
SET @StringToSeperate = '1,2,5'

--SELECT @StringToSeperate IDs INTO #Test

DROP TABLE #IDs
CREATE TABLE #IDs (ID int) 

DECLARE @CommaSeperatedValue NVARCHAR(255) = ''
DECLARE @Position INT = LEN(@StringToSeperate)

--Add Each Value
WHILE CHARINDEX(',', @StringToSeperate) > 0
BEGIN
    SELECT @Position  = CHARINDEX(',', @StringToSeperate)  
    SELECT @CommaSeperatedValue = SUBSTRING(@StringToSeperate, 1, @Position-1)

    INSERT INTO #IDs 
    SELECT @CommaSeperatedValue

    SELECT @StringToSeperate = SUBSTRING(@StringToSeperate, @Position+1, LEN(@StringToSeperate)-@Position)

END

--Add Last Value
IF (LEN(LTRIM(RTRIM(@StringToSeperate)))>0)
BEGIN
    INSERT INTO #IDs
    SELECT SUBSTRING(@StringToSeperate, 1, @Position)
END

SELECT * FROM #IDs 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-04-17T09:40:50.053

我稍微修改了 +Andy Robinson 的功能。现在您可以从返回表中仅选择所需的部分：

```
CREATE FUNCTION dbo.splitstring ( @stringToSplit VARCHAR(MAX) )

RETURNS

 @returnList TABLE ([numOrder] [tinyint] , [Name] [nvarchar] (500)) AS
BEGIN

 DECLARE @name NVARCHAR(255)

 DECLARE @pos INT

 DECLARE @orderNum INT

 SET @orderNum=0

 WHILE CHARINDEX('.', @stringToSplit) > 0

 BEGIN
    SELECT @orderNum=@orderNum+1;
  SELECT @pos  = CHARINDEX('.', @stringToSplit)  
  SELECT @name = SUBSTRING(@stringToSplit, 1, @pos-1)

  INSERT INTO @returnList 
  SELECT @orderNum,@name

  SELECT @stringToSplit = SUBSTRING(@stringToSplit, @pos+1, LEN(@stringToSplit)-@pos)
 END
    SELECT @orderNum=@orderNum+1;
 INSERT INTO @returnList
 SELECT @orderNum, @stringToSplit

 RETURN
END

Usage: 
```

`SELECT Name FROM dbo.splitstring('ELIS.YD.CRP1.1.CBA.MDSP.T389.BT') WHERE numOrder=5`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-12-04T18:50:42.183

我通过将值包装到元素中来采用 xml 路由（M 但任何工作都有效）：

```
declare @v nvarchar(max) = '100,201,abcde'

select 
    a.value('.', 'varchar(max)')
from
    (select cast('<M>' + REPLACE(@v, ',', '</M><M>') + '</M>' AS XML) as col) as A
    CROSS APPLY A.col.nodes ('/M') AS Split(a) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-12-05T19:20:11.903

这是一个可以使用 patindex 在模式上拆分的版本，这是对上面帖子的简单改编。我有一个案例，我需要拆分一个包含多个分隔符的字符串。

```
 alter FUNCTION dbo.splitstring ( @stringToSplit VARCHAR(1000), @splitPattern varchar(10) )
RETURNS
 @returnList TABLE ([Name] [nvarchar] (500))
AS
BEGIN

 DECLARE @name NVARCHAR(255)
 DECLARE @pos INT

 WHILE PATINDEX(@splitPattern, @stringToSplit) > 0
 BEGIN
  SELECT @pos  = PATINDEX(@splitPattern, @stringToSplit)  
  SELECT @name = SUBSTRING(@stringToSplit, 1, @pos-1)

  INSERT INTO @returnList 
  SELECT @name

  SELECT @stringToSplit = SUBSTRING(@stringToSplit, @pos+1, LEN(@stringToSplit)-@pos)
 END

 INSERT INTO @returnList
 SELECT @stringToSplit

 RETURN
END
select * from dbo.splitstring('stringa/stringb/x,y,z','%[/,]%'); 
```

结果看起来像这样

stringa stringb x y z

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-04-24T08:08:44.943

我个人使用这个功能：

```
ALTER FUNCTION [dbo].[CUST_SplitString]
(
    @String NVARCHAR(4000),
    @Delimiter NCHAR(1)
)
RETURNS TABLE 
AS
RETURN 
(
    WITH Split(stpos,endpos) 
    AS(
        SELECT 0 AS stpos, CHARINDEX(@Delimiter,@String) AS endpos
        UNION ALL
        SELECT endpos+1, CHARINDEX(@Delimiter,@String,endpos+1) 
        FROM Split
        WHERE endpos > 0
    )
    SELECT 'Id' = ROW_NUMBER() OVER (ORDER BY (SELECT 1)),
        'Data' = SUBSTRING(@String,stpos,COALESCE(NULLIF(endpos,0),LEN(@String)+1)-stpos)
    FROM Split
) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-07-30T03:54:51.567

我按照[这里](https://stackoverflow.com/questions/25024198/splitting-a-dynamic-string-in-t-sql/25028433#25028433)的要求开发了一个双拆分器（需要两个拆分字符） 。在这个线程中可能有一些价值，因为它是与字符串拆分相关的查询最被引用的。

```
CREATE FUNCTION uft_DoubleSplitter 
(   
    -- Add the parameters for the function here
    @String VARCHAR(4000), 
    @Splitter1 CHAR,
    @Splitter2 CHAR
)
RETURNS @Result TABLE (Id INT,MId INT,SValue VARCHAR(4000))
AS
BEGIN
DECLARE @FResult TABLE(Id INT IDENTITY(1, 1),
                   SValue VARCHAR(4000))
DECLARE @SResult TABLE(Id INT IDENTITY(1, 1),
                   MId INT,
                   SValue VARCHAR(4000))
SET @String = @String+@Splitter1

WHILE CHARINDEX(@Splitter1, @String) > 0
    BEGIN
       DECLARE @WorkingString VARCHAR(4000) = NULL

       SET @WorkingString = SUBSTRING(@String, 1, CHARINDEX(@Splitter1, @String) - 1)
       --Print @workingString

       INSERT INTO @FResult
       SELECT CASE
            WHEN @WorkingString = '' THEN NULL
            ELSE @WorkingString
            END

       SET @String = SUBSTRING(@String, LEN(@WorkingString) + 2, LEN(@String))

    END
IF ISNULL(@Splitter2, '') != ''
    BEGIN
       DECLARE @OStartLoop INT
       DECLARE @OEndLoop INT

       SELECT @OStartLoop = MIN(Id),
            @OEndLoop = MAX(Id)
       FROM @FResult

       WHILE @OStartLoop <= @OEndLoop
          BEGIN
             DECLARE @iString VARCHAR(4000)
             DECLARE @iMId INT

             SELECT @iString = SValue+@Splitter2,
                   @iMId = Id
             FROM @FResult
             WHERE Id = @OStartLoop

             WHILE CHARINDEX(@Splitter2, @iString) > 0
                BEGIN
                    DECLARE @iWorkingString VARCHAR(4000) = NULL

                    SET @IWorkingString = SUBSTRING(@iString, 1, CHARINDEX(@Splitter2, @iString) - 1)

                    INSERT INTO @SResult
                    SELECT @iMId,
                         CASE
                         WHEN @iWorkingString = '' THEN NULL
                         ELSE @iWorkingString
                         END

                    SET @iString = SUBSTRING(@iString, LEN(@iWorkingString) + 2, LEN(@iString))

                END

             SET @OStartLoop = @OStartLoop + 1
          END
       INSERT INTO @Result
       SELECT MId AS PrimarySplitID,
            ROW_NUMBER() OVER (PARTITION BY MId ORDER BY Mid, Id) AS SecondarySplitID ,
            SValue
       FROM @SResult
    END
ELSE
    BEGIN
       INSERT INTO @Result
       SELECT Id AS PrimarySplitID,
            NULL AS SecondarySplitID,
            SValue
       FROM @FResult
    END
RETURN 
```

**用法：**

```
--FirstSplit
SELECT * FROM uft_DoubleSplitter('ValueA=ValueB=ValueC=ValueD==ValueE&ValueA=ValueB=ValueC===ValueE&ValueA=ValueB==ValueD===','&',NULL)

--Second Split
SELECT * FROM uft_DoubleSplitter('ValueA=ValueB=ValueC=ValueD==ValueE&ValueA=ValueB=ValueC===ValueE&ValueA=ValueB==ValueD===','&','=') 
```

**可能的用法（获取每个拆分的第二个值）：**

```
SELECT fn.SValue
FROM uft_DoubleSplitter('ValueA=ValueB=ValueC=ValueD==ValueE&ValueA=ValueB=ValueC===ValueE&ValueA=ValueB==ValueD===', '&', '=')AS fn
WHERE fn.mid = 2 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-03-13T21:21:21.703

基于递归 cte 的解决方案

```
declare @T table (iden int identity, col1 varchar(100));
insert into @T(col1) values
       ('ROOT/South America/Lima/Test/Test2')
     , ('ROOT/South America/Peru/Test/Test2')
     , ('ROOT//South America/Venuzuala ')
     , ('RtT/South America / ') 
     , ('ROOT/South Americas// '); 
declare @split char(1) = '/';
select @split as split;
with cte as 
(  select t.iden, case when SUBSTRING(REVERSE(rtrim(t.col1)), 1, 1) = @split then LTRIM(RTRIM(t.col1)) else LTRIM(RTRIM(t.col1)) + @split end  as col1, 0 as pos                             , 1 as cnt
   from @T t
   union all 
   select t.iden, t.col1                                                                                                                              , charindex(@split, t.col1, t.pos + 1), cnt + 1 
   from cte t 
   where charindex(@split, t.col1, t.pos + 1) > 0 
)
select t1.*, t2.pos, t2.cnt
     , ltrim(rtrim(SUBSTRING(t1.col1, t1.pos+1, t2.pos-t1.pos-1))) as bingo
from cte t1 
join cte t2 
  on t2.iden = t1.iden 
 and t2.cnt  = t1.cnt+1
 and t2.pos > t1.pos 
order by t1.iden, t1.cnt; 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-06-23T09:16:30.800

在充分尊重@AviG 的情况下，这是他设计的功能的无错误版本，用于完整返回所有令牌。

```
IF EXISTS (SELECT * FROM sys.objects WHERE type = 'TF' AND name = 'TF_SplitString')
DROP FUNCTION [dbo].[TF_SplitString]
GO

-- =============================================
-- Author:  AviG
-- Amendments:  Parameterize the delimeter and included the missing chars in last token - Gemunu Wickremasinghe
-- Description: Tabel valued function that Breaks the delimeted string by given delimeter and returns a tabel having split results
-- Usage
-- select * from   [dbo].[TF_SplitString]('token1,token2,,,,,,,,token969',',')
-- 969 items should be returned
-- select * from   [dbo].[TF_SplitString]('4672978261,4672978255',',')
-- 2 items should be returned
-- =============================================
CREATE FUNCTION dbo.TF_SplitString 
( @stringToSplit VARCHAR(MAX) ,
  @delimeter char = ','
)
RETURNS
 @returnList TABLE ([Name] [nvarchar] (500))
AS
BEGIN

    DECLARE @name NVARCHAR(255)
    DECLARE @pos INT

    WHILE LEN(@stringToSplit) > 0
    BEGIN
        SELECT @pos  = CHARINDEX(@delimeter, @stringToSplit)

        if @pos = 0
        BEGIN
            SELECT @pos = LEN(@stringToSplit)
            SELECT @name = SUBSTRING(@stringToSplit, 1, @pos)  
        END
        else 
        BEGIN
            SELECT @name = SUBSTRING(@stringToSplit, 1, @pos-1)
        END

        INSERT INTO @returnList 
        SELECT @name

        SELECT @stringToSplit = SUBSTRING(@stringToSplit, @pos+1, LEN(@stringToSplit)-@pos)
    END

 RETURN
END 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-01-25T21:00:54.700

这是基于安迪罗伯逊的回答，我需要一个逗号以外的分隔符。

```
CREATE FUNCTION dbo.splitstring ( @stringToSplit nvarchar(MAX), @delim nvarchar(max))
RETURNS
 @returnList TABLE ([value] [nvarchar] (MAX))
AS
BEGIN

 DECLARE @value NVARCHAR(max)
 DECLARE @pos INT

 WHILE CHARINDEX(@delim, @stringToSplit) > 0
 BEGIN
  SELECT @pos  = CHARINDEX(@delim, @stringToSplit)  
  SELECT @value = SUBSTRING(@stringToSplit, 1, @pos - 1)

  INSERT INTO @returnList 
  SELECT @value

  SELECT @stringToSplit = SUBSTRING(@stringToSplit, @pos + LEN(@delim), LEN(@stringToSplit) - @pos)
 END

 INSERT INTO @returnList
 SELECT @stringToSplit

 RETURN
END
GO 
```

并使用它：

```
SELECT * FROM dbo.splitstring('test1 test2 test3', ' '); 
```

（在 SQL Server 2008 R2 上测试）

编辑：正确的测试代码

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-03-10T22:09:30.733

简单的

```
DECLARE @String varchar(100) = '11,21,84,85,87'

SELECT * FROM TB_PAPEL WHERE CD_PAPEL IN (SELECT value FROM STRING_SPLIT(@String, ','))
-- EQUIVALENTE
SELECT * FROM TB_PAPEL WHERE CD_PAPEL IN (11,21,84,85,87) 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2013-10-11T12:28:22.047

```
ALTER FUNCTION [dbo].func_split_string
(
    @input as varchar(max),
    @delimiter as varchar(10) = ";"

)
RETURNS @result TABLE
(
    id smallint identity(1,1),
    csv_value varchar(max) not null
)
AS
BEGIN
    DECLARE @pos AS INT;
    DECLARE @string AS VARCHAR(MAX) = '';

    WHILE LEN(@input) > 0
    BEGIN           
        SELECT @pos = CHARINDEX(@delimiter,@input);

        IF(@pos<=0)
            select @pos = len(@input)

        IF(@pos <> LEN(@input))
            SELECT @string = SUBSTRING(@input, 1, @pos-1);
        ELSE
            SELECT @string = SUBSTRING(@input, 1, @pos);

        INSERT INTO @result SELECT @string

        SELECT @input = SUBSTRING(@input, @pos+len(@delimiter), LEN(@input)-@pos)       
    END
    RETURN  
END 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2015-07-01T22:23:06.337

您可以使用此功能：

```
 CREATE FUNCTION SplitString
        (    
           @Input NVARCHAR(MAX),
           @Character CHAR(1)
          )
            RETURNS @Output TABLE (
            Item NVARCHAR(1000)
          )
        AS
        BEGIN

      DECLARE @StartIndex INT, @EndIndex INT
      SET @StartIndex = 1
      IF SUBSTRING(@Input, LEN(@Input) - 1, LEN(@Input)) <> @Character
      BEGIN
            SET @Input = @Input + @Character
      END

      WHILE CHARINDEX(@Character, @Input) > 0
      BEGIN
            SET @EndIndex = CHARINDEX(@Character, @Input)

            INSERT INTO @Output(Item)
            SELECT SUBSTRING(@Input, @StartIndex, @EndIndex - 1)

            SET @Input = SUBSTRING(@Input, @EndIndex + 1, LEN(@Input))
      END

      RETURN
END
GO 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2016-06-24T12:32:38.330

**这是一个示例，您可以将其用作函数，也可以将相同的逻辑放入过程中。--SELECT * from [dbo].fn_SplitString ;**

```
CREATE FUNCTION [dbo].[fn_SplitString]
(@CSV VARCHAR(MAX), @Delimeter VARCHAR(100) = ',')
       RETURNS @retTable TABLE 
(

    [value] VARCHAR(MAX) NULL
)AS

BEGIN

DECLARE
       @vCSV VARCHAR (MAX) = @CSV,
       @vDelimeter VARCHAR (100) = @Delimeter;

IF @vDelimeter = ';'
BEGIN
    SET @vCSV = REPLACE(@vCSV, ';', '~!~#~');
    SET @vDelimeter = REPLACE(@vDelimeter, ';', '~!~#~');
END;

SET @vCSV = REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(@vCSV, '&', '&amp;'), '<', '&lt;'), '>', '&gt;'), '''', '&apos;'), '"', '&quot;');

DECLARE @xml XML;

SET @xml = '<i>' + REPLACE(@vCSV, @vDelimeter, '</i><i>') + '</i>';

INSERT INTO @retTable
SELECT
       x.i.value('.', 'varchar(max)') AS COLUMNNAME
  FROM @xml.nodes('//i')AS x(i);

 RETURN;
END; 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2016-08-11T20:57:41.887

/*

> 对[T-SQL 拆分字符串](https://stackoverflow.com/q/10914576/4228193)
> 的回答基于[Andy Robinson](https://stackoverflow.com/a/10914602/4228193)和[AviG](https://stackoverflow.com/a/13296353/4228193)
> 的回答 增强功能参考：[LEN 函数不包括 SQL Server 中的尾随空格](https://stackoverflow.com/q/2025585/4228193)
> 此“文件”应作为降价文件和 SQL 文件有效

```
 */

    CREATE FUNCTION dbo.splitstring ( --CREATE OR ALTER
        @stringToSplit NVARCHAR(MAX)
    ) RETURNS @returnList TABLE ([Item] NVARCHAR (MAX))
    AS BEGIN
        DECLARE @name NVARCHAR(MAX)
        DECLARE @pos BIGINT
        SET @stringToSplit = @stringToSplit + ','             -- this should allow entries that end with a `,` to have a blank value in that "column"
        WHILE ((LEN(@stringToSplit+'_') > 1)) BEGIN           -- `+'_'` gets around LEN trimming terminal spaces. See URL referenced above
            SET @pos = COALESCE(NULLIF(CHARINDEX(',', @stringToSplit),0),LEN(@stringToSplit+'_')) -- COALESCE grabs first non-null value
            SET @name = SUBSTRING(@stringToSplit, 1, @pos-1)  --MAX size of string of type nvarchar is 4000 
            SET @stringToSplit = SUBSTRING(@stringToSplit, @pos+1, 4000) -- With SUBSTRING fn (MS web): "If start is greater than the number of characters in the value expression, a zero-length expression is returned."
            INSERT INTO @returnList SELECT @name --additional debugging parameters below can be added
            -- + ' pos:' + CAST(@pos as nvarchar) + ' remain:''' + @stringToSplit + '''(' + CAST(LEN(@stringToSplit+'_')-1 as nvarchar) + ')'
        END
        RETURN
    END
    GO

/* 
```

测试用例：参见上面被称为“增强功能”的 URL

`SELECT *,LEN(Item+'_')-1 'L' from splitstring('a,,b')`

```
Item | L
---  | ---
a    | 1
     | 0
b    | 1 
```

`SELECT *,LEN(Item+'_')-1 'L' from splitstring('a,,')`

```
Item | L   
---  | ---
a    | 1
     | 0
     | 0 
```

`SELECT *,LEN(Item+'_')-1 'L' from splitstring('a,, ')`

```
Item | L   
---  | ---
a    | 1
     | 0
     | 1 
```

`SELECT *,LEN(Item+'_')-1 'L' from splitstring('a,, c ')`

```
Item | L   
---  | ---
a    | 1
     | 0
 c   | 3 
```

*/

* * *

## 回答 #27

> 赞同：-3
> 
> 时间：2016-03-08T21:17:29.540

最简单的方法：

1.  安装 SQL Server 2016
2.  使用 STRING_SPLIT [https://msdn.microsoft.com/en-us/library/mt684588.aspx](https://msdn.microsoft.com/en-us/library/mt684588.aspx)

它甚至在特快版中也有效:)。***

# sql - 高级sql查询

> ID：10914577
> 
> 赞同：1
> 
> 时间：2012-06-06T12:51:07.363
> 
> 标签：sql, alter-table

我在 sql 数据库中有两个表，我正在尝试使用我的供应商表 (vendortbl) 中的值更新我提交的表 (committedtbl) 中的一个列，该值基于两个表中的一个公共列。

两个表中都有一个带有供应商标识号 (vendorno) 的列，我尝试将 vendortbl 中的供应商描述 (vendorname) 列添加到 committbl，但其中没有值。

我需要根据来自 vendorno 的相应数字将值插入到 vendorname 中......我该如何完成？

vendorname 列已存在于我的committedtbl 中。

我已经尝试过了，但出现错误：

```
update v_vendorname
set v_vendorname = v_vendorno
from vendortbl vt
where v_vendorno = vt.v_venkey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:57:04.850

```
update committedtbl
set c.vendorname = v.vendorname
from committedtbl c
inner join vendortbl v on v.vendorno = c.vendorno 
```

# c - 对 http 请求标头值的格式感到困惑？

> ID：10914578
> 
> 赞同：0
> 
> 时间：2012-06-06T12:51:08.327
> 
> 标签：c, http

根据 rfc2616 第 3.11 节，实体标签的格式如下：

实体标签 = [ 弱 ] 不透明标签

弱 = “W/”

不透明标签 = 引用字符串

在 rfc2616 中第 14.24 节中为条件“If-match”给出的示例中如下：

如果匹配：“xyzzy”

如果匹配：“xyzzy”、“r2d2xxxx”、“c3piozzzz”

如果匹配：*

我正在用 c 做一个项目，我将在其中解析来自不同客户端的 http 请求。Web 服务器也是用 c 编写的，我可以从 Web 服务器获取请求标头和值`const char*`并解析它们。但我的困惑是，标题中的值`"If-match"`将类似于`"xyzzy, r2d2xxxx ,c3piozzzz"`还是类似于`""xyzzy", "r2d2xxxx", "c3piozzzz""`？你知道哪一个是对的吗？If-Match 标头值中的每个 etag 之间肯定会有空格，如果它有一个实体列表吗？我的意思是格式会是以下类型吗？

If-Match: "one-entity-tag",[space]"second-entity-tag",[space]"third-entity-tag"

If-Match 标头值的格式没有描述，如果它有一个 etag 列表。rfc2616 只给出了一个例子（我在上面展示过）。那个例子可靠吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:23:36.303

您可以相信规范和示例：双引号实际上是 ETag 的一部分。

# java - 如何在 GWT 中发送带有文件的 hashmap

> ID：10914584
> 
> 赞同：1
> 
> 时间：2012-06-06T12:51:28.197
> 
> 标签：java, gwt, servlets, gwt-rpc, gwt2

我想知道一些可以帮助我**将文件和哈希图发送到服务器的代码示例。**

**要将文件上传到 GWt 服务器，我使用 formpanel 和 HttpServlet。这工作正常。**

我有一个哈希图

```
 private static Map<String, List<Customproperties>> docClass =
 new HashMap<String, List<Customproperties>>(); 
```

它根据其类名持有文档的属性。

我知道如何处理 RPC。但我想使用 servlet。因为我必须上传一个我用 servlet 完成的文件。并且每个 Hashmap 都与文件相关。这个文件及其属性（在 HashMap 中）将发送到外部存储库。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:45:14.370

有 2 种方法可以将 hashmap 转换为字符串（并将其转换回 hashmap）

1：使用 JSON 库[http://json-lib.sourceforge.net/](http://json-lib.sourceforge.net/)进行转换 这将允许您将任何 java 对象转换为 JSON 字符串，以便您可以将其传输到任何地方。并且使用相同的库或另一个 JSON 库，可以将其转换回 Java 对象。

2：使用名为 XStream [http://x-stream.github.io/](http://x-stream.github.io/)的库将其转换为 XML 字符串这会将任何 Java 对象转换为表示为 XML 的字符串。

我建议将您的对象转换为 JSON 字符串，因为您使用的是 GWT，并且它对 JSON 有很多支持。JSON 是一种很好的 Web 应用格式。另一个优点是其他语言也可以将您的 JSON 字符串转换为对象。

# java - 在 Eclipse 4.2 中验证 XML 和 XSD - 缺少选项？

> ID：10914585
> 
> 赞同：1
> 
> 时间：2012-06-06T12:51:33.657
> 
> 标签：java, xml, eclipse, eclipse-plugin, eclipse-juno

不久前我切换到 Eclipse 4.2，一切都很完美，但现在我注意到当我右键单击 XML 或 XSD 文件时，我不再有验证该文件的选项（3.7 工作正常）。

我可以通过一些插件添加这些功能吗？还是该选项只是隐藏在某个子菜单中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:11:20.003

你下载的是什么4.2包？我认为该功能仅在某些软件包中可用，例如**IDE for Java EE Developers**和**IDE for Java Developers**。

*提示：您可以通过单击`Details`下载页面上软件包旁边的链接来查看每个软件包中包含哪些功能。*

# bash - shell .bashrc 不处理文本换行

> ID：10914593
> 
> 赞同：0
> 
> 时间：2012-06-06T12:51:56.823
> 
> 标签：bash, ssh

我为我的 .bashrc 找到了一个很好的自定义，以便我提示显示额外信息并提供颜色突出显示。这是我所拥有的：

```
# ----- Define a few Colors
BLACK='\e[0;30m'
BLUE='\e[0;34m'
GREEN='\e[0;32m'
CYAN='\e[0;36m'
RED='\e[0;31m'
PURPLE='\e[0;35m'
BROWN='\e[0;33m'
LIGHTGRAY='\e[0;37m'
DARKGRAY='\e[1;30m'
LIGHTBLUE='\e[1;34m'
LIGHTGREEN='\e[1;32m'
LIGHTCYAN='\e[1;36m'
LIGHTRED='\e[1;31m'
LIGHTPURPLE='\e[1;35m'
YELLOW='\e[1;33m'
WHITE='\e[1;37m'

function __setprompt {
  local SSH_IP=`echo $SSH_CLIENT | awk '{ print $1 }'`
  local SSH2_IP=`echo $SSH2_CLIENT | awk '{ print $1 }'`
  if [ $SSH2_IP ] || [ $SSH_IP ] ; then
    local SSH_FLAG="@\h"
  fi
  PS1="$CYAN[\u$SSH_FLAG:$BROWN\w$CYAN]\\$ $NOCOLOR"
  PS2="$CYAN>$NOCOLOR "
  PS4='$CYAN+$NOCOLOR '
}
__setprompt 
```

我遇到的问题是它不能正确处理换行文本（见下面的截图）。任何人都可以就问题可能提供任何建议吗？看起来它根本没有调整用户输入的内容。

![命令提示符示例](../Images/673b56011feb96a1b202318fdc2b18f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:06:37.020

`CYAN` `BROWN` `NOCOLOR`vars的价值是什么？
您很可能忘记将它们包装在`\[`and`\]`中，
将它们标记*为非打印*字符。

如果你`CYAN`是

```
CYAN="\e[0;36m" 
```

你需要把它包起来`\[`，`\]`比如

```
CYAN="\[\e[0;36m\]" 
```

* * *

否则，将变量本身包装在提示变量中，例如

```
PS2="\[$CYAN\]>\[$NOCOLOR\] " 
```

在这里查看评论：

```
function __setprompt {
  local SSH_IP="${SSH_CLIENT%% *}"      # no need for echo/awk/sed
  local SSH2_IP="${SSH2_CLIENT%% *}"    # use parameter expansion instead
  if [[ -n "$SSH2_IP" || -n "$SSH_IP" ]]; then  # bash uses double brakets
    local SSH_FLAG="@\h"                        # and the OR operator works inside
  fi
  PS1="\[$CYAN\][\u$SSH_FLAG:\[$BROWN\]\w\[$CYAN\]]\\$ \[$NOCOLOR\]"  # dont mess with [ and ]
  PS2="\[$CYAN\]>\[$NOCOLOR\] "                                       # only wrap color vars in \[ and \]
  PS4="\[$CYAN\]+\[$NOCOLOR\] "                 # single quotes will not expand $vars
}
__setprompt 
```

* * *

另外，看看`PROMPT_COMMAND`变量，

> PROMPT_COMMAND
> 如果设置，则在发出每个主要提示之前将该值作为命令执行。

并且还要注意，通过约定，大写变量名被环境使用

# php - 使用 PHP 合并图像

> ID：10914596
> 
> 赞同：0
> 
> 时间：2012-06-06T12:52:08.023
> 
> 标签：php

我写了一个合并两个图像的代码。

我的代码是：

```
$rnd = rand("99000", "99999");

$dst_path = "/home/maxioutl/public_html/images/urunler/";
$dst_file_name = "tresim-{$rnd}.jpg";
$dst_file = $dst_path.$dst_file_name;

$dst = imagecreatetruecolor(250, 375);
imagefill($dst, 0, 0, imagecolorallocate($dst, 255, 255, 255));

$src = imagecreatefromjpeg("http://www.goldstore.com.tr/upload/product/raw/3.72925.0332.JPG");

imagecopymerge($dst, $src, 40, 60, 0, 0, 250, 375, 100);

imagejpeg($dst, $dst_file, 90); 
```

结果：

![黑色背景](../Images/3c1841a423b7327ae5ea361444e2f1b1.png) 黑色背景。它在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:05:06.103

`imagecopymerge($dst, $src, 40, 60, 0, 0, 250, 375, 100);`声明是这样做的。

您传递给它的 dimensions`250x375`不是手表的实际尺寸。因此合并边界框继续并使用黑色。如果您将其注释掉，您可以很容易地看到这一点，因为您会像预期的那样从填充中得到白色方块。

您需要获取手表图形的确切尺寸（即 through `getimagesize`）并将其传递给 imagecopymerge 以便在合并时准确切割它。

```
$arrSize = getimagesize($originalFile);
imagecopymerge($dst, $src, 40, 60, 0, 0, $arrSize[0], $arrSize[1], 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:55:23.577

您编写的代码会叠加图像。它不会删除手表图像中的白色像素。

它们基本上是重叠的。

您应该循环浏览两个图像尺寸并将每个 *white 像素替换为黑色像素或透明像素。

*白色像素不一定意味着 rgb(255,255,255) 您可以选择将所有 rgb(>235,>235,>235) 的像素视为“白色”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:56:12.593

函数`imagecreatetruecolor`创建完全黑色的图像取自[这里](http://php.net/manual/en/function.imagecreatetruecolor.php)：

> imagecreatetruecolor() 返回表示指定大小的黑色图像的图像标识符。

# jquery - MVC3、Ajax 和会话

> ID：10914604
> 
> 赞同：0
> 
> 时间：2012-06-06T12:52:36.690
> 
> 标签：jquery, asp.net-mvc-3, session

我正在使用 jQuery $ajax 调用来更新页面的某些部分。但是，当 ajax 调用该操作时，我可以看到这是新会话，而不是最初呈现页面的会话。

是否有解决方法（即使通过 jQuery ajax 调用操作，我也必须驻留在同一会话中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:11:28.040

哇，解决了！

我必须在 Session 对象中至少输入一个值，然后一切正常。如果 Session 为空，则对服务器的每个请求（普通 get 或通过 ajax）都以不同的会话结束。

如果这是设计使然，看起来很奇怪！

# ruby-on-rails - 活动管理员：控制器#update 和 #create 中未定义的方法“标题”

> ID：10914606
> 
> 赞同：0
> 
> 时间：2012-06-06T12:52:37.080
> 
> 标签：ruby-on-rails, controller, activeadmin

当我想编辑我的资源条目或创建一个新条目时，我收到以下错误：

```
NoMethodError in Admin::HotelRoomsController#update 
undefined method `title' for #<HotelRoom:0x00000004a67f30> 
```

我不知道为什么。

我希望有人能帮帮忙！

这是我的模型：

```
class HotelRoom < ActiveRecord::Base
  validates :title, :presence => true
  self.table_name = "hotel_room"

  belongs_to :hotel, :foreign_key => 'H_ID'
  accepts_nested_attributes_for :hotel 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:08:56.243

天哪，我太笨了……当然这是验证，我的模型没有标题属性。估计是抄错了。

# build - 如何使用 CMake 收集源文件而不使用 globbing？

> ID：10914607
> 
> 赞同：37
> 
> 时间：2012-06-06T12:52:42.170
> 
> 标签：build, cmake

[CMake 文档](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:file)明确指出不建议为构建收集`file(GLOB ...)`源文件，但没有提及推荐的方法实际上是什么。

手动指定每个源文件对我来说听起来有点太手动了。那么，如果不是，那么收集源文件的正确方法是什么 `file(GLOB ...)`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-06T13:21:47.823

手动确实是推荐的方法。通过建议不要使用 GLOB，该文档只是对依赖于现有文件的构建系统发出警告。例如，您想添加一个测试可执行文件，因此您创建了 mytest.cpp。哎呀。现在你的库编译中断了。AUX_SOURCE_DIRECTORY 的文档（类似于源文件的通配符）给出以下警告：

> 使用此命令来避免为库或可执行目标编写源文件列表是很有诱惑力的。虽然这似乎可行，但 CMake 无法生成一个知道何时添加新源文件的构建系统。通常生成的构建系统知道何时需要重新运行 CMake，因为修改了 CMakeLists.txt 文件以添加新源。当源只是添加到目录而不修改此文件时，必须手动重新运行 CMake 以生成包含新文件的构建系统。

如果您确定想要目录的所有内容，并且不打算添加新内容，那么请务必使用 GLOB。

此外，不要忘记手动列出文件不必输入所有文件名。例如，您可以这样做，`ls *.cpp >> CMakeLists.txt`然后使用您的编辑器将文件列表移动到文件中的正确位置。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-04T19:43:58.170

我正是为此使用 GLOB，每次添加文件时我都会运行

```
touch ../src/CMakeLists.txt 
```

下一个`make`命令将重新扫描目录。

“CMake 无法生成一个知道何时添加新源文件的构建系统”真的吗？好吧，*那就说吧*！

它不是 100% 自动的，但比手动添加文件要容易得多。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-25T07:23:58.947

我使用[cog](http://nedbatchelder.com/code/cog/)，一个python模块。这是一个收集 .cpp 文件的示例：

CMakeLists.txt：

```
set(SRC_FILES "")

# [[[cog
#    import cog, glob
#    for src in glob.glob('*.cpp'):
#       if "skeleton" in src: continue
#       cog.outl("SET(SRC_FILES ${SRC_FILES} %s)" % src)
# ]]]
# [[[end]]]

add_library(mylib STATIC  ${SRC_FILES}) 
```

然后，运行：

```
python -m cogapp -r CMakeLists.txt 
```

CMakeLists.txt 文件将就地更新。

cog安装方法及其他使用方法请阅读[作者的文章](http://nedbatchelder.com/code/cog/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-18T09:56:30.033

我使用传统的 CMakeLists.txt 和 python 脚本来更新它。添加文件后，我手动运行 python 脚本。

```
import os
import re       

def relFiles(base, sub):
    fullSub = os.path.join(base,sub)
    abs = [os.path.join(dp, f) for dp, dn, fn in os.walk(fullSub) for f in fn]
    return [os.path.relpath(f, base) for f in abs]

def updateAddLibrary(cmakelistsDir, subs):
    cmakelists = os.path.join(cmakelistsDir, "CMakeLists.txt")
    listings = [relFiles(cmakelistsDir, sub) for sub in subs]
    files = [f for listing in listings for f in listing] #flatten
    with open(cmakelists, 'r') as file:
        text = file.read()
    sources = "".join(["    %s\n" % f.replace('\\', '/') for f in files])
    text = re.sub(r"add_library\s*\(\s*([^\s\)]+).*?\)",
           r"add_library(\1\n%s)" % sources, 
           text, 1, re.DOTALL)
    with open(cmakelists, "w") as file:
        file.write(text)

dir = os.path.dirname(os.path.abspath(__file__))
updateAddLibrary(dir, ['inc','src']) 
```

之前的例子：

```
...
add_library(MyLib
    inc/a.h
) 
... 
```

后：

```
...
add_library(MyLib
    inc/a.h
    inc/sub/b.h
    src/a.cpp
)        
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-08T10:40:05.360

按照douyw的回答，谢谢您的回答。

不是 Cmake 专家，不想成为专家，我花了 3 个小时来尝试处理 GLOB（禁用）和 aux_source_directory（甚至不接近 GLOB），并且 douyw 救了我的命。

我添加了递归文件遍历，它在我的项目中工作：

首先，安装 cogapp python 模块（python -m pip install cogapp）

```
set(SRC_FILES "")

# [[[cog
#   import cog, os
#   for root, _, files in os.walk(".", topdown=False):
#       for f in files: 
#           if not "_unittest" in f: continue
#           if not f.endswith(".cpp"): continue
#           cog.outl('SET(SRC_FILES ${SRC_FILES} "%s")' % os.path.join(root, f).replace('\\', '/'))
# ]]]
# [[[end]]] 
```

运行：python -m cogapp -r CMakeLists.txt

*   上面的行将所有“*_unittest.cpp”添加到列表中
*   您可以更改中间线以制定自己的规则，只是普通的 python。使用正则表达式更好，但简单的字符串搜索可以在上述情况下完成工作。
*   注意最后一行，它需要替换 // 以更改为可用的通用分隔符。您可以在 Windows 中生成您的 CMakeList.txt。
*   您可以将 SRC_FILES 替换为您想要的任何内容。
*   python 命令可以在 Jenkins/TeamCity 下运行，由 svn/git commit 触发。然后我们可以自动添加新文件。

# c# - 在运行时将用户控件设置为另一个窗口的内容

> ID：10914610
> 
> 赞同：2
> 
> 时间：2012-06-06T12:52:44.703
> 
> 标签：c#, wpf, user-controls, fullscreen

我有一个带有用户控件的窗口。此用户控件有一个按钮，可将用户控件最大化到全屏。

为了实现这一点，我创建了一个临时窗口，我将其缩放到当前屏幕边界并将其内容设置为用户控件。

```
private void OnBtnMaximizeClick(object sender, RoutedEventArgs e)
    {
      if (this.btnMaximize.IsChecked == true)
      {
        if (tempfullScreenWindow == null)
        {
          tempfullScreenWindow = new Window();
          tempfullScreenWindow.WindowStyle = WindowStyle.None;
          tempfullScreenWindow.ResizeMode = ResizeMode.NoResize;
        }
        var ownerWindow = Window.GetWindow(this);

        Screen screen = this.GetContainingScreen(ownerWindow);

        tempfullScreenWindow.Left = screen.WorkingArea.Left;
        tempfullScreenWindow.Top = screen.WorkingArea.Top;
        tempfullScreenWindow.Width = screen.Bounds.Width;
        tempfullScreenWindow.Height = screen.Bounds.Height;

        // InvalidOperationException comes here (Specified element is already the logical child of another element. Disconnect it first.)
        tempfullScreenWindow.Content = this;  

        tempfullScreenWindow.Owner = ownerWindow;
        tempfullScreenWindow.ShowDialog();
      }
      else
      {
        if (tempfullScreenWindow != null)
        {
          tempfullScreenWindow.Close();
        }
      }
    } 
```

如何将用户控件设置为新创建的窗口的内容，方法是将其与所有者窗口分离，并在临时窗口关闭时将其重新附加到父窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:02:51.263

为什么这么复杂？

您只需要将当前主机窗体切换到全屏模式。

```
public void GoToFullScreen()
{
  this.FormBorderStyle = FormBorderStyle.None;
  this.WindowSate = FormWindowState.Maximized;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:05:48.583

采用

```
mywindow.Content = new MyuserControl(); 
```

确保控件一次只能有一个父级。首先从第一个窗口分离，然后将其附加到其他窗口。

# .net - VSTO 与主互操作程序集，有什么区别？

> ID：10914615
> 
> 赞同：12
> 
> 时间：2012-06-06T12:53:01.153
> 
> 标签：.net, visual-studio-2010, vsto, ms-office

我已经开发了一个大型的 Office 应用程序级插件，它的工作原理很吸引人，但我在理解技术基础时遇到了问题。

1.  **那么VSTO**和**PIA**到底有什么用呢？
2.  **VSTO**是否只是为 Visual Studio 提供了合适的*项目类型*，仅此而已？
3.  **主互操作程序**集 (PIA)是否只是用于访问*Office 对象模型*的某种包装器？
4.  它们都提供了比我知道的更多的东西和功能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T14:43:01.250

[VSTO 是](http://msdn.microsoft.com/en-us/library/bb608603.aspx)通过 PIA 向 Office 子系统提供挂钩（*解决方案加载器）的应用程序运行时。*[PIA 是](http://msdn.microsoft.com/en-us/library/15s06t57)`IDTExtensibility2`围绕构建 Office的非托管 COM API ( ) 的包装器。PIA 提供托管访问并在 VSTO 运行时之上运行。

VSTO 附带项目类型，用于构建检测依赖项和在运行时加载加载项所需的[部署清单。](http://msdn.microsoft.com/en-us/library/bb771323)

[PIA 提供](http://msdn.microsoft.com/en-us/library/bb771305)对 COM 对象模型的托管访问，但如果您希望更好地控制解决方案的加载方式，它也[支持非托管访问（](http://msdn.microsoft.com/en-us/library/aa942114)*因此您始终拥有 VSTO 运行时，但并不总是拥有 PIA*）。

这个[MSDN 链接很好地概述了 PIA 和 VSTO 的演变，](http://msdn.microsoft.com/en-us/library/aa537182.aspx)这[`IDtExtensibility2`](http://msdn.microsoft.com/en-us/library/extensibility.idtextensibility2%28v=vs.100%29.aspx)是另一个加载选项（*在 PIA 之外*）

# visual-studio-2010 - Windows Phone 应用程序的搜索功能

> ID：10914617
> 
> 赞同：1
> 
> 时间：2012-06-06T12:53:15.217
> 
> 标签：visual-studio-2010, windows-phone-7, silverlight-4.0, httpwebrequest, windows-phone-7.1

我是编程方面的新手（几年前曾与 Delphi 合作过），但已经开始为 Windows Phone 7.5 Mango 构建应用程序，因为我对应用程序有一个好主意：D 在应用程序中，用户应该能够从列表中选择不同的位置（一个非常大的列表，5k+ 项） - 为确保所有用户始终获得最新列表，我在我的网站上创建了一个 SQL 以将列表生成为 XML - 我将其加载到应用程序通过httpwebrequest；我不太确定在处理大量列表时的最佳做法是什么，这些列表会经常更新等？

这不是你的主要问题，因为这似乎工作得很好——我真正的问题是，如何向我的应用程序添加搜索功能，以便用户可以搜索位置而不是滚动整个列表？

我的 SQL 由 ID、Country、State、Region、City（以及一些与搜索功能无关的表）组成。

我不知道解决这个问题的最佳方法是什么？我应该在我的网站上进行查询并将结果生成为 XML 并使用 httpwebrequest 将结果发送到手机 - 还是应该是设备上的搜索功能来搜索整个列表？如果是这样，我该怎么做？

谢谢 ;-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:28:43.190

首先，我必须通知您，通过不使用无线网络的智能手机获取超过 5k+ 项的列表将需要一段时间。因此，在我看来，如果用户只对几个项目感兴趣，那么下载整个列表会浪费大量流量。这基本上意味着您正在下载一堆日期，但只使用其中的 0.01%，这不是您构建程序的方式。

因此，根据我的说法，您应该创建一个 Web 服务，以便用户可以调用该 Web 服务并使用其搜索参数发出一个 http 请求。然后你基本上只是在 SQL 搜索查询中使用参数，它可能是一个存储过程或只是代码中的裸露，但我不知道你的服务器/数据库是如何构建和构造的，所以你基本上可以选择它。

**这是一个例子：**

```
SELECT * FROM TABLE_NAME WHERE (ID=@ID) OR (Country=@Country) OR (State=@State) OR (Region=@Region) OR (City=@City) 
```

如果我会做这个应用程序，我会有两个参数。一种表示用户输入，也就是搜索文本，另一种用于解释 serach 参数是什么。（ID、国家、州、地区或城市？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:08:52.037

您必须使用一些逻辑为 TextBox.TextChanged 注册句柄函数以过滤经常发生的查询（例如，键入名称 John 可能会导致 4 个请求：J、Jo、Joh、John）。可以通过使用 System.Threading.Timer 和延迟启动并在用户键入新字符时更改它的开始时间来完成（如果您需要示例 - 询问）。那么我推荐你使用 WCF 服务与 SQL 数据库“对话”。在 WCF 服务上，使用任何 ORM（最简单的实体框架）来查询您的数据库。

# ipad - iPad Safari 不会触发模糊事件

> ID：10914623
> 
> 赞同：16
> 
> 时间：2012-06-06T12:53:30.373
> 
> 标签：ipad, mobile-safari

我的应用程序中有一个带有 jQ​​uery 模糊事件处理程序的 html 输入文本元素：

```
$('#textBox').blur(function () { console.log('blur'); }) 
```

当我单击文本框外的页面区域时，桌面浏览器会触发此事件，但 iPad Safari 不会。键盘和光标都不会消失。有什么方法可以“启用”模糊事件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-15T23:33:03.773

按照设计，轻按一下将删除悬停状态，但文本框将保持焦点。

[Safari Web Content Guide](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)应该可以帮助您在 IOS 设备上开发 Safari。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T11:31:33.743

解决方法（尽管不推荐）：[https ://codepen.io/kevinfarrugia/pen/rKpRBL](https://codepen.io/kevinfarrugia/pen/rKpRBL)

```
document.getElementById("container").addEventListener("click", () => {
  document.getElementById("container").focus();
}); 
```

# ios - 列出从文件夹到表格视图的文件

> ID：10914624
> 
> 赞同：0
> 
> 时间：2012-06-06T12:53:32.957
> 
> 标签：ios, xcode

我使用“为任何添加的文件夹递归创建组”在我的 xcode 项目中添加了一个名为“Audio”的文件夹。

该文件夹包含一些音频歌曲。我想生成一个歌曲列表，动态地从添加的文件夹中获取歌曲。请帮助我如何做到这一点。

如果使用文件夹引用添加文件夹，我可以创建歌曲列表。但我不希望那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:05:47.963

这应该有效：

```
 NSArray * thelist
   =[[NSFileManager defaultManager] contentsOfDirectoryAtPath:path error:nil]; 
```

直接来自文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)

# iphone - 在 PhoneGap 1.7 中创建故事板

> ID：10914628
> 
> 赞同：0
> 
> 时间：2012-06-06T12:53:44.563
> 
> 标签：iphone, ios, xcode, cordova, storyboard

我有一个关于在 PhoneGap 1.7 项目中使用 Xcode 故事板的问题。我创建了一个空的 PG 项目，向项目中添加了一个故事板文件并将一个视图控制器拖到故事板上。但我找不到将此控制器绑定到 PhoneGap 框架创建的变量的方法：

```
CDVViewController* viewController; 
```

如果可以的话怎么绑定？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:40:18.027

确保将 InterfaceBuilder 中的 ViewController 绑定到*CDVViewController*类或您自己的子类。在 IB 中添加 webview 并将其绑定到上述视图控制器的 CDVCordovaView 也可能很有用。

您需要注意的一件事是*CDVViewController*没有实现`initWithCoder:`Storyboard 使用所需的方法（从 Cordova 2.2.0 开始）。将以下方法添加到*CDVViewController*，以便在从 Storyboard 实例化时正确初始化视图控制器：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self __init];
    }
    return self;
} 
```

# c++ - 函数实际上是如何按值返回的？

> ID：10914633
> 
> 赞同：5
> 
> 时间：2012-06-06T12:54:03.050
> 
> 标签：c++, temporary, return-by-value

如果我有一个 A 类（它按值返回一个对象），并且两个函数 f() 和 g() 仅在它们的返回变量上有所不同：

```
class A
{
    public:
    A () { cout<<"constructor, "; }
    A (const A& ) { cout<<"copy-constructor, "; }
    A& operator = (const A& ) { cout<<"assignment, "; }
    ~A () { cout<<"destructor, "; }
};
    const A f(A x)
    {A y; cout<<"f, "; return y;}

    const A g(A x)
    {A y; cout<<"g, "; return x;}

main()
{
    A a;
    A b = f(a);
    A c = g(a);
} 
```

现在当我执行 line 时`A b = f(a);`，它​​输出：

`copy-constructor, constructor, f, destructor`, 假设 f() 中的对象 y 是直接在目标（即对象 b 的内存位置）创建的，并且不涉及临时对象，这很好。

当我执行 line 时`A c = g(a);`，它​​输出：

`copy-constructor, constructor, g, copy-constructor, destructor, destructor,`.

所以问题是为什么在 g() 的情况下不能直接在 c 的内存位置创建对象，就像调用 f() 时发生的那样？为什么它在第二种情况下调用一个额外的复制构造函数（我认为这是因为临时的参与）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T13:26:36.373

问题在于，在第二种情况下，您将返回其中一个参数。鉴于通常参数复制发生在调用者的位置，而不是在函数内（`main`在这种情况下），编译器会进行复制，然后在进入`g()`.

来自[http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)

> 其次，我还没有找到一个编译器可以在返回函数参数时忽略副本，就像我们的 sorted 实现一样。当您考虑这些省略是如何完成的时，这是有道理的：如果没有某种形式的过程间优化， sorted 的调用者无法知道最终将返回参数（而不是其他对象），因此编译器必须在堆栈上为参数和返回值分配单独的空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T13:37:46.717

这是对您的代码的一些修改，它将帮助您完全理解那里发生的事情：

```
class A{
public:
    A(const char* cname) : name(cname){
        std::cout << "constructing " << cname << std::endl;
    }
    ~A(){
        std::cout << "destructing " << name.c_str() << std::endl;
    }
    A(A const& a){
        if (name.empty()) name = "*tmp copy*";
        std::cout 
            << "creating " << name.c_str() 
            << " by copying " << a.name.c_str() << std::endl;
    }
    A& operator=(A const& a){
        std::cout
            << "assignment ( "
                << name.c_str() << " = " << a.name.c_str()
            << " )"<< std::endl;
        return *this;
    }
    std::string name;
}; 
```

下面是这个类的用法：

```
const A f(A x){
    std::cout 
        << "// renaming " << x.name.c_str() 
        << " to x in f()" << std::endl;
    x.name = "x in f()";
    A y("y in f()");
    return y;
}

const A g(A x){
    std::cout 
        << "// renaming " << x.name.c_str()
        << " to x in f()" << std::endl;
    x.name = "x in g()";
    A y("y in g()");
    return x;
}

int main(){
    A a("a in main()");
    std::cout << "- - - - - - calling f:" << std::endl;
    A b = f(a);
    b.name = "b in main()";
    std::cout << "- - - - - - calling g:" << std::endl;
    A c = g(a);
    c.name = "c in main()";
    std::cout << ">>> leaving the scope:" << std::endl;
    return 0;
} 
```

这是在没有任何优化的情况下编译时的输出：

```
constructing a in main()
- - - - - - calling f:
creating *tmp copy* by copying a in main()
// renaming *tmp copy* to x in f()
constructing y in f()
creating *tmp copy* by copying y in f()
destructing y in f()
destructing x in f()
- - - - - - calling g:
creating *tmp copy* by copying a in main()
// renaming *tmp copy* to x in f()
constructing y in g()
creating *tmp copy* by copying x in g()
destructing y in g()
destructing x in g()
>>> leaving the scope:
destructing c in main()
destructing b in main()
destructing a in main() 
```

您发布的输出是使用[Named Return Value Optimization](http://msdn.microsoft.com/en-us/library/ms364057.aspx)编译的程序的输出。在这种情况下*，编译器会尝试消除冗余的 Copy 构造函数和 Destructor 调用*，这意味着在返回对象时，它将尝试返回对象而不创建其冗余副本。这是启用 NRVO 的输出：

```
constructing a in main()
- - - - - - calling f:
creating *tmp copy* by copying a in main()
// renaming *tmp copy* to x in f()
constructing y in f()
destructing x in f()
- - - - - - calling g:
creating *tmp copy* by copying a in main()
// renaming *tmp copy* to x in f()
constructing y in g()
creating *tmp copy* by copying x in g()
destructing y in g()
destructing x in g()
>>> leaving the scope:
destructing c in main()
destructing b in main()
destructing a in main() 
```

在第一种情况下，由于 NRVO 已完成其工作，因此不会创建`*tmp copy*`通过复制。`y in f()`在第二种情况下，由于在此函数中声明了另一个返回槽的候选者，因此无法应用 NRVO。有关更多信息，请参阅：[C++：使用“return”语句避免复制](https://stackoverflow.com/q/10476665/1168156):)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T13:55:22.310

不同之处在于，在这种`g`情况下，您将返回一个传递给函数的值。该标准明确规定了在哪些条件下可以在 12.8p31 中删除副本，并且不包括从函数参数中删除副本。

基本上问题是参数的位置和返回的对象是由调用约定固定的，编译器无法根据*实现*（甚至可能在调用位置不可见）返回的事实来更改调用约定论点。

前段时间我开了一个短暂的博客（我希望有更多的时间......），我写了几篇关于 NRVO 和复制省略的文章，这可能有助于澄清这一点（或者不是，谁知道 :)）：

[值语义：NRVO](http://definedbehavior.blogspot.com/2011/08/value-semantics-nrvo.html)

[值语义：复制省略](http://definedbehavior.blogspot.com/2011/08/value-semantics-copy-elision.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:55:43.503

它可以（几乎）优化整个 g() 函数调用，在这种情况下，您的代码如下所示：

```
A a;
A c = a; 
```

实际上，这就是您的代码正在做的事情。现在，当您`a`作为按值参数（即不是引用）传递时，编译器几乎必须在那里执行一个复制，然后它按值返回这个参数，它必须执行另一个复制。

在 f() 的情况下，因为它将实际上是一个临时的东西返回到一个未初始化的变量中，编译器可以看到它`c`用作 f() 内部变量的存储是安全的。

# php - PHP CSV 文件在空行上停止

> ID：10914644
> 
> 赞同：1
> 
> 时间：2012-06-06T12:54:51.577
> 
> 标签：php, csv, fgetcsv

我正在尝试将上传的 CSV 文件处理成 PHP 中的数组。我的工作正常，但是来自用户的一些文件最终有一堆带分隔符的空白行。这通常发生在他们在现有文件上使用 Excel 时。突出显示旧单元格并清除它们。

示例 CSV 文件

```
行号、日期、供应商、金额
1,5/2/2012,V000236,3727.21
2,5/2/2012,V003432,4826.19
,,,
,,,

```

变成下面的数组

```
大批
(
    [0] => 数组
        (
            [0] => 行号
            [1] => 日期
            [2] => 供应商
            [3] => 数量
        )

    [1] => 数组
        (
            [0] => 1
            [1] => 2012 年 5 月 2 日
            [2] => V000236
            [3] => 3727.21
        )

    [2] => 数组
        (
            [0] => 2
            [1] => 2012 年 5 月 2 日
            [2] => V003432
            [3] => 4826.19
        )

    [3] => 数组
        (
            [0] =>
            [1] =>
            [2] =>
            [3] =>
        )

    [4] => 数组
        (
            [0] =>
            [1] =>
            [2] =>
            [3] =>
        )
)
```

我不想只删除任何空白行，我想在数组索引 2 之后停止。在我的函数上放轻松我是新人：P

```
function csvToArray($csvFile, $specialChars = FALSE) {
$arrayCSV = array();

if (($csvHandle = fopen($csvFile, "r")) !== FALSE) { // Open the CSV
    $csvKey = 0; // Set the parent array key to 0

    while (($csvData = fgetcsv($csvHandle)) !== FALSE) {
        $c = count($csvData); // Count the total keys in each row

        //need something to stop on blank delimiter rows ,,,

        for ($x = 0; $x < $c; $x++) { //Populate the array
            if ($specialChars === TRUE) {
                $arrayCSV[$csvKey][$x] = htmlspecialchars($csvData[$x]);
            } else {
                $arrayCSV[$csvKey][$x] = $csvData[$x];
            }
        }
        $csvKey++;
    }

    fclose($csvHandle);
}

return $arrayCSV;
} 
```

最终，我希望这个返回

```
大批
(
    [0] => 数组
        (
            [0] => 行号
            [1] => 日期
            [2] => 供应商
            [3] => 数量
        )

    [1] => 数组
        (
            [0] => 1
            [1] => 2012 年 5 月 2 日
            [2] => V000236
            [3] => 3727.21
        )

    [2] => 数组
        (
            [0] => 2
            [1] => 2012 年 5 月 2 日
            [2] => V003432
            [3] => 4826.19
        )
)
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:59:44.927

`break;`一旦找到空值，您就不能使用while循环吗？

```
if (($csvHandle = fopen($csvFile, "r")) !== FALSE) { // Open the CSV
    $csvKey = 0; // Set the parent array key to 0

    while (($csvData = fgetcsv($csvHandle)) !== FALSE) {
        $c = count($csvData); // Count the total keys in each row

        // ## Flag variable ##########
        $empty = true;

        for ($x = 0; $x < $c; $x++) { //Populate the array

            // ## Test each value ##########
            $empty = $empty && (empty($csvData[$x]));

            if ($specialChars === TRUE) {
                $arrayCSV[$csvKey][$x] = htmlspecialchars($csvData[$x]);
            } else {
                $arrayCSV[$csvKey][$x] = $csvData[$x];
            }
        }

        // ## Stop loop if all empty ##########
        if ($empty) {
             unset($arrayCSV[$csvKey]);
             break;
        }
        $csvKey++;

    }

    fclose($csvHandle);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:18:57.113

笔记：

> CSV 文件中的空白行将作为包含**单个** ***空***字段的数组返回，并且不会被视为错误。

```
 if ($c == 1 && current($csvData) === null) {
        break;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-20T13:28:51.680

您可以运行一个额外的循环来检查空

```
while(! feof($file)){
        $current_data = fgetcsv($file);   

        for ($i=0; $i < $total_title ; $i++) {    
            if( empty( $current_data[ $i ] )  ){                    
                unset($information[$itt]);
                break;
            }
            $information[$itt][ $titles[$i] ] = $current_data[$i] ;                
        }            
        $itt = $itt+1;            
    } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-06T12:59:24.567

我推荐这个 php 函数，它完全符合你的要求

[http://www.php.net/manual/es/function.file.php](http://www.php.net/manual/es/function.file.php)

# android - libgdx Android应用程序类

> ID：10914646
> 
> 赞同：1
> 
> 时间：2012-06-06T12:54:55.723
> 
> 标签：android, libgdx

AndroidApplication 类扩展了 android 活动类，那么为什么它会给出以下错误：

```
 06-06 05:47:17.610: E/AndroidRuntime(12567): java.lang.RuntimeException: Unable to resume activity {com.badlogic.drop/com.badlogic.drop.MainActivity}: java.lang.NullPointerException
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2288)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2316)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1836)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.app.ActivityThread.access$500(ActivityThread.java:122)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.os.Looper.loop(Looper.java:132)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.app.ActivityThread.main(ActivityThread.java:4123)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at java.lang.reflect.Method.invokeNative(Native Method)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at java.lang.reflect.Method.invoke(Method.java:491)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at dalvik.system.NativeStart.main(Native Method)
06-06 05:47:17.610: E/AndroidRuntime(12567): Caused by: java.lang.NullPointerException
06-06 05:47:17.610: E/AndroidRuntime(12567):    at com.badlogic.gdx.backends.android.AndroidApplication.onResume(AndroidApplication.java:223)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1153)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.app.Activity.performResume(Activity.java:4468)
06-06 05:47:17.610: E/AndroidRuntime(12567):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2278) 
```

我将 MainActivity 类从 Activity 扩展到 AndroidApplication ，然后它给出了上述错误。但是当我取消注释以下评论部分时，它会完美运行。请帮助解决它。

```
public class MainActivity extends AndroidApplication {

 AndroidApplication app;
 LinearLayout m3d;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

/* AndroidApplicationConfiguration config = new AndroidApplicationConfiguration();
        config.useGL20 = false;
        config.useAccelerometer = false;
        config.useCompass = false;

        m3d = (LinearLayout) findViewById(R.id.m3d);
        View m3dDrop =  initializeForView(new Drop(), config);

        m3d.addView(m3dDrop); */ 

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:33:38.487

我猜这是因为你没有打电话`initializeForView()`，需要打电话`onCreate()`。该[文档](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/backends/android/AndroidApplication.html#initializeForView%28com.badlogic.gdx.ApplicationListener,%20com.badlogic.gdx.backends.android.AndroidApplicationConfiguration%29)解释说您需要所有注释代码。

要解决，只需将注释的代码放回去。你为什么还要把它拿出来？

# licensing - CPAL 骡子许可证

> ID：10914647
> 
> 赞同：2
> 
> 时间：2012-06-06T12:55:13.070
> 
> 标签：licensing, mule

我对 Mule ESB 感兴趣，但我不了解许可证，有人可以用简单的话解释一下 CPAL 许可证吗？

我们有一个商业产品（JavaEE Web 应用程序），需要与托管在客户环境中的解决方案集成。例如，客户拥有 SAP 安装或任何其他数据源，并希望将其与我们的 Java Web 应用程序集成。我们希望 Mule 实现此功能，CPAL 许可证是否允许这样做？

我们的应用程序和 Mule 可以托管在我们的内部机器或客户端上，这两种方式都是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:48:05.757

第一：我对法律一无所知。

也就是说，CPAL 许可证基于 Mozilla 公共许可证，它没有 GPL 严格，只要代码保持开放，您就可以相当自由地混合许可证。

CPAL 引入了一个概念，如果您在其中运行带有 CPAL 代码的应用程序（例如 Mule），作为“云”服务，那么您也必须提供代码。简而言之，如果您更改 Mule 源代码并将其托管为云服务，您将不得不给出您的修改。

我真的建议您与您所在地区的律师交谈（了解当地法律和非物质法律等）。但是，我确实知道一些公司将 Mule CE 与商业产品“捆绑”在一起，而不用担心许可证问题，其方式与您的情况非常相似。

# facebook - 如何从我的网站为喜欢和发送按钮创建应用 ID

> ID：10914648
> 
> 赞同：0
> 
> 时间：2012-06-06T12:55:16.223
> 
> 标签：facebook

我一直在努力使用 Facebook xfbml 代码和 og 标签在我的网站页面上插入一个赞和发送按钮 - 并决定我真的需要一个应用程序 ID，因为我从发送按钮收到错误 - 并且预计会有很多数以千计的页面被点赞 - 并且希望以有组织的方式管理它们，我相信如果网站注册为应用程序，我可以做到这一点。

好的，所以我开始了创建我的应用程序的过程——我几乎马上就被卡住了——在基本信息屏幕上。没有一个选项卡似乎适合我的情况 - 我不希望我的网站有一个 facebook 登录（我认为......如果这意味着任何去它的人都需要先用 Facebook 登录）而且它不仅仅是一个移动网站等...它只是一个基本网站，我需要点赞和发送按钮才能在其上运行。

所以我填写了我可以填写的信息 - 注意到我的“如何”教程（非 FB）告诉我应该存在“网站”选项卡（也许该选项卡已替换为“使用 Facebook 登录的网站”？ ) 我尝试继续但收到此错误：

您已指定应用程序域但未指定站点 URL 或移动 Web URL www.mydomain.com.au 必须从您的站点 URL 或移动 Web URL 派生。

有人可以在这里照亮我吗？

# android - Android 网络服务数据集

> ID：10914650
> 
> 赞同：1
> 
> 时间：2012-06-06T12:55:21.623
> 
> 标签：android, web-services

我一般如何为 Web 服务编写一个 Web 方法，该方法通过从 android 使用它来将值作为“数据集”返回。

这种网络方法对吗？

```
public class GetName
{
 public DataSet GetName(String str)
 {
    return str;
}
} 
```

如果没有，请让我现在有任何想法或示例来源。我已经根据我的知识进行了谷歌搜索，但仍在寻找解决方案。

感谢您宝贵的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:56:55.127

我认为您正在用 Java 开发 Web 服务。不，没有数据类型作为 java 中的数据集，但是如果您愿意，您可以将响应作为字符串数组返回。这意味着在字符串的二维数组中获取响应（表）并返回该响应。

# algorithm - 生成与数组中的数字不同的数字

> ID：10914664
> 
> 赞同：3
> 
> 时间：2012-06-06T12:56:24.240
> 
> 标签：algorithm

有一个包含 1000 个大数字（也可以是 64 位数字）的数组（大于 1000 个元素的空间）。数组中的数字不一定是排序的。
我们必须在第 1001 个位置生成一个与之前的 1000 不同的唯一数字。
证明使用的方法是最好的。

我的答案（不知道这在多大程度上是正确的）：对数字进行排序，然后从 0 位置开始。第 1000 位的数字 + 1 是所需的数字。

对此有更好的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:31:05.453

创建一个包含 1001 个元素的辅助数组。将所有这些设置为 1（或 true 或 Y 或您选择的任何值）。遍历主数组，如果您在 1..1000 范围内找到一个数字，则将 0 输出（或伪造其他方式）辅助数组中的相应元素。最后，辅助数组中不为 0（或 false）的第一个元素对应于不在主数组中的数字。

这很简单，而且我认为时间复杂度为 O(n)，其中 n 是主数组中的元素数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:38:25.193

```
unsigned ii,slot;

unsigned array [ NNN ];
/* allocate a histogram */
#define XXX (NNN+1);
unsigned histogram [XXX];
memset(histogram, 0, sizeof histogram);

for (ii=0; ii < NNN; ii++) {
        slot = array [ii ] % XXX;
        histogram[slot] += 1;
        }
for (slot=0; slot < NNN; slot++) {
        if ( !histogram[slot]) break;
        }

/* Now, slot + k * XXX will be a 
** number that does not occur in the original array */ 
```

注意：这类似于高性能标记，但至少我输入了代码......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:55:28.260

如果对数组进行排序，则唯一编号有三种可能性：

1.  array[999]+1，如果 array[999] 不等于 INT_MAX
2.  array[0]-1，如果 array[0] 不等于 INT_MIN
3.  数组[i] 和数组[i+1] 之间的数字，如果数组[i+1]-数组[i]>1 (0<=i<=998)。请注意，如果前两次尝试都失败了，那么可以保证数组中的两个元素之间存在一个数字。

请注意，此解决方案也适用于第 1002、第 1003 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T14:08:41.607

尝试笨拙的 C# 实现

```
public class Test
{
    public List<int> Sequence { get; set; }

    public void GenerateFirstSequence()
    {
        Sequence = new List<int>();
        for (var i = 0; i < 1000; i++)
        {
            var x = new Random().Next(0, int.MaxValue);
            while (Sequence.Contains(x))
            {
                x = new Random().Next(0, int.MaxValue);
            }
            Sequence.Add(x);
        }
    }

    public int GetNumberNotInSequence()
    {
        var number = Sequence.OrderBy(x => x).Max();
        var mustRedefine = number == int.MaxValue && Sequence.Contains(number);
        if (mustRedefine)
        {
            while (Sequence.Contains(number))
            {
                number = number - 1;
                if (!Sequence.Contains(number))
                    return number;
            }
        }
        return number + 1;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T14:37:30.790

我对这个问题有一些想法：

您可以创建一个包含 1000 个元素的哈希表 H。假设您的数组名为 A，并且对于每个元素，我们都有 1000 的提醒：m[i] = A[i] % 1000。

如果A[i]和A[j]有冲突，那么A[i] % 1000 = A[j] % 1000。也就是说，必须存在一个索引k，没有元素的提醒1000等于到 k，那么 k 就是你要得到的数字。

如果根本没有冲突，只需选择 H[1] + 1000 作为结果。

该算法的复杂度为 O(l)，其中 l 表示原始列表大小，在示例中 l = 1000

# linux - Bash - 按日期/文件名删除文件

> ID：10914665
> 
> 赞同：0
> 
> 时间：2012-06-06T12:56:27.197
> 
> 标签：linux, bash

我有一个 bash 脚本，它每小时在某个目录中创建一个 mysqldump 备份。

根据以下架构，备份文件的文件名包括日期和小时：

```
backupfile_<day>-<month>-<year>_<hour>.sql.gz 
```

并在这里澄清一些示例文件名：

```
backupfile_30-05-2012_0800.sql.gz
backupfile_01-06-2012_0100.sql.gz
backupfile_05-06-2012_1500.sql.gz 
```

有人可以帮我创建一个脚本，该脚本将遍历目录中的所有文件，然后删除文件，留下以下内容：

1.  保留超过一天的备用小时备份
2.  保留一周以上的每日两次备份
3.  保留超过一个月的每日备份一次。

我有以下脚本的开头：

```
#!/bin/bash
cd /backup_dir

for file in *
do
    # do the magic to find out if this files time is up (i.e. needs to be deleted)
    # delete the file
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:10:53.680

我见过很多像这样的花哨的脚本来进行预定的备份，并且想知道为什么人们不使用[`logroate`](http://linux.about.com/od/commands/l/blcmdl8_logrota.htm)大多数 *nix 发行版上可用的实用程序，现在支持以下您感兴趣的选项：

```
compress
     Old versions of log files are compressed with gzip by default.

dateext
     Archive old versions of log files adding a daily extension like YYYYMMDD instead
     of simply adding a number.

olddir directory
     Logs are moved into directory for rotation. The directory must be on the same
     physical device as the log file being rotated, and is assumed to be relative to
     the directory holding the log file unless an absolute path name is specified.
     When  this  option is used all old versions of the log end up in directory. This
     option may be overriden by the noolddir option.

notifempty
      Do not rotate the log if it is empty (this overrides the ifempty option).

postrotate/endscript
      The lines between postrotate and endscript (both of which must appear on lines by
      themselves)  are  executed  after the  log file is rotated. These directives may
      only appear inside of a log file definition.  See prerotate as well. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:09:35.090

您可以通过遍历文件名来解析时间戳，也可以在 find 命令中使用 -cmin 标志（详情请参阅`man 1 find`）。

# c++ - 为游戏开发编写地图编辑器

> ID：10914667
> 
> 赞同：2
> 
> 时间：2012-06-06T12:56:32.693
> 
> 标签：c++

我最近开始了游戏开发，主要使用 C++ 和 SDL。在创建了几个简单的克隆之后，我想要做一些更复杂的事情。具有比我习惯的更多物理和复杂游戏对象的东西。

到目前为止，我一直在使用我在 SDL 中制作的基本图块编辑器来创建二进制地图，但现在我想做一些更丰富的工作。我可以在其中放置对象并定义其属性的东西。当然是 2D，但比简单的图块编辑器更实用。

我一直在搜索，但我还没有真正找到任何旨在开发此类实用程序的文章。

我在哪里可以找到帮助我开发此工具包的信息？我应该使用什么？我一直在看Qt，但我不太确定。对于我的这项工作，我将不胜感激任何帮助和可能的指导。

（我知道确实存在优秀的实用程序，但我想自己开发一个，然后希望将我的基本物理引擎集成到其中。这可能是重新发明轮子，但这是一个很好的学习机会。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:06:43.210

[Tiled](http://www.mapeditor.org/)似乎回答了大部分问题，如果不是全部的话。

> 我在哪里可以找到帮助我开发此工具包的信息？

一个好的起点是查看 tiled 的开源项目。

> 我应该使用什么？我一直在看Qt，但我不太确定。

你需要更具体。你有什么要求？Tiled 似乎可以完成您所说的大部分工作，并且是用 Qt 编写的，因此 Qt 绝对可以胜任。它也是用您已经熟悉的 C++ 编写的。

我建议不要重新发明轮子，而是使用现有的开源地图编辑器（如平铺）来做你需要的事情。如果您[必须拥有](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)某个功能，您可以随时贡献或扩展编辑器。

由于您要制作更复杂的游戏，我的建议是首先定义您的要求。完成后，编写*游戏*（[而不是引擎](http://scientificninja.com/blog/write-games-not-engines)）。

# php - Plesk 9.5 IIS 7 快速 CGI 超时错误 500

> ID：10914671
> 
> 赞同：0
> 
> 时间：2012-06-06T12:56:38.287
> 
> 标签：php, iis, cgi, fastcgi, plesk

我正在运行以下设置： - Windows 2008 网络版 - IIS 7 - Plesk 9.5 - FastCGI

问题描述

运行耗时超过 30 秒的脚本时，我收到 500 内部服务器错误消息，而不是“正常”响应（“达到 30 秒的最大执行时间”）。此外，此消息始终在大约 40 秒后出现。另外，在放置 set_time_limit(3600); 之后 在代码中也会发生同样的结果。

实际结果

无论有无 set_time_limit 代码：

大约 40 秒后出现 500 内部服务器错误

预期结果

没有 set_time_limit：

30 秒后将出现一条消息，说明已达到 30 秒的最大执行限制。

使用 set_time_limit：

完整脚本以 set_time_limit 中设置的最大秒数运行

附加说明

运行 CGI 而不是 FastCGI 时问题得到解决。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:16:12.257

我可以找到一些可以帮助你的链接。问题是您的 cgi 模块的活动超时。

*   [在 IIS7 中增加 fastCgi / PHP activityTimeout](http://www.bokko.nl/increase-fastcgi-php-activitytimeout-in-iis7/)
*   [FastCGI 超时值更改](http://tech.mikeal.com/blog1.php/fastcgi-timeout-value-change)

对我来说，总结起来就是这样。

打开 dos 控制台“cmd”， `c:\windows\system32\inetsrv\` 然后执行此命令，更改`php-cgi`. `appcmd set config -section:system.webServer/fastCgi "-[fullPath='C:\php\php-cgi.exe'].activityTimeout:3600"`

我希望这对你有帮助！

# .net - RestSharp在对服务器进行休息调用时压缩请求

> ID：10914672
> 
> 赞同：4
> 
> 时间：2012-06-06T12:56:45.223
> 
> 标签：.net, rest, restsharp

我在我的 C# 客户端中使用了一个用 java 编写的 rest api。我正在向服务器发送大量数据，并且我正在使用 RestSharp.dll 进行休息调用。我要做的是构造一个对象并将其直接添加到 RestSharp 请求对象的主体中，并为其提及 .netserializer。所以它会自动序列化并发布。一切都很好。

现在我需要应用 LZO 或 GZIP 压缩。这样服务器的负载就会减少。

我知道如何实现这两种压缩技术。但是如何用 RestSharp 请求对象来实现呢？

我该做什么。我正在向请求正文添加对象。何时执行压缩？

任何帮助...

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:16:49.507

RestSharp从 102.7 版本开始[支持 HTTP 压缩。](http://www.bevanblackie.com/2012/03/restsharp-supports-gzip.html)我不确定这是否仅适用于 Windows Phone 或所有平台都支持压缩。

最常见的算法是 GZip 和 Deflate，尽管实际的压缩级别通常由服务器控制。

**更新：**

我刚刚使用[Fiddler](http://www.fiddler2.com/fiddler2/)验证了 HTTP 压缩在 103.1 中默认启用。以下代码返回使用 GZip 编码的页面：

```
 var target = "http://msdn.microsoft.com/";
        var client=new RestClient(target);
        var request = new RestRequest("",Method.GET);
        var response = client.Execute(request);
        Console.WriteLine(response.Content); 
```

无需添加 Accept-Encoding 标头。

压缩仅在服务器支持时才有效。否则响应将被解压缩。

这意味着 Java 服务也必须启用 HTTP 压缩。

如果响应被压缩，则 Content-Encoding 标头将设置为压缩方法，例如。*压缩*包

要直观地检查这一点，请打开 Fiddler 并检查对 RestRequest 的响应。Response 窗格的 Transformer 选项卡显示压缩设置。

# php - 无法在服务器上的zend框架中上传多个图像

> ID：10914674
> 
> 赞同：0
> 
> 时间：2012-06-06T12:57:04.260
> 
> 标签：php, zend-framework

我在服务器上使用 zend 框架上传 mutilply 文件时遇到问题

实际上我的代码在本地主机上正常工作，但在远程服务器上它给了我应用程序错误消息

我的主机是 ipage.com

```
$upload = new Zend_File_Transfer_Adapter_Http();
$upload->setDestination('projects\\'.$_pId);
// $_pid is my project folder where all files related to it uploded
$files = $upload->getFileInfo();
$i = 1;$g = 1;
foreach ($files as $file => $info)
{
    // i have three kinds of images
    // innerfinishingphotos_ images which can be more than 1 file eg :innerfinishingphotos_1, innerfinishingphotos_2, innerfinishingphotos_3.
    // outerfinishingphotos_ images which can be more than 1 file eg :outerfinishingphotos_1, outerfinishingphotos_2, outerfinishingphotos_3.
    // _main_photo image an image.

    // here i made if statements to determine which file came from which input file 

    if( $info == $files["innerfinishingphotos_".$i] && $info["name"] ==  $files["innerfinishingphotos_".$i]["name"] && !empty( $info["name"] ) )
    {
        $filename = "inner_finishing".$_pId.uniqid().$files["innerfinishingphotos_".$i]["name"];
        $upload->addFilter('Rename', $filename, $files["innerfinishingphotos_".$i]);
        $photodata =  Array ("project_id"=> $_pId, "photo_link"=> "/projects/".$_pId."/".$filename, "photo_name"=> "inner_finishing");
        $projectModel->addInProjectGalary($photodata);
        $i++;
    }
    else if( $info == $files["outerfinishingphotos_".$g] && $info["name"] == $files["outerfinishingphotos_".$g]["name"] &&!empty( $info["name"] ) )
    {
        $filename = "outer_finishing".$_pId.uniqid().$files["outerfinishingphotos_".$g]["name"];
            $upload->addFilter('Rename', $filename, $files["outerfinishingphotos_".$g]);
            $photodata =  Array ("project_id"=> $_pId, "photo_link"=> "/projects/".$_pId."/".$filename, "photo_name"=> "outer_finishing");
            $projectModel->addInProjectGalary($photodata);
            $g++;
    }
    else if ($info == $files["_main_photo"] && !empty( $info["name"] ))
    {
        $filename = "main_photo".$_pId.uniqid().$files["_main_photo"]["name"];
            $upload->addFilter('Rename', $filename, $files["_main_photo"]);
            $photodata =  Array ("project_id"=> $_pId, "photo_link"=> "/projects/".$_pId."/".$filename, "photo_name"=> "project_photo");
            $projectModel->addInProjectGalary($photodata);  
    }

    //then i receive the image
    if($upload->isValid($file))
    {
        try {
            $upload->receive($file);  
            }
            catch (Exception $e) {
                echo "upload exteption";
            }   
    }
} 
```

我测试了这段代码，我在本地主机上正常工作，所有图片都上传了，它们的数据进入了我的数据库

但在我的远程主机 'ipage.com' 上不起作用。

请大家帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:21:08.140

经过几个小时的尝试，我解决了这个问题，它就在这条线上

```
$upload->setDestination('projects\\'.$_pId); 
```

将其更改为

```
$upload->setDestination('projects/'.$_pId); 
```

谢谢先生。蒂姆喷泉

# php - 根据概率分布获取结果

> ID：10914678
> 
> 赞同：2
> 
> 时间：2012-06-06T12:57:15.630
> 
> 标签：php, math

在浏览器游戏中，我们有根据概率发生的项目。

P(i1) = 0.8

P(i2) = 0.45

P(i3) = 0.33

P(i4) = 0.01

我们如何在 php 中实现一个函数，根据它的概率返回一个随机项？

## 编辑

这些项目具有称为稀有性的属性，该属性从 1 到 100 不等，表示发生的概率。出现的项目是从一组特定类型的所有项目中选择的。（例如，上面给出的示例代表所有工件第 1 层）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T13:22:28.167

我不知道它是否是最好的解决方案，但是当我不得不解决这个问题时，这就是我发现的：

取自[这篇博文的](http://w-shadow.com/blog/2008/12/10/fast-weighted-random-choice-in-php/)函数：

```
// Given an array of values, and weights for those values (any positive int) 
// it will select a value randomly as often as the given weight allows. 
// for example:
// values(A, B, C, D)
// weights(30, 50, 100, 25)
// Given these values C should come out twice as often as B, and 4 times as often as D. 
function weighted_random($values, $weights){ 
    $count = count($values); 
    $i = 0; 
    $n = 0; 
    $num = mt_rand(0, array_sum($weights)); 
    while($i < $count){
        $n += $weights[$i]; 
        if($n >= $num){
            break; 
        }
        $i++; 
    } 
    return $values[$i]; 
} 
```

示例调用：

```
$values = array('A','B','C');
$weights = array(1,50,100);

$weighted_value = weighted_random($values, $weights); 
```

这有点笨拙，因为显然需要单独提供值和权重，但这可能会被重构以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T07:28:47.027

试图了解 Bulk 的功能是如何工作的，这是我根据 Benjamin Kloster 的回答所理解的：

[https://softwareengineering.stackexchange.com/questions/150616/return-random-list-item-by-its-weight](https://softwareengineering.stackexchange.com/questions/150616/return-random-list-item-by-its-weight)

在 0 到 sum(weights) 的范围内生成一个随机数 n，在本例中为 $num，因此可以这样说：weights(30, 50, 100, 25)。

总和是 205。

现在 $num 必须是 0-30 才能得到 A，

30-80拿B

80-180获得C

和 180-205 得到 D

While 循环查找 $num 落在哪个区间。

# ios - 为什么平移让用户将缩放视图移到超级视图之外？

> ID：10914679
> 
> 赞同：4
> 
> 时间：2012-06-06T12:57:18.793
> 
> 标签：ios, uigesturerecognizer, uipangesturerecognizer, uipinchgesturerecognizer

我正在研究 pdf 页面上的捏合和捏出功能。我的捏合和平移（移动）工作正常，但是当用户连续移动缩放视图时，缩放视图超出了超级视图边界。像这样：

![这是用户在缩放后所做的移动](../Images/a46e2fbe100cf9da11d06ad93d024b34.png)

我如何限制平移移动，以便用户无法将缩放视图/pdf 移动到超级视图之外。
我正在使用的相关代码是：

```
// This method will handle the PINCH / ZOOM gesture 
```

- (void)pinchZoom:(UIPinchGestureRecognizer *)gestureRecognizer {

```
 if([gestureRecognizer state] == UIGestureRecognizerStateBegan) {
        // Reset the last scale, necessary if there are multiple objects with different scales
        lastScale = [gestureRecognizer scale];
    }
if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {

    if (!zoomActive) {
        zoomActive = YES;
        panActive = YES;
        UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panMove:)];
        [panGesture setMaximumNumberOfTouches:2];
        [panGesture setDelegate:self];
        [self addGestureRecognizer:panGesture];
        [panGesture release];

    }

            CGFloat currentScale = [[[gestureRecognizer view].layer valueForKeyPath:@"transform.scale"] floatValue];

            // Constants to adjust the max/min values of zoom
            const CGFloat kMaxScale = 2.0;
            const CGFloat kMinScale = 1.0;

            CGFloat newScale = 1 -  (lastScale - [gestureRecognizer scale]); 
            newScale = MIN(newScale, kMaxScale / currentScale);   
            newScale = MAX(newScale, kMinScale / currentScale);
            CGAffineTransform transform = CGAffineTransformScale([[gestureRecognizer view] transform], newScale, newScale);
            [gestureRecognizer view].transform = transform;

            lastScale = [gestureRecognizer scale];  // Store the previous scale factor for the next pinch gesture call 

    [delegate leavesView:self zoomingCurrentView:[gestureRecognizer scale]];            

} 
```

我处理平移移动的方法 ：

```
// This method will handle the PAN / MOVE gesture 
- (void)panMove:(UIPanGestureRecognizer *)gestureRecognizer  
{  
    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged)   {  
        CGPoint translation = [gestureRecognizer translationInView:[[gestureRecognizer view] superview]];  
        [[gestureRecognizer view] setCenter:CGPointMake([[gestureRecognizer view] center].x + translation.x, [[gestureRecognizer view] center].y + translation.y)];  

        [gestureRecognizer setTranslation:CGPointZero inView:[[gestureRecognizer view] superview]];  
    }  
} 
```

请建议如何在其超级视图范围内处理平移/移动限制平移。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-28T05:15:29.783

`panMove`在您的方法中尝试此代码。在我的情况下它工作正常。

```
 static CGPoint initialCenter;

        if (recognizer.state == UIGestureRecognizerStateBegan)
        {
            initialCenter = recognizer.view.center;
        }

        CGPoint translation = [recognizer translationInView:recognizer.view];
        CGPoint newCenter = CGPointMake(initialCenter.x + translation.x,
                                       initialCenter.y + translation.y);
        CGRect newFrame = recognizer.view.frame;
        CGRect superViewBounds = recognizer.view.superview.bounds;
        CGPoint superViewOrigin = recognizer.view.superview.frame.origin;

        if(newCenter.x-(newFrame.size.width/2) >= (superViewBounds.size.width+superViewOrigin.x)-200 /*right*/
           ||
           newCenter.x+(newFrame.size.width/2) <= (superViewOrigin.x+200) /*left*/
           ||
           newCenter.y-(newFrame.size.height/2) >= (superViewBounds.size.height+superViewOrigin.y)-200 /*bottom*/
            ||
            newCenter.y+(newFrame.size.height/2) <= (superViewOrigin.y+100)) /*top*/
        {
            return;
        }else{
            recognizer.view.center = newCenter;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:22:52.237

您可以在代码中添加类似这样的内容：（这有点粗糙，因此您可能需要解决一些错误）

```
if([gestureRecognizer view].frame.bounds.x < self.view.bounds.x - panExapantion)
{ 
    //then don't move it
}

//... repeat this for all sides (this is left), bottom, right, and top. 
```

编辑：好的，考虑一个盒子里面的盒子，因此我们有一个内盒和一个外盒。如果我们不希望内盒超出外盒，那么我们必须让所有这些陈述都为真：

1.  被移动的内箱左侧不在外箱左侧之外。
2.  被移动的内盒右侧不在外盒右侧之外。
3.  被移动的内盒底边不在外盒底边之外。
4.  内盒的移动顶面不在外盒的顶面之外。

在您的情况下，PDF 是内盒，iPad 是外盒。为了阻止 pdf 超出框外，我们需要检查这些陈述中的每一个是否为真，如果其中一个为假，我们不会将 PDF 移动到它的新位置，或者我们将 PDF 移动到 iPhone 边缘附近屏幕。

问题是如果使用捏合和缩放，那么突然盒子总是在外框之外，那么我们该如何解决呢？我们得到了当它被放大时有多少像素被添加到里面的盒子里（为了解释这个问题，让我们称之为扩展）。所以我们得到了盒子扩大了多少，然后减去了那个值。像这样：（这是一个愚蠢的 if 语句，在代码中不起作用）

```
If(outerBox.leftSide is less than innerBox.leftSide - panExpantion) 
{
    //Then the innerBox is outside the outterBox
} 
```

我希望这有助于澄清！

# android - IntentService 工作队列状态

> ID：10914681
> 
> 赞同：1
> 
> 时间：2012-06-06T12:57:31.853
> 
> 标签：android, service, android-lifecycle, intentservice

我正在开发一个运行一系列异步传感器扫描的 Android 应用程序，例如获取附近蓝牙设备的 MAC 地址列表、获取手机的当前位置 (GPS) 并记录周围噪音的音频样本。每当每次扫描完成时，我都想要一个服务来处理将收集到的数据发送到 Web 服务（使用 http 和 REST）。

我面临的问题是我应该实现自己的自定义服务还是使用 IntentServce 来处理多个请求（使用“startService（）”发送的意图）来上传数据，因为我希望 100% 确定最终找到的数据被发送到网络服务（如果互联网连接可用）。

如果 Android 决定终止我的 IntnetService 或用户在仍在处理它的请求工作队列时强制终止它，我会丢失待处理请求的队列吗？即我是否需要保存工作队列的状态（因此被迫自己实现服务而不使用 IntentService）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:10:24.793

> 如果 Android 决定终止我的 IntnetService 或用户在仍在处理它的请求工作队列时强制终止它，我会丢失待处理请求的队列吗？

如果用户重新启动他们的设备，您的队列将会消失。否则，至少在理论上，`START_REDELIVER_INTENT`从`onStartCommand()`（这是`IntentService`默认的 IIRC）返回应该给你任何`Intent`未处理的命令。

话虽如此，如果您“想 100% 确定”命令被处理，我建议您创建自己的持久工作队列（例如，数据库表）。使用`IntentService`more 作为请求来处理所有未完成的持久工作队列事件（如果有）。使用 a`BOOT_COMPLETED` `BroadcastReceiver`来处理重新启动的情况，告诉您`IntentService`处理由于重新启动而留下的任何未完成的命令。

# oracle - ORA-06550 消息中的实际源代码行

> ID：10914682
> 
> 赞同：3
> 
> 时间：2012-06-06T12:57:40.547
> 
> 标签：oracle, plsql, ora-06550

在 Toad 中开发 Oracle PL/SQL 过程时，我遇到如下错误

*   ORA-06550：第 97 行，第 25 列：PLS-00330：类型名称或子类型名称的无效使用
*   ORA-06550：第 97 行，第 9 列：PL/SQL：语句被忽略

这些给定的行号和列号似乎与源代码行号几乎没有关系。我在哪里可以找到有助于我识别导致错误的实际源代码行或实际代码的提示或技巧？这在上述情况（这是 700+ 行源的结果）中尤其重要，其中错误消息没有提供有关实际问题细节的线索。（顺便说一下，该源代码中的第 101 行是一系列注释行中的第三行，后面是一个空行。）

（请注意，这[尚未]在存储过程中；它正在从源代码开发和执行。不确定这是否会有所不同，因为目前没有我们的开发人员有权在其中创建过程的数据库。 )

示例代码：

```
SET SERVEROUTPUT ON;

DECLARE
TYPE bendemo_hdr IS RECORD
(
    recid      CHAR(1)
  , client     CHAR(30)
  , filedesc   CHAR(30)
  , seqnum     CHAR(2)
  , crtdate    CHAR(20)
  , srtdate    CHAR(8)
  , stpdate    CHAR(8)
);

TYPE bendemo_record IS RECORD
(
    recid        CHAR(1)
  , ssn          CHAR(9)
  , empnum       CHAR(15)
  , eeflag       CHAR(1)
  , titlecode    CHAR(6)
  , fname        CHAR(30)
  , mname        CHAR(30)
  , lname        CHAR(30)
  , namesuffix   CHAR(6)
  , prefname     CHAR(30)
  , dob          CHAR(8)
  , dod          CHAR(8)
  , dverdte      CHAR(8)
  , dauddte      CHAR(8)
  , ddtesrc      CHAR(6)
  , gender       CHAR(1)
  , martstat     CHAR(6)
  , mstateffdt   CHAR(8)
  , lang         CHAR(1)
  , citzcde      CHAR(6)
  , vipflag      CHAR(1)
  , kyeeflag     CHAR(1)
  , orghrdte     CHAR(8)
  , lathrdte     CHAR(8)
  , adjhrdte     CHAR(8)
  , jobtitle     CHAR(30)
  , precntmthd   CHAR(6)
  , mailpref     CHAR(6)
  , phnepref     CHAR(6)
  , emalpref     CHAR(6)
  , hmaddrefdt   CHAR(8)
  , hmaddr1      CHAR(60)
  , hmaddr2      CHAR(60)
  , hmaddr3      CHAR(60)
  , hmaddr4      CHAR(60)
  , hmaddcity    CHAR(60)
  , hmaddstate   CHAR(60)
  , hmaddzip     CHAR(10)
  , hmaddcnty    CHAR(3)
  , hmphcnty     CHAR(6)
  , hmphnbr      CHAR(16)
  , hmphext      CHAR(4)
  , mbphcnty     CHAR(6)
  , mbphnbr      CHAR(16)
  , faxcnty      CHAR(6)
  , faxnbr       CHAR(16)
  , hmemail      CHAR(100)
  , wkaddrefdt   CHAR(8)
  , wkaddr1      CHAR(60)
  , wkaddr2      CHAR(60)
  , wkaddr3      CHAR(60)
  , wkaddr4      CHAR(60)
  , wkaddcity    CHAR(60)
  , wkaddstate   CHAR(60)
  , wkaddzip     CHAR(10)
  , wkaddcnty    CHAR(3)
  , wkphcnty     CHAR(6)
  , wkphnbr      CHAR(16)
  , wkphext      CHAR(4)
  , wkemail      CHAR(100)
  , hiresrc      CHAR(30)
  , bgnunit      CHAR(30)
  , qdroflag     CHAR(1)
  , hiresrcdt    CHAR(8)
);

TYPE bendemo_trlr IS RECORD
(
    recid      CHAR(1)
  , client     CHAR(30)
  , filedesc   CHAR(30)
  , reccount   CHAR(9)
  , field1     CHAR(15)
);

demo_hdr    bendemo_hdr;
demo_rec    bendemo_record;
demo_trlr   bendemo_trlr;
i           NUMBER;

PROCEDURE dump_hdr_rec IS
BEGIN
    DBMS_OUTPUT.put(bendemo_hdr.recid);
    DBMS_OUTPUT.put(bendemo_hdr.client);
    DBMS_OUTPUT.put(bendemo_hdr.filedesc);
    DBMS_OUTPUT.put(bendemo_hdr.seqnum);
    DBMS_OUTPUT.put(bendemo_hdr.crtdate);
    DBMS_OUTPUT.put(bendemo_hdr.srtdate);
    DBMS_OUTPUT.put(bendemo_hdr.stpdate);
    DBMS_OUTPUT.put_line('<');
END dump_hdr_rec;

PROCEDURE dump_demo_rec IS
BEGIN
    --      IF l_output IS NULL THEN
    DBMS_OUTPUT.put(bendemo_record.recid);
    DBMS_OUTPUT.put(bendemo_record.ssn);
    DBMS_OUTPUT.put(bendemo_record.empnum);
    DBMS_OUTPUT.put(bendemo_record.eeflag);
    DBMS_OUTPUT.put(bendemo_record.titlecode);
    DBMS_OUTPUT.put(bendemo_record.fname);
    DBMS_OUTPUT.put(bendemo_record.mname);
    DBMS_OUTPUT.put(bendemo_record.lname);
    DBMS_OUTPUT.put(bendemo_record.namesuffix);
    DBMS_OUTPUT.put(bendemo_record.prefname);
    DBMS_OUTPUT.put(bendemo_record.dob);
    DBMS_OUTPUT.put(bendemo_record.dod);
    DBMS_OUTPUT.put(bendemo_record.dverdte);
    DBMS_OUTPUT.put(bendemo_record.dauddte);
    DBMS_OUTPUT.put(bendemo_record.ddtesrc);
    DBMS_OUTPUT.put(bendemo_record.gender);
    DBMS_OUTPUT.put(bendemo_record.martstat);
    DBMS_OUTPUT.put(bendemo_record.mstateffdt);
    DBMS_OUTPUT.put(bendemo_record.lang);
    DBMS_OUTPUT.put(bendemo_record.citzcde);
    DBMS_OUTPUT.put(bendemo_record.vipflag);
    DBMS_OUTPUT.put(bendemo_record.kyeeflag);
    DBMS_OUTPUT.put(bendemo_record.orghrdte);
    DBMS_OUTPUT.put(bendemo_record.lathrdte);
    DBMS_OUTPUT.put(bendemo_record.adjhrdte);
    DBMS_OUTPUT.put(bendemo_record.jobtitle);
    DBMS_OUTPUT.put(bendemo_record.precntmthd);
    DBMS_OUTPUT.put(bendemo_record.mailpref);
    DBMS_OUTPUT.put(bendemo_record.phnepref);
    DBMS_OUTPUT.put(bendemo_record.emalpref);
    DBMS_OUTPUT.put(bendemo_record.hmaddrefdt);
    DBMS_OUTPUT.put(bendemo_record.hmaddr1);
    DBMS_OUTPUT.put(bendemo_record.hmaddr2);
    DBMS_OUTPUT.put(bendemo_record.hmaddr3);
    DBMS_OUTPUT.put(bendemo_record.hmaddr4);
    DBMS_OUTPUT.put(bendemo_record.hmaddcity);
    DBMS_OUTPUT.put(bendemo_record.hmaddstate);
    DBMS_OUTPUT.put(bendemo_record.hmaddzip);
    DBMS_OUTPUT.put(bendemo_record.hmaddcnty);
    DBMS_OUTPUT.put(bendemo_record.hmphcnty);
    DBMS_OUTPUT.put(bendemo_record.hmphnbr);
    DBMS_OUTPUT.put(bendemo_record.hmphext);
    DBMS_OUTPUT.put(bendemo_record.mbphcnty);
    DBMS_OUTPUT.put(bendemo_record.mbphnbr);
    DBMS_OUTPUT.put(bendemo_record.faxcnty);
    DBMS_OUTPUT.put(bendemo_record.faxnbr);
    DBMS_OUTPUT.put(bendemo_record.hmemail);
    DBMS_OUTPUT.put(bendemo_record.wkaddrefdt);
    DBMS_OUTPUT.put(bendemo_record.wkaddr1);
    DBMS_OUTPUT.put(bendemo_record.wkaddr2);
    DBMS_OUTPUT.put(bendemo_record.wkaddr3);
    DBMS_OUTPUT.put(bendemo_record.wkaddr4);
    DBMS_OUTPUT.put(bendemo_record.wkaddcity);
    DBMS_OUTPUT.put(bendemo_record.wkaddstate);
    DBMS_OUTPUT.put(bendemo_record.wkaddzip);
    DBMS_OUTPUT.put(bendemo_record.wkaddcnty);
    DBMS_OUTPUT.put(bendemo_record.wkphcnty);
    DBMS_OUTPUT.put(bendemo_record.wkphnbr);
    DBMS_OUTPUT.put(bendemo_record.wkphext);
    DBMS_OUTPUT.put(bendemo_record.wkemail);
    DBMS_OUTPUT.put(bendemo_record.hiresrc);
    DBMS_OUTPUT.put(bendemo_record.bgnunit);
    DBMS_OUTPUT.put(bendemo_record.qdroflag);
    DBMS_OUTPUT.put(bendemo_record.hiresrcdt);
    DBMS_OUTPUT.put_line('<');
END dump_demo_rec;

PROCEDURE dump_hdr_trlr IS
BEGIN
    DBMS_OUTPUT.put(bendemo_trlr.recid);
    DBMS_OUTPUT.put(bendemo_trlr.client);
    DBMS_OUTPUT.put(bendemo_trlr.filedesc);
    DBMS_OUTPUT.put(bendemo_trlr.reccount);
    DBMS_OUTPUT.put(bendemo_trlr.field1);
    DBMS_OUTPUT.put_line('<');
END dump_hdr_trlr;
BEGIN
demo_bendemo_hdr.recid := 'x';
demo_bendemo_hdr.client := 'Client';
demo_bendemo_hdr.filedesc := 'Descr';
demo_bendemo_hdr.seqnum := 'a';
demo_bendemo_hdr.crtdate := 'Created';
demo_bendemo_hdr.srtdate := 'Sorted';
demo_bendemo_hdr.stpdate := 'stop';
dump_demo_hdr(l_output, demo_hdr);
END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:39:55.070

如果没有看到您正在运行的代码类型的示例，则很难确定此答案是否相关，但消息中指定的行号与正在编译的 PL/SQL 的整个块相关，并忽略任何空行或该行之前的评论。例如，如果您的脚本说（为清楚起见添加了行号）：

```
1
2 -- test script
3
4
5 begin
6
7     rubbish;
8
9 end; 
```

然后，当您尝试运行它时，您将收到错误消息：

```
ORA-06550: line 3, column 3: 
PLS-00201: identifier 'RUBBISH' must be declared ... 
```

它说第 3 行不是第 7 行，因为“垃圾”；是正在编译的 PL/SQL 的第 3 行。上面的空行和注释不算在内。**但是，块中**的空行和注释确实很重要。

## 编辑

因此，将我的规则应用于您发布的代码示例，我们可以忽略 DECLARE 上方的 2 行，因此“第 97 行”是第 99 行：

```
DBMS_OUTPUT.put(bendemo_hdr.recid); 
```

但是bendemo_hdr 是一种类型而不是变量，因此在此语句中没有任何意义，因此出现了错误。它类似于写作：

```
DBMS_OUTPUT.put(CHAR(1)); --!!! 
```

你的意思可能是：

```
DBMS_OUTPUT.put(demo_hdr.recid); 
```

# php - 从 JSON 输入中检索数组键

> ID：10914687
> 
> 赞同：18
> 
> 时间：2012-06-06T12:58:16.177
> 
> 标签：php, arrays, json, foreach

我有这个数组：

```
$json = json_decode('
{"entries":[
{"id": "29","name":"John", "age":"36"},
{"id": "30","name":"Jack", "age":"23"}
]}
'); 
```

我正在寻找一个PHP“for each”循环，它将检索下的键名`entries`，即：

```
id
name
age 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-06T13:12:29.613

尝试一下

```
foreach($json->entries as $row) {
    foreach($row as $key => $val) {
        echo $key . ': ' . $val;
        echo '<br>';
    }
} 
```

在 $key 中，您将获得键名，在 val 中，您将获得值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:02:27.503

你可以这样做：

```
foreach($json->entries as $record){
    echo $record->id;
    echo $record->name;
    echo $record->age;
} 
```

如果您`true`作为函数中第二个参数的值传递`json_decode`，您将能够将解码后的值用作数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-25T08:37:43.910

我对其他答案不满意，所以我添加了自己的答案。我认为最通用的方法是：

```
$array = get_object_vars($json->entries[0]);
foreach($array as $key => $value) {
  echo $key . "<br>";
} 
```

我使用的地方`entries[0]`是因为您假设`entries`数组的所有元素都具有相同的键。

查看官方文档`key`： http: [//php.net/manual/en/function.key.php](http://php.net/manual/en/function.key.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:01:22.373

```
foreach($json->entries[0] AS $key => $name) {
    echo $key;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T13:14:59.980

您可以尝试使用以下方法获取对象的属性`get_object_vars`：

```
 $keys = array();

 foreach($json->entries as $entry)
   $keys += array_keys(get_object_vars($entry));

 print_r($keys); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-15T10:22:06.197

```
 $column_name =[];
    foreach($data as $i){
        foreach($i as $key => $i){
            array_push($column_name, $key);
        }
        break;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-21T12:57:34.907

使用数组而不是对象的替代答案 - 将 true 传递给`json_decode`将返回一个数组。

```
$json = '{"entries":[{"id": "29","name":"John", "age":"36"},{"id": "30","name":"Jack", "age":"23"}]}';
$data = json_decode($json, true);
$entries = $data['entries'];

foreach ($entries as $entry) {
    $id = $entry['id'];
    $name = $entry['name'];
    $age = $entry['age'];
    printf('%s (ID %d) is %d years old'.PHP_EOL, $name, $id, $age);
} 
```

在[https://www.tehplayground.com/17zKeQcNUbFwuRjC测试](https://www.tehplayground.com/17zKeQcNUbFwuRjC)

# editor - 在 TortoiseHg 中使用其他编辑器

> ID：10914688
> 
> 赞同：16
> 
> 时间：2012-06-06T12:58:25.443
> 
> 标签：editor, notepad++, tortoisehg, sublimetext2

我正在尝试将其他编辑器与 TortoiseHG 一起使用，而不是（Windows）记事本。

我已经尝试过这里提到的解决方案：

[Mercurial 和 Notepad++ 集成](https://stackoverflow.com/questions/9207880/mercurial-and-notepad-integaration)

和这里：

[https://bitbucket.org/tortoisehg/thg/wiki/OpenAtLine](https://bitbucket.org/tortoisehg/thg/wiki/OpenAtLine)

但没有结果。当我右键单击一个文件并选择“编辑本地”时，根本不会打开任何文件，除非我没有设置任何特定的编辑器（然后在记事本中打开文件）。

我尝试了不同的编辑器，例如 Notepad++ 和 Sublime Text 2，但没有结果。此外，我尝试使用 GUI 中的“设置”更改配置，并编辑“C:\Users\<my_user>\mercurial.ini”

例如，我试过：

```
#### # For Sublime Text 2
[tortoisehg]
editor = C:\Program Files\Sublime Text 2\sublime_text.exe [$FILE:$LINENUM]

#### # Or, for NotePad++ :
[tortoisehg]
editor = C:\Program Files (x86)\Notepad++\Notepad++.exe ["$FILE" -n$LINENUM] -multiInst -nosession 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-07T10:29:48.023

你会踢自己...

改变：

```
[tortoisehg] 
editor = C:\Program Files (x86)\Notepad++\Notepad++.exe ["$FILE" -n$LINENUM] -multiInst -nosession 
```

到：

```
[tortoisehg]
editor = "C:\Program Files (x86)\Notepad++\Notepad++.exe" ["$FILE" -n$LINENUM] -multiInst -nosession 
```

注意 Notepad++ 路径周围的附加引号。
我猜这与您的 Sublime Text 路径完全相同，因为两条路径都包含一个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T16:33:31.917

奇怪的编辑器 = C:\Program Files (x86)\Notepad++\Notepad++.exe 没有双引号对我有用

# javascript - 记住 QML 元素中的滚动位置

> ID：10914692
> 
> 赞同：6
> 
> 时间：2012-06-06T12:58:33.153
> 
> 标签：javascript, qt, scroll, qml

我有一些 qml 作为应用程序的输出（有点像只读控制台）。但是，使用起来很烦人，因为它在打印信息时会滚动回顶部。

例如，假设我`TextArea`每秒打印一行，大约一分钟后，我将有足够的行，现在我有一个滚动条。我滚动到底部，一秒钟后，打印了一行文本，使其滚动回顶部。

我想要的功能是自动滚动到底部（很像控制台打印内容时的样子），除非用户通过向上滚动来覆盖它，否则文本应该保持不变。我希望这是有道理的，这里有一些代码：

```
 ScrollArea {
            id: helpTextScrollArea
            anchors.left: parent.left
            anchors.right: parent.right
            anchors.top: myButton.bottom
            anchors.topMargin: 5
            anchors.bottom: parent.bottom
            visible: false
            horizontalScrollBar.visible: false

            onVisibleChanged: {
                helpText.visible = visible
            }

            HelpTextArea {
                id: helpText
                width: parent.parent.width - helpTextScrollArea.verticalScrollBar.width
                text: "Oops, no documentation."

                onVisibleChanged: {
                    if(helpTextScrollArea.visible != visible) {
                        helpTextScrollArea.visible = visible
                    }
                }
            }
        }

        Flickable
        {
            id: flick

            anchors.left: parent.left
            anchors.right: parent.right
            anchors.top: runStopButton.bottom
            anchors.bottom: parent.bottom
            anchors.topMargin: 5

            TextArea{

                id: messageArea
                anchors.fill: parent

                focus: true

                readOnly: true

                visible: !helpTextScrollArea.visible

                wrapMode: TextEdit.Wrap

                function addText(newText) {
                    text += newText + "\n"
                }
            }
        } 
```

注意：我不认为我的 Flickable 有任何作用，这是我尝试解决问题的一部分。另外，我使用该功能`addText`打印到文本区域。我对 qml 几乎一无所知，而且大部分代码都是由其他人编写的，我正在尝试使用它。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T03:17:46.510

您可以将`contentY`属性绑定`Flickable`到将计算正确位置的表达式。

```
Flickable {
    id: flick
    states: State {
        name: "autoscroll"
        PropertyChanges {
            target: flick
            contentY: messageArea.height - height
        }
    }
    onMovementEnded: {
        if (contentY === messageArea.height - height) {
            state = "autoscroll"
        }
        else {
            state = ""  // default state
        }
    }
    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T02:05:20.430

Flickable 在称为 visibleArea.* 中有 4 个只读属性（您可以在 QML 文档中阅读它们的含义）：

*   **visibleArea.xPosition** : xPosition = contentX / contentWidth
*   **visibleArea.yPosition** : yPosition = contentY / contentHeight
*   **visibleArea.widthRatio** : widthRatio = 宽度 / contentWidth
*   **visibleArea.heightRatio** : heightRatio = 高度 / contentHeight

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T00:00:12.780

如果您使用 GridView 而不是 Flickable，则可以使用这些方法。

```
positionViewAtBeginning()

positionViewAtEnd()

positionViewAtIndex(int index, PositionMode mode) 
```

我发现这些非常有用，因为当添加文本行时，只需调用**GridView**`positionViewAtEnd()`内部的方法。

 **希望能帮助到你**

# javascript - javascript - Access-Control-Allow-Origin 不允许 Origin http://127.0.0.1

> ID：10914701
> 
> 赞同：6
> 
> 时间：2012-06-06T12:59:11.383
> 
> 标签：javascript, jquery, google-chrome, picasa

我正在制作一个简单的画廊，它使用 html + javascript 从 picasa 帐户中获取照片。

首先，获取相册列表，然后，对于每个相册，获取照片列表。第一个查询工作正常，但其他查询在浏览器（Chrome）中返回此错误：

> GET [https://picasaweb.google.com/data/entry/base/user/114476218463019618611/albumid/5750459375839674337?alt=json&hl=en_US](https://picasaweb.google.com/data/entry/base/user/114476218463019618611/albumid/5750459375839674337?alt=json&hl=en_US) 404（未找到）jquery.js:8240 XMLHttpRequest 无法加载[https://picasaweb.google .com/data/entry/base/user/114476218463019618611/albumid/5750459375839674337?alt=json&hl=en_US](https://picasaweb.google.com/data/entry/base/user/114476218463019618611/albumid/5750459375839674337?alt=json&hl=en_US)。Access-Control-Allow-Origin 不允许使用原始文件：//。

这是代码：

```
 var json_Album_URI = "https://picasaweb.google.com/data/feed/base/"
                + "user/"       +   username
                + "?alt="       +   "json"
                + "&kind="      +   "album"
                + "&hl="        +   "en_US"
                + "&fields="    +   "entry(media:group,id)"
                + "&thumbsize=" +   104
                + "&authkey="   +   authkey;

            $.ajax({
                    type: 'GET',
                    url: json_Album_URI,
                    success : function(resp) {
                            albums = resp.feed.entry;
                    },
                    dataType: 'json',
                    async: false
            });
            for (var id in albums) {
                    var album = albums[id];
                    var album_ID = album.id.$t.split('/')[9].split('?')[0];
                    var json_Photo_URI = "https://picasaweb.google.com/data/feed/base/"
                            + "user/"       +   username
                            + "/albumid/"   +   album_ID
                            + "?alt="       +   "json"
                            + "&kind="      +   "photo"
                            + "&hl="        +   "en_US"
                            + "&fields="    +   "entry(media:group)"
                            + "&thumbsize=" +   104
                            + "&authkey="   +   authkey;
                    //this is the ajax call that fails
                    $.ajax( {
                            type: 'GET',
                            url: json_Photo_URI,
                            success: function(photos) {
                                    console.log(photos);
                            },
                            dataType: "json",
                            async: false,
                    });
            } 
```

谢谢。

编辑：

我注意到，如果我删除该行：

```
 + "/albumid/"   +   album_ID 
```

有效（当然，没有预期的响应）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:01:29.890

看起来[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)是罪魁祸首。Picasa 的标头响应在这两个请求之间有所不同。当它们包含`access-control-allow-origin:*`.

Picasa 将其包含在：[https ://picasaweb.google.com/data/entry/base/user/114476218463019618611?alt=json&hl=en_US](https://picasaweb.google.com/data/entry/base/user/114476218463019618611?alt=json&hl=en_US)

但不在：[https ://picasaweb.google.com/data/entry/base/user/114476218463019618611/albumid/5750459375839674337?alt=json&hl=en_US](https://picasaweb.google.com/data/entry/base/user/114476218463019618611/albumid/5750459375839674337?alt=json&hl=en_US)

# java - 无法在 Java 中工作 reg Free com Dll（在 VC++ 中创建）

> ID：10914703
> 
> 赞同：4
> 
> 时间：2012-06-06T12:59:14.697
> 
> 标签：java, visual-c++, dll, regfreecom

当我使用 Reg free COM dll 在 Java 中加载时，它不起作用。但是如果它的注册 COM dll 它加载......我不想在裸系统中使用它作为注册的 com dll ..

我为 COM 组件添加了清单。但是当我尝试创建 CoClass 的对象时，它失败并出现错误“无法创建对象” CreateInstance 返回“0x80040154”。场景1.从java加载c++ dll。2.c++ dll 使用我的 COM dll。

请给我解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:45:52.107

由于清单文件（例如 MyApp.exe.manifest）仅适用于与清单位于同一文件夹中的特定可执行文件的进程（同一文件夹中的 MyApp.exe），我建议您尝试使用诸如 [Lauch4J 之](http://launch4j.sourceforge.net/)类的包装器和使用生成的 EXE 文件名作为清单的前缀。我主要是猜测。

# javascript - 如何在我的 js 测试中使用 mock？

> ID：10914704
> 
> 赞同：0
> 
> 时间：2012-06-06T12:59:22.590
> 
> 标签：javascript, jquery, testing, qunit, sinon

我尝试使用 QUnit 来测试我的 javascript 代码。我有简单的功能：

```
function Multiply(a, b) {
    return a * b; 
```

}

```
function CalculateBodyMassIndex(weight, height) {
    return Math.round(weight / Multiply(height, height)); 
```

}

```
function SummAll(array) {
    var summ = 0;
    $.each(array, function (i, el) {
       summ = summ + el;
    });
    return summ; 
```

}

我有两个问题：1）如何验证函数CalculateBodyMassIndex 将被称为乘法函数？

2) 我如何验证函数 SummAll 将在 jQuery 库中调用 $.each ？

感谢等待答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:43:41.037

这是一篇关于如何将 sinon.js 与 QUnit 一起用于模拟[http://cjohansen.no/en/javascript/using_sinon_js_with_qunit](http://cjohansen.no/en/javascript/using_sinon_js_with_qunit)的精彩帖子。

sinon 中的间谍和存根允许您非常轻松地验证对现有对象的调用。

***编辑*** 这里的 sinon.js 文档[http://sinonjs.org/docs/#sies](http://sinonjs.org/docs/#spies)展示了如何使用 Spies。浏览完整的 API 文档以获取存根、模拟等示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:28:59.707

只需粘贴以下 html 并从浏览器中打开它。

```
<html>
  <head>
    <title>test</title>
    <link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.11.0.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://code.jquery.com/qunit/qunit-1.11.0.js"></script>
    <script src="http://sinonjs.org/releases/sinon-1.6.0.js"></script>
    <script src="http://sinonjs.org/releases/sinon-qunit-1.0.0.js"></script>
    <script type="text/javascript">
      function Multiply(a, b) {
        return a * b;
      }

      function CalculateBodyMassIndex(weight, height) {
        return Math.round(weight / Multiply(height, height));
      }

      function SummAll(array) {
        var summ = 0;
        $.each(array, function (i, el) {
          summ = summ + el;
        });
        return summ;
      }
    </script>
  </head>
  <body>
    <div id="qunit"></div>
    <script type="text/javascript">
      $(function(){
        test('Multiply', function(){
          $.each([
            [[0, 2], 0],
            [[3, 3], 9],
            [[7, 9], 63]
          ], function(){
            var t = this.toString();
            equal(
              Multiply.apply(this, this[0]), this[1],
              t + ': Multiply ok'
            );
          });
        });

        test('CalculateBodyMassIndex', function(){
          this.spy(window, 'Multiply');
          $.each([
            [[1, 2], 0],
            [[10, 2], 3],
            [[35, 3], 4]
          ], function(i){
            var t = this.toString();
            equal(
              CalculateBodyMassIndex.apply(this, this[0]), this[1],
              t + ': CalculateBodyMassIndex ok'
            );
            ok(Multiply.calledOnce, t + ': call Multiply ok');
            deepEqual(
              Multiply.args[0], [this[0][1], this[0][1]],
              t + ': Multiply args ok'
            );
            Multiply.reset();
          });
        });

        test('SummAll', function(){
          $.each([
            [[1, 2, 3, 4, 5], 15],
            [[2, 3, 4, 5, 6], 20],
            [[3, 4, 5, 6, 7], 25]
          ], function(){
            var t = this.toString();
            equal(
              SummAll(this[0]), this[1],
              t + ': SummAll ok'
            );
          });
        });
      });
    </script>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T14:17:01.980

It's easiest to take advantage of function scoping, and to allow optional arguments on your mockable functions:

```
function CalculateBodyMassIndex(weight, height, using) {
  return Math.round(weight / (using || Multiply)(height, height));
} 
```

Then in your test:

```
var MockMultiplyRan = false;
var MockMultiply = function(a,b) {
    MockMultiplyRan = true;
    return Multiply(a,b);
}

CalculateBodyMassIndex(200,200, MockMultiply); // arbitrary figures
ok(MockMultiplyRan); 
```

# php - 如何使用mcrypt解密

> ID：10914707
> 
> 赞同：0
> 
> 时间：2012-06-06T12:59:32.080
> 
> 标签：php, security, encryption, mcrypt

我做了一个登录和注册页面。但我的密码尚未加密。人们告诉我这是一个坏主意，我应该加密它们。所以我一直在寻找如何加密和解密我的密码。我找到了一个关于如何加密我的密码的示例，但我不知道如何为我的登录页面再次解密它。这是我的加密代码：

```
$key = "some random security key";
$input = $password;

$td = mcrypt_module_open('tripledes', '', 'ecb', '');
$iv = mcrypt_create_iv (mcrypt_enc_get_iv_size($td), MCRYPT_RAND);
mcrypt_generic_init($td, $key, $iv);
$password = mcrypt_generic($td, $input);
mcrypt_generic_deinit($td);
mcrypt_module_close($td); 
```

所以我的问题是：有人可以告诉我我需要什么代码来解密我从上面的代码中得到的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T13:14:14.607

你可以加密和解密这样的东西：

```
//this is some config for a good security level of mcrypt
define('SAFETY_CIPHER', MCRYPT_RIJNDAEL_256);
define('SAFETY_MODE', MCRYPT_MODE_CFB);

//this has to be defined somewhere in the application.
define('APPLICATION_WIDE_PASSPHRASE', 'put-something-secure-here');
define('ENCRYPTION_DIVIDER_TOKEN', '$$');

//some "example" data as if provided by the user
$password = 'this-is-your-data-you-need-to-encrypt';

//this key is then cut to the maximum key length
$key = substr(md5(APPLICATION_WIDE_PASSPHRASE), 0, mcrypt_get_key_size(SAFETY_CIPHER, SAFETY_MODE));

//this is needed to initialize the mcrypt algorythm
$initVector = mcrypt_create_iv(mcrypt_get_iv_size(SAFETY_CIPHER, SAFETY_MODE), MCRYPT_RAND);

//encrypt the password
$encrypted = mcrypt_encrypt(SAFETY_CIPHER, $key, $password, SAFETY_MODE, $initVector);

//show it (store it in db in this form
echo base64_encode($initVector) . ENCRYPTION_DIVIDER_TOKEN . base64_encode($encrypted) . '<br/>';

//decrypt an show it again
echo mcrypt_decrypt(SAFETY_CIPHER, $key, $encrypted, SAFETY_MODE, $initVector) . '<br/>'; 
```

但如前所述，密码不应该从其散列表示中恢复，所以不要对密码这样做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:09:43.087

您不应该尝试仅比较散列密码来*解密密码。*

顺便说一句，如果您以正确的方式执行此操作，则无法恢复原始密码。您还应该添加所谓的盐以使密码更复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:15:06.760

我看到你对它的工作原理有点困惑。阅读本文，您将了解有关加密、解密、散列及其在登录系统中的使用的所有信息。 [http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/](http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/)

所以基本上，您在注册时将密码散列成十六进制字符串并将其存储在数据库中。每次用户想要登录时，您都会获取他当前的 i/p 密码，对其进行哈希处理并将其存储在像 $temp 这样的变量中。

现在，您从服务器检索原始密码的散列并简单地比较两个散列。

...如果它们相同，则授予访问权限！

您不想继续加密和解密密码的许多原因如下：

*   当被传递到服务器时，用户输入的密码是纯文本的，或者很容易被窃取/嗅探。
*   每次需要时，服务器都必须计算解密存储在数据库中的密码的过程，而不是我们只进行逻辑比较的散列。
*   如果包含加密算法的文件被数据库破坏，所有密码都会以纯文本形式丢失。由于用户可能在多个站点上使用相同的密码，因此威胁扩大了。

# deployment - 使用 SFTP/SSH 部署 Mercurial

> ID：10914708
> 
> 赞同：0
> 
> 时间：2012-06-06T12:59:32.663
> 
> 标签：deployment, mercurial

目前我正在使用 sourcetree 来管理我的仓库。我读过关于在网站开发的 3 个阶段使用不同的分支。我见过像 deployhq.com 和 beanstalkapp.com 这样的网站。我很好奇是否有一种“免费”的方式可以通过 sftp/shh 部署/回滚和发布到我的 Web 服务器，包括我的每个 repo 的暂存和实时生产。我需要一种让初级开发人员也能轻松做到这一点的方法，如果有审查过程那就太好了。如果没有免费的方法，那么什么是最好的付费方法。我还使用 bitbucket.org 来存储我的存储库。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:59:51.890

您可以使用轻量级部署工具，例如[Kwatee](http://www.kwatee.net)（自我推销）。Kwatee 是免费的，可以通过 Web 界面或 python 脚本部署任何文件（如果您使用 java，也可以使用 ant/maven）。您所要做的就是自动检出您的分支，然后在 kwatee 中触发 deploy 命令，该命令将在幕后使用 ssh/scp 或 telnet/ftp 来更新您的部署（只会部署更改）。

# c# - Attunity 中的连接限制已达到问题 [C014]

> ID：10914710
> 
> 赞同：0
> 
> 时间：2012-06-06T12:59:36.537
> 
> 标签：c#, connection-pooling, attunity

我有一个通过 Attunity（版本 1.0.0.8）连接到 RMS 文件系统的项目。RMS 文件位于不同的服务器中。客户端和服务上的连接池都是 10（最大连接池大小）。当我们从客户端访问服务器时，有时会出现错误：

> C014：达到客户端连接限制 - 稍后再试。

我想了解此错误是否与服务器过载或客户端的任何问题有关。我确信我用来连接服务器的客户端代码正在正确打开和处理连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:35:50.970

这听起来像是我们遇到的问题。我们在 OpenVms 上运行 Attunity，并且我们正在最大限度地增加节点之间与 Attunity 的 DECNET 连接数；根本问题出在我们的客户身上。在这种情况下，客户端将引发长期事务或在将其连接释放回池时遇到问题。我们通过消除长期存在的事务然后在客户端中发现他们不会释放连接的错误来解决这个问题。不幸的是，我们所有的客户端都是用 Java 和 Cobol 实现的，所以我没有任何针对 .Net 的建议。

# javascript - document.createDocumentFragment() 似乎在被附加后被清空了？

> ID：10914716
> 
> 赞同：2
> 
> 时间：2012-06-06T13:00:05.180
> 
> 标签：javascript, dom

如果您使用创建 DocumentFragment `document.createDocumentFragment()`，将子级附加到它，然后将缓冲区附加到某些东西，则缓冲区的所有子级似乎都消失了。例子：

```
var buffer = document.createDocumentFragment() ;

for (var i = 1; i <= 10; i++)
{
    var div = document.createElement('div');
    div.innerHTML = i;
    buffer.appendChild(div);
}

console.log( 'buffer: ' , buffer );

document.getElementById('container').appendChild(buffer);

console.log( 'buffer now: ' , buffer ); 
```

这里，在第一个 console.log 中，缓冲区的 childNodes 有 10 个孩子，在第二个中，childNodes 有 0 个。

有没有办法将子节点保留在某处而不让它们重置，以便缓存缓冲区并且不必每次都将子节点附加到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:22:02.550

您刚刚描述了 a 的性质`DocumentFragment`。如果要重用相同的内容，可以在每次将其附加到文档之前克隆片段：

```
var bufferCopy = buffer.cloneNode(true);
document.getElementById('container').appendChild(bufferCopy); 
```

# linq - Linq to Objects - 左外连接不同对象属性值到聚合计数

> ID：10914720
> 
> 赞同：2
> 
> 时间：2012-06-06T13:00:25.267
> 
> 标签：linq, left-join, distinct, aggregate-functions

假设我有以下对象的通用列表：

```
public class Supermarket
{
    public string Brand { get; set; }
    public string Suburb { get; set; }
    public string State { get; set; }
    public string Country { get; set; }
} 
```

因此，使用一个`List<Supermarket>`填充了许多具有不同值的对象，我试图：

1.  从 a 中包含的对象超集中选择不同的`Suburb`属性（例如，此超集包含 20 个不同的郊区）。`Supermarket``List<Supermarket>`

2.  将上面的 Distinct List of Suburbs 加入到另一组通过 LINQ 查询获得的聚合和计数的 Suburbs 到不同的、较小的`List<Supermarket>`

我的超集中不同的项目是：

```
"Blackheath"
"Ramsgate"
"Penrith"
"Vaucluse"
"Newtown" 
```

我的聚合查询的结果是：

```
"Blackheath", 50
"Ramsgate", 30
"Penrith", 10 
```

我想加入他们以获得

```
"Blackheath", 50
"Ramsgate", 30
"Penrith", 10
"Vaucluse", 0
"Newtown", 0 
```

这是我到目前为止所尝试的：

```
var results = from distinctSuburb in AllSupermarkets.Select(x => x.Suburb).Distinct()
                select new
                {
                    Suburb = distinctSuburb,
                    Count = (from item in SomeSupermarkets
                            group item by item.Suburb into aggr
                            select new
                            {
                                Suburb = aggr.Key,
                                Count = aggr.Count()
                            } into merge
                            where distinctSuburb == merge.Suburb
                            select merge.Count).DefaultIfEmpty(0)
                } into final
                select final; 
```

这是我第一次不得不在 Stack Overflow 上发帖，因为它是一个非常棒的资源，但我似乎无法为此拼凑出一个解决方案。

谢谢你的时间

编辑：好的所以我在最初的帖子后不久解决了这个问题。我唯一缺少的是在调用 to`.ElementAtOrDefault(0)`之后链接调用 to `.DefaultIfEmpty(0)`。我还验证了使用`.First()`而不是`.DefaultIfEmpty(0)`像 Ani 指出的那样有效，正确的查询如下：

```
var results = from distinctSuburb in AllSupermarkets.Select(x => x.Suburb).Distinct()
                select new
                {
                    Suburb = distinctSuburb,
                    Count = (from item in SomeSupermarkets
                            group item by item.Suburb into aggr
                            select new
                            {
                                Suburb = aggr.Key,
                                Count = aggr.Count()
                            } into merge
                            where distinctSuburb == merge.Suburb
                            select merge.Count).DefaultIfEmpty(0).ElementAtOrDefault(0)
                } into final
                select final; 
```

最后：我运行了 Ani 的代码片段并确认它运行成功，因此**这两种**方法都有效并解决了原始问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:14:13.350

我不太了解`State`和`Suburb`( ) 之间假定的等效性，但您可以在调用后`where distinctSuburb == merge.State`添加 a 来修复您的查询。`.First()``DefaultIfEmpty(0)`

但这是我将如何编写您的查询：使用`GroupJoin`：

```
var results = from distinctSuburb in AllSupermarkets.Select(x => x.Suburb).Distinct()
              join item in SomeSupermarkets 
                        on distinctSuburb equals item.Suburb
                        into suburbGroup
              select new
              {
                    Suburb = distinctSuburb,
                    Count = suburbGroup.Count()
              }; 
```

# visual-studio - 作为 TestInitialize 的一部分发布数据库项目

> ID：10914721
> 
> 赞同：3
> 
> 时间：2012-06-06T13:00:33.803
> 
> 标签：visual-studio, unit-testing, visual-studio-2012

`TestInitialize`在 Visual Studio 中运行单元（或在这种情况下为集成）测试时，是否可以将数据库项目（在同一解决方案中）作为方法的一部分发布？

这个想法是每个实际命中数据库的集成测试都应该命中一个已知良好且干净的数据库，而做到这一点的最佳方法是在每次测试时完全刷新数据库。我一直在网上寻找很多关于数据库和测试的相关信息，但没有关于在运行自动化测试时刷新数据库的信息。我也没有在 Visual Studio 界面中找到任何东西，或者至少我错过了它。

我正在使用 Visual Studio Ultimate 2012 RC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:02:34.257

在一位同事[提供的有用链接](https://stackoverflow.com/a/8376809/328193)之后，我最终使用`Process.Start`来运行`sqlpackage.exe`部署。从 Visual Studio 的角度来看，它不像我希望的那样干净，但它完成了工作。我的引导现在看起来像这样：

```
private const string SQL_PUBLISH_COMMAND = @"C:\Program Files (x86)\Microsoft SQL Server\110\DAC\bin\sqlpackage.exe";
private const string SQL_PUBLISH_COMMAND_ARGUMENTS = @"/Action:Publish /SourceFile:C:\Data\Code\NewEdCo\Domain\NewEdCo.Database.SQLExpress\bin\Debug\NewEdCo.Database.SQLExpress.dacpac /Properties:CreateNewDatabase=True /TargetServerName:hactar\sqlexpress2012 /TargetDatabaseName:NewEdCoTest";

private void DeployTestDatabase()
{
    var procInfo = new ProcessStartInfo
    {
        Arguments = SQL_PUBLISH_COMMAND_ARGUMENTS,
        CreateNoWindow = true,
        ErrorDialog = false,
        FileName = SQL_PUBLISH_COMMAND,
        RedirectStandardOutput = true,
        UseShellExecute = false
    };
    var proc = new Process
    {
        StartInfo = procInfo
    };

    proc.Start();
    var result = proc.StandardOutput.ReadToEnd();
}

[TestInitialize]
public void BootstrapTests()
{
    DeployTestDatabase();
}

[TestCleanup]
public void TearDownTests()
{
    DeployTestDatabase();
} 
```

用于`ProcessStartInfo`标准输出和读取的选项（即使我还没有对它做任何事情）是为了保持任务同步。这样测试就不会互相影响。这增加了集成测试的执行时间，但这对我的需求来说很好。

我意识到我在前后都进行了彻底的*刷新*。如果随着我的测试数量增加而这需要太长时间，我会重新考虑。但是现在我想确保它在测试前被刷新，并且在测试后不留下任何痕迹。

[MSDN 提供了广泛](http://msdn.microsoft.com/en-us/library/hh550080.aspx)的`sqlpackage.exe`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T23:26:35.090

面对同样的问题，我发现[DACSmash](https://www.nuget.org/packages/DacSmash/) NuGet 包很容易从[项目站点](https://github.com/merbla/DacSmash)上的示例开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-09T19:03:05.823

> 这个想法是每个实际命中数据库的集成测试都应该命中一个已知良好且干净的数据库，而做到这一点的最佳方法是在每次测试时完全刷新数据库。

我最近遇到了类似的问题，并决定最初遵循相同的数据库娱乐路线，但是当有很多测试运行时，测试运行速度太慢了。

因此，我还尝试了其他一些方法，以使测试更快，同时仍然具有弹性：

*   针对它们引入的突变将测试拆分为读取和写入，以避免前者的数据库恢复；
*   使用瞬态事务，在测试运行后恢复；
*   使用数据库快照而不是完整数据库备份恢复/重新创建；
*   使用允许并行化测试的数据库池；
*   使用 dotnet-testcontainers 在 docker 中运行 sql server；

最终得到了一个使用简单的插入/删除脚本的[Reseed](https://github.com/v-zubritsky/Reseed)库，但效率很高。希望对遇到同样问题的人有所帮助。

[Respawn](https://github.com/jbogard/Respawn)也是数据库清理需要考虑的东西。

# html - -moz-max-content 自定义实现

> ID：10914723
> 
> 赞同：4
> 
> 时间：2012-06-06T13:00:36.577
> 
> 标签：html, css

我有一个`ul`并且我想修复`ul`内容的宽度。目前我使用`-moz-max-content`但在非 Mozilla 浏览器中存在一些问题。

我该如何实施`-moz-max-content`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T13:06:17.770

使用`max-width: intrinsic;`. 这适用于 webkit 浏览器（Chrome 和 Safari）。

请注意，以 开头的属性`-moz`仅在 Mozillas Firefox 中有效。常见的前缀有：

*   `-moz`火狐浏览器
*   `-webkit`用于 Webkit（主要是 Chrome 和 Safari 以及许多 Chromium 分支）
*   `-ms`适用于 IE10
*   `-o`歌剧

[如http://msdn.microsoft.com/library/ms530811.aspx](http://msdn.microsoft.com/library/ms530811.aspx)所写，您只能定义像素或百分比。自 IE7 起支持该`max-width`属性本身。

可能是你可以使用`max-width: 100%;`IE，但我不确定结果是否相同。

# sql - SQL 连接与嵌套查询

> ID：10914724
> 
> 赞同：1
> 
> 时间：2012-06-06T13:00:39.160
> 
> 标签：sql, join

这两个 SQL 语句返回相同的结果，但第一个比第二个慢得多：

```
SELECT leading.email, kstatus.name, contacts.status 
FROM clients 
JOIN clients_leading ON clients.id_client = clients_leading.id_client 
JOIN leading ON clients_leading.id_leading = leading.id_leading 
JOIN contacts ON contacts.id_k_p = clients_leading.id_group 
JOIN kstatus on contacts.status = kstatus.id_kstatus 
WHERE (clients.email = 'some_email' OR clients.email1 = 'some_email') 
ORDER BY contacts.date DESC;

SELECT leading.email, kstatus.name, contacts.status
FROM (
     SELECT * 
     FROM clients 
     WHERE (clients.email = 'some_email' OR clients.email1 = 'some_email')
     ) 
AS clients  
JOIN clients_leading ON clients.id_client = clients_leading.id_client 
JOIN leading ON clients_leading.id_leading = leading.id_leading  
JOIN contacts ON contacts.id_k_p = clients_leading.id_group  
JOIN kstatus on contacts.status = kstatus.id_kstatus 
ORDER BY contacts.date DESC; 
```

但我想知道为什么会这样？看起来在第一个语句中首先完成连接，然后应用 WHERE 子句，而第二个则正好相反。但它在所有数据库引擎上的行为方式是否相同（我在 MySQL 上测试过）？

我期待数据库引擎可以优化像 fors one 和 fir apply WHERE 子句这样的查询，然后进行连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:06:11.577

这可能有很多不同的原因（键控等），但您可以查看[explain](http://dev.mysql.com/doc/refman/5.0/en/explain.html) mysql 命令以了解语句是如何执行的。如果您可以运行它并且它仍然是一个谜，请发布它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T00:55:29.733

你总是可以用嵌套查询替换连接......它总是更快但很混乱......

# wpf - 如何将 2 个控件绑定到 1 个字段并访问 ConvertBack 的 2 个控件值？

> ID：10914725
> 
> 赞同：0
> 
> 时间：2012-06-06T13:00:39.650
> 
> 标签：wpf, binding, datatemplate, ivalueconverter, imultivalueconverter

在 DataGridTemplateColumn DataTemplate 中，我想将 2 个控件绑定到格式为“[name]:[value]”的字符串字段，即字符串由冒号“:”分隔。我需要将控件 a) 绑定到 [name] 部分和控件 b) 值部分。

我已经能够成功地使用 IValueConverter 来拆分字符串以进行显示：

```
public class NameAndValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        string rtn = ""; 

        string[] split = value.ToString().Split(':');

        if (split.Count() == 2)
        {
            if(parameter.ToString() == "Name")
                rtn = split[0];

            if(parameter.ToString() == "Value")
                rtn = split[1];
        }

        return rtn;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new InvalidOperationException("NameAndValueConverter can only be used OneWay.");
    }
} 
```

和 XAML：

```
<DataGridTemplateColumn.CellEditingTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <StackPanel.Resources>
                <local:NameAndValueConverter x:Key="NameAndValueConverter" />
            </StackPanel.Resources>
            <TextBox x:Name="namePart" Text="{Binding Path=FieldType, Converter={StaticResource NameAndValueConverter}, ConverterParameter='Name'}" />
            <TextBox x:Name="valuePart" Text="{Binding Path=FieldType, Converter={StaticResource NameAndValueConverter}, ConverterParameter='Value'}" />
        </StackPanel>
    </DataTemplate>
</DataGridTemplateColumn.CellEditingTemplate> 
```

但是可以在文本框中编辑数据，那么如何访问 ConvertBack 中的 2 个文本框值以便它们可以再次连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:02:45.370

在 XAML 中执行此操作：

```
<DataGridTemplateColumn.CellEditingTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <StackPanel.Resources>
                <local:NameAndValueConverter x:Key="NameAndValueConverter" />
            </StackPanel.Resources>
            <TextBox x:Name="namePart" Text="{Binding Path=FieldType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource NameAndValueConverter}, ConverterParameter='Name'}" />
            <TextBox x:Name="valuePart" Text="{Binding Path=FieldType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource NameAndValueConverter}, ConverterParameter='Value'}" />
        </StackPanel>
    </DataTemplate>
</DataGridTemplateColumn.CellEditingTemplate> 
```

应该足够了。您需要一个`TwoWay`绑定来从 UI 进行编辑，并且当您设置为时`UpdateSourceTrigger`将`PropertyChanged`在`TextBox`ViewModel 中修改属性时自动更新（您显然需要实现`INotifyPropertyChanged`）

# visual-c++ - Zlib 解压缩返回 Z_DATA_ERROR

> ID：10914726
> 
> 赞同：2
> 
> 时间：2012-06-06T13:00:47.597
> 
> 标签：visual-c++, zlib, compression

我正在开发一个客户端服务器应用程序，其中客户端压缩发送到服务器的 2MB 数据，服务器接收数据将其解压缩并将其写入文件。

对于某些数据包解压缩失败，我将 MD5 和添加到客户端和服务器端代码，并在压缩数据后在客户端使用解压缩进行调试。在客户端传递给解压缩函数的相同参数在服务器端失败并出现 Z_DATA_ERROR。数据的 MD5sum 似乎相同。我完全不知道接下来我能做什么。

服务器端鳕鱼看起来像这样：

```
int ret = uncompress((Bytef*)unCompressedBuffer, &dwUncompressedBytes, (const Bytef*) receivedBuffer+525, dwBlockLength);

    if (ret == Z_OK)
    {

    }
    else
    {

        std::cout << " Uncompression failed for Block: " << iBlock << std::endl;

        std::cout << " PacketType: 4" << " Block Number:" << iBlock << " Length:" << dwBlockLength << "Error:" << ret << std::endl;

        PrintMD5SumResult((PBYTE)receivedBuffer+525, compressedSize-525);
        std::cout << " Uncompressed MD5 Checksum:0";
        PrintMD5SumResult((PBYTE)unCompressedBuffer, dwUncompressedBytes);

        }
} 
```

客户端代码如下所示：

```
int ret = compress2(l_pCompressData + 4, &destLen, 
        (const Bytef*) pBlockData, dwBlockSize, 6); 

memcpy(m_pWriteBuffer+525, l_pCompressData, destLen);
    m_dwWriteBytes = destLen+525;

std::cout << " \n Compressed MD5 Sum:0";
PrintMD5SumResult(m_pWriteBuffer, m_dwWriteBytes);
PrintMD5SumResult(m_pWriteBuffer+525, m_dwWriteBytes-525);

int ret = uncompress(m_pUnCompressData, &uncomLen, (const Bytef*)m_pWriteBuffer+525, destLen);

if(ret != Z_OK)
{
    std::cout << " Uncompression has failed." << std::endl;
}
else
{
    //std::cout << " UnCompressed MD5 Sum:0";
    //PrintMD5SumResult((PBYTE)m_pUnCompressData, md5Output, dwBlockSize);
}

// Write the 2MB to the network
WriteDataOverNetwork(m_NetworkStream, m_pWriteBuffer, m_dwWriteBytes, &dwNumBytes, TRUE); 
```

我将问题缩小到 zlib 中的以下代码段 - 但很难理解它。在 inflate() 函数中，(ZSWAP32(hold)) != state->check) 此语句失败。有人可以帮我吗？此处使用的 MD5sum 来自 Boton C++ 库。

```
 case CHECK:
            if (state->wrap) {
                NEEDBITS(32);
                out -= left;
                strm->total_out += out;
                state->total += out;
                if (out)
                    strm->adler = state->check =
                        UPDATE(state->check, put - out, out);
                out = left;
                if ((
#ifdef GUNZIP
                     state->flags ? hold :
#endif
                     ZSWAP32(hold)) != state->check) {
                    strm->msg = (char *)"incorrect data check";
                    state->mode = BAD;
                    break;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T13:45:47.283

我最近在使用 zlib 进行内存压缩/解压缩时也遇到了这个问题。代码如下：

```
size_t size = 1048576;
void *data;
void *comp_data;
uLong comp_data_len;
void *uncomp_data;
uLong uncomp_data_len;
void *temp;
int ret;

data = calloc(1, size); // data is filled with all zeros

comp_data_len = size * 1.01 + 12;
comp_data = calloc(1, size);
ret = compress(comp_data, &comp_data_len, data, size); //here ret is Z_OK.

uncomp_data_len = size;
uncomp_data = calloc(1, uncomp_data_len);
ret = uncompress(uncomp_data, &uncomp_data_len, comp_data, comp_data_len); //here ret is Z_OK

temp = calloc(1, 496);

for (i = 0; i < 100; i++)
{
    //here fill some random data to temp

    memcpy((char*)data + i * 100, temp, 496);

    ret = compress(comp_data, &comp_data_len, data, size); //here ret is Z_OK.
    ret = uncompress(uncomp_data, &uncomp_data_len, comp_data, comp_data_len); //here ret sometimes is Z_OK, sometimes is Z_DATA_ERROR!!!
} 
```

我还跟踪了代码，发现它在语句“inflate() function, (ZSWAP32(hold)) != state->check)”处也失败了。所以我不敢相信 uncompress 函数与数据模式有关。我错了吗？

我也注意到compress函数调用deflate进行压缩，deflate每64k处理一次数据，所以需要我将它拆分为64k块，逐块压缩，然后uncompress可以正常工作吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-27T11:17:12.457

不知道是不是正确的答案，也许有帮助！我的英语太差了，希望你能理解。也许参数转换为另一个有错误。当他们转换信息时可能会丢失！我遇到了同样的问题，使用源代码类型后问题已经解决（Bytef\uLongf\uLong等）。wed 是中文的，你可以用谷歌翻译。 [http://www.360doc.com/content/13/0927/18/11217914_317498849.shtml](http://www.360doc.com/content/13/0927/18/11217914_317498849.shtml)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-30T02:05:37.043

这是我的测试。arry[]可以更大，同时sour[]/dest[]/destLen/Len会改变。使用源代码类型问题已经解决。希望会有所帮助。

我的代码如下：

```
 #include <stdio.h>
    #include "zlib.h"

    int main(){
        //the buffer can be larger
    Bytef arry[] = "中文测试 yesaaaaa bbbbb ccccc ddddd 中文测试 yesaaaaa bbbbb ccccc ddddd 中文测试yesaaaaa bbbbb ccccc ddddd 中文测试 yes 我是一名军人！";
    //buffer length
        int size = sizeof(arry);
    //store the uncompressed data
        Bytef sour[2500];
        //store the compressed data
    Bytef dest[2500];
        //压缩后的数据可能比源数据要大
    unsigned long destLen = 2500;
        //解压数据时因为不知道源数据大小，设置时长度尽可能大一些。以免出错
    unsigned long Len = 2500;
    int ret = -1;
    ret = compress(dest,&destLen,arry,size);
    //dest[destLen] = '\0';
    printf("ret = %d\ndest = %s\n", ret, dest);
    ret = uncompress(sour,&Len,dest,destLen);
    //sour[size-1] = '\0';
    printf("ret = %d\nsour = %s\n", ret, sour);
    return 0;
} 
```

# php - PHP 关联数组是有序的吗？

> ID：10914730
> 
> 赞同：75
> 
> 时间：2012-06-06T13:01:03.693
> 
> 标签：php, arrays, dictionary

我来自python背景，类似的python数据类型（字典）是一组**无序**的键值对。

我想知道 PHP 关联数组是否是无序的？它们似乎是订购的。

```
$test = array(
  'test' => 'test',
  'bar' => 'bar',
);

var_dump($test);    

var_dump(array_slice($test, 0, 1)); 
```

测试总是在 bar 之前，我可以像你看到的那样对这个数组进行切片。那么这是否总是保证跨 php 版本订购？顺序只是我声明数组的顺序吗？那么有什么东西在内部指向“测试”以将 [0] 放在数组中？我已经阅读了[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)但它并没有对这个问题有太多的了解。我很欣赏你的回应。泰

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-06T13:02:07.793

PHP 关联数组（以及数字数组）*是有序*的，PHP 提供了各种函数来处理数组键排序，例如[`ksort()`](http://us3.php.net/manual/en/function.ksort.php)、[`uksort()`](http://us3.php.net/manual/en/function.uksort.php)和[`krsort()`](http://us3.php.net/manual/en/function.krsort.php)

此外，PHP 允许您使用无序的数字键声明数组：

```
$a = array(3 => 'three', 1 => 'one', 2 => 'two');
print_r($a);

Array
(
    [3] => three
    [1] => one
    [2] => two
)
// Sort into numeric order
ksort($a);
print_r($a);
Array
(
    [1] => one
    [2] => two
    [3] => three
) 
```

[从文档中：](http://php.net/manual/en/language.types.array.php)

> PHP**中的数组实际上是一个有序映射**。映射是将值与键相关联的类型。这种类型针对几种不同的用途进行了优化；它可以被视为数组、列表（向量）、哈希表（映射的实现）、字典、集合、堆栈、队列等等。由于数组值可以是其他数组，因此树和多维数组也是可能的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-06T13:02:58.370

该[文档](http://php.net/manual/en/language.types.array.php)指出：

```
An array in PHP is actually an ordered map. 
```

所以是的，它们总是被订购的。数组被实现为[哈希表](http://en.wikipedia.org/wiki/Hash_table)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-02T17:16:56.997

数组是有序的，但这并不意味着键是排序的，这意味着它们是按*给定*的顺序排列的。没有指定确切的顺序，但它似乎是您在其中引入键值对的顺序。

要理解它，想想不被订购意味着什么？想想关系数据库中的关系。关系*本质*上不是有序的：当您通过查询访问数据库时，除非您提供**order**子句，否则可以以任何顺序返回相同的数据。即使数据没有被修改，相同的数据也可以以不同的顺序返回。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T13:03:31.590

从[php 手册](http://php.net/manual/en/language.types.array.php)：

> [数组](http://php.net/manual/en/language.types.array.php)是有序的。可以使用各种排序功能更改顺序。有关详细信息，请参阅[数组函数](http://php.net/manual/en/ref.array.php)部分。

我依赖于它们是订购的事实，并且它在我拥有的每个项目中都始终如一地工作。

# python - Twisted 服务器发送事件使用 Internet Explorer 访问

> ID：10914740
> 
> 赞同：2
> 
> 时间：2012-06-06T13:01:49.063
> 
> 标签：python, internet-explorer, real-time, twisted, server-sent-events

我正在做一个需要实时更新的项目。所以，很久以前，我决定使用 Twisted SSE Handler (cyclone.sse)。该项目已结束。除了 Internet Explorer 之外，所有 pub/sub 的内容都适用于所有浏览器。IE 不支持 SSE。如何在不更改服务器端代码的情况下让 pub-sub 在 IE 上工作？当我使用 cyclone.sse 时，长轮询也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:19:10.327

回答我自己的问题有点奇怪。但我刚刚找到了答案。我不得不进行*长轮询*。看起来，当不支持服务器发送的事件时，我必须编写一个回退到长轮询的框架。以防万一将来有人来参考。

# python - 连接两个 TCP 套接字而不定义客户端/服务器角色

> ID：10914750
> 
> 赞同：10
> 
> 时间：2012-06-06T13:02:22.433
> 
> 标签：python, sockets, distributed-computing

## 问题

我想通过 TCP 连接两个进程，但我不想指定其中哪个是服务器，哪个是客户端，但它们知道彼此的 IP 和主机。他们应该自己决定哪个是服务器，哪个是客户端，然后启动连接。

## 背景

我正在研究一个双向分布式框架 - 与 RPC 相比 - 没有客户端/服务器模型。相反，分布式组件应该能够通过指定主机和端口来相互通信。

*编辑：*这个概念超出了套接字连接的实现细节。这应该是一个新概念，以简化[软件工程](http://en.wikipedia.org/wiki/Software_engineering)方面的分布式应用程序设计。这与 RPC 和 SOA（面向服务器/客户端）和面向消息的系统（需要使用 IMO 非直观模式）形成对比。

## 解决方案不得

*   通过 UDP 定义协议，因为我需要 TCP 可靠性和 SSL 使用的可能性
*   使用 ZeroMQ 之类的框架，因为我无法在目标平台上使用二进制包
*   *编辑*：一个全局消息代理/名称服务器，因为它应该是一个轻量级的解决方案，没有额外的过程。添加这样一个节点只会重新引入客户端/服务器概念

## 更新

经过讨论，似乎只有一种有用的方法：每个对等点都需要一个列表套接字（或者您当然不能进行任何自动发现）。在连接请求中，如果还没有打开的连接，节点将尝试连接到另一个对等点。

如果连接是同时完成的，这可能会出现问题，因此我们最终会在两个对等方之间建立两个连接。现在的问题是如何在异步上下文中处理它。我认为这并不像下面评论中所说的那么简单，因为我们需要保证只关闭一个连接。我认为这项任务需要像 2PC 这样的协议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T14:40:39.533

在我看来，你有点困惑。是的，软件工程文献讨论了服务器/客户端模型，并将其与其他模型（例如点对点）进行了对比。然而，在其核心，分布式系统总是最终在某处使用服务器/客户端模型，因为实际上没有其他方式可以通过 Internet 进行通信。

（从技术上讲，您应该能够通过 Internet 发送任何类型的 IP 数据报，因此您可以尝试发明一种不同的传输协议，其核心不是服务器/客户端，但我假设您不想安装新的传输层进入操作系统的网络堆栈，此外，还有其他陷阱，例如可能位于中间的家用 NAT 设备，会阻碍此类通信。）

如果您从一开始就限制所有类型的通信，这两个节点如何“在它们之间做出决定”谁来听和谁来连接？您只能通过 Internet 可靠地使用两种协议：UDP 和 TCP。它们都涉及设置侦听套接字的进程和另一个向所述侦听服务器发送消息（UDP）或执行连接尝试（TCP）的过程。

您在建立连接之前执行 UDP 消息的想法并没有真正改变任何事情。侦听 UDP 消息的进程仍然是服务器。如果有的话，它只是意味着除了侦听或启动 TCP 连接之外，所有节点也必须是 UDP 侦听服务器。

如果您不想在握手发生之前在对等方中拥有任何类型的侦听套接字，则您将需要某种第三方消息代理。这很明显，因为你不能在没有监听套接字的情况下进行通信，所以你一开始就不能执行所说的握手。第 22 条军规。

还有一个显而易见的解决方案：让每个对等点都监听连接，然后当两个对等点想要相互交谈时，让它们都尝试相互连接：如果两者都无法连接，则报告两个对等点都无法充当服务器。如果可以连接，请照常进行。如果两者都可以连接，则丢弃第二个连接并继续使用第一个连接。

我的建议是让您研究一下像 BitTorrent 这样的协议如何运作（它们的功能与我上面详述的解决方案非常相似）。或者，在您弄清楚这一点之后，您可能想要研究 NAT 穿越解决方案，例如[STUN](http://en.wikipedia.org/wiki/STUN)，以确保您不会经常遇到“两个对等方都不能成为服务器”的情况，但这是一个单独的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:31:17.383

如果你想让两个对等点找到对方，你要么必须调查：

*   广播方案：zeromq 可以工作，但如果你不能使用它，你可以尝试使用 ip 多播
*   您自己的发现服务

引导对等应用程序将需要上述之一。大多数人最终使用网络“广播”Bittorrent Tracker URL，然后帮助同行找到另一个。

鉴于您的要求，我强烈建议您研究 IP 多播。我使用 Twisted (http://twistedmatrix.com/documents/current/core/howto/udp.html) 创建了一个简单的 UDP 协议。我用它在我的桌面机器上启动了一个主进程，并在一组远程机器上启动了多个工作进程，以协调站点的负载测试。我不会说这是微不足道的，但它工作得很好。

关键是您必须定义自己的简单有线协议，可能是简单的网络字符串 (+)。我会使用像 JSON 这样的简单结构化消息格式来轻松序列化，并允许您轻松地在消息中编码元数据。

如果您使用 2 个 UDP 多播端口，一个用于发现，另一个用于您想要在节点之间发送的消息或数据，您将拥有更简单的时间。

我希望这会有所帮助，但如果没有更多关于你实际想要完成的细节，很难更具体。

# javascript - 基于路由动态加载 Node.js 模块

> ID：10914751
> 
> 赞同：28
> 
> 时间：2012-06-06T13:02:26.210
> 
> 标签：javascript, api, node.js, prototype, v8

我正在使用 express 在 Node.js 中做一个项目。这是我的目录结构：

```
root
|-start.js
|-server.js
|-lib/
|    api/
|        user_getDetails.js
|        user_register.js 
```

该`lib/api/`目录有许多与 API 相关的 JS 文件。我需要做的是制作一种挂钩系统，每当从 express HTTP 服务器请求一个 API 函数时，它都会执行相应 API 处理程序中指定的任何操作。这可能令人困惑，但希望你能明白这一点。

1.  Larry 通过 POST 发送请求以获取用户详细信息。
2.  服务器查找`lib/api`与该请求关联的函数。
3.  服务器执行操作并将数据发送回拉里。

希望你能帮助我。我在想它可以使用原型来完成，但不确定。

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-06T13:43:05.083

如果您知道您的脚本在哪里，即您有一个初始目录，例如`DIR`，那么您可以使用`fs`，例如：

**服务器.js**

```
var fs = require('fs');
var path_module = require('path');
var module_holder = {};

function LoadModules(path) {
    fs.lstat(path, function(err, stat) {
        if (stat.isDirectory()) {
            // we have a directory: do a tree walk
            fs.readdir(path, function(err, files) {
                var f, l = files.length;
                for (var i = 0; i < l; i++) {
                    f = path_module.join(path, files[i]);
                    LoadModules(f);
                }
            });
        } else {
            // we have a file: load it
            require(path)(module_holder);
        }
    });
}
var DIR = path_module.join(__dirname, 'lib', 'api');
LoadModules(DIR);

exports.module_holder = module_holder;
// the usual server stuff goes here 
```

现在您的脚本需要遵循以下结构（因为该`require(path)(module_holder)`行），例如：

**user_getDetails.js**

```
function handler(req, res) {
    console.log('Entered my cool script!');
}

module.exports = function(module_holder) {
    // the key in this dictionary can be whatever you want
    // just make sure it won't override other modules
    module_holder['user_getDetails'] = handler;
}; 
```

现在，在处理请求时，您可以：

```
// request is supposed to fire user_getDetails script
module_holder['user_getDetails'](req, res); 
```

这应该将所有模块加载到`module_holder`变量中。我没有测试它，但它应该可以工作（**除了错误处理！！！**）。您可能想要更改此功能（例如制作`module_holder`树，而不是单层字典），但我认为您会掌握这个想法。

此函数应在每次服务器启动时加载一次（如果您需要更频繁地触发它，那么您可能正在处理动态服务器端脚本，这是一个 baaaaaad 想法，恕我直言）。您现在唯一需要做的就是导出`module_holder`对象，以便每个视图处理程序都可以使用它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T08:56:02.993

应用程序.js

```
var c_file = 'html.js';

var controller = require(c_file);
var method = 'index';

if(typeof controller[method] === 'function')
    controller[method](); 
```

html.js

```
module.exports =
{
    index: function()
    {
        console.log('index method');
    },
    close: function()
    {
        console.log('close method');    
    }
}; 
```

稍微动态化这段代码，你可以做一些神奇的事情：D

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-30T00:00:37.037

下面是一个 REST API Web 服务的示例，它根据发送到服务器的 url 动态加载处理程序 js 文件：

服务器.js

```
var http = require("http");
var url = require("url");

function start(port, route) {
   function onRequest(request, response) {
       var pathname = url.parse(request.url).pathname;
       console.log("Server:OnRequest() Request for " + pathname + " received.");
       route(pathname, request, response);
   }

   http.createServer(onRequest).listen(port);
   console.log("Server:Start() Server has started.");
}

exports.start = start; 
```

路由器.js

```
function route(pathname, req, res) {
    console.log("router:route() About to route a request for " + pathname);

    try {
        //dynamically load the js file base on the url path
        var handler = require("." + pathname);

        console.log("router:route() selected handler: " + handler);

        //make sure we got a correct instantiation of the module
        if (typeof handler["post"] === 'function') {
            //route to the right method in the module based on the HTTP action
            if(req.method.toLowerCase() == 'get') {
                handler["get"](req, res);
            } else if (req.method.toLowerCase() == 'post') {
                handler["post"](req, res);
            } else if (req.method.toLowerCase() == 'put') {
                handler["put"](req, res);
            } else if (req.method.toLowerCase() == 'delete') {
                handler["delete"](req, res);
            }

            console.log("router:route() routed successfully");
            return;
        } 
    } catch(err) {
        console.log("router:route() exception instantiating handler: " + err);
    }

    console.log("router:route() No request handler found for " + pathname);
    res.writeHead(404, {"Content-Type": "text/plain"});
    res.write("404 Not found");
    res.end();

}

exports.route = route; 
```

index.js

```
var server = require("./server");
var router = require("./router");

server.start(8080, router.route); 
```

就我而言，处理程序位于 /TrainerCentral 子文件夹中，因此映射的工作方式如下：

localhost:8080/TrainerCentral/Recipe 将映射到 js 文件 /TrainerCentral/Recipe.js localhost:8080/TrainerCentral/Workout 将映射到 js 文件 /TrainerCentral/Workout.js

这是一个示例处理程序，它可以处理用于检索、插入、更新和删除数据的 4 个主要 HTTP 操作中的每一个。

/TrainerCentral/Workout.js

```
function respond(res, code, text) {
    res.writeHead(code, { "Content-Type": "text/plain" });
    res.write(text);
    res.end();
}

module.exports = {
   get: function(req, res) {
       console.log("Workout:get() starting");

       respond(res, 200, "{ 'id': '123945', 'name': 'Upright Rows', 'weight':'125lbs' }");
   },
   post: function(request, res) {
       console.log("Workout:post() starting");

       respond(res, 200, "inserted ok");
   },
   put: function(request, res) {
       console.log("Workout:put() starting");

       respond(res, 200, "updated ok");
   },
   delete: function(request, res) {
       console.log("Workout:delete() starting");

       respond(res, 200, "deleted ok");
   }
}; 
```

使用“node index.js”从命令行启动服务器

玩得开心！

# asp.net - 将控制权传递给同一控制器中的另一个方法

> ID：10914758
> 
> 赞同：0
> 
> 时间：2012-06-06T13:02:52.027
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有一个控制器

```
public ActionResult Index()
{
   //SomeCode Here
}

public ActionResult CommingFromAnotherDomain(bool Result)
{
   if(Result)
   {
      //How to pass control to upper method?? 
   }
} 
```

CommingFromAnotherDomain 将首先执行，但在检查 if 条件中的参数之后。如何将控制权传递给上层方法 Index()。

而且我还想在 Index 中检查以下结果，以便我可以从 Index 方法中消除一些工作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:05:45.810

```
public ActionResult Index()
{
   //SomeCode Here
}

public ActionResult CommingFromAnotherDomain(bool Result)
{
     if(Result)
     {
         return Index();
     }
     // some code...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:13:23.087

在您的 Global.asax 中，您可以提供以下路线（或接近路线）以访问 Index Controller 方法。

```
 routes.MapRoute(
            "ComingFromAnotherDomain", // Route name
            "YourController/ComingFromAnotherDomain/{result}", 
            new { controller = "YourController", action = "Index", result = UrlParameter.Optional } 
```

# c++ - 如何在 C++ 中检查托管指针是否无效？

> ID：10914771
> 
> 赞同：-1
> 
> 时间：2012-06-06T13:03:42.683
> 
> 标签：c++, .net, command-line-interface

我们有以下内容：

```
int* a;
if(!a) //if(a == NULL) also do that
a = new int; 
```

问题是如何用 int^ 做到这一点？

```
int^ a;
if(?????????????)
a = gcnew int; 
```

PS nullptr 并没有解决所有问题，因为我找到了持有值的对象（nullptr 判断为不相等），然后立即使用该对象导致 System.ObjectDisposedException。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:05:47.130

使用`nullptr`：

```
int ^a = nullptr;
...
if(a == nullptr)
{
   a = gcnew int;
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:03:23.790

这应该检查变量，但它的实现真的很奇怪，并且依赖于 .net GC 操作。

```
 try
            {
                ATestFunctionThatUseVariableForNothing(a);
            }
            catch (System::ObjectDisposedException^ e)
            {
                a = nullptr;
            }
            catch (System::NullReferenceException^ e)
            {
                a = nullptr;
            } 
```

无论如何，应该有另一个更好的解决方案。

如果我们打算像普通 * 指针一样“删除”该指针，那么手动“删除”（设置为 nullptr）是安全的。

# linux - 淡化未聚焦的 GNU Emacs 框架（X 窗口）

> ID：10914772
> 
> 赞同：0
> 
> 时间：2012-06-06T13:03:50.920
> 
> 标签：linux, emacs

是否可以使 GNU Emacs 24 使未聚焦的窗口变暗一点？例如，当我的`rxvt-unicode`客户的窗口没有焦点时，我可以将我的客户设置为更暗，并使用以下字符串`~/.Xdefaults`：

```
URxvt*fading: 50 
```

当您在 2 个以上的显示器上有很多终端窗口时，它可以大大减少不适。我想在 Emacs 中使用类似的功能，但无法搜索任何内容。

[这是 urxvt 的样子（png，1.43 MB）](http://nixternal.com/wp-content/uploads/2009/01/urxvt1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:11:39.290

我做类似的事情：

```
(set-frame-parameter (selected-frame) 'alpha '(100 60))
(aput 'default-frame-alist 'alpha '(100 60)) 
```

它将选定帧的 alpha 值设置为 100，将未选定帧设置为 60，使其有点透明。我还没有测试确认它适用于其他帧参数。

# ios - 是否可以在编辑模式下使 UITableView 的行可按下？

> ID：10914773
> 
> 赞同：0
> 
> 时间：2012-06-06T13:03:54.063
> 
> 标签：ios, uitableview

我的应用程序中有一个 UITableView ，但退出编辑模式并没有什么意义。不过，我仍然希望用户在另一个屏幕上钻取和编辑内容。启用编辑时是否可以使行按下？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T13:07:10.470

`[UITableView allowsSelectionDuringEditing]`. Interface Builder 中的第一个表属性之一。

# jquery - 如何在 jQuery Mobile 多选框中设置“选项”的样式

> ID：10914775
> 
> 赞同：2
> 
> 时间：2012-06-06T13:04:05.757
> 
> 标签：jquery, jquery-mobile, customization, multi-select

我已将 Close 添加为选项，然后我想触发它​​以在单击时关闭对话框。此外，我想为类“ui-icon ui-icon-checkbox-off ui-icon-shadow”的 span 设置“display: none”，使其看起来像一个按钮。

有什么建议吗？

[http://jsfiddle.net/N5r4A/](http://jsfiddle.net/N5r4A/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:16:15.277

要隐藏复选框：

```
#select-choice-0-menu span.ui-icon {
    display: none;
}​ 
```

[http://jsfiddle.net/nirmaljpatel/N5r4A/7/](http://jsfiddle.net/nirmaljpatel/N5r4A/7/)

关闭选择选项之一的对话框；您应该从您的选择标签中删除 multiple="multiple" 属性...即更改

```
<select name="select-choice-0" id="select-choice-0" multiple="multiple" data-native-menu="false"> 
```

到

```
<select name="select-choice-0" id="select-choice-0" data-native-menu="false"> 
```

在多选列表中；单击“关闭”选项时，以下将关闭打开的对话框。

```
 $(function () {
  $('#select-choice-0').bind('change', function () {
      console.log('change in select', this);
      for (var i = 0; i < this.options.length; i++) {
          if (this.options[i].selected) {
              if(this.options[i].value == 'closeMe'){                                
                  console.log('...closing Dialog');
                  $('.ui-dialog').dialog('close');
              }
          }
      }
  });
 });​ 
```

更新了 jsfiddle：http: [//jsfiddle.net/N5r4A/10/](http://jsfiddle.net/N5r4A/10/)

# multithreading - matlab bsxfun不是多线程？

> ID：10914779
> 
> 赞同：1
> 
> 时间：2012-06-06T13:04:15.203
> 
> 标签：multithreading, performance, matlab, bsxfun

我正在使用 Matlab R2011a，根据文档，该`bsxfun`函数自 R2009a （http://www.mathworks.com/help/techdoc/rn/br5k34y-1.html）以来是多线程的。但是，当我使用 bsxfun 将矩阵与这样的上限和下限进行比较时：

```
szS=10000;
szT=50000;
matT=rand(szT,3);
matS=rand(szS,3);
matSub=rand(szS,3);
matSlb=rand(szS,3);
for k=1:szS
   matchID = all([bsxfun(@lt,matT,matSub(k,:)) bsxfun(@gt,matT,matSlb(k,:))],2);
end 
```

在任务管理器上我看到的不是只有一个核心被占用。我错过了什么还是这是正常的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:18:30.067

`bsxfun`通过在同一 MATLAB 进程中启动[线程](http://en.wikipedia.org/wiki/Thread_%28computer_science%29)来并行执行传递的函数。仅使用 Windows 中的“任务管理器”，您看不到正在执行的线程，只能看到正在运行的进程。

请记住，对于受[支持的多线程函数](http://www.mathworks.com/support/solutions/en/data/1-4PG4AN/?solution=1-4PG4AN)，只有当数据足够大时才适用加速（但在您的示例中，您肯定高于该阈值）。

另一种选择是使用*并行计算工具箱*。使用该`matlabpool`函数，您可以在后面打开新的 MATLAB 会话，每个会话都在单独的进程中。当你调用`parfor`它时，它会将负载分配给所有工作人员。这种方法可以很好地扩展，尤其是当您在计算机集群上运行它时。

我认为应该可以在相同的代码中使用两者..

# php - PHP：在购物车中，致命错误：调用未定义的函数 getCart()

> ID：10914784
> 
> 赞同：0
> 
> 时间：2012-06-06T13:04:45.390
> 
> 标签：php, function, session, shopping-cart

最近我从 php 开始，而不是因为它给了我这个错误。此代码仅用于显示文章和重新加载页面时购物车的总价格，使用 PHPSESSID，如果他们对该功能有更好的想法或替代方案，他们将不胜感激！

**索引.PHP**

```
<?php require("php/DB_Functionss.php"); ?>
<!doctype html>
<html lang="es">
<head>
    ........
</head>
<body>
    <div id="infoShopCart">
       <a href="contShopping"><img src="img/shopping_cart.png" width="30px"/>
       Artículos: <b id="cantArticles">0</b>
       Total: $ <b id="totalPriceArticles">0.00</b></a>
       <?php getCart(); ?>
    </div>
.....
....
</body>
</html> 
```

和**DB_Functions.php**

```
session_start();
$sessionID = $_COOKIE['PHPSESSID'];

    class DB_Functions {

        private $db;
        //put your code here
        //constructor
        function __construct() {
            require_once 'DB_Connect.php';
            //connecting to database
            $this->db = new DB_Connect();
            $this->db->connect();
        }
        //destructor
        function __destruct() {

        }
      public function getCart(){
            $query ="SELECT * FROM carrito ORDER BY id_pelicula";
            $result = mysql_query($query) or die(mysql_error());

            $no_of_rows = mysql_num_rows($result);
            if($no_of_rows > 0) {
                while ($row = mysql_fetch_assoc($result)) {
                    $totalItems     = $totalItems + 1;
                    $movieTotalPrice    = $movieTotalPrice + $row['precio_pelicula'];
                }
                echo ("Artículos: <b id='cantArticles'>"+$totalItems+"</b><otal: $ <b id='totalPriceArticles'>"+$totalPrice+"</b></a>");
            } else {
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:07:55.277

创建first的**实例**`DB_Functions`：

```
$dbf = new DB_Functions;
$dbf->getCart(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:07:35.667

您应该初始化对象，然后使用它的方法。像这样：

```
<div id="infoShopCart">
   <a href="contShopping"><img src="img/shopping_cart.png" width="30px"/>
   Artículos: <b id="cantArticles">0</b>
   Total: $ <b id="totalPriceArticles">0.00</b></a>
   <?php
       $db_object = new DB_Functions();
       $db_object->getCart();
   ?>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:11:45.353

您已经用两个 ss 拼写了 DB_Functions：

> 要求（“php/DB_Functionss.php”）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:16:06.427

你可以在一些 CSS 或 Jquery 插件的帮助下遇到这个问题.. 我想.. 并且还增加了更多的宽度.. 我想你的只有 38px，否则你可以使用

```
$('div').getWidth()+some number; 
```

在jQuery中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T13:18:57.153

除了没有像其他答案所说的那样实例化对象之外，这里还有问题：

```
echo ("Artículos: <b id='cantArticles'>"+$totalItems+"</b><otal: $ <b id='totalPriceArticles'>"+$totalPrice+"</b></a>"); 
```

这是错误的：`</b><otal:`

此外，您正在关闭一个`</a>`这里，但您从未打开过一个。

固定的：

```
echo ("Artículos: <b id='cantArticles'>"+$totalItems+"</b>Total: $ <b id='totalPriceArticles'>"+$totalPrice+"</b>"); 
```

此外，还有一种更好的方法来获取当前会话 ID，而不是尝试读取原始 cookie：

```
$sessionID = session_id(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T13:27:50.177

如我所见，您不需要定义类，您可以做古斯塔夫提到的事情。（必须先*初始化一个对象*，然后调用方法）

我认为你最好使用类外**函数**，或者使用**静态方法**。

```
session_start();
$sessionID = $_COOKIE['PHPSESSID'];

    class DB_Functions {

        private $db;
        //put your code here
        //constructor
        static function initDb() {
            require_once 'DB_Connect.php';
            //connecting to database
            $this->db = new DB_Connect();
            $this->db->connect();
        }
      public static function getCart(){
            $query ="SELECT * FROM carrito ORDER BY id_pelicula";
            $result = mysql_query($query) or die(mysql_error());

            $no_of_rows = mysql_num_rows($result);
            if($no_of_rows > 0) {
                while ($row = mysql_fetch_assoc($result)) {
                    $totalItems     = $totalItems + 1;
                    $movieTotalPrice    = $movieTotalPrice + $row['precio_pelicula'];
                }
                echo ("Artículos: <b id='cantArticles'>"+$totalItems+"</b><otal: $ <b id='totalPriceArticles'>"+$totalPrice+"</b></a>");
            } else {
                return false;
            }
        } 
```

或使用而不在课堂上声明它们

```
session_start();
$sessionID = $_COOKIE['PHPSESSID'];

        //put your code here
        function initDb() {
            require_once 'DB_Connect.php';
            //connecting to database
            $db = new DB_Connect();
            $db->connect();
        }
            function getCart(){
            $query ="SELECT * FROM carrito ORDER BY id_pelicula";
            $result = mysql_query($query) or die(mysql_error());

            $no_of_rows = mysql_num_rows($result);
            if($no_of_rows > 0) {
                while ($row = mysql_fetch_assoc($result)) {
                    $totalItems     = $totalItems + 1;
                    $movieTotalPrice    = $movieTotalPrice + $row['precio_pelicula'];
                }
                echo ("Artículos: <b id='cantArticles'>"+$totalItems+"</b><otal: $ <b id='totalPriceArticles'>"+$totalPrice+"</b></a>");
            } else {
                return false;
            }
        } 
```

# java - GXT 编辑器网格未显示任何行

> ID：10914785
> 
> 赞同：1
> 
> 时间：2012-06-06T13:04:46.700
> 
> 标签：java, gwt, gxt

我有带有编辑器网格的 GXT 布局容器。要在网格中显示的数据是通过 GWT-RPC 服务获取的，然后添加到网格的存储中。问题是网格从不显示任何内容，但我使用 IDE 的调试器检查了列表不为空（它包含一个元素）。

以下是一些片段：

DTO：

```
public class CompetitionWinnerDTO extends BaseModelData implements IsSerializable {

    public static enum Status implements IsSerializable {
        pending, approved, paid
    }

    public static class Property implements IsSerializable {
        public static final String COMPETITION_ID = "competitionId";
        public static final String COMPETITION_WINNER_ID = "competitionWinnerId";
        public static final String CONFIRM_DATE = "confirmDate";
        public static final String SITE_NAME = "siteName";
        public static final String PRIZE_NAME = "prizeName";
        public static final String PRIZE_VALUE = "prizeValue";
        public static final String PAID_DATE = "paidDate";
        public static final String WINNER_NAME = "winnerName";
        public static final String WINNER_QUOTE = "winnerQuote";
        public static final String WINNER_ADDRESS = "winnerAddress";
        public static final String WINNER_TOWN = "winnerTown";
    }

    private Status status;

    public CompetitionWinnerDTO() {
        setAllowNestedValues(false);
    }

    public int getCompetitionId() {
        return ((Integer) get(Property.COMPETITION_ID)).intValue();
    }

    public void setCompetitionId(int competitionId) {
        set(Property.COMPETITION_WINNER_ID, new Integer(competitionId));
    }

    public int getCompetitionWinnerId() {
        return ((Integer) get(Property.COMPETITION_WINNER_ID)).intValue();
    }

    public void setCompetitionWinnerId(int competitionWinnerId) {
        set(Property.COMPETITION_WINNER_ID, new Integer(competitionWinnerId));
    }

    public Date getConfirmDate() {
        return get(Property.CONFIRM_DATE);
    }

    public void setConfirmDate(Date confirmDate) {
        set(Property.CONFIRM_DATE, confirmDate);
    }

    public Date getPaidDate() {
        return get(Property.PAID_DATE);
    }

    public void setPaidDate(Date paidDate) {
        set(Property.PAID_DATE, paidDate);
    }

    public String getPrizeName() {
        return get(Property.PRIZE_NAME);
    }

    public void setPrizeName(String prizeName) {
        set(Property.PRIZE_NAME, prizeName);
    }

    public int getPriceValue() {
        return ((Integer) get(Property.PRIZE_VALUE)).intValue();
    }

    public void setPrizeValue(int prizeValue) {
        set(Property.PRIZE_VALUE, new Integer(prizeValue));
    }

    public String getSiteName() {
        return get(Property.SITE_NAME);
    }

    public void setSiteName(String siteName) {
        set(Property.SITE_NAME, siteName);
    }

    public Status getStatus() {
        return status;
    }

    public void setStatus(Status status) {
        this.status = status;
    }

    public String getWinnerName() {
        return get(Property.WINNER_NAME);
    }

    public void setWinnerName(String winnerName) {
        set(Property.WINNER_NAME, winnerName);
    }

    public String getWinnerAddress() {
        return get(Property.WINNER_ADDRESS);
    }

    public void setWinnerAddress(String winnerAddress) {
        set(Property.WINNER_ADDRESS, winnerAddress);
    }

    public String getWinnerTown() {
        return get(Property.WINNER_TOWN);
    }

    public void setWinnerTown(String winnerTown) {
        set(Property.WINNER_TOWN, winnerTown);
    }

    public String getWinnerQuote() {
        return get(Property.WINNER_QUOTE);
    }

    public void setWinnerQuote(String winnerQuote) {
        set(Property.WINNER_QUOTE, winnerQuote);
    }

} 
```

UI中网格的初始化：

```
private final List<ColumnConfig> quoteApprovalConfig = new ArrayList<ColumnConfig>();
ColumnConfig column = new ColumnConfig(CompetitionWinnerDTO.Property.CONFIRM_DATE, "Date Confirmed", 100);

column.setRenderer(TableRenderers.dateTimeRenderer);
quoteApprovalConfig.add(column);

column = new ColumnConfig(CompetitionWinnerDTO.Property.PRIZE_NAME, "Prize", 100);
quoteApprovalConfig.add(column);

column = new ColumnConfig(CompetitionWinnerDTO.Property.WINNER_NAME, "Winner", 100);
        quoteApprovalConfig.add(column);

column = new ColumnConfig(CompetitionWinnerDTO.Property.WINNER_QUOTE, "Quote", 300);
final TextArea text = new TextArea();
text.setAllowBlank(false);
text.setPreventScrollbars(true);
column.setEditor(new CellEditor(text));
quoteApprovalConfig.add(column);

column = new ColumnConfig(CompetitionWinnerDTO.Property.WINNER_QUOTE, "Prize", 75);
column.setRenderer(new TableRenderers.CurrencyRenderer(DEFAULT_CURRENCY_CODE));
quoteApprovalConfig.add(column);

private final ColumnModel quoteApprovalColumns = new ColumnModel(quoteApprovalConfig);
private final EditorGrid<CompetitionWinnerDTO> quoteApprovalGrid = new EditorGrid<CompetitionWinnerDTO>(quoteApprovalStore, quoteApprovalColumns);
quoteApprovalGrid.setWidth(LeadIntelConstants.SITE_WIDTH - 25 - 15);
quoteApprovalGrid.setAutoWidth(true);
quoteApprovalGrid.setAutoHeight(true);
quoteApprovalGrid.setAutoExpandColumn(CompetitionWinnerDTO.Property.WINNER_NAME);
quoteApprovalGrid.setBorders(true);
quoteApprovalGrid.setStripeRows(true); 
```

还有我调用 GWT-RPC 服务并用结果填充存储的代码：

```
private void refreshQuoteApproval() {
    competitionService.getCompetitionWinners(
            CompetitionWinnerDTO.Status.pending, new AsyncCallback<List<CompetitionWinnerDTO>>() {
        @Override
        protected void onSuccess(List<CompetitionWinnerDTO> result) {
            setQuoteApprovalWinners(result);
        }
    });
}

private void setQuoteApprovalWinners(List<CompetitionWinnerDTO> quoteApprovalWinners) {
    quoteApprovalStore.removeAll();
    if (quoteApprovalWinners != null) {
        quoteApprovalStore.add(quoteApprovalWinners);
    }
} 
```

正如我所说，我可以看到返回的列表不为空，执行`quoteApprovalStore.add(quoteApprovalWinners);`没有任何问题，并且列表包含一个元素。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:03:07.540

对了，我发现了问题，有两列ID相同：

这个：

```
column = new ColumnConfig(CompetitionWinnerDTO.Property.WINNER_QUOTE, "Quote", 300); 
```

还有这个：

```
column = new ColumnConfig(CompetitionWinnerDTO.Property.WINNER_QUOTE, "Prize", 75); 
```

只需将后者的 id 更改为唯一的就解决了这个问题。

PS：如果 GXT 能就此发出警告，那就太好了

# cocoa - 如何解决 --ImageKit 错误：读取像素错误：506？

> ID：10914787
> 
> 赞同：1
> 
> 时间：2012-06-06T13:05:15.733
> 
> 标签：cocoa, osx-lion, osx-snow-leopard, ikimagebrowserview

我的 Cocoa (OS X) 应用程序`IKImageBrowserView`在 (Snow Leopard)10.6 上显示图像，但`IKImageBrowserView`在 (Lion)10.7.4 上不显示任何图像 ( ) 并在控制台上抛出错误

> --ImageKit 错误：读取像素前出错：506

和

> --ImageKit 错误：读取像素后出错：506

`IKImageBrowserView`10.7.4 (Lion)是否需要任何更改。请帮我解决这个问题。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:11:47.203

现在我正在显示图像 - “未显示”图像背后的原因是路径不正确，但我在控制台中遇到了同样的错误......

# sql - 根据表中的指标（a/b）列查找列值总和的差异

> ID：10914791
> 
> 赞同：1
> 
> 时间：2012-06-06T13:05:26.310
> 
> 标签：sql, oracle11g

```
select ca.cust_ac_no, ca.ccy, ah.trn_dt,
(SELECT  sum(COALESCE(hi.lcy_amount,0))                                    
     FROM actb_history hi 
     WHERE hi.ac_no='0013001600038'  and hi.drcr_ind = 'C' and ah.trn_dt = hi.trn_dt
     GROUP BY hi.ac_no,hi.drcr_ind) as Total_Credits,
(SELECT  sum(COALESCE(hi.lcy_amount,0))                                    
     FROM actb_history hi 
     WHERE hi.ac_no='0013001600038'  and hi.drcr_ind = 'D'and ah.trn_dt = hi.trn_dt
     GROUP BY hi.ac_no,hi.drcr_ind) as Total_Debits,

((SELECT  sum( COALESCE(hi.lcy_amount,0))                                    
     FROM actb_history hi 
     WHERE hi.ac_no='0013001600038'  and hi.drcr_ind = 'C' and ah.trn_dt = hi.trn_dt
     GROUP BY hi.ac_no,hi.drcr_ind)
     -
(SELECT  sum(COALESCE(hi.lcy_amount,0))                                    
     FROM actb_history hi 
     WHERE hi.ac_no='0013001600038'  and hi.drcr_ind = 'D'and ah.trn_dt = hi.trn_dt
     GROUP BY hi.drcr_ind,hi.drcr_ind )) as difference

from actb_history ah, sttm_cust_account ca
where ah.ac_no='0013001600038'
and ah.ac_no = ca.cust_ac_no
group by ca.cust_ac_no,  ca.ccy, ah.trn_dt 
```

上面的代码仅在 total_credits 和 total_debits 有对应值的情况下计算差异

公式是贷方-借方=差额。问题是一些交易只有一个，而另一个是空的。所以添加空值后结果为空。

我的愿望是它应该为任何空值显示零并能够执行减法。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:18:58.677

在我看来，一个更简单的查询可以满足要求：

```
select ca.cust_ac_no, ca.ccy, ah.trn_dt,
      SUM(CASE WHEN ah.drcr_ind='C' THEN ah.lcy_amount ELSE 0 END) as Total_Credits,
      SUM(CASE WHEN ah.drcr_ind='D' THEN ah.lcy_amount ELSE 0 END) as Total_Debts,
      SUM(CASE WHEN ah.drcr_ind='C' THEN ah.lcy_amount ELSE 0 END)-
      SUM(CASE WHEN ah.drcr_ind='D' THEN ah.lcy_amount ELSE 0 END) as Different
from
   actb_history ah
      inner join
   sttm_cust_account ca
      on
         ah.ac_no = ca.cust_ac_no
where ah.ac_no='0013001600038'
group by ca.cust_ac_no,  ca.ccy, ah.trn_dt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:11:21.623

为了对代码进行最少的更改，您需要将语句移到有`COALESCE()`语句的位置。

将它们移到子查询之外，而不是在子查询内。

```
select ca.cust_ac_no, ca.ccy, ah.trn_dt,
(SELECT  sum(COALESCE(hi.lcy_amount,0))                                    
     FROM actb_history hi 
     WHERE hi.ac_no='0013001600038'  and hi.drcr_ind = 'C' and ah.trn_dt = hi.trn_dt
     GROUP BY hi.ac_no,hi.drcr_ind) as Total_Credits,
(SELECT  sum(COALESCE(hi.lcy_amount,0))                                    
     FROM actb_history hi 
     WHERE hi.ac_no='0013001600038'  and hi.drcr_ind = 'D'and ah.trn_dt = hi.trn_dt
     GROUP BY hi.ac_no,hi.drcr_ind) as Total_Debits,

COALESCE((SELECT  sum(hi.lcy_amount)                                    
     FROM actb_history hi 
     WHERE hi.ac_no='0013001600038'  and hi.drcr_ind = 'C' and ah.trn_dt = hi.trn_dt
     GROUP BY hi.ac_no,hi.drcr_ind), 0)
     -
COALESCE((SELECT  sum(hi.lcy_amount)                                    
     FROM actb_history hi 
     WHERE hi.ac_no='0013001600038'  and hi.drcr_ind = 'D'and ah.trn_dt = hi.trn_dt
     GROUP BY hi.drcr_ind,hi.drcr_ind ), 0) as difference

from actb_history ah, sttm_cust_account ca
where ah.ac_no='0013001600038'
and ah.ac_no = ca.cust_ac_no
group by ca.cust_ac_no,  ca.ccy, ah.trn_dt 
```

这是因为`SUM()`相关子查询可能没有记录被编辑。在这种情况下，你没有`SUM(0)`，你什么都没有（`NULL`）。`COALESCE()`因此，将子查询放在外部`no records processed`会将`0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:10:42.747

尝试制作`COALESCE`.`SUM`

# jquery - 根据内容溢出展开 div 或 UL

> ID：10914796
> 
> 赞同：2
> 
> 时间：2012-06-06T13:05:44.727
> 
> 标签：jquery, html, css, xhtml

当其中有很多内容时，如何使 div 扩展？

**HTML：**

```
<div class ="content">
    this is a test <br />
    this is a test <br />
    this is a test <br />
    this is a test <br />
    this is a test <br />
    this is a test <br />
    this is a test <br />
</div><br />
<div class="click-here">Click here to see more</div> 
```

**CSS：**

```
div.content
{
    height:100px;
    width:300px;
    border:1px solid red;
    overflow:hidden;
}

div.click-here
{
    border:1px solid green;
    width:200px;
} 
```

这是我的例子：http: [//jsfiddle.net/nvCvy/1/](http://jsfiddle.net/nvCvy/1/)

jQuery 还是 CSS？

jquery 滚动会是更好的解决方案吗？还是您会使用 CSS 显示所有内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:13:01.870

您需要进行以下两项更改。

1.  不要提及高度，即删除`height`属性。

2.  消除`Overflow:hidden;`

下面是工作[演示](http://jsfiddle.net/umeshpatil86/SqMBQ/)。您可以根据需要添加尽可能多的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:11:30.560

假设您希望用户单击按钮，请使用 jquery：

[http://jsfiddle.net/nvCvy/2/](http://jsfiddle.net/nvCvy/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T13:12:08.293

如果扩展只是高度并且单击按钮，您可以执行以下操作：

```
​$('.click-here').click(function() { 
    $('.content').css('height', 'auto');
});​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/nvCvy/3/](http://jsfiddle.net/nvCvy/3/)

# certificate - 如何确保远程证书（公钥）由我的根 ca 颁发/签名？

> ID：10914798
> 
> 赞同：0
> 
> 时间：2012-06-06T13:05:46.477
> 
> 标签：certificate, x509certificate, ca

在服务器端，我有自签名 CA（证书和私钥）。我使用它们来颁发我的设备证书，并且我想确保如果远程证书未由 CA 签名，则会出现异常。

我指的是下面的链接，但似乎它们对我不起作用，请帮助：

[C# 如何验证 Root-CA-Cert 证书 (x509) 链？](https://stackoverflow.com/questions/7331666/c-sharp-how-can-i-validate-a-root-ca-cert-certificate-x509-chain)

[使用 CA 证书文件验证远程服务器 X509Certificate](https://stackoverflow.com/questions/7695438/sslstream-verify-remote-x509certificate-using-ca-certificate-file)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:32:04.123

当您收到设备证书时，您将使用 CA 证书验证其签名。这就是您所需要的（但您需要记住，当 CA 证书过期并重新颁发时，您必须同时替换设备证书或使用多个 CA 验证设备证书，以确保您允许由以前的 CA 签署的设备证书证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:16:29.103

我正在关注下面的链接，使用 BouncyCastle 来执行此操作，它工作正常。

[C# 如何验证 Root-CA-Cert 证书 (x509) 链？](https://stackoverflow.com/questions/7331666/c-sharp-how-can-i-validate-a-root-ca-cert-certificate-x509-chain)

> Org.BouncyCastle.X509.X509Certificate caCert =
>        new X509CertificateParser().ReadCertificate(CaCertBytes[]); Org.BouncyCastle.X509.X509Certificate remoteCert =
>        new X509CertificateParser().ReadCertificate(remoteCertBytes[]);
> 尝试
> {
>        remoteCert.Verify(caCert.GetPublicKey());
>        结果=真；
> }
> 捕捉（异常前）
> {
>        结果 = 假；
> }

如果 remoteCert 没有被 caCert 签名，就会出现异常。

# c# - 接口和类有什么区别，当我可以直接在类中实现方法时，为什么要使用接口？

> ID：10914802
> 
> 赞同：121
> 
> 时间：2012-06-06T13:05:49.023
> 
> 标签：c#, class, oop, interface, abstraction

我知道这是一个非常基本的问题，但是面试官以一种非常狡猾的方式问我，我很无助:(

我只知道接口的材料或理论定义，并且还在我从事的许多项目中实现了它。但我真的不明白这为什么以及如何有用。

我也不明白界面中的一件事。即例如，我们使用

`conn.Dispose();`在 finally 块中。但我没有看到该类正在实现或继承我的意思的`IDisposable`接口（`SqlConnection`）类。我想知道如何才能调用方法名称。同样在同一件事上，我不了解 Dispose 方法的工作原理，因为我们需要为所有接口方法使用我们自己的实现来实现函数体。那么接口是如何被接受或命名为合约的呢？直到现在，这些问题一直在我脑海中盘旋，坦率地说，我从来没有看到任何好的线程可以以我能理解的方式解释我的问题。

像往常一样，MSDN 看起来很吓人，那里没有一条清晰的线（*伙计们，请原谅那些进入高级开发的人，我强烈认为任何代码或文章都应该到达任何看到它的人的脑海，因此就像许多其他人所说的那样，MSDN没用*）。

面试官说：

他有 5 种方法，他很乐意直接在类中实现它，但如果你必须选择抽象类或接口，你选择哪一种，为什么？我确实回答了我在各种博客中读到的所有东西，说抽象类和接口的优点和缺点，但他不相信，他试图总体上理解“为什么是接口”。“为什么要抽象类”一般来说，即使我只能实现一次相同的方法并且不会改变它。

我在网上看不到任何地方，我可以得到一篇文章，可以清楚地向我解释接口及其功能。我是众多程序员中的一员，他们仍然不了解接口（我知道我使用的理论和方法），但对我清楚地理解它并不满意。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-06T13:30:58.200

当您想创建类似的东西时，接口非常好：

```
using System;

namespace MyInterfaceExample
{
    public interface IMyLogInterface
    {
        //I want to have a specific method that I'll use in MyLogClass
        void WriteLog();       
    }

    public class MyClass : IMyLogInterface
    {

        public void WriteLog()
        {
            Console.Write("MyClass was Logged");
        }
    }

    public class MyOtherClass : IMyLogInterface
    {

        public void WriteLog()
        {
            Console.Write("MyOtherClass was Logged");
            Console.Write("And I Logged it different, than MyClass");
        }
    }

    public class MyLogClass
    {
        //I created a WriteLog method where I can pass as a parameter any object that implements IMyLogInterface.
        public static void WriteLog(IMyLogInterface myLogObject)
        {
            myLogObject.WriteLog(); //So I can use WriteLog here.
        }
    }

    public class MyMainClass
    {
        public void DoSomething()
        {
            MyClass aClass = new MyClass();
            MyOtherClass otherClass = new MyOtherClass();

            MyLogClass.WriteLog(aClass);//MyClass can log, and have his own implementation
            MyLogClass.WriteLog(otherClass); //As MyOtherClass also have his own implementation on how to log.
        }
    }
} 
```

`MyLogClass`在我的示例中，我可能是一个编写`IMyLogInterface`. 就像他们问我他们需要实现什么才能`WriteLog()`在`MyLogClass`. 他们将在界面中找到答案。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2016-03-08T12:45:07.333

我使用接口的一个原因是因为它增加了代码的灵活性。假设我们有一个方法，该方法将类类型的对象作为参数，例如：

```
public void DoSomething(Account account) {
  // Do awesome stuff here.
} 
```

这样做的问题在于，方法参数是针对帐户的实现而固定的。如果您永远不需要任何其他类型的帐户，这很好。以这个例子为例，它使用帐户接口作为参数。

```
public void DoSomething(IAccount account) {
  // Do awesome stuff here.
} 
```

此解决方案不固定于实现，这意味着我可以将 SuperSavingsAccount 或 ExclusiveAccount （都实现 IAccount 接口）传递给它，并为每个实现的帐户获取不同的行为。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-06-06T13:14:24.423

**接口**是实现者必须遵守的契约。**抽象类**允许契约和共享实现——这是接口所不能拥有的。类可以实现和继承多个接口。类只能扩展一个抽象类。

### 为什么接口

*   您没有默认或共享代码实现
*   您想要共享数据合同（Web 服务、SOA）
*   您对每个接口实现者都有不同的实现（*`IDbCommand`有`SqlCommand`并且`OracleCommand`以特定方式实现接口*）
*   你想[支持多重继承](http://codeofdoom.com/wordpress/2009/02/12/learn-this-when-to-use-an-abstract-class-and-an-interface/)。

### 为什么要抽象

*   您有默认或共享代码实现
*   您想尽量减少代码重复
*   您想[轻松支持版本控制](http://blogs.msdn.com/b/brada/archive/2004/04/10/111042.aspx)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2017-08-25T12:18:08.320

[![在此处输入图像描述](../Images/6f4f8147e211cc815c60f4bd3bccba38.png)](https://i.stack.imgur.com/aeIgA.png)

所以在这个例子中，PowerSocket 对其他对象一无所知。这些对象都依赖于 PowerSocket 提供的 Power，因此它们实现了 IPowerPlug，这样它们就可以连接到它。

接口很有用，因为它们提供了对象可以用来协同工作的契约，而无需了解彼此的任何其他信息。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2013-11-27T23:09:08.487

一言以蔽之——因为**多态**！

如果您“编程到接口，而不是实现”，则可以将共享相同接口（类型）的不同对象作为参数注入方法中。这样，您的方法代码不会与另一个类的任何实现耦合，这意味着它始终可以使用相同接口的新创建对象。（开/关原则）

*   研究Dependency Injection 并明确阅读GOF*的 Design Patterns - Elements of Reusable Object-Oriented Software*。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-11-11T12:51:34.983

我相信在提出这个问题时已经流了很多血，并且许多人试图通过解释普通人无法理解的类似机器人的术语来解决这个问题。

所以首先。要了解为什么接口和为什么抽象，您需要了解它们的用途。我在申请工厂类时亲自学习了这两个。[你在这个链接上](http://www.codeproject.com/Tips/469453/Illustrating-Factory-pattern-with-a-very-basic-exa)找到了一个很好的教程

现在让我们根据我已经提供的链接进行挖掘。

您的**Vehicle**类可能会根据用户要求而更改（例如添加*Truck*、*Tank*、*Airplane*等。鉴于我们有

```
public class clsBike:IChoice
{
   #region IChoice Members
    public string Buy()
    {
       return ("You choose Bike");
    }
    #endregion
} 
```

和

```
public class clsCar:IChoice
{
   #region IChoice Members
    public string Buy()
    {
       return ("You choose Car");
    }
    #endregion
} 
```

并且两者都有合同 Ichoice，简单地说 My Class 应该有 Buy 方法

```
public interface IChoice
{
    string Buy();
} 
```

现在，您会看到，该接口仅强制执行该方法`Buy()`，但让继承的类决定在实现它时要做什么。这是接口的局限性，使用纯接口，你可能最终会重复一些我们可以使用抽象自动实现的任务。在我们的示例中，假设购买每辆车都有折扣。

```
public abstract class Choice
{
    public abstract string Discount { get; }
    public abstract string Type { get; }
    public string Buy()
    {
       return "You buy" + Type + " with " + Discount;
}
public class clsBike: Choice
{
    public abstract string Discount { get { return "10% Discount Off"; } }
    public abstract string Type { get { return "Bike"; } }
}

public class clsCar:Choice
{
    public abstract string Discount { get { return " $15K Less"; } }
    public abstract string Type { get { return "Car"; } }
} 
```

现在使用工厂类，你可以实现同样的事情，但在使用抽象时，你让基类执行`Buy()`方法。

> 总结：**接口**契约让继承类做实现，而**抽象类**契约可以初始化实现（可以被继承类覆盖）

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-06T13:12:17.907

C# 没有鸭子类型——仅仅因为您知道某个方法是在一组具体类中实现的，并不意味着您可以在调用该方法时对它们一视同仁。实现接口允许您将实现它的所有类视为相同类型的事物，关于该接口定义的内容。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-01-17T13:34:43.980

这是一个简单的例子：

两者都`Array`实现`List`了接口`IList`。下面我们有 a`string[]`和 a`List<string>`并使用**IList**只用一种方法操作它们：

```
string[] myArray = { "zero", "one", "two", "three", "four"};
List<string> myList = new List<string>{ "zero", "one", "two", "three"};

//a methode that manipulates both of our collections with IList
static void CheckForDigit(IList collection, string digit)
{
    Console.Write(collection.Contains(digit));  //checks if the collection has a specific digit
    Console.Write("----");
    Console.WriteLine(collection.ToString()); //writes the type of collection
}

static void Main()
{
    CheckForDigit(myArray, "one");   //True----System.String[]
    CheckForDigit(myList, "one");   //True----System.Collections.Generic.List`1[System.String]

//Another test:

    CheckForDigit(myArray, "four");   //True----System.String[]
    CheckForDigit(myList, "four");   //false----System.Collections.Generic.List`1[System.String]
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-06T13:15:20.457

使用界面，您可以执行以下操作：

1) 创建分离的接口，提供不同的实现方案，从而实现更具凝聚力的接口。

2）允许接口之间有多个同名的方法，因为嘿，你没有冲突的实现，只是一个签名。

3）您可以独立于您的实现对接口进行版本化和配置，以确保满足合同。

4）你的代码可以依赖抽象而不是具体化，允许智能依赖注入，包括注入测试模拟等。

我敢肯定还有很多原因，这些只是其中的一小部分。

抽象类允许您有一个部分具体的基础来工作，这与接口不同，但有其自身的品质，例如使用模板方法模式创建部分实现的能力。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-09-30T19:16:46.850

**接口是对现实（对象）的抽象（类）进行抽象（原型）。**

接口用于指定合同条款，而不提供类提供的实现。

接口是规格：

*   *接口是设计时工件，用于指定概念的固定行为，因为它是单独的和静态的。*

*   *类是实现时的工件，用于在现实交互和移动时指定现实的移动结构。*

**什么是接口？**

当你观察一只猫时，你可以说它是一种有四个爪子、一个头、一个躯干、一个尾巴和头发的动物。你可以看到他会走路、跑步、吃饭和喵喵叫。等等。

您刚刚定义了一个接口及其属性和操作。因此，您没有定义任何作案手法，而只是定义了特性和能力，却不知道事情是如何运作的：您已经定义了能力和区别。

因此它还不是一个真正的类，尽管在 UML 中我们在类图中将其称为类，因为我们可以定义私有和受保护的成员以开始深入了解工件。不要在这里混淆，因为在 UML 中，接口与 C# 中的接口略有不同：它就像抽象原子的部分访问点。因此，我们说一个类可以实现多个接口。因此它是同一件事，但不是，因为 C# 中的接口都用于抽象抽象并将此抽象限制为访问点。这是两种不同的用途。因此，UML 中的类表示与编程类的完全耦合接口，而 UML 接口表示编程类的一部分的解耦接口。的确，UML 中的类图不负责实现，它的所有工件都在编程接口级别。当我们将 UML 类映射到编程类时，它是将抽象抽象转换为具体抽象。有一个微妙之处可以解释设计领域和编程领域之间的二分法。所以UML中的一个类从编程接口的角度来看是一个编程类，同时考虑到内部隐藏的东西。

接口还允许在不可用时以尴尬的方式模拟多重继承。例如，猫类将实现从动物接口派生的猫接口。这个猫类也将实现这些接口：走、跑、吃和发出声音。这弥补了类级别缺少多重继承的情况，但是每次您需要重新实现所有内容时，您最多不能像现实本身那样考虑现实。

要理解这一点，我们可以参考 Pascal 对象编码，您可以在其中以一个单元定义接口和实现部分。在接口中定义类型，在实现中实现类型：

```
unit UnitName;

interface

type
  TheClass = class
  public
    procedure TheMethod;
  end;

implementation

class procedure TheClass.TheMethod;
begin
end; 
```

在这里，接口部分与 UML 类设计相匹配，而接口类型因此是其他东西。

因此，在我们的业务中，我们使用一个词*interface*来指定两个不同但相似的事物，这会造成混淆。

同样在 C# 中，编程接口允许补偿开放类型上没有真正的泛型多态性，而不会真正实现目标，因为您失去了强类型的能力。

毕竟，接口对于允许不兼容的系统进行通信是必要的，而不必担心内存中对象的实现和管理，就像（分布式）公共对象模型引入的那样。

**什么是班级？**

从外部角度定义现实的简化后，您可以从内部角度对其进行描述：这是您定义数据处理和消息管理的类，以允许您封装的现实栩栩如生并进行交互谢谢使用实例的对象。

因此，在 UML 中，您实现了对机械轮子的分形沉浸，并描述了状态、交互等，以便能够实现您想要处理的现实片段的抽象。

因此，从编译器的角度来看，抽象类在某种程度上等同于接口。

**更多信息**

[协议（面向对象编程）](https://en.wikipedia.org/wiki/Protocol_(object-oriented_programming))

[C# - 接口](https://www.tutorialspoint.com/csharp/csharp_interfaces.htm)

[C# - 类](https://www.tutorialspoint.com/csharp/csharp_classes.htm)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-06T13:28:03.067

抽象类和接口都是契约。

合同的想法是您指定一些行为。如果您说您已实施，则表示您已同意合同。

抽象而不是接口的选择是。

抽象类的任何非抽象后代都将实现契约。

相对

任何实现接口的类都将实现契约。

因此，当您想指定所有后代必须实现的某些行为时，您可以使用抽象，而不必自己定义一个单独的接口，但是现在满足这个有效聚合契约的所有东西都必须是后代。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-06-06T13:14:20.863

您只能从一个抽象类继承。您可以从多个接口继承。这决定了我在大多数情况下使用什么。

抽象类的优点是您可以拥有一个基本实现。但是，在 IDisposable 的情况下，默认实现是无用的，因为基类不知道如何正确清理内容。因此，接口会更合适。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-11-02T12:52:25.597

## 让我告诉你关于飞行烤面包机的事。

[![飞行烤面包机](../Images/b2d1ba53393b2cc11cd610af7600d838.png)](https://i.stack.imgur.com/x0g0K.gif)

当然，在许多情况下，您可以构建一个工作软件系统，而无需声明或实现任何接口：任何面向对象的软件设计都可以只使用类来实现。

再说一次，任何软件系统也可以用汇编语言实现，或者更好的是用机器代码实现。我们使用抽象机制的原因是因为它们倾向于使事情变得更容易。接口就是这样一种抽象机制。

所以，碰巧有一些非常重要的面向对象设计，如果你使用接口，这些设计会更容易实现，在这些情况下，接口实际上是必要的。

这些非平凡的设计与多重继承有关，在其“真实”形式中，当一个类不仅从一个基类继承，而是从两个或多个基类继承时。这种真正的形式在 C# 中是不可能的，但是在 C# 和 Java 这样的语言出现之前，主导的语言是 C++，它完全支持真正的多继承。不幸的是，真正的多重继承被证明不是一个好主意，因为它极大地复杂了语言的设计，并且还引发了各种问题，例如著名的“钻石问题”。（请参阅[“多重继承的确切问题是什么？”J Francis 的回答](https://stackoverflow.com/a/225991/773113)）

因此，如果有人想构建一个“飞行烤面包机”类，他们将继承一些现有的“烤面包机”类以及一些现有的“飞行”类。他们可能遇到的问题是，烤面包机类的电源很可能是墙上的插座，而飞行器类的电源很可能是鸽子粮，而由此产生的新类要么不知何故两者都有，或者不清楚它会拥有哪一个。（钻石问题。）

C# 和 Java 等语言的创建者决定不允许真正的多重继承，以保持语言简单并避免像钻石问题这样的陷阱。然而，某种形式的多重继承仍然是必要的，（或者至少非常需要），因此在这些语言中，它们引入了接口作为支持较少形式的多重继承的一种手段，同时避免了真正多重继承的问题和复杂性。

在这种较小形式的多重继承中，不允许有一个类继承自多个基类，但您至少可以继承一个或多个接口。所以，如果你想构建一个飞行烤面包机，你不能同时从一些现有的烤面包机类和一些现有的飞行类继承，但你可以做的是从现有的烤面包机类继承，然后还公开一个你自己实现的飞行接口，可能使用您已经从烤面包机继承的任何方法。

因此，除非您觉得需要创建一个聚合两个不同且不相关的功能集的类，否则您将不需要任何形式的多重继承，因此您不需要声明或实现任何接口。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-06-06T13:10:40.667

接口允许类设计器为最终用户提供非常清晰的可用方法。它们也是多态性的组成部分。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-06-06T13:14:13.077

我不会针对抽象类发布接口的定义，因为我认为您非常了解该理论，并且我假设您了解 SOLID 原则，所以让我们开始实践吧。

如您所知，接口不能有任何代码，因此缺点很容易理解。

如果您需要初始化提供构造函数的类的属性，或者您想提供部分实现，那么抽象类将非常适合不允许您这样做的接口。

因此，一般来说，当您需要向客户端提供构造函数或任何代码来继承/扩展您的类时，您应该更喜欢抽象类而不是接口

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2013-11-27T14:06:16.347

抽象类是为相关实体创建的，而接口可用于不相关的实体。

例如，如果我有两个实体说动物和人类，那么我将选择接口，好像我必须详细说老虎，狮子并想与动物相关，然后将选择动物抽象类..

如下所示

```
 Interface             
   ____|____
  |        |
Animal   Human

  Animal (Abstract class)
   __|___
  |      |
Tiger   Lion 
```

# forms - 从网格加载数据到表单

> ID：10914803
> 
> 赞同：0
> 
> 时间：2012-06-06T13:05:57.090
> 
> 标签：forms, extjs, load, row

当用户单击一行时，我想将数据加载到表单中。我找到了一些示例，但不确定如何在我的脚本中使用它。我在建筑师中制作了一个表格，它看起来像这样

```
items: [
            {
                xtype: 'tabpanel',
                id: 'mainTab',
                activeTab: 0,
                region: 'center',
                items: [
                    {
                        xtype: 'panel',
                        id: 'configurationTab',
                        title: 'Configuration',
                        dockedItems: [
                            {
                                xtype: 'tabpanel',
                                height: 479,
                                id: 'configurationVehicles',
                                suspendLayout: true,
                                title: 'configuration',
                                activeTab: 0,
                                dock: 'top',
                                items: [
                                    {
                                        xtype: 'panel',
                                        id: 'configurationDrivers',
                                        layout: {
                                            type: 'border'
                                        },
                                        collapsed: false,
                                        title: 'Drivers',
                                        items: [
                                            {
                                                xtype: 'form',
                                                floating: false,
                                                height: 420,
                                                id: 'configurationDriversConfiguration',
                                                itemId: 'configurationDriversConfiguration',
                                                bodyPadding: 10,
                                                animCollapse: false,
                                                collapsed: false,
                                                collapsible: true,
                                                title: 'Driver Configuration',
                                                floatable: false,
                                                region: 'north',
                                                items: [
                                                    {
                                                        xtype: 'textfield',
                                                        id: 'configurationDriversCode',
                                                        name: 'configurationDriversCode',
                                                        fieldLabel: 'Driver Code',
                                                        allowBlank: false
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        id: 'configurationDriversName',
                                                        fieldLabel: 'Driver Name',
                                                        allowBlank: false
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        id: 'configurationDriversLicense',
                                                        fieldLabel: 'Driver License nr',
                                                        allowBlank: false
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        id: 'FirstName',
                                                        name: 'FirstName',
                                                        fieldLabel: 'Driver Given Name',
                                                        allowBlank: false
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        id: 'configurationDriversFamilyName',
                                                        fieldLabel: 'Driver Familiy Name',
                                                        allowBlank: false
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        id: 'configurationDriversPhone',
                                                        fieldLabel: 'Driver Phone Nr',
                                                        allowBlank: false
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        id: 'configurationDriversEmail',
                                                        fieldLabel: 'Driver Email',
                                                        allowBlank: false
                                                    },
                                                    {
                                                        xtype: 'combobox',
                                                        id: 'configurationDriversProvider',
                                                        fieldLabel: 'Provider',
                                                        allowBlank: false,
                                                        displayField: 'name',
                                                        store: 'comboProviders',
                                                        valueField: 'id'
                                                    },
                                                    {
                                                        xtype: 'textareafield',
                                                        id: 'configurationDriversMemo',
                                                        fieldLabel: 'Memo',
                                                        allowBlank: false
                                                    },
                                                    {
                                                        xtype: 'button',
                                                        handler: function(button, event) {
                                                            var form = this.up('form');
                                                            var formfields = form.getForm().getValues();
                                                            //this.up('form').getForm().submit();
                                                            console.log(formfields);
                                                            Ext.MessageBox.alert('Submitted Values', formfields);
                                                            form.getForm().reset();
                                                        },
                                                        id: 'configurationDriversSave',
                                                        text: 'Save',
                                                        formBind: true
                                                    },
                                                    {
                                                        xtype: 'button',
                                                        handler: function(button, event) {
                                                            var form = this.up('form');
                                                            form.getForm().reset();
                                                        },
                                                        style: 'margin-left: 10px;',
                                                        text: 'Clear'
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'gridpanel',
                                                id: 'configurationDriversGrid',
                                                itemId: 'configurationDriversGrid',
                                                animCollapse: false,
                                                collapsible: true,
                                                title: 'Drivers',
                                                store: 'gridDrivers',
                                                region: 'center',
                                                viewConfig: {

                                                },
                                                columns: [
                                                    {
                                                        xtype: 'gridcolumn',
                                                        dataIndex: 'id',
                                                        text: 'Id'
                                                    },
                                                    {
                                                        xtype: 'gridcolumn',
                                                        dataIndex: 'version',
                                                        text: 'Version'
                                                    },
                                                    {
                                                        xtype: 'gridcolumn',
                                                        dataIndex: 'driverId',
                                                        text: 'DriverId'
                                                    },
                                                    {
                                                        xtype: 'gridcolumn',
                                                        id: 'FirstName',
                                                        dataIndex: 'firstName',
                                                        text: 'FirstName'
                                                    },
                                                    {
                                                        xtype: 'gridcolumn',
                                                        dataIndex: 'middleName',
                                                        text: 'MiddleName'
                                                    },
                                                    {
                                                        xtype: 'gridcolumn',
                                                        dataIndex: 'lastName',
                                                        text: 'LastName'
                                                    },
                                                    {
                                                        xtype: 'gridcolumn',
                                                        dataIndex: 'email',
                                                        text: 'Email'
                                                    },
                                                    {
                                                        xtype: 'gridcolumn',
                                                        dataIndex: 'workPhone',
                                                        text: 'WorkPhone'
                                                    },
                                                    {
                                                        xtype: 'gridcolumn',
                                                        dataIndex: 'note',
                                                        text: 'Note'
                                                    },
                                                    {
                                                        xtype: 'gridcolumn',
                                                        dataIndex: 'licenseNumber',
                                                        text: 'LicenseNumber'
                                                    },
                                                    {
                                                        xtype: 'gridcolumn',
                                                        dataIndex: 'providerId',
                                                        text: 'ProviderId'
                                                    },
                                                    {
                                                        xtype: 'actioncolumn',
                                                        id: 'idAction',
                                                        dataIndex: 'id',
                                                        items: [
                                                            {
                                                                handler: function(view, rowIndex, colIndex, item, e) {

                                                                    console.log('Delete');
                                                                },
                                                                icon: 'img/delete.png'
                                                            }
                                                        ]
                                                    }
                                                ], 
```

我找到了一个这样的例子

```
 onRowselectionmodelSelect: function(rowmodel, record, index, options) {
    console.log(record.get('id'));
    formpanel.getForm().load({
        url: 'xml-form-data.xml',
        waitMsg: 'Loading...'
    });
} 
```

formpanel.getForm().load({ 应该指向表单部分。在示例中，他们使用了 var formpanel = ... 但是如何在此设置中将其加载到我的表单中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:10:01.880

我想它是 ExtJs 4。然后你可以使用函数将记录加载到表单中`loadRecord`：

```
var form = formpanel.getForm();
form.loadRecord(record); 
```

完成编辑并点击保存按钮后，使用`updateRecord`方法将数据从表单填充回加载的记录，请参阅：[Ext.form.Basic - updateRecord](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-updateRecord)。

```
form.updateRecord(); 
```

然后根据您配置商店和模型的方式`store.sync()`或`record.save()`根据您配置商店和模型的方式保存它。

# iphone - 想要在 iPad 中显示黑色键盘

> ID：10914812
> 
> 赞同：1
> 
> 时间：2012-06-06T13:06:22.420
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我刚买了新的 iPad，发现了一个漂亮的键盘，它在询问密码时会弹出。

我想在我目前正在开发的 iPad 应用程序中使用相同的黑色键盘。

any1 可以帮我弄清楚如何以编程方式实现这一点，我知道苹果只提供 2 种类型的键盘外观。但是，伙计们仍然可以试一试并尝试一下..怎么说..所以任何帮助将不胜感激。

提前致谢 ！！

注意：PS 我不是在谈论任何越狱或任何类似的东西。我想通过使用我的 Mac 在 Xcode 中编码来实现这一点。![在此处输入图像描述](../Images/196ad93243668c3b568a3aa443052c68.png)

![在此处输入图像描述](../Images/5141864953d6d310ba7853dcd04527d9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:12:24.050

我在 iPhone 上用过这个，但你可以在 iPad 上试试这个。尝试将`keyboardAppearance`文本字段的属性设置为`UIKeyboardAppearanceAlert`. 这给出了黑色背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:35:40.390

没有用于此的内置 API。您必须构建一个自定义键盘才能获得准确的外观。正如其他人所建议的那样，`UIKeyboardAppearanceAlert`接近。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:12:44.550

使用 UIKeyboardAppearanceAlert。

# emacs - 通用右对齐功能

> ID：10914813
> 
> 赞同：3
> 
> 时间：2012-06-06T13:06:22.650
> 
> 标签：emacs, text-alignment

既然我知道如何在 Emacs 中[右对齐数值列，](https://stackoverflow.com/a/10899399/357313)那么这个解决方案有两个问题：

*   很难记住
*   它不灵活

例如，当第一列中的某些值包含数字时，它不起作用。

不幸的是，它插入了标签。

现在我经常使用矩形函数 ( `C-x``r``k`)。这让我想到：是否有可能拥有一个右对齐所选矩形中所有文本的功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T14:24:12.083

```
(defun right-justify-rectangle (start end)
  (interactive "r")
  (apply-on-rectangle (lambda (c0 c1)
                        (move-to-column c1 t)
                        (let ((start (- (point) (- c1 c0)))
                              (end (point)))
                          (when (re-search-backward "\\S-" start t)
                            (transpose-regions start (match-end 0)
                                               (match-end 0) end))))
                      start end)) 
```

为避免`Tab`，自定义变量`indent-tabs-mode`。

### 编辑：

这是一个处理`indent-tabs-mode`更合理的版本：

```
(defun right-justify-rectangle (start end)
  (interactive "r")
  (let ((indent-tabs-mode nil))
    (apply-on-rectangle (lambda (c0 c1)
                          (move-to-column c1 t)
                          (let ((start (- (point) (- c1 c0)))
                                (end (point)))
                            (when (re-search-backward "\\S-" start t)
                              (transpose-regions start (match-end 0)
                                                 (match-end 0) end))))
                        start end))
  (when indent-tabs-mode (tabify start end))) 
```

# bash - 如果这些 Perl 命令在粘贴到 shell 时被解释为 Bash 命令，是否有害？

> ID：10914814
> 
> 赞同：3
> 
> 时间：2012-06-06T13:06:25.880
> 
> 标签：bash, shell, perl

我改变了主意，并试图在 ubuntu 服务器上配置 munin 插件。我将 Perl 代码作为 bash 粘贴到终端中 - 每行代码都作为命令运行。

perl 语法是否足够不同，不会对服务器造成任何损坏或意外更改？

这是代码（顺便说一句，它确实在我的主目录中创建了两个文件夹，这就是我担心的原因）：

我想知道我是否无意中搞砸了一些东西：S

```
#!/usr/bin/perl
#
# Plugin to monitor the number of accesses to Apache servers. It handles
# a list of ports passed in from a plugin configuration file.
#
# Requirements:
#   - Needs access to http://localhost/server-status?auto (or modify the
#     address for another host). See your apache documentation on how to
#     set up this url in your httpd.conf. Apache needs ExtendedStatus
#     enabled for this plugin to work
#
# Tip: To see if it's already set up correctly, just run this plugin
# with the parameter "autoconf". If you get a "yes", everything should
# work like a charm already.
#
# Parameters supported:
#
#   config
#   autoconf
#
# Configurable variables
#
#   url      - Override default status-url
#   port     - HTTP port numbers
#
#   ssl      - activate SSL (add env.ssl yes in munin plugin configuration)
#   urls     - Override default status-url (SSL)
#   ports    - HTTPS port numbers (SSL)
#
# $Log$
# Revision 1.13  2006/03/07 20:30:00 fra519
# adapt script for Apache-SSL Server.
#
# Revision 1.12  2004/12/10 18:51:43  jimmyo
# linux/apt* has been forced to LANG=C, to get predictable output.
#
# Revision 1.11  2004/12/10 10:47:47  jimmyo
# Change name from ${scale} to ${graph_period}, to be more consistent.
#
# Revision 1.10  2004/12/09 22:12:54  jimmyo
# Added "graph_period" option, to make "graph_sums" usable.
#
# Revision 1.9  2004/09/26 22:14:39  jimmyo
# Changd COUNTER -> DERIVE for some plugins. Set min/max values.
#
# Revision 1.8  2004/05/20 13:57:11  jimmyo
# Set categories to some of the plugins.
#
# Revision 1.7  2004/05/14 21:16:46  jimmyo
# "Upped" som plugins from contrib/manual to auto.
#
# Revision 1.6  2004/04/27 21:32:06  jimmyo
# Clarified the vlabels in the apache-plugins (Deb#238594).
#
# Revision 1.5  2004/04/27 08:46:57  jimmyo
# Fixed broken autoconf in apache-* plugins (Deb#236144).
#
# Revision 1.4  2004/02/18 15:47:35  jimmyo
# The generic/apache_* plugins now have defined max values.
#
# Revision 1.3  2004/02/03 17:17:25  jimmyo
# Generic/apache-plugins have been modified to properly to report the correct autoconf value. Also, bugfixes in _processes and _volume.
#
# Revision 1.2  2004/01/29 18:47:30  jimmyo
# Made plugins apache_* compatible with older versions of LWP::UserAgent (SF#881411).
#
# Revision 1.1  2004/01/02 18:50:00  jimmyo
# Renamed occurrances of lrrd -> munin
#
# Revision 1.1.1.1  2004/01/02 15:18:07  jimmyo
# Import of LRRD CVS tree after renaming to Munin
#
# Revision 1.4  2003/12/18 16:35:33  jimmyo
# fail more gracefully when using uninstalled perl modules.
#
# Revision 1.3  2003/11/07 17:43:16  jimmyo
# Cleanups and log entries
#
#
#
# Magic markers:
#%# family=auto
#%# capabilities=autoconf

my $ret = undef;
my $ssl = undef;

if (! eval "require LWP::UserAgent;")
{
    $ret = "LWP::UserAgent not found";
}
if (! eval "require Crypt::SSLeay;" and exists $ENV{'ssl'})
{
    $ssl = "Crypt::SSLeay not found";
}

my $URL = exists $ENV{'url'} ? $ENV{'url'} : "http://127.0.0.1:%d/server-status?auto";
my @PORT = exists $ENV{'port'} ? split(' ', $ENV{'port'}) : (80);

my $URLS = exists $ENV{'urls'} ? $ENV{'urls'} : "https://127.0.0.1:%d/server-status?auto";
my @PORTS = exists $ENV{'ports'} ? split(' ', $ENV{'ports'}) : (443);

if ( exists $ARGV[0] and $ARGV[0] eq "autoconf" )
{
    if ($ret)
    {
        print "no ($ret)\n";
        exit 1;
    }

    if ($ssl) {
        print "no ($ssl)\n";
        exit 1;
    }

    my $ua = LWP::UserAgent->new(timeout => 30);

    my @badports;
    foreach my $port (@PORT) {
        my $url = sprintf $URL, $port;
        my $response = $ua->request(HTTP::Request->new('GET',$url));
        push @badports, $port unless $response->is_success and $response->content =~ /^Total Accesses:/im;
    }
    if (exists $ENV{'ssl'}) {
        foreach my $port (@PORTS) {
            my $url = sprintf $URLS, $port;
            my $response = $ua->request(HTTP::Request->new('GET',$url));
            push @badports, $port unless $response->is_success and $response->content =~ /^Total Accesses:/im;
        }
    }
    if (@badports) {
        print "no (no apache server-status or ExtendedStatus missing on ports @badports)\n";
        exit 1;
    } else {
        print "yes\n";
        exit 0;
    }
}

if ( exists $ARGV[0] and $ARGV[0] eq "config" )
{
    print "graph_title Apache accesses\n";
    print "graph_args --base 1000\n";
    print "graph_vlabel accesses / \${graph_period}\n";
    print "graph_category apache\n";
    foreach my $port (@PORT) {
        print "accesses$port.label port $port\n";
        print "accesses$port.type DERIVE\n";
        print "accesses$port.max 1000000\n";
        print "accesses$port.min 0\n";
    }
    if (exists $ENV{'ssl'}) {
        foreach my $port (@PORTS) {
            print "accesses$port.label port $port\n";
            print "accesses$port.type DERIVE\n";
            print "accesses$port.max 1000000\n";
            print "accesses$port.min 0\n";
        }
    }
    exit 0;
}

my $ua = LWP::UserAgent->new(timeout => 30);

foreach my $port (@PORT) {
    my $url = sprintf $URL, $port;
    my $response = $ua->request(HTTP::Request->new('GET',$url));
    if ($response->content =~ /^Total Accesses:\s+(.+)$/im) {
        print "accesses$port.value $1\n";
    } else {
        print "accesses$port.value U\n";
    }
}

if (exists $ENV{'ssl'}) {
    foreach my $port (@PORTS) {
        my $url = sprintf $URLS, $port;
        my $response = $ua->request(HTTP::Request->new('GET',$url));
        if ($response->content =~ /^Total Accesses:\s+(.+)$/im) {
            print "accesses$port.value $1\n";
        } else {
            print "accesses$port.value U\n";
        }
    }
}
# vim:syntax=perl 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T13:09:27.627

评论将被忽略。我最初的意思是 Perl 注释。看起来我将不得不忽略反对票，因为我在这里帮助你:)

我已将该命令粘贴到普通 Ubuntu 桌面安装的 bash shell 中。出于各种原因，投票者会（并非不合理地）认为这是一个坏主意。

我的态度是我有一个备用的 Ubuntu 虚拟机可以用来测试它，所以如果它发生任何不好的事情，我很乐意销毁它。对代码进行粗略的目视检查会发现以下内容。

你有命令打电话给我吗？如果没有，那么下面的代码就没有地雷了。

```
my $ret = undef;
my $ssl = undef;

if (! eval "require LWP::UserAgent;")

if (! eval "require Crypt::SSLeay;" and exists $ENV{'ssl'})
{
    $ssl = "Crypt::SSLeay not found";
}

my $URL = exists $ENV{'url'} ? $ENV{'url'} : "http://127.0.0.1:%d/server-status?auto";
my @PORT = exists $ENV{'port'} ? split(' ', $ENV{'port'}) : (80);

my $URLS = exists $ENV{'urls'} ? $ENV{'urls'} : "https://127.0.0.1:%d/server-status?auto";
my @PORTS = exists $ENV{'ports'} ? split(' ', $ENV{'ports'}) : (443); 
```

接下来我们有

```
if ( exists $ARGV[0] and $ARGV[0] eq "autoconf" )
{
  if ($ret)
  {
      print "no ($ret)\n";
      exit 1;
  }

if ($ssl) {
    print "no ($ssl)\n";
    exit 1; 
```

exit 1 会带你离开当前的 shell。

假设您在子外壳中，需要进行更多分析...

所以这里是有趣的代码。

```
rkielty@ubuntu:~$ foreach my $port (@PORT) {
bash: syntax error near unexpected token `(' 
```

清除地雷

```
rkielty@ubuntu:~$     push @badports, $port unless $response->is_success and $response->content =~ /^Total Accesses:/im;
The program 'push' is currently not installed.  You can install it by typing:
sudo apt-get install heimdal-clients 
```

现在在这里你必须检查你是否有一个`push`程序，看看它做了什么。

然后运行`which push`​​man 或 info push

```
rkielty@ubuntu:~$         print "no (no apache server-status or ExtendedStatus missing on ports @badports)\n";
Warning: unknown mime-type for "no (no apache server-status or ExtendedStatus missing on ports @badports)\n" -- using "application/octet-stream"
Error: no such file "no (no apache server-status or ExtendedStatus missing on ports @badports)\n" 
```

所以在这里我们受到错误的保护。

从那里开始有两次调用 `exit`.

所以看起来你应该没问题。

需要注意的是，您需要确保没有程序调用`my`或`push`在您的系统上

我不确定如何创建目录，您可能应该进一步调查。请记住，它们可能不是由此引起的。

# objective-c - 在 tableview 中更改 searchBar 的宽度

> ID：10914817
> 
> 赞同：2
> 
> 时间：2012-06-06T13:06:34.243
> 
> 标签：objective-c, ios, ios5, uisearchbar

我意识到会有这样的评论是重复的：

[更改 TableView 上 UISearchBars 的宽度](https://stackoverflow.com/questions/6253827/change-the-width-of-uisearchbars-on-a-tableview)

我认为不是。为什么我无法更改情节提要中的宽度？

![在此处输入图像描述](../Images/feec9ce89cb62f52b6e1eb2c455e3df0.png)

我可以在宽度字段中写入任何值，但只要我按下返回/输入键值 320 就会恢复。

我也尝试过在视图中执行加载方法：

```
searchBar.frame = CGRectMake(0, 0, 222, 45); 
```

再次零成功，有谁知道如何做到这一点？我有一个索引表，右侧的字母与搜索文本字段重叠，看起来非常难看。

**更新**

简而言之，这就是我想要的（概念上）：

![在此处输入图像描述](../Images/00edda1da8084ecb2cc00c952f4be40e.png)

这是我设法制作的：

![在此处输入图像描述](../Images/15cc360489d68b047c1fe311e1aad56a.png)

再次让我重申“我正在尝试调整搜索栏的大小，以便字母不会重叠”的问题。

我已经尝试过 taus-iDeveloper 的建议，它确实调整了大小，但表格单元格/部分与其重叠。

也试过这个：

[更改 UISearchBar 文本字段的大小？](https://stackoverflow.com/questions/556814/changing-the-size-of-the-uisearchbar-textfield)

我设法在情节提要中调整它的大小，但是当应用程序运行时，大小没有改变。

![在此处输入图像描述](../Images/acac0b106c0eba10ce5cc58eb4c2d281.png)

我完全不知道下一步该尝试什么..

**更新 2**

我接受了答案，因为它有一些解决方案的要素，我得出结论，仅以编程方式使用情节提要无法做到这一点，**解决方案**：

```
//Add the search bar uiview wrapper
    UIView *searchBarView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, self.tableView.frame.size.width, 44.0)];

    //Add the search bar and navigation item to fill in the remaining space
    UINavigationBar *remainingSearchSpace = [[UINavigationBar alloc] initWithFrame:CGRectMake(290, 0.0, (self.tableView.frame.size.width-290), 44.0)];

    searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0.0, 0.0, 290, 44.0)];
    searchBar.delegate = self;
    [searchBarView addSubview:searchBar];
    [searchBarView addSubview:remainingSearchSpace];
    self.tableView.tableHeaderView = searchBarView; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:16:50.247

使用这些[UISearchDisplayDeletegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISearchDisplayDelegate_Protocol/Reference/Reference.html)函数：

```
- (void) searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller
- (void) searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:45:12.170

试试这个：在 .h 文件中，

```
@interface SearchBarController : UIViewController <UISearchBarDelegate>

@property (nonatomic, retain) UISearchBar *mySearchBar; 
```

在 .m 文件中，

```
@synthesize mySearchBar;
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.title = NSLocalizedString(@"SearchBarTitle", @"");

    self.view.backgroundColor = [UIColor groupTableViewBackgroundColor];    // use the table view background color

    self.mySearchBar = [[[UISearchBar alloc] initWithFrame:CGRectMake(0.0, 0.0, self.view.bounds.size.width, 44.0)] autorelease];
    self.mySearchBar.delegate = self;
    self.mySearchBar.showsCancelButton = YES;
    self.mySearchBar.showsBookmarkButton = YES;
    [self.view addSubview: self.mySearchBar];

    // provide tint coloring and background image only if its available
    if (![self.mySearchBar respondsToSelector:@selector(setSearchFieldBackgroundImage:forState:)])
    {
        // hide the segmented control allowing for various content options
        self.contentOptions.hidden = YES;
    }
} 
```

希望这可以帮助！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T16:06:18.963

您可以在搜索栏下方显示索引，而不是默认显示搜索取消按钮所在的位置。

# django - ipdb/ipython 中的 Django 运行服务器

> ID：10914819
> 
> 赞同：1
> 
> 时间：2012-06-06T13:06:37.830
> 
> 标签：django, ipython

在 ipython 中，您可以使用魔术命令：

```
%run -d myapp.py 
```

这将在 ipython 中运行应用程序，一旦它崩溃，它将立即触发 ipdb 以检查崩溃。在遇到错误而不是显示错误页面后，如何强制 django runserver 立即回退到 ipdb/ipython（当然我在浏览器中不需要 ipdb - 我说的是我在其中运行 manage.py 的控制台）？

PS。我知道 ipdb.set_trace() - 我希望 ipdb 在发生错误时自动运行 - 这将是一个真正的节省时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:16:19.217

您可以使用[django-pdb](http://pypi.python.org/pypi/django-pdb#downloads)。这很容易。仅事后分析模式仍在[分叉中](https://github.com/Psycojoker/django-pdb)

# .net - ASP .NET - JsonIgnore 似乎不起作用

> ID：10914823
> 
> 赞同：1
> 
> 时间：2012-06-06T13:06:55.460
> 
> 标签：.net, json, asp.net-mvc-3

**问题**

由于循环引用，当返回 json 结果时，我无法在 MVC .Net 中序列化对象。

> 检测到类型的自引用循环...

*我的实体类：*

```
public class Subscriber
{
  [JsonIgnore]
  public virtual ICollection<Tag> Tags { get; set; }
} 
```

*在控制器中：*

```
public JsonResult GetSubscribers(GridRequestModel model)
{
   data = ... get data ..
   JSON(data, JsonRequestBehavior.AllowGet);
} 
```

似乎 .NET 序列化程序似乎没有考虑到 JsonIgnore，因为我仍然收到错误消息。

* * *

**尝试的解决方案**

我将控制器更改为以下内容：

```
public JsonResult GetSubscribers(GridRequestModel model)
{
   data = ... get data ..
   JsonSerializerSettings jsSettings = new JsonSerializerSettings();
   jsSettings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;

   string json = JsonConvert.SerializeObject(data, Formatting.None, jsSettings);

   JSON(json, JsonRequestBehavior.AllowGet);
} 
```

这次我得到：

> 无法序列化关系管理器对象。当RelationshipManager 属于没有实现IEntityWithRelationships 的实体对象时，这种类型的对象不能被序列化。

另外，不确定是否可以直接返回字符串，因为我有 JsonResult 的返回类型。会`Json(json ... )`工作吗？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-25T15:50:13.057

您还可以使用 System.Web.Extensions 中的 [ScriptIgnore] 属性

```
 public class SomeClass:Entity
{
    public SomeClass() { }
    public virtual int TestQuestionTypeValueId { get { return this.Id; } }
    [ScriptIgnore]
    public virtual TestQuestionTypes TestQuestionTypes { get; set; }
    public virtual string QuestionTypeValueText { get; set; }
    public virtual decimal QuestionTypeValue { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:30:05.690

除非您在控制器中重载了 Json(..) 方法，否则它们将使用 .NET JavaScript 序列化程序而不是 JSON .NET。

其次，不要直接返回 EF 类实例，因为它们具有不同的依赖关系以及可能的延迟加载关联。将数据转换为专门设计的视图/json 模型类。

# android - Android onActivityResult 永远不会启动

> ID：10914824
> 
> 赞同：1
> 
> 时间：2012-06-06T13:07:00.047
> 
> 标签：android, cordova, android-intent, phonegap-plugins

很抱歉再次问同样的问题，但在寻找答案后，我没有编写正常工作的代码。

ñ这是我调用活动的主要功能：

```
package com.phonegap.CameraPluginTest;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

import com.phonegap.DroidGap;

public class CameraPluginTest2_3Activity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        super.loadUrl("file:///android_asset/www/index.html");
        try{
            CustomCamera camera = new CustomCamera(this);
            appView.addJavascriptInterface(camera, "CustomCamera");
            //camera.Cameratest();
            //camera.startCamera(50);
        }catch(Exception ex){
            ex.printStackTrace();
            Log.e("RapportsError",  "error" + ex.toString());
        }
    }

    public class CustomCamera{
        private Context context;

        public CustomCamera (Context context){
            this.context = context;

        }

        public void Cameratest() {
            Log.e("RapportsError",  "Cameratest");

        }
        public void startCamera(int quality)
        {
            Log.e("RapportsError",  "intent");
            try{

                Intent i = new Intent(context, CameraPreview.class);

                i.setAction("android.intent.action.PICK");
                i.putExtra("quality", quality);
                startActivityForResult(i, 1);
                Log.e("RapportsError",  "despues de intent" );
            }catch(Exception ex){
                ex.printStackTrace();
                Log.e("RapportsError",  "error" + ex.toString());
            }
        }

        protected void onActivityResult(int reqCode, int resCode, Intent intent)
        {
            String data;            
            Log.e("RapportsError",  "ON ACTIVITY RESULT " + reqCode);
            //super.onActivityResult(requestCode, resultCode, intent);
            if (resCode == RESULT_OK)
            {
                data = intent.getStringExtra("picture"); 
                Log.e("RapportsError",  "error" + data);
                // Send the graphic back to the class that needs it
                //launcher.processPicture(data);
            }
            else
            {
                //launcher.failPicture("Did not complete!");
            }
        }

    }

} 
```

这是被调用的类

```
package com.phonegap.CameraPluginTest;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;

import java.io.IOException;
import java.util.List;

import org.apache.commons.codec.binary.Base64;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.PixelFormat;
import android.graphics.Bitmap.CompressFormat;
import android.graphics.Rect;
import android.hardware.Camera;
import android.hardware.Camera.Size;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.MenuItem;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.Toast;

import android.graphics.YuvImage;
import android.os.Environment;

public class CameraPreview extends Activity implements SurfaceHolder.Callback{

    private static final String TAG = "PhoneGapCamera";
    private SurfaceView mSurfaceView;
    private SurfaceHolder mSurfaceHolder;

    private RelativeLayout root;

    Camera mCamera;
    boolean mPreviewRunning = false;

    int quality;
    Intent mIntent;

    public void onCreate(Bundle icicle)
    {
        super.onCreate(icicle);

        Log.e(TAG, "onCreate");

        getWindow().setFormat(PixelFormat.TRANSLUCENT);

        RelativeLayout.LayoutParams containerParams = new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, 
                ViewGroup.LayoutParams.FILL_PARENT);
        LinearLayout.LayoutParams surfaceParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, 
                ViewGroup.LayoutParams.FILL_PARENT, 0.0F);
        RelativeLayout.LayoutParams buttonParams = new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, 
                ViewGroup.LayoutParams.WRAP_CONTENT);

        root = new RelativeLayout(this);
        root.setLayoutParams(containerParams);

        mSurfaceView = new SurfaceView(this);
        mSurfaceView.setLayoutParams(surfaceParams);
        root.addView(mSurfaceView);

        Button stopButton = new Button(this);
        stopButton.setText("click");
        buttonParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        buttonParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        buttonParams.rightMargin = 5;
        buttonParams.topMargin = 5;

        stopButton.setLayoutParams(buttonParams);
        root.addView(stopButton);

        setContentView(root);

        mSurfaceHolder = mSurfaceView.getHolder();
        mSurfaceHolder.addCallback(this);
        mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);                    
        mIntent = this.getIntent();

        quality = mIntent.getIntExtra("quality", 100);

        stopButton.setOnClickListener(mSnapListener);
    }

    private OnClickListener mSnapListener = new OnClickListener() {
        public void onClick(View v) {
            mCamera.takePicture(null, null, mPictureCallback);
        }
    };

    //public boolean onCreateOptionsMenu(android.view.Menu menu) {
    //    MenuItem item = menu.add(0, 0, 0, "goto gallery");
    //    item.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {
    //        public boolean onMenuItemClick(MenuItem item) {
    //            Uri target = Uri.parse("content://media/external/images/media");
    //            Intent intent = new Intent(Intent.ACTION_VIEW, target);
    //            startActivity(intent);
    //            return true;
    //        }
    //    });
    //    return true;
    //}

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState)
    {
        super.onRestoreInstanceState(savedInstanceState);        
    }

    /*
     * We got the data, send it back to PhoneGap to be handled and processed.
     * 
     */

   // Camera.PictureCallback mPictureCallback = new Camera.PictureCallback() {
   //     public void onPictureTaken(byte[] data, Camera c) {
   //         Log.e(TAG, "PICTURE CALLBACK: data.length = " + data.length);
   //         storeAndExit(data);

   //     }
    //};

    Camera.PictureCallback mPictureCallback = new Camera.PictureCallback() {        
        public void onPictureTaken(byte[] data, Camera _camera) {                        
              storeAndExit(data,_camera);
              Log.d(TAG, "onPictureTaken - jpeg");                            
        }
      };

    /*
     * We can't just store and exit, because Android freezes up when we try to cram a picture across a process in a Bundle.
     * We HAVE to compress this data and send back the compressed data  
     */
    public void storeAndExit(byte[] data,Camera _camera)
    {       
          FileOutputStream outStream = null;          
          String fotoName = new String();
          try {
          fotoName="wy"+System.currentTimeMillis();
          outStream = new FileOutputStream(String.format(
                  "/sdcard/%s.png", fotoName));
          outStream.write(data);
          outStream.close();
          Log.e(TAG, "PICTURE CALLBACK: fotoName" + fotoName + "data.length = " + data.length);
          String js_out = new String( "/sdcard/" + fotoName + ".png");

          mIntent.putExtra("picture", js_out);
              //setResult(RESULT_OK, mIntent);
          this.setResult(RESULT_OK, mIntent);
         // Uri imageUri = Uri.fromFile(outStream);
         // storeAndExit(data);
              finish();
          } catch (FileNotFoundException e) {
              e.printStackTrace();
          } catch (IOException e) {
              e.printStackTrace();
          } finally {
          }           
    }

    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        if (keyCode == KeyEvent.KEYCODE_BACK) {         
            return super.onKeyDown(keyCode, event);
        }

        if (keyCode == KeyEvent.KEYCODE_CAMERA || keyCode == KeyEvent.KEYCODE_DPAD_CENTER || keyCode == KeyEvent.KEYCODE_SEARCH) {
            mCamera.takePicture(null, null, mPictureCallback);
            return true;
        }

        return false;
    }

    protected void onResume()
    {
        Log.e(TAG, "onResume");
        super.onResume();
    }

    protected void onSaveInstanceState(Bundle outState)
    {
        super.onSaveInstanceState(outState);
    }

    protected void onStop()
    {
        Log.e(TAG, "onStop");
        super.onStop();
    }

    public void surfaceCreated(SurfaceHolder holder)
    {
        Log.e(TAG, "surfaceCreated");
        mCamera = Camera.open();
        //mCamera.startPreview();
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h)
    {
        Log.e(TAG, "surfaceChanged");

        // XXX stopPreview() will crash if preview is not running
        if (mPreviewRunning) {
            mCamera.stopPreview();
        }

        Camera.Parameters p = mCamera.getParameters();
        List<Camera.Size> previewSizes = p.getSupportedPreviewSizes();

        Camera.Size previewSize = previewSizes.get(0);

        p.setPreviewSize(previewSize.width, previewSize.height);
        mCamera.setParameters(p);
        try {
            mCamera.setPreviewDisplay(holder);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mCamera.startPreview();
        mPreviewRunning = true;
    }

    public void surfaceDestroyed(SurfaceHolder holder)
    {
        Log.e(TAG, "surfaceDestroyed");
        mCamera.stopPreview();
        mPreviewRunning = false;
        mCamera.release();
    }

    public void onPreviewFrame(byte[] data, Camera camera) {
        try {
            Camera.Parameters parameters = camera.getParameters();
            Size size = parameters.getPreviewSize();
            YuvImage image = new YuvImage(data, parameters.getPreviewFormat(),
                    size.width, size.height, null);
            File file = new File(Environment.getExternalStorageDirectory()
                    .getPath() + "/out.jpg");
            FileOutputStream filecon = new FileOutputStream(file);
            image.compressToJpeg(
                    new Rect(0, 0, image.getWidth(), image.getHeight()), 90,
                    filecon);
        } catch (FileNotFoundException e) {
            Toast toast = Toast
                    .makeText(getBaseContext(), e.getMessage(), 1000);
            toast.show();
        }
    }

} 
```

这是清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.phonegap.CameraPluginTest"
    android:versionCode="1"
    android:versionName="1.0" >

<supports-screens 
    android:largeScreens="true" 
    android:normalScreens="true" 
    android:smallScreens="true" 
    android:resizeable="true" 
    android:anyDensity="true" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:debuggable="true" >
        <activity
            android:name=".CameraPluginTest2_3Activity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".CameraPreview" 
            android:label="CameraPreviewLabel" 
            android:configChanges="orientation|keyboardHidden"
            android:screenOrientation="landscape">
        </activity>                
    </application>

</manifest> 
```

主要问题是我可以拍照，所以对课程的调用正在工作，但没有调用 onActivityResult。

你有线索吗？

非常感谢，很抱歉再次提出同样的问题，但我不明白问题出在哪里。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:43:37.897

看到你对你的问题的回答。你可以让你的活动回到你的插件的方法是确保：

```
this.cordova.setActivityResultCallback(MyActivity.this); 
```

在您执行 startActivityForResult()... 调用之前调用。真正困扰我的事情似乎没有人在任何地方回答。必须自己找出来。

顺丰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T10:24:39.940

如果您的主 Activity 中有 onActivityResult()，则必须确保它调用其父级的方法以正确处理插件：

```
public class MainActivity extends CordovaActivity {
                    //or 'extends DroidGap' based on Cordova version

    //...

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
            if (requestCode == MyCustomActivity) {
                    doMyCustomActivity(requestCode);
            }
            else { //call onActivityResult() of the plugins
                super.onActivityResult(requestCode, resultCode, intent);
            }
    }

    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:19:58.913

在我更改 AndroidManifest.xml 中的 launchMode 之前，我无法让 onActivityResult 工作

这个**不工作**：

```
android:launchMode="singleInstance" 
```

*standard*和*singleTop*对我来说很好用。

我看到您的清单中没有launchMode，所以我不确定它会对您的情况有所帮助。但我希望它可以帮助其他人解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:44:42.813

好的，我建议您更改您的类 CustomCamera 以扩展 PhoneGap 提供的插件接口。我们处理原生层和 JavaScript 层之间通信的所有小问题。使用 addJavascriptInterface 时会弹出一些问题，您必须解决这些问题，包括显示的键盘会重新加载您的应用程序、界面在某些版本的模拟器上不起作用等。只需使用我们的插件 API 即可对你来说更容易。

[如何为 Android 创建插件](http://wiki.phonegap.com/w/page/36753494/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20Android)

查看PhoneGap 中[相机代码](https://github.com/apache/incubator-cordova-android/blob/master/framework/src/org/apache/cordova/CameraLauncher.java)的 src，因为我们刚刚为 Android 启动了拍照意图，您可以使用相同的方法，但改为启动您的意图。

# objective-c - MKMapView 上的叠加问题

> ID：10914832
> 
> 赞同：1
> 
> 时间：2012-06-06T13:07:18.483
> 
> 标签：objective-c, ios, xcode, mkmapview, cllocation

我已经设置了一个`CLLocation`对象，我正在添加`MKCircle`覆盖。我希望的`radius`变量`MKCircle`是相对于这两个：

1.  地图视图的大小
2.  位置的大小

那么，如何从 a 中检索某种大小值`CLLocation`？更好的是，一旦我与地图视图交互/缩小，它会自动缩放吗？这是我的目标的概述：

将叠加层添加到地图视图。叠加层将是一个`CLLocation` `CLLocationCoordinate2D`变量，但我希望该叠加层适合该位置的大小，然后在我放大和缩小地图时调整大小，我很确定它应该自动完成。我知道我需要定义`MKCircle`'s radius 变量，但是我应该如何设置呢？那么，你们知道我该怎么做吗？

谢谢！

更新：

```
CLLocation *org = [[CLLocation alloc] initWithLatitude:coordO.latitude longitude:coordO.longitude];
CLLocation *des = [[CLLocation alloc] initWithLatitude:coordD.latitude longitude:coordD.longitude];

MKCircle *myCircle = [MKCircle circleWithCenterCoordinate:coordO radius:org.horizontalAccuracy];
MKCircle *myCircle2 = [MKCircle circleWithCenterCoordinate:coordD radius:des.horizontalAccuracy];

if (myCircle2 && myCircle) {

    NSLog(@"destination and origin both valid");
}

[mapView addOverlays: [NSArray arrayWithObjects:myCircle, myCircle2, nil]];

[myCircle setTitle:@"Placeholder"];
[myCircle2 setTitle:@"Placeholder"];

[localOverlays addObjectsFromArray: [NSArray arrayWithObjects:myCircle, myCircle2, nil]]; 
```

这是我用来向地图视图添加叠加层的所有代码，虽然它不起作用，但叠加层（`MKCircle`我认为是一个圆圈）不存在/不可见。我查看了 HazardMap Apple 示例代码，看起来他们已经创建了一些其他类进行设置。这是必要的吗，我的代码有什么问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:18:45.213

a 的半径`MKCircle`是 a `CLLocationDistance`，它表示以米为单位的距离测量值。`CLLocation`a的水平精度`CLLocationAccuracy`表示坐标值的精度，以米为单位。

所以，你需要做的就是：

```
MKCircle *circle = [MKCircle circleWithCenterCoordinate:location.coordinate
                                                 radius:location.horizontalAccuracy]; 
```

**更新：**覆盖不可见，因为您手动创建了位置，因此它们的水平精度为零。您可以使用 方法创建`CLLocation`具有自定义水平精度的`-[CLLocation initWithCoordinate:altitude:horizontalAccuracy:verticalAccuracy:timestamp:]`。或者您可以定义圆的最小半径（例如 10 米）：

```
CLLocationDistance radius = MAX(10, location.horizontalAccuracy); 
```

# php - 使用 TCPDF 将空间写入 PDF 文件

> ID：10914835
> 
> 赞同：1
> 
> 时间：2012-06-06T13:07:29.687
> 
> 标签：php, pdf, whitespace, tcpdf

我有这个简单的脚本，它通过 php 库 TCPDF 将一些文本写入 PDF。这是脚本：

```
// create new PDF document 
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

// set document information
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('Label Creator');
$pdf->SetTitle('labels');
$pdf->SetSubject('Labels di prova');
$pdf->SetKeywords('TCPDF, PDF, example, test, guide');

// set default monospaced font
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);
$pdf->setPrintHeader(false);
$pdf->setPrintFooter(false);

//set auto page breaks
$pdf->SetAutoPageBreak(TRUE,0);

//set image scale factor
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

//set some language-dependent strings
$pdf->setLanguageArray($l);

// set font
$pdf->SetFont('times', '', 15);
//left margin
$pdf->SetMargins(18,15,18,FALSE);
// add a page
$pdf->AddPage();
$label="Hello world, i'm michele";

$pdf->Cell(0, 0 , $label, 0, 1, 'C', 0, '', 0,FALSE,'T','M');

//Close and output PDF document
$pdf->Output('../../labels.pdf', 'F');
echo 'Labels generate!'; 
```

问题是脚本有效，但在文件中我会看到没有空格的文本！像这样：helloworld,i'mmichele 有没有人有解决方案？！！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:57:09.280

**选项 1：如果你想使用 Cell**

原型是：

```
//Cell($w, $h=0, $txt='', $border=0, $ln=0, $align='', $fill=0, $link='', $stretch=0, $ignore_min_height=false, $calign='T', $valign='M') 
```

*要处理间距，请使用这些：*

```
$pdf->Cell(0, 0, 'TEST CELL STRETCH: spacing', 1, 1, 'C', 0, '', 3);
$pdf->Cell(0, 0, 'TEST CELL STRETCH: force spacing', 1, 1, 'C', 0, '', 4); 
```

*你可以试试这个：*

```
$label="Hello world, i'm michele";
$pdf->Cell(0, 0 , $label, 1, 1, 'C', 0, '', 3; 
```

边框是打开的，这样你就可以看到单元格是否足够大。希望这有效。（作为指示，以下内容：FALSE、'T'、'M' 已经是默认值）

**选项 2：您也可以使用 Write()**

```
$pdf->AddPage();

// set some text to print
$label = <<<EOD
About Michele.

Michele is awesome.
EOD;

// print a block of text using Write()
$pdf->Write($h=0, $label, $link='', $fill=0, $align='C', $ln=true, $stretch=0, $firstline=false, $firstblock=false, $maxh=0); 
```

您可以在那里找到大量示例：[TCPDF 示例](http://www.tcpdf.org/examples.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:01:51.040

我相信问题出在“times”字体上。我对那个特定的字体也有同样的问题。您可以尝试 tcpdf 字体目录中的一些其他字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-21T15:40:55.317

**我已经解决了，问题是浏览器的PDF插件可视化器的一个错误！**

# c# - .net listView 单元格属性

> ID：10914839
> 
> 赞同：0
> 
> 时间：2012-06-06T13:07:38.587
> 
> 标签：c#, asp.net, listview

我有一个列表视图，其值类似于：

```
1 0 0 0 1
0 1 1 1 0
1 0 1 1 1
0 0 1 0 1 
```

其中每个条目是列表视图中的一个单元格/列。

如何检查单元格的值是否为 1，然后将列背景颜色更改为不同的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:15:59.443

使用`Eval`和三元运算符：

```
<style type="text/css">
    .Value1
    { 
       font: 10pt Verdana; 
       font-weight:700;
       color: Green;
    }

    .NotValue1
    { 
       font: 15pt Times; 
       font-weight:250;
       color: Blue;
    }
</style>

<asp:ListView runat="server" ID="ListView1" >
  <LayoutTemplate>
    <table runat="server" id="table1" >
      <tr runat="server" id="itemPlaceholder" ></tr>
    </table>
  </LayoutTemplate>
  <ItemTemplate>
    <tr runat="server">
      <td runat="server" CssClass='<%# Convert.ToInt32(Eval("Value"))==1 ? "Value1" : "NotValue1" %>'>
        <%-- Data-bound content. --%>
        <asp:Label ID="LblValue" runat="server" 
          Text='<%#Eval("Value") %>' />
      </td>
    </tr>
  </ItemTemplate>
</asp:ListView> 
```

（未经测试）

# ios - 目标 C 数据类型/数学返回 0.0000

> ID：10914843
> 
> 赞同：0
> 
> 时间：2012-06-06T13:08:07.927
> 
> 标签：ios, objective-c, cocoa-touch

> **可能重复：**
> [C 问题 - 除法结果始终为零](https://stackoverflow.com/questions/2345902/c-problem-division-result-is-always-zero)

我试图弄清楚客观C的工作原理，谁能解释我做错了什么？

```
double hr = ((1/360) * 300);
NSLog(@"%f", hr); 
```

返回：

```
2012-06-06 14:07:02.511 Clock2[3385:f803] 0.000000 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T13:08:59.147

当 LHS 和 RHS 都是整数时，C 和相关语言（如 C++ 和 Objective C）使用整数（截断）除法，因此 1 / 360 = 0。对于浮点运算，请尝试养成使用浮点文字的习惯，即使对于整个数字，即改变：

```
double hr = ((1/360) * 300); 
```

到：

```
double hr = ((1.0/360.0) * 300.0); 
```

# java - 客户端与服务器和 JPA 事务的对话

> ID：10914844
> 
> 赞同：1
> 
> 时间：2012-06-06T13:08:10.893
> 
> 标签：java, jpa, ejb, cdi, seam3

我正在开发一个信息系统，但有些事情我不知道如何处理。假设我的网站允许管理员编辑用户。当两个管理员要同时编辑同一个用户时，不应该允许在第一个管理员之后单击编辑的管理员。

所以我希望在管理员单击编辑按钮时打开一个事务，并在他们发送编辑后的表单时提交。

我能想到的一种解决方案是将 EntityManager 放在命名的 ConversationScoped CDI bean 中。但我认为这不是一个好的解决方案，因为表示层应该与业务层分离，而数据库访问属于业务层。

另一种解决方案可能是将 EntityManager 放在 Stateful bean 中并管理来自 Named ConversationScoped CDI bean 的事务，该 bean 将调用 Stateful bean 上的方法。但是在 Web 层管理事务是个好主意吗？如果我决定将我的业务层部署在另一个应用程序服务器上，那么在远程 EJB 上管理事务会起作用吗？如果 EJB 被钝化，事务会丢失怎么办？

这也与另一个问题有关，当您使用 EntityManager 从数据库中检索对象时，一旦事务关闭，它就会被分离。如果对象有一些惰性初始化字段，则 Web 层无法访问它们，因为当对象返回到 Web 层时，它已分离。因此，您可以管理 Web 层中的事务，也可以遍历业务层中的惰性初始化字段。前一种解决方案似乎不正确，而后一种解决方案可能会变得非常冗长和复杂。

我知道我问了太多问题，但我真的很想知道如何正确地做到这一点。

我可以使用这些技术：CDI、Seam 3 和 EJB。

当然，如果您知道更好的解决方案，我会很高兴听到它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:34:31.897

JPA 乐观锁定机制解决了这个问题（请参阅@davidfrancis 评论）。

# c++ - 如何计算 C++ 中正态分布的 CDF 概率？

> ID：10914846
> 
> 赞同：5
> 
> 时间：2012-06-06T13:08:12.357
> 
> 标签：c++, boost, statistics, probability, normal-distribution

在给定均值和 sigma 的情况下，是否有任何函数可以让我计算正态分布的 CDF 概率？即例如 P( X < x ) 给定具有 $\bar{x}$ 和 $\sigma$ 的正态分布。

我认为 boost 有这个，但我认为它只是用于**标准**正态分布。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T13:12:44.967

您可以缩放——任何 N(m, s) 都可以通过除以 s 并减去 m 来转换为 N(0,1)。因此，您只需要一个由许多库提供的 N(0,1) 的 cdf。

这是一个简单的 R 示例：

```
R> pnorm(1.96, 0, 1)          # compute cdf of 1.96 for N(0,1)
[1] 0.975002
R> pnorm(1.96*3 + 2, 2, 3)    # mu + sd*1.96 is really the same for N(mu, sd)
[1] 0.975002
R> 
```

# android - 可以从 Android ActivityInstrumentationTestCase2 发送广播吗？

> ID：10914849
> 
> 赞同：0
> 
> 时间：2012-06-06T13:08:27.897
> 
> 标签：android, junit

我正在尝试从 ActivityInstrumentationTestCase2 发送广播，如下所示：

```
void myTest(){
    getActivity().getBaseContext().sendBroadcast(
        new Intent("com.my.broadcast.intent"));
    sleep(100000);
} 
```

该方法无怨无悔地执行；但是，接收方（输入方法服务）进入 ANR 状态。接收器方法永远不会使用这种方法执行。使用更直接的方法（从活动中发送广播）进行测试会成功。

我的问题是，对 ActivityInstrumentationTestCase2 是否有限制会阻止我发送广播？谁能解释为什么会发生此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:11:27.447

不要打睡眠电话。还要确保 IntentFilter 设置正确。您的 sendBroadcast 代码很好。

# text - 在 TexArea LWUIT 中设置大文本

> ID：10914858
> 
> 赞同：0
> 
> 时间：2012-06-06T13:09:04.553
> 
> 标签：text, textarea, lwuit

我有大约 800 个字符的静态文本。我想知道一种在一个地方展示所有内容的方法。我试图从 TextArea LWUIT 中展示它，但显然它给了我非法争论例外。请帮忙，因为我在这方面浪费了很多时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:22:28.600

您是否设置了 maxSize 属性`TextArea`？我的意思是，如果您尝试为 maxSize 设置一个值...使用`TextArea.setMaxSize(800)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T04:40:42.213

尝试这个。

textArea.setSingleLineTextarea(false);

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T10:06:53.633

我终于让它工作了:) 以下是它的解决方法：

```
helpText = new TextArea(text);
    helpText.setRows(15);

    helpText.setColumns(30); 
```

诀窍是分别添加行和列，不要使用 setText(text)。

# java - 当 JNLP 固定为 JRE 1.6 并且安装了 JRE 1.7 时，Java WebStart 启动失败

> ID：10914859
> 
> 赞同：7
> 
> 时间：2012-06-06T13:09:11.660
> 
> 标签：java, java-7, jnlp, java-web-start

在我的公司，我们下载并启动了一个与 JRE 1.6.0_20 绑定的 JNLP 应用程序。我们使用系统缓存功能来下载 JAR。

当我们在 PC 上安装 JRE 1.7 时，WebStart 无法启动。当我们启用日志时，我们会看到以下异常：

```
java.lang.ExceptionInInitializerError
    at com.sun.deploy.net.protocol.https.Handler.openConnection(Unknown Source)
    at java.net.URL.openConnection(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.createUrlConnection(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doRequest(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doGetRequestEX(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getCachedFile(Unknown Source)
    at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
    at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassCastException: sun.security.ssl.X509TrustManagerImpl cannot be ast to com.sun.net.ssl.internal.ssl.X509ExtendedTrustManager
    at com.sun.deploy.security.X509ExtendedDeployTrustManager.<init>(Unknown Source)
    at com.sun.deploy.net.protocol.https.Handler$Initializer$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.deploy.net.protocol.https.Handler$Initializer.<clinit>(Unknown Source)
... 16 more 
```

有已知的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:52:17.437

这是一个安装问题，多个 JRE 的插件启动问题。使用更新的 JRE 重新安装所有插件。[查看错误数据库](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7138656)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:59:56.403

这可能不适用于您的情况，但我为我们的问题找到了解决方案。我修改了 JNLP 文件以指定要使用的 JRE。在我们的例子中，JNLP 文件具有以下内容：

```
<j2se java-vm-args="-Xmx512m -Dsun.java2d.noddraw=true" version="1.6+"/> 
```

显然，“ `1.6+`”允许在 1.7 下执行。所以我删除了“ `+`”，如下所示：

```
<j2se java-vm-args="-Xmx512m -Dsun.java2d.noddraw=true" version="1.6"/> 
```

现在该应用程序运行良好。如果您可以更改通过应用程序 URL 提供的 JNLP 文件，那将是最好的。在我们的例子中，这不是一个选项（JNLP 来自第三方软件包），所以我下载了 JNLP，对其进行了编辑，现在我们通过双击修改后的 .jnlp 文件（或运行1.6`javaws.exe`就可以了）。

如果您需要更多信息，这里有[一些关于 JNLP 文件格式的文档。](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/syntax.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T21:38:14.580

就我而言，以下方法可以解决此问题-

我需要添加“*”，这意味着将选择机器上找到的最新 1.6 JRE。出于某种原因，仅使用“1.6”对我不起作用，1.7 继续阻止启动。

# wpf - 如何在 MVVM Light 中拥有同一个 ViewModel 的多个实例？

> ID：10914860
> 
> 赞同：0
> 
> 时间：2012-06-06T13:09:13.960
> 
> 标签：wpf, mvvm-light

我将 MVVM Light 用于带有选项卡的 WPF 应用程序（有点像 Internet Explorer）。每个选项卡都必须是几个独特的 View 和 View 模型。我知道我的选项卡控件中有多少个实例。

由于 MVVM Light 的设计，我不能同时拥有多个 ViewModel 实例（定位器中的静态属性）。在 codeplex 网站上，我找到了以下解决方案：

我处理这个问题的方法是让 ViewModelLocator 中的 ViewModel 属性（例如 MainViewModel 的 Main 属性）在每次调用时返回 MainViewModel 的不同实例。这样每个视图都会有一个单独的 MainViewModel 实例。

但是，这意味着解析给定窗口的 DataContext 有点复杂（因为 ViewModel 不再保持静态）。如果需要解析，可以在 ViewModelLocator 中根据 View 中存储的唯一 ID 构建查找表，或者使用 IOC 容器根据 key 实例化和解析 ViewModel 实例。

我知道我必须在每个视图中注入一个 ID，我知道我必须在定位器中维护这些 ID 的列表，我知道我必须在定位器中查找以将每个视图与正确的定位器相关联，但我不知道如何将此 ID 从我的视图传递到定位器。如何在我的视图的 XAML 中做到这一点？

我希望我的问题足够清楚，如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-09T10:17:50.820

我曾经在我的博客上解释了如何使用这种场景[http://depblog.weblogs.us/2014/02/11/navigating-to-same-viewmodel-but-with-different-data-and-keep-导航堆栈正确与 mvvm-light/](http://depblog.weblogs.us/2014/02/11/navigating-to-same-viewmodel-but-with-different-data-and-keep-navigation-stack-correct-with-mvvm-light/)。

它适用于 Windows Phone，但也适用于 WPF。您的设置与我的设置的唯一区别是您需要从每个选项卡中获取您的唯一 ID，因为我在导航到新视图时得到了我的 ID。

因此，我建议连接到选项卡更改事件并在那时检索您的密钥。不知道你如何在视图中跟踪你的键，但我猜你有它可用，如果没有，你总是可以将它存储在控件的某个 Tag 属性中。

最后但并非最不重要的是将数据上下文与所需的视图模型绑定，这就是您可以这样做的方法：

```
tabControl.DataContext = ViewModelLocator.GetViewModel<***ViewModel>(tabKey); 
```

TabControl 是当前活动选项卡（我猜应该在上面设置数据上下文？） TabKey 是当前选定选项卡的唯一键，需要检索正确的相应视图模型

对于高级伪代码感到抱歉，但因为您没有添加当前解决方案的一些参考代码，所以有点猜测工作；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:41:12.223

我通常会做的是在包含选项卡控件的窗口的视图模型中列出视图模型。执行此操作的 XMAL 如下所示：

```
<TabControl ItemsSource="View model list here">
            <TabControl.ItemTemplate>
                <DataTemplate>
                      <!-- Your user control here -->
                </DataTemplate>
            </TabControl.ItemTemplate>
        </TabControl> 
```

解决视图模型定位器问题，因为您的主视图模型将包含每个选项卡的视图模型并且知道如何解决它。

如果每个选项卡都有唯一的数据，那么我仍然会为窗口使用 1 个视图模型，使每个选项卡项的内容成为自定义控件并从主视图模型设置它们的数据上下文。

高温高压

# c# - SQL记录条目，不同的测试用例

> ID：10914863
> 
> 赞同：0
> 
> 时间：2012-06-06T13:09:25.650
> 
> 标签：c#, mysql, sql

关于 C# 存储过程的一个小问题......以及一般的 SQL DB：当您将变量值从 C# 传递到存储过程时，有时您有

```
INSERT INTO tablename (column1 name, column2 name, column3 name, columnN name) 
VALUES (@the actual values1, @values2, @valueN); 
```

其他时候你没有列名，但只有输入的值......如果我输入这样的内容会发生什么，（假设表有 3 列，分别称为“bob”、“ash”和“will”）：

```
INSERT INTO tablename (bob, will) VALUES ("hi","hello");
 OR 
INSERT INTO tablename (bob, will) VALUES ("hi","hello","okay"); 
OR 
INSERT INTO tablename (bob, will) VALUES ("hello"); 
```

它将如何影响入境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:11:47.600

第一个查询会将默认值插入`ash`，其他两个不会解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:16:41.133

正如 Quassnoi 和 Marco 指出的 sql 方面的错误问题。

在 C# 中调试时，您将收到以下错误。

> INSERT 语句中的列数少于 VALUES 子句中指定的值。VALUES 子句中的值数必须与 INSERT 语句中指定的列数相匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:12:46.197

第一个查询正确插入该记录（如果没有主键违规）。
第二个查询失败，因为您有三个值和两个字段。
第三个查询失败，因为您有两个字段的一个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:45:44.367

在 SQL 中，第一个查询成功执行，而对于第二个查询，您将收到以下错误：INSERT 语句中的列数少于 VALUES 子句中指定的值。VALUES 子句中的值数必须与 INSERT 语句中指定的列数相匹配。第三个查询也将产生以下错误：INSERT 语句中的列数多于 VALUES 子句中指定的值。VALUES 子句中的值数必须与 INSERT 语句中指定的列数相匹配。

# jquery - 从 jQuery UI 触发 click 事件到 knockout.js

> ID：10914865
> 
> 赞同：1
> 
> 时间：2012-06-06T13:09:27.627
> 
> 标签：jquery, jquery-ui, knockout.js, jquery-events, knockout-sortable

使用来自 Jquery-ui sortable 的代码示例[在基于 Android 或 IOS 的触摸设备上无法](https://stackoverflow.com/questions/6745098/jquery-ui-sortable-doesnt-work-on-touch-devices-based-on-android-or-ios)在 iOS 设备上触摸启用 jQuery UI sortables，注册 knockout.js 点击处理程序以及 jQuery UI sortable 时出现问题在相同的元素上。knockout.js 处理程序不会在启用触摸的设备上触发，但会在台式机/笔记本电脑上触发。

添加一个名为*moved*的标志可以跟踪何时需要触发点击处理程序，标记`// TRIGGER HERE`如下：

```
/*
 * Content-Type:text/javascript
 *
 * A bridge between iPad and iPhone touch events and jquery draggable,
 * sortable etc. mouse interactions.
 * @author Oleg Slobodskoi
 *
 * modified by John Hardy to use with any touch device
 * fixed breakage caused by jquery.ui so that mouseHandled internal flag is reset
 * before each touchStart event
 *
 */
(function( $ ) {

  $.support.touch = typeof Touch === 'object';

  if (!$.support.touch) {
      return;
  }

  var proto =  $.ui.mouse.prototype,
  _mouseInit = proto._mouseInit
  moved = true;

  $.extend( proto, {
    _mouseInit: function() {
      this.element
      .bind( "touchstart." + this.widgetName, $.proxy( this, "_touchStart" ) );
      _mouseInit.apply( this, arguments );
    },

    _touchStart: function( event ) {
      if ( event.originalEvent.targetTouches.length != 1 ) {
        return false;
      }

      this.element
      .bind( "touchmove." + this.widgetName, $.proxy( this, "_touchMove" ) )
      .bind( "touchend." + this.widgetName, $.proxy( this, "_touchEnd" ) );

      this._modifyEvent( event );

      $( document ).trigger($.Event("mouseup")); //reset mouseHandled flag in ui.mouse
      this._mouseDown( event );

      moved = false;

      return false;
    },

    _touchMove: function( event ) {
      this._modifyEvent( event );
      this._mouseMove( event );
      moved = true;
    },

    _touchEnd: function( event ) {
      this.element
      .unbind( "touchmove." + this.widgetName )
      .unbind( "touchend." + this.widgetName );
      this._mouseUp( event );
      if (! moved) {
        // TRIGGER HERE
      }
    },

    _modifyEvent: function( event ) {
      event.which = 1;
      var target = event.originalEvent.targetTouches[0];
      event.pageX = target.clientX;
      event.pageY = target.clientY;
    }

  });

})( jQuery ); 
```

问题是，如何从 jQuery UI 触发对 knockout.js的*点击事件？*

我试过`this.element.click()`, `this.element.get().click()`,`this.element.trigger("click")`等无济于事。

**更新：**

将代码破解为：

*   跟踪实际目标，因为 html.element 似乎不是正确的
*   在正确的目标上触发点击事件

现在它可以与 knockout.js 的点击事件一起正常工作。

```
/*
 * Content-Type:text/javascript
 *
 * A bridge between iPad and iPhone touch events and jquery draggable,
 * sortable etc. mouse interactions.
 * @author Oleg Slobodskoi
 *
 * modified by John Hardy to use with any touch device
 * fixed breakage caused by jquery.ui so that mouseHandled internal flag is reset
 * before each touchStart event
 *
 */
(function( $ ) {

  $.support.touch = typeof Touch === 'object';

  if (!$.support.touch) {
      return;
  }

  var proto =  $.ui.mouse.prototype,
  _mouseInit = proto._mouseInit
  moved = true,
  currentTarget = null;

  $.extend( proto, {
    _mouseInit: function() {
      this.element
      .bind( "touchstart." + this.widgetName, $.proxy( this, "_touchStart" ) );
      _mouseInit.apply( this, arguments );
    },

    _touchStart: function( event ) {
      if ( event.originalEvent.targetTouches.length != 1 ) {
        return false
      }

      this.element
      .bind( "touchmove." + this.widgetName, $.proxy( this, "_touchMove" ) )
      .bind( "touchend." + this.widgetName, $.proxy( this, "_touchEnd" ) );

      this._modifyEvent( event );

      $( document ).trigger($.Event("mouseup")); //reset mouseHandled flag in ui.mouse
      this._mouseDown( event );

      moved = false;

      return false;
    },

    _touchMove: function( event ) {
      this._modifyEvent( event );
      this._mouseMove( event );
      moved = true;
    },

    _touchEnd: function( event ) {
      this.element
      .unbind( "touchmove." + this.widgetName )
      .unbind( "touchend." + this.widgetName );
      this._mouseUp( event );
      if (! moved) {
        $(currentTarget).click();
      }
    },

    _modifyEvent: function( event ) {
      event.which = 1;
      var target = event.originalEvent.targetTouches[0];
      currentTarget = target.target;
      event.pageX = target.clientX;
      event.pageY = target.clientY;
    }

  });

})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:50:52.717

在您发布的代码中，您从`touchstart`事件中返回 false。在启用触摸的设备中，`touchstart`事件首先`click`触发，大约 300 毫秒后触发。

如果您从事件处理程序返回 false，这与调用相同`event.preventDefault()`，`event.stopPropagation()`因此`touchstart`实际上取消了单击。这在台式机上不是问题，因为`touchstart`永远不会触发。

[http://jsfiddle.net/madcapnmckay/HkbwV/2/](http://jsfiddle.net/madcapnmckay/HkbwV/2/)

可能的解决方案。

*   而不是返回 false 只需调用 event.stopPropagation() （如果可以的话）。使用事件绑定来绑定 touchstart 而不是点击。

`<div data-bind="event : { touchstart: somfunction }"></div>`

*   在您标记的地方触发由事件绑定订阅的自定义事件。

您还可以考虑编写一个 touchOrClick 自定义绑定，用于检测 touchstart 是否可用并有选择地绑定到它或 click 事件。

希望这可以帮助。

# php - Moodle 身份验证插件。我错过了什么？

> ID：10914866
> 
> 赞同：1
> 
> 时间：2012-06-06T13:09:28.073
> 
> 标签：php, authentication, plugins, single-sign-on, moodle

我正在尝试使用身份验证插件手动对 moodle 中的用户进行身份验证，但我不了解整个过程正常工作所需的一切。所以，关于我在这里缺少的一些建议会非常有帮助！

我创建了插件，启用了它，它工作了，但仅适用于某些情况，这就是我的问题所在。我的猜测是，在某些时候，我需要实际调用一个将用户信息保存在 moodle 数据库中的函数。但同样，我不确定它在哪里，或者它是如何工作的。所以...专家，帮我一把。

这是我在身份验证插件上更改的两个功能。(auth.php)

```
function loginpage_hook() {
    global $CFG, $DB, $user, $frm, $errormsg;
    $IsAuthenticated = false;
    if(isset($_COOKIE["AUTHENTICATION_KEY"])){
        $json = file_get_contents("WWW.WEBSERVICEURL.COM",true); 
        //getting the file content
        $decode = json_decode($json, true);
        //getting the file content as array  
        if($decode["AuthFlag"]){
            $ucUser = $decode["Username"];
            $user = $DB->get_record('user', array('username'=>$ucUser, 'mnethostid'=>$CFG->mnet_localhost_id));
            $frm->username = $ucUser;
            $IsAuthenticated = true;
        }
    }
    if(!$IsAuthenticated && empty($frm->username)){
        $errormsg = ".";
    }
}

/**
 * Returns true if the username and password work or don't exist and false
 * if the user exists and the password is wrong.
 *
 * @param string $username The username
 * @param string $password The password
 * @return bool Authentication success or failure.
 */
function user_login ($username, $password) {
    global $CFG, $DB, $user;
    if(!$user){ return false; }

    if(isset($_COOKIE["AUTHENTICATION_KEY"])){
        $json = file_get_contents("WWW.WEBSERVICEURL.COM", true); 
        //getting the file content
        $decode = json_decode($json, true);
        //getting the file content as array  
        if($decode["AuthFlag"]){
            $ucUser = $decode["Username"];
            if($user->username = $ucUser){ return true; }
        }
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:08:11.943

我最近制作了一个身份验证插件。我认为您缺少的关键代码片段将是这样的：

```
$user = authenticate_user_login($username, null);

        $newuser = new stdClass();
        $newuser->id = $user->id;
        $newuser->email = $mail;
        $newuser->username = $mail;
        $newuser->country = 'AR';
        $newuser->city = 'capital federal';
        $newuser->firstname = $nombre;
                    $newuser->lastname =  $apellido;

        $DB->update_record('user', $newuser);

        $user = authenticate_user_login($mail, null);
        complete_user_login($user); 
```

那里的关键功能是`authenticate_user_login($username, null)`。你可以传递任何用户名，如果用户名不存在，它会创建一个空用户，准备被填充。

我的插件工作得很好。因此，如果您需要某些东西或者您想分享您的代码以便我了解问题所在，欢迎您！

# php - php在html表中使用数据

> ID：10914870
> 
> 赞同：0
> 
> 时间：2012-06-06T13:09:42.033
> 
> 标签：php, post, html-table

好的，所以基本上我已经将数据添加到 html 表和保存按钮中。我希望此按钮将表中的数据提交给 php 函数，以便我可以使用数据修改我的 mysql 数据库。我有修改数据库的工具，只要能拿到数据。但是，我不知道如何做到这一点。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T13:38:54.477

除了@John Conde 所说的，对于表中显示的每条记录，您应该创建它各自的隐藏字段，即 `<input type="hidden"... />`
考虑到表有行和列，我将做出一些假设：

1.  我将假设这些行等同于您在每条记录上拥有的数据
2.  这些列是您将使用每条记录的数据更新的字段

继续这个假设（让我假设 3 个字段，即 3 列和 2 条记录）

```
 Field 1    Field 2    Field 3
Row 1     a          b          c
Row 2     d          e          f 
```

对于其中的每一个，我们将在我们将创建的包含提交按钮的表单中创建相应的输入字段，如下所示：

```
<form action="" method="post">
    <!--Row 1-->
    <input type="hidden" name="field_1[]" value="a" />
    <input type="hidden" name="field_2[]" value="b" />
    <input type="hidden" name="field_3[]" value="c" />
    <!--Row 2-->
    <input type="hidden" name="field_1[]" value="d" />
    <input type="hidden" name="field_2[]" value="e" />
    <input type="hidden" name="field_3[]" value="f" />
    <!-- more rows if they exist -->
    <input type="submit" name="my_btn" value="POST IT!" />
</form> 
```

在 PHP 端，您可以处理表单字段，如下所示：

```
foreach($_POST["field_1"] as $id=>$field1_value){
    $field2_value = $_POST["field_2"][$id];
    $field3_value = $_POST["field_3"][$id];
    .......
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:24:10.037

首先将您的表格放入带有一些操作和选择方法（GET、POST 等）的 <form> 中。像这样：

```
<br>
< form id="tktk" name="tktk" method="GET" action=" < ? php echo $_SERVER['PHP_SELF'];?>?return=Yes"><br>
  < table style="width: 98%;border:0px"><br>
    < tr><br>
      < td>etc.etc.<br> 
```

然后你可以像这样提交它：

```
if(isset($_GET['return']) && $_GET['return'] == 'Yes'){

$sql = "UPDATE [table] SET [field-a] = 1 WHERE [field-b] = '" . $id . "'";<br>
$result = sqlsrv_query($link, $sql) or die('Errant query:  '.$sql);<br>

} 
```

但总的来说，我同意其他建议您先逐步完成教程以完全了解您正在编码的内容的人的观点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:13:05.793

*   表格中的数据要么需要在表单字段中，例如`<input>`，`<textarea>`等，以便在提交表单时提交，要么数据可以在 <`input type="`隐藏"`> 字段中。

*   您的表单需要将方法设置为`POST`（虽然`GET`也可以，但这不是最佳实践_

*   您将在`$_POST`超全局中找到所有表单数据。

# c# - HeaderText Datagridgridview 对齐方式

> ID：10914875
> 
> 赞同：2
> 
> 时间：2012-06-06T13:10:15.700
> 
> 标签：c#, winforms, visual-studio-2010, datagridview

![标题](../Images/f186f51d1a0c013f9f8359ebdb65fa23.png)

我在 datagridview 中有很多标题，并且 HeaderText 很长，例如 4 个单词。所以 Datagridcell 变大了。我想把这4个字拆开，在下面一一放上，以减小大小。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.headertext.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.headertext.aspx)

我尝试检查上面的链接，但我无法成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:26:01.753

试试这个：

```
dataGridView1.Columns[0].HeaderText = "VeryLong " + "LongLong" + Environment.NewLine + "LongLongLong"; 
```

`Environment.NewLine`换行

![结果：](../Images/e303bfd62284380278929b8188b4baa1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:36:57.497

```
dataGridView.ColumnHeadersHeightSizeMode = 
    DataGridViewColumnHeadersHeightSizeMode.AutoSize;

foreach (DataGridViewColumn column in dataGridView.Columns)
{
    column.HeaderCell.Style.WrapMode= DataGridViewTriState.True;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:24:28.823

**第一个选项：**如果您正在寻找包装文本，您可以使用 CSS 来实现。将该类应用于您的数据网格标题。

允许长单词能够中断并换行到下一行：

```
.wrapText {word-wrap:break-word;} 
```

或者

```
.wrapText {word-wrap:normal;} 
```

normal - 只在允许的断点处断词 break-word - 允许破坏不可破坏的词

**第二个选项：** 您可以使用数据网格“HeaderStyle”标签：

```
 <HeaderStyle Wrap="True"  /> 
```

# undefined - Armv7 的未定义符号 (SBApplicationController.h)

> ID：10914876
> 
> 赞同：2
> 
> 时间：2012-06-06T13:10:20.603
> 
> 标签：undefined, jailbreak, tweak, springboard

是的，是的，我知道这个问题已经被问过一千次了！让我解释一下我的情况，我正在进行越狱调整，我需要使用方法 [SBApplicationCenter sharedInstance]。所以我`#import<SpringBoard/SBApplicationController.h>`。奇怪的是它确实导入了！为了检查这一点`Class SBApplicationController = objc.getClass("SBApplicationController")`，我返回了一些警告，其中一个警告类似于“SBApplicationController 已经定义，以不同的方式重新定义”。此外，当我单击“SBApplicationController”并执行“跳转到定义”时，它会将我带到“SBApplicationController.h”。在有人建议我“将它链接到我的二进制文件”之前，我不能这不是一个框架，这是转储的头文件。（而且我尝试只链接 SBApplicationCenter.h，这显然不起作用）。任何帮助都会很棒。

```
#import <SpringBoard/SBApplication.h>
#import <SpringBoard/SBApplicationController.h>

SBApplication* app = [[SBApplicationController sharedInstance] applicationWithDisplayIdentifier:@"com.yourcompany.appname"];
NSString *notificationIdentifier = app.bundleIdentifier; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:19:23.650

好的，我修复了它并使用了：

类 $SBApplicationController = (objc_getClass("SBApplicationController"));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T04:17:28.693

我知道这是一个老问题，但是如果您使用徽标，则可以更好地解决此答案。您可以使用

```
SBApplicationController *apc = [%c(SBApplicationController) sharedInstanceIfExists]; 
```

# ios - 为了在 VoiceOver 开启时调用 accessibilityIncrement/accessibilityDecrement，我需要做些什么特别的事情吗？

> ID：10914879
> 
> 赞同：4
> 
> 时间：2012-06-06T13:10:28.770
> 
> 标签：ios, accessibility

我确保我正在构建的应用程序是可访问的，并且大部分时间都在享受它。但是，我试图让`accessibilityIncrement`/`accessibilityDecrement`工作无济于事。

我有一个子类，`UIView`我正在重写`accessibleTraits`返回`[super accessibleTraits] | UIAccessibilityTraitAdjustable;`并且我已经实现了

在所有其他方面，当 VoiceOver 开启时视图响应良好，但`UIAccessibilityAction`我似乎能够使用 3 根手指向上/向下滑动的唯一方法是`accessibleScroll`.

有人遇到过这种情况么？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:15:11.077

您的描述看起来是正确的：您需要做的就是设置`UIAccessibilityTraitAdjustable`然后实施`accessibilityIncrement`and `accessibilityDecrement`。通常的技巧是 Apple 的文档暗示您在视图控制器上执行此操作 - 您不应该在视图本身上实现它们。

这反过来意味着您需要一个委托协议或其他一些与您的视图控制器一起使用的回调机制来将更改传达给您的模型（以及您的视图的其他部分）。所以：”

```
@interface MyAdjustableView : UIView

@end

@implementation MyAdjustableView

- (UIAccessibilityTraits)accessibilityTraits; {
    return [super accessibilityTraits] |  UIAccessibilityTraitAdjustable;

}

- (void)accessibilityIncrement {
    NSLog(@"increment");
}

- (void)accessibilityDecrement {
    NSLog(@"decrement");

}

@end 
```

应该管用。委托样板文件作为练习。

# java - 如何使用 Java 从 Web 服务中保存大文件？

> ID：10914881
> 
> 赞同：0
> 
> 时间：2012-06-06T13:10:32.533
> 
> 标签：java, xml, web-services, inputstream

我必须调用一个以 xml 形式返回大量数据的 rest web 服务。数据大小约为490m。每次我尝试调用该服务时，我都会内存不足。我要做的就是将此数据写入文件。

有没有办法以小块读取和写入数据以避免内存不足？

这是我尝试过的；

```
public class GetWs {

   private static String url ="http://somewebservice";
   public static void main(String[] args) {

    InputStream in;
    OutputStream out;
    try {
          out = new FileOutputStream("testoutfile.txt");
          in = new URL(url).openStream();
          int b;
          do {
               b = in.read();
               if (b != -1) {
            out.write(b);
                 out.flush();
               }
           } while (b != -1);
            in.close();out.close();     
    } catch (Exception e) {
        e.printStackTrace();
     }

   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:12:10.987

尝试压缩和流式传输到文件输出流，最好使用 NIO。

如果您必须解析和验证 XML，请尝试使用 STAX 解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:18:20.753

如果您真的只想将该 URL 的内容下载到文件中，请尝试使用[Google Guava](http://code.google.com/p/guava-libraries/)，它是非常棒的辅助方法：

```
URL url = ...
File file = ...
ByteStreams.copy(
    Resources.newInputStreamSupplier(url),
    Files.newOutputStreamSupplier(file)); 
```

这使您免于编写另一个具有适当异常处理的复制循环。甚至不需要关闭任何流，[`ByteStreams.copy()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/ByteStreams.html)它会为您完成。

如果要将数据存储为 UTF-16，请使用以下内容：

```
Charset charsetFromServer = ...; // See notes below.

CharStreams.copy(
    Resources.newReaderSupplier(url, charsetFromServer),
    Files.newWriterSupplier(file, Charsets.UTF_16)); 
```

有几种设置方法`charsetFromServer`：

*   如果您可以信任服务器*始终*使用相同的字符集，请通过使用或 Guava类`Charset.forName(String)`中的常量之一手动设置它。`Charsets`但是，要非常非常确定服务器永远不会使用任何其他编码，否则会中断。

*   更复杂的方法是通过查看`Content-Type`标头来确定服务器在运行时使用的字符编码。我建议你看看[Apache 的 HttpClient](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.httpcomponents/httpcore/4.2/org/apache/http/entity/ContentType.java#ContentType.getOrDefault%28org.apache.http.HttpEntity%29)是如何做到的，或者只是使用 HttpClient 开始，让它像`ContentType.getOrDefault(response.getEntity()).getCharset()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T13:20:30.117

如果您真的只是使用输入流，只需使用

```
byte[] buff = new byte[5000];
int num = 1;
while(num>1){
   num = inputStream.read(buff);
   outputStream.write(buff,0,num);
} 
```

虽然您需要添加一些代码来检测何时到达文件末尾~~~（依赖于输入流的实现）~~~编辑不，你不会，并修复了一些代码

# ravendb - 使用根据旧值计算的值批量更新属性

> ID：10914885
> 
> 赞同：1
> 
> 时间：2012-06-06T13:10:50.300
> 
> 标签：ravendb

是否可以（以及如何）使用旧值作为新值的一部分来更新属性？

伪 SQL 等价物将是

```
UPDATE File
SET Path = @newDir + SUBSTRING(Path, LENGTH(@oldDir))
WHERE Path LIKE @oldDir + '%' 
```

作为一个具体的例子（@oldDir = /pics/，@newDir = /images/）

```
/pics/1.jpg => /images/1.jpg
/pics/2.jpg => /images/2.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:57:24.940

Mika，不，使用 Patch API 是不可能的。您必须自己查询/保存这些文档。

# iphone - 用 AVAudioRecorder 录制 WAV 格式文件？

> ID：10914888
> 
> 赞同：3
> 
> 时间：2012-06-06T13:10:55.303
> 
> 标签：iphone, ios, avaudiorecorder

我正在尝试使用以下设置使用 AVAudiorecorder 录制 wav 文件。创建的文件在我的 Mac 和 iPhone 上可以正常播放，但是当我将它邮寄到黑莓设备并尝试从那里播放时，它说格式不受支持..我可能做错了什么？我相信我在初始化录音机的设置时遗漏了一些东西，所以我只发布设置字典

```
NSDictionary *settings = [[NSDictionary alloc] initWithObjectsAndKeys:
                                 [NSNumber numberWithFloat: 44100.0],AVSampleRateKey,
                                 [NSNumber numberWithInt: kAudioFormatLinearPCM],AVFormatIDKey,// kAudioFormatLinearPCM
                                 [NSNumber numberWithInt:16],AVLinearPCMBitDepthKey,
                                 [NSNumber numberWithInt: 2], AVNumberOfChannelsKey,
                                 [NSNumber numberWithBool:NO],AVLinearPCMIsBigEndianKey,
                                 [NSNumber numberWithBool:NO],AVLinearPCMIsFloatKey,  
                                 [NSNumber numberWithInt: AVAudioQualityMedium],AVEncoderAudioQualityKey,nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-07-01T13:05:11.813

**在2021 年**使用*swift 5*更容易实现这一目标，

```
 let fileURL: URL = {
            let src = "abc.wav"
            return FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)[0].appendingPathComponent(src)
       }()

       let recordSettings: [String : Any] = [AVFormatIDKey: Int(kAudioFormatLinearPCM),
                                      AVSampleRateKey: 44100.0,
                                      AVNumberOfChannelsKey: 1,
                                      AVEncoderAudioQualityKey: AVAudioQuality.high.rawValue ]

        do {
            audioRecorder = try AVAudioRecorder(url: fileURL, settings: recordSettings)
            audioRecorder?.prepareToRecord()
        } catch {
            print("Error creating audio Recorder. \(error)")
        } 
```

# jquery - Jquery - 如何从多个选择器中找到 nonEmpty 字段，将值发送到另一个字段

> ID：10914892
> 
> 赞同：1
> 
> 时间：2012-06-06T13:11:24.823
> 
> 标签：jquery

请帮忙，我不太确定如何处理这个问题：我有一个应用程序，其中客户端有几个包含多个字段的部分。有时会出现相同的字段。例如，“**数量**”或“**颜色**”可能出现在三个、四个或更多部分中。

当提交 web 表单时，发送到另一端的值是空的，因为下一个为空的 qty 字段将覆盖该值，从而在另一端产生一个空/null 值。[另一端只有一个数量字段]

由于他们想要维护的这个应用程序的结构，我想要一种清晰的方式来使用 jquery 说/执行以下操作：

获取字段#quantityOne,#quantityTwo,#quantityThree，确定其中有一个值，取该值并将其放置在隐藏字段 finalQty 中。

有人可以告诉我如何做到这一点吗？

**添加一个注释以进行澄清：**

> 用户将只填写一个部分，因此只填写一个数量字段。因此，如果我将 555 放入 qtyField #1，则应将 555 复制到 finalQty，如果我将 35 放入 qtyField #2，则应将 35 复制到 finalQty

[我的代码](http://jsfiddle.net/justmelat/4ruh2/)

**html/jquery：**

```
<fieldset id="sectionOne" name="sectionOne">
<legend class='legendHdrs' >Section One</legend>
Name: <input type="text" name="nameOne" id="nameOne" class="name" /><br />
Quantity: <input type="text" name="quantityOne" id="quantityOne" class="quantity"/>
    </fieldset><br /><br />

<fieldset id="sectionTwo">
<legend>Section Two</legend>
Name: <input type="text" name="nameTwo" id="nameTwo" class="name" /><br />
Quantity: <input type="text" name="quantityTwo" id="quantityTwo" class="quantity"/>
</fieldset><br /><br />

<fieldset  id="sectionThree">
<legend>Section Three</legend>
Name: <input type="text" name="nameThree" id="nameThree" class="name" /><br />
Quantity: <input type="text" name="quantityThree" id="quantityThree" class="quantity"/>
</fieldset>
<hr>

Final Qty: <input type="text" name="finalQty" id="finalQty" class="finalQty"/>
 <input type="button" value="Add Qty" id="addQty">
</form>​

    $(document).ready(function() 
{
    $('#addQty').on('click', function()
            {
            var holdval;
        $('#quantityOne,#quantityTwo,#quantityThree').each(function() 
                    {
                        if($(this).val() !== '')
                            {
                                holdval = $(this).val() 
                            }
                    });
        $('#finalQty').val(holdval);
            });

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:16:04.520

### 根据编辑

```
$('#addQty').on('click', function(){
       $('.quantity').each(function(){
            var val = $.trim( this.value );
            if(val){
                $('#finalQty')val(val);
                break;
            } 
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:22:11.490

使用类并循环遍历它可能会更好，而不是在 jquery 选择器中列出每个节点的 id。

```
 $('#addQty').on('click', function(){
        $.each($('.quantity'), function(){
            if($(this).val() !== ''){
                //do something
            }
        });
    }); 
```

# t4 - Entity Framework 5.0 EntityObject Generator 在 Visual Studio 2012 RC 中不可用？

> ID：10914894
> 
> 赞同：2
> 
> 时间：2012-06-06T13:11:27.940
> 
> 标签：t4, entity-framework-5, visual-studio-2012

从 social.msdn.microsoft.com 继承...

[http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/4993d0bf-94e8-4d14-aff1-3458b4ad467f?prof=required](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/4993d0bf-94e8-4d14-aff1-3458b4ad467f?prof=required)

**原帖**

*我尝试将项目从 2010 EF 4.3.1（修改后的 EntityObject 生成器模板）迁移到 vs 2012 rc、ef 5.0 rc 和 .Net 45 rc。痛苦的是，我的旧 T4 模板不再起作用。我在哪里可以获得正确的模板以将其迁移到 EF 5.0？我可以编译旧项目，但在启动应用程序后，我收到“检测到不同方案”的异常。*

**我的贡献，仍未解决**

EntityObject 代码生成模板在“干净”机器上的 VS 11 Beta 中可用，所以我认为这是一个升级问题/冲突，可能与之前安装了 EF 4.2 June 2011 CTP 有关（尽管卸载）。

*   VS 2012 修复 - 没有解决问题
*   VS 2010/2012 RC 卸载/重新安装 - 没有解决问题
*   VS 2012 RC 安装在干净的机器上 - 没有时间 atm

**截图**

[添加代码生成模板时我期望看到的内容](http://i.stack.imgur.com/JzQ09.png)

[添加代码生成模板时看到的内容](http://i.stack.imgur.com/mcSc0.png)

[扩展库中只有 DbContext](http://i.stack.imgur.com/FM9JE.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T22:00:56.660

我们正在完成对 EntityObject 和 Self-Tracking Entities 代码生成模板的 VSIX 版本的验证。如果验证顺利，这些应该很快就会出现在 Visual Studio 库（或“添加代码生成项”菜单的在线选项卡）中。上传后我会在这里回复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T23:20:40.707

很抱歉让这些人久等了。这些模板现在在 Visual Studio 库中可用。有关详细信息，请参阅此页面 - [http://msdn.microsoft.com/en-US/data/JJ613116#EntityObject](http://msdn.microsoft.com/en-US/data/JJ613116#EntityObject)

〜罗文

# c - double* (*p[3]) (void* (*)()); 是什么意思？意思是？

> ID：10914897
> 
> 赞同：8
> 
> 时间：2012-06-06T13:11:28.513
> 
> 标签：c, pointers

我很难理解以下声明的含义。这是申报标准吗？

```
double* (*p[3]) (void* (*)()); 
```

谁能帮我理解这个声明的含义？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T13:58:32.287

阅读毛茸茸的声明的规则：找到最左边的标识符并向外工作，记住它`()`并`[]`在之前绑定`*`，因此`T *a[N]`是指针数组，是指向数组的指针，是`T`返回指向指针的函数，并且是指向 a 的指针返回 T 的函数。由于函数原型可能会省略参数名称，因此您可能会看到类似or的内容。含义大致相同¹，只是假设有一个长度为 0 的标识符。 `T (*a)[N]``T``T *f()``T``T (*f)()``T *[N]``T (*)()`

因此，

```
 p                      -- p
          p[3]                   -- is a 3-element array
         *p[3]                   -- of pointers
        (*p[3]) (           )    -- to functions
        (*p[3]) (      (*)())    --   taking a pointer to a function
        (*p[3]) (    * (*)())    --   returning a pointer
        (*p[3]) (void* (*)())    --   to void
      * (*p[3]) (void* (*)())    -- returning a pointer
double* (*p[3]) (void* (*)());   -- to double 
```

重要的一点是，您声明`p`的是 的*数组*，`...`而不是返回的函数`...`。

这样的野兽在实践中会是什么样子？好吧，首先，您需要指向三个函数。这些函数中的每一个都接受一个参数，该参数是一个指向函数的指针，该函数返回一个指向 void 的指针：

```
double *foo(void *(*)());
double *bar(void *(*)());
double *bletch(void *(*)());

double *(*p[3]) (void *(*)()) = {foo, bar, bletch}; 
```

每个`foo`,`bar`和`bletch`都会调用传递给它的函数并以某种方式返回指向`double`.

您还需要定义一个或多个满足 、 和 中的每一个的参数类型`foo`的`bar`函数`bletch`：

```
void *blurga() {...} 
```

所以如果你`foo`直接打电话，你会这样称呼它

```
double *pv;
...
pv = foo(blurga); 
```

所以我们可以想象一个像

```
double *pv = (*p[0])(blurga); 
```

* * *

^(1 - 不同之处在于，在函数参数声明的上下文中，`T a[]`和;`T a[N]`相同 `T *a`在所有三种情况下，`a`是指向 的*指针* `T`，而不是 的数组`T`。请注意，*这只*适用于函数参数声明。因此，`T *[]`将与 相同`T **`。)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-06T13:12:56.510

只需使用[http://cdecl.org](http://cdecl.org)：

> 将 p 声明为指向函数的指针数组 3（指向函数的指针，返回指向 void 的指针）返回指向 double 的指针

有关详细信息，请参阅此 MSDN 文章：[*解释更复杂的声明符*](http://msdn.microsoft.com/en-us/library/1x82y1z4.aspx)。

但是 typedefs 会有所帮助：

```
typedef void *(*foo)();         // foo is a function-pointer type
typedef double *(*bar)(foo);    // bar is also a function-pointer type
bar p[3]; 
```

（显然，使用适当的名称代替`foo`and `bar`！）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T13:13:12.063

你`p`是一个*由 3 个指针组成的数组，指向*一个返回指针的`double`函数，并将指向另一个返回`void`指针且不带参数的函数的指针作为参数。

但是，**不要使用这种语法**，而是尝试使用 typedef。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T13:14:06.377

它是函数指针数组（大小为 3），它返回指向 double 的指针并将另一个函数指针作为参数。

指针可以存储在数组 `double *(func)(void* (*)())`
中的函数类型： 指针可以作为参数传递给 func 的函数类型：`void *(func1)(void)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T13:58:49.390

“有一种称为‘顺时针/螺旋规则’的技术，它使任何 C 程序员都能在头脑中解析任何 C 声明！”

顺时针螺旋规则 - [http://c-faq.com/decl/spiral.anderson.html](http://c-faq.com/decl/spiral.anderson.html)

# ruby-on-rails - Ruby - 更优雅地推送到数组

> ID：10914922
> 
> 赞同：0
> 
> 时间：2012-06-06T13:13:00.987
> 
> 标签：ruby-on-rails, arrays, append, each

```
valrow = [ 0, 0.125, 0.25, 0.375, 0.5, 0.625, 0.75, 0.875]
lblrow = [48,  8539,  188,  8540, 189,  8541,  190,  8542]
opts = []
(0..7).each {|i| opts.push([lblrow[i].chr(Encoding::UTF_8), valrow[i]]) } 
```

最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:15:27.583

采用`Array#zip`

```
valrow = [ 0, 0.125, 0.25, 0.375, 0.5, 0.625, 0.75, 0.875]
lblrow = [48,  8539,  188,  8540, 189,  8541,  190,  8542]
opts = lblrow.map { |c| c.chr(Encoding::UTF_8) }.zip(valrow) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:17:29.947

或使用`collect.with_index`：

```
valrow = [ 0, 0.125, 0.25, 0.375, 0.5, 0.625, 0.75, 0.875]
lblrow = [48,  8539,  188,  8540, 189,  8541,  190,  8542]
opts = valrow.collect.with_index { |val,index| [lblrow[index].chr(Encoding::UTF_8), val] } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:01:44.483

在这种情况下，您可以使用[Enumerator](http://apidock.com/ruby/Enumerator)对象：

```
value_enum = valrow.to_enum
opts = lblrow.map { |item| [item.chr(Encoding::UTF_8), value_enum.next] } 
```

# java - Java：将类扩展为数组

> ID：10914928
> 
> 赞同：4
> 
> 时间：2012-06-06T13:13:27.367
> 
> 标签：java, arrays, extends

快速新手问题：我想将一个类扩展为一个数组，就像这样

```
public class Map extends Item[][]
{

} 
```

这可能吗，我是不是走错了路？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T13:15:39.733

数组是奇怪的野兽。它们有一些属性，`length`但它们不是一个类，所以你不能像你尝试的那样扩展它们。

我认为你最好使用组合，即创建一个包含一个`Item[][]` 然后扩展该类的类（如果需要，拥有一个类可能就足够了）

# c# - 使用 C# 进行 RS-232 通信

> ID：10914932
> 
> 赞同：0
> 
> 时间：2012-06-06T13:13:45.433
> 
> 标签：c#, serial-port, serial-communication, tcomport

大家好，我想使用 c#，VS10 通过 rs-232 串行发送/接收数据......我这样做的代码如下......

```
SerialPort sp = new SerialPort();
//predefined values are baud rate =9600, parity=none, databits=8,stopbit=1 
//for sending data I used a textbox same name itself and a button "sendbutton" which coded as follow
try
{
    sp.WriteLine(textBox.Text);
    textBox.Text = "";
}
catch (System.Exception ex)
{
    baudRatelLabel.Text = ex.Message;
}
//for receiving data code is as follows 
try
{
    textBox.Text = "";
    textBox.Text = sp.ReadLine();
}
catch (System.Exception ex)
{
    baudRatelLabel.Text = ex.Message;
} 
```

我将此应用程序安装在两台电脑上，并使用 rs232（均为女性端）进行通信。但是我通过发送按钮从一台电脑发送的数据没有被另一台电脑接收到......我现在该怎么办......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:20:47.403

我要做的第一件事是使用不同的应用程序来读取数据。例如，超级终端。尝试确定您的应用程序是否正在发送，然后，一旦您发送它，请尝试确定它是否正确接收数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:24:38.970

在调试之前。任何硬件交互的第一条规则 - 您应该验证硬件和操作系统是否正常工作。两台机器都应该能够首先与其他设备或调制解调器或其他 RS232 设备进行通信。如果端口都正常工作，那么您应该首先尝试在一侧使用已知程序调试您的程序。

我会使用诸如[http://realterm.sourceforge.net/](http://realterm.sourceforge.net/)之类的通讯程序作为知情方。

我花了 2 周时间调试一个程序，当电缆中有干接头时，我学到了这个教训！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:27:40.160

`Open`在尝试发送任何内容之前调用该方法。该方法的[MSDN 文档](http://msdn.microsoft.com/de-de/library/system.io.ports.serialport.open.aspx)`Open`甚至有示例代码。

# php - php/mongodb 会话管理器，session_set_save_handler() 问题

> ID：10914933
> 
> 赞同：2
> 
> 时间：2012-06-06T13:13:46.080
> 
> 标签：php, session, mongodb, session-set-save-handler

我正在使用一个 PHP 会话管理器类来处理 MongoDB 中的用户会话，但它不起作用，我终生无法弄清楚原因。会话变量设置成功，但不会持续到其他页面。与 MongoDB 的连接不是问题。我已经确定这个问题与 . `session_set_save_handler`，因为如果我注释掉这个函数，原生 PHP 会话处理工作正常。

在此先感谢您的帮助。

```
...
require('database.class.php');

class SessionManager {

const COLLECTION = 'sessions';
const SESSION_TIMEOUT = 600;
const SESSION_LIFESPAN = 3600;
const SESSION_NAME = 'mongosessid';
const SESSION_COOKIE_PATH = '/';
const SESSION_COOKIE_DOMAIN = '';

private $_mongo;
private $_collection;
private $_currentSession;

public function __construct() {
    $this->_mongo = DBConnection::instantiate();
    $this->_collection = $this->_mongo->getCollection(SessionManager::COLLECTION);

    register_shutdown_function('session_write_close'); 

    session_set_save_handler(
        array(&$this, 'open'),
        array(&$this, 'close'),
        array(&$this, 'read'),
        array(&$this, 'write'),
        array(&$this, 'destroy'),
        array(&$this, 'gc')
    );

    //Set session garbage collection period
    ini_set('session.gc_maxlifetime', SessionManager::SESSION_LIFESPAN);

    //Set session cookie config
    session_set_cookie_params(
        SessionManager::SESSION_LIFESPAN,
        SessionManager::SESSION_COOKIE_PATH,
        SessionManager::SESSION_COOKIE_DOMAIN
    );

    //Replace 'PHPSESSID' with 'mongosessid' as the session name
    session_name(SessionManager::SESSION_NAME);
    session_cache_limiter('nocache');

    session_start();

}   

public function open($path, $name) {
    return true;
}

public function close() {
    return true;
}

public function read($sessionId) {
    $query = array('session_id' => $sessionId,
                    'timedout_at' => array('$gte' => time()),
                    'expired_at' => array('$gte' => time() - SessionManager::SESSION_LIFESPAN)
                    );

    $result = $this->_collection->findOne($query);
    $this->_currentSession = $result;

    if (!isset($result['data'])) {
        return '';
    }

    return $result['data'];
}

public function write($sessionId, $data) {
    $expired_at = time() + self::SESSION_TIMEOUT;
    $new_obj = array('data' => $data,
                    'timedout_at' => time() + SessionManager::SESSION_TIMEOUT,
                    'expired_at' => (empty($this->_currentSession)) ? time() + SessionManager::SESSION_LIFESPAN : $this->_currentSession['expired_at']
                    );
    $query = array('session_id' => $sessionId);

    $this->_collection->update($query,
                                array('$set' => $new_obj),
                                array('$upsert' => TRUE)
                                );
}

public function destroy($sessionId) {
    $this->_collection->remove(array('session_id' => $sessionId));
    return TRUE;
}

public function gc() {
    $query = array('expired_at' => array('$lt' => time()));
    $this->_collection->remove($query);
    return TRUE;
}

}

$session = new SessionManager();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:34:40.697

`write`在对象销毁后调用。当您使用它时，您的`$_mongo`对象已经被销毁。

使用[`session_write_close()`](http://php.net/manual/en/function.session-write-close.php)with[`register_shutdown_function()`](http://php.net/manual/en/function.register-shutdown-function.php)来解决这个问题。

```
register_shutdown_function('session_write_close'); 
```

In addition to this (because this was almost certainly happening), the options for the update query do not begin with a `$` (a mistake I've made myself numerous times), you need `upsert` not `$upsert`

# maven - 如何避免 Maven 从公共存储库请求私有工件？

> ID：10914936
> 
> 赞同：4
> 
> 时间：2012-06-06T13:13:50.050
> 
> 标签：maven

我首先有一个带有我自己的存储库的 pom 文件，然后是一组公共存储库（repo1、repo2、java.net 等）。让我们假设所有都是“发布”存储库。

我的问题是 maven 向所有存储库发出请求以查找我们的内部 jar，要么是第一次下载 jar，要么验证 metadata.xml，如果版本控制是“（1.0.0,1.1.0] 之类的范围） ”。

如何应用某种过滤器来声明诸如 groupID foo.bar 之类的内容仅属于存储库“foo”。

这种情况困扰我有两个原因：一是向公共服务器发送这些请求是浪费带宽（当服务器速度慢时，它只会减慢一切），二是将我们内部包的名称暴露在外界的日志文件。

我不想部署本地代理或类似的东西，只想让某个 groupID（或列表）始终转到某个存储库。即使对于非私有工件，它也有助于指定某个工件在某个存储库上，对于那些不在公共通用工件（repo.maven、download.java）上的工件，从而避免那些多余的请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:19:08.180

我们使用内部 Nexus 实例并在那里配置了这样的东西。Nexus 有它的`Administration -> Routing`选项，您可以在其中定义掩码`groupId`并指出应该使用哪些存储库。

当然，它需要内部 Nexus 成为开发人员使用的唯一存储库，然后配置任何外部存储库以进行代理或镜像。

# javascript - 如何使用 HTML5 音频计算一组曲目的总时长？

> ID：10914937
> 
> 赞同：3
> 
> 时间：2012-06-06T13:13:49.817
> 
> 标签：javascript, html, audio

我正在构建一个自定义音频播放器（现在是计划阶段:)），但我一直坚持这一点。我想在开始时计算我所有歌曲的总时长。我知道我需要加载每首歌曲才能知道它的持续时间。例如，如果我为第一首歌曲设置 src 属性，我会使用加载的元数据事件处理程序获得它的持续时间。但是如何得到它们的总和呢？我需要单独加载每个吗？我是否需要为列表中的每首歌曲设置音频元素的 src 属性？任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-12T13:48:05.087

我昨天来到这里是因为我需要解决这个完全相同的问题，当然，StackOverflow 是搜索结果的首位——即使对于这个四年前未回答的问题也是如此。唉，我对原生 JS 解决方案的搜索被证明是徒劳的，尽管我在这里和那里尝试了几种不同的建议，所以这就是我最终自己想出的......

```
function tracksTotalLength(Tracklist) {
    var tempAudio = document.createElement('audio'),
        L = Tracklist.length,
        i = 0, // iterator
        TTL = 0, // TotalTrackLength
        flag = true;

    // set media-type and mute (belt and braces)
    tempAudio.type = 'audio/mpeg';
    tempAudio.muted = true;

    tempAudio.addEventListener(
        'durationchange',
        function(e) {
            TTL += e.target.duration;
            /* DEBUG ONLY */ console.log('TTL:',TTL);
            recursiveUpdater(i++);
        },
        false
    );

    function recursiveUpdater(ii) {
        if (!isNaN(TTL) && ii < L) {
            tempAudio.src = Tracklist[ii];
            // fires recursiveUpdater()
            // via 'durationchange' event
        } else {
            // sometimes not all values are caught
            // and TTL = NaN, so
            // reset and have another run at it
            if (isNaN(TTL) && flag) {
                i = 0;
                flag = false;
                recursiveUpdater(i);
            } else (
                // but you can't recurse all day so
                // remove tempAudio
                tempAudio = null;
                // if it hasn't caught return false
                return (!isNaN(TTL) : TTL : false);
            }
        }
    }
    return recursiveUpdater(i);
}

var tracks = [
    'path/to/track01.mp3',
    'path/to/track02.mp3',
    'path/to/track03.mp3',
    /*...etc... */ 
];
var totalLength = tracksTotalLength(tracks);
//=> totalLength = seconds (float) or false 
```

该函数`tracksTotalLength()`以秒为单位返回列表的总时间，然后可以根据这个经典[的 StackOverflow 答案](https://stackoverflow.com/a/6313008/4746328)将其四舍五入为 hh:mm:ss 。

加载或更改元数据时会触发“durationchange”。[媒体活动 (MDN)](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events)上的更多信息

在 Lubuntu 14.04 上的最新 Firefox 和 Chromium 浏览器中进行了测试，跟踪列表包含 5-50 个项目。

希望这可以帮助某人，或者至少鼓励一个真正的 JS 大师想出一个更好的例程。

# c# - 接受委托函数的扩展方法

> ID：10914947
> 
> 赞同：1
> 
> 时间：2012-06-06T13:14:19.747
> 
> 标签：c#, delegates, extension-methods

我仍在尝试围绕委托函数和扩展方法。我为`DropDownList`. 我想传递要在我的扩展方法中调用的函数，但出现错误`Argument type 'IOrderedEnumerable<KeyValuePair<string,string>>' is not assignable to parameter type 'System.Func<IOrderedEnumerable<KeyValuePair<string,string>>>'`

```
public static class DropDownListExtensions {
    public static void populateDropDownList(this DropDownList source, Func<IOrderedEnumerable<KeyValuePair<string, string>>> delegateAction) {
        source.DataValueField = "Key";
        source.DataTextField = "Value";
        source.DataSource = delegateAction;
        source.DataBind();
    }
} 
```

被这样称呼……

```
myDropDownList.populateDropDownList(getDropDownDataSource()); 
```

getDropDownDataSource 签名...

```
protected IOrderedEnumerable<KeyValuePair<string,string>> getDropDownDataSource() {
    StateInfoXmlDocument stateInfoXmlDocument = new StateInfoXmlDocument();
    string schoolTypeXmlPath = string.Format(STATE_AND_SCHOOL_TYPE_XML_PATH, StateOfInterest, SchoolType);
    var nodes = new List<XmlNode>(stateInfoXmlDocument.SelectNodes(schoolTypeXmlPath).Cast<XmlNode>());
    return nodes.Distinct().Select(x => new KeyValuePair<string, string>(x.Attributes["area"].Value, x.Attributes["area"].Value)).OrderBy(x => x.Key);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T13:16:31.877

您应该在调用时删除`()`after ：`getDropDownDataSource`

```
myDropDownList.populateDropDownList(getDropDownDataSource); 
```

编辑：方法组可以隐式转换为具有兼容签名的委托。在这种情况下`getDropDownDataSource`匹配的签名`Func<IOrderedEnumerable<KeyValuePair<string,string>>>`所以编译器为你应用转换，有效地做

```
Func<IOrderedEnumerable<KeyValuePair<string,string>>> func = getDropDownDataSource;
myDropDownList.populateDropDownList(func); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:20:53.760

是的，在`myDropDownList.populateDropDownList(getDropDownDataSource());`您调用的行`getDropDownDataSource()`中返回 a `IOrderedEnumerable<KeyValuePair<string,string>>`。所以，编译器说你不能转换`IOrderedEnumerable<KeyValuePair<string,string>>`为 Func。要传递 Func，您可以删除括号以便传递这样的指针`myDropDownList.populateDropDownList(getDropDownDataSource);`，也可以直接传递数据源代码：

```
myDropDownList.populateDropDownList(() => {
    StateInfoXmlDocument stateInfoXmlDocument = new StateInfoXmlDocument();
    string schoolTypeXmlPath = string.Format(STATE_AND_SCHOOL_TYPE_XML_PATH, StateOfInterest, SchoolType);
    var nodes = new List<XmlNode>(stateInfoXmlDocument.SelectNodes(schoolTypeXmlPath).Cast<XmlNode>());
    return nodes.Distinct().Select(x => new KeyValuePair<string, string>(x.Attributes["area"].Value, x.Attributes["area"].Value)).OrderBy(x => x.Key);
} 
```

但这有点难看。:-)

# iphone - iPhone/iPad/iPod 机型版本

> ID：10914950
> 
> 赞同：0
> 
> 时间：2012-06-06T13:14:26.890
> 
> 标签：iphone, ios, model, version

出于某种原因，我需要知道运行我的应用程序的设备的型号版本。我不需要知道设备上运行的 iOS 版本，而是设备的版本，例如：“iPhone 3G”、“iPhone 4S”、“iPad 2”、...

UIDevice 类似乎没有提供以下信息：识别设备和操作系统名称属性 systemName 属性 systemVersion 属性模型属性本地化模型属性 userInterfaceIdiom 属性 uniqueIdentifier 属性 iOS 5.0 中已弃用

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:17:52.210

查看[UIDevice-Extension](https://github.com/erica/uidevice-extension/)：

> 向 UIDevice 添加功能以区分 iPod touch 1G 和 2G 等平台以及 iPhone

与`UIDevice-Hardware.h`类它可能得到：

```
- (NSString *) platform;
- (NSString *) hwmodel;
- (NSUInteger) platformType;
- (NSString *) platformString; 
```

# twitter-bootstrap - Boorstrap 在模态导航中的活动类不起作用？

> ID：10914951
> 
> 赞同：1
> 
> 时间：2012-06-06T13:14:31.563
> 
> 标签：twitter-bootstrap

如果我将导航菜单添加到模态表单中，则活动选项卡似乎未显示为活动状态。有什么建议么？

```
<div id="log_data" title="Log data" class="modal fade hide" >  
<div class="modal-header">
    <button class="close" data-dismiss="modal">&times;</button>
    <h3>Log data</h3>
</div>
<div class="modal-body">
    <div class="row">
        <div class="span2">
            <ul class="nav nav-tabs">
                <li id="ligraph" class="active"><a href="#">Graph</a></li>
                <li id="liraw"><a href="#">Raw</a></li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:22:04.883

显然，模态从选项卡中删除了活动类。当我使用 JQuery 的“on show”事件手动将类添加到选项卡时，它可以工作。

```
$("#log_data").on("show", function (){
    $("#ligraph").addClass("active");
}); 
```

# android - EditText 不接受数字输入

> ID：10914952
> 
> 赞同：0
> 
> 时间：2012-06-06T13:14:35.080
> 
> 标签：android, android-edittext

几天前我开始为 Adroid Phones 开发，我终于将我的第一个应用程序导出到我的智能手机。一切看起来都像模拟器，但是当我尝试输入数字（1、2、3、4 ...）时，它不起作用。

一开始我以为可能是因为inputType：

```
android:inputType="numberDecimal" 
```

但是后来我尝试将其删除以访问整个键盘。普通密钥有效，但仍然不接受任何数字。

这就是我为 EditText 声明 xml 的方式。

```
 <EditText 
        android:id="@+id/poids"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:hint="Entrez votre Poids"
        android:inputType="numberDecimal"
        android:layout_weight="1"
    /> 
```

注意：我在手机上运行 os 4.0.4，我正在为 2.3.3 开发应用程序，也许问题出在那儿？

编辑文本代码：

```
 EditText poids= (EditText)findViewById(R.id.poids)
    ...
    poids.setOnKeyListener(modifListener1);
    ....
    private OnKeyListener modifListener1 = new OnKeyListener(){

        public boolean onKey(View v, int keyCode, KeyEvent event) {
            result.setText(defaut);
            poids.getText().clear();
            return true;
        }

    }; 
```

应用图片：

![http://i.stack.imgur.com/oIxXy.png](../Images/f828fe20f0a144c57ea6ccaeb0d7f60b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T05:26:43.443

`EditText`不接受数字输入？

出于某种原因，除了键盘上数字键的任何输入值之外，模拟器不会尝试使用键盘顶部的数字键，即带有`(!@#)`符号的数字键，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:35:54.153

我找到了解决方案！

它在这里：

```
 public boolean onKey(View v, int keyCode, KeyEvent event) {
        result.setText(defaut);
        poids.getText().clear();
        return true;
    } 
```

我不知道为什么，但这会阻止在编辑文本中输入数字。起初我这样做是因为当我模拟手机时，我无法删除“提示”。

我只是试图完全删除与两者关联的两个类，一切都很好。

# java - 如何在 glassfish 服务器中找到活动线程？

> ID：10914957
> 
> 赞同：1
> 
> 时间：2012-06-06T13:15:00.750
> 
> 标签：java, web, load, glassfish, webserver

我正在尝试为我的应用程序制作负载均衡器。此负载均衡器会将请求从一台服务器重定向到另一台服务器。首先，主服务器检查自己的线程数和辅助服务器的线程数。然后它根据两个服务器的线程数决定哪个服务器将处理请求。

请帮助我找到如何找到 glassfish 服务器的负载。

# c# - 检测何时选中单选按钮

> ID：10914962
> 
> 赞同：0
> 
> 时间：2012-06-06T13:15:08.713
> 
> 标签：c#, asp.net

我有一个内置代码的表单。

我想要做的是检测单选按钮何时被选中，以及它何时被选中。

我有以下

```
RadioButton radio = new RadioButton() { ClientIDMode = System.Web.UI.ClientIDMode.Static, AutoPostBack=true, ID = "rbOther" + testEquipment.Id, GroupName = "grp" + testEquipment.Id, Checked = false };
radio.CheckedChanged += new EventHandler(radio_CheckedChanged); 
```

testEquipment 是存储一些数据的对象的实例。

```
tdBrandName.Controls.Add(new TextBox() { ClientIDMode = System.Web.UI.ClientIDMode.Static, ID = "txtBrandName" + testEquipment.Id, Text = serviceStationTestEquipment != null ? serviceStationTestEquipment.BrandName : string.Empty, Width = new Unit(300), Enabled = serviceStationTestEquipment != null ? serviceStationTestEquipment.Other : false });
tdBrandName.Controls.Add(new RequiredFieldValidator() { Display = ValidatorDisplay.Dynamic, ControlToValidate = "txtBrandName" + testEquipment.Id, Text = "Required field", ErrorMessage = "Test Equipment Tab: Field is required", CssClass = "validationerror", Enabled = serviceStationTestEquipment != null ? serviceStationTestEquipment.Other : false, ID = ID = "reqValidator" + testEquipment.Id }); 
```

然后，我想在单击单选按钮时禁用文本框和 requiredfieldvalidator。有三个即。无，默认，其他

选择其他类型时，文本框必须与所需的字段验证器一起启用。

```
void radio_CheckedChanged(object sender, EventArgs e)
    {
        RadioButton check = sender as RadioButton;

        if (check == null)
            return;

        string Id = check.ID.Replace("rbOther", "");

        TextBox text = check.Parent.Parent.FindControl(string.Format("txtBrandName{0}", Id)) as TextBox;

        text.Enabled = check.Checked;

        RequiredFieldValidator validator = check.Parent.Parent.FindControl(string.Format("reqValidator{0}", Id)) as RequiredFieldValidator;
        validator.Enabled = check.Checked;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:42:06.537

如果你习惯使用 jQuery，那么你可以试试这个：

```
<script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<script>
 $(function () {
     $("input[name$='grp']").click(function () {
         var value = $(this).val();
         id = value.replace("rbOther", "");
         $("#txtBrandName" + id).attr("disabled", "disabled");
         ValidatorEnable(document.getElementById("reqValidator" + id), false);
        //Write your code HERE
     });
 });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:15:31.497

这是示例案例。我在单选按钮列表中有 3 个项目，根据选择的值，我希望在标签上显示一条消息。

```
<asp:RadioButtonList ID="rbtnType" runat="server" RepeatDirection="Vertical">
<asp:ListItem Value="C">Contract </asp:ListItem>
<asp:ListItem Value="I">Independent </asp:ListItem>
<asp:ListItem Value="O">OutSource </asp:ListItem>
</asp:RadioButtonList>
 <br />
<asp:Label ID="lblLaborType" runat="server" ></asp:Label>

<script type="text/javascript">
 $(document).ready(function () {
    $("#<%=rbtnType.ClientID%>").change(function () {
        var rbvalue = $("input[@name=<%=rbtnType.ClientID%>]:radio:checked").val();
        if (rbvalue == "C") {           
            $('#<%=lblLaborType.ClientID %>').html('Do this');
        }
        else if (rbvalue == "I") {
            $('#<%=lblLaborType.ClientID %>').html('else this');
        }
        else if (rbvalue == "O") {
            $('#<%=lblLaborType.ClientID %>').html('or else this');
        }
    });
});  </script> 
```

# sql-server - 我可以安装 SQL Server 代理，但没有数据库实例吗？

> ID：10914966
> 
> 赞同：5
> 
> 时间：2012-06-06T13:15:15.380
> 
> 标签：sql-server, sql-server-agent

可以在没有数据库实例的情况下安装 Microsoft 的 SQL Server 代理吗？

（目的是减少到数据库的流量。我想把服务器代理放到另一台服务器上。）

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:16:51.093

SQL Server 代理需要将其数据（作业等）存储在 MSDB 数据库中。所以你需要一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T09:12:35.953

如果您的 SQL 代理确实导致了如此大量的 I/O，以至于它使用 MSDB 会降低整体服务器性能（我怀疑是这种情况，但如果您足够努力，一切皆有可能），那么您可以选择将 MSDB 数据文件移动到单独的磁盘。（不仅仅是同一磁盘上的单独逻辑驱动器，而是完全单独的磁盘）。

我希望在您达到这一点之前还有许多其他性能改进可能。将 TempDB 移动到另一个物理磁盘将是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-03T17:27:17.277

我的问题是类似的。如何使我的“实例”成为默认实例，这样我就不必使用实例名称来限定我的 sql 服务器。虽然，这不是完全相同的问题，但我被带到这里是为了寻找答案，其他人可能也是。此解决方案允许您仍然拥有多个实例，但定义默认实例。

为此，您需要将实例的 TCPIP 动态端口更改为默认的 1433 端口值。可以在此处找到有关使用 SQL Server 配置管理器的这个简单过程的详细信息：

[https://kohera.be/blog/sql-server/make-named-instance-look-like-default-instance/](https://kohera.be/blog/sql-server/make-named-instance-look-like-default-instance/)

# c# - 在 HTML5 画布/页面中实时流式传输音频？

> ID：10914972
> 
> 赞同：1
> 
> 时间：2012-06-06T13:15:31.207
> 
> 标签：c#, javascript, audio, canvas, live-streaming

我使用转换为 base64 字符串的 jpeg 图像创建了一个实时视频流，这些字符串通过 websockets 发送到 HTML5 画布。它工作得很好。我还捕获了鼠标光标/按钮和任何按键来模拟远程桌面。图像被捕获并发送到 C# 中的套接字。

我现在想以某种方式将实时音频流式传输到页面/画布，以便它具有远程桌面应用程序的所有功能。有谁知道我会怎么做以及使用哪种文件格式？是否可以将音频转换为 base64 字符串并以这种方式发送？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:44:19.647

尝试使用[网络音频 API](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)。

[Html5Rocks](http://www.html5rocks.com/en/tutorials/webaudio/intro/)上的描述和示例

受 Chrome 和 Safari 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:03:07.483

`audio`您可以使用html5 元素播放音频流。

要涵盖对大多数常用浏览器的支持，您必须以至少 2 种格式进行流式传输，例如 MP3 和 OGG。

![](../Images/64ff661ab1e9864515e5f9b7b6899059.png)

对于流式音频 (OGG/MP3)，您可以使用[Icecast 服务器](http://www.icecast.org/)。

`audio`以下是标签使用示例：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Audio tag test!</title>
    </head>
    <body>
        <audio autoplay="true">
            <source src="http://radio.hbr1.com:19800/ambient.ogg" type="audio/ogg" />
            <source src="http://stream1.gameowls.com:8000/bitwave.mp3" type="audio/mpeg" />
            Your browser does not support the audio element.
        </audio>
    </body>
</html> 
```

音频标签播放浏览器可以处理的第一个源。

# javascript - 使用 underscore.js 检查列表是否在 javascript 中排序

> ID：10914982
> 
> 赞同：9
> 
> 时间：2012-06-06T13:16:06.097
> 
> 标签：javascript, underscore.js

在 javascript (下划线) 中，如何测试数字列表是否已经排序？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-06T13:20:42.147

您可以使用`_.every`检查所有元素是否有序：

```
_.every(arr, function(value, index, array) {
  // either it is the first element, or otherwise this element should 
  // not be smaller than the previous element.
  // spec requires string conversion
  return index === 0 || String(array[index - 1]) <= String(value);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T13:18:58.757

一个简单的解决方案是简单地遍历列表，检查每个元素是否小于其下一个邻居：

```
function is_sorted(arr) {
    var len = arr.length - 1;
    for(var i = 0; i < len; ++i) {
        if(arr[i] > arr[i+1]) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T13:19:04.393

```
var last = undefined,
    sorted = true;
_.forEach(arr, function(val) {
    if(last !== undefined && val < last) sorted = false;
    last = val;
});
alert(sorted); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-07T09:33:04.820

我发现这个非常有用的[链接](https://gist.github.com/yorkie/7959685)。

```
/*
* check the array is sorted
* return: if sorted in ascending ->  1
*         if sorted in descending -> -1
*         not sorted  ->  0
*/

Array.prototype.isSorted = function() {
  return (function(direction) {
  return this.reduce(function(prev, next, i, arr) {
    if (direction === undefined)
      return (direction = prev <= next ? 1 : -1) || true;
    else
      return (direction + 1 ?
        (arr[i-1] <= next) : 
        (arr[i-1] >  next));
    }) ? Number(direction) : false;
  }).call(this);
}

var arr = [3,2,1,0];
arr.isSorted(); // Will return -1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-30T23:41:07.287

一个简单的es6代码：

```
const arr = [1, 2, 3]
const arr2 = [3, 2, 1]

function isSorted (arr) {
  return arr.slice(1).every((item, i) => arr[i] <= item)
}

console.log(isSorted(arr), isSorted(arr2))
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-05T20:38:40.743

*我在*纯js中找到了解决方案：

```
//Array is sorted
[1, 2, 3].every( (item, i, arr) => i < arr.length - 1 ? arr[i] < arr[i + 1] : arr[i] ); //true
[3, 2, 1].every( (item, i, arr) => i < arr.length - 1 ? arr[i] < arr[i + 1] : arr[i] ); //false

//Equolent
[1, 2, 3].every( (item, i, arr) => i > 0 ? arr[i] > arr[i - 1] : arr[i] < arr[i + 1] ); //true
```

# playframework-2.0 - 如何在 Play2 项目中包含本机库？

> ID：10914984
> 
> 赞同：2
> 
> 时间：2012-06-06T13:16:14.910
> 
> 标签：playframework-2.0

在一个应用程序中，我使用的是本机库（so/dll 文件）。在本地使用播放时，我只是将文件放在 /lib 文件夹中，这似乎很好用。

我的问题出在`play dist`命令上。仅包含 .jar，并且由于缺少本机库而出现执行错误。

如何将这些文件包含在`play dist`命令生成的 zip 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:26:06.237

我认为您不能轻松地将库打包到 dist 包中。我看到一些工作

1.  将它们重命名为 dll.jar 或 so.jar，以便它们成为 dist 包的一部分。
2.  创建您自己的 sbt-task 来为您打包。
3.  将 dll/so 打包在一个单独的 zip 中，并与一个特殊的启动脚本一起解压 dist 并将 dll/so 复制到正确的位置。

抱歉，这只是解决方法，但我担心没有干净的解决方案。您可以为此创建一张票，但我担心您必须自己解决。

# ios - Interface builder 和 .m@.h 之间的冲突：谁赢了？

> ID：10914988
> 
> 赞同：1
> 
> 时间：2012-06-06T13:16:22.170
> 
> 标签：ios, interface-builder, xcode4.2, uitextfield

我一直想知道 Xcode 如何解释 IB 和编程编码对象的使用。例如：我在 .m 中初始化了一个表，但我在我正在处理的 tableviewcontroller 的属性中设置了简单的样式。所以？我注意到代码通过了 IB。

当我必须通过在第一个单元格中插入标题和 UITextField 来自定义详细信息表时，它首先出现，这对于 IB 来说非常容易。但是当我运行该应用程序时，只有一个普通表格的模板。咕噜？

谢谢您的帮助。干杯，路易斯

**编辑**

这是 TableViewController 的实例：

```
 - (id)initWithStyle:(UITableViewStyle)style
    {
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:21:35.140

他们不应该越过。如果您使用 [[UITableView alloc] initWithStyle:UITableViewStyleGrouped] 实例化一个表，它会创建一个新表而无需通过 NIB。如果您从 NIB 实例化一个表，它会使用 -initWithCoder: 创建一个实例。

* * *

**更新后添加**

好的，你正在继承 UITableView。除了覆盖之外`-initWithStyle:`，您还需要覆盖`-initWithCoder:`或`-awakeFromNib`。

从 NIB 加载自定义 UIView 的基本流程。

*   `-initWithCoder:`用于实例化对象
*   所有 NIB 连接都已建立（已连接 IBOutlets 和 IBAction）。
*   `-awakeFromNib`是发送到对象

这意味着如果您在 中设置一个值`-initWithCoder:`，则 NIB 设置将获胜；如果您在 中设置一个值`-awakeFromNib`，您的代码将获胜。

请务必阅读[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)的 Subclassing Notes 和 Methods to Override 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:21:17.910

这完全取决于您如何初始化对象。如果您从控制器的 init 方法加载 UITableView 并调用 initWithStyle，这就是您的 UITableView 的样子。如果您想使用 IB，您需要使用 initWithNibName 初始化您的控制器，并与您的视图建立一个 IBOutlet 连接，该视图具有普通设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:35:05.830

好吧，我不确定，但我想我找到了解决方案的开始。这是我的想法。

我认为是面向 IB 的设计。编译器将要求 IB 实例化视图。但是如果我们创建了一个 UITableViewController 子类，那么我们就拥有了引用该视图的实例化（正确的词？）的所有方法。

因此，为了避免这种冲突，我们可以删除.M中的代码，它指的是表的初始化：initWithStyle和关于表源的pragma标记。我们只是让任何视图和委托所需的视图生命周期。

我找到了一些使用这个的例子。这是一个详细视图表的 .m ，它在 IB 上使用静态单元格设计：

```
 #import "PictureListDetail.h"

    @implementation PictureListDetail

    @synthesize managedObjectContext;
    @synthesize currentPicture;
    @synthesize titleField, descriptionField, imageField;
    @synthesize imagePicker;

    #pragma mark - View lifecycle

    - (void)viewDidLoad
    {
[super viewDidLoad];

// If we are editing an existing picture, then put the details from Core Data into the text fields for displaying
if (currentPicture)
{
    [titleField setText:[currentPicture title]];
    [descriptionField setText:[currentPicture desc]];
    if ([currentPicture smallPicture])
        [imageField setImage:[UIImage imageWithData:[currentPicture smallPicture]]];
}
 }

   #pragma mark - Button actions

   - (IBAction)editSaveButtonPressed:(id)sender
    {
// If we are adding a new picture (because we didnt pass one from the table) then create an entry
if (!currentPicture)
    self.currentPicture = (Pictures *)[NSEntityDescription insertNewObjectForEntityForName:@"Pictures" inManagedObjectContext:self.managedObjectContext];

// For both new and existing pictures, fill in the details from the form
[self.currentPicture setTitle:[titleField text]];
[self.currentPicture setDesc:[descriptionField text]];

if (imageField.image)
{
    // Resize and save a smaller version for the table
    float resize = 74.0;
    float actualWidth = imageField.image.size.width;
    float actualHeight = imageField.image.size.height;
    float divBy, newWidth, newHeight;
    if (actualWidth > actualHeight) {
        divBy = (actualWidth / resize);
        newWidth = resize;
        newHeight = (actualHeight / divBy);
    } else {
        divBy = (actualHeight / resize);
        newWidth = (actualWidth / divBy);
        newHeight = resize;
    }
    CGRect rect = CGRectMake(0.0, 0.0, newWidth, newHeight);
    UIGraphicsBeginImageContext(rect.size);
    [imageField.image drawInRect:rect];
    UIImage *smallImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // Save the small image version
    NSData *smallImageData = UIImageJPEGRepresentation(smallImage, 1.0);
    [self.currentPicture setSmallPicture:smallImageData];
}

//  Commit item to core data
NSError *error;
if (![self.managedObjectContext save:&error])
    NSLog(@"Failed to add new picture with error: %@", [error domain]);

//  Automatically pop to previous view now we're done adding
[self.navigationController popViewControllerAnimated:YES];
    }

   //  Pick an image from album
   - (IBAction)imageFromAlbum:(id)sender
   {
imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self;
imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
[self presentViewController:imagePicker animated:YES completion:nil];
     }

    //  Take an image with camera
   - (IBAction)imageFromCamera:(id)sender
   {
imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self;
imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceRear;
[self presentViewController:imagePicker animated:YES completion:nil];
     }

      //  Resign the keyboard after Done is pressed when editing text fields
      - (IBAction)resignKeyboard:(id)sender
     {
[sender resignFirstResponder];
     }

    @end 
```

在此处可用：在此处[输入链接描述](http://maybelost.com/2011/12/tutorial-storyboard-app-with-core-data/#more-512)

你怎么看 ？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T10:09:20.153

即使我现在独自在这篇文章上，我也想发布答案！

我终于弄清楚了为什么我的文本字段没有出现，这表明谁掌握了编译器。

我实际上用一个实现方法的类对细节进行了子类化，以用 coreData 填充表源。然后，假设的静态单元格实际上是用这些方法填充的。

在我看来，这表明 .m 超过了 IB。

# ruby-on-rails - Michael Hartl 的 Ruby on Rails 教程。第 8.29 章测试失败

> ID：10914990
> 
> 赞同：1
> 
> 时间：2012-06-06T13:16:28.287
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我是通过 Hartl 工作的新手。到了第 8 章的末尾，当我检查浏览器的登录/注销时，一切似乎都正常。但是，当我运行此测试时：

```
$ bundle exec spec spec/ 
```

返回

```
sis-macbook-pro:sample_app Lagaspi$ bundle exec rspec spec/ 
..............................F

Failures:

1) User pages signup with valid information after saving the user 
 Failure/Error: it { should have_link('Sign out') }
   expected link "Sign out" to return something
 # ./spec/requests/user_pages_spec.rb:48:in `block (5 levels) in <top (required)>'

Finished in 0.60715 seconds
31 examples, 1 failure

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:48 # User pages signup with valid information after saving the user 
```

我有一个想法，但我不确定。所以这是我的 user_pages_spec.rb 文件：

```
require 'spec_helper'

describe "User pages" do

subject { page }

describe "signup page" do
before { visit signup_path }

it { should have_selector('h1',    text: 'Sign up') }
it { should have_selector('title', text: full_title('Sign up')) }
end

describe "profile page" do
let(:user) { FactoryGirl.create(:user) }
before { visit user_path(user) }

it { should have_selector('h1',    text: user.name) }
it { should have_selector('title', text: user.name) }
end

describe "signup" do

before { visit signup_path }

let(:submit) { "Create my account" }

describe "with invalid information" do
it "should not create a user" do
expect { click_button submit }.not_to change(User, :count)
end
end

describe "with valid information" do
before do
fill_in "Name",         with: "Example User"
fill_in "Email",        with: "user@example.com"
fill_in "Password",     with: "foobar"
fill_in "Confirmation", with: "foobar"
  end

it "should create a user" do
expect { click_button submit }.to change(User, :count).by(1)
  end

  describe "after saving the user" do
before { click_button submit }
it { should have_link('Sign out') }
  end
 end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:36:50.027

转到[http://ruby.railstutorial.org/chapters/sign-up?version=3.2#code-after_save_tests](http://ruby.railstutorial.org/chapters/sign-up?version=3.2#code-after_save_tests)，并将这些行添加到您的规范中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:31:02.163

你能发布你的视图文件吗？没有它，很难分辨出什么是错的。从我所看到的，它只说你没有链接。