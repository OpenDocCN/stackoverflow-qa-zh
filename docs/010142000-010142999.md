# StackOverflow 问答 10142000-10142999

# android - 是否可以查看用户主屏幕上当前有哪些应用程序？

> ID：10142002
> 
> 赞同：1
> 
> 时间：2012-04-13T13:43:18.373
> 
> 标签：android

我想知道是否可以查看用户主屏幕上的快捷方式和小部件，以及它们的大小。

**我不想删除快捷方式或以任何方式更改用户主屏幕。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:51:39.720

不，这不可能。但是，如果您设计自己的启动器，那么您可以将这个逻辑放入其中:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T13:52:11.763

不，它的发射器取决于...

# c# - 命名参数可以与 params 修饰符一起使用吗？

> ID：10142005
> 
> 赞同：5
> 
> 时间：2012-04-13T13:43:22.680
> 
> 标签：c#, .net

我正在尝试使用以下重载调用`Invoke`a ：`Dispatcher`

```
public object Invoke(Delegate method, params object[] args); 
```

我想使用命名参数，但似乎找不到带有 params 修饰符的参数的语法。以下所有内容都不会编译：

```
dispatcher.Invoke(method: () => { }, args: {});
dispatcher.Invoke(method: () => { }, args: new object[0]);
dispatcher.Invoke(method: () => { }, args: null);
dispatcher.Invoke(method: () => { }, args: new object[] {});
object[] foo = {};
dispatcher.Invoke(method: () => { }, args: foo);
dispatcher.Invoke(method: () => { }, args: new[] {"Hello", "World!"}); 
```

我发现这两个问题似乎没有明确的答案：

[带参数的命名参数](https://stackoverflow.com/questions/9871927/named-parameters-with-params)

[如何为 string.Format 设置命名参数？](https://stackoverflow.com/questions/4059330/how-to-set-named-argument-for-string-format)

所以我的问题是：能不能做到？如果是，如何？

**UDPATE**

Daniel Hilgarth 表明 yes`params`可以与命名参数一起使用。我使用这种模式整合了他的答案：

```
Action method = () => { };
if (_dispatcher != null)
    _dispatcher.Invoke(method: method, args: null);
else
    method(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:49:27.713

试试;

```
dispatcher.Invoke(method: () => { }, args: new[] {"Hello", "World!"}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T13:54:54.917

以下代码编译没有问题：

```
void Main()
{
    Invoke(method: () => {}, args: new object[] {});
}

public object Invoke(Action method, params object[] args)
{
    return null;
} 
```

我不得不将第一个参数的类型从`Delegate`to更改`Action`为使其可以编译，因为`() => {}`无法转换为`Delegate`.

或者，以下内容也可以编译：

```
void Main()
{
    Action method = () => {};
    Invoke(method: method, args: new object[] {});
}

public object Invoke(Delegate method, params object[] args)
{
    return null;
} 
```

我的假设是，您从未收到有关`args`参数的编译错误，而是有关`method`“*无法从 'lambda 表达式' 转换为 'System.Delegate'* ”的参数。这个问题可以通过将 lambda 转换为 Action ( `Invoke(method: (Action)(() => {}) ...`) 或定义一个类型的变量`Action`作为参数传递给方法（见上文）来解决，因为`Action`可以隐式转换为`Delegate`.

# c# - 为什么通过 c# 创建新的 DotNetNuke 用户时出现 nullReferenceException？

> ID：10142009
> 
> 赞同：3
> 
> 时间：2012-04-13T13:43:48.977
> 
> 标签：c#, dotnetnuke

我的 DotNetNuke 模块中有以下代码来注册新用户：

```
protected static int RegisterNewDnnAccount(string firstName, string lastName, string email, string password)
    {
        // Create user
        var user = new UserInfo();
        user.FirstName = firstName;
        user.LastName = lastName;
        user.Email = email;
        user.DisplayName = string.Concat(firstName, " ", lastName);
        user.Username = email;
        user.IsSuperUser = false;

        user.Profile.FirstName = firstName;
        user.Profile.LastName = lastName;
        user.Profile.PreferredTimeZone = TimeZoneInfo.Local;
        user.Profile.PreferredLocale = "en-US";
        user.Profile.Telephone = string.Empty;
        user.Profile.Cell = string.Empty;
        user.Profile.PostalCode = string.Empty;
        user.Profile.City = string.Empty;
        user.Profile.Street = string.Empty;
        user.Profile.Region = string.Empty;

        // Set up membership
        var membership = new UserMembership(user);
        membership.Approved = true;
        membership.CreatedDate = DateTime.Now;
        membership.Password = password;
        membership.IsOnLine = false;
        user.Membership = membership;

        // Register the account
        var status = UserController.CreateUser(ref user);
        switch (status)
        {
            case UserCreateStatus.Success:
                return user.UserID;

            case UserCreateStatus.InvalidPassword:
                throw new InvalidOperationException("Failed to create user account: invalid password");

            case UserCreateStatus.InvalidEmail:
                throw new InvalidOperationException("Failed to create user account: Invalid email");

            case UserCreateStatus.DuplicateEmail:
                throw new InvalidOperationException("A user already exists with this email address");

            case UserCreateStatus.UserAlreadyRegistered:
                throw new InvalidOperationException("This user is already registered");

            default:
                throw new InvalidOperationException("user account creation failed for an unknown reason");
        }
    } 
```

当该`UserController.CreateUser(ref user);`方法被调用时，DotNetNuke 的 API 会抛出一个`NullReferenceException`，当然关于什么是 null 的信息为零。

我已经验证了我在上面设置的每个字段都不为空，所以很明显这是我没有设置的东西导致了这个问题。我设置的大多数属性都是我试图让这个错误停止，但我没有做到这一点。

有任何想法吗？

* * *

**编辑：**这是堆栈跟踪：

> 在C `DotNetNuke.Entities.Portals.PortalController.IsMemberOfPortalGroup(Int32 portalId)`
> : \XOS\Projects\DNN\Website\DesktopModules\ `DotNetNuke.Entities.Users.UserController.AutoAssignUsersToRoles(UserInfo user, Int32 portalId)`
> XOSDigital.PlayerOnDemand \ `DotNetNuke.Entities.Users.UserController.CreateUser(UserInfo& user)`
> PlayerOnDemand.Common `PlayerOnDemand.Common.Utils.ClientUserUtils.RegisterNewDnnAccount(String firstName, String lastName, String email, String password)`\Utils\ClientUserUtils.cs:line 160

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:00:45.470

弄清楚了。问题是我没有明确设置用户的门户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:41:47.293

DNN 中的“对象未设置”和堆栈跟踪中的任何异常都显示它是 portalSettings 或可能类似于语言的东西，通常是因为在调用的上下文中，没有将 portalSettings 对象加载到当前 context.items 集合中.

当人们在没有加载当前请求上下文的预定呼叫中生成电子邮件或执行其他工作时，通常会发生这种情况。

由于此问题，您可能必须在假上下文中模拟当前的 portalSettings 对象，才能使用 DNN Api 的某些部分。

# oracle - 在 Oracle 中连接 2 个字符串问题

> ID：10142010
> 
> 赞同：1
> 
> 时间：2012-04-13T13:43:52.193
> 
> 标签：oracle, plsql

我还有另一个问题，我不知道是什么原因造成的。我是 Oracle 的新手，我在连接 2 个字符串时跌跌撞撞。我有一个函数将采用 DateStart、DateStop 和其他变量，然后将它们转换为 SQL stmt。该函数编译正常，但执行时出现以下错误：

ORA-06502: PL/SQL: 数字或值错误: 字符串缓冲区太小 ORA-06512 在行 ...

起初我认为其中一个字符串可能缺少引号，但两个字符串都很好，因为当我打印单个字符串时该函数没有产生错误。只有当两者结合时才有问题！我可能忽略了一些显而易见的事情，我什至尝试过 concat 而不是运算符“||”，但我无法确定问题的原因。如果有人以前遇到过这个问题，如果你能给我一些我做错了什么的提示，我将不胜感激。

这是导致我出现问题的功能，我已经删除了所有其他不相关的代码，以便我们可以将问题归零。该函数编译正确，但执行时出现问题。

谢谢！

```
create or replace
FUNCTION ABC(
    DateStart IN VARCHAR2 ,
    DateStop  IN VARCHAR2 ,
    ZipCode   IN VARCHAR2 ,
    PracticeID IN VARCHAR2)
    RETURN VARCHAR2
IS
  v_code  NUMBER;
  v_errm  VARCHAR2(64);
  sqlstmt VARCHAR2(1000);
  sqlstmt2 VARCHAR2(500);
  sConditionClause VARCHAR2(500);
  s_Quote VARCHAR(1) := chr(39);
BEGIN
  sqlstmt2 :='SELECT TO_CHAR("Date", ''yyyy-mm-dd'') AS "Date" ,            
               substr(trim("Postal"),1,5) AS "ZipCode" ,                         
               count ("Patient") AS "Total" ';
  sConditionClause := ' FROM "ABC_TABLE"  WHERE "Date">=To_Date('
                      ||s_Quote || trim(DateStart) ||s_Quote
                      ||','
                      ||s_Quote||'mm/dd/yyyy'||s_Quote||')AND "Date"<=To_Date('
                      ||s_Quote || trim(DateStop) ||s_Quote
                      ||','||s_Quote||'mm/dd/yyyy'||s_Quote||') ';  
  sqlstmt := trim(sqlstmt2)||trim(sConditionClause);

  RETURN sqlstmt;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T19:23:56.100

这是我发现的：上面的函数可能没有问题，并且连接很好。问题来自 SQL Developer 提供的单元测试 Run PL/SQL。它默认返回值字符串的长度为 200 个字符？！。我对 SQL Developer 不够熟悉，无法发现它并归咎于我自己的功能。一旦我将返回字符串的长度更改为 varchar2(5000) 一切都像魅力一样运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:56:06.030

您的变量之一（`sqlstmt2`、`sConditionClause`或`sqlstmt`）对于您尝试分配给它的字符串来说太小了。如果您包含发生错误的行号，我们就会知道是哪一个。

顺便说一句，您可以同时使用两个单引号将一个相当添加到字符串中，而不必照`s_Quote`原样使用。

您可以通过跳过局部变量来完全避免这个问题：

```
create or replace
FUNCTION ABC(
    DateStart IN VARCHAR2,
    DateStop  IN VARCHAR2)
    RETURN VARCHAR2
IS
BEGIN      
  RETURN 'SELECT TO_CHAR("Date", ''yyyy-mm-dd'') AS "Date" ,            
           substr(trim("Postal"),1,5) AS "ZipCode" ,                         
           count ("Patient") AS "Total" 
           FROM "ABC_TABLE"  WHERE "Date">=To_Date(''' 
           || trim(DateStart) 
           ||''',''mm/dd/yyyy'') AND "Date"<=To_Date('''
           || trim(DateStop) 
           ||''',''mm/dd/yyyy'')';
END ABC; 
```

# vb.net - Janus Grid：在父行中为分组的列设置值将子行设置为 Nothing

> ID：10142017
> 
> 赞同：1
> 
> 时间：2012-04-13T13:44:23.503
> 
> 标签：vb.net, grid, group-by, janus

假设我有一个 Janus 网格，它有两列，并且行按层次顺序组织，即父行和子行。网格中的一列被分组（通过拖动网格上方的分组依据框中的列）。我有一个单元格更改事件，当单元格内容更改时会触发该事件。我在单元格更改事件中执行此操作：

```
Dim grid as GridEx = e.Column.GridEx 'e is of type ColumnActionEventArgs
Dim value as Object = grid.GetValue(e.Column)
Dim row as GridEXRow = grid.GetRow 'This is the parent row which has 2 child rows for example
...
Dim drCurrent As DataRow = CType(row.DataRow(), DataRowView).Row
drCurrent.Item(e.Column.DataMember) = value 'set the parent row column value 
```

如果我在父行中更改分组列的值，则子行设置为`Nothing`. 在上述代码段的最后一行之后，子行`row`设置为`Nothing`. 另一方面，如果我更改另一列的值（不在分组依据框中），则不会发生此问题。仅当我对列进行分组并且不更改其值时才会出现问题。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:20:21.877

您提供的代码示例...

您在哪个网格事件中有此代码？CellValueChanged 或 CellEdited 或其他？

您可能想尝试这 3 行，而不是代码示例中的最后一行：

```
 row.BeginEdit()
   drCurrent.Item(e.Column.DataMember) = value 'set the parent row column value
   row.EndEdit() 
```

如果这没有帮助，请提供有关您正在使用的其他网格事件的更多信息。

# iphone - 排序包含数组的数组 ios

> ID：10142019
> 
> 赞同：0
> 
> 时间：2012-04-13T13:44:29.590
> 
> 标签：iphone, sorting, nsarray

我做了一个计算耗气量的小程序。在最终视图控制器中计算消耗所需的每个数据条目都有一个视图控制器。因此，您在第一个控制器中输入行驶距离，在下一个控制器中添加燃料。在显示结果的控制器中，也添加了当前日期。所有条目都以字符串形式存储在 plist 文件中，以便稍后与 tableviews 一起使用（日期除外）。

现在我想在摘要视图控制器中打开这些数据以填充表格视图。

目前我已经从 plist 文件中检索了 3 个数组（类似于表的列）：数组 1：NSDate 数组 2：表示数字的 NSString 数组 3：表示数字的 NSString

我知道如何填充我的 tableview，但我无法围绕排序。我尝试将列方法更改为基于表行的方法，从每个数组中获取每个元素并将它们添加到一个新数组中，每个数组包含一个日期和两个数字（作为字符串）。

我尝试设置排序描述符，我尝试使用选择器，但似乎我并不完全理解如何使用它。就个人而言，我更喜欢示例，因此我一直在寻找有关此主题的教程。开发者纪录片没有太大帮助。

我不希望得到这个问题的完整示例，但可能会提供一些关于如何排列我的数据以及最好使用什么来对完整数据数组进行排序的指针。

感谢您提供任何指示或示例。

编辑：我终于将所有“表格行”作为“行”放入字典中。现在我可以通过键访问单个列。这也允许使用排序描述符对我的字典数组中的字符串值进行升序或降序排序。

这可能不是最优雅的方法，但我想我现在可以做我想做的事了。请原谅“表格”比较，但我发现这更容易掌握。

如果有人有好的数组教程的指针，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:59:21.957

我不太清楚你想如何排序，但也许你可以从中调整一些东西（对字典数组进行排序，每个字典都有一个键 @“row”，值类型为 NSNumber） -

首先，做一个比较结果函数：

```
static NSComparisonResult compareRowNumbers(NSDictionary *dict1, NSDictionary *dict2, void * context) {

    if ([[dict1 objectForKey:@"row"] intValue] < [[dict2 objectForKey:@"row"] intValue]) {return NSOrderedAscending;}
    if ([[dict1 objectForKey:@"row"] intValue] > [[dict2 objectForKey:@"row"] intValue]) {return NSOrderedDescending;}

    return NSOrderedSame;

} 
```

然后你可以像这样使用它 -

```
NSMutableArray *myArray = [NSMutableArray array];

// populate your array with loads of stuff (in this case, NSDictionaries as decribed above)
// now sort it

[myArray sortUsingFunction:compareRowNumbers context:NULL]; 
```

...并且您的数组会自动排序。

# javascript - 在 Google Chrome 扩展程序中安全地覆盖 document.cookie

> ID：10142020
> 
> 赞同：1
> 
> 时间：2012-04-13T13:44:32.973
> 
> 标签：javascript, google-chrome, google-chrome-extension, overriding

我正在尝试在我的 Chrome 扩展程序中覆盖 document.cookie，但我在让原始 document.cookie 功能同时工作时遇到了很多麻烦。目前我有这个：

```
var _cookie = document.cookie; 
document.__defineSetter__("cookie", function(the_cookie) {_cookie=the_cookie;} );
document.__defineGetter__("cookie", function() {return _cookie;} ); 
```

[我正在使用此处](https://stackoverflow.com/a/8994454)的技术从内容脚本中注入 JS 。

我看到的行为是我重新定义的 setter 和 getter 被调用，但原来的函数不再起作用。例如，我可以使用开发人员工具检查 _cookie 和 document.cookie 并查看它们具有相同的预期值，但 Chrome 的 cookie 存储中从未出现任何 cookie。

谁能告诉我我是如何破坏原始 document.cookie 功能的？document.cookie 是一个属性的问题，所以我实际上并没有得到指向原始设置器的指针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:23:38.327

`var _cookie = document.cookie;`不是保存原始的getter和setter `cookie`，它只是调用getter并保存结果。

此[页面](http://web.archive.org/web/20120616110133/http://my.opera.com/xErath/blog/2011/02/05/the-cookie-monster)（[原始链接](http://my.opera.com/xErath/blog/2011/02/05/the-cookie-monster)，现已损坏）有一个如何保存 cookie setter 和 getter 的示例：

```
var cookie_setter = document.__lookupSetter__ ('cookie');
var cookie_getter = document.__lookupGetter__ ('cookie'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T13:47:45.463

您已经重新定义了原始的 cookie getter 和 setter 函数，您可能忘记了新函数中原始函数的重要部分或实现

# javascript - 克隆 div 会重置目标 div 的所有选定项

> ID：10142024
> 
> 赞同：0
> 
> 时间：2012-04-13T13:44:54.973
> 
> 标签：javascript, html

我遇到的问题：

我点击“添加”
我选择第二个选项
我点击“添加”

问题：我的第一个选择列表的选定选项索引 = 0；
这不应该发生，但我无法弄清楚它为什么会这样做。谁能告诉我我做错了什么？

```
<script type="text/javascript">
function add(){
var div =document.getElementById('ruletemplate').cloneNode(true);

document.getElementById('rules').innerHTML += div.innerHTML;
return false;
}

</script>
<div id="ruletemplate" style="display: none;">
<div >
    <label for="rule">Rule</label>
    <select name="rules[][option]">
        <option>MAX PERS</option>
        <option>MIN PERS</option>
    </select>
    <input name="rule[][amount]" type="text"/>
</div>
</div>
<form>
<div  id="rules" >

</div>
<a id="addRule" href="" onclick="javascript: add(); return false;">add</a>
<input type="Submit" value="Save"  />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:47:31.977

option 元素通过 javascript 属性维护其当前选定状态`selected`（不要与 selected 属性混淆，它对应于默认选定状态）。

这不是克隆的 - 因此您必须手动更新选择

注意 - 你不能`id`在单个文档上有重复的 s - 当你克隆你的元素时，你正在重复`id`s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:54:32.683

这样做的原因是您正在设置 innerHTML ，这意味着整个事情都被重新解析了。您需要将元素附加到容器中。试试这个它应该保持每个选择的位置。

```
function add(){
var div =document.getElementById('ruletemplate').cloneNode(true);
div.style.display='block';
document.getElementById('rules').appendChild(div);
return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:01:43.517

在某些浏览器（Firefox、Chrome..）中，DOM 对象不会更新（文本输入及其值和选定选项具有“选择”属性），因此当您调用 innerHTML 时，您会得到没有值的原始结构。

您必须强制对象的 DOM 更新，如下所示：[http ://dev-answers.blogspot.it/2007/08/firefox-does-not-reflect-input-form.html](http://dev-answers.blogspot.it/2007/08/firefox-does-not-reflect-input-form.html)

# java - 有没有办法更新 MongoDB 中的整个实体？

> ID：10142027
> 
> 赞同：4
> 
> 时间：2012-04-13T13:44:57.433
> 
> 标签：java, mongodb

我正在使用 Spring Data MongoDB，目前我想知道是否有任何方法可以更新整个实体，如 mongoTemplate.update(entityObject)？因为通常的方法是一个一个地更新属性。 PS 代码用 Java 写的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:47:46.487

您可以在实体上使用 save() 方法。

[http://www.mongodb.org/display/DOCS/Updating#Updating-%7B%7Bsave%28%29%7D%7Dinthemongoshell](http://www.mongodb.org/display/DOCS/Updating#Updating-%7B%7Bsave%28%29%7D%7Dinthemongoshell)

[http://www.mongodb.org/display/DOCS/Java+-+Saving+Objects+Using+DBObject](http://www.mongodb.org/display/DOCS/Java+-+Saving+Objects+Using+DBObject)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:51:14.677

对 - save() 方法执行完整的文档替换。因为数据库是无模式的，所以字段的概念在文档之外并不真正存在。

# java - Java只允许一次选择两个绘制的圆圈，如何取消选择

> ID：10142033
> 
> 赞同：-1
> 
> 时间：2012-04-13T13:45:41.647
> 
> 标签：java, swing, user-interface, select, unselect

嘿，所以我在屏幕上显示了 20 个圈子，我希望用户只能选择两个圈子并能够取消选择圈子，但仍然最多只能选择 2 个圈子。我知道如何允许它一次只选择两个圈子但不能取消选择，以及如何在只允许一个圈子时取消选择，我现在很困惑。

此代码只允许选择两个圆圈，但我不能取消选择圆圈

```
Figur vald1 = null, vald2 = null;

Figur fig = (Figur)mev.getSource();

if (vald1 == null){
            vald1 = fig;
            vald1.setVald(true);
            }
            else if (vald2 == null && fig1 != vald1){
            vald2 = fig;
            vald2.setVald(true);
            } 
```

这段代码允许我一次选择一个圆圈，取消选择它但不选择两个圆圈

```
if (vald1 != null)
        vald1.setVald(false);

        if (vald1 == fig)
        vald1 = null;
        else{
        fig.setVald(true);
        fig.requestFocusInWindow();
        vald1 = fig; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:24:42.130

像这样：

```
Figur vald1 = null, vald2 = null;

Figur fig = (Figur)mev.getSource();

vald1 = vald2;
vald2 = fig; 
```

现在 vald1 和 vald2 持有 2 个最近的圈子，其中 vald1 是两个圈子中较老的一个。

你也可以使用一个列表，这样你就可以做尽可能多的事情：

```
List<Figur> selected = new ArrayList<Figur>();
final static NUM_TO_KEEP = 2;

Figur fig = (Figur)mev.getSource();

selected.push(fig);

// This trims the list to only maintain the NUM_TO_KEEP elements.
while(selected.length() > NUM_TO_KEEP) {
    selected.remove(NUM_TO_KEEP);
} 
```

# c# - 如果值可以转换为数字，则通过反射设置字符串属性会删除前导零

> ID：10142035
> 
> 赞同：0
> 
> 时间：2012-04-13T13:45:48.203
> 
> 标签：c#, reflection, .net-3.5

我有一个处理与数据库通信的框架。它调用我的 SP（search、ins、del、upd）通过将对象的属性名称与参数名称匹配来自动填充参数。一切都很好，直到我得到一个只包含数字的字符串值，第一个数字为零。即使我的属性和 DB 列都是字符串，代码也会自动删除前导零。这是我的代码的一部分：

```
var property = from p in entityProperties
               where p.Name.ToUpper().Equals(dvSchema[index][0].ToString().ToUpper())
               select p;
object propertyNewValue;
if (property.First().PropertyType.BaseType != typeof(Enum))
    propertyNewValue = dr[index];
...
property.First().SetValue(businessEntity, propertyNewValue, null); 
```

我正在使用 .NET 3.5 和 SQL Server2008

有谁知道如何避免这种情况，希望除了添加一个 if 来检查属性类型是否为字符串？

提前致谢！

* * *

## 编辑

这是我的完整过程，我没有在任何地方明确地转换属性：

```
 public virtual void MapEntityFromDataBase(BE businessEntity, IDataReader dr)
    {
        DataView dvSchema = dr.GetSchemaTable().DefaultView;
        Type thisType = businessEntity.GetType();
        while (thisType != typeof(Object))
        {
            PropertyInfo[] entityProperties = thisType.GetProperties(BindingFlags.Public | BindingFlags.Instance | BindingFlags.DeclaredOnly);
            for (int index = 0; index < dvSchema.Count; index++)
            {
                if (dr[index] != DBNull.Value)
                {
                    var property = from p in entityProperties
                                   where p.Name.ToUpper().Equals(dvSchema[index][0].ToString().ToUpper())
                                   select p;
                    if (property.Count() > 0)
                    {
                        object propertyNewValue;
                        if (property.First().PropertyType.BaseType != typeof(Enum))
                        {
                            propertyNewValue = dr[index];
                        }
                        else //enums throw a cast exception
                        {
                            if (dr[index].GetType() == typeof(string) || dr[index].GetType() == typeof(char))
                                propertyNewValue = Enum.Parse(property.First().PropertyType, ((int)dr[index].ToString()[0]).ToString());
                            else
                                propertyNewValue = Enum.Parse(property.First().PropertyType, dr[index].ToString());
                        }
                        if (property.First().CanWrite)
                        {
                            if (property.First().PropertyType.IsGenericType && property.First().PropertyType.GetGenericTypeDefinition() == typeof(Nullable<>))
                            {
                                Type[] typeCol = property.First().PropertyType.GetGenericArguments();
                                Type nullableType;
                                if (typeCol.Length > 0)
                                {
                                    nullableType = typeCol[0];
                                    if (nullableType.BaseType == typeof(Enum))
                                    {
                                        propertyNewValue = Enum.Parse(nullableType, propertyNewValue.ToString());
                                    }
                                }
                            }
                            property.First().SetValue(businessEntity, propertyNewValue, null);
                        }
                    }
                }
            }
            thisType = thisType.BaseType;
        }
    } 
```

奇怪的是，当我到达属性设置语句时

```
property.First().SetValue(businessEntity, propertyNewValue, null); 
```

propertyNewValue 的值为“091234”（如调试器所见）

# ssl - 自定义 SSL 证书颁发机构？

> ID：10142041
> 
> 赞同：2
> 
> 时间：2012-04-13T13:46:25.190
> 
> 标签：ssl, certificate-authority

是否有可以添加到浏览器的自定义 SSL 证书颁发机构？

我们使用很多内部网址，例如

[http://www.somproject.somebranch/](http://www.somproject.somebranch/)用于在各个分支上工作

如果有一些服务可以添加到我的浏览器/操作系统中，这将让我对非真实域使用单个证书（或轻松生成证书），那就太酷了。这是否存在，或者这只是#firstworldproblem？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T16:09:58.623

自定义 CA 的重点是您必须自己创建它（特别是作为 CA 证书的私钥持有者）。将任何可用的 CA 证书导入您的浏览器意味着任何拥有其私钥的人都可以颁发您的浏览器识别的证书（通常适用于任何站点，除非有特定的策略）。

有一些工具可以管理 CA：

*   [OpenSSL's`CA.pl`](http://www.openssl.org/docs/apps/CA.pl.html)：它是 OpenSSL 附带的脚本。这是非常基本但高度可配置的（通过`openssl.cnf`）。
*   [TinyCA](http://tinyca.sm-zone.net/)是 OpenSSL 的前端，可帮助您使用 GUI 管理证书。它比`CA.pl`.
*   [OSX 在 Keychain.app 中带有自己的界面](http://www.techrepublic.com/blog/mac/create-your-own-ssl-ca-with-the-os-x-keychain/388)。
*   [此 Security.SE 问题](https://security.stackexchange.com/questions/7030/recommendations-for-a-certificate-management-tool-for-linux)中列出了许多其他工具：EJBCA、OpenCA 和 XCA。

一般来说，大部分艰苦的工作是管理部分（不是系统管理员，而是文书工作）。如果它只适合您，那么 EJBCA 或 OpenCA 可能会过大。

# java - JAVAFX_HOME 路径不起作用

> ID：10142043
> 
> 赞同：1
> 
> 时间：2012-04-13T13:46:37.763
> 
> 标签：java, environment-variables, javafx

我已经在我的机器上安装了 JavaFX SDK，并将 JAVAFX_HOME 环境变量设置为 SDK 的根目录，但是当我尝试在命令行上回显它时，我只得到回显后写的内容：

C:\Java\workspace-ecmc\CMX\CmxDesigner>echo %JAVAFX_HOME%

%JAVAFX_HOME%

我对 JAVA_HOME 的行为相同，但它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T01:22:42.867

首先，将环境变量设置 `JAVAFX_HOME`为`C:\Program Files\Oracle\JavaFX 2.1 SDK`.

然后分配`PATH`给`%JAVAFX_HOME%\bin;` 并尝试 echo `%JAVAFX_HOME%`。它会工作的。

# ajax - 如何使用通过下拉选择的关联数据库条目中的数据填充显示的表单

> ID：10142047
> 
> 赞同：0
> 
> 时间：2012-04-13T13:46:48.757
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, entity-framework, razor

我有以下代码，允许教师查看可用课程的下拉列表，按名称列出。当老师选择下拉选项时，我希望视图上的表单自动填充代表所选课程的默认值。填充字段的最有效方法是什么？

注意：在下拉列表中选择“自定义”时，我希望下拉列表下方显示的表单只有空格。

课程控制器

```
 // GET: /Course/ApplyToTeach

    public ActionResult ApplyToTeach()
    {
        var course = db.CourseTemplates;
        var model = new ApplyCourseViewModel
        {
            Courses = course.Select(x => new SelectListItem
            {
                Value = x.Title,
                Text = x.Title,
            })
        };
        return View(model);
    } 
```

ApplyToTeachViewModel

```
public class ApplyToTeachViewModel
{
    [Display(Name = "selected course")]
    public string SelectedCourse { get; set; }
    public IEnumerable<SelectListItem> Courses { get; set; }
} 
```

ApplyToTeach（查看）- 请注意，我目前在这里只有下拉菜单，我正在寻找在此下拉菜单下方添加自动填充表单的最有效方法。

```
<h2>ApplyToTeach</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Apply To Teach</legend>
        <div class="editor-label">
            Which class would you like to teach? (select "Custom" if you would like to submit a customized class)
        </div>

        <div class="editor-field">
            @Html.DropDownListFor(x => x.SelectedCourse, Model.Courses, "Custom")
            @Html.ValidationMessageFor(model => model.Courses)
        </div>
        <p>
            <input type="submit" value="Submit" />
        </p>
    </fieldset>
} 
```

下拉字段的数据来自以下模型 - CourseTemplates

```
public class CourseTemplates
{
    public int CourseTemplatesID { get; set; }
    public string Title { get; set; }
    public int Credits { get; set; }
    public int AttendingDays { get; set; } // 10, 8, 3, or custom
    public int AttendanceCap { get; set; } // default of 30
    public string Location { get; set; }
    public string Description { get; set; }
} 
```

表单实际上将作为“Course”模型提交，而不是“CourseTemplates”模型，“Course”模型比“CourseTemplates”模型有更多的数据字段——例如：

```
public DateTime StartDate { get; set; }
public bool Approved { get; set; }
etc. . . 
```

就用户体验而言，我想到的是管理员会事先检查并添加许多可能的课程选项，这只是为了简化大多数教师的申请流程（因此他们不必为他们申请教的每一堂课），但我希望老师能够在提交课程以供管理员审查之前编辑任何信息。

有小费吗？

# php - 如何为 JavaScript 和 JSON 正确编码 UTF-8？

> ID：10142050
> 
> 赞同：2
> 
> 时间：2012-04-13T13:46:59.100
> 
> 标签：php, javascript, json, encoding, utf-8

我在创建输入验证哈希时遇到问题。JavaScript 向 API 提交数据，API 使用 json_encode 验证发送的数据。基本上它是这样工作的：

```
$input=array('name'='John Doe','city'=>'New York');
$validationHash=sha1(json_encode($input).$key); // Key is known to both servers 
```

如果 PHP 连接到另一台服务器，那么一切正常。它也可以通过 JavaScript 工作（我也有一个自定义的 sha1() 函数）：

var validationHash=sha1(JSON.stringify({'name':'John Doe','city'=>'New York'})+key);

当字符串包含 UTF-8 字符时，我的问题就出现了。例如，如果其中一个值为：

```
Ränisipelgasöösel 
```

然后接收命令的 PHP 服务器在 JSON 编码后将其转换为：

```
R\u00e4nisipelgas\u00f6\u00f6sel 
```

我也需要在 JavaScript 中执行此操作，但我无法弄清楚如何操作。我需要确保向服务器发送正确的验证哈希，否则命令会失败。我从 Google 发现 unescape(encodeURIComponent(string)) 和 decodeURIComponent() 可以使用，但它们都没有给我 PHP 拥有和验证的相同字符串。

UTF-8 用于客户端和服务器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:02:41.087

这似乎是不可能的。我发现的唯一可行的解​​决方案是在浏览器端使用 encodeURIComponent() 对所有数据进行编码，在 PHP 端使用 rawurlencode() 对所有数据进行编码，然后从数组中的这些值计算 JSON。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-27T21:35:56.757

我的解决方法是像这样对我的 json 数据进行原始 url 编码。

```
rawurlencode( json_encode( $data ) ); 
```

然后从javascript中解码原始url编码的json，然后像这样解析json字符串。

```
JSON.parse( decodeURIComponent( data ) ); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T14:40:53.960

为什么不对数据进行 base64 编码以便安全传输？它将 UTF-8 字符编码为一个安全的字符串，可以通过不同的媒体（php、javascript 等）发送。这样你就可以在接收端对字符串进行 base64 解码。瞧！

通过base64编码数据，我的意思是base64编码值而不是整个json字符串

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-13T14:06:01.727

你是 html 页面编码 utf-8 吗？

> `<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">`

# django - django - 从模板上的单独日期和时间选择器 jquery 工具获取日期时间对象的最佳方法？

> ID：10142051
> 
> 赞同：0
> 
> 时间：2012-04-13T13:47:00.770
> 
> 标签：django, django-forms, django-templates, django-views

从模板上的单独日期和时间输入创建日期时间对象以在视图中使用 datetime.combine(date object, time object) 的最佳方法是什么？我一直在这一个上旋转我的轮子，感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:43:02.287

看看[forms.SplitDateTimeWidget()](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#splitdatetimewidget)

# java - 区分集合中的文件和目录

> ID：10142052
> 
> 赞同：0
> 
> 时间：2012-04-13T13:47:05.080
> 
> 标签：java, java-io

如何判断字符串数组中的元素是否包含文件或子目录？

每个文件接缝输出文件名和文件扩展名，但目录接缝只有一个平面名称？

```
public static File f = new File("C:\\Users\\Matthew\\Desktop\\X\\");

String[] contents = f.list();
for(String con : contents) {
System.out.println(con);    
} 
```

//输出到控制台

一个.txt

b.txt

是

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T13:49:54.080

您应该使用[`listFiles`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listFiles%28%29)which returns`File[]`而不是`list`which returns `String[]`。然后你可以使用`isDirectory`方法：

```
File[] contents = f.listFiles();
for(File con : contents) {
    System.out.println(con.isDirectory());    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T13:48:34.533

使用**isFile()**和**isDirctory()**方法。两者都有**boolean**作为返回类型。因此，您可以根据它们的返回值轻松确定。

有关他们行为的更多信息，您可以查看[此链接](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)

# java - 如何动态显示文本字段和复选框并用数据库数据填充它们

> ID：10142058
> 
> 赞同：0
> 
> 时间：2012-04-13T13:47:47.663
> 
> 标签：java, mysql

我正在制作学校项目，它是调查系统，
它的客户端/服务器应用程序使用 mysql 数据库，

服务器从 mysql 数据库获取数据（投票标题）并在连接时将其发送给客户端。

这些标题显示在 JComboBox 中，因此用户可以选择他想要回答的民意调查。

我想单击 JComboBox 中的投票标题，并希望在 JPanel 上显示与所选投票标题相关的问题和可用答案，每个投票可以有不同的问题计数和不同的答案计数，我想在 Jcomponents 中显示这些投票问题和答案：

问题：我想在 JTextFields 中显示它们
答案：我想在标签中显示它们，并在它们附近带有复选框，以便用户可以选择他想要的答案

我还想在问题附近显示带有问题 1 问题 2 等的标签，
那么如何动态制作呢？请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:41:12.290

您是否考虑过将 JSF 与 EJB 一起用于此过程？JSF 允许您创建一个网页 UI，该 UI 连接到 Java bean 控制器，然后连接到数据库的控制器。在这个模型中，一切都非常清晰和独立，并且是专门为这些情况设计的。你可以在这里看到一个简单的例子：http: [//www.adam-bien.com/roller/abien/entry/simplest_possible_jsf_2_ejb](http://www.adam-bien.com/roller/abien/entry/simplest_possible_jsf_2_ejb)

万一你必须使用摇摆它不会为你做，虽然它的一些好知道，它的设计可以帮助你在其他情况下。

# java - Java 运算符：|= 按位或并赋值示例

> ID：10142059
> 
> 赞同：22
> 
> 时间：2012-04-13T13:47:47.730
> 
> 标签：java, operators, bit-manipulation, variable-assignment

我刚刚浏览了某人编写的代码，我看到了`|=`用法，查找 Java 运算符，它建议按位或分配操作，谁能解释并给我一个例子？

这是读取它的代码：

```
 for (String search : textSearch.getValue())
         matches |= field.contains(search); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-13T13:50:02.233

```
a |= b; 
```

是相同的

```
a = (a | b); 
```

它计算两个操作数的**按位或**，**并将**结果分配给左操作数。

解释您的示例代码：

```
for (String search : textSearch.getValue())
    matches |= field.contains(search); 
```

我认为`matches`是一个`boolean`；这意味着按位运算符的行为与逻辑运算符相同。

在循环的每次迭代中，它`OR`都是 的当前值，`matches`无论从`field.contains()`. 这具有将其设置为`true`是否已经为 true**或**`field.contains()`返回 true的效果。

因此，它会计算在整个循环中对 的**任何**调用是否已返回。`field.contains()``true`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-13T13:49:24.890

`a |= b`是相同的`a = (a | b)`

**布尔变量**

在`boolean`上下文中，它意味着：

```
if (b) {
    a = true;
} 
```

也就是说，如果`b`为真则为`a`真，否则`a`将不被修改。

**位运算**

在位明智的上下文中，这意味着设置 in 的每个二进制位都`b`将设置为`a`. 在 中清除的位`b`将在 中未修改`a`。

因此，如果位 0 设置为`b`，它也将设置为`a`，如下例所示：

*   这将*设置*整数的底部位：

    `a |= 0x01`

*   这将*清除*底部位：

    `a &= ~0x01`

*   这将*切换*底部位：

    `a ^= 0x01;`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T13:50:45.467

这段代码：

```
int i = 5;
i |= 10; 
```

相当于这段代码：

```
int i = 5;
i = i | 10; 
```

同样，这段代码：

```
boolean b = false;
b |= true; 
```

相当于这个：

```
boolean b = false;
b = b | true; 
```

在第一个示例中，正在执行按位 OR。在第二个示例中，执行布尔 OR。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T14:20:03.240

`a |= b`是相同的`a = a | b`

`a | b`如果两个操作数都是整数类型（int、short 等），则为位运算符。 *如果两个操作数都是布尔值，那么它是一个布尔值或。*

当两者都是布尔值时，`a`和之间的`b`区别在于，在第一个中，双方*总是*被评估，在后者中，只有当为假时才被评估。它是一种“快捷方式”运算符。`a | b``a || b`*`b``a`*

 *这对于以下情况很有用：

```
if (a == null || a.equals(b)) { .. do something .. } // works

if (a == null | a.equals(b)) { .. do something .. } // NPE if a is null 
```

另一方面，`||`实际上是作为字节码/机器码中的另一个条件跳转来实现的。在某些情况下，使用运算符评估布尔条件可能会更快，`|`以避免额外的跳转（以及因此分支预测等）。绝对是低级微基准测试来确定哪个更好（并且通常在大多数应用程序中并不重要）。

当你这样做时，`a |= b`你总是在评估`a`和`b`。拥有运算符并没有真正意义`a ||= b`，因为等效项`a = a || b`将转换为：

```
if (a) a = true;
else if (b) a = true
else a = false; 
```

...由于`||`评估的条件性质。换句话说，如果已经为真，`b`则不会被评估。`a`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T13:55:09.993

代码有可能有错误吗？

`matches = matches || field.contains(search);`

`true`如果至少一个字段包含`search`变量，那么匹配应该是？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T16:36:01.023

该代码片段是何时使用该运算符的一个糟糕示例。老实说，我想不出什么时候使用这个运算符的好例子，但这是我最好的尝试：

```
boolean somethingIsTrue = testSomethingTrue();
if(somethingIsTrue){
    //Do something
}
somethingIsTrue |= testSomethingElseTrue();
if(somethingIsTrue){
    //Do something else
}
somethingIsTrue |= testSomethingElseTrue2();
if(somethingIsTrue){
    //Do something else than something or something else
} 
```

**注意：** 您需要 3 个 if，否则您只能`somethingIsTrue | testSomethingElseTrue()`为第二个 if 做。

* * *

如果您想知道为什么不应该在第一个示例中使用运算符，原因如下：

从性能的角度来看，它很差，因为它对每个循环进行比较和分配，而不仅仅是比较。此外，即使未来的迭代没有效果，它也会继续迭代（一旦`matches`设置`true`它就不会改变，`String.contains`也没有副作用）。

从可读性的角度来看，它也很差，仅基于这个问题的存在；）

因此，代替那个片段我会去：

```
for (String search : textSearch.getValue()){
    if(field.contains(search)){
        matches = true;
        break;
    }
} 
```

顺便说一句，在我看来，当他（s）写这篇文章时，原始编码器可能已经玩了太多*代码*[高尔夫了：）](https://codegolf.stackexchange.com/)*

# python - 如何在删除时将外键设置为默认值？

> ID：10142066
> 
> 赞同：12
> 
> 时间：2012-04-13T13:48:10.990
> 
> 标签：python, sqlalchemy

`category_id`删除类别时如何将产品自动设置为默认值？例如`1`指向第一类。

```
class Product(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80))
    content = db.Column(db.Text(), unique=True)
    category_id = db.Column(db.Integer, db.ForeignKey('category.id'))
    atime = db.Column(db.DateTime())

    def __init__(self, name, content, category_id):
        self.name = name
        self.content = content
        self.category_id = category_id
        self.atime = datetime.now()

    def __repr__(self):
        return '<Product %r>' % self.id

class Category(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80))
    products = db.relationship('Product', backref='category', cascade="all, delete, delete-orphan")

    def __init__(self, *args, **kwargs):
        if len(kwargs) > 0:
            self.name = kwargs['name']

    def __repr__(self):
        return '<Category %r>' % self.name 
```

我不想使用级联删除它们！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-13T16:26:09.500

这里需要在编排中执行两件事：

1.  使用适当的引用操作定义外键
2.  配置SA关系的级联选项

我认为最干净的方法是在删除其 Category: 时将其设置`category_id`为一个值：是该子句的可能[引用操作](http://en.wikipedia.org/wiki/Foreign_key#Referential_Actions)之一，您可以将其添加到[ForeignKey](http://docs.sqlalchemy.org/en/latest/core/schema.html?highlight=foreignkey#sqlalchemy.schema.ForeignKey)定义中：`NULL``SET NULL``ON DELETE`

```
category_id = db.Column(db.Integer, db.ForeignKey('category.id', ondelete='SET NULL')) 
```

以同样的方式您可以使用选项[`SET DEFAULT`](http://en.wikipedia.org/wiki/Foreign_key#SET_DEFAULT)，但在这种情况下，您还需要为列配置默认值`category_id`：`category_id = Column(..., server_default=1)`。请注意，这些实现在不同的 RDBMS 之间是不同的。

至于`cascade`选项：您应该基本上`cascade="all, delete, delete-orphan"`从您的`products`关系定义中删除。实际上，您要确保`delete, delete-orphan`不存在。

话虽如此，您确实需要测试您的代码以涵盖不同的场景，因为`Category`对象的两次不同删除可能会根据您的 RDBMS 和 SA 配置产生不同的结果：

```
# scenario-1: delete in session: SA might set category_id of all chilren Products to None
c1 = session.query(Category).get(1)
session.delete(c1)
session.commit()

# scenario-2: delete without loading an object into the session: SA will perform no additional logic
session.query(Category).filter(Category.id == 2).delete()
session.commit() 
```

希望这一切都能为您指明正确的方向。像往常一样，使用[`echo=True`](https://stackoverflow.com/questions/1171166/how-can-i-profile-a-sqlalchemy-powered-application/1175677#1175677)或仅通过配置`logging`模块在您的测试代码中启用 SQL 日志记录，您将看到 SA 对您的数据库执行的操作。您在 SQL 中没有看到的其他更改是由 RDBMS 本身根据您的引用操作完成的。

# xml - 创建 Excel 格式的 XML

> ID：10142068
> 
> 赞同：2
> 
> 时间：2012-04-13T13:48:25.217
> 
> 标签：xml, excel

我有一个用户用来在文件中输入和保存数据的应用程序。然后可以将每个文件的数据导出为 XML。到目前为止，一切都很好; XML 生成没有问题。

然后需要在 Excel 中查看此 XML 数据。但是，如果直接打开 XML 文件，Excel 中的数据格式就不太理想——例如，列不按顺序排列。

使用 Excel，我可以创建一个巧妙地显示 XML 数据的映射。但是，我必须为 Excel 文件指定一个特定的数据源。因此，它对所有其他 XML 文件不是很有用，尽管它们在结构上是相同的。

我可以刷新数据源以从 XML 文件更新它，或者我可以更改数据源，但这仍然需要先打开 Excel 文件，然后再更改数据源。对于我的用户来说，这比简单地双击输出的文件要麻烦得多。

我想知道是否有某种方式可以在 XML 文件中指定如何在 Excel 中显示数据，但这在我看来违反了设计内容分离范式。

我的目标是为他们提供一键式方法来输出他们的数据，然后在 Excel 中打开该数据。有人有什么想法吗？

我怀疑 XSL 可能是答案，尽管我不清楚如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T20:30:43.037

我认为您需要将 XML 模式（XSD 文件）与 Excel 文件相关联，然后保存。这将为用户提供将文件导出为标准化和经过验证的 XML 数据的可能性。您可以按照本指南[http://www.mrexcel.com/articles/using-xml-in-excel.php](http://www.mrexcel.com/articles/using-xml-in-excel.php)然后根据您的需要个性化 XSD 文件。

# java - Java：如何将 switch 语句的情况转移到单独的文件中？

> ID：10142072
> 
> 赞同：1
> 
> 时间：2012-04-13T13:48:50.773
> 
> 标签：java

我有一个带有`switch`语句的 Java 方法。

它工作正常，但我有很多案例，可能有 20 个或更多，如下所示。

```
switch (result)  // result is of type Enum
{
    case 1:
        break;

    case 2:
        break;

    //----
    //----
    //----

    default:
        break;
}  // End of Switch 
```

请让我知道如何将这些案例转移到另一个文件中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T13:56:49.380

不，Java 没有像 C 那样的#include 工具。

你最好简单地重构你的逻辑。你问的事实告诉我你很可能需要一些更好的抽象。

但是，至少你可以这样做：

```
public class HandleCases {

    public static Result handleCase1(...parameters...) {
        ...
    }

    public static Result handleCase2(...parameters...) {
        ...
    }

    public static Result handleCase3(...parameters...) {
        ...
    }
} 
```

进而：

```
Result r = null;

switch(flag) {

    case 1:
        r = HandleCases.handleCase1( ... );
        break;

    case 2:
        r = HandleCases.handleCase1( ... );
        break;

    case 3:
        r = HandleCases.handleCase1( ... );
        break;
    ...
 } 
```

Result holder 是您可以取回所需值的地方。

但总的来说，这是一个拼凑而成的作品，您的设计可能需要一些工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T14:00:51.047

如果切换条件是一个实际的枚举，您可以在枚举上实现一个方法，例如

```
public enum Colors {
    RED { public void run() { /* do stuff for red */ } },
    GREEN { public void run() { /* do stuff for green */ } },
    BLUE { public void run() { /* do stuff for blue */ } },

    public abstract void run();  
} 
```

你的开关将是一个方法调用：

```
Color result = ...;
// was switch (result) { case RED: ... }
result.run(); 
```

结果是“开关”在一个单独的文件中。枚举使它变得容易，但仍然将所有“切换”代码放在一个文件中，现在就是枚举的文件。您可以遵循相同的模式，在其自己的单例类中定义每个常量，并且都实现相同的接口/抽象类，以在单独的文件中获取每个条件。

如果你有很多开关用相同的常量做不同的事情，另一个探索的选择是访问者模式。 [http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T13:52:46.603

你不能那样做。但是，您可以做的是，如果您有多个针对同一条件的 case 语句，那么您可以将它们组合在一起。这称为[Fall Through](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)。

```
switch(flag) {
    case 1:
    case 3:
    case 5:
        System.out.println("Odd");
        break;
    case 2:
    case 4:
    case 6:
        System.out.println("Even");
        break;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-13T14:12:55.897

对于无需重新设计的直接解决方案，您可以使用**Will 的解决方案**。但正如他已经指出的那样，您似乎应该重新设计。

为此，请考虑以下来自[http://c2.com/cgi/wiki?SwitchStatementsSmell](http://c2.com/cgi/wiki?SwitchStatementsSmell)的代码示例，它使用**动态调度而不是手动 switch 语句**：

```
method foo(int thingType) {
    switch (thingType) {
        case TYPE_ONE:
            oneFoo();
            break;
        case TYPE_TWO:
            twoFoo();
            break;
        case TYPE_THREE:
            threeFoo();
            break;
        case TYPE_FOUR:
            fourFoo();
            break;
    }
}

method oneFoo() {
}

method twoFoo() {
}

method threeFoo() {
}

method fourFoo() {
}

method bar(int thingType) {
    switch (thingType) {
        case TYPE_ONE:
            oneBar();
            break;
        case TYPE_TWO:
            twoBar();
            break;
        case TYPE_THREE:
            threeBar();
            break;
        case TYPE_FOUR:
            fourBar();
            break;
    }
}

method oneBar() {
}

method twoBar() {
}

method threeBar() {
}

method fourBar() {
} 
```

相对

```
class one extends base {
    method foo() {
    }
    method bar() {
    }
}
class two extends base {
    method foo() {
    }
    method bar() {
    }
}
class three extends base {
    method foo() {
    }
    method bar() {
    }
}
class four extends base {
    method foo() {
    }
    method bar() {
    }
} 
```

然后你可以简单地调用`anObjectOfTypeBase.foo()`and `anObjectOfTypeBase.bar()`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T13:53:01.170

不，你不能。在 Java 中，同一个类的全部代码必须在同一个文件中，更何况是同一个方法或语句的代码。

如果您有很多情况，您可以做的就是在一种方法中改变您的“切换”`HashMap`方法。例如，您可以创建一个抽象`Action`类，并放入`Map`许多动作，它们是不同文件上的不同类。然后在您的代码中，您可以执行以下操作：

```
Action action = map.get(result);
if (action != null)
   action.execute();
else
   // default case 
```

这种模式称为[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T13:55:13.923

这取决于你想怎么做。

首先，如果逻辑与*同一个*类相关（并且它是紧密耦合的），那么不，你不能把它转移到另一个类。但是，如果您想将这个类的逻辑*分离*到另一个类中，则可以在另一个类中创建一个静态方法来执行该`switch`语句。

或者，您可以重新访问和重构您的代码，这样就不需要 20 的 switch 语句。

# javascript - Verite Timeline 在处理大量数据集时是否表现良好？

> ID：10142076
> 
> 赞同：0
> 
> 时间：2012-04-13T13:49:11.657
> 
> 标签：javascript, data-visualization, timeline

我需要在时间轴内可视化大量数据。我发现 ' [verite Timeline](http://timeline.verite.co/) ' 看起来很有希望，但我没有任何经验，使用了很多数据集。有没有人可以告诉我这个工具的性能或告诉我更好的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:31:19.923

对不起..再次，但是用英语....

Verite 时间轴支持 JSON 作为数据源，我在 MVC3 中有一个项目并将数据源路由到控制器。您显然可以以不同的方式进行操作，例如从 Web 服务或 Ria 等....

要启动您的时间线，请将时间线初始脚本放在头部或正文中：

```
 var timeline = new VMM.Timeline();  
 timeline.init("http://localhost:9306/TimeLine/Json"); 
```

您创建类来存储数据结构，这将允许您从驱动程序以相同格式 json 返回类的实例：

```
public class json 
```

{
公共时间线时间线{获取；放; } }

```
public class timeLine
{
public string headline { get; set; }
public string type { get; set; }
public string startDate { get; set; }
public string text { get; set; }
public asset asset { get; set; }
public List<date> date { get; set; }
}

public class asset 
{
public string media { get; set; }
public string credit { get; set; }
public string caption { get; set; }
}

public class date
{
public string startDate { get; set; }
public string endDate { get; set; }
public string headline { get; set; }
public string text { get; set; }
public asset asset { get; set; }
} 
```

控制器：

```
 public ActionResult Json()
   {
    json j = new json();

    j.timeline = new timeLine();
    j.timeline.headline = "TimeLine";
    j.timeline.type = "default";
    j.timeline.startDate = DateTime.Now.Year + "," + DateTime.Now.Month;
    j.timeline.text = "<p>Time Line de todo el contenido.</p>";

    j.timeline.asset = new asset();
    j.timeline.asset.media = "";
    j.timeline.asset.credit = "Desarrollador por Mauricio Farias www.ald.cl             mfarias@ald.cl";
    j.timeline.asset.caption = "Develop By Mauricio Farias";

    j.timeline.date = new List<date>();
    //for each de tiempos
    for (int i = 0; i < 20; i++)
    {
        date d = new date();
        d.startDate = DateTime.Now.Year + "," + DateTime.Now.Month + "," + i;
        d.endDate = DateTime.Now.Year + "," + DateTime.Now.Month + "," + (i + 1);
        d.headline = "Headline date for date in timeline";
        d.text = "<p>text in date for date in timeline</p>";

        d.asset = new asset();
        d.asset.media = "";
        d.asset.credit = "credit in asset for date in timeline";
        d.asset.caption = "caption in asset for date in timeline";
        j.timeline.date.Add(d);
    }

        return Json(j, JsonRequestBehavior.AllowGet);
  } 
```

在听证会上或您的情况下可能是一个 aspx 或 html 页面（记得放 css）：

```
<div id="timeline">
</div>
<script src="../../Content/assets/js/timeline-min.js"></script>
<script src="../../Content/assets/js/script.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T21:29:09.347

如他们的[常见问题解答](http://timeline.verite.co/#faq)（第四个问题）所述：

> **有多少条目在 TimelineJS 中效果最好？**
> 
> 时间线针对最多 100 个条目进行了优化，最好是 20-30 个条目。其他任何事情都可能导致加载问题。

现在也许你不能尊重他们的限制，但我不认为将它与“大量数据”一起使用会是一个很好的体验。:) （好吧，你一次只能加载 100 个条目，但我会留给你）

我无法向您推荐替代方案，抱歉。

# ant - 如何在 apache ant 的 build.xml 中的类路径中加载所有支持的 jar

> ID：10142080
> 
> 赞同：0
> 
> 时间：2012-04-13T13:49:18.210
> 
> 标签：ant, build, hudson

我为每个创建 jar、war、ear 文件的项目制作了 build.xml 文件

为了调用这个 build.xml，我又做了一个主 build.xml

现在我已经在哈德逊配置了这个项目

问题是在从 hudson 构建项目时，hudson 无法将相对路径转换为绝对路径。

所以我想做一些全局声明并添加所有 jar 路径并在 build.xml 的类路径中加载所有 jar 路径

```
<fileset dir="${class.dir}" includes="**/*.jar"/>

<fileset dir="${AllJar.dir}" includes="**/*.jar"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:59:31.537

关键是用一些 id 定义单个文件集，并[用 refid 定义你的主路径](http://ant.apache.org/manual/using.html)

引用链接：

> 类路径结构可以通过嵌套元素包含对另一个类路径结构（路径本身就是资源集合）的引用：

```
<path id="base.path">
  <pathelement path="${classpath}"/>
  <fileset dir="lib">
    <include name="**/*.jar"/>
  </fileset>
  <pathelement location="classes"/>
</path>

<path id="tests.path" cache="true">
  <path refid="base.path"/>
  <pathelement location="testclasses"/>
</path> 
```

在这个 test.path 中包括 base.path ，而 base.path 又包括 ${classpath} 和 lib 文件夹中的所有 jars。

# mysql - 有子句问题 - 返回错误数据

> ID：10142086
> 
> 赞同：0
> 
> 时间：2012-04-13T13:49:37.277
> 
> 标签：mysql

我对我一直在处理的一个问题感到有点困惑，希望能得到一些帮助。我相信我应该使用 HAVING 子句，但不知道如何让它正常工作。与显示几个成员相反，它显示 1 个成员并将所有内容相加。

查询应列出总明细租金高于整体平均明细租金两倍的每个客户。输出应按会员编号排序。

Mem_num mem_fname mem_lname Total)detail_fee 103 Curt Knight 7.50 105 Iva Mclain 7.00 110 Lewis Rossale 9.00 111 Stacy Mann 9.00

```
select m.mem_num, mem_fname, mem_lname, sum(detail_fee), avg(detail_fee)
from membership as m, rental as r
left outer join detailrental as d on (r.rent_num = d.rent_num)
group by detail_fee
having sum(detail_fee); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:35:05.897

```
select m.mem_num, mem_fname, mem_lname, sum(detail_fee) as sum_fee, avg(detail_fee) as avg_fee
from membership as m, rental as r
left outer join detailrental as d on (r.rent_num = d.rent_num)
group by mem_num
having sum_fee > 2 * avg_fee; 
```

上面的查询比你的更“正确”。问题是这样的：

```
from membership as m, rental as r 
```

这是一个交叉连接。意思是，会员中的每一行都与出租中的每一行相关联。我猜这会给你错误的结果。这两张表之间没有联系吗？就像是

```
from membership as m 
inner join rental as r 
on m.id = r.member_id 
```

?

# android - 如何修复显示“语法错误 OnClickListener，删除此令牌”的错误

> ID：10142087
> 
> 赞同：0
> 
> 时间：2012-04-13T13:49:38.607
> 
> 标签：android

私有类按钮 OnClickListener 实现 View.OnClickListener

{

国际定位；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:52:01.097

`Button`和之间有一个空格`OnClickListener`；编译器期望`implements`, `extends`, `{`or `<`or ... 类名之后的任何内容。删除空间应该可以修复错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:58:34.590

你的班级名称不应该有空格。试试 ButtonOnClickListener。此外，在为您自己的类指定与内置类（例如 Button）相同的名称时要小心。在声明这种类型的变量时，您必须确保只导入所需的类或使用完整的包名。

# android - 如何以编程方式更改 WebView 比例？

> ID：10142090
> 
> 赞同：2
> 
> 时间：2012-04-13T13:49:51.537
> 
> 标签：android, webview, zooming, scale

我正在使用 PhoneGap 为 android 开发。下面你可以看到我的代码，我不能做的是在用户更改比例后将 WebView 比例重置为 1。

> 重置代码应在“DisableZoom”方法中实现。

```
public class App extends DroidGap {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
        this.appView.addJavascriptInterface(new __Funcs(this.appView), "__FUNCS");

    }
    public class __Funcs{
        WebView appView;
        public __Funcs(WebView appView){
            this.appView = appView;
        }
        public void EnableZoom(){
            this.appView.getSettings().setSupportZoom(true);
            this.appView.getSettings().setBuiltInZoomControls(true);

        }
        public float DisableZoom(){
            this.appView.getSettings().setBuiltInZoomControls(false);
            this.appView.getSettings().setSupportZoom(false);
            this.appView.getSettings().setDefaultZoom(ZoomDensity.FAR);

            return this.appView.getScale();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-28T15:10:23.890

我认为将缩放重置为初始值的唯一方法是使用视口设置来设置初始比例并重新加载页面。在我对 android Phonegap 应用程序的测试中， `getSettings().setLoadWithOverviewMode(true)`只有在没有通过视口进行设置的情况下才有效。

# android - 将 TableRow 动态添加到线性布局 android

> ID：10142093
> 
> 赞同：0
> 
> 时间：2012-04-13T13:49:55.783
> 
> 标签：android, android-linearlayout, tablerow

我需要在我的应用程序中动态地将一些表格添加到线性布局中。我写了这段代码：

```
LinearLayout tabella = (LinearLayout) findViewById(R.id.tabella_contatori);

    for(int i =0; i<array_list.size(); i++){
        TableRow row = new TableRow(getApplicationContext());
        row.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

        TextView data = new TextView(getApplicationContext());
        data.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 0.2f));
        data.setTextAppearance(getApplicationContext(), android.R.attr.textAppearanceMedium);
        data.setTextColor(Color.BLACK);
        data.setBackgroundColor(Color.WHITE);
        data.setPadding(2, 0, 0, 0);
        data.setText("asd");

        row.addView(data);
        tabella.addView(row);
    }
} 
```

但是当我打开应用程序时，什么也没有出现。我已经检查了 array_list.size 是否大于 0。我该怎么办？谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:19:58.557

问题出在您的 TextView 布局参数中。类型应该是 TableRow.LayoutParams 而不是 LinearLayout.LayoutParams。 `data.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:10:27.377

采用表格布局并尝试在您的 main.xml 中使用它...

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myTableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
     <TableRow
          android:layout_width="fill_parent"
          android:layout_height="wrap_content">

          <TextView android:text="Some Text"/>

     </TableRow>
</TableLayout> 
```

在您的活动中

```
this.setContentView(R.layout.main);

/* Find Tablelayout defined in main.xml */
TableLayout tl = (TableLayout)findViewById(R.id.myTableLayout);
     /* Create a new row to be added. */
     TableRow tr = new TableRow(this);
     tr.setLayoutParams(new LayoutParams(
                    LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));
          /* Create a TextView to be the row-content. */    

        TextView data = new TextView(getApplicationContext());
        data.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, 0.2f));
        data.setTextAppearance(getApplicationContext(), android.R.attr.textAppearanceMedium);
        data.setTextColor(Color.BLACK);
        data.setBackgroundColor(Color.WHITE);
        data.setPadding(2, 0, 0, 0);
        data.setText("asd");

          /* Add TextView to row. */
          tr.addView(data);
    /* Add row to TableLayout. */
    tl.addView(tr,new TableLayout.LayoutParams(
          LayoutParams.FILL_PARENT,
          LayoutParams.WRAP_CONTENT)); 
```

# xml - 使用电子表格ml 换行文本的样式

> ID：10142095
> 
> 赞同：5
> 
> 时间：2012-04-13T13:49:56.467
> 
> 标签：xml, excel, xslt, spreadsheetml

我用 xslt 生成我的电子表格，并想要一个带有换行文本的单元格（或者更好：一个带有换行符的文本）。

所以我的 xslt 为 sheetdata 生成以下 XML：

```
<sheetData>
  <row r="1">
    <c r="A1" t="inlineStr">
      <is>
        <t>
          a simple string
          line break jeeeehaaa
        </t>
      </is>
    </c>
  </row>
</sheetData> 
```

完成工作簿构建后，我在 Excel 中打开它；并且没有换行符，只是 A1 中的一个简单的单行字符串。

有没有人解决这个问题？不必在 xml 或 xslt 中（但会很好）。我也可以在 C# 中做一些事情

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T04:30:34.243

在 excel 中，所有与样式相关的信息都存储在 style.xml 文件中。因此，包装信息应该存储在 style.xml 中，并且样式 ID 应该被称为`<c r="A1" t="inlineStr">`另一个属性“s”（表示样式）。让我展示一下我的意思是什么..

我确实有一个带有一些文本的excel，并且单元格确实被包裹了。

如果我看到它的 sheet.xml 数据，它将在标签中有`s="1"`属性值项。`<c>`

因此，如果我打开 style.xml 并查看单元格样式信息，我将获得`<cellXfs>`标签和一个`<xf>`子标签，在其中我会获得一个`<alignment>`带有 wrapText 属性的标签，其值为“1”（确实是“真”）。

由于我是 SO 新手，因此无法发布图片。希望这可以帮助 ：）

# iphone - 如何在文本字段内制作滚动列表

> ID：10142096
> 
> 赞同：1
> 
> 时间：2012-04-13T13:49:58.823
> 
> 标签：iphone, objective-c, xcode

谁能建议我，我正在制作一个 iphone 应用程序，其中有一个文本字段，用户必须从列表中选择选项，我使用 tableView 显示列表，用户从中选择任何一个。但是我希望文本字段作为滚轮，用户可以在其中滚动文本字段内的列表，并且当用户像 UIDatePicker 那样停止滚动时，在文本字段中选择数据。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:52:14.237

由于 UITextView 是 UIScrollView 的子类，因此您应该能够为您的 UITextView 创建 UIScrollViewDelegate 并实现 scrollViewDidScroll:。使用 contentOffset 来确定用户滚动到的位置。

# silverlight - 使用 MVVM/CSLA 在 Silverlight 中对 XAML 进行单元测试

> ID：10142097
> 
> 赞同：1
> 
> 时间：2012-04-13T13:50:01.193
> 
> 标签：silverlight, unit-testing, mvvm, csla

在我们的主要 Silverlight 业务应用程序中，我们有很多基于用户角色可见和/或启用的控件（例如，只有在管理员角色中才能看到管理员菜单链接）。我们通过转换器控制这种可见性。

我刚开始编写单元测试，我希望能够根据不同的角色测试这些控件的可见性（如果我们在那里有错误，那就太糟糕了）。但是，由于我们使用的是 MVVM 模式，并且控件没有命名，所以我不知道该怎么做。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:37:55.710

这正是*ViewModel*的用途。您应该能够**轻松**地测试您的视图模型（在您的情况下，我想它们是否公开了正确的角色来查看）。而且由于转换器只是一个普通的类，它们也应该被测试。

在单元测试方面，你真的只有两个任务要做：

1.  测试视图模型是否暴露了正确的数据
2.  测试转换器是否正确将*角色转换为可见性*

这里是单元测试结束的地方。这些测试应该保证您的视图被提供适当的数据以按照您的计划呈现自己。现在是否这样做是不同的事情，但这超出了单元测试的范围。最终测试属于验收测试、质量保证以及自动化/脚本化 UI 测试，而且通常是人工验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:35:30.250

我认为命名控件不会以任何方式破坏 MVVM。如果您从根本上反对命名它们，您可能可以使用 VisualTreeHelper 遍历控件树并找到您感兴趣的控件。

您可以使用 Moq 模拟视图模型来模拟特定角色，并使用 Microsoft 的 Silverlight 测试框架来运行测试。

# windows-phone-7 - 使用时出错 xml

> ID：10142100
> 
> 赞同：0
> 
> 时间：2012-04-13T13:50:08.790
> 
> 标签：windows-phone-7, xaml

我正在尝试使用 a 但出现错误：属性“内容”设置不止一次。如果我删除标签之间的两行代码中的任何一行，它就会消失。因此，它们似乎都不是单独的错误，但两者共同导致了问题。

```
<Grid x:Name="LayoutRoot" Background="Transparent">

    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="New Trip" Style="{StaticResource PhoneTextNormalStyle}" Height="40" />
        <Button Content="Back" Height="71" Name="button1" Width="103" HorizontalContentAlignment="Stretch" VerticalAlignment="Top" HorizontalAlignment="Right" Click="button1_Click" />
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ScrollViewer>
            <TextBlock Height="60" HorizontalAlignment="Left" Margin="65,12,0,0" Name="textBlock1" Text="Username" VerticalAlignment="Top" Width="169" />
            <TextBox Height="78" HorizontalAlignment="Left" Margin="60,60,0,0" Name="textBoxUsername"  VerticalAlignment="Top" Width="274"  />
        </ScrollViewer>
    </Grid>

</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:54:37.137

ScrollViewer 只能有 1 个内容，因此将 ScrollViewer 内的控件包装在 Grid、DockPanel、StackPanel 等容器中

```
 <ScrollViewer>
        <StackPanel>
            <TextBlock Height="60" HorizontalAlignment="Left" Margin="65,12,0,0" Name="textBlock1" Text="Username" VerticalAlignment="Top" Width="169" />
            <TextBox Height="78" HorizontalAlignment="Left" Margin="60,60,0,0" Name="textBoxUsername"  VerticalAlignment="Top" Width="274"  />
        </StackPanel>
      </ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:51:48.963

将您的`<TextBlock>`and`<TextBox>`放在另一个容器中，例如 StackPanel。

# c# - 实体框架：选择其子实体具有特定标志集的所有实体

> ID：10142101
> 
> 赞同：0
> 
> 时间：2012-04-13T13:50:09.570
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

这应该是一个容易回答的问题，尽管我无法真正弄清楚。情况如下：

我使用实体框架 4.1 作为 ORM，使用 Code First。我已经定义了一个非常复杂的对象模型，到目前为止一切正常。

我的模型的一部分看起来像这样（为了清楚起见，省略了不重要的部分）：

```
public class Tier1
{
public virtual ICollection<Tier2> t2 {get; set;}
}

public Class Tier2
{
public virtual Tier3 t3 {get; set;}
}

public Class Tier3
{
public bool isActive
} 
```

如何制定我的语句以检索仅包括已设置为的实体的`tier1`元素？`tier3``isActive``true`

```
context.Tier1s.Where(???) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T13:56:09.413

我假设 tier2 只有一个 tier3 是吗？在您的代码中似乎是这样。如果是这样试试这个：

```
var myTiers = context.Tier1s
    .Where(tier => tier.t2.Any(tier2 => tier2.t3.isActive))
    .ToList(); 
```

# spring-security - 如何在 Spring Security 应用程序中列出 *all* 用户和 *all* 权限

> ID：10142107
> 
> 赞同：5
> 
> 时间：2012-04-13T13:50:23.927
> 
> 标签：spring-security

Q1) Spring Security 中是否有一种方法（即类方法）允许您列出Sprint Security 用户和角色表中的*所有用户和角色？*（我不只查找登录用户；我不只查找给定用户的权限。我正在查找所有用户和所有权限。）

Q1b）如果有办法，运行此查询的用户是否需要特殊权限？

（我可以通过编写自己的 SQL 语句来查询用户和权限表来解决这个问题，但这似乎是不必要的工作，容易出错，并且破坏了 Spring Security API。）

如果有帮助，我的应用程序上下文设置是相当标准的：

```
<authentication-manager alias="myAuthenticationManager">
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"
            users-by-username-query="select username, password, enabled from users where users.username=?"
            authorities-by-username-query="select users.username,authority from users,authorities where users.username=authorities.username and users.username=?" />
    </authentication-provider>
</authentication-manager> 
```

和

```
<beans:bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <beans:property name="driverClassName">
        <beans:value>com.mysql.jdbc.Driver</beans:value>
    </beans:property>
    <beans:property name="url">
        <beans:value>jdbc:mysql://XXXXX:XXXX/XXXXX</beans:value>
    </beans:property>
    <beans:property name="username">
        <beans:value>XXXXX</beans:value>
    </beans:property>
    <beans:property name="password">
        <beans:value>XXXXXX</beans:value>
    </beans:property>
</beans:bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:53:35.630

否 - 查看您正在使用的[JdbcUserDetailsManager](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/provisioning/JdbcUserDetailsManager.html)的 API，没有列出所有用户或列出所有权限的方法。您需要编写自定义代码来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:10:32.060

Spring Security 实现解决了非常具体的任务，在大多数情况下，这个任务只需要一个用户。如此多的 Spring Security 查询包含用户过滤器“where username = ?”。您可以通过下载源并搜索字符串 ["select ] 轻松检查所有可用查询。

因此，您应该在 DAO 层中为您的任务编写自己的查询（JDBC 或 Hibernate）。

# php - 通过单次提交附加所有表单复选框数据

> ID：10142109
> 
> 赞同：0
> 
> 时间：2012-04-13T13:50:31.227
> 
> 标签：php, javascript, html, forms, checkbox

我有多个表格，每个表格都有多个复选框。对于所有表单，在页面下方的某个位置提供了一个提交，以便在单击时预览所有选中的信息

```
<form name="a1" action="start.php" method="post"> 
<input type="checkbox" id="add" name="check_list[]" value="x1">x1 
<input type="checkbox" id="add" name="check_list[]" value="x2">x2
<input type="checkbox" id="add" name="check_list[]" value="x3">x3
</form>

<form name="a2" action="start.php" method="post"> 
<input type="checkbox" id="add" name="check_list[]" value="y1">y1 
<input type="checkbox" id="add" name="check_list[]" value="y2">y2
<input type="checkbox" id="add" name="check_list[]" value="y3">y3
</form>

<form name="a3" action="start.php" method="post"> 
<input type="checkbox" id="add" name="check_list[]" value="z1">z1 
<input type="checkbox" id="add" name="check_list[]" value="z2">z2
<input type="checkbox" id="add" name="check_list[]" value="z3">z3
</form>

<div> <input type="submit" value="preview" onclick="addForm()"> </div> 
```

`validateform`在哪里

```
<script type="text/javascript">function addForm(){
document.forms["a1"].submit();
document.forms["a2"].submit();
document.forms["a3"].submit();
} 
```

并且`start.php`是

```
<?php
if(!empty($_POST['check_list'])) {
    foreach($_POST['check_list'] as $check) {
            echo $check."<br/>"; 
    }
}
?> 
```

问题是无法通过函数附加所有表单数据`addForm()` 请帮助我了解如何显示所有复选框信息，这些信息取自所有使用 PHP 的表单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:57:50.727

当您在第一个表单“a1”上调用提交函数时，您会自动将数据发送到start.php，而其他两个表单将不会被提交。最佳解决方案：**ajax**

XMLHTTPRequest 允许您在不离开页面的情况下发布表单并获得回复，您可以将所有三个表单提交的结果组合在一起并显示它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:00:31.773

如果您是相关 HTML 代码的作者，我建议您重构代码并仅创建一个包含所有复选框*和*提交按钮的表单。如果是样式给您带来困扰，您可以简单地将输入元素放置在适当的`<fieldset>`元素中。

否则，如果您遇到了不是您编写的 HTML 代码，我建议您执行以下操作（尽管这确实不是一个很好的解决方案）：

编辑`addForm()`函数以在文档的某处创建第四个`<form>`元素，并将其样式设置为`display: none;`. 然后将以前表单中的所有复选框附加或克隆到这个新表单，然后提交。这应该为您提供一组复选框，您可以在 PHP 端处理这些复选框，就像初始 HTML 代码编写正确时一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T13:54:23.110

以这种方式一次提交多个表格是不可能的。如果您想采用这种方法，则需要使用 AJAX，因为这是让浏览器维护多个活动请求的唯一方法。

但是，查看代码，我看不出您需要多个表单的任何理由。你应该能够简单地做到这一点：

```
<form name="a1" action="start.php" method="post"> 
  <input type="checkbox" id="add" name="check_list[]" value="x1">x1 
  <input type="checkbox" id="add" name="check_list[]" value="x2">x2
  <input type="checkbox" id="add" name="check_list[]" value="x3">x3
  <input type="checkbox" id="add" name="check_list[]" value="y1">y1 
  <input type="checkbox" id="add" name="check_list[]" value="y2">y2
  <input type="checkbox" id="add" name="check_list[]" value="y3">y3
  <input type="checkbox" id="add" name="check_list[]" value="z1">z1 
  <input type="checkbox" id="add" name="check_list[]" value="z2">z2
  <input type="checkbox" id="add" name="check_list[]" value="z3">z3
  <div><input type="submit" value="preview"></div>
</form> 
```

...您甚至不需要任何 Javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T14:02:34.143

对于提交多个表单，您有两种解决方案：

1) 使用 Ajax 请求 2) 将所有信息附加到最终表单中并提交，为此您可以简单地使用 jQuery 或 javascript。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T13:54:50.833

如果您希望所有数据都转到 start.php，您应该只使用一个表单。

旁注：您不应该将输入的 id 属性全部设置为“add”。id 应该是唯一的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T13:57:06.417

如果您必须为此提供多种形式，就像您在评论中声明的那样，那么您需要更广泛的 javascript。

一个表单提交 = 一个 http 请求，3 个不起作用，但是您可以做的是绑定所有这些表单，因此当提交一个表单时，您可以收集所有表单中所有输入的数据并序列化该批次，然后将其作为获取请求。请记住禁用默认行为，以便表单不会这样提交。

或者，如果您必须有一个 POST 请求，请创建一个临时表单并在其中创建具有正确值的输入，然后提交该表单。

# facebook-graph-api - facebook 图形 api 限制参数

> ID：10142111
> 
> 赞同：3
> 
> 时间：2012-04-13T13:50:42.813
> 
> 标签：facebook-graph-api

我正在编写一个需要检索任何给定 facebook 页面上的所有帖子的应用程序。对于麦当劳页面，我会使用这个网址：

[https://graph.facebook.com/McDonalds/posts?access_token=xxx&limit=5000](https://graph.facebook.com/McDonalds/posts?access_token=xxx&limit=5000)

问题是，首先，我没有收到任何早于 2011-11-01 的帖子，并且显示的帖子数量远少于 5000。这意味着限制参数无法正常工作。我查了一下，发现这是一个已知的错误。

然后我尝试按照最后提供的下一个和上一个寻呼信息，甚至使用我无法超过 2011-01-24 的信息。在点击下一个链接 2 次后，会出现一个空白页面。麦当劳页面更老，包含更多帖子。所以问题是，我到底应该如何检索旧帖子。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:56:10.023

限制是有限制的。尝试使用 since & until 来扩展日期参数

[https://graph.facebook.com/McDonalds/posts?access_token=xxx&limit=5000&since=2+years+ago&until=now](https://graph.facebook.com/McDonalds/posts?access_token=xxx&limit=5000&since=2+years+ago&until=now)

```
&limit=5000&since=2+years+ago&until=now
&limit=5000&since=3+years+ago&until=now 
```

# android - 在 locationManager.removeUpdates() 并将 locationManager 设置为 null 后 GPS 图标仍在闪烁

> ID：10142113
> 
> 赞同：7
> 
> 时间：2012-04-13T13:50:48.837
> 
> 标签：android, geolocation, locationmanager

我正在开发位置跟踪应用程序。但是我通过做两件事来停止获取位置更新......

1.  locationManager.removeUpdates(this); 和
2.  将 locationManager 引用设置为 null。

这将停止获取我想要的位置坐标......

但问题是 gps 图标仍在闪烁......这会耗尽设备的电池。

所以请帮助我停止这个 GPS 修复......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T12:49:50.073

如果您在 mapView 中显示您的位置和/或指南针，您必须禁用它们。如果您不这样做，则 GPS 仍处于活动状态。

前任 ：

```
private MapView mapView;
private MyLocationOverlay Location;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.frame_layout);

    mapView = (MapView) this.findViewById(R.id.mapView);
    Location = new MyLocationOverlay(this, mapView);
    Location.enableMyLocation();
    Location.enableCompass();
    mapView.getOverlays().add(Location);
}

@Override
public void onDestroy() {
    Location.disableMyLocation();
    Location.disableCompass();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-15T10:28:16.310

除了上面的答案，在您描述的情况下，我建议您仔细检查您项目中使用的第三方库，尤其是一些分析库。

在我意识到 GPS 图标是由错误安装的 Flurry 引起的（`FlurryAgent.setReportLocation(true)`已设置`onEndSession()`但未调用`onStop()`）之前，我非常头疼。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T14:04:38.827

如果您在模拟器上进行测试，这是完全正常的行为。状态栏中的 GPS 图标永远不会消失。

如果你在硬件上测试这个，要么你已经调用`requestLocationUpdates()`了不止一次（并且没有删除其他更新），或者硬件上的其他东西正在使用 GPS。

# java - 将 Mysql 数据检索到 Netbeans 中的 JTable

> ID：10142115
> 
> 赞同：0
> 
> 时间：2012-04-13T13:51:04.783
> 
> 标签：java, mysql, jtable, netbeans-7

```
I used this coding to retrieve the Mysql data to the JTable.but it returns only the first data row of the relevant table of the database but then again it count the number of rows correctly and all it returns is same copy of the first row equal to the row count. 
```

我是 Java 和 netbeans 环境的新手，所以如果有人可以帮助我解决这个问题，我将不胜感激，并提前感谢您 :)

```
 Class.forName("com.mysql.jdbc.Driver").newInstance();
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost/data",          "root", "1122");    
    Statement stat = (Statement) con.createStatement();
    stat.executeQuery("select * from reserve;");
    ResultSet rs=stat.getResultSet();
    ResultSetMetaData md = rs.getMetaData();
    int columnCount = md.getColumnCount();
    Vector data=new Vector();
    Vector columnNames= new Vector();
    Vector row = new Vector(columnCount);

    for(int i=1;i<=columnCount;i++){
        columnNames.addElement(md.getColumnName(i));
    }
    while(rs.next()){
    for(int i=1; i<=columnCount; i++){
    row.addElement(rs.getObject(i));
    }      
    data.addElement(row);
    }        
    DefaultTableModel model = new DefaultTableModel(data, columnNames);
    jTable1.setModel( model ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:55:39.733

您不断添加到同一个向量行。尝试为 rs.next() 的每次迭代创建一个新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:45:51.247

您的 Vector 有错误。考虑使用类似的东西：

```
 Vector data = new Vector(columnCount);
    Vector row = new Vector(columnCount);
    Vector columnNames = new Vector(columnCount);

    for (int i = 1; i <= columnCount; i++) {
        columnNames.addElement(md.getColumnName(i));
    }
    while (rs.next()) {
        for (int i = 1; i <= columnCount; i++) {
            row.addElement(rs.getObject(i));

        }
        data.addElement(row);
        row = new Vector(columnCount); // Create a new row Vector
    }
    DefaultTableModel model = new DefaultTableModel(data, columnNames);
    jTable1.setModel( model ); 
```

# gwt - 在窗体面板中添加滚动面板

> ID：10142117
> 
> 赞同：0
> 
> 时间：2012-04-13T13:51:08.023
> 
> 标签：gwt, gxt, formpanel

我想在窗体面板中添加一个滚动面板，滚动面板将具有 com.extjs.gxt.ui.client.widget.form.AdapterField 的子类对象，它将使用隐藏和显示方法，如果代码片段可能会更好或给出示例代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:21:42.413

当您使用 GXT 类`AdapterField`并用 GXT 标记问题时，我假设您的意思是 GXT 类`FormPanel`。`ScrollPanel`是一个 GWT 类，并且没有直接对应的 GXT 类。

这是因为`FormPanel`继承自`ScrollContainer`，`FormPanel`已经有滚动支持，你只需要启用它。

```
formPanel.setScrollMode(Scroll.AUTO); 
```

或者

```
formPanel.setScrollMode(Scroll.AUTOY); 
```

当内容消耗的空间超过容器的空间时，将启用垂直滚动条。`ScrollContainer`有关如何处理滚动的更多选项，请参阅javadocs。

# jquery - jQuery Jcarousel 停止连续滚动

> ID：10142137
> 
> 赞同：0
> 
> 时间：2012-04-13T13:52:39.860
> 
> 标签：jquery, jcarousel

您好：感谢您查看此内容并尽可能提供帮助！

主页上的 Jcarousel 一直滚动，直到我更新到最新的 Wordpress 版本。然后它停止了。左右按钮也停止工作。这是网站： http: [//marcgarrisonphotography.com/](http://marcgarrisonphotography.com/)

图片滚动一次就完成了。在刷新页面之前什么都不会发生。

我已经阅读了我可以找到的所有与此问题相似的问题，尝试了一些不同的脚本示例，但没有任何效果。我对这个脚本比较陌生，不确定要更改哪些内容或它们的位置。

我看到有人称这是一个插件，但我在这个网站上没有看到任何实际的 JCarousel 或 JQuery 插件。我在 wp-admin 和 wp-includes 文件夹中找到了一个 js 文件夹。

这是该站点的 header.php 中的内容：

```
function mycarousel_initCallback(carousel)
{
    // Disable autoscrolling if the user clicks the prev or next button.
    carousel.buttonNext.bind('click', function() {
        carousel.startAuto(0);
    });

    carousel.buttonPrev.bind('click', function() {
        carousel.startAuto(0);
    });

    // Pause autoscrolling if the user moves with the cursor over the clip.
    carousel.clip.hover(function() {
        carousel.stopAuto();
    }, function() {
        carousel.startAuto();
    });
};

jQuery(document).ready(function() {
    jQuery('#mycarousel').jcarousel({
        auto: .01,
        wrap: 'last',
    speed: 10,
        initCallback: mycarousel_initCallback
    });
}); 
```

我尝试将换行更改为“连续”，更改自动编号和速度，但没有任何改变。

有没有人有任何想法？非常感谢你，迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:03:45.587

看起来您的 LightBox 功能引起了问题。在调试您的页面时，出现以下错误：

```
jQuery(".gallery1 a").lightBox is not a function
Line: 215 
```

这可能是因为您的 LightBox 脚本存在路径问题，或者只是没有将其包含在您的站点中。

## 编辑

通过查看源代码，您使用了两个不同版本的 jQuery：1.2.3 和 1.7.1。这也可能是您的 jCarousel 无法正常工作的原因。我会摆脱 jQuery 版本 1.2.3，因为它已经很老了。

# django - Django Rosetta - 通过用户许可而不是“翻译”组翻译

> ID：10142144
> 
> 赞同：4
> 
> 时间：2012-04-13T13:53:03.050
> 
> 标签：django, translation, django-authentication, django-rosetta

如何使用户能够执行**django-rosetta**翻译，而无需将每个用户依次分配到新的`translators`auth 组？

我目前有用户与特定的身份验证组相关联，具体取决于他们的网站角色。我想分配一个新的身份验证权限，例如：`sites|sites|Can Translate`并将其添加到现有角色。这将保持最小的用户管理，以便具有角色的用户`Gatekeeper`将被单独分配`Gatekeeper`auth 组，并且能够进行翻译。

如果不破解 django-rosetta 这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-18T06:21:24.873

似乎`rosetta`有一个`ROSETTA_ACCESS_CONTROL_FUNCTION`设置可以自定义访问权限。

> 确定给定用户是否可以访问翻译视图的替代功能。此函数接收用户作为其参数，并返回一个布尔值，指定是否允许传递的用户使用 Rosetta。

我希望它有帮助

# asp.net - 以编程方式在 Web 应用程序项目中创建用户控件

> ID：10142145
> 
> 赞同：3
> 
> 时间：2012-04-13T13:53:04.623
> 
> 标签：asp.net, web-applications

在**网站**项目中，如果我将用户控件的引用添加到页面或控件的标记中，如下所示：

```
<%@ Reference Control="~/controls/myUserControl.ascx" %> 
```

然后我可以使用自动生成的`ASP`命名空间以编程方式从代码隐藏创建该控件的实例：

```
ASP.controls_myUserControl_ascx myControlInstance =
    new ASP.controls_myUserControl_ascx(); 
```

但是，在**Web 应用程序**项目中，出现编译错误。[MSDN 上的此评论](http://msdn.microsoft.com/en-us/library/community/history/c0az2h86%28v=vs.85%29.aspx?id=7)表明它在 Web 应用程序项目中不起作用，但没有提出替代方案。

我可以创建一个存在于用户控件后面的类的实例，如下所示：

```
MyWebApplication.controls.myUserControl myControlInstance
    = new MyWebApplication.controls.myUserControl(); 
```

但这不包括 .ascx 文件中的标记（或任何服务器端控件），所以这没有用。

我可以实例化一个包含标记的控件，如下所示：

```
MyWebApplication.controls.myUserControl myControlInstance
    = LoadControl("~/controls/myUserControl.ascx")
      as MyWebApplication.controls.myUserControl; 
```

这让我可以访问所有属性并且似乎工作得很好。但是，当我可以在不同的项目类型中使用强类型类时，从其字符串路径加载控件似乎有点讨厌。

所以，我的问题是：**有没有更好的方法在 Web 应用程序项目中以编程方式创建用户控件？**还是我被困住了`LoadControl`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:57:54.903

LoadControl 是您以编程方式创建用户控件的方式。

# java - 涉及序列化对象和 Eclipse 的问题

> ID：10142148
> 
> 赞同：-1
> 
> 时间：2012-04-13T13:53:41.123
> 
> 标签：java, android, eclipse

我有一个 Serializable 对象，我从我的 android 模拟器发送到同一台计算机上的 java 服务器。我已经能够发送原始数据，但是当我发送对象时我遇到了问题。问题是我在 textpad 中创建了服务器，在 eclips 中创建了 android 应用程序。服务器正在寻找的对象是类型点，但 Eclipse 正在向它添加文件结构。即help.help.point。我是否需要将我的所有文件放在 eclips 的根目录中并摆脱包的东西，或者我可以在投射时根据服务器大小处理它。抱歉，如果不清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:22:38.917

完全限定的类名由包名和类名组成，因此您应该将包名添加到您的 textpad 编辑的类中，而不是在 eclipse 中省略它。

最好的方法当然是@njzk2 在评论中已经建议，共享通用代码（否则它将成为维护的噩梦）

# css - 以流畅的宽度围绕文本进行换行

> ID：10142150
> 
> 赞同：-1
> 
> 时间：2012-04-13T13:53:41.490
> 
> 标签：css

我在一个问题上停留了一段时间。我有一个 h1 元素，我需要一条线。像这样： ----- 文字 -----

页面的背景是一个图像，所以我不能只在我的 h1 元素上使用背景颜色来隐藏我的文本。

我设法用一个三列表得到了结果，但我需要为中心单元格设置一个宽度才能让它工作。

是否有可能让它与动态宽度一起工作？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:26:54.233

我会考虑使用 css 伪元素 :before 和 :after 在文本的任一侧添加行。

像这样的东西可能会起作用，但你将不得不玩：

```
.textWithLine:before {
    display:block;
    content: "";
    float:left;
    width: 300px;
    height: 1px;
    background: #000;
    margin:5px;
}
.textWithLine:after {
    display:block;
    content: "";
    float:right;
    width: 300px;
    height: 1px;
    background: #000;
    margin: 5px;
}​ 
```

如果您要在溢出设置为隐藏的容器中使用它，并且文本对齐中心会动态工作，但您必须玩一下才能使其完美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:28:02.330

感谢您的回答。似乎是个好主意，但我不知道如何让两个添加的块超出父块。这里的结果是要在标题下推送的 :after 块。

这是我的代码：

```
<div class="titre_bloc2">

     <h1>Title</h1>

</div>

.titre_bloc2 
{
position:absolute;
height:30px;
text-align:center;
width:100%;
overflow:hidden;
}   
.titre_bloc2 h1
{
border:1px solid white;
text-align:center;
display:inline-block;
}
.titre_bloc2 h1:before
{
width:300px;
height:20px;
border:1px solid blue;
float:left;
display:block;
content: "test";
}
.titre_bloc2 h1:after
{
width:300px;
height:20px;
border:1px solid blue;
float:right;
display:block;
content: "test";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:25:25.843

最后用javascript完成了，当我可以避免它时我通常不喜欢使用它，但我想不出另一种方式，我的代码更干净。刚刚使用了一个普通的 hn 和一个由 jQuery 检测到的类。然后 : - 将标题放在 display:inline-block 中，这样块的宽度就和它的内容一样宽，以后我不能使用宽度。- 使用 align:center 将标题放回块中 - 标题由一个新的 div 包裹 - 我创建了两个新的 div，它们在计算应该使用的宽度后放置在标题周围

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-02T17:40:53.613

我有同样的问题，但我找到的大多数答案都不符合我的需要，直到我找到[了 CSS 技术，用于在中间有单词的水平线](https://stackoverflow.com/questions/5214127/css-technique-for-a-horizontal-line-with-words-in-the-middle/5214204#14731123)。

该解决方案不使用任何 JS，几乎适用于任何情况。希望能帮助到你。

***** 编辑 ***** 这是我用于项目的代码。如果您有兴趣，可以在[jtslegal.com](http://jtslegal.com/)上查看最终结果。我将它用于所有侧边栏小部件的标题。

```
<div id="widget_title">Request a Call</div>

#widget_title { overflow: hidden; padding: 10px 26px 0; }
#widget_title:after, #widget_title:before {
    content: '';
    display: inline-block;
    height: 1px;
    width: 100%;
    margin: 0;
    background: #999;
    text-indent: 20px;
    position: relative;
    vertical-align: middle;
}
#widget_title:after {
    left: .5em;
    margin-right: -100%;
}
#widget_title:before {
    right: .5em;
    margin-left: -100%;
} 
```

# windows-7 - Windows 7 在 cmd 中使用符号链接

> ID：10142151
> 
> 赞同：0
> 
> 时间：2012-04-13T13:53:48.883
> 
> 标签：windows-7, command-line, cmd, symlink

我正在尝试通过命令行将符号链接与 ffmpeg 一起使用，但 cmd 似乎将符号链接文件视为实际文件，而不是将 ffmpeg 指向正确的文件。

我需要将图像序列转换为足够简单的视频文件。问题是 ffmpeg 只能接收从第 1 帧开始的图像序列。我的图像被命名为例如 my_img_009.jpg、my_img_010.jpg 等。

所以我做了符号链接。一个名为 my_img_001.jpg 的链接到 my_img_009.jpg，另一个名为 my_img_002.jpg 的链接到 my_img_010.jpg 等等。

当我运行它时，ffmpeg 只是告诉我文件 C:\my_img_%3d.jpg 不是有效的图像文件。所以它试图处理文件而不是跟随它到真实文件。

我的命令行是： C:\ffmpeg.exe -i C:\my_img_%3d.jpg C:\output.mov

注意： %3d 告诉 ffmpeg 这是一个序列。% 表示数字，'3d' 表示三个零的填充。即 '001' 而不是 '01' 这将是 %2d

请帮忙

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2017-05-16T12:23:31.137

首先启用它们 fsutil 行为查询 SymlinkEvaluation fsutil 行为集 SymlinkEvaluation [L2L:{0|1}] | [L2R:{0|1}] | [R2R:{0|1}] | [R2L：{0|1}]

# iis - WorkflowTheme UnauthorizedAccessException（注册表异常）

> ID：10142152
> 
> 赞同：0
> 
> 时间：2012-04-13T13:53:55.780
> 
> 标签：iis, windows-server-2008, workflow-foundation

从工作流程生成图像，我收到此错误..

“'System.Workflow.ComponentModel.Design.WorkflowTheme' 的类型初始化程序引发了异常。---> System.UnauthorizedAccessException：对注册表项 'HKEY_CURRENT_USER\Software\Microsoft Corporation\Internet Information Services\7.5.7600.16385' 的访问权限是否认。”

似乎 WorkflowTheme 构造函数正在尝试访问该注册表项（它不存在），但没有权限。

仅当我在某些 Windows Server 2008 机器上部署应用程序时才会出现此错误。任何人都可以帮忙吗？

ps 我已经尝试在“HKEY_CURRENT_USER\Software”键上为所有人（完全控制）添加权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:52:19.060

尝试将注册表项 Computer\HKEY_USERS.Default 的权限授予您的 AppPool - 即 IISAPPPOOL\DefaultAppPool 或 IISAPPPOOL\*YourAppPoolName* 如果您使用的是自定义 AppPool。

System.Workflow.ComponentModel.Design.WorkflowTheme 类有一个静态构造函数，它从注册表中检索主题文件的位置，但如果调用者没有从该位置读取的适当权限，它不会处理异常。

更多细节可以在这里找到：[http ://world.episerver.com/Blogs/Johan-Bjornfot/Dates1/2010/1/Workflow-image-generation-failure/](http://world.episerver.com/Blogs/Johan-Bjornfot/Dates1/2010/1/Workflow-image-generation-failure/)

# delphi - 如何从 cxRichEdit 插入和提取图像或对象

> ID：10142153
> 
> 赞同：1
> 
> 时间：2012-04-13T13:53:56.357
> 
> 标签：delphi, devexpress

我正在为笔记本项目使用 DevExpress cxRichEdit。

我需要能够将从打开的对话框中选择的图像插入到 Richedit 中（现在我只能通过从剪贴板粘贴来做到这一点），并且如果需要，将此图像恢复为具有原始扩展名的原始文件。

请指教。

# postgresql - PostgreSQL：随机选择？

> ID：10142154
> 
> 赞同：3
> 
> 时间：2012-04-13T13:54:02.440
> 
> 标签：postgresql, random

我正在使用 PHP 开发 PostgreSQL。

是否可以**从*****表*****WHERE*****条件*****的列中选择**特定数量的随机值

 **代替

**从*表*WHERE*条件*中选择*列***

 **然后将它们转换为数组并使用`array_rand()`？

（我不想使用这种方式，因为我将有数百万行并且首先选择所有值然后`array_rand()`可能会花费很多时间。）

* * *

假设我有一张这样的桌子：

```
 name    |   items
-----------+------------
    Ben    | {dd,ab,aa}  
-----------+------------
   David   |  {dd,aa}  
-----------+------------
   Bryan   | {aa,ab,cd}
-----------+------------
    Glen   |    {cd}
-----------+------------
   Edward  |   {aa,cd}
-----------+------------
   Aaron   |  {dd,aa}
-----------+------------
  ..... (many many more) 
```

## 更新：

我需要在一列（或基本上是 10 个随机行）中选择与条件匹配的 10 个随机值（在本例中为`@> ARRAY[aa]`），而无需进行顺序表扫描或其他耗时的操作。

*`order by random()`这将花费大量时间，因为它必须处理每一行，所以我将采用更好的解决方案。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T13:58:19.107

在 PostgreSQL 中，你可以[`order by random()`](http://wiki.postgresql.org/wiki/FAQ#How_do_I_SELECT_only_the_first_few_rows_of_a_query.3F_A_random_row.3F)，所以这应该是你想要的：

```
select name
from table
where items @>ARRAY['aa']
order by random()
limit 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T04:41:35.927

如果基表**没有大量更新**，则此解决方案很好。否则维护成本可能会超过收益。

如果您的条件是 always `@> ARRAY[aa]`，您可以创建一个辅助查找表（基本上是一个物化视图）。

```
CREATE TABLE tbl_pick (rn serial, id int, PRIMARY KEY (rn, id);

INSERT INTO tbl_pick (id)
SELECT id FROM tbl
WHERE  items @> ARRAY[aa]; 
```

[然后您可以应用与此处](https://stackoverflow.com/a/8675160/939860)描述的类似方法：

```
SELECT *
FROM  (
    SELECT 1 + floor(random() * <insert_count_plus_a_bit_here>)::integer AS rn
    FROM   generate_series(1, 20) g
    GROUP  BY 1                     -- trim duplicates
    ) r
JOIN   tbl_pick USING (rn)
JOIN   tbl USING (id)
LIMIT  10;                          -- trim surplus 
```

这应该*非常快*，因为它只需要索引扫描并且只从表中读取约 10 行。

当然，您必须`tbl_pick`在（相关）INSERT / DELETE / UPDATE 之后更新到`tbl`. 可以将少量更新添加/删除（无更新）到 tbl_pick，因为该方法中有一些回旋余地。经过一定数量的更新后，您将`TRUNCATE`重新运行完整的`INSERT`. 基本上重写你的物化视图。

UPDATE 和 DELETE 可以`tbl_pick`与外键约束级联到`ON UPDATE CASCADE ON DELETE CASCADE`. 以及新插入行的触发器`AFTER INSERT`。这一切都取决于基表中的可能性。

并定期安排对 tbl_pick 的完全重写，最好是在下班时间。

**如果**您的随机选择查询是突发的，那么使用“变量”指示是否`tbl_pick`是脏的（而不是 fk 约束和触发器）可能会更便宜，并且仅在运行查询之前（多次）在这种情况下重新填充表。这在很大程度上取决于您的使用模式。这个“变量”可以是一个单行表，其中 only`UPDATE`是允许的。在（相关）更新为 后将其设置为 TRUE `tbl`，在刷新实体化视图后将其设置为 FALSE。****

# c# - 无法获取 DataGridView 滚动条

> ID：10142160
> 
> 赞同：1
> 
> 时间：2012-04-13T13:54:10.287
> 
> 标签：c#, visual-studio-2010, datagridview

我正在尝试设置 datagridview 滚动条，但我似乎无法做到......
我正在做的代码：

```
 dgrDataGridView.Height = 320;
    dgrDataGridView.Dock = DockStyle.None;
    dgrDataGridView.Anchor = (AnchorStyles.Top | AnchorStyles.Bottom | AnchorStyles.Left | AnchorStyles.Right);
    dgrDataGridView.ScrollBars = ScrollBars.Both; 
```

有什么错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:21:54.230

自己解决了。显然 datagridview 比 windows 窗体大，因此，我看不到滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:02:26.510

`DataGridView` `Scrollbars`当数据超出数据网格可见大小时自动`scrollbar`可见

# xslt - 使用 XSL 对 docbook 过程的一部分进行样式化

> ID：10142161
> 
> 赞同：1
> 
> 时间：2012-04-13T13:54:22.160
> 
> 标签：xslt, xsl-fo, docbook, docbook-5

我试图在 docbook 5 过程中影响 fo:list-block 的属性。我想要做的是采用以下 docbook XML 代码：

```
<procedure>
    <title>Eating a banana</title>
    <step><para>Find banana</para></step>
    <step><para>Peel banana</para></step>
    <step><para>Stick banana in mouth</para></step>
<procedure> 
```

并且只影响步骤（列表）的 FO 输出，而不是标题。

使用这个：

```
<xsl:template match="d:procedure">
    <fo:block border-left-width="1pt" border-left-style="solid" padding-left="0.25in">
        <xsl:apply-imports />
    </fo:block>
</xsl:template> 
```

得到我这样的东西：

```
|
| Procedure 1: Eating a banana
|   1\. Find banana
|   2\. Peal banana
|   3\. Stick banana in mouth
| 
```

我想要得到的是：

```
Procedure 1: Eating a banana
  |   1\. Find banana
  |   2\. Peal banana
  |   3\. Stick banana in mouth 
```

尝试匹配`<step>`是无效的，因为 docbook 将它们变成 fo:list-block （`fo:block`作为`fo:list-block`生成“无效子”错误的后代）。

Docbook 有一个 xsl:attribute-set for `<procedures>`，但据我所知，它只能用于设置整个块的样式（类似于模板 match='d:procedure'，而不仅仅是列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:05:39.277

这是如何做到的。

1.  将此版本的“过程”模板（原始版本在 lists.xsl 中）添加到您的自定义层：

    ```
    <xsl:template match="d:procedure">
      <xsl:variable name="id">
        <xsl:call-template name="object.id"/>
      </xsl:variable>

      <!-- Preserve order of PIs and comments -->
      <xsl:variable name="preamble"
            select="*[not(self::d:step
                      or self::d:title
                      or self::d:titleabbrev)]
                    |comment()[not(preceding-sibling::d:step)]
                    |processing-instruction()[not(preceding-sibling::d:step)]"/>

      <xsl:variable name="steps" 
                    select="d:step
                            |comment()[preceding-sibling::d:step]
                            |processing-instruction()[preceding-sibling::d:step]"/>

      <xsl:call-template name="formal.object.heading"/>  

      <fo:block id="{$id}" xsl:use-attribute-sets="procedure.properties list.block.spacing"
            border-left-width="1pt" border-left-style="solid" padding-left="0.25in">

        <xsl:apply-templates select="$preamble"/>

        <fo:list-block xsl:use-attribute-sets="list.block.spacing"
                       provisional-distance-between-starts="2em"
                       provisional-label-separation="0.2em">
          <xsl:apply-templates select="$steps"/>
        </fo:list-block>

      </fo:block>
    </xsl:template> 
    ```

    `<xsl:call-template name="formal.object.heading"/>`（返回`fo:block`带有过程标题的 a ）在输出带有边框的块之前执行。我还通过删除处理标题放置的代码来简化模板。

2.  将文本缩进添加到`formal.title.properties`属性集：

    ```
    <xsl:attribute-set name="formal.title.properties" 
                   use-attribute-sets="normal.para.spacing">
      <xsl:attribute name="text-indent">
        <xsl:choose>
          <xsl:when test="self::d:procedure">-30pt</xsl:when>
          <xsl:otherwise>0pt</xsl:otherwise>
        </xsl:choose>
      </xsl:attribute>
    </xsl:attribute-set> 
    ```

这会将过程标题推到左侧（但不理会其他标题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:19:50.407

我想出了这个主意。虽然它适用于单级过程，但任何带有子步骤的东西都会导致问题。

```
<xsl:template match="d:step">
    <fo:list-item margin-left="0.25in" padding-left='1em' border-left-width='2pt' border-left-color="gray" border-left-style='solid'>
        <fo:list-item-label start-indent="0.40in" end-indent="label-end()">
            <fo:block>
                <xsl:number format="1."/>
            </fo:block>
        </fo:list-item-label>       
        <fo:list-item-body start-indent="3.5pc">
            <fo:block>
                <xsl:apply-templates />
            </fo:block>
        </fo:list-item-body>
    </fo:list-item>
</xsl:template> 
```

# c++ - 在 C++ 中通过接口的最佳方式？

> ID：10142167
> 
> 赞同：2
> 
> 时间：2012-04-13T13:54:29.853
> 
> 标签：c++, interface

假设我有一个 C++ 接口

```
class Iface
{
public:
    virtual ~Iface () {}
    virtual void foo () = 0;
    virtual void bar () = 0;
}; 
```

而且我有一些类需要在一侧公开它并在其他地方实现它。我发现很常见的是我最终会在中间有一堆类，它们基本上做这样的事情：

```
class InTheMiddleSomewhere
    : public Iface // amongst other things
{
public: // Iface
    virtual void foo () { if (impl) impl->foo (); }
    virtual void bar () { if (impl) impl->bar (); }
private:
    IfaceImpl* impl;
}; 
```

随着接口的扩展、增殖和变化，编写和维护变得很烦人。

问：有没有比手工编写所有“if (impl) impl->...”代码更好的（或多或少是自动的）方法来实现完整接口的传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:20:26.490

您可以将调用绑定到函数对象中，然后只通过函数对象（而不是为接口的每个成员函数进行委托调用）。

考虑以下：

```
struct I
{
    virtual R1 f1(A1, B1, ..., Z1) = 0;
    virtual R2 f2(A2, B2, ..., Z2) = 0;
    .
    .
    virtual Rn fn(An, Bn, ..., Zn) = 0;
}; 
```

现在我有一些 I 的实现：

```
struct : I
{
    ...
} x, y, z; 
```

所以我可以调用 x、y 和 zs 函数，如：

```
Ri xri = x.fi(ai, bi, ..., zi);
Ri yri = y.fi(ai, bi, ..., zi);
Ri zri = z.fi(ai, bi, ..., zi); 
```

或者我可以将调用绑定到 I 接口的方法，如下所示：

```
function<Ri(I&)> g = bind(&I::fi, _1, ai, bi, ..., zi); 
```

然后：

```
Ri xri = g(x);
Ri yri = g(y);
Ri zri = g(z); 
```

即使 x、y 和 z 是不同的类，只要它们是从 I 派生的，这也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:00:26.790

我相信这是使用句柄类（Pimpl idiom）的一个缺点。是否绝对需要缩短编译时间以支持打破打开/关闭原则？通常对于今天的编译器和 CPU，Pimpl 惯用语的使用量不如以前。

# php - RedBean/Fuse 模型命名约定的任何替代方案？

> ID：10142168
> 
> 赞同：3
> 
> 时间：2012-04-13T13:54:30.317
> 
> 标签：php, redbean

[RedBeanPHP 使用类命名约定](http://www.redbeanphp.com/manual/models_and_fuse)将模型绑定到表。我不能遵守该命名约定，因为我有一个表名不是一成不变的项目。我需要一种在`RedBean_SimpleModel`没有命名约定的情况下将 a 连接到表名的方法 -*我该怎么做？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T14:28:07.180

好的，我在浏览[API 文档](http://www.redbeanphp.com/api/annotated.html)时找到了一种解决方案。我可以设置自己的“模型格式化程序”，这只是意味着我可以创建一个类，该类负责将表名与类名连接起来。我的 RedBean 设置代码现在如下所示：

```
# Redbean
require('vendor/redbean/rb.php');

R::setup("mysql:host=".MYSQL_HOST.";dbname=".MYSQL_DATABASE.";",
         MYSQL_USERNAME, MYSQL_PASSWORD);

# Set custom model formatter
class CustomRedBeanModelFormatter implements RedBean_IModelFormatter
{
    public function formatModel($model)
    {
        switch($model)
        {
            case foo\bar\OmniDataManager::TABLE_DATA:
                return 'foo\bar\OmniDataModel';
            case foo\bar\OmniDataManager::TABLE_GROUP:
                return 'foo\bar\OmniDataGroupModel';
            default:
                return false;
        }
    }
}
$customRedBeanModelFormatter = new CustomRedBeanModelFormatter();
RedBean_ModelHelper::setModelFormatter($customRedBeanModelFormatter); 
```

这是一个丑陋的解决方案。我宁愿能够做这样的事情：

```
RedBean_ModelHelper::setModelForTable($modelName, $tableName); 
```

出于这个原因，我将暂时将其标记为正确答案。

# xpath - 有什么方法可以进行反向 XPath 查询？

> ID：10142173
> 
> 赞同：1
> 
> 时间：2012-04-13T13:54:37.260
> 
> 标签：xpath, saxon

如果我有一个上下文节点、一个 XPath 表达式和一个节点，有没有办法检查我的节点是否满足该上下文中的 XPath 表达式。

我有非常昂贵且运行时间长的 XPath 查询。在这里，我只想获取一个潜在的结果节点并检查它是否满足查询，即它将作为查询结果集的一部分返回。

我正在使用 Saxon EE 9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:06:51.090

如果您的上下文节点是 $N，您的表达式是 E，并且正在测试的节点是 $T，那么表达式`boolean($N/(EXP) intersect $T)`会执行您在问题的第一部分中要求的内容。但是，它可能不满足问题第二部分所暗示的要求，即计算应该比评估 EXP 更快。

如果表达式 EXP 采用 XSLT 模式的形式，那么答案是肯定的，有一种方法并且它可能会更快（尽管如何实现这一点取决于您使用的 Saxon API）。请注意，当 EXP 是一个模式时，$T 是否匹配该模式的问题并不取决于是否知道上下文节点 $N。

# ios - 保留阅读推送通知

> ID：10142178
> 
> 赞同：1
> 
> 时间：2012-04-13T13:55:00.493
> 
> 标签：ios, ipad, push-notification

我想知道是否可以将最后 5 个（例如）已读通知保留在苹果的通知中心（当您在顶部附近向下滑动时显示的通知）

我注意到，一旦您单击通知并“阅读”它，它就会从列表中消失。这是由应用程序以编程方式完成的，它向设备发送一条消息，通知已被阅读并且可以删除它，还是由设备自动完成并且您完全无法控制它。

一位客户说它看到一个应用程序执行此操作并将最后 5 个通知保留在那里，无论它们是否被访问但到目前为止我没有发现任何迹象表明这是可能的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:31:07.910

好吧，这不是一个非常完整的答案，但我的一位同事设法完成了这项工作。他所做的只是停止使用徽章编号进行通知。收到通知时不设置徽章编号，读取通知时不设置徽章编号。

[编辑]似乎当您在收到通知后将徽章编号设置为 0 时，iOS 会自动清除通知，这是一个未记录的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:16:21.073

您只能“阅读”发送到您的应用程序的通知，并且只有当用户明确使用他们的“操作”按钮打开您的应用程序时。如果这是您可以使用的场景：

```
// Handle local notification if received
if ([launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey] != nil) {
    NSLog(@"received a local notification = %@", [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey]);
    // Do something, save it..
}

// Handle remote notification if received
if ([launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey] != nil) {
    NSlog(@"received a remote notification = %@", [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey]);
    // Do something, save it..
} 
```

或其他替代方法（NotificationCenter 等）在打开应用程序时读取通知并永久保存。

# c# - 为什么用户控件内的按钮的 OnClick 事件没有发生

> ID：10142179
> 
> 赞同：0
> 
> 时间：2012-04-13T13:55:02.283
> 
> 标签：c#, asp.net, user-controls

.NET 专业人士

我有一个问题想和你分享，如果可能的话，得到一个建议：

我正在使用 datalist 动态加载用户控件。我正在为从数据库中获取的每一行加载这个用户控件，它可能是这个控件的 30 个不同的实例。

当用户单击按钮时，我希望能够获取此特定用户控件属性的值，据我了解，我注意到用户控件 ID 这样做，这就是为什么我想将我的“自定义 ID”分配给每个加载的控件所以我以后可以找到它。也许我错过了一些东西，也许这不是最好的方法，我愿意接受建议。反正.....

后面的 UserControl 代码：

```
public partial class SearchBullet : System.Web.UI.UserControl
{
public static int i = 0;
private string casterLOGO;

public string CasterLOGO
{
    get { return casterLOGO; }
    set { casterLOGO = value; }
}
private string casterNameSB;

public string CasterNameSB
{
    get { return casterNameSB; }
    set { casterNameSB = value; }
}
private string player1NameSB;

public string Player1NameSB
{
    get { return player1NameSB; }
    set { player1NameSB = value; }
}
private string player2NameSB;

public string Player2NameSB
{
    get { return player2NameSB; }
    set { player2NameSB = value; }
}
private string mapSB;

public string MapSB
{
    get { return mapSB; }
    set { mapSB = value; }
}
private string gameFrameSB;

public string GameFrameSB
{
    get { return gameFrameSB; }
    set { gameFrameSB = value; }
}
private string serieSB;

public string SerieSB
{
    get { return serieSB; }
    set { serieSB = value; }
}
private string race1SB;

public string Race1SB
{
    get { return race1SB; }
    set { race1SB = value; }
}
private string race2SB;

public string Race2SB
{
    get { return race2SB; }
    set { race2SB = value; }
}
private string castURLSB;

public string CastURLSB
{
    get { return castURLSB; }
    set { castURLSB = value; }
}
private string likeAmountSB;

public string LikeAmountSB
{
    get { return likeAmountSB; }
    set { likeAmountSB = value; }
}
private string qRYstring;

public string QRYstring
{
    get { return qRYstring; }
    set { qRYstring = value; }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack == false)
    {
        i++;
        this.PreRender += new EventHandler(Cast_PreRender);

        this.ID = "Result" + i.ToString();  

    }
    PlayButton.ID = i.ToString();

}

void Cast_PreRender(object sender, EventArgs e)
{
    PlayerName1.Text = Player1NameSB;
    PlayerName2.Text = Player2NameSB;
    CasterName.Text = CasterNameSB;
    ImageRace1.ImageUrl = Race1SB;
    ImageRace2.ImageUrl = Race2SB;
    Map.Text = MapSB;
    GameFrame.Text = GameFrameSB;
    LikeAmount.Text = LikeAmountSB;
    CasterLOGOIMG.ImageUrl = CasterLOGO;
    PlayButton.AlternateText = "yay";

}
protected void PlayButton_Click1(object sender, ImageClickEventArgs e)
{

    Image img = (Image)sender;
    string tt = img.AlternateText;
    int j = 0;
    Response.Redirect("default2.aspx");
   // lb.Text = img.ClientID;

} 
```

}

aspx 页面：

```
<asp:DataList ID="WatchLaterDL" runat="server" DataSourceID="SDSWatchLater" RepeatColumns="1">
                <HeaderTemplate>
                </HeaderTemplate>
                <ItemTemplate>
                    <Search:Bullet runat="server" EnableViewState="false" ID="SearchResults" Player1NameSB='<%#Bind("Player_Name") %>'
                        Player2NameSB='<%#Bind("Expr1") %>' CasterNameSB='<%#Bind("Caster_Name") %>'
                        Race1SB='<%#Bind("Race_1") %>' Race2SB='<%#Bind("Race_2") %>' MapSB='<%# Bind("Map")%>'
                        GameFrameSB='<%#Bind("Game_Frame") %>' LikeAmountSB='<%#Bind("Like_Amount") %>'
                        CastURLSB='<%#Bind("Cast_URL") %>' CasterLOGO='<%#Bind ("Caster_LOGO") %>' />
                </ItemTemplate>
                <SeparatorTemplate>
                    <br />
                </SeparatorTemplate>
            </asp:DataList></div> 
```

问题是，在这样做之后，当我单击按钮时没有任何反应，我的意思是，在调试时，我永远不会进入 OnButton_Click 事件。如果我删除 --> this.ID = "Result" + i.toString(); 还有--> PlayButton.ID = i.ToString(); 没关系。

如果还有其他问题，您可能需要评估我的问题，我很乐意证明并需要额外的代码。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:00:16.027

查看数据列表的 itemcommand。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemcommand%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemcommand%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:58:27.480

我的解决方案是这样的：

我没有使用图像按钮，而是使用了超链接。

用户控件的 on_Load 事件，我将我的用户控件的所有属性分配给超链接的 src 属性，并使用

查询字符串到另一个页面。

# r - 在一个图中对不同范围的数据使用多个 scale_colour_gradient 比例

> ID：10142180
> 
> 赞同：5
> 
> 时间：2012-04-13T13:55:06.923
> 
> 标签：r, ggplot2

我对 R 很陌生，所以如果我的问题不清楚，请多多包涵。

我有一个`data.frame`包含 5 列的“蛋白质”，即；

1.protein_name、2.protein_FC、3.protein_pval、4.mRNA_FC、5.mRNA_pval 和 6.freq。

我正在尝试用 x=log2(protein_FC), y=-log10(protein_pval) 绘制火山图。然后将点的大小映射到 freq 并将颜色映射到 mRNA_FC。这一切都很好，这是我使用的代码：

```
ggplot( protein [ which ( protein$freq <= 0.05 ),] , aes( x = log2( protein_FC ) ,
       y = -log10 ( protein_pval ) , size = freq , colour = mRNA_FC , 
       label = paste(protein_name,",",mRNA_pval), alpha=1/1000)) + 
  geom_point() + geom_text( hjust = 0 , vjust = 0 , colour = "black" , size = 2.5 ) + 
  geom_abline( intercept = 1.3 , slope = 0) + 
  scale_colour_gradient(limits=c(-3,3)) 
```

到这里为止一切都很好。但是由于实验的性质，它周围的数据非常密集`mRNA_FC = 0`。在那里，ggplot 应用的默认配色方案在区分不同点方面效果不佳。

`low="colour1"`我通过使用和尝试了各种色阶`high="colour2"`。但是我认为最好在 的范围内使用多个色标`mRNA_FC`，即类似的东西。蓝色为白色`-3<mRNA<-0.2`，红色为白色`-0.2<mRNA_FC<0`，绿色为白色`0<mRNA_FC<0.2`，黑色为白色`0.2<mRNA_FC<3`。

但是我还没有找到任何方法来做到这一点。

任何帮助，将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T15:28:29.363

对于你想要使用的这种类型的东西`scale_gradientn`。例如：

```
library(ggplot2)

x = seq(-0.1, 0.1, len=100)
y = 0:10
dat = expand.grid(x=x, y=y)

ggplot(data=dat, aes(x=x, y=y, fill=x)) +
  geom_raster() +
  scale_fill_gradientn(colours=c('red', 'yellow', 'cyan', 'blue'),
    values   = c(-0.05,-1e-32,1e-32,0.05),
    breaks   = c(-0.05,-0.005,0.005,0.05),
    rescaler = function(x,...) x,
    oob      = identity) 
```

![在此处输入图像描述](../Images/6f0e59834db577c470e826ce332ace76.png)

# solr - solr: 未定义字段 ------------------4566bce013ce

> ID：10142185
> 
> 赞同：1
> 
> 时间：2012-04-13T13:55:37.123
> 
> 标签：solr

我正在尝试将 csv 文件上传到索引。当我这样做时，我收到一个错误：

```
org.apache.solr.common.SolrException: undefined field ----------------------------4566bce013ce
at org.apach.solr.schema.IndexSchema.getField(IndexSchema.java:1185) 
```

我正在通过 curl 上传 csv 文件，如下所示：

```
curl http://localhost:8080/solrTest/update/csv -F commit=ture -F skipLine=1 -F stream.file=/home/solr/text.csv -F fieldnames=partId,desc,usage -H content-type:text/plain;charset=utf-8 
```

我的所有字段都在我的 schema.xml 中定义，所以我不确定为什么会收到未定义字段错误。

如果您需要更多信息，请告诉我，谢谢。

编辑：好的，在阅读 Itay Moav 的帖子后，我决定做一些更简单的测试。我正在使用一个 csv 文件，其中只有一个带有 partId (test123) 的记录。我的 schema.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8" ?>
<schema name="parts" version="1.5">
  <types>
    <fieldType name="text_en_us" class="solr.StrField">
  </types>
  <fields>
    <field name=partId type="text_en_us" indexed="true" stored="true" required="true" />
    <uniqueKey>partId</uniqueKey>
  </fields>
</schema> 
```

即使使用此测试数据，我也会遇到相同的错误。唯一改变的是最后的数字。

```
org.apache.solr.common.SolrException: undefined field ----------------------------------7951b21305c3 
```

再次感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:14:27.890

将此添加到我们的架构中，这应该可以修复它。

```
<types>
    <fieldtype name="ignored" stored="false" indexed="false" multiValued="true" class="solr.StrField" />
    ....
</types>

<fields>
    <dynamicField name="*" type="ignored" multiValued="true" />
    ....
<fields> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T14:00:13.107

对 csv 文件中的记录进行二进制消除，直到你只剩下有问题的记录。然后你要么自己看到问题，要么在这里发布记录和架构

# model-view-controller - IE8无法下载pdf文件

> ID：10142188
> 
> 赞同：1
> 
> 时间：2012-04-13T13:56:00.787
> 
> 标签：model-view-controller, pdf, internet-explorer-8, header

我有返回 PDF 文件的 MVC 应用程序。

```
 public FileStreamResult GetDocument(int id)
 {
   return File(stream, "application/octet-stream", documentsModel.Name);
 } 
```

我有两个测试服务器。一个是私人的，另一个是公共的。

从私人我可以下载文件，我得到：

```
GET /Documents/GetDocument/3576 HTTP/1.1
Accept: */*
Accept-Language: en-GB
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; BRI/2)
Accept-Encoding: gzip, deflate
Host: appserver
Connection: Keep-Alive
Cookie: ASP.NET_SessionId=vgzn4qkelxdmic3nbaqftsxd; .FidesAuthCookie=BF08E0DCAAA54D7D78AB6BD30D5ECA523C045F9B401B10693B6CE57D7D4C677C0908E24D92511DC75A487D6CAE6DD780AA8B4419A5A5D9258A4985AF6870D3AD1A0B3C01B8A620A1E14FEDDE298CCE255AE4B4C2F76D2635B8C5DF332AF19AAB; dynatree-active=3576; dynatree-focus=; dynatree-expand=496%2C603%2Cfolder_622; dynatree-select=

HTTP/1.1 200 OK
**Cache-Control: private, s-maxage=0**
Content-Type: application/octet-stream
Server: Microsoft-IIS/7.5
Set-Cookie: .FidesAuthCookie=BF08E0DCAAA54D7D78AB6BD30D5ECA523C045F9B401B10693B6CE57D7D4C677C0908E24D92511DC75A487D6CAE6DD780AA8B4419A5A5D9258A4985AF6870D3AD1A0B3C01B8A620A1E14FEDDE298CCE255AE4B4C2F76D2635B8C5DF332AF19AAB; expires=Fri, 13-Apr-2012 13:31:05 GMT; path=/
X-AspNetMvc-Version: 3.0
Content-Disposition: attachment; filename=test.pdf
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Fri, 13 Apr 2012 13:01:04 GMT
Content-Length: 49613 
```

从我的公共服务器我得到

```
GET /Documents/GetDocument/97 HTTP/1.1
Accept: */*
Accept-Language: en-GB
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; BRI/2)
Accept-Encoding: gzip, deflate
Host: beta.qi-care.nl
Connection: Keep-Alive
Cookie: ASP.NET_SessionId=h3utp0bfu4zwhqysntame3we; dynatree-active=97; dynatree-focus=; dynatree-expand=4%2Cfolder_10; dynatree-select=; .FidesAuthCookie=F0DED3D98BF4115C910B0A29EC2C809902B49F15518952DFA78DDB4358B5F0C1A9EDAFB50DD0CA761B433ED68034C2539ABCCDA0C50FF5EEEE3573D3C77E550416CDB24B302C9EB831AC597040E6D255E9B582E8A29D5FC03454F2A0742ECC9DEC61070091F9A66D1C3FC7F9CA10C1B8BB9B5109CB613C98AEE32AFE5A0F8A28

HTTP/1.1 200 OK
**Cache-Control: private, no-cache="Set-Cookie", s-maxage=0**
Content-Type: application/octet-stream
Server: Microsoft-IIS/7.5
Set-Cookie: .FidesAuthCookie=F0DED3D98BF4115C910B0A29EC2C809902B49F15518952DFA78DDB4358B5F0C1A9EDAFB50DD0CA761B433ED68034C2539ABCCDA0C50FF5EEEE3573D3C77E550416CDB24B302C9EB831AC597040E6D255E9B582E8A29D5FC03454F2A0742ECC9DEC61070091F9A66D1C3FC7F9CA10C1B8BB9B5109CB613C98AEE32AFE5A0F8A28; expires=Fri, 13-Apr-2012 13:19:35 GMT; path=/
X-AspNetMvc-Version: 3.0
Content-Disposition: attachment; filename=test.pdf
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Fri, 13 Apr 2012 12:49:35 GMT
Content-Length: 49613 
```

我得到错误

[http://support.microsoft.com/kb/323308](http://support.microsoft.com/kb/323308)

出于某种原因，我从这两个服务器中得到了两种不同的响应。但我在 Microsoft 支持上发现客户端应该更改注册表

```
To resolve this issue in Internet Explorer 7 and in Internet Explorer 8, follow these steps:
Start Registry Editor.
 For a per-user setting, locate the following registry key:
    HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings
 For a per-computer setting, locate the following registry key:
    HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings
 On the Edit menu, click Add Value.
 To override the directive for HTTPS connections, add the following registry value:
    "BypassSSLNoCacheCheck"=Dword:00000001
 To override the directive for HTTP connections, add the following registry value:
    "BypassHTTPNoCacheCheck"=Dword:00000001
 Quit Registry Editor. 
```

[微软](http://support.microsoft.com/kb/323308)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T22:38:08.970

我们在工作中遇到了这个问题，它原来是 Internet Explorer 中的一个错误（在我们的例子中是 IE8-），它在尝试用 SSL 下载文件时出错（你在 https 中，对吗？）。问题是，如果服务器向浏览器发送一个禁用缓存的 http 标头，Explorer 就会出错。在您的情况下，`maxage=0`相当于`Cache-Control: no cache`.

解决方案服务器端是您应该覆盖此标头以告诉 IE8 缓存响应，`Cache-Control: private`例如。请注意，某些应用程序服务器（例如在我们的示例中为 Websphere Application Server）`no-cache="Set-Cookie"`会在设置 cookie 时自动附加。

最后，如果适用，还有另一种解决方案可以解决问题，但它应该在浏览器的客户端应用：

看方法1： http: [//support.microsoft.com/kb/2549423](http://support.microsoft.com/kb/2549423)

# security - JBoss - server.xml 连接器未正确配置证书识别

> ID：10142192
> 
> 赞同：0
> 
> 时间：2012-04-13T13:56:12.720
> 
> 标签：security, ssl, configuration, jboss, ssl-certificate

我从verisign获得了一个试用根证书（有效期15天，差不多），并将它导入到由jdk keytool创建的密钥库中。所需的所有步骤，即创建 csr 以获得证书（不是自签名的）等都已发布。

这些是密​​钥库包含的文件：

*   私钥
*   verisgin 获得的试用根证书
*   我自己的证书由 csr 创建并通过验证获得

遗憾的是，firefox 返回的数据是与上次创建时包含在密钥库中的私钥对应的数据。

我怀疑这与从 csr 创建的证书的 CN 有关，可能该数据应该包含运行应用程序的主机的 FQDN。我使用 JBoss 4.x 作为应用程序。server 和配置的 server.xml 连接器元素，所谓的配置如下：

```
<Connector port="443" protocol="HTTP/1.1" SSLEnabled="true"
    redirectPort="8443"
    maxThreads="3000" scheme="https" secure="true"
    strategy="ms"
    address="${jboss.bind.address}"
    keystoreFile="${jboss.server.home.dir}/conf/t2facebook.jks"
    keystorePass="TPC.961"
truststoreFile="${jboss.server.home.dir}/conf/t2facebook.jks"
    truststorePass="TPC.961"
    sslProtocol="TLS"
clientAuth="true"/> 
```

提前致谢！

PS：顺便说一下，我从 firefox 得到的错误是：sec_error_ca_cert_invalid

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:13:01.097

已解决，我正在使用与私钥不同的别名导入证书。只需在私钥的相同别名下导入证书（或链或证书，我的意思是根证书、中间证书和从 csr 获得的证书），就可以正常工作了。

# .net - app.config 中的 ConnectionStrings 带有 .config 文件不喜欢的字符

> ID：10142193
> 
> 赞同：8
> 
> 时间：2012-04-13T13:56:15.703
> 
> 标签：.net, connection-string, app-config, special-characters

我一直在寻找答案，但找不到。它必须是显而易见的，我只是想念它。

我们在 app.config 文件中存在连接字符串问题。它使用 SQL Server 身份验证，密码包含“&”和“+”符号。显然解析出错了。此时更改密码会很麻烦。有没有办法处理这个？

![包含敏感数据的部分连接字符串被阻止](../Images/26ecb9d5ef4fb0d235a26f4ccf688331.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T13:58:38.800

将“&”编码为“&” - & 是 XML 中的保留字符

更多信息：[http ://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T14:00:24.870

由于 web.config 是 XML，您需要对五个特殊字符进行转义：

**`&amp;`**->*和号，U+0026* -->*左尖括号，小于号，U+003C* -->*右尖括号，大于号，U+003E* ->*引号，U+0022* ->*撇号，U +0027***`&`** ***`&lt;`****`<`** ***`&gt;`****`>`** ***`&quot;`****`"`** ***`&apos;`****`'`******

 *****+**不是问题，我想。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-13T13:58:57.633

`web.config`是一个 XML 文件，需要对 XML 内容进行转义...

在密码字段中更改为`&`，`&amp;`您就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T14:03:58.520

尝试对字符进行编码。用于`&amp;`& 号。***

# c++ - 在不同的标题中安排模板相关的代码

> ID：10142194
> 
> 赞同：0
> 
> 时间：2012-04-13T13:56:21.380
> 
> 标签：c++, templates, header, implementation

只要我将其全部保存在“main.cpp”文件中，下面的代码就可以工作。

```
//#include "Travel.h"
//#include "Obj.h"

// "Travel.h"
typedef int travel_t;

class Travel
{

public:

    static const travel_t AIR;
    static const travel_t WATER;
    static const travel_t LAND;

};

// "Travel.cpp"
// #ifndef TRAVEL_H
// #define TRAVEL_H
//
// #include "Travel.h"
const travel_t Travel::AIR = -2;
const travel_t Travel::WATER = -1;
const travel_t Travel::LAND = 0;
// #endif //TRAVEL_H

// "Obj.h"
// #ifndef OBJ_H
// #define OBJ_H
//
//#include "Travel.h"
template<typename T, travel_t travel>
class Obj
{
public:
    void foo(){};
};
// #endif //OBJ_H

// "main.cpp"
int main()
{
    Obj<int, Travel::AIR> objAirTravel;

    objAirTravel.foo();

    return 0;
} 
```

但是，一旦我按照指示将代码移动到不同的头文件和实现文件，它就不再编译了。:-(我该如何解决这个问题？它背后的问题/规则是什么？这是我得到的编译器错误（使用gcc）：

```
main.cpp|45|error: 'Travel::AIR' is not a valid template argument for type 'int' because it is a non-constant expression|
main.cpp|45|error: invalid type in declaration before ';' token|
main.cpp|47|error: request for member 'foo' in 'objAirTravel', which is of non-class type 'int'| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:04:12.213

为了使用常量作为模板参数，它的值必须在当前翻译单元中可用。当您将 的定义移动`Travel::Air`到不同的源文件时，其值不再可用于`main`.

由于它是一个整数常量，您可以在类内的声明中声明该值：

```
class Travel
{
public:
    static const travel_t AIR = -2;
    static const travel_t WATER = -1;
    static const travel_t LAND = 0;
}; 
```

现在，这些值可用作包含此类定义的任何翻译单元中的模板参数。

# java - 如何在绘图中使用 graphics2D 或者有更好的方法来做到这一点？

> ID：10142195
> 
> 赞同：1
> 
> 时间：2012-04-13T13:56:22.280
> 
> 标签：java, image, applet, graphics2d

我想使用 graphics2D 但我无法让它显示我的图形。有没有更好的方法可以让我使用 repaint()？最终，我想将图像设置为背景并能够在其上绘图，然后将框架的内容保存为图像。

```
import java.awt.image.*;
import javax.imageio.ImageIO;
import javax.swing.*;

import java.io.File;
import java.io.IOException;
import java.net.URL;

import javax.swing.JApplet;
import java.awt.*;

// assume that the drawing area is 150 by 150
public class test extends JApplet
{
  final int radius = 25;
  int width = 200, height = 200;

 BufferedImage img = new BufferedImage(
   width, height, BufferedImage.TYPE_INT_ARGB);

  public void paint (  )
  { 
    Graphics2D g = img.createGraphics();
    g.setColor( Color.orange );
    g.fillRect( 0, 0, 150, 150 );
    g.setColor( Color.black );

    g.drawOval( (150/2 - radius), (150/2 - radius), radius*2, radius*2 );
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:10:40.143

好吧，

1.  你`public void paint( )`这到底是在做什么，哈哈？您需要一个图形对象。`public void paint(Graphics g)`就像初始化小程序时自动调用的默认方法一样。

2.  当您`Graphics2D g = img.createGraphics();`需要使用默认的 Graphics g 对象并将其转换为 Graphics2D 对象时，您可以像这样`Graphics2D g2d = (Graphics2D) g;`

3.  您也应该搜索有关双缓冲的更多信息:)

无论如何...此代码有效，因此请从中获取您想要的内容:)

PS 注意我是如何实现 Runnable 的；如果您只想使用 Graphics2D 代码，则不需要这样做。它只是使类成为线程并用于游戏帧速率:)

希望这有帮助。

```
import java.applet.*;
import java.awt.*;

public class Test extends Applet implements Runnable{

public boolean isRunning = false;
public int radius = 25;

public void start() {
    isRunning = true;
    new Thread(this).start();
}

public void stop() {
    isRunning = false;
}

public void paint(Graphics g) {
    //Create Graphics2D object, cast g as a Graphics2D
    Graphics2D g2d = (Graphics2D) g;
    g2d.setColor(Color.ORANGE);
    g2d.fillRect(0, 0, 150, 150);

    g2d.setColor(Color.BLACK);
    g2d.drawOval((150/2 - radius), (150/2 - radius), radius * 2, radius * 2);
}

public void run() {

    while (isRunning) {
        repaint();
        try {
            Thread.sleep(17);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

} 
```

# java - apache常用配置库：属性文件损坏

> ID：10142201
> 
> 赞同：0
> 
> 时间：2012-04-13T13:56:44.937
> 
> 标签：java, character-encoding, apache-commons-config

我从客户那里得到了一个损坏的属性文件。该文件由应用程序修改以更新版本号。该代码使用[apache commons 配置。](http://commons.apache.org/configuration/)当我测试时，该库似乎总是以 iso-8859-1 格式编写文件。

代码简化如下。以下代码写入坏文件的可能性有多大？

```
import org.apache.commons.configuration.ConfigurationException;
import org.apache.commons.configuration.PropertiesConfiguration;

import java.io.FileWriter;
import java.io.IOException;

public class TestConfig {

    public void editVersionInfo() throws ConfigurationException, IOException {

        String filename = "C:\\temp\\VersionProperties\\Version.properties";
        PropertiesConfiguration config = new PropertiesConfiguration(filename);
        config.setProperty("application.version", "2011");
        config.save(new FileWriter(filename));

    }

    public static void main(String[] args) throws IOException, ConfigurationException {
        TestConfig tc = new TestConfig();
        tc.editVersionInfo();
    }
} 
```

以防万一 - 坏文件如下所示。它看起来不像任何编码。该文件最初是普通的属性文件，其键和值全部为英文（ascii 字符）。

> F????Co?aR??m??E?3#?? = h\u00BD5j\u00B3\u00E0\u0096\u001D\u0081fe\u00BEo\b\u00A3\u0001\u00FE\u00A4\u00DE\u0000\u00FBi\"\u009C{\u00FC\u00D9\u00E2?c\u00F6\u00FF% B\u00A47\u00195\u001EXv\u0097/\u00D7x\u0099\u000E\u00A2gIX\u0014\u0097]k\u00882\u0003\u0014\u0097\u00BC\u00C3\u00AE\u00B3\u001E\u00B3\u001E\u00B3\u001E\u00B4\u000E\u00&0 \u0016\u009B\"7\u0085'\"\u00DCT*v'\u0092\u0007\u0091A\u00BD\u00ACl6~\u0097\u00C0\u00B1\u00D1\u00EB\u00FF\u00A8\u00F3\u0001'\u00BF\ u0006\u001F\u009C\fk\u009F\u00C2\u00D9L^_\u0004J4\u00AF\u00D8\u00DAW\u00C4\u00CDj\u00E3\u0095\u00D1+\u00CE?\u0004>Z]\u00800\u0016\u u0095\u00AC\u00F7\u00E7\u009ATF\u0019\f)\u00A3\u00A9\u00DC\u00AD\u00ACtq5\u0085\u008E-\u00A3oH\u0000\u00C2\u0092\u00B5\u0017&H\u\008FAG u0003！

编辑：客户环境是日本的。应用程序如何始终运行 `-Dfile.encoding=UTF8`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:07:06.227

我怀疑您的客户的默认字符编码与您所拥有的不同。检查他们的属性设置`file.encoding`（违反直觉的命名，我知道）。

另一种可能性是您有两个线程编写该属性文件。我不知道，但我怀疑 Apache 库默认情况下不会是线程安全的。

# python - 为什么 Cherrypy 示例应用程序不在 Chrome 上运行，而是在其他浏览器上运行

> ID：10142206
> 
> 赞同：0
> 
> 时间：2012-04-13T13:56:59.223
> 
> 标签：python, google-chrome, localhost, cherrypy

到目前为止，我还没有让 Cherrypy 与 Chrome 一起工作，但我愿意。所以这里是代码：

```
import cherrypy 
class HelloWorld(object):
    def index(self):
        return "Hello World!"
    index.exposed = True

cherrypy.quickstart(HelloWorld()) 
```

当我在带有 Python 2.6 的 Mac OS X 10.7.3 上运行它并输入：

```
http://127.0.0.1:8080 
```

适用于：Firefox、Opera、Safari

Chrome：不起作用=>“糟糕，无法连接......”

任何人都可以重现这个吗？我的错误在哪里？

编辑：这是从一开始的输出

```
[15/Apr/2012:14:09:17] ENGINE Listening for SIGHUP.
[15/Apr/2012:14:09:17] ENGINE Listening for SIGTERM.
[15/Apr/2012:14:09:17] ENGINE Listening for SIGUSR1.
[15/Apr/2012:14:09:17] ENGINE Bus STARTING
CherryPy Checker:
The Application mounted at '' has an empty config.

[15/Apr/2012:14:09:17] ENGINE Started monitor thread 'Autoreloader'.
[15/Apr/2012:14:09:17] ENGINE Started monitor thread '_TimeoutMonitor'.
[15/Apr/2012:14:09:17] ENGINE Serving on 127.0.0.1:8080
[15/Apr/2012:14:09:17] ENGINE Bus STARTED 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-08T04:26:02.743

您需要将主机设置为 0.0.0.0。例如cherrypy.config.update({'server.socket_host':'0.0.0.0', 'server.socket_port':8000})

# mysql - 选择一定范围内的行

> ID：10142211
> 
> 赞同：0
> 
> 时间：2012-04-13T13:57:24.967
> 
> 标签：mysql

我试图搜索，但不确定我得到的关键字是否正确。

我想按 desc 顺序选择不是最后 5 行而是前 5 行的行！

所以如果我有 140 行，我想要第 131-135 行。

以下是我 136-140。

```
SELECT id, title, content, date FROM tbl_news ORDER BY id DESC LIMIT 5 
```

如何更改限制值以达到 131-135？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:05:48.927

您想使用两个参数限制：

```
SELECT id, title, content, date FROM tbl_news ORDER BY id DESC LIMIT 5, 5 
```

这将为您提供第 5 行之后的前 5 行（即第 6、7、8、9、10 行），这是您想要的最后 5 行之前的 5 行。

编辑：这里的小提琴：[http ://sqlfiddle.com/#!2/9113a/1](http://sqlfiddle.com/#!2/9113a/1)

它应该返回 id 的 4-8，因为这里有 12 条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:00:54.947

限制可以采用 2 个参数，偏移量（从零开始）和数量，所以你可以使用这个：

```
SELECT id, title, content, date FROM tbl_news ORDER BY id DESC LIMIT 10, 5 
```

要获得 5 行，从第 10 行开始

对于你的情况，你可以做

```
SELECT id, title, content, date FROM tbl_news ORDER BY id ASC LIMIT 129, 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:02:28.773

```
SELECT id, title, content, date FROM tbl_news ORDER BY id DESC LIMIT 5,5; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T13:59:48.870

```
SELECT id, title, content, date FROM tbl_news ORDER BY id DESC LIMIT 10,5 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-13T14:03:07.317

这对你有用吗？

```
select top 5 id
from tbl_news
where id not in
(
    select top 5 id
    from tbl_news
    order by id desc
)
order by id desc 
```

# .net - git 中的 web.config 和 app.config 机器特定设置

> ID：10142213
> 
> 赞同：33
> 
> 时间：2012-04-13T13:57:25.760
> 
> 标签：.net, git, configuration, web-config, app-config

我们在不同的办公室有多个开发团队，他们需要为我们项目`web.config`和`app.config`文件中的许多配置设置不同的值。

我们喜欢使用一组合理的默认值来检查这些配置文件，这样通过检查主干/主分支，您就可以在不需要四处寻找配置文件的情况下工作。

从历史上看，我们使用过 Subversion，特别是 TortoiseSVN，这为管理本地更改提供了一种简单的方法：我们只需将这些文件添加到 TortoiseSVN 的自动更改`ignore-on-commit`列表中。这可以防止意外签入这些文件，因为您随后需要专门选择它们以将它们包含在签入中（并且您可以确保您正在签入重大更改，而不是本地配置噪音）。这种方法的主要缺点是配置文件总是看起来“更改”，因此不可能一目了然地知道您是否有任何本地更改。

我们正在寻求切换到 Git，我正在尝试找出最佳方法。

首先，其他 StackOverflow 答案中已有的内容：

**选项 1：签入 xxx.sample 文件和 .gitignore 实际配置文件**：例如，在[此答案](https://stackoverflow.com/a/1396645/74296)中建议这样做。我看到的主要问题是配置文件的更改很容易被遗忘，有两个不同的点：提交者很容易错过他们需要添加到`.sample`文件中的更改，而消费者（尤其是持续集成服务器）很容易错过他们需要将`.sample`文件中的更改合并到本地配置文件中。所以基本上，这似乎不是一个很好的解决方案。

**选项 2：有一个签入的 xxx.defaults 文件和一个 .gitignored xxx.local 配置文件，它会覆盖它定义的任何设置**：这是提供的，例如，[here](https://stackoverflow.com/a/1397180/74296)。问题在于我们正在与标准的 .Net 配置提供程序合作——我真的不希望我们在 Mirosoft 已经完成所有工作时实现一个全新的设置加载框架。有谁知道获取 app.config 和 web.config 文件以引用可选本地覆盖文件的方法？

**选项 3：让开发人员保留本地分支，然后让他们始终将cherry-picks 或 rebase 分支签入主分支，以始终绕过/避免本地分支中不需要的提交：这**[在此处](https://stackoverflow.com/a/1396886/74296)作为可能的工作流程提供，而我欣赏它在更改跟踪（所有签入）方面的简洁性，它在每次签入时都会引入大量*所需的开销；*这是一个很大的痛苦！

**选项 4：已签入配置文件，但将它们标记为： 这是`--assume-unchanged`**[此处](https://stackoverflow.com/a/4744071/74296)提供的一个可能选项；据我所知，它在本质上与`ignore-on-commit`TortoiseSVN 中的更改列表非常相似，只是在提交过程中您无法看到这些“隐藏”的更改文件；例如，TortoiseGit 确实显示带有“已更改”图标覆盖的文件，但在提交对话框中该文件根本不显示。这似乎有点吓人，又很容易忘记检查更改。

鉴于这些选项，这是我找到的所有选项，我真的希望有一种方法可以选择将本地配置文件“包含”到/覆盖签入的 app.config/web.config 文件并使用**选项2** ; 有谁知道这样做的方法，或者我缺少的其他选项？（我有点想考虑一个自定义的 Xml 合并预构建步骤......）

我应该在前面提到，我们仍然在 VS2008 上，所以配置转换不可用。

* * *

**更新：（**已删除，完全错误）

**更新 2：**我已经删除了我之前的更新和答案，这很愚蠢/没有用。我没有意识到在“我们的”合并之后，另一个方向的下一次合并会将这些文件的“原始”版本带回（覆盖本地分支更改）；如果您有兴趣，请参阅编辑历史。这个问题一如既往的开放。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T07:37:36.673

我想建议你看看[ConfigGen](http://configgen.codeplex.com/)。我们在所有项目中都使用它，它为所有开发人员以及我们所有的环境创造了奇迹。它基本上运行一个声明机器名称和输出配置文件的电子表格，然后标记模板 App.Config 或 Web.Config，将电子表格中的值替换到其中。在您的项目中添加一个简单的预构建步骤以运行 configgen，在构建开始之前，您将拥有一个为您的机器量身定制的配置文件。它还支持默认设置。

看看该网站并自己决定，但我绝对可以保证。

**编辑**：值得注意的是，您可以忽略所有 Web.config 和 App.config 文件（就 .git 而言）。但是您确实需要将模板和电子表格添加到存储库中。此外，我确信有一个更新可能包括电子表格的 xml 替换，它有自己的编辑器，使其更适合 DVCS。

**Edit2**：还可以在这里查看 Daniel 的帖子：[https](https://stackoverflow.com/a/8082937/186184) ://stackoverflow.com/a/8082937/186184 。他给出了一个非常清晰的模板和电子表格示例，以及如何使其在您的解决方案中发挥作用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-13T13:04:21.397

您是否考虑过[内容过滤器驱动程序](https://stackoverflow.com/questions/10571358/what-is-the-right-way-to-maintain-a-version-for-the-server-with-only-config/10571580#10571580)？

![内容过滤器驱动程序](../Images/d4bfcb4cc0687202a4671592db7b50d5.png)

这意味着，在每个`git checkout`smudge 脚本上，都会根据以下内容*生成*实际的配置文件：

*   一个配置模板文件（带有配置值占位符，如`@@A_PARAM_VALUE@@`）
*   配置值文件之一（每个开发人员可以保留他/她自己的配置文件值的版本）

这避免了任何合并问题和 gitignore 设置：每个“配置值文件”都不同并且保持独立。
这也与[pms1969](https://stackoverflow.com/users/186184/pms1969)的[答案](https://stackoverflow.com/a/10494548/6309)中提到的[ConfigGen](http://configgen.codeplex.com/)等其他配置生成解决方案兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:29:32.143

我会看看这个答案，由[Dan](https://stackoverflow.com/users/50442/dan)[在部署环境之间管理复杂的 Web.Config 文件，](https://stackoverflow.com/a/435082/57787)以获得潜在的解决方案。我使用 mercurial 并使用相同的过程来签入一个通用的 web.config 文件，并使用 Web 转换来更改位置以指向我的部署特定的东西。`configSource`

使用此路由的优点是它完全内置在框架中，不需要额外的代码，并且适用于 Web 部署。

在 web.config 中检查：

```
<?xml version="1.0"?>
<configuration>
  <!-- snip -->
  <connectionStrings configSource="config/connectionStrings.config" />
</configuration> 
```

签入 web.debug.config：

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings
      configSource="config/dev.connectionStrings.config"
      xdt:Transform="Replace(configSource)" />
</configuration> 
```

我`config/connectionStrings.config`使用默认值签入，但未签入开发服务器`config/dev.connectionStrings.config`，并且未在新部署中替换它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T05:16:53.507

我们公司也遇到了类似的困境。我们最终创建了单独的配置分支来补充主分支。例如 - 开发配置、主配置等。然后我们有一个小脚本，它将根据部署环境使用正确的源分支重新定位这些分支。因此，例如在开发机器上，我们会将develop-config 重新设置为develop。如果你在本地机器上工作，你会得到默认配置（所有开发人员都同意），它被检查到主分支中（如本地数据库名称、密码等）。当然，缺点是您必须始终保持这些 *-config 分支是最新的，或者在部署时让它们加速。

自从实施此工作流程以来，我遇到了几个部署工具，例如[whiskey_disk](https://github.com/flogic/whiskey_disk)，它们采用了一些类似的方法。事实上，我更喜欢他们的解决方案，因为它更加安全和灵活。虽然可能不适合你们，因为它更适合 LAMP/RoR 开发堆栈。

除此之外，还有一些商业解决方案，你可能想看看，比如[Beanstalk](http://beanstalkapp.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-24T12:16:32.407

自 2012 年以来发生了一些变化，现在我建议您使用构建/部署工具（VS Team Services、TeamCity、Octopus Deploy）管理环境特定配置。

如果您在 azure 中工作，则可以将应用设置和连接字符串定义为应用定义的一部分。

# android - Android INSTALL_FAILED_INVALID_URI

> ID：10142216
> 
> 赞同：12
> 
> 时间：2012-04-13T13:57:38.917
> 
> 标签：android, apk

当我尝试通过 Eclipse 将 Android 应用程序安装到设备时，我刚刚开始收到以下错误：

```
Installation failed due to invalid URI!
Please check logcat output for more details.
Launch canceled! 
```

我还尝试安装`bin`文件夹中的 APK 和通过 adb 签名的 APK。当我这样做时，我得到一个`INSTALL_FAILED_INVALID_URI`错误。

我没有改变任何关于我的设置的东西，它曾经可以毫无问题地工作。

有任何想法吗？谢谢！

LogCat 输出：

```
D/AndroidRuntime(32345): CheckJNI is OFF
D/dalvikvm(32345): Unable to stat classpath element '/system/framework/com.orange.authentication.simcard.jar'
D/AndroidRuntime(32345): Calling main entry com.android.commands.pm.Pm
V/Performance(32111): >>com.android.defcontainer.DefaultContainerService@40d944a8 onCreate
V/Performance(32111): <<com.android.defcontainer.DefaultContainerService@40d944a8 onCreate, 3ms
V/Performance(32111): >>com.android.defcontainer.DefaultContainerService@40d944a8 onBind
V/Performance(32111): <<com.android.defcontainer.DefaultContainerService@40d944a8 onBind, 1ms
W/asset   (32111): Asset path /data/local/tmp/CS2110Project.apk is neither a directory nor file (type=0).
W/DefContainer(32111): Failed to parse package
W/ActivityManager(  744): No content provider found for permission revoke: file:///data/local/tmp/CS2110Project.apk
D/dalvikvm(  744): GC_EXPLICIT freed 1196K, 36% free 20088K/31267K, paused 10ms+14ms
D/AndroidRuntime(32345): Shutting down VM
I/AndroidRuntime(32345): NOTE: attach of thread 'Binder Thread #3' failed
D/dalvikvm(32345): GC_CONCURRENT freed 135K, 72% free 578K/2048K, paused 1ms+1ms
D/dalvikvm(32345): Debugger has detached; object registry had 1 entries 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-05-15T01:40:45.990

对于我来说，它想要完整的路径。

*   pm install joe.apk 失败。
*   pm install ./joe.apk 失败。
*   chmod'ed一切，仍然失败。
*   **pm install /data/joe.apk 工作。**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-19T09:14:23.093

仅作记录：

对我来说，它原来是项目名称中的**变音符号 (ä,ü,ö)**问题。

我做了以下事情来解决它：

1.  **`Refactor`**-> **`Rename`**（替换了变音符号）
2.  做了一个**`Project`**->**`Clean`**

希望这可以为其他人节省一些时间……花了我一段时间。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-16T22:33:05.120

原来是ROM问题。我刷新了一个更新的ROM，现在一切正常。实际上似乎是一个相当普遍的问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-29T23:11:57.560

对我来说，我植根了我的设备，每次打开手机都会重新更新 android。考虑到这一点，我不得不将 chmod 777 重置为本地目录。因此，这更多的是提醒您检查您的权限，然后是答案，但它可能会对某人有所帮助。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-12T22:44:25.013

没有重音或不寻常的字符。我有口音，apk的名称在安装时产生了一个错误，去掉勾号就可以了

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-13T14:49:58.480

您是否设置了设备以进行调试？如果您还没有，您可能需要转到设置 -> 应用程序并允许未知来源。如果这没有帮助：你的 logcat 输出中有什么？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-09T03:19:07.413

在我的设备上是因为 minSdkVersion 低于你的设备 android sdk

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-30T03:52:25.133

当您执行“adb install -r some_app.apk”时，它会将 pkg 显示为“/data/local/tmp/some_app.apk Success”。如果您在错误的位置提供选项 -r ，它会将 pkg 作为 -r 并给出上述错误。因此，在数据、本地和 tmp 目录的 chmod 之后，检查它是否能够正确解析 pkg。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-26T19:41:44.910

我知道这是一个老问题，但它仍然可能对某人有所帮助。

从文本文件安装应用程序列表时，我遇到了同样的问题，因此我可以以编程方式安装它们。我在 Windows 中创建了该文件，然后使用 ADB 将其推送到平板电脑。Windows 在每一行的末尾放置一个回车和换行。

**确保每行末尾只有一个换行符（在 *nix 框上创建文件或从 Windows 文件中删除 CR）**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-12T16:12:51.697

就我而言，这是一个控制台问题。我在 Mac 上使用了“终端”，但它不起作用。当我使用 AndroidStudio 控制台中的构建时，它可以工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-18T14:49:04.410

你需要跑

`readlink -f PATH_of_APK`

或者

`readlink -e PATH_of_APK`

首先获取 pm 命令的合法路径。

例如在我的 termux 上：

```
$readlink -f /data/data/com.termux/files/home/storage/downloads/

/storage/emulated/0/Download 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-18T21:00:29.267

重新启动我的设备解决了这个问题

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-30T20:27:28.830

就我而言，我给出了错误的命令。我想我需要指定设备，所以我在做：

```
adb install -s X0Y1ZZ23456789XY "G:\com.my.apk" 
```

当我应该做的时候：

```
adb install "G:\com.my.apk" 
```

问题是：apk 传输得很好，它最后就这样失败了。就像其他人所说的那样，很遗憾你没有从这个工具中得到更好的错误。:-|

# android - Android 对话框中的 TouchEvent

> ID：10142217
> 
> 赞同：2
> 
> 时间：2012-04-13T13:57:46.430
> 
> 标签：android, dialog

嗨，我正在开发一个应用程序，在该应用程序中我正在使用一个活动对话框。对话框将只显示一张图片，当用户触摸图片时，对话框应该关闭，并且启动对话框的活动应该出现在前面。**对话框没有任何按钮**。

我在这个应用程序中的问题是**我无法在对话框上获取触摸事件**，我尝试在互联网上搜索解决此问题的方法，但找不到合适的方法来实现它。那么任何人都可以建议一种方法来做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:14:37.453

试试这样。。

```
 final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.mylayout);
   //craete a layout with imageview
        dialog.setTitle("Title...");

        ImageView image = (ImageView) dialog.findViewById(R.id.image);
        image.setImageResource(R.drawable.yourimage);

        image.setOnClickListener(new View.OnClickListener(){
         public void onClick(View View3) {
             //your onclick functionality
         } });

        });

        dialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:13:53.617

我相信在 Dialog 的主要布局元素上设置一个 View.OnClickListener 可以解决问题:-)

示例代码：

```
 public class DialogActivity extends Activity implements OnClickListener
    {
        @Override
        protected void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.dialog);
            LinearLayout linearlayout = (LinearLayout)findViewById(R.id.dialogMainLayout);
            linearlayout.setOnClickListener(this);
        }

        public void onClick(View v)
        {
            finish();
        }
    } 
```

对话框.xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" 
        android:background="#FFA500"
        android:id="@+id/dialogMainLayout"
        >
        <TextView 
            android:layout_height="250dp"
            android:layout_width="fill_parent"
            android:text="TEST"
            android:background="#FFFFF0"
            />
    </LinearLayout> 
```

首先，我尝试制作一个将启动另一个主题作为对话的活动。单击以对话框为主题的活动完全没有做任何事情。所以我认为在对话框主题活动中使用的 xml 文件中的根布局元素上设置 onclicklistener 可能会解决问题。

我得到了上面的代码工作。希望它能解决您的问题:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:19:27.873

[Android：触摸时关闭对话框窗口](https://stackoverflow.com/questions/5801634/android-close-dialog-window-on-touch)

这个问题可能会为您的问题提供答案。或者，您可以使用 LayoutInflater 创建一个自定义视图，其中包含带有 OnClickListener 和 AlertDialog.Builder 的 ImageButton 或 ImageView 及其 setView 方法，以使该视图成为对话框的主体。

# c# - 在方法之间锁定 SQL Server 表或行

> ID：10142218
> 
> 赞同：1
> 
> 时间：2012-04-13T13:57:46.797
> 
> 标签：c#, sql-server, winforms, csv

我在 C# 中有一个导入 CSV 文件的 Winforms。

第一个方法导入它，然后调用第二个方法打开数据连接并获取最后一个，`logNumber`然后返回并将其分配`logNumber++`给每个记录，然后将新`logNumber`的最后一个写入表。

在此期间，我不希望其他用户能够访问该`logNumber`表（我也必须这样做`batchNumber`）。如果我使用我发现的悲观锁定，它只会在连接打开时锁定它们，所以如果我使用第二种方法，它将关闭。那么如何保持锁定状态呢？

我以为我会以( )`sqlconnection`的形式定义我收到一个错误。当我打开子表单并进行更改时，我还需要锁定记录（行）（加载到然后进入数据网格视图）。这是一个多用户系统，但我需要防止其他用户拥有甚至看到用户正在处理的记录。`lvl``public partial class frmCheckEntry : Form``datatable`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:03:01.623

解决方案是保持连接和事务打开。你说你这样做时出错了。您需要解释错误消息并修复它。然后，它将起作用。

您还可以尝试使用 IsLocked = 1 标记“锁定”行。读取该行的其他用户将需要显示“此项目当前正在使用”之类的消息。

# .htaccess - 使用 .htaccess 或其他方法阻止对子文件夹的直接访问

> ID：10142219
> 
> 赞同：1
> 
> 时间：2012-04-13T13:57:46.900
> 
> 标签：.htaccess, web-folders

对不起，我的英语不好 ：）

我有个问题。

如何在我的网站中阻止错误页面或重定向尝试访问子文件夹的用户？我不需要受密码保护的文件夹，而只是显示所有子文件夹的错误。

例子：

www.mysite.com/folder - 此文件夹内容不应对用户可见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T07:11:26.037

这是一个简单的解决方案，无需编辑 .htaccess 文件。

在您的文件夹中创建一个新的 index.html 或 index.php 文件并将这些行写在正文上。

**在 PHP 中：**

```
 <?php    
      header("Location:../index.php");
    ?> 
```

**在 HTML 中：**

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="1;url=http://www.yourDomainName.com">
    <script language="javascript">
        window.location.href = "http://youDomainName.com"
    </script>
    <title>Page Redirection</title>
</head>
<body>
    If you are not redirected automatically, follow the <a href='http://www.yourDomainName.lk'>link to Your domain name home page</a>
</body>
</html> 
```

通过这种方式，您可以阻止

> www.yourDomain.com/img

文件夹

> www.yourDomain.com/css

文件夹和您希望轻松拒绝访问的其他文件夹。我不知道黑客仍然可以绕过这些文件，但这是简单的解决方案。试试这个，看看自己的答案。

# algorithm - 在 O(nlogn) 中找到 (x^n 除 p) 的提醒

> ID：10142222
> 
> 赞同：0
> 
> 时间：2012-04-13T13:57:59.820
> 
> 标签：algorithm, time-complexity

我想在 O(nlogn), n=2^k; 中找到 (x^n 除 p) 的提醒；我写了这个，但它不是真的，你能帮帮我吗？

```
rem(int x,int n,int p){

if (n==1)
 return x%p;
else
 return rem(x,n/2,p);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:06:36.270

假设这是作业，这里有一个提示：阅读[通过平方求幂](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)，它为您提供构建解决方案所需的一切，包括伪代码。

您当前的实现不区分 的偶数和奇数值`n`，只有当`n`是 2 的幂时才正确。您可以扩展您的解决方案以适用于所有人`n`（见下文）。

当你得到一个返回值`rem(x,n/2,p)`并且`n`是偶数时，你应该将结果平方并取平方的余数。

您可以将其扩展为适用于所有`n`，不仅是 的幂`2`，方法是另外将结果乘以 并对`x`的奇数值取余数`n`。

# c# - 需要添加/更改哪些程序集才能将 silverlight Web 应用程序部署到 Windows Azure [错误]？

> ID：10142229
> 
> 赞同：0
> 
> 时间：2012-04-13T13:58:29.460
> 
> 标签：c#, silverlight, deployment, azure, assemblies

我有一个基于 silverlight 的应用程序，由使用 silverlight 工具包的图表组成，并使用 RIA 服务（域服务类，ADO.NET 实体模型）连接到数据库。我想将它在线部署到我的 windows azure 帐户。

我最近遇到

> 角色实例 1 网站繁忙 角色
> 实例 1 网站正在循环

我一次又一次地遇到这个问题。

注意：我的 Windows Azure SDK 已更新，并且我已经部署了一个基于 MVC 的应用程序。

这个 SOF 答案指导我应该添加这些程序集：[https ://stackoverflow.com/a/8966859/1319922](https://stackoverflow.com/a/8966859/1319922)

但这些是基于 MVC 的项目，而我的是基于 Silverlight 的（使用 C#）。

**是否还有我需要添加的组件？**我的项目也可以在本地主机中正常工作。

*我还需要设置一些程序集`CopyLocal = true`吗？如果是，哪些？*

*为什么我无法部署我的应用程序（并且出现上述错误），还有其他问题吗？*

请回复谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:06:06.010

由于您使用的是 RIA 服务，因此这些程序集可能在您的 Web 角色上不可用。要查看 Web 角色上可用的所有程序集，请点击此链接： http: [//gacviewer.cloudapp.net/](http://gacviewer.cloudapp.net/)

您应该仔细检查 ASP.NET Web 角色（托管 RIA 服务应用程序的那个）中的程序集，并将在 gacviewer 网站上找不到的所有程序集更改为**CopyLocal = true**

除此之外，如果您在 Web 角色上激活远程桌面，您可以（出于测试目的）通过 RDP 连接并查看事件查看器以查看缺少哪些程序集。

# google-visualization - Google Charts (GeoChart) - 放大

> ID：10142232
> 
> 赞同：14
> 
> 时间：2012-04-13T13:58:34.583
> 
> 标签：google-visualization

使用谷歌图表 GeoChart：[https ://google-developers.appspot.com/chart/interactive/docs/gallery/geochart](https://google-developers.appspot.com/chart/interactive/docs/gallery/geochart)

是否可以放大而不只是放大整个区域？也就是说，要达到地图的街景级别，并且仍然像上面链接上的标记示例中所示那样放置标记？

谢谢大家的帮助...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-13T15:16:35.973

API 不支持缩放、拖动或滚动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-26T15:35:22.613

作为一个技巧，我在容器上使用了带有溢出的 css 缩放属性：隐藏。但它应该在chart.draw() 之后在谷歌图表就绪事件上执行。

如果您需要重绘（我正在重绘窗口大小以保证响应性），您应该在再次绘制之前再次强制缩放到 1 或 100%。

HTML：

```
<div id="container" style="overflow:hidden; width:..px;">
     <div id="chart_div"></div>
</div> 
```

JS（jQuery）：

```
$("#chart_div").css("zoom",1);

// [... google chart code generation ...]

google.visualization.events.addListener(chart, 'ready', function() { $("#chart_div").css("zoom",1.4); });
chart_draw(data, options); 
```

它对我有用，值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T17:55:32.987

我遇到了同样的问题，而 GeoChart 在这方面被证明太有限了。

一种选择是使用谷歌地图和数据层。例如，如果您需要带有颜色和大小的标记，您可以执行以下页面上的示例（请参阅“高级样式”）： [https ://developers.google.com/maps/documentation/javascript/examples/layer -数据地震](https://developers.google.com/maps/documentation/javascript/examples/layer-data-quakes)

您需要实现自己的插值来确定大小和颜色，但生成的地图/图表将比单独的 GeoChart 更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T18:11:28.900

看起来 Google Charts 现在有一个名为“explorer”的过期选项，适用于某些图表类型。请参阅： [https ://developers.google.com/chart/interactive/docs/gallery/linechart#Configuration_Options](https://developers.google.com/chart/interactive/docs/gallery/linechart#Configuration_Options)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-04T11:07:14.007

您可以尝试在标记单击时生成选择事件，并且在事件函数中，您可以通过更改 chartOptions 来更改图表的区域，如下所示：

```
 google.visualization.events.addListener(chart, 'select', () => {
  // console.log(this.continents);
  if (continents.includes( continentData.getValue(chart.getSelection()[0].row, 2))) {
   chartOptions.region = '053';
   // 002 - Africa
   // 150 - Europe
   // 019 - Americas 021 - Northern America 005- South America 013- Central America 029 - Caribbean
   // 142 - Asia
   // 009 - Oceania
   // 053 - Australia and New Zealand

    chart.draw(continentData, chartOptions);
  }
}); 
```

# asp.net - 为 ASP.Net MVC 中的只读表返回 HTML 或 JSON？

> ID：10142235
> 
> 赞同：0
> 
> 时间：2012-04-13T13:58:41.243
> 
> 标签：asp.net, asp.net-mvc, json, razor, jquery-templates

如果您有一个将通过 ajax 更新的只读表，最好在服务器上生成标记还是只返回 JSON 并在客户端呈现表？

它们都相当简单，所以我想知道假设表格标记相对简单，哪个更可取。

一开始我认为返回 JSON 可能会更快，但我不确定。似乎带宽会相似，而且我不知道 ASP.Net 将集合作为 JSON 返回与呈现部分视图的速度有多快。

有没有人做过任何基准测试或有任何他们认为在这种情况下更可取的意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:00:28.727

我认为您应该返回 JSON 并允许消费客户端将呈现应用到该 JSON，这样如果您的产品需要针对不同的消费者进行更改，他们只需采用相同的原始数据并应用他们需要的特定格式规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:38:30.663

如果页面的性质是静态的，那么我会推荐服务器端渲染。如果您想要交互式体验，请使用客户端渲染。

这是一个比较[客户端与服务器端渲染的好链接](http://openmymind.net/2012/5/30/Client-Side-vs-Server-Side-Rendering/)

# javascript - 最终用户脚本

> ID：10142236
> 
> 赞同：5
> 
> 时间：2012-04-13T13:58:42.537
> 
> 标签：javascript, python, lua, sandbox

我想在应用程序中提供最终用户脚本（将在服务器端运行）。我一直在阅读，发现沙盒比我想象的要严重得多。

我真的不在乎语言是*什么。*LUA、Python、JavaScript，我对任何可读的东西都很好。

在不受信任的脚本中运行函数、传递一些信息并获取更多信息有多难？我读过 JVM Security Manager is a no-go 并且 Python 几乎是不可沙盒化的，但我对该主题知之甚少，无法真正判断来源。

例如，我如何在 JS 中解释一个接受 JSON（例如，来自 Java、Python，甚至 node.js）的函数，并取回返回的 JSON？

我想避免自己实现一个 pythonish i-just-know-it-will-suck 语言解释器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:34:46.197

Lua 具有良好的沙盒功能，并且干净简单。

它具有[setfenv()](http://www.lua.org/manual/5.1/manual.html#lua_setfenv)函数，可以在特定环境中运行代码。不受信任的代码只能访问特定环境中的内容。
对于 C 函数，例如`string.rep`，您可以通过将它们替换为 Lua 函数或提供自定义内存分配器来防止内存过度消耗`lua_newstate`。

此外，如果您决定希望将 Lua 用于受信任的代码并使其与不受信任的代码交互，您可以使用[协程](http://www.lua.org/manual/5.1/manual.html#5.2)并[`debug.sethook`](http://www.lua.org/manual/5.1/manual.html#pdf-debug.sethook)控制 CPU 使用率。

Lua Wiki 有一个简单的[示例沙箱](http://lua-users.org/wiki/SandBoxes)。[lua 现场演示](http://www.lua.org/demo.html)
的[源代码](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#demo)也可能很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:53:13.720

Tcl 有一个非常强大的 sanbox 模型，并且可以说是用于最终用户脚本的更好的语言之一。您可以在[安全解释器](http://www.tcl.tk/man/tcl8.4/TclCmd/safe.htm)手册页上阅读更多相关信息。

# javascript - 带有信息窗口的多个标记

> ID：10142237
> 
> 赞同：0
> 
> 时间：2012-04-13T13:58:42.780
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我们使用带有信息窗口的多个标记。一切正常。问题是当我们单击标记时，信息窗口会打开，但单击其他​​标记时它不会关闭。它保持打开状态。所以可以为这个问题提供解决方案。

代码在[http://goo.gl/s0WZx](http://goo.gl/s0WZx)

```
 var berlin = new google.maps.LatLng(52.520816, 13.410186);
    var neighborhoods = [
    new google.maps.LatLng(52.511467, 13.447179),
    new google.maps.LatLng(52.549061, 13.422975),
    new google.maps.LatLng(52.497622, 13.396110),
    new google.maps.LatLng(52.517683, 13.394393)
    ];

    var markers = [];
    var iterator = 0;

    var map;

  function initialize() {
    var mapOptions = {
      zoom: 12,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: berlin
    };

    map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
  }

  function drop() {
    for (var i = 0; i < neighborhoods.length; i++) {
      setTimeout(function() {
        addMarker();
      }, i * 200);
    }
  }

  function addMarker() {
    var marker = new google.maps.Marker({
      position: neighborhoods[iterator],
      map: map,
      draggable: false
     });
    markers.push(marker);

    var contentString = $("#pop"+iterator).html();

    var infowindow = new google.maps.InfoWindow({
        content: contentString,
        maxWidth: 300,
        maxHeight: 500
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.open(map,marker);
    });

    iterator++;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T15:44:09.310

您正在创建尽可能多`infowindow`的 s，因为有标记。在你的情况下，我认为一个`infowindow`就足够了。因此，对于仅使用一个`infowindow`，您可以在全局范围内实现它：

```
 //Using lazy initialization. 
 //InfoWindow will be created only after the first call 
 var getInfoWindow = (function(){
     var _instance = null;
     return function(){
        if(_instance == null){
            _instance = new google.maps.InfoWindow({
                            maxWidth: 300,
                            maxHeight: 500
                        });
        }
        return _instance;
     };
 })(); 
```

您还需要存储`contentString`必须在点击事件上显示的每个标记。所以`addMarker`方法的最终修改将是这样的：

```
function addMarker() {
var marker = new google.maps.Marker({
  position: neighborhoods[iterator],
  map: map,
  draggable: false
 });
markers.push(marker);
//Storing content html
marker.contentString = $("#pop"+iterator).html();

google.maps.event.addListener(marker, 'click', function() {
  //Setting content of InfoWindow
  getInfoWindow().setContent( marker.contentString );
  //Opening
  getInfoWindow().open(map,marker);
});

iterator++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:11:23.240

将 var infowindow 放在 addMarker 函数之外。像这样：

```
var infowindow = new google.maps.InfoWindow(); 
```

然后在你的 addMarker 函数中使用

```
infowindow.setContent(contentString); 
```

这样，信息窗口只创建一次。单击不同的标记只会移动窗口并设置内容。

# javascript - AJAX 响应中的 JavaScript

> ID：10142242
> 
> 赞同：2
> 
> 时间：2012-04-13T13:59:16.547
> 
> 标签：javascript, ajax

我有一个关于 AJAX 的一般性问题。可以在 AJAX 响应中发送 JavaScript 并执行它吗？或者是使用 JSON 或纯 HTML 响应的唯一优雅方式？我的问题是我正在寻找处理 AJAX 请求的最佳方法，这些请求会导致插入 HTML 或执行 JavaScript，具体取决于用户数据。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:00:35.323

不，可以这样做，在 jQuery $.getScript 中这样做，它通过 ajax 获取文件，然后对其进行评估。这就是为什么在使用 getScript 时没有添加任何脚本标签的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:04:17.420

执行 ajax 调用接收到的 javascript 是一个坏主意，因为这可能导致 XSS 风格的攻击（eval 是邪恶的，所有的爵士乐）。

AJAX 响应最好以 JSON 格式提供，然后客户端脚本可以根据接收到的 JSON 执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:04:57.470

我认为除了一些变量之外，在 AJAX 响应之后执行的 JavaScript 函数对于每个人来说都是标准的。如果是这种情况，您应该在脚本文件中包含 JavaScript 函数，该函数会在 . 然后让 AJAX 响应返回您需要的变量，例如用户 ID。然后使用该变量正常调用 JavaScript 函数，而不是每次都注入一个新函数。

如果返回 HTML，您可以在成功的 AJAX 请求时将其直接插入 DOM。

我认为要走的路是始终返回 JSON，即使它是 HTML 响应。JSON 响应可能类似于：

`{"responseType":"HTML", "varID":null, "payload":"<div>some html</div>"}`

如果响应是 JS 类型，那么 varID 可以具有该变量并且有效负载可以为空。这只是一个示例，但您可以执行类似的操作来标准化响应，但同时处理这两种情况。

# java - Java中多线程的单元测试框架

> ID：10142243
> 
> 赞同：8
> 
> 时间：2012-04-13T13:59:26.500
> 
> 标签：java, multithreading, unit-testing, concurrency

你会推荐哪些框架来为 Java 中的多线程代码编写单元测试？例如，当您有一个程序应该执行具有多个允许执行路径和某些排除路径的线程时（例如“可执行单元 1、2 和 3 可以并行运行，至少应该运行两个并行，并且 4 总是必须在 3 之后运行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:05:26.943

我建议阅读[JUnit`@Rule`](http://blog.mycila.com/2009/11/writing-your-own-junit-extensions-using.html)以将它们用于并发测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:35:45.090

我推荐[ContiPerf2](http://databene.org/contiperf)，因为它是一个非常易于使用的框架。尽管我认为它不会提供声明执行路径或类似内容的可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T09:52:22.023

该线程描述了一些测试并发代码的通用方法。

[为自定义 Barrier 设计测试类](https://stackoverflow.com/questions/4418373/designing-a-test-class-for-a-custom-barrier/4427499#4427499)

对于特定的框架， [tempus-fugit](http://tempusfugitlibrary.org)有一些 JUnit[规则可以并行运行，](http://tempusfugitlibrary.org/documentation/junit/parallel/)但如上所述，您的测试可能必须包含更多逻辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T00:05:53.377

您可以使用参数化的 JUnit 测试，如下所述：http: [//junit.org/junit/javadoc/4.5/org/junit/runners/Parameterized.html](http://junit.org/junit/javadoc/4.5/org/junit/runners/Parameterized.html)

但是您需要自己编写线程逻辑，例如使用不同的线程池。

如果你想证明你的代码是线程安全的，你可以看看 pathfinder (http://javapathfinder.sourceforge.net/)。

# ios - 更改屏幕方向时背景图片“闪烁”

> ID：10142244
> 
> 赞同：0
> 
> 时间：2012-04-13T13:59:30.003
> 
> 标签：ios, orientation

当方向改变时，我想改变我的视图控制器的背景图片。我在 shouldAutorotateToInterfaceOrientation 中调用我的 setupGUIForOrientation 函数，如下所示：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    [self setupGUIForOrientation:interfaceOrientation];
    return YES;
} 
```

setupGUIForOrientation 函数：

```
-(void)setupGUIForOrientation:(UIInterfaceOrientation)orientation
{
    if(!background) background = [[UIImageView alloc] init];
    UIImage* image = [[StorageProvider storage].imageProvider getImageForSurfaceElement:@"background"];
    int width = 0;
    int height = 0;
    CGRect bounds = [[UIScreen mainScreen] bounds];
    if(UIInterfaceOrientationIsPortrait(orientation)) {
        width = MIN(bounds.size.width, bounds.size.height);
        height = MAX(bounds.size.width, bounds.size.height);
    } else {
        width = MAX(bounds.size.width, bounds.size.height);
        height = MIN(bounds.size.width, bounds.size.height);
    }
    background.frame = CGRectMake(0, 0, width, height);
    [self.view addSubview: background];
    [self.view sendSubviewToBack: background];
    [background setImage:image];
} 
```

一切都很好（图像和框架发生了变化），除了一件事：当旋转发生时，我可以在一秒钟内看到视图控制器的背景颜色，这真的很难看。我能以某种方式阻止它吗？而且，我可以用更好的方式编写这个函数吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:18:30.543

我猜，但你可能太早更新你的观点。而不是调用您的方法`shouldAutorotateToInterfaceOrientation`，您是否尝试过这样做`didRotateFromInterfaceOrientation`？

即进行此更改：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    [self setupGUIForOrientation:self.interfaceOrientation];
} 
```

# node.js - 如何为即时消息系统设计 redis pub/sub？

> ID：10142246
> 
> 赞同：14
> 
> 时间：2012-04-13T13:59:35.417
> 
> 标签：node.js, redis, publish-subscribe

我是 redis pub/sub 的新手。我在系统中有一个聊天工具，就像 IM。所以我想使用redis pub/sub。正如我检查过的样本，它们中的大多数都是基于聊天室设计的。在我的系统中，我将在用户之间有多个聊天室，例如；

```
A:B
A:C
D:C
E:F 
```

所以，上面的线是房间。我已经用 node.js 实现了服务器，如下所示；

```
var store = redis.createClient();
var pub = redis.createClient();
io.sockets.on('connection', function (socket) {
    var sub = redis.createClient();

    sub.on("message", function(pattern, data){
            data = JSON.parse(data);
        socket.send(JSON.stringify({ type: "chat", key: pattern, nick: data.nickname, message: data.text }))
        }
    });

    socket.on('message', function (messageData) {
        store.incr("messageNextId", function(e, messageId) {
        var room = ""
        var from = messageData.clientId > socket.nickname ? socket.nickname : messageData.clientId;
        var to = messageData.clientId < socket.nickname ? socket.nickname : messageData.clientId;   
            room = from + ":" + to;

        var message = { id: messageId, nickname: socket.nickname, text: messageData.text };
        store.rpush("rooms:" + room, JSON.stringify(message), function(e, r) {  
             pub.publish(room, JSON.stringify(message))
        });
    });
}); 
```

如您所见，我正在为每个连接创建一个新的 redis 订阅者。在其他聊天室示例中，redis 订阅者客户端是全局创建的。并且始终只存在三个连接，这解决了他们的问题，因为当发布者发布消息时，所有连接的客户端都应该得到它。但我在这里有一个限制。我想在两个用户之间打开一个聊天会话，只有这些用户应该是订阅者。上面的代码可以按我的意愿工作，但我不知道 redis 是否可以为每个连接创建一个新的订阅者客户端。

很高兴听到你的建议。提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-13T14:51:32.257

与往常一样，您需要针对自己的用例对此类事情进行基准测试——不可能给出一般性建议。您可能需要增加系统上打开文件的最大数量，无论是系统范围内的还是 redis 用户的。当然，这也适用于运行您的 Web 服务器的用户。

也就是说，您应该确保在用户离开时收听 redis 订阅者`socket.on('disconnect')`。`quit()`您可能还想知道 socket.io 有一个 redis 后端，它利用了 redis pub/sub，它也有房间的概念，所以使用它可能会为自己省点麻烦，因为您已经依赖于 socket .io。

**编辑：**快速检查后，我从 Redis 收到此错误消息后 991 个订阅者：

```
Ready check failed: Error: Error: ERR max number of clients reached 
```

这是默认的`redis.conf`：

```
# Set the max number of connected clients at the same time. By default
# this limit is set to 10000 clients, however if the Redis server is not
# able ot configure the process file limit to allow for the specified limit
# the max number of allowed clients is set to the current file limit
# minus 32 (as Redis reserves a few file descriptors for internal uses).
#
# Once the limit is reached Redis will close all the new connections sending
# an error 'max number of clients reached'.
#
# maxclients 10000 
```

我的系统（Ubuntu 11.11）默认`nofile`限制为 1024，所以我的快速测试应该在 992 个连接的客户端之后失败，这似乎与测试差不多（我也有一个发布者客户端）。我对你的建议是检查你的`nofile`限制（在我的系统上它`/etc/security/limits.{conf,d/*}`和你的 redis`maxclients`设置，然后基准，基准，基准！

# c# - C#, TabControl, Visual Styles - 如何为面板提供类似于 TabControl 背景的视觉背景？

> ID：10142248
> 
> 赞同：0
> 
> 时间：2012-04-13T13:59:35.900
> 
> 标签：c#, tabcontrol, gradient, visual-styles

我怎么能给面板或任何其他控件提供 TabControl 的样式（控件本身，而不是标签页）。我的意思是给控件一个边框，然后是阴影效果和渐变背景颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:05:16.987

您可以查看 TabControl 的控件模板（如何获取默认控件模板 - [WPF 中现有控件的控件模板](https://stackoverflow.com/questions/1559261/control-template-for-existing-controls-in-wpf)）并为您的控件创建适当的样式/控件模板。

# android - 启动远程服务并在 Android 中接收结果

> ID：10142249
> 
> 赞同：0
> 
> 时间：2012-04-13T13:59:41.517
> 
> 标签：android, service, android-intent, intentfilter

我有两个应用程序。一个应用程序具有 Activity，另一个应用程序是后台服务。

我可以使用隐式意图过滤器从我的活动应用程序访问服务应用程序。

我需要从服务接收结果。

例如：

从活动应用程序，我将启动服务并发送数据。在服务应用程序中，我需要接收数据并进行一些检查，并且需要作为修改结果返回到活动应用程序。

我可以通过*putExtra发送，也可以通过**getExtra*在服务中检索它。我需要从服务返回一个值并在活动应用程序中接收它。

PS：我需要的是，就像我们对*完成（）*和*onActivityResult（）*对活动结果所做的那样。

先谢谢各位大师了。。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:06:55.913

首先添加一个这样的类：

```
package com.test.context; //For example
public class MyContext extends Application
{
   //Here you define the attributes to share through the application
   // with setters and getters
} 
```

并在 AndroidManifest.xml 中添加类的路径，在示例中为 com.test.context 所以：

```
<application android:name="com.test.context.MyContext"
                 android:icon="@drawable/ic_launcher"
                 android:label="@string/app_name"> 
```

然后在您的代码中，您可以执行以下操作：

```
MyContext ctx = (MyContext)getApplication(); 
```

而且您将能够在所有应用程序、顺便说一句活动和服务中共享数据，我是在 Tasker 中这样做的，并且工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:30:52.870

当有一个完美工作的 binder 协议时，为什么要通过意图进行通信。

[http://developer.android.com/guide/topics/fundamentals/bound-services.html](http://developer.android.com/guide/topics/fundamentals/bound-services.html)

如果活动使用“bindService()”启动服务，则该服务将一直运行，直到活动调用“unbindService()”。

# javascript - 下拉菜单 - 仅限 Javascript 与 CSS - 选择哪个以实现桌面移动兼容性

> ID：10142251
> 
> 赞同：1
> 
> 时间：2012-04-13T13:59:46.993
> 
> 标签：javascript, css, drop-down-menu

我读过这个线程， [CSS 或 JavaScript 的下拉菜单](https://stackoverflow.com/questions/5219292/dropdown-menus-by-css-or-javascript)

但是请注意，对于仅使用 CSS 与使用 javascript 进行下拉菜单存在冲突的意见。

支持使用 CSS 的唯一论据是只为关闭 javascript 的人提供服务吗？还有其他考虑吗？

在必须在桌面和大多数移动浏览器（iOS、android）上运行的网站中，哪种方法更宽容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:03:50.423

下拉菜单往往是为指针设备设计的。很难找到一个可以处理线性（例如通过项目的键盘选项卡）或触摸交互（尽管如果顶级项目链接到提供向前导航的页面，您可以优雅地降级）。

我怀疑是否有可能在没有 JavaScript 的情况下获得一个适用于线性或触摸的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:03:28.413

理想的解决方案是同时使用两者。所以它适用于没有 java 脚本的人，并且它适用于使用 javascript 的人（动画....）

就像你说的那样，这取决于要求，老实说，如果目标设备支持 CSS3，你可能只用 CSS 做一个很酷的动画。

# modx - 将长内容划分为子页面

> ID：10142253
> 
> 赞同：0
> 
> 时间：2012-04-13T13:59:50.087
> 
> 标签：modx, modx-evolution

我需要将长内容划分为子页面。

划分规则：标题1（H1）

CMS系统：MODX进化

据我所知，modx 中没有任何东西可用于解决此类问题。

无论如何，我可能必须手动执行此操作，但我仍然想知道是否有办法在 MODX Evo / Revo 中执行此操作。

编辑：我需要在 MODX 中执行此操作；子页面必须是实际的子页面，原始页面变成容器。

导航将使用寻路器完成。

Edit2： **全部完成..手动。不过，问题仍然悬而未决。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:13:49.773

这是开箱即用的，我不知道有什么额外的东西可以满足你的需求。您必须编写一个插件，该插件每次保存资源并拆分内容，根据需要创建/删除同级资源等时都会起作用。对于您想要归档的内容来说，这听起来像是很多工作。

我想你看看[MIGX](http://modx.com/extras/package/migx) extra。它为您提供了可以存储无限量不同电视内容集的电视。查看[文档](http://rtfm.modx.com/display/addon/MIGX)和 Mark Hamstra 的[教程](http://www.markhamstra.com/modx-blog/2012/04/managing-galleries-with-migx/)（带有屏幕截图）以了解它是如何完成的。您应该定义一个 MIGX 条目，使其包含一个`<h1>`用于“子页面”内容的文本字段和一个富文本字段。

之后，您可以使用[表单自定义](http://rtfm.modx.com/display/revolution20/Form+Customization+Sets)隐藏原始内容字段并改为显示您的 MIGX Tv。

我认为，这是一种更简单的归档方式，你想要什么，并且想不出任何方式，你可以从实际的子页面中受益。

编辑：对不起，我刚刚意识到你问的是进化，而不是革命。我的解决方案可以在 Revo 中使用，但我认为没有类似 MIGX for Evo 的东西。抱歉，是我的错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T01:54:26.317

您可以（取决于您使用树的方式）只需在父资源下创建实际的子资源，使用 Ditto 或 Wayfinder 为其构建导航。

如果您不能像那样使用树（尽管根据您的描述我认为可以），您还可以设置许多模板变量（“content1”、“content2”、“content3”等）并用简单的片段左右。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:26:54.853

不是“开箱即用”，您将不得不通过一个片段运行您的内容，以将其解析为单独的 div，或者您可以在其上运行一些 javascript 以可能“标签”内容。如果您需要在导航中显示“子页面”，您可能必须额外使用 gatResources 来解析您的内容〜这在资源使用方面会非常昂贵。

# regex - 正则表达式来屏蔽文件中的特殊字符密码

> ID：10142259
> 
> 赞同：1
> 
> 时间：2012-04-13T14:00:19.943
> 
> 标签：regex, linux, bash

我想从一些机密文件中删除或屏蔽密码。我正在使用以下语法，它适用于简单的密码，如字母和数字基本密码，但不适用于特殊字符密码，如 !@#$%^ 。有谁知道如何匹配正则表达式中的特殊字符。这是我用于简单密码的内容。

```
sed -i 's/password="[0-9A-Za-z]\+"/password="XXXXXXXX"/g' server.xml 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:02:03.590

请改用此正则表达式。他们是否允许在密码中包含“？那么您可能需要进行更多修改。

```
sed -i 's/password="[^"]+"/password="XXXXXXXX"/g' server.xml 
```

# python - 删除 tzsp 标头以规范 pacquet

> ID：10142273
> 
> 赞同：2
> 
> 时间：2012-04-13T14:01:06.977
> 
> 标签：python, scapy

我试图在“python”上创建一个小嗅探器，以删除我的路由器用来向我发送一个副本的所有流过它的数据包的 tzsp 封装。问题是我想使用 ossim 和 snort 来分析流量，并且想解封装数据包并将其发送到 snort 正在侦听的虚拟接口。

我已经有了嗅探器，但没有找到剥离 tzsp 标头以获取原始数据包并在之后发送的方法。我看到其他人在 perl 上做过这个，但不知道如何在 scapy 上做同样的事情。

它基本上删除了前 5 个字节。

# --- 剪切 TZSP 字节 my $tzspheader = substr $udp->{data}, 0, 5; 我的 $tzspdata = substr $udp->{data}, 5;

完整的 perl 脚本 -> [http://wiki.mikrotik.com/wiki/Calea_perl_trafr](http://wiki.mikrotik.com/wiki/Calea_perl_trafr)

我可以使用 pkt scapy 格式作为数组吗？如果我删除了路由器接收到的数据包的标头，我可以使用 scapy 直接发送它还是我必须根据原始数据包协议创建一个 emtpy 数据包并将每个字段复制到新的？

谢谢你们

# java - 将搜索和替换正则表达式应用于java文件夹中的所有文件

> ID：10142274
> 
> 赞同：0
> 
> 时间：2012-04-13T14:01:11.383
> 
> 标签：java, regex, file

我在网上搜索，只找到打开每个文件并将正则表达式应用于内容的示例。有没有办法将正则表达式应用于文件夹中的所有文件？我会在 linux 上使用“grep”，但我需要编写一个可移植的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:22:01.967

你想要这样的东西吗？

```
for(File file : directory.listFiles())
{
    if(file.isFile())
    {
        String name = file.getName();
        String newName = name.replaceAll("foo","bar");
        file.renameTo(newName);
    }
} 
```

# c++ - QT4 C++ GUI 设计 - 选项卡式界面替代方案

> ID：10142280
> 
> 赞同：1
> 
> 时间：2012-04-13T14:01:41.860
> 
> 标签：c++, qt4

使用 QT4 设计界面 我被告知在界面顶部使用多个“选项卡”来导航不同页面并不是最优雅的设计。相反，我想做一些类似于 QT Creator 4.8 中的选项对话框的事情。

有谁知道类似于 QT Creator 的选项对话框中的小部件的名称。

前任。在 QT Creator 中单击工具->选项...。

![选项卡式界面](../Images/53d00375198a712369ffbf2692366e4f.png)

请注意屏幕左侧的布局，在我看来，这比屏幕顶部的选项卡更好。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:13:54.507

`QLiveView/QListWidget`使用委托绘制图标和字符串。

这是[QListView](http://qt-project.org/doc/qt-5.0/qlistview.html)文档的链接，如果您对默认列表视图委托不满意，那么您可以创建自己的 QItemDelegate 来处理自定义绘图。[这](http://kunalmaemo.blogspot.com/2010/12/creating-custom-qitemdelegate-with.html)是创建自定义 QItemDelegate 的示例代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:57:35.363

今天早上我偶然发现了这个功能区界面的实现。也许这对你有帮助？

[http://qt-project.org/forums/viewthread/4214](http://qt-project.org/forums/viewthread/4214)

# java - 使用 POI 的异常

> ID：10142282
> 
> 赞同：1
> 
> 时间：2012-04-13T14:01:50.417
> 
> 标签：java, apache-poi

我正在使用 poi 3.7 ，上传文件是 .xlsx

控制台显示：

```
org.apache.poi.POIXMLException: org.apache.poi.openxml4j.exceptions.InvalidFormatException: Package should contain a content type part [M1.13]
    at org.apache.poi.util.PackageHelper.open(PackageHelper.java:41)
    at org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:186)
    at poi.POITest.ReadAndPrintExcelFile(POITest.java:15)
    at poi.POITest.main(POITest.java:59)
Caused by: org.apache.poi.openxml4j.exceptions.InvalidFormatException: Package should contain a content type part [M1.13]
    at org.apache.poi.openxml4j.opc.ZipPackage.getPartsImpl(ZipPackage.java:147)
    at org.apache.poi.openxml4j.opc.OPCPackage.getParts(OPCPackage.java:592)
    at org.apache.poi.openxml4j.opc.OPCPackage.open(OPCPackage.java:222)
    at org.apache.poi.util.PackageHelper.open(PackageHelper.java:39)
    ... 3 more 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T21:46:02.977

只需使用 `org.apache.poi.ss.usermodel.WorkbookFactory`而不是创建实例：new HSSFWorkbook() 或 new XSSFWorkbook()。

```
Workbook exWorkBook = WorkbookFactory.create(excelInputStream); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-02T17:58:48.690

不是您可能想听到的答案。但是我发现当密码错误时出现此错误。检查对 Decryptor.verifyPassword() 的调用是否在您的代码中返回 true。如果是这样，密码应该没问题。

对我来说，我得到了一个错误，代码被忽略并尝试读取文件。然后我得到“包应该包含内容类型部分 [M1.13]”错误。一旦我输入了正确的密码，我得到了真正的回报，并且文件被解密了。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T00:46:57.613

我使用 POI，有时当发生这种情况时，您只需要尝试找出问题。以下是我过去所做的事情，以帮助找出问题所在：

1.  将文件转换为 .xls 格式并查看它是否加载。如果是，请重新另存为 .xlsx 并重试。

2.  如果文件有多个工作表，请尝试将每个工作表保存为单独的文件并查看它们是否可以加载，

3.  如果您将其缩小到特定的工作表，请加载工作表的某些部分并查看导致问题的部分。

通常，如果您使用这种“分而治之”的方法，您可以很快找出问题所在。

公式和宏可能特别成问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T11:09:56.607

如果您使用的是开放式办公室并尝试以 xlsx 格式保存文件，您仍然会收到错误消息；同样使用 xssf 也不能解决问题。您需要使用 Microsoft Office Excel 工作表来避免错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-08T13:22:38.663

我发现我的 xlsx 文件已损坏，因此必须将其删除并重新创建。

# java - 当计算从睡眠模式或待机模式唤醒时，基于图像的 jframe 变为白色

> ID：10142283
> 
> 赞同：0
> 
> 时间：2012-04-13T14:01:51.580
> 
> 标签：java, swing, sleep, standby

我有一个以图像为背景的 JFrame，称为 setUndecorated 和 setWindowOpaque 方法。当我打开 JFrame 然后让计算机进入睡眠状态，但是当计算机从睡眠中唤醒时，JFrame 变为白色。

我想可能是重绘问题，但我无法解决这个问题，请您给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:45:22.463

当您的窗口（JFrame）获得焦点时，您可以简单地尝试重新绘制包含图像的组件。我猜这应该可以解决“醒来”后重新粉刷的问题。

你也可以试试这个：

```
frame.addWindowListener ( new WindowAdapter ()
{
    public void windowActivated ( WindowEvent e )
    {
        // Here repaint what you need
    }
} ); 
```

# python - 没有运行 Web 进程错误 - 在 Heroku 上部署 Django

> ID：10142284
> 
> 赞同：14
> 
> 时间：2012-04-13T14:01:57.123
> 
> 标签：python, django, heroku

我正在使用本教程来部署 Django。[http://devcenter.heroku.com/articles/django] 在我做了一个 git push heroku master 之后，没有 web 进程。

```
Process  State  Command  
-------  -----  ------- 
```

在日志中，它看起来如下所示。

```
2012-04-13T03:48:45+00:00 heroku[slugc]: Slug compilation started
2012-04-13T03:49:32+00:00 heroku[api]: Config add PYTHONUNBUFFERED, PYTHONPATH, PATH,     
LD_LIBRARY_PATH, LANG, PYTHONHOME, LIBRARY_PATH, PYTHONHASHSEED by zach@gmail.com
2012-04-13T03:49:32+00:00 heroku[api]: Release v2 created by zach@gmail.com
2012-04-13T03:49:34+00:00 heroku[api]: Release v3 created by zach@gmail.com
2012-04-13T03:49:34+00:00 heroku[api]: Deploy d1263ef by zach@gmail.com
2012-04-13T03:49:34+00:00 heroku[web.1]: State changed from created to down
2012-04-13T03:49:35+00:00 heroku[slugc]: Slug compilation finished
2012-04-13T03:50:19+00:00 heroku[router]: Error H14 (No web processes running) -> GET    
growing-winter-4952.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 
```

有任何想法吗？我能够让它与另一个应用程序一起使用。谢谢你。

另外，当我执行 heroku scale web=1 时，我得到了这个

```
Scaling web processes...  !    Record not found. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-18T00:54:07.967

这很可能是通过客户端将 Web 进程缩小到零的结果。

```
$ heroku ps:scale web=0 
```

使用该`heroku ps`命令来确定您的 Web 进程的状态。您应该查看[错误代码](https://devcenter.heroku.com/articles/error-codes)以了解 Heroku 功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T01:24:27.660

我有同样的问题。起初，当我跑步时`heroku scale web=1`，我得到了和你一样的“找不到记录”错误。但是我等了几分钟又运行了它，它工作了。

如果您的构建由于某种原因在第一次推送时失败，那么 heroku 不会自动为您提供 Web 进程，并且可能会出现“找不到记录”错误，因为此时构建出现了问题。

# c# - 如何使用 Infragistics 在 ultratoolbarsmanager 中更改 texbox 中的字体大小？

> ID：10142289
> 
> 赞同：2
> 
> 时间：2012-04-13T14:02:15.553
> 
> 标签：c#, infragistics

我正在使用网络优势 2009.2。我在 Windows 窗体中遇到了这个问题，我想要在 texbox 中使用大字体。谁能帮我 ？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:15:22.633

如果您使用的是设计器，请选择 TextBoxTool 项目，然后调整它的大小。

如果您使用代码构建 UI，则：

```
textBoxTool1.InstanceProps.Width = 114; 
```

# c# - 如何限制用户在 TextBox 中输入的值？

> ID：10142292
> 
> 赞同：3
> 
> 时间：2012-04-13T14:02:18.677
> 
> 标签：c#, wpf, xaml

我的应用程序的用户可以在 TextBoxes 中输入值。在某些情况下，需要将值限制在某个范围内，例如 0 到 1 或 1 到 50。在其他情况下，它们最多只能输入 13 或 20 个字符，具体取决于。

我可以使用 Binding.StringFormat 来强制执行这些范围吗？如果是这样，

*   我需要指定什么来将值限制为特定的字符长度？
*   我需要指定什么来将值限制在某个范围内？

如果没有，实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:06:22.527

你想要的是输入验证。对于初学者[，MSDN 上的本教程](http://msdn.microsoft.com/en-us/library/ms753962.aspx)将对您有所帮助，有关 IDataErrorInfo（首选方式）的更多信息[可以在此处获得](http://blogs.msdn.com/b/wpfsdk/archive/2007/10/02/data-validation-in-3-5.aspx)。

这个问题已经是关于 SO：[WPF Data Binding and Validation Rules Best Practices的一个话题](https://stackoverflow.com/questions/63646/wpf-data-binding-and-validation-rules-best-practices)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:05:26.680

[WPF 代码项目中](http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation)的验证应该给你一个好的开始。

像 ASP.NET 这样的相关问题[WPF Validators 也](https://stackoverflow.com/questions/5622333/wpf-validators-like-the-one-in-asp-net)应该有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:06:01.827

您需要使用输入掩码，查看这篇文章[WPF Maskable TextBox for Numeric Values](http://www.codeproject.com/Articles/34228/WPF-Maskable-TextBox-for-Numeric-Values)

根据事件中的这篇文章，`TextBox_PreviewTextInput`您`TextBoxPastingEventHandler`可以检查范围。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T14:27:45.090

文本框长度属性应该解决

```
Textbox.maxlength= 10; 
```

# android - 排行榜的布局

> ID：10142294
> 
> 赞同：0
> 
> 时间：2012-04-13T14:02:21.813
> 
> 标签：android, xml, xmlhttprequest, xml-layout

我在为排行榜创建布局时遇到了一些问题。在我当前的布局中，我创建了一个包含两行的表。第一行有我想要的标题，第二行有黑色字段，其中包含获得的数据。我从包含 xml 文件的服务器获取数据。我遇到的问题是没有像我那样获取数据。问题是当我显示数据时，我使用了一个需要链接到它的布局的 ListAdapter。但是当我链接适当的布局时，我会在每一行之后重复标题...例如

团队 PWLDP

阿森纳 1 1 1 1 1

团队 PWLDP

阿斯顿维拉 1 1 1 1 1

我敢肯定它是一个简单的错误来修复....也许我需要你别的东西来显示数据？？？

**下面是主要的代码**

```
public class tab_1 extends ListActivity {

    public int a = Football_appActivity.league;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        if(a==1){
            String xml = XMLfunctions.getXML_prem_table();
            Document doc = XMLfunctions.XMLfromString(xml);
            int numResults = XMLfunctions.numResults(doc);

            if((numResults <= 0)){
                Toast.makeText(tab_1.this, "League Table", Toast.LENGTH_LONG).show();
                finish();
            }

            NodeList nodes = doc.getElementsByTagName("team");

            for (int i = 0; i < nodes.getLength(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();

                Element e = (Element)nodes.item(i);
                map.put("id", XMLfunctions.getValue(e, "id"));
                map.put("name", "" + XMLfunctions.getValue(e, "name"));
                map.put("played", "" + XMLfunctions.getValue(e, "played"));
                map.put("won", "" + XMLfunctions.getValue(e, "won"));
                map.put("drawn", "" + XMLfunctions.getValue(e, "drawn"));
                map.put("lost", "" + XMLfunctions.getValue(e, "lost"));
                map.put("points", "" + XMLfunctions.getValue(e, "points"));
                mylist.add(map);
            }
            **
            ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main_tab,
                new String[] { "name", "played", "won", "drawn", "lost", "points"},
                new int[] { R.id.item_title, R.id.item_played, R.id.item_won,
                R.id.item_drawn, R.id.item_lost, R.id.item_points});**

            setListAdapter(adapter);

            final ListView lv = getListView();
            lv.setTextFilterEnabled(true);
            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                    @SuppressWarnings("unchecked")
                    HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);
                    Toast.makeText(tab_1.this, o.get("name") + " have Won '" + o.get("won") + "' games, and are currently on '" + o.get("points") + "' points!", Toast.LENGTH_LONG).show();
                }
            });
        } 
```

**下面是名为 main_tab.xml 的布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="7dp"
>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:stretchColumns="1"
android:id="@+id/table123">
<TableRow>
<TextView 
    android:text="Name"
    android:id="@+id/team_title">
    </TextView>
<TextView android:text="P "
    android:gravity="right"
    android:id="@+id/team_played">
</TextView>
<TextView android:text="W"
    android:id="@+id/team_won">
</TextView>
<TextView android:text="D"
    android:id="@+id/team_drawn">
</TextView>
<TextView android:text="L"
    android:id="@+id/team_lost">
</TextView>
<TextView android:text="P"
    android:id="@+id/team_points">
</TextView>
</TableRow>

<TableRow>
    <TextView  
        android:id="@+id/item_title"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:padding="2dp"
        android:textSize="20dp" />
        <TextView  
        android:id="@+id/item_played"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:gravity="right" 
        android:padding="2dp"
        android:textSize="13dp" />
        <TextView  
        android:id="@+id/item_won"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:padding="2dp"
        android:textSize="13dp" />
        <TextView  
        android:id="@+id/item_drawn"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:padding="2dp"
        android:textSize="13dp" />
        <TextView  
        android:id="@+id/item_lost"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:padding="2dp"
        android:textSize="13dp" />
        <TextView  
        android:id="@+id/item_points"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:padding="2dp"
        android:textSize="13dp" />
        </TableRow>
        </TableLayout>

</LinearLayout> 
```

**下面是 ListPlaceHolder.XML 的配置**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent">    

<ListView
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:drawSelectorOnTop="false" />

<TextView
    android:id="@id/android:empty"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="No data">
    </TextView>

</LinearLayout> 
```

* * *

好的很酷..所以我更改了 main_tab.xml 的布局并创建了一个名为 table_header.xml 的新布局，其中包含联赛的标题，例如姓名、出场、获胜、丢失等......但现在我有一个错误logcat .. 下面是主页面的代码...

```
if(a==1){
            String xml = XMLfunctions.getXML_prem_table();
            Document doc = XMLfunctions.XMLfromString(xml);
             int numResults = XMLfunctions.numResults(doc);

             if((numResults <= 0)){
                Toast.makeText(tab_1.this, "League Table", Toast.LENGTH_LONG).show();  
                finish();
             }

            NodeList nodes = doc.getElementsByTagName("team");

            setContentView(R.layout.table_header);

            for (int i = 0; i < nodes.getLength(); i++) {                           
                HashMap<String, String> map = new HashMap<String, String>();    

                Element e = (Element)nodes.item(i);
                map.put("id", XMLfunctions.getValue(e, "id"));
                map.put("name", "" + XMLfunctions.getValue(e, "name"));
                map.put("played", "" + XMLfunctions.getValue(e, "played"));
                map.put("won", "" + XMLfunctions.getValue(e, "won"));
                map.put("drawn", "" + XMLfunctions.getValue(e, "drawn"));
                map.put("lost", "" + XMLfunctions.getValue(e, "lost"));
                map.put("points", "" + XMLfunctions.getValue(e, "points"));
                mylist.add(map);            
            }       

             ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main_tab, 
                             new String[] { "name", "played", "won", "drawn", "lost", "points"}, 
                             new int[] { R.id.item_title, R.id.item_played, R.id.item_won,
                                        R.id.item_drawn, R.id.item_lost, R.id.item_points});

             setListAdapter(adapter);

             final ListView lv = getListView();
             lv.setTextFilterEnabled(true); 
             lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                    @SuppressWarnings("unchecked")
                    HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                    Toast.makeText(tab_1.this, o.get("name") + " have Won '" + o.get("won") + "' games, and are currently on '" + o.get("points") + "' points!", Toast.LENGTH_LONG).show(); 

                }
            }); 
```

更改我使用的布局的行是： setContentView(R.layout.table_header);

这个对吗？？？？

我得到的第一个错误是（有一个很长的列表，但我认为这是原因）：

04-15 09:46:42.268: E/AndroidRuntime(346): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.julian.football_app/com.julian.football_app.tab_1}: java.lang.RuntimeException: 你的content 必须有一个 id 属性为 'android.R.id.list' 的 ListView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:23:41.800

正如您所怀疑的，您的问题在这里：

```
ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main_tab,
    new String[] { "name", "played", "won", "drawn", "lost", "points"},
    new int[] { R.id.item_title, R.id.item_played, R.id.item_won,
    R.id.item_drawn, R.id.item_lost, R.id.item_points}); 
```

具体来说：

```
R.layout.main_tab 
```

那应该是列表*行*布局。由于您提供了标题和数据，因此它为每个列表行重复标题。将它们分开。您需要为列表创建一个布局。基本上从该文件中删除第二个 TableLayout，将其放入它自己的 XML 文件中，然后为您的列表适配器调用该文件。在 main_tab 的标题表布局下添加您的 ListView。

**row_layout.xml**

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myTableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TableRow>
    <TextView  
            android:id="@+id/item_title"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:padding="2dp"
            android:textSize="20dp" />
    <TextView  
            android:id="@+id/item_played"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:gravity="right" 
            android:padding="2dp"
            android:textSize="13dp" />
    <TextView  
            android:id="@+id/item_won"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:padding="2dp"
            android:textSize="13dp" />
    <TextView  
            android:id="@+id/item_drawn"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:padding="2dp"
            android:textSize="13dp" />
    <TextView  
            android:id="@+id/item_lost"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:padding="2dp"
            android:textSize="13dp" />
    <TextView  
            android:id="@+id/item_points"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:padding="2dp"
            android:textSize="13dp" />
            </TableRow>
    </TableLayout> 
```

# c# - 引用来自不同程序集的转换器时出现 XamlParseException

> ID：10142300
> 
> 赞同：0
> 
> 时间：2012-04-13T14:02:43.997
> 
> 标签：c#, wpf, converter

我有一个 XAML UserControl，它使用同一项目中包含的转换器。

```
xmlns:filter="clr-namespace:SampleModuleFilter" - namespace definition 
```

到目前为止，一切都很好。但是，当我将转换器移动到另一个程序集中并相应地调整命名空间和引用时，我得到以下异常： XamlParseException - “在 'System.Windows.Markup.StaticResourceHolder' 上提供值引发异常。内部异常状态“方法或操作未实现。”这很奇怪。移动到另一个库后的命名空间如下所示：

```
xmlns:filter="clr-namespace:SampleLibrary.Converters;assembly=SampleLibrary" 
```

转换器资源定义为：

```
<filter:BoolToVisibilityConverter x:Key="boolToVisibilityConverter" /> 
```

我像这样使用它：

```
Visibility="{Binding DisplayLabel, Converter={StaticResource ResourceKey=boolToVisibilityConverter}}" 
```

IntelliSense 显然可以看到该库，因为它工作正常（在我编写命名空间前缀后提供转换器类）。

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T18:36:39.980

您还必须在代码隐藏文件中引用您的程序集。

如果仅在 XAML 部分中引用程序集，编译器将返回“加载 xxx.dll 失败”异常。

您还必须直接调用连接的程序集，如下所示：

```
var dummy = new MyExternalAssemby.MyType(); 
```

或者只是在新的代码行中

```
new MyExternalAssemby.MyType(); 
```

没有将结果放入虚拟变量中。

通常我在静态构造函数中这样做。我认为这是 XAML 解释器中的一个错误，因为 XAML 没有被编译，而只是在 BAML（二进制 XAML）中“翻译”。因此，如果您在 XAML 中引用了一个类型，而没有在 NET 链接器后面的代码中创建“硬”引用，则会完全忽略它。

HTH 洛伦佐

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T14:15:14.400

而不仅仅是：

```
 xmlns:filter="clr-namespace:SampleModuleFilter" 
```

也参考程序集

```
 xmlns:filter="clr-namespace:SampleModuleFilter;assembly=SampleModuleFilterAssemblyName" 
```

这应该够了吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:09:14.960

这很奇怪；我们的转换器都位于一个中央图书馆，它工作正常。假设引用和命名空间是正确的，我唯一能建议的就是清理和重建有问题的两个项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T14:10:26.270

“SampleLibrary.dll”是否在您的代码中某处使用？

我遇到了一个奇怪的错误，其中仅在 xaml 文件中使用的引用程序集在编译时被跳过，并且不会出现在 dll 依赖项中。

# c - C：用于解析配置文件和命令行的库

> ID：10142305
> 
> 赞同：1
> 
> 时间：2012-04-13T14:03:13.497
> 
> 标签：c, parsing, configuration

我正在寻找一些支持严格选项集的库（因此无法在配置文件中设置不存在的选项）以及解析命令行以覆盖配置文件中的选项的可能性。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:33:37.473

对于命令行，有 getopt 或[丰富](http://libhx.sf.net/) [的](http://freecode.com/projects/popt/) [代码](http://caca.zoy.org/browser/libcaca/trunk/caca/getopt.c)，有的有更多，有的没有那么奇怪的 API，有的是像 getopt 这样的开放编码形式，还有一些是有或没有回调能力的表格形式。至于配置文件，如果您需要支持几乎任意格式，则有 (lib)augeas。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:22:09.103

假设您可以在您的项目中使用 LGPL 的东西，有[http://www.hyperrealm.com/libconfig/](http://www.hyperrealm.com/libconfig/)，根据文档，它似乎在 API 中支持在文件被解析后设置值。

# javascript - 用于从链接的“onclick”属性中抓取 URL 的 jQuery

> ID：10142306
> 
> 赞同：0
> 
> 时间：2012-04-13T14:03:13.980
> 
> 标签：javascript, jquery, wordpress, html, podpress

我在我的 Wordpress 实例上使用 podPress，以便在收听我们的播客剧集时为用户提供一些播放控制。下面，我在这些控件的播放按钮上找到了代码。

我想做的是编写一些 jQuery 来抓取播客剧集的 URL。在这个测试用例中，该 URL 是[http://www.test.com/episodes/2012_04_11_episode.mp3](http://www.test.com/episodes/2012_04_11_episode.mp3)。我想将此 URL 写入一个变量，然后在我的网站上的其他地方使用它，在那里我正在构建一个 HTML5 音频播放器，该播放器在更中心的位置展示我们的最新剧集。

根据 podPress 编写这些播放器的方式，我需要的带有 URL 的链接的 ID 始终是“podpress_html5_play_1”。我知道如何定位此 ID，但我不知道如何获取嵌套在“onclick”元素中的字符串。任何人都可以帮忙吗？

这是在链接上找到的代码：

```
<a id="podpress_html5_play_1" href="javascript:void(null);" onclick="podPressenprintHTML5audio('1', 'http://www.test.com/episodes/2012_04_11_episode.mp3', true);" class="podpress_play_button" title="Play &gt;" style="background-image:url(http://www.test.com/beta/wp-content/plugins/podpress/images/play_button_dyn_v4_32.png);"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:14:50.853

```
var link = 'http'+$('#podpress_html5_play_1').attr('onclick').split('http')[1].split("'")[0]; 
```

[小提琴](http://jsfiddle.net/adeneo/4MU3h/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:14:45.333

试试这个：

```
var link = $("#podpress_html5_play_1").attr("onclick"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:38:03.967

只需这样做：假设您使用的是 jQuery；

```
 // Get the onclick attribute

    var onclickAttr = $('a#podpress_html5_play_1').attr('onclick');

// strip and split it into an array with the single quote string

    var a  = onclickAttr.split("'");

// Now a[3] holds your link

alert (a[3]); 
```

JSFiddle：http: [//jsfiddle.net/P6Kzt/](http://jsfiddle.net/P6Kzt/)

# c# - 启用对结构的引用的属性语法？

> ID：10142310
> 
> 赞同：4
> 
> 时间：2012-04-13T14:03:32.903
> 
> 标签：c#

据我了解，属性不能返回引用，并且由于结构是值类型，因此无法通过属性返回对结构的引用，这将启用：

```
public struct SomeStruct
{
   public int SomeMember { get; set; }
}
class foo
{
   private SomeStruct bar; 
   public SomeStruct Bar{ get { return bar; } set { bar = value; } }
}

//Somewhere else
foo f = new foo();
f.Bar.SomeMember = 42; //Error, this doesn't work 
```

我必须求助于 setMemberOfSomeStruct() 还是有其他方法？

编辑：具体来说，我想避免一直为这样的结构调用 new 。我知道使用构造函数 SomeStruct(int)，这会起作用：

```
f.Bar = new SomeStruct(42); //ugh 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:05:22.480

使您的`struct`实现***不可变***并执行以下操作：

```
var newSomeStruct = new SomeStruct(42 /* Feeds SomeMember */);
var myFoo = new Foo();
myFoo.Bar = newSomeStruct;

public struct SomeStruct
{
    private int _someMember;

    public int SomeMember { get { return _someMember; } }

    public SomeStruct(int someMember)
    {
        _someMember = someMember;
    }
} 
```

不可变结构有助于保留预期的值类型语义。

如果你不让它不可变，那么上面的代码仍然是让它工作的唯一方法。

或者，但不是更好看，在类上公开一个方法来设置类的副本`SomeStruct`：

```
public void SetSomeMember(int val)
{
    _bar.SomeMember = val; // Note _bar in this example is a field, not a property.
} 
```

我只是为了完整性而提供这个，我仍然会走不变的路线，因为关于“可变结构是邪恶的”已经达成共识。属性 getter 是一个问题，就像转换为接口一样 - 不可变结构解决了这些问题。

还有另一个有趣的观点 - 不要假设在性能问题实际存在之前就存在性能问题。定义可能与您从中获得的使用风格`class`一样快。`struct`剖析是这里的王道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:06:57.207

看起来你有一个可变结构，[不推荐](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)。

但是要直接回答您的问题：创建一个副本，对其进行变异，然后使用变异的结构设置属性。

```
var barCopy = f.Bar;
barCopy.SomeMember = 42;
f.Bar = barCopy; 
```

顺便一提：

> 据我了解，属性不能返回引用。

Of course they can - properties of reference types return references from the getter.

> Since structs are value types, there's no way to return a reference to a struct via properties.

Sure there is, you can return a reference to a boxed struct. Example:

```
 public IComparable Property { get { return 42; } } 
```

# grep - 如何 grep 包含可选单词？

> ID：10142314
> 
> 赞同：21
> 
> 时间：2012-04-13T14:03:46.687
> 
> 标签：grep

我使用以下 grep 查询来查找 VB 源文件中出现的函数。

```
 grep -nri "^\s*\(public\|private\|protected\)\s*\(sub\|function\)" formName.frm 
```

这匹配 -

```
 Private Sub Form_Unload(Cancel As Integer)
    Private Sub lbSelect_Click()
    ... 
```

但是，它错过了以下功能 -

```
 Private Static Sub SaveCustomer() 
```

因为那里的附加词“静态”。如何在 grep 查询中解释这个“可选”词？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-13T14:07:46.067

您可以使用 a`\?`使某些内容成为可选：

```
grep -nri "^\s*\(public\|private\|protected\)\s*\(static\)\?\s*\(sub\|function\)" formName.frm 
```

在这种情况下，包含字符串“static”的前面的组是可选的（即可能出现 0 次或 1 次）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-13T14:21:10.907

使用 grep 时，基数明智：

```
* : 0 or many
+ : 1 or many
? : 0 or 1 <--- this is what you need. 
```

给定以下示例（这个**词**代表您的**static**）：

```
I am well
I was well
You are well
You were well
I am very well
He is well
He was well
She is well
She was well
She was very well 
```

如果我们只想

```
I am well
I was well
You are well
You were well
I am very well 
```

我们将使用“？” （还要注意在“very”之后小心放置空格，以提及我们希望“very”这个词出现零次或一次：

```
egrep "(I|You) (am|was|are|were) (very )?well" file.txt 
```

正如您猜到的那样，我邀请您使用**egrep**而不是**grep**（您可以尝试**grep -E**，用于扩展正则表达式）。

# c++ - 以下片段的区别

> ID：10142317
> 
> 赞同：4
> 
> 时间：2012-04-13T14:03:54.853
> 
> 标签：c++, c

请告诉我有什么区别

```
typedef struct Tcl_ObjType {
    char *name;
    Tcl_FreeInternalRepProc *freeIntRepProc;
    Tcl_DupInternalRepProc *dupIntRepProc;
    Tcl_UpdateStringProc *updateStringProc;
    Tcl_SetFromAnyProc *setFromAnyProc;
} Tcl_ObjType; 
```

和

```
struct Tcl_ObjType {
    char *name;
    Tcl_FreeInternalRepProc *freeIntRepProc;
    Tcl_DupInternalRepProc *dupIntRepProc;
    Tcl_UpdateStringProc *updateStringProc;
    Tcl_SetFromAnyProc *setFromAnyProc;
}; 
```

我在这里看到了第一个版本：[http](http://www.tcl.tk/man/tcl8.5/TclLib/ObjectType.htm) ://www.tcl.tk/man/tcl8.5/TclLib/ObjectType.htm ，不知道为什么要这样写。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T14:06:21.140

对于**C++**，没有区别。

如果这是一个**C**程序并且您使用了第一个变体，您可以这样做：

```
Tcl_ObjType instanceOfStructure; 
```

代替

```
struct Tcl_ObjType instanceOfStructure; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:08:20.967

您已经为结构提供了类型定义（用外行的话来说，提供了现有类型的替代名称）：

使用您的第一个示例，您可以通过以下方式使用它来引用对象/声明新对象：

```
Tcl_ObjType newObj; 
```

# iphone - Jquery Mobile Ajax 和声音

> ID：10142323
> 
> 赞同：1
> 
> 时间：2012-04-13T14:04:05.893
> 
> 标签：iphone, html, jquery-mobile, html5-audio

当我从我们有 HTML5 流式音频的页面移动时，声音停止了。

[http://silver.georates.net/silver/broadcast.html#podcast](http://silver.georates.net/silver/broadcast.html#podcast)

如何使它成为可能，以便当我在页面之间导航时，声音会留在 Iphones safari 中？

# c++ - 为非指针模板类引发异常？

> ID：10142324
> 
> 赞同：2
> 
> 时间：2012-04-13T14:04:06.720
> 
> 标签：c++, templates

我有这个队列类，实际上，有几个遇到相同的问题 - 如果使用具有冗长复制 ctor 的类型编译性能会很差 - 队列在推送/弹出期间被锁定，并且锁定的时间越长，争执的机会更大。如果某些开发人员尝试使用 10MB 缓冲区类（而不是指向它的指针）编译该类，则该类无法编译将很有用。

似乎没有简单的方法可以将模板参数限制为基类或任何其他类型。

如果参数不是指向类实例的指针，是否有一些我可以使用的 bodge 以便我的类无法编译？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T14:18:33.817

您可以通过多种方式做到这一点。正如另一个答案指出的那样，您可以使用 static_assert （最好来自 C++11/Boost，尽管您可以[自己滚动](https://stackoverflow.com/questions/1980012/boost-static-assert-without-boost)），尽管我建议检查它是否实际上是一个指针，而不仅仅是依赖于大小。您可以自己滚动或使用[现有特征](http://www.boost.org/doc/libs/1_49_0/libs/type_traits/doc/html/boost_typetraits/reference/is_pointer.html)（[C++11 中](http://www.cplusplus.com/reference/type_traits/is_pointer/)也可用），具体取决于您使用的系统：

```
template <typename T>
struct is_pointer {
  enum { value = 0 };
};

template <typename T>
struct is_pointer<T*> {
  enum { value = 1 };
};

template <typename T>
struct container {
  static_assert(is_pointer<T>::value, "T must be a pointer");
  void push(const T&);
  T pop();
};

struct foo {};

int main() {
  container<foo*> good;
  container<foo> fail;
} 
```

但这提出了一个更大的问题。如果您的要求是您只指向事物，为什么不这样解释模板参数呢？例如制作你的容器：

```
template <typename T>
struct container {
  void push(const T*);
  T *pop();
}; 
```

而不是让人们首先指定非指针类型？

最后，如果您不想走 static_assert 道路，您可以只为指针类型专门化容器，而不为非指针实现它，例如：

```
template <typename T>
struct container;

template <typename T>
struct container<T*> {
  void push(const T*);
  T *pop();
};

struct foo {};

int main() {
  container<foo*> good;
  container<foo> fail;
} 
```

这仍然需要显式地将类型设为指针，仍然会导致非指针类型的编译时失败，但不需要 static_assert 或确定类型是否为指针的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:24:00.677

“如果参数不是指向类实例的指针，是否有一些我可以使用的 bodge 以便我的类无法编译？”

不是boge，而是：

```
template<class T>
class MyContainer
{
public:
    void AllMemberFunctions( T* in ){}
    void OnlyAcceptTStars( T* in ){}

}; 
```

用户定义所持有的类型，您的函数只接受或处理指向该类型的指针。

（或者做 STL 所做的，假设用户有一些智慧，然后忘记这个问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:07:26.477

使用静态断言的变体（对于许多可能的实现，只需 google）。类似的东西`BOOST_STATIC_ASSERT(sizeof(T) <= sizeof(void*))`应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T14:09:51.870

是的，您可以使用 static_assert 来完成。例如，

```
template<int N>
class Queue
{
static_assert(N < size, "N < size violated");
...
}; 
```

# image - 将 Wordpress 上传内容迁移到 Amazon S3

> ID：10142325
> 
> 赞同：2
> 
> 时间：2012-04-13T14:04:08.877
> 
> 标签：image, wordpress, .htaccess, amazon-s3

我目前在 wordpress 上使用一个插件，每当添加新图片时，它都会在 s3 存储桶中创建上传的副本。问题是在同一个站点上，在我们开始使用这个插件之前上传了大约 700 张图片，这些图片不在 s3 上，我们需要释放一些空间。该插件不会复制这些旧图片。

如果我们手动复制文件，是否有人知道将所有图像 URL 重定向到 s3 存储桶的方法？这可以通过上传文件夹中的 htaccess 来完成吗？

感谢您的帮助，我对重定向和事情非常糟糕，需要改进。

约瑟夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:49:29.497

使用：

RedirectPermanent /wp-content/uploads [http://xxxx.s3.amazonaws.com/wp-content/uploads](http://xxxx.s3.amazonaws.com/wp-content/uploads)

在您的主 .htaccess 文件中应该可以解决问题，请注意这将重定向所有上传（包括可能的非图像上传）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-06T04:47:02.960

无需安装任何插件。我通过使用 S3FS 将 wp-content/uploads 映射到 S3 存储桶来做到这一点。请参阅[使用 S3FS 将 wordpress 上传移动到 Amazon s3](http://wordpress-tips4all.blogspot.in/2014/07/wordpress-uploads-to-amazon-s3-using-s3fs.html)

如果您想节省服务器空间，请不要在挂载 S3FS 时使用 use_cache 选项。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T10:45:56.823

尝试使用 s3cmd 安装它，通过为其提供访问权限和 aws 的密钥来配置它，然后将您的上传文件夹或图像文件夹与 s3 存储桶同步

你完成了

# android - 如何在 kindle fire 上使用基于位置的服务

> ID：10142326
> 
> 赞同：-2
> 
> 时间：2012-04-13T14:04:11.913
> 
> 标签：android, gps, kindle-fire, location-based-service

我想在我的应用程序中使用基于位置的服务。如何在kindle fire上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:24:28.720

Skyhook 为[Kindle Fire 提供了一个位置 SDK](http://www.skyhookwireless.com/location-technology/sdk.php)，允许应用程序开发人员轻松地将位置信息包含在他们的应用程序中。在 Kindle Fire 上有几个应用程序可以[利用这个 SDK，](http://www.mediabistro.com/appnewser/kindle-fire-app-gets-location-services-sans-gps_b21551)例如 TweetCaster、MapQuest、HopStop 和 deCarta。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:04:47.777

[Android 市场上的socketGPS](https://play.google.com/store/apps/details?id=com.capsicumdreams.SocketGPS&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5jYXBzaWN1bWRyZWFtcy5Tb2NrZXRHUFMiXQ..%20%28socketGPS%29)连接到 iPhone，在没有 GPS 模块的 android 设备上模拟真正的 GPS 接收器。

# entity-framework - Entity Framework 4 中的并发读取访问

> ID：10142328
> 
> 赞同：1
> 
> 时间：2012-04-13T14:04:13.357
> 
> 标签：entity-framework

假设我从不使用 EF 编写代码，则永远不会调用 SaveChanges，例如，EF 对于来自同一个 ObjectContext 的并发读取是否安全？

它可能仍在初始化数据库连接并读取新对象，或更新现有对象（或删除！），但它不会向数据库写入任何内容，因此没有事务（我假设）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:10:58.720

`ObjectContext`和相关的 EF 类不是线程安全的，所以不要将它们用于并发操作。如果您需要运行并发数据访问，请为每个线程使用新的上下文。

# architecture - 设计一套产品，同时只构建/维护一个

> ID：10142332
> 
> 赞同：0
> 
> 时间：2012-04-13T14:04:29.240
> 
> 标签：architecture

会有一个应用程序可以做 3 件主要的事情。`A`,`B`和`C`. 这将是一个 C# winforms 应用程序。

我们的 CEO 希望将此应用程序分为 6 种不同的产品。

*   只是一个（简单）
*   A + B（高级）
*   A + B + C（终极）

所有这一切都适用于一个用户或多个用户（许可）。因此，我们现在有 6 个项目！

如果我们假设三大部分确实是分开的，可以单独工作，我们怎么能维持**一个**项目而卖6个呢？

目前，我想到了三种方法来实现这一点：

**A：**有一个基本的骨干，并将 A、B、C 中的每一个构建为一个模块。这样我们只需要处理 -one/many users- 问题。

**B：**创建一个可靠的产品并使用预处理器指令在编译时设置功能。这真的很困难，并且使代码变得丑陋。此外，可能会破坏项目。

**C：**创建一个版本控制机制，该机制将设置为允许应用程序的某些功能。这是最简单的方法，但有两个缺点。它很容易破解，我们为简单用户提供终极版，这很糟糕。

与此类似的是 Windows 版本问题（Home、Basic、Pro、Ultimate）

我们应该如何设计这个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:35:26.493

1)**模块化**- A 和 B 方法之间的决定是困难的。首先，重要的是区分应用程序如何在 UI 中向用户呈现自己的模块化和应用程序底层架构中的模块化。（业务逻辑、数据层等），同时承认第二个反映了第一个。AFAIK WinForms 没有提供非常严格的表示层和业务层分离，您需要做出一些额外的努力来更好地分离这些层，以便在 UI 中具有灵活性，而无需重写大量代码。这意味着如果您将业务层设计为严格反映“UI 模块”..您将被卡住，然后根据销售情况转换模块可能更容易。但如果你想在未来保持灵活性，

2)最终**产品与生产**- 您可能会有不同的最终产品或包含 A 或 A+B、1 个用户或多个用户等的构建，这并不意味着您需要以这种方式划分代码和工作。 Visual Studio 允许您确保为不同的“发布”版本创建模板，这些模板将包含或不包含这个或那个模块或功能。

# fitnesse - Xebium，健身和硒暂停

> ID：10142335
> 
> 赞同：0
> 
> 时间：2012-04-13T14:04:52.650
> 
> 标签：fitnesse, selenium-fitnesse-bridge

我目前使用 Xebium，它允许 Selenium 与 Fitnesse 测试一起使用。在 Selenium 中，我可以设置 3000 毫秒的暂停。当我查看 Fitnesse 的源代码时，它具有以下行：

```
| do | pause | on | 3000 | 
```

但是，当我在 Fitnesse 中运行此测试时，它不会等待 3 秒，我认为它会等待，而是继续下一行。

我需要暂停屏幕才能正确加载按钮。我认为 Fitnesse 对 seleniums 使用暂停或以另一种方式中断它有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-01T13:54:43.657

我试过了，它奏效了：

`ensure | do | pause | on | 3000 |`

我知道已经两年多了，但我希望这能帮助像我这样刚开始研究 Xebium 的人。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:19:44.400

有点晚了，但对于未来的访问者：您是否尝试过等待按钮出现？Selenium 文档建议这样做：

> 许多动作可以用“AndWait”后缀调用，例如“clickAndWait”。这个后缀告诉 Selenium 该操作将导致浏览器调用服务器，并且 Selenium 应该等待新页面加载。

可在[http://seleniumhq.org/docs/02_selenium_ide.jsp#selenium-commands-selenese找到](http://seleniumhq.org/docs/02_selenium_ide.jsp#selenium-commands-selenese)

# c# - 数据表，超过，加入

> ID：10142337
> 
> 赞同：2
> 
> 时间：2012-04-13T14:05:06.770
> 
> 标签：c#, visual-studio-2010, linq

我有Datatable`sourceTable`用 columns`source_Id`和. 第二个数据表带有列, 。所有列都是 Int 类型而不是列标题。`title``programme_Id``credits``credit_Id``programme_Id`

`programme_Id`数据表中的列`credits`是外键 FROM 数据表`sourceTable`

我想要实现的是 Exceed table `sourceTable`with Column `credit_Id`from datatable `credits`。

我写了一个有效的代码，但是很慢，有没有更好的方法！，如果没有我正在寻找的项目，FirstOrDefault 将放置 0，对于这种情况，也许会更好地返回 null 值而不是 0

```
sourceTable.columns.Add("credits_Id");
var rowColl = credits.AsEnumerable();
foreach (DataRow row in sourceTable.Rows)
{
    var credits_Id =
        (from r in rowColl
         where r.Field<int>("programme_Id") == Convert.ToInt32(row["programme_Id"].ToString())
         select r.Field<int>("credits_Id")).FirstOrDefault<int>();

    row["credits_Id"] = credits_Id;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:09:54.230

以防谷歌把某人带到这里：这是我现在提出的问题的解决方案:)

```
var q = from c in sourceTable.AsEnumerable()
                    join o in credits.AsEnumerable() on c.Field<int>("programme_Id") equals o.Field<int>("programme_Id") into outer
                    from o in outer.DefaultIfEmpty()
                    select new
                    {

                        title=c.Field<string>("title"),

                        credits_Id = (o==null)?-1:o.Field<int>("credits_Id")
                    };
            var qToList = q.ToList(); 
```

现在我们可以将此列表转换为数据表：

```
public static DataTable ListToDataTable<T>(List<T> list)
    {
        DataTable dtToConvert = new DataTable();
        try
        {

        foreach (PropertyInfo info in typeof(T).GetProperties())
        {
            dtToConvert.Columns.Add(new DataColumn(info.Name, info.PropertyType));
        }
        foreach (T t in list)
        {
            DataRow row = dtToConvert.NewRow();
            foreach (PropertyInfo info in typeof(T).GetProperties())
            {
                row[info.Name] = info.GetValue(t, null);
            }
            dtToConvert.Rows.Add(row);
        }

        } catch(Exception ex)
            {

            }
        return dtToConvert;
    } 
```

干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:28:08.790

它运行缓慢，因为您为源表中的每一行遍历 credits 表中的所有行。您可以使用以下 linq 查询来连接两个表。

```
(from sourceRow in sourceTable.Rows.OfType<DataRow>()
join creditRow in credits.Rows.OfType<DataRow>()
   on sourceRow.Field<int>("programme_Id") equals creditRow.Field<int>("programme_Id")
select new {sourceRow, creditRow})
   .ForEach(o => o.sourceRow["credits_id"] = o.creditRow["sourceRow"]); 
```

# javascript - 获取json数据的长度

> ID：10142342
> 
> 赞同：0
> 
> 时间：2012-04-13T14:05:26.490
> 
> 标签：javascript, json

我有这个 json 数据，我想得到这个 json 数据和 css 的长度

我的 json 数据显示在这里

```
jso({tag:"div",css:{backgroundColor:"red"},html:"abc"}) 
```

我已经在函数中传递了这个

```
 function jso(data){
    alert(data.length)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:09:33.493

您的 JSON 不是有效的 JSON 对象

```
{
  "tag": "div",
  "css": {
     "backgroundColor":"red"
  },
  "html":"abc"
} 
```

然而，正确的 JSON 对象没有长度属性，因此您需要遍历它们来计算长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:13:55.410

我知道你的意思你只需要用一个计数器变量循环你的对象

```
var x = {tag:"div",css:{backgroundColor:"red"},html:"abc"}

function objectLength(obj){

var counter = 0;

for(var i in obj)
{
counter +=1;
}
return counter
} 
```

像这样使用它

```
alert(objectLength(x)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:16:03.540

要使用 jQuery 对数据进行迭代，计算您执行了多少次迭代，请执行以下操作：

```
var data = {tag:"div",css:{backgroundColor:"red"},html:"abc"};

var count = 0;
$.each(data, function(key, value) {
    count++;
}); 
```

[请参阅此处的 jsFiddle。](http://jsfiddle.net/x9Xtn/)

要使用 JavaScript 迭代数据，仅计算您执行了多少次迭代，请执行以下操作：

```
var data = {tag:"div",css:{backgroundColor:"red"},html:"abc"};

var count = 0;
var key;
for(key in data)
{
    var value = data[key];
    count++;
} 
```

[​请参阅此处的 jsFiddle。](http://jsfiddle.net/MER2A/)

# c - OpenCV中的鼠标移动

> ID：10142346
> 
> 赞同：3
> 
> 时间：2012-04-13T14:05:29.730
> 
> 标签：c, opencv

我正在尝试使用opencv中的手指坐标移动鼠标光标。我无法将其缩放到 1366*768 的整个屏幕尺寸。我的网络摄像头分辨率是 640*480。我的鼠标指针只移动到屏幕的一半。我不知道为什么。

这是函数调用：

```
Mouse_Move(((1366*mouse_pointer.x)/640),((768*mouse_pointer.y)/480)); 
```

这是实现：

```
void Mouse_Move(DWORD dx,DWORD dy)
{

DWORD event=0;

event = MOUSEEVENTF_ABSOLUTE|MOUSEEVENTF_MOVE;

mouse_event(event, dx*65535/Get_ScreenWidth(), dy*65535/Get_ScreenHight(), 0, 0);

} 
```

这是我的代码段。mouse_pointer.x 和 mouse_pointer.y 是我食指的坐标。

# python - 为什么父进程中的 select() 使子进程中的 accept() 无法使用？

> ID：10142347
> 
> 赞同：3
> 
> 时间：2012-04-13T14:05:30.453
> 
> 标签：python, linux, sockets, process

我有一个父进程，它创建 2 个服务器套接字并调用`select()`它们以等待新连接。当连接到达时，一条消息被发送到一个子进程（`fork()`在服务器套接字创建之后用 创建，所以它们是共享的）。

在这个孩子中，调用`accept()`服务器套接字不起作用。我收到一个`EAGAIN`错误（非阻塞套接字）。`accept()`而在主进程中调用则完美无缺。

当然，我根本不调用`accept()`主进程，我只是测试一下它是否有效，它确实有效。

为什么我不能在父进程中调用`accept()`子进程？`select()`

编辑：这里的目标是创建固定数量的工作人员（比如说 8 个）来处理客户端连接，就像在 prefork 模型中一样。这些连接将是长连接，不像 HTTP。目标是负载平衡工作人员之间的连接。

为此，我使用了一个共享内存变量，其中包含一个工作人员当前连接的客户端的数量。我想“询问”客户端数量最少的工作人员来处理新连接。

这就是为什么我`select()`在父进程中执行，然后向子进程发送消息，因为我想“选择”哪个进程将处理新连接。

服务器侦听多个套接字（一个用于 ssl，一个不用于），这就是我使用`select()`而不是直接`accept()`在子进程中使用的原因，因为我不能`accept()`在我的子工作者中使用多个套接字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:27:55.550

事实上，问题并不是我最初想的那样。以下是我为在工作进程之间的连接进行一些基本负载平衡所做的工作的回顾。

*   一个主进程（父进程）创建 2 个服务器套接字，bind() 和 listen() 它们（例如有和没有 ssl）
*   我用 fork() 创建了 8 个子进程，所以它们继承了父进程的套接字
*   主进程`select()`无限循环运行
*   当它的两个套接字中的一个可用时，它会通过管道向子节点发送消息。子进程由共享内存值确定，该值包含“子进程中”的当前客户端数量。选择当前处理最少数量的客户端的进程。
*   这个子进程然后调用`accept()`服务器套接字（两者之间使用的套接字是在管道中传递的，所以子进程知道要调用哪一个`accept()`）

问题是我的父进程告诉一个孩子接受套接字并立即重新进入循环，它`select()`再次运行。但如果孩子尚未接受套接字，则`select()`再次返回，以获得相同的连接。这就是为什么我得到一个 EAGAIN 错误，实际上我调用`accept()`了两次（或更多取决于*速度*-*进程间竞争条件*）！

解决方案是等待孩子在管道上回答诸如“嘿，我接受了连接，没关系！”之类的东西，然后返回`select()`循环。

这工作得很好。好奇的人可以在这里使用 Python 中的实现：[https](https://github.com/thibautd/Kiwi) ://github.com/thibautd/Kiwi ！

# apache-flex - 根据 RFC RFC 2396 Flex 编码字符串

> ID：10142348
> 
> 赞同：0
> 
> 时间：2012-04-13T14:05:35.833
> 
> 标签：apache-flex, actionscript, flex3, encode, rfc2396

如何使用 Actionscript/Flex 3 根据 RFC 2396 对字符串进行编码？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:23:21.877

与 Javascript 类似，在 Actionscript 中，您可以使用以下顶级（或全局）函数来编码/解码 URI：

[`encodeUri()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#encodeURI%28%29) [`encodeURIComponent()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#encodeURIComponent%28%29) [`decodeURI()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#decodeURI%28%29) 和[`decodeURIComponent()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#decodeURIComponent%28%29)

也：

[`escape()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#escape%28%29) [`unescape()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#unescape%28%29)

这 6 个全局函数之间存在细微差别，请查看上面文档的链接。这是一篇[讨论](http://www.javascripter.net/faq/escape.htm)Javascript 差异的文章，但对于 Actionscript 应该是相同的。

# video - HTML5 视频、-Mediaelement.js、Video.js 或非 JavaScript 解决方案？

> ID：10142349
> 
> 赞同：3
> 
> 时间：2012-04-13T14:05:40.873
> 
> 标签：video, html5-video, mediaelement.js, video.js

对实现 html5 视频的所有选项感到困惑。支持使用基于 javascript 的解决方案（如 MediaElement 或 VideoJS）的论据是什么？

表达这个问题的另一种方式可能是，在什么情况下非 javascript html5 视频解决方案是更好的选择（就像[http://camendesign.com/code/video_for_everybody](http://camendesign.com/code/video_for_everybody)上提出的那样）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T14:00:16.060

使用基于 JS 的播放器的原因：

*   跨浏览器/平台的一致外观和感觉，包括 Flash 后备
*   能够解决设备/浏览器错误
*   可扩展性。将其他内容挂接到视频的播放/进度/状态中是很常见的。

# java - 在 Eclipse 上使用 UIMA 框架创建注释器

> ID：10142350
> 
> 赞同：2
> 
> 时间：2012-04-13T14:05:42.670
> 
> 标签：java, eclipse, uima

我正在尝试将 UIMA 框架与 Eclipse 一起使用，但未能自己完成第一个教程中的一个......

（我首先尝试用文字等做自己的注释器，然后得到完全相同的错误：未找到注释器类“*”。所以我回到教程来检查我错过了什么，但仍然会出现这种错误:/)

这是我的文件/目录结构

```
uima0
--- src
------- (default package)
---------- RoomNumber.java
---------- RoomNumber_Type.java
---------- RoomNumberAnnotator.java
--- JRE system Library [JavaSE-1.7]
--- Referenced Libraries
------ uima-core.jar
--- descriptors
------ RoomNumberAnnotator.xml
------ typeSystemDescriptor.xml
--- lib
------- uima-core.jar 
```

RoomNumber.java 和 RoomNumber_Type.java 是通过 typeSystemDescriptor.xml / Open With / Component Descriptor Editor => JCasGen 自动生成的

我认为对于 RoomNumberAnnotator.xml 和 typeSystemDescriptor.xml（见下文），我确实有它们内部需要的东西

RoomNumerAnnotator.java 是教程之一的复制粘贴（[http://uima.apache.org/d/uimaj-2.3.1/tutorials_and_users_guides.html#d4e236](http://uima.apache.org/d/uimaj-2.3.1/tutorials_and_users_guides.html#d4e236)）

我认为我已经设置了正确的环境变量 UIMA_HOME。

我将示例目录项目与包含的 DocumentAnalyzer 一起使用，以检查我自己的 RoomNumerAnnotator

我总是得到一个：

* **org.apache.uima.resource.ResourceInitializationException：未找到注释器类“RoomNumberAnnotator”。（描述符：file:/D:/eclipseWorkspace/uima0/descriptors/RoomNumberAnnotator.xml）在 org.apache.uima.analysis_engine.impl.PrimitiveAnalysisEngine_impl.initializeAnalysisComponent(PrimitiveAnalysisEngine_impl.java:207) 在 org.apache.uima.analysis_engine.impl .PrimitiveAnalysisEngine_impl.initialize(PrimitiveAnalysisEngine_impl.java:156) [...]***

**我忘记或错过了什么？**

（看起来它可能会错过我的 RoomNumberAnnotator.java 所在的位置与 uimaj-examples 提供的内置 DocumentAnalyzer 之间的一些链接？顺便说一句，我不知道如何用 Eclipse 和/或 UIMA 配置文件说/更正）

---8<--- RoomNumberAnnotator.xml:

```
 <?xml version="1.0" encoding="UTF-8"?>
    <analysisEngineDescription xmlns="http://uima.apache.org/resourceSpecifier">
      <frameworkImplementation>org.apache.uima.java</frameworkImplementation>
      <primitive>true</primitive>
      <annotatorImplementationName>RoomNumberAnnotator</annotatorImplementationName>
      <analysisEngineMetaData>
        <name>RoomNumberAnnotator</name>
        <description/>
        <version>1.0</version>
        <vendor/>
        <configurationParameters/>
        <configurationParameterSettings/>
        <typeSystemDescription>
          <imports>
            <import location="typeSystemDescriptor.xml"/> <!-- here putting full path as :  import location="file:/D:/eclipseWorkspace/uima0/descriptors/typeSystemDescriptor.xml" did not help -->
          </imports>
        </typeSystemDescription>
        <typePriorities/>
        <fsIndexCollection/>
        <capabilities>
          <capability>
            <inputs/>
            <outputs>
              <type>RoomNumber</type>
              <feature>RoomNumber:building</feature>
            </outputs>
            <languagesSupported/>
          </capability>
        </capabilities>
        <operationalProperties>
          <modifiesCas>true</modifiesCas>
          <multipleDeploymentAllowed>true</multipleDeploymentAllowed>
          <outputsNewCASes>false</outputsNewCASes>
        </operationalProperties>
      </analysisEngineMetaData>
      <resourceManagerConfiguration/>
    </analysisEngineDescription> 
```

---8<--- typeSystemDescriptor

```
<?xml version="1.0" encoding="UTF-8"?>
<typeSystemDescription xmlns="http://uima.apache.org/resourceSpecifier">
  <name>typeSystemDescriptor</name>
  <description/>
  <version>1.0</version>
  <vendor/>
  <types>
    <typeDescription>
      <name>RoomNumber</name>
      <description/>
      <supertypeName>uima.tcas.Annotation</supertypeName>
      <features>
        <featureDescription>
          <name>building</name>
          <description/>
          <rangeTypeName>uima.cas.String</rangeTypeName>
        </featureDescription>
      </features>
    </typeDescription>
  </types>
</typeSystemDescription> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T15:03:08.810

我很确定您缺少将类包含在类路径中。在 Eclipse 中尝试以下操作：

1.  选择运行配置
2.  在 Java Application 下，您将找到 Java CAS Visual Debugger（假设您遵循了整个教程并在 Eclipse 中导入了 uimaj-examples 项目）
3.  转到 Classpath -> Add Projects... 并添加您创建的示例项目
4.  运行 Java CAS Visual Debugger，选择 Run -> Load AE，在硬盘上找到你的描述符文件并加载它
5.  在文本字段中输入文本并使用 Run -> Run AE 在输入文本上运行注释

我希望能解决你的问题！

# asp.net - 复选框助手：奇数字符串到布尔转换错误

> ID：10142359
> 
> 赞同：0
> 
> 时间：2012-04-13T14:06:16.610
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, checkbox, html-helper

我有一个使用带有剃刀的 asp.net MVC 3 的网络。

在一个视图中，我对复选框助手有一个奇怪的错误。

这是剃须刀代码：

```
@Html.CheckBox("rememberPassword", Model.RememberPassword, new { tabindex = "4", style = "width:15px" }) 
```

模型中的属性（我`true`在模型构造函数中设置）：

```
public bool RememberPassword { get; set; } 
```

和记录的错误：

```
2012-04-13 01:20:33.334 [13   ] Error - Reference: 0413-012033-334 - Global site error, page: /es/login
System.InvalidOperationException: The parameter conversion from type 'System.String' to type 'System.Boolean' failed. See the inner exception for more information. ---> System.FormatException: -1' is not a valid value for Boolean. ---> System.FormatException: String was not recognized as a valid Boolean.
   at System.Boolean.Parse(String value)
   at System.ComponentModel.BooleanConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   --- End of inner exception stack trace ---
   at System.ComponentModel.BooleanConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at System.Web.Mvc.ValueProviderResult.ConvertSimpleType(CultureInfo culture, Object value, Type destinationType)
   --- End of inner exception stack trace ---
   at System.Web.Mvc.ValueProviderResult.ConvertSimpleType(CultureInfo culture, Object value, Type destinationType)
   at System.Web.Mvc.ValueProviderResult.UnwrapPossibleArrayType(CultureInfo culture, Object value, Type destinationType)
   at System.Web.Mvc.ValueProviderResult.ConvertTo(Type type, CultureInfo culture)
   at System.Web.Mvc.HtmlHelper.GetModelStateValue(String key, Type destinationType)
   at System.Web.Mvc.Html.InputExtensions.InputHelper(HtmlHelper htmlHelper, InputType inputType, ModelMetadata metadata, String name, Object value, Boolean useViewData, Boolean isChecked, Boolean setId, Boolean isExplicitValue, IDictionary`2 htmlAttributes)
   at System.Web.Mvc.Html.InputExtensions.CheckBoxHelper(HtmlHelper htmlHelper, ModelMetadata metadata, String name, Nullable`1 isChecked, IDictionary`2 htmlAttributes)
   at System.Web.Mvc.Html.InputExtensions.CheckBox(HtmlHelper htmlHelper, String name, Boolean isChecked, Object htmlAttributes)
   at ASP._Page_Views_Login_Index_cshtml.Execute() in d:\[...]\Views\Login\Index.cshtml:line 49
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.StartPage.RunPage()
   at System.Web.WebPages.StartPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
   at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

为什么会这样？

**笔记：**

它越来越奇怪。就像错误开始出现一样神奇（有一天在没有任何更新或发布的生产站点中）它并没有停止。已经三天没有错误了。但是，*我仍然想知道为什么会这样。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:31:42.500

它与创建复选框的方式无关。在一些非常奇怪的情况下（我完全忘记了），可能会在没有此参数的情况下（从其他站点）提交此表单。在这种情况下，布尔字段试图从字符串“-1”中获取。

解决此问题的一种方法（[我发现这是一种很好的做法](https://stackoverflow.com/questions/8153602/ivalidatableobject-validate-method-firing-when-dataannotations-fails)）是避免模型中的“不可为空”字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:25:18.273

试试这个

```
Html.CheckBoxFor(model => model.RememberPassword , chkHtmlAttributes) 
```

并为这些定义 chkHtmlAttributes

```
tabindex = "4", style = "width:15px" 
```

# sql - 对数据求和的 SQL 查询

> ID：10142367
> 
> 赞同：0
> 
> 时间：2012-04-13T14:06:38.263
> 
> 标签：sql, sql-server, tsql, aggregate-functions

我的表格数据如下

```
TaxTypeCode1   TaxTypeCode2  PNO   Amount 
-----------------------------------------
TX01           TX02           124     600
TX02           null           124     700 
TX03           TX04           124     200 
TX04           null           124     300
TX05           TX06           126     400 
TX06           null           127     500 
TX07           null           128     800 
```

我想编写 SQL 查询来检索数据。

条件适用 IF pno 相同且 TaxTypeCode1 包含 TaxTypeCode2 然后对 amt 求和，否则显示实际 amt

我的预期输出是

```
PNO      Amount 
---------------
 124     1300
 124      500
 126      400
 127      500
 128      800 
```

124 有 1300，因为 pno 相同并且 TaxTypeCode2 (TX02) TaxTypeCode1 (TX02) 相同然后总和

```
TX01           (TX02)           124     600
(TX02)           null           124     700 
```

126 有 400，因为 pno 不同并且 TaxTypeCode2 (TX02) TaxTypeCode1 (TX02) 相同 不要总和

```
TX05           (TX06)           (126)     400 
(TX06)           null           (127)     500 
```

谁能告诉如何编写查询来检索该数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T14:10:16.973

```
SELECT PNO,SUM(Amount)
FROM YOURTABLE
GROUP BY PNO; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T15:26:00.807

这是您的表格和数据：

```
CREATE TABLE Test
(
    TaxTypeCode1 CHAR(4),
    TaxTypeCode2 CHAR(4),
    PNO INT,
    Amount INT
)

INSERT INTO Test VALUES('TX01', 'TX02', 124, 600)
INSERT INTO Test VALUES('TX02', null, 124, 700)
INSERT INTO Test VALUES('TX03', 'TX04', 124, 200)
INSERT INTO Test VALUES('TX04', null, 124, 300)
INSERT INTO Test VALUES('TX05', 'TX06', 126, 400)
INSERT INTO Test VALUES('TX06', null, 127,500)
INSERT INTO Test VALUES('TX07', null, 128, 800) 
```

这是给你的查询：

```
SELECT PNO, SUM(Amount)
FROM Test
GROUP BY PNO, COALESCE(TaxTypeCode2, TaxTypeCode1) 
```

结果符合您的预期输出。

我发现您真正要做的是按 PNO 和第二列或第一列（如果第二列为空）聚合数据。`COALESCE(TaxTypeCode2, TaxTypeCode1)`将首先返回不为空。

您也可以使用`ISNULL(TaxTypeCode2, TaxTypeCode1)`. `COALESCE`可以有超过 2 个参数，例如`COALESCE(TaxTypeCode3, TaxTypeCode2, TaxTypeCode1)`.

看到：

```
SELECT COALESCE(TaxTypeCode2, TaxTypeCode1) as sumBy, * FROM Test 
```

# c# - 为什么我不能将一个对象（实际上是 object[]）转换为 string[]？

> ID：10142378
> 
> 赞同：8
> 
> 时间：2012-04-13T14:07:18.067
> 
> 标签：c#, arrays, object, casting

我有一个“对象”类型的字段。当我在 Visual Studio 的 Watch 窗口中检查它时，我看到了它的 Object[]，当我钻入元素时，我看到每个元素都是一个字符串。

但是，当我尝试将其转换为 String[] 时，我收到此错误：

> 无法将“MyObject”（其实际类型为“object[]”）转换为“string[]”string[]

为什么我不能做这个演员？将此对象转换为字符串数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-13T14:59:25.920

这是 C# 的一个特别令人困惑的特性。这是交易。

在整个讨论中，我们假设数组的元素类型是引用类型，而不是值类型。

C# 支持*不安全的数组协方差*。这意味着如果您有一个字符串数组，您可以将其转换为对象数组，因为字符串可以转换为对象：

```
string[] a1 = { "hello", "goodbye" };
object[] a2 = a1; // Legal 
```

如果您然后尝试从 a2 中获取一个元素，它会起作用：

```
object o3 = a2[0]; 
```

这是合法的，因为`a2[0]`is really `a1[0]`，它是一个字符串，可以转换为对象。

但是，如果您尝试*写入数组，那么您将**在运行时*收到错误消息：

```
a2[0] = new object(); 
```

这在运行时会失败，因为`a2`它*实际上*是一个字符串数组，并且您不能将非字符串放入字符串数组中。

所以 C# 已经被严重破坏了；可以编写一个编译并看起来正常但在运行时突然崩溃并出现类型异常的程序，因为您试图将一个对象放入一个实际上不是对象数组的对象数组中。

你想要的功能*比这更糟糕*，谢天谢地 C# 不支持它。您想要的功能是：

```
object[] a4 = { "Hello" };
string[] a5 = a4; 
```

那将是不安全的数组*逆变*。它像这样可怕地破裂：

```
a4[0] = new Customer(); // Perfectly legal 
string s6 = a5[0]; 
```

*现在我们只是将一个Customer*复制到一个*string*类型的变量中。

您应该避免任何类型的数组协变或逆变；正如您所发现的，数组逆变是不合法的，并且数组协方差在您的程序中制造了一些意外爆炸的定时炸弹。**使您的数组具有正确的类型。**

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-13T14:10:37.457

```
string[] newarr =  Array.ConvertAll(objects, s => (string)s); 
```

- 编辑 -

既然你说*我有一个`object`*（知道它`object[]`实际上是一个）

```
string[] newarr =  Array.ConvertAll((object[])objects, s => (string)s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:12:23.913

```
object[] original = new object[]{"1", "2"};
//some code in between here
object obj = original ;
object[] objArray = (object[])obj;
string[] newArray = new string[objArray.Length];
for(int i = 0; i < newArray; i++)
{
  newArray[i] = (string)objArray[i];
} 
```

这里的其他答案向您展示了更快/更短的转换方式。我把整件事写成这样，因为它显示了真正发生的事情和需要发生的事情。您应该在实际生产代码中使用一种更简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T04:31:39.677

面向对象编程的规则是——

“派生类始终可以类型转换为基类”并且“只有当基类推迟的当前实例实际上是派生类时，才能将基类转换为派生类”

例如（A 是基础，B 是派生的）

```
A a = new B();  // legal;
B b = (B) a ;   // legal as "a" is actually B (in first statement) 
```

非法：>

```
A a = new A();
B b = (B) a;  // not legal as "a" is A only. 
```

同样的事情也适用于 Object 和 String 类。对象是基类，字符串是派生类。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-13T14:12:16.037

您可以将*实数* `string[]`转换为`object[]`.

这是一个[数组协方差](http://msdn.microsoft.com/en-us/library/aa664572%28v=vs.71%29.aspx)

可以在链接中找到一个清晰的例子。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-13T14:12:49.980

您应该转换集合中的每个元素，而不是集合本身。

```
object[] ovalues = new object[] { "alpha", "beta" };
string[] svalues = ovalues.Cast<string>().ToArray(); 
```

# java - GWT 的类类似于 AWT Desktop？

> ID：10142379
> 
> 赞同：1
> 
> 时间：2012-04-13T14:07:22.233
> 
> 标签：java, gwt, maven, gxt

这是我需要做的一小部分：

```
if (Desktop.isDesktopSupported())
{
    final Desktop desktop = Desktop.getDesktop();
    try{
    desktop.open(new File(path));
    }
    catch (final IOException e)
    {
     MessageBox.alert("Log View", "Error finding file", null);
    }
} 
```

我需要在登录的用户默认桌面应用程序中为该文件类型打开一个文件。Maven 在构建时给我问题，说它找不到 java.io.File 和 java.awt.Desktop。

有一个两部分的问题，首先，GWT 是否具有与 java.awt.Desktop 类似的功能以及如何修复项目以便 maven 找到 io 和 awt 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:20:00.773

`JButton`为了获得与在 HTML 中调用相同的效果`Desktop`，您将提供一个链接到文件下载的 HTML 按钮，并确保它具有服务器提供的正确内容类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:43:29.443

具体到问题的 GWT 部分。

是的，你可以这样做。您可能会使用 Grid、FlexTable、HTMLTable 或仅使用 HTML 来显示事件。您可以将该小部件嵌入到面板中，并在根面板上显示该面板。

诀窍是将文件数据从服务器获取到客户端。您可以使用 GWT RPC 或某种 REST 服务器来执行此操作。如果您查看启动 GWT 应用程序时生成的默认应用程序，它将基于字符串发回字符串数据。您可以将其用作模式来降低模型对象。默认应用程序使用 GWT-RPC，并且很容易理解。

我之所以对小部件的类型含糊其辞，是因为它取决于您希望如何将这些数据呈现给您的用户。您可以使用 HTML 来渲染 HTML，但我认为您会希望使用更好的小部件来真正渲染这些数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:15:39.903

不，你不能用 GWT 做到这一点。

浏览器通常无法访问文件系统。您可以做的最好的事情是让用户安装一些插件，让您可以访问文件（需要进行权限检查）或让他们将文件上传到您的服务器（您的 Web 应用程序可以从那里下载文件以检查它）。

# visual-studio-2008 - 如何在 Visual Studio 中对按钮进行编程

> ID：10142382
> 
> 赞同：0
> 
> 时间：2012-04-13T14:07:30.780
> 
> 标签：visual-studio-2008, windows-phone-7

我需要有关 Visual Studio 手机中编程按钮的帮助。我想对其进行编程，当我按下按钮时，它会转到应用程序中的下一页（类似于子页面）。这个子页面应该作为新的 xaml 文件吗？或者如何制作这样的子页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:18:47.560

是的，创建一个新的并`Page`调用按钮事件处理程序`NavigationService.Navigate``OnClick`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:18:19.203

要创建一个新页面，请在项目的文件夹页面中单击右键，然后选择“添加新元素”，选择您的页面类型 windows phone，然后重命名，添加这个。

之后，在您的按钮（在您的第一页）中创建一个点击事件：

```
<Button Click="navigate" Content="Button" Height="72" HorizontalAlignment="Left"  Name="button1"  /> 
```

在这里，我的事件是“点击事件”，当用户点击按钮时，方法“导航”（在您的 .cs 页面中）被调用

在您的 .cs 中，添加此方法：

```
private void navigate(object sender, RoutedEventArgs e)
    {
        (Application.Current.RootVisual as PhoneApplicationFrame).Navigate(new System.Uri("/yourFolderPage/yourNextPage.xaml", System.UriKind.Relative));
    } 
```

而且，到此结束，事件被调用方法，方法调用你的下一页，结束了^^

希望我的解释对你有所帮助。

# c# - 如果用户在 TextBox 中输入的值过大，如何触发事件？

> ID：10142388
> 
> 赞同：0
> 
> 时间：2012-04-13T14:07:47.347
> 
> 标签：c#, wpf, xaml

目前我有一个绑定到`byte`属性的文本框。如果用户输入的值介于 0 和 255 之间，则应用程序将按预期运行，并执行属性的设置器。

但是，如果用户输入 256 或更大的值，则不会执行该属性的设置器。所发生的只是 TextBox 变成红色轮廓。我认为这是表明它是无效值。

不过这还不够好。我需要向用户显示一个消息框或一些注释，以通知他们这是一个无效值。我需要做什么才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:11:00.073

您需要在页面上添加一个验证摘要控件。

默认情况下这将被隐藏，但是当发生验证错误时（在这种情况下，当输入大于 255 的值时）它会出现，告诉用户出了什么问题。

WPF有[几个这样的控件可用](https://www.google.co.uk/search?q=wpf+validationsummary)，您需要评估它们并选择适合您的控件。您可能需要在数据层上设置一些属性来控制显示的确切错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:24:19.553

另一种可能性是定义文本框的 TextChanged 事件，以便在每次文本更改时执行 Int32.Parse。如果值超过 255，它会触发一个消息框。

如果您想变得刻薄，您可以将最大长度设为两个字符，并强制用户以十六进制输入数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:29:47.137

我有一篇文章涵盖了您的要求。标题可能看起来与您所要求的不匹配，但它恰好演示了您所要求的功能。

[如何在 WPF 中的 TextBox ValidationErrors 上禁用按钮](http://www.wpfsharp.com/2012/02/03/how-to-disable-a-button-on-textbox-validationerrors-in-wpf/)

这将向您展示如何不仅在 TextBox 周围使用红色，而且还向您展示如何显示消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:53:20.163

您可以将验证错误处理程序添加到控件或窗口。

在窗口构造函数中：

```
this.AddHandler(Validation.ErrorEvent, new RoutedEventHandler(OnValidationError)); 
```

处理程序：

```
 private void OnValidationError(Object sender, RoutedEventArgs e)
    {
        if (e.OriginalSource is DependencyObject)
        {
            DependencyObject instance = e.OriginalSource as DependencyObject;
            if (Validation.GetHasError(instance))
            {
                System.Collections.ObjectModel.ReadOnlyObservableCollection<ValidationError> errors = Validation.GetErrors(instance);
                // todo build message from errors and display
            }
        }
    } 
```

# search - 与其他供应商联合搜索 Endeca

> ID：10142389
> 
> 赞同：1
> 
> 时间：2012-04-13T14:07:47.440
> 
> 标签：search, solr, lucene, endeca

需要弄清楚 Endeca 是否可以支持联合搜索。请注意，此搜索不针对多个 Endeca 索引，还针对各种供应商搜索。例如 Microsoft FAST、SOLR 等。Endeca 是否支持创建插件或可以与 Endeca 外部索引相冲突并结合结果等的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:37:22.583

Endeca 不支持联合搜索（至少目前不支持）。Endeca 确实支持将大量数据加载到它的索引中，然后允许对该数据进行半实时更新。

所以基本上要执行与联合搜索相同的任务，您需要做一些事情：

1.  以预定的时间间隔（每周、每天等）将来自各种数据源的大量数据导入 Endeca Agraph。
2.  将较小的半实时数据导入 Endeca Agraph，以填充在那个小时间范围内可能发生的任何变化。这应该经常发生。（每 5 分钟、半小时等）。

通过该设置，您可以从多个系统返回信息，但在执行搜索时不会实时查询这些系统。

编辑：截至 2012 年 7 月，情况并非如此。此时 Endeca 版本的主要部分是所谓的 Endeca Assempler 或 Assembler API，它允许您定义在运行时查询并在一个请求中返回的外部系统。对于程序员来说，它是非常透明的。您向 Endeca 引擎发送一个请求，它也会返回一个包含所有联合引擎结果的对象。它可以返回各种格式的数据，Java、POJO、XML、JSON 等等。

# .net - Youtube API Upload - post 400 bad request中的错误

> ID：10142405
> 
> 赞同：1
> 
> 时间：2012-04-13T14:08:57.723
> 
> 标签：.net, api, youtube, httpwebrequest

我有一些 .net 代码会产生以下帖子（从提琴手复制的原始数据，二进制数据被截断）但是每次发送请求时我都会收到 400 错误请求

```
POST http://uploads.gdata.youtube.com/feeds/api/users/default/uploads HTTP/1.1
Authorization: OAuth ya29.AHES6ZTq4wOyYah1NRGrelvmg8icDsKwjkZuhN_IOdgDX75-
GData-Version: 2
X-GData-Key: key=..apikey...
Slug: sample.AVI
Content-Type: multipart/related; boundary="dsjdwdjd3"
Host: uploads.gdata.youtube.com
Content-Length: 1980444
Expect: 100-continue
Connection: Close

--dsjdwdjd3
Content-Type: application/atom+xml; charset=UTF-8
<?xml version="1.0" encoding="utf-8"?>
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yt="http://gdata.youtube.com/schemas/2007">
  <media:group>
    <media:title type="plain">testVideo1</media:title>
    <media:description type="plain">this is a test video1</media:description>
    <media:category scheme="http://gdata.youtube.com/schemas/2007/categories.cat">People</media:category>
    <media:keywords>test1</media:keywords>
  </media:group>
</entry>
--dsjdwdjd3
Content-Type: video/avi
Content-Transfer-Encoding: binary

RIFF�4�AVI LIST&....... truncated binary....
--dsjdwdjd3 
```

这是 POST 上的谷歌文档，但据我所知，它与[https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading](https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading)完全相同。

我背后的代码是将其作为 httpwebrequest 发送，并且据我所知。

编辑：我不认为这是身份验证或开发人员密钥问题，因为我故意输入了不正确的详细信息，并且返回 401 无效令牌或无效开发人员密钥。

编辑 2：完整的响应，从提琴手以原始格式粘贴

```
HTTP/1.1 400 Bad Request
Server: HTTP Upload Server Built on Apr 10 2012 14:42:33 (1334094153)
Content-Type: text/html; charset=UTF-8
X-GUploader-UploadID: AEnB2Up2iQ676IS9KRGmvmdbgBFGZLwLXHmnSv3cTUu-1TAHbuylsLncHOK0Q0MBSg22ZaGQ8aQ3JQps5bmAJ9xaYtYq1jNI_Q
Date: Mon, 16 Apr 2012 10:11:10 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 15
Connection: close

Invalid Request 
```

# database - 编写具有不同城市的查询唯一 ID

> ID：10142406
> 
> 赞同：-3
> 
> 时间：2012-04-13T14:09:00.233
> 
> 标签：database

在表 Cityid 和 CITYname 2 列中：

```
city id  city name
1        Bang
1        hyd
1        pune
2        hyd
2        pune
2        chennai 
```

我想要结果：

```
1 ---hyd,pune,bang(all citynames of city id)
2--- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:28:46.603

您遗漏了回答问题所需的一些关键细节：您使用的是什么语言？

如果您在 SQL Server 2005/2008 上使用 T-SQL，以下是答案：

你的桌子：

```
CREATE TABLE [dbo].[cities](
    [cityid] [int] NULL,
    [cityname] [varchar](50) NULL
) ON [PRIMARY] 
```

您的数据：

```
insert into cities(cityid,cityname)values(1,'Seattle')
insert into cities(cityid,cityname)values(1,'Portland')
insert into cities(cityid,cityname)values(2,'New York')
insert into cities(cityid,cityname)values(2,'Newark') 
```

您的查询：

```
declare @result table(
    cityid int,
    cityname varchar(max)
)

declare @queue table(
    cityid int,
    cityname varchar(50)
)

declare @cityid int
declare @cityname varchar(50)

insert into @queue select * from cities

while(exists(select top 1 cityid from @queue)) begin
    select top 1 @cityid = cityid, @cityname = cityname from @queue
    if(exists(select cityid from @result where cityid = @cityid)) begin
        update @result
        set cityname = cityname + ', ' + @cityname
        where cityid = @cityid
    end else begin
        insert into @result(cityid,cityname) values(@cityid,@cityname)
    end
    delete from @queue where cityid = @cityid and cityname = @cityname
end

select * from @result 
```

你的结果：

```
 cityid    cityname
1   1         Seattle, Portland
2   2         New York, Newark 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:12:28.437

查找 GROUP_CONCAT

或用户定义的聚合函数

# javascript - 这是有效身份证件吗？

> ID：10142407
> 
> 赞同：0
> 
> 时间：2012-04-13T14:09:00.670
> 
> 标签：javascript, html, spiceworks

我有这段代码，我想知道如何设置 id 值`<h4>`并知道 id 是否有效。

```
 container.insert({ bottom: '<h4 style="margin:8px 0px 4px 0px; padding-left:0px ; select id=comment_'+ l +'">' + l + '</h4>' }); 
```

我需要这个，所以我可以`<h4>`根据组合框的值隐藏/显示它。

或者有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:23:59.190

您在 H4 上的属性似乎格式错误，解释了为什么您无法通过 id 选择器导航到 h4

```
<h4 style="margin:8px 0px 4px 0px; padding-left:0px ; select id=comment_'+ l +'"> 
```

应该

```
<h4 style="margin:8px 0px 4px 0px; padding-left:0px;" id="comment_'+ l +'"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:11:07.020

您可以为您喜欢的任何元素赋予 id 属性，甚至是 script/link/head 和其他标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:15:00.933

您可以将 ID 添加到您喜欢的任何元素。至于它的有效性：

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

# java - 将 InputStream 写入 HttpServletResponse

> ID：10142409
> 
> 赞同：24
> 
> 时间：2012-04-13T14:09:12.590
> 
> 标签：java, jakarta-ee, servlets, inputstream, outputstream

我有一个要写入 HttpServletResponse 的 InputStream。有这种方法，由于使用了 byte[]，耗时太长

```
InputStream is = getInputStream();
int contentLength = getContentLength();

byte[] data = new byte[contentLength];
is.read(data);

//response here is the HttpServletResponse object
response.setContentLength(contentLength);
response.write(data); 
```

我想知道在速度和效率方面什么可能是最好的方法。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-13T14:21:58.510

只需在块中写入，而不是先将其完全复制到 Java 的内存中。下面的基本示例将其写入 10KB 的块中。这样，您最终得到的内存使用量只有 10KB，而不是完整的内容长度。此外，最终用户将更快地开始获取部分内容。

```
response.setContentLength(getContentLength());
byte[] buffer = new byte[10240];

try (
    InputStream input = getInputStream();
    OutputStream output = response.getOutputStream();
) {
    for (int length = 0; (length = input.read(buffer)) > 0;) {
        output.write(buffer, 0, length);
    }
} 
```

* * *

就性能而言，你可以使用 NIO[`Channels`](http://docs.oracle.com/javase/8/docs/api/java/nio/channels/Channels.html)和直接分配的[`ByteBuffer`](http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html). 在一些自定义实用程序类中创建以下实用程序/帮助方法，例如`Utils`：

```
public static long stream(InputStream input, OutputStream output) throws IOException {
    try (
        ReadableByteChannel inputChannel = Channels.newChannel(input);
        WritableByteChannel outputChannel = Channels.newChannel(output);
    ) {
        ByteBuffer buffer = ByteBuffer.allocateDirect(10240);
        long size = 0;

        while (inputChannel.read(buffer) != -1) {
            buffer.flip();
            size += outputChannel.write(buffer);
            buffer.clear();
        }

        return size;
    }
} 
```

然后您使用如下：

```
response.setContentLength(getContentLength());
Utils.stream(getInputStream(), response.getOutputStream()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:18:40.930

```
BufferedInputStream in = null;
BufferedOutputStream out = null;
OutputStream os;
os = new BufferedOutputStream(response.getOutputStream());
in = new BufferedInputStream(new FileInputStream(file));
out = new BufferedOutputStream(os);
byte[] buffer = new byte[1024 * 8];
int j = -1;
while ((j = in.read(buffer)) != -1) {
    out.write(buffer, 0, j);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:20:46.403

我认为这非常接近最佳方式，但我建议进行以下更改。使用固定大小的缓冲区（比如 20K），然后在循环中进行读/写。

对于循环做类似的事情

```
byte[] buffer=new byte[20*1024];
outputStream=response.getOutputStream();
while(true) {
  int readSize=is.read(buffer);
  if(readSize==-1)
    break;
  outputStream.write(buffer,0,readSize);
} 
```

ps：你的程序不会总是按原样工作，因为 read 并不总是填满你给它的整个数组。

# class - 如何创建咖啡脚本单例子类

> ID：10142413
> 
> 赞同：6
> 
> 时间：2012-04-13T14:09:31.137
> 
> 标签：class, node.js, singleton, coffeescript, extend

我创建了一个要扩展的单例类。它（一半）的工作原理是它只创建类的单个实例，但添加到子类的属性是未定义的。这是原始单例：

```
class Singleton
   _instance = undefined
   @getInstance: ->
      if _instance is undefined
         console.log 'no instance exists, so create one'
         _instance = new _Singleton()
      else
         console.log 'an instance already exists.'

class _Singleton
   constructor: ->
      console.log 'new singelton'

module.exports = Singleton 
```

这是子类：

```
Singleton = require('./singleton')

class Stinky extends Singleton
      constructor: ->
         var1 : 'var1'

module.exports = Stinky 
```

现在，如果我在我的节点应用程序中使用以下内容：

```
Stinky = require './stinky'
thing1 = Stinky.getInstance()
thing2 = Stinky.getInstance()
console.log "Thing var1: #{thing1.var1}" 
```

getInstance() 方法的行为符合预期，但 var1 未定义。如果我在非单身课程上做同样的事情，他们工作得很好。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T18:06:09.520

我把你的代码删减了一点。以下是剩下的 2 个类：

```
class Singleton
  @_instance: null
  @getInstance: ->
    @_instance or= new @( arguments... )

class Stinky extends Singleton
  constructor: ( @num ) ->

thing1 = Stinky.getInstance( 1 )
thing2 = Stinky.getInstance( 2 )

console.log( thing1.num, thing2.num ) 
```

我做了以下更改：

*   合并单例和_单例
*   将 _instance 更改为 @_instance 以便将其附加到 Singleton 而不是其原型
*   在 getInstance 中添加了参数 splat（以防需要参数）
*   将 getInstance() 指向扩展对象而不是 Singleton

在这个例子中，我使用了 2 个不同的数字来确保第二个构造函数永远不会被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:55:35.983

我看到您如何使用该`_Singleton`课程来尝试模拟私人课程，但不幸的是我认为您不能在这种情况下使用它。

这是一些有效的代码：

```
class Singleton
   _instance = undefined

   constructor: ->
      console.log 'new singleton'

   @getInstance: ->
      if _instance is undefined
         console.log 'no instance exists, so create one'
         _instance = new @()
      else
         console.log 'an instance already exists.'
      _instance

class Stinky extends Singleton
      constructor: ->
         console.log 'Stinky constructor'
         @var1 = 'var1'

thing1 = Stinky.getInstance()
thing2 = Stinky.getInstance()

console.log "Thing var1: #{thing1.var1}"​​​​​​​​​​​​​​​​​​, thing1, thing2​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我删除了 Node.js (require) 代码，但添加它应该很简单。主要区别在于我的代码正在创建的实例是`@`or的实例`this`。这样做将确保首先调用您的构造函数，然后继续父链。您的代码明确地创建了一个实例，`_Singleton`因此您的`Stinky`构造函数永远不会被调用。您最终会注意到的另一个小问题是您的`getInstance`方法实际上并未返回`_instance`.

我希望这有帮助，

桑德罗

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T08:10:45.443

我不确定目标是什么，但是您可以通过制作`Singleton`真正的单例（普通对象）来获得相同的结果：

```
Singleton =
    doNothing: ->
        # ...
    doMoreNothing: ->
        # ...

class Stinky
    constructor: ->
        @var1: 'var1'
    getInstance: ->
        return Singleton 
```

`Singleton`拥有一个返回自身的方法没有多大意义。

# c++ - boost::python: 编译失败，因为复制构造函数是私有的

> ID：10142417
> 
> 赞同：17
> 
> 时间：2012-04-13T14:09:42.307
> 
> 标签：c++, python

我使用 boost::python 来包装一个 C++ 类。此类不允许复制构造函数，但 python 模块总是想创建一个。

C++ 类看起来像这样（简化）

```
class Foo {
  public:
    Foo(const char *name); // constructor

  private:
    ByteArray m_bytearray;
}; 
```

ByteArray 类继承自 boost::noncopyable，因此 Foo 没有复制构造函数。

这是 Python 模块存根：

```
BOOST_PYTHON_MODULE(Foo)
{   
  class_<Foo>("Foo", init<const char *>())
  ;
} 
```

在编译 boost::python 模块时，我收到错误，因为 ByteArray 继承自 boost::noncopyable，所以无法创建 Foo 的复制构造函数。

如何在我的 python 模块中禁用复制构造函数？

谢谢克里斯托夫

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-16T09:58:26.677

我找到了。我必须指定 boost::noncopyable:

```
BOOST_PYTHON_MODULE(Foo)
{   
  class_<Foo, boost::noncopyable>("Foo", init<const char *>())
  ;
} 
```

# r - 将序列对齐打印到文件

> ID：10142419
> 
> 赞同：2
> 
> 时间：2012-04-13T14:09:46.657
> 
> 标签：r, alignment, sequence, bioconductor, sequence-alignment

我使用 Bioconductor 中的 Biostrings 包中的 pairwiseAlignment 进行简单的成对 DNA 序列比对：

```
library('Biostrings')
seq1 = 'ATGCTA'
seq2 = 'ATGTA'
pairwiseAlignment(pattern = seq1, subject = seq2) 
```

输出如下所示：

```
Global PairwiseAlignedFixedSubject (1 of 1)
pattern: [1] ATGCTA 
subject: [1] ATG-TA 
score: -4.091219 
```

对于非常长的序列，输出被截断，只显示一行：

```
Global PairwiseAlignedFixedSubject (1 of 1)
pattern: [1] AT-------------------------------------------------...----------------TGTCTTCCAKATCTGGCGCGCCTGGGTTGATATC 
subject: [1] ATTGGCGGCCGCGCCACCATGCCAGAGCCAGCGAAGTCTGCTCCCGCCCCG...GAAGGCTGTATGCTGTTGTCTTCAAGATCTGGTACCGCTGGGTTGATATC 
score: -29418.8 
```

如何将完整对齐输出到文本文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:46:37.787

这是生物导体邮件列表讨论的链接。到目前为止，还没有简单的方法来打印对齐格式，但也许值得实施。

[https://stat.ethz.ch/pipermail/bioconductor/2012-April/044904.html](https://stat.ethz.ch/pipermail/bioconductor/2012-April/044904.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T11:18:51.920

我认为 package 中的 R 函数`printPairwiseAlignment()`旨在`Biostrings`按照我想象的您正在寻找的方式执行此操作。

# html - 添加元素后无法刷新多个列表视图

> ID：10142423
> 
> 赞同：0
> 
> 时间：2012-04-13T14:10:13.727
> 
> 标签：html, ajax, listview, jquery-mobile, append

我正在使用**jQuery Mobile**从存储在数据库中的信息中填充一系列列表视图，每个列表视图以父子关系填充以下列表视图（例如：第一个列表视图允许您选择动物，您选择狗，下一个列表视图中填充了谱系等）。

现在我的代码正确地填充了列表视图，我遇到的问题是，如果我返回父列表视图并做出不同的选择，子列表视图不会刷新，我们最终会得到一堆附加信息。我到处都读过很多书，但我似乎无法为我的代码找到合适的实现。

```
<ul data-role="listview" data-filter="false" data-inset="true" data-theme="a" data-divider-theme="a">
    <li>
        <label for="pet" class="select">Pet</label>
        <select id="pet" data-mini="true" onchange="fill_list('pedigree', this);">
            <option value=""></option>
        </select>
    </li>
    <li>
        <label for="pedigree" class="select">Pedigree</label>
        <select id="pedigree" data-mini="true" onchange="fill_list('pet_name', this);">
            <option value=""></option>
        </select>
    </li>
    <li>
        <label for="pet_name" class="select">Pet Name</label>
        <select id="pet_name" data-mini="true">
            <option value=""></option>
        </select>
    </li>
</ul>

function fill_list(next_list, this_list){
    var pet_url = server_root_url + 'controler/pet/find_pet.php';
    var value = this_list.options[this_list.selectedIndex].value;

    var params = {
        control: next_list,
        value: value
    };

    $.ajax({
    type: "POST",
    url: pet_url,
    async:false,
    data: params,
        success: function(json){
            do_fill_list(json, next_list);
        }
    });            
}            

function do_fill_list(json, next_list){
    var x = "#" + next_list;
    var option = $(x);

/*------------------------------------------------------------------------------
EDIT:
    Below is the solution I found for this issue. 
    Basically we capture the current list with the switch, empty it,
    append it with a blank line, then let the rest of the code populate the list.
-------------------------------------------------------------------------------*/
   switch(next_list){
        case "pet":
            options.html("").append("<option />");
            break;

        case "pedigree":
            options.html("").append("<option />");
            break;

        case "pet_name":
            options.html("").append("<option />");
            break;

    }
//-------------------------------------END EDIT------------------------------------
    $.each(json.control, 
        function(i,control){
            switch(next_list){
                case "pet":
                    option.append($("<option />").val(control.pet).text(control.pet));
                    break;
                case "pedigree":
                    option.append($("<option />").val(control.pedigree).text(control.pedigree));
                    break;
                case "pet_name":
                    options.append($("<option />").val(control.pet_name).text(control.pet_name));
                    break;               
            }
        }
    );
} 
```

请注意，我调用了一个 PHP 函数来处理数据的后端获取，但如果您需要对其进行测试，您可以对这些数据进行硬编码。另外，我在最后一个 JS 函数中有一个注释行，我已经阅读了很多内容：刷新方法，应该实现它来解决我的问题。我已经尝试了无数种方法来做到这一点，显然还不够。

* * *

编辑：我添加了一个解决此问题的 switch 语句，它位于“do fill list”JS 方法中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:20:19.680

**编辑**

抱歉我发现太晚了它是移动的..

尝试`$(next_list).selectmenu('refresh', true);`

:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:13:54.990

下面的代码是我的问题的解决方案（完整代码和编辑代码见上文。基本上需要做的就是捕获选定的列表视图，清空它并附加一个空选项。为什么是一个空选项？因为否则你会单击列表视图，您将无法选择第一个选项；如果您想更改它，您可能无法选择它。

将此代码插入 do_fill_list 方法中，就在 var option = $(x); 之间 和 $.each(json.control (...) 函数：

```
switch(next_list){
    case "pet":
        options.html("").append("<option />");
        break;

    case "pedigree":
        options.html("").append("<option />");
        break;

    case "pet_name":
        options.html("").append("<option />");
        break;

} 
```

可以增强此代码以在更改父选择时清除子选择。我还在研究这个功能，如果有人需要，你可以要求它，我相信我会尽快完成。

# ruby - 允许人们将文件上传到同一个保管箱文件夹 Ruby

> ID：10142425
> 
> 赞同：1
> 
> 时间：2012-04-13T14:10:23.727
> 
> 标签：ruby, dropbox, dropbox-api

我对此很陌生，对不起，如果这是一个幼稚的问题。我已经完成了 Dropbox API 的 ruby​​ 教程。仍然对我应该从哪里开始感到困惑。

我的情况：

我正在经营一家复印店。通常我的客户要么带上他们的 U 盘，要么上传到 gmail，然后在我的商店下载，或者上传到保管箱，然后打印他们的文档/pdfs/fotos。

有一天，一位客户问我是否知道保管箱。我说是的，我知道。而且他问我能不能和他共享一个文件夹，然后他可以把他的文件放在家里的文件夹里，然后来我的店，打开打印，好样的！！

但是......其他客户也想使用这项服务，他们不希望他们的文件暴露给其他人（可能是私人照片、秘密商业计划、重要信件......等）。另一个问题是我想让那些没有 Dropbox 的人也可以将文件上传到我的 Dropbox 文件夹，他们可以来打印。

为什么使用 dropbox 是因为它在 18G 之前是免费的。而当客户来打印时，我可以删除文件，所以 2-10G 足以缓冲 1-3 天。

我在想的是实现一个允许人们上传文档/PDF/照片并将这些文件保存到我的保管箱文件夹的网站。

*   对于拥有 Dropbox 帐户的人，他们的 Dropbox 文件夹中会有一个名为`copyshop`的文件夹，他们会像往常一样放置文件。而且我会有一个文件夹`App/copyshop/`，每个人将文件放在他们的`copyshop`文件夹中都会作为我文件夹下的子文件夹出现在我的保管箱中`App/copyshop`，例如`App/copyshop/Tom`，`App/copyshop/Mary`...等。

*   对于非 Dropbox 用户，他们可以利用上传到我的网站，然后将其保存到我的 Dropbox 文件夹。

Dropbox API 可以做到这一点吗？来自官方声明：

> API 提供了安全地从 Dropbox 读取和写入的方法，因此您的用户可以将他们所有的重要文件带到您的应用程序中。他们所做的任何更改都将保存回他们的所有计算机、平板电脑和手机。

看起来不是推荐的方法。

谢谢！每一个回复都很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:34:29.830

如果您创建一个网站来上传文件，则不需要保管箱，只需让它们上传到商店中可用的地图即可。

为了确保保管箱的安全性需要做很多工作，我想客户不希望他们的文件暴露给其他人，只适合普通客户，对于偶尔的客户，我能想到的最好方法是让他们公开链接一个保管箱文件并将其发送给您。

保管箱的另一个缺点是共享文件的大小会同时添加到共享者和共享者中，因此您可能会遇到限制问题。您还可以制作一个脚本来监视公共保管箱文件夹，并在到达时立即将文件移动到其他人无法访问的安全位置。

我想FTP会更好管理，你可以给大客户自己的地图和密码，偶尔的用户只写，不要看别人上传的安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:25:27.633

# [投递员的回答](http://forums.dropbox.com/topic.php?id=58320#post-422199)，

是的，这是可能的。有很多方法可以做到这一点，你选择的方法取决于你，所以我只谈几个。

1.  即使不使用 API，您也可以让您的客户启用并使用此功能向您发送指向其 Dropbox 中任何文件或文件夹的只读链接： [https](https://www.dropbox.com/help/167) ://www.dropbox.com/help/167 这不是完全是一个共享文件夹，但听起来应该足够了。

2.  您可以使用 API 构建一个基本上可以完成 1 的应用程序，但可以帮助他们。本质上，您会让他们授权您的应用程序，然后让他们选择一个文件或文件夹，您可以在其上调用 /files (GET)（或 /shares，如果出于任何原因更方便）来下载或共享文件。

希望这可以帮助！
格雷格

# javascript - 无论证书有效性如何，我的 node.js https 客户端始终有效

> ID：10142431
> 
> 赞同：6
> 
> 时间：2012-04-13T14:10:43.973
> 
> 标签：javascript, node.js, https, httpclient

这个测试程序连接到一个 https 服务器并获取一些内容。我已经在浏览器和 curl 中检查了我的服务器，并且证书工作正常。如果我运行 curl 从服务器获取数据，它会正确地抱怨证书未知，除非我使用 --cacert 传递它或使用 -k 关闭安全性。

所以我遇到的问题是，虽然我认为我的客户应该进行证书身份验证并且我告诉它公共证书在哪里，但它总是有效。如果我删除 ca: 选项，因此它不知道来自服务器的证书是什么，那么它会静默工作。我想捕捉身份验证错误，但我似乎做不到。

```
var https = require('https');
var fs = require('fs');

function main() {

      var data = '';

      var get = https.get({
        path: '/',
        host: 'localhost',
        port: 8000,
        agent: false,
        ca: [ fs.readFileSync('https_simple/cacert.pem') ]

      }, function(x) {

        x.setEncoding('utf8');
        x.on('data', function(c) {data += c});
        x.on('error', function(e) {
          throw e;
        });
        x.on('end', function() {
          console.log('Hai!. Here is the response:');
          console.log(data);
        });

      });

      get.on('error', function(e) {throw e});

      get.end();

    }

main(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T03:55:18.273

为了完成这项工作，我需要升级到 v0.7.8（尽管任何 v0.7 都应该没问题），其中 rejectUnauthorized 功能已添加到 https.get

需要这种选项组合：

```
agent: false, // or you can supply your own agent, but if you don't you must set to false
rejectUnauthorized: true, 
ca: [ fs.readFileSync('https_simple/cacert.pem') ] 
```

现在，如果身份验证失败，您将收到一个“错误”事件，并且请求将不会继续。

有关制作自己的代理的详细信息，请参阅 https.request[文档](http://nodejs.org/docs/v0.7.8/api/https.html#https_https_request_options_callback)

在此更改中提交了错误修复：[https ://github.com/joyent/node/commit/f8c335d0](https://github.com/joyent/node/commit/f8c335d0)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T21:59:58.590

根据 的[文档](http://nodejs.org/api/https.html#https_https_request_options_callback)，两者`https.request`的选项和是来自 的选项。模块功能选项的文档说明：`ca``https.get``https.request`[`tls.connect`](http://nodejs.org/api/tls.html#tls_tls_connect_port_host_options_secureconnectlistener)`tls.connect`

> `ca`：受信任证书的字符串或缓冲区数组。如果省略，将使用几个众所周知的“根”CA，例如 VeriSign。这些用于授权连接。

深入研究 node.js 源代码，可以在此处找到使用的根证书：[https ://github.com/joyent/node/blob/master/src/node_root_certs.h](https://github.com/joyent/node/blob/master/src/node_root_certs.h)

所以简而言之，如果没有提供作为模块选项`https.get`的授权证书`tls`，无论如何都会尝试使用根证书列表来验证连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T05:14:17.290

我在 npm 中使用[请求](https://github.com/mikeal/request)模块执行此操作。它是这样的：

```
var cacert = ... // in npm, this is a config setting
var request = require("request")
request.get({ url: "https://...",
              ca: cacert,
              strictSSL: true })
  .on("response", function (resp) { ... })
  .on("error", function (er) { ... }) 
```

如果 ssl 无效，将引发错误事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T05:38:08.817

在 V 0.6.15 中，您需要[明确检查](http://nodejs.org/api/tls.html#tls_class_tls_cleartextstream)证书验证是通过还是失败。

```
if (x.connection.authorized === false) {    
   console.log('SSL Authentication failed');
} else if (x.connection.authorized === true) {    
   console.log('SSL Authentication succeeded');
} 
```

# xpages - 如何从 XPages 中的分类视图打开文档？

> ID：10142432
> 
> 赞同：1
> 
> 时间：2012-04-13T14:10:53.773
> 
> 标签：xpages

从分类视图打开文档有技巧吗？我在 Xpage 中有几个分类视图。在每个视图的自定义控件中，我`Show values in this column as links`检查了分类列之后的第一列，但它似乎不起作用。当我查看页面时，列值未显示为链接。

乔丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:29:36.510

您是否在视图属性上设置了“在运行时，使用：打开所选文档：”字段？

# ajax - DB-Toolkit Plugin - 在保存时重定向到 wp-admin/admin-ajax.php 并且只返回一个 0

> ID：10142441
> 
> 赞同：0
> 
> 时间：2012-04-13T14:11:34.447
> 
> 标签：ajax, wordpress

所以我获得了一个使用 DB-Toolkit 制作网站部分的项目，但该部分有一段时间没有更新（就像添加了新内容一样）但最近我去向它添加新内容，当我在 DB-Toolkit 的模态窗口上单击保存它只是将我重定向到 admin-ajax.php 并且只返回 0。我在 admin-ajax.php 中查看了一个 die('0') 并且其中有很多.

我以前从未使用过这个插件，因为它现在破坏了生产站点，我需要尽快修复它，但经过一天的自行尝试后，我无处可去..

任何想法/帮助表示赞赏。

我使用的 wordpress 版本是 3.2.1，db-toolkit 插件的版本是 0.2.6.9（我知道这是旧的，但是当我更新它时变得更糟，应用程序和接口丢失并且失败了从 db-toolkit 导入我的备份。所以在我解决这个问题之前我不想更新）

根据 db 记录，该站点大约在 3 周前工作（最后插入的记录到 db-toolkit 正在使用的表中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:24:29.537

另一个插件删除了管理员和前端的 dt_start 操作，一旦我在前端禁用它，一切都很好。

# asp.net - 从 Jquery Ajax 调用控制器时打开一个新的视图窗口

> ID：10142442
> 
> 赞同：0
> 
> 时间：2012-04-13T14:11:34.820
> 
> 标签：asp.net, asp.net-mvc-2, jquery

我正在使用 ASP.Net MVC2。当从 Jquery Ajax post call 调用控制器时，我试图打开一个新的视图窗口。这是我的代码..在 ascx 页面中..

```
$('#DeleteButton').click(function () {

            var isLineChecked = $(':checkbox:checked', '#providerSearchResultsTable').length;

            if (isLineChecked == 0) {
                alert("Please select at least one row ");
                return false;
            }

            else {

                var params = {
                    Id: gaiSelected.join(',')

                };

                alert(params);
                $.ajax({

                    type: "Post",
                    url: "SelectProviderAndContact",
                    data: params,
                    success: function (html) {
                        **//$('#SelectProviderAndContact').html(html);**
    }
                });

            }
 }); 
```

这是我的控制器动作方法

```
[SessionFilter]
        public ActionResult SelectProviderAndContact(string Id)
        {
            try
            {
                List<ProviderBaseInfo> providerList = null;
                string[] internalProviderIDs = Id.Split(",".ToCharArray());
                //string[] billingProviderNames = billingProvider.Split(",".ToCharArray());

                IStateBag stateBag = _commonModel.GetStateBag();
                //stateBag.SetValue("InternalProviderId", Id);
                List<Guid> internalProviderIds = new List<Guid>();
                foreach (var a in internalProviderIDs)
                {
                    internalProviderIds.Add(new Guid(a));
                }

                List<Contacts> providerContactList = _providerModel.GetProviderContactlist(internalProviderIds);

                if (providerContactList.Count <= 0)
                {
                     //IStateBag stateBag = GetStateBag();
                    List<ProviderBaseInfo> providers = (List<ProviderBaseInfo>)stateBag.GetValue(ProviderListCache);

                if (providers == null)
                {
                    providerList = _providerModel.GetProviderCompleteList(null, null, null, null, Id).ToList();

                }
                else
                {
                    providerList = providers.Where(x => internalProviderIds.Contains(x.InternalProviderId)).ToList();
                }

                providerContactList = _providerModel.GetContactlistbyInsertingProviders(providerList);
                }

                ViewData["ProviderNotFound"] = false;

               // ViewData["ProviderName"] = new SelectList(billingProvider.Select(x => new { value = x, text = x }), "value", "text");
                var Provider = new[] { 
                new { ProviderId = "A", Providername = "A" }
                //new DataContracts.RegionKeyValues { RegionId = "B", RegionValue = "B" }, 
                //new DataContracts.RegionKeyValues { RegionId = "D", RegionValue = "D" } 
            };
                ViewData["ProviderName"] = new SelectList(Provider, "ProviderId", "Providername");

                **return View("SelectProviderAndContact",providerContactList);**

            }
            catch (FaultException<MedicareFault> ex)
            {
                if (ex.Code.Name == typeof(ArgumentException).Name)
                {
                    ViewData["ProviderNotFound"] = true;
                    ViewData["Error"] = ex.Reason;
                    return View((object)null);
                }
                else
                {
                    ViewData["Error"] = Errors.Common.UnknownError;
                    return View((object)null);
                }
            }
            catch
            {
                ViewData["Error"] = Errors.Common.UnknownError;
                return View((object)null);
            }
        } 
```

我已经`SelectProviderAndContact.aspx`在视图中创建了。

请任何人帮助我`SelectProviderAndContact.aspx` 从ajax post call打开另一个窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:14:04.407

您的 jquery 将不得不完成几乎所有打开窗口的工作。使用`window.open()`您的 javascript 中的方法，您可以使您的控制器发回一个特定的参数，使其打开一个带有特定 URL（即`TheSmallPopupPageThatViewsResults.aspx?resultId=12345`或其他东西）的新窗口。

您的控制器将决定是否告诉视图打开新窗口，然后视图将在被告知时打开它。

对于您的特定实现，您可能必须创建一个模型或将结果存储在数据库中的东西，以便控制器可以保存结果，然后用于弹出页面的操作和视图可以访问该结果。另一种方法是让调用弹出页面的参数确定在页面上查看的内容。这将消除对另一个模型的需要，但是如果您有大量数据，您的网址可能会变得非常长，而且我相信这些网址的长度通常是有限制的。

我建议使用 JSON 或 XML 将数据返回到 javascript，以便您可以根据需要扩展返回的对象。我过去所做的方式是制作几个 XML 标记，如`<alert>`, `<refresh>`, `<redirect>`,`<somePageSpecificAction>`等，我使用 jquery 解析这些标记`$(theEnclosingTag).each( function () { //...parse here })`。

我主要使用MVC3，所以我不知道MVC2是否支持它，但是将ActionResult更改为JsonResult作为返回类型并使用`return this.Json(new { put = "data here" });`你的return语句使得使用json变得非常容易。

此外，使用不同的操作方法来处理 ajax 请求可能是有益的。然后，您将有一个显示页面的操作，另一个处理来自该页面的 ajax 请求的操作（可以用 [HttpPost] 或其他东西装饰），以及弹出页面视图的另一种方法。这也将使您的代码更简短且更易于阅读。当您尝试查找特定错误的位置时，拥有较长的控制器方法可能会在以后变得非常混乱。

编辑：一个具体的例子：假设MVC3（因为这是我使用的......我认为你可以找到其他方法......你可以使用xml序列化程序并只输出xml）你有你的页面（行动＃1 ) 显示所有按钮和东西（这是你的 javascript 包含 $("#DeleteButton") 的地方，等等）。您的 javascript 使用一些返回类型为 JsonResult 的参数对另一个操作（SelectContactAJAX 或其他操作...这是操作 #2）进行 AJAX 调用。您的 javascript 从特定于 ajax 的操作中获取响应，并且响应告诉它“打开一个带有 URL /SelectContactForm?choiceId=12345 的窗口”（或其他内容）。choiceId 是一个参考，将在后台用于 SelectContactForm 操作（另一个单独的操作...操作 #3）以了解要显示的内容。

至于获取用户在新窗口中输入的内容并让原始页面做出反应的反馈，javascript 中有多种方法可以监听窗口关闭等，但我从来没有在我的一个应用程序中使用过它这有点超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:31:45.140

使用彩盒 jquery 插件

[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

在 .aspx 页面中编写代码以调用 .ascx 页面

```
 parent.$.fn.colorbox({ href: '/IGTR/SaveIGTRPreference/' + id + '?t=' + Math.random(), height: "400", width: "800", overlayClose: false, escKey: false
        }); 
```

这里 SaveIGTRPreference 是 .ascx 页面

# android - flash文件不显示在屏幕上？

> ID：10142445
> 
> 赞同：2
> 
> 时间：2012-04-13T14:11:36.797
> 
> 标签：android, flash

我正在使用 webview 控件在我的应用程序中显示 flash .swf 文件。当我运行显示整个白色屏幕的应用程序屏幕时。

这是我的代码，

```
 public class flash extends Activity {
/** Called when the activity is first created. */
@Override   
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);   
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    setContentView(R.layout.main);

    String url ="file:///android_asset/beautiful.swf";
    WebView webview = (WebView) findViewById(R.id.flash_webview);

    webview.getSettings().setPluginsEnabled(true);  
    webview.getSettings().setAllowFileAccess(true);      
    webview.loadUrl(url);     

}      
} 
```

并且 xml 文件包含 webview 控件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
  <WebView 
android:id="@+id/flash_webview"
 android:layout_width="fill_parent"
android:layout_height="fill_parent"/>

</RelativeLayout> 
```

我还在清单文件中添加了 Android:hardwareAccelerated:"true"。

我仍然卡在白屏上。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:24:25.403

您是否尝试过将**.swf**文件嵌入**html**文件并加载此 html ？

# xcode - 在 xcode 4.3 中为 QT 使用私有框架

> ID：10142446
> 
> 赞同：1
> 
> 时间：2012-04-13T14:11:40.293
> 
> 标签：xcode, macos, qt, shared-libraries

Mac QT 安装程序将其共享库放在`/Library/Frameworks/QtXXX.Framework`.
我正在使用 qmake 生成的 xcode 项目构建 QT 应用程序。我想将这些框架作为私有框架字添加到我的应用程序包中，以便于部署。

我已经尝试了各种选择来做到这一点，但我似乎无法让它发挥作用。我做了什么 -

*   [按照此处](https://stackoverflow.com/questions/1621451/bundle-framework-with-application-in-xcode)所述更改`/Library/Frameworks/`使用中的 Qt 框架文件`install_name_tool`
*   将这些框架包手动复制到应用程序包内
*   重新编译包。

当我更改原始框架的名称以使其看起来不存在时，应用程序崩溃并说它找不到所需的框架。我究竟做错了什么？

在 OSX 10.7.3 上使用 xcode 4.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:31:44.667

在 Mac 上部署 Qt 应用程序的一些选项：

*   Qt 带有[macdeployqt](http://qt-project.org/doc/qt-4.8/deployment-mac.html#macdeploy)工具，用于将 Qt 与构建的应用程序包捆绑在一起。该工具虽然有点有限，但可能会或可能不会做你想做的事。
*   [CMake](http://www.cmake.org/)附带[DeployQt4](https://github.com/Kitware/CMake/blob/master/Modules/DeployQt4.cmake)，它也可以仅用于部署，以防人们也不想使用 cmake 进行构建。
*   如您的链接中所述，可以使用 install_name_tool 编写自己的脚本。如果它不起作用，请使用 otool -L 检查是否替换了可执行文件和捆绑库中的所有绝对路径。您还必须修复捆绑库的路径！（递归，可以这么说）。

最新发布的 cmake 版本 (2.8.7) 不能正确支持 XCode 4.3：从 Xcode 4.3 开始，以前安装到`/Developer`的文件现在位于`/Applications/Xcode.app/Contents/Developer`. cmake 仍然希望它们在`/Developer`. 这在 cmake master 中已修复，但尚未发布。一种解决方法是创建一个符号链接：

```
ln -s /Applications/Xcode.app/Contents/Developer /Developer 
```

# excel - Excel (2007) VBA - .Formula 中带引号

> ID：10142448
> 
> 赞同：17
> 
> 时间：2012-04-13T14:11:43.557
> 
> 标签：excel, excel-2007, vba

我昨天尝试将以下代码放入程序中。VBA 调用错误。我认为这是因为公式中的双引号。我用谷歌搜索，我发现的所有结果都只是给出了输入公式的基础，但没有一个解释如何绕过里面的引号。

（在此之前有一个With语句，Pivot是工作表名称）

```
.Range("A2").Formula = "=IF(Pivot!A5="",A1,Pivot!A5)" 
```

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-13T14:15:13.210

如有疑问，请在允许的情况下录制宏:)

试试这个

```
.Range("A2").Formula = "=IF(Pivot!A5="""",A1,Pivot!A5)" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-13T14:39:28.333

`Chr(34)`代替双引号使用。

所以在你的情况下：

```
.Range("A2").Formula = "=IF(Pivot!A5=" & Chr(34) & Chr(34) & ",A1,Pivot!A5)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:25:31.050

你可能需要这样做：

```
.Range("A2").Formula = "=IF(Pivot!A5="& """" & """" & ",A1,Pivot!A5)" 
```

# backbone.js - 如何使用动态创建的“el”创建主干视图？

> ID：10142451
> 
> 赞同：1
> 
> 时间：2012-04-13T14:12:02.180
> 
> 标签：backbone.js, backbone-views

我有两个视图——一个 OverlayView 和一个 StoryView。StoryView 需要附加到 OverlayView（两者都是动态创建的）。我在 OverlayView 中动态创建了#overlay div，但是当我将 StoryView 的“el”设置为 #overlay 时，StoryView 的 this.$el 是一个空数组。在 StoryView 创建时，#overlay div 肯定存在于 DOM 中。

如何让 StoryView 将动态创建的#overlay 识别为它的“el”？我是否正确假设'el'应该是视图附加到的'父'容器？OverlayView 的“el”实际上应该是“#overlay”吗？

**叠加视图：**

```
OverlayView = Backbone.View.extend({
    el: $('body'),

    events: {
        'click #film': 'hideOverlay'
    },

    initialize: function() {
        this.render();
    },

    render: function() {
        this.$el.append('<div id="overlay"></div>');
        return this;
    }
}); 
```

**故事视图：**

```
var StoryView = Backbone.View.extend({
    el: $('#overlay'),

    events: {
        'click .close': 'closeStory'
    },

    initialize: function() {
        this.render();
    },

    render: function() {
        console.log(this.$el); // Returns empty array []
        return this;
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T15:01:34.437

你的问题是你`StoryView` `el`应该只是一个选择器——而不是一个 jQuery 对象。这将导致 Backbone 在您指定时尝试检索对象（尚不存在）`el`。只需更改`el: $('#overlay')`为`el: '#overlay'`. 你也可以`$('body')`在你的第一个视图中做同样的事情，因为这不是必需的。只是总是使用选择器而不是 jQuery 对象，你会没事的。

[这里](http://jsfiddle.net/joshleitzel/dzQuB/)的工作示例。

# c++ - 将列表从 Mathematica 传递到 c++ (Mathlink)

> ID：10142453
> 
> 赞同：2
> 
> 时间：2012-04-13T14:12:06.627
> 
> 标签：c++, wolfram-mathematica, mathlink

我只是想将整数列表传递给用 C++ 编写的函数。我已经设置了模板 (.tm) 文件和所有文件，并且可以成功调用带有标量参数的测试函数。使用 list 参数调用函数的行为就好像该函数根本没有定义。我怀疑参数类型不匹配。

在模板文档 (http://reference.wolfram.com/mathematica/ref/file/file.tm.html) 中，列表的数据类型类似于“Int32List”。当我使用它时，我的 C++ 函数必须包含一个用于列表长度的超长参数。唯一使用列表的示例代码是“sumalist.tm”。此示例使用 IntegerList（一种未出现在独库中的类型）。

当我使用 Int32List 时，mprep 结果需要一个带有额外整数参数的函数（不像 doku 中写的那样长）。当我使用未记录的 IntegerList 类型时，额外的参数是 long 类型。

在我对标量类型的实验中，我遇到了类似的问题 - 在 tm 文件中使用“Integer”时正确调用了一个 c++ 函数，而“Integer32”则无法识别。

“sumalist.tm”示例还使用了一个奇怪的 Pattern (list:{___Integer})，我没有找到任何文档。我还想了解 Evaluate 行的含义（我怀疑它用于使函数在列表周围没有大括号的情况下可调用）。

那么谁知道哪些数据类型真正适合用列表调用 c++ 函数 - 也许也可以用实数......？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T17:56:35.713

MathLink 数据类型（例如 , , ...）到 C/C++ 类型的映射`Integer32`在`Integer32List`MathLink[模板文件](http://reference.wolfram.com/mathematica/ref/file/file.tm.html)文档页面上进行了描述。

该页面不再记录旧的接口类型`Integer`、`Real`和。这些不应再使用，因为这些类型的映射取决于位长度取决于平台和编译器的 C 类型（例如，）。改用具有显式位长的相应新类型（即，或代替）。旧的接口类型仍然记录在有些过时的[MathLink 参考](http://library.wolfram.com/infocenter/Books/3710/MathLinkRef.pdf)指南中。`IntegerList``RealList``long``Integer32``Integer64``Integer`

以下[演讲幻灯片](http://www.unisoftwareplus.com/download/talks/Wien2011/Developing%20on%20the%20Mathematica%20Platform.zip)包含一个简单的 MathLink 示例，该示例展示了如何实现将标量值添加到实数向量的 MathLink 函数。这可以作为一个起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T12:58:44.383

我对 MathLink 了解不多，但我可以解释一下模式，`list:{___Integer}`.

冒号只是命名模式的一般形式，`symbol:pattern`只是表示所引用的对象`symbol`必须匹配`pattern`。事实上，类似`a_Integer`or`b__List`的模式实际上只是`a:_Integer`and的简写形式`b:__List`。

所以我们剩下的解释是`{___Integer}`。这是一个匹配任意多个（包括零）整数列表的模式。它的工作原理如下：

`{Pattern}`是内容匹配的列表的模式`Pattern`

`___Integer`是零个或多个`Integer`s 序列的模式。

# jquery - 在 Jquery 中检测双退格事件

> ID：10142470
> 
> 赞同：1
> 
> 时间：2012-04-13T14:12:57.080
> 
> 标签：jquery

我知道我可以像这样检测一个退格键：

```
$("#myelement").bind ("keyup", function(event) {
    if (event.keyCode==8) {
        alert ("Backspaced!!!");
    }
}); 
```

我如何检测在 1 秒内发生的双退格，就像双击一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:15:26.143

您必须记录最后一次按下退格键的时间。然后每次调用您的事件处理程序时，您都会检查该值并查看它是否小于 1 秒，如果是，您会按两次退格键。如果不是，那么您将最后一个退格时间的值重置为当前时间，并且您不执行任何代码。

在伪代码中：

```
last_timestamp = 0
onkeyup () {
  if key == backspace {
    if now () - last_timestamp <= 1 {
      // execute code
      last_timestamp = 0
    }
    else {
      last_timestamp = now ()
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:16:47.157

在 jQuery.com 本身的 custom.js 文件中，有一些代码可能对您有所帮助。它侦听用户击键中的“konami”代码。如果它检测到某个键序列，如下面的变量所示`konami`，它会响应。

```
// Hehe.
if (window.addEventListener) {
  var kkeys = [], konami = "38,38,40,40,37,39,37,39,66,65";
  window.addEventListener("keydown", function(e) {
    kkeys.push(e.keyCode);
    if (kkeys.toString().indexOf(konami) >= 0) 
      window.location = "http://ejohn.org/apps/hero/";
  }, true);
} 
```

这段代码没有做的是跟踪最后一次按键和我们当前按键之间的时间。但请注意，只需稍作修改，我们就可以模仿他们的代码并生成您想要的所需输出。

```
<script>
  (function($){
    // Prep our variables
    var keys = [], lastEntry = 0, seq = '8,8';
    // Listen for keydown events
    $(document).keydown(function(e){
      // Push new key into keys array
      keys.push(e.which);
      // See if we need to respond
      if ( keys.toString().indexOf(seq) != -1 )
        if ( e.timeStamp - lastEntry <= 1000 )
          console.log( 'Correct keys, in the current time.' );
      // Update time of last keydown
      lastEntry = e.timeStamp;
    });
  })(jQuery);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:23:44.187

```
var flag=false;
$("#myelement").on("keyup", function(e) {
    if ((e.keyCode ? e.keyCode : e.which) == 8) {
        setTimeout(function() {flag=false}, 1000);
        if (flag) {
            flag=false;
            alert('backspace twice');
        }
        flag=true;
    }else{
        flag=false;
    }
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/QqXUM/5/)

# mysql - 获取包含 time_start<=time_pc<=time_finish 的所有记录的正确查询

> ID：10142471
> 
> 赞同：1
> 
> 时间：2012-04-13T14:12:57.517
> 
> 标签：mysql, time

我来自印度尼西亚。我在数据库中有一个名为 tb_schedule 的表，其中包含 3 个字段：id_schedule、time_start(time)、time_finish(time)。例如：10、08:00:00、09:45:00 ..等

在我的 php 中，我有取自 pc 时间的时间变量。例如：$timeNow='08:10:00'; 我的问题是我找不到正确的查询来获取包含 time_start<=time_pc<=time_finish 的所有记录。例如：08:00:00<=$timeNow<=09:45:00 请帮帮我..谢谢你之前..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:19:47.403

试试这个：

```
SELECT * FROM tb_Schedule WHERE time_start <= '08:10:00' AND
                                time_finish >= '08:10:00'; 
```

你的变量`'08:10:00'`的值在哪里。`$timeNow`

这是一个 SQL Fiddle，以便您可以使用查询：[http ://sqlfiddle.com/#!2/187a0/1](http://sqlfiddle.com/#!2/187a0/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:15:31.103

```
SELECT * FROM YOURTABLE
WHERE $timeNow BETWEEN '08:00:00' AND '09:45:00'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:16:10.993

请说明什么是 time_pc 并正确定义 $timeNow。另外，告诉我您考虑过哪些查询语句，我会看看我能做什么

# php - 大量的小 sql 语句会显着降低我的网站速度吗

> ID：10142473
> 
> 赞同：0
> 
> 时间：2012-04-13T14:13:11.073
> 
> 标签：php, mysql, sql, zen-cart

我有一个 25-30 个类别的 zen-cart。在网站的首页上，每个类别都有自己的小区域，其中将显示该类别中最畅销的 4 种产品。

作为一个菜鸟，我能想到的最好方法是为每个类别设置一个 sql 语句，每次页面加载时都会挑选出最畅销的产品。我在某处读到最好限制sql语句的数量，以免影响站点速度。

这样做会慢很多吗？

有没有更明智的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:20:39.797

这在很大程度上取决于支持您网站的服务器。但是 25 到 30 个查询应该不会对页面性能产生重大影响。

更好的方法是设计一个数据库查询，通过一个查询获取所有项目。但是为了帮助您这样做，我们需要您的数据库架构。

此外，如果您必须执行许多类似的查询，则可以选择使用“准备好的查询”，这通常会大大提高性能。

毕竟一般来说，如果您是使用数据库的新手，通常最好设计一些更容易构建并且可以由您处理的小查询，然后一个可能包含错误并且可能会减慢速度的大查询数据库关闭更多然后是多个小查询。

# iphone - iPhone：在 viewController 被释放后 UITableView 委托是活动的

> ID：10142484
> 
> 赞同：0
> 
> 时间：2012-04-13T14:14:16.453
> 
> 标签：iphone

我的 ViewController1 推送 ViewController2

```
ViewController2 *controller =
    [[ViewController2 alloc] init];
[self.navigationController pushViewController:controller
    animated:NO];
[controller release]; 
```

ViewController2 在 xib 文件中有 UITableView ...我将委托与文件的所有者连接。ViewController2 也有完成按钮

```
- (IBAction)doneButtonPressed {
     [self.navigationController popViewControllerAnimated:NO];
 } 
```

问题是，如果同时单击表行和完成按钮，有时会在弹出 ViewController2 之后调用 didSelectRowAtIndexPath: 方法，并且我在 logger 中有 SIGABRT 错误和这个东西：

```
[__NSCFSet tableView:didSelectRowAtIndexPath:]: unrecognized selector sent to instance 0x62579d0' 
```

那么在我弹出 viewController2 之后如何调用 tableView:didSelectRowAtIndexPath 呢？应该是死了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:19:17.310

一个简单的解决方法是这样做：

```
- (IBAction)doneButtonPressed {
     self.tableView.delegate = nil;
     [self.navigationController popViewControllerAnimated:NO];
 } 
```

这样您就可以保证在您离开该视图时不会再发生委托调用。您也可以在视图控制器的 dealloc 方法中执行此操作（可能是一个更好的地方）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:27:50.737

`popViewController`&`pushViewController`方法异步执行它们的任务。他们使用动画块将 viewController 滑入和滑出。ViewController 从其父视图中移除并在动画块的完成部分中释放。崩溃是因为这种延迟（我认为是 0.3 秒）。

# html - 嵌套对象不同？

> ID：10142485
> 
> 赞同：0
> 
> 时间：2012-04-13T14:14:18.517
> 
> 标签：html, hyperlink

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:27:47.433

```
 $('object').click(function () {
    window.location.href = 'whatever url you want';
    return false;
 }); 
```

或者

```
 $('object').click(function (e) {
    e.preventDefault();
    window.location.href = 'whatever url you want';
 }); 
```

两者都应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:30:00.220

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:36:39.190

这应该有效。有一些javascript，但不多。不需要 jQuery 或任何其他库。

```
<a href="blahblah.php">
    <object class="svg" type="image/svg+xml" data="svgimage.svg" onclick="return false; window.location.href='http://example.com'" >
        <img src="pngimage.png" type="image/png" onclick="window.location.href='http://example.com/differentlocation'; return false;" />
    </object>
</a> 
```

# html - 在 IE7+ 中替代背景大小：覆盖

> ID：10142491
> 
> 赞同：13
> 
> 时间：2012-04-13T14:14:50.760
> 
> 标签：html, internet-explorer, css

我的网页正文上有一张背景图片。我使用`background-size:cover`了这样的方法，使图像在保持图像纵横比的同时延伸到整个身体。我希望这对于 IE7 + IE8 是一样的。

我环顾四周，看到了以下代码：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
    src='AutumnWinter_4.jpg',
    sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
    src='AutumnWinter_4.jpg',
    sizingMethod='scale')"; 
```

但这并不能保留纵横比，这对我们所针对的网站来说真的很糟糕。

有没有办法做到这一点？没有碰到 jQuery？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T13:53:10.150

不使用 jQuery 的原因是什么？您可以仅在条件注释中加载它`IE<8`，这样就不会加载其他所有现代浏览器 jQuery。

还要考虑到 IE7 的[市场份额非常低（2.52%，2012 年 4 月）](http://gs.statcounter.com/#browser_version-ww-monthly-201204-201204-bar)，因此如果此功能对您的站点/应用程序非常重要，则可以为该特定浏览器加载约 25kb 的额外负载是可以接受的。

所以，我找到了这个 jQuery 插件：[https ://github.com/louisremi/jquery.backgroundSize.js](https://github.com/louisremi/jquery.backgroundSize.js)

> 一个 jQuery cssHook 添加对 IE6-7-8 的“cover”和“contain”的支持，在 1.5K

有关更多信息，请参阅[Github 项目页面](https://github.com/louisremi/jquery.backgroundSize.js#readme)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T15:24:59.663

backgroundSize.js 实际上不会在 IE7 中拉伸 bg 图像，它似乎只是将其以原始大小居中。查看他们的[**演示**](http://louisremi.github.com/jquery.backgroundSize.js/demo/)并单击*“检查 IE6-7-8 用户通常会看到什么”。*

* * *

@danRhul

我已经读过 [**backstretch**](http://srobbin.com/jquery-plugins/backstretch/)可以在 IE7+ 中使用

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T04:00:33.400

您可以用实际图像伪造背景图像。它需要更多的 HTML 编辑，当然也不理想，但是从什么时候开始处理 IE 变得理想了？

```
<body>
  <img id="mainBG" src="mainBG.jpg" />
  <div id="content">
  [ ... ] 
```

然后相应地设置样式

```
body{
  position:relative;
}
#mainBG{
  width:100%
  position:absolute;
  top:0px;
  left:0px;
} 
```

如果我没记错的话应该是跨浏览器的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T23:58:31.153

我使用了以下（[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)），它在ie7中运行良好。

**HTML：**

```
<body>
    <img class="bg" src="filename">       
</body> 
```

**CSS：**

```
.bg {
    /* Set rules to fill background */
    min-height: 100%;
    min-width: 1024px;

    /* Set up proportionate scaling */
    width: 100%;
    height: auto;

    /* Set up positioning */
    position: fixed;
    top: 0;
    left: 0;
}

@media screen and (max-width: 1024px) { /* Specific to this particular image */
    img.bg {
        left: 50%;
        margin-left: -512px;   /* 50% */
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T10:26:50.237

我知道这现在是一个老问题，但我想我会像我一样，为在谷歌上找到这个问题的其他人分享我想出的解决方案。

我试图获取一张图片来覆盖网站的背景并遇到了这个问题，但是没有一个解决方案对我有用。我想出了这个：

*HTML*：将背景图片移动`<img />`到`<body>`.

```
<html>
    <body>
        <img class="background" src="kitty.jpg" />
        <div class="content">
            ... 
```

*CSS* : 使背景出现在内容下方，设置`min-width/height`为 100%。

```
html {
    height: 100%
}

body .background {
    position: absolute;
    z-index: -1;
    min-height: 100%;
    min-width: 100%;
} 
```

正是`min-height`and `min-width`here 具有魔力。请勿在 HTML 或 CSS 中为图像指定宽度和高度，否则纵横比会发生变化。

以上将适用于**IE7**和**IE8**。如果你想支持**IE6**，你可以像这样设置一个居中的图像后备：

*CSS*：如果**IE6**，不显示图像，而是使用背景图像。

```
body {
    _background: url("kitty.jpg") 50% top no-repeat;
}

body .background {
    _display: none;
} 
```

（注意，如果您不喜欢针对**IE6**的下划线 hack ，您可以使用[条件](http://www.quirksmode.org/css/condcom.html)语句来代替——这就是[HTML5 Boilerplate](http://html5boilerplate.com/)所做的。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-19T00:17:38.073

经过多次试验和错误，最好的解决方案是猜测它！

以下对我有用。

```
body {
background-size:100%;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-13T08:25:11.920

您有两种选择可以**仅使用 CSS**来实现此目的：

*   使用`Object-fit: cover`. 唯一的问题是它不适用于所有浏览器
*   如果你想要跨浏览器支持，你可以遵循原始的 CSS 方法：

**使用绝对值**将图像放置在容器内 ，然后使用以下组合**将其放置在中心：**

```
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%); 
```

> **注意：** 由于转换**仅**适用于 IE9，因此您可以使用过滤器。[这](https://stackoverflow.com/a/15803186/4825498)是一个答案。

一旦它在中心，你可以做，

```
// For vertical blocks (i.e., where height is greater than width)
height: 100%;
width: auto;

// For Horizontal blocks (i.e., where width is greater than height)
height: auto;
width: 100%; 
```

这使得图像得到了 Object-fit:cover 的效果。

* * *

# 这是上述逻辑的演示。

[https://jsfiddle.net/furqan_694/s3xLe1gp/](https://jsfiddle.net/furqan_694/s3xLe1gp/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-13T13:28:05.793

不幸的是，此类问题的大多数解决方案要么依赖于 css3，要么忽略了保留图像原始纵横比的“覆盖”的本机功能。 [https://github.com/louisremi/background-size-polyfill](https://github.com/louisremi/background-size-polyfill)应该保持比例，但是当以某些方式拉伸浏览器时，我永远无法让它完全工作（操作员错误，我敢肯定:-)）。为了解决这个问题，我编写了一个 jquery 脚本，我已经在 safari、chrome、ff 和 ie8+ 上进行了测试。您会注意到您必须使用绝对定位的 img 而不是 css 背景图像。只需在 html 的标签中添加 bgImg 作为 id。

CSS：

```
.container { height: auto; overflow:hidden; position:relative;}
.container #bgImg { position:absolute; z-index:-1;} 
```

您的图像选择器必须绝对定位才能使其位于内容后面。这意味着您的父容器必须具有 position: relative 然后 overflow: hidden 以便从图像中溢出的任何内容（由于您要保持比例，因此不可避免地会隐藏其中的某些部分）。另请注意，父容器中的某些显示标签会破坏溢出的隐藏。

查询：

```
$(window).load(function () {

    // only do this once and pass as function parameters, because chrome
    // and safari have trouble not only with document.ready but window.resize
    var img = new Image();
    img.src = $("#bgImg").attr('src');
    var $width_orig = img.width;
    var $height_orig = img.height;

    resizeBGImage($width_orig, $height_orig);

    $(window).resize(function () {
        resizeBGImage($width_orig, $height_orig);
    });
});

function resizeBGImage($width_img_orig, $height_img_orig) {
    // get dimensions of container
    var $width_container = $('.container').outerWidth();
    var $height_container = $('.container').outerHeight();

    // calculate original aspect ratio and ratio of the container
    var $imageratio = $width_img_orig / $height_img_orig;
    var $containerratio = $width_container / $height_container;

    var $wdiff = $width_container - $width_img_orig;
    var $hdiff = $height_container - $height_img_orig;

    // original size, so just set to original
    if (($wdiff == 0) && ($hdiff == 0)) {
        $("#bgImg").css('width', $width_img_orig);
        $("#bgImg").css('height', $height_img_orig);
    }
    // if container is smaller along both dimensions than the original image, 
    // set image to container size
    else if (($wdiff < 0) && ($hdiff < 0)) {
        $("#bgImg").css('width', $width_img_orig);
        $("#bgImg").css('height', $height_img_orig+1); // adding one because chrome can't do math
    }
    // if container is wider than long relatiave to original image aspect ratio
    // set width to container width and calculate height 
    else if ($containerratio > $imageratio) {
        $("#bgImg").css('width', $width_container);

        // calculate height using orig aspect ratio and assign to image height 
        $("#bgImg").css('height', (($width_container * $height_img_orig) / $width_img_orig) + 1); // adding one because chrome can't do math
    }
    // else container is taller than long relatiave to original image aspect ratio
    // set height to container height and calculate width
    else {
        // set the image height to container height
        $("#bgImg").css('height', $height_container + 1); // adding one because chrome can't do math

        // calculate width using orig aspect ratio and assign to image width
        $("#bgImg").css('width', (($height_container * $width_img_orig) / $height_img_orig));
    }
    $("#bgImg").css('left', (($width_container - $("#bgImg").width()) / 2).toString() + 'px');
}; 
```

注意使用 $(window).load() 而不是 $(document).ready()。Chrome 和 safari 似乎对后者有问题，因为在这些浏览器中，当 DOM 加载时，背景图像可能没有完全加载。使用 $(window).load() 可确保所有窗口元素在脚本运行之前就位。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-04-13T14:51:05.660

听起来你需要像 Modernizer 这样的“垫片”或“polyfill”：http: [//modernizr.com/docs/#html5inie](http://modernizr.com/docs/#html5inie)

# javascript - 正则表达式的 JS 对象类型返回为 NaN

> ID：10142493
> 
> 赞同：0
> 
> 时间：2012-04-13T14:14:53.523
> 
> 标签：javascript, regex

`change`我有以下功能，当字段中的值发生事件时，我使用正则表达式匹配来检查正确的日期格式`input`。

我的问题是`month`,`day`和`year`正在返回`NaN`，我不知道为什么。我正在解析正则表达式对象`[1]`,`[2]`和`[3]`，`parseInt()`所以我不确定它们为什么返回为`NaN`.

```
validateDate: function(event) {

        var input = $(event.target);
        var enteredDate = input.val();

        input.destroyValidationMessage();

        var pattern = /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/;
        var result = pattern.test(enteredDate);

        if (result !== null) {
            var month = parseInt(result[1], 10);
            var day = parseInt(result[2], 10);
            var year = parseInt(result[3], 10);
        }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:17:33.537

[`.test()` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)返回一个布尔值，即`true`or`false`并且仅告诉您表达式是否与输入匹配。

然后，因为是or`if(result !== null)`总是正确的，所以语句块被执行。`result``true``false``if`

`match[x]``true[x]`与(or )相同`false[x]`，它不会抛出错误，而是返回`undefined`. 这是因为 JavaScript 在内部将原始值转换为对象，并且访问不存在的属性会导致返回值`undefined`。

此外，`parseInt(undefined, 10)`返回`NaN`.

* * *

你想使用[`.match()` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)：

```
var result = enteredDate.match(pattern); 
```

* * *

将数字字符串转换为数字的一种更短的方法是使用一元运算`+`符：

```
var month = +result[1]; 
```

因为输入字符串只包含数字，所以在这里给你同样的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:17:44.817

您需要使用`exec`而不是`test`：

```
var result = pattern.exec(enteredDate); 
```

有关 exec 的更多信息，您可以在[MDN阅读](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)

# symfony - 如何将JS代码添加到实体表单？

> ID：10142494
> 
> 赞同：6
> 
> 时间：2012-04-13T14:14:59.123
> 
> 标签：symfony, symfony-sonata

我有一个实体。当实体在弹出窗口中加载时，我需要执行一些 JS 代码。有没有办法通过管理类配置将自定义 JS/HTML 代码添加到实体表单。例如，将模板作为选项传递

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T13:11:37.970

你可以这样做： -

1.  在 FormMapper 中添加一个类参数，如下所示：-

    protected function configureFormFields(FormMapper $formMapper) { $formMapper ->add('description', null, array('attr' => array('class' => 'for_popup'), 'required' => false)) }

2.  从 Sonata CRUD 模板扩展`edit.html.twig`/`base_edit.html.twig`

---edit.html.twig----

```
{% extends 'YourBundle:YourAdminClass:base_edit.html.twig' %} 
```

---base_edit.html.twig---

```
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        // Your JS code here
    </script>
{% endblock %} 
```

`edit.html.twig`通过在 getEditTemplate 函数（在您的 Admin 类中）中定义它来使用您的而不是 Sonata CRUD。

```
public function getEditTemplate() 
{
    return 'YourAdminBundle:ControllerName:edit.html.twig'; 
} 
```

您还可以在注入管理服务时设置自定义编辑模板。

```
<service id="sonata.admin.bf" class="Wyzbiz\Bundle\MainBundle\Admin\BfAdmin">
    <tag name="sonata.admin" manager_type="orm" group="Content" label="BFs"/>
    <argument />
    <argument>Wyzbiz\Bundle\MainBundle\Entity\Bf</argument>
    <argument>WyzbizMainBundle:CRUD</argument>
    <call method="setTranslationDomain"><argument>WyzbizMainBundle</argument></call>
    <call method="setTemplate"><argument>list</argument>                       
    <argument>WyzbizMainBundle:CRUD/Bf:list.html.twig</argument></call>
</service> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-26T14:50:25.130

@Jessica 不要在管理类的 configureFormFields 方法中使用 $this->setTemplate() ，而是可以添加自己的 getTemplate 方法实现，我的看起来像这样：

```
/**
 * Override core method to display custom template(s)
 */
public function getTemplate($name)
{
    switch ($name) {
        case 'edit':
            return 'YourAdminBundle:YourAdminEntity:edit.html.twig';
            break;
        default:
            return parent::getTemplate($name);
            break;
    }
} 
```

# sql - MembershipUser.ResetPassword 不执行存储过程

> ID：10142504
> 
> 赞同：0
> 
> 时间：2012-04-13T14:15:29.683
> 
> 标签：sql, c#-4.0, membership-provider

在我们的生产环境中重置密码时，我们遇到了“iDesign Credentials Manager”MVC 应用程序的问题。它抛出的错误是

> System.ServiceModel.CommunicationObjectFaultedException：通信对象 System.ServiceModel.Channels.ServiceChannel 无法用于通信，因为它处于故障状态。

由于这是一个普遍的错误，而且对于.net 会员大会内部真正发生的事情没有描述性，我开始在代码之外寻找。

生产环境是 SQL Server 2k5，开发环境是 SQL Server 2k8。我将代码从生产环境中提取出来，更改了 CredentialsManager.ConnectionStrings.config 文件中的连接字符串以指向我们的开发数据库，​​并且应用程序可以像代码库的开发版本一样正常工作。

当我们尝试密码重置连接时，我聘请了一位 DBA 在 SQL 数据库上运行分析器。这是他的评论

> 我在 prod 中看到的最后一件事是 exec dbo.aspnet_Membership_GetUserByName，然后什么都没有。在 DEV 中，在它执行那个之后，我看到它执行 dbo.aspnet_Membership_GetPasswordWithFormat 然后 dbo.aspnet_Membership_ResetPassword 然后它再次执行 dbo.sapnet_Membership_GetUserByName 然后这似乎是成功重置的结束。**

他们正在使用 SSL 证书，但 DBA 验证了生产数据库上的证书没有过期。

有人有什么想法吗？

这是 CredentialsManager.Membership.config 的内容，对于我们当前设置的两个应用程序，Allow reset 都是 true。

```
 <membership
      userIsOnlineTimeWindow="15"
      defaultProvider="DTCSQLMembershipProvider">
  <providers>
    <clear/>
    <add
      name="DTCSQLMembershipProvider"
      type="System.Web.Security.SqlMembershipProvider"
      connectionStringName="AspNetDbConnectionString"
      applicationName="/DTCWebService"
      enablePasswordRetrieval="false"
      enablePasswordReset="true"
      requiresQuestionAndAnswer="false"
      requiresUniqueEmail="false"
      passwordFormat="Hashed"
      minRequiredPasswordLength="40"
      minRequiredNonalphanumericCharacters="10" />
    <add
      name="QRSQLMembershipProvider"
      type="System.Web.Security.SqlMembershipProvider"
      connectionStringName="AspNetDbConnectionString"
      applicationName="/QRWebService"
      enablePasswordRetrieval="false"
      enablePasswordReset="true"
      requiresQuestionAndAnswer="false"
      requiresUniqueEmail="false"
      passwordFormat="Hashed"
      minRequiredPasswordLength="40"
      minRequiredNonalphanumericCharacters="10" />
  </providers>
</membership> 
```

# jquery - jQuery、多重 JSON 文件、递归 AJAX

> ID：10142506
> 
> 赞同：1
> 
> 时间：2012-04-13T14:15:32.137
> 
> 标签：jquery, ajax, json

把我的头发拉在这里。

Jquery、多个 JSON 文件和 Ajax

我有一个 python 脚本，它正在收集数据并将 JSON 文件转储到我的网络服务器上的文件夹中

我正在尝试可视化该数据。

基本上，我首先绘制一个 SVG 地图并用一个虚拟 json 文件对其进行着色。随后，我想使用 JSON 数据对其进行着色。每个 JSON 文件将代表地图的一个完整渲染（着色）。

我正在使用 Ajax 调用来返回目录中的文件的 php 脚本。然后我想使用 Ajax（或简写 .getJson）来加载该文件中的数据 - 为地图着色，然后继续下一个（最终结果是动画）。问题在于 AJAX 的异步特性，并且无法控制 Ajax 位的及时执行和完成。显然我不想进行同步调用，因为我不想锁定浏览器。

这是我的代码（道歉 - 它相当大）

```
jQuery(document).ready(function() {

$(function() {

    var map, c = [];
    var dep_data;
    var val = {};
    var max= 0;
    var vals = new Array();

    c = $('#map');
    c.height(c.width()*.5);

    drawMap('mapData.json');

    function drawMap(url){
        console.log(url);
        $.ajax({
        url: 'mapData.json',
        dataType: 'json',
        success: function(data) {

            dep_data = data;

            map = window.m = $K.map('#map', 600, 800);
            map.loadMap('ireland.svg', function() {
                map.loadStyles('./mapping_files/style.css');
                map.addLayer({
                    id: 'regions',
                    key: 'name-1'
                });

                colourMap(dep_data);

                    var mapData = $.ajax({
                        url: './php/getfiles.php',
                        type : 'POST',
                        dataType: 'json',
                        success: function (files){

                            for (_a in files.response){
                                for (_b in files.response[_a]){
                                      $.ajax({
                                        url: files.response[_a][_b],
                                        dataType: 'json',
                                        success: function (json){
                                          colourMap(json);
                                          $(this).dequeue();
                                        }
                                      });
                                }       

                            }
                        },

                        error: function (files){
                            console.log(files.message);
                        },

                    });

                });

            }
        });

    }

    colourMap = function(data) {

    //do the coloring in...

}

}); }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:21:25.873

行，

您可能希望将 json 处理代码与 ajax success() 函数分离。相反，对数据进行排序并将其存储在全局变量中。一旦收到所有数据（检查），您可以调用一个函数来绘制您的 SVG，从而控制时间。它就像 jquery 的 $.document(ready)

编辑：

根据您的场景，您需要一个更高效的 json 文件队列系统。一种方法是分块而不是随机加载 json 文件。您提到每 10 分钟创建一个新文件，因此获取第一个 json 文件并获取，比如说，另外 35 个 json 文件，实际上获取了 6 小时的数据。如果一个文件夹当前的文件少于 36 个，您可以选择等到所有 36 个文件都存在，然后运行 ​​svg 代码并继续或等待下一个 36 个 json 文件。这带来了对时间的控制，其中一个 svg 文件代表 6 小时的数据。您也可以从 36 更改为任何合理的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T14:04:52.740

[在这里](https://stackoverflow.com/questions/8612894/how-to-chain-ajax-calls-using-jquery)找到了一个很棒的解决方案，我做了如下调整。完美运行。感谢您对此的投入。

```
 function getFiles(){

        $.ajax({
            url: './php/getfiles.php',
            type : 'POST',
            dataType: 'json',
            success: function (files){

                for (_a in files.response){
                    for (_b in files.response[_a]){
                        var fname = files.response[_a][_b].substr(30, 8);
                        jsonVals[fname] = files.response[_a][_b];
                    }       
                }

                getData();

            },

            error: function (files){
                console.log(files.message);
            },

        });

    }

    function getData(){

        _d = 0;

        function fireRequest(jsonURL) {
                return $.ajax({
                    type: "GET",
                    url: jsonURL,
                    dataType: 'json',
                    success: function(data){
                        console.log("got " + jsonURL);
                        if (_d == Object.size(jsonVals)){ console.log('done'); }

                    }
                });
        }

        var countries=["US","CA","MX"], startingpoint=$.Deferred();
        startingpoint.resolve();

        $.each(jsonVals,function(key, file) {
            startingpoint=startingpoint.pipe( function() {
                    console.log("making requst for " + file);
                    _d = _d + 1;
                    return fireRequest(file);
            });
        });

    } 
```

# php - Symfony2 禁用 HTML5 表单验证

> ID：10142509
> 
> 赞同：46
> 
> 时间：2012-04-13T14:15:41.307
> 
> 标签：php, html, symfony

我只想使用服务器端验证来验证我的表单。但是，如果浏览器支持 HTML5，它会使用 symfony2 添加到表单的 HTML5 属性进行验证，所以我需要阻止 HTML5 验证。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-13T14:33:11.827

只需添加[`novalidate`](http://www.w3.org/TR/html5/attributes-common-to-form-controls.html#attr-fs-novalidate)到您的`<form>`标签：

```
<form novalidate> 
```

如果您在 TWIG 中呈现表单，则可以使用以下内容。

```
{{ form(form, {'attr': {'novalidate': 'novalidate'}}) }} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-03-30T19:47:04.590

我知道它的老问题，但是使用 FormType 中的 SF2.6，你可以这样做：

```
/**
 * @param OptionsResolverInterface $resolver
 */
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'attr'=>array('novalidate'=>'novalidate')
    ));
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-20T13:26:45.153

在谷歌搜索解决方案时，我找到了一个，如果你想在整个应用程序中禁用 html5 验证，这似乎是最优雅的，所以我想我会在这里分享。致谢[这篇博客文章](http://elnur.pro/symfony-disabling-html5-form-validation-globally/)的作者。

这个想法是为“表单”表单类型创建一个扩展，如下所示：

```
<?php
// src/AppBundle/Form/Extension/NoValidateExtension.php

namespace AppBundle\Form\Extension;

use Symfony\Component\Form\AbstractTypeExtension;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormView;

class NoValidateExtension extends AbstractTypeExtension
{
    public function buildView(FormView $view, FormInterface $form, array $options)
    {
        $view->vars['attr'] = array_merge($view->vars['attr'], [
            'novalidate' => 'novalidate',
        ]);
    }

    public function getExtendedType()
    {
        return 'form';
    }
}
?> 
```

然后你只需像这样在你的 services.yml 中注册它：

```
app.no_validation_form_extension:
    class: AppBundle\Form\Extension\NoValidateExtension
    tags:
        - {name: form.type_extension, alias: form} 
```

你就完成了。您的所有表单现在都自动具有一个`novalidate`属性。

# Symfony 3.3

从 Symfony 3.3 开始，配置略有不同，但仍然可以。

`getExtendedType`对返回`FormType`类的方法进行轻微更新。

```
// src/AppBundle/Form/Extension/NoValidateExtension.php

namespace AppBundle\Form\Extension;

use Symfony\Component\Form\AbstractTypeExtension;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormView;
use Symfony\Component\Form\Extension\Core\Type\FormType;

class NoValidateExtension extends AbstractTypeExtension
{
    public function buildView(FormView $view, FormInterface $form, array $options)
    {
        $view->vars['attr'] = array_merge($view->vars['attr'], [
            'novalidate' => 'novalidate',
        ]);
    }

    public function getExtendedType()
    {
        return FormType::class;
    }
} 
```

加上一些小`extended_type`标签，现在在您的服务声明中需要：

```
app.no_validation_form_extension:
    class: AppBundle\Form\Extension\NoValidateExtension
    tags:
        - {name: form.type_extension, alias: form, extended_type: Symfony\Component\Form\Extension\Core\Type\FormType} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-30T05:27:34.573

或者，如果由于某种原因你不想像上面的答案那样在树枝上做这件事......

> {{ form(form, {'attr': {'novalidate': 'novalidate'}}) }}

或者您使用 createFormBuilder 手动创建 from 然后您可以简单地使用 createFormBuilder 作为第二个参数来定义表单属性：

```
//someAction
$form = $this->createFormBuilder(null, ['attr'=>['novalidate'=>'novalidate']])
->add(...)
->add(...)
->add(...)
->getFrom();

return $this->render("-----:----:----.html.twig", [
    'form'=>$form->createView()
]); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-02T18:05:30.980

如果您使用 Symfony 3（或 2）并且只想关闭特定字段的验证，您可以这样做。

```
$form = $this->createFormBuilder($task)
            ->add('task', TextType::class, array('required' => false))
            ->add('dueDate', DateType::class)
            ->add('save', SubmitType::class, array('label' => 'Create Task'))
            ->add('saveAndAdd', SubmitType::class, array('label' => 'Save and Add'))
            ->getForm(); 
```

在此示例表单中，请注意**array('required' => false)**，您可以将其添加到要禁用验证的任何元素，而不禁用其他元素的验证。如果您只想暂时禁用一个元素而不是整个表单，这非常有用。

**请注意，这只会禁用 HTML5 验证！**这不会禁用服务器端验证。

参考：[http ://symfony.com/doc/current/book/forms.html#field-type-options](http://symfony.com/doc/current/book/forms.html#field-type-options)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-11T14:24:07.413

如果您确实需要删除验证属性（例如，如果您使用验证库希望将所有验证约束保存在一个地方），则可以覆盖 twig 中的 widget_attributes 块。

例如，如果您已经在 app/Resources/views/form.html.twig 中使用自定义表单模板（并且已在 config.yml 中启用它），您只需为

```
{% block widget_attributes %}
{% spaceless %}
    id="{{ id }}" name="{{ full_name }}"{% if read_only %} readonly="readonly"{% endif %}{% if disabled %} disabled="disabled"{% endif %}
    {% for attrname, attrvalue in attr %}{% if attrname in ['placeholder', 'title'] %}{{ attrname }}="{{ attrvalue|trans({}, translation_domain) }}" {% else %}{{ attrname }}="{{ attrvalue }}" {% endif %}{% endfor %}
{% endspaceless %}
{% endblock widget_attributes %} 
```

我在这里所做的就是删除与验证相关的属性：

~~{% if required %} required="required"{% endif %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{ pattern }} “{％ 万一 ％}~~

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-11T13:39:49.273

要使用 formType 类禁用特定字段的正则表达式验证：

```
->add('foo',null,array=>('attr'=>('pattern'=>'/[^~,]/')) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-27T16:32:28.943

使用[表单主题](http://symfony.com/doc/current/book/forms.html#form-theming)：

首先创建表单主题模板，例如app/Resources/views/form/fields.html.twig：

```
{% extends 'form_div_layout.html.twig' %}{# or some other base layout #}

{% block form_start %}
    {% if attr.novalidate is not defined %}
        {% set attr = attr|merge({'novalidate':'novalidate'}) %}
    {% endif %}
    {{ parent() }}
{% endblock %} 
```

然后在模板中使用该表单主题：

```
{% form_theme form with 'form/fields.html.twig' %}

{{ form_start(form) }} <-- now renders with novalidate attribute
...
{{ form_end(form) }} 
```

或者，全局应用主题（app/config/config.yml）：

```
twig:
    form_themes:
        - ':form/fields.html.twig' 
```

# c# - gui不更新

> ID：10142510
> 
> 赞同：1
> 
> 时间：2012-04-13T14:15:58.840
> 
> 标签：c#, wpf, user-interface

我的自助服务终端应用程序遇到了以下问题：

我有一个带有一些缩略图的窗口。当用户单击缩略图时，会显示另一个带有信息的窗口（docview），并在中心显示一个文档。

我想让 docview 立即可见，然后开始加载文档（文档加载需要 1-3 秒），然后将其添加到界面中。

在我单击拇指的那一刻，界面冻结了一两秒钟，然后文档视图已经与文档一起可见..

这就是我所做的：

```
 viewgrid.Children.Add(docView); // the main window uses this grid to display the windows
        viewgrid.InvalidateVisual();
        viewgrid.UpdateLayout(); // at this point I would like to have the docView visible
        docView.showDocument(); //and afterwards, the loading of the document should start and be also visible eventually.. 
```

我尝试使用 LayoutUpdated 事件但没有成功..也将 showDocument 放在单独的线程中也没有帮助..我还阅读了有关 Application.DoEvents() 的信息，但这已被弃用并且似乎是不好的做法..

我应该如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:25:18.243

您可以尝试使用异步绑定。或者使用另一个线程和 Dispatcher 手动完成。但这取决于您的 ShowDocument 正在做什么，而且速度很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:25:46.243

您需要使用 BackgroundWorker 对象来加载文档。你说你尝试过线程，但它没有工作，但你需要让线程工作，我建议你使用后台工作人员。 [http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker(v=vs.110).aspx)

我不确定您正在加载什么类型的文档，但我使用 Binding 加载了 RichText 文件，如下所述： [http ://www.rhyous.com/2011/08/01/loading-a-richtextbox-from-an- rtf-file-using-binding-or-a-richtextfile-control/](http://www.rhyous.com/2011/08/01/loading-a-richtextbox-from-an-rtf-file-using-binding-or-a-richtextfile-control/)

只需将文档加载到 BackgroundWorker 中，您就会执行相同的操作。加载文档后，您将更新绑定属性，并且 UI 将更新。

# jquery - Jquery 我做错了什么？

> ID：10142512
> 
> 赞同：1
> 
> 时间：2012-04-13T14:16:03.007
> 
> 标签：jquery

我想读出列表项的值并将其写入跨度。
所以列表看起来像这样：

*   我的第一个项目 (1)
*   另一个项目 (2)
*   下一项 (3)

*   我的第一项（一）
*   另一项(b)
*   下一项 (c)

但我没有发现错误：

```
<div id="Listgroup">
    <ul id="list1"> 
      <li><a href="" value="1">my first item<span></span></a></li>
      <li><a href="" value="2">another item<span></span></a></li>
      <li><a href="" value="3">next item<span></span></a></li>
    </ul>
<br>
    <ul id="list2"> 
      <li><a href="" value="a">my first item<span></span></a></li>
      <li><a href="" value="b">another item<span></span></a></li>
      <li><a href="" value="c">next item<span></span></a></li>
    </ul>
</div>

<script>
$(function(){
$("li a").each(function(idx, item){
    $("span", "li a[value|=' + $(this).attr('value') + ']")
        .html(" (" + $(this).attr('value') + ")");
});
});
</script> 
```

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:17:03.943

您的引号与字符串引号不匹配，因此将其分类`' + $(this).attr('value') + '`为字符串，而不是`$(this).attr('value')`对象

```
$("span", "li a[value|=" + $(this).attr('value') + "]") 
```

此外，您不需要找到这样的值。你已经知道是什么`this`，所以你可以[`find`](http://api.jquery.com/find/)从`span`那里开始。

此外，锚元素没有`value`属性，使得这个 HTML 无效。您应该将其更改为`data-value`使其符合 HTML5：

```
$(function(){
$("li a").each(function(idx, item){        
    $(this).find("span").html(" (" + $(this).data("value") + ") ");    
});
}); 
```

[**-- 看演示 --**](http://jsfiddle.net/Curt/86Tc6/3/)

# iphone - 使用丢失的 EXIF 标签更正存储在文档中的 UIImage 的方向

> ID：10142518
> 
> 赞同：3
> 
> 时间：2012-04-13T14:16:37.577
> 
> 标签：iphone, ios, ipad, uiimage, uiimageorientation

关于使用 iPad 相机拍摄的 UIImages 的方向，我在 SO 上遇到了与其他人类似的问题。本质上，我正在使用 iPad 上的相机拍摄 UIImage。然后当我显示它时，它已经旋转了 90 度。

通过阅读其他问题和答案，我现在了解到，当相机拍照时，它会存储一个确定照片方向的 EXIF 标签。这通常会允许所有 Mac 和 iOS 应用程序读取此方向数据。但是，我将我的图像作为 NSData 存储在文档目录中（已通过 UIImagePNGRepresentation 转换并将 URL 保存在核心数据中。我假设这样做的过程会导致我丢失方向 EXIF 标记，因此在检索它时显示不正确。

任何人都可以想办法纠正这个问题吗？

欢迎大家提出想法、建议和指点。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:46:31.730

EXIF 是图像文件中的东西，而不是 UIImage。当你用相机拍照时，UIImagePicker 从不将它保存在文件中，因此，还没有 EXIF。

不过，在您的情况下，问题不在于 iPad 的方向。我相信 UIImagePNGRepresentation 总是将它旋转 90 度（不管旋转）。您只需要在生成 PNG 之前旋转它。我不知道它为什么会这样，但你只需要解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:32:08.007

EXIF 元数据在方向上不准确它在 GPS 数据中准确，它只会检测到 90 & 180 & 270 有一些错误情况试试这个

[上传后iOS UIImagePickerController结果图像方向](https://stackoverflow.com/questions/5427656/ios-uiimagepickercontroller-result-image-orientation-after-upload)

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:44:01.563

看看这个库： http: [//vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)他有拍摄图像并删除方向信息的代码通过改造它。

# wpf - 如何检查媒体元素是否为播放文件？

> ID：10142519
> 
> 赞同：1
> 
> 时间：2012-04-13T14:16:40.353
> 
> 标签：wpf, visual-studio-2010, c#-4.0, wpf-controls

我想播放音频或视频文件，我做了这个，但我不知道如何检查媒体元素是否正在播放文件？就像对暂停和播放使用相同的按钮一样，我如何知道媒体也在播放文件？我使用下面的代码来播放文件

```
mediaElement1.LoadedBehavior = MediaState.Manual;
                mediaElement1.Source = new Uri("C:/test.wma", UriKind.RelativeOrAbsolute);
                mediaElement1.Play(); 
```

还有一件事我知道如何通过代码在媒体元素中播放文件。我想设计媒体元素 UI。我如何为视频和音频文件设计这个？应该启用哪些属性，应该禁用哪些属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:31:54.700

最后我检查了你不能，除非你使用 Silverlight：

[http://msdn.microsoft.com/en-us/library/cc189079(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc189079(v=vs.95).aspx)

我有一个使用 .Net 4 的应用程序，据我记得您无法验证它是否正在播放、停止、暂停等。

这是您可以使用 .Net 4 执行的操作：

[http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement(v=vs.100).aspx)

与 Silverlight 相比：

[http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement(v=vs.95).aspx)

# jquery - 结合两个 Jquery 插件：不工作

> ID：10142520
> 
> 赞同：1
> 
> 时间：2012-04-13T14:16:40.760
> 
> 标签：jquery, html, jquery-ui

好的，所以我一直在尝试结合 CarouFredSel 和 jquery 自定义内容滚动器来添加与轮播一起使用的滚动条的图像。我很确定我做错了什么，因为我是 Jquery 的新手（非常非常新）。

这是脚本：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"  type="text/javascript"></script>
   <script src="jquery.easing.1.3.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript" src="jquery.js"></script>
  <script type="text/javascript" language="javascript" src="jquery.mousewheel.js"></script>
<script type="text/javascript" language="javascript" src="jquery.touchwipe.1.1.1.js"></script>
    <script type="text/javascript" language="javascript" src="jquery.carouFredSel-5.5.0-packed.js"></script>

    <script type="text/javascript" language="javascript">
        $(function() {

        $("#foo3").carouFredSel({
            items   : 2,
            auto: {
                duration: 750
                },
            scroll  : {
                items: 1,
                duration: 750,
                mousewheel: true,
                wipe: true,
                pauseOnHover: true,
            onAfter: function() {
  if ( $(this).triggerHandler( "currentPosition" ) == 0 ) {
    $(this).trigger( "pause" );
  }
}},
        }).parent().css("margin", "auto");
        });

    </script> 
```

这是html：

```
<div id="portfolio_gallery">
        <div class="list_carousel">

         <div id="mcs5_container">
<div class="customScrollBox">
<div class="horWrapper">
<div class="container">
<div class="content"> <p><ul id="foo3">
            <li style="width:486px"><img src="Images/SMP-3.jpg" alt="Testing description" /></li>
                <li style="width:486px"><img src="Images/SMP-6.jpg" alt="Text_2" /></li>
                <li style="width:238px"><img src="Images/SMP-4.jpg" alt="Text_6" /></li>
                <li style="width:486px"><img src="Images/SMP-2.jpg" alt="Text_3" /></li>
                  <li style="width:238px"><img src="Images/SMP-5.jpg" alt="new description" /></li>
                <li style="width:486px"><img src="Images/SMP-1.jpg" longdesc="" width="486" height="360" alt="Text_5" /></li>

          </ul>
            </p><div class="clearfix"></div>
    </div>
</div>

</div>
</div>
<div class="dragger_container">
<div class="dragger"></div>
 </div>
</div>
<!-- scroll buttons -->
<a class="scrollUpBtn" href="#"></a> <a class="scrollDownBtn" href="#"></a>
</div>
</div>
<noscript>
<style type="text/css">
     #mcs5_container .customScrollBox{overflow:auto;}
    #mcs5_container .dragger_container{display:none;}
</style>
</noscript>

</div>
<script>
$(window).load(function() {
      $("#mcs5_container").mCustomScrollbar("horizontal",500,"easeOutCirc",1,"fixed","yes","yes",20); 
});
</script>
<script src="jquery.mCustomScrollbar.js" type="text/javascript"></script> 
```

这是我迄今为止完成的工作的链接：http: [//2938.sandbox.i3dthemes.net/index-scroll-w-bar.html](http://2938.sandbox.i3dthemes.net/index-scroll-w-bar.html) - 你可以看到一切正常并且看起来像我想要的那样，但是滑块酒吧不动？

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:25:58.303

您应该先加载 jQuery Core，然后再加载它的 UI 库：

```
<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:26:25.027

您没有按预期顺序引用脚本，因此 jQuery UI 无法正确实例化，并且 mCustomScrollbar 插件不起作用。

![在此处输入图像描述](../Images/d37e53735f495281f9cc495d8024a326.png)

第一个应该是 jQuery，然后是 jQuery UI：

```
<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script>
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:59:35.817

只需更改上面的前 6 行

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"  type="text/javascript"></script>
<script src="jquery.easing.1.3.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="jquery.mousewheel.js"></script>
<script type="text/javascript" language="javascript" src="jquery.touchwipe.1.1.1.js"></script>
<script type="text/javascript" language="javascript" src="jquery.carouFredSel-5.5.0-packed.js"></script> 
```

至以下：

```
<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script src="jquery.easing.1.3.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript" src="jquery.mousewheel.js"></script>
<script type="text/javascript" language="javascript" src="jquery.touchwipe.1.1.1.js"></script>
<script type="text/javascript" language="javascript" src="jquery.carouFredSel-5.5.0-packed.js"></script> 
```

请注意附加脚本文件的顺序；

```
jquery.js
jquery.easing.1.3.js
jquery-ui.min.js
jquery.mousewheel.js
jquery.touchwipe.1.1.1.js
jquery.carouFredSel-5.5.0-packed.js 
```

# jquery - Rails 3.1 nested_form gem 没有响应添加 link_to_add 和 link_to_remove

> ID：10142522
> 
> 赞同：1
> 
> 时间：2012-04-13T14:16:48.450
> 
> 标签：jquery, ruby-on-rails-3.1, model, nested-forms

我想向我的父模型添加和删除模型。一切正常，只是添加和删除按钮不起作用。将鼠标悬停在添加链接时会显示 javascript:void(o)。

下面是我的代码，

**_form.html.erb**

```
<%= nested_form_for @post do |f| %>
<%= f.error_messages %> 
<%= f.fields_for :stops do |task_form| %>
<%= task_form.text_field :address %>
<%= task_form.link_to_remove "Remove this task" %>
<% end %>
<%= f.link_to_add "Add a stop", :stops %></p>
<p><%= f.submit %>
<% end %> 
```

**post.rb**

```
has_many :stops    
accepts_nested_attributes_for :stops, :reject_if => lambda { |a| a[:address].blank? }, :allow_destroy => true 
```

**post_controller**

```
def new
@post = Post.new
@post.stops.new
end 
```

如果有人能帮我欢呼，我会很感激

# php - 为什么这个 MySQL 查询会减慢我的代码速度

> ID：10142523
> 
> 赞同：1
> 
> 时间：2012-04-13T14:16:59.340
> 
> 标签：php, mysql, query-optimization

目前我有一个在 PHP 中运行的 MySQL 查询，在查看结果时我更新了原始表，但是一个包含 500 行的简单表需要 30 秒才能完成：

```
$sqlquery = mysql_query('SELECT id, special_data FROM stats_visits WHERE processed = 0');
while($row = mysql_fetch_assoc($sqlquery)){ 
    $stat_id = $row['id'];
    // Make use of special_data field for some operations
    mysql_query('UPDATE stats_visits SET processed = 1 WHERE id = ' . $stat_id);
} 
```

是因为我正在更新我从中选择的表吗？我已经通过执行以下操作解决了这个问题，但是因为该表将来可能有数千条记录，所以我不确定 IN 的支持情况如何：

```
$statids = array();

$sqlquery = mysql_query('SELECT id, special_data FROM stats_visits WHERE processed = 0');
while($row = mysql_fetch_assoc($sqlquery)){ 
    $statids[] = $row['id'];
    // Make use of special_data field for some operations
}

mysql_query('UPDATE stats_visits SET processed = 1 WHERE id IN(' . implode(',', $statids) . ')'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T14:19:41.473

如果您只想将所有记录更新为`processed = 1`为什么不使用单个查询来解决它？：

```
UPDATE `stats_visits` SET `processed` = 1 WHERE `processed` = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:20:21.880

在第一个版本中，每次更新都会访问一次数据库。这通常是个坏主意。第二个版本是访问数据库一次。

如果您担心这将如何在未来发挥作用，也许可以创建一个混合体。将更新分成 100 个组，并以块的形式更新它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:39:16.120

最简单的方法是将所有需要更新的 id 存储为一个数组，然后使用`IN`运算符将​​它们内爆到查询中。

例如

```
$processedArray= array();
while($row = mysql_fetch_assoc($sqlquery)){ 
    $stat_id = $row['id'];
    //Your processing goes here
    $processedArray[] = $stat_id; //Store an id if it needs updating as processed
}

mysql_query('UPDATE stats_visits SET processed = 1 WHERE id IN ('.implode(',', $processedArray).')'); 
```

# javascript - 禁用右键单击上下文菜单 - 仍然在 Chrome 的标题栏上显示

> ID：10142525
> 
> 赞同：0
> 
> 时间：2012-04-13T14:17:08.980
> 
> 标签：javascript, google-chrome, right-click, titlebar

我试图避免用户使用后退按钮，它到目前为止非常好，直到我尝试获取上下文菜单，右键单击 Chrome 的标题栏我已经看到其他页面没有相同的选项我做。

我使用了这段代码：

 `````
 < script type="text/javascript">
        function disableBackButton() {
            window.history.forward(1);
        }
        setTimeout("disableBackButton()", 0);
        window.oncontextmenu = function() { return false }

    </ script>

< script type="text/javascript">

    if (typeof window.event != 'undefined')
        document.onkeydown = function() {
            if (event.srcElement.tagName.toUpperCase() != 'INPUT')
                return (event.keyCode != 8);
        }
    else
        document.onkeypress = function(e) {
            if (e.target.nodeName.toUpperCase() != 'INPUT')
                return false;
        }

</ script>

< script type="text/javascript">
    document.onkeydown = chkEvent
    var formInUse = false;

    function chkEvent(e) {
        var keycode;
        if (window.event) keycode = window.event.keyCode; //*** for IE ***//
        else if (e) keycode = e.which; //*** for Firefox ***//
        if (keycode == 8) {
            return false;
        }
    }
</ script>    
< body onload="disableBackButton();"  > 
````  `在我看来，没什么可做的，那是操作系统的领域，但如果有人知道这一点，值得一试

亲切的问候

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:45:41.257

您绝对不能也绝不能在您的网页沙箱之外做任何事情。即使您不小心在某些浏览器中找到了这样做的方法，也不要依赖它，因为它会被视为巨大的安全风险，并会被开发人员及时修补或减少为一些隐藏标志激活的组合。放弃这个想法，因为它完全违背了浏览器的沙盒环境试图完成的任务，因此它不适用于任何公共项目。``

# perl - 如何在 Perl 中执行自省？

> ID：10142530
> 
> 赞同：4
> 
> 时间：2012-04-13T14:17:29.437
> 
> 标签：perl, oop

在 Perl OOP 中，如何转储此类及其父类中的所有方法/字段。

```
my ($self) = @_; 
```

我看到了很多上面的构造函数。那么，什么是`@_`？

我有 Java / OOP 背景。如果您的解释可以遵循Java领域，我会更容易理解。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T14:23:09.303

1.  是什么`@_`？见[perldoc -v @_](http://perldoc.perl.org/perlvar.html#%40_)

2.  [perldoc perlobj](http://perldoc.perl.org/perlobj.html)

[mjd 有一篇关于 Perl 内省的有趣文章](http://blog.plover.com/prog/perl/Help.pm.html)。

此外，[如何在 Perl 中列出给定对象或包的可用方法？](https://stackoverflow.com/questions/910430/how-do-i-list-available-methods-on-a-given-object-or-package-in-perl)回答你的部分问题。

我对该问题的首选答案使用[Class::Inspector](http://search.cpan.org/perldoc/Class::Inspector)：

```
#!/usr/bin/env perl

use strict; use warnings;

use Class::Inspector;
use HTML::TokeParser::Simple;

my $methods = Class::Inspector->methods(
    'HTML::TokeParser::Simple', 'full', 'public'
);

print "Methods:\n";
print "$_\n" for @$methods;

print "Superclasses\n";
use Class::ISA;
print join(", ", Class::ISA::super_path('HTML::TokeParser::Simple')), "\n"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T15:08:23.757

Data::Printer 是一种快速获取当前类中可用方法列表的方法：

```
#!/usr/bin/env perl

use strict;
use warnings;
use DateTime;
use Data::Printer;

p( DateTime->now ); 
```

这将打印如下内容：

```
DateTime  {
    public methods (134) : add, add_duration, am_or_pm, bootstrap, ce_year, christian_era, clone, compare, compare_ignore_floating, date, datetime, day, day_abbr, day_name, day_of_month, day_of_month_0, day_of_quarter, day_of_quarter_0, day_of_week, day_of_week_0, day_of_year, day_of_year_0, day_0, DefaultLanguage, DefaultLocale, delta_days, delta_md, delta_ms, dmy, doq, doq_0, dow, dow_0, doy, doy_0, duration_class, epoch, era, era_abbr, era_name, format_cldr, formatter, fractional_second, from_day_of_year, from_epoch, from_object, hires_epoch, hms, hour, hour_1, hour_12, hour_12_0, INFINITY, is_dst, is_finite, is_infinite, is_leap_year, iso8601, jd, language, last_day_of_month, leap_seconds, local_day_of_week, local_rd_as_seconds, local_rd_values, locale, MAX_NANOSECONDS, mday, mday_0, mdy, microsecond, millisecond, min, minute, mjd, mon, mon_0, month, month_abbr, month_name, month_0, NAN, nanosecond, NEG_INFINITY, new, now, offset, quarter, quarter_abbr, quarter_name, quarter_0, sec, second, SECONDS_PER_DAY, secular_era, set, set_day, set_formatter, set_hour, set_locale, set_minute, set_month, set_nanosecond, set_second, set_time_zone, set_year, STORABLE_freeze, STORABLE_thaw, strftime, subtract, subtract_datetime, subtract_datetime_absolute, subtract_duration, time, time_zone, time_zone_long_name, time_zone_short_name, today, truncate, utc_rd_as_seconds, utc_rd_values, utc_year, wday, wday_0, week, week_number, week_of_month, week_year, weekday_of_month, year, year_with_christian_era, year_with_era, year_with_secular_era, ymd
    private methods (38) : _accumulated_leap_seconds, _add_overload, _adjust_for_positive_difference, _calc_local_components, _calc_local_rd, _calc_utc_components, _calc_utc_rd, _cldr_pattern, _compare, _compare_overload, _day_has_leap_second, _day_length, _era_index, _format_nanosecs, _handle_offset_modifier, _is_leap_year, _month_length, _new, _new_from_self, _normalize_leap_seconds, _normalize_nanoseconds, _normalize_seconds, _normalize_tai_seconds, _offset_for_local_datetime, _rd2ymd, _seconds_as_components, _space_padded_string, _string_compare_overload, _string_equals_overload, _string_not_equals_overload, _stringify, _subtract_overload, _time_as_seconds, _utc_hms, _utc_ymd, _weeks_in_year, _ymd2rd, _zero_padded_number 
    internals: {
        formatter   undef,
        local_c   {   
            day     13, 
            day_of_quarter   13, 
            day_of_week   5,  
            day_of_year   104,
            hour    15, 
            minute   5,  
            month   4,  
            quarter   2,  
            second   16, 
            year    2012
        },  
        local_rd_days   734606,
        local_rd_secs   54316,
        locale   DateTime::Locale::en_US,
        offset_modifier   0,  
        rd_nanosecs   0,  
        tz       DateTime::TimeZone::UTC,
        utc_rd_days   734606,
        utc_rd_secs   54316,
        utc_year   2013
    }   
} 
```

# ruby-on-rails - 如何将其他信息传递到 ActionMailer 以处理传入消息？

> ID：10142531
> 
> 赞同：0
> 
> 时间：2012-04-13T14:17:32.083
> 
> 标签：ruby-on-rails, email, imap

我有一个检查多个电子邮件帐户的应用程序（想想 Webmail）。因为我要检索多个帐户，所以我需要将入站电子邮件与用户的帐户相关联。但是，我似乎无法找到一种方法来做到这一点。

如果我将选项哈希中的 user_id 传递给 Fetcher，据我所知，它会将其创建为属性。但是，我不清楚如何修改获取的消息以使其对 ActionMailer 感到满意。如果我向“receive”方法添加一个参数，则会失败并显示“参数数量错误”的消息。

如果我尝试修改检索到的消息，则会收到“参数数量错误”的错误。而且，因为 ActionMailer 并不是一个真正的完整类，所以我不能简单地用正确的数据初始化它。

关于如何传递这些信息的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:29:55.157

我会回答这个问题，因为我讨厌找不到答案。

我将 ActionMailer 包装在另一个类中。这个新类采用了额外的属性并处理了它们。这就是我解决这个问题的方法。

# c++ - C++ 循环展开性能

> ID：10142535
> 
> 赞同：4
> 
> 时间：2012-04-13T14:17:38.560
> 
> 标签：c++, performance, templates

我正在阅读“C++ 模板完整指南”一书，这是关于元编程的一部分。有一个循环展开的例子（17.7）。我已经实现了点积计算程序：

```
#include <iostream>
#include <sys/time.h>

using namespace std;

template<int DIM, typename T>
struct Functor
{
    static T dot_product(T *a, T *b)
    {
        return *a * *b + Functor<DIM - 1, T>::dot_product(a + 1, b + 1);
    }
};

template<typename T>
struct Functor<1, T>
{
    static T dot_product(T *a, T *b)
    {
        return *a * *b;
    }
};

template<int DIM, typename T>
T dot_product(T *a, T *b)
{
    return Functor<DIM, T>::dot_product(a, b);
}

double dot_product(int DIM, double *a, double *b)
{
    double res = 0;
    for (int i = 0; i < DIM; ++i)
    {
        res += a[i] * b[i];
    }
    return res;
}

int main(int argc, const char * argv[])
{
    static const int DIM = 100;

    double a[DIM];
    double b[DIM];

    for (int i = 0; i < DIM; ++i)
    {
        a[i] = i;
        b[i] = i;
    }

    {
        timeval startTime;
        gettimeofday(&startTime, 0);

        for (int i = 0; i < 100000; ++i)
        {
            double res = dot_product<DIM>(a, b); 
            //double res = dot_product(DIM, a, b);
        }

        timeval endTime;
        gettimeofday(&endTime, 0);

        double tS = startTime.tv_sec * 1000000 + startTime.tv_usec;
        double tE = endTime.tv_sec   * 1000000 + endTime.tv_usec;

        cout << "template time: " << tE - tS << endl;
    }

    {
        timeval startTime;
        gettimeofday(&startTime, 0);

        for (int i = 0; i < 100000; ++i)
        {
            double res = dot_product(DIM, a, b);
        }

        timeval endTime;
        gettimeofday(&endTime, 0);

        double tS = startTime.tv_sec * 1000000 + startTime.tv_usec;
        double tE = endTime.tv_sec   * 1000000 + endTime.tv_usec;

        cout << "loop time: " << tE - tS << endl;
    }

    return 0;
} 
```

我正在使用 xcode，我关闭了所有代码优化。根据本书，我希望模板版本必须比简单循环更快。但结果是（t - 模板，l = 循环）：

DIM 5：t = ~5000，l = ~3500

DIM 50：t = ~55000，l = 16000

DIM 100：t = 130000，l = 36000

我还尝试使模板函数内联而没有性能差异。

为什么简单循环这么快？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T14:22:20.240

根据编译器的不同，如果您不打开性能优化，可能不会发生循环展开。

原因很容易理解：您的递归模板实例化基本上是在创建一系列函数。编译器无法将所有这些都变成内联的展开循环，并且仍然保持可用的合理调试信息。假设在您的某个函数中某处发生了段错误，或者抛出了异常？您不想获得显示每一帧的堆栈跟踪吗？编译器认为您可能想要这样，除非您打开优化，这使您的编译器可以访问您的代码。

# iphone - IOS facebook集成like按钮

> ID：10142536
> 
> 赞同：2
> 
> 时间：2012-04-13T14:17:44.270
> 
> 标签：iphone, facebook, ios5, facebook-like

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"hello", @"name",
                                   @"This post has been liked.", @"caption",
                                   Post, @"description",
                                   @"http://www.abc.com/", @"link",
                                   @"http://www.freeimagehosting.net/newuploads/49ncw.png", @"picture",
                                   actionLinksStr, @"actions",
                                   nil];

    [facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

该帖子已成功发布在我的墙上，但我希望它在发布的同时被点赞。这将增加点赞数。请帮忙

# java - 在 scala.swing 中添加 WindowStateListener

> ID：10142538
> 
> 赞同：2
> 
> 时间：2012-04-13T14:17:47.653
> 
> 标签：java, swing, scala

如何`WindowStateListener`在 scala.swing 中为 MainFrame 的反应添加一个？

中的所有课程`scala.swing.event`似乎都不合适？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T15:55:47.327

这在开箱即用的情况下是不可能`scala.swing`的（我只是确定了 2.9.1 的源代码`WindowStateListener`），但是很容易自己动手：

```
import swing._

case class WindowStateChanged(
  override val source: Window,
  oldState: Int,
  newState: Int
) extends event.WindowEvent(source)

trait StateListeningWindow extends Window { outer =>
  this.peer.addWindowStateListener(new java.awt.event.WindowStateListener {
    def windowStateChanged(e: java.awt.event.WindowEvent) {
      publish(WindowStateChanged(outer, e.getOldState, e.getNewState))
    }
  })
} 
```

现在只需混合`StateListeningWindow`：

```
object WindowStateDemo extends SimpleSwingApplication {
  def top = new MainFrame with StateListeningWindow {
    import java.awt.Frame._
    reactions += {
      case WindowStateChanged(_, _, ICONIFIED) => // Do something.
      case WindowStateChanged(_, oldState, newState) => // Something else.
    }
  }
} 
```

您还可以轻松地将常量包装成`java.awt.Frame`更惯用的东西。

# javascript - Google Maps JavaScript：未捕获的错误：属性值无效: [object Object]

> ID：10142541
> 
> 赞同：2
> 
> 时间：2012-04-13T14:18:09.043
> 
> 标签：javascript, google-maps-api-3, extjs, sencha-touch-2

我正在尝试使用谷歌地图。我已将地图加载到面板上。

我有一个覆盖窗口，在其中我要求在地图上显示方向的来源和目的地。我通过以下方式获得对地图的引用`Ext.getCmp('GMap');`

但是，当我在 chrome 上运行它并检查控制台窗口时，我得到了这个错误。

*`Uncaught Error: Invalid value for property <map>: [object Object]`*

**覆盖窗口点击处理程序的示例代码片段**

```
listeners : {
   tap : function() {
      function showDirections(res) {
         var directionsService = new google.maps.DirectionsService();
         var directionsDisplay = new google.maps.DirectionsRenderer();

         var map = Ext.getCmp('GMap');
         directionsDisplay.setMap(map);
         directionsService.route(request, function(response, status) {
         if (status == google.maps.DirectionsStatus.OK) {
              directionsDisplay.setDirections(response);
         }
    });
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T19:41:52.580

jQuery 也这样做。当您抓取 $("#GMap") 时，您将返回一个真正元素为 [0] 的数组。将结果填充为`getCmp()`实际的 dom 元素。 [http://www.sencha.com/forum/showthread.php?122684-accessing-component-property-from-variable-dom-element-or-Ext.getCmp](http://www.sencha.com/forum/showthread.php?122684-accessing-component-property-from-variable-dom-element-or-Ext.getCmp) () 似乎类似。

# python - 如何让 pyodbc 从旧的 MS Access 数据库返回正确的值

> ID：10142543
> 
> 赞同：1
> 
> 时间：2012-04-13T14:18:12.053
> 
> 标签：python, ms-access, ubuntu, pyodbc

我正在运行 64 位 Ubuntu 11.0、64 位 python 2.7.2 和 pyodbc 3.0.3。

我正在尝试从驻留在网络 Windows 机器上的旧访问数据库（我认为它是 97 但不是 100% 确定）中检索数据。

我运行以下选择，并显示结果：

```
select id, firstname, lastname from customer where id < 5 
```

*（id 是“Counter”类型，名字和姓氏是 varchar）*

**来自python，Ubuntu上的pyodbc（这里有问题）**：

```
(16973874, 'Candance\x00\x00', 'Mattingly\x00\x00')
(16973875, 'Anthony & Ana Marie\x00\x00', 'Cushing\x00&')
(16973876, 'Sharon\x00\x00', 'Brown\x00\x00') 
```

**来自 Ubuntu 上的 isql（良好的结果）（稍微重新格式化）**：

```
| 2 | Candance             | Mattingly  |
| 3 | Anthony & Ana Marie  | Cushing    |
| 4 | Sharon               | Brown 
```

**从 python，pyodbc on Windows 7, 64bit (good results)**：

```
(2, u'Candance', u'Mattingly')
(3, u'Anthony & Ana Marie', u'Cushing')
(4, u'Sharon', u'Brown') 
```

* * *

我的 odbc.ini 看起来与此类似：

```
[MSACCESS]
Description             = Old MS Access Database 
Driver                  = /usr/lib/libmdbodbc.so.0
Database                = [path to mounted drive].mdb 
```

***基本上，pyodbc 在 Ubuntu 上返回不正确的结果（或错误地解释它们）。我很感激任何有用的建议来解决这个问题。***

*   我尝试了许多添加“client charset = XXX”的变体，但它们似乎没有任何效果。
*   请注意，从 Ubuntu 上的 pyodbc 中，返回的“id”列太高了 16973872，并且 varchar 列似乎以半随机字节结尾（许多不是 \x00）

# glsl - GLSL Shader - 具有透明度的阴影（玻璃板效果）

> ID：10142552
> 
> 赞同：0
> 
> 时间：2012-04-13T14:18:26.547
> 
> 标签：glsl, opengl-es-2.0, fragment-shader, vertex-shader

我已经创建了一个着色器，它能够将图像旋转大约 180° 并用黑色渐变覆盖它，但现在我想创建真正的透明度而不是使用黑色作为我的背景颜色。

这是我到目前为止得到的：

```
// Vertex Shader
uniform highp mat4 u_modelViewMatrix;
uniform highp mat4 u_projectionMatrix;
attribute highp vec4 a_position;
attribute lowp vec4 a_color;
attribute highp vec2 a_texcoord;
varying lowp vec4 v_color;
varying highp vec2 v_texCoord;
uniform int offset;
uniform int space;
uniform int vph;
void main()
{\
highp float h = float(offset)/float(vph);
highp float s = float(space)/1000.0;
highp vec4 pos = a_position;
pos.y = pos.y - (h + s);
gl_Position = (u_projectionMatrix * u_modelViewMatrix) * pos;
    v_color = a_color;
v_texCoord = vec2(a_texcoord.x, 1.0 - a_texcoord.y);
}

// Fragment Shader
varying highp vec2 v_texCoord;
uniform sampler2D u_texture0;
uniform int gradient;
void main()
{
  lowp vec3 w = vec3(1.0,1.0,1.0);
  lowp vec3 b = vec3(0.0,0.0,0.0);
  lowp vec3 mix = mix(b, w, (v_texCoord.y-(float(gradient)/10.0)));
  gl_FragColor = texture2D(u_texture0,v_texCoord) * vec4(mix, 1.0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:05:44.133

在片段着色器中用半透明颜色替换黑色：

```
void main()
{
  lowp vec4 w = vec3(1.0,1.0,1.0,1.0);
  lowp vec4 b = vec3(0.0,0.0,0.0,0.0);
  lowp vec4 mix = mix(b, w, (v_texCoord.y-(float(gradient)/10.0)));
  gl_FragColor = texture2D(u_texture0,v_texCoord) * mix;
} 
```

# jquery - 使用 IE9 滞后在画布上绘制线条

> ID：10142557
> 
> 赞同：1
> 
> 时间：2012-04-13T14:18:44.130
> 
> 标签：jquery, html, internet-explorer, canvas, jcanvas

我最近尝试使用画布创建一个简单的画家。我使用 mousedown 来捕获起点。在 mousemove 上，我从起点到当前点画了一条线，并用当前点替换了起点。最后我删除了 mouseup 上的事件处理程序。这个解决方案在 Chrome、Firefox 和 safari 上运行良好，但是当我在 IE9 上测试它时，我遇到了一个烦人的错误。我绘制的线条仅在 mouseup 事件之后出现。关于为什么会发生这种情况以及我应该如何解决它的任何想法？

我添加了一个简单的测试页面来演示这个问题 [http://kfirg.com/rage/main.htm](http://kfirg.com/rage/main.htm) 尝试画一条长线，或者一个圆圈或类似的东西。在 chrome 上它可以完美运行，但在 IE9 上它会像疯了一样滞后。

注意：我使用 jQuery 和 jCanvas 来制作这个简单的画家。我也尝试直接使用canvas api自己实现它，我遇到了同样的问题。

更新了 jsFiddle：http: [//jsfiddle.net/t5QpN/1/](http://jsfiddle.net/t5QpN/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:39:25.217

实际上，您的错误比 IE 中的错误多。根据我的测试，线条是零星地画出来的。

[我做了一个 jsFiddle 来测试](http://jsfiddle.net/t5QpN/)。

我没有答案，只有想法。我从来没有用过这样的铅笔画类型的画布应用程序，当鼠标按下时我已经完成了轮询。很明显，如果您查看控制台，您的绘图代码正在 IE 中按预期运行。鼠标移动必须尽可能多地射击。

那么这笔交易可能是什么。我在想两件事之一

1.  IE 忙于线程中的其他内容，无法在鼠标启动之前绘制画布
2.  （相关1）也许你画得太频繁了，超载了

如果这两个中的任何一个是正确的，我认为您需要切换到每 X 毫秒轮询一次鼠标的位置。它不会给你带来流畅的线条，但你可以调整 X 直到它看起来不错。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:23:06.737

我认为您的代码对于 mousemove 事件来说很重：

```
 var fncMouseMoveHandler = function (e) {
        console.log('Move!', 'e', { x: e.offsetX, y: e.offsetY }, 'prev', prev);
        $main_canvas.drawLine({
            strokeStyle: settings.color,
            strokeWidth: 2,
            strokeCap: "round",
            strokeJoin: "miter",
            x1: prev.x,
            y1: prev.y,
            x2: e.offsetX,
            y2: e.offsetY
        });
        prev = { x: e.offsetX, y: e.offsetY };
    } 
```

您正在使用 API，应用样式并计算不需要的东西。绘图代码应该很简单：你得到坐标，然后用：

```
context.lineTo(x, y);
context.stroke(); 
```

笔画的样式不应在 mousemove 事件中定义，画布会记住设置。

Opera 开发中心提供了一个很棒的教程：[http ://dev.opera.com/articles/view/html5-canvas-painting/](http://dev.opera.com/articles/view/html5-canvas-painting/)

# c# - 在本地和远程运行相同的应用程序的不同结果 - Windows 应用程序

> ID：10142577
> 
> 赞同：3
> 
> 时间：2012-04-13T14:20:02.473
> 
> 标签：c#, winforms, visual-studio-2010, windows-server-2008

我的应用程序发生了一些奇怪的事情。当我在本地运行它时，我得到的结果应该是正常的十进制数。但是当我从服务器运行相同的应用程序时，十进制数除以 100。我使用相同的代码，部署相同的应用程序，我想知道为什么会这样。欢迎任何建议。提前致谢， Laziale

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:22:22.707

显然，您的服务器正在使用不同的语言环境运行。

每当您从字符串转换为十进制时，语言环境 (CultureInfo) 都很重要。

例如，`ConvertToDecimal("1.00")`可以给出`1`或`100`取决于`.`是设置为小数分隔符还是千位分隔符。

为防止这种情况，请始终使用`ConvertToDecimal("1.00", someCulturInfo)`.

当字符串在用户语言环境中定义时，您只能依赖默认值。

# prolog - 序言代码中的类型不匹配

> ID：10142581
> 
> 赞同：0
> 
> 时间：2012-04-13T14:20:16.513
> 
> 标签：prolog

我写了如下规则：

```
rule_1561_cctype([],_,_,_).
rule_1561_cctype([X1|Y1],[Ru1|Ru1T],[Ru2|Ru2T],[Ru3|Ru3T]):-
    X1 is 0 -> Ru1 in {2,3,4}, Ru2 in {-1}, Ru3 in {-1}
    ;X1 is 1 -> Ru1 in {2,3,4}, Ru2 in {2,3,4}, Ru3 in {-1}
  ;X1 is 2 -> Ru1 in {2}, Ru2 in {2}, Ru3 in {2}
  ;rule_1561_cctype(Y1,Ru1,Ru2,Ru3),!. 
```

我将这条规则称为如下：

```
rule_1561_cctype(CctypeInt, Ru1, Ru2,Ru3), 
```

其中 CctypeInt 是整数列表。

但我在下面收到错误：

```
 935      9 Call: rule_1561_cctype(dom(0..2),dom({-1}\/(2..4)),dom({-1}\/(2..4)),dom({-1}\/(2..4))) ? 
! Type error in argument 2 of = /2
! integer expected, but [] found
! goal:  _310957=[]
      935      9 Exception: rule_1561_cctype(dom(0..2),dom({-1}\/(2..4)),dom({-1}\/(2..4)),dom({-1}\/(2..4))) ? 
```

我在某个地方错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:39:21.860

你在做约束逻辑编程，对吧？问题是 Prolog 尝试将范围在数字上的约束变量与空列表统一并报告错误。

查看您的代码，我认为对 rule_1561_cctype(Y1,Ru1,Ru2,Ru3) 的调用应该是 rule_1561_cctype(Y1,Ru1T,Ru2T,Ru3T)。

# mysql - MySQL 错误：“where 子句”中的未知列

> ID：10142583
> 
> 赞同：15
> 
> 时间：2012-04-13T14:20:21.677
> 
> 标签：mysql, sql, select

我有一个名为`bank`三列的表：`uid`, `nick`, `balance`.

我正在尝试创建一个查询，该查询将根据尼克返回余额，`Unknown column 'Alex' in 'where clause'`当我使用此查询时出现错误：

```
SELECT b.balance FROM bank AS b WHERE b.nick=`Alex` LIMIT 1 
```

谁能看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-13T14:22:27.727

反引号 (`) 用于标识符，如表名、列名等。单引号 (') 用于字符串文字。

你想做：

```
SELECT b.balance FROM bank AS b WHERE b.nick='Alex' LIMIT 1 
```

或者，更明确地说：

```
SELECT `b`.`balance` FROM `bank` AS b WHERE `b`.`nick`='Alex' LIMIT 1 
```

如果没有歧义，并且表/列名称没有特殊字符或空格，则可以将 ` 关闭。

这是一些枯燥且难以阅读的文档：http: [//dev.mysql.com/doc/refman/5.0/en/identifiers.html](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)

但这里有一个更容易阅读的关于 dba.stackoverflow 的相关问题：[https ://dba.stackexchange.com/questions/23129/benefits-of-using-backtick-in-mysql-queries](https://dba.stackexchange.com/questions/23129/benefits-of-using-backtick-in-mysql-queries)

这是一个非常好的页面，我建议大家阅读：[http ://www.sitepoint.com/forums/showthread.php?408497-the-big-bad-thread-of-quot-MySQL-Best-Practices-and -其他有用的信息-quot](http://www.sitepoint.com/forums/showthread.php?408497-the-big-bad-thread-of-quot-MySQL-Best-Practices-and-Other-Useful-Information-quot)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T14:22:15.170

您使用了错误的“`”

使用 ' 代替

```
SELECT b.balance FROM bank AS b WHERE b.nick='Alex' LIMIT 1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-13T14:22:09.197

您需要使用单引号 ( `'`)，而不是字段值的刻度线

```
SELECT b.balance FROM bank AS b WHERE b.nick='Alex' LIMIT 1 
```

刻度线用于表示字段名称。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2017-10-26T10:47:53.410

这种错误的另一个原因是，给定表*中没有这样的列*。检查拼写、字母大小写、印刷错误以及表定义中给定字段的实际存在。

# wpf - WPF 文本框样式抛出 InvalidOperationException

> ID：10142589
> 
> 赞同：2
> 
> 时间：2012-04-13T14:20:37.797
> 
> 标签：wpf, xaml, styles

当应用它的文本框进入禁用状态时，以下样式会导致异常“在 'System.Windows.Controls.Grid' 的名称范围内找不到'ContentElement' 名称”。我在犯规的地方添加了评论。知道如何纠正这个问题而不只是将其注释掉吗？

```
<Style x:Key="ThemedTextBox" TargetType="{x:Type TextBox}">
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Background" Value="#FFFFFFFF"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="Padding" Value="-1"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBox}">
                    <Grid x:Name="RootElement">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="00:00:00.1" To="MouseOver"/>
                                    <VisualTransition GeneratedDuration="00:00:00.1" To="ReadOnly"/>
                                    <VisualTransition GeneratedDuration="00:00:00.1" To="Disabled"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="MouseOverState" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <!--DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="DisabledState" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
    <!--************** This is where the problem is **************-->
                                <ColorAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="ContentElement" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)">
                                            <SplineColorKeyFrame KeyTime="00:00:00" Value="#FF808080"/>
                                        </ColorAnimationUsingKeyFrames-->
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="ReadOnly">
                                    <Storyboard/>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="MouseOverState" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused">
                                    <Storyboard/>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid Margin="0,0,0,0" x:Name="NormalState">
                            <Rectangle HorizontalAlignment="Stretch" Margin="0,0,0,0" VerticalAlignment="Stretch" RadiusX="0" RadiusY="0" Fill="{StaticResource GlossyBlack_TextBoxBackgroundGradient}">
                            </Rectangle>
                            <Rectangle HorizontalAlignment="Stretch" Margin="0,0,0,0" VerticalAlignment="Stretch" RadiusX="0" RadiusY="0" Stroke="{StaticResource GlossyBlack_TextBoxStroke}">
                            </Rectangle>
                            <Rectangle HorizontalAlignment="Stretch" Margin="0,0,0,0" VerticalAlignment="Stretch" RadiusX="0" RadiusY="0" Height="Auto" Fill="{StaticResource GlossyBlack_TextBoxHighlightGradient}"/>

                        </Grid>
                        <Grid Margin="0,0,0,0" x:Name="MouseOverState" Opacity="0">
                            <Rectangle HorizontalAlignment="Stretch" Margin="0,0,0,0" VerticalAlignment="Stretch" RadiusX="0" RadiusY="0" Fill="{StaticResource GlossyBlack_TextBoxBackgroundGradient}"/>
                            <Rectangle HorizontalAlignment="Stretch" Margin="0,0,0,0" VerticalAlignment="Stretch" RadiusX="0" RadiusY="0" Stroke="{StaticResource GlossyBlack_TextBoxStroke}"/>
                            <Rectangle HorizontalAlignment="Stretch" Margin="0,0,0,0" VerticalAlignment="Stretch" RadiusX="0" RadiusY="0" Height="Auto" Fill="{StaticResource GlossyBlack_TextBoxMouseOverHighlight}"/>

                        </Grid>
                        <Grid Margin="0,0,0,0" x:Name="DisabledState" Opacity="0">
                            <Rectangle HorizontalAlignment="Stretch" Margin="0,0,0,0" VerticalAlignment="Stretch" RadiusX="0" RadiusY="0" Fill="{StaticResource GlossyBlack_TextBoxDisabledBackground}"/>
                            <Rectangle HorizontalAlignment="Stretch" Margin="0,0,0,0" VerticalAlignment="Stretch" RadiusX="0" RadiusY="0" Stroke="{StaticResource GlossyBlack_TextBoxStroke}"/>

                        </Grid>

                        <ScrollViewer BorderThickness="0" IsTabStop="False" Padding="{TemplateBinding Padding}" Margin="4,4,4,4" x:Name="PART_ContentHost" BorderBrush="{x:Null}" Foreground="#FFFFFFFF"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:25:44.823

我认为您根本不需要指定目标，将其删除，事情应该开始起作用

```
Storyboard.TargetName="ContentElement" 
```

它看起来像一个简单的复制/粘贴错误。但以防万一，您不必在自己的样式触发器上指定目标（仅当它在模板触发器中并且您正在操作模板中的各种元素，或者动画在您的样式之外声明，并且您必须引用一个元素...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:36:51.487

我假设提供 ColorAnimationUsingKeyFrames 的目的是在框从启用变为禁用时执行一些彩色动画。

但是，控制背景网格不透明度的 DoubleAnimationUsingKeyFrames 已经完成了这项工作，因此我认为您不需要包含 ColorAnimationUsingKeyFrames。

As others have said, your immediate problem is exactly what the error message says: the ControlTemplate does not have an element called "ContentElement" in it. Your best bet will be just to remove the whole of the ColorAnimationUsingKeyFrames I think.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T15:15:45.507

是你的TextBox的名称“ContentElement”，如果不是，应该是。

如果您查看文档中的示例...

[http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.targetname.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.targetname.aspx)

...然后您将看到必须为 Storyboard.TargetName 指定 XAML 中有效项目的名称。

# nutch - Nutch 原始 Html 保存

> ID：10142592
> 
> 赞同：2
> 
> 时间：2012-04-13T14:20:51.460
> 
> 标签：nutch

我正在尝试获取不同文件中已爬网页面的原始 html，命名为页面的 url。**Nutch**是否可以通过排除索引部分来将原始 html 页面保存在不同的文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T02:06:55.063

没有直接的方法可以做到这一点。您将不得不做一些代码修改。看到[这个](https://stackoverflow.com/questions/10007178/how-do-i-save-the-origin-html-file-with-apache-nutch/10060160#10060160)和[这个](https://stackoverflow.com/questions/5123757/how-to-get-the-html-content-from-nutch)。

# c# - 基本继承错误，哪些参数？

> ID：10142593
> 
> 赞同：2
> 
> 时间：2012-04-13T14:20:55.103
> 
> 标签：c#, inheritance

我需要将事件的继承创建为 SwimmingEvent 但是我收到构造函数不包含 0 个参数的错误，问题是我不知道要传递哪些参数。任何帮助将不胜感激。

```
//Base Class
class Event
 {
    private string m_evName;
    private string m_evDate;
    private string m_evTime;
    private string m_evFee;
    private string m_evVenue;

    private List<Athlete> m_athletes;

    public String EvName { get { return m_evName; } }
    public String EvDate { get { return m_evDate; } }
    public String EvTime { get { return m_evTime; } }
    public String EvFee { get { return m_evFee; } }
    public String Venue { get { return m_evVenue; } }

    //Getters/Setters - Making private variables avilable in public space through class method
    public Event(String EvName, String EvDate, String EvTime, String EvFee, String EvVenue)
    {
        m_evName = EvName;
        m_evDate = EvDate;
        m_evTime = EvTime;
        m_evFee = EvFee;
        m_evVenue = EvVenue;

        m_athletes = new List<Athlete>();
    }
 } 

   //child class
  class SwimmingEvent : Event
   {
    private String m_distance;
    private String m_inOutVar;

    public SwimmingEvent(String Distance, String InOrOut)
    {
        m_distance = Distance;
        m_inOutVar = InOrOut;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T14:24:16.950

由于`SwimmingEvent` *is an* `Event`，您需要将传递给 的构造函数的所有参数传递给 的`Event`构造函数`SwimmingEvent`，然后是一些：

```
public SwimmingEvent(String EvName, String EvDate, String EvTime, String EvFee, String EvVenue, String Distance, String InOrOut)
:   base (EvName, EvTime, EvFee, EvVenue, Distance) {
    m_distance = Distance;
    m_inOutVar = InOrOut;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:23:59.977

```
using System;
public class MyBase
{
   int num;

   public MyBase(int i )
   {
      num = i;
      Console.WriteLine("in MyBase(int i)");
   }

   public int GetNum()
   {
      return num;
   }
}

public class MyDerived: MyBase
{

    // This constructor will call MyBase.MyBase(int i)
    ***//You are missing this.***
   public MyDerived(int i) : base(i)
   {
   }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:46:08.457

在 C# 中，在调用派生类的构造函数（如 SwimmingEvent 构造函数）之前，还必须调用基类（Event 类）的构造函数。调用基类构造函数的参数通常使用“ *base* ”关键字指定，如下所示：

```
class SwimmingEvent : Event
{
    ....
    public SwimmingEvent(String Distance, String InOrOut)
        :base(/*Arguments for base class constructor*/)
    {
        //Constructor of derived class
    }
} 
```

如果你省略 ":base(...)"，编译器假定调用基类的无参数构造函数，例如如果你写 ":base()"。但是基类中没有无参数的构造函数，所以你得到了错误。

您必须在 Event 类中创建无参数构造函数，或者添加“base”关键字并指定参数以在 SwimmingEvent 的声明中调用现有 Event 类的构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T14:23:18.620

您需要将所有参数传递回您的父母。

```
 class SwimmingEvent : Event
   {
    private String m_distance;
    private String m_inOutVar;

    public SwimmingEvent(String Distance, String InOrOut, string evName) : base (evName,"b","c", "d", "e")
    {
        m_distance = Distance;
        m_inOutVar = InOrOut;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T14:29:35.630

可能是这样的：

```
public class Event
{
    public Event() {} // public empty ctor 
    ....
    ....
} 
```

并派生出

```
public class SwimmingEvent  : Event
{
} 
```

通过这种方式，您将避免（假设这是您想要的）编译时错误，因为`ctor`基类中已经存在带有空参数的列表。

如果这不是您要搜索的内容，请澄清。

# web-services - 以编程方式创建 SharePoint 工作流

> ID：10142595
> 
> 赞同：0
> 
> 时间：2012-04-13T14:21:19.447
> 
> 标签：web-services, sharepoint, sharepoint-2007, moss, sharepoint-workflow

我正在为客户制作一份 SharePoint 2007 网站的副本。

当更新准备好投入生产时，我希望能够尽可能多地自动化更新过程，同时尽量减少对客户系统的干扰。

为此，**我想知道是否有人知道如何**在另一个 SharePoint 服务器/站点中自动创建 SharePoint 工作流（使用 SPD 2007 创建）。

也许我还没有进行足够的搜索，但我还没有发现是否有办法使用**Web 服务**来做到这一点，我相信**这将是我的偏好**。

我不相信我有能力在此使用 STSadm，因为 SharePoint 网站的托管是独立的。

我想我可以将工作流导出到个人网络包中，我承认，我还没有在工作流上尝试过这个，但是我目前对其他导出（例如列表）的经验是，guid 似乎在网站。即使这不是问题，我也不确定是否有自动化导入过程的方法（没有 STSadm）。

在目标生产站点上实施这些更改时，我希望不必通过一长串手动程序（可能会意外错过）。

**我的偏好是能够创建某种更新批次或应用程序，以便快速进行更改，并且我可以在生产系统上实施之前进行测试。**

这需要做很多事情，但现在，我想专注于将工作流引入目标系统。

欢迎任何关于从哪里开始的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:10:31.130

SharePoint Designer 工作流不能在站点之间移植。（[参考](http://msdn.microsoft.com/en-us/library/aa830816%28v=office.12%29.aspx#office2007ssintrotoworkflows__compvs2005designerforwinwfandsharepointdesigner)）¹

对于您的情况，我建议采用 Visual Studio 工作流路线。查看本教程：[如何在 Visual Studio 2008 中创建自定义 SharePoint 工作流](http://www.simple-talk.com/dotnet/.net-tools/how-to-create-custom-sharepoint-workflows-in-visual-studio-2008/)。您的关键是如何将其与列表相关联。

另一个选项是创建自定义工作流活动（2007 的选项比 2010 少）。您仍然必须使用 SharePoint Designer 创建工作流，并将您的自定义活动添加到每个站点中。

[1\. 是的，有尝试通过复制 XML 和更改 GUID 来做到这一点的“黑客方式”......但它容易出错且困难。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:25:45.007

SharePoint 2010 为工作流提供了更大的灵活性，因此第一个@Kit Menke 声明对于使用 SP2010 的读者来说是不正确的（我看到这被标记为 sharepoint2007，但我让使用 SP2010 的读者清楚）

> 但是，如果您将工作流模板发布到 SharePoint 网站集，则可以将该模板下载为 WSP 文件，然后将其部署到其他网站集。

阅读有关[工作流部署过程的更多信息 (SharePoint Foundation 2010)](http://technet.microsoft.com/en-us/library/cc298653.aspx)

# javascript - 右键单击并从上下文菜单访问功能后如何获取链接的 DOM？

> ID：10142597
> 
> 赞同：0
> 
> 时间：2012-04-13T14:21:21.697
> 
> 标签：javascript, c++, plugins, google-chrome-extension, npapi

我正在为 Google Chrome 编写一个将网页转换为 PDF 文档的扩展程序。我也在为上下文菜单添加这个功能。获取当前网页的 DOM 非常简单，但我正在尝试添加将链接转换为 PDF 文档的功能。因此，当用户右键单击链接并单击“将链接目标转换为 PDF”时，插件应将链接目标处的网页转换为 PDF 文档。为了能够做到这一点，我需要获取链接目标的 DOM。我怎样才能做到这一点？我找不到任何给定链接/URL、返回 DOM 的 JavaScript API 或任何具有类似功能的 Chrome-Extension-API。数据被传递到一个 NPAPI DLL，所以如果我可以在 DLL 中使用任何 API 来执行上述功能，请务必提及。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:42:31.650

使用 XMLHttpRequest 获取页面，然后使用...将其转换为 dom。
[JavaScript DOMParser 访问 innerHTML 和其他属性](https://stackoverflow.com/questions/9250545/javascript-domparser-access-innerhtml-and-other-properties/9251106#9251106)

# jsf - h:outputText 似乎修剪空白，我如何保留空白？

> ID：10142600
> 
> 赞同：2
> 
> 时间：2012-04-13T14:21:55.533
> 
> 标签：jsf, whitespace

我有一个动态查询数据库以在页面上显示数据的网页，类似于 Toad 等数据库工具（当然甚至不关闭:)，示例仅用于说明）。

问题是数据在页面上显示时会被修剪。这就是我使用 JSF 显示数据的方式

```
<h:outputText value="#{record[columnIndex].toDisplayString()}" /> 
```

我相信这是关于 html 渲染的。我该怎么办？写一个html编码器？如何？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T14:43:56.990

`<h:outputText>`根本不会削减价值。

也许您正在谈论值中的前导/尾随空格、制表符、换行符、回车符等空格，默认情况下，这些空格在 HTML 标记中完全没有意义。它只是成为 HTML 源代码的一部分，而不是 HTML 表示。例如，换行符在 HTML 中由`<br>`元素表示，而不是由`\n`字符表示。

如果您想在 HTML 元素节点中保留 HTML 源代码中的空白，那么您需要将父 HTML 元素的 CSS[`white-space`](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)属性设置`pre`为以保留它。如果您想在块元素中换行，请使用`pre-wrap`.

例如

```
<h:outputText ... styleClass="preformatted" /> 
```

和

```
.preformatted {
    white-space: pre-wrap;
} 
```

另一种方法是自己将文本转换为有效的 HTML 标记。例如用字符串替换每个出现的`\n`字符`<br/>`。您可以为此使用 EL 函数。

### 也可以看看：

*   [将带有 HTML 代码的字符串注入和解释到 JSF 页面的组件](https://stackoverflow.com/questions/12662851/component-to-inject-and-interpret-string-with-html-code-into-jsf-page)

# php - 多个树枝模板块的阵列处理

> ID：10142607
> 
> 赞同：2
> 
> 时间：2012-04-13T14:22:14.987
> 
> 标签：php, twig

我有一个奇怪的情况，我的 twig 模板构建内容以适合多个“框”，这样包含框的数量可能会有所不同。我正在寻找一种在子模板中定义 n 块的通用方法，并且父模板将呈现正确的数字。这是我的子模板现在的示例：

```
{% extends "layout.participant.html.twig" %}

{% block box_left_title %}Personal Information{% endblock %}

{% block box_left_content %}
content here
{% endblock %} 
```

考虑到这些配对的标题/内容部分可能有一个、两个或可能有 5 个。我想象的是某种方式来定义`box_left_title`为第一个数组槽，然后父模板 ( `layout.participant.html.twig`) 将迭代每个块并根据需要构建尽可能多的“盒子”。

我现在正在考虑的解决方法是在父模板中定义 、 等块`box_left_content_1`，`box_left_content_2`然后只定义子模板中使用的块。虽然它会起作用，但*感觉*不对。

我在这里误用了模板继承吗？我应该研究条件包含吗？最受欢迎的指针。

**更新：**我的问题假设我可以在父模板中有动态块，但事实证明这[是不可能的](https://github.com/fabpot/Twig/issues/298)。我相信我需要在父级中定义`block1`等`block2`（允许合理的上限），然后在子级中提供包含内容的块。这一切都假设包含不是首选方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:19:19.770

你有多种方法。最简单的可能是包容。

[http://twig.sensiolabs.org/doc/templates.html#include-other-templates](http://twig.sensiolabs.org/doc/templates.html#including-other-templates)

说 box 是一个如下所示的数组： $boxes = array( array( 'title' => 'First Title', 'content' => 'the content of one', ), array( 'title' => 'Second Title', 'content' => '两个的内容', ), );

你会在树枝中使用它：

```
{% for box in boxes %}
    {% include "render_box.html" %}
{% endfor %} 
```

现在 render_box.html 将在这个 for 循环上下文中运行，所以 box vairable 出现在这个模板中。你的 render_box.html 看起来像这样：

```
<h1>{{ box.title }}</h1>

<p>{{ box.content }}</p> 
```

# chmod - chmod 一个文件，所以它下面都是 755

> ID：10142610
> 
> 赞同：1
> 
> 时间：2012-04-13T14:22:20.930
> 
> 标签：chmod

我有一个马马虎虎的问题，问题是，据我了解，755 用于文件夹，644 用于文件，644 是只读等...

现在我的老板说我们的一个客户有一个 WP 画廊问题，当他们上传画廊/图片等时，并非所有这些都可以工作。所以我的老板说“这是一个许可问题”

现在，当我进入那里时，它应该是什么，文件夹是 755，单个文件是 644....

也就是说，我告诉她这没关系，她说不，不，个人文件也必须是 755..这样 ppl 才能看到它们..我告诉她，644 是只读的，所以任何查看它们的人都应该有使用权。

长话短说，直到所有文件都是 755，她才会满意。当我查看父文件夹（图库文件夹）的权限时，它也是 755。

有没有办法让所有内部文件 755 而不是手动一个一个地做？

***编辑-我需要做到这一点，以便将来，无论何时通过任何方法（在他的情况下为 worpress）上传文件时，它都会自动输入为 755。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:25:37.260

递归更改权限

```
chmod 755 -R parent_folder 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:34:22.920

拥有文件本身 755 是一个非常奇怪的要求。644 和 755 之间的唯一区别是文件是可执行的，并且可能文件没有被执行。

要修复使用错误权限创建的文件，您可以更改运行 php（apache？）的进程的 umask，修改[php中的](https://en.wikipedia.org/wiki/Umask)[umask](http://php.net/manual/en/function.umask.php)或更改 php 代码以创建具有正确权限的文件。在 php 或进程中更改 umask 是最不可取的，因为全局更改文件创建会带来安全隐患。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:24:54.047

谷歌搜索 chmod 递归：[http ://www.zzee.com/solutions/chmod-help.shtml](http://www.zzee.com/solutions/chmod-help.shtml)

检查 -R 属性，应该做你需要的

# web-services - 如何更改 Jax-WS WSDL @IDREF 绑定

> ID：10142613
> 
> 赞同：0
> 
> 时间：2012-04-13T14:22:24.097
> 
> 标签：web-services, jaxb, jax-ws, spring-ws, jax-ws-customization

我成功地在具有 Jax-WS [Spring 支持](http://jax-ws-commons.java.net/spring/ "弹簧支撑")的 Tomcat servlet 容器上公开了一个合同优先的 JAX-WS Web 服务。不过，我对`xs:idref`类型有问题。原始 XSD 文件包含复杂类型

```
 <xs:complexType name="DocumentScopeOptionalTypeReferenceIdentifier">
    <xs:simpleContent>
      <xs:extension base="DocumentScopeReferenceIdentifierContent">
         ...
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:simpleType name="DocumentScopeReferenceIdentifierContent">
    <xs:restriction base="xs:IDREF">
      <xs:minLength value="1"/>
      <xs:maxLength value="64"/>
    </xs:restriction>
  </xs:simpleType> 
```

xjc 正确编译为

```
public class DocumentScopeOptionalTypeReferenceIdentifier {

  @XmlValue
  @XmlIDREF
  protected Object value;

  ...
} 
```

但是，当我部署 web 服务时，`@XmlIDREF`注释被忽略，我最终`xs:anyType`在生成的 WSDL 的命名空间声明中得到一个

```
<xs:complexType name="DocumentScopeOptionalRoleReferenceIdentifier">
<xs:simpleContent>
<xs:extension base="xs:anyType">
...
</xs:extension>
</xs:simpleContent>
</xs:complexType> 
```

有问题的 web 服务的客户端报告说，他们无法使用此`anyType`存在生成客户端存根（使用 C#）。我将如何将其改回`xs:idref`？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:58:06.710

好吧，我想我的方法有点太天真了。在做了一些研究之后，我得出结论，定制生成的 WSDL 是不可能的。我现在切换到合同优先方法并手动指定一个手工制作的 WSDL 文件。

我读过任何位于 META-INF/wsdl 下的 WSDL 文件都应该由 JAX-WS 自动拾取，如果它包含相应的服务和端口名称。这对我不起作用，所以我必须使用注释`wsdlLocation`上的属性明确指定 WSDL 文件`@WebService`

```
@WebService(
   targetNamespace = "...", 
   serviceName = "...", 
   portName = "...", 
   wsdlLocation = "/META-INF/wsdl/mywebservice.wsdl"
)
public class MyWebService { ... } 
```

[按照Jax-WS 社区页面](http://jax-ws-commons.java.net/spring/)上的说明，在 Tomcat 上部署 Web 服务非常简单

# actionscript - TweenLite 圆周运动

> ID：10142615
> 
> 赞同：1
> 
> 时间：2012-04-13T14:22:28.043
> 
> 标签：actionscript, motion, gsap

如何使用 TweenLite [actionscript 3 library] 使对象以圆周运动从 (startX,startY) 移动到 (destinationX,destinationY) 并有一些像差？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:24:42.737

您应该能够使用[CirclePath2D](http://www.greensock.com/as/docs/tween/com/greensock/motionPaths/CirclePath2D.html)插件设置圆周运动，并且可以使用函数稍微偏移位置`onUpdate`。听起来令人困惑的一点是

> 从 (startX,startY) 到 (destinationX, destinationY)

因为如果你做圆周运动，在某个点你会从你开始的地方结束。如果您从一个位置开始并在另一个位置结束，您可能会沿着曲线移动，在这种情况下，您需要查看[BezierThroughPlugin](http://www.greensock.com/as/docs/tween/com/greensock/plugins/BezierThroughPlugin.html)。

尽管如此，使用 onEnterFrame 循环在圆形路径上制作动画还是相当简单的，例如，您可以轻松地将圆形更改为椭圆形或随机稍微偏移路径。通常你需要从极坐标转换为笛卡尔坐标：

```
 x = cos(angle) * radius
 y = sin(angle) * radius 
```

但是 Point 的[polar()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Point.html#polar%28%29)方法已经为您做到了：

```
var speed:Number = 0;//how fast to move around the circle
var spread:Number = 20;//how far away from the centre

var b:Sprite = addChild(new Sprite()) as Sprite;
b.graphics.beginFill(0);
b.graphics.drawCircle(-3,-3,3);
b.graphics.endFill();
graphics.lineStyle(1,0xDEDEDE);

this.addEventListener(Event.ENTER_FRAME,update);
function update(event:Event):void{
    speed += .1;//update the 'angle' , .1 is the increment/speed at which b spins
    var distance:Number = spread + (Math.random() * 10 - 5);//spread + random 'aberration'
    var offset:Point = Point.polar(distance,speed);//convert from angle/radius to x,y

    b.x = mouseX + offset.x;
    b.y = mouseX + offset.y;

    graphics.lineTo(b.x,b.y);
} 
```

# ruby-on-rails - 可以缩短路线“匹配'welcome/index' => 'welcome#index'”吗？

> ID：10142620
> 
> 赞同：-1
> 
> 时间：2012-04-13T14:23:04.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我有：

```
match 'welcome/index' => 'welcome#index' 
```

只有一个欢迎操作/页面是索引。所以我可以

```
match 'welcome/' => 'welcome#index' 
```

（假设任何地方都不存在其他欢迎/目录）或其中之一：

```
match 'welcome' => 'welcome#index'

match '/welcome' => 'welcome#index'

match '/welcome/' => 'welcome#index' 
```

匹配是否像某种正则表达式一样工作，我可以插入斜线以确保是否查找目录中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:32:53.367

这对你来说很好：

```
match '/welcome' => 'welcome#index' 
```

而“/welcome”代表您对某些控制器操作的路径名。它与任何欢迎目录无关。

例如，如果您希望 Welcome#index 的链接为 localhost:3000/imhere

```
match '/imhere' => 'welcome#index' 
```

# objective-c - 插入 NSManagedObject 已经实例化的核心数据

> ID：10142628
> 
> 赞同：1
> 
> 时间：2012-04-13T14:23:25.340
> 
> 标签：objective-c, ios

在苹果文档中，要将 NSManagedObject 插入核心数据，我们需要这样做：

```
- (void)insertObject
{
    NSMananagedObject *newObject = (UserInfo*)[NSEntityDescription insertNewObjectForEntityForName:@"myEntity" inManagedObjectContext:self.managedObjectContext];
    [newObject setValue:@"aName" forKey:@"name"];

    NSError *error = nil;
    if (![context save:&error]) {
    }
} 
```

但是，如果我的 NSManagedObject 已经实例化，我该如何将它插入到核心数据上而不用重新实例化 'insertNewObjectForEntityForName:inManagedObjectContext' 并复制我的属性？

我想要这样的东西：

```
- (void)insertObject:(NSManagedObject*) newObject
{
    //[newObject insertForEntity:@"entityName" forContext:context];

    NSError *error = nil;
    if (![context save:&error]) {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:06:18.607

`NSManagedObject`只能通过将其插入上下文来创建**。**如果您真的想在管理器类中使用它，则需要单独的函数来创建它，然后再使用另一个函数来保存它。（嗯，你可以有一个创建和保存的，但是在你修改它之后你必须再次保存它。）

我会在你的经理课上建议这样的事情：

```
- (UserInfo*)createNewUserInfoObject {
    return (UserInfo*)[NSEntityDescription insertNewObjectForEntityForName:@"myEntity"
                                                                            inManagedObjectContext:self.managedObjectContext];
}

- (BOOL)saveUserInfoObjects {
    NSError *error = nil;
    if (![self.managedObjectContext save:&error]) {
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:49:08.847

您必须继承您的 NSManagedObject 并进行验证。这就是他们的目的是添加自定义验证。无需您做任何额外的工作并创建经理。

这是一些帮助您入门的代码。

```
- (BOOL) validateForInsert:(NSError *__autoreleasing*)error {

    /*! @abstract Validation for Inserting Records */

    BOOL bValidity    = [super validateForInsert:error];
    BOOL bUniqueness  = [self validateUniqueness:error];

    return ( bValidity && bUniqueness );
} 
```

请注意，首先调用 super。

# oracle - Oracle 报告不会横向运行

> ID：10142630
> 
> 赞同：0
> 
> 时间：2012-04-13T14:23:37.583
> 
> 标签：oracle, report, oraclereports

由于某种原因，此报告不会以横向显示。我已经更改了方向参数以及页面布局，但此报告将仅以纵向视图显示。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:37:16.530

翻转主部分的宽度和高度属性，使宽度为 11，高度为 8.5。

# c# - 带有 Where 条件的 MVC LINQ

> ID：10142635
> 
> 赞同：0
> 
> 时间：2012-04-13T14:23:48.557
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, where

我正在尝试在我的项目中使用搜索功能。

目前，我想将十进制值转换为字符串以与 searchString 进行比较。

当我这样说时：

```
public ActionResult Search(string searchString)
    {

        var product = from a in _db.Product.Include(a => a.Category)
                      select a;
        if (!String.IsNullOrEmpty(searchString))
        {
            product = product.Where(a => a.model.ToUpper().Contains(searchString.ToUpper())
                               || Convert.ToInt32(a.displaySize).ToString().Contains(searchString));
        }
        return View(product.ToList());
    } 
```

它有错误，

> 'LINQ to Entities 无法识别方法'System.String ToString()' 方法'。

如何将十进制值与字符串值进行比较？

你可以帮帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:26:36.277

您不能使用无法转换为 SQL 的 C# 函数，例如`.ToString()`. 如果您的表不是很大，您可以使用 LINQ to Objects 来代替`.ToList()`之前调用`Where`

```
product = product.ToList().Where(a => a.model.ToUpper().Contains(searchString.ToUpper())
                                   || Convert.ToInt32(a.displaySize).ToString().Contains(searchString)); 
```

**编辑：**

您可以使用`SqlFunctions`命名空间中的函数。该函数可以很容易地转换为 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:27:09.210

您可以尝试将您的字符串值（查询参数）转换为小数并进行反向比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:29:41.607

看起来您正在寻找两种不同的东西。我会在 || 处拆分这个 linq 语句。如果您正在查找 a.model 是什么，请转到一种方法，如果您正在查找 int 值，请转到另一种方法并将搜索字符串转换为 int 在 linq 语句之前。该方法类似于：

```
int searchInt;

 if(int.TryParse(searchString, out searchInt))
{

    product = product.Where(a => a.displaySize == searchInt); 
} 
```

您必须这样做，因为 SQL 没有 ToString() 方法......所以 LINQ 并不真正知道如何处理它。请记住，这一切都会转换为 SQL。

# zend-framework - 用于完成的 Sublime text 2 Zend Framework 插件

> ID：10142636
> 
> 赞同：0
> 
> 时间：2012-04-13T14:23:50.243
> 
> 标签：zend-framework, sublimetext2

有谁知道 Zend Framework 1.11 的 Sublime text 2 的良好完成插件。我正在尝试从 NetBeans 切换到它，但我缺少类、方法等的自动完成功能。

谢谢，--亚森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:22:32.517

伤心。尝试使用 Zend 类和方法时，Sublime text 2 没有自动完成功能。希望这样的包裹会在某个时候出现

# winforms - 如何解决 Quickbooks 接口错误：QBFC 错误“无法加载文件或程序集 Interop.QBFC7 或其依赖项之一”

> ID：10142637
> 
> 赞同：2
> 
> 时间：2012-04-13T14:23:50.643
> 
> 标签：winforms, quickbooks, qbfc

我最近继承了一个 C# Winforms 应用程序，它通过 QBFC 接口与 Quickbooks 进行通信。该应用程序包含对 COM 服务器 Interop.QBFC7.dll 的引用。该应用程序在我们的测试环境和我们客户的几个环境中运行良好。虽然，昨天当我尝试在新客户的系统上安装它时，我继续收到以下错误：

无法加载文件或程序集“Interop.QBFC，版本=8.0.0.87，文化=中性，PublicKeyToken=...”或其依赖项之一。该系统找不到指定的文件。

我知道我们有几个客户在不同版本的 Quickbooks（即 Quickbooks Pro、Premier 和 Enterprise 2008 和 Enterprise 11.0 之间）上运行这个应用程序。据我所知，这是我们尝试部署具有 Enterprise 12.0 的应用程序的第一个客户。

我尝试了以下方法来解决问题，但没有成功：

1) 从 Intuit 开发人员网络站点安装 QBFC7_Installer
2) 从 Intuit 开发人员网络站点安装 Quickbooks SDK 10 安装程序
3) 验证文件系统上是否存在 Interop.QBFC7.dll 文件。
4) 尝试通过命令提示符手动注册 COM 对象 Interop.QBFC7.dll：regsvr32 Interop.QBFC7.dll（同样失败，windows 返回错误，指出找不到对象）。

是否有人对我可以尝试解决此问题的其他事项有任何建议或反馈？我在他们站点上运行不同操作系统（即 Windows Server 2008、Windows 7 和 Windows Vista）的 3 台不同机器上遇到相同的错误？我还尝试在 x86 和 64 位配置中进行编译，但均无济于事。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:04:11.340

首先，您应该只针对`x86`构建。如果您以`Any CPU`或为目标，QuickBooks SDK 将无法工作`x64`。但是，您的主要问题是您正在寻找错误的 QBFC 版本。请注意错误消息上的版本标记：

> 无法加载文件或程序集“Interop.QBFC, **Version=8.0.0.87** , Culture=neutral, PublicKeyToken=...”或其依赖项之一。该系统找不到指定的文件

这是 QBFC8，而不是 QBFC7。因此，您应该能够使用 QBFC8 安装程序解决问题。

QuickBooks 的版本应该没有什么不同，因为 QBFC 8（或 7，就此而言）将适用于 2008 和 Enterprise 11 或 12。

您应该考虑使用安装项目来安装您的应用程序，以避免将来出现此问题。安装项目应自动检测 QBFC 依赖项。一旦您看到这种情况发生，请转到安装项目的 SearchPath 属性并从安装在您机器上的 SDK 添加 MergeModule 目录。完成此操作后，您应该会看到 QBFC 和 Xerces 合并模块作为依赖项自动添加到您的项目中。当然，您还需要将代码更新到更新版本的 QBFC，但无论如何这可能是个好主意。

# xcode - 游戏中心？Xcode

> ID：10142641
> 
> 赞同：0
> 
> 时间：2012-04-13T14:24:06.747
> 
> 标签：xcode, center, game-center, gamekit

我一直在游戏中心上努力工作。我已经测试了很多代码，我已经数不清了。我也很想知道如何自动提交分数这是我使用过的一些代码，但我不确定这是否会有所帮助

```
-(IBAction)showleaderboard:(id)sender{
GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController   alloc]init];
if (leaderboardController !=NULL) {
    leaderboardController.category = self.currentLeaderboard;
    leaderboardController.timeScope = GKLeaderboardTimeScopeAllTime;
    leaderboardController.leaderboardDelegate = self;
    [self presentModalViewController:leaderboardController animated:YES];
}

}
-(void)leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController{
[self dismissModalViewControllerAnimated:YES];
[viewController release];

}

-(IBAction)showAchivementLeaderboard:(id)sender{
GKAchievementViewController *achivements = [[GKAchievementViewController alloc]init];
if (achivements !=NULL) {
    achivements.achievementDelegate = self;
    [self presentModalViewController:achivements animated:YES];
}
}
-(void)achievementViewControllerDidFinish:(GKAchievementViewController *)viewController{
[self dismissModalViewControllerAnimated:YES];
[viewController release];

}

self.currentLeaderboard= kEasyLeaderboardID;
if ([gameCenterManager isGameCenterAvailible]) {
   self.gameCenterManager= [[[GameCenterManager alloc] init] autorelease];
    [self.gameCenterManager setDelegate:self];
    [self.gameCenterManager authenticateLocalUser];
}else{

    UIAlertView *openURLAlert = [[ UIAlertView alloc] initWithTitle:@"Game Center turned    off" message:@"You are not connected to game center." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [openURLAlert show];
    [openURLAlert release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:03:30.607

要报告分数，您需要使用 GKScore，如下所示；

```
GKScore *scoreReporter = [[GKScore alloc] initWithCategory:self.gameCategory.leaderboardString];
scoreReporter.value = score;

[scoreReporter reportScoreWithCompletionHandler:^(NSError *error) {
    if (error != nil) {

        [[KYTGlobals instance] storeScore:score forCategory:self.gameCategory.leaderboardString];

        }
 }]; 
```

上面的代码使用您已经在游戏中心为您想要报告分数的类别设置的标识符分配并初始化一个 GKScore 对象。您更新分数的值，然后使用 reportScoreWithCompletionHandler 确保测试错误，以便您可以存档分数并稍后报告。

# php - YII Active Record 加入

> ID：10142642
> 
> 赞同：1
> 
> 时间：2012-04-13T14:24:09.880
> 
> 标签：php, activerecord, yii, many-to-many

我第一天在看 YII，我在尝试找出一些表之间的关系时遇到了一些问题。

我的表结构如下：

宠物：pet_id pet_name ....

Pet_Owner_Link pet_id owner_id

所有者：owner_id owner_name

我将如何获得属于所有者的所有宠物？目前，我真的很难理解 AR 的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:37:05.467

根据 DD.Jarod 在 Yii AR 文档页面上的评论：[http ://www.yiiframework.com/doc/guide/1.1/en/database.arr#c970](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#c970)

“如果您声明多对多关系，则可连接声明中的键顺序必须是 'my_id, other_id'：

```
class Post extends CActiveRecord
{
  public function relations()
  {
    return array(
        'categories'=>array(self::MANY_MANY, 'Category',
            'tbl_post_category(post_id, category_id)'),
    );
  }
}
class Category extends CActiveRecord
{
  public function relations()
  {
    return array(
        'Posts'=>array(self::MANY_MANY, 'Post',
            'tbl_post_category(category_id, post_id)'),
    );
  }
} 
```

所以你的代码看起来像：

```
class Owner extends CActiveRecord
{
  public function relations()
  {
    return array(
        'pets'=>array(self::MANY_MANY, 'Pet',
            'tbl_post_category(pet_id, owner_id)'),
    );
  }
}
class Pet extends CActiveRecord
{
  public function relations()
  {
    return array(
        'owners'=>array(self::MANY_MANY, 'Post',
            'tbl_post_category(owner_id, pet_id)'),
    );
  }
} 
```

您的问题可能是默认情况下 Pet 和 Owner 的主键应该是 id（不是 pet_id / owner_id）。如果您不明确说明您的主键与默认命名约定不匹配/未在数据库中设置为主键，Yii 可能会感到困惑。您可以在这样的模型中指定主键是什么：

```
public function primaryKey()
{
    return 'owner_id';
} 
```

最后，您将检索如下信息：

```
$owner = Owner::model()->findByPk((int)$id);
foreach($owner->pets as $pet)
{
    print $pet->name;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T15:55:34.123

我知道这不完全是您所要求的，但我就是这样做的。

在 Owner 模型中的关系（）返回中添加此项：

```
'all_pets'=>array(self::HAS_MANY, 'Pet_Owner_Link','owner_id'), 
```

在 Pet_Owner_Link 模型中的关系（）返回中添加此项：

```
'pet'=>array(self::BELONGS_TO, 'Pet', 'pet_id'), 
```

然后养一个这样的宠物

```
$owner->all_pets[$i]->pet; 
```

# html - 在不做 100 个不同选项的情况下添加 1-100 个下拉菜单的简单方法？

> ID：10142643
> 
> 赞同：28
> 
> 时间：2012-04-13T14:24:13.780
> 
> 标签：html, forms

我只是想知道是否有一个简单的快捷方式可以将选项添加到数字 1 到 100 的下拉菜单中，而不必执行以下操作：

```
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option> 
```

等一直到100？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-13T14:27:14.250

恐怕不是纯 HTML。

你可以使用一些 jQuery 来做到这一点：

```
$(function(){
    var $select = $(".1-100");
    for (i=1;i<=100;i++){
        $select.append($('<option></option>').val(i).html(i))
    }
});​ 
```

**[-- 看演示 --](http://jsfiddle.net/Curt/preYN/)**

**[你可以在这里](http://docs.jquery.com/Downloading_jQuery)**下载 jQuery

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-13T14:27:24.423

据我所知，不是纯 HTML。

但是使用 JS 或 PHP 或其他脚本语言（如 JSP），您可以使用 for 循环轻松完成。

PHP 中的示例：

```
<select>
<?php
    for ($i=1; $i<=100; $i++)
    {
        ?>
            <option value="<?php echo $i;?>"><?php echo $i;?></option>
        <?php
    }
?>
</select> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-13T14:28:42.983

除了 html，您还在使用 JavaScript 还是 jQuery？如果是，您可以执行以下操作：

HTML：

```
<select id='some_selector'></select>​ 
```

jQuery：

```
var select = '';
for (i=1;i<=100;i++){
    select += '<option val=' + i + '>' + i + '</option>';
}
$('#some_selector').html(select); 
```

正如你[在这里看到的](http://jsfiddle.net/darkajax/qGNPT/)。

您可以使用兼容浏览器而不是选择的另一个选项是 HTML5 `input type=number`：

```
<input type="number" min="1" max="100" value="1"> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-01-04T05:31:18.660

在 Html5 中，您现在可以使用

```
<form>
<input type="number" min="1" max="100">
</form> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-30T05:21:37.703

我看到这很旧，但是...我不知道您是否正在寻找代码以在每次加载时生成数字/选项。但我使用 excel 或打开的 office calc 页面并一直使用自动编号。它可能看起来像这样......

| `<option>` | 1 | `</option>`|

然后我突出显示行中的单元格并将它们向下拖动，直到有 100 个或我需要的数字。我现在有我只是参考的代码片段。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-10T20:27:01.240

正如其他人所说，html 中没有。但是，您可以使用[PUG/Jade](https://pugjs.org/api/getting-started.html)。事实上，我经常这样做。

它看起来像这样：

```
select
  - var i = 1
  while i <= 100
    option=i++ 
```

这将产生： [![htmltojade.org 的截图](../Images/e3855693c1ec82f395eadf3f8e1f808c.png)](https://i.stack.imgur.com/hMnCp.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-01T03:19:17.530

Jquery 单行：

ES6 + jQuery：

```
$('#select').append([...Array(100).keys()].map((i,j) => `< option >${i}</option >`)) 
```

Lodash + jQuery：

```
$('#select').append(_.range(100).map(function(i,j){ return $('<option>',{text:i})})) 
```

# r - 循环错误中的重复向量名称

> ID：10142644
> 
> 赞同：0
> 
> 时间：2012-04-13T14:24:14.047
> 
> 标签：r

我在成对的文件上运行以下代码，如`a1.txt and b1.txt`, `a2.txt and b2.txt`, .... `a999.txt and b999.txt`：

```
dostuff <- function(x) 
{
files <- list.files(pattern=paste('.', x, '\\.txt', sep=''))
a <- read.table(files[1],header=FALSE)  #file a1.txt 
G <- a$V1-a$V2
b <- read.table(files[2],header=FALSE) #file b1.txt
as.factor(b$V2)
q <- tapply(b$V3,b$V2,Fun=length)
H <- b$V1-b$V2
model <- lm(G~H)
return(model$coefficients[2],q)
}

results <- sapply(0:999,dostuff)
Error in tapply(b$V3, b$V2, FUN = length) : arguments must have same length 
```

我假设这是因为一对中的两个文件都没有标题，所以`a`has`V1 V2`和`b`has `V1 V2 V3`。但是，当我在小批量文件上运行此错误时，不会出现此错误，`0:3`并且这些结果的结果与我分别进行每次分析一样，手动清除整个代码运行之间的环境。

`a1 b1`我相信一旦文件从to`a10 b10`及以上运行，问题就会出现。因为我认为循环对选择哪些文件感到困惑。只要我运行`a0 b0`to ，这个问题就会消失`a9 b9`。

最佳解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:56:00.490

当我尝试处理的批处理中有一些杂散文件没有预期的行数时，我遇到了类似的问题。我建议先检查所有文件的尺寸，看看它们是否都同意。我的猜测是文件 0-3 的格式都正确，但 [0, 999] 中的某些文件可能不是。

尝试检查所有文件的尺寸是否相同：

```
dims2 <- list()
dims3 <- list()
doDims <- function(x){
  files <- list.files(pattern=paste('.', x, '\\.txt', sep=''))
  a <- read.table(files[1],header=FALSE)  #file a1.txt 
  G <- a$V1-a$V2
  b <- read.table(files[2],header=FALSE) #file b1.txt
  as.factor(b$V2)
  dims2[x] <- dim(b$V2)
  dims3[x] <- dim(b$V3)
} 
```

然后您可以查看所有维度是否确实符合您的预期。

# unit-testing - 如何让单元测试作为 TFS2008 构建的一部分运行？

> ID：10142647
> 
> 赞同：2
> 
> 时间：2012-04-13T14:24:21.833
> 
> 标签：unit-testing, visual-studio-2008, continuous-integration, tfsbuild

我正在尝试让我的持续集成设置为我运行我的单元测试，所以我设置了

```
<RunTest>true</RunTest> 
```

我已经将测试设置为自动发现：

```
<ItemGroup>
  <TestContainer Include="$(OutDir)%2a.Test.dll" />
</ItemGroup> 
```

在我的开发机器上运行构建运行我的单元测试，并报告构建成功；当作为自动构建运行时，测试会运行（根据 BuildLog），但我在日志中看到了这一点：

> 发布测试运行结果 tfs_service@TFS-BUILD 2012-04-13 14:13:59_Any CPU_Release 到[http://mycompany-tfs:8080/Build/v1.0/PublishTestResultsBuildService2.asmx](http://mycompany-tfs:8080/Build/v1.0/PublishTestResultsBuildService2.asmx) ...
> 
> .drop 共享目录“\tfs-build\Builds\Test\MyProduct Test_20120413.2”无法访问。
> 
> 无法访问放置共享目录“\tfs-build\Builds\Test\MyProduct Test_20120413.2”。
> 
> MSBUILD：警告 MSB6006：“MSTest.exe”以代码 1 退出。
> 
> 先前的错误已转换为警告，因为该任务是使用 ContinueOnError=true 调用的。

这很奇怪，因为二进制文件发布得非常愉快。

我尝试通过登录到构建服务器的控制台、运行 Visual Studio 2008 命令提示符、导航到源位置并调用 MSBuild 来诊断问题，它似乎甚至没有尝试调用单元测试?

最终，我更感兴趣的是玩“猜猜为什么结果下降失败”——它可能是我的构建定义名称中的嵌入空间吗？鉴于二进制文件发布正常，我还能检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:14:08.263

单元测试正在运行，问题是结果没有正确发布。运行单元测试时，结果会发布到 tfs 服务器，然后复制到放置位置。因此，放置共享需要允许 TFS 构建服务帐户写入此文件夹。

[http://blogs.msdn.com/b/vstsqualitytools/archive/2010/10/24/test-agent-test-controller-and-mstest-faq.aspx](http://blogs.msdn.com/b/vstsqualitytools/archive/2010/10/24/test-agent-test-controller-and-mstest-faq.aspx)

# ios - 在ios中调用Lua文件时模块不喜欢

> ID：10142650
> 
> 赞同：0
> 
> 时间：2012-04-13T14:24:37.293
> 
> 标签：ios, lua

我正在编写一个ios游戏。我使用lua编写游戏逻辑。然后我尝试将lua文件集成到ios程序中。我将lua文件添加到应用程序资源中。当我运行程序时，出现错误：

```
LUA_ERRRUN: a runtime error.
...4-489C-4A40-8582-F734FAAC428D/ChemLLK.app/llk_facade.lua:3: module 'lianliankan' not found:
no field package.preload['lianliankan']
no file '/usr/local/share/lua/5.2/lianliankan.lua'
no file '/usr/local/share/lua/5.2/lianliankan/init.lua'
no file '/usr/local/lib/lua/5.2/lianliankan.lua'
no file '/usr/local/lib/lua/5.2/lianliankan/init.lua'
no file './lianliankan.lua'
no file '/usr/local/lib/lua/5.2/lianliankan.so'
no file '/usr/local/lib/lua/5.2/loadall.so'
no file './lianliankan.so' 
```

我徘徊是否“。” 在路径等于资源文件夹。我不知道如何解决这个问题。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:01:39.427

当脚本调用`require`时，它会在多个预设位置搜索脚本。这些预设位置都不是您的应用程序*资源*。因此，脚本的`require`函数永远不会找到它正在寻找的东西。

您需要注册一个处理程序，`require`以便在您的资源中查找脚本。

# android - Android 录音图表/图表

> ID：10142655
> 
> 赞同：2
> 
> 时间：2012-04-13T14:24:51.830
> 
> 标签：android, voice-recording

我用 MediaRecorder 开发了录音机。而我听最后录的。录音开始时，我想要一个像 Google Voice 这样的语音图表/图表（Google Speak Now 图表）

![在此处输入图像描述](../Images/fd3f4074535691fdb9815fd57aa36ebe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-07T10:06:21.270

查看[可视化工具](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)。

然后签出这个[Github 插件](https://github.com/felixpalmer/android-visualizer)。您可以以 4 种不同的形式可视化您的音频，请查看它们的屏幕截图。

# php - php用正则表达式查找字符串

> ID：10142658
> 
> 赞同：31
> 
> 时间：2012-04-13T14:25:06.787
> 
> 标签：php, regex

我已经阅读了多个关于正则表达式的教程，但它不会留在我的脑海中。我永远无法让我的模式发挥作用。希望有人可以提供帮助。

我有一个 php 变量 ($content)，我需要在其中找到一个看起来像这样的特定模式

[画廊::名称/的/文件夹/]

我想搜索：

```
- starting with "[gallery::"
- any other character (variable length)
- ending with "]" 
```

到目前为止，在 PHP 中我有：

```
 preg_match('/\[gallery\:/', $content, $matches, PREG_OFFSET_CAPTURE); 
```

我可以找到[画廊：但就是这样。我希望能够找到其余的（：name/of/the/folder/]）

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-13T14:27:44.827

尝试捕获它：

```
preg_match("/\[gallery::(.*?)]/", $content, $m); 
```

现在`$m`是一个数组：

```
0 => [gallery::/name/of/the/folder/]
1 => /name/of/the/folder/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:27:56.840

将您的正则表达式更改为

```
'/\[gallery::([A-Za-z\/]+)\]/' 
```

由于我将文件夹/路径部分放在括号中，因此您应该从中获取一个捕获组。

# javascript - 向这个 jQuery Carousel 添加自动播放

> ID：10142662
> 
> 赞同：1
> 
> 时间：2012-04-13T14:25:18.993
> 
> 标签：javascript, jquery, carousel, autoplay

我使用 jQuery 创建了一个轮播，我想为其添加自动播放功能。

这是我现有的 JS：

```
$(document).ready(function (){
    $('#button a').click(function(){
        var integer = $(this).attr('rel');
        $('#myslide .cover').animate({left:-705*(parseInt(integer)-1)})
        $('#button a').each(function(){
            $(this).removeClass('active');
            if($(this).hasClass('button'+integer)){
                $(this).addClass('active')}
        });
    });
});​ 
```

这是[一个工作小提琴](http://jsfiddle.net/gy7LE/1/)。

**问：**我不知道从哪里开始自动播放。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:50:19.620

看一下这个：

[http://jsfiddle.net/gy7LE/13/](http://jsfiddle.net/gy7LE/13/)

```
$(document).ready(function (){

    $('#button a').click(function(){
        var integer = $(this).attr('rel');
        $('#myslide .cover').animate({left:-705*(parseInt(integer)-1)})
        $('#button a').each(function(){
            $(this).removeClass('active');
            if($(this).hasClass('button'+integer)){
                $(this).addClass('active')}
        });
    });
        setInterval ( function(){Next();}, 1000 );
    });

    function Next(){
        var _next = false;
        $('#button a').each(function(){
            if(_next){
                $(this).addClass('active');
                _next = false;
            }
            else if($(this).hasClass('active')){
                _next = true;
                $(this).removeClass('active')
            }

        });  
        if(_next)
            $("#button a:eq(0)").addClass("active");

       var activeIndex = parseInt($(".active").attr("rel"));
       $('#myslide .cover').animate({left:-705*(parseInt(activeIndex))});      
    }
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:53:17.623

这将起作用。查看代码中的注释：

```
var slideInterval = null;

$(document).ready(function() {
    $('#button a').click(function() {
        //Clear slide interval to allow overriding of auto slide
        if (slideInterval !== null) clearInterval(slideInterval);

        var integer = $(this).attr('rel');
        DoSlide(integer);
    });

    //Begin auto slide
    slideInterval = setInterval(DoSlide , 2000);
});

function DoSlide(integer) {
    integer = integer || parseInt($('.active').attr('rel')) + 1;

    // Reset auto slide
    if (integer == 5) integer = 1;

    $('#myslide .cover').animate({
        left: -705 * (parseInt(integer) - 1)
    });

    $('.active').removeClass('active');    
    $('a[rel="' + integer + '"]').addClass('active');
}​ 
```

这是[一个要演示的工作小提琴](http://jsfiddle.net/JamesHill/sNqrf/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T05:21:53.387

更优雅的解决方案

```
$(document).ready(function() {
  setTimeout(function () {
    $('.carousel-control.right').trigger('click');
    $('.carousel-inner').trigger('mouseenter');
    $('.carousel-inner').trigger('mouseleave');
  }, 3000); //set this time to what ever time you want it to take to start scrolling this is separate for the interval you set for the carousel though you can set it to be the same BooStrap default is 4000
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-04T20:58:52.683

你可以试试[这个插件](https://github.com/ehudg/scrapercarousel)，它会为你寻找图像并创建自动轮播。

# ios5 - 从 sudzc 抓取多行

> ID：10142669
> 
> 赞同：1
> 
> 时间：2012-04-13T14:25:49.007
> 
> 标签：ios5, sudzc

我正在尝试从 sudzc wsdl 返回多行。我已将结果加载到字典中。下面的代码给了我第一个结果。如何检索所有结果而不仅仅是第一个结果？我正在寻找 [ID.text intValue] == CSHR_NUM 的 CSHR_POS_NAME。

```
dict = [resp objectForKey:@"TC"];
if( ( dict == nil ) || ![dict isKindOfClass:[NSDictionary class]] ) {
    NSLog( @"WARNING: %@", [dict description]);
    return;
}
    desc = [[dict objectForKey:@"CSHR_POS_NAME"]copy];
    CashierNum = [[dict objectForKey:@"CSHR_NUM"]copy];

    NSLog(@"Name: %@ and Cashier Number: %@",desc, CashierNum); 
```

我能够在vb中完成：

```
If dsCashiers.Table("TC").Rows.Count > 0 Then
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T14:24:58.267

```
[d setObject:v forKey:[child name]]; 
NSString* key = [child name]; 
id check = [d objectForKey:key]; 
if( check != nil ) { 

NSInteger next = 1; 
key = [NSString stringWithFormat:@"%@%d", [child name], next]; 
check = [d objectForKey:key]; 
while( check != nil ) { 

    next++; 
    key = [NSString stringWithFormat:@"%@%d", [child name], next]; 
    check = [d objectForKey:key]; 
} 
[d setObject:v forKey:key]; 
} 
[d setObject:v forKey:[child name]]; 
```

# javascript - 为什么 XMLHttpRequest 只适用于 Twitter json？

> ID：10142671
> 
> 赞同：0
> 
> 时间：2012-04-13T14:26:01.490
> 
> 标签：javascript, android, cordova

PhoneGap 将从下面的 twitter 打印出 json。但是，当我为我的 ajax.open 使用任何其他 url 时，它只会显示一个空白屏幕。为混乱的代码布局道歉

```
 <pre>
</head>
<body>
 <script type="text/javascript" src="phonegap.js"></script>
<script type="text/javascript">
         function appReady(){

         }
         document.addEventListener("deviceready", appReady, false);
         var ajax = new XMLHttpRequest();   
         ajax.open("GET","http://search.twitter.com/search.json?q=bacon",true);

         ajax.send();

         ajax.onreadystatechange=function(){
         if(ajax.readyState==4 && (ajax.status==200))
         {
           document.getElementById('main').innerHTML = ajax.responseText;
         }
       }
       </script>
      Hello
 <div id="main">
 </pre> 
```

使用eclipse我创建了一个Web服务器并开始从我的本地主机编码这些请求并使用下面的代码，减去脚本标签中的phonegap.js，它可以很好地从/Test2.html调用html”。我删除了“phonegap.js ” 因为在我的本地机器上它没有使用 phonegap，所以我用“Test.js”替换了它，它只包含这个代码，我从 XMLHttpRequest 的 W3school 文档中获得：

当我尝试让我的模拟器调用 /Test2.html 时，它显示一个空白屏幕。此外，我无法从我自己的服务器调用 twitter json，我希望这是由于跨域保护重新启用，因为我不使用 phonegap。

谁能告诉我为什么我无法在我的模拟器上使用此代码查看 Test2 和其他 url。也有人知道任何其他可用的在线 json，我尝试了 google 和 yahoo 的，但它们似乎也不起作用。

```
function handler() {
 if(this.readyState == this.DONE) {
if(this.status == 200 && this.responseXML != null && this.responseXML.getElementById('test').textContent) 
{
  // success!
  processData(this.responseXML.getElementById('test').textContent);
  return;
}
// something went wrong
processData(null);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:33:14.537

您可能需要一个“API 密钥”来访问其他 JSON 流。Twitter 不需要这样的密钥。

# objective-c - 在拖放期间在 NSTableView 中打开一个间隙

> ID：10142675
> 
> 赞同：23
> 
> 时间：2012-04-13T14:26:10.803
> 
> 标签：objective-c, macos, cocoa, drag-and-drop, nstableview

我有一个简单的、单列、基于视图的 NSTableView，其中包含可以拖动以重新排序的项目。在拖放过程中，我想让它在鼠标下方的位置打开要放置的项目的间隙。当您拖动以重新排序曲目时，GarageBand 会执行类似的操作（此处的视频：[http](http://www.screencast.com/t/OmUVHcCNSl) ://www.screencast.com/t/OmUVHcCNSl ）。据我所知，在 NSTableView 中没有内置支持。

有没有其他人尝试将此行为添加到 NSTableView 并找到一个好的解决方案？我已经想到并尝试了几种方法，但没有取得多大成功。我的第一个想法是在拖动期间通过发送`-noteHeightOfRowsWithIndexesChanged:`我的数据源的`-tableView:validateDrop:...`方法将鼠标下的行高加倍，然后返回正常高度的两倍`-tableView:heightOfRow:`。不幸的是，据我所知， NSTableView 在拖放过程中不会更新其布局，因此尽管调用`noteHeightOfRowsWithIndexesChanged:`了 ，但实际上并未更新行高。

请注意，我使用的是基于视图的 NSTableView，但我的行并不复杂，如果这样做有助于实现这一点，我无法移动到基于单元格的表视图。我知道在拖动完成后为放置的项目设置动画间隙的简单内置功能。我正在寻找一种在拖动过程中打开间隙的方法。此外，这是针对要在 Mac App Store 中销售的应用程序，因此不得使用私有 API。

编辑：我刚刚向 Apple 提交了一项增强请求，请求内置支持此行为： http: [//openradar.appspot.com/12662624](http://openradar.appspot.com/12662624)。~~如果你也想看的话，请假装。~~更新：我要求的增强功能已在 OS X 10.9 Mavericks 中实现，现在可以使用 NSTableView API 实现此行为。请参阅[NSTableViewDraggingDestinationFeedbackStyleGap](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/index.html#//apple_ref/c/tdef/NSTableViewDraggingDestinationFeedbackStyle)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T00:40:35.593

我觉得这样做很奇怪，但这里的队列中有一个非常彻底的答案，似乎已被其作者删除。在其中，他们提供[了一个工作解决方案的正确链接](http://developer.apple.com/library/mac/#samplecode/DragNDropOutlineView/Introduction/Intro.html)，我觉得需要将其作为答案提供给其他人，如果他们愿意的话，也包括他们。

从 的文档中[`NSTableView`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html)，对于行动画效果，隐藏了以下注意事项：

> 行动画效果
> 
> 可选常量，指定 tableview 将使用淡入淡出来移除行或列。该效果可以与任何[`NSTableViewAnimationOptions`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html#//apple_ref/c/tdef/NSTableViewAnimationOptions)常数组合。
> 
> ```
> enum {
>     NSTableViewAnimationEffectFade = 0x1,
>     NSTableViewAnimationEffectGap = 0x2,
> }; 
> ```
> 
> 常数：
> 
> ...
> 
> `NSTableViewAnimationEffectGap`
> 
> 为新插入的行创建一个间隙。这对于动画到新打开的间隙的拖放动画很有用，应该在委托方法中使用[`tableView:acceptDrop:row:dropOperation:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSTableViewDataSource/tableView:acceptDrop:row:dropOperation:)。

通过[Apple 的示例代码](https://developer.apple.com/library/mac/#samplecode/DragNDropOutlineView/Listings/AppController_m.html#//apple_ref/doc/uid/DTS40008831-AppController_m-DontLinkElementID_4)，我发现：

```
- (void)_performInsertWithDragInfo:(id <NSDraggingInfo>)info parentNode:(NSTreeNode *)parentNode childIndex:(NSInteger)childIndex {
    // NSOutlineView's root is nil
    id outlineParentItem = parentNode == _rootTreeNode ? nil : parentNode;
    NSMutableArray *childNodeArray = [parentNode mutableChildNodes];
    NSInteger outlineColumnIndex = [[_outlineView tableColumns] indexOfObject:[_outlineView outlineTableColumn]];

    // Enumerate all items dropped on us and create new model objects for them    
    NSArray *classes = [NSArray arrayWithObject:[SimpleNodeData class]];
    __block NSInteger insertionIndex = childIndex;
    [info enumerateDraggingItemsWithOptions:0 forView:_outlineView classes:classes searchOptions:nil usingBlock:^(NSDraggingItem *draggingItem, NSInteger index, BOOL *stop) {
        SimpleNodeData *newNodeData = (SimpleNodeData *)draggingItem.item;
        // Wrap the model object in a tree node
        NSTreeNode *treeNode = [NSTreeNode treeNodeWithRepresentedObject:newNodeData];
        // Add it to the model
        [childNodeArray insertObject:treeNode atIndex:insertionIndex];
        [_outlineView insertItemsAtIndexes:[NSIndexSet indexSetWithIndex:insertionIndex] inParent:outlineParentItem withAnimation:NSTableViewAnimationEffectGap];
        // Update the final frame of the dragging item
        NSInteger row = [_outlineView rowForItem:treeNode];
        draggingItem.draggingFrame = [_outlineView frameOfCellAtColumn:outlineColumnIndex row:row];

        // Insert all children one after another
        insertionIndex++;
    }];

} 
```

我不确定它是否真的这么简单，但如果它不能满足您的需求，它至少值得检查和彻底反驳。

**编辑：**请参阅此答案的评论，了解正确解决方案所遵循的步骤。OP 已经发布[了一个更完整的答案](https://stackoverflow.com/a/10367561/517815)，任何寻求相同问题解决方案的人都应该参考这个答案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-28T21:12:04.513

注意：这个问题和答案描述的行为现在可以在 OS X 10.9 Mavericks 及更高版本上使用 NSTableView 中的内置 API 获得。请参阅[NSTableViewDraggingDestinationFeedbackStyleGap](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/index.html#//apple_ref/c/tdef/NSTableViewDraggingDestinationFeedbackStyle)。

如果在面向 OS X 10.8 或更早版本的应用程序中需要此行为，此答案可能仍然有用。原答案如下：

我现在已经实现了。我的基本方法如下所示：

```
@interface ORSGapOpeningTableView : NSTableView

@property (nonatomic) NSInteger dropTargetRow;
@property (nonatomic) CGFloat heightOfDraggedRows;

@end

@implementation ORSGapOpeningTableView

#pragma mark - Dragging

- (NSDragOperation)draggingUpdated:(id<NSDraggingInfo>)sender
{
    NSInteger oldDropTargetRow = self.dropTargetRow;
    NSDragOperation result = [super draggingUpdated:sender];
    CGFloat imageHeight = [[sender draggedImage] size].height;
    self.heightOfDraggedRows = imageHeight;

    NSMutableIndexSet *changedRows = [NSMutableIndexSet indexSet];
    if (oldDropTargetRow > 0) [changedRows addIndex:oldDropTargetRow-1];
    if (self.dropTargetRow > 0) [changedRows addIndex:self.dropTargetRow-1];
    [self noteHeightOfRowsWithIndexesChanged:changedRows];

    return result;
}

- (void)draggingExited:(id<NSDraggingInfo>)sender
{
    self.dropTargetRow = -1;
    [self noteHeightOfRowsWithIndexesChanged:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, [self numberOfRows])]];

    [super draggingExited:sender];
}

- (void)draggingEnded:(id<NSDraggingInfo>)sender
{
    self.dropTargetRow = -1;
    self.heightOfDraggedRows = 0.0;
    self.draggedRows = nil;
    [self noteHeightOfRowsWithIndexesChanged:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, [self numberOfRows])]];
}

- (BOOL)performDragOperation:(id<NSDraggingInfo>)sender
{
    self.dropTargetRow = -1;
    self.heightOfDraggedRows = 0.0;
    self.draggedRows = nil;
    [self noteHeightOfRowsWithIndexesChanged:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, [self numberOfRows])]];

    return [super performDragOperation:sender];
} 
```

// 在我的委托和数据源中：

```
- (NSDragOperation)tableView:(NSTableView *)tableView validateDrop:(id<NSDraggingInfo>)info proposedRow:(NSInteger)row proposedDropOperation:(NSTableViewDropOperation)dropOperation
{
    if (dropOperation == NSTableViewDropOn) 
    {
        dropOperation = NSTableViewDropAbove;
        [self.tableView setDropRow:++row dropOperation:dropOperation];
    }

    NSDragOperation result = [self.realDataSource tableView:tableView validateDrop:info proposedRow:row proposedDropOperation:dropOperation];
    if (result != NSDragOperationNone) 
    {
        self.tableView.dropTargetRow = row;
    } 
    else 
    {
        self.tableView.dropTargetRow = -1; // Don't open a gap
    }
    return result;
}

- (CGFloat)tableView:(NSTableView *)tableView heightOfRow:(NSInteger)row
{
    CGFloat result = [tableView rowHeight];

    if (row == self.tableView.dropTargetRow - 1 && row > -1)
    {
        result += self.tableView.heightOfDraggedRows;
    }

    return result;
} 
```

请注意，这是简化的代码，而不是我程序中的逐字复制/粘贴。实际上，我最终使这一切都包含在使用代理委托和数据源对象的 NSTableView 子类中，因此上述数据源/委托方法中的代码实际上是在代理对真实委托和数据源的调用的拦截中。这样，真正的数据源和委托不必做任何特殊的事情来获得间隙打开行为。此外，表格视图动画有时会有点不稳定，这不适用于第一行上方的拖动（没有打开间隙，因为没有行可以变得更高）。总而言之，尽管还有进一步改进的空间，但这种方法的效果相当不错。

我仍然想尝试类似的方法，但插入一个空白行（如 Caleb 建议的那样）而不是更改行高。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-27T18:07:35.620

从 Mac OS X 10.9 (Mavericks) 开始，有一个更简单的解决方案可以在 NSTableView 中对拖放进行动画处理：

[aTableView setDraggingDestinationFeedbackStyle:NSTableViewDraggingDestinationFeedbackStyleGap];

当拖动一行时，表格视图将自动插入带有动画的间隙，这比旧的蓝线插入点方法要好得多。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-22T18:00:45.643

完成您所要求的一种方法是在建议的放置点（即两个最近的行之间）插入一个空行。听起来您一直在研究 using `NSTableViewAnimationEffectGap`，正如您所注意到的，它实际上是用于在`-tableView:acceptDrop:row:dropOperation:`.

*由于您想在用户释放鼠标按钮以实际进行拖放之前*打开间隙，因此您可以使用`-insertRowsAtIndexes:withAnimation:`表的`-draggingUpdate:`方法插入一个空白行，同时删除您之前为此拖动插入的任何空白行`-removeRowsAtIndexes:withAnimation:`。酌情使用`NSTableViewAnimationSlideUp`和`NSTableViewAnimationSlideDown`作为这些操作的动画。

# c++-cli - 如何在 Visual Studio 2010 中从 C 调用 vb dll？

> ID：10142677
> 
> 赞同：0
> 
> 时间：2012-04-13T14:26:21.267
> 
> 标签：c++-cli

我在 Visual Studio 2010 中有一个 C 程序。我在 Visual Studio 2010 中创建了一个空项目。我添加了一些 .C 文件和一些 .h 文件。我想从 C 中调用现有的 vb dll。这可能吗？任何人都可以提出一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:49:17.480

Microsoft 描述了从 VB 调用 C DLL：

[http://support.microsoft.com/kb/106553/en-us](http://support.microsoft.com/kb/106553/en-us)

同样，您可以从 C++ 调用托管代码（VB、C#...）：

[http://support.microsoft.com/kb/828736/en-us](http://support.microsoft.com/kb/828736/en-us)

HTH。

# java - 如何在 xsd 中为空格添加验证

> ID：10142680
> 
> 赞同：0
> 
> 时间：2012-04-13T14:26:27.303
> 
> 标签：java, xsd, saxparser

我已经成功创建了基本的 xsd，但是我想为它应该存在并包含至少一个字符的元素添加限制。它也有4个属性。我在添加限制时面临问题，因为我不能使用简单类型，因为元素具有属性。

请提出一些建议

提前致谢

**添加了 OP 在评论中发布的 XSD 数据（原文如此）**

```
<xs:element name="Engines">
  <xs:complexType>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" ref="Engine" />
    </xs:sequence>
    <xs:attribute name="Count" use="required" type="xs:integer" />
  </xs:complexType>
</xs:element>
<xs:element name="Engine">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="Model" type="Model"/>
      <xs:element ref="SerialNumber" />
    </xs:sequence>
  </xs:complexType>
</element>

<xs:simpleType name="trimValueType">
  <xs:restriction base="xs:string">
    <xs:minLength value="1"></xs:minLength>
    <xs:whiteSpace value="collapse"></xs:whiteSpace>
  </xs:restriction>
</xs:simpleType>
<xs:complexTyp‌​e name="Model">
  <xs:simpleContent>
    <xs:extension base="trimValueType">
      <xs:attribute name="ATTRIBUTE" use="required" />
    </xs:extension>
  </xs:simpleContent>
</xs:complexType>

<Engines count = 1> <Engine> <Model ATTRIBUTE = "r\w"> </Model> <SerialNumber ATTRIBUTE = "r/w">1234567</SerialNumber> <Engine> <Engines> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:45:03.367

您必须首先创建一个限制 xsd:string 的简单类型以指定您的文本约束。然后你需要定义一个复杂的类型，它有一个简单的内容，它使用你想要的属性扩展你刚刚创建的简单类型。我加入了一个空格约束，只是为了匹配你的标题，即使你没有在你的问题陈述中特别提到它。

```
<?xml version="1.0" encoding="utf-8" ?>
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:simpleType name="one">
        <xsd:restriction base="xsd:string">
            <xsd:whiteSpace value="collapse"/>
            <xsd:minLength value="1"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:complexType name="two">
        <xsd:simpleContent>
            <xsd:extension base="one">
                <xsd:attribute name="one"/>
                <xsd:attribute name="two"/>
                <xsd:attribute name="etc"/>
            </xsd:extension>
        </xsd:simpleContent>
    </xsd:complexType>
    <xsd:element name="root" type="two"/>
</xsd:schema> 
```

示例 XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" one="anySimpleType" two="anySimpleType" etc="anySimpleType" xmlns="http://tempuri.org/XMLSchema.xsd">root1</root> 
```

# mysql - 在 Play Framework 中强制使用小写表名

> ID：10142682
> 
> 赞同：2
> 
> 时间：2012-04-13T14:26:36.210
> 
> 标签：mysql, jpa, playframework

在这个项目中，我在 Windows 上开发并在 Linux 上部署，并使用 mysql 作为数据库。

由于文件系统的性质，表名（我想还有更多）在 Windows 上不区分大小写，在 *nix 上敏感[[参考]](http://dev.mysql.com/doc/refman/5.6/en/identifier-case-sensitivity.html)

问题是，默认情况下 play/jpa 使用与表的 java 模型类相同的名称（因此它是大写的，例如 UserProfile）。当我转储我的 windows mysql 数据库时，它会转储小写表名。

这意味着由于区分大小写，我无法在 Linux 中导入它们。

有没有办法告诉 Play / JPA 始终为模型使用小写名称？或者我必须`@Table(name="userprofile")`在任何单个模型上设置注释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T15:08:16.680

您需要为休眠使用不同的命名策略。hibernate 有一个改进的 NS

[http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/cfg/ImprovedNamingStrategy.html](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/cfg/ImprovedNamingStrategy.html)

您可以简单地将这一行添加到 application.conf

```
hibernate.ejb.naming_strategy=org.hibernate.cfg.ImprovedNamingStrategy 
```

也看看[这个](http://matthew.mceachen.us/blog/hibernate-naming-strategies-20.html)帖子和[这个](https://stackoverflow.com/questions/1657119/hibernate-create-table-with-names-in-lowercase)问题

# c++ - 在 ARM 上的 Qt 中从 double 到 QString 的错误转换

> ID：10142684
> 
> 赞同：8
> 
> 时间：2012-04-13T13:57:02.150
> 
> 标签：c++, qt, arm

我为 ARMv5TE 构建了 Qt 4.4.3。我尝试将 a 转换`double`为 a `QString`：

```
#include <QtCore/QtCore>
#include <cmath>

int main(int argc, char** argv)
{
  const double pi = M_PI;
  qDebug() << "Pi is : " << pi << "\n but pi is : " << QString::number(pi, 'f', 6);
  printf("printf: %f\n",pi);

  return 0;
} 
```

但得到奇怪的输出：

```
Pi is :  8.6192e+97 
but pi is :  "86191995128153827662389718947289094511677209256133209964237318700300913082475855805240843511529472.0000000000000000"
printf: 3.141593 
```

如何获得正确的字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T23:10:02.093

这看起来是一种字节序问题，但不是您的普通大端与小端问题。ARM 有时对`double`. 来自 Jean-Michel Muller 等人的“浮点算术手册”：

> ...最接近的双精度数 在 x86 和 Linux/IA-64 平台上由内存`-7.0868766365730135 x 10^-268`中的字节序列（从最低到最高）编码 `11 22 33 44 55 66 77 88`（据说它们是 *little-endian*）和在`88 77 66 55 44 33 22 11`大多数 PowerPC 平台上（据说它们是*big-endian*）。一些架构，例如 IA-64、ARM 和 PowerPC，据说是*双端的*。即，它们可能是小端或大端，具体取决于它们的配置。
> 
> 存在一个例外：一些基于 ARM 的平台。ARM处理器传统上采用*浮点加速器*（FPA）架构，双精度数按big-endian顺序分解为两个32位字，并根据机器的字节序，即little-endian存储一般来说，这意味着上面的数字是由序列编码的`55 66 77 88 11 22 33 44`。ARM 最近推出了一种用于浮点运算的新架构：*向量浮点*(VFP)，其中字以处理器的本机字节顺序存储。

当以大端字节顺序查看时，`M_PI`将具有如下所示的表示：

```
0x400921fb54442d18 
```

由 wil 近似的大数`8.6192e+97`具有如下表示：

```
0x54442d18400921fb 
```

如果仔细观察，这两个 32 位字是交换的，但 32 位字内的字节顺序是相同的。显然，ARM“传统”双点格式似乎混淆了 Qt 库（或 Qt 库配置错误）。

我不确定处理器是否使用传统格式并且 Qt 期望它采用 VFP 格式，或者情况是否相反。但这似乎是这两种情况之一。

我也不确定如何解决这个问题——我猜有一些选项可以构建 Qt 来正确处理这个问题。

以下代码片段至少会告诉您`double`编译器正在使用什么格式，这可以帮助您缩小 Qt 中需要更改的范围：

```
unsigned char* b;
unsigned char* e;

double x = -7.0868766365730135e-268;

b = (unsigned char*) &x;
e = b + sizeof(x);

for (; b != e; ++b) {
    printf( "%02x ", *b);
}

    puts(""); 
```

一个普通的小端机器将显示：

```
11 22 33 44 55 66 77 88 
```

* * *

更新一点分析：

目前，我无法对此进行任何真正的调试（目前我什至无法访问我的工作站），但是通过查看[http://qt.gitorious.org](http://qt.gitorious.org)上提供的 Qt 源代码，这里是补充分析：

看起来 Qt 调用了`QLocalePrivate::doubleToString()`qlocale.cpp 中的函数以将 a 转换`double`为字母数字形式。

如果 Qt 是用`QT_QLOCALE_USES_FCVT`定义的方式编译的，那么`QLocalePrivate::doubleToString()`将使用平台的`fcvt()`函数来执行转换。如果*未定义*，则`QT_QLOCALE_USES_FCVT`最终调用以执行转换。该函数直接检查 the 的各个字段，并且似乎假定 the是严格的大端或小端形式（例如，使用and函数分别获取 the 的低位和高位字）。*`QLocalePrivate::doubleToString()``_qdtoa()``double``double``getWord0()``getWord1()``double`*

 *请参阅[http://qt.gitorious.org/qt/qt/blobs/HEAD/src/corelib/tools/qlocale.cpp](http://qt.gitorious.org/qt/qt/blobs/HEAD/src/corelib/tools/qlocale.cpp)和[http://qt.gitorious.org/qt/qt/blobs/HEAD/src/corelib /tools/qlocale_tools.cpp](http://qt.gitorious.org/qt/qt/blobs/HEAD/src/corelib/tools/qlocale_tools.cpp)或您自己的文件副本以获取详细信息。

假设您的平台使用传统的 ARM FPA 表示`double`（其中 32 位的一半以`double`大端顺序存储，无论整个系统是否为小端），我认为您需要构建 Qt`QT_QLOCALE_USES_FCVT`定义的。我相信您需要做的就是`-DQT_QLOCALE_USES_FCVT`在构建 Qt 时将选项传递给配置脚本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T14:54:18.887

相同的代码在带有 Qt 4.7.0 的 x86 机器（运行 Windows XP）上产生正确的输出。

我看到问题根源的以下可能性：

*   一些可能在较新版本的 Qt 中修复的错误
*   为 ARM 编译时出现问题

我在一个类似的问题上发现[了这个论坛帖子](http://www.qtcentre.org/threads/10941-strange-problem-about-QString-number%28double%29?p=58057#post58057)，假设它可能是一个大/小端转换问题。

我不知道如何解决这个问题，因为我根本没有使用 ARM 的经验，但也许这些信息对你有帮助。*

# java - Java/Mysql 如何将整个 SQL 文件注入 mysql 服务器？

> ID：10142687
> 
> 赞同：2
> 
> 时间：2012-04-13T14:26:47.183
> 
> 标签：java, mysql

您将如何从 java 程序将 .sql 文件加载到 mysql 数据库中？我尝试从自包含的 jar 中提取 sql 资源文件，我尝试使用 processBuilder 来定位和运行外部 shell 命令。我已经尝试了所有方法，但似乎没有一个是正确的方法。

**因此，要查看我遇到的问题，只需执行以下操作：**

在任何数据库上做一个 mysqldump：`mysqldump -uroot --routines myDB > ~/Desktop/myDB.sql`

**现在让我们尝试从 java/jdbc api 重新创建整个数据库。如何使用我们的 mydB.sql 文件正确且正确地做到这一点？**

认为您创建了一个很好的 jdbc 语句来循环您的数据库文件可能会很好，但是当您确实获得这样的转储部分时，它会变得丑陋和笨拙

*问题一将遇到以下示例：*

```
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `DOG`
--

DROP TABLE IF EXISTS `DOG`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `DOG` (
  `DOG_ID` mediumint(9) NOT NULL,
  `OWNER_ID` mediumint(9) NOT NULL,
  PRIMARY KEY (`DOG_ID`),
  KEY `CHANNEL_FK1` (`OWNER_ID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */; 
```

**这是jdbc的限制吗？是否有一些我缺少的不错的 api，我可以像 mysql.createDatabase(myDB.sql) 一样调用它们。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:52:22.630

1.  确保 mysql 连接器在您的类路径中，例如 java -cp mysql-connector-java-5.1.13-bin.jar 或者如果您使用 ant 或 NetBeans 构建项目，请确保 mysql 连接器作为库，这样当你构建你的项目时， java -jar YourApplication.jar 应该找到 lib/mysql-connector-java-5.1.13-bin.jar 或者什么。
2.  在您的源代码中，加载驱动程序： Class.forName("com.mysql.jdbc.Driver").newInstance();
3.  加载您的 .sql 文件： String sql = new Scanner(new File("yourfile.sql")).useDelimiter("\Z").next();
4.  连接到您的数据库： Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/database",username,password);
5.  执行你的 sql：Statement st = conn.createStatement();st.execute(sql);

以上假设您的 .sql 文件包含 SQL 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:40:06.457

如果它不能通过 JDBC 工作，那么我推荐这个。

通常我将 ANT 用于此类任务（如执行 mysql 转储文件）：

```
<exec command="mysql -u ${db.user} --password=${db.password} 
                     --database=${db.name}">
    <redirector input="${sql.file}"/>
</exec> 
```

基本上，您可以从您的代码中构造和调用 ant 任务（如果您将必要的 ant 依赖项添加到您的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:36:40.067

我不确定它是最好的方法，但它在我需要在运行时创建数据库的类似情况下对我有用：

首先定义以下变量：

```
private static final String BASE_MYSQL_COMMAND_LINE_STR = "mysql -uUSER -pPASSWORD -h localhost < "; 
```

请将“USER”和“PASSWORD”替换为真实的用户名和密码，或者如果您不想对其进行硬编码，请动态构建字符串。只是在 -u、-p 和实际值之间没有空格。

还定义以下函数：

```
private static void executeCommandInLinuxShell(String command) throws Exception {
            String[] cmd = {"/bin/sh", "-c", command};  
            Process proc = Runtime.getRuntime().exec(cmd);
            BufferedReader bufferedreader = new BufferedReader(new InputStreamReader(proc.getInputStream()));
            String line;
            while ((line = bufferedreader.readLine()) != null);
            bufferedreader.close();
            proc.waitFor();

    } 
```

然后，假设在您的程序中有一个指向“mydB.sql”数据库文件的文件对象“sqlFile”：

```
String scmd = BASE_MYSQL_COMMAND_LINE_STR + sqlFile.getAbsolutePath();
executeCommandInLinuxShell(scmd); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T18:30:17.597

[**Flyway**](http://flywaydb.org)具有高级 SQL 解析器，可以开箱即用地处理 mysql 转储。为您的用例配置它应该是微不足道的。

# sql - 加入 CTE 性能

> ID：10142698
> 
> 赞同：2
> 
> 时间：2012-04-13T14:27:43.857
> 
> 标签：sql, sql-server, performance, common-table-expression

我有一个存储过程，我使用公用表表达式在菜单上构建分层路径（因此它可以显示类似父菜单 -> 子菜单 -> 子子菜单 -> ...）

它非常适合我想要使用它的用途，当我将从递归 CTE 获得的信息放入我真正想要的信息时，问题就出现了。我从我的数据到 CTE 进行内部联接，然后退出分层路径。对于返回约 300 行的内容，存储过程平均需要 15-20 秒。

当我将 CTE 的结果插入临时表并基于它进行连接时，该过程只需不到一秒钟的时间。

我只是想知道为什么只使用 CTE 加入需要这么长时间，或者我是否以某种方式滥用 CTE。

**编辑这本质上是存储过程

```
With Hierarchical_Path (Menu_ID, Parent_ID, Path) 

As
(
Select
    EM.Menu_Id, Parent_ID, 
            Convert(varchar(max), 
            EM.Description) as Path
From
    Menu EM
Where
--EM.Topic_No is null
    EM.Parent_ID = 0 and EM.Disabled = 0
Union All
Select  
    EM.Menu_ID,  
            EM.Parent_ID, 
            Convert(Varchar(max),E.Path + ' -> ' + EM.Description) as Path
From
    Menu EM
Inner Join
    Hierarchical_Path E
On
    EM.Parent_ID = E.Menu_ID    
)

SELECT distinct   
    EM.Description
    ,EMS.Path
FROM
    dbo.Menu em
INNER JOIN
    Hierarchical_Path EMS
ON
    EMS.Menu_ID = em.Menu_Id
    2 more INNER JOINs
    2 Left Joins
    WHERE Clause 
```

当我像这样运行查询（加入 CTE）时，性能大约为 20 秒。

当我将 CTE 结果插入临时表并加入其中时，性能是瞬时的。

再把我的查询分开一点，它似乎挂在 where 子句上。我想我的问题更多的是 CTE 何时运行以及它是否存储在内存中？我在假设它被调用一次然后在内存中停留的假设下运行，但在某些情况下它可以被调用多次吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:57:15.893

不同之处在于 CTE 不持久，而临时表是（至少对于会话）。加入非持久列意味着 SQL 与已经预先评估的临时表中的同一列相比，根本没有数据统计信息。基本上，临时表缓存了您将使用的内容，SQL Server 可以更好地对其进行优化。在加入函数或表变量的结果时也会遇到同样的问题。

我的猜测是您的 CTE 执行计划使用单个线程执行，而您的临时表可以使用多个线程。您可以通过在运行查询时包含实际执行计划并在每个运算符上寻找两个指向相反方向的水平箭头来检查这一点。这表明并行性。

PS - 尝试设置“set statistics io on”和“set statistics time on”以查看运行查询的实际成本是否相同，无论运行持续时间如何。

# iphone - 成功安装“myApp”应用程序后。我需要调用一个服务方法。请问是否可以调用该方法

> ID：10142702
> 
> 赞同：-1
> 
> 时间：2012-04-13T14:27:45.353
> 
> 标签：iphone, ios, ios4

我在谷歌上搜索过，但无法知道当应用程序成功完成安装时调用了哪个事件/方法。我正在寻找类似
if(isAppInstalled) {创建一个肥皂方法并将标签发送到 Web 服务}。
有什么建议吗？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:30:36.993

这是不可能的。您必须等到用户启动您的应用程序才能执行任何代码。

# java - Javascript for Java 的替代插件，为用户提供一种指定掩码的方法

> ID：10142706
> 
> 赞同：0
> 
> 时间：2012-04-13T14:27:59.260
> 
> 标签：java

我正在寻找一种可以在 Java VM 上运行的脚本语言，它可以作为一种简单的脚本语言，用户可以使用它来指定如何从音乐元数据构造文件名。请参阅我之前的相关文章[将一种简单的表达式语言放入](https://stackoverflow.com/questions/6285045/putting-a-simple-expression-language-into-java)推荐使用 Javascript 的 java 中，我使用它并且它有效：

即如果我有一个包含以下元数据的文件：

```
albumartist=U2
album=Boy
trackno=02
title=Twilight 
```

并应用此 javascript 掩码：

```
(albumartist.length>0  ? albumartist +'-' :(artist.length>0 ? artist + '-' : ' ')) + (album.length>0 ? album + '-' :'') + (trackno.length>0 ? trackno + '-' :'')  + title 
```

它会输出

U2-男孩-02-暮光之城

这很棒。

但问题是 Javascript 语法对于普通用户**来说太难了。**

任何人都可以推荐一种替代脚本语言，我可以插件，它给我类似的功能但更简单的语法。例如，如果我可以改用这种语法就好了

```
if(albumartist,albumartist-)else if(artist,artist-)(album,album-)(trackno,trackno)title 
```

并得到相同的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:31:45.650

我建议您考虑使用模板语言而不是脚本语言，例如[Freemarker](http://freemarker.sourceforge.net/)。

无论您选择哪种路径，都要注意接受用户提供的输入并执行它的安全隐患。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T00:38:33.530

也许使用 JSON 是解决问题的好方法。在您给出的示例中，JSON 如下所示：

```
{
  "albumartist": "U2", 
  "album": "Boy", 
  "trackno": 2, 
  "title": "Twilight"     
} 
```

有许多 JSON 到 Java 解析器可用。我使用 Google 的 GSON - [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

有关 JSON 的其他解析器和一般信息，请访问[http://www.json.org/](http://www.json.org/)

# java - 在 Selenium 2/Java 中等待条件的最干净方法？

> ID：10142709
> 
> 赞同：2
> 
> 时间：2012-04-13T14:28:08.053
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我试图找到等待特定字符串出现在页面中的最干净的代码。我现在最好的就是相当笨重

```
new Wait() {
    @Override
    public boolean until() {
        return !webDriver.findElement(By.tagName("html"))
               .getText().contains("please choose another");
    }
}.wait("wait failed!", 60000); 
```

有没有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T15:00:18.163

如果这真的是你想做的，那么

```
webDriver.findElement(By.xpath("//*[contains(text(),'please choose another')]")); 
```

隐[式等待](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#implicitlyWait%28long,%20java.util.concurrent.TimeUnit%29)对我来说似乎好一点（从“干净代码”的角度来看），因为它只是一行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:36:02.580

您可以使用 Webdriver 的内置方法来显式等待 - 请参阅[此处的示例](http://seleniumhq.org/docs/04_webdriver_advanced.html)。

请注意，如果可能，最好检查文本是否在特定元素中，而不是在任何地方。检查它是否在任何地方都可能导致误报（即，如果有人在页面的其他地方添加了相同的字符串，您将不再检查您认为的内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:37:51.937

创建一个 WebDriverWait 类对象

```
WebDriverWait wait = new WebDriverWait(driver, 500);
wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//*[contains(text(),'please choose another']"))); 
```

# java - 不使用休眠模板的服务方法

> ID：10142711
> 
> 赞同：0
> 
> 时间：2012-04-13T14:28:10.227
> 
> 标签：java, spring, hibernate, dao, hibernate-generic-dao

我已经在谷歌上搜索了几个小时，试图找到一个示例，说明如何在使用 DAO 接口时编写**不使用 Springs Hibernate 模板的服务方法。**让我感到困惑的是，当我将*@Transactional*注释放在服务层而不是 DAO 时会发生什么。**服务方法/DAO 接口是否可以互换？**

[这是一个*@Transactional*在 DAO 中的示例](http://sjohn4.wordpress.com/2011/11/16/convert-hibernate-template-into-sessionfactory/)

[这是服务层中的*@Transactional*，但使用*休眠模板*](http://singgihpraditya.wordpress.com/2010/02/13/spring-3-0-and-hibernate-tutorial-part-1/)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:49:21.663

[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/hibernate3/HibernateTemplate.html)建议完全避免使用HibernateTemplate，而直接使用 Hibernate API：

> 注意：从 Hibernate 3.0.1 开始，事务性 Hibernate 访问代码也可以用普通的 Hibernate 样式编码。因此，对于新开始的项目，请考虑采用基于 SessionFactory.getCurrentSession() 的标准 Hibernate3 编码数据访问对象的风格。

并且`@Transactional`注释应该始终放在服务层的方法上。这是划分事务的层。

阅读[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#orm-session-factory-setup](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#orm-session-factory-setup)了解如何设置会话工厂. 完成后，可以将会话工厂注入您的 DAO：

```
@Repository
public class MyDAO {
    @Autowired
    private SessionFactory sessionFactory;

    ...
} 
```

# ruby-on-rails - 如何访问 ActiveRecord 类中的别名属性？我有没有更好的方法？

> ID：10142714
> 
> 赞同：1
> 
> 时间：2012-04-13T14:28:24.563
> 
> 标签：ruby-on-rails, activerecord

我正在与旧数据库交互，并使用`alias_attribute`.

它工作得很好，但我也想获得记录的所有属性的列表。使用`record.attributes`只给了我原始属性，而不是别名。有没有办法可以通过类似的方法列出所有这些？

也许我最好只做一个查找哈希？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:12:55.273

恐怕无法获得别名属性列表。该`alias_attribute`方法除了创建几个 getter/setter 之外什么也没做。此方法不会以任何方式“标记”这些方法。

# c# - 如何在 Windows Phone 应用程序中获取 Youtube 上的视频标题？

> ID：10142715
> 
> 赞同：1
> 
> 时间：2012-04-13T14:28:27.807
> 
> 标签：c#, windows-phone-7, youtube-api

我在 Windows Phone 上有一个应用程序。在我的应用程序中，我在 youtube 上展示了一些视频。当用户点击视频缩略图时，它将导航到浏览器上的 youtube 链接。我在这里找到了如何获取 youtube 视频的缩略图[如何在 windows phone 7 中的应用程序上获取 youtube 视频的缩略图，](https://stackoverflow.com/questions/10131693/how-can-i-get-thumbnail-of-youtube-video-on-my-application-in-windows-phone-7/10139218#10139218)现在我想获取视频的标题？请告诉我如何解决它？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:39:20.227

看看这个[GetVideoTitle](http://www.codeproject.com/Articles/84903/Downloading-Youtube-Videos-C-WinForm)，他们使用 dll，其中包含函数 'GetVideoTitle'

# iphone - 从 Detail 在 Master 中插入新的 UITableViewCell

> ID：10142716
> 
> 赞同：0
> 
> 时间：2012-04-13T14:28:28.957
> 
> 标签：iphone, xcode, uitableview, master-detail

我有一个简单的主从应用程序，我正在使用详细视图来配置数据以插入到主列表中。

我有一个名为“Calculation”的自定义类，这是我需要插入每一行的对象。

我可以将对象从详细视图传递到主视图就好了，它只是不会插入新行。

在详细视图中，我启动我的对象，用数据填充它并使用自定义 segue 将其发送到 MasterViewController 中的“insertNewObject”方法：

```
- (IBAction)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
    [f setNumberStyle:NSNumberFormatterDecimalStyle];
    NSString *s = @"1";
    NSNumber *n = [f numberFromString:s];

    Calculation *calc = [[Calculation alloc] initWithValue:@"$1661.70" descr:@"1 Ounce 24k Gold" textInput:@"1" percentDisplay:@"0%" purityIndex:n metalIndex:n weightUnitIndex:n sliderValue:n];

    [segue.destinationViewController insertNewObject:calc];
} 
```

在 MasterViewController 中，这是我的插入代码：

```
 -(void)insertNewObject:(NSObject *)newCalculation {

        if (!_objects) {
            _objects = [[NSMutableArray alloc] init];
        }
        [_objects insertObject:newCalculation atIndex:0];
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];

        [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];

    }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    NSObject *object = [_objects objectAtIndex:indexPath.row];
    cell.textLabel.text = [object valueForKey:@"value"];
    cell.detailTextLabel.text = [object valueForKey:@"descr"];
    cell.textLabel.shadowColor = [UIColor blackColor];
    cell.textLabel.shadowOffset = CGSizeMake(0, -1);
    return cell;
} 
```

我可以在 MVC 中使用 NSLog 整天打印对象，但无论我从详细视图控制器添加对象多少次，数组计数始终为 1，并且不会将任何单元格添加到表视图中。

如果我在 MVC 中实例化对象并将其插入，则相同的确切代码可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:35:43.607

segue 确实是从细节向主控发送数据的错误机制。（它在另一个方向上很好用！）您最好定义一个具有`-(void)insertNewObject:(NSObject *)newCalculation;`所需方法的委托协议，让您的主人实现该协议，并将**其**作为委托传递给您的细节控制器。

然后细节控制器只调用`[delegate insertNewObject:calc];`.

# c# - SQL-CLR 存储过程不返回值

> ID：10142717
> 
> 赞同：0
> 
> 时间：2012-04-13T14:28:30.943
> 
> 标签：c#, sql-server-2008-r2, sqlclr, clrstoredprocedure

我查看了 Stackoverflow 并在[这里发现了几乎相同的问题](https://stackoverflow.com/questions/8070403/clr-stored-procedure-return-value-null)。一年前有人问过，还没人回答。也许我会比 user1038334 更幸运，有人会帮助我。

我有一个 SQL CLR 存储过程，它可以正常工作好几天，直到发生奇怪的事情。我的存储过程更新表并返回一个值作为结果代码。因此，通过查看此值，我可以确定是否出现问题。问题在于接收这个结果值。C# 代码在接收到返回值时引发异常。

```
var returnValue = new SqlParameter {Direction = ParameterDirection.ReturnValue};
command.Parameters.Add(returnValue);

connection.Open();
command.ExecuteNonQuery();

return (int)returnValue.Value; //<-- here is an exception 
```

最有趣的是，如果我连接 SQL Profiler，捕获查询，然后在 SQL Server Management Studio 中执行此查询，我仍然可以毫无问题地获得结果值：

```
DECLARE @RC INT
EXECUTE @RC = MyClrStoreProc
SELECT @RC 
```

一旦我重新发布 CLR 程序集或重新启动 SQL Server，一切都会得到修复。

我很确定这种奇怪的行为应该是有原因的，但我找不到。

*   SQL Server 版本：Microsoft SQL Server Developer Edition（64 位）-v.10.50.1765.0

*   主机操作系统版本：Microsoft Windows NT 6.1 (7601)

*   .Net版本：v4.0.30319

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:50:03.447

这是一个 SQL Server 错误，[累积更新包 8](http://support.microsoft.com/kb/2536225)修复了该问题。

# network-programming - 关于windows xp上telnet服务器的返回值

> ID：10142720
> 
> 赞同：0
> 
> 时间：2012-04-13T14:28:41.457
> 
> 标签：network-programming, windows-xp, network-protocols

我正在 xp 上编写一个 telnet 代理。现在我可以远程登录到系统的远程登录服务器并打印它的返回值发送回我的程序。

我发现一个非常令人费解的现象。当我第一次 telnet 到服务器时，它会要求我登录。我输入`"tamlok"`，我可以看到它向我发送`"116,97,109,108,111,107,10,13"`了 ascii 的值`"tamlok"(10 and 13 means '\n' and '\r')`。

但是登录后，我`"tamlok"`再次输入。它发回给我`"27,91,56,59,51,52,72,116,0,97,0,108,0,111,0,107,0,27,91,57,59,49,72"`。

我建议它返回 unicode 以便`"116"`变成`"116,0"`等等。但我无法理解序列 `"27,91,56,59,51,52,72"`和`"27,91,57,59,49,72"`. 我认为这可能是一个特殊功能的序列，就像`{0x1B, 0x5B, 0x48, 0x1B, 0x5B, 0x4A}`清除控制台一样。

那么，如何解读这一点呢？欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:34:59.957

感谢 Joachim Pileborg。现在很明显它是终端控制代码。[一个例子](http://www.termsys.demon.co.uk/vtansi.htm)。所以 "27,91,56,59,51,52,72" 是 "[Esc][8;34H" 适合模式： Cursor Home [{ROW};{COLUMN}H 设置光标位置，后续文本将开始。如果没有提供行/列参数（即[H），光标将移动到屏幕左上角的起始位置。27,91,57,59,49,72”也是如此。

# linq - 如何获得今天的所有生日？

> ID：10142724
> 
> 赞同：1
> 
> 时间：2012-04-13T14:28:47.257
> 
> 标签：linq, datetime, dynamics-crm-2011

有谁知道如何进行获取今天所有生日的 Linq 查询？下面的代码不起作用：

```
var getBirthdays = 
    orgContext.CreateQuery<Contact>()
              .Where(c => c.BirthDate != null 
                          && c.BirthDate.Value.Month == DateTime.Now.Month).ToList(); 
```

我收到这样的错误：

> “'where' 条件无效。实体成员正在调用无效的属性或方法。”

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:09:43.343

每当供应商编写一个由四部分组成的博客系列，介绍如何做一些简单的事情，比如寻找生日（就像微软在 2007 年所做的那样），你必须知道这并不简单。据我所知，从那以后就没有更新了。

*   [查找即将到来的生日的联系人](http://blogs.msdn.com/b/crm/archive/2007/05/17/find-contacts-with-upcoming-birthdays.aspx)
*   [查找即将到来的生日的联系人 - 第 2 部分](http://blogs.msdn.com/b/crm/archive/2007/05/17/find-contacts-with-upcoming-birthdays-ii.aspx)
*   [查找即将到来的生日的联系人 - 第 3 部分和第 4 部分](http://blogs.msdn.com/b/crm/archive/2007/05/17/find-contacts-with-upcoming-birthdays-iii.aspx)

所以你的选择有限：

1.  每次通过插件创建或更新联系人时，创建名为类似的新字段`new_birthmonth`，然后在这些字段上进行查询。`new_birthday``int`
2.  使用[Dynamic Linq](https://stackoverflow.com/questions/848415/linq-dynamic-where-clause "LINQ - 动态 WHERE 子句？")`OR`在您的子句中构造一个子句`WHERE`，检查生日是否在合理的年份范围内（例如，140 代表长寿）（下面的代码）。

```
List<string> birthdays = new List<string>(); //will contain list of OR clauses

//makes sure no CRM unsupported dates are passed (less than 1/1/1900)
for (int i = Math.Min(140, DateTime.Today.Year - 1900); i > -1; i--) 
{
    //adds a different date per year
    birthdays.Add
    (
        string.Format
        (
            //DateTimes are stored in UTC
            "BirthDate = DateTime.Parse(\"{0}\")",
            DateTime.Today.ToUniversalTime().AddYears(-i)
        )
    );
}

//completes the correct dynamic linq OR clause
string birthdayList = string.Join(" OR ", birthdays);

var getBirthdays = orgContext.CreateQuery<Xrm.Contact>()
    .Where(c => c.BirthDate != null)
    .Where(birthdayList)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:38:29.360

我基于“Peter Majeed”的示例并使用“LinqKit”解决了我的问题！

```
var predicate = PredicateBuilder.False<Contact>();
for (int i = Math.Min(140, DateTime.Today.Year - 1900); i > -1; i--)
{
    DateTime cleanDateTime = new DateTime(DateTime.Today.AddYears(-i).Year, DateTime.Today.AddYears(-1).Month, DateTime.Today.AddYears(-i).Day);
    predicate = predicate.Or(p => p.BirthDate == cleanDateTime.ToUniversalTime());
}
var getBirthdays = (from c in orgContext.CreateQuery<Contact>().AsExpandable().Where(predicate)
                     select c).ToList(); 
```

上面的查询给了我正确的结果！感谢所有帮助过我的人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T15:18:33.290

如果 c.BirthDate 可以为空，则必须先将其转换为日期时间：

```
var getBirthdays = orgContext.CreateQuery<Contact>()
                             .Where(c => c.BirthDate != null && 
                                     (Convert.ToDateTime(c.BirthDate).Month == 
                                        DateTime.Now.Month) && 
                                      Convert.ToDateTime(c.BirthDate).Day == 
                                        DateTime.Now.Day))
                             .ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T18:53:27.513

如果您的情况可能，您可以使用查询来获取此信息？

```
//set up the condition + filter
var ce = new Microsoft.Xrm.Sdk.Query.ConditionExpression();
ce.Operator = Microsoft.Xrm.Sdk.Query.ConditionOperator.LastXDays;
ce.AttributeName = "birthdate";
ce.Values.Add(30);

var fe = new Microsoft.Xrm.Sdk.Query.FilterExpression();
fe.AddCondition(ce);

//build query
var query = new Microsoft.Xrm.Sdk.Query.QueryExpression();
query.EntityName = "contact";
query.Criteria.AddFilter(fe);

//get results
var results = CrmHelperV5.OrgProxy.RetrieveMultiple(query);

//if you want early bound entities, convert here.
var contacts = new List<Contact>();
foreach(var result in results.Entities)
{
    contacts.Add(result.ToEntity<Contact>());
} 
```

[您可能需要调查过滤器 + 条件的其他运算符](http://msdn.microsoft.com/en-us/library/bb959309.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-09T04:50:10.590

您可以使用 QueryExpression（它适用于 Microsoft CRM 插件）

```
public EntityCollection getBirthdateList(IOrganizationService orgsService)
    {
        List<string> birthdays = new List<string>(); 

        //makes sure no CRM unsupported dates are passed (less than 1/1/1900)
        for (int i = Math.Min(140, DateTime.Today.Year - 1930); i > -1; i--)
        {
            //adds a different date per year
            birthdays.Add
            (
                DateTime.Now.AddYears(-i).ToString("yyyy-MM-dd")
            ); 
        }

        // Instantiate QueryExpression 
        var query = new QueryExpression("contact");

        // Define filter QEquote.Criteria
        var queryfilter = new FilterExpression();
        query.Criteria.AddFilter(queryfilter);

        // Define filter 
        queryfilter.FilterOperator = LogicalOperator.Or;
        queryfilter.AddCondition("birthdate",ConditionOperator.In,birthdays.ToArray());
        return orgsService.RetrieveMultiple(query); ;
    } 
```

# c# - Skype4COM 获取最近的所有聊天记录

> ID：10142725
> 
> 赞同：0
> 
> 时间：2012-04-13T14:28:56.663
> 
> 标签：c#, skype, skype4com

我制作了一个代码来获取所有联系人，但现在我想获取所有聊天组。如果您从未使用过 Skype4COM API，请不要再阅读本主题。

用于收集所有联系人

```
 try
    {
        for (int i = 0; i < skype.HardwiredGroups.Count; i++)
            if (skype.HardwiredGroups[i + 1].Type == TGroupType.grpAllFriends)
            {
                for (int j = skype.HardwiredGroups[i + 1].Users.Count; j > 0; j--)
                    listBox1.Items.Add(skype.HardwiredGroups[i + 1].Users[j].Handle);
                button17.Enabled = false;
                break;
            }
    }
    catch (Exception eoi){} 
```

有什么想法可以建立一个组列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:23:37.567

```
private List<string> getChats(Skype skype)
{
    List<string> r = new List<string>();

    foreach (Chat c in skype.Chats)
         try { r.Add(c.Name); } catch (Exception) {}

    return r;
} 
```

我们必须尝试{} catch{}，因为 Skype 会生成无效聊天，如果我们尝试访问它们会抛出 COMException。

对于列表框：

```
foreach (Chat c in skype.Chats) {
     try
     {
         listBox1.Items.Add(c.Name);
     } catch (Exception) {}
} 
```

然后，您可以`skype.get_Chat(value)`在列表框中的每个项目上使用。

# vba - VLOOKUP vba 中的参考变量工作表

> ID：10142726
> 
> 赞同：2
> 
> 时间：2012-04-13T14:28:58.027
> 
> 标签：vba, excel, excel-2007

我正在编写一个宏，它根据现有工作表上的值创建可变工作表。我很好地管理了这部分，但现在我需要在另一个引用新创建的工作表的工作表上添加一个 VLOOKUP 公式。新工作表的名称没有固定模式，因此我无法引用它们。这是我用来创建新工作表的代码：

```
Dim ws As Worksheet
Dim rngCriteria As Range
Dim sName As String
Dim I As Long
Dim LastRow As Long

    LastRow = Cells(Rows.Count, 1).End(xlUp).Row

    With Sheets("Part Type REC")
        If .AutoFilterMode = True Then .AutoFilterMode = False

        .Range("D1:D" & LastRow).AdvancedFilter Action:=xlFilterCopy, CopyToRange:=.Range("J1"), Unique:=True

        Set rngCriteria = .Range("J1").CurrentRegion

        For I = 2 To .Cells(Rows.Count, "J").End(xlUp).Row
            sName = .Cells(I, "J")
            Set ws = ThisWorkbook.Worksheets.Add
            ws.Name = sName
            .Range("D1:D" & LastRow).AutoFilter Field:=1, Criteria1:="=" & .Cells(I, "J").Value
            .Range("A1:H" & LastRow).SpecialCells(xlCellTypeVisible).Copy Destination:=ws.Range("A1")
        Next I

        .AutoFilterMode = False
    End With
    Sheets("Part Type REC").Select
    Columns("J:J").Select
    Selection.ClearContents
    Range("A1").Select 
```

这是我需要引用新工作表的 VLOOKUP：

```
Sheets("TP Parts").Select
Range("O2").Select
Application.CutCopyMode = False
ActiveCell.FormulaR1C1 = "=VLOOKUP(RC[-1],'ws.name'!C[-14],1,FALSE)"
Range("O2").Select 
```

我哪里错了？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:34:01.080

试试这个（**未经测试 - 只是在这里输入**）

```
Range("O2").FormulaR1C1 = "=VLOOKUP(RC[-1]," & ws.name & "!C[-14],1,FALSE)" 
```

# objective-c - 如何访问 UITextField 的 selectedTextRange UITextPosition 对象的属性？

> ID：10142728
> 
> 赞同：1
> 
> 时间：2012-04-13T14:28:59.443
> 
> 标签：objective-c, ios, uitextfield, textselection, uitextposition

我正在尝试使用其属性（从[协议](https://developer.apple.com/documentation/uikit/uitextinput)`UITextField`中获得）来建立实例的文本选择的开始和结束位置。但是，我不知道如何访问组成和属性的对象的属性。`selectedTextRange`[`UITextInput`](https://developer.apple.com/documentation/uikit/uitextinput)`UITextPosition``start``end``selectedTextRange`

[Apple 在 UITextPosition 上的文档目前](https://developer.apple.com/documentation/uikit/uitextposition)很糟糕，没有提供任何方法或属性，尽管我知道对象中有这样的属性，因为 NSLogging 给出了这个：

```
<UITextPositionImpl: 0x6aaeb60>
<<WebVisiblePosition: 0x6aa40e0>(offset=5, context=([s|a], [u+0073|u+0061])> 
```

在这个例子中，“偏移”是正确的，上下文显示了选择点两侧的字符（“s”和“a”），但我不知道如何访问这个模糊`WebVisiblePosition`的类。所以，简而言之，有没有一种方法可以使用`UITextPosition`来自的对象检索我想要的详细信息`UITextField`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:42:52.327

Of course, just after asking my question I found the answer, in this SO question: [UITextPosition in UITextField](https://stackoverflow.com/questions/9766077/uitextposition-in-uitextfield).

It seems that when used as part of `UITextField`, the `UITextPosition` objects are not meant to be tinkered with directly, but used to feed other methods. In this case, the method `offsetFromPosition:toPosition:`, along with the text field property `beginningOfDocument`, can be used to return an `NSInteger` of a selection index.

# ios - 切换到其他视图会破坏应用程序 xcode

> ID：10142729
> 
> 赞同：0
> 
> 时间：2012-04-13T14:29:04.213
> 
> 标签：ios, xcode, ipad, crash, viewswitcher

我正在开发一个应用程序，但是当我从第一个视图切换到第二个视图（游戏级别）时。游戏中断：

```
@autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    } 
```

并带有警报威胁 1：信号 SIGABRT。

我不知道为什么，在我的其他视图中，这段代码可以工作，但是当我想切换到这个视图时，它就崩溃了。我的切换代码是：

```
-(void)collision {

if (CGRectIntersectsRect(Redsquare.frame, Invisible.frame)) {
        Level2 *switchtosecondlevelchapter1 = [[Level2 alloc] initWithNibName:nil bundle:nil];

        [self presentModalViewController:switchtosecondlevelchapter1 animated:YES];
    }
} 
```

我希望你能帮助我，我是新手。先谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:42:04.633

Is your nib name for Level2 literally "Level2"... in that case you can provide nil to initWithNibName: But also add break points and NSLog to debug and see where it is last called... for example you're literal presentModalViewController: code might be fine.... but your CGRectIntersectsRect might be... off.... Is everything initialized/non-zero Look at these different factors and reply as comment

# excel - 将 Excel 公式类型更改为 R1C1

> ID：10142732
> 
> 赞同：0
> 
> 时间：2012-04-13T14:29:13.653
> 
> 标签：excel, types, formula

我想`Application.Convertformula`在 C# 中使用来获取 R1C1 类型。并以 R1C1 格式寻址。

有谁知道如何使用它？

因为这不起作用！：

```
Excel.Range range = xlWorkSheet.get_Range("R1C1"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:52:21.140

像这样的东西？`Excel.Range range = xlWorkSheet.Range[topLeft, bottomRight];`

不确定您使用的是什么 API，但请参阅有关该用法的[这篇文章，其中建议改用](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.get_range.aspx)[Range 属性](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.range.aspx)。另请注意，这两个参数都需要两个参数，并且您只提供一个，两个引用都作为一个值。那`"R1", "C1"`不是`"R1C1"`，并且可能`Range["C1", "R1"]`假设这是您想要的范围，首先是左上角的参考。

# javascript - JS：如何将此字符串转换为日期对象

> ID：10142733
> 
> 赞同：2
> 
> 时间：2012-04-13T14:29:17.583
> 
> 标签：javascript, date

字符串是

```
2012-04-13T22:59:33 
```

我试过`Date.parse(str, "Y-m-dTH:i:s")`哪个不适合我，我不确定那个“T”代表什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T14:30:24.043

只需将其作为日期的参数：

```
var date = new Date("2012-04-13T22:59:33"); 
```

如果这在旧浏览器中不起作用，请尝试：

```
var str = "2012-04-13T22:59:33",
    elems = str.split("T"),
    date = elems[0].split("-"),
    time = elems[1].split(":"),
    result = new Date(date[0],date[1]-1,date[2],time[0],time[1],time[2]); 
```

# xml - 使用 Scala 提取具有特定子元素内容的 XML 元素

> ID：10142737
> 
> 赞同：3
> 
> 时间：2012-04-13T14:29:26.277
> 
> 标签：xml, scala

对于这样的 XML 片段：

```
val fruits =
<fruits>
  <fruit>
    <name>apple</name>
    <taste>red</taste>
  </fruit>
  <fruit>
    <name>banana</name>
    <taste>yellow</taste>
  </fruit>
  <fruit>
    <name>banana</name>
    <taste>green</taste>
  </fruit>
  <fruit>
    <name>apple</name>
    <taste>green</taste>
  </fruit>
</fruits> 
```

做类似的事情：

```
fruits \\ "fruit" 
```

`scala.xml.NodeSeq`将返回一个包含所有水果和子节点的类型序列。

如何将此序列限制为仅包含内部带有“香蕉”的水果元素。即，我希望结果是：

```
<fruits>
  <fruit>
    <name>banana</name>
    <taste>yellow</taste>
  </fruit>
  <fruit>
    <name>banana</name>
    <taste>green</taste>
  </fruit>
<fruits> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:38:44.930

```
(fruits \\ "fruit").filter(x =>      // filter the sequence of fruits
  (x \\ "name")                      // find name nodes
    .flatMap(_.child.map(_.text))    // get all name node text values
    .contains("banana"))             // see which name nodes contain "banana" 
```

返回`NodeSeq`：

```
 <fruit>
    <name>banana</name>
    <taste>yellow</taste>
  </fruit>
  <fruit>
    <name>banana</name>
    <taste>green</taste>
  </fruit> 
```

# javascript - 使用 AJAX 拉入页面时 Dojo Dijit TimeTextBox 不工作

> ID：10142738
> 
> 赞同：0
> 
> 时间：2012-04-13T14:29:31.457
> 
> 标签：javascript, dojo

我有一个带有菜单按钮的主页。单击时，它们会使用 AJAX 更改主要的“内容”区域。在此页面的标题中，我有所有适当的 Dojo 引用。
我知道 AJAX 可以正常工作，因为我已经成功地在内容区域中拉入并显示数据，并且我知道 Dojo Dijit TimeTextBox 可以正常工作，因为我在使用 AJAX 进行任何调用之前已经成功显示了它。

当我尝试使用 AJAX 进行调用并为 TimeTextBox 小部件拉入新输入字段时，它们仅显示为常规文本框，并且似乎忽略了我将它们设置为 TimeTextBox 的事实。

谁能告诉我如何解决这个问题？

编辑：这是代码：

 `````
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Admin Page</title>
    <link rel="stylesheet" type="text/css" href="styles/adminPage.css" />
    <link rel="stylesheet" type="text/css" href="styles/adminStyle.css" />
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6.1/dojo/resources/dojo.css"> 
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6.1/dijit/themes/claro/claro.css">
    <script  
            type="text/javascript" 
            src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" 
            djConfig="parseOnLoad:true"></script>
    <script type="text/javascript">
        dojo.require("dojo.parser");
        dojo.require("dijit.form.Button");
        dojo.require("dijit.form.TimeTextBox");
    </script>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
        require(["dojo/ready", "dijit/form/TimeTextBox"], 
        function(ready, TimeTextBox){
            ready(function(){
                new TimeTextBox({name: "timeInput", value: new Date(),
                    constraints: {
                        timePattern: 'HH:mm:ss',
                        clickableIncrement: 'T00:15:00',
                        visibleIncrement: 'T00:15:00',
                        visibleRange: 'T01:00:00'
                    }
                }, "timeInput");
            });
        });

        function getPage(page) 
        {
    $.ajax({
        url: "admin"+page+".php",   
        type: "POST",
        cache: false,
        success: function (html) {              
            $('#content').html(html);
                            $('#content').fadeIn('slow');
                            }
    });

        }
    </script>

</head>
<body class="claro">
    <div id="container">
        <div id="header">
            <span class="headerTitle">Lehman Nursery</span>
        </div>
        <div id="content">
            <input type='text' name='date1' id='time1' value='T15:00:00'
    data-dojo-type='dijit.form.TimeTextBox' 
    required='true' />
        </div>
        <div id="menu">
            <a onclick="getPage('Home')">
                <div id="homeButton" class="menuAppearance">
                    <img src="images/icons/home.png"/><br />
                </div>
            </a>
            <a onclick="getPage('Links')">
                <div class="button menuAppearance">
                    <div class="menuTitle"><img src="images/icons/links.png"/><br />Links</div>
                    <div class="description">

                    </div>
                </div>
            </a>
            <a onclick="getPage('Hours')">
                <div class="button menuAppearance">
                    <div class="menuTitle"><img src="images/icons/pictures.png"/><br />Pictures</div>
                    <div class="description">

                    </div>
                </div>
            </a>
            <a onclick=getPage('Events')>
                <div class="button menuAppearance">
                    <div class="menuTitle"><img src="images/icons/events.png"/><br />Events</div>
                    <div class="description">

                    </div>
                </div>
            </a>
            <a onclick=getPage('Feedback')>
                <div class="button menuAppearance">
                    <div class="menuTitle"><img src="images/icons/feedback.png"/><br />Feedback</div>
                    <div class="description">

                    </div>
                </div>
            </a>
        </div>
    </div>
</body> 
````  ````
<form>
    <input type="text" name="date1" id="time1" value="T15:00:00"
    data-dojo-type="dijit/form/TimeTextBox"
    onChange="require(['dojo/dom'], function(dom){dom.byId('val').value=dom.byId('time1').value.toString().replace(/.*1970\s(\S+).*/,'T$1')})"
    required="true" /></form> 
```

^^也就是被拉进来的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:16:12.027

那些s的css文件`dijit`被拉起来了吗？您可能希望`require`在开始时（页面加载时）将它们缓存起来，并在`dijit`通过 AJAX 拉取 s 时使用它们。

编辑：不确定，但可以建议您尝试为`startup()`您创建的小部件添加调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:55:20.103

在我看来，就像您忘记打电话一样：

```
dojo.parser.parse(); 
```

设置内容后我你的ajax调用。它应该是这样的：

```
function getPage(page) 
{
$.ajax({
    url: "admin"+page+".php",   
    type: "POST",
    cache: false,
    success: function (html) {              
        $('#content').html(html);
        dojo.parser.parse();
        $('#content').fadeIn('slow');
    }
});
} 
```

dojo 解析器不会自己执行，这样做的资源太昂贵，所以每次内容更改时，您必须添加一个 dijit，您必须调用 dojo.parser.parse();``

# c# - 将默认选中项更改为无

> ID：10142742
> 
> 赞同：0
> 
> 时间：2012-04-13T14:29:37.570
> 
> 标签：c#, windows-forms-designer, selecteditem

我有一个`WindowsForm`包含很多`UserControl`. 每个`UserControl`都有一个`PictureBox`，几个`TextBox`和一个`Button`。

一旦我的程序加载，我的第一个`TextBox`以蓝色突出显示，我不希望这样。

事实上，我根本不想选择任何东西。（`Buttons`等等`TextBox`。）我已经查看了属性，但我找不到完全删除这个“功能”的确切方法。我的一切`TextBox`都`ReadOnly`可以`Write/Read`在程序运行时变成。

任何想法我怎么能做到这一点？

提前致谢。

* * *

更新

将属性更改`TabStop`为 false 完成了部分工作，因为它根本不允许使用选项卡进行选择。但我不想阻止用户使用选项卡在框之间导航，我只是在运行程序时不想要任何选择。还有其他方法吗？

再次感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:53:27.607

在表单上加载设置焦点到任何标签或任何其他不是表单上制表位的控件

> ```
> private void Form1_Load(object sender, EventArgs e)  
> { 
>   this.ActiveControl = label1;       
> } 
> ```
> 
> [如何从 WinForms 中的 TextBox 中移除焦点？](https://stackoverflow.com/questions/1140250/how-to-remove-focus-from-a-textbox-in-c-winforms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:35:48.863

对于文本框等，您需要将 TabFocus 设置为 false

```
//textBox1.TabFocus = false;

textBox1.TabStop = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T09:51:07.893

组合框名称.SelectedIndex = -1;

# scroll - 创建水平滚动 div 而不定义特定宽度？

> ID：10142745
> 
> 赞同：1
> 
> 时间：2012-04-13T14:29:47.743
> 
> 标签：scroll

我试图创建一个水平滚动的画廊，但我想避免在 div 上定义宽度。其他人正在触摸 html - 我希望她能够放入尽可能多的 li 而无需触摸 css 并重新定义宽度。

模拟网站在这里：rachelbeen.com/Carmen。

Safari 会识别内容的结束位置并停止水平滚动 - 但 Firefox 会保留由 width:6600px 定义的额外空间；在#gallery 上。我该如何阻止这种情况发生？

如果可能，希望避免使用插件并仅使用 CSS。

谢谢，

-雷切尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:12:36.053

我有同样的问题，我试过这个：

```
#full{margin:0 auto; overflow:auto; height:100%; width:1050px;}
// width is just for controlling the viewport.

#holder{float:left; margin-right:-30000px;}

.box{float:left; margin:2px;} 
```

和**HTML**应该是这样的：

```
<div id="full">
    <div id="holder">
        <div id="box1" class="box"></div>
        <div id="box2" class="box"></div>
    </div>
</div> 
```

根据需要添加许多 DIV，它会为您的框腾出更多空间，而无需为其指定特定宽度。我希望它对你有帮助。

# sql - 如何在运行时更改包变量值？

> ID：10142746
> 
> 赞同：2
> 
> 时间：2012-04-13T14:29:59.133
> 
> 标签：sql, ssis

我正在运行一个 SSIS 包，我想在运行时设置所需变量的值。这里有一个例子

`variable1= 1145554478 nvarchar(30)`

我正在使用 nvarchar，因为我正在向字符串中添加更多字符。

```
variable2= [ + variable1 + _S] 
```

`variable1`并且`variable2`是包变量。

我已经搜索了在运行时为变量设置值的方法。正如我所想，似乎可以使用 SQL 任务编辑器来完成。所以，我创造了一个。`variable1`将输入值设置`ResultSet`为单行，并将其设置为变量 2。

然后在我写的代码中

```
set Variable2 = '[' + ? + '_S]' 
```

它不起作用，这是错误

> 错误：执行 SQL 任务时出现 0xC002F210，执行 SQL 任务：执行查询“set Variable2 = '[' + ? + '_S]'”失败，出现以下错误：“第 1 行：'=' 附近的语法不正确。”。可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。任务失败：执行 SQL 任务。

SQL 任务编辑器是在运行时设置变量的最佳方式吗？

我认为我在任务编辑器中编写的代码是错误的，因为其中的代码并不总是经常使用相同的普通 SQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:37:00.750

您不能在 SQL 语句中设置 SSIS 变量的值，而是返回该值并将其分配给您的变量。

将您的声明更改为

```
SELECT '[' + ? + '_S]' 
```

将结果集更改为“单行”，然后在左侧的“结果集”下添加结果名称为 0 的变量

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T15:30:11.103

这是一种在运行时根据另一个变量的值来操作变量值的方法。该示例使用 SSIS 2008 R2，但所有 SSIS 版本的功能都相同。

*   创建一个新的 SSIS 包。

*   右键单击包上的任意位置，然后`Variables`从上下文菜单中选择。将显示*变量窗格。*

*   在*变量*窗格中，创建两个名为`Variable1`和`Variable2`数据类型的新变量**`String`**。

*   让我们设置`Variable1`值**Test_Value**。

    ![变量](../Images/5bd5dc612a7b627978f612326a27ddc7.png)

*   选择第二个变量 Variable2 并按 F4 以显示 Properties 窗格。

*   在属性窗格中，将属性更改`EvaluateAsExpression`为**True**。

*   然后单击属性上的*省略号*按钮。`Expression`

    ![变量 2 的属性](../Images/ffa00ce2ea718db4c080601de2afd798.png)

*   在“表达式生成器”对话框中，将表达式粘贴**`"[" + @[User::Variable1] + "_S]"`**到`Expression`文本区域中。

*   如果单击 Evaluate Expression 按钮，您将看到 Variable2 将计算为的值。在运行时，变量`Variable2`将自动计算为`Variable1`使用表达式时存在的值。

*   表达式生成器也可以允许制定更复杂的表达式。[单击此链接](https://stackoverflow.com/a/6925391/756519)可查看另一个表达式示例。

希望有帮助。

![表达式生成器](../Images/f5d8a66d70efd745768e37f2abc6c1e3.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T14:31:59.053

最简单的方法（通常）是创建一个脚本任务，然后用 C# 或 VB 编写代码。

# zxing - 减少 ZXing 生成的二维码的边框宽度？

> ID：10142748
> 
> 赞同：49
> 
> 时间：2012-04-13T14:30:01.487
> 
> 标签：zxing

我`com.google.zxing.qrcode.QRCodeWriter`用于对数据进行编码并`com.google.zxing.client.j2se.MatrixToImageWriter`生成 QR 码图像。在 400x400 的图像上，代码周围有大约 52 像素宽的边框。我希望这个边框更窄，可能是 15 像素，但我在 API 中看不到任何这样做的东西。我在文档中遗漏了什么吗？还是我需要自己处理图像？

作为参考，这里是一个使用 ZXing 库生成的 400x400 QR 码示例：

![二维码示例](../Images/214c79c3f165f3112e519892e4108d66.png)

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-04-13T14:53:33.237

QR 规范需要四个模块的静区，这就是[zxing 创建](http://en.wikipedia.org/wiki/Postel%27s_law)的。（参见`QUIET_ZONE_SIZE`QRCodeWriter.renderResult [。](https://github.com/zxing/zxing/blob/master/core/src/main/java/com/google/zxing/qrcode/QRCodeWriter.java#L38)）

最新版本的 ZXing 允许您通过提供带有[`EncodeHintType.MARGIN`](https://zxing.github.io/zxing/apidocs/com/google/zxing/EncodeHintType.html#MARGIN)键的 int 值来设置静区的大小（基本上是 QR 码的固有填充）。只需将其包含在`Map`您提供给`Writer`'[`encode(...)`](http://zxing.org/w/docs/javadoc/com/google/zxing/MultiFormatWriter.html#encode%28java.lang.String,%20com.google.zxing.BarcodeFormat,%20int,%20int,%20java.util.Map%29)方法的提示中，例如：

```
Map<EncodeHintType, Object> hints = new EnumMap<EncodeHintType, Object>(EncodeHintType.class);
hints.put(EncodeHintType.CHARACTER_SET, "UTF-8");
hints.put(EncodeHintType.MARGIN, 2); /* default = 4 */ 
```

如果更改此设置，则可能会降低解码成功率。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-14T10:58:26.163

即使设置`EncodeHintType.MARGIN`为`0`，将 QRCode“点”矩阵转换为像素数据的算法也可以生成较小的边距（该算法强制每个点的像素数恒定，因此边距像素大小是像素大小的整数除法的余数通过 QR 码点大小）。

但是，您可以完全绕过这种“点到像素”生成：您可以通过调用公共类直接计算 QRCode 点阵`com.google.zxing.qrcode.encoder.Encoder`，并自己生成像素图像。下面的代码：

```
// Step 1 - generate the QRCode dot array
Map<EncodeHintType, Object> hints = new HashMap<EncodeHintType, Object>(1);
hints.put(EncodeHintType.CHARACTER_SET, "UTF-8");
QRCode qrCode = Encoder.encode(what, ErrorCorrectionLevel.L, hints);

// Step 2 - create a BufferedImage out of this array
int width = qrCode.getMatrix().getWidth();
int height = qrCode.getMatrix().getHeight();
BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
int[] rgbArray = new int[width * height];
int i = 0;
for (int y = 0; y < height; y++) {
  for (int x = 0; x < width; x++) {
    rgbArray[i] = qrCode.getMatrix().get(x, y) > 0 ? 0xFFFFFF : 0x000000;
    i++;
} }
image.setRGB(0, 0, width, height, rgbArray, 0, width); 
```

将 PNG 数据转换`BufferedImage`为练习留给读者。您还可以通过设置每个点的固定像素数来缩放图像。

这种方式通常更优化，生成的图像尺寸尽可能小。如果您依赖客户端缩放图像（无模糊），则每个点不需要超过 1 个像素。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-21T16:13:21.503

```
 HashMap hintMap = new HashMap();
    hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.Q);
    hintMap.put(EncodeHintType.MARGIN, -1); 
```

没有保证金

**更新**

添加依赖项（来自评论）

```
<dependency>
    <groupId>com.google.zxing</groupId> 
    <artifactId>core</artifactId> 
    <version>3.2.0</version>
    <type>jar</type> 
</dependency> 
<dependency> 
    <groupId>com.google.zxing</groupId>
    <artifactId>javase</artifactId> 
    <version>3.2.0</version> 
</dependency> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-30T16:11:25.093

迅速**你**可以：

```
let hints = ZXEncodeHints()
hints!.margin = NSNumber(int: 0)

let result = try writer.encode(code, format: format, width: Int32(size.width), height: Int32(size.height), hints: hints)
let cgImage = ZXImage(matrix: result, onColor: UIColor.blackColor().CGColor, offColor: UIColor.clearColor().CGColor).cgimage
let QRImage = UIImage(CGImage: cgImage) 
```

# jquery - 从函数触发jquery移动页面转换

> ID：10142749
> 
> 赞同：3
> 
> 时间：2012-04-13T14:30:13.797
> 
> 标签：jquery, jquery-mobile

是否可以使用 jquery 移动页面转换从一个页面导航到另一个页面？目前我有一个输入框，可以在焦点输出时触发一个功能，就像这样；

```
$("#page1").on("focusout", "input", function(){
 alert("working");
} 
```

我想做的是在focusout功能触发后，我想使用jquery mobile的页面导航将用户带到另一个页面。通常我会使用这样的按钮；

```
<a href="#page2">Next</a> 
```

如何`#page2`从 focusout 功能触发？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T14:53:29.590

如果它在同一页面中。它需要。

```
//Solution From Comments Below; Thanks!
$.mobile.pagecontainer( "change", "#page2", { transition:"slide" } );

//Original Answer Deprecated
$.mobile.changePage($('#page2'), {transition:"slide"}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:32:47.600

要在 jQuery mobile 中更改页面，请使用：

```
$.mobile.changePage("yourpage.html", {transition:"slide"}); 
```

其中幻灯片可以更改为其他过渡

# c++ - 尝试将对象数组传递给函数时出错

> ID：10142751
> 
> 赞同：0
> 
> 时间：2012-04-13T14:30:17.727
> 
> 标签：c++, arrays, argument-passing, dynamic-arrays, dynamic-allocation

我正在尝试传递一个数组`Student`

进入函数`processStudent(string myFilename, Student* myArray, int &mySize)`。但它给了我不同类型的错误。

Student() 什么都不做，但我尝试为它们分配某种值，它仍然给出完全相同的错误消息：

主要我有这个：

```
// Create an array of students, with the size of theMax (256)
Student* arrayOfStudent= new Student[theMax];

// An integer that will keep track of actually how many students
// Because when we loop, we want to loop within the cell
// that actually have data or student.
int actualSize = 0;

// Invoke the helper function to set up the array of students
// It passed the arryOfStudent by reference, so the changes
// inside of the function will be reflected when it returns
processStudent(filename, arrayOfStudent, actualSize); 
```

函数是这样的：

```
void processStudent(string myFilename, Student* myArray, int& mySize)
{
    // Something here, but removed still gives that error
} 
```

// 在班级Student的cpp文件中

```
Student::Student() 
{
    // Nothing here
} 
```

**错误信息：**

```
new-host-2:csci135p1 george$ g++ -Wall -o csci135p2main csci135p2main.cpp
Undefined symbols for architecture x86_64:
  "Student::Student()", referenced from:
      _main in cc3fTXti.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我一直在剥离和剥离我的代码，但这个错误不会消失。我想创建这个数组，并将它传递给 processStudent 函数，这样它就可以在读取文件时设置每一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:48:39.703

你应该问自己一些可以帮助你的问题：

**“我如何创建新的学生实例？”**
好吧，我这样做：`Student* s = new Student();`- 它创建新对象并将对它的引用存储为指针（`Student*`）

**“那么我如何创建一个 10 `Student`s 的数组呢？”**
好吧，它可能是一个指向 new 的指针数组，`Student`我可能不得不多次调用`new`......通过这样想，你很容易得到这样的结果：

```
Student** students = new Student*[10];
for (int i = 0; i < 10; ++i)
    students[i] = new Student(); 
```

...这意味着，当你清理它时，你必须调用`delete`每一个`Student*`加号，你必须清理数组本身：调用`delete[]`-`Student**`当你意识到丑陋的内存管理与指针数组连接时，它应该让你寻找更简单和更好的方法来实现它，因此你应该最终使用`std::vector`对象而不是数组，如果可能的话，而不是指针，如果不是，那么至少使用智能指针而不是裸指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:38:34.367

第一个错误（自从我写这篇文章以来似乎已从问题中删除）告诉您第二个参数`processStudent`是指针到指针`Student**`，而不是指针，`Student*`。这很奇怪，因为您使用参数显示您的声明`Student*`；你确定这是你的代码中的实际声明吗？你在某处有不同的声明吗？

第二个错误可能是因为您没有链接到包含构造函数定义的单元。您只使用一个源文件 ( `csci135p2main.cpp`) 调用编译器，我猜您在不同的源文件中定义了构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:33:33.623

有错误信息告诉你答案：

> 学生*”到“学生**”</p>

更改`myArray`参数的类型`processStudent()`：

```
void processStudent(string myFilename, Student** myArray, int& mySize)
{
} 
```

当一个数组被传递给一个函数时，它会衰减为一个指针：

```
void some_func(char* b) {...}

char buf[100];
some_func(buf); 
```

当您将`arrayOfStudent`数组衰减传递给一个指针时，恰好该数组是一个指针数组，因此`**`.

* * *

链接器抱怨它无法找到`Student`. 该定义包含在`Student.cpp`文件中，因此编译所有源文件以解决链接器错误：

> g++ -Wall -o csci135p2main csci135p2main.cpp Student.cpp

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T15:01:16.277

您的代码容易出错，难以维护异常不安全的 C++。在现代 C++ 中，您应该使用`std::vector<Student>`, 和`Student`实现*移动语义*的类，`vector<shared_ptr<Student>>`或者基于实例`vector<unique_ptr<Student>>`的所有权（共享与否） 。`Student`

如果学生数组是输入/输出参数，您的函数原型应该是这样的：

```
void processStudent(const std::string & filename, std::vector<Student> & students); 
```

相反，如果`processStudent`函数创建学生数组（例如基于文件的内容），只需将其作为返回值返回（由于移动语义，这非常有效）：

```
std::vector<Student> processStudent(const std::string & filename); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T14:41:43.853

you'd better use a vector of Student (prefer using arrays only with basic types (int, char..) and vectors for everything else).

```
#include <vector>

std::vector<Student*> arrayOfStudent = new vector<Student*>();
/* ... */
processStudent(filename, arrayOfStudent, actualSize); 
```

and

```
void processStudent(std::string& filename, vector<Student*>& arrayOfStudent, int& actualSize) {
/* ... */
} 
```

I'm not sure whether that would solve your problem, but at least that's a better use...

# unit-testing - 验证类的公共方法的最佳方法是否有单元测试？

> ID：10142752
> 
> 赞同：0
> 
> 时间：2012-04-13T14:30:18.180
> 
> 标签：unit-testing, nunit

我试过在网上和 SO 上搜索，但没有看到太多关于 t 的讨论（或者我可能只是没有使用正确的关键字）。

我想做的是编写一个脚本（或使用已经存在的实用程序）来验证一个类或一组类是否在测试项目中为它们编写了单元测试。

我即将发布一个版本，我想确保我的业务层的所有公共方法都有单元测试。我试图让每个人都加入 TDD，但它还没有发生。

我对如何编写脚本来检查这个有一个非常基本的想法（打开文件，将方法签名解析到某个列表中，打开相应的测试类文件并检查列表中的每个方法是否存在于测试文件中的某个位置），但我想看看还有哪些其他选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:04:52.210

.Net 代码覆盖工具，例如 NCover 和 dotCover，已经存在。我会使用其中之一并阅读他们的报告。

# android - 如何将我的 Android 应用程序限制为非平板电脑？

> ID：10142755
> 
> 赞同：4
> 
> 时间：2012-04-13T14:30:29.973
> 
> 标签：android, download, google-play

我已经看到[了这个链接](https://stackoverflow.com/questions/7649558/android-manifest-restrict-to-tablets)，它显示了我如何将下载限制为仅限平板电脑，但我正在寻找相反的方向。

如何将我的应用程序限制为仅在手机上下载而不在平板电脑上下载？（这是客户的要求。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T14:31:59.380

在清单中添加[一个`<compatible-screens>`元素](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)，概述您支持的特定屏幕尺寸和密度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-17T00:16:45.443

您可以使用的另一种可能的解决方案是将以下内容添加到清单中：

```
 <uses-feature
    android:name="android.hardware.telephony"
    android:required="true" /> 
```

这将限制 apk 安装在能够拨打电话的设备（即非平板电脑）上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:45:22.567

CommonsWare 的回答是 100% 正确的。

您还有其他选择，使用

[支持屏幕](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

或在 Google Play 中手动过滤平板设备。这将是一项乏味的任务。

# c# - 将图像从 C# 客户端发送到 C 服务器

> ID：10142757
> 
> 赞同：1
> 
> 时间：2012-04-13T14:30:32.870
> 
> 标签：c#, c, sockets

如果我发送纯文本没有问题。一切都好。但是，如果我尝试从 C# 客户端发送图像，服务器会收到正确的字节数，但是当我将缓冲区保存到文件（二进制模式 - wb）时，它总是有 4 个字节。

我通过 C# 客户端使用函数发送它`File.ReadAllBytes()`。

我的保存代码看起来像

```
 FILE * pFile;
   char *buf = ReceiveMessage(s);
   pFile = fopen (fileName , "wb");
   fwrite(buf, sizeof(buf[0]), sizeof(buf)/sizeof(buf[0]), pFile);
   fclose (pFile);
   free(buf); 
```

我的接收功能看起来像

```
static unsigned char *ReceiveMessage(int s)
{
   int prefix;
   recv(s, &prefix, 4, 0);
   int len = prefix;
   char *buffer= (char*)malloc(len + 1);
   int received = 0, totalReceived = 0;
   buffer[len] = '\0';
   while (totalReceived < len)
   {
      if (len - totalReceived > BUFFER_SIZE)
      {
         received = recv(s, buffer + totalReceived, BUFFER_SIZE, 0);
      }
      else
      {
         received = recv(s, buffer + totalReceived, len - totalReceived, 0);
      }
      totalReceived += received;
   }

   return buffer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:35:42.873

您在使用`sizeof(buf)`. 它不返回缓冲区中的字节数，而是返回指针的大小（取决于您运行 32 位还是 64 位平台，为 4 或 8）。

您需要更改`ReceiveMessage`函数以“返回”接收数据的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:35:49.657

您的 C 代码需要`len`从 ReceiveMessage() 函数传回。

```
char *buf = ReceiveMessage(s);  // buf is a char*
... sizeof(buff)                // sizeof(char*) is 4 or 8 
```

所以你需要类似的东西

```
 static unsigned char *ReceiveMessage(int s, int* lenOut)
 {
     ...
     *lenOut = totalReceived ;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:42:29.437

你没有得到数组的大小`sizeof`。更改为即：

```
int len = 0;
char *buf;

buf = ReceiveMessage(s, &len);

/* then use len to calculate write length */

static unsigned char *ReceiveMessage(int s, int *len) 
/* or return len and pass ptr to buf */
{

  ...
} 
```

# c# - 在不暴露敏感 ID 的情况下从父视图向许多部分视图提供 ID

> ID：10142759
> 
> 赞同：0
> 
> 时间：2012-04-13T14:30:34.543
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我们正在使用友好的名称 URL 路由方案。基本上使用主体身份和友好名称的组合，可以将其映射回内部身份（个人 ID）。所以这样的路线：

```
 routes.MapRoute(string.Empty, "{friendlyname}/Products/{action}", new {controller = "Products", action = "List"}); 
```

将映射到这样的 URL：

```
 Adam/Products/List 
```

这一切都很好，并抽象出所需的命名人员的内部 ID。

问题是我们的视图由许多部分视图组成。当使用 @Html.Action 方法呈现时，它们最终需要 PersonID，但从 URL 中我们只有“友好名称”。

我已经考虑了一段时间，我想到了两个解决方案：

1.  将“友好名称”传递给每个返回部分视图的控制器操作方法，并且该方法在内部必须对当前登录的身份和友好名称进行查找。这会将 PersonID 提供给我，然后我可以从那时起有效地查询。这个方法的唯一问题是，由于有多个部分视图，我将查询当前登录的身份和友好名称，以获取每个部分视图调用的无效名称，我觉得我应该只需要编写一次此代码。

2.  以某种方式在视图中查询并获取 PersonID，以便可以将其传递给每个 @Html.Action 调用，因此部分视图控制器方法不必自己进行查找，从而节省了到数据库的往返行程以获取相同的共享信息。这样做的问题是，我不确定在视图中使用我们在应用程序的其余部分中使用的 DI 来做这个干净利落的方法。

任何关于方法的想法将不胜感激。

谢谢，

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:36:56.557

您可以将 Id 添加到会话变量并从视图中访问它：

```
@{var personId = int.Parse(Session["PersonId"])} 
```

然后，您可以将其直接从 Parent 传递给部分视图，而无需访问客户端或将参数传递给任何控制器。

**更新**

如果您想在那里完成工作而不需要往返数据库，您也可以从 Controller 访问会话变量。

**编辑**

如果您将属性放在模型中并将其传递到帖子后面的页面，那么模型将不会在帖子之间持续存在。

例如，如果您的控制器执行以下操作：

```
[HttpPost]
public ActionResult DoSomething(ViewModel model)
{
   if(ModelState.IsValid)
   {
       // Logic Here
   }
   return View(model)
} 
```

当页面重新加载时，模型会忘记 ID。

有几种方法可以解决这个问题。要么使用 @Html.HiddenFor(m => m.ID) ，这将把属性放在呈现的 HTML 中，如果它真的是一条敏感信息，那就不好了。

或者，您可以在每次后续回发时重建视图模型。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:08:51.307

正如 Marc 所说，我可以通过 Session 来处理这个问题，但我已经按照他在更新中所说的那样使用模型。如果父视图控制器操作采用友好名称，它可以进行查找，将 PersonID 放入模型中，然后任何部分渲染都可以在父视图控制器操作的视图中将模型值传递给它们。下面显示了一个示例（这是演示代码，但希望能得到重点，我**永远不会**在实际代码中使用静态数据上下文）

家庭控制器

```
public class HomeController : Controller
{
    public ActionResult Index(string friendlyName)
    {
        int pupilId = Data.People.Single(x => x.Name == friendlyName).PersonId;
        HomeIndexViewModel homeIndexViewModel = new HomeIndexViewModel {PupilId = pupilId};

        return View(homeIndexViewModel);
    }
} 
```

主页 索引视图

```
@model SharingInformationBetweenPartials.Web.Models.HomeIndexViewModel
@{
    ViewBag.Title = "Index";
}
<h2>Index</h2>    
@Html.Action("DisplayPersonDetail", "Person", new {Model.PersonId}) 
```

然后，PersonController 的 DisplayPersonDetail 方法可以使用传入的 PersonId 显示它希望的相应数据：

```
public class PupilController : Controller
{
    [ChildActionOnly]
    public ActionResult DisplayPupilDetail(int pupilId)
    {
        Person person = Data.People.Single(x => x.PersonId == pupilId);
        return View(person);
    }
} 
```

我确实尝试过我之前认为的方法，但我一定是有问题，因为 ViewModels 属性显示在我试图摆脱的 URL 中。无论如何，我希望这可以帮助其他可能想做类似事情的人。如果您有任何问题，请告诉我。

谢谢，

亚当

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:33:32.160

您可以使用`[Bind]`属性来指定模型绑定器应包含在绑定中的确切属性，或者使用`Exclude`属性上的参数来排除**PersonId**

```
[HttpPost]
public ActionResult EditPerson([Bind(Exclude = "PersonId")] Person person)
{
    //do domething
} 
```

您还可以使用`[ReadOnly]`模型绑定器将理解而不分配给该属性的属性。

```
[ReadOnly(true)]
public int PersonId{ get; set; } 
```

但最好的方法是使用单独的 ViewModel：一个仅用于查看，一个用于编辑。

```
public abstract class Person
{
   public string Name { get; set; }
   public string Surname { get; set; }

}

public class PersonCreateVM : Person
{
   //no PersonId here
}

public class PersonEditVM : Person
{
   public int PersonId{ get; set; }
} 
```

这种方法可能是“矫枉过正”，但如果使用得当并与 AutoMapper [http://automapper.codeplex.com/](http://automapper.codeplex.com/)一起使用，它很容易使用。

# java - 创建名为“countriesDao”的 bean 时出错：注入自动装配的依赖项失败；

> ID：10142761
> 
> 赞同：0
> 
> 时间：2012-04-13T14:30:50.643
> 
> 标签：java, spring, hibernate, tomcat, spring-mvc

我正在尝试启动 Tomcat，但是当我尝试启动它时，我收到以下错误

```
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'countriesDao': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void com.fexco.helloworld.web.util.CustomHibernateDaoSupport.anyMethodName(org.hibernate.SessionFactory); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {} 
```

国家道

```
package com.fexco.helloworld.web.dao;

import com.fexco.helloworld.web.model.Countries;

public interface CountriesDao {

void save(Countries countries);
void update(Countries countries);
void delete(Countries countries);
Countries findByCountry(String country);
} 
```

CountryDaoImpl 的开始

```
package com.fexco.helloworld.web.dao;

import java.util.List;

import org.springframework.stereotype.Repository;

import com.fexco.helloworld.web.model.Countries;
import com.fexco.helloworld.web.util.CustomHibernateDaoSupport;

@Repository("countriesDao")
public class CountriesDaoImpl extends CustomHibernateDaoSupport implements CountriesDao{

public void save(Countries countries){
    getHibernateTemplate().save(countries);
}
......
} 
```

一些Application-config.xml

```
<bean id="countriesDao" class="com.fexco.helloworld.web.dao.CountriesDaoImpl">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>
.... 
<context:annotation-config />
<context:component-scan base-package="com.fexco.helloworld.web" />

<bean 
  class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/> 
```

CustomHibernateDaoSupport 类

```
package com.fexco.helloworld.web.util;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

public abstract class CustomHibernateDaoSupport extends HibernateDaoSupport
{    
@Autowired
public void anyMethodName(SessionFactory sessionFactory)
{
    setSessionFactory(sessionFactory);
}
} 
```

错误是因为 CountryDaoImpl 并没有真正实现 CountryDao 吗？有谁知道如何解决这个错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:47:59.013

您的 dao 实现类中似乎没有定义会话工厂。如果尚未定义，您应该定义一个并避免同时使用这两种配置它会搞砸事情，即

```
 @Autowired
        @Qualifier("sessionFactory")
        public void seSessionFactory(SessionFactory sessionFactory) {

            this.setSessionFactory(sessionFactory);
        } 
```

# python - NameError：未定义名称“重新加载”

> ID：10142764
> 
> 赞同：85
> 
> 时间：2012-04-13T14:30:55.107
> 
> 标签：python, python-3.x

我正在使用 python 3.2.2。当我编写一个简单的程序时，我遇到了这个问题。

```
>>> reload(recommendations)
Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    reload(recommendations)
NameError: name 'reload' is not defined 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-04-13T14:31:17.833

你可能想要[`importlib.reload()`](https://docs.python.org/3/library/importlib.html#importlib.reload).

```
from importlib import reload 
```

在 Python 2.x 中，这是一个[builtin](https://docs.python.org/2.7/library/functions.html#reload)，但在 3.x 中，它在`importlib`模块中。

请注意，`reload()`通常不需要在解释器之外使用，你想在这里做什么？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-06-06T16:38:02.537

@Gareth Latty 答案的更新。`imp`在 Python 3.4 中已贬值。现在你想要`importlib.reload()`.

```
from importlib import reload 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-05-25T10:33:08.537

试试[`importlib.reload`](https://docs.python.org/3/library/importlib.html#importlib.reload)。

> 重新加载以前导入的模块。参数必须是一个模块对象，所以它必须之前已经成功导入。如果您使用外部编辑器编辑了模块源文件并且想要在不离开 Python 解释器的情况下试用新版本，这将非常有用。

```
from importlib import reload

reload(module_name) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-22T21:53:20.313

正如其他人所说，您需要`importlib.reload(module)`或在更早的时候需要`from importlib import reload`. 但是您可以将其隐藏`from importlib import reload`在初始化文件中。确保`PYTHONSTARTUP`在你的 shell 中定义了它。例如，

```
export PYTHONSTARTUP=$HOME/python/startup.py 
```

`~/.bash_profile`如果您的 shell 是 bash，并且取决于您存储 python 文件的位置，可能会添加到您的 . （如果您按照这些说明进行操作，请在此时启动一个新的终端窗口，以便执行该行。）然后您可以将该行

```
from importlib import reload 
```

，`~/python/startup.py`它会自动发生。（同样，如果你跟着，在这一点上开始一个新的 python 会话。）这可能看起来有点复杂，只是为了解决这个问题，但这是你只需要做一次的事情，然后对于每个类似的问题就像“我希望 python 永远这样做”那样，一旦你找到了解决方案，你就可以把它放进去，`~/python/startup.py`然后忘记它。

# c++ - 我可以使以下代码无锁/原子吗？

> ID：10142765
> 
> 赞同：5
> 
> 时间：2012-04-13T14:30:59.550
> 
> 标签：c++, multithreading, atomic

`int val = memLoc[index++];`

或者更好

`int val = memLoc[index++ & 0xFF];`

尝试从共享环形缓冲区进行线程安全读取，每次调用都会获得下一个值 - 如果可能的话，我希望它是无锁的，因为它发生了 TON。不允许 Boost / C++ 11 :(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T14:35:02.793

这里唯一需要同步的操作是`index`值的增量。由于这只是一个数值，因此可以通过原子增量在不使用锁的情况下完成。您列出的其余操作只是读取共享位置，不需要同步。

`InterlockedIncrement`在 Win32 上，使用函数完成增量同步

```
int oldValue = InterlockedIncrement(&index);
int val = memLoc[oldValue & 0xFF]; 
```

Linux 上有各种可用的同步增量函数。关于这个stackoverflow线程上的选项有一个相当好的讨论

*   [如何在 Linux 上执行适用于 x86、arm、GCC 和 icc 的原子操作？](https://stackoverflow.com/questions/2287451/how-to-perform-atomic-operations-on-linux)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:41:50.987

您需要在原子操作中增加和读回索引。不幸的是 ++ 运算符不保证任何原子性。

大多数处理器都有某种可以使用的 fetch-increment-store 指令。您可以插入内联程序集来做到这一点。 [http://en.wikipedia.org/wiki/Fetch-and-add](http://en.wikipedia.org/wiki/Fetch-and-add)

如果您在 Windows 上运行，MS 提供了一个 API 来访问它：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms684122 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684122(v=vs.85).aspx)

如果您在另一个操作系统上，可能会有类似的功能。不过，无论如何，您都需要操作系统或更低类型的访问权限才能获得原子的 fetch-increment-store。

# ruby-on-rails - 如何在没有特定 ID 的情况下编辑_*_path？Ruby on Rails

> ID：10142767
> 
> 赞同：1
> 
> 时间：2012-04-13T14:31:07.673
> 
> 标签：ruby-on-rails, ruby

首先：我是 ruby​​ on rails 的新手。

我想链接到一个空的“编辑”站点。例如：我点击链接“编辑内容”。我应该被引导到“内容/编辑”，但表格中没有任何值。比我应该能够通过单击 html 选择框中的条目来选择“内容”。之后，表单应该填充内容值。

我试图修改“edit_content_path”方法，但总是需要一个 ID。

有任何想法吗？

我为找到解决方案而阅读的内容：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

问候！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:15:44.033

只需将以下内容添加到`resources :contents`您的调用中`routes.rb`：

```
resources :contents, :except => :edit do
  get 'edit', :on => :collection
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:15:30.187

您只能“编辑”现有对象。您需要使用 new_content_path 才能创建内容。

Rails 默认为您提供 7 个 RESTful 操作。

![在此处输入图像描述](../Images/e19358a9da456e57ab65bb2adc688134.png)

有关详细信息，请参阅 ruby​​.railstutorial.org/book?version=3.2#top。

# plsql - PL/sql 游标没有输出以下代码

> ID：10142768
> 
> 赞同：0
> 
> 时间：2012-04-13T14:31:09.927
> 
> 标签：plsql, cursor

```
set serveroutput on;
declare
temp_id applicant.id%type;
cursor c1 is select id from applicant where father like 'xyz';
begin
if not c1%isopen then open c1;
end if;
loop
fetch c1 into temp_id;
dbms_output.put_line(temp_id);
exit when c1%notfound;
end loop;
close c1;
end;
/ 
```

我有一个带有 id 列的表申请人。我不认为游标获取任何东西。尽管该过程已成功完成。where 父亲喜欢 'xyz' 条件是否有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:21:24.660

请从父亲喜欢 '%xyz%' 的申请人那里试试这个选择 ID；，我不知道如果你不想使用 like 的主要功能，为什么要放 like，我的意思是使用 % 。如果你希望父亲的名字应该是 xyz ，然后尝试父亲 ='xyz' 而不是父亲喜欢'xyz '

# css - Box-shadow CSS 样式在 IE9 中不起作用？

> ID：10142773
> 
> 赞同：1
> 
> 时间：2012-04-13T14:31:19.007
> 
> 标签：css, internet-explorer-9

我正在使用它为我的页面上的几个图像设置 box-shadow 属性，它在 Firefox 和 Chrome 上运行良好，但拒绝在 Internet Explorer 9 上运行。

```
box-shadow: 0px0.5px8px1px  #888888; 
```

和

```
box-shadow: rgb(150,150,150) 0 0 20px; 
```

我应该使用其他东西以使其与 IE9 兼容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:31:46.383

这在 IE9 中对我有用：

```
box-shadow: 0px 0px 4px 0px rgba(28, 24, 28, 0.65); 
```

与十六进制相同：

```
box-shadow: 0px 0px 4px 0px #000000; 
```

如果这没有帮助，试试这个：按 F12 并阅读您使用的 browsermod/documentmode。比我们可以为您提供的帮助更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:27:05.103

感谢 Sparky672 和 ShogunArts.de 的帖子。他们发布的css受IE9支持。

我遇到的问题是我的自定义品牌在页面上强制使用 IE8 模式。一旦我在元标记中将其更改为 IE9，所有样式都显示得很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:29:52.170

我还有一个设置为 IE8 浏览器模式的自定义品牌。

```
 <meta http-equiv="X-UA-Compatible" content="IE=9"/> 
```

一旦我将它更改为 IE9，它就像一个魅力！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T08:55:17.583

可能值得检查 IE9 是否处于 IE7 模式。检查您的 IE 开发人员工具。IE9 需要处于 IE9 模式`box-shadow`才能工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-10T12:22:38.603

在没有 HTC 文件的情况下以这种方式完美地为我工作

```
.shadow{
    margin:10px;
    padding:20px;
    background-color:#FFF;
    position:relative;
    z-index:2;
    border:1px solid #bebebe;
    -moz-box-shadow: 5px 5px 10px #CCC;
    -webkit-box-shadow: 5px 5px 10px #CCC;
    filter:progid:DXImageTransform.Microsoft.Blur(pixelradius=5);
    -ms-filter:"progid:DXImageTransform.Microsoft.Blur(pixelradius=5)";
    opacity:1;
    box-shadow: 5px 5px 10px #ccc;
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-13T14:37:06.053

顺序无关紧要（颜色优先 -> 值，反之亦然）只需确保数值按顺序排列即可。

确保在您的值之间包含空格。同样只使用 0 是无效的（它应该是 0px）。

如果您需要更多帮助，请查看：http: [//yearofmoo.com/2011/03/ie9-and-css3-box-shadow/](http://yearofmoo.com/2011/03/ie9-and-css3-box-shadow/)

# javascript - 如何设置可用的特定日期？日期选择器

> ID：10142781
> 
> 赞同：0
> 
> 时间：2012-04-13T14:31:49.630
> 
> 标签：javascript, jquery

我有带有**date_in**和**date_out列的 DB mysql**

如何设置 datepicker 以仅显示数据库 mysql 中的可用日期。我有两个日期选择器输入

```
<input type="text" name="check_in_date" id="check_in" />
<input type="text" name="chek_out_date" id="check_out" /> 
```

例如我有**check_in_dates** = 10-05-2012, 13-05-2012, ... , n。并且它们必须只能通过 jQuery.datepicker 进行选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:36:03.037

jQuery datepicker 有一个 minDate 和 maxDate，所以你可以从 MYSQL 解析你的最大和最小日期并设置日历 minDate 和 maxDate 像：

```
minDate: new Date(year,month,day),
maxDate: new Date(eyear,emonth,eday) 
```

在这种情况下，您的日历将仅显示所提供地区的日期。

希望这可以帮助。

根据评论：

jQuery datepicker 具有 beforeShowDay，因此现在您可以将数据库中可用的所有日期放在一个数组中，然后在初始化 datepicker 时覆盖 beforeShowDay 方法，检查所选日期是否在数组中，如果不返回则继续。

在此处查找代码[示例](https://stackoverflow.com/questions/9480537/select-only-specific-dates-in-jquery-ui-datepicker-date-list-comes-from-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:36:29.917

你可以试试**[jQuery UI Datepicker](http://jqueryui.com/demos/datepicker/)**

jQuery UI Datepicker 是一个高度可配置的插件，可以为您的页面添加日期选择器功能。您可以自定义日期格式和语言，**限制可选日期范围**并轻松添加按钮和其他导航选项。

# android - 应用程序图标后退箭头以横向和纵向显示

> ID：10142783
> 
> 赞同：0
> 
> 时间：2012-04-13T14:31:56.010
> 
> 标签：android, actionbarsherlock, android-actionbar

我有一个使用 ActionBar（实际上是 ActionBarSherlock）的应用程序，其中包含两个片段，一个是列表，一个是详细信息片段。当设备处于纵向模式并且用户从列表视图单击到详细信息视图时，我在`setHomeButtonEnabled`详细信息视图上设置，因此用户可以单击应用图标返回列表（并且返回箭头会自动显示）。

当设备处于横向模式并且两个片段都显示在屏幕上时，我仍然看到 App Icon 旁边的后退箭头，这没有任何意义，因为没有什么可返回的。

不确定我是否需要在代码中做某事，因此后退箭头不会在横向模式下显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:43:59.357

好吧，通过将此代码添加到详细信息片段中，我能够得到我想要的结果。可能不理想，但它有效：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    setHasOptionsMenu(true);

    if (getResources().getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE)
        this.getSherlockActivity().getSupportActionBar().setDisplayHomeAsUpEnabled(true);

    setRetainInstance(true);
} 
```

更新：

发现这可能是一个更好的解决方案。它检测“详细信息”片段是否可见：

```
final DetailsFragment fragment = (DetailsFragment)getFragmentManager().findFragmentById(R.id.fragmentDetails);

if (fragment == null || fragment.isInLayout() == false)
    this.getSherlockActivity().getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

# c# - 如何使用 SetTimeZoneInformation 取消选中“调整日光...”？

> ID：10142788
> 
> 赞同：2
> 
> 时间：2012-04-13T14:32:06.510
> 
> 标签：c#, timezone, pinvoke

我成功地更改了 Windows 中的 TimeZone 和日光时间，`SetTimeZoneInformation`但即使将 wMonth 设置为 0，`datetime.cpl`也会选中复选框。

```
TIME_ZONE_INFORMATION actual = new TIME_ZONE_INFORMATION();
NativeMethods.GetTimeZoneInformation(out actual);
// Datetime.cpl put the standard time in daylight time and add the regkey
// When executing this -> Regkey is not set automatically
actual.DaylightBias = actual.StandardBias;
actual.DaylightDate = actual.StandardDate;
actual.DaylightName = actual.StandardName;
RunWin32Method(() => NativeMethods.SetTimeZoneInformation(ref newZone));
NativeMethods.SendMessageTimeout(NativeMethods.HWND_BROADCAST, NativeMethods.WM_SETTING_CHANGE, IntPtr.Zero, IntPtr.Zero, 0x00, 1000, out ptr)

// MSDN said
// When executing this -> Regkey is not set automatically
actual.StandardDate.Month = 0;
RunWin32Method(() => NativeMethods.SetTimeZoneInformation(ref newZone));
NativeMethods.SendMessageTimeout(NativeMethods.HWND_BROADCAST, NativeMethods.WM_SETTING_CHANGE, IntPtr.Zero, IntPtr.Zero, 0x00, 1000, out ptr) 
```

我怎样才能改变这个？我也需要手动创建/删除`DisableAutoDaylightTimeSet`注册表项吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:57:06.783

手动创建/删除注册表项是...

# java - Guice：现场注入的影响

> ID：10142791
> 
> 赞同：14
> 
> 时间：2012-04-13T14:32:35.947
> 
> 标签：java, dependency-injection, guice

我对 Guice 的理解是：

*   构造函数级注入 ( `@Inject public class Widget(Dep one, Dep two)`)*意味着*Guice 总是会在每次通过`Injector`;调用构造函数时注入该构造函数。和
*   方法级*注入*（`@Inject public void setDepOne(Dep one)`_*`Widget``Injector`*

 *这两个假设是否正确？如果不是，请澄清！

所以我挂断的是：**场级注入的含义是什么？**

```
@Inject private Dep one; 
```

这是否意味着在通过 Guice 注入器创建对象时，Guice 将始终注入属性？在那种情况下，我会想象它与构造函数级注入冲突。

例如，以下是否会导致冲突/错误：

```
public class Widget {
    @Inject private Dep one;

    private Dep two;

    // Dep one already injected as a field!
    @Inject public Widget(Dep one, Dep two) {
        // ...
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-15T03:11:14.710

Guice 将始终注入所有字段、方法和任何单个使用`@Inject`. 请记住，构造函数总是首先被注入，因此您的注释字段实际上会覆盖该注入。以这个修改过的例子为例：

```
class Widget {
    @Inject
    private Dep one;

    @Inject
    public Widget(Dep one) {
        this.one = one;
        System.out.println(one);
    }

    public void printDependency() {
        System.out.println(one);
    }
}

class Dep {}

public class MyMain {
    public static void main(String[] args) {
        Injector i = Guice.createInjector();
        i.getInstance(Widget.class).printDependency();

    }
} 
```

运行时，这将产生如下内容：

```
com.example.Dep@63238bd2
com.example.Dep@69198891 
```

显然是两个不同的对象。第一行是构造函数；二是现场注入。

除了在编写 Guice 代码示例时减少冗长之外，我并不经常发现字段注入的用途。在生产代码中这是不明智的，因为它使代码难以测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:35:40.097

你的假设是正确的。我相信在这种特殊情况下，Guice 将注入`one`两次——一次通过构造函数，一次通过字段——如果没有别的，因为它无法知道它们将进入同一个字段。*

# visual-studio - 如何将 VC++ 2010 项目降级到 VC++ 2008？

> ID：10142793
> 
> 赞同：0
> 
> 时间：2012-04-13T14:32:45.900
> 
> 标签：visual-studio, visual-c++

这是一个在 VC++ 2010 中开发的常用 MFC 项目，但由于我的客户端没有 VC++ 2010，我需要降级到 VC++ 2008。当我尝试时，我得到“由于项目文件损坏而无法加载项目”。

有没有办法降级项目文件？

**更新：**正如人们所建议的，我在 VC 2008 中创建了新项目并从那里开始。花了一个小时让它可以运行，所以我不能抱怨。但当然，复制粘贴并不容易。我必须正确复制所有包含目录和库。并且不得不删除 2008 年不存在的不必要的代码部分。我仍然无法弄清楚的一件事是 rc 文件中的错误

```
RC2176 : old DIB in res\MyApp.ico; pass it through SDKPAINT 
```

由于某种原因，它显然无法识别图标格式。现在，我注释掉了那个图标部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:39:03.620

我知道的唯一方法是创建一个新的 VC++ 2008 项目并将所有 VC++ 2010 文件复制到其中。如果您从 Windows 资源管理器拖放到 VS 的解决方案资源管理器中，它会将它们添加到您的项目中并将它们复制到您的项目文件夹中。

# ios - 在 iOS 中从 UIColor 获取 CGColor 时出现异常

> ID：10142797
> 
> 赞同：0
> 
> 时间：2012-04-13T14:33:05.213
> 
> 标签：ios, uicolor

我正在尝试为我的视图创建自定义按钮。一切正常，除了在渲染时我收到关于我的颜色的异常。我的班级有 2 个颜色属性：

```
@property (nonatomic, retain) UIColor* defaultBackground;
@property (nonatomic, retain) UIColor* clickedBackground; 
```

一种表示默认渲染颜色，另一种表示用户单击时的颜色。在我的 initWithFrame 方法中，我初始化了颜色：

```
defaultBackground = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
clickedBackground = [UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:1.0]; 
```

这一切都很好，直到我得到渲染时它在获取 CGColor 时抛出异常：

```
if((self.state & UIControlStateHighlighted) == 0)
    {
        CGContextSaveGState(context);
        CGContextSetFillColorWithColor(context, defaultBackground.CGColor); //Crashes on this line
        ... 
```

这是我得到的例外：

```
2012-04-13 10:19:51.005 -[__NSMallocBlock__ CGColor]: unrecognized selector sent to instance 0x7d94d20
2012-04-13 10:19:51.072 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSMallocBlock__ CGColor]: unrecognized selector sent to instance 0x7d94d20' 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T14:38:41.770

将您的两行更改`initWithFrame:`如下：

```
self.defaultBackground = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
self.clickedBackground = [UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:1.0]; 
```

问题在于将自动释放的`UIColor`对象直接分配给 ivar 会导致指向已释放对象的悬空指针。另一种选择是：

```
defaultBackground = [[UIColor alloc] initWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
clickedBackground = [[UIColor alloc] initWithRed:0.5 green:0.5 blue:0.5 alpha:1.0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:37:50.963

你需要做 -

```
self.defaultBackground = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
self.clickedBackground = [UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:1.0]; 
```

...否则他们不会被保留。

# php - 使用先前选择的选项预加载表单

> ID：10142800
> 
> 赞同：0
> 
> 时间：2012-04-13T14:33:10.657
> 
> 标签：php, mysql, html

我编写了一个脚本，允许我重新排序菜单上的项目。

代码选择（显示）页面标题和页面出现在菜单上的顺序。

例如，如果有 5 页（关于我们、使命与愿景、奖项、环境政策、地点），则顺序为 1-5。

[当前表单的屏幕截图](http://postimage.org/image/mamcffjpv/)

正如您从屏幕截图中看到的那样，代码生成了 5 个下拉菜单，全部带有 5 个页面选项。在另一个下拉列表中，您得到 1-5。

我想要做的是让菜单加载菜单已经直接进入该表单的名称和页面顺序。

所以每个下拉菜单都会有一个页面标题和另一个下拉菜单中的相应顺序。如果需要，用户将能够更改此设置。

我怎样才能改变我的代码来实现这一点？

```
<?php
$apageid = array();
$apagename = array();
$apageorder = array();

$q = "SELECT g.id, g.title, n.order FROM tbl_general g INNER JOIN tbl_navigation n ON n.pageid = g.id WHERE n.type = '$_SESSION[parent]' ORDER BY n.order";
$return = $database->query($q);
while($row=mysql_fetch_assoc($return)){
    $apageid[] = $row['id'];
    $apagename[] = $row['title'];
    $apageorder[] = $row['order'];
}

$count = count($apageid);
$bpageid = array();
$bpageorder = array();
?>
<div class="form-holder">
<?php

//run through each page one at a time and update the order of the menu
for($i=0; $i<$count; $i++){
    ?>
    <div class="form-row">
        <div class="form-label">
            Page Name
        </div>
        <div class="form-field">
            <select class="select-small" name="<?php echo $bpageid[$i] ?>">
                <?php
                for($j=0; $j<$count; $j++){
                    ?>
                    <option value="<?php echo $apageid[$j]; ?>"><?php echo $apagename[$j]; ?></option>
                    <?php
                }
                ?>
            </select>
            <select class="select-small" name="<?php echo $bpageorder[$i] ?>">
                <?php
                for($k=0; $k<$count; $k++){
                    ?>
                    <option value="<?php echo $apageorder[$k]; ?>"><?php echo $apageorder[$k]; ?></option>
                    <?php
                }
                ?>
            </select>
        </div>
    </div>
    <?php
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:29:30.217

好吧，我知道你需要什么。

改变这个：

```
for($i=0; $i<$count; $i++){ 
```

对此：

```
mysql_data_seek( $return ); //reset the pointer to do the same query
while($row=mysql_fetch_assoc($return)){

$id = $row['id'];
$title = $row['title'];
$order = $row['order']; 
```

这将直接从数据库而不是从您的数组中循环每个 id 字段。此外，我们现在在循环期间为每个字段提供了变量。现在将 id 的数组 var 更改为我们之前添加的 id var：

```
<select class="select-small" name="<?php echo $id; ?>"> 
```

现在对于页面名称选择字段，让我们将其添加到第二个 for 循环中：

```
for($j=0; $j<$count; $j++){
      if($apageid[$j] == $id) {
      $selected = true;
      } else {
      $selected = false;
      } 
```

现在添加一个变量以使数组中的当前选项值等于当前行的值

```
<option value="<?php echo $apageid[$j]; ?>" <? echo ($selected == true) ? 'selected="selected"' : ''; ?>><?php echo $apagename[$j]; ?></option> 
```

然后对底部的选择执行相同的操作：

```
<select class="select-small" name="<?php echo $order; ?>">
            <?php
            for($k=0; $k<$count; $k++){
                if($apageorder[$k] == $order) {
                    $selected = true;
                } else {
                    $selected = false;
                }
                ?>
                <option value="<?php echo $apageorder[$k]; ?>" <? echo ($selected == true) ? 'selected="selected"' : ''; ?>><?php echo $apageorder[$k]; ?></option>
                <?php
            }
            ?>
        </select> 
```

# c# - 连接到 Google 的距离矩阵服务时“无法连接到远程服务器”

> ID：10142806
> 
> 赞同：2
> 
> 时间：2012-04-13T14:33:23.000
> 
> 标签：c#, web-services

我遇到了这个问题......我有一个使用框架 4.0 开发的 Web 应用程序，它调用一个谷歌网络服务（距离矩阵）......像这样

```
XPathDocument Doc = new XPathDocument(
    "http://maps.googleapis.com/maps/api/distancematrix/xml?&origins=" + start +
    "&destinations=" + stop + "&units=metric&sensor=false&language=it"); 
```

在我的客户端上一切正常..在使用 IIS 在 Web 服务器上部署应用程序后，所有问题都开始了......我有这个错误

```
Unable to connect to the remote server
[SocketException (0x274d): Unable to connect to the remote server 173.194.65.95:80]
   System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) +305
   System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception) +699

[WebException: Impossibile effettuare la connessione al server remoto.]
   System.Net.HttpWebRequest.GetResponse() +7769892
   System.Xml.XmlDownloadManager.GetNonFileStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy) +160
   System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn) +318
   System.Xml.XmlTextReaderImpl.OpenUrlDelegate(Object xmlResolver) +75
   System.Threading.CompressedStack.runTryCode(Object userData) +136
   System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData) +0
   System.Threading.CompressedStack.Run(CompressedStack compressedStack, ContextCallback callback, Object state) +118
   System.Xml.XmlTextReaderImpl.OpenUrl() +4996487
   System.Xml.XmlTextReaderImpl.Read() +120
   System.Xml.XPath.XPathDocument.LoadFromReader(XmlReader reader, XmlSpace space) +386
   System.Xml.XPath.XPathDocument..ctor(String uri, XmlSpace space) +130

   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +154
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3691 
```

如果我尝试直接从网络服务器调用来自浏览器的网络服务.... [http://maps.googleapis.com/maps/api/distancematrix/xml?&origins=milano&destinations=roma&units=metric&sensor=false&language=it](http://maps.googleapis.com/maps/api/distancematrix/xml?&origins=milano&destinations=roma&units=metric&sensor=false&language=it)

..一切正常，我可以看到 XML 文档

# installation - 是否可以使用 WIX 将水晶报告作为功能安装

> ID：10142810
> 
> 赞同：0
> 
> 时间：2012-04-13T14:33:41.440
> 
> 标签：installation, wix, wix3.5

所以我知道如何使用水晶报告的引导程序并将其用作先决条件，以便在水晶报告不存在时安装水晶报告。但是有没有办法通过一个特性让它成为可选的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:13:38.120

根据[Crystal Reports 网站](http://resources.businessobjects.com/support/additional_downloads/runtime.asp)，使用 MSI 安装程序（使用引导程序）或使用合并模块。您希望在项目中[包含合并模块](http://wix.sourceforge.net/manual-wix3/merging_msm_into_msi.htm)，然后使用功能有选择地安装该模块。

# c++ - 由于 LAPACK，使用 OpenMP 编程较慢

> ID：10142811
> 
> 赞同：1
> 
> 时间：2012-04-13T14:33:47.057
> 
> 标签：c++, openmp, lapack

我有一个程序需要数百万次找到 3x3 矩阵的特征值和特征向量。为此，我刚刚切换到使用 LAPACK 的 zheev（是的，它们是 Hermitian 矩阵），对于特定情况，该程序在大约 1 分 20 秒内运行。我已经用 OpenMP 并行化了我的算法（就像我们之前所做的那样），突然我的程序运行了大约 9m。我注释掉对 zheev 的调用，我的程序在 9 秒内运行。

我在网上环顾四周，发现（据我所知）您可以编译您的 BLAS 库以使用 OpenMP，但我认为这不是问题所在。

不幸的是，这段代码来自我的工作，我没有在默认位置安装 lapack，而且我不知道在编译它时使用了哪些编译器选项。这也让我很难编译一个最小的测试程序来演示这个问题。

关于问题可能是什么的任何想法？

**编辑：**

我刚刚发现 OpenMP zheev 失败了，这可能与它运行速度较慢有关。我已经读过 LAPACK 中的一些例程不是线程安全的（或者它们具有线程安全的变体），我怎样才能知道 zheev 是否​​正在调用这些例程之一，我可以改变它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:52:00.027

暂且不说 OpenMP 问题，如果您的代码对性能敏感，您可能不想使用 LAPACK 来查找 3x3 矩阵的特征值和特征向量；LAPACK 针对“大”问题。更重要的是，对于维度小于 5 的矩阵的特定情况，您可以直接计算特征值，因此您可以使用比一般矩阵更简单的算法（这必然需要迭代）。

回想一下，3x3 矩阵的特征多项式是三次多项式，这意味着您可以直接计算其根（即特征值）。一旦知道了特征值，就可以直接对每个特征值 lambda 求解 (A - lambda * I)x = 0 得到对应的特征向量。

# android - 加载android模拟器时出现问题

> ID：10142813
> 
> 赞同：1
> 
> 时间：2012-04-13T14:34:00.963
> 
> 标签：android

我在运行android模拟器时经常出现这个问题。它尝试加载模拟器并在此消息之后

等待 HOME ('android.process.acore') 启动...

模拟器卡住了，它不安装我的应用程序，只是加载。我必须通常关闭 eclipse 并重新启动它才能使其再次工作。这背后的原因是什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:38:08.410

尝试重置 adb，然后开始加载模拟器。

# android - 如何设置文本视图的位置

> ID：10142820
> 
> 赞同：0
> 
> 时间：2012-04-13T14:34:35.133
> 
> 标签：android, animation, textview, gravity

我想将我的文本设置在视图的中心。我知道我需要用 Gravity 来做，但仍然看不到正确的结果我只想做从中心下方开始向左向右并返回开始位置的动画我的代码是

```
 setContentView(R.layout.logo);
        mTextView = (TextView) findViewById(R.id.textLabel);
    mLayout = new LinearLayout(this); 
        mLayout.setGravity(Gravity.CENTER); 
        mTextView.setGravity(Gravity.AXIS_X_SHIFT/2); 
        mTextView.setGravity(Gravity.AXIS_Y_SHIFT/2-Gravity.AXIS_Y_SHIFT/3); 
        mAnimation = new TranslateAnimation(100f, -100f, 0.0f, 0.0f); 
        mAnimation.setDuration(2000); 
        mTextView.setAnimation(mAnimation);

        mAnimation.start(); 
```

xml看起来像：

```
 <ViewFlipper android:id="@+id/flipper"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:flipInterval="2000"
        android:layout_marginBottom="20dip" >
<LinearLayout
android:id="@+id/Linear"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/logonews"
android:baselineAligned="false"
android:orientation="horizontal" >

<TextView
    android:id="@+id/textLabel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:text="Israel News"
    android:textSize="18sp"
    android:textStyle="bold"

     />

  </LinearLayout>
  </ViewFlipper> 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:42:48.493

When do you want the Animation to play?

What result are you seeing instead?

If you want it to play immediately, use `startAnimation` instead of `setAnimation`.

Edit: Looking at your code in light of the comments you made...

If you want your `TextView` to be below your logo image, you'll need to remove the background drawable from the `LinearLayout`, change its orientation to vertical, and put the image into an `ImageView` instead, before your `TextView` in the `LinearLayout`. This allows Android to lay them out in order...

Like this:

```
 <ViewFlipper android:id="@+id/flipper"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:flipInterval="2000"
        android:layout_marginBottom="20dip" >
<LinearLayout
android:id="@+id/Linear"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:baselineAligned="false"
android:orientation="vertical" >

<ImageView
    android:src="@drawable/logonews"
    android:scaleType="fitCenter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
>

<TextView
    android:id="@+id/textLabel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:text="Israel News"
    android:textSize="18sp"
    android:textStyle="bold"

     />

  </LinearLayout>
  </ViewFlipper> 
```

or if you need the image to be the background you can create an empty View above the `TextView` that's the same size as the image.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:11:27.833

*   1、Gravity 属性对TextView 中文本内容的位置有影响，而不是TextView。
*   2、TranslateAnimation 只直线移动一次。它不会前后移动，所以你可能需要结合几个 TranslateAnimation 来实现你想要的。
*   3、用户startAnimation。

# jquery - 为什么 jQuery Cycle 图像不相互重叠？

> ID：10142821
> 
> 赞同：0
> 
> 时间：2012-04-13T14:34:44.520
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我在这个页面上放了一个常见的花园品种循环幻灯片：[http](http://www.orientalhealthsolutions.com/index-new) ://www.orientalhealthsolutions.com/index-new 。由于某种原因，图像不会像在我的测试配置中那样重叠：[http ://www.orientalhealthsolutions.com/cycle.html](http://www.orientalhealthsolutions.com/cycle.html)

这是html：

```
<div class="slideshow">
    <img src="/photos/slideshow-1.jpg" alt="slideshow-1" width="600" height="410" />
    <img src="/photos/slideshow-2.jpg" alt="slideshow-2" width="600" height="410" />
</div> 
```

这是jQuery：

```
$('.slideshow').cycle({
   fx: 'fade' 
}); 
```

这是CSS：

```
.slideshow  { 
    width: 600px; 
    height: 410px; 
    overflow: hidden;  
    } 
```

我收到一条错误消息，指出 $ 不是函数，所以我要么有冲突，要么搞砸了其他东西。任何指导指导将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:43:05.350

是的，看起来你和某事发生了冲突。

在 chrome:`console.log($)`中是未定义的，在哪里`console.log(jQuery)`起作用。

快速修复更改`$('.slideshow')`为`jQuery('.slideshow')`

# c++ - 程序在 execvp(command.argv[0], command.argv) 后停止

> ID：10142837
> 
> 赞同：1
> 
> 时间：2012-04-13T14:35:58.963
> 
> 标签：c++, operating-system, execvp

我正在编写一个小 shell 程序，它接受一个命令并执行它。如果用户输入了无效命令，则 if 语句返回 -1。如果命令是正确的，它就会执行命令，但是一旦它执行了命令，程序就会结束。我做错了什么是不执行它之后的代码行？我已经用 ls 和 cat 命令测试了 execvp(command.argv[0], command.argv)，所以我很确定它可以工作。这是我的代码。

```
 int shell(char *cmd_str ){
  int commandLength=0;
  cmd_t command;
  commandLength=make_cmd(cmd_str,  command);
  cout<< commandLength<<endl;
  cout << command.argv[0]<< endl;
  if( execvp( command.argv[0], command.argv)==-1)
//if the command it executed nothing runs after this line
  {
    commandLength=-1;

}else
{
  cout<<"work"<<endl;
}

  cout<< commandLength<<endl;
   return commandLength;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T14:39:18.623

从手册[页](http://linux.die.net/man/3/execvp)`execvp(3)`

> exec() 系列函数用新的进程映像替换当前进程映像

因此，您当前的进程映像将被您的命令映像覆盖！因此，您需要`fork+exec`始终使用组合，以便您的命令在子进程中执行，并且您当前的进程作为父进程安全地继续！

在一个轻松的音符上，我想用一张图片来说明这个问题，因为*一张图片能说出一千个单词*。无意冒犯:) :)

![在此处输入图像描述](../Images/476466edc4c43506e65b3ef28e9350de.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:39:57.640

从关于[exec的文档](http://linux.die.net/man/3/execvp)

> exec() 系列函数用新的进程映像替换当前进程映像。本手册页中描述的函数是 execve(2) 的前端。（有关替换当前进程映像的更多详细信息，请参见 > execve(2) 的手册页。）

如果您希望您的流程继续，这不是您想要使用的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:25:48.000

@Pavan - 仅对于像我这样的挑剔者，从技术上讲，“当前流程已经消失”的说法是不正确的。它仍然是相同的过程，具有相同的 pid，只是被不同的图像（代码、数据等）覆盖。

# android - 安卓选择链接

> ID：10142843
> 
> 赞同：0
> 
> 时间：2012-04-13T14:36:12.350
> 
> 标签：android, web

我正在寻找一种让用户有机会轻松访问网站链接的方法。因此我想发送一个意图，打开 youtube 并让用户搜索链接。但是一旦发送意图，就无法获取用户访问的网页。我还尝试嵌入 Web 浏览器，但使用以下代码，设备只会打开浏览器......我还能做些什么让用户浏览然后给我链接？

```
WebView engine = (WebView) findViewById(R.id.web_engine);  
engine.loadUrl("http://www.youtube.com");
engine.getSettings().setJavaScriptEnabled(true);  

<WebView android:id="@+id/web_engine"  
             android:layout_width="fill_parent"  
             android:layout_height="wrap_content"  
            /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:00:52.377

据我所知，没有安卓“链接内容提供者”。我的意思是，您通常会提供指向内容浏览器（或系统）的链接，并让它完成艰苦的工作。然后浏览器处理它遇到的所有剩余链接并知道如何处理。如果您到达多个程序处理的内容链接并且没有默认值，那么它会询问您希望如何处理它。没有什么可以要求链接的。

为了做你想做的事，你需要另一种方法来为你的应用程序提供新的内容。

假设您正在制作一个 youtube 下载器。

考虑注册您的应用程序以接收所有 youtube 视频查看意图。然后，当用户单击视频链接时，他们可以选择使用您的下载器打开它。完成后，您可以创建一个明确的意图，让 YouTube 应用（或普通视频应用）播放新下载的视频。

您可以查看[此答案](https://stackoverflow.com/questions/574195/android-youtube-app-play-video-intent)以获取更多详细信息。

如果您想让用户在 webview 中浏览链接然后将它们传递回您的应用程序，您可能会考虑将 JavaScript 接口绑定到您的 webview [，如此处所述](https://stackoverflow.com/questions/4846296/android-sdk-webview-call-activity)。

另一个选项始终是复制和粘贴 (=

# android - Android有没有办法让每个选项卡（TabHost）中的小部件都可用？

> ID：10142845
> 
> 赞同：1
> 
> 时间：2012-04-13T14:36:21.343
> 
> 标签：android, user-interface, tabs, android-widget

我需要在 TabHost 的每个选项卡中提供 ViewFlipper。然后它下来，它应该涵盖所有内容，包括选项卡。我尝试在 TabHost 和 TabWidget 中进行实例化，但每次我尝试使用 findViewById 进行归因时，它都会给我 NullPointer。有任何想法吗？

使用 API 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:34:28.817

对此的解决方案是将小部件放在主选项卡活动 (TabActivity) 中。然后，我创建了一个方法，例如：

```
public ViewFlipper getWidget(){
   return this.mWidget;
} 
```

然后我可以从任何儿童活动中调用它。

我强烈建议任何阅读本文的人遵循文档和其他用户的建议：不要使用 TabActivity。还有其他比 TabActivity 更好的解决方案。

# python - Python 请求 - 从 iter_content 退出清理

> ID：10142846
> 
> 赞同：0
> 
> 时间：2012-04-13T14:36:27.440
> 
> 标签：python, python-requests

我正在使用 Python Requests 模块来使用 Twitter 流 API，这是我的代码：

```
self.conn = self.session.post(url, data=self.parameters, headers=self.headers)
    print >> sys.stderr, 'Connected to Twitter Streaming API'
    try:
        for line in self.conn.iter_content(self.ITER_BYTES):
            self.status += line
            if line.endswith(self.DIVIDER) and self.status.strip():
                self.handler.handle(self.status)
                self.status = ""
    except Exception as e:
        pass 
```

当我使用 KeyboardInterrupt 或通过向其传递终止信号结束此脚本时，我收到以下堆栈错误：

```
^CTraceback (most recent call last):
  File "python-test.py", line 18, in <module>
    api.start()
  File "bin/polygraph/api/twitter/streaming.py", line 95, in start
    self.conn = self.session.post(url, data=self.parameters, headers=self.headers)
  File "venv/lib/python2.7/site-packages/requests/sessions.py", line 258, in post
    return self.request('post', url, data=data, **kwargs)
  File "venv/lib/python2.7/site-packages/requests/sessions.py", line 208, in request
    r.send(prefetch=prefetch)
  File "venv/lib/python2.7/site-packages/requests/models.py", line 575, in send
    timeout=self.timeout,
  File "venv/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py", line 383, in urlopen
    body=body, headers=headers)
  File "venv/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py", line 261, in _make_request
    httplib_response = conn.getresponse()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 1013, in getresponse
    response.begin()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 402, in begin
    version, status, reason = self._read_status()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 360, in _read_status
    line = self.fp.readline()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 430, in readline
    data = recv(1)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ssl.py", line 219, in recv
    return self.read(buflen)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ssl.py", line 138, in read
    return self._sslobj.read(len)
KeyboardInterrupt 
```

有什么办法可以避免这种情况或优雅地退出连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:40:02.883

您只需要捕获 KeyboardInterrupt 异常。这[不是从 Exception 继承的](http://docs.python.org/library/exceptions.html#exception-hierarchy)，因此您当前没有捕获它。

```
try:
   do_something()
except KeyboardInterrupt:
   cleanup() 
```

这是另一个为什么`except Exception`是一个坏主意的例子。它不仅会捕捉到你不希望它捕捉到的东西，而且它可能不会捕捉到你想要它捕捉到的东西。捕获显式异常。

# view - 需要一个 CouchDB 技巧来按日期排序并按组过滤

> ID：10142850
> 
> 赞同：3
> 
> 时间：2012-04-13T14:36:38.197
> 
> 标签：view, map, couchdb, mapreduce

我有包含“日期”和“组”字段的文档。这是我的观点：

```
byDateGroup: {
  map: function(doc) {
    if (doc.date && doc.group) {
      emit([doc.date, doc.group], null);
    }
  }
} 
```

什么是等效的查询：

```
select * from docs where group in ("group1", "group2") order by date desc 
```

这个简单的解决方案没有进入我的脑海。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:59:37.653

Pankaj，将您发出的密钥的顺序切换为：

```
emit([doc.group, doc.date], doc); 
```

然后你可以在查询视图时传入一个开始键和一个结束键。为要为其提取数据的每个组执行单独的查询可能会更容易。数据将按日期排序。

我现在正在出去，但如果不清楚，可以在我回来时详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:11:17.603

为什么不？

```
function(doc) {
  if (doc.date && ["group1", "group2"].indexOf(doc.group) !== -1)) {
    emit([doc.date, doc.group], null);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:12:44.420

为此，您需要一个特定的视图：

```
byDateGroup1Group2: {
  map: function(doc) {
    if (doc.date && doc.group && (doc.group === "group1" || doc.group === "group2") {
      emit(doc.date, doc);
    }
  }
} 
```

您使用 query 查询（大概在列表函数中）`descending=true`。

# c# - 计数和容量有多快？

> ID：10142852
> 
> 赞同：11
> 
> 时间：2012-04-13T14:36:40.070
> 
> 标签：c#

我经常写这样的代码：

```
if ( list.Count > 0 ) { } 
```

这有效率吗？这个操作看起来像：

*   遍历列表并计算其元素
*   结果：986,000 个元素
*   986,000 是否大于 0？
*   返回真

或者像这样：

*   检索列表中存储的元素数（986,000）
*   986,000 是否大于 0？
*   返回真

也就是要获取列表中的元素个数，是要一直数到列表，还是在某处记录了元素个数？这是所有`ICollection`课程的情况吗？

`Capacity`清单的呢？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-13T14:44:30.403

> 我经常写这样的代码： `if ( list.Count > 0 ) { }`这样有效率吗？

是的。这将检索列表中的计数，该计数存储在列表内的字段中，并将其与零进行比较。

现在有一个你没有问的问题：

> 怎么样 `if ( sequence.Count() > 0 ) { }`？（注意 . 上的括号`Count()`。）

我们在运行时询问序列，看看它是否是一个具有`Count`可以有效计算的属性的列表。如果是这样，我们称之为。如果不是，我们一次将整个序列计数一项，然后将其与零进行比较。

> 这不是令人难以置信的低效吗？

是的。

> 什么会更有效率？

`if (sequence.Any())`

> 为什么这样更有效率？

因为它试图迭代*一个*元素。如果成功，`Any`则为真；如果失败`Any`则为假。您无需数一数罐子里的软糖豆的数量，就可以知道是否有超过零个。您只需要查看是否至少有一个。

除了大大提高效率之外，现在的代码读起来就像代码的预期含义。如果您打算问“列表中有任何项目吗？” 然后问“列表中是否有任何项目？” 而不是“列表中的项目数是否大于零？”

> 列表的`Capacity`属性如何？

这告诉您在列表的内部数据结构中预先分配了多少空间。它是列表在分配更多内存之前可以存储的项目数量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T14:40:12.593

中的`Count`属性`List<T>`- 以及 BCL 中的所有其他`ICollection<T>`实现 - 是一个 O(1) 操作，这意味着它速度很快并且与列表中元素的数量无关。

还有一个扩展方法`Count()`可以在任何`IEnumerable<T>`. 这个方法是 O(n)，这意味着它的运行时间取决于可枚举元素的数量。但是，有一个例外：如果可枚举确实是 的实现，`ICollection<T>`或者`ICollection`它使用该`Count`属性使其再次成为 O(1) 操作。

* * *

该`Capacity`物业通常无需担心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T14:37:44.417

请改用此代码：`list.Any()`. 它可能比 慢`List<>.Count`，但会以最有效的方式适用于任何 IEnumerable<>。

`Capacity`可以大于`Count`。当您计划稍后添加大量项目时使用它。

List.Count 的实现如下（实际上是 O(1) ）：

```
public int Count
{
  get
  {
    return this._size; // this is a field
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T14:39:47.697

Count 是`O(1)`对 List 的操作。

这是可能的最快方式。

**Count**：这是列表中实际存在的元素数量。

**Capcity**：解释更好的文档：

> 获取或设置内部数据结构在不调整大小的情况下可以容纳的元素总数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T14:39:58.307

容量不会告诉您列表中有多少对象 - 只是列表准备好多少。

来自 MSDN：

```
Capacity is the number of elements that the List<T> can store before resizing is required, while Count is the number of elements that are actually in the List<T>. 
```

List.Count 速度超级快，是一个可访问的属性，而 List.Count() 来自 IEnumerable，我相信必须对列表进行完整的枚举。

# android - 同时安装了两个具有相同代码库的 Android 目标

> ID：10142853
> 
> 赞同：1
> 
> 时间：2012-04-13T14:36:46.240
> 
> 标签：android, android-library, intentservice

我正在尝试使用库项目构建从同一代码库派生的两个不同的 Android 应用程序。

这些应用程序正在使用意图服务进行各种操作，但是当我有两个使用同时安装的相同代码库的应用程序时，这似乎失败了。

似乎只有我安装的应用程序的第一个版本有效，第二个似乎没有让服务运行。

有没有人有这方面的经验？这怎么可能解决？

编辑：这些是清单

根据：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.codebase"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <supports-screens android:largeScreens="true" android:anyDensity="true" android:resizeable="true" android:smallScreens="true" android:normalScreens="true"></supports-screens>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application android:icon="@drawable/icon_launcher" android:label="CodeBase" android:process="@string/app_name" android:name="com.codebase.activity.Application" android:theme="@android:style/Theme.NoTitleBar" android:debuggable="false">
        <activity android:configChanges="orientation" android:name="com.codenase.activity.MainActivity" android:launchMode="singleTask">
        <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>
        <service android:name="com.codebase.service.UpdateService" android:process="@string/app_name">
            <intent-filter>
                <action
                    android:name="com.codebase.service.UpdateService" />
            </intent-filter>
        </service>

</manifest> 
```

目标1：

```
 <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10" />

    <supports-screens android:largeScreens="true" android:anyDensity="true" android:resizeable="true" android:smallScreens="true" android:normalScreens="true"></supports-screens>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application android:icon="@drawable/icon_launcher" android:label="Target One" android:name="com.codebase.activity.Application" android:theme="@android:style/Theme.NoTitleBar">
        <activity android:configChanges="orientation" android:name="com.codebase.activity.MainActivity" android:launchMode="singleTask">
        <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service android:name="com.codebase.service.UpdateService" android:process="@string/app_name">
            <intent-filter>
                <action
                    android:name="com.codebase.service.UpdateService" />

            </intent-filter>
        </service>

        </activity>

    </application>

</manifest> 
```

目标 2：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.trg2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10" />

    <supports-screens android:largeScreens="true" android:anyDensity="true" android:resizeable="true" android:smallScreens="true" android:normalScreens="true"></supports-screens>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application android:icon="@drawable/icon_launcher" android:label="Target 2" android:name="com.codebase.activity.Application" android:theme="@android:style/Theme.NoTitleBar">
        <activity android:configChanges="orientation" android:name="com.codebase.activity.MainActivity" android:launchMode="singleTask">
        <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service android:name="com.codebase.service.UpdateService">
            <intent-filter>
                <action
                    android:name="com.codebase.service.UpdateService" />
            </intent-filter>
        </service>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:57:31.717

首先，在这种情况下，无需在 AndroidManifest.xml 中为服务定义 intent-filter，如果您不需要从应用程序外部提供额外的访问点，则以下定义​​就足够了：

```
<service android:name="com.codebase.service.UpdateService"/> 
```

然后使用[public Intent(Context packageContext, Class cls)](http://developer.android.com/reference/android/content/Intent.html#Intent%28android.content.Context,%20java.lang.Class%3C?%3E%29)启动服务：

```
Intent intent = new Intent(getBaseContext(), UpdateService.class);
startService(intent); 
```

其次，如果您确实需要从应用程序外部提供额外的访问点，请不要在多个应用程序中使用相同的操作名称，因为它会在尝试将意图传递给相应的服务时欺骗 Android 操作系统（如果您使用[公共启动服务的意图（字符串操作](http://developer.android.com/reference/android/content/Intent.html#Intent%28java.lang.String%29)）：

目标1：

```
<service android:name="com.codebase.service.UpdateService" android:process="@string/app_name">
  <intent-filter>
    <action android:name="com.codebase.service.UpdateService.TARGET_1" />
  </intent-filter>
</service> 
```

目标 2：

```
<service android:name="com.codebase.service.UpdateService" android:process="@string/app_name">
  <intent-filter>
    <action android:name="com.codebase.service.UpdateService.TARGET_2" />
  </intent-filter>
</service> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:42:01.823

我和你一样基于一个代码库有两个版本的同一个 android 应用程序。

我没有任何问题。两个应用程序具有不同的包名称

但是，我确保两者都具有相同的（共享）用户 ID。也许这就是诀窍

[http://developer.android.com/guide/topics/manifest/manifest-element.html](http://developer.android.com/guide/topics/manifest/manifest-element.html)

（顺便说一句，当我没记错的时候，userId 之间需要有一个点）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:09:01.027

确保您在清单中正确地限定了您的服务。

例如

如果你有：

> 主项目包名 = com.johan.p1
> 
> 图书馆项目包名 = com.johan.library

假设您的服务在库项目中，您的主项目会将服务定义为：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.johan.p1"

     <service android:name="com.johan.library.MyServiceName" />

</manifest> 
```

# java - Java：在 new File() 中传递字符串变量；

> ID：10142854
> 
> 赞同：6
> 
> 时间：2012-04-13T14:36:50.950
> 
> 标签：java, string, file, new-operator

我正在开发一个桌面应用程序，它使用 XPath 读取特定的 XML 元素并将它们显示在`JFrame`.

到目前为止，程序运行顺利，直到我决定`String`在类中传递一个变量`File`。

```
public void openNewFile(String filePath) {
    //file path C:\\Documents and Settings\\tanzim.hasan\\my documents\\xcbl.XML 
    //is passed as a string from another class.
    String aPath = filePath;

    //Path is printed on screen before entering the try & catch.
    System.out.println("File Path Before Try & Catch: "+filePath);

    try {
        //The following statement works if the file path is manually written. 
        // File xmlFile = new File ("C:\\Documents and Settings\\tanzim.hasan\\my documents\\xcbl.XML");

        //The following statement prints the actual path  
        File xmlFile = new File(aPath);
        System.out.println("file =" + xmlFile);

        //From here the document does not print the expected results. 
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        docFactory.setNamespaceAware(true);

        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(xmlFile);
        doc.getDocumentElement().normalize();

        XPath srcPath = XPathFactory.newInstance().newXPath();
        XPathShipToAddress shipToPath = new XPathShipToAddress(srcPath, doc);
        XPathBuyerPartyAddress buyerPartyPath = new XPathBuyerPartyAddress(srcPath, doc);
    } catch (Exception e) {
        //
    }
} 
```

如果我`xmlFile`用静态路径定义（即手动编写），则程序按预期工作。但是，如果我将路径作为字符串变量传递，而不是编写静态路径，`aPath`它不会打印预期的结果。

我做了一些谷歌搜索，但没有找到任何具体的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:16:34.137

如果您[`replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)像这样使用`path.replaceAll("\\", "/")`删除反斜杠，它将失败，因为该`replaceAll()`方法需要一个*正则表达式*作为第一个参数，而单个反斜杠（编码为`"\\"`）是一个**无效**的正则表达式。要使其使用`replaceAll()`，您需要像这样对反斜杠进行双重转义（一次用于字符串，再次用于正则表达式）`path.replaceAll("\\\\", "/")`。

但是，您不需要正则表达式！相反，使用这样的基于纯文本的[`replace()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28char,%20char%29)方法：

```
path.replace("\\", "/") 
```

请注意，名称“replace”和“replaceAll”具有误导性：“replace”仍然替换*所有*出现...决定名称“replaceAll”的白痴应该选择“replaceRegex”或类似的东西

### 编辑

尝试：

```
path = path.replace("\\\\", "/"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:40:30.173

只需使用内置对象方法：

```
System.out.println("file = "+xmlFile.toString()); 
```

您还可以使用：

```
System.out.println("f = " + f.getAbsolutePath()); 
```

此外，如果您遇到文件不存在的问题，请先检查然后继续：

```
File file = new File (aPath);
if(file.exists()) {
  //Do your work
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T19:05:58.627

现在回答这个问题为时已晚，但是......从我的配置文件中删除“”帮助我的意思是

```
 pathVariable=c:\\some\\path\\here 
```

不是这个

```
 pathVariable="c:\\some\\path\\here" 
```

# c++ - 编译SkyFireEMU报错，sizeof(void *)既不是

> ID：10142855
> 
> 赞同：0
> 
> 时间：2012-04-13T14:36:55.057
> 
> 标签：c++, windows, visual-studio-2010, world-of-warcraft

我正在尝试使用 Visual Studio 2010（32 位）编译 SkyFireEMU（https://github.com/ProjectSkyfire/SkyFireEMU），但出现错误（在“worldserver”的几乎所有文件上）：

```
fatal error C1189: #error :  sizeof(void *) is neither sizeof(int) nor sizeof(long) nor sizeof(long long) 
```

这让我重新回到了代码的平静：

```
#if SIZEOF_CHARP == SIZEOF_INT
typedef int intptr;
#elif SIZEOF_CHARP == SIZEOF_LONG
typedef long intptr;
#elif SIZEOF_CHARP == SIZEOF_LONG_LONG
typedef long long intptr;
#else
#error sizeof(void *) is neither sizeof(int) nor sizeof(long) nor sizeof(long long)
#endif 
```

有人可以帮我解决这个问题吗？错误是什么意思？我真的不知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:13:07.030

代码很旧。今天你可以使用`typedef intptr_t intptr`（又名`std::intptr_t`in `<cstdint>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:55:04.220

`SIZEOF_CHARP`没有正确设置（根据编写该代码的人），因此调用错误消息。你最好的办法是查阅 SkyFireEMU 文档，你可能需要在编译之前设置这个标志，或者类似的东西。

话虽如此，我快速谷歌了一下，发现[了这个](http://yetanothermysqlblog.blogspot.com.au/)，它描述了一个相同的错误消息。它建议在您提供的块之前编写以下内容：

```
#ifndef SIZEOF_CHARP
#define SIZEOF_CHARP SIZEOF_LONG
#endif 
```

但是可能仍然存在潜在问题，因为这实际上只会抑制错误。

# c# - 第二个测试方法失败 Selenium C#

> ID：10142858
> 
> 赞同：2
> 
> 时间：2012-04-13T14:36:57.833
> 
> 标签：c#, .net, unit-testing, selenium, visual-studio-2012

这是我的代码：

```
[TestInitialize]
    public void init()
    {
        _browser = new DefaultSelenium("localhost", 4444, @"*iehta", "http://localhost:4444");
    }

    [TestMethod]
    public  void TestLogin()
    {
        bool hasText;

        _browser.Start();

        _browser.Open("http://localhost/testSite.asp");
        _browser.Type("id=NomUtilisateur", "admin");
        _browser.Type("id=UserPassword", "password");
        _browser.Click("name=Submit");
        _browser.WaitForPageToLoad("30000");
        hasText = _browser.IsTextPresent("test");

        Assert.IsTrue(hasText, @"The search result does not contain text ""test"".");

    }
    [TestMethod]
    public void TestRequisitionPhotocopie()
    {

        _browser.Start();
        _browser.Open("http://localhost/testSite.asp");
        _browser.Type("id=NomUtilisateur", "admin");
        _browser.Type("id=UserPassword", "password");
        _browser.Click("name=Submit");
        _browser.WaitForPageToLoad("30000");
        _browser.Click("link=lnkTest");
        _browser.WaitForPageToLoad("30000");

    }
    [TestCleanup]
    public void clean()
    {
        _browser.Stop();
        //_browser.Close();
    } 
```

如果我运行这两种测试方法，第二次测试总是失败并显示如下错误消息：远程服务器不存在或不可用

如果我评论其中一种测试方法，它正在工作，我的两种测试方法正在工作

我的错在哪里。

谢谢

编辑：错误并非每次都发生，但错误在 Selenium 远程控制中如果我调试错误在 selenium-browserbot.js 中的第 724 行：

Selenium 日志控制台中没有任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:39:50.270

你试过这样吗？我总是在测试设置中启动 selenium。（我也在使用 Nunit

```
[SetUp]
public void init()
{
    _browser = new DefaultSelenium("localhost", 4444, @"*iehta",   "http://localhost:4444");
    _browser.Start();
    _browser.Open("http://localhost/testSite.asp");
}

[TestMethod]
public  void TestLogin()
{
    bool hasText;

    _browser.Type("id=NomUtilisateur", "admin");
    _browser.Type("id=UserPassword", "password");
    _browser.Click("name=Submit");
    _browser.WaitForPageToLoad("30000");
    hasText = _browser.IsTextPresent("test");

    Assert.IsTrue(hasText, @"The search result does not contain text ""test"".");

}
[TestMethod]
public void TestRequisitionPhotocopie()
{
    _browser.Type("id=NomUtilisateur", "admin");
    _browser.Type("id=UserPassword", "password");
    _browser.Click("name=Submit");
    _browser.WaitForPageToLoad("30000");
    _browser.Click("link=lnkTest");
    _browser.WaitForPageToLoad("30000");

}
[TearDown]
public void clean()
{
    _browser.Stop();
    //_browser.Close();
} 
```

# java - 从 JTextPane 获取 JLabel 并更改其文本

> ID：10142860
> 
> 赞同：1
> 
> 时间：2012-04-13T14:37:02.943
> 
> 标签：java, swing, jlabel, jtextpane, dom

我将带有 JLabel 的文本添加到 JTextPane，然后我需要更改 JTextPane 中所有 JLabel 中的文本。我该怎么做？

```
...
JTextPane pane = new JTextPane();
HTMLEditorKit kit = new CompEditorKit();
HTMLDocument doc = new HTMLDocument();
pane.setEditable(false);
pane.setContentType("text/html");
pane.setEditorKit(kit);
pane.setDocument(doc);
...
kit.insertHTML(doc, doc.getLength(), "Test<object align=\"left\" classid=\"javax.swing.JLabel\"><param name=\"text\" value=\"22\"></object>Test", 0, 0, null);
EditLabels(doc);
...
public void EditLabels(Document doc) {
    if (doc instanceof HTMLDocument) {
        Element elem = doc.getDefaultRootElement();
        ElementIterator iterator = new ElementIterator(elem);
        while ((elem = iterator.next()) != null) {
            AttributeSet attrs = elem.getAttributes();
            Object elementName = attrs.getAttribute(AbstractDocument.ElementNameAttribute);
            Object o = (elementName != null) ? null : attrs.getAttribute(StyleConstants.NameAttribute);
            if (o instanceof HTML.Tag) {
                if ((HTML.Tag) o == HTML.Tag.OBJECT) {
                    View view = new CompView(elem);
                    //View view = (View)super.create(elem); //ERROR
                    //if (view instanceof JLabel)
                    //{
                    //  ((JLabel) view).setText("NM");
                    //  JLabel label = (JLabel)view;
                    //}
                }
            }
        }
    }
} 
```

## 例如

```
View view = new CompView(elem);
((JLabel) view).setText("NM");
error: inconvertible types
  required: JLabel
  found:    View

View view = (View)super.create(elem);
error: cannot find symbol
  symbol: method create(Element) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:51:40.880

好吧，您正在混合两种完全不同的东西——JLabel 是一个单独的 Swing 组件，它包含文本和图标，并且可以显示在任何容器中。JTextPane 是一个文本编辑器，它的文档不包含任何单独的 JLabel，这就是为什么在尝试将 View 转换为 JLabel 时会出现“不可转换类型”异常的原因。

View 只是通过将（在您的情况下）HTML 解析为结构化元素树而创建的各种元素的基础。

阅读一些关于 JTextPane 和其他类似组件的文档可能会有所帮助：http: [//docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)

# android - AXML 中的未绑定前缀错误

> ID：10142865
> 
> 赞同：0
> 
> 时间：2012-04-13T14:37:25.360
> 
> 标签：android, android-layout

我的 axml 有问题：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/optionLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white_transparent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/headerLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/startTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/black"
            android:layout_weight="1"
            android:text="@string/start" />

    (X) <TextView
            android:id="@+id/startDateTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            andorid:textColor="@color/black"
            android:layout_weight="1"
            android:text="Mon, 13:30" />

        <TextView
            android:id="@+id/endTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            andorid:textColor="@color/black"
            android:layout_weight="1"
            android:text="@string/end" />

        <TextView
            android:id="@+id/endDateTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            andorid:textColor="@color/black"
            android:layout_weight="1"
            android:text="Mon, 14:30" />

    </LinearLayout>
</LinearLayout> 
```

在 (X) 标记的位置上，我得到了一个未绑定的前缀错误（如果我删除了这个 textView，则在下一个 TextView 上标记了错误）。第一个 TextView 正在工作。其他人都没有。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:38:55.097

代替 ：

```
andorid:textColor="@color/black" 
```

写：

```
android:textColor="@color/black" 
```

你`android`写错了。

# javascript - 使用 JavaScript 引用 URL 来播放声音？

> ID：10142867
> 
> 赞同：11
> 
> 时间：2012-04-13T14:37:44.877
> 
> 标签：javascript, audio, mobile, soundcloud

我使用 soundcloud dot com 上传我的声音。我想在我的移动应用程序中按下一个按钮并播放该声音。

所以基本上我希望从用户按下按钮时给出的 URL 中引用我的声音。

我只需要用 Javascript 来做。请不要使用 HTML 5。非常感谢任何帮助，因为这非常令人沮丧。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-15T10:52:52.907

真正开始非常简单：

```
function playSound(url) {
    var a = new Audio(url);
    a.play();
} 
```

将其用作您想要的应用程序的任何事件处理程序。当然，我希望你想做的不仅仅是玩（例如，也许暂停也不错？），但这是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:40:14.353

使用 jPlayer 使用 Javascript 播放声音。这将花费你很多时间和挫败感。

jplayer.org/

这是您的代码在 jPlayer 中的样子。注意：您不必强制使用 jPlayer 皮肤，因为它只是一个用于播放音频的 API。

在加载时播放视频或音频的示例代码。

```
$(function() { // executed when $(document).ready()
  $("#jpId").jPlayer( {
    ready: function () {
      $(this).jPlayer("setMedia", {
        m4v: "http://www.myDomain.com/myVideo.m4v" // Defines the m4v url
      }).jPlayer("play"); // Attempts to Auto-Play the media
    },
    supplied: "m4v",
    swfPath: "jPlayer/js"
  });
}); 
```

[http://jplayer.org/latest/developer-guide/](http://jplayer.org/latest/developer-guide/)

# uml - 基于活动图的用例

> ID：10142868
> 
> 赞同：2
> 
> 时间：2012-04-13T14:37:45.743
> 
> 标签：uml, use-case

我想知道是否有人可以帮助我，我正在尝试从我绘制的活动图中做一个用例图，但我的用例图不是很好；如果我在这里所做的正确，谁能指导我。

您可以在此链接中查看图表：

[http://imageshack.us/photo/my-images/857/activitydiagram.png/](http://imageshack.us/photo/my-images/857/activitydiagram.png/)

[http://imageshack.us/photo/my-images/816/usecase.png/](http://imageshack.us/photo/my-images/816/usecase.png/)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:13:22.477

先来点背景。

活动和用例图通常描述行为。活动图通常描述一个过程（或活动的链接序列）。你的并没有真正做到这一点。没关系-只要图表适合您就可以了。

将活动图设计为实现用例的过程也是正常的。你要求走另一条路。同样，不是传统的 - 但并非不可能。

用例通常写成动词语句并描述用户想要执行的操作（例如“购买书”、“结帐”）。你的是名词。

好的 - 所以你的问题。

识别用例涉及提出以下问题：“用户可以做什么？”。查看您的活动图，我猜用例将类似于：

*   拍照[带相机]
*   查看照片
*   查看地图
*   在地图上查看当前位置

其中每一个都是一个用例。可能还有其他人（用户可以用收藏夹做什么？），但这应该会给你这个想法。

hth。

# objective-c - Objective-c 中的 C# 样式类扩展

> ID：10142871
> 
> 赞同：1
> 
> 时间：2012-04-13T14:37:52.050
> 
> 标签：objective-c, objective-c-category, class-extensions

经过大量的 C# 经验后，我只是在学习 Objective-c。我非常想念的一件事是能够在一个单独的项目中编写扩展方法，我可以在我的所有项目中引用它。这是一些天真的c#：

```
public static bool IsShortString(this string s) {
    return s.length <= 3;
} 
```

在 Visual Studio 中，我可以只添加一个引用 an `using`，而 bam`myString.IsShortString()`将是一个相当无用的方法。

所以我想我想写一个静态库，但我不确定我从那里去哪里。

还有一个问题，如果我确实编写了这个静态库，我是否能够使用一个`#import`指令在库中的各种文件中使用所有方法，还是必须单独导入每个标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:42:50.280

The closest thing in objective-c is [categories](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html).

[This](http://macdevelopertips.com/objective-c/objective-c-categories.html) is also a good tutorial on categories.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:46:57.940

What you are looking for is called Category, and it allows you to add some additional methods to existing classes. Check the reference [http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

You can create your own toolkit which is a static library containing categories you made. Common practice is to create one header file containing imports for all the headers in the lib, so when using it, you just do

```
#import "libName.h" 
```

Also, when creating a static library containing categories it is important to include `-all_load` and `-ObjC` linker flags to your project.

# php - 我可以从布局 XML 文件中调用单例方法作为 ` 中参数的值吗 `

> ID：10142872
> 
> 赞同：2
> 
> 时间：2012-04-13T14:37:53.167
> 
> 标签：php, xml, magento

正如标题所说。我可以从布局 XML 文件中调用单例方法作为参数的值`<action>`吗？

例如，我可以在 Magento 的布局文件中将下面的 PHP 代码表示为 XML 吗？

**PHP**

```
$this->addColumn('status', array(
    'header' => Mage::helper('sales')->__('Status'),
    'index' => 'status',
    'type'  => 'options',
    'width' => '70px',
    'options' => Mage::getSingleton('sales/order_config')->getStatuses(),
)); 
```

**布局 XML**

```
<action method="addColumn">
    <columnId>status</columnId>
    <column translate="header">
        <header>Status</header>
        <index>status</index>
        <type>options</type>
        <width>70px</width>
        <options>What should I put here?</options>
    </column>
</action> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:58:56.513

不可以。布局 XML 操作参数可用于传递文本、数组结构或帮助程序( **grin** )*的返回值。*最后一点，您可以创建一个辅助方法来执行您想要的操作：

 **```
Some_Module_Helper_Class extends Mage_Core_Helper_Abstract
{
    public function getSalesOrderConfigOptions()
    {
        return Mage::getSingleton('sales/order_config')->getStatuses();
    }
} 
```

在您的布局 XML 中：

```
<action method="addColumn">
    <columnId>status</columnId>
    <column translate="header">
        <header>Status</header>
        <index>status</index>
        <type>options</type>
        <width>70px</width>
        <!-- read as Mage::helper('some_module/class')->getSalesOrderConfig() -->
        <options helper="some_module/class/getSalesOrderConfig" />
        <!-- the return value of the method will be passed as the parameter in this position -->
    </column>
</action> 
```

高温高压**

# c# - 将 C# 类文件添加到项目的代码

> ID：10142874
> 
> 赞同：2
> 
> 时间：2012-04-13T14:38:02.450
> 
> 标签：c#

任何人都可以提供一些代码块来将现有的 C# 文件添加到项目中。

我的解决方案中有 2 个项目。一个项目生成 C# 类文件，供第二个项目使用。我必须将这些生成的文件包含在第二个项目中并构建项目。它应该以编程方式完成。我知道要包含这些文件，我必须编辑 C#project 文件（这是一个 XML）并在该文件中创建一个条目。但如果有人有的话，我想使用现有的代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:15:27.690

您可以查看[MsBuild.Engine](http://msdn.microsoft.com/en-us/library/microsoft.build.buildengine.aspx)命名空间。它允许您以一致的方式操作 csproj，以便您可以操作目标项目并以编程方式添加引用。

# jquery - jquery克隆函数宽度一个addClass嵌套

> ID：10142879
> 
> 赞同：0
> 
> 时间：2012-04-13T14:38:28.023
> 
> 标签：jquery, clone

克隆 div 后，我无法**选择**我的选项。

克隆后，我希望能够选择选项并提供选定的课程。所以每个克隆的 div 都有选择的选项。

请检查我的演示并尝试克隆。

[http://jsfiddle.net/XeELs/60/](http://jsfiddle.net/XeELs/60/)

**jQuery**

```
var cloneCount = 0;
$("#add-address").click(function() {

    $("#to-add-address").clone()
        .attr("id", "to-add-address_Clone" + cloneCount)
        .insertAfter("#to-add-address");
    $("#clone", "#to-add-address_Clone" + cloneCount)
        .attr("id", "clone_Clone" + cloneCount);
    cloneCount++;

    $('.options li a').bind('click',function () {
            $('.options li a').removeClass('selected');
            $(this).addClass('selected');
        });

}); 
```

**HTML**

```
<ul>    
    <li id="to-add-address" class="outerDiv address" >
        <div id="clone">
            <label><input type="text" value="Address"><span class="input-edit"></span></label>
            <label><input type="text" value="Address 2"><span class="input-edit"></span></label>
            <label><input type="text" value="Town"><span class="input-edit"></span></label>
            <label><input type="text" value="Contry"><span class="input-edit"></span></label>
            <label><input type="text" value="Post Code"><span class="input-edit"></span></label>

            <ul class="options">
                <li class="home"><a href="javascript:void(0);">home</a></li>
                <li class="work"><a href="javascript:void(0);">work</a></li>
                <li class="other"><a href="javascript:void(0);">other</a></li>
                <li class="delete"><a href="javascript:void(0);">delete</a></li>
            </ul>
        </div>
    </li>
</ul>

<a href="javascript:void(0);" id="add-address">clone</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:44:21.490

您可以将其更改为仅影响该克隆中的元素：

```
$(this).closest(".options").find('li a').removeClass('selected'); 
```

* * *

此外，您每次都重新绑定单击，导致每个元素上的侦听器数量随着每次克隆而增加，而不是使用事件委托：

```
 $(document).on("click", '.options li a',function () {
        var $this = $(this);
        $this.closest(".options").find('li a').removeClass('selected');
        $this.addClass('selected');
    }); 
```

如果您的真实代码有一个共同的父级，`document`请用适当的选择器替换。

[http://jsfiddle.net/XeELs/61/](http://jsfiddle.net/XeELs/61/)

# c# - 为什么将 High chance 子句放在嵌套 If else 的前面会降低性能？

> ID：10142883
> 
> 赞同：1
> 
> 时间：2012-04-13T14:38:41.313
> 
> 标签：c#, performance, if-statement

奇怪的是，我一直认为我们应该始终将高机会子句放在嵌套 if-else 的前面，直到今天。

简要设置：

一个数组`Zoo[]`包含 5 个类别的 10,000 个对象，基于权重，例如 4,3,2,1,0（表示 4000 只猫、3000 只狗、2000 只鸡、1000 只兔子、0 只猫头鹰），它可以被洗牌或不洗牌（完全按顺序）。

然后使用`if-else`检查每个数组成员。

结果：时间（毫秒）

```
 Weights         43210  01234  22222  43210  01234  22222
  Shuffle         Yes    Yes    Yes    No     No     No
  Polymorphism    101    100    107    26     26     27
  If Else         77     28     59     17     16     17
  If Else Reverse 28     77     59     16     17     16
  Switch          21     21     21     18     19     18 
```

当我看到`If-Else`反面比`if-else`. 这里`if-else`检查 Cat->Dog->Chicken->Rabbit->Owl，反向版本以相反的顺序检查它们。

另外，有人可以在非随机版本中解释每种方法都有很大的改进吗？（我会假设由于缓存或内存中更好的命中率？）

### 更新

```
 Weights         27 9 3 1 0   0 1 3 9 27  27 9 3 1 0  0 1 3 9 27
  Shuffle         Yes          Yes         No          No
  Polymorphism    84           82          27          27
  If Else         61           20          17          16
  If Else Reverse 20           60          16          17
  Switch          21           21          18          18 
```

代码如下：

```
class Animal : AnimalAction
{
    public virtual int Bart { get; private set; }
    public int Type { get; private set; }
    public Animal(int animalType)
    {
        this.Type = animalType;
    }
}
interface AnimalAction
{
    int Bart { get; }
}

class Cat : Animal
{
    public Cat()
        : base(0)
    {
    }
    public override int Bart
    {
        get
        {
            return 0;
        }
    }
}
class Dog : Animal
{
    public Dog()
        : base(1)
    {
    }
    public override int Bart
    {
        get
        {
            return 1;
        }
    }
}
class Chicken : Animal
{
    public Chicken()
        : base(2)
    {
    }
    public override int Bart
    {
        get
        {
            return 2;
        }
    }
}
class Rabbit : Animal
{
    public Rabbit()
        : base(3)
    {
    }
    public override int Bart
    {
        get
        {
            return 3;
        }
    }
}
class Owl : Animal
{
    public Owl()
        : base(4)
    {
    }
    public override int Bart
    {
        get
        {
            return 4;
        }
    }
}

class SingleDispatch
{
    readonly Animal[] Zoo;
    int totalSession;

    SingleDispatch(int totalSession, int zooSize)
    {
        this.totalSession = totalSession;
        Zoo = new Animal[zooSize];
        int[] weights = new int[5] { 0, 1, 2, 3, 4 };
        int totalWeights = weights.Sum();
        int[] tiers = new int[4];
        int accumulated = 0;
        for (int i = 0; i < 4; i++)
        {
            accumulated += weights[i] * zooSize / totalWeights;
            tiers[i] = accumulated;
        }

        for (int i = 0; i < tiers[0]; i++)
        {
            Animal nextAnimal = new Cat();
            Zoo[i] = nextAnimal;
        }
        for (int i = tiers[0]; i < tiers[1]; i++)
        {
            Animal nextAnimal = new Dog();
            Zoo[i] = nextAnimal;
        }
        for (int i = tiers[1]; i < tiers[2]; i++)
        {
            Animal nextAnimal = new Chicken();
            Zoo[i] = nextAnimal;
        }
        for (int i = tiers[2]; i < tiers[3]; i++)
        {
            Animal nextAnimal = new Rabbit();
            Zoo[i] = nextAnimal;
        }
        for (int i = tiers[3]; i < zooSize; i++)
        {
            Animal nextAnimal = new Owl();
            Zoo[i] = nextAnimal;
        }

        Zoo.FisherYatesShuffle();
    }

    public static void Benchmark()
    {
        List<Tuple<string, double>> result = new List<Tuple<string, double>>();
        SingleDispatch myBenchmark = new SingleDispatch(1000, 10000);

        result.Add(TestContainer.RunTests(10, myBenchmark.SubClassPoly));

        result.Add(TestContainer.RunTests(10, myBenchmark.Ifelse));
        result.Add(TestContainer.RunTests(10, myBenchmark.IfelseReverse));

        result.Add(TestContainer.RunTests(10, myBenchmark.Switch));

        foreach (var item in result)
        {
            Console.WriteLine("{0,-30}{1:N0}", item.Item1, item.Item2);
        }
        Console.WriteLine();
    }

    void SubClassPoly()
    {
        long sum = 0;
        for (int i = 0; i < totalSession; i++)
        {
            foreach (var myAnimal in Zoo)
            {
                sum += myAnimal.Bart;
            }
        }
    }

    void Ifelse()
    {
        long sum = 0;
        for (int i = 0; i < totalSession; i++)
        {
            foreach (var myAnimal in Zoo)
            {
                if (myAnimal.Type == 0)
                {
                    sum += 0;
                }
                else if (myAnimal.Type == 1)
                {
                    sum += 1;
                }
                else if (myAnimal.Type == 2)
                {
                    sum += 2;
                }
                else if (myAnimal.Type == 3)
                {
                    sum += 3;
                }
                else
                {
                    sum += 4;
                }
            }
        }
    }
    void IfelseReverse()
    {
        long sum = 0;
        for (int i = 0; i < totalSession; i++)
        {
            foreach (var myAnimal in Zoo)
            {
                if (myAnimal.Type == 4)
                {
                    sum += 4;
                }
                else if (myAnimal.Type == 3)
                {
                    sum += 3;
                }
                else if (myAnimal.Type == 2)
                {
                    sum += 2;
                }
                else if (myAnimal.Type == 1)
                {
                    sum += 1;
                }
                else
                {
                    sum += 0;
                }
            }
        }
    }

    void Switch()
    {
        long sum = 0;
        for (int i = 0; i < totalSession; i++)
        {
            foreach (var myAnimal in Zoo)
            {
                switch (myAnimal.Type)
                {
                    case 0:
                        sum += 0;
                        break;
                    case 1:
                        sum += 1;
                        break;
                    case 2:
                        sum += 2;
                        break;
                    case 3:
                        sum += 3;
                        break;
                    case 4:
                        sum += 4;
                        break;
                    default:
                        break;
                }
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:48:54.410

分支预测。[http://igoro.com/archive/fast-and-slow-if-statements-branch-prediction-in-modern-processors/](http://igoro.com/archive/fast-and-slow-if-statements-branch-prediction-in-modern-processors/)

对于非洗牌的情况，它更容易理解。假设我们有一个非常简单的预测器，它猜测下一个结果将与前一个结果相同：

例如 (c=cat,d=dog,o=owl)

动物：CCCCC DDDDD OOOOO

预测：*CCCC CDDDD DOOOO

正确：NYYY NYYY NYYYY

如您所见，只有当动物发生变化时，预测才会出错。因此，对于每种类型的 1000 只动物，预测值的正确率超过 99%。

但是，预测器并不是这样工作的，

真正发生的事情**是每个 if 分支都被预测为真或假。假设 (40%,30%,20%,10%,0%) 分布，如您的示例所示：

if (Animal.Type == MostCommonType) true 不到一半的时间 (40%) 40 out of 100 (40+30+20+10+0) else if (animal.Type == SecondMostCommonType) //true 50% of时间，60 次中有 30 次 (30+20+10 + 0) else if (animal.Type == ThirdMostCommonType) // true 66% 的时间 30 次中有 20 次 (20+10) else if (animal.Type = = FourtMostCommonType) // true 100% 的时间 10 out of 10 (10 +0)

40%、50% 和 60% 的几率并没有给预测器提供太多的工作机会，唯一好的预测 (100%) 是在最不常见的类型和最不常见的代码路径上。

但是，如果您反转 if 顺序：

if (animal.Type == FifthMostCommonType) //100% 的错误 100 个中的 0 个 (40+30+20+10+0) else if (animal.Type == FourtMostCommonType) //90% 的错误100 次中的 10 次 (40+30+20+10) else if (Animal.Type == MostCommonType) //77% 的错误 90 次中的 20 次 (40+30+20+) else if (animal.Type = = SecondMostCommonType) //true 57% of time, 30 out of 70 (40+30) else if (animal.Type == ThirdMostCommonType) // true 100% of time 40 out of 40 (40+)

几乎所有的比较都是高度可预测的。

预测下一个动物不会是最不常见的动物将比任何其他预测更正确。

简而言之，这种情况下错过分支预测的总成本高于做更多分支（即 if 语句）的成本

我希望这能澄清一点。如果有任何部分不清楚，请告诉我，我会尽力澄清。

**嗯，不是真的，但更接近真相。

编辑：

较新处理器中的分支预测器相当复杂，您可以在[http://en.wikipedia.org/wiki/Branch_predictor#Static_prediction中查看更多详细信息](http://en.wikipedia.org/wiki/Branch_predictor#Static_prediction)

改组通过删除相似数据组并使每个猜测或预测可能是正确的来混淆预测器。想象一副全新的纸牌。一个朋友拿起每张卡片，让你猜猜它是红色还是黑色。

在这一点上，一个相当好的算法是猜测最后一张牌是什么。你几乎每次都会猜对。> 90%

然而，在洗牌后，这个算法只能给出 50% 的准确率。事实上，没有任何算法会给你带来明显优于 50% 的效果。（据我所知，计算剩下的红色和黑色的数量是在这种情况下获得优势的唯一方法。）

编辑：重新分类

我猜这是因为 CPU / L1/2/etc 缓存未命中。由于每个类都将返回值实现为常量，即返回 0，因此返回值是函数的一部分。我怀疑如果你重新实现了如下所示的类，你会在每次调用时强制缓存未命中，并看到相同的（坏的）性能被洗牌与否。

```
 class Rabbit : Animal
{
    int bartVal; // using a local int should force a call to memory for each instance of the class
    public Rabbit():base(3)
    {
    bartVal = 3;
    }
    public override int Bart
    {
        get
        {
            return bartVal;
        }
    }
} 
```

# java - 如何在 ICU4J 的 MessageFormat 中自定义货币格式

> ID：10142892
> 
> 赞同：1
> 
> 时间：2012-04-13T14:39:03.377
> 
> 标签：java, internationalization, icu, messageformat

我有一个生成大量文档的系统。它的内容在 ResourceBundles 中定义。

我想自定义 MessageFormat 打印货币值的方式。有时我希望它显示没有小数位的货币（但并非总是如此）。

这应该按预期工作，但不是：

```
System.err.println(
  com.ibm.icu.text.MessageFormat.format(
      "{0,number,\u00A4#}", 
      new com.ibm.icu.util.CurrencyAmount(1, 
        com.ibm.icu.util.Currency.getInstance("USD")))); 
```

不幸的是，它打印出来：

```
US$1,00 
```

你们中是否有人在资源包“属性”文件中使用自定义格式的货币？

我不想在系统范围内更改它。

顺便说一句，这适用于 java.text.MessageFormat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:09:17.263

好的，我再次阅读了您的问题。我真的不知道你为什么要砍掉美分部分（在美国，这在韩国或日本是有意义的，因为他们根本不使用它们）。
无论如何，我认为只切断美分部分不是一个好主意，但如果你想这样做，它就像使用 NumberFormat 和[setMaximumIntegerDigits(int)](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html#setMaximumIntegerDigits%28int%29)一样简单。

顺便说一句，我仍然不知道为什么使用资源包不能使用[NumberFormat](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html)。您仍然可以在以下位置调用格式化程序`MessageFormat.format()`：

```
NumberFormat currencyFormatter = NumberFormat.getCurrencyInstance(Locale.US);
currencyFormatter.setMaximumFractionDigits(0);
System.err.println(MessageFormat.format("Some amount: {0}.",
        currencyFormatter.format(1d))); 
```

可以预见的是它会打印出来：

> 一些金额：1美元。

如果您需要保留货币，我建议`setCurrency(Currency)`您通过保留本地格式来使用方法 - 无论如何您都是在内部化标签中提出这个问题。

* * *

**编辑：包括有关 MessageFormat 功能的信息**

如果您需要为区域设置使用自定义货币格式，您实际上需要实例化 MessageFormat 类（常规静态`MessageFormat.format(String, Object...)`在 Web 应用程序中不起作用，因为它使用默认区域设置 -`Locale.getDefault(Locale.Category.FORMAT)`在 Java 7 中 - 如果您愿意，可以使用服务器区域设置）。

因此，您真正想要的是编写一个看起来与此类似的辅助方法（对不起，没有奖金）（内存不足，抱歉）：

```
public static String format(String pattern, Locale locale, Object... args) {
  final String emptyPattern = "";
  final FieldPosition zero = new FieldPosition(0);
  MessageFormat fmt = new MessageFormat(emptyPattern, locale);
  StringBuffer buf = new StringBuffer(); // I just love it...

  fmt.applyPattern(pattern);
  fmt.format(args, buf, zero);

  return buf.toString();
} 
```

出于性能原因，您可能会考虑创建一次 StringBuffer，然后一直清理它，但我将优化留给您自己。
您还需要稍微修改模式，我稍后会解释原因：

```
String pattern = "{1}{0,number,\u00A4#}"; 
```

您需要将金额和货币符号传递给翻译人员，将符号放置在哪里以及如何格式化区域设置的值（不要忘记在属性文件中添加注释！）。

# php - PHP - 切换、大小写和“继续” - 多选通用然后特定

> ID：10142895
> 
> 赞同：1
> 
> 时间：2012-04-13T14:39:09.733
> 
> 标签：php, switch-statement, case

有没有办法在**不**使用另一个开关盒的情况下进行通用处理然后进行特定处理？

```
switch ($var) {
  case 'A' :
    /* SPECIFIC TREATMENT 1 */
    break;
  case 'B' :
    /* SPECIFIC TREATMENT 2 */
    break;
  case 'C' :
  case 'D' :
  case 'E' :
    /* GENERIC, COMMON TREATMENT */
    // go on, check again $var ! :(
  case 'C' :
    /* SPECIFIC TREATMENT 3 */
    break;
  case 'D' :
    /* SPECIFIC TREATMENT 4 */
    break;
  case 'E' :
    /* SPECIFIC TREATMENT 5 */
    break;
  case 'F' :
    /* SPECIFIC TREATMENT 6 */
    break;
  default :
    /* DEFAULT TREATMENT */
    break;
} 
```

为了避免重复代码，它会非常有效......我想避免在第一个中使用另一个 Switch() 。谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:40:36.817

嗯...

```
$txt = "You pick the letter ".$var; 
```

或许？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T14:49:04.620

```
 $txt = "you picked the letter ";
    $var = 'C';
    switch ($var) {
      case 'A' :
        $txt .= "A";
        break;
      case 'B' :
        $txt .= "B";
        break;
      case 'C' :
        $txt .= "C";
        break;
      case 'D' :
        $txt .= "D";
        break;
      default :
        $txt = 'you didnt pick A or B or C or D';
        break;
    }
    echo $txt; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T14:53:08.137

```
$cases = array('A','B','C','D');
if (in_array($var, $cases)) {
    /* GENERIC, COMMON TREATMENT */

    switch ($var) {
        case 'A' :
            /* SPECIFIC TREATMENT 1 */
        break;
        case 'B' :
            /* SPECIFIC TREATMENT 2 */
        break;
        case 'C' :
            /* SPECIFIC TREATMENT 3 */
        break;
        case 'D' :
            /* SPECIFIC TREATMENT 4 */
        break;

    }
} else {
    /* DEFAULT TREATMENT */

} 
```

根据您随后的编辑，我会保持相同的方法

```
$cases = array('A','B','C','D','E','F','G');
if (in_array($var, $cases)) {
    $common = array('C','D','E');
    if (in_array($var, $common)) {
        /* GENERIC, COMMON TREATMENT */
    }
    switch ($var) {
        case 'A' :
            /* SPECIFIC TREATMENT 1 */
        break;
        case 'B' :
            /* SPECIFIC TREATMENT 2 */
        break;
        case 'C' :
            /* SPECIFIC TREATMENT 3 */
        break;
        case 'D' :
            /* SPECIFIC TREATMENT 4 */
        break;
        case 'E' :
            /* SPECIFIC TREATMENT 2 */
        break;
        case 'F' :
            /* SPECIFIC TREATMENT 3 */
        break;
        case 'G' :
            /* SPECIFIC TREATMENT 4 */
        break;

    }
} else {
    /* DEFAULT TREATMENT */

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T14:59:07.090

```
$common = function() use (&$var) {
    // do stuff that is common to several cases
};
switch($var) {
    case 'A':
        $common();
        // now specific stuff
        break;
    case 'B':
        $common();
        // specific
        break;
} 
```

等等。你仍然会得到 的重复`$common()`，但至少它比你可能想要做的要少。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T14:53:50.977

```
$var='c';
$arr=array('A'=>'xxx',B=>'xxxxxx'.......);
echo 'some you want '.$arr($var); 
```

# vim - 来自 MacVim 的 mkdir

> ID：10142904
> 
> 赞同：4
> 
> 时间：2012-04-13T14:39:30.093
> 
> 标签：vim, macvim

如何从 MacVim 创建目录？

我可以`:e`用来创建文件，但我正在努力找出如何创建目录。

我已经尝试过`mkdir`，`:`但它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T14:41:42.997

您可以使用 ! 执行任何 shell 命令。像这样：

```
:!mkdir YOURDIR 
```

阅读更多

```
 :help ! 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T14:54:38.170

有一个原生`vim`功能`mkdir()`。

例子：

```
:call mkdir("/path/to/your/dir", "p", 0700) 
```

键入`:help mkdir()`以阅读更多信息。

# javascript - 尝试突出显示元素并同时选中复选框时出现jQuery单击事件/事件冒泡问题

> ID：10142906
> 
> 赞同：1
> 
> 时间：2012-04-13T14:39:33.153
> 
> 标签：javascript, checkbox, click, jquery

请看看这个小提琴：http: [//jsfiddle.net/mrmartineau/53fkV/embedded/result/](http://jsfiddle.net/mrmartineau/53fkV/embedded/result/)

预期的结果是，当单击 a 时`.poll_option td`，背景颜色变为粉红色并选中复选框。每个选项都有不同的错误，它们是：

**选项 1：** 我遇到的问题是，在选项 1 上，当我单击复选框本身时，它不会检查，但其他一切正常。我的意思是当我点击标签时`<td>`，结果是正确的。似乎事件没有正确冒泡..

**选项 2：** 对于这个，我尝试了另一种解决方案（删除了 .toggle() 方法）并试图找出实际单击的元素（`console.log(e.target.nodeName);`），现在我可以单击复选框但不能单击标签，而不是标签没有使活动发挥作用。

你能否看看我的代码并看看我哪里出错了，因为我确信它不会这么难......

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:50:51.023

建议的更简单的解决方案：

```
$('.poll_option.one td').click(function (e) {
    $(this).toggleClass('highlight');
    $(this).find('input').prop("checked", $(this).hasClass("highlight"));
    console.log(e.target.nodeName);

// weird that clicking the label does not naturally propagate
// the click event to the parent
}).find("label").click(function () {
    $(this).closest("td").click();                
}); 
```

​<a href="http://jsfiddle.net/53fkV/12/" rel="nofollow">**演示。**

# javascript - requirejs 加载异步模板模块模式

> ID：10142907
> 
> 赞同：0
> 
> 时间：2012-04-13T14:39:36.210
> 
> 标签：javascript, requirejs, js-amd

我刚决定第一次尝试 require.js 并且在大多数情况下，它工作正常 - 直到我尝试动态处理模板加载。

基本上，我有一个要求，在模板全部加载并可用之前，应用程序不应继续。

为此，创建了一个“模板”模块。它导入一个模板数组的定义（已经可用），它需要加载 - 要求 - 在它返回之前。

我很确定这可能是一种反模式，那么您将如何解决它？

```
app -> requires "templating"
    define templating ->
        - loop through an array of templates and dynamically create a list
        - define all templates (via text!) so later we can require("template-name")
        - also tried, require all templates 
```

我观察到的是模板模块在加载所有模板之前加载并可供应用程序使用。

之后是获取模板的 XHR。

我如何防止模块在所有文本加载和编译之前返回？伪代码或示例链接会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:54:22.400

实际上，我们在项目的早期有一个解决方案，然后转移到另一个解决方案。

[1] 同步 - 因为我们在我们的应用程序中使用 jQuery，所以我们有 jQuery Deferred 对象可在整个应用程序中使用。我创建了一个 Deferred 实例，它仅在加载所有模板时才调用它的 .resolved() 。然后每次我尝试使用模板时，我都会将其包装在如下代码中：

```
$.when(cache.templatesLoadedPromise).done(
  function () {
    // Render the view.
    $("...").html($.tmpl(cache.template, jsonData));
  }); 
```

然后在模板可用之前不会发生任何渲染。

[2] 每个模块加载和注册 - 没有人对解决方案 [1] 如此疯狂，我们希望每个模块仅加载该特定模块所需的模板。所以我们开始只是将它们列为“text！something.tmpl”需求，然后将该特定模板注册为模块中具有该需求的第一行。在我们的例子中，我们使用 Handlebars 作为模板引擎以及 ICanHandlebarz（类似于 ICanHaz for Mustache）。所以我打电话给 ich.addTemplate("something", something); up 在模块代码的开头。

在少数情况下，多个模块使用相同的模板，所以我必须在注册之前测试模板是否已经注册。

我希望其中之一可以帮助您解决问题。

# php - 使用 IIS6 和 Php 重写 URL

> ID：10142908
> 
> 赞同：1
> 
> 时间：2012-04-13T14:39:40.277
> 
> 标签：php, url-rewriting, web-config, iis-6

我在两台服务器上有两个非常相似的网站：一个使用 IIS6，另一个使用 IIS7

两者都在 PHP。

对于带有 IIS7 的那个，我使用了具有该语法的 web.config：

```
<configuration>
<system.webServer>  
    <rewrite>
        <rules>
           <rule name="Rule1">
               <match url="^Test?$"></match>
               <action type="Rewrite" url="/test.php"></action>
           </rule>
       </rules>
    </rewrite>
</system.webServer>
</configuration> 
```

它工作正常。但我不能用 IIS6

约束：

*   II6无法升级

*   我不想保留 web.config 方法（使用 Xml）：Ionics Isapi 使用 Htaccess

*   php

还有其他方法吗？

谢谢 ！

# python - 为什么 MySQL 增加自动增量，但不插入行？

> ID：10142910
> 
> 赞同：1
> 
> 时间：2012-04-13T14:39:47.537
> 
> 标签：python, mysql, phpmyadmin, xampp, mysql-python

我正在将 xampp 和 python 与 MySQLdb 一起使用。我正在连接然后运行：

```
cursor.execute("INSERT INTO customer SET name='aaa'") 
```

没有引发错误，但没有向数据库添加任何行（通过 pypmyadmin 进行检查）。但是，该表*正在*递增其自动增量字段。

发生了什么事，我该如何阻止它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T15:07:41.183

正如@Chasing Death 指出的那样。正确的语法是

```
cursor.execute("INSERT INTO customer(name) VALUES('aaa')") 
```

您还必须提交事务才能将数据实际存储在数据库中。

```
connection.commit() 
```

# sql-server-2008 - 两个表之间的 SQL 内连接

> ID：10142915
> 
> 赞同：2
> 
> 时间：2012-04-13T14:39:56.583
> 
> 标签：sql-server-2008, inner-join

我正在使用 SQL Server 2008，我有 4 个表`StudentAbsentees, Students, StudentSections`和`Sections`

在`StudentAbsentees`表格中，我存储了`studentId`在特定日期缺席的（仅限缺席者），例如，

```
 StudentId     Time     Date        
   -----------   ------   ------
       1         10:00    2012-04-13 
```

并在`StudentSections`我将其存储`studentId`在特定部分中，例如

```
 StudentId    SectionId
   ----------   ------------
      1              1
      2              1
      3              1 
```

在`Students`表格中我存储学生详细信息，同样在`Sections`表格中我有部分详细信息，如该部分的名称和容量。

我需要加入这些表格并显示学生在特定日期是否在场/缺席......结果应该是

```
StudentId    Status
---------    ------
    1         Absent
    2         Present
    3         Present 
```

我可以从这些表格中获取缺席者名单，我不知道如何显示他们是否在场/缺席......有人可以在这里帮助我吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:44:38.127

```
select * from (
   select s.id, 
          case 
              when sa.date = '2012-01-01'
              then 'absent'
              else 'present' 
          end as status,
          ROW_NUMBER() OVER (PARTITION BY s.id ORDER BY CASE WHEN sa.date = '2012-01-01' THEN 1 ELSE 2 END) AS RowNumber
   from students s
   left outer join studentabsentees sa on s.id = sa.studentid
)
as a where a.RowNumber = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:43:07.940

您查询显示某一天所有学生的状态如下所示：

```
select s.id, s.name, a.status
from student s
left join studentabsentees a on s.id = a.studentid
where a.date = ? 
```

显然你必须提供一个日期。

注意：您的问题在标题中使用“内部联接”。我认为左边更合适，因为它会显示给所有学生。但是，如果您真的只想要那些在缺席者表中有记录的人，那么您可以将查询中的单词“left”更改为“inner”。

注意2：我的查询假设一个状态字段。如果您没有，请查看 juergen d 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:46:52.713

不需要连接，您可以使用集合运算符：

```
SELECT StudentID, 'Absent' 
FROM StudentsAbsentees
WHERE [date] = ...
UNION 
(
SELECT StudentID, 'Present'
FROM Students
EXCEPT
SELECT StudentID, 'Present' 
FROM StudentsAbsentees
WHERE [date] = ...
) 
```

您可以通过将它们选择为常量来显示“存在”和“不存在”。很容易得到所有缺席学生的名单。然后将它与所有现在的学生联合起来。现在的学生是通过获取完整的学生列表并在缺失的学生上使用 except 运算符来找到的。但是在这部分中，请确保您选择缺席学生作为出席者，以便他们从您刚刚创建的姓名旁边出现在场的所有学生列表中很好地减去。

# entity-framework - 实体框架更新

> ID：10142925
> 
> 赞同：0
> 
> 时间：2012-04-13T14:40:31.193
> 
> 标签：entity-framework

我知道如何使用实体框架进行更新、插入和删除，但在这种情况下我不知道该怎么做。

在这种情况下，我有 3 个表：表 A、表 B 和表 AB，它有 2 列，一个是表 A 的外键，一个是表 B 的外键。

实体框架仅显示表 A 和 B，那么我如何仅更新表 AB 的内容？

我尝试使用实体 A 和实体 B 中的引用，但它给了我一个例外，说实体集 AB 没有插入功能和删除功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:02:48.297

我已经解决了这个问题，问题是我正在使用未附加到数据库的对象，我尝试过这样的附加

```
 foreach (DefAbilitazioni abilitazione in abilitazioni)
        {   
            entities.Attach(abilitazione);
            gruppo.DefAbilitazionis.Add(abilitazione);   
        } 
```

但它不起作用它说entitykey为空，也许如果有人给我一个使用附件的例子，我会尝试改变我现在这样的代码

```
 public void ModificaAbilitazioni(int IdGruppoAnagrafica, List<DefAbilitazioni> AbilitazioniList)
    {            
        GruppiAnag gruppo = (from g in entities.GruppiAnags
                             where g.IdGruppoAnag == IdGruppoAnagrafica
                             select g).First();

        IEnumerable<int> idAbilitazioni = from id in AbilitazioniList
                                          select id.IdAbilitazione;

        List<DefAbilitazioni> abilitazioni = (from abilitazione in entities.DefAbilitazionis
                                              where idAbilitazioni.Contains(abilitazione.IdAbilitazione)
                                              select abilitazione).ToList();

        gruppo.DefAbilitazionis.Clear();
        foreach (DefAbilitazioni abilitazione in abilitazioni)
        {   
            gruppo.DefAbilitazionis.Add(abilitazione);   
        }
        entities.SaveChanges();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:47:36.250

你试着做一个

```
Public Virtual List<int> Ids 
```

在您的“A”和“B”类中恢复所有关联

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:49:51.837

对于插入，您将为表 A 创建一条记录，然后将表 B 记录添加到创建的插入 A 的项目中。EF 将处理其余部分。

```
 var tableA = new TableAtype { Description = "blah", etc.};
 tableA.TableBtype.Add(new TableBtype { Property1 = "foo", Property2 = "bar"};

 yourContext.AddToTableAtype(tableA);
 yourContext.SaveChanges(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T14:52:12.760

根据 TheGeekYouNeed 的要求，我将更具体地使用我的项目代码

```
 public void ModificaAbilitazioni(int IdGruppoAnagrafica, List<DefAbilitazioni> AbilitazioniList)
    {            
        GruppiAnag gruppo = (from g in entities.GruppiAnags
                             where g.IdGruppoAnag == IdGruppoAnagrafica
                             select g).First();

        List<DefAbilitazioni> tutteAbilitazioni = GetTutteAbilitazioni();
        for (int i = 0; i < AbilitazioniList.Count; i++)
        {
            if (tutteAbilitazioni[i].GruppiAnags.Contains(gruppo))
            {
                tutteAbilitazioni[i].GruppiAnags.Remove(gruppo);
            }
        }

        foreach (DefAbilitazioni abilitazione in AbilitazioniList)
        {
            for (int i = 0; i < tutteAbilitazioni.Count; i++)
            {
                if (tutteAbilitazioni[i].IdAbilitazione == abilitazione.IdAbilitazione)
                {
                    tutteAbilitazioni[i].GruppiAnags.Add(gruppo);
                }
            }
        }
        entities.SaveChanges();
    } 
```

好的...在这里

此方法应更改特权帐户。

首先，我使用他的 id 恢复帐户，然后恢复所有特权，如果在他们的参考中他们恢复了帐户，那么我将其从参考中删除。这样该帐户就没有任何特权。现在，在我通过调用该方法的特权中，并在参考资料中我输入了帐户。（只是擦拭和补充，我现在只是在尝试......）

我也相反，擦除帐户中的特权引用并重新填充它们，但两种方式都行不通，在第一种情况下，它说第三实体（AB）没有插入功能

# c++ - CUDA内核中的重载赋值运算符

> ID：10142930
> 
> 赞同：1
> 
> 时间：2012-04-13T14:40:40.753
> 
> 标签：c++, cuda

要充分利用使用 sm_21 架构的支持 CUDA 的 GPU，需要使用向量数据类型（如 uint2）编写内核。

想象一下内核中的一行如下所示：

```
uint2 a = make_uint2 (123); 
```

这工作正常。值 123 存储到 ax 和 ay 但读取写入很烦人，尤其是当您必须编写大型代码块并初始化大量变量时。

我习惯于编写纯 C 代码，所以我不是 C++ 极客。也许我正在寻找的东西很简单。

我知道有可能“重载”一个操作员。我的问题是：是否也可以重载赋值运算符？

我试过这个：

```
inline __device__ uint2 operator = (int a)
{
  return make_uint2 (a, a);
} 
```

但它失败并显示错误消息：

> 错误：“operator=”必须是成员函数

任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:54:34.440

可以重载赋值运算*符*，但是（正如错误消息告诉您的那样）它必须是成员函数。这意味着要使用它，您必须创建一个类来充当`uint2`. 但是，当您这样做时，很有可能您实际上不需要/不想重载`operator=`——相反，您只需创建一个 ctor，它从 a 创建包装器的实例，`uint2`另一个从`int`. 这些将用于根据您提供的值创建包装器的实例，并且该临时实例将分配给目标。代码看起来像这样：

```
class uint_2 {
    uint2 value;
public:
    uint_2(uint2 init) : value(init) {}
    uint_2(int init) : value(make_uint2(init)) {}

    operator uint2() { return value; }
}; 
```

特别是考虑到您使用的是 CUDA，可能会出现有关效率的问题，所以我会提前解决它们：在正常情况下，这可能不会产生任何开销。但是，我不太确定 CUDA 的情况，以及您是否能够（例如）`__device__`在上面的代码中使用。我的直接猜测可能不是，但老实说我真的不知道——几年前我写了*一点*CUDA 代码，当时它还是新的，但我很确定我从未尝试过。我怀疑我肯定不会更新规则，但如果我这样做了，我就不再记得它们了。

# matlab - Object detection/recognition using matlab

> ID：10142933
> 
> 赞同：0
> 
> 时间：2012-04-13T14:40:52.360
> 
> 标签：matlab, object, image-processing, detection, classification

> **Possible Duplicate:**
> [Object recognition system using matlab](https://stackoverflow.com/questions/10088446/object-recognition-system-using-matlab)

I need help to develop an object recognition system. It needs to identify an object in an image by comparing it with an image in an existing database. For example my database may consist of images of cars, buses, cups, etc. If i give a certain image as an input i want the code to check and tell me whether a car(as in the car in the database) can be found to exist in the input image or not. This is strictly to be implemented in matlab. I have tried correlation, image subtraction and a few other algorithms but to no effect. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:00:20.963

您所描述的问题有时称为对象类别识别或对象类别识别，以强调您不是要识别特定对象，而是要识别“汽车”或“人”等类别的成员。

解决此问题的一种流行方法称为“词[袋”的特征](http://en.wikipedia.org/wiki/Bag_of_words_model_in_computer_vision)袋。如果您可以访问 Matlab 的计算机视觉系统工具箱，它具有检测 SURF 特征的功能，可用于此方法。

此外，提出这个问题的更好地方可能是[Signal and Image Processing stack exchange](https://dsp.stackexchange.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:50:51.133

这是一个复杂的主题，它确实处于技术的最前沿，但让我给你一些建议来帮助你开始。

1.  不知何故，您需要考虑可能存在的不同尺寸、角度等。与 50 英尺相比，从几英尺外拍摄的汽车看起来非常不同，就像从正面和侧面拍摄一样。
2.  边缘检测算法通常可以很好地拉开目标对象的形状。取边缘，识别其中的线条，然后您可以尝试将这些线条与模型中的线条进行比较。
3.  对象的范围确实对构建成功的算法产生了巨大的影响。如果您知道汽车前部和后部的区别，它可以让世界变得与众不同。
4.  需要以某种方式处理焦点、噪音、照明等，以确保系统运行良好。

总而言之，我建议参加一些图像分析课程，阅读有关该主题的几篇论文，或者至少阅读[Wikipedia 文章](http://en.wikipedia.org/wiki/Outline_of_object_recognition)，然后开始从事您的项目。

# bash - get Nth line in file after parsing another file

> ID：10142944
> 
> 赞同：3
> 
> 时间：2012-04-13T14:41:38.947
> 
> 标签：bash, shell, unix, csh

I have one of my large file as

**`foo:43:sdfasd:daasf
bar:51:werrwr:asdfa
qux:34:werdfs:asdfa
foo:234:dfasdf:dasf
qux:345:dsfasd:erwe
...............`**

here 1st column foo, bar and qux etc. are file names. and 2nd column 43,51, 34 etc. are line numbers. I want to print Nth line(specified by 2nd column) for each file(specified in 1st column). How can I automate above in unix shell. Actually above file is generated while compiling and I want to print warning line in code.

-Thanks,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:48:50.607

```
while IFS=: read file line message; do
    echo "$file:$line - $message:"
    sed -n "${line}p" "$file"
done <yourfilehere 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:46:18.640

```
while IFS=: read name line rest
do
    head -n $line $name | tail -1
done < input.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:45:05.603

```
awk 'NR==4 {print}' yourfilename

or

cat yourfilename | awk 'NR==4 {print}' 
```

以上将适用于文件中的第 4 行。您可以根据需要更改数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T17:21:29.957

```
 sed -nr '3{s/^([^:]*):([^:]*):.*$/\1 \2/;p}' namesNnumbers.txt 
 qux 34 
```

*   -n 默认不输出，
*   -r 正则表达式（使用括号简化）
*   在第 3 行做 {...;p} （最后打印）
*   用 foo bar 代替 foobarbaz

所以要使用这些值：

```
fnUln=$(sed -nr '3{s/^([^:]*):([^:]*):.*$/\1 \2/;p}' namesNnumbers.txt)

fn=$(echo ${fnUln/ */})
ln=$(echo ${fnUln/* /})
sed -n "${ln}p" "$fn" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T17:21:59.503

就在 awk 中，但性能可能比 @kev 或 @MarkReed 的答案差。但是它只处理每个文件一次。需要 GNU awk

```
gawk -F: '
    BEGIN {OFS=FS}
    { 
        files[$1] = 1
        lines[$1] = lines[$1] " " $2
        msgs[$1, $2] = $3 
    }
    END {
        for (file in files) {
            split(lines[file], l, " ")
            n = asort(l)
            count = 0
            for (i=1; i<=n; i++) {
                while (++count <= l[i])
                    getline line < file
                print file, l[i], msgs[file, l[i]]
                print line
            }
            close(file)
        }
    }
' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T18:22:30.847

这可能对您有用：

```
sed 's/^\([^,]*\),\([^,]*\).*/sed -n "\2p" \1/' file |
sort -k4,4 | 
sed ':a;$!N;s/^\(.*\)\(".*\)\n.*"\(.*\)\2/\1;\3\2/;ta;P;D' |
sh 
```

# python - 在python中输入隐藏密码

> ID：10142947
> 
> 赞同：9
> 
> 时间：2012-04-13T14:41:45.023
> 
> 标签：python, passwords

我想使用：

```
import getpass
password = getpass.getpass("Enter your password:")
print password 
```

在使用 python 2.7 的 winx64 上...第二行挂起。我没有看到对话框。“输入你的密码：”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T01:55:08.683

根据您上面的评论，您实际上是在 spyder 中使用 ipython。我在 Spyder 中遇到的 getpass 的唯一问题是他们的[Google 代码](http://code.google.com/p/spyderlib/issues/detail?id=693&q=getpass&colspec=ID%20MS%20Stars%20Priority%20Modified%20Cat%20Type%20Status%20Owner%20Summary)页。这些问题与您的问题不*完全相同*，但评论中包含以下代码片段：

```
def spyder_getpass(prompt='Password: '):
  set_spyder_echo(False)
  password = raw_input(prompt)
  set_spyder_echo(True)
  return password 
```

尝试使用上述方法（使用 raw_input 而不是 getpass）来获取所需的密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:48:34.830

正如其他评论已经指出的那样，您必须在 Power Shell 中运行此脚本才能实际看到`"Enter your password:"`文本并能够输入密码。

# java - Nutch Seed URLs

> ID：10142953
> 
> 赞同：0
> 
> 时间：2012-04-13T14:41:56.160
> 
> 标签：java, nutch, web-crawler

Is it possible to get URLs into **Nutch** directly from a database or a service etc. I'm not interested in the ways which data is taken from the database or service and written to seed.txt.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:44:01.917

No. This cannot be done directly with the default nutch codebase. You need to modify [Injector.java](http://www.java-frameworks.com/java/nutch/org/apache/nutch/crawl/Injector.java.html) to achieve that.

**EDIT:**

Try using [DBInputFormat](http://hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/mapred/lib/db/DBInputFormat.html) : an [InputFormat](http://hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/mapred/InputFormat.html) that reads input data from an SQL table. You need to modify the [Inject](http://www.java-frameworks.com/java/nutch/org/apache/nutch/crawl/Injector.java.html) code here (line 3 in snippet below):

```
JobConf sortJob = new NutchJob(getConf());
sortJob.setJobName("inject " + urlDir);
FileInputFormat.addInputPath(sortJob, urlDir);
sortJob.setMapperClass(InjectMapper.class); 
```

# jquery - 尝试使用带有 Ajax 的 ASP.Net 在浏览器窗口中居中 FormView

> ID：10142958
> 
> 赞同：0
> 
> 时间：2012-04-13T14:42:16.783
> 
> 标签：jquery, asp.net, ajax

好的，我以前没有在这里发过很多帖子，但是我正在努力解决我认为不应该那么难的事情。我在 AJAX 内容模板中有大部分表单。当我单击 GridView 中的一行时，它会激活一个 FormView 来编辑记录。我想在浏览器窗口中居中 FormView。我试过使用 jQuery，但很明显，我没有刷新文档，所以我在 Document Ready 中的 jQuery 中心功能没有激活。我想我需要在内容模板更新时以某种方式激活它。有谁知道实现这一目标的好方法？

作为替代方案，我想根据所选行定位 FormView （或围绕它的面板），但这不是我的第一选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:49:08.093

而不是 document.ready，使用这个：

```
function pageLoad() {
     //--- code here
} 
```

当您单击表单模式时，这将允许您的 jquery 函数触发。如果您的 jquery 代码是正确的，我们不知道，因为您没有发布您的代码。

希望这可以帮助！祝你好运！

# javascript - 如何隐藏一个

> ID：10142959
> 
> 赞同：-14
> 
> 时间：2012-04-13T14:42:25.897
> 
> 标签：javascript, html, show-hide

我试图为`<h4>`标签提供一个 ID，以便稍后我可以显示或隐藏它，但它不起作用。当我尝试使用 getElementByID 并提醒值时，我得到一个警告框，上面写着“未定义”。

所以我想知道是否有其他方法可以隐藏/显示标签？

我的代码位于[此处](http://img94.imageshack.us/img94/9105/semttulost.png)。

我想要做的是根据类别组合框的值隐藏/显示 h4

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T14:45:06.310

这是我在不知道您的代码的情况下能做的最好的事情：

**HTML**：

```
<h4 id="myH4">Hello World</h4> 
```

**Javascript：**

```
document.getElementById("myH4").style.display="none"; 
```

或者

```
document.getElementById("myH4").style.visibility="hidden"; 
```

# c# - c# DataGridView 从行/列获取内容

> ID：10142964
> 
> 赞同：1
> 
> 时间：2012-04-13T14:42:50.287
> 
> 标签：c#, datagrid, datagridview, datatable

我有一个 4 列的 DataGridView。

当用户双击该行时，我想从单击行的第一列检索数据。

```
 private void ticketsDataGridView_CellMouseDoubleClick(object sender, DataGridViewCellMouseEventArgs e)
    {
        MessageBox.Show("Row " + e.RowIndex); // gets me the row selected

    } 
```

如何获取所选行的列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:47:20.810

查看[DataGridView.Rows 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rows.aspx)

在双击事件上试试这个。

```
DataGridViewRow row =dataGridView.Rows[0];

string someStringColumnValue = (string)row.Cells[0].Value; 
```

参考：[C# - 用于循环 DataGridView.Rows 的 Lambda 语法](https://stackoverflow.com/questions/451693/c-sharp-lambda-syntax-for-looping-over-datagridview-rows)

# iphone - 在 Objective-C 中对数组进行排序

> ID：10142974
> 
> 赞同：3
> 
> 时间：2012-04-13T14:43:08.050
> 
> 标签：iphone, objective-c, ios

我目前正在尝试自学Objective-C，并且正在玩一个需要对数组进行排序的练习。

我设法使用以下代码完成它：

```
NSSortDescriptor * newSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:TRUE];
NSArray *sortDescriptors = [NSArray arrayWithObject:newSortDescriptor];
[self.theBookStore sortUsingDescriptors:sortDescriptors]; 
```

我的问题是关于这里实际发生的事情。我真的不明白我做了什么。

第 1 行：我知道我在这里创建了一个具有描述符的新对象。这有两个参数，我要排序的列和它是升序的。

第2行：这是我感到困惑的行。为什么我需要一个排序描述符数组？当我阅读这段代码时，我怀疑它创建了一个只有一行的数组，对吗？

第 3 行：我知道这是调用 sortUsingDescriptors 方法，但我的困惑是为什么这个函数需要一个数组。

我已经阅读了文档，但我真的在寻找一个简单的解释。

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T14:55:31.990

> 第 1 行：我知道我在这里创建了一个具有描述符的新对象。这有两个参数，我要排序的列和它是升序的。

实际上，您已经创建了一个描述符*对象。*它描述了如何对数组进行排序。

> 第2行：这是我感到困惑的行。为什么我需要一个排序描述符数组？当我阅读这段代码时，我怀疑它创建了一个只有一行的数组，对吗？

对——您已经创建了一个包含单个对象的数组。如果您真的想对那么多字段进行排序，您*可以*创建一个包含十个、十五个或八十七个排序描述符的数组。更常见的是，你使用一、二，也许是三。因此，如果要对人员列表进行排序，则可以添加指定姓氏和名字的排序描述符。这样，具有相同姓氏的人将根据他们的名字排列在该组中。

> 第 3 行：我知道这是调用 sortUsingDescriptors 方法，但我的困惑是为什么这个函数需要一个数组。

同样，这样您就可以拥有主要、次要、三级（等）排序键。当您只想对一个键进行排序时，您可以有一个单独的方法，该方法采用单个排序描述符而不是数组。NSArray 不提供，但如果需要，您可以随时将其添加到类别中：

```
@category NSArray (SingleSortDescriptor)

- (NSArray*)sortUsingDescriptor:(NSSortDescriptor*)descriptor;

@end

@implementation NSArray (SingleSortDescriptor)

- (NSArray*)sortUsingDescriptor:(NSSortDescriptor*)descriptor
{
    return [self sortUsingDescriptors:[NSArray arrayWithObject:descriptor]];
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:47:50.590

*   第 1 行：.. 是的，您的权利。您正在创建一个名为`NSSortDescriptor`. 该对象定义了一个要排序的属性。您确实输入了“标题”。因此，要排序的数组中的对象将在该属性之后排序（yourObject.title “kind-of”）。

*   第 2 行：因为排序方法 ( `sortUsingDescriptors`) 总是需要一个数组，所以您需要创建一个只有一个对象的 NSArray。好吧，...看起来有点愚蠢。但绝对有道理。假设您想按照两个标准进行排序（比如说“标题”，然后是“城市”）。

*   第 3 行：是的 heres 必须是一个数组，因为在多个条件之后进行排序。

并始终保持内存清洁：在第 1 行，您确实分配/初始化了 NSSortDescriptor。所以在使用后清理（如果你不使用[ARC](https://stackoverflow.com/questions/6368600/some-questions-about-automatic-reference-counting-in-ios5-sdk)）。所以添加一行：

```
[newSortDescriptor release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:49:09.510

如果有多个匹配项，将使用多个排序描述符来解决发生的情况。我是优先顺序。如果发现两个标题相同，第二个描述符会告诉它该怎么做。

# jquery - jQuery删除除一个以外的div子项

> ID：10142977
> 
> 赞同：2
> 
> 时间：2012-04-13T14:43:27.677
> 
> 标签：jquery

如何删除`main`除`ul`元素之外的所有内容？

```
<div id="main">
 <div id="a">
  <div id="b">
    <div id="c"></div>
    <div id="d"></div>
    <div id="e">
      <ul></ul>
    </div>
  </div>
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T14:47:43.850

假设期望的结果是`<div id="main"><ul></ul></div>`并且您想保留所有`<ul>`s （或者如果只有一个）：

```
$( '#main' ).html( $( '#main ul' ) );​​​​​​​​​​​​​​​​​​​​ 
```

演示：http: [//jsfiddle.net/pEvNt/](http://jsfiddle.net/pEvNt/)

这样做`$( '#main' ).not( 'ul' ).remove()`是行不通的，因为它会删除 ul 的父母和与他们一起的 ul（请参阅[http://jsfiddle.net/h67Ge/](http://jsfiddle.net/h67Ge/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:45:57.767

尝试：

```
$('#main').children().not('ul').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:06:26.067

可以这样做

```
 $('#main ul').detach().prependTo('#main').siblings().remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T15:07:52.617

```
$("ul", "#main").appendTo($("#main")).siblings().remove(); 
```

[小提琴](http://jsfiddle.net/adeneo/AHHHB/)

# clojure - 将 Reduce 迁移到 Map

> ID：10142978
> 
> 赞同：1
> 
> 时间：2012-04-13T14:43:33.960
> 
> 标签：clojure

我的问题是如何使用 map 和可能的 doseq 重写以下 reduce 解决方案？我在使用以下解决方案时遇到了很多麻烦。

该解决方案是解决以下问题。具体来说，我有两个由 clojure-csv 解析的 csv 文件。每个向量的向量可以称为 bene-data 和 gic-data。我想获取每行 bene-data 中的一列中的值，并查看该值是否是 gic-data 中一行中的另一列。我想将 gic-data 中找不到的那些 bene-data 值累积到一个向量中。我最初尝试累积到地图中，并且在尝试调试打印时从堆栈溢出开始。最终，我想把这些数据，结合一些静态文本，然后吐到一个报告文件中。

以下功能：

```
(defn is-a-in-b
    "This is a helper function that takes a value, a column index, and a 
     returned clojure-csv row (vector), and checks to see if that value
     is present. Returns value or nil if not present."
    [cmp-val col-idx csv-row]

    (let [csv-row-val (nth csv-row col-idx nil)]
        (if (= cmp-val csv-row-val)
            cmp-val
            nil)))

(defn key-pres?
    "Accepts a value, like an index, and output from clojure-csv, and looks
     to see if the value is in the sequence at the index. Given clojure-csv
     returns a vector of vectors, will loop around until and if the value
     is found."

    [cmp-val cmp-idx csv-data]
    (reduce
        (fn [ret-rc csv-row]
            (let [temp-rc (is-a-in-b cmp-val cmp-idx csv-row)]
                (if-not temp-rc
                    (conj ret-rc cmp-val))))
        [] 
        csv-data))

(defn test-key-inclusion
    "Accepts csv-data param and an index, a second csv-data param and an index,
     and searches the second csv-data instances' rows (at index) to see if
     the first file's data is located in the second csv-data instance."

    [csv-data1 pkey-idx1 csv-data2 pkey-idx2 lnam-idx fnam-idx]

    (reduce
        (fn [out-log csv-row1]
            (let [cmp-val (nth csv-row1 pkey-idx1 nil)
                  lnam (nth csv-row1 lnam-idx nil)
                  fnam (nth csv-row1 fnam-idx)
                  temp-rc (first (key-pres? cmp-val pkey-idx2 csv-data2))]

            (println (vector temp-rc cmp-val lnam fnam))
            (into out-log (vector temp-rc cmp-val lnam fnam))))
         []
         csv-data1)) 
```

代表我尝试解决这个问题。我通常在尝试使用 doseq 和 map 时碰壁，因为我无处可积累结果数据，除非我使用循环递归。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:19:31.520

该解决方案将第 2 列的所有内容一次读取到一个集合中（因此，它是非惰性的）以便于编写。它还应该比为第 1 列的每个值重新扫描第 2 列执行得更好。如果第 2 列太大而无法在内存中读取，请根据需要进行调整。

```
(defn column
  "extract the values of a column out of a seq-of-seqs"
  [s-o-s n]
  (map #(nth % n) s-o-s))

(defn test-key-inclusion
  "return all values in column1 that arent' in column2"
  [column1 column2]
  (filter (complement (into #{} column2)) column1))

user> (def rows1 [[1 2 3] [4 5 6] [7 8 9]])
#'user/rows1

user> (def rows2 '[[a b c] [d 2 f] [g h i]])
#'user/rows2

user> (test-key-inclusion (column rows1 1) (column rows2 1))
(5 8) 
```

# c# - 如何反向解析自定义属性？

> ID：10142979
> 
> 赞同：0
> 
> 时间：2012-04-13T14:43:38.283
> 
> 标签：c#, reflection, attributes, enums, getcustomattributes

我有一个带有自定义属性的枚举，例如：

```
public enum EnumStatus
{
    [CharValue('*')]
    Empty,

    [CharValue('A')]
    value1,

    [CharValue('P')]
    value2,
} 
```

“前进”方式似乎很容易，带有一个枚举值，并使用反射、GetCustomAttributes 等获取自定义属性。

但我想要某种反向解析。有一个 char 值，我想有一个 enum 值可以使用。

就像是：

```
public static Enum GetEnumValue(this Enum source, char value)
{...} 
```

如果我将“A”作为值参数，它应该返回 EnumStatus.value1。

有任何想法吗？我不想制作额外的哈希表，推迟枚举。

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:06:17.723

从我在这里做的例子中：

```
 public static T GetEnumValue<T, TExpected>(char value) where TExpected : Attribute
    {
        var type = typeof(T);

        if (type.IsEnum)
        {
            foreach (var field in type.GetFields())
            {
                dynamic attribute = Attribute.GetCustomAttribute(field,
                    typeof(TExpected)) as TExpected;

                if (attribute != null)
                {
                    if (attribute.Value == value)
                    {
                        return (T)field.GetValue(null);
                    }
                }
            }
        }

        return default(T);
    } 
```

效果很好...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:49:53.910

我建议使用`DescriptionAttribute`并遵循此处的示例：[https](https://stackoverflow.com/a/4367868/905651) ://stackoverflow.com/a/4367868/905651 。

# python - timeit 导入错误（djangobook 第 3 章，第 2 部分，python 版本 2.7.2）

> ID：10142986
> 
> 赞同：0
> 
> 时间：2012-04-13T14:44:07.970
> 
> 标签：python, django, import

我正在尝试完成[您的第二个视图：](http://www.djangobook.com/en/2.0/chapter03/) Djangobook 第 3 章的动态内容。

当我粘贴`http://localhost:8000/time/`到浏览器中时，出现以下错误：

```
Django Version: 1.4
Exception Error: ImportError    
cannot import name current_datetime
Exception Location: /home/name/Desktop/sc/mysite/mysite/urls.py in <module>, line 2
python version 2.7.2 
```

然而，我的 views.py 和 urls.py 文件与示例相同，并且位于正确的文件夹中。

我的views.py文件

```
import datetime
from django.http import HttpResponse

def hello(request):
    return HttpResponse("Hello world")

def current_datetime(request):
    now = datetime.datetime.now()
    html = "<html><body>It is now %s.</body></html>" % now
    return HttpResponse(html) 
```

我的 urls.py 文件

```
from django.conf.urls.defaults import *
from mysite.views import hello, current_datetime

urlpatterns = patterns('',
    ('^hello/$', hello),
    ('^time/$', current_datetime),
) 
```

这里出了什么问题？

* * *

（添加到原始帖子：）（编辑 1）我的目录结构。（与当前工作目录`/home/name/Desktop/sc/mysite`）

```
name@name-Studio-1558:~/Desktop/sc/mysite$ ls -R
.:
manage.py  mysite  views.py  views.py~

./mysite:
__init__.py   settings.py   urls.py   urls.pyc   wsgi.py
__init__.pyc  settings.pyc  urls.py~  views.pyc  wsgi.pyc 
```

* * *

（编辑 2）我从头开始使用名称`mysite2`而不是`mysite`，我什至无法让第一部分工作：Hello World。'： [ImportError（djangobook 第 3 章，第 1 部分，python 版本 2.7.2 )](https://stackoverflow.com/questions/10152956/importerror-djangobook-chapter-3-part1-python-version-2-7-2)

在我更改脚本中的某些内容以使其工作之前，但我无法重新创建我之前所做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:52:42.240

将您的 urls.py 更改为此（假设您的应用程序称为*app*）。：

```
urlpatterns = patterns('',
    (r'^hello/$', 'app.views.hello'),
    (r'^time/$', 'app.views.current_datetime'),
) 
```

更新：项目的基本目录也应该包含一个空`__init__.py`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T15:02:36.303

简短的回答是 djangobook 对于 django 1.4 版不是最新的。如果您正确遵循第 3 章，您将遇到错误。默认情况下，某些文件在不同版本的 django 中创建在不同的位置。

请参阅： [ImportError（djangobook 第 3 章，第 1 部分，python 版本 2.7.2）](https://stackoverflow.com/questions/10152956/importerror-djangobook-chapter-3-part1-python-version-2-7-2/10153025#comment13022078_10153025)

所以暂时最好遵循 django 文档。

# gwt - 是否可以在 Jboss 4 上部署使用 GWT 2.x 开发的应用程序？

> ID：10142988
> 
> 赞同：0
> 
> 时间：2012-04-13T14:44:16.283
> 
> 标签：gwt, servlets, jboss

我想知道是否可以在支持 servlet 规范 2.4（如 JBoss 4）的服务器上部署 GWT 2.x 应用程序。

我已经查看了官方文档，但显然没有依赖关系。所以我的问题是：

1.  有可能吗？
2.  需要变通方法吗？
3.  任何人有一些以前的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T08:14:26.010

是的，有可能。您可以将 GWT 应用程序部署到任何外部 Web 服务器，如 Tomcat、Jboss 等。您的问题在上下文中有点宽泛。所以，最好看一些教程。

本[教程](http://techforb.blogspot.in/2007/09/gwt-with-extenal-application-server.html)将为您提供更多帮助。我没有详细介绍这个，但看起来不错。

# java - 使用 Javassist 检测父类的私有方法？

> ID：10142991
> 
> 赞同：3
> 
> 时间：2012-04-13T14:44:22.903
> 
> 标签：java, javassist

我想使用 Javassist 来检测一个源代码不受我控制的 Java 类（Java 1.6.0_26-b03，Javassist 3.16.1-GA）。

我对 Javassist 比较陌生，但我想我知道它背后的概念。我读了很多关于它的东西，但也许我错过了一些东西。请看下面的，非常简单的代码：

文件 ParentPrivateMethodInstrumentingTest.java：

```
package test.javassist;

import javassist.*;

public class ParentPrivateMethodInstrumentingTest
{
    public ParentPrivateMethodInstrumentingTest() throws Exception
    {
        ClassPool classPool = ClassPool.getDefault();

        CtClass childCtClass = classPool.get( "test.javassist.Child" );
        CtMethod parentCtMethod = childCtClass.getMethod( "parent", "()V" );

        parentCtMethod.insertBefore( "{ System.err.println( \"-- before parent() --\" ); }" );

        Child child = (Child)childCtClass.toClass().newInstance();
        child.parent();
    }

    public static void main( String[] args ) throws Exception
    {
        new ParentPrivateMethodInstrumentingTest();
    }
} 
```

文件 Parent.java：

```
package test.javassist;

public class Parent
{
    private void privateParent()
    {
        System.out.println( "Parent.privateParent()" );
    }

    public void parent()
    {
        System.out.println( "Parent.parent()" );
        privateParent();
    }
} 
```

文件 Child.java：

```
package test.javassist;

public class Child extends Parent
{

} 
```

当我运行这个程序时，输出是：

```
Parent.parent()
Parent.privateParent() 
```

所以我的问题是，为什么在 parent() 之前没有行“--”，我认为它已插入到字节码中？

不可能像我在父类的私有方法上尝试过的那样进行代码插入吗？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:58:56.190

感谢框架作者的帮助，我得到了问题所在的提示，我想在这里分享解决方案。由于我修改了父类的方法，因此该类也必须加载

```
childCtClass.getSuperclass().toClass(); 
```

就在这条线之后

```
parentCtMethod.insertBefore 
```

我要感谢 Shigeru Chiba 教授。

# php - 使用 Joomla 2.5，有没有办法从前端链接到后端组件而无需登录？

> ID：10142992
> 
> 赞同：0
> 
> 时间：2012-04-13T14:44:30.110
> 
> 标签：php, html, joomla, content-management-system

标题说明了大部分内容，但是有没有办法从前端的页面链接到后端的组件而不要求用户再次登录。一些想法浮现在脑海中，会话表和 cookie，但我只是不确定如何去做。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:46:19.497

Joomla！作为两个独立的应用程序运行，一个用于前端，一个用于后端。

做你建议的事情是有问题的：

1.  您为使其正常工作而实施的任何系统都可能危及站点安全。

2.  您必须找到/构建一种机制，将用户同时登录到前端和后端。

3.  由于后端和前端都使用不同的令牌和会话，您还必须同时保持这两个令牌和会话。

4.  作为此过程的一部分，您的软件可能也应该将后端自动登录限制为具有正确权限的用户。

我不知道有任何扩展可以满足您的需求，但有些扩展允许在前端使用一些后端功能 - 您可以查看[JED 的“站点访问”部分](http://extensions.joomla.org/extensions/access-a-security/site-access)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:23:37.867

为什么不为要显示的组件添加前端视图？例如**[像这样](http://forum.joomla.org/viewtopic.php?f=471&t=226476)**。

# apache-flex - Flex mobile：从一个视图导航器到另一个视图导航器的交叉导航

> ID：10142998
> 
> 赞同：0
> 
> 时间：2012-04-13T14:44:56.763
> 
> 标签：apache-flex, mobile, flex-mobile

假设我的应用中有两个选项卡：

```
<ViewNavigator id="tab1" firstView="Tab1">
<ViewNavigator id="tab2" firstView="Tab2"> 
```

我进入 Tab1，并开始将其他视图推入堆栈

```
navigator.pushView(Tab1View1)
navigator.pushView(Tab1View2) 
```

等等....

现在我想直接从 Tab1 深处的视图之一跳到 Tab2 中的视图之一，没有转换。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:30:26.663

> 当你 pushView 或 pop 时，你可以指定过渡。我原以为将其设置为 null 不会给您任何过渡。

否。如果您将 null 作为过渡参数传递，则 navigator 使用 defaultPopTr​​ansition 和 defaultPushTransition。你需要使用

```
private function onCreationCompleteHandler(event:FlexEvent):void {
  navigator.transitionsEnabled=false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:35:20.677

当您[pushView](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ViewNavigator.html#pushView%28%29)或 pop 时，您可以指定转换。我原以为将其设置为 null 不会给您任何过渡。