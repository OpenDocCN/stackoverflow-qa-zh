# StackOverflow 问答 10601000-10601999

# jquery - CakePHP ajax 调用加载错误的布局

> ID：10601005
> 
> 赞同：1
> 
> 时间：2012-05-15T12:47:48.927
> 
> 标签：jquery, ajax, cakephp, menu, nested

我一直在使用 CakePHP，但遇到了以下问题。我有一个管理页面（AdminsController），有 1 个视图和 1 个方法，索引。索引视图包括到其他控制器和视图的硬编码链接。我确实为所有这些链接分配了一个类，以在管理内容上加载一个 DIV，其中包含视图的内容。通过这个脚本：

```
$(".cmsPage").click(function() {
    var url = $(this).attr("href");

    $.ajax({
        url: url,
        success: function(data){
            $("#admin_wrapper", "#admin_close", "#admin_content").fadeIn('slow');
            $("#admin_content").html(data);
        }
    });
    return false;
}); 
```

现在，在页面控制器的其中一个视图**pages** / **overview中，我对同一控制器中的另一个方法****update_menu**进行了 ajax 调用。这种方法也有观点。这是我的控制器/方法中目前的内容。

```
public function update_menu(){
        $this->layout = '';
        foreach($this->request->data as $menu){
            //$this->layout = 'ajax';
            foreach($menu as $id => $submenu){
                $saveData = array('id' => $id, 'submenu' => $submenu);
                $this->Page->save($saveData);
                $this->render('update_menu','ajax');
            }
        }
    } 
```

Admin 控制器有一个**Admin**布局，**概述**也有。这就是我尝试从 update_menu 获取数据时发生的情况。（在 $(document).ready(function(){}); 里面）

```
$("#save_page").click(function(){
    toArray();
    return false;
 }); 
```

函数 toArray() （外部 $(document).ready(function(){});)

```
 function toArray()
{
    var serialized = $('ol.sortable').nestedSortable('serialize');
    $.ajax({
    type: 'POST',
    url: 'update_menu',
    data: serialized,
    success: function(data){
        $("#result").html('De pagina\'s zijn opgeslagen!');
    }
    });
} 
```

我在控制台中得到的是`admins/index`. 查看和布局。

我需要做什么才能获得视图结果而不是`admins/index`.

有关信息，我会使用[http://mjsarfatti.com/sandbox/nestedSortable/forum/categories/releases](http://mjsarfatti.com/sandbox/nestedSortable/forum/categories/releases)。

问候，伤害。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:31:31.777

将您的布​​局设置为 ajax 布局：

```
$this->layout = "ajax"; 
```

或者，通过在 AppController 中包含 RequestHandler 组件来自动化它：

```
public $components = array(
    "RequestHandler"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:26:03.587

由于这是对此的 ajax 调用，因此您无需在操作中加载任何布局，请尝试此操作。

```
$this->layout = null; 
```

# iphone - 如何从 iphone sdk 将多个图像上传到 facebook

> ID：10601007
> 
> 赞同：4
> 
> 时间：2012-05-15T12:47:51.063
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我想从 iphone 上传多张图片到 Facebook。而且我搜索了很多东西并制作了如下代码：但它不起作用。任何帮助将不胜感激。

```
AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

NSString *jsonRequest1 = @"{ \"method\": \"POST\", \"relative_url\": \"me/photos\" , \"body\": \"Hello 1\", \"attached_files\": \"file1\" }";

NSString *jsonRequest2 = @"{ \"method\": \"POST\", \"relative_url\": \"me/photos\" , \"body\": \"Hello 2\", \"attached_files\": \"file2\" }";

NSString *jsonRequestsArray = [NSString stringWithFormat:@"[ %@, %@ ]", jsonRequest1, jsonRequest2];

NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:jsonRequestsArray,@"batch",nil];

NSString *url1=@"http://uhallnyu.files.wordpress.com/2011/11/green-apple.jpg";

NSString *url2=@"http://scm-l3.technorati.com/12/04/24/67277/apple.gif?t=20120424140104";

NSData *data1 = [NSData dataWithContentsOfURL:[NSURL URLWithString:url1]];

UIImage *img1  = [[UIImage alloc] initWithData:data1];

NSData *data2 = [NSData dataWithContentsOfURL:[NSURL URLWithString:url2]];

UIImage *img2  = [[UIImage alloc] initWithData:data2];

[params setObject:img1 forKey:@"file1"];

[params setObject:img2 forKey:@"file2"];

[[delegate facebook] requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:06:17.713

您可以使用以下方法将照片上传到 Facebook：- 您可以使用开关盒从图像文件中读取图像类型并使用 UIImagePNGRepresentation、UIImageJPEGRepresentation 等函数获取图像数据。

```
NSData *yourImageData= UIImagePNGRepresentation(yourImage); 
```

初始化字典：-

```
NSMutableDictionary *mutableDictWithParam= [NSMutableDictionary dictionaryWithObjectsAndKeys:@"Your text", @"message", yourImageWithData, @"theSource", nil]; 
```

最后发帖：-

```
[facebook requestWithGraphPath:@"/me/photos" andParams:mutableDictWithParam andHttpMethod:@"POST" andDelegate:self]; 
```

您可以让它循环发送多个图像。

# python - 调试和智能感知金字塔应用程序

> ID：10601010
> 
> 赞同：1
> 
> 时间：2012-05-15T12:48:04.917
> 
> 标签：python, debugging, intellisense, pyramid

youtube 上有一个精彩的视频，其中解释了如何使用 Python Tools for Visual Studio 调试 Django 应用程序。

我想知道 Pyramid 应用程序是否可以做同样的事情？此外，在为 Pyramid 框架编写代码时，我很想使用 VS 的 IntelliSense（提示系统）。或者可能有其他方法可以实现相同的调试+智能感知效果。我很高兴听到任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:20:26.313

在我看来，有两个可行的选择。

我实际上两者都用。

## Eclipse + Aptana Studio + Pydev 或 Aptana Studio

优点

1.  自由的
2.  体面的自动完成（类似 IntelliSense 的系统）
3.  更多插件（因为是基于eclipse的）
4.  支持 django 模板

5.  比较差的html编辑器

6.  没有 mako 或 jinja2 支持（据我所知）

## 皮查姆

优点

1.  更好的自动完成
2.  支持 mako,jinja2 和 django 模板
3.  不错的 HTML 编辑器

缺点

1.  不免费

两者都支持调试，没有太多问题。

# android - 传达服务意图

> ID：10601013
> 
> 赞同：0
> 
> 时间：2012-05-15T12:48:11.967
> 
> 标签：android, service, android-intent

第一个对不起我的英语我理解得很好但不会写好吗？

我有一个 LocationService 可以保存纬度和经度。他工作得很好，但我想在 LocationListener 更改时向我的意图发送信息。我想向我的意图发送一个字符串以放入 EditText。

服务代码：

```
public class LocalizadorService extends Service{

private LocationManager locManager;
private LocationListener locListener;
private EjercicioBD baseDatos = EjercicioBD.getEjercicioBD(this);

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onCreate() {
    super.onCreate();
}

@Override
public void onStart(Intent intent, int startId) {
    encontrarGPS();
    super.onStart(intent, startId);
}

@Override
public void onDestroy() {
    locManager.removeUpdates(locListener);
    super.onDestroy();
}

private void encontrarGPS() {
    //Obtenemos una referencia al LocationManager
    locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

    if(locManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
        locListener = new LocationListener(){
            public void onLocationChanged(Location arg0) {
                if (arg0 != null) {
                    setCurrentLocation(arg0);
                }
            }

            public void onProviderDisabled(String arg0) {
                noGPS();
                Toast.makeText(LocalizadorService.this, "El GPS ha sido desactivado, activelo", Toast.LENGTH_SHORT).show();
            }
            public void onProviderEnabled(String arg0) {
                         **HERE WANT TO SEND A STRING TO MY INTENT**
            public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                         **HERE WANT TO SEND A STRING TO MY INTENT**
                    }
        };
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 7000, 0, locListener);
    }
    else{
        Toast.makeText(LocalizadorService.this, "El GPS no esta activado, por favor activelo para empezar", Toast.LENGTH_SHORT).show();
        noGPS();
    }
}

private void noGPS(){
    Intent intent = new Intent( android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);
}
private void setCurrentLocation(Location arg0){
    if(arg0 != null)
        baseDatos.insertarTablas(arg0.getLatitude(), arg0.getLongitude(), arg0.getSpeed());
}
} 
```

我能怎么做？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:07:32.613

例如，您可以[`BroadcastReceiver`](https://developer.android.com/reference/android/content/BroadcastReceiver.html)在您的`Activity`and[`sentBroadcast`](https://developer.android.com/reference/android/content/Context.html#sendBroadcast%28android.content.Intent%29)方法中使用`Service`。

看看[这个](http://goo.gl/wDuMA)如何使用`BroadcastRecievers`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:55:32.247

你应该使用广播接收器。你应该在你的服务类中扩展 IntentService 而不是 Service

将此示例代码放入您的活动类

```
 public class YourClass{
     private IntentFilter yourfilter;
     private ResponseReceiver yourreceiver;

     Override
     public void onCreate(Bundle savedInstanceState) {

      yourfilter = new IntentFilter(ResponseReceiver.MESSAGE);
      yourfilter.addCategory(Intent.CATEGORY_DEFAULT);
      yourreceiver = new ResponseReceiver();
      registerReceiver(yourreceiver, yourfilter);

     Intent i = new Intent(YourActivity.this, YourService.class);
     startService(i);
     }

    public class ResponseReceiver extends BroadcastReceiver {
       public static final String MESSAGE = "MESSAGE STRING";

       @Override
       public void onReceive(Context context, Intent intent) {
       yourEditText.setValue(intent.getStringExtra(YourKey);

      }
    } 
```

并在位置更改时将此代码放入您的服务类

```
 public class YourService extends IntentService {

    Intent broadcastIntent = new Intent();
    broadcastIntent.setAction(ResponseReceiver.MESSAGE);
    broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
    broadcastIntent.putExtra(yourkey, yourvalue);
    sendBroadcast(broadcastIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:12:37.317

我在 LocationListener 中执行此操作：

```
public void onProviderDisabled(String arg0) {
                noGPS();
                Toast.makeText(LocalizadorService.this, "El GPS ha sido desactivado, activelo", Toast.LENGTH_SHORT).show();
                intent.setAction(EjercicioBroad.MESSAGE);
                intent.addCategory(Intent.CATEGORY_DEFAULT);
                intent.putExtra("prueba", "PROBANDO");
                sendBroadcast(intent);
            } 
```

这是我对内部类的活跃性：

```
public class EjercicioIniciar extends Activity {

private EditText nombreRuta;
private Button empezar,terminar,aceptar,cancelar;
private EjercicioBD baseDatos;
private boolean rutaEmpezada;
private SharedPreferences misDatos;
private SharedPreferences.Editor editor;
private Chronometer cronometro;

private EditText info;
private StringBuilder builder = new StringBuilder();
private RadioButton andar,correr,bici,coche;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ejercicio_iniciar);

    baseDatos = EjercicioBD.getEjercicioBD(this);

    empezar = (Button)findViewById(R.id.empezar);

    terminar = (Button)findViewById(R.id.terminar);

    cronometro = (Chronometer)findViewById(R.id.cronometro);
    cronometro.setTextColor(Color.BLUE);

    info = (EditText)findViewById(R.id.editText1);
    info.setFocusable(false);
    info.setShadowLayer(2, 0, 0, Color.BLACK);

    String fontPath = "fonts/DS-DIGIT.ttf";
    Typeface tf = Typeface.createFromAsset(getAssets(), fontPath);
    cronometro.setTypeface(tf);

    misDatos = getApplicationContext().getSharedPreferences("misDatos", Context.MODE_PRIVATE);
    editor = misDatos.edit();
    rutaEmpezada = misDatos.getBoolean("rutaEmpezada", false);
}

@Override
protected void onStart() {
    super.onStart();
    empezar.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            if(!rutaEmpezada){
                final Dialog dialogo = new Dialog(EjercicioIniciar.this);
                dialogo.setContentView(R.layout.nombre_tabla);
                dialogo.setTitle("Nombre de la ruta");

                nombreRuta = (EditText)dialogo.findViewById(R.id.nombreRuta);

                aceptar = (Button)dialogo.findViewById(R.id.aceptar);
                aceptar.setOnClickListener(new OnClickListener(){
                    @Override
                    public void onClick(View v) {
                        int creada = baseDatos.crearTablas(nombreRuta.getText().toString().trim());

                        if(creada == 1){
                            Intent service = new Intent(EjercicioIniciar.this,LocalizadorService.class);
                            startService(service);

                            cronometro.setBase(SystemClock.elapsedRealtime());

                            Calendar calen = Calendar.getInstance();
                            String actual = ""+calen.get(Calendar.HOUR_OF_DAY)+":"+calen.get(Calendar.MINUTE)+":"+calen.get(Calendar.SECOND);
                            cronometro.start();

                            builder.append("Ha iniciado una ruta "+radioButton().toUpperCase()+", "+nombreRuta.getText().toString().toUpperCase()+" \n"+"A las "+actual+" \n");
                            info.setText(builder);

                            dialogo.dismiss();

                            rutaEmpezada = true;
                            editor.putBoolean("rutaEmpezada", true);
                            editor.commit();
                        }
                    }
                });

                cancelar = (Button)dialogo.findViewById(R.id.cancelar);
                cancelar.setOnClickListener(new OnClickListener(){
                    @Override
                    public void onClick(View v) {
                        dialogo.dismiss();
                    }
                });

                andar = (RadioButton)dialogo.findViewById(R.id.andar);
                correr = (RadioButton)dialogo.findViewById(R.id.correr);
                bici = (RadioButton)dialogo.findViewById(R.id.bici);
                coche = (RadioButton)dialogo.findViewById(R.id.coche);

                dialogo.show();
            }else
                Toast.makeText(EjercicioIniciar.this, "Actualmente has iniciado una ruta", Toast.LENGTH_SHORT).show();
        }
    });
    terminar.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            if(rutaEmpezada){
                Intent service = new Intent(EjercicioIniciar.this,LocalizadorService.class);
                stopService(service);

                Calendar calen = Calendar.getInstance();
                String actual = ""+calen.get(Calendar.HOUR_OF_DAY)+":"+calen.get(Calendar.MINUTE)+":"+calen.get(Calendar.SECOND);
                builder.append("Fin de su ruta a las "+actual+"\n");
                cronometro.stop();
                builder.append("Duración de la ruta, "+cronometro.getText());
                info.setText(builder);
                cronometro.setBase(SystemClock.elapsedRealtime());
                baseDatos.insertarDatos(builder.toString());
            }

            rutaEmpezada = false;
            editor.putBoolean("rutaEmpezada", false);
            editor.commit();
        }
    });
}

private String radioButton(){
    if(andar.isChecked())
        return andar.getText().toString();
    else if(correr.isChecked())
        return correr.getText().toString();
    else if(bici.isChecked())
        return bici.getText().toString();
    else if(coche.isChecked())
        return coche.getText().toString();
    else
        return "de alguna manera";
}

public class EjercicioBroad extends BroadcastReceiver{
    public static final String MESSAGE = "MESSAGE STRING";
    @Override
    public void onReceive(Context arg0, Intent arg1) {
        info.setText(arg1.getStringExtra("prueba"));
    }
}

} 
```

不工作，editText 不会改变。谢谢大家

# php - Nivo 滑块在第一页加载时不显示图像，但在刷新时加载

> ID：10601015
> 
> 赞同：0
> 
> 时间：2012-05-15T12:48:12.983
> 
> 标签：php, javascript, jquery, nivo-slider

您好，我的 nivo 滑块未在初始页面请求上加载图像并挂在 ajax 加载符号上，但在页面刷新后图像加载完美。

这些图像都是高度压缩的，所以这不应该是一个问题。

该站点是一个 uni 项目，位于[http://microlab.clickgarden.net](http://microlab.clickgarden.net)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:27:42.937

您必须将 nivoSlider 添加到“**成功**”。

```
 function loadPage(url)
    {
    url=url.replace('#page','');

    $('#loading').css('visibility','visible');

    $.ajax({
    type: "POST",
    url: "load_page.php",
    data: 'page='+url,
    dataType: "html",
    success: function(msg){
        $('#slider').nivoSlider(); // add this line
        if(parseInt(msg)!=0)
        {
            $('#pageContent').html(msg);
            $('#loading').css('visibility','hidden');
        }
    }

    });

    } 
```

# qt - Qt 中的日志列表

> ID：10601022
> 
> 赞同：0
> 
> 时间：2012-05-15T12:48:39.057
> 
> 标签：qt, list

我想知道如何像我们显示一些日志那样列出项目的数量。实际上，我从网络收到了一些数据包，我想在 GUI 上为用户显示某种日志。目前我选择了 List Widget，但我很想知道是否还有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:17:26.490

我使用[qInstallMsgHandler](http://doc.trolltech.com/4.6/qtglobal.html#qInstallMsgHandler)，然后根据某些命令行开关重定向到 GUI、控制台或日志文件。如果您有很多消息，您可能想要记录到文件中，但是对于短时间的行/项目，您可以记录到自定义的[QStringListModel](http://qt-project.org/doc/qt-4.8/qstringlistmodel.html)和可能带有它的 QListView。

基本上我已经扩展了引用链接中的示例和一个[SO Question](https://stackoverflow.com/questions/3360548/console-output-in-a-qt-gui-app)

```
 #include <qapplication.h>
 #include <stdio.h>
 #include <stdlib.h>

 void myMessageOutput(QtMsgType type, const char *msg)
 {
     switch (type) {
     case QtDebugMsg:
         fprintf(stderr, "Debug: %s\n", msg);
         break;
     case QtWarningMsg:
         fprintf(stderr, "Warning: %s\n", msg);
         break;
     case QtCriticalMsg:
         fprintf(stderr, "Critical: %s\n", msg);
         break;
     case QtFatalMsg:
         fprintf(stderr, "Fatal: %s\n", msg);
         abort();
     }
 }

 int main(int argc, char **argv)
 {
     qInstallMsgHandler(myMessageOutput);
     QApplication app(argc, argv);
     ...
     return app.exec();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:33:14.930

猜测您的目的仅用于记录，您可以使用`qDebug()`它，因为它是最简单和最容易记录的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:24:37.160

如果你想拥有一些丰富的功能，比如搜索、过滤和排序，我什至会使用 QTreeWidget 将数据拆分为列。列表/树小部件会很好，因为您可以快速附加、快速删除。

有些人使用文本小部件来做这样的事情，但是当有很多数据时它的性能会更差。

# objective-c - 如何在目标 C 中执行 const char 的 XOR？

> ID：10601028
> 
> 赞同：0
> 
> 时间：2012-05-15T12:49:03.490
> 
> 标签：objective-c, ios, udp, hex

我需要通过 UDP/IP 协议向设备发送十六进制值，在我需要发送之前，我必须对前两个字节与“消息序列号”的两个字节进行 XOR 问题是

1.  我何时何地可以找到消息序列号的 MSB 和 LSB
2.  我如何对前两个字节执行 XOR，如果我这样做，那么如何附加回原始字节？

这是我的数组 const char connectByteArray[] = {0x21,0x01,0x01,0x00,0xC0,0x50};

我认为以下几点将有助于更好地回答您“加密块的第一个字节与消息序列号的 MSB 异或，加密块的第二个字节与消息序列号的 LSB 异或”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:04:38.463

```
//Bitwise XOR operator is ^ .

 byte msb = (byte) (connectByteArray[0])<<8 //LSB
 byte lsb = (byte) (connectByteArray[0]) >> 8 //MSB 
```

# jquery - Jquery Deferred 用于异步函数

> ID：10601030
> 
> 赞同：1
> 
> 时间：2012-05-15T12:49:03.840
> 
> 标签：jquery, asynchronous, jquery-deferred

我一直在阅读很多关于`JQuery's` `deferred`对象的内容。我可以看到解耦代码是如何工作的。我最初是使用 Async.js 编写的，但建议使用 Promise。

我发现的大多数示例只是将事物链接到`AJAX`调用。我想链接一个异步函数，但不知道该怎么做。我正在从数据库中检索时间，然后将该时间用作 url 中的参数，最后我想`AJAX`拨打电话。

这就是我所在的位置：

```
 var fetch = function (contactId, callback, errorCallback)
    {
        var buildPromise = new $.Deferred();

        var getLastImportTime = function ()
        {
            var querySuccess = function (tx, result)
            {
                buildPromise.resolve("7 oclock");
            };

            var queryError = function (tx, e)
            {
                buildPromise.reject("Error querying database");
            };

            database.open();
            database.query("SELECT EventImportTime FROM Contact WHERE Contact.Id = ?", [contactId], querySuccess, queryError);
        };

        var buildUrl = function (lastImportTime)
        {
            console.log("I do happen");
            var url = "http://";
            url += 'MobileGetChangedEvents.aspx?Reference=';
            url += '&LastImportTime=';
            url +=  lastImportTime;
            url += '&Format=JSON';
                            return url;

        };

        var makeRequest = function (url)
        {
            getJSON(url, callback, errorCallback)
        };

        $.when(getLastImportTime()).pipe(buildUrl).then(makeRequest); 
```

我的管道方法似乎也被首先调用：s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:51:25.540

由于您将`getLastImportTime`函数传递给`when`辅助方法，因此它应该显式返回 a `promise`，（但在`getLastImportTime()`您不返回任何内容并`when()`期望您传递一个*promise*时）否则助手可以将其评估为立即解决（或拒绝）的承诺。

这可以解释为什么函数 in 似乎`pipe`是在之前执行的`getLastImportTime()`

所以试着像这样改变你的功能

```
var getLastImportTime = function () {
   ...
   database.open();
   database.query("SELECT  ...");

   return buildPromise.promise();
}; 
```

# sql-server - 如何计算 SQL Server 数据库中的行数？

> ID：10601034
> 
> 赞同：0
> 
> 时间：2012-05-15T12:49:16.477
> 
> 标签：sql-server, database

我正在尝试计算我的数据库表中未读消息的数量，但事实证明这非常困难。我什至在网上阅读了教程，但无济于事。

我所做的应该很简单。

这是我正在尝试做的事情：

```
COUNT NUMBER OF ROWS IN NOTIFICATIONSTABLE 
WHERE USERID = @0 AND MESSAGEWASREAD = FALSE 
```

有人可以指出我*正确*的方向吗？任何帮助将不胜感激。

谢谢

```
@helper RetrievePhotoWithName(int userid) 
{ 
    var database = Database.Open("SC"); 
    var name = database.QuerySingle("select FirstName, LastName, ProfilePicture from UserProfile where UserId = @0", userid); 
    var notifications =  database.Query("SELECT COUNT(*) as 'counter' FROM Notifications WHERE UserID = @0 AND [Read] = @1", userid, false); 

var DisplayName = ""; 
if(notifications["counter"] < 1) 
{ 
    DisplayName = name["FirstName"] + " " + name["LastName"]; 
} 
else 
{ 
    DisplayName = name["FirstName"] + ", you have " + notifications["counter"] + " new messages."; 
} 
<a href="@Href("~/Home")" title="My Account"><img src="@Href("~/Shared/Assets/Images/" + name["ProfilePicture"] + ".png")" id="MiniProfilePicture" />&nbsp;@DisplayName</a> 

database.Close(); 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T12:50:46.290

```
SELECT COUNT(*) FROM NotificationsTable WHERE 
 UserID = @UserID AND MessageWasRead = 0; 
```

[Sql 计数函数](http://msdn.microsoft.com/en-us/library/ms175997.aspx)

好的，这是基于我认为应该做的。我不知道底层类型，所以这将是我最好的猜测。

```
var notifications =  database.QuerySingle("Select COUNT(*) as NumRecs....");

if((int)notifications["NumRecs"] > 0)) ....... 
```

我将通知查询更改为 QuerySingle。你不需要一个记录，你只需要一个标量值，所以应该（希望消除你在 equals 中隐式转换的问题。

我还将检查您的数据库对象是否在您调用 close 时实现了 IDisposable（如果是，则将其放在 using 语句中），并且这实际上不会调用 close（我知道它不是 dispose，但它也可能有 dispose）如果在调用 close 函数之前遇到异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T14:02:43.837

```
int unreadMessageCount = db.Query("SELECT * FROM Notification WHERE UserId=@0 AND Read=@1",UserId,false).Count();

string displayname = name["FirstName"] + " " + name["LastName"] + unreadMessageCount>0?",you have " + unreadMessageCount :""; 
```

# excel - Excel 列或图表可以显示链接列的排序版本吗？

> ID：10601037
> 
> 赞同：2
> 
> 时间：2012-05-15T12:49:21.660
> 
> 标签：excel

假设我在 Excel 工作表中有一个按字母顺序排列的学生姓名和（数字）成绩列表。在单独的工作表中，我想查看按降序排列的成绩。就这样。

需要明确的是：我确实知道如何对一系列单元格进行适当的排序。但是，如果我创建对另一个范围的引用范围并手动对其进行排序，则会调整引用并且我仍在查看未排序的列。链接到另一个工作表中的列是一件小事，但尽管 Excel 具有“数组函数”的概念，但它似乎没有将一系列单元格映射到其排序版本（或任何类型的非交互式排序）的函数， 真的）。

我的直接目标是制作一个数字按降序排列的条形图，所以如果有办法从未排序的范围生成这样的图表，我也想听听。但我可以想到几个用例，其中同一单元格范围的多个订单会很有用：

1.  我需要一列，其中包含每个数字和下一个较大数字之间的差异（对数字进行排序时很容易），但我的主工作表按名称字母顺序排序。

2.  我在一个工作表上有按客户名称字母顺序排列的数据，并且想要另一张具有（某些）相同数据的工作表，这些数据按城市或日期排序。除非我想要完全相同的布局，否则不能以交互方式进行排序和重新排序。

3.  我的工作表按时间顺序排列，我想要一个按字母顺序排列的版本。

我已经用谷歌搜索了，答案从“你为什么要做这样的事情”（对于不同的用例）到将粘贴到范围的排序副本中的 VBA 方法。这就是我现在正在做的，减去自动化：选择数据，粘贴*值*（使用选择性粘贴），并订购复制的版本。如果原始数据发生变化，我必须重新进行。

是否真的很少需要多次订购以至于它们不受支持，或者我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:09:26.177

我一直这样做。基本上，您将所需的顺序（升序/降序）转换为未排序列表中的行索引，然后使用索引为您查找该值。

```
=INDEX(<insert range here>, MATCH(SMALL(COUNTIF(<insert range here>, "<"&<insert range here>), ROW(1:1)), COUNTIF(<insert range here>, "<"&<insert range here>), 0)) 
```

[排序数组示例.xlsx](http://dl.dropbox.com/u/14917/Sorted%20Array%20Example.xlsx)

[来源](http://www.get-digital-help.com/2009/03/27/sorting-text-cells-using-array-formula/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:00:31.363

你有Rank功能并结合vlookup。抱歉，我无法链接文件。但是假设您有 Range("A1:C5") 中的数据：

```
Rank Name Score
2    Scott 45
1    Mark  74
3    Chris 39
4    Brian 18 
```

排名列的公式（单元格 A1）= =rank(C2,$C$2:$C$5,0)

然后在范围（“E1：G5”）：

```
Rank   Name    Score
1      Mark    74
2      Scott   45
3      Chris   39
4      Brian   18 
```

在哪里：

```
Rank column is hardcoded
Name column (F2) is  =VLOOKUP(E2,$A$2:$C$5,2,FALSE)
Score column (G2) is =VLOOKUP(E2,$A$2:$C$5,3,FALSE) 
```

# direct3d - HLSL初学者需要一些指导

> ID：10601040
> 
> 赞同：0
> 
> 时间：2012-05-15T12:49:25.290
> 
> 标签：direct3d, hlsl

有没有使用 HLSL 编写的 .fx 文件的示例，该文件使用不同的瓷砖拼贴平铺纹理？像这样： http: [//messy-mind.net/blog/wp-content/uploads/2007/10/transitions.jpg](http://messy-mind.net/blog/wp-content/uploads/2007/10/transitions.jpg)您可以看到每个正方形中都有不同的瓷砖类型，并且它们之间有一点模糊以进行更平滑的过渡，但现在我只需要找到一种方法在纹理上绘制瓷砖。我有一个 2D 整数数组，每个整数都等于一个相应的瓷砖类型（0 = 草，1 = 石头，2 = 沙子）。我打开了一些 HLSL 示例，它们真的很混乱。在 C++ 端一切都运行良好，但事实证明 HLSL 很困难.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:50:22.293

您可以使用一种称为“纹理飞溅”的技术。它使用另一个纹理混合多个纹理（颜色图），其中包含每个颜色图的 alpha 值。具有 alpha 值的纹理等效于您的 2D 数组。您可以创建一个 3 通道 RGB 纹理并将每个通道用于不同的颜色贴图（在您的情况下：R - 草，G - 石头，B - 沙子）。这个纹理的每个像素都告诉我们如何混合颜色贴图（例如，R=0 表示“没有草”，G=1 表示“全石头”，B=0.5 表示“沙子，半强度”）。

假设您有四种 RGB 纹理：`tex1`-草、`tex2`-石、`tex3`-沙、`alpha`-混合纹理。在您的 .fx 文件中，您创建一个简单的顶点着色器，它只计算位置并传递纹理坐标。整个事情是在像素着色器中完成的，看起来应该是这样的：

```
float tiling_factor = 10; // number of texture's repetitions, you can also
                          // specify a seperate factor for each texture

float4 PS_TexSplatting(float2 tex_coord : TEXCOORD0)
{
    float3 color = float3(0, 0, 0);
    float3 mix = tex2D(alpha_sampler, tex_coord).rgb;
    color += tex2D(tex1_sampler, tex_coord * tiling_factor).rgb * mix.r;
    color += tex2D(tex2_sampler, tex_coord * tiling_factor).rgb * mix.g;
    color += tex2D(tex3_sampler, tex_coord * tiling_factor).rgb * mix.b;
    return float4(color, 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:20:52.033

如果您的应用程序支持多通道渲染，您应该使用它。

您应该使用多通道着色器方法，在第一个通道中使用平铺的石头纹理渲染基础对象，然后使用不同的着色器和具有单独透明 Alpha 贴图的不同细节纹理在顶部渲染贴花通道。
（透明贴图也可以存储在您的细节纹理中，但将其分开允许不同的图块级别和重用它的更大灵活性。）

此外，您可以为每个贴花通道使用不同的纹理坐标通道，这样您就不需要硬编码您的图块级别。

因此，您至少需要两个着色器，而着色器 2 的使用频率与您需要的贴花一样多。

1.  渲染平铺基础纹理的着色器
2.  使用单独的透明度贴图渲染一个平铺细节纹理的着色器。

如果您有多个贴花，可能会发生 z-fighting，您应该稍微偏移您的多边形。（非常类似于基本的简单毛发渲染。）

否则，您需要一个单一的着色器来获取多个纹理并将它们放置在基础平铺纹理的顶部，这种解决方案不太灵活，但您可以使用一个纹理来混合纹理（等于您的 2D 阵列）。

# python - Pandas：这里的内存泄漏在哪里？

> ID：10601041
> 
> 赞同：11
> 
> 时间：2012-05-15T12:49:25.867
> 
> 标签：python, pandas

**我在python****`pandas`**中使用库面临内存泄漏问题。我在我的类中创建对象并且我有方法，可以根据我的条件改变数据框的大小。在更改数据框大小并创建新的熊猫对象后，我在课堂上重写了原始的 pandas.dataframe。但是即使在显着减少初始表之后，内存使用率也非常高。一些简短示例的代码（我没有编写流程管理器，请参阅任务管理器）：**`pandas.dataframe`**

 **```
import time, string, pandas, numpy, gc
class temp_class ():

    def __init__(self, nrow = 1000000, ncol = 4, timetest = 5):

        self.nrow = nrow
        self.ncol = ncol
        self.timetest = timetest

    def createDataFrame(self):

        print('Check memory before dataframe creating')
        time.sleep(self.timetest)
        self.df = pandas.DataFrame(numpy.random.randn(self.nrow, self.ncol),
            index = numpy.random.randn(self.nrow), columns = list(string.letters[0:self.ncol]))
        print('Check memory after dataFrame creating')
        time.sleep(self.timetest)

    def changeSize(self, from_ = 0, to_ = 100):

        df_new = self.df[from_:to_].copy()
        print('Check memory after changing size')
        time.sleep(self.timetest)

        print('Check memory after deleting initial pandas object')
        del self.df
        time.sleep(self.timetest)

        print('Check memory after deleting copy of reduced pandas object')
        del df_new
        gc.collect()
        time.sleep(self.timetest)

if __name__== '__main__':

    a = temp_class()
    a.createDataFrame()
    a.changeSize() 
```

*   在创建数据框之前，我大约有。15 mb 的内存使用量

*   创建后 - 67mb

*   更改大小后 - 67 mb

*   删除原始数据框后 - 35mb

*   删除缩小表后 - 31 mb。

**16 兆？**

我在 Windows 7 (x64) 机器 pandas 上使用 python 2.7.2(x32)。**版本**是 0.7.3。麻木的。**版本**是 1.6.1

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-15T14:22:04.550

需要指出的几点：

1.  在“更改大小后检查内存”中，您尚未删除原始 DataFrame，因此这将严格使用更多内存

2.  Python 解释器对于占用操作系统内存有点贪心。

我对此进行了调查，可以向您保证 pandas 没有泄漏内存。我正在使用 memory_profiler (http://pypi.python.org/pypi/memory_profiler) 包：

```
import time, string, pandas, numpy, gc
from memory_profiler import LineProfiler, show_results
import memory_profiler as mprof

prof = LineProfiler()

@prof
def test(nrow=1000000, ncol = 4, timetest = 5):
    from_ = nrow // 10
    to_ = 9 * nrow // 10
    df = pandas.DataFrame(numpy.random.randn(nrow, ncol),
                          index = numpy.random.randn(nrow),
                          columns = list(string.letters[0:ncol]))
    df_new = df[from_:to_].copy()
    del df
    del df_new
    gc.collect()

test()
# for _ in xrange(10):
#     print mprof.memory_usage()

show_results(prof) 
```

这是输出

```
10:15 ~/tmp $ python profmem.py 
Line #    Mem usage  Increment   Line Contents
==============================================
     7                           @prof
     8     28.77 MB    0.00 MB   def test(nrow=1000000, ncol = 4, timetest = 5):
     9     28.77 MB    0.00 MB       from_ = nrow // 10
    10     28.77 MB    0.00 MB       to_ = 9 * nrow // 10
    11     59.19 MB   30.42 MB       df = pandas.DataFrame(numpy.random.randn(nrow, ncol),
    12     66.77 MB    7.58 MB                             index = numpy.random.randn(nrow),
    13     90.46 MB   23.70 MB                             columns = list(string.letters[0:ncol]))
    14    114.96 MB   24.49 MB       df_new = df[from_:to_].copy()
    15    114.96 MB    0.00 MB       del df
    16     90.54 MB  -24.42 MB       del df_new
    17     52.39 MB  -38.15 MB       gc.collect() 
```

所以确实，使用的内存比我们开始时更多。但它会泄漏吗？

```
for _ in xrange(20):
    test()
    print mprof.memory_usage() 
```

并输出：

```
10:19 ~/tmp $ python profmem.py 
[52.3984375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59375]
[122.59765625]
[122.59765625]
[122.59765625] 
```

所以实际上发生的事情是 Python 进程一直在使用一个内存池，以避免必须不断地从主机操作系统请求更多内存（然后释放它）。我不知道这背后的所有技术细节，但这至少是正在发生的事情。**

# ruby - 规范助手不访问 ApplicationController 中的 default_url_options

> ID：10601051
> 
> 赞同：2
> 
> 时间：2012-05-15T12:49:58.337
> 
> 标签：ruby, ruby-on-rails-3, rspec2

我们在帮助程序中覆盖了 restful 方法并想要测试它们。一切都很好，只是`default_url_options`没有从 ApplicationController 中使用。仅当我运行测试时才会出现此问题。

我们实际上设法通过像这样存根 ActionController::Base 来修复它

```
ActionController::Base.stub(:default_url_options).and_return :locale => locale || I18n.locale 
```

感觉有点hacky，我想知道是否有更好的解决方案。

# php - Image Magick 创建缩略图

> ID：10601058
> 
> 赞同：0
> 
> 时间：2012-05-15T12:50:19.037
> 
> 标签：php, imagemagick

嗨，我正在通过以下命令使用 imagemagick 创建缩略图

```
 convert -define jpeg:size=".$this->info[0]."x".$this->info[1]."  testi/".$this->filename."  -auto-orient  -thumbnail 200x200   -unsharp 0x.5 testi/".$this->filename 
```

但此命令仅适用于 jpack 输入文件。

谁能告诉我任何文件类型的命令？就像如果 gif 那么输出 shuld gif 一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:03:51.730

这是代码：

```
<?php 
// read page 1 
$im = new imagick( 'test.pdf' );

// convert to jpg 
$im->setImageColorspace(255); 
$im->setCompression(Imagick::COMPRESSION_JPEG); 
$im->setCompressionQuality(60); 
$im->setImageFormat('jpeg'); 

//resize 
$im->resizeImage(290, 375, imagick::FILTER_LANCZOS, 1);  

//write image on server 
$im->writeImage('thumb1.jpg'); 
$im->clear(); 
$im->destroy(); 
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:45:19.783

什么是一 .jpack 文件？

-define 仅适用于 jpg 文件，但我认为如果输出文件不是 jpg 它将被忽略；尝试删除它。

输出文件应与输入文件同名。

试着像这样写你的代码，这样你就可以看到命令实际上是什么；您可以在其工作时将回声注释掉。

```
$cmd = "-define jpeg:size={$this->info[0]}x{$this->info[1]}  testi/{$this->filename}  -auto-orient -thumbnail 200x200 -unsharp 0x.5 testi/{$this->filename}"; 
echo $cmd;
exec("convert $cmd"); 
```

我对“$this->”业务有点迷茫，因此代码可能无法按所写的那样工作。我尝试在我的命令中保持简单，并将文件名等放入 Imagemagick 命令之外的变量中。

# jquery - jquery 扩展器插件自定义“阅读更多”链接

> ID：10601059
> 
> 赞同：1
> 
> 时间：2012-05-15T12:50:23.797
> 
> 标签：jquery, expander

我正在使用[jQuery Expander 插件](http://plugins.learningjquery.com/expander/)。它按预期工作得很好。我将 expandText 设置为“阅读更多”。是否可以更改它出现的位置？我不希望它与正在运行的文本一起显示为内联。是否可以在页面的其他位置放置锚标记并将展开/折叠功能与该锚标记相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:54:06.083

看起来这个插件的 API 中没有任何函数可以让你这样做。

您总是可以使用 CSS 将`<span class='read-more'></span>`元素重新定位到任何您想要的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:03:34.483

我认为不需要扩展器插件，只需要 jQuery。

您可以使用 jQuery 的 .hide 和 .show 函数以类似于扩展插件的方式显示或隐藏任何元素。

这是一个 jsFiddle 示例：http: [//jsfiddle.net/9mUpe/](http://jsfiddle.net/9mUpe/)

# c# - 为什么在 Visual Studio 2010 中保存 xml 文件非常慢？

> ID：10601060
> 
> 赞同：2
> 
> 时间：2012-05-15T12:50:35.103
> 
> 标签：c#, .net, xml, visual-studio, visual-studio-2010

当我尝试保存 XML 文件（例如 XAML 或 ASPX 或任何其他包含 XML 内容的文件）时，Visual Studio 卡住了，这非常糟糕，因为我曾经每十个字母按一次 Ctrl+S！

如何提高 Visual Studio 2010 保存包含 XML 内容的文件的速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:27:56.943

唯一的办法就是把你的硬盘换成SSD（固态硬盘），然后把你的代码和操作系统放在上面，这样就可以解决问题了！

# php - 如果记录不不同，则从表中获取唯一记录 + 总和

> ID：10601067
> 
> 赞同：0
> 
> 时间：2012-05-15T12:51:12.920
> 
> 标签：php, sql

我在mysql中有一个表，如下所示：

表名：Emp

```
Emp Name | Time 
_______________
ABC      | 1
ABC      | 2
ABC      | 3
PQS      | 4
XYZ      | 5 
```

我想要输出如下

```
Emp Name | Time 
_______________
ABC      | 6
PQS      | 4
XYZ      | 5 
```

如您所见，仅返回唯一的 Emp 名称，并为 Emp 名称的每个实例添加时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:53:20.570

这可能会有所帮助：

```
SELECT
   EmpName,
   SUM(Time) AS Total
FROM
  table1
GROUP BY
   EmpName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:53:30.483

这是一个基本的聚合`SUM()`分组`Emp Name`：

```
SELECT 
  EmpName,
  SUM(Time) AS Time
FROM Emp
GROUP BY EmpName
ORDER BY EmpName 
```

查看有关聚合函数和子句使用[的 MySQL 文档。](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)`GROUP BY`

请注意，如果您的列名实际上`Emp Name`带有空格，则需要用反引号将其引用，如下所示：

```
SELECT 
  `Emp Name`,
  SUM(Time) AS Time
FROM Emp
GROUP BY `Emp Name`
ORDER BY `Emp Name` 
```

# iphone - 使用 ASIHTTPRequest 设置不同的回调

> ID：10601072
> 
> 赞同：0
> 
> 时间：2012-05-15T12:51:24.243
> 
> 标签：iphone, ios, xcode, asihttprequest

对于我目前正在制作的应用程序，我使用 ASIHTTPRequest API 进行通信：

```
 NSURL *url = [NSURL URLWithString:@"http://testService.com"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request appendPostData:[jsonString dataUsingEncoding:NSUTF8StringEncoding]];

[request addRequestHeader:@"Content-Type" value:@"application/json"];
[request setTimeOutSeconds:20.0f];
[request setRequestMethod:@"POST"];

NSData * postData = [NSJSONSerialization dataWithJSONObject:dictionnary2 options:0 error:nil];

[request setPostLength:[postData length]];

[request appendPostData:postData];

[request setDelegate:self];
[request startAsynchronous]; 
```

我已经有工作调用，但它们都使用相同的回调方法： `- (void)requestFinished:(ASIHTTPRequest *)request`

我希望每个调用都有自己的回调方法，因为我从另一个调用的回调方法中调用了一个调用。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:58:18.613

在这种情况下，我总是更喜欢使用 Blocks 进行回调。

检查此[链接](http://maniacdev.com/2010/07/blocks-an-interesting-objective-c-addition-in-ios-4/)以获取块实现方法和设计，

# c++ - 是否需要在构造函数中初始化私有列表类成员？

> ID：10601075
> 
> 赞同：2
> 
> 时间：2012-05-15T12:51:33.547
> 
> 标签：c++, initialization, stdlist

我有一个头文件：

```
class day
{
public:
day(int id);
~day();

private:
int id;
std::list<meeting*> meetings;

}; 
```

在我的 .cpp 文件中：

```
#include "day.h"
#include "meeting.h"

day::day(int id) : id(id) {  } 
```

是否需要添加`meetings()`到构造函数的初始化列表中？

```
day::day(int id) : id(id), meetings() {  } 
```

我不确定用构造函数初始化对象的规则。即使未在构造函数中显式初始化，是否所有私有成员对象都已初始化？另外，我需要为列表创建一个析构函数来删除列表中的对象吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:52:33.547

不，**具有默认构造函数的类型默认是值初始化的**。

如果你`id`从初始化列表中省略，它不会被初始化，因为它是一个`int`. 但是，`std::list`会员会。

`public`它与/无关`private`。

> 另外，我是否需要为列表创建一个析构函数来删除列表中的对象？

仅当`day`是那些对象的所有者。如果它们是在类之外创建的，并且只是插入到类的成员中，那么调用上下文很可能必须处理破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:52:38.350

不，`list`默认为空。是否需要删除`list`in 析构函数中的对象的问题取决于您如何填充列表。如果您插入类似`meetings.insert(new meeting())`then yes 的内容，则需要删除析构函数中的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T12:58:54.023

你不需要初始化`std::list`，因为它的默认构造函数会被调用。

我们通常应该初始化以下内容：

1.  内置类型，如`int`等`float`，否则它们将被初始化为垃圾值。
2.  所有其他用户定义的类型，它们没有任何默认构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:52:49.313

不，不需要，因为默认构造对您来说已经足够了。

同样，当您的对象被销毁时，它将销毁列表。但是，我认为列表不会自动销毁其所有内容，因此您仍然需要在析构函数中执行此操作。

# javascript - Backbone.View：删除不同模型相关的不同视图

> ID：10601083
> 
> 赞同：1
> 
> 时间：2012-05-15T12:52:02.823
> 
> 标签：javascript, backbone.js, backbone-relational, backbone-views

我需要显示`three different views`哪些与`three different model`收藏相关。
为了执行此任务，我编写了以下代码。(*)
请告诉我这是否是正确的方法，无论如何它是有效的。

这是我的问题。
在其中一个视图中，假设`firstView`, 可以对服务器执行 a `DELETE request`，该服务器注意删除与 this 相关的所有数据`three view`。

现在我需要删除我的三个视图......但是`firstView`我无法访问其他两个视图。

1) 我该如何执行此任务？
2）我应该重新设计/改进我的实现吗？

* * *

(*)

```
// module for display three different views

define([
    "js/views/01View",
    "js/views/02View",
    "js/views/03View"
], function (FirstView, SecondView, ThirdView) {

    var MainView = Backbone.View.extend({

        initialize: function ()
        {
            this.render();
        },

        render: function ()
        {
            var movie_id = this.options.movie_id;
            this.firstView = new FirstView(movie_id);
            this.secondView = new SecondView(movie_id);
            this.thirdView = new ThirdView(movie_id);
        }
    });    

    return MainView;
}); 
```

* * *

PS：

_id 用于构建集合或模型的 url 参数

```
url1: http://localhost/movie/movie_id   (model1)
url2: http://localhost/movie/movie_id/followers   (collection2)
ulrs: http://localhost/movie/movie_id/feeds (collection3) 
```

当我删除 model1 时，与 collection2 和 collection3 相关的 view2 和 view3 应该被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:41:22.273

为了根据我们的评论对话解决您的问题，Backbone 架构使用事件，所以为什么不使用事件聚合器来发送事件，不要将自己限制在主干构造中。[在主干中从一个视图触发事件到另一个视图](https://stackoverflow.com/questions/7843278/fire-an-event-from-one-view-to-another-in-backbone)此模式为您的问题提供了一个优雅的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:54:59.857

`Views`不应该响应直接的方法调用，而是响应事件。说您要么`EventAggregator`从每个视图创建一个通用的可访问性（正如@20100 在他的回答中解释的那样），或者您通过一个**通用模型**连接视图并让每个视图*监听*它自己更*有趣*的事件。

在您的情况下，您可以从 Views 实例中实例化 Movie 模型并将其周围的三个 View 连接起来：

```
// code simplified and not tested
var MainView = Backbone.View.extend({
  initialize: function ( opts ) {
    this.movie = new Movie({ id: this.opts.movie_id} )
    this.movie.fetch();
    this.render();
  },

  render: function () {
    this.firstView = new FirstView( this.movie );
    this.secondView = new SecondView( this.movie );
    this.thirdView = new ThirdView( this.movie );
  }
});

var ThirdView = Backbone.View.extend({
  initialize: function( opts ) {
    this.movie = opts.movie;
    this.movie.on( "destroy", this.cleanUp, this )
    this.followers = // fetch the followers as you do now, use this.model.id
  }

  cleanUp: function(){
    // your clean up code when model is detroyed
  }
}); 
```

# linux - 如何在启用调试信息的情况下编译紧密的 vnc？

> ID：10601086
> 
> 赞同：1
> 
> 时间：2012-05-15T12:52:07.987
> 
> 标签：linux, gcc, gdb, vnc

我从它的网站下载了紧凑的 vnc 源代码。现在我正在尝试在其可执行文件上使用 gdb。调试器成功地在函数上添加了断点，但是当我尝试单步执行该函数时，它说：

> 单步直到退出函数 func，它没有行号信息

我认为这是因为编译没有使用正确的标志完成。我正在尝试搜索配置文件以了解如何启用它，但到目前为止还没有。我不熟悉 Imakefiles 等。也许以前做过这件事的人可以提供帮助？

在 ubuntu 机器上使用 gnu GCC 和 GDB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:16:20.393

您应该使用 -g 标志进行编译。
如果您正在尝试学习代码，我建议您使用“-g -O0”。这将关闭优化器 - gcc 优化会使单步执行代码变得混乱。

# xcode - 在项目方案的“测试”动作中测试应用程序数据

> ID：10601090
> 
> 赞同：4
> 
> 时间：2012-05-15T12:52:11.430
> 
> 标签：xcode, unit-testing, tdd

我正在使用 TDD 方法进行开发。在挖掘项目方案时，我注意到测试套件/用例的“测试应用程序数据”参数。

它是什么？与没有它相比有什么优势？

![在此处输入图像描述](../Images/dccb314977f895d3dfd4223c04175558.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:24:58.127

此设置允许您将来自处于特定状态的设备的数据与测试目标相关联。在设备或模拟器上使用您的应用程序后，您可以复制应用程序保存的数据。如果您的应用程序需要运行依赖于已保存数据的应用程序的测试，这将非常有用。

[文档](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode_User_Guide/080-Manage_Your_Devices/manage_devices.html)中有一些关于此的条目。如果您在页面上找到“下载您的应用程序的数据以供分析”，则有关于如何将数据从设备复制到您的开发机器的说明。

# facebook - 朋友看不到我使用 Open Graph API 发布的 Facebook 公开帖子

> ID：10601095
> 
> 赞同：0
> 
> 时间：2012-05-15T12:52:41.720
> 
> 标签：facebook, node.js, facebook-graph-api

我正在制作一个简单的 Facebook 应用程序，它使用 node.js 和 Facebook 的 Open Graph API 将更新发布到用户的时间线。尽管*我可以在**我的*时间线上看到我使用 OG API 发布的帖子（并且它有一个地球图标，表明它是一个公共帖子，见下图），但我的 FB 朋友网络中没有人可以看到它。

这是我通过 OG API 制作的公开帖子的屏幕截图，显示在我的时间线上，以及来自 3rd 方应用程序（Pool practice）的帖子以进行比较：

![在此处输入图像描述](../Images/d381cfcfe02230a71f24ffc23792b244.png)![在此处输入图像描述](../Images/ea21bfd6817cb76b8765384255bb6c34.png)

现在这是我朋友时间轴的屏幕截图，仅显示了 Pool Practice 帖子，我的应用程序中的帖子无处可见...... ![在此处输入图像描述](../Images/aa9f077e86e7eb25127239431eb0cb90.png)

* * *

我检查了应用程序设置和权限以及 OG API 选项，但没有看到任何指向我如何解决此问题的信息。这是我用来发布更新的 node.js 代码：

```
 // app permissions set to 'publish_actions' and 'publish_stream'
    // I do the auth dance here to get the access_token and store it in session as fb_token

    var request = require( 'superagent' ); // module from TJ Holowaychuk similar to "request"
request
    .post( 'https://graph.facebook.com/me/feed?access_token=' + req.session.fb_token )
    .send( { message: 'posting via node.js' } )
    .set( 'Content-Type', 'application/x-www-form-urlencoded' )
    .end( function( response ) {
        log( response );
    }); 
```

上面的代码有效，帖子显示在*我的*时间线上，但没有其他人能够看到它。有人知道摆脱这种情况的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:58:02.343

您需要先提交每个操作以进行 Facebook 验证，然后您的朋友才能查看它。只有定义为应用程序开发人员的用户才能查看这些时间线消息。

![点击提交链接](../Images/92faecf76c42383a4897478cc3f1e5f9.png)

# visual-studio-2010 - Ninject ToFactory 适用于 Resharper 单元测试，但不适用于 NCrunch

> ID：10601098
> 
> 赞同：11
> 
> 时间：2012-05-15T12:52:50.083
> 
> 标签：visual-studio-2010, unit-testing, ninject, ncrunch, ninject-3

我正在使用 Ninject.Extensions.Factory 和 Ninject 3 创建一个工厂，它`IFoo`根据提供给工厂的字符串创建不同类型的。我有一个通过单元测试，但奇怪的是，只在 Resharper 测试运行器中。在 NCrunch 测试运行器中它失败了。这是 NCrunch 配置问题，还是我需要更改代码？

界面：

```
public interface IFooFactory
{
    IFoo CreateFoo(string name);
} 
```

Ninject 绑定：

```
kernel.Bind<IFooFactory>().ToFactory(() => new UseFirstParameterAsNameInstanceProvider());
kernel.Bind<IFoo>().To<BarFoo>().Named("Bar"); 
```

考试：

```
[Test]
public void CanCreateFooTest()
{
    var factory = (IFooFactory) Kernel.GetService(typeof(IFooFactory));
    var bar = factory.CreateFoo("Bar");
    Assert.AreEqual(typeof(BarFoo), bar.GetType());
} 
```

NCrunch 例外：

```
System.Reflection.TargetInvocationException : Exception has been thrown by the target of an invocation.
  ----> Ninject.ActivationException : Error activating IInterceptor using conditional implicit self-binding of IInterceptor
Provider returned null.
Activation path:
  2) Injection of dependency IInterceptor into parameter  of constructor of type IFooFactoryProxy
  1) Request for IFooFactory

Suggestions:
  1) Ensure that the provider handles creation requests properly.

   at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Ninject.Infrastructure.Language.ExtensionsForIEnumerable.ToArraySlow(IEnumerable series, Type elementType) in c:\Projects\Ninject\ninject\src\Ninject\Infrastructure\Language\ExtensionsForIEnumerable.cs:line 29
   at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent) in c:\Projects\Ninject\ninject\src\Ninject\Planning\Targets\Target.cs:line 149
   at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 114
   at Ninject.Activation.Providers.StandardProvider.<>c__DisplayClass4.<Create>b__2(ITarget target) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 96
   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at Ninject.Activation.Providers.StandardProvider.Create(IContext context) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 95
   at Ninject.Activation.Context.Resolve() in c:\Projects\Ninject\ninject\src\Ninject\Activation\Context.cs:line 157
   at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 386
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
   at Ninject.KernelBase.System.IServiceProvider.GetService(Type service) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 553
   at FooProject.Tests.CanCreateFooTest() in C:\Projects\FooProject ...
--ActivationException
   at Ninject.Activation.Context.Resolve() in c:\Projects\Ninject\ninject\src\Ninject\Activation\Context.cs:line 165
   at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 386
   at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   at System.Linq.Enumerable.<CastIterator>d__b1`1.MoveNext()
   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-09T12:14:45.507

进入单元测试库的 NCrunch 配置，并将*Copy referenced assembly to workspace*设置为**True**。

![NCrunch 配置截图](../Images/0881b57d8930c8798f8b913ac60655eb.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T13:48:27.327

这里是与 NCrunch 一起使用的代码：

```
 var kernel = new StandardKernel();
        kernel.Bind<IFooFactory>().ToFactory(() => new UseFirstParameterAsNameInstanceProvider());
        kernel.Bind<IFoo>().To<BarFoo>().Named("Bar");
        kernel.Load<FuncModule>();

        var factory = kernel.Get<IFooFactory>();
        var bar = factory.CreateFoo("Bar");
        Assert.Equal(typeof(BarFoo), bar.GetType()); 
```

**更新**

这很好用，并且整理了 NCrunch。但是，Resharper 抱怨它已经加载了两次。解决方法：

```
 #if NCRUNCH
        Kernel.Load<FuncModule>(); 
    #endif 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-15T13:25:25.543

使用该 TestRunner 运行时，未加载 FuncModule。如果扩展未复制到已执行进程的启动目录，则会发生这种情况。

我不NCrunch。所以我不能告诉你它在做什么。但很可能它以不同于 R# 测试运行器的方式复制程序集。您可以手动加载扩展，但这感觉就像一个 hack。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-27T18:47:49.803

我一直在使用哈里约特的建议一年左右。但是这个问题也发生在我们的 TFS-Buildserver 上。所以现在我避免 Ninject 自动加载所有扩展并手动加载它们。这避免了`#if`,`#endif`并且相同的代码将在 Resharper 和 NCrunch 上运行：

```
var kernel = new StandardKernel(new NinjectSettings { LoadExtensions = false});
kernel.Load<FuncModule>(); 
```

其余不变：

```
kernel.Bind<IFooFactory>().ToFactory(() => new UseFirstParameterAsNameInstanceProvider());
kernel.Bind<IFoo>().To<BarFoo>().Named("Bar");

var factory = kernel.Get<IFooFactory>();
var bar = factory.CreateFoo("Bar");
Assert.Equal(typeof(BarFoo), bar.GetType()); 
```

# actionscript-3 - AS3：子弹与敌人的 hitTestObject 与 hitTestPoint

> ID：10601101
> 
> 赞同：0
> 
> 时间：2012-05-15T12:53:06.387
> 
> 标签：actionscript-3, flash, actionscript

很长一段时间以来，我一直在关注 hitTestObject、hitTestPoint 和自定义 hitTest 的讨论。考虑到形状选项，我通常会沿着使用 Point 的路线走下去。

但是-我现在正在尝试对子弹击中圆形敌人进行命中测试。我目前使用的如下：

![命中测试](../Images/52b5be04bff1131632862fbe99a4ed7b.png)

```
for (var i:int = 0; i<levelHolder.enemyArray.length; i++){
            if(levelHolder.enemyArray[i]){
                if(this.hitTestObject(levelHolder.enemyArray[i].hit) && hit == false && distanceTravel <= range){
                    trace("You hit a baddie "+i)
                    hit = true
                    this.parent.removeChild(this)
                    var gotShot:gotshot = new gotshot() // move to sound
                    gotShot.play()                      // move to sound
                    levelHolder.damageEnemy(i, damage)
                } 
            }   
        } 
```

现在，显然这导致子弹停在命中周围的 alpha 区域并将其计为命中。

我确实假设我可以轻松地执行以下操作，但是它不起作用：

```
if(this.hitTestPoint(levelHolder.enemyArray[i].x, levelHolder.enemyArray[i].y, true) && hit == false && distanceTravel <= range)
... 
```

当我们使用单个 X 和 Y 位置时，这会导致非常非常有限的命中范围。

我的问题是：我怎样才能更准确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:32:29.500

首先要注意的是，如果您谈论性能，则下面的代码会失败。对其进行单一更改将提供类似 %90 的性能

```
if(this.hitTestObject(levelHolder.enemyArray[i].hit) && hit == false && distanceTravel <= range)
// this way is much better.
if( hit == false && distanceTravel <= range && this.hitTestObject(levelHolder.enemyArray[i].hit)) 
```

第二件事是实现你自己的命中测试，正如@Russel 所说，如果你正在使用圆圈。并尽量不要使用 Math.sqrt() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:58:22.420

假设子弹和坏人总是圆形的，你可以......

1.  使用 hitTestPoint，敌人的命中对象是一个半径增加子弹半径的圆，或者
2.  通过检查两个对象的中心之间的距离是否大于总和或它们的半径来自己实施命中测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:32:20.263

使用类似这样的方法可以轻松完成对两个圆形对象的命中测试。

```
var dx:Number = a.centerX - b.centerX;
var dy:Number = a.centerY - b.centerY;
var dLimit = a.radius + b.radius;
return Square(dx) + Square(dy) <= Square(dLimit); 
```

对不起，如果有点 Psudocode，但我认为这是比较清楚的。

# php - 有趣的 XML 标签：

> ID：10601110
> 
> 赞同：-1
> 
> 时间：2012-05-15T12:54:03.090
> 
> 标签：php, xml

XML 验证为正确，但这个奇怪的标签位于它的中间。

它有什么用？它是什么类型的标签？这不是结束标签

真讨厌，它正在破坏我的数组 grr

```
<cat>
<awCatId>
437
</awCatId>
<awCat>
Chocolate
</awCat>
<mCat>
Full Range
</mCat>
</cat>
<brand/>
<valFrom>
0000-00-00
</valFrom>
<valTo>
0000-00-00
</valTo>
<comAmount>
0.00
</comAmount> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:55:07.743

那是一个没有内容的自闭合标签。
这是完全有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:55:46.867

表单的任何标签`<tagname/>`都是自闭合标签。`<tagname></tagname>`它基本上意味着与- 没有子元素的元素完全相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T12:56:44.497

`<brand/>`是一个**自闭合标签**的例子，相当于

```
<brand>
</brand> 
```

许多浏览器会将没有内容的两个标签显示为自封闭标签（显示不需要匹配源）。

# python - Python中的函数多态性

> ID：10601114
> 
> 赞同：7
> 
> 时间：2012-05-15T12:54:18.860
> 
> 标签：python, polymorphism

我一直在寻找最好的方法，但我还没有真正找到任何完全令人信服的东西。

我正在编写一个系统，其中有用户对象和管理这些用户的集合。每个用户都有一个名称，我想在管理器中指定一个函数，该函数可以采用用户的名称或用户对象本身。

```
class UserManager: 
  def remove_user(self,user_or_username):
    #If user_or_username is a string
    remote.remove(user_or_username)
    #If user_or_username is a User object
    remote.remove(user_or_username.name) 
```

有什么漂亮的方法可以做到这一点，或者是使用 isinstance 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:03:05.927

像[mgilson's](https://stackoverflow.com/a/10601186/296974)的解决方案，但略有不同：

```
def remove_user(self,user_or_username):
    try:
        #If user_or_username is a User object
        username = user_or_username.name
    except AttributeError:   #Oops -- didn't works.  ask forgiveness ;-)
        #If user_or_username is a string
        username = user_or_username
    remote.remove(username) 
```

为什么？因为这样一来，`AttributeError`s in`remove()`就不会被抑制。

这可能无关紧要，但我更喜欢将异常处理集中在我真正想要拥有它们的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T13:02:35.177

using`isinstance`是一种很好的方法...此解决方案还有另一种方法

```
if hasattr(user_or_username, 'name'):
    # this object has <name> attribute
    remote.remove(user_or_username.name)
else:
    remote.remove(user_or_username) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T12:58:58.797

有时候蟒蛇人喜欢说“求原谅不如求许可”……

```
 def remove_user(self,user_or_username):
    try:
        #If user_or_username is a User object
        remote.remove(user_or_username.name)
    except AttributeError:   #Oops -- didn't works.  ask forgiveness ;-)
        #If user_or_username is a string
        remote.remove(user_or_username) 
```

但我说这只是一个偏好问题。`isinstance`如果你知道你只会得到字符串或`User`实例，你也可以很容易地使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T13:00:55.727

我会使用`isinstance`，但这也有效：

```
def remove_user(self, user):
   if hasattr(user, "name"):
      self.remove(user.name)
   else:
      self.remove(user) 
```

# asp.net - 现有 ASP.NET 4 解决方案中的高效 URL 屏蔽/隐藏/隐藏

> ID：10601115
> 
> 赞同：5
> 
> 时间：2012-05-15T12:54:25.617
> 
> 标签：asp.net, iis, masking

我有一个使用 IIS 6 和 7 的当前系统，用 ASP.NET 和 .NET 4 中的 C# 编写。

> 我的目的是完全隐藏网址（根据客户请求）。即 [https://myapp.it.mydomain.com/Secure/folder1/folder2/folder3/someView.aspx](https://myapp.it.mydomain.com/Secure/folder1/folder2/folder3/someView.aspx) 必须是[https://myapp.it.mydomain.com/](https://myapp.it.mydomain.com/)或至少是一个不确定的不改变页面：[https:// /myapp.it.mydomain.com/constantView.aspx](https://myapp.it.mydomain.com/constantView.aspx)

目前，我们使用`Response.Redirect`所有导航项和一些直接链接。我们也有一些查询字符串的小用途，但更多地依赖于跨页面的回发。我们没有任何适当的 URL 屏蔽方法，并且正在寻求提供一种机制来做到这一点。

我已经知道一些执行 URL 掩码的方法，但希望 SO 的意见是最容易实现的解决方案。

最简单的，是指实施的时间。即，将我们的调用更改为仅使用 Server.Transfer 不是一种选择。

`ASP.NET Routing`似乎是一个公平的解决方案，但据我所知，需要对所有查询字符串进行处理，以映射我们需要它们的位置。我不清楚这是否可以隐藏所有页面而不是一对一映射。

使用框架集/iFrames 也不是一种选择，因为它会导致现有解决方案的许多复杂性。

据我了解，这`URL Rewrite Module`可能是我最好的解决方案。

我希望这个问题可以提供一个很好的可能解决方案列表，也许还有我还没有意识到的方法。

* * *

*编辑*

当前情况下一个更明确的问题：

我们正在使用 IIS 6（因此 IIS 7 重写模块是不可能的）。有没有办法提供 URL 隐藏/屏蔽，它不会破坏使用 Page.Referrer（在 ASP.NET 中）和查询字符串的现有代码？

这个想法是让地址栏看起来总是一样的。即使是 JavaScript hack 也是可以接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:02:36.070

您可以在这里对所有可能的解决方案进行**很好**的细分：[http ://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

但是根据您的要求，我个人认为 URL 重写是您最好的选择，因为您只需要在 web.config 文件中添加重写规则，因此它是最容易实现的解决方案。对于 IIS6，我自己过去曾使用过 Intelligencia [UrlRewriter.NET](https://www.nuget.org/packages/Intelligencia.UrlRewriter/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:36:15.790

有点不清楚......我打算使用评论，但这个“评论”的长度不会......

恕我直言：

*   如果您说`response.redirect`的是它当前如何满足要求，那么（猜测）似乎是说，重定向取决于某些查询值。如果是这样，“隐藏”实际上不起作用 - 我可以简单地提供相同的查询来获得相同的结果（ing）页面（？）。

*   同样`server.transfer`- 在任何情况下它都是“可重复的”（所以无论它是应该隐藏的 url 是什么，都没有真正被隐藏（除非我完全错过了问题的要点）。

*   框架集/iframe 等——它们不隐藏任何东西，找出源页面在哪里（例如 IE/Chrome/Safari/FF 开发者工具）是微不足道的。

*   url 重写/路由：好吧，为了重写或路由 url，必须（首先）请求它，所以应该隐藏的任何东西都不是（首先）。

*   客户端（浏览器或浏览器插件）的请求**总是**可以被检查/看到（并且没有安全措施，可以被篡改）。

如果您解释需要隐藏的内容以及原因，也许会更好。网址只是*“某物”的*资源- 所以看来您确实需要保护该*“某物”*，而不是真正的 url 本身（？）。你可能会得到更好的建议......

一些想法（“简单”是相对的）：

*   使用 Web 服务和客户端脚本。您的 UI 完全由脚本（又名“单页应用程序”）驱动。您可以以您认为合适的方式为您的端点添加安全性，这样即使检查了客户端请求，也无法通过欺骗来满足端点要求 - 例如“临时代理” - 您的脚本调用代理，代理，被服务器端，进行验证+请求参数，向端点发出实际请求。由于请求是在后台（服务器端）完成的，客户端不知道端点 - 因此它不能被检查、看到或篡改。您现在拥有一个基本的 HTML“前端”网站，完全独立于另一个执行工作的 Web 应用程序。只有前端网站及其网址是公开的。

*   真的和 ASP.net Web Forms Postback 没有什么不同（如果你认真考虑的话）。单页，UI 是基于用户交互驱动的——总是只有 1 个 url。交互 -> 处理。结果取决于用户交互，某些要求。一个很好的例子是 ASP.Net Web 表单向导控件——“步骤”不等同于不同的 url。就像上面一样，实际处理可以在同一个 Web 应用程序或完全独立的 Web 应用程序（Web 服务）中完成 - 因此您可以考虑让“前端”网站与任何处理 Web 应用程序完全分离（仅前者的网址是公开的）。

*   与 ASP.Net MVC 相同 - 您的控制器管理您想要呈现的任何视图，给定一些交互和/或请求限制（例如，仅限 HttpPost）。

尽管如此，如果不添加更多内容，以上所有内容都不能通过“不可重复”测试 - 例如 RECAPTCHA，此时您应该问自己它是否适合所有用户。在某些时候，如果它不意味着“公开”，那么身份验证就是答案。

嗯...

* * *

更新：

嗯-谁知道为什么人们投票反对并且无话可说:)

无论如何，必须更好地了解真正受到保护的*内容。*如果必须隐藏 URI，那么 2 层结构 - (1) 前端，(2) 后端是我个人的选择。这可能意味着 Web 服务架构。

如果我对此想得太多，并且它与 url 中的一些“机密”名称（不是真正的进程）有关，那么 DNS 可能是一个简单的解决方案（CNAME）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T12:42:56.547

Server.Transfer 是您维护相同 url 的最佳方式，但在您的情况下，这不是一个选项。另一种方法是在主页中加载动态用户控件。

使用动态用户控制，您可以控制要在页面中显示的内容，但我认为这是一个突破性的解决方案。网址重写和路由，您将拥有不同的网址，您不会维护相同的网址。考虑到您想从 url 输入页面。在 .net 路由中，url 必须是唯一的，禁止使用相同 url 的两条路由。

如果您想修改现在实施的内容，最好的解决方案是 url 重写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-19T11:47:50.657

您可以使用 ASP.NET 3.5 版本中提供的 Webforms 和 MVC 路由功能

这里有一些例子：

```
 Void RegisterRoutes(RouteCollection routes)
    {
          Routes.MapPageRoute(
                          “product-browse”,      // route name
                          “products/{category}”, // URL with params
                          “~/Products.apsx”      // Web forms page to handle it
                             );
    }

    Void Application_Start()
    {
        Registerroutes(RouteTable.Routes);
        RouteTable.Routes.MapPageRoute("Product", "Product/{Name}", "~/Product.aspx"
        // or simply
        routes.MapPageRoute("Customers", "Customers", "~/Customers.aspx");
        routes.MapPageRoute("CustomerDetails", "Customers/{CustomerId}", "~/CustomerDetails.aspx");

    }

// here how you can get url
string url =  Page.GetRouteUrl(“product-browse”, new { category = “software”});
string name = Page.RouteData.Values["name"].ToString();

// This some webform aspx syntax of use:
<asp:HyperLink ID="hyper" runat="server"NavigateUrl='<%# "Product/laptop"%>'  Text='<%# Bind("ProdctName") %>' ></asp:HyperLink>

<img src="<%= Page.ResolveUrl("Styles/Images/Product.jpg") %>" height="65px" width="65px" />

 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField DataField="Id" HeaderText="Id" ItemStyle-Width="30" />
        <asp:BoundField DataField="Name" HeaderText="Name" ItemStyle-Width="150" />
        <asp:BoundField DataField="Country" HeaderText="Country" ItemStyle-Width="150" />
        <asp:HyperLinkField Text = "View" DataNavigateUrlFormatString = "~/Customers/{0}" DataNavigateUrlFields = "Id" />
    </Columns>
    </asp:GridView> 
```

不要使用 UrlRewriter.NET 。这是旧技术。MVC 也更喜欢路由 4.0

# .net - 如何将构建参数传递给我的 .NET 单元测试

> ID：10601116
> 
> 赞同：3
> 
> 时间：2012-05-15T12:54:37.447
> 
> 标签：.net, variables, tfs, build

我需要将自定义构建设置传递给单元测试。我知道我可以在代码中使用 System.EnvironmentVariable。我想知道如何将参数添加到 TFS 构建定义中，并将其作为代码中的 env 参数读取。它必须由我们的发布工程师在构建定义中指定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:15:12.003

听起来您想使用[预处理器指令](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)有条件地执行某些代码。

```
[TestMethod]
public void MyTestMethod () 
{
    bool buildArgumentIsSet = false;

    #if MY_BUILD_ARGUMENT
        buildArgumentIsSet = true
    #endif

    Assert.IsFalse(
        buildArgumentIsSet, 
        "The evil release engineer set the build argument.");        
} 
```

[然后，您的发布工程师可以使用/define](http://msdn.microsoft.com/en-us/library/0feaad6z.aspx)参数进行编译，例如

```
/define:MY_BUILD_ARGUMENT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:02:19.227

为什么不把它放在 app.config 中并使用`ConfigurationManager`它来阅读呢？

# javascript - 未定义的错误访问 Android 相机

> ID：10601119
> 
> 赞同：0
> 
> 时间：2012-05-15T12:54:40.653
> 
> 标签：javascript, android, cordova

我正在尝试让我的应用程序用相机拍照，然后将此代码显示给用户。我试图完美地遵循 phonegap api，但是当我在 phonegap 示例中使用我的代码并更改时它们不起作用phonegap 示例使用的函数名称并运行示例脚本，它工作得很好。我正在使用的代码是

```
function gotoPicture() {

    if (/Android/.test(navigator.userAgent)) {
        try {
            alert("test2");
            navigator.camera.getPicture(setImage,onError,{sourceType: Camera.PictureSourceType.CAMERA, destinationType: Camera.DestinationType.DATA_URL,quality:60});
        } //try
        catch (e) {
            alert("onerror")
            alert(e.Message);//test
        } //catch
    } //if
    else {
        $.mobile.changePage('#expense-page-picture');
    } //else
} //gotoPicture 
```

setImage和onError代码如下

```
function onError(error) {
    alert("test1")
    navigator.notification.alert(error, null, "Error");
}

function setImage(imageData) {
    alert("test3")
    artificialReceipt = imageData;
    /* document.getElementById('expense-form-picture').src = 'data:image/jpg;base64,' + artificialReceipt; */
   document.getElementById('expense-form-picture').src = artificialReceipt;     // with cordova 1.5.0, it seems that imageData is a file location
    $.mobile.changePage('#expense-page-picture');
} 
```

我收到了捕获中的 onerror 警报我从未收到 test1 警报我还将尝试添加 onDeviceReady 并查看是否有所不同

```
document.addEventListener("deviceready",onDeviceReady,false);
function onDeviceReady()
{
    alert("i am ready");
} 
```

从来没有得到我准备好的警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:08:24.523

首先，您确定在 deviceready 事件之后使用您的功能吗？

```
document.addEventListener("deviceready",onDeviceReady,false); 
```

那么，我们能看到setImage函数和onError吗？我们能得到回应吗？在 setImage 中，您应该有一个 image 参数和 onError，一条消息：

```
function setImage(image) {
    console.log(image);
}

function onError(message) {
    console.log('error:' + message);
} 
```

另外，您是否收到“onerror”警报？

# asp.net - Asp.net 和 ext.net 库：如何在密钥返回时触发事件？

> ID：10601122
> 
> 赞同：1
> 
> 时间：2012-05-15T12:55:00.177
> 
> 标签：asp.net, extjs, ext.net

我正在使用带有 Ext.net 组件的 Asp.net。我想知道当用户按回车键进入文本框时是否可以触发事件。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:04:50.570

好的，我自己发现：从 asp.net 2.0 开始，面板和表单控件具有**DefaultButton**接受按钮的控件名称。

# django - 如何将数据传递给 Django 中的模板？

> ID：10601126
> 
> 赞同：12
> 
> 时间：2012-05-15T12:55:11.377
> 
> 标签：django, templates, view, parameters

在下面的模板中，我试图获取法院的名称（通过“机构”字段捕获）。我正在通过avail_times 函数传递“club_id”，但是如何传递通过模板传递的“建立”字段？

该模型：

```
class Club(models.Model):
    establishment = models.CharField(max_length=200)
    address = models.CharField(max_length=200)
    def __unicode__(self):
        return self.establishment

class Available(models.Model):
    club = models.ForeignKey(Club)
    court = models.CharField(max_length=200)
    avail_time = models.DateTimeField('available time')
    def __unicode__(self):
        return self.court 
```

功能：

```
def avail_times(request, club_id):
courts = Available.objects.filter(club__id=club_id)
return render_to_response('reserve/templates/avail_times.html', {'courts': courts}) 
```

模板：

```
 <h1>All available courts for {{ court.club }}</h1>
<ul>
{% for court in courts %}
    <li>{{ court }}</li>
{% endfor %}
</ul> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-15T13:01:50.797

```
def avail_times(request, club_id):
  courts = Available.objects.filter(club__id=club_id)      
  if courts.count() > 0:
    club_name = courts[0].club.establishment
  else:
    # no results found for this club id!

# perhaps it is better to check explicity if the club exists before going further, 
# eg. Club.objects.get(pk=club_id)
# is club_id passed in as a string? I haven't used django in awhile somethign 
# worth looking into?

return render_to_response('reserve/templates/avail_times.html', {'courts': courts, 'club_name': club_name})

<h1>All available courts for {{ club_name }}</h1>
<ul>
  {% for court in courts %}
    <li>{{ court.club.establishment }}</li>
  {% endfor %}
</ul> 
```

您使用点表示法跨越外键关系。您必须“通过”外键才能访问`Club`模型。这是通过访问`club`属性来完成的。所以另外假设您想同时访问机构名称和地址，您也可以添加`<li>{{ court.club.address }}</li>`以显示地址。

不过要小心，您可以使用 django 调试工具栏查看正在执行的查询数量。如果您有很多球场，您可能会注意到性能下降。只是要记住的事情。

Courts 是一个查询集对象。您正在尝试访问`court.club`不存在的属性，因为您可能已经注意到 django 在发生这种情况时会默默地失败。有几种获取俱乐部名称的方法。

您可能想对您的架构提出一些想法。俱乐部可以有多个球场吗？如果不是，那么`.get`按照 Zahir 的建议使用“更好”。如果它可以有多个法院，那么您应该研究多对多关系以更好地反映这一点。

# c# - 如何在 Visual Studio 2010 中提升 XAML 设计器？

> ID：10601127
> 
> 赞同：7
> 
> 时间：2012-05-15T12:55:12.167
> 
> 标签：c#, .net, wpf, visual-studio-2010, xaml

当我使用 XAML 设计器时，进入和退出设计器是如此困难和缓慢，当我这样做时，Visual Studio 卡住了一段时间，有没有办法提升 XAML 设计器和编辑器？

Ant 保存 XAML 文件时非常慢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:11:20.853

这通常意味着您可能拥有复杂的 UI，也许是时候将其分解为更小的组件了？

我通常默认关闭显示 XAML 视图： `Tools > Options > TextEditor > XAML > Misc`

*   选中始终在 XAML 视图中打开文档
*   并取消选中自动填充工具箱项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T07:14:27.477

我认为当您保存 XAML 文件时 VS2010 中的问题存在与 XAML 类生成的部分类相同的名称。

如您所知，我们可以通过单击 InitializeComponents() 轻松查看此类。但 Expression Blend 不会立即生成这些 Class.gs.. 文件。

我希望在 Visual Studio 的更高版本中这些将得到修复。

在 Android 开发平台 Eclipse 中类似，有一个“R.class”包含所有可视元素 ID。当您保存任何 xml 布局文件时，此类会得到更新。

我认为这些新的开发方法对开发人员有一些不好的影响。必须有诸如 Ctrl+G+Save 之类的选项？保存并生成:)

如果您更改任何 XAML 并且在单击另一个 XAML 或 CS（无论如何都未聚焦）时未保存，则此缓慢行为仍然存在。

除此之外，如果您只是保存 UI 而不生成 ， dev.environment 无法通知您现有的错误和警告。

最后它从开发人员那里偷走了太多时间。,

需要解决。

*我正准备问这个问题，我在这里看到了。谢谢你的提问。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:50:53.423

您还可以使用带有 xaml 的通用文本编辑器，大大提高了性能，但您会丢失所见即所得的窗口。

要使用通用打开，只需右键单击 xaml 文件 -> 打开方式 -> 源代码（文本）编辑器，如果您愿意，可以将其设为默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:06:22.783

Visual Studio 2010 中的 XAML 编辑器（虽然比以前更好）仍然存在性能问题。如果可用，我建议在开发过程中同时使用[Expression Blend](http://www.microsoft.com/expression/products/Blend_Overview.aspx)和 Visual Studio。它们集成得很好，Blend 用于处理 XAML。您也可以尝试[Kaxaml](http://kaxaml.com/)，这在某些情况下很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-09T13:17:57.703

使用简单的编辑器进行大量修改，然后切换回 Visual Studio。如有必要，编译并修复您的代码。

我使用记事本++，您可以从上下文菜单中选择“打开方式...”条目，然后将其添加到应用程序列表中。

当我不得不修改现有的大文件时，此提示效果很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T13:08:46.793

购买 SSD（固态硬盘），将您的源代码和操作系统放在上面，然后使用 XAML！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-15T22:55:37.647

在解决方案资源管理器中右键单击 Xaml 文件并选择 XML（文本）编辑器 - 然后单击设置为默认值。

显然，我不再获得 UI 预览，但您仍然可以在 xml 编辑器中获得自动完成功能，这在性能上是天壤之别。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-15T05:32:16.643

经过几个月的性能问题..清除您的临时目录。我的已经膨胀到 100GB 和 10 的数千个文件。除非你勤奋，否则这个目录可能有一段时间没有被清理过：

%LOCALAPPDATA%\Temp

IE。

C:\Users{当前用户}\AppData\Local\Temp

WPF XAML 编辑器按现在应有的方式执行。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-16T14:39:45.773

请参阅：[http ://connect.microsoft.com/VisualStudio/feedback/details/521394/xaml-editor-causes-hang-freeze-of-visual-studio-2010](http://connect.microsoft.com/VisualStudio/feedback/details/521394/xaml-editor-causes-hang-freeze-of-visual-studio-2010)

禁用硬件加速为我解决了这个问题。

更新：

上面的链接已损坏...您可以尝试这篇文章[http://www.japf.fr/2011/03/visual-studio-2010-and-hw-acceleration-on-windows-xp/](http://www.japf.fr/2011/03/visual-studio-2010-and-hw-acceleration-on-windows-xp/)

# iphone - UITableView/UIScrollView 滚动优化/性能

> ID：10601128
> 
> 赞同：0
> 
> 时间：2012-05-15T12:55:13.727
> 
> 标签：iphone, ios, uitableview, uiscrollview

我正在开发一个 iPad 应用程序，在该应用程序上我有一个非常大的 UITableView（大约 10 倍的屏幕宽度和高度），并且在它之上还有一个 UIScrollView，我可以水平滚动。

在每个 UITableViewCell 中，我添加了不同数量的 UIView。我的问题是滚动性能真的很差。所以我在谷歌上搜索了一个解决方案，但没有找到适合我的问题的任何东西。

我认为问题是当滚动完成时整个屏幕被重绘，但我不知道如何限制这个......

任何人都可以提供解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:10:32.877

你需要做 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"]; 恢复细胞。如果你还没有，你应该做的是：

在你的

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

方法，你需要：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"] autorelease];
} 
```

从 Apple 的文档中查看[这一点。](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:01:16.213

您将需要保持单元格的可重用性，并且只加载可见区域所需的视图。就像我们对图像进行延迟加载一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:02:22.597

提高性能的简单关键是不要在`cellForRowAtIndexpath`.

您可以使用许多技巧来提高性能。例如，在后台线程中加载您的视图。

这篇[SO 帖子](https://stackoverflow.com/questions/1352479/tricks-for-improving-iphone-uitableview-scrolling-performance)描述了各种技巧。

# c# - Raven DB：这个 multi-map/reduce 索引有什么问题？

> ID：10601129
> 
> 赞同：4
> 
> 时间：2012-05-15T12:55:13.733
> 
> 标签：c#, mapreduce, ravendb

我有一个应用程序来跟踪网站的页面访问。这是我的模型：

```
public class VisitSession {
    public string SessionId { get; set; }
    public DateTime StartTime { get; set; }
    public string UniqueVisitorId { get; set; }
    public IList<PageVisit> PageVisits { get; set; }
} 
```

当访问者访问网站时，访问会话开始。一次访问会话有许多页面访问。当访问者第一次访问该网站时，跟踪器将写入一个 UniqueVisitorId (GUID) cookie。因此，我们能够知道访问者是否是回访者。

现在我想写一个视图来显示每天的 TotalVisitSessions、TotalPageVisits、TotalUniqueVisitors。所以我写了这个多图减少：

```
public class VisitSummaryByDateIndex : AbstractMultiMapIndexCreationTask<VisitSummaryByDate>
{
    public VisitSummaryByDateIndex()
    {
        AddMap<VisitSession>(sessions => from s in sessions
                                            select new VisitSummaryByDate
                                            {
                                                Date = s.StartTime.Date,
                                                TotalVisitSessions = 1,
                                                TotalPageVisits = 0,
                                                TotalNewVisitors = s.IsNewVisit ? 1 : 0,
                                                TotalUniqueVisitors = 0,
                                                UniqueVisitorId = s.UniqueVisitorId
                                            });

        AddMap<PageVisit>(visits => from v in visits
                                    select new VisitSummaryByDate
                                    {
                                        Date = v.VisitTime.Date,
                                        TotalVisitSessions = 0,
                                        TotalPageVisits = 1,
                                        TotalNewVisitors = 0,
                                        TotalUniqueVisitors = 0,
                                        UniqueVisitorId = String.Empty
                                    });

        Reduce = results => from result in results
                            group result by result.Date into g
                            select new VisitSummaryByDate
                            {
                                Date = g.Key,
                                TotalVisitSessions = g.Sum(it => it.TotalVisitSessions),
                                TotalPageVisits = g.Sum(it => it.TotalPageVisits),
                                TotalNewVisitors = g.Sum(it => it.TotalNewVisitors),
                                TotalUniqueVisitors = g.Select(it => it.UniqueVisitorId).Where(it => it.Length > 0).Distinct().Count(),
                                UniqueVisitorId = String.Empty
                            };
    }
} 
```

问题出在“TotalUniqueVisitors”计算中，有时索引结果的TotalUniqueVisitors是1，有时是2。但是我查了数据，绝对不会这么少。我的 Map/Reduce 语法有问题吗？

**相关文章：** [Raven DB：如何按日期创建“UniqueVisitorCount”索引](https://stackoverflow.com/questions/10597359/raven-db-how-to-create-uniquevisitorcount-by-date-index)

**可以在此处找到带有示例数据的代码：** [https ://gist.github.com/2702071](https://gist.github.com/2702071)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:45:13.080

正确的索引是：

```
public class VisitSummaryByDateIndex : AbstractMultiMapIndexCreationTask<VisitSummaryByDate>
{
    public VisitSummaryByDateIndex()
    {
        AddMap<VisitSession>(sessions => from s in sessions
                                         select new VisitSummaryByDate
                                         {
                                             Date = s.StartTime.Date,
                                             TotalVisitSessions = 1,
                                             TotalPageVisits = 0,
                                             TotalNewVisitors = s.IsNewVisit ? 1 : 0,
                                             TotalUniqueVisitors = 0,
                                             UniqueVisitorId = s.UniqueVisitorId
                                         });

        AddMap<PageVisit>(visits => from v in visits
                                    select new VisitSummaryByDate
                                    {
                                        Date = v.VisitTime.Date,
                                        TotalVisitSessions = 0,
                                        TotalPageVisits = 1,
                                        TotalNewVisitors = 0,
                                        TotalUniqueVisitors = 0,
                                        UniqueVisitorId = string.Empty,
                                    });

        Reduce = results => from result in results
                            group result by result.Date into g
                            select new VisitSummaryByDate
                            {
                                Date = g.Key,
                                TotalVisitSessions = g.Sum(it => it.TotalVisitSessions),
                                TotalPageVisits = g.Sum(it => it.TotalPageVisits),
                                TotalNewVisitors = g.Sum(it => it.TotalNewVisitors),
                                TotalUniqueVisitors = g.Select(it => it.UniqueVisitorId).Where(x => x.Length > 0).Distinct().Count(),
                                UniqueVisitorId = g.FirstOrDefault().UniqueVisitorId,
                            };
    }
} 
```

不同的是在reduce中设置了UniqueVisitorId。我不能 100% 确定为什么还需要这样做，我必须承认。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:55:40.753

Reduce 实际上是在结果上多次处理的。您的索引假定这只发生一次，并且可以访问整个结果集。

您的索引需要如下所示：

```
public class VisitSummaryByDateIndex : AbstractMultiMapIndexCreationTask<VisitSummaryByDate>
{
    public VisitSummaryByDateIndex()
    {
        AddMap<VisitSession>(sessions => from s in sessions
                                         select new VisitSummaryByDate
                                         {
                                             Date = s.StartTime.Date,
                                             TotalVisitSessions = 1,
                                             TotalPageVisits = 0,
                                             TotalNewVisitors = s.IsNewVisit ? 1 : 0,
                                             TotalUniqueVisitors = 1,
                                             UniqueVisitorId = new[]{s.UniqueVisitorId}
                                         });

        AddMap<PageVisit>(visits => from v in visits
                                    select new VisitSummaryByDate
                                    {
                                        Date = v.VisitTime.Date,
                                        TotalVisitSessions = 0,
                                        TotalPageVisits = 1,
                                        TotalNewVisitors = 0,
                                        TotalUniqueVisitors = 0,
                                        UniqueVisitorId = new string[0]
                                    });

        Reduce = results => from result in results
                            group result by result.Date into g
                            select new VisitSummaryByDate
                            {
                                Date = g.Key,
                                TotalVisitSessions = g.Sum(it => it.TotalVisitSessions),
                                TotalPageVisits = g.Sum(it => it.TotalPageVisits),
                                TotalNewVisitors = g.Sum(it => it.TotalNewVisitors),
                                TotalUniqueVisitors = g.Sum(it => it.TotalUniqueVisitors),,
                                UniqueVisitorId =  g.Select(x=>x.UniqueVisitorId).Distinct()
                             };
    }
} 
```

# vba - EXCEL VBA复制单元格+循环+定界

> ID：10601134
> 
> 赞同：0
> 
> 时间：2012-05-15T12:55:35.073
> 
> 标签：vba, excel

我有 appx 3000 行，我希望有一个准备就绪的单元格作为最终结果。

**1）**复制和

**2)**循环

循环由 6 个单元组成。D2 和 D3，F2 到 D4，F3 到 D5 和 G2 到 D6，G3 到 D7。

我对从第一个循环开始的单元格的相对定位有问题。

**3)**划界

如何用固定宽度定界？我发现了许多所谓的说明，但没有示例案例。

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:57:12.600

您可以使用

```
Sub LoopRange()
'officevb.com
Dim rgArray As Variant
Dim rg As Range
Dim i As integer

'if your range not mutable use
rgArray = Array("D2:D3", "D4:F2", "D5:F3", "D6:G2", "D7:G3")

For i = LBound(rgArray) To UBound(rgArray)
    For Each rg In Sheets(1).Range(rgArray(i))
        Debug.Print rg.Address
    Next rg
Next i

End Sub 
```

# android - 短信广播接收器 - 如何在默认消息应用程序读取短信之前阻止/删除短信

> ID：10601135
> 
> 赞同：4
> 
> 时间：2012-05-15T12:55:35.710
> 
> 标签：android, sms, broadcastreceiver

我的目标是制作一个应用程序来存储短信中包含的某些单词，并阻止它到达默认的消息应用程序。我意识到我需要在我的应用程序中放置短信的广播接收器，但是如何确保如果消息包含关键字，则消息会立即被删除并且任何其他消息传递应用程序都无法访问？我被困在这里，所以任何帮助表示赞赏。谢谢

问候，

法尔汉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:03:27.957

请参阅[如何以编程方式从 Android 的收件箱中删除短信？](https://stackoverflow.com/questions/419184/how-to-delete-an-sms-from-the-inbox-in-android-programmatically)我们可以在 Android中[的 SMS 到达收件箱之前删除它吗？](https://stackoverflow.com/questions/1741628/can-we-delete-an-sms-in-android-before-it-reaches-the-inbox/2566199#2566199). 在删除之前，应用逻辑在邮件中搜索您的关键字，然后仅删除那些特定邮件。

# c++ - 尝试处理类的向量成员时程序崩溃

> ID：10601139
> 
> 赞同：0
> 
> 时间：2012-05-15T12:55:46.207
> 
> 标签：c++, crash

你好，我尝试了我能想到的一切来修复崩溃......但没有得到任何东西。所以我会尝试粘贴程序的主要组件，所以也许有人可以帮助解决这个问题……程序编译没有错误，但它崩溃了。如果我运行该程序，请先选择“1”而不是输入输入...当它分开时，它就会`save`崩溃。代码的某些部分被注释掉了，因为我试图找到崩溃的根源。如果我忘记了什么或者您需要其他详细信息，请向 SORRY 索取长代码。主要功能及应用类：

```
#include "Catalog.h"
#include "UIconsole.h"
#include "StudentRepository.h"
#include "StudentValidator.h"

using namespace std;

class Application{
private:
    StudentRepository *stre;
    StudentValidator *stvl;
    Catalog *cat;
    UIconsole *ui;    
public:
    Application();
    ~Application();
    void run();
};    
int main(){
    Application app;
    app.run();
    return 0;
}    
Application::Application(){
    StudentRepository stre();
    StudentValidator stvl();
    Catalog cat();
    UIconsole ui();
}    
Application::~Application(){
}
void Application::run(){
    ui->runUI();
} 
```

UIconsole.h（选择输入）：

```
class UIconsole{
public:
    UIconsole(Catalog *catalog):catalog(catalog){};
    void runUI();

private:
    Catalog *catalog;

    void showMenu();
    int getOption();

    void addStudent(); 
```

UIconsole.cpp

```
int inp;
do{
    showMenu();
    inp = getOption();
    switch(inp){
    case 0: break;
    case 1: addStudent();break;
    }while(inp != 0);
}

void UIconsole::addStudent(){
    string name;
    int id,gr;
    cout<<"Name: ";
    cin>>name;
    cout<<"ID: ";
    cin>>id; cout<<endl;
    cout<<"Group: ";
    cin>>gr; cout<<endl;

    catalog->addNewStudent(name,id,gr);
//  try {
//      catalog->addNewStudent(n,id,gr);
//      cout<<"Student has been added!"<<endl;
//  } catch (Exception &ex) {
//      cout<<"Student HASN'T been added"<<ex.getMsg()<<endl;
//  }

} 
```

目录.cpp：

```
void Catalog::addNewStudent(string name, int id, int gr){
Student st(name, id,gr);
//StudentValidator.
studRepo.save(st); 
```

}

学生回购.cpp：

```
void StudentRepository::save(Student A){
    string B;
    int check;
    B = A.getName();
//  check = findByName(B);
//
//  if(check != 0){
        students.push_back(Student(A));
//  }
//  else{
//      throw RepoException("Name already exist in the database!");
//  }
} 
```

学生报告.h

```
class StudentRepository{
private:
    vector <Student> students;
public:
    vector <Student> getAll();
    void save(Student);
    void edit(Student);
    void delByName(string);
    void searchById();

    int findByName(string name);

    ~StudentRepository();

}; 
```

痕迹：

```
 Dr. Memory version 1.4.6 build 2 built on Mar  7 2012 10:14:04
Application cmdline: ""D:\c++\Begin\L_6-8\Debug\L_6-8.exe""
Recorded 62 suppression(s) from default C:\Program Files (x86)\Dr. Memory/bin/suppress-default.txt

Error #1: UNINITIALIZED READ: reading register eax
# 0 _fu36___ZSt4cout                 [D:\c++\Begin\L_6-8\Debug/../UIconsole.cpp:90]
# 1 UIconsole::runUI()               [D:\c++\Begin\L_6-8\Debug/../UIconsole.cpp:19]
# 2 Application::run()               [D:\c++\Begin\L_6-8\Debug/../App.cpp:43]
# 3 main                             [D:\c++\Begin\L_6-8\Debug/../App.cpp:27]
Note: @0:00:10.842 in thread 5436
Note: instruction: mov    (%eax) -> %eax

Error #2: UNADDRESSABLE ACCESS: reading 0x00000004-0x00000008 4 byte(s)
# 0 std::vector<>::push_back()               [c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/bits/stl_vector.h:828]
# 1 StudentRepository::save()                [D:\c++\Begin\L_6-8\Debug/../StudentRepository.cpp:27]
# 2 Catalog::addNewStudent()                 [D:\c++\Begin\L_6-8\Debug/../Catalog.cpp:7]
# 3 _fu36___ZSt4cout                         [D:\c++\Begin\L_6-8\Debug/../UIconsole.cpp:90]
# 4 UIconsole::runUI()                       [D:\c++\Begin\L_6-8\Debug/../UIconsole.cpp:19]
# 5 Application::run()                       [D:\c++\Begin\L_6-8\Debug/../App.cpp:43]
# 6 main                                     [D:\c++\Begin\L_6-8\Debug/../App.cpp:27]
Note: @0:00:10.853 in thread 5436
Note: instruction: mov    0x04(%eax) -> %edx

Error #3: LEAK 21 direct bytes 0x006ff488-0x006ff49d + 0 indirect bytes
# 0 libstdc++-6.dll!Znwj           
# 1 libstdc++-6.dll!ZNSs7reserveEj 
# 2 libstdc++-6.dll!ZStrsIcSt11char_traitsIcESaIcEERSt13basic_istreamIT_T0_ES7_RSbIS4_S5_T1_E
# 3 _fu2___ZSt3cin                                                             [D:\c++\Begin\L_6-8\Debug/../UIconsole.cpp:81]
# 4 UIconsole::runUI()                                                         [D:\c++\Begin\L_6-8\Debug/../UIconsole.cpp:19]
# 5 Application::run()                                                         [D:\c++\Begin\L_6-8\Debug/../App.cpp:43]
# 6 main                                                                       [D:\c++\Begin\L_6-8\Debug/../App.cpp:27]

DUPLICATE ERROR COUNTS:

SUPPRESSIONS USED:

ERRORS FOUND:
      1 unique,     1 total unaddressable access(es)
      1 unique,     1 total uninitialized access(es)
      0 unique,     0 total invalid heap argument(s)
      0 unique,     0 total warning(s)
      1 unique,     1 total,     21 byte(s) of leak(s)
      0 unique,     0 total,      0 byte(s) of possible leak(s)
ERRORS IGNORED:
     84 still-reachable allocation(s)
         (re-run with "-show_reachable" for details)
Details: C:\Users\Warzaru\AppData\Roaming/Dr. Memory/DrMemory-L_6-8.exe.8092.000/results.txt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:00:44.290

第一个要注意的问题是 Application 构造函数。Application 类使用指针作为其成员，但您没有为这些指针分配数据。您想将 Application 构造函数的主体替换为：

[成员] = 新 [成员类型]；

这也可能会解决您的崩溃问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:08:40.060

你混淆了内存模型。

你原来的版本有两个问题

*   指针值**未定义**。不像java 中那样为**空。**调试器可能会显示为**null**，但发布版本将**未定义**指针
*   构造函数将对象创建为自动变量并在离开时销毁它们。那肯定不是你想要的。

``

```
Application::Application(){
  StudentRepository stre();
  StudentValidator stvl();
  Catalog cat();
  UIconsole ui();
} 
```

当你想使用指针时，使用这种方法

```
class Application{
private:
    StudentRepository *stre;
    StudentValidator *stvl;
    Catalog *cat;
    UIconsole *ui;    
public:
    Application();
    ~Application();
    void run();
};    

Application::Application(){
    stre = new StudentRepository();
    stvl = new StudentValidator ();
    cat = new Catalog();
    ui = new UIconsole ();
}    

Application::~Application(){
    delete stre;
    delete stvl;
    delete cat;
    delete ui;
} 
```

或者只是将对象添加为成员。内部访问从“->”切换到“.”

```
class Application{
private:
    StudentRepository stre;
    StudentValidator stvl;
    Catalog cat;
    UIconsole ui;    
public:
    // Application(); // no more necessary for this limited case
    // ~Application(); // no more necessary for this limited case
    void run();
}; 
```

# android - 如何启动/停止 Runnable/Handler？

> ID：10601145
> 
> 赞同：6
> 
> 时间：2012-05-15T12:56:09.350
> 
> 标签：android, handler, runnable

我正在尝试在 Web 服务和 Android 应用程序之间保持数据库同步。下面的代码正在运行，但我遇到了一些问题：

*   每次我进入 App 的主页时，都会启动一个新的无限进程。
*   过程永无止境

谁能解释我希望如何开始和停止这个过程？
我希望此过程每 5 分钟运行一次，但仅在应用打开时运行一次。

```
public void onCreate(Bundle savedInstanceState) {   
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Handler handler = new Handler();
    final Runnable r = new Runnable() {
        public void run() {
            // DO WORK
            Mantenimiento();
            // Call function.
            handler.postDelayed(this, 1000000);
        }
    };
    r.run();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:01:10.610

要么使用 TimerTask：

[http://thedevelopersinfo.wordpress.com/2009/10/18/scheduling-a-timer-task-to-run-repeatedly/](http://thedevelopersinfo.wordpress.com/2009/10/18/scheduling-a-timer-task-to-run-repeatedly/) http://android.okhelp.cz/timer-simple-timertask-java-android-例子/

或者

可以采用布尔值并在布尔值为真时运行循环，并使其他线程进入睡眠状态，而离开应用程序则使布尔值为假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-02T12:41:01.457

每 5 分钟？你甚至知道是`handler.postDelayed(this, 1000000);`做什么的吗？它每 16.7 分钟启动一次可运行文件。找出如何将分钟转换为毫秒并不难。

`handler.removeCallbacks()``postDelayed()`并且已经提到了您之前要检查的布尔变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:07:54.970

将使用此代码：

```
public void onCreate(Bundle savedInstanceState) {   
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Handler handler = new Handler();
    final Thread r = new Thread() {
        public void run() {
            // DO WORK
            Mantenimiento();
            // Call function.
            handler.postDelayed(this, 1000000);
        }
    };
    r.start(); // THIS IS DIFFERENT
} 
```

# c# - C#方法作为参数

> ID：10601146
> 
> 赞同：0
> 
> 时间：2012-05-15T12:56:13.187
> 
> 标签：c#

有没有办法在事先不知道方法的情况下将方法作为参数传递？

可以`Func<input, return>`在不知道方法的参数/返回类型的情况下调用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T12:59:23.247

您可以使用的最接近的方法是`Delegate`调用者需要选择正确的委托类型。这正是`Control.Invoke`使用`Delegate`而不是特定委托类型的原因。

或者，`MethodInfo`正如 HackedByChinese 所建议的那样。您应该使用哪一个取决于您要达到的目标 - 每个在不同的情况下都很有用。如果您试图描述*一种方法*，那么`MethodInfo`可能是最好的方法。如果您试图表示*某种可调用操作*（可以接受参数并具有返回值），那么委托可能更有用。

如果您告诉我们更多关于您想要实现的目标，我们可能会为您提供更多帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T12:59:06.923

听起来通过反射调用方法将是您感兴趣的。

请参阅[MethodInfo](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T13:11:36.183

似乎您可能在这里过度工程。您应该正确查看代码中的周围基础设施，并尝试对其进行重构。

但如果你真的需要，你可以用泛型来做。现在，我不推荐这个——但是这个函数你可以用任何东西调用，你必须定义 Y 和 T 以及调用时间。

```
 public virtual Y MyWrapperFunction<T,Y>(Func<T,Y> func, T param)
    {
        return func(param);
    } 
```

但请注意——泛型会给你带来各种不同的问题；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T12:59:30.143

您需要使用委托来执行此操作。Stackoverflow 上有几篇文章涵盖了这一点。

我建议[这个](https://stackoverflow.com/questions/2082615/pass-method-as-parameter-using-c-sharp)，特别是 Jon Skeet 的回答

# php - 复选框 onclick 事件处理程序和显示/隐藏功能

> ID：10601147
> 
> 赞同：0
> 
> 时间：2012-05-15T12:56:14.950
> 
> 标签：php, javascript, checkbox, event-handling

所以我正在尝试制作动态复选框，单击时将显示/隐藏某些内容。我有这个但不能让它正常工作：

```
<html> 
<head> 
    <title>Checkbox Event Handler</title> 
    <style type="text/css"> 
        #myGroup {visibility:hidden} 
    </style> 
    <script type="text/javascript"> 
        function toggle(chkbox, group) { 
            var visSetting = (chkbox.checked) ? "visible" : "hidden"; 
            document.getElementById(group).style.visibility = visSetting; 
        } 
        function swap(radBtn, group) { 
            var modemsVisSetting = (group == "modems") ? ((radBtn.checked) ? "" : "none") : "none"; 
            document.getElementById("modems").style.display = modemsVisSetting; 
        } 
    </script>
    <?php require_once("/var/www/html/exercise/Task/functions.php"); ?>
</head> 
<body> 
    <?php
        $seqA[]="AAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBB";
        $seqA[]="BBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCDDDDDDDDDD0";
        $seqA[]="CCCCCCCCCCCCCCCCCCCCCCCCCCDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD";
    ?>
    <form>
    <?php
        $i=o;
        foreach($seqA as $seq){
    ?>
            <input type="checkbox" name="monitor"onclick="toggle(this, 'myGroup')" />show results
            <span id="myGroup">
     <?php
            $score=rawtransform(950);
            $truecol= getcolor($score,220);
            colorSequence($seq,5/*hit*/,$truecol,4);
        }
      ?>
            </span>
    </form>
</body>
</html> 
```

它正常打开 $seqA 中的第一个字符串并且工作正常但是第二个复选框在第一个字符串中？我确定我做了一些非常愚蠢的事情，但我对编程很陌生。有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:58:32.827

我看到的问题是，在每次`foreach`循环迭代中，您都添加`span`了具有相同`id`属性的元素。设置唯一的 ID，将您的 JavaScript`toggle`函数更改为指定的地址`span`，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:58:47.593

我对 PHP 不是很熟悉，但似乎您生成`span`了多个具有相同 ID 的元素，这会导致`document.getElementById`以不可预知的方式行事。

# linux - 如何在linux中创建并进入目录？

> ID：10601167
> 
> 赞同：-1
> 
> 时间：2012-05-15T12:57:57.830
> 
> 标签：linux, sh

如何在 GNU/Linux 中创建和输入目录？

```
mkdir Pics | cd Pics 
```

给出：

```
bash: cd: Pics: No such file or directory 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T12:59:51.260

您需要`;`在命令之间使用。所以

```
mkdir Pics; cd Pics 
```

你写的东西叫做管道。这意味着第一个程序的输出被用作另一个程序的输入，这是没有意义的，因为输出`mkdir`是空的或错误的，`cd`并且不会从输入中读取。

**顺便问一下**[超级用户](https://superuser.com/)这样的问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T13:01:22.903

管道`|`将第一个命令的输出作为输入发送到第二个命令。

你需要使用的是`;`

```
mkdir Pics; cd Pics 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T13:00:16.913

尝试以下

```
mkdir Pics; cd Pics 
```

管道字符不合适。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T13:00:19.627

要在一行中执行多个命令，请使用分号而不是管道。

`mkdir Pics ; cd Pics`

# dynamics-crm-2011 - 跨业务部门的帐户和活动的可见性

> ID：10601168
> 
> 赞同：0
> 
> 时间：2012-05-15T12:57:58.633
> 
> 标签：dynamics-crm-2011

在我们客户的 CRM 安装中，我们面临一些特殊性。首先，一张说明业务部门结构的组织结构图：

[组织结构图 http://img545.imageshack.us/img545/9153/orgchart.jpg](http://img545.imageshack.us/img545/9153/orgchart.jpg)

当 Alice 或 Bob 为 Paul、George 或 Ringo（或拥有者）创建帐户（或活动或联系人）时，John 无法看到这些实体。将 John 的访问级别设置为“*父：子业务单位*”可以解决问题，但是 John 也可以看到 Alice 和 Bob 的活动，这不是我们的客户想要的。

另一方面，我有一些似乎与上述相互矛盾的示例：由 Ringo 创建并由 Paul 拥有的帐户对 John 可见，而由 George 创建并由 George 所有的帐户对 John**不**可见.

**主要问题是**：John 是否能够看到由基础业务部门（销售代表 1/2/3）中的人创建/为他们拥有的实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:43:49.410

是的，这里假设 Alice 和 Bob 是 John 的 BU 的父级，而 John 在下面的 3 BU 的父级业务单元中。

需要修改 John 的角色以包含这些实体并反映 3/4 饼图访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:25:24.130

巴特 3/4 派是这里的答案，但如果用户位于最高业务部门，则将任务分配给其中一位销售代表；该活动无意中被转移到销售代表业务部门，而不是留在管理业务部门。这就是约翰可以看到这些活动的原因。“创建者”不应用任何安全措施，但记录所有权确实意味着业务单位。为了解决这个问题，您可以使用团队而不是业务部门来隔离数据并分配团队所有权，并将 John 添加到他应该有权访问记录的团队中。团队可以解决和超越业务部门，他们可以向授予额外访问权限的用户添加额外角色。请注意，CRM' s 安全角色模型是宽容的而不是限制性的，这意味着拥有两个角色（其中一个可以通过团队成员资格分配）将始终为用户提供更多权限，并且永远不会减少权限。因此，在较低的销售代表 BU 中添加团队并将记录分配给这些团队也会将记录移动到那些仍然允许 John 看到它们的较低 BU（当然，如果 John 具有 3/4 权限）。

希望这可以帮助，

亚历克斯

# sql - 如何自动 Shift 主键再次从 1 开始

> ID：10601179
> 
> 赞同：4
> 
> 时间：2012-05-15T12:58:44.880
> 
> 标签：sql, sql-server, database, sql-server-2008, stored-procedures

我正在使用如下创建的表：

```
CREATE TABLE [dbo].[Tag](
    [TagID] [int] IDENTITY(1,1) NOT NULL,
    [Value] [varchar](200) NOT NULL,
    [TagCount] [varchar](200) NULL,
 CONSTRAINT [PK_Tag] PRIMARY KEY CLUSTERED 
(
    [TagID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO 
```

我永远无法插入主键，它只是从最后一个自动继续。因此，如果我最后一个条目的主键是 72，那么下一个条目将是 73。

现在我的问题是当我删除一个条目时。现在说我删除了条目的 3-7，我的数据库将存储条目的 1、2、8、9 等。

是否有一个存储过程我可以在删除后运行以**自动将**我的主键**从 1 重新排序？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:14:14.300

为什么你不想这样做的快速类比：

想象一下，如果每次有人取消他们的电话服务，电话公司就会返回并重新分配每个人的号码，高于取消的号码以消除差距。这将导致所有相关人员都感到头疼。

PK 不仅应该是唯一的，而且对于该行来说应该是恒定的。更改行的标识会导致问题。

如果您想在添加新记录时填补空白，您可以使用 IDENTITY INSERT，或者从表中删除身份并在每次插入记录时生成自己的 id。

而且，如果由于某种原因您还没有进行沟通，您仍然想这样做 - RESEED 的答案是您的最佳选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T13:00:02.313

利用

```
TRUNCATE TABLE [dbo].[Tag] 
```

这将清空所有数据并重置自动值计数器。

编辑：如果你想保存旧值。创建一个临时表，将所有数据存储在那里，截断您的主表并重新插入它们。但是你为什么要这样做呢？

像这样的事情（在交易中做）：

```
CREATE TABLE [dbo].[TagTmp] (
 [Value] [varchar](200) NOT NULL,
    [TagCount] [varchar](200) NULL
)
INSERT INTO TagTmp (Value, TagCount)
SELECT Value, TagCount FROM dbo.Tag
TRUNCATE TABLE dbo.Tag
INSERT INTO Tag (Value, TagCount)
SELECT Value, TagCount FROM dbo.TagTmp
DROP TABLE TagTmp 
```

编辑2：

如果要插入具有免费“旧”自动 ID 的记录，请使用：

```
SET IDENTITY_INSERT tablename OFF
INSERT INTO tablename (TagId, Value, tagCount) VALUES (3, 'value', 1');
SET IDENTITY_INSERT tablename ON 
```

这将使您有机会插入记录，但我不建议这样做:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T13:12:19.853

你必须使用`RESEED`：

```
DBCC CHECKIDENT (table_name, RESEED); 
```

删除后在触发器中使用它。

# linux - go / geany : 配置构建命令

> ID：10601182
> 
> 赞同：3
> 
> 时间：2012-05-15T12:58:49.630
> 
> 标签：linux, build, go, geany

使用旧版本的 go，我可以将 geany 中的构建命令配置为

```
go install "%d" 
```

但似乎在 Go1 中您无法提供`go install`绝对路径。

所以我想要一个命令让我在 geany 中运行

```
go install mypackagename 
```

当我编辑的文件是

```
/some/path/to/my/project/go/src/mypackagename/editedfile.go 
```

我可以在设置中添加什么来获得它？

请考虑我是一个 linux 菜鸟，并且可能存在使用标准 shell 命令组合的简单解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:01:27.997

我会尝试类似的东西

```
cd "%d" && go install 
```

它将当前工作目录更改为 geany 提供的目录，并`go install`在目录更改成功时运行。

这仅在 geany 在 shell 中执行构建命令时才有效。没有它，就没有`cd`（shell 将其作为内置命令提供）并且此解决方案将不起作用。

你唯一的希望是，为 geany 中的构建过程配置当前工作目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T06:35:41.417

使用 nemo 的好答案，这里有一个关于如何为 golang 配置 Geany 的参考。

**编译（F8）：**

```
go build "%f" 
```

**安装 (F9) ：**

```
cd "%d" && go install 
```

**测试 ：**

```
cd "%d" && go test 
```

**运行 (F5) ：**

```
go run "%f" 
```

请注意，[此处描述](http://go-lang.cat-v.org/text-editors/geany/)了 Geany 中的基本 Go 支持（包括着色） 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T03:17:55.667

我建议一个单行多命令的东西。如： cd /path/to/root/code/dir; 去安装我的包名

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-15T13:25:19.350

```
go install import-path 
```

安装 $GOPATH/src/import-path。import-path 的最后一个元素必须与该目录中源中的包名称相对应。

# text - 如何使用批处理脚本将一个文本文件的内容附加到另一个文本文件？

> ID：10601185
> 
> 赞同：7
> 
> 时间：2012-05-15T12:58:56.867
> 
> 标签：text, batch-file

如何在 Windows 中创建一个简单的批处理脚本，它将获取一个 txt 文件的内容并将其附加到另一个文本文件的末尾

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T13:01:26.537

type 命令可用于连接文件。尝试

```
type file1.txt >> file2.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T13:44:44.137

布雷特的回答效果很好。另一种选择是

```
copy file1.txt + file2.txt /b 
```

您可以通过添加其他文件来使用此语法附加任意数量的文件。

该`/b`选项可防止`<ctrl-Z>`文件结束标记在复制后附加到文件末尾。

# firefox - Firebug 无法设置本地存储

> ID：10601189
> 
> 赞同：0
> 
> 时间：2012-05-15T12:59:10.347
> 
> 标签：firefox, firebug, local-storage

为什么 Firebug 总是将 window.localStorage 对象报告为空？如果我打开控制台并输入，

```
>>> window.localStorage.setItem('foo', 'bar')
undefined

>>> window.localStorage
0 items in Storage 
```

是否有一些安全设置阻止我使用 localStorage？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:06:36.747

您的页面可能是 https，这导致 Firebug[无法读取 localStorage](http://code.google.com/p/fbug/issues/detail?id=5040)。

# apache - 复杂 301 重定向的 mod 重写规则

> ID：10601190
> 
> 赞同：1
> 
> 时间：2012-05-15T12:59:16.150
> 
> 标签：apache, mod-rewrite

所以我正在做一个包含大约 4,000 种产品的网站，并且网址正在从旧网站更改，并且不想为每个网站制定 301 规则，所以我做了以下操作来移动类别（下面的示例）

```
# Main Categories
RewriteRule ^(.*)home-page-categories/name-1\.html$ name-1/ [R=301,NC,L]
RewriteRule ^(.*)home-page-categories/name-2\.html$ name-2/ [R=301,NC,L]
RewriteRule ^(.*)home-page-categories/name-3\.html$ name-3/ [R=301,NC,L]
RewriteRule ^(.*)home-page-categories/name-4\.html$ name-4/ [R=301,NC,L] 
```

所以上面的`home-page-categories/name-1.html`内容变成了一个目录`/name-1/`- 太棒了！

```
# Artist Categories from Root Categories
RewriteRule ^(.*)home-page-categories/name-1/(.*)\.html$ name-1/$2/ [R=301,L]
RewriteRule ^(.*)home-page-categories/name-2/(.*)\.html$ name-2/$2/ [R=301,L]
RewriteRule ^(.*)home-page-categories/name-3/(.*)\.html$ name-3/$2/ [R=301,L]
RewriteRule ^(.*)home-page-categories/name-4/(.*)\.html$ name-4/$2/ [R=301,L] 
```

然后，over 会抓住次要类别，例如`/home-page-categories/name-1/example.html`并使其成为`name-1/example/`- 太棒了！

但是在下一个级别，我需要携带产品名称，因此它将是：

`/home-page-categories/name-1/example/product.html`并做到这一点，`name-1/example/product.html`但我认为上面的规则可能与此冲突。

关于可以处理这一切的规则的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:32:11.493

为了与您的示例保持一致，解决方案可能是`name-1`

```
RewriteRule home-page-categories/name-1\.html$ /name-1/ [R=301,NC,L]
RewriteRule home-page-categories/name-1/([^/]+)\.html$ /name-1/$1/ [R=301,L]
RewriteRule home-page-categories/name-1/(.*)\.html$ /name-1/$1.html [R=301,L] 
```

根据您希望实现的目标，您可以将所有规则替换为

```
RewriteRule home-page-categories/([^/]+)\.html$ /$1/ [R=301,NC,L]
RewriteRule home-page-categories/([^/]+)/([^/]+)\.html$ /$1/$2/ [R=301,L]
RewriteRule home-page-categories/(.*\.html)$ /$1 [R=301,L] 
```

或者有更具体的规则

```
RewriteRule home-page-categories/(name-1|name-2|name-3|name-4)\.html$ /$1/ [R=301,NC,L]
RewriteRule home-page-categories/(name-1|name-2|name-3|name-4)/([^/]+)\.html$ /$1/$2/ [R=301,L]
RewriteRule home-page-categories/((name-1|name-2|name-3|name-4)/.*\.html)$ /$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:51:24.007

我认为这对你来说是在 PHP 代码中进行这种类型的重写的更好解决方案。如果您不知道如何告诉我，我会更新这篇文章并添加一些示例。

# cocos2d-iphone - 如何设置没有冗余的精灵类？

> ID：10601191
> 
> 赞同：-1
> 
> 时间：2012-05-15T12:59:16.783
> 
> 标签：cocos2d-iphone, box2d, physics

我正在使用 Box2d 制作物理游戏。大多数精灵是在 HelloWorldLayer.mm 类中创建的，但现在我想为每个精灵创建单独的类，并增加功能。我如何以不必为几乎所有新创建的精灵类设置 b2Worlds、定义地体、设置重力、调试绘制等的方式创建这些类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:32:58.280

b2world 只能与相同的 box2d 世界单一。所以你只需在 cclayer(scene) 中创建它。

# ios - iOS - 核心数据 - 在 NSManagedObject 子类中使用删除方法后保存不成功

> ID：10601200
> 
> 赞同：2
> 
> 时间：2012-05-15T12:59:45.327
> 
> 标签：ios, core-data, nsmanagedobject

**概述：**

1.  我使用自动生成的 NSManagedObject 子类中提供的删除方法删除 NSManagedObject
2.  然后我尝试保存数据库
3.  数据库保存不成功。

.

```
 - (void)removeEmployees:(NSSet *)values; //Auto generated method in Department.h 
```

但是使用 add 方法添加 NSManagedObject 可以成功保存数据库

```
 - (void)addEmployeesObject:(Employee *)value; //Auto generated method in Department.h - works fine 
```

**注意：**我使用的是 XCode 生成的 NSManagedObject 子类。

**实体详情：**

*   我有 2 个表（实体），即“员工”和“部门”
*   一个部门可以包含多名员工
*   一名员工只能属于一个部门

**关系详情：**

*   从“Employee”到“Department”的关系是一对一的关系，称为“whichDepartment”。删除规则为无效
*   从“部门”到“员工”的关系是多对一的关系，称为“员工”。删除规则是级联

**问题：**

“部门”类有一个方法调用如下，我使用这个方法后，数据库保存不成功

```
(void)removeEmployees:(NSSet *)values; //Auto generated method in Department.h //does not work 
```

**用于删除的代码：**

```
- (void) removeEmployeesHavingAgeAsZeroWithDepartment: (Department*) department

{
    NSMutableSet *employeesSetToBeRemoved = [[NSMutableSet alloc] init];

    for(Employees *currentEmployee in department.employees)
    {
        if(currentEmployee.age == 0)
        {
            [employeesSetToBeRemoved addObject:currentEmployee];
        }
    }

    [department removeEmployees:employeesSetToBeRemoved]; //causing the problem
} 
```

**用于保存数据库的代码**

```
[self.database saveToURL:self.database.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success) 
  {NSLog(@"DB saved");}]; 
```

**问题：**

1.  为什么使用remove方法后保存数据库不成功？
2.  我需要实现这个方法吗？目前我没有看到这个方法的任何实现，我只能在头文件中找到它。
3.  我的关系（反向、删除规则等）是否设置正确？

**回答：**

*   请参考 Jody 的回答和评论（5 月 17 日 4:39），很好地解释了如何调试问题并找到根本原因

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:41:45.790

我打赌你没有保存你的上下文。当你删除一个对象时，它只是被标记为在下次保存上下文时被删除。

如果你对每个对象调用 isDeleted，你会得到什么？

**编辑**

啊...我看到您正在使用 UIManagedDocument （我可以通过您正在使用的保存调用来判断）。你应该在你的问题中提供完整的细节，*尤其是*在处理 CoreData 时，因为它有很多旋钮和交互。

好的，所以，首先，UIManagedDocument 是一个“无保存”架构。使用 UIManangedDocument 时不应求助于调用 saveToURL。

它会自动将自己保存在后台线程上。但是，您必须告诉它有更新要更改。

另外，你怎么知道它没有保存？我知道这听起来像是一个奇怪的问题，但重要的是要知道你在看什么，以及你是如何确定文档没有保存的。

该文档指出，如果要保存，则需要做两件事之一。

1.  使用 UndoManager 并让它标记脏东西
2.  调用 [document updateChangeCount:UIDocumentChangeDone];

现在，实际的保存将在未来某个被破坏的时间发生。但是，有些事情（比如进入后台）会触发保存。

再说一次，你怎么知道数据没有保存？

您是否只是查看托管对象、从 MOC 获取、查看文件？

添加

```
[self.database updateChangeCount:UIDocumentChangeDone]; 
```

在该删除功能结束时，您的数据肯定会被保存。

**编辑**

不幸的是，如果出现错误，后台保存可能会静默失败。因此，您应该注意状态更改通知，因为这是您将收到的唯一通知，即发生 sn 错误。

虽然您会在状态因错误而改变时收到通知，但您不会收到有关错误原因的详细信息。为此，如果您想要实际的 NSError 详细信息，则必须在 UIManagedDocument 的子类中覆盖 handleError:userInteractionPermitted:。

我将注册状态更改通知并提供 UIManagedDocument 的简单子类，其中 handleError:userInteractionPermitted: 被覆盖以记录错误。看看这告诉你什么。希望它会引导您了解为什么您的保存没有发生。

Also, don't forget that you have to WAIT for the save.

Finally, if you want to see what CoreData is doing at the SQL level, set debugging (-com.apple.CoreData.SQLDebug 1) in command line options to see SQLLite statements.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:39:42.673

经过一番调查，我意识到数据库没有得到保存。

我没有使用自动生成的 remove 方法，而是使用了`NSManagedObjectContext`'s`deleteObject`方法

**使固定：**

```
[self.managedObjectContext deleteObject:currentEmployee]; 
```

# css - ie7中的css子菜单悬停问题

> ID：10601201
> 
> 赞同：1
> 
> 时间：2012-05-15T12:59:47.490
> 
> 标签：css, menu, internet-explorer-7

Internet Explorer，我们亲爱的老敌人.... IE7 让我的 css 下拉/飞出菜单让我头疼。

出于某种原因，将鼠标悬停在具有飞出级别的子菜单上时，该级别会闪现到视图中，然后立即消失。想不通。

[http://cy4or.co.uk](http://cy4or.co.uk)

查看 IE7 中的 Services/Digital Forensics，您会发现问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:42:59.640

Remove position:relative from the list items for IE7:

```
@media, 
  { 
  #access .menu li { position: static;} 
  } 
```

[position:relative triggers hasLayout](http://brunildo.org/test/IEWflm.html) and a stacking context in IE6/7, which combined with the float, causes the content to drop out of view.

# javascript - 如何将 javascript 文件/库导入 GWT (Eclipse)

> ID：10601203
> 
> 赞同：1
> 
> 时间：2012-05-15T12:59:52.767
> 
> 标签：javascript, eclipse, gwt, libraries

> **可能重复：**
> [gwt 和 javascript 文件](https://stackoverflow.com/questions/1659433/gwt-and-javascript-files)

似乎是一个很简单的任务，但我现在做起来有困难......

编辑：实际导入，而不是通过清单文件中的脚本标签引用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:12:52.350

在 gwt nocached javascript 文件的导入下方将 js 的导入添加到您的 html 文件中就足够了。

```
<script type="text/javascript" language="javascript" src="mygwt.nocache.js"></script>
<script src="myJavaScript.js"></script> 
```

# asp.net-mvc - 控制器中的方法重载

> ID：10601212
> 
> 赞同：2
> 
> 时间：2012-05-15T13:00:12.467
> 
> 标签：asp.net-mvc, overloading

我有 2 种方法，如下所示

```
public string Download(string a,string b) 
public string Download(string a) 
```

但是 MVC3 With IIS 5.1 给出了这两种方法不明确的运行时错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:03:37.110

由于 string 可以为空，因此从 MVC 的角度来看，这些重载确实是模棱两可的。只需检查是否`b`为空（如果您想要默认值，可以将其设为可选参数）。

另一方面，您可以尝试自定义`ActionMethodSelectorAttribute`实现。这是一个例子：

```
public class ParametersRequiredAttribute : ActionMethodSelectorAttribute
    {
        #region Overrides of ActionMethodSelectorAttribute

        /// <summary>
        /// Determines whether the action method selection is valid for the specified controller context.
        /// </summary>
        /// <returns>
        /// true if the action method selection is valid for the specified controller context; otherwise, false.
        /// </returns>
        /// <param name="controllerContext">The controller context.</param><param name="methodInfo">Information about the action method.</param>
        public override bool IsValidForRequest(ControllerContext controllerContext, MethodInfo methodInfo)
        {
            var parameters = methodInfo.GetParameters();

            foreach (var parameter in parameters)
            {
                var value = controllerContext.Controller.ValueProvider.GetValue(parameter.Name);

                if (value == null || string.IsNullOrEmpty(value.AttemptedValue)) return false;
            }

            return true;
        }

        #endregion
    } 
```

用法：

```
[ParametersRequired]
public string Download(string a,string b)

// if a & b are missing or don't have values, this overload will be invoked. 
public string Download(string a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:42:00.843

在我看来，您应该尝试使用[ASP.NET Routing](http://msdn.microsoft.com/en-us/library/cc668201.aspx)。只需添加新的 MapRoute。[您可以在这篇文章](https://stackoverflow.com/a/2246508/182344)中查看示例

# mysql - sqlBuddy 不接受要导入的 .sql 文件

> ID：10601220
> 
> 赞同：0
> 
> 时间：2012-05-15T13:00:46.710
> 
> 标签：mysql, sql, apache, import, sqlbuddy

我想知道这是为什么：backup.sql 文件不被[sqlBuddy](http://sqlbuddy.com/)接受，我已经用 utf8 创建了一个名为 youhand 的数据库

sqlBuddy 消息：

```
0 statements were executed from the file.
The following errors were reported:
- No database selected
- No database selected
- No database selected
- No database selected
- No database selected
- No database selected
- No database selected
- No database selected
- No database selected
- No database selected 
```

文件内容：

```
--
-- MySQL 5.0.92
-- Mon, 14 May 2012 18:16:43 +0000
--

    CREATE TABLE `comentarios` (
       `id` int(7) not null auto_increment,
       `texto` varchar(500) not null,
       `id_usuario` int(7) not null,
       `id_receta` int(7) not null,
       `fecha` timestamp not null default CURRENT_TIMESTAMP,
       PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=24;

    CREATE TABLE `etiquetas` (
       `id` int(11) not null auto_increment,
       `nombre` varchar(50) not null,
       `id_usuario` int(7) not null,
       `id_pregunta` int(7) not null,
       `lan` int(3) not null,
       `id_consejo` int(7) not null,
       PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=122;

    CREATE TABLE `familias` (
       `id` int(7) not null auto_increment,
       `clave` varchar(100) not null,
       `pagina` varchar(3000) not null,
       `lan` int(2) not null,
       `id_padre` int(7) not null,
       `id_usuario` int(7) not null,
       PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=11;

    CREATE TABLE `follows` (
       `id` int(11) not null auto_increment,
       `toid` int(11) not null,
       `fromid` int(11) not null,
       PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=43;

    CREATE TABLE `idiomas` (
       `id` int(11) not null auto_increment,
       `lan` varchar(2) not null,
       `nombre` varchar(25) CHARSET utf8 not null,
       `url` varchar(100) not null,
       PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=5;

    CREATE TABLE `notificaciones` (
       `id` int(11) not null auto_increment,
       `id_usuario` int(11),
       `id_from` int(11),
       `msj` varchar(1000),
       `tipo` int(2) default '0',
       `id_item` int(11) default '0',
       `leida` int(1) default '0',
       `tipo_actividad` int(2),
       PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=2;

    CREATE TABLE `helps` (
       `id` int(11) not null auto_increment,
       `titulo` varchar(100) not null,
       `extra` varchar(3000) not null,
       `id_usuario` int(7) not null,
       `id_cultura` int(7) not null,
       `id_familia` int(7) not null,
       `req` text int(2) not null,
       `req_done` int(2) not null,
       `img_src` varchar(200) not null,
       `fecha` timestamp not null default CURRENT_TIMESTAMP,
       `votos` int(7) not null,
       `lan` int(3) not null,
       PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=63;

    CREATE TABLE `textos` (
       `id` int(7) not null auto_increment,
       `clave` varchar(100) not null,
       `texto` varchar(3000) not null,
       `lengua` int(3) not null,
       `id_usuario` int(7) not null,
       PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=664;

    CREATE TABLE `usuarios` (
       `id` int(7) not null auto_increment,
       `fid` bigint(60) not null,
       `alias` varchar(50) not null,
       `pass` varchar(100) not null,
       `mail` varchar(50) not null,
       `fechar` timestamp not null default CURRENT_TIMESTAMP,
       `ultima` timestamp not null default '0000-00-00 00:00:00',
       `img_src` varchar(200) not null,
       `reputacion` int(11) not null,
       `lan` int(3) not null,
       PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=81;

    CREATE TABLE `votos_item` (
       `id` int(7) not null auto_increment,
       `tipo` int(3) not null,
       `valor` int(2) not null,
       `id_usuario` int(7) not null,
       `id_item` int(7) not null,
       `fecha` timestamp not null default CURRENT_TIMESTAMP,
       PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=4; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:01:48.967

因为它不知道在什么数据库中执行这些语句。

*   要么以文件开头`use youhand;`
*   在每个表名前面放一个数据库名（so `CREATE TABLE youhand.familias`）
*   或者启动您的应用程序以便选择数据库（命令行参数或通过 GUI）

# c - 在 C 中解析基于列的 ASCII 数据

> ID：10601222
> 
> 赞同：4
> 
> 时间：2012-05-15T13:01:00.500
> 
> 标签：c, string, parsing

我正在尝试解析包含固定列数中的整数的文本。例如，我的输入文件可能如下所示：

```
=1=2=3
=4=5=6
=8=910 
```

其中`=`符号表示输入中的空格。*等号不在输入文件中；我只是为了说明的目的把它放在那里。*每个整数包含在没有零填充的两列中，因此第三行不是拼写错误：它是 8、9 和 10。

该标准`sscanf`不起作用，因为它首先消除空格，然后应用格式字符串。例如，我试过：

```
sscanf(buf, "%2d%2d%2d", &int1, &int2, &int3) 
```

但它最终将第三行解析为 8、91 和 0。

有没有办法做到这一点，而无需手动逐列提取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:11:18.027

您可以通过许多不同的方式来做到这一点。使用`sscanf`（或`strtol`），您（至少）有以下两个选项：

*   复制该列，然后复制`sscanf`它：

    ```
    char temp[COL_SIZE+1] = {'\0'};  /* last character will always be NUL */
    for (i = 0; i < col_count; ++i)
    {
        memcpy(temp, buf + i * COL_SIZE, COL_SIZE * sizeof(*buf)); /* "* sizeof" actually unnecessary */
        sscanf(temp, "%d", &num[i]); /* or use strtol */
    } 
    ```

*   您也可以更高效地执行此操作，因为您不会在常量字符串上执行此操作，**特别是永远不会在字符串文字上**执行此操作：

    ```
    for (i = 0; i < col_count; ++i)
    {
        char temp;
        int column_beg = i * COL_SIZE;
        int column_end = column_beg + COL_SIZE;
        temp = buf[column_end];
        buf[column_end] = '\0';
        sscanf(buf + column_beg, "%d", &num[i]); /* or use strtol */
        buf[column_end] = temp;
    } 
    ```

    它的作用是`'\0'`在每列之后插入一个，读取它，然后恢复原始字符。如果在字符串文字上完成，这将是未定义的行为。

我个人推荐第一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:16:38.327

您可以逐个字符地执行此操作：

```
#include <ctype.h>
#include <stdio.h>

int main(void) {
  int val;
  char input[] = "=8=910";
  char *p = input;

  while (*p) {
    val = 0;
    if (isdigit((unsigned char)*p)) val = *p - '0'; // 1st digit
    p++;
    val *= 10;                                      // 2nd
    val += *p++ - '0';                              // digit
    printf("val: %d\n", val);
  }
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:28:49.927

不使用`scanf`. 应该快...

```
void parse_columns(const char *line)
    {
    char buf[3];
    buf[2] = '\0';

    int i = 0;
    for (const char *c = &line[0]; *c; c++, i++)
        {
        buf[i] = *c;
        if (1 == i)
            {
            printf("%d\n", atoi(buf));
            i = -1;
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:19:15.050

您可以使用`scanf()`和`"%2c"`转换说明符将两个字符读入一个以零结尾的正确数组，然后将其转换为十进制（使用`strtol()`或类似的东西）......但这很丑陋。再说一次，并不比格式本身丑。

一般来说，`*scanf()`解析输入是一个非常糟糕的选择，因为如果输入格式错误，它的行为会有些敏感。从长远来看，您最好将文件读入内部缓冲区并进行自己的自定义解析/错误处理。

# html - 如何在 MVC 3 视图中有一个 @Html.dropdownfor 驱动另一个？

> ID：10601224
> 
> 赞同：1
> 
> 时间：2012-05-15T13:01:05.817
> 
> 标签：html, asp.net, asp.net-mvc-3

*   我正在处理两种类型的数据：“ClassType”和“Disciplines”。ClassType 是驱动次要学科的主数据类型。这个想法是每个 ClassType 都将分配有许多 Disciplines。所以，我想做的是让学科取决于 CLassType 的选择。我将如何使用视图中的 Microsoft MVC 3 框架来做到这一点？以下是我的控制器/模型/视图代码：

    ```
    CONTROLLER: 
    ```

    公共 ActionResult Create() { List c_types = new List(); 列表盘 = 新列表（）；

    ```
     c_types = m_activeContract.getCtypeList();
        disc = m_activeContract.getDisciplineList();
        // TODO:  fetch from repository or database

        var model = new ExampleDocument
        {
            ClassTypes = a_modes,
            Disciplines = disc
        };

        return View(model);
    } 

    MODEL:

    public int ClassTypeId { get; set; }
    public int DisciplineId { get; set; }
    public List<ClassType> ClassTypes { get; set; }
    public List<Discipline> Disciplines { get; set; }

    VIEW:

    @using (Html.BeginForm("Create", "Example") ) {
            <p>Class Type: 
            @Html.DropDownListFor( x => x.ClassTypeId,
                     new SelectList(Model.ClassTypes, "Id", "Name"))</p>
            <p>Discipline:
            @Html.DropDownListFor( x => x.DisciplineId,
                    new SelectList(Model.Disciplines, "Id", "Name")) </p>
            <p>
                <input type="submit" value="Create" />
            </p>
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:08:58.020

1.  在您的控制器中，使用您的业务规则根据 ClassTypeId 填充您的学科类型实体列表。

2.  此外，添加一个控制器操作，该操作为传入的类类型 ID 获取学科类型实体的 json 结果。

3.  在您看来，在 Class Type 字段的更改上添加一个 javascript 事件。在这种情况下，使用 ajax 回调到控制器操作，该操作根据类 id 返回一个学科类型列表，并使用它来填充你的学科类型下拉列表。这样，当用户选择不同的 Class Type 时，DisciplinesTypes 列表会发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:01:56.127

> > ClassType 驱动二级学科

所以我认为你必须在 ClassType 的下拉菜单中使用 javascript 进行 ajax 调用并在 Discipline 中填充数据

# mysql - 在更新期间为我的查询锁定表？

> ID：10601227
> 
> 赞同：2
> 
> 时间：2012-05-15T13:01:10.527
> 
> 标签：mysql, sql

我正在使用 mysql 5.5.22。有时我需要从某个地方获取一些数据，而这个地方是一个系统表。

例如：

我有这个查询（由我的同事写）：

```
UPDATE _x_eia_marcatura AS X, A_EVENTS AS E 
SET X.kind = E.kind, X.ref_id = E.ref_id 
WHERE E.DELIVERY_ID=49 AND E.kind='c' AND E.ref_id = 69 
AND X.MAILQ_ID = E.MAILQ_ID; 
```

现在如果你不小心写了 E.kind = X.kind 你正在更新系统表。有没有办法告诉mysql“如果我正在更新表E那么什么都不做”？

我知道这个别名命名约定很糟糕，但它让我觉得也许有一种方法可以做我建议的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:25:34.040

如果它是全局“从不插入此表”的事情，或者可能是触发器，您可以使用权限。

不过一般来说，没有。代码通常被认为是“可信的”，因此无论它要求什么都被认为是可以接受的。如果你真的需要这个，你应该调查存储过程，并且只允许通过这些更改数据库。

# prolog - 在序言中规划路线

> ID：10601238
> 
> 赞同：0
> 
> 时间：2012-05-15T13:01:39.413
> 
> 标签：prolog, routes

我想做的是找到一条有一些 givin facs 的路线。我做了一些研究，我已经知道我必须添加一个基本步骤和递归步骤。我已经实现了，但是当我必须转移时它不起作用。因此，如果它是邻居，它可以工作，但不是。

这就是我所拥有的：

```
p(zwolle,apeldoor,36).
p(apeldoorn,zutphen,22).
p(hengelo,zwolle,60).
p(zutphen,hengelo,45).
p(arnhem,apeldoorn,30).
p(arnhem,zutphen,24). 

%basic step
route(Begin,End,PastCitys):-
       not(member(End,PastCitys)),
   p(Begin,End,_).

%recursief
route(Begin,End,PastCitys):-
  p(Begin,Stepover,_),
      not(member(Stepover,PastCitys)),
  route(Stepover,End).

plan(Begin,End):-
   route(Begin,End,[Begin]). 
```

欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:17:18.310

以下是按复杂性升序排列的三个提示：

1.  您曾经拼错过一次“apeldoorn”，因此明显的测试`route(zwolle,apeldoorn)`并不能仅仅因为这个而起作用。
2.  您需要表达邻居是对称的事实，以便您可以找到从 A 到 B 的路线，无论该事实是用一种方式表达还是另一种表达方式。
3.  即使存在一条路线，在找到一条路线之前，您仍然可以通过输入不幸进入无限循环。为此，您需要一个“发生检查”，以防止您在执行递归步骤时进入循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T22:42:17.693

我认为您需要查看[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)。只需使用 Prolog 对其进行编码。具有递归和访问节点列表的方法根本不是最优的（参见 Richard O'Keefe，“Prolog 的工艺”，第 5.4 章）。但是通常warshall算法已经存在于图形操作库中，您需要学习如何使用它。

# mysql - 当枚举字段设置为无效值时，使 MySQL 默认为 NULL

> ID：10601240
> 
> 赞同：3
> 
> 时间：2012-05-15T13:01:42.467
> 
> 标签：mysql, html, sql

当枚举字段设置为无效值时，有没有办法让 MySQL 默认为 NULL？

另外，有没有一种方法可以在 HTML 表单中指定一个值，以便在保存到数据库时将其存储为 NULL。我不想做任何检查，比如“如果为空字符串，则保存 NULL”。如果可能的话，这是个好主意吗？有什么安全问题吗？

我的场景：我有一个 HTML 下拉菜单，其中有一个“null”选项，后跟一个与数据库枚举对应的项目列表。选择并保存 null 选项后，我希望它在数据库中反映为 NULL。现在，它被转换为一个空字符串，按照：

> 如果将无效值插入 ENUM（即，允许值列表中不存在的字符串），则会将空字符串作为特殊错误值插入。这个字符串与“普通”空字符串的区别在于这个字符串的数值为 0。

[http://dev.mysql.com/doc/refman/5.5/en/enum.html](http://dev.mysql.com/doc/refman/5.5/en/enum.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T13:10:08.947

"*如果 ENUM 列被声明为允许 NULL，则 NULL 值是该列的有效值，默认值为 NULL。如果 ENUM 列被声明为 NOT NULL，则其默认值为允许列表的第一个元素价值观。* ”

在此基础上，如果您不使用 INSERT 语句为该字段设置值，并且您已声明 ENUM 字段接受 NULL，则它将默认为 NULL。

**[编辑]**

为了解决您的评论，如果您有此表定义

```
CREATE TABLE IF NOT EXISTS `tbl_test` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` enum('New','Done') DEFAULT NULL,
  PRIMARY KEY (`id`)
) 
```

并且您的 Web 应用程序正在尝试使用类似这样的方式更新和现有记录

```
UPDATE `test`.`tbl_test` SET `type` = NULL WHERE `tbl_test`.`id` =1 
```

它将值设置为 NULL。

您可以通过在下拉列表中查询表中可能的 ENUM 值来降低无效枚举数据出现在 HMTL 下拉列表中的风险。[这是我发现的一个 PHP 示例](http://akinas.com/pages/en/blog/mysql_enum/)

```
SHOW COLUMNS FROM `tbl_test` WHERE Field = 'type' 
```

**[编辑]**

要回答您的附加评论，如果您希望用户能够选择 NULL 值并允许*空字符串*作为有效值，您需要像这样指定您的下拉列表

```
<select>
  <option value="-1">-- not selected ---</option>
  <option value=""></option>
  <option value="Book">Book</option>
  <option value="Music">Music</option>
</select> 
```

通过使用该`<option value= ...>`属性，您可以控制 POSTed 到您的 WebApp 的值，然后可以进行相应的处理。在此示例中`-1`，您的 WebApp 会将 的值转换为 NULL

# c# - 如何使用 C# 使 Excel 范围内的单元格不可编辑

> ID：10601241
> 
> 赞同：1
> 
> 时间：2012-05-15T13:01:44.350
> 
> 标签：c#, excel

我在我的 WPF 应用程序中使用 C# 构建了一个 Excel 应用程序。在那个 Excel 中，我创建了一个**Header Row**。现在我想将**标题行单元格设置为不可编辑的**单元格，它应该**恢复到以前的值**。为此，我使用**Validation** for header row 来满足这个条件。当我要更改标题行中的任何单元格时，它将显示一个警告框。警报框图标并不好，它还有一些其他按钮，如重试、取消和帮助。

1）现在我想知道如何通过使用更好的格式（图标应该是信息图像，它应该有重试和取消按钮。不需要帮助按钮）来获取警报框。

（或者）

2）我不想显示警告框但是新修改的值必须恢复到以前的值。单元格必须不可编辑。

（或者）

3）我们可以使用锁定特定范围的单元格吗？

我对该条件的代码是：

```
public static void FormatAsHeader(this Range range, bool wrapContent)
{
 .
 .
range.Validation.Add(XlDVType.xlValidateCustom, Type.Missing, Type.Missing, "\"\"");
} 
```

谁能告诉我这个问题的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:45:33.687

你应该能够做到：`range.Locked = true;`然后调用`Protect()`你的工作表。

见[`Range.Locked`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.locked%28v=office.14%29.aspx)和[`WorkSheet.Protect`](http://msdn.microsoft.com/en-us/library/ff840611.aspx)。

# gcov - lcov 用于包含 gcda 文件的多个目录

> ID：10601242
> 
> 赞同：4
> 
> 时间：2012-05-15T13:01:45.913
> 
> 标签：gcov, lcov

我想使用 gcov 和 lcov 生成覆盖率报告。

**到目前为止我所做的**：-

```
1\. I compiled my code using --fprofile-arcs and -fprofile-coverage in
g++.

2\. I have linked using lcov.

3\. I have .gcno files with th e.o location.

4\. When I execute binary, it is resulting into .gcda files. 
```

**我必须做的**：-

我必须使用这些数据文件 (.gcda) 并想使用 lcov 创建一个干净的报告。

**问题**：-

有多个目录，其中有源文件，在每个目录中，我正在创建一个 obj/ARCH 目录来保存目标文件。

因此最终的目录结构将是：-

```
 proto  ----> MJ1 ----> MJ2 ----> MJ3 ----> MJ4 ----> MJ5

  MJ1 ----> .cpp 

      ----> obj/linux/*.o *.gcno *.gcda 

  MJ2 ----> .cpp 

      ----> obj/linux/*.o *.gcno *.gcda 
```

与 M3、M4、M5 相同。

我正在从 proto 级别执行 lcov，它会找到 .gcda 文件，但在查找 .h 和 .C 文件时会出现一些错误。知道如何使此流程路径独立吗？

```
Error:-
../MjUtil/glob.h:cannot open source file
../MjUtil/MJError.h:cannot open source file
../MjUtil/OsStatisticsFile.h:cannot open source file 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T11:34:12.773

您是否尝试过`--base-directory .`为 lcov 提供选项？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-03T22:18:12.007

`--directory`您可以多次传递标志，`lcov`将按顺序解析每一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T14:17:01.723

通常在编译 CPP 时尝试绝对路径是个好主意。

它也不应该取决于你运行 lcov 的目录。例如：

> lcov -c -d ../../../src -o lcov.info

并且 src 目录包含：

> 主.cpp 主.gcno 主.gcda

即使**main.gcno文件包含****main.cpp**的相对路径，lcov 也会处理它。

您还应该确保没有移动 gcda/gcno 文件。通过脚本或手动。如果它们已被移动，当然相对路径将不正确，lcov 将无法找到源。

# xml - 强类型对象与普通 XML 作为来自 REST API 服务的响应？哪个最好

> ID：10601249
> 
> 赞同：2
> 
> 时间：2012-05-15T13:02:03.603
> 
> 标签：xml, wcf, web-services, rest, architecture

我们即将启动一个服务项目，它将向不同的客户提供有关我们的域对象的数据。我们将拥有从 ASP.NET Web 表单/MVC、Classic ASP、PHP 和 Android 应用程序（Java 作为后端代码）的客户端

我们正在进行某种研究，以最终确定使用哪种发展战略。我们有编写 WCF 服务的经验。WCF Rest 是否支持架构？我读到 Rest Architecture 将数据返回为 Plain XML/Json 。不是强类型对象。在编写以前的 WCF 服务并在客户端应用程序中使用它时，我真的很喜欢强类型对象的响应。我想 REST 是不可能的。

我正在研究 ASP.NET Web API（WCF 现在变成了这个）。但这仍处于测试阶段，我的团队还没有准备好使用仍处于测试阶段的东西。

我应该使用什么最好的方法？WCF 服务返回强类型对象或 XML ？两者的优缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:19:54.733

什么是强类型对象？:) 它本质上就是它所预期的类型。只有当您有办法控制管道的服务器和客户端（即两端相同的虚拟机，或者可以编组/解组为相应语言的相同语言或代理/存根）时，您才能执行此操作。

那么，这意味着什么？我建议将 WCF 与 XML/JSON 结合使用，因为这是通过网络进行通信的通用语言。一旦你意识到弱类型的好处，你就会克服没有强类型的问题。如果你真的想要强类型，你可以使用 xsd.exe 或类似的东西来为你的服务生成代理。

综上所述，您确实应该将努力分为两件事：

*   使用 WCF 实现域服务来包装您的后端。这些可以只是向有线协议服务公开合同的 .NET 程序集。
*   使用对最终消费者友好的东西来实施有线服务。尝试使这变得微不足道，以便您可以快速且廉价地创建它们。像 vert.x 或 node.js 或 WebAPI..

当然，你可能已经在做这一切，而我可能完全错了。:)

# css - 按 id 和 class 选择 div

> ID：10601250
> 
> 赞同：4
> 
> 时间：2012-05-15T13:02:04.307
> 
> 标签：css, css-selectors

我试图选择这个，同时使用 is 和 class：

```
<div class="phase" id="1"> 
```

没有任何效果，我试过了：

```
.phase#1
#1.phase
div#1.phase 
```

会是`#1`吗？我从来没有遇到过数字 id 的问题

**更新：**
似乎我混淆了 jQuery 选择器和 CSS 选择器，
这适用于 jQuery：

```
$(".phase#1") 
```

但是这个：

```
.phase#1 {} 
```

在 CSS 中不起作用

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T13:03:23.860

`id`'s 不能以数值开头`1, 2, 3, etc`。它们可以包含数值，但不能以它们开头。

规范 - [http://www.w3.org/TR/html401/types.html#type-name](http://www.w3.org/TR/html401/types.html#type-name)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T13:04:26.667

id 属性为 HTML 元素指定一个唯一的 id（该值在 HTML 文档中必须是唯一的）。因此，如果您按 id 选择，则不应按班级选择。

指定元素的唯一 ID。命名规则：

1.  必须以字母 AZ 或 az 开头
2.  后面可以跟：字母 (A-Za-z)、数字 (0-9)、连字符 ("-") 和下划线 ("_")
3.  在 HTML 中，所有值都不区分大小写

[HTML id 属性规范](http://www.w3schools.com/tags/att_standard_id.asp)

# javascript - 在客户端缓存大量的json结果

> ID：10601253
> 
> 赞同：10
> 
> 时间：2012-05-15T13:02:16.787
> 
> 标签：javascript, asp.net-mvc, caching

我有一个 asp.net mvc 应用程序，它返回 JSON 结果，其中包含最多 n 年的数据，然后在 Javascript 图表上呈现。

为了获得良好的用户体验（在性能方面），我正在寻找最佳解决方案，是否可以在客户端缓存 JSON 数据，因此当用户单击具有不同参数（如日、周视图等）的图表时，无需访问服务器即可查询相同的 JSON 数据。

有人可以帮助我们就缓存最佳实践做出最佳决定，即数据应该缓存在客户端还是服务器端，还是应该为每个图形切换直接命中数据库？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T13:19:53.420

首先，数据库在哪里？如果您在具有千兆位 LAN 的本地网络上，那么点击它不会有问题。但是，在互联网上并非如此。人们的带宽有限，尤其是在移动设备上，因此您应该限制您的 HTTP 调用。此外，更少的 HTTP 调用意味着更少的服务器压力。

以下是一些提示：

*   考虑分页

    当加载“2 年价值”时，我想象了很多，比如 100 多页的论文。考虑分页数据而不是一次加载它们。这可以节省带宽和缓存空间（如果有限制的话）。

    如何：让服务器脚本根据客户端的需要对数据进行切片。`LIMIT`在查询中使用 SQL 创建分页非常容易。逻辑就像`starting_item = (page_needed - 1) * items_per_page`

*   JSON化数据

    使用 JSON 在网络之间传输数据。除了轻巧之外，它还具有结构性。以后解析和存储会更容易。

    如何：PHP 有一个 json_encode 函数将数组转换为 JSON 字符串。我假设您的框架具有类似的功能。让字符串在页面上回显，然后用于`JSON.parse`从 JSON 字符串转换为 JS 对象。[JSON 方法](https://developer.mozilla.org/en/JSON)在[现代浏览器](http://caniuse.com/json)中是原生的，但如果你需要迎合旧浏览器，[Crockford 有一个库](https://github.com/douglascrockford/JSON-js)来解析它

*   使用众所周知的存储框架

    如果跨页面缓存需要持久存储，我最近遇到了[PersistJS](http://pablotron.org/software/persist-js/)，它将 localStorage 抽象为浏览器上可用的存储。另外，这是[LZW 的 JS 实现](https://stackoverflow.com/a/294421/575527)。保持方便，因为 localstorage 使用字符串来存储数据，并且它有 5-10MB 的限制。

    如何：使用`JSON.stringify`PersistJS 将数据转换为字符串并将其存储。然后进行检索，获取字符串并使用`JSON.parse()`

*   仅在需要时调用

    让缓存系统仅在修改、添加或不存在某些内容时才调用服务器。如果数据在那里，为什么要调用服务器呢？

*   同步缓存

    如果您担心过时的数据，那么通过使用一些实时数据获取方法来让一些 AJAX 同步您的缓存系统，如本关于[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)的 wiki 中所述。

最后两点取决于您的缓存框架。但是[BackboneJS](http://documentcloud.github.com/backbone/)允许它的模型和集合同步到服务器，这与我提到的功能相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T01:50:25.300

我已经完成了您想做的事情，这是我的经验。我在工作中使用 Oracle 的 Site Studio 中间件。我寻找一个可以使用它的框架，但找不到。所以我尝试了以下两种选择。

1）数据库查询返回一定数量的行。我尝试了 2,000 个作为测试。一个简单的 foreach 循环将返回的数据转换为 JSON 数据。因此，当它遍历行时，它实际上会构建一长串 JSON 变量。通过这种方式，您正在模仿本地 dababase 的快照。JS 实际上可以非常快速地访问数组元素，并且您可能会惊讶于排序、更改、删​​除信息的速度。

```
<script>
var appData = [{'id':'0','first':'Sam','last':'Smith'},{'id':'1','first':'Dan','last':'Smith'}];
</script> 
```

此 JSON 数据包含在脚本标记中。doc.ready 上的 JQuery 然后读取数据并根据需要将其添加到 html 文本中。当用户更改 JSON 数据值时，ajax 会触发并将更改保存到数据库。将这样的系统添加到您的应用程序中并不难。我后来使用 Google 的 Angular.js 将数据绑定到 UI 以拥有一个干净的 MV 模式，并且它也很容易进行快速的客户端排序和过滤。如前所述，Backbone.js 和其他 JS 框架可以将客户端数据同步到服务器。

2）我将数据保存到 html 页面的第二种方法是再次使用 foreach 循环遍历返回的行。然后我使用老式的将数据保存在 HTML 中

```
<input type="hidden" name="someName" value="someValue" /> 
```

然后我使用 JQuery 处理数据并将其添加到 UI。如果您真的想使用 JSON，您实际上可以像这样将它嵌入 HTML 变量中

```
<input type="hidden name="row1" value="{'color':'red','style':'fancy','age':'44'}" /> 
```

然后，您可以使用 JQuery 或 Angular.js 处理数据并将其绑定到您的 UI。

有趣的是，很多应用程序框架都没有内置的客户端缓存系统。在服务器端对选择菜单进行排序然后重新构建 html 确实效率低下。最好在 JS 中对其进行排序并动态重建选择菜单。这里存在安全问题，您不希望将私有信息打印到 JSON 或 HTML 变量中，因为它在查看源代码下可见。您还可以使用更多流氓技术将数据嵌入页面。考虑如下：

```
<span class="data" value="1234"></span>
$(function () { 
    $('.data').each( function() {
        var val = $(this).attr('value');
        console.log(val); //process data
    });
}); 
```

然后，您可以在 doc.ready 上使用 JQuery 来处理名为数据的类。您还可以将 JSON 数据填充到值中，然后再将其解析出来。请记住，JQuery 人员反对以这种方式使用类的开发人员。根据我的经验，如果你不过度使用它，它会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-12T07:23:28.877

1.  从数据库中检索数据并在服务器上保存为静态文件。提供 .css 或 .png 扩展名。（浏览器会自动缓存样式表和图像文件。）。
2.  将带有时间戳的数据文件名保存在隐藏字段中。（以确保在文件发生更改时从服务器加载最新文件）
3.  使用 AJAX 从服务器加载文件，第一次将从服务器加载，但下次将从浏览器缓存加载。
4.  您可以使用 JSON.Parse() 来解析 AJAX 请求结果。

# c - ARM 汇编器 - 如何使用 CMP、BLT 和 BGT？

> ID：10601264
> 
> 赞同：8
> 
> 时间：2012-05-15T13:02:41.300
> 
> 标签：c, assembly, embedded, arm

给你们一个快速的问题，在我的循环中，我需要使用 CMP 、 BLT 和 BGT 来比较一些值。如何在以下循环中使用所述指令？

我正在尝试使用 BGT 、 BLT 和 CMP ，因为我需要它们来使我的应用程序正常工作。问题是我不知道如何使用它们。如果我想使用 CMP 比较 r6 和 r4 并将差异放入 r7，我该怎么做？同样的问题，如果我想在 r7 小于 0 时使用 BLT，我该怎么做？

```
 BGT ??????? ; branch if greater than 5
  CMP ???????? ; compare r6 with r4 , put difference into r7
  BLT ???????? ;branch if r7 is less than 0
  BGT ???????? ;branch if r7 is greater than 0 
```

这是我的整个循环：

```
LoopStart

  BL WaitBUT1
  BL readTemp
  BL checkTemp
  BGT ??????? ; branch if greater than 5
  BL errorVal
  CMP ???????? ; compare r6 with r4 , put difference into r7
  BLT ???????? ;branch if r7 is less than 0
  BL FanOn
  BL errorLedOn
  BL systemLedOn
  BL heaterOn
  BGT ???????? ;branch if r7 is greater than 0
  BL FanOff
  BL errorLedOff
  BL systemLedOff
  BL heaterOff
  BL WaitBUT2
  BL FanOff
  BL errorLedOff
  BL systemLedOff
  BL heaterOff

  B LoopStart 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T13:32:53.073

如果不首先以某种方式设置条件寄存器，就无法进行条件分支。这可以通过`cmp`或添加`s`到大多数指令来完成。查看 ARM 程序集文档以了解详细信息。快速示例：

`r0`如果大于 5则分支：

```
cmp r0, #5 ;Performs r0-5 and sets condition register
bgt label_foo ;Branches to label_foo if condition register is set to GT 
```

`r6`与比较`r4`，将差异放入`r7`，分支 if `r7 < 0`：

```
subs r7, r6, r4 ;Performs r7 = r6 - r4 and sets condition register
blt label_bar ;Branches to label_bar if r7 < 0 (in which case r6 < r4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-04T11:14:55.597

> 如果我想使用 CMP 比较 r6 和 r4 并将差异放入 r7，我该怎么做？

```
subs r7, r6, r4    /* r7 ← r6 - r4 */ 
```

> 同样的问题，如果我想在 r7 小于 0 时使用 BLT，我该怎么做？

```
bmi _exit          /* branch if r7 < 0 */ 
```

BMI（减号/负号） 当 N 被启用时（N 为 1），其中 N 是一个标志，如果指令的结果产生一个负数，则该标志将被启用。否则禁用。

为什么是 subS 而不是 sub？因为 S 是指定时的可选后缀，所以条件标志（如 N）会根据操作结果更新。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:15:34.203

您应该查看 ARM 文档（CMP 文档示例）： http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0068b/ [CIHIDDID.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0068b/CIHIDDID.html)

从那里可以读到的内容，您尝试执行的操作可能需要两条指令，而不仅仅是一条指令（除非您的 ARM 汇编器进行一些特殊处理）

亲切的问候，
博

# android - 如何使用 Jenkins 和 Ant 从 Git 存储库子目录构建？

> ID：10601266
> 
> 赞同：2
> 
> 时间：2012-05-15T13:02:58.023
> 
> 标签：android, git, ant, jenkins, gitosis

我已将 Jenkins CI 配置为与 GitHub 一起使用。它成功填充了我的 ${workspace} 但我要构建的实际项目位于 repo 的子目录中：

[https://github.com/androidfu/CodeExamples](https://github.com/androidfu/CodeExamples)

从 Jenkins 中调用 Ant 表明它找不到 build.xml。嗯，这是因为 build.xml 实际上存在于 ${workspace}/DeveloperDebugPreferences 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:49:02.697

您可以为 Ant 配置构建文件以在 Jenkins 中使用。如果您正在浏览 Jenkins 服务器上的作业，您可以选择配置，然后选择 Ant 目标下方的高级选项。

如果你想编辑你的`config.xml`文件，你应该会看到类似这样的构建设置：

```
<builders>
  <hudson.tasks.Ant>
    <targets>your_target_name</targets>
    <buildFile>${workspace}/DeveloperDebugPreferences/build.xml</buildFile>
  </hudson.tasks.Ant>
</builders> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T13:46:21.833

我想更进一步，制作一个在提交到 Git 时启动的构建系统，它会检查代码，构建它并通过 SSH 发布它。此外，我希望在文件名中标记构建的提交。第一步是使用 git 中的 post-receive 和本地安装的 Jenkins 启动构建过程。如果它是远程的，您需要指定一个 URL 并使用 wget 或 curl。作为参考，这是我们的[Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)。

* * *

## Git 后接收

```
# This must be read using read because the values are passed on 
# STDIN not as command-line arguments.
read OLDREV NEWREV REFNAME
BRANCH=${REFNAME#refs/heads/} 

. /usr/share/doc/git-core/contrib/hooks/post-receive-email

if [ ${BRANCH} == "master" ]; then
    /usr/local/bin/jenkins-start "Our Project - Android - Releases"
elif [ ${BRANCH} == "develop" ]; then
    /usr/local/bin/jenkins-start "Our Project - Android - Development"
fi 
```

## 詹金斯

事物的开发方面与发布基本相同，但我们建立在对开发分支的提交上，而不是 master。由于该服务器仅托管 git 和 Jenkins，并且 Eclipse 和 Xcode 环境安装在 Mac Mini 上，因此我们将其用作构建服务器 Jenkins 配置为使用带有证书的 SSH 进行登录。Jenkins 服务器通过 SSH 连接到构建服务器，签出代码，构建代码，然后通过 SSH 将结果发送到我们的软件架。唯一特殊的部分是使这项工作起作用的 Ant build.xml 部分。

在 Build - Execute Shell - 我们输入的命令下

```
~/android-sdks/tools/android update project -p "$WORKSPACE/OurProject" 
```

在调用蚂蚁

```
-buildfile "$WORKSPACE/OurProject/build.xml" clean debug 
```

## 蚂蚁属性

这是我们放置有关用于签署二进制文件的密钥库的信息的地方。

```
key.store=ourProject.keystore
key.alias=release
key.store.password=aBigSecret
key.alias.password=aBigSecret 
```

## 构建.xml

因此，在项目 build.xml 中，我们覆盖了几个目标，以使 git 提交哈希出现在文件名中。例如，OurProject 1.0.0 (deadbeef)-release.apk。构建完成后，Jenkins 将文件复制到我们的软件架上。

```
<target name="-set-debug-files" depends="-set-mode-check">
    <exec executable="git" outputproperty="git.revision" failifexecutionfails="false" errorproperty="">
        <arg value="rev-parse"/>
        <arg value="--short"/>
        <arg value="HEAD"/>
    </exec>
    <xpath input="AndroidManifest.xml"
           expression="/manifest/@android:versionName"
           output="android.app.version.name"
           default="Unknown" />
    <property name="out.packaged.file" location="${out.absolute.dir}/${ant.project.name}-debug-unaligned.apk" />
    <property name="out.final.file" location="${out.absolute.dir}/${ant.project.name}-${android.app.version.name} (${git.revision})-debug.apk" />
    <property name="build.is.mode.set" value="true" />
</target>

<target name="-set-release-mode" depends="-set-mode-check">
    <exec executable="git" outputproperty="git.revision" failifexecutionfails="false" errorproperty="">
        <arg value="rev-parse"/>
        <arg value="--short"/>
        <arg value="HEAD"/>
    </exec>
    <xpath input="AndroidManifest.xml"
           expression="/manifest/@android:versionName"
           output="android.app.version.name"
           default="Unknown" />
    <property name="out.packaged.file" location="${out.absolute.dir}/${ant.project.name}-release-unsigned.apk" />
    <property name="out.final.file" location="${out.absolute.dir}/${ant.project.name}-${android.app.version.name} (${git.revision})-release.apk" />
    <property name="build.is.mode.set" value="true" />

    <!-- record the current build target -->
    <property name="build.target" value="release" />

    <property name="build.is.instrumented" value="false" />

    <!-- release mode is only valid if the manifest does not explicitly
         set debuggable to true. default is false. -->
    <xpath input="AndroidManifest.xml" expression="/manifest/application/@android:debuggable"
            output="build.is.packaging.debug" default="false"/>

    <!-- signing mode: release -->
    <property name="build.is.signing.debug" value="false" />

    <!-- Renderscript optimization level: aggressive -->
    <property name="renderscript.opt.level" value="${renderscript.release.opt.level}" />

    <if condition="${build.is.packaging.debug}">
        <then>
            <echo>*************************************************</echo>
            <echo>****  Android Manifest has debuggable=true   ****</echo>
            <echo>**** Doing DEBUG packaging with RELEASE keys ****</echo>
            <echo>*************************************************</echo>
        </then>
        <else>
            <!-- property only set in release mode.
                 Useful for if/unless attributes in target node
                 when using Ant before 1.8 -->
            <property name="build.is.mode.release" value="true"/>
        </else>
    </if>
</target> 
```

## 软件架

这只是一个可公开访问的网页，其中 PHP 脚本按日期顺序显示构建。

```
<?php
require('header.html'); 
?>
<h2>All builds</h2>
<table>

<?php

$dir = dirname($_SERVER[SCRIPT_FILENAME]);

$filenames = scandir($dir);
$files = array();
$fileTimes = array();
$j = 0;
$n = count($filenames);
for ($i = 0; $i < $n; $i++) {
  $filename = $filenames[$i];
  if ( is_file($filename) && pathinfo($filename, PATHINFO_EXTENSION) == "apk" ) {
    $time = filemtime($filename);

    $files[$j] = array("name"=>$filename, "time"=>$time );
    $fileTimes[$j] = $time;
    $j++;
  }
}

array_multisort($fileTimes, SORT_DESC, $files);

$tablerow_classes = array("t0", "t1");
$current_class = 0;

$m = count($files);
for ( $i = 0; $i < $m; $i++ ) {
  $name = $files[$i]["name"];
  $time = date ("d/m/Y H:i:s", $files[$i]["time"]);
  $class = $tablerow_classes[$current_class];
  $current_class++;
  if ( $current_class > 1 ) {
    $current_class = 0;
  }
  echo "<tr class=\"$class\"><td><a href=\"$name\">$name</a></td><td>$time<br /></tr>";
}

?>

</table>

<?php
require('footer.html'); 
```

总之，该系统提供了一个完整的构建系统，它允许您将特定的二进制文件跟踪回特定的提交。

# php - Web 应用程序的 LAMP 堆栈有任何问题吗？（安全性、可扩展性、速度、功能等）

> ID：10601268
> 
> 赞同：2
> 
> 时间：2012-05-15T13:03:04.957
> 
> 标签：php, security, scalability, lamp, enterprise

我正在构建一个简单的通信平台，供客户向银行提交申请。基本上，一方会提交一份数据表格，银行会收到通知，并可以登录查看提交的申请。

我想得到人们的意见是，在 LAMP 堆栈上构建它是否有明显的缺点。永远不应该有大量的并发流量，所以我不太关心可伸缩性。我唯一能想到的可能值得考虑的是安全性或性能，我对此不太了解。

LAMP 是我过去从构建 Web 应用程序中所知道的，我也想在这个项目中使用它，除非有重要的理由不这样做。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:08:21.213

LAMP 堆栈绝对没有不安全或“性能不佳”的地方。最大的安全风险在于系统管理员或 web/db 开发人员，他们在安全问题方面没有受过良好的教育，从而产生不安全的代码或配置。

如果您对安全性不是“太了解”，并且您正在处理敏感信息，我强烈建议您聘请这样的人来帮助开发或测试您的应用程序和服务器配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T23:59:37.163

我在几家 Alexa-top 200 公司中使用了 LAMP，并取得了很好的效果。它可以很好地扩展且可预测，如果管理得当，它是安全的，并且在所涉及的开发时间方面非常快速。在这种情况下，我给 Java 的唯一优势是大量的“企业”库代码。

# javascript - 在 AS3 中调用 JavaScript

> ID：10601269
> 
> 赞同：0
> 
> 时间：2012-05-15T13:03:05.310
> 
> 标签：javascript, actionscript-3, externalinterface

所以我有这个可扩展的横幅。一切都很好，但是当我在我们的系统上测试它时，它并没有扩展。这就是问题所在。因为我们的系统使用这个 JavaScript 进行浮动：`getURL("javascript:expandEaFloating('"+_level0.id+"')");` 但这是 AS2，我需要它用于 AS3。这是代码：

```
import flash.external.ExternalInterface;
import flash.events.Event;
stop();

b1_btn.buttonMode = true;

b1_btn.addEventListener(MouseEvent.MOUSE_OVER, aBanner2);
b1_btn.addEventListener(MouseEvent.MOUSE_OVER, openBaner);

function openBaner(e:Event){  
    ExternalInterface.call("expandEaFloating('"+root.id+"')");
}

function aBanner2(e:Event){
this.gotoAndStop(2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:06:18.393

尝试这个：

```
ExternalInterface.call("expandEaFloating",root.id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:20:29.790

而不是 root.id 使用 ExternalInterface.objectID

```
ExternalInterface.call("expandEaFloating",ExternalInterface.objectID); 
```

来自 adobe 文档：

> 返回 Internet Explorer 中 object 标记的 id 属性，或 Netscape 中 embed 标记的 name 属性。

所以请务必将对象标签的 id 和 name 设置为相同的值！

# javascript - JSF中的Javascript - “body onload =” vs标签

> ID：10601270
> 
> 赞同：0
> 
> 时间：2012-05-15T13:03:05.507
> 
> 标签：javascript, jsf-2, onload, param

我正在尝试在我的一个 JSF 页面上使用 javascript。不幸的是

```
<h:body onload="init('#{formBean.arrayAsString}')"> 
```

根本不被调用。我发现如果我在导航到页面的导航案例中添加 /redirect 标记，该功能将加载。不幸的是，这会导致另一个问题，因为导航时我还传递了重要的 f:param 以便 formBean 可以读取它。如果我使用 /redirect 标记，则参数值不再可供读取。

如何在不使用重定向标签的情况下加载 javascript init 函数？或者也许我可以通过重定向以某种方式传递 f:param 值，但据我所知这是不可能的......

我在下面发布导航方法：

第一个 .xhtml 页面：

```
<h:selectOneMenu id="selectMenu" value="#{indexBean.name_id}">
    <f:selectItems value="#{indexBean.myModelValues}" />    
    <f:ajax event="valueChange" render="button" execute="@this"/>       
</h:selectOneMenu>
                <h:commandButton id="button" value="Go to form Browse" action="form">
                  <f:param name="name" value="#{indexBean.name_id}" />                                       
                </h:commandButton> 
```

请记住，此按钮也由 ah:selectOneMenu 的 ajax 事件重新呈现，以传递选定的值。

和导航案例：

```
 <navigation-rule>
        <from-view-id>/index.xhtml</from-view-id>
        <navigation-case>   
            <from-outcome>
                form
            </from-outcome>
            <to-view-id>
                /form.xhtml
            </to-view-id>
            <redirect/>
        </navigation-case>
        </navigation-rule> 
```

重定向标签是一个启用 JavaScript 初始化功能的新插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:51:49.930

如果该操作由 ajax 调用，就会发生这种情况。使其成为非 ajax 动作。

* * *

**更新**：根据您的问题更新，替换`<a4j:commandButton>`为`<h:commandButton>`使其成为非 ajax 操作。顺便说一句，在 JSF 2 中，如果 from 结果已经等于 to view ID，则不再需要导航案例。删除整个`<navigation-rule>`，你不需要它。

# node.js - 从 WebSocket 请求中读取 cookie 信息

> ID：10601272
> 
> 赞同：1
> 
> 时间：2012-05-15T13:03:09.450
> 
> 标签：node.js, cookies, websocket, connect

我正在使用 Node.js 和 WebSocket-Node ( [WebSocket-Node](https://github.com/Worlize/WebSocket-Node) ) 创建 WebService。我需要从 Web 服务器访问 cookie 或会话信息，以将 WebSocket 连接绑定到用户 ID。我知道 cookie 信息是通过 req.cookies 发送的，但我不熟悉访问“connect.sid”cookie 的语法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:46:27.967

通过查看库代码（大约第 200 行）：

[https://github.com/Worlize/WebSocket-Node/blob/master/lib/WebSocketRequest.js](https://github.com/Worlize/WebSocket-Node/blob/master/lib/WebSocketRequest.js)

似乎 cookie 是具有“名称”和“值”属性的对象数组

所以你可以有这样的功能（*未经测试*）：

```
function getSidFromCookies(cookies) {
     var filtered = cookies.filter(function(obj) {
         return obj.name == 'connect.sid';
     });
     return filtered.length > 0 ? filtered[0].value : null;
} 
```

那么你可以这样做：

```
var connectSid = getSidFromCookies(req.cookies); 
```

**connectSid**将是 cookie 值或 null

# java - Netbeans - 导入项目

> ID：10601275
> 
> 赞同：0
> 
> 时间：2012-05-15T13:03:24.550
> 
> 标签：java, netbeans, import

我开发了一个 java swing 项目，当我在我的电脑上编译和运行它时它运行良好。但是当我复制项目文件夹并在另一台电脑上打开它时，它无法正常运行。它运行但不访问包中的其他类。只有主类被执行。但是输出 JAR 在两台 PC 上都可以正常工作。谁能告诉我可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:06:05.780

确保复制项目的***整个***文件夹。

# python - 是否有一个 SUMIF 函数可以对 Python 字典中的标识符求和？

> ID：10601276
> 
> 赞同：0
> 
> 时间：2012-05-15T13:03:25.257
> 
> 标签：python, dictionary, sum

对不起，如果这是一个太简单的问题，但是`sumif`python 中是否有一个函数可以`sum`通过标识符和类别？所以在这种情况下，我想要一个函数`sumif`，它将标识符和年份作为参数，并对金额求和。例如`sumif('105','2006')`应该返回`1200`。

```
data = {'105':[{'2005': 500}, {'2005', 13000}, {'2006', 100}, {'2006', 200}, {'2006', 900}], '256': [{'2005', 5000}, {'2005', 800}]} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:08:01.363

```
>>> from collections import Counter
>>> data = {'105':[{'2005': 500}, {'2005': 13000}, {'2006': 100}, {'2006': 200}, {'2006': 900}], '256': [{'2005': 5000}, {'2005': 800}]}

>>> sum(map(Counter, data['105']), Counter())['2006']
1200 
```

因此 的定义`sumif`将是：

```
sumif = lambda x, y: sum(map(Counter, data[x]), Counter())[y] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:13:45.123

如果参数是常量并且字典的大小始终相同，则类似于

```
sum( d.values()[0] for d in data['105'] if d.keys()[0] == '2006') 
```

有很多方法

一个更好的问题是：奇怪的数据结构（带有单例字典）从何而来？

# c++ - WiX c++ :: 在延迟 ca 中使用 dll 条目的正确方法

> ID：10601280
> 
> 赞同：1
> 
> 时间：2012-05-15T13:03:37.057
> 
> 标签：c++, wix, custom-action, dllexport

我有一个包含 2 个不同 .cpp 的项目。MyProj 由 MyCPP1 和 MyCPP2 组成 MyCPP1 包含要从 msi 使用 wix 执行的不同功能。

```
extern "C" __declspec(dllexport) UINT __stdcall MyCAFunction(MSIHANDLE hInstall)
{
    TCHAR name[MAX_PATH] = {0};
    DWORD nameLen = MAX_PATH;
    TCHAR keydir[MAX_PATH] = {0};
    DWORD keydirLen = MAX_PATH;

    MsiGetProperty (hInstall, L"Val1", name, &nameLen);
    MsiGetProperty (hInstall, L"Val2", keydir, &keydirLen);
} 
```

wix代码是：

```
<CustomAction Id="MyCA.Props" Return="check" Property="MyCA" value="Val1=[LogonUser];Val2=[INSTALLDIR]"/>
<CustomAction Id="MyCA" Return="check" Execute="deferred" BinaryKey="Binary1" DllEntry="_MyCAFunction@4" HideTarget="no" />
<Binary Id="Binary1" SourceFile="$(var.ConfDir)MyProj.dll" /> 
```

嗯......所以我有一个错误：

> 错误 1723：无法运行完成此安装所需的 DLL。

我需要怎么挖？

我对 CA 类型有一些想法……例如带有 FileKey 引用的 CA 的基本类型是 17。但我的 CA 类型是 1041（Orca 有帮助）。会不会是我的问题？

我已经检查了具有不同类型 CA 的版本。它只是因为 CA 的参数（只是删除 Execute="deferred" 将类型从 1041 更改为 17（标准类型）。解决这个问题的最后一件事是 dll。我今天会看到它......有什么问题吗？

尝试了不同的构建dll的方法。仅适用于由 C++ Wix 自定义操作项目的示例项目构建的 dll。我比较了 3 或 4 个不同的项目。通过道具、链接、外部依赖...找不到问题...帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:46:29.247

检查从 DLL 导出的函数的名称。

为此，请在带有标志[`dumpbin`](http://support.microsoft.com/kb/177429/en-us "DUMPBIN 实用程序的说明")的 DLL 上运行实用程序。`/exports`

# cakephp - CakePHP - Find 方法中的 MySQL 查询

> ID：10601282
> 
> 赞同：0
> 
> 时间：2012-05-15T13:03:41.043
> 
> 标签：cakephp, cakephp-2.0

我有这个 MySQL 查询：

```
SELECT DISTINCT hours.project_id
          , projects.name
          , sum(hours.spent_hours) AS expr1
          , sum(hours.invoiced_hours) AS expr2
              , hours.description
FROM
  projects
INNER JOIN hours
ON projects.id = hours.project_id
GROUP BY
  hours.project_id
, projects.id
, projects.name
, hours.description 
```

你会如何在 CakePHP 中的 FIND 方法中放置片段？我尝试了几次，但没有任何运气...

我在文档中找到了这个：

```
array(
'conditions' => array('Model.field' => $thisValue), //array of conditions
'recursive' => 1, //int
'fields' => array('Model.field1', 'DISTINCT Model.field2'), //array of field names
'order' => array('Model.created', 'Model.field3 DESC'), //string or array defining order
'group' => array('Model.field'), //fields to GROUP BY
'limit' => n, //int
'page' => n, //int
'offset'=>n, //int   
'callbacks' => true //other possible values are false, 'before', 'after' 
```

)

有关数据库的其他信息：

项目有很多小时。小时属于项目。以小时为单位是 project_id。

CakePHP 2.1.2。

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:59:14.963

我假设您在以下几行的**项目模型中。**

```
$result = $this->find(
    'all',
    array(
        'fields' => array(
            'Hour.projetc_id', 
            'Project.id', 
            'Project.name', 
            'SUM(Hour.spent_hours) AS expr1', 
            'SUM(Hour.invoiced_hours) AS expr2', 
            'Hour.description'
        ),
        'group' => array(
            'Hour.projetc_id',
            'Project.id',
            'Project.name',
            'Hour.description'
        )
    )
); 
```

您可能还想看看[那里](http://nuts-and-bolts-of-cakephp.com/2008/09/29/dealing-with-calculated-fields-in-cakephps-find/)管理数组中的计算字段。

最后，我建议看一下[**Containable Behavior**](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)，因为它会加速您的数据库查询并允许真正从数据库中获取您需要的内容。

# asp.net - 无法删除文件

> ID：10601283
> 
> 赞同：0
> 
> 时间：2012-05-15T13:03:41.150
> 
> 标签：asp.net, vb.net

```
 Sub Main()
            Try
                Dim output, filename1, filename2, filename3, date1, date2 As String

                'today's final
                output += "Report Dates: " & date1 & " and " & date2
                filename1 = "filename1.doc"
                SaveToFile(output, filename1)

                'today's daily
                output = "Report Dates: " & date1 & " and " & date2
                filename2 = "filename2.doc"
                SaveToFile(output, filename2)

                'yesterday's final
                output = "Report Dates: " & date1 & " and " & date2
                filename3 = "filename3.doc"
                SaveToFile(output, filename3)

    'email files here
    SendEmail(to, body,date1);

                'detele temp files
                DeleteFile(filename1)
                DeleteFile(filename2)
                DeleteFile(filename3)
            Catch e As Exception
                cEmail.SendErrorEmail("me@hme.com", e.Message)
            End Try

    End Sub

Sub SaveToFile(ByVal text As String, ByVal fileName As String)
        Dim path As String = "c:\temp\" & fileName
        Try
            If File.Exists(path) = True Then
                File.Delete(path)
            End If

            ' Create a file to write to.
            Dim sw As StreamWriter = File.CreateText(path)
            sw.WriteLine(text)
            sw.Flush()
            sw.Close()

            ' Open the file to read from.
            Dim sr As StreamReader = File.OpenText(path)
            Do While sr.Peek() >= 0
                Console.WriteLine(sr.ReadLine())
            Loop
            sr.Close()
        Catch e As Exception
            message = "in SaveToFile  " & e.Message
            cEmail.SendErrorEmail("me@hme.com", message)
        End Try
    End Sub

Sub DeleteFile(ByVal fileName As String)
        Dim path As String = "c:\temp\" & fileName
        Try

            If File.Exists(path) = True Then
                File.Delete(path)
            End If

        Catch e As Exception
            message = "in DeleteFile  " & e.Message
            cEmail.SendErrorEmail("me@hme.com", message)
        End Try
    End Sub 
```

我收到以下错误：

> 在 DeleteFile 进程无法访问文件 'c:\temp\filename2.doc' 因为它正被另一个进程使用。

我应该在删除文件之前释放任何进程吗？我错过了什么？

编辑：这是我发送文件的“发送电子邮件”功能

```
 Public Sub SendEmail(ByVal msgTo As String, ByVal msgBody As String, ByVal date1 As String)

        Dim mail As New MailMessage()
        Dim objSMTP As New SmtpClient()
        Dim filename As String

        ''''''''''''''''''''''''''''''''''''''

        Try
            mail.To.Add(msgTo)
            mail.Bcc.Add("me@hme.com")
            mail.Priority = MailPriority.Normal
            mail.IsBodyHtml = True
            mail.Subject = "subject"
            mail.Body = msgBody

            filename = "filename1.doc"
            Dim DOERecords As New Net.Mail.Attachment("C:\temp\" & filename) 'create the attachment
            filename = "filename2.doc"
            Dim FOERecords As New Net.Mail.Attachment("C:\temp\" & filename) 'create the attachment
            filename = "filename3.doc"
            Dim FOERecords2 As New Net.Mail.Attachment("C:\temp\" & filename) 'create the attachment

            mail.Attachments.Add(DOERecords) 'add the attachment
            mail.Attachments.Add(FOERecords) 'add the attachment
            mail.Attachments.Add(FOERecords2) 'add the attachment

            objSMTP.Send(mail)

        Catch ex As Exception
            Throw ex
        End Try
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:22:50.673

您需要处理所有附件对象，否则您将留下打开的文件句柄。您可以简单地调用 MailMessage 上的 Dispose。这将触发对任何附件的处置。

```
objSMTP.Send(mail) 
mail.Dispose() 
```

`Using`如果您使用语句封装邮件对象，则可以避免这种情况

```
Using(mail as MailMessage = New MailMessage())
....
End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:21:18.727

我会在你使用文件的地方添加一些用法：

```
 Using sw As StreamWriter = File.CreateText(path)
          sw.WriteLine(text)
          sw.Flush()
          sw.Close()
        End Using

          ' Open the file to read from.             
        Using sr As StreamReader = File.OpenText(path)
          Do While sr.Peek() >= 0
            Console.WriteLine(sr.ReadLine())
          Loop
          sr.Close() 
        End Using 
```

usings 负责由流对象实现的 IDisposable 接口。它将取消分配给文件的锁。

邮件对象应该实现相同的模式：

```
 Using mail As New MailMessage()  
          ....
          End Try 
        End Using 
```

# flash - 给游戏开发者的 AS3 Event.ENTER_FRAME 提示

> ID：10601289
> 
> 赞同：0
> 
> 时间：2012-05-15T13:03:52.700
> 
> 标签：flash, actionscript

我是 Flash 游戏开发的新手，目前我正在开发我的第一个游戏。角色扮演动作游戏。我遇到了 ENTER_FRAME 事件的问题。

我目前有 3 个 ENTER_FRAME 事件，来自我的文档类、英雄和地面。每次我运行应用程序时，Flash 播放器都会崩溃。

解决这个问题的好方法是什么？我正在考虑拥有一个主要的 enterframe 事件来控制一切并改变我的设计模式.. T_T。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:08:04.580

在您的文档类中，您可以拥有：

```
addEventListener(Event.ENTER_FRAME, onEnter);
private function onEnter(e:Event):void
{
    hero.update();
    ground.update();
    //do other stuff    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:00:38.630

我发现最好的方法是使用一个主`enterframe`来保持速度。您可以使用 many `enterframes`，但我希望它会降低速度。

# windows-8 - 在 Windows 8 Metro 风格应用程序中绑定到控件的 FocusState

> ID：10601292
> 
> 赞同：0
> 
> 时间：2012-05-15T13:03:57.703
> 
> 标签：windows-8, winrt-xaml, xaml-binding

我正在使用以下代码将该`RichTextBlock.Visibility`属性绑定到另一个控件的`FocusState`属性。

```
 <RichTextBlock FontFamily="Segoe UI" FontSize="22" FontWeight="Light" 
                               Foreground="{StaticResource SwiftLightTextBrush}" 
                               Visibility="{Binding ElementName=ProfessionalHeadlineInput, Path=FocusState, Converter={StaticResource FocusStateToVisibilityConverter}}" > 
```

的实现 `FocusStateToVisibilityConverter.Convert`如下：

```
public object Convert(object value, Type targetType, object parameter, string language)
{
    var focusState = (FocusState)value;

    return focusState == FocusState.Keyboard || focusState == FocusState.Pointer || focusState == FocusState.Programmatic ? Visibility.Visible : Visibility.Collapsed;
} 
```

这可能是一个新手问题，但是当我使用鼠标或选项卡导航“聚焦”到目标元素（`ProfessionalHeadlineInput`是一个元素）时，为什么不应用绑定？`TextBox`

我已将断点插入到`Convert`方法中，但是当我单击或“切换”到`ProfessionalHeadlineInput`TextBox 时，它不会被调用。

**NB**重要的部分 - 我的项目是一个 Windows 8 Metro 风格的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:38:56.477

确保`FocusState`是`DP`，确保它确实改变了我在这里看到的唯一原因 -`FocusState`可能不会改变，其他一切看起来都很好。此外，尝试明确设置`Mode=OneWay`和`UpdateSourceTrigger=PropertyChanged`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T11:01:50.237

我在微软论坛上得到了 Matt Small 的[回答](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/49acb109-799c-4b67-8a97-403329592ed3)：

> 好的 - 这实际上是 FocusState 的一个错误 - 它没有更新值。我在我们的数据库中提交了一个错误。谢谢你提出这个问题。

# c# - 具有多个实现的一个接口的多个生命周期

> ID：10601294
> 
> 赞同：0
> 
> 时间：2012-05-15T13:04:16.940
> 
> 标签：c#, dependency-injection, castle-windsor, lifecycle

CastleWindsor 是否可以为具有多个实现的一个接口配置多个生命周期？

```
IFoo 
```

`FooA : IFoo` **生命周期：单例**

`FooB : IFoo` **生命周期：瞬态**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:01:53.500

没有更多上下文，我最好的答案是：使用代理：

```
public class FooProxy : IFoo
{
    private readonly FooA a;
    private readonly FooB b;

    public FooProxy(FooA a, FooB b)
    {
        this.a = a;
        this.b = b;
    }

    void IFoo.SomeFooMethod()
    {
        this.GetFooBasedOnSomeCondition().SomeFooMethod();
    }

    private IFoo GetFooBasedOnSomeCondition()
    {
        return condition ? this.a : this.b;
    }
} 
```

此代理类依赖于`FooA`并且`FooB`您可以将其注册为瞬态以解析为`IFoo`.

另一种选择是注册一个委托工厂，它返回正确的实现：

```
container.AddFacility<FactorySupportFacility>();

container.Register(Component.For<IFoo>()
    .UsingFactoryMethod(() =>
    {
        return condition
            ? container.Resolve<FooA>()
            : container.Resolve<FooB>();
    })
    .LifeStyle.Transient); 
```

# objective-c - 如何按 NSMutableDictonary 的值对 NSArray 进行排序

> ID：10601295
> 
> 赞同：0
> 
> 时间：2012-05-15T13:04:19.780
> 
> 标签：objective-c

我想尝试按`NSMutableDictionary`'s value which key is `price`in people which is排序`NSMutableArray`。

像这样...

```
people = [
  ["price" => 133, "name" => "banana"],
  ["price" => 333,"name" => "apple"],
  ["price" => 3, "name" => "orange"],
] 
```

我想要这样：

```
copiedPeople = [
  ["price" => 3, "name" => "orange],
  ["price" => 133,"name" => "banana"],
  ["price" => 333, "name" => "apple"],
] 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:07:55.483

`sortUsingComparator:`让您传入一个说明如何对项目进行排序的块。所以你可以这样做：

```
[people sortUsingComparator: ^NSComparisonResult(id obj1, id obj2) {
    return [[obj1 objectForKey: @"price"] compare: [obj2 objectForKey: @"price"]];
}]; 
```

编辑：刚刚看到你的编辑......你可以`sortedArrayUsingComparator:`在 NSArray 上使用来创建一个新的排序数组。

# javascript - Facebook javascript：如何获取用户对应用程序执行的操作列表

> ID：10601296
> 
> 赞同：0
> 
> 时间：2012-05-15T13:04:21.270
> 
> 标签：javascript, facebook

我正在创建一个应用程序，可以帮助用户根据需要将文章发布到他们的时间线。
我还想帮助他们直接在我的网站上轻松删除过去的操作。

我正在寻找使用 javascript 的解决方案。
我想创建用户使用我的应用程序使用当前 Facebook 登录/授权用户 ID 和我的应用程序 ID 执行的最后 10 个操作（ID、标题）的列表。

此处的帮助中没有列表操作的详细信息：http: [//developers.facebook.com/docs/opengraph/actions/](http://developers.facebook.com/docs/opengraph/actions/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:34:20.447

您可以从发布它们的同一端点获取操作列表 - 只需像往常一样使用 GET 而不是 POST：

`/userid/{namespace}:{action-type-name}`

# java - Maven 无法通过强制身份验证从 HTTPS Nexus 下载工件

> ID：10601297
> 
> 赞同：5
> 
> 时间：2012-05-15T13:04:24.663
> 
> 标签：java, maven, https, certificate, nexus

我有一个可通过 HTTPS 访问的 Nexus。只有授权用户有权访问它。使用 Maven，当所有必需的工件都在本地存储库中时，我什至可以部署构建工件。但是当我从本地存储库中删除一些必需的工件时，构建失败。

```
Downloading: https://example.com/nexus/content/groups/all/org/springframework/spring-test-mvc/1.0.0.BUILD-SNAPSHOT/spring-test-mvc-1.0.0.BUILD-SNAPSHOT.pom
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] example - project1 ..................................... SUCCESS [0.500s]
[INFO] example - project2 ..................................... FAILURE [2.951s]
[INFO] example - project3 ...................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.599s
[INFO] Finished at: Tue May 15 13:58:13 EEST 2012
[INFO] Final Memory: 6M/121M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project example - project2: Could not resolve dependencies for project com.example:example-project:jar:1.2.0-SNAPSHOT: Failed to collect dependencies for [com.example:example-project:jar:1.2.0-SNAPSHOT (compile), org.springframework:spring-beans:jar:3.1.1.RELEASE (compile), org.springframework:spring-context:jar:3.1.1.RELEASE (compile), org.springframework:spring-core:jar:3.1.1.RELEASE (compile), org.springframework:spring-test:jar:3.1.1.RELEASE (test), org.springframework:spring-web:jar:3.1.1.RELEASE (compile), org.apache.httpcomponents:httpclient:jar:4.1.1 (test), org.codehaus.jackson:jackson-mapper-asl:jar:1.9.6 (compile), org.springframework:spring-test-mvc:jar:1.0.0.BUILD-SNAPSHOT (test), junit:junit:jar:4.10 (test), org.mockito:mockito-all:jar:1.9.0 (test), org.hamcrest:hamcrest-all:jar:1.1 (compile), org.slf4j:slf4j-api:jar:1.6.1 (compile), org.slf4j:slf4j-log4j12:jar:1.6.1 (compile), log4j:log4j:jar:1.2.16 (compile), log4j:apache-log4j-extras:jar:1.1 (compile)]: Failed to read artifact descriptor for org.springframework:spring-test-mvc:jar:1.0.0.BUILD-SNAPSHOT: Could not transfer artifact org.springframework:spring-test-mvc:pom:1.0.0.BUILD-SNAPSHOT from/to nexus (https://example.com/nexus/content/groups/all): Not authorized, ReasonPhrase:Unauthorized. -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException
[ERROR]
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :grc-webclient-services 
```

我的用户的settings.xml中有以下内容：

```
<settings>
<pluginGroups>
    </pluginGroups>
    <proxies>
    </proxies>
    <mirrors>
      <mirror>
        <id>nexus</id>
        <mirrorOf>*</mirrorOf>
        <url>https://example.com/nexus/content/groups/all</url>
      </mirror>
    </mirrors>

    <profiles>
        <profile>

            <id>nexus</id>

            <properties>
                <sonar.jdbc.url>jdbc:mysql://localhost:3306/sonardb?useUnicode=true&amp;characterEncoding=utf8</sonar.jdbc.url>
                <sonar.jdbc.driverClassName>com.mysql.jdbc.Driver</sonar.jdbc.driverClassName>
                <sonar.jdbc.username>sonarusername</sonar.jdbc.username>
                <sonar.jdbc.password>sonarpw</sonar.jdbc.password>
                <sonar.host.url>http://localhost:9000/</sonar.host.url>
            </properties>

            <repositories>
                <repository>
                    <id>central</id>
                    <url>https://example.com/nexus/content/groups/all</url>
                    <releases><enabled>true</enabled></releases>
                    <snapshots><enabled>true</enabled></snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>central</id>
                    <url>https://example.com/nexus/content/groups/all</url>
                    <releases><enabled>true</enabled></releases>
                    <snapshots><enabled>true</enabled></snapshots>
                </pluginRepository>
            </pluginRepositories>

        </profile>
    </profiles>

    <servers>
        <server>
            <id>all</id>
            <username>user</username>
            <password>pw</password>
        </server>
        <server>
            <id>releases</id>
            <username>user</username>
            <password>pw</password>
        </server>
        <server>
            <id>snapshots</id>
            <username>user</username>
            <password>pw</password>
        </server>
    </servers>

    <activeProfiles>
        <activeProfile>nexus</activeProfile>
    </activeProfiles>

</settings> 
```

当我使用 wget 从这个 Nexus 下载工件时，我必须添加 --no-check-certificate 密钥来跳过服务器的证书（因为它是自签名的），然后我可以使用 wget 下载它。

我犯了 Java 密钥 -Dsun.security.ssl.allowUnsafeRenegotiation=true，但它根本没有改变任何东西。

之后我发现这可能不是自签名证书问题，因为我使用命令将服务器的证书添加到受信任列表中：

```
keytool -keystore $JAVA_HOME/jre/lib/security/cacerts -import -file certificate.cer 
```

有人知道如何在构建时从 Nexus 下载工件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T22:00:55.447

我不得不改变

```
<server>
    <id>all</id>
    <username>user</username>
    <password>pw</password>
</server> 
```

到

```
<server>
    <id>nexus</id>
    <username>user</username>
    <password>pw</password>
</server> 
```

其中 'nexus' 是我的镜像顶部的标识符`settings.xml`。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-06-10T11:05:43.380

添加 wagon-http-lightweight 扩展，很好的解释

[maven代理配置的最佳解决方案](http://thiranjith.com/2012/10/31/how-to-configure-maven-to-work-with-ntlm-proxies/)

# azure - Azure 中的辅助角色工作？

> ID：10601302
> 
> 赞同：0
> 
> 时间：2012-05-15T13:04:41.450
> 
> 标签：azure, scheduled-tasks, azure-worker-roles

我有一个通过工作角色发送自动邮件的应用程序。当我在 Visual Studio 中调试我的应用程序时，我在 WorkerRole.cs 中设置的 OnStart() 任务完美运行，我每 5 分钟收到一封邮件（出于测试目的）。我在 WorkerRole.cs 中的代码：

```
 public override bool OnStart()

    {
        ScheduledTaskTimer.Elapsed += new ElapsedEventHandler(ScheduledTaskTimer_Elapsed);
        // ScheduledTaskTimer.Interval = 86400000;
        ScheduledTaskTimer.Interval = 180000;

        ScheduledTaskTimer.Enabled = true;
        return base.OnStart(); } 
```

但是当我部署到 Windows Azure 时，我的辅助角色似乎不起作用。我从来没有收到任何邮件..我不知道如何检查工人角色是否真的在运行..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:55:35.740

您可以使用 Microsoft 提供的 silverlight 界面查看您的辅助角色的状态，网址为：http: [//windows.azure.com](http://windows.azure.com)

如果您看到您的 WorkerRole 从未处于“就绪”状态，这通常意味着您的 WorkerRole 无法启动。这意味着 OnStart() 方法中可能会引发异常。

如果您想了解发生了什么，您可以：

1.  [配置事件日志记录](http://msdn.microsoft.com/en-us/library/windowsazure/hh694035%28v=vs.103%29.aspx)
2.  [配置远程桌面协议以访问服务器](http://msdn.microsoft.com/en-us/library/windowsazure/gg443832.aspx)
3.  对 OnStart 方法中的所有代码进行 try catch 并将异常记录在数据库中。您可以使用[ELMAH轻松完成此操作](http://code.google.com/p/elmah/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:02:10.533

请研究我在以下问题中的评论：

[Webrole 没有启动并且总是很忙](https://stackoverflow.com/questions/10381345/webrole-is-not-starting-and-always-busy/10386637#10386637)

对于工作人员角色，如果您没有运行 Web 服务器，则无需执行上述步骤 2)，您仍然可以通过所有其他步骤来解决此问题。

# jquery - 以模态填充输入表单值

> ID：10601303
> 
> 赞同：0
> 
> 时间：2012-05-15T13:04:42.760
> 
> 标签：jquery, forms, input, modal-dialog, hidden

我有一个包含表单的模式。我需要在隐藏的输入字段中传递一个 id_code，但我无法做到这一点。

这是代码：

```
$(function () {         

$('#inpage_form').live ('click', function () {
    var test=$(this).attr('id_passed'); 

    $.modal ({ 
        div: '#inpage_form_container' 
        , title: test
        , overlayClose: true

    });
});} 
```

这是调用模态的html：

```
<a href="javascript:;" id_passed="'+dCodArt+'" id="inpage_form" class="trigger"><input type="checkbox"> 
```

id_passed 在另一个 jQuery 脚本中恢复并作为 js var 传递。

这是模态形式：

```
<div id="inpage_form_container" style="display: none" onload="initForm(document.forms[0], 'codArt', 'test');">

    <form action="./goTransaction.asp" method="post" class="form" id="formdue" >
    <input type="hidden" name="tipo" value="r">
    <input type="hidden" name="url" value="<%=request.servervariables("URL")%>">
    <input type="hidden" name="numOrd" value="<%=numOrd%>">
    <input type="hidden" id="codArt" name="codArt">
    </form>
</div> 
```

我尝试了谷歌搜索，在花了一个上午之后，它无法解决这个问题。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:13:43.833

您可以使用 HTML5`data`属性：

```
<a href="#" data-title="+dCodArt+" id="inpage_form" class="trigger">

var test = $('#inpage_form').data('title'); 
```

# java - 如何声明和关闭 InputSteam？

> ID：10601304
> 
> 赞同：4
> 
> 时间：2012-05-15T13:04:44.087
> 
> 标签：java, exception-handling, inputstream

以下哪一项是关闭和声明 inputStream 的首选方式。

```
InputStream is = null; 
String md5;
try{
    is = new FileInputStream(FILE.getAbsoluteFile());
    md5 = UTILS.getMD5Info(is);
} finally{
    if(is != null) 
        is.close();
} 
```

或者

```
InputStream is = new FileInputStream(FILE.getAbsoluteFile()); 
String md5;
try{
    md5 = UTILS.getMD5Info(is);
} finally{
    is.close();
} 
```

我看不出两者之间有太大区别，但是第二种方式看起来更好，因为它有点短。如果我们不打算捕获异常并且只是对垃圾收集 inputStream 感兴趣，那么在 try 块中初始化输入流有什么用处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T13:10:45.967

如果在 try 和 finally 之间捕获了 IOException，第一个也将处理 FileInputStream 的构造函数抛出 IOException 的情况，而第二个不会。他们不会做同样的事情。照原样，第二个更干净。

从 Java 7 开始，最好的方法是使用 try-with-resources 语句：

```
try (InputStream is = new FileInputStream(FILE.getAbsoluteFile())) {
    md5 = UTILS.getMD5Info(is);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T13:11:42.753

使用 Java 7 特性[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)怎么样？

```
try (InputStream is = new FileInputStream(FILE.getAbsoluteFile())) {
    ...
} catch (IOException e) {
    e.printStackTrace();
} 
```

因为如果您想要绝对精确，那是非常难看的（不要忘记*任何读者都*可能会添加额外`IOException`的内容`close()`！）：

```
InputStream is = null;

try {
    is = new FileInputStream(FILE.getAbsoluteFile());

    // Your md5() magic here

} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} finally {
    if (is != null) {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

在您的第二个版本中，您不处理构造函数抛出异常的情况（例如，找不到文件或您没有访问它的权限）。

如果您也想处理这种情况，则需要`InputStream`在块之前声明`try-catch`（或添加`throws IOException`到当前函数定义）。

但是随后您需要检查它是否已正确初始化，即它不在`null`块中`finally`。

此外，如果您想要`close()`流，则必须处理可能的情况`IOException`（通常，如果您能够打开流，则永远不会发生）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T13:09:13.987

第二种方法的问题是`FileInputStream`构造函数可以抛出一个`FileNotFoundException`您不会在您指定的 try 块中捕获的异常（以防您想要捕获此类异常），因此使用这种方法您的控制权较少。

我会选择第一个。

# php - Mod重写正则表达式

> ID：10601308
> 
> 赞同：0
> 
> 时间：2012-05-15T13:04:51.837
> 
> 标签：php, apache, mod-rewrite

我正在尝试将 doc/name_of_doc-doc 之类的任何 url 重写为 doc/name_of_doc 并将其传递给 php

```
RewriteRule ^([0-9a-zA-Z\-\_]+)$ /doc/index.php?doc=$1 
```

这很好用

我正在尝试处理 name_of_doc-doc 可能像 name_of.doc-doc 一样有一个点的事实

如果我走

```
RewriteRule ^([0-9a-zA-Z\-\_\.]+)$ /doc/index.php?doc=$1 
```

它必须有 - 和 _ 和 . 如何拥有一个或另一个？像点还是破折号？如果我没有数字怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:10:27.080

我很惊讶你的正则表达式完全有效。从外观上看，它应该只在文件名正好是一个字符长的情况下才起作用......在`+`之后添加一个`]`来解决这个问题。

这也可能修复您的其他错误，因为您做得很好。

旁注，使用`[0-9a-zA-Z._-]`这样您就不必转义任何内容（`_`没有特殊含义，`.`在字符类中失去其含义，并且`-`如果它是类的第一个或最后一个字符则没有意义）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:08:58.013

为什么你需要它？无论如何，最简单的方法是复制规则：

```
RewriteRule ^([0-9a-zA-Z\.]+)$ /doc/index.php?doc=$1
RewriteRule ^([0-9a-zA-Z\_]+)$ /doc/index.php?doc=$1 
```

或者，一条规则但更难阅读：

```
RewriteRule ^(([0-9a-zA-Z\.]+)|([0-9a-zA-Z\_]+))$ /doc/index.php?doc=$1 
```

# c# - WCF Net Tcp 服务（Windows 主机）的端口共享启用问题

> ID：10601312
> 
> 赞同：2
> 
> 时间：2012-05-15T13:05:06.423
> 
> 标签：c#, wcf, net.tcp

我使用以下代码使用 net tcp 绑定来托管和启动 wcf 服务：

```
public void StartServices() 
```

{

```
 NetTcpBinding portsharingBinding = new NetTcpBinding();
   portsharingBinding.PortSharingEnabled = true;

   serviceHost = new ServiceHost(intranetDesktopService,new Uri(baseAddress));

   serviceHost.AddServiceEndpoint(typeof(IIntranetDesktopServiceListener),   
        portsharingBinding, endpointAddress);

   serviceHost.Open(); 
```

}

但是，当我打开服务时，我收到以下错误：{“TransportManager 无法使用 NetTcpPortSharing 服务侦听提供的 URI：服务无法侦听。”} 它是 AddressAlreadyInUseException

但是该地址尚未使用...如果我将 PortSharingEnabled = true 更改为 false.. 服务运行良好（但我只能有一个实例）。

我已启用 Net.TCP 端口共享服务，并将每个人组的 SID 添加到 SMSVChost.config 文件中...

有任何想法吗？

# c# - 如何计算两个整数的相似度？

> ID：10601313
> 
> 赞同：5
> 
> 时间：2012-05-15T13:05:10.150
> 
> 标签：c#

实际上很难描述：
我想实现一个算法，它比较两个给定整数/数字的相同位置的图形（因为我在基于 10 的系统中进行计算，它是相同的“十的幂”） （具有相同的“长度”）。它应该返回如下的平等等级：

*   4491 和 1020 = 0
*   4491 和 4123 = 1
*   4491 和 4400 = 2
*   4491 和 4493 = 3
*   4491 和 4491 = 4
*   4491 和 4091 = 1

我不想根据字符串比较进行计算，因为我会在更大的场景中这样做:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:10:43.877

```
public static int Compare(int i1, int i2)
{
    int result = 0;
    while(i1 != 0 && i2 != 0)
    {
        var d1 = i1 % 10;
        var d2 = i2 % 10;
        i1 /= 10;
        i2 /= 10;
        if(d1 == d2)
        {
            ++result;
        }
        else
        {
            result = 0;
        }
    }
    if(i1 != 0 || i2 != 0)
    {
        throw new ArgumentException("Integers must be of same length.");
    }
    return result;
} 
```

注意：它不处理负整数

更新：问题更新后修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:13:51.487

[请参阅此 SO 问题的答案](https://stackoverflow.com/q/4808612/1118933)

您可以通过第一种方法拆分数字并从第二种方法获取相似度：

```
int[] GetIntArray(int num)
{
    List<int> listOfInts = new List<int>();
    while(num > 0)
    {
        listOfInts.Add(num % 10);
        num /= 10;
    }
    listOfInts.Reverse();
    return listOfInts.ToArray();
}

int GetSimilarity(int firstNo, int secondNo)
{
    int[] firstintarray = GetIntArray(firstNo)
    int[] secondintarray = GetIntArray(secondNo)
    if (firstintarray.Count != secondintarray.Count)
    {
        throw new ArgumentException("Numbers Unequal in Length!");
    }
    int similarity = 0;
    for(i = 0; i < firstintarray.Count; i++)
    {
        if (secondintarray[i] = firstintarray[i])
        {
            similarity++;
            continue;
        }
        break;
    }
} 
```

现在您可以像这样比较两个 int 数组：

```
int Similarity = GetSimilarity(4491, 4461);// Returns 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:28:25.387

对于 X 和 Y 不相等的所有情况：

```
Length - Math.Floor(Math.Log10(Math.Abs(X - Y)) + 1) 
```

4491 和 1020

```
4 - Math.Floor(Math.Log10(Math.Abs(4491 - 1020)) + 1) = 0 
```

4491 和 4493

```
4 - Math.Floor(Math.Log10(Math.Abs(4491 - 4493)) + 1) = 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:11:49.110

在我最后一次尝试之后试图从这个问题中挽救一些东西......

```
int Compare(int x, int y)
{
    int pow10 = (int)Math.Pow(10, Math.Floor(Math.Log(Math.Max(x, y), 10)));
    int matches = 0;
    while(pow10 > 0 && (x / pow10) == (y / pow10))
    {
        matches++;
        pow10 /= 10;
    }
    return matches;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T13:09:23.693

听起来[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)是合适的。这是衡量两个字符串之间差异的标准方法。在您的情况下，字符串是数字的十进制表示。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-12-19T22:10:08.710

我认为计算它的最佳方法是使用欧几里得相似度。

请参阅此链接：[http ://stackoverflow.com/questions/11555355/calculating-the-distance-between-2-points](http://stackoverflow.com/questions/11555355/calculating-the-distance-between-2-points)

# sql-server-2005 - 带有通配符参数的存储过程

> ID：10601318
> 
> 赞同：2
> 
> 时间：2012-05-15T13:05:26.950
> 
> 标签：sql-server-2005, stored-procedures

我有一张桌子

```
create table user (userId varchar(8) not null, userName varchar(8) not null)
   insert into user
     select 'NAME1','name1'
     union all
     select 'NAME2', 'name2'
     union all
     select 'NAME3','name3' 
```

我已将存储过程用于通配符参数：

```
create procedure wildcard_name
@userName nchar(8)=  '%'
as
select * from user
where userName like @userName;

exec wildcard_name 'n%'; 
```

exec 语句没有给出任何结果，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:07:12.177

您是否尝试再次运行它？我怀疑 exec 调用现在是您的程序主体的一部分。怎么样：

```
ALTER PROCEDURE dbo.wildcard_name
  @userName NVARCHAR(8) = '%'
AS
BEGIN
  SET NOCOUNT ON;

  SELECT userId, userName
    FROM dbo.user
    WHERE userName LIKE @userName;
END
GO -- <-- this is important! It tells SSMS that your procedure has ended!

EXEC dbo.wildcard_name N'n%'; 
```

一堆其他的建议我会忽略不提：

*   在创建和调用对象时，您应该始终指定模式前缀。所以`CREATE PROCEDURE dbo.wildcard_name`,`EXEC dbo.wildcard_name`等
*   希望您的生产代码不使用`SELECT *`.
*   强烈建议您使用 nvarchar 而不是 nchar 作为参数。
*   `BEGIN`用/包裹你的程序主体，`END`不要害怕使用缩进使其更具可读性。
*   您通常希望使用它`SET NOCOUNT ON;`来防止`n row(s) affected`消息干扰您的结果。
*   `NVARCHAR`参数应该有一个 N 前缀（虽然我很困惑为什么你首先在`varchar`和之间交替`nchar`- 这是我期望为零的两个班次）。
*   根据排序规则（以及您是否希望搜索区分大小写），您可能需要使用该子句更改您的 where`COLLATE`子句。

**编辑**这对我来说似乎工作得很好，所以请解释你在做什么不同（并且“没有工作”仍然意味着空结果，还是其他什么？）：

![在此处输入图像描述](../Images/84a5d7ab01deed3eea3e6ad36e334e9f.png)

# javascript - gridview 复选框选择所有上层和下层

> ID：10601320
> 
> 赞同：0
> 
> 时间：2012-05-15T13:05:40.747
> 
> 标签：javascript, asp.net

我在网格视图的标题模板中有一个选择/取消选择所有复选框。如何使选择/取消选择所有功能适用于上层和下层浏览器？检查是否在 JavaScript 中，我要检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:01:02.453

使用 JavaScript。

HTML：

```
 <asp:TemplateField HeaderText="Select All">
     <headertemplate>
        <input type="checkbox" name="chkMain" onclick="ToggleSelect(this)" ... />
     </headertemplate>
     <ItemTemplate>
        <input type="checkbox" name="chkSelect" ... />
     </ItemTemplate>
 </asp:TemplateField> 
```

Javascript：

```
 function ToggleSelect(chk){
    var chkBoxes = document.getElementsByName('chkSelect');

    for(i=0;i<chkBoxes.length;i++){
        chkBoxes[i].checked = chk.checked;
    }
 } 
</script> 
```

**编辑：**如果您喜欢服务器端解决方案，[这里有一个](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.headertemplate.aspx) 不完全是您需要的示例，但您可以修改它以选中/取消选中复选框。

# java - 如何从给定的字符串中获取日期部分？

> ID：10601321
> 
> 赞同：4
> 
> 时间：2012-05-15T13:05:45.970
> 
> 标签：java, date-parsing

我有这样的字符串：

`Mon, 14 May 2012 13:56:38 GMT`

现在我只想约会，即`14 May 2012`

我应该为此做些什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T13:09:44.097

正确的方法是将其解析为一个`Date`对象并按照您想要的方式格式化此日期对象。

```
DateFormat inputDF  = new SimpleDateFormat("EEE, d MMM yyyy H:m:s z");
DateFormat outputDF = new SimpleDateFormat("d MMM yyyy");

String input = "Mon, 14 May 2012 13:56:38 GMT";
Date date = inputDF.parse(input);
String output = outputDF.format(date);

System.out.println(output); 
```

**输出：**

```
14 May 2012 
```

这段代码是

*   更易于维护（如果输出格式略有变化，而输入格式保持不变怎么办？反之亦然？）
*   可以说更容易阅读

比任何依赖于拆分字符串、固定索引上的子字符串或正则表达式的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T13:09:08.183

你为什么不`parse()`使用 String `DateFormat`，它会给你一个`Date`对象。把它`Date`交给 a `Calendar`，你就可以查询任何你想要的字段，例如`get(Calendar.DAY_OF_MONTH)`.

像这样的东西...

```
SimpleDateFormat myDateFormat = new SimpleDateFormat("EEE, d MMM yyyy H:m:s z");
Date myDate = myDateFormat.parse(inputString);

Calendar myCalendar = Calendar.getInstance();
myCalendar.setTime(myDate);

String outputDate = myCalendar.get(Calendar.DAY_OF_MONTH) + " " + 
                    myCalendar.get(Calendar.MONTH) + " " +
                    myCalendar.get(Calendar.YEAR); 
```

写起来可能有点冗长，但至少你最终得到了一个`Calendar`可以轻松为你提供所需字段的字段（例如，如果你想使用其中一个字段值执行一些处理）。它也可以用于计算或许多其他目的。这真的取决于你想在拥有日期之后做什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T13:15:39.553

你可以使用这个：

```
String st = "Mon, 14 May 2012 13:56:38 GMT";

for(int i=0;i<=st.length();i++){

  if (st.charAt(i)==':') {

  index=i;
  index=index-2;
   break;
  }

}

String onlyDate=st.substring(4,index).trim(); 
```

# java - 从 Java Applet 调用方法，Javascript 返回 [Ljava.lang.String;@7ac79dfa

> ID：10601324
> 
> 赞同：2
> 
> 时间：2012-05-15T13:05:56.940
> 
> 标签：java, javascript, applet

我在 webp 时代有一个 Java 小程序，我正在尝试使用 Javascript 对其进行编码。

```
public class WebCapture extends Applet {

  public String[] getSourceDeviceNames() {
    return new String[] {'Device 1', 'Device 2'};
  }

  public void acquireImage() {
    //...
  }

} 
```

我将此小程序和支持库编译成一个 jar 文件，它包含在我的 HTML 页面中，如下所示：

```
<embed id="webCaptureApplet"
 code="com.brian.webcapture.applets.WebCapture"
 archive="jar/WebCapture.jar"
 type="application/x-java-applet">

    <noembed>
      Oops! It looks like Java is not installed. =[
    </noembed>

</embed> 
```

这似乎很有效，我看到一个空白的 Java 小程序呈现在屏幕上，如果我调用

`document.getElementById('webCaptureApplet');`

我可以`alert()`对象并收到响应`[object HTMLEmbedElement]`

伟大的。现在，当我尝试执行以下代码时：

```
var applet = document.getElementById('webCaptureApplet');
var devices = applet.getSourceDeviceNames();

for(var i = 0; i < devices.length; i++) {
  alert(devices[i]);
} 
```

当我将断点附加到包含`for()`并使用 firebug 检查对象的行时，`toString()`值为`devices`[Ljava.lang.String;@1d0b3465。我认为这是有道理的，因为数组正在被传回，并且`toString()`对于显示简单的值并不友好。

当我`devices.length`在 foo 循环中查看时，显示的值是 a 的方法存根`public netscape.javascript.JSException(java.lang.String, java.lang.String, int, java.lang.String, int)`

我已经阅读了无数关于 Javascript 调用 Java 的操作方法，但我看不出我在似乎非常无缝的互操作方面出了什么问题。

我应该说它曾在 OS X 上通过 Firefox 运行，但它保留了一个缓存的小程序，所以我很困惑问题出在哪里。我曾尝试删除工作站和笔记本电脑上的缓存，但它们似乎仍然粘在旧罐子上。我不确定这对我有多大影响。

`getSourceDeviceNames`如果我的小程序返回一个字符串或一个字符串数组，这似乎没有什么区别。它仍然会在检查时显示相同的错误。我不确定缓存是否会影响这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:51:16.767

根据[http://www.uow.edu.au/~hasan/buss930/jscript/packages.htm#1014128](http://www.uow.edu.au/~hasan/buss930/jscript/packages.htm#1014128) “Java 数组是用理解 array.length 和 array[index] 的 JavaScript 对象包装的。” 它适用于 Sun Java，但在 OpenJDK 上运行时返回 JSException。

我能找到的唯一方法是计算数组的元素。

```
var length = 0;
while(array[length])
    length++; 
```

看来，这个功能在 OpenJDK 中是有缺陷的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:23:02.543

您在这里对数组感到困惑。当您从 javascript 调用 java 代码时，简单类型会自然映射，而其他类型可能会导致一些问题。例如数组映射到`JavaArray`(http://www.nusphere.com/kb/jscoreguide/lc.html)。

我为您进行了简短的搜索，但没有找到从 javascript 端的数组中提取元素的方法。欢迎您继续搜索，但如果您可以修改小程序的代码，更好的方法可能是公开`getSourceDeviceName(int index)`将返回设备名称的方法 #i 并`getNumberOfSourceDeviceNames()`返回数组长度。

使用实时连接时，使用原语总是比使用其他类型更容易且更便携。

# nhibernate - 我可以使用 Nhibernate QueryOver 按集合的实体计数进行分组和计数吗？

> ID：10601336
> 
> 赞同：4
> 
> 时间：2012-05-15T13:06:53.830
> 
> 标签：nhibernate

我的项目中有两个类，如下所示：

```
public class Teacher
{
    public virtual long Id {get;set;}
    public virtual IList<Student> Students {get;set;}
}

public class Student
{
    public virtual long Id {get;set;}
    public virtual string Name {get;set;}
} 
```

我需要一个查询来获取每个教师的学生人数并根据计数结果进行分组。还与每个计数的频率（嗯...计数计数）。我不知道如何使用 queryover 来做到这一点。就像给定这样的数据：

```
teacher1.Students = [student1,student2,student3] //teacher1's student count is 3
teacher2.Students = [student4]
teacher3.Students = [student5,student6,student7]
teacher4.Students = [student8]
teacher5.Students = [] //empty 
```

我需要这样的查询结果：

```
[
[0,1], //1 teacher has 0 students
[1,2], 
[3,2] //2 teachers have 3 students
] 
```

更新：sql是这样的：

```
select tc.tCount, count(tc.TRID)
from (select tr.Id as TRID, count(std.Id) as tCount
from Teacher tr
JOIN Student std on std.TeacherId = tr.Id
GROUP BY tr.Id ) as tc GROUP BY tc.tCount 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T10:07:57.487

```
 MyDTO myDTO = null;
            Student studentAlias = null;
            Teacher teacherAlias = null;
            var results = _session.QueryOver<Teacher>(()=>teacherAlias)
               .JoinAlias(x=>x.Students,()=>studentAlias, JoinType.LeftOuterJoin)
               .SelectList(list => list
                  .SelectGroup(m => m).WithAlias(() => myDTO.Teacher)
                  .SelectCount(m => studentAlias.Id).WithAlias(() => myDTO.Count)
               )
               .TransformUsing(Transformers.AliasToBean<MyDTO>())
               .List<MyDTO>(); 
```

DTO：

```
public class MyDTO{
   public Teacher Teacher {get;set;} //or just name or whatever you need
   public int Count {get;set;}
} 
```

# iphone - 我可以为以后添加的所有联系人设置默认图片吗？

> ID：10601339
> 
> 赞同：2
> 
> 时间：2012-05-15T13:07:05.850
> 
> 标签：iphone, ios, addressbook

RT，我想给后面添加的联系人设置默认图片。我可以使用公共 API 执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:08:44.660

是的，您可以稍后添加照片。这是一个基于 URL 加载照片的代码片段。

> ```
>  image = [[NSImage alloc] initWithContentsOfURL:[NSURL URLWithString:url]];
>   if (image && [image isValid]) {
>       [abPerson setImageData:[image TIFFRepresentation]];
>   } 
> ```

通讯簿没有“默认”图片的概念，但您当然可以使用此机制为没有自己图片的任何联系人加载相同的图片。

# c# - 在构造函数中退出 MessageBox 调用的应用程序

> ID：10601340
> 
> 赞同：1
> 
> 时间：2012-05-15T13:07:08.343
> 
> 标签：c#, winforms

我想在实际表单之前显示一个对话框（消息框），如果用户选择否，应用程序应该完全关闭。我正在尝试使用下面的代码，但即使单击否，也会显示表单！

```
public Form1()
{
    InitializeComponent();

    if (MessageBox.Show("Contiue or not", "Question", MessageBoxButtons.YesNo, MessageBoxIcon.None, MessageBoxDefaultButton.Button1) == DialogResult.No)
        Application.Exit();
} 
```

我也尝试过`this.Clsoe`，但后来我对`Application.Run()`

问题是什么？知道这样做的最佳方法是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:10:54.627

将其放入您的如何`Program.cs`（假设您要确定是否启动应用程序）

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        if (
            MessageBox.Show(
                "Contiue or not", "Question", 
                MessageBoxButtons.YesNo, 
                MessageBoxIcon.None, 
                MessageBoxDefaultButton.Button1) == DialogResult.Yes)
            Application.Run(new Form1());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:12:16.700

在 program.cs 中执行此操作，如下所示：

```
 Application.EnableVisualStyles();
  Application.SetCompatibleTextRenderingDefault(false);
  if (MessageBox.Show("Contiue or not", "Question", MessageBoxButtons.YesNo, MessageBoxIcon.None, MessageBoxDefaultButton.Button1) == DialogResult.Yes)
    Application.Run(new Form1()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:13:29.493

`OnLoad`在事件而不是构造函数中显示您的消息框，例如：

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    if (MessageBox.Show("Contiue or not", "Question", MessageBoxButtons.YesNo, MessageBoxIcon.None, MessageBoxDefaultButton.Button1) == DialogResult.No)
    {
        Application.Exit(); // or this.Close();
    }
} 
```

`Application.Exit()`在构造函数中不起作用，因为还没有任何形式，所以没有消息泵可以停止。
也会`this.Close()`引发错误，因为它会导致`Dispose()`表单上的调用；在尝试显示表单后立即`Application.Run`，但它已被处理并引发异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T13:15:14.067

不要在构造函数中做这样的事情。*在创建对象之前*，您应该知道是否要创建对象。如果您说要在实际表单之前显示 MessageBox，请在调用构造函数之前显示它，例如在调用`Application.Run()`.

`Application.Exit()`尝试终止所有消息泵，但它们尚未启动，因为`Application.Run()`启动它们。
也`Application.Exit()`关闭应用程序的所有窗口，但还没有，因为你`Form1`甚至还没有构建。
您试图在应用程序有机会开始运行之前退出应用程序（`Run`尚未调用）。
因此，在应用程序的唯一表单的构造函数中调用该方法没有多大意义。

# html - “ul”元素永远不能是“p”元素的子元素

> ID：10601345
> 
> 赞同：33
> 
> 时间：2012-05-15T13:07:28.000
> 
> 标签：html, html-lists

为什么我们永远不能有一个`ul`元素作为元素的子`p`元素？

我用以下代码制作了一个网页

```
<p> some text
<ul>
<li>...</li>
<li>...</li>
.
.
.
</ul>
</p> 
```

这里，`ul`元素是 p 元素的子元素。但是，在所有主要浏览器（Chrome、Firefox 和 Internet Explorer - 所有最新版本）中，它的解释如下

```
<p> some text</p>
<ul>
<li>...</li>
<li>...</li>
.
.
.
</ul>
<p></p> 
```

我通过右键单击`ul`元素（在 Chrome 中）并选择检查元素选项来检查它。我在 Chrome 中看到它，但其他两个浏览器的行为方式也相同（CSS 选择器“p ul”效果不佳）。

为什么会这样？是否存在浏览器进行此类更改的一般情况？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-15T13:10:28.370

请查看[HTML 规范](http://developers.whatwg.org/grouping-content.html#the-p-element)，该规范明确指出禁止将列表放入段落元素中，并提供一些可以执行的示例：

> 列表元素（特别是 ol 和 ul 元素）不能是 p 元素的子元素。因此，当一个句子包含一个项目符号列表时，人们可能想知道应该如何标记它。
> 
> 例如，这个奇妙的句子有与
> 
> *   巫师，
> *   超光速旅行，以及
>     
> *   心灵感应，
> 
> 并在下面进一步讨论。
> 
> 解决方案是认识到段落，用 HTML 术语来说，不是一个逻辑概念，而是一个结构概念。在上面这个奇妙的例子中，本规范实际上定义了五个段落：一个在列表之前，一个用于每个项目符号，一个在列表之后。
> 
> 因此，上述示例的标记可能是：
> 
> ```
>  <p>For instance, this fantastic sentence has bullets relating to</p> 
>    <ul>
>        <li>wizards,  
>        <li>faster-than-light travel, and  
>        <li>telepathy, 
>    </ul>
>    <p>and is further discussed below.</p> 
> ```
> 
> 希望方便地设置由多个“结构”段落组成的“逻辑”段落样式的作者可以使用 div 元素而不是 p 元素。
> 
> 因此，例如上面的例子可以变成以下：
> 
> ```
>  <div>For instance, this fantastic sentence has bullets relating to
>    <ul>
>      <li>wizards,  
>      <li>faster-than-light travel, and  
>      <li>telepathy,
>    </ul> 
>    and is further discussed below.</div> 
> ```
> 
> 这个例子仍然有五个结构段落，但现在作者可以只设置 div 的样式，而不必分别考虑例子的每个部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T14:22:24.847

HTML 中一直有一条规则，即`p`元素只能包含文本和文本级标记，而不是列表。`</p>`因此，当`p`元素打开并且遇到块级元素的开始标签（如）时，浏览器会暗示一个结束标签`<ul>`。在您的示例中，`</p>`之后的标签`</ul>`是无家可归的，通常会被忽略。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T13:10:16.830

`<p>`只能有内联元素作为子元素，没有块元素（参见，例如，在[MDN](https://developer.mozilla.org/en/HTML/Element/p)中）。`<ul>`另一方面是块级元素（[MDN](https://developer.mozilla.org/en/HTML/Element/ul)）！

如您所见，浏览器解释您的代码的原因在于 HTML5 解析规范。该规范列出了一个非常像您自己的示例：[whatwg link](http://www.whatwg.org/specs/web-apps/current-work/multipage/grouping-content.html#the-p-element)。

另一个有趣的相关问题可能是：[HTML: Include, or exclude, optional closing tags？](https://stackoverflow.com/questions/3008593/html-include-or-exclude-optional-closing-tags)

# web - 公司的单个产品是否应该有单独的域？

> ID：10601347
> 
> 赞同：0
> 
> 时间：2012-05-15T13:07:37.450
> 
> 标签：web, seo, dns

让我用一个例子来解释这个问题。

我有一家公司“abc”，网址为 www.abc.com 现在，该公司有产品：prod1、prod2 和 prod3。目前，我将这些产品的网站维护为：

www.abc.com/prod1/index.html,

www.abc.com/prod2/index.html 和

www.abc.com/prod3/index.html 分别。

我还购买了重定向到上述网址的 prod1.com、prod2.com 和 prod3.com。

我是否应该将产品的网站维护为 www.prod1.com/index.html for prod1 等以帮助 SEO？

为公司的产品维护单独的域有什么好处？

请建议哪种方法更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T21:11:13.510

我也很想知道这个问题的答案。这个问题很容易回答“不考虑 seo”，但这样做的唯一原因是出于 SEO 目的。根据我的经验，在短期内，如果人们在搜索中输入该关键字名称，则更容易为单个产品域排名靠前。谷歌表示他们对此不以为然，但一次又一次，完全匹配的关键字域出现在搜索结果的第一页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:37:51.447

暂时忘记搜索引擎优化并考虑您的人类用户。他们来到您的公司页面并想了解您的产品。如果每个产品都在新的浏览器窗口中的新域上打开，这看起来很奇怪。从这个角度来看，我会将产品保留在主站点上。

如果这样做，请确保建立逻辑站点结构，例如使用：

```
/
/products
    /productA
        /Overview
        /Details
        /Special keyword page for this product
    /productB
        /Overview
        /Details
        /Special keyword page for this product
    /product...
        /... 
```

这些页面可能不会经常更改，因为您主要是对您提供的内容进行高级视图。

您可能不时想要运行一些广告系列。在这种情况下，微型网站就派上用场了。在这里，将它们放在具有包含最重要关键字的域名的额外域中通常很有用。这样的微型网站通常寿命很短，但针对您要定位的关键字进行了高度优化。您在上面的公司网站的产品页面上链接这些微型网站，当然还使用社交媒体等所有其他渠道来获取一些反向链接。

关注一个公司网站而不是每个产品的多个域还有另一个原因。它可以节省您的时间和金钱，因为您只需要维护一个页面。不要低估维护运行具有不同模板等的不同版本 CMS 的不同域所需的内容。

当然，上面所说的一切只有在您的产品相关时才有意义。如果您的产品完全不相关，或者如果客户知道您的其他产品，一个产品的品牌可能会受到损害，最好将这些产品分开放在不同的领域（想想销售汽车保险，但也提供某种挤钱服务） .

# function - Newbee 的 Postgres 函数

> ID：10601349
> 
> 赞同：0
> 
> 时间：2012-05-15T13:07:38.470
> 
> 标签：function, postgresql, loops

以下函数在运行时会报错

我注意到，当我删除这条线时`AND t.image_id = mviews.image_id` ，它会起作用。

即使我将 mviews.image_id 更改为常数，它也可以工作

我在想我没有正确引用循环参数？

0000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000000000000000000000000

```
CREATE OR REPLACE FUNCTION test() RETURNS void AS $$
  DECLARE
    mviews RECORD;     
BEGIN        
FOR mviews IN 
SELECT image_id FROM image_index_1205 WHERE image_type = '01' LIMIT 3
LOOP
copy    (

    SELECT encode(decode(image, 'base64'), 'hex') 
    FROM image_index_1205 t
    WHERE image_type = '01'
    AND t.image_id =  mviews.image_id
    LIMIT 1
    ) 
TO
    '/tmp/test.hex';

END LOOP;   
END;
$$ LANGUAGE plpgsql; 
```

0000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000000000000000000000000

```
********** Error **********

ERROR: there is no parameter $1
SQL state: 42P02
Context: SQL statement "copy ( SELECT encode(decode(image, 'base64'), 'hex') FROM image_index_1205 t WHERE image_type = '01' AND t.image_id =  $1  LIMIT 1 ) TO '/tmp/test.hex'"
PL/pgSQL function "test" line 7 at SQL statement 
```

0000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000000000000000000000000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:03:55.360

您的问题是[`COPY`](http://www.postgresql.org/docs/current/interactive/sql-copy.html)无法执行动态 SQL。该变量`mviews`在 的查询中不可见`COPY`。您需要动态 SQL。构建查询字符串并使用[`EXECUTE`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN). 像这样：

```
CREATE OR REPLACE FUNCTION test()
  RETURNS void AS
$BODY$
DECLARE
    mviews RECORD;     
BEGIN        

FOR mviews IN 
    SELECT image_id FROM image_index_1205 WHERE image_type = '01' LIMIT 3
LOOP
    EXECUTE $x$
    COPY (
       SELECT encode(decode(image, 'base64'), 'hex') 
       FROM   image_index_1205 t
       WHERE  image_type = '01'
       AND    t.image_id =  $x$ || mviews.image_id || $y$
       LIMIT 1
       ) 
    TO '/tmp/test.hex'
    $y$;
END LOOP;   

END;
$BODY$ LANGUAGE plpgsql; 
```

我大量使用[美元报价](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)来简化报价处理。

如果还改变了目标文件，该函数会更有意义。事实上，每次迭代都会覆盖之前的迭代，并且只有最后一个循环的结果会持续存在。动态文件名也需要动态 SQL。

# php - 如何在 TCPDF 中删除标题下方和 $html 上方的行？

> ID：10601353
> 
> 赞同：6
> 
> 时间：2012-05-15T13:07:51.027
> 
> 标签：php, html, pdf, tcpdf

如何在 TCPDF 中删除标题下方和 $html 上方的行？

[http://www.tcpdf.org/examples/example_001.pdf](http://www.tcpdf.org/examples/example_001.pdf)

tcpdf.org/examples.php（带有 PDF 和 PHP 代码的示例！）

在此示例中，这是[http://www.tcpdf.org](http://www.tcpdf.org)下方和 Welcome to TCPDF 上方的行。我怎样才能删除这个？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-02-07T10:36:10.980

如[tcpdf 网站上所示 - 示例](http://www.tcpdf.org/examples.php)[002](http://www.tcpdf.org/examples/example_002.pdf)中的示例没有标题，这里是[php 代码示例](http://www.tcpdf.org/examples/example_002.phps)。

“魔术”是由这段代码完成的：

```
// remove default header/footer
$pdf->setPrintHeader(false);
$pdf->setPrintFooter(false); 
```

就是这样！希望能帮助到你

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T11:02:24.377

您可以通过继承 TCPDF 类并覆盖 Header() 和 Footer() 方法来删​​除它：

```
class MyTCPDF extends TCPDF
{
   public function Header()
   {
      // NOP! Overrides default header
   }
   public function Footer()
   {
      // NOP! Overrides default footer
   }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-01T05:13:41.807

IV尝试编写此代码，^_^

它适用于页眉和页脚。

**$pdf->setPrintHeader(false);**

**$pdf->setPrintFooter(假);**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-01T18:02:48.197

虽然我更喜欢 jnhghy - Jantea Alexandru 选择的答案，但如果您只需要一些快速的东西，以下是另一种方法：

更改以下代码：

```
$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE.' 058', PDF_HEADER_STRING); 
```

至

```
$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE.' 058', PDF_HEADER_STRING, array(0,0,0), array(255,255,255)); 
```

这只是将线条的颜色设置为白色（页面的背景颜色）。第一个颜色数组用于标题文本颜色，第二个颜色数组用于标题行颜色。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-01T06:53:12.843

我们可以编辑`tcpdf.php`文件，

从：

```
protected $header_line_color = array(0,0,0); 
```

至 ：

```
protected $header_line_color = array(255,255,255); 
```

而已。

# php - PHP 对象继承和方法覆盖

> ID：10601354
> 
> 赞同：1
> 
> 时间：2012-05-15T13:07:51.523
> 
> 标签：php, oop, codeigniter, inheritance, methods

我一直在 CodeIgniter 框架中做一些 PHP。我创建了自己的模型类，它扩展并覆盖了默认的代码点火器。就在下面：

```
<?php
class MY_Model extends CI_Model
{
    public $table;
    public function __construct()
    {
        parent::__construct();
        $this->table = get_class($this);
        $this->fields = $this->db->field_data($this->table);
    }
} 
```

然后我制作了一个模型来管理数据库中的语言，代码如下。如果我回显，则从`$this->table`Language_model 中得到“Language_model”，这就是我想要的。`$this->db->field_data($this->table)`但是由于表名无效（“MY_Model”无效），父运行“”中的代码错误。由于错误，该代码甚至从未在孩子中执行 var_dump 。为什么 " `$this->db->field_data($this->table)`" 也不使用 "Language_model" 作为`$this->table?` Running PHP 5.3.9的值

```
class Language_model extends MY_Model {
    function __construct()
    {
        parent::__construct();
        var_dump($this->fields);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:26:22.617

get_class 有一个特殊的行为：

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class TestBase extends CI_Controller{
    public function nameWthis(){
        return get_class($this);
    }
    public function nameWOthis(){
        return get_class();
    }
}

class Test extends TestBase{
    public function index()
    {
        echo $this->nameWthis();
        echo '<br/>';
        echo $this->nameWOthis();
    }
} 
```

将输出

```
Test
TestBase 
```

使用不带参数的 get_class() 会产生静态分辨率，这可能是您的问题。get_class($this) 应该像您预期的那样工作，动态返回当前类名。

添加代码以检查“Language_model”是否存在。并且要小心，可能名称是区分大小写的并且会产生失败。

最好有错误代码。检查您的日志。在 $this->fields = ... 之前放置一个 var_dump(table)

# google-chrome - Chrome CSS3 3D 变换错误

> ID：10601359
> 
> 赞同：3
> 
> 时间：2012-05-15T13:07:59.323
> 
> 标签：google-chrome, css, css-transitions, css-transforms

我有 css 对 3d 空间中的元素进行卡片翻转。它工作得很好，除了当您向上和向下滚动页面时，您会在 Chrome 的某些位置随机地在页面上显示白色元素。我在 facebook 选项卡中附加了一张图片作为示例。在 chrome windows 中，白色“框”有时会掩盖内容。当我注释掉 3d 变换 css 时，这不会发生。这是做 3d 东西的 css 的小提琴（[http://jsfiddle.net/derekaug/QSEvs/](http://jsfiddle.net/derekaug/QSEvs/)）。不幸的是，我还不能链接到实际的标签，因为它不是公开的。

![例子](../Images/e455e98a14d26fd235a4ff17d72fc4d5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:26:33.463

我以前遇到过这样的问题，并不是说它肯定会起作用，但我修复它的方法是在不使用元素时从元素中删除所有转换 css 属性。

也就是说，仅在动画打开时应用变换属性。这意味着在您的示例中，为每个具有所有变换属性的动画创建 2 个类，并删除基类上的那些。然后单击应用适当的类，并在转换结束后立即删除该类。当转换结束时，会在元素上触发一个 javascript 回调，以便您删除该类：

[CSS3 过渡事件](https://stackoverflow.com/questions/2794148/css3-transition-events)

# objective-c - 带有ARC服务器和32位代理的Objective-C分布式对象？

> ID：10601362
> 
> 赞同：0
> 
> 时间：2012-05-15T13:08:10.107
> 
> 标签：objective-c, automatic-ref-counting, distributed-objects, nsconnection

我有一个使用 ARC 的 64 位应用程序，它提供分布式对象。使用代理对象的应用程序是 32 位应用程序，所以它没有使用 ARC。这会给我带来麻烦吗？

我还想在我的 32 位应用程序中重用 64 位/ARC 应用程序中的类。如果这些是 ARC，我如何将它们集成到非 ARC 应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:46:14.623

我不建议这样做。在 32 位和 64 位运行时之间使用分布式对象似乎是可能的，但它有一些问题。从基础常量参考：

> 在 Mac OS X v10.5 之前，NSNotFound 被定义为 0x7fffffff。对于 32 位系统，这实际上与 NSIntegerMax 相同。为了支持 64 位环境，NSNotFound 现在正式定义为 NSIntegerMax。但是，这意味着该值在 32 位和 64 位环境中是不同的。因此，您不应将值直接保存在文件或档案中。此外，通过分布式对象在 32 位和 64 位进程之间发送值不会让您在另一端获得 NSNotFound。这适用于通过分布式对象调用并可能返回 NSNotFound 的任何 Cocoa 方法，例如 NSArray 的 indexOfObject: 方法（如果发送到数组的代理）。

当然，您可以对 -[NSArray indexOfObject:] 进行一些基本的完整性检查，但是如果您使用的任何库或框架（包括 Cocoa 和 Foundation）使用可以返回 NSNotFound 的 API 怎么办？更不用说这只是 32 位和 64 位运行时之间通信时可能发生的一个问题，其他问题可能没有记录在案。

[由于分布式对象的一些其他问题](http://www.mikeash.com/pyblog/friday-qa-2009-02-20-the-good-and-bad-of-distributed-objects.html)，我倾向于回避分布式对象，但即使您决心使用它们，这对我来说似乎也是一个交易破坏者。

我不相信 ARC 有任何内在的东西会阻止您一起使用 ARC 和分布式对象。然而，分布式对象的内存管理可能很棘手。如果您需要打破标准的保留释放规则来解决客户端和服务器之间的内存泄漏问题，ARC 不会让您这样做。您需要格外小心地构建您的服务器以避免这种情况。

最后，由于您不能在 32 位运行时中使用 ARC，因此您必须为这些类编写手动保留/释放代码。如果您打算最终摆脱非 ARC 代码，则可以利用[__has_feature(objc_arc)](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#general)。否则，最好不要在您计划在 32 位和 64 位应用程序之间共享的文件上使用 ARC。ARC 可以在每个文件的基础上启用或禁用。

# php - 在聊天室侧边栏中显示在线用户

> ID：10601367
> 
> 赞同：1
> 
> 时间：2012-05-15T13:08:24.973
> 
> 标签：php, jquery, chat

我对聊天室进行编程，但找不到显示在线和离线用户的方式。我将会话用于在线用户。当用户登录页面而不是空会话更新数据库和在线 1。现在如何知道用户从聊天中注销或关闭浏览器。我知道会话时间或捕获可以做到这一点，但我不能编写合适的代码。任何人都可以帮助我并将完整的代码放在这里吗？谢谢你的回答

在线展示：

```
session_start();
include("config.php");
connect();
$sql="SELECT `username` FROM `user` WHERE `online`=1";
$result=mysql_query($sql) or die (mysql_error());
if(mysql_num_rows($result)>0)
{
for ($i=0;$i<mysql_num_rows($result);$i++)
{
echo ('<b style="color:green;margin-left:10px;margin-top:10px;">'.mysql_result($result,$i,0).'</b><br>');
if($_SESSION['user']!=""
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:00:55.020

您可以使用 php 脚本按计划运行，当用户不在现场时，该脚本将更新状态为离线。

为此，您有时应该将用户状态发送到服务器，例如通过 ajax，并将其存储在数据库中。

更新..

js, jquery 函数，用于每 500 毫秒向 php 发送状态。

```
function upd_status() {
    $.get('/php.php', function(data) {
        setTimeout(upd_status,500);
    });
}
upd_status(); 
```

在 php 方面。

```
// I do not know where is user id, but it should be in session
$uid = $_SESSION['user']['uid'];
settype($uid, 'int');

$sql = "UPDATE user SET status = 1, timestamp = ". time() ." WHERE id = ". $uid ."; 
```

在 cron 脚本上

```
$sql = "UPDATE user SET status = 0 WHERE timestamp < ". (time()-60*5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:46:47.667

您可以使用简单的“if”操作来检查会话时间是否比实时最短。

例子。

在数据库中，在用户中创建列 last_activity。当用户发送消息进行查询以更新该列时，使用 time() 进行最后一个活动；

并且只需检查数据库中的 last_activity 是否比超时时间最短，在这种情况下，您可以设置 $timeout 变量为超时。这是代码：

```
<?php # make while loop from users where online = 1
$last_activity_from_database = $row['last_activity']; 
$timeout                     = time()-600; # 10 minutes
if($last_activity_from_database < $timeout){
    mysql_query("UPDATE users SET online='0'");
}
?> 
```

您应该进行 AJAX 调用。

# c++ - 模板基类的子类的模板特化

> ID：10601369
> 
> 赞同：6
> 
> 时间：2012-05-15T13:08:27.123
> 
> 标签：c++, generics, inheritance, c++11, template-specialization

这个问题有点难解释，所以我先举个例子：

我有一个将类型和整数常量作为模板参数的类模板，并且我有许多从该模板的实例派生的子类：

```
template <class V, int i>
struct Base 
{
    static void doSomething() { cout << "something " << i << endl; };
};

struct Child : public Base<int,12>
{
}; 
```

我想将这些类与其他一些模板（我们称之为测试）一起使用，它具有针对不同类型的特化。因为从 Base 的任何实例派生的所有类的行为应该完全相同，所以我只想定义一个 Test 特化来处理从 Base 派生的所有类。

我知道我不能直接专门针对 Base<V,i> 因为这不会检测到子类。相反，我的第一种方法是使用 Boost 的 enable_if 和类型特征：

```
// empty body to trigger compiler error for unsupported types
template <class T, class Enabled = void>
struct Test { };

// specialization for ints,
// in my actual code, I have many more specializations here
template <class Enabled>
struct Test <int, Enabled> 
{
    static void test (int dst)
    {
        cout << "Test<int>::test(" << dst << ")" << endl;
    }
};

// this should handle all subclasses of Base,
// but it doesn't compile
template <class T, class V, int i>
struct Test <T, typename enable_if <is_base_and_derived <Base <V,i>, T>>::type>
{
    static void test (const T &dst)
    {
        dst.doSomething();
    }
};

int main (int argc, char **argv)
{
    Test <int>::test (23);
    Test <Child>::test (Child());
    return 0;
} 
```

这个想法是，专业化应该处理所有从 Base 派生的具有任意 V 和 i 值的类。这不起作用，gcc抱怨：

```
错误：部分特化中未使用的模板参数：
错误：'V'
错误：“我”

```

我想问题是这种方法需要编译器尝试所有可能的 V 和 i 组合来检查它们是否匹配。现在，我通过在基类中添加一些东西来解决这个问题：

```
template <class V, int i>
struct Base
{
    typedef V VV;
    static constexpr int ii = i;
    static void doSomething() { cout << "something " << i << endl; };
}; 
```

这样，特化不再需要有 V 和 i 作为自由模板参数：

```
template <class T>
struct Test <T, typename enable_if <is_base_and_derived <Base <typename T::VV, T::ii>, T>>::type>
{
    static void test (const T &dst)
    {
        dst.doSomething();
    }
}; 
```

然后它编译。

现在，我的问题是：**如何在不修改基类的情况下做到这一点？**在这种情况下，这是可能的，因为我自己编写了它，但是如果我必须像这样在我的测试模板中处理第三方库代码，我该怎么办？有没有更优雅的解决方案？

编辑：另外，有人可以给我一个详细的解释，为什么第一种方法不起作用？我有一个粗略的想法，但我希望有一个正确的理解。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:24:45.903

一个简单的解决方案是让`Base`继承另一个`Base_base`：

```
struct Base_base
{};

template <class V, int i>
struct Base
 :  public Base_base
{
    static void doSomething() { cout << "something " << i << endl; };
};

template <class T>
struct Test <T, typename enable_if <is_base_and_derived <Base_base, T>>::type>
{
    static void test (const T &dst)
    {
        dst.doSomething();
    }
}; 
```

[已**编辑**]在第 3 方代码中，您可以使用以下技巧：

```
template <class V, int i>
struct Base3rdparty
{
    static void doSomething() { cout << "something " << i << endl; };
};

template <class V, int i>
struct Base
 :  public Base3rdparty<V, i>
{
    typedef V VV;
    static constexpr int ii = i;
};

template <class T>
struct Test <T, typename enable_if <is_base_and_derived <Base <typename T::VV, T::ii>, T>>::type>
{
    static void test (const T &dst)
    {
        dst.doSomething();
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:06:22.253

使用函数重载和`decltype`：

```
// Never defined:
template<typename T> std::false_type is_Base(T&);
template<class V, int I> std::true_type is_Base(Base<V,I>&);

template<typename IsBase, typename T> struct TestHelper;
template<typename T> struct TestHelper<std::true_type, T>
{
    static void test(const T& dst) { dst.doSomething(); }
};
template<> struct TestHelper<std::false_type, int>
{
    static void test(int dst)
    { std::cout << "Test<int>::test(" << dst << ")" << std::endl; }
};
// ...

template<typename T> struct Test
{
    static void test(const T& dst)
    { TestHelper<decltype(is_Base(std::declval<T&>())), T>::test(dst); }
} 
```

# c# - 防止来自主机数据库的时区值被客户端覆盖

> ID：10601370
> 
> 赞同：0
> 
> 时间：2012-05-15T13:08:36.953
> 
> 标签：c#, .net, oracle, plsql

早晨：

在我[之前问](https://stackoverflow.com/questions/10588565/timezone-time-date-formats-with-oracle-and-net)过的一个问题中，我收集了一些关于在 PL SQL 查询中管理时区值的有用技巧。

然而，我误解了这个问题。

我们有一个表，其中记录的日期和时间因时区而异。这些记录由 C# 程序集查询并被发送到 AXIS 服务。

当记录到达在印度托管的 AXIS 服务时，时区更改为 IST。

我需要做的是确保记录中的时区是从任何其他时区查询数据时收到的时区。

我该怎么做？我不确定这是否是一个 Oracle/PL SQL 查询问题，如果不是，请让我直截了当。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:31:55.353

正在传递哪些数据类型？

根据您之前的问题，您在 Oracle 中使用的数据类型是`DATE`. Oracle`DATE`没有与之关联的时区。除非您将时区存储在您未提及的单独列中，否则这意味着堆栈中的其他`DATE`位置正在从 Oracle 读取（或写入 Oracle）并隐含时区。堆栈的任何组件都暗示时区将成为罪魁祸首。

从 Oracle 的角度来看，最好的选择是使用一种`TIMESTAMP WITH [LOCAL] TIME ZONE`数据类型，以便 Oracle 知道时区。然后，您可以在 PL/SQL 中将一个时区的时间戳转换为另一个时区的时间戳。因此，您始终可以在 IST 或始终在 GMT/UTC 或始终在美国/东部获取数据。

# ios - 如何在coreplot中隐藏带有图例的折线图？

> ID：10601372
> 
> 赞同：0
> 
> 时间：2012-05-15T13:08:43.550
> 
> 标签：ios, xcode, graph, core-plot

我有两个图表。我想在点击时隐藏一个图表。我知道如何隐藏图表，但是当我隐藏它时，图例仍然可见。如何隐藏它？

要隐藏图表，我使用以下代码行： `_graphPlot.bancaOneLinePlot.hidden=YES;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:59:44.613

要从图例中删除绘图：

```
[_graph.legend removePlot:_bancaOneLinePlot]; 
```

再次添加：

```
 [_graph.legend addPlot:_bancaOneLinePlot]; 
```

[参考](https://core-plot.googlecode.com/hg-history/efa73ee50d8edfd0e1d4294cf4bd2c07d9f8af77/documentation/html/iOS/interface_c_p_t_legend.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:45:16.823

当您点击图例项时，您可以轻松隐藏绘图。请看下面我的回答。可能这段代码对你有用。

[https://stackoverflow.com/a/13950514/1220922](https://stackoverflow.com/a/13950514/1220922)

# python - 获取 Python 字典中相似值的总和

> ID：10601373
> 
> 赞同：0
> 
> 时间：2012-05-15T13:08:46.673
> 
> 标签：python, collections, dictionary

对不起，我又回来了。这次我试图获取每个停车场的注册数量并添加了以下代码：

```
data_dict = {}
dict_list = []
def createNameDict(filename):
  path = "C:\Users\user\Desktop"
  basename = "ParkingData_Part2.txt"
  filename = path + "//" + basename
  file = open(filename)
  contents = file.read()
  print contents,"\n"

  data_list = [lines.split(",") for lines in contents.split("\n")]

  for line in data_list:
    regNumber = line[0]
    name = line[1]
    phoneExtn = line[2]
    carpark = line[3]
    details = (name,phoneExtn,carpark)

    data_dict[regNumber] = details
  print data_dict,"\n"
  print data_dict.items(),"\n"

def getDetails(regNumber):
  try:
    print data_dict[regNumber]
  except:
    print regNumber, " not in dictionary"
    return
def addRegistration(regNumber, details):
  if regNumber not in data_dict:
    data_dict[regNumber] = details

    print regNumber, ":", details, "Registration details added"
  else:
    print regNumber, "Key Already exist, \n"

  return data_dict
def registrationsPerCarpark(carpark):

  for regNumber, details in data_dict:        
    return [key for key, value in data_dict.iteritems() if value == details][0]
  #for carpark in data_dict.values():
   # print sum(int(carpark))
    #return 
```

但是这些值没有加起来，因为它们不是数字。我在谷歌上搜索了很多，但没有得到任何关于这方面的信息。我的代码的输出是这样的：

```
====== Loading Progam =======
>>> createNameDict("C:\Users\user\Desktop//ParkingData_Part2.txt")
EDF768, Bill Meyer, 2456, Vet_Parking
TY5678, Jane Miller, 8987, AgHort_Parking
GEF123, Jill Black, 3456, Creche_Parking
ABC234, Fred Greenside, 2345, AgHort_Parking
GH7682, Clara Hill, 7689, AgHort_Parking
JU9807, Jacky Blair, 7867, Vet_Parking
KLOI98, Martha Miller, 4563, Vet_Parking
ADF645, Cloe Freckle, 6789, Vet_Parking
DF7800, Jacko Frizzle, 4532, Creche_Parking
WER546, Olga Grey, 9898, Creche_Parking
HUY768, Wilbur Matty, 8912, Creche_Parking 

{'HUY768': (' Wilbur Matty', ' 8912', ' Creche_Parking'), 'GH7682': (' Clara Hill', ' 7689', ' AgHort_Parking'), 'GEF123': (' Jill Black', ' 3456', ' Creche_Parking'), 'WER546': (' Olga Grey', ' 9898', ' Creche_Parking'), 'TY5678': (' Jane Miller', ' 8987', ' AgHort_Parking'), 'ABC234': (' Fred Greenside', ' 2345', ' AgHort_Parking'), 'KLOI98': (' Martha Miller', ' 4563', ' Vet_Parking'), 'EDF768': (' Bill Meyer', ' 2456', ' Vet_Parking'), 'JU9807': (' Jacky Blair', ' 7867', ' Vet_Parking'), 'DF7800': (' Jacko Frizzle', ' 4532', ' Creche_Parking'), 'ADF645': (' Cloe Freckle', ' 6789', ' Vet_Parking')} 

[('HUY768', (' Wilbur Matty', ' 8912', ' Creche_Parking')), ('GH7682', (' Clara Hill', ' 7689', ' AgHort_Parking')), ('GEF123', (' Jill Black', ' 3456', ' Creche_Parking')), ('WER546', (' Olga Grey', ' 9898', ' Creche_Parking')), ('TY5678', (' Jane Miller', ' 8987', ' AgHort_Parking')), ('ABC234', (' Fred Greenside', ' 2345', ' AgHort_Parking')), ('KLOI98', (' Martha Miller', ' 4563', ' Vet_Parking')), ('EDF768', (' Bill Meyer', ' 2456', ' Vet_Parking')), ('JU9807', (' Jacky Blair', ' 7867', ' Vet_Parking')), ('DF7800', (' Jacko Frizzle', ' 4532', ' Creche_Parking')), ('ADF645', (' Cloe Freckle', ' 6789', ' Vet_Parking'))] 

>>> registrationsPerCarpark("AgHort_Parking")
The error was:__getitem__
Attribute not found.
You are trying to access a part of the object that doesn't exist.
Please check line 48 of C:\Users\user\Desktop\159171\assignment2_part2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:14:01.973

这是另一种更紧凑的方法。

```
import csv
from collections import defaultdict

rows = defaultdict(set)

with open('in.csv') as f:
  lines = csv.reader(f)
  for line in lines:
      rows[line[3].strip()].add((line[0],line[1],line[2]))

for key in rows:
   print 'Total number of cars for %s is %s' % (key,len(rows[key])) 
```

结果是：

```
The total number of cars for Creche_Parking is 4
The total number of cars for AgHort_Parking is 3
The total number of cars for Vet_Parking is 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:20:10.327

该行`for regNumber, details in data_dict`是错误的，您不能以这种方式迭代 dict 。您可能的意思是`for regNumber, details in data_dict.items()`（或`iteritems()`，但这将是 Python 2 特定的）。

如果我对任务的理解正确，函数体应该如下所示：

```
def registrationsPerCarpark(carpark):

    return sum(value[2]=carpark for value in data_dict.values()) 
```

请注意值中的空格：例如，您应该寻找`' AgHort_Parking'`，而不是`'AgHort_Parking'`。为了解决这个问题，改变`createNameDict`做

```
carpark = line[3].strip() 
```

等等。此外，`createNameDict`内存效率低，因为它一次将文件内容加载到内存中。要减少内存使用量，请执行以下操作：

```
data_list = []
with open(filename) as infile:
  data_list = [lines.split(",") for lines in contents.split("\n")]
  for line in infile:
        data_list.append(line.split(','))
        print line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:22:33.650

```
def registrationsPerCarpark(carpark):
    for regNumber, details in data_dict:        
        return [key for key, value in data_dict.iteritems() if value == details][0] 
```

您的`for`循环将不起作用，因为`in dictionary`迭代的构造只返回`key`，而不是`(key, value)`对。其次，您从不使用`carpark`变量。第三，它是无关紧要的，因为您之后在 return 语句中循环遍历它，尽管您对它的使用没有意义。可以假设您只需要计算特定停车场的汽车数量吗？

# asp.net-mvc - 如何再次将我的网站添加到 IIS？

> ID：10601381
> 
> 赞同：0
> 
> 时间：2012-05-15T13:09:14.393
> 
> 标签：asp.net-mvc, visual-studio-2010, iis

我从 IIS 中删除了我的网站，现在当我尝试调试时出现错误，`Unable to start debugging on the web server`. 我可以尝试如何再次添加它，但我不想犯任何错误或更糟，犯错误甚至不知道，它会影响以后的事情，我不知道。我怎样才能再次添加它？可以通过visual studio来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:14:11.020

您可以通过 Build 菜单中的 Publish 命令或右键单击 Project Explorer 中的项目来完成。在服务 URL 中设置您要在其上发布站点的 Web 服务器的 URL（例如 localhost），并在站点/应用程序中设置网站名称（例如默认网站/您的网站）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:16:13.630

转到项目的属性。在 Web 选项卡中，点击“创建虚拟目录”按钮

# python - gevent.StreamServer 和非阻塞 raw_input()？

> ID：10601382
> 
> 赞同：4
> 
> 时间：2012-05-15T13:09:14.610
> 
> 标签：python, gevent

我编写了一个简单的 tcp 服务器，`gevent.StreamServer`用于测试目的。为了让我向某些客户端发送响应，我需要一种非阻塞方式来处理通过 的输入`raw_input()`，最好不使用线程。

经过一番谷歌搜索后，我偶然发现了这个问题：[How to make non-blocking raw_input when using eventlet.monkey_patch() 以及为什么它会阻塞所有内容，即使在另一个线程上执行也是如此？](https://stackoverflow.com/questions/9027311/how-to-make-non-blocking-raw-input-when-using-eventlet-monkey-patch-and-why-it)

我写了以下内容，它完全符合我的要求，但是我认为有更好的方法。有人能指出我正确的方向吗？此外，感谢 try/except 没有捕获 KeyboardInterrupt 的想法。

```
import select
from gevent.monkey import patch_all
from gevent.server import StreamServer

patch_all(os=True, select=True)

def raw_input(message):
    """ Non-blocking input from stdin. """
    sys.stdout.write(message)

    select.select([sys.stdin], [], [])
    return sys.stdin.readline()

def main():
    """ Run the server, listen for commands """

    server = StreamServer(("0.0.0.0", 6000), handle)
    print "Starting server"
    gevent.signal(signal.SIGTERM, server.close)
    gevent.signal(signal.SIGQUIT, server.close)
    gevent.signal(signal.SIGINT, server.close)

    server.start()
    while True:
        try:
            a = raw_input("")
            if a:
                print "Received %s" % a
            gevent.sleep(0)
        except KeyboardInterrupt:
            print "Received a shutdown signal, going down ..."
            server.stop()
            sys.exit(0)

if __name__ == "__main__":
    main() 
```

编辑：我已经重写了部分代码，现在我明白了 main() 函数的愚蠢之处。如果有人偶然发现这个问题并且对如何做有更好的想法，我会将其发布为编辑。

```
from gevent.signal import signal

def get_console_input():
    """ Non-blocking console input to the server """

    select.select([sys.stdin], [], [])
    # There's quite a bit of code here but it is input handling so 
    # for shortness's sake   I've snipped everything and return the line read.
    return sys.stdin.readline()

def exit(server):
    """ Quit the server gracefully """

    print "Received shutdown signal, going down. """
    server.close()
    sys.exit(0)

def main():
    """ The main function. Create and run the server, listen for commands and
   append any command to the server so it can send them on to the clients """

    # Myserver is a class which inherits from gevent.server.StreamServer.
    # Myserver could just as well be replaced by gevent.server.StreamServer.

    server = MyServer(("0.0.0.0", PORT))
    print "Starting server"

    # Add some signal handlers to quit the server gracefully.
    gevent.signal(signal.SIGTERM, exit, server)
    gevent.signal(signal.SIGQUIT, exit, server)
    gevent.signal(signal.SIGINT, exit, server)

    # Server started in async mode
    server.start()

    while True:
        get_console_input()
        gevent.sleep(0)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:27:23.670

我发现这样做的最简单方法是使用[`gevent.socket.wait_read`](http://www.gevent.org/gevent.socket.html#gevent.socket.wait_read)等待直到`sys.stdin`可以读取：

```
wait_read(sys.stdin.fileno())
return sys.stdin.readline() 
```

我还围绕文件描述符编写了一个小包装器，以赋予它们非阻塞`.read()`和`.write()`方法：[https ://gist.github.com/2915875](https://gist.github.com/2915875)

# c# - Linq to Entity Group By DateTime

> ID：10601383
> 
> 赞同：0
> 
> 时间：2012-05-15T13:09:16.517
> 
> 标签：c#, linq, datetime, linq-to-entities, grouping

我希望能够获得过去 12 个月的销售额，按月分组。这是我到目前为止所拥有的：

类定义：

```
 public DateTime DateSold { get; set; }
        public int Month { get; set; }

        public int USDNumberItemsSold { get; set; }
        public int GBPNumberItemsSold { get; set; }
        public int EURNumberItemsSold { get; set; }
        public int TotalNumberItemsSold { get { return USDNumberItemsSold + GBPNumberItemsSold + EURNumberItemsSold; } }

        public decimal USDRevenueTotal { get; set; }
        public decimal GBPRevenueTotal { get; set; }
        public decimal EURRevenueTotal { get; set; }
        public decimal OverallEarnings { get { return USDRevenueTotal + GBPRevenueTotal + EURRevenueTotal; } } 
```

我的 Linq 查询如下：

```
List<MonthlySales> monthlySales = (from sale in Sales
                                   orderby sale.DateSold descending
                                   group sale by sale.DateSold.Month into ds
                                   select new MonthlySales
                                   {
                                       DateSold = ds.Key,
                                       USDNumberItemsSold = ds.Where(it => it.USDCut.HasValue).Where(it => it.USDCut != 0).Count(),
                                       GBPNumberItemsSold = ds.Where(it => it.GBPrCut.HasValue).Where(it => it.GBPCut != 0).Count(),
                                       EURNumberItemsSold = ds.Where(it => it.EURCut.HasValue).Where(it => it.EURCut != 0).Count(),
                                       USDRevenueTotal = PerformCurrencyConversion(ds.Sum(it => it.USDCut.HasValue ? it.USDCut.Value : 0), 0M, 0M, reportRequest.BaseCurrency, endDate),
                                       GBPRevenueTotal = PerformCurrencyConversion(0M, ds.Sum(it => it.GBPCut.HasValue ? it.GBPCut.Value : 0), 0M, reportRequest.BaseCurrency, endDate),
                                       EURRevenueTotal = PerformCurrencyConversion(0M, 0M, ds.Sum(it => it.EURCut.HasValue ? it.EURCut.Value : 0), reportRequest.BaseCurrency, endDate),
                        }).Take(12).ToList(); 
```

我收到以下错误：

无法将类型“int”隐式转换为“System.DateTime”

因为显然 DateTime.Now.Month 是一个整数。

我尝试使用以下内容：

```
Month = ds.Key 
```

其中“月份”是一个整数。这没关系，但出于显示目的，我没有年份或类似的东西。

任何人都可以提供任何建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:05:08.130

我建议将密钥设置为相关月份的第一天，这样您还可以获得年份信息（因为您想要过去 12 个月，所以您需要这些信息）。

```
...
group sale by sale.DateSold.Date.AddDays(-(sale.DateSold.Day - 1)) into ds
orderby ds.Key descending
... 
```

您还希望在分组之后而不是之前进行排序，因为分组使用键的哈希而不是值，因此您可能不会得到相同的排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:59:56.303

你为什么不按日期时间分组，这样你就可以用«ds.Key»设置«DateSold»。
如果您想将 DateTime 的月份存储在 Key 中，您只需« ds.Key.Month »。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T19:07:16.353

我建议引入一种新类型来表示`YearMonth`这是否是您所需要的（请参阅我在评论中的问题）。

顺便说一句：如果您仅按月份分组，那么当您获得重叠数据时可能会遇到问题，例如，数据集包含`201101`和的数据`201201`- 两者都将被分组在一起。当您按 yearMonth 进行分组时，这应该不是问题。

新类型将非常基本（可能是结构）：

```
public class YearMonthSold
{
    public int Year {get; set;}
    public int Month {get; set;}
} 
```

MonthlySales 会得到这个属性：

```
public YearMonthSold DateSold { get; set; } 
```

并且需要更新 LINQ 查询才能使用它：

```
List<MonthlySales> monthlySales = (from sale in Sales
                        orderby sale.DateSold descending
                        group sale by new {Year = sale.DateSold.Year, Month = sale.DateSold.Month} into ds
                        select new MonthlySales
                        {
                            DateSold = new YearMonthSold {Year = ds.Key.Year, Month = ds.Key.Month},
                            (...)
                        })
                       .Take(12)
                       .ToList(); 
```

编辑：或如 SPFiredrake 建议的那样：

```
List<MonthlySales> monthlySales = (from sale in Sales
                        orderby sale.DateSold descending
                        group sale by new YearMonthSold {Year = sale.DateSold.Year, Month = sale.DateSold.Month} into ds
                        select new MonthlySales
                        {
                            DateSold = ds.Key,
                            (...)
                        })
                       .Take(12)
                       .ToList(); 
```

我不知道该`Sale`对象的代码，但它似乎不应该以任何方式受到此更改的影响。

# c# - 索引超出范围异常

> ID：10601387
> 
> 赞同：0
> 
> 时间：2012-05-15T13:09:26.830
> 
> 标签：c#, unity3d

我在 Unity 3D 上开发，并尝试使用[此处实现的类制作一个 Combobox](http://www.unifycommunity.com/wiki/index.php?title=PopupList)

现在在我的测试课上，我这样做：

```
public class combobox_test : MonoBehaviour {

    public GUIContent[] comboBoxList;
    private ComboBox_Class comboBoxControl = new ComboBox_Class();
    public GUISkin mySkin;

    void start(){
        comboBoxList = new GUIContent[5];
        comboBoxList[0] = new GUIContent("Thing 1");
        comboBoxList[1] = new GUIContent("Thing 2");
        comboBoxList[2] = new GUIContent("Thing 3");
        comboBoxList[3] = new GUIContent("Thing 4");
        comboBoxList[4] = new GUIContent("Thing 5");
    }

    void OnGUI(){
        GUI.skin = mySkin;
        int selectedItemIndex = comboBoxControl.GetSelectedItemIndex();

        selectedItemIndex = comboBoxControl.List(new Rect(50, 100, 100, 20),       comboBoxList[selectedItemIndex].text, comboBoxList,GUI.skin.GetStyle(""));
        //GUI.Label( new Rect(50, 70, 400, 21),"You picked " + comboBoxList[selectedItemIndex].text + "!" );
    }
} 
```

我有这个错误：

> IndexOutOfRangeException：数组索引超出范围。combobox_test.OnGUI () (在 Assets/combobox_test.cs:56)

我尝试了一些在不同网站上找到的解决方案，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:13:21.410

尝试访问数组中大于或等于其长度的索引时，会引发 IndexOutOfRangeException。我相信你的问题是

```
 int selectedItemIndex = comboBoxControl.GetSelectedItemIndex(); 
```

给出的值大于`comboBoxList`（例如`>= 5`）的容量，因此当您尝试访问`comboBoxList[selectedItemIndex]`IndexOutOfRangeException 时会抛出。

# iphone - 如果搜索文本字段为空，搜索显示控制器会阻止隐藏取消按钮吗？

> ID：10601389
> 
> 赞同：0
> 
> 时间：2012-05-15T13:09:32.817
> 
> 标签：iphone, objective-c, ios

我有搜索显示控制器，我希望取消按钮始终可见，我从界面构建器“ **xib**文件” 中设置了“**显示取消按钮”选项，并处理了**

 **```
- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller 
{
    controller.searchBar.showsCancelButton = YES;
} 
```

要使取消按钮始终显示，如果搜索文本输入有文本，它会正常工作，但如果我没有在搜索栏中输入任何文本并单击褪色视图，则搜索文本字段停止编辑这是正确的行为，但它隐藏了取消按钮，那么我怎样才能使取消按钮始终显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:13:58.587

```
 self.searchDisplayController.delegate=self;
self.searchDisplayController.searchResultsDelegate=self;
self.searchDisplayController.searchBar.delegate=self; 
```

并开始搜索

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller 
{
    [self.searchDisplayController.searchBar setShowsCancelButton:YES animated:NO];
} 
```**

# gwt - 在单元格中显示集合？

> ID：10601395
> 
> 赞同：0
> 
> 时间：2012-05-15T13:09:47.407
> 
> 标签：gwt, gwt-2.2-celltable

我使用 CellTable 来显示我的数据。但是我的数据有字段是字符串的集合。我想知道是否有任何建议用于此目的。在这种情况下你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:13:42.510

您必须制作一个[`Cell`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/cell/client/Cell.html)（最简单的是扩展[`AbstractCell`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/cell/client/AbstractCell.html)，因为您只需要实现该`reder`方法）来显示您的数据（即将其序列化为 HTML）。

# box-api - BOX.net API 2.0 版中有get_account 方法吗？

> ID：10601398
> 
> 赞同：1
> 
> 时间：2012-05-15T13:09:59.590
> 
> 标签：box-api

在 BOX.net API 1.0 版中，有一种获取用户帐户信息的方法（http://developers.box.net/w/page/12923928/ApiFunction_get_account_info）

```
https://www.box.net/api/1.0/rest?action=get_account_info&api_key=<key>&auth_token=<token> 
```

但在 2.0 版本中，我找不到等效的方法。它存在吗？还是使用新的 2.0 API 以某种形式仍然可以使用旧方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:16:18.830

我们目前还没有实现 /users 端点，它将提供您正在寻找的信息。

但是，auth 令牌目前可以跨 v1 和 v2 工作，因此您仍然可以调用 v1 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T11:04:13.087

试试这个。

```
BoxClient client = getAuthenticatedClient(code);
BoxDefaultRequestObject requestObject = null;
List<BoxUser> userList = client.getUsersManager().getAllEnterpriseUser(requestObject, null);
for (BoxUser usr : userList) {
    System.out.println("Addr: " + usr.getAddress());
    System.out.println("Name : " + usr.getName());
    System.out.println("Login : " + usr.getLogin());
} 
```

# ios - 移除uisearchbar中uitextfield的边框

> ID：10601402
> 
> 赞同：2
> 
> 时间：2012-05-15T13:10:11.620
> 
> 标签：ios, cocoa-touch, uitextfield, uisearchbar

我想将 UISearchBar 控件自定义为如下图所示的样式： ![这是一个自定义的 UISearchBar，这里的文本字段没有边界。](../Images/3eaaba6babe408db32202739fee902bb.png)

首先我应该删除背景视图，然后在 UISearchBar 中找到 UITextfiled，扩展 UITextfiled 的框架并删除它的边框。

这是我的代码：

```
UITextField *searchField;

NSUInteger numViews = [self.subviews count];
for(int i = 0; i != numViews; i++) {
    if([[self.subviews objectAtIndex:i] isKindOfClass:[UITextField class]]) { //conform?
        searchField = [self.subviews objectAtIndex:i];
    }
}
if(!(searchField == nil)) {

    [searchField setBorderStyle:UITextBorderStyleNone];
    searchField.frame = self.frame; //modify the frame
}

[[self.subviews objectAtIndex:0]removeFromSuperview]; //remove the background. 
```

结果是 UITextField 的边界还在。:(

![在此处输入图像描述](../Images/f104bf5ffa40b6faf5c9e29e278100dc.png)

我的问题是： 1.为什么我不能修改 UISearchBar 的 UITextField 的外观？

2.如何去除UISearchBar中UITextfield的边框。

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T20:36:46.960

子类 UISearchBar 并覆盖 layoutSubViews 以删除搜索栏背景和文本字段边框子视图：

```
- (void)layoutSubviews
{    
    [super layoutSubviews];

    for (UIView *subview in self.subviews) {
        // Remove the default background
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
            [subview removeFromSuperview];
        }

        // Remove the rounded corners
        if ([subview isKindOfClass:NSClassFromString(@"UITextField")]) {
            UITextField *textField = (UITextField *)subview;
            for (UIView *subsubview in textField.subviews) {
               if ([subsubview isKindOfClass:NSClassFromString(@"UITextFieldBorderView")]) {
                    [subsubview removeFromSuperview];
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:16:03.440

我不确定这一点，但是我怀疑您能够实现`UISearchBar`与图像中类似的唯一方法是创建一个新的`UISearchBar`. 使用它，您可以将其设置为看起来与图像中的完全一样。

如果您决定走子类化路线，[这篇文章可能会对您有所帮助。](https://stackoverflow.com/questions/6201406/how-to-custom-uisearchbar)

# jquery - jquery悬停并添加类

> ID：10601403
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:10:12.320
> 
> 标签：jquery, hover, addclass

这听起来很简单，但我似乎无法让它发挥作用。

我试图让我的列表只有当用户悬停在它上面时才有滚动效果。

当我将鼠标悬停在列表上方时，类不会改变，滚动条也不会出现。

我有以下css类和脚本

CSS

```
 .business_update_old{font-size:11px;max-height:300px}
    .no_scroll{overflow:hidden}
    .scroll{overflow:auto} 
```

脚本

```
 $('.business_update_old').hover(function(){
       $(this).removeClass("no_scroll");    
       $(this).addClass("scroll");
    }); 
```

PHP

```
 :
    :
    echo '<div class="business_update_old no_scroll">';
    echo '<ul class="business_updates_new"></ul>';
    :
    foreach(... 
```

如果有人可以在这里提供任何帮助，我们会很高兴。谢谢。赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:40:24.833

这个[小提琴](http://jsfiddle.net/td5P3/1/)显示它工作。

首先，您需要确保有足够的内容来填充 300px 高的 div，就像我在小提琴中所做的那样。

此外，为了确保滚动条不会停留，您需要使用这个 jQuery

```
$('.business_update_old').hover(
function() {
    $this = $(this);
    $this.removeClass("no_scroll")
    $this.addClass("scroll")
}, function() {
    $this.removeClass("scroll")
    $this.addClass("no_scroll");
});​ 
```

* * *

或者，你可以只用 CSS 来做这件事，完全不需要 jQuery。

如果你像这样设置你的 CSS

```
.business_update_old {
    font-size:11px;
    max-height:300px;
    overflow: hidden;
}
.business_update_old:hover {
    overflow:auto;
} 
```

然后它也将起作用。看到[这个](http://jsfiddle.net/td5P3/2/)小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T18:59:24.897

很简单：

```
$('.business_update_old').hover(
    function(){
        $(this).removeClass('no_scroll').addClass('scroll');
    }, function() {
        $(this).removeClass('scroll').addClass('no_scroll');
    }
);​ 
```

如有疑问，[请查看文档](http://api.jquery.com/hover/)。

干杯

# php - 将 $this 传递给函数

> ID：10601404
> 
> 赞同：3
> 
> 时间：2012-05-15T13:10:14.267
> 
> 标签：php, oop

在 Javascript 中有[`call()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)and ，那是部分的，但在 PHP 中[`apply()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)解析为`call_user_func()`and 。`call_user_func_array()`

现在，这里的区别在于我们可以传递一个变量，`call()`并在函数范围内`apply()`使用。`this`

我可以用 PHP 实现这样的目标吗？

## 更新：

在 Javascript 中：

```
var x = function(passed)
{
    return { dis : this, passd : passed };
};

console.log(x(44)); // window, 44

console.log(x.call(25, 44)); // 25, 44 
```

`.call()`函数范围内的第一个参数，变为`this`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:14:56.823

您可以尝试通过引用传递它：http: [//php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

```
function Example (&$obj) {
    $obj->callFunction();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T13:20:26.507

来自[**回调**](http://www.php.net/manual/en/language.types.callable.php)[的PHP 手册](http://www.php.net/manual/en/language.types.callable.php)**：**

 **> 实例化对象的方法作为数组传递，该数组包含索引 0 处的对象和索引 1 处的方法名称。

下面的例子：

```
// Type 3: Object method call
$obj = new MyClass();
call_user_func(array($obj, 'myCallbackMethod')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-24T06:57:47.220

从 PHP5.4 开始，可以将对象绑定到充当`$this`.

参考： http: [//lv.php.net/manual/en/closure.bindto.php](http://lv.php.net/manual/en/closure.bindto.php)

代码：

```
<?php

$object = new StdClass;

$closure = function($a)
{
    $this->a = $a;

    return $this;
};

// Here, we bind it.
$closure = $closure->bindTo($object);

// Tests.
$out = $closure('this is "a"')->a;

var_dump($object, $out); 
```

瞧！完全`$this`支持 PHP。不过，它只适用于闭包。**

# php - PDO、变量 SQL 查询、bindParam 和循环

> ID：10601406
> 
> 赞同：1
> 
> 时间：2012-05-15T13:10:19.323
> 
> 标签：php, mysql, loops, pdo

我最近从 mysql_ 函数转移到 PDO，有些东西我无法适应我的情况。

问题是搜索查询，实际上我正在这样做：

```
$resultat = $DB->prepare('SELECT * FROM `posts` WHERE `title` LIKE :searchterm OR `tags` LIKE :searchterm LIMIT '.$debut.', '.NB_ART);
$resultat->bindParam(':searchterm',$searchterm);
$resultat->execute(); 
```

知道查询的大小可能会根据用户搜索而改变，我该怎么做这样的事情：

```
$tab = explode(' ',$searchterm);
$query = 'SELECT * FROM posts WHERE ';

foreach($tab as $value){
    if( strlen($value)>2 ){
        $query .= ' (`title` LIKE "%'.$value.'%" OR `tags` LIKE "%'.$value.'%") AND';
    }
}
$query = substr($query,0,-3);
$query .= 'ORDER BY `date` DESC';

// And how can i do the bindParam() here ? 
```

如果您能从一个小例子开始，我将不胜感激。

谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:45:29.307

```
$data = array();
$arr_query = array();

$tab = explode(' ',$searchterm);
$query = 'SELECT * FROM posts WHERE ';

foreach($tab as $value){
    if( strlen($value)>2 ){
        // sry for that, but i think implode() better
        $arr_query[] = '(`title` LIKE ? OR `tags` LIKE ?)';

        $data[] = '%'. $value .'%';
        $data[] = '%'. $value .'%';
    }
}
$query .= implode(' AND', $arr_query);
$query .= ' ORDER BY `date` DESC';

$res = $pdo->prepare($query);
$res->execute($data); 
```

第一个示例中的限制也必须受到保护。

# supervisord - 监督者：有没有办法让孩子重新加载？

> ID：10601407
> 
> 赞同：5
> 
> 时间：2012-05-15T13:10:21.027
> 
> 标签：supervisord

我正在设置一个服务器来托管一个 Django 应用程序，该应用程序具有：

1.  `uWSGI`由 ubuntu 的 uWSGI 初始化脚本启动的应用程序
2.  `celeryd`开始于`supervisord`

所以我正在编写一个部署脚本，它将：

1.  从 git 拉取代码
2.  迁移数据库
3.  告诉`uWSGI`重新启动，因此它将获取新代码。
4.  告诉`celeryd`重新启动，因此它也会获取新代码。

`uWSGI`具有此配置功能：

```
touch-reload
gracefully reload the uWSGI stack when a file/directory changes. 
```

所以我的脚本由运行所有应用程序进程的非特权用户运行。

要重新启动`uWSGI`我可以简单地`touch ~/.restart_uwsgi`。

有什么方法可以在不授予非特权用户 sudo 访问权限的情况`celeryd`下运行相同的操作，这样他就可以了？`supervisord``supervisorctl restart celeryd`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:25:42.277

由于我还没有找到更好的方法来做到这一点，这就是我现在正在做的事情：

```
# restart_my_proc.sh:
#!/bin/sh
supervisorctl restart <my_proccess_name>

chmod +x restart_my_proc.sh

# sudoers:
<site_user> ALL= NOPASSWD:/path/to/restart_my_proc.sh

# my_deploy_script.sh
sudo /path/to/restart_my_proc.sh 
```

所以我使用sudo，不是最好的解决方案，但它有效。

如果有人对此有更好的答案，我很乐意更改已接受的答案。

# sql - 查询表时的 SQL 性能

> ID：10601412
> 
> 赞同：0
> 
> 时间：2012-05-15T13:10:29.510
> 
> 标签：sql, postgresql

我是 SQL 新手，不了解性能影响。似乎 SQL 数据库将所有内容都存储在一个地方。这是否意味着表格变得非常大，非常快？这不会影响性能吗？

Stackoverflow 模型示例，但带有线程注释：

```
CREATE TABLE t_users (
   name varchar(80) primary key,
   email varchar(80)

);

CREATE TABLE t_posts (
   id varchar(80) primary key,
   userid varchar(80) references t_users(name),
   title varchar(80),
   description text,
   topic varchar(80),
   path text

); 
```

这是一个有效的设计吗？每个用户的所有帖子都存储在同一个表中......因此，如果我想查询所有具有“编程”主题的评论，则需要查看每一个帖子，即使是具有不同主题的帖子，因为它们都存储在同一个表中......这也意味着如果我进行更复杂的查询，它们将成倍增长，因为我的磁盘表越大。将每个帖子拆分到一个新表中不是更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:14:19.287

该设计是准有效的，但不是完全有效的：

*   你`t_users`最好有一个**自动增量**unsigned int ID 列。[（名字的主键几乎总是一个坏主意。人们改变名字。人们有相同的名字。甚至国家有时也会改变名字！数字几乎总是最好的选择！）]
*   这样，您`t_posts`可以参考该用户 ID。现在连接速度非常快。
*   您甚至可以强制执行参照完整性：不存在的用户不能发布任何帖子。或者当用户被删除时，帖子也会被删除。
*   您`t_posts`有一个 ID 主键列（好！），但它是 varchar（坏！）。INT更好。`BIGINT`如果你需要它。

您稍后会发现您的帖子可能有**多个主题**（stackoverflow“标签”）。不要将它们 CSV 放在 varchar 字段中。创建一个新表“主题”，其中包含 ID、描述和链接表“posts_to_topic”，将每个帖子链接到一个或多个主题。

### 索引

您需要阅读的是索引。如果您想查询所有主题为“programming”的评论，您通常会在“topic varchar(80)”列上有一个索引。该索引很小（将其视为一个单独的表：它包含索引列和主键），因此您的 (R)DBMS 可以非常快速地搜索它（树结构）并获取它需要的所有主键。然后，根据您的选择，DBMS 会向您发送信息：

*   如果您只需要索引中已有的列，它可以从索引中获取所有内容。
*   如果您需要其他列，它现在只会实际访问 t_posts 表，并使用索引中的主键来访问行。

### 简化

我撒了谎。在最后一段中，我让这一切变得更加简单。有一个优化器会查看查询并确定可以使用哪些索引。它将检查索引——取决于基数、表大小、它可能使用它的列，或者决定扫描表。如果您的表具有可变的行长度，则获取第 X 行比所有行都具有相同长度（无 VARCHAR）时要慢得多。而这一切都取决于您使用什么 (R)DBMS（或在 MySQL 中，甚至取决于什么存储引擎）。

但是首先阅读索引，关于什么，为什么，然后是如何。之后，您可以更深入地研究异常。

### 同一数据的多个表

这是初学者经常犯的错误，它们是双向的：

*   “如果我们添加一列“TYPE”并使所有内容变为 varchar，我们可以将所有内容放在一个表中！”
*   “我们的数据库中只能有 10000 个表，table_1、table_2 等等！”

阅读索引会告诉你为什么这在技术上是一个坏主意，但在逻辑上它也不那么优雅：一个表意味着一个实体（书籍。用户。帖子。页面） - 拆分这些会导致一些非常难看查询。如果你问某人为什么这样做，原因通常是“为了速度”，而他们的决策列上的额外索引也会产生相同的效果。

想一想：如果您为每个用户创建一个帖子标题，请编写列出 10 个最常用主题的查询，以及每个主题有多少个帖子。您必须为每张桌子命名！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T13:27:39.370

您问题前两个问题的真正答案是“是”和“否”。“是的”，表格确实增长得很快。“不”这通常不会影响性能。

尽管您可以将表视为您扫描以查找结果的单个文件，但 SQL 的作用远不止于此。几乎所有数据库都管理称为页表的东西，这意味着以下内容：

*   读取表格后，如果它可以放入内存，它将一直留在那里，直到需要移出。这大大加快了对表的进一步查询。
*   加载页表通常与处理异步操作。

这两点本身很难（但并非不可能）在大多数编程语言中实现。此外，SQL 为您提供索引和表分区，可以进一步加快单个表的处理速度。最后，大多数版本的 SQL 支持几乎所有功能的多个处理器/线程。

当涉及到组合来自多个表的结果或聚合结果时，数据库在进行连接和聚合的算法方面付出了很多人年的努力。在这种情况下，您不太可能做得更好。

而且，这些功能没有涉及关系数据库的许多其他功能，例如强制数据一致性、备份和恢复数据、保证修改等。

至于您的表架构，您似乎正在入门并且很好。一般来说，我建议您的主键以表格命名并且是整数。您的第一张桌子将是：

```
CREATE TABLE users (
    UserId int primary key,
    name varchar(80),
    email varchar(80)
); 
```

第二个表中的 UserId 被声明为 int。作为提示为什么这样做更好，用户可能希望不时更改他们的名字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:14:11.447

> 将每个帖子拆分到一个新表中不是更好吗？

不。

如果您的帖子在不同的表中，那么您必须查询数百甚至数千个不同的表才能找到所有数据。

更不用说，除了数据（大小相同，无论它在哪个表中）之外，您还有表本身的开销。

# php - PHP LI 计数除法

> ID：10601413
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:10:30.013
> 
> 标签：php, mysql, html

我有一个显示 's 的循环，我`<li>`需要向第一个添加一个类，然后每六个添加一个类`<li>`

例子：

```
while ($db_field = mysql_fetch_assoc($result)) {

    <li (if mod of 6 add class="something")>One</li>
    <li>Two</li>
    <li>Three</li>
    <li>Four</li>
    <li>Five</li>
    <li class="something">Six</li>
    <li>Seven</li>

}
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:14:20.940

[**使用模`%`**](http://php.net/manual/en/language.operators.arithmetic.php)运算符非常容易：

```
$counter = 0;
while ($r = mysql_fetch_assoc($res) {
    $isSixthsLi = (bool) (($counter++) % 6 == 0); 
    echo $isSixthsLi ? '<li class="something">' : '<li>';
    echo htmlentities($r['content']);
    echo '</li>';
} 
```

该`($counter++) % 6`表达式表示*$counter 的余数除以 6，然后递增 $counter*。如果余数为零（对于 0、6、12，... 也是如此），则`<li>`使用类名打印 ，否则不打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:16:24.190

我认为这个列表是动态的，那么你可以使用

```
<?php 
 $i=0;
 foreach ($in as $v){  
        $i++;
        $class = (!$i%6) ? "something : "";  ?>
        <li class="<?=$class?>"><?=$v?></li>   

<?php } ?> 
```

**注意：**我使用了速记标签`<?=`，你可以`<?php echo`使用

# python - Django 错误消息：您不能将 team_name（不可为空的字段）设置为 None

> ID：10601415
> 
> 赞同：0
> 
> 时间：2012-05-15T13:10:32.227
> 
> 标签：python, django, google-app-engine, django-nonrel

我正在尝试使用来自另一个模型的列作为外键来扩展用户配置文件。但是，在保存其抛出的错误消息的同时。

```
Models.py:

class Team_Profile(models.Model):
    team_name = models.CharField(max_length=200, unique=True)

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    team_name = models.ForeignKey(Team_Profile)

    def __str__(self):
        return "%s's profile" % self.user

    def save(self, *args, **kwargs):
        try:
            existing = UserProfile.objects.get(user=self.user)
            self.id = existing.id
        except UserProfile.DoesNotExist:
            pass
        models.Model.save(self, *args, **kwargs)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        created = UserProfile.objects.get_or_create(user=instance)
post_save.connect(create_user_profile, sender=User) 
```

下面是我的views.py：

# 视图.py：

```
data = request.POST.copy()
team = data['team_hidden']
try:
            team_name = Team_Profile.objects.get(team_name=team)
except Team_Profile.DoesNotExist:
            team_profile = Team_Profile()
            team_profile.team_name = team
            team_profile.save()

try:
            user=User.objects.get(username=name)
            return render_to_response("user_exist.html", {'media_url':media_url})

except User.DoesNotExist:

            user= User.objects.create_user(name,User.email,User.password)
            user.first_name=first_name
            user.last_name=last_name
            user.save()

            userprofile = UserProfile()
            userprofile.user = user
            userprofile.team_name = Team_Profile.objects.get(team_name=team)                    

            userprofile.save() 
```

如果您需要更多信息，请告诉我。任何帮助表示赞赏。

# 追溯：

追溯：

```
File "/home/dtechsun/testapp/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/dtechsun/testapp/myentrancetest/views.py" in create_login
  796\.          user= User.objects.create_user(name,User.email,User.password)
File "/home/dtechsun/testapp/django/contrib/auth/models.py" in create_user
  135\.         user.save(using=self._db)
File "/home/dtechsun/testapp/django/db/models/base.py" in save
  460\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/home/dtechsun/testapp/django/db/models/base.py" in save_base
  592\.                 created=created, raw=raw, using=using)
File "/home/dtechsun/testapp/django/dispatch/dispatcher.py" in send
  172\.             response = receiver(signal=self, sender=sender, **named)
File "/home/dtechsun/testapp/myentrancetest/models.py" in create_user_profile
  53\.         created = UserProfile.objects.get_or_create(user=instance)
File "/home/dtechsun/testapp/django/db/models/manager.py" in get_or_create
  135\.         return self.get_query_set().get_or_create(**kwargs)
File "/home/dtechsun/testapp/django/db/models/query.py" in get_or_create
  387\.                 obj.save(force_insert=True, using=self.db)
File "/home/dtechsun/testapp/myentrancetest/models.py" in save
  49\.       models.Model.save(self, *args, **kwargs)
File "/home/dtechsun/testapp/django/db/models/base.py" in save
  460\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/home/dtechsun/testapp/django/db/models/base.py" in save_base
  571\.                     result = manager._insert(values, return_id=update_pk, using=using)
File "/home/dtechsun/testapp/django/db/models/manager.py" in _insert
  195\.         return insert_query(self.model, values, **kwargs)
File "/home/dtechsun/testapp/django/db/models/query.py" in insert_query
  1437\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/home/dtechsun/testapp/dbindexer/compiler.py" in execute_sql
  256\.         return super(SQLInsertCompiler, self).execute_sql(return_id=return_id)
File "/home/dtechsun/testapp/djangotoolbox/db/basecompiler.py" in execute_sql
  348\.                                         "field) to None!" % field.name)

Exception Type: DatabaseError at /create_login/
Exception Value: You can't set team_name (a non-nullable field) to None! 
```

谢谢，

苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:05:57.593

为 team_name 添加默认值效果很好。感谢大家的帮助。

```
class UserProfile(models.Model): 
        user = models.OneToOneField(User)   
        team_name = models.ForeignKey(Team_Profile, default=0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:26:12.533

你的整体逻辑似乎是正确的。但是，我认为错误似乎发生在第一个 except 块中

`team_profile.team_name = team`
我认为，此时团队将变为无，这将在下一行保存时引发错误。因此，请检查您从请求中获得的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:51:54.730

可能是因为：

```
team = data['team_hidden'] 
```

团队可能是空的（在发布期间没有发送 team_hidden，或者它是一个获取请求......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:14:18.467

我相信这里的问题在于您将 UserProfile 作为 OneToOneField 映射到 User 模型。Django 期望 team_name 有一个非空值，因为它与 UserProfile 模型有关系。在创建用户时尝试设置 team_name，看看是否有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T13:45:57.950

`User.objects.create_user`将创建/保存一个`User`实例，从而触发`create_user_profile`执行。然后当没有匹配的`UserProfile`实例时它会失败：

```
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        # team_name is None, 
        # but UserProfile.team_name is declared w/ null=False, by default
        created = UserProfile.objects.get_or_create(user=instance) 
```

# jsp - 如何在一个视图中从两个模型中获取价值

> ID：10601420
> 
> 赞同：0
> 
> 时间：2012-05-15T13:10:40.367
> 
> 标签：jsp, spring-mvc, jstl

```
I have to return values from two modelandview methods to a single jsp `mySoftwarelist.jsp` where i have two tables. Here i have two seperate methods for returning array list 

    ModelAndView getLegacySuiteList()
    ModelAndView getSuiteList()

i returned the arraylist `mySoftwareList`,`mySoftwareLegacyList` to the same view `swl_mySoftwareList` as

public ModelAndView getSuiteList(HttpServletRequest request, HttpServletResponse response) throws Exception
{
ArrayList mySoftwareList = new ArrayList();    
 try{
MySoftwareListHelper mySoftwareListHelper = new MySoftwareListHelper();
userEmailAddr =user.getEmailaddress();      
mySoftwareList = mySoftwareListHelper.getSuites(userEmailAddr);

}
catch(Exception e) {
 e.printStackTrace();
}
ModelAndView mnv = new ModelAndView("swl_mySoftwareList","mySoftwareList",mySoftwareList);
return mnv;

}

public ModelAndView getLegacySuiteList(HttpServletRequest request, HttpServletResponse response) throws Exception
{       
ArrayList mySoftwareLegacyList = new ArrayList();       
try{
MySoftwareListHelper mySoftwareListHelper = new MySoftwareListHelper();
userEmailAddr =user.getEmailaddress();
mySoftwareLegacyList = mySoftwareListHelper.getLegacySuites(userEmailAddr);
}catch(Exception e){
e.printStackTrace();
} 
```

ModelAndView mnv = new ModelAndView("swl_mySoftwareList","mySoftwareLegacyList",mySoftwareLegacyList); 返回mnv；

}

但它只返回模型`mySoftwareList`。我希望两个数组列表中的数据都用于同一个 jsp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:24:24.743

在返回视图之前，您需要将这两个列表分别添加到同一个 mnv 对象中。

```
ModelAndView mnv = new ModelAndView("swl_mySoftwareList","mySoftwareList",mySoftwareList); 
mnv.addObject("mySoftwareLegacyList",mySoftwareLegacyList);

return mnv; 
```

希望这可以帮助。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:25:23.833

我认为最好的做法是使用从两个实体获取所需属性的 DTO 对象，然后将该 DTO 对象传递给视图。

# android - 模拟锁屏android

> ID：10601421
> 
> 赞同：-3
> 
> 时间：2012-05-15T13:10:41.210
> 
> 标签：android, lockscreen

我知道这是个愚蠢的问题，但我在这里绝望了。你能告诉我在哪里可以找到[这些类](http://www.java2s.com/Open-Source/Android/UnTagged/mylockforandroid/Catalogmylockforandroid.htm)的清单文件和资源文件夹吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:14:44.627

这里有一个 apk：[http ://code.google.com/p/mylockforandroid/downloads/list](http://code.google.com/p/mylockforandroid/downloads/list)

您可以下载并解压缩它，清单和 res 文件夹就在那里。

# wordpress - Wordpress 显示附加类别文本

> ID：10601425
> 
> 赞同：0
> 
> 时间：2012-05-15T13:10:46.890
> 
> 标签：wordpress, dynamic, categories

我正在开发 WP 网站并停留在显示功能的侧栏类别中。

这是我的代码。

```
<div class="sidebarcategory"> 
        <h2 class="widgettitle"><?php echo get_cat_name(3); ?></h2>
        <ul>
            <li>
            <?php wp_list_categories('hide_empty=0&orderby=name&child_of=3&feed_image=http://devsites.dyndns.info/novelty/wp-content/themes/pixel/images/icon-car.png'); ?>
            </li>
        </ul>
    </div> 
```

因此，这会在列表顶部显示我不需要的附加“类别”。任何人都可以帮我删除动态代码。输出看起来像

```
<ul>
            <li>
            </li><li class="categories">Categories<ul>  <li class="cat-item cat-item-4"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:50:42.700

添加一个 emty 参数 title_li

```
wp_list_categories('title_li=&hide_empty=0&orderby=name&child_of=3&feed_image=http://devsites.dyndns.info/novelty/wp-content/themes/pixel/images/icon-car.png'); 
```

# iphone - 通过类中的方法创建标签

> ID：10601427
> 
> 赞同：0
> 
> 时间：2012-05-15T13:10:49.977
> 
> 标签：iphone, ios, uikit

我正在慢慢开发一个自定义按钮（同时学习如何实现类等）。

我有一个 ViewController，它导入一个 SuperButton.h (UIControl)，然后创建一个 SuperButton 的实例。（这有效，正如 NSLog 所证明的那样。）

**但我无法在 SuperButton 中获得显示标签的方法。我认为这可能与“.center”值或“addSubview”命令有关？**

我将衷心感谢您的帮助。谢谢。

这是我的 SuperButton.m 代码：

```
#import "SuperButton.h"

@implementation SuperButton
@synthesize firstTitle;
@synthesize myLabel;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}
- (void) shoutName{
    NSLog(@"My name is %@", firstTitle);

    self.backgroundColor = [UIColor blueColor];
    CGRect labelFrame = CGRectMake(0.0f, 0.0f, 100.0f, 50.0f);
    self.myLabel = [[UILabel alloc] initWithFrame:labelFrame];
    self.myLabel.text = @"Come on, don't be shy.";
    self.myLabel.font = [UIFont italicSystemFontOfSize:14.0f];
    self.myLabel.textColor = [UIColor grayColor];
    self.myLabel.center = self.center;
    [self addSubview:self.myLabel];
} 
```

这是我的 ViewController 中的代码：

```
- (void) makeButton{
    SuperButton *button1 = [[SuperButton alloc] init];
    button1.firstTitle = @"Mr. Ploppy";
    [button1 shoutName];
} 
```

（编辑：）以防万一，这里是 SuperButton.h 代码：

```
#import <UIKit/UIKit.h>
@interface SuperButton : UIControl

@property (nonatomic, strong) NSString *firstTitle;
@property (nonatomic, strong) UILabel *myLabel;

- (void) shoutName;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:11:48.203

我在别处找到了答案。我需要添加Subview '按钮'。我的工作代码现在看起来像这样：

```
- (void) makeButton{
    SuperButton *button1 = [[SuperButton alloc] init];
    button1.firstTitle = @"Mr. Ploppy";
    [button1 shoutName];
    [self.view addSubview:button1.myLabel];
    [self.view sendSubviewToBack:button1.myLabel];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:13:16.450

您不是使用`initWithFrame:`方法初始化按钮，而是使用简单的`init`. 这使得按钮的`CGRectZero`大小。更改此行：

```
SuperButton *button1 = [[SuperButton alloc] init]; 
```

对此：

```
SuperButton *button1 = [[SuperButton alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 100.0f, 50.0f)]; 
```

`setFrame:`或在初始化按钮后添加调用。

# html - 在 Firebug 或 Chrome DevTools 中检查悬停状态

> ID：10601431
> 
> 赞同：10
> 
> 时间：2012-05-15T13:11:13.393
> 
> 标签：html, firebug, google-chrome-devtools

我有一个具有 CSS 悬停状态的 HTML 元素。悬停时的边距或填充有一个错误，每次我将鼠标悬停时，元素的内容都会滑动一点，这很烦人。

我想使用 FireBug 或 Chrome 开发工具进行调试，但我在使用这些工具时遇到的一个常见问题是，在我从 Firebug/devtools 中选择元素后，我显然需要将鼠标移回开发工具并悬停状态不再启用。

如何在元素处于悬停状态时使用这些工具检查/调试 HTML 元素？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T14:16:22.923

Chrome 开发工具在 Elements > Styles 面板中有一个内置的 :hover 状态选择器。您也可以在那里切换其他伪类（如：active）。

![](../Images/e7982f4f44abce5c4cbcbf3974413fdc.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-21T06:22:45.123

**用于测试： [Chrome中的](http://www.google.com/chrome)[悬停](http://www.w3schools.com/cssref/sel_hover.asp%E2%80%8E)状态**

![在此处输入图像描述](../Images/dd56eaa29ba781b64da09325e7b3562c.png)

**用于测试： [Firefox中的](http://www.mozilla.org/en-US/firefox/%E2%80%8E)[悬停](http://www.w3schools.com/cssref/sel_hover.asp%E2%80%8E)状态（您需要添加[firebug](http://getfirebug.com/)）**

![在此处输入图像描述](../Images/76540ce2f89235bf0f91d7bc3376fe98.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T15:45:43.350

这是萤火虫的屏幕截图和那些不够清晰，无法看到 agriboz 评论的屏幕截图（比如我）

![在此处输入图像描述](../Images/dea78087d697d14035b7bad10e483daa.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-17T09:05:31.880

现在您可以看到伪类样式规则并将它们强制用于元素。

要查看样式窗格中的 :hover 等规则，请单击右上角的小虚线框按钮。

要强制元素进入 :hover 状态，请右键单击该元素。

或者，您可以使用“脚本”面板中的“事件侦听器断点”侧边栏窗格并选择在鼠标悬停处理程序中暂停。

# c# - NUnit 在运行会话期间以编程方式获取结果

> ID：10601433
> 
> 赞同：2
> 
> 时间：2012-05-15T13:11:16.107
> 
> 标签：c#, nunit

我再次尝试做某事，但不确定是否可行。我想运行我的 Nunit 测试，在每个测试运行后，我想将结果输出到我的 ui。ui 是自定义的，我的测试团队使用它来运行和查看测试结果。当我说它被使用时，它还没有（完全）开发:) - 让我想到这个问题。

到目前为止我的代码

```
TestPackage package = new TestPackage(path);
RemoteTestRunner remote = new RemoteTestRunner();
remote.Load(package);
TestResult result = remote.Run(new NullListener(), TestFilter.Empty, true, LoggingThreshold.All);

while (remote.Running)
{
    // want to capture results here
    if (result.HasResults)
        // i can never get here while test is running
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:20:32.253

如何将结果作为 XML 转储到共享位置。然后您的 UI 可以从该位置解析/提取

还尝试使用常见的 XML 模式，以便您可以轻松地从 XML 序列化/反序列化回 C# 对象，反之亦然

我们在过去做过类似的事情，上面的场景效果很好

# sql - 从 n1 到 n2 中选择记录

> ID：10601438
> 
> 赞同：0
> 
> 时间：2012-05-15T13:11:29.650
> 
> 标签：sql, sql-server, sql-server-2008, select

例如，我的表中有 10.000 条记录。每次执行查询时，我都会将页码`n`作为参数。而且我必须从`n`to中选择`n*100`满足一些复杂条件的记录。我也使用`ORDER BY`，所以我不能保留最后一个元素并使用主键`PrimaryKey`选择顶部记录。`n`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:20:57.510

在 Page 计算的基础上，在下面的查询中传递 From 和 To 参数的值。

```
WITH NumberedMyTable AS
(
    SELECT
        *,
        ROW_NUMBER() OVER (ORDER BY Id) AS RowNumber
    FROM
        MyTable
)
SELECT
    *
FROM
    NumberedMyTable
WHERE
    RowNumber BETWEEN @From AND @To 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:26:27.900

```
declare @n int
set @n=2

with my_query as(
    select ROW_NUMBER() over (order by name) as ID, * 
    from sys.tables
)
select * 
from my_query
where ID >=@n and ID<=(@n*10) 
```

# c# - 我在VS2010中运行该程序时无法编译

> ID：10601445
> 
> 赞同：0
> 
> 时间：2012-05-15T13:11:50.993
> 
> 标签：c#, visual-studio, visual-studio-2010, compiler-construction

当我在 Visual Studio 2010 中按 F5 时，我的代码不再编译。相反，它运行最新的编译代码。要编译代码，我必须右键单击程序并选择 Build 然后运行

如何让我的程序在每次运行时编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:14:51.767

它是 Visual Studio 中的设置。打开设置对话框，应该有一个“项目和解决方案”类别（抱歉，我使用的是德语版本 - 不太清楚英文标签是什么）。在另一个部分“构建和运行”。顶部的第二个组合框允许您调整运行已修改的项目时发生的情况。

另一种选择是解决方案属性。那里有一些设置，您可以在其中配置应编译解决方案中的哪个项目。要到达那里，右键单击解决方案，选择“属性”，然后选择“配置”（？）。列表中的每个项目都有一个复选框，您需要选中该复选框才能构建项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:14:48.793

使用 F6 构建整个解决方案，使用 Shift-F6 构建您当前的项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:23:04.983

工具 -> 选项 -> 项目和解决方案 -> 构建和运行

“在运行时，当项目过期时：”选择“始终构建”

就是这样，自己有过，非常烦人。

# c# - 如何从 XML 中的属性中检索值？

> ID：10601453
> 
> 赞同：0
> 
> 时间：2012-05-15T13:12:24.500
> 
> 标签：c#, .net, xml, linq, windows-phone-7

**是）我有的：**

```
<?xml version="1.0" encoding="Unicode" standalone="yes"?>
<FiberItems>
    <Fiber China="1a" England="1b"  Japan="1c"  France="1d" Korea="1e"/>
    <Fiber China="2a" England="2b"  Japan="2c"  France="2d" Korea="2e"/>
</FiberItems> 
```

**我想要什么：**
1.将“China”的所有值检索到一个字符串数组中。
2.如果中国的值为“1a”，则检索其余属性的所有值（1b，1c，1d，1e），。

**我做什么：**
1\. 我为目的 1 编写代码，但从来没有工作>_<

```
 XDocument doc = XDocument.Load("/FiberItems.xml");
        IEnumerable<string> query = from fiber in doc.Root.Elements("Fiber")
                                    select (string)fiber.Attribute("China");

        string[] myString = new string[3];
        for (int i = 0; i < 3; i++)
        {
            foreach (string item in query)
            {
                myString[i] = (string)item;
            }
        } 
```

2.目的2，还不知道>_<

需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:32:00.560

所以你的要求是如果属性中国值是“1a”然后获取该节点的所有属性值。我认为它应该工作

```
XDocument doc = XDocument.Load("/FiberItems.xml");
IEnumerable<string> query = from fiber in doc.Root.Elements("Fiber")
                            //condition 1
                            where (string)fiber.Attribute("China") == "1a"
                            //condition 2 : Select all except china attribute
                            select fiber.Attributes().Where(a => a.Name !="China"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:32:46.020

您可以使用以下代码：

```
 XDocument root = XDocument.Load("/FiberItems.xml");
        var attributesChina = root.Elements("FiberItems").Elements("Fiber").Attributes("China");
        // attributesChina will contain all the values of china
        foreach (XAttribute china in attributesChina)
        {
            string value = china.value;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:41:49.200

您可能不应该使用数组来收集数据，但是当您这样做时：

```
 string[] myString = new string[3];
  //  for (int i = 0; i < 3; i++)
  //  {
        int i = 0;
        foreach (string item in query)
        {
            myString[i] = (string)item;
            i += 1;
        }
  //  } 
```

您正在进行 3x3 回合，只需要 3 回合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:28:54.510

```
//Load XML element
XElement root = XElement.Parse(File.ReadAllText("/FiberItems.xml")); 

//All china attributes (retrieves 1a,2a)
var chinaAttributes= root.Elements().Attributes("China");

//load all rest attributes for china = 1a, loads 1b,1c,1d,1e
var chinaOneARestAttributes = root.Elements().Where(a=>a.Attribute("China")!=null && a.Attribute("China").Value=="1a").Attributes().Select(x=>x.Value).Where(x=>!String.Equals(x,"1a")); 
```

针对空引用异常进行了更新。使用我之前尝试过的数据，我确保所有元素都存在 Attribute China。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T15:48:13.987

使用 LINQ to XML：

```
var xmlStr = @"<?xml version=""1.0"" encoding=""Unicode"" standalone=""yes""?>
<FiberItems>
    <Fiber China=""1a"" England=""1b""  Japan=""1c""  France=""1d"" Korea=""1e""/>
    <Fiber China=""2a"" England=""2b""  Japan=""2c""  France=""2d"" Korea=""2e""/>
</FiberItems>";
var doc = XDocument.Parse(xmlStr);
var query =
    from fiber in doc.Descendants("Fiber")
    where (string)fiber.Attribute("China") == "1a"
    select String.Join(", ",
        (from attr in fiber.Attributes()
         where attr.Name != "China"
         select (string)attr).ToArray()); 
```

`Fiber`这将为每个包含具有 value 的`China`属性的元素返回一系列其他属性值`1a`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T15:48:52.293

查看 System.Xml.Linq。

这是一个获取一个元素的所有属性列表的示例。

```
var xml = @"<?xml version=""1.0"" encoding=""Unicode"" standalone=""yes""?>
<FiberItems>
<Fiber China=""1a"" England=""1b""  Japan=""1c""  France=""1d"" Korea=""1e""/>
<Fiber China=""2a"" England=""2b""  Japan=""2c""  France=""2d"" Korea=""2e""/>
</FiberItems>";

XDocument doc = XDocument.Parse(xml);
XElement ele = doc.Root.Element("Fiber");
var att = ele.Attributes(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T16:02:36.940

在 XPath 中：

```
/FiberItems/Fiber[@China='1a']/@* 
```

为您获取带有 China='1a' 的 Fiber 元素的所有属性，并且

```
/FiberItems/Fiber[@China='1a']/@*[local-name()!='China'] 
```

为您提供相同的属性序列，不包括中国属性。

# sql - 在 SQL 中创建分区函数

> ID：10601457
> 
> 赞同：3
> 
> 时间：2012-05-15T13:12:31.597
> 
> 标签：sql, sql-server-2008, partitioning

我已经创建了一个分区函数，但我无法将它应用到表中。我不确定我哪里出错了。

这是我的分区函数：

```
 CREATE PARTITION FUNCTION StaticDateMonthPartition (int)
     AS RANGE left
     FOR VALUES     (   
                    20120301,
                    20120401,
                    20120501,
                    20120601,
                    20120701,
                    20120801,
                    20120901,
                    20121001,
                    20121101,
                    20121201,
                    20130101,
                    20130201
                    ) 
```

试图应用于此表：

```
 IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[partition_OLAP_Fact_vvv]') AND type in (N'U'))
    DROP TABLE [dbo].[partition_OLAP_Fact_vvv]
    GO

    CREATE TABLE [dbo].[partition_OLAP_Fact_vvv]
    (
        FFFFactvvvId            bigint,
        CORStaticDateId         int,
        CORVersionvvvId         bigint,
        vvvCount                tinyint,
        UPB                     decimal(18, 2)
    ) ON  CORStaticDateMonthPartition ([CORStaticDateId]) 
```

但是当我尝试执行表脚本时，我得到了这个错误：

```
 Invalid partition scheme 'CORStaticDateMonthPartition' specified 
```

请帮忙。

* * *

用步骤重新发布我的代码

[Pinal的](http://blog.sqlauthority.com/2008/01/25/sql-server-2005-database-table-partitioning-tutorial-how-to-horizontal-partition-database-table/)教程很棒！这是一个快速的总结

1.  为每个分区添加文件组

    ```
    Alter Database [database]   Add FileGroup partition_201207 
    ```

2.  创建分区函数

    ```
    CREATE PARTITION FUNCTION Partition_Range_CORStaticMonth(int)
    AS RANGE left
    FOR VALUES (20120301) 
    ```

3.  创建分区方案

    ```
    CREATE PARTITION SCHEME Partition_Scheme_CORStaticMonth
    AS PARTITION Partition_Range_CORStaticMonth
    TO (FFF_Fact_vvv_201203) 
    ```

4.  将文件添加到文件组

    ```
    ALTER DATABASE [database] 
    ADD FILE( 
            NAME = N'FFF_Fact_vvv_201203', 
            FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\FFF_Fact_vvv_201203.ndf' , 
            SIZE = 2048KB , 
            FILEGROWTH = 1024KB 
            ) 
    TO FILEGROUP [FFF_Fact_vvv_201203] 
    ```

5.  应用分区方案的构建表

    ```
    IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[partition_Table]') AND type in (N'U'))
    DROP TABLE [dbo].[partition_Table]
    GO

    CREATE TABLE [dbo].[partition_Table]
    (
        CORStaticDateId         int
    ) ON  Partition_Scheme_CORStaticMonth ([CORStaticDateId]) 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:17:26.250

您需要一个分区方案才能应用于表。

顺序是：

1) 创建你的文件组

2）创建你的分区功能

3）将分区方案附加到文件组（使用分区功能）

4）在分区方案上创建表

检查此[链接](http://blog.sqlauthority.com/2008/01/25/sql-server-2005-database-table-partitioning-tutorial-how-to-horizontal-partition-database-table/)以获取教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:16:24.917

这只是一个命名问题，不应该：

```
) ON  CORStaticDateMonthPartition ([CORStaticDateId]) 
```

是

```
) ON  StaticDateMonthPartition ([CORStaticDateId]) 
```

# erlang - 试图在Erlang的有向图中获得最短路径（bfs）

> ID：10601467
> 
> 赞同：2
> 
> 时间：2012-05-15T13:13:04.817
> 
> 标签：erlang

我正在寻找一个代码来找到有向图中的最短路径 a 。

有什么地方可以找到吗？

（可以基于BFS）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:45:41.190

使用[Erlang Digraph Library](http://www.erlang.org/doc/man/digraph.html)和函数 get_short_path/3，它采用有向图和开始/结束顶点对。

# java - java中的sql检索值为null

> ID：10601468
> 
> 赞同：-3
> 
> 时间：2012-05-15T13:13:07.027
> 
> 标签：java, mysql

我在 sql 中插入了一列，其中包含来自 java 的空值。在检索时它不适用于 null。我还检查了 string.length()。但是当我在 System.out 中打印值时。该值显示为空（只是空）。当我用条件检查它时，它没有进入循环。

```
String id ="1234"; 
            String name="pratap";
            String gender=null;
            String email=null;
String service="GOOGLE";
        log.info(id+name+gender+email) //output is 1234pratapnullnull   

String insert = "INSERT INTO oauthuser VALUES('"+id+"','"+name+"','"+gender+"','"+email+"','"+service"')"; 
```

在检索中

```
query ="Select * FROM oauthuser where id="+"'"+id+"'";
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection (dbUrl);
Statement stmt = con.createStatement();
ResultSet rs = stmt.executeQuery(query);
  while(rs.next())
  {
 id=rs.getString(1);
 name=rs.getString(2);
 gender=rs.getString(3);
 email=rs.getString(4);
service_provider_name=rs.getString(5);
System.out.println(gender+email+name);//output is nullnullpratap

  } 

if(gender!="male" && gender!="female")
 System.out.println("it is printing");
  if(gender==null)
      System.out.println("it is not printing");
con.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:14:41.600

从您对问题的有点神秘的描述中，我怀疑您可能插入了字符串`"null"`而不是 SQL`NULL`值。两者并不相同（实际上非​​常不同）。

**编辑**审查了代码后，这正是发生的事情。举个例子`gender`：

```
String gender = null;
...'"+gender+"',... 
```

以上将其转换为`'null'`（即 SQL 字符串`"null"`），并将其插入到数据库中。

我的基本建议是阅读[`PreparedStatement`](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)并使用它，而不是像现在这样一点一点地构建 SQL 查询。

最后，以下内容被打破：

```
if(gender!="male" && gender!="female") 
```

这应该是

```
if(!gender.equals("male") && !gender.equals("female")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:16:06.603

也许您的值不是空值而是“空”字符串？在调试中启动您的应用程序，放置断点并检查它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:17:12.880

您可以尝试 "null" 而不是 NULL ，但最好向我们展示代码

# 更新后

像这样从您的查询中删除 + 号

```
String id ="1234"; 
            String name="pratap";
            String gender="null";
            String email="null";
String service="GOOGLE";
        log.info(id+name+gender+email) //output is 1234pratapnullnull   

String insert = "INSERT INTO oauthuser VALUES('"id"','"name"','"gender"','"email"','"service"')" 
```

当你选择时，像这样修改

```
if(gender.equals("null"))
      System.out.println("it is not printing"); 
```

# c# - ListBox.SelectedItem 为空通知

> ID：10601472
> 
> 赞同：0
> 
> 时间：2012-05-15T13:13:21.240
> 
> 标签：c#, winforms, listbox, selecteditem

我需要在ListBox中跟踪当前所选项目，以关闭选定项目为null时表单上的其他控件。I try to use SelectedIndexChanged event, but it not raise when selected item is null.

你能不能给点建议？

更新：所选项目变为空，因为我用空集合设置了新的 DataSource 值。可能是我的问题的原因吗？

我需要解释一下。ListBox 表示数据库中项目的集合。当用户添加/编辑/删除某些项目时，我通过调用此方法刷新列表框：

```
private void RefreshList()
{
     lbParts.DataSource = this.database.Fetch<part>(string.Empty);
} 
```

它从数据库中获取所有项目，将其转换为`List<part>`集合并设置为 ListBox DataSource。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:17:56.087

这是不正确的。当 SelectedItem 变为 null 时引发 SelectedIndexChanged。在这种情况下，SelectedIndex 将为 -1。

编辑：您确实是正确的，当您更改 DataSource 时，您不会得到 SelectedIndexChanged。我建议您在更改 DataSource*之前立即明确设置 SelectedIndex=-1*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T22:23:02.773

也许也处理 DataSourceChanged 事件？如果列表框中可用的选项发生变化，那么我认为这是对表单可用控件执行刷新的原因？

# prestashop - billSafe 支付模块未显示在 prestashop 中

> ID：10601475
> 
> 赞同：0
> 
> 时间：2012-05-15T13:13:29.120
> 
> 标签：prestashop

我已安装 PrestaShop™ 1.4.7.3

[我从http://www.billsafe.de/](http://www.billsafe.de/)下载模块 BillSafe

我从 prestashop 后端配置了所有设置，但 billSafe 模块未显示在前端

模块不显示在前面是什么问题？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T07:12:09.690

Prestashop 中的每个模块都与位置挂钩，

对于像 BillSafe-支付模块这样的特定模块，它有支付的最小值和最大值，如果最终用户选择了这些值之间的产品，BillSafe 会显示在支付页面上

# android - 如何在 android 中设计 D-PAD 键盘？

> ID：10601479
> 
> 赞同：0
> 
> 时间：2012-05-15T13:13:45.877
> 
> 标签：android, d-pad

我想在 android 中设计 D-PAD 键盘。我在 android 中看到用户配置。我不知道如何使用它。给出一些代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:15:47.687

不要再从头开始发明轮子，只要使用andengine：

[http://www.andengine.org/blog/2010/07/andengine-on-screen-controls/](http://www.andengine.org/blog/2010/07/andengine-on-screen-controls/)

并在`onLoadScene()`

```
@Override
        public Scene onLoadScene() {
                this.mEngine.registerUpdateHandler(new FPSLogger());

                final Scene scene = new Scene();
                scene.setBackground(new ColorBackground(0.09804f, 0.6274f, 0.8784f));

                final int centerX = (CAMERA_WIDTH - this.mFaceTextureRegion.getWidth()) / 2;
                final int centerY = (CAMERA_HEIGHT - this.mFaceTextureRegion.getHeight()) / 2;
                final Sprite face = new Sprite(centerX, centerY, this.mFaceTextureRegion);
                final PhysicsHandler physicsHandler = new PhysicsHandler(face);
                face.registerUpdateHandler(physicsHandler);

                scene.attachChild(face);

                this.mDigitalOnScreenControl = new DigitalOnScreenControl(0, CAMERA_HEIGHT - this.mOnScreenControlBaseTextureRegion.getHeight(), this.mCamera, this.mOnScreenControlBaseTextureRegion, this.mOnScreenControlKnobTextureRegion, 0.1f, new IOnScreenControlListener() {
                        @Override
                        public void onControlChange(final BaseOnScreenControl pBaseOnScreenControl, final float pValueX, final float pValueY) {
                                physicsHandler.setVelocity(pValueX * 100, pValueY * 100);
                        }
                });
                this.mDigitalOnScreenControl.getControlBase().setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
                this.mDigitalOnScreenControl.getControlBase().setAlpha(0.5f);
                this.mDigitalOnScreenControl.getControlBase().setScaleCenter(0, 128);
                this.mDigitalOnScreenControl.getControlBase().setScale(1.25f);
                this.mDigitalOnScreenControl.getControlKnob().setScale(1.25f);
                this.mDigitalOnScreenControl.refreshControlKnobPosition();

                scene.setChildScene(this.mDigitalOnScreenControl);

                return scene;
        } 
```

# asp.net-mvc-3 - MVC3 -- 使用 Jquery 向 List<> 添加附加项目

> ID：10601481
> 
> 赞同：2
> 
> 时间：2012-05-15T13:13:52.207
> 
> 标签：asp.net-mvc-3

我有一个看起来像这样的视图模型：

```
HomeViewModel hvm = new HomeViewModel();
hvm.Applicant = new Person();
hvm.Applicant.Residences = new List<Residence>();
hvm.Applicant.Residences.Add(new Residence() { Type = "Current" }); 
```

在我的 .cshtml 页面中，我有：

```
<label>Street # *:</label> @Html.TextBoxFor(m => m.Applicant.Residences[0].StreetNumber) 
```

我的住宅模型中的属性等等。但是，我希望用户能够添加多个住宅（以前的、次要的、其他的等）。我可以通过 jquery 添加必要的表单字段，但是，由于模型不知道新的列表项，我收到关于空对象的错误。前端可能正在通过 jquery 添加许多住宅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:20:35.197

这是一个令人惊讶的复杂话题。查看以[http://ivanz.com/2011/06/16/editing-variable-length-reorderable-collections-in-asp-net-mvc-part-1/开头的博客系列](http://ivanz.com/2011/06/16/editing-variable-length-reorderable-collections-in-asp-net-mvc-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:26:30.473

试试这个： http: [//archive.plugins.jquery.com/project/jquery-dynamic-form](http://archive.plugins.jquery.com/project/jquery-dynamic-form)
在此处查看演示：http: [//sroucheray.org/blog/jquery-dynamic-form/](http://sroucheray.org/blog/jquery-dynamic-form/)

# javascript - 在文本区域上调用 .focus() 后如何获得闪烁的光标？

> ID：10601482
> 
> 赞同：3
> 
> 时间：2012-05-15T13:13:53.237
> 
> 标签：javascript, jquery-selectors, jquery

这似乎在使用 a 时不会自动发生`text area`，但在使用`text fields`.

例如，在一个成功的 ajax 请求之后，我做一些事情，并且在我的代码的最后一行，我申请`focus`了`text area`.

```
$('textarea').focus(); 
```

这会导致光标显示，但它不会按预期闪烁，直到我自己单击文本区域。

这是默认行为吗？有没有办法获得我想要的行为，即让光标闪烁？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:19:42.600

可能样式设置为不显示光标。在这里查看示例并尝试将其添加到您的 CSS 中作为输入标签

[CSS 中的光标示例](http://www.echoecho.com/csscursors.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:42:14.037

我正在输入的 StackOverflow 文本区域具有 (a)`cursor: auto`设置和 (b) 焦点上的闪烁光标。

# ios - 为什么 Xcode 4.3.2 存档时显示白色图标？

> ID：10601484
> 
> 赞同：3
> 
> 时间：2012-05-15T13:13:55.937
> 
> 标签：ios, upload, app-store, xcode4.3

当我将我的应用程序存档以上传到应用程序商店时，应用程序图标为白色。但在 Xcode 4.2 中一切正常。在 Xcode 4.3.2 中，应用程序图标在归档后变为白色。Xcode 允许在没有任何警告和错误的情况下上传到应用商店。上传完毕，等待审核。我想知道，如果苹果会为此拒绝我的应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T14:45:32.540

[我在这里](https://stackoverflow.com/questions/9800761/xcode-4-3-missing-icons-for-ios-apps-in-organizers-archives)修复了 RMeijs 的答案

方法是打开终端并输入以下代码。

```
xcode-select -print-path

/Developer

sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

重新启动 XCodes 后，管理器中的所有图标都很好。

来自 RMeijs 的回答。

我写了这个答案很容易找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T12:05:52.633

在“图标文件”键的 info.plist 中包含值“Icon.png”。不要忘记在容器中也包含图像。

# database - DB2 空间回收的优势是什么？

> ID：10601487
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:14:01.260
> 
> 标签：database, db2

IBM DB2 从版本 9.7 开始允许空间回收。[Space Reclamation](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.wn.doc/doc/c0055000.html)
我不明白它对我有什么帮助。这个原则带来了哪些好处？这种工艺有哪些优点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:21:21.093

当您插入数据库时​​，文件会物理扩展以容纳新数据。在您对其进行删除后，引擎仅标记那些已删除的行，而不是物理地缩小文件，因为对大型数据集的操作将耗费时间/资源。

为了解决这个问题，各种供应商提供了物理压缩数据的方法，在给定的时间从物理文件中删除不必要的数据，通常在备份期间执行......

# android - 如何同时处理 Checkbox 和 AlertDialog

> ID：10601488
> 
> 赞同：0
> 
> 时间：2012-05-15T13:14:07.653
> 
> 标签：android, android-alertdialog

嗨，当检查更改时，我的复选框出现问题，如果复选框被选中，我将显示一个警报对话框，该对话框接受输入值并将值设置为文本视图，并且我将该值添加到列表中，这是我的代码

```
 @Override
    public void onCheckedChanged(CompoundButton checkBox, boolean isChecked)
    {
        TextView tvItem=(TextView)selectedView.findViewById(R.id.foodName); 
        final TextView tvQuantity=(TextView)selectedView.findViewById(R.id.quantity);

        orderList=new ArrayList<Order>();
        Order order=new Order();
        if(isChecked)
        {   

            final AlertDialog.Builder quantityAlert= new AlertDialog.Builder(TakeOrder.this);
            quantityAlert.setTitle("Quantity");
            quantityAlert.setMessage("Please enter quantity");

            final EditText input = new EditText(TakeOrder.this);
            input.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
            quantityAlert.setView(input);

            quantityAlert.setPositiveButton("Ok", new DialogInterface.OnClickListener()
            {   
                public void onClick(DialogInterface dialog, int whichButton)
                {
                  value = input.getText();

                  tvQuantity.setText(value);

                }               
            });

            quantityAlert.setNegativeButton("Cancel", new DialogInterface.OnClickListener()
            {
                  public void onClick(DialogInterface dialog, int whichButton)
                  {

                  }
                });

            quantityAlert.show();

            order.setItem(tvItem.getText().toString());
            order.setQuantity(Integer.valueOf(tvQuantity.getText().toString()));

            orderList.add(selectedPosition, order);
            Log.v("Item:",orderList.get(selectedPosition).getItem());
            Log.v("Quantity:",String.valueOf(orderList.get(selectedPosition).getQuantity()));
        }
        else
        {
            tvQuantity.setText("0");
            orderList.remove(selectedPosition);

        }

    } 
```

问题是我首先显示警报对话框然后从用户那里获取数量值但是在我在警报框中输入值之前 Log.v 执行并显示 0 这意味着在我的列表中数量被添加到 0...但是我希望将来自警报对话框的数量值添加到列表中......任何人都可以帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:27:36.673

这是有道理的，因为代码不会停止并等待您的警报对话框完成。它构建它，显示它，然后继续前进，这是您创建价值并将其添加到列表中的地方。

如果您希望它仅在您按“确定”时添加，则需要将订单修改和插入代码放入“确定”（肯定按钮）处理程序中。

```
public void onClick(DialogInterface dialog, int whichButton)
{               
    Order order=new Order();         
    value = input.getText();                      
    tvQuantity.setText(value);                       

    order.setItem(tvItem.getText().toString());             
    order.setQuantity(Integer.valueOf(value);

    orderList.add(selectedPosition, order);    

    Log.v("Item:",orderList.get(selectedPosition).getItem());             
    Log.v("Quantity:",String.valueOf(orderList.get(selectedPosition).getQuantity()));         
} 
```

我还将 Order 初始化语句放在 onClick 方法中，因为它没有在其他任何地方使用。如果他们选择“取消”，请为自己节省一行代码 :)

# c# - 列表框的 FileSystemWatcher

> ID：10601491
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:14:11.790
> 
> 标签：c#, winforms

我有`listBox1`并且`listBox2`其中加载了目录中的一些文件。最初，当我加载表单时，我禁用了`listBox1`和的按钮`listBox2`。

当目录中没有文件时，我想禁用 button1 `listBox1`和 button2 `listBox2`。

但是我想启用`buttons`相应的`listBox1`，`listBox2`如果目录中有单个文件并且文件是否有任何更改。

我如何使用 `FileSystemWatcher`??? 我需要一些想法来执行此操作。

```
private void PopulateListBox(ListBox lsb, string Folder, string FileType)
{
  DirectoryInfo dinfo = new DirectoryInfo(Folder);
  FileInfo[] Files = dinfo.GetFiles(FileType);
  foreach (FileInfo file in Files)
  {
    lsb.Items.Add(file);
  }
}

private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
  FileInfo file = (FileInfo)listBox1.SelectedItem;
  string path = file.FullName;
  DisplayFile(path);
}

private void button1_Click(object sender, EventArgs e)
{

}

private void fileSystemWatcher1_Changed(object sender, FileSystemEventArgs e)
{

} 
```

我已经在这里初始化了一个方法，从这里我该如何进行？？？

```
public void filesystemwatcher()
{
  FileSystemWatcher watcher = new FileSystemWatcher();
  watcher.Path = @"C:\LoadFiles\";                      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:54:40.227

您可以将 BindingList 与 FileSystemWatcher 一起使用：

```
BindingList<string> _Files = new BindingList<string>();

public Form1() {
  InitializeComponent();

  _Files.ListChanged += new ListChangedEventHandler(Files_ListChanged);
  fileSystemWatcher1.Deleted += fileSystemWatcher1_Deleted;
  fileSystemWatcher1.Created += fileSystemWatcher1_Created;
  fileSystemWatcher1.Renamed += fileSystemWatcher1_Renamed;
  fileSystemWatcher1.Path = @"C:\TestLoadFiles\";

  foreach (string f in Directory.GetFiles(fileSystemWatcher1.Path)) {
    _Files.Add(Path.GetFileName(f));
  }
  listBox1.DataSource = _Files;
}

private void Files_ListChanged(object sender, ListChangedEventArgs e) {
  button1.Enabled = (_Files.Count > 0);
}

private void fileSystemWatcher1_Renamed(object sender, RenamedEventArgs e) {
  _Files[_Files.IndexOf(e.OldName)] = e.Name;
}

private void fileSystemWatcher1_Deleted(object sender, FileSystemEventArgs e) {
  _Files.Remove(e.Name);
}

private void fileSystemWatcher1_Created(object sender, FileSystemEventArgs e) {
  _Files.Add(e.Name);
} 
```

# c# - 使用 XPath 选择“src”值到 HtmlAgilityPack

> ID：10601493
> 
> 赞同：0
> 
> 时间：2012-05-15T13:14:13.287
> 
> 标签：c#, xpath, html-agility-pack

我正在开发一个爬行引擎。我的程序使用 HtmlAgilityPack 通过 Xpath 抓取网站。我需要直接获取一些图像 src 标签。您可以在下面看到我的简单代码无法正常工作，感谢您的建议！

*PS：请忽略"字符问题，XPath模式由数据库提供。*

```
Agility.DocumentNode.SelectSingleNode("//img[@id="product_photo"]/@src"); 
```

这是我需要抓取的行（该`*...*`部分显示要提取的块

```
<img id="product_photo" src="*/images/thumb/4400/10280/st.jpg*"> 
```

某些页面在元标记中提供图像，因此`.Attributes["src"]`无法正常工作。

更新：您可以在此处查看我的查询和结果![询问](../Images/67b04129e34217c939ad8e11d765de4d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:14:40.563

您无法获得“src”的值或使用中的任何其他属性：

```
Agility.DocumentNode.SelectSingleNode(yourXpath); 
```

**只需**使用：

```
string s=Agility.DocumentNode.SelectSingleNode(yourXpath).value; 
```

这是因为 XPath 无法通过 HtmlAgilityPack 类中的 SelectSingleNode() 函数返回属性值。因此，您必须`SelectSingleNode(yourXpath).value`在分词后使用或使用正则表达式才能获得没有外文本的“src”。

# php - 使用and过滤mysql内部连接一对多结果

> ID：10601499
> 
> 赞同：0
> 
> 时间：2012-05-15T13:14:27.633
> 
> 标签：php, mysql, inner-join

例如，我有两张桌子

用户

```
----------------------------------
id  | name | blah
----------------------------------
1   | Samy | stackoverflow
2   | jhon | some thing
---------------------------------- 
```

技能

```
---------------------------------------
id | user_id | skill_title | level
---------------------------------------
1  | 1       | php         | good
2  | 1       | css         | excellent
3  | 1       | photoshop   | fair
4  | 2       | php         | good
--------------------------------------- 
```

我像这样运行查询

```
SELECT * FROM users 
INNER JOIN skills ON users.id = skills.user_id
WHERE ($skill_title[0] LIKE 'skills_title' AND 
       $skill_title[1] LIKE 'skills_title') 
```

其中 $skill_title 是一个数组我需要的是选择具有所有这些技能的用户，即 PHP，CSS，如果我像上面那样查询它永远不会带来数据，因为它将每条记录与所有数组元素进行比较，如果我用或替换它会起作用，但不会给用户带来所有技能

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:26:25.943

@joeshmo 的答案可能是您最好的解决方案，但也值得一试。如果您有大量用户，它可能会更快，但很少有人拥有您正在寻找的技能：

```
SELECT * FROM users
WHERE
    id IN (SELECT user_id FROM skills WHERE skill_title = '$skills[0]')
    AND id IN (SELECT user_id FROM skills WHERE skill_title = '$skills[1]')
    ... 
```

您的 PHP 脚本可能如下所示：

```
$skills = array("php", "css", ... ); // replace ... with the skills you are looking for
$whereClause = array();
for ($i=0, $count=count($skills); $i < $count; $i++)
    $whereClause[] = "id IN (SELECT user_id FROM skills WHERE skill_title = '{$skills[$i]}')";

$query = "SELECT * FROM users". (count($whereClause) > 0 ? " WHERE ". implode(" AND ", $whereClause) : ""); 
```

* * *

`INNER JOIN`正如@joeshmo 建议的那样， 另一种可能的解决方案是使用多个s。通过执行以下操作，您可能可以使其更小更清洁：

```
SELECT *
FROM
    users u
    INNER JOIN skills s1 ON u.id = s1.user_id AND s1.skill_title = '$skills[0]'
    INNER JOIN skills s2 ON u.id = s2.user_id AND s2.skill_title = '$skills[1]'
    ... 
```

所以你的 PHP 脚本可能看起来像这样：

```
$skills = array("php", "css", ... );
$joins = array();
for ($i=0, $count=count($skills); $i < $count; $i++)
    $joins[] = "INNER JOIN skills s{$i} ON u.id = s{$i}.user_id AND s{$i}.skill_title = '{$skills[$i]}'";

$query = "SELECT * FROM users u ". implode(" ", $joins); 
```

* * *

我会尝试这两种解决方案，看看哪一种对您的数据集表现更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:18:20.993

我想你想为你正在寻找的每一项技能再次加入它。

```
SELECT * FROM users 
INNER JOIN skills as first_skill ON users.id = first_skill.user_id
INNER JOIN skills as second_skill ON users.id = second_skill.user_id
WHERE ($skill_title[0] LIKE first_skill.skill_title AND 
       $skill_title[1] LIKE second_skill.skill_title) 
```

您的查询的问题在于它只加入了技能表一次。您的查询是这样工作的：

```
-----------------------------------------------------
id  | name | blah           | skill_title | level
-----------------------------------------------------
1   | Samy | stackoverflow  | php         | good
1   | Samy | stackoverflow  | css         | excellent
1   | Samy | stackoverflow  | photoshop   | fair
2   | jhon | some thing     | php         | good
----------------------------------------------------- 
```

没有行同时具有 css 和 php。我的查询是这样工作的：

```
----------------------------------------------------------------------------------------------------------------
id  | name | blah           | first_skill.skill_title | first_skill.level | second_skill.skill_title | second_skill.level |
----------------------------------------------------------------------------------------------------------------
1   | Samy | stackoverflow  | php                     | good              | php                      | good               |
1   | Samy | stackoverflow  | php                     | good              | css                      | excellent          |
1   | Samy | stackoverflow  | php                     | good              | photoshop                | fair               |
... (there would be nine for Samy)
2   | jhon | some thing     | php                     | good              | php                      
---------------------------------------------------------------------------------------------------------------- 
```

第二行同时具有`php`和`css`。那就是匹配的那个。

对于多达十个技能，这将是乏味的。您可以改为执行多个查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:26:02.103

```
$skills = Array("php","css", ..... );
$query = "  select u.id, u.name from users u left join skills s on u.id=s.user_id "
        ."  where s.skill_title in (\"".implode($skills,"\",\"")."\") "
        ."  group by s.user_id having count(s.id) = ".count($skills); 
```

# c# - 在 System 命名空间内为 .net System 库创建扩展的陷阱

> ID：10601500
> 
> 赞同：2
> 
> 时间：2012-05-15T13:14:30.397
> 
> 标签：c#, .net, namespaces

在我工作过的所有公司中，我最终都支持一组核心库，这些库无非是增强和扩展 .net 库。通常我有这样的命名空间，它们以我们的公司名称开头，但子命名空间反映了命名空间的那些`System`。

```
Foo.IO;
Foo.Web

```

我打算做的是更进一步，用系统命名空间替换公司命名空间，这样你只需要一个 using 语句，从而更好地增强核心库。

```
namespace System.IO
{
    public static class StreamExtensions
    {
        ...
    }
} 
```

**实际问题**

现在我知道这是可能的，微软在他们自己的库中做到了，我已经看到它在其他第三方库中做到了，但我想知道的是，如果有的话，这样做的长期影响是什么，比如一个类.net 更高版本中的名称冲突？有没有人这样做并且不得不处理一个复杂的问题，它破坏了仅仅能够添加程序集引用的简单性？

**更新**

不幸的是，这变成了更多关于你是否应该这样做的辩论，这可能属于程序员。不雅地还有另一个[SO question](https://stackoverflow.com/questions/1320451/use-system-namespaces-for-class-libraries-good-or-bad)确实问了这个问题，但这不是问题的重点。

我想知道是否存在会导致编译错误或奇怪行为的场景。唯一出现的两个论点是。

1.  Microsoft 将方法添加到与库中扩展方法的签名相匹配的对象，但这是一个静音点，因为它不会影响扩展方法所在的命名空间，因为对象上的实现将优先。

2.  其他人在他们的第三方库中做同样的事情，我们有一个名字冲突。这更有可能是我们已经必须处理的事情，第三方库 ILMerge 其他库到他们的程序集中。

需要明确的是，这是一个独立的库，它是供内部使用的，不能在外部使用，并且可以通过扩展方法扩展现有的系统库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:22:33.757

我建议不要这样做。`System`命名空间是 .NET Framework 命名空间，如果要从该命名空间自定义类，请在代码中明确说明。

这意味着使自定义类成为您自定义命名空间的一部分。

不要把事情搞砸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T01:47:41.563

这可能有点离题，但参考您提到的替代方法：

> 通常我有命名空间，它们以我们的公司名称开头，但子命名空间反映了系统命名空间的命名空间。

我对这种方法有一些问题。

我的公司名称是 Resolv - 因此，我写的很多东西最终都会以 Resolv.<ProjectName> 的形式进入命名空间（其余的将是 <ClientName>.<ProjectName>）。

我开始在名为 Resolv.System 的命名空间中构建我的扩展方法、静态类等库

但是，当使用以 System 开头的“完全限定”类型名称（例如`var myVar = new System.Collections.List<int>()`；）时，这会产生命名空间解析问题。

虽然在这种特殊情况下我永远不会使用完全限定的名称，但如果我引用的类型是整个代码文件中该名称空间中唯一的类型（在这种情况下添加 a`using`是没有保证的） ，我有时会这样做- 或者在导入的两个命名空间（使用 using 语句）包含冲突的类型名称的情况下。当没有适当的`using`语句时，自动代码生成工具（如 resharper）通常会添加这些类型的引用。

如果我在Resolv 中的*任何位置*（例如 Resolv.MyInternalProject）中的某个名称空间中处理代码——并且我输入了*应该*是完全限定的名称——由于 Resolv.System 名称空间而导致混淆。编译器返回当前命名空间，到达 Resolv，然后找到 Resolv.System。这意味着——例如——`new System.Collections.List<int>()`将尝试使用不存在的类`Resolv.System.Collections.List<int>()`。

当然，我可以通过使用表单来解决这个问题，`var myVar = new global::System.Collections.List<int>()`但这很丑而且有点痛苦）。

我选择在我的扩展命名空间树中包含一个“项目名称”，所以现在`Resolv.System`我没有`Resolv.Extensions.System`. 从那里子命名空间镜像系统命名空间（例如`Resolv.Extensions.System.IO`）。这样，我可以更好地控制是否要让 System.xxx.xxxx 引用引用我的扩展名，或者任何给定代码文件中的 .net 引用（并且当我需要时，它只是一个 using 语句添加到我的代码文件中“打开扩展”）。

当然，在处理 Resolv.Extensions 命名空间内的代码时，我仍然会遇到 System.xxx.xxx 命名空间混乱——但这不会让我每天都感到烦恼！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:43:31.967

> 我打算做的是更进一步，用系统命名空间替换公司命名空间，这样你只需要一个 using 语句，从而更好地增强核心库。

我不明白这将如何增强核心库。当 Microsoft 将相同的方法添加到`String`类中并执行完全不同的操作时会发生什么？这就是他们应该在自己的命名空间中的原因。

> 现在我知道这是可能的，微软在他们自己的库中做到了，我已经看到它在其他第三方库中做到了，但我想知道的是，如果有的话，这样做的长期影响是什么，比如一个类.net 更高版本中的名称冲突？

长期影响是，如果 Microsoft 将与您创建的扩展方法相同的方法添加到类中。

> 有没有人这样做并且不得不处理一个复杂的问题，它破坏了仅仅能够添加程序集引用的简单性？

我不明白您要减少参考数量的原因。这样做你什么也得不到，在自己的命名空间和类中拥有实用程序方法是一个有效的设计决策，人们认为它们将是独立的，而不是 Microsoft 命名空间的一部分。

> 这是一个有效的陈述，但问题是什么意思。其他人，包括我自己，因为对弄乱别人的命名空间有一种“直觉”的感觉而回避这样做，但没有人因此而说不要这样做。如果你有一个具体的事实原因，我很想听听。

这意味着开发人员假设 System 命名空间仅填充了 Microsoft 代码。

# python - Google App Engine 上的动态属性与固定属性查询速度

> ID：10601502
> 
> 赞同：1
> 
> 时间：2012-05-15T13:14:37.687
> 
> 标签：python, google-app-engine, nosql, google-cloud-datastore

我正在设计数据存储模型，并在考虑查询过滤器的工作方式时尝试确定最佳方法。

最好只写两个例子。第一个例子是如果我有一个固定的“性别”属性，只有一个可以设置为“男性”或“女性”的字符串。

```
class Person(db.Model):
    name = db.StringProperty()
    gender = db.StringProperty()

p1 = Person(name="Steve", gender="male")
p2 = Person(name="Jane", gender="female")
p1.put()
p2.put()

males = db.GqlQuery("SELECT * FROM Person WHERE gender = :1", "male") 
```

第二个例子是如果 Person 实体是一个 expando 模型，我动态设置了一个“is_male”或“is_female”动态属性。

```
class Person(db.Expando):
    name = db.StringProperty()

p1 = Person(name="Steve")
p1.is_male = True
p1.put()
p2 = Person(name="Jane")
p2.is_female = True
p2.put()

males = db.GqlQuery("SELECT * FROM Person WHERE is_male = :1", True) 
```

现在假设我们收集了数百万条记录并且我们想要进行查询，在运行 Python 2.7 的生产 Google App Engine 中，上述两种方法中的哪一种会更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T04:57:03.887

绝对没有区别 - 无论属性是否“动态”，模型在数据存储中看起来都是一样的。唯一的区别是没有设置值的标准属性类将`None`在数据存储中插入一个具有值的字段，这会占用一些额外的空间，但允许您查询未设置该值的用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:47:43.470

即使它不完全是你所要求的，我认为它可能会给你一个想法。
[保留空 ListProperties 或使用动态（扩展）属性之间是否存在一些性能问题？](https://stackoverflow.com/questions/2577301/is-there-some-performance-issue-between-leaving-empty-listproperties-or-using-dy)

# vb.net - 使用实例 VB.net 访问表单属性

> ID：10601503
> 
> 赞同：1
> 
> 时间：2012-05-15T13:14:38.103
> 
> 标签：vb.net, visual-studio

在 Windows 窗体 (Vb.net) 中，如何在没有实例的情况下访问属性（新）？

Form1.Property = "" ??? 属性减速不是静态的吗？这种减速方式叫什么？

虽然您无法访问 Class1.Property！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:16:30.910

VB.Net 做了一些魔术，让您可以假装表单没有实例。

它创建一个隐藏的共享实例，并将对实例方法（例如`Form1.Show()`）的静态调用转换为对该共享实例的实例调用。

这样做是为了与 VB6 兼容，应该避免。

# c# - 使用 WebMatrix 难以显示行数

> ID：10601504
> 
> 赞同：0
> 
> 时间：2012-05-15T13:14:40.760
> 
> 标签：c#, .net, sql-server, razor, webmatrix

我有以下代码：

```
@helper RetrievePhotoWithName(int userid)
{
    var database = Database.Open("SC");
    var name = database.QuerySingle("select FirstName, LastName, ProfilePicture from UserProfile where UserId = @0", userid);
    var notifications =  database.Query("SELECT COUNT(*) FROM NotificationsTable WHERE UserID = @0 AND MessageWasRead = @1", userid, false);

    var DisplayName = "";
    if(notifications < 1)
    {
        DisplayName = name["FirstName"] + " " + name["LastName"];
    }
    else
    {
        DisplayName = name["FirstName"] + ", you have " + notifications + " new messages.";
    }
    <a href="@Href("~/Home")" title="My Account"><img src="@Href("~/Shared/Assets/Images/" + name["ProfilePicture"] + ".png")" id="MiniProfilePicture" />&nbsp;@DisplayName</a>

    database.Close();
} 
```

这应该计算我表中的所有行，并在网页上向用户显示“新通知”消息，或者只显示他们的名字，但它不起作用。

不要编辑这个问题。我重新发布此问题的原因是因为我之前的问题已更改，导致回复不准确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:21:31.610

由于`SELECT COUNT(*)`返回单个标量值，我认为您想`database.QueryValue()`改用：

```
int notifications =  (int)database.QueryValue("SELECT COUNT(*) FROM NotificationsTable WHERE UserID = @0 AND MessageWasRead = @1", userid, false); 
```

[http://msdn.microsoft.com/en-us/library/webmatrix.data.database.queryvalue(v=vs.99).aspx](http://msdn.microsoft.com/en-us/library/webmatrix.data.database.queryvalue(v=vs.99).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:23:33.133

试试这样：

```
@helper RetrievePhotoWithName(int userid)
{
    var database = Database.Open("SC");
    var name = database.QuerySingle("select FirstName, LastName, ProfilePicture from UserProfile where UserId = @0", userid);
    var notifications =  database.Query("SELECT convert(int,COUNT(*)) as 'counter' FROM NotificationsTable WHERE UserID = @0 AND MessageWasRead = @1", userid, false);

    var DisplayName = "";
    if(notifications["counter"] < 1)
    {
        DisplayName = name["FirstName"] + " " + name["LastName"];
    }
    else
    {
        DisplayName = name["FirstName"] + ", you have " + notifications["counter"] + " new messages.";
    }
    <a href="@Href("~/Home")" title="My Account"><img src="@Href("~/Shared/Assets/Images/" + name["ProfilePicture"] + ".png")" id="MiniProfilePicture" />&nbsp;@DisplayName</a>

    database.Close();
} 
```

# java - 服务器端的 BouncyCastle 以 Android 手机作为客户端

> ID：10601507
> 
> 赞同：1
> 
> 时间：2012-05-15T13:14:46.573
> 
> 标签：java, android, security, bouncycastle, java-server

我目前在让 BouncyCastle 工作方面遇到一些困难。这几天一直在搜索这个，所以我希望你能提供任何有用的见解。

这是设置。使用 REST 协议，Android 客户端将 POST 消息发送到服务器。我用代表这些消息的类创建了一个单独的项目，这样我就可以将它作为一个库包含在客户端和服务器上。消息对象首先被解析为 JSON 字符串，然后在服务器上进行解释。

为了数据完整性，消息包含数字签名 (DSA)。我之前就这个问题问过一个关于[公钥](https://stackoverflow.com/questions/10526465/not-implemented-yet-dsa-public-key)交换的问题。我得到的答案很有帮助，因为这似乎工作正常。

但是，验证不断失败。Nikolay Elenkov 在另一个线程中的回答提到了一个可能的原因：“顺便说一句，如果您与单个提供商打交道可能会更容易，因此您可能也希望在服务器上使用 Bouncy Castle。” 这就是我遇到麻烦的地方（因为这是一个不同的问题，我为此提出了一个新主题）

这是消息类（来自公共库）的代码摘录：

```
import org.bouncycastle.jce.provider.BouncyCastleProvider;

// ....

private byte[] signature;

// ....

public void sign(DSAPrivateKey key) throws Exception {
    Security.addProvider(new BouncyCastleProvider());
    Signature signer = Signature.getInstance("SHA1withDSA");
    signer.initSign(key);
    signer.update(this.toByteArray());
    this.signature = signer.sign();
}

public boolean verifySignature(DSAPublicKey key) throws Exception {
    Security.addProvider(new BouncyCastleProvider());
    Signature signer = Signature.getInstance("SHA1withDSA");
    signer.initVerify(key);
    signer.update(this.toByteArray());
    return (signer.verify(this.signature));
} 
```

我将*bcprov-jdk15on-147.jar*包含在每个项目的类路径中：在客户端（不认为这是必要的，但谁知道）、协议项目和服务器项目中。

服务器似乎无法处理它，因为我遇到了一个显然对于 BouncyCastle 来说很常见的异常：

```
java.lang.NoClassDefFoundError: org/bouncycastle/jce/provider/BouncyCastleProvider
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
at java.lang.Class.getConstructor0(Class.java:2699)
at java.lang.Class.getDeclaredConstructor(Class.java:1985)
at com.google.gson.internal.ConstructorConstructor.newDefaultConstructor(ConstructorConstructor.java:82)
at com.google.gson.internal.ConstructorConstructor.getConstructor(ConstructorConstructor.java:66)
at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:71)
at com.google.gson.Gson.getAdapter(Gson.java:353)
at com.google.gson.Gson.fromJson(Gson.java:754) 
```

下一行是消息类的 gson.fromJson() 调用。

我要提到的最后一件事是我正在使用 Apache Felix 服务器在 Mac OS X 上工作。如果项目完成，服务器模块应该很容易移植到另一台机器上。

那么，我哪里错了？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:26:52.807

我不知道 Apache Felix 的类加载是如何工作的，但您不应该多次添加提供程序。将部件移动到静态初始化程序或在 JDK 文件中`Security.addProvider(new BouncyCastleProvider());`注册充气城堡。`java.security`

发生异常的类是什么？为什么要在默认构造函数中调用 JCE 代码？这可能是个坏主意，尤其是在使用 Gson 提供的自动编组时。首先构造您的对象，然后调用您拥有的任何验证码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:20:02.273

Apache Felix 是一个 OSGi 环境。因此，正确的方法是将必要的 BouncyCastle 包作为依赖项添加到您的包中，并将 BouncyCastle JAR 作为包安装。

大约一年左右以来，BouncyCastle JAR 文件已经是正确的包——它们已经在 MANIFEST.MF 中包含了所有必要的数据。

# javascript - rails 3 使 onclick 执行与 :remote => true 链接相同的 ajax

> ID：10601518
> 
> 赞同：3
> 
> 时间：2012-05-15T13:15:28.727
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

问题标题几乎说明了一切。基本上，我试图让每个表的 tr 元素执行与 :remote=>true 链接相同的 onclick ajax 行为。看起来这将是一件简单的事情，但我就是不知道以哪种方式接近它！

仅供参考，这是我想在 tr 中模拟的链接示例：

```
link_to "link text here", stream_item, {:remote => true, "data-toggle" => "modal", 'data-target' => "#commentModal"} %> 
```

我想这种方法要么只是以某种方式使用 jquery，要么类似：

```
<tr onclick="some stuff here"> 
```

任何指针都非常感谢..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:24:51.523

我猜您希望能够单击整个表格行，而不仅仅是文本链接。在这种情况下，您将不得不使用您猜到的 JS 事件处理程序。

```
 $('#myrow').click(function() {
      $('#mymodal).show();
  }); 
```

然后分配id：

```
<tr id="#myrow">Link Text</tr> 
```

# python - 如何提供包装同步 API 的异步 RESTful API

> ID：10601519
> 
> 赞同：2
> 
> 时间：2012-05-15T13:15:32.973
> 
> 标签：python, api, http

我们正在 Django 中创建一个 Web 服务（RESTful API）。我们的 API 将包装我们自己的内部数据以及我们的 Web 服务层将访问的其他一些 API。

我们使用的其中一个 API 有一些长时间运行的调用，它们在大约一分钟内不返回 HTTP 响应。API 有一个单独的 API 调用来获取当前操作的状态，但这意味着用户必须启动长时间运行的操作，然后有一个单独的进程轮询状态。我们不希望我们的 API 以这种方式工作，我们希望初始请求只返回一个表示它正在进行的响应。

所以我们想要做的是当我们得到一个长时间运行的请求时，我们异步地向 API 发起一个我们自己的 HTTP 请求，然后返回一个响应。然后每次我们得到一个状态调查，我们只是通过它并用我们得到的响应来响应。当我们收到操作完成的回调时，下次我们收到状态轮询时，我们将响应操作完成并返回数据。这意味着我们需要处理传入状态请求的处理程序，以检查正在进行的长时间运行的请求列表以响应状态。

这似乎是解决这个问题的合理方法吗？我们应该研究哪些 python 库来使这种事情变得更容易？我们不确定是使用像 eventlet 或 twisted 这样的低级别的东西，还是像芹菜这样重量更重的东西。芹菜似乎是这类东西的正常推荐，但我不能 100% 确定它的位置。

谢谢，斯宾塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-28T21:48:54.390

几个月前我遇到了同样的情况，可能你已经解决了你的问题，但是对于面临同样情况的其他人，我会发布我当时所做的事情。

基本上我使用了[http://www.celeryproject.org/](http://www.celeryproject.org/)库，以异步方式调度一个长时间运行的操作，返回成功的 HTTP 响应芹菜作业 ID，异步操作将在 sqlite 数据库中注册状态和作业 ID（对我正在做的事情来说已经足够了），并且一个客户正在查询（使用休息）工作的状态。

# python - 防止阻塞 os.system

> ID：10601520
> 
> 赞同：0
> 
> 时间：2012-05-15T13:15:33.537
> 
> 标签：python, django, multithreading, os.system

我正在尝试使用 python 脚本运行多个 Django 开发服务器，通常我使用终端命令“python manage.py runserver PORTNumber”运行服务器。我希望能够在不同的端口上运行多个实例，但是在尝试使用 os.system 时，我被阻止了；我创建了一个包含 os.system 命令的线程，但是打开它时我也被阻止了。任何想法如何防止这种情况，或者在多个端口上运行开发服务器的方法？

提前致谢。

# php - 我得到一个未定义而不是文件名

> ID：10601527
> 
> 赞同：0
> 
> 时间：2012-05-15T13:16:00.613
> 
> 标签：php, javascript, jquery, ajax, dom

[我在这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)有一个应用程序的链接。现在我要做的是，当用户单击“上传”按钮时，它会显示一个加载栏，在该栏下方它将显示正在上传的文件的名称和旁边的“取消”按钮因此用户可以根据需要取消上传。

但问题是它根本没有检索文件名。它显示为未定义。所以我的问题是，我怎样才能在取消按钮旁边显示文件名而不是未定义？

下面是开始上传和存储取消按钮功能的 javascript 函数：

```
function startImageUpload(imageuploadform, imagefilename){
  $('.imagef1_cancel').eq(window.lastUploadImageIndex)
    .html('' + imagefilename + 
          '<button type="button" class="imageCancel" cancel_image_file_name="' + 
          imagefilename + '">Cancel</button>');
  $('.imagef1_cancel').eq(window.lastUploadImageIndex).find(".imageCancel").on("click", 
    function(event) {
      var cancel_image_file_name = $(this).attr('cancel_image_file_name');
      console.log(cancel_image_file_name) 
      jQuery.ajax("cancelimage.php?imagefilename=" + cancel_image_file_name)
        return stopImageUpload(2);
  });     
  return true;
} 
```

下面是`cancelimage.php`应该检索文件名的脚本：

```
<?php

$cancel_image_file_name = $_GET["imagefilename"];

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:49:00.027

当你渲染你的 html

**前任。**

```
 // html 
     <img src="bla_bla_bla" name="img_1.jpg" id="x" >

 // in your JS
     $imgName = $("#x").attr('name'); 
```

然后您可以使用您的 Ajax 正常发送图像名称

# ruby-on-rails-3 - Rails - 使用 Rails 嵌套时的路由 - 初学者

> ID：10601530
> 
> 赞同：0
> 
> 时间：2012-05-15T13:16:14.737
> 
> 标签：ruby-on-rails-3, rest, rails-routing, nested

我对编程和 Rails 比较陌生，所以请放纵:)

我正在为自己建立一个包含博客的网站。我有两个嵌套的模型，我似乎不明白如何使用 REST 对我的文章和评论执行某些操作。

当我创建评论时，如果评论没有通过验证，我希望它再次呈现页面，以便用户可以更正他的错误并重新提交评论。当我尝试渲染时，它给了我一个缺少模板的错误。

这是代码：

您也可以在 github 上找到此代码 --> [https://github.com/MariusLucianPop/mariuslp-](https://github.com/MariusLucianPop/mariuslp-)

**路线.rb**

```
Mariuslp::Application.routes.draw do

  get "categories/new"

  root :to => "static_pages#index"

  match "login" => "visitors#login" # not rest
  match "logout" =>"visitors#logout" # not rest
  match "comment" => "articles#show"

  resources :articles do 
  resources :comments
end

  resources :tags, :taggings, :visitors, :categories, :comments

end 
```

**文章控制器.rb**

```
def show
  @article = Article.find(params[:id])
  @comment = @article.comments.new
end 
```

**评论控制器.rb**

```
def create
    article_id = params[:comment].delete(:article_id)
    @comment = Comment.new(params[:comment])
    @comment.article_id = article_id
    if @comment.save
      redirect_to article_path(@comment.article_id)
    else
      render article_path(@comment.article_id,@comment) ## This one doesn't work
    end
  end

  def new
    @comment = Comment.new
  end

 def destroy 
    Comment.find(params[:id]).destroy
    redirect_to articles_path()
 end 
```

查看-文章： **_comment.html.erb**

```
<div class="comment">
<%= comment.body %><br />
<%= link_to "Delete Comment", article_comment_path(@article), :method => :delete,    :confirm => "Are you sure you want to delete this comment?" %>
</div> 
```

**_comment_form.html.erb**

```
<%= form_for @comment do |f|%>

    <%= f.hidden_field :article_id%>

    <%= f.label :body %><br />
    <%= f.text_area :body, :cols => 50, :rows => 6 %><br />

    <%= f.submit%>
<%end%> 
```

**显示.html.erb**

```
<p><%= link_to "<< Back to Articles", articles_path%></p>

<div class = "article_show">
    <%= label_tag :category_id %>
    <%= @article.category_id%> <br />

    <%= label_tag :title%>: 
    <%= @article.title%> <br />

    <%= label_tag :body%>: 
    <%= @article.body%> <br />

    <%= label_tag :tag_list%>:
    <%= @article.tag_list%><br />
</div>

<br />
<% if session[:username]== "marius"%>
<div class ="admin">
    <%= link_to "Edit", edit_article_path(@article)%>
    <%= link_to "Delete", article_path(@article), :method => :delete, :confirm => "Are you sure you want to delete this article ?"%>
</div>
<%end%>
<br />

<%= render :partial => 'comment', :collection => @article.comments %>

<%= render :partial => 'comment_form'%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:30:08.007

您是否尝试过使用您指出问题的地方？

```
render 'articles/show' 
```

您不需要使用`article_comment_path`，因为这是一个完整路径，而不仅仅是您存储视图模板的位置。在这种情况下，您只需要视图。当然，您必须确保获取您在此视图中使用的所有实例变量。

更新：

```
@article = Articles.find(article_id)
render 'articles/show' 
```

# ios5 - 在后台和前台之间切换应用程序后与 MPMoviePlayerViewController 崩溃

> ID：10601536
> 
> 赞同：0
> 
> 时间：2012-05-15T13:16:34.763
> 
> 标签：ios5, mpmovieplayercontroller

我的情况：我正在使用 AVAudioRecorder 录制音频文件。要播放我正在使用 MPMoviePlayerViewController 的记录。录音、播放、停止等工作正常。

我的问题：播放后：当我按下主页按钮（将我的应用程序置于后台）并再次打开我的应用程序时，应用程序崩溃。它仅在播放完成时发生（按“完成”或让它播放到最后）。当我在播放过程中按下主页按钮并再次打开应用程序时，一切都很好。

这是我的电影播放器​​代码：（使用[此处](http://josebolanos.wordpress.com/2011/09/28/dismissing-mpmovieplayerviewcontroller-the-right-way/)的代码）

```
- (void)playVideo:(NSString*)aVideoUrl {
  MPMoviePlayerViewController *playerVC = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:aVideoUrl]];  

  // Remove the movie player view controller from the "playback did finish" notification observers
  [[NSNotificationCenter defaultCenter] removeObserver:playerVC
                                              name:MPMoviePlayerPlaybackDidFinishNotification
                                            object:playerVC.moviePlayer];

  // Register this class as an observer instead
  [[NSNotificationCenter defaultCenter] addObserver:self
                                       selector:@selector(movieFinishedCallback:)
                                           name:MPMoviePlayerPlaybackDidFinishNotification
                                         object:playerVC.moviePlayer];

  // Set the modal transition style of your choice
  playerVC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

  // Present the movie player view controller
  //[self presentModalViewController:playerVC animated:YES];
  [self presentMoviePlayerViewControllerAnimated:playerVC];

  // Start playback
  [playerVC.moviePlayer prepareToPlay];
  [playerVC.moviePlayer play];
}

- (void)movieFinishedCallback:(NSNotification*)aNotification {
  MPMoviePlayerController *moviePlayer = [aNotification object];

  // Remove this class from the observers
  [[NSNotificationCenter defaultCenter] removeObserver:self
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                              object:moviePlayer];

  // Dismiss the view controller
  [self dismissModalViewControllerAnimated:YES];
  //[self dismissMoviePlayerViewControllerAnimated];
} 
```

我正在使用 iOS5 和 ARC。

带有代码的类是一个普通的 UIViewController 也是方法的调用者。

它只发生在设备上。在模拟器中没有崩溃，但在我的 iPhone 4 和 iPad 1 上。

我找不到我的应用程序崩溃的原因。

![崩溃的堆栈跟踪](../Images/65f19c73645bf16c6336b83a1d600817.png)

**编辑**：我不太确定是否知道，但我想我解决了我的崩溃问题。

我相信问题不在于播放音频文件，或者不仅仅是。录音似乎也是这个问题的一部分。

在我使用 AVAudioRecorder 录制的课程中，我将此类注册为 AVAudioSession 的代表：[[AVAudioSession sharedInstance] setDelegate: self];

我把它移到我的“根”类（我的“主”类，我从那里开始一切），当我实现协议方法“beginInterruption”和“endInterruption”（只知道一个NSLog语句）我可以看到“beginInterruption ' 当我在后台设置应用程序时调用，当我再次启动应用程序（前台）时调用 'endInterruption'。在堆栈跟踪中，您可以看到类似“AudioSessionInterruptionListener”的内容......似乎是委托方法的一部分。

**编辑 2**：

我测试了我的应用程序几次，崩溃再也没有发生过。将 AVAudioSessionDelegate 设置为我的“根”类似乎是答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:01:25.443

对我来说，有必要注册`AVAudioSession`代表：

```
[[AVAudioSession sharedInstance] setDelegate: self]; 
```

我在我的录音处理类的“父”类中添加了这个。
我还必须实现`beginInterruption`AVAudioSession`endInterruption`委托。

此后，坠机事件再也没有发生。

# android - ActionBarSherlock 静态附件菜单

> ID：10601540
> 
> 赞同：3
> 
> 时间：2012-05-15T13:16:44.597
> 
> 标签：android, actionbarsherlock

我想在活动的底部有一个类似工具栏的菜单，我在我的应用程序中使用 ActionBarSherlock，我找到了“静态附件”-在底部添加“工具栏”的演示......

所以我试着像下面这样实现：

```
public class ReadMailInbox extends Activity implements OnCreateOptionsMenuListener 
{
    ActionBarSherlock mSherlock = ActionBarSherlock.wrap(this);

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        mSherlock.setContentView(R.layout.readmessage_layout);      
    }

    @Override
    public boolean onCreateOptionsMenu(android.view.Menu menu) {
        return mSherlock.dispatchCreateOptionsMenu(menu);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        menu.add("Refresh")
        .setIcon(android.R.drawable.ic_menu_rotate)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
        return true;
    }
} 
```

但它出现在视图的顶部而不是底部......

此外，我想为菜单使用 xml 布局，而不是添加每个菜单按钮，因为我想将它用于多个活动......

那么我怎样才能让它显示在底部呢？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:25:51.483

1.  使用`splitActionBarWhenNarrow`选项`AndroidManifest.xml`：

    ```
    <activity android:name=".YourActivity" android:uiOptions="splitActionBarWhenNarrow" /> 
    ```

2.  覆盖`onCreateOptionsMenu`如下：

    ```
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        final MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.activity_home, menu);

        return super.onCreateOptionsMenu(menu);
    } 
    ```

# git - 更智能的 rebase 避免冗余工作？

> ID：10601541
> 
> 赞同：22
> 
> 时间：2012-05-15T13:16:48.193
> 
> 标签：git, git-rebase, git-diff

我在长变基时遇到的一个问题是必须解决冗余冲突。假设我有一个带有一系列提交的分支，它不断修改一个函数，而最终提交完全删除了该函数。

当我这样做时`rebase master`，Git 会天真地依次应用每个提交。这意味着我需要用 master 的提示来解决这些提交中的每一个——即使最终这些工作都被浪费了。

有什么好的方法来处理这种情况？也许我应该为整个分支生成一个补丁，然后将其应用于 master？如果是这样，有什么办法可以保留一些历史吗？想法、建议等。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-23T07:18:50.320

您想结合使用历史提交来[`git rerere`](http://www.kernel.org/pub/software/scm/git/docs/git-rerere.html)教授数据库（您可能已经拥有它）。这允许 git 自动使用从历史中学到的合并冲突解决方案。`rerere`[`rerere-train.sh`](https://github.com/gitster/git/blob/master/contrib/rerere-train.sh)`/usr/share/doc/git/contrib/rerere-train.sh`

**警告：**您基本上是通过盲目地使用历史字符串替换来修复冲突的合并，从而使 git 重写源代码。您应该在 rebase 之后查看所有冲突的合并。我发现这`gitk`很好用（它只会显示冲突解决作为合并的补丁）。我只有很好的经验`rerere`，你可能没有那么幸运。基本上，如果您的历史记录确实包含损坏的合并（即，技术上错误地完成的合并，然后在后续提交中修复），您不想使用`rerere`历史记录，除非您希望为您自动完成类似的损坏合并.

长话短说，你只是跑

```
git config --global rerere.enabled 1
bash /usr/share/doc/git/contrib/rerere-train.sh --all 
```

然后是你真正想做的变基，它应该神奇地工作。

全局启用后`rerere`，以后不再需要从历史中学习。`rerere`只有在启用之前已经完成冲突解决之后才需要学习功能`rerere`。

PS。我找到了另一个问题的类似答案：[https ://stackoverflow.com/a/4155237/334451](https://stackoverflow.com/a/4155237/334451)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-15T13:37:04.333

你可以使用`git rerere`功能。

您必须使用 启用它`git config --global rerere.enabled 1`，然后，您解决的每个冲突都会存储以供以后使用，并且解决方案会在相同的上下文中重新应用。

您可以使用 来检查存储的分辨率`git rerere diff`。

查看本[教程](https://git-scm.com/book/en/v2/Git-Tools-Rerere)以获取更多信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-15T15:42:58.000

为什么不在`squash`初始交互式 rebase 中将多余的补丁放在一起（首先重新排序它们以便它们在一起），以便您清除序列的“修改然后删除”方面。在此阶段，您可以对提交中的帅哥进行选择性处理（例如，使用 git gui）。然后，这将为您提供更好的最终干净变基序列。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-23T12:41:44.940

（这是我对问题的第二个答案。在第二次阅读时，我认为最初的问题可能与我最初理解的问题有点不同。）

我理解这个问题，因为您有一个与`master`. 通常这种分支风格被称为特性分支，我绝对鼓励使用它们。

应该始终尝试保持功能分支的清洁。在实践中，如果您从未犯过任何错误，您需要一个具有提交的功能分支。对我来说，这意味着要付出很多，然后`git rebase -i`当我后来了解这些错误时，我会纠正这些错误。

当你的功能分支准备好时，它应该看起来像

1.  添加 API 来做事 X
2.  为极端案例 Z 修复现有 API Y
3.  使用 X 和 Y 添加功能 B（也适用于情况 Z！）
4.  改进功能 B：做魔术 E

代替

1.  在制品
2.  在制品2
3.  添加 API
4.  移动 API 做 X
5.  添加功能 B
6.  再三考虑，重命名 X 的参数
7.  修复功能 B
8.  修复 X ​​的 API
9.  修复角盒 Z
10.  也修复 API Y 的极端情况 Z
11.  做魔术 E
12.  提交丢失的文件

如果您随后将您的功能分支重新设置为最新`master`分支，则更改很高，只有提交`Fix existing API Y for corner case Z`可能会导致冲突。*如果该提交是修改现有*API的最小更改，那么修复冲突应该很容易。此外，只有在其他提交准确地修改了您的最小更改所触及的行时，才会出现这种冲突。

如果你做特性分支和 rebase 特性分支而不是合并（我的首选风格是 rebase 以便可以快进，然后`git checkout master && git merge --no-ff feature-branch-x`在合并提交中执行并记录整个事情——这允许保留分支的完整历史记录并允许使用 GUI 工具如果需要，可以轻松浏览该功能）您肯定希望在[将](https://www.mail-archive.com/dri-devel@lists.sourceforge.net/msg39091.html)这些分支重新定位为`master`. 从长远来看，不仅你的变基会更容易，而且历史是可读的。

因此，在上面的示例中，可以`rebase -i <old-enough-sha1>`将提交重新排序为 3+4+6+8、10、1+2+5+7+9、11+12，其中`+`表示 squash。Git 也允许拆分和编辑现有的提交，但通常更容易保持提交非常小，然后再压缩*其中的一些*。请注意，在此示例中，即使原始提交编号 10 在原始第一次提交之前结束。这是正常的，反映了您的实施并不完美的现实。不过，这不需要存储在版本历史记录中。

在您的情况下，听起来您有一个功能分支，其中多个提交添加和删除相同的东西。将这些提交压缩为单个提交（可能最终没有更改，这没关系）。仅当功能分支看起来很干净时，才将您的功能分支重新设置为 master。绝对要学习使用`git gui`或其他一些工具，使提交更改的*行*而不是*文件*变得容易。每个提交都应该是一个修改一个理智的东西集合的更改。如果您添加新功能 X，则同一提交*不得*修复现有功能 Y 或添加有关 Z 的缺失文档。即使对同一*文件*进行了这些更改也不行。对我来说，这就是 Linus Torvalds 所说的“[文件无关紧要”的意思](http://permalink.gmane.org/gmane.comp.version-control.git/217)”。

# ms-access - 从后端的另一个 mdb 文件加载记录时性能低下

> ID：10601543
> 
> 赞同：3
> 
> 时间：2012-05-15T13:16:54.527
> 
> 标签：ms-access

我在 Access 中有一个包含子表单的表单。在这个子表单中，应该运行一个查询并返回大约 2000 条记录。

我有三个与此表单相关的查询，但其中两个有点复杂（我认为）。

在这两个从另一个`.mdb`文件（以下查询）返回记录的查询中，此表单和查询适用于 ie `X.mdb`，但这些查询从`Y.mdb`

我认为它使我的表单非常慢，因为如果我删除这个查询它工作正常

```
SELECT 
    tb_KonzeptFunktionen.Konzept AS KonzeptID, 
    tb_KonzeptFunktionen.Funktion,
    tb_KonzeptFunktionen.Version, 
    qryFunktionen_Übersicht.ID,
    qryFunktionen_Übersicht.Fehlerpfad_Kommentar AS Kommentar, 
    qryFunktionen_Übersicht.Fehlerpfadname, 
    qryFunktionen_Übersicht.Fehlerpfad_CDT, 
    qryFunktionen_Übersicht.Fehlerpfad_Kommentar, 
    qryFunktionen_Übersicht.symptombasiert, 
    qryFunktionen_Übersicht.Beschreibung_vorhanden, 
    qryFunktionen_Übersicht.Max_Pfad, 
    qryFunktionen_Übersicht.Max_Info, 
    qryFunktionen_Übersicht.Max_Status, 
    qryFunktionen_Übersicht.Max_Strategie, 
    qryFunktionen_Übersicht.Max_Prüfplan, 
    qryFunktionen_Übersicht.Min_Pfad, 
    qryFunktionen_Übersicht.Min_Info, 
    qryFunktionen_Übersicht.Min_Status, 
    qryFunktionen_Übersicht.Min_Strategie, 
    qryFunktionen_Übersicht.Min_Prüfplan, 
    qryFunktionen_Übersicht.Sig_Pfad, 
    qryFunktionen_Übersicht.Sig_Info, 
    qryFunktionen_Übersicht.Sig_Status,
    qryFunktionen_Übersicht.Sig_Strategie, 
    qryFunktionen_Übersicht.Sig_Prüfplan, 
    qryFunktionen_Übersicht.Plaus_Pfad, 
    qryFunktionen_Übersicht.Plaus_Info, 
    qryFunktionen_Übersicht.Plaus_Status, 
    qryFunktionen_Übersicht.Plaus_Strategie, 
    qryFunktionen_Übersicht.Plaus_Prüfplan, 
    qryFunktionen_Übersicht.Beschreibung_allgemein, 
    qryFunktionen_Übersicht.Funktionsname        
FROM tb_KonzeptFunktionen RIGHT JOIN qryFunktionen_Übersicht 
    ON tb_KonzeptFunktionen.Funktion = qryFunktionen_Übersicht.Funktionsname
WHERE (((tb_KonzeptFunktionen.Konzept)=[Formulare]![frm_Fahrzeug]![ID])) 
```

如果我删除此查询，一切正常

这是分配给上述查询（`qryFunktionen_Übersicht`）的另一个相关查询，我在**ORDER By**中的字段上添加了索引：

```
SELECT tbFunktionen_Übersicht.*, 
    tbFunktionen.Funktionsname, 
    tbFunktionen.Funktionsbeschreibung, 
    tbFunktionen.diagnoserelevant, 
    tbFunktionen.ID AS FunktionsID
FROM tbFunktionen_Übersicht INNER JOIN tbFunktionen 
    ON tbFunktionen_Übersicht.Funktion = tbFunktionen.ID
ORDER BY tbFunktionen.Funktionsname, tbFunktionen_Übersicht.Fehlerpfadname; 
```

我该如何处理我的问题，你知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:03:46.110

还请分享您添加索引的字段的信息，并添加您如何命名查询的信息，以便我们更好地了解哪个查询依赖于另一个查询。

通常，为了获得更好的性能，您可以将所有查询保存在前端 mdb 中以使语句已编译。SQL JOIN 可能会花费大量时间，具体取决于它们必须访问的数据量，因此，如果您要显示的数据确实太多，这将消耗大量时间，而 Access 数据库并不是此类任务的最快解决方案。

# c# - 将 PDF 页面呈现为 CGBitmapContext 时如何减少内存使用量？

> ID：10601544
> 
> 赞同：3
> 
> 时间：2012-05-15T13:16:56.687
> 
> 标签：c#, objective-c, ios, xamarin.ios, core-graphics

我正在使用下面的代码来呈现 PDF 页面的预览。但是它正在使用大量内存（每页 2-3MB）。

在设备日志中，我看到：

```
<Error>: CGBitmapContextInfoCreate: unable to allocate 2851360 bytes for bitmap data 
```

我真的不需要每个颜色通道以 8 位渲染位图。如何更改代码以使其以灰度或每个通道的更少位呈现？

我也可以使用以 x/y 的最大分辨率渲染位图然后将生成的图像缩放到请求的大小的解决方案。`CATiledLayer`无论如何，PDF将在之后详细呈现。

同样根据 Apple 的文档，`CGBitmapContextCreate()`如果无法创建上下文（由于内存），则返回 NIL。但是在 MonoTouch 中只有构造函数来创建上下文，因此我无法检查创建是否失败。如果可以的话，我可以跳过伪装者的形象。

```
UIImage oBackgroundImage= null;
using(CGColorSpace oColorSpace = CGColorSpace.CreateDeviceRGB())
// This is the line that is causing the issue.
using(CGBitmapContext oContext = new CGBitmapContext(null, iWidth, iHeight, 8, iWidth * 4, oColorSpace, CGImageAlphaInfo.PremultipliedFirst))
{
    // Fill background white.
    oContext.SetFillColor(1f, 1f, 1f, 1f);
    oContext.FillRect(oTargetRect);

    // Calculate the rectangle to fit the page into. 
    RectangleF oCaptureRect = new RectangleF(0, 0, oTargetRect.Size.Width / fScaleToApply, oTargetRect.Size.Height / fScaleToApply);
    // GetDrawingTransform() doesn't scale up, that's why why let it calculate the transformation for a smaller area
    // if the current page is smaller than the area we have available (fScaleToApply > 1). Afterwards we scale up again.
    CGAffineTransform oDrawingTransform = oPdfPage.GetDrawingTransform(CGPDFBox.Media, oCaptureRect, 0, true);

    // Now scale context up to final size.
    oContext.ScaleCTM(fScaleToApply, fScaleToApply);
    // Concat the PDF transformation.
    oContext.ConcatCTM(oDrawingTransform);
    // Draw the page.
    oContext.InterpolationQuality = CGInterpolationQuality.Medium;
    oContext.SetRenderingIntent (CGColorRenderingIntent.Default);
    oContext.DrawPDFPage(oPdfPage);

    // Capture an image.
    using(CGImage oImage = oContext.ToImage())
    {
        oBackgroundImage = UIImage.FromImage( oImage );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:05:13.787

> 我真的不需要每个颜色通道以 8 位渲染位图。

...

```
using(CGColorSpace oColorSpace = CGColorSpace.CreateDeviceRGB()) 
```

您是否尝试过提供不同的色彩空间？

> 其中位图以 x/y 的最大分辨率呈现

...

```
using(CGBitmapContext oContext = new CGBitmapContext(null, iWidth, iHeight, 8, iWidth * 4, oColorSpace, CGImageAlphaInfo.PremultipliedFirst)) 
```

您也可以控制位图大小和其他直接影响位图所需内存量的参数。

> 同样根据 Apple 的文档，如果无法创建上下文（由于内存）， CGBitmapContextCreate() 将返回 NIL。

如果返回无效对象（如`null`），则 C# 实例将具有`Handle`等于`IntPtr.Zero`。对于任何 ObjC 对象都是如此，因为`init`can return`nil`而 .NET 构造函数不能 return `null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:27:25.443

> 同样根据 Apple 的文档，如果无法创建上下文（由于内存）， CGBitmapContextCreate() 将返回 NIL。但是在 MonoTouch 中只有构造函数来创建上下文，因此我无法检查创建是否失败。如果可以的话，我可以跳过伪装者的形象。

这实际上很容易：

```
CGBitmapContext context;
try {
    context = new CGBitmapContext (...);
} catch (Exception ex) {
    context = null;
}

if (context != null) {
    using (context) {
        ...
    }
} 
```

或者您也可以将整个 using 子句包含在异常处理程序中：

```
try {
    using (var context = new CGBitmapContext (...)) {
        ...
    }
} catch {
    // we failed
    oBackgroundImage = null;
} 
```

# c++ - Clang 3.1 和 C++11 支持状态

> ID：10601545
> 
> 赞同：22
> 
> 时间：2012-05-15T13:17:06.603
> 
> 标签：c++, c++11, llvm, clang

从 clang 的 C++11 支持状态网站[http://clang.llvm.org/cxx_status.html](http://clang.llvm.org/cxx_status.html)中可以看出，从 3.1 版开始，“Initializer List”和“Lambda Expression”都受支持。

但是，使用 LLVM/Clang 主干 (3.2)，针对初始化列表和 lambda 表达式进行编译将产生错误消息。

有谁知道 Clang >3.1 是否支持这些功能？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-15T14:23:57.277

默认情况下，`clang++`不会启用 C++11 功能 - 您必须[在编译期间传递一个附加标志](http://clang.llvm.org/docs/LanguageExtensions.html#cxx11)。

```
clang++ -std=c++11 [input files...] 
```

或者

```
# enables some additional C++11 extensions GCC has
clang++ -std=gnu++11 [input files...] 
```

`libstdc++`此外，您可以在 using和 Clang's own之间切换[`libc++`](http://libcxx.llvm.org/index.html)，它们是 C++ 标准库的不同实现。`libc++`在某些情况下，C++11 标准的实现可能比您现有的`libstdc++`库更好。

```
# uses clang's C++ library in C++98 mode
clang++ -stdlib=libc++ [input] # uses clang's C++ library

# uses clang's C++ library and enables C++11 mode
clang++ -stdlib=libc++ -std=c++11 [input] 
```

如果您在具有过时版本`libstdc++`（如 Mac OSX）的环境中使用 Clang，后者很重要，但请注意，这两个 C++ 库彼此不兼容，因此您必须重建任何依赖关系，`libc++`如果您是使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:28:39.520

[http://clang.llvm.org/cxx_status.html](http://clang.llvm.org/cxx_status.html)上的页面充其量是令人困惑的。目前，发布的 3.1 版本不支持初始化列表或 lambdas（所以我暂时切换回 GCC 4.8）。

`__has__feature`根据此处的说明，您始终可以使用宏检查 clang 对功能的支持：

[http://clang.llvm.org/docs/LanguageExtensions.html#checking_language_features](http://clang.llvm.org/docs/LanguageExtensions.html#checking_language_features)

例如，如果这些功能可用且已启用，则`__has_feature(cxx_generalized_initializers)`or将返回 true。`__has_feature(cxx_lambdas)`

就我个人而言，我预计这些功能将在 clang 4.0 中准备好，预计将与下一个 Xcode 一起发布（可能是 2012 年 6 月）。

-- 编辑澄清我一直在测试的版本 -- 显然，clang 版本控制比我意识到的更复杂。

# php - 在 URL 中隐藏 ?ref 字符串，但将其传递给脚本

> ID：10601549
> 
> 赞同：0
> 
> 时间：2012-05-15T13:17:14.607
> 
> 标签：php, .htaccess, redirect, rewrite

如何向用户隐藏 ?ref 字符串，但将其传递给 php 代码以便它能够抓取它？

例如，访问者访问此页面：

```
http://mysite.com/?ref=ref+string 
```

在浏览器 URL 中我想隐藏它，所以用户会看到”

```
http://mysite.com/ 
```

但我想通过这个来获取 ref 字符串的内容：

```
$ref = $_GET['ref']; 
```

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:19:13.230

不，如果您想使用 GET 变量，它们将始终位于 url 中。

但是，您可以使用其他变量，例如 $_SESSION 或 $_POST 变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:27:24.187

您可以在 PHP 脚本的顶部尝试这样的操作：

```
session_start();

if (isset($_GET['ref'])) {
    $_SESSION['ref'] = $_GET['ref'];
    header('Location: /');
    exit();
} 
```

`$_SESSION['ref']`但是，从那时起，您将不得不使用来访问该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:22:55.187

这不是[http 协议处理查询字符串的方式](http://en.wikipedia.org/wiki/Query_string)。如果您有需要在查询字符串中包含的信息，您想对用户隐藏或混淆，我建议您使用简单的加密来更改它。如果您出于审美原因试图摆脱这些信息，则需要采用不同的方法来生成标头或存储信息（会话/cookies/等）。

# android - Android 自定义溢出菜单（没有操作栏和菜单按钮）

> ID：10601552
> 
> 赞同：5
> 
> 时间：2012-05-15T13:17:21.113
> 
> 标签：android, android-actionbar

在我的应用程序中，我制作了自己的 Actionbar，并且效果很好。

但是，我想在没有菜单按钮的 ICS 设备上使用溢出按钮的行为。

有没有办法在 ICS 中实现与操作栏分开的自定义溢出按钮？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T05:18:21.920

userSeven7s 大多与 . 一起使用`ListPopupWindow`，但在这种情况下更适合的是 . [`PopupMenu`](http://developer.android.com/reference/android/widget/PopupMenu.html)，它允许您扩展标准`menu.xml`。您可以将自己的`View`或`Button`放在右上角并在`onClick`处理程序中创建并显示 PopupMenu。

可以在 ApiDemos > Views > Popup Menu 中找到一个示例。具体来说[`PopupMenu1.java`](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/PopupMenu1.html)：

```
public void onPopupButtonClick(View button) {
    PopupMenu popup = new PopupMenu(this, button);
    popup.getMenuInflater().inflate(R.menu.popup, popup.getMenu());

    popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
        public boolean onMenuItemClick(MenuItem item) {
            Toast.makeText(PopupMenu1.this, "Clicked popup menu item " + item.getTitle(),
                Toast.LENGTH_SHORT).show();
            return true;
        }
    });

    popup.show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:43:17.727

你看过 ActionBar Sherlock 吗？ABS 为所有运行 android 2.1 及更高版本的设备提供操作栏支持。ActionBarCompat 示例非常有限，不支持旧设备上的溢出菜单。请务必使用 Theme.Sherlock.ForceOverflow 主题来启用溢出。

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

您还可以修改 QuickAction 库以执行您想要的操作。

[https://github.com/lorensiuswlt/NewQuickAction](https://github.com/lorensiuswlt/NewQuickAction)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:44:21.490

您可以滑动/滚动操作栏以访问更多选项。将您的操作栏放在`HorizontalScrollView.`

您可能还想看看[这里](http://developer.android.com/reference/android/widget/ListPopupWindow.html)`PopupWindow`的课程和[这里](http://developer.android.com/reference/android/widget/PopupWindow.html)`ListPopupWindow`的文档。

# php - 在 PHP 中加密，在 Perl 中解密

> ID：10601554
> 
> 赞同：2
> 
> 时间：2012-05-15T13:17:27.903
> 
> 标签：php, perl, encryption

```
$key = "12345678876543211234567887654321";
$iv = "1234567887654321";
$plaindata = "String to be encrypted.";

$enc = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $plaindata, MCRYPT_MODE_CBC, $iv));

echo($enc); 
```

输出：

```
EIZDQJWOIepUeNjFL2wl3RYA5bDmFd05Xu6z4e0aiWQ= 
```

这怎么可以在 Perl 中解密？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:20:18.837

看起来您需要[MIME::Base64](https://metacpan.org/module/MIME%3a%3aBase64)和[MCrypt](https://metacpan.org/module/Mcrypt)的组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:57:50.403

cpan 中有一个包 .. MCrypt

[http://search.cpan.org/perldoc?MCrypt](http://search.cpan.org/perldoc?MCrypt)

看一下这个

# jboss - JBoss 和 log4j 附加功能

> ID：10601555
> 
> 赞同：2
> 
> 时间：2012-05-15T13:17:32.053
> 
> 标签：jboss, log4j, classpath, jboss5.x

我想在JBoss 5.1.0.GA中使用[log4j extras 。](http://logging.apache.org/log4j/companions/extras/)
在我的本地服务器上，我把罐子放进去`JBOSS_HOME/common/lib`，它就可以工作了。
在集成服务器上，我做了同样的事情，但我读到了以下错误：

> log4j:WARN 持续解析错误 20 和列 76
> log4j:WARN 必须声明元素类型“rollingPolicy”。log4j:WARN 持续解析错误 22 和第 40 列
> log4j:WARN 元素类型“rollingPolicy”的内容必须匹配“EMPTY”。不允许使用“comment”类型的子项。

如果我移动额外的 jar，`JBOSS_HOME/server/<profile>/lib`错误就会消失，并且日志记录会按预期工作（就像在我的机器上一样）。

有人可以向我解释为什么会这样吗？**JBoss 配置**的哪一部分负责不同的行为？

**编辑** 我还在我的机器和远程服务器上的 conf 目录之间做了一个差异，并且目录是相同的。

# php - 奇怪的问题，放置 session_start() 会导致页面无法加载

> ID：10601556
> 
> 赞同：2
> 
> 时间：2012-05-15T13:17:32.800
> 
> 标签：php, session

页面上有 session_start() 的所有页面都突然停止加载，并且它已经像这样工作了多年。连主人都不确定该怎么办，寻求建议。

带有以下代码的示例测试页也失败了：

```
error_reporting(1);
if(!$_REQUEST['disable']=="yes")
{

session_start();
}
echo "hello"; 
```

如果我在不传递参数的情况下调用页面？disable=yes 页面不会加载，它只是挂起处理

该站点与服务器上的其他 2 个站点一起托管，其他 2 个没有任何问题，只是这个站点突然开始像这样 [没有代码在站点上更改 2+现在几个月]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T05:33:51.467

好的，我发现了问题！

你猜怎么着，它甚至与会话无关！尽管 mysql 会导致会话出现此类问题，这很令人惊讶。

所以发生了什么事：

我有一个主数据库服务器和一个复制从数据库设置。我服务器中的大多数页面都在尝试连接到从站，如果从站失败，它将连接到主站。然而，出于某种奇怪的原因[我还没有想到]，连接到从属数据库的 mysql_connect 只是挂起而没有超时，而这反过来又出于某种奇怪的原因，不允许任何其他具有 session_start() 的页面加载！

现在我不确定为什么这会对所有其他页面产生这样的副作用，但我不得不禁用我的从属服务器，只将我的所有查询路由到主服务器，然后在我可以再次访问该站点之前清除我的浏览器缓存.

因此，一个 mysql_connect 到一个不起作用或无法连接到的数据库[并且 mysql_connect 没有超时]，它可能会导致服务器上的任何其他页面无法加载 - 甚至是我放的一个简单的 4 行页面在我上面的问题中，一个甚至不调用数据库的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:32:53.740

也许会话未启用。

用于`phpinfo();`将 php 设置输出到屏幕并查看靠近底部的会话表。应该说`Session Support => enabled`

# asp.net - Telerik Javascript - 可以定制吗？

> ID：10601558
> 
> 赞同：2
> 
> 时间：2012-05-15T13:17:41.913
> 
> 标签：asp.net, telerik, radwindow

我在页面上使用 Telerik 的 RadEditor 控件。它是唯一使用的 Telerik 控件，但下载的 telerik.web.ui.webresource.axd 包含 radwindow javascipt 代码。我了解 RadEditor 将其用于某些对话框，但我的页面没有并且希望通过从 telerik.web.ui.webresource.axd 中删除此脚本来提高性能。

是否可以完全定制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:20:39.717

您可以通过设置 UseEmbeddedScripts = false 来禁用 RadEditor 控件使用嵌入式 Web 资源。如果将 UseEmbeddedScripts 设置为 false，则将使用 RadControls 文件夹中的文件。

有关更详细的说明，请参阅[禁用嵌入式资源](http://www.telerik.com/help/aspnet-ajax/introduction-disabling-embedded-resources.html)。

# jquery - Jquery：我如何引用这个选择器

> ID：10601567
> 
> 赞同：1
> 
> 时间：2012-05-15T13:18:38.613
> 
> 标签：jquery

我想得到所有的**输入**：

*   那些是复选框，

*   被检查和

*   具有包含“-required”的类名。

我有这个，并尝试了几种变体，但没有任何效果： **`$("input:checkbox[class*='-required']:checked");`**

**示例 html：**

```
<form name="myform" method="POST">
        <div id="checkFruits">FRUITS: </div>
            <input type="checkbox" id="chkFruit" class="chkFruit test-234-required" name="fruit" value="Apples" />Apples <br />
            <input type="checkbox" id="chkFruit" class="chkFruit test-234-required" name="fruits" value="Oranges" />Oranges <br />
            <input type="checkbox" id="chkFruit" class="chkFruit test-234-required" name="fruits" value="Pears" />Pears <br />
            <input type="checkbox" id="chkFruit" class="chkFruit test-234-required" name="fruits" value="Grapes" />Grapes <br /><br />
            <input type="button" id="btnCheckFruit" value="Check Fruits" name="btnCheckFruit" />
<hr />
        <div id="checkCars">CARS: </div>
            <input type="checkbox" id="chkCar" class="chkCar" name="fruit" value="Lexus" />Lexus <br />
            <input type="checkbox" id="chkCar" class="chkCar" name="fruits" value="Maxima" />Maxima <br />
            <input type="checkbox" id="chkCar" class="chkCar" name="fruits" value="Cadillac" />Cadillac <br />
            <input type="checkbox" id="chkCar" class="chkCar" name="fruits" value="Lincoln" />Lincoln <br /><br />
            <input type="button" id="btnCheckCar" value="Check Cars" name="btnCheckCar" />
<hr />
            <ul>
                <li>foo</li>
                <li>bar</li>
</ul>

    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:26:50.690

试试这个选择器：

```
$("input:checked[type='checkbox'][class*='-required']"); 
```

[http://jsfiddle.net/jbduzan/G64xR/1/](http://jsfiddle.net/jbduzan/G64xR/1/)

编辑：摆弄你的例子

[http://jsfiddle.net/jbduzan/G64xR/2/](http://jsfiddle.net/jbduzan/G64xR/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:30:14.900

试试这个选择器

```
$('input.-required:checkbox:checked') 
```

这是一个活生生的例子

[演示](http://jsfiddle.net/justelnegro/PQuRt/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:33:25.307

您可以`$("input:checkbox:checked[class*='-required']")`用作选择器

这是一个工作[小提琴](http://jsfiddle.net/joycse06/89L96/1/)

# c++ - 在 Eclipse CDT 中正确使用静态库

> ID：10601568
> 
> 赞同：0
> 
> 时间：2012-05-15T13:18:47.930
> 
> 标签：c++, eclipse, static-libraries

我已经构建了一个静态库，其中包含我在很多 C++ 项目中使用的通用实用程序。但是，我现在意识到我不知道如何将这些库索引到 Eclipse 项目中。我并不是说在编译时将库链接到项目中——我的意思是对它们进行索引，这样每次我使用这些库中的某些东西时，它就不会告诉我有错误。

但是，由于静态库都在目标代码中，我认为这可能是不可能的。在那种情况下，如何*在*Eclipse 中正确使用静态库？我很幸运我有自己的源代码，但是如果我想使用一个我没有源代码的库怎么办？一切都必须通过前向声明来完成吗？

这本身可能是一个一般性的编码问题，而不是一个特定于 Eclipse 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:23:08.310

如果您没有代码，则无法使用 Eclipse AFAIK 对其进行索引。我在 Eclipse 中使用了很多 3rd 方代码，但它们也都有源代码。

前向声明在索引方面也对你没有好处，它只是一种在没有完整定义的情况下告诉编译器是什么的方法。这会让索引器知道某些东西是一个类，但仅此而已。它不会让您访问成员列表以进行自动完成或类似的事情。

# charts - 支持 Knockout.js 的 Javascript 图表

> ID：10601569
> 
> 赞同：4
> 
> 时间：2012-05-15T13:18:50.680
> 
> 标签：charts, knockout.js, knockout-2.0

我搜索了支持 KO.js 的客户端 javascript 图表，但找不到。

有没有人对支持 KO.js 的图表有任何经验？我追求 KO 的原因是，当用户切换图表参数时，图表应该自动为所选参数呈现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:39:17.073

你检查过Wijmo吗？它包括图表和其他几个小部件，都支持 KnockoutJS：

[http://wijmo.com/widgets/mvvm-support/](http://wijmo.com/widgets/mvvm-support/)

CodeProject 上有一个示例，展示了如何使用 KnockoutJS 和 Wijmo 折线图小部件构建股票投资组合应用程序：

[http://www.codeproject.com/Articles/424656/A-Stock-Portfolio-Application-Using-KnockoutJS](http://www.codeproject.com/Articles/424656/A-Stock-Portfolio-Application-Using-KnockoutJS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:32:00.840

您可能不会很快找到它；好的图表解决方案或库通常不会对使用哪个特定的应用程序框架采取立场。在 JS 的（分段）世界中，必须一直编写适配器（最著名的是框架 X 到 JQueryUI 小部件）；squareup 的开发人员使用 d3 插入 EmberJs，所以我认为没有理由不能对淘汰赛做同样的事情。

[http://corner.squareup.com/2012/04/building-analytics.html](http://corner.squareup.com/2012/04/building-analytics.html)

# jquery - 元素存在时立即触发事件的脚本？

> ID：10601570
> 
> 赞同：0
> 
> 时间：2012-05-15T13:18:59.557
> 
> 标签：jquery, ajax, facebook, greasemonkey

我正在尝试编写一个小 Greasemonkey 脚本来完成 Facebook 中的一些任务，例如隐藏新闻等。

问题是：我有一个 DOM 中尚不存在的元素的 ID。这是点击帖子的箭头图标时出现的小框。

如何通过 jQuery 创建一个事件处理程序，该处理程序在元素存在时立即触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:52:49.760

这是一个常见的问题。[您可以使用实用程序](https://gist.github.com/2625891)对 AJAXed-in 元素进行[操作`waitForKeyElements()`](https://gist.github.com/2625891)。（例如，请参阅[“AJAX 请求上的 Fire Greasemonkey 脚本”](https://stackoverflow.com/q/8281441/331508)。）

我不确定您所说的“点击帖子的箭头图标时出现的小框”是什么意思，但总的来说，您会：

1.  确保你的脚本有 jQuery。将此添加到[元数据部分](http://wiki.greasespot.net/Metadata_Block)，如果它还没有：

    ```
    // @require http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
    ```

2.  要求`waitForKeyElements`：

    ```
    // @require https://gist.github.com/raw/2625891/waitForKeyElements.js 
    ```

3.  编写您的处理函数并激活它：

    ```
    function hideTheNews (jNode) {
        //***** YOUR CODE HERE *****
        jNode.hide (); // For example
    }

    waitForKeyElements ("*APPROPRIATE jQuery SELECTOR*", hideTheNews); 
    ```

# database - MVVM 和实体框架：模型类中的字段并不总是存在于数据库中

> ID：10601572
> 
> 赞同：1
> 
> 时间：2012-05-15T13:19:07.600
> 
> 标签：database, entity-framework, mvvm, model

我正在使用 MVVM 和实体框架，并且有一个模型类映射到一个名为`EmplTable`.

在这堂课中，我有几个字段，我们将这个产品运送给几个客户，他们的数据库表中存在哪些字段会有所不同`EmplTable`。

`EmplTable`这些是我的模型类中存在的字段：

```
 public string EmplId
    {
        get { return this.emplId; }
        set { if (this.emplId != value) { this.emplId = value; RaisePropertyChanged("EmplId"); } }
    }

    public string Name
    {
        get { return this.name; }
        set { if (this.name != value) { this.name = value; RaisePropertyChanged("Name"); } }
    }

    //Bare NAV_Name og ikke Name når axaptaversjonen ikke er 4.1
    public string NAV_Name
    {
        get { return this.nav_Name; }
        set { if (this.nav_Name != value) { this.nav_Name = value; RaisePropertyChanged("NAV_Name"); } }
    }

    public string DataareaId
    {
        get { return this.dataareaId; }
        set { if (this.dataareaId != value) { this.dataareaId = value; RaisePropertyChanged("DataareaId"); } }
    }

    public string NAV_StampId
    {
        get { return this.nav_StampId; }
        set { if (this.nav_StampId != value) { this.nav_StampId = value; RaisePropertyChanged("NAV_StampId"); } }
    } 
```

但是一个客户没有该`Nav_Name`字段，例如其他客户没有 Name 字段。我当然可以做一些 ifs 和东西，并为不同的`EmplTable`版本创建不同的模型类，并将当前客户的正确表映射到`EmplTable`. 但是，如果我可以指定其中一些字段不存在或某些字段不是强制性的，那就太好了。

我没有对不同客户中不存在的字段进行查询`EmplTable`，但我仍然收到这些“无效的列名”错误。

例如，如果我在执行此查询时`EmplTable`数据库中不包含，我会得到无效的列名：`Nav_name`

```
 public EmplTable GetByIdAndFirma(string id, string firma)
    {
        return this.context.Employees.Where(p => p.EmplId == id && p.DataareaId == firma).FirstOrDefault();
    } 
```

我猜这是因为实体框架的机制什么的，但是有什么设置可以让我指定某些字段不是强制性的吗？

# weka - 属性选择的Weka输出

> ID：10601574
> 
> 赞同：0
> 
> 时间：2012-05-15T13:19:09.570
> 
> 标签：weka

我正在使用 weka 从我的数据集中选择属性，但我不明白一件事：例如，我在使用 InfoGainAttributeEval + Ranker 选择属性后有这个输出

```
Ranked attributes:
 0.354       1 attr12
 0.333      46 attr4
 0.316      75 attr7
 0.304      96 attr1 
```

好吧，我知道第一个值是信息增益，但是“1 attr12”是什么意思？那个数字“1”是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:47:51.080

解决了！“1 attr12”是第一个属性，名为“attr12”。因此，“1”是属性的索引.. 46 是属性“attr4”的索引，依此类推..

# javascript - 将变量作为参数从一个函数传递给多个函数

> ID：10601577
> 
> 赞同：1
> 
> 时间：2012-05-15T13:19:19.333
> 
> 标签：javascript

在我的脚本中，我有一个函数`createEl()`，我在其中声明 2 个变量并调用 2 个其他函数，将这些声明的变量传递给这 2 个函数。

通过单击一个链接，第一个功能应该将 10px 添加到`divp`'s 高度。通过单击另一个链接，第二个函数应该从`div`的高度中减去 10px。

虽然它没有按预期工作。我相信我必须以某种不同的方式从我的第一个函数中调用这两个函数？现在的结果是，无论我点击哪个链接，那 10px 总是被扣除。请帮忙。

PS我正在寻找一个没有全局变量的选项，而只是将变量作为参数从一个函数传递给多个函数。

HTML：

```
<a href="" onclick="createEl();return false;">Larger</a>&nbsp;&nbsp;
<a href="" onclick="createEl();return false;">Smaller</a>

<div id='box'></div> 
```

JavaScript：

```
function createEl() {
    var x = document.getElementById('box');
    var h = x.offsetHeight;

    large(x,h);
    small(x,h);
}

function large(x,h) {
    x.style.height = h + 10 + "px";
}

function small(x,h) {
    x.style.height = h - 10 + "px";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:24:04.380

更新您的 HTML 以将标识符参数发送到函数调用。

```
<a href="" onclick="createEl('large');return false;">Larger</a>&nbsp;&nbsp;
<a href="" onclick="createEl('small');return false;">Smaller</a>
<div id='box'></div> 
```

JavaScript：

```
function createEl(funcName){

        var x = document.getElementById('box');
        var h = x.offsetHeight;

        if(funcName =="large") large(x,h); //depending on the parameter call the required function
        else small(x,h);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:28:30.840

您可以将偏移量作为参数传递，并创建一个通用`changeHeight(offset)`函数。

这符合您的要求吗？

HTML：

```
<a href="" onclick="changeHeight(10);return false;">Larger</a>&nbsp;&nbsp;
<a href="" onclick="changeHeight(-10);return false;">Smaller</a>
<div id='box'></div> 
```

JavaScript：

```
changeHeight(offset) {
    var x = document.getElementById('box');
    x.style.height = (x.offsetHeight + offset) + "px";
} 
```

# wcf - 无法获取选定的列表框

> ID：10601579
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:19:29.367
> 
> 标签：wcf, windows-phone-7, data-binding, casting, windows-phone-7.1

这是我要提取享受ID的图像

![我要提取的内部数据细节](../Images/574321b45e88951d01df5043b802ff63.png)

我想从数据有界的选定项目中提取享受ID，但由于invalidCastException，我尝试了web中可用的所有方法仍然无法提取它。

```
 private void listBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        SuperData data = (sender as ListBox).SelectedItem as SuperData;
        ListBoxItem selected = this.listBox1.ItemContainerGenerator.ContainerFromItem(data) as ListBoxItem;
    } 
```

我试过这个和 e.AddedItem[0] 但仍然无法得到它。

```
<Grid>
                <ListBox HorizontalAlignment="Stretch" Margin="0,0,0,0" Name="listBox1" VerticalAlignment="Stretch" SelectionChanged="listBox1_SelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Height="132">
                                <Image Source="{Binding image}" Height="73" Width="73" VerticalAlignment="Top" Margin="0,10,8,0"/>
                                <StackPanel Width="370">
                                    <TextBlock Text="{Binding title}" Foreground="#FFC8AB14" FontSize="28" />
                                    <!--TextBlock Text="{Binding Message}" TextWrapping="Wrap" FontSize="24" /-->
                                    <TextBlock Text="{Binding description}" TextWrapping="Wrap" FontSize="24" />
                                    <TextBlock Text="Test" TextWrapping="Wrap" FontSize="24" />
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid> 
```

这是我绑定数据的 UI 部分。WCF 的返回是`List<REData>`数据类型，我只是用 . 绑定到列表框`listBox1.ItemsSource = e.Result`。

```
 public int category { get; set; }
    public int categoryField { get; set; }
    public string description { get; set; }
    public string descriptionField { get; set; }
    public int enjoymentID { get; set; }
    public int enjoymentIDField { get; set; }
    public string image { get; set; }
    public string imageField { get; set; }
    public object PropertyChanged { get; set; } << i don't know what is this
    public string title { get; set; }
    public string titleField { get; set; } 
```

这也是 e.AddedItem[0] 中的内容：

![在此处输入图像描述](../Images/b013d97eefd5b1a70bf6f6127599d9da.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:46:24.550

从您的屏幕截图中，数组第一项的类型是 RoyalEnjoyment.REServiceReference.REData，如果您将 e.AddedItems[0] 转换为这种类型，那么您应该能够访问各种属性值。

例如，RoyalEnjoyment.REServiceReference.REData x = (RoyalEnjoyment.REServiceReference.REData)e.AddedItems[0];

# build - 如何删除 AppHarbor 上的先前版本？

> ID：10601580
> 
> 赞同：1
> 
> 时间：2012-05-15T13:19:36.180
> 
> 标签：build, appharbor

我在 AppHarbor 上有几个构建，它们在构建时无法正常工作。我想删除它们，并且列表中只有“好”的版本。如何删除构建？

我看到的只是“部署”按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:31:28.213

目前没有办法从 AppHarbor 中清除构建。你的用例是什么？

# hibernate - Hibernate - 如何在插入时忽略未映射的字段

> ID：10601581
> 
> 赞同：0
> 
> 时间：2012-05-15T13:19:39.993
> 
> 标签：hibernate, spring-mvc

亲爱的所有休眠开发人员，
我在我的应用程序中使用了以下休眠 hbm2java 类。当我通过连接两个表从数据库中获取数据时，我需要**名称字段。**（我必须在 UI 的网格中显示此数据。）
但是，当我尝试将记录插入**rxJournal**表时出现问题。
错误是：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'name' in 'field list' 
```

我想在使用休眠插入或更新记录时忽略/跳过“名称”字段。以下是我的 HBM 课程：

```
@Entity
@Table(name = "rxJournal", catalog = "Company")
public class RxJournalBean implements java.io.Serializable {

private Integer rxJournalId;
private String entryMemo;
private String name;

    ....

@Id
@GeneratedValue(strategy = IDENTITY)
@Column(name = "rxJournalID", unique = true, nullable = false)
public Integer getRxJournalId() {return this.rxJournalId;}
public void setRxJournalId(Integer rxJournalId) {this.rxJournalId = rxJournalId;}

@Column(name = "EntryMemo")
public String getEntryMemo() {return this.entryMemo;}
public void setEntryMemo(String entryMemo) {this.entryMemo = entryMemo;}

public String getName() {return name;}
public void setName(String name) {this.name = name;}
} 
```

我可以通过单独删除名称字段来创建另一个 bean，但是我不想使用冗余代码。请给我任何建议。

如果我问任何重复的问题，请忽略并指出正确的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T13:24:57.063

如果我理解正确，您希望在您的实体中有一个 name 属性，但您希望这个属性是非持久的（即被 Hibernate 完全忽略）。

如果是这样，这就是 @Transient 的用途：

```
@Transient
public String getName() {
    return name;
} 
```

对于 Hibernate 从数据库加载的每个实例，name 属性当然是 null。如果您分配一个，它只会有一个值。

# java - 池中的字符串对象

> ID：10601593
> 
> 赞同：3
> 
> 时间：2012-05-15T13:20:15.423
> 
> 标签：java, string, garbage-collection

> **可能重复：**
> [垃圾收集和字符串](https://stackoverflow.com/questions/2202162/garbage-collection-and-strings)

放置在字符串池区域中的字符串字面量对象是否有资格进行垃圾回收？

# python - 填充 Python 字典

> ID：10601601
> 
> 赞同：9
> 
> 时间：2012-05-15T13:20:42.417
> 
> 标签：python, dictionary

嗨，我正在构建一个字典，其中每个键是客户名称，每个值是每个客户购买的元组列表，如下所示：（产品，数量）。例如：

```
{'customer1': (('milk', 3), ('bread', 5), ('eggs', 2)),
 'customer2': (('cheese', 2), ('cereal', 7))} 
```

我正在根据 SQL 查询的结果填充字典。作为一个不熟悉 Python 的 Java 程序员，有人可以建议“pythonic”的方式来做到这一点吗？查询中的每一行都包含客户名称、产品、数量。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T13:26:22.703

首先，我会使用列表而不是元组作为字典条目。主要区别在于列表是可变的，而元组不是。

我认为[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)对这个问题有好处：

```
from collections import defaultdict

customers = defaultdict(list) 
```

您可以像这样添加条目（当然，在您的情况下，您会在循环中执行此操作）：

```
customers['customer1'].append(('milk', 3))
customers['customer1'].append(('bread', 5))
customers['customer2'].append(('cereal', 7)) 
```

结果是：

```
>>> print dict(customers)
{'customer1': [('milk', 3), ('bread', 5)], 'customer2': [('cereal', 7)]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:26:19.530

你的内部结构应该是一个列表，而不是一个元组，因为结构是同质的。

```
{'customer1': [('milk', 3), ('bread', 5), ('eggs', 2)],
 'customer2': [('cheese', 2), ('cereal', 7)]} 
```

这也将允许您`.append()`在它们上使用，并且您可以使用`collections.defaultdict`空列表开始每个值以进一步简化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:23:33.263

我希望您有一个来自数据库的列表列表，例如

```
rows = [('customer1', ('milk', 2)), ('customer12', ('bread', 4))] # etc etc 
```

然后你可以简单地做。

```
for row in rows:
    cust_dict[row[0]] = row[1:] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T13:25:35.430

这是我要做的

```
from collections import defaultdict

data = (
    ('customer1', 'milk', 3),
    ('customer1', 'bread', 5),
    ('customer1', 'eggs', 2),
    ('customer2', 'cheese', 2),
    ('customer2', 'cereal', 7),
    )

result = defaultdict(list)
for name, what, amount in data:
    result[name].append((what, amount))

from pprint import pprint
result = dict(result)
pprint(result) 
```

哪个打印

```
{'customer1': [('milk', 3), ('bread', 5), ('eggs', 2)],
 'customer2': [('cheese', 2), ('cereal', 7)]} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T13:27:02.007

您可以使用内置的[defaultdict](http://docs.python.org/library/collections.html)并将其实例化为列表，并在循环中附加您想要的字段，例如。如果您想要除第一个元素之外的整行，您可以这样做`your_defaultdict_instance[row[0]].append(row[1:])`，这将整齐地构建所有内容。

# eclipse - 执行部分中的 Maven POM 错误

> ID：10601606
> 
> 赞同：0
> 
> 时间：2012-05-15T13:21:02.350
> 
> 标签：eclipse, maven

这主要是一个小烦恼。在我的 Maven pom.xml 文件中，我指定了 antrun 插件，因此需要一个部分。这很好用，但是当我在其中嵌套一个部分时，Eclipse 会抛出一条错误消息。

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.3</version>
    <executions>
        <execution> <!-- Eclipse puts an error here -->
        <!-- snip -->
        <goals>
            <goal>run</goal>
        </goals>
    </execution>
</executions> 
```

所以，可能是我犯了一个愚蠢的错误，我需要在 M2E 中配置一些东西，等等。

Eclipse 是 3.6，带有 M2E 插件。

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:35:09.050

很高兴看到此错误消息，但我认为这是经典的 m2e“插件执行未涵盖”问题。不幸的是，除了忽略这一点，你什么也做不了。

阅读[本文](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)了解详情。

# asp.net-mvc-3 - MVC .NET 单元测试：如何测试从控制器发送到视图的参数

> ID：10601607
> 
> 赞同：3
> 
> 时间：2012-05-15T13:21:04.577
> 
> 标签：asp.net-mvc-3, unit-testing, mstest, controllers

我是 MVC .NET 的新手（我之前曾在 Ruby On Rails 上工作过）。

我想知道如何编写一个单元测试来检查是否将正确的参数传递到视图中。

```
public ActionResult Users()
{
  var users = userManager.GetUsers();
  return View(users);
} 
```

如何使用用户列表测试 View 是否已通过？我只是模拟 View 静态方法还是有更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T13:26:33.573

您应该模拟该`userManager.GetUsers`方法，然后断言控制器操作返回了一个 ViewResult，其模型等于模拟的用户列表。当然，为了能够模拟该`userManager.GetUsers`方法，该方法需要是虚拟的：

例如：

```
public class HomeController: Controller
{
    private readonly IUsersManager _usersManager;
    public HomeController(IUsersManager usersManager)
    {
        _usersManager = usersManager;
    }

    public ActionResult Users()
    {
        var users = _usersManager.GetUsers();
        return View(users);
    }    
} 
```

现在在您的单元测试中，您可以提供`IUsersManager`接口的模拟实例并定义`GetUsers`方法的期望。

使用诸如[Rhino Mocks](http://hibernatingrhinos.com/open-source/rhino-mocks)之类的模拟框架是一项微不足道的任务：

```
[TestMethod]
public void Users_Action_Should_Query_The_UserManager_Repository_And_Pass_The_Result_To_The_View()
{
    // arrange
    var expectedUsers = new User[] { new User() };
    var usersManagerStub = MockRepository.GenerateStub<IUsersManager>();
    usersManagerStub.Stub(x => x.GetUsers()).Return(expectedUsers);
    var sut = new HomeController(usersManagerStub);

    // act
    var actual = sut.Users();

    // assert
    Assert.IsInstanceOfType(actual, typeof(ViewResult));
    var viewResult = actual as ViewResult;
    Assert.AreEqual(expectedUsers, viewResult.Model);
} 
```

并使用[MVCContrib.TestHelper](http://mvccontrib.codeplex.com/wikipage?title=TestHelper)它为您提供更流畅的语法，简化了标准 HTTP 工件的模拟，例如上下文、会话、cookie ......：

```
[TestMethod]
public void Users_Action_Should_Query_The_UserManager_Repository_And_Pass_The_Result_To_The_View()
{
    // arrange
    var expectedUsers = new User[] { new User() };
    var usersManagerStub = MockRepository.GenerateStub<IUsersManager>();
    usersManagerStub.Stub(x => x.GetUsers()).Return(expectedUsers);
    var sut = new HomeController(usersManagerStub);

    // act
    var actual = sut.Users();

    // assert
    actual
        .AssertViewRendered()
        .WithViewData<User[]>()
        .ShouldEqual(expectedUsers, "");
} 
```

# xpages - XPage 强制过期：-1 标头

> ID：10601608
> 
> 赞同：0
> 
> 时间：2012-05-15T13:21:06.237
> 
> 标签：xpages, lotus-domino

我有一个“无头”XPage（返回 JSON），并且正在设置 Expires 标头以强制浏览器在至少一个小时内不再请求 JSON 提要。我在 AfterRenderResponse 事件中有如下代码 - 但查看响应标头，我看到了我的 Expires 标头，但还看到了 Domino 似乎强制的附加“Expires：-1”标头。我在 8.5.1 和 8.5.3 服务器上看到了这一点。这是已知的错误吗？有什么方法可以阻止 Domino 添加 expires 标头？

```
// Get handle to output writer - we will sender JSON text directly 
var externalContext = facesContext.getExternalContext();
var writer = facesContext.getResponseWriter();
var response = externalContext.getResponse();

// set headers
response.setContentType("application/json"); 
var now = new Date(); 
response.setDateHeader ("Expires", now.getTime() + (60*60*1000));
response.setHeader("Cache-Control", "public");

// Output it
writer.write(getJSONResponse ());
writer.endDocument();
facesContext.responseComplete(); 
```

我在回复中看到的是：

```
HTTP/1.1 200 OK
Server: Lotus-Domino
Date: Tue, 15 May 2012 13:17:57 GMT
**Expires: -1  <--- WHY????**
Content-Type: application/json;charset=UTF-8
Expires: Tue, 15 May 2012 14:17:52 GMT
Cache-Control: public
Content-Length: 901 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:16:41.647

如果您将其更改为使用 beforeRenderResponse 事件，则 -1 expires 标头将消失。

这可能与在部分响应之后触发的 afterRenderResponse 事件有关，因此 -1 expires 标头已创建。

# error-handling - 故意违反 yacc 规则

> ID：10601611
> 
> 赞同：1
> 
> 时间：2012-05-15T13:21:12.830
> 
> 标签：error-handling, grammar, yacc

在 yacc/bison 语法中，是否有办法从中间规则操作中完全丢弃规则，但没有错误（以及对 yyerror 的调用），以便其他选项仍然有效（类似于 'reject'柔性）？

假设 'num' 有一个整数值，那么下面的规则将为偶数和奇数产生式定义不同的语法

```
rule :   num { if (($1 & 1) == 1) reject; } a b c 
       | num { if (($1 & 1) == 0) reject; } d e ; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:49:32.217

与 flex 不同，Yacc 不进行任何类型的回溯，因此在运行时没有其他选项——要么规则运行正确，要么出现错误。您可以使用`YYREJECT`宏完全退出解析器（从 1 返回`yyparse`），但这可能不是您想要的。

如果你要使用[btyacc](http://www.siber.com/btyacc/)`YYERROR` （它支持回溯），你可以通过调用一个试探性的动作来做你想做的事。这将导致它回溯并尝试不同的替代方案，并且只有在没有替代方案时才会实际给出语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:53:34.623

您可以使用中间规则操作将令牌推送到解析堆栈，然后可以通过另一个规则对其进行评估，这将使您能够对解析结果进行编程选择。

[http://www.gnu.org/software/bison/manual/html_node/Mid_002dRule-Actions.html](http://www.gnu.org/software/bison/manual/html_node/Mid_002dRule-Actions.html)

> 中间规则操作本身算作规则的组成部分之一。当同一规则后面有另一个动作时（通常最后有另一个动作），这会有所不同：在计算出在 $n 中使用哪个数字 n 时，您必须计算这些动作以及符号。
> 
> 中间规则动作也可以具有语义值。该操作可以通过对 $$ 的赋值来设置其值，并且规则中稍后的操作可以使用 $n 引用该值。由于没有符号来命名动作，所以没有办法提前为值声明数据类型，所以每次引用都必须使用'$<...>n'构造来指定数据类型这个值。

因此，可能可以这样做，但与 flex 中的方式不同。这样做可能有点骇人听闻，因为您实际上所做的是破坏语法的上下文无关性质。

# tsql - 如何在给定行周围选择 n 行

> ID：10601612
> 
> 赞同：2
> 
> 时间：2012-05-15T13:21:17.050
> 
> 标签：tsql, select

我正在尝试选择一行，以及它之前和之后的 5 行，并在单个选择语句中返回它们。我什至从哪里开始这样做？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:28:53.430

您可以使用`cte`with`ROW_NUMBER`函数：

```
WITH cte AS(
    SELECT t.*
    ,      ROW_NUMBER()OVER(ORDER BY OrderColumn)AS RowNum
    FROM Table t
)
SELECT cte.* FROM cte
WHERE RowNum >= @rowToSelect - 5 AND RowNum <= @rowToSelect + 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:27:57.513

您可以使用[ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)快速解决问题。

使其成为子查询的结果，然后从该查询中选择所需行号的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:25:43.100

您可以使用`UNION`查询，例如（伪代码）：

```
SELECT TOP 6 * --include row and 5 rows before
FROM table1
WHERE column1 >= @value
UNION
SELECT TOP 5 *
FROM table1
WHERE column1 < @value 
```

# asp.net - 从 URL 检索 ActionLink 参数

> ID：10601616
> 
> 赞同：0
> 
> 时间：2012-05-15T13:21:25.983
> 
> 标签：asp.net, .net, asp.net-mvc-3, viewbag

我有以下内容：

```
@Html.ActionLink("Customer Number", "Search", new { Search = ViewBag.Search, q = ViewBag.q, sortOrder = ViewBag.CustomerNoSortParm, }) 
```

两个 viewbag 属性都来自 URL：

```
http://localhost:51488/Home/Search?Search=Postcode&q=test&sortOrder=CustomerNo 
```

但是生成的 URL 是：

```
http://localhost:51488/Home/Search?sortOrder=CustomerNo 
```

它没有拾取任何一个 ViewBag 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:25:10.063

ViewBag 不是来自 URL。它来自控制器动作。如果要获取查询字符串参数或作为 POST 请求一部分的参数，可以使用`Request`：

```
@Html.ActionLink(
    "Customer Number", 
    "Search", 
    new { 
        Search = Request["Search"], 
        q = Request["q"], 
        sortOrder = Request["CustomerNoSortParm"] 
    }
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:34:09.607

ViewBag 让您将数据从控制器共享到视图。

如果您想使用来自 URL 的数据来创建链接，则需要使用控制器操作的 FormCollection（如果您在控制器内构建链接）或直接使用 HttpContext（可从视图访问）

```
System.Web.HttpContext.Current.Request.QueryString["Search"] 
```

# java - “PrinterException：纸张的可成像宽度太小”我可以看到问题所在，但我该如何解决？

> ID：10601620
> 
> 赞同：0
> 
> 时间：2012-05-15T13:21:35.817
> 
> 标签：java, printing, thermal-printer

当我尝试在我当前的大学项目中为特定标签打印机打印某些东西时，我遇到了这个错误：

```
java.awt.print.PrinterException: Paper's imageable width is too small.
    at sun.print.RasterPrinterJob.printPage(Unknown Source)
    at sun.print.RasterPrinterJob.print(Unknown Source)
    at sun.print.RasterPrinterJob.print(Unknown Source)
    at Printer.print(Printer.java:91)
    at Printer.<init>(Printer.java:43)
    at VisitorDBTest.main(VisitorDBTest.java:10) 
```

但我看不出原因。我有这台特定打印机的确切标签代码，标签宽度和高度是正确的。我将可成像尺寸设置为精确的标签尺寸（以 1/72 英寸为单位），然后我尝试将其设置得更小，但没有成功。当我在 A4 页面上使用普通喷墨打印时，此代码工作正常。我只在尝试打印到 DYMO 450 标签打印机（使用不同的 Paper 和 PageFormat 对象）时收到错误消息。看看谷歌的结果，我似乎是历史上唯一一个遇到这个错误的人。

编辑：将可成像宽度打印到屏幕后，我得到以下结果：

```
Paper imageable width is 196.0
PageFormat imageable width is 151.0
PrinterJob imageable width is -65.0267716535433 
```

我的理解是，PageFormat 从 Paper 中获取可成像宽度，PrinterJob 从 PageFormat 获取可成像宽度。我显然在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T12:53:52.787

我解决它添加

```
 PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();

    aset.add(OrientationRequested.PORTRAIT);
    aset.add(MediaSizeName.INVOICE);

        job.print( aset); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:47:04.840

我对 Dymo 420P 也有同样的问题。

尝试将可成像区域设置为与纸张相同的大小和原点 0,0。然后`PrinterJob.printDialog()`，`PrinterJob.validatePage()`使用您的页面格式调用。它将返回具有适当可成像区域的有效页面格式。

# php - 从 id 检索用户信息

> ID：10601624
> 
> 赞同：1
> 
> 时间：2012-05-15T13:21:54.323
> 
> 标签：php, mysql, database

我正在开发一个网络应用程序，但遇到了一个小问题。我在数据库中有一个表，persons，它由以下字段组成：id、位置（在公司中）、用户名、名字、姓氏。我正在处理一个 edit_user 页面。我有一个主页列出所有用户的名字+姓氏。然后我可以单击名称，这会将我带到与该用户对应的 edit_user 页面。但是，我在网站上所做的更新不会发送到数据库（参见下面的代码）。

```
//Inserting updates into database
        $query = "UPDATE person SET
            privilege  = '{$privilege}',
            nexus = '{$nexus}',
            firstname ='{$firstname}',
            lastname = '{$lastname}'"; 
        $query .="  WHERE id={$personid}";
        $result = mysql_query($query,$connection); 
        if (mysql_affected_rows() == 1) { 
            $message = "User was successfully updated"; 
        } else { 
            $message = "User was not updated";
            $message .= "<br/>" .mysql_error();
        } 
```

我的预感是 {$personid} 有问题，其定义如下：

```
function find_selected_user() {
    global $user;
    if (isset($_GET['personid'])) { 
        $personid = $_GET['personid'];
        return $personid
    } else {
        $user = NULL; 
    }
} 
```

（上面的函数*应该*返回一个 $user 信息的数组）请帮助——我被困住了！我敢肯定这很简单，但我想了太久了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:25:36.750

你忘了结局；这里的字符：

```
return $personid 
```

应该：

```
return $personid; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:28:16.957

您可以将完整的`$query`变量回显到屏幕上或将其保存在日志中吗？

复制此输出并尝试使用 mysql 命令行或 phpmyadmin 来测试 sql 查询。

或者也许`echo mysql_error();`看看是否有错误被报告。

也许您的`{$personid}`变量没有按照您的想法填充。

# android - 当我在列表视图中显示数据时运行时错误

> ID：10601632
> 
> 赞同：0
> 
> 时间：2012-05-15T13:22:35.000
> 
> 标签：android

嗨，我刚刚遇到一个问题，我只是构建了一个演示应用程序，其中通过 AsyncTask 在列表视图中调用 json 中的 rest api 和 sho 数据，这是我的代码，请建议我在代码包 test.rest.api 中佩戴的位置；

```
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*; 

public class showalbooks extends Activity implements OnClickListener {
List<String> list1 = new ArrayList<String>();
String returnString="";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   // setContentView(R.layout.showalbooks);

}

@Override
public void onClick(View arg0) {

    new LongRunningGetIO().execute();
}

private class LongRunningGetIO extends AsyncTask <Void, Void, String> {

    protected String getASCIIContentFromEntity(HttpEntity entity) throws IllegalStateException, IOException {
       InputStream in = entity.getContent();
         StringBuffer out = new StringBuffer();
         int n = 1;
         while (n>0) {
             byte[] b = new byte[4096];
             n =  in.read(b);
             if (n>0) out.append(new String(b, 0, n));
         }
         return out.toString();
    }

    @Override
    protected String doInBackground(Void... params) {
         HttpClient httpClient = new DefaultHttpClient();
         HttpContext localContext = new BasicHttpContext();
         HttpGet httpGet = new HttpGet("http://192.168.1.156/recess/document/document.json");
         HttpClient client = new DefaultHttpClient();
         HttpResponse response=null;
         try{
          response = client.execute(httpGet);}
         catch(Exception e){}
         System.out.println(response.getStatusLine());
         String text = null;
         try {
                response = httpClient.execute(httpGet, localContext);
               HttpEntity entity = response.getEntity();
               text = getASCIIContentFromEntity(entity);
         } catch (Exception e) {
             return e.getLocalizedMessage();
         }
         String var =text;             
         try{

          JSONObject jObj = new JSONObject(var);
          JSONArray jArray = jObj.getJSONArray("document");
             for(int i=0;i<jArray.length();i++){

                     JSONObject json_data = jArray.getJSONObject(i);
                     Log.i("log_tag","id: "+json_data.getString("id")+
                             ", title: "+json_data.getString("title")
                     );
                     list1.add(json_data.getString("title"));

                     returnString += "\n" +"id:"+ json_data.getString("id")+" "+"Title:"+ json_data.getString("title");

                     }

     }
     catch(JSONException e){
             Log.e("log_tag", "Error parsing data "+e.toString());
     }
         return returnString;

    }   

    //@SuppressWarnings({ "unchecked", "rawtypes" })
    protected void onPostExecute(String results) {
        if (results!=null) {

            setListAdapter(new ArrayAdapter(showalbooks.this, R.layout.showalbooks, list1));

        }

    }
}

public void setListAdapter(ArrayAdapter<String> arrayAdapter) {
    // TODO Auto-generated method stub

}

  } 
```

这是显示错误的日志猫

```
05-15 18:27:19.582: E/AndroidRuntime(610): FATAL EXCEPTION: main
05-15 18:27:19.582: E/AndroidRuntime(610): java.lang.RuntimeException: Unable to instantiate   activity    ComponentInfo{com.google.android.gm.contentprovidertest/com.google.android.gm.contentprovidertest.Main}: java.lang.ClassNotFoundException: com.google.android.gm.contentprovidertest.Main
05-15 18:27:19.582: E/AndroidRuntime(610):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
 05-15 18:27:19.582: E/AndroidRuntime(610):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-15 18:27:19.582: E/AndroidRuntime(610):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-15 18:27:19.582: E/AndroidRuntime(610):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-15 18:27:19.582: E/AndroidRuntime(610):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-15 18:27:19.582: E/AndroidRuntime(610):  at android.os.Looper.loop(Looper.java:137)
05-15 18:27:19.582: E/AndroidRuntime(610):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-15 18:27:19.582: E/AndroidRuntime(610):  at java.lang.reflect.Method.invokeNative(Native Method)
05-15 18:27:19.582: E/AndroidRuntime(610):  at java.lang.reflect.Method.invoke(Method.java:511)
05-15 18:27:19.582: E/AndroidRuntime(610):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-15 18:27:19.582: E/AndroidRuntime(610):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 05-15 18:27:19.582: E/AndroidRuntime(610):     at dalvik.system.NativeStart.main(Native Method)
 05-15 18:27:19.582: E/AndroidRuntime(610): Caused by: java.lang.ClassNotFoundException: com.google.android.gm.contentprovidertest.Main
  05-15 18:27:19.582: E/AndroidRuntime(610):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
  05-15 18:27:19.582: E/AndroidRuntime(610):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
   05-15 18:27:19.582: E/AndroidRuntime(610):   at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
  05-15 18:27:19.582: E/AndroidRuntime(610):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
    05-15 18:27:19.582: E/AndroidRuntime(610):  at   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
   05-15 18:27:19.582: E/AndroidRuntime(610):   ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:24:03.423

你必须在清单中写下你的“主要”类。
见：http: [//developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

# jsp - 根据 JSP 页面上的数据库条目检查复选框

> ID：10601635
> 
> 赞同：3
> 
> 时间：2012-05-15T13:22:49.707
> 
> 标签：jsp, jstl

这是我的复选框：

```
 <input type="checkbox" name="headC" id="headC" value="Head"> 
```

我有一个字符串变量`<%=msmtHead%>`，用于根据此逻辑确定是否选中了此复选框：`If (<%=msmtHead%> !="")`检查`else`不检查。

我该如何进行这项工作？我有几个这样的复选框需要类似地检查。

我的研究告诉我应该使用 JSTL，但我不知道如何使用`<c:if>`标签来测试字符串值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T14:27:05.840

您需要让 JSP`checked`相应地打印属性。

所以基本上，

```
<input type="checkbox" name="headC" id="headC" value="Head" <%= ("Head".equals(msmtHead) ? "checked" : "") %>> 
```

或与 EL

```
<input type="checkbox" name="headC" id="headC" value="Head" ${msmtHead == 'Head' ? 'checked' : ''}> 
```

# javascript - 单击行时如何突出显示JSF行

> ID：10601645
> 
> 赞同：1
> 
> 时间：2012-05-15T13:23:05.403
> 
> 标签：javascript, jsf

我有这个 JSF 表：

```
<h:dataTable id="itemsTable" 
    value="#{SelectionBean.selectedItems}" var="item"  >

<f:facet name="header">
  <h:outputText value="Items" />
</f:facet> 
<h:column>
  <f:facet name="header">
    <h:outputText value="Select" />
  </f:facet>
  <h:selectBooleanCheckbox value="#{item.selected}" />
</h:column>
<h:column>
  <f:facet name="header">
    <h:outputText value="name" />  
  </f:facet> 
    <h:outputText value="#{item.name}"></h:outputText>
</h:column>
</h:dataTable> 
```

我想在单击时突出显示表格的行。有没有一种 JavaScript 代码仅在单击复选框时才突出显示行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:01:36.843

您显示的上述代码是一个普通的 Java Server Faces(XHTML) 代码。所以最终它呈现为 HTML。在 HTML 中，如果数据表在 处呈现，则借助 jquery，您可以借助指定的 ID 或使用标签名称选择轻松突出显示它。[如果您在突出显示此链接时需要 jquery 的进一步帮助，则jQuery highlight table row](https://stackoverflow.com/questions/759475/jquery-highlight-table-row)可能很有用。

如果您有机会使用 Rich faces，您可以使用 rich:jquery 标签来实现相同的目的，而不是使用外部 javascript 文件。

PS 如果您使用带有丰富面孔的外部文件使用 jquery，请尝试在代码中使用 jquery.noconflict() 方法，因为 JSF 中的prototype.js 可能与您的代码冲突。

祝你好运！

* * *

**更新**

可能此代码段可能对您有所帮助

```
<script type="javascript">

if($('.checkboxClass').attr('checked','checked')){

  $('tr').css('background-color','yellow');

 }
</script> 
```

# java - 如何在 java fx 2 中更改 TextField 的文本

> ID：10601648
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:23:09.850
> 
> 标签：java, nullpointerexception, textfield, javafx-2

我有一个`TextField`，其中有一些文本，但我想在某些事件上更改该文本，但我得到了`NullPointerException`.

我正在使用`setText()`方法，但仍然无法正常工作。我正在从其他类调用该函数。

有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T17:55:54.877

在控制器类定义的开头：

```
@FXML private TextField txtDescription; 
```

在初始化方法中，添加：

```
txtDescription = new TextField(); 
```

在作用于该文本字段的方法中，例如：

```
txtDescription.setText("This is my new text."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T11:13:18.443

确保您的**.fxml**文件中有一个 TextField 定义，其中包含以下内容：

```
 fx:id="myCoolTextField" 
```

如果没有，请使用以下内容在 display() 方法中初始化文本字段：

```
myCoolTextField = new TextField(); 
```

您还可以覆盖特殊的*initialize()*方法。每次更新场景时都会调用此方法。

```
@FXML
public void initialize() {
    myCoolTextField.setText("Here is my updated text.");
} 
```

# apache-flex - Flex/java Web 应用程序的 Tomcat 重定向

> ID：10601658
> 
> 赞同：0
> 
> 时间：2012-05-15T13:23:46.143
> 
> 标签：apache-flex, tomcat, redirect

在问我的问题之前，让我解释一下上下文。

**上下文：**
我有一个使用 LiveCycle Data Services 在 Flex 和 Java 中创建的 Web 应用程序。该应用程序在 Tomcat 服务器上运行。假设应用程序的上下文根是 /myApp。加载 server:port/myApp 时，Tomcat 加载 myApp.html，它是应用程序的包装器。

**要求：** 为了加载不同语言的应用程序，我需要 swf 读取一些 flashvars 来设置加载语言和其他 sutff。加载语言应根据 url 设置。

**我想做但不知道如何做：** 我认为我应该为 swf 提供不同的 html 包装器，以便每个 html 包装器将不同的 flashvars 传递给 swf。但不必为每种语言部署战争。
然后，部署的战争应包含 myAppFR.html、myAppEN.html、myAppJP.html... 每个包装器都指向相同的 swf，但传递不同的 flashvar。我希望 server:port/myAPP/FR 加载 myAppFR.html，server:port/myApp/EN 应该加载 myAppEN.html，依此类推。

我不知道我说得够不够清楚。我脑子里不太清楚，因为我真的不知道该怎么做，或者是否有可能！

因此，如果需要，请随时询问更多详细信息，并随时提供您的任何线索:)

非常感谢。

（PS：我不是Java专业的，所以如果可以的话，越详细越好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:57:58.907

您是否在会话中跟踪用户的语言环境或类似的东西？如果是这样，您可以使用 JSP（或其他一些动态内容生成框架）来发出标签，其中包括您想要的任何变量——包括用户的语言——并且只使用会话语言环境中的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:45:16.280

我终于用JS做到了：

```
function getBrowserLangSetting() {
        if(navigator.language)
            return navigator.language

        if(navigator.userLanguage)
            return navigator.userLanguage
} 
```

这足以让我设置默认语言。

# c# - IndexAt 条件

> ID：10601664
> 
> 赞同：0
> 
> 时间：2012-05-15T13:24:13.450
> 
> 标签：c#, .net, string

我有一个这样的字符串：

```
arc boat arc ship arc ship ship arc boat arc 
```

我需要找到跟随“船”的第一个“弧”的索引。

在 C# 中满足此条件的最有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:32:00.297

如果您的意思是“立即”，则此方法有效：

```
myString.IndexOf("boat arc") + 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:25:57.147

```
str.IndexOf("arc", str.IndexOf("boat")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:36:11.000

正则表达式是你的朋友

```
Regex reg = new Regex(@".*?boat\s*?(?=arc)");
Match match = reg.Match("arc boat arc ship arc ship ship arc boat arc");

int index = match.Length; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:46:11.273

您可以使用此正则表达式：

```
^(arc\sboat) 
```

# .net - 如何保存生成的符号文件？

> ID：10601667
> 
> 赞同：3
> 
> 时间：2012-05-15T13:24:20.330
> 
> 标签：.net, visual-studio-2010, symbols, visual-studio-debugging

我正在使用[Project White](http://white.codeplex.com/)测试我的应用程序。该项目的二进制文件包括 Castle 项目的 DLL：Castle.DynamicProxies2.dll（或类似的东西）。不幸的是，没有为此 DLL 提供符号 (PDB) 文件。一堆其他 DLL 确实有自己的符号文件。

当我运行我的 UITest 时，为这个 Castle DLL 生成符号文件需要很长时间。我想将这个生成的 DLL 保存在某个地方，这样它就不必一直生成它。

我的 Visual Studio 设置中有一个符号缓存文件夹，当我运行应用程序并按“加载所有符号”时，我收到一个消息框，告诉我它正在下载 Castle DLL 的符号文件。但是，它没有出现在我的缓存文件夹中（可能是因为它是专有的非 Microsoft DLL）。“总是在模块旁边加载符号”选项已打开。如果我关闭它，甚至我自己的项目的符号都不会加载。Castle DLL 被复制到输出文件夹，否则它甚至不会运行。

有没有办法保留这个自动生成的符号文件而不是每次都创建它？我查看了临时文件夹，但找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:17:59.070

这些类型的文件夹本身有一些与之相关的错误。从以前的经验中发现，第一个尝试的解决方案应该是重新启动计算机，然后重新打开 VS。该文件夹应返回其标准设置并正常运行（一段时间）。仍然没有找到导致文件夹错误行为的 VS 操作。[http://msdn.microsoft.com/en-us/library/x54fht41.aspx](http://msdn.microsoft.com/en-us/library/x54fht41.aspx)是我目前正在搜索的地方，如果你在那里看到我没有看到的东西。

# jsf-2 - Liferay 6.0.6portal + 6.1 插件 SDK 中的服务构建器不起作用

> ID：10601671
> 
> 赞同：0
> 
> 时间：2012-05-15T13:24:38.040
> 
> 标签：jsf-2, liferay-6

您好，我正在 Liferay 6.0.6 门户 + 6.1 插件 SDK 环境中开发 Liferay faces portlet。我正在成功运行 portlet。但是当我尝试运行服务生成器时，它会引发错误。谁能帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:19:46.637

我们遇到了同样的问题，我的同事建议的解决方案是使用插件 SDK 6.1 设置支持 jsf 的新项目，然后将其移回插件 SDK 6.0.6。

在 6.0.6 上，Service Builder 工作正常，而 JSF 仍然正常工作，因为它是使用插件 SDK 6.1 正确设置的

# java - 使用java发布带有包含LINE BREAKS的字符串参数的url

> ID：10601672
> 
> 赞同：14
> 
> 时间：2012-05-15T13:24:41.223
> 
> 标签：java

我想以以下格式从我的 JAVA 应用程序发送 SMS：
名称：客户名称
ConfNO：1234
日期：2012-05-15
NoOfPax：7
由于我使用外部短信网关，我需要将其作为 URL 从应用程序发布。当我收到短信时，我看不到换行符，而是显示文本 \n。请帮助。我的代码是

```
String senderid = "SMSALERT";
    String to = "97112345678";
    String text = "Reservation INFO\nName:Customer Name\nConfNO: KN1234\nTime: 12:00PM\n#Pax:5\nThank You for Choosing US";
    String type = "text";
    String ppgHost = "www.yahoo.com";
    String username = "username";
    String password = "password";
    String datetime = "2012-05-15 12:00:00";
    String path = "index.php";
    try {
        HttpClient httpClient = new DefaultHttpClient();
        List<NameValuePair> qparams = new ArrayList<NameValuePair>();
        qparams.add(new BasicNameValuePair("username", username));
        qparams.add(new BasicNameValuePair("password", password));
        qparams.add(new BasicNameValuePair("senderid", senderid));
        qparams.add(new BasicNameValuePair("to", to));
        qparams.add(new BasicNameValuePair("text", text));
        qparams.add(new BasicNameValuePair("type", type));
        qparams.add(new BasicNameValuePair("datetime", datetime));
        URI uri = URIUtils.createURI("http", ppgHost, -1, path, URLEncodedUtils.format(qparams, "UTF-8"), null);
        HttpPost httppost = new HttpPost(uri);
        System.out.println(httppost.getURI());
        HttpResponse response = httpClient.execute(httppost);
        System.out.println(response.getStatusLine()); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-15T13:27:40.560

如果它是一个 URL，您可以将百分比编码值用于新行，`%0D%0A`尽管`%0A`(ASCII 10 - 换行) 或`%0D`(ASCII 13 - 回车) 应该单独工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:35:34.973

所有参数都需要进行 URL 编码。此外，用户系统行分隔符而不是硬编码“\n”是一个很好的做法

`System.getProperty("line.separator");`

# python - 空格分隔的数据到字典中

> ID：10601674
> 
> 赞同：0
> 
> 时间：2012-05-15T13:24:47.190
> 
> 标签：python

我正在尝试获取以下输出`2_YEAR_912828SR2_20120514.dat 1337045684`并创建一个字典，其中名称为键，日期为值

```
#get file attributes
datadict = {}

file_list_attr = sftp.listdir_attr()
for f in (file_list_attr): 
   fname = f.filename
   fdate = f.st_mtime

   print fname, fdate 
```

2_YEAR_912828SR2_20120514.dat 1337045684

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:28:32.090

```
dict((f.filename, f.st_mtime) for f in file_list_attr) 
```

或（显然不理解 q ）带有空格的行：

```
dict(f.split(' ', 2) for f in file_list_attr) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:39:41.920

这是如果您`f`作为具有以下属性的对象：

```
for f in (file_list_attr):
    datadict[f.filename] = f.st_mtime 
```

那就是按原样使用您的代码。但我认为你有`f`一个字符串，所以你必须把它分成两部分：

```
for f in (file_list_attr):
    filename, st_mtime = f.split(' ', 2)
    datadict[filename] = st_mtime 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:28:36.300

不知道你的代码到底是什么。

```
data = {}
for file in file_list:
    data[f.filename] = f.st_mtime 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:41:42.363

不清楚你需要什么，如果你想处理你的代码输出来创建一个 dict 你可以做这样的事情：

```
output = """2_YEAR_912828SR2_20120514.dat 1337045684
2_YEAR_912828SR2_20120515.dat 1337045684
2_YEAR_912828SR2_20120516.dat 1337045684"""

result_dict = {}
for l in output.splitlines():
    k, v = l.split()
    result_dict[k] = v 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T14:14:52.410

这是一个工作示例，它还负责数据转换（时间戳 --> 日期）：

```
from datetime import date

with open("file_with_data.txt", "r") as fl:
    datadict = dict([ (file_name, date.fromtimestamp(float(timestamp))
      for line in fl.readlines() for file_name, timestamp in line.split()]) 
```

# unix - 从 shell 脚本中的文件中删除完全匹配的行

> ID：10601675
> 
> 赞同：2
> 
> 时间：2012-05-15T13:24:51.680
> 
> 标签：unix, sed

我正在编写一个脚本，其中包括从文件中删除一行。要删除的行存储在变量中，并由命令行参数构造。这是我到目前为止所拥有的：

```
#!/bin/sh
repo=$1
devscript=/usr/local/bin/svn-post-commit-update-$repo-dev
livescript=/usr/local/bin/svn-post-commit-update-$repo-live
sudoer="www-data    ALL=(root) NOPASSWD: $devscript, $livescript"
sed -i '//$sudoer/ d' /home/bdugan/t.txt 
```

我收到以下错误：

> sed：-e 表达式 #1，字符 3：未知命令：`$'

我意识到此时有一些简单的语法问题我已经搞砸了，但对于我的生活我找不到它。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:01:06.703

关键是您必须使用双引号，以便变量得到扩展。否则，`sed`从字面上看美元符号。

同样关键的是您的模式包含斜杠。您必须使用备用分隔符：

```
sed -i "\|$sudoer|d" /home/bdugan/t.txt 
```

选择一个不太可能出现在字符串中的分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:35:53.303

由于您的行包含`/`字符，它会弄乱`/regex/`sed 的分隔符。您可能想使用 awk 并使用字符串相等而不是正则表达式：

```
awk -v line="$sudoer" '$0 == line {next} {print}' ~/t.txt > ~/t.txt.new &&
mv ~/t.txt ~/t.txt.old &&
mv ~/t.txt.new ~/t.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:38:51.360

尝试这个

```
sed -e "'s@${sudoer}@@'" -e '/^$/d' -i /home/bdugan/t.txt 
```

这将`@`用作分隔符，仅适用于替换命令，然后删除空行。

编辑：您不应`/`用作文件名和路径的分隔符，因为它可能会破坏您的`sed`正则表达式

更新：

如果您正在使用`GNU sed`，您可以将命令减少到

```
sed -e "'\@${sudoer}@d'" -i /home/bdugan/t.txt 
```

# java - 在 Swing 应用程序中显示网页

> ID：10601676
> 
> 赞同：19
> 
> 时间：2012-05-15T13:24:54.950
> 
> 标签：java, swing

我想在 java swing 应用程序中显示一个网页。类似于使用 HTML 时的 a，但在 java Swing 中。这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-15T13:29:07.393

使用`JEditorPane`：

```
JEditorPane jep = new JEditorPane();
jep.setEditable(false);   

try {
  jep.setPage("http://www.yoursite.com");
}catch (IOException e) {
  jep.setContentType("text/html");
  jep.setText("<html>Could not load</html>");
} 

JScrollPane scrollPane = new JScrollPane(jep);     
JFrame f = new JFrame("Test HTML");
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
f.getContentPane().add(scrollPane);
f.setPreferredSize(new Dimension(800,600));
f.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T13:27:14.357

您可能想查看[http://java.dzone.com/articles/web-browser-your-java-swing](http://java.dzone.com/articles/web-browser-your-java-swing)。

JxBrowser 允许您通过将浏览器嵌入到您的 Swing 应用程序中来显示任何网页。

# macos - 最大打开文件数的软限制处理

> ID：10601679
> 
> 赞同：1
> 
> 时间：2012-05-15T13:25:06.350
> 
> 标签：macos, unix

我正在为 Mac OS 10.6.x/10.7.x 编写应用程序。在我的应用程序中，我想检测达到最大打开文件描述符数的软限制的错误（由 ulimit -n 报告）。我确信应该有它的信号，但我找不到它。有记录的信号与 CPU 和最大文件大小的软限制有关，但与文件描述符无关。有谁知道该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:28:42.963

`errno`打开文件时会出现错误（通过）；你不会收到信号。

```
int fd = open("somefile", O_CREAT);
if (fd < 0)
{
    if (errno == EMFILE)
    {
        // Hit process file descriptor limit
    }
    else if (errno == ENFILE)
    {
        // Hit system file descriptor limit
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:36:00.587

`getrlimit(RLIMIT_NOFILE);`似乎是您正在寻找的东西。

# python - 通过 Python 在 Gnuplot 中进行多图

> ID：10601682
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:25:16.117
> 
> 标签：python, gnuplot

我想得到三个图表，一个在一个之下，使用`multiplot`.

我试过：

```
#! /usr/bin/env python
from numpy import *
import Gnuplot as gp
import Gnuplot.funcutils

x = (1,2,3)
y=(2,4,5)
x1 = (3,6,8)
g = gp.Gnuplot()
g("set output 'filename.svg'")
g("unset xtics")
g("unset ytics")
g("set size 200,200")
g("set bmargin 0")
g("set tmargin 0")
g("set lmargin 0")
g("set rmargin 0")

g("set multiplot")
#First
g("set origin 0.1,0.1")
d = gp.Data(x,y,with_="linespoints")
g.plot(d)
#Second
g("set origin 0.1,50")
d1 = gp.Data(x1,y,with_="linespoints")
g.plot(d1)
# Third
g("set origin 0.1,100")
d2 = gp.Data(y,x,with_="linespoints")
g.plot(d2)
g("unset multiplot") 
```

从[http://t16web.lanl.gov/Kawano/gnuplot/plot3-e.html开始](http://web.archive.org/web/20100906164423/http://t16web.lanl.gov/Kawano/gnuplot/plot3-e.html)

但是当我想显示创建的 svg 时出现错误。建议？脸书

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:44:23.890

问题是您没有设置终端。Gnuplot 只是将输出发送到 x11 终端（或任何您配置为默认的终端）。如果您的默认终端不是`svg`，那么您将收到一个错误 - 文件不存在，编码类型与`svg`扩展名不匹配。

`g("set terminal svg")`之前添加`g("set output 'filename.svg'")`，你应该都准备好了。

# sql - 在两个日期之间生成月份？

> ID：10601683
> 
> 赞同：1
> 
> 时间：2012-05-15T13:25:19.107
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想在`SELECT`声明中填写缺少的月份，因此我计划将我的表与另一个包含所有月份的表连接起来。如何以轻量级方式生成月份表？例如，

```
CREATE TABLE #TEMP(Timewhen DATETIME, Value INT)

INSERT INTO #TEMP VALUES('2012-02-04', 4)
INSERT INTO #TEMP VALUES('2012-02-06', 4)
INSERT INTO #TEMP VALUES('2012-02-10', 4)
INSERT INTO #TEMP VALUES('2012-04-08', 4)
INSERT INTO #TEMP VALUES('2012-04-12', 4)

SELECT YEAR(Timewhen) EventYear, MONTH(Timewhen) EventMonth, SUM(Value) Total
FROM #TEMP
GROUP BY YEAR(Timewhen), MONTH(Timewhen)

DROP TABLE #TEMP 
```

给我：

```
EventYear   EventMonth  Total
2012               2    12
2012               4    8 
```

但是我需要：

```
EventYear   EventMonth  Total
2012        2           12
2012        3           0
2012        4           8 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:35:22.733

使用 SQL Server，我会执行以下操作：

```
select dateadd(month, num, firstdate) as mon
from (select row_number() over (partition by NULL order by (select NULL)) as num
      from Information_Schema.Columns c
     ) n cross join
     (select cast('2001-01-01' as date) firstdate) const 
```

这会从第一个日期开始创建几个月。我只是使用 Columns 表来允许我生成一个序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:35:46.720

```
DECLARE @months     INT, 
        @firstmonth DATE;

SELECT 
    @months     = DATEDIFF(MONTH, MIN(Timewhen), MAX(Timewhen)) + 1, 
    @firstmonth = DATEADD(DAY, 1-DAY(MIN(Timewhen)), MIN(Timewhen))
FROM #temp;

;WITH m(rn) AS 
(
  SELECT TOP (@months) rn = ROW_NUMBER() OVER (ORDER BY [object_id])
  FROM sys.objects ORDER BY rn
),
x(d) AS 
(
  SELECT DATEADD(MONTH, rn-1, @firstmonth) FROM m
)
SELECT YEAR(x.d), MONTH(x.d), Total = SUM(COALESCE(t.Value, 0))
  FROM x 
  LEFT OUTER JOIN #temp AS t
  ON t.Timewhen >= x.d AND t.Timewhen < DATEADD(MONTH, 1, x.d)
  GROUP BY YEAR(x.d), MONTH(x.d); 
```

或者稍微不那么冗长的版本：

```
DECLARE @months     INT, 
        @firstmonth DATE;

SELECT 
    @months     = DATEDIFF(MONTH, MIN(Timewhen), MAX(Timewhen)) + 1, 
    @firstmonth = DATEADD(DAY, 1-DAY(MIN(Timewhen)), MIN(Timewhen))
FROM #temp;

;WITH x(y, m, s, e) AS 
(
  SELECT YEAR(dt), MONTH(dt), dt, DATEADD(MONTH, 1, dt) FROM 
  ( SELECT dt = DATEADD(MONTH, rn-1, @firstmonth) FROM 
    ( SELECT TOP (@months) rn = ROW_NUMBER() OVER (ORDER BY [object_id])
      FROM sys.objects ORDER BY rn
    ) AS z
  ) AS y
)
SELECT EventYear = x.y, EventMonth = x.m, Total = SUM(COALESCE(t.Value, 0))
  FROM x LEFT OUTER JOIN #temp AS t
  ON t.Timewhen >= x.s AND t.Timewhen < x.e
  GROUP BY x.y, x.m; 
```

**使用日历表的替代解决方案：**

使用[此处](http://web.archive.org/web/20120413100220/http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)的说明创建日历表。

```
-- Script to create a calendar table

DROP TABLE dbo.Numbers
DROP TABLE dbo.Calendar
GO

-- Use this to determine the number in the next query
DECLARE @NUMDAYS int
SELECT @NUMDAYS = DATEDIFF(DAY, '20000101', '20291231')

CREATE TABLE dbo.Numbers 
( 
    Number INT IDENTITY(1,1) PRIMARY KEY CLUSTERED 
) 

WHILE COALESCE(SCOPE_IDENTITY(), 0) <= @NUMDAYS
BEGIN 
    INSERT dbo.Numbers DEFAULT VALUES 
END
GO

CREATE TABLE dbo.Calendar  
(  
    dt SMALLDATETIME NOT NULL 
        PRIMARY KEY CLUSTERED,  

    isWeekday BIT, 
    isHoliday BIT,  
    Y SMALLINT,  
    FY SMALLINT,  
    Q TINYINT,  
    M TINYINT,  
    D TINYINT,  
    DW TINYINT, 
    monthname VARCHAR(9), 
    dayname VARCHAR(9), 
    W TINYINT ,
    HolidayDescription VARCHAR(32)
) 
GO

INSERT Calendar(dt) 
SELECT DATEADD(DAY, Number, '20000101') 
FROM dbo.Numbers 
--WHERE Number <= @NUMDAYS 
ORDER BY Number

GO

--SELECT * FROM Calendar

UPDATE dbo.Calendar SET 

    isWeekday = CASE  
        WHEN DATEPART(DW, dt) IN (1,7)  
        THEN 0 
        ELSE 1 END, 

    isHoliday = 0, 

    Y = YEAR(dt),  

    FY = YEAR(dt), 

    /* 
    -- if our fiscal year 
    -- starts on May 1st: 

    FY = CASE  
        WHEN MONTH(dt) < 5 
        THEN YEAR(dt)-1  
        ELSE YEAR(dt) END, 
    */ 

    Q = CASE 
        WHEN MONTH(dt) <= 3 THEN 1 
        WHEN MONTH(dt) <= 6 THEN 2 
        WHEN MONTH(dt) <= 9 THEN 3 
        ELSE 4 END,  

    M = MONTH(dt),  

    D = DAY(dt),  

    DW = DATEPART(DW, dt),  

    monthname = DATENAME(MONTH, dt),  

    dayname = DATENAME(DW, dt),  

    W = DATEPART(WK, dt)

GO 
```

创建`Calendar`表后，可以使用以下方法来实现：

```
CREATE TABLE #TEMP(Timewhen DATETIME, Value INT)

INSERT INTO #TEMP VALUES('2012-02-04', 4)
INSERT INTO #TEMP VALUES('2012-02-06', 4)
INSERT INTO #TEMP VALUES('2012-02-10', 4)
INSERT INTO #TEMP VALUES('2012-04-08', 4)
INSERT INTO #TEMP VALUES('2012-04-12', 4)

SELECT Y EventYear, M EventMonth, SUM(Value) Total
FROM #TEMP RIGHT OUTER JOIN (SELECT DISTINCT Y,M FROM dbo.dateRange('20120204', '20120412')) X
ON YEAR(Timewhen) = X.Y AND MONTH(Timewhen) = X.M
GROUP BY Y,M

DROP TABLE #TEMP 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:23:17.627

您可以声明一对端点并从 sys.messages 表中构建年/月列表：

```
DECLARE @EventStart datetime='1/1/2001';
DECLARE @EventEnd datetime='12/31/2012';

SELECT TOP (DATEDIFF(MONTH,@EventStart,@EventEnd)+1)
EventYear=DATEPART(YEAR,DATEADD(MONTH,ROW_NUMBER()OVER(ORDER BY message_id)-1,@EventStart))
, EventMonth=DATEPART(MONTH,DATEADD(MONTH,ROW_NUMBER()OVER(ORDER BY message_id)-1,@EventStart))
FROM sys.messages m; 
```

结果：

```
EventYear   EventMonth
----------- -----------
2001        1
2001        2
2001        3
2001        4
2001        5
.
.
.
2012        7
2012        8
2012        9
2012        10
2012        11
2012        12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-21T15:12:47.973

---如果您使用 ssrs 报告或创建性能点仪表板，创建时有问题

---当前或上一个日历年的月份下拉列表，这是适合您的 T-SQL 脚本。

```
DROP TABLE #Numbers
DROP TABLE #Calendar
-------------------------------------------------------------------------------
-- Use this to determine the number in the next query
DECLARE @NUMDAYS int
DECLARE @start_date DATETIME, @end_date DATETIME
DECLARE  @year VARCHAR(50)
declare @year_num AS VARCHAR(50)
SET @year_num = 'current' ----'previous'
-------------------------------------------------------------------------------    
  SET @start_date = CASE @year_num
    WHEN 'current' THEN DATEADD(yy, DATEDIFF(yy, 0, GETDATE()), 0)
    WHEN 'previous' THEN DATEADD(yy, -1, DATEADD(yy, DATEDIFF(yy, 0, GETDATE()), 0))
    ELSE DATEADD(yy, DATEDIFF(yy, 0, GETDATE()), 0)
  END
  SET @end_date = CASE @year_num
    WHEN 'current' THEN GETDATE() ----DATEADD(yy, DATEDIFF(yy, -1, GETDATE()), -1)
    WHEN 'previous' THEN DATEADD(YY, -1, DATEADD(yy, DATEDIFF(yy, -1, GETDATE()), -1))
    ELSE DATEADD(yy, DATEDIFF(yy, -1, GETDATE()), -1)
  END

  SET @year = CASE @year_num
    WHEN 'current' THEN YEAR(GETDATE())
    WHEN 'previous' THEN YEAR(DATEADD(yy, -1, GETDATE()))
    ELSE YEAR(GETDATE())
  END

SELECT @NUMDAYS = DATEDIFF(DAY, @start_date, @end_date )

CREATE TABLE #Numbers 
( 
Number INT IDENTITY(1,1) PRIMARY KEY CLUSTERED 
) 

WHILE COALESCE(SCOPE_IDENTITY(), 0) <= @NUMDAYS
BEGIN 
  INSERT #Numbers DEFAULT VALUES 
END

CREATE TABLE #Calendar  
(  
dt SMALLDATETIME NOT NULL 
    PRIMARY KEY CLUSTERED,  

Y SMALLINT,  
Q TINYINT,  
M TINYINT,  
monthname VARCHAR(9)
) 

INSERT #Calendar(dt) 
SELECT DATEADD(DAY, Number,  @start_date) 
FROM #Numbers 
WHERE Number <= @NUMDAYS 
ORDER BY Number

UPDATE #Calendar 
SET Y = YEAR(dt),  
    Q = CASE WHEN MONTH(dt) <= 3 THEN 1 
             WHEN MONTH(dt) <= 6 THEN 2 
             WHEN MONTH(dt) <= 9 THEN 3 
             ELSE 4 END,  
    M = MONTH(dt),  
    monthname = convert(varchar(3),datename(month,dt))----DATENAME(MONTH, dt) 

select distinct Y,M,monthname 
from #Calendar
WHERE Y = @year
order by  M 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-24T08:39:30.047

```
SELECT MIN (to_date((TO_CHAR (Actual_Date, 'DD-MM-RRRR')),'dd-mm-rrrr')) F_DATE,
         MAX (to_date((TO_CHAR (Actual_Date, 'DD-MM-RRRR')),'dd-mm-rrrr')) T_DATE,
         TO_CHAR (Actual_Date, 'MM-RRRR') MONTH
    FROM (    SELECT TRUNC (TO_DATE (:P_FDATE, 'dd-mm-rrrr')) + LEVEL - 1
                        Actual_Date
                FROM (SELECT TRUNC (TO_DATE (:P_FDATE, 'dd-mm-rrrr'), 'MM') - 1
                                AS dt
                        FROM DUAL)
          CONNECT BY LEVEL <=
                        (  TO_DATE (:P_TDATE, 'dd-mm-rrrr')
                         - TRUNC (TO_DATE (:P_FDATE, 'dd-mm-rrrr'))
                         + 1))
GROUP BY TO_CHAR (Actual_Date, 'MM-RRRR')
ORDER BY 1; 
```

# wpf - 滚动到结束时 WPF Datagrid 向上滚动一点

> ID：10601687
> 
> 赞同：0
> 
> 时间：2012-05-15T13:25:26.510
> 
> 标签：wpf, performance, scrollbar, wpfdatagrid, drag

我有一个 WPF Datagrid（Win7 上的 4.0）。当它通过拖动（[拖动后](https://i.stack.imgur.com/vexfU.gif)）滚动到最后时，拇指有时会在释放时返回一点并且鼠标光标移开（可能以整行开始）。我尝试设置 DG_ScrollViewer 的 CanContentScroll 属性（请参阅[WPF DataGrid：CanContentScroll 属性导致奇怪的行为](https://stackoverflow.com/questions/3062540/wpf-datagrid-cancontentscroll-property-causing-odd-behavior)），但是当填充大量数据时，网格变得无法使用。

[通过鼠标滚轮（使用滚轮滚动后](https://i.stack.imgur.com/w4KBC.gif)）或单击滚动条箭头完成滚动时，不会出现此问题。

水平滚动也会出现问题。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:11:10.203

如果找到原因。有一个处理程序导致该行为。

```
Private Sub mMainGrid_PreviewMouseUp(sender As Object, e As System.Windows.Input.MouseButtonEventArgs) Handles MyGrid.PreviewMouseUp
        If TypeOf e.OriginalSource Is Thumb Then
            MyGrid.Items.Refresh()
        End If
    End Sub 
```

此处理程序的目的是在调整列大小时强制刷新标题。

# iphone - 如何在核心图形中删除线

> ID：10601691
> 
> 赞同：1
> 
> 时间：2012-05-15T13:25:35.683
> 
> 标签：iphone, objective-c, ios, core-graphics

我在我的应用程序中使用 CGContextAddLineToPoint 画一条线现在我想从给定点删除线我该怎么做我正在使用触摸画线

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:30:46.973

你可以抹去，

给定这两个点，通过设置`CGContextSetBlendMode(context, kCGBlendModeClear)`.

# git - GitX-L：缺少对象0000000000000000000000000000000000000000

> ID：10601694
> 
> 赞同：4
> 
> 时间：2012-05-15T13:25:43.227
> 
> 标签：git, gitx

打开 git 存储库时，我在[GitX-L中收到以下错误：](http://gitx.laullon.com/)

```
The document “REPO_NAME” could not be opened.

An error occured while trying to open file://localhost/Volumes/SERVER/www/REPO_NAME/.git/.
fatal: missing object 0000000000000000000000000000000000000000 for refs/remotes/origin/HEAD 
```

有谁知道是什么导致了这个问题或如何解决它？使用命令行时我没有收到错误，所以我假设这是 GitX-L 的问题。

`git fsck`确实告诉我一堆悬而未决的条目，这可能是罪魁祸首吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T12:08:10.303

在“GitX”（一个 GUI 工具）中打开存储库时，我收到了同样的错误消息。

对我来说，问题是由文件引起的`.git/refs/remotes/origin/HEAD`，它引用了我删除的远程分支：

```
ref: refs/remotes/origin/develop 
```

我通过编辑文件以包含仍然存在的远程分支的名称来修复它：

```
ref: refs/remotes/origin/master 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T13:32:29.000

看起来原始远程参考有问题...从终端中删除罪魁祸首`git branch -r -d origin/HEAD`，甚至`git remote prune origin`在 GitX 中重新打开它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:57:09.040

我有同样的问题。

一个简单的解决方案是克隆错误的存储库并开始使用克隆。它对我有用。

# mysql - 使用 CONCAT 时 MySQL 过程创建失败

> ID：10601699
> 
> 赞同：0
> 
> 时间：2012-05-15T13:25:55.130
> 
> 标签：mysql, stored-procedures, concat

我遇到了 MySQL v.5.0.091-log 的问题。该数据库由我客户的提供商 (1&1) 提供，因此我无法控制版本，也无法控制他们提供给我们使用的 phpMyAdmin（版本 2.6.4-pl3）。

我的公司大部分时间都使用存储过程和函数来提高效率和安全性。我编写了一个在我们的本地开发数据库上运行良好的存储过程，但是当我尝试将它添加到主机上的测试或生产 MySQL 服务器时，创建语句失败。由于他们提供的 phpMyAdmin 版本不适用于存储过程，因此我们有自己的界面可以维护它们。它已经过测试，不是问题的原因。

这是程序：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `objectGetOpenObjectsInfo`()
BEGIN

SELECT     bldgobjects.objectId, CONCAT(objectrentinfo.shortDesc,'<br/>',bldginfo.address, ', ',bldginfo.city) AS objTitle,  
   CONCAT(imagelist.fileDirectory, imagelist.fileName) AS objImg
FROM         objectrentinfo INNER JOIN
                      bldgobjects ON objectrentinfo.objectId = bldgobjects.objectId INNER JOIN
                      bldginfo ON bldgobjects.bldgId = bldginfo.bldgId INNER JOIN
                      bldgimages ON bldgobjects.bldgId = bldgimages.bldgId INNER JOIN
                      imagelist ON bldgimages.imageId = imagelist.imageId
WHERE     (objectrentinfo.isOpen = 1) AND (imagelist.imgType = 1)
ORDER BY bldginfo.address;

END 
```

问题特别是 CONCAT 语句。只要它们在过程中，create 语句就不会执行。只要将其更改为：

```
SELECT     bldgobjects.objectId, objectrentinfo.shortDesc, bldginfo.address, bldginfo.city,  
           imagelist.fileDirectory, imagelist.fileName 
```

创建语句执行，我有我的存储过程。我一遍又一遍地查看它，很可能是我忽略了一些微小的语法错误，但我不知所措。有什么建议么？在此先感谢并感谢任何人可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:36:19.687

phpmyadmin 中的分隔符可能有问题，如果可能，请尝试另一个 MySQL 客户端或尝试此代码，而不使用 BEGIN-END 子句 -

```
CREATE DEFINER = `root`@`localhost` PROCEDURE `objectGetOpenObjectsInfo`()
  SELECT bldgobjects.objectId
       , CONCAT(objectrentinfo.shortDesc, '<br/>', bldginfo.address, ', ', bldginfo.city) AS objTitle
       , CONCAT(imagelist.fileDirectory, imagelist.fileName) AS objImg
  FROM
    objectrentinfo
  INNER JOIN bldgobjects
    ON objectrentinfo.objectId = bldgobjects.objectId
  INNER JOIN bldginfo
    ON bldgobjects.bldgId = bldginfo.bldgId
  INNER JOIN bldgimages
    ON bldgobjects.bldgId = bldgimages.bldgId
  INNER JOIN imagelist
    ON bldgimages.imageId = imagelist.imageId
  WHERE
    (objectrentinfo.isOpen = 1) AND (imagelist.imgType = 1)
  ORDER BY
    bldginfo.address; 
```

# .net - LINQ to Entities：LINQ 查询中的年龄计算导致“方法无法转换为存储表达式”

> ID：10601701
> 
> 赞同：2
> 
> 时间：2012-05-15T13:26:01.873
> 
> 标签：.net, linq, linq-to-entities

使用 LINQ to Entities，我需要从 PersonTable 中获取记录，其中 Age 介于 AgesFrom 和 AgesTo 之间。问题是，我需要从存储在数据库中的 DateOfBirth 和特定的 DateToCalculate 计算他们的年龄。

例如。PersonTable：DateOfBirth=01/04/1972，DateToCalculateAge=25/12/2011

```
.Where(0 < o.FormDate.AddYears(-agesFrom).CompareTo(o.FormDate.Subtract(o.Person.DateOfBirth)) &&
       0 > o.FormDate.AddYears(-agesTo).CompareTo(o.FormDate.Subtract(o.Person.DateOfBirth));
// ----------------------- OR ------------------------
.Where(agesFrom <= CalculateAge(o.Person.DateOfBirth.Value, o.FormDate) &&
       agesTo >= CalculateAge(o.Person.DateOfBirth.Value, o.FormDate); 
```

对于我提供的代码，我收到以下异常：“LINQ to Entities 无法识别方法 'System.DateTime AddYears(Int32)' 方法，并且此方法无法转换为存储表达式。”

我知道一旦 LINQ 将查询传递给数据库，我试图使用的方法就无法翻译。有解决办法吗？我可以在访问数据库后进行过滤，但想避免那种瓶颈。我也想过添加一个 sql 函数来为我做这个计算，但想先用尽 LINQ 的可能性。

这里有一篇不错的帖子详细介绍了在查询之前进行年龄计算的更好方法： [在 LINQ 中检查年龄过滤器的最短方法？](https://stackoverflow.com/questions/4715155/shortest-way-to-check-for-age-filter-in-linq)但是在我的情况下，我不是从 DateTime.Now 计算年龄，而是从数据库中的日期计算年龄。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T13:33:06.020

由于您使用的是 LINQ to Entities，因此首选的解决方案是利用[`System.Data.Objects.EntityFunctions`](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx)（***EF 版本 6 的更新：****改用）中定义的方法[`DbFunctions`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbfunctions.aspx)，*查询表面会将它们成功转换为 SQL。在这种情况下，你想采取例如这个：

```
o.FormDate.AddYears(-agesFrom)
          .CompareTo(o.FormDate.Subtract(o.Person.DateOfBirth)) 
```

并将其转换为类似

```
EntityFunctions.DiffMinutes(
    EntityFunctions.AddYears(o.FormDate, -agesFrom),
    EntityFunctions.AddSeconds(
        o.FormDate, 
        EntityFunctions.DiffSeconds(o.FormDate, o.Person.DateOfBirth)
    )
) 
```

我不确定上述是否真的正确，因为它真的伤害了我的眼睛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:37:04.150

您不能在 LINQ to Entities 中使用这些方法。但是，如果查询是在内存中完成的，则可以。尝试使用 a`.ToList()`之前`.Where`：

```
.ToList().Where(0 < o.FormDate.AddYears(-agesFrom)
         .CompareTo(o.FormDate.Subtract(o.Person.DateOfBirth)) && 0 > o.FormDate.AddYears(-agesTo)
         .CompareTo(o.FormDate.Subtract(o.Person.DateOfBirth)); 
```

或者

```
.ToList().Where(agesFrom <= CalculateAge(o.Person.DateOfBirth.Value, o.FormDate) 
          && agesTo >= CalculateAge(o.Person.DateOfBirth.Value, o.FormDate); 
```

这样，`.ToList()`将查询带入内存，您将能够使用这些方法。

如果你有一个巨大的数据库，它的性能会受到影响，但它会起作用。

# mysql - 如何从 Solr 的数据导入器中迭代查询大型 MySQL 数据集？

> ID：10601704
> 
> 赞同：1
> 
> 时间：2012-05-15T13:26:06.540
> 
> 标签：mysql, database, solr, multi-table

我的生产数据库中有 256 个表。每个表大约有 10,000,000 行——我无法在一次`SELECT`查询中从任何一个表中获取所有行。

实际上，我将查询阶段放在 solr/conf/data-config.xml 中，就像这样作为测试；它有一张桌子，我正在选择所有行。

我使用 Solr（基于 Java）。我像这样触发数据的索引：

`curl --max-time 36000 -i localhost:portNum/solr/dataimport?command=full-import`

这是 XML 中的内容：

`<entity name="file" query="SELECT *, LOWER(REPLACE(sw_name, ' ', '')) packed_sw_name, CAST(group_id as char) group_id_s FROM tblTmp1"/>`

但是现在，我想获取用于数据导入的表号（tblNum）的参数并迭代地选择 id 范围之间的行——使用美元符号变量替换，查询将如下所示：

`<entity name="file" query="SELECT *, LOWER(REPLACE(sw_name, ' ', '')) packed_sw_name, CAST(group_id as char) group_id_s FROM tblTmp1_`**$tblNum** `where id >=`**$startSn** `and id<`**$endSn**`" />`

如何迭代地查询数据库，我应该在哪个文件中设置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:55:48.223

如果您想添加这种逻辑，我不知道这是否是编写 SQL 查询的最佳位置。

如果您确实按照配置使用导入器，您将需要使用游标在循环中进行选择——将结果放入 Solr 的临时表中。我不知道它是如何使用 MySQL 语法的，但我记得它与其他 SQL 方言相似（但不相同）——这是 PostgreSQL 的 PL/PgSQL 语言中的游标查询示例：

```
CREATE FUNCTION urge_to_merge( ) RETURNS INTEGER AS '

    DECLARE 
        pacman              CURSOR FOR SELECT * FROM forsale_fsuserprofileimage;
        pellet              forsale_fsuserprofileimage%ROWTYPE;

    BEGIN 

        OPEN pacman;
        LOOP
            FETCH pacman INTO pellet;
            EXIT WHEN NOT FOUND;

            UPDATE forsale_fsuserprofile 
            SET 
                image = pellet.image,
                w = pellet.w,
                h = pellet.h
            WHERE 
                id = pellet.userprofile_id;

        END LOOP;

        RETURN( 1 );

    END;

' LANGUAGE 'plpgsql'; 
```

我建议放弃 Solr 股票数据导入器并编写一个简单的 CLI 程序——这样，您可以控制何时执行查询。您可以用 Java 编写它，但您不必这样做；使用 Solr 的 HTTP API，您可以使用任何其他语言，只要它可以发出 HTTP 请求和 MySQL API 调用：Python、Ruby、带有 curl 的 bash 脚本，甚至 PHP-CLI，如果那是您的东西。

许多语言已经绑定到 Solr 的 HTTP API，您可以开箱即用地使用（我可以保证 Python 和 Ruby 在这方面），但这里有一篇文章，其中包含自己使用 API 是多么容易的示例：[https： //lucene.apache.org/solr/guide/7_7/searching.html#searching](https://lucene.apache.org/solr/guide/7_7/searching.html#searching)

# java - 查找运行缓慢的代码

> ID：10601706
> 
> 赞同：0
> 
> 时间：2012-05-15T13:26:19.370
> 
> 标签：java, performance, profiling

我继承了一个多线程 Java Web 应用程序，并负责加快它的速度。我尝试通过添加日志语句来确定哪些部分导致了性能问题，但这并不奏效。

所以，我现在正在寻找一种工具（我猜是分析器），它可以帮助我找到导致性能问题的代码。理想情况下，我希望能够启动应用程序，执行一些操作，然后查看一份报告，该报告显示了类/方法所花费的执行时间。

由于预算限制，我只能使用免费工具或提供试用期的工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:30:50.423

对于简单的评估，我真的很喜欢jdk 附带的[jvisualvm 。](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/profiler.html)

我只是简单地分析 CPU 并查看花费最多时间的方法。

![在此处输入图像描述](../Images/ef7074120fde35c1051317ea9d3de520.png)

屏幕截图来自[jvisualvm 页面](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/profiler.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:27:35.600

Netbeans 有配置文件支持，它是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:28:56.510

jvisualvm 将能够为您指示对象创建瓶颈发生的位置 - 您也可以使用它进行时间分析。

它作为现代 VM 的一部分分发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:36:17.490

VisualVM 是免费和开源的。

[http://visualvm.java.net/](http://visualvm.java.net/)

# jsf-2 - Primefaces selectOneMenu 侦听器未使用字符串以外的对象调用

> ID：10601710
> 
> 赞同：2
> 
> 时间：2012-05-15T13:26:24.987
> 
> 标签：jsf-2, primefaces, tomcat7

我正在使用 Jsf 2.0 和 Primefaces 3.2 实现一个 webapp。我注意到了这种意想不到的行为：我有 a`selectOneMenu`和 a `commandButton`，如下所示

```
<p:selectOneMenu id="selsel" value="#{bean.myObj}">
  <f:selectItems value="#{bean.myObjList}" />
</p:selectOneMenu>
<p:commandButton id="btnid" value="Ok" actionListener="#{bean.updateSelectValues()}" /> 
```

发生的情况是如果`myObj`不是 a `String`，`updateSelectValues`则不会调用该方法。我根本看不到任何异常或错误，只是没有被调用。这是支持bean：

```
private List<MyObj> myObjList;
private MyObj myObj;
// getters and setters

public void updateSelectValues() {
  System.out.println(this.myObj);
} 
```

myObj 的代码：

```
public class MyObj implements Serializable {

  private static final long serialVersionUID = 1L;

  private String param1;
  private int param2;

  @Override
  public String toString() {
    StringBuilder builder = new StringBuilder();
    builder.append("MyObj [param1=");
    builder.append(this.param1);
    builder.append(", param2=");
    builder.append(this.param2);
    builder.append("]");
    return builder.toString();
  }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T13:33:28.567

那是因为 HTML 和 HTTP 不理解 Java 对象。所有 Java 对象都转换为`String`HTML 将由 JSF 生成的时间。`String`当提交的表单数据将由 JSF 处理时，所有应该转换回 Java 对象的 HTTP 请求参数。

`<h:message>`至于您的具体问题，如果您添加了一个`<h:messages>`或 PrimeFaces 等效于表单（并且还在 ajax 提交时更新了它），那么您应该已经注意到“空转换器”的转换错误。此外，如果您注意了服务器日志，您还应该看到有关未处理消息的警告。

您需要创建一个在其唯一表示[`Converter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)之间进行转换的自定义。例如：`MyObj``String`

```
@FacesConverter(forClass=MyObj.class)
public class MyObjConverter implements Converter {

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object valueToRender) {
        // Convert MyObj to its unique String representation.
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) {
        // Convert String to MyObj.
    }

} 
```

通常这些对象已经存储在某个数据库中或通过它们的 ID 进行映射。然后，您完全使用该 ID 作为唯一`String`表示。

# c# - 是否可以使用 WP7 AesManaged 重现 NIST/FIPS197 结果（AES128）？

> ID：10601711
> 
> 赞同：3
> 
> 时间：2012-05-15T13:26:25.040
> 
> 标签：c#, windows-phone-7, encryption, aes

各位程序员好！我希望允许我的软件用户以最方便、最通用和平台独立的方式安全地将信息从他们的 Windows Phone 设备传输到几个不同的服务。最好使用 Microsoft 已经提供的工具。出于这个原因，我研究了可通过 Windows Phone SDK 7.1 中的“System.Security.Cryptography”命名空间获得的 AesManaged 类。但是，到目前为止，我什至无法使用此类重现单个 NIST 示例。除其他外，我尝试了以下方法：

```
/* http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf page 35 and 36 */
var passwordBytes = new byte[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f };
var unencryptedBytes = new byte[]{ 0x00, 0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88, 0x99, 0xaa, 0xbb, 0xcc, 0xdd, 0xee, 0xff };        

using (var aes = new AesManaged())
{
    aes.BlockSize = 128; /* size in bits */
    aes.KeySize = 128; /* size in bits */
    aes.Key = passwordBytes; 

    using (var memoryStream = new MemoryStream())
    {
        using (var cryptoStream = new CryptoStream(memoryStream, aes.CreateEncryptor(), CryptoStreamMode.Write))
        {
            cryptoStream.Write(unencryptedBytes, 0, unencryptedBytes.Length);
            cryptoStream.FlushFinalBlock();

            var stream = memoryStream.ToArray();
            /* 
            should be 
            69-c4-e0-d8-6a-7b-04-30-d8-cd-b7-80-70-b4-c5-5a = 128 bit
            according to http://testprotect.com/appendix/AEScalc and fips-197.pdf
            */
            var output = BitConverter.ToString(stream); 
            /* 
            86-DB-4D-44-72-C0-16-E6-80-B9-D2-B2-3C-6D-00-40-98-4C-59-76-CF-41-DF-4E-A6-46-BB-DE-4C-13-E6-12 
            256 bit? 
            */
        }
    }  
} 
```

我看到了几个使用 IV 和 Rfc2898DeriveBytes的代码示例（例如[http://msdn.microsoft.com/de-de/library/system.security.cryptography.aesmanaged.aspx ）（例如](http://msdn.microsoft.com/de-de/library/system.security.cryptography.aesmanaged.aspx)[http://msdn. microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)），但是每个系统默认理解的事实标准是什么？什么是默认的“Key Padding”算法以及如何在 Windows 手机上使用它（可能是[https://www.ietf.org/rfc/rfc3394.txt](https://www.ietf.org/rfc/rfc3394.txt)或[https://www.ietf.org/rfc/rfc5649。 txt](https://www.ietf.org/rfc/rfc5649.txt)？）。最后：我可以将默认值（根据[http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.mode.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.mode.aspx)的 CBC ）更改为 Windows Phone 上的任何其他模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:49:11.537

该文件没有指出的是他们使用全零作为初始化向量。因此，将 IV 设置为全零的 16 个字节，它可以工作：

```
/* http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf page 35 and 36 */
var passwordBytes = new byte[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 
   0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f };
var unencryptedBytes = new byte[] { 0x00, 0x11, 0x22, 0x33, 0x44, 0x55, 0x66,
   0x77, 0x88, 0x99, 0xaa, 0xbb, 0xcc, 0xdd, 0xee, 0xff };
var initvectorBytes = new byte[] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };

using (var aes = new AesManaged())
{
   aes.BlockSize = 128; /* size in bits */
   aes.KeySize = 128; /* size in bits */
   aes.Key = passwordBytes;
   aes.IV = initvectorBytes;

   using (var memoryStream = new MemoryStream())
   {
      using (var cryptoStream = new CryptoStream(
         memoryStream, aes.CreateEncryptor(), CryptoStreamMode.Write))
      {
         cryptoStream.Write(unencryptedBytes, 0, unencryptedBytes.Length);
         cryptoStream.FlushFinalBlock();

         var stream = memoryStream.ToArray();
         /* now you get: 
            69-c4-e0-d8-6a-7b-04-30-d8-cd-b7-80-70-b4-c5-5a = 128 bit
            according to http://testprotect.com/appendix/AEScalc and fips-197.pdf
         */
         var output = BitConverter.ToString(stream);
      }
   }
} 
```

对于您的应用程序，您需要将 IV 设为非全零。您将无法使用 更改模式`AesManaged`，因为 AES 是使用 CBC 模式（或 ECB）实现的。如果您尝试将其设置为其他任何内容，则会出现异常。您可以将填充更改为您喜欢的任何内容。我会将其保留为 PKCS7（默认值）。

# odata - ASP.NET Web-api 是否支持 Odata 资源路径？

> ID：10601720
> 
> 赞同：4
> 
> 时间：2012-05-15T13:26:40.363
> 
> 标签：odata, asp.net-mvc-4, asp.net-web-api

根据 OData Uri 约定[http://www.odata.org/documentation/uri-conventions#FilterSystemQueryOption](http://www.odata.org/documentation/uri-conventions#FilterSystemQueryOption)以下 Uri 是有效的。 [http://services.odata.org/OData/OData.svc/Category(1)/Products](http://services.odata.org/OData/OData.svc/Category(1)/Products) ?$top=2&$orderby=name

但是 ASP.NET Web-API 似乎不支持这一点（至少开箱即用）。它给出了一个错误，即找不到名为 Category(1) 的控制器。

如何使用 Web-API 进行这项工作，或者是否有解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T21:05:40.410

我不知道为什么当你问的时候你的问题没有引起注意……但这是一个真正的问题。WebAPI 支持大量的 OData 规范，但据我了解并非全部。虽然，我还没有找到准确描述哪些方面起作用的资源。开箱即用的默认路由支持一层嵌套，而不是像您的示例中那样的两层。所以像：

```
mystuff.com/Category/5?$top2&orderby=name 
```

话虽如此，我认为您可以制作出您想要的东西。我还没有编译/测试所有这些，所以请耐心等待......在`global.asax`设置一对这样的路线：

```
routes.MapHttpRoute(name          : "WithCategoryFilter", 
                    routeTemplate : "api/v1/{controller}({catID})/{action}/{id}",
                    defaults      : new { id = RouteParameter.Optional}        );

routes.MapHttpRoute(name          : "WithoutCatFilter", 
                    routeTemplate : "api/v1/{controller}/{action}/{id}",
                    defaults      : new { id = RouteParameter.Optional}        ); 
```

注意我注册路由的顺序——**把类别过滤器放在第一位**。这些路由的相应控制器看起来像: :

```
 public class ProductCategoryController : BaseAPIController {
     public IEnumerable<Product> Products(int catID, int id) {
         var result = new List<Product>();

         //do category filtering here...

          return result;
     }
 } 
```

因此，第一条路线将允许应用类别过滤器 ( `catID`) 和可选的 ProductID ( `id`)。当排除 categoryID 和括号时，第二条路线将被捕获。您需要两条路线，因为没有一种自动过滤掉括号的好方法。

作为旁注，您可能对[我写的另一个答案](https://stackoverflow.com/a/10658731/215068)感兴趣，该答案确定了您可能会遇到的其他一些路线体操。

# c++ - (c++) 在类中声明类成员

> ID：10601722
> 
> 赞同：0
> 
> 时间：2012-05-15T13:26:48.053
> 
> 标签：c++, class, declare

我正在尝试在每个 CClient 类中创建一个 CBuffer 成员，如下所示：

```
#ifndef CCLI_INC
#define CCLI_INC
#include "CBuffer.h"
#include "main.h"

    class CClient
    {
    private:

        CBuffer *m_buffer;

    public:
        CClient();

    }; 
```

但是这段代码给了我

```
 error C2143: syntax error : missing ';' before '*'
 error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
 error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

虽然我已经包含了 cbuffer.h 头文件，但它给出了这个奇怪的错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:29:36.290

转发声明`CBuffer`并丢失`include`.

```
#ifndef CCLI_INC
#define CCLI_INC
#include "main.h"
class CBuffer;
class CClient
{
private:

    CBuffer *m_buffer;
public:
    CClient();
}; 
```

# algorithm - 计算广义网络中的最大流量

> ID：10601730
> 
> 赞同：3
> 
> 时间：2012-05-15T13:27:11.970
> 
> 标签：algorithm, data-structures, graph-theory, graph-algorithm, max-flow

我正在尝试找到一种有效的、公开可用的算法，最好是通过实现来解决具有增益的广义（非纯）网络中的最大流量。所有乘数、容量和流量值都是非零整数。

是否存在这样的算法，或者这个问题不能在多项式时间内解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:56:12.287

以下是一些算法和一些解释的链接：

1.  [http://en.wikipedia.org/wiki/Edmonds-Karp_algorithm](http://en.wikipedia.org/wiki/Edmonds-Karp_algorithm)
2.  [http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=maxFlow](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=maxFlow)
3.  [http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=maxFlow2](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=maxFlow2)

这是我最大流量的解决方案：对不起我当时年轻的变量名称:) [http://infoarena.ro/job_detail/431616?action=view-source](http://infoarena.ro/job_detail/431616?action=view-source)
希望它有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-01T20:59:13.890

第一个（强）多项式时间算法由 Végh 于 2013 年[发布](https://arxiv.org/abs/1307.6809)，此后由 Olver 和 Végh[改进为 O((](https://arxiv.org/abs/1611.01778) *m* + *n* log *n* ) *m* *n* log( *n* ^2 / *m*））。但我不知道该算法的任何公共实现。

链接的论文还包含对早期（弱）多项式时间算法以及近似算法的引用，其中一些可能具有公共实现。（ Tardos 和 Wayne 的[这篇较早的论文](https://www.cs.princeton.edu/~wayne/papers/gain-scaling.pdf)提到了 C++ 实现。）

# javascript - JQuery 选项卡问题

> ID：10601736
> 
> 赞同：0
> 
> 时间：2012-05-15T13:27:24.647
> 
> 标签：javascript, jquery

我有一些 html 和 JQuery 用于创建带有选项卡式内容的页面。html如下：

```
<section id="content" class="content">
    <ul class="tabs group">
         <li><a href="#">Tab 1</a></li>
         <li><a href="#">Tab 2</a></li>
         <li><a href="#">Tab 3</a></li>
    </ul>
    <div class="panes">
         <div class="group">
              tab1
         </div>         
         <div class="group">
              tab2
         </div>         
         <div class="group">
              tab3
         </div>   
    </div>
</section> 
```

JQuery 在这里：

```
<script type="text/javascript">
        $(document).ready(function () {        
            $('.activetab a').each(function () {
                var activeTab = $(this).parents('li').index();
                var paneVisible = $(this).parents('ul').next().children('div').eq(activeTab);
                paneVisible.show().siblings().hide();
            });

            $('.tabs a').click(function () {           
                $(this).parents('li').addClass('activetab').siblings().removeClass('activetab'); var activeTab = $(this).parent('li').index();
                var paneVisible = $(this).parents('ul').next().children('div').eq(activeTab);
                paneVisible.show().siblings().hide();
                return false;
            });
        });
    </script> 
```

此代码的工作原理是，当我单击其中一个链接时，会出现正确选项卡中的数据。

唯一的问题是，当我第一次进入页面（包含这些选项卡）时，我从显示给我的所有选项卡中获取数据。我需要在我的文档就绪函数中添加一些额外的代码来显示第一个选项卡中的数据并隐藏所有其他数据（当然还要突出显示第一个选项卡）。任何想法我可以如何做到这一点。我不是 JQuery/JavaScript 专家。

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:45:10.603

只需将`activetab`类添加到 中的`<li>`元素之一`ul.tabs`，如下所示：

```
<li class="activetab"><a href="#">Tab 1</a></li> 
```

你可以在这里看到它的实际效果：http: [//jsfiddle.net/CAAFZ/](http://jsfiddle.net/CAAFZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:00:41.127

好吧，如果没有任何特定原因，您可以使用 JQuery UI 的选项卡并实现此功能。

查看：http: [//jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

另一种方法是，在 CSS 中添加：

```
.tabs {display:none;} 
```

在你的 document.ready 函数中添加

```
$('.tabs').show(); 
```

这样，在样式良好之前，最终用户看不到丑陋的显示。

错过了 Wrock 的回复。那也可以:)

# objective-c - 在 Objective-C 应用程序之间传递参数

> ID：10601744
> 
> 赞同：4
> 
> 时间：2012-05-15T13:27:55.543
> 
> 标签：objective-c, cocoa, arguments

我想知道是否可以在 Mac 应用程序之间传递参数，如果可能，如何传递。

我知道在 Java 中可以使用命令行中的以下语法：

> java JavaApp arg1 arg2 arg3 arg4

这可以通过 main 的 args[] 数组访问它们。

```
public static void main(String[] args) {
        System.out.println("d");
        for (int i = 0; i < args.length; i++)
            System.out.println(args[i]);
} 
```

**编辑：**我想将*命令行*Mac 应用程序中的参数传递给*Cocoa Mac*应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:29:42.677

我不清楚为什么您的 Restarter 应用程序需要是 Cocoa 应用程序。但是，假设确实如此，命令行参数在 NSUserDefaults 的参数域中可用。 [此链接](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/UserDefaults/AboutPreferenceDomains/AboutPreferenceDomains.html#//apple_ref/doc/uid/10000059i-CH2-96930)显示如何从命令行调用程序以及如何指定默认名称。

启动单独进程的 Cocoa 方法是使用[NSTask](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:22:49.837

如果命令行和 GUI 应用程序都是用 Objective-C 编写的，您可能会使用`NSDistributedNotificationCenter`它在进程之间发送通知。NSDistributedNotificationCenter 的文档可以在[Notification Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Articles/NotificationCenters.html#//apple_ref/doc/uid/20000216-BAJGDAFC)中找到。

`C`或者，Cocoa GUI 应用程序以与任何其他程序相同的方式接受命令行参数，即子程序的`argv`和`argc`参数。`main`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:52:47.450

以下是我写的一个类别，`NSWorkspace`它允许将`argv`参数类型数组传递给生成的应用程序。

```
@interface NSWorkspace (MDAdditions)
- (BOOL)launchApplicationAtPath:(NSString *)path
                      arguments:(NSArray *)argv
                          error:(NSError **)outError;
@end

@implementation NSWorkspace (MDAdditions)

- (BOOL)launchApplicationAtPath:(NSString *)path
                      arguments:(NSArray *)argv
                          error:(NSError **)outError {
    NSParameterAssert(path != nil);
    BOOL success = YES;
    if (outError) *outError = nil;
    FSRef itemRef;
    OSStatus status = FSPathMakeRef((const UInt8 *)[path UTF8String], &itemRef, NULL);
    if (status != noErr) {
        if (anError) *anError = [NSError errorWithDomain:NSOSStatusErrorDomain
                        code:status userInfo:nil];
        return NO;
    }
    LSApplicationParameters appParameters = {0, kLSLaunchDefaults, &itemRef,
         NULL, NULL, (argv ? (CFArrayRef)argv : NULL), NULL };
    status = LSOpenApplication(&appParameters, NULL);
    if (status != noErr) {
         NSLog(@"LSOpenApplication() returned %d for %@", (int)status, path);
         if (outError) *outError = [NSError errorWithDomain:NSOSStatusErrorDomain
                        code:status userInfo:nil];
         return NO;
    }
    return YES;
}
@end 
```

更新：

[正如在 Objective-C 中访问命令行参数](https://stackoverflow.com/questions/5146849/accessing-command-line-arguments-in-objective-c)的答案中所提到的， and函数的“ `_`”前缀通常表明它们是私有的，如果有可用的替代方案（有），则应避免使用。`_NSGetArgv()``_NSGetArgc()`

要将 args 传递给可执行文件，可以使用[`NSProcessInfo`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSProcessInfo_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003715)'[`-arguments`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSProcessInfo_Class/Reference/Reference.html#//apple_ref/occ/instm/NSProcessInfo/arguments)方法，如下代码所示：

```
NSArray *argv = [[NSProcessInfo processInfo] arguments];
NSArray *args = [argv subarrayWithRange:NSMakeRange(1, argv.count - 1)];
NSLog(@"args == %@", args); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T08:56:45.090

您的所有答案对我来说都很有效，但我找到了另一种更适合我需求的解决方案。我需要从命令行工具启动 Cocoa 应用程序，我通过以下行实现了这一点：

```
system("nohup /PATH/Arguments.app/Contents/MacOS/Arguments argument1 argument2 &"); 
```

*nohup*是 unix 服务，它允许您将进程附加到自身，因此如果您关闭终端窗口，该进程将保持活动状态。

出现的下一个问题是从 Cocoa 应用程序中捕获参数。`AppDelegate.m`“如果`main.m`是接收它们并只返回一个 int 的那个，我将如何获取参数。”

在 Apple 的框架和库中，我找到了一个完全解决了这个问题的。这个库名为[crt_externs.h](http://opensource.apple.com/source/Libc/Libc-391.5.21/include/crt_externs.h)，包含两个有用的变量，一个用于学习参数的数量，另一个用于获取参数本身。

```
extern char ***_NSGetArgv(void);
extern int *_NSGetArgc(void); 
```

因此，在 Cocoa 应用程序的*AppDelegate*内部，我们将编写以下代码来将参数解析为*NSString*：

```
char **argv = *_NSGetArgv();
NSString *argument1 = [NSString stringWithCString:argv[1] encoding:NSUTF8StringEncoding];
NSString *argument2 = [NSString stringWithCString:argv[2] encoding:NSUTF8StringEncoding]; 
```

正如我们所见，我们直接跳到参数数组的位置 1，因为位置 0 包含路径本身：

```
argv[0] = '/PATH/Arguments.app/Contents/MacOS/Arguments'
argv[1] = 'argument1'
argv[2] = 'argument2' 
```

感谢大家的时间和帮助。我从你们那里学到了很多。我也希望这个答案对其他人有帮助:)

干杯和快乐的编码！

# iphone - 需要图形对象跟随您的手指的 iphone 应用程序的指针

> ID：10601746
> 
> 赞同：2
> 
> 时间：2012-05-15T13:28:06.570
> 
> 标签：iphone, ipad, graphics, drag

我正在寻找一款 iphone/ipad 应用程序，它不是游戏，但需要屏幕上的图形对象跟随您的手指，以便将其放置在“放置”的位置。实际上这是拖放。我不太确定从哪里开始，所以我正在寻找教程、书籍或一般建议。

有人能推荐好的入门吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:37:49.020

您应该使用名为“touchesMoved”的委托函数。这是一个关于这个主题的很棒的教程：

祝你好运。

[http://www.edumobile.org/iphone/ipad-development/how-to-image-moved-using-touch-function-in-ipad/](http://www.edumobile.org/iphone/ipad-development/how-to-image-moved-using-touch-function-in-ipad/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:02:14.430

看看[这篇文章](https://stackoverflow.com/questions/3445494/how-do-you-make-an-image-follow-your-finger-in-objective-c)，我相信它涵盖了你所追求的那种东西。

在谷歌上查看后，我还发现了这个[教程](http://www.icodeblog.com/2008/10/20/iphone-programming-tutorial-using-uitouch-to-drag-an-image-around-the-screen/)，它可能对你有用。它看起来好像完全涵盖了您所追求的那种东西，即拖动某些东西并将其放到其他地方。

# blackberry - 将十六进制颜色代码“#ededed”设置为黑莓主屏幕的背景颜色？

> ID：10601753
> 
> 赞同：0
> 
> 时间：2012-05-15T13:28:18.630
> 
> 标签：blackberry, background-color

我正在处理一个 UI 任务，在该任务中我需要设置以十六进制代码“#ededed”给出的背景颜色。现在我正在使用这段代码：

```
((VerticalFieldManager) getMainManager()).setBackground(BackgroundFactory.createSolidBackground(**Color.LIGHTGRAY**)); 
```

但代替这个 Color.LIGHTGRAY 我必须使用“#ededed”十六进制颜色代码。

请帮助我完成这个小而合乎逻辑的任务。提前谢谢...！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:46:15.127

怎么样：

```
((VerticalFieldManager) getMainManager()).setBackground(BackgroundFactory.createSolidBackground(0xededed)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:06:49.460

最简单的解决方案是：

```
getMainManager().setBackground(BackgroundFactory.createSolidBackground(0xededed)); 
```

无需转换为 a，`VerticalFieldManager`因为主管理器是 a`Field`并且该类包含该`setBackground`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:59:53.580

为什么不使用此链接将颜色转换为所需的颜色并在代码中实现

```
 http://easycalculation.com/color-coder.php 
```

如果您打算使用 java 颜色代码，这是最好的链接

```
 http://www.jafar.com/java/csel/index.html 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T17:18:10.733

以下代码将字符串（十六进制表示）转换为其等效整数，并将该值用作背景颜色。

```
String strColor = "#ededed";
// remove # char
strColor = strColor.substring(1);

try {
    // get integer equivalent
    int iColor = Integer.parseInt(strColor, 16);
    getMainManager().setBackground(BackgroundFactory.createSolidBackground(iColor));
} catch (Exception exc) {   
} 
```

# javascript - Ajax.Updater 执行js

> ID：10601754
> 
> 赞同：0
> 
> 时间：2012-05-15T13:28:19.217
> 
> 标签：javascript, ajax, jquery

我尝试了许多在线教程和示例，但没有任何回报。

我需要在 Ajax 中从 HTML 响应运行 js。

我的代码：

```
<script src="prototype.js" type="text/javascript"></script>
<script type="text/javascript">    
function showmsg()
{
new Ajax.Updater('main', 'getmsg.php?q=1', { method: 'get' },{evalScripts:true}); 
}
</script> 
```

getmsg.php 包含：（测试目的）

```
$q=$_GET[q];
Header("content-type: application/x-javascript");

if ($q==1)
echo 'hi
<script type="text/javascript">
 type = function(){
    var a =2;   
    if(a>1)
    alert(\'random number 87\');
    }
type();
</script>'; 
```

我需要在 ajax 调用后在主页中运行这个 type() 函数。但输出只是“嗨”

PS：如果此脚本有效，它将适用于所有浏览器吗？

有人可以帮我吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:03:33.200

我想你只是错过了你的参数数组，试试这个：

```
new Ajax.Updater('main', 'getmsg.php?q=1', { method: 'get', evalScripts:true}); 
```

# string - 使用 String.Join 构建 Linq to SQL ContainsTable 搜索条件

> ID：10601755
> 
> 赞同：0
> 
> 时间：2012-05-15T13:28:22.713
> 
> 标签：string, linq-to-sql

我正在使用 SQL Server UDF 来允许我在 Linq to SQL 中使用 CONTAINSTABLE。

我使用字符串数组和正则表达式将用户的搜索字符串拆分为可识别的单词，然后将字符串数组重新组合成符合 CONTAINSTABLE 语法的搜索条件字符串。

我想让用户能够将短语括在引号中。换句话说，如果用户输入“黄色“蓝绿色”，则搜索条件应该是“黄色或“蓝绿色””给定以下代码，处理此问题的最佳方法是什么。

```
IEnumerable<string> keywords = Regex
    .Matches(search, @"(?<match>\w+)|\""(?<match>[\w\s]*)""")
    .Cast<Match>()
    .Select(m => m.Groups["match"].Value)
    .ToList();

string searchCondition = "";
searchCondition = String.Join(" OR ", keywords);

List = from t1 in List
    join fts in _dc.udfSearchContent(searchCondition)
    on t1.ContentID equals fts.ContentID
    select t1; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:45:02.550

`.Select(x => @"""" + x + @"""")`成功了。

```
IEnumerable<string> keywords = Regex
    .Matches(search, @"(?<match>\w+)|\""(?<match>[\w\s]*)""")
    .Cast<Match>()
    .Select(m => m.Groups["match"].Value)
    .ToList();

string searchCondition = "";
searchCondition = String.Join(" OR ", keywords.Select(x => @"""" + x + @""""));

List = from t1 in List
    join fts in _dc.udfSearchContent(searchCondition)
    on t1.ContentID equals fts.ContentID
    select t1; 
```

# javascript - 为什么像 escape、unescape 等函数不是 String 对象上的方法？

> ID：10601756
> 
> 赞同：6
> 
> 时间：2012-05-15T13:28:23.557
> 
> 标签：javascript, language-design

字符串可以被看作是可以保存和操作文本的最简单的对象，因此作用于字符串的函数不一定被归为方法。另一方面，javascript 主要是一种 Web 编程语言，使用 URI 是该语言中字符串的常见用途。在这种情况下，类似的东西`lastName.encodeURIComponent()`实际上会非常有用。

为什么像 encodeURIComponent 和 unescape 这样的东西是函数而不是 String 对象上的方法？这里有一些 CS 原则在起作用，还是语言设计者之一的主观选择？

显然不是每个对字符串进行操作的函数都需要在字符串对象中，但是人们在哪里以及如何决定在哪里画线呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T13:40:27.030

因为它们特定于浏览器环境。它们在 JavaScript 语言的通用 String 对象中没有位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T13:42:06.173

我不认为这些方法是 JavaScript 的一部分，而是继承自`window`，这是与浏览器关联的全局对象。因此，虽然您列出的函数处理字符串，但它们实际上与浏览器函数紧密绑定，因此不附加到`String`原型。像 MDN 这样的来源在这方面有点模糊，但我很确定原始的 JS 规范没有提到这些方法。

这可能没有多大意义，但现在可以想象，有人可能想将 JS 用作嵌入式系统的语言或其他与 Internet 无关的语言。在这里，包含的语法`encodeURIComponent()`与`document.getElementById()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:43:06.610

你会在哪里停下来。字符串是无所不在的，根据定义，您使用的任何将字符串作为参数或返回的方法都应该在字符串类中。

同样，拥有采用流的编码方法和进行编码的流方法也是合理的。

你会很快到处都是，或者你会通过委托给一个 Encoding 类来扩展字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T13:46:40.400

**escape() 函数**对字符串进行编码。

这个函数 m**获取一个字符串可移植**，因此它可以**通过任何网络传输**到任何支持 ASCII 字符的计算机。

此函数对特殊字符进行编码

现在这个功能是特定于字符串的，它是基于浏览器的环境中的 URL，JS 作为一种语言是独立于它的。

所以将 escape,unescape 也放入 String 将在非网络/URL相关的场景中变得无用。

这就是为什么它们是**Window 对象的一部分**。

你想要它在字符串中，你可以将它添加到字符串的原型中。

# c# - 如何动态地从文本文件中读取数据？

> ID：10601757
> 
> 赞同：0
> 
> 时间：2012-05-15T13:28:24.423
> 
> 标签：c#, .net

我有一个包含数百个坐标点的数据结构，如下所示：

```
5,234   20,789
8,687   19,576
13,783   12,032
... 
```

每个 X 和 Y 值由 TAB 分隔。它们后面总是以文本形式的附加信息。就像是：

```
Date and Time: 22.04.2001
Software Version: 4.8.30002.0
.... 
```

现在总是正好有 1024 个坐标点。所以我只是读出了 1024 行的坐标。之后我只是假设接下来是附加信息，所以我将这些内容读到字符串中。

所以坐标读出循环看起来像这样：

```
for(i=0;i<1024;i++)
{
   ReadXvalue();
   DoTab();
   ReadYvalue();
} 
```

现在我想动态读取这些文件，以防添加或省略点。我的第一个想法只是检查我正在阅读的符号是数字还是字符。如果它是一个数字，它必须是一个坐标点。如果它是一个字符，我认为它是附加信息。在我看来，这有点脏，或者至少感觉不对。
什么是干净和聪明的方法来做到这一点？

欢迎任何示例、参考或建议。

问候，BC++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:43:45.000

您甚至可以创建自己的 tryParseCoordinates。

您可以将其与上述内容结合使用，`StreamReader`并分别处理每一行。如果您使用此方法，您可以确保行之间或行中没有脏字符。与往常一样，请注意美国与欧洲的小数分隔符。

例如这个完整的例子。

```
internal class Program
{
    private static void Main(string[] args)
    {
        double x, y;
        if (tryParseCoordinates("3,6\t2,4", out x, out y))
        {
            Debug.WriteLine(string.Format("X: {0}, Y:{1}",
                                          x.ToString(CultureInfo.InvariantCulture),
                                          y.ToString(CultureInfo.InvariantCulture)));
        }
    }

    private static bool tryParseCoordinates(string line, out double X, out double Y)
    {
        X = 0.0;
        Y = 0.0;

        string[] coords = line.Split(new[] {'\t'}, StringSplitOptions.RemoveEmptyEntries);
        if (coords.Length != 2)
        {
            return false;
        }

        bool xOk = double.TryParse(coords[0], out X);
        bool yOk = double.TryParse(coords[1], out Y);
        return xOk && yOk;
    }
} 
```

请注意，我使用的是欧洲系统，因此逗号作为小数点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:32:57.143

看看这个例子： http: [//www.dotnetperls.com/readline](http://www.dotnetperls.com/readline)

您打开一个`SteamReader`您感兴趣的文件的传递。然后您可以`ReadLine`读取下一行，因此您不必将 1024 硬编码到您的代码中。然后您可以单独处理每一行。

此外，不要使用“DoTab”，而是查看[String.Split](http://www.dotnetperls.com/split)您还可以在选项卡上拆分，如下所示：http: [//msdn.microsoft.com/en-us/library/ms228388(v=vs.80)。 aspx](http://msdn.microsoft.com/en-us/library/ms228388(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:52:04.640

如果您有像 (x, y) 一样的固定长度列，那么我认为这是阅读文本文件的更合适的方式

```
 public DataTable GetDataTableFromTextFile(string filepath) 
    {
                                string line;
                                DataTable dt = new DataTable();                         
                                using (TextReader tr = File.OpenText(filepath))
                                {
                                    while ((line = tr.ReadLine()) != null)
                                    {
                                        string[] items = line.Split('\t');
                                        if (dt.Columns.Count == 0)
                                        {
                                            dt.Columns.Add(new DataColumn("FirstColumn", typeof(string)));
                                            dt.Columns.Add(new DataColumn("SecondColumn", typeof(string)));
                                            dt.Columns.Add(new DataColumn("ThridColumn", typeof(string)));

                                        }

                                        if (items.Length > 0 && !string.IsNullOrWhiteSpace(items[0].ToString()))
                                        {
                                            dt.Rows.Add(items);                                       
                                        }
                                    }
                                }
    return dt;

} 
```

完全希望这对您有所帮助。

您可以根据需要添加列。并且 dt.rows.add(item) 将仅在行中添加列，因为它具有例如 item 只有两个项目，然后该行将仅添加两列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:18:18.607

您还可以读取整个字符串 - `ReadToEnd()`，我认为 - 并使用正则表达式仅获取数字。应该有很多关于实际表达的例子。正则表达式类是一个很好的类。只要您想要的只是数字，这将是真正动态的。制表符、字符串 - 完全被忽略。

# java - 从数组中删除某些元素？

> ID：10601759
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:28:29.577
> 
> 标签：java, arrays

我需要我的代码向后看一个数组，比如：`[20, 15, 9, 2, 11, 9, 11, 10, 3]`。

它需要找到满足在元素 + - 2 创建的区间内的元素。

前任。3 创建区间 [1-5] 因为下一个元素比区间高 10。我们移动到创建区间 [8-12] 的元素 10，我们看到 11、9、11、9 和 10 本身在该区间内，将它们添加到新数组中。（高于区间的元素应该会使代码中断，较小的元素是可以的）。

输入前：`[20, 15, 9, 2, 11, 9, 11, 10, 3]` 输出前：`[9, 2, 11, 9, 11, 10, 3] or [9, 11, 9, 11, 10]`

输入前：`[20, 15, 9, 2, 11, 20, 11, 10, 3]` 输出前：`[11, 10, 3]`或`[11, 10]`

我已经尝试了很多方法，因为我很新，所以我对能够在数组中做什么不是很有经验。我在网上看了一点运气。

到目前为止，我想出的是：

```
List<Integer> thetops = new ArrayList<Integer>();
double lowerFactor = 0.8;
double upperFactor = 1.2;

for(int k = tops.size()-1; k > 0; k--){
    double lowerLimit = tops.get(k) * lowerFactor;
    double upperLimit = tops.get(k) * upperFactor;

    if (tops.get(k-1) > upperLimit){
        k=k-1;

        }
    if (tops.get(k) >= lowerLimit && tops.get(k) <= upperLimit){
        thetops.add(tops.get(k));
    }
} 
```

我试图做的是选择最后一个元素，如果下一个元素高于移动到该元素的间隔，则从该值创建一个间隔。但如果下一个元素在该区间内，则将其添加到新数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:42:48.833

如果我理解正确，您想删除所有高于特定阈值的值并删除重复项，对吗？

如果是这种情况，则尝试使用`SortedSet`（或`SortedMap`），将所有值添加到将删除重复项的集合中，然后获取该排序集的头集，即获取小于阈值的所有值（如果阈值应该也被包含，将阈值 + 1 传递给`headSet(...)`方法）。

如果您需要保留数组中的排序，您可能需要使用映射并将值用作键并将数组索引用作值。

# mysql - MySQL - 如何获取主机名/IP 以及哪个用户对 MySQL 服务器进行黑客攻击？

> ID：10601767
> 
> 赞同：0
> 
> 时间：2012-05-15T13:28:45.647
> 
> 标签：mysql

任何人都可以帮助我从哪个主机名/IP 以及哪个用户对 MySQL 服务器进行黑客攻击吗？我可以看到状态变量的高价值`Aborted_connects`并且它不断增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:34:35.930

# android - 调试Android应用安装错误？

> ID：10601769
> 
> 赞同：0
> 
> 时间：2012-05-15T13:28:49.817
> 
> 标签：android, debugging, google-play

从我在 Android Market (Google Play) 上的应用程序中，我有时会收到尝试下载它的人的报告，但它没有安装。像这样的事情：`"There has been problem installing on my deviceX"`。

我可以从中获得很少的信息，而用户可能也没有得到它。我如何获得有关此的更多相关信息，为什么对他们来说失败（什么是已知的安装问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:22:24.813

您可以要求使用崩溃应用程序的用户安装**android logcat catcher 应用程序**并将安装结果邮寄给您。有关详细信息，请参阅[send-logcat-output-of-an-app-to-an-eiladress](https://stackoverflow.com/questions/2852181/send-logcat-output-of-an-app-to-an-emailadress)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:22:56.843

发生这种情况时，logcat 中通常会有一些有用的信息——您可以尝试让他们使用 logcat 应用程序并向您发送日志。

# git - 在 git 中检索已删除的文件

> ID：10601772
> 
> 赞同：1
> 
> 时间：2012-05-15T13:28:55.320
> 
> 标签：git, github

我有一个我认为是 .gitignored 的用户数据文件夹，但是我错了，当我拉动时我遇到了冲突。

目前，如果我输入“git status”，我会得到一个文件列表（例如“已删除：projects/tom/demo_project/1_2.mp3”），但它们实际上已被删除。

是否有可能恢复这些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:21:54.423

假设所有内容之前都已添加到本地存储库，您可以使用`git reset --hard`命令将本地存储库恢复到`git pull`执行命令之前的状态。

[此页面](http://git-scm.com/2011/07/11/reset.html)`reset`包含的有关该命令的信息比您想要的更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:22:29.537

如果最近可能没有添加杜鹃，

```
git log -a --oneline -- \*/cuckoos/glob/* 
```

将显示添加或更改它们的提交，并且

```
git log -a --source --decorate --ancestry-path --oneline --graph ^the-1st-of-them 
```

将显示所有被污染的东西——运气好的话，你当前分支上的一个简短列表。如果是这样，重置会很好。否则，您将前往`filter-branch`领土。

除非你已经进入并明确告诉 git 让你的屁股变得严酷，否则 git 不会忘记它在过去 90 天内看到的*任何*东西，甚至是你添加然后放弃而没有提交的东西。你可以用 git 看到的任何东西来重现和玩混合匹配。

# javascript - 如果没有锚标签，如何从第 1 页跳转到第 2 页中的特定部分

> ID：10601782
> 
> 赞同：0
> 
> 时间：2012-05-15T13:29:10.530
> 
> 标签：javascript, html

如果第 2 页中没有锚标记，如何从第 1 页跳转到第 2 页中的特定部分 .. 尝试`<a href=#sectionname`但没有希望。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:32:55.507

您不需要第 2 页上该部分的 x / y 位置，但请查看以下内容：

[http://www.w3schools.com/jsref/met_win_scrollto.asp](http://www.w3schools.com/jsref/met_win_scrollto.asp)

如果您有这些详细信息，应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:35:26.380

在第 1 页中，您应该有一个指向第 2 页的链接（锚标记）

```
<a href="page2.html#yoursection"> 
```

在第 2 页中，您需要一个带有 id="yoursection" 的标签，例如

```
<div id="yoursection"> 
```

那应该工作

# wix - RemoveExistingProducts 决定

> ID：10601784
> 
> 赞同：1
> 
> 时间：2012-05-15T13:29:27.953
> 
> 标签：wix, windows-installer, wix3.5

在链接[http://msdn.microsoft.com/en-us/library/windows/desktop/aa371197%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371197%28v=vs.85%29.aspx)中，我们看到旧文件已被删除。请告诉我们这是什么意思，识别文件的时间有多长？

问题是：“RemoveExistingProducts 怎么知道要删除什么？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:05:54.907

它使用属性 UpgradeCode。以下是更多详细信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa372375 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372375(v=vs.85).aspx)

# iphone - 如何显示来自 FBgraph API 的错误消息

> ID：10601788
> 
> 赞同：0
> 
> 时间：2012-05-15T13:29:36.660
> 
> 标签：iphone, xcode, facebook-graph-api

我正在使用`FBgraph API`，现在我想在一行中打印错误消息，例如

> (#341) 已达到 Feed 操作请求限制

以下是来自 FBgraph API 的响应：

```
Error Domain=facebookErrDomain Code=10000 "The operation couldn’t be completed. (facebookErrDomain error 10000.)" UserInfo=0x6b273c0 {error=<CFBasicHash 0x6b26560 [0x1c91b48]>{type = mutable dict, count = 3,
entries =>
    2 : <CFString 0x6b26380 [0x1c91b48]>{contents = "type"} = <CFString 0x6b26990 [0x1c91b48]>{contents = "OAuthException"}
    3 : <CFString 0x6b26930 [0x1c91b48]>{contents = "message"} = <CFString 0x6b268d0 [0x1c91b48]>{contents = "(#341) Feed action request limit reached"}
    6 : <CFString 0x6b271d0 [0x1c91b48]>{contents = "code"} = 341
}
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T22:30:14.943

我相信该请求带有您可以阅读的 3 种不同类型的错误消息。错误 [错误本地化描述] [错误描述]

其中之一可能会为您提供所需的线路。

哦，还有[错误用户信息]

# scala - Scala 中的 C++ 嵌套类

> ID：10601790
> 
> 赞同：1
> 
> 时间：2012-05-15T13:29:39.370
> 
> 标签：scala, nested-class

我正在学习 Scala，我来自 C++（很少有 Java 经验）。在我工作的地方，我们经常使用以下模式：

```
class SomeClass {
 public:
  class Options {
    ...
  };
  SomeClass(const Options& options);
  ...
};

int main() {
  SomeClass::Options options;
  options.a = ...;
  ...
  SomeClass* sc = new SomeClass(options);
} 
```

我如何在 Scala 中模拟它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:34:36.673

# android - 未检查条件

> ID：10601791
> 
> 赞同：0
> 
> 时间：2012-05-15T13:29:39.547
> 
> 标签：android

```
if((!phonenumber.equals("9096350204"))||(!phonenumber.equals("+919096350204")))
  {

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phonenumber, null, "Booking Successful...", null, null);  

 } 
```

在任何情况下它都会向接收者发送短信？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:31:07.673

你需要`&&`：

```
((!phonenumber.equals("9096350204"))&&(!phonenumber.equals("+919096350204"))) 
```

或者：

```
(! (phonenumber.equals("9096350204") || phonenumber.equals("+919096350204") ) 
```

因为每个字符串都将返回 false`.equals("9096350204")`或者`.equals("+919096350204")`因为没有字符串可以同时是它们。（见[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)）

# iphone - 是否允许对 MKMapView 进行“截图”并允许用户发布到 twitter、facebook 等？(iPhone / iPad)

> ID：10601794
> 
> 赞同：1
> 
> 时间：2012-05-15T13:29:52.323
> 
> 标签：iphone, ipad, google-maps, uiimage, mkmapview

我试图弄清楚谷歌是否允许在`MKMapView`其他地方使用的截图。我环顾四周，发现了以下`UIImage`从本文`MKMapView`中详细介绍[的](https://stackoverflow.com/questions/4159596/make-a-uiimage-from-a-mkmapview)创建方法。

`UIImage`我担心的是，如果我使用此代码创建允许用户将其发布到 Facebook、Twitter 和其他社交网站的意图，谷歌会对此大惊小怪，或者苹果会拒绝该应用程序。

我也在网上浏览了一下，发现了谷歌对谷歌地图[的使用条款政策](http://code.google.com/apis/maps/iphone/terms.html)，但我仍然不清楚它是否允许。

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:27:55.970

[我相信iPhone 条款](http://code.google.com/apis/maps/iphone/terms.html)的第 10.1 条禁止这样做（相当于[通用条款](https://developers.google.com/maps/terms)中的 10.1.1(a) ）：

> 您不得
> 10.1 通过服务中提供的技术或方式以外的任何技术或方式，或通过 Google 可能指定的其他明确授权方式访问或使用服务或任何内容；

“内容”包括地图图像，`UIImage`服务中未提供，也未明确授权。

生成图像的正确方法是使用静态地图 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:09:01.060

根据 Term 10.3，如果要提高性能可能没问题，但我想你必须将图像保存在 RAM 中。

> 10.3 预取、缓存或存储任何内容，但您可以临时、安全地以不允许使用的方式存储有限数量的内容以提高 Maps API 实施的性能服务之外的内容；

# windows - Windows phone7 列表选择器

> ID：10601796
> 
> 赞同：1
> 
> 时间：2012-05-15T13:30:00.280
> 
> 标签：windows, silverlight, windows-phone-7, silverlight-4.0, windows-phone-7.1

在我的 windows phone7 应用程序中，我必须使用类似于下拉列表控件的控件。所以我遇到了提供 WP7 工具包程序集的 ListPicker。

我遇到的问题是，它与页面中的其他元素重叠。以下是界面截图。

![在此处输入图像描述](../Images/c0ca376826580534b184dcd862b8878e.png)

当我单击 ListPicker 时，它会展开列表并允许我从中选择一项。但是当我选择一个项目时，它会单击出现在该项目下方的按钮。我可以，`ExpansionMode="FullScreenOnly"`但它会进入全屏模式，因为列表选择器只有 3 个项目，这不是我想要的方式。

有谁知道我可以让 ListPicker 展开并从中选择一个而不发生位于其下方的按钮单击的任何方式。

**编辑**

我已经安装`WP7 Tool kit for Silverlight`并将 dll 添加到项目中作为参考`Microsoft.Phone.Controls.Toolkit`

XAML--->

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"

<toolkit:ListPicker Name="listPicker1"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:55:05.420

我怀疑您正在使用 Canvas 来布局控件。如果您使用 Grid，则 ListPicker 将与您放置在其下方的任何其他控件一起工作（在展开列表时自动移动其下方的控件）：-

```
 <Grid x:Name="ContentPanel"
          Grid.Row="1"
          Margin="12,0,12,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <toolkit:ListPicker x:Name="MyListPicker"
                            Grid.Row="0">
            <toolkit:ListPicker.Items>
                <toolkit:ListPickerItem Content="item1" />
                <toolkit:ListPickerItem Content="item2" />
                <toolkit:ListPickerItem Content="item3" />
            </toolkit:ListPicker.Items>
        </toolkit:ListPicker>
        <Button x:Name="MyButton"
                Content="Check availability"
                Click="MyButton_Click" Grid.Row="1"/>
    </Grid> 
```

# jquery - 用jquery从字符串中提取数字

> ID：10601797
> 
> 赞同：1
> 
> 时间：2012-05-15T13:30:06.520
> 
> 标签：jquery, regex

我需要从字符串中提取数字

```
<p id="example">etc etc(5)</p>
<p id="example2">etc etc(-5)</p> 
```

我正在使用此代码

```
alert($("#example").text().match(/\((\d+)\)/)[1]); 
```

如果数字是正数，它可以正常工作，但在负数的情况下会出错

```
Uncaught TypeError: Cannot read property '1' of null 
```

请帮助我，谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T13:34:47.723

试试这个：

```
.match(/\((-?\d+)\)/)[1] 
```

`-?`说“可选减号”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:34:23.387

试试这个：

```
alert($("#example").text().match(/\((-?\d+)\)/)[1]);​ 
```

这也将捕获负数。

# javascript - Google Maps API V3 活动

> ID：10601799
> 
> 赞同：2
> 
> 时间：2012-05-15T13:30:10.637
> 
> 标签：javascript, events, google-maps-api-3

我想要这个代码

```
 google.maps.event.addListener(map, 'click', function(event) {
      var marker = new google.maps.Marker({
      position: event.latLng
   }); 
      var outsideContent = "my content";
       infowindow.setContent(outsideContent);
      infowindow.open(map, marker);
      }); 
```

如果在不存在覆盖/多边形的地方单击地图，则打开信息窗口。但是，代码没有执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:48:45.823

Javascript 区分大小写。infoWindow 和 infowindow 指的是两个不同的东西。

```
infoWindow.setContent(outsideContent);
infowindow.open(map, marker); 
```

不确定这实际上是您的问题（我希望仍然会看到一个空白的信息窗口）。当然，您不需要标记来打开信息窗口，例如查看我的这篇博客文章，展示[如何将信息窗口添加到地图以响应用户点击](http://duncan99.wordpress.com/2011/11/04/google-maps-api-adding-infowindows-in-response-to-user-clicks/)。

从理论上讲，这应该对您有用：

```
<script type="text/javascript">
function initialize() {
    var myOptions = {
        zoom: 10,
        center: new google.maps.LatLng(50.820645,-0.137376),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var infowindow =  new google.maps.InfoWindow({
        content: 'my content'
    });

    google.maps.event.addListener(map, 'click', function(event) {
        infowindow.setPosition(event.latLng);
        infowindow.open(map);
    }); 
}

google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

问题可能源于您拥有的任何其他事件侦听器，也可能源于您正在进行的 KML 层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:33:55.447

看起来您定义地图`click`侦听器的位置有问题，它位于`generateInfoWindow`函数内部，似乎只能从`zoomtoaddress`函数调用。

如果您将该侦听器设置移到您在`intialize`函数中创建地图的位置旁边，我认为您应该很好地`InfoWindow`在单击地图时打开：

```
function initialize() {
    // ...
    map = new google.maps.Map(document.getElementById('map_canvas'), options);

    // Move your event listener definition right here:
    google.maps.event.addListener(map, 'click', function(event) {
        var marker = new google.maps.Marker({ position: event.latLng }); 
        var outsideContent = "outside content replaced for brevity";
        infowindow.setContent(outsideContent);    //include var name correction
        infowindow.open(map, marker);
    });

    //the rest of initialize...
} 
```

此外，如果您希望显示在事件侦听器中创建的标记，您还必须传递 的`map`属性`MarkerOptions`。看起来您可能不希望显示标记，所以我把它省略了 -

# javascript - 屏幕外切换显示不显示

> ID：10601800
> 
> 赞同：2
> 
> 时间：2012-05-15T13:30:13.170
> 
> 标签：javascript, jquery, asp.net, highcharts

我们正在努力将 HighCharts 集成到我们现有的 ASP.NET 站点中，并且遇到了一个已知错误。这个错误是最初设置为 display:none 然后切换为显示不正确的元素显示不正确，因为某些浏览器无法计算隐藏对象的尺寸（例如 IE8）。[此处](http://highslide.com/forum/viewtopic.php?f=10&t=10712)和[此处](http://jqueryui.com/demos/tabs/#Why_does..)（在页面底部）提出的修复是为了做到这一点：

```
.hidden-container {
   position: absolute;
   top: -9999em;
} 
```

如果您使用 jQuery CSS 来设置位置，这一切都很好。我们在后面的代码中设置位置和其他属性，例如：

```
 If showExpanded Then
        collapsedPanel.Style.Item("Display") = "none"
        expandedPanel.Style.Item("Display") = "block"
    Else
        collapsedPanel.Style.Item("Display") = "block"
        expandedPanel.Style.Item("Display") = "none"
    End If 
```

我可以将这些图表面板编辑为：

```
 If showExpanded Then
        collapsedPanel.Style.Item("Display") = "none"
        expandedPanel.Style.Item("Display") = "block"
    Else
        collapsedPanel.Style.Item("Display") = "block"
        expandedPanel.Style.Item("position") = "absolute"
        expandedPanel.Style.Item("top") = "-9999em"
    End If 
```

我们在 javascript 文件中像这样切换隐藏/显示面板：

```
function showHidePanelToggle(ctlID, sPnlID, hPnlID) {
    var chkBoxID = $('#' + chkID);
    var controlID = $('#' + ctlID);
    var showPanelID = $('#' + sPnlID);
    var hidePanelID = $('#' + hPnlID);
    if (controlID.attr('type') == 'checkbox') {
        chkID = false;
        if (controlID.is(':checked')) {
            showPanelID.slideUp('normal');
            hidePanelID.slideDown('normal');
        }
        else {
            showPanelID.slideDown('normal');
            hidePanelID.slideUp('normal');
        }
    }
    else {
        ctlID = false;
        if ((hidePanelID).is(':hidden')) {
            showPanelID.slideUp('normal');
            hidePanelID.slideDown('normal');
            chkBoxID.attr('checked', true);
            return false;
        }
        else {
            showPanelID.slideDown('normal');
            hidePanelID.slideUp('normal');
            chkBoxID.attr('checked', false);
            return false;
        }
    }
} 
```

我添加了检查以查看我是否在特殊的面板（图表）中，我正在这样做：

```
if ((hidePanelID).position(':absolute')) {
                showPanelID.slideUp('normal');
                hidePanelID.slideDown('normal');
                chkBoxID.attr('checked', true);
                return false;
            }
            else {
                showPanelID.slideDown('normal');
                hidePanelID.slideUp('normal');
                chkBoxID.attr('checked', false);
                return false;
            } 
```

这不是重新显示我的面板（我猜是因为它仍然设置为 -9999em。

我的问题是，我怎样才能让我的屏幕外面板正确显示？不幸的是，我们没有使用 jQuery CSS 文件来设置隐藏/显示和重写整个系统以使用这个新的 CSS 是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:52:55.650

尝试在以下代码块中将“位置”和“顶部”值重置为默认值：

```
If showExpanded Then
    collapsedPanel.Style.Item("Display") = "none"
    expandedPanel.Style.Item("Display") = "block" // No need for this line?
    expandedPanel.Style.Item("position") = "static"
    expandedPanel.Style.Item("top") = "auto"
Else
    collapsedPanel.Style.Item("Display") = "block"
    expandedPanel.Style.Item("position") = "absolute"
    expandedPanel.Style.Item("top") = "-9999em"
End If 
```

# php - 在表单提交上插入多条记录 - Yii

> ID：10601803
> 
> 赞同：2
> 
> 时间：2012-05-15T13:30:31.563
> 
> 标签：php, yii

```
public function actionCreate()
{
    $model=new events;      

    if(isset($_POST['events']))
    {

        $model->event_title         =   $_POST['events']['event_title'];
        $model->event_description   =   $_POST['events']['event_description'];
        $model->event_repeat_option =   $_POST['events']['event_repeat_option'];
        $model->event_start_date    =   date('Y-m-d H:i:s');
        $model->event_end_date      =   date('Y-m-d H:i:s');
        $model->user_id             =   yii::app()->user->getState('user_id');
        $model->deal_id             =   "1";
        $model->event_type          =   "1";
        $model->event_creation_date =   date('Y-m-d H:i:s');    

        if($model->save())
            $this->redirect(array('view','id'=>$model->event_id));
    }
} 
```

插入多条记录？为什么？没有错误，没有错误......数据正在完美插入......但一次有多个记录。

我做了 Print_r($model->attributes);

```
Array
(
    [event_status] => 1
    [event_title] => test1
    [event_description] => test1
    [event_repeat_option] => test1
    [event_start_date] => 2012-05-15 18:45:40
    [event_end_date] => 2012-05-15 18:45:40
    [user_id] => 3
    [deal_id] => 1
    [event_type] => 1
    [event_creation_date] => 2012-05-15 18:45:40
    [event_id] => 
) 
```

...那里一切都很好，但仍然有一些错误...无法跟踪它。有什么建议吗？

模型属性

```
/**
 * This is the model class for table "user_events".
 *
 * The followings are the available columns in table 'user_events':
 * @property integer $event_id
 * @property integer $user_id
 * @property string $event_type
 * @property integer $deal_id
 * @property string $event_creation_date
 * @property string $event_start_date
 * @property string $event_end_date
 * @property string $event_title
 * @property string $event_description
 * @property integer $event_repeat_option
 *  *
 * The followings are the available model relations:
 * @property Deals $deal
 * @property RepeatOptions $eventRepeatOption
 * @property Users $user */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T05:51:21.660

我认为这是因为 AJAX 验证女巫正在向 createAction 发送请求（在您的情况下）。您可以在表单小部件中关闭 ajax 验证，例如：

```
 $form = $this->beginWidget('CActiveForm', array(
        'id'=>'your-form',
        'enableAjaxValidation'=>false, //<- this is important      
    )); 
```

但是，如果您真的需要 ajax 验证，您可以检查控制器中的 ajax 请求，例如：

```
public function actionCreate()
{
$model=new events;      

if(isset($_POST['events']))
{
    ... //Your stuff. Assigning attributes etc.
    if(!Yii::app()->request->isAjaxRequest){
        if($model->save())
            $this->redirect(array('view','id'=>$model->event_id));
    }
} 
```

}

在这种情况下，它只会在不是 ajax 请求时保存记录：)。试试看，我希望这就是你要找的。

问候

# c++ - 对 C++ 库的未定义引用

> ID：10601804
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:30:31.983
> 
> 标签：c++, undefined-reference

我正在尝试用 test.cpp 文件编译一个库，但即使

我得到了所有需要的东西，我仍然得到：

```
test.cpp:(.text+0x24): undefined reference to `initdevice(char*)'
test.cpp:(.text+0x4c): undefined reference to `write2device(char*, int)'
test.cpp:(.text+0x68): undefined reference to `closedevice()'
test.cpp:(.text+0x79): undefined reference to `write2device(char*, int)'
collect2: ld returned 1 exit status 
```

主要功能：

```
#include <fstream>
#include <iostream>
#include <stdio.h>
#include <setjmp.h>
#include <signal.h>
#include <string.h>
#include <unistd.h>
#include <sys/time.h>
#include <limits.h>
#include <set>
#include <map>
#include <stdlib.h>
#include <assert.h>
#include <pthread.h>
#include "writerThread.h"
#include "outputdevice.h"
using namespace std;

int writeToFile();

#define FILE_NAME   "/cs/stud/elishae/Documents/elisha.txt"

int main()
{
int status, id;

char *buf = (char *) malloc(10);
buf = "elishaefla";

//writeToFile();

status = initdevice("testFile.txt");

printf("status = %d\n", status);

id = write2device(buf, 10);

printf("id = %d\n", id);

closedevice();

id = write2device(buf, 10);

//printf("id = %d\n", id);

} 
```

包含所需功能的文件：

```
#include <fstream>
#include <iostream>
#include <stdio.h>
#include <setjmp.h>
#include <signal.h>
#include <string.h>
#include <unistd.h>
#include <sys/time.h>
#include <limits.h>
#include <set>
#include <map>
#include <stdlib.h>
#include <assert.h>
#include <pthread.h>
#include "writerThread.h"
using namespace std;

vector<TaskInfo *> taskQueue;

pthread_t writerThread;

pthread_mutex_t taskQueueMutex, condMutuex;

pthread_cond_t newTasksCond;

bool keepRunning;

int gMaxId;

int initdevice(char *filename)
{

int status;

keepRunning = true;

status = initWriterTrhead(&taskQueue, filename, &newTasksCond, &keepRunning);

status = pthread_mutex_init(&taskQueueMutex, NULL);

status = pthread_cond_init(&newTasksCond, NULL);

status = pthread_create(&writerThread, NULL, writerThreadMain, (void *) 1);

return status;
}

int write2device(char *buffer, int length)
{

/*
 * flow: 1) get mutux for taskMap.
 *       2) iterate over map, find lowest ID open to use - either free entry, or entry with wasItWritten == true.
 *       3) write buffer to map.
 *       4) return.
 */

unsigned int i;
TaskInfo *newTask, *taskTemp;
bool emptyEntryFound = false;

char *bufferCopy = (char *) malloc(length);

memcpy(bufferCopy, buffer, length);

newTask = (TaskInfo *) malloc(2*sizeof(int) + sizeof(bool) + length);
newTask->length = length;
newTask->buffer = bufferCopy;
newTask->wasItWritten = false;

pthread_mutex_lock(&taskQueueMutex);
// insert new task to taskMap TODO: check this code... really not sure it's working
for(i = 0; i < taskQueue.size(); i++)
{
    taskTemp = taskQueue.at(i);

    if(NULL == taskTemp)
    {
        printf("ERROR!!! write2device()\n");
        exit(-1);
    }
    if(taskTemp->wasItWritten == true)
    {
        taskTemp = newTask;
        emptyEntryFound = true;
        break;
    }

}

if(false == emptyEntryFound)
{
    // no empty entries on taskQueue, so we'll insert a new entry
    taskQueue.push_back(newTask);

}

newTask->taskId = i;

pthread_mutex_unlock(&taskQueueMutex);

// signal to writerThread new task was inserted to taskQueue
pthread_cond_signal(&newTasksCond);

printf("vector size = %d\n", taskQueue.size());

return newTask->taskId;
} 
```

生成文件：

```
.SUFFIXES:      .o .cpp

.cpp.o :
        g++  -Wall -c -o $@ $<

all:    liboutputdevice.a

# remove the old tapestry library and remake the new one
liboutputdevice.a:  outputdevice.o writerThread.o 
        rm -f $@
        ar rc $@ outputdevice.o writerThread.o

# cleaning all created files    
clean:
        rm -f *.o liboutputdevice.a 
```

在我构建了库之后。有了make，这就是我接下来要做的事情。

我试图一起编译的方式：

```
g++ -Wall -lpthread liboutputdevice.a test.cpp 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:33:45.540

将库放在最后：

> g++ -Wall -pthread test.cpp liboutputdevice.a

使用`-pthread`代替`-lpthread`（参见[gcc - 编译时 -pthread 标志的意义](https://stackoverflow.com/questions/2127797/gcc-significance-of-pthread-flag-when-compiling)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:33:48.110

添加`-loutputdevice`到您的链接行：

```
g++ -Wall test.cpp -lpthread -loutputdevice 
```

`-L`（如果库不在当前目录中，您可能也需要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:35:43.870

试试看：g++ -Wall -lpthread -Llibrarypath/liboutputdevice.a test.cpp

# c# - 应用程序创建的目录的未授权访问异常（IIS 锁定文件）

> ID：10601806
> 
> 赞同：0
> 
> 时间：2012-05-15T13:30:44.677
> 
> 标签：c#, .net, file-upload, file-io, file-permissions

我有一个程序，用户可以在其中上传照片并将其存储在应用程序中（例如 ~/files/ac9ff990-273c-4fda-a51a-155c54db72ab/original/photo1.jpg）。稍后用户可以删除该文件。这工作得很好，除了当所有子文件和文件夹都被删除时，告诉级别的文件夹（这个 GUID 文件夹）仍然存在并且我得到一个 Unauthorizedaccessexception 错误抛出。我留下了大量的空文件夹，这在处理 1000 次上传时真的很烦人。

我看不出它是如何成为权限的，因为权限并没有什么奇怪的，而且我在桌面上遇到的问题与在实时服务器上的问题相同。我已关闭索引并尝试在没有任何运气的情况下授予“所有人”权限，并将文件夹所有者设置为不同的用户而没有任何运气。（我也没有在 Windows 资源管理器中打开该文件夹）

我看不出这可能是一个权限问题，因为 .NET 应该使用相同的文件夹来创建它作为删除它。有任何想法吗？

公共类 FileManager { 私有静态 ILog 日志 = LogManager.GetLogger(typeof(FileManager)); 公共枚举 UPLOAD_TYPE : int { ORIGINAL_FILE = 1, PROCESSED_FILE = 2, ANCILLARY_FILE = 3 }

```
 private const string userFilesFolder = "~/files/";
    private const string originalSubFolder = "original/";
    private const string processedSubFolder = "processed/";
    private const string ancillarySubFolder = "ancillary/";

    internal static void DeleteJobItemFiles(Guid jobItemId)
    {
        if (jobItemId == Guid.Empty)
            throw new ApplicationException("jobItemId is Empty");

        try
        {
            var directory = GetDirectory(jobItemId);

            string routePath = HttpContext.Current.Server.MapPath(HttpUtility.UrlDecode(directory.AbsolutePath));
            if (Directory.Exists(routePath))
                Directory.Delete(routePath, true);
        }
        catch (HttpException exception)
        {
            throw new UploadManagerException(ERROR_CODE.HTTP_CONTEXT_NULL, exception);
        }
        catch (Exception exception)
        {
            throw new UploadManagerException(ERROR_CODE.GENERAL_FILE, exception);
        }
    }

    internal static string SaveFile(Guid jobItemId, Stream inputStream, UPLOAD_TYPE uploadType, string fileName)
    {
        if (jobItemId == Guid.Empty)
            throw new ArgumentException("jobItemId is Empty");
        if (inputStream == null)
            throw new ArgumentNullException("inputStream");
        if (fileName == null)
            throw new ArgumentNullException("fileName");

        if (inputStream.CanSeek)
            inputStream.Position = 0;

        Regex rgx = new Regex("[^a-zA-Z0-9 -_\\.]");
        fileName = rgx.Replace(fileName, "");
        fileName = fileName.Replace(" ", "");

        var directoryPathUri = GetDirectory(jobItemId, uploadType);
        // New file Uri
        var fileUri = new Uri(directoryPathUri, fileName);

        try
        {
            string localDirectoryPath = HttpContext.Current.Server.MapPath(HttpUtility.UrlDecode(directoryPathUri.AbsolutePath));
            string localFilePath = HttpContext.Current.Server.MapPath(HttpUtility.UrlDecode(fileUri.AbsolutePath));

            if (!Directory.Exists(localDirectoryPath))
                Directory.CreateDirectory(localDirectoryPath);

            using (FileStream outputStream = File.Create(localFilePath))
            {
                Byte[] buffer = new Byte[256];
                inputStream.Position = 0;
                int bytesRead;
                do
                {
                    bytesRead = inputStream.Read(buffer, 0, buffer.Length);
                    if (bytesRead > 0)
                        outputStream.Write(buffer, 0, bytesRead);
                }
                while (bytesRead > 0);
            }
        }
        catch (IOException exception)
        {
            log.Error("Unexpected exception in FileManager.SaveFile", exception);
            throw new UploadManagerException(ERROR_CODE.FILE_SAVE, exception);
        }
        catch (HttpException exception)
        {
            throw new UploadManagerException(ERROR_CODE.HTTP_CONTEXT_NULL, exception);
        }
        catch (Exception exception)
        {
            throw new UploadManagerException(ERROR_CODE.GENERAL_FILE, exception);
        }

        var rootUri = GetDirectory();
        return VirtualPathUtility.ToAppRelative(fileUri.AbsolutePath);
    }

    private static Uri GetDirectory()
    {
        // Root of site
        try
        {
            return new Uri(HttpContext.Current.Request.Url, HttpContext.Current.Request.ApplicationPath);
        }
        catch (HttpException exception)
        {
            throw new UploadManagerException(ERROR_CODE.HTTP_CONTEXT_NULL, exception);
        }
    }

    private static Uri GetDirectory(Guid jobItemId)
    {
        if (jobItemId == Guid.Empty)
            throw new ArgumentException("jobItemId is Empty");

        var rootUri = GetDirectory();
        //Folder where all files are stored
        var userFilesUri = new Uri(rootUri, VirtualPathUtility.ToAbsolute(userFilesFolder));
        //Folder for job
        return new Uri(userFilesUri, jobItemId.ToString() + "/");
    }

    private static Uri GetDirectory(Guid jobItemId, UPLOAD_TYPE uploadType)
    {
        if (jobItemId == Guid.Empty)
            throw new ArgumentException("jobItemId is Empty");

        string subFolder;
        switch (uploadType)
        {
            case UPLOAD_TYPE.ORIGINAL_FILE:
                subFolder = originalSubFolder;
                break;
            case UPLOAD_TYPE.PROCESSED_FILE:
                subFolder = processedSubFolder;
                break;
            case UPLOAD_TYPE.ANCILLARY_FILE:
                subFolder = ancillarySubFolder;
                break;
            default:
                throw new NotImplementedException();
        }
        //Folder for file
        return new Uri(GetDirectory(jobItemId), subFolder);
    }
} 
```

重要更新：这似乎是由 IIS 锁定文件或类似原因引起的。我试图删除的图像显示在页面上。当 WCF 调用来删除页面时，无法删除文件夹。如果我编辑 HTML 以便不显示图像，则可以删除文件夹。对任何人都有意义吗？

# android - 如何从asp.net webservice检索base64字符串到android

> ID：10601813
> 
> 赞同：2
> 
> 时间：2012-05-15T13:30:54.183
> 
> 标签：android, asp.net, web-services, android-intent, android-networking

# 我需要将 base64 字符串接收到 android 应用程序，但我从 webservice 获得了字符串，

**服务器端

```
 [WebMethod]
    public string IMAGE(string ID)
    {

        SqlConnection conn = new SqlConnection("Data Source=.in;Initial Catalog=;User ID=;password=");
        conn.Open();
        SqlDataAdapter sdImageSource = new SqlDataAdapter();
        sdImageSource.SelectCommand = new SqlCommand("select * from table where Ordno=('" + ID + "')", conn);
        DataSet dsImage = new DataSet();
        sdImageSource.Fill(dsImage);

        byte[] blob = (byte[])dsImage.Tables[0].Rows[0]["Column_name"];
        string c = Convert.ToBase64String(blob);
        //c = c.Replace(" ", "");
        return c;
    } 
```

# 它在字符串引号内正确返回字符串我应该如何在客户端或android端接收，有人可以帮我吗

**客户端

*安卓主文件

```
package com.imageload;

import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.util.Base64;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

public class ImageloadActivity extends Activity {
    /** Called when the activity is first created. */

    Bitmap image; 
     ImageView imageView;
     private Button butt;
     String Str="image",error="0";

        private static final String SOAP_ACTION = "http://tempuri.org/IMAGE";
        private static final String METHOD_NAME = "IMAGE";
        private static final String NAMESPACE = "http://tempuri.org/";

        private static final String URL = "http://192.168.1.213/WebSite4/Service.asmx";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

         this.butt = (Button) this.findViewById(R.id.button1);
          this.imageView =(ImageView) findViewById(R.id.imageView1);

        this.butt.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                if(error.equals("0"))
                {
                    SoapObject request = new SoapObject(NAMESPACE,METHOD_NAME);
                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                    envelope.dotNet=true;

                    request.addProperty("ID","1001");                                                                               
                    envelope.setOutputSoapObject(request);
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                        try
                        {

                            try 
                            {
                                androidHttpTransport.call(SOAP_ACTION, envelope);
                            } 
                            catch (XmlPullParserException e)
                            {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }                           

                        ##this is the place wher iam receiving the base64 string but i dont understand why its not retriving the string ? is it Because of its lenth?#SoapObject result=(SoapObject)envelope.getResponse();

                            SoapObject result=(SoapObject)envelope.getResponse();
                            int count=result.getPropertyCount(); 

                            if(count!=1)
                            {
                                String encodedString=result.getProperty(0).toString();

                                 byte [] encodeByte=Base64.decode(encodedString,Base64.DEFAULT);
                                 image=BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);
                                 imageView.setImageBitmap(image);
                             }
                            else
                            {
                                String result1  = "Invalid Order Number";
                                Toast.makeText(getApplicationContext(),result1 , Toast.LENGTH_LONG).show();
                            }

                        } 
                        catch (IOException e)
                        {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
            }
        });
    }
} 
```

*输出：

```
<string xmlns="http://tempuri.org/">
/9j/4AAQSkZJRgABAQEDIAMgAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAMgA+gDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+qL/guD/yid/bl/7Inqn/AKd9Hr+Vvx1/wRp+GP7Nf/BJj4Ff8FaP2Svi38bfhh+1t8PfgR+z7+0tqs48W6bd+E9QvPFWleDdR8cQaNaWnhuy1nQxajxDe6lp9vPrOqaRe6dYT+Gtb069stVlvrP+qT/guD/yid/bl/7Inqn/AKd9Hr+bb43f8Fff2PvGf/BDD4Qf8E/fgR458QfF79sT4g/syfs3/s1H4SeFPh18R4rrRPF8Wl+AvD/jKyu9e1fwnp3h3V57T+zdW0PTLLwtqmvXeva7daZb6dFJplzPqtrjU5bvmtdQfL3vfp5nTS5+Vct2varm6rltrzdLep+5HxZ/4LYeGvg/8Cv2FNU8PfAL4oftQ/tSftqfAXwL8bfDP7OvwG06bUvENj4d1TwHpXinxd4gvmistZv7TSdLvp9W0/TLe20jUrm8bQtcluWsbPRr68TrdY/4Lj/szW37A3hT9uTw74G+Kniu68b/ABXsP2dPDn7O2maLbr8Y5v2lL2S8Q/Bu90/z5rK11e3gsLrWTfQyXj3egNZXGn6Qbap+1Rqb+Df+Din9jzWNG0KXVX8Lf8E3PjVqWl+GtJhSOfUn0W4+NtzZaJpsEabElvDbR2NpFHHtV5I0VMALX8zf7VH7Ymv/tkfsq/An9pD4+/t+Xvi343eM/2ytLmtP8Agnx8NtN0HwN8MP2fPBPhrxl4njufHXjXwzpCS6v4i1OSzOhXPhLx14tmi1WVfG95p66r4i1G11+5tJcnHmSeqk29FrZRWt336K7fdW1qMFOzauuWKVm9Lub2S7LdtJW6tn9bn7V3/BdDwh+zf+03+0D+yF4Q/ZM/aB/aJ+OvwT8M+BPF2meFfhDpj+IP+E18OeKfBGl+P/E3iOdtJ0jWb3wh4Z+Huh6tYwa9q+o6fqEt5quoaXZ6bYSxXVzdWP6MfsDfttfDL/goR+zB4B/af+FOm654f0Dxi+taXqnhTxMtoNf8JeKfDOq3Oi6/oGpSWE1xY3Qgu7UXmm39rKE1HRr3Tb97eynuZbG2/IH9k2wtZf8Ag46/4Kmao8SNeWn7KX7OdjbzlQXjttQ8B/Ba4u41YgsFml02ydgCATChIJCkbP8Awa9wx23/AATP1C1hXZb2v7Tfxyt7eIE7YYI7/QgkSA/dRQTgDjJJ6kk3GUnKzd03NJWtblatr1vfUiUY+zbStJezd7vXnTvp01V/+AfqV4d/bf0TxD/wUH8dfsAR/DPxhaeIPA/7O9p+0JP8Vp5bQ+CNT0678U+EvC48JWcIjF6Ndjm8WQ3zSPIYPs1hdKF3FSPuWvlzR/2wfgRrn7XXij9iLTdf1KX9ofwd8ILf45694bfw5q8WlW/w6utc0Dw7FqcXiiS0XRLm8bVfE2jwnSobx79Y55J2hEUErL9R1ouut9fu8jJ9NGtFv18/R9AooopiCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAOU8ceBPBHxN8J674C+JHg7wv8QPA3iixfTPEvg3xroGleKfCviHTXdJH0/XPD+t2l9pOq2TyRxyNa31pPAzxo5jLIpHhPw0/Yg/Yw+DHiS18ZfB/9kj9mf4VeL7EubLxT8OfgX8MPBPiO0MkUkDm11vw34X03UoC8MssL+VcpuikkjbKOwP1DRSsuyHd2td27X0PGPjd+zp8BP2lfDFr4L/aC+Dnw1+M/hWw1CPVtO0L4l+DdC8Y6dpmqxRvCmp6XBrlleDTdREEktsb6xNvdNazT2zSmCaWN7j/AAC+BsnwjX4AyfB34YSfA1NETw0vwdk8CeGH+GA8PxyidNFHgVtMPhn+y1uALlbH+zPswuR9oEfnfPXrdFFl2QXfdnz58J/2Tf2YPgR4M8U/Dv4M/s+fBv4YeBfHMd1D438J+CPhz4U8O6F4zhvbKfTbqHxdp+m6XBb+Jop9NubjTZItbS+Q6bNJp+0WbGGvzZ/4Kbfst/tYWf7PPwZ8B/8ABMv4Ufs0an8Ovht40upPin+w546+FXwStPgd8bvhxqmq2PiM+HrLRfGvhuDwf4WuNL8UWV5qM8ei6r4Eu71fFOua3D4gGvadptveftTRQ0mrbemj7/8AD9H1GpNNP4tb2lqm9tf8910dz+dz/gl7+wr+1LN+05+1R+2b+3Z+z98EP2eo/jR8EfAf7Mfw8/ZM+HN14U8ZeCfDXwe8Nafpltruma3Z+H7zxB4LTQNWttC0Wwg8P2upXtvqH2vxHBfaJoek2+j2l7+1l9+y1+zNqnww8NfBLUv2ePgdqHwZ8Ganba34P+El98KPAl38M/Cus2V3fX9nq3hvwJPoUnhfQ9StL7VNTvba+0zS7a6gu9Rv7mKVJry4eT3eilGKirb76vd338vwCU3J322sldJWVtNW9urbfmZOu6BofijQtY8MeJdG0vxD4a8Q6Vf6Fr/h/XLC11XRdc0TVbSWw1TR9X0u/instS0vUrGeey1CwvYJrS8tJpbe5ikhkdGwfh58N/h58IvB2i/Dv4U+BPB3wz8AeG47qHw94H8AeGdG8HeENBivr661S9i0bw34estO0fTI7zU7291G6Sys4FuL68uruUPcXEsj9pRVEnnOo/B74Sav8TND+NGq/C/4e6n8YfDHh+78J+G/itf+DPDt58SPD/ha/e9kvvDWieOLjTpPE2laBeyalqMl3o9hqcGnXEl/evNbu11OZPDD+wF+wy0nxCkm/Y7/AGY7s/FnUrfWPicl/wDAz4aahD491O01SPXba88WW974ang1yWDXok1+L+0I51TXt+tKo1SSS7f65opWT3S+4d33fbd7djzTRPgx8H/DPxB8T/Frw58K/hzoHxU8baRpPh/xl8S9F8FeG9L8f+LdB0G1s7HQ9F8S+MbHTYPEOu6Totlp2n2ek6dqmo3Vpp1rY2dvZwwxWsCJN8L/AIP/AAm+CPhp/BnwY+GHw9+Eng+TVL/XJPCnwz8GeHfAnht9a1Ro31PV20Pwvp2l6Y2p6i8UTX1+bX7VdtHG1xLIUUj0WimF33Z5za/B74S2PxQ1L432Xwv+Htn8Z9Y8LJ4G1f4uWvgzw7b/ABN1TwTFe2Oox+D9R8dxacnii98LR6hpmm36eH7nVJdJS90+xultBPaW8kfo1FFAgooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA4WX4ofDSCWSCf4heCIZoXeKWKXxVocckUkbFXjkRr4MjowKujAMrAqwBBFR/8AC1vhf/0UbwL/AOFZoP8A8n1/KF+yH/wQT/YJ/wCCgP7LHgb4+fFzT/ir4O+KmufGT9sOHxl4m+FXjm10KTx02lftafGHwvoE/iSy8TeHvGFgk3h7w74Z0zSNL/sC20OJrYTyajFqF3ItzH7/AP8AEJf/AMEyf+h3/a0/8Op4F/8AnTVHNPpBNdPe/wDtTXlpK6c53Tadoq107ae8f0ff8LW+F/8A0UbwL/4Vmg//ACfR/wALW+F//RRvAv8A4Vmg/wDyfX84P/EJf/wTJ/6Hf9rT/wAOp4F/+dNR/wAQl/8AwTJ/6Hf9rT/w6ngX/wCdNRef8i/8D/8AtQtR/nn/AOAL/wCSP6Pv+FrfC/8A6KN4F/8ACs0H/wCT6P8Aha3wv/6KN4F/8KzQf/k+v5wf+IS//gmT/wBDv+1p/wCHU8C//Omo/wCIS/8A4Jk/9Dv+1p/4dTwL/wDOmovP+Rf+B/8A2oWo/wA8/wDwBf8AyR/R9/wtb4X/APRRvAv/AIVmg/8AyfR/wtb4X/8ARRvAv/hWaD/8n1/OD/xCX/8ABMn/AKHf9rT/AMOp4F/+dNR/xCX/APBMn/od/wBrT/w6ngX/AOdNRef8i/8AA/8A7ULUf55/+AL/AOSP6Pv+FrfC/wD6KN4F/wDCs0H/AOT6P+FrfC//AKKN4F/8KzQf/k+v5wf+IS//AIJk/wDQ7/taf+HU8C//ADpqP+IS/wD4Jk/9Dv8Ataf+HU8C/wDzpqLz/kX/AIH/APahaj/PP/wBf/JH9H3/AAtb4X/9FG8C/wDhWaD/APJ9H/C1vhf/ANFG8C/+FZoP/wAn1/HL8Gf+Dbf9gXx/+29+2v8As7654u/aTj8B/s9+Cv2VPEPgW5sPiJ4Qg8Q3N/8AGnQvitqXi5fEOoS/De4tL+3guPBWkDRY7TTtOezjkvluZb5pomt/tz/iEv8A+CZP/Q7/ALWn/h1PAv8A86ahSm/sLr9vs7fyjcaS+3PZP4F1Sa+12Z/R9/wtb4X/APRRvAv/AIVmg/8AyfR/wtb4X/8ARRvAv/hWaD/8n1/OD/xCX/8ABMn/AKHf9rT/AMOp4F/+dNR/xCX/APBMn/od/wBrT/w6ngX/AOdNRef8i/8AA/8A7UVqP88//AF/8kf0ff8AC1vhf/0UbwL/AOFZoP8A8n0f8LW+F/8A0UbwL/4Vmg//ACfX84P/ABCX/wDBMn/od/2tP/DqeBf/AJ01H/EJf/wTJ/6Hf9rT/wAOp4F/+dNRef8AIv8AwP8A+1C1H+ef/gC/+SP6Pv8Aha3wv/6KN4F/8KzQf/k+j/ha3wv/AOijeBf/AArNB/8Ak+v5wf8AiEv/AOCZP/Q7/taf+HU8C/8AzpqP+IS//gmT/wBDv+1p/wCHU8C//OmovP8AkX/gf/2oWo/zz/8AAF/8kf0ff8LW+F//AEUbwL/4Vmg//J9H/C1vhf8A9FG8C/8AhWaD/wDJ9fzg/wDEJf8A8Eyf+h3/AGtP/DqeBf8A501H/EJf/wAEyf8Aod/2tP8Aw6ngX/501F5/yL/wP/7ULUf55/8AgC/+SP6Pv+FrfC//AKKN4F/8KzQf/k+j/ha3wv8A+ijeBf8AwrNB/wDk+v5wf+IS/wD4Jk/9Dv8Ataf+HU8C/wDzpqP+IS//AIJk/wDQ7/taf+HU8C//ADpqLz/kX/gf/wBqFqP88/8AwBf/ACR/R9/wtb4X/wDRRvAv/hWaD/8AJ9H/AAtb4X/9FG8C/wDhWaD/APJ9fzg/8Ql//BMn/od/2tP/AA6ngX/501H/ABCX/wDBMn/od/2tP/DqeBf/AJ01F5/yL/wP/wC1C1H+ef8A4Av/AJI/o+/4Wt8L/wDoo3gX/wAKzQf/AJPo/wCFrfC//oo3gX/wrNB/+T6/nB/4hL/+CZP/AEO/7Wn/AIdTwL/86aj/AIhL/wDgmT/0O/7Wn/h1PAv/AM6ai8/5F/4H/wDahaj/ADz/APAF/wDJH9H3/C1vhf8A9FG8C/8AhWaD/wDJ9H/C1vhf/wBFG8C/+FZoP/yfX84P/EJf/wAEyf8Aod/2tP8Aw6ngX/501H/EJf8A8Eyf+h3/AGtP/DqeBf8A501F5/yL/wAD/wDtQtR/nn/4Av8A5I/o+/4Wt8L/APoo3gX/AMKzQf8A5Po/4Wt8L/8Aoo3gX/wrNB/+T6/nB/4hL/8AgmT/ANDv+1p/4dTwL/8AOmo/4hL/APgmT/0O/wC1p/4dTwL/APOmovP+Rf8Agf8A9qFqP88//AF/8kf0ff8AC1vhf/0UbwL/AOFZoP8A8n0f8LW+F/8A0UbwL/4Vmg//ACfX84P/ABCX/wDBMn/od/2tP/DqeBf/AJ01H/EJf/wTJ/6Hf9rT/wAOp4F/+dNRef8AIv8AwP8A+1C1H+ef/gC/+SP6Pv8Aha3wv/6KN4F/8KzQf/k+j/ha3wv/AOijeBf/AArNB/8Ak+v45v8AgoV/wbbfsCfst/szal8Xvhv4u/aTu/FNp8W/2cfA8UPij4ieENT0g6P8WP2hPhj8LfE0j2lj8N9KuDfQ+G/GGqzaTMLwRWuqpZXVxBeW8MtnP9sp/wAGmH/BMpkVj43/AGtMlVJ/4up4F6kA/wDRJqOad7ci6fb73/u+Q+WlZPnnZtr4F0t/e80f0gf8LW+F/wD0UbwL/wCFZoP/AMn0f8LW+F//AEUbwL/4Vmg//J9fzg/8Ql//AATJ/wCh3/a0/wDDqeBf/nTUf8Ql/wDwTJ/6Hf8Aa0/8Op4F/wDnTUXn/Iv/AAP/AO1Faj/PP/wBf/JH9H3/AAtb4X/9FG8C/wDhWaD/APJ9H/C1vhf/ANFG8C/+FZoP/wAn1/OD/wAQl/8AwTJ/6Hf9rT/w6ngX/wCdNR/xCX/8Eyf+h3/a0/8ADqeBf/nTUXn/ACL/AMD/APtQtR/nn/4Av/kj+j7/AIWt8L/+ijeBf/Cs0H/5Po/4Wt8L/wDoo3gX/wAKzQf/AJPr+cH/AIhL/wDgmT/0O/7Wn/h1PAv/AM6aj/iEv/4Jk/8AQ7/taf8Ah1PAv/zpqLz/AJF/4H/9qFqP88//AABf/JH9H3/C1vhf/wBFG8C/+FZoP/yfR/wtb4X/APRRvAv/AIVmg/8AyfX84P8AxCX/APBMn/od/wBrT/w6ngX/AOdNR/xCX/8ABMn/AKHf9rT/AMOp4F/+dNRef8i/8D/+1C1H+ef/AIAv/kj+j7/ha3wv/wCijeBf/Cs0H/5Po/4Wt8L/APoo3gX/AMKzQf8A5Pr+cH/iEv8A+CZP/Q7/ALWn/h1PAv8A86aj/iEv/wCCZP8A0O/7Wn/h1PAv/wA6ai8/5F/4H/8Aahaj/PP/AMAX/wAkf0ff8LW+F/8A0UbwL/4Vmg//ACfR/wALW+F//RRvAv8A4Vmg/wDyfX84P/EJf/wTJ/6Hf9rT/wAOp4F/+dNR/wAQl/8AwTJ/6Hf9rT/w6ngX/wCdNRef8i/8D/8AtQtR/nn/AOAL/wCSP6Pv+FrfC/8A6KN4F/8ACs0H/wCT6P8Aha3wv/6KN4F/8KzQf/k+v5wf+IS//gmT/wBDv+1p/wCHU8C//Omo/wCIS/8A4Jk/9Dv+1p/4dTwL/wDOmovP+Rf+B/8A2oWo/wA8/wDwBf8AyR/R9/wtb4X/APRRvAv/AIVmg/8AyfR/wtb4X/8ARRvAv/hWaD/8n1/OD/xCX/8ABMn/AKHf9rT/AMOp4F/+dNR/xCX/APBMn/od/wBrT/w6ngX/AOdNRef8i/8AA/8A7ULUf55/+AL/AOSP6Pv+FrfC/wD6KN4F/wDCs0H/AOT6P+FrfC//AKKN4F/8KzQf/k+v5wf+IS//AIJk/wDQ7/taf+HU8C//ADpqP+IS/wD4Jk/9Dv8Ataf+HU8C/wDzpqLz/kX/AIH/APahaj/PP/wBf/JH9H3/AAtb4X/9FG8C/wDhWaD/APJ9H/C1vhf/ANFG8C/+FZoP/wAn1/OD/wAQl/8AwTJ/6Hf9rT/w6ngX/wCdNR/xCX/8Eyf+h3/a0/8ADqeBf/nTUXn/ACL/AMD/APtQtR/nn/4Av/kj+j7/AIWt8L/+ijeBf/Cs0H/5Po/4Wt8L/wDoo3gX/wAKzQf/AJPr+cH/AIhL/wDgmT/0O/7Wn/h1PAv/AM6aj/iEv/4Jk/8AQ7/taf8Ah1PAv/zpqLz/AJF/4H/9qFqP88//AABf/JH9H3/C1vhf/wBFG8C/+FZoP/yfR/wtb4X/APRRvAv/AIVmg/8AyfX84P8AxCX/APBMn/od/wBrT/w6ngX/AOdNR/xCX/8ABMn/AKHf9rT/AMOp4F/+dNRef8i/8D/+1C1H+ef/AIAv/kj+j7/ha3wv/wCijeBf/Cs0H/5Po/4Wt8L/APoo3gX/AMKzQf8A5Pr+OT9pv/g23/YF+EH7Q/7Bnws8K+Lv2k5/DX7S3xt+Inw7+IUur/ETwhd6pa6D4V+AfxL+JmmS+Grq3+G9nBp2ov4i8I6VFd3F7a6nDLpb3ltHbQzzRXcH27/xCX/8Eyf+h3/a0/8ADqeBf/nTUc09fcWn9/yT/l8xuNJW9+equvcXdr+buj+j7/ha3wv/AOijeBf/AArNB/8Ak+j/AIWt8L/+ijeBf/Cs0H/5Pr+cH/iEv/4Jk/8AQ7/taf8Ah1PAv/zpqP8AiEv/AOCZP/Q7/taf+HU8C/8AzpqLz/kX/gf/ANqK1H+ef/gC/wDkj+j7/ha3wv8A+ijeBf8AwrNB/wDk+j/ha3wv/wCijeBf/Cs0H/5Pr+cA/wDBph/wTIHXxz+1mPr8VfAo/n8JqB/waY/8Exz08c/tZn6fFXwIf/eTUXn/ACL/AMD/APtQtR/nn/4Av/kj+j//AIWt8L/+ijeBf/Cs0H/5Po/4Wt8L/wDoo3gX/wAKzQf/AJPr+cH/AIhL/wDgmT/0O/7Wn/h1PAv/AM6aj/iEv/4Jk/8AQ7/taf8Ah1PAv/zpqLz/AJF/4H/9qFqP88//AABf/JH9H3/C1vhf/wBFG8C/+FZoP/yfR/wtb4X/APRRvAv/AIVmg/8AyfX84P8AxCX/APBMn/od/wBrT/w6ngX/AOdNR/xCX/8ABMn/AKHf9rT/AMOp4F/+dNRef8i/8D/+1C1H+ef/AIAv/kj+j7/ha3wv/wCijeBf/Cs0H/5Po/4Wt8L/APoo3gX/AMKzQf8A5Pr+cH/iEv8A+CZP/Q7/ALWn/h1PAv8A86aj/iEv/wCCZP8A0O/7Wn/h1PAv/wA6ai8/5F/4H/8Aahaj/PP/AMAX/wAkf0ff8LW+F/8A0UbwL/4Vmg//ACfR/wALW+F//RRvAv8A4Vmg/wDyfX84P/EJf/wTJ/6Hf9rT/wAOp4F/+dNXzh+2L/wbHf8ABO79nz9kn9p/48+DPFf7TOo+L/gt+z58Y/iv4V0/xL8S/Cd54dvvEXw9+HviHxZotnr1npnw30jUbrRrnUdJtodTttP1bTL2eyeeK11CynaO5jOaa+wv/A//ALUFGi2lzz1/uL/5I/rN/wCFrfC//oo3gX/wrNB/+T6P+FrfC/8A6KN4F/8ACs0H/wCT6/l6+Dv/AAavf8E3PiD8JPhd481rxj+1Pb6x41+HngvxZqtvpvxP8Fw6dBqPiLw5pur3sNhDc/C67uIrOK5vJUtY57q5mSBUWW4mcNI3o/8AxCX/APBMn/od/wBrT/w6ngX/AOdNRzTf2F/4H/8Aag40U2ueen9xf/JH9H3/AAtb4X/9FG8C/wDhWaD/APJ9H/C1vhf/ANFG8C/+FZoP/wAn1/OD/wAQl/8AwTJ/6Hf9rT/w6ngX/wCdNR/xCX/8Eyf+h3/a0/8ADqeBf/nTUXn/ACL/AMD/APtQtR/nn/4Av/kj+j7/AIWt8L/+ijeBf/Cs0H/5Po/4Wt8L/wDoo3gX/wAKzQf/AJPr+cH/AIhL/wDgmT/0O/7Wn/h1PAv/AM6aj/iEv/4Jk/8AQ7/taf8Ah1PAv/zpqLz/AJF/4H/9qFqP88//AABf/JH9H3/C1vhf/wBFG8C/+FZoP/yfR/wtb4X/APRRvAv/AIVmg/8AyfX84P8AxCX/APBMn/od/wBrT/w6ngX/AOdNR/xCX/8ABMn/AKHf9rT/AMOp4F/+dNRef8i/8D/+1C1H+ef/AIAv/kj+j7/ha3wv/wCijeBf/Cs0H/5Po/4Wt8L/APoo3gX/AMKzQf8A5Pr+cH/iEv8A+CZP/Q7/ALWn/h1PAv8A86aj/iEv/wCCZP8A0O/7Wn/h1PAv/wA6ai8/5F/4H/8Aahaj/PP/AMAX/wAkf0ff8LW+F/8A0UbwL/4Vmg//ACfR/wALW+F//RRvAv8A4Vmg/wDyfX84P/EJf/wTJ/6Hf9rT/wAOp4F/+dNR/wAQl/8AwTJ/6Hf9rT/w6ngX/wCdNRef8i/8D/8AtQtR/nn/AOAL/wCSP6Pv+FrfC/8A6KN4F/8ACs0H/wCT6P8Aha3wv/6KN4F/8KzQf/k+v5wf+IS//gmT/wBDv+1p/wCHU8C//Omo/wCIS/8A4Jk/9Dv+1p/4dTwL/wDOmovP+Rf+B/8A2oWo/wA8/wDwBf8AyR/R9/wtb4X/APRRvAv/AIVmg/8AyfR/wtb4X/8ARRvAv/hWaD/8n1/OD/xCX/8ABMn/AKHf9rT/AMOp4F/+dNR/xCX/APBMn/od/wBrT/w6ngX/AOdNRef8i/8AA/8A7ULUf55/+AL/AOSP6Pv+FrfC/wD6KN4F/wDCs0H/AOT6P+FrfC//AKKN4F/8KzQf/k+v5wf+IS//AIJk/wDQ7/taf+HU8C//ADpqP+IS/wD4Jk/9Dv8Ataf+HU8C/wDzpqLz/kX/AIH/APahaj/PP/wBf/JH9H3/AAtb4X/9FG8C/wDhWaD/APJ9H/C1vhf/ANFG8C/+FZoP/wAn1/OD/wAQl/8AwTJ/6Hf9rT/w6ngX/wCdNR/xCX/8Eyf+h3/a0/8ADqeBf/nTUXn/ACL/AMD/APtQtR/nn/4Av/kj+j7/AIWt8L/+ijeBf/Cs0H/5Po/4Wt8L/wDoo3gX/wAKzQf/AJPr+cH/AIhL/wDgmT/0O/7Wn/h1PAv/AM6aj/iEv/4Jk/8AQ7/taf8Ah1PAv/zpqLz/AJF/4H/9qFqP88//AABf/JH9H3/C1vhf/wBFG8C/+FZoP/yfR/wtb4X/APRRvAv/AIVmg/8AyfX84P8AxCX/APBMn/od/wBrT/w6ngX/AOdNXxJ8Rv8Ag25/YE8J/t7/ALMv7MmmeLP2kZPh78YPgR+0d8S/FN7d/EXwnL4ot/EHwm174N6Z4Zg0bUY/hzDp9pplxb+P9bbWLe60m+uLqWHTmtbuxWCdLocpr7C6fb7u38o1Gk/tz2b+BdE2/tdkf2M/8LW+F/8A0UbwL/4Vmg//ACfR/wALW+F//RRvAv8A4Vmg/wDyfX84P/EJf/wTJ/6Hf9rT/wAOp4F/+dNR/wAQl/8AwTJ/6Hf9rT/w6ngX/wCdNRef8i/8D/8AtRWo/wA8/wDwBf8AyR/R9/wtb4X/APRRvAv/AIVmg/8AyfR/wtb4X/8ARRvAv/hWaD/8n1/OD/xCX/8ABMn/AKHf9rT/AMOp4F/+dNR/xCX/APBMn/od/wBrT/w6ngX/AOdNRef8i/8AA/8A7ULUf55/+AL/AOSP6Pv+FrfC/wD6KN4F/wDCs0H/AOT6P+FrfC//AKKN4F/8KzQf/k+v5wD/AMGmP/BMgdfHP7WY+vxV8CD/AN5NS/8AEJf/AMEyf+h4/a0/8Op4F/8AnTUXn/Iv/A//ALULUf55/wDgC/8Akj+j7/ha3wv/AOijeBf/AArNB/8Ak+j/AIWt8L/+ijeBf/Cs0H/5Pr+cH/iEv/4Jk/8AQ7/taf8Ah1PAv/zpqP8AiEv/AOCZP/Q7/taf+HU8C/8AzpqLz/kX/gf/ANqFqP8APP8A8AX/AMkf0ff8LW+F/wD0UbwL/wCFZoP/AMn0f8LW+F//AEUbwL/4Vmg//J9fzg/8QmH/AATJ/wCh4/a0/wDDqeBf/nTUf8Ql/wDwTJ/6Hf8Aa0/8Op4F/wDnTUXn/Iv/AAP/AO1C1H+ef/gC/wDkj+j7/ha3wv8A+ijeBf8AwrNB/wDk+j/ha3wv/wCijeBf/Cs0H/5Pr+cH/iEv/wCCZP8A0O/7Wn/h1PAv/wA6aj/iEv8A+CZP/Q7/ALWn/h1PAv8A86ai8/5F/wCB/wD2oWo/zz/8AX/yR/R9/wALW+F//RRvAv8A4Vmg/wDyfR/wtb4X/wDRRvAv/hWaD/8AJ9fzg/8AEJf/AMEyf+h3/a0/8Op4F/8AnTUf8Ql//BMn/od/2tP/AA6ngX/501F5/wAi/wDA/wD7ULUf55/+AL/5I/o+/wCFrfC//oo3gX/wrNB/+T6P+FrfC/8A6KN4F/8ACs0H/wCT6/nB/wCIS/8A4Jk/9Dv+1p/4dTwL/wDOmo/4hL/+CZP/AEO/7Wn/AIdTwL/86ai8/wCRf+B//ahaj/PP/wAAX/yR/R9/wtb4X/8ARRvAv/hWaD/8n0f8LW+F/wD0UbwL/wCFZoP/AMn1/OD/AMQl/wDwTJ/6Hf8Aa0/8Op4F/wDnTUf8Ql//AATJ/wCh3/a0/wDDqeBf/nTUXn/Iv/A//tQtR/nn/wCAL/5I/o+/4Wt8L/8Aoo3gX/wrNB/+T6P+FrfC/wD6KN4F/wDCs0H/AOT6/nB/4hL/APgmT/0O/wC1p/4dTwL/APOmo/4hL/8AgmT/ANDv+1p/4dTwL/8AOmovP+Rf+B//AGoWo/zz/wDAF/8AJH9H3/C1vhf/ANFG8C/+FZoP/wAn0f8AC1vhf/0UbwL/AOFZoP8A8n1/OD/xCX/8Eyf+h3/a0/8ADqeBf/nTUf8AEJf/AMEyf+h3/a0/8Op4F/8AnTUXn/Iv/A//ALULUf55/wDgC/8Akj+j7/ha3wv/AOijeBf/AArNB/8Ak+j/AIWt8L/+ijeBf/Cs0H/5Pr+cH/iEv/4Jk/8AQ7/taf8Ah1PAv/zpqP8AiEv/AOCZP/Q7/taf+HU8C/8AzpqLz/kX/gf/ANqFqP8APP8A8AX/AMkf0ff8LW+F/wD0UbwL/wCFZoP/AMn0f8LW+F//AEUbwL/4Vmg//J9fzg/8Ql//AATJ/wCh3/a0/wDDqeBf/nTUf8Ql/wDwTJ/6Hf8Aa0/8Op4F/wDnTUXn/Iv/AAP/AO1C1H+ef/gC/wDkj+j7/ha3wv8A+ijeBf8AwrNB/wDk+j/ha3wv/wCijeBf/Cs0H/5Pr+cH/iEv/wCCZP8A0O/7Wn/h1PAv/wA6aj/iEv8A+CZP/Q7/ALWn/h1PAv8A86ai8/5F/wCB/wD2oWo/zz/8AX/yR/SVYfEX4f6reQafpfjnwhqN/dP5drY2PiTR7u7uZME+XBbQXkk0z4BOyNGbAJxgGiv5H/jJ/wAEDP2N/wBhX9of/gnH8QfgR8Qf2mLDxP4//bv+Hvw31jUNZ+Jvh+Saz8Ox/DD4u/EeX+yLjQvAegXlleXusfD3RtMv5Hubi3uvD19remSWu6/jubYppyd04pNf3r7/APbopRgrOMnZrrGzunrs35H7ff8ABFn/AJR6/Dv/ALLV+2d/62l+0DX6qV+Vf/BFn/lHr8O/+y1ftnf+tpftA1+qlOOy9F+RM/jl/il+bCiiimSFFc34y8YeGvh74Q8U+PfGesWfh7wf4J8O614t8Va/qLtHYaH4c8O6bc6vrer30iq7R2em6bZ3N5cuqMywwuwViMH+b7wT/wAHQ/7H3ib4l+GdL8R/Ab9pn4cfs/eOPG//AAgfg/8Aal8ZeD9Ls/hhfan9rnsTqmprDqk0+n6HHPA8929jd6zrel6eJLzWNC042l9DaS5Rju0iowlK/Km7b/1+h/TLRUPnxtb/AGmN1kiMPno6MGR4ynmKyMpIZWXBUgkEEEGvzC/4J2f8FXv2f/8AgpN8Eviv8ZvhBoPjPwm/wZ8QX+heN/AHjhdAj8Y2UUPh9PEOj65FFoWs6xpr6L4lgj1Wy0e5e+ikl1LQNat5oYks1mmd1dLq72+W4km02lorXfa+332P1Dor44/YJ/bR8B/8FAv2YvA/7Uvw18L+LPBvhDx3qXjHTNO8P+Nl0hPEdnL4M8Xaz4Pv3vRoepatpvl3V9olxdWnkX0rfZZofOWObfGv2PQmmrrVMGmm01Zp2a8z8q/2Yf8AlKr/AMFS/wDslv8AwT4/9RP9oSv1Ur8q/wBmH/lKr/wVL/7Jb/wT4/8AUT/aEr9VKFt85fmxy3X+GH/pEQooopkhRUU80VtDNcTyJFDBFJNNLIypHHFEpeR3diFREVSzMxCqASSAK/LL/gm3/wAFcP2dP+CnmsfH3RfgdonjXw7efAHX9C0vV18bRaDbnxZonia58TWuh+LvC6aNrOrSTaJdyeFr8SrfLaXll9o08XMCG8iBV0mlfV3su9txpNptJtRtd9FfRX9T9UqKK+d/jN+1T8EfgJ4++A/ws+JHi6PSviL+0v44uvAHwZ8H21pcX2s+L9Z0u1tb7xDeQxQIYbHQvDFjfWFzr+s381vZ2bajpdjE1xqmq6ZY3bbS3dvUSTeyv6H0RRXxV8Hv22vB/wAY/wBrz9qP9j/SfAHxA0LxX+yvp/w41HxN4412y0yHwN4xi+JXh608RadH4Ou7bUbjUbqXSre7S11YX9hZLHdI6wNNGA5+1TwCfSkmnt3a+a3G01v2T+TV0FFfmD4C/wCCr/7OOv8Awm/bE+OXxJsPGnwL+F/7Fnxt8W/A74j+JviNpcGzxHrvhbVLDRLfV/A9h4eudZ1HXNP8U6zqmnaR4Xslto9Y1TUr22tEsFklFelfEL9v34feAP2hf2MP2e2+H/xH1/U/22dB8X+IvAnjLSNO0o+FfBen+EfCtl4tlHj2WfVI72wuNUsL6G2sI9NttSX7YsiSyLGBIxzLuunrq7LTfV6D5Zdn1/Bcz1221PvSiiimSFFFFABRRRQAUUUUAFFFFAH5W/8ABZr/AJMT1v8A7OM/Yk/9bM+BFfqfH/q4/wDcX/0EV+WH/BZr/kxPW/8As4z9iT/1sz4EVnqm+V86b6O8XZv5dGfEv7LH7YH7QX7Pv/BCv/gnN8BP2SNb0/wj+0n+3H+1p8Sf2dfh78QNTtra5g+H2neIPj140tNd8VWa3lrqFpFqcd7q/h3SY765068GkaZq2ra3ZpHqumadKv6h/sS/E79ub9hX/gpx4X/4Jqfti/tRX/7aPw+/aP8AgNrXxm+CHxg8TaAPD/jXwz408HnW7vxV4UvkutZ1/U5NHk0rwr4mkksr3X/EEahPCmp6NNon2vxLpC/KnhL/AIJAftz2H/BH79h7wb4Z8KaB8OP+Cgf7BX7THir9pX4c/D7xT4u8F65ofiGcfFjxV4tsvCs/inwx4j1nwSt5rlpL4S8RWD3fiKPTGl0p/DuuXui/2ld32m/aX7DX7Mn/AAUM/aZ/4KJ6d/wUr/4KOfCHwT+zVN8FPgdqPwQ/Z8+BnhDxVpHizUJr/wASTaoPFfj3XL7SNe8VQWtnLaeIfFlhDBfapZaveNqejxxafDpmgDUPEMxUk4q0k/dtuoqP2k+l3bZ+Rc3B87Tg03O+zk5X9xp2u1bqnZa3Pub9mH/lKr/wVL/7Jb/wT4/9RP8AaEr9VK/Kv9mH/lKr/wAFS/8Aslv/AAT4/wDUT/aEr9VK3W3zl+bOeW6/ww/9IiFFFFMk/L7/AILN/tKD9lL/AIJn/tZfFK01Aad4mvvhpqHwz8ETRy+Xex+MvizPB8OtFv8ATRkGS90B/EcviYKNwjt9EuJ5EaKGRT/MH/wSub4Kf8E+v+Cmf/BPrwX8Kvi78MfHXhj9t79gzQvhx8fIPAPxA8LeM7fwn+1LGl58Qb+w8RReG9X1M6dqr6/pfhrwboDakttd3L+INWijtkiiuDF+8v8AwWs/Yx/aI/b/ANS/YX/Zu8C/D258RfsvN+0vo/xM/bE8YQeNvCXhVvDfw98IrZaPaaRb6fqPijRfGOv3PiDQfFXjuS2TwhpWrSabq2l6NeXP2eYWcsfwb+33/wAG9nwv+DPgX4N/HT/gkX+zvd6P+1v8Ef2ifhb8TtO0m7+OHiWWDxR4U8K315qV7YJe/G74mnwlpdzpviK38M679pj1DT7+ew03UdPt/tj3iW5xmpOTkl8Frb3fV2Vtb3turHRTcFDlctZ82mllpaPM27qzTa0e6ei31fjv4v8A+Ckf/BS39vT9vT4J/sZ/thav+yR8OP8AgnX4d8DaF4U0Hwpo9rcXnxz+OXjHQNd1m10rxrrbappR03w/ea94V8QeHbm9vZ9e0Xw7pdjot43gzUL7VtYmX4w/4KXfAz/gol8TP2wv+CGVr8bP2ktP+CX7TfxL8MfEf4bC6+HuhWHinw98GfjP8Pr7w5ceOPjVoEljqeh6brmp/GLwx4k8Arr3hzTYNG0fw1qPhKS10m8vNPmt47X7P/aD/Zp/4K2/sgftl/tgftEf8E6fgN4S+MHgr/go78PfAzeNdL8Q+P8AwV4a8Zfs4/GzQPC1/ott4hmk1Txj4c0rV/7A1TxD4r1/Tr7R7vXtAu59UFlqV7a/2Vp8+vS/tm/sRf8ABUzw38O/+CO/xz8CaZY/tx/tdfsN+Jvihrvxwh8S+M/D+gN4n134wDwbqMarrev6t4Ji1nwx4LPht/Aw1i3lt9evLG30XxFfaaYpdantE02paTu3d72sppq3X4dktu17WpOKcLOny8tl8PMm6bUudtWS5977300uc98Zvjx+3P4z/aA/4L3fBj4TftF/EbRNb/ZT+An7OPxL/Z7g0GWwhl8K6z4f+HXhz4j/ABDsPDVq9jcF7j4l2Wj6/pF3a3bXm+513Ns0M6Qyp3Gl/wDBRX45ftlfE3/ghJ8IvgP8VNe8I6p8fvh/d/tLftk3nhea0gbVvCPwf0xNF8X+ENWnFrNJb+HfGPxI8BfFbwdcNbixnN8mlxwSQ3JP2b7X/Yw/ZI/aJ8E/8FSv+Cmv7S/xj+Flr4a+Dn7UHgP9mvTvh/rMnijwR4gs/FGqeEvhho+g/EHRX8PaP4i1fxFpltousx32ltL4m0bTLTVoojPpsuoWcqTv8c/8ETv+CRHx2/Yd/bO/a/8Air8cNBez+Gfg/TNe+BH7EWo3fi3wv4oOp/ArxV8YPF/xO1fVLPS9F13V9U8FkzxeHLybTfElppGry6p4s8UqkDwm7kuBKd18XvSab1ukpcyfzV18+uwm6dn8Puxi42t7zlDla035ZcsreTemp+SX7c3xU/aj/ai/4Jgf8FbNa8eftEeKdQ8Kfsz/APBVXVvBKeDtVsLTULfxN8HrL4keF/B/gz4W295A+nto2i+EPF/iHw948srmSDVZp7nwrDpzqgvTeW/6p+FviD+15+y1+03/AMEE/wBlnxf+1R4u+LWj/F3wN+0hq3xq1aTR7Tw3ZfE7SrbwtJ44+GWia7oxudZlSP4aaHrOk+FdLnt9UQ3iaFHfyRw/afssPm2uf8Eqf21PE/8AwTu/4LTfAWb4WWujfFD9qL9uvxP+0L+zvoV747+H11F8R/AWm/FzwD8QtLuY9T0rxVf6X4YvvE2jeF9TsdL0zxre+HL601OezXWrfTLdpLiP3Hwd+zH/AMFEfjz+0n/wRJ/aR+On7Mmm/Cu6/Zb8OftH+Fv2jtM0n4ifD2+s/h5pmp+Gj4I+FWpfYJPHeoa9r93400XS9L1PULLwtD4gl0K/vbmHVotJjiEcYk1LZ6qPR7Kor/ctX5eVxylGzScLJ1LJcvWjaNur96606pLdRPxx8bf8Fgv2pPGMPx5/4KJ+Ef8AgpR4A+HerfCn9oyTw18Fv+CYGpWmkT2XxP8A2edI8VeHtElutcQahHdXniHWdF1W61K91caReazMmh+JtU8PeIfDyz6Fpel/V3/BTn/gov8AFrxR+3h4a+EniH9vn4tf8E1P2cdd/ZZ+Ffxe/Z28b+Cvhpqvibw78T/HPxO0WDX49S+KviDwteReJbTwtbarPceEbu6sLbxD4Z0s+F70y6fplxc6rqd9X8Nf8E1f+Cm/7K/iL4sfsbfs7fsSfsh/E34Y+Pf2lLz4k/CX9vn4veGfgh491H4YfBrxDrmmX2qeDvFngvx9Y6r4g1abT9J06PTryxj8N3eo2N1qHig+DF1dL3w/rmg/fX/BSb9nz/goZe/F5/DOg/sQ/s8f8FOv2I9e+DGg+Cfhx8GPFlr8GPg54k/Zu+K1jpGjaDqnivQ/Fd9aaJ4xsdG1mTSpdStovCPiS1tNM0zVG0GC/wDB0fh7T9R1dWlZ35t1fSVm9bvfmttflXbTezbhzRtyWtKz5oJpWjZarl5t7c93e97aH7TfsBeIfiv4q/Y9+A+v/G74y/CP9ob4mah4Mjk8R/G34GagNU+GPxLEeoX0Gk+J9Avk0jQIJ7q70WPTo/ET2mi6RZP4mh1h7PStLtWi061+wq/Kv/gi/wDsX/FD9gr/AIJ9/CL9nz4zapY3nxLsNQ8Z+MvFWkaRqK6vovg6+8ceJtQ1+Pwfpepxsba/GjWt1bjVruxL6bceIZ9Zl024vrBra/uv1UreN7K+jsrnNKylKzTV3ZpWT16LsFFFFMkKKKKACiiigD8rf+CzX/Jiet/9nGfsSf8ArZnwIr9T4/8AVx/7i/8AoIr8sP8Ags1/yYnrf/Zxn7En/rZnwIr9T4/9XH/uL/6CKXV+i/ORT+CP+KX5QH0UUUyQooooAKKKKACiiigAr+QP/gsd8fPiV+zF/wAFyP8Agnt8bPhF+zt4y/as8e+Dv2Wvi4dH+BfgC51O08WeMoNasfjLoGry6VLo3hLxzqRPhzR9Uv8AxRdxWnhfU5J7LRrmEi1SRry3/r8r8Q/2iP2Qv2hvHf8AwXF/YH/bA8LfD/8AtT9nX4LfAL4xeCviZ8Qv+Ep8GWf/AAjfibxV4U+MGmaDpn/CKah4htfGusfb73xVoMP2zQfDmqafa/bvMvbq3itb17eJptK1780dUr213+XnoaU2lJt2tyT0btf3XpfR67aa9j8nf+Cb3xd+J3/BUH/gpX4o/wCCxHjT4ReC/wBmz4Mfsdfs9eMfgXe+AtI+I2leOfiLr/jW00/xlqV6njCwj0vwnr9kdN8PeN9euG1XxR4W8NadKujeGtF8PJrstn4g1DRfgbQP+Cx/7U2n6DoP/BTHWv8Ago/4F1PWtZ/aOTSPE3/BKiCz0eWHSv2Z38WXXheU6ZCdQjvYPGFppsX9pWOpDQ4dYuNLfT/Gep+Lb6Q3Wg3P7uW3/BPP9o/9mf8A4LG/EX46fs7fC8+Mf2DP2+vhxrGhftiaNpXjPwF4aT4a/EbWLbWI7vxta+FPEvifRte8RG58QuniqS98M6br19BB8QviZY22nJKNJtbz82v2fv8Agm//AMFSP2e5PBv7B3hL9iz9jjVPhd4P/aD1PxAP+CivxF8D/Ab4naprX7Our+ItT12/0DVvAvjSw1nxff8AieR9TuHsYW0u31rTZIrHwvZtYeHbdfGByantaV7ybaT1lpaWlla23Te5upU3d+7Zxgkm43jBKXNG8uZ3vbb3mrNLczv+Ckv7ePx8vv8Agpl+0f8As9+Mv+CknxB/4Jt+Evhj4I+GN7+x1Dpnw81nUfgv8X/EPifwJYeJr3W/jP4/8MJeavpfhrVvE15/Y6+ILzw14w8MaRY/b4Z7Kz1Hwff6b4q+yf8Agof+0p/wUQ8LXP8AwRJ+FnwN/al+HEfxq/axm+Ifw++KHxc+FkNr4n+A/wASNWvvD3wg0bS/jDY6Y9hZQeIdD8PW3ivWfiRoem2VrY6Pd6qfssOmzaNJFpzP/wCCoX7Nf/BSb4mfGP45+An/AGFPgB/wUi/Ze+KngPT9A/Zb1XxFf/Br4SeP/wBjbxXPo1zZavcReKr6Lwx4/wBRh/tq7fU2a38ULpl/pekeHYovEnhy9k17StS+BP2xv2Sv2of2MfCP/BuJ+zL8PPEXg3xH+1f8JPiH+0TrPhybxDf3s3w+vfiVe+LPhd8VYvh9qGrKkF7N4OhutWf4cf2rEmntLosS38H9lxsjWw+ZOb95Jta+8n8aVlq09G0nF7eoo8r9n8DaUtPdaf7uTblopLVK6knq3Z2R+s//AATF+Ln7Y/7Pf/BSD9pv/glv+13+0bq37WtloHwR8P8A7T3wT+N/ivSI9D8VyaDe634Z8O+JvDeoWjalrd7Hbz6l4sjFlpN1r2tQaS/hPUbvSrq3sda/s+0/o5r+Zv8AY8/Zs/4KdeJP2jP29v8AgqP+0h8EfAnwc/ao8V/ssa3+z3+yH+zhp/jLwn4w0n+0fDum2PiPRbrxHrtl4quNAg0vX/iD4N8LWlteat4v0iS/OteLbq9j8M+Gk0K7u/3Q/Y+1n9pPxB+zV8I9Z/a/8K6D4I/aUv8Aw003xb8KeGLjRrvQdF8SjU79FtNMuPD3iHxZo0tudMSwmLaf4i1aDzJXH2neHij1g9LWlbVrmT2vom3r6J62MaiV7pxvaKlytWcuXVpJWt3a0vtufSlFFFWZhRRRQAUUUUAFFFFAH5Vft3/8nof8EiP+zqfjT/6yB8c6/VWvyq/bv/5PQ/4JEf8AZ1Pxp/8AWQPjnX6q0lvL1/RFS2h/hf8A6XIKKKKZJXvLS3v7S6sbuPzbW8t5rW5i3OnmQXEbRTJvjZXXfG7LuRlZc5VgQDXxr8Ov+CeH7HHwp/Zb8UfsWeCfgrpdl+zJ40TxMniX4W6x4m8b+LrHUz4vnS712Vtf8X+Jtd8W29zNeRw31hdWmv29zol/b219okunXdtBNH9pV8//ALV/xruv2bf2YP2iP2hbLQIPFd58Dvgn8T/i1a+GLq/k0q28RXHw98Gaz4qh0S41OK1vpdOh1STSlspb6Oyu3tUmadLadkETJpbtLZ7q+nVenkNN7JvVrRPdrb5q+nY+LfgV/wAEUv8Agmj+zd4n+Ffjv4Qfs22fhb4gfBjxb4g8b+AfHsfxC+Kl14usvEHifTbLRtVOtazc+NpJvFuinSbCGwsPCviwa14V0mO41ebS9Fs7rxB4guNU+oPhB+yZ8LP2Q/hJ8X/BH7HfgXRPh1qfxD8TfEL4vR2HiXxD478ZeHdTfhjxRefG/4mrcyfDi78TeGdWl1qbTNaWDw34am1sWbD9fP2XP+CXv/B/a6/aN/ar+Cv7Mv7Pf7EHwW8VeH9P/Zc03xfrnizxp+0V8QfBHgrxbY+NfGI8O+HvEs1xa6PoviS3a3vNUsZ4rW88NwWmlXul3niTX57v+hX/AIIG/tFfGH9oz/gnd4L1L466t4p8UfEP4WePfHnwbuvHHjbT9V03xX478PeEr2z1HwZ4n16DW4INTm1KXwj4g0TS7q/vzc6jqculNqOrXt5rF1qFxJ8r/H//AIJsft/eFPjv8Iv23/8Agm38Ufgr4D+NniP9kXwJ+zN+
</string> 
```

**这里的问题是我无法在服务器 sid 上接收整个字符串我在“SoapObject result=(SoapObject)envelope.getResponse();”处收到错误 这个地方任何人都可以对此发表评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:25:54.633

尝试将 ResponseFormat 设置为 Json。

```
 [WebInvoke(UriTemplate = "IMAGE", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, Method = "GET")]
public string IMAGE(string ID)
    {

        SqlConnection conn = new SqlConnection("Data Source=.in;Initial Catalog=;User ID=;password=");
        conn.Open();
        SqlDataAdapter sdImageSource = new SqlDataAdapter();
        sdImageSource.SelectCommand = new SqlCommand("select * from table where Ordno=('" + ID + "')", conn);
        DataSet dsImage = new DataSet();
        sdImageSource.Fill(dsImage);

        byte[] blob = (byte[])dsImage.Tables[0].Rows[0]["Column_name"];
        string c = Convert.ToBase64String(blob);
        //c = c.Replace(" ", "");
        return c;
    } 
```

# android - Webview 不显示 android 4.0 中的图像？

> ID：10601814
> 
> 赞同：0
> 
> 时间：2012-05-15T13:30:55.053
> 
> 标签：android, webview, android-4.0-ice-cream-sandwich

最近我正在为 Android 2.2 开发一个应用程序。我在 android 4.0 上使用相同的应用程序但是，webview 不显示图像，只显示一个白屏。

我刚刚使用了简单的代码：

```
WebView mWebView2 = (WebView) findViewById(R.id.webViewQ2);
mWebView2.getSettings().setBuiltInZoomControls(true);
mWebView2.getSettings().setJavaScriptEnabled(true);
mWebView1.loadDataWithBaseURL("","<table width=\"100%\"><tr><td style=\"text-align:center; background-color:#c8c8c8;\">Question</td></tr></table>"+answer1, "text/html", "utf-8", "");
mWebView2.loadDataWithBaseURL("","<table width=\"100%\"><tr><td style=\"text-align:center; background-color:#c8c8c8;\">Question</td></tr></table>"+answer2, "text/html", "utf-8", ""); 
```

任何人都可以帮助我请我所有的代码都可以正常工作，但这一点。

注意：它有时会自动显示图像，有时不显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:57:17.703

```
String htmlContent="<body style="+"text-align:center;"+"><img  src=\""+url+"\"/></body>";
mywebview.loadDataWithBaseURL("not_needed", htmlContent, "text/html", "utf-8", "not_needed"); 
```

在您的代码中使用它。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:45:37.643

如果您确定您的 HTML 没有格式错误，您可以尝试在 WebView 上禁用硬件加速。

[如此处所述](https://developer.android.com/guide/topics/graphics/hardware-accel.html)，请尝试以下操作：

```
WebView mWebView2 = (WebView) findViewById(R.id.webViewQ2);
myWebView2.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

# android - 我想用 db 元素填充 ListView。现在我将它们附加到 TextView

> ID：10601816
> 
> 赞同：0
> 
> 时间：2012-05-15T13:31:00.793
> 
> 标签：android

我想`ListView`用可点击的元素填充 a 。现在我有一个`TextView`，但我不能点击每个项目，因为它是一个附加项。我能怎么做？我想看看`ListView`带有可点击元素的。现在它将打开一个 Toast。这是代码：

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.choice);

        properties_container = (LinearLayout ) findViewById(R.id.properties_container);

        String host = (String) InitJadeProperties.retrieve(this, getString(R.string.main_container_host), getString(R.string.default_host));
        String port = (String) InitJadeProperties.retrieve(this, getString(R.string.main_container_port), getString(R.string.default_port));

        wfsTv=(TextView)findViewById(R.id.wfsTv);
        ListView wfsLv = (ListView)findViewById(R.id.wfsLv);

        db=new MyDatabase(getApplicationContext());
        db.open();  //apriamo il db

        if(db.fetchWfs().getCount()==0){//inserimento dati, solo se il db è vuoto

                db.insertWf("WF1", "class1");
                db.insertWf("WF2", "class2");
                db.insertWf("WF3", "class3");
                db.insertWf("WF4", "class4");
                db.insertWf("WF5", "class5"); 

        }

        c=db.fetchWfs(); // query
        startManagingCursor(c);

        SimpleCursorAdapter adapter=new SimpleCursorAdapter( //semplice adapter per i cursor
                        this, 
                        R.layout.wfs, //il layout di ogni riga/prodotto 
                        c, 
                        new String[]{MyDatabase.WfMetaData.ID,MyDatabase.WfMetaData.WF_NAME_KEY,MyDatabase.WfMetaData.WF_CLASS_KEY},//questi colonne 
                        new int[]{R.id.IDTv,R.id.nameTv,R.id.classTv});//in queste views

        wfsLv.setAdapter(adapter); //la listview ha questo adapter

        adapter.notifyDataSetChanged();
        //qui vediamo invece come reperire i dati e usarli, in questo caso li stampiamo in una textview

        int nameCol=c.getColumnIndex(MyDatabase.WfMetaData.WF_NAME_KEY);  //indici delle colonne
        int classCol=c.getColumnIndex(MyDatabase.WfMetaData.WF_CLASS_KEY);       

        if(c.moveToFirst()){  //se va alla prima entry, il cursore non è vuoto
                do {

                        wfsTv.append("Wf Name:"+c.getString(nameCol)+", Class:"+c.getString(classCol)+"\n"); //estrazione dei dati dalla entry del cursor

                        } while (c.moveToNext());//iteriamo al prossimo elemento
        }

        db.close();
        getWindow().setFormat(PixelFormat.RGBA_8888);   //visto che usiamo i gradient, usiamo questo trick (vedi snippet forum)
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);  

        //wfsLv.setBackgroundDrawable(new GradientDrawable(GradientDrawable.Orientation.BOTTOM_TOP, new int[]{Color.RED,Color.parseColor("#f2bf26")}));
        //wfsTv.setBackgroundDrawable(new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, new int[]{Color.RED,Color.parseColor("#f2bf26")}));
        //definizione ed uso di gradient in modo programmatico

        //animazioni in modo programmatico (vedi snippet forum)
        Animation a1 = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_PARENT, 1.0f, Animation.RELATIVE_TO_SELF, 0.0f);
        a1.setDuration(1000);
        a1.setInterpolator(AnimationUtils.loadInterpolator(this, android.R.anim.decelerate_interpolator));
        wfsLv.startAnimation(a1);
        //entra da sotto

        Animation a2 = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_PARENT, -1.0f, Animation.RELATIVE_TO_SELF, 0.0f);
        a2.setDuration(1000);
        a2.setInterpolator(AnimationUtils.loadInterpolator(this, android.R.anim.decelerate_interpolator));
        wfsTv.startAnimation(a2);
        //entra da sopra

        wfsTv.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                CharSequence text = "Workflow scelto!";
                int duration = Toast.LENGTH_SHORT;

                Toast toast = Toast.makeText(getApplicationContext(), text, duration);
                toast.show();

            }
        });

        wfsLv.setClickable(true);
        //e affidiamo la gestione del tap/click ad un apposito listener, che ci permetterà di agire sull’elemento cliccato e ricaricare la nostra lista

        wfsLv.setOnItemClickListener
               (new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent,
                  View v, int position, long id) {
         //TextView txtId = (TextView)v.findViewById(R.id.wfsTv); 
         if(position == 0){
            CharSequence text = "Workflow scelto!";
            int duration = Toast.LENGTH_SHORT;

            Toast toast = Toast.makeText(getApplicationContext(), text, duration);
            toast.show();
         c.requery(); 
        }}
               });

        //adapter.notifyDataSetChanged();

        /*wfsTv.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                CharSequence text = "Workflow scelto!";
                int duration = Toast.LENGTH_SHORT;

                Toast toast = Toast.makeText(getApplicationContext(), text, duration);
                toast.show();

            }
        });*/

        TextView masterTv = (TextView)findViewById(R.id.masterTv);
        masterTv.setText("Master");
        masterTv.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                startSubActivity();

            }
        });
    }
    private void startSubActivity(){
    Intent intent = new Intent(this, ConfigChoice.class);
    startActivity(intent);
    } 
```

这是我的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Scegli il Workflow da testare:"
        android:gravity="center" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Workflow di default" />

    <TextView
        android:id="@+id/masterTv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Master" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Nuovi Workflow" />

    <TextView
        android:id="@+id/wfsTv"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="20dp"
        android:textStyle="bold"
        android:onClick=""
        android:padding="20dp"
        android:paddingBottom="10dp"/>

    <ListView
        android:id="@+id/wfsLv"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:dividerHeight="0dp"   
    ></ListView>
</LinearLayout> 
```

我有一个 Textview 和一个 ListView .. 但我只想要一个 ListView 并且在每一行中都有一个修改过的 TextView .. 不是 2 东西分开.. 像这段代码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:23:28.917

试试这个，而不是你的`SimpleCursorAdapter`. 所以，替换`SimpleCursorAdapter adapter = ...`为`MyAdapter adapter = new MyAdapter(this);`

这是适配器：

```
public class MyAdapter extends BaseAdapter {

    private Activity thisContext = null;

    private ArrayList<String> myList = null;

    /**
     * MyAdapter Constructor.
     * @param c Context
     */
    public MyAdapter(Activity c) {

        this.myList = new ArrayList<String>();
        this.thisContext = c;

            String host = (String) InitJadeProperties.retrieve(this, getString(R.string.main_container_host), getString(R.string.default_host));
            String port = (String) InitJadeProperties.retrieve(this, getString(R.string.main_container_port), getString(R.string.default_port));

            db=new MyDatabase(getApplicationContext());
            db.open();  //apriamo il db

            if(db.fetchWfs().getCount()==0){//inserimento dati, solo se il db è vuoto

                    db.insertWf("WF1", "class1");
                    db.insertWf("WF2", "class2");
                    db.insertWf("WF3", "class3");
                    db.insertWf("WF4", "class4");
                    db.insertWf("WF5", "class5"); 

            }

            c=db.fetchWfs(); // query
            startManagingCursor(c);

            int nameCol=c.getColumnIndex(MyDatabase.WfMetaData.WF_NAME_KEY);  //indici delle colonne
            int classCol=c.getColumnIndex(MyDatabase.WfMetaData.WF_CLASS_KEY);       

            if(c.moveToFirst()){  //se va alla prima entry, il cursore non è vuoto
                    do {
                            myList.add("Wf Name:"+c.getString(nameCol)+", Class:"+c.getString(classCol)); //estrazione dei dati dalla entry del cursor
                        } while (c.moveToNext());//iteriamo al prossimo elemento
            }

        db.close();

    } //End MyAdapter()

    public int getCount() {
        return myList.size();
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    /**
     * Create a new View for each item referenced by the Adapter. 
     * @return The View created.
     */
    public View getView(final int position, View convertView, ViewGroup parent) {

        //Layout inflated from XML
        LayoutInflater inflater = context.getLayoutInflater();
        View MyView = inflater.inflate(R.layout.wfsTv_item, null, true);

        //Text to be shown in list
        TextView wfsTv = (TextView) MyView.findViewById(R.id.wfsTv);
        wfsTv.setText(myList.get(position));

        MyView.setClickable(true);

        //Set the click action for the list
        MyView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                        CharSequence text = "Workflow scelto!";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(thisContext, text, duration);
                        toast.show();

            }
        }); //End setOnClickListener()

        return MyView;
    } //End getView()

} 
```

和布局 XML 文件`wfsTv_item.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/wfsTv"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="20dp"
        android:textStyle="bold"
        android:onClick=""
        android:padding="20dp"
        android:paddingBottom="10dp"/>

</LinearLayout> 
```

我没有测试过这个，所以它可能有一些问题。此外，您可以更改布局并添加任意数量的内容。请记住，`OnClickListener`仅应用于项目，而不是项目的单个子项（如果有）。

# c++ - iPad模拟器和设备之间的渲染差异？

> ID：10601817
> 
> 赞同：0
> 
> 时间：2012-05-15T13:31:03.197
> 
> 标签：c++, objective-c, ios, interface-builder

我有一个应用程序，最初是几年前设计的，只是为最初的 iPhone 设计的。我已经接受了它，我们正在寻求对其进行更新，以便它可以在 iPhone 4 和 iPad 上运行。里面有很多代码，所以发布示例很困难，因为它们可能不是来自正确的地方（它也使用 irrlicht，大部分代码是 c++ 和一些 obj-c 类 - appDelegate 等）。

iPhone 版本运行良好，在 xcode 模拟器中 iPad 版本运行良好。但是，在设备本身上，iPad 版本无法正确呈现。

该应用程序在所有版本中都是横向的，但在 iPad 上，尽管它以正确的方式定向所有内容，但绘图区域似乎仍在使用纵向方向。这是一个截图（忽略绿色方块，我只是隐藏了一些那里的信息）：http: [//i.imgur.com/50CKA.png](http://i.imgur.com/50CKA.png)

如您所见，右侧是空白的，它似乎将宽度限制为 768，图像超出了屏幕顶部（我想它会在 1024 处切断）。鉴于 iPhone 版本运行良好，IB 中是否存在我可能忽略的可能需要更改的设置？

编辑1：

```
UIView *contentView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
        contentView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
        self.view = contentView;
        self.view.autoresizesSubviews = YES; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:53:32.920

自己修复了它——不幸的是，当我最初“测试”它时，我手头没有 ipad，所以有人在测试每个版本，这非常慢。抓住了一个，很快就找到了答案：

```
UIScreen* mainscr = [UIScreen mainScreen];

//original width and height
w = mainscr.currentMode.size.width;
h = mainscr.currentMode.size.height;

//fixed method
if((int)mainscr.currentMode.size.width % 1024 == 0)
    {
        w = mainscr.currentMode.size.width;
        h = mainscr.currentMode.size.height;
        //correct for ipad
    }
    else 
    {
        h = mainscr.currentMode.size.width;
        w = mainscr.currentMode.size.height;
        //correct for iphone
    } 
```

出于某种原因，我必须告诉它翻转 ipad 的方向？不知道为什么，但它现在有效，感谢所有评论者的帮助。

# apache - Apache Bench - 如何强制 PUT、DELETE 和 POST 方法

> ID：10601821
> 
> 赞同：2
> 
> 时间：2012-05-15T13:31:10.533
> 
> 标签：apache, rest, benchmarking

如何强制 apache benchmark (ab) 应用程序使用 REST 标头执行查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T13:35:26.080

从手册页：

> -i 执行 HEAD 请求而不是 GET。
> 
> -p POST-file 包含要 POST 的数据的文件。记得还要设置-T。
> 
> -u PUT-file 包含要 PUT 的数据的文件。记得还要设置-T。

但是没有`DELETE`，等。

# php - 使用javascript函数删除图像

> ID：10601825
> 
> 赞同：0
> 
> 时间：2012-05-15T13:31:51.980
> 
> 标签：php, javascript

在一个页面中，我通过以下代码显示文件夹中的图像缩略图，它们下方有一个链接“删除图像”：

```
echo '<li> <a href="Gallery/'.$file.'" rel="lightbox['.$lightbox.']">';
echo '<div id="image" ><img src="Gallery/thumbs/'.$file.'" alt="" /><br>
<a href="javascript:Del();"><font style="font-size:9px">Delete Image</font>';
echo '</a></div></a></li>'; 
```

在删除图像上，我正在调用一个 javascript 函数 Del()。我希望如果用户单击删除图像，则应从其包含文件夹（即 Gallery/thumbs）中删除图像拇指。

函数 Del 是：

```
 <script type="text/javascript">
function Del(){
    var image_x = document.getElementById('image');
image_x.parentNode.removeChild(image_x);
}
</script> 
```

此功能从页面中删除图像，而不是从文件夹中。它还会删除它们，如果我在第三张图像上删除，它将依次删除，然后是第二个。我想删除图像，只有那些用户单击删除图像

希望大家理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:25:16.007

正如评论 AJAX 中所说，您可以使用从服务器中删除文件。我建议您实现用于从服务器、数据库或文件中删除元素的通用功能 - 无论如何，因为通常您只需要调用一些 url，并传递您要删除的对象的 id，然后 - 将 DOM 元素转换为表明该对象已成功删除。

```
function remove(el, url, callback) {
    $.post(url, {}, function(response) {
        // Expect that the response would be in JSON format (PHP - json_encode())
        response = $.parseJSON(response);

        // and in reponse JSON there should be the attibute called 'code', which is detects if the deleting where successfull,
        // if it's == 0 that's success, if not - error
        if (response.code == 0) {
            el.remove();

            if (typeof callback == 'function') {
                callback(response);
            } 
        }
    });
} 
```

这是您需要调用服务器端删除的函数。要使用它，请放置此代码，您还应该在单击事件上绑定触发器，`<a />` 该触发器将以这种方式启动删除：

```
$(document).on('click', 'a.delete', function(e) {
    // Do not allow browser go to the link's href
    e.preventDefault();

    // pass, as the first element div, which we need to delete from DOM,
    // as the second argument - URL from <a /> to server-side script
    // and third argument is th ecallback function which will remove() function call if the deleting where successfull
    remove($(this).parents('div:first'), $(this).attr('href'), function(r) {
        // here put the extra code to modify DOM after successfull delete
    });
}); 
```

在`<a />`'s 属性`href`中，您应该将链接放入服务器端脚本，这将删除文件。

希望有帮助。

# html - 下拉导航栏

> ID：10601828
> 
> 赞同：0
> 
> 时间：2012-05-15T13:31:58.690
> 
> 标签：html, css, navigation, drop-down-menu, navigationbar

我用css做了一个下拉导航栏。但是希望菜单项上的字体大小与子菜单项不同。如果我可以更改子菜单的外观，更改框大小等，那也很好。我真的迷路了，我能做的就是改变两件事同时发生。

知道我可以对 CSS 做什么吗？:)

```
 <div class="grid_7"id="navigation">
      <ul>
        <li>
        <a href=""class="parent">Menu Item 1</a>
            <ul> 
            <li><a href="#">sub menu item 1</a></li>
            <li><a href="#">sub menu item 2</a></li>
            <li><a href="#">sub menu item 3</a></li>
            <li><a href="#">sub menu item 4</a></li> 
            </ul>
        </li>
    </ul>

              <ul>
                <li><a href="">Menu Item 1</a>
          <ul> 
            <li><a href="#">sub menu item 1</a></li>
            <li><a href="#">sub menu item 2</a></li>
            <li><a href="#">sub menu item 3</a></li>
            <li><a href="#">sub menu item 4</a></li> 
            </ul>
        </li>
    </ul>

              <ul>
        <li><a href="">Menu Item 1</a>
            <ul> 
            <li><a href="#">sub menu item 1</a></li>
            <li><a href="#">sub menu item 2</a></li>
            <li><a href="#">sub menu item 3</a></li>
            <li><a href="#">sub menu item 4</a></li>
            </ul>
        </li>
    </ul> 
```

CSS：

```
 #navigation
   {
   height:75px;
   }

   #utility
   {
   height:75px;
   }

   ul 
   {
   font-family: Arial, Verdana;
   margin: 0;
   padding: 0;
   }
   ul li 
   {
   display: block;
   position: relative;
   float: left;
   font-size:16px;
   }

   li ul { display: none; }

   #navigation ul
   {margin:0px; padding:0px;}

   ul li a 
   {
   display:block;
   text-decoration: none;
   color: white;
   padding: 20px 30px 20px 15px;
   position:relative;
   margin: 0;

   }

   ul li a:hover 
   { 
   background: #355F9E;
   }

   li:hover ul 
   {
   display: block;
   position: absolute;
   }

   li:hover a 
   { 
   background: #355F9E; 
   }

   li:hover li a:hover 
   { 
   background: #BCCDD8;
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:34:35.083

尝试

```
#navigation > ul > li > a {
    font-size: 22px;
} 
```

这只会更改顶层层级，即主菜单中的所有链接。

以下是有关子选择器的更多信息：http: [//www.w3.org/TR/CSS2/selector.html#child-selectors](http://www.w3.org/TR/CSS2/selector.html#child-selectors)

# usb - 将数据包发送到 USB 端点

> ID：10601829
> 
> 赞同：1
> 
> 时间：2012-05-15T13:31:58.873
> 
> 标签：usb

我需要将指定的数据包（5 字节）发送到 USB 零端点。我的设备安装为 com 端口。我使用示例 [如何使用 WinUSB 函数访问 USB 设备](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540174%28v=vs.85%29.aspx#filehandle)

第一个问题：如果枚举 Ports 类设备，我找不到我的设备。由于某种原因，我的设备位于原始数据类中。怎么会这样？

第二个问题：为什么 WinUsb_Initialize() 返回错误 87(INVALID PARAMETER)。

```
//GUID InterfaceClassGuid = {0x4D36E978, 0xE325, 0x11CE, 0xBF, 0xC1, 0x08, 0x00, 0x2B, 0xE1, 0x03, 0x18}; //Ports class
GUID InterfaceClassGuid = {0xA5DCBF10, 0x6530, 0x11D2, 0x90, 0x1F, 0x00, 0xC0, 0x4F, 0xB9, 0x51, 0xED}; //Raw data

BOOL GetDeviceHandle (GUID guidDeviceInterface, PHANDLE hDeviceHandle){
...
//my code
WCHAR DeviceIDToFind[] = L"vid_xxxx&pid_xxxx";
// lpDevicePath is "\\?\usb#vid_xxxx&pid_xxxx#833435204e3334355f302083a5ada5e0a0e2aee0208faee1e2a0a2aaa0#{a5dcbf10-6530-11d2-901f-00c04fb951ed}"
WCHAR* res = wcsstr(lpDevicePath, DeviceIDToFind);
if (res!=NULL)
    break; //find our device
...
*hDeviceHandle = CreateFile (
    lpDevicePath,
    GENERIC_READ | GENERIC_WRITE,
    FILE_SHARE_READ | FILE_SHARE_WRITE,
    NULL,
    OPEN_EXISTING,
    FILE_FLAG_OVERLAPPED,
    NULL);
    err = GetLastError();// err is 0
...
}
...
WINUSB_INTERFACE_HANDLE h = INVALID_HANDLE_VALUE;
BOOL bResult = WinUsb_Initialize(hDeviceHandle, &h);
err = GetLastError(); // err is 87 INVALID PARAMETER 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T00:40:02.410

您必须设置设备的供应商 ID 和产品 ID。

您的代码段包含信息。

```
WCHAR DeviceIDToFind[] = L"vid_xxxx&pid_xxxx"; 
```

此代码具有供应商 id ( `vid_xxxx`) 和产品 id ( `pid_xxxx`)，即`xxxx`十六进制数。

如果你的设备有 vid 3259 和 pid 1001，你写`DeviceIDToFind`如下。

```
WCHAR DeviceIDToFind[] = L"vid_3259&pid_1001"; 
```

你必须对usb规范有很多了解。干杯。

# css - 如何使用 Rspec 检查某些 CSS 类的缺失？

> ID：10601835
> 
> 赞同：0
> 
> 时间：2012-05-15T13:32:23.217
> 
> 标签：css, rspec, css-selectors, nokogiri

如何使用 Rspec`have_selector`来验证 DOM 元素没有某些 CSS 类？

我正在尝试为此使用 CSS 语法，但显然 Nokogiri 不支持`:not()`选择器。

例如：

```
it "should not add any class to other inputs" do
  @buffer.output.should have_selector(
    'form input#monster_battle_cry:not(.integer, .decimal, .date, .phone, .zip)'
  )
end 
```

这失败了`#Nokogiri::CSS::SyntaxError: # unexpected ':not('`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:12:08.427

像这样的东西很难看，但应该可以：

```
it "should not add any class to other inputs" do
  @buffer.output.should have_xpath(
    "//form//input[@id='monster_battle_cry'][not(contains(@class, 'integer'))]"
  )
end 
```

`[not(contains(@class, 'integer'))]`与其他课程重复。

**编辑**哎呀，CSS也应该可以工作，只是这样：`:not(.integer):not(.decimal)...`

**再次编辑**不，它没有，并且有一个未解决的票：[CSS selector with multiple :not failed](https://github.com/tenderlove/nokogiri/issues/451)

# codeigniter - 使用 Codeigniter 使用参数进行回调验证并使用数组设置规则？

> ID：10601836
> 
> 赞同：0
> 
> 时间：2012-05-15T13:32:23.453
> 
> 标签：codeigniter, callback, validation

我想使用一个函数来验证带有参数的日期......但我在配置数组中拥有所有验证。

```
config = array(
'page1/send'   => array(
    array(
            'field' => 'name',
            'label' => 'lang:name',
            'rules' => 'required'
         )
),    

'page2/send'   => array(
                            array(
                                    'field' => 'name',
                                    'label' => 'lang:name',
                                    'rules' => 'required'
                            ),
                             array(
                                    'field' => 'date1',
                                    'label' => 'lang:date',
                                    'rules' => 'required|'
                            )
                            array(
                                    'field' => 'date2',
                                    'label' => 'lang:date',
                                    'rules' => 'required|callback_date_compare'
                            )

                        ), 
```

在这种情况下，我想将一个附加参数传递给“callback_date_compare”另一个字段（date1）。

如果 "$date1" 是 post['date1'] 的值并且它工作得很好，我可以在不设置数组规则的情况下这样做：

```
$this->form_validation->set_rules('date2', 'lang:date', 'required|callback_date_compare[' . $date1 . ']'); 
```

我需要在数组中执行此操作，因为我在其中进行了所有验证，并且我尝试在 $config 数组中以相同的方式执行此操作，但它不起作用，例如：

```
 array(
                                        'field' => 'date2',
                                        'label' => 'lang:date',
                                        'rules' => 'required|callback_date_compare[date1]'
                                ) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:03:18.043

在您的配置数组中

```
array(
        'field' => 'date2',
        'label' => 'lang:date',
        'rules' => 'required|callback_date_compare[date1]'
   ) 
```

在您的日期比较回调中

```
function date_compare($value, $field_name)
{
    // Get the value in the field
    $field = $_POST[$field_name];

    if ($value != $this->input->post($field))
    {
          $this->form_validation->set_message('date_compare', 'Dates are different');
          return FALSE;
    }
    else
    {
         return TRUE;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:15:53.503

由于您的配置是全局的，因此将函数也设置为全局可能是个好主意。

创建`MY_Form_validation.php`于`libraries/`：

```
<?php

class MY_Form_validation extends CI_Form_validation {

    function date_compare($str_start, $str_key) {

        $bool   =   ($str_start == $this->input->post($str_key));
        if ( ! $bool)
            $this->form_validation->set_message('date_compare', 'Dates are different');

        return $bool;

    }

} 
```

* * *

然后设置规则`date_compare[date1]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:41:07.440

创建一个名为 date_compare 的函数：

```
public function date_compare($date2)
{

if ($date2 != $this->input->post("date1"))
{
$this->form_validation->set_message('date_compare', 'Dates are different');
return FALSE;
}
else
{
return TRUE;
}

} 
```

配置：

```
'page2/send'   => array(
                            array(
                                    'field' => 'name',
                                    'label' => 'lang:name',
                                    'rules' => 'required'
                            ),
                             array(
                                    'field' => 'date1',
                                    'label' => 'lang:date',
                                    'rules' => 'required|'
                            )
                            array(
                                    'field' => 'date2',
                                    'label' => 'lang:date',
                                    'rules' => 'required|callback_date_compare'
                            )

                        ), 
```

# ruby-on-rails - 将 Rails 3 引擎存储在不同的 Github 存储库中

> ID：10601839
> 
> 赞同：1
> 
> 时间：2012-05-15T13:32:30.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-engines

我计划聘请一名承包商来为我的 Rails 3 应用程序开发一些模块，*而不会将整个应用程序暴露*给他。

我从 SO 那里得到了一个建议，我应该创建一个引擎，将它安装到我的主应用程序上，然后让承包商在这个引擎上工作。

我应该如何将引擎存储在不同的 github 存储库中？我如何告诉我的实时（Heroku）服务器从这个存储库加载这个引擎，我的承包商如何在不访问代码的情况下从我的主应用程序发出请求？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:56:28.957

您将希望将引擎作为子模块加载到主应用程序中。Heroku 支持这一点，如此[处](https://devcenter.heroku.com/articles/git-submodules)所述。

用于此的 git 相当简单。确保您位于 Rails 应用程序的基本目录中并运行这些命令。

```
git submodule add enginerepoaddress desired_destination
git add .
git commit -m 'Add rails engine git commit message' 
```

要更新，很简单

```
git submodule submodule_name git pull origin master 
```

子模块的 git 文档可[在此处获得](http://www.kernel.org/pub/software/scm/git/docs/v1.7.5.4/git-submodule.html)

# javascript - 如何在 jQuery 中取消由 ajaxSubmit() 启动的文件上传？

> ID：10601841
> 
> 赞同：6
> 
> 时间：2012-05-15T13:32:35.583
> 
> 标签：javascript, jquery, ajax, forms, file-upload

我有类似于以下的代码：

```
UploadWidget.prototype.setup_form_handling = function() {
    var _upload_widget = this;
    $('form#uploader')
    .unbind('trigger-submit-form')  // This might be our company's own method
    .bind('trigger-submit-form', function() {
        var $form = $(this);
        $form.ajaxSubmit({
            dataType: 'json',
            success: function(data, status, xhr, form) {
                // ...
            },
            error: function(xhr, status, errorThrown) {
                // ...
            }
        });
        return false;
    });
}; 
```

有没有办法使用表单的重置按钮来取消上传过程？或者我是否必须导航到当前页面（刷新）才能停止一切？

我尝试创建一个由存储 jqXHR 值（和调用）的 UploadWidget 对象存储的变量`var _upload_widget.jqXHR = $form.ajaxSubmit({ ... });`，但我认为我做得不对。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T18:35:22.003

和jQuery 表单插件不同`jQuery.ajax()`，它不返回 jqXHR 对象。不过，还有其他方法可以获取 jqXHR 对象：`ajaxForm()``ajaxSubmit()`

## `data()`表单对象上的方法（最简单的方法）

`ajaxSubmit()`返回表单对象。您可以调用`data()`此表单对象上的方法来获取 XHR 对象：

```
var form = $('#myForm').ajaxSubmit({ ... });
var xhr = form.data('jqxhr'); 
```

然后`xhr.abort()`在您想中止上传时调用。

此功能于 2012 年 12 月添加；见[问题 221](https://github.com/malsup/form/issues/221)。（shukshin.ivan 的回答是第一个指出这一点的人。）

## `beforeSend`回调（适用于 2012 年 12 月之前的 jQuery 表单版本）

除了 jQuery 表单插件站点中列出的选项[外](http://jquery.malsup.com/form/#options-object)，还将采用任何[jQuery.ajax() 选项](http://api.jquery.com/jQuery.ajax/)。其中一个选项是回调，回调签名是.`ajaxForm()``ajaxSubmit()``beforeSend``beforeSend(jqXHR, settings)`

因此，指定一个`beforeSend`回调函数，jqXHR 对象将作为该回调的第一个参数传入。保存该 jqXHR 对象，然后您可以`abort()`在要中止上传时调用该 jqXHR 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-18T13:32:50.783

自 2012 年 12 月以来，可以直接访问 xhr：

```
var form = $('#myForm').ajaxSubmit({ ... });
var xhr = form.data('jqxhr');
....
$('#cancel').on('click', function(){
    xhr.abort();
}); 
```

src - [https://github.com/malsup/form/issues/221](https://github.com/malsup/form/issues/221)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T06:00:48.993

你可以这样使用：

```
var myForm  = null; 
myForm = $('#myForm').ajaxSubmit({
               url: ajaxUrl,
               beforeSubmit : function() {
                   if(myForm != null)
                      myForm.data('jqxhr').abort();
                   },
               ...
          }); 
```

这将停止您之前的 ajaxSubmit 请求。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-15T13:49:33.250

尝试

```
window.stop(); 
```

模仿按下的停止按钮。不完全确定 IE 是否喜欢它。对于 IE，您可以尝试：

```
document.execCommand('Stop'); 
```

# javascript - 函数调用中的 document.write 和 innerHTML

> ID：10601842
> 
> 赞同：1
> 
> 时间：2012-05-15T13:32:37.880
> 
> 标签：javascript

我是 javascript 的新手，我想知道为什么在这个脚本中`document.write`运行良好，而 innerHTML 没有（我在正文中给出了一个 div id 计时器）。是不是innerHTML 需要在html 的正文部分发生Onload 事件？如果是，为什么？（我在`writehere()`html 文档的 head 部分调用该函数。

```
<script language="javascript">

 function writehere()

 {
       document.write("hello");

       var Timer = document.getElementById("timer");

        Timer.innerHTML = "hello";

}

writehere();

</script> 
```

html代码在这里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:45:10.803

您的问题很可能是在您的代码执行时 DOM 尚未准备好。对于您的示例，您可能只需将其移至页面底部即可。

通常，您需要确保在执行需要与 DOM 交互的 javascript 之前完全加载 DOM，如果您使用 jQuery，您可以在文档就绪函数中调用代码以确保加载 DOM，例如

```
 $(document).ready({

    }); 
```

看看这个 SO question for vanilla javascript 等价物

['$(document).ready()' 的非 jQuery 等价物是什么？](https://stackoverflow.com/questions/2304941/what-is-the-non-jquery-equivalent-of-document-ready)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:53:03.327

这都是关于 HTML 标签元素和执行时间的。在您的示例中，脚本位于[head 标签](http://jsfiddle.net/pomeh/g6aMA/2/)中，因此在执行脚本时，元素 div#timer 根本不存在。

然后你有2个解决方案：

*   将您的脚本移动[到页面末尾](http://jsfiddle.net/pomeh/g6aMA/1/)（标签之前），
*   [使用](http://jsfiddle.net/pomeh/g6aMA/4/)[事件](http://jsfiddle.net/pomeh/g6aMA/4/)延迟脚本的执行[`onload`](http://jsfiddle.net/pomeh/g6aMA/4/)

如果您的 DOM 并不复杂，并且不包含`img`标签或任何需要从网络获取的元素，`onload`则不需要使用 。您可以在两种情况下使用它：

*   您必须等待加载所有元素，例如图像、视频等，
*   您想延迟执行低优先级脚本，例如在您的网站上加载广告的脚本。此脚本对您的网站和访问者来说并不重要，执行可能会延迟

一般来说，将`script`标签放在文档末尾是否被认为是一种好习惯（因此您不需要使用`onload`），它可以防止 Flash Of Unstyled Content (FOUC)。Javascript 会阻止您的浏览器渲染引擎。因此，如果 JavaScript 标记在内容可供用户使用之前放置（阅读：在 head 标记中），浏览器将执行它，DOM 几乎是空的，并且在此执行期间用户只会看到一个空白页面。

另外，关于`jQuery.fn.ready`方法，您必须注意这一点：

```
$(document).ready(function() {
    // my first useless function
    console.log( "first", 1 );
});

$(document).ready(function() {
    // my second useless function
    // this function will throw an (intentional) error
    console.log( "second", someUndefinedVariable );
});

$(document).ready(function() {
    // my third useless function
    // because the previous function contains an error
    // this function will never be called
    console.log( "third ", 3 );
}); 
```

因此，假设您正在使用一些插件，并且您有一些手写代码等等。如果每个插件和您的代码都在使用该`jQuery.fn.ready`方法，并且由于某种原因（例如在某些情况下在某些特定的浏览器版本中）一个函数抛出错误，那么这个函数之后的所有处理程序将永远不会运行...

此外，这样做会在最后延迟所有“真正的”JavaScript 执行，如果队列中有很多方法要运行，那么您可能会在几秒钟内阻塞浏览器，用户会通知它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:36:43.043

我认为您的问题是 DOM 尚未加载，因此没有 id="Timer" 的 div 元素。您应该在 onLoad 事件上调用此方法。

# django - 从子类调用 S3BotoStorage Save() 方法

> ID：10601844
> 
> 赞同：0
> 
> 时间：2012-05-15T13:32:43.293
> 
> 标签：django, django-models, django-storage

我正在尝试实现一个新的存储类，该类从 Django-Storages 中继承 S3BotoStorage。(http://code.larlet.fr/django-storages/src/83fa2f0ba20c/storages/backends/s3boto.py)

每当调用我的新类的 save 方法时，我想做一些其他的事情，然后调用 S3BotoStorage._save() 方法。像这样：

```
class CustomStorage(S3BotoStorage):
    def __init__(self, *args, **kwargs):
        super(CustomStorage, self).__init__(*args, **kwargs)

    def _save(self,*args, **kwargs):
        #Will do stuff there
        print >> sys.stderr, "%s" % (self.bucket)
        super(CustomStorage, self)._save(*args, **kwargs) 
```

如果我没有此 CustomStorage._save() 方法，则一切正常（即调用 S3BotoStorage._save(name,content) 并将所有内容上传到 S3）。但是，如果我有这个新的 CustomStorage.save 方法，我会收到 500 错误。（它确实被调用了，因为我的错误消息出现在终端中）。我看不到任何调用堆栈或任何东西。

我试过了：

```
def save(self,*args, **kwargs):
def save(self,name, content): 
```

这些都不起作用。

有任何想法吗？！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:47:36.993

`Storage._save`应该返回正在保存的文件的名称。你`_save`没有。您应该从`super`调用中返回值。

```
class CustomStorage(S3BotoStorage):
    def __init__(self, *args, **kwargs):
        super(CustomStorage, self).__init__(*args, **kwargs)

    def _save(self,*args, **kwargs):
        #Will do stuff there
        print >> sys.stderr, "%s" % (self.bucket)
        return super(CustomStorage, self)._save(*args, **kwargs) 
```

# windows-phone-7 - 在 BackgroundWorker 中使用 UI 控件？

> ID：10601848
> 
> 赞同：1
> 
> 时间：2012-05-15T13:32:49.160
> 
> 标签：windows-phone-7, user-interface, backgroundworker

我目前正在为 WP7 制作阅读应用程序。为了让它有点原创，我决定将文本包装在全景控件中，以模仿拇指的“翻页”运动。

我创建了几种方法来在全景图的每个面板中放置足够但不太多的文本，并在必要时创建更多面板。主要方法是这样的（口头形式）：

```
split the string on spaces, giving a string array containing words.

foreach(word)
    add word in the textBlock of the current "page"
    if the textBlock's height is over the maximum height allowed
        remove the word
        create a new page (aka new panoram item with a new textBlock)
        make this new page the current one
        add the word in the new textBlock
    endif
endforeach 
```

您可以猜到，这种方法非常耗时。它在加载ApplicationPage 时调用，根据字符串的长度使其非常长。

我尝试了几件事，比如在加载时生成两个第一页，然后在用户平移以阅读下一页时生成，但即使使用此解决方案，平移转换在方法调用期间也会滞后。

我曾想过 BackgroundWorker 类来完成这项工作，但不幸的是我看到它无法访问 UI 本身，即使可以，我也担心它会阻塞 UI 线程或至少使它滞后。

我“喜欢”这种方法，因为它独立于字体大小或使用字体的事件来格式化文本，这与我之前的测试不同，我之前在每页使用固定数量的字符（比如最多 700 个字符，但 700 个“i”没有'不要使高度和宽度与 700 "m" 相同）。

所以也许你有这个问题的其他解决方案。我并不是专门要求在我的项目中复制和粘贴一段代码。因为我实际上是通过这个项目学习 C#，所以我的目标是完全自己编写代码。

感谢您阅读它，并对潜在的语法或词汇错误深表歉意，因为英语不是我的母语。

友谊赛，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:44:33.230

您可以通过 Dispatcher.BeginInvoke 调用来更改 UI。

除了进度报告以及后台工作人员完全完成后，我认为您无能为力。

控件是在 UI 线程上创建的，因此只能从那里或通过我提到的机制访问。

# r - 获取函数名

> ID：10601849
> 
> 赞同：1
> 
> 时间：2012-05-15T13:32:52.203
> 
> 标签：r

希望这不是太简单。我正在寻找一个函数，它给我一个函数的名称，我将它分配给一个变量。所以像

```
x <- mean
the_function_i_look_for(x)
[1] "mean" 
```

有任何想法吗？提前谢谢了！

**编辑：**

好的，这是一个更详细的例子：实际上我有一个函数，我传递一个任意对数并返回一个 data.frame。数据框的一列名称应指示使用的对数。

```
> myFunction <- function( log, x ) {
    df <- data.frame( x, log(x))
    names(df) <- c(the_function_i_look_for(log), "x")
    return(df)
  }
> myFunction( log10, c(10,100,1000) )
>   log10    x
  1     1   10
  2     2  100
  3     3 1000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:18:18.867

你可以使用`?substitute`：

```
myFunction <- function( log, x ) {
    df <- data.frame( x, log(x))
    names(df) <- c("x", substitute(log))
    return(df)
}

myFunction( log10, c(10,100,1000) )
#     x log10
#1   10     1
#2  100     2
#3 1000     3 
```

编辑：似乎也适用于 ReferenceClasses：

```
foo <- setRefClass("foo",
    methods = list(
    bar = function(x) {
        message("function: ", substitute(x))
    }
))

f <- foo$new()
f$bar(log)
# function: log
f$bar(mean)
# function: mean 
```

# lucene - Lucene：如何将 StandardTokenizer 与我自己的 Tokenizer 结合使用

> ID：10601850
> 
> 赞同：1
> 
> 时间：2012-05-15T13:32:52.430
> 
> 标签：lucene, tokenize

我正在构建一个 Tokenizer，它将获取文本并在空格处拆分并添加句子和段落标记（[如果您有兴趣，这里有一个与此相关的问题](https://stackoverflow.com/q/10593715/348056)）但除了运行它之外，我还希望能够同时运行 StandardTokenizer（和 StandardFilter），以便我对单词进行更智能的标记化。在这里，我有一个catch22。

*   如果我首先运行 StandardTokenizer（可能还有 StandardFilter），那么我会得到更智能的标记，但是我没有任何标点符号/空格/大写字母来作为我的句子/段落检测的基础。
*   如果我首先使用我的 Tokenizer，那么我可以为句子和段落包含必要的标记，但是我无法从 StandardTokenizer 的智能标记化中受益，当然也无法从要求 StandardTokenizer 已经运行的 StandardFilter 中受益.

**我应该使用什么模式来解决这个问题？**最实际的是，我可能只想用句子和段落标记来增加 StandardTokenizer 的 TokenStream。虽然更一般地说，我可能想将句子/段落标记器与任何其他标记器一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:13:41.443

您实际上可以更改 StandardTokenizer 的语法，并为您的自定义需求生成 Tokenizer。这就是我在[使用 JFlex/Java CC 为新的 TokenStream API 生成自定义标记器时所做的](https://stackoverflow.com/questions/7846305/generating-a-custom-tokenizer-for-new-tokenstream-api-using-jflex-java-cc)

# css - z-index 在相对定位元素下的绝对定位元素

> ID：10601853
> 
> 赞同：4
> 
> 时间：2012-05-15T13:32:54.713
> 
> 标签：css, z-index, css-position

我试图将一个绝对定位的元素放在一个相对定位的元素之下。由于场地开发的限制，蓝框必须相对定位。

想象一个语音气泡是蓝色框，气泡的尾部是 :after 伪元素。我需要绿色框在这两个后面，因为它是为这两个元素保存背景。

```
div.layer01 {
    background-color: blue;
    position: relative;
    z-index: 10;
}
div.layer01:after {  /* This is the tail of the bubble */
    display: block;
    background-color: red;
    content: '\00a0';
    width: 30px;
    height: 30px;
    position: absolute; 
    right: 20px;
    top: 50px;
    border: 3px #fff solid;
}    

/* This should be behind the tail and the blue box (bubble) */
div.layer01 div.layer02 { 
    background-color: green;
    width: 320px;
    height: 125px;
    display: block;
    position: absolute; 
    z-index: 5;
}
```

```
<div class="layer01"> <!-- speech bubble -->
    <div class="layer02">Why isn't this below the blue?</div>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus non dolor quis leo malesuada pharetra at in massa. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p>
</div>
```

使固定：

从相对定位的元素中取出我想要定位的元素，然后将内容包装到一个新的 div 中。添加标记，但似乎这是唯一的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T13:38:31.773

**编辑：我被误导了，负索引是在 CSS2.1 中引入的。这个解决方案仍然是正确的，尽管我关于它是一个黑客的评论不是。**

子元素，即使绝对定位也不能低于其父元素，除非您使用 hack。

hack 是从父元素中删除 z-index 属性并给子元素一个负 z-index

[http://jsfiddle.net/uZdy3/1/](http://jsfiddle.net/uZdy3/1/)

```
div.layer01 {
    background-color: blue;
    position: relative;
}
div.layer01:after {  /* This is the tail of the bubble */
    display: block;
    background-color: red;
    content: '\00a0';
    width: 30px;
    height: 30px;
    position: absolute; 
    right: 20px;
    top: 50px;
    border: 3px #fff solid;
}    

/* This should be behind the tail and the blue box (bubble) */
div.layer01 div.layer02 { 
    background-color: green;
    width: 320px;
    height: 125px;
    display: block;
    position: absolute; 
    z-index: -5;
} 
```

不过，最好重构您的布局以避免这种黑客攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T20:21:44.497

自 2011 年中期 CSS2.1 以来一直安全且合法的正确响应是使用负 Z-Index。所有主要浏览器都很好地支持此行为，可追溯到原始 Chrome、原始 Safari、原始 Opera、IE4 和 Firefox 3。最后一个支持此行为的浏览器始于 2008 年。

[https://developer.mozilla.org/en-US/docs/Web/CSS/z-index](https://developer.mozilla.org/en-US/docs/Web/CSS/z-index)

# java - 带线程的冒泡排序

> ID：10601860
> 
> 赞同：1
> 
> 时间：2012-05-15T13:33:17.020
> 
> 标签：java, multithreading, sorting, synchronized

我有一个学校作业，我将使用 Java 中的线程对长名单进行排序。没有关注排序算法的速度，而是理解线程以及线程如何影响排序速度的分配。

我觉得我走在正确的道路上，但是代码/线程弄乱了监视器，我已经尝试了一段时间来定位问题，对我来说问题似乎出在`class SortThreads` `run()`方法上。各位大神可以给我一些提示或提示吗？

```
public void run() {

    while (monitor.getSize() > 1) {
        System.out.println("Number of array in list to be sorted: "
                + monitor.getSize());

        String[] f = monitor.getRandom();
        String[] g = monitor.getRandom();

        monitor.add(descSort(f, g));
    }

    System.out.println("*** THREAD DEAD ***");

} 
```

输出：

```
After delete: 1
Number of array in list to be sorted: 3
Befor delete: 1
After delete: 0
Number of array in list to be sorted: 0
Exception in thread "Thread-101" java.lang.NullPointerException
    at SortThread.append(Sort.java:222)
    at SortThread.descSort(Sort.java:201)
    at SortThread.run(Sort.java:178)
Exception in thread "Thread-96" java.lang.NullPointerException
    at SortThread.append(Sort.java:222)
    at SortThread.descSort(Sort.java:201)
    at SortThread.run(Sort.java:178)
Number of array in list to be sorted: 0
Number of array in list to be sorted: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:55:53.097

您的（可能的）问题之一是本节不是原子的：

```
while (monitor.getSize() > 1) {
    System.out.println("Number of array in list to be sorted: "
            + monitor.getSize());

    String[] f = monitor.getRandom();
    String[] g = monitor.getRandom();

    monitor.add(descSort(f, g));
} 
```

通常，如果您使用任何线程，很可能在调用`monitor.getSize()`和`monitor.getRandom()`大小之间实际上已经发生了变化。所以我猜想其中一个`getRandom`调用（或两者）返回 null ，这会触发`NullPointerException`.

`null`您可以在调用之前添加检查`descSort()`。如果只有一个`f`和`g`，`null`您可能需要将其放回显示器中（只是在这里猜测）。

# iphone - 隐藏导航栏按钮

> ID：10601861
> 
> 赞同：0
> 
> 时间：2012-05-15T13:33:23.010
> 
> 标签：iphone, ios

这方面的帖子很多，但没有一个有效。:(

所以我错过了一些简单的东西，只是不知道那是什么。

我在 IB 中的视图上放置了一个导航栏和一个 BarButtonItem。我的 .h 文件中有： IBBarButtonItem callHelp; 我有@property 和@synthesized

然后我在我的IB“控制拖动”中连接了它

然后在我的 viewDidLoad 中，我尝试了以下所有方法

```
callHelp.setHidden=TRUE;
callHelp.hidden=TRUE;
callHelp.Hidden=TRUE;
[callhelp setHidden=TRUE];
self.navigationItem.rightBarButtonItem = nil;
and something I found on stack for arraying the toolbar/navbar 
```

那么我应该为自己的失踪而自责吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:37:29.033

尝试使用它来隐藏它：-（直接在项目上）

```
[self.navigationItem setHidesBackButton:YES animated:YES]; 
```

在导航栏上：-

```
[self.yourNavBar.navigationItem setHidesBackButton:YES animated:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:48:23.843

如果您已经`UINavigationBar`通过 InterfaceBuilder 添加了您的（并且它不是通过`UINavigationController`using添加的，`self.navigationItem`那么您将无处可去。

你必须`IBOutlet`为你添加一个`UINavigationBar`- 就像你对`callHelp`按钮所做的一样。然后`viewDidLoad`打电话

```
UINavigationItem* item=[[self.navBar items] objectAtIndex:0]; //assuming navBar is your UINavigationBar IBOutlet
[item setRightBarButtonItem:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:43:28.250

从工具栏中删除元素的唯一方法是将它们从其项目数组中删除。

在我的 .h 中，我声明了以下出口：

```
IBOutlet UIToolbar *actionToolBar;
IBOutlet UIBarButtonItem *texteBarItem, *imageBarItem; 
```

并从工具栏中删除 texteBar ，您必须使用临时可变数组重新创建其项目：

```
NSMutableArray *array = [NSMutableArray arrayWithArray:actionToolBar.items];
NSLog(@"Number of objects : %d / description : %@", [array count], [array description]);
[array removeObject:texteBarItem];
[array removeObject:imageBarItem];
actionToolBar.items = array;
NSLog(@"Number of objects : %d / description : %@", [array count], [array description]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:35:58.847

如果您`IBBarButtonItem`继承自`UIBarButtonItem`，则它没有`hidden`属性。

无论如何，您的帖子不包含有关您面临的问题的任何信息。

# algorithm - 如何找到字谜算法的时间复杂度

> ID：10601862
> 
> 赞同：2
> 
> 时间：2012-05-15T13:33:24.807
> 
> 标签：algorithm, time-complexity

前言：这不是一道作业题。我正在阅读 Python 中的算法书。

如果我有以下代码来解决字谜。

```
Public bool anagram (string a, string b) {
    return sort(a) == sort(b);
} 
```

假设排序算法是合并排序，即*O(n log n)*。由于我必须做两次，时间复杂度是否变为*O(n^2 log n)*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:36:14.133

不，因为你需要做固定的次数，复杂性仍然存在`O(n log n)`。

请注意，您还需要执行一项操作 - 即比较字符串。然而，它是`O(n)`，并且`O(n + n log n)`仍然是`O(n log n)`。

另请注意，您`n`的“未定义”：您应该说`n`是`max(a.length, b.length)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:38:55.453

不，它变成`O(2*[n log n])`，但它与`O(n log n)`

仍然，你必须比较两个排序的字符串，它的长度是线性的，所以它变成`O(n + n log n)`，又是`nlogn`

# ruby-on-rails - Sunspot Solr Search like Rails 活动记录 'LIKE' 搜索

> ID：10601867
> 
> 赞同：5
> 
> 时间：2012-05-15T13:33:32.617
> 
> 标签：ruby-on-rails, ruby, solr, sunspot, sunspot-solr

嗨，我一直在我的应用程序中使用普通的 rails 活动记录 LIKE 搜索，我开始使用 sunspot solr 搜索。我希望它尽可能接近 Rails LIKE 搜索。

* * *

**葡萄酒.rb**

```
#sunspot stuff
  searchable :auto_index => true, :auto_remove => true do
  text :name
end
#sunspot stuff 
```

* * *

**solr/conf/schema.xml**

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

* * *

**application_controller.rb**

```
search_string = "will input some values here"
query = "%" + search_string + "%"

solr_search = Wine.search do
  fulltext search_string
end
@solr_search_results = solr_search.results.sort_by{|e| e[:id]}

@rails_search_results = Wine.find(:all, :conditions => ['wines.name LIKE ?' , query]).sort_by{|e| e[:id]} 
```

* * *

**search1**
search_string = "大"

**@solr_search_results**
186 Grand Reserve
688 Grand Plaisir Cabernet Sauvignon Shiraz Malbec Petit Verdot Cabernet Franc
760 Grand Vin Blanc
768 Grand Rouge
857 Premier Grand Cru
1067 Grand Classique
1584 Grand Vin De Glenelly 3389
Grand Constance Muscat
3708 Grand Cuvèe Brut
3857 Grand Constance Muscat

**@rails_search_results**
Grand Reserve
688 Grand Plaisir Cabernet Sauvignon Shiraz Malbec Petit Verdot Cabernet Franc
760 Grand Vin Blanc
768 Grand Rouge
857 Premier Grand Cru
969 River Grandeur Cape Blend
972 River Grandeur Cabernet Sauvignon
973 River Grandeur Chardonnay
974 River Grandeur Chenin Blanc
975 River Grandeur Pinotage
976 River Grandeur Sauvignon Blanc
977 River Grandeur Shiraz
978 River Grandeur Rose
1067 Grand Classique
1584 Grand Vin De Glenelly
3389 Grand Constance Muscat
3708 Grand Cuvèe Brut
3857 Grand Constance Muscat

似乎 Solr 没有找到条目里面有“Grandeur”，它只找到了完全匹配？我怎样才能解决这个问题？

* * *

**search2**
search_string = "路"

**@solr_search_results**
200 Dassies Rood Cinsaut Cabernet Sauvignon Ruby Cabernet
3198 Dassies Rood Cinsaut Cabernet Sauvignon Ruby Cabernet
3394 Rood

**@rails_search_results**
200 Dassies Rood Cinsaut Cabernet Sauvignon Ruby Cabernet
483 Roodeberg Red Cabernet Sauvignon Shiraz Merlot
484 Roodeberg White Sauvignon Blanc Chardonnay Chenin Viognier
1113 Zevenrood
3044 Roodewal
3198 Dassies Rood Cinsaut Cabernet Sauvignon Ruby Cabernet
3394 Rood
3477 Roodeberg Red
3478 Roodeberg White
3594 Roodeberg White
360​​4 Roodeberg Red

同样的事情发生在这里，当search_string = 'rood'时solr没有找到'Roodeberg'，它只找到了完全匹配

* * *

# 更新

向 schema.xml 添加 nGram 过滤器以进行部分匹配，感谢 DanS
但仍未显示所有结果

**应用程序/solr/conf/schema.xml**

```
<fieldType name="text" class="solr.TextField" omitNorms="false">

    <analyzer type="index">
        <tokenizer class="solr.LowerCaseTokenizerFactory"/>
        <filter class="solr.NGramFilterFactory" minGramSize="3" maxGramSize="15"/>
    </analyzer>

    <analyzer type="query">
        <tokenizer class="solr.LowerCaseTokenizerFactory"/>
    </analyzer>

</fieldType> 
```

* * *

它仍然没有完全按照我的意愿去做，看看下面的例子

**search3**
search_string = "merl"

**@solr_search_results**
130 Merlot
202 Merlot
306 Merlot
336 Merlot
556 Merlot
579 Merlot
592 Merlot
623 Merlot
640 Merlot
689 Merlot
694 Merlot
714 Merlot
776 Merlot
790 Merlot
841 Merlot
865 Merlot
891 Merlot
947 Merlot
1015 Merlot
1045 Merlot
1046 Merlot
1073 Merlot
1075 Merlot
1089 Merlot
1096 美乐
1111 美乐
1121 美乐
1144 美乐
1145 美乐
1169 美

**乐 @rails_search_results**
34 Cavalier Reserve Blend Merlot Cabernet Franc Cabernet Sauvignon Shiraz
129 Matt Black Cabernet Sauvignon Shiraz Merlot Petit Verdot Mourvedre Pinotage
130 Merlot
202 Merlot
240 Grappa Cabernet Merlot Premium
306 Merlot
336 Merlot
416 Dry Rosè Merlot
477 Orchestra Cabernet Sauvignon Malbec Merlot Cab Franc
Sh​​iraz 483 Roodeberg Red赤霞珠 设拉子 美乐
556 美乐
579 美乐
592 美乐
614 赤霞珠 美乐
623 美乐
640 美
乐 656 书法美乐 品丽珠 长相思
672 Ondine 美乐
689 美乐
694 美乐
696 桶装美乐
714 美乐
762 私人珍藏美乐
776 美乐
790 美乐
795 私人珍藏美乐
816 JJ 手工葡萄酒 美乐
832 金三角美乐
841 美乐
842 桃红葡萄酒
854 鹰冠赤霞珠美乐
865 美乐
877 酿酒师精选美乐 设拉子
891 美乐
892 珍藏美乐
893 山红设拉子 美乐
941酒窖精选梅洛赤霞珠
943 葡萄园精选赤霞珠 梅洛 Cab Franc Sh​​iraz
947 Merlot
982 Boet Erasmus Cabernet Sauvignon Merlot Malbec Petit Verdot
983 Cara Cabernet Sauvignon Shiraz Merlot
984 Classic Cabernet Sauvignon Shiraz Merlot
1010 Laureat Cabernet Sauvignon Merlot
1015 Merlot
1045 Merlot
1046 Merlot
1073 Merlot
1075 Merlot
1079 Cabernet/Merlot
1089 Merlot
1093 Adelberg Cabernet Sauvignon Merlot
1096 Merlot
1104 Z Collection Cabernet Franc Merlot Cabernet Sauvignon
1111 Merlot
1121 Merlot
1144 Merlot
1145 Merlot
1169 Merlot
1186 Merlot
1254 Cabernet长相思 美乐
1260 赤霞珠/美乐
1261 美乐
1269 美乐
1326 美
乐 1349 赤霞珠 美乐
1364 品种选择 美乐
1381 美
乐 1384 赤霞珠 美乐
1393 Cabernet Sauvignon Merlot
1401 Cabernet Sauvignon Merlot
1404 Merlot
1421 Petit Cabernet Sauvignon Merlot
1424 Merlot
1431 Collection Merlot
1443 Merlot
1454 Merlot 1454 Merlot
1467 Merlot 1467 Merlot 1468 Merlot
1468 Merlot
1476 Inderlland 1476 Inderllance 1476 Interlanlllance 1491 1491 1491
1491 零售店未过滤美乐 1592 美乐 3001 美 乐 3007 赤霞珠 美乐 3036 赤霞珠 美乐 3056 美乐 3067 犹太美乐 3073 有机美乐 3079 优质美乐

3091 Merlot
3106 Merlot with a dash of Malbec
3133 Cabernet Sauvignon Merlot
3143 Five Climates Merlot
3154 Reserve No1 Merlot
3182 Lanoy Cabernet Sauvignon Merlot
3183 Reserve Collection Cab Sauv Merlot Cab Franc
3200 Merlot
3236 Giorgio Cabernet Sauvignon Merlot Petit Verdot Shiraz
Svignon 3258 Danie De Wet Caber梅洛
3276 红赤霞珠 梅洛 法郎小维多设拉子
3288 梅洛
3303 四重皮诺塔吉赤霞珠 梅洛 设拉子
3307 多样性梅洛 马尔贝克
3311 葡萄园创作梅洛
3318 卡普曼赤霞珠 梅洛
3321 Luipaardsberg 梅洛
3322 梅洛
3326 Rhinofields Merlot
3334 Merlot
3343 Merlot
3363 Merlot Cabernet Sauvignon
3372 Merlot
3390 Merlot
3416 R 62 Merlot Cabernet Sauvignon
3418 Unplugged 62 Merlot Rosé
3419 Unplugged 62 Merlot Shiraz
3431 Merlot
3439 KC Cabernet Sauvignon Merlot
3471 Orchestra Cabernet Sauvignon Malbec Merlot Cab Franc
Sh​​iraz 3497 Merlot
3498 Merlot 赤霞珠
3510 Merlot
3531 Merlot
3540 Merlot
3560 Merlot
3568 Merlot Rose
3578 特别版 Merlot
3581 Merlot
3584 Cabernet Sauvignon Merlot
3624 Merlot
3642 Cellar Selecti on Merlot
3657 Merlot
3677 Merlot
3681 Merlot
3685 Series C Cabernet Sauvignon Merlot Cab Franc
3693 Merlot
3728 Alexanderfontein Merlot
3755 Peacock Ridge Merlot
3771 The Old Museum Merlot
3773 Cellar Selection Cabernet Sauvignon Merlot
3820 Merlot
3859 Merlot
3882 Dunstone Merlot
3900 Duckitt Merlot Cabernet Sauvignon
3919 Merlot
3947 Merlot

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:39:23.277

好像你想[匹配 substrings](https://github.com/sunspot/sunspot/wiki/Matching-substrings-in-fulltext-search)。

将以下过滤器添加到您的 schema.xml 以匹配索引文本的任何前缀：

```
<filter class="solr.EdgeNGramFilterFactory"/> 
```

或以下匹配任意子字符串：

```
<filter class="solr.NGramFilterFactory"/> 
```

有关更多信息，请参阅[Solr 维基](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T11:52:51.893

# 更新2

**固定的！**似乎 Solr 默认只显示 30 个条目，因此它只显示最相关的匹配项，并跳过了我也想要的其他匹配项。
我添加了这个文件

myapp/config/initializers/sunspot_solr.rb

```
Sunspot.config.pagination.default_per_page = 3000 
```

# android - 自定义 SeekBar 无法实例化 - java.lang.NullPointerException

> ID：10601869
> 
> 赞同：0
> 
> 时间：2012-05-15T13:33:36.053
> 
> 标签：android, seekbar

当我尝试在 main.xml 中使用自定义搜索栏时，我无法实例化错误消息，并且在运行时它会给出错误膨胀类消息。

海关搜索栏.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TableRow
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView 
        android:id="@+id/leftText"
        android:textSize="10dp"
        android:gravity="left" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <TextView 
        android:id="@+id/centerText"
        android:textSize="20dp"
        android:gravity="left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView 
        android:id="@+id/rightText"
        android:textSize="10dp"
        android:gravity="right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</TableRow>

<TableRow
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <SeekBar 
        android:id="@+id/seekBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"            />

</TableRow> 
```

CustomSeekBar.java

```
 package kirbz.Component.CustomSeekBar;
    import android.content.Context;
    import android.util.AttributeSet;
    import android.widget.SeekBar;
    import android.widget.TextView;

public class CustomSeekBar extends SeekBar {

private SeekBar mSeekBar = (SeekBar) findViewById(R.id.seekBar);
private TextView mMinText = (TextView) findViewById(R.id.leftText);
private TextView mMaxText = (TextView) findViewById(R.id.rightText);
private TextView mValueText = (TextView) findViewById(R.id.centerText);

public CustomSeekBar(Context context, AttributeSet attrs) {
    super(context, attrs);
     mSeekBar=(SeekBar) findViewById(R.id.seekBar);
     mSeekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
                mValueText.setText(String.valueOf(new Integer(progress)));        
            }

            public void onStartTrackingTouch(SeekBar arg0) {
                // TODO Auto-generated method stub
                  mValueText.setText(String.valueOf(new Integer(mSeekBar.getProgress())));      
            }

            public void onStopTrackingTouch(SeekBar arg0) {
                // TODO Auto-generated method stub
                  mValueText.setText(String.valueOf(new Integer(mSeekBar.getProgress())));      
            }
     });
    // TODO Auto-generated constructor stub
}

public void setValues(int max, int min, int value) {
    mSeekBar.setMax(max-min);
    mMaxText.setText(String.valueOf(max));
    mMinText.setText(String.valueOf(min));
    mSeekBar.setProgress(value - min);
    mValueText.setText(String.valueOf(value));

} 
```

}

我的 main.xml 是

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<kirbz.Component.CustomSeekBar.CustomSeekBar
    android:id="@+id/customSeekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_gravity="left" /> 
```

LogCAT

```
05-01 17:39:51.227: E/AndroidRuntime(675): FATAL EXCEPTION: main
05-01 17:39:51.227: E/AndroidRuntime(675): java.lang.RuntimeException: Unable to start activity ComponentInfo{kirbz.Component.CustomSeekBar/kirbz.Component.CustomSeekBar.CustomSeekBarActivity}: android.view.InflateException: Binary XML file line #12: Error inflating class kirbz.Component.CustomSeekBar.CustomSeekBar
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.os.Looper.loop(Looper.java:123)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-01 17:39:51.227: E/AndroidRuntime(675):  at java.lang.reflect.Method.invokeNative(Native Method)
05-01 17:39:51.227: E/AndroidRuntime(675):  at java.lang.reflect.Method.invoke(Method.java:507)
05-01 17:39:51.227: E/AndroidRuntime(675):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-01 17:39:51.227: E/AndroidRuntime(675):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-01 17:39:51.227: E/AndroidRuntime(675):  at dalvik.system.NativeStart.main(Native Method)
05-01 17:39:51.227: E/AndroidRuntime(675): Caused by: android.view.InflateException: Binary XML file line #12: Error inflating class kirbz.Component.CustomSeekBar.CustomSeekBar
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-01 17:39:51.227: E/AndroidRuntime(675):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.app.Activity.setContentView(Activity.java:1657)
05-01 17:39:51.227: E/AndroidRuntime(675):  at kirbz.Component.CustomSeekBar.CustomSeekBarActivity.onCreate(CustomSeekBarActivity.java:11)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-01 17:39:51.227: E/AndroidRuntime(675):  ... 11 more
05-01 17:39:51.227: E/AndroidRuntime(675): Caused by: java.lang.reflect.InvocationTargetException
05-01 17:39:51.227: E/AndroidRuntime(675):  at java.lang.reflect.Constructor.constructNative(Native Method)
05-01 17:39:51.227: E/AndroidRuntime(675):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
05-01 17:39:51.227: E/AndroidRuntime(675):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
05-01 17:39:51.227: E/AndroidRuntime(675):  ... 21 more
05-01 17:39:51.227: E/AndroidRuntime(675): Caused by: java.lang.NullPointerException
05-01 17:39:51.227: E/AndroidRuntime(675):  at kirbz.Component.CustomSeekBar.CustomSeekBar.<init>(CustomSeekBar.java:18)
05-01 17:39:51.227: E/AndroidRuntime(675):  ... 24 more 
```

你能告诉我我错过了什么吗？

感谢您的时间，并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:13:08.437

我改变了整个方法并设法通过以下方式实现了我想要的 -

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableRow 
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <TextView 
            android:id="@+id/leftText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="10dp"
            android:gravity="left" android:layout_gravity="left|center_vertical" android:layout_weight="1" android:paddingLeft="10dp"/>

        <TextView 
            android:id="@+id/centerText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="20dp"
            android:gravity="center" android:layout_weight="1"/>

        <TextView 
            android:id="@+id/rightText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="10dp"
            android:gravity="right" android:layout_weight="1" android:paddingRight="10dp"/>
    </TableRow>

    <TableRow 
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <SeekBar 
            android:id="@+id/seekBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
 />

    </TableRow>
</LinearLayout> 
```

CustomBar.java 是将布局扩展为 LAYOUT 的自定义类

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.widget.LinearLayout;
import android.widget.SeekBar;
import android.widget.Toast;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.view.View;
import android.widget.TextView;

public class CustomBar extends LinearLayout {

    private SeekBar mSeekBar;
    private TextView mMinText;
    private TextView mMaxText;
    private TextView mValueText;

    public CustomBar(Context context, AttributeSet attrs) {
        super(context, attrs);
        final LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.customseekbarlayout, this);

        initializeLayout();

        // TODO Auto-generated constructor stub

    }

    public void setValues(int max, int min, int value) {
        mSeekBar.setMax(max-min);
        mMaxText.setText(String.valueOf(max));
        mMinText.setText(String.valueOf(min));
        mSeekBar.setProgress(value - min);
        mValueText.setText(String.valueOf(value));

    }

    private void initializeLayout() {
        this.mSeekBar = (SeekBar) findViewById(R.id.seekBar);
        this.mMinText = (TextView) findViewById(R.id.leftText);
        this.mMaxText = (TextView) findViewById(R.id.rightText);
        this.mValueText = (TextView) findViewById (R.id.centerText);

        this.mSeekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            @Override
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                // TODO Auto-generated method stub
                mValueText.setText(String.valueOf(progress));
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
                //Toast.makeText(getContext(), "Test2", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
                //Toast.makeText(getContext(), "Test3", Toast.LENGTH_SHORT).show();
            }

        });
    }

    public int getValue(){
        return mSeekBar.getProgress();
    }

} 
```

main.xml 是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <kirbz.Components.CustomSeekBar.CustomBar
        android:id="@+id/customBar1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </kirbz.Components.CustomSeekBar.CustomBar>

</LinearLayout> 
```

MainActivity 是

```
import android.app.Activity;
import android.os.Bundle;

    public class CustomSeekBarActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final CustomBar mSeekBar = (CustomBar) findViewById(R.id.customBar1);

        mSeekBar.setValues(8,4,6);
    }
} 
```

# sql-server-2008 - sql server 2008 64位和sql server 2008有什么区别？

> ID：10601870
> 
> 赞同：0
> 
> 时间：2012-05-15T13:33:36.443
> 
> 标签：sql-server-2008

您能否解释一下 SQL Server 64 位版本带来了常规 32 位没有的表中的什么？换句话说，我为什么要投资 64 位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:36:34.743

> SQL Server 64位版本带入一个普通32位没有的表？换句话说，我为什么要投资 64 位？

它是 2008 可以使用的内存量。在 32 位版本中，它仅限于几个千兆字节，而 64 位版本可以使用更多。在 32 位版本中，服务器必须访问硬盘以获取更多的数据库信息，64 位操作系统和足够的内存允许服务器在内存中保存更多的数据库，从而使查询速度更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:46:08.730

它为您带来了 64 位应用程序相对于 32 位应用程序的所有优势。你知道那是什么意思吗？

主要是通过 CPU 处理信息的方式从硬件级别开始。例如，32 位 CPU 只能处理 2^32 bist，这将其限制为 2Gb 的 RAM。64位可以处理2^64，这是一个非常大的内存量。您可以轻松得出结论，任何硬件改进都会对在其上运行的每个软件产生积极影响，SQL Server 也不例外。

# java - for循环/if语句java

> ID：10601872
> 
> 赞同：-3
> 
> 时间：2012-05-15T13:33:43.217
> 
> 标签：java

```
//Pylons
int xCoord[];
int yCoord[];
int numSquare;
boolean firstPaint;

public void init() {
    //Images Call
    pylon = getImage(getDocumentBase(), "image/pylon.png");
    numClicks = 0;

    //pylons
    xCoord = new int[100];
    yCoord = new int[100];
    numSquare = 0;
}

public void paint(Graphics g) {
    if (numClicks == 0) {
        drawUI(g);
        //probeDraw(g,2);
    }

    if (numSquare == 1) {
        for (int k = 0; k < numSquare; k++) {
            g.drawImage(pylon, xCoord[k], yCoord[k], this);
        }
        Minerals -= 100;
        popMax += 9;
    }
}

public boolean mouseDown(Event e, int x, int y) {
    if (numClicks == 10) {//Title screen        
        numClicks++;
        repaint();
    }

    if (numSquare == 0) {
        xCoord[numSquare] = x;
        yCoord[numSquare] = y;
        numSquare++;
        repaint();
    }
    return true;
} 
```

当我这样做而不是仅仅减去 100 时，它会将其设置为 -300 并且它将 popMax 添加到 36 而不是 10。有时它会正确，有时它不会真的很烦人

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T13:35:47.877

您正在更新paint(...) 中的类级变量，该方法在每次ui 组件需要重新绘制时调用。我并不惊讶它很烦人。

您需要将处理单击操作的逻辑从绘制方法中分离出来 - 并使用绘制方法仅呈现组件的当前状态。

编辑：根据您的评论，在不知道您的应用程序结构的情况下，我想您需要这样的东西：

```
private void handlePylonPlacement()
{
    if(decrementMinerals(-100))
        addPopMax(9);
} 

private boolean decrementMinerals(int amount)
{ 
    if(MaxMinerals - amount >= 0) // prevent situation where you go into negative minerals
    {
         MaxMinerals -= amount;
         return true;
    }
    else
         return false;
}

private void addPopMax(int amount)
{
    if(popMax + amount <= MAX_POPULATION) // restrict addition to pop-max to a sane upper bound
         popMax += amount;
}

public boolean mouseDown(Event e, int x, int y) {
    if (numClicks == 10) {//Title screen        
        numClicks++;
        repaint();
    }

    if (numSquare == 0) {
        xCoord[numSquare] = x;
        yCoord[numSquare] = y;
        numSquare++;
        handlePylonPlacement(); // call your new handler
        repaint();
    }
    return true;
} 
```

# windows - 检查 UTF8 编码字符串的有效性

> ID：10601880
> 
> 赞同：3
> 
> 时间：2012-05-15T13:33:58.357
> 
> 标签：windows, winapi, utf-8

我们需要编写一个函数来检查字符串是否是有效的 UTF8。客户端发送数据（应该是 UTF8），在服务器端，我们要确认发送的数据真的是 UTF8。

客户端是 BREW（移动平台）应用程序，服务器是写在 windows 桌面（windows 的 API）上的。

Windows 中是否有任何 API 可以帮助确定 UTF8 字符串的有效性？

我见过类似`MultiByteToWideChar()`将 UTF8 转换为宽字符（2 个字节）的东西，如果我们使用这个函数但它失败了，这意味着传递的字符串没有 UTF8 字符/字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:45:11.523

您可以使用[`MultiByteToWideChar()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)带有`MB_ERR_INVALID_CHARS`标志和 0 的函数传递给`cchWidechar`. 如果它返回一个大小，那么它是有效的。如果它返回 0，那么您可以检查`GetLastError`它是否返回`ERROR_NO_UNICODE_TRANSLATION`。

# seo - 哪个更好：meta-refresh-url-redirect 或 htaccess 301 重定向？

> ID：10601881
> 
> 赞同：2
> 
> 时间：2012-05-15T13:33:58.670
> 
> 标签：seo

将 url 重定向到另一个位置以帮助 SEO 的更好方法是什么？

方法一：

```
<meta http-equiv="Refresh" content="0;url=http://destinationSiteHere"> 
```

方法二：

.htaccess 301 重定向

请建议哪种方法在搜索引擎优化方面更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:38:45.397

301 重定向是您想要的，因为它告诉搜索引擎该页面已永久移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T12:00:45.330

301 重定向比元刷新重定向要好得多

依靠元刷新标签来重定向客户是一个坏主意的最大原因是垃圾邮件发送者使用它们来欺骗搜索引擎。垃圾邮件发送者建立了一个包含大量关键字的网站——它甚至可能看起来像一个真实的网站。然后他们在页面上进行元刷新，这样一两秒后你就会被重定向到“真实”页面。我一直看到的最烦人的一个有一堆网络托管信息，但您真正有时间阅读的唯一内容是“什么是最好的托管公司？” 或类似的东西。然后你被重定向到主机。我假设他们希望它能够充当一种“潜意识”广告风格，并且您会认为他们的网站是最好的托管服务。就个人而言，我只是觉得他们很懒散。

当然，大多数知名搜索引擎一旦发现垃圾邮件发送者，就会从数据库中删除链接。他们找到它们的一种方法是寻找“元刷新”标签。因此，如果您经常使用元刷新标签，您可能看起来像是搜索引擎的垃圾邮件发送者。他们将从结果中删除您的页面。

# c# - 使用 SQL 和 C# 从不同的表中删除行

> ID：10601884
> 
> 赞同：0
> 
> 时间：2012-05-15T13:34:10.907
> 
> 标签：c#, sql, oledb

我正在尝试从 tblOrderAA 中删除几行，从 tblProInfo 中删除一行：（看图片）![在此处输入图像描述](../Images/75f41a0f402ddfb4a5eaa440c2b3e86f.png)

这是代码。我得到的错误是：

> “记录已被删除”

```
 private void DeleteFromDataBase()
        {
            string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Projects_2012\\Project_Noam\\Access\\myProject.accdb";
            OleDbConnection myConnection = new OleDbConnection(connectionString);
            string myDeleteQuery ="DELETE tblOrderAA.*, tblProInfo.*"+
" FROM tblProInfo INNER JOIN tblOrderAA ON tblProInfo.proInfoSerialNum = tblOrderAA.orderAASerialPro" +
" WHERE (((tblProInfo.proInfoScienceName)='"+comboBox1.SelectedItem.ToString()+"'))";

            OleDbCommand myCommand = new OleDbCommand(myDeleteQuery);
            myCommand.Connection = myConnection;
            try
            {
                myConnection.Open();
                myCommand.ExecuteNonQuery();
                myCommand.Connection.Close();

                MessageBox.Show("success");
            }
            catch (Exception e)
            {
                MessageBox.Show("error in : \n" + e.ToString());
            } 
```

**注意：**当我使用此代码时，`SELECT`它`DELETE`可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:59:24.743

您不能使用我知道的一个查询从多个表中删除。如果启用了级联删除，那么您只需从 Product 表中删除，订单记录将被自动删除。如果没有，我的建议是运行以下查询以获取外键并从每个表中删除：

```
"SELECT proInfoSerialNum "+
" FROM tblProInfo " +
" WHERE (((tblProInfo.proInfoScienceName)='"+comboBox1.SelectedItem.ToString()+"'))" 
```

（将结果存储在变量中，比如说`serialNum`）

```
// delete the order records first so they are not orphaned
"DELETE tblOrderAA.* "+
" FROM tblOrderAA " +
" WHERE (((tblOrderAA.orderAASerialPro)='"+serialNum.ToString()+"'))"

// Delete the product info
"DELETE tblProInfo.*"+
" FROM tblProInfo " +
" WHERE (((tblProInfo.proInfoSerialNum )='"+serialNum.ToString()+"'))" 
```

请注意，我省略了运行这些查询的实际 C# 代码，只是给您 SQL 以让您了解我将如何做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:47:54.140

我猜想级联删除可能已经打开了。仅从查询中的主表中删除或关闭数据库中的级联。

# java - 搜索 MultiFields lucene

> ID：10601886
> 
> 赞同：2
> 
> 时间：2012-05-15T13:34:18.180
> 
> 标签：java, lucene, full-text-search, search-engine

您好，有一个应用程序将包含大量不同的元数据字段。他们预计会有大约 5 000 - 10 000 个字段。

是否可以使用 lucene 一次搜索所有这些字段，而不将它们索引到一个字段中？

MultiFieldQueryParser 为每个单个字段生成一个查询，如果我没记错的话，默认 luecene 一次设置为大约 1000 个组合查询？

是否有任何其他解析器可以搜索所有字段？

//三连

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:10:09.287

不，如果您有多个字段并且想要全部搜索它们，那么您将不得不全部搜索它们。

从理论上讲，搜索大量小字段与搜索一个大字段[不会对性能造成损害：](http://philosophyforprogrammers.blogspot.com/2010/09/lucene-performance.html)

> 换句话说：对于标准析取（OR'd）查询，子句的数量并不会真正影响性能，除非更多文档是潜在的匹配项

在实践中，您可能会看到一些问题；我不知道。不过，在假设您需要将它们全部索引为一个之前，我会尝试一下。

（默认情况下，最大子句数为 1024，但您可以通过[setMaxClauseCount](http://lucene.apache.org/core/old_versioned_docs/versions/3_2_0/api/all/org/apache/lucene/search/BooleanQuery.html#setMaxClauseCount%28int%29)更改。）

# svn - Subversion 1.1.4：如何添加标记为当前不受版本控制的文件？

> ID：10601893
> 
> 赞同：0
> 
> 时间：2012-05-15T13:34:41.373
> 
> 标签：svn

我不小心在我的工作副本目录中添加了一些文件，当我运行 svn status 时，它们标有问号（项目不受版本控制）。我想通过将文件添加到版本控制来纠正这个问题，但我不确定删除文件并尝试 svn 添加它们的后果是什么。谁能推荐最好的方法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:36:25.787

您想使用`svn add <file>`，即使在创建文件之后。如果删除它们，存储库将保持不变。只有通过添加文件并提交它们，您才能更改存储库。

# macos - 让 Mac 程序在没有 Window Server 的情况下工作

> ID：10601894
> 
> 赞同：0
> 
> 时间：2012-05-15T13:34:42.950
> 
> 标签：macos

> **可能重复：**
> [避免 X11 从 Mac 转发到 linux](https://stackoverflow.com/questions/10601180/avoid-x11-forwarding-from-mac-to-linux)

即使没有 Window Server，我也想让 Mac 程序工作。我需要它，因为从 Linux 机器登录并且我不需要 GUI（即使未使用该程序仍会创建它）。现在我收到以下错误：

```
<Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged.
_RegisterApplication(), FAILED TO establish the default connection to the WindowServer, _CGSDefaultConnection() is NULL.
couldn't allocate new Mac window 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:45:45.173

不要创建 GUI，并且不会依赖它。

将程序分成几部分：命令行版本和 GUI 版本。GUI 可以调用命令行之一来完成这项工作（通过`NSTask`参数和/或`Distributed Objects`），或者它们可以与执行实际工作的代码共享第三个包。

# maven - 阶段 mojoExecution 发生错误，异常 org.apache.maven.plugin.MojoExecutionException: Obfuscation failed (result=1)

> ID：10601897
> 
> 赞同：1
> 
> 时间：2012-05-15T13:34:49.270
> 
> 标签：maven, proguard

当我尝试为 Maven 运行 Proguard 插件时出现此异常：

> 阶段 mojoExecution 发生错误，异常 org.apache.maven.plugin.MojoExecutionException: Obfuscation failed (result=1)

如何获得更详细的日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:43:14.860

你可以添加属性 -e 来获取堆栈跟踪，和/或 -X 来获取 maven 执行的完整日志，到 maven 命令行。

# visual-studio - 加密转换后的 Web 配置

> ID：10601898
> 
> 赞同：1
> 
> 时间：2012-05-15T13:34:52.470
> 
> 标签：visual-studio, msbuild, publishing

我正在使用 Visual Studio 单击发布通过 FTP 发布我的网站（右键单击 -> 发布 -> FTP）。

我想加密 web.config 作为发布过程的一部分。

我正在关注[http://litemedia.info/encrypt-your-web-config-with-msbuild](http://litemedia.info/encrypt-your-web-config-with-msbuild)这很棒，但它修改了我不想要的实际 web.config 文件。我想在发布之前修改项目文件以加密 TRANSFORMED web.config。

我找不到在发布 web.config 转换之前触发的目标，但在 FTP 发布之前以执行此操作。

有没有人有什么建议？

问候卡尔

更新 - 我已经回答了我自己的问题并找到了一个在转换 web.config 之后执行的目标，就在物理文件发布之前。

```
<Target Name="CustomPostPublishActions" AfterTargets="PipelinePreDeployCopyAllFilesToOneFolder" >
<Exec Command="&quot;%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe&quot; -pef &quot;connectionStrings&quot; &quot;$(WebProjectOutputDir)\obj\$(ConfigurationName)\TransformWebConfig\transformed&quot; -prov &quot;RsaProvider&quot;" />
</Target> 
```

# php - 将应用程序配置设置传递给实体

> ID：10601900
> 
> 赞同：1
> 
> 时间：2012-05-15T13:34:59.717
> 
> 标签：php, oop, design-patterns, doctrine

我有一个将 Doctrine ORM 用于实体的应用程序。遵循 OO 设计，我尝试将尽可能多的业务逻辑推送到实体中。但是我遇到了一个小问题。一些业务逻辑需要在我的外部应用程序配置中定义的变量（因为它们有时需要调整）。我如何在不违反 OO 原则的情况下将它们放入我的实体中？我不想直接从我的实体访问我的全局配置，也不想将这些变量存储在我的实体和数据库中。

这是一个模式的具体示例。我将 PHP 与 Doctrine ORM 一起使用，但同样的 OO 原则适用于 Hibernate (JAVA)、nHibernate (C#) 等。

我的应用程序有产品和用户。有许多不同类型的用户（真正的人类用户、自动化机器人等）。他们都需要处理 Product 对象。所有用户共享同一个 UserInterface，它有一个方法：

```
class UserInterface {
    function canProcess(Product $product);
} 
```

我有一个在产品和用户之间进行调解的 ProcessService。它只是遍历附加到产品的所有用户，直到找到愿意在那个时候处理它的用户。

```
class ProcessService {

    // Process a product
    function process(Product $product) {
        foreach ($this->getUsers() as $user) {
            if ($user->canProcess($product)) {
                ...
            }
     }
} 
```

问题是一些用户（在我的例子中是机器人之一）需要有一个外部配置变量才能确定它是否可以处理产品。

我不想将该值存储在我的实体和数据库中（这不是正确的位置），并且我不想从机器人实体内部访问我的全局配置对象（违反 OO）。但是，我也不能通过`canProcess()`接口方法传递它，因为这个变量只适用于那一种类型的机器人，而不适用于我系统中的所有其他类型的用户。因此，它在 UserInterface 中也没有位置。

那么，如何将此配置变量放入我的实体中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:34:08.023

好吧，我只看到三种选择：

1.  机器人实体是使用值创建的
2.  该值在某个时间点传递到机器人实体
3.  机器人实体获得值，很可能来自某种工厂或单例

我认为选项 3 将是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:31:49.970

我通过使用`postLoad`事件处理程序解决了它。应用程序配置被传递给事件处理程序，并且在`postLoad`事件中我将配置设置注入到`User`需要它的适当实体中。

# c++ - 练习期末考试题，“数据结构”课

> ID：10601904
> 
> 赞同：0
> 
> 时间：2012-05-15T13:35:17.427
> 
> 标签：c++, data-structures

我正在为一门数据结构课程做练习期末考试，我有几个问题希望得到帮助：

1.  ```
    void BST::traverse(Vertex *V)  // post order traversal recursively
    {   
      if (V != NULL) 
        {
          traverse(V->Left);        
          traverse(V->Right);       
          cout << V->elem << endl;     
        }
    } 
    ```

    我需要将其更改为深度优先搜索。我相信我必须在每次递归时重新访问根，但我很困惑，因为那时我永远不会离开根。也许是一个临时的根？没有把握！

2.  对于我们的链表实现，我必须描述使用我们的复制构造函数的两种情况。我知道它是为函数调用而调用的。但是还有什么原因呢？

3.  为什么我们使用大 O 表示法 [例如 O(n^2) 而不是说 2n^2 + 3n + 4)。我知道这样做时我们会忽略常量，但我还能给出更多答案吗？

4.  时间与空间的复杂性。对我来说最明显的是合并排序与快速排序，但是如果测试要求更多，你能想到另一个吗？我们在课堂上经历了这么多，我不敢相信我不能说出更多的名字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:41:51.527

1.  如果您只是将搜索代码添加到其中，它已经是深度优先搜索。

2.  您已经遇到过将 a 作为参数*按值传递*`BST`给函数的情况。您制作对象的另一个副本是什么时候？（提示：一个也和函数有关）

**   因为当`n`很大时，2 ^n将比等式中的任何其他内容大得多，因此您只需将常数和其他所有内容都排除在外。Big-O 表示法绝对不是精确的，它只是让您知道随着输入变得非常大，问题的解决方案如何*扩展。*当`n`变得足够大时，复杂性是如此之大，以至于其他东西都相形见绌，基本上是 2 ^n。

    *   您必须对此更具体。您是否正在寻找两种以速度换空间的算法？* 

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:46:40.693

3 个大 O 符号只引用主导项。当 n 变大时，这是结果中最重要的部分。

4 考虑冒泡排序 - 我以前不喜欢它，因为它需要很长时间，但只需要空间来放置一个项目。*

# php - 在函数调用中调用 php 函数作为参数

> ID：10601910
> 
> 赞同：0
> 
> 时间：2012-05-15T13:35:32.620
> 
> 标签：php, html

我正在尝试将数据从数据库打印到[hcard](http://microformats.org/wiki/hcard)格式：

```
...
<span class='n'>
<span class="given-name">John</span>
...
</span> 
```

然后我创建了这个 php 函数：

```
function print_row ($html_tag, $type, $value) {
    echo '<'.$html_tag.' class="'.$type.'">'.$value.'</'.$html_tag.'>';
}

// Calling function
print_row('span', 'given_name', 'John');

// Output
<span class="given_name">Nathan</span> 
```

在我尝试将我的`print_row`函数作为函数的参数调用之前，这按我的预期`print_row`工作。

```
print_row('span', 'n', print_row('span', 'given_name', 'Nathan'));

// Output
<span class="given_name">Nathan</span>
<span class="n"></span>

// Wanted Output
<span class="n"><span class="given_name">Nathan</span></span> 
```

1.  为什么我的第二个“print_row”函数调用不在我的第一个“print_row”函数调用中？
2.  这甚至不可能吗？（[PHP - 我可以将函数名作为函数参数传递吗？](https://stackoverflow.com/questions/9261415/php-can-i-pass-a-function-name-as-a-function-argument)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:37:41.210

几乎*总是*在函数调用中使用`return`而不是。`echo`

为什么？因为`return`返回数据并让您存储和回显它。`echo`只是将它呈现给浏览器。

`return`基本和`echo`功能的一个例子是[`print_r()`](http://php.net/manual/en/function.print-r.php). 如果第二个参数为 TRUE ，它要么执行 a `echo`，要么执行 a。`return`

* * *

你应该改变

```
function print_row ($html_tag, $type, $value) {
    echo '<'.$html_tag.' class="'.$type.'">'.$value.'</'.$html_tag.'>';
} 
```

到

```
function print_row ($html_tag, $type, $value) {
    return '<'.$html_tag.' class="'.$type.'">'.$value.'</'.$html_tag.'>';
} 
```

并在现有位置上相应地呼应该功能。
那或添加第四个参数，`return`而不是`echo`：

```
function print_row ($html_tag, $type, $value, $bool = FALSE) {
    $str = '<'.$html_tag.' class="'.$type.'">'.$value.'</'.$html_tag.'>';
    if ($bool)
        return $str;
    else echo $str;
}

print_row('span', 'n', print_row('span', 'given_name', 'Nathan', TRUE));
// Added a ', TRUE' at the second last ')' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:37:10.013

您必须从函数返回值，而不是`echo`它。

# android - ListView - 左侧的垂直滚动条

> ID：10601912
> 
> 赞同：3
> 
> 时间：2012-05-15T13:35:38.903
> 
> 标签：android, listview, scrollbar

是否可以将 ListView 滚动条移到左侧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T13:38:07.410

您可以使用 将滚动条位置移动到任何视图的左侧[`View.SCROLLBAR_POSITION_LEFT`](http://developer.android.com/reference/android/view/View.html#SCROLLBAR_POSITION_LEFT)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:47:13.253

试试我的肮脏技巧，它似乎至少在 2.2 及更高版本上有效：

[如何使“滚动条”出现在左侧？](https://stackoverflow.com/questions/10826879/how-to-make-the-scrollbar-appear-on-the-left-side/12527946#12527946)

# c# - OpenPop.net 获取实际的消息文本

> ID：10601913
> 
> 赞同：12
> 
> 时间：2012-05-15T13:35:40.983
> 
> 标签：c#, asp.net, email, openpop

我正在使用 OpenPop.net 尝试从给定收件箱中的所有电子邮件中解析我们的链接。我发现这种方法可以获取所有消息：

```
 public static List<OpenPop.Mime.Message> FetchAllMessages(string hostname, int port, bool useSsl, string username, string password)
    {
        // The client disconnects from the server when being disposed
        using (Pop3Client client = new Pop3Client())
        {
            // Connect to the server
            client.Connect(hostname, port, useSsl);

            // Authenticate ourselves towards the server
            client.Authenticate(username, password);

            // Get the number of messages in the inbox
            int messageCount = client.GetMessageCount();

            // We want to download all messages
            List<OpenPop.Mime.Message> allMessages = new List<OpenPop.Mime.Message>(messageCount);

            // Messages are numbered in the interval: [1, messageCount]
            // Ergo: message numbers are 1-based.
            // Most servers give the latest message the highest number
            for (int i = messageCount; i > 0; i--)
            {
                allMessages.Add(client.GetMessage(i));                    
            }

            client.Disconnect();

            // Now return the fetched messages
            return allMessages;
        }
    } 
```

现在我正在尝试遍历每条消息，但我似乎无法弄清楚该怎么做，到目前为止我的按钮有这个：

```
 private void button7_Click(object sender, EventArgs e)
    {

        List<OpenPop.Mime.Message> allaEmail = FetchAllMessages("pop3.live.com", 995, true, "xxxxx@hotmail.com", "xxxxx");

        var message = string.Join(",", allaEmail);
        MessageBox.Show(message);
    } 
```

我将如何遍历 allaEmail 中的每个条目，以便可以在 MessageBox 中显示它？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-15T13:58:41.987

我可以看到您使用了 OpenPop 主页上的[fetchAllEmail 示例](http://hpop.sourceforge.net/exampleFetchAllMessages.php)。主页上也有一个[显示如何获取正文文本](http://hpop.sourceforge.net/exampleSpecificParts.php)的类似示例。

您可能还想查看电子邮件的实际结构。[电子邮件介绍](http://hpop.sourceforge.net/emailIntroduction.php)就是为了这个目的。

话虽如此，我会做一些类似于下面的代码的事情。

```
private void button7_Click(object sender, EventArgs e)
{
    List<OpenPop.Mime.Message> allaEmail = FetchAllMessages(...);

    StringBuilder builder = new StringBuilder();
    foreach(OpenPop.Mime.Message message in allaEmail)
    {
         OpenPop.Mime.MessagePart plainText = message.FindFirstPlainTextVersion();
         if(plainText != null)
         {
             // We found some plaintext!
             builder.Append(plainText.GetBodyAsText());
         } else
         {
             // Might include a part holding html instead
             OpenPop.Mime.MessagePart html = message.FindFirstHtmlVersion();
             if(html != null)
             {
                 // We found some html!
                 builder.Append(html.GetBodyAsText());
             }
         }
    }
    MessageBox.Show(builder.ToString());
} 
```

我希望这可以帮助你。请注意，还有OpenPop 的[在线文档](http://hpop.sourceforge.net/documentation/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T07:34:49.597

我是这样做的：

```
string Body = msgList[0].MessagePart.MessageParts[0].GetBodyAsText();
            foreach( string d in Body.Split('\n')){
                Console.WriteLine(d);                    
            } 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-11T12:38:55.463

这个问题的其他答案不完整且不正确，主要是因为他们从不使用`FindAllTextVersions`至关重要的方法。

这是获取实际正文文本内容的完整方法：

```
private static string GetMessageBodyAsText(Message message)
{
    try
    {
        List<MessagePart> list = message.FindAllTextVersions();

        // First let's try getting the plain text part:
        foreach (MessagePart part in list)
        {
            if (part != null)
            {
                return part.GetBodyAsText();
            }
        }

        // Now let's try getting the HTML part
        MessagePart html = message.FindFirstHtmlVersion();
        if (html != null)
        {
            return html.GetBodyAsText();
        }
        return null;
    }
    catch (Exception exc)
    {
        // Handle your exception here
        return null;
    }
} 
```

# php - Magento：在电子邮件模板中调用属性？

> ID：10601920
> 
> 赞同：2
> 
> 时间：2012-05-15T13:36:00.187
> 
> 标签：php, magento

我正在尝试调用`subtitle`模板文件中调用的自定义属性

> app/design/frontend/base/default/template/email/order/items/order/default.phtml

我努力了

```
Mage::getModel('catalog/product')->load($this->getProduct()->getId())->getdata('subtitle') 
```

但到目前为止还没有运气。有人愿意帮忙吗，我已经尝试了几个小时了。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:00:58.793

您的代码假定`$this->getProduct()`返回一个`Mage_Catalog_Model_Product`对象。

错误`Fatal error: Call to a member function getId() on a non-object`告诉我们，这`$this->getProduct()`实际上不*返回*任何对象（但可能`null`相反）。

模板

```
app/design/frontend/base/default/template/email/order/items/order/default.phtml 
```

你说的是，包含在 中`Mage_Sales_Block_Order_Email_Items_Order_Default`，但是 afaik 这个块默认没有任何`getProduct()`方法。

所以要么你失踪了，没有这样的方法，要么你定义了自己的方法，但它不返回`Mage_Catalog_Model_Product`实例（无论出于何种原因）。

**编辑**：

解决此问题的一种方法是将模板的第一行从

```
<?php $_item = $this->getItem() ?>
<?php $_order = $this->getItem()->getOrder() ?> 
```

至

```
<?php $_item = $this->getItem() ?>
<?php $_product = Mage::getModel('catalog/product')->load($_item->getProductId()) ?>
<?php $_order = $this->getItem()->getOrder() ?> 
```

此更改后，您可以使用

```
$_product->getSubtitle() 
```

获取自定义属性的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:17:48.317

执行`var_dump()`或调试`$_item`模板中的变量。我敢打赌，您会在变量的某处找到某种产品对象`$_item`，并且您很可能能够找到它的 ID。（甚至可能类似于`$productId = $_item->getProduct()->getId()`？）一旦您找到产品 ID，您肯定可以通过此代码找到您的属性

```
// $productId = Whatever product ID was found previously
if ($productId) {
    $subtitle = Mage::getModel('catalog/product')->load($productId)->getSubtitle();
    if ($subtitle) {
        echo 'This is the subtitle ' . $subtitle;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T18:19:25.500

如果您使用的是多**存储 Magento**设置并且每个疮的属性值不同，则可以使用以下内容。

首先，在 email/order/items/order/default.phtml 中加载产品：

```
$_product = Mage::getModel('catalog/product')->setStoreId($_order->getStoreId())->load($_item->getProductId()); 
```

要获取属性的“字幕”值，请使用以下命令：

```
$_product->getSubtitle(); 
```

如果您想获取属性标签：

```
$_product->getResource()->getAttribute('subtitle')->getStoreLabel($_order->getStoreId()); 
```

如果 fe 您的属性是下拉类型，则要获取该值，请使用以下命令：

```
$_product->getResource()->getAttribute('dropdown_attribute')->getFrontend()->getValue($_product); 
```

在 Magento CE 1.6.2.0 上测试。

# file - 如何从公司内网页面访问内部服务器的目录？

> ID：10601929
> 
> 赞同：0
> 
> 时间：2012-05-15T13:36:22.747
> 
> 标签：file, local, directory, intranet

我对网页设计有点陌生，并且正在我公司的内部网站上工作。我被要求构建页面，以更美观的方式显示来自我们内部服务器的内容。不幸的是，我在从站点访问这些目录时遇到了麻烦。理想情况下，我想做的是基于其 UNC 访问相关目录，将内容显示为 php 页面上的链接，并通过链接在本地打开文件（而不是下载）。我知道这样做有一定的限制，但尽可能接近我所描述的会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:59:54.493

您可以使用 php 列出文件夹内容（opendir() + readdir()），然后打印链接此目录中的文件（提供 UNC 路径）。

# linux - iptables 最近的模块 --set 选项

> ID：10601931
> 
> 赞同：2
> 
> 时间：2012-05-15T13:36:26.427
> 
> 标签：linux, firewall, iptables

我阅读了一个防火墙脚本，包括以下几行

```
iptables -A pfc -p udp --dport 5060 -m recent --name badguy --update --seconds 60 -hitcount 600 -j DROP 

iptables -A pfc -p udp --dport 5060 -m recent --name badguy --set 
```

这是默认情况下拒绝防火墙脚本的一部分，pfc 是用户定义的 INPUT 子链。

这里不是有什么问题吗？第二行不会跳到链上。除非第一行匹配，否则数据包的命运是什么？

我认为应该这样做

```
iptables -A pfc -p udp --dport 5060 -m recent --name badguy --set **-j ACCEPT** 
```

不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:45:05.060

正如所写，这条规则：

```
iptables -A pfc -p udp --dport 5060 -m recent --name badguy --set 
```

设置`recent`数据包的条目，然后继续处理`iptables`可能决定明确拒绝或接受数据包的其他规则。

另一方面，您建议的修改...

```
iptables -A pfc -p udp --dport 5060 -m recent --name badguy --set -j ACCEPT 
```

...立即接受数据包，无需进一步处理。这是行为上的巨大差异，是否合适完全取决于您当地的情况。

# android - Eclipse 上的 Android 开发：我还能做些什么来摆脱“堆空间不足”？

> ID：10601932
> 
> 赞同：0
> 
> 时间：2012-05-15T13:36:28.800
> 
> 标签：android, eclipse, heap-memory

[这在某种程度上是该](https://stackoverflow.com/questions/10018387/trying-to-run-android-app-from-eclipse-stuck-between-out-of-heap-space-and-f)线程的延续。我正在开发一个不同的 Android 应用程序并再次遇到“堆外”错误。我的 eclipse.ini 看起来像这样：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-vm
C:/Program Files/Java/jdk1.7.0_01/bin/javaw.exe
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Xms1024m
-Xmx1024m 
```

如果我增加 Xms/x 值，Eclipse 将无法启动。我还能做些什么来让它发挥作用？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:46:55.090

如果您已经将 xmlx 值增加到 1024 并且您仍然遇到“堆空间不足”，那么您将不得不认真考虑应用程序中的内存泄漏。有几种方法可以减少内存占用。

*   就像不在长时间运行的循环中创建复杂对象一样。
*   尽可能重用一个对象，而不是总是实例化一个新对象。
*   保持对大型对象（如集合）的引用或对集合内对象的引用，即使在您使用完之后也是如此。

有诸如[visualvm](http://visualvm.java.net/)和[jprobe 之](http://www.quest.com/jprobe/)类的工具可以解决此类问题。如果你有时间也看看这篇[文章](http://blog.dynatrace.com/2011/12/15/the-top-java-memory-problems-part-2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:18:33.333

首先，你`eclipse.ini`的不正确。`-vm`争论应该是之前的最后一件事`-vmargs`。

其次，如果你试图分配一个 1MB 的堆并且它失败了，可能是因为[这个](https://stackoverflow.com/a/9304270/639520). 您的系统有多少 RAM？您是否尝试过在不运行任何其他应用程序的情况下使用这些设置运行 Eclipse？

# scala - 条目类型不同的scala MultiMap示例

> ID：10601934
> 
> 赞同：1
> 
> 时间：2012-05-15T13:36:38.143
> 
> 标签：scala, scala-collections, multimap

我想为单个长键提供不同类型的条目。

因此，鉴于我的密钥为 1，我希望有以下条目：

1、“狗”
1、3

首先，是否可以同时包含 String 和 Int 类型的条目，如果是这样，我可以看到一个混合了 MultiMap 的 HashMap 示例，其中显示了如何添加条目然后只访问“dog”条目？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:39:20.410

如果您希望地图包含两种类型的条目的混合，您可以使用`Either`. `Either`就像`Option`除了有`Some`vs.`None`你有`Left`vs.之外`Right`。

```
import scala.collection.mutable.HashMap
import scala.collection.mutable.Set
import scala.collection.mutable.MultiMap

val m = new HashMap[Int, Set[Either[Int, String]]] with MultiMap[Int, Either[Int, String]]

m.addBinding(1, Right("dog"))
m.addBinding(1, Left(3))

m(1).collect{ case Right(s) => s }             // Set(dog)
m.mapValues(_.collect{ case Right(s) => s })   // Map(1 -> Set(dog)) 
```

# html - 为什么 HTML 链接在 Outlook 2010 中显示为蓝色？

> ID：10601940
> 
> 赞同：2
> 
> 时间：2012-05-15T13:36:55.710
> 
> 标签：html

我想修复这个显示为蓝色的链接，而它应该是白色的。它发生在 2010 年展望中。

```
<span style="font-family: Arial; font-size: 10px;">
    You are subscribed with email address
    <font style="color: rgb(255,255,255);"><%user.Email%> </font>
    <a href="<%unsubscribe_link_text%>"
        style="color: rgb(174, 215, 51) ! important;">
        <font style="color: rgb(255,255,255);">Click here</font>
    </a> to unsubscribe.
</span> 
```

任何人都可以看到有什么问题并帮助我吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T16:52:21.830

尝试

```
<span style="font-family: Arial; font-size: 10px;">
You are subscribed with email address
<font style="color: rgb(255,255,255);"><%user.Email%> </font>
<a href="<%unsubscribe_link_text%>"
    style="color: #ffffff ! important;">
    <span style="color: #ffffff;">Click here</span>
</a> to unsubscribe.
</span> 
```

注意 a 内的跨度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:41:48.890

我总是在样式表中针对 a 标签设置我的颜色，如下所示，并且在 Outlook 中应该可以正常工作。

```
a:link {
color: #666666;
}

a:visited {
color: #666666;
}

a:active {
color: #666666; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:45:44.753

尝试将其更改 `style="color: rgb(174, 215, 51) ! important;` 为 `style="color: #ffffff";`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:41:09.437

尝试使用十六进制颜色而不是 RGB。

主指南： http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

# c++ - 强制执行函数调用的顺序？

> ID：10601943
> 
> 赞同：6
> 
> 时间：2012-05-15T13:37:08.530
> 
> 标签：c++, design-patterns

假设我有一个抽象基类，并且我想要一个必须由派生类实现的纯虚方法，但我想确保派生方法以特定顺序调用函数我可以做些什么来强制它？

IE

```
base class
virtual void doABC()=0;
virtual void A()=0;
virtual void B()=0;
virtual void C()=0;

// must call ABC in the correct order 
derived class public base
void doABC(); 
```

这只是为了让我更好地理解如何设计我的课程以强制某人正确使用我的课程。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T13:37:40.203

您正在寻找**模板方法模式**：

[http://en.wikipedia.org/wiki/Template_method_pattern](http://en.wikipedia.org/wiki/Template_method_pattern)

这些方面的东西：

```
class BaseAlgorithm
{
protected:
    virtual void firstStep() = 0;
    virtual void secondStep() = 0;
    virtual void finalStep() = 0;
public:
    void runAlgorithm()
    {
        firstStep();
        secondStep();
        finalStep();
    }
};

class ConcreteAlgorithm : BaseAlgorithm
{
    virtual void firstStep() {};
    virtual void secondStep() {};
    virtual void finalStep() {};
}; 
```

您基本上强制扩展类来实现所有中间步骤，但是您保留它们`protected`或`private`- 记录这个 - 并且只调用`runAlgorithm()`，它将较小的部分联系在一起。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T13:53:55.623

实际上有两种特定的方法，具体取决于您使用继承还是参数化。

如果你有继承，它是[`Template Method`](http://www.vincehuston.org/dp/template_method.html)模式：

```
class Base {
public:
    void doit() {
        this->do1();
        this->do2();
    }
private:
    virtual void do1() = 0;
    virtual void do2() = 0;
}; 
```

如果你使用参数化，它就是[`Strategy`](http://www.vincehuston.org/dp/strategy.html)模式：

```
class Strategy {
public:
    virtual void do1() = 0;
    virtual void do2() = 0;
};

void doit(Strategy& s) {
    s.do1();
    s.do2();
} 
```

从网站：

> *策略*与*模板方法*类似，但粒度不同。[Coplien，C++ 报告，96 年 3 月，第 88 页]
> 
> *模板方法*使用继承来改变算法的一部分。*策略*使用委托来改变整个算法。[GoF，p330]
> 
> *策略*修改单个对象的逻辑。*模板方法*修改了整个类的逻辑。[盛大，p383]

我建议您熟悉它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:43:29.097

最简单的答案可能是如果您从 doABC() 中删除 virtual，则它不能由子类派生。以正确的顺序调用 doABC() 中的虚拟方法。

# python - sqlalchemy 中的并发

> ID：10601947
> 
> 赞同：2
> 
> 时间：2012-05-15T13:37:30.103
> 
> 标签：python, concurrency, sqlalchemy

我目前正在开发一个使用 sqlalchemy 连接到数据库的应用程序。这个想法包括让应用程序的多个实例在使用相同数据库的不同计算机上运行。一旦提交，我希望能够在应用程序的所有实例中看到数据库中的更改。我目前正在使用 sqlalchemy 事件接口，但是当我有多个应用程序的并发实例时它不起作用。我在其中一个实例中更改了某些内容，但在其他实例中没有发出信号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:50:27.680

您说的是，您使用的是 SQLAlchemy 的事件接口，它不是 RDBMS 之一，并且 SQLAlchemy 不与连接到该数据库的其他实例通信。

SQLAlchemy 的事件系统在你自己的进程中调用一个函数。您可以让此功能通过网络（或无论它们如何连接）向其他人发送信号。只要关注 SQLAlchemy，它就不会知道连接到您的数据库的其他实例。

因此，您可能希望在数据库运行的机器上启动另一台服务器，并让所有其他服务器监听它，并采取相应的行动。

希望能帮助到你。

# c# - 在运行时添加新页面

> ID：10601949
> 
> 赞同：2
> 
> 时间：2012-05-15T13:37:38.263
> 
> 标签：c#, .net, windows-phone-7, xaml

有没有办法在运行时创建一个新页面？

也许在cs中生成XAML并将它们添加到应用程序中？

泰

新：好的，我会尝试更好地解释它：

我想用多个控件从 json 创建动态应用程序页面。

例子：

```
{
    "pages": [
        {
            "title": "Page 1",
            "controls": [
                {
                    "button": [
                        {
                            "text": "Testbutton",
                            "value": "clear",
                        }
                    ]
                },
                {
                    "textview": [
                        {
                            "value": "enter some text"
                        }
                    ]
                }
            ]
        },
        {
            "title": "Page 2",
            "controls": [
                {..}
            ]
        }
    ]
} 
```

所以我想灵活地生成它们，因为每次加载时 json 都不相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:43:38.640

您可以使用 XamlReader.Load 从 xaml 创建对象树。

您还可以使用其构造函数创建所需的对象，并使用控件的 Child 属性定义树。

# java - 批处理文件中的 Windows 服务无法执行

> ID：10601951
> 
> 赞同：0
> 
> 时间：2012-05-15T13:37:40.937
> 
> 标签：java, windows-services, batch-file, executable-jar, windows-server

我需要将批处理文件作为 Windows 服务执行。

为此，我创建了一个批处理文件。在这个批处理文件中，我只需添加以下代码来运行 jar 文件。

```
java -jar myTest.jar 
```

当我双击批处理文件时..没问题.它工作正常。它执行 jar 文件（一个 java 应用程序）。

但是当我在 Windows 服务器上的 Windows 服务中使用相同的批处理文件时，它不起作用。？它只是闪烁以显示命令窗口并关闭。我在 jar 文件中的代码部分都没有被执行。

另一件事是我已经从另一个 Windows 服务器成功地检查了这个。它在那里工作正常。

为什么这个奇怪的问题..?？谁能帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:45:16.157

该服务的执行环境与您从交互式 Windows 会话运行批处理时不同。在更改为正确（工作）目录的 .bat 文件中创建 shure，即使使用绝对路径（cd \users\my\java\service），也可以指定 java.exe 的完整路径。您提到的另一台服务器可能具有完全不同的环境设置、安装的软件等。

```
C:
cd \users\my\java\service
"\program files\java\jre\bin\java" -jar test.jar 
```

# .net - Visual Studio 中的 FireFox 浏览器控件

> ID：10601953
> 
> 赞同：1
> 
> 时间：2012-05-15T13:37:55.377
> 
> 标签：.net, visual-studio-2010, browser

有没有办法在 Visual Studio 2010 .NET 3.5 或 4 中将 firefox 引擎用于“Web 浏览器控件”而不是 Internet Explorer 引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:42:11.117

我还没有见过 FireFox 控件，但我以前使用过 Chrome 控件，它很管用。

解决了我在使用默认 IE 控件时遇到的大量问题。

[http://awesomiumdotnet.codeplex.com/](http://awesomiumdotnet.codeplex.com/)

如果您特别需要 Firefox，它可能不适合您……但值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:43:48.287

有一个[Mozilla ActiveX 控件](http://www.adamlock.com/mozilla/)，其 API 与 IE 控件相同。

# php - PHP 版本 5.3.10，缺少 finfo.php？

> ID：10601954
> 
> 赞同：2
> 
> 时间：2012-05-15T13:37:56.313
> 
> 标签：php, yii

我正在使用 yii 框架，我正在尝试实现一个 CKEditor。一切都很好，直到我需要制作文件上传/浏览功能，我管理上传但浏览......为此我找到了本指南（它使用扩展 elfinder） [http://www.yiiframework.com/extension /ezzeelfinder/](http://www.yiiframework.com/extension/ezzeelfinder/)

问题是当我点击浏览文件 - > [http://img835.imageshack.us/img835/5905/problems.png](http://img835.imageshack.us/img835/5905/problems.png) 并且页面错误来自 /TutProject/index.php/page/page/fileUploaderConnector ，这里是stackTrace/应用程序日志中的内容

```
include(finfo.php) [<a href='function.include'>function.include</a>]:
failed to open stream: No such file or directory
(C:\wamp\www\yii-1.1.10.r3566\framework\YiiBase.php:418)
Stack trace:
#0 unknown(0): spl_autoload_call()
#1
C:\wamp\www\TutProject\protected\extensions\ezzeelfinder\php\elFinderVolumeDriver.class.php(644):
class_exists()
#2
C:\wamp\www\TutProject\protected\extensions\ezzeelfinder\php\elFinder.class.php(191):
elFinderVolumeLocalFileSystem->mount()
#3
C:\wamp\www\TutProject\protected\extensions\ezzeelfinder\ElFinderConnectorAction.php(54):
elFinder->__construct()
#4 C:\wamp\www\yii-1.1.10.r3566\framework\web\actions\CAction.php(75):
ElFinderConnectorAction->run()
#5 C:\wamp\www\yii-1.1.10.r3566\framework\web\CController.php(309):
ElFinderConnectorAction->runWithParams()
#6 C:\wamp\www\yii-1.1.10.r3566\framework\web\CController.php(287):
PageController->runAction()
#7 C:\wamp\www\yii-1.1.10.r3566\framework\web\CController.php(266):
PageController->runActionWithFilters()
#8 C:\wamp\www\yii-1.1.10.r3566\framework\web\CWebApplication.php(276):
PageController->run()
#9 C:\wamp\www\yii-1.1.10.r3566\framework\web\CWebApplication.php(135):
CWebApplication->runController()
#10 C:\wamp\www\yii-1.1.10.r3566\framework\base\CApplication.php(162):
CWebApplication->processRequest()
#11 C:\wamp\www\TutProject\index.php(13): CWebApplication->run()
REQUEST_URI=/TutProject/index.php/page/page/fileUploaderConnector?elfinder_connector_options/YToxOntzOjU6InJvb3RzIjthOjE6e2k6MDthOjY6e3M6NjoiZHJpdmVyIjtzOjE1OiJMb2NhbEZpbGVTeXN0ZW0iO3M6NDoicGF0aCI7czoyOToiQzpcd2FtcFx3d3dcVHV0UHJvamVjdFx1cGxvYWQiO3M6MzoiVVJMIjtzOjE4OiIvVHV0UHJvamVjdC91cGxvYWQiO3M6NzoidG1iUGF0aCI7czozNzoiQzpcd2FtcFx3d3dcVHV0UHJvamVjdFx1cGxvYWRcLnRodW1icyI7czoxMDoibWltZURldGVjdCI7czo4OiJpbnRlcm5hbCI7czoxMzoiYWNjZXNzQ29udHJvbCI7czo2OiJhY2Nlc3MiO319fQ%3D%3D?cmd=open&target=&init=1&tree=1&_=1337086423129 
```

我尝试在我的框架文件夹中搜索这个 finfo.php，但我没有找到它。我的 php 版本是 5.3.10 （我发现它是 5.3 之前的扩展）而且从我用谷歌搜索的内容来看，似乎另一个人和我有同样的问题，这是他不得不说的

> “好吧，我发现了我的问题。显然 elfinder 试图自动确定 mime 类型的位置。我将其更改为手动引用文件，一切都很好。感谢出色的扩展！”

但我还是 Yii 的新手，所以我不知道该怎么做，任何帮助将不胜感激。如果您需要有关任何内容的更多信息，请发表评论。

编辑：哦，顺便说一句，我的截图中的错误，它说“无法连接到后端”

EDIT-2：这是我使用的小部件。

```
$this->widget("ext.ezzeelfinder.ElFinderWidget", array(
    'selector' => "div#file-uploader",
    'clientOptions' => array(
    //    'lang' => "bg",
        'resizable' => false,
        'wysiwyg' => "ckeditor"
    ),
    'connectorRoute' => "/page/page/fileUploaderConnector",
    'connectorOptions' => array(
        'roots' => array(
            array(
                'driver'  => "LocalFileSystem",
                'path' => 'C:\wamp\www\TutProject\upload',
                'URL' => 'http://localhost/TutProject/upload/',
                'tmbPath' => $filesPath . DIRECTORY_SEPARATOR . ".thumbs",
                'mimeDetect' => "internal",
                'accessControl' => "access"
            )
        )
    )
)); 
```

在这里 -> 'connectorRoute' => "/page/page/fileUploaderConnector"，
第一个 "/page" 是我在 Yii 中使用的模块，第二个 "/page" 是控制器

我注意到一件奇怪的事情，我认为我的问题来自那里，让我解释一下，我将显示两个链接，第一个将由

```
'connectorRoute' => "/page/page/fileUploaderConnector", 
```

第二个将由

```
'connectorRoute' => "/page/fileUploaderConnector", 
```

现在，我不确定它是否是一个错误，但是，看看下面的链接

```
http://localhost/TutProject/index.php/page/page/fileUploaderConnector/elfinder_connector_options/YToxOntzOjU6InJvb3RzIjthOjE6e2k6MDthOjY6e3M6NjoiZHJpdmVyIjtzOjE1OiJMb2NhbEZpbGVTeXN0ZW0iO3M6NDoicGF0aCI7czoyOToiQzpcd2FtcFx3d3dcVHV0UHJvamVjdFx1cGxvYWQiO3M6MzoiVVJMIjtzOjM1OiJodHRwOi8vbG9jYWxob3N0L1R1dFByb2plY3QvdXBsb2FkLyI7czo3OiJ0bWJQYXRoIjtzOjM3OiJDOlx3YW1wXHd3d1xUdXRQcm9qZWN0XHVwbG9hZFwudGh1bWJzIjtzOjEwOiJtaW1lRGV0ZWN0IjtzOjg6ImludGVybmFsIjtzOjEzOiJhY2Nlc3NDb250cm9sIjtzOjY6ImFjY2VzcyI7fX19?cmd=open&target=&init=1&tree=1&_=1337106505830
     http://localhost/TutProject/index.php/page/fileUploaderConnector?elfinder_connector_options=YToxOntzOjU6InJvb3RzIjthOjE6e2k6MDthOjY6e3M6NjoiZHJpdmVyIjtzOjE1OiJMb2NhbEZpbGVTeXN0ZW0iO3M6NDoicGF0aCI7czoyOToiQzpcd2FtcFx3d3dcVHV0UHJvamVjdFx1cGxvYWQiO3M6MzoiVVJMIjtzOjM1OiJodHRwOi8vbG9jYWxob3N0L1R1dFByb2plY3QvdXBsb2FkLyI7czo3OiJ0bWJQYXRoIjtzOjM3OiJDOlx3YW1wXHd3d1xUdXRQcm9qZWN0XHVwbG9hZFwudGh1bWJzIjtzOjEwOiJtaW1lRGV0ZWN0IjtzOjg6ImludGVybmFsIjtzOjEzOiJhY2Nlc3NDb250cm9sIjtzOjY6ImFjY2VzcyI7fX19&cmd=open&target=&init=1&tree=1&_=1337106612468 
```

在这些链接中要注意的是，在第一个链接（即使用 /page/page/... 的那个）中，fileUploaderConnector 之后的下一个符号是 '/'，然后在 elfinder_connector_options 之后，又有一个 '/'，但是在 fileUploaderConnector 之后的第二个链接（来自 /page/... 的那个）中，下一个符号是“？” 在 elfinder_connector_options 之后有一个 '='

现在我认为，当路径包含 MODULE 时，链接会变得混乱，所以我试图修复它，实际上我设法获得（至少我认为如此）一个有效的链接，

这是我认为有效并生成输出的链接

```
http://localhost/TutProject/index.php/page/page/fileUploaderConnector?elfinder_connector_options=YToxOntzOjU6InJvb3RzIjthOjE6e2k6MDthOjY6e3M6NjoiZHJpdmVyIjtzOjE1OiJMb2NhbEZpbGVTeXN0ZW0iO3M6NDoicGF0aCI7czoyOToiQzpcd2FtcFx3d3dcVHV0UHJvamVjdFx1cGxvYWQiO3M6MzoiVVJMIjtzOjM1OiJodHRwOi8vbG9jYWxob3N0L1R1dFByb2plY3QvdXBsb2FkLyI7czo3OiJ0bWJQYXRoIjtzOjM3OiJDOlx3YW1wXHd3d1xUdXRQcm9qZWN0XHVwbG9hZFwudGh1bWJzIjtzOjEwOiJtaW1lRGV0ZWN0IjtzOjg6ImludGVybmFsIjtzOjEzOiJhY2Nlc3NDb250cm9sIjtzOjY6ImFjY2VzcyI7fX19&cmd=open&target=&init=1&tree=1&_=1337106612468 
```

它与第二个链接相同，我只是在链接中添加了另一个“/page”，所以这是输出

{"cwd":{"mime":"directory","ts":1337085846,"read":1,"write":1,"size":0,"hash":"l1_XA","volumeid": "l1_","name":"upload","date":"今天 12:44","locked":1,"dirs":1},"options":{"path":"upload"," url":"http://localhost/TutProject/upload/","tmbUrl":"http://localhost/TutProject/upload/.thumbs/","disabled":[],"separator":"\" ,"copyOverwrite":1,"archivers":{"create":[],"extract":[]}},"files":[{"mime":"directory","ts":1337085846,"read ":1,"write":1,"size":0,"hash":"l1_XA","volumeid":"l1_","name":"upload","date":"今天 12:44","locked":1,"dirs":1},{"mime":"目录","ts":1337085846,"read":1,"write":1,"size":0,"hash":"l1_LnRodW1icw","name":".thumbs","phash":"l1_XA" ,"date":"今天 12:44"},{"mime":"image/png","ts":1319019671,"read":1,"write":1,"size":142959,"hash ":"l1_MWJpbC5wbmc","name":"1bil.png","phash":"l1_XA","date":"19 Oct 2011 10:21","tmb":1}],"api":" 2.0","uplMaxSize":"2M"}"l1_","name":"upload","date":"今天 12:44","locked":1,"dirs":1},{"mime":"directory","ts":1337085846 ,"read":1,"write":1,"size":0,"hash":"l1_LnRodW1icw","name":".thumbs","phash":"l1_XA","date":"今天12:44"},{"mime":"image/png","ts":1319019671,"read":1,"write":1,"size":142959,"hash":"l1_MWJpbC5wbmc","名称":"1bil.png","phash":"l1_XA","date":"2011 年 10 月 19 日 10:21","tmb":1}],"api":"2.0","uplMaxSize": “2M”}"l1_","name":"upload","date":"今天 12:44","locked":1,"dirs":1},{"mime":"directory","ts":1337085846 ,"read":1,"write":1,"size":0,"hash":"l1_LnRodW1icw","name":".thumbs","phash":"l1_XA","date":"今天12:44"},{"mime":"image/png","ts":1319019671,"read":1,"write":1,"size":142959,"hash":"l1_MWJpbC5wbmc","名称":"1bil.png","phash":"l1_XA","date":"2011 年 10 月 19 日 10:21","tmb":1}],"api":"2.0","uplMaxSize": “2M”}date":"今天 12:44","locked":1,"dirs":1},{"mime":"directory","ts":1337085846,"read":1,"write":1, "size":0,"hash":"l1_LnRodW1icw","name":".thumbs","phash":"l1_XA","date":"今天 12:44"},{"mime":"image /png","ts":1319019671,"read":1,"write":1,"size":142959,"hash":"l1_MWJpbC5wbmc","name":"1bil.png","phash": "l1_XA","date":"2011 年 10 月 19 日 10:21","tmb":1}],"api":"2.0","uplMaxSize":"2M"}date":"今天 12:44","locked":1,"dirs":1},{"mime":"directory","ts":1337085846,"read":1,"write":1, "size":0,"hash":"l1_LnRodW1icw","name":".thumbs","phash":"l1_XA","date":"今天 12:44"},{"mime":"image /png","ts":1319019671,"read":1,"write":1,"size":142959,"hash":"l1_MWJpbC5wbmc","name":"1bil.png","phash": "l1_XA","date":"2011 年 10 月 19 日 10:21","tmb":1}],"api":"2.0","uplMaxSize":"2M"}ts":1337085846,"read":1,"write":1,"size":0,"hash":"l1_LnRodW1icw","name":".thumbs","phash":"l1_XA","date ":"今天 12:44"},{"mime":"image/png","ts":1319019671,"read":1,"write":1,"size":142959,"hash":" l1_MWJpbC5wbmc","name":"1bil.png","phash":"l1_XA","date":"2011 年 10 月 19 日 10:21","tmb":1}],"api":"2.0", "uplMaxSize":"2M"}ts":1337085846,"read":1,"write":1,"size":0,"hash":"l1_LnRodW1icw","name":".thumbs","phash":"l1_XA","date ":"今天 12:44"},{"mime":"image/png","ts":1319019671,"read":1,"write":1,"size":142959,"hash":" l1_MWJpbC5wbmc","name":"1bil.png","phash":"l1_XA","date":"2011 年 10 月 19 日 10:21","tmb":1}],"api":"2.0", "uplMaxSize":"2M"}{"mime":"image/png","ts":1319019671,"read":1,"write":1,"size":142959,"hash":"l1_MWJpbC5wbmc","name":"1bil. png","phash":"l1_XA","date":"19 Oct 2011 10:21","tmb":1}],"api":"2.0","uplMaxSize":"2M"}{"mime":"image/png","ts":1319019671,"read":1,"write":1,"size":142959,"hash":"l1_MWJpbC5wbmc","name":"1bil. png","phash":"l1_XA","date":"19 Oct 2011 10:21","tmb":1}],"api":"2.0","uplMaxSize":"2M"}

我没有将它作为代码示例发布，因为它很长。

所以在这里我想出了一个次要问题，因为我认为我的链接以某种方式被修改了，知道如何让它停止吗？它为“/”更改了“？，=”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:40:21.063

Just add `'mimeDetect' => "internal",` to the widget initialization options

# c - 创建一个初始化结构并返回指针的 C 函数

> ID：10601960
> 
> 赞同：2
> 
> 时间：2012-05-15T13:38:03.893
> 
> 标签：c, arrays, pointers

我正在学习 C，我正在尝试执行以下操作：

*   `table`从函数创建结构
*   回到`pointer`新创建的`table`

表的typedef：`typedef char table [8][8];`

所以，我创建了这个函数：

```
table* create_table() {
  table o;
  return &o;
} 
```

但是我从编译器那里得到一个错误，说我正在返回一个局部变量的地址。

如何`table`从函数创建一个然后返回指针。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T13:40:18.357

您不能返回局部变量的地址，因为地址在函数 ( `create_table`) 返回时无效，相反，您应该在堆上创建它：

```
table* create_table() 
{
    table * o;
    o = malloc(sizeof(table));
    // Edit - added initialization if allocation succeeded.
    if (o != NULL)
    {
        memset(o, 0, sizeof(table));
    }
    return o;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:41:41.043

您不能返回局部变量的地址。它在函数退出时被释放。您必须使用 malloc 分配它并返回该指针。例如：

```
table* ptr = malloc(sizeof(table));
memset(ptr, 0, sizeof(table));
return table; 
```

# ruby-on-rails - 局部渲染在本地，但在生产中找不到

> ID：10601963
> 
> 赞同：0
> 
> 时间：2012-05-15T13:38:08.110
> 
> 标签：ruby-on-rails, partial-views

使用 capistrano 部署到我的 VPS 时，我的 production.log 中出现以下错误：

```
ActionView::Template::Error (Missing partial application/nav_bar with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :jbuilder, :mustache]}. Searched in:
  * "/home/deployer/apps/feed_engine/releases/20120515125611/app/views"
  * "/home/deployer/apps/feed_engine/shared/bundle/ruby/1.9.1/gems/kaminari-0.13.0/app/views"
  * "/home/deployer/apps/feed_engine/shared/bundle/ruby/1.9.1/gems/devise-2.0.4/app/views"
): 
```

如果我`ls app/views/application`那么我`_nav_bar.html.slim`会按预期看到这一点。为什么这部分的渲染会在本地工作而不是在生产中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:45:41.253

你的 gemfile 中哪里有 slim-rails gem？

根据您的错误消息，没有适用于苗条模板文件的处理程序。

我猜您的资产组或 gemfile 中的开发组中都有纤细的导轨。只需将其从这些组中移出到 gemfile 的主要部分并重新捆绑您的应用程序即可。这将使它在生产环境中正确安装。

# ios - 在 UITablView 单元格的选定状态上更改图像

> ID：10601966
> 
> 赞同：2
> 
> 时间：2012-05-15T13:38:25.240
> 
> 标签：ios, ios5

我创建了一个自定义单元格并添加了一个标签和图像，我的表中有 4 行，每行都有不同的图像，每行打开一个不同的视图控制器，所以，现在我需要的是单击特定行想要改变图像来做到这一点我试过这个，但它不起作用，所以请帮帮我。

```
if(indexPath.row == 0)
{

     if(cell.selected == true)
     {
           UIImage *cellImage = [UIImage imageNamed:@"abc.png"];        
           cell.icon.image    = cellImage;
      }
      else
      {
          UIImage *cellImage = [UIImage imageNamed:@"abc.png"];        
           cell.icon.image    = cellImage;
      }
} 
```

问候兰吉特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:42:15.160

在创建单元格或方法时尝试执行以下操作`tableView:willDisplayCell:forRowAtIndexPath:`：

```
cell.imageView.image = [UIImage imageNamed:@"abc.png"];
cell.imageView.highlightedImage = [UIImage imageNamed:@"abc.png"]; 
```

如果是，它也适用于您的`icon`财产`UIImageView`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:51:53.763

首先在您的自定义单元格中为 uiImageview 创建一个属性并合成它..

并且 UITabeView 的 didSelectRowAtIndexPath 委托方法访问该属性并更改图像，例如：-

```
yourCell.yourImageView.image=[UIImage imageNamed:@"yourImage"] 
```

对于示例，我给出了我的代码：-

```
#import <UIKit/UIKit.h>

@interface CustomizedCellProductDetails : UITableViewCell {

    UILabel *sNO;
    UILabel *abcWine;
    UILabel *redWine;
    UILabel *two;
    UILabel *hundred;
    UILabel *fourTwo;
    UILabel *twoOne;
    UIImageView *imgView;

    UILabel *itemNo;
    UILabel *itemName;
    UILabel *itemDesc;
    UILabel *department;
    UILabel *qtyAvailable;

    UIButton *check;

}

@property (nonatomic , retain) UILabel *sNO;
@property (nonatomic , retain) UILabel *abcWine;
@property (nonatomic , retain) UILabel *redWine;
@property (nonatomic , retain) UILabel *two;
@property (nonatomic , retain) UILabel *hundred;
@property (nonatomic , retain) UILabel *fourTwo;
@property (nonatomic , retain) UILabel *twoOne;
@property (nonatomic , retain) UIImageView *imgView;

@property (nonatomic , retain) UILabel *itemNo;
@property (nonatomic , retain) UILabel *itemName;
@property (nonatomic , retain) UILabel *itemDesc;
@property (nonatomic , retain) UILabel *department;
@property (nonatomic , retain) UILabel *qtyAvailable;
@property (nonatomic , retain) UIButton *check;

-(void) clicked;
@end 
```

.m 文件合成它：-

```
#import "CustomizedCellProductDetails.h"

@implementation CustomizedCellProductDetails
@synthesize sNO,abcWine,redWine,two,hundred,fourTwo,twoOne,imgView,itemNo,itemName,itemDesc,department,qtyAvailable,check; 
```

在 tableview 委托中：-

```
#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Navigation logic may go here. Create and push another view controller.
    /*
    <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
    // ...
    // Pass the selected object to the new view controller.
    [self.navigationController pushViewController:detailViewController animated:YES];
    [detailViewController release];
    */
CustomizedCellProductDetails * cell = (CustomizedCellProductDetails )[tableView cellForRowAtIndexPath:indexPath]; 
[cell.imgView setImage:[UIImage imageNamed:@"wine.png"]];

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-17T10:58:12.407

创建单元格时尝试执行以下操作...

在实施块...

```
@implementation ABC
{
    NSMutableArray  *imageArray;
    NSMutableArray  *imageSelectedArray;
} 
```

在以下方法中执行此操作

```
(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath

{
    [cell.imageView setImage:[UIImage imageNamed:[imageArray objectAtIndex:indexPath.row]]];
    [cell.imageView setHighlightedImage:[UIImage imageNamed:[imageSelectedArray objectAtIndex:indexPath.row]]];
} 
```

# ruby-on-rails-3 - Rails ActiveResource - 是否可以只绑定模型而不绑定控制器？

> ID：10601969
> 
> 赞同：1
> 
> 时间：2012-05-15T13:38:34.710
> 
> 标签：ruby-on-rails-3, rest, activeresource, restful-architecture

大约一年前，我构建了一个 Rails 应用程序。几个月后，让它成为多平台的可能性出现了，所以我不得不构建一个 RESTful 服务来重用功能。

我想要这个 Rails 3 应用程序的一件事是尽可能少地改变它，所以，我找到了 ActiveResource 来绑定模型，但后来我想我还需要为它创建一个控制器，我只是想继续使用属于我的应用程序的那个，因为我认为将控制器的逻辑移动到服务会太耗时。

有没有办法做到这一点？

# html - 更新模型时，backbone.js 中的异步视图调用

> ID：10601970
> 
> 赞同：0
> 
> 时间：2012-05-15T13:38:41.827
> 
> 标签：html, backbone.js, underscore.js

我正在尝试制作一个用于练习backbone.js 的演示应用程序。

在我的应用架构中，我首先设计了模型，并在其中编写了用于解析 JSON 文件并将这些记录存储在 localStorage 中的代码，然后使用 localStorage`hotelsdata`的前 10 条记录填充模型的属性。
然后每当我调用时，`backbone.view.extend()`我都会从模型对象中获取数据。

现在，我想做的是每当我的模型更新时，我的视图也必须根据模型中的新值进行更新。我已经试过了

```
model.on('change',function()) 
```

触发，但是当我在我的页面正在更新`view.render()`的事件上调用该方法时`change`，但是在页面上添加记录期间，我的滚动不起作用。

那么，任何人都可以提出一些我可以异步调用该`view.render()`方法的方法，以便在按下`view.render()`.

简而言之，当我的视图被更新时，页面的滚动必须起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:30:02.103

我想你有一个问题，我们怎么称呼它？，*残酷的渲染*:)..

我应该看到你的`render()`方法来确认它，但我认为在你的渲染中你正在**从 DOM 中删除页面的很大一部分，**然后再次重新创建它。这可能会导致您的滚动混乱。并且没有任何*异步*行为可以帮助您。

您应该一个一个地重新创建 View 的子元素，以获得甜美的滚动感觉。

*`render()`（如果我完全困惑，请告诉我们你的方法）*

# couchdb - CouchDB 每用户数据库方法对于拥有大量共享数据的用户是否可行？

> ID：10601972
> 
> 赞同：12
> 
> 时间：2012-05-15T13:38:46.927
> 
> 标签：couchdb, user-permissions, couchapp

我想实现一个 webapp - 一个集成来自各种来源的数据并将它们显示给用户的提要。用户应该只能看到他有权读取的提要项目（例如，因为它们属于他所属的项目）。然而，一个提要项目可能（并且将会）被许多用户看到。

我真的很想使用 CouchDB（主要是因为很酷的 _changes 提要和 map/reduce 视图）。我正在考虑将应用程序实现为纯 couchapp，但我在权限模型方面遇到了问题。AFAIK，CouchDB 中没有每个文档的权限，这通常使用每个用户的数据库和复制来实现。

但是，当不同用户看到的内容之间有很多重叠时，这会带来很多开销……东西会被复制到所有地方，并在许多数据库中复制。我喜欢这种方法的优雅，但巨大的开销感觉就像是一个交易破坏者......（假设我有 50 个用户，他们都看到相同的数据......）。

请问有什么办法吗？替代解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T11:15:03.200

[您可以按照基于每个数据库](https://stackoverflow.com/questions/4055450/couchdb-authorization-on-a-per-database-basis)的 CouchDB 授权中所述强制执行读取权限。

[对于写入权限，您可以使用CouchDB The Definitive Guide - Security](http://guide.couchdb.org/draft/security.html#validation)中描述的验证函数。

您可以为每个项目创建一个数据库并在那里强制执行权限，然后所有数据在用户之间有效共享。如果用户自己共享提要并且还需要权限，您可以将用户设置为“项目”，因此相同的逻辑适用于任何地方。

使用这种设计，您可以为每个项目授权一个用户或一组用户（角色）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T23:17:55.713

除了（正如[victorsavu3](https://stackoverflow.com/users/1557475/victorsavu3)已经建议的那样）在您的应用程序和沙发之间的代理中处理您的读取身份验证之外，我只能想到其他两种选择。

首先是不在乎，磁盘很便宜，拥有多个数据副本可能看起来像很多不必要的重复，但它极大地简化了您的架构，并且您可以获得一些自动好处，例如轻松扩展以处理负载（只需移动一些将用户的数据库转移到其他服务器）。

其次是将共享数据拆分到不同的数据库中。这有时会限制您可以在视图中执行的操作（例如，没有*"Linked Documents"*），但在许多情况下这并不是什么大问题。

# apache - 显示当前服务器负载是否存在安全问题？

> ID：10601987
> 
> 赞同：3
> 
> 时间：2012-05-15T13:39:42.573
> 
> 标签：apache, security, ddos

以任何方式公开显示当前服务器统计信息对黑客有用吗，例如平均加载时间和内存使用情况？

我可以预见的唯一问题是，尝试对服务器进行 DDoS 攻击的人会有明显的成功迹象，或者能够检查模式以选择最佳攻击时间。如果我对主机的反 DDoS 设置有信心，这会是个大问题吗？还有其他我没有看到的问题吗（有时我很容易错过敞开的安全漏洞......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:48:20.753

在最忙的时候进行 MITM 攻击也很有用。

因此，攻击者可以在可能的检测之前获取最多的目标。

我能想到的另一件事是日志文件“混淆”。攻击者的请求在其他记录的内容中丢失。

也许是一个长镜头，但它也可以用来查看您的访问者来自哪里（基于他们访问网站的时间），这可以用来以其他方式定位您的访问者。

此外，为了扩大攻击者对站点进行 DOS 攻击的可能性，他们可以计算一天中不同时间的平均响应时间（当它不会自动发生时）。因为他们可以将负载放在服务器上，并查看负载何时减少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:32:30.770

是的，它很有用。

这将帮助他知道何时可以下载大量数据，例如备份，而不会被流量统计检测到；）

他还将知道何时可以攻击、进行渗透测试、暴力破解或其他任何操作，从而更有可能将他的踪迹隐藏在日志中。

此外，如果他获得访问权限，他将知道什么时候可以从用户那里收集更多的信用卡、密码，他是否不缺少数据库或者是 Xss 攻击等。

Ddos 是另一点，您已经提到了它。内存和平均负载会给他攻击的成功状态。

# android - 从数据库 SQLite 中选择时光标出错

> ID：10601990
> 
> 赞同：0
> 
> 时间：2012-05-15T13:39:55.483
> 
> 标签：android, sqlite, cursor

当我试图从我的数据库中获取信息到一个表中时，我收到了这个错误：

```
05-15 14:15:55.250: E/AndroidRuntime(28050): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.Sofia.MemoryGame/com.Sofia.MemoryGame.SQLView}: android.database.sqlite.SQLiteException: no such column: KEY_ROWID: , while compiling: SELECT KEY_ROWID, KEY_Name, KEY_Score FROM ScoreList 
```

这是我的代码：

```
 public String getData() {

    Cursor c = myDataBase.query(DATABASE_TABEL, new String[] {KEY_ROWID, KEY_Name, KEY_Score}, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_Name);
    int iScore = c.getColumnIndex(KEY_Score);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iScore) + "\n";
    }
    return result;
} 
```

我在光标上遇到错误。谁能看到我做错了什么？

这里也是我创建表格的代码：

```
public static final String KEY_ROWID = "_id";
public static final String KEY_Name = "player_names";
public static final String KEY_Score = "player_score";

private static final String DATABASE_NAME = "HighScore";
private static final String DATABASE_TABEL = "ScoreList";
private static final int DATABASE_VERSION = 1;

private DbHelper myHelper;
private final Context myContext;
private SQLiteDatabase myDataBase;

private static class DbHelper extends SQLiteOpenHelper {

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        //Skapar tabellen
        db.execSQL("CREATE TABLE " + DATABASE_TABEL + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_Name + "  TEXT NOT NULL, " +
                KEY_Score + " TEXT NOT NULL); "                 
        );
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:44:40.737

好吧，它抱怨您的表*ScoreList中没有“KEY_ROWID”列*

1.  向我们展示您为变量 *KEY_ROWID* 定义的值
2.  向我们展示您如何创建表*ScoreList*

仔细检查您为 KEY_ROWID const 设置的值（它是一个 const 变量，对吗？）与您在创建表时使用的列名匹配。

# android - 将音频文件转换为浮点数组

> ID：10601994
> 
> 赞同：1
> 
> 时间：2012-05-15T13:40:14.673
> 
> 标签：android, audio-recording

我正在制作基于语音调制的应用程序。

我成功地使用媒体录音机录制和播放音频文件：

**现在我想将我的音频文件（.3gp）转换为浮点数组。我已经尝试了很多，但我仍然没有得到任何合适的解决方案：**

有人可以告诉我如何实现这一目标

我的录音代码是

```
 mr.setAudioSource(MediaRecorder.AudioSource.MIC);
           mr.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
           mr.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
           if (audiofile == null) {
                  File sampleDir = Environment.getExternalStorageDirectory();

                  try { 

                      audiofile = File.createTempFile("Record", ".3gp", sampleDir);

                  } 
                  catch (IOException e)
                  {
                      Log.e("abc","sdcard access error");
                      return;
                  }
          }

           mr.prepare();
            mr.start(); 
```

# python - 如何使用 Poppler 以真实比例显示 PDF？

> ID：10601995
> 
> 赞同：4
> 
> 时间：2012-05-15T13:40:17.583
> 
> 标签：python, pdf, qt4, resolution, poppler

我对如何以真实比例显示 PDF 文档感到困惑，即比例 = 100%。

*注意：我正在使用[python-poppler-qt4](http://code.google.com/p/python-poppler-qt4/)。*

Poppler-qt4 提供[了一种方法来获取 PDF 的真实大小（以](http://people.freedesktop.org/~aacid/docs/qt4/classPoppler_1_1Page.html#a466525e6988b199176d3d68dd0099bf1)磅为单位） ：

```
document = Poppler.Document.load('mypdf.pdf')
page = document.page(0)
size = page.pageSize() # returns a QSize object 
```

然后[要将页面呈现为 QImage](http://people.freedesktop.org/~aacid/docs/qt4/classPoppler_1_1Page.html#a43bb866fa1f848156799eb8d9e38d0aa)，应提供图形设备的分辨率，以每英寸点数 (DPI) 为单位：

```
image = page.renderToImage(72, 72) 
```

现在，由于文档的自然尺寸以点为单位（即每英寸 72）提供，并且图像渲染器需要每英寸点数，我可以假设文档的自然尺寸是当其分辨率为 72 DPI 时？还是点和点是两种不同的度量？如果我错了，那么解决这个问题的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:03:27.827

PDF 文件中的点是物理单位，您可以用尺子测量它们。图像中的点（像素）是虚拟单位，它们之间的联系是通过分辨率因子完成的。当您将内容从矢量空间移动到光栅空间时，您决定点和像素之间的关系（用于转换的分辨率），由您的应用程序决定 100% 的含义。

大多数应用程序使用屏幕的 DPI 作为 100% 比例的参考。在 Windows 上，这通常意味着 96DPI，即 PDF 文件的一英寸在屏幕上的 96 像素上表示。Adobe Reader 允许您设置自己的分辨率以用于 100% 比例，默认情况下为 110DPI。