# StackOverflow 问答 12399000-12399999

# javascript - 可以在 Manifest v2 下使用 HTML5 地理定位 API 将纬度/经度转换为国家/地区吗？

> ID：12399000
> 
> 赞同：0
> 
> 时间：2012-09-13T03:24:36.710
> 
> 标签：javascript, json, google-chrome-extension, geolocation, content-security-policy

我有一个在 Manifest v2 下运行的 Google Chrome 扩展程序。以前，我能够与[http://www.geoplugin.net/javascript.gp](http://www.geoplugin.net/javascript.gp)交谈并获得用户国家代码（例如美国、英国）。但是，Manifest v2 施加了一些限制，不允许与非 https 的、列入白名单的网站交谈。这意味着我不能再去服务器获取我的信息了。

我想继续拥有这个功能。我相信我最好的选择是利用 HTML5 地理位置将坐标转换为国家代码。我还没有看到这个的任何实现这有可能在合理范围内实现吗？我在网上找到的所有解决方案都建议与服务器通信，但我没有遇到过 https 解决方案。

我还尝试与“https://maps.googleapis.com/maps/api/geocode/”通信，但是，即使将它添加到 content_security_policy，我也无法查询 JSON。

只是好奇是否有人有我没有看到的解决方案/已经解决了这个问题

我在 jQuery 中使用了 RobW 的答案：

```
$.get('http://www.geoplugin.net/json.gp', function(result){
    var geoplugin = JSON.parse(result.replace(/^[^\{]+/, '').replace(/\);?$/, ''));
    console.log(geoplugin.geoplugin_countryCode);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:14:29.157

在 Chrome 扩展程序中，当 URL 在清单文件中列入白名单时，您可以执行跨域请求`"permissions"`。

[http://www.geoplugin.net/json.gp](http://www.geoplugin.net/json.gp)的输出（注意：`json`而不是`javascript`）：

```
geoPlugin({
  "geoplugin_request":"x.x.x.x",
  "geoplugin_status":200,
  "geoplugin_city":"...",
  ...
}) 
```

这个输出格式不是 JSON，而是 JSONP。函数调用不相关。所以在解析之前去掉填充（`geoPlugin(`和）：`)`

```
var xhr = new XMLHttpRequest();
xhr.onload = function() {
    var json = xhr.responseText.replace(/^[^\{]+/, '').replace(/\);?$/, '');
    json = JSON.parse(json);
    // Example, alert latitude and longitude
    alert(json.geoplugin_latitude + ', ' + json.geoplugin_longitude);
};
xhr.open('GET', 'http://www.geoplugin.net/json.gp');
xhr.send(); 
```

[清单](http://developer.chrome.com/extensions/manifest.html)文件：

```
 ...
  "permissions": ["http://www.geoplugin.net/json.gp"],
  ... 
```

# git - 如何配置 git bash 命令行补全？

> ID：12399002
> 
> 赞同：194
> 
> 时间：2012-09-13T03:25:27.177
> 
> 标签：git, bash

例如，在一台新的 ubuntu 机器上，我刚刚运行`sudo apt-get git`，输入 eg 时没有完成`git check[tab]`。

[我在http://git-scm.com/docs](http://git-scm.com/docs)上没有找到任何东西，但是 IIRC 完成现在包含在 git 包中，我只需要在我的 bashrc 中输入正确的条目。

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2013-09-19T15:16:52.250

# 在 Linux 上

在大多数发行版上，安装 git 时都会将 git 补全脚本安装到`/etc/bash_completion.d/`（或`/usr/share/bash-completion/completions/git`）中，无需去 github。您只需要使用它 - 将此行添加到您的`.bashrc`：

```
source /etc/bash_completion.d/git
# or
source /usr/share/bash-completion/completions/git 
```

在某些版本的 Ubuntu 中，默认情况下 git 自动完成功能可能会被破坏，通过运行此命令重新安装应该可以修复它：

```
sudo apt-get install git-core bash-completion 
```

# 在 Mac 上

您可以使用 Homebrew 或 MacPorts 安装 git 补全。

### 家酿

如果`$BASH_VERSION`> 4：（`brew install bash-completion@2`更新版本）请特别注意您拥有的 bash 版本，因为 MacOS 默认随附 3.2.57(1)-release。

添加到`.bash_profile`：

```
 [[ -r "/usr/local/etc/profile.d/bash_completion.sh" ]] && . "/usr/local/etc/profile.d/bash_completion.sh" 
```

对于旧版本的 bash：`brew install bash-completion`

添加到`.bash_profile`：

```
[ -f /usr/local/etc/bash_completion ] && . /usr/local/etc/bash_completion 
```

### MacPorts

`sudo port install git +bash_completion`

然后将此添加到您的`.bash_profile`：

```
if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
fi 
```

本指南中的更多信息：[安装 Bash git 完成](https://github.com/bobthecow/git-flow-completion/wiki/Install-Bash-git-completion)

请注意，在所有情况下，您都需要创建一个新的 shell（打开一个新的终端选项卡/窗口）才能使更改生效。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2013-11-09T13:13:43.490

我有同样的问题，请按照以下步骤操作：

```
curl https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash -o ~/.git-completion.bash 
```

然后将以下行添加到您的`.bash_profile`（通常在您的主文件夹下）

```
if [ -f ~/.git-completion.bash ]; then
  . ~/.git-completion.bash
fi 
```

来源：[http ://code-worrier.com/blog/autocomplete-git/](http://code-worrier.com/blog/autocomplete-git/)

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2018-06-19T01:26:35.440

您看到的大多数说明都会告诉您下载

[https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash](https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash)

并在您的 bash 启动脚本中获取它，例如`.bashrc`.

但这有一个问题，因为它引用的`master`是最新版本的分支`git-completion.bash`。问题是有时它会因为与您安装的 git 版本不兼容而中断。

事实上，现在这将被打破，因为该`master`分支的`git-completion.bash`新功能需要 git v2.18，而包管理器和安装程序还没有更新到该版本。你会得到一个错误`unknown option: --list-cmds=list-mainporcelain,others,nohelpers,alias,list-complete,config`

**所以最安全的解决方案是引用与你安装的 git 匹配的版本/标签。例如：**

[https://raw.githubusercontent.com/git/git/v2.17.1/contrib/completion/git-completion.bash](https://raw.githubusercontent.com/git/git/v2.17.1/contrib/completion/git-completion.bash)

请注意，它`v2.17.`在 URL 中有一个而不是`master`. 然后，当然，确保在 bash 启动脚本中获取它。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-05-11T08:57:34.517

# Ubuntu 14.10

### 安装`git-core`和`bash-completion`

```
sudo apt-get install -y git-core bash-completion 
```

*   对于当前会话使用

    ```
    source /usr/share/bash-completion/completions/git 
    ```

*   让它在所有会话中始终打开

    ```
    echo "source /usr/share/bash-completion/completions/git" >> ~/.bashrc 
    ```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-09-13T03:30:02.480

见[https://github.com/git/git/blob/master/contrib/completion/git-completion.bash](https://github.com/git/git/blob/master/contrib/completion/git-completion.bash)

您只需要获取完成脚本

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2019-06-25T14:35:58.323

只需在您的`~/.bashrc`:

```
source /usr/share/bash-completion/completions/git 
```

其他答案告诉您 install `bash-completion`，您不需要这样做，但如果您这样做，则无需直接获取完成。你做一个或另一个，而不是两者兼而有之。

更通用的解决方案是按照 bash-completion 项目的建议查询系统位置：

```
source "$(pkg-config --variable=completionsdir bash-completion)"/git 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-07-05T17:09:14.990

在我的 ubuntu 上，这里安装了一个文件：

```
source /etc/bash_completion.d/git-prompt 
```

您可以按照链接进入`/usr/lib/git-core`文件夹。您可以在那里找到说明，如何设置 PS1 或使用`__git_ps1`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-08-02T06:51:14.253

可能对某人有帮助：--

从以下链接下载 .git-completion.bash 后，

```
curl https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash -o ~/.git-completion.bash 
```

并尝试使用 __git_ps1 函数，我收到错误 -

```
 -bash: __git_ps1: command not found 
```

显然我们需要从 master 单独下载脚本才能使这个命令工作，因为 __git_ps1 是在 git-prompt.sh 中定义的。与下载 .git-completion.bash 类似，获取 git-prompt.sh：

```
curl -L https://raw.github.com/git/git/master/contrib/completion/git-prompt.sh > ~/.bash_git 
```

然后在您的 .bash_profile 中添加以下内容

```
source ~/.bash_git
if [ -f ~/.git-completion.bash ]; then
  . ~/.git-completion.bash
export PS1='\W$(__git_ps1 "[%s]")>'
fi 
```

source ~/.bash.git 将执行下载的文件并

`export PS1='\W$(__git_ps1 "[%s]")`命令将在当前工作目录（如果它是 git 存储库）之后附加结帐分支名称。

所以它看起来像： -

`dir_Name[branch_name]`其中 dir_Name 是工作目录名称，branch_name 是您当前正在处理的分支的名称。

请注意——__git_ps1 区分大小写。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-22T13:05:44.733

# 视窗

它最终如何在 Windows 10 命令行 (cmd) 上为我工作：

*   安装[叮当](https://mridgers.github.io/clink/)
*   将[git-autocomplete.lua](https://github.com/xkmgt/git-autocomplete-for-windows/blob/master/git-autocomplete.lua)文件复制到`C:\Users\<username>\AppData\local\clink`目录中
*   重新启动 Windows

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-04T04:18:07.187

# Arch Linux

来自 bash`/usr/share/git/completion/git-completion.bash`启动文件之一。

例如：

```
# ~/.bashrc

source /usr/share/git/completion/git-completion.bash 
```

您也许可以在其他位置找到该脚本，`/usr/share/bash-completion/completions/git`但这些脚本对我不起作用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-10T21:08:40.483

# macOS 通过 Xcode 开发者工具

在当前为 macOS 发布的所有答案中，这仅在[jmt的一个非常简短的](https://stackoverflow.com/users/2204937/jmt)[评论](https://stackoverflow.com/a/50919451/1519716)中提到......

*如果您已经安装了 Xcode 开发者工具，那么您不需要下载任何新的东西。*

相反，您只需要找到已经存在的`git-completion.bash`文件并将其源到您的`.bashrc`. 检查以下目录：

*   `/Applications/Xcode.app/Contents/Developer/usr/share/git-core`
*   `/Library/Developer/CommandLineTools/usr/share/git-core`

如果做不到这一点，git 本身可能会帮助你。当我`git config`按如下方式运行时，git 报告一个来自与`gitconfig`我位于同一目录中的文件的设置`git-completion.bash`：

```
$ git config --show-origin --list
...
file:/Applications/Xcode.app/Contents/Developer/usr/share/git-core/gitconfig    credential.helper=osxkeychain
... 
```

或者你总是可以蛮力搜索你的机器并喝杯咖啡：

```
$ find / -type f -name git-completion.bash 2>/dev/null 
```

因此，我有以下插入`~/.bashrc`：

```
# Git shell completion and prompt string on macOS
_git_dir="/Applications/Xcode.app/Contents/Developer/usr/share/git-core"
if [ -f "${_git_dir}/git-completion.bash" ]; then
    source "${_git_dir}/git-completion.bash"
fi
if [ -f "${_git_dir}/git-prompt.sh" ]; then
    source "${_git_dir}/git-prompt.sh"
fi
unset _git_dir 
```

请注意，这也是 git prompt-string 脚本的来源，因为它位于同一目录中。

（在 macOS Catalina 中测试）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-02-01T17:33:07.410

## Ubuntu

[这里](https://askubuntu.com/a/410810/563617)有一个美丽的答案。在 Ubuntu 16.04 上为我工作

## 视窗

[Git Bash](https://git-scm.com/download/win)是允许自动完成的工具。不确定这是否是标准分发的一部分，因此您会发现[此链接](https://git-for-windows.github.io/)也很有用。顺便说一句，Git Bash 允许使用**Linux shell 命令**在 windows 上工作，这对于有 GNU/Linux 环境经验的人来说是一件好事。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-06T00:33:43.010

# 麦克M1

对于那些使用 Mac M1 环境的人，我可以通过 homebrew 安装：

`brew install bash-completion`

然后添加到我的 ~/.bash_profile 或 ~/.bashrc （无论你使用什么）：

```
[[ -r "/opt/homebrew/Cellar/bash-completion/1.3_3/etc/profile.d/bash_completion.sh" ]] && . "/opt/homebrew/Cellar/bash-completion/1.3_3/etc/profile.d/bash_completion.sh" 
```

您可能需要更新版本号 (1.3_3)。您只需要在该目录中查找它。我很想知道是否有更好的方法。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-08-29T19:52:19.063

在 Git 项目的 Github 上，他们提供了一个 bash 文件来自动完成 git 命令。

您应该将其下载到主目录并强制 bash 运行它。这只是两个步骤，并在以下博客文章中完美解释（一步一步）。

[代码忧虑者博客：autocomplete-git/](https://github.com/git/git/blob/master/contrib/completion/git-completion.bash)

我已经在mac上测试过，它应该也可以在其他系统上运行。您可以将相同的方法应用于其他操作系统。

# java - java:将java桌面应用程序转换为servlet

> ID：12399003
> 
> 赞同：0
> 
> 时间：2012-09-13T03:25:32.967
> 
> 标签：java, swing, servlets, desktop-application

我正在制作 java 桌面应用程序，现在我想在另一台 PC 上共享某种形式的应用程序，我必须使用 servlet，但我找不到像 Servlet 一样使用 JFrame Form 的方法。我怎样才能在没有的情况下运行它浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:37:03.343

看看瓦丁。这是最接近“网络摇摆”的东西[https://vaadin.com/home](https://vaadin.com/home)

# java - 君特 | 如何测试方法中的参数

> ID：12399004
> 
> 赞同：2
> 
> 时间：2012-09-13T03:25:37.070
> 
> 标签：java, unit-testing, testing, junit

如何测试方法本身的参数。例如

```
class TestClass {

public void paraMethod(String para1, String para2) {
         String testPara1 = para1;
         String testPara2 = para2; 
}
}

class TestingClass {

   @Test
   public void testParaMethod () throws Exception {
             String myPara1 = "MyPara1"; 
             String myPara2 = "MyPara2";

             new TestClass().paraMethod(myPara1, myPara2);

   }
} 
```

好的，那么是否可以测试`testPara1`和`testPara2`是否正确设置为我通过的值？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T03:28:42.247

测试方法的局部变量的值和状态变化既不可能也不可取。它们是实现的私有细节，而不是你应该测试的东西。

相反，您的测试应该通过观​​察外部可见的东西来判断方法的正确性，例如返回值、与模拟环境的交互或对象状态的外部可见变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T03:34:14.680

如果我理解正确，您想测试变量 testPara1 和 testPara2 是否分别保存提供给 para1 和 para2 的值。鉴于该方法什么都不做，它应该不重要。

为了改进您的单元测试，请选择一个描述该方法功能的名称。确定结果是什么（返回一个值，更改某些状态）并根据已知输入测试预期结果。在不实现方法的情况下编写测试，考虑有效/无效输入和可能的边缘情况。然后实施你的方法，直到所有测试都通过 - 当他们继续前进时。

# html - IE9 不显示表中组之间的边框

> ID：12399005
> 
> 赞同：1
> 
> 时间：2012-09-13T03:25:39.483
> 
> 标签：html, css, html-table, internet-explorer-9

在网页上，我有一个表格，其中的行分组为几个正文部分（使用`tbody`元素）。此外，每列都在其自己的单独列组中。仅在这些行组和列组之间绘制边界，因此我使用此构造：

```
<table rules="groups" frame="box"> 
```

请参阅[此测试页](http://jsfiddle.net/ShjUC/)。

很多浏览器（包括IE8及以下）都会这样渲染：

![由 IE8 正确呈现的组之间的边界](../Images/197d3729f8dcdf68f2e5b026de40ee44.png)

奇怪的是，Internet Explorer 9 忽略了所有边框（只有表格框可见）：

![由于某种原因 IE9 不显示边框](../Images/b6a39c67333685b11ea82c38fe27a657.png)

这是为什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:45:58.123

尝试一起使用边框属性，例如`border:2px 1px solid blue;`in`td`和`border:2px 1px solid red;`in`th`

[http://jsfiddle.net/ShjUC/2/](http://jsfiddle.net/ShjUC/2/)

希望这会有所帮助

# scala - 一种在 Scala 中模拟 Class 的索引访问的方法

> ID：12399006
> 
> 赞同：3
> 
> 时间：2012-09-13T03:25:44.747
> 
> 标签：scala

我如何实现一个可以像数组一样询问的类，提供索引设置器？

像：

```
val k = new MyKls(size)
k(0) = 2  //<<-- I want this kind of functionality. 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T03:44:05.730

听起来您正在寻找的是`update`方法。如果你定义了这个方法，那么 Scala 将在`k(0) = 2`语法中使用它。它类似于`apply`允许您使用`k(0)`访问器语法的方法。

这是一个简短的示例：

```
import scala.collection.mutable.Buffer

class MyKls(size: Int) {
  val buf = Buffer.fill(size)(0)
  def apply(index: Int) = buf(index)
  def update(index: Int, newValue: Int) { buf(index) = newValue }
  override def toString = buf.mkString("[", ", ", "]")
}

val k = new MyKls(5)
println(k)      // [0, 0, 0, 0, 0]
k(0) = 2
println(k)      // [2, 0, 0, 0, 0]
println(k(0))   // 2 
```

[您可以在此处](http://daily-scala.blogspot.com/2009/08/apply-update-methods.html)找到更多详细信息。

# php - 为什么它不使用php中的ajax显示我的值

> ID：12399007
> 
> 赞同：1
> 
> 时间：2012-09-13T03:25:52.200
> 
> 标签：php, jquery

我期待我的 php 代码中的值列表

PHP代码：

```
 $warriors = array();

foreach($result as $names){
    $warriors[] = $names;
}
echo json_encode($warriors); 
```

JS功能：

```
function getWarriors() {
        $.ajax({
            url: "display_warriors.php",
            datatype:"json",
            success: function(data) {
                var toAppend = '';
                if(typeof data === "object"){
                    for(var i=0;i<data.length;i++){
                        var warrior = data[i];
                        toAppend += '<tr>';
                        toAppend += '<td>'+data[i]['warrior_id']+'</td>';
                        toAppend += '<td>'+data[i]['warrior_name']+'</td>';
                        toAppend += '<td>'+data[i]['warrior_type']+'</td>';
                        toAppend += '</tr>';
                    }
                    $("#listWarriors table").append(toAppend);
                }
            }
        });
        return false;
    } 
```

调用函数的 HTML 代码

```
<li><a href="#listWarriors" onclick="return getWarriors()">Warrior List</a></li> 
```

当我单击 a 标签时，它没有显示我所期望的，可能是什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:30:21.380

您可以尝试将标头设置为“application/json”

```
header("Content-Type: application/json"); 
```

我遇到了类似的事情，必须指定我专门发送 JSON。它可能会有所帮助。

# jquery - jQuery Validate Uncaught TypeError：无法调用未定义的方法“getAttribute”

> ID：12399008
> 
> 赞同：10
> 
> 时间：2012-09-13T03:26:12.997
> 
> 标签：jquery, html, forms, jquery-validate

鉴于此 HTML 使用 jQuery 验证

```
 <input id="accept-terms" type="checkbox" class="required"/> 
 <label for="accept-terms"> I accept the <asp:HyperLink ID="termsLink" runat="server" Target="_blank">terms and condtions</asp:HyperLink> of sale.</label>
 <label for="accept-terms" class="error-text">You must accept the terms and conditions before purchasing</label> 
```

我收到此错误：

> 未捕获的类型错误：无法调用未定义的方法“getAttribute”

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-13T03:26:12.997

缺少“名称”属性：

```
<input id="accept-terms" name="accept-terms" type="checkbox" class="required"/> 
```

（这花了我一段时间才弄清楚，所以我想我会分享问题和解决方案）

另外：检查下面的评论，因为其他人已经发布了相同异常的其他原因。

# c# - 将excel工作簿中的第一行复制到新的excel工作簿

> ID：12399010
> 
> 赞同：5
> 
> 时间：2012-09-13T03:26:14.760
> 
> 标签：c#, excel, vsto

如何获取 excel 工作簿中的第一行并使用 .net c# 将其保存到新的 excel 工作簿中？我不知道列的数量，所以需要获取整行。这是我所拥有的，但新工作簿是空白的（没有复制行）

```
Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(file);    
Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];    
Excel.Range xlRangeHeader = xlWorksheet.get_Range("A1", "A1").EntireRow;                         
Excel.Workbook xlWorkbookNew = xlApp.Workbooks.Add();    
Excel._Worksheet xlWorksheetNew = xlWorkbookNew.Sheets[1];    
xlWorksheetNew.get_Range("A1", "A1").EntireRow.Value = xlRangeHeader;                        
xlWorkbook.Close(false);                        
xlWorkbookNew.SaveAs(Path.Combine(sDestination, Path.GetFileName(file)), fileFormat);                        
xlWorkbookNew.Close(true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:33:43.947

试试这个代码：

```
xlWorksheetNew.get_Range("A1", "A1").EntireRow.Value = xlRangeHeader.Value; 
```

或者

```
xlWorksheetNew.get_Range("A1", "A1").EntireRow.Value = xlWorksheet.get_Range("A1", "A1").EntireRow.Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T03:59:04.557

```
public void test(Application xlApp)
{
    string file = @"C:\Temp\a.xlsx";
    Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(file);
    Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
    xlWorksheet.Range["A1"].EntireRow.Copy(); 
    Excel.Workbook xlWorkbookNew = xlApp.Workbooks.Add();
    Excel._Worksheet xlWorksheetNew = xlWorkbookNew.Sheets[1];
    Worksheet activeSheet = xlWorkbookNew.ActiveSheet;
    activeSheet.Paste();

    xlWorkbook.Close(false);
    xlWorkbookNew.SaveAs(Path.Combine(@"C:\Temp", Path.GetFileName(file)));
    xlWorkbookNew.Close(true);
    CloseExcel();
}

public void CloseExcel(Application xlApp)
{
    try
    {
        if (xlApp != null)
        {
            xlApp.Quit();
            if (Marshal.IsComObject(xlApp))
                Marshal.ReleaseComObject(xlApp);
        }
    }
    catch (Exception ex)
    {
    }
} 
```

**编辑：**

我打算进入低级的东西，但不知道你的专业水平。如果您想要良好的性能，请不要使用复制/粘贴。在这里，我将向您展示一些性能技巧。首先一次写入所有单元格：

```
object[,] values = (object[,])Array.CreateInstance(typeof(object), new int[2] { rowCount, ColumnCount }, new int[2] { 1, 1 }); 
```

//在这里填充值，然后一举将数据写入Excel：

```
using (var targetRange = xlApp.Range[topLeft + startRow + ":" + rightBottom + endRow].WithComCleanup())
{
   targetRange.Resource.Value2 = values;
} 
```

其次注意`.WithComCleanup()`- 在进行 VSTO 编码时，您需要注意管理非托管内存 - [http://jake.ginnivan.net/vsto-com-interop](http://jake.ginnivan.net/vsto-com-interop)。

# scheme - The Little Schemer 第 4 版：rember 函数讨论

> ID：12399015
> 
> 赞同：5
> 
> 时间：2012-09-13T03:26:51.933
> 
> 标签：scheme, the-little-schemer

第41页功能简化后`rember`，有一个问答，我不是很懂。

```
问：那我们为什么不马上简化呢？
R：因为那时函数的结构与其参数的结构不一致。

```

我试图弄清楚这几天，但我不明白这个问题的确切含义是什么。

谁能解释一下弗里德曼想通过问答来展示什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T03:43:24.707

直到本章的这一点，列表上的递归都是使用`cond`带有两个条件的 a 编写的，其中第二个条件又是另一个`cond`。这就是作者所说的“参数结构”（一个列表）与“函数结构”（一个两个条件`cond`）不一致的意思——因为现在这个函数被构造为一个`cond`具有三个条件的单一结构，更简单、更容易理解。

# umbraco - uCommerce ItaxService 未被调用

> ID：12399021
> 
> 赞同：2
> 
> 时间：2012-09-13T03:27:30.827
> 
> 标签：umbraco, umbraco-ucommerce

我已按照步骤为 ucommerce 创建自定义税务服务。出于争论的原因，我想以 500 美元对每样东西征税。在我看来，TaxService 没有被调用。

../UCommerce/配置/组件

```
<component id="TaxService"
    service="UCommerce.Catalog.ITaxService, UCommerce"
    type="AMS101.UCommerceCustomisation.CalculateTaxService, AMS101"
    lifestyle="Singleton"/> 
```

实施 ItaxService

```
public class CalculateTaxService :ITaxService{
        public Money CalculateTax(Product product, PriceGroup priceGroup, PriceGroupPrice unitPrice) {
            return new Money( 500m, Currency.FirstOrDefault( x => x.ISOCode == "AUD" ) );
        }
    } 
```

从购物篮配置中删除的行

```
<!--<value>${Basket.CalculateOrderLineTax}</value>--> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:32:18.760

您是否尝试在更改配置文件后回收应用程序池。这可能是使用过时配置的简单问题。

# c++ - 如何在没有数学库的情况下检查 C++ 中的变量是否完整

> ID：12399026
> 
> 赞同：1
> 
> 时间：2012-09-13T03:28:09.347
> 
> 标签：c++, math

我正在为初学者 C++ 类编写一个小程序，我应该从用户那里获取输入（我使用双精度，因为我喜欢让自己更难）并输出它是素数还是复合数，并且如果它是复合的，我需要输出至少一个可以被该数字整除的数字。

我手头的时间太多了，所以我会想办法让它变得更难。我试图在不使用任何东西的情况下做所有事情，只使用 iostream。我已经得到了大部分内容，但这一点让我很困惑：如何在不使用数学库的情况下确定双精度数是否为整数？（我在这里找到了使用 math.h 有很好解决方案的问题，但没有它就什么都没有）我想有一种方法可以做到这一点，而无需为看似如此简单的事情编写 50 行代码......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:32:14.763

您可能不应该在浮点数中进行任何计算，但是测试数字是否有小数的一种简单方法是发言并将其与原始数字进行比较。在 C++ 中，您可以通过转换为`int`（假设只有正数）然后转换回`double`：

```
bool isWhole( double d ) {
   int whole = d;               // will round down to the nearest integer
   return (d-whole < epsilon);  // for a small enough epsilon
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:04:03.377

您可以将`double`值转换为适当大的整数类型，然后查看两个值是否相同：

```
double d = /* whatever */
long long ival = d;
if (ival == d) {
    /* d holds integral value. */
} 
```

# c++ - TDateTime 变量中的当前日期/时间

> ID：12399029
> 
> 赞同：1
> 
> 时间：2012-09-13T03:28:35.867
> 
> 标签：c++, c++builder, vcl

我正在使用 C++ 并且正在使用 TDateTime 数据类型。

如何获取当前系统日期/时间并将其放入 TDateTime 变量中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T22:15:57.270

正如 Jesse 提到的，您可以使用该`Now()`函数（或静态`TDateTime::CurrentDateTime()`方法）。请注意，在 Windows 上，它在内部调用 Win32 API`GetLocalTime()`函数，该函数返回本地时区的系统日期/时间。如果您想要 UTC 中的当前系统日期/时间，您可以编写自己的函数来调用`GetSystemTime()`而不是`GetLocalTime()`：

```
TDateTime __fastcall NowUTC()
{
  SYSTEMTIME SystemTime;
  ::GetSystemTime(&SystemTime);
  return EncodeDate(SystemTime.wYear, SystemTime.wMonth, SystemTime.wDay) + EncodeTime(SystemTime.wHour, SystemTime.wMinute, SystemTime.wSecond, SystemTime.wMilliseconds);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T03:31:55.600

你打电话`Now()`，`TDateTime t = Now();`。[这是一个教程](http://www.functionx.com/cppbuilder/topics/datetime.htm)。您应该能够通过简单的搜索找出这些东西。请尽量自己解决这些问题。

# java - Android编程，一个小问题。

> ID：12399031
> 
> 赞同：0
> 
> 时间：2012-09-13T03:28:42.637
> 
> 标签：java, android

这次我得到了括号下的红色波浪线，告诉我“插入“EnumBody”以完成 EnumDeclaration”

它发生在这段代码的最后一行，最后一个括号上；

```
if (position == 3){ 
            Intent intent = new Intent(Main.this, Progress.class); 
            Main.this.startActivity(intent); } } } ) 
```

这是我的整个活动代码；

```
package com.example.gymbuddy;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class Main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    findViewById(R.id.button2).setOnClickListener(new handleButton2());
    findViewById(R.id.button3).setOnClickListener(new handleButton3());
    findViewById(R.id.button4).setOnClickListener(new handleButton4());

    Spinner spinner = (Spinner) findViewById(R.id.spinner);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.work_array, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

    }

class handleButton2 implements OnClickListener {
    public void onClick(View v) {
        Intent intent = new Intent(Main.this, Benchmark.class);
        startActivity(intent);  } }

class handleButton3 implements OnClickListener {
    public void onClick(View v) {
        Intent intent = new Intent(Main.this, Progress.class);
        startActivity(intent);  } }

class handleButton4 implements OnClickListener {
    public void onClick(View v) {
        Intent intent = new Intent(Main.this, Settings.class);
        startActivity(intent);  } }@

spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
        if (position == 1){
            Intent intent = new Intent(Main.this, Upperbody.class);
            Main.this.startActivity(intent); }
        if (position == 2){
            Intent intent = new Intent(Main.this, Settings.class);
            Main.this.startActivity(intent); }
        if (position == 3){
            Intent intent = new Intent(Main.this, Progress.class);
            Main.this.startActivity(intent); } } } )

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:04:24.863

在我看来，onCreate 方法已经关闭到早期，spinner.setOnItemSelectedListener 应该在其中，并且在方法之外定义了内部类。spinner.setOnItemSelectedListener 只是漂浮在类的中间，也许它应该在 onCreate 方法中。（这可能是有效的语法，但我不确定这是否是您想要实现的目标）

该语句可以像 Java 中的初始化块一样处理，即使没有括号。（但我不是 100% 确定）请参阅：http: [//jpz-log.info/archives/2009/03/25/initialization-blocks-in-java/](http://jpz-log.info/archives/2009/03/25/initialization-blocks-in-java/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:52:41.257

用这些代码行替换您的活动代码，然后再次尝试编译：

```
public class Main extends Activity {    
    @Override
    public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_main);

           findViewById(R.id.button2).setOnClickListener(new handleButton2());
           findViewById(R.id.button3).setOnClickListener(new handleButton3());
           findViewById(R.id.button4).setOnClickListener(new handleButton4());

           Spinner spinner = (Spinner) findViewById(R.id.spinner);
           ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.work_array, android.R.layout.simple_spinner_item);
           adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
           spinner.setAdapter(adapter);

           spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
                    if (position == 1){
                        Intent intent = new Intent(Main.this, Upperbody.class);
                        Main.this.startActivity(intent); 
                    }
                    if (position == 2){
                        Intent intent = new Intent(Main.this, Settings.class);
                        Main.this.startActivity(intent);
                    }
                    if (position == 3){
                        Intent intent = new Intent(Main.this, Progress.class);
                        Main.this.startActivity(intent); 
                    } 
               } 
            } );
    }        
    class handleButton2 implements OnClickListener {
        public void onClick(View v) {
            Intent intent = new Intent(Main.this, Benchmark.class);
            startActivity(intent); 
        }
    }        
    class handleButton3 implements OnClickListener {
        public void onClick(View v) {
            Intent intent = new Intent(Main.this, Progress.class);
            startActivity(intent);  
        } 
    }        
    class handleButton4 implements OnClickListener {
        public void onClick(View v) {
            Intent intent = new Intent(Main.this, Settings.class);
            startActivity(intent);  
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T03:49:51.267

这是实际的代码吗？可能是句柄Button4 类末尾的附加“@”字符吗？

```
class handleButton4 implements OnClickListener {
    public void onClick(View v) {
        Intent intent = new Intent(Main.this, Settings.class);
        startActivity(intent);  } }@ // <------- this 
```

# c++ - c++中的调试错误

> ID：12399032
> 
> 赞同：0
> 
> 时间：2012-09-13T03:28:44.867
> 
> 标签：c++, debugging, unix

我正在开发一个程序，该程序根据用户的输入打印出字数、字符数和行数。但我不断收到这些我完全不知道的错误。我想知道是否有人可以提供帮助。** 我已经从以前的错误中更改了它，但仍然收到错误。抱歉，我是 C++ 新手。

我得到的错误是

```
 filestat.cpp:47: error: ‘line’ was not declared in this scope
 filestat.cpp: In function ‘int wc(std::string)’:
 filestat.cpp:55: error: ‘line’ was not declared in this scope
 filestat.cpp: In function ‘int cc(std::string)’:
 filestat.cpp:67: error: ‘line’ was not declared in this scope

#include<iostream>
#include<fstream>
#include<string>
using namespace std;
int lc(string fname);
int wc(string fname);
int cc(string fname);

int main(){
string fname,line,command;
ifstream ifs;
int i;
while(true){
    cout<<"---- Enter a file name : ";

    if(getline(cin,line)){
        if(line.length()== 4 && line.compare("exit")== 0){
            cout<<"Exiting";
            exit(0);
        }else{
            string command = line.substr(0,2);
            fname= line.substr(4, line.length() -5);
                if( ifs.fail()){
                    ifs.open(fname.c_str());
                    cerr<< "File not found" <<fname <<endl;
                    ifs.clear();
                }else{
                    if(command.compare("lc")){
                        lc(fname);
                    }else if (command.compare("wc")){
                        wc(fname);
                    }else  if(command.compare("cc")){           
                                      cc(fname);                    
                    }else
                        cout<<"Command unknown. ";

                }
        }
    }
}
return 0;
}

 int lc(string fname){
 int count;
 while(getline(fname, line)){
    count++;
 }
  cout<<"Number of lines: "<<count ; 
   }

  int wc(string fname){
int count;
while(getline(fname, line)){
    int pos=line.find_first_of("\n\t ",0);
    while(pos =! string::npos){
        int length=line.length();
        line = line.substr(pos+1, length - pos);
        count++;
    }
  }
cout<< "Number of words: " <<count; 
  }
 int cc(string fname){
int count;
while(getline(fname, line)){
    count = count + line.length();
}

cout<< "Number of words: " <<count;

    } 
```

当我将 line 设置为全局变量时，出现错误：

> filestat.cpp:48：错误：无法将参数 '1' 的 'std::string' 转换为 'char**' 到 '__ssize_t getline(char**, size_t*, FILE*)'</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:31:16.673

您声明的方式`line`，它是`main`函数的局部变量。您不能在其他功能（等）中使用`cc`它`wc`。

要么将其声明为全局变量，要么将其作为参数传递给`cc`和`wc`其他函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:08:30.247

好的，除了在全局范围内声明行。您需要在有问题的函数中从文件名创建一个 ifstream 对象。例如

```
int cc(string fname){
ifstream f(fname);
int count;
while(getline(f, line)){
    count = count + line.length();
}
f.close();
} 
```

这应该可以，但我建议将函数定义更改为

```
 int cc(ifstream& f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:02:38.293

您还有其他错误。首先，您需要`line`在每个`wc`、`lc`和`cc`函数中都有一个局部变量。

其次，您不能调用`getline`using `fname`。它期望一个`istream`. 那么为什么不传递`ifs`给你的函数呢？

```
int wc( ifstream &ifs )
{
    string line;
    int count = 0;
    while(getline(fname, line)){
        int pos=line.find_first_of("\n\t ",0);
        while(pos =! string::npos){
            int length=line.length();
            line = line.substr(pos+1, length - pos);
            count++;
        }
    }
    cout<< "Number of words: " <<count;
    return count;
} 
```

在上面，我还初始化`count`并返回了它（因为你有一个 int 返回类型并且没有返回任何东西）。

其他功能的类似更改。

顺便说一句，您可能想要查找`string::find_first_of`函数并决定是否真的需要`line`每次都替换为子字符串。看第二个参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T03:33:24.493

正如您的错误状态，`line`未在列出的“范围”（即函数）中声明。如果您希望这些函数可以访问它们，则需要创建`line`一个全局变量（意味着在 之外声明）。`main`

# android - 无法在我的 MainActivity 中开始活动

> ID：12399035
> 
> 赞同：0
> 
> 时间：2012-09-13T03:29:12.923
> 
> 标签：android, exception

我会尽力发布相关代码并解释清楚......我正在关注Android上的教程；这是一个 ListView 应用程序，我现在将其转换为片段。它告诉我将我的一门课程从 更改`extends ListActivity`为`extends Activity`。这样做时，我对 ListActivity 的两个调用需要更改。我以为我正确地更改了它们，但我收到了这些错误（只是列表的顶部）：

```
W/dalvikvm(4486): threadid=1: thread exiting with uncaught exception (group=0x40209760)
E/AndroidRuntime(4486): FATAL EXCEPTION: main
E/AndroidRuntime(4486): java.lang.RuntimeException: Unable to start activity 
    ComponentInfo{com.example.testing/com.example.testing.MainActivity}:
    java.lang.ClassCastException: android.widget.FrameLayout cannot be cast to android.widget.ListView 
```

我认为相关的部分我的主要活动代码是：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_fragment);

    ListView lv = (ListView) findViewById(R.id.list_fragment);
    lv.setAdapter(ArrayAdapter.createFromResource(getApplicationContext(),
            R.array.tut_titles, R.layout.activity_main));
    final String[] links = getResources().getStringArray(R.array.tut_links);

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick......

        }
    });
} 
```

lv 变量是新的，使用它进行的两次调用曾经是特定于 ListActivity 的。到目前为止，我的 list_fragment 只是这样：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="com.example.testing.UrlFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/list_fragment">
</fragment> 
```

呸！我认为这就是所需要的，但如果我确定的话，我可能会自己解决这个问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:40:32.497

您在以下行中遇到问题。

```
ListView lv = (ListView) findViewById(R.id.list_fragment); 
```

从 R 文件中，您正在引用片段，但您要将其转换为 ListView，这是您的问题。您可以按如下方式简单地解决它。

1）创建一个扩展Fragment的类。

```
public static class YourFragmentClass extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.example_fragment, container, false);
    }
} 
```

2）在你的活动课上。

```
YourFragmentClass fragment = new YourFragmentClass ();
fragmentTransaction.add(R.id.list_fragmentr, fragment);
fragmentTransaction.commit(); 
```

3）更多[检查这个](http://developer.android.com/guide/components/fragments.html)

# ruby-on-rails-3 - 黄瓜栏杆不合格

> ID：12399037
> 
> 赞同：0
> 
> 时间：2012-09-13T03:29:30.673
> 
> 标签：ruby-on-rails-3, rspec, cucumber, ruby-on-rails-3.2, capybara

我在功能中有以下场景：

```
@home
Feature: Home page

@home
Scenario: User launches home page
  Given a user visits the home page
  And user is not signed in
  Then he should see user signin information 
```

我看到 2 个问题：1）当我运行时`rake cucumber --tags @home`，它会引发错误：`invalid option: --tags`

所以，我运行`cucumber --tags @home` 2）它抛出以下错误：

```
Given a user visits the home page             # features/step_definitions/home_steps.rb:2
And user is not signed in                     # features/step_definitions/home_steps.rb:23
Then he should see user signin information    # features/step_definitions/home_steps.rb:6
  expected link "User Sign In" to return something (RSpec::Expectations::ExpectationNotMetError)
  ./features/step_definitions/home_steps.rb:8:in `/^he should see user signin information$/'
  features/home.feature:8:in `Then he should see user signin information' 
```

但是，当我在浏览器中启动并查看时，我可以看到并单击链接，并且我验证了该步骤以确保没有拼写错误或多余的空格。

> 有人可以帮助我如何调试它吗？

脚步：

```
Given /^a user visits the home page$/ do
  visit home_path
end
Given /^user is not signed in$/ do

end

Then /^he should see user signin information$/ do
  page.should have_link('User Sign In', href: user_signin_path)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T01:11:28.597

您可以尝试通过在子句`save_and_open_page`之前添加来调试您的应用程序。`page.should have_link`这将打开一个浏览器页面，您将看到黄瓜在检查您的期望之前“看到”了什么。

# jquery-ui - 使用 jQuery 选项卡打开多个 div

> ID：12399038
> 
> 赞同：1
> 
> 时间：2012-09-13T03:29:54.020
> 
> 标签：jquery-ui, tabs

我想在标签上添加标签并打开 2 个 div。喜欢：

```
<div id="tabs">
    <ul>
        <li class="tab1"><a href="#tab1">tab1</a></li>
        <li class="tab2"><a href="#tab2">tab2</a></li>
    </ul>

    <div id="tab1">this is tab1</div>
    <div id="tab2">this is tab2</div>
    <div id="tab3">this is tab3</div>
</div> 
```

如果我想单击 tab1 选项卡，它会同时显示“这是 tab1”和“这是 tab3”。我怎样才能实现？干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T02:42:10.207

尝试这个：

```
<div id="tabs">
<ul>
    <li class="tab1"><a href="#tab1">tab1</a></li>
    <li class="tab2"><a href="#tab2">tab2</a></li>
</ul>

<div id="tab1">this is tab1</div>
<div id="tab2">this is tab2</div>

</div>

<!-- tab3 is outside of tabs and initially hidden -->
<div id="tab3" style="display:none;">this is tab3</div>

<script>
$(".tabs").tabs({activate: function() {
  /* if tab1 activated then show tab3 */
  if ($(".tabs").tabs("options","active") == 0 /* tab1 */) {
    $(".div3").show();
  } else {
    $(".div3").hide();
  }
}});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T23:56:42.443

对 Sergey 解决方案的小更新，参数应该是选项，而不是选项，请参阅[http://api.jqueryui.com/tabs/](http://api.jqueryui.com/tabs/)

# umbraco - ucommerce 权重属性

> ID：12399045
> 
> 赞同：0
> 
> 时间：2012-09-13T03:31:13.030
> 
> 标签：umbraco, umbraco-ucommerce

有谁知道在哪里可以访问 uCommerce 产品的 weight 属性。

我已经实施了基于重量的定制运输服务，但在 umbraco / ucommerce 后台找不到重量部分。我在代码中访问它没有问题，但作为登录用户它是隐藏的（无论如何对我来说）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:48:40.687

这在 2.6.x 版本中是不可能的。需要创建自定义属性。

# c++ - 快速调用 fread 会使应用程序崩溃

> ID：12399047
> 
> 赞同：0
> 
> 时间：2012-09-13T03:31:18.607
> 
> 标签：c++, audio, wav, fread

我正在编写一个函数来加载波形文件，并在此过程中将数据拆分为 2 个单独的缓冲区（如果它是立体声的）。程序到达 i = 18 并在左通道 fread pass 期间崩溃。（您可以忽略 couts，它们只是用于调试。）也许我应该一次性加载文件并使用 memmove 填充缓冲区？

```
if(params.channels == 2){
    params.leftChannelData = new unsigned char[params.dataSize/2];
    params.rightChannelData = new unsigned char[params.dataSize/2];

    bool isLeft = true;

    int offset = 0;
    const int stride = sizeof(BYTE) * (params.bitsPerSample/8);

    for(int i = 0; i < params.dataSize; i += stride)
    {
        std::cout << "i = " << i << " ";
        if(isLeft){
            std::cout << "Before Left Channel, ";
            fread(params.leftChannelData+offset, sizeof(BYTE), stride, file + i);
            std::cout << "After Left Channel, ";
        }
        else{
            std::cout << "Before Right Channel, ";
            fread(params.rightChannelData+offset, sizeof(BYTE), stride, file + i);
            std::cout << "After Right Channel, ";
            offset += stride;
            std::cout << "After offset incr.\n";
        }

        isLeft != isLeft;
    }

} else {
    params.leftChannelData = new unsigned char[params.dataSize];
    fread(params.leftChannelData, sizeof(BYTE), params.dataSize, file);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:35:28.067

这在我看来是错误的：`file + i`

你只有一个文件句柄，对吧？不要添加`i`它！

> file 是一个 FILE* 我的假设是，像大多数指针一样，向指针添加一个整数将从文件中的偏移量读取。

FILE* 是一个指向 FILE 结构的指针，该结构存储有关您打开的文件的信息。您总是将该指针传递给 stdio 函数。如果要查找文件中的特定位置，请使用`fseek`. 如果您只是从头到尾顺序读取文件，则无需查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:36:36.377

对于任何想要我的完整解决方案的人，我正在发布这个。事实证明，在 fread 调用之间循环比在 memcpy 调用之间循环一个 fread 调用要慢得多（尽管它需要两倍的内存）。我发布的代码中的另一个问题是我说：

```
isLeft != isLeft; 
```

代替

```
isLeft = !isLeft; 
```

解决方案：

```
if(params.channels == 2){
    params.leftChannelData = new unsigned char[params.dataSize/2];
    params.rightChannelData = new unsigned char[params.dataSize/2];
    unsigned char * buf = new unsigned char[params.dataSize];

    fread(buf, sizeof(BYTE), params.dataSize, file);

    bool isLeft = true;

    int offset = 0;
    const int stride = params.bitsPerSample/8;

    for(int i = 0; i < params.dataSize; i += stride)
    {

        if(isLeft)
            memcpy(&params.leftChannelData[offset], &buf[i], stride * sizeof(BYTE));
        else{
            memcpy(&params.rightChannelData[offset], &buf[i], stride * sizeof(BYTE));
            offset += stride;
        }
        isLeft = !isLeft;
    }

    params.dataSize = params.dataSize/2;

    delete(buf);

} else {
    params.leftChannelData = new unsigned char[params.dataSize];
    params.rightChannelData = NULL;
    fread(params.leftChannelData, sizeof(BYTE), params.dataSize, file);
} 
```

# php - 如何在标题标签的 x 实例之后插入字符串？

> ID：12399055
> 
> 赞同：4
> 
> 时间：2012-09-13T03:32:51.783
> 
> 标签：php

首先，感谢您在这里帮助我，我非常感谢您的时间。

让我给你一些关于我想要完成的事情的背景：

我正在开发一个小型网站增强功能，我想在某些帖子的内容区域中添加一个简单的相关帖子小部件。

现在，对于任何给定的帖子，我都将我的所有帖子内容存储在一个变量中。我们称它为 $content。

我希望做的是解析这个 $content 字符串并在 H3 标签的第二个实例之后立即插入小部件。

这是我失败的尝试之一的示例：

```
$widgetizedContent = explode("</h3>", $content);
$widgetizedContent[1] .= 'widget code';
$finalContent = implode($widgetizedContent, "<p>"); 
```

我不太确定从这里去哪里，如果你能给我提供任何方向，我将不胜感激。

编辑：这是输出：

```
<h3>This is my header text[this is the text I'm trying to insert]</h3> 
```

它不是在 H3 之后插入小部件代码，而是在结束 H3 标记之前插入它。我不认为我理解内爆，因为我应该:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:29:35.423

根据您的代码，您可以在第二个之后添加文本，方法是将文本`</h3>`预先添加到标记之后的内容（而不是之前的内容）。

```
$widgetizedContent = explode("</h3>", $content);
$widgetizedContent[2] = 'widget code'.$widgetizedContent[2] ;
$finalContent = implode("</h3>", $widgetizedContent); 
```

当然，这盲目地假设至少有 2 个`</h3>`标签，它们可能适合您的网站，也可能不适合您的网站。

# linux - 如何在 Linux rpath 中编码可执行位置？

> ID：12399056
> 
> 赞同：9
> 
> 时间：2012-09-13T03:33:03.787
> 
> 标签：linux, macos, gcc, shared-libraries, rpath

我有一个可执行文件，它隐式加载了几个 .so 库，它们都是由我构建的。对于部署，或者至少是测试/调试，我希望将它们全部放在同一个目录中：

```
my_executable
libmylib1.so
libmylib2.so 
```

为了让可执行文件隐式加载库，我想为可执行文件的目录设置一个 rpath (DT_RUNPATH)。对于 OS X，我会这样做：

```
clang -dynamiclib -o libmylib1.dylib -install_name @rpath/libmylib1.dylib src1.c src2.c    
clang -dynamiclib -o libmylib2.dylib -install_name @rpath/libmylib2.dylib src3.c src4.c
clang -o my_executable -L. -llibmylib1.so -llibmylib2.so -Wl,-rpath,@loader_path/. main.c 
```

请注意`@loader_path/.`在 OS X 中形成可执行文件的 rpath。对于 Linux，我能做到的最接近的是

```
gcc -dynamiclib -o libmylib1.so src1.c src2.c    
gcc -dynamiclib -o libmylib2.so src3.c src4.c
gcc -o my_executable -L. -llibmylib1.so -llibmylib2.so -Wl,-rpath=. main.c 
```

这里的问题是，在 Linux 上，rpath 遵循当前工作目录，而不是可执行文件的目录。有没有办法在 Linux 上完成同样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T03:38:10.653

您需要使用文字字符串`$ORIGIN`作为运行路径，动态加载程序将其理解为可执行文件的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T03:38:29.613

一个常见的解决方案是创建一个 shell 脚本包装器，该包装器确定可执行文件所在的目录，并在执行实际的可执行文件之前适当地设置 LD_LIBRARY_PATH。

# php - 我们如何通过 php 代码调用 facebook 分享

> ID：12399062
> 
> 赞同：0
> 
> 时间：2012-09-13T03:33:51.997
> 
> 标签：php, facebook, share

是否可以从 php 代码调用 facebook 共享？我的意思是，当任何用户点击我网站中的图片时，我想从他的 Facebook 帐户分享该图片。是否可以 ？那我们该怎么做呢？

提前致谢

苏尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:50:04.983

是的，有可能。[这是来自http://developers.facebook.com/docs/reference/php/facebook-api/](http://developers.facebook.com/docs/reference/php/facebook-api/)的示例代码

这是将照片上传到用户个人资料。

```
<?
  // Remember to copy files from the SDK's src/ directory to a
  // directory in your application on the server, such as php-sdk/
  require_once('php-sdk/facebook.php');

  $config = array(
    'appId' => 'YOUR_APP_ID',
    'secret' => 'YOUR_APP_SECRET',
    'fileUpload' => true,
  );

  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();

  $photo = './mypic.png'; // Path to the photo on the local filesystem
  $message = 'Photo upload via the PHP SDK!';
?>
<html>
  <head></head>
  <body>

  <?
    if($user_id) {

      // We have a user ID, so probably a logged in user.
      // If not, we'll get an exception, which we handle below.
      try {

        // Upload to a user's profile. The photo will be in the
        // first album in the profile. You can also upload to
        // a specific album by using /ALBUM_ID as the path 
        $ret_obj = $facebook->api('/me/photos', 'POST', array(
                                         'source' => '@' . $photo,
                                         'message' => $message,
                                         )
                                      );
        echo '<pre>Photo ID: ' . $ret_obj['id'] . '</pre>';

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl( array(
                       'scope' => 'photo_upload'
                       )); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   

      echo '<br /><a href="' . $facebook->getLogoutUrl() . '">logout</a>';
    } else {

      // No user, print a link for the user to login
      // To upload a photo to a user's wall, we need photo_upload  permission
      // We'll use the current URL as the redirect_uri, so we don't
      // need to specify it here.
      $login_url = $facebook->getLoginUrl( array( 'scope' => 'photo_upload') );
      echo 'Please <a href="' . $login_url . '">login.</a>';

    }

  ?>

  </body>
</html> 
```

# facebook - Facebook 图表或不为个人资料图片绘制图表

> ID：12399065
> 
> 赞同：1
> 
> 时间：2012-09-13T03:34:39.707
> 
> 标签：facebook, facebook-graph-api

我需要创建一个简单的 Facebook 应用程序，在应用程序中提取登录用户的 Facebook 个人资料照片。我需要连接整个“连接到 facebook”应用程序，还是可以在没有任何权限的情况下在 Facebook 应用程序中完成？

在此先感谢，希望一切都好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:47:04.203

这很容易。

```
<img src="http://graph.facebook.com/{userId}/picture" /> 
```

您还可以添加类型属性，例如

```
<img src="http://graph.facebook.com/{userId}/picture?type=large" /> 
```

支持类型：小、普通、大、方形

# android - 使用 GPS 和后台应用程序 ios/android 时的电池寿命

> ID：12399066
> 
> 赞同：1
> 
> 时间：2012-09-13T03:34:47.943
> 
> 标签：android, ios, google-maps, gps, apk

我想知道是否有人创建了一个在后台启动并利用 GPS 每分钟左右收集当前纬度和经度的应用程序？如果有，请提供您的电池使用时间吗？例如，您的手机使用标准手机程序运行该后台应用程序会持续多长时间，直到它完全耗尽。

我想看看是否值得花时间为自己创建一个应用程序，但如果我工作 8 小时并且在那段时间没有办法给手机充电，那么我不想回家并且它关闭了对我来说，因为我的应用程序我会在我家创作作品。我需要该应用程序才能工作，因为它会看到我何时在我家的范围内（来自 GPS），然后从我的手机向我家的服务器发送命令。所以这就是为什么它需要能够在后台每 1 分钟左右进行一次检查。

或者只在每天下午 5 点之后打开 GPS（这在 iOS 和 Android 上是否可行？），以便最大限度地减少电池负载？！？

任何帮助或建议都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T03:44:37.277

看起来我们在处理相同的要求。我的代码定期将 GPS 位置发送到服务器（比如 1 分钟、5 分钟、15 分钟……根据用户要求），直到现在我的代码就像它不断打开 GPS，所以电池寿命只有几个小时，比如 3-4小时（设备/手机充满电时）。

在*Stack Overflow*上搜索后，我得出了这个[答案](https://stackoverflow.com/a/3145655/996493)。现在为了解决电池问题，我再次重新设计应用程序，使 GPS 在应用程序上传数据时启动并在 30 秒内停止。

此外，我将代码从`TimerTask`类更改为类，`AlarmManger`因此它使用的内存要少得多。

在这些更改之后，我的应用程序工作 10 小时，间隔 1 分钟（当手机充满电时）等等。

通常电池寿命是 20 小时，并且没有设置可以延长该时间的间隔，所以我得到了 2 分钟这样的最佳水平。

> 或者只在每天下午 5 点之后打开`GPS`（这对 iOS 和 Android 是否可行？），以便将电池负载降至最低？！？

我建议你看看`AlarmManager`类的例子。这将是您的最佳解决方案。您的应用程序将非常轻量级。

# iphone - 在导航栏中添加空白区域

> ID：12399069
> 
> 赞同：0
> 
> 时间：2012-09-13T03:36:11.517
> 
> 标签：iphone, ios

我的导航栏中有 4 个按钮，但显然右边的按钮太靠近侧面，并且弹出框没有正确显示。

![在此处输入图像描述](../Images/8a67ea36c4a07dfbfcbeed99f05a16c9.png)

有没有办法在右侧添加一些额外的间距？像一个空按钮？如果一个空按钮是解决方案，那么我知道该怎么做，只是不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:41:21.573

您可以在那里添加一个**灵活的空格键按钮项**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:42:46.403

看看关于添加灵活空间的其他 Stack Overflow 文章：

[如何以编程方式创建固定空间和灵活的空格键按钮项？](https://stackoverflow.com/questions/3663058/how-to-create-fixed-space-and-flexible-space-bar-button-items-programmatically)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:30:40.177

将 UIBarButtonItem 放置在指定位置之间。然后转到您的 xib 的 Inspector，然后转到 Attribute，在 Identifier 选项中选择 Flexible space 选项。

# c# - 在不同的计算机上运行 activeX 控件时出错

> ID：12399072
> 
> 赞同：0
> 
> 时间：2012-09-13T03:36:59.967
> 
> 标签：c#, activex

我已经在 Delphi 中实现了我的 activeX 控件。我已经构建了 ac# 应用程序来嵌入它。它在我的电脑上运行良好。之后，我将所有c#解决方案与我的ocx文件复制并粘贴到另一台计算机上，通过regsrv32.exe注册成功，添加到Visual Studio工具箱上的COM组件，再次编译并运行。它一直抱怨'

`System.Runtime.InteropServices.COMException (0x8000FFFF): Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED))`

我正在处理什么问题？我可能会做错什么？

# c# - 可为空的布尔值如何根据值在视图中显示不同的结果

> ID：12399074
> 
> 赞同：1
> 
> 时间：2012-09-13T03:37:03.320
> 
> 标签：c#, html, null, boolean, return-value

说我有模型属性`bool? IsCool`

所以我可能想显示 ' **Y** ' if`true`和 ' **N** ' if`false`

```
<span>@Model.IsCool == true ? Y : N</span> 
```

我认为这应该有效。

`option of '-'`但是，如果您希望显示第三个值（如果值为 ），如何让它工作`null`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:48:13.337

```
@(!Model.IsCool.HasValue ? "-" : Model.IsCool.Value ? "Y" : "N") 
```

HasValue 只是 Nullable 类型的私有布尔属性。当 Nullable 有值时，它设置为 true。而 Value 只是 T 类型的一个属性，对于“bool？” 它将是“布尔”：

```
 public T Value {
        get {
            if (!HasValue) { 
                ThrowHelper.ThrowInvalidOperationException(ExceptionResource.InvalidOperation_NoValue);
            } 
            return value; 
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:39:32.930

怎么样

```
<span>@(!Model.IsCool.HasValue ? '-' : (Model.IsCool.Value ? 'Y' : 'N')</span> 
```

它首先检查空值。如果为空，则显示 -

但如果它不为空，那么它会使用第二个三元运算符并根据其值显示 Y 或 N。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T03:40:02.543

```
<span>
    @(Model.IsCool == null ? "-" : ((bool)Model.IsCool) ? "Y" : "N")
</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T03:49:16.620

最好的方法是检查该属性是否有任何价值，然后使用它

```
@(Model.IsCool.HasValue ? (Model.IsCool.Value ? "Y" : "N") : "-" )) 
```

# c - C中的模拟树命令

> ID：12399076
> 
> 赞同：0
> 
> 时间：2012-09-13T03:37:07.223
> 
> 标签：c, linux, tree, command, simulation

我必须在 C 中创建树命令的模拟，这是我当前的代码：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <dirent.h>
#include <string.h>

main(int argc, char *argv[]){

int i;

if(argc < 2){
    printf("\nError. Use: %s directory\n", argv[0]);
    system("exit");
}
for(i=1;i<argc;i++)
    //if(argv[i][0] != '-')
        tree(argv[i]);
}

tree(char *ruta){

DIR *dirp;
struct dirent *dp;
static nivel = 0;
struct stat buf;
char fichero[256];
int i;

if((dirp = opendir(path)) == NULL){
    perror(path);
    return;
}

while((dp = readdir(dirp)) != NULL){
    printf(fichero, "%s/%s", path, dp->d_name);
    if((buf.st_mode & S_IFMT) == S_IFDIR){
        for(i=0;i<nivel;i++)
            printf("\t");
        printf("%s\n", dp->d_name);
        ++nivel;
        tree(fichero);
        --nivel;
    }

}
} 
```

显然，它有效！（由于它编译正确）但我不知道为什么。我无法传递正确的参数来执行此操作。非常感谢你们，人们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:01:14.693

我不确定“路径”是在哪里定义的，但您没有在任何地方使用“ruta”指针。我相信您应该对“ruta”进行一些处理以将其转换为路径或使用“ruta”而不是“path”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:07:24.663

1.  您必须`tree`在使用它或声明原型之前进行定义。
2.  `tree`并且`main`需要返回类型。
3.  `path`未定义并被`ruta`使用。想必这些应该是同一个东西。
4.  你永远不会打电话`stat`来填写`buf`你`dp`从`readdir`.

特别奖励：`nivel`是个坏主意。将它作为参数并将根级别传入 0 然后在对子项的每次调用中传入 pass 会更有意义`nivel+1`。

此外，“it compiles”没有说明“it works”，尤其是在 C 语言中。

# c - 在堆与堆栈上存储嵌套结构

> ID：12399080
> 
> 赞同：2
> 
> 时间：2012-09-13T03:38:00.250
> 
> 标签：c

我试图弄清楚堆上的结构和堆栈上的结构之间的区别。我有以下结构，用于书籍、作者和书架。Book 有多个作者，Shelf 有多个书籍。

```
struct Author {
    char name[NAME_LENGTH];
};

struct Book {
    char title[TITLE_LENGTH];
    struct Author authors[AUTHORS_PER_BOOK];
    int author_count;
};

struct Shelf {
    struct Book books[BOOKS_PER_SHELF];
    int book_count;
}; 
```

我有一堆创建 Author 和 Book 结构的函数，具有指定的名称和标题。还有一个添加作者到书的功能。我知道 C 是严格按值传递的，所以我在 add_authors_to_book 函数中使用了指向书的指针。这些函数是在本地创建的，我假设它们在堆栈上（？）。

```
struct Author new_author(char name[]) {
    struct Author author;
    strcpy(author.name, name);

    return author;
}

struct Book new_book(char title[]) {
    struct Book book;
    strcpy(book.title, title);

    book.author_count = 0;

    return book;
}

void print_book(struct Book book) {
    printf("%s\nby", book.title);
    int i, n;
    for (i = 0, n = book.author_count; i < n; i++) {
        printf(" %s,", book.authors[i].name);
    }

    printf("\b.\n");
}

void add_author_to_book(struct Book *book, struct Author author) {
    book->authors[book->author_count] = author;
    book->author_count++;
} 
```

我希望架子在堆上。我正在为它分配内存并在下面释放它。

```
struct Shelf *new_shelf() {
    struct Shelf *shelf = malloc(sizeof(struct Shelf));
    shelf->book_count = 0;

    return shelf;
}

void delete_shelf(struct Shelf *shelf) {
    free(shelf);
}

void print_shelf(struct Shelf *shelf) {
    printf("Shelf has the %d book(s),\n", shelf->book_count);
    int i, n;
    for (i = 0, n = shelf->book_count; i < n; i++) {
        print_book(shelf->books[i]);
    }
} 
```

> > 我的问题是关于将书籍添加到书架上。下面我将 book 结构分配给书架的最后一个索引处的书。这个结构书在哪里，在堆上还是在栈上？将 C 传递给 add_book_to_shelf 时会自动创建整个 Book 结构的克隆，包括作者？值传递是否适用于这样的嵌套结构？
> > 
> > 另外，您如何释放书籍及其作者使用的内存？

```
void add_book_to_shelf(struct Shelf *shelf, struct Book book) {
    shelf->books[shelf->book_count] = book;
    shelf->book_count++;
} 
```

这是我的测试代码，

```
int main(int argc, char *argv[]) {
    struct Shelf *shelf = new_shelf();

    struct Book book = new_book("Freakonomics");
    add_author_to_book(&book, new_author("Stephen Dubner"));
    add_author_to_book(&book, new_author("Steven Levitt"));

    add_book_to_shelf(shelf, book);

    print_shelf(shelf);
    delete_shelf(shelf);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:45:14.967

答案是书本身就在书架上。由于您将书架结构声明为直接包含书籍，因此它包含在其中存储书籍所需的完整空间。因此，将书分配到书架实际上会将其值复制到书架中。因此，如果书架在堆栈上，则书将在堆栈上，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:39:41.350

关于您对 free() 的使用，只需 free(shelf) 即可用于您的测试代码。Shelf 是一个指针，其数据被动态分配到堆中，这就是为什么需要使用 free() 删除它的原因。您不必使用 free(shelf->books[i]) 因为您没有动态分配 books 数组。您在数组中自动声明 BOOKS_PER_SHELF 元素。这对于内存管理可能效率不高，但它使您的取消分配非常简单和可读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T03:44:45.390

您正在复制 add_book_to_shelf 中的书，这意味着它将在堆上。

您在 main 中创建的书将在堆栈上，（因为它是一个自动变量），但在 add_book_to_shelf 中，该书被复制到书数组中，该数组作为堆上书架的一部分分配。

# database-design - 查找表是否应该包含在概念数据库模型中？

> ID：12399084
> 
> 赞同：0
> 
> 时间：2012-09-13T03:38:24.180
> 
> 标签：database-design

查找表是否应该包含在 UML 概念数据库模型中？（我会将它们包含在我的逻辑模型中）。

例如，如果我正在处理一个记录我的团队参与的项目详细信息的数据库......并且有一个已知的“项目状态”列表 - 将：

PROJECT (1..1) -> HAS -> (1..1) PROJECT_STATUS 有效吗？

（PROJECT_STATUS 实体在物理实现时只会存储一个 ID 和一个状态描述）

干杯，米奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:45:20.100

不。如何存储项目状态的实现细节对于理解将“项目”类型的对象存储在数据库中的*概念*并不重要。

# linux - CURL 用于访问需要从其他页面登录的页面

> ID：12399087
> 
> 赞同：139
> 
> 时间：2012-09-13T03:38:52.930
> 
> 标签：linux, bash, cookies, curl, http-authentication

我有 2 页：`xyz.com/a`和`xyz.com/b`. `xyz.com/b`只有当且仅当我首先登录时，我才能访问`xyz.com/a`。如果`xyz.com/b`不通过另一个访问，我只是通过浏览器拒绝访问（不重定向到登录）。一旦我登录`xyz.com/a`，我可以访问另一个。

我的问题是使用 curl 命令执行此操作。我可以`xyz.com/a`使用 curl 成功登录，但随后尝试`xyx.com/b`访问被拒绝。

我使用以下内容：

```
curl --user user:pass https://xyz.com/a  #works ok
curl https://xyz.com/b #doesn't work 
```

我已经尝试使用带有 & 而没有用户/密码部分的第二行，但仍然无法正常工作。两个页面都使用相同的 CA，所以这不是问题。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-09-13T03:53:18.713

该网站可能使用[cookie](https://en.wikipedia.org/wiki/HTTP_cookie)来存储您的会话信息。当你跑

```
curl --user user:pass https://xyz.com/a  #works ok
curl https://xyz.com/b #doesn't work 
```

`curl`在两个单独的会话中运行两次。因此，当第二个命令运行时，第一个命令设置的 cookie 不可用；这就像您`a`在一个浏览器会话中登录页面，并尝试访问另一个浏览器中`b`的页面。

您需要做的是*保存*由第一个命令创建的 cookie：

```
curl --user user:pass --cookie-jar ./somefile https://xyz.com/a 
```

然后在运行第二个时将它们读回：

```
curl --cookie ./somefile https://xyz.com/b 
```

或者，您可以尝试在同一命令中下载这两个文件，我认为这将使用相同的 cookie。

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2017-02-03T16:30:14.270

此外，您可能希望通过浏览器登录并获取包含所有标题的命令，包括 cookie：

打开开发人员工具的网络选项卡，登录，导航到所需的页面，使用“复制为 cURL”。

![截屏](../Images/9fc3a1862067fdf9e440b4a86a753ba9.png)

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-09-13T03:45:52.427

经过一番谷歌搜索后，我发现了这个：

```
curl -c cookie.txt -d "LoginName=someuser" -d "password=somepass" https://oursite/a
curl -b cookie.txt https://oursite/b 
```

不知道它是否有效，但它可能会引导您朝着正确的方向前进。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-15T19:05:39.147

我的回答是@JoeMills 和@user 的一些先前回答的模型。

1.  获取`cURL`登录服务器的命令：

    *   加载网站的登录页面并打开开发者工具的网络面板
        *   在Firefox中，右键单击页面，选择“检查元素（Q）”并单击网络选项卡
    *   转到登录表单，输入用户名、密码并登录
    *   登录后，返回网络窗格并滚动到顶部以找到 POST 条目。右键单击并选择复制 -> 复制为 CURL
    *   将此粘贴到文本编辑器并在命令提示符下尝试此操作以查看它是否有效
        *   某些网站可能已经加固，会阻止这种类型的登录欺骗，需要以下更多步骤才能绕过。
2.  修改 cURL 命令以在登录后能够保存会话 cookie

    *   删除条目`-H 'Cookie: <somestuff>'`
    *   `curl`在开始之后添加`-c login_cookie.txt`
    *   尝试运行此更新的 curl 命令，您应该`'login_cookie.txt'`在同一文件夹中获得一个新文件
3.  使用要求您登录的新 cookie 调用新网页

    *   `curl -b login_cookie.txt <url_that_requires_log_in>`

我在 Ubuntu 20.04 上试过这个，它就像一个魅力。

# ajax - 跨域在 ie9 中将数据从 http 服务器发送到 https 服务器

> ID：12399088
> 
> 赞同：3
> 
> 时间：2012-09-13T03:38:58.047
> 
> 标签：ajax, internet-explorer-9, postmessage, xdomainrequest

我有用户输入的数据发布到不同的域和不同的协议。在做了一些阅读之后，我发现微软的`XDomainRequest`对象不允许跨域交互（不同的协议，端口，#7 [here](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx) .

我正在为 FF、Safari 和 Chrome（有效）进行标准 CORS AJAX 调用，并且我一直在尝试将 XDomainRequest 对象用于 IE9。

```
if ($.browser.msie && window.XDomainRequest) {
  var xdr = new XDomainRequest();
  xdr.open("post", "https://_url_here");
  xdr.send( post_data );
}else { $.ajax(params); } 
```

当我打开一个`https`版本的源站时，它成功地将数据发送到接收url，但它无法解析任何数据。`xdr.send(post_data);`“看起来”就像在发送它时，我无法找到相关信息或在控制台中看到它。我看着[这个](http://www.webdbg.com/test/xdm/httptohttps.asp)，但不太明白；控制台回应：`Unable to get value of the property 'postMessage': object is null or undefined`

```
if ($.browser.msie && window.XDomainRequest) {
  var domain = $("iframe").contentWindow;
  domain.postMessage( post_data );
  }else {
    $.ajax(params);
  } 
```

谁能给我一些帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:19:19.107

在此处下载脚本：[https ://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest)

在链接到 jquery 之后，但在您进行 ajax 调用的脚本之前，将其包含在您的 html 中。

以一种相当笨拙的方式，我使用这个脚本将请求发送到我在 heroku 上运行的应用程序（http -> http = 工作正常），然后在 heroku 站点上运行一个 sinatra 应用程序，然后将数据发送到 https 站点. 不漂亮，但它的工作原理。

# scala - 如果应用程序运行很长时间，则缺少类

> ID：12399089
> 
> 赞同：6
> 
> 时间：2012-09-13T03:39:06.360
> 
> 标签：scala, jvm, classloader, noclassdeffounderror

我有一个有趣的问题——如果我的应用程序运行了很长时间（> 20 小时），那么有时我会收到 NoClassDefFound 错误——似乎 JVM 决定无论如何都不会使用该类并 GCd 它。

更具体地说，这是一个示例：

```
object ErrorHandler extends PartialFunction[Throwable,Unit] {
  def isDefinedAt(t: Throwable) = true
  def apply(e: Throwable) =e match {
    // ... handle errors
  }
}

// somewhere else in the code...
try {
  // ... long running code, can take more than 20 hours to complete
} catch (ErrorHandler) 
```

我得到以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/rogach/avalanche/ErrorHandler$ 
```

如果该 try/catch 块运行的时间更短，那么一切都会按预期进行。

如果有人感兴趣，这里是有问题的代码库：[Avalanche](https://github.com/Rogach/avalanche)

我需要注意的是，我只在`Cent OS 5`使用 JRE 6u26 和 Scala 2.9.1 / 2.9.2 的机器上看到了这个和类似的问题。

这个问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:13:39.103

如果您在尝试初始化一个类时内存不足，您认为您会看到 OutOfMemory 还是 NoClassDef？

```
 //from initialize_impl
  if (NULL == message) {
    // Out of memory: can't create detailed error message
    THROW_MSG(vmSymbols::java_lang_NoClassDefFoundError(), className); 
```

您的代码可能引发 OOM，然后无法加载您的异常处理程序对象。

当然，还有其他可能的瞬态条件：网络中断，班级在网络驱动器上；或者你在测试期间清理了你的类目录。另一种可能性是您在不区分大小写的文件系统上构建了您的应用程序，并且正在使用异常命名的类文件在区分大小写的文件系统上进行测试。例如，如果您将对象“handler”更改为“Handler”而不删除 *.class，您仍然会看到“Handler.class”。（但我怀疑错误消息详细信息会包含名称冲突；当然，除非您是 OOM。）

我还没有机会尝试破坏 AbstractFileClassLoader；我之前的猜测如下：

值得解释的是，Avalanche 是一个构建工具，您运行一个 scalac 实例将 build.scala 编译为一个内存中的类文件，该类文件由 scalac 的 AbstractFileClassLoader 加载，其中“AbstractFile”是抽象。由于任何 build.scala 都与工具配置混为一谈，显然 AFCL 尊重类加载器委托是必不可少的。这似乎是真的，但我注意到它并没有首先委托给 getResourceAsStream 上的父级（正如快速测试所证实的那样）。可疑的是 findClass 使用了 classBytes，失败时调用 super，这是很好的 ScalaClassLoader，但它使用 getResourceAsStream 来加载 Foo.class。因此调用 findClass 可能会从父 CL 返回一个类（这是错误的），但如果已知父 CL 已经失败，这可能没有实际意义。因为它'

我不知道运行一天的 build.scala（或 av.scala）中有什么，但也许你已经通过行为不端的子类加载器加载了 Avalanche（重新），然后当它抛出时，CL 可以' t findClass 你的ErrorHandler。

# c# - 从命令行传递参数时 Devenv 崩溃

> ID：12399092
> 
> 赞同：2
> 
> 时间：2012-09-13T03:39:34.560
> 
> 标签：c#, .net, devenv

我正在从命令行使用以下命令

```
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe"  C:\testlocation\testsolution.sln /Rebuild "Debug" /project "testproject" /projectconfig "Debug" /out C:\test.sln.log 
```

但是，此命令会使 devenv 崩溃。没有任何内容写入 test.sln.log 文件。有人可以指出可能是什么情况吗？

[更新 1]

崩溃图像在[这里](http://s16.postimage.org/3putboved/Image_2.png)。如果我单击查看问题详细信息，这就是我得到的信息

> 问题签名：问题事件名称：APPCRASH 应用程序名称：devenv.exe 应用程序版本：10.0.30319.1 应用程序时间戳：4ba1fab3 故障模块名称：msenv.dll 故障模块版本：10.0.30319.1 故障模块时间戳：4ba1fd94 异常代码：c0000005 异常偏移量： 0030df30 操作系统版本：6.0.6001.2.1.0.256.1 区域设置 ID：1033 有关问题的其他信息：LCID：1033 阅读我们的隐私声明： http: [//go.microsoft.com/fwlink/ ?linkid=50163&clcid=0x0409](http://go.microsoft.com/fwlink/?linkid=50163&clcid=0x0409)

[更新2]我从解决方案文件中发现这是配置

> ```
>  Debug|Win32 = Debug|Win32
>     Debug|x64 = Debug|x64
>     Release|Win32 = Release|Win32
>     Release|x64 = Release|x64 
> ```

所以如果我只为调试（没有平台）构建它，devenv 应该像它对我一样崩溃吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:37:16.140

我遇到过同样的问题。看起来 /projectconfig 需要“Debug|Win32”，所以配置*和*平台的名称，用竖线字符分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:07:40.263

使用[err.exe](http://www.microsoft.com/en-us/download/details.aspx?id=985)似乎是一个安全问题：

> 对于十六进制 0xc0000005 / 十进制 -1073741819：
> STATUS_ACCESS_VIOLATION ntstatus.h
> “0x%08lx”处的指令引用了
> “0x%08lx”处的内存。内存不能是“%s”。
> USBD_STATUS_DEV_NOT_RESPONDING usb.h
> 为“c0000005”找到 2 个匹配项

确认您正在以管理员身份运行 Visual Studio 命令行提示符。

# php - 配置 MNPP nginx.conf 以使用 Codeigniter/PHP

> ID：12399094
> 
> 赞同：1
> 
> 时间：2012-09-13T03:39:55.100
> 
> 标签：php, codeigniter, nginx

我有一个标准的 Codeigniter 安装，但似乎无法让[MNPP (MySQL+Nginx+PHP+Python)](http://getmnpp.org/)识别它。我看到 MNPP 的公共文件夹中有一个 codeigniter 配置，但也无法让 MNPP 使用这些设置。

我已经让我的 Codeigniter 应用程序在 EC2 实例上使用 Nginx 工作，所以我的 Codeigniter 应用程序没有问题。

我也可以在 MNPP 上提供 PHP 页面、MySQL 和 memcache，所以这些也不是问题。有人可能会提出一些建议来指引我正确的方向吗？

仅供参考，这是我的 MNPP /Applications/MNPP/conf/nginx/nginx.conf 文件：[https](https://gist.github.com/3711660) ://gist.github.com/3711660 ，为简单起见，我已将其配置为仅包含我的 /Applications/MNPP/conf/ nginx/sites-enabled/默认文件：[https ://gist.github.com/3711653](https://gist.github.com/3711653)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:50:24.763

哇，这很简单。我回答了我自己的问题。

在我的“/Applications/MNPP/conf/nginx/sites-enabled/default”文件中，我需要做的就是切换 index.html 和 index.php b/c 的顺序 nginx 试图首先服务 index.html 和 b /c 提供了一个 index.html 页面，但它从未看到我的 codeigniter 应用程序 PHP 页面。

所以改变这个：

```
location / {
    root   /Applications/MNPP/Library/nginx/html;
    index  index.html index.php  index.htm;
} 
```

对此：

```
 location / {
    root   /Applications/MNPP/Library/nginx/html;
    index  index.php index.html index.htm;
} 
```

是什么工作。

# symfony1 - symfony 1.4.18 安装失败

> ID：12399098
> 
> 赞同：-1
> 
> 时间：2012-09-13T03:40:36.360
> 
> 标签：symfony1

对不起我之前的问题

我从安装手册中安装了 symfony 1.4.18 并完成，但没有找到 css 的问题

```
<link rel="stylesheet" type="text/css" media="screen" href="/mine/web/sf/sf_default/css/screen.css" /> 
```

当我搜索该文件 screen.css 在目录下时

```
lib/vendor/symfony/data/web/sf/sf_default 
```

所以当我从 index.php 文件中查看时，有这样的代码：

```
<?php
require_once(dirname(__FILE__).'/../config/ProjectConfiguration.class.php');
$configuration = ProjectConfiguration::getApplicationConfiguration('frontend', 'prod', false);
sfContext::createInstance($configuration)->dispatch(); 
```

我想做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:21:32.333

您应该将 /sf 别名添加到您的虚拟主机配置中。看看例子。

```
<VirtualHost *:80>
 ServerAdmin webmaster@example.com 
    DocumentRoot "C:\path\web"
    ServerName example.com
    ServerAlias www.example.com
 <Directory "C:\path\web">
     Options Indexes FollowSymLinks MultiViews
     AllowOverride All  
     Allow from All
 </Directory>

 Alias /sf "C:\path\lib\vendor\symfony\data\web\sf"
  <Directory "C:\pathlib\vendor\symfony\data\web\sf">
    AllowOverride All
    Allow from All
  </Directory>

    ErrorLog "logs/example.com-error.log"
    CustomLog "logs/example.com-access.log" common
</VirtualHost> 
```

# html - html中的get和post方法

> ID：12399105
> 
> 赞同：1
> 
> 时间：2012-09-13T03:42:51.903
> 
> 标签：html, http, post, get, httpwebrequest

这三个语句的含义是什么：

1.  如果使用 get 方法并且页面被刷新，则在再次提交请求之前不会提示。

2.  如果已发布查询的页面响应始终相同，则使用 GET 示例数据库搜索

3.  如果与处理表单相关的服务有副作用（例如，修改数据库或订阅服务），则方法应该是 POST。

我部分理解的第二个：当使用相同的关键字从数据库完成查询时会生成相同的结果。例如：“如何查找 IP 地址”每次在网站中都会生成相同的结果，直到有包含此字符串的新帖子（如何查找 IP 地址）。但是为什么使用 get 我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:51:54.300

了解您找到这些指南的上下文会有所帮助，但是：

如果有人重新加载由`POST`操作产生的页面，他们通常会得到一个确认对话框，例如“您要重新发送提交的数据吗？”，这对于具有副作用的操作是一个有用的警告，例如在一个数据库。例如，您不希望人们盲目地创建同一订单的多个副本。

如果有人重新加载由`GET`操作产生的页面，它将在没有任何进一步确认的情况下刷新，假设服务器上不会有潜在的不良副作用。

还有其他考虑。您可以创建指向`GET`请求的直接链接，但不能创建 a `POST`，并且`POST`数据不会存储在浏览器历史记录中（尽管可能存储在插件或表单填充器等其他东西中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T03:47:31.880

这些陈述似乎为何时使用 get 与 post 提供了指导。基本思想是get用于只读操作，post用于更新操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T03:48:54.547

GET 应该是幂等的——即无论你重复操作多少次，结果都是一样的。GET 操作本身不会导致服务/数据发生变化。例如，在堆栈溢出时加载线程。多次获取对后端服务没有影响。

另一方面，POST 可能会导致后端数据/服务发生变化。例如发布一条新消息到堆栈溢出。多次发布同一帖子将导致该消息被多次发布。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T03:53:03.293

它说如果有数据库的选择操作，然后执行 GET 操作，因为它不会更改任何数据或修改数据库中的但如果您使用删除或插入，这可能会随着 GET 改变，这不好，好像 Web Crawler 也做一些更改对任何网站都不利。

# numpy - Numpy 中 Scipy 模式功能的替代方案？

> ID：12399107
> 
> 赞同：9
> 
> 时间：2012-09-13T03:43:11.060
> 
> 标签：numpy, scipy, frequency, mode

在 numpy 中是否有另一种方法来实现 scipy.stats.mode 函数以沿轴获取 ndarrays 中最频繁的值？（不导入其他模块）即

```
import numpy as np
from scipy.stats import mode

a = np.array([[[ 0,  1,  2,  3,  4],
                  [ 5,  6,  7,  8,  9],
                  [10, 11, 12, 13, 14],
                  [15, 16, 17, 18, 19]],

                 [[ 0,  1,  2,  3,  4],
                  [ 5,  6,  7,  8,  9],
                  [10, 11, 12, 13, 14],
                  [15, 16, 17, 18, 19]],

                 [[40, 40, 42, 43, 44],
                  [45, 46, 47, 48, 49],
                  [50, 51, 52, 53, 54],
                  [55, 56, 57, 58, 59]]])

mode= mode(data, axis=0)
mode = mode[0]
print mode
>>>[ 0,  1,  2,  3,  4],
   [ 5,  6,  7,  8,  9],
   [10, 11, 12, 13, 14],
   [15, 16, 17, 18, 19] 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T03:48:44.537

该`scipy.stats.mode`函数是用这段代码定义的，它只依赖于numpy：

```
def mode(a, axis=0):
    scores = np.unique(np.ravel(a))       # get ALL unique values
    testshape = list(a.shape)
    testshape[axis] = 1
    oldmostfreq = np.zeros(testshape)
    oldcounts = np.zeros(testshape)

    for score in scores:
        template = (a == score)
        counts = np.expand_dims(np.sum(template, axis),axis)
        mostfrequent = np.where(counts > oldcounts, score, oldmostfreq)
        oldcounts = np.maximum(counts, oldcounts)
        oldmostfreq = mostfrequent

    return mostfrequent, oldcounts 
```

来源：[https ://github.com/scipy/scipy/blob/master/scipy/stats/stats.py#L609](https://github.com/scipy/scipy/blob/master/scipy/stats/stats.py#L609)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T17:51:33.080

如果您知道没有很多不同的值（相对于输入“itemArray”的大小），这样的事情可能会很有效：

```
uniqueValues = np.unique(itemArray).tolist()
uniqueCounts = [len(np.nonzero(itemArray == uv)[0])
                for uv in uniqueValues]

modeIdx = uniqueCounts.index(max(uniqueCounts))
mode = itemArray[modeIdx]

# All counts as a map
valueToCountMap = dict(zip(uniqueValues, uniqueCounts)) 
```

# javascript - html5 画布动画无法正常工作

> ID：12399109
> 
> 赞同：0
> 
> 时间：2012-09-13T03:43:19.203
> 
> 标签：javascript, class, for-loop, html5-canvas

所有的 javascript 都在`style.js`- [http://html5canvas.hoangminhdat.com](http://html5canvas.hoangminhdat.com)

可以看到蓝线在页面加载时出现，并在一定时间后迅速消失。我已经花了几个小时，并且尽我所能来调试它，但我没有改变任何东西来修复它。

这就是我所做的：

1.  我使用全局变量来创建红线。

2.  我摆脱了全局变量并创建了一个类（Circle）。我将对象存储在一个数组（圆圈）中，并使用这些对象的属性而不是变量。

3.  我成功申请了“circles”数组的第一个元素（circles[0]）。我添加了圆圈[1]。蓝线实际上在画布中出现了大约 1 秒钟，然后消失了……

我在我的代码中找不到任何错误。由于`circles[0]`作品，以及`circles[1]`作品在页面加载时的一小会儿。我相信我的代码可以正常运行。

嗯，我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:39:44.217

你的循环中有一些错误

> ```
> //use the position to make dots
> for (var i in points[j]) { ... } 
> ```

它抛出了很多错误。

我没有详细介绍，但它正在数组中寻找一些额外的项目。您可以在[此处](http://jsfiddle.net/jbalsas/hnPf2/2/)看到您的示例使用此更改

> ```
> //use the position to make dots
> var numPoints = points[j].length-1, i;
> for (i = 0;i<numPoints;i++) { 
> ```

也许您可以从那里找出所有代码中的确切错误...

# vb.net - LINQ 直接转换错误

> ID：12399114
> 
> 赞同：0
> 
> 时间：2012-09-13T03:44:09.587
> 
> 标签：vb.net, linq, casting

我正在使用两个表（A&B）来导出 B 中不存在的项目 A 的列表。

```
Dim results1 = From table1 In dt2 Where Not (From table2 In dt1 Where DirectCast(table2(0), String) = DirectCast(table1(0), String)).Any() Select DirectCast(table1(0), String) 
```

但我收到错误

```
Unable to cast object of type 'System.Double' to type 'System.String'. 
```

我需要在哪里进行转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:04:59.023

不要在此处使用“DirectCast” - 使用“table2(0).ToString()”或“CType”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:51:41.723

如果你喜欢 LINQ，为什么不考虑实体框架。它将您的表转换为强类型类，并将您的字段作为类的属性。在使用 LINQ 时增加了一些真正的简单性。

# asp.net-mvc-3 - 用于 mvc3 中的控制器的命名约定

> ID：12399116
> 
> 赞同：0
> 
> 时间：2012-09-13T03:44:33.677
> 
> 标签：asp.net-mvc-3

假设我们有一个名为 filmstar.com 的网站 家庭控制器应该是什么？它应该被命名为电影明星吗？其他动作应该是什么？如果我们有电影明星/演员链接。目前，当我点击演员链接时，它会打开以下网址： `filmstar/Home/Actors`。

那么这里最好的命名约定是什么？谁能详细描述一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:14:42.300

默认网址已缩短。所以你可以有一个 HomeController，Index 的默认操作将显示为 filmstar.com 的 url（因为默认值是隐藏的）。

您可以将相同的逻辑应用于其他控制器。所以，你可以有一个带有默认索引操作的 ActorsController，然后这个 url 显示为 filmstar.com/actors，以及一个带有默认索引操作的 FilmsController，它将响应 filmstar.com/films

将控制器名称视为事物的定义特征。以及如何处理它的动作。因此，如果您想编辑电影，您将拥有 filmstar.com/films/edit，如果您想创建一部新电影，您将拥有 filmstar.com/films/create。但是，由于默认索引是隐藏的，它不会显示在普通视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:48:27.340

路线应该是 /filmstart/actors 是的，您需要一个控制器 FilmStart 控制器，其方法返回 ActionResult Index 和 Actors

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:27:40.947

没有最好的命名约定，只有一个默认的“donain//”

可能您正在寻找 url 优化和 SEO，在这种情况下，您可以使用 global.asax 管理您的所有 url

```
RouteTable.Routes.MapRoute("Actors", "actors", new { controller = "Actors", action = "Index" } ); 
```

# android - 如何将字符串从活动传递到 Android 中的 ListActivity？

> ID：12399119
> 
> 赞同：0
> 
> 时间：2012-09-13T03:44:48.730
> 
> 标签：android, android-activity

我想将一个字符串从 Activity 传递给 Android 中的 ListActivity。当我使用普通的 Activty 到 Activity 字符串传递方法时，它给出了`NullPointerException`. 这是我试图做的。

活动

```
Intent intent = new Intent(CheckAvailability.this , ListAtmActivity.class);
intent.putExtra("key", b_name);
startActivity(intent); 
```

我试图从我的 ListActivity 中得到这个。

```
String brName=getIntent().getExtras().getString("key"); 
```

这对 Activity 工作正常。但它`NUllPointerException`在 ListActivity 中使用时会给出。

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:01:33.483

尝试使用Bundle，这将解决您的问题

```
Bundle d=new Bundle();
d.putString("KEY",Your_String); 
intent.putExtras(d);
startActivity(intent); 
```

现在在 ListActivity

```
String Your_String_Variable = getIntent().getStringExtra("KEY"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T05:26:16.623

可能是您的变量 b_name 为空，为避免`NUllPointerException`您可以将此变量声明为

```
String b_name=""; 
```

如果您的变量为空，那么它将给出`NUllPointerException`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T05:21:27.187

请使用下面的代码从 ListActivity 的 Intent 中获取值，它将解决您的问题。

```
Bundle bdl=getIntent().getExtras();
String mKey=bdl.getString("KEY"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T04:06:24.583

您的代码应该可以正常工作。作为替代方案，您还可以使用：

```
String brName=getIntent().getStringExtra("key"); 
```

# content-management-system - 如何在 IBM Content Manager 8.4 中找到 ItemType 的表

> ID：12399128
> 
> 赞同：0
> 
> 时间：2012-09-13T03:45:54.847
> 
> 标签：content-management-system, db2

给定项目类型名称，我如何在 IBM Content manager 8.4 Library Server 数据库中找到基础表？

数据库名称通常为 ICMNLSDB，Scehma 名称通常为 ICMADMIN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:55:11.810

要找到底层，首先针对 ICMADMIN 模式运行以下查询，将 $$ItemType$$ 替换为您的项目类型名称

```
SELECT k2.keywordcode comptypeid, k2.keywordname comptypename
FROM icmstnlskeywords k1, icmstnlskeywords k2, icmstcompdefs ct
WHERE k1.keywordclass = 2 
AND k1.keywordname = '$$ItemType$$' 
AND k1.keywordcode = ct.itemtypeid 
AND k2.keywordclass = 5 
AND k2.keywordcode = ct.componenttypeid 
AND k2.keywordname = '$$ItemType$$' 
```

COMPTYPEID 现在可用于查找您的表，表的约定是名称：

ICMADMIN.ICMUTnnnnn001

其中 nnnnn 是前一个查询中的 COMPTYPEID，前缀为前导零。这将给出生成 CMBItems 所需的属性和 id。这些详细信息可以在 IBM 网站上通过 google 表名找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-07T05:28:05.250

示例：项目类型 ICCFilesytem

第 1 步：从 icmstnlskeywords 表中获取 ComponentTypeId

询问：

```
select * from icmstnlskeywords where keywordclass=5 and keywordname = ‘ICCFilesytem;
//Result 1055 
```

第 2 步：使用表格 ICMUT（IBM Content Manager 用户表）表名

```
ComponentTypeId 1055
ICMUT01055001
where

ICMUT(Keyword)

01055(ComponentTypeId of 5 digit)

001(Segment Id by default 001) 
```

第 4 步：在 ICCFilesytem 中获取文档

询问：

```
Select * from ICMUT01055001; 
```

# php - 运行 Laravel 的工匠会话时出错：带有 pgSQL 的表

> ID：12399134
> 
> 赞同：2
> 
> 时间：2012-09-13T03:46:28.667
> 
> 标签：php, postgresql, postgresql-9.1, laravel

我只是从 Laravel 存储库克隆 git 并设置 pgSQL 数据库详细信息。接下来我尝试使用`artisan`来创建`session`表。

```
php artisan session:table 
```

但是，这给了我以下错误：

```
X-Powered-By: PHP/5.3.16
Content-type: text/html

<br />
<b>Fatal error</b>:  Uncaught exception 'Laravel\Database\Exception' with message 'SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation &quot;sessions&quot; does not exist
LINE 1: SELECT * FROM &quot;sessions&quot; WHERE &quot;id&quot; = $1 LIMIT 1
                      ^

SQL: SELECT * FROM &quot;sessions&quot; WHERE &quot;id&quot; = ? LIMIT 1

Bindings: array (
  0 =&gt; 'i8qwmexP1joUkSLDH7naRayJDiSrLFGQa4xeubgz',
)' in /home/dev/public_html/laravel/database/connection.php:263
Stack trace:
#0 /home/dev/public_html/laravel/database/connection.php(183): Laravel\Database\Connection-&gt;execute('SELECT * FROM &quot;...', Array)
#1 /home/dev/public_html/laravel/database/query.php(648): Laravel\Database\Connection-&gt;query('SELECT * FROM &quot;...', Array)
#2 /home/dev/public_html/laravel/database/query.php(592): Laravel\Database\Query-&gt;get(Array)
#3 /home/dev/public_html/laravel/database/query.php(563): Laravel\Database\Query-&gt;first(Array)
#4 /home/dev/public_html/laravel/session/drivers/database.php(36): Laravel\Database\Query-&gt;find('i8qwmexP1joUkSL...')
#5 /home/dev/public_html/laravel/session/dri in <b>/home/dev/public_html/laravel/database/connection.php</b> on line <b>263</b><br /> 
```

当我将数据库驱动程序切换到时，`mysql`我收到以下消息：

```
X-Powered-By: PHP/5.3.16
Content-type: text/html

You forgot to provide the task name. 
```

执行 SQL 查询虽然有效，但`artisan`无效。

```
CREATE TABLE `sessions` (
     `id` VARCHAR(40) NOT NULL,
     `last_activity` INT(10) NOT NULL,
     `data` TEXT NOT NULL,
     PRIMARY KEY (`id`)
); 
```

使用 pgSQL 驱动程序时，我应该如何解决这个错误？不知道这里出了什么问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-23T12:08:50.273

尝试从查询中删除单引号：

```
CREATE TABLE sessions (
    id VARCHAR(40) NOT NULL,
    last_activity INT(10) NOT NULL,
    data TEXT NOT NULL,
    PRIMARY KEY (id)
); 
```

# java - 日期时间在应用程序中正确但在 mysql [时区] 中错误

> ID：12399136
> 
> 赞同：4
> 
> 时间：2012-09-13T03:46:37.293
> 
> 标签：java, mysql, hibernate, convert-tz

问题：应用服务器中的正确时间，数据库中的错误。

我在中国，时区是 UTC+8 我使用休眠。实体定义如下（语言：Scala）

```
class CargoJournal {
    @Type(`type`="org.jadira.usertype.dateandtime.joda.PersistentLocalDateTime")
    var deliverTime: LocalDateTime = _

    @Temporal(TemporalType.TIMESTAMP)
    @Column(nullable=false)
    var logDate:Date = _
} 
```

我打开休眠日志，在我的应用服务器中查看以下内容。当前时间是 Thu Sep 13 11:08:44 CST 2012

```
insert into wms_history_cargo_journal (deliver_time, log_date)
binding parameter [1] as [TIMESTAMP] - 2012-09-13 11:08:44.25
binding parameter [2] as [TIMESTAMP] - Thu Sep 13 11:08:44 CST 2012 
```

在我的数据库服务器中：

```
mysql> select timediff(now(),convert_tz(now(),@@session.time_zone,'+00:00'));
+----------------------------------------------------------------+
| timediff(now(),convert_tz(now(),@@session.time_zone,'+00:00')) |
+----------------------------------------------------------------+
| 08:00:00                                                       |
+----------------------------------------------------------------+ 
```

所以mysql时区是对的。UTC+8

从mysql中选择后：

```
mysql> SELECT deliver_time, log_date FROM wms_history_cargo_journal;
+---------------------+---------------------+
| deliver_time        | log_date            |
+---------------------+---------------------+
| 2012-09-13 11:08:44 | 2012-09-13 03:08:44 |
+---------------------+---------------------+ 
```

log_date 错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:04:14.380

MySQL 中的列有哪些类型？我怀疑现在是 DATETIME。这种类型不存储“时刻”，它存储“时钟上的小时”，因此可以表示不同时区的不同时刻。

当 MySQL 驱动程序将 java.util.Date 写入 DATETIME 列时，它必须选择某个时区来写入“时钟小时”，因为相同的 java.util.Date 在不同的时区可能意味着不同的小时。它以 MySQL 服务器本地时区的形式存储小时。

LocalDateTime 没有这个问题，因为它就像 DATETIME。它代表时钟上的小时，而不是时间，因此年/月/日-小时/分钟/秒只存储在数据库中。注意休眠日志中的 LocalDateTime 按原样给出，而 Date 旁边有时区（“CST”）。

通常，最好始终以 UTC 格式存储时间，因此请使用 DateTime，而不是 Date 或 LocalDateTime。带有 jadira 转换器的 DateTime 始终将 DATETIME 存储/读取为 UTC。

# activerecord - mysql 上的 validate_uniqueness_of 和索引

> ID：12399137
> 
> 赞同：1
> 
> 时间：2012-09-13T03:46:44.860
> 
> 标签：activerecord, ruby-on-rails-3.2

我写了以下迁移：

```
class AddValidationsToAnimals < ActiveRecord::Migration
  def change
    add_index :animals, [:name, :user_id], :unique => true
  end
end 
```

行。然后，在我的模型中，我添加了以下验证：

```
validates_uniqueness_of :name, :scope => :user_id 
```

当我尝试添加会损害此规则的注册表时，除非在我看来收到一条漂亮的消息，否则我会遇到`RecordNotUnique`异常。

为什么？我该如何解决？

提前致谢。

* * *

```
 def create
    @animal = current_user.animals.new(params[:animal])
    @animal.valid?
    respond_to do |format|
      if @animal.save
        format.html { redirect_to @animal, notice: 'Animal registrado com sucesso.' }
        format.json { render json: @animal, status: :created, location: @animal }
      else
        format.html { render action: "new" }
        format.json { render json: @animal.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T00:21:01.410

请在此处粘贴您的方法代码。是普通的`object.save`吗？尝试在`object.valid?`之前调用并检查它是否正在返回`false`。

# sorting - Mathematica 8 中的“倒置”选择排序

> ID：12399140
> 
> 赞同：1
> 
> 时间：2012-09-13T03:46:53.393
> 
> 标签：sorting, wolfram-mathematica, selection

好吧，我在使用这段代码时遇到了问题，它是关于在 Mathematica 中编写选择排序算法，但是我的意思是倒置，而不是搜索最小的数字并将其放在列表的第一个位置，我需要搜索最大的一个并将其放在最后一个位置。我已经编写了这段代码，但由于我是 Mathematica 的新手，所以我找不到解决方案。它不对列表进行排序。非常感谢您的阅读，您的回答会很有帮助！

```
 L = {};
n = Input["Input the size of the list (a number): "];
For[i = 1, i <= n, m = Input["Input a number to place in the list:"]; 
 L = Append[L, m]; i++]
SelectSort[L] := 
 Module[{n = 1, temp, xi = L, j}, While[n <= Length@L, temp = xi[[n]];
   For[j = n, j <= Length@L, j++, If[xi[[j]] < temp, temp = xi[[j]]];];
   xi[[n ;;]] = {temp}~Join~
     Delete[xi[[n ;;]], First@Position[xi[[n ;;]], temp]];
   n++;];
  xi]
Print[L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:01:02.263

这是一个工作版本。在`SelectSort[]`函数中，我只需要将函数变量更改为模式变量，即`L_`. 除此之外，它似乎工作。

```
(* Function definition *)
SelectSort[L_] := Module[{n = 1, temp, xi = L, j},
  While[n <= Length@L,
   temp = xi[[n]];
   For[j = n, j <= Length@L, j++,
    If[xi[[j]] < temp, temp = xi[[j]]];
    ];
   xi[[n ;;]] = {temp}~Join~
     Delete[xi[[n ;;]], First@Position[xi[[n ;;]], temp]];
   n++;];
  xi]

(* Run section *)
L = {};
n = Input["Input the size of the list (a number): "];
For[i = 1, i <= n, m = Input["Input a number to place in the list:"];
 L = Append[L, m]; i++]
SelectSort[L]
Print[L] 
```

{3、3、5、7、8}

{8, 3, 5, 7, 3}

输出首先是来自 的排序列表`SelectSort[L]`，然后是原始输入列表`L`。

# heroku - Heroku 上的页面缓存有什么好的替代方案？

> ID：12399143
> 
> 赞同：1
> 
> 时间：2012-09-13T03:47:19.890
> 
> 标签：heroku, redis

我知道页面缓存在 heroku 上不是一个好的选择，因为每个 dyno 都有一个临时文件系统（所以他们不会共享文件并且每次重启都会被清除）。

所以我想知道最好的选择是什么。我有大量可能在传统页面缓存场景（比如 10GB-100GB）中生成的潜在文件，因此 redis/memcached 在这里似乎不是很好的选择。Redis 可以写入磁盘，但我的理解是，一旦超过它的内存容量，就不是开始读取磁盘的正确解决方案。

有没有人在这里找到一个好的解决方案？我在想也许是MongoStore。（以及一些与 redis 一起运行的方法，因为我在其他一些场景中使用 redis。）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T16:38:44.970

如果您的网站是 100% 静态内容并且永远不会是动态的，那么 S3 可能是一个不错的选择。然后，您可以为 s3 域创建一个 CNAME。这允许您在需要时利用 CloudFront。否则，100GB 必须进入数据库，然后由您的应用程序提取。

Heroku 的 cedar 堆栈允许[自定义 buildpacks](https://devcenter.heroku.com/articles/buildpacks)。[这是一个](https://github.com/essh/heroku-buildpack-nginx)供应商 nginx。如果您设想过渡到更动态的站点，这将是一件好事。

# javascript - Animate.CSS 重播？

> ID：12399145
> 
> 赞同：5
> 
> 时间：2012-09-13T03:47:27.447
> 
> 标签：javascript, jquery, css, animate.css

我有一个使用[Animate.CSS](http://daneden.me/animate/)的动画，如果用户愿意，我想重播它，但我尝试的方法不起作用。这是代码：

***HTML：***

```
 <div class="img-center">
       <img src="path.jpg" class="feature-image animated rotateInDownRight" />
    </div>
       <p class="textcenter">&nbsp;</p>
    <div class="img-center">
       <a href="#" id="replay">Replay</a>
    </div> 
```

***JS：***

```
var $j = jQuery.noConflict();
$j("#replay").click(function() {
    $j('.feature-image').removeClass('animated rotateInDownRight').addClass('animated rotateInDownRight');
}); 
```

我确实知道脚本本身可以工作，因为我可以在 Firebug 中看到它发生，但是动画不会再次动画。如何使用 Animate.CSS 实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T04:05:43.157

这只是一个猜测，但似乎 jQuery 在将其添加回之前并未“完成”删除该类。我知道这没有任何意义，但这就是 JavaScript 的工作方式。它可以在第一个函数的所有内容完成之前调用链中的下一个函数。我浏览了 Animate.CSS 网站上的代码，发现他们在动画功能中使用了超时。你也可以试试。这是他们的代码：

```
function testAnim(x) {
    $('#animateTest').removeClass().addClass(x);
    var wait = window.setTimeout( function(){
        $('#animateTest').removeClass()},
        1300
    );
} 
```

这与您正在做的完全一样，只是它等待动画完成，然后删除类。这样，当另一个类被重新添加时，它对标签来说是真正的“新”。这是一个稍微修改的函数：

```
function testAnim(elementId, animClasses) {
    $(elementId).addClass(animClasses);
    var wait = window.setTimeout( function(){
        $(elementId).removeClass(animClasses)},
        1300
    );
} 
```

请注意两件事：首先，此代码将允许您更改获取动画的元素。其次，在 1300 毫秒后删除添加的类。仍然不是 100%，但它可能会让你走得更远。

需要注意的是，如果对象上已经有一些动画类，它可能会破坏这个 JS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-19T06:47:20.103

[在animate.css 问题#3](https://github.com/daneden/animate.css/issues/3)中找到了正确答案

```
var $at = $('#animateTest').removeClass();  
//timeout is important !!
setTimeout(function(){ 
   $at.addClass('flash') 
}, 10); 
```

实际上，更简单的版本也可以避免使用 JQuery。

```
el.classList.remove('animated','flash');  
//timeout is important !!
setTimeout(function(){ 
   el.classList.add('animated','flash');
}, 10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T04:09:08.957

我相信这里的问题是，当我删除课程时，它会快速添加课程。以下是我解决此问题的方法：

（HTML 与上述问题相同）。

***JS：***

```
var $j = jQuery.noConflict();

window.setTimeout( function(){
   $j('.feature-image').removeClass('animated rotateInDownRight')},
1300);

$j("#replay").click(function() {
    $j('.feature-image').addClass('animated rotateInDownRight');
}); 
```

我相信正在发生的是 jQuery 代码正在快速删除和添加类。不管这个代码工作的原因是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-15T09:10:11.663

如果你愿意，你也可以试试这个支持[animate.css](https://github.com/daneden/animate.css)动画的 javaScript 端开发。这是一个使用示例。

```
 //Select the elements to animate and enjoy!
 var elt = document.querySelector("#notification") ;
 iJS.animate(elt, "shake") ;
 //it return an AnimationPlayer object
 //animation iteration and duration can also be indicated.
 var vivifyElt = iJS.animate(elt, "bounce", 3, 500) ;
 vivifyElt.onfinish = function(e) {
     //doSomething ...;
 }
 // less than 1500ms later...changed mind!
 vivifyElt.cancel(); 
```

看看[这里](https://github.com/tnga/lib.ijs)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-06T01:25:12.123

我的回答是*添加/删除*`css` `class`色调延迟的技巧：

```
$('#Box').removeClass('animated').hide().delay(1).queue(function() { 
        $(this).addClass('animated').show().dequeue();
}); 
```

您也可以在没有*隐藏/显示*方法的情况下对其进行测试：

```
$('#Box').removeClass('animated').delay(1).queue(function() { 
        $(this).addClass('animated').dequeue();
}); 
```

我填充它工作顺利，`chrome`但它有更多意想不到的延迟`FF`，所以你可以测试这个 js 超时：

```
$('#Box').removeClass('animated');  
setTimeout(function(){ 
    $('#Box').addClass('animated');
}, 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-09T15:40:06.767

这个解决方案依赖于 React `useEffect`，它相当干净，因为它避免了直接操作类名。

它并没有真正回答 OP 问题（似乎使用 jQuery），但它可能对许多使用 React 和 Animate CSS 库的人仍然有用。

```
 const [repeatAnimation, setRepeatAnimation] = useState<boolean>(true);

  /**
   * When the displayedFrom changes, replay the animations of the component.
   * It toggles the CSS classes injected in the component to force replaying the animations.
   * Uses a short timeout that isn't noticeable to the human eye, but is necessary for the toggle to work properly.
   */
  useEffect(() => {
    setRepeatAnimation(false);
    setTimeout(() => setRepeatAnimation(true), 100);
  }, [displayedFrom]);

  return (
    <div
      className={classnames('block-picker-menu', {
        'animate__animated': repeatAnimation,
        'animate__pulse': repeatAnimation,
      })}
  ...
  ) 
```

# xamarin.ios - MonoTouch.Dialog RadioGroup 摘要未更新

> ID：12399148
> 
> 赞同：0
> 
> 时间：2012-09-13T03:47:51.443
> 
> 标签：xamarin.ios, monotouch.dialog

我正在尝试使用 MonoTouch.Dialog 创建一个非常基本的 RadioGroup。在我在选项列表中选择一个项目并返回主视图后，RadioGroup 仍显示已选择默认值。但是，当我去选择另一个项目时，我之前选择的值仍然被选中。我在网上查看了几个示例，它们似乎都没有做任何特别的事情来使主视图反映新选择的值。我在做什么错/错过了什么？

这是我的代码的简化版本：

```
using System;
using MonoTouch.Dialog;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace TestApp
{
    public class MainSettings : DialogViewController
    {
        public MainSettings (UIViewController parent) : base (UITableViewStyle.Grouped, null)
        {
            Root = new RootElement ("Settings")
            {
                new Section("Cellular Network") 
                {
                    new RootElement("Refresh Data", new RadioGroup(2))
                    {
                        new Section()
                        {
                            new RadioElement("Every 5 Minutes"),
                            new RadioElement("Every 15 Minutes"),
                            new RadioElement("Every 30 Minutes"),
                            new RadioElement("Hourly"),
                            new RadioElement("Manually")
                        }
                    }
                }
            };
        }

        public override void ViewWillAppear (bool animated)
        {
            NavigationItem.RightBarButtonItem = new UIBarButtonItem ("Close", UIBarButtonItemStyle.Plain, delegate
            {
                DismissModalViewControllerAnimated (true);
            }
            );
        }
    }
} 
```

谢谢，兰迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:39:32.100

这比我最初想象的还要明显。我没有打电话给**base.ViewWillAppear**！

# sql - 汇总数据并获取 SUM 组

> ID：12399152
> 
> 赞同：3
> 
> 时间：2012-09-13T03:48:26.807
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有两张桌子：

```
**OrgPhysicianMappingtbl**
org varchar
physician varchar

**PhysicianDatatbl**
physician varchar
names varchar
datapoint int 
```

数据来自`OrgPhysicianMappingtbl`：

```
+---------+-----------+
|   org   | physician |
+---------+-----------+
| ABC123  | B032      |
| ABC123  | B023      |
| ABC123  | A022      |
| ABB443  | A32       |
| ABB332  | F23       |
| BVD222  | G23       |
| BVD222  | GG2       |
| BOS5223 | G4        |
+---------+-----------+ 
```

数据来自`PhysicianDatatbl`：

```
+------------+----------------------------------+-----------+
| physician  |              names               | datapoint |
+------------+----------------------------------+-----------+
| B032       | CASH                             | 68        |
| B032       | MEDICAID                         | 89        |
| B032       | ALL THIRD PARTY                  | 3,769     |
| B032       | WORKERS COMP                     | 39        |
| B032       | US SCRIPT (PROC-UNSP)            | 86        |
| B032       | MEDCO HLTH SOLUTIONS (PROC-UNSP) | 79        |
| B032       | BCBS WELLPOINT/ANTHEM/WEL UNSPEC | 76        |
| B032       | KY EMPLOYEES HLTH PLN/KEHP (KY)  | 62        |
| B032       | UHC/PAC/AARP MED PDP GENERAL(KY) | 52        |
| B032       | WELLCARE OF KENTUCKY (KY)        | 42        |
| B032       | CCRX MED PDP GENERAL (KY)        | 39        |
| B032       | WORKERS COMP - EMPLOYER          | 37        |
| B032       | HUMANA/CAREPLS MED D GENERAL(KY) | 27        |
| B032       | CIGNA MEDICARE RX PDP GNRL (KY)  | 26        |
| B023       | CASH                             | 167       |
| B023       | MEDICAID                         | 34        |
| B023       | ALL THIRD PARTY                  | 3,165     |
| B023       | WORKERS COMP                     | 56        |
| B023       | WORKERS COMP - EMPLOYER          | 50        |
| B023       | BLUE CHOICE PPO (TX)             | 48        |
| B023       | TRICARE HUMANA MILITARY SOUTH    | 47        |
| B023       | MEDCO HLTH SOLUTIONS (PROC-UNSP) | 32        |
| B023       | BROADSPIRE INC                   | 27        |
| B023       | ADVANCEPCS (PROC-UNSP)           | 27        |
| B023       | UNITED HLTHCARE-(TX) TEXAS       | 23        |
| B023       | HEALTHSPRING PDP (TX)            | 18        |
| B023       | AETNA INC.-(TX) HOUSTON          | 13        |
| B023       | WELLCARE MEDICARE D GENERAL(TX)  | 12        |
+------------+----------------------------------+-----------+ 
```

期望结果的例子：

```
+-----------+-----------------+-----------+
| org       |      names      | sum(datapoints|
+-----------+-----------------+-----------+
| ABC123    | CASH            | 236       |
| ABC123    | MEDICAID        | 123       |
| ABC123    | ALL THIRD PARTY | 6,933     |
| ABC123    | WORKERS COMP    | 94        |
| …         | …               | …         |
+-----------+-----------------+-----------+ 
```

我需要将我的数据汇总到 ORG 级别。每个 ORG 有多名医生。每个医生都有它`names`并`datapoints`与之相关。我想要的结果是所有`datapoints`汇总`names`到该`org`级别的总和。

有人可以让我开始吗？

这是我尝试过的：

```
select o.org,p.names,sum(p.datapoint)
from OrgPhysicianMappingtbl o
join PhysicianDatatbl p
on o.physician=p.physician
group by o.org,p.names 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:42:52.030

您可以使用[`GROUPING SETS`](http://blogs.msdn.com/b/craigfr/archive/2007/10/11/grouping-sets-in-sql-server-2008.aspx)：

```
select o.org, p.names, sum(p.datapoint)
from OrgPhysicianMappingtbl o 
inner join PhysicianDatatbl p
  on o.physician = p.physician
GROUP BY GROUPING SETS((o.org), (p.names)) 
```

# 见[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/f59c4/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T04:03:30.487

出色地！

```
SELECT o.org, p.names, sum(p.datapoint)
FROM OrgPhysicianMappingtbl o INNER JOIN PhysicianDatatbl p
     ON o.physician = p.physician
GROUP BY o.org, p.names 
```

[http://www.sqlfiddle.com/#!2/f59c4/1](http://www.sqlfiddle.com/#!2/f59c4/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T06:44:28.430

```
select o.org,p.names,sum(p.datapoint)
from OrgPhysicianMappingtbl o
join PhysicianDatatbl p
on o.physician=p.physician
group by o.org,p.names with ROLLUP 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T10:27:42.570

即使这也应该工作

```
SELECT org,names,TotalDP 
FROM(
    SELECT 
        o.org
        ,p.names
        ,TotalDP = SUM(p.datapoint) OVER(PARTITION BY o.org,p.names)
        ,Rn = ROW_NUMBER() OVER(PARTITION BY o.org,p.names ORDER BY (SELECT 1))
    FROM OrgPhysicianMappingtbl o
    JOIN PhysicianDatatbl p on o.physician=p.physician)X WHERE X.Rn = 1 
```

# sql - CURSOR 不适用于 SQL Server 中的 DECLARED 表

> ID：12399154
> 
> 赞同：1
> 
> 时间：2012-09-13T03:48:40.037
> 
> 标签：sql, sql-server, sql-server-2012

在我的 sql 代码中，我声明了一个表（A）并从数据库表（B）中向该表中插入了一些行。然后我必须从 A 中取出那些插入的行并将其放入 CURSOR 中，然后在我执行完之后`FETCH NEXT`仍然是`@@FETCH_STATUS`is `-1`。但 的期望值`@@FETCH_STATUS`为`0`。我在问题下面放了一个简化的代码。

我能知道这段代码有什么问题吗？我可以使用声明的表来填充`CURSOR`SQL 中的 s 还是必须从数据库中创建的表中填充游标。

```
// This is a code that goes inside a Stored Procedure.

AS
   DECLARE A TABLE (.........)// A table has same fields in table B
   DECLARE s INT

   WHILE EXISTS ( SELECT * FROM B WHERE ......)
   BEGIN
      BEGIN TRAN
      INSERT INTO A SELECT TOP 10 (....)FROM B WITH (UPDLOCK, HOLDLOCK) WHERE ....

      SELECT s = count(*) from A // this returns some value which means inserting is working 
      DECLARE  dataSet CURSOR FOR (SELECT..... FROM A)
      OPEN dataSet
      FETCH NEXT FROM dataSet INTO ...

       WHILE @@FETCH_STATUS = 0 // coming value for this is -1
       BEGIN
          //Code goes here
          FETCH NEXT FROM dataSet INTO ...
        END

   CLOSE dataSet
   DEALLOCATE dataSet
   DELETE FROM A
   COMMIT TRAN
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:12:50.200

由于表 A 上的未提交事务，表 A 可能已被锁定。因此，对于您的数据集游标尝试-

```
select '' from A with (nolock) where ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:14:13.687

我认为创建临时表然后将其声明为游标，而不是必须有一个现有的表，如：

```
DECLARE cursor_name CURSOR FOR SELECT id INTO temp_table FROM user_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T06:47:30.113

这是 OPs 问题的可运行版本 - 但它没有显示问题。这不是答案，所以 CW，如果/当 OP 确实发布了一个实际示例，我将删除：

```
create table B (ID int not null,Val1 varchar(10) not null)
go
insert into B(ID,Val1) values (1,'abc'),(2,'ade')
go
create procedure DoStuff
AS
   DECLARE @A TABLE (ID int not null,Val1 varchar(10) not null)
   DECLARE @s INT

   WHILE EXISTS ( SELECT * FROM B WHERE Val1 like 'a%')
   BEGIN
      BEGIN TRAN
      INSERT INTO @A SELECT TOP 10 ID,Val1 FROM B WITH (UPDLOCK, HOLDLOCK) WHERE Val1 like 'a%'

      SELECT @s = count(*) from @A
      DECLARE dataSet CURSOR FOR (SELECT ID,Val1 FROM @A)
      declare @ID int
      declare @Val1 varchar(10)
      OPEN dataSet
      FETCH NEXT FROM dataSet INTO @ID,@Val1

       WHILE @@FETCH_STATUS = 0
       BEGIN
          RAISERROR('%i: %s',10,1,@ID,@Val1) WITH NOWAIT
          UPDATE B set Val1 = 'done' where ID = @ID
          FETCH NEXT FROM dataSet INTO @ID,@Val1
        END

   CLOSE dataSet
   DEALLOCATE dataSet
   DELETE FROM @A
   COMMIT TRAN
END
GO
EXEC DoStuff
GO
SELECT * from B 
```

输出：

```
(2 row(s) affected)

(2 row(s) affected)
1: abc

(1 row(s) affected)
2: ade

(1 row(s) affected)

(2 row(s) affected)

(2 row(s) affected) 
```

和表`B`：

```
ID  Val1
1   done
2   done 
```

# c# - 如何从 X509Store 加载受密码保护的证书？

> ID：12399156
> 
> 赞同：24
> 
> 时间：2012-09-13T03:48:45.083
> 
> 标签：c#, .net, x509certificate2, pfx

我正在构建一个受 ACS 保护的 Azure WCF 服务，该服务将要求客户端通过证书进行身份验证。

我希望客户端（和服务器）从 X509Store 而不是从文件系统加载各自的密码证书。

我正在使用这段代码：

```
private static X509Certificate2 GetCertificate(string thumbprint)
{
    var certStore = new X509Store(StoreName.My, StoreLocation.LocalMachine);
    certStore.Open(OpenFlags.ReadOnly);

    X509Certificate2Collection certCollection = certStore.Certificates.Find(
        X509FindType.FindByThumbprint,
        thumbprint, false);

    certStore.Close();

    if (certCollection.Count == 0)
    {
        throw new System.Security.SecurityException(string.Format(CultureInfo.InvariantCulture, "No certificate was found for thumbprint {0}", thumbprint));
    }

    return certCollection[0]; 
} 
```

问题是，它没有加载验证所需的私钥。我试图将return语句修改为：

```
return new X509Certificate2(certCollection[0].Export(X509ContentType.Pfx, "password")); 
```

但是，这会失败并出现 CryptographicException “指定的网络密码不正确”。

**编辑：** 如果您不传递密码参数， .Export() 方法可以正常工作。

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T04:07:12.127

导出时，您提供的密码是您要用于导出文件的密码，而不是源证书的密码。

我不确定您可以使用 X509Store 和受密码保护的证书做什么，因为密码应该提供给 X509Certificate 构造函数，并且您可以从存储中获取已经实例化的对象。

我*认为*您可以从您想要的证书中获取原始数据，并使用您想要的密码构建一个新数据。例如：

```
X509Certificate2 cert = new X509Certificate2(certCollection[0].GetRawCertData, password); 
```

`SecureString`我还建议您在处理密码时尝试使用（但这是一个不同的蠕虫包......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T00:46:43.773

我使用了没有“密码”参数的导出，它没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-16T13:00:39.743

将证书导入证书存储时，我认为必须将密钥标记为“可导出”，否则我认为您无法导出私钥..

[![在此处输入图像描述](../Images/56462c9a693e561502b3ce899332549e.png)](https://i.stack.imgur.com/2S7cx.png)

# windows-phone-7 - Windows phone 如何显示超出屏幕尺寸的元素

> ID：12399159
> 
> 赞同：0
> 
> 时间：2012-09-13T03:49:11.647
> 
> 标签：windows-phone-7

Windows 手机应用程序。我用两个 480px StackPanel 设置布局宽度 960px。首先，我可以看到第一个 StackPanel，我想转移布局以查看第二个 StackPanel，但我在第二个 StackPanel 中什么也没找到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:00:00.997

1）将两个堆栈面板放在一个父堆栈面板中并水平排列，并将父堆栈面板添加到一个`scrollviewer`与`horizontal scroll`打开。然后你可以水平滚动。

2）您也可以`Pivot/Panorama`用于此类场景。

# python - 用python处理时间字符串的更快方法

> ID：12399162
> 
> 赞同：0
> 
> 时间：2012-09-13T03:49:30.583
> 
> 标签：python

我有许多格式如下的日志文件：

```
2012-09-12 23:12:00 other logs here 
```

我需要提取时间字符串并比较两个日志记录之间的时间增量。我这样做了：

```
for line in log:
    l = line.strip().split()
    timelist = [int(n) for n in re.split("[- :]", l[0]+' ' + l[1])]
    #now the timelist looks like [2012,9,12,23,12,0] 
```

然后当我得到两条记录时

```
d1 = datetime.datetime(timelist1[0], timelist1[1], timelist1[2], timelist1[3], timelist1[4], timelist1[5])
d2 = datetime.datetime(timelist2[0], timelist2[1], timelist2[2], timelist2[3], timelist2[4], timelist2[5])
delta = (d2-d1).seconds 
```

问题是它运行缓慢，有没有办法提高性能？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:54:56.707

您可以摆脱正则表达式并使用`map`：

```
date_time = datetime.datetime

for line in log:
    date, time = line.strip().split(' ', 2)[:2]

    timelist = map(int, date.split('-') + time.split(':'))
    d = date_time(*timelist) 
```

*   我*认为* `.split(' ', 2)`会比仅仅`.split()`因为它只分裂两次而且只在空格上而不是在任何空格上更快。
*   `map(int, l)`比`[int(x) for x in l]`我上次检查时要快。
*   如果可以，请摆脱`.strip()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:02:40.607

您可以完全使用正则表达式来完成它，这可能会更快。

```
find_time = re.compile("^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})")

for line in log:
    timelist = find_time.match(line)
    if timelist:
        d = datetime.datetime(*map(int, timelist.groups())) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:03:14.147

您也可以尝试不使用正则表达式，使用可选参数`split`

```
(date, time, log) = line.split(" ", 2)
timerecord = datetime.datetime.strptime(date+" "+time, "%Y-%m-%d %H:%M:%S") 
```

然后就是计算你的`timedeltas`连续`timerecord`s之间的问题

# jquery - 在 jQuery 项目中定位绝对与 div 高度

> ID：12399166
> 
> 赞同：0
> 
> 时间：2012-09-13T03:50:11.037
> 
> 标签：jquery

我有这个项目，各种各样的人一直在这里帮助我，我有一个小问题，如果你在我的项目中看到这里：http: [//jsfiddle.net/webmonkeycch/4JACw/3/](http://jsfiddle.net/webmonkeycch/4JACw/3/)红线表示页脚 div一个站点，因为框架是绝对定位的，所以红线会跳到上面。现在我明白你不能测量绝对定位的东西的高度，并假设内容区域会根据内容改变高度，所以我想知道是否有更好的方法或重新创建 jquery 项目本身。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:45:04.133

一个快速的解决方法是添加`margin-top:24px;`到 .redBlock css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:21:04.997

尝试给出位置：相对于 cont2 类。

[http://jsfiddle.net/4JACw/8/](http://jsfiddle.net/4JACw/8/)。希望这有效。

# memory-management - What happens when the kernel memory required exceeds 1 GB

> ID：12399167
> 
> 赞同：2
> 
> 时间：2012-09-13T03:50:17.180
> 
> 标签：memory-management, linux-kernel

I am trying to understand 'Memory Management' in Linux as a part of the course in 'Understanding the Linux Kernel' by Daniel and Marco. Below is my understanding of the Kernel space

1.  On a 32-bit machine, each process has 4GB virtual address space. 3GB - User and 1GB - Kernel space.
2.  The 1 GB is shared among processes and directly mapped to 1 GB of RAM. This space is used to store kernel code, Page tables etc.
3.  The 1 GB cannot be swapped out. Although, it can be freed.

My question is, what if the total kernel space required by processes exceeds 1 GB?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T05:23:38.887

First, a correction - the (almost) 1Gb the kernel has mapped in a 1:1 is not used exclusively by the kernel. It's just that the kernel has the easiest access to that memory. it does hold the kernel code and static data.

The kernel virtual space actually has something like 256 Mb (the number is dynamic) at the top of the virtual address space (top of the 1Gb the kernel uses) that is not mapped 1:1 like the rest of the kernel linear addresses, but instead mapped dynamically to various pages - either in to get a virtual continuous region out of non contiguous physical memory by vmalloc, or to map memory mapped IO by ioremap or to get access to higher then 1Gb pages via kmap.

So to sum up - when the kernel needs access to more memory then the (almost) 1Gb it has always mapped in a 1:1 setting it uses dynamic memory just like user space.

# android - 如何在后台运行android应用程序

> ID：12399170
> 
> 赞同：8
> 
> 时间：2012-09-13T03:51:29.910
> 
> 标签：android

> **可能重复：**
> [如何在 android 的后台运行应用程序？](https://stackoverflow.com/questions/7214825/how-to-run-application-in-background-in-android)

如果我的位置纬度和经度等于数据库移动配置文件中的相同位置，我正在使用位置管理器进行项目应该进入静默模式。所以我需要使用位置管理器继续更新我的位置。我做到了。但如果我关闭我的应用程序无法正常工作。但是即使我关闭了我的应用程序，我的应用程序也应该可以工作。我在关闭应用程序时尝试了异步任务，但是在我手动切换到响亮模式后，它不会变为静音。当我的应用程序在后台运行时，我也应该收到通知..请提前帮助.tks

这是我的代码

```
public class ShowLocationActivity extends Activity implements LocationListener {
      private TextView latituteField;
      private TextView longitudeField;
      private LocationManager locationManager;
      private String provider;
      double lat,lng;
      Location location;
      AudioManager mobilemode ;
        private Boolean flag = false;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.location);
        latituteField = (TextView) findViewById(R.id.TextView02);
        longitudeField = (TextView) findViewById(R.id.TextView04);
        mobilemode = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
        // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        location = locationManager.getLastKnownLocation(provider);

        // Initialize the location fields

        flag = displayGpsStatus();
        if (flag) {

        if (location != null) {
          System.out.println("Provider " + provider + " has been selected.");
          onLocationChanged(location);

          if((lat==12.905478)&&(lng==80.093358))
        {
            mobilemode.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);

            Toast.makeText(getBaseContext(),"VIBRATE profile activated ",Toast.LENGTH_SHORT).show();

        }
        else if ((lat==12.90080625)&&(lng==80.09210655))
        {
            mobilemode.setRingerMode(AudioManager.RINGER_MODE_SILENT);

            Toast.makeText(getBaseContext(),"SILENT profile activated !",Toast.LENGTH_SHORT).show();
            //notification.setLatestEventInfo(ShowLocationActivity.this, "changed to silent mode", "because u r in office", pendingIntent);
              //  notificationManager.notify(i, notification);
        }
        else
        {
           mobilemode.setRingerMode(AudioManager.RINGER_MODE_NORMAL);

            Toast.makeText(getBaseContext(),"LOUD profile activated !",Toast.LENGTH_SHORT).show();
        }

        }

        else {
          latituteField.setText("Location not available");
          longitudeField.setText("Location not available");
        }
    }
        else {
            alertbox("Gps Status!!", "Your GPS is: OFF");
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.location, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.menu_settings:
                 Intent intent = new Intent( ShowLocationActivity.this,SetPreference.class);
                 startActivityForResult(intent, 0);
                 checkPref();
                 return true;

            default:
                return super.onOptionsItemSelected(item);
             }

        }

      private void checkPref(){

          SharedPreferences myPref

          = PreferenceManager.getDefaultSharedPreferences(ShowLocationActivity.this);

          String _pref =

                  "Option 1: " +  myPref.getBoolean("pref_opt1", true);

      }

      @Override

      protected void onActivityResult(int requestCode, int resultCode, Intent data) {

          // TODO Auto-generated method stub

          super.onActivityResult(requestCode, resultCode, data);

          checkPref();

      }
    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        lat = (double) (location.getLatitude());
         lng = (double) (location.getLongitude());
        latituteField.setText(String.valueOf(lat));
        longitudeField.setText(String.valueOf(lng));

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
         Toast.makeText(this, "Disabled provider " + provider,
                    Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
     @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
      }

      @Override
      protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
      }

      public void rrr(View v)
      {

          DownloadTask n= new DownloadTask();
             n.doInBackground();
      }
      public void onDestroy()
      {
          super.onDestroy();
          Log.v("hhh","on destroy");
             DownloadTask n= new DownloadTask();
             n.doInBackground();
      }

      public Boolean displayGpsStatus() {
            ContentResolver contentResolver = getBaseContext().getContentResolver();
            boolean gpsStatus = Settings.Secure.isLocationProviderEnabled(
                    contentResolver, LocationManager.GPS_PROVIDER);
            if (gpsStatus) {
                return true;

            } else {
                return false;
            }
        }

        /*----------Method to create an AlertBox ------------- */
        protected void alertbox(String title, String mymessage) {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Your Device's GPS is Disable")
                    .setCancelable(false)
                    .setTitle("** Gps Status **")
                    .setPositiveButton("Gps On",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int id) {
                                    // finish the current activity
                                    // AlertBoxAdvance.this.finish();
                                    Intent myIntent = new Intent(
                                            Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                                    startActivity(myIntent);
                                    dialog.cancel();
                                }
                            })
                    .setNegativeButton("Cancel",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int id) {
                                    // cancel the dialog box
                                    dialog.cancel();
                                }
                            });
            AlertDialog alert = builder.create();
            alert.show();
        }

    public class DownloadTask extends AsyncTask<Integer, Integer, Void> {

        @Override
        protected Void doInBackground(Integer... params) {

            Log.v("hhh","back");
            onCreate(null);
            // onLocationChanged(location);
            /*
            lat = (double) (location.getLatitude());
             lng = (double) (location.getLongitude());
            latituteField.setText(String.valueOf(lat));
            longitudeField.setText(String.valueOf(lng));

            if (location != null) {
                  System.out.println("Provider " + provider + " has been selected.");
                  onLocationChanged(location);

                  if((lat==12.905478)&&(lng==80.093358))
                {
                    mobilemode.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);

                    Toast.makeText(getBaseContext(),"VIBRATE profile activated ",Toast.LENGTH_SHORT).show();

                }
                else if ((lat==12.90080625)&&(lng==80.09210655))
                {
                    mobilemode.setRingerMode(AudioManager.RINGER_MODE_SILENT);

                    Toast.makeText(getBaseContext(),"SILENT profile activated !",Toast.LENGTH_SHORT).show();
                    //notification.setLatestEventInfo(ShowLocationActivity.this, "changed to silent mode", "because u r in office", pendingIntent);
                      //  notificationManager.notify(i, notification);
                }
                else
                {
                   mobilemode.setRingerMode(AudioManager.RINGER_MODE_NORMAL);

                    Toast.makeText(getBaseContext(),"LOUD profile activated !",Toast.LENGTH_SHORT).show();
                }

                }

                else {
                  latituteField.setText("Location not available");
                  longitudeField.setText("Location not available");
                }

            // TODO Auto-generated method stub

        */
            return null;
        }
}
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T03:56:49.307

您已经在 Activity 中编码，建议您将其更改为[Android Service](http://developer.android.com/reference/android/app/Service.html)。服务是在后台运行的组件，不与用户交互。

查看 Vogella 的[服务示例](http://www.vogella.com/articles/AndroidServices/article.html)。

只需将您的 Activity 代码转换为 Android 服务，它就可以在没有任何 GUI 的情况下在后台运行。

# c++ - 线程加载图像更快，直到它们在 Studio 中消失

> ID：12399173
> 
> 赞同：0
> 
> 时间：2012-09-13T03:52:41.887
> 
> 标签：c++, multithreading, visual-studio-2010, visual-studio, mfc

我对视觉工作室很陌生。我正在尝试加载图像并将其显示在具有两个按钮启动和停止的 UI 上。每次我完成我的总帧计数时，下一次按下开始时，我的图像加载速度比以前更快，最终图像的速度如此之快，以至于它们消失或显示为黑色。线程速度或图像加载时间随着每个周期的增加而增加。我怎样才能限制这个..或者在显示两个图像之间设置一个时间间隔。谢谢你。代码如下：

```
 void CmirrorImageDlg::OnBnClickedStart()
    {
        m_play = TRUE;
        CString num = NULL;
        num.Format(_T("Pause"));
        m_start.EnableWindow(false);
        m_stop.EnableWindow(true);
        m_stop.SetWindowTextW(num);
        m_pThread = AfxBeginThread(Operate, (LPVOID)this, THREAD_PRIORITY_NORMAL);

    }

    void CmirrorImageDlg::OnBnClickedStop()
    {
        m_play = FALSE;
        CString num = NULL;
        num.Format(_T("Resume"));
        m_start.EnableWindow(true);
        m_stop.EnableWindow(false);
        m_start.SetWindowTextW(num);
        m_count = 0;

        //m_pThread = AfxBeginThread(Operate, (LPVOID)this, THREAD_PRIORITY_ABOVE_NORMAL);
        // TODO: Add your control notification handler code here
    }

UINT CmirrorImageDlg::Operate(LPVOID param)
{
    CmirrorImageDlg* pDlg = (CmirrorImageDlg*) param;

    CString test;
    while ( pDlg->m_play && pDlg->m_count < TOTAL_FRAME_NUMBER)
    {
        test.Format(_T("images/%.4d.BMP"),pDlg->m_count);

        pDlg->hbitmap = (HBITMAP)LoadImage(NULL,test,IMAGE_BITMAP,0,0,LR_LOADFROMFILE);

        pDlg->inv_hbitmap = pDlg->GetInvertedBitmap(pDlg->hbitmap, TRUE); 
        pDlg->inv_hbitmap_1 = pDlg->GetInvertedBitmap(pDlg->hbitmap , FALSE);
        //CBitmap map = LoadBitmapW(test);
        //filePath = IDB_BITMAP1;
        //filePath++;

        //IDB_PICTURE2.LoadBitmapW(filePath);
        pDlg->m_picture.SetBitmap(pDlg->hbitmap);
        pDlg->m_picture_2.SetBitmap(pDlg->inv_hbitmap);
        pDlg->m_picture_3.SetBitmap(pDlg->inv_hbitmap_1);

        CString num = NULL;
        num.Format(_T("%d"),pDlg->m_count);
        pDlg->m_label.SetWindowTextW(num);
        // TODO: Add your control notification handler code here
        pDlg->m_count++;

    }
    if(pDlg->m_count >= TOTAL_FRAME_NUMBER)
    {
        CString num = NULL;
        num.Format(_T("%d"),0);

        pDlg->m_count = 0;
        pDlg->m_play= false;
        pDlg->m_label.SetWindowTextW(num);

        pDlg->m_picture.SetBitmap(NULL);
        pDlg->m_picture_2.SetBitmap(NULL);
        pDlg->m_picture_3.SetBitmap(NULL);

        CString num1 = NULL;
        num.Format(_T("Stop"));
        pDlg->m_start.EnableWindow(true);
        pDlg->m_stop.EnableWindow(false);
        pDlg->m_stop.SetWindowTextW(num);
        num.Format(_T("Start"));
        pDlg->m_start.SetWindowTextW(num);
        //pDlg->m_pThread->SuspendThread();

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:17:39.340

一个相当简单的选择：

为您的对话框设置一个 WM_TIMER 以每 40 毫秒触发一次（如果您想要每秒 25 帧）。如果不播放，计时器处理程序将不执行任何操作。

当用户点击播放时，您将加载第一张图片，然后设置“正在播放”标志。在计时器处理程序中，它将获取当前加载的图像并将其blit到屏幕上，然后加载下一个图像并返回。当序列中没有更多图像时，您清除“正在播放”标志。

因为您总是在计时器触发时显示当前图像，所以加载下一张图像需要多长时间并不重要（只要您可以比播放速度更快）。

# android - 使用大星球sqlite数据库的离线地图

> ID：12399177
> 
> 赞同：3
> 
> 时间：2012-09-13T03:53:28.987
> 
> 标签：android, google-maps, offline

我是android开发的新手。我想开发离线谷歌地图。我使用 Mobile Atlas Creator 并创建**BigPlanet_maps.sqlitedb。** 但是我怎样才能在android开发中使用这个数据库呢？如何使用 BigPlanet_maps.sqlitedb 显示离线地图？还有另一种显示离线谷歌地图的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T15:37:25.513

BigPlanet 和 Osmdroid.ZIP 都是 MOBAC 的图集输出格式。如果您以 Osmdroid.ZIP 格式创建图集并在应用程序中使用[Osmdroid](http://code.google.com/p/osmdroid/) jar，则您可以具有离线功能。

Osmdroid 在功能上与谷歌地图非常相似。您需要做的就是将创建的 zip 文件放在手机上的 Osmdroid 文件夹中。Osmdroid 在尝试上网之前会在 zip 文件中查找特定的磁贴。我一直在为手机编写的应用程序中使用它。我在手机上的 zip 文件中有我附近的区域，它可以节省数据费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:01:45.903

据我所知，你不能用谷歌地图（[服务条款](https://developers.google.com/maps/documentation/android/maps-api-signup)）来做到这一点。看看[OSM](http://code.google.com/p/osmdroid/)！

# asp.net - 设置 asp.net 测试服务器

> ID：12399180
> 
> 赞同：1
> 
> 时间：2012-09-13T03:53:44.227
> 
> 标签：asp.net, vmware

我正在 asp.net MVC 4 中创建一个网站，并且想知道设置测试服务器的最佳方式？

我在家中进行此操作，并希望我的朋友有一种方法可以从不同的位置（他的家）测试我的代码。最好的方法是什么？建立一个他只能访问的本地服务器？虚拟机？在线虚拟主机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:16:03.023

一种解决方案是使用 VM 并设置服务器。笔记！这将要求您的朋友将您的 IP 地址重定向到您将在 VM 的 IIS 上为您的网站设置的主机名。他可以通过在 C:\Windows\System32\drivers\etc 更改他的主机轻松做到这一点

另一种选择实际上是购买一个域（无论如何你最终都会需要）购买一个托管包（你最终也将需要它）。然后在该托管服务器的子域上设置您的网站，例如 dev.myDomain.com

# javascript - Backbone - 无论如何要检查一个事件之前是否已经绑定过？

> ID：12399181
> 
> 赞同：1
> 
> 时间：2012-09-13T03:54:14.497
> 
> 标签：javascript, backbone.js

我在我的一个观点中这样做：

```
render: function($options) {
    ...

    this.collection.on('reset', _(function() {
        this.render($options);
    }).bind(this));

    ....
} 
```

问题是，只要`reset`触发了重新渲染，`reset`就会创建一个新的绑定，从而导致重新渲染的 2x、4x、8x 等次。

将绑定移动到初始化部分有点棘手（这应该可以解决这个问题），但是由于它不是一个选项，是否有任何其他可用的解决方案，比如让 Backbone 检查此事件之前是否已绑定，或者其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:48:47.257

将您的绑定移动到`initialize`最好，但假设您有充分的理由不这样做，您可以设置一个标志：

```
initialize: function() {
    var _this = this;
    this._finish_initializing = _.once(function($options) {
        _this.collection.on('reset', function() {
            _this.render($options);
        });
    });
    //...
},
render: function($options) {
    this._finish_initializing($options);
    //...
} 
```

有很多不同的方法来实现标志，[`_.once`](http://underscorejs.org/#once)只是很好地隐藏了标志检查。`render`您还可以在有一个解除绑定的侦听器时触发一个事件：

```
initialize: function() {
    var finish_initializing = function($options) {
        /* your binding goes here ... */
        this.off('render', finish_initializing);
    };
    this.on('render', finish_initializing, this);
},
render: function($options) {
    this.trigger('render', $options);
    //...
} 
```

这其实是同一个逻辑，只是穿了不同的衣服。您还可以使用显式标志和`if`in`render`或将函数分配给`this._finish`in`initialize`并且该函数将`delete this._finish`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-17T03:22:40.697

> 比如让 Backbone 检查这个事件之前是否已经绑定过，或者其他什么？

当然..

```
!!this.collection._events["render"] 
```

Backbone 没有公开使其有用所需的大部分 API。没关系，随便用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:31:44.687

首先，将您的事件处理函数定义为命名函数

```
var self = this;
var onReset = function() {
    self.render($options);
} 
```

然后，每次调用 render 时防御性地解除绑定函数

```
this.collection.off('reset', onReset);
this.collection.on('reset', onReset); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T06:00:51.973

我最近使用 javascript 变量完成了这项工作。

在任何功能之外，我声明：

```
var boundalready =0 
```

然后，在函数内部：

```
if (boundalready == 0){
      boundalready = 1;
      bind(this);
    }; 
```

这对我很有效。

# c# - MVC3 Ajax.BeginForm 不返回特定的部分视图

> ID：12399182
> 
> 赞同：4
> 
> 时间：2012-09-13T03:54:14.540
> 
> 标签：c#, asp.net-mvc-3, asp.net-ajax, asp.net-mvc-partialview

从 Ajax.BeginForm 方法调用 PartialView 时，我无法返回它。Ajax 调用如下。

```
@{
    ViewBag.Title = "ChargeCode 1";
    Layout = "~/Views/Shared/_Search_Layout.cshtml";
}

<div class="span9">
    <div class="page-header">
        <h1>Charge Code1</h1>
    </div>
        @using (Ajax.BeginForm("SearchChargeCode1", "ChargeCodeSearch", new AjaxOptions
        {
            UpdateTargetId = "searchResults",
            HttpMethod = "GET",
            InsertionMode = InsertionMode.Replace,
        }))
        {

            <input type="text" name="chargeCode1" class="input-medium search-query" />

            <input type="submit" class="btn" value="Search" />
            <button type="button" class="btn">Clear Results</button>

        }

    <table id="searchResults">

    </table>
</div> 
```

在文本框中输入参数后，单击提交按钮，然后将我带到 ChargeCodeSearchController 中的 SearchChargeCode1 partialviewresult 方法

```
public PartialViewResult SearchChargeCode1(string chargeCode1)
{
var chargecodes1 = db.ChargeCodes.Where(c => (!(String.IsNullOrEmpty(chargeCode1)) && c.NameChargeCode.Contains(chargeCode1))).Take(10);

return PartialView("ChargeCodeSearch/_FindChargeCodeSearchResults1", chargecodes1);
} 
```

然后它*应该*返回位于 Views 文件夹中以下位置的 _FindChargeCodeSearchResults1 视图：

```
Views  
->Shared  
->->ChargeCodeSearch  
->->->_FindChargeCodeSearchResults1 
```

它不是！

我在 PartialViewMethod 中放置了一个断点。它能够查询并找到一个结果列表并将其分配给chargecodes1变量，但是在它逐步执行代码的返回行之后，它只是返回到包含Ajax的视图，但它不会插入部分视图更新目标“searchResults”中的“ChargeCodeSearch/_FindChargeCodeSearchResults1”。

我在 Shared 下有一个 FirmSearch 和 MemberSearch 文件夹，它们执行完全相同的功能，但对象不同。那些工作。我不知道为什么这不起作用。

下面是应该返回的视图 _FindChargeCodeSearchResult1 的代码片段。创建此 cshtml 视图时，我将其创建为 PartialView。我没有为它分配母版页，也没有将它强输入到 ChargeCode 对象中。

```
@model IEnumerable<MLSMAS.Models.ChargeCode>
<table id="searchResults" class='table table-striped table-bordered table-condensed'>
    <thead>
        <tr>
            <th>ChargeCode ID</th>
            <th>ChargeCode Name</th>
            <th>ChargeCode Price</th>
            <th>Frequency</th>
            <th>ChargeCode Description</th>
            <th>Select</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.IdChargeCode)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.NameChargeCode)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Price)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Frequency)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DescChargeCode)
            </td>
            <td>
               <a href="" onclick="setChargeCode1('@item.IdMember' '@item.Price');" class="setChargeCode1">Select</a>
            </td>
         </tr>
    }   
    </tbody>
</table>
<script src="../../../Scripts/MLSMASJS.js" type="text/javascript"></script> 
```

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:13:47.033

Ajax.BeginForm 调用的操作不会返回任何部分视图，它会重新运行字符串，为此您需要捕获 ParttailView RenderHtml，因为 ParttailView 的返回类型是字符串。

在控制器中

```
public string SearchChargeCode1(string chargeCode1)
{
var chargecodes1 = db.ChargeCodes.Where(c => (!(String.IsNullOrEmpty(chargeCode1)) && c.NameChargeCode.Contains(chargeCode1))).Take(10);

string RenderHtml = RenderPartialViewToString("ChargeCodeSearch/_FindChargeCodeSearchResults1", chargecodes1);

 return RenderHtml ;
}

protected string RenderPartialViewToString(string viewName, object model)
        {
            if (string.IsNullOrEmpty(viewName))
                viewName = ControllerContext.RouteData.GetRequiredString("action");

            ViewData.Model = model;

            using (StringWriter sw = new StringWriter())
            {
                ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
                ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
                viewResult.View.Render(viewContext, sw);
                return sw.GetStringBuilder().ToString();
            }
        } 
```

**RenderPartialViewToString** 方法返回部分视图的 HtmlString。并将结果附加到 AjaxBeginForm "UpdateTargetId" 属性的指定位置。

# javascript - 我的模板没有被解析

> ID：12399185
> 
> 赞同：1
> 
> 时间：2012-09-13T03:55:11.407
> 
> 标签：javascript, angularjs

```
angular.module('dodgie', []).config(function($routeProvider){
    $routeProvider.when('/home', {template:'/partials/home.html', controller:dodgieCtrl   }).
      otherwise({redirectTo:'/home'});
});

function dodgieCtrl($scope, $location){
    $scope.doSearch = function(){
        if ( !$scope.newTodo.length ) {
          return;
        }
    };
}; 
```

的内容：

```
<div id="content" ng-view></div> 
```

而是：

```
 <span class="ng-scope">/partials/home.html</span> 
```

为什么我的部分没有被渲染？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T04:13:55.770

它看起来像一个错字尝试`templateUrl`而不是`template`：

```
angular.module('dodgie', []).config(function($routeProvider){
    $routeProvider.when('/home', {templateUrl:'/partials/home.html', controller:dodgieCtrl   }).
      otherwise({redirectTo:'/home'});
}); 
```

取自[文档](http://docs.angularjs.org/api/ng.%24routeProvider)：

*   template – {string=} – html 模板作为字符串，应该由 ngView 或 ngInclude 指令使用。此属性优先于 templateUrl。
*   templateUrl – {string=} – ngView 应该使用的 html 模板的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:16:17.000

如果您打算指定 url，请使用 'templateUrl' 而不是 'template'。

# c - c中的sscanf函数用法

> ID：12399186
> 
> 赞同：2
> 
> 时间：2012-09-13T03:55:33.350
> 
> 标签：c, scanf

我正在尝试使用以下方式解析`xxxxxx(xxxxx)`格式字符串：`sscanf`

```
sscanf(command, "%s(%s)", part1, part2) 
```

但似乎`sscanf`不支持这种格式，因此`part1`实际上包含整个字符串。

谁有这方面的经验请分享...

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T04:05:04.897

将代码转换为程序：

```
#include <stdio.h>

int main(void)
{
    char part1[32];
    char part2[32];
    char command[32] = "xxxxx(yyyy)";
    int n;

    if ((n = sscanf(command, "%s(%s)", part1, part2)) != 2)
        printf("Problem! n = %d\n", n);
    else
        printf("Part1 = <<%s>>; Part2 = <<%s>>\n", part1, part2);
    return 0;
} 
```

运行时，它会产生' `Problem! n = 1`'。

这是因为第一个`%s`转换说明符会跳过前导空白，然后扫描“非空白”字符直到下一个空白字符（或者，在这种情况下，是字符串的结尾）。

您需要使用（否定的）字符类或*扫描集*来获得您想要的结果：

```
#include <stdio.h>

int main(void)
{
    char part1[32];
    char part2[32];
    char command[32] = "xxxxx(yyyy)";
    int n;

    if ((n = sscanf(command, "%31[^(](%31[^)])", part1, part2)) != 2)
        printf("Problem! n = %d\n", n);
    else
        printf("Part1 = <<%s>>; Part2 = <<%s>>\n", part1, part2);
    return 0;
} 
```

这会产生：

```
Part1 = <<xxxxx>>; Part2 = <<yyyy>> 
```

注意格式中的 31；它们防止溢出。

* * *

> 我想知道 %31 是如何工作的。它是起到`%s`防止溢出的作用还是只是防止溢出？

使用给定的数据，这两行是等效的并且都足够安全：

```
 if ((n = sscanf(command, "%31[^(](%31[^)])", part1, part2)) != 2)
    if ((n = sscanf(command, "%[^(](%[^)])", part1, part2)) != 2) 
```

该`%[...]`符号是转换规范；也是`%31[...]`。

C标准说：

> 每个转换规范都由字符 % 引入。在 % 之后，依次出现以下内容：
> 
> *   一个可选的赋值抑制字符 *。
> *   一个大于零的可选十进制整数，指定最大字段宽度（以字符为单位）。
> *   一个可选的长度修饰符，指定接收对象的大小。
> *   一个转换说明符字符，它指定要应用的转换类型。

31 是（可选）最大字段宽度的示例。该`[...]`部分是一个*scanset*`s` ，它也许可以被视为转换说明符的一个特例。转换说明`%s`符大致等价于`%[^ \t\n]`。

31 比字符串的长度小一；最后的 null 不计入该长度。因为`part1`and`part2`都是 32 的数组`char`，所以`%31[^(]`or`%31[^)]`转换说明符防止缓冲区溢出。如果第一个字符串在 之前超过 31 个字符`(`，您将获得 1 的返回值，因为文字左括号不匹配。同样，第二个字符串将被限制为 31 个字符，但您无法轻易判断 是否`)`在正确的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T04:07:07.087

如果您确切知道“命令”的各个部分有多长，那么最简单的选择是：

```
sscanf(command, "%6s(%5s)", part1, part2); 
```

这假设“part1”始终为 6 个字符，“part2”始终为 5 个字符（如您的代码示例中所示）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T04:10:06.657

试试这个：

```
#include <stdio.h>

int main(void)
{
  char str1[20];
  char str2[20];
  sscanf("Hello(World!)", "%[^(](%[^)])", str1, str2);
  printf("str1=\"%s\", str2=\"%s\"\n", str1, str2);
  return 0;
} 
```

输出（[ideone](http://ideone.com/w8k74)）：

```
str1="Hello", str2="World!" 
```

# javascript - 单击编辑按钮时stackoverflow如何格式化textarea？

> ID：12399188
> 
> 赞同：6
> 
> 时间：2012-09-13T03:55:45.853
> 
> 标签：javascript, html, richtextbox, frontend, wmd

**这不是重复的问题，我知道如何创建富编辑器，但我遇到了问题**

我想制作一个像 stackoverflow 一样的富文本框。

1.  我像 SO 一样导入 wmd 插件。

2.  当我**将**主题保存到 mysql 时，它会保存处理后的文本，如下所示：

> <p>你好世界</p>
> 
> <pre><code>class Text{}</code></pre>

我认为这是正常的，因为 html 页面可以正确呈现。

但是当我尝试编辑这个主题时，**它会直接在我的 textarea 中显示代码**：

![在此处输入图像描述](../Images/f68092d89d169fecc0c42e2ffe699572.png)

**我需要的是这个（就像我第一次进入一样）：**

![在此处输入图像描述](../Images/5cbbab137600986100ccb35eb2d4fe16.png)

我的 textarea 代码非常简单，如下所示：

```
<!-- text area start -->
      <div id="wmd-button-bar"></div>
      <textarea id="wmd-input" name="description" onblur="checkForm()">${topic?.description}</textarea>
      <div id="wmd-preview"></div>
<!-- text area end --> 
```

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T04:17:27.217

我自己找到答案。

我需要做的只是在**wmd**处理之前添加一个新的隐藏字段来存储**原始文本。**

 **然后我将原始文本和处理后的文本都保存到我的数据库中。

当我需要编辑它时，只需使用原始文本。当我需要渲染它时，使用处理过的文本。**

# iphone - 由于 coredata 降级而崩溃

> ID：12399189
> 
> 赞同：1
> 
> 时间：2012-09-13T03:55:49.147
> 
> 标签：iphone, ios, core-data

我在我的应用程序中使用核心数据。我的应用程序的最新版本是v3.1.0，其核心数据模型版本是4。旧版本是v3.0.9，其核心数据模型版本是3。我的应用程序从3.1.0降级到3.0就是这种情况。 9，它崩溃了。如果我设置 v3.1.0 的当前核心数据模型版本 3，请将我的应用程序降级到 v3.0.9。它工作正常。所以我认为核心数据模型降级会导致崩溃。我该如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:19:48.907

如果在persistentStoreCoordinator 初始化期间发生架构不兼容错误，我只需删除现有存储即可解决问题。if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) { [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]; 这个问题只发生在越狱设备上，可以自由升级/降级应用程序。它帮助我了解了一些关于 sqlite 存储和核心数据模型之间的关系。希望这可以帮助：）

# ruby-on-rails - 轮胎宝石：在 Elasticsearch 中索引 Rails 父/子关系

> ID：12399191
> 
> 赞同：1
> 
> 时间：2012-09-13T03:56:01.360
> 
> 标签：ruby-on-rails, attachment, elasticsearch, tire

我很难理解 Tire 的语法、Elasticsearch 的语法以及它们是如何映射在一起的。

我已经通过轮胎成功地在 Rails 应用程序中索引了 PDF。但是我需要将完整的报告分解为单独的页面，以便查询可以更加细化。将 PDF 拆分为单独的页面并将它们添加到`belongs_to`完整报告模型的页面模型很容易。我正在努力的是如何设置映射以及在哪里？！？我想利用 Elasticsearch 的[Parent Field](http://www.elasticsearch.org/guide/reference/mapping/parent-field.html)映射来实现[这个](https://stackoverflow.com/questions/10854858/best-practices-for-searchable-archive-of-thousands-of-documents-pdf-and-or-xml)最终目标。

希望有人可以让我直截了当。

报告模型（如果我将整个 PDF 索引为 ，这对我有用`:attachment`）：

```
class Report < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  has_many :pages, :dependent => :destroy
  attr_accessible :filename, :title

  tire.mapping do
    indexes :id, :type =>'integer'
    indexes :title
    indexes :attachment, :type => 'attachment',
                            :fields => {
                            :content_type => { :store => 'yes' },
                            :author     => { :store => 'yes' },
                            :title      => { :store => 'yes' },
                            :attachment => { :term_vector => 'with_positions_offsets', :store => 'yes' },
                            :date       => { :store => 'yes' }
                          }
  end

  ...
end 
```

页面模型：

```
class Page < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  belongs_to :report
  attr_accessible :filename, :page_num,

  tire.mapping do
    indexes :id, :type => 'integer'
    indexes :page_num, :type => 'integer'
    indexes :report_id, :type => 'integer' ###<== how is this associated with _parent?
    indexes :attachment, :type => 'attachment',
                            :fields => {
                            ...
    ...
  end
end 
```

# windows - 如何使用 Windows Azure 表存储时间戳或 Etag 字段

> ID：12399194
> 
> 赞同：2
> 
> 时间：2012-09-13T03:56:10.090
> 
> 标签：windows, node.js, azure, etag

我正在 Windows Azure 网站 (IISNode) 上开发 node.js 应用程序，并为 node.js 安装了 Azure SDK 模块。我的问题是如何在表存储中使用 etag 或时间戳字段。

是否是“我”做某事的问题，例如：

```
if (entities[0].Timestamp == newEntity.Timestamp)
    // commit this update because we are dealing with the latest copy of this entity
else
    // oops! one of the entities is newer than the other, better not save it 
```

或者我是否需要侦听 tableService.updateEntity( ... 返回的错误或其他错误？

任何帮助或建议表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:27:01.410

ETag 用于更新期间的乐观并发。ETag 在您检索实体时自动设置，并在您更新该查询实体时自动上传。如果实体同时已被另一个线程更新，则更新将失败。updateEntity 方法有一个可选参数 checkEtag，可用于修改此行为，方法是允许您指定更新应该成功，而不管其他线程是否更新了记录 - 从而覆盖乐观并发。

Windows Azure 存储服务 REST API 是 Windows Azure 存储的权威接口，htis 是您想要了解该服务的 API 功能时可以参考的文档。一般来说，描述 ETag 的文档在[这里](http://msdn.microsoft.com/en-us/library/windowsazure/dd179427)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T05:37:39.883

正如尼尔所说，好的做法是让表服务处理与并发相关的东西。

当我们使用客户端库从表服务中获取实体时，库会将与实体关联的 ETag（存在于实体的服务响应中）存储在 EntityDescriptior 实例中（EntityDescriptor 是由库维护的对象，用于上下文中的每个实体实例）

当您提交更新实体的请求时，sdk 将准备 HTTP 请求，主体为序列化为 XML 的实体，请求的 ETag 标头为存储在实体对应的实体描述符中的 ETag 值。

当表服务接收到这个更新实体实例的请求时，它会检查请求中的 ETag 是否与表存储中当前与实体关联的 ETag 匹配（如果发生其他更新，则与存储在服务中的实体关联的 ETag 会更改）在收到您的更新请求之前），如果不匹配，则通过在 412 或 409 的响应中设置 Http 状态代码，服务返回前置条件失败/冲突错误。

```
bool done = true;
while (!done)
{
    Stat statistics = _context.Execute<Stat>(new Uri("https://management.core.windows.net/<subscription-id>/services/storageservices/StatEntity?RowKey=..&PartitionKey=..").FirstOrDefault();

    try
    {
        // TODO: Update the entity, e.g. statistics.ReadCount++
        _context.UpdateObject(statistics);
        _context.SaveChanges();
        // success
        break;
    }
    catch (DataServiceRequestException exception)
    {
        var response = exception.Response.FirstOrDefault();
        if (response != null && (response.StatusCode == 412 || response.StatusCode == 409))
        {
            // Concurrency Exception - Entity Updated in-between
            // by another thread, Fetch the latest _stat entity and repeat operation
        }
        else
        {
            // log it and come out of while loop
            break;
        }
    }
    catch (Exception)
    {
        // log it and come out of while loop
        break;
    }
} 
```

# c# - 如何获取当前选定的节点（TREEVIEW）？

> ID：12399196
> 
> 赞同：0
> 
> 时间：2012-09-13T03:56:39.420
> 
> 标签：c#

如果我使用

```
MessageBox.Show(treeView1.SelectedNode.ToString()); 
```

结果是`TreeNode: Bob`。

`Bob`没有怎么办`TreeNode`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:00:25.297

关闭：

```
treeView1.SelectedNode.Name 
```

您可能还想检查所选节点是否为空。

# python - 如何在解析过程中丢弃 pyparsing parseResults？

> ID：12399201
> 
> 赞同：5
> 
> 时间：2012-09-13T03:56:49.520
> 
> 标签：python, memory, pyparsing

是否可以告诉 pyparsing 不存储 ParseResults 或手动丢弃它们？

我正在解析一个大型项目文件，并且可以通过解析操作对每个项目进行所有后处理。因此，一旦一个项目被解析，我就不再需要它 ParseResult 并且希望能够丢弃它，因为我正在达到我所在机器的内存限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:02:26.570

您是否在解析令牌时使用解析操作来处理令牌？如果是这样，您可以使用 del 删除已解析标记的内容：

```
def parseActionThatDeletesTheParsedTokens(tokens):
    # ...
    # do something interesting with the tokens
    # ...

    # delete the contents of the parsed tokens
    del tokens[:] 
```

或者您可能只想使用`scanString`而不是`parseString`. 而不是这个：

```
OneOrMore(blockOfText).parseString(bigHonkingString) 
```

做：

```
for tokens, matchstart, matchend in blockOfText.scanString(bigHonkingString):
    # do stuff with the tokens 
```

`scanString`返回一个生成器，它产生包含匹配标记、每个连续匹配的开始和结束位置的 3 元组。您可以处理每个已解析的令牌集，然后当您继续下一组时，旧集会自动丢弃。我认为这可能是您最简单的方法，只需对您的程序进行最少的更改。

# android - 检查用户是否不遵循 Android Google Maps 中的路线

> ID：12399202
> 
> 赞同：2
> 
> 时间：2012-09-13T03:57:14.537
> 
> 标签：android, gps, maps, routes

我正在开发一个应用程序，用户需要开发转弯导航。我通过使用[这个链接开发了这个](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations/11880407#11880407)

现在这给了我路线和非常好的转弯导航。但是我的问题是假设如果用户错过了转弯并且他转弯了，那么我怎么知道用户不在指定的路径上？

在这方面需要帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:52:14.363

路线为您提供路线的整个距离，您可以检查该距离是否在增加，这意味着他走错了路线，这也不是那么有效的解决方案，但我看不到任何其他方法，除非**谷歌**提供方向和导航`Android Google Maps SDK`。

# javascript - 为什么这在变形之前不 pauseFx？

> ID：12399203
> 
> 赞同：0
> 
> 时间：2012-09-13T03:57:57.653
> 
> 标签：javascript, mootools

这个变形很好，但我需要它先暂停然后变形。

```
var animate = (function(){
    var div = document.getElement('div.es-transition');
    if (div){
        div.set('morph', {duration: 800, transition: 'quad:out'});
        div.pauseFx(1000, 'morph');
        div.addClass('hidden');
        div.setStyles({'visibility': 'hidden', 'opacity': 0});
        div.removeClass('hidden').fade('in');
    }
});

window.addEvent('load', animate); 
```

撞头。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:33:44.017

不知道`pauseFx`？这不是标准的 mootools-core api。它有[http://mootools.net/docs/core/Fx/Fx#Fx:pause](http://mootools.net/docs/core/Fx/Fx#Fx:pause) - 需要应用于实例。

在你的情况下，无论如何你在运行它之前暂停它是没有意义的。这意味着，使用`setTimeout`or `delay`。`pause`是在中途停止并恢复变形/补间。请澄清您要达到的目标

还。`.set('morph')`不适用于`.fade()`- fade 是基于`tween`选项，而不是`morph`. tween 和 morph 之间的区别是单个属性与多个属性。

如果我理解正确，您需要重写为：

```
var animate = (function(){
    var div = document.getElement('div.es-transition');
    if (div){
        div.set('tween', {duration: 800, transition: 'quad:out'});

        div.addClass('hidden');
        div.setStyles({'visibility': 'hidden', 'opacity': 0});

        (function(){
            div.removeClass('hidden').fade(0, 1);
        }).delay(1000);
    }
});

window.addEvent('load', animate); 
```

# java - 布尔值和 == vs =

> ID：12399205
> 
> 赞同：3
> 
> 时间：2012-09-13T03:58:21.730
> 
> 标签：java, boolean

语言是Java。鉴于这种：

```
public static void main(String[] args) {
    Boolean b1 = true;
    Boolean b2 = true;
    int i1 = 1;

    if (b1 = true) //line 5
    if (b1 == true}  // line 6 
```

我知道这`b1 == true`是一个等效的测试，它会给出结果：真或假。但是，`b1 = true`在我的理解中，with 是一个声明，除了在这种情况下，它应该什么都不返回：返回 true，与test`b1 = true`完全相同？`==`

你能解释一下为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T04:01:31.250

`if (identifier = literal)`评估为：

```
identifier = literal;  
if (identifier) 
```

首先，您将文字分配给标识符。然后你在分配后测试它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:48:07.903

当你写

```
b1 = true; 
```

`true`分配给 b1。

当你写

```
if(b1 = true) 
```

首先完成分配，然后计算表达式，表达式计算为`b1`ie的值`true`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-13T05:14:25.373

好吧，两者都返回 true 的原因仅仅是因为两个表达式都是 true。

b1 = true 是一个赋值 --> 你告诉 java b1 是真的，当它评估时它变成了真的，因为这里你只是说 b1 是真的。

b1 == true 是一个条件 --> 这行有意义，因为您现在正在检查 [value of] b1 是否等于 true，这将根据 b1 是否为 true 评估为 true 或 false。请注意，您可以只写 b1 因为它已经是一个布尔值（真或假）。

我认为您没有意识到这一点，但您使用的是对象类型布尔而不是原始类型布尔。如果你真的不知道 Java 中基于对象的类型和原始类型之间的区别，你应该坚持使用小写 b 的那个。

顺便说一句，我不知道 Java 允许将赋值用作表达式。

# c# - 使用对象获取/设置的值失败

> ID：12399206
> 
> 赞同：1
> 
> 时间：2012-09-13T03:58:36.000
> 
> 标签：c#, multithreading, class

我会解释，但代码可以比我更好地解释它。

我正在尝试获取 2 个变量的值
我在它的类上创建一个新对象并使用它的成员，我从数据包中设置它们的值。
每当我尝试访问它们时，我都会发现它们为零，这对我来说没有意义。
这是与问题相关的代码的重要部分

```
public class PacketHandler
    {
.
. dots means unrelated long code
.
public PacketHandler()
        {
        }
        public ushort actualX { get; set; }
        public ushort actualY { get; set; }
.
.
.
case 10010:
                            {
                                if (BitConverter.ToUInt16(data, 8) == 1002)
                                {
                                    actualX = BitConverter.ToUInt16(data, 24);
                                    actualY = BitConverter.ToUInt16(data, 26);
                                }
                                break; 
```

这是我试图获得价值的另一类

```
public class ClientBase
{
    GameUser role2;
    PacketHandler ph = new PacketHandler(); <<<<<<<<
    public ClientBase(GameUser role)
    {
        role2 = role;
        Thread T = new Thread(HuntThread) { Name = "Hunt Thread" };
        T.Start(this);
        Console.WriteLine("with name : " +T.Name +  " with execution context : "+T.ExecutionContext +" with state : "+ T.IsAlive + " with id : " + T.ManagedThreadId);
       T.Join();
    }
    Monster GetNextkill()
    {
        Monster CurrentTarget = null;
        foreach (KeyValuePair<uint, Monster> Pair in Dictionary.Clone(Dictionary.Monsters))
        {

                CurrentTarget = Pair.Value;
        }
        return CurrentTarget;
    }
    public void HuntThread(object Sender)
    {
        try
        {
            ClientBase Client = Sender as ClientBase;
            while (true)
            {
                Monster Target = GetNextkill();
                if (Target != null)
                {
                    Thread.Sleep(1000);
                    ProxyParadise.Network.Packets.PacketStructure ps = new ProxyParadise.Network.Packets.PacketStructure();

                    ps.__Packet10010(Target.X, Target.Y, role2, "normal", "server", ph.actualX, ph.actualY); <<<<< i get zeros at the ph.actualX/Y
                    Thread.Sleep(1000);
                    ps.__Packet10010(Target.X, Target.Y, role2, "sdasdsa", "client", role2.X, role2.Y);
                    Thread.Sleep(1000);
                    ps.__Packet1022NONEXP(Target.UID, Target.X , Target.Y, role2);
                    Dictionary.Monsters.SafeRemove(Target.UID); 
```

如果我听起来很愚蠢，请原谅我，为了更清楚，我想要一种在新线程中通过类传输数据的正确方法。
请尝试将其应用于此示例以便更好地理解。
有一个美好的一天

# solaris - 抑制 solaris CC 链接器警告符号 XXX 具有不同的大小

> ID：12399208
> 
> 赞同：1
> 
> 时间：2012-09-13T03:58:52.653
> 
> 标签：solaris, cc

我收到此链接器错误消息：

```
ld: warning: symbol `_VersioN' has differing sizes:
        (file ./libsfc/libssl48.so value=0x16; file ./libsfc/libsipc.so value=0x15); 
```

当我尝试做链接的事情时：

```
CC -o foo foo.o bar.o ....
ld: warning: symbol `_VersioN' has differing sizes:
        (file ./libsfc/libssl48.so value=0x16; file ./libsfc/libsipc.so valu15);
[still generate foo binary] 
```

我想取消警告信息。如果我尝试添加 -t 选项，但失败：

```
CC -t -o foo foo.o bar.o ...
CC: Warning: Option -t passed to ld, if ld is invoked, ignored otherwise
[won't generate foo binary] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T10:53:52.440

看来您的 libssl48.so 是使用为该特定变量指定大小的映射文件构建的。

如果希望 Solaris Studio 编译器将“-t”传递给链接器，则需要使用 -Xlinker -t 而不是裸 -t。

您需要发布更多信息，让人们给您更有用的回复。

# ruby - 用应用程序打包 gem

> ID：12399211
> 
> 赞同：0
> 
> 时间：2012-09-13T03:59:23.133
> 
> 标签：ruby, gem, bundler

所以我有一个简单的应用程序/脚本，它依赖于一个 gem，我想做的是将它与应用程序一起打包，这样就不需要每次在它需要运行的每台新机器上都安装它。

我尝试使用 bundler pack 命令，但问题是这样我仍然需要安装 bundler，我无法保证。

所以所做的就是从 gem 中获取我需要的代码，然后使用它。

* * *

## 我的问题是：

如何在没有任何依赖的情况下将 gem 与我的应用程序打包在一起，并且我当前的解决方案是否礼貌？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:59:30.173

从 setup.rb（或应用程序的入口点）添加以下行：

```
Dir.glob("#{File.dirname(__FILE__)}/lib/*.rb") { |lib| require lib } 
```

# c# - 在列表中搜索一个值 >

> ID：12399212
> 
> 赞同：5
> 
> 时间：2012-09-13T03:59:30.713
> 
> 标签：c#, list, search, .net-4.0, dictionary

我有一个`List< Dictionary < string, object >>`变量如下。

```
private static List<Dictionary<string, object>> testData = new List<Dictionary<string, object>>(100);

// Just Sample data for understanding.
for (int i = 0; i < 100; i++)
{
    var test = new Dictionary<string, object>
        {
            { "aaa", "aaa" + i % 4 },
            { "bbb", "bbb" + i % 4 },
            { "ccc", "ccc" + i % 4 },
            { "ddd", "ddd" + i % 4 },
            { "eee", "eee" + i % 4 },
            { "fff", "fff" + i % 4 },
            { "ggg", "ggg" + i % 4 },
            { "hhh", "hhh" + i % 4 },
            { "iii", "iii" + i % 4 }
        };
    testData.Add(test);
} 
```

我想在 Dictionary 中搜索键、值的列表并返回`List< Dictionary < string, object >>`包含我传递的 searchPattern。

```
Dictionary<string, object> searchPattern = new Dictionary<string, object>();
searchPattern .Add("aaa", "aaa4");
searchPattern .Add("eee", "eee2");
searchPattern .Add("fff", "fff1");
searchPattern .Add("ddd", "ddd3");

public List<Dictionary<string, object>> SearchList(List<Dictionary<string, object>> testData, Dictionary<string, object> searchPattern)
{
    List<Dictionary<string, object>> result;

    // Search the list.

    return result;
} 
```

任何其他搜索建议也表示赞赏。非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:14:16.580

让我尝试：

```
 public static List<Dictionary<string, object>> SearchList(List<Dictionary<string, object>> testData, Dictionary<string, object> searchPattern)
    {
        return testData.Where(t =>
            {
                bool flag = true;
                foreach (KeyValuePair<string, object> p in searchPattern)
                {
                    if (!t.ContainsKey(p.Key) || !t[p.Key].Equals(p.Value))
                    {
                        flag = false;
                        break;
                    }
                }
                return flag;
            }).ToList();

    } 
```

或者

```
 public static List<Dictionary<string, object>> SearchList(List<Dictionary<string, object>> testData, Dictionary<string, object> searchPattern)
    {
        return testData
                  .Where(t => searchPattern.All(p => t.ContainsKey(p.Key) && 
                                                     t[p.Key].Equals(p.Value)))
                  .ToList();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:21:25.937

这将返回列表中的第一个字典，其中包含搜索模式中的所有键值对，或者`null`如果没有。

```
public Dictionary<string, object> SearchList
(
    List<Dictionary<string, object>> testData,
    Dictionary<string, object> searchPattern
)
{
    return testData.FirstOrDefault(x => searchPattern.All(x.Contains));
} 
```

如果您想要所有匹配项（不仅仅是第一个匹配项），请使用`Where([...]).ToList()`而不是`FirstOrDefault([...])`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T04:30:38.813

如果我理解正确：

```
var result = testData.Where(dic => searchPattern.All(dic.Contains))
                     .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T04:20:07.637

有几种方法可以做到这一点。_Individuals1 = file1.fileIndividuals; _Individuals2 = file2.fileIndividuals;

```
 foreach (KeyValuePair<int, Individual> kvpInd in _Individuals1) 
    { 
        foreach (KeyValuePair<int, Individual> kvpInd2 in _Individuals2) 
        { 
            if (kvpInd.Value.name.name == kvpInd2.Value.name.name) 
            { 
                similarInds.Add(kvpInd.Key, kvpInd.Value); 
            } 
        } 
    } 

var similarInds = file1.fileIndividuals. 
Where(kv1 => file2.fileIndividuals.Any(kv2 => kv1.Value.name.name == kv2.Value.name.name)). 
ToDictionary(kv => kv.Key, kv => kv.Value); 
```

如果您使用 linq 有重复的值，这将失败，您可以这样做

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T04:34:12.850

我同意 armen.shimoon，但是是这样的：

```
public static List<Dictionary<string, object>> SearchList(this List<Dictionary<string, object>> list,
        Dictionary<string, object> searchPattern)
    {
        return list.Where(item =>
            searchPattern.All(x => item.ContainsKey(x.Key) && 
                x.Value.Equals(item[x.Key])
            )).ToList();
    } 
```

然后像这样使用：

```
 searchResult = testData.SearchList(searchPattern); 
```

# gcc - 使用 libnids 编译

> ID：12399214
> 
> 赞同：1
> 
> 时间：2012-09-13T04:00:04.343
> 
> 标签：gcc, libpcap

我整天都在尝试安装**[libnids （Ubuntu LTS 和 Mac OS X），现在我知道如何用它编译程序了。](http://libnids.sourceforge.net/)**

我在这里写这个是因为没有太多文档，但是在 libnids 下载的文件夹中有带有 makefile 的示例。这个 makefile 的重要内容是：

```
CC = gcc    
PCAPLIB     = -lpcap    
LNETLIB     = -lnet    
LIBS        = -L../src -lnids $(PCAPLIB) $(LNETLIB) -lgthread-2.0 -lnsl

example:
    $(CC) example.c -o example $(LIBS) 
```

如果你在 Mac OS X 中编译它，请忽略这个： -lgthread-2.0 -lnsl -L../src 但我不知道是否因为这些省略的东西而停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:11:10.087

我找到了。最好的方法是编译库，然后使用对“.a”文件的本地引用。

**生成文件示例**

```
CC = gcc -g -Wall 
GLIB =  `pkg-config --cflags --libs glib-2.0`
PCAPLIB     = -lpcap
LNETLIB     = -lnet

LIBS_SRC    = libnids-1.24/src/libnids.a
LIBS        = $(PCAPLIB) $(LNETLIB) -lgthread-2.0 

program: program.c
    $(CC) -c $(CFLAGS) program.c -o program.o $(GLIB) $(LIBS)
    $(CC) program.o  -o program $(LIBS_SRC) $(GLIB) $(LIBS) 
```

但是，如果您想编译库并将其安装到您的系统中，您必须使用**-lnids**而不是上述方式。但是第一个解决方案总是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T14:48:55.140

在 libnids 下编译示例时出现错误：

gcc -o 溢出 overflows.o -L../src -lnids -lpcap -lnet -lgthread-2.0 -lnsl ../src/libnids.a /usr/bin/ld: ../src/libnids.a(libnids *。* _ _溢出] 错误 1

你推荐

```
GLIB =  `pkg-config --cflags --libs glib-2.0` 
```

解决了我的问题。

PS：我的系统Ubuntu 13.10。64位。

# php - 多个输入的 html 和 javascript 同名 - 如何？

> ID：12399217
> 
> 赞同：0
> 
> 时间：2012-09-13T04:00:43.683
> 
> 标签：php, html, forms, post

我从来没有做过这样的事情，我想知道该怎么做。如果它是字段输出，我需要将 4 个输入放入一个子数组中

我知道当我将 $_POST 表单发送到服务器时，它会发送输入的名称，但是我如何让输入被允许具有相同的名称

例如

我需要它所在的子阵列是这里**提供** 的是我不知道的。我如何获得以下输入

```
<input name="offers[]['minspend']" value="15.00"/>
<input name="offers[]['minspend']" value="5.00"/>

<input name="offers[]['minspend']" value="19.00"/>
<input name="offers[]['minspend']" value="8.00"/>

<input name="offers[]['minspend']" value="30.00"/>
<input name="offers[]['minspend']" value="7.00"/>

<input name="offers[]['minspend']" value="100.00"/>
<input name="offers[]['minspend']" value="10.00"/> 
```

这是对还是错？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:11:13.847

这在一定程度上取决于处理您的请求的后端技术（java、php、whatnot），但从 html 的角度来看，具有相同名称的多个元素只会使用相同的参数名称发送它们的值。您不需要任何特殊的 [] 语法。

```
GET /mypage.html?offer=15.00&offer=5.0&offer=19.0 (etc, could be post too) 
```

大多数为 html 请求提供内置支持的语言将此请求表示为一个映射，带有一个名为“offer”的键和一个包含提交值的数组或列表的值。

例如[http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap) ()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:26:23.500

这种形式

```
<input name="offers['minspend'][]" value="15.00"/>
<input name="offers['minspend'][]" value="5.00"/>

<input name="offers['minspend'][]" value="19.00"/>
<input name="offers['minspend'][]" value="8.00"/>

<input name="offers['minspend'][]" value="30.00"/>
<input name="offers['minspend'][]" value="7.00"/>

<input name="offers['minspend'][]" value="100.00"/>
<input name="offers['minspend'][]" value="10.00"/> 
```

在做`var_dump($_POST)`[假设形式方法=帖子]时，请给出：

```
array(1) {
    ["offers"] = > array(1) {
        ["\'minspend\'"] = > array(8) {
            [0] = > string(5)"15.00"
            [1] = > string(4)"5.00"
            [2] = > string(5)"19.00"
            [3] = > string(4)"8.00"
            [4] = > string(5)"30.00"
            [5] = > string(4)"7.00"
            [6] = > string(6)"100.00"
            [7] = > string(5)"10.00"
        }
    }
} 
```

所以，这就是你的做法。

您可以删除`'`minspend 周围的 s。他们不需要。

你快到了。`offers[]['minspend']`意味着你得到：

```
array(){
    array(){
        'minspend' => "15.00"
    }
    array(){
        'minspend' => "5.00"
    }
    .. and so on
} 
```

所以发生的事情是，当你做类似的事情时`arr[] = 1`，`1`被插入到数组`arr`中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:07:36.253

那么首先让我告诉你我从这个问题中理解的内容。您希望多个输入字段具有相同的名称，然后您希望将它们全部选中以执行某些操作。如果是这种情况，我想提出一种不同的方法 - 为什么不将相同的类 (cssclass) 分配给所有想要具有相同名称的控件。这样您就可以使用`document.getElementsByClassName("yourclassName")`. 这将返回一个包含所有类属性为的元素的数组`yourclassName`。或者，如果您想坚持使用名称，那么您可以使用`document.getElementsByName("elementName");`它返回一个名称为的元素数组`elementName`。希望它有帮助。

# iphone - CLPlacemark 的“名称”

> ID：12399220
> 
> 赞同：2
> 
> 时间：2012-09-13T04:01:02.070
> 
> 标签：iphone, clgeocoder

我正在尝试了解 CLPlacemark 以及何时/如何为添加到地图的图钉标注创建信息。在几年前我在更多 iOS 3 开发中读到的内容之前，他们对地址进行了反向地理编码并构建了地址（街道、邮编、州等）。首先，我需要自己构建这个字符串吗？我试图找出如何获取某些已知事物的位置名称，例如在下面的代码中搜索苹果商店：

```
NSString *address = @"1 stockton, san francisco, ca";    
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
        [geocoder geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error) {

    [placemarks enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        NSLog(@"obj description: %@", [obj description]);

        CLPlacemark *aPlacemark = (CLPlacemark *)obj;
        NSLog(@"%@", [aPlacemark.addressDictionary description]);
        NSLog(@"name: %@", ((CLPlacemark *)obj).name);
    }];
]; 
```

当我打印出描述时，我看到控制台说：

```
Apple Store, San Francisco, 1 Stockton St, San Francisco, CA  94108-5805, United States @ <+37.78584545,-122.40651752> +/- 100.00m, region (identifier <+37.78584545,-122.40652161> radius 18.96) <+37.78584545,-122.40652161> radius 18.96m 
```

旧金山 Apple Store 的名称从何而来？我认为这将是 CLPlacemark.name 属性，但那是空的。因此，在试图弄清楚 name 属性是如何创建的时，我发现：

```
 NSLog(@"%@", [aPlacemark.addressDictionary description]); 
```

我得到输出：

```
City = "San Francisco";
Country = "United States";
CountryCode = US;
FormattedAddressLines =     (
    "Apple Store, San Francisco",
    "1 Stockton St",
    "San Francisco, CA  94108-5805",
    "United States"
);
PostCodeExtension = 5805;
State = California;
Street = "1 Stockton St";
SubAdministrativeArea = "San Francisco";
SubLocality = "Union Square";
SubThoroughfare = 1;
Thoroughfare = "Stockton St";
ZIP = 94108; 
```

从这里，我只能看到，在 addressDictionary 的 FormattedAddressLines 键中，标题也在那里。

所以我想我的两个问题是：

1）如果有一个位置（即Apple Store），我如何获得位置的名称？

2）我是否需要再构建我的字符串，因为地址字典似乎已经为我做了这件事？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:59:05.510

您可以使用 AddressBookUI 框架中的 ABCreateStringWithAddressDictionary 函数从 CLPlacemark 的“addressDictionary”属性中获取地址字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:33:00.360

要回答您的第一个问题，请使用`areasOfInterest`CLPlacemark 的属性。

至于第二个问题，这完全取决于您，以及您希望如何格式化字符串。如果您想使用`addressDictionary`属性中的字符串构建它，那么一定要这样做。您可以挑选零件，并在完成处理程序中创建一个字符串。

此外，您提到要创建注释以在地图上显示。我个人将 MKAnnotation 子类化，并使用它来快速创建要在地图上显示的注释。

MyAnnotation.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyAnnotation : NSObject <MKAnnotation> {
    NSString *_name;
    NSString *_address;
    CLLocationCoordinate2D _coordinate;
}

@property (copy) NSString *name;
@property (copy) NSString *address;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate;

@end 
```

我的注释.m

```
#import "MyAnnotation.h"

@implementation MyAnnotation
@synthesize name = _name;
@synthesize address = _address;
@synthesize coordinate = _coordinate;

- (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate
{
    if ((self = [super init])) {
        _name = [name copy];
        _address = [address copy];
        _coordinate = coordinate;
    }
    return self;
}

- (NSString *)title
{
    return _name;
}

- (NSString *)subtitle
{
    return _address;
}

@end 
```

声明一个 NSMutableArray 来保存所有的注解，并把它扔到`initWithName:address:coordinate:`你的完成处理程序中，你可以快速得到一个注解数组，你可以添加到你的地图中。

```
NSString *address = @"1 stockton, san francisco, ca";    
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
[geocoder geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error) 
{
   NSMutableArray *annotationArray = [NSMutableArray array];
   for (CLPlacemark *aPlacemark in placemarks)
   {
      NSString *nameString = // Get your name from an array created by aPlacemark.areasOfInterest;
      NSString *addressString = // Put your address string info you get from the placemark here.
      CLLocationCoordinate2D coordinate = aPlacemark.location.coordinate;
      MyAnnotation *annotation = [[MyAnnotation alloc] initWithName:nameString address:addressString coordinate:coordinate];
      [annotationArray addObject:annotation];
   }
   // Now save annotationArray if you want to use it later
   // Add it to your MapView with [myMapView addAnnotations:annotationArray];
}]; 
```

希望能有所帮助！

# r - 使用 hwriter/xtable 在 HTML 表格中未对齐的列

> ID：12399222
> 
> 赞同：2
> 
> 时间：2012-09-13T04:01:10.587
> 
> 标签：r, xtable

我一直在尝试使用 xtable 和 hwriter R 包将列表转换为 HTML 表。列表如下所示：

```
structure(list(sex = structure(list(`study 1` = structure(c(2L, 
1L), .Label = c("111 (55.5%)", "89 (44.5%)"), class = "factor"), 
`study 2` = structure(1:2, .Label = c("29 (30.21%)", "67 (69.79%)"
), class = "factor"), `study 3` = structure(c(2L, 1L), .Label = c("112 (56.85%)", 
"85 (43.15%)"), class = "factor"), `study 113220` = structure(1:2, .Label = 
c("132 (44.75%)", "163 (55.25%)"), class = "factor")), .Names = c("study 1", 
"study 2", "study 3", "study 113220"), class = "data.frame", row.names = c("0", 
"1")), ethnic = structure(list(`study 1` = structure(c(2L, 1L
), .Label = c("194 (97%)", "6 (3%)"), class = "factor"), `study 2` = 
structure(1:2, .Label = c("2 (2.08%)", "94 (97.92%)"), class = "factor"), 
`study 3` = structure(c(2L,1L), .Label = c("194 (98.48%)", "3 (1.52%)"), class = 
"factor"),  `study 113220` = structure(1:2, .Label = c("10 (3.39%)", 
"285 (96.61%)"), class = "factor")), .Names = c("study 1", 
"study 2", "study 3", "study 113220"), class = "data.frame", row.names = c("1", 
"2")), race = structure(list(`study 1` = structure(c(4L, 1L, 
1L, 3L, 3L, 2L, NA, NA, NA, NA), .Label = c("1 (0.5%)", "187 (93.5%)", 
"2 (1%)", "7 (3.5%)"), class = "factor"), `study 2` = structure(c(NA, 
NA, NA, NA, 1L, 2L, NA, NA, NA, NA), .Label = c("1 (1.04%)", 
"95 (98.96%)"), class = "factor"), `study 3` = structure(c(NA, 
NA, NA, NA, 2L, 1L, NA, NA, NA, NA), .Label = c("195 (98.98%)", 
"2 (1.02%)"), class = "factor"), `study 113220` = structure(c(1L, 
NA, 1L, NA, NA, 2L, 1L, 1L, 1L, 1L), .Label = c("1 (0.34%)", 
"289 (97.97%)"), class = "factor")), .Names = c("study 1", "study 2", 
"study 3", "study 113220"), class = "data.frame", row.names = c("11", 
"14", "15", "17", "18", "19", "13", "16", "99", "NA"))), .Names = c("sex", 
"ethnic", "race")) 
```

下面是我如何创建我想出的 HTML 表：

```
writeHTML = function(list,file){
  widthpx = sprintf("%d",100*(1+ncol(list[[1]])))
  vect = sapply(1:length(x), function(i) hwrite(list[[i]],
                                                center=T, 
                                                table.style="border-collapse:collapse",
                                                table.frame="void",
                                                table.rules="all",
                                                border=1,
                                                row.names=T, 
                                                cellpadding="5px",
                                                row.style=list("font-weight:bold"),
                                                width=widthpx,
                                                col.width="70px") )
  names(vect) = names(list)
  hwrite(vect, page=file, center=T, 
         table.style="border-collapse:collapse",
         border=4, 
         row.names=T, 
         col.style=list("font-weight:bold"),
         dim=c(length(vect),1))
}
writeHTML(x,"x.html") 
```

但列未对齐....

任何人都知道如何解决这个问题？谢谢！！！

# java - IntelliJ IDEA 调试器跟随子进程

> ID：12399223
> 
> 赞同：3
> 
> 时间：2012-09-13T04:01:28.263
> 
> 标签：java, debugging, intellij-idea

我们有一些使用以下代码启动新进程的 Java 代码：`Runtime.getRuntime().exec(command);` 我希望能够告诉调试器它应该遵循子进程，就像您可以通过发出命令对 GDB 所做的[那样，如此处所述。](http://sunsite.ualberta.ca/Documentation/Gnu/gdb-5.0/html_node/gdb_25.html)`set follow-fork-mode child`

IntelliJ IDEA Java 调试器中是否有等效的东西？如果是这样，我该如何配置它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T07:34:26.160

Java 不提供调试进程及其子进程的自动化方法。需要使用 JVM 选项运行子进程以启用调试。IDEA**远程调试**配置将建议使用正确的选项。**使用适当的选项启动该过程后，您可以使用远程调试**配置从 IDEA 连接到它。

示例选项：

```
-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005 
```

您可能希望首先`suspend=y`暂停执行，直到您连接到调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-08T08:37:25.883

我们现在有了这个 Intellij 插件，它使用 java 代理在调试模式下自动启动所有子进程。

它侦听 7857 上的任何被调试进程，然后将调试器附加到这些进程。

1.  安装[AttachMe](https://plugins.jetbrains.com/plugin/13263-attachme/)
2.  要启用自动模式，首先运行它，`source ~/.attachme/conf.sh`
3.  然后启动 AttachMe 监听器
4.  使用 prod 模式下的 Play 应用程序对其进行测试（假设启用了 play 插件），执行`sbt start`. 以 prod 模式运行会分叉另一个 JVM 进程。调试点现在应该命中。

# google-chrome - 较新的 chrome 在使用 haproxy 服务器的 websocket 上失败

> ID：12399225
> 
> 赞同：2
> 
> 时间：2012-09-13T04:01:34.770
> 
> 标签：google-chrome, websocket, socket.io, haproxy

测试站点[http://socket.trailsandtribulations.net](http://socket.trailsandtribulations.net)

火狐：v15 工作正常。（但是，如果大量的流量和缓慢的网络，firefox 也会经常失败（安静地）。）

chrome：以前工作过，但 v21 得到了`Error during WebSocket handshake: 'Connection' header value is not 'Upgrade'`

*但是*，如果`chrome`在本地运行，它工作正常！它在我在泰国的客户和德国的服务器上中断。再一次，Firefox 一直都能正常工作，就像早期版本的 chrome 一样。

用于在 websockets via和 html via之间进行`haproxy`拆分`node.js``nginx`

有什么改变使这个解决方案不起作用？

`haproxy.cfg`现在显示测试站点链接 - 这样它始终是最新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:02:32.833

从您的消息中可以看出，该错误是由 Chrome 报告的，而最初我理解它是由 Chrome 访问时由服务器报告的。我认为作为一种解决方法，如果将“option httpclose”替换为“option http-server-close”，它可能会使问题消失。您还需要删除所有“选项 forceclose”。如果只有“选项 http-server-close”，haproxy 不会触及响应路径中的 Connection 标头，这应该会让浏览器满意。但是，您必须记住，仍然存在显示错误的错误，应将其报告给软件作者。

顺便说一句，您的超时时间太大了，最终您会遇到许多死连接，这没有任何意义。如果你使用了一个足够新的 haproxy，你可以使用“超时隧道”来设置 WS 超时，而不必处理很大的 HTTP 超时。但即便如此，1 天对于 TCP 连接来说还是太大了。您的一些用户将使用智能手机，其中 TCP 连接在切换发生前不能超过几分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:05:46.387

firefox`no-cache`在请求 websocket 更新时使用；这个版本的chrome没有。请参阅[http://code.google.com/p/chromium/issues/detail?id=148908&thanks=148908&ts=1347523876](http://code.google.com/p/chromium/issues/detail?id=148908&thanks=148908&ts=1347523876)

对于某些代理来说，这显然是必要的

另外，有关相关问题，请参阅[https://github.com/sockjs/sockjs-node/pull/88](https://github.com/sockjs/sockjs-node/pull/88)

# ruby-on-rails - 检查主题是否存在并附加到文本框旁边

> ID：12399226
> 
> 赞同：0
> 
> 时间：2012-09-13T04:01:39.190
> 
> 标签：ruby-on-rails, ajax, jquery

我有一个具有主题文本字段的 Rails 应用程序，当我模糊文本字段时，用户输入主题代码 id 然后在文本字段旁边将是主题的其他详细信息的结果。

形式：

```
 SC_ID: <%= f.text_field "subject1", :id => "subject1"%> 
```

jQuery：

```
 $('#subject1').blur(function() {
      var field_value = $(this).val();
      $.post("<%= validate_subject_path %>",{subject : field_value}, function(data) {
        success: function() {

          alert("Hahaha!");
        },
        error: function() {

          alert("Subject not found!");
        }
      });

    }); 
```

控制器：

```
 def validate_subject
    sc_id = params[:subject].to_i
    @subject = Subject.find_by_sc_id(sc_id)
    string = "#{@subject.id}"
    return string
    render :layout => false
   end 
```

路线：

```
 map.validate_subject '/subjects/validate_subject', :controller => "subjects", :action => 'validate_subject' 
```

但是，当我尝试模糊时，不会出现任何警报框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:30:40.143

你的`$.post`电话错了，应该是这样的：

```
 $.post("<%= validate_subject_path %>",{subject : field_value}, function(data) {
      // not returning a hash
      alert("Hahaha!");
  }); 
```

如果你真的什么时候对失败做出反应，那么你需要使用`$.ajax`而不是`$.post` [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# networking - 我如何将 iptables 设置为仅允许某些 mac 地址连接以连接到服务器

> ID：12399227
> 
> 赞同：0
> 
> 时间：2012-09-13T04:01:46.183
> 
> 标签：networking, debian, firewall, iptables

我目前正在尝试将 iptables 配置为仅允许某些 mac 地址连接它（这是一个用作路由器的 debian 机器），以提供小级别的保护，以防止人们在我不知情的情况下连接到我的网络（实时在宿舍里，担心我的室友连接到它的可能性），但是我很难让 mac 地址阻止工作（当我进行更改时，服务器继续像以前一样运行），没有任何更改添加以阻止mac地址，这是我的常规配置

```
# Generated by iptables-save v1.4.8 on Wed Sep 12 23:56:43 2012
*nat
:PREROUTING ACCEPT [5151384:752742780]
:POSTROUTING ACCEPT [969:251840]
:OUTPUT ACCEPT [97167:7471385]
-A PREROUTING -i eth1 -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 3128
-A POSTROUTING -o eth0 -j MASQUERADE
COMMIT
# Completed on Wed Sep 12 23:56:43 2012
# Generated by iptables-save v1.4.8 on Wed Sep 12 23:56:43 2012
*filter
:INPUT DROP [4858214:733505988]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
-A INPUT -s 192.167.1.0/24 -i eth1 -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A FORWARD -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT
-A FORWARD -i eth1 -o eth0 -j ACCEPT
-A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT
-A OUTPUT -j ACCEPT
COMMIT
# Completed on Wed Sep 12 23:56:43 2012 
```

虽然到目前为止我已经尝试了一些不同的解决方案，但我还没有找到任何可行的方法，如果有人可以为此提供建议或推动我朝着正确的方向前进，尽管我真的很感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T16:05:48.063

MAC 地址过滤的语法是

```
iptables -I "CHAIN-NAME" -m mac --mac-source "MAC-ADDRESS" -j "ACTION" 
```

# php - 将 MySql 数据库导入在线虚拟主机站点？

> ID：12399234
> 
> 赞同：1
> 
> 时间：2012-09-13T04:02:30.993
> 
> 标签：php, mysql

我正在做这个网站，我首先在本地进行了测试。一切正常，包括数据库。来自 html 的表单会自动将提交的数据发送到我的数据库。问题是，我想在线托管它。我已经有网站了。我使用 webfreehosting.net。如何将我的数据库插入文件管理器？我检查了 mysql 管理器，它说它导入了文本文件。但是我本地磁盘上的数据库文件夹只有 opt 和 frm 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:50:39.040

看起来您刚刚开始进行 Web 开发。有更好、更安全和更快的方法来进行 MySQL 转储，但我建议您从有助于学习的图形界面开始。

您的托管服务提供商会为您提供控制面板。在他们的[网站上](http://webfreehosting.net./shared-hosting.php)，我可以看到他们提供 phpMyAdmin。要导入数据库，您需要执行以下步骤：

1.  下载像[MySQL Workbench这样的桌面 MySQL 管理员](http://dev.mysql.com/downloads/workbench/)
2.  [将数据库导出到 .SQL 文件](http://dev.mysql.com/doc/workbench/en/wb-manage-server-export-to-disk.html)
3.  登录到您的网络托管控制面板。
4.  创建数据库。
5.  创建一个数据库用户并为此设置密码
6.  授予此用户对您的数据库的所有权限（不建议，但可以开始）
7.  找到 phpMyAdmin。您将看到此数据库已列出。
8.  单击导入并导入您在步骤 2 中创建的数据库 .sql 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:10:12.477

以 SQL 格式（文本文件）从 MySQL Workbench 导出本地数据库。然后，使用 PHPMyAdmin 将其导入在线数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:07:36.657

[使用mysqldump](http://dev.mysql.com/doc/en/mysqldump.html)备份您的开发数据库，​​然后针对您的生产系统运行生成的 SQL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T04:22:07.217

如何将我的数据库插入文件管理器？

你不。如果你制作了这个网站，你应该知道你没有使用它。对 SQL 使用 phpMyAdmin。

此外，如果您的应用程序不工作，请检查您是否在文件中进行了配置更改，例如用户名、密码。

# iphone - iOS - UIWebView 由于解析错误而无法工作

> ID：12399241
> 
> 赞同：24
> 
> 时间：2012-09-13T04:03:31.973
> 
> 标签：iphone, html, ios, ipad, uiwebview

我想在我的应用中播放 Youtube 视频。所以，我写了下面的代码

```
NSString *embedHTML = @"\
<html><head>\
<style type=\"text/css\">\
body {\
background-color: transparent;\
color: white;\
}\
</style>\
</head><body style=\"margin:0\">\
<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
width=\"%0.0f\" height=\"%0.0f\"></embed>\
</body></html>";

NSString* html = [NSString stringWithFormat:embedHTML, videoURL, self.view.frame.size.width, self.view.frame.size.height];  

[videoView loadHTMLString:html baseURL:nil]; 
```

videoView 是一个 UIWebView。这工作得很好，直到后来，视图什么也没显示。只是一个空白的白色视图。我得到了这个日志：

```
*** WebKit discarding exception: <NSRangeException> *** -[__NSCFString substringToIndex:]: Range or index out of bounds 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-13T21:32:43.730

采用：

`http://www.youtube.com/v/XXXXXXX`

代替：

`http://www.youtube.com/watch?v=XXXXXXX`

在这里找到：[https ://devforums.apple.com/message/705665#705665](https://devforums.apple.com/message/705665#705665)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-18T13:36:28.880

也许我将 youtube URL 转换为正确格式的方法会对您有所帮助：

```
+ (NSString*)getYTUrlStr:(NSString*)url
{   
    if (url == nil)
        return nil;

    NSString *retVal = [url stringByReplacingOccurrencesOfString:@"watch?v=" withString:@"v/"];

    NSRange pos=[retVal rangeOfString:@"version"];
    if(pos.location == NSNotFound)
    {
        retVal = [retVal stringByAppendingString:@"?version=3&hl=en_EN"];
    }
    return retVal;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-14T04:38:13.267

我使用以下 HTML 解决了它：

```
<!doctype html>\
<html>\
<style>body{padding:0;margin:0;}</style>\
<iframe width=\"320\" height=\"367\" src=\"http://www.youtube.com/embed/rVd0XWALswk?rel=0\" frameborder=\"0\" allowfullscreen></iframe>\
</html> 
```

它与使用短 URL 或 YouTube URL 无关。它可能使用了 embed 标记并使用了 application/x-shockwave-flash 类型。它现在在 iOS 6 GM 上运行良好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-13T04:35:58.373

很可能，由于该错误，您正在经历一个数组，但在某些时候您调用了一些方法，最终试图到达数组之外的东西。

例如，这样的代码会产生越界错误：

```
NSArray *array = [[NSArray alloc] initWithObjects:objInPositionZero, objInPositionOne, objInPositionTwo, nil];
NSObject *obj;

for (int i=0; i<3, i++)
{
    obj = [array objectAtIndex: (i+6)
}
//Do something with obj. 
```

会产生 NSRangeException，因为程序试图从数组中实际不存在的索引中返回一个项目。

因此，请检查所有阵列并确保没有发生这种情况。

# vb.net - 保存然后在 vb.net 中编辑事务后出错

> ID：12399242
> 
> 赞同：1
> 
> 时间：2012-09-13T04:03:43.557
> 
> 标签：vb.net, sql-server-2008, transactions, dataset, dataadapter

使用我的代码成功保存交易后...我编辑交易然后保存...然后我想出了这个错误消息：

> 当分配给命令的连接处于挂起的本地事务中时，ExecuteNonQuery 要求该命令具有事务。该命令的 Transaction 属性尚未初始化。

这是我的代码：

```
Try
  sqlTrans = sqlCon_.BeginTransaction(IsolationLevel.RepeatableRead)
  sSQLAdapter_.UpdateBatchSize = 30
  sCommand_ = DirectCast(sSQLAdapter_.SelectCommand, SqlCommand)
  sCommand_.Connection = sqlCon_ 
  sCommand_.Transaction = sqlTrans 
  sSQLAdapter.SelectCommand.Transaction = sqlTrans

  sSQLAdapter_.Update(sDataSet.Tables(0))

  sqlTrans.Commit()
  sqlCon_.Close()

Catch ex As Exception
  sqlTrans.Rollback()
Finally
   sSQLAdapter.SelectCommand.Connection.Close()
   sSQLAdapter.SelectCommand.Connection = Nothing
   sSQLAdapter.SelectCommand.Transaction = Nothing
   sSQLAdapter.SelectCommand.CommandText = ""
   sSQLAdapter.SelectCommand.Dispose()

   sqlTrans.Dispose()
   sqlCon_.Close()
   sqlCon_.Dispose()
End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:13:31.620

您需要为SqlDataAdapter和对象设置 Transaction 对象引用`InsertCommand`，因为您正在调用方法。`UpdateCommand``DeleteCommand``Update`

MSDN 参考文档 -[使用带有 DataAdapter 的事务](http://msdn.microsoft.com/en-us/library/ms971557.aspx)

样本 ：

```
Using Cn As New SqlConnection(CnStr)
 Cn.Open()
 Using Trans As SqlTransaction = Cn.BeginTransaction
   Dim Adp As New SqlDataAdapter(selectQuery, Cn)
   Adp.SelectCommand.Transaction = Trans

   Dim cmb As New SqlCommandBuilder(Adp)
   Adp.DeleteCommand = cmb.GetDeleteCommand()
   Adp.InsertCommand = cmb.GetInsertCommand()
   Adp.UpdateCommand = cmb.GetUpdateCommand()

   Adp.InsertCommand.Transaction = Trans
   Adp.DeleteCommand.Transaction = Trans
   Adp.UpdateCommand.Transaction = Trans

   Dim dt As New DataTable
   Adp.Fill(dt)
   /* ------------- 

    Perform insert/delete/update on DataSet or DataTable 
    -------------- */ 
   Adp.Update(dt)
   Trans.Commit()
  End Using
 Cn.Close()
End Using 
```

# lisp - 堆栈弹出不返回

> ID：12399244
> 
> 赞同：1
> 
> 时间：2012-09-13T04:04:03.837
> 
> 标签：lisp, stack

我正在尝试扩展并学习lisp。基础之一是实现一个简单的堆栈。一切正常，但我的`pop`功能。

```
;Returns and removes the first element of the stack
(defun my-pop ()
    (let (temp (car *stack*))
    (setq *stack* (cdr *stack*))
    temp)) 
```

这正确地删除了堆栈的“顶部”，但不返回它。早些时候，我有这个：

```
;Returns and removes the first element of the stack
(defun my-pop ()
    (print (car *stack*)
    (setq *stack* (cdr *stack*))) 
```

但我宁愿返回顶部。

我究竟做错了什么？（我认为这与范围有关......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T04:38:01.333

与范围无关，这是一个语法问题。LET 的语法是：

```
(let ((var1 val1)
      (var2 val2)
      ...)
  body) 
```

此外，a`(varN valN)`可以缩写为 just `varN`，相当于`(varN nil)`。所以你写的相当于：

```
(let ((temp nil)     ; bind TEMP to NIL
      (car *stack*)) ; bind CAR to value of *STACK*
  (setq *stack* (cdr *stack*))
  temp) 
```

您的 LET 绑定中需要一组额外的括号：

```
(let ((temp (car *stack*)))
  (setq *stack* (cdr *stack*))
  temp) 
```

您还可以使用内置运算符 PROG1：

```
(prog1 
  (car *stack*)
  (setq *stack* (cdr *stack))) 
```

# security - skipfish - 制作错误

> ID：12399248
> 
> 赞同：6
> 
> 时间：2012-09-13T04:04:47.017
> 
> 标签：security, ubuntu-12.04, skipfish

我正在尝试在我刚刚下载的 ubuntu 最新版本上使用 skipfish。我正在按照此链接[http://digitivity.org/943/how-to-install-google-skipfish-on-ubuntu-linux的说明进行操作](http://digitivity.org/943/how-to-install-google-skipfish-on-ubuntu-linux)

当我根据文章运行“nice make”时，我在下面得到了这个错误......谁能帮我提供一些解决这个问题的指示？提前致谢。

```
michaelsync@ubuntu:~/Downloads/skipfish-2.09b$ nice make
cc -L/usr/lib/ssl/engines -L/usr/lib/ -L/usr/lib/ssl/ -L/usr/local/lib/ -L/opt/local/lib src/skipfish.c -o skipfish \
        -O3 -Wno-format -Wall -funsigned-char -g -ggdb -I/usr/local/include/ -I/opt/local/include/ -I/usr/include/ -DVERSION=\"2.09b\" src/http_client.c src/database.c src/crawler.c src/analysis.c src/report.c src/checks.c src/signatures.c src/auth.c -lcrypto -lssl -lidn -lz -lpcre
In file included from src/skipfish.c:47:0:
src/signatures.h:24:18: fatal error: pcre.h: No such file or directory
compilation terminated.
src/http_client.c:40:18: fatal error: idna.h: No such file or directory
compilation terminated.
In file included from src/analysis.c:32:0:
src/signatures.h:24:18: fatal error: pcre.h: No such file or directory
compilation terminated.
src/signatures.c:27:18: fatal error: pcre.h: No such file or directory
compilation terminated.
make: *** [skipfish] Error 1 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-13T05:20:12.123

您缺少开发库。运行此命令：

```
 sudo apt-get install libpcre3-dev  libidn11-dev 
```

# plc - 欧姆龙 PLC 以太网卡

> ID：12399252
> 
> 赞同：2
> 
> 时间：2012-09-13T04:05:15.663
> 
> 标签：plc

我在 Omron PLC 中有一个以太网卡。有什么方法可以自动检查以太网卡是否工作？如果没有，有没有手动的方法？例如，如果卡要在 PLC 上断开，则会出现错误。但是，如果卡只是失去与服务器的信号，那么它不会出错。有关如何执行此操作的任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:45:19.220

您可以检查几种类型的错误。您执行此操作的方式取决于错误的类型。你可以检查的事情：

ETN 单元错误状态（位于 PLC CIO 地址 CIO 1500 +（25 x 单元编号）+18）

报告内容：IP 配置、路由、DNS、邮件、网络服务等错误。请参阅：手册第 8-2 节

ETN 单元还保留一个内部错误日志（手册第 8-3 节），您可以使用 FINS 命令将其读出到您的 HMI 软件（如果您使用它）。这记录了 ETN 单元内部的所有错误。

PLC 中还有其他用于 CPU 总线设备（如 ETN 单元）的内存预留，它们提供基本状态标志，您可以将其包含在梯形逻辑中以引发警报等（参见第 4-3 节：辅助区域数据）。

这些标志表示单元是否正在初始化，例如是否初始化成功，准备好执行网络命令，最后执行的命令是否完成OK或返回错误代码（可以从上面的错误日志中读取）等。这些可以指示 PLC 是否无法与 ETN 设备正确通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:01:24.667

您可以实现单字节位置，该位置将由服务器每秒自动递增。然后每隔几秒钟检查一次您的 PLC 逻辑，如果旧读数与新读数相同，那么您会触发一个警报，表明物理服务器（它是一个通信客户端）没有与 PLC 以太网卡通信。

# css - Sass::SyntaxError in Static_pages#home Hatrl 的教程

> ID：12399254
> 
> 赞同：1
> 
> 时间：2012-09-13T04:05:41.910
> 
> 标签：css, ruby-on-rails, ruby

我正在编写 Michael Hartl Rails 教程（目前是第 7 章）。当我尝试运行服务器时，会出现此消息：

```
Sass::SyntaxError in Static_pages#home

Showing C:/rails_project/sample_app/app/views/layouts/application.html.erb where line      #5 raised:

Invalid CSS after "}": expected "}", was ""
(in C:/rails_project/sample_app/app/assets/stylesheets/custom.css.scss)

Extracted source (around line #5):

2: <html>
3:   <head>
4:     <title><%= full_title(yield(:title)) %></title>
5:     <%= stylesheet_link_tag    "application", media: "all" %>
6:     <%= javascript_include_tag "application" %>
7:     <%= csrf_meta_tags %>
8:     <%= render 'layouts/shim' %>    

Rails.root: C:/rails_project/sample_app
Application Trace | Framework Trace | Full Trace

app/assets/stylesheets/custom.css.scss:104
app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___917874405_26658636' 
```

来自 application.html.erb 的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= full_title(yield(:title)) %></title>
    <%= stylesheet_link_tag    "application", media: "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <%= render 'layouts/shim' %>    
  </head>
  <body>
    <%= render 'layouts/header' %>
    <div class="container">
      <%= yield %>
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>
  </body>
</html> 
```

我不知道问题出在哪里。错误消息似乎不足以显示 aplication.html.erb 中存在的代码。有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:10:21.000

错误在您的样式表中：

> 应用程序/资产/样式表/custom.css.scss

您的应用程序正在使用 Sass (http://sass-lang.com)，并且上面列出的文件中存在问题。修复 .scss 错误，错误消息将消失。不幸的是，它似乎没有在该 .scss 文件中为您提供错误的行号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-08T03:21:57.590

在完成本教程时，我收到了同样的错误消息。

我意识到我`;`在第一行代码的末尾省略了 a`custom.css.scss`

代替：

```
@import "bootstrap" 
```

它必须是：

```
@import "bootstrap"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:49:23.443

我猜你正在使用 saas 并且你正在使用 css“{}”。在我们不使用的 saas 中。您的 saas 将被解析并编译成 css。对于解析 saas 遵循不同的语法。这里我将演示一个saas的例子

```
.head
  width: 100%
  .in.out
    width: 50% 
```

注意上面的语法。这意味着在具有类**“head”**的元素上应用宽度 100%，如果**在“.head”中找到具有类“in”和“out”**的元素，它应该具有**50% 的宽度**。另请注意，用于缩进的空格应该相同，并且在**“property:”**之后给出一个空格

错误的方法

```
width:100% 
```

正确的方法

```
width: 100% 
```

# crud - Spring Roo：如何标记某些字段以不生成 MVC 脚手架

> ID：12399257
> 
> 赞同：1
> 
> 时间：2012-09-13T04:06:16.020
> 
> 标签：crud, spring-roo, spring-data, jspx

我的实体配置为可被 Spring Data 审计，因此它有以下 4 个字段：

*   由...制作
*   最后更新者
*   创建时间
*   上次更新时间

但是，我不想让它出现在 Spring Roo 生成的 CRUD 屏幕上。我尝试在生成的 jspx 中删除这些字段标签，之后每当我在实体中添加/删除字段时，Spring Roo 都会重新生成 jspx 并添加已删除的字段标签。

这很烦人，我们有什么方法可以标记那些字段不支持脚手架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:34:30.617

在 jspx 中，将`z`属性设置为`user-managed`并将`render`属性设置为`false`.

# python - 在python中查找递归调用的级别

> ID：12399259
> 
> 赞同：23
> 
> 时间：2012-09-13T04:06:42.273
> 
> 标签：python

我有一个递归调用的函数，我想知道当前的递归级别。下面的代码显示了我用来计算它的方法，但它没有给出预期的结果。

例如：要找到系统路径的递归级别：

```
 import os
    funccount = 0

    def reccount(src):
        global funccount
        print "Function level of %s is %d" %(src, funccount)

    def runrec(src):
        global funccount
        funccount = funccount + 1
        lists = os.listdir(src)
        if((len(lists) == 0)):
            funccount = funccount - 1
        reccount(src)
        for x in lists:
             srcname = os.path.join(src, x)
             if((len(lists) - 1) == lists.index(x)):
                  if (not(os.path.isdir(srcname))):
                       funccount = funccount - 1
             if os.path.isdir(srcname):
                runrec(srcname)

    runrec(C:\test) 
```

问题：给定一个目录路径，打印目录的递归级别

目录结构是：在我的目录结构中，我将调用函数“reccount(Test)”（函数将使用 MainFolder 的路径调用）。我想知道每个文件夹的递归调用级别。（仅限目录）

```
Test:
   |----------doc
   |----------share
                |----------doc
                            |----------file1
   |----------bin
                |----------common
                             |----------doc
   |----------extras
   |----------file2 
```

当我调用该过程时，我得到以下结果：

```
 Function level of C:\test is 1
    Function level of C:\test\bin is 2
    Function level of C:\test\bin\common is 3
    Function level of C:\test\bin\common\doc is 3
    Function level of C:\test\doc is 3
    Function level of C:\test\extras is 3
    Function level of C:\test\share is 4
    Function level of C:\test\share\doc is 5 
```

如您所见，当它打印 bin/common/doc 的结果时，它打印的是 3 而不是 4，并且所有后续结果都是错误的

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-13T04:08:41.667

```
def some_method(data, level=0):

    some_method(..., level=level+1)

if __name__ == '__main__':
    some_method(my_data) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-13T05:19:58.590

```
from inspect import getouterframes, currentframe
import os

def runrec(src):
    level = len(getouterframes(currentframe(1)))
    print("Function level of {} is {}".format(src, level))
    for x in os.listdir(src):
        srcname = os.path.join(src, x)
        if os.path.isdir(srcname):
            runrec(srcname)

runrec('C:\\test') 
```

* * *

```
Function level of C:\test is 1
Function level of C:\test\bin is 2
Function level of C:\test\bin\common is 3
Function level of C:\test\bin\common\doc is 4
Function level of C:\test\doc is 2
Function level of C:\test\extras is 2
Function level of C:\test\share is 2
Function level of C:\test\share\doc is 3 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-13T04:09:13.570

为什么不将递归级别存储在参数中？

```
def runrec(src, level=1):
  # ...
  runrec(new_src, level + 1) 
```

这样，您就不需要全局变量：

```
def reccount(src, level):
    print "Function count of {} is {}".format(src, level) 
```

# android - 视图左上角的关闭图标

> ID：12399261
> 
> 赞同：0
> 
> 时间：2012-09-13T04:07:06.673
> 
> 标签：android, user-interface

这是一个由photoshop制作的原型UI，你可以看到`close`视图的左上方有一个图标。

![在此处输入图像描述](../Images/d0c0a6cef7950a19d1dbddb979257319.png)

我想知道android中是否有任何控件可以实现这个？如果没有，如何制作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:09:57.470

不，你没有。要获得这种 UI，您只需分别裁剪所有图像并使用`Adapter`和扩展您的自定义布局。

在您的情况下，您需要创建关闭图标图像，将其放入 ImageView 并将其对齐到您想要的任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:30:12.037

希望对你有帮助

```
<RelativeLayout
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_centerInParent="true"
     android:background="#00000000" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_margin="20dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_margin="1dp"
        android:background="@drawable/show_alert_round"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

</RelativeLayout>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/cross_button" /> 
```

# .net - 为什么反射找不到 wdDialogEditFind 的具体成员？

> ID：12399271
> 
> 赞同：1
> 
> 时间：2012-09-13T04:07:51.743
> 
> 标签：.net, com, ms-word, vsto, ms-office

我正在开发一个 VSTO 项目，并希望在**隐藏模式下使用****Word 对话框**，就像下面的代码一样：

 **### [来自 MSDN 的代码](http://msdn.microsoft.com/zh-cn/library/bhy5dcs0#Y100)

```
dynamic dialog = Application.Dialogs[Word.WdWordDialog.wdDialogFilePageSetup];
dialog.PageWidth = "3.3\"";
dialog.PageHeight = "6\"";
dialog.TopMargin = "0.71\"";
dialog.BottomMargin = "0.81\"";
dialog.LeftMargin = "0.66\"";
dialog.RightMargin = "0.66\"";
dialog.HeaderDistance = "0.28\"";
dialog.Orientation = "0";
dialog.DifferentFirstPage = "0";
dialog.FirstPage = "0";
dialog.OtherPages = "0";

// Apply these settings only to the current selection with this line of code:
dialog.ApplyPropsTo = "3";

// Apply the settings.
dialog.Execute(); 
```

我想实现另一个 diaglog `wdDialogEditFind`，但方法和属性是未知的。然后使用反射来检索它们（*后期绑定*）。但没有找到有用的方法。

```
Word.Dialog dlg = this.Application.Dialogs[Word.WdWordDialog.wdDialogEditFind];

System.Type t = dlg.Type.GetType();
System.Reflection.MemberInfo[] memInfo = t.GetMembers();

string str = "";
foreach (System.Reflection.MemberInfo m in memInfo)
    str += m.Name + "\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:02:12.187

MS Word interop 对您隐藏这些成员，因为它依赖于**[COM RCW](http://msdn.microsoft.com/en-us/library/8bwh56xe.aspx)**。反射不能用于遍历属性，因为它们不是为[`Dialog`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.dialog)基类型定义的。如果您想知道可用的属性 - 请参阅[此 MSDN 参考](http://msdn.microsoft.com/en-us/library/office/ff845471.aspx)以了解`wdDialogEditFind`.

### 内置对话框参数`wdDialogEditFind`（[*来自 MSDN*](http://msdn.microsoft.com/en-us/library/office/ff845471.aspx)）

> Find, Replace, Direction, MatchCase, WholeWord, PatternMatch, SoundsLike, FindNext, ReplaceOne, ReplaceAll, Format, Wrap, FindAllWordForms, MatchByte, FuzzyFind, Destination, CorrectEnd, MatchKashida, MatchDiacritics, MatchAlefHamza, MatchControl

如果您坚持要了解 COM 方法和属性 - 您可以深入了解[COM 类型](http://msdn.microsoft.com/en-us/magazine/dd347981.aspx)[`IDispatch`](https://stackoverflow.com/a/10883851/175679)并从中筛选。**

# objective-c - 更新字典中的值

> ID：12399272
> 
> 赞同：1
> 
> 时间：2012-09-13T04:07:56.893
> 
> 标签：objective-c

我已经建立了自己的名为 myObjectClass 的类，如下所示：

```
@interface myObjectClass : NSObject{
    NSMutableString *theRef;
    NSMutableString *theLat;
    NSMutableString *theLong;
    NSMutableString *theDesc;
    NSMutableString *theTime;

}

@property(nonatomic,retain) NSMutableString *theRef;
@property (nonatomic, retain) NSMutableString *theLat;
@property (nonatomic, retain) NSMutableString *theLong;
@property (nonatomic, retain) NSMutableString *theDesc;
@property (nonatomic, retain) NSMutableString *theTime;

@end 
```

当我在字典中添加新条目时，一切正常。当我尝试编辑现有条目时，它会崩溃。

```
myObjectClass *myRouteData = [[myObjectClass alloc]init];
[myRouteData.theRef setString:myKey.text];
[myRouteData.theLat setString:tf1.text];
[myRouteData.theLong setString:tf2.text];
[myRouteData.theDesc setString:myDesc.text];
[myRouteData.theTime setString:myTime.text];

//The values for all of the above are the correct updated values.
//crashes on next line for existing object

[[masterDelegate myData] setObject:myRouteData forKey:myKey.text];

[myRouteData release]; 
```

有任何想法吗？

# ios - IOS CoreData，使用哪个 NSManagedObjectContextConcurrencyType，为什么？

> ID：12399277
> 
> 赞同：5
> 
> 时间：2012-09-13T04:08:43.040
> 
> 标签：ios, core-data, nsmanagedobjectcontext

我无法理解 NSManagedObjectContextConcurrencyType 的文档。在以下情况下我会使用哪种类型，为什么？

```
- (void)viewDidLoad
{
    self.managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:???];
    [self loadRecordsFromCoreData];
}

- (void)loadRecordsFromCoreData {

[self.managedObjectContext performBlockAndWait:^{
    //[self.managedObjectContext reset]; //do I need to do this?
    NSError *error = nil;
    NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"Item"];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"display == YES"];
    [request setPredicate:predicate];
    [request setSortDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"order" ascending:YES]]];

    self.items = nil;
    self.items = [self.managedObjectContext executeFetchRequest:request error:&error];

}];

[self displayItems];
} 
```

-displayItems 将根据 self.items 数组中对象的属性显示视图，例如 item.image、item.title、item.descriptionText 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:35:53.947

`NSMainQueueConcurrencyType`.

UI 事件（例如视图确实加载）发生在主线程上。您将在主线程上操作您的对象（本例中为 self.items），因此您应该确保将它们提取到上下文中/也保存在该线程上。

`NSPrivateQueueConcurrencyType`适用于要在后台线程上完成工作的上下文。

# objective-c - 如何过滤 NSDictionary 以在 Objective-C 中显示某些关键字

> ID：12399278
> 
> 赞同：0
> 
> 时间：2012-09-13T04:08:51.540
> 
> 标签：objective-c, xcode, filter, nsdictionary, keyword

如果它有我需要的关键字并显示它，我想实际检查字典中的内容。如果它没有我要查找的关键字，则不会显示它。

例如，一个城市词典，在每个城市中，都有对该城市的描述。我想在该描述中查找关键字“mall”，如果该城市有该关键字，它应该显示该城市及其描述。

我怎样才能做到这一点？提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:20:18.830

我会遍历字典，并使用 rangeOfString 来查找单词“mall”

```
 NSMutableArray *array = [NSMutableArray array];
    for (NSString *aKey in [dict allKeys]) {
        NSString *desc = [dict valueForKey:aKey];
        if ([desc rangeOfString:@"mall"].length == 4) {
            [array addObject:[NSDictionary dictionaryWithObject:desc forKey:aKey]];
        }
    }
    //do what you want with array to display the values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:20:33.987

`valueForKey`方法。

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/valueForKey](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/valueForKey)：

你可以只做一个 if 情况，如果它返回`nil`，什么也不显示。否则，显示返回值。

这是一个使用它的例子

`NSString *string = [NSString stringWithString:[dictionary valueForKey:@"mall"]]; if (string) //Send that string to somewhere where it would be visible ;`

# sql - 从联合 tsql 中选择

> ID：12399281
> 
> 赞同：32
> 
> 时间：2012-09-13T04:09:17.500
> 
> 标签：sql, sql-server-2005, union

是否可以从联合的结果中进行选择？例如，我正在尝试执行以下操作：

```
SELECT A
FROM
(
    SELECT A, B FROM TableA
    UNION
    SELECT A, B FROM TableB
)
WHERE B > 'some value' 
```

我是否遗漏了什么或假设这是如何工作的？我正在使用 MSSQL 2005，所以任何解决方案都需要符合我可以在那里做的事情。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-13T04:14:42.767

您应该为您的表提供*别名。*所以试试这个：

```
SELECT A
FROM
(
    SELECT A, B FROM TableA
    UNION
    SELECT A, B FROM TableB
) AS tbl
WHERE B > 'some value' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T04:16:21.920

提供别名，否则您将收到

```
Msg 156, Level 15, State 1, Line 21
Incorrect syntax near the keyword 'WHERE'. 
```

试试这个（给出别名）

```
DECLARE @TableA Table(A int, B int)
DECLARE @TableB Table(A int, B int)

INSERT INTO @TableA VALUES(1,1)
INSERT INTO @TableA VALUES(1,2)
INSERT INTO @TableA VALUES(1,3)
INSERT INTO @TableA VALUES(1,4)

INSERT INTO @TableB VALUES(2,1)
INSERT INTO @TableB VALUES(2,2)
INSERT INTO @TableB VALUES(2,3)
INSERT INTO @TableB VALUES(2,4)

SELECT A
FROM
(
    SELECT A, B FROM @TableA
    UNION
    SELECT A, B FROM @TableB
)X -- here X is table Alias
WHERE B > 0 
```

**结果**

**一种**

```
1
1
1
1
2
2
2
2 
```

# c# - 用于视频通话的 Skype API

> ID：12399289
> 
> 赞同：2
> 
> 时间：2012-09-13T04:10:34.247
> 
> 标签：c#, asp.net, skype

我正在使用 Skype api 从窗口应用程序进行视频通话：

(1)。当用户没有在我们这边（呼叫方）登录到Skype时，它会给出错误“等待超时”

(2)。如果我们已经登录到 Skype 并且被呼叫的人接听了呼叫应用程序就会崩溃。

我的代码是：

```
public partial class Form1 : Form
{
    static string SkypeID = string.Empty;
    public Form1()
    {
        InitializeComponent();
    }

    private void btn_skypecall_Click(object sender, EventArgs e)
    {

        SkypeID = txt_skypeID.Text.Trim();
        if (!string.IsNullOrEmpty(SkypeID))
        {
            try
            {
                Skype skype;

                skype = new Skype("Skype4COM.Skype", "Skype_");

                if (!skype.Client.IsRunning)
                {
                    skype.Client.Start(false, false);
                }

                skype.Attach(5, true);

                skype.CallStatus += new _ISkypeEvents_CallStatusEventHandler(skype_CallStatus);

                Call call = skype.PlaceCall(SkypeID);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        }
        else
        {
            DialogResult result = MessageBox.Show("Please enter SkypeId ", "", MessageBoxButtons.OK, MessageBoxIcon.Question, MessageBoxDefaultButton.Button1);
        }
    }

    static void skype_CallStatus(Call pCall, TCallStatus Status)
    {
        if (Status == TCallStatus.clsInProgress && pCall.PartnerHandle == SkypeID)
        {
            pCall.StartVideoSend();
        }
    }

} 
```

如何解决这两个问题？任何帮助将不胜感激

提前致谢

# html - CSS中大小均匀的按钮？

> ID：12399294
> 
> 赞同：0
> 
> 时间：2012-09-13T04:11:26.170
> 
> 标签：html, css, button, html-table

我正在尝试创建大小均匀的 CSS 按钮链接。我有 15 个按钮，按 3x5 排列在一张桌子上。它们看起来很棒，除了第一列按钮比其他 2 列更宽，因为其中一个按钮的文本更长。

的HTML：

```
 <tr>
        <td><a href=""><div class="btn">Flash</div></a></td>
        <td><a href=""><div class="btn">Photoshop</div></a></td>
        <td><a href=""><div class="btn">Fireworks</div></a></td>
    </tr> 
```

CSS：

```
.btn {
    width:100%;  
    padding: 3px 0px;
    background-color: grey; 
    text-align: center; 
    -webkit-border-radius:10px;
    -moz-border-radius:10px;
    border-radius:10px;
    border:1px solid black;
    position:relative;
    bottom:3px;
    right:2px;
    -webkit-box-shadow: 1px 2px black; 
    -moz-box-shadow: 1px 2px black; 
    box-shadow: 1px 2px black; } 
```

有没有人有一个解决方案，可以在不固定宽度的情况下强制所有按钮的大小相同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T04:12:56.970

只需给出您的`td`sa 百分比宽度：

```
td {
    width: 33.33%;
} 
```

# c++ - 为什么 for(true;true;std::cin>>str) 不起作用？

> ID：12399296
> 
> 赞同：-1
> 
> 时间：2012-09-13T04:12:07.473
> 
> 标签：c++

我知道我可以使用`while (std::cin >> str)`.

当我尝试以下作为等效 for 循环时，我在 Visual C++ 2010 中收到一个无用的错误。为什么这在技术上不正确？

```
 for (true; true; std::cin>>str) 
    {
         // Get input forever 
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T04:18:30.213

我猜你的错误是使用未初始化变量的影响，`str`. 原因是 for 循环中的最后一个参数直到循环完成第一次迭代后才会执行。

此外，如果您需要无限循环，您可以执行此操作或许多其他循环设置：

```
for ( ; ; ) {
    std::cin >> str;
    // Do your stuff
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T04:14:47.407

相当于

```
for(;std::cin>>str;) {} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T04:21:51.220

等效的 for 循环应该是

```
for (; std::cin >> str; ) {} 
```

因为 for 循环中的 seconde 语句告诉它何时应该停止。当输入结束时，`std::cin >> str`返回 EOF 并停止循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T04:29:32.110

这不是 for 的有用用法。For 意味着迭代，而不是循环，直到结果出现，就像 while 一样。

for(;std::cin>>str;) {}

是您正在寻找的东西（如上面发布的）。但是，真正的问题是为什么要添加额外的样板代码和错误风险而不是 while？

此外，我通常不喜欢在我的条件测试中（在 for 或 while 中）赋值，因为意外的后果可能会做一些奇怪的事情。虽然这种情况可能很好，但我更喜欢：

```
while(true) {
    cin >> str;

    if(....) {
        break;
    }
} 
```

好处：这是非常清楚的，只有你明确编程的东西才能打破循环。

缺点：这需要更多的代码行，并且有一个无限循环，可能会在代码分析工具中引发错误。

# backbone.js - Backbone：在 jst.ejs 文件中呈现动态内容

> ID：12399306
> 
> 赞同：1
> 
> 时间：2012-09-13T04:13:47.987
> 
> 标签：backbone.js, ejs

我正在关注 Rails 的 Ryan Bates 主干.js 教程。他使用 jst.eco 模板。但是，我使用的是 jst.ejs 文件。

他的视图创建了一些他想插入到模板中的内容，即“Entries go here”

```
$(this.el).html(this.template(entries: "Entries go here"));
 return this; 
```

它将被插入 `<%= @entries %>`到模板中

```
<h1>App Name</h1>

<%= @entries %> 
```

我正在使用 index.jst.ejs 文件执行此操作，但它不起作用。

第一的。有谁知道我应该在模板中使用哪些标签来呈现动态内容？

`entries: "Entries go here"`其次，在 template() 括号内做是否仍然正确，如

```
$(this.el).html(this.template({entries: "Entries go here"})); 
```

注意，我没有使用咖啡脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:29:26.320

模板中的“条目”前面不需要@ 或“this”。

视图/条目/索引

```
 render: function(){

    $(this.el).html(this.template({

        entries: "Entries go here"

    }));
    return this;
  } 
```

模板/条目/index.jst.ejs

```
<%= entries %> 
```

# iphone - 未捕获的异常：-{WebDataSource indexof:]：使用框架时无法识别的选择器

> ID：12399311
> 
> 赞同：0
> 
> 时间：2012-09-13T04:13:57.373
> 
> 标签：iphone, ios, tabbar, uitabbaritem

```
 - (void)ItemPressed:(id)sender {
    NSInteger index = [self.tabBarItems indexOfObject:sender];
    BOOL shouldSelect = [self delegatedDecisionIfWeShouldSelectViewController:[self.viewControllers objectAtIndex:index] atIndex:index];

    if (shouldSelect) {
        if (index != self.selectedIndex) {
            self.selectedIndex = index;
        } else {
            if ([self.selectedViewController isKindOfClass:[UINavigationController class]]) {
                UINavigationController *navigationController = (UINavigationController *)self.selectedViewController;

                [navigationController popToRootViewControllerAnimated:YES];
            }
        }
    }
} 
```

嗨，我创建了 tabbarcontroller 框架**，使用源代码工作正常，** **但创建的框架在选择一个索引到另一个时出错**

**`-{WebDataSource indexof:]: unrecognized selector instance`** 我得到了上述错误。

有什么想法吗？

我声明了如下标签栏项目

```
vc1 = [[webviewname alloc] initUrl:[NSURL URLWithString:@"https://www.google.com"]];
    vc2 = [[webviewname  alloc] initUrl:[NSURL URLWithString:@"https://www.yahoo.com"]];

    vc1.O_tabBarItem = [OTabBarItem itemWithTitle:@"index" image:[UIImage imageNamed:@"index"]];
    vc2.O_tabBarItem = [OTabBarItem itemWithTitle:@"index" image:[UIImage imageNamed:@"index"]];

    vc1.delegate=self;
    vc2.delegate=self;

    NSArray *vControl = [NSArray arrayWithObjects:vc1,vc2,nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:46:59.477

我希望你期望`self.tabBarItems`成为一个`NSArray`对象。但是在这里，对象引用了其他一些实例，比如 的实例`WebDataSource`。

是否可以显示您如何声明和填充数组`tabBarItems`？

# telerik - 如何绑定 radgrid

> ID：12399313
> 
> 赞同：0
> 
> 时间：2012-09-13T04:13:58.450
> 
> 标签：telerik

我使用过普通的 gridview 控件，在我的新项目中我必须使用 radgrid，我对 ragrid 完全陌生，请指导我开始使用 radgrid，我今天必须自己填写表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:19:14.347

它与普通网格相同。它会是一样的。但只是事件名称不同，还有更多功能。

```
<telerik:RadGrid ID="RadGrid1" 
            Width="97%" 
             AllowSorting="True" PageSize="15" AllowPaging="True" AllowMultiRowSelection="True" runat="server" Gridlines="None">
             <MasterTableView Width="100%" Summary="RadGrid table" />    
             <PagerStyle Mode="NextPrevAndNumeric" />
            </telerik:RadGrid> 
```

在代码隐藏页面中。

```
 RadGrid1.DataSource = yourDataset;
 RadGrid1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T13:31:29.390

有时使用“NeedDataSource”事件会更好，具体取决于您的情况以及网格的加载方式......您不需要在网格上显式 DataBind()。

在某些时候可能会帮助其他人..？

:)

# python - 为什么我需要 Django 来实现一个简单的 Hello World？

> ID：12399318
> 
> 赞同：-3
> 
> 时间：2012-09-13T04:14:25.087
> 
> 标签：python, django

我伙计们：

很抱歉打扰你，但这不是懒惰的问题。在谷歌搜索没有成功之后，我在这里发布了这个问题。

我知道如何用 Python 编程，但我的兴趣是 Web 开发。

我想要的很简单：

1) 一个 HTML 文件，带有一个用于写入一个名称的文本框。HTML 文件必须具有经典的

<form action="GetData.py" method="POST">（或 GET）

2) 一个 Python 文件 (GetData.py)，它读取文本框的内容并编写如下内容：

*你好 <文本框中的姓名>*

问题是我发现的所有免费网络托管服务都不允许这样做，并迫使我使用一个网络框架（其中大部分是 Django）。

我已经阅读了 Django 文档，第一个示例立即开始使用我不需要的数据库。

有人可以给我一个关于我必须配置哪些文件以及我必须做哪些配置的线索。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T04:28:25.750

我对 Flask 最熟悉，所以这里有一个简单的“Hello World”：

```
from flask import Flask, request
app = Flask(__name__)

@app.route('/say_hello/', methods=['GET', 'POST'])
def hello():
    if request.method == 'POST':
        name = request.form['name']
    else:
        name = request.args.get('name', 'Bob')  # Defaults to "Bob"

    return 'Hello {name}!'.format(name=name)

if __name__ == '__main__':
    app.run(debug=True) 
```

还有一些测试：

```
$ curl -d "name=John" "http://127.0.0.1:5000/say_hello/"  # POST
Hello John!
$ curl "http://127.0.0.1:5000/say_hello/?name=John"       # GET
Hello John! 
```

这是 Flask 部署页面的链接：http: [//flask.pocoo.org/docs/deploying/](http://flask.pocoo.org/docs/deploying/)。我不确定它是否有用，因此请阅读您的虚拟主机希望您如何部署应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:22:40.527

你可以看看[Google App Engine](https://developers.google.com/appengine/)。它确实有一个框架，但它是一个非常简单的框架。而且你真的不需要使用它，纯 python 中的任何东西都可能会工作。像[Bottle](http://bottlepy.org/docs/dev/)，一个非常简单的网络框架，我认为你可以用它做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:25:59.537

Django 只是 Python 中使用最广泛的 Web 框架。现在 Django 建议的部署运行时是 WSGI。如果您的主机支持它，您也可以运行微框架。如果 Django 是您现在的“唯一”选项，我建议您跳过本教程的数据库部分。您可以从本教程中遵循的步骤：

1.  [创建项目](https://docs.djangoproject.com/en/1.4/intro/tutorial01/#creating-a-project)
2.  [开发服务器](https://docs.djangoproject.com/en/1.4/intro/tutorial01/#the-development-server)
3.  直接跳到[教程的第 3 部分](https://docs.djangoproject.com/en/1.4/intro/tutorial03/)（完全），这里再次忽略 db/model 相关的东西

无论如何，谷歌“Django Hello World”，你也可能达到你的目标。:P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T04:28:57.070

Flask、web.py 或直接的 WSGI 是你的答案。插入 Apache 或 NGINX 的网络服务器 python 模块（如 modWSGI）也将与这些更最小的框架一起使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T05:17:42.850

这是简单的 django 方法；但你真的应该接受@Blender 的回答，因为 Flask （以及其他像[bottle](http://bottlepy.org/)和[web.py](http://webpy.org/)）是完成你的任务的正确方法。正如您将看到的，django 中的简单方法涉及的内容要多得多。

首先，[下载并安装](https://www.djangoproject.com/download/)django。

然后，启动一个新项目并向其中添加一个新应用程序。然后创建一个`forms.py`将保存您的表单：

```
$ django-admin.py startproject simple_foo
$ cd simple_foo
~/simple_foo $ python manage.py startapp form_processor
~/simple_foo $ cd form_processor
~/simple_foo/form_processor $ vi forms.py 
```

添加`forms.py`这个并保存文件并关闭您的编辑器：

```
from django import forms

class MyForm(forms.Form):
    name = forms.CharField(label='Your Name:') 
```

接下来，我们创建视图。打开目录中现有`views.py`的`form_processor`并添加：

```
from django.shortcuts import render
from form_processor.forms import MyForm

def home(request):
   if request.method == 'POST':
       f = MyForm(request.POST)
       if f.is_valid():
          return render(request,'results.html',{'result':f.cleaned_data['name']})
       else:
          return render(request,'index.html',{'form': f})
   else:
       return render(request,'index.html',{'form':MyForm()}) 
```

最后，创建您的模板。创建一个名为`templates`in的目录`form_processor`。在此目录中，创建一个`results.html`并在其中键入`You entered {{ result }}`并保存文件。创建另一个`index.html`并在其中添加：

```
<form method="POST" action=".">
  {% csrf_token %}
  {{ form }}
  <input type="submit" />
</form> 
```

至此，您的应用程序已完成。接下来的步骤告诉 django 您的应用程序并将其连接到一个 url。

在`simple_foo/simple_foo`目录中（这不是错字，它有两次），打开`settings.py`文件。

向下滚动到`INSTALLED_APPS`并添加您的新应用程序，它应该如下所示：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'form_processor',
) 
```

关闭并保存此文件。在同一`simple_foo/simple_foo`目录中，打开`urls.py`. 取消注释下面的第一行`# Examples:`并将其更改为如下所示：

```
url(r'^$', 'form_processor.views.home', name='home'), 
```

保存此文件。

现在你完成了。剩下的就是运行内置的 Web 服务器：

```
burhan@sandbox:~/simple_foo$ python manage.py runserver
Validating models...

0 errors found
Django version 1.4, using settings 'simple_foo.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C. 
```

打开浏览器`http://127.0.0.1:8000/`并填写表格。

# python - 计算协方差矩阵 - numpy.cov 和 numpy.dot 之间的区别？

> ID：12399323
> 
> 赞同：4
> 
> 时间：2012-09-13T04:14:59.000
> 
> 标签：python, numpy, covariance, pca

我正在使用 3 维 numpy 数组，我最终将在其上执行 PCA。我首先将 3-D 数组展平为 2-D，以便我可以计算协方差（然后是特征值和特征向量）。

在计算协方差矩阵时，我使用 numpy.cov 与 numpy.dot 得到不同的结果。如果我的二维数组是 (5,9)，我希望得到一个 5x5（即 NxN）协方差矩阵。这就是我使用 numpy.dot 得到的结果。使用 numpy.cov，我最终得到一个 9x9 的协方差矩阵。这不符合我需要的形状，但老实说我不知道​​哪个是正确的。在我研究过的示例中，我已经看到了两种用于计算协方差的方法。

如果我通过 numpy.linalg.eig 计算携带 numpy.dot 与 numpy.cov，我显然会得到不同的答案（全部打印在示例输出下面）。所以，在这一点上，我很困惑哪种方法是正确的，或者我可能哪里出错了。

这是带有输出的测试代码。谢谢你的帮助。

```
import numpy as np

a = np.random.random(((5,3,3))); # example of what real input will look like

# create 2D flattened version of 3D input array
d1,d2,d3 = a.shape
b = np.zeros([d1,d2*d3])
for i in range(len(a)):
  b[i] = a[i].flatten()

print "shape of 3D array: ", a.shape
print "shape of flattened 2D array: ", b.shape, "\n"
print "flattened 2D array:\n", b, "\n"

# mean-center the flattened array
b -= np.mean(b, axis=0)

# calculate the covariance matrix of the flattened array
covar1 = np.cov(b, rowvar=0)   # this makes a 9x9 array
covar2 = np.dot(b, b.T)        # this makes a 5x5 array

print "covariance via numpy.cov:\n", covar1, "\n"
print "covariance via numpy.dot:\n", covar2, "\n"

# calculate eigenvalues and eigenvectors
eval1, evec1 = np.linalg.eig(covar1)
eval2, evec2 = np.linalg.eig(covar2)

print "eigenvalues via numpy.cov covariance matrix:\n", eval1, "\n"
print "eigenvectors via numpy.cov covariance matrix:\n", evec1, "\n"
print "eigenvalues via numpy.dot covariance matrix:\n", eval2, "\n"
print "eigenvectors via numpy.dot covariance matrix:\n", evec2, "\n"

======= Output =======

shape of 3D array:  (5, 3, 3)
shape of flattened 2D array:  (5, 9)

flattened 2D array:
[[ 0.94964127  0.71015973  0.80994774  0.49727821  0.38270025  0.89136202
   0.19876615  0.72461047  0.43646456]
 [ 0.00502329  0.70593521  0.44001479  0.97576486  0.37261107  0.6318449
   0.86301405  0.21820704  0.91507706]
 [ 0.75411747  0.98462782  0.65109776  0.1083943   0.12867679  0.63172813
   0.85803498  0.89507165  0.62291308]
 [ 0.88589874  0.02797773  0.6421045   0.17255432  0.5713524   0.28589519
   0.55888288  0.7961657   0.4453764 ]
 [ 0.85774793  0.19511453  0.92167001  0.27340606  0.41849435  0.98349776
   0.19354437  0.2974041   0.52064868]]

covariance via numpy.cov():
[[ 0.15180806 -0.04977355  0.05733885 -0.11340765  0.00840097  0.01461576
  -0.08596712  0.07512366 -0.07509614]
 [-0.04977355  0.15853367 -0.02337953  0.0357429  -0.05604085  0.02600021
   0.06158462  0.0229808   0.03506849]
 [ 0.05733885 -0.02337953  0.0335786  -0.03485899  0.00294469  0.03209583
  -0.05378417  0.00490397 -0.02751816]
 [-0.11340765  0.0357429  -0.03485899  0.12340238  0.0052609   0.0144986
   0.02494029 -0.07492008  0.05109007]
 [ 0.00840097 -0.05604085  0.00294469  0.0052609   0.02529647 -0.01263607
  -0.02327657 -0.01136774 -0.01037048]
 [ 0.01461576  0.02600021  0.03209583  0.0144986  -0.01263607  0.07415853
  -0.05387152 -0.0345835  -0.00342481]
 [-0.08596712  0.06158462 -0.05378417  0.02494029 -0.02327657 -0.05387152
   0.11053971  0.00903926  0.04727671]
 [ 0.07512366  0.0229808   0.00490397 -0.07492008 -0.01136774 -0.0345835
   0.00903926  0.09436665 -0.03526195]
 [-0.07509614  0.03506849 -0.02751816  0.05109007 -0.01037048 -0.00342481
   0.04727671 -0.03526195  0.03900974]]

covariance via numpy.dot():
[[ 0.3211555  -0.34304471 -0.01453859 -0.1071505   0.14357829]
 [-0.34304471  1.24506647 -0.11174019 -0.43907983 -0.35120174]
 [-0.01453859 -0.11174019  0.57018674 -0.10412646 -0.3397815 ]
 [-0.1071505  -0.43907983 -0.10412646  0.60465919  0.0456976 ]
 [ 0.14357829 -0.35120174 -0.3397815   0.0456976   0.50170735]]

eigenvalues via numpy.cov covariance matrix:
[  3.34339027e-01 +0.00000000e+00j   1.98268985e-01 +0.00000000e+00j
   5.71434551e-02 +0.00000000e+00j   1.13399310e-01 +0.00000000e+00j
   3.38418299e-18 +1.46714498e-17j   3.38418299e-18 -1.46714498e-17j
   1.20944017e-18 +0.00000000e+00j  -8.89005842e-18 +0.00000000e+00j
  -6.59244508e-18 +0.00000000e+00j]

eigenvectors via numpy.cov covariance matrix:
[[-0.33898927+0.j          0.01567746+0.j         -0.32410513+0.j
   0.01868249+0.j          0.03901578-0.09858459j  0.03901578+0.09858459j
  -0.17596347+0.j          0.08294235+0.j          0.04883282+0.j        ]
 [ 0.03740184+0.j         -0.01106985+0.j          0.11199662+0.j
  -0.36257285+0.j          0.66513867+0.j          0.66513867+0.j
   0.34810753+0.j         -0.05174886+0.j         -0.21147240+0.j        ]
 [ 0.42193056+0.j          0.10153367+0.j         -0.52774125+0.j
  -0.57292678+0.j         -0.02584078-0.15425679j -0.02584078+0.15425679j
  -0.02594397+0.j         -0.23132722+0.j         -0.33824532+0.j        ]
 [-0.08723679+0.j         -0.17700647+0.j         -0.04490487+0.j
   0.14531440+0.j         -0.08669754+0.21485879j -0.08669754-0.21485879j
  -0.73208352+0.j          0.04474123+0.j         -0.09159437+0.j        ]
 [-0.26991334+0.j          0.39182156+0.j          0.18023454+0.j
  -0.14727224+0.j         -0.21261400+0.1100362j  -0.21261400-0.1100362j
   0.15211635+0.j          0.54168898+0.j         -0.36386803+0.j        ]
 [-0.39361702+0.j          0.48389127+0.j          0.12668909+0.j
   0.07739853+0.j          0.31569702-0.34166187j  0.31569702+0.34166187j
   0.11287735+0.j         -0.74889136+0.j         -0.42472067+0.j        ]
 [-0.29962418+0.j         -0.01577641+0.j          0.35742257+0.j
  -0.68969822+0.j         -0.28182091+0.13998238j -0.28182091-0.13998238j
  -0.40124817+0.j          0.06419507+0.j          0.47506061+0.j        ]
 [-0.57032501+0.j         -0.60505095+0.j         -0.30688172+0.j
  -0.11823642+0.j          0.07618472-0.0915626j   0.07618472+0.0915626j
   0.32272841+0.j         -0.10872383+0.j         -0.25867852+0.j        ]
 [-0.23498699+0.j          0.45164240+0.j         -0.57569388+0.j
   0.03856674+0.j         -0.07478874+0.27512969j -0.07478874-0.27512969j
  -0.10101603+0.j          0.25440413+0.j          0.47403650+0.j        ]]

eigenvalues via numpy.dot covariance matrix:
[  1.33735611e+00   7.93075942e-01   2.08276008e-16   4.53597239e-01
   2.28573820e-01]

eigenvectors via numpy.dot covariance matrix:
[[ 0.1223889  -0.87441162 -0.4472136  -0.13172011  0.05545353]
 [-0.54658696  0.08157704 -0.4472136   0.61361759  0.34360056]
 [ 0.70163289  0.24699239 -0.4472136   0.41717057 -0.26958257]
 [-0.41754523  0.17603863 -0.4472136  -0.33135976 -0.69632398]
 [ 0.1401104   0.36980356 -0.4472136  -0.56770828  0.56685246]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T04:24:06.853

`np.dot`只是两个矩阵的矩阵乘积。那不是协方差。你为什么用`rowvar=0`？如果你只是这样做`np.cov(b)`，它会给出一个正确尺寸的矩阵。

# python - 将“facet_filter”查询转换为pyes格式

> ID：12399326
> 
> 赞同：2
> 
> 时间：2012-09-13T04:15:21.277
> 
> 标签：python, json, elasticsearch, pyes

我有以下查询，我想将该查询更改为 PyES：

```
{
    "facets": {
        "participating-org.name": {
            "terms": {
                "field": "participating-org.name"
            },
            "facet_filter": {
                "term": {
                    "participating-org.role": "funding"
                }
            },
            "nested": "participating-org"
        }
    }
} 
```

我在 PyES 文档中搜索了有关此“facet_filter”的信息，但无法在 PyES 中找到好的查询。
**因此需要一些帮助来将此 JSON 查询转换为 PyES 格式。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:00:40.040

这应该有效。但它未经测试。我在另一个代码中类似地使用它。

```
from pyes.facets import FacetFactory, TermFacet, ANDFacetFilter
facet_factory = FacetFactory()
facet_filter = ANDFacetFilter(TermFilter('category'))
term_facet = TermFacet(
            field='attributes',
            facet_filter=facet_filter,
            name='yourfacet',
            size=100,
            )

facet_factory.add(term_facet) 
```

# javascript - 如何在不刷新页面的情况下更新我的显示框？

> ID：12399327
> 
> 赞同：-1
> 
> 时间：2012-09-13T04:15:35.143
> 
> 标签：javascript, greasemonkey, partial-page-refresh

我有一个脚本可以计算步数，`unicreatures.com`并添加了一个按钮来清除计数。它可以工作，但我对我的显示框在重新加载页面之前不会更新新计数这一事实不满意。有没有办法在清除计数后更新我的盒子的内容而无需重新加载页面？

```
var clearTotal= confirm("Do you really want to clear your step count?");
if (clearTotal== true) {
  localStorage.steps=0
  alert("yes");
}
else {
  alert("no");
}

}, true ) 
```

如果有人能指出我正确的方向，我会很高兴。我花了几个小时寻找答案，但也许我只是使用了错误的搜索词。

我不使用`JQuery`，所以请保留所有信息`JavaScript`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:40:44.043

您可以在回调中清除显示或编写闭包。

`一个非常简单的方法是在检查本地存储是否清除时将显示区域的值设置为`

 ````
var myTextField = document.getElementById('the_display_area_id');    
var clearTotal= confirm("Do you really want to clear your step count?");
if (clearTotal== true) {
    localStorage.steps=0
    myTextField.value() = ""; 
}else{
    alert("no");
} 
```

此外，使用像 amplify 这样的库进行本地存储，它会更容易处理跨浏览器的细微差别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:37:54.010

我希望我能早点看到它。

最简单的方法是更改`box.innerHTML`

```
if (clearTotal== true) {
  localStorage.steps=0
  box.innerHTML ='<div><p> ' +
  "You have taken "+localStorage.steps+" steps total" +
  '</br><button type="button" button id="clear">Clear total steps...</button></p></div>';
  document.body.appendChild( box );
  alert("yes");
} 
````

# r - 如何从具有多年多个事件的数据制作条形图

> ID：12399328
> 
> 赞同：1
> 
> 时间：2012-09-13T04:15:41.173
> 
> 标签：r, graph, plot, ggplot2

我有一个看起来像这样的数据框：

```
date     id         freq
6/17/12 0417D0214D   81
6/17/12 0417D2F96C  275
6/18/12 04179385A3    1
6/18/12 041793A84F    2
6/18/12 0417CA9138    2
6/18/12 0417D0214D  120 
```

如何制作一个堆叠条形图，其中 x 轴上的日期和 y 轴上的频率以及以相对大小和不同颜色显示的每个日期堆叠的不同 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:37:32.953

仅作为一个类别并没有太多工作，但这里有：

```
 dat <- read.table(text="date     id         freq
 6/17/12 0417D0214D   81
 6/17/12 0417D2F96C  275
 6/18/12 04179385A3    1
 6/18/12 041793A84F    2
 6/18/12 0417CA9138    2
 6/18/12 0417D0214D  120", header=TRUE)

 barplot(as.matrix(dat$freq) , beside=FALSE) 
```

# java - 类混淆，编写堆栈模拟器

> ID：12399331
> 
> 赞同：0
> 
> 时间：2012-09-13T04:16:02.700
> 
> 标签：java, oop

我在尝试实现一个简单的面向对象程序时遇到了一些严重的问题。我有一个堆栈类定义如下...

```
 import java.io.*;
    public class stack
    {
        // instance variables - replace the example below with your own
        private int maxStack;
        private int emptyStack;
        private int top;
        private int[] stack;

        public stack(int size)
        {        
            maxStack = size;
            emptyStack = -1;
            top = emptyStack;
            stack = new int[maxStack];
        }

        public int push(int y)
        {
            top++;
            stack[top]= y;
            return 0;
        }

        public int pull(int y){
            int temp = top;
            top--;
            return stack[temp];    
        }

        public boolean isEmpty(){
            return top == emptyStack;
        }

        public void print(){
            for(int i =top;i<0;i--){
                System.out.println("Position "+top+" "+stack[top]);
            }

        }

    }

I am trying to reference this class from another class that I am calling...

     import java.io.*;

     public class stackTest
      {

       public void stackStarter(){

            System.out.println("Welcome to our Stack Simulator");
            InputStreamReader ir = new InputStreamReader(System.in);
            BufferedReader bf = new BufferedReader(ir);
            System.out.print("Enter number of elements : ");
            String str = bf.readLine();
            int num = Integer.parseInt(str);
            stack testStack = new stack(num);
            int test =5;
            testStack.push(test);

        }

        public static void main(String[] args){

          stackStarter TEST = new stackStarter();

        }

    } 
```

我不断收到错误...找不到符号 - 类 stackStarter。我尝试将 stackStarter 方法中的所有代码放在 main 中，但我无法从静态 main 方法访问 stack 类......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:22:10.430

您应该实例化类而不是方法。你的`main`方法应该是这样的：

```
public static void main(String[] args){

    stackTest test = new stackTest();
    test.stackStarter();

} 
```

还有一件事，您应该在编写代码时遵循 Java 命名约定。eg`stackTest`不是根据 Java 命名标准的有效类名，它应该是`StackTest`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:20:13.633

尝试这个：

```
public static void main(String[] args)
{
    stackTest TEST = new stackTest();
    TEST.stackStarter();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:21:02.617

是的，它确切显示只有两个类 stack 和 stackTest ，没有称为 stackStarter 的类，只有方法已在 stackTest 中定义，将构造函数 stackStarter() 更改为 main() 中的 stackTest() 并使用对象调用方法如下它会编译并且可以正常工作，

```
public class stackTest
      {

       public void stackStarter(){

            System.out.println("Welcome to our Stack Simulator");
            InputStreamReader ir = new InputStreamReader(System.in);
            BufferedReader bf = new BufferedReader(ir);
            System.out.print("Enter number of elements : ");
            String str = bf.readLine();
            int num = Integer.parseInt(str);
            stack testStack = new stack(num);
            int test =5;
            testStack.push(test);

        }

        public static void main(String[] args){

          stackTest TEST = new stackTest();
           TEST.stackStarter();    
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T04:21:13.117

请试试这个：

```
public class stackTest
{

   static void stackStarter(){

        System.out.println("Welcome to our Stack Simulator");
        InputStreamReader ir = new InputStreamReader(System.in);
        BufferedReader bf = new BufferedReader(ir);
        System.out.print("Enter number of elements : ");
        String str = bf.readLine();
        int num = Integer.parseInt(str);
        stack testStack = new stack(num);
        int test =5;
        testStack.push(test);

    }

    public static void main(String[] args){
      stackStarter();
    }

} 
```

主要的“陷阱”是您希望 stackStarter() 成为“方法”，而不是“类”。因此，您只需调用它（而不是“新”）。

第二个“陷阱”是“main()”是一个静态类。所以如果你想从 main() 调用 stackStarter()，那么 starckStarter() 也需要是静态的。

# c# - 有没有一种方法可以让 VS2010 在我的方法中扩展或收缩 try 块？

> ID：12399335
> 
> 赞同：6
> 
> 时间：2012-09-13T04:16:35.970
> 
> 标签：c#

我的代码有很多 try、catch 和 finally 块。与我在 VS2010 中的方法不同，我无法在开发时扩展或收缩这些区域以隐藏内容，除非添加区域。

```
 try {
            vm.R...
            vm.Qu..
            vm.T...
            vm.D...
            vm.Fil..
            vm.Type..
            vm.St..
        } catch (Exception e) {
            log(e);
            return Content(ExceptionExtensions.GetFormattedErrorMessage(e));
        } 
```

有没有程序员用来整理 try 块中的代码的技术，还是我只需要忍受这些更大的代码块。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T04:32:13.417

在没有实际修改代码的情况下，我唯一知道的就是使用大纲。您可以“隐藏”一个选择，该选择基本上创建一个大纲部分，您可以像类、命名空间、方法、#if 块等一样展开和折叠它。为此：

*   选择要折叠的行。
*   选择 Edit\Outlining\Hide Selection（或`Ctrl`+ `M`, `Ctrl`+`H`使用 C# 键盘方案）

选择现在已折叠，您可以像方法一样随时展开和重新折叠它。（例如，左侧带有 +/- 字形或带有`Ctrl`+ `M`, `M`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:12:56.223

对于真正干净的代码，请尝试[提取方法](http://www.refactoring.com/catalog/extractMethod.html)，以便您的块更小。而且，如果确实有必要，您将从 Visual Studio 获得自动代码折叠。

# r - 根据第一列中的值将函数应用于数据框中的所有行和列，但第一列除外

> ID：12399337
> 
> 赞同：4
> 
> 时间：2012-09-13T04:17:00.853
> 
> 标签：r, dataframe, match, apply

您好，希望我可以简单地解释一下。我知道这可以通过循环来完成，但这将花费很长时间，我需要将此分析作为网页的一部分来完成，因此某种应用功能应该会更好地工作。

我有 2 个数据框。数据框 A 有一个不同的“锚点”列表和每个类别值（这些是来自已经执行的 ddply 的加权平均值）。

```
anchor     ecomax    ecomin     volume     price    runtime
1   9482 0.12981362 0.5714286 0.12981362 0.1324330 1.00000000
2   9488 0.01458662 0.5544864 0.01458662 0.2967270 0.04166667
3   9549 0.09734398 0.5721429 0.09734398 0.1219376 1.00000000
4   9574 0.00902656 0.5505136 0.00902656 0.1455307 0.14652568
5   9575 0.00902656 0.5505136 0.00902656 0.1460919 0.14652568
6   9576 0.07608863 0.5613563 0.07608863 0.1114813 1.00000000 
```

数据框 B 是具有相同类别值的较大数据框（暂时忽略名称），但每个锚点有多个条目。

```
 anchor ecomax_max_med ecomin_min_med volume_med price_med run_time_minimum_med
1   9482     0.12981362      0.5714286 0.12981362 0.1120882           1.00000000
2   9482     0.12981362      0.5714286 0.12981362 0.1686777           1.00000000
3   9488     0.01552049      0.5550000 0.01552049 0.2925363           0.04166667
4   9488     0.01292292      0.5535714 0.01292292 0.3041928           0.04166667
5   9549     0.09734398      0.5721429 0.09734398 0.1238916           1.00000000
6   9549     0.09734398      0.5721429 0.09734398 0.1184564           1.00000000 
```

我想根据匹配的锚点从平均值（数据框 A）中减去 B 的类别值；即 B 的前 2 行（锚 9482）将与 A 的第一行（锚 9482 均值）不同，接下来的 2 行 B（锚 9488）将与 A 的下一行（锚 9488 均值）不同， 等等。

最终结果是使新数据帧 C 的每一行/列（锚点除外）成为数据帧 B 中的值与其对应的锚点均值（数据帧 A）之间的差异。我希望这是相当直截了当的；它可以很容易地通过一个冗长的循环来完成。我猜这需要“匹配”或“按”的某种组合，但我不确定，这非常令人沮丧。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:46:47.183

这是一个`data.table`解决方案。

它通过合并`A`和`B`通过`anchor`（设置为键）来工作。然后它评估`e`我们创建的表达式

`list(ecomax_diff = ecomax_max_med - ecomax, ecomin_diff = ecomin_min_med - ecomin, volume_diff = volume_med - volume, price_diff = price_med - price, runtime_diff = run_time_minimum_med - runtime)`

使用`mapply`,`sprintf`和`parse`.

该解决方案取决于将每个 data.table 的相应列名传递给 mapply。

```
library(data.table)
DA <- data.table(A)
DB <- data.table(B)
setkey(DA, 'anchor')
setkey(DB, 'anchor')

.calls <- mapply(sprintf, as.list(names(DA)[-1]), 
  as.list(names(DB)[-1]), as.list(names(DA)[-1]), 
  MoreArgs = list(fmt = '%s_diff = %s - %s'))

.e <- parse(text = sprintf('list(%s)', paste(.calls, collapse =', ')))

DA[DB, eval(.e)]
##  anchor ecomax_diff ecomin_diff volume_diff price_diff runtime_diff
## 1:   9482  0.00000000   0.0000000  0.00000000 -0.0203448            0
## 2:   9482  0.00000000   0.0000000  0.00000000  0.0362447            0
## 3:   9488  0.00093387   0.0005136  0.00093387 -0.0041907            0
## 4:   9488 -0.00166370  -0.0009150 -0.00166370  0.0074658            0
## 5:   9549  0.00000000   0.0000000  0.00000000  0.0019540            0
## 6:   9549  0.00000000   0.0000000  0.00000000 -0.0034812            0 
```

*   这是有效的，因为它使用*连接继承范围*。请参阅[data.table 常见问题解答 1.11 -1.13](http://datatable.r-forge.r-project.org/datatable-faq.pdf)

# 第二个效率较低但可能更易于遵循的解决方案

```
 # calculate the difference between the respective columns (merged appropriately
 DIFF <- DB[, names(DB)[-1],with = F] - DA[DB][, names(DA)[-1], with = F]
 # combine with the anchor column from DB 
 DC <-  cbind(DB[,list(anchor)],DIFF)
 # rename with the names from A (otherwise they will have the same as DB
 setnames(DC, names(DA))
 # It creates the correct output !
 DC
 ##    anchor      ecomax      ecomin      volume      price      runtime
 ## 1:   9482  0.00000000   0.0000000  0.00000000 -0.0203448            0
 ## 2:   9482  0.00000000   0.0000000  0.00000000  0.0362447            0
 ## 3:   9488  0.00093387   0.0005136  0.00093387 -0.0041907            0
 ## 4:   9488 -0.00166370  -0.0009150 -0.00166370  0.0074658            0
 ## 5:   9549  0.00000000   0.0000000  0.00000000  0.0019540            0
 ## 6:   9549  0.00000000   0.0000000  0.00000000 -0.0034812            0 
```

*   注意：如果`-.data.table`在未来版本中忽略字符列，这可能会变得更加简单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:46:14.737

```
datmer <- merge(datA, datB)
str(datmer)
#------------------    
'data.frame':   6 obs. of  11 variables:
 $ anchor              : int  9482 9482 9488 9488 9549 9549
 $ ecomax              : num  0.1298 0.1298 0.0146 0.0146 0.0973 ...
 $ ecomin              : num  0.571 0.571 0.554 0.554 0.572 ...
 $ volume              : num  0.1298 0.1298 0.0146 0.0146 0.0973 ...
 $ price               : num  0.132 0.132 0.297 0.297 0.122 ...
 $ runtime             : num  1 1 0.0417 0.0417 1 ...
 $ ecomax_max_med      : num  0.1298 0.1298 0.0155 0.0129 0.0973 ...
 $ ecomin_min_med      : num  0.571 0.571 0.555 0.554 0.572 ...
 $ volume_med          : num  0.1298 0.1298 0.0155 0.0129 0.0973 ...
 $ price_med           : num  0.112 0.169 0.293 0.304 0.124 ...
 $ run_time_minimum_med: num  1 1 0.0417 0.0417 1 ...

 datmer2 <- cbind(datmer[,1, drop=FALSE], 
                  as.matrix(datmer[, 2:6])  - as.matrix(datmer[7:11]) )
 datmer2
#--------
  anchor      ecomax     ecomin      volume      price runtime
1   9482  0.00000000  0.0000000  0.00000000  0.0203448       0
2   9482  0.00000000  0.0000000  0.00000000 -0.0362447       0
3   9488 -0.00093387 -0.0005136 -0.00093387  0.0041907       0
4   9488  0.00166370  0.0009150  0.00166370 -0.0074658       0
5   9549  0.00000000  0.0000000  0.00000000 -0.0019540       0
6   9549  0.00000000  0.0000000  0.00000000  0.0034812       0 
```

如果您想按照@mnel 执行的顺序（BA）使用差异，您还将使列名与第二个数据帧的列名相同：

```
 str( cbind(datmer[,1, drop=FALSE], as.matrix(datmer[7:11])  - as.matrix(datmer[2:6]) ) )
'data.frame':   6 obs. of  6 variables:
 $ anchor              : int  9482 9482 9488 9488 9549 9549
 $ ecomax_max_med      : num  0 0 0.000934 -0.001664 0 ...
 $ ecomin_min_med      : num  0 0 0.000514 -0.000915 0 ...
 $ volume_med          : num  0 0 0.000934 -0.001664 0 ...
 $ price_med           : num  -0.02034 0.03624 -0.00419 0.00747 0.00195 ...
 $ run_time_minimum_med: num  0 0 0 0 0 0 
```

# javascript - For循环冻结Javascript？

> ID：12399340
> 
> 赞同：1
> 
> 时间：2012-09-13T04:17:30.420
> 
> 标签：javascript, html, dom, web

这是我的网络编程课的一个小外部 js 脚本，它应该提示用户为员工工作的小时数，直到他们输入一个负数，当它打印一个具有适当行数的表时（员工人数为输入的小时数），一栏是工作小时数，一栏是工资。但是最后关于 for 循环的一些事情是在我的浏览器中冻结 js 引擎。如果我将循环注释掉，提示就可以正常工作。如果我在屏幕上打印一些东西的废话 while 循环，提示仍然有效，然后 while 循环运行。但是这个愚蠢的 for 循环只是冻结了整个脚本，打开 HTML 页面实际上什么也没做。空白页。作业已经迟到了，我束手无策。

```
var empHours = 0;
var numEmployees = 0;
var empWage = 0;
var totalWages = 0;
var empWages = new Array();

do {
    empHours = prompt("Enter number of hours employee worked this week.");

    if (empHours > -1) {
        numEmployees++;
        if (empHours <= 40) {
            empWage = (15 * empHours)
            empWages[numEmployees-1] = empWage;
            totalWages += empWage;
        } else {
            empWage = (15 * 1.5 * empHours);
            empWages[numEmployees-1] = (15 * 1.5 * empHours);
            totalWages += empWage;
        }
    }
} while (empHours > -1);

confirm("You have " + numEmployees + " employees, is this correct?");

var root = document.getElementById('tablediv');
var table = document.createElement('table');
var row, cell;

for (i=0; i<=numEmployees; i++) {
    document.write("Made it to for loop"):
    row = table.insertRow(i);
    for (j=0; j<3; j++) {
        cell = row.insertCell(j);
        cell.innerHTML(empWages[i])
    }
}
root.appendChild(table); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:22:13.300

提示返回 null 或字符串。它不返回数字。

我建议您更改为：

```
while (empHours && parseInt(empHours, 10) >= 0) 
```

在检查它是否为负之前，这可以防止`null`并将字符串转换为数字。

另外，我建议您`document.write()`永远不要用于调试。如果在错误的时间使用，它真的会弄乱现有的页面。您应该使用`console.log()`或实际的调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:27:02.423

您的问题似乎是语法错误，错字。

```
document.write("Made it to for loop"):
                                     ^
                                this is the problem in your for loop. 
```

您上面的测试实际上也在删除表。删除`document.write`，您的代码工作正常。

[**演示**](http://jsfiddle.net/4asJD/1/)

# javascript - 通过 id 和类属性获取元素

> ID：12399341
> 
> 赞同：0
> 
> 时间：2012-09-13T04:17:30.790
> 
> 标签：javascript, dom

我正在尝试获取元素类名称。首先，我通过它的 id 找到元素，然后我尝试获取 class 属性来执行以下操作。我的结果返回未定义。如何从类属性中获取文本？这将是“未签入”。

html

```
<div id="last-check-in" class="not-checked-in"></div> 
```

javascript

```
var checkedin;
checkedin = document.getElementById("last-check-in");
console.log(checkedin.class); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T04:18:30.320

而不是简单地`class`，使用`className`：

```
var checkedin = document.getElementById("last-check-in");
console.log(checkedin.className); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:23:34.333

您可以使用：`getAttribute("class")`

```
var checkedin;
checkedin = document.getElementById("last-check-in");
console.log(checkedin.getAttribute("class")); 
```

## [**演示**](http://jsfiddle.net/akhurshid/UjWqC/)

# rpm - rpm 需要范围

> ID：12399346
> 
> 赞同：5
> 
> 时间：2012-09-13T04:19:05.273
> 
> 标签：rpm, rhel

我目前有两个问题：

1) 是否可以在 rpm 规范文件中指定一个包的范围？就像是

package >= 1.0.0 和 package < 1.0.50 意味着它将选择更接近 1.0.50 的最新包版本

2) 是否有人知道 yum 是否会更新到更高版本的软件包，即使 spec 文件中指定的版本较低？还是有什么可以避免百胜升级到更高版本？这是我更清楚的例子：

我的仓库中有两个包：package-1.0.5-1 package-2.0.10-1

如果我的包装规格文件！有以下要求要求：包> 1.0.5

当我执行 yum 来安装 packageA 时，这意味着它将安装更高版本的 1.0.5 版本，或者它会假设 2.0.10 更高版本并安装它？我想要实现的是某种告诉我的包只安装了 1.0.5 版本并且不要跳到 2.x 版本。

我希望我把自己说清楚了。感谢您可以给我的任何提示或回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:01:24.760

我不明白为什么您不能指定范围，您可能需要在规范文件的两行中输入它。

但是，对于第二个问题，`yum`可能会在被要求升级时尝试安装`2.0.10`，然后抱怨冲突/要求（您没有指定范围的用途）。所以它会惹恼用户。

如果您可以控制目标包，一种解决方案是命名版本 2 `package2-2.0.10`，这种情况经常发生。就 rpm/yum 而言，这是一个完全不同的包，不会被视为过去的选项`package-1.0.50`。

有关更多信息，请参阅[此 wiki 页面。](http://rpm.org/wiki/PackagerDocs/MultipleVersions)

# arrays - 空指针查询数组中的嵌入对象

> ID：12399350
> 
> 赞同：1
> 
> 时间：2012-09-13T04:19:16.740
> 
> 标签：arrays, nullpointerexception, spring-data-mongodb

我正在尝试做一些微不足道的事情而没有成功。
我有**Profile pojo 实体，其中包含一个****Items**数组，每个项目都包含**itemId**字段和一些与
我正在使用 spring-data-mongo 版本 1.1.0.M1 的用例无关的字段。

我正在尝试检索在给定的一组 ID 中有项目的所有配置文件...

mongoTemplate.find(Query.query(Criteria.where("items.itemId").in(objectIds)), Profile.class);

我正在为上述查询获取**NullPointerExcpetion**，我做错了什么？

# c++ - 通过将现有 HICON 绘制到 HBITMAP 来创建 HICON

> ID：12399357
> 
> 赞同：1
> 
> 时间：2012-09-13T04:20:32.613
> 
> 标签：c++, winapi, gdi

作为一个更大项目的一部分，我试图从现有的 HICON 创建一个 HICON，首先将该图标绘制为 HBITMAP，然后将其转换回 HICON。（这将允许我修改图标，例如，通过在其上绘制文本。）

不幸的是，该图标显示为黑色方块。这是我的代码：

```
bool createIcon()
{
  bool ret = false;

  // get context of window
  HDC context = GetDC(window_);
  if (context != NULL)
  {
    // create a buffer context
    HDC buffer = CreateCompatibleDC(context);
    if (buffer != NULL)
    {
      PatBlt(buffer, 0, 0, iconSize_, iconSize_, WHITENESS);

      // create a bitmap for our use
      HBITMAP bitmap = CreateCompatibleBitmap(context, iconSize_, iconSize_);
      if (bitmap != NULL)
      {
        HBITMAP oldBitmap;

        // select the bitmap with the buffer
        oldBitmap = reinterpret_cast<HBITMAP>(SelectObject(buffer, bitmap));
        if (oldBitmap != NULL)
        {          
          // draw the icon
          if (DrawIcon(buffer, 0, 0, icon_))
          {
            if (icon_ != NULL)
              DestroyIcon(icon_);

            ImageList_RemoveAll(imageList_);
            if (ImageList_Add(imageList_, bitmap, NULL) != -1)
            {
              icon_ = ImageList_GetIcon(imageList_, 0, ILD_NORMAL);
              if (icon_ != NULL)
                ret = true;
            }
          }          
          SelectObject(buffer, oldBitmap);
        }
        DeleteObject(bitmap);
      }
      DeleteDC(buffer);
    }
    DeleteDC(context);
  }
  return ret;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:45:08.673

也许您想检查位图本身是否为黑色，或者它很好，只是图标是黑色的。根据我的经验（尽管我对此没有合理的解释），问题就在身边`CreateCompatibleBitmap`，我希望位图本身已经是黑色的。试试`CreateDIBSection`吧。这曾经对我有用：

```
//HBITMAP hBitmap = CreateCompatibleBitmap(hDc, ResourceIconColorBitmap.bmWidth, ResourceIconColorBitmap.bmHeight);
BITMAPINFO BitmapInformation;
ZeroMemory(&BitmapInformation, sizeof BitmapInformation);
BitmapInformation.bmiHeader.biSize = sizeof BitmapInformation.bmiHeader;
BitmapInformation.bmiHeader.biWidth = ResourceIconColorBitmap.bmWidth;
BitmapInformation.bmiHeader.biHeight = ResourceIconColorBitmap.bmHeight;
BitmapInformation.bmiHeader.biPlanes = 1;
BitmapInformation.bmiHeader.biBitCount = 24;
VOID* pvBits;
HBITMAP hBitmap = CreateDIBSection(hDc, &BitmapInformation, DIB_RGB_COLORS, &pvBits, NULL, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:22:08.013

```
ICONINFO nfo;
GetIconInfo(icon_, &nfo);
MyDrawSomethingOnIcon(nfo.hbmColor);
HICON new_icon = CreateIconIndirect(&nfo); 
```

您需要做的就是实施`MyDrawSomethingOnIcon`. 当然，当不再使用时，您必须释放所有使用过的图标和位图。MSDN 将帮助您处理该问题 =)

# javascript - 如何在谷歌字体加载时显示加载图像？

> ID：12399362
> 
> 赞同：1
> 
> 时间：2012-09-13T04:20:55.537
> 
> 标签：javascript, jquery

我正在使用谷歌字体 api。在 document.ready 中，我请求了 google 字体集合并使用所有可用的字体系列填充选择列表。现在，当用户从选择列表中选择任何字体时，我只需在文档中附加请求所选字体并显示字体预览的链接。但我试图在字体加载预览时显示加载图像。我的代码：

```
 $("#ff").selectmenu({ select: function () {
        var img = $("<img />").attr("src", "/images/load.gif");
        $(".preview").append(img);
        $('body').append("<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=" + escape($(this).val()) + "' type='text/css' media='all' />");
        $(".preview").css({ fontFamily: $(this).val() });
        $(img).remove();
    }
    }); 
```

但是加载图像没有显示，因为可能是链接标签异步请求字体。在字体完全加载之前如何显示加载图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:31:16.693

这是[csuwldcat](https://stackoverflow.com/users/299239/csuwldcat "csuwldcat")在另一篇文章中提供的另一个答案。

[javascript：在 LINK 上捕获加载事件](https://stackoverflow.com/questions/2635814/javascript-capturing-load-event-on-link)

> 在我看来，这是使用 IMG 标签及其 onerror 事件的更好解决方案。此方法将在不循环、执行扭曲样式观察或在 iframe 中加载文件等情况下完成工作。此解决方案在文件加载时正确触发，如果文件已被缓存则立即触发（具有讽刺意味的是，这比大多数 DOM load 事件处理缓存的资产）。这是我博客上的一篇文章，解释了该方法 - Back Alley Coder 文章 - 我只是厌倦了这个没有合法的解决方案，享受！
> 
> ```
> var loadCSS = function(url, callback){
> var link = document.createElement('link');
>     link.type = 'text/css';
>     link.rel = 'stylesheet';
>     link.href = url;
> 
> document.getElementsByTagName('head')[0].appendChild(link);
> 
> var img = document.createElement('img');
>     img.onerror = function(){
>         if(callback) callback(link);
>     }
>     img.src = url; 
> ```
> 
> }

请投票支持他的回应，以确保他得到信任。

# asp.net - ASP.NET 的字符和消息计数

> ID：12399365
> 
> 赞同：1
> 
> 时间：2012-09-13T04:21:13.417
> 
> 标签：asp.net, textbox, word-count

任何人都知道如何在文本框中有 160 个或更多字符时将标签增加到 2（或更多）条消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:13:07.170

创建一个事件来更改文本框中的文本，计算那里的字符数。然后检查所需字符是否达到限制，并增加标签文本值，如下所示，

```
private void txtSearchMember_TextChanged(object sender, EventArgs e)
    {
       if (txtSearchMember.Text.Length >= 160)
        {
                lblMessageCount.Text = 1; // Increase count with simple maths
        }
    } 
```

# java - 包含列表的缓存 ConcurrentHashMaps 的线程安全

> ID：12399369
> 
> 赞同：0
> 
> 时间：2012-09-13T04:21:38.853
> 
> 标签：java, thread-safety, guava

我正在尝试使用 Google Guava Cache 制作 ConcurrentHashMaps 的线程安全单例缓存。这些地图中的每一个都将包含一个列表。列表只会在所有可以添加到它的线程都执行后被读取一次。我想知道我的实现（特别是在我更新项目的地方）是否是线程安全的/如何改进它。有没有更好的方法可以在不使用同步块的情况下做到这一点？

 `````
public enum MyCache {
    INSTANCE;

    private static Cache<Integer, ConcurrentHashMap<String, List>> cache = 
        CacheBuilder.newBuilder()
            .maximumSize(1000)
            .build();

    private static AtomicInteger uniqueCount = new AtomicInteger(0);

    private final Object mutex = new Object();

        //Create a new unique ConcurrentHashMap
    public Integer newMapItem(){

        Integer key = uniqueCount.incrementAndGet();

        //We dont care if something exists
        cache.put(
            key,
            new ConcurrentHashMap<String, List>()
        );

        return key;
    }

    public void expireMapItem(int key){
        cache.invalidate(key);
    }

    public Integer add(int cacheKey, String mapListKey, int value){

        synchronized(mutex){
            ConcurrentMap<String, List> cachedMap = cache.getIfPresent(cacheKey);
            if (cachedMap == null){
                //We DONT want to create a new map automatically if it doesnt exist
                return null;
            }

            List mappedList = cachedMap.get(mapListKey);

            if(mappedList == null){

                List newMappedList = new List();
                mappedList = cachedMap.putIfAbsent(mapListKey, newMappedList);
                if(mappedList == null){
                    mappedList = newMappedList;
                }
            }
            mappedList.add(value);
            cachedMap.replace(mapListKey, mappedList);

            cache.put(
                cacheKey,
                cachedMap
            );

        }
        return value;
    }

} 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:17:41.400

如果多个线程可以写入给定的`List`（应该是 a `List<Integer>`，因为你正在向`int`它添加 s ），你需要同步一些东西。但是，您不需要那个全局锁。此外，您似乎认为`Cache`并`ConcurrentHashMap`复制您放入其中的对象并从中获取，因为一旦它们更新，您将再次放入它们，但它们没有：它们包含对您放入其中的内容的引用。

我会这样改变`add()`方法：

```
public Integer add(int cacheKey, String mapListKey, int value) {
    // You don't need to synchronize here, since the creation of the map is not
    // synchronized. So either it has been created before, or it hasn't, but there
    // won't be a concurrency problem since Cache is thread-safe.
    ConcurrentMap<String, List<Integer>> cachedMap = cache.getIfPresent(cacheKey);
    if (cachedMap == null){
        // We DON'T want to create a new map automatically if it doesn't exist
        return null;
    }

    // CHM is of course concurrent, so you don't need a synchronized block here
    // either.
    List<Integer> mappedList = cachedMap.get(mapListKey);
    if (mappedList == null) {
        List<Integer> newMappedList = Lists.newArrayList();
        mappedList = cachedMap.putIfAbsent(mapListKey, newMappedList);
        if (mappedList == null) {
            mappedList = newMappedList;
        }
    }

    // ArrayList is not synchronized, so that's the only part you actually need to
    // guard against concurrent modification.
    synchronized (mappedList) {
        mappedList.add(value);
    }

    return value;
} 
```

* * *

实际上，我会创建 a `Cache`of `LoadingCache`s，而不是 a `Cache`of `ConcurrentHashMap`，它使代码`add()`更简单，将创建`List`移至`CacheLoader`实现。您仍然可以使用该方法将`LoadingCache`s 公开为s。我也删除了一些装箱/拆箱。`Map``asMap()`

**编辑**：将返回类型更改为`add()`to`boolean`而不是`int`原始类型不起作用`return null`（当返回类型为 时`Integer`）。不需要潜在的 NPE。

```
public enum MyCache {
    INSTANCE;

    private static Cache<Integer, LoadingCache<String, List<Integer>>> cache =
            CacheBuilder.newBuilder()
                    .maximumSize(1000)
                    .build();

    private static AtomicInteger uniqueCount = new AtomicInteger(0);

    public int newMapItem() {
        int key = uniqueCount.incrementAndGet();

        //We dont care if something exists
        cache.put(key, CacheBuilder.newBuilder().build(ListCacheLoader.INSTANCE));

        return key;
    }

    public void expireMapItem(int key) {
        cache.invalidate(key);
    }

    public boolean add(int cacheKey, String mapListKey, int value) {
        // You don't need to synchronize here, since the creation of the map is not
        // synchronized. So either it has been created before, or it hasn't, but there
        // won't be a concurrency problem since Cache is thread-safe.
        LoadingCache<String, List<Integer>> cachedMap = cache.getIfPresent(cacheKey);
        if (cachedMap == null) {
            // We DON'T want to create a new map automatically if it doesn't exist
            return false;
        }

        List<Integer> mappedList = cachedMap.getUnchecked(mapListKey);

        // ArrayList is not synchronized, so that's the only part you actually need to
        // guard against concurrent modification.
        synchronized (mappedList) {
            mappedList.add(value);
        }

        return true;
    }

    private static class ListCacheLoader extends CacheLoader<String, List<Integer>> {
        public static final ListCacheLoader INSTANCE = new ListCacheLoader();

        @Override
        public List<Integer> load(String key) {
            return Lists.newArrayList();
        }
    }
} 
`````

# c++ - 同名的 C++ const 和 mutable 函数

> ID：12399372
> 
> 赞同：6
> 
> 时间：2012-09-13T04:21:48.717
> 
> 标签：c++, constants, overloading

考虑以下代码。

```
#include <iostream>
using namespace std;

class Object
{
public:
    Object() {}

    void Print() const
    {
        cout << "const" << endl;
    }

    void Print()
    {
        cout << "mutable" << endl;
    }
};

void print_obj(const Object& obj)
{
    obj.Print();
}

int main()
{
    Object       obj1;
    const Object obj2;
    Object*const pobj1 = &obj1;

    print_obj(obj1);
    print_obj(obj2);

    obj1.Print();
    obj2.Print();

    pobj1->Print();

    return 0;
} 
```

输出是

```
const
const
mutable
const
mutable 
```

我想知道，当面对许多同名的可变方法时，C++ 如何决定调用哪个方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T04:24:36.337

```
print_obj(obj1); 
print_obj(obj2); 
```

根据传递对象的*cv 限定符*( `const`/ )评估要调用的函数。`volatile`请注意，在函数重载解析时会考虑*cv 限定符。*
如果传递的对象是`const`，则选择函数接收`const`参数。如果传递的对象是非常量，则选择接收非常量参数的函数。

* * *

```
obj1.Print();   
obj2.Print();   
pobj1->Print(); 
```

如果对象是`const`则只能调用`const`成员函数。
如果对象是非常量，则非常量版本优先于`const`版本。

规则由标准明确规定。

参考：
**C++03 标准：
§13.3.1 候选函数和参数列表：**

> 对于非静态成员函数，隐式对象参数的类型是“对 cv 的引用`X`”，其中`X`是函数所属的类，而 cv 是成员函数声明上的 cv 限定。[示例：对于 class 的 const 成员函数，`X`假定额外参数具有“对 const 的引用`X`”类型。]

因此，如果对象是`const`编译器，则编译器将选择具有隐式对象参数类型的成员函数版本*引用 const`Object`*，即 const 的 const 版本`Print()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T04:25:39.957

所有函数重载的工作方式相同。

在考虑重载成员函数时，它包括隐式`this`参数。如果函数已声明`const`，则`this`参数为`const Object *`。如果函数不是`const`，则`this`参数是`Object *`。由于`const`限定符影响函数重载规则，这意味着`const`函数的性质也会影响函数重载规则。

在您的具体示例中，`print_obj(obj1)`print`const`因为`print_obj()`被声明为采用 a `const Object&`，这意味着它将始终`const`调用`Print()`. 与`print_obj(obj2)`.

`obj1.Print()`打印`mutable`因为`obj1`is not `const`，因此非`const`版本 of`Print()`是一个更好的匹配并且被挑选用于函数重载决议。

`obj2.Print()`打印`const`因为`obj2`is `const`，因此`const`版本 of`Print()`是唯一合适的函数重载。

`pobj1->Print()`打印`mutable`因为`*pboj1`是一个非`const`值，所以选择非`const`版本`Print()`的函数重载决议。

最简单的思考方式是，如果你只是拥有

```
void Print(Object &obj);
void Print(const Object &obj); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T04:29:12.677

请记住，对于普通对象，如果非`const`版本可用，则`const`选择非版本；否则`const`选择版本。下面是分析：

```
print_obj(obj1); // print_obj() receives const argument, so `const` is chosen
print_obj(obj2); // same as above

obj1.Print();  // obj1 is not const, so non-const version is chosen
obj2.Print();  // obj2 is const, so must choose const version

pobj1->Print(); // pobj1 is a const pointer pointing to non-const object, so non-const version is chosen 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-13T04:24:04.783

如果两者都可以，它会更喜欢 const 方法而不是非常量方法。

同样适用于易失性，顺便说一句。

# php - PHPExcel XLS 输出与 Excel 2000 的兼容性

> ID：12399374
> 
> 赞同：2
> 
> 时间：2012-09-13T04:21:56.297
> 
> 标签：php, mysql, phpexcel, xls

我正在设计一些脚本来从 MySQL 存储的数据中编写 Excel 文件。

不幸的是，我需要将它设计为用于公司范围内的 Intranet，而缺点是某些系统在 Citrix 和 Office 2000 上运行（是的，这是正确的 Excel 2000）

我正在使用 PHPExcel 包，它编写的文件很棒，但它们在 2000 年只是以混乱的字符形式打开。

我目前正在使用 Excel5 输出，因为我认为它具有更好的兼容性

> $objWriter = new PHPExcel_Writer_Excel5($objPHPExcel);
> $objWriter->保存($excelOutputFile);

我知道解决方案确实应该是升级愚蠢的过时的 Citrix 系统......或者导出到 CSV 文件而不是 Excel，但这些是项目的参数，财务团队不是尝试和谈判的最佳人选. 因此，如果可能的话，我想尝试在 PHP 中为当前系统找到一个解决方案。

任何人有任何建议或指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:25:41.050

如果您不反对切换到不同的库，假设它具有您需要的功能，那么[这个 (CSVtoXLS)](http://performantsystems.com/CSVtoXLS.html)应该在 Excel 2000 上进行了测试。它看起来像一个从 csv 到 xls 文件的直接上转换器，但它可能是一个好的起点。

# scala - 为什么我不能执行 scala 文件？

> ID：12399385
> 
> 赞同：16
> 
> 时间：2012-09-13T04:22:50.517
> 
> 标签：scala

我是 Scala 的新手，这是我第一次运行 Scala，在安装 Scala 时，我创建了一个名为 的文件`Hello.scala`，内容为：

```
println("HelloWorld!") 
```

当我输入时`scala`，没有问题，显示了scala REPL，但是当我输入时`scala Hello.scala`，它提示：

```
<console>:1: error: ';' expected but '.' is found. 
```

我不知道是什么问题，我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-01-25T07:55:55.693

*   添加`-nc`标志节省了我的一天。

    `scala -nc Hello.scala`

*   是什么`-nc`？

    `-nc no compilation daemon: do not use the fsc offline compiler`

    资料来源：[http ://alvinalexander.com/java/jwarehouse/scala-2.11/compiler/scala/tools/nsc/GenericRunnerCommand.scala.shtml](http://alvinalexander.com/java/jwarehouse/scala-2.11/compiler/scala/tools/nsc/GenericRunnerCommand.scala.shtml)

*   是什么`fsc offline compiler`？

    `fsc – Fast offline compiler for the Scala 2 language`

    来源：[http ://www.scala-lang.org/old/sites/default/files/linuxsoft_archives/docu/files/tools/fsc.html](http://www.scala-lang.org/old/sites/default/files/linuxsoft_archives/docu/files/tools/fsc.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-13T07:49:21.120

要在 REPL 中执行外部脚本（从中加载所有定义），请使用`:load <filepath>`command 而不是`scala <filepath>`.

```
» echo 'println("HelloWorld")' > Hello.scala
» scala
Welcome to Scala version 2.9.2 (OpenJDK Client VM, Java 1.6.0_24).
Type in expressions to have them evaluated.
Type :help for more information.

// is this what you tried to do?
scala> scala Hello.scala
<console>:1: error: ';' expected but '.' found.
   scala Hello.scala

// do this instead
scala> :load Hello.scala
Loading Hello.scala...
HelloWorld

scala> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-13T04:50:35.423

您的文件`Hello.scala`是一个脚本。您应该能够从命令提示符运行它`scala Hello.scala`。

```
$ scala Hello.scala 
HelloWorld! 
```

另一方面，REPL 不适用于运行脚本。它用于直接运行 scala 代码：

```
scala> println("HelloWorld!")
"HelloWorld!" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-30T14:58:20.640

如果你在 scala REPL 中执行它。你应该使用如下

```
:load [scala file path] 
```

输出如下

> 定义的“对象名”

然后调用 main 方法作为下一个命令

```
objectname.main(Array()) 
```

有关更多详细信息，请参阅以下网址

[https://www.scala-lang.org/documentation/getting-started.html](https://www.scala-lang.org/documentation/getting-started.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-15T09:54:34.980

如果您使用某种 Unix，您可以通过在文件顶部添加***pound bang指令来将 Scala 脚本作为 shell 脚本运行。***

例如，在名为 的文件中键入以下内容`helloarg`：

```
#!/bin/sh
exec scala "$0" "$@"
!#
// Say hello to the first argument
println("Hello, "+ args(0) +"!") 
```

首字母`#!/bin/sh`必须是文件中的第一行。
一旦你设置了它的执行权限：

```
$ chmod +x helloarg 
```

您可以将 Scala 脚本作为 shell 脚本运行，只需说：

```
$ ./helloarg globe 
```

如果您使用的是 Windows，则可以通过命名文件`helloarg.bat`并将其放在脚本顶部来实现相同的效果：

```
::#!
@echo off
call scala % 0 % *
goto :eof
::!# 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T14:14:54.903

只是我所知道的总结。我曾经对如何正确运行 scala 文件感到困惑。

总之，我们有 3 种方法来实现这一目标：

1.  对于脚本文件。对于脚本，这意味着它就像您在 REPL 中键入语句行一样，或者使用`:paste`模式粘贴多行。就像是：

    > println("foo")

2.  编译一个包含 main 方法的对象`scalac`。您可以通过`extends`App trait 轻松实现。

    > def main(args: Array[String]) : 单位

你可能会说“你这个骗子，只有两种方法”。但是对于第二个，我认为有太多方法可以让它运行。

1.  `scala -howtorun:object ObjectName -cp "./"` :`-cp`只是为了保险。
2.  `java -cp "/path/to/your/scala-jars" ObjectName`：所以区别只是需要包含类路径。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-18T12:16:36.807

在 main 函数中写下`println`语句：

```
object HelloWorld {   
 def main(args: Array[String]) {   
   println("Hello World!")   
 }   
} 
```

然后执行：`scala -nc HelloWorld.scala`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-15T02:02:28.453

当您尝试运行 scala 时，请按照以下步骤操作：

1.  不要打开 scala REPL
2.  `scala <filename.scala><Input if any>`在 cmd 提示符下使用

以下是示例：

`scala /home/prakash/Desktop/babyname.scala < /home/prakash/Desktop/ND`

**注意：**上面的命令必须在 unix cmd 提示符下输入，而不是在 scala repl 中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-12T00:48:36.407

这适用于Mac进行开发。

```
#!/usr/bin/env scala -nc
println("hello"); 
```

# spring - 将 Web 应用程序导入 Eclipse 时出现 applicationContext.xml 错误

> ID：12399387
> 
> 赞同：0
> 
> 时间：2012-09-13T04:23:27.140
> 
> 标签：spring, maven, spring-mvc

我有一个带有 applicationContext.xml 的 Maven Web 应用程序，它报告以下错误：

在此行找到多个注释： - cvc-complex-type.2.3：元素“beans”不能有字符 [children]，因为该类型的内容类型是仅元素。

XML 的主体是：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/tx
  http://www.springframework.org/schema/tx/spring-tx.xsd
  http://www.springframework.org/schema/context
  http://www.springframework.org/schema/context/spring-context-2.5.xsd">

  ${build.system.jobscheduler}
</beans> 
```

当我删除 ${build.system.jobscheduler} 时，错误消失了。这在 web/pom.xml 中声明为：

```
<build.system.jobscheduler><![CDATA[<!-- No job scheduler -->]]></build.system.jobscheduler> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:45:06.540

发生错误是因为 xml 架构：

> [http://www.springframework.org/schema/beans/spring-beans.xsd](http://www.springframework.org/schema/beans/spring-beans.xsd)

不允许在`<beans>`元素内使用此类表达式。

我不知道**${build.system.jobscheduler}**的内容。

如果它是一个类名，你可以尝试这样的事情：

```
<beans>
   <bean id="jobschedulerHolder" class="myapp.JobSchedulerHolder">
   <property name="jobschedulerClassName" value="${build.system.jobscheduler}" />
</beans> 
```

# c - 没有 mmap2 系统调用 strace 的内存分配？

> ID：12399388
> 
> 赞同：0
> 
> 时间：2012-09-13T04:23:29.403
> 
> 标签：c, memory-management, memory-leaks, linux-kernel, strace

`mmap2`是否可以在没有调用的情况下分配内存？

我正在开发 A10 板视频播放器，我有一个巨大的内存泄漏。可能在每个帧显示中。有一个`libvecore`处理系统调用的库，我们没有源代码。

我知道 A10 不是常见的主题，所以我的问题不是针对 A10，而是针对内核内存分配。

我尝试使用以下方式跟踪程序：`strace -e mmap2 ./VideoPlayer`.

但我对结果感到惊讶。`mmap2`视频播放器只在启动时调用，它不调用。

但同时我看到内存使用情况，`TOP`我可以看到 VideoPlayer 有争议地分配内存，它几乎在 3 分钟内吃掉了 300 MB。

那么我应该考虑内存泄漏在内核中吗？或者还有其他动态分配内存的调用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T04:39:16.783

是的，通常的内存分配方式是通过`brk`系统调用。

# iphone - iOS 6 准备清单

> ID：12399394
> 
> 赞同：1
> 
> 时间：2012-09-13T04:24:20.017
> 
> 标签：iphone, ios6

谁能告诉 iOS 6 准备清单在哪里？它在今天早些时候 Apple 发送的 iOS 6 开发人员电子邮件中被引用，但我无法在 developer.apple.com 上找到实际的清单，使用 Google 搜索或搜索 Apple 的开发人员论坛。我可能遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:29:41.353

[大概是这个页面？](https://developer.apple.com/devcenter/ios/checklist/pre-release/)它需要您使用开发人员帐户登录才能访问它。

注意 url 中的“清单”： [https ://developer.apple.com/devcenter/ios/checklist/pre-release/](https://developer.apple.com/devcenter/ios/checklist/pre-release/)

# asp.net - 通过单个重定向保留数据

> ID：12399399
> 
> 赞同：-3
> 
> 时间：2012-09-13T04:24:57.203
> 
> 标签：asp.net, webforms

用例是用户提交的表单。我想重定向它的可用性方面，同时也显示一些反馈确认（'更新成功！'）或错误反馈（'你糟透了，回家！'）。

此数据只需要针对特定​​用户（使用 Membership API）在单个重定向中持续存在。

我不想为此设置数据库表，我也不喜欢为此使用会话缓存的想法。HttpContext 不起作用，但我考虑过使用 Cookie。我必须小心保持在 4kb 限制以下（使用键+通用响应），但我想我会看看是否还有其他我不考虑的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:14:36.797

你有 Post 和 Get 数据。

重定向是使用 Get 完成的，这意味着发送数据的方式是：

1.  仅限 URL 参数。
2.  使用临时位置存储数据，如会话或数据库，并在 URL 参数上传递这些数据/消息的 id。

因此，如果您只有两条消息要显示，这只是一个简单的信息，`http://example.com?msg=1`但如果您想显示更多信息，您在这里没有太多选择 -**但是：**

在第一个帖子上的“发布/重定向/获取”操作中，您可以做出决定 - 如果用户已正确发送所有数据，并且一切正常，那么您进行重定向，并且通过此重定向，您“仅”说对用户来说，这是您输入的数据，从数据库中获取，一切正常。**如果数据不正确，则不要进行重定向**，留在页面上并显示有关数据的所有错误消息。

[![](../Images/dd4a5bce6a12f402aa3517b3d8c20fa0.png)](https://i.stack.imgur.com/nEih6.jpg)
[（来源：[planethost.gr](http://www.planethost.gr/PostRedirectGet.jpg)）]

总而言之，只有当用户成功输入数据并且一切正常时，您才进行重定向，并且在重定向之后，您只有一条消息显示“没问题”，这是数据。

相关： [使用 ASP.NET 进行重定向后获取](https://stackoverflow.com/questions/5381162/post-redirect-get-with-asp-net)

**Cookie** 完全忘记将消息保存在 cookie 中，它们不是为此目的而制作的，它们的大小有限，cookie 数据在所有调用中（甚至在图像上）都携带，浏览器甚至可能崩溃/或在大尺寸下出现异常行为饼干。

# c++ - C++ 二进制文件 i/o 中的场景

> ID：12399400
> 
> 赞同：0
> 
> 时间：2012-09-13T04:25:13.437
> 
> 标签：c++, file-io

校园里大多数精明的学生都告诉过，二进制文件 i/o 总是比格式化 i/o 快。经过一番谷歌搜索，我确定完成二进制 i/o 的最有效方法不是直接从文件中流式传输每个值，而是通过读取大块数据，如 4k 或 8k 块，然后从该缓冲区中解析数据。我的问题是，假设我使用 fstream 从文件中抓取一大块数据并将其存储到 8192 字节的 char 数组中。现在假设它有一个大约 30 字节的标头，然后之后的所有数据就像每个 72 字节的结构。这将在最后留下 56 个字节的不完整数据，我无法读入结构。我该如何处理以最大限度地提高效率（是的，使用 c++ 流，请不要在这里抱怨 c++ 流，我 已经听到了几十个关于它的论点。这完全是关于二进制 i/o 的问题，而不是 i/o 特定介质的功效）。我是否只是将最后的 56 个字节未使用，或者我是否尝试将下一个缓冲区的尾端和前 16 个字节一起弗兰肯斯坦，还是还有另一种方法可以解决这个问题？我的问题也是，为什么在解析之前将块读入这样的缓冲区，更快？相反，如果您不相信这是真的，那么请在可能的情况下解释原因。谢谢你的时间。为什么在解析之前将块读入这样的缓冲区，更快？相反，如果您不相信这是真的，那么请在可能的情况下解释原因。谢谢你的时间。为什么在解析之前将块读入这样的缓冲区，更快？相反，如果您不相信这是真的，那么请在可能的情况下解释原因。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:47:10.150

使用标准`iostream`库，它会自动执行缓冲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:28:04.067

首先，块被高估了。在您的情况下，没有理由读取 2^N 块只是为了以其他方式重新分块。

其次，如果您决定重新分块，您将使用缓冲区和内存复制来做到这一点。

# sql-server-2008 - 更新一组行和选择一些相同的行之间的死锁

> ID：12399401
> 
> 赞同：2
> 
> 时间：2012-09-13T04:25:29.617
> 
> 标签：sql-server-2008, deadlock, database-deadlocks

我有两个 SPID 作为事务运行，下面是每个 SPID 的作用。

SPID A -

1.  更新表 1 中的第 1-10 行
2.  …………

SPID B -

1.  更新表 1 中的第 5 行
2.  从表 1 中选择第 4,5 和 6 行并更新表 2 中的一行。
3.  ……
4.  ……

我面临一个死锁场景，其中 SPID A 已更新第 4 行并等待聚集索引上的 X 锁定以更新第 5 行，而 SPID B 在第 2 步中等待第 4 行的聚集索引上的 S 锁定在 X由 SPID A 锁定。表 1 上还有一个非聚集索引，但它不涵盖选择查询，因此它查找聚集索引。我假设即使我将其设为覆盖索引 SPID A 也会锁定非聚集索引，从而使 SPID B 等待它。我正在考虑将隔离级别升级为序列化，以便在 SPID B 已经开始更新到第 5 行时，或多或少更新整个表的 SPID A 将不得不等待获取其锁定。它还将阻止 SPID B如果 SPID A 已经开始，则从获取 x 锁。

你们还有什么其他建议可以让我摆脱这种僵局？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:54:17.133

请查看[此博客条目](http://goo.gl/3YaVz)。这包含一个方便的**SQL 脚本来显示现在存在的锁**，并显示有关它们的所有信息：

```
SELECT
db.name DBName,
tl.request_session_id,
wt.blocking_session_id,
OBJECT_NAME(p.OBJECT_ID) BlockedObjectName,
tl.resource_type,
h1.TEXT AS RequestingText,
h2.TEXT AS BlockingTest,
tl.request_mode
FROM sys.dm_tran_locks AS tl
INNER JOIN sys.databases db ON db.database_id = tl.resource_database_id
INNER JOIN sys.dm_os_waiting_tasks AS wt ON tl.lock_owner_address = wt.resource_address
INNER JOIN sys.partitions AS p ON p.hobt_id = tl.resource_associated_entity_id
INNER JOIN sys.dm_exec_connections ec1 ON ec1.session_id = tl.request_session_id
INNER JOIN sys.dm_exec_connections ec2 ON ec2.session_id = wt.blocking_session_id
CROSS APPLY sys.dm_exec_sql_text(ec1.most_recent_sql_handle) AS h1
CROSS APPLY sys.dm_exec_sql_text(ec2.most_recent_sql_handle) AS h2
GO 
```

一般来说，我的猜测只是**你的 SQL Server 默认使用 PAGE 锁**（就像每个 SQL Server 一样），这样对单行的更新可以阻止同一 PAGE 上的所有行。请参阅[这篇文章](http://goo.gl/9oEVW)以进一步了解 SQL Server 中的锁定，而[此博客只是为了好玩](http://tedwise.com/2010/03/15/select-deadlocks-in-sql-server-aka-sql-server-sucks/?trk_event=search_click&trk_result_index=0)。该博客解释说，在 oracle 之后可能会很奇怪，**选择可以阻止更新**，这在 SQL 服务器中是可能的。

为避免您的问题，请**在更新中****使用[ROWLOCK](http://goo.gl/Ilu7K)**提示，您将失去一点性能和死锁。第二种解决方案是在SQL server 中设置较低的死锁检测超时，并捕获SQL server 错误，如果是死锁牺牲品错误，则重试。

# linux - 解析共享库中的符号名称 (Linux)

> ID：12399411
> 
> 赞同：1
> 
> 时间：2012-09-13T04:26:28.117
> 
> 标签：linux, assembly, native-code, systems-programming

我正在 Linux 中进行动态二进制分析。鉴于程序是动态链接的（加载时链接）并且没有地址空间随机化，如果正在调用标准库函数，我必须解析函数名称。我在反汇编代码中看到，对标准库例程的调用首先分支到 .plt 部分中的某个地址，PC 正在加载那里计算的内存地址。顺便说一句，它在 ARM Linux 中，但我猜一般的想法是一样的。

我是系统编程的新手。我不太了解库是如何链接的以及在运行时如何解析地址。专家的任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:15:47.673

PLT 代表*过程链接表*，该表将共享库中的函数（和全局变量）解析为程序中的地址。

*PLT 与 GOT（全球偏移表*）密切相关。如果调用共享库中的地址，它们一起执行*惰性绑定*：在第一次调用时，函数的实际地址被解析（即使没有地址随机化，每次执行也可能不同，这取决于库的顺序加载/使用），在进一步的调用中，地址间接与 GOT 一起使用。

您可以使用 和 之类的工具`objdump`来`readelf`检查 elf 文件的内容。一些更详细的解释在这里：

[http://www.technovelty.org/linux/pltgot.html](http://www.technovelty.org/linux/pltgot.html)

[http://timetobleed.com/dynamic-linking-elf-vs-mach-o/](http://timetobleed.com/dynamic-linking-elf-vs-mach-o/)

# multithreading - 理解scala中actor的线程

> ID：12399414
> 
> 赞同：6
> 
> 时间：2012-09-13T04:26:52.960
> 
> 标签：multithreading, scala, functional-programming, actor

有人告诉我，（Scala）Actor 从来没有真正同时执行两个操作，这表明 act（或反应？或接收？）方法本质上是同步的。我知道 act 方法中的长时间操作会导致阻塞问题，并且我假设必须以某种方式同步对消息队列的访问......但是......

建议的是，接收消息告诉它增加内部计数器的参与者将以线程安全的方式增加计数器。不会同时处理两条更新消息，因此没有两条消息可以尝试同时更新计数器。

演员中的计数器属性听起来像“共享状态”。

这样的操作真的是完全线程安全的吗？如果是这样，演员如何以某种有效的方式利用多个核心机器？演员是如何多线程的？

如果不是，那么在不需要一些同步/易失变量的情况下，以线程安全的方式对消息进行计数的适当惯用方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T05:50:37.000

Actor 模型可用于将可变状态与外界隔离。当您有一个可变状态（例如，分配给多个并发进程的全局 ID 注册表）时，您可以将该可变状态包装在一个 Actor 中，并让客户端通过消息传递与 Actor 通信。这样，只有参与者直接访问可变状态，正如您所说，客户端消息排队等待读取和处理。消息不可变很重要。

为避免队列变满，消息处理（`react`、`receive`等）尽可能短很重要。长时间运行的任务应该交给其他参与者：

```
1\.  Actor A receives a message M from sender S
2\.  A spawns a new actor C
3\.  A sends (S, f(M)) to C
4\.  In parallel:
4a. A starts processing the next message.
4b. C does the long-running or dangerous (IO) task,
    When finished, sends the result to S,
    and C terminates. 
```

过程中的一些替代方案：

*   C 发`(S, result)`回给 A，A 转发给 S
*   A 保留一个映射`ActorRef C => (Sender S, Message M)` [，因此如果它看到 C 失败](http://doc.akka.io/docs/akka/2.0.3/scala/fault-tolerance.html)，它可以使用新的 Actor 重试处理 M。

所以回顾一下，Actor 是多线程的，以至于多个客户端可以从不同的线程向它发送多条消息，并且保证 Actor 将串行处理所有这些消息（尽管排序可以受到各种非过度严格的约束）。

请注意，虽然 Actor 的`react`代码[可以在多个线程上执行](http://doc.akka.io/docs/akka/2.0.3/scala/dispatchers.html)，但在单个给定时间点，它仅在单个给定线程上执行（您可以想象，Actor 在调度程序认为合适的情况下从一个线程跳到另一个线程，但这是技术细节）。*注意：*内部状态仍然不需要同步，因为 Actor保证处理消息之间[的发生前语义。](http://doc.akka.io/docs/akka/snapshot/general/jmm.html)

并行性是通过让多个 Actor 并行工作来实现的，通常形成[主管层次结构](http://doc.akka.io/docs/akka/2.0.3/general/supervision.html)或[平衡工作负载](http://doc.akka.io/docs/akka/2.0.3/scala/routing.html)。

请注意，如果您只需要并发/异步计算，但您没有或无法摆脱全局状态，[`Future`那么 s 是一个更好的组合](http://doc.akka.io/docs/akka/2.0.3/scala/futures.html)和更简单的概念。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T04:56:38.877

“演员”不是多线程的，但*演员系统*通常是。每个参与者一次只执行一个动作，但是当有多个参与者时，每个参与者都可以并行地对其各自的封装状态进行操作。如果一个计数器属性没有*在参与者之间*共享，它就不是*共享*的可变状态。

 *如果你的问题是关于actor系统的实现，它会有所不同并且通常是可配置的，即默认的Scalaactor可以配置为运行单线程或线程池或使用Java ForkJoin任务。我发现 scala.actors 源代码非常易读，所以如果您想了解发生了什么，我建议您查看一下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T05:12:37.067

您可以使用单独的演员进行计数。当演员收到消息时，它可以向（单例）计数演员发送消息。这样你就可以有多个工人演员并且仍然计算消息。

Akka 有一个叫做的东西`Agents`，在这种情况下可能很有用。

```
val counter = Agent(0)
counter send (_ + 1) 
```

[http://doc.akka.io/docs/akka/2.0.2/scala/agents.html](http://doc.akka.io/docs/akka/2.0.2/scala/agents.html)*

# sql-server-2005 - 在存储过程中将列名和值作为参数发送

> ID：12399415
> 
> 赞同：0
> 
> 时间：2012-09-13T04:26:59.100
> 
> 标签：sql-server-2005, stored-procedures

我想用我作为参数传递的列名和列值来更新存储过程中的一个条目，我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:34:44.667

对于类似的事情，您将需要使用动态 SQL

就像是

```
CREATE TABLE #Test(
        ID INT,
        Val VARCHAR(20)
)

INSERT INTO #Test SELECT 1, '2'

SELECT  *
FROM    #Test

DECLARE @ColumnName VARCHAR(MAX),
        @ParamValue VARCHAR(MAX),
        @Lookup INT

SELECT  @ColumnName = 'Val',
        @ParamValue = 'tada',
        @Lookup = 1

DECLARE @SQL VARCHAR(MAX)
SELECT  @SQL = 'UPDATE #Test SET ' + @ColumnName + ' = ''' + @ParamValue + ''' WHERE ID = ' + CAST(@Lookup AS VARCHAR(MAX))
EXEC (@SQL)

SELECT  *
FROM    #Test

DROP TABLE #Test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:29:25.690

试试这个

```
IF @COLUMNNAMEVALUEVARCHAR <> '' OR  @COLUMNNAMEVALUEVARCHAR is not NULL

IF @COLUMNNAMEVALUEFLOAT <> '' OR  @COLUMNNAMEVALUEFLOAT is not NULL 
```

# cmake - 如何在 CMake 的 try_compile 函数中为 OpenMP 设置链接器标志

> ID：12399422
> 
> 赞同：62
> 
> 时间：2012-09-13T04:28:09.443
> 
> 标签：cmake, openmp

我想验证当前编译器是否可以使用 openmp 支持构建。该应用程序确实部署在各种 unix 系统中，其中一些系统可能具有旧版本的 OpenMP，我想测试重要的 OpenMP 功能。所以，我想构建一个包含一些 OpenMP 调用的测试源文件。

因此，我创建了一个非常简单的测试文件，并尝试使用 CMake 中的 try_compile 函数。不幸的是，它似乎没有正确应用 -fopenmp 链接器标志。有谁知道如何强制链接器标志或查看链接器标志是否在任何地方应用？

来自 CMakeLists.txt

```
try_compile(
    HAVE_OPENMP
    ${APBS_ROOT}/src/config
    ${APBS_ROOT}/src/config/omp_test.c
    CMAKE_FLAGS "-DCMAKE_C_FLAGS=-fopenmp -DCMAKE_EXE_LINKER_FLAGS=-fopenmp"
    OUTPUT_VARIABLE TRY_COMPILE_OUTPUT
    ) 
```

来自 omp_test.c

```
#include <stdio.h>
#include <omp.h>

int main()
{
    int i;
    int threadID = 0;
    #pragma omp parallel for private(i, threadID)
    for(i = 0; i < 16; i++ )
    {
        threadID = omp_get_thread_num();
        #pragma omp critical
        {
            printf("Thread %d reporting\n", threadID);
        }
    }
    return 0;
} 
```

结果输出是

```
Change Dir: src/config/CMakeFiles/CMakeTmp

Run Build Command:/usr/bin/make "cmTryCompileExec/fast"
/usr/bin/make -f CMakeFiles/cmTryCompileExec.dir/build.make CMakeFiles/cmTryCompileExec.dir/build
make[1]: Entering directory `src/config/CMakeFiles/CMakeTmp'
/usr/bin/cmake -E cmake_progress_report /data/work/source/apbs/src/config/CMakeFiles/CMakeTmp/CMakeFiles 1
Building C object CMakeFiles/cmTryCompileExec.dir/omp_test.c.o
/usr/bin/gcc    -o CMakeFiles/cmTryCompileExec.dir/omp_test.c.o   -c /data/work/source/apbs/src/config/omp_test.c
Linking C executable cmTryCompileExec
/usr/bin/cmake -E cmake_link_script CMakeFiles/cmTryCompileExec.dir/link.txt --verbose=1
/usr/bin/gcc         CMakeFiles/cmTryCompileExec.dir/omp_test.c.o  -o cmTryCompileExec -rdynamic 
CMakeFiles/cmTryCompileExec.dir/omp_test.c.o: In function `main':
omp_test.c:(.text+0x19): undefined reference to `omp_get_thread_num'
collect2: ld returned 1 exit status
make[1]: *** [cmTryCompileExec] Error 1
make[1]: Leaving directory `src/config/CMakeFiles/CMakeTmp'
make: *** [cmTryCompileExec/fast] Error 2

CMake Error at CMakeLists.txt:688 (message):
  Test OpenMP program would not build.  OpenMP disabled 
```

当我尝试在命令行上编译测试程序时，它工作正常

```
src/config$ gcc -fopenmp omp_test.c -o omp_test && ./omp_test
Thread 1 reporting
Thread 4 reporting
Thread 7 reporting
Thread 11 reporting
Thread 9 reporting
Thread 12 reporting
Thread 6 reporting
Thread 8 reporting
Thread 15 reporting
Thread 13 reporting
Thread 10 reporting
Thread 0 reporting
Thread 3 reporting
Thread 2 reporting
Thread 5 reporting
Thread 14 reporting 
```

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-09-13T10:55:26.520

CMake 有一个[标准模块](https://cmake.org/cmake/help/latest/module/FindOpenMP.html)用于测试编译器是否支持 OpenMP：

```
find_package(OpenMP)
if (OPENMP_FOUND)
    set (CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${OpenMP_C_FLAGS}")
    set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${OpenMP_CXX_FLAGS}")
    set (CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} ${OpenMP_EXE_LINKER_FLAGS}")
endif() 
```

**注意**：
不建议再将此答案`OpenMP`用于当前`CMake`版本的项目中。参考其他答案。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2018-07-20T18:21:12.737

从 CMake 3.9 开始，每种语言都有导入的 OpenMP 目标。我认为这是一个更优雅的解决方案。这是 C++ 中的一个示例：

```
cmake_minimum_required(VERSION 3.9)
project(solver LANGUAGES CXX)

find_package(OpenMP REQUIRED)
add_executable(solver solver.cc)
target_link_libraries(solver PRIVATE OpenMP::OpenMP_CXX) 
```

这更方便，因为它减少了输入，这样您就不必调整容易出错的编译标志、库等。这就是现代 CMake 的发展方向。

* * *

如果您使用的是 CMake 3.9 之前的版本，我仍然不推荐[当前接受的答案](https://stackoverflow.com/a/12404666/538216)。我相信为每个目标设置标志更好：

```
add_executable(solver solver.cc)
target_link_libraries(solver PRIVATE "${OpenMP_CXX_FLAGS}")
target_compile_options(solver PRIVATE "${OpenMP_CXX_FLAGS}") 
```

这可能不适用于某些编译器；这也是 CMake 在 CMake 3.9 中改进其 OpenMP 支持的部分原因。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2019-03-13T17:35:37.890

**CMake 3.9+ 中改进了对**OpenMP的支持****

 **## CMakeLists.txt

```
cmake_minimum_required(VERSION 3.9)
project(openmp_test) # you can change the project name

find_package(OpenMP)

add_executable(openmp_para_test main.cpp) # you can change the excutable name

if(OpenMP_CXX_FOUND)
    target_link_libraries(openmp_para_test PUBLIC OpenMP::OpenMP_CXX)
endif() 
```

如果需要，这种方式将正确设置与编译行不同的库链接行。

[来源](https://cliutils.gitlab.io/modern-cmake/chapters/packages/OpenMP.html)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-06-21T07:58:02.010

如果您尝试使用 g++ 的“现代”方式，您也可以这样做：

```
find_package(OpenMP REQUIRED)

add_executable(Foo foo.cpp)
target_compile_options(Foo PRIVATE -Wall ${OpenMP_CXX_FLAGS})
target_link_libraries(Foo PRIVATE ${OpenMP_CXX_FLAGS}) 
```

注意：

1.  如果您只省略 target_compile_options 您的编译指示将被简单地忽略（启用的警告会告诉您）

2.  如果您只省略 target_link_libraries 您的代码将无法编译，因为 g++ 未正确链接

3.  如果您将两者都忽略 1\. note 将应用呈现不再需要的链接并且您的代码将编译。

我不知道这种将“hack”与标志链接起来是否也适用于其他编译器。**

# bash - 在 bash 中操作命令行参数

> ID：12399423
> 
> 赞同：1
> 
> 时间：2012-09-13T04:28:16.157
> 
> 标签：bash

我想创建一个 shell 脚本以便我可以输入

```
gc program_name.c 
```

并达到与我输入相同的效果

```
gcc -o program_name program_name.c 
```

现在，我知道如何做到这一点，这样我就可以简单地输入`gcc program_name`并获得效果：

```
gcc -o $1 $1.c 
```

问题是我想使用制表符完成，这种方法需要我退格来删除扩展名。（是的，这是一件小事，但我也有兴趣了解这种论点操纵背后的一般原则。）

换句话说，我希望能够让脚本*删除*尾随扩展。我猜我可以使用另一个变量，但我不知道怎么说，例如， $name = $1 *minus the trailing extension*。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:44:04.473

```
#!/bin/bash
exec gcc -o "${1%.c}" "$1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:36:48.340

供 unix 使用

```
name=`basename $1 ".c"` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:33:25.410

看看你是否可以从下面的代码片段中继续前进。

```
pgm=test.c
echo ${pgm%%.*} 
```

# objective-c - CCCallFunc 和 ARC

> ID：12399425
> 
> 赞同：2
> 
> 时间：2012-09-13T04:28:28.133
> 
> 标签：objective-c, cocos2d-iphone

这是我的问题我正在尝试为 iphone 的 cocos2d 中的动作序列创建一个回调函数，但我不断收到错误的访问错误。

在这里我创建了我的回调

```
id myCallFunc = [CCCallFuncND actionWithTarget:self.delegate selector:@selector(playerAttack:data:) data:(__bridge void *)([[PlayerAttackPacket alloc] initWithPlayer:@"" attackChoice: [NSNumber numberWithInt: item.tag]]) ]; // to call our method 
```

这是被回调的函数，当转换数据时，编译器说访问不正确。

```
-(void) playerAttack:(id)sender data:(void *)data
{
    PlayerAttackPacket* packet = (__bridge PlayerAttackPacket*)data;
    BattleModel *model = [BattleModel sharedInstance];
    int choice = packet.attackChoice.intValue;
    NSString * players = packet.player;
} 
```

播放器包：

```
@interface PlayerAttackPacket : NSObject {
    NSString * player;
    NSNumber * attackChoice;
}

@property (nonatomic, retain) NSString * player;
@property (nonatomic, retain) NSNumber * attackChoice;
-(id) initWithPlayer: (NSString*)_player attackChoice: (NSNumber*)choice;
@end

@implementation PlayerAttackPacket
@synthesize player,attackChoice;

-(id) initWithPlayer: (NSString*)_player attackChoice: (NSNumber*)choice
{
    if((self=[super init]))
    {
        self.player = _player;
        self.attackChoice = choice;
    }
    return self;
}
@end 
```

谁能告诉我我做错了什么？=(。我的感觉是它与 ARC 有关，但我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T09:17:41.457

为了便于阅读，这里是您重新格式化的 call func 方法：

```
void* data = (__bridge void*)[[PlayerAttackPacket alloc] initWithPlayer:@"" 
                               attackChoice: [NSNumber numberWithInt: item.tag]];
id myCallFunc = [CCCallFuncND actionWithTarget:self.delegate 
           selector:@selector(playerAttack:data:) data:data ]; 
```

你要做的是：

*   分配新对象
*   桥把它扔到虚空*
*   将其传递给 CCCallFuncND

ARC看到/做的是：

*   分配的新对象
*   新对象桥铸（忽略）
*   调用 func 后对象超出范围
*   释放对象

您不保留对该对象的强引用，因此它在选择器执行时被释放。请不要使用 Ben 的建议，我知道它有效，但它也很危险，因为它会在调用 func 操作未实际执行选择器时泄漏内存，即在停止操作/序列时或在调用时更改场景时func 仍在运行，等待执行选择器。

您可以通过两种方式解决此问题：

*   保持对新对象的强引用，直到选择器被执行，即作为类的实例变量
*   改用 CCCallBlock

一定要使用块！它避免了内存管理问题，您也不必对对象有强引用。实际上，您甚至不必将其传递给块！以下是它的工作原理：

```
PlayerAttackPacket* packet = [[PlayerAttackPacket alloc] initWithPlayer:@"" 
                               attackChoice: [NSNumber numberWithInt: item.tag]];

id myCallBlock = [CCCallBlock actionWithBlock:^{

    // no bridge casting required, packet variable is accessible within the block
    // no memory management needed, block copies packet and keeps it alive
    BattleModel *model = [BattleModel sharedInstance];
    int choice = packet.attackChoice.intValue;
    NSString * players = packet.player;
           }]; 
```

现在我在这里猜测，但在我看来，您创建 PlayerAttackPacket 类只是为了将几个参数传递给 CCCallFuncND。你也可以用积木跳过它！

```
NSString* player = @"player1";

id myCallBlock = [CCCallBlock actionWithBlock:^{

    // whatever variables you need from the surrounding scope, you can just use
    // them as if they were local variables in the block!
    int choice = item.tag;
    NSString * players = player;
           }]; 
```

块超级方便，并且与 ARC 一起工作得更好。使用积木！重复：[使用块](http://developer.apple.com/library/ios/#featuredarticles/Short_Practical_Guide_Blocks/_index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:03:57.723

很难说，但我认为你必须在你的 CCCallFuncND 声明和 playerAttack 中将 (__bridge void *) 更改为 (_bridge_retained void*)，当你将它转换为 (_bridge_transfer PlayerAttackPacket*) 时。

需要注意的是，如果你的场景在调用 playerAttack 方法之前就结束了，那么在 CCSequence 期间，数据包永远不会被释放，因此会泄漏。此外，如 LearnCocos2D 所指出的，如果该操作停止，则会出现泄漏。

我建议您查看 CCCallBlock 操作，因为它们更易于使用并且您不应该遇到这个问题。

# javascript - Facebook Javascript SDK 未触发 Internet Explorer

> ID：12399428
> 
> 赞同：0
> 
> 时间：2012-09-13T04:28:47.950
> 
> 标签：javascript, asp.net, internet-explorer, facebook-javascript-sdk, jscript

**首先让我说我在 web 服务器上的端口 80 上运行它，所以这不是这个代码不会在 internet explorer 上触发的原因**。

此代码在 Firefox、Chrome 和 Safari 中完美运行。但是，当我尝试使用 Internet Explorer 运行它时，我只得到一个大的空白屏幕。

```
<link rel="stylesheet" type="text/css" href="styles/316127.css" />
<div id="fb-root"></div>
<div class="fb-login-button" data-show-faces="false" data-width="400" data-max-rows="1"     scope="email,friends_work_history,friends_location,user_work_history,user_location" id="loginButton" style="display: inherit;"> </div>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
<body> 
```

```
window.fbAsyncInit = function () {

    FB.init({
        appId: 'MYAPPID', // App ID
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true  // parse XFBML

    });

    FB.Event.subscribe('auth.authResponseChange', function (response) {
        if (response.status === 'connected') {

            // the user is logged in and has authenticated your
            // app, and response.authResponse supplies
            // the user's ID, a valid access token, a signed
            // request, and the time the access token
            // and signed request each expire

            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;

            var form = document.createElement("form");
            form.setAttribute("method", 'post');

            form.setAttribute("action", 'FacebookLogin.ashx');

            var field = document.createElement("input");
            field.setAttribute("type", "hidden");
            field.setAttribute("name", 'accessToken');
            field.setAttribute("value", accessToken);
            form.appendChild(field);

            document.body.appendChild(form);
            form.submit();

            //display loading logo

            document.getElementById('loadinggif').style.display = 'inherit';
            document.getElementById('loginButton').style.display = 'none';

        } else if (response.status === 'not_authorized') {
            // the user is logged in to Facebook,
            // but has not authenticated your app

        } else {
            // the user isn't logged in to Facebook.

        }
    });
};

// Load the SDK Asynchronously

(function (d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document)); 
```

```
<title>Test</title> 
```

```
<form id="form1" runat="server">

 <br />

<asp:Image ID="loadinggif" runat="server" ImageUrl="~/Site/ajax-loader.gif" ImageAlign="Middle" style="display: none;" CssClass="centered"/>
</form> 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:37:24.037

我刚刚在 Internet Explorer 9 中打开它，它运行良好。我登录 Facebook，添加应用程序，然后加载内容。

你检查过你的IE设置吗？确保将其设置为允许 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:15:15.340

同样的问题，我终于做了以下事情：而不是使用：

```
 window.fbAsyncInit = function() {
    FB.init({
      appId:  'XXXXXX',
      status: true,
      cookie: true,
      xfbml: true
    });
  } 
```

我使用以下内容：

```
 var fbAsyncLoaded=0;
  window.fbAsyncInit = function() {
    if(fbAsyncLoaded!=1) { fbAsyncLoaded=1; appInit(); }
  }

  if(document.addEventListener) 
  {
    document.addEventListener("DOMContentLoaded", function() {
      if(fbAsyncLoaded != 1) { fbAsyncLoaded=1; appInit(); }
      document.removeEventListener("DOMContentLoaded", arguments.callee, false);
    }, false );
  } else if(document.attachEvent) {
    document.attachEvent("onreadystatechange", function() {
      if(document.readyState === "complete") {
        if(fbAsyncLoaded != 1) { fbAsyncLoaded=1; appInit(); }
        document.detachEvent( "onreadystatechange", arguments.callee);
      }
    });
  }

  function appInit()
  {
    FB.init({
      appId:  'XXXXXX',
      status: true,
      cookie: true,
      xfbml: true
    });
  } 
```

希望这可以帮助！

# visual-studio-2012 - 如何使新的文档选项卡出现在右侧？

> ID：12399430
> 
> 赞同：1
> 
> 时间：2012-09-13T04:29:08.770
> 
> 标签：visual-studio-2012

在 VS2010 中有一个选项，但我在 VS2012 中找不到它。它被移除了吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:15:38.847

他们将 VS 2012 中的设置移至：

*工具 > 选项 > 环境 > 选项卡和窗口 > 在现有选项卡的右侧插入新选项卡*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T11:35:11.103

他们可能已将其删除，因为他们添加了一项功能，其中临时选项卡出现在最右侧。例如，如果您浏览调用堆栈，如果您查看的每个文件尚未打开，则会出现在此处

# animation - 在 BlackBerry 中闪烁 Labelfield 文本

> ID：12399432
> 
> 赞同：0
> 
> 时间：2012-09-13T04:29:18.583
> 
> 标签：animation, blackberry, java-me

如何用一种颜色连续闪烁 LabelField 文本？在 Android 中，它可以通过 AlphaAnimation 来完成。我如何在黑莓上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:04:00.033

如果你不想扩展`LabelField`，你可以安排一个在实例上重复`TimerTask`设置一个空文本和原始文本。`LabelField`在这种情况下，`LabelField`每次更改文本时都会更改范围。所以，这个[答案](https://stackoverflow.com/a/12400021/431639)对我来说似乎是最完美的。检查该答案的草稿（未编译，未测试）实施。

***LabelField 修改***

```
LabelField lbl = new LabelField() {
    private boolean blinkFlag = false;

    protected void paint(Graphics g) {
        blinkFlag = !blinkFlag;
        if (blinkFlag == false) {
            super.paint(g);
        }  
    }
}; 
```

***调度 TimerTask***

```
final int blinkInterval = 1000;

TimerTask blinkTask = new TimerTask() {
    public void run() {     
        UiApplication.getUiApplication().invokeLater(new Runnable() { 
            public void run() {
                lbl.invalidate();
            });
        }
    }
};

(new Timer()).schedule(blinkTask , blinkInterval); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T05:36:11.393

扩展`LabelField`类并覆盖其`paint(Graphics g)`方法以在连续调用时绘制/擦除文本。

然后实现 a并使用类实例`TimerTask`启动它。`Timer`

此任务应定期使您的自定义标签字段无效，例如 - 每秒钟。

`invalidate()`调用将导致字段重绘和标签文本将闪烁。

# pdf - 从 Word VBA 打印到 Adob e PDF 失败

> ID：12399438
> 
> 赞同：2
> 
> 时间：2012-09-13T04:29:40.330
> 
> 标签：pdf, printing, adobe

和这个斗争了一段时间。Office 2007 和 Adob​​e Pro 10。

让 VBA 代码逐步浏览目录树并将 .doc 和 .docx 文件打印到 PDF 打印机（设置为默认值）。

代码运行良好，但是当我尝试打开文件时，Adobe 说它不能，因为它不是受支持的文件类型或已损坏。但是，Adobe 是通过 Adob​​e PDF 打印机创建它的人。

如果我从 Word 中手动打印，它工作得很好，所以我猜它是 vba 中的东西。所有参数都很好——我能说的最好，而且我已经设置了正确的默认值/首选项。请注意，在下面的代码中，我什至尝试使用 Application.Printout 并得到了相同的结果。

`Documents.Open FileName:="""" & FolderPath & "\" & sDocName & """", ReadOnly:=True ' Application.PrintOut FileName:="""" & FolderPath & "\" & sDocName & """", OutputFileName:=PDFDoc, _ PrintToFile:=True, Background:=True ActiveDocument.PrintOut OutputFileName:=PDFDoc, Background:=True Documents(sDocName).Close savechanges:=False` PDFDoc 是输出的完全限定文件名。它工作正常，因为我可以在我期望的位置找到文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:51:42.080

据我所知，`PrintToFile:= True`强制格式为 PS（后记）而不是 PDF。因此，您需要将文件从 PS 转换为 PDF（可以自动化）。看看[这个链接](http://www.igetit.net/samplecode/Word_To_PDF_vba_code.aspx)的例子。

# multithreading - 线程和轻量级线程有什么区别？

> ID：12399440
> 
> 赞同：0
> 
> 时间：2012-09-13T04:29:47.337
> 
> 标签：multithreading

我不太了解线程和轻量级线程之间的区别。从 API 的角度来看，两种类型的线程都是相同的，那么差异到底在哪里。是在实现级别，轻量级线程由比 OS 线程调度程序更高级别的运行时管理，还是其他什么？此外，是否有一组启发式方法可供人们用来决定在特定场景中使用哪种类型的线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:48:08.387

在什么情况下，轻量级线程可以表示由库实现的线程，例如可以通过在事件处理层在轻量级线程之间切换来在库中模拟线程，这些轻量级线程排队并由单个 OS 线程处理，这样做的好处是，由于在库中处理上下文切换，因此当数据处理完成时可以发生切换，因此下次该轻量级线程变为活动状态时不需要将数据加载回 CPU 的缓存中。

轻量级线程也可以指协作线程（或纤程），这些线程是您必须明确让步才能给其他轻量级线程机会的线程，这具有相同的优势，因为上下文切换可以发生在您认识的地方已经完成了一些数据的处理，所以你知道它不会再需要了。

或者，轻量级线程可能意味着正常的操作系统线程，非轻量级线程可能意味着进程，进程中至少有一个线程，并且还有自己的内存和其他资源，它们比线程更昂贵，因为你不能在线程之间共享数据很容易，并且操作系统创建进程可能是一项更昂贵的操作。

# c# - ASP.net MVC 4 只有 1 个数据库？

> ID：12399442
> 
> 赞同：1
> 
> 时间：2012-09-13T04:29:52.500
> 
> 标签：c#, .net, sql-server, database

我正在使用共享数据库解决方案，我只能访问一个数据库。如何让我的 MVC 应用程序只使用这 1 个数据库来存储它的所有数据？这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T04:45:35.970

MVC 不需要数据库来运行。您可以编写访问数据库的所有代码，因此您可以完全控制它将访问多少数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:02:48.067

通过不使用 Microsoft 提供的任何成员资格、会话和配置文件提供程序，它们创建了自己的名为“aspnet”的数据库。

（需要更改 web.config 文件）

除此之外，StanK 是对的，您可以或者必须自己编写代码。
顺便说一句，如果它不是 Sql-Server 数据库，您可能需要另一个 ado.net 提供程序，而不是构建到 .NET 框架中的提供程序。

这是访问数据库的代码示例：

```
protected System.Data.Common.DbProviderFactory m_providerFactory = null;

 protected System.Data.SqlClient.SqlConnectionStringBuilder m_ConnectionString;

        public System.Data.Common.DbProviderFactory GetFactory()
        {
            System.Data.Common.DbProviderFactory providerFactory = null;
            providerFactory = System.Data.Common.DbProviderFactories.GetFactory("System.Data.SqlClient");
            return providerFactory;
        } // End Function GetFactory

 public System.Data.IDbConnection GetConnection()
        {
            System.Data.SqlClient.SqlConnection sqlc = new System.Data.SqlClient.SqlConnection("ConnectionString");

            return sqlc;
        } // End Function GetConnection

public System.Data.IDbConnection GetConnection(string strInitialCatalog)
        {
            if (string.IsNullOrEmpty(strInitialCatalog))
            {
                return GetConnection();
            }

            System.Data.SqlClient.SqlConnection sqlc = null;

            lock (this.m_ConnectionString)
            {
                string strOrigInitialCatalog = this.m_ConnectionString.InitialCatalog;
                this.m_ConnectionString.InitialCatalog = strInitialCatalog;
                sqlc = new System.Data.SqlClient.SqlConnection(this.m_ConnectionString.ConnectionString);
                this.m_ConnectionString.InitialCatalog = strOrigInitialCatalog;
                strOrigInitialCatalog = null;
            }

            return sqlc;
        }

    public override System.Data.IDbCommand CreateCommand()
    {
        return CreateCommand("");
    } // End Function CreateCommand

    public override System.Data.IDbCommand CreateCommand(string strSQL)
    {
        System.Data.IDbCommand idbc = this.m_providerFactory.CreateCommand();
        idbc.CommandText = strSQL;

        return idbc;
    } // End Function CreateCommand

public System.Data.DataTable GetDataTable(System.Data.IDbCommand cmd, string strDb)
        {
            System.Data.DataTable dt = new System.Data.DataTable();

            using (System.Data.IDbConnection idbc = GetConnection(strDb))
            {

                lock (idbc)
                {

                    lock (cmd)
                    {

                        try
                        {
                            cmd.Connection = idbc;

                            using (System.Data.Common.DbDataAdapter daQueryTable = this.m_providerFactory.CreateDataAdapter())
                            {
                                daQueryTable.SelectCommand = (System.Data.Common.DbCommand)cmd;
                                daQueryTable.Fill(dt);
                            } // End Using daQueryTable

                        } // End Try
                        catch (System.Data.Common.DbException ex)
                        {
                            //COR.Debug.MsgBox("Exception executing ExecuteInTransaction: " + ex.Message);
                            Log("cMS_SQL.GetDataTable(System.Data.IDbCommand cmd)", ex, cmd.CommandText);
                        }// End Catch
                        finally
                        {
                            if (idbc != null && idbc.State != System.Data.ConnectionState.Closed)
                                idbc.Close();
                        } // End Finally

                    } // End lock cmd

                } // End lock idbc

            } // End Using idbc

            return dt;
        } // End Function GetDataTable

public override System.Data.DataTable GetDataTable(string strSQL, string strInitialCatalog)
{
    System.Data.DataTable dt = null;

    using (System.Data.IDbCommand cmd = this.CreateCommand(strSQL))
    {
        dt = GetDataTable(cmd, strInitialCatalog);
    } // End Using cmd

    return dt;
} // End Function GetDataTable 
```

用法：

```
GetDataTable("SELECT * FROM T_User", "DB_NAME"); 
```

以及为未注册的提供者获取提供者工厂的代码：

```
 public System.Data.Common.DbProviderFactory GetFactory(Type tAssemblyType)
        {
            return GetFactory(tAssemblyType.AssemblyQualifiedName);
        }

        public virtual System.Data.Common.DbProviderFactory GetFactory(string assemblyType)
        {

#if TARGET_JVM // case insensitive GetType is not supported
            Type type = Type.GetType (assemblyType, false);
#else
            Type type = Type.GetType(assemblyType, false, true);
#endif
            if (type != null && type.IsSubclassOf(typeof(System.Data.Common.DbProviderFactory)))
            {
                // Provider factories are singletons with Instance field having
                // the sole instance
                System.Reflection.FieldInfo field = type.GetField("Instance", System.Reflection.BindingFlags.Public |
                                                 System.Reflection.BindingFlags.Static);
                if (field != null)
                {
                    return (System.Data.Common.DbProviderFactory)field.GetValue(null);
                    //return field.GetValue(null) as DbProviderFactory;
                }

            }

            throw new System.Configuration.ConfigurationErrorsException("DataProvider is missing!");
            //throw new System.Configuration.ConfigurationException("DataProvider is missing!");
        } // End Function GetFactory 
```

还有一个例子（获取 postgre 工厂）：

```
public System.Data.Common.DbProviderFactory GetFactory()
        {
            //AddFactoryClasses();
            System.Data.Common.DbProviderFactory providerFactory = null;
            providerFactory = this.GetFactory(typeof(Npgsql.NpgsqlFactory));

            return providerFactory;
        } // End Function GetFactory 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:23:09.700

我在这里猜测，但您是否使用实体框架进行数据访问，并且还想使用成员资格提供程序，并且无法在与实体框架表相同的数据库中获取成员资格模式 - 如果是这样，请尝试以下操作：

让您成为实体框架（或您已经创建的任何其他数据库事物），然后使用 aspnet_regsql.exe 指定您希望在哪个数据库中创建成员资格架构。

该工具可以通过命令行或漂亮的设置向导为您有效地创建表格。

请在此处查看本教程[http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-vb](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-vb)特别注意标题为步骤 2：添加的部分SqlMembershipProvider 架构到数据库。

为方便起见，这是从上述文章中粘贴的重要部分：

> 第 2 步：将 SqlMembershipProvider 架构添加到数据库
> 
> SqlMembershipProvider 需要在用户存储数据库中安装一组特定的表、视图和存储过程。可以使用 aspnet_regsql.exe 工具添加这些必需的数据库对象。此文件位于 %WINDIR%\Microsoft.Net\Framework\v2.0.50727\ 文件夹中。
> 
> 注意：aspnet_regsql.exe 工具提供命令行功能和图形用户界面。图形界面更加用户友好，这也是我们将在本教程中研究的内容。当需要自动添加 SqlMembershipProvider 架构时，命令行界面很有用，例如在构建脚本或自动化测试场景中。
> 
> aspnet_regsql.exe 工具用于向指定的 SQL Server 数据库添加或删除 ASP.NET 应用程序服务。ASP.NET 应用程序服务包含 SqlMembershipProvider 和 SqlRoleProvider 的架构，以及其他 ASP.NET 2.0 框架的基于 SQL 的提供程序的架构。我们需要向 aspnet_regsql.exe 工具提供两点信息：
> 
> 我们是否要添加或删除应用程序服务，以及要从中添加或删除应用程序服务架构的数据库在提示使用数据库时，aspnet_regsql.exe 工具要求我们提供数据库所在服务器的名称，用于连接到数据库的安全凭证和数据库名称。如果您使用的是 SQL Server 的非 Express 版，您应该已经知道此信息，因为它与您在通过 ASP.NET 网页使用数据库时必须通过连接字符串提供的信息相同。但是，在使用 App_Data 文件夹中的 SQL Server 2005 Express Edition 数据库时确定服务器和数据库名称会涉及更多内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T00:48:17.860

抱歉，伙计们提出了新问题，感谢所有答案！这对我有用。

首先，让我的 DBContext 数据模型看起来像......

```
public class CDBContext : DbContext    
{
    public DbSet<tbl1> tbl1{ get; set; }
    public DbSet<tbl2> tbl2{ get; set; }
    public DbSet<tbl3> tbl3{ get; set; }
    public DbSet<tbl4> tbl4{ get; set; }
} 
```

然后，有一个示例表模型看起来像

```
public class tbl1
{
    public int ID { get; set; }

    public string Var2{ get; set; }

    public string Var3{ get; set; }
} 
```

接下来，我使用“Add->Controller”向导，选择适当的数据模型（tbl1）和适当的上下文（CDBContext）。然后我可以对模型 tbl2、tbl3 和 tbl4 执行此操作！每个模型都成为数据库中的一个表，而不是为数据库使用整个表（这是我之前所做的）。

现在看来可以用了，再次感谢！

# java - 正则表达式找出Java中花括号内的子字符串

> ID：12399443
> 
> 赞同：1
> 
> 时间：2012-09-13T04:30:00.173
> 
> 标签：java, regex, substring, curly-braces

我有这种类型的子串

```
string 1
{
    string 2
    string 3
    {
        string 4
        string 5
    }
    string 6
    {
        string 7
        string 8
    }
    string 9
    {
        string 10
        string 11
        string 12
        {
            string 13
            string 14
        }
        string 15
    }
}
string 16
string 17 
```

所以基本上我有java类类型的结构
，现在我想要一段代码，它可以让我跟随子字符串（SS#）
SS1：

```
 string 4
        string 5 
```

SS2：

```
 string 7
        string 8 
```

SS3：

```
 string 13
            string 14 
```

SS4：

```
string 16
string 17 
```

SS5：

```
 string 10
        string 11
        string 12
        {
            string 13
            string 14
        }
        string 15 
```

SS6：

```
 string 2
    string 3
    {
        string 4
        string 5
    }
    string 6
    {
        string 7
        string 8
    }
    string 9
    {
        string 10
        string 11
        string 12
        {
            string 13
            string 14
        }
        string 15
    } 
```

所以基本上我想要一段代码可以让我将字符串（java类）的各个部分（函数，类，但不是任何循环）转换为不同的子字符串......
我读了这个正则
[表达式来获取花括号之间的字符串“{我想要大括号}之间是什么”](https://stackoverflow.com/questions/413071/regex-to-get-string-between-curly-braces-i-want-whats-between-the-curly-brace)
，但它只能在一对'{'和'}'之间获取数据，而不计算第一个之后的'{'。
我没有完整的代码，但有一些关于如何进行的方向？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:50:37.140

**虽然这不是使用 RegEx 完美完成的，但使用[堆栈](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)总是更好。**

***但它只需要一个 RegEx 解决方案，然后它可能会起作用（并非总是如此）：***

```
(?is)\{[^}]*?\}(?=.*?\}) 
```

**解释**

```
<!--

    (?is)\{[^}]*?\}(?=.*?\})

    Match the remainder of the regex with the options: case insensitive (i); dot matches newline (s) «(?is)»
    Match the character “{” literally «\{»
    Match any character that is NOT a “}” «[^}]*?»
       Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
    Match the character “}” literally «\}»
    Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=.*?\})»
       Match any single character «.*?»
          Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
       Match the character “}” literally «\}»
    --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:49:28.853

我不知道这方面的正则表达式，但我可以为此建议另一种解决方案：我只是在编写 sudo 代码：

1.  扫描给定输入字符串的字符
2.  如果 char 是 { 将 char 位置推入堆栈，
3.  否则，如果 char 是 } 从堆栈弹出位置并取 substring(poped_postion, current_position) 作为`SS#`
4.  goto 1（扫描下一个字符，直到字符串中剩下字符）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:50:55.013

使用正则表达式将很难做到这一点。我建议你用换行符和一些简单的规则来分割这个结构来创建一个 HashMap-s 的数据结构。字符串 2 将是键，但它没有任何价值。String3 将是下一个键，它的值将是下面花括号中的内容，以 { 开头的行开始，以 } 开头的行结束。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-13T04:47:25.953

试试这个正则表达式来匹配`{string}`,

```
\{(.*)\} 
```

# c++ - c ++链接器错误：对静态函数的未定义引用

> ID：12399453
> 
> 赞同：0
> 
> 时间：2012-09-13T04:30:46.693
> 
> 标签：c++, linker-errors

啊文件

```
class A{
      public:
      static int* func (int &b);
} 
```

A.cpp

```
int* A::func(int &b){
   //some definition here
} 
```

我在其他文件中调用上述函数。我已经在其中包含了 .h 文件。当我尝试编译时出现以下错误

对 A::func(int &) 的未定义引用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:33:12.810

代码看起来正确。

首先要检查的是您的构建环境是否在 A.cpp 中编译和链接。

# git - 子项目的 Git 工作流程？

> ID：12399454
> 
> 赞同：1
> 
> 时间：2012-09-13T04:30:54.813
> 
> 标签：git, module, workflow, bitbucket, git-workflow

我们有一个定制的项目“kickstart”

这个 kickstart 可以很容易地添加模块。

当我们构建这些模块时，我们都基于版本控制的 kickstart 的一个干净的主副本来构建它们。

当我们开始一个项目时，我们创建一个空的 repo，将 kickstart repo 设置为远程，从远程拉取。当核心有更新时，我们再次从远程拉入。

这很好用。

但是我们有我提到的模块，我们将它们全部构建为一个新项目。

我们想要对所有这些模块进行版本控制。

模块的文件实际上驻留在模板中。

我们的工作流程看起来像这样

```
/site 1
  /kickstart
    /module1
      /module1 files
    /module2
      /module2 files
  /site 1 specific file
  /site 1 specific file

/site2
  /kickstart
    /modification of kickstart file for site2 only (e.g. config.php)
    /module2
      /module2 files
    /module3
      /module3 files
  /site 2 specific file
  /site 2 specific file

/site3
  /kickstart
    /modification of kickstart file for site3 only (e.g. config.php)
    /module1
      /module1 files
    /module3
      /module3 files
  /site 3 specific file
  /site 3 specific file 
```

因此，站点 1、2 和 3 是它们自己的 git 存储库。

它们都包含 kickstart，它是一个 git 存储库

其中一些共享模块。

现在我们不从这些向上游推送，如果我们在站点 1 中确定某些东西运行良好，我们将检查 kickstart 的干净副本并在那里进行更改，然后将它们拉入所有不同的站点。模块也是如此。

但我的基本问题是，我们将模块放在哪里？他们取决于那里的启动。

一个想法是将它们作为 kickstart 的分支，我也听说过子模块和子树，但不知道它们是如何工作的。

构建此工作流程的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:55:31.420

将这三个站点放在他们自己的 Git 存储库中（而不是使用一个具有三个分支的存储库），意味着您不必在站点 1、2 和 3 之间进行太多（如果有的话）合并：所有 3 个站点都只有一个远程：`kickstart`回购。

关于模块管理，每个模块都应该在自己的仓库中，以便轻松使用子模块或子树：

*   submodules 是一种在其自己的目录中单独获取每个模块及其完整历史记录的方法，甚至允许推回每个模块 repos。
*   子树有两种风格：[2007 年的子树合并策略](https://stackoverflow.com/questions/12349931/what-came-first-git-subtree-merge-strategy-or-git-submodule)（[在此处](https://stackoverflow.com/questions/1551473/git-subtree-why-cant-i-branch-from-a-subtree-rather-than-the-root/1551525#1551525%29)解释）和[最近的 (1.7.11+)`subtree`命令](https://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt)。
    子树[合并策略](http://www.kernel.org/pub/software/scm/git/docs/howto/using-merge-subtree.html)（另请参见[此处](http://nuclearsquid.com/writings/subtree-merging-and-you/)）更适合将模块 repo 之一合并到子目录（`modulex`）中。由于您不需要反击，因此这可能是您的解决方案。

# wordpress - WordPress 博客网址

> ID：12399460
> 
> 赞同：0
> 
> 时间：2012-09-13T04:31:51.917
> 
> 标签：wordpress, blogs

出于某种原因，我的博客帖子正在创建自己的 URL。

博客已开启`www.website.com/blog/`，但当我发布新帖子时，新帖子 URL 为`www.website.com/new-post-url/`.

我想要的是将博客文章 URL`www.website.com/blog/new-post-url/`作为他们的 URL。

我使用 All in One SEO 作为我的 SEO 插件（如果重要的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:19:29.117

您应该检查您的博客设置。以管理员身份登录并转到**设置>>常规设置** 检查此处**站点地址（URL）**。这应该是**http://www.website.com/blog**

希望这会有所帮助。一切顺利 ;）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T06:40:51.457

@user1667462

你检查过你的 .htaccess 文件吗？

因为当您将 /blog 重定向到您的 WordPress 博客时，您必须在 .htaccess 文件中添加以下代码

> 重写引擎开启
> 
> RewriteCond %{HTTP_HOST} ^(www.)?website.com$
> 
> RewriteRule ^(/)?$ 博客 [L]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-04T14:03:25.230

从**仪表板**转到**设置-> 永久链接**，然后选择**自定义结构**

 ****给`/blog/%postname%/`

通过转到任何帖子/页面来检查您的博客。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T17:17:44.557

登录到您的 Wordpress 管理面板并检查以确保将永久链接设置为适当的设置。还要检查以确保您的主题没有覆盖您可能选择的设置。例如，某些主题可以明确要求您为博客发布设置博客页面，这可能会干扰您假设正在发生的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-14T08:13:09.757

您转到管理页面并单击设置页面，更改 url 类型。****

# java - 犀牛打印功能

> ID：12399462
> 
> 赞同：13
> 
> 时间：2012-09-13T04:32:09.617
> 
> 标签：java, javascript, debugging, scripting, rhino

我正在使用 Rhino 1.7R4 和 env.js 1.2 在 Java 中运行 Javascript 代码

我想从我的 Javascript 代码中打印一个字符串到 Java 控制台。

根据： [http ://evilroundabout.blogspot.com.au/2009/11/javascript-printing-rhino.html](http://evilroundabout.blogspot.com.au/2009/11/javascript-printing-rhino.html)

我应该使用： print("Hello world");

但是当我这样做时，我得到：

```
org.mozilla.javascript.EcmaError: ReferenceError: "print" is not defined. (svg-renderer-highcharts-2.1.4.js#20)
at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3687)
at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3665)
at org.mozilla.javascript.ScriptRuntime.notFoundError(ScriptRuntime.java:3750)
at org.mozilla.javascript.ScriptRuntime.nameOrFunction(ScriptRuntime.java:1794)
at org.mozilla.javascript.ScriptRuntime.getNameFunctionAndThis(ScriptRuntime.java:2188)
at org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:1308)
at script.renderSVGFromObject(svg-renderer-highcharts-2.1.4.js:20) 
```

如果我使用 document.write 我看不到任何输出。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-13T04:47:43.070

我不认为这将在嵌入式模式下工作，我认为这只会在 Rhino 控制台中工作。

您可以使用 java.lang.system.out.println。这应该工作： -

```
java.lang.System.out.println("HELLO") 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-05T15:22:41.253

您可以很容易地使用 rhino shell 使用的相同范围。rhino shell 依赖于一个名为 Global 的特殊构造的范围实例，它定义了几个函数，如“print”。下面的示例演示了如何使用 Global 和“打印”功能。这将打印“Hello World！” 两次到标准输出。

```
import org.mozilla.javascript.Context;
import org.mozilla.javascript.tools.shell.Global;

/**
 * Hello world!
 *
 */
public class App 
{
    public static void main( String[] args )
    {
        System.out.println( "Hello World!" );

        Context cx = Context.enter();
        Global global = new Global(cx);
        cx.evaluateString(global, "print('Hello World!')", 
                "helloWorld.js", 1, null);
        Context.exit();
    }
} 
```

在挖掘[Rhino shell 可执行文件](https://github.com/mozilla/rhino/blob/master/toolsrc/org/mozilla/javascript/tools/shell/Main.java)后，我通过实验发现了这一点。

为了完整起见，这里是由[Global](https://github.com/mozilla/rhino/blob/master/toolsrc/org/mozilla/javascript/tools/shell/Global.java)定义的其他全局函数：

```
"defineClass",
"deserialize",
"doctest",
"gc",
"help",
"load",
"loadClass",
"print",
"quit",
"readFile",
"readUrl",
"runCommand",
"seal",
"serialize",
"spawn",
"sync",
"toint32",
"version" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-13T04:46:22.227

您可以创建自己的：

```
function print() {
    for( var i = 0; i < arguments.length; i++ ) {
       var value = arguments[i];
       java.lang.System.out.print( value );
    }
    java.lang.System.out.println();
}

function printf( format ) {
    java.lang.System.out.printf( format, Array.prototype.slice.call(arguments) );
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-02T19:50:44.847

截至 2014 年 1 月，方法和属性列表

```
new org.mozilla.javascript.tools.shell.Global( org.mozilla.javascript.Context.enter() ) 
```

看起来如下：

```
defineClass
deserialize
doctest
gc
getConsole
getErr
getIn
getOut
getPrompts
help
init
init
initQuitAction
installRequire
isInitialized
load
loadClass
pipe
print
quit
readFile
readUrl
runCommand
runDoctest
seal
serialize
setErr
setIn
setOut
setSealedStdLib
spawn
sync
toint32
version 
```

# build-process - 如何减少软件开发中构建中断的次数？

> ID：12399471
> 
> 赞同：1
> 
> 时间：2012-09-13T04:33:24.633
> 
> 标签：build-process

我的大型产品有 200 多人，位于 3 个不同的位置。大多数人都在主分支上工作，所以当然，重要的是要使构建损坏无效。有一个每日构建，生成构建大约需要 6 个小时。一次又一次地管理团队强调“提交前小心”，但现在一周内至少有一个构建被破坏。

你会分享你的实践来减少构建损坏吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:42:47.733

我要做的第一件事实际上是尽可能地努力使构建速度更快。不能低估这一点的重要性 - 更快的构建可能是您最快和最大的胜利。至少将 SSD 放在您的构建机器上。

除此之外，这是我见过的一些事情：

*   部分构建：也被一些人称为冒烟测试。快速运行并快速使整个构建失败的高级测试。他们会在完整构建之前运行。

*   较小的本地构建：有这么多人，我猜您为每组程序员都有某种本地分支。你有一个在本地运行的构建吗？

*   确保开发人员在推送代码之前在他们自己的机器上运行尽可能广泛的测试集。这已经发生了……对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:45:33.683

损坏的构建应该成为非事件，要实现这一点，您需要立即降低与损坏的构建相关的成本，因为创建它需要 6 个小时，并且很可能在大多数人每次损坏都不在办公室的时候执行build 可以将整个项目的时间表移动一天。要消除此成本，您需要经常构建并快速构建。因此，您能做的最好的事情就是缩短构建时间并在每次签入时进行构建。

# java - 使用java获取客户端机器的IP地址

> ID：12399473
> 
> 赞同：0
> 
> 时间：2012-09-13T04:34:07.473
> 
> 标签：java, web-applications, ip-address, struts-1

我应该捕获访问我的 Web 应用程序**的客户端计算机的 IP 地址。**谷歌搜索后，我发现了两种方法：

1.  `request.getRemoteAddr()`

2.  `request.getHeader("X-FORWARDED-FOR")`

但它们都不能保证返回客户端机器的实际 ip。另外，我应该使用**struts1.2**来实现相同的目的，因为该应用程序是在 struts1.2 中开发的。

有没有相同的struts类？

我正在使用以下代码：

```
String ipAddress = request.getHeader("X-FORWARDED-FOR");  
if (ipAddress == null) {  
    ipAddress = request.getRemoteAddr();  
} 
```

但是当我从移动或无线设备访问应用程序时，该方法会`request.getHeader("X-FORWARDED-FOR");`返回。`null`

结果，ip是从方法获得`request.getRemoteAddr();` 的问题是检索到的ip是私有的而**不是公共** 的，但我想要客户端的**公共ip**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:22:20.110

问题是没有办法保证它。客户端可能是 NAT-ted，因此无论如何您都无法找到客户端知道的地址，并且如果客户端通过代理连接（对于某些类别的设备很常见，或者当连接来自某些位置）那么就无法保证代理会告诉您客户端的地址是什么。那里有一些严重损坏的代理，即使工作正常，它们仍可能被配置为隐藏您正在寻找的信息。

最简单的技术可能是在客户端上运行一些 javascript 以发现信息并在后台请求中将其发送给您。但是你会发现客户的地址通常不是很有用。您肯定不能将其用于身份验证目的（NAT 和通过 DHCP 进行动态地址分配的广泛流行意味着您经常会获得具有相同“内部”地址的不同客户端）或连接回客户端（大多数客户端运行强大的防火墙或位于防火墙后面），我不知道您为什么要记录它。这是你能要求的最没用的东西。我建议您从这个问题中退后一步，重新考虑一下您*真正*想要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:06:41.873

`request.getRemoteAddr()`在大多数情况下将返回正确的地址（这是 Java EE 的一部分，而不是 struts）。它们不保证返回客户端机器的实际 IP，因为这是 TCP/IP 限制的问题，而不是结构或 Java 本身。

# java - 使用 DOM 解析器解析 xml 并添加限制

> ID：12399478
> 
> 赞同：0
> 
> 时间：2012-09-13T04:34:59.373
> 
> 标签：java, dom, xml-parsing

我正在尝试对我的 xml 使用 DOM 解析器。代码如下。它按标签类型及其属性（如价格和颜色）列出所有元素。然而，我很难找到如何对代码添加限制，例如“给我所有 10 美元以上的笔”或“黑色笔的名称”。有人可以帮我吗。

谢谢
我的 .xml 文件看起来像这样：

```
 <equipment>
  <type>
   <description>pen</description>
   <name>parker</name>
   <price value="USD">8.00</price>
   <color>black</color>
 </type>
  <type>
   <description>pen</description>
   <name>ball point</name>
   <price value="USD">20.00</price>
   <color>purple</color>
 </type>
 <type>
   <description>pen</description>
   <name>sharpie</name>
   <price value="USD">15.00</price>
   <color>blue</color>
 </type>
 <type>
   <description>pen</description>
   <name>staples</name>
   <price value="USD">6.00</price>
   <color>red</color>
 </type>
 <type>
   <description>pen</description>
   <name>integra</name>
   <price value="USD">12.00</price>
   <color>white</color>
 </type> 
```

这是我的解析器的代码

```
 public static void main(String[] args)throws SAXException, IOException,   ParserConfigurationException {

            File fXmlFile = new File("docs\\abc.xml");
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(fXmlFile);
            doc.getDocumentElement().normalize();

            NodeList nList = doc.getElementsByTagName("type");
            for(int i=0;i<nList.getLength();i++){
                Node nNode = nList.item(i);

                    if(nNode.getNodeType() == Node.ELEMENT_NODE){

                        Element eElement = (Element) nNode;
                        System.out.println("Name:" + getTagValue("name", eElement));
                        System.out.println("Price: "+ getTagValue("price", eElement));
                        System.out.println(getAttributeValue("price", "value", eElement));
                        System.out.println("Description: "+getTagValue("description", eElement));
                        System.out.println("color:"+ getTagValue("color", eElement));
                    }
            }

        }

         private static String getTagValue(String sTag, Element eElement) {
            NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();
            Node nValue = (Node) nlList.item(0);

            return nValue.getNodeValue();
         }

         private static String getAttributeValue(String sTag, String attributeName, Element eElement){
            NamedNodeMap nodeMap = eElement.getElementsByTagName(sTag).item(0).getAttributes();

            return nodeMap.getNamedItem(attributeName).getNodeValue();
         }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:55:49.200

如果您想[根据某些标准解析 XML](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)，您可以使用[Java XPath API](http://docs.oracle.com/javase/6/docs/api/javax/xml/xpath/XPath.html)而不是基于 DOM 的解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:04:03.907

如果您希望添加过滤器，您最好手动添加，使用 XMLStreamReader 可能会有所帮助。请按照以下步骤操作：

1.  使用 Transformer 将您的 XML 文件转换为字符串
2.  将 String 转换为字节数组并将其传递给 XMLStreamReader。
3.  从一个元素迭代到另一个元素

* * *

```
Transformer t=TransformerFactory.newInstance().newTransformer();
StringWriter sw=new StringWriter();         
StreamResult result=new StreamResult(sw);
DOMSource d=new DOMSource(XMLdoc);
t.transform(d, result);
tring xmlstring=sw.toString();

ByteArrayInputStream bain = new yteArrayInputStream(xmlstring.getBytes());
XMLInputFactory factory1 = XMLInputFactory.newInstance();
XMLStreamReader reader = factory1.createXMLStreamReader(bain);

while(reader.hasNext())
{
    reader.next();
    if(reader.getEventType==XMLStreamReader.START_ELEMENT)
    {
        if(reader.getLocalName().equals("price"))
        {
            //your logic
        }
    }
} 
```

希望能帮助到你..

# mysql - Mysql查询以查找具有相同列值的字段总和

> ID：12399479
> 
> 赞同：7
> 
> 时间：2012-09-13T04:35:04.077
> 
> 标签：mysql, sql

我有一张这样的桌子

```
id |  invent_id         |   order
 1 | 95948214           | 70
 2 | 46018572           | 30
 3 | 46018572           | 20
 4 | 46018572           | 50
 5 | 36025764           | 60
 6 | 36025764           | 70
 7 | 95948214           | 80
 8 | 95948214           | 90 
```

我想获得具有相同发明 id 的订单数量总和

就是想要这样的结果

```
 |  invent_id         |   order
   | 95948214           | 240
   | 46018572           | 100
   | 36025764           | 130 
```

我们如何编写mysql查询

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T04:36:09.307

利用 Aggregate 功能`SUM`并根据`invent_id`.

```
SELECT invent_id, SUM(`order`) `Order`
FROM tableName
GROUP BY invent_ID 
```

**[GROUP BY 子句](http://www.tizag.com/mysqlTutorial/mysqlgroupby.php)**

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/8dc41/4)

# php - 如何为每个请求添加自定义词到我的域 URL？

> ID：12399483
> 
> 赞同：1
> 
> 时间：2012-09-13T04:35:37.953
> 
> 标签：php, .htaccess, url-rewriting, drupal-6

考虑我的域名是

```
www.mydomain.com 
```

考虑一个页面请求

```
www.mydomain.com/user/register 
```

我想在 mydomain.com.example 中的每个请求的基本 URL 之后添加一个自定义词

```
www.mydomain.com/customword/
www.mydomain.com/customword/user/register 
```

我们可以在 htaccess 文件中使用 URL 重写来做到这一点吗？

实际上它应该在内部执行“www.mydomain.com/user/register”......但在外部，URL 应该看起来像 www.mydomain.com/customword/user/register。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T04:39:45.413

您可以创建目录“注册”，并在其中放置一个执行该操作的索引文件。

无论如何，这可能是最简单的方法，无需重写 url。

* * *

## 更新（因为问题已更新）

在 .htaccess 中：

```
RewriteEngine On
RewriteRule ^([A-Za-z0-9-.]+)/user/register/?$ user/register.php?customword=$1 
```

register.php 将收到一个 GET 请求：

```
//User went to www.mydomain/word/user/register
echo $_GET['customword']; // will return word in this case 
```

确保您启用了 mod_rewrite :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:40:21.963

是的，你可以用 htaccess 做到这一点

这是一个示例，如果它不包含尾部斜杠，它将添加带有 url 的尾部斜杠

[http://enarion.net/web/htaccess/trailing-slash/](http://enarion.net/web/htaccess/trailing-slash/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:44:05.330

**编辑**格式已更新
如果您从此站点为一个站点提供服务，则以下内容应该有效：

编辑您的`.htaccess`文件以进行 url 重写

访问`www.yourdomain.com/user/registry`实际上将服务器内容从`www.yourdomain.com/customword/user/registry`

```
RewriteEngine On<br>
RewriteCond %{REQUEST_URI} !^/customword/<br>
RewriteRule ^(.*)$ /customword/$1 
```

你还没有提到你正在使用什么样的网站……例如：PHP、MVC 等，因为你也可以在那里做类似的事情。

# python - Django没有接受新的变化

> ID：12399493
> 
> 赞同：1
> 
> 时间：2012-09-13T04:37:48.213
> 
> 标签：python, django

我正在从我的 GitHub 存储库运行一个旧分支 A，而 Django 没有获取任何静态文件。奇怪的是，如果我对模板进行任何文本更改，它也不会选择这些。我尝试过刷新页面、在隐身模式下打开 Chrome、重新启动服务器等——没有任何效果。

在另一个分支 B 中运行开发服务器并切换回此分支后，Django 表现得好像我仍在分支 B 上运行（没有出现 404 错误）：

```
$ ./manage.py runserver
0 errors found
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
[12/Sep/2012 23:25:48] "GET /interviews/ HTTP/1.1" 200 13295 
```

但是一旦我重新启动服务器，它就恢复到分支 A 的未更改版本（没有任何更改被拾取，也找不到静态文件）：

```
$ ./manage.py runserver
Validating models...

0 errors found
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
[12/Sep/2012 23:26:20] "GET /interviews/ HTTP/1.1" 200 13295
[12/Sep/2012 23:26:20] "GET /static/js/plugins.js HTTP/1.1" 404 2653
[12/Sep/2012 23:26:20] "GET /static/js/jquery-1.7.1.min.js HTTP/1.1" 404 2653
[12/Sep/2012 23:26:20] "GET /static/css/style.css?v=2 HTTP/1.1" 404 2653
[12/Sep/2012 23:26:20] "GET /static/js/script.js HTTP/1.1" 404 2653 
```

在两个分支之间，settings.py 和静态文件夹是相同的，所以我什至不确定从哪里开始进行故障排除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:58:49.717

```
DEBUG = True 
```

检查这个。如果`DEBUG = False`.

# mysql - 使用 phpmyadmin 将表结构导出到 Excel 文件

> ID：12399501
> 
> 赞同：9
> 
> 时间：2012-09-13T04:38:34.280
> 
> 标签：mysql, phpmyadmin

我将在 Phpmyadmin（仅限结构）中从我的表结构创建一个 excel 文件。我发现它有一个 CSV 输出，但它只给我数据。
Phpmyadmin 是否有任何功能可以做这样的事情？

编辑：这是我的 sql ：

```
SELECT * INTO OUTFILE 'c://wamp/my_table_structure.csv'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES  TERMINATED BY '\n'
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'dt_user' 
```

为什么它返回一个空文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T04:43:21.490

[`SELECT ... INTO OUTFILE`](http://dev.mysql.com/doc/en/select-into.html)您可以按照以下行运行查询：

```
SELECT * INTO OUTFILE '/path/to/my_table_structure.csv'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES  TERMINATED BY '\n'
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'my_table' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-02T16:58:14.157

我遇到了同样的问题，我通过 PHPMyadmin 和 chrome 插件的组合实现了。这可能不是直接的方法，但它确实有效。（假设您使用的是谷歌浏览器）

*   为 chrome 安装表捕获 - [https://chrome.google.com/webstore/detail/table-capture/iebpjdmgckacbodjpijphcplhebcmeop/related?hl=en](https://chrome.google.com/webstore/detail/table-capture/iebpjdmgckacbodjpijphcplhebcmeop/related?hl=en)

*   安装插件后，打开 PHPmyadmin > DB > table > 点击 Structure

*   右键单击打印视图 > 在新选项卡中打开（这很重要，因为 chrome 插件不适用于 iframe 中的表格）

![在此处输入图像描述](../Images/870739f754fafdb5087c8c9f7afbc7dc.png)

*   在新选项卡中打开打印视图后，单击地址栏中的插件图标，

![在此处输入图像描述](../Images/5af7070a51573a0177cf2dc0d02bf447.png)

*   单击插件图标，您将看到将表格复制到剪贴板或导出到 Google 文档的选项。

![在此处输入图像描述](../Images/e30669a5259b3e4f11f149b0180ea8c2.png)

*   我做了一个复制并将表格粘贴到excel中。您还可以导出到谷歌文档。

![在此处输入图像描述](../Images/a69c9d25f31715355747088d80d17a93.png)

注意：这只是一种解决方法，只是想分享一下。请在评论和 TD 上放轻松 :) 无论如何我都喜欢 eggyal 提出的方式！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-17T14:45:11.210

您不需要插件即可复制和粘贴到 Excel。

1.  在 phpmyadmin 中选择要从中导出架构的表
2.  点击页面底部的打印视图
3.  选择整个（或部分）表并单击 ctrl-c 进行复制
4.  打开一个新的 Excel 工作表并选择第一个单元格
5.  点击 ctrl-v 粘贴

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-14T19:53:33.660

如今，phpmyadmin 有一个名为 CSV for Microsoft Excel 的导出格式，它可以自动完成，您只需在表格视图上单击导出并选择格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-16T03:12:35.117

在 phpMyAdmin 中找到您的表，然后选择导出选项卡 [![在您的表中选择选项卡导出](../Images/941445338f3b65f4f1711e4c2ca75855.png)](https://i.stack.imgur.com/4ZOZX.jpg)

为 MS Ecel 选择 CSV 格式 [![为 MS Excel 选择 CSV 格式](../Images/2dea772741ae7158f8b498b2bd4e806f.png)](https://i.stack.imgur.com/UIRov.jpg)

只需打开一个新的 Excel 文件，然后单击数据选项卡，然后单击从文本/CSV 并找到您在 phpMyAdmin 中创建的文件。然后单击加载。Excel 将像您数据库中的表一样创建列，您可以根据需要修改分隔符。 [![选择选项卡数据，然后从文本/CSV，然后找到您的 csv 文件](../Images/4d813807ca37b8b9c7f21e5b16c3a158.png)](https://i.stack.imgur.com/zafEZ.jpg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-07T13:23:37.467

将[鸡蛋](https://stackoverflow.com/users/623041/eggyal) [答案](https://stackoverflow.com/a/12399530/16457439)扩展到整个数据库上的所有表

mysql代码：

```
SELECT * INTO OUTFILE '/path/to/my_table_structure.csv'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES  TERMINATED BY '\n'
FROM   information_schema.COLUMNS 
WHERE TABLE_SCHEMA = 'the_db_to_export' AND TABLE_NAME IN (SELECT DISTINCT TABLE_NAME FROM information_schema.COLUMNS WHERE  TABLE_SCHEMA = 'the_db_to_export')
ORDER BY TABLE_NAME ASC; 
```

注意：information_schema 可以是小写或大写取决于您的安装

# apache - 了解重定向和重写 .htaccess 之间的区别

> ID：12399505
> 
> 赞同：34
> 
> 时间：2012-09-13T04:39:19.273
> 
> 标签：apache, .htaccess, mod-rewrite

我想了解使用 .htaccess 重定向和重写 URL 之间的区别。所以这是一个例子：假设我有一个链接`www.abc.com/ index.php?page=product_types&cat=88` （称之为“原始”网址）

但是当用户输入`abc.com/shoes`（我们称之为“想要的”url）时，他们需要看到上面链接的内容。为了做到这一点，我会这样做：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteRule ^(.*)shoes(.*)$ index.php?page=product_types&cat=88 
```

这段代码没有错，它可以解决问题。但是，如果我在地址栏中输入原始 url，内容就会出现，但 url 不会改变。所以它仍然是`www.abc.com/index.php?page=product_types&cat=88`

但是，如果我希望输入的 url ( `/shoes`) 显示在地址栏中，该`www.abc.com/ index.php?page=product_types&cat=88`怎么办？这将如何使用 .htaccess 来完成？我是否遇到了潜在的循环？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-13T05:01:47.890

一些解释可以在这里找到：[https ://stackoverflow.com/a/11711948/851273](https://stackoverflow.com/a/11711948/851273)

要点是重写仅发生在服务器上，客户端（浏览器）对此视而不见。浏览器发送请求并获取内容，对于服务器上发生的事情以服务请求并不明智。

重定向是服务器对请求的**响应**，它告诉客户端（浏览器）提交新请求。浏览器请求一个 url，这个 url 是位置栏中的内容，服务器获取该请求并**以重定向响应**，浏览器获取响应并在服务器的响应中加载该 URL。位置栏中的 URL 现在是新 URL，浏览器发送对新 URL 的请求。

简单地在服务器内部重写对野外的 URL 绝对没有任何作用。如果 google 或 reddit 或任何网站有指向 的链接`www.abc.com/index.php?page=product_types&cat=88`，那么您的内部服务器重写规则对此绝对没有任何作用，对任何点击该链接的人或任何出于任何原因碰巧请求该 URL 的客户端都没有任何作用。重写规则所做的所有事情都是在内部更改服务器中包含`shoes`的内容`/index.php?page=product_types&cat=88`。

如果你想这样请求 index.php 页面包含所有的查询字符串，你可以告诉客户端（浏览器）**重定向**到更好看的 URL。您需要小心，因为重写规则循环并且您的重定向将在内部重写，这将导致重定向将在内部重写等。导致循环并抛出 500 服务器错误。因此，您可以专门匹配请求本身：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\?page=product_types&cat=88
RewriteRule ^/?index.php$ /shoes [L,R=301] 
```

这应该只用于使野外链接指向正确的位置。**您必须确保您的内容生成正确的链接**。这意味着您网站上的所有内容都使用`/shoes`链接而不是`/index.php?page=product_types&cat=88`链接。

# r - 如何在 R 中创建分类散点图，如箱线图？

> ID：12399506
> 
> 赞同：5
> 
> 时间：2012-09-13T04:39:32.150
> 
> 标签：r, graph, plot, scatter-plot, boxplot

有谁知道如何创建散点图以在 PRISM 的图形板中`R`创建像[这样的图：](http://graphpad.com/support/faq/graph-tip-how-can-i-make-a-barcolumn-graph-that-also-shows-the-individual-data-points/)

![在此处输入图像描述](../Images/b132ac3231a205ab5bc452f5e66b8c3a.png)

我尝试使用箱线图，但它们没有按照我想要的方式显示数据。graphpad 可以生成的这些列散点图对我来说更好地显示了数据。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:00:43.757

正如@smillig 提到的，您可以使用 ggplot2 来实现这一点。下面的代码很好地再现了您所追求的情节 - 警告它非常棘手。首先加载 ggplot2 包并生成一些数据：

```
library(ggplot2)
dd = data.frame(values=runif(21), type = c("Control", "Treated", "Treated + A")) 
```

接下来更改默认主题：

```
theme_set(theme_bw()) 
```

现在我们建立情节。

1.  构造一个基础对象 - 不绘制任何内容：

    ```
    g = ggplot(dd, aes(type, values)) 
    ```

2.  补充几点：根据类型调整默认抖动并更改字形：

    ```
    g = g + geom_jitter(aes(pch=type), position=position_jitter(width=0.1)) 
    ```

3.  添加“盒子”：计算盒子的结束位置。在这种情况下，我选择了平均值。如果您不想要该框，请**省略**此步骤。

    ```
    g = g + stat_summary(fun.y = function(i) mean(i), 
            geom="bar", fill="white", colour="black") 
    ```

4.  添加一些误差线：计算上限/下限并调整条形宽度：

    ```
    g  = g + stat_summary(
            fun.ymax=function(i) mean(i) + qt(0.975, length(i))*sd(i)/length(i), 
            fun.ymin=function(i) mean(i) - qt(0.975, length(i)) *sd(i)/length(i),
            geom="errorbar", width=0.2) 
    ```

5.  显示绘图

    ```
    g 
    ```

![在此处输入图像描述](../Images/d9834616a890aa99f33629fb92a4fca3.png)

1.  在我上面的 R 代码中，我曾经`stat_summary`即时计算所需的值。您还可以创建单独的数据框并使用`geom_errorbar`and `geom_bar`。
2.  要使用 base R，请查看我对这个[问题](https://stackoverflow.com/questions/7418386/dot-plot-in-r-using-r-plotting/)的回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T07:36:11.750

如果您不介意使用该软件包，有一种简单的方法可以使用和`ggplot2`制作类似的图形。使用示例数据：`geom_boxplot``geom_jitter``mtcars`

```
library(ggplot2)
p <- ggplot(mtcars, aes(factor(cyl), mpg)) 
p + geom_boxplot() + geom_jitter() + theme_bw() 
```

生成以下图形：

![在此处输入图像描述](../Images/5e8a6755ffb1721fec8d6e038f674c0d.png)

可以在此处查看文档：http: [//had.co.nz/ggplot2/geom_boxplot.html](http://had.co.nz/ggplot2/geom_boxplot.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-04-11T12:11:49.067

我最近遇到了同样的问题，并找到了自己的解决方案，使用`ggplot2`. 例如，我创建了数据集的一个子`chickwts`集。

```
library(ggplot2)
library(dplyr)
data(chickwts)
Dataset <- chickwts %>%
            filter(feed == "sunflower" | feed == "soybean") 
```

由于`geom_dotplot()`无法将点更改为符号，我使用`geom_jitter()`如下：

```
Dataset %>%
    ggplot(aes(feed, weight, fill = feed)) +
    geom_jitter(aes(shape = feed, col = feed), size = 2.5, width = 0.1)+
    stat_summary(fun = mean, geom = "crossbar", width = 0.7,
             col = c("#9E0142","#3288BD")) +
    scale_fill_manual(values = c("#9E0142","#3288BD")) +
    scale_colour_manual(values = c("#9E0142","#3288BD")) +
    theme_bw() 
```

这是最后的情节：

![在此处输入图像描述](../Images/78b75e3a2ff4e454e4196f0687a3b8a9.png)

有关更多详细信息，您可以查看此帖子：

[http://withheadintheclouds1.blogspot.com/2021/04/building-dot-plot-in-r-similar-to-those.html?m=1](http://withheadintheclouds1.blogspot.com/2021/04/building-dot-plot-in-r-similar-to-those.html?m=1)

# c++ - CRichEditCtrl::StreamIn 丢失格式

> ID：12399510
> 
> 赞同：1
> 
> 时间：2012-09-13T04:40:17.850
> 
> 标签：c++, mfc, rtf, cricheditctrl

我正在创建一个`CRichEditCtrl`控件并尝试将一些 RTF 加载到其中。文本似乎加载得很好，但它丢失了所有格式，基本上变成了纯文本。

我认为一些示例代码应该足以说明问题：

```
class MyWindow : public CWnd {

  void Setup();
  static DWORD CALLBACK StreamInCallback_(
                        DWORD_PTR dwCookie, LPBYTE pbBuff,
                        LONG cb, LONG *pcb);
  ...
  CRichEditCtrl content_;
};

void MyWindow::Setup() {
  RECT text_rect;
  GetClientRect(&text_rect);
  text_rect.left += 8;
  text_rect.right -= 16;
  text_rect.top += 8;
  text_rect.bottom -= 36;

  content_.Create(WS_CHILD | WS_VISIBLE | ES_MULTILINE,
                  text_rect, this, 1001);
  content_.SetTextMode(TM_RICHTEXT);

  CString text = L"{\\rtf1\\par Simple \\b example \\b0}";
  EDITSTREAM es;
  es.dwCookie = reinterpret_cast<DWORD_PTR>(&text);
  es.pfnCallback = StreamInCallback_;
  int n = content_.StreamIn(SF_RTF, es);
}

DWORD CALLBACK MyWindow::StreamInCallback_(DWORD_PTR dwCookie, LPBYTE pbBuff,
                                           LONG cb, LONG *pcb) {
  CString *pText = reinterpret_cast<CString *>(dwCookie);

  if (cb > pText->GetLength()) {
    cb = pText->GetLength();
  }

  // TODO: this will only work for US-ASCII
  for (int i = 0; i < cb; i++) {
    *(pbBuff + i) = (BYTE) pText->GetAt(i);
  }

  *pcb = cb;
  *pText = pText->Mid(cb);

  return 0;
} 
```

您可以在下面的屏幕截图中看到一个示例：

![在此处输入图像描述](../Images/054c75ee7f21cfcc62235ce220bb4b0d.png)

正如你所看到的，它的文本 OK，但单词“example”应该是粗体的。我尝试了很多不同的 RTF，甚至使用写字板保存的内容并直接使用它，但它仍然只将文本显示为纯文本并且所有格式都丢失了。任何函数调用也不会返回任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:09:28.287

当然对我来说是正确的。不过，我`SetTextMode(TM_RICHTEXT)`在处理 RTF 内容时从未使用过。尝试删除该呼叫。

此外，错误`StreamInCallback`可能会产生奇怪的文本问题。我建议您从一开始就以正确的方式进行：

```
DWORD CALLBACK CBStreamIn(DWORD dwCookie, LPBYTE pbBuff, LONG cb, LONG *pcb)
{
    CString *pstr = (CString*)dwCookie;

    if (pstr->GetLength() < cb)
    {
        *pcb = pstr->GetLength();
        memcpy(pbBuff, (LPCSTR) *pstr, *pcb);
        pstr->Empty();
    }
    else
    {
        *pcb = cb;
        memcpy(pbBuff, (LPCSTR) *pstr, *pcb);
        *pstr = pstr->Right(pstr->GetLength() - cb);
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:22:16.740

尝试在 RTF 中设置标题是否有效。检查以下链接

[http://www.biblioscape.com/rtf15_spec.htm](http://www.biblioscape.com/rtf15_spec.htm)

检查这是否适用于您的richeditctrl。

```
{\\rtf1\\ansi\\deff0{\\fonttbl{\\f0\\fnil\\fcharset0 Calibri;}}\\par Simple \\b example \\b0} 
```

# google-app-engine - 如何从一个数据存储中引用多个 Blob

> ID：12399513
> 
> 赞同：0
> 
> 时间：2012-09-13T04:40:38.463
> 
> 标签：google-app-engine, google-cloud-datastore, blobstore

> **可能重复：**
> [如何为一个对象建模许多 blob？](https://stackoverflow.com/questions/7204365/how-to-model-many-blobs-for-an-object)

我有一个名为 Location 的数据存储模型，我希望用户能够上传与该位置相关的大量图像。我知道我可以使用 BlobReferenceProperty 从 Blobstore 引用这些图像，但是如何在不创建更多属性的情况下引用这些属性呢？

我可以创建它们的列表或创建 BlobReferenceProperties 的列表属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:59:58.260

与任何基本数据存储支持的类型一样，您可以使用`ListProperty`.`BlobKey`

```
blobRefs = db.ListProperty(blobstore.BlobKey) 
```

请注意：

1.  列表属性保持顺序。这在某些情况下非常有用。
2.  整个列表被序列化并存储在实体中。没有办法只得到它的一部分。
3.  如果属性被索引，那么每个实体都将在索引中获得它自己的条目（或者如果您为升序和降序索引，则为两个）。每个实体最多可以有 5000 个索引条目。
4.  如果您创建一个具有两个列表属性的复合索引，这将导致[索引爆炸](https://developers.google.com/appengine/articles/indexselection#Exploding_Search)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:40:33.290

如果您每个位置可能有超过 5000 张照片，那么这是另一种选择。

1.  在数据存储区中创建一个 Location 实体和一个 Photo 实体。照片实体应具有对位置实体的引用属性。
2.  为 blobstore 中的每张照片创建一个数据存储 Photo 对象。
3.  对于每个 Photo 实体，将 Location 引用属性设置为适当的 Location 对象。

# html - 右对齐子 div 而不用动态宽度扩展父级

> ID：12399517
> 
> 赞同：2
> 
> 时间：2012-09-13T04:40:50.217
> 
> 标签：html, css

我一直很难找到这个。

我有一个以 body 为中心的 div `margin: 0 auto;`。它包含多个 div。我希望它扩展到它最宽的孩子的宽度`width: auto;`

问题是我想让其中一个子 div 在右侧对齐，但这会将我的父级扩展到 100%。如果没有父级的固定宽度，我将如何完成此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T05:05:46.410

您可以通过将包装器 div 设置为`inline-block`，并`text-align: center`在其父级上设置（而不是使用`margin: 0 auto;`）来做您想做的事情。这是一个例子：http: [//jsfiddle.net/joshnh/6Ake5/](http://jsfiddle.net/joshnh/6Ake5/)

这是HTML：

```
<div class="wrapper">
    <div class="foo"></div>
    <div></div>
    <div></div>
</div> 
```

和CSS：

```
body {
    text-align: center;
}
div {
    border: 1px solid red; /* To see what is going on */
}
.wrapper {
    display: inline-block;
    text-align: left; /* Resetting the text alignment */
    vertical-align: top; /* Making sure inline-block element align to the top */
    /* Inline-block fix for IE7 and below */
    zoom: 1;
    *display: inline;
}
.wrapper div {
    float: left;
    height: 200px; /* To see what is going on */
    margin: 10px; /* To see what is going on */
    width: 200px; /* To see what is going on */
}
.foo {
    border-color: blue; /* To see what is going on */
    float: right;
}​ 
```

# security - Stellaris 32 位微控制器上的 lwIP - 安全登录

> ID：12399519
> 
> 赞同：0
> 
> 时间：2012-09-13T04:41:31.010
> 
> 标签：security, login, microcontroller, lwip

我希望使用我的 Stellaris LM3S8962 微控制器作为互联网和一堆传感器之间的桥梁。我将使用 Zigbee 节点进行从传感器到微控制器的通信。我已经能够使用 lwIP TCP/IP 堆栈（用于 LM3S8962）来访问存储在控制器闪存中的 HTML 页面。

现在，我想为此添加一个安全登录系统。我基本上想要的是 - 当我在浏览器中输入控制器的 IP 时，它应该提示我输入用户名和密码。我想使用 lwIP TCP/IP 堆栈使这个系统尽可能安全。

仅供参考，堆栈不支持 PHP 或任何其他脚本。支持 CGI 功能（在 C 中），但我不知道如何实现安全部分。请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T19:28:20.290

基本上有两种方法可以在您的平台上通过 HTTP 实现用户身份验证：

*   “经典”基本 HTTP 身份验证（请参阅 RFC2616 了解确切规范），
*   登录表单，创建会话 ID，并将其返回给浏览器，以存储在 cookie 或 URL 中。

基本 HTTP 身份验证的工作原理是您在网页服务例程中插入一个检查，以查看是否存在 Authorization HTTP 标头。如果有，您应该对其进行解码（参见 RFC），并检查指定的用户名/密码。如果凭据正常，则继续提供网页。如果凭据不正确，或者没有 Authorization 标头，则应返回 401 错误代码。然后浏览器将提示用户输入凭据。这个解决方案相当简单，您会看到浏览器登录对话框，而不是漂亮的 HTML 页面。此外，微控制器必须检查每个页面请求的凭据。

通过登录表单进行身份验证由您的服务器维护正确身份验证的用户会话列表（可能在内存中），并根据该列表检查请求。登录后，应为该会话生成一个唯一的随机 ID，并将会话数据输入到您的列表中。新的会话 ID 应该返回给浏览器以包含在即将到来的 HTTP 请求中。您可以选择将会话 ID 放入浏览器 cookie，也可以将其作为 URL 参数 (?id=xxxxx) 嵌入到 URL 中。通过向具有新 URL 的浏览器发送 302 重定向响应来嵌入 URL 参数。如果您需要 cookie 解决方案，您可以使用 Set-Cookie HTTP 响应标头发送对登录请求的响应。在登录表单解决方案中，实际凭据（用户名/密码）仅在登录时检查一次。之后，仅根据活动会话列表检查会话 ID。会话 ID 必须从每个网页服务的请求中提取（从 URL 或从 Cookie HTTP 标头）。此外，您必须实现某种会话超时，既作为一种安全措施，又要限制活动会话列表的大小。

现在是更难的部分：在这两种解决方案中，用户名/密码在一些请求中传播（在基本 HTTP 身份验证的每个请求中，以及登录表单解决方案的登录页面 POST 中），并且可以从网络流量中提取。此外，两种解决方案的每个请求中都存在劫持会话所需的信息。如果这是一个问题（系统在可自由访问的 LAN 网段上工作，或通过您无法控制的网络链接），您可能需要 SSL 来隐藏这些敏感数据。如何为您的平台获得合理的 SSL 实现，这是另一个问题。

# entity-framework-4.1 - 实体框架中数据库上下文中两个字符串字段的连接

> ID：12399521
> 
> 赞同：0
> 
> 时间：2012-09-13T04:42:11.333
> 
> 标签：entity-framework-4.1

我想在 dbcontext(Entity framework 4.1) Please Help 中执行以下查询。

从 tblemployee 中选择 empcode+'-'+Empname 作为 empName

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:12:02.883

```
from employee in context.Employees
select new { empName = employee.empcode + employee.Empname } 
```

# c++ - C++：使用 isdigit 检查字符串字符是否为数字。.

> ID：12399522
> 
> 赞同：0
> 
> 时间：2012-09-13T04:42:16.043
> 
> 标签：c++, string

我正在使用 getline 在循环中读取我的程序的输入。

```
 string temp(STR_SIZE, ' ');
    string str_num(STR_SIZE, ' ');
    ...
    getline(cin, temp, '\n'); 
```

之后，我使用一个函数来查找下一个分隔符（空白）并将空白之前的所有字符分配给 str_num。看起来像这样：

```
 str_num.assign(temp, 0, next_white_space(0)); 
```

我已经验证这很好用。我的解决方案的下一步是将 str_num 转换为 int（这部分也很好用），但我应该检查以确保 str_num 中的每个字符都是数字。这是我尝试过的最好的：

```
 if(!isdigit(str_num[0] - '0')) {
        cout << "Error: Not an appropriate value\n";
        break; /* Leave control structure */
    } 
```

出于某种原因，这总是打印错误消息并退出结构。这是为什么？我以前使用过 operator[] 来处理字符串对象，它似乎工作得很好。但是，在这里，它完全把我搞砸了。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T04:44:42.757

[`std::isdigit`](http://en.cppreference.com/w/cpp/string/byte/isdigit)接受一个 char 的整数值并检查它。

因此，删除 - '0' 并将 str_num[index] 传递给 isdigit()。

注意：因为这个函数来自 C，所以将 chars 视为整数的旧风格体现在采用 int 的方法中。但是，chars 可以提升为 int 值，因此 char 变成 int 就好了，这很有效。

# lisp - 一个基本的 Lisp 程序错误

> ID：12399523
> 
> 赞同：3
> 
> 时间：2012-09-13T04:42:29.370
> 
> 标签：lisp, scheme, racket

```
(define (sum-two-sqrt a b c)

    (cond ((and (<= c a) (<= c b)) sqrt-sum(a b))
           ((and (<= a b) (<= a c)) sqrt-sum(b c))
           ((and (<= b a) (<= b c)) sqrt-sum(a c))
    )
)
(define (sqrt-sum x y)
           (+ (* x x) (*y y))
)
(define (<= x y)
      (not (> x y))

(sum-two-sqrt 3 4 5) 
```

这是我的代码

请帮我解决问题。:)

我今天才开始学习 Lisp。

之前学过一些C，但是这两种语言完全不同！

这就是问题定义一个以三个数字作为参数并返回两个较大数字的平方和的过程。

如果你有更好的算法

发表它！

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:00:27.080

无需定义`<=`，这是一个原始操作。修正几个错别字后：

*   `sqrt-sum`：您错误地调用了该程序；左括号必须写*在*过程名称之前，而不是*之后*。
*   `sqrt-sum`:`(*y y)`不正确，你肯定是说`(* y y)`; 运算符后的空格。

这应该有效：

```
(define (sqrt-sum x y)
  (+ (* x x) (* y y)))

(define (sum-two-sqrt a b c)
  (cond ((and (<= c a) (<= c b)) (sqrt-sum a b))
        ((and (<= a b) (<= a c)) (sqrt-sum b c))
        ((and (<= b a) (<= b c)) (sqrt-sum a c)))) 
```

或另一种选择：

```
(define (sum-two-sqrt a b c)
  (let ((m (min a b c)))
    (cond ((= a m) (sqrt-sum b c))
          ((= b m) (sqrt-sum a c))
          (else (sqrt-sum a b))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:20:50.550

遵循@J.Spiral 的建议并得到@River 的支持，以下 Racket 代码对我来说很好读：

```
#lang racket

(define (squares-of-larger l)
  (define two-larger (remove (apply min l) l))
  (for/sum ([i two-larger]) (* i i)))

(squares-of-larger '(3 1 4)) ;; should be 25 
```

请注意，这个解决方案是完全可用的，因为“删除”只是返回一个新列表。

另请注意，这甚至与 HtDP 不在同一个社区；我只是想简洁地表达这一点，并炫耀for/sum。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:41:19.997

我这里没有 Scheme 解释器，但下面似乎比其他建议短:) 所以它在 CL 中，但在 Scheme 中应该看起来非常相似。

```
(defun sum-two-sqrt (a b c)
  (let ((a (max a b))
        (b (max (min a b) c)))
    (+ (* a a) (* b b)))) 
```

在 Scheme 中，这将转化为：

```
(define (sum-two-sqrt a b c)
  (let ((a (max a b))
        (b (max (min a b) c)))
    (+ (* a a) (* b b)))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T05:04:06.940

该算法似乎有效，只需转动

```
*y 
```

至

```
* y 
```

空格在这里很重要，否则您是在告诉解释器您要使用该功能`*y`

在之后添加一个右括号

```
(define (<= x y) (not (> x y))

sqrt-sum(a b) 
```

转向

```
(sqrt-sum a b) 
```

其他 sqrt-sum 调用也是如此

**编辑：**也是一种可能性：

```
(define (square a) (* a a))
(define (square-sum a b c)
    (- (+ (square a) 
          (square b)
          (square c))
       (square (min a b c)))) 
```

# java - 如何从配置文件为 Java 应用程序设置类路径

> ID：12399528
> 
> 赞同：0
> 
> 时间：2012-09-13T04:43:17.620
> 
> 标签：java, classpath

嗨，我正在用*Java*开发一个应用程序。我必须在不同的操作系统中运行该 jar，例如*winxp*、*linux*、*rhel*、*Ubuntu*。

我有一些必须在类路径中的 jar 文件。

客户端还没有准备好设置路径，所以我必须以编程方式设置它。

我的问题在于不同的操作系统，因为用户会有不同的路径。如何通过配置文件获取路径？

如何管理操作系统和这些依赖项？

知道我是否可以在运行时设置路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:36:27.073

您应该将程序依赖的所有 jar 打包到可执行 jar 中。在您的项目中创建 lib 目录并将所有依赖项推送到其中。这将为您节省很多痛苦。

如果您使用 Maven2 ，您可以在 pom.xml 中执行类似[的](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)操作。如果您从 IDE（Eclipse 或 IntelliJ 等）构建，您可以使用向导： R.click your project root -> Export -> Runnable JAR etc 。

# objective-c - 编写我自己的块方法

> ID：12399534
> 
> 赞同：6
> 
> 时间：2012-09-13T04:44:14.127
> 
> 标签：objective-c, singleton, objective-c-blocks

我正在尝试通过其他以及 Apple 的示例。我迷路了。

我有一个单例类，用于处理我的用户登录（挑战网络服务器等）。

我想创建一个可以调用的块，传入用户名/密码。该块将执行 Web 服务调用，然后返回是否成功。

到目前为止，这是我设法开始的工作：

我的单例类如下所示：

**。H**

```
typedef void (^AMLoginBlock)(NSString *userName, NSString *password);

@interface AuthManager : NSObject
+ (id)sharedManager;

+ (bool)loginUserWithBlock:(AMLoginBlock)block;

@end 
```

**.m**

```
@implementation AuthManager

+ (id)sharedManager
{
    static dispatch_once_t pred = 0;
    __strong static id _sharedObject = nil;
    dispatch_once(&pred, ^{
        _sharedObject = [[self alloc] init]; // or some other init method
    });
    return _sharedObject;
}

+ (bool)loginUserWithBlock:(AMLoginBlock)block {
    NSLog(@"im printing from AM");
    return true;
}

@end 
```

然后我像这样调用该方法：

```
bool rtn = [AuthManager loginUserWithBlock:^(NSString *userName, NSString *password) {
        NSLog(@"im here in the block LVC.");
    }]; 
```

* * *

**我的问题是三个部分：**

1.  如何为类似于`UIView animation...`块的块编写完成处理程序。

2.  从基于块的实现中执行这些 Web 服务调用是个好主意吗？

3.  我应该像这样声明块方法：

    `- (bool)loginUserWithBlock:(AMLoginBlock)block;`

而不是使用，`+(bool)loginUser..`因为它在单例类中。不确定这是否会导致创建单例的多个实例。

我的目标是能够像你一样调用这个块`[UIView animation..]`。所以我可以简单地做：

```
[AuthManager loginUserWithUsername:foo
                          password:bar1
                        completion:^(BOOL finished) {
                            if (finished)
                                //push new view controller.
                            else
                                //spit out error
                   }]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T16:07:37.180

# 完成处理程序

您需要将完成块复制到 iVar 类：

```
@property (nonatomic, copy) void (^completionHandler)(bool *); 
```

因为您正在保存块，所以您需要有一个非类方法来获取块（请参阅以下内容以了解如何在不违反单例的情况下执行此操作）。您的方法的一个示例可能是：

```
- (void)loginUserWithUsername:(NSString *)username 
                     password:(NSString *)password 
                   completion:(void(^)(bool *finished))completionBlock
{
    // Copy the blocks to use later
    self.completionHandler = completionBlock;

    // Run code
    [self doOtherThings];
} 
```

然后，当您的登录代码完成工作时，您可以调用该块 - 这里我将 self.error, a 传递`bool`给该块：

```
- (void)finishThingsUp
{
    // We are done with all that hard work. Lets call the block!
    self.completionHandler(self.error);

    // Clean up the blocks
    self.completionHandler = nil;
} 
```

# 好主意

嗯，这是一个哲学问题，但我会这样说：Objective-C 中的块允许您编写执行单个任务的代码并轻松地将其集成到许多程序中。如果您选择不在您的登录代码中使用完成处理程序，您将需要您的登录代码：

*   要求使用它的类实现协议（如在 a 中`LoginDelegate`）
*   使用其他一些系统来通知您的代码，例如键值观察或通知
*   硬编码它只适用于一种类型的调用类

上述任何一种方法都可以，我觉得基于块的回调系统是最简单和最灵活的。它允许您只使用您的类而不用担心额外的基础设施（设置通知、符合协议等），同时仍然允许您在其他类或程序中重用它。

# 辛格尔顿

Objective-C 中以 a 开头的`+`方法是类方法。您不能使用类方法来操作 iVar，因为谁将拥有这些数据？

您可以做的是拥有一个始终返回该类的相同实例的类方法，允许您拥有一个可以拥有数据的对象，但避免拥有多个数据。

[这个优秀的 Stack Overflow 答案有示例代码](https://stackoverflow.com/questions/5043201/objective-c-store-variables-accessible-in-all-views)。

祝你好运！

# oracle - 如何解决oracle中数字字段中的通配符搜索

> ID：12399538
> 
> 赞同：1
> 
> 时间：2012-09-13T04:44:57.920
> 
> 标签：oracle, wildcard

我有这样的查询

```
SELECT * 
FROM Table_Name
WHERE Category !='0' 
AND To_Char(Category) like to_char(:paramCategory) 
```

我想用这个类别值实现通配符搜索。当我将值设为 9 时，没问题，我得到了预期的结果。但是当我使用 %9 或 9% 或 %9% 作为类别的值时，这些都没有给出预期的结果。例如，它给出了类别以 9.. 开头的所有结果，但将结果省略为 99,59,209 等。出了什么问题，我该如何解决？

该表有许多其他列，但此类别是数字类型。请不要建议更改该字段的 data_type。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:20:48.520

使用`%9%`应该给你所有。看看[SQL Fiddle](http://sqlfiddle.com/#!4/46c1f/1)

```
create table mytest (category number);
insert into mytest values (9959209);
insert into mytest values (9000);
insert into mytest values (1009);

select * from mytest where category like '%9%' 
```

结果都是行。

# javascript - 如何提供一种简写方式来编写对 javascript 中对象的重复访问以设置元素样式？

> ID：12399541
> 
> 赞同：1
> 
> 时间：2012-09-13T04:45:31.377
> 
> 标签：javascript

如何编写javascript以单行样式设置元素？例如，

```
document.getElementById('add_new').style.top=-15;
document.getElementById('add_new').style.position='absolute'; 
```

是否可以使用 javascript 本身使其成为数组或单行来设置元素的样式？

如何为编写对对象的重复访问提供简写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T04:51:17.263

我不推荐它，但你可以做这样的事情来把它放在“1”行：

```
with( document.getElementById('add_new').style ) { top=-15; position='absolute'; } 
```

或其他方式：

```
element.style.cssText="background: black ; color: blue ; border: 1px solid green" 
```

感谢[JavaScript 的“with”语句有合法用途吗？](https://stackoverflow.com/questions/61552/are-there-legitimate-uses-for-javascripts-with-statement#comment3692227_1028684)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T04:49:16.497

你不能用 vanilla JavaScript 做到这一点。

如果你使用 jQuery，你可以使用一个对象：

```
$('#add_new').css({top: '-15px', position: 'absolute'}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T04:51:20.113

本机 js 没有这样的东西，但如果你使用 jQuery，你可以使用以下代码

```
$('add_new').css({backgroundColor: '#ffe', borderLeft: '5px solid #ccc'}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T04:50:43.860

这是最简单的方法：

**Javascript**

```
document.getElementById("add_new").classList.add('addstyle'); 
```

**CSS**

```
<style>
.addstyle
{
    top: -15;
    position: absolute;
}
</style> 
```

***或与 JQuery 为：***

```
$('.add_new').css({top: '-15px', position: 'absolute'}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T04:52:11.440

If you are willing to use jquery you can do it, but that's not completely within scope of the question. You will also have to notate it in the "jQuery" way. Here's a link for reference.

[http://api.jquery.com/css/](http://api.jquery.com/css/)

It might look like:

```
$("#add_new").css({
    "top": "-15px",
    "position": "absolute"
}); 
```

Again, this is not in pure JavaScript as your question indicates. You will need an additional library to make it work.

# netty - LengthFieldBasedFrameDecoder ChannelHandler 已删除，但仍会在下一个事件中调用

> ID：12399553
> 
> 赞同：2
> 
> 时间：2012-09-13T04:47:15.890
> 
> 标签：netty

我正在尝试处理以下消息：

```
CMD (string) FLAG (byte) CMD_OPT (string) 
```

字符串由包含长度的单个前导字节表示，后跟最多 255 个字节。所以举一个具体的例子：

```
 EQ_REGISTER 0 flaux 
```

有 19 个字节。在我的管道中，我从 LengthFieldBasedFrameDecoder 开始，然后在确认第一个字符串的值后，我尝试删除第一个解码器。问题是，解码器在 FLAG 字节上再次被调用，我的逻辑是关闭的。

这是我的管道：

```
 ChannelPipeline pipeline = Channels.pipeline();

    pipeline.addLast("commandDecoder", new CerbStringDecoder());
    pipeline.addLast("commandHandler", new EventQueueCmdServerHandler()); 
```

CerbStringDecoder 是这样的：

```
 class CerbStringDecoder extends LengthFieldBasedFrameDecoder {
    public CerbStringDecoder() {
        super(255, 0, 1, 0, 1);
    }

    protected Object decode(
            ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer) throws Exception {
        ChannelBuffer buf = (ChannelBuffer) super.decode(ctx, channel, buffer);

        if (buf == null)
            return null;

        return buf.toString(Charset.forName("UTF-8"));
    }
}

 public class EventQueueCmdServerHandler extends SimpleChannelHandler {

    @Override
    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {

        String command = (String) e.getMessage();

        if (EQ_REGISTER.equals(command)) {
            System.out.println("COMMAND: [" + command + "]");
            ctx.getPipeline().addLast("handler", new EventQueueRegisterHandler());
            ctx.getPipeline().remove("commandDecoder");

       .... 
```

EventQueueRegisterHandler 期望获取 FLAG 和 CMD_OPT 等。

关于我做错了什么的任何建议，或者这是否是 Netty 中的错误/限制？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:05:56.327

您需要使用“replace(..)”方法来确保在删除它时所有缓冲的字节都被清除。请参阅 javadocs [1]。

[1] [http://static.netty.io/3.5/api/org/jboss/netty/handler/codec/frame/FrameDecoder.html#replace(java.lang.String,%20org.jboss.netty.channel.通道处理程序](http://static.netty.io/3.5/api/org/jboss/netty/handler/codec/frame/FrameDecoder.html#replace(java.lang.String,%20org.jboss.netty.channel.ChannelHandler)）

# c - 嵌入式 linux 启动和完整性监视器

> ID：12399556
> 
> 赞同：2
> 
> 时间：2012-09-13T04:47:59.820
> 
> 标签：c, linux, embedded, init

也许这不是一个编程问题，即。有一个非编程的解决方案。我正在开发使用嵌入式 linux 的第一代产品。我正在努力寻找系统启动、关闭和完整性监控的最佳解决方案。目前有一个自制的解决方案，它是一段复杂的 c 代码，它启动其他进程，然后监控它们的健康状况以及其他几个不相关的功能。有没有人对一个简单、健壮的方式来处理嵌入式设备的启动、关闭和完整性监控有什么建议？发行版并不重要，它使用的是busybox，我可以添加我们需要的任何其他内容。我正在寻找提示/智慧之言 - 或 rtfm 和一些指针，或将我指向其他地方。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T00:34:13.250

如果您正在寻找过程监视器来替换您的内部版本，我使用[PCD - 过程控制守护程序](http://www.rt-embedded.com/blog/pcd-process-control-daemon/)取得了巨大成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:07:37.703

> 我正在努力寻找系统启动的最佳解决方案，

你没有提供任何标准来决定什么是“最好的”。

> ... 一种简单、稳健的方式来处理嵌入式设备的启动、关闭和完整性监控？

如果“简单”和“最佳”是您的标准，那么您正在寻找的内容已经是 Linux 操作系统不可或缺的一部分。它使用运行级别的概念。在启动时，会建立一个运行级别，并且可以启动一组进程。对另一个运行级别的任何更改都会停止一组进程并启动一组进程。在另一个运行级别关闭时，所有进程都将终止。

我不知道您所说的“完整性监控”是什么意思。如果一个系统进程终止，那么它可以被“重生”，如果它是这样指定的。*proc*伪文件系统可用于监视活动进程。您可能会设计和实施自己的完整性监控概念。

BusyBox 简化了标准（又名 SysV）*初始化*进程，大概是基于嵌入式进程在启动后运行一次或始终运行的假设。cron或自定义守护程序*必须*提供事件的进程启动。但你认为：

> 它没有运行级别的概念。
> 所以我们不能使用与全功能操作系统相同的启动机制。

不完全的。BusyBox 声明：

> BusyBox init 不支持多个运行级别。BusyBox init 完全忽略了 /etc/inittab 文件的运行级别字段。

注意“多”这个词。BusyBox 的*init*将对等价于启动、关闭和重新启动的运行级别执行进程控制。有趣的是，BusyBox 甚至还有一个`runlevel`命令！如果您想要比 BusyBox 提供的*更多*“运行级别”，那么

> 如果您想要运行级别，请使用 sysvinit。

SysV *init*源代码可从[此处](http://packages.qa.debian.org/s/sysvinit.html)获得。BusyBox 是完全可配置的，它的*init*版本可以轻松替换。

Axis Communications 在 GPL 下为他们的 Etrax SoC 发布了一个迷你版的 SysV *init 。*轴`/etc/inittab`是：`

```
# The runlevels used by axis are:
#   0 - Halt
#   1 - Single user mode
#   2 - Multiuser without network
#   3 - Full multiuser mode
#   4 - Upgrade
#   5 - unused
#   6 - Reboot

id:3:initdefault:

sh:1235:respawn:/bin/cttyhack /bin/sh

tnet:35:once:/usr/sbin/telnetd

# System initialization.
si::sysinit:/etc/init.d/rc sysinit

# The initscripts.
l0:0:wait:/etc/init.d/rc 0
l1:1:wait:/etc/init.d/rc 1
l2:2:wait:/etc/init.d/rc 2
l3:3:wait:/etc/init.d/rc 3
l4:4:wait:/etc/init.d/rc 4
l5:5:wait:/etc/init.d/rc 5
l6:6:wait:/etc/init.d/rc 6

# Add your own stuff below 
```

当前源位于 中`devboard-R2_20-distfiles.tar.gz`，其中包括 1.3.6 版`init.c`和 initscript 包，需要在[Axis 站点](http://www.axis.com/products/dev_sdk/download.htm)注册。

# javascript - IE6-7 的 setAttribute 替换

> ID：12399559
> 
> 赞同：0
> 
> 时间：2012-09-13T04:48:16.467
> 
> 标签：javascript

`elem.setAttribute()`尽管我的 javascript 中，我正在广泛使用方法。我的脚本在除 IE6 和 7 之外的所有浏览器上都运行良好。我知道它们都不支持这种方法。

有什么方法可以概括或重新定义`setAttibute()`，以便被所​​有浏览器识别，因为我的 JavaScript 太长，无法逐行单独修改。

# asp.net - 如何在使用 asp.net 的图像数据列表中应用按需加载（延迟加载）概念？

> ID：12399560
> 
> 赞同：1
> 
> 时间：2012-09-13T04:48:25.593
> 
> 标签：asp.net, c#-4.0, scroll, lazy-loading, datalist

在我的asp.net应用程序中有一个数据列表，页面加载事件我必须绑定图像项的数量（1000），如何按需应用加载（你可以说延迟加载图像）（当时滚动页面时）只绑定facebook新需求页面等项目）

基本上我不希望由于没有图像及其加载时间而导致页面加载延迟。我的代码是页面加载事件获取数据并绑定数据列表

```
SqlCommand comd = new SqlCommand("usp_GetSubCategoryProducts", OBcon);
                comd.CommandType = CommandType.StoredProcedure;
                comd.Parameters.Add("@ID", SqlDbType.Int).Value = SubCategory_id;

                DataSet ds = new DataSet();
                SqlDataAdapter sqlAdapter = new SqlDataAdapter();
                sqlAdapter.SelectCommand = comd;
                sqlAdapter.Fill(ds);
 listView.DataSource = ds;
                listView.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:54:46.523

好吧，您可以使用 jQuery 的惰性图像加载工具来做到这一点……这很棒，正好满足您的需求。

[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

Lazy Load 是一个用 JavaScript 编写的 jQuery 插件。它延迟了长网页中图像的加载。***在用户滚动到它们之前，不会加载视口之外的图像（网页的可见部分）。这与图像预加载相反***。

在包含许多大图像的长网页上使用延迟加载可以加快页面加载速度。加载可见图像后，浏览器将处于就绪状态。在某些情况下，它还可以帮助减少服务器负载。（以上取自网站）

对于演示，[请访问](http://www.appelsiini.net/projects/lazyload/enabled_fadein.html)此页面，您会知道这是您正在寻找的东西。

这是一个易于集成的东西，因此可以满足您的需求。

要在 Datalist 或中继器中制作它，您可以使用

```
<asp:Image ID="LazyImages" runat="server" 
  CssClass="lazy" src="img/BlankImage.gif" data-original="<%# Eval("URLofImageFromDB"))%>" /> 
```

您需要专注于 CssClass 和 SRC 属性，而 jQuery 负责绑定和休息。

JQuery 的配置很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:57:44.757

asp.net 中没有任何内置函数可以执行此任务。但是您可以为此目的使用 jquery 插件。

**延迟加载器延迟加载（长）页面中的图像。在用户向下滚动之前，不会加载首屏下方的图像（在页面的最下方）。**

有关详细信息，请参阅链接。[http://archive.plugins.jquery.com/project/lazyload](http://archive.plugins.jquery.com/project/lazyload)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:54:46.403

`DataList`不是为了这个目的。你最好使用 javascript 和 ajax 调用。

有一个以`StartIndex`and `Count`of 作为参数的 url 并列出我们要显示的 url。然后只需将它们附加到使用 javascript 中。

# node.js - 在 Node.js 中的 Jade 模板中使用大型数据集制作行

> ID：12399563
> 
> 赞同：1
> 
> 时间：2012-09-13T04:48:59.863
> 
> 标签：node.js, pug

我有大约 100 个项目，我使用[玉迭代](https://github.com/visionmedia/jade#iteration)将它们中的每一个都写入 html。但是，我正在努力寻找一种优雅的方式将项目分成三行。

为了清楚起见，我想要这样的东西：

```
.row
    .item1
    .item2
    .item3
.row
    .item1 
```

... 等等...

我已经尝试过像这样的内联javascript，但没有运气：

```
- var a = 0;
  each item in list
    - a++;
    - if(a % 3 == 0)
      .row-fluid
        .span3(id='#{item.id}')
          p #{item.id}
    - else
        .span3(id='#{item.id}')
          p #{item.id} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:50:39.373

注意：这会杀死列表

```
while list.length > 0
  .row
    for item in list.splice(0, 3)
      .span3(id=item.id)
        p= item.id 
```

让我知道这是否有效，因为我只是把它从头顶写下来

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T04:20:48.337

```
- var i = -3;
while i <= list.length
  - i += 3;
  .row
    each item in list.slice(i, i+3)
      .span3(id='#{item.id}') 
```

# php - 为每个数组应用一个函数

> ID：12399567
> 
> 赞同：1
> 
> 时间：2012-09-13T04:49:17.340
> 
> 标签：php

我正在尝试为每个数组应用一个函数，但它不起作用，这是我的代码：

```
$array['a'] = "aaa";
$array['b'] = "bbb";

function myFunction ($array) {
   ## some code
   };

foreach ($array as $value) {
   echo myFunction($array[$value]);
   }; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T04:53:56.763

karthikr 是正确的。您还可以使用速记函数代替 foreach 循环：

```
array_walk($array, 'myFunction'); 
```

见[http://www.php.net/manual/en/function.array-walk.php](http://www.php.net/manual/en/function.array-walk.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T04:52:04.860

试试这个：

```
$array['a'] = "aaa";
$array['b'] = "bbb";

function myFunction ($array) {
   ## some code
   };

foreach ($array as $key => $value){
   echo myFunction( $value );
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T10:46:27.393

至于您的标题，如果您需要对每个（超过 1 个）数组应用回调函数，让我们使用[array_map()](http://www.php.net/manual/en/function.array-map.php)：

```
$func = function($value) {  
  return $value * 2;  
};

print_r(array_map($func, range(1, 5))); 
```

# java - 以两种不同的货币显示相同的交易（金额/票价）

> ID：12399570
> 
> 赞同：0
> 
> 时间：2012-09-13T04:49:30.587
> 
> 标签：java, database, currency

我们正在开发旅游网站，用于预订航班、酒店、汽车等。它是基于产品的软件。客户（购买我们的软件）将成为“主要代理”。他的总交易将以 INR（印度卢比货币）计价。全部航班、酒店或汽车预订仅以“印度卢比”进行。

现在他有权创建他的“子机构”。子机构货币可以是美元或印度卢比等。这意味着“主要机构”可能在世界各地都有其子机构。现在，每当“子机构”登录时，他的交易报告都应该以他的货币显示。如果他的货币是“AUD”，那么总交易量应该只是“AUD”。在创建子代理时，我们固定他的货币，无论他属于美元还是澳元或 AED 等。它是固定的。

当“子代理”生成票证（以澳元为单位）时，此交易也会显示在主要代理交易报告中。这是出现实际问题的地方。对于“子机构”，报告应以“AUD”为单位，对于主要机构，报告应以“INR”为单位。**主要机构已准备好承担货币兑换损益**。但是“子机构”不应该失去/获得。

我们以他的货币（美元/澳元）存储“主要代理”的“子代理”存款，当他登录时，我们以美元/澳元显示票价。预订后，我们将从他的可用余额中扣除该金额。但是当涉及到报告时，我们必须以两种方式显示这些交易。对于主要代理，它应该是 INR，对于子代理，它应该是他的货币 (USD/INR)。

我的解决方案很少，但这些使我的开发变得复杂。我期待更好的解决方案。

我的解决方案之一是，在存储交易时，还使用“INR”存储货币兑换率。现在使用该货币兑换率将其转换为“INR”。是很好的解决方案吗？

**示例**：子代理进行“2.00 美元”交易。在存储时，将货币兑换率也作为一列添加到表中。例如，“1 美元 = 55 印度卢比”。显示时计算2*55，并在主代理报告中显示为110 INR。

请为此提出任何更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:09:57.380

使用多种货币进行计算非常有趣。如果您想要一个有趣的历史记录，请在您最喜欢的搜索引擎上查找“欧元三角测量”。

在某个地方，您必须记录要使用的货币兑换率。您可以选择许多不同的技术，它们都会产生略有不同的答案：

*   交易时可获得的最佳报价汇率。
*   当天的报价汇率（存储在每日兑换率表中，而不是每笔交易）。
*   从来源收集或从每日汇率来源计算的月平均汇率。
*   接待员每天根据报纸上的信息输入的汇率。

请注意，代理商有买入和卖出价格；这些（点差）之间的差异代表了它们在交易中的利润。

根据我的经验（现在已经过时了 20 年——早于万维网），每日报告中使用了每日费率，并且将每日费率用于创建月度报告中使用的平均月费率。

但是，您必须在某处记录每笔交易要使用的汇率，无论是在交易中，还是在可以根据您选择使用的规则交叉引用的某个单独的表中。

# vim - Vim：如何在可视块模式下插入？

> ID：12399572
> 
> 赞同：182
> 
> 时间：2012-09-13T04:49:57.733
> 
> 标签：vim

在 Vim 中处于可视块模式（通过按 ctrl-V）时如何插入？

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2012-09-13T04:49:57.733

**试试这个**

选择一段文本后，按`Shift`+`i`或大写`I`。

小写`i`将不起作用。

然后键入您想要的内容，最后将其应用于所有行，按`Esc`两次。

**如果这不起作用...**

检查您是否`+visualextra`在您的 Vim 版本中启用。

您可以通过键入`:ver`并滚动功能列表来执行此操作。（您可能希望将其复制并粘贴到缓冲区中并进行增量搜索，因为格式很奇怪。）

启用它超出了这个问题的范围，但我相信你可以在某个地方找到它。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2017-03-28T17:42:12.420

1.  按 ctrl 和 v // 开始选择
2.  按 shift 和 i // 然后输入任何文本
3.  按 esc esc // 按 esc**两次**

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2014-07-03T09:38:21.670

您可能还有一个用例，您希望删除一段文本并替换它。

像这样

```
Hello World
Hello World 
```

您可以在“W”之前进行视觉块选择并点击`Shift`+ `i`- 键入“Cool” - 点击`ESC`然后通过视觉块选择删除“世界”。

或者，更酷的方法是在两行中**仅视觉块**选择“世界”。键入。`c`_ `change`现在您处于`insert`模式中。插入你想要的东西并点击`ESC`。两者都通过较少的击键得到反映。

```
Hello Cool 
Hello Cool 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-10-26T08:11:42.330

如果要在所选列之前或之后添加新文本：

*   按 ctrl+v
*   选择列
*   按 shift+i
*   写你的文字
*   按 esc
*   按“jj”

# facebook - 在 Facebook 页面墙或时间轴上发布

> ID：12399574
> 
> 赞同：-2
> 
> 时间：2012-09-13T04:50:12.163
> 
> 标签：facebook

由于 FaceBook 推出了新的页面概念，我创建了一个页面，但我无法从代码中找到任何 C# SDK 用于在该页面的时间轴上发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:31:48.023

首先你需要 C# SDK 你可以从这里下载 [http://csharpsdk.org/](http://csharpsdk.org/)

可能您需要 manage_page 权限才能获取页面访问令牌

您可以使用此图请求[http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Faccounts获取页面访问令牌](http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Faccounts)

获得页面访问令牌后，您可以使用此代码在页面墙上发布

```
 var fb = new Facebook.FacebookClient(PageAccessToken);
        var postArgs = new Dictionary<string, string>();
        postArgs["link"] = "http://www.foo.com";
        postArgs["name"] = "Click Here To View";
        postArgs["message"] = Message;
        fb.Post("[pageid]/feed/", postArgs); 
```

# asp.net-mvc - MVC4 中 dropdwonlist 的 Selected Index Change 事件

> ID：12399579
> 
> 赞同：1
> 
> 时间：2012-09-13T04:50:38.467
> 
> 标签：asp.net-mvc, razor

我对 MVC 很陌生，目前我需要在 MVC4 中使用 Razor 引擎开发一个项目。

谁能告诉我

如何在 MVC4 中实现 dropdwonlist 的 SelectedIndex Change 事件的逻辑？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:20:11.783

在 MVC 中你不能这样做。你需要使用 jQuery。OnSelectedIndexChange 是 ASP.Net 中使用的一个概念，而 MVC3 则大不相同。如果您想在用户更改 DDL 时实现逻辑，则需要在 DDL 更改时运行 jQuery 函数（`onchange`html 属性），然后将使用 AJAX 的请求传递给页面上的控制器。在此控制器中，您将能够实现此逻辑。

我建议先熟悉 MVC 的概念。ASP.Net 中的实践很少与 MVC 互换。

# python - 如何选择一定数量的数据作为numpy数组？

> ID：12399590
> 
> 赞同：1
> 
> 时间：2012-09-13T04:51:40.660
> 
> 标签：python, numpy

我总共有 1000 个充满数据的 txt 文件。我已将它们全部复制到一个 txt 文件中，并将其加载到我的 python 代码中：

```
data = numpy.loadtxt('C:\data.txt') 
```

到目前为止，这很好。现在，我需要从这 1000 个 txt 文件（即 200 个文件）中选择每 5 个文件，并将它们的组合内容加载到单个变量中。我对如何做到这一点感到困惑。

需要帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:37:32.920

了解文件是否具有相同的行数对我们来说至关重要。如果他们这样做了，您可以照原样继续并使用切片技巧。如果他们不这样做，那么您将需要单独加载文件以实现您想要的 - 文件分隔的位置已经在合并中丢失。

就个人而言，我认为大卫的建议在任何一种情况下都更好。但是，如果您想继续对大数据数组进行切片，请继续阅读...

```
>>> import numpy as np
>>> n = 2  # number of lines in each file
>>> N = 5  # number of files
>>> x = np.eye(n*N, dtype=int)  # fake example data
>>> x
array([[1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 1]])
>>> np.vstack(x[n*i:n*(i+1)] for i in range(N)[::2])  # every second file
array([[1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 1]])
>>> np.vstack(x[n*i:n*(i+1)] for i in range(N)[1::3])  # every third file, skipping the first
array([[0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 1]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:07:15.810

为什么不一次加载一个文件（假设文件是`data-0000`​​ through `data-0999`）：

```
datasets = []
for file_number in range(1000):
    datasets.append(numpy.loadtxt("c:\\data-%04d" %(file_number, )) 
```

然后你可以得到每五个文件：`every_fifth_file = datasets[::5]`. 另请参阅：[解释 Python 的切片表示法](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:17:32.333

通过将所有 1000 个文件放在一个文件中，您简化了在 Numpy 中加载数据的操作（好点），但您丢失了每个初始文件中有多少行的信息（坏点）。

如果您知道所有文件的行数相同，那就太好了！使用`N`文件，`m`每个文件中都有行，您的数组的长度应为`N*m`. 所以，`data[:m]`有你的第一个文件的行，`data[m:2*m]`你的第二个文件的行，等等。所以，你的第五个文件是`data[4*m:5*m]`，你的第十个`data[9*m:10*m]`. 当然，你可以做一些简单的递归来找到你想要的行。但是我们可以利用数组具有相同行数的事实：让我们重塑数组！

如果`data`形状为`(N*m,d)`，`d`则每个文件的列数在哪里，您可以使用以下命令进行整形：

```
data_reshaped = data.reshape(N,m,d) 
```

甚至更简单：

```
data.shape = (N, m, d) 
```

现在，`data`是3D。您只需使用 访问每隔 5 个条目`data[::5]`，这将为您提供一个 shape 数组`(N/5, m, d)`，其第一个元素将是您最初的第 5 个数组...

请注意，此技巧仅在文件具有相同行数时才有效。如果他们不这样做，那么您将无法从每个文件中的行数列表中找到您想要的行。

# r - 数据表中的 NA

> ID：12399592
> 
> 赞同：10
> 
> 时间：2012-09-13T04:51:45.107
> 
> 标签：r, data.table, na

我有一个`data.table`包含一些组的。我对每个组进行操作，一些组返回数字，其他组返回`NA`。出于某种原因`data.table`，很难将所有内容重新组合在一起。这是一个错误还是我误解了？这是一个例子：

```
dtb <- data.table(a=1:10)
f <- function(x) {if (x==9) {return(NA)} else { return(x)}}
dtb[,f(a),by=a]

Error in `[.data.table`(dtb, , f(a), by = a) : 
  columns of j don't evaluate to consistent types for each group: result for group 9 has     column 1 type 'logical' but expecting type 'integer' 
```

我的理解是这`NA`与 R 中的数字兼容，因为显然我们可以拥有一个`data.table`具有值的`NA`值。我意识到我可以回来`NULL`，这会很好，但问题在于`NA`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T04:55:16.887

从`?NA`

> NA 是长度为 1 的逻辑常数，其中包含缺失值指示符。NA 可以强制转换为除 raw 之外的任何其他向量类型。还有其他支持缺失值的原子向量类型的常量 NA_integer_、NA_real_、NA_complex_ 和 NA_character_：所有这些都是 R 语言中的保留字。

您必须指定正确的类型才能使您的功能正常工作 -

您可以在函数内强制以匹配的类型`x`（请注意，我们需要让它`any`适用于子集中超过 1 行的情况！

```
f <- function(x) {if any((x==9)) {return(as(NA, class(x)))} else { return(x)}} 
```

# 更多 data.table*ish* 方法

`set`使用（或`:=`）通过引用设置/替换可能更有意义。

```
set(dtb, i = which(dtb[,a]==9), j = 'a', value=NA_integer_) 
```

或者`:=`在`[`使用矢量扫描`a==9`

```
dtb[a == 9, a := NA_integer_] 
```

或 `:=`与二进制搜索一起

```
setkeyv(dtb, 'a')
dtb[J(9), a := NA_integer_] 
```

# 有用的注意事项

如果您使用`:=`or`set`方法，您似乎不需要指定`NA`类型

以下两个都可以

```
dtb <- data.table(a=1:10)
setkeyv(dtb,'a')
dtb[a==9,a := NA]

dtb <- data.table(a=1:10)
setkeyv(dtb,'a')
set(dtb, which(dtb[,a] == 9), 'a', NA) 
```

# 这会给出一个非常有用的错误消息，让您知道原因和解决方案：

> ( DTc `[.data.table`, J(9), `:=`(a, NA)) 中的错误：RHS 的类型（“逻辑”）必须与 LHS（“整数”）匹配。对于最快的情况，检查和强制会影响性能。要么更改目标列的类型，要么自己强制 := 的 RHS（例如，使用 1L 而不是 1）

* * *

# 哪个最快

具有合理的大数据集，`a`在原位被替换

# 就地更换

```
library(data.table)

set.seed(1)
n <- 1e+07
DT <- data.table(a = sample(15, n, T))
setkeyv(DT, "a")
DTa <- copy(DT)
DTb <- copy(DT)
DTc <- copy(DT)
DTd <- copy(DT)
DTe <- copy(DT)

f <- function(x) {
    if (any(x == 9)) {
        return(as(NA, class(x)))
    } else {
        return(x)
    }
}

system.time({DT[a == 9, `:=`(a, NA_integer_)]})
##    user  system elapsed 
##    0.95    0.24    1.20 
system.time({DTa[a == 9, `:=`(a, NA)]})
##    user  system elapsed 
##    0.74    0.17    1.00 
system.time({DTb[J(9), `:=`(a, NA_integer_)]})
##    user  system elapsed 
##    0.02    0.00    0.02 
system.time({set(DTc, which(DTc[, a] == 9), j = "a", value = NA)})
##    user  system elapsed 
##    0.49    0.22    0.67 
system.time({set(DTc, which(DTd[, a] == 9), j = "a", value = NA_integer_)})
##    user  system elapsed 
##    0.54    0.06    0.58 
system.time({DTe[, `:=`(a, f(a)), by = a]})
##    user  system elapsed 
##    0.53    0.12    0.66 
# The are all the same!
all(identical(DT, DTa), identical(DT, DTb), identical(DT, DTc), identical(DT, 
    DTd), identical(DT, DTe))
## [1] TRUE 
```

不出所料，二分搜索方法是最快的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:20:30.417

你也可以这样做：

```
dtb <- data.table(a=1:10)

mat <- ifelse(dtb == 9,NA,dtb$a) 
```

上面的命令会给你矩阵，但你可以把它改回 data.table

```
new.dtb <- data.table(mat)
new.dtb
     a
 1:   1
 2:   2
 3:   3
 4:   4
 5:   5
 6:   6
 7:   7
 8:   8
 9:  NA
10:  10 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T02:14:06.657

如果要将 NA 分配给许多变量，可以使用[此处建议的方法](https://stackoverflow.com/a/13735764/1385941)：

```
v_1  <- c(0,0,1,2,3,4,4,99)
v_2  <- c(1,2,2,2,3,99,1,0)
dat  <-  data.table(v_1,v_2)

for(n in 1:2) {
  chari <-  paste0(sprintf('v_%s' ,n), ' %in% c(0,99)')
  charj <- sprintf('v_%s := NA_integer_', n)
  dat[eval(parse(text=chari)), eval(parse(text=charj))]
} 
```

# data-structures - 在 2D 环境中检测动态对象之间的碰撞

> ID：12399593
> 
> 赞同：1
> 
> 时间：2012-09-13T04:51:47.790
> 
> 标签：data-structures, 2d, collision-detection, quadtree

假设我们在二维世界中有很多动态对象，例如角色、射弹、能量提升，这些都是您在游戏中常见的东西。他们都在动。我们想检测它们之间的碰撞。有什么好的方法吗？

我看过四叉树，但它似乎检测动态移动对象之间的碰撞，我必须每帧重新创建四叉树（因为对象每帧都会改变它们的位置）。这看起来像一个昂贵的操作。

除了四叉树之外，还有其他方法可以解决这个问题吗？有没有办法改进四叉树方法？也许在每一帧上重新创建树毕竟不是那么昂贵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:23:20.427

通常，您*更新*四叉树（而不是丢弃旧的四叉树并构建新的四叉树），这并不像您想象的那么昂贵：通常物体在每一帧中只移动一小段距离，因此大多数物体保持不变四叉树的节点，几乎没有变化。即使在最坏的情况下，每个项目都移动到一个主要边界并且必须移除并重新插入，成本也只有 O( *n* log *n* )。但是或多或少地，对所有项目的任何循环都会花费这么多，所以再循环一次并不是什么大不了的事。

# windows-8 - 适用于 Windows 8 Metro Apps 的免费 PDF 编写器

> ID：12399597
> 
> 赞同：3
> 
> 时间：2012-09-13T04:52:19.973
> 
> 标签：windows-8, pdf-generation

是否有适用于 Windows 8 / Metro 应用程序的 PDF 编写器？我正在开发一个 Windows 8 应用程序并寻找一个可以以编程方式生成 PDF 文档的库，该文档可用于打印或发送电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:19:56.070

 ~~[iTextSharp](http://sourceforge.net/projects/itextsharp/)是名为[iText](http://itextpdf.com/index.php)的 Java 库的 C# 端口。您可以在 Web 上找到的大多数更新文档都使用 Java，但[API](http://api.itextpdf.com/itext/)基本保持不变。

请参阅此[Hello World](http://itextpdf.com/examples/iia.php?id=12)示例。[在这里](http://itextpdf.com/book/examples.php)可以找到许多其他内容（或者您可以按[关键字](http://itextpdf.com/themes/keywords.php)排序浏览它们）。

 ~~**编辑**：看起来某些依赖项无法在 Metro env 中完成，因此 iTextSharp 不会成为解决方案。~~~~

# hibernate - 使用 JPA 和映射超类的多态查询以返回特定具体实体的计数

> ID：12399598
> 
> 赞同：0
> 
> 时间：2012-09-13T04:52:24.097
> 
> 标签：hibernate, jpa, hql, named-query

我有一个 BaseEntity 抽象类，它是我所有实体的超类。这是一个 MappedSuperClass。现在我想最好在基实体上定义一个命名查询，以便它返回特定子类实体的计数。因此，例如，如果 A 类是 BaseEntity 的子类，我可以为 A 类运行命名查询并返回 A 的计数，即数据库中存在的 A 类的行数。JPA 1.0和hibernate作为实现者有可能吗？（我想避免对除基本实体之外的每个实体进行命名查询以返回计数）谢谢，-v-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:32:45.157

你可以查询它

```
int count = session.createCriteria(Subclass.class)
    .setProjection(Projections.rowCount())
    .uniqueResult(); 
```

# javascript - 在javascript中确定输入数字是负数还是正数

> ID：12399604
> 
> 赞同：-1
> 
> 时间：2012-09-13T04:53:36.060
> 
> 标签：javascript

如果给定一个将数字作为用户输入并确定该数字是负数还是正数的javascript，在什么情况下你会抛出异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:57:29.407

你应该在*特殊*情况下抛出异常。如果您接受一个数字的输入（正数或负数），那么不符合标准的东西，比如字符串或对象，应该被认为是例外的。

**例子：**

```
// Assume the variable 'input' contains the value given by user...
if(typeof input != "number") {
    throw "Input is not number!"
}
else {
    // ... handle input normally here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:03:52.940

答案取决于代码。

一个明显的功能是：

```
function isPosOrNeg(x) {
  return x < 0? 'negative' : 'positive';
} 
```

很难看到抛出异常。可能有一个 if`x`是一个不可解析的引用，但它不是（它是一个形式参数，因此实际上是一个声明的变量）。

[<](http://ecma-international.org/ecma-262/5.1/#sec-11.8.1)运算符使用[抽象的关系比较算法](http://ecma-international.org/ecma-262/5.1/#sec-11.8.5)，它不会引发错误，但它可能会`undefined`根据提供的值返回。

我根本不会抛出错误，因为`undefined`这是调用者可以处理的完全合理的响应。

如果你想测试参数，那么也许：

```
function isPosOrNeg(x) {

  if ( isNaN(Number(x))) {
    // throw an error
  }

  return x < 0? 'negative' : 'positive';
} 
```

这样会`isPosOrNeg('foo')`引发错误，但`isPosOrNeg('5')`不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:04:38.200

你可以试试这个：

```
 var inp="your input value";
   if(isNaN(inp)){
      return "Not a number";
    } else {
      if( inp > 0 ) {
          return 'positive number';
       } else if( inp < 0 ) {
          return 'negative number';
       } else {
          return 'number is zero';
       }
    } 
```

# java - 如何从 xml 文件项更改列表视图中文本视图的字体颜色？安卓

> ID：12399609
> 
> 赞同：3
> 
> 时间：2012-09-13T04:54:03.267
> 
> 标签：java, android

根据值：

例子

工资：+200

支付：-100

如果 pay 的值较高，则 200 的颜色为绿色。如果 pay 的值较低，则 100 的颜色为红色。

它每秒钟都会改变颜色，因为我有来自浏览器的 xml 文件链接并每秒更新 xml 文件。我喜欢这种颜色，因为我的 xml 文件中的链接会在几秒钟内刷新它并更改颜色取决于更高或更低。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:01:20.320

这里如果你的意思是xml文件是xml解析的，试试下面的

当您将文本从 xml 文件放入 listview 时，从 xml 文件中获取颜色并按如下方式解析它

String txt = " `<font color=#408cc4>`"+"这里需要打印的文本"+""; viewHolder.activity_hold_heading.setText(Html.fromHtml(txt));

这里`color = the color you need`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:27:16.013

要实现这一点，您需要使用 Simpleadpter 绑定数据并使用 ViewBinder 您可以获得字符串值并根据您的要求更新颜色并更新数据 make adpter Notifydatasetchange

```
adapater1 = new SimpleAdapter(Byshedulelist.this, shedulelist, R.layout.rowshedule,
                    new String[] { "im","Countryname", "Titel"},
                    new int[] { R.id.rowshedulecountryimg,R.id.shedulerowCountrynametxt, R.id.shedulerowtitle,});                   

            adapater1.setViewBinder(new MyViewBinder1());           
            itemlist.setAdapter(adapater1);

 class MyViewBinder1 implements ViewBinder 
 {      @Override
            public boolean setViewValue(View view, Object Status,String textRepresentation)
            {       
                  String complet="Pay:+200 ";
                  String notcomlet="Pay:-100";

                  String getdata= textRepresentation;

                    if((view instanceof TextView) & (Status instanceof String) )
                    { 
                            TextView iv= (TextView) view;     
                            if(complet.equals(Status))
                                {
                                r1=true;
                                r2=false;
                            iv.setText(textRepresentation);       
                            iv.setTextColor(Color.parseColor("#008000"));                
                            return true;
                           }   
                            else if(notcomlet.equals(Status))
                            {
                                r2=true;
                                r1=false;
                                iv.setText(textRepresentation);       
                                iv.setTextColor(Color.RED); 
                                return true;
                            }

                            if(r1 && (getdata.startsWith("Pay:   ")))
                           {                            

                            iv.setText(textRepresentation);      

                            iv.setTextColor(Color.parseColor("#008000"));                           
                            return true;
                           }
                        else if (r2 && (getdata.startsWith("Pay:   ")))
                        {
                            //TextView iv= (TextView) view;
                            iv.setText(textRepresentation);       
                            iv.setTextColor(Color.RED);                              
                            return true;
                        }                           
                    }        
                  return false;
            }           
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T05:13:31.133

尝试获取基适配器类的 getGroupView 方法。根据您获得的值尝试设置不同的颜色，如下所示。

方法前：

1）您必须从 String 获取值（需要突出显示的文本）并将其解析为 int 并进行比较。

2）您必须从字符串中获取值的开始和结束索引（需要突出显示文本）。

```
 @Override
              public View getGroupView(final int groupPosition, boolean isExpanded,View convertView, ViewGroup parent) {
                Spannable WordtoSpan = new SpannableString(valuestring);
                if(yourvalue>200){
                     WordtoSpan.setSpan(new ForegroundColorSpan(Color.parseColor("##00FF40")),start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);    
                }else if (yourvalue<100){
                    WordtoSpan.setSpan(new ForegroundColorSpan(Color.parseColor("#DF0101")),start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);          
                }
                yourtextview.setText(WordtoSpan);
           } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T05:02:03.967

```
String txt = "<font color=Red>"+"-100"+"";
String txt = "<font color=Green>"+"200"+""; 
viewHolder.activity_hold_heading.setText(Html.fromHtml(txt)); 
```

# php - 在 simplexml_load_file 上设置超时

> ID：12399610
> 
> 赞同：5
> 
> 时间：2012-09-13T04:54:05.830
> 
> 标签：php, timeout, simplexml, try-catch

我有这个脚本，它输出一个 rss 提要。我想做的是让它尝试到达 rss url 5 秒之类的顶部，如果它不能，那么我希望它加载服务器上的备份 xml 文档。这就是我所拥有的，但它不起作用：

```
 <?php

 include '../php/connect.php';
 $metaData = mysql_query("SELECT * FROM `siteinfo`") or die("couln't find table :(");
 $displayData = mysql_fetch_assoc($metaData);
 $url = $displayData['status'];
 $xml = file_get_contents($url);

 stream_set_timeout($xml, 5);

if ($xml == FALSE) {

   $xml = simplexml_load_file('backUpXml.xml');

   foreach ($xml->channel->item as $item) {
      echo '<a href="'.$item->guid.'" alt="'.$item->title.'" target="_blank">',   substr($item->title, 0, 62), '...</a><br /><span>', substr($item->pubDate, 4, 18),'</span><br /><hr /><br />';
   }
}  else {

   $xml = simplexml_load_file($url);

   foreach ($xml->channel->item as $item) {
        echo '<a href="'.$item->guid.'" alt="'.$item->title.'" target="_blank">', substr($item->title, 0, 62), '...</a><br /><span>', substr($item->pubDate, 4, 18),'</span><br /><hr /><br />';
   }
}

 ?> 
```

我收到超时错误，仅此而已。任何见解都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-15T12:46:06.510

[@AnthonySterling在这里](http://community.sitepoint.com/t/stopping-a-simplexml-load-file-function-after-a-few-seconds/7090)指出了一个更好的解决方案：

```
function simplexml_load_file_from_url($url, $timeout = 5){
  $opts = array('http' => array('timeout' => (int)$timeout));
  $context  = stream_context_create($opts);
  $data = file_get_contents($url, false, $context);
  if(!$data){
    trigger_error('Cannot load data from url: ' . $url, E_USER_NOTICE);
    return false;
  }
  return simplexml_load_string($data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:09:21.933

来自[php.net](http://php.net/manual/en/function.stream-set-timeout.php)：

```
<?php
$fp = fsockopen("www.example.com", 80);
if (!$fp) {
     echo "Unable to open\n";
} else {

    fwrite($fp, "GET / HTTP/1.0\r\n\r\n");
    stream_set_timeout($fp, 2);
    $res = fread($fp, 2000);

    $info = stream_get_meta_data($fp); //I think this is what you need.
    fclose($fp);

    if ($info['timed_out']) { //So you can check this variable.
        echo 'Connection timed out!';
    } else {
        echo $res;
    }

}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:27:05.357

这就是我的工作：

```
 <?php

     include 'php/connect.php' ;
     $metaData = mysql_query("SELECT * FROM `siteinfo`") or die("couln't find table :(");
     $displayData = mysql_fetch_assoc($metaData);
     $url = $displayData['status'];
     $xml = file_get_contents($url);

   if (!$xml) {

       $xml = simplexml_load_file('content/backUpXml.xml');

       foreach ($xml->channel->item as $item) {
          echo '<a href="'.$item->guid.'" alt="'.$item->title.'" target="_blank">',   substr($item->title, 0, 62), '...</a><br /><span>', substr($item->pubDate, 4, 18),'</span><br /><hr /><br />';
       }
    }  else {

       $myFile = "content/backUpXml.xml";
       $fh = fopen($myFile, 'w') or die("can't open file");
       $stringData = $xml;
       fwrite($fh, $stringData);
       fclose($fh);

       $xml = simplexml_load_file($url);

       foreach ($xml->channel->item as $item) {
            echo '<a href="'.$item->guid.'" alt="'.$item->title.'" target="_blank">', substr($item->title, 0, 62), '...</a><br /><span>', substr($item->pubDate, 4, 18),'</span><br /><hr /><br />';
       }
    }

    ?> 
```

# java - java并发实践14.6

> ID：12399611
> 
> 赞同：0
> 
> 时间：2012-09-13T04:54:14.387
> 
> 标签：java, multithreading, concurrency

这个代码片段来自java concurrency in practice，我真的不明白。

```
@ThreadSafe
public class BoundedBuffer<V> extends BaseBoundedBuffer<V> {
    // CONDITION PREDICATE: not-full (!isFull())
    // CONDITION PREDICATE: not-empty (!isEmpty())

    public BoundedBuffer(int size) { super(size); }

    // BLOCKS-UNTIL: not-full
    public  synchronized  void put(V v) throws InterruptedException {
        while (isFull())
            wait();
        doPut(v);
        notifyAll();
    }

    // BLOCKS-UNTIL: not-empty
    public  dsynchronize  V take() throws InterruptedException {
        while (isEmpty())
            wait();
        V v = doTake();
        notifyAll();
        return v;
    }
} 
```

put 和 take 方法是同步的。如果某个线程在 put 方法中等待，则没有人可以进入 take 或 put 方法，因此，在大多数情况下，如果一个线程开始等待，它将永远等待。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T04:56:03.220

是`synchronized`的，但是`wait()`如果等待，该方法就会释放锁——这就是它的工作原理。然后线程阻塞，直到收到通知。一旦得到通知，它就会重新获取锁并继续。引用`Object.wait()`javadocs：

> 使当前线程等待，直到另一个线程为此对象调用 java.lang.Object.notify() 方法或 java.lang.Object.notifyAll() 方法。换句话说，此方法的行为与它只是执行调用 wait(0) 完全相同。
> 
> 当前线程必须拥有该对象的监视器。线程释放此监视器的所有权并等待，直到另一个线程通过调用 notify 方法或 notifyAll 方法通知在此对象的监视器上等待的线程唤醒。然后线程等待直到它可以重新获得监视器的所有权并恢复执行。

我建议多阅读一些有关[Java 并发的内容，特别是有关](http://docs.oracle.com/javase/tutorial/essential/concurrency/)[受保护阻塞](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)的这一部分。

更典型的是具体指定您正在等待和通知的对象。该`wait()`调用确实应该是`this.wait()`，`this.notifyAll()`这使得能够更容易地确定哪个锁受到影响。

# c++ - 旧版 MFC 代码 (2005) 无法在 VC 2010 上编译

> ID：12399613
> 
> 赞同：0
> 
> 时间：2012-09-13T04:54:32.197
> 
> 标签：c++, visual-studio, mfc, compiler-errors

我有一个问题`CException`。可能发生了一些变化`afx.h`

我得到的错误在以下行中：

```
throw new CException(); 
```

错误是

> 错误 C2259：“CException”：由于以下成员，无法实例化抽象类：“CException::~CException(void)”：是抽象的

我以前从未使用过 MFC，我只需要尽可能快地编译它，有人知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:01:57.593

使用派生类之一。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/t078xe4f.aspx](http://msdn.microsoft.com/en-us/library/t078xe4f.aspx)。

或者，改为使用`std::exception`.

# coldfusion - ColdFusion - 获取下一个计划任务

> ID：12399616
> 
> 赞同：3
> 
> 时间：2012-09-13T04:54:58.670
> 
> 标签：coldfusion, scheduled-tasks

该线程对于找出计划任务的下一个运行时间很有用。

[如何找出计划任务的下一次运行时间？](https://stackoverflow.com/questions/10740297/how-do-i-find-out-the-next-run-time-for-a-scheduled-task)

但是，还有没有办法简单地获取下一个计划任务？

如果我可以获得下一个要运行的任务的日期和名称，我可以将该日期插入一个 jQuery 倒计时计时器，它会显示下一个计划任务的倒计时，例如：

```
TaskABC due to run in:
12    03     20
hrs   min    sec 
```

. 这是一个管理界面，以防你想知道人们有多怪异:-)

## 编辑

![在此处输入图像描述](../Images/ba4cb6c3eaffcb40654cf1c017353720.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:26:24.547

我和比尔有同样的想法。但很好奇是否还有其他方法。

我四处逛逛，显然内部`Scheduler`类维护了一份即将完成的任务列表。该列表是私有的，但您可以使用相同的反射技术来访问它。有趣的是，该列表还包括邮件假脱机程序、会话/应用程序跟踪器、观察者等系统任务。所以你必须遍历它，直到你找到一个“计划任务”，即`CronTabEntry`

下面是一个经过简单测试的函数，它似乎在 CF9 中发挥了作用。（注意，包括来自[http://www.cflib.org的](http://www.cflib.org)[CreateTimeStruct](http://www.cflib.org/index.cfm?event=page.udfbyid&udfid=421)函数）。

**规则：**

*   返回一个结构，其中包含名称和距离下一个任务剩余的时间。如果未找到任务，`result.task`则为空字符串。
*   排除暂停的任务

**用法：**

```
result = new TaskUtil().getNextTask();
WriteDump(result); 
```

**氟氯化碳**

```
component {
     public struct function getNextTask() {
        // get list of upcoming tasks from factory (UNDOCUMENTED)
        local.scheduler = createObject("java", "coldfusion.server.ServiceFactory").getSchedulerService();
        local.taskField = local.scheduler.getClass().getDeclaredField("_tasks");
        local.taskField.setAccessible( true );
        local.taskList = local.taskField.get(local.scheduler);

        // taskList contains system jobs too, so we must iterate 
        // through the tasks to find the next "scheduled task"
        local.nextTask = "";
        local.tasks = local.taskList.iterator();

        while ( local.tasks.hasNext() ) {
            local.currTask = local.tasks.next();
            local.className = local.currTask.getRunnable().getClass().name;

            // exit as soon as we find a scheduled task that is NOT paused
            if (local.className eq "coldfusion.scheduling.CronTabEntry"
                    && !local.currTask.getRunnable().paused) {
                local.nextTask = local.currTask;
                break;
            }
        }

        // if we found a task, calculate how many days, hours, etcetera  
        // until its next run time
        local.details = { task="", remaining={} };

        if ( isObject(local.nextTask) ) {
            local.secondsToGo  = (local.nextTask.getWhen() - now().getTime()) / 1000;
            local.details.task = local.nextTask.getRunnable().task;
            local.details.remaining = createTimeStruct(local.secondsToGo);
            local.details.nextDate = dateAdd("s", local.nextTask.getWhen() / 1000
                                               , "January 1 1970 00:00:00"  );
        }
        return local.details;   
     }

    /**
     * Abbreviated version of CreateTimeStruct by Dave Pomerance 
     * See http://www.cflib.org/index.cfm?event=page.udfbyid&udfid=421
     *   
     * @param timespan   The timespan to convert. 
     * @return Returns a structure. 
     * @author Dave Pomerance  
     * @version 1, January 7, 2002 
     */
    public struct function CreateTimeStruct(required numeric timespan) {
        var timestruct = StructNew();
        var mask = "s";

        // only 4 allowed values for mask - if not one of those, return blank struct
        if (ListFind("d,h,m,s", mask)) {
            // compute seconds
            if (mask eq "s") {
                timestruct.s = (timespan mod 60) + (timespan - Int(timespan));
                timespan = int(timespan/60);
                mask = "m";
            } else timestruct.s = 0;
            // compute minutes
            if (mask eq "m") {
                timestruct.m = timespan mod 60;
                timespan = int(timespan/60);
                mask = "h";
            } else timestruct.m = 0;
            // compute hours, days
            if (mask eq "h") {
                timestruct.h = timespan mod 24;
                timestruct.d = int(timespan/24);
            } else {
                timestruct.h = 0;
                timestruct.d = timespan;
            }
        }

        return timestruct;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T06:14:02.713

`getNextRunTime(string taskName)`我的第一个想法是在任务集合上迭代 Leigh 的函数。您可以使用以下方式获取包含所有计划任务详细信息的结构数组`taskArray = createobject("java","coldfusion.server.ServiceFactory").getCronService().listAll();`

包含任务名称的结构中的键是“task”。因此，您可以将所有任务名称提取为一个数组，例如，对每个元素运行 Leigh 的函数并确定下一个将运行哪个。

# jquery-ui - 如何获取新元素的对象，该对象在 jQuery UI 可排序中放置而不是先前的对象？

> ID：12399617
> 
> 赞同：2
> 
> 时间：2012-09-13T04:55:10.303
> 
> 标签：jquery-ui, jquery-ui-sortable

来源：

```
<ul class="supercategory">
    <li>
    <div class="supcat">
        <h4>
        <a class="new" href="/header1.html">header 1</a>
        </h4>
        <ul class="category">
            <li><a href="item1.html">Item 1</a></li>
            <li><a href="item2.html">Item 2</a></li>
        </ul>
    </div>
    </li>
    <li style="" class="">
    <div class="supcat">
        <h4>
        <a class="new" href="/header2.html">Header 2</a>
        </h4>
        <ul class="category">
            <li><a href="item1.html">Item 1</a></li>
            <li><a href="item2.html">Item 2</a></li>
        </ul>
    </div>
    </li>
</ul>
<div id="test">
</div> 
```

一点点CSS：

```
ul.supercategory { background: lightblue; }
.new{ background: yellow; } 
```

和一个 jQuery UI 力量：

```
$('.supercategory').sortable({
            cursor: 'move',
            axis: 'y',
            revert: true,
            stop: function (event, ui) {  }
        }); 
```

我知道要获得当前拖动元素的对象，我只需要做以下事情：

```
stop: function(event, ui) { var obj = ui.item; } 
```

但是如何获取放置元素的对象而不是拖动到新位置？

例如，如果我将第一个 li 拖动到新位置（它将是 2nd li），第二个 li 被放置在该位置而不是我的位置上，如何在 jQuery UI 中将该元素作为对象进行排序？

看我的小提琴：http: [//jsfiddle.net/Stasonix/jCMuQ/1/](http://jsfiddle.net/Stasonix/jCMuQ/1/)

**upd** 1.首先是小提琴。[http://jsfiddle.net/Stasonix/jCMuQ/5/](http://jsfiddle.net/Stasonix/jCMuQ/5/)

比代码：

```
var is_received = false;

$('.supercategory').sortable({
            cursor: 'move',
            axis: 'y',
            revert: true,
            receive: function(event, ui){ is_received = true;  },
            stop: function (event, ui) {

                is_received = true;

            },

    deactivate: function(event, ui) {

        if (is_received){

            $('#test').text(ui.item.find('.new').attr('href'));

            is_received=false;

        }            

    }

 }); 
```

嗯......仍然需要一个解决方案，它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:08:30.157

您可以尝试通过跟踪对象的索引/位置并使用事件来获取您拖动的新对象`start`，`deactivate`如下所示：

```
// Define static variables to keep track of the index / position of your dragged object
var prev_index =  null;   // Previous index / position of your dragged object
var next_index = null;    // Next index / position of your dragged object

$('.supercategory').sortable({
    cursor: 'move',
    axis: 'y',
    revert: true,
    start : function(event, ui) {
        prev_pos = ui.item.index();
    },
    deactivate : function(event, ui) {
        next_pos = ui.item.index();
    },
    stop : function(event, ui) {
        // Your new object: "el"
        var el = null;

        if(next_pos > prev_pos)
            el = $(".mydrag").get(next_pos-1); // Your previous object has been dragged! Your previous object was initially above your new object (Dragging downward)
        else if(next_pos<prev_pos)
            el = $(".mydrag").get(next_pos+1); // Your previous object has been dragged!  Your previous object was initially below your new object (Dragging upward)
        else
            el = $(".mydrag").get(prev_pos);   // Your previous object was not dragged and is at the same position

        $('#test').text($(el).find('.new').attr('href'));
    }
}); 
```

事情是，

*   如果您的对象被成功拖动，取决于您是向下还是向上拖动对象，您要查找的新对象将位于拖动对象的上方或下方，因此：在拖动对象的新索引/位置 -1 / +1
*   但是，如果您的对象未成功拖动，则“没有新对象”，因此您的新对象就是您拖动的对象。

确保将类添加`.mydrag`到您的可拖动`li`元素：

```
<ul class="supercategory">
    <li class="mydrag">
        <div class="supcat">
            <h4>
                <a class="new" href="/header1.html">header 1</a>
            </h4>
            <ul class="category">
                <li><a href="item1.html">Item 1</a></li>
                <li><a href="item2.html">Item 2</a></li>
            </ul>
        </div>
    </li>
    <li class="mydrag">
        <div class="supcat">
            <h4>
                <a class="new" href="/header2.html">Header 2</a>
            </h4>
            <ul class="category">
                 <li><a href="item1.html">Item 1</a></li>
                 <li><a href="item2.html">Item 2</a></li>
             </ul>
        </div>
    </li>
</ul>
<div id="test">
</div> 
```

我不确定这个解决方案是否正是您想要的……如果我不清楚，您可以问我问题。

# vb.net - 使用 vb.net 对每个页面加载执行特定功能

> ID：12399626
> 
> 赞同：-1
> 
> 时间：2012-09-13T04:56:26.393
> 
> 标签：vb.net, winforms, webbrowser-control

我正在 vb.net2008 中制作应用程序。我正在使用一个 webbrowser 控件来打开一个网站。我希望在网站的每个网页加载中，我的应用程序以编程方式执行特定功能。喜欢

1）当我们打开 www.yahoo.com 然后页面完全加载后，我的程序应该以编程方式单击登录按钮。

2）之后，当加载了提示用户名和密码的下一页时，我的程序应该自动输入用户名和密码。

3）登录后，我的程序应该以编程方式单击邮件链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:14:42.790

```
Private Sub Command1_Click()
'Operation 1
WebBrowser1.Navigate "http://www.yahoo.com/"
Do Until WebBrowser1.ReadyState = WebBrowserReadyState.Complete    
 DoEvents
Loop

'Operation 2, signing in
WebBrowser1.Document.getElementById("Username").Value = "MyUsername"
WebBrowser1.Document.getElementById("Password").Value = "Password"
WebBrowser1.Document.getElementById("buttonLogOn").Click

Do Until WebBrowser1.ReadyState = WebBrowserReadyState.Complete 
DoEvents
Loop

'Operation 3
Dim link as HtmlElement = webBrowser1.Document.GetElementByID("mailLink")
link.InvokeMember("Click")

End Sub 
```

而不是使用 webbrowser 控件的[DocumentCompleted](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)事件`Do Until WebBrowser1.ReadyState =`要好得多。我将把这个练习留给你。

# c++ - 多维动态数组，为什么不起作用？

> ID：12399628
> 
> 赞同：4
> 
> 时间：2012-09-13T04:56:43.507
> 
> 标签：c++, arrays, pointers

我不是在这里寻找解决方案，我在 Google 上找到了很多。我正在寻找解释。

在玩数组时，我发现动态声明 2D 数组不像预期的那样工作

**一维阵列，作品**

```
int main()
{
int rows;
int* pointer;
pointer = new int[rows]; 
} 
```

**二维数组，不起作用**

```
int main()
{
int rows;
int columns;
int* pointer;
pointer = new int[rows][columns]; //error on this line
} 
```

在我看来，这似乎是一种直观的做事方式，因为这就是它使用常规数组的方式，但显然它不正确并且不会编译。

我一直无法找到一个明确的解释为什么会这样，希望这里有人能启发我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T05:03:11.043

这不起作用的原因是因为能够拥有一个二维数组，您需要一个指针数组，它将指向许多您想要的类型的数组。

在这种情况下，您尝试将地址存储到 int* 数组（其中每个“单元格”将指向一个 int 数组）在 int* 类型的变量中，它应该是 int**。

回顾一下： 1D 数组：int* 2D 数组：int** 3D 数组：int***

所有数组必须是一维的原因是因为您的内存是一维的（将所有内存视为一个大内存地址数组），这意味着必须“伪造”多维数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T05:15:59.047

**这不仅是其他答案所描述的数据类型的问题。**

像这样的语法

```
pointer = new int[rows][columns] 
```

仅当`columns`是常量表达式时才有效。您不能在那里使用变量（但请注意，它`rows`可以是变量）。

这是解释。`new`C++ 标准允许您仅通过以下方式将二维数组语法与运算符一起使用（来自 §5.3.4/1）：

```
new-expression:
  ::opt new new-placementopt new-type-id new-initializeropt
  ::opt new new-placementopt ( type-id ) new-initializeropt
new-placement:
  ( expression-list )
new-type-id:
  type-specifier-seq new-declaratoropt
new-declarator:
  ptr-operator new-declaratoropt
  noptr-new-declarator
noptr-new-declarator:
  [ expression ] attribute-specifier-seqopt
  noptr-new-declarator [ constant-expression ] attribute-specifier-seqopt
new-initializer:
  ( expression-listopt )
  braced-init-list 
```

**相关部分**是这样的：

```
noptr-new-declarator:
  [ expression ] attribute-specifier-seqopt
  noptr-new-declarator [ constant-expression ] attribute-specifier-seqopt 
```

第一行意味着您可以在 type-id 之后有一个括号*表达式。*第二行（这是一个递归语句）允许您在第一个括号之后使用多对括号，但它们必须包含一个*常量表达式*。

该标准进一步解释了这一点（强调我的）：

> (§5.3.4/5) 当分配的对象是一个数组（即使用 noptr-new-declarator 语法或 new-type-id 或 type-id 表示数组类型）时，new-expression 产生指向数组初始元素（如果有）的指针。[**注意：new int 和 new int[10] 都具有 int* 类型，并且 new int[i][10] 的类型是 int (*)[10]** — end note ] noptr-中的属性说明符序列new-declarator 属于关联的数组类型。
> 
> (§5.3.4/6) noptr-new-declarator 中的每个常量表达式都应是一个整数常量表达式 (5.19)，并计算为严格的正值。noptr-new-declarator 中的表达式应为整数类型、无范围枚举类型或存在单个非显式转换函数到整数或无范围枚举类型的类类型 (12.3)。[...] [ 示例：**给定定义 int n = 42，new float[n][5] 是格式良好的（因为 n 是 noptr-new-declarator 的表达式），但是 new float[5][ n] 格式不正确（因为 n 不是常量表达式）。**—结束示例]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T05:00:48.383

那么你可以通过以下方式理解它：

二维数组看起来像一个带有行和列的网格，用于人类表示，但在内存中它存储在连续的内存中。因此，每当您说二维数组或大小`mxn`时，您指`m`的是元素数组，`n`每个元素一个接一个地存储。即对于 3x3 网格元素存储为：

```
(0,0) (0,1) (0,2) (1,0) (1,1) (1,2) (2,0) (2,1) (2,2) 
```

如果您想访问这样的数据结构，您需要使用指向指针的指针，即指向每行第一个元素的位置地址数组的指针。

因此可以通过 3 个（行数）地址访问该数组

```
(Address of element 0,1) (Address of element 1,0) (Address of element 2,0) 
```

由于存储了元素的地址，所以现在您需要一个指向指针的指针来访问这个指针数组（保存每行第一个元素的地址）。

对于一维数组：

```
int* pointer = new int[3];

Array: (0) (1) (2)
pointer: (Address of first element of Array) 
```

对于二维数组：

```
int **pointer = new int[3][3];

Array: (0,0) (0,1) (0,2) (1,0) (1,1) (1,2) (2,0) (2,1) (2,2)
Row Address Array: (Address of 0,1) (Address of 1,0) (Address of 2,0)
pointer: (Address of first element of Row Address Array) 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T05:58:58.340

这是一个一维字符指针数组：`char* Dynamic_One_Dimensional_Char_Pointer_Array`。注意`char *`.

这是一个二维字符指针数组：`char **Dynamic_Two_Dimensional_Char_Pointer_Array`。注意`char **`.

这是为二维字符指针数组分配内存的方式：

```
 //memory allocated for elements of rows.
    Dynamic_Two_Dimensional_Char_Pointer_Array = new char *[ROWS] ;

    //memory allocated for  elements of each column.
    for(   i = 0 ; i < ROWS ; i++ ) Dynamic_Two_Dimensional_Char_Pointer_Array[i] = new char[COLUMNS]; 
```

这是如何打印二维数组 ( `[rows][columns]`) ：

```
 for(rows=0;rows<maxLines;rows++)
   {
       for(int columns=0;columns<strlen(Dynamic_Two_Dimensional_Char_Pointer_Array[rows]);columns++)
       {
            cout<<Dynamic_Two_Dimensional_Char_Pointer_Array[rows][columns]<<"";
       }
       cout<<"  \n";
   } 
```

他是您为二维字符指针数组取消分配内存的方式：

```
//free the allocated memory
for(   i = 0 ; i < ROWS ; i++ )   delete [] Dynamic_Two_Dimensional_Char_Pointer_Array[i] ;
delete [] Dynamic_Two_Dimensional_Char_Pointer_Array ; 
```

完整示例代码：

```
#include<vector>
#include<string>
#include<iostream>
using namespace std;

int main()
{

    int COLUMNS =80; //80 characters wide
    int ROWS =20;// 20 lines
    int i,maxLines=0;

    char* Dynamic_One_Dimensional_Char_Pointer_Array = new char[80];
    char **Dynamic_Two_Dimensional_Char_Pointer_Array = 0;

    //memory allocated for elements of rows.
    Dynamic_Two_Dimensional_Char_Pointer_Array = new char *[ROWS] ;

    //memory allocated for  elements of each column.
    for(   i = 0 ; i < ROWS ; i++ ) Dynamic_Two_Dimensional_Char_Pointer_Array[i] = new char[COLUMNS];

    strcpy(Dynamic_One_Dimensional_Char_Pointer_Array,"apples 123 oranges 456 bananas 789 lemons 101112 kiwi 132415 grapes 161718" );
    cout<<"  \ninput = "<<Dynamic_One_Dimensional_Char_Pointer_Array<<"  \n\n";
    cout<<"Output = \n";

    char seperators[]   = " ,\t\n";
    char *token; 
   token = strtok( Dynamic_One_Dimensional_Char_Pointer_Array, seperators );  
   i=0;

   while( token != NULL )
   {
      strcpy(Dynamic_Two_Dimensional_Char_Pointer_Array[i],token);
      token = strtok( NULL, seperators );  
      i++;
   }
   maxLines=i;
   cout<<"  \n";

   cout<<"show contents 1 print [rows] \n";
   cout<<"-------------------------------------------\n";
   for(int rows=0;rows<maxLines;rows++)
   {
     cout<<Dynamic_Two_Dimensional_Char_Pointer_Array[rows]<<"  \n";
   }
   cout<<"  \n";

   cout<<"show contents 2  print [rows][columns]\n";
   cout<<"-------------------------------------------\n";

   for(rows=0;rows<maxLines;rows++)
   {
     //cout<<Dynamic_Two_Dimensional_Char_Pointer_Array[rows]<<"  \n";
       for(int columns=0;columns<strlen(Dynamic_Two_Dimensional_Char_Pointer_Array[rows]);columns++)
       {
            cout<<Dynamic_Two_Dimensional_Char_Pointer_Array[rows][columns]<<"";
       }
       cout<<"  \n";
   }

    delete[] Dynamic_One_Dimensional_Char_Pointer_Array;

    //free the allocated memory
    for(   i = 0 ; i < ROWS ; i++ )   delete [] Dynamic_Two_Dimensional_Char_Pointer_Array[i] ;
    delete [] Dynamic_Two_Dimensional_Char_Pointer_Array ;

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T05:13:03.520

其他人已经很好地解释了它，但这里有一个示例可以阐明使用创建动态大小的多维数组`new`：

```
int rows = 20;
int columns = 30;

// the following is essentially just an array of int pointers
int **pointer = new int*[rows]; 

// so, loop through the array creating the second dimension
for (int i = 0;i < rows;i++)
    pointer[i] = new int[columns]; 
```

# c# - 如何使用 LINQ to XML 从 XML 响应中分别获取所有子节点值？

> ID：12399635
> 
> 赞同：0
> 
> 时间：2012-09-13T04:57:41.043
> 
> 标签：c#, xml, linq, linq-to-xml

我的 XML 响应：

```
<Items>
<Item>
<ASIN>1212121</ASin>
 <ItemAttributes>
  <Title>aaaa</Title>
  </ItemAttributes>
  <Variations>
   <Item>
    <ItemAttributes>
     <color>Red</color>
     </ItemAttributes>
     </Item>
     Item>
    <ItemAttributes>
     <color>yellow</color>
     </ItemAttributes>
     </Item>
       Item>
    <ItemAttributes>
     <color>pink</color>
     </ItemAttributes>
     </Item>
      </Variations>
    </Item>
  <Item>
   ASIN>1211111</ASin>
 <ItemAttributes>
  <Title>bbb</Title>
  </ItemAttributes>
  <Variations>
   <Item>
    <ItemAttributes>
     <color>Green</color>
     </ItemAttributes>
     </Item>
      </Variations>
  </Item>
  </Items> 
```

在这里，我每页收到十个项目。我现在只需要获取每个项目的颜色。我使用了以下代码。

```
 var Color = xd.Descendants(ns + "Items").Elements(ns+"Item").Elements(ns + "Variations").Elements(ns + "Item").Elements(ns + "ItemAttributes").Elements(ns + "Color").Select(cl => new
        {
            clr = cl.Value
        }).ToList(); 
```

这个 Xml 返回所有 Item 的颜色。首先它是红色的。第二个是绿色的。它上升到第 10 项。现在我上面的 LINQ 代码为所有项目返回颜色。它返回为红色、黄色、粉红色、绿色。但我必须分别显示第一个项目（红色）的颜色。

最后，我必须显示 items->Item->Variations->Item->ItemAttributes->color Output: For First Item., Red,Yellow,Pink For second item, Green,..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:26:52.390

它仍然不是 100% 清楚你需要什么，但我怀疑它是这样的：

```
foreach (var item in xd.Descendants(ns + "Items").Elements(ns + "Item"))
{
    // Do anything you need on a per-item basis here
    Console.WriteLine("Got item: {0}", item.Element("ASIN").Value);
    var colors = item.Elements(ns + "Variations")
                     .Elements(ns + "Item")
                     .Elements(ns + "ItemAttributes")
                     .Elements(ns + "Color")
                     .Select(x => x.Value);
    foreach (var color in colors)
    {
        Console.WriteLine("  Color: {0}", color);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:55:33.617

尝试，

```
 var Color = xd.Descendants(ns + "Items").Elements(ns + "Item").Select(o => string.Join(",", o.Elements(ns + "Variations")
            .Elements(ns + "Item")
            .Elements(ns + "ItemAttributes")
            .Elements(ns + "Color")
            .Select(x => x.Value).ToArray())).ToList<string>(); 
```

# extjs - QTP 脚本无法识别组合框对象

> ID：12399638
> 
> 赞同：3
> 
> 时间：2012-09-13T04:57:49.000
> 
> 标签：extjs, combobox, qtp

我的项目完全是用 ExtJs 语言（不是 html）开发的。

请注意以下代码，我附上了我的窗口的屏幕截图。我希望选择组合框项（activePoll server1），如图所示。请建议。

```
Option explicit
Dim bro,url
bro="C:\Program Files\Internet Explorer\iexplore.exe"
url="-------------------------------------------------------"
invokeapplication(bro&" "&url)
With Browser("Certificate Error: Navigation")
With   .Page("Certificate Error: Navigation")
            .Link("Continue to this website").Click
End With
End With
With Browser("Title:=WebiPer.*.*")
With    .Page("title:=WebiPer.*")
    .WebEdit("name:=userName").Set "Sai"
    .WebEdit("name:=password").Set "Admin123"
       .WebList("name:=loginType").Select "ManagementApps"
    .WebButton("name:=Login").Click
End With
End With
With Browser("Title:=APS Configuration Client")
With    .Page("title:=APS Configuration Client")
        .WebEdit("name:=Image").Set"activePollServer1"
End With
End With 
```

![在此处输入图像描述](../Images/a46f5114f9421b07815429167c86d8e3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T15:25:13.423

Sai，考虑定义一个**虚拟对象**。您可以在（工具 > 虚拟对象 > 新虚拟对象）下找到它。在这里，您手动将无法识别的对象映射到 QTP 知道的标准对象。Web 插件附带的预定义对象中应该有一个组合框或列表框。

如果它不起作用，请尝试安装**Web Extensibility Add-In**。它扩展了对自定义 Web 控件和工具包（如 Dojo 和 Ajax）的支持。它也应该能够处理 ExtJS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T13:04:11.417

我遇到了这个问题，我们所做的如下所示。

如果 Dropdown 标识为 WebEdit，则

```
B().P().WebEdit().click
Sendkeys {"DOWN"}
Sendkeys {"DOWN"}
Sendkeys {"ENTER"} 
```

对我们来说，下拉列表被识别为 WebEdit，因此我们必须先单击它，然后必须使用键盘输入来选择值。

请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-02T05:58:23.933

一般在 ExtJs 开发者不直接使用组合框，他们分配了另一个 Element 用于数据选择，并且该元素只有在您单击 WebEdit 时才可见，因此请按照以下步骤选择您要选择的项目

**step1)**从 WebEdit 元素的属性中找到名称为“aria-owns”的属性名称，并将其值传递给变量 ex: varId = "list-1234"

**step2)**点击网页编辑

**step3)**点击元素 Browser().Page().WebElement("html id:=" & varId).WebElement("innertext:=" & *name of the Item to select* ).click

如果直接单击不起作用，则使用“ **Setting.WebPackage("ReplayType") = 2** ”选项

# android - 在所有活动中初始化文本到语音？

> ID：12399639
> 
> 赞同：0
> 
> 时间：2012-09-13T04:57:57.900
> 
> 标签：android, init, text-to-speech

让我们说 android 应用程序有不止一个活动和服务。他们每个人都使用文本到语音。我理解所有这些活动和服务都在同一个进程中运行，除非我们明确指定在单独的进程中运行。我们知道一次只有一个是活跃的。

如果是这种情况，我们是否有任何方法可以在一个活动中初始化文本到语音引擎并在其他活动/服务中引用它？

*例子*

```
ptrTTS = new TextToSpeech(this, this); 
```

在一项活动中并在其他活动/服务中引用它？

进行此初始化的最佳位置是什么？

`oncreate`是否安装了`oninit`TTS 的文本转语音或活动结果中的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:34:51.370

据我了解， TextToSpeech() 只是另一个类。如果你在一个活动中创建一个对象，当你移动到另一个活动时它会被销毁。
在活动之间共享同一个对象有不同的方法，比如通过意图传递它们。
在您的情况下，您可以创建一个定义 ptrTTS 的应用程序类，如下所示（但不确定它是否正确）：

```
class MyApp extends Application {

  private TextToSpeech ptrTTS;

  public TextToSpeech getObject(){
    return ptrTTS;
  }
  public TextToSpeech setObject(TextToSpeech obj){
    ptrTTS = obj;
  }
} 
```

然后你选择你的第一个 Activity 来初始化它。

```
class MainActivity extends Activity {

  @Override
  public void onCreate(Bundle b){
    ...
    TextToSpeech ptr = new TextToSpeech(this, this);
    MyApp appState = ((MyApp)getApplicationContext());
    appState.setObject(ptr);
    ...
  }
} 
```

# php - 追加后的ckeditor即时加载

> ID：12399640
> 
> 赞同：0
> 
> 时间：2012-09-13T04:58:03.740
> 
> 标签：php, javascript, jquery, ckeditor

我正在使用这种方式使用类方法在我的php页面中加载ckeditor：-

```
<script type="text/javascript" src="../ckeditor.js"></script>

<textarea class="ckeditor" name="editor0_en"><?=$name;?>hellohello</textarea> 
```

它适用于初始文本区域。然后，我尝试在单击按钮后附加更多具有相同类的 textarea，但是，这一次，我只能在没有加载 ckeditor 的情况下附加一个裸 textarea。

无论如何我可以在附加后加载ckeditor外观吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:04:18.517

附加 textarea 后使用

```
CKEDITOR.replace(element); 
```

它用 CKEditor 实例替换 textarea 或 DOM 元素 (DIV)。

[见官方文档](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.html#.replace)

# ios - 如何检测调度队列的类型（串行或并发）？

> ID：12399645
> 
> 赞同：12
> 
> 时间：2012-09-13T04:58:48.570
> 
> 标签：ios, grand-central-dispatch

队列是来自调用者的参数。我想知道输入 dispatch_queue_t 的类型（串行或并发），因为我会以不同的方式处理它。

是否可以？以及如何检查？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T01:06:00.033

保证在 GCD 中任意调用者提供的队列上序列化执行的惯用方法是创建自己的串行队列并将调用者提供的队列设置为队列的目标队列（使用 dispatch_set_target_queue(3) API）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-19T19:21:32.960

如果你所拥有的只是`dispatch_queue_t`“别人”传给你的，那么你就无法知道。该信息实际上对您隐藏。如果您自己创建队列，那么您可以使用`dispatch_queue_set_specific`and `dispatch_queue_get_specific`在队列的上下文数据中存储一个值，然后将其读回，但如果您不创建队列，那么您就不走运了。

FWIW，这种暗示了脆弱的设计/反模式。将队列作为参数意味着您将安排块以供将来在该队列上执行。从这个角度来看，队列是并发的还是串行的并不重要。

更重要的是，您的代码应该这样编写，无论它是在串行队列还是并发队列上执行都无关紧要。如果它使用共享资源，那么它应该同步对这些资源的访问，这样如果它要在并发队列上执行，对这些资源的访问将是安全的。相反，避免在串行队列上运行会成为问题的情况（即不要尝试通过使用`dispatch_sync`可能是串行的队列来实现递归锁。）

# safari - 如何在 Mountain Lion 10.8 的 Finder 中制作“下载”图标？

> ID：12399646
> 
> 赞同：9
> 
> 时间：2012-09-13T04:59:17.330
> 
> 标签：safari, osx-mountain-lion, finder

从 OS X 10.8 Mountain Lion 开始，Safari 在下载文件时会创建一个动态图标，如下所示：

：![在此处输入图像描述](../Images/db077bc95468e17118ae9889ec43fd87.png)

进度条显示进度，单击左上角的关闭按钮会告诉 Safari 停止下载。

有没有办法让第 3 方应用程序创建这种图标？

我想没有与 App Store 兼容的方法可以做到这一点，但我很好奇如何做到这一点/Safari 是如何做到这一点的，只是为了感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T16:01:51.247

我认为它是其中的一部分，`NSFileWrapper`您也许可以通过 App Store 做到这一点。我不知道。

```
NSFileWrapper *fw = [[NSFileWrapper alloc] initWithURL:fileURL,
                    // don't memory map, we only want to change the icon
                                               options:NSFileWrapperReadingWithoutMapping 
                                                 error:NULL];

[fw setIcon:updatedIcon]; 
```

请注意，`icon`并且`setIcon`是该`ApplicationKit`类别的一部分，而不是主要的 NSFileWrapper 实现`Foundation`：[https ://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSFileWrapper_AppKitAdditions/NSFileWrapperApplicationKitAdditions.html](https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSFileWrapper_AppKitAdditions/NSFileWrapperApplicationKitAdditions.html)

编辑：这就是你可以有一个进度条的方式。要制作关闭按钮，您需要`NSView`对图标的引用，就像您可以使用停靠图标一样。

编辑 2：WebKit 浏览器也这样做（不仅仅是 Safari），所以如果你挖掘源代码，你可能会找到它。

编辑 3：我认为它是由`NSURLDownload`. 如果您进行了真正动态生成下载内容的虚假下载，您可以自己使用该样式。不过，我不相信可以制作任意可点击的图标。

# ruby-on-rails - Rails 生成脚手架创建空白控制器

> ID：12399649
> 
> 赞同：1
> 
> 时间：2012-09-13T04:59:37.967
> 
> 标签：ruby-on-rails, controller, code-generation, activeadmin

最近几次我使用了“rails generate scaffold [ModelName]”，除了控制器是空白的之外，一切都已生成。它根本不包含任何方法。从其他来源复制它很容易，但我想知道发生了什么。

对我来说，这个应用程序的唯一独特之处在于它使用了 ActiveAdmin gem。

有什么建议可以让我再次按预期工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:02:33.707

+1 到 hajpoj，但您可以使用几个额外的步骤进行故障排除。

`rails generate scaffold_controller`给你什么？我的第一个建议是隔离控制器生成器并从那里开始。

之后，我实际上会在控制器生成点查看 Rails 生成器代码，然后从那里向后工作。这是（我相信）[入口点](https://github.com/rails/rails/blob/master/railties/lib/rails/generators/actions.rb#L185)，从那里，您可以按照代码找到失败的地方。显然，这不是最简单的方法，但可能会教你很多关于 Rails 内部的知识。

# sql - SQL将重复行计数为单行

> ID：12399650
> 
> 赞同：7
> 
> 时间：2012-09-13T04:59:38.373
> 
> 标签：sql

我有桌子

```
ID     State        District        StationCode        Status
---------------------------------------------------------------
 1    Gujarat       Banaskantha      12345               0 
 2    Gujarat       Banaskantha      12345               0
 3    M.P.          Bhopal           22315               1
 4    Gujarat       Banaskantha      12349               0
 5    Gujarat       Banaskantha      12345               1 
```

我需要像这样的结果

```
State      District       Active       InActive
-----------------------------------------------
Gujarat     Banaskantha      2            1
M.P.        Bhopal           0            1 
```

在这里，`Active` 和字段是基于或`Inactive`的字段的总和`Status``0``1`

这意味着这里`State`对于古吉拉特邦，曾经`three`发生`0`过，但是`two`对于`StationCode - 12345`. 这意味着它将被视为`One`.

我有如下查询

```
select distinct 
    state,
    District,
    SUM(
        Case 
        when Status=0 then 1 
        else 0 end
        ) AS Active,
    SUM(
        Case 
            when Status=1 then 1 
            else 0 
        end
        ) AS InActive 
from 
    Station_Master 
group by state, District 
```

但我无法将重复`StationCode`行计为单行。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:02:43.267

您可以唯一地过滤子查询中的行。尝试，

```
SELECT  DISTINCT state, district,
        SUM(CASE WHEN status = 0 THEN 1 ELSE 0 END) Active,
        SUM(CASE WHEN status = 1 THEN 1 ELSE 0 END) InActive
FROM (
        SELECT DISTINCT state,  district, StationCode, status 
        FROM  Station_Master
    ) a
GROUP BY state, district 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/18211/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T05:50:10.767

在从中获取数据之前，您应该在子查询中使用子查询`DISTINCT`或子句：`GROUP BY`

使用`DISTINCT`子句：

```
SELECT  DISTINCT state, district,
        SUM(CASE WHEN status = 0 THEN 1 ELSE 0 END) Active,
        SUM(CASE WHEN status = 1 THEN 1 ELSE 0 END) InActive
FROM (
        SELECT DISTINCT state,  district, StationCode, status 
        FROM  Station_Master
     ) A
GROUP BY state, district; 
```

使用`GROUP BY`子句：

```
SELECT 
    state,
    District,
    SUM(Case when Status=0 then 1 else 0 end) AS Active,
    SUM(Case when Status=1 then 1 else 0 end) AS InActive 
FROM
(
    SELECT state,District,StationCode,Status
    FROM Station_Master 
    GROUP BY state, District, Stationcode,Status
) A
GROUP BY state, District; 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/18211/12)

我还在表中添加了几条记录来检查[这个 SQLFiddle 中的查询。](http://sqlfiddle.com/#!2/9b5b8/2)并且工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T05:11:33.797

我认为这可能会解决您的问题。我不是 100% 确定语法，但如果你可以尝试一下，如果它不起作用，请告诉我，我可以尝试为你调整它。这个想法是使用 Group By 创建一个派生表，以首先消除您不想要的重复项，然后外部查询与您的原始查询相同 - 只是在派生表上。

```
SELECT Distinct 
  X.State, 
  X.District, 
  SUM(Case when X.Status=0 then 1 else 0 end) AS Active,
  SUM(Case when X.Status=1 then 1 else 0 end) AS InActive
FROM 
  (Select State, District, StationCode, Status
   From Station_Master 
   Group By State,District, StationCode, Status) as X
GROUP BY X.State, X.District 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T06:08:11.877

请使用以下 SQL：

```
declare @temptable table 
(
Id int,
state nvarchar(250),
District nvarchar(250),
StationCode nvarchar(250),
Status bit
)
Insert into @temptable values  (1,'Gujarat','Banaskantha','12345',0 )
Insert into @temptable values  (2,'Gujarat','Banaskantha','12345',0 )
Insert into @temptable values  (3,'M.P.','Bhopal','22315',1 )
Insert into @temptable values  (4,'Gujarat','Banaskantha','12349',0 )
Insert into @temptable values  (5,'Gujarat','Banaskantha','12345',1 )

select  tbl.state,tbl.District,SUM(cast(tbl.Status as int)) as Active ,(Count(*) -   
    SUM(cast(tbl.Status as int))) as InActive  
from (select distinct state,District,StationCode,Status from @temptable)as tbl 
group by tbl.state,tbl.District 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T05:04:35.597

首先检索 (State, District, Status) 的不同元组，然后在其上运行聚合查询，如下所示：

```
SELECT 
    a.state,
    a.District,
    SUM(
        Case 
        when a.Status=0 then 1 
        else 0 end
        ) AS Active,
    SUM(
        Case 
            when a.Status=1 then 1 
            else 0 
        end
        ) AS InActive 
from 
    (
        SELECT DISTINCT 
            state, 
            district, 
            status 
        FROM 
            Station_Master 
    ) as a
group by a.state, a.District 
```

# jqgrid - 错误“未捕获的异常：jqGrid - 没有这样的方法：addSubGridCell”

> ID：12399653
> 
> 赞同：0
> 
> 时间：2012-09-13T05:00:03.050
> 
> 标签：jqgrid

我正在使用 jqGrid-4.4.1，我收到错误“未捕获的异常：jqGrid - 没有这样的方法：addSubGridCell”有人能告诉我解决方法吗？我检查了“grid.formedit.js”，它也出现在我的 jquery.jqgrid.min.js 文件中

模块：

*   grid.base.js
*   jquery.fmatter.js
*   grid.custom.js
*   grid.common.js
*   grid.formedit.js

# c - 如何在c中编写替换函数

> ID：12399656
> 
> 赞同：-4
> 
> 时间：2012-09-13T05:00:21.760
> 
> 标签：c, replace

编写一个函数，该函数将返回一个值，其中`i`-th 字节`x`已被 替换`b`：

```
unsigned replace_f (unsigned x, int i, unsigned char b){

} 
```

前任：`replace_f(0x12345678, 2, 0xBC) --> 0x12BC5678`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:17:50.853

没试过，但这可以工作：

```
unsigned replace_f (unsigned x, int i, unsigned char b){
    char *c;

    c = (char *)&x;
    c[i] = b;
    return x;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T05:23:10.053

```
unsigned replace_f (unsigned x, int i, unsigned char b){
    unsigned char *place = (unsigned char*)&x;
    place[sizeof(int)-i] = b;
    return x;
} 
```

假设小端

# caching - 如何将缓存存储持久化到关系数据库

> ID：12399659
> 
> 赞同：2
> 
> 时间：2012-09-13T05:00:48.220
> 
> 标签：caching, jboss, infinispan

有没有办法将 infinispan 缓存存储中的缓存对象持久保存到关系数据库表中？我试图将其作为 Cacheloader 来执行。

```
 <loader class="org.infinispan.loaders.jdbc.stringbased.JdbcStringBasedCacheStore" fetchPersistentState="true" ignoreModifications="false" purgeOnStartup="false">
    <properties>
     <property name="stringsTableNamePrefix" value="ISPN_STRING_TABLE"/>
     <property name="idColumnName" value="ID_COLUMN"/>
     <property name="dataColumnName" value="DATA_COLUMN"/>
     <property name="timestampColumnName" value="TIMESTAMP_COLUMN"/>
     <property name="timestampColumnType" value="BIGINT"/>
     <property name="connectionFactoryClass" value="org.infinispan.loaders.jdbc.connectionfactory.PooledConnectionFactory"/>
     <property name="connectionUrl" value="jdbc:derby://localhost:1527/DB;create=true"/>
     <property name="userName" value="user"/>
     <property name="password" value="password"/>
     <property name="driverClass" value="org.apache.derby.jdbc.ClientDriver"/>
     <property name="idColumnType" value="VARCHAR(255)"/>
     <property name="dataColumnType" value="BLOB"/>
     <property name="dropTableOnExit" value="false"/>
     <property name="createTableOnStart" value="true"/>

    </properties>
 </loader> 
```

从此键和值存储在 ISPN_STRING_TABLE_TEST_STORE 中，其中`<`namedCache name="TEST_STORE">。它将 ID 列中的键和 DATA_COLUMN 中的值保存为 Blob。我想将此 Blob 包含数据放入关系数据库（不作为对象）。例如，当我将 Employee 对象放入缓存时，它应该将数据库表作为具有员工属性的员工表作为该表中的字段。（Emp Name，Age.. etc）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:29:56.723

[Infinispan Data Grid Platform Book](http://www.packtpub.com/infinispan-data-grid-platform/book)中有一个示例，它描述了如何使用 MySQL 作为关系数据库来配置**JdbcStringBasedCacheStore 。**在此示例中，连接 URL 中使用了数据源，但是根据您的需要调整它应该不难。希望它有所帮助。
问候

```
<loaders>
    <loader
        class="org.infinispan.loaders.jdbc.stringbased.JdbcStringBasedCacheStore"
        fetchPersistentState="true" ignoreModifications="false"
        purgeOnStartup="false">
        <properties>
            <property name="stringsTableNamePrefix" value="ISPN_STRING_TABLE" />
            <property name="idColumnName" value="ID_COLUMN" />
            <property name="idColumnType" value="VARCHAR(255)" />
            <property name="dataColumnName" value="DATA_COLUMN" />
            <property name="dataColumnType" value="TRUE" />
            <property name="timestampColumnName" value="TIMESTAMP_COLUMN" />
            <property name="timestampColumnType" value="BIGINT" />
            <property name="connectionFactoryClass"
                value="org.infinispan.loaders.jdbc.
    connectionfactory.PooledConnectionFactory" />
            <property name="connectionUrl" value="java:jboss/datasources/MySQLDS" />
            <property name="userName" value="xxxx" />
            <property name="password" value="xxxx" />
            <property name="driverClass" value="com.mysql.jdbc.Driver" />
            <property name="dropTableOnExit" value="true" />
            <property name="createTableOnStart" value="true" />
        </properties>
    </loader>
</loaders> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T18:18:18.140

事情似乎发生了变化。这似乎适用于 Infinispan 5.2 和 5.3。

```
 <loaders [...]>
      <stringKeyedJdbcStore
            xmlns="urn:infinispan:config:jdbc:5.2"
            fetchPersistentState="false"
            ignoreModifications="false"
            purgeOnStartup="false">
         <dataSource jndiUrl="java:jboss/datasources/MySQLDS" />
<!--
         <connectionPool connectionUrl="jdbc:mysql://[host][:port]/[database]"
                         username="xxxx"
                         password="xxxx"
                         driverClass="com.mysql.jdbc.Driver"/>
-->
         <stringKeyedTable dropOnExit="true"
                           createOnStart="true"
                           prefix="ISPN_STRING_TABLE">
            <idColumn name="ID_COLUMN" type="VARCHAR(255)" />
            <dataColumn name="DATA_COLUMN" type="BINARY" />
            <timestampColumn name="TIMESTAMP_COLUMN" type="BIGINT" />
         </stringKeyedTable>
      </stringKeyedJdbcStore>
   </loaders> 
```

使用 xmlns [`urn:infinispan:config:jdbc:5.2`](http://www.infinispan.org/schemas/infinispan-cachestore-jdbc-config-5.2.xsd)(schemaLocation at link)

# c# - 如何在 C# 命令中使用 LIKE 运算符？

> ID：12399661
> 
> 赞同：4
> 
> 时间：2012-09-13T05:00:59.553
> 
> 标签：c#, sql, sql-like

我需要在 Sql 命令中插入一个字符串

```
search.CommandText = "SELECT * FROM Contacts WHERE Name like ' + @person + % + '"; 
```

`LIKE`在命令中使用的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T05:04:31.870

应该：

```
SELECT * FROM Contacts WHERE Name like @person + '%' 
```

`@person`是一个参数 - 你不需要单引号。您只需要将它与`%`应该有引号的 连接起来。

记住：

*   您可以保留它`"SELECT * FROM Contacts WHERE Name like @person"`，并包含参数值`%`（C# 中的连接更容易理解）。
*   您可能还想转义字符串中已有的其他通配符：`%`、`_`和.`[``]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T05:03:25.563

使用语法：

```
SELECT column_name(s)
FROM table_name
WHERE column_name LIKE pattern 
```

该`"%"`符号可用于在模式之前和之后定义通配符（模式中缺少的字母）。

例如：

*   `LIKE '%xy'`会给你任何以'xy'结尾的东西
*   `LIKE '%xy%'`会给你任何包含'xy'的东西
*   `LIKE 'xy%'`会给你任何以'xy'开头的东西

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T05:03:40.953

你是这个意思吗？

```
searchPerson.CommandText = "SELECT * FROM Contacts WHERE Name LIKE '"+person+"%'"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T05:05:36.713

```
searchPerson.CommandText =  
   "SELECT * FROM Contacts WHERE Name like @person + '%'" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T05:05:37.470

```
searchPerson.CommmandText = "SELECT * FROM Contacts WHERE Name like '" + @person + "%'"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-29T05:10:42.183

```
select * from Contacts WHERE Name like '%' + '"+@person+"' + '%' 
select * from Contacts WHERE Name like '%' + '"+@person+"' 
select * from Contacts WHERE Name like '"+@person+"' + '%' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-12T08:17:20.970

这应该工作

```
"Select *  from customer where FirstName LIKE '"+TextBox1.Text + '%'+ "'   "; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-05T19:13:15.143

如果字段类型是 Nvarchar，请使用以下代码：

```
 "select * from Contacts where name like N'%"+person+"%'" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-05T15:58:34.700

仅供参考！

```
 string strQuery = "select Ac_Key from AccountDetails where (Ac_Name like '%'+@Ac_Name+'%');
 SqlCommand cmb1 = new SqlCommand(strQuery);
 cmb1.Parameters.AddWithValue("@Ac_Name", AccountName); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-05-18T13:32:24.640

“SELECT * FROM table_name like concat(@persons,'%')”

我用过。

# mysql - 另一个 MYSQL Join 问题

> ID：12399662
> 
> 赞同：0
> 
> 时间：2012-09-13T05:01:11.277
> 
> 标签：mysql, join

嗨，我真的很难让以下 sql 查询正常工作，如果我对此进行了混搭，我提前道歉，但我仍在学习 SQL 的全部高级领域。

这是我的代码...

```
"SELECT *,(((acos(sin((".$latitude."*pi()/180)) * 
sin((`latitude`*pi()/180))+cos((".$latitude."*pi()/180)) * 
cos((`latitude`*pi()/180)) * cos(((".$longitude."- `longitude`)*pi()/180))))
*180/pi())*60*1.1515) as distance 
FROM `locations`  l HAVING distance <= '".$distance."' JOIN 
(SELECT * users) u
ON (l.id = u.basic_location)
            WHERE u.id != A $AND2
            ORDER BY distance ASC" 
```

我不断收到以下错误消息...

```
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 
'JOIN (SELECT * users) u ON (l.id = u.basic_location) WHERE u.id' at line 1 
```

我已经尝试了很多这种组合，但我被难住了，正在寻找一些帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:06:06.923

1.  `JOIN`应该紧随`FROM tablename`其后`JOIN`
2.  你应该使用`WHERE`, 不是`HAVING`在这种情况下
3.  你应该`JOIN users u`，而不是子查询（在这种情况下它没有意义）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:08:44.710

试试这个

```
 "SELECT *,

        (((( SELECT 
        acos(
            sin((".$latitude."*pi()/180)) * 
            sin((`latitude`*pi()/180))+
            cos((".$latitude."*pi()/180)) * 
            cos((`latitude`*pi()/180)) * 
            cos(((".$longitude."- `longitude`)*pi()/180))
            ))*180/pi())*60*1.1515) as distance
    FROM `locations`  l )X
    JOIN users u
ON (X.id = u.basic_location)
WHERE u.id != A $AND2
AND distance <= '".$distance."'
ORDER BY distance ASC" 
```

变化

1 *)*`HAVING distance <=`需要`WHERE distance <=`修改为*_*

 *2）连接语法是：

```
SELECT t1.*
FROM Table1 t1
JOIN Table2 t2
ON t1.Id = t2.Id
Where t1.<Some condition>
AND t2.<some Condition> 
```

并不是

```
SELECT t1.*
FROM Table1 t1 Where t1.<Some condition>
JOIN Table2 t2
ON t1.Id = t2.Id
Where t2.<some Condition> 
```

如果您需要在加入之前从第一个表中进行过滤，请执行以下操作

```
SELECT X.*,Y.* 
FROM (SELECT * FROM Table1 t1 Where t1.<Some condition>) X
JOIN (SELECT * FROM Table2 t2) Y
ON X.Id = Y.Id
Where Y.<some Condition> 
```

希望你能理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T05:17:21.480

```
select * from
(SELECT *,
(((acos(sin((".$latitude."*pi()/180)) * 
sin((`latitude`*pi()/180))+
cos((".$latitude."*pi()/180)) * 
cos((`latitude`*pi()/180)) * 
cos(((".$longitude."- `longitude`)*pi()/180))))*
180/pi())*60*1.1515) as distance 
FROM `locations`  l  INNER JOIN 
`users` u
ON l.id = u.basic_location
WHERE u.id != A $AND2) derived_table dt
where dt.distance <= '".$distance."'
ORDER BY dt.distance ASC 
```*

# android - HTTPURLConnection - 400 错误请求

> ID：12399673
> 
> 赞同：2
> 
> 时间：2012-09-13T05:02:22.057
> 
> 标签：android, http, bad-request

我检查了这篇[文章](https://stackoverflow.com/questions/6341602/httpurlconnection-get-request-getting-400-bad-request)。但我仍然不明白逻辑错误可能是什么。我仍然收到此错误。我试图转储模拟器流量。但我仍然不明白问题可能是什么。

从流量转储中，这就是 Android 作为请求发送到服务器的内容。您也可以看到响应：

```
 GET /Authenticate/ HTTP/1.1
 Authorization: Basic asdfasdfasdfas

 Accept-Charset: UTF-8
 Host: www.domain.com
 User-Agent: Dalvik/1.4.0 (Linux; U; Android 2.3.3; sdk Build/GRI34)
 Connection: Keep-Alive
 Accept-Encoding: gzip

 neQPˆ? 6   6   RT 4VRT 5 E (
 »  @ÍCl¦'
 PÙ[    ˜ároP"8"  neQPI "  "  RT 4VRT 5 E
 ¼  @ËVl¦'
 PÙ[    ˜ároP"8«‹  HTTP/1.1 400 Bad Request
 Date: Thu, 13 Sep 2012 04:47:42 GMT
 Server: Apache/2.2.15 (CentOS)
 Content-Length: 310
 Connection: close
 Content-Type: text/html; charset=iso-8859-1

 <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
 <html><head>
 <title>400 Bad Request</title>
 </head><body>
 <h1>Bad Request</h1>
 <p>Your browser sent a request that this server could not understand.<br />
 </p>
 <hr>
 <address>Apache/2.2.15 (CentOS) Server at www.domain.com Port 80</address>
 </body></html>
 neQPé¬ 6   6   RT 4VRT 5 E (
 ½  @ÍAl¦'
 PÙ[    ™îároP"8 ,  neQPéË @   @   RT 5RT 4V E  (çØ@ @³-
 l¦'Ù[ Páro ™îP )E            neQPéË @   @   RT 5RT 4V E  (çÙ@ @³,
 l¦'Ù[ Páro ™ïP )D            neQPö“
  ©   ©   RT 5RT 4V E  ›k‹@ @¶Á

  ³ër,9Jr ‘Pÿÿ6B  WRTE   w  [   *  ¨­«º[ 09-13 04:47:41.822   446:0x1c7 D/400      ]
  text/html; charset=iso-8859-1Bad Request 
```

我不知道那些多余的字符是什么意思。但我试图从中找出问题所在。

这是基本代码：

```
String credentials = username + ":" + password;
byte[] toencode = null;
try {
    toencode = credentials.getBytes("UTF-8");
} catch (UnsupportedEncodingException e1) {
    e1.printStackTrace();
}
HttpURLConnection conn = null;
try {
    //Utilities.isNetworkAvailable(context);
    URL url = new URL(params[0]);   
    Log.d(params[0],"UR");  
    conn = (HttpURLConnection) url.openConnection();
    conn.setRequestProperty("Authorization", "Basic " + Base64.encodeToString(toencode, Base64.DEFAULT));
    conn.setRequestProperty("Accept-Charset", "UTF-8");
    conn.setRequestProperty("Host", "www.domain.com");
    conn.setRequestMethod("GET");
    conn.setDoOutput(true);

    String data = conn.getInputStream().toString();
    return data;
} 
```

有任何想法吗？

**更新**

我检查了 Webserver Logs 以查看请求是否命中服务器以及请求是否有任何问题。这是我从错误日志中看到的：

```
 [Thu Sep 13 10:05:24 2012] [error] [client 91.222.195.132] client sent HTTP/1.1 request without  hostname (see RFC2616 section 14.23): /Authenticate/
 [Thu Sep 13 23:11:57 2012] [error] [client 91.222.195.132] client sent HTTP/1.1 request without hostname (see RFC2616 section 14.23): /Authenticate/
 [Thu Sep 13 23:12:03 2012] [error] [client 91.222.195.132] client sent HTTP/1.1 request without hostname (see RFC2616 section 14.23): /Authenticate/ 
```

但是我正在为请求设置标头属性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:58:09.957

我自己想通了。这是设置标题的顺序问题。

编辑：我使用的订单。

```
URL url = new URL(strUrl);  
conn = (HttpURLConnection) url.openConnection();
conn.setRequestMethod("GET");
conn.setRequestProperty("Host", "myhost.com");
conn.setRequestProperty("Authorization", "Basic " + Base64.encodeToString(toencode, Base64.DEFAULT));
conn.setRequestProperty("User-Agent", "Mozilla/5.0 (Macintosh; U; PPC; en-US; rv:1.3.1)");
conn.setRequestProperty("Accept-Charset", "UTF-8");

conn.setConnectTimeout (5000) ; 
conn.setDoOutput(true); 
conn.setDoInput(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-05T17:56:38.370

我也遇到了这个问题，但是我通过更改代码来修复它，现在我正在使用以下代码行

```
 BufferedReader reader;
            StringBuffer buffer;
            String res = null;

            try {
                URL url = new URL(request_url);
                HttpURLConnection con = (HttpURLConnection) url.openConnection();
                con.setReadTimeout(40000);
                con.setConnectTimeout(40000);
                con.setRequestMethod("GET");
                con.setRequestProperty("Accept","application/json");
                con.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
                con.setDoInput(true);
                con.setDoOutput(true);

                int status = con.getResponseCode();
                InputStream inputStream;
                if (status == HttpURLConnection.HTTP_OK) {
                    inputStream = con.getInputStream();
                } else {
                    inputStream = con.getErrorStream();
                }
                reader = new BufferedReader(new InputStreamReader(inputStream));
                buffer = new StringBuffer();
                String line = "";
                while ((line = reader.readLine()) != null) {
                    buffer.append(line);
                }
                res = buffer.toString();
            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (ProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            return res; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:10:20.500

试试这个

```
static final String _url = "http://www.google.com";
static final String charset = "UTF-8";

// to build the query string that will send the message
private static String buildRequestString(String param1,
        String param2, String param3, String param4, String param5)
        throws UnsupportedEncodingException {
    String[] params = new String[5]; //customize this as per your need 
    params[0] = param1;
    params[1] = param2;
    params[2] = param3;
    params[3] = param4;
    params[4] = param5;

    String query = String.format(
            "uid=%s&pwd=%s&msg=%s&phone=%s&provider=%s",
            URLEncoder.encode(params[0], charset),
            URLEncoder.encode(params[1], charset),
            URLEncoder.encode(params[2], charset),
            URLEncoder.encode(params[3], charset),
            URLEncoder.encode(params[4], charset));
    return query;

}

public static void doSomething(String param1, String param2,
        String param3, String param4, String param5) throws Exception {
    // To establish the connection and perform the post request
    URLConnection connection = new URL(_url
            + "?"
            + buildRequestString(param1, param2, param3, param4,
                    param5)).openConnection();
    connection.setRequestProperty("Accept-Charset", charset);
    // This automatically fires the request and we can use it to determine
    // the response status
    InputStream response = connection.getInputStream();
    BufferedReader br = new BufferedReader(new InputStreamReader(response));
    // This stores the response code.
    // Any call to br.readLine() after this is null.
    responsecode = br.readLine();
    // And this logs the already stored response code
    Log.d("ServerResponse", responsecode);
    responseInt = Integer.valueOf(responsecode).intValue();
} 
```

# sql-server-2008 - 如何按日期检索记录忽略时间

> ID：12399674
> 
> 赞同：0
> 
> 时间：2012-09-13T05:02:24.770
> 
> 标签：sql-server-2008, datetime-format

我有一个表，其中包含日期/时间列，其值如`9/11/2012 11:50:08 AM`, `9/11/2012 4:06:19 PM`,`10/11/2012 4:06:19 PM`

如何检索该日期的记录`'9/11/2012'`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:03:40.430

这将返回`MM/dd/yyyy`

```
SELECT CONVERT(DATETIME, '9/11/2012 11:50:08 AM', 101); 
```

要进去`dd/MM/yyyy`试试这个：

```
SELECT CONVERT(DATETIME, '9/11/2012 11:50:08 AM', 103); 
```

有关更多信息，请参阅[CAST 和 CONVERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)以及[如何从字符串转换为日期时间？](http://www.sqlusa.com/bestpractices/datetimeconversion/)

**编辑：（**来自您的评论）

如果您的查询是这样的，`select * from table where Date like '9/11/2012%'`那么您需要为此进行转换`Date`。（假设您的`Date`列是`varchar`）

您的查询应该是：
如果`9/11/2012`是`MM/dd/yyyy`格式试试这个：

```
SELECT * FROM TABLE WHERE CONVERT(DATETIME, DATE, 101) = '9/11/2012' 
```

或者如果`9/11/2012`是`dd/MM/yyyy`格式试试这个：

```
SELECT * FROM TABLE WHERE CONVERT(DATETIME, DATE, 103) = '9/11/2012' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:38:16.337

我假设您的列是一`datetime`列，并且您想要获取特定日期的所有行。

在 SQL Server 2008 中，您可以将`datetime`列转换为最新。

```
select *
from YourTable
where cast(DateTimeCol as date) = '2012-09-11' 
```

`yyyy-mm-dd`如果您需要使用字符串文字，我建议您在 SQL Server 2008 中使用 dateformat来表示日期。

如果您可以使用日期参数，那就更好了。

```
select *
from YourTable
where cast(DateTimeCol as date) = @DateParam 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:40:05.970

```
select * from table where convert(date,date_col)='2012-09-11' 
```

# .htaccess - htaccess 重定向到新参数

> ID：12399675
> 
> 赞同：0
> 
> 时间：2012-09-13T05:02:27.017
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我想要一个 html 重定向到不同的 php 和参数，phps 在一个子目录中，例如，从 /subdir/index.php?thread=23-post=12 /subdir/ 到 showthread.php?topic=23&topic= 12\. 但是这不起作用：

```
RewriteRule ^/test/index\.php?thread=(.*)-post=(.*)$ /test/showthread.php?topic=$1&topic=$2 [R] 
```

有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:09:27.737

您无法匹配 a 中的查询字符串`RewriteRule`。您需要匹配 a 中的`%{QUERY_STRING}`var`RewriteCond`并使用`%`反向引用：

```
RewriteCond %{QUERY_STRING} ^thread=([^-]+)-post=(.*)$
RewriteRule ^/?test/index\.php$ /test/showthread.php?topic=%1&topic=%2 [L,R] 
```

请注意，您的规则将两件事映射到`topic`查询字符串参数。

# java - jboss 的 RepositoryClassLoader 相对于独立的自定义类加载器的优势

> ID：12399684
> 
> 赞同：0
> 
> 时间：2012-09-13T05:03:32.130
> 
> 标签：java, jboss, classloader, hotdeploy

在我的应用程序中，我希望开发 Java 自定义类加载器来强制热部署我的 Java 类。我想继续扩展 java.lang.ClassLoader。但是在讨论我同事的设计时建议使用 jboss 自定义类加载器（通过存储库类加载器）。在这两种情况下，我都必须编写类加载部分。但是 jboss 类加载器比我自己的自定义类加载器有什么优势呢？我找不到它。有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:08:08.583

You may want to have a look at "out-of-the-box" solutions like [JRebel](http://zeroturnaround.com/software/jrebel/) with essentially do this. The license is likely cheaper than reimplementing it.

# ruby-on-rails - 参数哈希的Rails问题

> ID：12399694
> 
> 赞同：0
> 
> 时间：2012-09-13T05:04:29.033
> 
> 标签：ruby-on-rails, ruby, arrays, hash, params

我需要将以前渲染的表格从我的视图中导出为 pdf。当我按如下方式构建哈希数组时：

```
__index = 0

@people.each do |p| %>
  @pdfdata[__index] = {                                
    [:name] => p.name.to_s,                         
    [:surname] => p.surname.to_s
    __index += 1
  end
end 
```

并将其发送到控制器以便将其导出为 pdf，如下所示：

```
hidden_field_tag(:pdfdata, @pdfdata) 
```

当我得到时，`params[:pdfdata]`除非我构建一个字符串解析器来相应地映射数据，否则我找不到方法......有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:02:20.080

稍微修改你的代码以获得

```
 @people.each_with_index do |p,i| %>
   @pdfdata[i] = {                                
    [:name] => p.name.to_s,                         
    [:surname] => p.surname.to_s}
  end 
```

并使用此 gem 创建隐藏的 has 字段

[https://github.com/brianhempel/hash_to_hidden_​​fields](https://github.com/brianhempel/hash_to_hidden_fields)

# javascript - Javascript动画数学

> ID：12399697
> 
> 赞同：0
> 
> 时间：2012-09-13T05:04:36.637
> 
> 标签：javascript, math, animation

我正在努力理解如此简单的数学，至少它看起来应该很简单。

我基本上是在尝试反映 jQuery 的`.animate`功能，但没有运气。

这是我到目前为止的简化版本：

```
var args = {
  speed: 1000, // 1 second.
  left: 65 // distance.
}, rot, step;

// Terrible math.
rot = step = (((args.left / args.speed) * 10) - 0.10);

var t = setInterval(function() {
  if(elem.style.left >= args.left) {
    clearInterval(t);
    return;
  }
  rot += step;
  elem.style.left = rot;
}, 10); 
```

请原谅任何不合逻辑的代码（或数学），我已经搞砸了好几个小时，完全失去了理智。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:26:53.657

编辑：

这是我会做的方式。

```
var start_time = Date.now();
// Get the starting time in milliseconds

var t = setInterval(function() {

    var delta_time = Date.now() - start_time;
    // Get time that has elapsed since starting

    if (delta_time >= 1000) {
        // if it's been a second

        clearInterval(t);
        // Stop the timer

        elem.style.left = args.left + 'px';
        // Set the element to exactly the value it should be (avoids having it set to a float value)

        return;
    }

    elem.style.left = delta_time * args.left / args.speed + 'px';
    // Move the element according to how much time has elapsed

}, 10);​ 
```

这种方法有几个优点。例如，您可以调整间隔以使其或多或少平滑，并且不会弄乱动画。

您的解决方案花费超过一秒钟的原因是因为您使用`setInterval`. `setInterval`不考虑您的代码运行所需的时间，因此总时间总是会增加一点。您可以通过使用增量计时（如我的示例）来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:24:26.907

好吧，它应该是

```
var args = { ... } 
```

假设您已正确设置了 elem，您将需要一个要设置动画的属性的内联样式。此外，您将需要解析样式，因为它附加了“px”，但您始终可以在区间函数中进行数学运算后添加它。

我在这里设置了一些东西，这样你就可以搞乱设置等等。

编辑：http: [//jsfiddle.net/mb4JA/2/](http://jsfiddle.net/mb4JA/2/)

edit2：这应该是一秒 [http://jsfiddle.net/mb4JA/4/](http://jsfiddle.net/mb4JA/4/)

最终答案 ;) [http://jsfiddle.net/mb4JA/10/](http://jsfiddle.net/mb4JA/10/)

您应该能够在其中设置任何速度，并让它在该秒数内进行动画处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:30:22.093

尝试使用 sin 和 cos 来计算旋转 像这样

```
newx = distance * Math.cos(direction) + x
newy = distance * Math.sin(direction) + y 
```

不确定，这会解决你的问题我猜你想做一个平滑的旋转

尝试将其作为一个可以工作的函数，我在你的数学中没有看到任何问题，

像这样

```
function move(elem) {

var left = 0

function frame() {

left++  // update parameters

elem.style.left = left  // show frame

if (left == 100)  // check finish condition
clearInterval(id)
}

var id = setInterval(frame, 10) // draw every 10ms
} 
```

# ios - 如何在 IOS 中播放正在下载的视频文件

> ID：12399699
> 
> 赞同：0
> 
> 时间：2012-09-13T05:04:39.103
> 
> 标签：ios, video-streaming

我被指派实现一个 iphone 应用程序，该应用程序可以从服务器下载视频文件，并在将视频文件写入磁盘时播放该视频；喜欢的东西

（电影播放器​​）<--读--[###### iphone flaskdisk ######]<--写---（下载）

我知道我会使用 HTTP 视频流播放远程视频流，但我需要的是视频文件在播放后保存在烧瓶内存中。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:20:40.797

如果您知道如何从 URL 播放视频，则可以轻松播放视频，同时在另一个线程上下载视频（如果您时间紧迫）...

或者，您可以创建自己的视频播放器来处理此功能。App Store 中的应用程序已经这样做了（查看任何视频下载器应用程序）

谢谢！

# .net - 如何获取从 Windows 资源管理器加载到我的应用程序中的自定义文件类型文件的文件名？

> ID：12399702
> 
> 赞同：0
> 
> 时间：2012-09-13T05:05:05.243
> 
> 标签：.net, vb.net, visual-studio-2010, deployment, file-type

在我的应用程序中，我有自己的自定义文件类型。我进行了设置，以便我的应用程序在我的应用程序外部单击它们时打开这种类型的文件。现在我的问题是：如何获取正在打开的文件的 SafeFileName？我知道那个变量 S 是我的文件名，尽管我只想得到没有位置的实际文件名。

```
 If (Environment.GetCommandLineArgs.Length > 1) Then

      Dim s As String = Environment.GetCommandLineArgs(1)

     ' Open file s

    End If 
```

我知道如果我使用的文件名是 OpenFileDialog.SafeFileName，那会给我 test123.txt 而不是 C:\Files\Test123.txt

在这种情况下我怎么能做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:31:56.720

这取决于返回的字符串的外观以及它是否是有效路径，如果它像您的示例，您可以使用System.IO 命名空间的[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename%28v=vs.100%29)方法。

```
Dim s As String = "C:\Files\Test123.txt"
Dim myFile As String = Path.GetFileName(s) 
```

# c# - 使用 AssemblyConfigurationEntry 在 PowerShell 中加载程序集问题

> ID：12399703
> 
> 赞同：2
> 
> 时间：2012-09-13T05:05:11.730
> 
> 标签：c#, powershell

我在将程序集加载到 .net 控制台应用程序中的 PowerShell 运行空间时遇到问题。

运行应用程序时，我收到以下错误：“找不到类型 [Test.Libary.TestClass]：确保已加载包含此类型的程序集。”

我尝试将程序集安装到 GAC 中，但似乎没有任何区别。我似乎在 AssemblyConfigurationEntry 类上找不到太多文档，因此感谢您提供任何帮助。

控制台应用程序：

```
namespace PowerShellHost
{
    class Program
    {
        static void Main(string[] args)
        {
            string assemblyPath = Path.GetFullPath("Test.Library.dll");

            RunspaceConfiguration config = RunspaceConfiguration.Create();

            var libraryAssembly = new AssemblyConfigurationEntry("Test.Library, Version=1.0.0.0, Culture=neutral, PublicKeyToken=d7ac3058027aaf63", assemblyPath);
        config.Assemblies.Append(libraryAssembly);

            Runspace runspace = RunspaceFactory.CreateRunspace(config);
            runspace.Open();

            PowerShell shell = PowerShell.Create();
            shell.Runspace = runspace;

            shell.AddCommand("New-Object");
            shell.AddParameter("TypeName", "Test.Libary.TestClass");

            ICollection<PSObject> output = shell.Invoke();
        }
    }
} 
```

Test.Library.dll：

```
namespace Test.Library
{
    public class TestClass
    {
        public string TestProperty { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:01:50.000

您可以`Add-Type`从脚本调用来完成此操作。

```
PowerShell shell = PowerShell.Create(); 

shell.AddScript(@"
Add-Type -AssemblyName Test.Library

$myObj = New-Object Test.Library.TestClass
$myObj.TestProperty = 'foo'
$myObj.TestPropery
"); 

ICollection<PSObject> output = shell.Invoke(); 
```

如果您的 DLL 在 GAC 中，这应该可以工作。否则，当调用`Add-Type`而不是 时`-AssemblyName Test.Library`，您将需要使用`-Path c:\path\to\Test.Library.dll`

# python - selenium web 驱动程序不使用自定义首选项打开 Firefox

> ID：12399704
> 
> 赞同：3
> 
> 时间：2012-09-13T05:05:18.660
> 
> 标签：python, selenium, firefox, selenium-webdriver

尝试使用 selenium 2 使用已安装的插件打开 Firefox，但始终使用具有预定义首选项的默认 Firefox 配置文件打开

```
from selenium import webdriver
driver = webdriver.Firefox() 
```

上述代码行使用默认配置文件启动 Firefox。如何让它以用户指定的偏好启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:21:48.567

您可以使用以下内容使用自定义配置文件启动它：

```
profile = FirefoxProfile("path.to.profile")
driver = webdriver.Firefox(profile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:10:30.507

不需要设置配置文件，它可以自动创建，你只需要插件的路径，例如：

```
 string firebugPath = "C:\\Users\\Administrator\\AppData\\Roaming\\Mozilla\\Firefox\\Profiles\\x7nutq33.default\\extensions\\firebug@software.joehewitt.com.xpi";
        FirefoxProfile profile = new FirefoxProfile();       
        profile.AddExtension(firebugPath);
        Driver = new FirefoxDriver(profile); 
```

# mysql - 如何在 CASE WHEN 的 ELSE 中查询？

> ID：12399705
> 
> 赞同：0
> 
> 时间：2012-09-13T05:05:30.860
> 
> 标签：mysql, case

我当前的查询在 CASE WHEN 之外工作得很好：

```
select *, timestampdiff(DAY, from_unixtime(laststaffreplytime, '%Y-%m-%d'), 
curdate()) from swtickets; 
```

但是，当它被放置在 CASE WHEN 的 ELSE 中时，该列会生成所有空值：

```
SELECT *, CASE laststaffreplytime
WHEN 0 THEN 'No Response' 
ELSE (timestampdiff(DAY, from_unixtime(laststaffreplytime, '%Y-%m-%d'), 
curdate())) END as LastContact from swtickets; 
```

关于为什么这个查询只返回空值的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:35:06.057

CASE 运算符必须能够返回单一数据类型——您的示例在一种情况下返回字符串，在另一种情况下返回整数。我*认为*这不应该将结果转换为 NULL——我希望在这种情况下整数将表示为字符串——但 MySQL 一切皆有可能:)

尝试将“无响应”更改为固定整数值，例如 -1，以查看是否会更改结果。

从手册：

> CASE 表达式的返回类型是所有返回值的兼容聚合类型，但也取决于使用它的上下文。如果在字符串上下文中使用，结果将作为字符串返回。如果在数字上下文中使用，结果将作为十进制、实数或整数值返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:21:14.037

```
SELECT *, CASE laststaffreplytime
WHEN '0' THEN 'No Response' 
ELSE (timestampdiff(DAY, from_unixtime(laststaffreplytime, '%Y-%m-%d'), 
curdate())) END as LastContact from swtickets; 
```

# ruby - 如何使用 Watir Ruby Gem 从帧中进行选择

> ID：12399706
> 
> 赞同：1
> 
> 时间：2012-09-13T05:05:32.093
> 
> 标签：ruby, exception, watir, frames, frameset

尝试选择列表元素的选项时，我尝试执行以下操作：

```
myvar=ie.select_list(:id, 'myid').option(:text, 'mytext').select 
```

但是由于某种原因，当我在 irb 中使用 Watir 访问网站并尝试操纵任何项目时，我得到了这个异常。

```
Watir::Exception::UnknownObjectException: Unable to locate element...etc 
```

我正在浏览器中查看页面，但使用 .html 未显示完整页面。看起来页面的其余部分被隐藏了，我不知道如何进入/解决这个问题。

```
irb(main):011:0> ie.html
=> "<HTML><HEAD><TITLE>My Title</TITLE>\r\n
<SCRIPT language=JavaScript type=text/javascript src=\"../../script.js\"></SCRIPT>\r\n</HEAD><FRAMESET id=mainFrameSet name=mainFrameSet rows=100%,0%><FRAME id=frmMain src=\"DefaultT.cfm?ID=2197024\" name=frmMain><FRAME id=frmHidden src=\"Dummy.html\" name=frmHidden scrolling=no></FRAMESET></HTML>" 
```

**编辑：** 回想起来，我已经更改了标题，以便更准确地解决我遇到的问题。新的服务员用户很难找到关于 Watir 和 Frames 的信息。最初的标题类似于“在加密站点上使用 Watir”。我已经**认真**编辑了这个问题，以了解我所问问题的本质。我非常感谢那些试图回答一个对 Web 和一般编程知识很少的新 Ruby 用户的胡言乱语的人。如有必要，请参阅以前的修订。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:13:00.923

根据您添加的 html，您的网页正在使用框架。与其他元素不同，您必须明确指定要使用的框架。

您可能想要 id 为“frmMain”的框架，因此请尝试：

```
myvar=ie.frame(:id, 'frmMain').select_list(:id, 'myid').option(:text, 'mytext').select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:56:19.233

我的猜测是，当您尝试访问该元素时，该元素不在页面上。

试试这个（请注意`when_present`）：

```
myvar=ie.select_list(:id, 'myid').when_present.option(:text, 'mytext').select 
```

更多信息：[http ://watirwebdriver.com/waiting/](http://watirwebdriver.com/waiting/)

# c# - 如何使用 C#4.0 从 xml 内容中删除特定的 xml 元素？

> ID：12399712
> 
> 赞同：1
> 
> 时间：2012-09-13T05:05:50.960
> 
> 标签：c#, .net, xml-parsing, linq-to-xml

这是xml内容。

```
<w:tbl xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
  <w:tr>
      <w:tc>
         <w:p>
           <w:r><w:t>1</w:t></w:r>
         </w:p>
         <w:p /> <!-- needs to remove -->
         <w:p /> <!-- needs to remove -->
       </w:tc>
       <w:tc>
         <w:p>
           <w:r><w:t>2</w:t></w:r>
         </w:p>
         <w:p />  <!-- needs to remove -->
         <w:p />  <!-- needs to remove -->
       </w:tc>
  </w:tr>
  <w:tr>
      <w:tc>
         <w:p>
           <w:r><w:t>3</w:t></w:r>
         </w:p>
         <w:p />  <!-- needs to remove -->
         <w:p />  <!-- needs to remove -->
       </w:tc>
       <w:tc>
         <w:p>
           <w:r><w:t>4</w:t></w:r>
         </w:p>
         <w:p />  <!-- needs to remove -->
         <w:p />  <!-- needs to remove -->
       </w:tc>
  </w:tr>
</w:tbl> 
```

实际上这个xml内容是由html到ooxml转换器[HtmlToOpenXml.dll]生成的。但是它错误地`<w:p>`在每个元素的末尾添加了两个元素。所以`<w:tc>`，我想`<w:p>`从转换器生成的xml内容中删除这些元素。我有字符串格式的 xml 内容。

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T05:12:47.617

你可以只使用字符串替换吗？

```
xmlString.Replace("<w:p />", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:50:13.777

如果一切都那么简单，我强烈建议使用@sylon 的答案。无论如何，这是一个如何使用 LINQ to XML 执行此操作的简单示例：

```
 XElement x = XElement.Load("In.xml");
        string prefix = "w";
        XNamespace w = x.GetNamespaceOfPrefix(prefix);
        var ds = x.Descendants(w + "p")
                  .Where(d => string.IsNullOrEmpty(d.Value));
        ds.Remove();
        x.Save("Out.xml"); 
```

`Where`如果您需要删除一些更具体的标签，该子句可以包含更具体的条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T05:53:42.343

```
string xmlString = @"<w:tbl xmlns:w='http://schemas.openxmlformats.org/wordprocessingml/2006/main'>
      <w:tr>
          <w:tc>
             <w:p>
               <w:r><w:t>1</w:t></w:r>
             </w:p>
             <w:p /> <!-- needs to remove -->
             <w:p /> <!-- needs to remove -->
           </w:tc>
           <w:tc>
             <w:p>
               <w:r><w:t>2</w:t></w:r>
             </w:p>
             <w:p />  <!-- needs to remove -->
             <w:p />  <!-- needs to remove -->
           </w:tc>
      </w:tr>
      <w:tr>
          <w:tc>
             <w:p>
               <w:r><w:t>3</w:t></w:r>
             </w:p>
             <w:p />  <!-- needs to remove -->
             <w:p />  <!-- needs to remove -->
           </w:tc>
           <w:tc>
             <w:p>
               <w:r><w:t>4</w:t></w:r>
             </w:p>
             <w:p />  <!-- needs to remove -->
             <w:p />  <!-- needs to remove -->
           </w:tc>
      </w:tr>
    </w:tbl>";

XDocument doc = XDocument.Parse(xmlString);
doc.Root.Descendants().Where(d => d.IsEmpty && !d.HasAttributes).Remove(); 
```

# android - MediaRecorder 实例未释放

> ID：12399715
> 
> 赞同：2
> 
> 时间：2012-09-13T05:06:38.633
> 
> 标签：android

我正在制作一个 android 应用程序来录制声音。为此，我一直在使用 MediaRecorder 类。

在任何设备上首次录制时，录制成功。但是下次就不行了。

如果我在另一台机器上尝试该代码，则录制成功。是不是因为 MediaRecorder 实例没有被应用程序释放，即使我正在调用方法`release()`。

这是我的代码-

```
 public class NewClass extends Activity {
private static String sFileName = null;
private static String sFileNameMSD = null;
private static String sPlayFile = null;
public MediaRecorder mRecorder = null;
private String mPn_id;
private String mDescription;
private String mTask_flag;
private String mPatient_name;
private String mPatient_id;
private String mIs_upload = "N";
private Context mContext;
Button btnStart;
Button btnStop;
private int mReuqestcode;
NewClass myActivity;
SeekBar seekBar;
int totalTime;
private final Handler handler = new Handler();
private final String FILE_EXTENTION_AMR = ".amr";
private final String FILE_EXTENTION_MSD = ".msd";
protected boolean recodeFlag = false;;
private static final String TAG = GridAllActivity.class.getName();

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.transcriptionrecord_activity);
    mContext = this;
    myActivity = this;
    Main.setTitle(myActivity, mContext);

    Thread.setDefaultUncaughtExceptionHandler(new CustomExceptionHandler(
            mContext));
    TextView txtTitle = (TextView) findViewById(R.id.txt_Title1);
    txtTitle.setText("Transcription");
    TextView txtOption = (TextView) findViewById(R.id.txtOptionName);
    TextView txtPatientName = (TextView) findViewById(R.id.txtPatientName);
    setProperty();
    txtOption.setText("" + mDescription);
    txtPatientName.setText("" + mPatient_name);
}
private void onRecord(boolean start) throws SettingNotFoundException {
    if (start) {
        startRecording();
    } else {
        stopRecording();
        }
}

private void startRecording() throws SettingNotFoundException {
    mRecorder = new MediaRecorder();

    mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mRecorder.setOutputFormat(MediaRecorder.OutputFormat.RAW_AMR);
    mRecorder.setOutputFile(sFileName);
    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    try {

        mRecorder.prepare();

        mRecorder.start();
    } catch (IOException e) {

        recodeFlag=true;
        Log.e("1", "prepare() failed");
        e.printStackTrace();
    }

}

private void stopRecording() throws SettingNotFoundException {

    mRecorder.stop();
    mRecorder.release();
    Log.d("1", "mRecorder released");
    mRecorder = null;
    System.gc();
}

public void setRecordPath() throws IOException {

    sFileName = Environment.getExternalStorageDirectory().getAbsolutePath();

    sFileName += Global.creteFolderPath("IMSEMR" + mTask_flag + "_"
            + mPn_id + FILE_EXTENTION_AMR);
    sFileNameMSD = "IMSEMR" + mTask_flag + "_" + mPn_id
            + FILE_EXTENTION_MSD;
    String state = android.os.Environment.getExternalStorageState();
    if (!state.equals(android.os.Environment.MEDIA_MOUNTED)) {
        Global.alertbox("", "SD Card is not mounted.", mContext);
        throw new IOException("SD Card is not mounted.  It is " + state
                + ".");
    }

    File directory = new File(sFileName).getParentFile();
    if (!directory.exists() && !directory.mkdirs()) {
        directory.mkdirs();
        throw new IOException("Path to file could not be created.");
    }

}

public void setRecodingLayout() {

    btnStop.setEnabled(false);
    try {
        btnStart.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                boolean mStartRecording = true;
                try {
                    btnStop.setEnabled(true);
                    btnStart.setEnabled(false);
                    onRecord(mStartRecording);

                } catch (SettingNotFoundException e) {
                    e.printStackTrace();
                }

            }
        });         
                    btnStop.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                try {
                boolean mStartRecording = false;
                try {
                    onRecord(mStartRecording);
                } catch (SettingNotFoundException e) {
                    e.printStackTrace();
                }

            } catch (SQLiteException e) {
                // TODO: handle exception
            } catch (Exception e) {
                // TODO: handle exception
            }
                        }
        });

    } catch (NullPointerException e) {

    }
}

public void setProperty() {
    Bundle bundel = getIntent().getExtras();
    mReuqestcode = (Integer) bundel.get("REQUEST_CODE");
    // property for Record
    if (mReuqestcode == 1) {
        mPn_id = (String) bundel.get("PN_ID");
        mDescription = (String) bundel.get("DESCRIPTION");
        mTask_flag = (String) bundel.get("TASK_FLAG");
        mPatient_id = (String) bundel.get("PATIENT_ID");
        mPatient_name = (String) bundel.get("PATIENT_NAME");
        btnStart = (Button) findViewById(R.id.btnStart);
        btnStop = (Button) findViewById(R.id.btnStop);
        btnStop.setEnabled(false);
        setRecodingLayout();
        try {
            setRecordPath();
        } catch (IOException e) {
            e.printStackTrace();
        }
     }
    }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:16:31.763

每次要录制时，您都需要创建一个新的媒体记录器实例（确保释放前一个）。

更新——对不起，如果你在对象上调用[释放](http://developer.android.com/reference/android/media/MediaRecorder.html#release%28%29)，你只需要创建一个新实例。否则你可以调用[reset](http://developer.android.com/reference/android/media/MediaRecorder.html#reset%28%29)，阅读这个：http: [//developer.android.com/reference/android/media/MediaRecorder.html](http://developer.android.com/reference/android/media/MediaRecorder.html)

示例：假设您有一个带有 2 个按钮、一个录制按钮和一个播放按钮的活动

```
public class MyRecordDemo extends Activity {
   private static final String PATH_NAME = "/sdcard/myfile.3gp"; //probably shouldn't hardcode this
   private Button mRecordButton, mStopButton;
   private MediaRecorder mRecorder = null;
   private boolean mIsRecording = false;
   public void onCreate(Bundle state) {
      super.onCreate(state);
      setContentView(R.layout.recorder_demo);
      mRecordButton = (Button) findViewById(R.id.record_btn);
      mStopButton = (Button) findViewById(R.id.stop_btn);
      mStopButton.setOnClickListener(new View.OnClickListener() {
         public void onClick(View view) {
             if (mIsRecording && mRecorder != null) {
               mRecorder.stop(); 
               mRecorder.release();
             }
          }
      });
      mRecordButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
          if (mIsRecording && mRecorder != null) {
              mRecorder.stop(); 
              mRecorder.release();
           }
           mRecorder = new MediaRecorder();
           mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
           mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
           mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
           mRecorder.setOutputFile(PATH_NAME);
           mRecorder.prepare();
           mRecorder.start()
        }

      });
   }

} 
```

# javascript - Chrome CSS 高度属性与 Firefox 不同？

> ID：12399719
> 
> 赞同：1
> 
> 时间：2012-09-13T05:06:52.337
> 
> 标签：javascript, html, css

我正在尝试显示一个实际上是 .png 图像的小块。

我使用 css 将小块的图像属性设置为 2% 宽度和 2% 高度。

此图像位于主体内部，设置为 100% 宽度和 100% 高度。

我的问题是，图像在 Firefox 中正确显示，例如，它看起来像一个正方形，但在 Chrome 中，它看起来像一个矩形。图像宽度似乎正确（2%），但高度似乎不正确。

这里有图片来说明我的例子：

火狐：（这就是我想要的）

![在此处输入图像描述](../Images/2959a59884e598b5d1162b124fa75696.png)

Chrome：（这是我不想要的。我希望它看起来像在 Firefox 中的样子）。

![在此处输入图像描述](../Images/6defb2275355535eadb5ce617578bf8b.png)

我正在使用带有javascript的html和css，这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="testlayout.css" />
<script>    

var x;

function myFunction()
{                   
    var img = new Image(); 
    img.src = 'bgimage.png';
    document.body.appendChild( img );                                       
};

</script>
</head>
<body onload="myFunction()"> 

</body>
</html> 
```

这是我的CSS：

```
body
{
margin:0; padding: 0; cellspacing: 0;
line-height: 0;  /* removes gap betwen rows */
height: 100%;
width: 100%;
}

img
{
height: 2%;
width: 2%;
} 
```

就这样。如果你们知道问题是什么，请告诉我，任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:11:12.240

Firefox 和 chrome 上的窗口大小可能不同。在这种情况下，使用像素值而不是百分比。

```
img 
{
    height: 50px;
    width: 50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:09:23.337

尝试将 a 添加`* {margin:0;padding:0}`到您的 css 文件的开头。

还考虑添加一个 CSS 重置

编辑：

现在我想了想，您确定 bgimage.png 存在于该目录中吗？您也可以尝试在您的 javascript 中设置`img.width`和`img.height`类似这样

[http://jsfiddle.net/2Uk53/1/](http://jsfiddle.net/2Uk53/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:04:56.343

您的 body 可能设置为`height: 100%`，但其父容器 (html) 不是。

# apache - Apache Click 中的会话过期处理 (Clickide-2.3.0.)

> ID：12399720
> 
> 赞同：1
> 
> 时间：2012-09-13T05:07:07.753
> 
> 标签：apache, session, click-framework

我是 Apache Click Framework 的新手，过去几天我一直在评估 Clickide-2.3.0.0。我被困在涉及会话超时的一个部分。

如果我想通过在我的服务器配置中设置会话超时间隔来处理会话到期（我使用的是 Apache Tomcat 7），则 Click 不提供与 ZK 等其他框架一样的支持（在 .zul 文件中指定的超时 uri )

到目前为止，我发现的所有解决方法都涉及使用会话对象或上下文操作在 Java 中显式地对验证和约束检查进行硬编码。框架端不提供支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T17:40:46.603

它的 Page 或 Control 有一个[Context](https://click.apache.org/docs/click-api/org/apache/click/Context.html)对象。Apache Click 文档有一些关于它的[示例。](https://click.apache.org/docs/user-guide/html/ch02s04.html)

# java - 使用字符包装器将字符串中的字母替换为保留原始大小写的新字母

> ID：12399724
> 
> 赞同：0
> 
> 时间：2012-09-13T05:07:54.213
> 
> 标签：java, character

试图弄清楚如何根据用户输入使用字符换行来改变字符串。如果字符串是“Bob 喜欢建造建筑物”并且用户选择用 T/t 替换所有字母 B/b，我需要如何对其进行编码以获得“Tom 喜欢 tuild tuildings”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:15:06.853

我认为有一个 String 类内置替换功能。

```
String text = "Bob loves to build building";
text = text.replace("B","T").replace("b","t"); 
```

像这样的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:18:28.253

一个简单的开始是了解`String.replace(char, char)`Java。

```
// This addresses the example you gave in your question.
str.replace('B', 'T').replace('b', 't'); 
```

然后，您应该将用户输入转换为 toReplace 和 replaceWith 字符，使用 ASCII 码找出大写/小写计数器部分，并为上述替换方法调用生成参数。

```
public class Main
{
    public static void main(String[] arg) throws JSONException
    {
        String str = "Bob loves to build building";
        Scanner scanner = new Scanner(System.in);
        char toReplace = scanner.nextLine().trim().charAt(0);
        char replaceWith = scanner.nextLine().trim().charAt(0);

        System.out.println(str.replace(getUpper(toReplace), getUpper(replaceWith)).replace(getLower(toReplace),
            getLower(replaceWith)));
    }

    private static char getUpper(char ch)
    {
        return (char) ((ch >= 'A' && ch <= 'Z') ? ch : ch - ('a' - 'A'));
    }

    private static char getLower(char ch)
    {
        return (char) ((ch >= 'A' && ch <= 'Z') ? ch + ('a' - 'A') : ch);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:24:46.697

您的问题不清楚（Bob -> Tom 中的“b”如何变成“m”？）。但是，要运行不区分大小写的替换，您应该执行以下操作：

```
String text ="Bob loves to build building";
String b = "b";

Pattern p = Pattern.compile(b, Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher(text);

String outText = m.replaceAll("T"); 
```

# c - 编译器如何解释 &a[0]+1 和 &a+1 计算

> ID：12399727
> 
> 赞同：2
> 
> 时间：2012-09-13T05:08:08.137
> 
> 标签：c

```
#include<stdio.h>
int main(){
    int a[5] = {0,1,2,3,4};
    int * ptr;
    ptr =(int *) &a;
    printf("\n&a:%u,&a[0]:%u,ptr:%u\n",&a,&a[0],ptr);
    ptr = (int*)(&a+1);
    printf("\n&a:%u,&a[0]:%u,ptr:%u\n",&a,&a[0],ptr);
    ptr = (int*)(&a);
    ptr = (int*)(&a[0]+4);
    printf("\n&a:%u,&a[0]:%u,ptr:%u,*ptr:%d\n",&a,&a[0],ptr,*ptr);
    return 0;
} 
```

> o/p：

```
&a:3213284540,&a[0]:3213284540,ptr:3213284540

&a:3213284540,&a[0]:3213284540,ptr:3213284560

&a:3213284540,&a[0]:3213284540,ptr:3213284556,*ptr:4 
```

在上面的代码中`&a`并`&a[0]`给出了相同的地址`3213284540`。但是这两种情况在添加时`1`会给出不同的地址。

```
&a[0]+1 => 3213284540 + 4     = 3213284544   [The value stored in this address is '1']
&a+1    => 3213284540 + (5*4) = 3213284560   [Goes Out of bounds of the array] 

&a+1 is equivalent to sizeof(array)+1\. 
```

> 但是编译器如何解释这个`&a[0]+1`和`&a+1`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T05:11:55.293

> 但是编译器如何解释 &a[0]+1 和 &a+1

它是指针算术，因此了解指向的类型和一件基本的事情总是很重要：添加`1`到指针使其指向某个“下一个”元素。

*   在您的示例`&a[0]`中是类型`int *`，因此添加 1**会将指针移动到下一个 int**。所以地址应该增加4/8字节左右，取决于`sizeof(int)`

*   但是，`&a`是类型`int (*)[5]`。因此，向其添加 1**会将指针移动到下一个数组**。实际上，地址应该增加`sizeof(a)`.

* * *

旁注：`%p`打印指针值时使用。

# c++ - xcode 4.4.1 c++11 头文件仍归档在 tr1 下吗？

> ID：12399739
> 
> 赞同：2
> 
> 时间：2012-09-13T05:08:45.700
> 
> 标签：c++, xcode, c++11, include-path

我创建了一个标准的 c++ 库项目并尝试包含`<tuple>`，但它似乎没有作为顶级标题包含在内，而是我仍然需要包含`<tr1/tuple>`. llvm 编译器方言设置为`-std=c++11`.

我是否正确假设即使 xcode 4.4 具有符合 c++11 的编译器，但它还没有附带符合 C++11 的标准库？

这个问题可能与[这个](https://stackoverflow.com/questions/9345271/xcode-4-3-and-c11-include-paths)有关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T05:19:46.823

库选择配置设置独立于编译器方言，在项目配置的“基本”视图下找不到（除非您对其进行编辑）。具体来说，该设置称为“C++ 标准库”，您可以在“全部”视图中找到它。

我怀疑您希望它与编译器方言设置一起出现（或成为其中的一部分）。

# css - 如何清除父css

> ID：12399743
> 
> 赞同：0
> 
> 时间：2012-09-13T05:09:18.707
> 
> 标签：css

假设您在下面定义了一个 Css 样式。

```
div
{
    background: url(themes/default/images/backgrounds/lh-navigation.png) repeat-x;
}
.child
{
    backgroud-color:#FFFFFF;
}

<Div id="tempDiv" class="child"></Div> 
```

我不希望将背景样式应用于元素 tempDiv。如何删除指定 div 元素的父样式。有什么办法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:17:25.497

在 CSS 中，子级从父级继承属性。您必须在子样式声明中覆盖父样式。在这种情况下，由于它是背景，因此您尝试覆盖您的 .child 样式声明将如下所示：

```
.child {
  background-image: none;
  background-color: #FFFFFF;
} 
```

正如上面其他人指出的那样，您还可以扩展选择器并为元素上的 id 属性编写新规则：

```
 #tempDiv {
   background: none;
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T05:11:49.600

尝试：

```
.child#tempDiv{
   background: none;
} 
```

注意 id 和 class 之间没有空格，因为它在同一个元素上。

# clojure - 如何在clojure中使用bean函数

> ID：12399757
> 
> 赞同：1
> 
> 时间：2012-09-13T05:11:03.347
> 
> 标签：clojure

`bean`当我在 bean 上使用它时，我真的不明白该函数是如何工作的。此处的代码会引发异常：

```
（导入 java.lang.management.ManagementFactory）
(def 运行时 (bean (ManagementFactory/getRuntimeMXBean))
（：名称运行时）

;; =>
类 clojure.core$bean$fn__5177$fn__5178 不能使用修饰符“public”访问 sun.management.RuntimeImpl 类的成员
  [抛出的类 java.lang.IllegalAccessException]

```

但该类确实有一个名为`getName()`. [http://docs.oracle.com/javase/6/docs/api/java/lang/management/RuntimeMXBean.html](http://docs.oracle.com/javase/6/docs/api/java/lang/management/RuntimeMXBean.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:33:30.670

你一定错过了，它就在那里。

> getName() 返回代表 runn 的名称 (import java.lang.management.ManagementFactory) (def runtime (bean (ManagementFactory/getRuntimeMXBean)) (:name runtime)

;; => Class clojure.core$bean$fn_ *5177$fn* _5178 无法使用修饰符“public”访问 sun.management.RuntimeImpl 类的成员 [抛出类 java.lang.IllegalAccessException]

但是该类确实有一个名为 getName() 的方法。[http://docs.oracle.com/javase/6/docs/api/java/lang/management/RuntimeMXBean.html](http://docs.oracle.com/javase/6/docs/api/java/lang/management/RuntimeMXBean.html)

Java 虚拟机。

编辑1：

[此问题与此处](http://markmail.org/message/cxyynkw5mvzlloxl#query%3a+page:1+mid%3acxyynkw5mvzlloxl+state%3aresults)的问题非常相似，对此的响应是[此处](http://markmail.org/message/cxyynkw5mvzlloxl#query%3a+page:1+mid%3aln4ksrdwuhmbpdwp+state%3aresults)。

`RuntimeImpl`返回的类`ManagementFactory.getRuntimeMXBean`只是包可见，但它实现了公共可见接口`RuntimeMXBean`。所以发生的事情是该函数`bean`试图调用类上的方法，`RuntimImpl`但它不能，因为类只是包可见。我认为如果它试图调用`getMethod`接口`RuntimeMXBean`它会起作用。

* * *

是的，这有效：

```
(def mx-bean (ManagementFactory/getRuntimeMXBean))
(def interface-method 
  (.getMethod RuntimeMXBean "getName" (into-array java.lang.Class [])))
(.invoke interface-method mx-bean (into-array [])) 
```

我不确定这是错误还是功能。我建议在 Clojure 邮件列表上询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T22:22:01.613

我认为这是由此处的错误捕获的： http://dev.clojure.org/jira/browse/CLJ-978?page=com.atlassian.jira.plugin.system.issuetabpanels: [all-tabpanel](http://dev.clojure.org/jira/browse/CLJ-978?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

点赞！

您可以使用可用的补丁滚动您自己的 bean 功能。

# git - git 遥控器是如何工作的？

> ID：12399758
> 
> 赞同：5
> 
> 时间：2012-09-13T05:11:08.583
> 
> 标签：git, version-control, git-push, git-pull, git-remote

如果我有一个受版本控制的主项目。

然后我为第三方插件添加一个遥控器

`git remote add myplugin <url>`

然后我可以做`git pull myplugin master`

它只是从该遥控器中提取更改。

现在假设我的项目设置为：

```
/
/index.php
/whatever 
```

遥控器设置为

```
/
/whatever.php 
```

当我拉入遥控器时，我最终得到

```
/index.php
/whatever
/myplugin
/myplugin/whatever.php 
```

这很好。

我想知道的是，如果我对 myplugin 进行更改，

如果我发出`git push myplugin master`什么推送？

它只会推送 myplugin 中的更改吗？还是远程充当第二个存储库并提交整个存储库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T05:32:31.207

只有在远程仓库已经包含（不是 juut ）之后`git pull myplugin`，你才会在 a 之后结束`/myplugin/whatever.php``/myplugin/whatever.php``whatever.php`

添加远程意味着提取其所有历史并将其合并到您的存储库中，或者将您的*所有*存储库中的提交推送到远程（不仅仅是来自本地“ `myplugin`”的更改）。

您所描述的（仅推送来自“myplugin”的更改，或仅在“myplugin”中提取提交）称为**[submodules](http://git-scm.com/book/en/Git-Tools-Submodules)**。

```
 git submodule add url/myplugin myplugin 
```

这将添加一个目录 myplugin，您会在其中找到第二个嵌套的 Git 存储库，其行为就像您在问题中描述的那样。
它不仅仅是一个新的遥控器，而是一个子模块 url，用于在子目录中包含特定 SHA1 的另一个 repo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:15:16.310

远程确实像第二个存储库，因为它是一个……当您发出推送命令时，GIT 会将已修改的内容复制到远程，有效地将其重新与您的本地存储库保持一致。

如果您要问的是推送是否会遍历子目录，那么答案是肯定的。

如果您询问是否将尚未提交到本地存储库的更改推送到远程，那么答案是否定的。

# asp.net - Spring.NET/NHibernate 如何使用 OpenSessionInView 支持多数据源？

> ID：12399762
> 
> 赞同：1
> 
> 时间：2012-09-13T05:11:25.980
> 
> 标签：asp.net, nhibernate, spring.net

我从[Spring.NET + NHibernate - Multiple (Distinct) Databases with OpenSessionInView](https://stackoverflow.com/questions/3457911/spring-net-nhibernate-multiple-distinct-databases-with-opensessioninview)中找到了一些提示，但它对我不起作用，需要你的帮助来确定出了什么问题。

我的项目基于 ASP.NET/Spring.NET(OpenSessionInView)/NHibernate，我们需要操作外部数据库，所以我们希望支持 OSIV 模式下的多数据源。

我们通过参考上述链接所做的事情：

（1）创建Spring.Data.NHibernate.Support.OpenSessionInViewModule的子类

```
namespace MyProject.Infrastructure.NHibernate
{
    public class ExtDbOpenSessionInViewModule : OpenSessionInViewModule
    {
    }
} 
```

(2) 在 web.config 中配置 OSIV

这是我对 Spring.NET 和 NHibernate 集成的配置：

```
<!-- Spring Web Support and OSIV for NHibernate -->
<add name="Spring" type="Spring.Context.Support.WebSupportModule, Spring.Web"/>
<add name="OpenSessionInViewOnLocalDb" type="Spring.Data.NHibernate.Support.OpenSessionInViewModule, Spring.Data.NHibernate32"/>
<add name="OpenSessionInViewOnExtDb" type="MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule, MyProject.Infrastructure"/>

<!-- NHibernate SessionFactory in OSIV-->
<appSettings>
    <add key="Spring.Data.NHibernate.Support.OpenSessionInViewModule.SessionFactoryObjectName" value="LocalDbSessionFactory"/>
    <add key="MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule.SessionFactoryObjectName" value="ExtDbSessionFactory"/>
</appSettings> 
```

当我们运行它时，系统说：

```
没有 Hibernate Session 绑定到线程，并且配置不允许在此处创建非事务性会话

```

我们发现任何 Repository 对象中的 SessionFactoryObject 都是空的。

日志是这样的：

```
2012-09-13 10:29:19,017 [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 试图关闭 SessionScope
2012-09-13 10:29:19,018 [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 只参与休眠会话 - 什么都不做
2012-09-13 10:29:19,030 [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 参与现有的 Hibernate SessionFactory
2012-09-13 10:29:19,033 [14] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 参与现有的 Hibernate SessionFactory
2012-09-13 10:29:19,043 [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 试图关闭 SessionScope
2012-09-13 10:29:19,055 [14] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 试图关闭 SessionScope
2012-09-13 10:29:19,062 [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 只参与休眠会话 - 什么都不做
2012-09-13 10:29:19,071 [14] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 只参与休眠会话 - 什么都不做
2012-09-13 10:29:19,117 [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 参与现有的 Hibernate SessionFactory
2012-09-13 10:29:19,122 [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 试图关闭 SessionScope
2012-09-13 10:29:19,126 [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 只参与休眠会话 - 什么都不做
2012-09-13 10:29:19,130​​ [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 参与现有的 Hibernate SessionFactory
2012-09-13 10:29:19,132 [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 试图关闭 SessionScope
2012-09-13 10:29:19,132 [13] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 只参与休眠会话 - 什么都不做
2012-09-13 10:29:21,347 [14] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 参与现有的 Hibernate SessionFactory
2012-09-13 10:29:21,441 [14] 信息 Spring.Aop.Framework.AutoProxy.InfrastructureAdvisorAutoProxyCreator [(null)] - 候选顾问 [ObjectFactoryTransactionAttributeSourceAdvisor: 建议对象'Spring.Transaction.Interceptor.TransactionInterceptor#0'] 被拒绝目标类型 [ASP.pages_sysmgmt_debug_aspx]
2012-09-13 10:29:21,457 [14] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 试图关闭 SessionScope
2012-09-13 10:29:21,458 [14] 调试 MyProject.Infrastructure.NHibernate.ExtDbOpenSessionInViewModule [(null)] - 只参与了休眠会话 - 什么都不做

```

哎呀！我们真的被它困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:00:14.497

在询问了您所指的问题并使用基于它的解决方案超过 2 年之后，我也许可以为您提供帮助。

虽然不理想，而不是 subclass `OpenSessionInViewModule`，但您需要[从 Spring.NET 的 source](https://github.com/SpringSource/spring-net/blob/master/src/Spring/Spring.Data.NHibernate/Data/NHibernate/Support/OpenSessionInViewModule.cs)复制它。执行此操作时，请确保对默认构造函数进行了一次更改。它看起来像这样：

```
public MyOpenSessionInViewModule() : 
       base("appSettings", typeof(OpenSessionInViewModule), false) 
```

基类调用的第二个参数的类型应该是您新复制的类 - 例如：

```
public MyOpenSessionInViewModule() : 
       base("appSettings", typeof(MyOpenSessionInViewModule), false) 
```

除此之外，您问题上的其他所有内容似乎都是正确的。让我知道这是怎么回事。

# php - 按列删除yiiframework模型中的记录

> ID：12399769
> 
> 赞同：1
> 
> 时间：2012-09-13T05:12:03.797
> 
> 标签：php, yii

当用户在 Whosloggedin 模型中按列用户名注销时，如何删除 yiiframework 中的记录？

表 - whosloggedin

```
CREATE TABLE `erc_whosloggedin` (
  `id` int(11) DEFAULT NULL,
  `username` varchar(50) DEFAULT NULL,
  `complete_name` varchar(95) DEFAULT NULL,
  `date` date DEFAULT NULL,
  `time` time DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

我尝试过这样的事情

```
 $whosloggedin=Whosloggedin::model()->find($users->username); 
    $whosloggedin->delete(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:25:01.163

传递给查找函数的参数是错误的。

在 Find 函数中，我们必须传递 $condition 和 $params 参数，默认情况下 $condition 为空且 $params 为空数组。

```
find($condition='',$params=array()) 
```

你的解决方案是：

```
$whosloggedin=Whosloggedin::model()->find('username=:username',array(':username'=>$users->username) ); 
$whosloggedin->delete(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:34:41.613

签出`beforeLogout()`和类`afterLogout()`的方法`CWebUser`。

您可以覆盖它们并在那里完成您的工作。不确定`afterLogout()`但肯定`beforeLogout()`仍然应该有对用户名的引用。

[http://www.yiiframework.com/doc/api/1.1/CWebUser#afterLogout-detail](http://www.yiiframework.com/doc/api/1.1/CWebUser#afterLogout-detail)

**另外（在旁注中）：**

您可能还想在用户表中查询尚未注销但会话超时的用户。

**关于查找用户：**

用于`findByAttributes()`单行或`findAllByAttributes()`多于 1 行。

```
$user = Whosloggedin::model()->findByAttributes(array(
    'username' => Yii->app()->user->name,
)); 
```

# android - Android 中的 FTP 和 SFTP

> ID：12399771
> 
> 赞同：4
> 
> 时间：2012-09-13T05:12:26.357
> 
> 标签：android, ftp, sftp

如何同时使用 FTP 和 SFTP 上传文件？

主要的是我可以拥有一个同时具有逻辑 FTP 和 SFTP 的库或 .jar 吗？

# jsf - 使用递归从数据库构建primefaces树

> ID：12399772
> 
> 赞同：1
> 
> 时间：2012-09-13T05:12:26.160
> 
> 标签：jsf, jsf-2, primefaces

我正在使用 primefaces 树组件。我在使用递归从数据库构建树时遇到问题。我从数据库中查看了这个问题[Primefaces tree](https://stackoverflow.com/questions/11189697/primefaces-tree-from-database)。尽管如此，我仍然无法构建树。我在 for 循环中有一个 getChildNodes 列表，因为它是递归函数，所以它被重复调用。我无法修复它。下面是我的代码。

实体

```
package com.model;

import java.io.Serializable;
import javax.persistence.*;
import javax.persistence.Id;

/**
 * The persistent class for the tree database table.
 * 
 */
@Entity
@Table(name = "TREE")
public class Tree implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name="NODE_ID")
    private int nodeId;

    @Column(name="NODE_DATA")
    private String nodeData;

    @Column(name="PARENT_ID")
    private int parentId;

    @Column(name="NODE_TYPE")
    private String nodeType;

    public Tree() {
    }

    public int getNodeId() {
        return this.nodeId;
    }

    public void setNodeId(int nodeId) {
        this.nodeId = nodeId;
    }

    public String getNodeData() {
        return this.nodeData;
    }

    public void setNodeData(String nodeData) {
        this.nodeData = nodeData;
    }

    public int getParentId() {
        return this.parentId;
    }

    public void setParentId(int parentId) {
        this.parentId = parentId;
    }

    public String getNodeType() {
        return nodeType;
    }

    public void setNodeType(String nodeType) {
        this.nodeType = nodeType;
    }

} 
```

托管豆

```
package com.managedBeans;

import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;

import org.primefaces.model.DefaultTreeNode;
import org.primefaces.model.TreeNode;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

import com.model.Tree;
import com.service.TreeService;

/**
 * @author ADMIN
 * 
 */

@Component("treeBeanRecursive")
@Scope("request")
public class TreeBeanRecursive {

    private TreeNode rootNode;

    @Autowired
    TreeService treeService;

    private List<Tree> childNodes;

    public TreeService getTreeService() {
        return treeService;
    }

    public void setTreeService(TreeService treeService) {
        this.treeService = treeService;
    }

    public TreeBeanRecursive() {

    }

    @PostConstruct
    public void init() {

        Tree root = treeService.getRoot();

        childNodes = treeService.getChildNodes();

        rootNode = getNodeWithChildren(root, null);

    }

    public TreeNode getNodeWithChildren(Tree t1, TreeNode parent){
        TreeNode newNode= new DefaultTreeNode(t1, parent);

        for (Tree tt : childNodes){
             TreeNode newNode2= getNodeWithChildren(tt, newNode);
        }

        return newNode;
   }

    public TreeNode getRootNode() {
        return rootNode;
    }

    public void setRootNode(TreeNode node) {
        rootNode = node;
    }

    public void showMessage() {
        treeService.showMessage();
    }

    public List<Tree> getChildNodes() {
        return childNodes;
    }

    public void setChildNodes(List<Tree> childNodes) {
        this.childNodes = childNodes;
    }

} 
```

childNodes 是除根节点之外的所有节点的列表。我从 spring service treeService.getChildNodes() 获取列表；

树.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <link type="text/css" rel="stylesheet" href="themes/bluesky/skin.css" />
    <style type="text/css">
.ui-panel {
    font-size: 85% !important;
    font-family: calibri !important;
    align: "center" !important;
}

.customProjectNode {
    background-image: url(./../images/tree/root.png) !important;
    width: 17px;
    height: 16px;
}
</style>
</h:head>
<h:body>

    <h:form id="form">

        <p:tree value="#{treeBeanRecursive.rootNode}" var="node" id="tree">
            <p:treeNode>
                <h:outputText value="#{node.getNodeData()}" />
            </p:treeNode>
            <p:treeNode type="#{node.getNodeType()}" icon="customProjectNode">
                <h:outputText value="#{node.getNodeData()}" />
            </p:treeNode>
        </p:tree>

    </h:form>

</h:body>
</html> 
```

我的表有以下数据。根节点父节点为 0。

**NodeID 数据 ParentID 节点类型**

“1”、“项目名称”、“0”、“项目名称”

'2'、'Node1'、'1'、'硬件'

'3'、'Node2'、'1'、'软件'

'4'、'Node3'、'1'、'软件'

'5'、'Node4'、'2'、'硬件'

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T11:32:30.663

最后，我能够解决我自己的问题。这是修复。更新了 ManagedBean

```
@Component("treeBeanRec")
@Scope("view")
public class TreeBeanRec {

    private TreeNode rootNode;

    private TreeNode selectedNode;

    @Autowired
    TreeService treeService;

    public TreeService getTreeService() {
        return treeService;
    }

    public void setTreeService(TreeService treeService) {
        this.treeService = treeService;
    }

    public TreeBeanRec() {

    }

    @PostConstruct
    public void init() {

        Tree root = treeService.getRoot();

        rootNode = new DefaultTreeNode("Root", null);

        TreeNode t1 = createTree(root, rootNode);

    }

    // Recursive function to create tree

    public TreeNode createTree(Tree treeObj, TreeNode rootNode) {
        TreeNode newNode = new DefaultTreeNode(treeObj, rootNode);

        List<Tree> childNodes1 = treeService.getChildNodes(treeObj.getNodeId());

        for (Tree tt : childNodes1) {
            TreeNode newNode2 = createTree(tt, newNode);
        }

        return newNode;
    }

    public TreeNode getRootNode() {
        return rootNode;
    }

    public void setRootNode(TreeNode node) {
        rootNode = node;
    }

} 
```

# ruby-on-rails - 如何使用 ruby mine 在 ruby on rails 的类中添加新的实例变量？

> ID：12399773
> 
> 赞同：0
> 
> 时间：2012-09-13T05:12:28.017
> 
> 标签：ruby-on-rails, rubymine

我在 ruby​​mine 中使用脚手架创建了一个类并进行了 db 迁移。现在我需要在同一个类中再添加一个实例变量（db 中的表中的一列）。如何在不破坏类的情况下使用 ruby​​mine（不是从命令行）执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:53:50.830

我不认为我理解这里的真正问题。

您是否不只是回滚当前迁移修改`db/migrate`(N) 中的迁移并添加所需的列，然后更新模型的视图（因为您使用了脚手架）？一旦你这样做，你将再次迁移。要么，要么您创建一个新的迁移来添加您想要的列 - 但是，鉴于您显然刚刚启动了这个应用程序，我认为没有理由仅仅为此添加额外的迁移。

# wordpress - 使用 WooCommerce 产品 CSV 导入套件导入属性/变量

> ID：12399774
> 
> 赞同：2
> 
> 时间：2012-09-13T05:12:32.063
> 
> 标签：wordpress, woocommerce

我已经进口了几种产品。我现在需要导入其中一些产品的变体（即尺寸、颜色、样式）。我查看了文档，特别是 Attributes 和 Product Variations 部分，但仍然不知道应该如何完成。

从文档的[Product Variations](http://wcdocs.woothemes.com/user-guide/extensions/product-csv-import-suite/#section-13)部分，据我了解，需要为变体导入单独的 CSV，并且我需要使用 *meta:attribute_pa_size*、*meta:attribute_pa_color* 和 *meta:attribute_pa_style*列标题。

但是，在[Attributes](http://wcdocs.woothemes.com/user-guide/extensions/product-csv-import-suite/#section-9)部分，它说我需要插入这些列：*attribute:attribute name*、 *attribute:pa_size* 和 *attribute_data:pa_size*

我的问题是，这些列在哪里插入？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T02:20:21.977

查看如何构建变体电子表格的最简单方法是创建具有变体的产品并使用 csv 导出选项进行变体。导出变体后，使用相同的电子表格导入新产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T17:02:09.390

我相信您现在已经弄清楚了，但是对于其他人，我已经发布了一个使用我自己的属性的示例。我的变量属性是大小（以英尺和英寸为单位）。

1.  在变量产品 CSV 中使用什么列标题
2.  在该列标题下使用什么值
3.  在变体 CSV 中使用什么列标题
4.  在该列标题下使用什么值

一个。可变产品 CSV 标题（**两列**）

```
attribute:pa_size

attribute_data:pa_size 
```

湾。可变 CSV 标头的值

```
2' 6'' x 4' 0''|3' 6'' x 5' 6''|5' 0'' x 8' 0''|8' 0'' x 10' 0'' 

0|0|1 <--*Important* Tells Attribute to be used for Variations 
```

C。可变 CSV 标头的值

```
meta:attribute_pa_size 
```

d。变化值 CSV 标题

```
2' 6'' x 4' 0'' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-22T21:23:46.120

删除 meta:attribute_pa_size 中的元 **元****，**它 应该是 **attribute_pa_size**单击**Import Variations**而不是**Import Products**，一旦您上传并提交它会给您一个地图字段。只需按照此处的说明进行操作：[https ://docs.woothemes.com/document/product-csv-import-suite-importing-product-variations/](https://docs.woothemes.com/document/product-csv-import-suite-importing-product-variations/)

# iphone - 安装 RestKit 时找不到 libRestKit.a

> ID：12399779
> 
> 赞同：0
> 
> 时间：2012-09-13T05:12:49.360
> 
> 标签：iphone, restkit

我跟着[https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x) 检查了[http://www.raywenderlich.com/13097/intro-to-restkit-tutorial](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial) 我试过一切。libRestKit.a 仍然是红色的。并且“#import”仍然显示：'RestKit/RestKit.h' 文件未找到。我应该怎么做？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:19:37.673

好的，我终于解决了。我在标题搜索路径设置上犯了一个错误。正确的是：“$(BUILT_PRODUCTS_DIR)/../../Headers”。我在'"'的格式上犯了一个错误。

# c++ - c++中的计算器加法功能

> ID：12399780
> 
> 赞同：0
> 
> 时间：2012-09-13T05:12:50.403
> 
> 标签：c++

所以我的程序制作了一个随机`(x,y)`数组，我想做的是制作`x`一个实数和`y`虚数并将它们相加：我的主程序

```
 #include "complx.h"                          
    int main(){
    const int n = 2;
    Complex a[n];                          
    getData(a,n);
    printArray(a,n);
    isort(a,n);
    printArray(a,n);
    complex_sum(a,n);
    return 0;
} 
```

它还打印和排列数组，但我感兴趣的是如何添加数组，例如我会使用 4 个数组`(x,y)(x,y)(x,y)(x,y)`。

这就是我获得随机数的方式

```
 void getData(Complex a[],int n){
    int  i;
    srand(time(0)); //If comment this out, get same sequence with each run.      
    for(i=0; i<n; i++){
        a[i].x = rand()%3;  //3 and 10 are just for testing isort                
        a[i].y = rand()%10;
    }
    return;
} 
```

这就是我尝试添加它的方式：

```
void complex_sum(Complex a[], int n){
    for (int i=0; i<n; i++)
      cout<<"("<<a[i].x+a[i].x<<")";
    cout<<endl;
    return; 
```

我被困在如何添加`(x,y)(x,y)= x+yi`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:17:10.397

**我与您尝试的方式并不完全一致；但是**要对存储在数组中的`n`数量求和并将其打印在屏幕上，您可以尝试以下操作：`complex numbers`

```
void complex_sum(Complex a[], int n){
    int real=0,img=0;
    for (int i=0; i<n; i++){
        real+=a[i].x;
        img+=a[i].y;
    }
    cout<<"("<<real << "+" << img << "i)";
} 
```

# java - 如何使用休眠更新复合主键值？

> ID：12399783
> 
> 赞同：3
> 
> 时间：2012-09-13T05:12:57.427
> 
> 标签：java, oracle, hibernate

我有一个表具有四个字段的复合主键，如用户 ID、名字、姓氏、密码，如果用户允许更改这四个值，我可以根据哪个条件使用休眠更新 UserData 表中的这些值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:33:56.443

当您正在更新复合主键时，我能看到的唯一方法是删除现有记录并插入新记录。

# php - PHP在错误的行上报告错误

> ID：12399789
> 
> 赞同：0
> 
> 时间：2012-09-13T05:13:19.103
> 
> 标签：php, error-handling

我有两个相同的文本文件，我在其中复制并粘贴完全相同（故意错误）的内容，如下所示：

```
<?
//error code
$sSQL =  "SELECT error";
fakefunction();
?> 
```

但我在浏览器的标签 #1 中得到了这个：

```
Fatal error: Call to undefined function fakefunction() in
/home/public_html/notes/textfileone.php on line 3 
```

我在浏览器的标签 #2 中得到了这个（与标签 #1 相同的浏览器）：

```
Fatal error: Call to undefined function fakefunction() in 
/home/public_html/notes/textfiletwo.php on line 4 
```

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:33:10.083

可能其中一个是用[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)保存的，而另一个没有？这将在内容中再增加一行。您的文本编辑器可能会在保存时添加它，但否则会隐藏它。

# javascript - Chrome 开发者工具（如何知道我在调用哪个 javascript 对象）

> ID：12399792
> 
> 赞同：1
> 
> 时间：2012-09-13T05:13:33.597
> 
> 标签：javascript, debugging, google-chrome, developer-tools

我首先在一行 JavaScript（在 JavaScript 类内）中创建一个断点。然后我一步一步转到***下一个函数调用 F11***。使用开发人员工具，我可以访问以下代码。

`var p = this.rotator.playing;`

在这种情况下，我知道***类内的变量***和***类名*** 但是我现在想知道我正在为该类***调用哪个对象。***有什么建议吗？

实际上我想`p`从 JavaScript 类之外修改变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T11:03:46.780

您可以为您不确定的每个对象添加一个监视表达式，并且当前使用的任何一个都将具有一个值。

不确定这是否是一个答案。这不是一个非常好的问题，它的措辞是这样的。

# xml - 如何显示自动插件更新的确认框？

> ID：12399793
> 
> 赞同：0
> 
> 时间：2012-09-13T05:13:51.133
> 
> 标签：xml, firefox, firefox-addon, xul

我按照“http://www.borngeek.com/firefox/automatic-firefox-extension-updates/”自动更新我的附加 xpi 文件。但它不会自动更新。只有当我尝试手动更新它时它才会更新。我需要将任何配置设置应用于 update.rdf 以进行自动更新吗？

我正在使用我的网络服务器来存储 xpi 文件以进行更新，并在 install.rdf 中使用带有更新密钥的 'http://' url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:24:35.087

如果在您进行手动更新检查时安装了更新，则更新正在运行。但是，Firefox 每天不会自动检查一次以上，而且这种检查要等到浏览器启动几分钟后才会发生。最后，Firefox 永远不会提示用户更新（这会很烦人），而是在重新启动浏览器时简单地安装更新。

唯一的例外是已禁用自动更新的扩展（错误的浏览器配置）。要检查您是否双击插件管理器中的扩展条目。有一个“自动更新”行，通常应该选择“默认”。

# android - Phonegap 原生插件与 sqlite 数据库通信

> ID：12399794
> 
> 赞同：0
> 
> 时间：2012-09-13T05:13:57.380
> 
> 标签：android, sqlite, cordova

我编写了用于将数据存储到 SQLITE 数据库中的 java 插件，但此连接 url 显示错误

是否需要任何权限？

```
package com.tricedesigns;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import org.apache.cordova.CordovaWebViewClient;
import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.sqlite.SQLite;

import com.sun.java.swing.plaf.windows.resources.windows;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteStatement;
import android.util.Log;
import android.view.Window;

public class HelloPlugin extends Plugin { 

 public static final String NATIVE_ACTION_STRING="nativeAction"; 
  public static final String SUCCESS_PARAMETER="laxman"; 
  SQLiteDatabase myDb = null;
  @Override
  public PluginResult execute(String action, JSONArray data, String callbackId) { 
         Log.d("HelloPlugin", "Hello, this is a native function called from PhoneGap/Cordova!"); 
 //only perform the action if it is the one that should be invoked 
  if (NATIVE_ACTION_STRING.equals(action)) { 
   String resultType = null; 
   try { 
    resultType = data.getString(0); 
    Connection connection = null;  
      ResultSet resultSet = null;  
       Statement statement = null;  

         try {  

            Class.forName("org.sqlite.JDBC");  
               //   webView.loadUrl("jdbc:sqlite:tempdb.db");
               connection = DriverManager  
                             .getConnection("jdbc:sqlite:tempdb.db");  

                      statement = connection.createStatement();  
                         System.out.println("dddddddddddddddddddddd");
                         resultSet = statement  
                                 .executeQuery("SELECT name FROM temp");  
                         while (resultSet.next()) {  
                             System.out.println(" NAME:"  
                                     + resultSet.getString("name"));  
                         }  
                     } catch (Exception e) {  
                         e.printStackTrace();  
                     } finally {  
                         try {  
                             resultSet.close();  
                             statement.close();  
                             connection.close();  
                         } catch (Exception e) {  
                             e.printStackTrace();  
                         }  
                     }  

                     System.out.println("result typeeeeeeeee"+data.getString(0));
               } 
               catch (Exception ex) { 
                     Log.d("HelloPlugin", ex.toString()); 
               } 
               if (resultType.equals(SUCCESS_PARAMETER)) { 
                     try {
                        return new PluginResult(PluginResult.Status.OK, "Yay, Success,First Plugin for android!!!"+data.getString(0));
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
               } 
               else { 
                     return new PluginResult(PluginResult.Status.ERROR, "Oops, Error :("); 
               } 
         } 
         return null; 
  } 
```

} `

**我得到了这个错误**

```
 09-13 09:53:44.387: W/System.err(330): java.sql.SQLException: opening db: 'tempdb.db': Read-only file system 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:21:59.443

在此处查看 Phonegap 插件

[https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:53:41.387

从 phonegap.js 中的 getDatabase 调用本机方法

# php - 子类方法的PHP命名空间范围？

> ID：12399795
> 
> 赞同：1
> 
> 时间：2012-09-13T05:14:12.403
> 
> 标签：php, namespaces

我在不同的命名空间中遇到了父/子类的问题，我想知道这是我使用不当，还是这是 PHP 命名空间的怪癖：

```
<?php
namespace myVendorName;
class MyParentClass {
  protected $args = array();
  function factory($class) {
    return new $class($this->args);
  }
}
?>

<?php
namespace myVendorName\subPackage;
class foo {
}
class bar extends \myVendorName\MyParentClass {
  function myFunc() {
    var_dump(new foo()); // Works (we're in the same namespace)
    var_dump($this->factory('foo')); // Doesn't work (no such class as myVendorName\foo)
    var_dump($this->factory('subPackage\foo')); // Works
  }
}
?> 
```

上面的代码不像我预期的那样工作。在`\myVendorName\subPackage\bar->myFunc()`方法中，我想`\myVendorName\subPackage\foo`上课。如果我只是在那里创建它，我可以只通过它的类名来创建它，因为命名空间是相同的。然而，这些类实际上更复杂，并且有一个工厂方法来创建它们。工厂方法是通用的，并且在根供应商命名空间中定义。并且`bar`该类不会覆盖该工厂方法；它只是继承它。但是，当通过名称引用类对象时，它似乎仍然在父命名空间中运行，而不是让该方法真正由子继承并在子命名空间中运行。

有没有办法让直接继承的父类方法使用孩子的命名空间，或者至少看看它是什么？还是我的每个子类都必须覆盖工厂方法来修复命名空间，并在自己内部调用父方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:21:36.720

正如 Passerby 所指出的，答案是 PHP 确实有一个`__NAMESPACE__`填充了当前命名空间的常量（尽管没有前导斜杠）。因此将工厂函数修改为：

```
function factory($class) {
  if ($class[0] != '\\') {
    $class = '\\'.__NAMESPACE__.$class; // If not a fully-qualified classname, prepend namespace
  }
  return new $class($args);
} 
```

按预期工作（在 PHP 文档中有[一个示例）](http://www.php.net/manual/en/language.namespaces.nsconstants.php#example-240)

# haskell - 使用功能依赖的关联参数限制

> ID：12399796
> 
> 赞同：2
> 
> 时间：2012-09-13T05:14:14.597
> 
> 标签：haskell, types, functional-dependencies

下面的函数 f，对于给定的类型“a”，采用类型“c”的参数。对于不同类型的“a”，“c”以不同的方式进行限制。具体来说，当“a”是任何 Integral 类型时，应该允许“c”是任何“Real”类型。当“a”是浮点数时，“c”只能是浮点数。

一种尝试是：

```
{-# LANGUAGE
MultiParamTypeClasses,
FlexibleInstances,
FunctionalDependencies,
UndecidableInstances #-}

class AllowedParamType a c | a -> c

class Foo a where
    f :: (AllowedParamType a c) => c -> a

fIntegral :: (Integral a, Real c) => c -> a
fIntegral = error "implementation elided"

instance (Integral i, AllowedParamType i d, Real d) => Foo i where
    f = fIntegral 
```

出于某种原因，GHC 7.4.1 抱怨它“无法推断出使用 fIntegral 引起的 (Real c)”。在我看来，功能依赖应该允许这种推论。在实例中，a 与 i 统一，因此通过功能依赖，d 应该与 c 统一，在实例中声明为“Real”。我在这里想念什么？

抛开功能依赖不谈，这种方法的表达能力是否足以强制执行上述限制，还是有更好的方法？我们只为 'a' 使用几个不同的值，因此会出现以下情况：

```
instance (Integral i, Real c) => AllowedParamType i c
instance AllowedParamType Float Float 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:58:09.337

一种可能更好的方法是使用约束种类和类型系列（我认为 GHC 扩展，需要 GHC 7.4）。这允许您将约束指定为类实例的一部分。

```
{-# LANGUAGE ConstraintKinds, TypeFamilies, FlexibleInstances, UndecidableInstances #-}

import GHC.Exts (Constraint)

class Foo a where
   type ParamConstraint a b :: Constraint
   f :: ParamConstraint a b => b -> a

instance Integral i => Foo i where
   type ParamConstraint i b = Real b
   f = fIntegral 
```

[编辑：经过进一步的实验，有一些细微之处意味着这不能按预期工作，特别`type ParamConstraint i b = Real b`是过于笼统。我现在不知道解决方案（或者是否存在）。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T20:16:46.427

好吧，这个一直在唠叨我。鉴于实例种类繁多，让我们全力以赴，摆脱源类型和目标类型之间的任何关系，而不是实例的存在：

```
{-# LANGUAGE OverlappingInstances, FlexibleInstances,TypeSynonymInstances,MultiParamTypeClasses #-}

class Foo a b where f :: a -> b 
```

现在我们可以将类型对与`f`它们之间的类型进行匹配，但是我们喜欢，例如：

```
instance Foo Int Int where f = (+1)
instance Foo Int Integer where f = toInteger.((7::Int) -)
instance Foo Integer Int where f = fromInteger.(^ (2::Integer))
instance Foo Integer Integer where f = (*100)
instance Foo Char Char where f = id
instance Foo Char String where f = (:[])  -- requires TypeSynonymInstances
instance (Foo a b,Functor f) => Foo (f a) (f b) where f = fmap f -- requires FlexibleInstances
instance Foo Float Int where f = round
instance Foo Integer Char where f n = head $ show n 
```

这确实意味着要避免大量显式类型注释`No instance for...`和`Ambiguous type`错误消息。例如，你不能做`main = print (f 6)`，但你可以做`main = print (f (6::Int)::Int)`

您可以使用所需的标准类型列出*所有*实例，这可能会导致大量重复，您可以点亮蓝色触摸纸并执行以下操作：

```
instance Integral i => Foo Double i where f = round -- requires FlexibleInstances
instance Real r => Foo Integer r where f = fromInteger -- requires FlexibleInstances 
```

注意：这并不**意味着**“嘿，如果你有一个整数类型，你可以使用这个方便的圆形函数免费`i`拥有一个实例”，它的意思是：“**每次**你有*任何*类型，它肯定是一个实例 。通过方式，我正在使用这个，所以除非你的类型是，否则我们会失败。” 例如，对于该实例来说，这是一个大问题。`Foo Double i`***`i``Foo Double i``round``i``Integral``Foo Integer Char`***

 ***这很容易破坏你的其他实例，所以如果你现在输入`f (5::Integer) :: Integer`你会得到

```
Overlapping instances for Foo Integer Integer
  arising from a use of `f'
Matching instances:
  instance Foo Integer Integer
  instance Real r => Foo Integer r 
```

您可以更改您的编译指示以包含 OverlappingInstances：

```
{-# LANGUAGE OverlappingInstances, FlexibleInstances,TypeSynonymInstances,MultiParamTypeClasses #-} 
```

所以现在`f (5::Integer) :: Integer`返回 500，很明显它使用的是更具体的`Foo Integer Integer`实例。

我认为这种方法可能对您有用，手动定义许多实例，仔细考虑何时完全疯狂地从标准类型类中创建实例。（或者，标准类型并不多，众所周知，`notMany choose 2 = notIntractablyMany`，因此您可以将它们全部列出。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:37:57.420

这是一个解决更普遍问题的建议，而不是您的具体问题（我首先需要更多细节 - 我保证稍后再检查）。我正在写它以防其他人正在寻找与您类似的问题的解决方案，我当然在过去，在我发现 SO 之前。当它可以帮助您尝试一种全新的方法时，SO 特别棒。

我以前的工作习惯是：

1.  引入一个多参数类型类（类型到处都是，所以......）
2.  引入功能依赖（应该整理一下，但我最终需要......）
3.  添加 FlexibleInstances（警钟开始响起。编译器默认关闭此功能是有原因的......）
4.  添加 UndecidableInstances（GHC 告诉你你是靠你自己的，因为它不相信它可以应对你设置的挑战。）
5.  一切都炸了。以某种方式重构。

然后我发现了[类型族](http://www.haskell.org/haskellwiki/Simonpj/Talk%3aFunWithTypeFuns)的乐趣（类型的函数式编程（万岁）——多参数类型类（有点像）类型的逻辑编程）。我的工作流程更改为：

1.  引入包含关联类型的类型类，即替换

    ```
    class MyProblematicClass a b | a -> b where
      thing :: a -> b
      thang :: b -> a -> b 
    ```

    和

    ```
    class MyJustWorksClass a where
      type Thing a :: * -- Thing a is a type (*), not a type constructor (* -> *)
      thing :: a -> Thing a
      thang :: Thing a -> a -> Thing a 
    ```

2.  紧张地添加 FlexibleInstances。根本没有任何问题。

3.  有时通过使用约束来解决问题，例如`(MyJustWorksClass j,j~a)=>`代替`(MyJustWorksClass a)=>`或`(Show t,t ~ Thing a,...)=>`代替`(Show (Thing a),...) =>`来帮助 ghc。（`~`本质上是指'与'同类型'）
4.  紧张地添加 FlexibleContexts。根本没有任何问题。
5.  一切正常。

“什么都没有出错”的原因是 ghc使用我的类型函数*计算*类型，而不是尝试仅使用一堆断言来*推断它，即那里有一个函数并且它应该能够解决它。*`Thing a``Thang`

 *搏一搏！在阅读[手册](http://www.haskell.org/haskellwiki/GHC/Type_families)*之前*阅读[Fun with Type Functions](http://www.haskell.org/haskellwiki/Simonpj/Talk%3aFunWithTypeFuns) ！****

# c# - IUnitOfWork 是否适合我的场景

> ID：12399799
> 
> 赞同：1
> 
> 时间：2012-09-13T05:14:49.770
> 
> 标签：c#, design-patterns, repository-pattern

过去两天我一直在阅读 UnitOfWork 模式，但没有正确理解。

我为每个班级都有一个存储库。例如。员工、考勤、工资、部门、地址等

存储库意味着 - 这些类中的每一个都有自己的 CRUD 操作（创建自己的数据库连接）。这些创建单独的数据库连接并插入。

当我想以原子方式执行多个操作时会出现问题。例如。在单个事务中插入员工和地址。但是我的存储库不允许这样做，因为 Employee 只负责管理 Employee 表。

我可以使用 System.Transactions 但这会让我发疯，因为单个事务有许多数据库连接。

UoW 是否适用于我的情况，但会做出一些改变？

编辑：

我的示例代码

```
public class AccountTransactionManager
{
    Properties.Settings settings = new Properties.Settings();

    public void InsertAccountTransaction(AccountTransaction accountTransaction)
    {
        SqlParameter AccountId = new SqlParameter { ParameterName = "@AccountId", Value = accountTransaction.AccountId, Direction = ParameterDirection.Input, SqlDbType = SqlDbType.Int };
        SqlParameter PAYMENT_DATE = new SqlParameter { ParameterName = "@PAYMENT_DATE", Value = accountTransaction.PAYMENT_DATE, Direction = ParameterDirection.Input, SqlDbType = SqlDbType.DateTime };
        SqlParameter CURRENT_BALANCE = new SqlParameter { ParameterName = "@CURRENT_BALANCE", Value = accountTransaction.CURRENT_BALANCE, Direction = ParameterDirection.Input, SqlDbType = SqlDbType.Money };

        Helper.SqlHelper.Execute(settings.SQLConnectStr
            , (tran) =>
            {
                Helper.SqlHelper.ExecuteNonQuery(tran, CommandType.StoredProcedure, "usp_AccountTransactionInsert", AccountId, PAYMENT_DATE, CURRENT_BALANCE);
            });
    }
} 
```

SqlHelper 代码

```
public static void Execute(string connectionString, Action<SqlTransaction> CallBack)
{
    if (CallBack == null)
        return;

    using (var con = new SqlConnection(connectionString))
    {
        con.Open();
        using (var tran = con.BeginTransaction())
        {
            #region Call procedures

            try
            {
                CallBack(tran);
                tran.Commit();
            }
            catch (SqlException ex)
            {
                tran.Rollback();
                throw ex;
            }
            finally
            {
                con.Close();
            }

            #endregion
        }
    }
} 
```

需求将非常频繁地变化。所以我应该使用任何 ORM 还是创建自己的存储库。我可以在 ORM 中使用存储过程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:25:58.040

你有一些非常错误的假设。首先，仅仅因为您有两个存储库，并不意味着如果您同时使用它们就有两个数据库连接。数据库连接由大多数 ORM 池化，例如 Entity Framework 和 nHibernate。因此，您不知道如何处理连接，但您通常可以放心，当您调用 SaveChanges 时，它将具有隐含的事务并作为单个原子操作发生。

其次，您忽略了 ORM 的主要优势之一，即导航属性和集合。如果您有一个 Employee 表，那么它应该有一个地址导航属性或地址集合。

因此，假设您要插入一个新员工。您创建一个新的员工实体，然后创建一个新的地址实体，然后将地址添加到员工，然后将员工添加到您的 ORM。当您调用 Commit 或 SaveChanges 或任何导致您的 ORM 更新的东西时，它会更新两个实体并作为单个事务发生。

同样，如果您添加多个员工，当您调用 SaveChanges 时，所有员工都将作为单个事务添加。

如果您认为可能需要分布式事务，您实际上只需要使用 System.Transaction。或者，您确实有一个无法在单个工作单元中完成的多步骤过程。

您所说的大部分内容都是基于每个存储库都是它自己的独立工作单元的假设，这根本不是必要的假设。UnitOfWorks 可以在您的所有存储库之间共享。如果您使用依赖注入，这将更容易实现。

编辑：

根据您的编辑，我看到您没有使用 ORM，而是使用存储库来处理您的 DAL。我所说的一些内容仍然适用，您不需要每个存储库都有自己的连接，并且您不需要让存储库只处理单个实体，因为实体也具有可以管理的相关实体。

关于 UnitOfWork 要记住的重要一点是它是一种实体缓存。您向它添加或更新脏实体，它不会一个一个地保存它们......相反，它会一直等到您调用 Save，然后在一个事务中完成它们。

此外，存储库不是工作单元，它更像是 UnitOfWork 的包装器。您的 UnitOfWork 跟踪模型中的所有实体，而不仅仅是单个实体。因此多个存储库可以共享一个 UnitOfWork。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:31:28.350

UnitOfWork 模式用于管理 Model 对象的状态以及是否需要将其保存到数据库中。

考虑它的最佳方式是，如果您更改 Model 对象的属性，则该对象知道它已被更改（通常它被标记为脏），然后该对象由持久性机制处理。您可能在 IList 中有 10 个对象 - 您更改了其中的 2 个 - 当需要保存持久层时，知道只有 2 个已更改，并且只将它们保存到数据库中。

[您可以在此处](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)阅读有关其工作原理的更多信息

从事物的声音来看，您遇到的真正问题是如何创建持久层（您的存储库）。您需要的是某种形式的单一连接管理对象，它保存与数据库的连接，但以您程序集中的所有存储库都可以访问的方式进行。您需要的是一个单例对象，它可能是使用静态工厂模式创建的。

老实说，这是一段相当低级的数据访问代码，管理事务（已提交、正在处理等）和连接状态（打开、关闭）可能是一段麻烦的代码。如今，有许多框架，如 nHibernate、Entity Framework 和 Active Record，可以为您完成所有这些工作（具有讽刺意味的是，使用了您描述的许多模式）。

编辑：刚刚看到你的代码。如果你真的，真的想自己做，那么从你的 SQLHelper 类中删除 static 关键字，将连接代码移到名为 open 和 close 的单独方法中，并将 SQLHelper 类包装在一个总是返回单个实例的新静态工厂类中（辛格尔顿）。

# java - 从 JPanel 内的 JButton 而不是 JFrame 中替换当前的 JPanel

> ID：12399800
> 
> 赞同：0
> 
> 时间：2012-09-13T05:14:56.207
> 
> 标签：java, swing, netbeans, jframe, jpanel

我有一个 JFrame，我将它用作主要的 JFrame，并在同一个 JFrame 中更改 JPanel。第一个 JPanel 已经在 J​​Frame 中，所以我可以用“this.removeall() then ,this.setContentPane(new JPanel2)”替换它，因为“this”在这里调用 JFrame 本身。

在另一个 JPanel 中，我想制作一个 JButton 来用另一个 JPanel 替换当前的 JPanel。问题是我以前不能执行相同的代码，因为这里的“this”调用的是 JPanel 而不是 JFrame。

问题是如何在 JPanel 中编写代码，让我让 JFrame 更改其“setContentPane”以查看第二个面板？

* * *

我在使用 CardLayout 中找到了答案。这个视频帮助我解决了这个问题

[Netbeans 视频上的 CardLayout](http://www.youtube.com/watch?v=d-zSU6vNwYw)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:56:47.750

> 我想在 JPanel 的 buttonActionListner 中编写代码。我不会在 JFrame 中编写该代码，因此可以添加和删除每个 JPanel 以独立调用另一个 JPanel

和

> @AndrewThompson-在界面设计中，我们使用了按钮而不是 CardLayout 或 Tabs。我想做所有的应用程序面板，并一一更改JFrame

必须打电话给父母（`JFrame`，`JPanel`），

```
validate(); // for Java7 revalidate() for JFrame
repaint(); 
```

删除后添加一个新的`JPanel`，只有一次并且作为最后一个代码行

如前所述`@AndrewThompson`，更好、最简单、最简单的方法可能是使用 CardLayout

# python - APGL（Another Python Graph Library）安装后测试错误

> ID：12399801
> 
> 赞同：0
> 
> 时间：2012-09-13T05:14:58.023
> 
> 标签：python, graph, io, installation

有人为python成功安装了apgl图形库吗？[http://packages.python.org/apgl/](http://packages.python.org/apgl/) python 中是否有其他替代图形库可以与 apgl 执行相同的操作并具有相同的简单性？

目前我正在使用 Ubuntu 12.04 发行版，并且我已经在此处安装了依赖库：

```
sudo apt-get install pip
sudo pip install numpy
sudo apt-get install libatlas-base-dev gfortran g++
sudo pip install scipy
sudo pip install matplotlib
sudo pip install agpl 
```

它安装成功，然后当我这样做时：

```
>>> import apgl
>>> apgl.test() 
```

我遇到错误：

```
>>> apgl.test()
Running tests from /usr/local/lib/python2.7/dist-packages/apgl
..............s....................................................E...........E.................................................ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss.....................................................................E.........E.........................................sssssssss...sssssss..sssssssssssssssssssssssssssss.................................s....s..ss..........
======================================================================
ERROR: testLoad (graph.test.SparseGraphTest.SparseGraphTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/apgl/graph/test/MatrixGraphTest.py", line 1619, in testLoad
    graph.save(tempFile)
  File "/usr/local/lib/python2.7/dist-packages/apgl/graph/AbstractMatrixGraph.py", line 558, in save
    import zipfile
  File "/usr/lib/python2.7/zipfile.py", line 464, in <module>
    class ZipExtFile(io.BufferedIOBase):
AttributeError: 'module' object has no attribute 'BufferedIOBase'

======================================================================
ERROR: testPickle (graph.test.SparseGraphTest.SparseGraphTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/apgl/graph/test/MatrixGraphTest.py", line 2309, in testPickle
    output = pickle.dumps(graph)
  File "/usr/lib/python2.7/pickle.py", line 1374, in dumps
    Pickler(file, protocol).dump(obj)
  File "/usr/lib/python2.7/pickle.py", line 224, in dump
    self.save(obj)
  File "/usr/lib/python2.7/pickle.py", line 306, in save
    rv = reduce(self.proto)
  File "/usr/lib/python2.7/copy_reg.py", line 84, in _reduce_ex
    dict = getstate()
  File "/usr/local/lib/python2.7/dist-packages/apgl/graph/AbstractMatrixGraph.py", line 1287, in __getstate__
    self.save(tempFile.name)
  File "/usr/local/lib/python2.7/dist-packages/apgl/graph/AbstractMatrixGraph.py", line 558, in save
    import zipfile
  File "/usr/lib/python2.7/zipfile.py", line 464, in <module>
    class ZipExtFile(io.BufferedIOBase):
AttributeError: 'module' object has no attribute 'BufferedIOBase'

======================================================================
ERROR: testLoad (graph.test.DenseGraphTest.DenseGraphTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/apgl/graph/test/MatrixGraphTest.py", line 1619, in testLoad
    graph.save(tempFile)
  File "/usr/local/lib/python2.7/dist-packages/apgl/graph/AbstractMatrixGraph.py", line 558, in save
    import zipfile
  File "/usr/lib/python2.7/zipfile.py", line 464, in <module>
    class ZipExtFile(io.BufferedIOBase):
AttributeError: 'module' object has no attribute 'BufferedIOBase'

======================================================================
ERROR: testPickle (graph.test.DenseGraphTest.DenseGraphTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/apgl/graph/test/MatrixGraphTest.py", line 2309, in testPickle
    output = pickle.dumps(graph)
  File "/usr/lib/python2.7/pickle.py", line 1374, in dumps
    Pickler(file, protocol).dump(obj)
  File "/usr/lib/python2.7/pickle.py", line 224, in dump
    self.save(obj)
  File "/usr/lib/python2.7/pickle.py", line 306, in save
    rv = reduce(self.proto)
  File "/usr/lib/python2.7/copy_reg.py", line 84, in _reduce_ex
    dict = getstate()
  File "/usr/local/lib/python2.7/dist-packages/apgl/graph/AbstractMatrixGraph.py", line 1287, in __getstate__
    self.save(tempFile.name)
  File "/usr/local/lib/python2.7/dist-packages/apgl/graph/AbstractMatrixGraph.py", line 558, in save
    import zipfile
  File "/usr/lib/python2.7/zipfile.py", line 464, in <module>
    class ZipExtFile(io.BufferedIOBase):
AttributeError: 'module' object has no attribute 'BufferedIOBase'

----------------------------------------------------------------------
Ran 423 tests in 46.433s

FAILED (errors=4, skipped=120) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:52:01.230

在我看来，您遇到了某种 Ubuntu 问题。

```
 File "/usr/lib/python2.7/zipfile.py", line 464, in <module>
   class ZipExtFile(io.BufferedIOBase):
AttributeError: 'module' object has no attribute 'BufferedIOBase' 
```

表示您的 python 安装有问题。

你是自己安装的吗？

另外......虽然 pip 很棒，但您应该更喜欢使用包管理器，并且只有当您*必须*安装真正的新版本或非打包版本时，您才应该使用 pip。因此，不要使用 pip do 安装，

```
apt-get install python-scipy python-numpy python-matplotlib 
```

然后才用 pip 安装 apgl。

我在 Debian Wheezy 上成功测试了我的安装 apgl，并在今天（2012 年 9 月 13 日）更新了软件包，测试结果很好。

```
 In [22]: apgl.test()
Running tests from /usr/local/lib/python2.7/dist-packages/apgl
......./usr/lib/python2.7/dist-packages/scipy/sparse/compressed.py:486: SparseEfficiencyWarning: changing the sparsity structure of a csr_matrix is expensive. lil_matrix is more efficient.
  SparseEfficiencyWarning)
....s...........................................................................................ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss...................................................................................................................................................sssssssss...ssssssssssssssssssssssssssssssssssss......................s....s.........................ss
----------------------------------------------------------------------
Ran 423 tests in 25.454s

OK (skipped=120) 
```

# python - 如何检查 **kwargs 中的键是否存在？

> ID：12399803
> 
> 赞同：141
> 
> 时间：2012-09-13T05:14:59.563
> 
> 标签：python, dictionary, python-3.x, keyword-argument

蟒蛇 3.2.3。[这里列出了](https://stackoverflow.com/questions/9390126/pythonic-way-to-check-if-something-exists)一些想法，它们适用于常规 var，但似乎 **kwargs 遵循不同的规则......那么为什么这不起作用以及如何检查 **kwargs 中的键是否存在？

```
if kwargs['errormessage']:
    print("It exists") 
```

我也认为这应该可行，但它没有——

```
if errormessage in kwargs:
    print("yeah it's here") 
```

我猜是因为 kwargs 是可迭代的？我是否必须遍历它才能检查是否存在特定的键？

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2012-09-13T05:17:45.353

你要

```
if 'errormessage' in kwargs:
    print("found it") 
```

获得价值`errormessage`

```
if 'errormessage' in kwargs:
    print("errormessage equals " + kwargs.get("errormessage")) 
```

这样一来，`kwargs`就只是另一个`dict`。您的第一个示例 ,`if kwargs['errormessage']`表示“获取与 kwargs 中的键“errormessage”关联的值，然后检查其布尔值”。所以如果没有这样的密钥，你会得到一个`KeyError`.

您的第二个示例 ,`if errormessage in kwargs:`表示“如果`kwargs`包含以“ `errormessage`”命名的元素，并且除非“ `errormessage`”是变量的名称，否则您将获得`NameError`.

我应该提到字典还有一个`.get()`接受默认参数的方法（本身默认为`None`），因此`kwargs.get("errormessage")`如果该键存在则返回值，`None`否则返回值（类似于`kwargs.get("errormessage", 17)`您可能认为的那样）。当您不关心键存在与`None`作为值或键不存在之间的区别时，这可能会很方便。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-13T09:35:11.097

DSM 和 Tadeck 的回答直接回答了您的问题。

在我的脚本中，我经常使用方便的`dict.pop()`方法来处理可选参数和附加参数。这是一个简单`print()`包装器的示例：

```
def my_print(*args, **kwargs):
    prefix = kwargs.pop('prefix', '')
    print(prefix, *args, **kwargs) 
```

然后：

```
>>> my_print('eggs')
 eggs
>>> my_print('eggs', prefix='spam')
spam eggs 
```

如您所见，如果`prefix`不包含在 中`kwargs`，则默认`''`（空字符串）存储在局部`prefix`变量中。如果给出，则使用它的值。

这通常是为任何类型的函数编写包装器的紧凑且可读的秘诀：始终只是传递您不理解的参数，甚至不知道它们是否存在。如果你总是通过`*args`并且`**kwargs`你让你的代码变慢，并且需要更多的输入，但是如果被调用函数的接口（在这种情况下`print`）发生变化，你不需要改变你的代码。这种方法减少了开发时间，同时支持所有接口更改。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-13T05:19:51.143

就是这样：

```
if 'errormessage' in kwargs:
    print("yeah it's here") 
```

您需要检查密钥是否在字典中。其语法是`some_key in some_dict`（其中`some_key`的东西是可散列的，不一定是字符串）。

您链接的想法（[这些想法](https://stackoverflow.com/questions/9390126/pythonic-way-to-check-if-something-exists)）包含用于检查由`locals()`and返回的字典中是否存在特定键的示例`globals()`。您的示例类似，因为您正在检查字典中是否存在特定键`kwargs`（包含关键字参数的字典）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-13T07:57:33.870

一种方法是自己添加！如何？`kwargs`通过与一堆默认值合并。这并不适用于所有情况，例如，如果您事先不知道密钥。但是，如果是，这里有一个简单的例子：

```
import sys

def myfunc(**kwargs):
    args = {'country':'England','town':'London',
            'currency':'Pound', 'language':'English'}

    diff = set(kwargs.keys()) - set(args.keys())
    if diff:
        print("Invalid args:",tuple(diff),file=sys.stderr)
        return

    args.update(kwargs)            
    print(args) 
```

默认值在字典中设置`args`，其中包括我们期望的所有键。我们首先检查 kwargs 中是否有任何意外的键。然后我们更新which 将覆盖用户设置的任何新值`args`。`kwargs`我们不需要测试一个键是否存在，我们现在使用`args`作为我们的参数字典并且不再需要`kwargs`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-13T07:24:24.393

你可以自己轻松地发现这些东西：

```
def hello(*args, **kwargs):
    print kwargs
    print type(kwargs)
    print dir(kwargs)

hello(what="world") 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-16T04:45:05.547

```
if kwarg.__len__() != 0:
    print(kwarg) 
```

# c# - 基于两个值C#对点类列表进行排序

> ID：12399804
> 
> 赞同：4
> 
> 时间：2012-09-13T05:15:04.087
> 
> 标签：c#, class

我想先根据 x 再根据 y 对 C# 中的类点列表（见下文）进行排序。

```
public class Point
{
    public int x;
    public int y;
    public Point(int xp, int yp)
    {
        x = xp;
        y = yp;
    }
} 
```

你是怎么做到的：我是 C# 的新手，并且与 Java 比较方法有什么相似之处，这些方法实现了类的自定义比较器，而且我想将比较方法（int CompareTo）添加到类中以排序班级。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T05:17:00.647

是的，您正在寻找[`IComparable<T>`](http://msdn.microsoft.com/en-us/library/4d7sx9hd.aspx)and [`IComparer<T>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)- 后者相当于`Comparator<E>`Java 中的接口。

如果您想添加与`Point`类本身的比较，请`Point`实现`IComparable<Point>`（也可能是非泛型`IComparable`接口）。如果您想在其他地方实现比较，请让另一个类实现`IComparer<Point>`。

对于*等式*，.NET 也有`IEquatable<T>`和`IEqualityComparer<T>`。这些用于诸如`Dictionary<,>`.

作为旁注，我强烈建议您*不要*使用公共字段 - 您可能很想制作 variables `readonly`。（不可变类型通常更容易推理。）您可能决定制作`Point`a `struct`too，而不是 a `class`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T05:17:04.467

```
var points = new List<Point>() { new Point(1,3), new Point(1,4), new Point(1,2) };
var sortedPoints = points.OrderBy(point => point.x).ThenBy(point => point.y); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T05:18:42.260

您可以实现`IComparable`接口并实现其

```
public int CompareTo( object obj ) 
```

在这个方法中，您可以编写逻辑来比较两个对象，例如：

```
if (objectA.x > objectB.x)
  return 1
else if (objectA.x < objectB.x)
  return -1
else // compare y in both objects 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T05:17:59.613

您要在 C# 中实现的接口是[IComparable<T>](http://msdn.microsoft.com/en-us/library/4d7sx9hd.aspx)，它的作用类似于 Java 的 Comparable。然后你的代码变成

```
public class Point : IComparable<Point>
{
    private int x;
    private int y;

    public int X
    {
        get { return x; }
    }

    public int Y
    {
        get { return y; }
    }

    public Point(int xp, int yp)
    {
        x = xp;
        y = yp;
    }

    public int CompareTo(Point other)
    {
        // Custom comparison here
    }
} 
```

请注意，我将公共字段更改为私有字段，并将面向公众的接口更改为[properties](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.110%29.aspx)。这是更惯用的 C# - 公共字段在 Java 和 C# 中都不受欢迎。

# jaxb - 即使变量名称相同，也需要带有名称值的 @XMLAttribute

> ID：12399808
> 
> 赞同：1
> 
> 时间：2012-09-13T05:15:38.857
> 
> 标签：jaxb, xjc

请帮帮我。我的 xsd（只有属性部分不完整）

```
<xs:element name="E1">
   <xs:complextype>
      <xs:attribute name="xyz" type="xs:string" />
      <xs:attribute name="xyz_abc" type="xs:string" />
   </xs:complextype>
</xs:element> 
```

将 JAXB 类生成为（再次不完整）

```
@XmlAttribute
protected String xyz;

@XmlAttribute(name="xyz_abc")
protected String xyzAbc; 
```

但我希望将 JAXB 文件生成为

```
@XmlAttribute(name="xyz")
protected String xyz;

@XmlAttribute(name="xyz_abc")
protected String xyzAbc; 
```

我必须在 xsd 中进行哪些更改才能生成所需的 JAXB 类。我正在使用 maven 生成 JAXB 类。

# python - 要求 unittest 在第一次失败时引发异常

> ID：12399809
> 
> 赞同：0
> 
> 时间：2012-09-13T05:15:46.353
> 
> 标签：python, unit-testing, python-3.x

我正在尝试调试失败的测试。有没有办法要求`unittest`不要从测试中捕获异常，而是让它通过调试器？

它似乎`unittest`只是添加了`--failfast`选项，但它仍然在内部捕获异常`unittest`，并且只会阻止它运行任何进一步的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:35:41.760

我查了源代码，只有一个例外。

模块：unittest.case

```
 ...
            try:
                testMethod()
            except KeyboardInterrupt:
                raise
            except ... 
```

您可以提出此问题，否则您将需要覆盖`run()`测试用例的方法和/或使用其他结果类。

# mysql - 您如何处理高得惊人的数据库 ID

> ID：12399810
> 
> 赞同：4
> 
> 时间：2012-09-13T05:15:56.363
> 
> 标签：mysql, sql, database, sharding

这个问题与我（还）遇到的问题无关，但它让我夜不能寐。理论上，最终，随着表中的行数越来越多，每行对应的ID都会“用完”数字，不是吗？我想如果你不断增加列值的深度，你可以让它继续上升，但最终必须有一个上限，对吧？

我听说过一种称为“分片”的技术，但还没有对其进行足够详细的解释以满足我的好奇心。答案是您只是不断添加更多数字，还是有一个聪明的模式允许在他们自己的沙箱中“重复”ID。如果这些沙箱必须交互怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T05:20:29.193

分片与 ID 的大小无关。

正确的处理方法是：不要担心。

32 位 int 具有足够的值，您可以每秒添加一行超过 100 年而不会用完。

如果这还不够，使用 64 位 int，您可以每秒添加 10*亿行，并且仍然持续 500 多年。*

所以基本上：别担心。根据您期望乘以 100 的行数选择 int 的大小，然后继续。

重新分片：

这只是一种通过使用规则决定哪个服务器应该获取数据来将数据库拆分到多个服务器的方法。规则因您存储的内容和拥有的服务器数量而异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T05:20:07.607

来自[dev.mysql.com](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

> 为 AUTO_INCREMENT 列使用足够大的整数数据类型来保存您需要的最大序列值。当列达到数据类型的上限时，下一次生成序列号的尝试失败。例如，如果您使用 TINYINT，则允许的最大序列号为 127。对于 TINYINT UNSIGNED，最大值为 255。

这真的很迷人。我想一个简单的（半）答案是使用 BIGINT - 最大值为 18,446,744,073,709,551,615。如果你有那么多列 - 那么......哇......

# iphone - 旋转图像后如何合并两个图像？

> ID：12399811
> 
> 赞同：0
> 
> 时间：2012-09-13T05:15:57.193
> 
> 标签：iphone

![在此处输入图像描述](../Images/b1b695f0fc3bdc00e08d49074ce8c37d.png)

旋转图像后如何合并旋转图像？我使用下面的代码，它在图像旋转之前工作正常。如何解决这个问题。请帮我。提前致谢。

```
CGRect backgroundImageRect = CGRectMake(0.0, 0.0, itemSize.width, itemSize.height);
CGRect foregroundImageRect = CGRectMake(rsImageView.frame.origin.x, rsImageView.frame.origin.y, rsImageView.frame.size.width, rsImageView.frame.size.height);

[backgroundImageView.image drawInRect:backgroundImageRect];
[rsImageView.image drawInRect:foregroundImageRect];
overlappedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:32:43.467

添加此方法在旋转后调用此方法：

```
-(UIImage *)getMergedImage
{
 UIImage mergedImage;
 UIGraphicsBeginImageContext(backgroundImageView.frame.size)
 [backgroundImageView.layer  renderInContext:UIGraphicsGetCurrentContext];//bacgroundImageView here
 UIImage overLappedImage = [self getOverlappedImage];
 if(overLappedImage)
 {
   //CGRectMake(0,0,rsImageView.frame.width,rsImageView.frame.height)
   [overLappedImage drawInRect:rsImageView.frame blendMode:kCGBlendModeNormal alpha:0.8];//TopMostImageView here
 }
 mergedImage = UIGraphicsGetImageFromCurrentImageContext(); 
 UIGraphicsEndImageContext();
 return mergedImage;
} 
```

* * *

添加此方法以获取重叠图像。

```
-(UIImage *)getOverlappedImage
{
  UIImage overlappedImage;
  UIGraphicsBeginImageContext(rsImageView.frame.size)
  [rsImageView.layer renderInContext:UIGraphicsGetCurrentContext]; //TopMostImageView here
  overlappedImage = UIGraphicsGetImageFromCurrentImageContext(); 
  UIGraphicsEndImageContext();
  return overlappedImage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:32:01.627

如果您想在设备方向使用此代码

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
    toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)
{
    //Your cgrectmake for landscape
}
else
{
    //Your cgrectmake for Portrait
}
} 
```

# android - 如何在用户点击的android中更改GridView中的图像？

> ID：12399818
> 
> 赞同：1
> 
> 时间：2012-09-13T05:16:34.093
> 
> 标签：android, android-gridview

我正在开发一个 android 应用程序，在该应用程序中，我必须在用户单击的网格视图中展开特定图像。有什么办法可以做到。任何帮助将不胜感激。我使用了两种方法，但没有达到相同的效果
![在此处输入图像描述](../Images/092fd5a4a228351cb2d63cfadae4425d.png) **首先：在 getview() 方法中使用：**

```
 if(array[position]!=null)
                if(array[position].equals("1")){
                 imageView.setLayoutParams(new LinearLayout.LayoutParams(80, 80, 1));                   

                }
                imageView.setOnTouchListener(new View.OnTouchListener() {

                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        switch (event.getAction()) {
                        case MotionEvent.ACTION_UP:
                        final int posit = gridview.getPositionForView((View)v.getParent());
                        array[posit]="1";
                        ((BaseAdapter)gridview.getAdapter()).notifyDataSetChanged();
                        break;

                        }
                        return true;
                    }   
                }); 
```

**第二：**

```
 imageView.setOnTouchListener(new View.OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    switch (event.getAction()) {
                         case MotionEvent.ACTION_UP:
                         v.setLayoutParams(new LinearLayout.LayoutParams(80, 80, 1));

                         ((BaseAdapter)gridview.getAdapter()).notifyDataSetChanged();
                         break;
                    }
                    return true;
                }   
            }); 
```

但这两种方法没有显示正确的结果，它正在随机扩展图像我应该怎么做。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:56:16.253

**编辑**：对于这个问题，您必须跟踪更改的视图，例如采用布尔数组，当您更改视图的属性时，保持数组中的该位置为真。当您滚动视图时，无论哪个数组位置为真，您只为它们设置放大属性，否则设置默认属性，如下所示。

```
if(array[position].equals("1"))
{
        imageView.setLayoutParams(new LinearLayout.LayoutParams(80, 80, 1));    
}    
else
{
       // set image original property
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:48:15.333

将此代码放入您`OnclickListener`的`imageview`

```
Intent intent = new Intent();  
intent.setAction(android.content.Intent.ACTION_VIEW);  

intent.setDataAndType(Uri.parse("image path"), "image/*");  
startActivity(intent); 
```

# php - Wordpress get_template_part ，不能让它工作吗？

> ID：12399821
> 
> 赞同：0
> 
> 时间：2012-09-13T05:16:45.270
> 
> 标签：php, wordpress

我不明白，我的自定义 wp 模板中有：

单用car_model-reader_review.php，

single-usedcar_model-gallery.php

但出于某种原因

> get_template_part('single-usedcar_model', "gallery");

每次都有效并正确包含它。

当我尝试对 reader_review 执行相同操作时，我只是得到一个错误。我需要定义一些特殊的东西来包含这些文件还是什么？

我得到的错误是：

```
This is somewhat embarrassing, isn’t it? 
```

> object(WP_Query)#809 (46) { ["query_vars"]=> array(55) { ["attachment"]=> string(14) "reader_reviews" ["error"]=> string(0) "" [ "m"]=> int(0) ["p"]=> int(0) ["post_parent"]=> string(0) "" ["subpost"]=> string(0) "" ["subpost_id "]=> string(0) "" ["attachment_id"]=> int(0) ["name"]=> string(14) "reader_reviews" ["static"]=> string(0) "" [" pagename"]=> string(0) "" ["page_id"]=> int(0) ["second"]=> string(0) "" ["minute"]=> string(0) "" ["hour"]=> string(0) "" ["day"]=> int(0) ["monthnum"]=> int(0) ["year" ]=> int(0) ["w"]=> int(0) ["category_name"]=> string(0) "" ["tag"]=> string(0) "" ["cat"]= > string(0) "" ["tag_id"]=> string(0) "" ["author_name"]=> string(0) "" ["feed"]=> string(0) "" ["tb" ]=> string(0) "" ["paged"]=> int(0) ["comments_popup"]=> string(0) "" ["meta_key"]=>string(0) "" ["meta_value"]=> string(0) "" ["preview"]=> string(0) "" ["s"]=> string(0) "" ["sentence"] => string(0) "" ["fields"]=> string(0) "" ["category_*in"]=> array(0) { } ["category* _not_in"]=> array(0) { } ["category_ *and"]=> array(0) { } ["post* _in"]=> array(0 ) { } ["post__not_in"]=> array(0) { } ["tag_in *"]=> array(0) { } ["tag*_not_in"]=> 数组(0) { } ["tag__and"]=> 数组(0) { } ["tag_slug__in"]=> 数组(0) { } ["tag_slug__and"]=> 数组(0) { } ["ignore_sticky_posts"]=> bool(false) ["suppress_filters"]=> bool(false) ["cache_results"]=> bool(true) ["update_post_term_cache"]=> bool(true) ["update_post_meta_cache"]= > bool(true) ["post_type"]=> string(0) "" ["posts_per_page"]=> int(1) ["nopageing"]=> bool(false) ["comments_per_page"]=> string(2 ) "50" ["no_found_rows"]=> bool(false) ["order"]=> string(4) "DESC" } ["tax_query"]=> NULL ["meta_query"]=> object(WP_Meta_Query)#551 (2) { ["queries"]=> array(0) { } ["relation"]=> NULL } ["post_count"]=> int(0) ["current_post"]=> int(-1) ["in_the_loop"]=> bool(false) ["comment_count"]= >
> int(0) ["current_comment"]=> int(-1) ["found_posts"]=> int(0) ["max_num_pages"]=> int(0) ["max_num_comment_pages"]=> int(0)
> [ "is_single"]=> bool(false) ["is_preview"]=> bool(false)
> ["is_page"]=> bool(false) ["is_archive"]=> bool(false)
> ["is_date"]=> bool(false) ["is_year"]=> bool(false)
> ["is_month"]=> bool(false) ["is_day"]=> bool(false)
> ["is_time"]=> bool(false) [" is_author"]=> bool(false)
> ["is_category"]=> bool(false) ["is_tag"]=> bool(false)
> ["is_tax"]=> bool(false) ["is_search"]=> bool(false)
> ["is_feed"]=> bool(false) ["is_comment_feed"]=> bool(false)
> ["is_trackback"]=> bool(false) ["is_home"]=> bool （错误的）
> ["is_404"]=> bool(true) ["is_comments_popup"]=> bool(false)
> ["is_paged"]=> bool(false) ["is_admin"]=> bool(false)
> ["is_attachment"]= > bool(false) ["is_singular"]=> bool(false)
> ["is_robots"]=> bool(false) ["is_posts_page"]=> bool(false)
> ["is_post_type_archive"]=> bool(false) [ "query_vars_hash"]=>
> 字符串(32) "6fd8021e4727db18aa48074428ae7597"
> ["query_vars_changed"]=> bool(false) ["thumbnails_cached"]=>
> bool(false) ["query"]=> array(1) { ["attachment"]=> string(14) "reader_reviews" } ["request"]=> string(160) "SELECT wp_posts.* FROM wp_posts WHERE 1=1 AND wp_posts.post_name = 'reader_reviews' AND wp_posts.post_type = 'attachment' ORDER BY wp_posts.post_date DESC " ["posts"]=> &array(0) { }
> ["queried_object"]=> NULL ["queried_object_id "]=> int(0) }

# winforms - 减少 FlowLayoutPanel 中的水平空间

> ID：12399828
> 
> 赞同：1
> 
> 时间：2012-09-13T05:17:07.617
> 
> 标签：winforms

见图片我想减少每行控件之间的水平空间。

此 Windows 形成 FlowLayoutPanel。我已经用红色突出显示了一个单元格以显示当前的间距。

![在此处输入图像描述](../Images/8cdf4774f95503c12a7246ccc6268a76.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:19:41.287

通过从面板派生，您可以很容易地创建自己的自定义 FlowLayoutPanel。

虽然下面的代码为水平和垂直设置了一个统一的边框，但您可以很容易地修改为每个水平和垂直间距都有一个属性。

```
public class FlowPanel : Panel
{
    protected int _TileBorder;
    public int TileBorder
    {
        get
        {
            return this._TileBorder;
        }
        set
        {
            this._TileBorder = value;
            this.RearrangeControls(this, this.TileBorder);
        }
    }
    public FlowPanel()
    {
        this.AutoScroll = true;
    }
    public FlowPanel(int tileBorder)
    {
        this.AutoScroll = true;
        this.TileBorder = tileBorder;
    }
    protected override void OnSizeChanged(EventArgs e)
    {
        base.OnSizeChanged(e);
        this.RearrangeControls(this, this.TileBorder);
    }
    protected override void OnControlAdded(ControlEventArgs e)
    {
        base.OnControlAdded(e);
        this.RearrangeControls(this, this.TileBorder);
        e.Control.SizeChanged += new EventHandler(this.Control_SizeChanged);
    }
    protected override void OnControlRemoved(ControlEventArgs e)
    {
        base.OnControlRemoved(e);
        this.RearrangeControls(this, this.TileBorder);
        e.Control.SizeChanged -= new EventHandler(this.Control_SizeChanged);
    }
    protected void RearrangeControls(Panel p, int border)
    {
        int num = border;
        int num2 = border;
        int num3 = 0;
        bool flag = true;
        foreach (Control control in p.Controls)
        {
            if (control != null)
            {
                num3 = ((control.Height > num3) ? control.Height : num3);
                if (flag)
                {
                    num += control.Width + border;
                    control.Location = new Point(border, border);
                    flag = false;
                }
                else
                {
                    if (num + control.Width + 2 * border > p.Width)
                    {
                        num2 += num3 + border;
                        control.Location = new Point(border, num2);
                        num = border + (control.Width + border);
                        num3 = control.Height;
                    }
                    else
                    {
                        control.Location = new Point(num, num2);
                        num += control.Width + border;
                    }
                }
            }
        }
    }
    private void Control_SizeChanged(object sender, EventArgs e)
    {
        this.RearrangeControls(this, this.TileBorder);
    }
} 
```

现在我看了一下，RearrangeControls 方法对我来说确实看起来有点匆忙，但我相信你可以让它变得更好！

# linux - 使用 shell 脚本进行文本解析

> ID：12399831
> 
> 赞同：0
> 
> 时间：2012-09-13T05:17:18.393
> 
> 标签：linux, perl, shell

我很少有包含一些关键词的文本文件。我必须从这些文件中选择几行并解析它。下面是一个示例文件。我必须 grep 查找“客户”并从文件中获取该行。

```
13 Sun Sep  9 12:14:38 2012 : [P] Reproducer has the 167 number 
13 Sun Sep  9 12:14:38 2012 : [P] Customer has the 12.14.19.9 
13 Sun Sep  9 12:14:38 2012 : [P] Customer has the 12.14.89.9 
13 Sun Sep  9 12:14:38 2012 : [P] Reproducer has the 170 number 
13 Sun Sep  9 12:14:38 2012 : [P] Customer has the 12.4.89.16 
```

我必须只选择具有客户的行并且必须对其进行解析以仅获取时间戳 (12:14:38) 和数字 12.14.19.9。我必须为多个文件执行此操作。所有文件都具有相同的日志结构。我已经使用下面的 oneliner 完成了此操作

```
grep Customer Neigh.log | cut -d " " -f 5- | cut -d ":" -f 1-4 | cut -d " " -f 1,8 
```

但我需要在 shell 脚本中执行此操作。我怎样才能做到这一点。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:31:04.043

好的 -

这是一个快速的'n'dirty shell脚本：

```
if [ $# -ne 1 ]; then
  echo Please enter a filename
else
  awk '/Customer/ {print $5, " ", $12}' $1
fi 
```

1) 第一行检查#/命令行参数“$#”是否等于 1。如果不是，它会提示您输入文件名。

2）“awk”脚本是“cut”的替代品。当且仅当该行包含“客户”时，它才会打印出第 5 列和第 12 列。

3) "awk" 命令末尾的 $1 是 shell 参数 #1，即您的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:43:49.227

这也适用于多个文件。

```
awk '$0~/Customer/{print $5,$12}' *.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:39:27.440

一种使用方式`GNU awk`：

```
for i in *.txt; do awk '/Customer/ { print $5, $NF > FILENAME".out" }' "$i"; done 
```

如果您正在使用`BSD awk`：

```
for i in *.txt; do awk '/Customer/ { out=FILENAME".out"; print $5, $NF > out }' "$i"; done 
```

# c# - ManagedCuda 和 __constant__ 变量

> ID：12399838
> 
> 赞同：2
> 
> 时间：2012-09-13T05:17:51.267
> 
> 标签：c#, cuda, constants, uninitialized-constant

我在 C# 中使用 ManagedCuda，我有一个问题找不到答案……也许你可以帮助我。我在 C++ 和 CUDA 中读到，您可以声明一个变量（它是一个数组），例如：

`__constant__ double myVar[X];`（这应该包含一个 X 元素的数组）

然后稍后使用它从主机代码中设置值：

```
cudaMemcpyToSymbol(myVar, &arrayFromHost[0], sizeof(arrayFromHost) * numElements, 
                   size_t(0),cudaMemcpyHostToDevice); 
```

所以现在你可以使用类似的东西：

```
__global__ void myFunction(double *res)
{
    *res = myVar[0] + 2.5;
} 
```

使用`myVar`从主机设置的值...

但在 ManagedCuda 我似乎无法做到这一点......我该怎么做？

1.  在我的 *.cu 文件中声明常量变量
2.  将我的 *.cs 文件中的值（一个数组）设置为该常量
3.  在同一个 *.cu 文件内的函数中使用常量 1\. 中的值

（或`__device__`变量......我不知道......它将是一个变量，它将在第一次运行时接收一个数组（具有未知数量的元素），从那时起，该函数将引用它的值，但该变量永远不会改变）

现在我只声明 a`CudaDeviceVariable`并且我再也不会碰它，但是在我的内核上我总是必须发送 DevicePointer，我认为这使得阅读时更难理解......

现在它看起来像这样：

```
myKernel.Run(staticData.DevicePointer, moreData.DevicePointer, 
             evenMoreData.DevicePointer, numberOfElementsWhichNeverChange,            
             moreStaticData.DevicePointer, myResults.DevicePointer) 
```

我想跳过具有永远不会更改的数据的 3 个参数，并将其设置在另一个函数中，例如`setData.Run(numElements, staticData, moreStaticData);`
在我的 *.cu 文件中的其他函数中使用常量或设备变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T15:24:22.000

myKernel 有一个方法 SetConstantVariable() 做你想做的事。只需在启动内核之前调用它： 在您的 *.cu 文件中：

```
extern "C" 
{
    __constant__ double myConstVarInCuda[5];
    __global__ void myFunction(double *res) 
    { 
        *res = myConstVarInCuda[0] + 2.5; 
    } 
} 
```

在 C# 中：

```
 double[] myVarInCS = new double[] { 1.0, 2.0, 3.0, 4.0, 5.0 };    
    myKernel.SetConstantVariable("myConstVarInCuda", myVarInCS);
    myKernel.Run(...); 
```

如果您没有在外部“C”范围内声明您的 Cuda 代码，请注意名称会被破坏。在这种情况下，您可以在 PTX 代码中查找准确的损坏名称。

# iphone - 如何在 iPhone 中加载高质量的 .gif 图像

> ID：12399839
> 
> 赞同：3
> 
> 时间：2012-09-13T05:17:54.893
> 
> 标签：iphone, objective-c, ios, uiimageview, animated-gif

通过提取 .gif 图像，我得到了 48 帧，分辨率为 (1024*768)。我将这些帧存储在这样的数组中。

```
NSMutableArray *splashImages = [[NSMutableArray alloc] init];
    for(int i=1;i <= 48;i ++)
    {
        [splashImages addObject:[UIImage imageNamed:[NSString  stringWithFormat:@"img%d.jpg",i]]];
    }
    [ImageView setAnimationImages:splashImages];
    [ImageView setAnimationDuration:1.0];
    [ImageView startAnimating]; 
```

我把它给了 UIImageView 持续时间为 1 秒，通过运行应用程序，它像平滑动画一样消失了，甚至卡住了。

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:12:28.817

毕竟，如果您将所有 48 张图像加载到内存中，恐怕会导致内存警告，请使用 Instrument 进行检查。

=================================

您可能需要先强制它进行解压缩和渲染，请检查此[链接1](https://stackoverflow.com/questions/14116194/any-way-to-encode-a-png-faster-than-uiimagepngrepresentation)和此[链接2](http://www.cocoanetics.com/2011/10/avoiding-image-decompression-sickness/)

试试这个，它会导致图像解压缩，即使图像上下文只有 1 个像素大。：

```
UIGraphicsBeginImageContext(CGSizeMake(1, 1));
    [decompressedImage drawAtPoint:CGPointZero];
UIGraphicsEndImageContext(); 
```

或类似的东西：

```
CGDataProviderRef imageDataProvider = CGDataProviderCreateWithCFData((__bridge CFDataRef)imageData);
    CGImageRef image = CGImageCreateWithJPEGDataProvider(imageDataProvider, NULL, NO, kCGRenderingIntentDefault);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef bitmapContext = CGBitmapContextCreate(NULL, CGImageGetWidth(image), CGImageGetHeight(image), CGImageGetBitsPerComponent(image), 0, colorSpace, kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Little);
    CGColorSpaceRelease(colorSpace);
    CGContextDrawImage(bitmapContext, CGRectMake(0, 0, CGImageGetWidth(image), CGImageGetHeight(image)), image);

    CGDataProviderRelease(imageDataProvider);
    CGContextRelease(bitmapContext);

    if (image){
        decompressedImage = [UIImage imageWithCGImage:image];
        CGImageRelease(image);
    } 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T05:08:36.743

你的方法是行不通的。请参阅[how-to-resolve-memory-crash-in-iphone](https://stackoverflow.com/questions/7610651/how-to-resolve-memory-crash-in-iphone/7659604#comment24955968_7659604)和[loading-images-for-animation-in-uiimageview-ios](https://stackoverflow.com/questions/16617910/loading-images-for-animation-in-uiimageview-ios/17225223#17225223)了解您将遇到的一些问题示例。你最好只用 h.264 编码电影并用 AVPlayer 播放。这比创建一堆全屏 .gif 文件要好得多。

# javascript - javascript/jquery 以短格式将 utc 转换为本地时间

> ID：12399845
> 
> 赞同：2
> 
> 时间：2012-09-13T05:18:39.617
> 
> 标签：javascript, jquery

因此，我正在尝试将 UTC 时间以短格式转换为客户端本地时间。我正在使用以下代码：

```
var date = new Date(call.Timestamp);
date.toLocaleString() 
```

我在屏幕上得到这样的输出：

> 2012 年 9 月 13 日星期四 14:33:15 GMT+1000（澳大利亚东部标准时间）

我想要做的是将它转换为日期对象以显示短格式：dd/mm/yyyy hh:mm:ss 或 mm/dd/yyyy hh:mm:ss 取决于它们所在的时区. 有没有一种标准的方法可以在 javascript 中做到这一点？有谁知道可以为我做这个的库包？

我也试过：

```
date.toLocaleDateString() + ' ' + date.toLocaleTimeString() 
```

但日期字符串仍然输出：“Thursday, September 13, 2012”而不是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:31:58.583

在 JavaScript 中使用日期一直是一件令人头疼的事情。到目前为止，我发现最好的一个库是[Sugar.js](http://sugarjs.com)。

Sugar`Date`使用一些非常强大且富有表现力的方法来扩展该对象，用于创建和操作日期。我认为`Date.create()`仅此一项就可以满足您的需求。它是 Date 构造函数的一个更好的版本，所以它仍然会返回一个 Date 对象。它需要两个选项参数。一个用于语言环境，一个用于 UTC。

[在这里](http://sugarjs.com/api/Date/create)您可以看到方法的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:48:38.180

javascript`Date`没有任何格式化日期字符串的方法。您必须使用获取日期、月份、年份、小时数等的方法自己完成。

参考：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date#Methods_2](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date#Methods_2)

例如：

```
var date = new Date();
var d = [date.getDate(), date.getMonth()+1, date.getFullYear()];
var t = [date.getHours(), date.getMinutes(), date.getSeconds()];
var dateStr = d.join("/") + " " + t.join(":"); 
```

否则，您可以使用任何库，例如 @ethagnawl 建议的库，它支持许多格式选项。

jQuery date foramtting 仅适用于 jQuery UI datepicker，你可以在这里找到一个演示[http://jqueryui.com/demos/datepicker/date-formats.html](http://jqueryui.com/demos/datepicker/date-formats.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:11:23.463

很久以前，我发现了这个有用的脚本，并从那时起就使用它：

```
/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */

var dateFormat = function () {
    var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
        timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
        timezoneClip = /[^-+\dA-Z]/g,
        pad = function (val, len) {
            val = String(val);
            len = len || 2;
            while (val.length < len) val = "0" + val;
            return val;
        };

    // Regexes and supporting functions are cached through closure
    return function (date, mask, utc) {
        var dF = dateFormat;

        // You can't provide utc if you skip other args (use the "UTC:" mask prefix)
        if (arguments.length == 1 && Object.prototype.toString.call(date) == "[object String]" && !/\d/.test(date)) {
            mask = date;
            date = undefined;
        }

        // Passing date through Date applies Date.parse, if necessary
        date = date ? new Date(date) : new Date;
        if (isNaN(date)) throw SyntaxError("invalid date");

        mask = String(dF.masks[mask] || mask || dF.masks["default"]);

        // Allow setting the utc argument via the mask
        if (mask.slice(0, 4) == "UTC:") {
            mask = mask.slice(4);
            utc = true;
        }

        var _ = utc ? "getUTC" : "get",
            d = date[_ + "Date"](),
            D = date[_ + "Day"](),
            m = date[_ + "Month"](),
            y = date[_ + "FullYear"](),
            H = date[_ + "Hours"](),
            M = date[_ + "Minutes"](),
            s = date[_ + "Seconds"](),
            L = date[_ + "Milliseconds"](),
            o = utc ? 0 : date.getTimezoneOffset(),
            flags = {
                d:    d,
                dd:   pad(d),
                ddd:  dF.i18n.dayNames[D],
                dddd: dF.i18n.dayNames[D + 7],
                m:    m + 1,
                mm:   pad(m + 1),
                mmm:  dF.i18n.monthNames[m],
                mmmm: dF.i18n.monthNames[m + 12],
                yy:   String(y).slice(2),
                yyyy: y,
                h:    H % 12 || 12,
                hh:   pad(H % 12 || 12),
                H:    H,
                HH:   pad(H),
                M:    M,
                MM:   pad(M),
                s:    s,
                ss:   pad(s),
                l:    pad(L, 3),
                L:    pad(L > 99 ? Math.round(L / 10) : L),
                t:    H < 12 ? "a"  : "p",
                tt:   H < 12 ? "am" : "pm",
                T:    H < 12 ? "A"  : "P",
                TT:   H < 12 ? "AM" : "PM",
                Z:    utc ? "UTC" : (String(date).match(timezone) || [""]).pop().replace(timezoneClip, ""),
                o:    (o > 0 ? "-" : "+") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),
                S:    ["th", "st", "nd", "rd"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]
            };

        return mask.replace(token, function ($0) {
            return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);
        });
    };
}();

// Some common format strings
dateFormat.masks = {
    "default":      "ddd mmm dd yyyy HH:MM:ss",
    shortDate:      "m/d/yy",
    mediumDate:     "mmm d, yyyy",
    longDate:       "mmmm d, yyyy",
    fullDate:       "dddd, mmmm d, yyyy",
    shortTime:      "h:MM TT",
    mediumTime:     "h:MM:ss TT",
    longTime:       "h:MM:ss TT Z",
    isoDate:        "yyyy-mm-dd",
    isoTime:        "HH:MM:ss",
    isoDateTime:    "yyyy-mm-dd'T'HH:MM:ss",
    isoUtcDateTime: "UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"
};

// Internationalization strings
dateFormat.i18n = {
    dayNames: [
        "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat",
        "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
    ],
    monthNames: [
        "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec",
        "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
    ]
};

// For convenience...
Date.prototype.format = function (mask, utc) {
    return dateFormat(this, mask, utc);
}; 
```

# c# - smtp 异常失败的收件人

> ID：12399847
> 
> 赞同：2
> 
> 时间：2012-09-13T05:19:12.617
> 
> 标签：c#, .net, exception-handling, smtpclient

我的应用程序中有以下代码：

```
catch (SmtpException oSMTPException)
{
    string sFailedEmailIds = string.Empty;
    string[] sMailids = null;

    ((System.Net.Mail.SmtpFailedRecipientsException)(oSMTPException)).
        InnerExceptions[0].FailedRecipient
} 
```

我有许多邮件 ID 尚未发送到这些邮件 ID。我想将详细信息存储在一个字符串`sFailedEmailIds`中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-26T15:03:43.100

我不完全知道你想要存储什么，但我猜你想要所有的电子邮件 ID，所以这是我最近做的类似的事情：

```
catch (SmtpFailedRecipientsException e)
{
    string sFailedEmailIds = "";

    for (int i = 0; i < e.InnerExceptions.Length; i++)
    {
        SmtpStatusCode status = e.InnerExceptions[i].StatusCode;
        if (status == SmtpStatusCode.MailboxBusy ||
            status == SmtpStatusCode.MailboxUnavailable) {
            sFailedEmailIds += e.InnerExceptions[i].FailedRecipient.Split('<', '>')[1] + ", ";
        } else {
            // other statuscode that you want to handle
        }
    }

    return sFailedEmailIds;
} 
```

我使用 SmtpFailedRecipientsException 而不是 SmtpException 因为它包含所有失败的电子邮件。

希望能帮助到你。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:28:11.363

```
string sFailedEmailIds = String.Join(",", ((System.Net.Mail.SmtpFailedRecipientsException)(oSMTPException)).InnerExceptions.Select(x=>x.FailedRecipient)); 
```

# python - Python用循环替换函数中的多个单词？

> ID：12399848
> 
> 赞同：-1
> 
> 时间：2012-09-13T05:19:19.200
> 
> 标签：python

如何使用`loop`. 例如，假设我有一个`function`名为“ `changeWords`”，我希望这个函数将三个单词*can't*、*should not*、*don't*更改为*can't*、*should not*、*do not*。所以当输入函数时，'`changeWords("I don't know how to do this")'`应该返回'`I do not know how to do this".`

澄清：

```
changeWords(“I can't eat") -> “I can not eat"
changeWords(“I don't like swimming.”) -> “I do not like swimming.”
changeWords(“I shouldn't do that.”) -> “I should not do that.” 
```

我的尝试：

```
def stringChange(a):
a = ""
for line in stringChange("a"):
    line = text.replace("a","can't","can not")
    if not line: break
    return line 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:27:23.873

```
>>> def changeWords(s):
        for old, new in (
                ("can't", "can not"),
                ("shouldn't", "should not"),
                ("don't", "do not"),
            ):    
            s = s.replace(old, new)
        return s

>>> changeWords("I don't know how to do this")
'I do not know how to do this' 
```

# gtk - 如何绕过python中gtk事件循环的阻塞行为

> ID：12399851
> 
> 赞同：1
> 
> 时间：2012-09-13T05:19:38.420
> 
> 标签：gtk, pygtk, gtk2

我已将问题简化为这个简单的示例脚本：

```
#! /usr/bin/python

import hello
from threading import Thread

def myfunc():

        hello.HelloWorld().main()

t = Thread(target=myfunc)
t.start()

print '\nstill running ???' 
```

问题是我试图找到某种方法来绕过 gtk 事件循环的阻塞行为。这可能吗？如您所见，即使我从单独的线程调用该类，事件循环也会阻止主脚本中的进一步进展（“仍在运行 ???”在 gtk 应用程序关闭之前不会打印）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:29:16.690

您应该阅读[pyGTK 的线程最佳实践](http://faq.pygtk.org/index.py?req=show&file=faq20.006.htp)。GTK 应该在主线程中使用，但我仍然同意这很奇怪。

我试过以下代码：

```
#! /usr/bin/python

import gtk
from time import sleep
from threading import Thread

def myfunc():
    w = gtk.Window()
    l = gtk.Label()
    w.add(l)
    w.show_all()
    w.connect("destroy", lambda _: gtk.main_quit())
    gtk.main()

def myfunc2():
    sleep (3)

t = Thread(target=myfunc)
#t = Thread(target=myfunc2)
t.start()

print '\nstill running ???' 
```

更糟糕的是，几乎总是在关闭应用程序后打印消息，但*有时*它会出现在之前。所以，这里有一个奇怪的行为。

# iphone - 如何在 iPhone 应用程序中的 Twitter 上发布图像

> ID：12399854
> 
> 赞同：1
> 
> 时间：2012-09-13T05:19:48.223
> 
> 标签：iphone, ios, xcode

在我的应用程序中，我想集成 twitter。我也想通过这个 twitter 上传图片。是否有任何开源可以在 iphone 应用程序中通过 twitter 发布图片。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:53:28.973

您可以在 ios 5.0（及更高版本）中使用以下代码使用 twitter 框架将照片发布到 twitter 帐户。

```
if([TWTweetComposeViewController canSendTweet])
    {
    TWTweetComposeViewController *tweetSheet = [[TWTweetComposeViewController alloc] init];
    [tweetSheet setInitialText:@"text to send"];
    [tweetSheet addImage:[UIImage imageNamed:@"imageToSend"]];

    [self presentModalViewController:tweetSheet animated:YES];

    tweetSheet.completionHandler = ^(TWTweetComposeViewControllerResult result)  {
      [self dismissModalViewControllerAnimated:YES];
      switch (result) {
        case TWTweetComposeViewControllerResultCancelled:
            break;
        case TWTweetComposeViewControllerResultDone:
            break;
        default:
            break;
       }
     };
   }else
   {
    // you can show alert here
   } 
```

# c# - 每天自动刷新图像

> ID：12399861
> 
> 赞同：1
> 
> 时间：2012-09-13T05:20:28.893
> 
> 标签：c#, winforms, visual-c++, c++-cli

我需要在 Windows 窗体应用程序中定期显示一些图像。图片的来源是一个固定的 URL 链接。链接中的图片每天都会自动更新。我需要的是让我的应用程序能够每天自动刷新图像。我怎样才能在`C++/CLI`or中做到这一点`C#`？我还想提一下，我必须通过代理 IP 和端口才能访问 Internet（链接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:31:37.290

假设它是一个图片框：

```
private void PopulatePictureBox()
{
 ImageList images = new ImageList();
 images.Images.Add(LoadImage("http://www.website.com/123.jpg"));
 picbox.Image = imagelst.Images[0];
} 
```

假设它是一个 listView 控件：

```
private void PopulateListView()
{
    ImageList images = new ImageList();
    images.Images.Add(LoadImage("http://www.website.com/123.jpg"));
    images.Images.Add(LoadImage("http://www.website.com/456.jpg"));

    listView1.SmallImageList = images;
    listView1.Items.Add("An item", 0);
    listView1.Items.Add("Another item item", 1);
} 
```

这是从网络获取图像的功能：

```
private Image LoadImage(string url)
{
    System.Net.WebRequest request =
        System.Net.WebRequest.Create(url);

    System.Net.WebResponse response = request.GetResponse();
    System.IO.Stream responseStream =
        response.GetResponseStream();

    Bitmap bmp = new Bitmap(responseStream);

    responseStream.Dispose();

    return bmp;
} 
```

不确定您是否希望将图片保存到磁盘，我会留给您选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:26:58.370

只需使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)或[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)从 URL 下载图像。然后以任何你想要的方式使用它。两者都具有与代理相关的属性。相应地设置这些，你就可以开始了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:27:18.227

您可以实现一个保存上次刷新日期的例程，并将每小时一次的时间与当前时间进行比较，例如：

```
current.subtract(lastUpdated).Days > 1 
```

# java - 应用程序崩溃报告，但在模拟器上还可以

> ID：12399872
> 
> 赞同：0
> 
> 时间：2012-09-13T05:21:07.993
> 
> 标签：java, android, android-emulator

我觉得很奇怪，Android 的应用程序在 Emulator 上运行良好。

但在真实设备中，它崩溃并给出以下错误（通过开发者控制台）：

```
java.lang.Error: Unresolved compilation problem: 
The import com.recipes cannot be resolved

at com.etraks.mauritianrecipes.app.SplashScreen.<init>(SplashScreen.java:3)
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1319)
at android.app.Instrumentation.newActivity(Instrumentation.java:1027)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1885)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
at android.app.ActivityThread.access$600(ActivityThread.java:128)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4517)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
at dalvik.system.NativeStart.main(Native Method) 
```

我的问题是为什么模拟器上不会发生这种崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:28:44.050

如果您在 jar 文件中有导入 com.recipes，请转到 properties->javabuildpath->order 和 export 。如果还没有包含 jar 文件，也请在此处包含（标记为选中）。

# c# - MVC3 中带有 jQ grid 的 REST Web 服务示例

> ID：12399877
> 
> 赞同：0
> 
> 时间：2012-09-13T05:21:28.457
> 
> 标签：c#, .net, asp.net-mvc-3, jquery-ui, rest

我是使用 jQgrid 和 REST Web 服务的初学者。请举个例子

如何在 jQgrid 中使用 REST Web 服务。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:35:50.633

这篇关于[jqGrid、REST、AJAX 和 Spring MVC 集成](http://www.javacodegeeks.com/2011/07/jqgrid-rest-ajax-spring-mvc-integration.html)的帖子应该对您有所帮助。

# java - 使用准备好的语句进行选择查询时出现 SQL 异常

> ID：12399879
> 
> 赞同：4
> 
> 时间：2012-09-13T05:22:07.290
> 
> 标签：java, db2, sqlexception

```
StringBuilder sqlQry = new StringBuilder();
sqlQry.append("SELECT LIB, PATH")
.append(" FROM OBJ")
.append(" INNER JOIN SRC ON SRC.MBR = OBJ.LOBJ")
.append(" WHERE  TYPE = '*PGM'")
.append(" AND SRC.PATH LIKE '").append("?").append("%'");

PreparedStatement ps = accssConn.prepareStatement(sqlQry.toString());
ps.setString(1, path);

rs = ps.executeQuery(); 
```

大家好，我收到以下异常

```
[jcc][10145][10844][3.63.123] Invalid parameter 1: Parameter index is out of range. ERRORCODE=-4461, SQLSTATE=42815 
```

列限制为 255，路径为 = "C:\Documents and Settings\xyz\Desktop\xyzs" 并且在语句中运行良好。那么，它在准备好的语句中抛出异常的原因是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:45:33.770

```
StringBuilder sqlQry = new StringBuilder();

sqlQry.append("SELECT LIB, PATH")
.append(" FROM OBJ")
.append(" INNER JOIN SRC ON SRC.MBR = OBJ.LOBJ")
.append(" WHERE  TYPE = '*PGM'")
.append(" AND SRC.PATH LIKE ").append("?");

PreparedStatement ps = accssConn.prepareStatement(sqlQry.toString());

ps.setString(1, path + "%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:42:15.033

检查您的单引号，我认为其中一个缺少结束引号。还可以尝试将单引号更改为双引号并像 \"*PGM\" 一样转义它们

# vaadin - 如何为 Vaadin 表设置多行标题？

> ID：12399881
> 
> 赞同：2
> 
> 时间：2012-09-13T05:22:30.807
> 
> 标签：vaadin

> **可能重复：**
> [创建多行表头](https://stackoverflow.com/questions/8791269/creating-multirow-table-headers)

Vaadin如何设置多行标题？我想设置两行表头，例如：-

```
<pre>
     ------------------------------------------------------------------------------
             Name              |                          | 
    ---------------------------|          age             |          sex 
        F name   |    Lname    |                          |
    -------------------------------------------------------------------------------
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:28:00.900

不幸的是，这在 Vaadin Table 中是不可能的。

[编辑：在此处](https://stackoverflow.com/a/8800594/270910)查看 Charles 的答案以获取解决方法。另一种方法是修改 Table 组件的客户端实现并添加对那些多行标题的支持，但这并非易事。

# wcf - 这些程序行需要等效的 WCF 配置

> ID：12399887
> 
> 赞同：2
> 
> 时间：2012-09-13T05:23:16.883
> 
> 标签：wcf, configuration, app-config, wcf-client, mtom

我目前正在努力为通过 WCF / 服务参考构建的 Web 服务客户端提供正确的配置。我能够以编程方式创建绑定和配置端点，但理想情况下，我希望这些设置进入 WCF 配置文件。但是我不确定如何在其中定义与以下设置匹配的客户绑定（我省略了 mtom 和 https 部分的更详细设置......）：

```
 Dim mtom As MtomMessageEncodingBindingElement =
        New MtomMessageEncodingBindingElement(MessageVersion.Soap12, Encoding.UTF8)

    Dim https As HttpsTransportBindingElement = New HttpsTransportBindingElement()

    Dim binding As CustomBinding = New CustomBinding()
    binding.Elements.Add(mtom)
    binding.Elements.Add(https)

    client.Endpoint.Binding = binding 
```

我知道我需要 customBinding 元素并引用客户端部分中的元素，但我似乎无法让自定义绑定像上面的代码一样工作。任何帮助表示赞赏。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:38:32.930

config 中的等效自定义绑定如下所示。

```
<customBinding>
  <binding name="SO_12399887">
    <mtomMessageEncoding messageVersion="Soap12" writeEncoding="utf-8" />
    <httpsTransport />
  </binding>
</customBinding> 
```

# android - 触发日历客户端的 URL 方案

> ID：12399891
> 
> 赞同：19
> 
> 时间：2012-09-13T05:23:41.633
> 
> 标签：android, calendar, google-calendar-api, icalendar, url-scheme

我有一个生成动态日历（icalendar）的网站。让我们假设这个日历可以通过 HTTP 在这样的 URL 上访问

```
http://www.example.com/cal?q=<user query> 
```

到目前为止一切正常。

现在我想让用户用他们最喜欢的日历客户端订阅这个日历。对于 ios，如果我使用`webcal://`URL 方案发布日历 URL，我可以实现这一点。

1.  **是否有适用于 Android 的等效 URL 方案？**
2.  **我可以让用户将此日历导入他的 Google 日历吗？**
3.  **还有其他我没有想到的选择吗？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-12T07:58:48.630

由于这显示为未回答，并且对该问题表示赞成，因此我将我的评论作为更正式的答案：

1.  日历文件的“标准”是具有 mime 类型文本/日历的 http/s url .ics。Webcal 只是苹果在做自己的事情。所有日历应用程序都应接受开放标准

2.  是的，如果您的网址可公开访问，他们可以订阅它。或者，他们可以一次性导入

3.  RFC 5545 标准是日历和事件的方式[https://www.rfc-editor.org/rfc/rfc5545#section-8.1](https://www.rfc-editor.org/rfc/rfc5545#section-8.1)

# jquery - Jquery 颜色选择器绑定处理程序创建多个 div

> ID：12399892
> 
> 赞同：2
> 
> 时间：2012-09-13T05:23:45.093
> 
> 标签：jquery, knockout.js, color-picker

我正在尝试将此 jquery[颜色选择器](http://laktek.com/2008/10/27/really-simple-color-picker-in-jquery/)与 knockout.js 一起使用。我已经编写了自定义绑定处理程序来将颜色选择器输入控件与我的 viewModel 颜色值绑定。

这是绑定处理程序代码：

```
ko.bindingHandlers.colorPicker = {
init: function (element, valueAccessor, allBindingsAccessor) {

    //initialize datepicker with some optional options
    var options = allBindingsAccessor().colorPickerOptions || {};
    $(element).colorPicker(options);

    //handle the field changing
    ko.utils.registerEventHandler(element, "change", function () {
        var observable = valueAccessor();
        observable($(element).colorPicker("value"));
    });

    //handle disposal (if KO removes by the template binding)
    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        $(element).colorPicker("destroy");
    });

},
update: function (element, valueAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());       
    $(element).colorPicker("value", value);        
} 
```

和 HTML：

```
 <input type="text" data-bind="colorPicker: newEvent().color, colorPickerOptions: { value:newEvent().color }"/> 
```

问题是，当我更改颜色时，每次更改颜色时都会创建多个 div，如图所示。

![在此处输入图像描述](../Images/d3e618cbc806c3d6bd2de8a83db3369a.png)

谁能确定我的代码中有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:43:03.337

这是 jQuery ColorPicker 绑定处理程序的更新代码（与 knockout.js 库一起使用）。

```
ko.bindingHandlers.jqColorPicker = {
  init: function (element, valueAccessor, allBindingsAccessor) {

    // set default value
    var value = ko.utils.unwrapObservable(valueAccessor());
    $(element).val(value);

    //initialize datepicker with some optional options
    var options = allBindingsAccessor().colorPickerOptions || {};
    $(element).colorPicker(options);

    //handle the field changing
    ko.utils.registerEventHandler(element, "change", function () {            
        var observable = valueAccessor();            
        observable($(element).val());                        
    });

    //handle disposal (if KO removes by the template binding)
    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        $(element).colorPicker("destroy");
    });

  },
  update: function (element, valueAccessor, allBindingsAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    $(element).val(value);        
    $(element).change();        
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:26:50.617

在您的更新代码中，您正在有效地创建新的颜色选择器。

当颜色发生变化时，会调用更新函数并在那里创建一个新的选择器。如果你尝试 ' *$(element).colorPicker("value", value);* ' 在 firebug 中，你会看到它不是一个 setter，而是一个构造函数。

# perl - Perl：如何拆分

> ID：12399893
> 
> 赞同：-1
> 
> 时间：2012-09-13T05:23:47.403
> 
> 标签：perl, split

我的代码如下：

```
VAR DS 0D
    DC    AL1(045),AL2(286),AL2(117),AL2(290) 
```

我需要将其拆分并以以下两种格式推送到我的输出文件...

```
format1:
VAR DS  0D
    DC  AL1(045)
    DC  AL2(286)
    DC  AL2(117)
    DC  AL2(290)

format2:
VAR D 
F1  A 045
F2  A 286
F3  A 117
F4  A 290 
```

如何使用 Perl 执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:03:43.497

> 但我正在努力设置标志 F1、F2、F3、F4。

提取`DC`值后，

```
my @dc = qw( AL1(045) AL2(286) AL2(117) AL2(290) ); 
```

您可以使用以下内容：

```
for my $i (0..$#dc) {
   my ($letter, $number) = $dc[$i] =~ /^(.)..\(([0-9]+])\)\z/s
      or die;
   printf("F%-2s %s %s\n", $i, $letter, $number);
} 
```

# ruby - 如何开始在 Emacs 中使用 Xiki？

> ID：12399894
> 
> 赞同：19
> 
> 时间：2012-09-13T05:23:51.010
> 
> 标签：ruby, emacs, editor, xiki

试图让[xiki](http://xiki.org/)工作。

它已安装：

```
$ xiki directory
/Users/joshcheek/.rvm/gems/ruby-1.9.3-p194/gems/xiki-0.6.3/ 
```

移动所有文件的shell脚本已成功执行AFAIK，但我关闭了该shell，因此无法显示其输出。不过，没有什么让我觉得自己错了。

看起来服务器正在运行：

```
$ xiki status
xiki_process.rb: running [pid 93257] 
```

我已经安装了 emacs（我在安装 xiki 之前安装了它），并设置了 init 文件：

```
$ cat ~/.el4r/init.rb 
# Beginning of the el4r block:
# RCtool generated this block automatically. DO NOT MODIFY this block!
# This is the el4r initialization file.
# End of the el4r block.
# User-setting area is below this line.
# User-setting area is below this line.

$LOAD_PATH.unshift "/Users/joshcheek/.rvm/gems/ruby-1.9.3-p194/gems/xiki-0.6.3/lib"
require 'xiki'
Xiki.init

KeyBindings.keys   # Use default key bindings
Themes.use "Default"  # Use xiki theme 
```

但是当我运行 emacs 时，它会拆分屏幕并将此错误放在底部：

```
Warning (initialization): An error occurred while loading `/Users/joshcheek/.emacs':

error: el4r-instance is dead.

To ensure normal operation, you should investigate and remove the
cause of the error in your initialization file.  Start Emacs with
the `--debug-init' option to view a complete error backtrace. 
```

当我按 Option-l 时（也尝试了 Escape l，以防选项不是元），似乎没有发生任何事情（当我在欢迎窗口窗格中执行此操作时，它说它是只读的，当我在底部执行此操作时一个说 xiki 死了，它什么也没做）。回到控制台，`xiki status`仍然说它正在使用相同的 pid 运行。

有两个日志，每个都有相同的问题：

```
$ tail /tmp/el4r-joshcheek.9*
==> /tmp/el4r-joshcheek.92157.log <==
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:797:in `call'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:797:in `readline'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:797:in `el4r_recv'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:790:in `el4r_get'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:768:in `block in el4r_wait_expr'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:836:in `el4r_with_call'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:765:in `el4r_wait_expr'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:760:in `el4r_wait_expr_loop'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:1102:in `<main>'
2012-09-12 23:50:14 -0500:Exiting.

==> /tmp/el4r-joshcheek.93192.log <==
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:797:in `call'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:797:in `readline'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:797:in `el4r_recv'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:790:in `el4r_get'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:768:in `block in el4r_wait_expr'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:836:in `el4r_with_call'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:765:in `el4r_wait_expr'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:760:in `el4r_wait_expr_loop'
  from /Users/joshcheek/.rvm/rubies/ruby-1.9.3-p194/bin/el4r-instance:1102:in `<main>'
2012-09-12 23:53:41 -0500:Exiting. 
```

我不知道我应该如何加载它，我以为我只是启动 emacs，我可以开始双击单词之类的东西`table`到目前为止它没有这样做，但我不认为它正确地与emacs交谈。

当我查看 emacs gui 中的信息时，它说它是 24.2 版（从[这里](http://emacsformacosx.com/)安装），当我`emacs --version`在控制台上这样做时，它说它是 22.1.1 版我可以解决这个问题并尝试将它们都升级到 24 版，但我什至不知道这是否是问题所在（尽管我可能更喜欢从控制台使用这些）。

我尝试查找有关如何使用它的文档，但这种方式似乎并不多。尝试加入谷歌组，我会在那里问，但我的会员资格正在等待中。

我只是希望能够尝试视频中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:54:44.903

看起来你已经安装了所有东西。如果您使用的是 rvm，您是否在安装所有内容时更改了 ruby​​ 版本？当我使用与安装 el4r 不同的 ruby​​ 使用 rvm 启动 emacs 时，我对 emacs 说 el4r 实例已死有同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:19:14.673

我今天遇到了同样的问题。我终于`el4r`单独安装了，现在可以正常工作了。请参阅[http://www.rubyist.net/~rubikitch/computer/el4r/index.en.html#label:10](http://www.rubyist.net/~rubikitch/computer/el4r/index.en.html#label:10)。根据您的系统，您可能需要`sudo`一些命令。

此外，在执行之前`ruby -S el4r-rctool...`，您需要将目录更改为`/path_to_where_you_downloaded_el4r/el4r-1.0.4/bin/`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:12:02.220

可能您以错误的方式或从错误的来源安装了 el4r。我在这里创建了一个类似的问题：[How can I install el4r in emacs 24?](https://stackoverflow.com/questions/13312698/how-can-i-install-el4r-in-emacs-24/13313450#13313450)

如果您在 xiki 之前（手动）安装了 el4r，您将遇到问题。[要么按照我上面提供的链接上的说明进行操作，要么卸载您当前安装的 el4r，然后完全按照他们页面](https://github.com/trogdoro/xiki)上的说明重新安装 xiki 。

# html - 溢出隐藏的绝对 div

> ID：12399895
> 
> 赞同：0
> 
> 时间：2012-09-13T05:23:59.510
> 
> 标签：html, css, css-float

我想显示从容器溢出的绝对 div。

[这是小提琴](http://jsfiddle.net/kongaraju/bhYUa/2/)

以下是我的要求：

1.  修复了溢出内容的 div。
2.  overflow-y 应该是自动滚动，但不是 overflow-y
3.  应显示绝对 div。
4.  页面不应该滚动唯一的固定位置 div 应该是滚动的

这是我遇到的问题：

1.  在为面板放置溢出属性时，绝对 div 被隐藏。
2.  并在删除溢出属性时面板不滚动。

css

```
 #panel {
                position: fixed;
                top: 0px;
                right: 20%;
                bottom: 0px;
                background: snow;
            }
            .contact {
                background: skyblue;
                position: relative;
                height:50px;
            }
            .std {
                width: 80px;
            }
            .vtl {
                position: absolute;
                background: red;
                display: none;
                left:-153px;
                margin-top:-35px;
                width: 150px;
                height: 50px;
            }
            .vtl:after {
                content: ' ';
                height: 0;
                position: absolute;
                width: 0;
                border: 10px solid transparent;
                border-left-color: red;
                left: 100%;
                top: 10px;
            }
            .contact:hover .vtl {
                display: block;
            } 
```

html

```
<div id="panel">
            <div class="contact">
                <div class="std">
                    Hover me!
                </div>
                <div class="vtl">
                    tools
                </div>
            </div>
            <div class="contact">
                <div class="std">
                    Hover me!
                </div>
                <div class="vtl">
                    tools
                </div>
            </div>
            <div class="contact">
                <div class="std">
                    Hover me!
                </div>
                <div class="vtl">
                    tools
                </div>
            </div>

                    ......

                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:04:07.570

由于`<div class="std">`包含在`<div id="panel">`其中具有固定位置，因此您需要扩展 的宽度`#panel`才能显示`<div class="std">`. 例如：

HTML

```
<div id="panel">
  <div class="contact">
    <div class="std">
     Hover me!
    </div>
    <div class="vtl">
     tools
    </div>
  </div>
</div> 
```

CSS

```
#panel {
  position: fixed;
  top: 0px;
  right: 20%;
  bottom: 0px;
  background: snow;
  width:260px;
  overflow: auto;
}
.contact {
  background: skyblue;
  position: relative;
  height:50px;
}
.std {
  width: 80px;
  float:right;
}
.vtl {
  position: absolute;
  background: red;
  display: none;
  width: 150px;
  margin-left:10px;
  margin-top:-10px;   
  height: 50px;
}
.vtl:after {
  content: ' ';
  height: 0;
  position: absolute;
  width: 0;
  border: 10px solid transparent;
  border-left-color: red;
  left: 100%;
  top: 10px;
}
.contact:hover .vtl {
  display: block;
}​ 
```

这是一个工作示例：http: [//jsfiddle.net/pZQrA/](http://jsfiddle.net/pZQrA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:10:39.830

我希望这有帮助。对于 id 面板，放置绝对位置。

```
#panel {
            position: absolute;
            top: 0px;
            right: 20%;
            bottom: 0px;
            background: snow;

        } 
```

# c - 在 c 中，我如何检测字节的任何位是否等于 0

> ID：12399896
> 
> 赞同：1
> 
> 时间：2012-09-13T05:24:03.763
> 
> 标签：c, bit

我能够使用 (x && 0xf) 检查 1，但我不知道如何检测 0。

```
check_zeros(int y){

} //return 1 if 0 is found 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T05:25:03.030

你可以这样做：

```
int check_zeros(int y) {
    return (y & 0xff) != 0xff;
} 
```

`0xff`表示一个所有位都设置为 1 的字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:38:25.547

当你声明你的函数时， y 不是一个字节，它是一个整数。所以我假设你想知道 y 中的任何位是否为零。

```
int check_zeros(int y)
{
    return ((~y) != 0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T05:27:56.120

假设它是一个 8 位值（从 0 到 0xFF）：

```
int check_zeros(int y) {
    return y < 0xFF;
    // alternatively: return y != 0xFF;
} 
```

# android - 带有 IMEOption DONE 或 NEXT 的多行 EditText 不起作用

> ID：12399898
> 
> 赞同：1
> 
> 时间：2012-09-13T05:24:13.163
> 
> 标签：android, android-edittext, multiline

我正在尝试在多行编辑文本上查看带有下一个按钮的键盘。但这对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T15:03:31.843

您不能在多行编辑文本上设置 IME 操作，因为将用于下一个/完成/搜索/...操作的键盘按钮必然是一个 ENTER/RETURN 按钮以插入换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T17:34:20.703

不要害怕，这是可以做到的。虽然下面的代码完美运行，但不幸的是我不记得我从哪里得到代码，所以不能给作者他/她应得的荣誉。

```
////////////Code to Hide SoftKeyboard on Enter (DONE) Press///////////////
editText.setRawInputType(InputType.TYPE_CLASS_TEXT|InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD|InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS);
editText.setImeActionLabel("DONE",EditorInfo.IME_ACTION_DONE);              //Set Return Carriage as "DONE"
editText.setImeOptions(EditorInfo.IME_ACTION_DONE);

editText.setOnEditorActionListener(new TextView.OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) 
    {
                if (event == null) {
                    if (actionId == EditorInfo.IME_ACTION_DONE) {
                        // Capture soft enters in a singleLine EditText that is the last EditText
                        // This one is useful for the new list case, when there are no existing ListItems
                        editText.clearFocus();
                        //hide SoftKeyboard
                        InputMethodManager inputMethodManager = (InputMethodManager)  getActivity().getSystemService(Activity.INPUT_METHOD_SERVICE);
                        inputMethodManager.hideSoftInputFromWindow(getActivity().getCurrentFocus().getWindowToken(), 0);
                    }

                    else if (actionId == EditorInfo.IME_ACTION_NEXT) {
                        // Capture soft enters in other singleLine EditTexts
                    } else if (actionId == EditorInfo.IME_ACTION_GO) {
                    } else {
                        // Let the system handle all other null KeyEvents
                        return false;
                    }
                } 
        else if (actionId == EditorInfo.IME_NULL) {
                    // Capture most soft enters in multi-line EditTexts and all hard enters;
                    // They supply a zero actionId and a valid keyEvent rather than
                    // a non-zero actionId and a null event like the previous cases.
                    if (event.getAction() == KeyEvent.ACTION_DOWN) {
                        // We capture the event when the key is first pressed.
                    } else {
                        // We consume the event when the key is released.
                        return true;
                    }
                } 
        else {
                    // We let the system handle it when the listener is triggered by something that
                    // wasn't an enter.
                    return false;
                }
                return true;
        }
}); 
```

为了将焦点传递给**Next** EditText，请使用`edit_text2.requestFocus()`并删除 Hide SoftKeyboard 代码。

# android - 安卓的电子邮件日志

> ID：12399901
> 
> 赞同：0
> 
> 时间：2012-09-13T05:24:29.510
> 
> 标签：android

我有一个已安装在大约 50 台设备中的非市场应用程序。

使用 logcat 我正在打印日志。

我希望定期通过电子邮件发送存储这些日志的日志/文件。

是否有可能以编程方式进行？

是否有任何外部工具可以提供帮助？

我浏览了 sendmelogs jar，但我需要定期发送所有日志，而不仅仅是在应用程序崩溃时发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:43:17.610

您是否尝试过错误感知？看[这个](http://mooriandroid.blogspot.in/p/remotly-get-your-error-to-your-mail.html)例子；mi8 有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:10:23.520

首先，一个友好的提醒是，从某人的设备获取日志可能会侵犯许多用户的隐私。

我建议通过在警报对话框上单击“确定”来让用户知道他们何时向您发送日志。如果用户说是，您可以通过执行命令获取日志

```
logcat -d 
```

查看[http://www.helloandroid.com/tutorials/reading-logs-programatically](http://www.helloandroid.com/tutorials/reading-logs-programatically)

其他选项可以使用网络服务定期发送日志。

阿曼高塔姆

# jqgrid-formatter - JQGrid 禁用/启用 - 格式化程序：'showlink'

> ID：12399902
> 
> 赞同：2
> 
> 时间：2012-09-13T05:24:44.467
> 
> 标签：jqgrid-formatter

根据某些条件，我想在我的 javascript 函数中动态启用或禁用 Name 列的链接。下面是我的网格代码：

```
jQuery("#paygrid").jqGrid({
url: url+'Payment/paymentList',
datatype: "xml",
colNames:["Name","Receiced Amount","Total Amount","Status","Mode","Id"],
colModel:[
    {name:"serviceProviderName",index:"serviceProviderName", width:180, align:"center",xmlmap:"serviceProviderName",formatter: 'showlink',
                               formatoptions: { baseLinkUrl: 'paymentdetail.html', idName: 'paymentId'}
                           },
    {name:"recievedAmount",index:"recievedAmount", width:140, align:"center",xmlmap:"recievedAmount",search: false},
    {name:"totalAmount",index:"totalAmount", width:140, align:"center",xmlmap:"totalAmount",search: false},
    {name:"status",index:"status", width:70, align:"center",xmlmap:"status"},
    {name:"paymentType",index:"paymentType", width:100, align:"center",xmlmap:"paymentType",search: false},
    {name:"paymentId"  ,index:"paymentId", width:200, key: true, hidden:"true", align:"center",xmlmap:"paymentId"}

],
height:250,
rowNum:100,
loadonce: true,
viewrecords: true,
gridview:true,
xmlReader: {
        root: "paymentList",
        row: "payment",
        repeatitems: false
},
toolbar: [true,"top"],
}); 
```

在此先感谢您的帮助。

# java - java 1.4 的 XPath 替代方案

> ID：12399907
> 
> 赞同：1
> 
> 时间：2012-09-13T05:25:03.067
> 
> 标签：java, xml, xpath, nodelist

我有一个类的源代码，它是在 Java 1.6 上编写的，它使用 XPath 从 InputStream 获取 XML 并在 XML 文档中进行一些特定的更改。现在我必须使这个类与 Java 1.4 兼容。Netbeans 突出显示 XPath 类“javax.xml.xpath.*”的导入行。我可以使用 XPath 的哪些替代方法从 Java 1.4 中的 XML 的 InputStream 获取 NodeList？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:39:55.250

你的问题，包括你的评论，在术语上是矛盾的。XPath 库没有内置到 JDK 1.4 中，它们是 @since 1.5，尽管在此之前它们在 Web 服务包 (JAX-WS?) 的 JAXP 部分中单独提供了一段时间。

您将不得不从外部包中添加和使用 JAXP，或者直接使用 Apache Xalan，无论喜欢与否。

# c++ - 如何处理mfc中同一个按钮的单击和双击？

> ID：12399908
> 
> 赞同：1
> 
> 时间：2012-09-13T05:25:03.000
> 
> 标签：c++

在我的 VC++ 项目中，我在对话框中使用了一个按钮。我已经添加了按钮的单击事件。现在我想处理同一个按钮的双击事件。所以我为同一个按钮添加了 ON_BN_DOUBLECLICKED(IDC_BUTTON1, OnDBClick)。但它不起作用。谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:29:40.863

看这里： http: [//www.codeproject.com/Articles/2488/Getting-BN_DOUBLECLICK-to-work-for-buttons](http://www.codeproject.com/Articles/2488/Getting-BN_DOUBLECLICK-to-work-for-buttons)

文章描述了如何使它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:38:07.523

从微软文档：

> 此通知代码会自动发送给 BS_USERBUTTON、BS_RADIOBUTTON 和 BS_OWNERDRAW 按钮。其他按钮类型仅在它们具有 BS_NOTIFY 样式时才发送 BN_DOUBLECLICKED。

所以在按钮上设置 BS_NOTIFY 样式。

# ios - 如何在 CoreData 的 NSLog 中显示详细信息？建议我一个解决方案

> ID：12399910
> 
> 赞同：3
> 
> 时间：2012-09-13T05:25:39.163
> 
> 标签：ios, xcode, core-data

我正在使用 foliowin 函数来获取应用程序中的所有记录

```
-(NSArray*)recordsInTable:(NSString*)tableName andManageObjectContext:(NSManagedObjectContext *)manageObjContext
{
    NSError *error=nil;
    // **** log objects currently in database ****
    // create fetch object, this object fetch's the objects out of the database
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName: tableName inManagedObjectContext:manageObjContext];
    [fetchRequest setEntity:entity];
    NSArray *fetchedObjects = [manageObjContext executeFetchRequest:fetchRequest error:&error];
    return  fetchedObjects;
} 
```

并使用以下代码获取记录

```
 NSArray *records=[dbAccessObj recordsInTable:@"Details" andManageObjectContext:managedObjectContext];
    NSLog(@"records %@",records); 
```

我收到这样的日志

```
**records (
    "<Details: 0x76374b0> (entity: Details; id: 0x7636730 <x-coredata://CDEF0797-F141-47A7-902D-9689DCD90B83/Details/p1> ; data: <fault>)",
    "<Details: 0x7637770> (entity: Details; id: 0x7636740 <x-coredata://CDEF0797-F141-47A7-902D-9689DCD90B83/Details/p2> ; data: <fault>)",
    "<Details: 0x7637870> (entity: Details; id: 0x7636750 <x-coredata://CDEF0797-F141-47A7-902D-9689DCD90B83/Details/p3> ; data: <fault>)"
)** 
```

但我想显示所有详细信息的日志，显示如下所示的记录。我犯了什么错误？

```
**{
    age = 11;
    fName = "firstName";
    lName = "lastname";
    sId = 4;
})** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:02:03.423

您的代码中没有错误。您在数组中看到的是“故障”。从核心数据编程指南：

> 故障是 Core Data 用来减少应用程序内存使用的一种机制。
> 
> ...故障是表示尚未完全实现的托管对象的占位符对象，或表示关系的集合对象。
> 
> ...如果在某个阶段访问了故障对象的持久属性，那么 Core Data 会自动检索该对象的数据并初始化该对象。

`executeFetchRequest:`返回一个故障数组（=占位符对象）以节省内存。一旦您检索到对象的属性，该对象就会完全初始化，并且所有属性在调试器中都是可见的。

对于*调试目的（仅限）*，您可以强制 Core Data 通过以下方式完全初始化数组中的所有对象

```
NSArray *allAges = [records valueForKey:@"age"];
NSLog(@"records %@",records); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T15:39:11.787

我认为您可以使用 debugDescription。只需从调试命令行编写：

```
po [coreDataObject debugDescription]; 
```

它会给你详细的信息。

# python - 如何在 Dexterity 的数据网格字段中传递选择字段的列表值？

> ID：12399914
> 
> 赞同：1
> 
> 时间：2012-09-13T05:25:54.830
> 
> 标签：python, plone, dexterity

我的敏捷内容类型中有datagridfield，使用collective.z3cform。我有一个接口类，它将 value_type 定义为我的内容类型中主要数据网格字段的 DictRow。

```
class IAssessment(interface):
    assessment_item=schema.Choice(
        title=u"Assessment Item",
        values=[u"Item 1",u"Item 2"],
        required=False
    )
    reference=schema.TextLine(title=u"Reference",required=False)

class Application(form.Schema,IImageScaleTraversable):
    form.widget(app_assessment=DataGridFieldFactory)
    app_assessment=schema.List(
        title=u"Application Assessment",
        value_type=DictRow(title=u"Application Assessment",schema=IAssessment)
    ) 
```

是否可以使用来自其他内容类型的 portal_catalog 基于目录查询在assessment_item 字段下为 IAssessment 提供值。当我插入 catalog=getToolByName(context, 'portal_catalog') 时出现错误，因为未定义上下文，即使我在 IAssessment 中放置了参数上下文，我仍然得到相同的错误。有没有办法可以在接口类中进行目录查询，如果没有，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:32:07.757

您很可能需要一个上下文源绑定器，它是一种[动态词汇表](http://dexterity-developer-manual.readthedocs.org/en/latest/advanced/vocabularies.html#dynamic-sources)。

```
from zope.schema.interfaces import IContextSourceBinder
from zope.schema.vocabulary import SimpleVocabulary
from Products.CMFCore.utils import getToolByName

@grok.provider(IContextSourceBinder)
def assessmentItems(context):
    catalog = getToolByName(context, 'portal_catalog')
    return SimpleVocabulary.fromItems(
        (result.getId(), result.getObject()) for result in catalog(...)
    ) 
```

在您的字段定义中，然后将其传递为`vocabulary`：

```
assessment_item=schema.Choice(
    title=u"Assessment Item",
    vocabulary=assessmentItems,
    required=False
) 
```

# google-chrome - 我的网站支付页面显示不安全

> ID：12399917
> 
> 赞同：3
> 
> 时间：2012-09-13T05:26:17.667
> 
> 标签：google-chrome, https, google-chrome-extension, httpwebrequest, cakephp-1.3

我在转到我的付款存款页面时收到此错误..

```
[blocked]The page at https:linkurl ran insecure content from http://linkurl/404/ 
```

在点击弹出窗口的支付押金按钮后在谷歌浏览器上进行注册时，会显示一个空白页面和主菜单。但是它在包括 IE8 在内的其他浏览器上运行良好。

我对此感到厌烦----如果您的页面始终通过安全 url (https) 访问，那么您可以尝试访问这些包含文件的安全版本。我认为您可以在这两个文件的 url 中使用 https: 代替 http: 。

如果您想变得花哨，可以检查页面是否安全，然后选择安全或非安全版本的链接。如果您需要，我可以发布一个示例。

没有解决办法！！引导我！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:36:03.170

听起来该页面上的某种资产在`HTTP`应该通过加载时正在加载`HTTPS`。我会检查您的所有图像、CSS 和 JavaScript 文件，并确保它们链接为`HTTPS`. 或者更好的是，查看[协议相对 URL](http://paulirish.com/2010/the-protocol-relative-url/)以避免此问题。

# sql-server - 字符串匹配函数的用户定义函数

> ID：12399922
> 
> 赞同：1
> 
> 时间：2012-09-13T05:26:51.133
> 
> 标签：sql-server

我有两列说 STREET 和 STREETNAME。我想创建一个匹配两个字符串的公共部分并返回公共部分的函数。

我的两行表中的示例

```
STREET          STREETNAME
-----------     -----------------
ORANGE          ORANGE BLOSSOM
MAIN 324-A      MAIN STREET 
```

所以我的功能`print dbo.strMatch([STREET],[STREETNAME])`

输出：

```
ORANGE
MAIN 
```

然后用输出更新另一个名为 sample 的列。

1.  是否可以像这样将列作为参数传递
2.  如果这是合法的，你如何遍历行并比较条目？

我是一名 C++ 程序员，我可以很容易地在 C++ 中创建这个函数，但是我需要在我不熟悉的 SQL 中执行此操作，而且我的书并没有教我执行此操作的任何 SQL 功能。

在 C++ 中，这两列将作为数组或链表等传递。在第 i 次迭代中，我将比较两列中第 i 行的条目。然后我将使用 j=0,1,2,..n 遍历两个字符串，在其中我检查 j=0 上两个字符串的第一个字符，j=1 上的第二个字符，直到匹配失败并将正确的匹配存储到一个字符串并返回该字符串并更新第三个数组。

由于我处理的是表格而不是数组，因此我不知道如何以最有效的方式进行处理。有人可以帮帮我吗。

谢谢

# android - 以编程方式将项目添加到相对布局

> ID：12399924
> 
> 赞同：0
> 
> 时间：2012-09-13T05:26:52.033
> 
> 标签：android, android-layout, android-relativelayout

我有一个具有以下 xml 的相对布局：

```
<RelativeLayout
    android:id="@+id/date_bar_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/navigation_bar_layout"
    android:background="@color/light_gray"
    android:gravity="center">

    <TextView
        android:id="@+id/detaildatetextview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text=""
        android:textColor="@color/black"
        android:textSize="20dp"
        android:textStyle="bold" />
</RelativeLayout> 
```

如您所见，它已经有一个文本视图。在我的代码中的某个地方，我需要在文本视图之前以编程方式添加图像。这意味着首先显示图像，然后显示文本视图。但是当我执行代码时会显示图像，而文本视图则不会。请帮我解决这个问题。我的实现如下：

```
image  = new ImageView(getApplicationContext());
image.setId(0);
dateText = (TextView) dateBarLayout.findViewById(R.id.detaildatetextview);
dateText.setText("Dummy text");
RelativeLayout.LayoutParams params = (LayoutParams) dateBarLayout.getLayoutParams();
params.addRule(RelativeLayout.LEFT_OF, dateText.getId());                       
String icon = "drawable/"+ path;
icon = icon.replaceAll("-", "_");
icon = icon.toLowerCase();
int imageResource = this.getApplicationContext().getResources().getIdentifier(icon, null,this.getApplicationContext().getPackageName());
image.setImageResource(imageResource);
dateBarLayout.addView(image); 
```

我不知道我要去哪里错了。请帮助我摆脱困境。提前致谢...：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:37:56.643

您需要为正在添加的视图设置布局参数，以将其放置在相对布局中，否则它将重叠，布局中的左上视图，因此使用[http://developer.android.com代替 addView(View) /reference/android/view/ViewGroup.html#addView(android.view.View, android.view.ViewGroup.LayoutParams)](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20android.view.ViewGroup.LayoutParams%29)方法将视图添加到布局中。因此，将您的代码更改为以下内容：

```
image  = new ImageView(getApplicationContext());
    image.setId(0);

    dateText = (TextView) dateBarLayout.findViewById(R.id.detaildatetextview);

    dateText.setText("Dummy text");

        RelativeLayout.LayoutParams params = (LayoutParams) dateBarLayout.getLayoutParams();
    params.addRule(RelativeLayout.LEFT_OF, dateText.getId());

        String icon = "drawable/"+ path;
        icon = icon.replaceAll("-", "_");
            icon = icon.toLowerCase();

        int imageResource = this.getApplicationContext().getResources().getIdentifier(icon, null,this.getApplicationContext().getPackageName());

        image.setImageResource(imageResource);
                    dateBarLayout.addView(image, params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T12:22:24.360

```
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<RelativeLayout
android:id="@+id/Rl"
android:layout_width="match_parent"
android:layout_height="wrap_content"
>

 <Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dip"
    android:gravity="left"
    android:onClick="addAddbutton"
    android:text="add"
    android:visibility="visible" />

</RelativeLayout>
</RelativeLayout>

mainActivity.java

package com.example.textboxonclick;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.RelativeLayout;

public class MainActivity extends Activity {

private RelativeLayout Rl;
private EditText myEditText;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
ln = (RelativeLayout) findViewById(R.id.Rl);

 }
 public void addAddbutton(View v) {
 myEditText = new EditText(this);
 Rl.addView(myEditText);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:08:25.273

之后将以下代码添加到您的java文件中`setcontentview(R.layout.main);`，它将解决您的问题。

```
ImageView image = new ImageView(this);
RelativeLayout dateBarLayout=(RelativeLayout)findViewById(R.id.date_bar_layout);
TextView dateText = (TextView) dateBarLayout.findViewById(R.id.detaildatetextview);
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.LEFT_OF, dateText.getId());
image.setLayoutParams(params);
image.setImageResource(R.drawable.ic_launcher);
dateBarLayout.addView(image); 
```

# java - 自动装箱和作废

> ID：12399931
> 
> 赞同：4
> 
> 时间：2012-09-13T05:27:08.120
> 
> 标签：java, generics, void, autoboxing

注意`Integer.TYPE`and `Integer.class`are both和are both `Class<Integer>`，以及如何使用自动装箱在and 和 and之间进行转换。问题是这是否适用于: and are both ，但是你能在and之间“转换”吗？`Double.TYPE``Double.class``Class<Double>``int``Integer``double``Double``void``Void.TYPE``Void.class``Class<Void>``void``Void`

换句话说，假设你有这个接口：

```
public interface Foo<T> {
    public T doSomething();
} 
```

一个类实现可以自由地在其实现中`Foo<Integer>`返回一个，因为它将被装箱。对于返回也是如此。所以，对于 a : 因为permissible 的唯一值是 null （除非你做了奇怪的反射，这很少是合理的），这是否意味着你可以省略强制性的，有效地“装箱” ？`int``doSomething()``int``Foo<Double>``double``Foo<Void>``Void``return null``Void`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T05:30:16.527

> 这是否意味着您可以省略强制返回 null，有效地“装箱”Void？

没有。当然，这很容易自己测试：

```
class Test {
    public Void foo() {
    }
} 
```

编译给出：

```
Error: Test.java:3: missing return statement
    } 
```

...或者您可以阅读关于自动装箱的 JLS（[第 5.1.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)），它没有`Void`在任何地方提及。

# windows-phone-7.1 - windows phone 7 应用程序

> ID：12399949
> 
> 赞同：-1
> 
> 时间：2012-09-13T05:29:41.143
> 
> 标签：windows-phone-7.1

当它向我显示错误/警报时，有人可以帮我找出如何运行我的 Windows Phone 7 应用程序：“一个或多个项目未正确加载。请查看输出窗口”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:18:30.043

这意味着您缺少必要的依赖项或 SDK。听起来可能没有安装 Windows Phone SDK。

# php - PHP SQL：如果变量为空，则跳过查询部分的方法

> ID：12399950
> 
> 赞同：3
> 
> 时间：2012-09-13T05:29:44.687
> 
> 标签：php, mysql

我正在编写一个查询，该查询使用来自搜索表单的输入，其中品牌、类型和价格是可选输入字段：

```
SELECT * FROM `database` WHERE `brand` LIKE "%' . $brand . '%" AND `type` LIKE "%' . $type. '%" AND `price` LIKE "%' . $price . '%" 
```

我想知道如果没有在其中一个字段中输入任何内容，是否有办法说“全部”。例如，如果他们没有在价格字段中输入值，是否有办法告诉 SQL 只说忽略该部分，例如：

```
AND `price` LIKE "*"; 
```

所以结果仍然按品牌和类型过滤，但可以有任何价格。

对此的任何建议表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:37:57.137

正如 Ariel 所提到的，最好让 PHP 在构建查询时进行过滤。这是这样做的代码示例：

```
<?php
$sql = 'SELECT * FROM `database`';
$where = array();
if ($brand !== '') $where[] = '`brand` LIKE "%'.$brand.'%"';
if ($type !== '')  $where[] = '`type` LIKE "%'.$type.'%"';
if ($price !== '') $where[] = '`price` LIKE "%'.$price.'%"';
if (count($where) > 0) {
  $sql .= ' WHERE '.implode(' AND ', $where);
} else {
  // Error out; must specify at least one!
}
// Run $sql 
```

**注意**：请，请，*请*确保在以这种方式使用它们之前对`$brand`,`$type`和`$price`变量内容进行清理，否则您将容易受到 SQL 注入攻击（理想情况下，您应该使用带有准备好的语句的 PHP [PDO](http://www.php.net/manual/en/class.pdo.php)数据库连接器来清理输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:33:15.900

通常您使用前端语言而不是 SQL 来执行此操作。

但`price LIKE '%'`实际上，是否意味着所有（NULL 除外）。所以你可能没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:56:00.460

如果您组织了表单字段，则可以执行以下操作：

```
<?php
    $fields = array(
        // Form    // SQL
        'brand' => 'brand',
        'type'  => 'type',
        'price' => 'price',
    );

    $sql  = 'SELECT * FROM `database`';
    $comb = ' WHERE ';
    foreach($fields as $form => $sqlfield)
    {
        if (!isset($_POST[$form]))
            continue;
        if (empty($_POST[$form]))
            continue;
        // You can complicate your $fields structure and e.g. use an array
        // with both sql field name and "acceptable regexp" to check input
        // ...

        // This uses the obsolete form for mysql_*
        $sql .= $comb . $sqlfield . ' LIKE "%'
             . mysql_real_escape_string($_POST[$form])
             . '"';
        /* To use PDO, you would do something like
             $sql .= $comb . $sqlfield . 'LIKE ?';
             $par[] = $_POST[$form];
        */
        $comb = ' AND ';
    }
    // Other SQL to go here
    $sql .= " ORDER BY brand;";

    /* In PDO, after preparing query, you would bind parameters
       - $par[0] is value for parameter 1 and so on.
       foreach($par as $n => $value)
           bindParam($n+1, '%'.$value.'%');
    */ 
```

# javascript - 只重新加载网页的一部分

> ID：12399952
> 
> 赞同：1
> 
> 时间：2012-09-13T05:30:04.327
> 
> 标签：javascript, jquery, ajax

我有一个用户在观看视频后提出问题的页面。我想在任何用户提出问题后立即更新提出的问题数量。我不想重新加载整个页面。我只想更新包含所有问题的特定 div。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T05:32:15.437

你可以用[`jQuery.load()`](http://api.jquery.com/load/)这个。

例如，无论你想用 id= 刷新一些 div `questions`，你都这样做：

```
jQuery('#questions').load('/some_url #questions > *'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T06:11:13.167

您向服务器添加一个页面，该页面仅返回您的问题。

例如，您的整页包含

```
<div id="questions"></div> 
```

然后你在你的服务器上设计一个页面/questions.php，它只返回应该在那个div中的内容

使用 jquery.load 你填写问题 div

```
<script>$(function(){  $("#questions").load("/questions.php")  })</script> 
```

# ios - 如何在不使用 IBOutlet 的情况下以编程方式引用视图

> ID：12399957
> 
> 赞同：3
> 
> 时间：2012-09-13T05:30:41.390
> 
> 标签：ios, uiviewcontroller, interface-builder, uistoryboard

我是 iOS 编程新手，我正在使用 XCode 学习故事板。我的问题是

我已经添加了我想要使用 IB 的视图，但我不想让它们在 IB 中使用 Ctrl+Drag 连接到我的 ViewController，而是以编程方式执行相同的操作。我看过建议在代码中创建视图实例并使用 addSubView() 添加它们（通过设置框架）的帖子。但我不想在代码中硬编码我的框架和大小，我更喜欢 IB。我只需要在需要时参考它们。

在 android 中，我们可以通过布局 XML 上的 getIdByName() 来做同样的事情。我正在寻找类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:35:07.847

在 IB 中，您可以设置`Tag`视图的属性，然后使用以下代码在代码中引用它：

```
int buttonTagNumber = 2;
UIButton *myTaggedButton = (UIButton *)[self.view viewWithTag:buttonTagNumber]; 
```

标签只是一个`int`，您可以拥有任意数量的标签。请注意，如果您在一个层次结构中的 2 个不同视图上具有相同的标签，则行为是未定义的，它将抓取它找到的第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:39:55.317

您可以像这样向下钻取：

```
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"myStoryboard" bundle:nil];
UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"myViewController"];
    UIView *view = [vc.view viewWithTag:1]; 
```

# php - 用valgrind调试php扩展的内存泄漏

> ID：12399960
> 
> 赞同：3
> 
> 时间：2012-09-13T05:30:57.587
> 
> 标签：php, debugging, memory-leaks, valgrind, shared-libraries

有很多“？” 在调试php扩展的内存泄漏时的日志中，因此使用valgrind。建议程序应避免在共享对象上调用dlclose。我怎样才能做到这一点？难道说只能通过修改php的源码来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:56:12.263

您需要为您的 php 构建安装调试符号...许多打包系统使调试包可单独用于发布包。包（如果可用）通常使用约定 php-debug/php-dbg/php53-dbg/php53-debug 命名。

如果它不可用，那么您需要自己编译一个启用调试的 PHP 副本，这样做并且不干扰您当前的安装，通常将 --prefix=/my/private/folder 添加到配置选项就足够了。要启用调试添加--enable-debug，然后您需要重新编译php 扩展（我假设它来自pecl，如果它有泄漏）从make clean 开始，然后是/my/private/folder/bin/phpize。

祝你好运 ：）

# c# - 在 C# 中创建包含来自内存流/字节数组的文件的压缩文档

> ID：12399967
> 
> 赞同：2
> 
> 时间：2012-09-13T05:31:49.427
> 
> 标签：c#, zip, bytearray, memorystream

我需要创建一个压缩文档，其中包含服务器上存在的文件。我正在使用 Ionic.Zip 来执行此操作，并且要创建一个新包（即 zip 文件），我必须具有物理文件或流的路径。我试图不创建一个将是 zip 文件的实际文件，而只是创建一个存在于内存或其他东西中的流。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:49:17.137

您可以尝试 ZipFile 类中的保存方法。它可以保存到流中试试这个。

```
using (MemoryStream ms = new MemoryStream())
{
 using (Ionic.Zip.ZipFile zipFile = new Ionic.Zip.ZipFile())
 {
   zipFile.AddFiles(filesToBeZipped, false, "NewFolder");//filesTobeZipped is a List<string>
   zipFile.Save(ms);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:34:12.963

使用`MemoryStream`then 创建包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T15:45:36.403

您需要在您创建的 ZipFile 上使用 .AddEntry 方法，指定名称和包含实际文件数据的 byte[]。

前任。

```
 ZipFile zipFile = new ZipFile();
    zipFile.AddEntry(file.FileName, file.FileData); 
```

其中 file.FileName 将是条目名称（在 zip 文件中），而 file.FileData 是字节数组。

# python - browserstack.com API 有什么意义？

> ID：12399968
> 
> 赞同：6
> 
> 时间：2012-09-13T05:31:56.150
> 
> 标签：python, selenium, cross-browser, automated-tests, browserstack

[BrowserStack](http://www.browserstack.com)是一个强大的平台，用于针对最新和现代的浏览器测试网站。到目前为止，一切都很好。

BrowserStack 也[提供了一个 API](https://github.com/browserstack/api)

该 API 具有一个工作人员的概念，该工作人员表示加载特定 URL 的特定浏览器（版本）。

我可以用这样的工作实例做些什么有用的事情？

如何将这样的工作人员与 Selenium 测试集成在一起？

如何将这样的工作人员与单元测试（Python）集成？

一个人将如何使用这样的工作者，例如测试一个带有视频播放器的特定网站是否真的会加载和播放视频（例如，用于跨浏览器视频测试）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T07:50:02.503

当前 API 在所有平台/浏览器组合中打开您提供的 url。

所以，如果你打开一个包含大量 JS 测试的 HTML 页面，你需要使用像 Yeti/testswarm/js-test-driver 这样的工具，它会自动从浏览器中获取结果。

另一个使用 BrowserStack API 的例子是[http://ryanseddon.github.com/bunyip/](http://ryanseddon.github.com/bunyip/)

与 Jenkins 的示例集成：http: [//github.com/jquery/testswarm/wiki/Automated-Distributed-Continuous-Integration-for-JavaScript](http://github.com/jquery/testswarm/wiki/Automated-Distributed-Continuous-Integration-for-JavaScript)

对于本地 JS 测试，您将需要使用[localtunnel 之](http://progrium.com/localtunnel/)类的工具来获取本地服务器的公共 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-02T15:39:45.363

当前 BrowserStack API 最有用的功能之一是允许您将会话**标记为失败的测试**。

像任何 Selenium 集线器/节点系统一样，BrowserStack 不知道您*为什么*要向浏览器发送命令。它只是运行您请求的命令。因此，它无法知道测试何时失败。

但是您可以使用 API 告诉它测试失败，以便会话在 BrowserStack UI 中被标记为失败。然后，您可以仅过滤失败的会话以进行调查。

这是在 Java 中，而不是在 Python 中，但这里有一些示例代码，展示了如何更新会话以反映它们代表失败的测试。您只需传入 Selenium 会话 ID（在运行相关测试时需要保存）以及测试失败时出现的异常。

```
import com.mashape.unirest.http.Unirest;
import com.mashape.unirest.http.exceptions.UnirestException;
import com.unblu.automation.support.settings.Prop;
import com.unblu.automation.support.settings.Settings;

import org.openqa.selenium.remote.SessionId;

public class BrowserStackUpdater {

    private void markSessionAsFailed(SessionId sessionId, Throwable e) {
        var url = "https://api.browserstack.com/automate/sessions/" + sessionId + ".json";
        try {
            var userName = "BROWSERSTACKUSERNAMEHERE";
            var key = "BROWSERSTACKKEYHERE";
            var result = Unirest.put(url)
                .basicAuth(userName, key)
                .field("status", "failed")
                .field("reason", e.toString())
                .asString();
            System.out.println("Marking test failed; reply from BrowserStack: " +
              result.getStatus() + " : " + result.getBody());
        }
        catch (UnirestException ue) { ue.printStackTrace(); }
    }

    public void markTestFailedInBrowserStack(Iterable<SessionId> sessionIds, Throwable e) {
        var env = Settings.getString(Prop.runEnvironment);
        if (env.equals("BrowserStack")) {
            for (var sid : sessionIds) {
                markSessionAsFailed(sid, e);
            }
        }
    }
} 
```

# java - 示例 Hello World ILOG Jrule？

> ID：12399969
> 
> 赞同：2
> 
> 时间：2012-09-13T05:31:57.727
> 
> 标签：java, ilog

我是业务规则的新手。我想做一些与 ILOG JRules BRMS 相关的示例。我已经安装了执行服务器和团队服务器。现在如何开始使用 ILOG JRules？

有什么最好的博客/书可以让我学习如何制定规则吗？我需要 hello World 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:48:09.810

获取与 ILOG JRules BRMS 相关的所有信息的最佳位置是此[链接](http://pic.dhe.ibm.com/infocenter/brjrules/v7r1/index.jsp?topic=/com.ibm.websphere.ilog.jrules.doc/html/api/html/ilog/rules/factory/package-summary.html)

在此[链接](https://stackoverflow.com/questions/11451805/working-with-ibm-rule-engine)中，我解释了编写简单业务规则所需遵循的步骤。

# c++ - 使用 fortran / C/ C++ 的独立软件

> ID：12399974
> 
> 赞同：0
> 
> 时间：2012-09-13T05:32:18.977
> 
> 标签：c++, c, fortran, mathematical-optimization

我需要使用**Fortran 和/或 C/C++构建一个****独立的基于 Windows 的软件**。我希望用户下载该程序，安装它并在 Windows 环境中通用地使用它。

 **该软件的主要目的是执行**复杂的非线性优化**，以及可能的**约束优化**。我希望用户使用高度交互的图形用户界面与程序进行交互。实际上，描绘结果用户高端图形是必要的。

我想知道是否可以使用免费提供的 Fortran/C/C++ 库来实现这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:53:38.980

许多（如果不是大多数）（免费提供的）开源优化代码都是用 Fortran 和/或 C/C++ 编写的。如需快速概览，请查看 Hans Mittelmann 的[优化软件决策树](http://plato.asu.edu/sub/pns.html)。

还有[COIN-OR Foundation](http://www.coin-or.org/)，它托管了许多优化代码（我相信大多数是用 C/C++ 编写的）和支持工具。[您可以在此处](http://www.coin-or.org/projects/)找到可用项目的列表。

如果通过*复数*优化指的是*复数*，请查看[这个](https://stackoverflow.com/q/11474970/650012)SO question，以进一步详细说明如何制定涉及复数的优化问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:46:31.677

您可以使用 Fortran 编写计算例程并将所有内容转换为 dll。该应用程序可以用 C++ 编写（例如 Qt 中的 GUI）。对于可视化，C++ 中有很好的库，比如 VTK，否则你可以使用 OpenGl。如果您还需要数字库，例如可以使用 LAPACK。**

# c - unix 文件缺少 EOF

> ID：12399978
> 
> 赞同：0
> 
> 时间：2012-09-13T05:32:41.797
> 
> 标签：c, unix

> **可能重复：**
> [fgetc 无法识别 EOF](https://stackoverflow.com/questions/3977223/fgetc-does-not-identify-eof)
> [fgetc，检查 EOF](https://stackoverflow.com/questions/11057259/fgetc-checking-eof)

我创建了一个文件并在 Unix 中将其命名为“file.txt”。我试图从我的 C 程序中读取文件内容。我无法接收 EOF 字符。Unix不在文件创建时存储EOF字符？如果是这样，那么使用 C 从 Unix 创建的文件中读取 EOF 的替代方法是什么？

这是代码示例

```
int main(){
File *fp;
int nl,c;
nl =0;
fp = fopen("file.txt", "r");
while((c = fgetc(fp)) != EOF){
  if (c=='\n')
    nl++;
}
return 0; 
} 
```

如果我明确给出`CTRL`+ `D`，即使我使用`char c`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:42:58.743

如果`c`is的类型`char`（并且`char`在您的编译器中是无符号的，您可以通过检查 in 的值来检查`CHAR_MIN`）而不是 not ，就会发生这种情况`int`。

根据 C 标准， 的值为`EOF`负。

因此，隐式转换`EOF`为`unsigned char`将失去真正的价值，`EOF`并且比较总是会失败。

**更新**：有一个更大的问题必须首先解决。在表达式`c = fgetc(fp) != EOF`中，`fgetc(fp) != EOF`首先计算（为 0 或 1），然后将值分配给`c`。如果文件中至少有一个字符，`fgetc(fp) != EOF`将评估为 0 并且`while`循环的主体将永远不会执行。您需要添加括号，如下所示：`(c = fgetc(fp)) != EOF`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T05:41:15.023

缺少括号。应该：

```
while((c = fgetc(fp)) != EOF) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T05:55:03.130

记住：`fgetc()`返回一个`int`，而不是一个`char`。它必须返回一个，`int`因为它的一组返回值包括所有可能的有效字符以及一个单独的（负）EOF 指示符。

`char`如果您使用 type for`c`而不是 ，则有两个可能的陷阱`int`：

1.  如果该类型`char`是用您的编译器签名的，您将检测到一个有效字符作为 EOF。通常，字符 ÿ（y-umlaut，在 Unicode 中正式称为 LATIN LOWER CASE Y WITH DIAERESIS，U+00FF，在 ISO 8859-1 aka Latin 1 代码集中的十六进制代码 0xFF）将被检测为等同于 EOF，当它是一个有效的字符。

2.  如果类型`char`是无符号的，那么比较永远不会为真。

这两个问题都很严重，都可以通过使用正确的类型来避免：

```
FILE *fp = fopen("file.txt", "r");
if (fp != 0)
{
    int c;
    int nl = 0;
    while ((c = fgetc(fp)) != EOF)
        if (c == '\n')
            nl++;
    printf("Number of lines: %d\n", nl);
} 
```

请注意，类型是`FILE`而不是`File`。请注意，您应该在尝试通过读取之前检查文件是否已打开`fp`。

* * *

> 如果我明确给出 CTRL + D，即使我使用`char c`.

这意味着您的编译器为您提供`char`了签名类型。这也意味着您将无法准确计算包含 ÿ 的文件中的行数。

* * *

与 CP/M 和 DOS 不同，Unix 不使用任何字符来表示 EOF；当没有更多字符要读取时，您会到达 EOF。让很多人感到困惑的是，如果你在终端输入某个组合键，程序就会检测到 EOF。实际发生的是终端驱动程序识别字符并将任何未读字符发送到程序。如果没有未读字符，则程序返回 0 个字节，这与到达文件末尾时得到的结果相同。因此，字符组合（通常，但不总是，`Ctrl-D`）似乎向程序“发送 EOF”。但是，如果您使用的是字符，则字符不会存储在文件中`cat >file`; 此外，如果您读取包含 control-D 的文件，那是一个字节值为 0x04 的完美字符。如果一个程序生成一个 control-D 并将其发送给一个程序，这并不表示该程序的 EOF。它是 Unix 终端（tty 和 pty — 电传打字机和伪电传打字机 — 设备）的严格属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T05:35:14.880

你没有显示你如何声明`c`它应该是类型的变量`int`，而不是`char`。

# ios - 通过 TestFlightApp.com 分发的生成 IPA 看起来与模拟器和 iOS 设备不同

> ID：12399983
> 
> 赞同：0
> 
> 时间：2012-09-13T05:33:05.663
> 
> 标签：ios, xcode, testflight

如果我使用 Xcode 构建和运行，我有一个在模拟器和 iOS 设备上看起来很棒的项目，但是如果我实现该项目并上传到 TestFlighApp，当我在我之前测试过该项目的同一 iPad 上下载该应用程序时，它看起来不同的。

有谁知道为什么会这样？我不知道如何调试它。

请参考以下示例，两张截图均取自设备，一张使用 IPA，另一张从 iOS 设备上的 Xcode 运行。

![在此处输入图像描述](../Images/4f596d4d5296890bfa9072956503d7dc.png)

那些黑线..我不知道它们来自哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:14:35.523

问题可能`Compress PNG Files`在您的项目`Build settings`中。

还要检查 XCode 方案的构建配置`Run`和`Archive`是否相同（必须是`Release`）。

# zend-framework - 使用模块时 zend 表单给出错误

> ID：12399985
> 
> 赞同：1
> 
> 时间：2012-09-13T05:33:14.950
> 
> 标签：zend-framework, zend-form

我已经开始学习zend框架。我使用的是 1.12 版。我正在使用模块化方法。我创建了一个名为“admin”的模块。按照我的网站结构

```
application/
   (...other directories)
   modules/
       admin/
          controllers/
             IndexController.php
          forms/
             Login.php
          views/
             scripts/
                (...view scripts)
          Bootstrap.php 
```

在这个模块中，我使用 zf 工具创建了一个名为“登录”的表单。谁的类是这样创建的。

```
class Admin_Form_Login extends Zend_Form
{
    public function init()
    {

    } 
} 
```

现在，当我在管理模块的索引控制器中调用此表单时，问题就来了。

```
class Admin_IndexController extends Zend_Controller_Action {
    public function indexAction() 
    {   
        $form = new Admin_Form_Login;
     }
} 
```

它给了我这样的错误。

```
Fatal error: Class 'Admin_Form_Login' not found in E:\xampp\htdocs\novo\application\modules\admin\controllers\IndexController.php on line 13.

I am not sure what I am doing wrong. anybody, please help me. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:23:05.223

我认为您可以执行以下操作： 1\. 启用模块模型的自动加载：在 application.ini 中：

```
resources.modules = []
resources.views = []
resources.frontController.moduleDirectory = APPLICATION_PATH . "/modules" 
```

1.  在**modules/admin/models/Form/Login.php**中创建表单并调用类**Admin_Model_Form_Login**
2.  检查您的模块引导程序。它应该是：

    Admin_Bootstrap 类扩展 Zend_Application_Module_Bootstrap

# html - mp4 文件的 HTML5 视频上的 IE9 解码错误

> ID：12399987
> 
> 赞同：2
> 
> 时间：2012-09-13T05:33:23.357
> 
> 标签：html, video, internet-explorer-9, mp4, codec

我写了一个html5页面，源码如下：

```
<!doctype html5>
....
<video id="vdemo1" controls  width="440" height="248">
  <source src='http://mysite.com/demo.webm' type='video/webm'>
  <source src='http://mysite.com/demo.mp4' type='video/mp4'>
  // fallback codes
</video> 
```

video 标签的输出是一个空的黑盒子。按照此 url 上的说明进行操作：[HTML5 Video not working in IE9 - Some Tips to debug](http://blogs.msdn.com/b/thebeebs/archive/2011/07/20/html5-video-not-working-in-ie9-some-tips-to-debug.aspx)，它会显示 MEDIA_ERR_DECODE 错误代码。但是，我可以右键单击空视口并选择“播放”项目，但视口中不会出现任何内容。右键单击并选择“保存”将mp4文件保存到本地高清，在操作系统下可以正常播放。我什至将视频 src 更改为本地文件，但它没有帮助！

IE9 是否失去了 mp4 编解码器的能力（我确定 mp4 是用 H.264 编码的）？我怎样才能恢复能力？

======= 编辑@ 2012/10/9

发生了一件奇怪的事情。我在第一次运行之前和之后从未运行过 Windows 媒体播放器，如果视频标签的来源是本地文件，则可以播放。但如果是远程网址，则不会。谁能明白为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:50:14.400

1.  重新排序源 - 将 mp4 放在首位！
2.  检查您的服务器是否为您的 mp4 发送了正确的 mime 类型（视频/mp4）。

两者都可以中断播放...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:21:51.880

有时我看到 IE9 无法播放用[B-Frames](http://en.wikipedia.org/wiki/B_frames#Bi-directional_predicted_frames.2Fslices_.28B-frames.2Fslices.29)编码的视频。尝试在没有它们的情况下编码您的视频。您可以通过在命令行中添加选项“-bf 0”来使用 ffmpeg 执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T16:32:16.053

在某些情况下，Internet Explorer 会引发解码错误（MEDIA_ERR_DECODE - 媒体资源被确定为可用后解码发生错误）并且无法播放尺寸不能被 16 整除的视频。例如，它可以完美播放 960x400 的视频（ 960 % 16 == 0 和 400 % 16 == 0 ），但是当将尺寸减小一半（480x200）时，它不会播放（ 480 % 16 == 0 但是200 % 16 != 0 )。

解决此问题的一种方法是将调整大小的视频包含在具有已知良好几何形状的区域中，然后用黑条填充剩余区域以避免扭曲纵横比。为此，我们使用了以下代码，该代码改编自我现在似乎无法追踪的不同 SO 答案：`-vf "scale=iw*min(640/iw\,480/ih):ih*min(640/iw\,480/ih),pad=640:480:(640-iw)/2:(480-ih)/2"`.

# jquery - 如果在 jQuery 中多次单击，则排队功能

> ID：12399990
> 
> 赞同：1
> 
> 时间：2012-09-13T05:33:34.390
> 
> 标签：jquery, ajax, shopping-cart

我正在制作一个按钮，该按钮在单击时提交 AJAX 请求以更新购物车。

问题是，如果用户快速连续单击 a 多次，脚本将无法更新它（例如，在 2 秒内单击 10 次，只添加了两次）。

我想知道是否有排队的ajax请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T05:36:54.670

是的，您可以将 ajax 请求排队，但我更喜欢在请求完成之前禁用该按钮。

浏览器会自动排队ajax请求，但不保证顺序，只是最终都会执行。

如果您需要它们按顺序运行，我通过 google 找到了[http://code.google.com/p/jquery-ajaxq/](http://code.google.com/p/jquery-ajaxq/)，这是一个向 ajax 请求添加队列并确保它们按顺序运行的插件一次不止一个。

对于禁用的按钮，请确保向 ajax 请求添加超时，如果请求超时，则重新启用该按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:44:44.487

您可以通过以下方式实现一个简单的队列：

```
var lock = false, queue = [];
$('#submitButton').click(function (event) {
    var data = ExtractRequestData(); // This function is what you do to get the data you want to send
    PerformRequest(data);
});

function PerformRequest(data) {
    if (!lock) {
        lock = true;
        $.ajax(// perform ajax request
            complete: function (data) {
                // Complete handler
                lock = false;
                if (queue.length > 0) {
                    PerformRequest(queue.shift());
                }
            }
    } else {
        qeueu.push(data);
    }
} 
```

这保证了您在每个请求完成后按顺序执行请求。

# verilog - Verilog 如何处理负数？

> ID：12399991
> 
> 赞同：14
> 
> 时间：2012-09-13T05:33:39.547
> 
> 标签：verilog, negative-number

例如，假设我有一个`reg [7:0] myReg` 我给它赋值`-8'D69`

我知道 Verilog 将其存储为 2 的补码，因此应将其存储为

```
10111011 
```

我现在的问题是，如果我要对其执行操作，比如 myReg/2

它会评估为-34吗？还是将 10111011 转换为 187 然后执行除法，返回 93？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T09:45:48.747

你需要记住这`-8d69`只是一个模式。reg 是一种保存位模式的类型。它是指示`/`执行有符号或无符号算术的变量类型。

如果这是为了综合考虑你想尽量避免使用分隔符，你真的想尝试避免有符号的分隔符。它可能会合成更小`>>> 1`

```
reg [7:0] a;
reg signed [7:0] b;
reg [7:0] c;
reg signed [7:0] d;

initial begin
  a =  -8'd69 ;
  b =  -8'd69 ;
  c =  -8'd69 ;
  d =  -8'd69 ;
  #10ns;
  a = a/2     ;
  b = b/2     ;
  #10ns;
  $display("a      : %8b, %d", a, a);
  $display("b      : %8b, %d", b, b);
  $display("c >>>1 : %8b, %d", c>>>1, c>>>1);
  $display("d >>>1 : %8b, %d", d>>>1, d>>>1);
end 
```

给出：

```
a      : 01011101,  93
b      : 11011110,  -34 
c >>>1 : 01011101,  93
d >>>1 : 11011101,  -35 
```

`>> x`右移 x 位，`>>> x`右移 x 位，但符号扩展为有符号类型。

注意：`/2`在我的示例中也是四舍五入，`>>>`将向下舍入/截断。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T16:07:47.613

> 例如，假设我有一个 reg [7:0] myReg 我给它赋值 -8'D69

这实际上不是一个有符号数，而是一个由应用于正常数的一元否定组成的表达式。如果表达式是`-8'd130`结果将溢出。有符号常量被声明为`8'sd69`或`69`。

> 我现在的问题是，如果我要对其执行操作，比如 myReg/2

`myReg`是无符号的，因此表达式结果也将是无符号的*。如果您需要对结果进行签名，则必须对*所有*操作数进行签名。有几种方法可以实现这一点：

```
//Declare the reg as signed and divide by a signed value
reg signed [7:0] myReg;
assign result = myReg/2;

//Use system functions
assign result = $signed(myReg)/2; 
```

*关于表达式求值的完整规则要复杂得多，但基本上任何表达式的结果都是无符号的，除非所有操作数都有符号。

```
reg signed [7:0] a;
reg [7:0] b;

initial
begin
result = a;            //Signed
result = a * a;        //Signed
result = a * 10;       //Signed
result = $unsigned(a); //Unsigned
result = a[0];         //Unsigned
result = a[7:0];       //Unsigned
result = {a,a};        //Unsigned
result = 10{a};        //Unsigned
result = a + b;        //Unsigned
result = a * b;        //Unsigned
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T22:24:40.347

我将添加 1。默认情况下，数据类型 bit 和 reg 是无符号的。2\. 默认情况下，数据类型 int、integer、longint、shortint 和 byte 是有符号的。3\. 所有这些数据类型都可以使用有符号或无符号限定符来更改默认值。

因此，将 -8'D69 分配给 myReg 会隐式转换为 187。然后，myReg/2 = 187/2 = 93，无符号。了解 SystemVerilog 何时以及如何在表达式和赋值中进行隐式类型转换非常重要。

# c++ - 除非使用完整的相对路径，否则 Eclipse CDT 无法找到包含文件

> ID：12399994
> 
> 赞同：7
> 
> 时间：2012-09-13T05:33:51.393
> 
> 标签：c++, eclipse, include, eclipse-cdt

我使用 Eclipse 已经有一段时间了，这让我很受阻。几周前，我创建了一个名为 ITS8410_LIB 的库，然后在我开发一个名为 Reach_Lib 的支持库时让它坐下来。该目录包括我第一次创建项目时添加的路径，工作正常。今天我完成了Reach_Lib，并去添加它的路径到ITS8410_Lib。我使用项目属性 C++ 设置来添加工作区路径（就像我之前做过很多次一样）。我只有一个构建配置。路径显示在图像中（以蓝色突出显示的是我在这个问题中谈论的特定路径）。

![在此处输入图像描述](../Images/c71acad41033b66bed63ed5aec0370bb.png) 当我将文件包含在源代码中时，Eclipse（我看到黄色问号）和编译器（我收到编译器错误）都无法找到该文件。如果我使用完整的绝对路径语法添加目录路径，结果是相同的。我可以修改源代码并通过当前目录的完整相对路径指定#include，然后找到它。Eclipse 只是不会使用项目设置中指定的路径。这个相同的 Reach_Lib 有一个关联的单元测试项目，并且路径是从那里使用工作区设置指定的，它工作正常。

![在此处输入图像描述](../Images/6e9d1fc8a1cc43ddc485e46a3a460172.png)

今天之前添加的目录路径看起来很好。我今天添加的路径（有两个库显示了这种行为）似乎被忽略了。我查看了编译器设置（见下图），指定给编译器的路径似乎没问题。

![在此处输入图像描述](../Images/2a2d40bbaa3b7fd2d00e6648cec3a941.png)

在 Windows7 64 位下运行（但使用 Eclipse Indigo 的 32 位版本）。我试过了：

1.  重建索引
2.  多次退出并重新启动 Eclipse
3.  工作区和绝对文件路径
4.  修改包含路径的顺序
5.  项目中的不同 .h 包含文件

# 更新

我查看了 .cproject 文件，虽然我不太了解这些文件应该是什么样子，但我认为我有问题。也许问题是：我如何告诉 Eclipse 重建 .cproject 文件？我似乎有两个相似的部分，Eclipse 变得很困惑。我可以看到标记为后缀的不同版本号。在我看来，可视化编辑器让我修改一个部分，但 IDE 和编译器只关心另一部分。这是相关部分

```
... 
```

```
 <folderInfo id="nbeclipse.toolchain.nbl.rel.396284009." name="/" resourcePath="">
                    <toolChain id="nbeclipse.toolchain.nbl.rel.tc.1465290409" name="NetBurner Device Library" superClass="nbeclipse.toolchain.nbl.rel.tc">
                        <targetPlatform id="nbeclipse.toolchain.nbl.rel.tc.targetPlatform.283367649" isAbstract="false" name="NetBurner Module Library" superClass="nbeclipse.toolchain.nbl.rel.tc.targetPlatform"/>
                        <builder buildPath="${workspace_loc:/ITS8410_Lib/Release}" id="nbeclipse.toolchain.nbl.rel.tc.builder.2064025940" keepEnvironmentInBuildfile="false" managedBuildOn="true" name="Release ELF builder (MINGW)" superClass="nbeclipse.toolchain.nbl.rel.tc.builder"/>
                        <tool id="nbeclipse.toolchain.nbl.rel.tc.gcc.278195048" name="GNU C Compiler" superClass="nbeclipse.toolchain.nbl.rel.tc.gcc">
                            <inputType id="nbeclipse.toolchain.nbl.rel.tc.gcc.input.1060035859" name="GNU C Input" superClass="nbeclipse.toolchain.nbl.rel.tc.gcc.input"/>
                        </tool>
                        <tool id="nbeclipse.toolchain.nbl.rel.tc.gpp.767008127" name="GNU C++ Compiler" superClass="nbeclipse.toolchain.nbl.rel.tc.gpp">
                            <option id="nbeclipse.toolchain.super.gcc.directories.includepaths.1666029541" name="Include paths (-I)" superClass="nbeclipse.toolchain.super.gcc.directories.includepaths" valueType="includePath">
                                **inside here is an option list with all my include paths**
                    ...
                </folderInfo> 
```

**然后在 folderInfo 关闭标记之后，另一个 folderInfo 部分开始**

```
 <folderInfo id="nbeclipse.toolchain.nbl.rel.396284009.2022231003" name="/" resourcePath="src">
                    <toolChain id="nbeclipse.toolchain.nbl.rel.tc.1982112905" name="NetBurner Device Library" superClass="nbeclipse.toolchain.nbl.rel.tc" unusedChildren="">
                        <targetPlatform id="nbeclipse.toolchain.nbl.rel.tc.targetPlatform" isAbstract="false" name="NetBurner Module Library" superClass="nbeclipse.toolchain.nbl.rel.tc.targetPlatform"/>
                        <tool id="nbeclipse.toolchain.nbl.rel.tc.gcc.1671008421" name="GNU C Compiler" superClass="nbeclipse.toolchain.nbl.rel.tc.gcc.278195048">
                            <inputType id="nbeclipse.toolchain.nbl.rel.tc.gcc.input.436341699" name="GNU C Input" superClass="nbeclipse.toolchain.nbl.rel.tc.gcc.input"/>
                        </tool>
                        <tool id="nbeclipse.toolchain.nbl.rel.tc.gpp.498310867" name="GNU C++ Compiler" superClass="nbeclipse.toolchain.nbl.rel.tc.gpp.767008127">

                            **the newly added paths don't show up here, if I add them manually things start working** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:58:06.087

答案的关键是由 dbrank0 发布的，但他没有将其提升为答案，所以我只是赞成评论。.cproject 文件出了点​​问题，手动编辑它解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:07:25.247

尝试在包含目录项目设置中将相对工作区路径替换为真实路径（添加与文件系统相同的包含）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:17:51.453

完整的绝对路径在任何时候都可以。使用相对目录时要小心。在eclipse中，当前目录与运行目录不同。

```
string strRunDir, strCurDir;
strRunDir = AfxGetApp()->m_pszExeName;
strCurDir = GetCurrentDirectory(...); 
```

和 strRunDir != strCurDir;

当你想使用相对目录时，你应该参考runDir；

# c# - 使用远程 sql 服务器进行批量插入时出现异常

> ID：12399995
> 
> 赞同：2
> 
> 时间：2012-09-13T05:33:58.690
> 
> 标签：c#, sql-server, sqlbulkcopy

我正在调用一个完整的服务，它反过来在 sql server 数据库中执行批量插入。当休息服务器和数据库服务器在同一台机器上时，一切正常，但在远程数据库服务器的情况下，出现以下异常。

```
System.InvalidOperationException: The transaction associated with the current 
connection has completed but has not been disposed.
The transaction must be disposed before the connection can be used to
execute SQL statements. 
```

我正在使用以下交易。

```
TransactionOptions tOptions = new TransactionOptions();
tOptions.IsolationLevel = IsolationLevel.ReadCommitted;
//This transaction is required here as it checks for all db operations.
using (var transactionScope = new TransactionScope(TransactionScopeOption.RequiresNew, tOptions))
{
    //DB operations....
    transactionScope.Complete();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:25:29.400

在我的 IIS 服务器上配置 windows MSDTC 服务就可以了。

以下链接显示如何配置 MSDTC。

[http://www.deepakkapoor.net/turn-on-msdtc-windows-7/](http://www.deepakkapoor.net/turn-on-msdtc-windows-7/)

# php - 将随机自定义帖子添加到 wordpress 循环

> ID：12399997
> 
> 赞同：2
> 
> 时间：2012-09-13T05:34:06.210
> 
> 标签：php, wordpress-theming, wordpress

我有一个问题我试图解决但运气不佳，我尝试了 google/stackoverflow 等，但我发现的都是“随机帖子”类型的答案

这是问题：

我正在使用一个非常标准的循环来获取我的帖子

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
  <?php $cat = get_the_category();
    if(strtolower($cat[0]->name) != 'hidden'){
  ?> 
```

然后我显示所有的帖子数据等，等等。

我有一个自定义帖子类型，后端有一个选项来限制可以在主页上显示的这些自定义帖子的数量

```
get_option('max_amount') 
```

我想要做的是将一些自定义帖子（自定义帖子类型）与循环中的帖子混合，不超过“max_amount”但我不希望它们彼此相邻，我需要将它们混合在一起。

希望一切都有意义，有人可以帮助或指出我正确的方向

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:52:40.010

如果您将帖子添加到数组中，您可以使用它`shuffle($posts)`来随机化帖子。然后使用`$posts = array_slice($posts, 0, get_option('max_amount')`以确保您不超过最大数量。

# hibernate - 如何在 Hibernate 中编写 ajoin 查询

> ID：12399998
> 
> 赞同：0
> 
> 时间：2012-09-13T05:34:11.487
> 
> 标签：hibernate, jpa

我有一个 hql：

```
q =session.createQuery("from DrugIndentDetails as a where a.drugbase.office.hierarchy_Id=:officeid and a.drugbase.year=:yr and a.drugbase.type=:status and a.drugbase.version=:version  group by a.drugmaster.drugId order by a.drugmaster.drugCode")
     .setParameter("yr", yr)
     .setParameter("officeid",officeid)
     .setParameter("status", status)
     .setParameter("version", version); 
```

在查询的结果中，我想使用连接查询从其他表中选择值

这可能吗！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:29:49.893

请在下面找到使用 Inner Join 的示例 HQL 查询。您可以指定需要内连接、左外连接和右外连接的连接：

```
SELECT * FROM TableOne T1 INNER JOIN TableTwo T2 ON
   T1.Column1 = T2.Column2 WHERE Column2='XXXX' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:27:52.850

作为 Sudhir Mane 的回答，您可以替换`TableOne`为休眠实体，例如`User`，这是您问题的原理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:56:27.890

您可以使用与 SQL 相同的交叉连接：

```
select [columns you need] from TableA a, TableB b
where [condition] 
```